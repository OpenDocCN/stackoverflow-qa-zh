# StackOverflow 问答 12418000-12418999

# ms-access-2010 - oledbexception 对象无效或不再在 MSAccess 2010 中设置

> ID：12418012
> 
> 赞同：1
> 
> 时间：2012-09-14T04:11:49.150
> 
> 标签：ms-access-2010, oledbconnection, oledbcommand

我正在使用 Microsoft Access 2010 作为数据源创建小型库存应用程序。我的连接字符串如下所示：

```
<add name="ApplicationServices"
      connectionString="Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\nityaprakash\Documents\NPSInventory.accdb"
      providerName="System.Data.OleDb" /> 
```

但是当更新任何记录时出现错误**Object Invalid 或不再设置**。我正在使用 OleDbCommand 更新记录，其中将简单更新查询作为 CommandType.Text 传递。

```
 try
    {
       _dataAccess = DataAccess.GetInstance())

            _dataAccess.OpenConnection();

            string command_ = "UPDATE Inventory SET Item = 'MyItem', Description = 'Desc', Category = '', Location = '', Manufacturer = 'CELLo', Model = 'cell101', ReorderLevel = 10, TargetStockLevel = 200, BalanceQuantity =150, Discontinued = 0, Comments = 'Comment' Where ID = 9;";
            IDbCommand cmd_ = _dataAccess.GetCommandFor(command_, CommandType.Text);

            cmd_.ExecuteNonQuery();

    }
    finally
    {
        if (_dataAccess != null)
            _dataAccess.CloseConnection();
    } 
```

# java - Android WebView 播放 HTML5/h.264/mp 4 视频，如何进入 MediaPlayer

> ID：12418014
> 
> 赞同：19
> 
> 时间：2012-09-14T04:12:17.200
> 
> 标签：java, android, webview, android-mediaplayer, webchromeclient

我有一个`Activity`which 是一个`WebView`. 我有一个`WebChromeClient`里面。在其中，有几个回调旨在返回`MediaPlayer`处理视频位。例如：

```
@Override
public void onPrepared(MediaPlayer mp) {
    Log.i(TAG, " -------------> onPrepared");
} 
```

`WebView`当我将 MP4 流加载到使用 HTML`<video>`标记（通过注入）时，这些无法触发。

当我`finish()`进行活动时，logcat 会报告以下内容：

```
09-13 23:55:24.590: E/MediaPlayer(7949): mOnBufferingUpdateListener is null. Failed to send MEDIA_BUFFERING_UPDATE message.
09-13 23:55:24.680: E/MediaPlayer(7949): mOnBufferingUpdateListener is null. Failed to send MEDIA_BUFFERING_UPDATE message.
09-13 23:55:24.680: E/MediaPlayer(7949): mOnVideoSizeChangedListener is null. Failed to send MEDIA_SET_VIDEO_SIZE message.
09-13 23:55:25.675: E/MediaPlayer(7949): mOnBufferingUpdateListener is null. Failed to send MEDIA_BUFFERING_UPDATE message.
09-13 23:55:26.735: E/MediaPlayer(7949): mOnBufferingUpdateListener is null. Failed to send MEDIA_BUFFERING_UPDATE message.
09-13 23:55:27.755: E/MediaPlayer(7949): mOnBufferingUpdateListener is null. Failed to send MEDIA_BUFFERING_UPDATE message.
09-13 23:55:28.705: E/MediaPlayer(7949): mOnBufferingUpdateListener is null. Failed to send MEDIA_BUFFERING_UPDATE message. 
```

尽我所能，我无法让它停止，即使它`WebView`被清除，然后被摧毁。使用`<video>`标签加载视频时，我不知道有什么方法可以强制使用我为它创建`WebChromeClient`的特定内容。`MediaPlayer`似乎决心使用一些隐藏的，它报告了上述内容。有没有办法`MediaPlayer`通过 a`<video>`上的标签找到创建的`WebView`？

- 更新

下面是初始化 WebView 的代码：

```
 mWebView = new WebView(mContext);

        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.getSettings().setPluginState(PluginState.OFF);
        mWebView.setVisibility(View.INVISIBLE);
        mWebView.getSettings().setDefaultZoom(WebSettings.ZoomDensity.FAR);
        mWebView.getSettings().setBuiltInZoomControls(false);
        mWebView.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE);
        mWebView.getSettings().setLoadWithOverviewMode(true);
        mWebView.getSettings().setUseWideViewPort(true);
        mWebView.clearHistory();
        mWebView.clearFormData();
        mWebView.clearCache(true);
        mWebView.getSettings().setAllowFileAccess(true);
        mWebView.getSettings().setUserAgentString("Android Mozilla/5.0 AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30");

        chrome = new MyWebChromeClient();
        mWebView.setWebChromeClient(chrome);

        wvc = new MyWebViewClient();
        mWebView.setWebViewClient(wvc);

        mDomain = "http://foo.bar.com";
        mWebView.requestFocus(View.FOCUS_DOWN);

        String meat = genMainHTML(R.raw.frame);

        mWebView.loadDataWithBaseURL(mDomain, meat, "text/html", "utf-8", null); 
```

“帧”代码是一个 iframe 来启动一些视频（至少 Vimeo 和 YouTube 似乎都采用这种方法）。我对它进行了一些修剪以避免杂乱无章：

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
<div>
     <iframe src="-target.url.with.params-" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen>
     </iframe>
</div>
</body>
</html> 
```

在该 WebView 类中，存在此类：

```
private class MyWebViewClient extends WebViewClient {

    @Override
    public void onPageFinished(WebView view, String url) {
            super.onPageFinished(view, url);
            String injection = injectPageMonitor();
            if(injection != null && !injectionComplete) {
                // Log.i(TAG, " ---------------> Page Loaded . . .");
                view.loadUrl(injection);
                injectionComplete = true;
        }
    }

    @Override
    public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
            Log.d(TAG, "*** Error ["+description+"] ["+failingUrl+"]");
        Toast.makeText(mContext, description, Toast.LENGTH_SHORT).show();
    }

} 
```

还有这个类：

```
 private class MyWebChromeClient extends WebChromeClient implements MediaPlayer.OnInfoListener, MediaPlayer.OnSeekCompleteListener, MediaPlayer.OnErrorListener, MediaPlayer.OnVideoSizeChangedListener, MediaPlayer.OnCompletionListener, MediaPlayer.OnPreparedListener, MediaPlayer.OnBufferingUpdateListener {

       @Override
       public void onProgressChanged(WebView view, int progress) {
           //Log.e(TAG, " -------------> Progress Changed . . . . ["+progress+"] mWebView ["+mWebView+"] ["+view+"]");
           if(progress == 100) {
                               // Do something really interesting
           }  else  {
               updateBuffering(UPDATE_PERCENT_LAUNCH_EXTRACTOR + (progress / 2));
           }
       }

       @Override
       public boolean onConsoleMessage(ConsoleMessage cm) {
                       // Spit out lots of console messages here
           return(true);
       }
   } 
```

而且我已经覆盖了所有常见的嫌疑人，以防万一我幸运并从 MediaPlayer 得到一些响应：

```
 @Override
    public void onBufferingUpdate(MediaPlayer mp, int percent) {
        // Jump up and down because we got a mp!
                    // never happens, so no jumping
    } 
```

作为旁注，我确实使用反射进行了挖掘，并通过这种方式获得了 MediaPlayer，但在做那种事情之后我总是觉得有点古怪。即使我有 MediaPlayer 对象，我也不愿意发布它。稍微研究一下 MP 的源代码表明不会发生任何不好的事情，但是 . . .

我注意到，并非每台设备都发生这种情况。例如，HTC 的表现似乎比三星好（“相同的”操作系统/API 级别——我并没有足够的野心来比较两个源代码树）。

下面提到的行为很烦人，但仅对我来说（正在观看 logcat 输出。对于用户或应用程序来说，它似乎没有效果。只是我真的不喜欢我正在启动 MediaPlayer 实例的概念，设置它忙着缓存起来，然后（如果/当用户终止我的应用程序时）把那个 dingleberry 挂在那里。此时我有很多钱用于治疗，它似乎没有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T23:01:14.323

没有反射就无法访问 MediaPlayer - WebViewClient 和 WebChromeClient 不会故意公开它。而且您说使用反射可能会导致您破坏您的应用程序或 WebView 是正确的，因为代码可能会因 Android 版本甚至 OEM 的不同而有所不同。

如果您想这样做，您必须找到与您的视频元素相对应的 HTML5VideoView 实例。此对象创建并维护 MediaPlayer 的一个实例作为“mPlayer”。请参阅[https://github.com/android/platform_frameworks_base/blob/jb-mr2-release/core/java/android/webkit/HTML5VideoView.java](https://github.com/android/platform_frameworks_base/blob/jb-mr2-release/core/java/android/webkit/HTML5VideoView.java)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T07:53:09.670

in your class

```
private class MyWebChromeClient extends WebChromeClient 
                                implements ..... MediaPlayer.onCompletion {
} 
```

adding

```
@Override
public void onCompletion(MediaPlayer mp) {
    // TODO Auto-generated method stub
    mp.release();           
} 
```

gets rid of the error messages for me after the webview closes.

Now if only I could get the webview to play/stream vimeo videos :(

# javascript - Three.js - 编辑平面几何

> ID：12418016
> 
> 赞同：0
> 
> 时间：2012-09-14T04:12:48.270
> 
> 标签：javascript, 3d, webgl, three.js, terrain

所以，我想做一个简单的地形编辑器。因此，在 mouseDown 上，我希望选定的面向上移动。相交效果很好，我尝试像这样修改几何：

```
 var intersects2 = ray.intersectObjects([plane]);
        if (intersects2.length > 0) {
            var face = intersects2[0].face;
            var obj1 = intersects2[0].object;

            var geo = obj1.geometry;

            geo.vertices[face.a].z += 50;
            geo.vertices[100].z += 50;
            geo.vertices[0].z += 50;

            geo.computeVertexNormals();
            geo.computeFaceNormals();

            geo.__dirtyVertices = true;
            geo.__dirtyNormals = true;

            console.log(face.a);

        } 
```

控制台日志显示正确的顶点索引，但平面上没有任何移动。任何想法为什么？

飞机是这样创建的：

```
 var planegeo = new THREE.PlaneGeometry( 500, 500, 10, 10 );
    planegeo.dynamic = true;
    plane = new THREE.Mesh( planegeo, new THREE.MeshPhongMaterial( { color: 0x99ff66 } ) );
    plane.receiveShadow = true;
    scene.add( plane ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:46:32.473

查看您的代码，您似乎使用的是 R49 之前的语法。可能只是您需要将脏标志代码更新为（假设您现在使用的是更新的库！）：

```
geo.verticesNeedUpdate = true;
geo.normalsNeedUpdate = true; 
```

# php - Paypal 动态按钮和 IPN 链接

> ID：12418019
> 
> 赞同：0
> 
> 时间：2012-09-14T04:13:00.460
> 
> 标签：php, paypal, paypal-ipn

我已经看到了一些这样的问题。但我想对其中一些问题有一个整体的看法，结合起来！

我了解 IPN 的工作原理以及如何聆听以确保它来自贝宝。

我的主要疑惑是我是否要使用以下代码动态生成贝宝按钮：

```
<form name="_xclick" action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_xclick">
<input type="hidden" name="business" value="me@mybusiness.com">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" name="item_name" value="Teddy Bear">
<input type="hidden" name="amount" value="12.99">
<input type="image" src="http://www.paypal.com/en_US/i/btn/btn_buynow_LG.gif" border="0" `enter code here`name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
</form> 
```

从贝宝开发者网站：[https ://www.paypal.com/cgi-bin/webscr?cmd=_pdn_xclick_techview_outside](https://www.paypal.com/cgi-bin/webscr?cmd=_pdn_xclick_techview_outside)

使用它安全吗？我正在阅读另一篇文章，说这是不安全的，因为变量可以被篡改。我需要加密表格吗？

干杯，

缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:38:45.670

我只是要回答我自己的问题。解决方案是仅比较“item_name”和“amount”变量，并确保它们完全相同，如果说我使用数据库生成的话。如果有人篡改它并付给我 1.00 美元而不是 100.00 美元，那么这就是免费捐赠，对他们来说运气不好：P

我要做的是：

1.  创建一个数据库来存储项目名称、金额、货币等。
2.  在购物页面上，我将使用 item_name 和 amount 动态生成它
3.  设置我的贝宝以将交易发送到我将进行的 IPN 侦听器
4.  使用数据库比较 item_name 和 amount，它将验证它是否是有效的表单提交。

简单的！我喜欢！哇！

# ios - objc_retain EXC_BAD_ACCESS

> ID：12418020
> 
> 赞同：7
> 
> 时间：2012-09-14T04:13:03.373
> 
> 标签：ios, exc-bad-access

在使用我当前的 iOS 5 应用程序在 iOS 6 上进行测试时，我遇到了一些错误。

我们经历了一个在内部使用块但不作为属性的无害方法的方法返回锁定。问题是调用该方法有效，该方法中的每一行代码（包括使用代码的块）也是如此

我在调用块之前尝试使用 [块复制]，但绝对没有变化。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-14T04:13:03.373

原来我的代码的函数定义是在内部接口中声明的，并且没有返回类型。

这里有一些图表来说明这个问题。

最初的错误

![最初的错误](../Images/3be35133001852bd5435825724fd4f07.png)

堆栈轨道

![堆栈跟踪](../Images/75166b364678af9ff419a1bc734dd4ec.png)

有问题的方法（与自身隔离以确定问题的确切位置）

![有问题的方法](../Images/fa48a7b159b8695db56a397c0af4f690.png)

函数实现（这是被调用并返回的）

![执行线](../Images/2f216069354ea582e35217d03c64cb17.png)

私有接口中的定义

![私有接口中的定义](../Images/b972e49efcbf57d5f5f9257bb4017531.png)

我决定查看函数调用，并注意到它返回 (id) 而不是 void

![函数返回 (id)](../Images/e2aeb43bc33fbc2f88864ef6a1a0ef2f.png)

最后，唯一减轻此错误的代码更改。

![代码更改](../Images/cebb09ecb55ede32eab3dd8307fe0aaf.png)

**解释**

当我的客户打电话给我说我们的应用程序不能在 ios 6 上运行时，这个 bug 出现了

我被迫下载 iOS 6 和 Xcode 4.5 进行测试。

每次运行应用程序时，我确实崩溃了。

在谷歌链接的其他站点中寻找堆栈溢出的这个错误之后，我尝试了其他一些人遇到的阻塞问题。并尽我所能复制一份以尝试减轻保留对象从堆栈中脱落的问题。

我没有使用块属性，所以我只是在块本身上调用了副本。

这没有帮助。

最后与另一位开发人员一起与我一起讨论。我退后一步，从另一个角度看待它，并决定尝试确定到底保留了什么。

原来函数的结果被保留了。我想出来的唯一方法是查看自动完成显示我作为返回类型的值。

我知道返回类型是无效的，但是它告诉我返回类型是 id，这就是引发对方法定义的调查的原因。

我希望这可以帮助其他有这个问题的人，因为我花了大约 2 个小时来寻找它，结果证明这是一个不应该存在的结果类型之间的语义问题。

# java - Java 线程行为

> ID：12418023
> 
> 赞同：1
> 
> 时间：2012-09-14T04:13:13.747
> 
> 标签：java

我在网上看到了下面的例子：

```
public class TwoThreads {
public static class Thread1 extends Thread {
    public void run() {
        System.out.println("A");
        System.out.println("B");
    }
}
public static class Thread2 extends Thread {
    public void run() {
        System.out.println("1");
        System.out.println("2");
    }
}
public static void main(String[] args) {
    new Thread1().start();
    new Thread2().start();
} 
```

}

我的问题是：

1.  保证“A”会在“B”之前打印，“1”会在“2”之前打印，但是“1”是否有可能被另一个线程连续打印两次？在这段代码中，我们至少有 3 个线程（1 个主线程和 2 个创建线程）。我们可以想象调度器运行 1 个线程：new Thread1().start(); 然后在 System.out.println("1"); 之后立即放弃 然后再次在 Thread1().start() 中运行另一个威胁；再次打印“1”？

2.  我正在使用 NetBeans IDE，似乎运行这样的程序总是会导致相同的第一个结果，所以似乎有一些缓存。据我了解，您通过声明 volatile 变量来处理这个问题，可以在这里完成吗，如何？如果不是，那么缓存的解决方案是什么？

3.  在今天的计算机处理器中，我们大多有2个处理器，但我们仍然发现网上很多多线程程序都使用2个以上的线程！这个过程在编译方面不是变得繁重而缓慢吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:17:50.390

1) 无法保证线程将按什么顺序进行。

2) 但是，顺序也不是随机的。因此，如果您在相同（或非常相似）的条件下运行程序，它可能会产生相同的线程交错。如果您需要某种行为（包括随机行为），您需要自己同步事物。

3) 一个有两个核心的 CPU 只能同时运行两个线程，但大多数线程大部分时间都不是真正使用 CPU，而是等待 I/O 或用户交互之类的事情。因此，您可以从拥有两个以上的线程中获得很多收益（只有两个可以同时计算，但数百个可以同时等待）。看看 node.js，它是最近流行的多线程编程替代方案，它在只有一个执行线程的同时实现了并发请求的高吞吐量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T04:20:27.067

回答您的 1/2 问题：虽然线程在线程的 run 方法中运行并行代码，但始终按顺序执行。

回答你的 3 个问题，你可以最好地调整你的。应用程序如果处理器数 = 线程数，但这不是一个完整的事实，因为如果线程正在等待某个阻塞操作，那么它将导致未优化的性能，因为在此期间另一个线程可以运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T04:21:24.683

1.  不。您没有以任何方式同步您的线程，因此确切的执行顺序将由调度程序决定。鉴于您的线程是如何实现的，我看不出您如何能够让单个线程打印两次“1”（或“A”）。

2.  什么缓存？以及什么变量？您的示例代码没有变量，因此不适合与`volatile`关键字一起使用。在运行该程序的给定机器上，很可能总是会产生相同的结果。如 #1 中所述，您受调度程序的支配。如果调度程序始终以相同的方式运行，您将始终得到相同的结果。缓存与它无关。

3.  这取决于线程在做什么。如果每个线程都有足够的工作将一个 CPU 核心加载到 100%，那么是的，拥有比 CPU 核心更多的线程是没有意义的。但是，这种情况很少见。许多线程将大部分时间都花在休眠或等待 I/O 完成，或以其他方式执行要求不足以完全加载 CPU 内核的事情。在这种情况下，拥有比 CPU 内核更多的线程没有任何问题。事实上，多线程早于主流的多核 CPU，即使在我们没有超过一个 CPU 核心的时代，拥有多个线程仍然是非常有益的。

# java - JPanel 上的 Java Path2D.Double 涂有“尾巴”

> ID：12418024
> 
> 赞同：0
> 
> 时间：2012-09-14T04:13:20.667
> 
> 标签：java, drawing, jpanel, java-2d, path-2d

在 JPanel 上绘制 Path2D 时，我有一个奇怪的行为。

正如您在此屏幕截图中看到的那样，一些形状有点像尾巴：

![在此处输入图像描述](../Images/a698e6c0d3c7c81115132173ae6e5870.png)

当我将类型更改为 Line2D.Double 时，正如我所期望的那样：

![在此处输入图像描述](../Images/0695d22c25de8423ed25a456443d3f8c.png)

这是绘制路径/线的代码：

```
Path2D.Double path = new Path2D.Double();
Graphics2D g = (Graphics2D)this.getGraphics();
for(int i=0; i<geom.size(); i++)
{
    double x = ddGeom.getX(geom.get(i));
    double y = ddGeom.getY(geom.get(i));
    if(i==0)
        path.moveTo(x-draw_center.x, y-draw_center.y);
    path.lineTo(x-draw_center.x, y-draw_center.y);
}
g.draw(path); 
```

您知道 Screenshot1 中的“尾巴”来自哪里吗？我使用 SDK 版本 6。

非常感谢您的帮助

编辑：将代码段更改为

```
if(i==0)
     path.moveTo(x-draw_center.x, y-draw_center.y);
else
     path.lineTo(x-draw_center.x, y-draw_center.y); 
```

大多数（可能是 75%）的尾巴消失了。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:23:28.120

我终于明白了。多亏了 HovercraftFullOfEels 提示“奇怪的中风”，我玩了自己的中风。原笔画：

```
BasicStroke stroke = new BasicStroke(2.0f); 
```

变成：

```
BasicStroke stroke = new BasicStroke(2.0f, BasicStroke.CAP_BUTT, BasicStroke.JOIN_BEVEL); 
```

有了新的 Stroke，所有的“尾巴”都消失了。我仍然不明白为什么会发生这种情况，但如果有人遇到同样的问题，这种解决方法可能会有所帮助。

我仍然对这种行为的解释非常感兴趣。

感谢您的大力帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-06T12:13:43.963

您在第一张图片中看到的几乎就像“斜接”。斜接是一种在路径中绘制线连接的方法，连接线的两个外边界一直延伸到它们相交并且封闭区域也被填充。

您的几何图形是否可能包含具有几乎相同坐标的连续点？以下示例展示了相同的问题，因为最后两个点具有几乎相同的坐标。

```
JFrame frame = new JFrame();

frame.setSize(300, 300);
frame.setContentPane(new Container() {
    @Override
    public void paint(Graphics graphics) {
        Graphics2D g2 = (Graphics2D) graphics;
        g2.setStroke(new BasicStroke(5));
        g2.setRenderingHint(KEY_ANTIALIASING, VALUE_ANTIALIAS_ON);
        g2.setRenderingHint(KEY_STROKE_CONTROL, VALUE_STROKE_PURE);

        Path2D.Double path = new Path2D.Double();
        path.moveTo(200, 100);
        path.lineTo(100, 100);
        path.lineTo(101, 100.3);

        g2.draw(path);
    }
});

frame.setVisible(true); 
```

![](../Images/10c144bac1a6f06ee99e473b2ee6adce.png)

# mysql - SQL - ',' 附近的语法错误

> ID：12418027
> 
> 赞同：1
> 
> 时间：2012-09-14T04:13:57.850
> 
> 标签：mysql, sql, sql-server, insert

无论我尝试使用哪个本地数据库（oracle、mysql、microsoft sql），我都无法弄清楚为什么这个查询不起作用。

```
INSERT INTO testtable
VALUES ( 'testvalue' , 12345678, 123.04, 0, '1950-01-03' ) 
```

例如，对于 Microsoft SQL Server，我在“，”附近出现错误。

使用 MySQL 我得到

第 2 行的“12345678,123.04,0,)”附近的 SQL 语法有错误。

我试过玩它，我看过 W3 学校的 INSERT INTO 语法。一切看起来都很好。会是什么呢？

谢谢！

编辑：

根据要求：这是 mysql 的布局

```
+------------+--------------+------+-----+-------- -+--------+
| 领域 | 类型 | 空 | 钥匙 | 默认 | 额外 |
+------------+--------------+------+-----+-------- -+--------+
| 测试字符串 | varchar(600) | 否 | | 空 | |
| 测试整数 | 整数(11) | 否 | | 空 | |
| 测试双 | 双 | 否 | | 空 | |
| 测试布尔 | 小整数(1) | 否 | | 空 | |
| 测试日期 | 日期 | 否 | | 空 | |
+------------+--------------+------+-----+-------- -+--------+
```

另外，应该注意的是，我可以使用这些值运行参数化查询，它会工作得很好。只有当我手动创建查询时才会出现问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T04:42:01.020

[从这个SQL Fiddle](http://www.sqlfiddle.com/#!2/cc752/1)可以看出，您的架构或语法没有任何问题。

我的猜测是您一次运行多个语句并且没有正确分隔每个语句。例如：

```
INSERT INTO testtable
VALUES ( 'testvalue' , 12345678, 123.04, 0, '1950-01-03' )

INSERT INTO testtable
VALUES ( 'testvalue' , 12345678, 123.04, 0, '1950-01-03' ) 
```

会导致错误。然而：

```
INSERT INTO testtable
VALUES ( 'testvalue' , 12345678, 123.04, 0, '1950-01-03' ); --End statement with ;

INSERT INTO testtable
VALUES ( 'testvalue' , 12345678, 123.04, 0, '1950-01-03' ); 
```

...会运行良好。您也可能在某个地方有一个未关闭的杂散开引号，导致您的部分语句成为另一个字符串常量的结尾部分。*准确*验证您正在运行的内容，因为您发布的代码将按原样正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T04:16:06.023

值的格式取决于你的列的数据类型，但另一方面总是用`'`除了**int** dataType来包装你的值

尝试

```
INSERT INTO testtable
VALUES ( 'testvalue' , '12345678', '123.04', '0', '1950-01-03' ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T04:31:00.790

```
INSERT INTO testtable(column1,column2,column3,column4,column5) 
VALUES ( 'testvalue' , 12345678, 123.04, 0, '1950-01-03' ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T05:03:19.263

```
INSERT INTO testtable (TestString,TestInt,TestDouble,Testbool,TestDate ) 
VALUES ( 'testvalue' , '12345678', '123.04', '0', '1950-01-03' ) 
```

尝试这个...

# c++ - C++ 建模一个动态的对象板

> ID：12418030
> 
> 赞同：0
> 
> 时间：2012-09-14T04:14:34.807
> 
> 标签：c++

我正在设计一个 C++ 控制台程序，它为`Shapes`. 唯一的规则是所有`Shapes`放在棋盘上的东西都必须添加到现有棋盘上`Line`（第一步除外）。每当 a`Shape`放在棋盘上时，它`Line`在水平和垂直方向上都有 a，即使它是该行的唯一成员。

我已经很好地实现了`Line`和对象。`Shape`我正在努力解决的问题是如何组织线条。给线一个位置（如在 ax,y 坐标中）似乎不是一个好主意，因为板是动态的，可以向任何方向扩展。现在每条线只有一个方向，垂直或水平。我还需要能够将板打印到控制台，以便用户可以指示他们想要添加的位置。

有没有人对如何有效地模拟这种情况有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:29:32.960

目前尚不完全清楚规则是什么，但如果您担心自由扩展的网格，您可以考虑将`Shape`对象存储在地图中：

```
typedef std::pair<int,int> TGridPos;
typedef std::map<TGridPos,Shape> TGrid; 
```

也许您可以详细说明游戏玩法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T06:19:33.087

允许 x 和 y 中的负位置。这将允许棋盘在所有方向上均等地扩展（除了正数和负数的整数值减一），而无需更改坐标。

你的问题是如何显示它。如果您存储 min 和 max x 和 y 索引，您将使用类似的 for 循环

```
for(int x = minX; x <= maxX; ++x) {
    for(int y = minY; y <= maxY; ++y) {
        // display at x,y
    }
} 
```

而不是 from x=0 和 y=0 这很常见。这很清楚，避免了随着板的扩展而改变任何索引值的概念，并允许您使用索引。

# database - csv 转核心数据

> ID：12418032
> 
> 赞同：1
> 
> 时间：2012-09-14T04:14:38.707
> 
> 标签：database, xcode, core-data, csv

我是核心数据的新手。如何将 fileName.csv 导入 Xcode 核心数据项目。我应该从什么类型的应用程序开始。数据不需要更改。我应该能够搜索特定对象并找到它。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T04:31:03.230

Firstly store csv file data to NSArray refer [convert-csv-format-into-nsarray](https://stackoverflow.com/questions/4507636/iphone-how-to-convert-csv-format-into-nsdata-or-nsstring) link.

Now to save a NSArray/NSMutableArray in Core Data refer [NSArray/NSMutableArray in Core Data](http://coderwall.com/p/mx_wmq) link.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T04:19:53.273

如果数据没有改变，那么我建议不要使用 Core Data。您可以导入 csv 数据（在 google 上搜索，Objective-C 有几个 csv 解析器）并将该信息存储在 NSDictionary 中。

# java - 构建 Java 库并捕获异常

> ID：12418035
> 
> 赞同：0
> 
> 时间：2012-09-14T04:15:01.847
> 
> 标签：java, exception

我正在构建我的第一个 Java 库。该代码使用了很多 IO 方法，因此您可以想象有很多异常需要捕获。但我想知道，我应该抛出异常吗？我的意思是，捕捉异常肯定是应用程序编写者的工作。因为即使我抓住了它们，我也不知道应用程序在发生这种情况时会做什么。

我应该抛出 IOExceptions 等，还是应该在库代码中捕获它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T05:23:09.287

**只有在可以处理的情况下，您才**应该处理异常——即，如果您的库对如何处理异常有足够的了解。

**这是您应该**处理异常的示例：

*   图书馆收到用户的请求
*   库尝试读取配置文件
*   因为找不到配置文件，所以出现 IOException
*   库捕获异常并回退到使用默认配置（可能向用户发出没有配置文件的警告）

**这是一个不应**处理异常的示例

*   图书馆收到用户的请求
*   尝试从请求中的字符串解析整数时处理请求失败（获取 NumberFormatException）
*   库无法处理异常 - 假设默认值（例如 0）会很危险
*   异常被抛出给用户让他们处理

如果您要向用户抛出异常，**捕获并重新抛出**异常通常是一种好习惯——这使您能够将其包装在您自己的自定义异常类中，并可能添加额外的消息/详细信息等。

通常请记住，如果您想编写一个好的软件组件，那么它应该具有[快速失败的行为](http://en.wikipedia.org/wiki/Fail-fast)。如果有疑问，您应该失败并让用户知道（通过异常），而不是尝试在不合理的基础上继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T04:53:27.830

是的，这是一种常见的做法。但请确保尽可能多地抛出特定方法在运行时可能发生的所有适当异常。除此之外，根据[Effective Java - Second Edition](http://uet.vnu.edu.vn/~chauttm/e-books/java/Effective.Java.2nd.Edition.May.2008.3000th.Release.pdf) Item 62 -“记录每个方法引发的所有异常”。您可能永远不知道何时可以在下一个项目中重复使用或包含您正在处理的库。

> 有关详细信息，请阅读本书的第 9 章。

# python - 在没有 shell 访问权限的情况下安装 Python 模块

> ID：12418036
> 
> 赞同：0
> 
> 时间：2012-09-14T04:15:07.147
> 
> 标签：python, shell, module, nltk

我正在尝试将[NLTK](http://nltk.org)安装到我没有 shell 访问权限的服务器上。不过，我可以完美地运行 Python 代码。NLTK 的安装[说明](http://nltk.org/install.html)没有详细说明我应该如何去做。如果可能，我想将 NLTK 安装在 /modules 文件夹中，并将未来的模块保存在同一文件夹中。我应该怎么办？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:18:47.147

您不需要 sudo 访问权限即可在服务器上运行 NLTK，只需将软件包安装在您自己的空间中即可。首先，我会尝试`easy_install`不使用`sudo`. 但也许没有`easy_install`，或者服务器阻止你启动任意进程——我会的。

在这种情况下，将所需的模块收集到`site-packages`您的 home box 的文件夹中。一旦你让它在那里工作，你可以将它放到服务器上并调整 PYTHONPATH（或`sys.path`从 python 内部）来找到它。我已经做到了，这非常简单。如果你能看到 python 在服务器上找不到东西时抛出的错误，你可以很容易地添加你第一次忘记的任何包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T04:21:54.950

这是一个想法；非常俗气，但它应该工作：

使用 python`os.system`在 shell 上通过 python 执行命令。

在说明说的地方`sudo easy_install pip`，请在 python 中执行此操作：

```
os.system("sudo easy_install pip") 
```

但是，这样做的问题是提供 sudo 密码变得很困难。这可以通过以 sudo 用户身份运行 python 来解决（假设您能够这样做）并且他们执行`os.system("easy_install pip")`.

此外，[这篇文章](https://stackoverflow.com/questions/4112737/how-to-gain-root-privileges-in-python-via-a-graphical-sudo)可能有助于解决`sudo`困难

希望这可以帮助

# jquery - jQuery Datatable 多选在带有分页的第 2 页中不起作用

> ID：12418039
> 
> 赞同：0
> 
> 时间：2012-09-14T04:15:53.093
> 
> 标签：jquery, datatable

我正在为我的应用程序使用数据表，多选在第一页中工作，但似乎不适用于带有分页的第 2 页和第 3 页。

代码是，

```
 $(document).ready(function() {   
        $('#example tr').click( function() {
            $(this).toggleClass('row_selected');
        } );    
    } ); 
```

而CSS是

```
table.display tr.even.row_selected td {
background-color: #efefef;
}

table.display tr.odd.row_selected td {
background-color: #efefef;
} 
```

我还应该包括什么才能使多选适用于其他页面？还是代码有什么问题？

请帮忙

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:20:26.583

2 东西..

1.确保在您的第2页和第3页中包含js代码

2.可能你`tr`是动态生成的..你需要`delegate`

```
 $(document).ready(function() {   
        $('#example').delegate('tr','click', function() { //example -> tableid
            $(this).toggleClass('row_selected');
        } );    
    } ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T04:25:00.663

您正在动态修改 dom，因此如果使用 jQuery 1.7+，则需要使用 .delegate 或 .on 进行委托

```
$(document).ready(function() {   
    $('#example').on('click','tr', function() { 
        $(this).toggleClass('row_selected');
    } );    
}); 
```

或者如果使用 jQuery 1.6 及更低版本

```
$(document).ready(function() {   
    $('#example').delegate('tr', 'click', function() { 
        $(this).toggleClass('row_selected');
    } );    
}); 
```

通过委派您将事件处理程序绑定到父元素。然后它会侦听事件何时冒泡。例如，当您单击 tr 时...`document`在此示例中它会冒泡然后文档处理事件。 .

如果您尝试以常规方式绑定它

前任

```
$('tr').click()function(){}); 
```

或者

```
$('tr').bind('click',function(){}); 
```

或者

```
$('tr').on('click',function(){}); 
```

他们希望 tr 元素在 dom 准备好时可用 - （如果你将代码放在 document.ready 函数中） - 否则不会有任何事件绑定到元素

# php - 数据生成器和 WAMP 服务器

> ID：12418042
> 
> 赞同：0
> 
> 时间：2012-09-14T04:16:09.300
> 
> 标签：php, sql, database, wamp

我无法使用 WAMP 激活以下脚本：

[http://www.generateddata.com/#download](http://www.generatedata.com/#download)

我试图将它移动到 C:\wamp\www 目录并最终这样做：

[http://s39.photobucket.com/albums/e191/mistamike888/?action=view¤t=Image1.jpg](http://s39.photobucket.com/albums/e191/mistamike888/?action=view&current=Image1.jpg)

我对 WAMP 和整个设置的工作原理知之甚少，如果有人能指出我正确的方向，我将不胜感激。

谢谢。

编辑：顺便说一句，我知道我需要使用 PHPMyAdmin 将 .sql 文件上传到安装文件夹中，这就是我所得到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:26:57.937

添加：

```
set_include_path(get_include_path() . PATH_SEPARATOR . dirname(__FILE__)); 
```

到 index.php 的顶部（下`<?php`位）。

# ruby-on-rails - Google Apps 配置 API：HTTPBadRequest 400 错误请求错误

> ID：12418043
> 
> 赞同：0
> 
> 时间：2012-09-14T04:16:10.947
> 
> 标签：ruby-on-rails, ruby, oauth, google-api, google-apps-marketplace

我创建了一个 Google Apps Marketplace 应用程序，我试图通过调用 Google Apps Provisioning API 来获取 Google Apps 域的所有用户的列表，但无法克服此错误：

```
#<Net::HTTPBadRequest 400 Bad Request readbody=true> 
```

这是我正在使用的代码：

```
consumer = OAuth::Consumer.new(my_google.oauth_key,
                               my_google.oauth_secret,
                               :site => 'https://apps-apis.google.com/a/feeds/user/#readonly',
                               :http_method => :get)
access_token = OAuth::AccessToken.new consumer
result = access_token.get("https://apps-apis.google.com/a/feeds/my_domain.com/user/2.0?alt=json") 
```

我的 Google Apps 清单文件中也有这个：

```
<Scope id="scopeUsers">
  <Url>https://apps-apis.google.com/a/feeds/user/#readonly</Url>
  <Reason>Our App will be setup for your entire domain.</Reason>
</Scope> 
```

我已经验证了 oauth_key 和 secret 并尝试了许多其他可能性，但无法深入了解这一点。我在这里有什么遗漏吗？我可以尝试其他任何选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:40:12.857

HTTP 响应还包含一个更具描述性的错误消息，解释您的请求无效的原因。我不知道 Ruby 库，但必须有一种方法可以访问该字段。如果没有，您还可以使用 Wireshark 或 Fiddler 之类的工具来捕获流量并检查响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:56:02.247

我想通了这个问题。这是 OAuth gem 版本的问题，我使用的是 OAuth 0.4.6，需要使用 OAuth 0.4.5 才能与我使用的语法兼容。

# sql - 如何在另一个数据库服务器上运行 T-SQL？

> ID：12418044
> 
> 赞同：3
> 
> 时间：2012-09-14T04:16:11.500
> 
> 标签：sql, tsql, sql-server-2005, linked-server

我想从另一台服务器中的另一个数据库中选择一些数据。

我所知道的是添加一个链接服务器，并运行 T-SQL。

这种方式是一个不错的选择，还是有什么其他方式可以在其他数据库服务器上运行SQL？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T04:18:52.263

添加链接服务器很好。

然后，您可能会使用[4 部分命名约定](http://www.mssqltips.com/sqlservertip/1095/sql-server-four-part-naming/)

```
select * from [server].[database].[Owner or Schema].[tablename] 
```

或者您可以查看[OPENROWSET (Transact-SQL)](http://msdn.microsoft.com/en-za/library/ms190312.aspx)

> 包括从 OLE DB 数据源访问远程数据所需的所有连接信息。此方法是访问链接服务器中的表的一种替代方法，是一种使用 OLE DB 连接和访问远程数据的一次性即席方法。要更频繁地引用 OLE DB 数据源，请改用链接服务器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T04:20:05.823

*如何*

*   使用[sp_addlinkedserver](http://msdn.microsoft.com/en-us/library/ms188279%28v=sql.90%29.aspx)，然后使用[sp_addlinkedsrvlogin定义安全性](http://technet.microsoft.com/en-us/library/ms189811%28v=sql.90%29.aspx)

*好处*

*   可以跨多个服务器分配负载

*缺点*

*   额外的网络/通信/安全开销
*   额外的操作开销 - 用户、登录名等需要添加到两个服务器
*   脆弱性 - 您将本地数据库中的代码耦合到指定的外部服务器/数据库。但是，您可以使用[同义词](http://msdn.microsoft.com/en-za/library/ms177544.aspx)来放松耦合。

*备择方案*

*   使用复制/镜像/日志传送在同一服务器上获取数据库的“本地”副本（尽管这也有本地服务器或实例上额外的 IO 和内存消耗的缺点，以及处理数据同步的额外问题）
*   在您的应用程序中使用 2 个连接字符串并在应用程序中进行数据操作。

但正如 asstander 所说，完成跨服务器 sql 并没有真正的技术问题。

# mysql - Drupal 字段不会更新

> ID：12418047
> 
> 赞同：0
> 
> 时间：2012-09-14T04:16:44.933
> 
> 标签：mysql, drupal-7

我最近重新安装了我的操作系统。我备份了网站和数据库。当我恢复所有内容时，网站看起来很正常——所有数据都已加载。但是，当我尝试更改数据时，它没有被设置 - 信息没有改变。我不认为这是 MySQL 权限错误 - 所有用户都拥有完整的读/写权限。

该网站似乎被及时冻结了。

感谢您的任何帮助或建议

编辑：我意识到没有提交任何表格。当我点击它们时，它们消失了，然后页面重新加载。在 Apache 日志文件中，我遇到了大量`page not found`错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:39:05.693

这些`page not found`错误让我想到了干净的 URL——这就是问题所在。在恢复的 Drupal 数据库中启用了干净的 URL，但在 Apache 中没有启用。

不过，我不确定为什么链接可以正常工作 - 我认为这将是一个全有或全无的情况 - 要么一切都坏了，来自 Drupal 的某种消息，要么一切正常......

# jquery - colorbox iframe 作为模态：如何将真/假返回给父级

> ID：12418052
> 
> 赞同：1
> 
> 时间：2012-09-14T04:17:24.370
> 
> 标签：jquery, modal-dialog, colorbox

我发现很难找到使用颜色框作为模态框的文档。无论如何，我将 iframe 技术用作模态对话框，所以在我父母的页面中，js 是这样的：

```
 $(".confirmDeleteUser").colorbox({
        onOpen: function () {
            $("#colorbox").addClass("standardLightbox");
        },
        onLoad: function () {
            $('#cboxClose').remove();
        },
        iframe: true,
        href: "/modal_yesno.html",
        innerWidth: "530",
        innerHeight: "400", 
        fixed: true, 
        overlayClose: false
    }); 
```

父页面的 html 是这样的：

```
<a href="deleteuser.php?id=2" class="confirmDeleteUser">Delete user</a> 
```

而对于`modal_yesno.html`是这样的：

```
 $('.buttonNo').click(function () {
            return false;
            parent.$.fn.colorbox.close();
        });

        $('.buttonYes').click(function () {
            return true;
            parent.$.fn.colorbox.close();                
        }); 
```

但是modal没有关闭，返回值也没有发送给父级。

所以问题是如何将真/假javascript发送给父级并立即关闭颜色框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T04:38:49.380

返回值不会被发送回父窗口，它会被发送回触发事件的元素；按钮。

我认为以下应该有效：

```
$('.buttonNo').click(function () {
   parent.$.fn.colorbox.close();
   window.parent.Confirmation(false);
});

$('.buttonYes').click(function () {
   parent.$.fn.colorbox.close();   
   window.parent.Confirmation(true);
}); 
```

其中 Confirmation() 是您父页面中的一个方法。

# vbscript - ADO 连接字符串

> ID：12418053
> 
> 赞同：0
> 
> 时间：2012-09-14T04:17:34.697
> 
> 标签：vbscript, connection-string, ado

```
<%'On Error Resume Next     
Set objConn = Nothing
Dim strConnect 

strConnect = "Provider=sqloledb;Library=DBMSSOCN;Data Source=xx.xx.xx.xx;1433" 
     "Initial Catalog=mydatabasename;"
     "User Id=userID;Password=password;"

Set objConn = Server.CreateObject("ADODB.Connection")
objConn.Open strConnect 
```

我正在为我的网站在 Dreamweaver 中编码。但不知何故，它没有链接到数据库。我在 Microsoft SQL Server 2008 R2 中的数据库。我已经尝试了[http://www.connectionstrings.com/sql-server-2008](http://www.connectionstrings.com/sql-server-2008)中所述的所有字符串。但似乎没有链接。

我在这里做错什么了吗？抱歉对齐不好，我仍然习惯于stackoverflow的对齐方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:46:31.277

如果您发布的是您的实际连接字符串，则它的格式不正确。在端口号之前有一个`;`代替，而在它之后没有。`:``;`

```
strConnect = "Provider=sqloledb;Library=DBMSSOCN;Data Source=xx.xx.xx.xx;1433" 
```

这应该是

```
strConnect = "Provider=sqloledb;Library=DBMSSOCN;Data Source=xx.xx.xx.xx:1433;" 
```

如有疑问，请写出连接字符串并查看您在打开连接时实际使用的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:55:33.037

根据[如何在 ADO 连接字符串中设置 SQL Server 网络库](http://support.microsoft.com/kb/238949)和您的链接引用，这应该是网络库，而不是库：

```
strConnect = "Provider=sqloledb;Network Library=DBMSSOCN;;Data Source=xx.xx.xx.xx;1433" 
 "Initial Catalog=mydatabasename;"
 "User Id=userID;Password=password;" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T01:08:30.827

应该

提供者=sqloledb；网络库=DBMSSOCN；数据源=xx.xx.xx.xx,1433

注意显式端口和网络字的逗号。

虽然最好只使用 Data Source=xxxx;

并通过 cliconfg 中的 xxxx 别名设置网络库细节

# java - 复合组件中使用的 ui-define 不适用于 primefaces

> ID：12418054
> 
> 赞同：1
> 
> 时间：2012-09-14T04:17:40.203
> 
> 标签：java, jsf-2, primefaces, composite-component

现在我必须构建一个复合组件来实现特定的功能。我们的布局页面如下所示：

布局.xhtml

```
<p:layout >
    <p:layoutUnit position="center" style="border:0px;">
        <ui:insert name="content"></ui:insert>
    </p:layoutUnit>
</p:layout>
<ui:insert name="dialogContent"></ui:insert> 
```

内容.xhtml

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" 
xmlns:hs="http://java.sun.com/jsf/composite/components" xmlns:f="http://java.sun.com/jsf/core" template="/layout/layout.xhtml"> 
    <ui:define name="content">
                 <p:layout>
            <h:form id="bodyForm" style="margin:0px">
                <p:layoutUnit position="west">
                    <p:panel>
                        <hs:dlg></hs:dlg>
                    </p:panel>
                </p:layoutUnit>
                                ...
            </h:form>
        </p:layout>
    </ui:define>
</ui:composition> 
```

dlg.xhtml（复合组件）

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:composite="http://java.sun.com/jsf/composite" xmlns:p="http://primefaces.org/ui" xmlns:ui="http://java.sun.com/jsf/facelets">
        <composite:interface>
            ...
        </composite:interface>
        <composite:implementation>
                <p:inputText id="inputId" onclick="dlgVar.show();" />
            <ui:define name="dialogContent">
                <h:form id="dlgForm" prependId="">
                    <p:dialog widgetVar="dlgVar">
                    ...
                    </p:dialog>
                </h:form>
            </ui:define>
        </composite:implementation>
 </ui:composition> 
```

我希望当我点击输入时，对话框会打开。不幸的是，它不起作用。我尝试`appendToBody="true"`在对话框上添加和删除`<ui:define name="dialogContent">`，对话框可以打开，但是`dlgForm`页面中没有独立的，这会导致我在提交表单数据时出现一些问题。

那么如何在 layout.xhtml 中的正确位置呈现对话框呢？

# php - 需要帮助使用 strtotime() 检查日期

> ID：12418056
> 
> 赞同：0
> 
> 时间：2012-09-14T04:17:56.763
> 
> 标签：php

我有一个功能可以检查某人的状态是否是某个值，如果是，并且在一年后，该人的状态将被更新。

这是代码

```
if (strtotime($csvstatuschange) < strtotime("-365 day") && (
        $csvstatus == "Non-Active, Unable to Monitor - Incidental Business use Exclusion" ||
        $csvstatus == "Non-Active - Insurance Cancelled" ||
        $csvstatus == "Non-Active - Employee Not Covered Under Listed Policy" ||
        $csvstatus == "Non-Active - No Longer Employed" ||
        $csvstatus == "Non-Active - Other"
)) {
    $status = "Archived";
    $wsth = $DBH->prepare("
        UPDATE csvdata 
        SET status = :status, 
            statuschangedate = :date 
        WHERE username = :username
    ");
    $wsth->execute(array(
        ':status' => $status, 
        ':username' => $csvusername, 
        ':date' => $date
    ));
} 
```

所以我的问题是 - 例如，如果人员状态是`Non-Active - Insurance Cancelled`并且今天已更改。那里的状态仍然会改变。

感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:30:48.543

这似乎很可能`$csvstatuschange`是一种`strtotime`无法理解的格式。结果它正在返回`false`，它被强制转换为 integer `0`。`0`永远不会超过 1 年前。

确保格式是一种可以被`strtotime`. 我的偏好是`Y-m-d H:i:s`因为它是明确的。像这样的格式`d/m/Y`可能会模棱两可，因为`m/d/Y`它也经常使用（是`3/4/95`3 月 4 日还是 4 月 3 日？）

# android - 为什么我的 2 个 xml 布局相同时权重不均匀？

> ID：12418057
> 
> 赞同：0
> 
> 时间：2012-09-14T04:18:19.860
> 
> 标签：android, xml, layout

在这两种布局中，我有它们的设置相同。两者之间的唯一区别是其中 2 个中的文本不同。我有文本设置的布局，仅占宽度的 25%，但只是由于文本长度，它搞砸了一些事情。有人对如何解决这个问题有任何想法吗？

上面的布局

```
<LinearLayout
        android:id="@+id/details"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:baselineAligned="false"
        android:orientation="horizontal" >

        <LinearLayout
            android:id="@+id/blankRow"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/textView6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="TextView" />

        </LinearLayout>

        <LinearLayout
            android:id="@+id/levelOneLayout"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/levelOne"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/level_1" />

        </LinearLayout>

        <LinearLayout
            android:id="@+id/perLevelLayout"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/perLevel"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/per_level" />

        </LinearLayout>

        <LinearLayout
            android:id="@+id/chosenLevelLayout"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/textView8"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="TextView" />

        </LinearLayout>

    </LinearLayout> 
```

在这下面我有这样的布局：

```
<LinearLayout
        android:id="@+id/Health"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:baselineAligned="false"
        android:orientation="horizontal" >

        <LinearLayout
            android:id="@+id/health"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="TextView" />

        </LinearLayout>

        <LinearLayout
            android:id="@+id/healthLevelOne"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="TextView" />

        </LinearLayout>

        <LinearLayout
            android:id="@+id/healthPerLevel"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/textView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="TextView" />

        </LinearLayout>

        <LinearLayout
            android:id="@+id/healthAtChosenLevel"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/textView4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="TextView" />

        </LinearLayout>

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:32:03.240

1.  Your layout has too many `LinearLayout`, remove those which wrap `TextView`, you don't need them to get the layout you want.
2.  Remove `android:width="wrap_content"` and add `android:layout_width="0dp"` and `android:layout_weight="1"` to all of your `TextViews`.

Like :

```
 <LinearLayout
        android:id="@+id/details"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:baselineAligned="false"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/textView6"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="TextView" />

        <TextView
            android:id="@+id/levelOne"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/level_1" />

        <TextView
            android:id="@+id/perLevel"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/per_level" />

        <TextView
            android:id="@+id/textView8"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="TextView" />
    </LinearLayout> 
```

# android - FragmentTransaction 没有做任何事情

> ID：12418060
> 
> 赞同：11
> 
> 时间：2012-09-14T04:18:30.203
> 
> 标签：android, fragment, fragmenttransaction

我正在学习片段，下面给出的是我的第一个片段程序。一个简单的项目，我有 2 个屏幕。当我单击第一个屏幕的下一个按钮时，需要显示第二个按钮。

![在此处输入图像描述](../Images/84cbf27b840ad835dee33ba020a474ad.png)

我的目标是 Android 2.1 及更高版本并**使用兼容性包**

## AppMainFragmentActivity.java

```
public class AppMainFragmentActivity extends FragmentActivity {
  @Override
  protected void onCreate(Bundle arg0) {
    super.onCreate(arg0);
    setContentView(R.layout.app_main_layout);
  }
} 
```

## app_main_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent" android:layout_height="fill_parent"
  android:orientation="vertical" android:id="@+id/fragment_container">

   <fragment class="com.research.fragmentstudy.FirstFragment"     
      android:layout_width="fill_parent"
      android:layout_height="fill_parent" 
      android:id="@+id/id_first_fragment"/>

</LinearLayout> 
```

## FirstFragment.java

```
public class FirstFragment extends Fragment {
  @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
     View view = inflater.inflate(R.layout.first_fragment_layout
                 , container,false);

     Button nextButton =(Button) view.findViewById(R.id.button);
     nextButton.setOnClickListener(nextListener);
     return view;
  }

  private OnClickListener nextListener  =   new OnClickListener() {
     @Override
     public void onClick(View v) {
        FragmentManager fm = ((AppMainFragmentActivity)FirstFragment.this
                           .getActivity()).getSupportFragmentManager();
        SecondFragment fragment = new SecondFragment();
        FragmentTransaction ft = fm.beginTransaction();
        ft.add(R.id.fragment_container, fragment);
        ft.commit();
     }
  };
} 
```

## first_fragment_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent" android:layout_height="fill_parent"
   android:orientation="vertical" android:id="@+id/first_fragment_root">

   <TextView android:layout_height="wrap_content" 
       android:layout_width="fill_parent"
       android:text="Fragment 1" android:gravity="center_horizontal" />

   <Button android:layout_height="wrap_content" 
       android:layout_gravity="center_horizontal"
       android:layout_width="wrap_content" android:id="@+id/button"
       android:text="Next" />

</LinearLayout> 
```

## SecondFragment.java

```
public class SecondFragment extends Fragment {
   @Override
   public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
      View view = inflater.inflate(R.layout.second_fragment_layout,
                     container,false);
      return view;
   }
} 
```

## second_fragment_layout.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent" android:layout_height="fill_parent"
   android:orientation="vertical" android:id="@+id/first_fragment_root">

   <TextView android:layout_height="wrap_content" 
      android:layout_width="fill_parent"
      android:text="Fragment 2" android:gravity="center_horizontal" />

</LinearLayout> 
```

好吧，我得到了第一个屏幕。现在，

### 根据我对片段的理解，我所期望的

*   当我单击屏幕 1 中的 Next 按钮时，将创建 SecondFragment，`onCreate()`并`onCreateView()`调用它。
*   显示了 SecondFragment，并且 FirstFragment 被销毁（因为我没有将它添加到 backstack）。由于默认片段事务没有动画，因此不会有任何动画。

### 怎么了

*   SecondFragment 被创建好了，它`onCreate()`被`onCreateView()`调用了。
*   但 FirstFragment 仍然在屏幕上，第二个从未显示。

现在我对片段的理解可能是错误的。但我相信当我们 commit() 一个片段事务时，第一个片段应该被第二个片段替换（第一个片段要么被隐藏要么被破坏）。好吧，似乎什么都没有发生。这是为什么？我们应该手动销毁/隐藏第一个片段吗？

注意：我知道对于这样一个基本的事情来说这是一个很长的问题。但是我把我的整个代码都放了，因为我不确定我在哪里搞砸了。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-18T12:34:35.487

好吧，我让它工作了。对这个问题的两个答案都正确地说明了我的代码无法按预期工作的一个原因。但是我的代码中有两个错误。

using`fragmentTransaction.add()`不会在旧片段上显示新片段。你需要调用replace()。给出的答案是正确的。

但是我的代码中还有一个错误。您不能替换在 xml 中静态创建的片段。所以我改变了

## app_main_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent" android:layout_height="fill_parent"
  android:orientation="vertical" android:id="@+id/fragment_container">

</LinearLayout> 
```

和

## AppMainFragmentActivity.java

```
public class AppMainFragmentActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle arg0) {
        super.onCreate(arg0);
        setContentView(R.layout.app_main_layout);

        FragmentManager fragmentManager = getSupportFragmentManager();
        FirstFragment fragment = new FirstFragment();
        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
        fragmentTransaction.add(R.id.fragment_container,fragment);
        fragmentTransaction.commit();           
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-14T04:44:04.107

您是否尝试过使用 ft.replace(R.id.fragment_container, fragment) 而不是 add ？add 不会删除现有的片段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T04:55:54.323

您正在尝试在 fragment_container 中添加一个片段，它正在添加但您的片段将不可见，因为您已将 id_first_fragment 的宽度和高度指定为 fill_parent 所以尝试为 id_first_fragment 片段设置 wrap_content 。单击按钮时，您可以看到下一个片段。如果要关闭第一个片段并显示第二个片段，则需要 replace 而不是 add 。

# ruby-on-rails - 如何更改设计以便我可以添加一些其他字段并将其显示为个人资料信息

> ID：12418074
> 
> 赞同：1
> 
> 时间：2012-09-14T04:20:33.757
> 
> 标签：ruby-on-rails, ruby-on-rails-3, api, devise

我正在关注[https://github.com/plataformatec/devise_example.git](https://github.com/plataformatec/devise_example.git)这确实很好，但我需要对其进行一些补充，但不知道该怎么做。

我想为iphone应用程序创建一个api，初始过程是通过注册创建新用户，然后必须在邮件中确认帐户，一旦确认用户可以登录并查看他的详细信息，如姓名、电子邮件、密码、语言、国家等... 但是在这个例子中，登录后我们可以查看帐户信息，但密码字段为空，然后只有电子邮件和密码两个字段。另外我想知道这个设计示例是否可以用作 api，请告诉我如何将语言、国家和类似内容等其他字段添加到用户帐户信息中。如果这是不可能的，那么我该怎么做所有这些事情。请帮助我。也告诉我是否有任何例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T04:52:30.957

您使用 devise 创建的用户模型在许多方面与其他模型一样，因此您可以通过迁移对其进行修改。在您的控制台中，在 rails 应用程序根目录：

```
rails g migration AddCountryAndLanguageAndNameAndEmailToUsers country:string language:string name:string email:string
rake db:migrate 
```

您当然必须修改您的视图（可能还有模型中的 attr_accessible 行）来添加这些字段。

Devise 不存储用户的密码；相反，它存储密码的哈希值。直接存储用户的密码通常被认为是一种不好的做法。但是，如果您对此一无所知，那么您没有理由不能修改上述迁移以包含纯文本密码列。

作为 JSON 使用：

[Rabl](https://github.com/nesquena/rabl)是一个很棒的 JSON 模板。

否则，在您的用户控制器中：

```
class UsersController
  def show
    @user = User.find params[:id]
    respond_to do |format|
      format.html
      format.json { render json: @user }
    end
  end

  def index
    @users = User.all
    respond_to do |format|
      format.html
      format.json { render json: @users }
    end
  end
end 
```

等等……

# php - 显示 x 到 y 的 z 个条目

> ID：12418075
> 
> 赞同：0
> 
> 时间：2012-09-14T04:20:35.573
> 
> 标签：php, smarty

我在搜索结果页面中添加了类似于“显示 11 个条目中的 1 到 10 个”“显示 11 个条目中的 11 到 11 个”的类似内容。

```
$listing_search.listings_per_page = 10
$listing_search.current_page = 2
$listings_number = 11 
```

我无法得到正确的公式。. 请分享一些亮点。

```
[[Showing ]] {if $listing_search.current_page == 1}1{else}{$listing_search.listings_per_page+1} {/if}
[[ to ]] {$listing_search.listings_per_page}[[ of ]] {$listings_number} {if $listings_number == 1}[[ Job]]{else}[[ Jobs]]{/if} 
```

对第 3、4 页等有什么建议吗？是同一个公式吗？

我只能测试 11 个条目。这是我编辑的内容。

```
{assign var="current_page" value = $listing_search.current_page}
{assign var="listings_per_page" value = $listing_search.listings_per_page}
{math assign="first_page" equation="(cp - 1) * lpp + 1" cp=$current_page   lpp=$listings_per_page }
{math assign="last_page" equation="(cp  * lpp)" cp=$current_page lpp=$listings_per_page }

<div class="" id="DataTables_Table_1_info">[[Showing ]] {if $first_page}{$first_page}  {else}[[1]]{/if} [[to]] {if $last_page <= $listings_number}{$last_page}{else}  {$listings_number}{/if}
[[of]] {$listings_number} {if $listings_number == 1}[[ Job]]{else}[[ Jobs]]{/if}</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:30:55.753

公式将是这样的：

```
listings_per_page = 10
current_page = 2
listings_number = 11  (I would call this total_listings or something like that)

first_listing = listings_per_page * (current_page - 1) + 1
max_last_listing = (listings_per_page * current_Page)
last_listing = (max_last_listing > total_listings) ? total_listings : max_last_listing 
```

这将使 first_listing==11 和最后一个列表将是 20 或最大值，以较小者为准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T04:31:04.483

*   当前页面的开始：`(current_page-1)*listings_per_page +1`
*   当前页面的结尾：`current_page*listings_per_page`或`listings_number`（以较小者为准）

# vb.net - 在 VB.NET 中访问 Wifi

> ID：12418086
> 
> 赞同：0
> 
> 时间：2012-09-14T04:21:38.023
> 
> 标签：vb.net, api, wifi, adhoc, ssid

是否有 API 或其他方式来获取当前连接的 Wifi 的 SSID、创建新的 ad-hoc 网络等？所有的帮助都很棒！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:28:45.337

您可以查看[Managed Wifi](http://managedwifi.codeplex.com/)或[Native Wifi](http://msdn.microsoft.com/en-us/library/ms705969.aspx)。托管 wifi 使用本机 wifi api 本身。

# python - Python 使用 PIL 调整动画 gif 的大小

> ID：12418090
> 
> 赞同：5
> 
> 时间：2012-09-14T04:22:02.107
> 
> 标签：python, image, python-imaging-library

我按照[Resize GIF animation, pil/imagemagick, python](https://stackoverflow.com/questions/9988517/resize-gif-animation-pil-imagemagick-python?rq=1) to resize image using`PIL`和`image2gif`. 但是，我得到了调整大小的 gif，如下所示：

![在此处输入图像描述](../Images/2bf72fa5833099d76b87095ac1a89cdd.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T03:16:35.877

我没有尝试过，但这[表明](http://www.velocityreviews.com/forums/t354000-pil-and-transparent-gifs.html)保存时使用 PIL 保持 GIF 图像透明度的方法是：

```
im = Image.open(...)
transparency = im.info["transparency"]
...
out.save("out.gif", transparency=transparency) 
```

# java - java.net.ConnectException：连接被拒绝：在 Google Analytics 中尝试 HelloAnalyticsApiSample 时出现连接**异常

> ID：12418097
> 
> 赞同：1
> 
> 时间：2012-09-14T04:23:23.140
> 
> 标签：java, google-analytics

`java.net.ConnectException: Connection refused: connect`在 Google Analytics 中尝试 HelloAnalyticsApiSample 时出现异常：

```
return new AuthorizationCodeInstalledApp(flow, new LocalServerReceiver()).authorize("user"); 
```

我需要在参数“user”中提供一些特定的用户吗？

我在我的 analytics.json 输入文件中提供了以下条目（我手动提供了此条目，因为写入权限存在异常）：

```
{
  "installed": {
    "client_id": "my client id ",
    "client_secret": "my client secret"
  }
} 
```

# javascript - 使用 JavaScript 更改光标

> ID：12418100
> 
> 赞同：0
> 
> 时间：2012-09-14T04:24:05.470
> 
> 标签：javascript, asp.net-mvc-3

我正在开发一个 MVC 应用程序并使用 Razor 语法。

我`<div>`在 .cshtml 文件中使用一个标签。

当光标悬停在特定`<div>`标签上时，我想使用 JavaScript 将光标图标更改为手形。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T04:26:11.257

这可以通过 CSS 完成：

```
div.classname { cursor:pointer; } 
```

如果必须使用 JavaScript 完成：

```
document.getElementsByTagName('div')[0].addEventListener('mouseover', function(){
    this.style.cursor = 'pointer';
}); 
```

# c# - 为 WCF 服务 c# 控制台应用程序实现超时

> ID：12418102
> 
> 赞同：0
> 
> 时间：2012-09-14T04:24:40.447
> 
> 标签：c#, wcf, nettcpbinding

因此，我正在编写一个调用 WCF 服务（通过 nettcpbinding）的控制台应用程序 - 并且业务希望能够指定一个值作为超时值。我最初尝试了操作超时，但似乎被忽略了 - 所以我尝试了一堆其他值。这些作品之一（或组合）:)

我希望如果它超时我仍然可以关闭通道 - 但是如果我将关闭放在 finally 块中，那么它会再等待一分钟直到它超时（而我以秒为单位设置超时值）。我正在通过在服务器端代码中添加延迟来进行测试 - 以模拟它需要一段时间。

我可以将关闭移动到第一个尝试块，但我担心我会保持通道打开。然后它将更快地向用户报告超时错误。还是我需要实现线程？

```
public static String ExecuteSearch(List<KeyValuePair<string, string>> paramItems)
{
    var context = GetAdminContext();
    var parsedParameters = ParseParameters((paramItems));

    //TODO: Figure out how to implement timeout - & workout if port number will be passed in?? 
    IPartyProfile partyProfile = null;

    long start = System.Environment.TickCount;

    using (ChannelFactory<IPartyController> factory = new ChannelFactory<IPartyController>("IPartyControllerEndpoint"))
    {
        EndpointAddress address = new EndpointAddress(String.Format("net.tcp://{0}/ServiceInterface/PartyController.svc", parsedParameters.HostName));
        IPartyController proxy = factory.CreateChannel(address);

        if (proxy != null)
        {
            var timeoutTimeSpan = new TimeSpan(0, 0, parsedParameters.TimeOut);
            ((IContextChannel)proxy).OperationTimeout = timeoutTimeSpan;
            factory.Endpoint.Binding.SendTimeout = timeoutTimeSpan;
            factory.Endpoint.Binding.ReceiveTimeout = timeoutTimeSpan;
            factory.Endpoint.Binding.OpenTimeout = timeoutTimeSpan;
            factory.Endpoint.Binding.CloseTimeout = timeoutTimeSpan;

            try
            {
                // TODO: potentially call something more complex
                partyProfile = proxy.GetLatestPartyProfile(context, parsedParameters.PartyId);

            }
            catch (EndpointNotFoundException ex)
            {
                throw new Exception(STATUS_UNKNOWN + ": Endpoint specified not responding", ex);
            }
            catch (TimeoutException ex)
            {
                throw new Exception(STATUS_UNKNOWN + ": Timeout exceeded", ex);
            }
            finally
            {
                try
                {
                    ((IClientChannel)proxy).Close();
                }
                catch (Exception)
                {
                }

            }
        }
    }

    long stop = System.Environment.TickCount;
    long elapsed = (stop - start) / 1000; // in seconds

    return SetResultMessage(elapsed, partyProfile, parsedParameters);
} 
```

**编辑 - 我想我可以使用 factory.Abort() 更快地结束它。（我会把它放在上面代码中 Close 的位置）。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:53:34.407

根据您的描述，`SendTimeout`这正是您想要调整的值（另请参阅[this question on various timeouts](https://stackoverflow.com/questions/229760/timeouts-wcf-services)）。默认情况下为 1 分钟，但如果您将其更改为更短的时间（例如 5 秒），则调用`proxy.GetLatestPartyProfile`确实应该在 5 秒后抛出 TimeoutException（假设服务调用的响应时间超过了响应时间）。

在您当前发布的代码中，我可以看到至少一件事可能会导致您的问题：您在创建代理***后在工厂设置超时值。***重新排序相关语句并重试。像这样的东西：

```
using (ChannelFactory<IPartyController> factory = new ChannelFactory<IPartyController>("IPartyControllerEndpoint"))
{
    var timeoutTimeSpan = new TimeSpan(0, 0, parsedParameters.TimeOut);
    factory.Endpoint.Binding.SendTimeout = timeoutTimeSpan;

    EndpointAddress address = new EndpointAddress(String.Format("net.tcp://{0}/ServiceInterface/PartyController.svc", parsedParameters.HostName));
    IPartyController proxy = factory.CreateChannel(address);

    if (proxy != null)
    {
        try
        {
            // TODO: potentially call something more complex
            partyProfile = proxy.GetLatestPartyProfile(context, parsedParameters.PartyId);
        }
        // etc. 
```

注意：我不完全确定您当前的重载 voor`CreateChannel`用于绑定。它使用您之前设置的绑定似乎是合理的，但如果您仍然遇到问题，您可以尝试使用[`CreateChannel(Binding, EndpointAddress)`](http://msdn.microsoft.com/en-us/library/aa344556%28v=vs.90%29.aspx)重载。

# android - 使用 Android NDK 构建 VPNC

> ID：12418116
> 
> 赞同：0
> 
> 时间：2012-09-14T04:26:08.957
> 
> 标签：android, c++, linux, android-ndk, linux-kernel

我有一个基于 C++ 语言的 VPNC linux 开源。下载链接是：[http](http://www.unix-ag.uni-kl.de/~massar/vpnc/) ://www.unix-ag.uni-kl.de/~massar/vpnc/ （我使用vpnc-0.5.3.tar.gz）。

所以，我想在 Windows 上使用 android ndk 和 cygwin 将所有源代码构建到 .so 库。

首先，当我在 cygwin 上编译源代码时出现错误：“grcypt.h 没有这样的文件或目录”，我通过将 gcrypt.h 文件粘贴到 android 项目的 jni 文件夹来解决它。但我输入以下问题：

```
$ /cygdrive/C/Working/Ke/Android/android-ndk-r8b/ndk-build
SharedLibrary  : libvpnc.so
./obj/local/armeabi/objs/vpnc/vpnc.o: In function `lifetime_ike_process':
C:\Working\Ke\Projects\Eclipse\AndroidVpnc/jni/vpnc.c:1171: undefined reference to `opt_debug'
./obj/local/armeabi/objs/vpnc/vpnc.o: In function `lifetime_ipsec_process':
C:\Working\Ke\Projects\Eclipse\AndroidVpnc/jni/vpnc.c:1189: undefined reference to `opt_debug'
./obj/local/armeabi/objs/vpnc/vpnc.o: In function `make_socket':
C:\Working\Ke\Projects\Eclipse\AndroidVpnc/jni/vpnc.c:242: undefined reference to `error'
C:\Working\Ke\Projects\Eclipse\AndroidVpnc/jni/vpnc.c:219: undefined reference to `error'
C:\Working\Ke\Projects\Eclipse\AndroidVpnc/jni/vpnc.c:231: undefined reference to `error'
C:\Working\Ke\Projects\Eclipse\AndroidVpnc/jni/vpnc.c:238: undefined reference to `error'
./obj/local/armeabi/objs/vpnc/vpnc.o: In function `isakmp_crypt':
C:\Working\Ke\Projects\Eclipse\AndroidVpnc/jni/vpnc.c:531: undefined reference to `xallocc'
C:\Working\Ke\Projects\Eclipse\AndroidVpnc/jni/vpnc.c:532: undefined reference to `gcry_cipher_open'
C:\Working\Ke\Projects\Eclipse\AndroidVpnc/jni/vpnc.c:533: undefined reference to `gcry_cipher_setkey' 
```

请给我这个问题的解决方案。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:33:25.297

You have to include the libraries that contains opt_debug, error, xalloc, gcry_cipher_open and gcry_cipher_setkey as well.

# c#-4.0 - 为什么 form.showdialog() 有效，而 form.show() 在以下代码中无效

> ID：12418117
> 
> 赞同：0
> 
> 时间：2012-09-14T04:26:09.710
> 
> 标签：c#-4.0

在下面的代码中，我有一个观察者，它查看文件是否已更改，如果文件已更改，我会在表单上显示更改的信息，但如果我为此使用 form.Show() 它会冻结但 form.showDialog() 工作正常，这两者有什么区别以及如何确定使用哪一个

```
 private void watcher_Changed(object sender, FileSystemEventArgs e)
    {
        _watcher.EnableRaisingEvents = false;
        try
        {
            if (_displayPatientInfo != null)
            {
                _displayPatientInfo.Dispose();
            }
            GetPatientInfo(e.FullPath);
            using (StreamReader sr = new StreamReader(e.FullPath, Encoding.Default))
            {
                String line;
                line = sr.ReadToEnd();

                if (line.IndexOf("<IsPatientFixed>") > 0)
                {
                    var value = GetTagValue(line, "<IsPatientFixed>", "</IsPatientFixed>");
                    if (value == "true" || value == "True")
                    {

                        _displayPatientInfo = new frmPatientInfoDisplay();
                        _displayPatientInfo.SetData(_patientInfo);
                        _displayPatientInfo.ShowDialog();

                    }
                }
            }

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
        finally
        {
            _watcher.EnableRaisingEvents = true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T05:43:38.527

正如@Habib 所说，当您调用 ShowDialog() 之后的代码不会执行，直到您关闭表单并且您的观察者将被卡住。

您的问题是观察者运行在与您的主窗体不同的线程上，这就是为什么当您调用 Show() 时它会冻结您的应用程序，因为它试图访问您的主线程拥有的一部分内存。要解决此问题，您可以在要显示或处置 _displayPatientInfo 表单时使用 Invoke(Delegate)。

[Control.Invoke 方法（委托）](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)

```
 Executes the specified delegate on the thread that owns the control's underlying window handle. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T04:38:34.423

[`ShowDialog`](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)暂停程序流程，直到您关闭表单，而[`Show`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.show.aspx)显示表单并继续程序流程。

[Form.ShowDialog - MSDN](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)

> 您可以使用此方法在应用程序中显示模式对话框。调用此方法时，它后面的代码要等到对话框关闭后才会执行。

问题是因为`using` 块。ShowDialog 方法会阻塞程序流程，直到窗体关闭，因为 using 块不会终止。`Show`另一方面，立即将控制权返回到下一行，并且由于您在 using 块内创建了表单对象，因此它在块外将不可见。这就是为什么你的表格卡住了。

# javascript - 插入新列，其中数据取自其他列 + 文本

> ID：12418119
> 
> 赞同：0
> 
> 时间：2012-09-14T04:26:10.620
> 
> 标签：javascript, html

我是新手，对编程的了解非常有限。我只是使用我从网上找到的任何东西并在它们上过期。让我解释一下我的意思。

我有一个看起来像这样的数据库文本文件。

```
colh01|colh02|colh03|colh04|colh05|
data11|data12|data13|data14|data15|
data21|data22|data23|data24|data25|
data31|data32|data33|data34|data35|
data41|data42|data43|data44|data45| 
```

现在我使用在网上找到的 javascript 将内容显示到表格中。

```
<script type="text/javascript">
onload = function () {
    if (!document.getElementById || !document.getElementsByTagName)
        return;
    var frm = null, 
    prenode,
    tbod = document.getElementById('tbod'),
    data = '';
    if ((frm = top.frames['buffer']) //iframe
         && frm.document) { //get <pre> parent
        prenode = frm.document.getElementsByTagName('pre').item(0);
        if (null != prenode
             && null != prenode.firstChild
             && /#text/.test(prenode.firstChild.nodeName)) //text node
        {
            data += prenode.firstChild.data; //read
            data = data.split(/[\n\r]/); //separate lines
            data.splice(0, 0); //lose first two (legend)
            var i = 0,
            l = data.length, rowdata, ii, ll, tr, td;
            for (; i < l; ++i) {
                tr = document.createElement('tr'); //new row
                tbod.appendChild(tr);
                rowdata = data[i].split("|", 6); //separate bits
                for (ii = 0, ll = rowdata.length; ii < ll; ++ii) {
                    td = document.createElement('td'); //new cell
                    td.appendChild(document.createTextNode(rowdata[ii]));
                    tr.appendChild(td);
                }
            }
        }
    }
}

</script> 
```

它工作正常，输出看起来像这样。

```
colh01  colh02  colh03  colh04  colh05
data11  data12  data13  data14  data15
data21  data22  data23  data24  data25
data31  data32  data33  data34  data35
data41  data42  data43  data44  data45 
```

然后我想插入一列（colh6），它将从第一列获取数据。它应该看起来像这样

```
colh01  colh02  colh03  colh04  colh05  colh6 (new column)-->(link to file)
data11  data12  data13  data14  data15  'file-<data11>.pdf' -->(href='http://locahost/file-<data11>.pdf')
data21  data22  data23  data24  data25  'file-<data21>.pdf' -->(href='http://locahost/file-<data21>.pdf')
data31  data32  data33  data34  data35  'file-<data31>.pdf' -->(href='http://locahost/file-<data31>.pdf')
data41  data42  data43  data44  data45  'file-<data41>.pdf' -->(href='http://locahost/file-<data41>.pdf') 
```

我该怎么做？数据是用户可以单击以打开文件的超链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:37:31.763

您只需修改此位即可显示链接：

```
for (; i < l; ++i)
{
    tr = document.createElement('tr'); //new row
    tbod.appendChild(tr);
    rowdata = data[i].split("|",6); //separate bits
    for (ii = 0, ll = rowdata.length; ii < ll; ++ii)
    {
        td = document.createElement('td'); //new cell
        td.appendChild(document.createTextNode(rowdata[ii]));
        tr.appendChild(td);
    }
    td = document.createElement('td') //column 6 cell
    td.appendChild(document.createTextNode('<a href="http://locahost/file-' + rowdata[0] + '.pdf"> Link text here </a>'));
    tr.appendChild(td);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T04:56:57.923

您已经完成了困难的部分，您所缺少的只是如何使用 Javascript 创建链接。如果您只是在循环之后添加这些行，它将使用第一列的内容创建一个链接；

```
var newlink = document.createElement('a');
newlink.setAttribute('href', 'http://localhost/file-' + rowdata[0] + '.pdf');
newlink.appendChild(document.createTextNode('Link text'));
td = document.createElement('td');
td.appendChild(newlink);
tr.appendChild(td); 
```

[有关在此处](http://technage.blogspot.se/2009/02/dynamically-adding-anchor-tag-with.html)创建动态链接的更多信息。

# maven-2 - 解压ear并将ear复制到本地目录

> ID：12418124
> 
> 赞同：0
> 
> 时间：2012-09-14T04:27:55.257
> 
> 标签：maven-2, maven-plugin, ear

我需要使用 maven 解压耳朵存档并将其复制到本地目录，是否有 maven 插件可以做到这一点？我使用了maven上传插件来复制文件，但无法解压。请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-28T08:00:51.953

`<plugin> <groupId>org.apache.maven.plugins</groupId> <artifactId>maven-dependency-plugin</artifactId> <version>2.8</version> <executions> <execution> <id>unpack</id> <phase>clean</phase> <goals> <goal>unpack</goal> </goals> <configuration> <artifactItems> <artifactItem> <groupId>A</groupId> <artifactId>ear</artifactId> <version>version</version> <type>ear</type> <overWrite>false</overWrite> <outputDirectory>${project.build.directory}/ear</outputDirectory> <excludes>**/*.jar</excludes>
</artifactItem> </artifactItems> <overWriteReleases>false</overWriteReleases> <overWriteSnapshots>true</overWriteSnapshots> </configuration> </execution> </executions> </plugin>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T04:40:45.330

你试过maven ear插件吗？

[http://maven.apache.org/plugins/maven-ear-plugin/](http://maven.apache.org/plugins/maven-ear-plugin/)

我想这会将耳朵内容爆炸到目标目录。请浏览示例

或者 maven 依赖插件也可以提供帮助。

[http://maven.apache.org/plugins/maven-dependency-plugin/usage.html](http://maven.apache.org/plugins/maven-dependency-plugin/usage.html)

# php - 保护 MySQL 密码以及管理多个帐户的最佳实践是什么？

> ID：12418138
> 
> 赞同：2
> 
> 时间：2012-09-14T04:29:34.770
> 
> 标签：php, mysql

我的问题是两个部分。第一个对我来说是最重要的。

我正在开发一个需要常规插入和删除行以及创建和删除整个表的网站。但是，如果我只有一个 MySQL 帐户，我实际上是在为他们提供对我的数据库的高级访问权限。因此，我更愿意根据手头的任务将用户权限保持在最低限度。例如，如果一个操作只需要插入一行，那么我将为此提供一个帐户。我很好奇这些多个账户的管理——或者它是否实用。

现在，我打算在 php 中创建一个数据库连接类，并为包含指定帐户的用户名和密码的 main 创建类扩展。

这引出了我的第二个问题。

我已经阅读了该站点上的一些讨论以及其他似乎建议创建默认帐户或将文件放在文档根目录之外的讨论。显然，由于多个帐户，我无法创建默认值。

基本上，我这样做正确吗？

如果有人在这方面有更多经验，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:50:06.207

您的数据库密码将在您服务器上某处的 PHP 文件中以明文形式显示，以便您的脚本连接。除非页面出现错误，否则任何人都无法通过 Web 请求查看您的 PHP 文件的源代码，因此请确保所有登录服务器和查看源文件的方式都使用强密码。确保您的 PHP 文件的文件权限只有所有者和 apache 进程才能读取，以增强安全性。

然后，如果您在 SQL 服务器上有一个具有所有用户权限的用户帐户和一个长度为 100 个字符的随机字符的密码，那么该密码将不会在您的一生中被暴力破解，并且您永远不需要输入它。它将位于您的 PHP 脚本中的一个位置，只要您保护该源文件，您只需一个帐户即可获得合理的安全性。

# java - 新活动发出空指针异常

> ID：12418140
> 
> 赞同：0
> 
> 时间：2012-09-14T04:29:43.163
> 
> 标签：java, android

我正在尝试开始一项新活动以显示搜索结果列表。我已经通过 android dev stuff 和 androidhive 以及类似的帖子在这里处理在新活动中使用 arraylist 填充列表视图，但我似乎无法让它工作。我真的很感激任何帮助，我已经为此奋斗了几天。

以下是我主要活动的相关部分。

```
Intent intent = new Intent(this, DisplayResultsActivity.class);
ArrayList<String> myCommonFilms = new ArrayList<String>(commonFilms.getCommonFilms(titleOne, titleTwo));
Log.d("myCommonFilms", myCommonFilms.toString());
intent.putStringArrayListExtra("myCommonFilmsList", myCommonFilms);
startActivity(intent); 
```

这是新活动：

```
public class DisplayResultsActivity extends Activity {
private ListView listView;

    public void onCreate(Bundle savedInstanceState) {

        setContentView(R.layout.activity_display_results);

        listView = (ListView) findViewById(android.R.id.list);
        Intent intent = getIntent();
        ArrayList<String> myCommonFilms = intent.getStringArrayListExtra("myCommonFilms");
        Log.d("myCommonFilms in display", myCommonFilms.toString());
        Log.d("ArrayListContents", myCommonFilms.toString());
        final ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(this, android.R.layout.expandable_list_content, myCommonFilms);
        Log.d("ArrayAdapterContents", arrayAdapter.toString());
        listView.setAdapter(arrayAdapter);  
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_display_results, menu);
        return true;
    }
} 
```

这是我的清单，以防有什么东西在那里：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.tot.tipofthetongue"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" /> 

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <activity
            android:name=".Main"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".DisplayResultsActivity"
            android:label="@string/title_activity_display_results" >

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

这是我的主要活动布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/home_screen_bg" >

    <EditText
        android:id="@+id/searchOne"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="182dp"
        android:background="@drawable/home_screen_edittext"
        android:ems="10"
        android:inputType="textPersonName" />

    <Button
        android:id="@+id/findMovies"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="32dp"
        android:text="@string/buttonText"
        android:onClick="displayResults" />

</RelativeLayout> 
```

最后是我用于显示结果的新活动的布局

```
<?xml version="1.0" encoding="utf-8"?>
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/results_bg"
    android:padding="10dip"
    android:textSize="16dip"
    android:textStyle="bold" >

</ListView> 
```

这是错误日志： 09-13 22:42:00.127: W/dalvikvm(1168): threadid=1: 线程退出未捕获异常 (group=0x4001d800) 09-13 22:42:00.137: E/AndroidRuntime( 1168）：致命异常：主要 09-13 22:42:00.137：E/AndroidRuntime（1168）：java.lang.RuntimeException：无法启动活动 ComponentInfo{com.tot.tipofthetongue/com.tot.tipofthetongue.DisplayResultsActivity}： java.lang.NullPointerException 09-13 22:42:00.137: E/AndroidRuntime(1168): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663) 09-13 22:42:00.137: E/AndroidRuntime(1168) ): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679) 09-13 22:42:00.137: E/AndroidRuntime(1168): 在 android.app.ActivityThread.access$2300(ActivityThread.java:125) 09 -13 22:42:00.137：E/AndroidRuntime(1168)：在 android.app。ActivityThread$H.handleMessage(ActivityThread.java:2033) 09-13 22:42:00.137: E/AndroidRuntime(1168): 在 android.os.Handler.dispatchMessage(Handler.java:99) 09-13 22:42: 00.137: E/AndroidRuntime(1168): 在 android.os.Looper.loop(Looper.java:123) 09-13 22:42:00.137: E/AndroidRuntime(1168): 在 android.app.ActivityThread.main(ActivityThread .java:4627) 09-13 22:42:00.137: E/AndroidRuntime(1168): 在 java.lang.reflect.Method.invokeNative(Native Method) 09-13 22:42:00.137: E/AndroidRuntime(1168) : 在 java.lang.reflect.Method.invoke(Method.java:521) 09-13 22:42:00.137: E/AndroidRuntime(1168): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit .java:868) 09-13 22:42:00.137: E/AndroidRuntime(1168): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 09-13 22:42:00.137: E /Android 运行时（1168）：在 dalvik.system.NativeStart.main(Native Method) 09-13 22:42:00.137: E/AndroidRuntime(1168): 由: java.lang.NullPointerException 09-13 22:42:00.137: E/AndroidRuntime(1168) ): 在 com.tot.tipofthetongue.DisplayResultsActivity.onCreate(DisplayResultsActivity.java:30) 09-13 22:42:00.137: E/AndroidRuntime(1168): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 09-13 22:42:00.137: E/AndroidRuntime(1168): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 09-13 22:42:00.137: E/AndroidRuntime(1168): ...还有 11 个30) 09-13 22:42:00.137: E/AndroidRuntime(1168): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 09-13 22:42:00.137: E/AndroidRuntime(1168): 在android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 09-13 22:42:00.137: E/AndroidRuntime(1168): ... 11 更多30) 09-13 22:42:00.137: E/AndroidRuntime(1168): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 09-13 22:42:00.137: E/AndroidRuntime(1168): 在android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 09-13 22:42:00.137: E/AndroidRuntime(1168): ... 11 更多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:45:52.393

我相信错误是由于您的 ListView 的命名/引用造成的。

将其用作 ListView id ：

```
android:id="@+id/myList" 
```

并在 onCreate 方法中以这种方式引用它：

```
listView = (ListView) findViewById ( R.id.myList ); 
```

* * *

**或者**你可以让你的新活动扩展**ListActivity**而不是**Activity**

```
public class DisplayResultsActivity extends ListActivity 
```

在这种情况下，您必须将您的**ListView**命名如下：

```
android:id="@android:id/list" 
```

您将能够像以前一样在您的活动中引用它：

```
listView = (ListView) findViewById(android.R.id.list); 
```

或者您也可以使用以下方法：

```
listView = getListView (); 
```

* * *

## 编辑

* * *

我想我知道您为什么会收到空指针异常，原因如下：

您正在将键下的列表添加到意图：**myCommonFilmsList** "

```
intent.putStringArrayListExtra("myCommonFilmsList", myCommonFilms); 
```

但是，您正在尝试使用另一个键检索列表：**myCommonFilms**

```
ArrayList<String> myCommonFilms = intent.getStringArrayListExtra("myCommonFilms"); 
```

这绝对是您得到空指针异常的原因。避免此类问题的一个好做法是为此类键设置静态属性，因此您不必记住所有键。

就个人而言，我会做以下事情：

将以下属性添加到您的新活动类：

```
public static final String COMMON_FILMS = DisplayResultsActivity.class.getName () + ".COMMON_FILMS"; 
```

通过这种方式，您可以将列表添加到意图中，如下所示：

```
intent.putStringArrayListExtra( DisplayResultsActivity.COMMON_FILMS , myCommonFilms); 
```

然后您从新活动的意图中检索它，如下所示：

```
ArrayList<String> myCommonFilms = intent.getStringArrayListExtra ( DisplayResultsActivity.COMMON_FILMS ); 
```

**或者**您可以简单地更改两个键之一：**myCommonFilmsList**或**myCommonFilms**，因为它们必须相同（添加到意图和从意图中检索）。

让我知道这是否是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:28:01.523

```
<activity
        android:name=".Main"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".DisplayResultsActivity"
        android:label="@string/title_activity_display_results" >

        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

# apache - 如何连接到 Apache 服务器上的特定端口

> ID：12418141
> 
> 赞同：0
> 
> 时间：2012-09-14T04:29:45.357
> 
> 标签：apache, port

我对 apache 服务器很陌生，所以我不知道如何连接到特定的端口号，比如 8888。

我正在使用运行 MAC OS Lion 的 mac，我应该打开网络共享、文件共享和远程登录吗？我在[本文](https://apple.stackexchange.com/questions/23751/how-to-turn-mac-os-x-lion-into-a-web-server)中完成了以下步骤。然后我需要连接到特定的端口号并查看一些文件。但我无法弄清楚如何。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:36:05.803

要连接到特定端口，请使用`http://localhost:SPECIFIC_PORT`，例如`http://localhost:1234`

# java - 提高 com4j 的性能

> ID：12418142
> 
> 赞同：0
> 
> 时间：2012-09-14T04:29:54.183
> 
> 标签：java

我正在使用它连接到 HP 应用程序的 Quality Center。我运行一个大型应用程序，内存增加太多，但并没有减少。它使应用程序崩溃。有人有解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T04:21:35.970

如果您的内存不足，您首先需要开始计算正在使用内存的内容，然后查看它是否应该仍然存在，如果不存在，为什么它仍然存在。

一个很好的起点是使用 jmap 获取堆转储，如[本博客](http://www.objectdefinitions.com/odblog/2008/jmap-and-jstack-getting-a-heap-dump-and-stack-trace-from-a-running-jvm/)所述。堆转储是当前内存中所有内容的转储，因此请准备好至少与分配给 VM 的内存量一样大的文件。

获得堆转储后，可以使用[Eclipse Memory Analyzer](http://www.eclipse.org/mat/)对其进行分析。这将能够告诉您内存的最大用途是什么，并在阻止事物被垃圾收集的引用链中上下移动。

现在这都是纯 java 的东西，所以如果问题出在 com4j 的本机组件或 com 对象本身，那么这将无济于事，但它可以让您从调查中消除 Java 方面。如果是 com 组件泄漏内存，请尝试在没有 java 端的情况下运行它，看看是否可以单独重现内存泄漏。到那时，您将需要与我刚刚描述的技术等效的 Native / COM，但恐怕我对此一无所知。

# c# - 有没有扩展代码优先迁移的好方法

> ID：12418144
> 
> 赞同：11
> 
> 时间：2012-09-14T04:30:16.943
> 
> 标签：c#, sql, entity-framework, entity-framework-5, entity-framework-migrations

我正在开始一个使用实体框架的新项目。我研究了如何创建数据库的选项，发现代码优先迁移最有意义（如果您需要知道原因，请参阅底部）。Code-First Migrations 让我可以使用任意 SQL，这意味着我仍然可以完全控制。在实践中，我发现问题在于，对于某些常见任务，下降到 SQL 似乎非常重复。

出于我的目的，我不在乎迁移中的扩展与提供者无关（我内联的 SQL 不是）。但是，我并没有真正在迁移框架中找到一个好的接缝或扩展点来添加这些东西。

举一个具体的例子，假设我想为 MS-SQL 复制指定一个 RowGuid 列。每一次出现都采取以下形式

```
Sql(
    string.Format(
        "Alter Table {0} Alter Column {1} Add ROWGUIDCOL",
        table,
        column )); 
```

所以我写静态方法来摆脱一些冗余

```
Sql( MigrationHelper.SetRowGuid( table, column ); 
```

-或者-

```
MigrationHelper.SetRowGuid(Sql, table, column); //passing the Sql method 
```

可能可以在 DbMigration 上创建这些扩展方法中的任何一个，并通过以下方式访问它们`this.` 但这看起来仍然不合适：

```
CreateTable(
    "dbo.CustomerDirectory",
     c => new
         {
             Uid = c.Int(nullable: false),
             CustomerUid = c.Int(nullable: false),
             Description = c.String(nullable: false, maxLength: 50, unicode: false),
             RowGuid = c.Guid(nullable: false),
         })
     .PrimaryKey(t => t.Uid)
     .ForeignKey("dbo.Customer", t => t.CustomerUid);

this.SetRowGuid( Sql, "dbo.CustomerDirectory", "RowGuid" );
//Custom method here because of desired naming convention of Constraint
this.SetDefaultConstraint( Sql, "dbo.CustomerDirectory", "''" ): 
```

这不是很糟糕，但对我来说仍然感觉像是一个黑客。我必须重复表名，并且需要确保生成的列名正确。我发现表名需要重复很多，但列也是如此。然而，我真正想要做的是添加到刚刚发生的表名和列名都已知的表声明中。

但是，我找不到一个好的扩展点来扩展流畅的界面或以一种感觉一致的方式扩展代码优先迁移。我错过了什么吗？有没有人找到这样做的好方法？

关于我为什么处于这种情况的一些理由：

由于某些原因，我不喜欢使用通用自定义属性解决方案来指示非映射数据库的通用解决方案，但最强烈的原因是它们不会被迁移自动拾取，这意味着额外的维护。模型优先的解决方案已经过时了，因为它们不能完全控制数据库。Database-First 之所以吸引人，是因为它具有控制性；但是，它没有 Code-First Migrations 提供的开箱即用的变更管理功能。因此，代码优先迁移似乎是赢家，因为 [代码优先] 模型驱动的更改是自动的，这意味着只需维护一件事。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T13:23:06.037

我找到了一个解决方案，但我不确定它是否好。我不得不在兔子洞里走得比我想要的更远一点，这并不是一个真正的延伸点。

它允许我编写如下语句：

```
CreateTable(
    "dbo.CustomerDirectory",
     c => new
        {
            Uid = c.Int(nullable: false),
            CustomerUid = c.Int(nullable: false),
            Description = c.String(nullable: false, maxLength: 50, unicode: false),
            RowGuid = c.Guid(nullable: false),
        })
    .PrimaryKey(t => t.Uid)
    .ForeignKey("dbo.Customer", t => t.CustomerUid)
      //SqlValue is a custom static helper class
    .DefaultConstraint( t => t.Description, SqlValue.EmptyString)
      //This is a convention in the project
      //Equivalent to
      //  .DefaultConstraint( t => t.RowGuid, SqlValue.EmptyString)
      //  .RowGuid( t => t.RowGuid )
    .StandardRowGuid()
      //For one-offs
    .Sql( tableName => string.Format( "ALTER TABLE {0} ...", tableName" ); 
```

我不喜欢：

*   我正在反思私人成员的事实，通常不会使用这样的解决方案
*   如果使用列定义的“name”可选参数，则选择列的 lambda 可能会返回错误的列名。

我只考虑在这里使用它，因为：

*   我们运送 EF 组件，因此我们确信使用的组件将具有这些成员。
*   几个单元测试会告诉我们新版本是否会破坏这些。
*   它与迁移隔离。
*   我们有我们正在反映的所有信息，所以如果新版本确实打破了这一点，我们可以实施一个黑客来替换这个功能。

```
internal static class TableBuilderExtentions
{
    internal static TableBuilder<TColumns> Sql<TColumns>(
        this TableBuilder<TColumns> tableBuilder,
        Func<string, string> sql,
        bool suppressTransaction = false,
        object anonymousArguments = null)
    {
        string sqlStatement = sql(tableBuilder.GetTableName());

        DbMigration dbMigration = tableBuilder.GetDbMigration();
        Action<string, bool, object> executeSql = dbMigration.GetSqlMethod();

        executeSql(sqlStatement, suppressTransaction, anonymousArguments);

        return tableBuilder;
    }

    [Pure]
    private static DbMigration GetDbMigration<TColumns>(this TableBuilder<TColumns> tableBuilder)
    {
        var field = tableBuilder.GetType().GetField(
            "_migration", BindingFlags.NonPublic | BindingFlags.Instance);
        return (DbMigration)field.GetValue(tableBuilder);
    }

    /// <summary>
    ///   Caution: This implementation only works on single properties.
    ///   Also, coder may have specified the 'name' parameter which would make this invalid.
    /// </summary>
    private static string GetPropertyName<TColumns>(Expression<Func<TColumns, object>> someObject)
    {
        MemberExpression e = (MemberExpression)someObject.Body;

        return e.Member.Name;
    }

    [Pure]
    private static Action<string, bool, object> GetSqlMethod(this DbMigration migration)
    {
        MethodInfo methodInfo = typeof(DbMigration).GetMethod(
            "Sql", BindingFlags.NonPublic | BindingFlags.Instance);
        return (s, b, arg3) => methodInfo.Invoke(migration, new[] { s, b, arg3 });
    }

    [Pure]
    private static string GetTableName<TColumns>(this TableBuilder<TColumns> tableBuilder)
    {
        var field = tableBuilder.GetType().GetField(
            "_createTableOperation", BindingFlags.NonPublic | BindingFlags.Instance);

        var createTableOperation = (CreateTableOperation)field.GetValue(tableBuilder);
        return createTableOperation.Name;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-16T17:52:06.620

要搭载[ravi](https://stackoverflow.com/users/139799/ravi)所说的内容，您可以扩展`DbMigration`该类：

```
using System;
using System.Collections.Generic;
using System.Data.Entity.Migrations;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

public abstract class ExtendedDbMigration : DbMigration
{
    public void DoCommonTask(string parameter)
    {
        Sql("** DO SOMETHING HERE **");
    }

    public void UndoCommonTask(string parameter)
    {
        Sql("** DO SOMETHING HERE **");
    }
} 
```

然后，当您创建迁移时，将其从 更改`DbMigration`为`ExtendedDbMigration`：

```
using System.Data.Entity.Migrations;

public partial class some_migration : ExtendedDbMigration
{
    public override void Up()
    {
        DoCommonTask("Up");
    }

    public override void Down()
    {
        UndoCommonTask("Down");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T06:25:43.650

不是通用解决方案，但您可以从抽象/接口类继承。鉴于这需要一些代码更改，但它相当干净。

我已使用此模式为所有表定义我的审计列（UpdatedBy、UpdateDate 等）。

# iphone - 在 UIWebView 中显示图像

> ID：12418146
> 
> 赞同：-1
> 
> 时间：2012-09-14T04:30:29.500
> 
> 标签：iphone, objective-c, uiwebview

我正在制作一个应用程序，其中一部分需要显示图像。而不是让应用程序下载图像，我只想在 UIWebView 中显示它。我已将 WebView 添加到应用程序中，并为其提供了图像的 URL 并告诉它加载，但它仍然是一个白屏。我什至试图让它加载 www.google.com，但它仍然无法加载。

谁能帮我这个？这是我对 Web 视图所做的一切。

```
-(void)viewDidLoad
{
    NSURL *url = [NSURL URLWithString:@"www.google.com"];
    NSURLRequest *requent = [NSURLRequest requestWithURL:url];
    [webView loadRequest:request];
} 
```

webView 在 .h 文件中声明如下：

```
IBOUTlet UIWebView *webView;

@property (nonatomic, retain) UIWebView *webView; 
```

并且在.m文件中合成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:42:12.873

只需替换`www.google.com`它就`http://www.google.com`可以了。

还请添加 UIWebView 作为 IBOutlet -

```
@property (nonatomic, strong) IBOutlet UIWebView *webView; 
```

请在您的故事板中连接网络视图 -

![在此处输入图像描述](../Images/59148d21f796409ca32f4547e415b53b.png)

![在此处输入图像描述](../Images/6ae506e7eebf96115138aaa917800154.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T05:20:51.513

您的 .H 文件应如下所示。

```
@interface slTableViewController () {
IBOutlet UIWebView *myWebView; 
```

@property
(nonatomic, 保留) UIWebView *myWebView;
当然这意味着你必须添加@synthesize myWebView; 到你的 .m 文件！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T04:38:35.180

首先绑定你的 webView 的委托。在 ViewController 的 .h 中添加这个**UIWebViewDelegate**

```
@interface ViewController : UIViewController<UIWebViewDelegate> 
```

现在转到ViewController 的**xib**并右键单击它显示**委托**并**拖动到文件所有者**

现在使用 self.webView 而不是 webView。

在提供给 nsurlrequest 之前还要检查 url 是否有引用。由于您提供的网址是 www.google.com 并且 uiwebview 无法识别它，因此请添加“http://www.google.com”

现在要在 webView 中加载图像，请参阅[此](http://iphoneincubator.com/blog/windows-views/uiwebview-revisited)链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T04:43:43.233

```
NSString *urlAddress = @”http://www.google.com”; 
```

//创建一个URL对象。

```
 NSURL *url = [NSURL URLWithString:urlAddress]; 
```

//URL请求对象

```
 NSURLRequest *requestObj = [NSURLRequest requestWithURL:url]; 
```

//在UIWebView中加载请求。

```
 [webView loadRequest:requestObj]; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-14T05:00:41.087

> 如果您使用情节提要，文件所有者仍然存在，但它被称为视图控制器。因此，要将情节提要中的 UIWebView 链接到 UIWebView 插座，请按住控件，然后单击并将一条线从 View Controller 拖动到 Web View。这一切都在情节提要左侧的“查看控制器场景”面板中。
> 
> 请注意，当您第一次从单一视图应用程序模板创建项目时，无需勾选“使用情节提要”复选框。如果您不使用情节提要，您可能会发现遵循这些较早的教程会更容易。
> 
> 顺便说一句，“使用情节提要”下方的另一个重要复选框是“使用自动引用计数”。这是一个很棒的功能，但是如果您在按照链接到的教程进行操作时将其打开，则需要跳过他释放 webView 实例变量的部分。

复制自[https://stackoverflow.com/a/8158556/](https://stackoverflow.com/a/8158556/)

# c# - 在wpf c#的网格中显示选中复选框的值

> ID：12418148
> 
> 赞同：2
> 
> 时间：2012-09-14T04:30:36.907
> 
> 标签：c#, wpf

我的组框有问题。在组框中，我有一个网格，其中有大约 20 个复选框。问题是我需要将上面所有选中复选框的值显示到另一个组框中。

我在 WPF C# 中工作。

触发上述事件的事件是什么？

如果未选中选中的复选框，则第二组框中显示的值应该消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:12:46.787

在 Wpf 中，您有一个[Checked Event](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.togglebutton.checked.aspx)、[UnChecked Event](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.togglebutton.unchecked%28v=vs.100%29)和[Indeterminate Event](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.togglebutton.indeterminate%28v=vs.100%29)它们都使用通用的`RoutedEventHandler`，因此您应该能够将它们与通用事件处理程序连接起来，检查发件人名称或`Tag`属性中的唯一标识符并使​​用它来更改您的在其他的价值`GroupBox`。

**Xaml**

```
<CheckBox Content="CheckBox" Checked="checkedChanged" Unchecked="checkedChanged" Indeterminate="checkedChanged" Height="16" HorizontalAlignment="Left" Margin="10,10,0,0" Name="checkBox1" VerticalAlignment="Top" Tag="1" />
<CheckBox Content="CheckBox" Checked="checkedChanged" Unchecked="checkedChanged" Indeterminate="checkedChanged" Height="16" HorizontalAlignment="Left" Margin="10,36,0,0" Name="checkBox2" VerticalAlignment="Top" Tag="2" /> 
```

**Xaml.cs**

```
private void checkedChanged(object sender, RoutedEventArgs e)
{
    CheckBox cb = (CheckBox)sender;
    int index;
    if (int.TryParse(cb.Tag.ToString(), out index))
    {
        if (cb.IsChecked == true)
        {
            switch (index)
            {
                case 1:
                    break;

                case 2:
                    break;

                default:
                    break;
            }
        }
        else if (cb.IsChecked == false)
        {
            switch (index)
            {
                case 1:
                    break;

                case 2:
                    break;

                default:
                    break;
            }
        }
        else
        {
            switch (index)
            {
                case 1:
                    break;

                case 2:
                    break;

                default:
                    break;
            }
        }
    }
} 
```

* * *

我在评论中提到的示例：

**Xaml**

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <GroupBox Grid.Column="0" BorderBrush="Black" BorderThickness="2">
            <Grid >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <CheckBox Grid.Column="0" Grid.Row="0" Content="CheckBox" Checked="checkedChanged" Unchecked="checkedChanged" Indeterminate="checkedChanged" Height="16" HorizontalAlignment="Stretch"   Name="checkBox1" VerticalAlignment="Top" Tag="0" />
                <CheckBox Grid.Column="1" Grid.Row="0" Content="CheckBox" Checked="checkedChanged" Unchecked="checkedChanged" Indeterminate="checkedChanged" Height="16" HorizontalAlignment="Stretch"   Name="checkBox2" VerticalAlignment="Top" Tag="1" />
                <CheckBox Grid.Column="0" Grid.Row="1" Content="CheckBox" Checked="checkedChanged" Unchecked="checkedChanged" Indeterminate="checkedChanged" Height="16" HorizontalAlignment="Stretch"   Name="checkBox3" VerticalAlignment="Top" Tag="2" />
                <CheckBox Grid.Column="1" Grid.Row="1" Content="CheckBox" Checked="checkedChanged" Unchecked="checkedChanged" Indeterminate="checkedChanged" Height="16" HorizontalAlignment="Stretch"   Name="checkBox4" VerticalAlignment="Top" Tag="3" />
            </Grid>
        </GroupBox>
        <GroupBox Grid.Column="1" BorderBrush="Black" BorderThickness="2">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <Label Grid.Column="0" Grid.Row="0" Content="" HorizontalAlignment="Stretch"   Name="label1" VerticalAlignment="Top" Tag="1" />
                <Label Grid.Column="1" Grid.Row="0" Content="" HorizontalAlignment="Stretch"   Name="label2" VerticalAlignment="Top" Tag="2" />
                <Label Grid.Column="0" Grid.Row="1" Content="" HorizontalAlignment="Stretch"   Name="label3" VerticalAlignment="Top" Tag="3" />
                <Label Grid.Column="1" Grid.Row="1" Content="" HorizontalAlignment="Stretch"   Name="label4" VerticalAlignment="Top" Tag="4" />
            </Grid>
        </GroupBox>
    </Grid>
</Window> 
```

**Xaml.cs**

```
namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        Label[] myLabels = new Label[4];

        public MainWindow()
        {
            InitializeComponent();

            myLabels[0]=label1;
            myLabels[1]=label2;
            myLabels[2]=label3;
            myLabels[3]=label4;

        }

        private void checkedChanged(object sender, RoutedEventArgs e)
        {
            CheckBox cb = (CheckBox)sender;
            int index;
            if (int.TryParse(cb.Tag.ToString(), out index))
            {
                if (cb.IsChecked == true)
                {
                    myLabels[index].Content="Checked";
                }
                else if (cb.IsChecked == false)
                {
                    myLabels[index].Content="UnChecked";
                }
                else
                {
                    myLabels[index].Content="?";
                }
            }
        }
    }
} 
```

# url - 通过子域或子目录（es.example.com 或 www.example.com/es）定义网站语言

> ID：12418151
> 
> 赞同：4
> 
> 时间：2012-09-14T04:30:48.997
> 
> 标签：url, seo

我即将推出一个多语言网站，我必须决定是通过子域还是子目录来定义网站的语言。例如：

**es** .example.com --或-- www.example.com/ **es**

在每个可能的方面（不仅出于 SEO 目的），使用这两种方法的含义是什么？最佳做法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T00:21:23.727

`es.example.com`和`en.example.com`是不同的主机，而`example.com/es`和`example.com/en`将在同一主机上。

一些技术/软件/服务可能会认为不同的*主机*对应不同的*站点*。例如，某些搜索引擎可能会将不同的子域处理为不同的网站。

* * *

我会这样：

如果所有语言的网站结构都相同或非常相似（例如，所有/大多数页面都已翻译），请使用路径中的语言代码。

如果每种语言的网站结构可能（或可能变得）不同，请使用子域中的语言代码。此外，如果西班牙网站的用户不应该能够登录到英文网站，反之亦然。

所以，翻译成3种语言的小公司网站应该使用路径（因为所有页面都被翻译并且信息架构相同），而多语言论坛应该使用子域（因为不会翻译所有线程/评论）。

* * *

可能还要考虑：将来您可能希望在自己的子域上发布附加网站。如果您使用子域中的语言代码，这将“污染”子域级别：

*   en.example.com
*   es.example.com
*   blog.example.com（新网站）

如果您也想翻译博客网站，您将拥有子子域：

*   en.example.com
*   es.example.com
*   en.blog.example.com
*   es.blog.example.com

相反，如果您在路径中使用了语言代码，您会得到：

*   example.com/en/
*   example.com/es/
*   blog.example.com/en/
*   blog.example.com/es/

# serialization - Wicket 行为中的不可序列化匹配器

> ID：12418155
> 
> 赞同：0
> 
> 时间：2012-09-14T04:31:01.617
> 
> 标签：serialization, wicket, matcher, hamcrest

我在 Wicket 上构建了一个可见性行为，它使用 Hamcrest `Matcher`（和一些 Lambdaj）来查看是否有任何给定的属性模型值与给定的匹配器匹配，如果是，那么它将隐藏组件。

```
public class HiddenWhenValueMatchesBehavior<T> extends Behavior {
  private static final long serialVersionUID = 1L;

  Collection<IModel<T>> models;
  Matcher<T> matcher;

  public HiddenWhenValueMatchesBehavior(Matcher<T> matcher, IModel<T>... models) {
    this.models = Arrays.<IModel<T>> asList(models);
    this.matcher = matcher;
  }

  @Override
  public void onConfigure(Component component) {
    super.onConfigure(component);
    component.setVisible(!hasItem(matcher).matches(extract(models, on(IModel.class).getObject())));
  }
} 
```

直到那时我才意识到 Hamcrest Matchers 是不可序列化的，并且根据他们的问题跟踪器，他们无意序列化。

上面只是一个例子，我可以看到传递`Matchers`给`Behavior`s 和其他 Wicket 东西的几种用途。

有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T05:50:02.513

将匹配器包装在模型中：

公共 HiddenWhenValueMatchesBehavior（IModel> 匹配器，IModel... 模型）{

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T06:13:59.827

将 Matcher 标记为瞬态会有所帮助。但是您需要一种方法来在行为反序列化后使这种依赖关系可用。如果您使用 Spring，@SpringBean 可以自动执行此操作。

或者

将组件的模型对象包装到 LoadableDetachableModel 中，将 Matcher 和匹配逻辑移入其中，再次使 Matcher 瞬态。load 方法可以每次创建 Matcher 的实例并加载模型对象。

# jquery - Safari中的绝对位置错误

> ID：12418158
> 
> 赞同：0
> 
> 时间：2012-09-14T04:31:16.903
> 
> 标签：jquery, html, css, safari

我在这里设置绝对位置时遇到问题。

我想`a.jpg`附在上面，`secondimage.jpg`所有浏览器都可以工作，除了 safari。将`a.jpg`在最左边而不是旁边`secondimage`

我有

```
<div id='div'>
<img class='imageClass' src='a.jpg' />
<img src='secondimage.jpg' />

<img class='imageClass' src='b.jpg' />
<img src='secondimage.jpg' />
</div> 
```

css

```
div{
text-align:right;
}

.imageClass{
position:absolute;
width:20px;
height:20px;
} 
```

我无法指定`top`或`left`属性，因为它们都是动态的，而且似乎 chrome 和 ff 在没有这些属性的情况下工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:40:37.243

添加位置：相对于 div：

```
div { position: relative; text-align:right; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T04:52:58.640

```
div{text-align:right;}
.imageClass{float:left;width:20px;height:20px;} 
```

# javascript - Dynamically get random values from a set of values in xml

> ID：12418162
> 
> 赞同：0
> 
> 时间：2012-09-14T04:32:01.223
> 
> 标签：javascript, html, xml, parsing, xml-parsing

I am now in need of getting some random values from a list of values in XML. Let me explain it clearly. consider it as my XML.

```
<data>
    <value>
        <name>a</name>
        <age>1</age>
    </value>
    <value>
        <name>b</name>
        <age>2</age>
    </value>
    <value>
        <name>c</name>
        <age>3</age>
    </value>
    <value>
        <name>d</name>
        <age>4</age>
    </value>
    <value>
        <name>e</name>
        <age>5</age>
    </value>
</data> 
```

i have to parse 3 values dynamically in a random manner. i.e. if a,b,c are displayed once the next time when the page loaded it has to display d,b,e or any other in a random order. How i have to deal with it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:46:05.820

这是一个将 XML 字符串转换为文档的函数。然后，您可以在文档上使用 DOM 方法：

```
var stringToXMLDoc = (function(global) {

  // W3C DOMParser support
  if (global.DOMParser) {
    return function (text) {
      var parser = new global.DOMParser();
      return parser.parseFromString(text,"application/xml");
    }

  // MS ActiveXObject support
  } else {
    return function (text) {
      var xmlDoc;

      // Can't assume support and can't test, so try..catch
      try {
        xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
        xmlDoc.async="false";
        xmlDoc.loadXML(text);
      } catch (e){}
      return xmlDoc;
    }
  }
}(this)); 
```

例子：

```
var xml = '<books>' + 
            '<book title="foo"/>' +
            '<book title="bar"/>' +
            '<book title="baz"/>' +
          '</books>';
var doc = stringToXMLDoc(xml);
alert(
  doc.getElementsByTagName('book')[2].getAttribute('title')
); 
```

您应该能够对值节点执行类似的操作。

# html - conditional clause in css

> ID：12418164
> 
> 赞同：0
> 
> 时间：2012-09-14T04:32:15.380
> 
> 标签：html, css

```
<!--[if lte IE 8]>
.food_disp{
    background: url("../images/food.png") center bottom no-repeat;
    padding: 80px;

}
<![endif]-->
<!--[if !IE]>
.food_disp {
    background: url("../images/food.png") center bottom no-repeat;
    padding: 50px;
}

<![endif]--> 
```

I have tried the above css to display an image as background with padding set as above. I would like to tell the translator/interpreter that if the client browser version is lower or equal to 8 then add a little more padding distance to the image block for display or if this is not IE at all, then use the already defined block. The image display is fine without the conditional clause added that is, only if

```
 .food_disp {
        background: url("../images/food.png") center bottom no-repeat;
        padding: 50px;
    } 
```

is used. but if the condition is added, then the image disappears.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:38:31.747

我建议您使用[**HTML5Boilerplate执行此操作**](http://html5boilerplate.com/)

```
<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> 

<html class="no-js" lang="en"> <!--<![endif]--> 
```

CSS：

```
.ie9 .food_disp{
  .......
}
.ie8 .food_disp{
  .......
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T05:02:20.980

它不是那样工作的。你有两个选择：

1.  [**在 HTML**](http://www.quirksmode.org/css/condcom.html)[中使用条件注释](http://www.quirksmode.org/css/condcom.html)来包含特定于 IE 的样式表
2.  应用 CSS hack（不要那样做）。另请参阅[Ie8 CSS Hack - 最佳方法？](https://stackoverflow.com/questions/5635829/ie8-css-hack-best-method)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T07:33:43.413

如果您想使用内联样式表，请像这样使用它们：

```
<!--[if lte IE 8]>
<style>
    .food_disp {
        background: url("images/food.png") center bottom no-repeat;
        padding: 50px;
    }
</style>
<![endif]--> 
```

请注意定义周围的“样式”标签。

关于“..”问题，这些点显然指向您的 html 文件的父目录。使用内联 css 时需要记住设置 html 文件的正确相对路径。如果将其用作单独的样式表文件，这可能与 css 文件中使用的路径不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T04:42:25.163

………………………………………………………………………………………………………………………………………………

嗨，现在习惯了这种格式，我认为您的图像路径有问题

```
 <!--[if lte IE 8]>
        .food_disp {
            background: url("images/food.png") center bottom no-repeat;
            padding: 50px;
        }
    <![endif]-->

    <!--[if !IE]>
    .food_disp {
        background: url("images/food.png") center bottom no-repeat;
        padding: 50px;
    }

    <![endif]--> 
```

***[更多信息](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)***

# mongodb - mongodb queries python

> ID：12418166
> 
> 赞同：-2
> 
> 时间：2012-09-14T04:32:22.960
> 
> 标签：mongodb

Collection such as:

```
{"_id":Obj,"fir":1,"sec":1,"trd":"xxx"}
{"_id":Obj,"fir":1,"sec":2,"trd":"few"}   
{"_id":Obj,"fir":1,"sec":3,"trd":"ver"}   
{"_id":Obj,"fir":1,"sec":1,"trd":"xfsd"}   
{"_id":Obj,"fir":1,"sec":2,"trd":"cdsv"}   
{"_id":Obj,"fir":1,"sec":3,"trd":"xedsv"}   
{"_id":Obj,"fir":1,"sec":1,"trd":"crv"}   
{"_id":Obj,"fir":1,"sec":2,"trd":"cre"}   
{"_id":Obj,"fir":1,"sec":3,"trd":"xewfr"}   
{"_id":Obj,"fir":2,"sec":1,"trd":"xxx"}   
{"_id":Obj,"fir":2,"sec":2,"trd":"few"}   
{"_id":Obj,"fir":2,"sec":3,"trd":"ver"}   
{"_id":Obj,"fir":2,"sec":1,"trd":"xfsd"}   
{"_id":Obj,"fir":2,"sec":2,"trd":"cdsv"}   
{"_id":Obj,"fir":2,"sec":3,"trd":"xedsv"}   
{"_id":Obj,"fir":2,"sec":1,"trd":"crv"}   
{"_id":Obj,"fir":2,"sec":2,"trd":"cre"}   
{"_id":Obj,"fir":2,"sec":3,"trd":"xewfr"} 
```

now,I want get this result:

```
{"_id":Obj,"fir":1,"sec":1,"trd":"xxx"}
{"_id":Obj,"fir":1,"sec":2,"trd":"few"}
{"_id":Obj,"fir":1,"sec":3,"trd":"ver"} 
```

This means I just want to get one "sec" document for each sec.Can anyone know how to query it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:29:40.193

我想你需要一个[小组](http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.group)。

在 mongo shell 中，这是有效的：

```
 db.test.group({reduce: function(doc, out) {if (!out[doc.sec]) {out[doc.sec] = doc} }, initial:{}}) 
```

产量：

```
[
    {
        "1" : {
            "_id" : ObjectId("5052bd3d89e42529f53462d3"),
            "fir" : 1,
            "sec" : 1,
            "trd" : "xxx"
        },
        "2" : {
            "_id" : ObjectId("5052bd3d89e42529f53462d4"),
            "fir" : 1,
            "sec" : 2,
            "trd" : "few"
        },
        "3" : {
            "_id" : ObjectId("5052bd3d89e42529f53462d5"),
            "fir" : 1,
            "sec" : 3,
            "trd" : "ver"
        }
    }
] 
```

在 pymongo 中，将 js 函数包装在一个字符串和一个 bson.Code 中：

```
db.test.group({},{},{},bson.Code(
        "function(doc, out) {if (!out[doc.sec]) {out[doc.sec] = doc} }"
    )) 
```

砰砰砰。由“sec”键控，但您可以更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T12:07:25.603

请注意循环顺序..意味着不能在循环下开始行

```
from pymongo import MongoClient
connection = MongoClient('mongodb://localhost:27017/')
db = connection.students.ctec121
student_record = {}
print()
# set flag variable
flag = True

print()
# loop for data input
while (flag):
# ask for input
      student_name = input("Enter student name")
      student_grade=input("enter grade student")                    
  # place values in dictionary
      student_record = {'name':student_name,'grade':student_grade}
 # insert the record
      db.insert(student_record)
 # should we continue?
     flag = input('Enter another record? ')
  if (flag[0].upper() == 'N'):
     flag = False

# find all documents
results = db.find()

for record in results:
    print(record['name'] + ',',record['grade']) 
```

# android - how to fill Date Array With The Dates in android

> ID：12418168
> 
> 赞同：0
> 
> 时间：2012-09-14T04:32:46.297
> 
> 标签：android, parsing, date

I have the Dates 01/01/2012 ,01/05/2012, 01/06/2012 and many more i want to fill these dates in These Dates are coming from server i need to parse these date and fill the `Date Array`
`List <Date[]>`

i can give u static data it should be filled like this

```
dates.add(new Date[12]);
dates.get(i)[0] = new Date(108, 9,1);
dates.get(i)[1] = new Date(108, 9, 8);
dates.get(i)[2] = new Date(108, 9, 15);
dates.get(i)[3] = new Date(108, 9, 22);
dates.get(i)[4] = new Date(108, 9, 29); 
```

how Can i do That What i have done is

```
arrXaxis= new ArrayList<Date[]>();// Defining Array 
```

At the Time of Parsing

```
Integer intCount=p2.getPropertyCount(); /// from Server 
```

They are coming in a form of String

```
arrXaxis.add(new Date[intCount]);
arrXaxis.add(new Date(o.getProperty("Month").toString())); 
```

It is giving me Error

Your help would be greatful Thanks in advance.

# objective-c - Changing text of SMJobBless dialog

> ID：12418172
> 
> 赞同：1
> 
> 时间：2012-09-14T04:33:04.893
> 
> 标签：objective-c, macos, authentication, modal-dialog

I want to run a privileged helper tool as a one-off thing when required, and I'm using [SMJobBless](http://developer.apple.com/library/mac/#documentation/ServiceManagement/Reference/ServiceManagement_header_reference/Reference/reference.html) to do this. However, the text and button of the authorization dialog box imply that the app is trying to install a helper tool, perhaps one that may permanently run in the background ([screenshot](http://d.pr/i/VX3V)). But I don't want users to get the wrong impression. So is there any way to get the old type of dialog box back, which simply said: `<App> wants to make changes. Type your password to allow this.`? I understand that for security reasons Apple wouldn't allow customizing the text, but it should at least allow reverting to the old-style dialog box.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T05:44:14.157

这可以在`AuthorizationRef`使用创建时完成`kAuthorizationEnvironmentPrompt`。

# .net - 反射：将对象数组转换为列表

> ID：12418173
> 
> 赞同：0
> 
> 时间：2012-09-14T04:33:15.817
> 
> 标签：.net, reflection, .net-3.5

代码：

```
object arrayOfObjs = new object[]{ 1, "test"}; 
```

现在我想向这个数组添加新元素。有没有可能像：

```
((IEnumerable)arrayOfObjs).Cast<object>().ToList().Add("test123"); 
```

此代码不添加项目。

**编辑：**

如果我们将其设为强类型：

```
object arrayOfObjs = new string[]{ "1", "test"}; 
```

添加工作，谢谢：

```
var tmp = ((IEnumerable)arrayOfObjs).Cast<object>().ToList();
tmp.Add("test123"); 
```

如果在设计时类型未知，我们如何将此列表转换回 T 数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T04:34:23.433

您需要在局部变量中捕获结果：

```
var items = ((IEnumerable)arrayOfObjs).Cast<object>().ToList();

items.Add("test123"); 
```

# objective-c - 如何获取根视图控制器？

> ID：12418177
> 
> 赞同：134
> 
> 时间：2012-09-14T04:33:29.377
> 
> 标签：objective-c, swift, ios5, uiviewcontroller, uinavigationcontroller

我需要一个根视图控制器的实例。

我尝试了这些方法：

```
UIViewController *rootViewController = (UIViewController*)[[[UIApplication sharedApplication] keyWindow] rootViewController]; 
```

返回： **空**：

另外，当我尝试获取一组控制器时：

```
NSArray *viewControllers = self.navigationController.viewControllers; 
```

它只返回一个控制器，但它不是我的根视图控制器。

如果我尝试从导航控制器中获取：

```
UIViewController *root = (UIViewController*)[self.navigationController.viewControllers objectAtIndex:0]; 
```

返回： **空**：

任何想法为什么？我还能尝试获取我的根视图控制器的实例吗？

谢谢。

* * *

## 回答 #1

> 赞同：251
> 
> 时间：2012-09-14T05:17:11.347

如果您尝试访问`rootViewController`您在 appDelegate 中设置的内容。试试这个：

**Objective-C**

```
YourViewController *rootController = (YourViewController*)[[(YourAppDelegate*)
                                   [[UIApplication sharedApplication]delegate] window] rootViewController]; 
```

**迅速**

```
let appDelegate  = UIApplication.sharedApplication().delegate as AppDelegate
let viewController = appDelegate.window!.rootViewController as YourViewController 
```

**斯威夫特 3**

```
let appDelegate  = UIApplication.shared.delegate as! AppDelegate
let viewController = appDelegate.window!.rootViewController as! YourViewController 
```

**斯威夫特 4 & 4.2**

```
let viewController = UIApplication.shared.keyWindow!.rootViewController as! YourViewController 
```

**斯威夫特 5 & 5.1 & 5.2**

```
let viewController = UIApplication.shared.windows.first!.rootViewController as! YourViewController 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2016-04-27T03:45:51.347

**Objective-C**

```
UIViewController *controller = [UIApplication sharedApplication].keyWindow.rootViewController; 
```

**Swift 2.0**

```
let viewController = UIApplication.sharedApplication().keyWindow?.rootViewController 
```

**Swift 5**

```
let viewController = UIApplication.shared.keyWindow?.rootViewController 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-05-22T22:18:54.683

正如@0x7fffffff[在这里](https://stackoverflow.com/questions/10003562/ios-how-to-segue-back-to-a-uiviewcontroller-thats-already-loaded)所建议的，如果你有 UINavigationController 它可以更容易做到：

```
YourViewController *rootController =
    (YourViewController *)
        [self.navigationController.viewControllers objectAtIndex: 0]; 
```

The code in the answer above returns UINavigation controller (if you have it) and if this is what you need, you can use `self.navigationController`.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2021-04-18T16:18:30.893

For **Swift 5 and later**, I recommend use this method:

```
UIApplication.shared.windows.last?.rootViewController 
```

Use **.last** will return top view Controller is active.

**.first** sometimes doesn't work with libraries that require a window on **top & actived**.

For example: **Admob** . I have the ad not showing and find that I am calling the hidden window underneath when using sheet or fullscreenCover.

**NOTE**: View want to display ads required in NavigationView, if not, ads will be not run.

Example: NavigationView { View1() }

I hope it is useful.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-02-16T10:31:04.257

Unless you have a good reason, in your root controller do this:

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(onTheEvent:)
                                             name:@"ABCMyEvent"
                                           object:nil]; 
```

And when you want to notify it:

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"ABCMyEvent"
                                                object:self]; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-04-20T23:58:35.170

**Swift 3**

```
let rootViewController = UIApplication.shared.keyWindow?.rootViewController 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-11-24T04:35:14.070

Swift way to do it, you can call this from anywhere, it returns optional so watch out about that:

```
/// EZSwiftExtensions - Gives you the VC on top so you can easily push your popups
var topMostVC: UIViewController? {
    var presentedVC = UIApplication.sharedApplication().keyWindow?.rootViewController
    while let pVC = presentedVC?.presentedViewController {
        presentedVC = pVC
    }

    if presentedVC == nil {
        print("EZSwiftExtensions Error: You don't have any views set. You may be calling them in viewDidLoad. Try viewDidAppear instead.")
    }
    return presentedVC
} 
```

Its included as a standard function in:

[https://github.com/goktugyil/EZSwiftExtensions](https://github.com/goktugyil/EZSwiftExtensions)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-09-21T09:03:22.510

**Swift 3: Chage ViewController withOut Segue and send AnyObject** Use: Identity MainPageViewController on target ViewController

```
let mainPage = self.storyboard?.instantiateViewController(withIdentifier: "MainPageViewController") as! MainPageViewController

var mainPageNav = UINavigationController(rootViewController: mainPage)

self.present(mainPageNav, animated: true, completion: nil) 
```

**or if you want to Change View Controller and send Data**

```
let mainPage = self.storyboard?.instantiateViewController(withIdentifier: "MainPageViewController") as! MainPageViewController

let dataToSend = "**Any String**" or  var ObjectToSend:**AnyObject** 

mainPage.getData = dataToSend 

var mainPageNav = UINavigationController(rootViewController: mainPage)

self.present(mainPageNav, animated: true, completion: nil) 
```

# deployment - List of completely deployed application on jboss

> ID：12418178
> 
> 赞同：1
> 
> 时间：2012-09-14T04:33:38.277
> 
> 标签：deployment, jboss, jboss5.x, twiddle

I have 2-3 application(of type war and ear) deployed on jboss 5.0.1 GA.Actually i need a way to check the list of completely deployed applications without opening the actual application.There is a way to see that by using :-

> twiddle.sh query 'jboss.web.deployment:*

' but it also shows the incomplete deployed application apart from deployed.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:12:18.503

您可能必须创建一个脚本（shell/groovy 等）来获取 MBean 列表（使用您已有的命令），然后遍历结果以仅显示属性**State = 3**的那些（使用 twiddle get 选项）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-08T13:22:06.290

请使用此命令：-

```
./twiddle.sh query "jboss.web.deployment:*" 
```

# jquery - jquery如何在悬停时仅更改一个父closeset标签

> ID：12418179
> 
> 赞同：1
> 
> 时间：2012-09-14T04:34:01.430
> 
> 标签：jquery, hover, parent

 我在这里问了类似的问题 

[jquery如何在悬停时仅更改一个父级](https://stackoverflow.com/questions/12406094/jquery-how-to-change-only-one-parent-on-hover)

但这不是我想要的。所以，我重新编码并在这里再次发布

`<a>`当我将鼠标悬停在`<p>`标签上时，我只想更改一个父级。代码是：

```
$('.hover').each(function () {
 $(this).parent().hover(function () {
        $('p').parent(this).css('background-color','red');
    }, function () {
        $('p').parent(this).css('background-color','black');
 });
}); 
```

HTML是：

```
<ul>
   <li><a href='#'>1</a> <p class='hover'>A</p></li>
   <li><a href='#'>2</a> <p class='hover'>B</p></li>
   <li><a href='#'>3</a> <p class='hover'>B</p></li>
   <li><a href='#'>4</a> <p class='hover'>X</p></li>
   <li><a href='#'>5</a> <p class='hover'>Y</p></li>
   <li><a href='#'>6</a> <p class='hover'>Z</p></li>
</ul> 
```

我想要的是当我将鼠标悬停在“A”和**“1”**上时发生变化而其他没有变化，当我悬停在“b”和**“2”**上时其他也没有变化

对不起，我真的是 jquery 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:38:10.467

不需要`.each`，使用[`.prev`](http://api.jquery.com/prev/)

```
$('.hover').hover(function () {
        $(this).prev('a').css('background-color','red');
    }, function () {
        $(this).prev('a').css('background-color','yellow');
 }); 
```

**替代方案：**您可以使用`.parent().children('a')`OR 。`siblings('a')`代替`.prev('a')`

​​​ [`Demo`](http://jsfiddle.net/eEkDP/)

## 更新

如果您想使用`.each`（如您在评论中提到的），请执行以下操作。

```
$('.hover').each(function () {
 $(this).parent().hover(function () {
        $(this).children('a').css('background-color','red');
    }, function () {
        $(this).children('a').css('background-color','yellow');
 });
}); 
```

[`Demo using .each`](http://jsfiddle.net/eEkDP/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:27:18.997

在这里使用`closest('a')`不起作用，因为[最接近的导航到 dom 树](http://api.jquery.com/closest/)，而不是兄弟姐妹。导航使用`.parent('li').find('a')`将找到关联的“a”

另外，据我所知，您只需要 . 上的悬停处理程序`<p>`，因此不需要`each`.

```
$('.hover').hover(function () {
        $(this).parent('li').find('a').css('background-color','red');
    }, function () {
        $(this).parent('li').find('a').css('background-color','black');
 }); 
```

在这里小提琴：http: [//jsfiddle.net/U4n2T/16/](http://jsfiddle.net/U4n2T/16/)

# java - 删除 mule 中的 favicon.ico 请求

> ID：12418180
> 
> 赞同：3
> 
> 时间：2012-09-14T04:34:04.423
> 
> 标签：java, http, esb, mule, favicon

我正在使用 mule studio，并且正在尝试使用它的示例。

当我进行 HTTP 浏览器请求时，会同时出现 2 个请求，其中第一个请求是 /favicon.ico，第二个请求是实际请求。

我的配置 XML 如下。

```
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:file="http://www.mulesoft.org/schema/mule/file" xmlns:jms="http://www.mulesoft.org/schema/mule/jms" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" xmlns:core="http://www.mulesoft.org/schema/mule/core" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="CE-3.2.1" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd 
http://www.mulesoft.org/schema/mule/jms http://www.mulesoft.org/schema/mule/jms/current/mule-jms.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd ">
    <jms:activemq-connector name="Active_MQ" brokerURL="tcp://localhost:61616" validateConnections="true" doc:name="Active MQ"/>
    <flow name="Inititationflow" doc:name="Inititationflow">
        <http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8046" doc:name="HTTP"/>
        <echo-component doc:name="Echo"/>
        <jms:outbound-endpoint queue="BANK1" exchange-pattern="request-response" doc:name="JMS"/>
    </flow>
    <flow name="SampleTest" doc:name="SampleTest">
        <jms:inbound-endpoint queue="BANK1" connector-ref="Active_MQ" doc:name="JMS"/>
        <echo-component doc:name="Echo"/>
        <append-string-transformer message="AppendedPart" doc:name="Append String"/>
        <echo-component doc:name="Echo"/>
        <file:outbound-endpoint path="C:\Documents and Settings\balajik\Desktop" outputPattern="myfile.txt" doc:name="File"/>
    </flow>
</mule> 
```

每当我发出 Http 浏览器请求时：lh:8046/manasa-sundarraman

当出现 2 个请求时，流程会执行两次。请求是：1）/favicon.ico 2）/manasa-sunderraman

我的问题是 /favicon.ico 是什么？为什么它是作为一个请求来的？如何避免呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T06:55:04.900

我找到了一种清除 favicon.ico 请求的方法。如果我们在两者之间添加过滤器，您将能够过滤 favicon.ico 请求。

```
<message-filter doc:name="Filter favicon">

<not-filter>

<wildcard-filter pattern="/favicon.ico" caseSensitive="true"/>

</not-filter>

</message-filter> 
```

在回显 Http 请求后添加它可以解决问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-24T19:32:53.393

[MuleSoft 基础教程](https://developer.mulesoft.com/docs/display/current/Basic+Studio+Tutorial#BasicStudioTutorial-EditingtheApplication)提供了一个可与 3.6+ 中的新 HTTP 侦听器一起使用的解决方案：

```
<expression-filter expression="#[message.inboundProperties.'http.request.uri' != '/favicon.ico']" doc:name="Filter favicon"/> 
```

对于 3.5.0 及更低版本：

```
<expression-filter expression="#[payload != '/favicon.ico']" doc:name="Filter favicon"/> 
```

# django - 构建一个 django 应用程序，该应用程序在应用程序之间具有许多共同功能

> ID：12418182
> 
> 赞同：1
> 
> 时间：2012-09-14T04:34:13.723
> 
> 标签：django

我有一个关于如何在 django 中构建这个应用程序的高级问题。

我有一些模型将经历类似的操作，这些操作将由视图对它们执行（如创建、编辑、保存等）。您还将有一些独特的操作。其中许多操作是相同的，我不想重复代码。这些模型将具有一些共同的字段，它们也将具有独特的字段。设计这个的最佳方法是什么？

不同的模型将是不同的应用程序。例如，模型可以是学校、教堂或餐厅。因此，您将拥有三个应用程序。我想这些模型是抽象类的子类。这些视图还将具有对所有这三个应用程序相同的一些操作。不知道如何编写一组通用代码，并让这三个应用程序继承一些东西，然后在需要时进行自定义。我只需要一些指针/方向。

编辑：这些模型有一些共同的领域，但这是相似性结束的地方。您可以拥有学校、活动或新闻文章的模型（正如您所看到的，从人类的角度来看，它们可能完全不同）。我将根据需要添加或删除这些模型，因此，我*必须*有单独的应用程序。似乎您需要创建在所有这些应用程序中都可以调用的通用内容，但是模型和视图存在这个通用集合（我认为几乎需要一个框架来完成所有这些工作）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T05:52:35.260

这更像是一个概念性的答案。

如果模型非常相似，我认为它们应该属于同一个应用程序。我的推理如下。在我看来，应用程序是一组相关数据以及与该数据相关联的业务逻辑，甚至可能是关于如何呈现该数据的一些逻辑。因此，如果模型非常常见，那么数据似乎有些相关，因此应该在同一个应用程序中。

然而，根据我的经验，一些应用程序可以增长，我在一个应用程序中拥有超过 20 个模型。这可能很难在一个`models.py`文件中管理，因此我喜欢将模型分解为一个包。那么应用程序的结构可能如下所示：

```
project/
  manage.py
  project/
    __init__.py
    settings.py
    ...
  app/
    __init__.py
    ...
    models/
      __init__.py
      ... 
```

唯一的事情是，如果你这样做，那么你必须导入模型`__init__.py`文件中的所有模型并将它们包含在`__all__`变量中。这样，即使模型被构造为一个包，在其余代码中，您也可以将它们用作模块。

这种方法的优点是您的模型是模块化的，这使得维护变得更加容易，并将相关数据保存在一个地方。

* * *

至于业务逻辑，我认为继承应该解决很多问题。您始终可以从多个类继承。这允许您创建一组具有特定功能的基类/模型，然后只从模型的适当基类继承。这将允许您尽可能多地重用代码。

另一种方法是使用元类。这个想法是您定义一个构建不同类的实例的类。例子：

```
class FooMetaClass(type):
    def __new__(cls, name, bases, dict):
        # do some logic
        return super(FooMetaClass, cls).__new__(cls, name, bases, dict)

class FooClass(object):
    __metaclass__ = FooMetaClass
    ... 
```

所以想法是您可以在 中包含一些设置属性`FooClass`，并根据这些属性甚至它们的值，元类可以构建该类的自定义实例。此时你甚至可以生成动态的东西！

我发现这种方法有用几次，但在大多数情况下，我认为子分类应该足够了。

* * *

对于演示，基于类的视图是完美的。在这几年的 DjangoCon 中，Kenneth Love 就基于类的视图做了一个非常好的演讲。在这里你可以看到幻灯片：[https](https://speakerdeck.com/u/kennethlove/p/views-can-be-classy) ://speakerdeck.com/u/kennethlove/p/views-can-be-classy ，希望视频能很快发布。大的想法是基于类的视图与基于函数的视图相同，除了它的结构方式。

我知道在我的许多项目中，我的许多观点几乎是相同的。在视图的开头发生了一些事情，这在许多视图中非常相似。然后是视图的一些中间/肉类部分，这通常是每个视图所独有的。然后是视图的最后部分，我在其中构造上下文字典并返回响应。所以我和许多其他开发人员最终做的是拥有十亿个辅助函数，我们在其他视图中调用它们来完成某些重复性任务。然而，这种方法使代码更难阅读，有时会引入不必要的抽象，因为您必须将许多参数传递给辅助函数，最终感觉不对。

这就是基于类的视图的用武之地。它们与基于函数的视图完全相同，只是它们将视图分解为多个函数调用。因此，一个函数可以负责获取对象，另一个函数负责构建上下文，等等。然后，当所有这些函数组合在一起时，几乎可以执行与函数视图中相同的代码。然而，这带来了一个主要优势。您可以继承视图。因此，您可以拥有一个用于执行任务 a 的基类视图，以及另一个用于执行任务 b 的视图，因此您可以创建另一个从两个类继承的视图，从而执行这两个任务。此外，一旦您从某个基本视图继承，您就可以覆盖定义的任何函数基类，从而提供更大的灵活性。

这是一种非常有用的设计模式，可以为许多类似的视图执行常见任务，同时最大限度地减少要编写的代码量。

* * *

希望这能给您一些关于如何构建项目/应用程序的想法。

# jsp - 我希望保存用户在文本框中输入的值并使用 HTTP Post 将其发送到其他页面

> ID：12418183
> 
> 赞同：0
> 
> 时间：2012-09-14T04:34:21.883
> 
> 标签：jsp, grails, http-post

我想将用户登录信息保存到某个变量并通过 HTTP 发布请求将其发送到其他登录页面（新登录页面在 Grails/Groovy 中）并将这些保存的用户信息粘贴到该页面。希望我说清楚了，在这里是我用jsp写的代码。任何建议都会有所帮助

```
 <html>
<head>
<title>Enter your name and password</title>
</head>   
<body>
<form method="POST" action="loginaction.jsp">
<p><font color="#800000" size="5">First Name:</font><input type="text" name="fname" size="20"></p>
<p><font color="#800000" size="5">Last Name:</font><input type="text" name="lname" size="20"></p>
<p><font color="#800000" size="5">City:</font><input type="text" name="city" size="20"></p>
<p><font color="#800000" size="5">policy Number:</font><input type="text" name="pnum" size="20"></p>
<p><input type="submit" value="Submit" name="B1"></p>
</form>
</body>
</html> 
```

登录操作.jsp

```
<html>
<body>
<p><%=request.getParameter("fnamename")
request.getParameter("lname")
request.getParameter("city")
request.getParameter("pnum")%></p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:54:10.553

在 Grails 中，您将数据提交给控制器。该请求将由表单的 action 属性中指定的操作处理。像：

```
<form method="POST" action="login"> 
```

**您可以通过params**在控制器操作中从该页面获取输入的值，这是一个映射，其中属性的 id 作为键，其值作为值。像：

```
def fname = params.fname 
```

最后，您可以通过您刚刚收到的这些参数来渲染另一个视图。像：

```
render(view:'page', model:[parameters:params]) 
```

不过，您可以通过[多种方式](http://grails.org/doc/2.1.0/ref/Controllers/render.html)使用渲染。也许您可以找到一个更好的供您使用。

# linux - Bash 脚本中有奇怪的特殊字符

> ID：12418187
> 
> 赞同：1
> 
> 时间：2012-09-14T04:34:34.267
> 
> 标签：linux, bash, shell, special-characters

我将 bash 脚本从`PHP`over存储到 CentOS 服务器上`SSH2`；我知道这很复杂，但请耐心等待。

当我打开文件（在服务器上）时：

```
vi myScript 
```

我懂了：

```
ls -al^M
free -m 
```

所以，当我尝试执行它时：

```
bash myScript 
```

输出抛出错误：

```
ls: invalid option -- 
Try `ls --help' for more information.
         total       used       free     shared    buffers     cached
Mem:           676        642         34          0         33        313
-/+ buffers/cache:        295        380
Swap:          767          1        766 
```

它是什么`^M`以及它来自哪里的任何想法？bash 脚本应该能够支持换行符和制表符。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T04:37:30.320

^M 是来自 Windows 的行尾。该文件最初是在 Windows 中创建的。您可以在 vi 中执行类似 :1,$ s/^v^M//g 的操作来删除它们。

您也可以`dos2unix`对整个文件使用命令来一次性清理它。您可以在执行脚本之前执行此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T04:37:58.853

是`^M`CR 或回车符。在某个地方，您的代码被 CRLF 行尾污染了，这在 Windows 机器上很常见。此外，许多互联网协议使用 CRLF 行尾。

要修复，请编辑文件`vim`并使用`:set fileformat=unix`；如果您这样做`:set`或`:set all`在将其更改为 之前`unix`，您应该看到`fileformat=dos`。然后保存文件。

CR 在行尾弄乱了反斜杠，因为反斜杠不再位于行尾；它们后面是回车符，它不是换行符。

# html - GAE GO - html templates and data safety

> ID：12418188
> 
> 赞同：1
> 
> 时间：2012-09-14T04:34:35.040
> 
> 标签：html, google-app-engine, templates, go

When displaying a webpage through the use of [html templates](http://golang.org/pkg/html/template/) in Google App Engine Go application, does the passed data and/or raw template ever leave the App Engine, or just the final html output? For example, if I have a class

```
type Foo struct{
    Public string
    Secret string
} 
```

and a template that only uses `{{.Public}}` argument, does the `{{.Secret}}` argument ever leave the App? Similarly, if there is a template that displays some special data if the `{{.Secret}}` argument is present through the use of `{{if .Secret}}...{{end}}`, is there any way to access that part of the html in any way when the `{{.Secret}}` argument is not present?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T11:00:57.343

解析模板的是你的 Go 程序。这可以在多个 GAE 服务器实例上发生。假设*离开*GAE 意味着通过公共 Internet 上的 HTTP/S 连接发送，那么不 - 您发送的输出是已解析的 HTML 模板。

`{{if .Secret}}`如果该部分未包含在客户端收到的最终 HTML 中，则无法访问该部分。

但是，您可以做的是将模板及其关联的数据集编码为`gob`或`JSON`超过您的客户端，并让您的客户端解析模板。

# android - OnItemClickListener not working

> ID：12418189
> 
> 赞同：0
> 
> 时间：2012-09-14T04:34:47.427
> 
> 标签：android, android-listview, android-arrayadapter, onclicklistener

![enter image description here](../Images/aba2b388c398ca04e32d7d1eadb8e1a4.png)

I searched existing tutorial. Im following that code. I want to show particular list from listview, while Im clicking. But i implement onclicklistener inside my code. It won't working. If i search t, it will shows two,three,ten. But i clicked two it doesn't shows only two.

MyCode:

```
public class ListViewSearchExample extends Activity {

    private ListView lv;
    private EditText et;
    private String listview_array[] = { "ONE", "TWO", "THREE", "FOUR", "FIVE",
    "SIX", "SEVEN", "EIGHT", "NINE", "TEN" };
    private ArrayList<String> array_sort= new ArrayList<String>();
    int textlength=0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        lv = (ListView) findViewById(R.id.ListView01);
        et = (EditText) findViewById(R.id.EditText01);
        //lv.setAdapter(new ArrayAdapter<String>(this,
        //android.R.layout.simple_list_item_1, listview_array));

        et.addTextChangedListener(new TextWatcher()
        {
        public void afterTextChanged(Editable s)
        {
                                                                        // Abstract Method of TextWatcher Interface.
        }
        public void beforeTextChanged(CharSequence s,
        int start, int count, int after)
        {
        // Abstract Method of TextWatcher Interface.
        }
        public void onTextChanged(CharSequence s,
        int start, int before, int count)
        {
        textlength = et.getText().length();
        array_sort.clear();
        for (int i = 0; i < listview_array.length; i++)
        {
        if (textlength <= listview_array[i].length())
        {
        if(et.getText().toString().equalsIgnoreCase(
        (String)
        listview_array[i].subSequence(0,
        textlength)))
        {
             array_sort.add(listview_array[i]);
        }
        }
        }

        lv.setAdapter(new ArrayAdapter<String>
        (ListViewSearchExample.this,
        android.R.layout.simple_list_item_1, array_sort));
        lv.setOnItemClickListener(new OnItemClickListener(){

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long rowId) {
                 //TODO Auto-generated method stub
            //parent.getItemAtPosition(position);
                lv.getItemAtPosition(position);

            }

        });

            }
        });
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:41:25.200

试试这样

```
lstaaplist.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            // TODO Auto-generated method stub

            String name = parent.getItemAtPosition(position).toString();
            long id1 = parent.getItemIdAtPosition(position);

        }
    }); 
```

# node.js - NodeJS in production

> ID：12418191
> 
> 赞同：5
> 
> 时间：2012-09-14T04:34:52.130
> 
> 标签：node.js

I have to ask you guys a question. I just started looking at NodeJS for a project with some friends of mine. Now we have reached the point in our planning that we have started to think about how a NodeJS solution is deployed in production. Do we need a web server for this (IIS or Apache)? My initial thought is "no" since this will force to declare ports twice, once in the web server and once in the NodeJS code. Or should NodeJS just be run as "node server.js"?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T05:11:24.087

您只需运行 NodeJS，`node server.js`但有一些更好的扩展可以处理这个问题。因此，您可以在 windows 中运行 node，但我强烈推荐 UNIX 平台通过 SSH 访问您的服务器（大多数 VPS 都有此功能）。如果你买不起这种类型的服务器，我会选择[Heroku](http://www.heroku.com/)、[Dotcloud](https://www.dotcloud.com/)或[Nodejitsu](http://nodejitsu.com/)（它们三个都是云托管）。

*   [永远](https://github.com/nodejitsu/forever)在崩溃时重新启动您的节点服务器
*   当文件被修改（或指定目录中的任何 JS 文件）时重新启动节点服务器的[Nodemon](http://remysharp.com/2010/10/12/nodejs-rapid-development-nodemon/)

可能还有更多，所以如果我发现任何有用的东西，我会编辑这篇文章。

# java - JDOM 重复元素名称处理

> ID：12418194
> 
> 赞同：0
> 
> 时间：2012-09-14T04:35:24.447
> 
> 标签：java

比如说我有一个这样的 XML

```
 <Containers>
      <Container  ContainerGrossWeight="0.69"  ContainerGrossWeightUOM="lbs" ContainerScm="16757598166153847" TrackingNo="420913119102999949374063023016">
      </Container>
    <Container   ContainerGrossWeight="4.84" ContainerGrossWeightUOM="lbs" ContainerScm="16757598166153848" 
    TrackingNo="420913119102999949374063023016">
      </Container>
    </Containers> 
```

所以“容器”是父级，它有两个子级..和另一个..但是两者的属性值是不同的。

我使用 JDOM 来读取和操作这些值。如果我编写下面的代码，我会得到 first 的属性。我的问题是如何访问 second 的属性和值？

```
Element Containers = rootNode.getChild("Containers")

Element Container = Containers.getChild("Container")

String ContainerSCM = Container.getAttributeValue("ContainerSCM") 
```

上面的代码给了我“16757598166153847”作为输出我如何得到“16757598166153848”作为第二个元素容器属性的getAttributeValue的输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:48:42.080

使用[`Element.getChildren()`](http://www.jdom.org/docs/apidocs/org/jdom2/Element.html#getChildren%28java.lang.String%29)检索所有命名为 a然后取第二个的`Containers`孩子。`Container``List<Element>`

```
List<Element> containers = rootNode.getChild("Containers").getChildren("Container");
Element secondContainer = containers.get(1); // take the second one
String secondContainerSCRM = secondContainer.getAttributeValue("ContainerSCM"); 
```

或者您可以使用[XPath](http://www.jdom.org/docs/apidocs/org/jdom2/xpath/package-summary.html)直接选择您想要使用的元素`//Containers/Container[2]`。

# iphone - can not do modal on modal view controller

> ID：12418197
> 
> 赞同：0
> 
> 时间：2012-09-14T04:35:38.977
> 
> 标签：iphone, ios, modalviewcontroller, presentmodalviewcontroller

**Goal** : show a splash screen in certain of time (3 seconds ) then log-in view appears for authentication process and if this authentication is successful, go to main page ( this effect is used by many applications such as facebook )

What I am doing is

**1.set the root of navigation to be `MainViewController`**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  self.isLogIn = FALSE;
  self.window  =   [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
  MainViewController    *mainView      =   [[MainViewController alloc]   initWithNibName:@"MainViewController" bundle:nil];
  self.navigationController            =   [[UINavigationController alloc] initWithRootViewController:mainView];
  self.window.rootViewController       =   navigationController;
  [self.window makeKeyAndVisible];
  return YES; 
```

}

**2.Present `LogInViewController` as modalViewController in `MainViewController`**

```
@implementation MainViewController
-(void) viewDidLoad {
  appDelegate                        =   [[UIApplication sharedApplication] delegate];
  LogInController   *logInController =   [[LogInController alloc]                 initWithNibName:@"LogInController"      bundle:nil];

  if ( !appDelegate.isLogIn )
     [self presentModalViewController:logInController animated:NO]; 
} 
```

**3.Present `splashScreen` as modalViewController in `LogInViewController`**

```
#implementation LogInViewController
-(void)viewDidLoad
{
    [super viewDidLoad];
    self.title                     =   @"Sign in";
    SplashScreen *splashController =   [[SplashScreen alloc]           initWithNibName:@"SplashScreen"         bundle:nil];

    [self presentModalViewController:splashController animated:NO];
    ;
} 
```

}

**4.In splashScreen, dismiss itself after certain of time**

```
@implementation SplashScreen
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self performSelector:@selector(removeSplashScreen) withObject:nil afterDelay:6.0];                         

}

-(void)removeSplashScreen{
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

**Problem** : the log in view is shown but a splashScreen is not presented before log in view.

I found out that the method of `viewDidLoad` of `SplashScreen` is not invoked at all.

Can somebody explain it to me and point out what I am missing here. All comments are welcomed here.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:42:37.143

这样做是因为您的 appDelegate 的参考存在问题

```
@implementation MainViewController
-(void) viewDidLoad {
   appDelegate                        =   (YourAppDelegate *)[[UIApplication sharedApplication] delegate];
   LogInController   *logInController =   [[LogInController alloc]                 initWithNibName:@"LogInController"      bundle:nil];

   if ( !appDelegate.isLogIn )
   [self presentModalViewController:logInController animated:NO]; 
 } 
```

# android - 我可以在图形布局编辑器中预览操作栏吗？

> ID：12418206
> 
> 赞同：8
> 
> 时间：2012-09-14T04:37:39.850
> 
> 标签：android, xml, android-layout, android-actionbar, graphical-layout-editor

我注意到所有的 ApiDemo 在运行时都以编程方式构建了操作栏。我希望能够从图形布局编辑器中看到带有图标甚至选项卡的操作栏。

是否可以在布局编辑器中预览操作栏，或者是否有必要在运行时构建操作栏而不是在 XML 中以声明方式？如果是这样，为什么会有这个限制？

我知道您可以在单独的 XML 文件中[声明操作栏项目](http://developer.android.com/guide/topics/ui/actionbar.html#ActionItems)，但我没有看到任何记录的将菜单文件中的操作栏项目连接到特定布局的机制。而且我没有看到任何提及在布局中声明操作栏选项卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T09:13:31.440

您可能需要在布局构建器中为其实现占位符。

所有这一切都是因为操作栏实际上是`onCreateOptionsMenu(Menu menu)`由通货膨胀命令创建的。

或者只是偷看一个合适的主题......

![来自布局编辑器的主题 Piker 列表](../Images/fe4524ab961f9f23c7cb37e79f19dc7a.png)

# javascript - linkedin 注销功能（javascript API）在某些情况下不起作用

> ID：12418207
> 
> 赞同：1
> 
> 时间：2012-09-14T04:37:48.710
> 
> 标签：javascript, asp.net, linkedin

在我的网站上，我提供了通过linkedin 登录的设施。我为此使用了javascript API。我写了下面的登录代码。

```
function onLinkedInAuth() {
    var isLoggedIn = document.getElementById('<%=hdnIsLoggedin.ClientID %>').value;
    // Check for the session on the site
    if (isLoggedIn == false || isLoggedIn == 'false') {
        IN.API.Profile("me")
          .fields("id", "firstName", "lastName", "industry", "emailAddress")
          .result(function (me) {
              //debugger;
              var id = me.values[0].id;
              var fname = me.values[0].firstName;
              var lname = me.values[0].lastName;
              var industry = me.values[0].industry;
              var email = me.values[0].emailAddress;
              // AJAX call to register/login this user
              jQuery.ajax({
                  type: "POST",
                  url: "UserRegisterAsSeeker.aspx/LinkedinLoginOrRegister",
                  data: "{id:'" + id + "',fname:'" + fname + "',lname:'" + lname + "',email:'" + email + "'}",
                  contentType: "application/json; Characterset=utf-8",
                  dataType: "json",
                  async: true,
                  success: function (data) {
                      closeLoginWindow();
                      __doPostBack('<%=lnkRefreshPage.UniqueID%>', '');
                  },
                  error: function (request, status, error) {
                      alert('Unable to process the request at this moment! Please try again later.');
                  },
                  complete: function () {

                  }
              });
          });
      }
} 
```

上面的代码工作正常。对于注销，我使用了以下由linkedin提供的功能

```
function logout() {
        IN.User.logout(function () {
            window.location.href = '/logout.aspx'; 
        });
    } 
```

问题在于注销。当我们登录该站点并立即注销时，它可以正常工作，但是当我们离开该站点一段时间后，它不会从linkedin注销。我们必须点击 3-4 次才能正常工作。

我不知道为什么会这样。如果可以的话请帮忙。

# c# - 获取包含类的实例

> ID：12418208
> 
> 赞同：5
> 
> 时间：2012-09-14T04:37:49.540
> 
> 标签：c#, reflection, reference

是否可以在不传递和存储引用的情况下从成员对象访问对象？在下面的示例中，给定的椅子对象是否可以访问房屋对象，而房屋不必将其引用向下传递给成员层次结构？

```
public class Chair {
    public string Material { get; set; }

    public Chair() {
       Material = "Wood";
    }

    public bool IsInMiami() {
       // Get instance of House where chair is found
       House house = ... // Reflection?
       return house.City.Equals("Miami");
    }
}

public class Room {
    private List<Chair> _chairs;

    public Room() {
       _chairs = new List<Chair>();
       _chairs.Add(new Chair());
    } 
}

public class House {
    private List<Room> _rooms;
    public string City { get; set; }

    public House() {
       _rooms = new List<Room>();
       _rooms.Add(new Room());
       City = "Orlando";
    }
} 
```

答案可能是通过反思，但我不知道如何做到这一点，或者是否有另一种方法来实现同样的目标。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T04:44:54.160

如果主席没有提到众议院，就没有办法做到这一点。从主席的角度来看，它与议院没有任何关系。事实上，主席可能属于许多议院，也可能不属于任何议院。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T04:48:11.680

首先，这是一个真实问题的例子还是只是一个用于学习目的的例子？

检查房屋位置绝对**不是**主席的责任。如果你想找到迈阿密的所有椅子，你必须遍历整棵树或给它一个参考。

# c# - 正则表达式一次查找多个匹配项

> ID：12418211
> 
> 赞同：0
> 
> 时间：2012-09-14T04:37:57.893
> 
> 标签：c#, regex, match, regex-group

所以这里是字符串：“DC:PPE Env:CH1 Slice:whatever to extract”或“babaasdfsd DC:PPE asdfas Env:CH1 or Slice:whatever”

基本上我试图找到“DC：PPE”“Env：CH1”“Slice：whatever”并删除它们。

我正在使用以下正则表达式：（c#）

```
Regex r = new Regex(
    @"(?:
    (?<captured>(?:^|\s+)Slice|Env|Dc:.*?\s+)()
  ){1}
  \1", 
```

`(?:^|\s+)`我正在尝试匹配 Slice|Env|Dc 出现在开头或带有前导空格。我`.*?\s+`试图非贪婪地匹配 DC:PPE 之后的空格。

我希望它同时返回所有三场比赛。这有什么问题？

```
string combinedTestSTring = "DC:PPE Env:CH1 Slice:whatever  to extract";

Regex r = new Regex(
    @"(?:
    (?<captured>(?:^|\s+)Slice|Env|Dc:.*?\s+)()
  ){1}
  \1",

RegexOptions.IgnorePatternWhitespace|RegexOptions.IgnoreCase);

var a = r.Matches(combinedTestSTring); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:59:10.997

这是否符合您的要求：

```
Regex r = new Regex(@"\b(:?Slice|Env|Dc):.+?)\b"); 
```

`\b`匹配单词边界。然后它匹配，`Slice|Env|Dc`然后`:`是至少一个字符，直到另一个单词边界。

您不能同时返回所有匹配项。返回匹配数组时，每个元素对应于正则表达式中的不同捕获组。如果您有一个具有重复计数或通配符的组，则返回的匹配只是找到的最后一个，而不是全部。所以你必须编写一个遍历输入字符串的循环，返回每个匹配项。

但是，如果您只想全部替换它们，`r.Replace()`则可以这样做，因为它会替换字符串中的所有匹配项。

# windows-phone-7 - 如何通过标签名称获取 ListBox 中的元素？

> ID：12418213
> 
> 赞同：-1
> 
> 时间：2012-09-14T04:37:57.550
> 
> 标签：windows-phone-7, windows-phone-7.1

> **可能重复：**
> [有没有办法通过 Tag 属性获取 XAML 元素？](https://stackoverflow.com/questions/12408473/is-there-any-way-to-get-xaml-element-by-tag-property)

我有这样的代码：

```
 <ListBox x:Name="ImageListBox"  ScrollViewer.VerticalScrollBarVisibility="Disabled"
                     Height="100"  >

                    <ListBox.ItemsPanel >
                    <ItemsPanelTemplate>
                        <toolkit:WrapPanel  ItemHeight="100" ItemWidth="110" VerticalAlignment="Center" HorizontalAlignment="Center" />
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>

                <ListBox.ItemTemplate>
                        <DataTemplate>
                        <Grid Tap="StackPanel_Tap" Tag="{Binding Type}" Name="Yashu">
                            <Border BorderThickness="{Binding Thickness}"  CornerRadius="0"   BorderBrush="White" Width="100" Height="100"  HorizontalAlignment="Center" VerticalAlignment="Center" Opacity="1" >
                                <!--<Grid>-->
                                <Image Tag="{Binding Type}" Source="{Binding Location}" Opacity="1" Width="100"  Height="100" Stretch="Fill" HorizontalAlignment="Center" VerticalAlignment="Center" UseLayoutRounding="True"  >
                                </Image>
                            </Border>

                        </Grid>
                    </DataTemplate>
                    </ListBox.ItemTemplate>
            </ListBox>
        </ScrollViewer> 
```

如何通过标签名称获取 ListBox 中的网格元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:27:58.197

在事件处理程序`StackPanel_Tap`中，将发送者转换为网格。

`object tag = (sender as Grid).Tag;`

并让网格元素使用`Grid grid1 = sender as Grid;`

注意：这仅在用户点击项目时才有效。我希望它有帮助

# java - Nexmo 入站回调 URL

> ID：12418215
> 
> 赞同：4
> 
> 时间：2012-09-14T04:38:02.200
> 
> 标签：java, sms, nexmo

我正在尝试使用 Nexmo.com 发送和接收短信。发送工作正常，但我在接收消息时遇到了一些问题。

我的问题是回调 URL 以及该页面应该采用的格式。Nexmo 的文档在[这里](http://www.nexmo.com/documentation/#mo)并说明了这一点

> 入站消息
> 
> 如果您购买了长虚拟号码，您将需要为入站设置回调 URL，我们将为每条传入消息发送请求。Nexmo 将等待响应 200 OK，否则将重试。
> 
> 通过 GET（默认）发送到您的 URL 的请求参数包括以下参数。

我错过了一些非常简单的东西吗？有没有我没有找到回调 URL 页面示例的地方？谢谢你的帮助！

**编辑**：为澄清起见，我使用的是 Nexmo 提供的 java 库，但由于它们的 api 都是围绕 URL 构建的，所以 java 程序只需访问 URL 即可发送消息。[这](http://www.nexmo.com/documentation/libs/index.html) 是他们提供的库

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T08:43:41.777

不确定我是否理解了你的问题。

一般来说，如果你想接收消息，你必须在你的服务器上设置一个服务，带有一个回调 url，比如`http://api.example.com/sms/`

然后在 Nexmo 中设置这个回调 url。之后，Nexmo 将通过回调 url 访问您的服务器，并通过 GET 方法发送参数。您的服务器会收到这些信息，并向 Nexmo 响应 200。

# objective-c - 为什么 longLongValue 返回不正确的值

> ID：12418224
> 
> 赞同：3
> 
> 时间：2012-09-14T04:39:06.963
> 
> 标签：objective-c

我有一个 NSDictionary，其中包含一个值为 4937446359977427944 的键。我尝试将它的值作为 long long 并得到 4937446359977427968 回来？

```
NSLog(@"value1 = %@", [dict objectForKey"MyKey"]); // prints 4937446359977427944 

long long lv = [dict objectForKey:@"MyKey"] longLongValue];

NSLog(@"value2 = %lld", lv); // prints 4937446359977427968 
```

正在做：

```
NSLog(@"%lld", [@"4937446359977427944" longLongValue]); // prints 4937446359977427944 
```

我假设这是某种舍入问题，因为低位似乎已被清除，我只是不知道如何阻止它（或为什么会发生）。

正在使用创建字典，`NSJSONSerialization`并且 JSON 对象确实（正确地）包含一个`"MyKey": 4937446359977427944`条目并且该`dict`对象是正确的。

中保存的值`NSDictionary`是`NSDecimalNumber`

有什么东西在幕后被转换成花车吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:14:10.327

`NSDecimalValue`不存储为`double`，它是一个 64 位无符号整数尾数、一个以 10 为底的 8 位有符号整数指数和一个符号位。

问题是 an 的精确值`NSDecimalValue`只能表示为 ... an `NSDecimalValue`。

您可以使用 method 获得大约 64 位的 IEE754 值`doubleValue`。

当您尝试使用时，`longLongValue`您可以有效地获得转换为 long long int 的近似 IEE754 值的结果。

您可能会或可能不会认为它是实现中的错误`NSDecimalValue`（并最终提交雷达并要求 Apple 使用不同的转换例程）。但严格来说，这不是一个错误：这是一个设计决策。

您应该将其`NSDecimalValue`视为一种*浮点*小数。事实上，它与 IEEE754 称为*扩展精度浮点十进制数*的软件实现非常相似，只是它不符合该定义（因为它没有支持至少介于 -6143 和 +6144 之间的值的指数和因为它不支持 NAN 和无限）。

换句话说，它不是整数的扩展实现，它是双精度的扩展（但缺少 NAN 和无限）实现。Apple 本机仅提供近似转换`double`（意味着对于超过 53 位精度的任何值，到 long long int 的转换可能准确也可能不准确）这一事实不是错误。

您可能希望也可能不希望自己（使用类别）实施不同的转换。

另一种可能的观点是认为问题是您使用的 JSon 实现中的错误。但这也是值得商榷的：它给了你一个`NSDecimalValue`可以说是正确的表示。要么您使用 the 进行操作，要么您`NSDecimalValue`对它**的**任何转换负责。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-16T12:56:39.633

我不确定您是否对简单的解决方案感兴趣，或者只是研究导致精度损失的原因的细节。

如果您对一个简单的答案感兴趣：`-[NSDecimalNumber description]`将字符串与值相乘，`-[NSString longLongValue]`并将字符串转换为`long long`

```
NSDecimalNumber *decimalNumber = [NSDecimalNumber decimalNumberWithString:@"4937446359977427944"];
long long longLongNumber = [[decimalNumber description] longLongValue];
NSLog(@"decimalNumber %@ -- longLongNumber %lld", decimalNumber, longLongNumber); 
```

输出

```
2014-04-16 08:51:21.221 APP_NAME[30458:60b] decimalNumber 4937446359977427944 -- longLongNumber 4937446359977427944 
```

最后说明

`[decimalNumber descriptionWithLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"]]`可能更可靠的是您的应用程序支持多个语言环境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T12:34:03.530

对于任何有兴趣快速解决问题的人，根据 Analog File 正确答案：

```
long long someNumber = 8204064638523577098;
NSLog(@"some number lld:               %lld", someNumber);
NSNumber *snNSNumber = [NSNumber numberWithLongLong:someNumber];
NSLog(@"some number NSNumber:          %@", snNSNumber);
NSString *someJson = @"{\"someValue\":8204064638523577098}";
NSDictionary* dict = [NSJSONSerialization
 JSONObjectWithData:[someJson dataUsingEncoding:NSUTF8StringEncoding]
 options:0
 error:nil];
NSLog(@"Dict: %@", dict);
NSLog(@"Some digit out of dict:        %@", [dict objectForKey:@"someValue"]);
NSLog(@"Some digit out of dict as lld: %lld", [[dict objectForKey:@"someValue"] longLongValue]);
long long someNumberParsed;
sscanf([[[dict objectForKey:@"someValue"] stringValue] UTF8String], "%lld", &someNumberParsed);
NSLog(@"Properly parsed lld:           %lld", someNumberParsed); 
```

结果是：

> 2014-04-16 14:22:02.997 Tutorial4[97950:303] 一些号码 lld:
> 8204064638523577098
> 
> 2014-04-16 14:22:02.998 Tutorial4[97950:303] 一些数字 NSNumber:
> 8204064638523577098
> 
> 2014-04-16 14:22:02.998 Tutorial4[97950:303] 字典：{ someValue = 8204064638523577098; }
> 
> 2014-04-16 14:22:02.998 Tutorial4[97950:303] 一些数字超出字典：
> 8204064638523577098
> 
> 2014-04-16 14:22:02.999 Tutorial4[97950:303] 一些数字超出 dict 作为 lld：8204064638523577344
> 
> 2014-04-16 14:22:02.999 Tutorial4[97950:303] 正确解析 lld:
> 8204064638523577098

# emacs - 如何从 emacs shell 中退出

> ID：12418227
> 
> 赞同：11
> 
> 时间：2012-09-14T04:40:06.620
> 
> 标签：emacs, debian

我给了 Mx shell 以获得 Linux shell。如何从那里返回到当前文档

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-14T04:42:04.910

您可以通过以下方式将缓冲区切换回之前的缓冲区：`C-x b`和`enter`

或者，如果您完成了 shell，您可以键入`exit`以停止 shell 并通过以下方式终止缓冲区：`C-x k`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:19:43.603

您可以运行 Cx b 切换到上一个缓冲区。您还可以执行 Cx Cb 并切换到您需要的任何缓冲区。使用 Ch t 阅读教程并查看缓冲区部分。

# xml - 通过 Perl XML 数据解析

> ID：12418228
> 
> 赞同：1
> 
> 时间：2012-09-14T04:40:14.497
> 
> 标签：xml, perl, xml-parsing

我只是在学习PERL。我已经阅读了一些关于解析 XML 的文档并重用了我同事的一些代码。但我似乎无法简单地打印出此数据中 3 名足球运动员姓名的列表。请帮忙。这是PERL代码：

```
 #! /usr/bin/perl -w
use strict;
use DBI;
use XML::Simple;
use LWP::UserAgent;
use HTTP::Request;
use Time::gmtime;
use Time::Local;
use Data::Dumper;

sub statsInit(){
  my $xml_api_url = "http://myprovider.com/nfldata.xml";
  my $xml = getXML($xml_api_url);
  my $xmlData = xml2Simple($xml);
  print "Hello World";
  foreach my $player (@{$xmlData->{player}}){
    my $playername = $player->{name};
    print "pn = $playername | ";
  }
}

sub getXML($){
    my ($xmlURL) = @_;
    my $dataresponse = '';
    my $agent = LWP::UserAgent->new(env_proxy => 1, keep_alive => 1, timeout => 100);
    my $header = HTTP::Request->new(GET => $xmlURL);
    my $request = HTTP::Request->new('GET', $xmlURL, $header);
    my $response = $agent->request($request);
    if($response->is_success){
        $dataresponse = $response->content(); #Loaded data from FINAL_XML
    }
    return $dataresponse;
}

sub xml2Simple(){
    my ($xml) = @_;
    my $xmlObj = XML::Simple->new(KeyAttr => {});
    my $xmlData = '';
    my $parsedData = '';
    if($xml){
        $xmlData = $xmlObj->XMLin($xml);
    }
    return $xmlData;
}

statsInit();
-------- NOW BELOW IS THE RETRIEVED XML DATA --------
    <season xmlns="http://myprovider.com/schema/nfl/statistics-v1.0.xsd" season="2012" season_type="REG">
<team id="BUF" name="Bills" market="Buffalo">
    <players>
        <player id="100" name="Nick Barnett" games_played="1" games_started="1" jersey="50" position="OLB">
            <defense tackle="7" ast="2" />
        </player>
        <player id="101" name="Ryan Fitzpatrick" games_played="1" games_started="1" jersey="14" position="QB">
            <rushing att="2" yds="8" />
            <passing att="32" cmp="18" yds="195" td="3" int="3"/>
        </player>
        <player id="102" name="Fred Jackson" games_played="1" games_started="1" jersey="22" position="RB">
            <rushing att="6" yds="15" td="0"/>
        </player>
    </players>
</team>
</season> 
```

所以我的代码似乎可以正常检索数据，并且我没有收到任何错误。“Hello World”被打印出来。但它永远不会进入播放器循环，也不会打印任何播放器名称。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T06:01:36.363

我想到了。我想我不得不改变这条线。

```
foreach my $player (@{$xmlData->{player}}){ 
```

对此：

```
foreach my $player (@{$xmlData->{team}{players}{player}}){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T22:26:09.073

另一种选择是绕过将整个文档解析为一个数据结构，并在执行过程中解析、处理和忘记每条记录：

```
use strict;
use warnings;

use XML::Rules;

my @rules = (
  player => sub {
    my $p = $_[1];
    print "$p->{name}\n";
    return;
  },
  _default => undef,
);
my $xr = XML::Rules->new( rules => \@rules );
$xr->parse($xml); 
```

# objective-c - 为什么@1 的保留计数等于 7、8 或 10？

> ID：12418230
> 
> 赞同：2
> 
> 时间：2012-09-14T04:40:31.423
> 
> 标签：objective-c, memory-management, retaincount

我在 Xcode 4.4.1 上创建了一个空的 iOS 应用程序，并执行了以下操作：

```
NSNumber *n1 = @1;
NSNumber *n2 = @2;
NSNumber *n3 = @3;
NSNumber *n100 = @100;

NSString *s = @"haha";
NSArray *a = @[n1, s];
NSDictionary *d = @{ @"ha" : @1, @3 : @"hello" };

NSLog(@"retain count of @1 is %i", [n1 retainCount]);
NSLog(@"retain count of @2 is %i", [n2 retainCount]);
NSLog(@"retain count of @3 is %i", [n3 retainCount]);
NSLog(@"retain count of @100 is %i", [n100 retainCount]);

NSLog(@"retain count of @\"haha\" is %i", [s retainCount]);

NSLog(@"retain count of array literal is %i", [a retainCount]);
NSLog(@"retain count of dictionary literal is %i", [d retainCount]); 
```

结果是：

```
retain count of @1 is 10
retain count of @2 is 4
retain count of @3 is 5
retain count of @100 is 1
retain count of @"haha" is -1
retain count of array literal is 1
retain count of dictionary literal is 1 
```

所以数组字面量和字典字面量的保留计数为 1，而字符串字面量据说存在于整个应用程序的运行中，所以这就是它为 -1（可能意味着 MAX unsigned int）的原因，但`@1`实际的保留计数为7、8和10在不同的时间。有规律吗？我发现我也可以这样做`[n1 retain]`，`[n1 release]`它会相应地增加和减少保留计数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T04:50:00.117

我不知道。

StackOverflow 上的任何人都没有。

为什么？

因为只有苹果的工程师知道。Foundation 只是在它的接口上很简单——底层的实现是*一团糟*。它与 Objective-C 运行时混合在一起，针对许多可能或可能的情况进行了艰苦的优化，如果文档中提到某些东西是不可依赖的，那就要认真对待。

`- retainCount`是其中之一。它不能获取类的特定实例的实际引用计数——它的绝对值是没有意义的。在这种方法的情况下，只有相对*变化*才有意义。使用自动释放池和自动引用计数（尽管在这里不适用）增加了另一个层次的歧义。

这就是为什么。

哦，是的，**请查看** [http://whentouseretaincount.com](http://whentouseretaincount.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:42:26.563

我认为这指出了原因：每次`@1`遇到，它都类似于`[[[NSNumber alloc] initWithInt:1] autorelease]`，并且似乎返回相同的对象。因此，当完成以下操作时：

```
NSMutableArray *arr = [[NSMutableArray alloc] init];
for (int i = 0; i < 300; i++) {
    [arr addObject:@1];
} 
```

保留计数实际上变为 610。如果执行以下操作，则相同：

```
NSMutableArray *arr = [[NSMutableArray alloc] init];
for (int i = 0; i < 300; i++) {
    [arr addObject:[[[NSNumber alloc] initWithInt:1] autorelease]];
} 
```

（**更新：**是610，因为retain count被 的使用加了1 `@1`，再一次被数组retain，所以一共是600次）。它表明`@1`任何地方的任何使用都会增加保留计数，并且这个 NSNumber 对象可能被放置在自动释放池中相同的次数。

# c# - 如何检查exe应用程序何时结束？

> ID：12418232
> 
> 赞同：2
> 
> 时间：2012-09-14T04:40:34.190
> 
> 标签：c#, .net, process

我在 C# 中创建一个调用批处理文件的应用程序，然后执行另一个 .net exe 文件，然后在关闭 exe 文件时运行另一个批处理文件。

我可以运行初始批处理文件，并且可以使用该`Process.start(my.exe);`方法调用 exe 文件，但是如何检查 exe 文件何时最终终止以便我可以运行最终批处理文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T04:44:36.703

您可以使用[Process.WaitForExit](http://msdn.microsoft.com/en-us/library/fb4aw7b8.aspx)属性来确定您在应用程序中启动的进程是否已终止。

[Process.WaitForExit - MSDN](http://msdn.microsoft.com/en-us/library/fb4aw7b8.aspx)

> 指示 Process 组件无限期地等待关联的进程退出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T04:46:38.187

您可以调用[WaitForExit()](http://msdn.microsoft.com/en-us/library/fb4aw7b8.aspx)：

```
myProcess.WaitForExit(): 
```

> 当关联的进程退出时（即，当它被操作系统通过正常或异常终止而关闭时），系统会存储有关该进程的管理信息并返回到调用了 WaitForExit() 的组件。然后，进程组件可以通过使用已退出进程的句柄来访问包括 ExitTime 在内的信息。

或者，在[退出的事件上](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.exited.aspx)[启用事件](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.exited.aspx)和挂钩代码：

```
myProcess.EnableRaisingEvents = true;
myProcess.Exited += new EventHandler(myProcess_Exited); 
```

...

```
private void myProcess_Exited(object sender, System.EventArgs e)
{
    Console.WriteLine("Exit time:    {0}\r\n" +
        "Exit code:    {1}\r\nElapsed time: {2}", myProcess.ExitTime, myProcess.ExitCode, elapsedTime);
} 
```

关键区别在于同步或异步。从退出的文档中：

> 当关联进程退出时，有两种方式得到通知：同步和异步。同步通知依赖于调用 WaitForExit 方法来暂停应用程序的处理，直到相关组件退出。异步通知依赖于 Exited 事件。在任何一种情况下，必须将 EnableRaisingEvents 设置为 true，Process 组件才能接收进程已退出的通知。

此外，当您开始运行批处理文件时，请查看此帖子：

[如何从 C# 执行批处理文件？](https://stackoverflow.com/questions/3026888/how-to-execute-a-batch-file-from-c)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-14T04:48:38.240

使用从 Process.Start(string) 返回的 Process 对象，您可以调用 WaitForExit()。

所以：

```
Process process = Process.Start(programFileName); // Starts the program

// ... do some other stuff here, if necessary

process.WaitForExit(); // Waits indefinitely for the process to finish
process.Close(); // Frees resources associated with the process

// ... do other stuff here 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T04:47:29.873

```
 Process p = new Process();
        p.EnableRaisingEvents = true;
        //...config your process
        p.Exited += new EventHandler((s, e) =>
        {
            if (p.ExitCode == 0)
            {
                /*Launch your final batch*/
            }
            else
            {

            }

        });
        p.Start(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T04:46:34.077

当您使用 Process.start() 启动 exe 时，您有一个`Process`对象...查看`Exited`事件和该`EnableRaisingEvents`对象的属性

# python - 对数间隔的整数

> ID：12418234
> 
> 赞同：20
> 
> 时间：2012-09-14T04:40:42.453
> 
> 标签：python, numpy, resampling

假设我有一个 10,000 pt 的向量，我想取一个只有 100 个对数间隔点的切片。我想要一个函数来给我索引的整数值。这是一个简单的解决方案，只需使用 around + logspace，然后摆脱重复项。

```
def genLogSpace( array_size, num ):
    lspace = around(logspace(0,log10(array_size),num)).astype(uint64)
    return array(sorted(set(lspace.tolist())))-1

ls=genLogspace(1e4,100)

print ls.size
>>84
print ls
array([   0,    1,    2,    3,    4,    5,    6,    7,    8,    9,   10,
         11,   13,   14,   15,   17,   19,   21,   23,   25,   27,   30,
         33,   37,   40,   44,   49,   54,   59,   65,   71,   78,   86,
         94,  104,  114,  125,  137,  151,  166,  182,  200,  220,  241,
        265,  291,  319,  350,  384,  422,  463,  508,  558,  613,  672,
        738,  810,  889,  976, 1071, 1176, 1291, 1416, 1555, 1706, 1873,
       2056, 2256, 2476, 2718, 2983, 3274, 3593, 3943, 4328, 4750, 5213,
       5721, 6279, 6892, 7564, 8301, 9111, 9999], dtype=uint64) 
```

请注意，有 16 个重复项，所以现在我只有 84 分。

有没有人有一个解决方案可以有效地确保输出样本的数量是 num？对于此特定示例，num 的输入值 121 和 122 给出 100 个输出点。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-14T09:35:25.093

这有点棘手。你不能总是得到对数间隔的数字。如您的示例所示，第一部分是相当线性的。如果你同意，我有一个解决方案。但是对于解决方案，您应该了解为什么会有重复项。

对数刻度满足条件：

```
s[n+1]/s[n] = constant 
```

我们称这个常数`r`为`ratio`。对于`n`range 之间的这些数字`1...size`，您将获得：

```
1, r, r**2, r**3, ..., r**(n-1)=size 
```

所以这给了你：

```
r = size ** (1/(n-1)) 
```

在您的情况下，and`n=100`将是，这意味着，如果您从 开始，您的下一个数字将是然后再次四舍五入。因此你的重复。少数人会出现此问题。在一个足够大的数字之后，与比率相乘将得到一个不同的四舍五入整数。`size=10000``r``~1.0974987654930561``1``1.0974987654930561``1`

记住这一点，最好的办法是将连续整数相加到某个点，这样与比率的乘法就不再是问题了。然后你可以继续对数缩放。以下函数执行此操作：

```
import numpy as np

def gen_log_space(limit, n):
    result = [1]
    if n>1:  # just a check to avoid ZeroDivisionError
        ratio = (float(limit)/result[-1]) ** (1.0/(n-len(result)))
    while len(result)<n:
        next_value = result[-1]*ratio
        if next_value - result[-1] >= 1:
            # safe zone. next_value will be a different integer
            result.append(next_value)
        else:
            # problem! same integer. we need to find next_value by artificially incrementing previous value
            result.append(result[-1]+1)
            # recalculate the ratio so that the remaining values will scale correctly
            ratio = (float(limit)/result[-1]) ** (1.0/(n-len(result)))
    # round, re-adjust to 0 indexing (i.e. minus 1) and return np.uint64 array
    return np.array(list(map(lambda x: round(x)-1, result)), dtype=np.uint64) 
```

*Python 3 更新：最后一行曾经* `return np.array(map(lambda x: round(x)-1, result), dtype=np.uint64)` *在 Python 2 中*

以下是一些使用它的示例：

```
In [157]: x = gen_log_space(10000, 100)

In [158]: x.size
Out[158]: 100

In [159]: len(set(x))
Out[159]: 100

In [160]: y = gen_log_space(2000, 50)

In [161]: y.size
Out[161]: 50

In [162]: len(set(y))
Out[162]: 50

In [163]: y
Out[163]:
array([   0,    1,    2,    3,    4,    5,    6,    7,    8,    9,   11,
         13,   14,   17,   19,   22,   25,   29,   33,   38,   43,   49,
         56,   65,   74,   84,   96,  110,  125,  143,  164,  187,  213,
        243,  277,  316,  361,  412,  470,  536,  612,  698,  796,  908,
       1035, 1181, 1347, 1537, 1753, 1999], dtype=uint64) 
```

并且只是为了向您展示结果的对数程度，这里是输出的半对数图`x = gen_log_scale(10000, 100)`（如您所见，左侧不是真正的对数）：

![在此处输入图像描述](../Images/5c20bdde0eeecabd675da8f45d1423b5.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T10:15:12.650

[Avaris 的答案](https://stackoverflow.com/a/12421820/68063)中直接生成对数间隔点的方法绝对是要走的路。但我认为看看如何选择适当的值传递给`logspace`你想要的东西会很有趣。

由 生成的数组中的值`logspace(0, k, n)`是数字 10 ^(*ik*  / ( *n* -1))，其中 0 ≤ *i* < *n*：

```
>>> numpy.logspace(0, 2, 10)
array([   1\.        ,    1.66810054,    2.7825594 ,    4.64158883,
          7.74263683,   12.91549665,   21.5443469 ,   35.93813664,
         59.94842503,  100\.        ])
>>> [10 ** (i * 2 / 9.0) for i in xrange(10)]
[1.0, 1.6681005372000588, 2.7825594022071245, 4.641588833612778,
 7.742636826811269, 12.91549665014884, 21.544346900318832,
 35.938136638046274, 59.94842503189409, 100.0] 
```

该序列由一个初始段组成，其中值比单位间距更接近（因此当它们四舍五入到最接近的整数时可能存在重复），然后是一个值比单位间距更宽并且没有重复。

```
>>> ' '.join('{:.2f}'.format(10 ** (i * 2 / 19.0)) for i in xrange(20))
'1.00 1.27 1.62 2.07 2.64 3.36 4.28 5.46 6.95 8.86 11.29 14.38 18.33 23.36
 29.76 37.93 48.33 61.58 78.48 100.00'
>>> [int(0.5 + 10 ** (i * 2 / 19.0)) for i in xrange(20)]
[1, 1, 2, 2, 3, 3, 4, 5, 7, 9, 11, 14, 18, 23, 30, 38, 48, 62, 78, 100] 
```

值之间的间距为*s* ( *i* ) = 10 ^(*iK*) - 10 ^(( *i* -1) *K*)，其中*K* = *k* / ( *n* - 1)。令*m为满足**s* ( *m* ) ≥ 1的最小值。（在上面的示例中*m* = 7。）然后当删除重复项时，正好有 ⌊½ + 10 ^(( *m* -1) *K*) ⌋ + *n* - *m*剩余数字。

一点代数发现：

> *m* = ⌈ − log(1 − 10 ^(−<em>K) ) / *K* log 10 ⌉</p>

让我们检查一下。

```
from math import ceil, floor, log

def logspace_size(k, n):
    """
    Return the number of distinct integers we'll get if we round
    `numpy.logspace(0, k, n)` to the nearest integers and remove
    duplicates.

    >>> logspace_size(4, 100)
    84
    >>> logspace_size(4, 121)
    100
    >>> from numpy import around, logspace
    >>> all(logspace_size(k, n) == len(set(around(logspace(0, k, n))))
    ...     for k in xrange(1,10) for n in xrange(2,100))
    True
    """
    K = float(k) / (n - 1)
    m = int(ceil(- log(1 - 10 ** -K) / (K * log(10))))
    if m < n:
        return int(0.5 + 10 ** ((m - 1) * K)) + n - m
    else:
        return int(0.5 + 10 ** ((n - 1) * K)) 
```

doctests 通过了，所以这对我来说看起来不错。所以你需要做的就是找到`n`这样的`logspace_size(4, n) == 100`。您可以通过二进制印章或其中一种[`scipy.optimize`](http://docs.scipy.org/doc/scipy/reference/optimize.html)方法来做到这一点：

```
>>> f = lambda x, k, n:(logspace_size(k, x) - n)**2
>>> int(round(scipy.optimize.fmin(f, 100, args=(4,100), xtol=0.5, ftol=0.5)[0]))
Optimization terminated successfully.
         Current function value: 0.015625
         Iterations: 8
         Function evaluations: 17
122 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-22T22:38:34.297

我在这里搜索一个简单的方法来在 python 中获取对数间隔系列（以 10 为底）（省略使用 numpy）。但是对于我的超简单需求，您的解决方案太复杂了。

```
def logarithmic_decade(numbers_per_decade, offset=10):
    for n in xrange(numbers_per_decade):
        yield offset * 10.0 ** (n / float(numbers_per_decade)) 
```

由于它是生成器，因此您必须：

```
numbers = list(logarithmic_decade(5))
print numbers
[10.0, 15.848931924611136, 25.118864315095802, 39.81071705534972, 63.095734448019336]

for p, n in zip(numbers, numbers[1:] + [100]):
    print 'prev = {p:.2f}, next = {n:.2f}, next/prev = {rt:.4f}'.format(p=p, n=n, rt=n / p) 
```

给出以下输出：

```
prev = 10.00, next = 15.85, next/prev = 1.5849
prev = 15.85, next = 25.12, next/prev = 1.5849
prev = 25.12, next = 39.81, next/prev = 1.5849
prev = 39.81, next = 63.10, next/prev = 1.5849
prev = 63.10, next = 100.00, next/prev = 1.5849 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-30T14:46:36.760

1 和 1e4 之间的单行解决方案：

```
y = [(lambda x:int(x))(tmp) for tmp in np.logspace(0,4, 10)] 
```

# c# - C# 网络流在读取后仍然包含旧数据

> ID：12418237
> 
> 赞同：0
> 
> 时间：2012-09-14T04:41:03.543
> 
> 标签：c#, .net, sockets, stream

C# 中 TCP 套接字通信的新手，有一个问题，我从客户端应用程序通过网络流发送一些数据，然后从我的服务器应用程序读取它。数据第一次通过很好，但是下次我尝试发送数据时，旧数据仍在网络流中，并且无论新数据的长度如何，都会被覆盖。这会在尝试解析流中的数据时引起问题。我尝试添加一个空终止，但它似乎没有任何效果。

如何在发送更多数据之前清空网络流？

我们发送如下字符串：

```
1|0|bob|cornell|9/14/2012 12:49:34 AM 
```

然后另一个是这样的：

```
1|0|jim|horne|9/14/2012 12:49:34 AM 
```

但第二个字符串通过：

```
1|0|jim|horne|9/14/2012 12:49:34 AMAM 
```

...后面跟着一堆`\0`.

最后一个块是 DateTime，由于额外的 AM，它无法将字符串转换为 DateTime。即使将 \0 附加到我们通过流发送的字符串的末尾，它也不起作用。例如：

```
1|0|jim|horne|9/14/2012 12:49:34 AM\0M 
```

它似乎将空终止视为另一个字符，而不是停止读取字符串的信号。

似乎“Flush”对 NetworkStream 类型没有任何作用。这里一定是一个愚蠢的问题，但任何帮助表示赞赏。

客户端这样做：

```
private static void writeToServer(MessagePacket message, NetworkStream clientStream)
    {
        clientStream.Write(message.ToBytes(), 0, message.ToBytes().Length);
    } 
```

服务器这样做：

```
byte[] rawMessage = new byte[4096];

        while (true)
        {

            try
            {
                clientStream.Read(rawMessage, 0, 4096);
                clientStream.Flush();
            }

            catch
            {
                break;
            }

            newPacket = new MessagePacket(rawMessage);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:53:07.730

Stream.Read() 返回接收到的字节数，之后的字节未定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:03:28.427

在您的消息前加上要读取的字节数/字符数...

比如：<整数><分隔符字符><普通消息>

在接收方，尝试找到分隔符字符的第一个匹配项...解析该分隔符之前部分中的 int ...尝试读取分隔符之后的字节/字符数

# if-statement - 如果程序文件（x86）不存在批处理，如何设置路径=程序文件？

> ID：12418242
> 
> 赞同：2
> 
> 时间：2012-09-14T04:41:58.823
> 
> 标签：if-statement, batch-file, path, x86, winrar

**这是脚本。目标是将文件夹中的 Rar 文件提取到特定文件夹中。问题是我需要 WinRar 的路径才能更改为 Program Files 是 Program Files (x86) 不在系统上。我怎样才能做到这一点？谢谢！**

```
@echo off
@set local

set dirA=C:\Users\%username%\Desktop

\SpearsCraftBox\Batches

set dirE=C:\Users\%username%\AppData

\Roaming\.minecraft

set dirC=C:\Users\%username%\Desktop

\SpearsCraftBox\Batches

cd %dirA% 
```

**设置路径="C:\Program Files (x86)\WinRAR\";%path%**

```
echo.
echo All files in %dirA% to be uncompressed
echo.

echo.

FOR %%i IN (*.rar) do (
unrar x "%%~ni.rar" "%dirE%"
move "%%~ni.rar" "%dirC%"
echo completed uncompressing "%%i" and moved 

archives or archive to "%dirC%"
)

goto eof

:eof

echo.
echo "Task Completed"
echo. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T05:55:52.517

为 Program Files 目录定义了环境变量：`%ProgramFiles%`和`%ProgramFiles(x86)%`.

```
IF EXIST "%ProgramFiles(x86)%\WinRAR" (
  SET pth="%ProgramFiles(x86)%\WinRAR"
)
IF EXIST "%ProgramFiles%\WinRAR" (
  SET pth="%ProgramFiles%\WinRAR"
)

IF NOT EXIST %pth% (
    ECHO WinRar not found.
    GOTO :EOF
)
...
"%pth%unrar" x "%%~ni.rar" "%dirE%"
... 
```

# c++ - 将字符串作为对函数指针c ++的引用传递

> ID：12418248
> 
> 赞同：0
> 
> 时间：2012-09-14T04:42:35.610
> 
> 标签：c++, protocols

下面是我的代码

```
 #include "stdafx.h"    
 #include <string.h>    
 #include <iostream.h>

 using namespace std;

 class ToDoCommands
 {
 public:    
     void getCommand(string);
 };

 void ToDoCommands::getCommand(string command) 
 {
     cout<<command;   //here i get ping
     void (*CommandToCall)(void);
     CommandToCall = command; // error here i want something like
                              //  CommandToCall = ping 
     CommandToCall();
 }

 void ping(void)
 { 
    cout<<"ping command executed";
 }

 int main()
 {
     ToDoCommands obj;
     obj.getCommand("ping");
 } 
```

函数指针应动态引用函数 ping。一个与函数名相同的字符串被传递给 main 中的 getCommand 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:57:58.080

C++ 只是不能那样工作。如果你真的需要这样的东西，你必须制作一个按名称索引的函数表：

```
#include <assert.h>
#include <iostream>
#include <map>
#include <string>

using std::cout;
using std::string;
using std::map;

void ping(void)
{
  cout << "ping command executed\n";
}

class ToDoCommands
{
  public:
    typedef void (*FunctionPtr)();
    typedef string Name;

    void registerFunction(Name name,FunctionPtr);
    void callFunction(Name);

  private:
    map<Name,FunctionPtr> func_map;
};

void ToDoCommands::registerFunction(Name name,FunctionPtr func_ptr)
{
  func_map[name] = func_ptr;
}

void ToDoCommands::callFunction(Name name)
{
  assert(func_map.find(name)!=func_map.end());
  func_map[name]();
}

int main(int argc,char **argv)
{
  ToDoCommands to_do_commands;

  to_do_commands.registerFunction("ping",ping);
  to_do_commands.callFunction("ping");
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:01:24.720

```
void ping(void)    
{   
    //  LL  DD…DD   XX
    cout<<"ping command executed"<<endl;
}

class ToDoCommands    
{
public:
    void getCommand( void (*CommandToCall)(void));  //getCommand(ping)  
};

void ToDoCommands::getCommand( void (*CommandToCall)(void) )
{
    void (*CommandToCall1)(void);
    CommandToCall1  = CommandToCall;
    CommandToCall1();
}

int main()
{
    ToDoCommands obj;
    obj.getCommand( ping );
    return 0;
} 
```

我试过这个及其工作:)

# perl - 无法在 @INC 中找到 Connection.pm（@INC 包含：/usr/local/lib/perl/5.14.2 /etc/perl /usr/local/share/perl/5.14.2 ....）在 . /select.cgi 在行

> ID：12418250
> 
> 赞同：0
> 
> 时间：2012-09-14T04:42:36.917
> 
> 标签：perl, apache2, cgi, httpd.conf, cgi-bin

我第一次尝试在 Ubuntu 上使用 -> **Apache - Perl (CGI) 。**

Apache 服务器在`/var/www`默认`index.html`文件的文件夹中工作正常。但由于我想运行 CGI 脚本，我还安装了（以防万一）DBI，正如一些论坛所建议的那样。我设置了对脚本所在`cgi-bin`文件夹的完全访问权限。`select.cgi`我尝试多次调整`select.cgi`脚本，将库重定向到 Perl 库，但无济于事。我修改了`httpd.conf`文件并将目录路径设置为`select.cgi`文件夹。那没有用。我还定义`ScriptAlias`了 ，并将其设置为工作目录。那也没有用。有没有人有任何有用的指示。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T07:21:59.680

**这不是您想要的确切解决方案，但总体思路如下。**

如何解决`Cant locate xxxx.pm in @INC path`问题

默认情况下，perl 在标准库路径和当前目录中查找模块。有时您需要使用一些安装在非标准位置的模块；有几种方法可以处理这种情况：

检查您的模块是否在`@INC`路径中使用。

例子：

```
perl -e 'use SOAP::Lite;'
perl -e 'use Error;' 
```

`SOAP::Lite`如果您在已安装并已安装的系统上运行这些命令`Error`，Perl 将简单地从这些命令返回而不打印任何输出。

要检查当前的标准库路径，请使用：

```
perl -le 'print foreach @INC' 
```

如果您具有管理权限，那么最好的解决方案是将模块安装在任何系统定义的库路径中。

设置环境变量`PERL5LIB` Perl 会先在`PERL5LIB`环境变量中指定的目录中查找模块，然后再查找标准库和当前目录。所以你可以设置这个变量来定位你的模块。

例子：

```
# For unix like systems
PERL5LIB=/home/path/lib:/usr/another/path/lib; export PERL5LIB 
```

**注意：**在 unix 上用冒号分隔目录，在 Windows 上用分号分隔。

如果您从命令行运行代码，则使用`-I`参数。语法应该类似于。

```
perl -I /home/path/lib -I /usr/another/lib script.pl 
```

您还可以在脚本中添加库路径

在脚本中包含路径的命令是： use lib `path`。

例子：

```
#!/usr/bin/perl
use lib "/home/path/lib";
use lib "/usr/another/lib";

use MyCustomModule; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T21:25:48.253

在评论中，您提供的信息与您最初提供的信息相矛盾。后面的信息似乎更可靠，所以我会使用它。

我相信你说模块的路径是

```
/usr/lib/perl5/vendor_perl/5.8.5/foo/bar/Connection.pm 
```

并且您收到的错误消息（添加了换行符）是：

```
Can't locate foo/bar/Connection.pm in @INC (@INC contains:
   /etc/perl
   /usr/local/lib/perl/5.14.2
   /usr/local/share/perl/5.14.2
   /usr/lib/perl5
   /usr/share/perl5 
   /usr/lib/perl/5.14
   /usr/share/perl/5.14
   /usr/local/lib/site_perl
   .
   /usr/lib/perl5/vendor_perl/5.8.5/foo/bar/
) at ... 
```

你做了类似的事情

```
use foo::bar::Connection; 
```

或者

```
require "foo/bar/Connection.pm"; 
```

Perl 寻找

*   `/etc/perl/foo/bar/Connection.pm`
*   `/usr/local/lib/perl/5.14.2/foo/bar/Connection.pm`
*   ...
*   `/usr/lib/perl5/vendor_perl/5.8.5/foo/bar/foo/bar/Connection.pm`

但这些都不是

```
/usr/lib/perl5/vendor_perl/5.8.5/foo/bar/Connection.pm 
```

修复很简单。将以下内容添加到您的脚本中：

```
use lib '/usr/lib/perl5/vendor_perl/5.8.5'; 
```

另一个可能的解决方法是使用

```
 use Connection; 
```

代替

```
 use foo::bar::Connection; 
```

哪个修复是正确的修复取决于`package`模块侧面的那条线的样子。如果找到`package foo::bar::Connection;`，则需要修改`@INC`（如`use lib, for example). If you find`包 Connection 所示；`, you need to change the`使用`指令。

# html - Twitter-bootstrap row-fluid 仅限 span12

> ID：12418251
> 
> 赞同：0
> 
> 时间：2012-09-14T04:42:38.427
> 
> 标签：html, css, grails, twitter-bootstrap

我正在使用 twitter-bootstrap。我使用了类 row-fluid。但它的最大跨度似乎只有 12。我试图通过添加 span16 来覆盖它，但它似乎不起作用。他们是另一种方式吗？谢谢。

PS。我使用了最新的 twitter-bootstrap。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:09:53.403

您可以自定义 Bootstrap 网格并根据需要设置任意数量的列。[这](http://twitter.github.com/bootstrap/customize.html)是链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T04:48:21.320

至少从上两个版本开始，Bootstrap 已经从 16 列切换到 12 列布局。我知道升级很困难，我也必须在我的网站上进行更改！然而，12 比 16 好，因为有更多的除数，所以可能有更多的比率——比如 1/3 :)

# android - 当我使用 setAdapter() 时，微调器 onItemSelected 不起作用

> ID：12418252
> 
> 赞同：1
> 
> 时间：2012-09-14T04:42:40.513
> 
> 标签：android, spinner

我有 1 个名为 spinner1 的微调器。可见性设置为不可见。然后我使用图像按钮执行单击以启动微调器。当我从 strings.xml 提供数组数据时。它调用 onItemSelected。（静态数组）但是当我使用 arrayadapter 到微调器的 setadapter 时。它不会触发 onItemSelected 事件。

让我给你看一些代码。

```
final Spinner catlist = (Spinner) findViewById(R.id.spinner1);

ArrayAdapter<String> spnadp = new ArrayAdapter<String>(getApplicationContext(), R.layout.style1,android.R.id.text1,phone_numbers);

catlist.setAdapter(spnadp);
catlist.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {

    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
            Toast.makeText(getApplicationContext(), "bbname came is ", Toast.LENGTH_LONG).show();
    }
    @Override
    public void onNothingSelected(AdapterView<?> arg0) {        
    }
}); 
```

并且 phone_numbers 是一个 ArrayList。

```
ImageButton bt1 = (ImageButton) findViewById(R.id.imageButton1);
bt1.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
           catlist.performClick();
    }
}); 
```

这就是我所说的。

所以我的问题是设置适配器有什么问题。如果我不设置它工作正常。它触发 Onitemselected()。在其他情况下，它不会。

***编辑：***（style1.xml）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@android:id/text1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:minHeight="?android:attr/listPreferredItemHeight"
        android:paddingLeft="6dip"
        android:textColor="@color/maroon"
        android:textStyle="bold"
        android:textSize="8pt"
        android:paddingRight="10dip"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

* * *

@Hiral 应用程序强制关闭，我得到了这个......

```
09-13 14:55:29.319: E/AndroidRuntime(8380): FATAL EXCEPTION: main
09-13 14:55:29.319: E/AndroidRuntime(8380): java.lang.NullPointerException
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:353)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.widget.AbsListView.obtainView(AbsListView.java:1495)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1216)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.widget.ListView.onMeasure(ListView.java:1127)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.view.View.measure(View.java:8335)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.view.View.measure(View.java:8335)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.view.View.measure(View.java:8335)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.view.View.measure(View.java:8335)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.view.View.measure(View.java:8335)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.view.ViewRoot.performTraversals(ViewRoot.java:843)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1892)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.os.Looper.loop(Looper.java:130)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at android.app.ActivityThread.main(ActivityThread.java:3835)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at java.lang.reflect.Method.invokeNative(Native Method)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at java.lang.reflect.Method.invoke(Method.java:507)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
09-13 14:55:29.319: E/AndroidRuntime(8380):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:13:11.403

我认为，您并没有仅仅因为您的这行代码而得到它：

```
ArrayAdapter<String> spnadp = new ArrayAdapter<String>(getApplicationContext(), R.layout.style1,android.R.id.text1,phone_numbers); 
```

在这里，您的第二个参数是您的布局文件。但是，您的第三个参数应该是布局文件中的 textview 的 id，您在第二个参数中指定。错误地您在 R.id.text1 之前添加了 android。它将查看您指定的 id 的 android 默认布局并且不会得到那个。

所以尝试将此行更改为：

（对于默认布局）：

```
ArrayAdapter<String> spnadp = new ArrayAdapter<String>(getApplicationContext(), android.R.id.simple_spinner_item,phone_numbers); 
```

并尝试！

更多参考：

[参考这个](http://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter%28android.content.Context,%20int,%20int,%20T%5C%5B%5C%5D%29)

**编辑 ：**

```
ArrayAdapter<String> spnadp = new ArrayAdapter<String>(getApplicationContext(),R.layout.style1,phone_numbers); 
```

并使您的 style1.xml 像：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView
        xmlns:android="http://schemas.android.com/apk/res/android"        
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:minHeight="?android:attr/listPreferredItemHeight"
        android:paddingLeft="6dip"
        android:textColor="@color/maroon"
        android:textStyle="bold"
        android:textSize="8pt"
        android:paddingRight="10dip"
        android:textAppearance="?android:attr/textAppearanceLarge" 
/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:00:23.100

您无法 使用方法 在您的 事件中执行`OnItemSelectedListener`事件`spinner``ImageButton` `OnClickListener``catlist.performClick()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T09:40:27.093

我不知道为什么以及如何。它现在工作。我在 setadapter 之前添加了一行。

```
spnadp.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
```

# android - 将列表视图中的列表项设置为自动 Web 链接，并使文本视图的其余部分可点击

> ID：12418259
> 
> 赞同：0
> 
> 时间：2012-09-14T04:43:46.630
> 
> 标签：android, android-layout

如何将列表视图中的列表项设置为自动 Web 链接并使文本视图的其余部分可点击。这可以直接在xml文件中完成吗？我试过这样 android:autoLink="web" ，但文本视图的其余部分不可点击？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:47:44.107

使用可点击跨度。这是可点击跨度的[示例](http://www.chrisumbel.com/article/android_textview_rich_text_spannablestring)

# c++ - 多个嵌套 for 循环与单个 for 循环

> ID：12418260
> 
> 赞同：5
> 
> 时间：2012-09-14T04:43:50.687
> 
> 标签：c++, for-loop, nested, timing

我在 c++ (MSVS) 中进行了一些速度测试，得到了一个奇怪的结果。我正在测试使用一个 for 循环与多个嵌套 for 循环的速度。这是代码：

```
double testX = 0;
// Single loop executes in roughly 0.04 seconds
for( int i = 0; i < 27000000; i++ ){
    testX += 1;
}

// Nested loop executes in roughly 0.03 seconds
for( int x = 0; x < 300; x++ ){
    for( int y = 0; y < 300; y++ ){
        for( int z = 0; z < 300; z++ ){
            testX += 1;
        }
    }
} 
```

如您所见，速度差异相当明显。我已经运行了很多次，这些是我看到的平均时间（这些是使用 glfwGetTime() 计时的）。

所以我的问题是：为什么？我的测试方法是否不足？我使用的循环太少了吗？我试过搜索谷歌，我能找到的唯一类似的问题将他的问题与缓存一致性有关，但由于这些 for 循环是空的，我认为它不会真正产生影响。

任何帮助都会得到帮助:)

**编辑：**多亏了评论，我意识到使用空的 for 循环可能不是测试事物的最佳方式......所以我更新了我的代码以将一些（非常）简单的操作变为双重。我也在发布模式下编译。然而，虽然这两种方法在时间上更加相似，但第二种方法仍然稍微快一些。

是的，这就是所有的测试代码（减去计时/输出功能，但这些并不完全针对问题）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T10:41:19.173

当 testX 变量稍后在代码中的某处使用时，编译器不会“优化”循环。当我只在代码中添加一行输出testX时，结果如下：

*   `single for loop: 1.218 ms`
*   `nested for loop: 1.218 ms`

这几乎表明编译器尽可能将嵌套循环转换为单个循环。循环索引可用于防止优化：

以这种方式修改代码

```
for( int i = 0; i < 27000000; i++ ){
    testX += i;
} 
```

和

```
for( int x = 0; x < 300; x++ ){
    testX += x;
    for( int y = 0; y < 300; y++ ){
        testX += y;
        for( int z = 0; z < 300; z++ ){
            testX += z;
        }
    }
} 
```

会给嵌套循环增加一点开销，但执行时间显示

*   `single for loop: 1.224 ms`
*   `nested for loop: 1.226 ms`

此处给出的时间平均超过 30.000 次循环运行。

注意：`testX += x;`only 贡献 1 in 90000 和`testX += x;`only 贡献 1 in 300。因此上面的两个部分保持可比性。

嵌套循环并不比单循环慢多少，但您观察到它们更快是**不**正确的。

**并且：**你展示的次数大约是我观察到的次数的 40 倍。我建议仔细检查编译器设置，因为我在中速硬件上运行了测试。也许结果值得`glfwGetTime()`怀疑，这是您提出问题的主要原因。您是否尝试过使用其他时序方案？

**编辑：**为了防止编译器优化循环限制可以选择为非常数：

```
int lmt = rand() % 1 + 300;      // random value 300 or 301 
int big_lmt = lmt * lmt * lmt;   // random value 27000000 or 27270901

for( int i = 0; i < big_lmt; i++ ){
    testX += i;
}

for( int x = 0; x < lmt; x++ ){
    testX += x;
    for( int y = 0; y < lmt; y++ ){
        testX += y;
        for( int z = 0; z < lmt; z++ ){
            testX += z;
        }
    }
} 
```

这避免了编译器的可预测性。

结果（用于`lmt = 300`可比较的案例）：

*   `single for loop: 1.213 ms`
*   `nested for loop: 1.216 ms`

**结果：**

*   嵌套循环**并不**比单循环快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T07:02:37.077

如果您不在循环中使用`for`变量（`x`, `y`, `z`）`for`，智能编译器可以（并且应该）在一个`for`循环中转换您的第二种形式而无需嵌套。除非您通过让用户在运行时从 输入`x`、`y`、`z`值`stdin`或从某个流中读取等来防止此类编译器优化消除静态可预测性。

此外，如果您不对`testX`变量做任何事情（例如，将其打印到`stdout`），智能编译器可以（并且应该）将其优化掉，即完全删除死代码。

所以我要说的是，现在的基准测试在某种程度上是不正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T06:52:39.907

你最好的选择是查看反汇编并检查生成代码的差异，我猜编译器在那里做了一些非常重要的优化。

# coffeescript - 咖啡脚本中的函数内部函数

> ID：12418270
> 
> 赞同：1
> 
> 时间：2012-09-14T04:45:19.850
> 
> 标签：coffeescript

我如何在咖啡脚本中写这个？

```
function setUpDialogForms() {
    setUpListForm();
    setUpUpdateForm();
} 
```

我努力了

```
setUpDialogForms -> setUpListForm(); setUpUpdateForm() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T04:46:28.647

如果在某处定义了`setUpListForm`and`setUpUpdateForm`函数，您可以使用：

```
setUpDialogForms = ->
  setUpListForm()
  setUpUpdateForm()

setUpDialogForms() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T04:51:49.330

发现了。

```
setUpDialogForms = () -> 
    setUpListForm() 
    setUpUpdateForm()
    return 
```

哪个返回

```
var setUpDialogForms;

setUpDialogForms = function() {
  setUpListForm();
  setUpUpdateForm();
}; 
```

# websphere - 登录 SystemOut.log 的 Websphere 应用程序服务器

> ID：12418272
> 
> 赞同：0
> 
> 时间：2012-09-14T04:45:29.467
> 
> 标签：websphere, rad

默认情况下，进程服务器上所有进程和应用程序的日志、错误和跟踪信息都写入 SystemOut.log，但我们的要求是只记录请求和响应。管理控制台中是否有任何设置可以执行此操作？

提前致谢.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:04:48.223

当 WebSphere 启动时，它将`SystemOut.log`文件指定为所有`System.out`打印都将转到的文件。因此，无论何时发出任何代码，例如，`System.out.println`输出最终都会进入`SystemOut.log`- 您的应用程序代码*和*WebSphere 的内部代码都是如此。

要达到您想要的效果，请考虑使用一些日志框架，例如[Log4J](http://logging.apache.org/log4j/)、[SLF4J](http://www.slf4j.org)或 Java 的标准日志 API。

# ruby-on-rails-3 - 在 has_one 关联中考虑对字符串字段进行 Sphinx 过滤

> ID：12418274
> 
> 赞同：1
> 
> 时间：2012-09-14T04:45:43.687
> 
> 标签：ruby-on-rails-3, postgresql, filtering, thinking-sphinx

不能说这里出了什么问题。我正在尝试过滤我的协会的`state`财产。`address`

```
class Organization < ActiveRecord::Base
  has_one :address, :as => :addressable, :dependent => :destroy

  define_index do
    indexes :name, :sortable => true

    has mec_revenue
    has 'CRC32(status)', :as => :status, :type => :integer
    has 'CRC32(address.state)', :as => :state, :type => :integer
    set_property :delta => true
  end

end 
```

但是当我运行时`rake ts:index`，我收到以下错误。

```
indexing index 'organization_delta'...
ERROR: index 'organization_delta': sql_range_query: ERROR:  missing FROM-clause entry for table "address"
LINE 1: ...S "mec_revenue", CRC32(status) AS "status", CRC32(address.st... 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T18:24:27.557

我不确定如何解决 FROM 子句问题，但如果我使用表名而不是属性名，我可以使用`group_by`子句来解决这个问题。

```
has 'CRC32(addresses.state)', :as => :state, :type => :integer
group_by "addresses.state" 
```

# android - 带有可点击链接的 Android TextView：如何捕获点击？

> ID：12418279
> 
> 赞同：143
> 
> 时间：2012-09-14T04:46:31.263
> 
> 标签：android, hyperlink, textview

我有一个 TextView，它呈现基本的 HTML，包含 2 个以上的链接。我需要捕获对链接的点击并打开链接——在我自己的内部 WebView 中（而不是在默认浏览器中。）

处理链接渲染的最常用方法似乎是这样的：

```
String str_links = "<a href='http://google.com'>Google</a><br /><a href='http://facebook.com'>Facebook</a>";
text_view.setLinksClickable(true);
text_view.setMovementMethod(LinkMovementMethod.getInstance());
text_view.setText( Html.fromHtml( str_links ) ); 
```

但是，这会导致链接在默认的内部 Web 浏览器中打开（显示“使用...完成操作”对话框）。

我尝试实现一个 onClickListener，它会在单击链接时正确触发，但我不知道如何确定单击了哪个链接...

```
text_view.setOnClickListener(new OnClickListener(){

    public void onClick(View v) {
        // what now...?
    }

}); 
```

或者，我尝试创建一个自定义 LinkMovementMethod 类并实现 onTouchEvent ...

```
public boolean onTouchEvent(TextView widget, Spannable text, MotionEvent event) {
    String url = text.toString();
    // this doesn't work because the text is not necessarily a URL, or even a single link... 
    // eg, I don't know how to extract the clicked link from the greater paragraph of text
    return false;
} 
```

想法？

* * *

## 示例解决方案

我想出了[一个解决方案](https://stackoverflow.com/questions/12418279/android-textview-with-clickable-links-how-to-capture-clicks/19989677#19989677)，它解析 HTML 字符串中的链接并使其可点击，然后让您响应 URL。

* * *

## 回答 #1

> 赞同：257
> 
> 时间：2013-11-14T22:22:32.023

根据[另一个答案](https://stackoverflow.com/questions/12418279/android-textview-with-clickable-links-how-to-capture-clicks/12418663#12418663)，这里有一个函数 setTextViewHTML()，它解析 HTML 字符串中的链接并使它们可点击，然后让您响应 URL。

```
protected void makeLinkClickable(SpannableStringBuilder strBuilder, final URLSpan span)
{
    int start = strBuilder.getSpanStart(span);
    int end = strBuilder.getSpanEnd(span);
    int flags = strBuilder.getSpanFlags(span);
    ClickableSpan clickable = new ClickableSpan() {
        public void onClick(View view) {
            // Do something with span.getURL() to handle the link click...
        }
    };
    strBuilder.setSpan(clickable, start, end, flags);
    strBuilder.removeSpan(span);
}

protected void setTextViewHTML(TextView text, String html)
{
    CharSequence sequence = Html.fromHtml(html);
    SpannableStringBuilder strBuilder = new SpannableStringBuilder(sequence);
    URLSpan[] urls = strBuilder.getSpans(0, sequence.length(), URLSpan.class);   
    for(URLSpan span : urls) {
        makeLinkClickable(strBuilder, span);
    }
    text.setText(strBuilder);
    text.setMovementMethod(LinkMovementMethod.getInstance());       
} 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2019-11-20T14:05:44.600

我在**Kotlin**中创建了一个简单的扩展函数，通过对 URLSpan 元素应用新的回调来捕获 TextView 中的 url 链接点击。

strings.xml（文本中的示例链接）

```
<string name="link_string">this is my link: <a href="https://www.google.com/">CLICK</a></string> 
```

确保在调用“handleUrlClicks”之前将跨区文本设置为 TextView

```
textView.text = getString(R.string.link_string) 
```

这是扩展功能：

```
/**
 * Searches for all URLSpans in current text replaces them with our own ClickableSpans
 * forwards clicks to provided function.
 */
fun TextView.handleUrlClicks(onClicked: ((String) -> Unit)? = null) {
    //create span builder and replaces current text with it
    text = SpannableStringBuilder.valueOf(text).apply {
        //search for all URL spans and replace all spans with our own clickable spans
        getSpans(0, length, URLSpan::class.java).forEach {
            //add new clickable span at the same position
            setSpan(
                object : ClickableSpan() {
                    override fun onClick(widget: View) {
                        onClicked?.invoke(it.url)
                    }
                },
                getSpanStart(it),
                getSpanEnd(it),
                Spanned.SPAN_INCLUSIVE_EXCLUSIVE
            )
            //remove old URLSpan
            removeSpan(it)
        }
    }
    //make sure movement method is set
    movementMethod = LinkMovementMethod.getInstance()
} 
```

这就是我所说的：

```
textView.handleUrlClicks { url ->
    Timber.d("click on found span: $url")
} 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-09-05T00:31:43.333

您已完成以下操作：

```
text_view.setMovementMethod(LinkMovementMethod.getInstance());
text_view.setText( Html.fromHtml( str_links ) ); 
```

您是否尝试过如下所示的相反顺序？

```
text_view.setText( Html.fromHtml( str_links ) );
text_view.setMovementMethod(LinkMovementMethod.getInstance()); 
```

并且没有：

```
text_view.setLinksClickable(true); 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2012-09-14T05:34:00.747

这可以通过使用 Spannable String 来简单地解决。你真正想做的（业务需求）对我来说有点不清楚，所以下面的代码不会对你的情况给出确切的答案，但我敢肯定它会给你一些想法和您将能够根据以下代码解决您的问题。

正如您所做的那样，我还通过 HTTP 响应获取了一些数据，并且在我的案例**“更多”中添加了一些额外的****下划线**文本，这个带下划线的文本将在点击事件时打开 Web 浏览器。希望这会对您有所帮助。

 **```
TextView decription = (TextView)convertView.findViewById(R.id.library_rss_expan_chaild_des_textView);
String dec=d.get_description()+"<a href='"+d.get_link()+"'><u>more</u></a>";
CharSequence sequence = Html.fromHtml(dec);
SpannableStringBuilder strBuilder = new SpannableStringBuilder(sequence);
UnderlineSpan[] underlines = strBuilder.getSpans(0, 10, UnderlineSpan.class);   
for(UnderlineSpan span : underlines) {
    int start = strBuilder.getSpanStart(span);
    int end = strBuilder.getSpanEnd(span);
    int flags = strBuilder.getSpanFlags(span);
    ClickableSpan myActivityLauncher = new ClickableSpan() {
        public void onClick(View view) {
            Log.e(TAG, "on click");
            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(d.get_link()));
            mContext.startActivity(intent);         
        }
    };
    strBuilder.setSpan(myActivityLauncher, start, end, flags);
}
decription.setText(strBuilder);
decription.setLinksClickable(true);
decription.setMovementMethod(LinkMovementMethod.getInstance()); 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2012-10-09T12:02:44.523

我也遇到过同样的问题，但是文本很多，链接和电子邮件很少。我认为使用“autoLink”是一种更简单、更清洁的方法：

```
 text_view.setText( Html.fromHtml( str_links ) );
  text_view.setLinksClickable(true);
  text_view.setAutoLinkMask(Linkify.ALL); //to open links 
```

您可以设置 Linkify.EMAIL_ADDRESSES 或 Linkify.WEB_URLS 如果您只想使用其中一个或从 XML 布局设置

```
 android:linksClickable="true"
  android:autoLink="web|email" 
```

可用选项包括：无、网络、电子邮件、电话、地图、全部

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2016-05-13T08:39:13.193

### 解决方案

我已经实现了一个小类，借助它您可以处理对 TextView 本身的长时间点击以及对 TextView 中链接的点击。

### 布局

```
TextView android:id="@+id/text"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:autoLink="all"/> 
```

### TextViewClickMovement.java

```
import android.content.Context;
import android.text.Layout;
import android.text.Spannable;
import android.text.method.LinkMovementMethod;
import android.text.style.ClickableSpan;
import android.util.Patterns;
import android.view.GestureDetector;
import android.view.MotionEvent;
import android.widget.TextView;

public class TextViewClickMovement extends LinkMovementMethod {

    private final String TAG = TextViewClickMovement.class.getSimpleName();

    private final OnTextViewClickMovementListener mListener;
    private final GestureDetector                 mGestureDetector;
    private TextView                              mWidget;
    private Spannable                             mBuffer;

    public enum LinkType {

        /** Indicates that phone link was clicked */
        PHONE,

        /** Identifies that URL was clicked */
        WEB_URL,

        /** Identifies that Email Address was clicked */
        EMAIL_ADDRESS,

        /** Indicates that none of above mentioned were clicked */
        NONE
    }

    /**
     * Interface used to handle Long clicks on the {@link TextView} and taps
     * on the phone, web, mail links inside of {@link TextView}.
     */
    public interface OnTextViewClickMovementListener {

        /**
         * This method will be invoked when user press and hold
         * finger on the {@link TextView}
         *
         * @param linkText Text which contains link on which user presses.
         * @param linkType Type of the link can be one of {@link LinkType} enumeration
         */
        void onLinkClicked(final String linkText, final LinkType linkType);

        /**
         *
         * @param text Whole text of {@link TextView}
         */
        void onLongClick(final String text);
    }

    public TextViewClickMovement(final OnTextViewClickMovementListener listener, final Context context) {
        mListener        = listener;
        mGestureDetector = new GestureDetector(context, new SimpleOnGestureListener());
    }

    @Override
    public boolean onTouchEvent(final TextView widget, final Spannable buffer, final MotionEvent event) {

        mWidget = widget;
        mBuffer = buffer;
        mGestureDetector.onTouchEvent(event);

        return false;
    }

    /**
     * Detects various gestures and events.
     * Notify users when a particular motion event has occurred.
     */
    class SimpleOnGestureListener extends GestureDetector.SimpleOnGestureListener {
        @Override
        public boolean onDown(MotionEvent event) {
            // Notified when a tap occurs.
            return true;
        }

        @Override
        public void onLongPress(MotionEvent e) {
            // Notified when a long press occurs.
            final String text = mBuffer.toString();

            if (mListener != null) {
                Log.d(TAG, "----> Long Click Occurs on TextView with ID: " + mWidget.getId() + "\n" +
                                  "Text: " + text + "\n<----");

                mListener.onLongClick(text);
            }
        }

        @Override
        public boolean onSingleTapConfirmed(MotionEvent event) {
            // Notified when tap occurs.
            final String linkText = getLinkText(mWidget, mBuffer, event);

            LinkType linkType = LinkType.NONE;

            if (Patterns.PHONE.matcher(linkText).matches()) {
                linkType = LinkType.PHONE;
            }
            else if (Patterns.WEB_URL.matcher(linkText).matches()) {
                linkType = LinkType.WEB_URL;
            }
            else if (Patterns.EMAIL_ADDRESS.matcher(linkText).matches()) {
                linkType = LinkType.EMAIL_ADDRESS;
            }

            if (mListener != null) {
                Log.d(TAG, "----> Tap Occurs on TextView with ID: " + mWidget.getId() + "\n" +
                                  "Link Text: " + linkText + "\n" +
                                  "Link Type: " + linkType + "\n<----");

                mListener.onLinkClicked(linkText, linkType);
            }

            return false;
        }

        private String getLinkText(final TextView widget, final Spannable buffer, final MotionEvent event) {

            int x = (int) event.getX();
            int y = (int) event.getY();

            x -= widget.getTotalPaddingLeft();
            y -= widget.getTotalPaddingTop();

            x += widget.getScrollX();
            y += widget.getScrollY();

            Layout layout = widget.getLayout();
            int line = layout.getLineForVertical(y);
            int off = layout.getOffsetForHorizontal(line, x);

            ClickableSpan[] link = buffer.getSpans(off, off, ClickableSpan.class);

            if (link.length != 0) {
                return buffer.subSequence(buffer.getSpanStart(link[0]),
                        buffer.getSpanEnd(link[0])).toString();
            }

            return "";
        }
    }
} 
```

### 用法

```
String str_links = "<a href='http://google.com'>Google</a><br /><a href='http://facebook.com'>Facebook</a>";
text_view.setText( Html.fromHtml( str_links ) );
text_view.setMovementMethod(new TextViewClickMovement(this, context)); 
```

### 链接

希望这有帮助！[你可以在这里](https://bitbucket.org/snippets/victorapoyan/L6M5k)找到代码。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2015-12-10T09:01:32.063

一种更清洁、更好的解决方案，使用本机的[Linkify 库](http://developer.android.com/reference/android/text/util/Linkify.html)。

例子：

```
Linkify.addLinks(mTextView, Linkify.ALL); 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2019-10-22T13:55:47.950

如果您使用的是 Kotlin，我为这种情况编写了一个简单的**扩展：**

```
/**
 * Enables click support for a TextView from a [fullText] String, which one containing one or multiple URLs.
 * The [callback] will be called when a click is triggered.
 */
fun TextView.setTextWithLinkSupport(
    fullText: String,
    callback: (String) -> Unit
) {
    val spannable = SpannableString(fullText)
    val matcher = Patterns.WEB_URL.matcher(spannable)
    while (matcher.find()) {
        val url = spannable.toString().substring(matcher.start(), matcher.end())
        val urlSpan = object : URLSpan(fullText) {
            override fun onClick(widget: View) {
                callback(url)
            }
        }
        spannable.setSpan(urlSpan, matcher.start(), matcher.end(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE)
    }
    text = spannable
    movementMethod = LinkMovementMethod.getInstance() // Make link clickable
} 
```

**用法：**

```
yourTextView.setTextWithLinkSupport("click on me: https://www.google.fr") {
   Log.e("URL is $it")
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-06-09T17:38:33.587

另一种更简单的方法（对于像我这样的懒惰开发人员；）

```
abstract class LinkAwareActivity : AppCompatActivity() {

    override fun startActivity(intent: Intent?) {
        if(Intent.ACTION_VIEW.equals(intent?.action) && onViewLink(intent?.data.toString(), intent)){
            return
        }

        super.startActivity(intent)
    }

    // return true to consume the link (meaning to NOT call super.startActivity(intent))
    abstract fun onViewLink(url: String?, intent: Intent?): Boolean 
} 
```

如果需要，您还可以检查意图的方案/模仿类型

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-08-02T11:24:08.540

我只使用 textView，并为 url 设置跨度并处理点击。

我在这里找到了非常优雅的解决方案，没有链接 - 据我知道我想链接字符串的哪一部分

[在我的 android 应用程序中处理 textview 链接点击](https://stackoverflow.com/questions/1697084/handle-textview-link-click-in-my-android-app)

在科特林：

```
fun linkify(view: TextView, url: String, context: Context) {

    val text = view.text
    val string = text.toString()
    val span = ClickSpan(object : ClickSpan.OnClickListener {
        override fun onClick() {
            // handle your click
        }
    })

    val start = string.indexOf(url)
    val end = start + url.length
    if (start == -1) return

    if (text is Spannable) {
        text.setSpan(span, start, end, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE)
        text.setSpan(ForegroundColorSpan(ContextCompat.getColor(context, R.color.orange)),
                start, end, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE)
    } else {
        val s = SpannableString.valueOf(text)
        s.setSpan(span, start, end, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE)
        s.setSpan(ForegroundColorSpan(ContextCompat.getColor(context, R.color.orange)),
                start, end, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE)
        view.text = s
    }

    val m = view.movementMethod
    if (m == null || m !is LinkMovementMethod) {
        view.movementMethod = LinkMovementMethod.getInstance()
    }
}

class ClickSpan(private val mListener: OnClickListener) : ClickableSpan() {

    override fun onClick(widget: View) {
        mListener.onClick()
    }

    interface OnClickListener {
        fun onClick()
    }
} 
```

和用法：linkify(yourTextView, urlString, context)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-01-06T15:48:50.693

您可以使用名为**[Better-Link-Movement-Method](https://github.com/saket/Better-Link-Movement-Method)**的简单库更巧妙地完成此操作。

```
 TextView mTvUrl=findViewById(R.id.my_tv_url);
    mTvUrl.setMovementMethod(BetterLinkMovementMethod.newInstance().setOnLinkClickListener((textView, url) -> {

                    if (Patterns.WEB_URL.matcher(url).matches()) {
                        //An web url is detected 
                        return true;
                    }
                    else if(Patterns.PHONE.matcher(url).matches()){
                        //A phone number is detected 
                        return true;
                    }
                    else if(Patterns.EMAIL_ADDRESS.matcher(url).matches()){
                        //An email address is detected 
                        return true;
                    }

                return false;
            })); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-05-20T07:32:52.037

这个页面解决了我的问题，但我必须自己想办法。我正在使用 android 字符串资源来设置 TextView 的文本，显然，它们返回了一个在文本之间有链接的**CharSequence 。**

这些是资源：

```
<string name="license_agreement">By registering, you agree with our <b><ahref="www.privacy-options.com">Privacy Policy</a></b> and <b><a href="www.terms-and-conditions.com">Terms and Conditions</a></b></string>

<string name="sign_now">Already have an account? <b><a href="@login_page">Login</a></b></string> 
```

我对建议的代码之一进行了更改。编码：

```
 @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // ...

        // Make Licence agreement statements and login text clickable links
        setLinkOnText(binding.txtLcAgree);
        setLinkOnText(binding.signNow);

    }

    private void detectLinkClick(SpannableStringBuilder strBuilder, final URLSpan span) {
    int start = strBuilder.getSpanStart(span);
    int end = strBuilder.getSpanEnd(span);
    int flags = strBuilder.getSpanFlags(span);
    ClickableSpan clickable = new ClickableSpan() {
        public void onClick(View view) {
            // Do something with links retrieved from span.getURL(), to handle link click...
            String clickedUrl = span.getURL();
            switch (clickedUrl) {
                case "@login_page":
                    startActivity(new Intent(RegistrationActivity.this, LoginActivity.class));
                    break;
                case "http://www.privacy-options.com":
                    Uri link1 = Uri.parse("http://www.privacy-options.com");
                    startActivity(new Intent(Intent.ACTION_VIEW, link1));
                    break;
                case "http://www.terms-and-conditions.com":
                    Uri link2 = Uri.parse("http://www.terms-and-conditions.com");
                    startActivity(new Intent(Intent.ACTION_VIEW, link2));
                    break;
                default:
                    Log.w(getClass().getSimpleName(), "No action for this");

            }
        }
    };

    strBuilder.setSpan(clickable, start, end, flags);
    strBuilder.removeSpan(span);
}

    protected void setLinkOnText(TextView text) {
        CharSequence sequence = text.getText();
        SpannableStringBuilder strBuilder = new SpannableStringBuilder(sequence);
        URLSpan[] urls = strBuilder.getSpans(0, sequence.length(), URLSpan.class);
        for (URLSpan span : urls) {
            detectLinkClick(strBuilder, span);
        }
        text.setText(strBuilder);
        text.setMovementMethod(LinkMovementMethod.getInstance());
    } 
```

从中检索的`span.getUrl()`链接是我在字符串资源中设置的初始链接。由于 TextView 中的文本已经是链接格式，我只是简单地在**SpannableStringBuilder**中使用了该文本。**

# mysql - 如何选择列在括号中有两个字符的行？

> ID：12418281
> 
> 赞同：0
> 
> 时间：2012-09-14T04:46:36.457
> 
> 标签：mysql, regex, select

```
SELECT * FROM t WHERE c REGEXP '.*\(..\).*'; 
```

这没有用。它返回了许多行，其`c`包含的字符串在`()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:55:53.920

```
SELECT * FROM t WHERE c LIKE '%(__)%' 
```

SQL小提琴[在这里](http://sqlfiddle.com/#!2/6a404/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T04:52:24.237

你的逃生通道已经关闭。

[http://dev.mysql.com/doc/refman/5.0/en/regexp.html#operator_regexp](http://dev.mysql.com/doc/refman/5.0/en/regexp.html#operator_regexp)

> 因为 MySQL 在字符串中使用 C 转义语法（例如，“\n”来表示换行符），所以您必须将您在 REGEXP 字符串中使用的任何“\”加倍。

采用：

```
SELECT * FROM t WHERE c REGEXP '.*\\(..\\).*'; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-14T04:52:27.963

你是如何运行这个查询的？如果您在（比如说）PHP 脚本中使用它，并像这样编写它：

```
$sql = "SELECT ... REGEXP '.*\(..\).*';"; 
```

那么 PHP 解释器实际上会去掉那些反斜杠，产生真正的查询

```
... REGEXP '.*(..).*'; 
```

这将只是具有至少两个字符的任何记录。为了使其正常工作，您必须双重转义：

```
$sql = "SELECT ... REGEXP '.*\\(..\\).*';"; 
```

PHP 将从每组中删除一个反斜杠，让第二个实际到达 mysql。

# solr - Apache Solr 中构面字段的层次结构（不是层次构面）？

> ID：12418291
> 
> 赞同：2
> 
> 时间：2012-09-14T04:48:11.640
> 
> 标签：solr, lucene, faceted-search, facet

我正在尝试跨多种文档类型设置搜索，每种文档类型都有不同的字段集。因此，搜索应始终仅从所有文档类型通用的最通用方面字段（例如产品类别）开始。

```
PRODUCT CATEGORY  
- Camera (42)  
- TV & Video (96)  
- MP3 Player (11)  
- Video Game (63) 
```

选择“相机”后，我需要启用一整套新的方面字段，专用于该文档类型（例如品牌、容量），如下所示：

```
PRODUCT CATEGORY  
> Camera

BRAND  
- Canon (42)  
- Nikon (96)  
- Sony (11)  
- Samsung (63)

CAPACITY  
- 1Gb (42)  
- 2Gb (96)  
- 3Gb (11)  
- 4Gb (63) 
```

我知道这可以通过以`facet.field`编程方式管理查询参数来完成，但是有没有更好的方法来系统地构建它？是否有任何功能或提示允许 Solr 及其字段结构中的这个方面字段依赖？

非常感谢！

**编辑：**我将标题从“方面字段的依赖项”更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:46:26.287

IMO 您不需要创建任何依赖项。
您可以为此条目创建单独的字段。

当您进行初始查询时，您将考虑产品类型。
然后，当您过滤特定产品类型时，您只会根据过滤器从结果中获取方面。

例如，产品类型相机将具有品牌佳能、尼康等...具有一些容量选项产品类型电视和视频将具有品牌宋、三星等...具有一些其他属性

因此，当您在相机 ( `fq=product_type:Camera`) 上进行过滤时，您将仅在此过滤器中使用容量选项限制产品类型相机和品牌的结果。
过滤应该处理依赖关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T07:48:34.577

我认为您可以通过确保索引每个文档中的适当信息来做到这一点，请查看[this wiki page on hierarchy facetting](http://wiki.apache.org/solr/HierarchicalFaceting)

# sql - 即时在 SQL 中创建临时表

> ID：12418296
> 
> 赞同：8
> 
> 时间：2012-09-14T04:48:42.040
> 
> 标签：sql, sql-server

如何在不先创建列的情况下创建临时表？

```
CREATE TABLE #Yaks (
YakID int,
YakName char(30) )

select name
from tempdb..sysobjects 
where name like '#yak%'

drop table #yaks 
```

必须先定义表是一件痛苦的事。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-14T04:53:39.250

创建与另一个具有相同列的（临时）表（不复制数据）：

```
select * into #TempTable
from MyTable
where 1=0 
```

注意：不创建任何外键、索引等...

# asp.net-mvc-4 - Windows Azure 培训工具包 MVC4、.NET v4.5 无法部署到具有 .NET v4 的 Azure 网站

> ID：12418298
> 
> 赞同：1
> 
> 时间：2012-09-14T04:48:47.523
> 
> 标签：asp.net-mvc-4, azure

我最近下载/安装了 WATK。我还注册了免费的 azure 试用版。完成了实验室“使用 Windows Azure 网站和 Visual Studio 2012 构建和发布 ASP.NET 应用程序”。当我发现该工具包使用 .NET 4.5 并且 Azure 站点只接受 .NET Framework 4.0 时，我完成了 80%。如果我将实验室属性配置更改为 4.0，它将无法编译。罪魁祸首代码是：

```
[Compare("NewPassword", ErrorMessage = "The new password and confirmation password do not match.")]

[Compare("Password", ErrorMessage = "The password and confirmation password do not match.")] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:29:25.743

The issue you're having here is because the CompareAttribute attribute is both available in the 4.5 version of the DataAnnotations assembly and in the System.Web.Mvc assembly. Since you started the project in 4.5 you probably based your code on [System.ComponentModel.DataAnnotations.CompareAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.compareattribute.aspx) (.NET 4.5).

By switching to the [System.Web.Mvc.CompareAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.compareattribute%28v=vs.98%29.aspx) you can fix the error:

```
[System.Web.Mvc.CompareAttribute("NewPassword", ErrorMessage = "The new password and confirmation password do not match.")]

[System.Web.Mvc.CompareAttribute("Password", ErrorMessage = "The password and confirmation password do not match.")] 
```

(Adding a using statement for System.Web.Mvc will also fix the issue)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T07:00:37.277

该实验室从 File>New Project 开始，因此在您执行 File>New 之前，它并没有真正绑定到框架。检查对话框上的默认框架，我怀疑它是 4.5

![在此处输入图像描述](../Images/c5f2d76f83a9ac54b984d419f30a0d3f.png)

至于事后将其更改回 4.0，我没有尝试过，但可能生成的其他代码不兼容。您提到的两行绝对是生成代码的一部分，在我的情况下不会引起问题。

相关的编译错误是什么？

# php - 检查句子是否有相同的单词

> ID：12418300
> 
> 赞同：4
> 
> 时间：2012-09-14T04:49:00.417
> 
> 标签：php, mysql, sql

`tb_content`（左）和`tb_word`（右）：

```
=====================================    ================================
|id|sentence |sentence_id|content_id|    |id|word|sentence_id|content_id|
=====================================    ================================
| 1|sentence1|    0      |    1     |    | 1|  a |     0     |    1     |
| 2|sentence2|    1      |    1     |    | 2|  b |     0     |    1     |
| 3|sentence5|    0      |    2     |    | 3|  c |     1     |    1     |
| 4|sentence6|    1      |    2     |    | 4|  a |     1     |    1     |
| 5|sentence7|    2      |    2     |    | 5|  e |     1     |    1     |
=====================================    | 6|  f |     0     |    2     |
                                         | 7|  g |     1     |    2     |
                                         | 8|  h |     1     |    2     |
                                         | 9|  i |     1     |    2     |
                                         |10|  f |     2     |    2     |
                                         |11|  h |     2     |    2     |
                                         |12|  f |     2     |    2     |
                                         ================================ 
```

我需要检查每个句子是否包含每个句子中其他句子所拥有的单词`content_id`。

例如 ：

检查`content_id`=`1`他们是`sentence1`和`sentence2`。从`tb_word`，我们可以看出`sentence1`和`sentence2`由同一个词组成`a`。如果`a`两个句子中的个数是`>=2`，那么`a`就是结果。因此，如果我打印结果，它必须是： `00Array ( [0] => a [1] => b) 01Array ( [3] => a ) 10Array ( [3] => a )11Array ( [0] => c [1] => a [2] => e)`where`00`表示`sentence_id`=`0`和`sentence_id`=`0`

首先，我计算每个拥有 `functionTotal`多少：`sentence``content_id`

```
$total = array();
$sql = mysql_query('select content_id, count(*) as RowAmount 
       from tb_content Group By contente_id') or die(mysql_error());
while ($row = mysql_fetch_array($sql)) {
    $total[] = $row['RowAmount']; 
}
return $total; 
```

从那个函数我得到 和 的值`$total`，我需要检查一些单词（from `tb_word`）在 2 的所有可能性之间的相似性`sentence`

```
foreach ($total as $content_id => $totals){
for ($x=0; $x <= ($totals-1); $x++) {
    for ($y=0; $y <= ($totals-1); $y++) {
      $shared = getShared($x, $y);
    }
} 
```

的功能`getShared`是：

```
function getShared ($x, $y){
    $token = array();
    $shared = array();
    $i = 0;
    if ($x == $y) {
        $query = mysql_query("SELECT word FROM `tb_word`
                             WHERE sentence_id ='$x' ");
        while ($row = mysql_fetch_array($query)) {
            $shared[$i] = $row['word'];
            $i++;
        }

    } else {
        $query = mysql_query("SELECT word, count(word) as jml 
                             FROM `tb_word` WHERE sentence_id ='$x' 
                             OR sentence_id ='$y' 
                             GROUP BY word ");
        while ($row = mysql_fetch_array($query)) {
            $jml = $row['jml'];
            $token[$i] = $row['word'];
            if ($jml >= 2) {
                $shared[$i] = $token[$i];
            }
            $i++;
        } 
```

但是我得到的结果仍然是错误的。结果还是混在了不同的地方`content_id`。结果也必须分组`content_id`。对不起我糟糕的英语和糟糕的解释。cmiiw，请帮助我..谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:34:55.823

这一项实际上可以由 DBMS 自己完成，一次查询两步。首先，为了在相同的内容中准备句子组合，您进行了自连接：

```
SELECT a.content_id,
       a.sentence_id AS sentence_id_1,
       b.sentence_id AS sentence_id_2
FROM   tb_content AS a
       JOIN tb_content AS b
         ON ( a.content_id = b.content_id
              AND a.sentence_id <= b.sentence_id ) 
```

“<=”将保持相同的句子连接，如“1-1”或“2-2”，但避免双向重复，如“1-2”和“2-1”。接下来，您可以将上述结果与单词结合并计算出现次数。像那样：

```
SELECT s.content_id,
       s.sentence_id_1,
       s.sentence_id_2,
       c.word,
       Count(*) AS jml
FROM   (SELECT a.content_id,
               a.sentence_id AS sentence_id_1,
               b.sentence_id AS sentence_id_2
        FROM   tb_content AS a
               JOIN tb_content AS b
                 ON ( a.content_id = b.content_id
                      AND a.sentence_id <= b.sentence_id )) AS s
       JOIN tb_word AS c
         ON ( s.content_id = c.content_id
              AND ( c.sentence_id = s.sentence_id_1
                     OR c.sentence_id = s.sentence_id_2 ) )
GROUP  BY s.content_id,
          s.sentence_id_1,
          s.sentence_id_2,
          c.word
HAVING Count(*) >= 2; 
```

上述查询的结果将为您提供容器、句子 1 和 2、单词以及出现次数（2 次或更多）。您现在需要的只是将结果收集到数组中，正如我看到的那样，您已经知道该怎么做。

如果我误解了你的目标，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T05:02:33.573

简单的怎么样`SELECT content_id, word, COUNT(*) as num_appearing FROM tb_word GROUP BY content_id, word`？

**编辑**：我现在看到了复杂性：您的主要问题是该`getShared()`函数有两个句子 ID 传递给它，但不`content_id`知道正在分析哪些内容。您还假设`content_id`and`sentence_id`数字是连续的并且从零开始。我的代码不假设，而是直接从数据库中提取这些 ID。

```
<?php
$rs = mysql_query("SELECT * FROM tb_content");
$content = array();
while ($row = mysql_fetch_assoc($rs)) {
    if (!isset($content[$row['content_id']])) $content[$row['content_id']] = array();
    $content[$row['content_id']][] = $row['sentence_id'];
}
foreach($content as $content_id => $sentences) {
  foreach($sentences as $sentence_id) {
    foreach($sentences as $compare) {
      $shared = getShared($content_id, $sentence_id, $compare);
    }
  }
}
function getShared($cid, $s1, $s2) {
  $rs = mysql_query("SELECT `word`, COUNT(*) AS 'num' FROM `tb_word` WHERE `content_id`={$cid} AND `sentence_id` IN ({$s1}, {$s2}) GROUP BY `word`");
  $out = array();
  while ($row = mysql_fetch_assoc($rs)) {
    if ($rs['num'] >= 2) $out[$rs['word']] = $rs['num'];
  }
  return $out;
} 
```

# c# - JQuery 将值设置为自定义服务器控件

> ID：12418305
> 
> 赞同：0
> 
> 时间：2012-09-14T04:49:17.680
> 
> 标签：c#, javascript, jquery, asp.net, jquery-ui

我们有一个定制的服务器控件，其中定义了几个属性。

```
<cc1:DropdownCheck ID="ddcStatus"  runat="server" CssClass="ddlchklst" JQueryURL="~/Scripts/jquery.js"
                    Title="Select Status(es)" OpenOnStart="false" divHeight="17px" 
                ImageURL="Images/DropDown.PNG" >
            </cc1:DropdownCheck> 
```

如何在服务器控件的单击事件上设置 Title 属性的值。我当前的 jquery fn 看起来像这样......

```
$("#ddcStatus").click(function () {
            //$('#ddcStatus').attr("Title",'Items Selected');
            //document.getElementById("ddcStatus").Title = 'Items Selected';
        }); 
```

两种说法都不起作用。getElementById 语句给出了一个脚本错误，指出对象为空。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T05:08:05.447

问题在于您的选择器“#ddcStatus”用于选择 id 为 ddcStatus 的元素，但在 clint 端不一样。你会看到类似“abc_xzy_ddcStatus”的东西

在客户端加载页面时，ID 会发生变化。所以你有两个选择来解决它

1.  在浏览器中通过选择查看源或检查元素转到源代码并在源中找到新 ID 并在 jQuery 中使用该 ID（我不推荐这种方式）

2.  使用称为动态选择器的服务器 ID 并自行转换为客户端 ID

$('DropdownCheck[ID$="ddcStatus"]')

您可以将其读作“在 id 以 ddStatus 结尾的 DropdownCheck 中选择”

**您的解决方案将与在客户端使用的实际控件替换 DropdownCheck 不同，** 一些帮助以 jquery 样式开头和结尾

[http://api.jquery.com/attribute-ends-with-selector/](http://api.jquery.com/attribute-ends-with-selector/) http://api.jquery.com/attribute-starts-with-selector/#attributevalue

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T04:56:50.643

尝试做这样的事情：

```
$(function(){
    $("#ddcStatus").click(function () {
        //$('#ddcStatus').attr("Title",'Items Selected');
        //document.getElementById("ddcStatus").Title = 'Items Selected';
    });
}) 
```

# magento - 将测量单位添加到 magento 前端

> ID：12418306
> 
> 赞同：2
> 
> 时间：2012-09-14T04:49:18.857
> 
> 标签：magento, units-of-measurement

我想在我的 magento 前端附加信息中添加一个度量单位。目前是：

*   长度：34
*   身高：50
*   重量：13

客户不知道是厘米还是米等。

如何将其更改为： - 长度：34 厘米 - 高度：50 厘米 - 重量：13 克

或者

*   长度（厘米）：34
*   身高（厘米）：50
*   重量（克）：13

第一个选项更可取。

这是一个示例的 URL： [http ://creativeinfusion.com.au/shop/beaded-square-offering-box-xsmall-black-red-green-flowers-2248](http://creativeinfusion.com.au/shop/beaded-square-offering-box-xsmall-black-red-green-flowers-2248)

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T05:17:31.483

如您所知，属性 Unit 是固定的。您可以从管理员的管理属性部分更改属性标签，例如：

```
Length ==  Length (cm)
Height ==  Height (cm)
Weight ==  Weight (grams) 
```

如果您想要这种格式 - 长度：34 厘米 - 高度：50 厘米 - 重量：13 克

为此，在当前主题中，您必须编辑 template/catalog/product/view/attributes.phtml 文件。
在属性文件中，请替换以下代码：

```
<?php foreach ($_additional as $_data):

        switch($_data['code']) {
            case 'height':
            case 'length':
                $value = $_helper->productAttribute($_product, $_data['value'], $_data['code']).'cm';
            break;      
            case 'weight':          
                $value = $_helper->productAttribute($_product, $_data['value'], $_data['code']).'g';
            break;
            default:            
                $value = $_helper->productAttribute($_product, $_data['value'], $_data['code']);
            break;              
        }
    ?>
        <tr>
            <th class="label"><?php echo $this->htmlEscape($this->__($_data['label'])) ?></th>
            <td class="data"><?php echo $value; ?></td>
        </tr>
    <?php endforeach; ?> 
```

请检查您是否使用了相同的属性代码，或更改一致。

希望这有帮助！

# ajax - ajax 调用和页面重定向

> ID：12418307
> 
> 赞同：0
> 
> 时间：2012-09-14T04:49:30.253
> 
> 标签：ajax, web-applications

我正在页面中进行 ajax 调用。在得到 ajax 响应之前，如果用户导航到其他页面，ajax 调用会完成吗？

1.  页面加载
2.  用户执行一些操作，在后台进行 ajax 调用并在服务器中进行更新。
3.  在 ajax 调用得到响应之前，用户导航到其他页面。
4.  那个ajax调用会完成吗？

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:51:16.613

不会。无论 ajax 调用在服务器上发起的什么操作都*可能*完成（即 php 脚本），但浏览器不会收到响应。

# magento - Magento：具有完整类别路径的产品 URL

> ID：12418311
> 
> 赞同：1
> 
> 时间：2012-09-14T04:50:17.050
> 
> 标签：magento

我有以下 magento 类别...

```
Category A / Sub Category B 
```

产品 URL 仅显示子类别 B。但我需要完整的类别路径以及根类别，例如：

```
www.mydomain.com/category-a/category-b/product.html 
```

有人可以帮助解决这个问题。提前致谢。

# android - 使用其背景视图旋转 textview

> ID：12418320
> 
> 赞同：3
> 
> 时间：2012-09-14T04:51:19.750
> 
> 标签：android, rotation, textview, imageview

我已经自定义了 textview 但它只是旋转它的文本而不是它的整个视图。而且我不想使用动画，因为我也在拖动 textveiw，所以移动动画 textview 会显示奇怪的结果，所以坚持 onDraw/draw，加上覆盖 draw 没什么特别的。

```
@Override
protected void onDraw(Canvas canvas) {
    // TO-DO Auto-generated method stub
    canvas.save();
    canvas.rotate(rotationAngle, rotationW, rotationH);
    super.onDraw(canvas);
    canvas.restore();
} 
```

同样的问题[旋转TextView而不切断文本](https://stackoverflow.com/questions/7552880/rotate-textview-without-cut-off-text?rq=1)？

如何沿文本旋转整个视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-15T10:03:23.633

如果要**旋转****视图**，请使用[**View**。**设置旋转**（）](https://developer.android.com/reference/android/view/View.html#setRotation(float))。

# php - 动画 gif 调整大小和上传

> ID：12418323
> 
> 赞同：0
> 
> 时间：2012-09-14T04:51:38.547
> 
> 标签：php, jquery, mysql, image-processing

我的图片上传表单有问题。当我上传动画 gif 时，它似乎不再动画了。有没有办法解决这个问题？或者，如果我可以跳过调整 .gif 扩展名的大小而只调整其他文件类型（如 .jpg、png 等）的大小，那也可以。

上传.php代码

```
<?php

// replace with your mysql database details
$MySql_username     = "root"; //mysql username
$MySql_password     = ""; //mysql password
$MySql_hostname     = "localhost"; //hostname
$MySql_databasename = 'upload'; //databasename

$UploadDirectory    = 'uploads/'; //Upload Directory, ends with slash & make sure folder exist
$UploadThumbDirectory ='uploads/thumb/';//Upload thumb Directory, ends with slash & make sure folder exist

//Some Settings
$ThumbMaxWidth          = 150; //Thumbnail width
$ThumbMaxHeight         = 150; //Thumbnail Height
$BigImageMaxWidth       = 700; //Resize Image width to
$BigImageMaxHeight      = 700; //Resize Image height to
$ThumbPrefix            = "thumb_"; //Normal thumb Prefix

if (!@file_exists($UploadDirectory)) {
    //destination folder does not exist
    die("Make sure Upload directory exist!");
}

if (!@file_exists($UploadThumbDirectory)) {
    //destination folder does not exist
    die("Make sure Upload Thumb directory exist!");
}

if($_POST)
{   
    if(!isset($_POST['mName']) || strlen($_POST['mName'])<1)
    {
        //required variables are empty
        die("Title is empty!");
    }

    if(!isset($_FILES['mFile']))
    {
        //required variables are empty
        die("File is empty!");
    }

    if($_FILES['mFile']['error'])
    {
        //File upload error encountered
        die(upload_errors($_FILES['mFile']['error']));
    }

    $ImageName          = strtolower($_FILES['mFile']['name']); //uploaded file name
    $Imageitle          = $_POST['mName']; // file title
    $ImageExt           = substr($ImageName, strrpos($ImageName, '.')); //file extension
    $ImageType          = $_FILES['mFile']['type']; //file type
    $ImageSize          = $_FILES['mFile']["size"]; //file size
    $TempSrc            = $_FILES['mFile']['tmp_name'];
    $uploaded_date      = date("Y-m-d H:i:s");
    $process        = true;

    //Validate file + create image from uploaded file.
    switch(strtolower($ImageType))
    {
        case 'image/png':
            $CreatedImage = imagecreatefrompng($_FILES['mFile']['tmp_name']);
            break;
        case 'image/gif':
            $CreatedImage = @imagecreatefromstring(file_get_contents(($_FILES['mFile']['tmp_name'])));
            break;
        case 'image/jpeg':
            $CreatedImage = imagecreatefromjpeg($_FILES['mFile']['tmp_name']);
            break;
        case 'image/bmp':
            $CreatedImage = imagecreatefromjpeg($_FILES['mFile']['tmp_name']);
            break;
        default:
            die('Unsupported File!'); //output error
    }
    //get Image Size
    list($CurWidth,$CurHeight)=getimagesize($TempSrc);

    //File Title will be used as new File name
    $NewName = preg_replace(array('/\s/', '/\.[\.]+/', '/[^\w_\.\-]/'), array('_', '.', ''), strtolower($Imageitle));
    $DestRandImageName = $NewName.'_'.date("YmdHis").$ImageExt;
    $NewThumbFileName = $NewName.'_'.$ThumbPrefix.date("YmdHis").$ImageExt;

    //Resize image to our Specified Size by calling our resizeImage function.
    if(resizeImage($CurWidth,$CurHeight,$BigImageMaxWidth,$BigImageMaxHeight,$UploadDirectory .$DestRandImageName,$CreatedImage))
    {
        //Create Thumbnail for the Image
        resizeImage($CurWidth,$CurHeight,$ThumbMaxWidth,$ThumbMaxHeight,$UploadThumbDirectory.$NewThumbFileName,$CreatedImage);
        // Insert info into database table.. do w.e!
        $dbconn = mysql_connect($MySql_hostname, $MySql_username, $MySql_password)or die("Unable to connect to MySQL");
        mysql_select_db($MySql_databasename,$dbconn);
        @mysql_query("INSERT INTO images (img_name, img_title, thumb_name, uploaded_date) VALUES ('$DestRandImageName', '$Imageitle','$NewThumbFileName','$uploaded_date')");
        mysql_close($dbconn);

        //respond with our images
        echo '<table width="100%" border="0" cellpadding="4" cellspacing="0">
        <tr><td align="center"><img src="'.$UploadThumbDirectory.$NewThumbFileName.'" alt="Thumbnail"></td></tr><tr>
        <td align="center"><img src="'.$UploadDirectory .$DestRandImageName.'" alt="Resized Image"></td></tr></table>';

    }else{
        die('Upload Error'); //output error
    }
}

//function outputs upload error messages, http://www.php.net/manual/en/features.file-upload.errors.php#90522
function upload_errors($err_code) {
    switch ($err_code) { 
        case UPLOAD_ERR_INI_SIZE: 
            return 'The uploaded file exceeds the upload_max_filesize directive in php.ini'; 
        case UPLOAD_ERR_FORM_SIZE: 
            return 'The uploaded file exceeds the MAX_FILE_SIZE directive that was specified in the HTML form'; 
        case UPLOAD_ERR_PARTIAL: 
            return 'The uploaded file was only partially uploaded'; 
        case UPLOAD_ERR_NO_FILE: 
            return 'No file was uploaded'; 
        case UPLOAD_ERR_NO_TMP_DIR: 
            return 'Missing a temporary folder'; 
        case UPLOAD_ERR_CANT_WRITE: 
            return 'Failed to write file to disk'; 
        case UPLOAD_ERR_EXTENSION: 
            return 'File upload stopped by extension'; 
        default: 
            return 'Unknown upload error'; 
    } 
} 

function resizeImage($CurWidth,$CurHeight,$MaxWidth,$MaxHeight,$DestFolder,$SrcImage)
{
    $ImageScale         = min($MaxWidth/$CurWidth, $MaxHeight/$CurHeight);
    $NewWidth           = ceil($ImageScale*$CurWidth);
    $NewHeight          = ceil($ImageScale*$CurHeight);
    $NewCanves          = imagecreatetruecolor($NewWidth, $NewHeight);
    // Resize Image
    if(imagecopyresampled($NewCanves, $SrcImage,0, 0, 0, 0, $NewWidth, $NewHeight, $CurWidth, $CurHeight))
    {
        // copy file
        if(imagejpeg($NewCanves,$DestFolder,100))
        {
            imagedestroy($NewCanves);
            return true;
        }
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:55:37.737

GD 图像库及其相关函数无法处理动画 gif。如果您可以安装[Imagemagick 库](http://www.php.net/manual/en/imagick.installation.php)，您可以使用这些功能操作动画 gif。

# android - Android 如果单击字段中的任何字母，将光标从一个EditText移动到另一个？

> ID：12418324
> 
> 赞同：8
> 
> 时间：2012-09-14T04:51:40.747
> 
> 标签：android, android-edittext

我想将光标从 EditText1 移动到另一个 EditText2 。我已经专注于editText1，但是如何将光标移动到editText2。？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-14T06:16:47.730

最后我得到了答案：

```
 editText1.addTextChangedListener(new TextWatcher() {

                public void onTextChanged(CharSequence s, int start, int before,
                        int count) {
                    Integer textlength1 = editText1.getText().length();

                    if (textlength1 >= 1) { 
                        editText2.requestFocus();
                    }
                }

                @Override
                public void afterTextChanged(Editable s) {
                    // TODO Auto-generated method stub
                }

                @Override
                public void beforeTextChanged(CharSequence s, int start, int count,
                        int after) {
                    // TODO Auto-generated method stub
                }
            });

            editText2.addTextChangedListener(new TextWatcher() {

                public void onTextChanged(CharSequence s, int start, int before,
                        int count) {
                    Integer textlength2 = editText1.getText().length();

                    if (textlength2 >= 1) {
                        editText3.requestFocus();

                    }
                }

                @Override
                public void afterTextChanged(Editable s) {
                    // TODO Auto-generated method stub
                }

                @Override
                public void beforeTextChanged(CharSequence s, int start, int count,
                        int after) {
                    // TODO Auto-generated method stub

                }
            }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-02T03:23:45.303

我能理解你的回答，

但是还有另一种好方法，只需使用以下属性

> android:imeOptions="actionNext"

这个例子 ：

```
<EditText
android:hint="@string/hint_user_name"
android:id="@+id/et_user_name"
android:maxLines="2"
style="@style/EditText_Login"
android:imeOptions="actionNext" 
/> 
```

谢谢，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T05:33:00.683

在您的edittext1单击代码中设置属性...

EditText2.requestFocus();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T05:53:57.303

```
 EditText editText1 = (EditText)findViewById(R.id.editText1 );
  EditText editText2 = (EditText)findViewById(R.id.editText2);

editText1.setOnKeyListener(new OnKeyListener() {

public boolean onKey(View v, int keyCode, KeyEvent event) {
      // If the event is a key-down event on the "enter" button
      if ((event.getAction() == KeyEvent.ACTION_DOWN) &&
           (keyCode == KeyEvent.KEYCODE_ENTER))
      {
            // Perform action on Enter key press
            editText1.clearFocus();
            editText2.requestFocus();
            return true;
      }
      return false;
}
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-04T11:59:38.413

```
android:inputType="textEmailAddress"//Add this line 
```

# c# - WPF：两个控件绑定到一个源，如何过滤绑定？

> ID：12418326
> 
> 赞同：3
> 
> 时间：2012-09-14T04:51:42.963
> 
> 标签：c#, wpf

我有一个 WPF windows 应用程序项目，它有一个带有两个 ListBox 控件的窗口，问题是如何将一个源绑定到这两个控件？来源是这样的：

```
class student
{
    public string name{get;set;}
    public int age{get;set;}
}

ObservableCollection<student> m_myGroup; 
```

我想： ListBox1 绑定到 m_myGroup 如果年龄 > 25 ListBox2 绑定到 m_myGroup 如果年龄 <= 25 显然，两个 ListBox 都有一个

```
TextBlock Text={binding Path=name} 
```

而且我不想使用 DataTrigger 将项目可见性属性隐藏或显示，我尝试使用 ICollectionView 过滤源，但它会影响其他 ListBox！有谁知道如何为每个 ListBox 制作两个过滤器，并且它们只绑定到一个源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T05:09:55.033

为 m_myGroup创建两个`ICollectionView`，过滤它们并将它们绑定到`ListBoxes`.

就此而言，将 设置`ListBox.IsSynchronizedWithCurrentItem`为 false 将不会`ListBoxes`在选择时产生影响。

看到[这个](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.issynchronizedwithcurrentitem.aspx)。

**编辑：**

```
public class StudentHandler
{
    ObservableCollection<student> m_myGroup;

    public CollectionViewSource YoungStudentsViewSource { get; private set; }
    public CollectionViewSource OldStudentsViewSource { get; private set; }

    public StudentHandler
    {
        YoungStudentsViewSource = new CollectionViewSource {Source = m_myGroup};
        OldStudentsViewSource = new CollectionViewSource {Source = m_myGroup}; 

        YoungStudentsViewSource.Filter = (stud) => {return (stud as student).age<=25;};
        OldStudentsViewSource .Filter = (stud) => {return (stud as student).age>25;};
    }
} 
```

在此绑定`ViewSources`到`ListBoxes`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:35:35.630

```
<Window x:Class="ComboboxStyle.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converter="clr-namespace:ComboboxStyle"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <converter:AgeConverter x:Key="ageConv"/>
</Window.Resources>

<Grid >
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <ListBox Grid.Column="0"  DisplayMemberPath="Name" ItemsSource="{Binding Students, Converter={StaticResource ageConv}, ConverterParameter=agelessthan25}" >
    </ListBox>
    <ListBox  Grid.Column="1" DisplayMemberPath="Name" ItemsSource="{Binding Students, Converter={StaticResource ageConv}, ConverterParameter=agegreaterthan25}" >
    </ListBox>
</Grid> 
```

```
 public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        Students = new ObservableCollection<Student>();
        Students.Add(new Student() { Name = "Aeqwwe", Age = 24 });
        Students.Add(new Student() { Name = "bqwewqeq", Age = 28 });
        Students.Add(new Student() { Name = "cwqeqw", Age = 23 });
        Students.Add(new Student() { Name = "dweqqw", Age = 29 });
        Students.Add(new Student() { Name = "eqweweq", Age = 20 });
        DataContext = this;
    }
    public ObservableCollection<Student> Students { get; set; }
}
public class Student
{
    public string Name { get; set; }
    public int Age { get; set; }
}
public class AgeConverter : IValueConverter
{

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var items = value as ObservableCollection<Student>;
        if (parameter != null && items != null)
        {
            if (parameter.ToString() == "agelessthan25")
            {
                return items.Where(i => i.Age < 25).ToList();
            }
            else if (parameter.ToString() == "agegreaterthan25")
            {
                return items.Where(i => i.Age >= 25).ToList();
            }
        }
        return null;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

我希望这个能帮上忙

# ruby-on-rails - 如何覆盖导轨中的链轮路径？

> ID：12418327
> 
> 赞同：0
> 
> 时间：2012-09-14T04:51:43.283
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, asset-pipeline, sprockets

我正在尝试覆盖 Sprockets 在 Rails 中生成的路径，特别是对于 sass 助手。

我已经使用各种解决方案到达了某个地方：

a) 覆盖视图中的 image_tag 助手

b) 覆盖 ActionView::AssetPaths 计算函数

c) 在 Sass::Script::Functions 中包含新模块

但感觉应该有比做这一切更简单的方法。有没有装饰链轮路径的好方法？我这样做是因为我们有一些自定义 url 和包装的东西正在发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T22:13:26.410

所以，最后我发现这条消息埋在 sprockets/context.rb

```
Custom asset_path helper is not implemented
Extend your environment context with a custom method.

environment.context_class.class_eval do
  def asset_path(path, options = {})
  end
end 
```

这似乎表明 Rails.application.assets.context_class.class_eval 将允许我更改asset_path 处理程序，但它似乎不起作用。我不确定这是否是我的错，因为我找不到任何这样的例子。

目前我得到这个工作的黑客是这样的：

```
 ActionView::AssetPaths.class_eval do
    def compute_public_path(source, dir, options = {})
      my_transform(source)
    end
  end

  Sprockets::Helpers::RailsHelper::AssetPaths.class_eval do
    def compute_public_path(source, dir, options = {})
      my_transform(source)
    end
  end

  ActionView::Helpers::AssetTagHelper::AssetPaths.class_eval do
    def compute_public_path(source, dir, options = {})
      my_transform(source)
    end
  end 
```

我怀疑我不需要所有这三个，但我不确定。任何了解他们的链轮的人都想对此发表评论吗？

# java - 将字符串数组转换为 Map

> ID：12418334
> 
> 赞同：5
> 
> 时间：2012-09-14T04:52:44.947
> 
> 标签：java, arrays, hashmap

我有两个字符串数组键和值

```
String[] keys = {a,b,c,d};

String[] values = {1,2,3,4}; 
```

将它们转换为地图的最快方法是什么？我知道我们可以遍历它们。但是，是否有任何实用程序存在？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T04:56:27.900

比这还快？

```
Map<String,String> map = new HashMap<>();

if(keys.length == values.length){
    for(int index = 0; index < keys.length; index++){
        map.put(keys[index], values[index]);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-25T13:16:57.267

我打算给你两个非常简单的实现。一个带有 Java 8 的流 Api，一个没有。

## Java < 8 *（无流 api）*

```
if(keys.length != values.length) { 
    throw new IllegalArgumentException("Keys and Values need to have the same length."); 
}
Map<String,String> map = new HashMap<>();
for (int i = 0; i < keys.length; i++) {
    map.put(keys[i], values[i]);
} 
```

## Java > 8 *（带有流 api）*

```
if(keys.length != values.length) { 
    throw new IllegalArgumentException("Keys and Values need to have the same length."); 
}
Map<String,String> map = IntStream.range(0, keys.length).boxed()
    .collect(Collectors.toMap(i -> keys[i], i -> values[i])); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-27T21:29:27.637

### 从一开始就进行恒定时间查找

如果您正在寻找一个在恒定时间内检索与键关联的值的 Map（这意味着不必查看大多数值），那么您不能做得更快，因为需要处理数组。

但是，您可以使用已经以这种方式编写的实用程序：[`com.google.common.collect.Maps.uniqueIndex`](http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Maps.html#uniqueIndex(java.lang.Iterable,%20com.google.common.base.Function))

### 瞬时转换，线性时间查找

如果您对每次都在数组中搜索键的 Map 感到满意，那么您可以通过定义一个实现 Map 接口的新类来立即使用您的两个数组创建 Map：

```
class TwoArrayMap implements Map<String, String> {

   private final String[] keys;
   private final String[] values;
   // If you want to enable to add more key value pairs to your map, and
   // want to make the process faster, you could use ArrayLists instead of arrays

   public TwoArrayMap(String[] array1, String[] array2){
       if(array1 == null || array2 == null || array2.length < array1.length)
          throw new IllegalArgumentException();
       keys = array1;
       values = array2;
       // Alternatively, you could want to clone the arrays, to 
       // make sure they are not modified, using array1.clone(), etc
   }

   public String get(String key){

       for(int i=0; i<keys.length; i++)
             if(key == null && key == null || key != null && key.equals(k) )
                return values[i];
       return null;                     
   }

   public String put(String key, String Value) throws OperationNotSupportedException {
        throw new OperationNotSupportedException();
        // alternatively, you could resize the arrays and add a new key, or use an ArrayList
   }

}

Map<String, String> myMap = new TwoArrayMap(keys, values); 
```

### 惰性转换，转换后恒定时间查找

另一种方法是“懒惰”地做它，这意味着修改上面的类，以便它在内部保持对 HashMap 的引用，并仅在查找元素时填充它：

```
class TwoArrayMap implements Map<String, String> {

   private final Map<String, String> hashmap;
   private int maxIndexAlreadyTransferred = -1;

   private final String[] keys;
   private final String[] values;

   public TwoArrayMap(String[] array1, String[] array2){
       if(array1 == null || array2 == null || array2.length < array1.length)
          throw new IllegalArgumentException();
       hashmap = new HashMap<>();
       keys = array1;
       values = array2;
       // Alternatively, you could want to clone the arrays, to 
       // make sure they are not modified, using array1.clone(), etc
   }

   public String get(String key){

       if(hashmap.containsKey(key))
            return hashmap.get(key);

       String k, value;
       while( maxIndexAlreadyTransferred + 1 < keys.length ){
             k = keys[ maxIndexAlreadyTransferred + 1 ];
             value = values[ maxIndexAlreadyTransferred +1 ];
             if(!hashmap.containsKey(k))
                 hashmap.put( k, value );
             maxIndexAlreadyTransferred++;
             if(key == null && k == null || key != null && key.equals(k) )
                return value;
       }
       return null;                     
   }

   public String put(String key, String Value) {
        hashmap.put(key, value);
   }

} 
```

这个解决方案意味着：

*   即时创建新对象
*   第一次查询它的线性时间查找，直到所有内容都被传输
*   之后的恒定时间查找，表现为哈希表

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T05:16:23.527

恕我直言，您不太可能找到这样的实用程序。

但是，即使您发现它提供任何性能提升的机会非常低。因为，我认为如果不遍历两个数组中的所有元素，您将无法做到这一点。

我可以建议的一件事是（仅当您的数组具有大量元素时）您可以在实例化地图时指定地图的容量，以减少在将条目放入其中时调整大小的开销。

```
Map<String, String> map = new HashMap<String, String>(keys.length);
//put keys and values into map ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-06T11:42:02.403

[在Java中将两个String数组转换为Map](http://rosettacode.org/wiki/Hash_from_two_arrays#Java)

```
import java.util.HashMap;
 public static void main(String[] args){
    String[] keys= {"a", "b", "c"};
    int[] vals= {1, 2, 3};
    HashMap<String, Integer> hash= new HashMap<String, Integer>();

    for(int i= 0; i < keys.length; i++){
      hash.put(keys[i], vals[i]);
    }
 } 
```

检查此[链接](http://rosettacode.org/wiki/Hash_from_two_arrays)以获取不同编程语言的更多解决方案

`Note`: 键应该是唯一的..

# mysql - 根据条件选择查询和计数

> ID：12418335
> 
> 赞同：2
> 
> 时间：2012-09-14T04:52:48.820
> 
> 标签：mysql, doctrine, doctrine-query

我想选择所有类别、子类别并计算属于子类别的业务数量。这是我正在使用的 SQl 查询。

```
SELECT
    c.id, 
    c.name,
    c.slug,
    sc.id,
    sc.name,
    sc.slug,
    COUNT(bsc.id) AS business_count
FROM 
    fi_category c
LEFT JOIN 
    fi_subcategory sc ON c.id = sc.category_id AND (sc.deleted_at IS NULL) 
LEFT JOIN 
    fi_business_subcategory bsc ON sc.id = bsc.subcategory_id AND (bsc.deleted_at IS NULL) 
WHERE 
    (c.deleted_at IS NULL) 
GROUP BY 
    c.id, sc.id 
```

但是我还有更多要做，business_count 应该根据他们所属的城市进行过滤，即最后我想选择所有类别，子类别，但 business_count 应该有一个子句`WHERE city.id = 1`，为此我想我必须使用 count 作为子查询我无法弄清楚。

下面是从`fi_business_subcategory`到的关系结构`fi_city`。

**1)`fi_business_subcategory`**

```
+----+----------------+-------------+
| id | subcategory_id | business_id |
+----+----------------+-------------+ 
```

**2)`fi_business`**

```
+----+---------+-----------+
| id | name    | suburb_id |
+----+---------+-----------+ 
```

**3)`fi_suburb`**

```
+-----+--------+---------+
| id  | name   | city_id |
+-----+--------+---------+ 
```

**4)`fi_city`**

```
+----+--------+
| id | name   |
+----+--------+ 
```

我试过这样的东西，但这似乎不起作用

```
SELECT
    c.id, 
    c.name,
    c.slug,
    sc.id,
    sc.name,
    sc.slug,
    bsc.business_count
FROM 
    fi_category c
LEFT JOIN 
    fi_subcategory sc ON c.id = sc.category_id AND (sc.deleted_at IS NULL) 
LEFT JOIN (
    SELECT 
        COUNT(business_id) t1.business_count, t1.subcategory_id 
    FROM
        fi_business_subcategory t1
    LEFT JOIN
        fi_business t2 ON t2.id = t1.business_id
    LEFT JOIN
        fi_suburb t3 ON t3.id = t2.suburb_id
    LEFT JOIN
        fi_city t4 ON t4.id = t3.city_id
    WHERE
        t4.id = 1
    GROUP BY
        t1.subcategory_id
) bsc ON sc.id = bsc.subcategory_id AND (bsc.deleted_at IS NULL)
WHERE 
    (c.deleted_at IS NULL) 
GROUP BY 
    c.id, sc.id 
```

我应该如何建立查询来实现我想要的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T06:37:12.293

如果您想使用子查询，正确的方法是用尽可能小的变化来表达您的第二个查询：

```
SELECT
    c.id, 
    c.name,
    c.slug,
    sc.id,
    sc.name,
    sc.slug,
    IFNULL(bsc.business_count, 0)
          -- turn NULL from left join into 0
FROM 
    fi_category c
LEFT JOIN 
    fi_subcategory sc ON c.id = sc.category_id AND (sc.deleted_at IS NULL) 
LEFT JOIN (
    SELECT 
        COUNT(*) business_count, t1.subcategory_id
          -- removed table name from alias name,
          -- and improved performance by simply counting rows
    FROM
        fi_business_subcategory t1
    LEFT JOIN
        fi_business t2 ON t2.id = t1.business_id
    LEFT JOIN
        fi_suburb t3 ON t3.id = t2.suburb_id
    LEFT JOIN
        fi_city t4 ON t4.id = t3.city_id
    WHERE
        t4.id = 1 AND (t1.deleted_at IS NULL)
          -- check deletion in subquery for performance
    GROUP BY
        t1.subcategory_id
) bsc ON sc.id = bsc.subcategory_id
          -- no longer need to check deletion here
WHERE 
    (c.deleted_at IS NULL) 
GROUP BY 
    c.id, sc.id 
```

[在这里](http://sqlfiddle.com/#!2/33275/9)拉小提琴。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T05:52:29.477

我认为没有理由必须使用子查询。我相信您可以简单地将`fi_business`和组合`fi_business_subcategory`到一个带括号的表格因子。

```
SELECT
    c.id, 
    c.name,
    c.slug,
    sc.id,
    sc.name,
    sc.slug,
    COUNT(bsc.id) AS business_count
FROM
    fi_category c
LEFT JOIN
    fi_subcategory sc ON c.id = sc.category_id AND (sc.deleted_at IS NULL)
LEFT JOIN (
        fi_business b
    INNER JOIN
        fi_business_subcategory bsc ON b.id = bsc.business_id AND (bsc.deleted_at IS NULL)
    INNER JOIN
        fi_suburb su ON su.id = b.suburb_id AND su.city_id = 1
    ) ON sc.id = bsc.subcategory_id
WHERE 
    (c.deleted_at IS NULL) 
GROUP BY 
    c.id, sc.id 
```

我已经[检查](http://sqlfiddle.com/#!2/33275/3)过这对于您的表结构来说是有效的 SQL。我想它很有可能会产生预期的结果，即使你的小提琴还不包含任何数据。有关可以在连接中使用括号的位置的详细信息，请参阅[JOIN 语法手册。](http://dev.mysql.com/doc/refman/5.6/en/join.html)

您可能还会问自己是否真的需要将所有连接都保留为左连接。使用内部连接编写东西会容易得多。

由于连接是从左到右执行的，您可以先执行内部连接，然后执行一系列*右*连​​接。这避免了括号：

```
SELECT
    c.id cat_id,
    c.name cat_name,
    c.slug cat_slug,
    sc.id sub_id,
    sc.name sub_name,
    sc.slug sub_slug,
    COUNT(bsc.id) AS business_count
FROM
    fi_business b
INNER JOIN
    fi_business_subcategory bsc ON b.id = bsc.business_id
    AND (b.deleted_at IS NULL) AND (bsc.deleted_at IS NULL)
INNER JOIN
    fi_suburb su ON su.id = b.suburb_id AND su.city_id = 1
RIGHT JOIN
    fi_subcategory sc ON sc.id = bsc.subcategory_id
RIGHT JOIN
    fi_category c ON c.id = sc.category_id AND (sc.deleted_at IS NULL)
WHERE
    (c.deleted_at IS NULL)
GROUP BY
    c.id, sc.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T06:48:28.863

尝试这个

```
select 
    c.id,
    c.name,
    count(sc.name) as Count
from fi_category as c
left join fi_subcategory as sc on sc.category_id = c.id
left join fi_business_subcategory as  fbs on fbs.subcategory_id = sc.id
inner join (
select 
    fb.name,
    fs.id,
    fs.city_id

from fi_business as fb 
inner join fi_suburb as fs on fs.id = fb.suburb_id
where fs.city_id = 1

) as  fb on fb.id = fbs.business_id
group by c.id 
```

# java - java并发实战16.1

> ID：12418337
> 
> 赞同：3
> 
> 时间：2012-09-14T04:52:58.913
> 
> 标签：java, multithreading, concurrency

在这段代码中：

```
public class PossibleReordering {
    static int x = 0, y = 0;
    static int a = 0, b = 0;

    public static void main(String[] args)
            throws InterruptedException {
        Thread one = new Thread(new Runnable() {
            public void run() {
                a = 1;
                x = b;
            }
        });
        Thread other = new Thread(new Runnable() {
            public void run() {
                b = 1;
                y = a;
            }
        });
        one.start(); other.start();
        one.join();   other.join();
        System.out.println("( "+ x + "," + y + ")");
    }
} 
```

他们说Java编译器将重新排序线程一和线程另一中的指令以优化其执行，并最终导致结果（0,0）。

他们还说：
线程中的每个动作都发生在该线程中的每个动作之前，这些动作在程序顺序的后面出现。

这两种说法是否相互冲突？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T04:57:25.410

发生前规则仅适用于相互依赖的语句。由于这些`run()`方法都包含独立的赋值，因此允许编译器重新排序它们，这可能会导致您描述的输出。
您可以在[此处](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5)`happens-before`阅读Javaspecs 中的定义：

> *应该注意的是，两个动作之间存在之前发生的关系并不一定意味着它们必须在实现中以该顺序发生。如果重新排序产生与合法执行一致的结果，则不是非法的。*

例如，如果第`run()`一种方法如下所示：

```
public void run() {
    b = 1;
    x = b;
} 
```

不允许重新排序。

# asp.net-ajax - 上传文件时访问路径被拒绝

> ID：12418344
> 
> 赞同：1
> 
> 时间：2012-09-14T04:54:01.233
> 
> 标签：asp.net-ajax

我将从客户端上传带有文件上传控制的图像并将其转换为流对象并将其发送到 wcf 服务，此过程与 asp.net 应用程序一起使用，但是当我在 IIS 5.1 中托管此应用程序时上传记录它显示错误为

> 拒绝访问路径“C:\Documents and Settings\patnayak\Desktop\Temp.xlsx”

在 Google 搜索之后，我授予我系统中对 Temp.xlsx 的 asp.net 用户权限的访问权限，然后它就可以工作了。其他系统如何上传文件。

我的代码：

```
 ClientBOL.CD.CPI2Library objLib = new ClientBOL.CD.CPI2Library();
            UDO.CPI2LibraryList libfiles = new UDO.CPI2LibraryList(true, "");

            HttpFileCollection hfc = Request.Files;
            libfiles.CPI2Libraries = new UDO.CPI2Library[hfc.Count];
            for (int i = 0; i < hfc.Count; i++)
            {
                HttpPostedFile hpf = hfc[i];
                if (hpf.ContentLength > 0)
                {
                                            libfiles.CPI2Libraries[i] = new UDO.CPI2Library();

                    libfiles.CPI2Libraries[i].FileName = System.IO.Path.GetFileName(hpf.FileName);
                    libfiles.CPI2Libraries[i].FiletypeId = GetFileTypeId(System.IO.Path.GetFileName(hpf.FileName));
                    libfiles.CPI2Libraries[i].DoctypeId = 1;
                                           FileInfo fileInfo = new FileInfo(hpf.FileName);
                    UDO.UDOFileOperations.RemoteFileInfo ri = new UDO.UDOFileOperations.RemoteFileInfo();
                    System.IO.FileStream stream = new System.IO.FileStream(hpf.FileName, System.IO.FileMode.Open, System.IO.FileAccess.Read);
                                            ri.FileName = System.IO.Path.GetFileName(hpf.FileName);
                    ri.Length = fileInfo.Length;
                    ri.FileByteStream = stream;
                    ClientBOL.CD.FileOperations cdc = new ClientBOL.CD.FileOperations();
                    cdc.UploadFile(ri);
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:58:38.843

仅授予文件权限是不够的。IIS 需要访问指向该文件的**所有**目录。

例如，地板上可能有一袋钻石，上面写着你的名字，但如果那个地板是在一个上锁的银行金库内，你就不能进去取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T10:07:44.067

我得到了同样的错误信息。检查文件夹的属性是否取消选中常规选项卡中的只读。在安全选项卡中为网络服务提供写控制。

或者

```
Add MachineName\IIS_IUSRS permission to the shared folder. 
```

希望这会奏效。

# centos - Centos 5.8 上的 Teamviewer - 下次重启时没有登录屏幕

> ID：12418345
> 
> 赞同：0
> 
> 时间：2012-09-14T04:54:03.457
> 
> 标签：centos

昨天我在我的 Centos 5.8 桌面上安装了 Teamviewer 7。重新启动后，我无法看到登录屏幕。只有蓝色屏幕可见。

我读了[https://superuser.com/questions/403548/os-x-stuck-at-blue-screen-after-installing-teamviewer-host-and-rebooting?rq=1](https://superuser.com/questions/403548/os-x-stuck-at-blue-screen-after-installing-teamviewer-host-and-rebooting?rq=1)

但是我如何在 Centos 上做到这一点？

我知道要登录到单用户模式，我们需要在操作系统启动时按一个键。然后在cmd中输入single。进而？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:20:40.403

进入单用户模式后，您可以尝试从系统中删除 TeamViewer。
例如，如果您通过运行`rpm -ivh teamviewer_linux.rpm`命令安装了 TeamViewer，则可以运行该`rpm -e teamviewer_linux`命令将其卸载。
我不认为您提到的 Mac OS 链接对您的情况非常有用。
如果您窥视`teamviewer_linux.rpm`（例如通过运行命令`rpm -qpl teamviewer_linux.rpm`），您将找不到任何“启动代理和守护程序”，因为在 CentOS 上，TeamViewer 被包裹在 Windows 模拟器（wine）周围。
默认情况下，TeamViewer 文件安装在`/opt/teamviewer`文件夹中；唯一的例外是启动脚本`/usr/bin/teamviewer7`。
最后，rpm 安装后脚本无非就是创建一个桌面图标并添加一个菜单项，所以我无法真正理解 TeamViewer 安装如何破坏您的系统。

# python - django 应用程序中媒体文件夹中的 css 文件出现 404 错误

> ID：12418349
> 
> 赞同：0
> 
> 时间：2012-09-14T04:54:43.680
> 
> 标签：python, css, django, http-status-code-404

在我的 django 应用程序中，我已经把这些设置

```
settings.py
------------
MEDIA_ROOT = '/home/me/dev/python/django/myproject/myapp/media/'
MEDIA_URL = '/site_media/'

urls.py
--------
...
url(r'^myapp/', include('myapp.urls')),
url(r'^site_media/(?P<path>.*)$','django.views.static.serve',{'document_root':settings.MEDIA_ROOT}), 
```

我在文件夹中创建了一个 css 文件`'/home/me/dev/python/django/myproject/myapp/media/css'`并将其包含在模板中，如下所示

```
base.html
--------
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>my app</title>
<LINK REL=StyleSheet HREF="{{MEDIA_URL}}css/myappstyle.css" TYPE="text/css" MEDIA="screen, print"/>

home.html
---------
{% extends "mywebapp/base.html" %}>
{% block title %}{{block.super}}| Home {% endblock %}

{% block content %}
   {{block.super}}
   hi
{% endblock %} 
```

然后我创建了一个如下视图

```
def custom_render(request,context,template):
    req_context=RequestContext(request,context)
    return render_to_response(template,req_context)

def home(request,template_name,page_title):
    print 'home'
    return render_to_response(template_name,{'me':'myname'}) 
```

并设置它的 url conf

```
myapp.urls
--------

urlpatterns=patterns('',
  url(r'^$','myapp.views.home',
      {
         'template_name':'mywebapp/home.html',
         'page_title':'Home'
       },
      name='home'), 
```

当我给出网址时

```
http://127.0.0.1:8000/myapp/ 
```

网页被渲染，但 css 不是。控制台输出显示 404 错误

```
[14/Sep/2012 10:02:50] "GET /myapp/ HTTP/1.1" 200 547
[14/Sep/2012 10:02:50] "GET /myapp/css/myappstyle.css HTTP/1.1" 404 2514 
```

但是，当我给出网址时，

```
http://127.0.0.1:8000/site_media/css/myappstyle.css 
```

我可以毫无问题地看到 css 文件的内容。

为什么会这样？有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:00:59.830

您还需要在`RequestContext()`为视图呈现响应时使用`home`（就像您为视图所做的那样`custom_render`）。

否则`{{MEDIA_URL}}`将为空，这将导致`404`错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T05:16:26.353

您也可以使用`direct_to_template`而不是`render_to_response`. 使用它，您不必使用`RequestContext()`：

```
from django.views.generic.simple import direct_to_template

def some_view(request):
    # ...
    return direct_to_template(request, template_name, params_dict) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T07:37:27.207

这是静态文件，你需要使用

```
<LINK REL=StyleSheet HREF="{{ STATIC_URL }}css/myappstyle.css" TYPE="text/css" MEDIA="screen, print"/> 
```

然后检查`DEBUG = True`

# linux - 亚马逊社区 AMI 的 + 安全性

> ID：12418351
> 
> 赞同：2
> 
> 时间：2012-09-14T04:54:56.413
> 
> 标签：linux, amazon-ec2

我正在寻找启动一个 linux EC2 实例。

尽管我非常了解 linux，但我安全/强化 linux 操作系统的能力无疑会让我容易受到附加。例如：还有其他人比我更了解 linux 安全性。

我希望只运行 Linux、Apache 和 PHP5。

是否有任何推荐的 Amazon AMI 可以预先硬化运行 linux/apache/php 或类似的东西？

任何建议将不胜感激。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T03:48:08.187

这是一篇关于这个的旧文章（我还没有读过，但它可能是一个很好的起点）： http: [//media.amazonwebservices.com/Whitepaper_Security_Best_Practices_2010.pdf](http://media.amazonwebservices.com/Whitepaper_Security_Best_Practices_2010.pdf)

我会推荐一些最佳实践

1）迁移到VPC，控制入站和出站访问。

2a) 在 SSH 中禁用密码验证，只允许来自已知 IP 的 SSH

2b) 如果您不能通过 IP 限制 SSH 访问（由于漫游等），请允许密码身份验证并使用 google 身份验证器提供多因素身份验证。

3) 在所有面向公众的网站前放置一个弹性负载均衡器，并禁止对这些服务器的访问，除了 ELB

4) 创建一个中央日志服务器，将您的日志保存在不同的位置以防受到攻击。

5) 每 3 个月更改一次所有系统密码

6) 使用 IDS，作为一个简单的起点，我建议使用tripwire。

7) 定期检查更新（您可以使用像 Nagios w/NRPE 这样的监控系统在所有服务器上执行此操作）如果您不是安全专家，您可能没有时间整天阅读 bugtraq，所以使用您的操作系统提供的服务（CentOS/RHEL 很好）

8) 定期（每季度）进行外部脆弱性评估。您可以自己学习和使用 nessus（用于非企业用途）或使用第三方，例如 qualys。

如果您担心或有疑问，请与安全专家签约进行审计。这不应该成本过高，并且可以为您提供一些深刻的见解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T05:05:17.820

你必须明白两件事：

*   严密的安全性使攻击者和您的生活变得艰难......
*   安全是一项持续的任务。
    让您的服务器在特定时间点保持安全不要说任何关于未来的事情。
    每天都有新的漏洞和补丁发布，大量的“开发”行为导致安全不稳定。

**解决方案？**
您可能会考虑像[https://pagodabox.com/](https://pagodabox.com/)
这样的服务，您可以 在其中获取特定的 PHP 资源，而无需管理 Linux/Security 等等......

* * *

编辑：
只是为了同情......
运行**生产**系统，**您负责**网站的持续安全性，迫使您做**的不仅仅是启动一个安全实例**！
否则，**随着时间的流逝，您的站点将变得不那么安全**（并且随着更多人的了解）
正如我所看到的（对于真正的生产站点），**您有两个选择**：

*   **找一位安全专家**（内部或自由职业者）定期检查您的网站并应用所需的补丁等。
*   **获取将为**您管理安全方面的托管服务。
    我指出了一项类似的服务，您可以将 PHP 代码放入其中，他们会为您处理其他所有事情。
    我会为每个无法获得真正定期安全检查/修复的生产站点检查此类服务

安全是一个非常复杂的领域...不要低估风险...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T05:26:47.437

实际上，如果发生了什么事，您总是可以从预先配置的 AMI 重新启动您的服务器。例如，使用[Auto Scaling](http://aws.amazon.com/autoscaling/)可以很容易地做到这一点。使用[没有密码的 SSH](http://www.csua.berkeley.edu/~ranga/notes/ssh_nopass.html)。相应地调整您的[安全组](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/using-network-security.html)。[这是关于保护您的 EC2 实例](http://aws.amazon.com/articles/1233)的好文章。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-16T01:06:16.050

我最喜欢使用 Amazon 的一件事是我可以快速轻松地限制我的攻击面。我在这里做了一个优先列表。接近尾声时，它变得有点先进。

*   在 VPC 中启动
*   将您的网络服务器放在负载均衡器 ELB 或 ALB 后面（也终止 SSL）
*   只允许来自负载均衡器的网络流量
*   创建限制性安全组。唯一允许进入您的主机的内容应该是来自负载均衡器的传入流量和来自您的 IP 的 ssh（如果您的 ISP 不提供静态地址，则为您的 dhcp 子网）
*   启用自动安全更新
    *   yum-cron (amazon linux)
    *   或无人值守升级（ubuntu）
*   强化 ssh
    *   禁止 root 登录和默认亚马逊帐户
    *   禁止密码登录以支持 ssh 密钥
*   使用 2fa 和长密码锁定您的 aws root 帐户。
*   为日常操作创建和使用 IAM 凭证
*   如果您有数据层，请部署加密的 RDS 并将其放在私有子网中
*   探索使用 IAM 凭证连接到 RDS（不再将 db 密码保存在 conf 文件中）
*   查看 yubikey 的 2fa ssh。

高级：对于更大或更重要的部署，您可能会考虑使用 ThreatStack 之类的东西。他们可以警告您 AWS 错误配置（包含向世界开放的客户数据的 s3 存储桶？），您主机上的包中的安全漏洞。他们还会对入侵信号发出警报，并保留对调查安全事件很有用的命令日志。

# google-chrome-extension - 跨生产和开发环境处理 URL

> ID：12418353
> 
> 赞同：2
> 
> 时间：2012-09-14T04:55:35.483
> 
> 标签：google-chrome-extension

我已经构建了一个小型扩展，我不得不在许多地方（如 manifest.json 等）对 URL 进行硬编码。但我希望开发环境和生产环境之间的 URL 域不同。想知道什么是正确的做法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-25T05:22:04.240

如果您知道您的生产扩展 url，那么您可以看到扩展 ID。假设扩展 url 是[https://chrome.google.com/webstore/detail/eme-call-and-event-logger/cniohcjecdcdhgmlofniddfoeokbpbpb](https://chrome.google.com/webstore/detail/eme-call-and-event-logger/cniohcjecdcdhgmlofniddfoeokbpbpb)所以`var chromeruntimeid='cniohcjecdcdhgmlofniddfoeokbpbpb';`

```
 if(chrome.runtime.id==chromeruntimeid){
    console.log('production');
  }else{
    console.log('development');
  } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-14T07:24:39.633

您可以尝试通过以下方式创建一个 JSON 文件并在其中包含不同的键、值对：

```
"development": {
    "oauth-code": "xyz"
}

"production": {
    "oauth-code": "xyz"
} 
```

然后将 settings.json 加载到您的主脚本中，并根据您以下列方式选择的环境动态访问设置：

```
var settings = [code to load JSON file, depending upon the language that you choose]
console.log(settings['production'].oauth-code);
console.log(settings['development'].oauth-code); 
```

它将帮助您更轻松地根据环境获取自定义设置，您也可以尝试在 JS 文件中使用具有相同属性的应用程序对象，其方式几乎相同，但建议将设置和主要逻辑从彼此。

# c - C中链表声明的区别

> ID：12418366
> 
> 赞同：0
> 
> 时间：2012-09-14T04:57:13.460
> 
> 标签：c, casting, linked-list, malloc

最近在我的导师关于链表的讲座中，他这样声明它们：

```
struct asd *head=(struct asd *)malloc(sizeof(struct asd)); 
```

我想知道上面的声明与此有什么区别：

```
struct asd *head=malloc(sizeof(struct asd)); 
```

因为我一直在为我制作的每个链接列表使用后者。顺便说一句，语言是C。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T05:00:58.423

基本上没有区别，问题是`malloc`返回 a `void *`，然后可以将其设置为 C 中的任何其他指针类型，在 C++ 中，它需要像最初那样进行显式类型转换，在 C 中，它不赞成对 malloc 的返回进行类型转换。

因此，您的导师可能最初学习的是 C++，然后是 C，这实际上在现在很常见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T05:00:32.203

以下是正常的，在使用 C 时推荐：

```
struct asd *head = malloc(sizeof(*head)); 
```

1.  建议使用`sizeof(*head)`而不是，`sizeof(struct asd)`因为它减少了拼写错误，尤其是在重构代码时。两者在其他方面是等价的。

2.  不建议使用 return `malloc`，因为这没有积极作用。在某些情况下，强制转换 的结果会`malloc`产生**负面**影响，因为当您忘记包含`<stdlib.h>`.

请参阅：[我是否强制转换 malloc 的结果？](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)

**脚注：**强制转换结果的唯一合理原因`malloc`是您可以编写同时使用 C 和 C++ 的代码。但是请不要编写既是 C 又是 C++ 的代码，这有点疯狂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T05:03:59.640

真的没有什么区别。Malloc 分配特定大小的内存（结构 asd 的字节数）。这两种情况都会发生。不同之处在于指针（只是一个内存地址）在第一个示例中被强制转换，而不是在第二个示例中强制转换。

投射指针实际上并没有“做任何事情”。它是一种语法糖，旨在使您（和编译器）更容易以特定方式思考指针。同样，在此示例中，它没有任何区别。

我个人更喜欢您的讲师使用的第一种方法，因为它是明确的。您明确表示 malloc 返回的内存地址指向 a `struct asd`。尽管在内部，指针是指针是指针。在 C 语言中，显式几乎总是一件好事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T05:04:04.773

`malloc()`返回一个 void 指针，在 C 中，可以将 void 指针分配给任何指针，而无需显式强制转换。`#1`所以不需要像这样的显式 cast( )。

事实上，一些程序员会建议避免使用 cast( `#2`) 来避免模糊的可用性错误。

如果您忘记包含`stdlib.h`. 编译器将假定这`malloc()`是一个返回的函数`int`，并将由于显式转换而将返回的指针`void*`转换为。在某些平台上，an 的大小和指针的大小可能不同，因此这种不希望的类型转换可能会导致数据损坏。`malloc()``int``int`

就个人而言，我认为这不是一个很大的原因，而是与古老的***[尤达条件](http://www.dodgycoder.net/2011/11/yoda-conditions-pokemon-exception.html)***相似的哲学。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T04:59:48.310

malloc 返回一个 void* 指针，因此您的讲师使用了正确的语法并显式转换为正确的类型。您所做的工作有效，因为编译器会自动为您转换它。我假设您使用了 MSVC，因为 GCC 会警告您这一点（我认为）。

# node.js - Node.js 表达了对 bodyParser 中间件的正确使用

> ID：12418372
> 
> 赞同：28
> 
> 时间：2012-09-14T04:58:09.937
> 
> 标签：node.js, express, connect

我是 node.js 和 express 的新手，并且已经对它们进行了一段时间的试验。现在我对与解析请求正文相关的 express 框架的设计感到困惑。来自express的官方指南：

```
app.use(express.bodyParser());
app.use(express.methodOverride());
app.use(app.router);
app.use(logErrors);
app.use(clientErrorHandler);
app.use(errorHandler); 
```

设置好所有中间件后，我们添加我们要处理的路由：

```
app.post('/test', function(req, res){ 
  //do something with req.body      
}); 
```

这种方法的问题在于，在检查路由有效性之前，将首先解析所有请求正文。解析无效请求的主体似乎非常低效。更重要的是，如果我们启用上传处理：

```
app.use(express.bodyParser({uploadDir: '/temp_dir'})); 
```

任何客户端都可以通过上传任何文件（通过向任何路由/路径发送请求！！）来轰炸服务器，所有这些都将被处理并保存在“/temp_dir”中。我不敢相信这种默认方法正在被广泛推广！

我们当然可以在定义路由时使用 bodyParser 函数：

```
app.post('/test1', bodyParser, routeHandler1);
app.post('/test2', bodyParser, routeHandler2); 
```

甚至可能在处理路由的每个函数中解析主体。但是，这样做很乏味。

有没有更好的方法可以将 express.bodyParser 仅用于所有有效（已定义）路由，并仅在选定路由上使用文件上传处理功能，而无需大量重复代码？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-14T05:48:29.593

你的第二种方法很好。请记住，您还可以将中间件函数数组传递给`app.post`,`app.get`和朋友。所以你可以定义一个数组`uploadMiddleware`，用你的东西来处理 POST 正文、上传等，并使用它。

```
app.post('/test1', uploadMiddleware, routeHandler1); 
```

这些示例适用于初学者。帮助您在第一天就开始工作的初学者代码和高效且安全的生产代码通常是非常不同的。关于不接受上传到任意路径，您提出了一个肯定有效的观点。至于解析所有“非常低效”的请求主体，这取决于无效/攻击 POST 请求与发送到您的应用程序的合法请求的比率。在您的站点开始流行之前，攻击探测请求的平均背景辐射可能不足以担心。

[这里还有一篇博文，其中详细介绍了 bodyParser 的安全注意事项。](http://andrewkelley.me/post/do-not-use-bodyparser-with-express-js.html)

# php - 谁能帮我解决错误::: Parse error: syntax error, unexpected T_FUNCTION in /localhost/braintree/app.php on line 14

> ID：12418379
> 
> 赞同：-1
> 
> 时间：2012-09-14T04:59:00.310
> 
> 标签：php

```
<?php

require_once 'braintree-php-2.14.0/lib/Braintree.php';
require_once __DIR__ . 'silex/vendor/autoload.php';
Braintree_Configuration::environment('sandbox');
Braintree_Configuration::merchantId('...');
Braintree_Configuration::publicKey('...');
Braintree_Configuration::privateKey('...');
$app = new Silex\Application();
$app->get('/', function () {
    include 'views/form.php';
});
$app->run();
//$app->get("/braintree-php-2.14.0", function () {
$app->get("/braintree", function () {
   include 'views/response.php';
});
?> 
```

这是 Braintree 支付系统，我清楚地阅读了文档但没有解决。在第 14 行发现错误：$app->get("/braintree", function () {

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:55:53.367

看起来问题在于匿名函数仅在 PHP 5.3+ 中可用。如果可能的话，我建议将您的服务器升级到可用的最新版本的 PHP，5.4.7。

另一个问题可能是您在添加响应挂钩之前调用了 $app->run()，因此我将 run() 调用移至末尾。

如果您无法升级 PHP，那么以下修复应该可以工作：

```
<?php
require_once 'braintree-php-2.14.0/lib/Braintree.php';
require_once __DIR__ . 'silex/vendor/autoload.php';
Braintree_Configuration::environment('sandbox');
Braintree_Configuration::merchantId('...');
Braintree_Configuration::publicKey('...');
Braintree_Configuration::privateKey('...');
$app = new Silex\Application();
function form() {
  include 'views/form.php';
}
$app->get('/', form);
function response() {
  include 'views/response.php';
}
$app->get("/braintree", response);
$app->run();
?> 
```

我真正喜欢 PHP 5.4 的另一个原因是它[包含一个轻量级（即不用于生产）服务器](http://php.net/manual/en/features.commandline.webserver.php)，这使得测试和调试变得更加容易。我是 Braintree 开发人员并编写了此指南，因此希望对您有所帮助！

# google-bigquery - 引号和字段分隔符之间的数据

> ID：12418381
> 
> 赞同：14
> 
> 时间：2012-09-14T04:59:15.560
> 
> 标签：google-bigquery

在下面给出的示例中，最后一行没有上传。我收到一个错误：

```
Data between close double quote (") and field separator: 
```

这看起来像一个错误，因为管道符号之间的所有数据都应该被视为一个字段。

**架构：**一：字符串，二：字符串，三：字符串，四：字符串

上传文件：

```
This | is | test only | to check quotes
second | line | "with quotes" | no text
third line | with | "start quote" and | a word after quotes 
```

处理上面的第一行和第二行。但不是第三个。

* * *

更新：

有人可以解释为什么**除了第三行之外**以下工作？

```
This | is | test only | to check quotes
second | line | "with quotes" | no text
third line | with | "start quote" and | a word after quotes
forth line | enclosed | {"GPRS","MCC_DETECTED":false,"MNC_DETECTED":false} | how does this work?
fifth line | with | {"start quote"} and | a word after quotes 
```

对此可以有一些花哨的解释。从最终用户的角度来看，这是荒谬的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-14T06:39:26.940

来自[CSV RFC4180 页面](https://www.rfc-editor.org/rfc/rfc4180)：*“如果使用双引号括住字段，则出现在字段内的双引号必须通过在其前面加上另一个双引号来进行转义。”*

你可能想要这样做：

```
This | is | test only | to check quotes
second | line | "with quotes" | no text
third line | with | " ""start quote"" and " | a word after quotes 
```

更多关于我们的 CSV 输入格式[的信息](https://developers.google.com/bigquery/docs/developers_guide#csvformat)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-01-31T00:06:38.757

使用`--quote`效果很好。

```
bq load 
--source_format CSV --quote "" 
--field_delimiter \t 
--max_bad_records 10 
-E UTF-8   
destination table
Source files 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-01T12:23:35.903

您也可以在上传数据时使用其他标志。我使用了带有以下标志的 bq 工具

```
bq load -F , --source_format CSV --skip_leading_rows 1 --max_bad_records 1 --format csv -E UTF-8 yourdatset gs://datalocation. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-10T04:44:25.313

*   API V2 [https://cloud.google.com/bigquery/docs/reference/v2/jobs#configuration.load.quote](https://cloud.google.com/bigquery/docs/reference/v2/jobs#configuration.load.quote)

*   bq 命令 --quote：引用字符用于包含记录。默认为“。要表示根本没有引号字符，请使用空字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-10T01:24:25.680

试试这个作为替代方案：

*   将 MySQL 备份文件加载到 Cloud SQL 实例中。
*   直接从 MySQL 中读取 BigQuery 中的数据。

更长的操作方法：

*   [https://medium.com/google-cloud/loading-mysql-backup-files-into-bigquery-straight-from-cloud-sql-d40a98281229](https://medium.com/google-cloud/loading-mysql-backup-files-into-bigquery-straight-from-cloud-sql-d40a98281229)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-03T07:33:30.417

尝试每次使用`bq`shell 加载。

我必须加载 1100 列。在尝试使用带有所有错误选项的控制台时，它引发了很多错误。忽略控制台中的错误意味着丢失记录。

因此尝试使用 shell 并成功加载所有记录。

尝试以下操作：

```
bq load --source_format CSV --quote "" --field_delimiter \t --allow_jagged_rows --ignore_unknown_values --allow_quoted_newlines --max_bad_records 10 -E UTF-8 {dataset_name}.{table_name} gs://{google_cloud_storage_location}/* {col_1}:{data_type1},{col_2}:{data_type2}, .... 
```

参考：

```
https://cloud.google.com/bigquery/docs/loading-data-cloud-storage-csv#bigquery_load_table_gcs_csv-cli

https://cloud.google.com/bigquery/docs/loading-data-cloud-storage-csv#csv-options 
```

# python - 如何使用 Python(Gevent) 异步获取内容？

> ID：12418384
> 
> 赞同：0
> 
> 时间：2012-09-14T04:59:42.777
> 
> 标签：python, celery, gevent

该场景是使用 RMDB id 作为参数保存 API 请求的响应。我想获取从 imdv-id tt0000001 到 tt9999999 的所有电影信息。

现在我正在使用 gevent 运行多个线程（gevent.joinall(threads)），它不是那么快。这类问题还有其他解决方案吗，比如使用 Celery+RabbitMQ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:22:57.787

一方面，您必须确保您没有在代码中进行任何阻塞调用，因为这也会阻止其他所有内容的运行，从而减慢整个系统的速度。阻塞的原因包括紧密的循环或没有被 eventlet 的猴子补丁（例如 C 扩展）修补的 IO。

Celery 支持使用 eventlet 和 gevent，这可能是您正在做的事情（Web 请求 IO）推荐的并发选项。虽然 Celery 可能不会让您的代码运行得更快，但它可以让您轻松地将工作分配到多台机器上。

要进行优化，您应该始终分析您的代码以找出瓶颈所在。这可能是很多事情，例如慢速网络、慢速主机、慢速 DNS 或其他完全不同的东西。

# java - Java日期解析

> ID：12418396
> 
> 赞同：0
> 
> 时间：2012-09-14T05:00:36.647
> 
> 标签：java, date

我正在尝试将以下字符串解析为日期对象：9/14/2012 9:50:56 PM

我正在使用以下格式：

```
DateFormat formatter = new SimpleDateFormat("MM/dd/yy HH:mm:ss a");
formatter.setTimeZone(TimeZone.getTimeZone("America/New_York")); 
```

但我不断收到以下日期：Fri Sep 14 06:50:56 PDT 2012

我似乎要休息 12 小时（在考虑到时间变化之后）。但是，当我解析以下字符串时：9/14/2012 1:00:00 AM - 我得到了正确的日期对象：Thu Sep 13 22:00:00 PDT 2012

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:06:57.567

如果您的日期是 am/pm 格式，您应该使用`hh`, 而不是`HH`几个小时。请参阅参考资料：[http ://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

这里发生的情况是`9`被视为 24 小时格式的 09 小时，即上午 9 点，因此您的日期被正确地推迟了 3 小时以使其成为上午 6 点。第二个日期凌晨 1 点是 01 小时，日期是正确的。

# sql - 字符串如何传递给 SQLAlchemy 的 .like() 方法

> ID：12418400
> 
> 赞同：10
> 
> 时间：2012-09-14T05:00:57.943
> 
> 标签：sql, ajax, sqlalchemy, flask, sql-like

我正在使用 SQLAlchemy 在 Flask 上构建一个界面，其中一部分是搜索 API。本质上，预先输入的输入是使用其值（例如电子邮件）调用服务器，然后服务器正在使用 .like 在如下过滤器中执行 SQLalchemy 查询

```
q = session.query(User).filter(User.email.like('%'+term+'%')).all() 
```

这个查询并没有真正返回任何有用的东西，在前几个字符之后，什么也没有。但是，如果我使用硬编码术语执行相同的查询，如下所示：

```
q = session.query(User).filter(User.email.like('%mysearchterm%')).all() 
```

它会完美地返回结果，所以我如何将术语放入 like() 方法中，但我真的无法弄清楚问题是什么。该术语来自 ajax POST 并且该值存在于服务器端，只是 .like() 没有正确使用它。

“没什么用”是指返回的第一组结果与输入的实际术语无关，在长度高于 3-4 的术语之后，尽管数据库中存在匹配项，但没有返回任何结果。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T06:03:12.553

问题已解决。该查询位于一个更大的查询构建器函数中，该函数稍后将限制和偏移量应用于查询，因为限制和偏移量高于返回结果集为空的结果数量。

这可能会导致严重的人为错误和睡眠不足。

# iphone - “共享屏幕”iOS 6

> ID：12418412
> 
> 赞同：30
> 
> 时间：2012-09-14T05:02:30.163
> 
> 标签：iphone, ios, xcode, ios6

我可以使用 iOS 6 在自己的应用程序中显示此“共享屏幕”吗？有人知道怎么做吗？

![iOS 共享屏幕](../Images/f879b8645be79026a7da55514efd2b73.png)

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-25T10:42:19.110

恐怕你们都错了。很抱歉，您的回答是否定的，但您的错误答案迫使我浪费时间寻找徒劳的解决方案....相反，您可以使用此代码来实现此屏幕：

```
NSString* someText = self.textView.text;
NSArray* dataToShare = @[someText];  // ...or whatever pieces of data you want to share.

UIActivityViewController* activityViewController = 
[[UIActivityViewController alloc] initWithActivityItems:dataToShare 
                                  applicationActivities:nil];
[self presentViewController:activityViewController animated:YES completion:^{}]; 
```

代码来自 Social.framework。

请参阅此答案：[在 iOS 6 中使用 Apple 图标](https://stackoverflow.com/questions/12546574/using-apple-icons-with-ios-6)

# android - 适用于 iOS 和 Android 的 Adob e air NativeAlert

> ID：12418415
> 
> 赞同：0
> 
> 时间：2012-09-14T05:03:00.873
> 
> 标签：android, actionscript-3, air, air-native-extension

只是想知道有人成功实现了[以下本机扩展](http://www.as3gamegears.com/air-native-extension/nativealert/)吗？

不知何故，我无法让它工作。

当我对其进行检查时`if(NativeAlert.isSupported)`，我发现它是真的。然而，警报对话从未出现。

```
import pl.mateuszmackowiak.nativeANE.alert.NativeAlert;
import pl.mateuszmackowiak.nativeANE.NativeDialogEvent;
import pl.mateuszmackowiak.nativeANE.toast.Toast;

NativeAlert.defaultTheme = NativeAlert.ANDROID_DEVICE_DEFAULT_DARK_THEME;// not necessary
if(NativeAlert.isSupported){
    NativeAlert.show( “some message” , “title” , “first button label” , “otherButtons,LabelsSeperated,WithAComma” , someAnswerFunction);
}else{
    _modalDialogue.simplecloseModalDialoge();
}
//NativeAlert.dispose(); //only when exiting app
//Toast
Toast.show(“some message”,Toast.LENGTH_LONG);
var randX:int = Math.random()*600;
var randY:int = Math.random()*600;
Toast.showWithDifferentGravit(“some message”,Toast.LENGTH_SHORT,Toast.GRAVITY_LEFT,randX,randY); 
```

我有一台 iPad1 和 Adob​​e Air 3.4，闪存 CS5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T03:20:08.853

您正在使用智能引号。将“和”替换为“。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T13:37:37.167

我建议您使用来自不同开发人员的不同 ANE 并再次测试。我使用来自freshplanet（github中的开源）的那个并且效果很好。

这是一个帖子，您可以在其中找到更多信息... [http://www.redcodelabs.com/2014/03/adobe-air-native-alerts-using-anes/](http://www.redcodelabs.com/2014/03/adobe-air-native-alerts-using-anes/)

# java - 页面未序列化时的 Wicket Ajax 问题

> ID：12418416
> 
> 赞同：0
> 
> 时间：2012-09-14T05:03:06.280
> 
> 标签：java, ajax, serialization, wicket

我们的应用程序使用 wicket 1.5.2，到目前为止，我们已经使用 ajax 构建了很多页面，这使得页面是有状态的。我们在日志中注意到 NotSerializableException [NSE] 但忽略了它，因为它并没有真正破坏任何功能。现在我们开始注意到多个选项卡/窗口场景中的 ajax 问题。

假设我有页面 A 有一些 ajax 行为和页面 B。我加载页面 A，右键单击链接并在新选项卡中打开页面 B。现在，当我单击页面 A 中的 ajax 链接时，它会尝试重新绘制同一页面 [A]。在尝试调试时，我注意到它正在尝试根据页面 id 查找页面，并且由于页面存储中不会出现相同的页面 [请记住，由于没有存储页面而导致 NSE] 它创建了新的实例页面并重新绘制相同。

我知道正确的做法是让序列化成功，但这对我们来说需要一些时间，因为我们必须重新审视所有已实现的组件以确保我们解决这些问题。有没有其他快速和（有点）好的解决方案？

另一种选择是使用无状态 ajax 组件 [Jolira?] 使页面无状态 - 我不知道这将如何公平，但会尝试。同时，如果有人解决了这个问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T08:53:18.780

这听起来可能很刺耳，但你真的应该修复你的代码。忽略异常通常是个坏主意。

Wicket 依赖于完全可序列化的页面来支持状态性。如果页面序列化失败，则无法保证 Wicket 的任何有关状态的功能都可以正常工作。对于您希望通过 AJAX 更新的页面部分（即组件和模型）尤其如此。

# python - 多线程写入文件

> ID：12418417
> 
> 赞同：2
> 
> 时间：2012-09-14T05:03:11.920
> 
> 标签：python

前几天刚开始使用python，对多线程的整个概念是陌生的。我在多线程时无法写入文件。如果我以常规方式执行此操作，它将不断覆盖正在写入的内容。

使用 5 个线程时写入文件的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T05:11:44.107

不降低性能的最佳方法是在所有线程之间使用队列，每个线程将一个项目入队，而主线程将简单地将一个项目出队列并将其写入文件，队列是线程安全的，并且在其为空时阻塞，或者更好的是，如果可能的话，只需从 5 个线程返回所有值，然后将其写入文件，IO 往往是我们可以做的更昂贵的操作之一，所以最好尽可能地限制它。

另请注意，python 中的线程不利用多核，如果您想利用多个处理引擎， [GIL](http://wiki.python.org/moin/GlobalInterpreterLock)会使用[多处理。](http://docs.python.org/library/multiprocessing.html)

这是一个简单的例子：

```
from multiprocessing import Process, Queue

def test_1(q):
    for i in range(10):
        q.put('test_1: ' + str(i))

def test_2(q):
    for i in range(10):
        q.put('test_2: ' + str(i))

q = Queue()
p1 = Process(target=test_1, args=(q,))
p2 = Process(target=test_2, args=(q,))
p1.start()
p2.start()

with open('test.txt', 'w') as file:
    while p1.is_alive() or p2.is_alive() or not q.empty():
        try:
            value = q.get(timeout = 1)
            file.write(value + '\n')
        except Exception as qe:
            print "Empty Queue or dead process"
p1.join()
p2.join() 
```

和内容`test.txt`：

```
test_1: 0
test_1: 1
test_1: 2
test_1: 3
test_1: 4
test_2: 0
test_1: 5
test_2: 1
test_1: 6
test_2: 2
test_1: 7
test_2: 3
test_1: 8
test_2: 4
test_1: 9
test_2: 5
test_2: 6
test_2: 7
test_2: 8
test_2: 9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T05:06:06.763

一种方法是锁定文件，这样一次只有一个线程可以访问它；检查[threading.Lock](http://docs.python.org/library/threading.html)。

# android - OnItemClickListener的神秘未知外星人接口，如何实现

> ID：12418423
> 
> 赞同：0
> 
> 时间：2012-09-14T05:04:05.903
> 
> 标签：android, coverflow, onitemclicklistener

我正在尝试将 OnItemClickListener 添加到适用于 android 的 Coverflow 应用程序中，其中图像可以来回滚动，而我想要添加的部分是单击侦听器，因此您可以单击其中一个图像并转到另一个活动。我猜它的工作方式与将 OnItemClick 添加到列表视图或填充图像的网格视图中的方式相同。我知道这个问题之前已经被问过，但是这种情况是不同的。应用程序中有没有意义的附加代码。这是代码来自[http://www.inter-fuser.com/2010/01/android-coverflow-widget.html](http://www.inter-fuser.com/2010/01/android-coverflow-widget.html)的地方 ，这个应用程序有以下四个java类：

CoverFlow.java // 扩展 CoverAbsSpinner 并实现 GestureDetector.OnGestureListener

CoverAdapterView.java // 类扩展了 Adapter 和 ViewGroup 类

CoverAbsSpinner.java // 这个类扩展了 CoverAdapterView.java

CoverFlowExample.java // 扩展 Activity

奇怪的是我在 CoverAdapterView.java 类中找到的下面显示的代码。将看似无用的接口卡在类中间是没有意义的。它说“单击此 AdapterView 中的项目时要调用的回调方法。”

这就是方法的奥秘。你怎么“称呼”这个？他们真的准备了 OnItemClickListener 吗？我要覆盖这件事还是什么？

并且由于尚未理解此代码的原因？有谁知道这样做的目的是什么？无论如何，它是一个您必须实现或覆盖的接口。所以我质疑这样做的目的。

```
public interface OnItemClickListener {

    /**
     * Callback method to be invoked when an item in this AdapterView has
     * been clicked.
     * <p>
     * Implementers can call getItemAtPosition(position) if they need
     * to access the data associated with the selected item.
     *
     * @param parent The AdapterView where the click happened.
     * @param view The view within the AdapterView that was clicked (this
     *            will be a view provided by the adapter)
     * @param position The position of the view in the adapter.
     * @param id The row id of the item that was clicked.
     */
    void onItemClick(CoverAdapterView<?> parent, View view, int position, long id);

}
/**
 * Register a callback to be invoked when an item in this AdapterView has
 * been clicked.
 *
 * @param listener The callback that will be invoked.
 */
public void setOnItemClickListener(OnItemClickListener listener) {
    mOnItemClickListener = listener;
}

/**
 * @return The callback to be invoked with an item in this AdapterView has
 *         been clicked, or null id no callback has been set.
 */
public final OnItemClickListener getOnItemClickListener() {
    return mOnItemClickListener;
}

/**
 * Call the OnItemClickListener, if it is defined.
 *
 * @param view The view within the AdapterView that was clicked.
 * @param position The position of the view in the adapter.
 * @param id The row id of the item that was clicked.
 * @return True if there was an assigned OnItemClickListener that was
 *         called, false otherwise is returned. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:21:59.783

嗨，对于coverflow click listner，请尝试使用它。

```
coverFlow.setOnItemClickListener(new OnItemClickListener() 
{
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) 
    {
        switch(position) 
        {
            case 0:
                startActivity(new Intent(****.this,@@@@.class));
                finish();
                break;
            case 1:
                startActivity(new Intent(****.this, ####.class));
                finish();
                break;
            case 2:
                startActivity(new Intent(****.this, &&&&.class));
                finish();
                break;

        }
    }
}); 
```

# asterisk - 在手机上使用多个电话号码

> ID：12418424
> 
> 赞同：0
> 
> 时间：2012-09-14T05:04:11.390
> 
> 标签：asterisk

为不同的人群设置多个电话号码会有多困难。当有人拨打一个号码时，它应该响我的电话。当我打电话给某人时，它应该显示来电显示作为给定目标所在组的号码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:13:54.913

假设您想在 Asterisk 中设置一个类似系统的迷你呼叫中心，

这在某种程度上很容易，如果您熟悉 Linux 和 IP 电话，

[这是我很久以前尝试过的导师](http://cssucs.wordpress.com/2010/06/01/simple-call-center-setup-call-queuing-agents-in-asterisk/)。如果你想熟悉 Asterisk，你可以[跟随这个导师](http://www.asteriskguru.com/tutorials/)

# security - 来自 HTTPS 解决方案的安全 iframe

> ID：12418426
> 
> 赞同：1
> 
> 时间：2012-09-14T05:04:32.060
> 
> 标签：security, http, rest, iframe, https

我正在开发一个允许事件注册/付款的注册应用程序/api，并且我正在探索将其扩展到用户网站的最佳选择。我考虑过 iframe，但我担心用户网站的非安全性质会使我采取的任何安全措施无效。

我的另一个选项可能不是用户友好的，但基本上提供通过 API/Rest 调用使其全部工作，但这取决于用户的设置能力。

基本上我想要的是将服务托管在[https://myservice.com](https://myservice.com)并允许[https://mywebsite.com](https://mywebsite.com)与创建的应用程序集成。我想要一个由 3 部分组成的表格来注册和支付活动费用，但主要关注的是安全性。

那么我的想法完全偏离了基础吗？我需要做更多的研究吗？还是我想多了？谢谢。

# spring - Spring 将表单的动作映射到控制器

> ID：12418427
> 
> 赞同：6
> 
> 时间：2012-09-14T05:04:35.117
> 
> 标签：spring

我是 Spring Framework 的新手，我已经使用该方法创建了一个控制器

```
@RequestMapping("/fetch/{contactId}")
public String getContact(@PathVariable("contactId") Long contactId,
        Map<String, Object> map, HttpServletRequest request,
        HttpServletResponse response) {

    Contact contact = contactService.get(contactId);
    map.put("contact", contact);
    return "contact";
} 
```

当用户单击 jsp 上的链接时，调用此 fetch 方法以检索联系人详细信息

```
<td><a href="fetch/${contact.id}" class="edit">Edit</a></td> 
```

然后它成功返回联系人对象并显示在屏幕上供用户更改和保存。我的jsp的form标签是这样的

```
<form:form method="post" action="add.html" commandName="contact"
        id="contact" onsubmit="return validateContact(this)"> 
```

现在的问题是，当我尝试将页面提交到同一控制器中的另一个方法时，URL 更改为

*/myapp/app/contacts/fetch/add.html*

而它应该是

*/myapp/app/contacts/add.html*

我知道有些事情我做的不对，但我到底是什么无法弄清楚。感谢你们中的任何人是否可以帮助我解决问题

谢谢 AA

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T06:49:05.177

利用

```
<c:url var="addUrl" value="/contacts/add.html"/>
<form:form method="post" action="${addUrl}" commandName="contact"
      id="contact" onsubmit="return validateContact(this)"> 
```

一般来说，建议在每个应用程序内部使用，而不是直接在标签`c:url`中使用 url 。`<a>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-12T10:46:27.063

```
<form:form method="post" servletRelativeAction="/contacts/add" commandName="contact"
        id="contact" onsubmit="return validateContact(this)"> 
```

使用属性 servletRelativeAction 映射到所需的控制器操作。我假设您想要的控制器映射为“/contacts/add”而不是“add.html”。你想点击控制器而不是视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T06:45:44.383

`/contacts/add.html`在`action`属性
更改 中使用

```
<form:form method="post" action="add.html" commandName="contact"
        id="contact" onsubmit="return validateContact(this)"> 
```

至

```
<form:form method="post" action="/contacts/add.html" commandName="contact"
        id="contact" onsubmit="return validateContact(this)"> 
```

# mysql - SELECT子句中的Mysql IF语句？

> ID：12418428
> 
> 赞同：1
> 
> 时间：2012-09-14T05:04:35.273
> 
> 标签：mysql, if-statement

我试图`IF`在我的`SELECT`声明中包含一个，同时定义一个临时列。

这就是我现在正在尝试的：

```
SELECT *, IF A > 0, A, 0.5 AS Popularity FROM Visits 
```

它是如何正确完成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T05:05:37.750

你想做：

```
SELECT *, IF (A > 0, A, 0.5) AS Popularity FROM Visits 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T05:06:09.177

您正在使用存储过程中使用的 IF 语法。对于 SELECT 使用，它必须是[函数版本](http://dev.mysql.com/doc/refman/5.5/en/control-flow-functions.html#function_if)：

```
SELECT *, IF(A>0, A, 0.5) AS Popularity ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T05:07:39.487

在其他 DBMS 中工作的替代方案是

```
SELECT CASE WHEN ( a > 0 ) THEN a ELSE 0.5 END AS popularity FROM visits 
```

# windows - 用户目录文件夹存在但丢失

> ID：12418430
> 
> 赞同：0
> 
> 时间：2012-09-14T05:05:09.707
> 
> 标签：windows, directory

当我尝试找到 C:\users\user 目录时，我无法从用户目录中看到它的图标，但是我可以使用 Windows 资源管理器或 cmd 上的路径名导航到它，我怎样才能让图标恢复正确地方？

谢谢，

格拉西亚斯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:14:19.763

如果您想在不切换到“显示隐藏的文件、文件夹和驱动器”的情况下查看它，请在 cmd 中键入：

```
attrib -S -H C:\users\user 
```

`-S`删除系统属性并`-H`删除隐藏属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:11:11.857

您需要激活[显示隐藏文件的选项](http://windows.microsoft.com/en-US/windows7/Show-hidden-files)

# html - 用css在按钮背景中着色

> ID：12418432
> 
> 赞同：1
> 
> 时间：2012-09-14T05:05:22.847
> 
> 标签：html, css

我正在构建我的导航栏，目前我正在为菜单上的每个选项使用 3 个图像。我正在使用 css 根据未选择、悬停和选择的时间替换图像。使用 html 和 css，我只知道如何突出显示实际的单词（即 home、order、它是如何工作的......），我无法找到一种在选中时为整个框着色的方法。

有没有办法在不使用图像文件的情况下使用 html/css 来做到这一点？

![在此处输入图像描述](../Images/e8880a4ba00167dd44009f2d277b73e7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T06:00:01.233

在悬停时有不同颜色的菜单

有你的CSS是这样的：

```
div.home:hover{
color: #4C787E;
}
div.aboutus:hover{
color: #616D7E;
}
div.contact:hover{
color: #808000;
} 
```

和 html 是这样的：

```
<div id="menu">
<ul>
<li class="menu1"><div class="home"><a href="#">home</a></div>
</li>
<li class="menu2"><div class="aboutus"><a href="...">about us</a></div></li>
<li class="menu3"><div class="contact"><a href="...">contact</a></div></li>
</ul>
</div> 
```

与上述相同，您也可以将其应用于子菜单。

试试看。

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T05:21:17.900

***[演示](http://tinkerbin.com/DHVk1sE9)***

......................... 嗨，现在像这样轻松地做到这一点

**css**

```
 ul{
list-style:none;
  width:200px;
  padding:0;
  margin:0;
  background:green;
}
ul li{
display:block;
  background:pink;
  margin:3px;
}
a:hover{
background:red;
}
a{
text-decoration:none;
  display:block;
  padding:0 30px;
  line-height:35px;
  position:relative;
}
.shope{
padding-left:60px;
}
.shope:hover{
background:none;
}
.shope:after{
content:'';
  position:absolute;
  left:10px;
  top:8px;
  width:30px;
  height:20px;
  background:lightgreen;
}
.shope:before{
content:'';
  position:absolute;
  right:20px;
  top:8px;
  width:30px;
  height:20px;
  background:darkred;
} 
```

**html**

```
 <ul>
  <li><a href="#">home</a></li>
  <li><a href="#">home</a></li>
  <li><a href="#">home</a></li>
  <li><a href="#">home</a></li>
  <li><a href="#">home</a></li>
  <li><a href="#" class="shope">my cart 1</a></li>

</ul> 
```

***[现场演示](http://tinkerbin.com/DHVk1sE9)***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T05:15:08.123

提供的信息很少，但我仍然会尝试假设最一般的方式。

在基本`ul`和`li`菜单结构中，如下所示。

```
<ul>

    <li>

        <a href="#">Link Text</a>

    </li>

</ul> 
```

围绕所有菜单的框只需简单地选择

```
ul {
    /* Styles */
} 
```

菜单项周围的框（***可能是您要问***的）由`ul > li`

```
ul > li {   
    /* Style */
    background-color: red;
} 
```

*注意：您也可以使用`ul li { ... }`更通用的方式。*

其中，链接本身由`ul > li a`

```
ul > li a {
    /* Style */
} 
```

尝试在您的情况下实施此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T05:15:12.080

应该可以使用`color`和的组合来实现此效果`background-color`。

# image - Windows Phone 7 下载多个图像

> ID：12418441
> 
> 赞同：0
> 
> 时间：2012-09-14T05:06:21.183
> 
> 标签：image, windows-phone-7, webclient

我正在为 windows phone 7.5 制作类似 flexster 的应用程序。我有一段代码，我想获取即将上映的电影图片和电影 ID。但是当我的代码完成时，只有第一张图片会填充到列表框图像中。这是我的代码：

```
public void NowPlayinJson(string Uri)
{
  string apiUri = string.Format("{0}{1}{2}10", Uri, ApiKay, PagesLimit);
  WebClient Rclient = new WebClient();

  Rclient.DownloadStringAsync(new Uri(apiUri));
  Rclient.DownloadStringCompleted += (s, e) =>
  {
      if (e.Error == null)
      {
          jsonStringValue = (e.Result.ToString().Trim());
          ImageUri();
       }
  };
}
public void ImageUri()
{
    var ParseImageUri = JObject.Parse(jsonStringValue);
    var ParseToJson = 
        JsonConvert.DeserializeObject<RootObject(ParseImageUri.ToString());

    NowPlayingUri = ParseToJson.movies[0+a].posters.detailed;

    a++;
    DownloadImage();
}

public void DownloadImage()
{
    if (!web.IsBusy)
    {
        web.OpenReadAsync(new Uri(NowPlayingUri), UriKind.Absolute);
    }
    web.OpenReadCompleted += 
        new OpenReadCompletedEventHandler(web_OpenReadCompleted);
} 

void web_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
{
    if (e.Error == null)
    {
        while(i<6)
        {
            var stream = e.Result;

            var bi = new BitmapImage();
            bi.SetSource(stream);

            myNowPlayingList.Add(new NowPlaying() 
                { NowImage = bi, NowTitle = "title" + i });
            i++;
            if (b < 6)
            {
                b++;
                ImageUri();
            }
            if(b == 6)
            {
                b++;
                NowPlayingListBox.ItemsSource = myNowPlayingList;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:24:03.750

我看到您没有维护任何`queue`待处理的图像下载或列表。请注意`webClient can download one Image at a time`, 所以如果它很忙，请将其添加到队列中。成功下载后检查队列长度。如果它不为空，则从队列中删除项目并将其添加到 webClient 下载。如果您`maintain a cache`或其他类似的东西，如果图像已经在缓存或 IS 中，不要从那里下载和显示，否则将图像添加到下载队列中。希望这种方法对您有所帮助。

# list - 高效的自动排序列表python

> ID：12418443
> 
> 赞同：0
> 
> 时间：2012-09-14T05:06:27.173
> 
> 标签：list, sorting, python-2.7

我想在 python 中编写一个 list-lie 类，当添加数字时它会自动排序。这是为了好玩，而不是为了上课：p 我想知道的是最有效的方法是什么。我应该做这样的事情吗？：

```
class SortedList:
    def __init__(self, data):
        self.data = list(data)

    def add(self, num):
        self.data.append(num)
        self.data.sort() 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T05:15:29.973

**-编辑-** `sort()`是 O(n log n)。在每个添加的数字之后通过排序将 n 个数字添加到列表中将是 O(n^2 log n)（但实际上这可能比 O(n^2) 算法更快，具体取决于排序的优化） .

更好的 O 实现是花费 O(n) 时间来搜索插入位置，并花费 O(n) 时间将新数字添加到列表中（总时间仍然 O(n)）。将 n 个数字添加到列表中将是 O(n^2)。代码如下：

```
def addFaster(self, num):
    index = 0
    if(len(self.data) == 0):
        self.data = [num]
    else:
        for i in range(0, len(self.data)):
        if(self.data[i] >= num):
            self.data.insert(i, num)
            return
        self.data.append(num) 
```

我们可以通过在 O(log n) 时间内对正确索引进行二进制搜索来做得更好。向列表中添加一个新数字是 O(n)。由于整个操作是（比以前更好）O(n)，将 n 个数字添加到列表中是 O(n^2)，具有较低的常数。（不包括代码）

`extend()`但是，如果您要在大组中添加新数字，如果您一次将它们全部添加（使用）然后排序，它将大大加快算法速度。然后，添加 n 个数字将在 O(n log n) 时间内完成（与排序相同）。

见[http://wiki.python.org/moin/TimeComplexity](http://wiki.python.org/moin/TimeComplexity)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T05:34:34.090

您指定您希望将其实现为列表；您是否考虑过将数据结构视为堆？可能更适合您正在尝试做的事情。

见[heapq](http://docs.python.org/library/heapq.html)。

# c# - 开发/Web 服务器应该在 32 位还是 64 位窗口服务器上？

> ID：12418445
> 
> 赞同：2
> 
> 时间：2012-09-14T05:06:33.403
> 
> 标签：c#, asp.net, vb.net, iis-6

我是 2003 64 位服务器的新手，想知道我是在 64 位还是 32 位窗口服务器上发布我的 .net 网站。我正在设计asp.net 4.0站点，数据库（oracle）服务器是64位window server 2003，开发服务器是window server 2003 64位。我在 64 位开发服务器上遇到了各种不同的问题，例如拥有两个不同的程序文件夹、安装 Oracle 数据提供程序以及配置带有首页扩展的 IIS 的问题。

> 我可以在 32 位开发服务器 2003 上发布我的网站并将数据库服务器 2003 保留在 64 位上吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T05:11:04.193

让您的 Web 服务器为 32 位而您的 sql 服务器为 64 位应该不会造成问题。也就是说，只要您的 Web 服务器进程不消耗太多内存。通常，Web 服务器和中间层相当薄，而 sql 服务器在消耗内存方面更加激进（尽可能缓存）。

它将影响多少可寻址空间：

[http://en.wikipedia.org/wiki/32bit](http://en.wikipedia.org/wiki/32bit)

> 32 位内存地址可直接访问 4 GB 字节可寻址内存

也就是说，只要你有一个支持 64 位的处理器（现在大多数都是这样），并且你所依赖的所有应用程序和驱动程序都能够在 64 位操作系统上运行，那么没有太多理由不运行 64 位操作系统. .net 堆栈和您在 .net 中编写的所有内容都可以在 .net 上正常运行 - 它可以按需编译为 IL 和 JIT 为 32/64 位二进制文​​件。检查您的项目构建/编译选项以确保您不强制使用 32 位并检查 IIS 中的应用程序池设置。最后，确保您没有加载任何本机 IIS ISAPI 扩展等...有点不匹配。

您的 Web 服务器和 sql 服务器在不同的机器上运行，并且在不同的进程中可能通过套接字之类的东西通过网络进行通信，因此每个人都不知道对方有多少可寻址内存。每个都是一个黑匣子，有一个商定的网络协议。

# sikuli - 如何使用 Sikuli 跟踪应用程序的安装状态

> ID：12418448
> 
> 赞同：0
> 
> 时间：2012-09-14T05:06:48.833
> 
> 标签：sikuli

我正在使用 Sikuli 自动在 Mac 上安装下载的应用程序的过程。安装包括一个也被安装的附加组件。 *例如*，在安装 Adob​​e Reader 时，McAfee Security Scan 作为插件安装：

![在此处输入图像描述](../Images/bbe90384501e2b1666a965fca7159bc1.png)

如何单独跟踪两个安装的状态？

如果 Sikuli 无法做到这一点，请建议我可以做到这一点的任何其他方式。

# python - 使用 HTML.py 模块在 python 中为表格行着色

> ID：12418449
> 
> 赞同：2
> 
> 时间：2012-09-14T05:06:51.780
> 
> 标签：python

```
htmlcode=HTML.table(table_data,header_row=['Check','Setup','status','Logs','Comment'],
            col_width=['30%','20%','20%','10%','30%']) 
```

在这里，我想用灰色为表格标题行着色。作为该语言的初学者，我无法弄清楚。我在这里使用 HTML.py 模块

我从[http://www.decalage.info/en/python/html](http://www.decalage.info/en/python/html)获得了这个模块， 所以请帮助为标题行着色。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T08:39:40.843

您可以通过使用 TableRow 对象而不是列表来为标题行指定背景颜色。例如：

`t = HTML.Table(header_row = HTML.TableRow(['x', 'square(x)', 'cube(x)'], bgcolor='yellow'))`

* * *

来源：模块页面上的评论之一：http: [//www.decalage.info/en/python/html](http://www.decalage.info/en/python/html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:46:25.213

看起来您无法通过任何简单的方式更改它们（仅允许每个单元格添加颜色更改）。我建议在一个带有一些 .th{background-color:orange;} 样式的 css 文件中链接，或者使用另一个更健壮的模块。

# c# - 如何设置 FTP 服务器进行测试？

> ID：12418455
> 
> 赞同：2
> 
> 时间：2012-09-14T05:07:56.827
> 
> 标签：c#, c#-4.0, ftp, c#-3.0, console-application

我已经编写了用于在 FTP 服务器上上传文件的代码。我没有要测试的服务器。

如何设置 FTP 服务器来测试应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:37:58.303

您也可以使用 IIS 服务器作为您的 FTP 服务器。

请参阅此链接以了解如何在 IIS 中设置 FTP 服务器

[http://technet.microsoft.com/en-us/library/cc732769(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc732769(v=ws.10).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T06:50:47.767

下载并安装像[FileZilla](http://filezilla-project.org/download.php?type=server)这样的 FTP 服务器应用程序。这将允许您设置测试应用程序所需的内容。

# android - 客户端发送了没有主机名的 HTTP/1.1 请求（请参阅 RFC2616 第 14.23 节） - 来自 Android

> ID：12418458
> 
> 赞同：1
> 
> 时间：2012-09-14T05:08:06.453
> 
> 标签：android, apache, httpurlconnection, hostname

我在 Apache 日志中看到了这一点。基本上，请求来自 Android Emulator，使用`HTTPUrlConnection`. 这是我的代码。

```
 URL url = new URL(strUrl);  
            Log.d(params[0],"UR");  

            conn = (HttpURLConnection) url.openConnection();
            conn.setRequestProperty("Authorization", "Basic " + Base64.encodeToString(toencode, Base64.DEFAULT));
            conn.setRequestProperty("Host", "www.domain.com");
            conn.setRequestProperty("User-Agent", "Mozilla/5.0 (Macintosh; U; PPC; en-US; rv:1.3.1)");
            conn.setRequestProperty("Accept-Charset", "UTF-8");
            conn.setRequestMethod("GET");

            conn.setConnectTimeout (30000) ; 
            conn.setDoOutput(true); 
            conn.setDoInput(true); 
            conn.connect();
            String data = conn.getInputStream().toString();
            return data; 
```

我正在发送用户代理标头以确保服务器没有过滤不可识别的用户代理。我使用 Wireshark 捕获了流量。请求似乎没问题。不知道还要寻找什么。花几个小时没有运气。

```
 GET Authenticate/ HTTP/1.1\r\n
 Host: www.domain.com\r\n
 User-Agent: Mozilla/5.0 (Macintosh; U; PPC; en-US; rv:1.3.1)\r\n
 Accept-Charset: UTF-8\r\n
 Connection: Keep-Alive\r\n
 Accept-Encoding: gzip\r\n
 \r\n 
```

来自服务器的响应：

```
 Request Version: HTTP/1.1
 Status Code: 400
 Response Phrase: Bad Request

 <h1>Bad Request</h1>\n
 <p>Your browser sent a request that this server could not understand.<br />\n 
```

并在 apache 日志中：

```
 client sent HTTP/1.1 request without hostname (see RFC2616 section 14.23) 
```

此时我觉得我需要回到 HttpClient 并尝试一下。我想我应该使用`HttpUrlConnection`，因为谷歌推荐它。但我没有运气`HttpURLConnection`。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T05:16:43.707

模拟器未正确发送 Host 标头。所以我收到了来自服务器的错误请求。Wireshark 帮我解决了这个问题。

# makefile - 在 GNU make 中获取文件夹的基本名称

> ID：12418468
> 
> 赞同：8
> 
> 时间：2012-09-14T05:09:35.773
> 
> 标签：makefile, gnu-make

似乎 GNU make 解释的 basename 函数与 bash 的 basename 不同。前者会去掉后缀，而后者也会去掉路径。如何在我的 makefile 中获取文件夹的基本名称？

另外，他们为什么要改变它？（我花了 20 分钟才找到错误的根源）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-30T05:13:29.667

我猜这个`basename(1)`命令有两个正交的功能——剥离足够，剥离前导目录部分——并且 GNU 使作者希望能够分别调用每个功能。当然，只有一个概念可以得到名称*basename*。

当然，在 makefile 中，能够将*foo/bar/baz.c*转换为*foo/bar/baz*是很有用的，这样您就可以在末尾添加一个新的后缀，以便在与源文件相同的目录中构造一个相关的文件名。

@ire_and_curses 回答说明上的评论`$(notdir $(CURDIR))`不足以满足您的目的，因为（作为目录）CURDIR 可能已指定为

```
CURDIR = /foo/bar/ 
```

并且`notdir`由于尾部斜杠而剥离了整个事物。为了允许以这种方式编写目录路径，您需要使用 eg 显式去除尾部斜杠`$(notdir $(CURDIR:%/=%))`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T06:07:50.780

是的，这很奇怪。[您可以通过链接notdir 和 basename](http://www.gnu.org/software/make/manual/html_node/File-Name-Functions.html)来获得您想要的行为：

```
$(notdir names...)
    Extracts all but the directory-part of each file name in names... For example,    
              $(notdir src/foo.c hacks)

    produces the result ‘foo.c hacks’. 

...

$(basename names...)
    Extracts all but the suffix of each file name in names. If the file name
    contains a period, the basename is everything starting up to (and not
    including) the last period... For example,

              $(basename src/foo.c src-1.0/bar hacks)

    produces the result ‘src/foo src-1.0/bar hacks’. 
```

因此，例如，您可以通过链接这样的函数来转换`/home/ari/src/helloworld.c`为：`helloworld.html`

```
SRC=/home/ari/src/helloworld.c
TARGET=$(addsuffix .html, $(notdir $(basename $(SRC)))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T08:07:39.920

你仍然可以使用 bash 的版本：

```
SHELL := /bin/bash
basename := $(shell basename /why/in/gods/name) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-24T01:17:33.083

怎么样`$(dir /path/to/file.txt)`？

[https://www.gnu.org/software/make/manual/html_node/File-Name-Functions.html](https://www.gnu.org/software/make/manual/html_node/File-Name-Functions.html)

# android - Android：登录应用程序后无法保持会话

> ID：12418471
> 
> 赞同：0
> 
> 时间：2012-09-14T05:10:24.080
> 
> 标签：android, http, session, android-webview

我正在尝试在其中打开一个 URL，`WebView`但我无法这样做，我认为这是因为未维护会话。我在活动中将用户名、密码和用户 ID 发送到服务器。这是代码..

```
public class ServiceActivity extends Activity {
private Button button_back;

private Button button_submit_user_pass;
private EditText edit_id_code;
private String contents;
private String format;
private String username;
private String password;
private String id;
public static HttpClient client;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.qr_code_view);

    edit_id_code = (EditText) findViewById(R.id.editText_id);

    button_back = (Button) findViewById(R.id.button_back);
    button_submit_user_pass = (Button) findViewById(R.id.button_submit_user_pass);

    Intent user_pass = getIntent();

    username = user_pass.getStringExtra("user");
    password = user_pass.getStringExtra("pass");

    button_submit_user_pass
            .setOnClickListener(user_pass_qr_submit_listener);
    button_back.setOnClickListener(back_listener);

}

private View.OnClickListener user_pass_qr_submit_listener = new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        try {
            id = edit_id_code.getText().toString();

            client = new DefaultHttpClient();
            HttpPost post1 = new HttpPost(
                    "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
            List<NameValuePair> nvp = new ArrayList<NameValuePair>();
            nvp.add(new BasicNameValuePair("uname", username));
            nvp.add(new BasicNameValuePair("password", password));
            nvp.add(new BasicNameValuePair("id", id));
            post1.setEntity(new UrlEncodedFormEntity(nvp));
            HttpResponse resp = client.execute(post1);
            String responseText = inputStreamTOString(
                    resp.getEntity().getContent()).toString();
            Log.i("response", responseText);
            int num = Integer.parseInt(responseText);

            if (num == 0) {
                Toast.makeText(getApplicationContext(),
                        "Response" + responseText, 0).show();
            } else if (num == 1) {
                Intent survey = new Intent(ServiceActivity.this,
                        WebViewActivity.class);
                startActivity(survey);
            }
        } catch (Exception e) {
            Log.e("error", "ERROR" + e);
        }

    }

};
private View.OnClickListener back_listener = new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
    }
};

private StringBuilder inputStreamTOString(InputStream is) {
    String line = "";
    StringBuilder total = new StringBuilder();

    // read response until the end
    try {
        BufferedReader rd = new BufferedReader(new InputStreamReader(is,
                "iso-8859-1"), 8);
        while ((line = rd.readLine()) != null) {
            total.append(line);

        }
    } catch (Exception e) {
        // TODO: handle exception
    }
    return total;

}
} 
```

在此之后，如果来自服务器端的响应为“1”，我将打开一个新活动，在该活动中我需要在`WebView`代码中显示用户的内容

```
public class WebViewActivity extends Activity{
private WebView web;
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.web_view);

    web = (WebView) findViewById(R.id.webView);

    web.getSettings().setJavaScriptEnabled(true);

    web.loadUrl("xxxxxxxxxxxxxxxxxxxxxxxxxxxx");
}

} 
```

但我无法加载与用户对应的 URL，我在 webviewactivity 上收到 php 错误，那是因为我无法维护已登录用户的会话。请建议我一些解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T08:59:34.230

您需要做的是保存 PHP 使用的 cookie，以便在您发出的 post 请求返回时跟踪您的会话，并将其用于以下请求。有几种方法可以做到这一点，具体取决于您如何执行发布请求。

此答案描述了如何完成 cookie 处理：[https ://stackoverflow.com/a/687453/1525300](https://stackoverflow.com/a/687453/1525300)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:18:37.867

尝试使用 SharedPreferences 为您的应用程序保持会话。

为了节省价值。

```
SharedPreferences prefs;
prefs = PreferenceManager.getDefaultSharedPreferences(this);
Editor editor = prefs.edit();
editor.putString("key", value);
editor.commit(); 
```

在其他活动中检索

```
SharedPreferences prefs;
prefs = PreferenceManager.getDefaultSharedPreferences(this);
String variable = prefs.getString("key","default value"); 
```

# c# - 用于获得颜色变化的振动效果的组件

> ID：12418472
> 
> 赞同：0
> 
> 时间：2012-09-14T05:10:34.867
> 
> 标签：c#, animation, microsoft-metro

今天我正在设计一个地铁应用程序中的吉他应用程序。我需要为吉他品创建一个组件。

![在此处输入图像描述](../Images/3cf5423128eed86c4f898e8ebcc2f21f.png)

请问，有没有人知道如何实现它？感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:15:10.470

据我了解，您是在问如何为字符串创建振动视觉效果。

基本思想是模拟运动，就像真正的弦运动一样。实现这种振动视觉效果的最简单方法可能是在弦上创建运动（方向）模糊，方向垂直于弦。

这是我使用 After Effects（动画软件）做的一个例子： ![在此处输入图像描述](../Images/17a4df9ccf0a81626dd3781bcf168b4a.png)

在第一种情况下，我在字符串（矩形）上使用了简单的方向模糊。在第二种情况下，我添加了具有相同矩形/字符串的第二层，但模糊量较小，我认为这会产生更好的动画。

现在明显的问题是如何在 Metro/C# 中做到这一点？我对这个框架不熟悉，所以我不能告诉你确切的方法，但我可以告诉你两种方法：

1.  AFAIK，metro 使用 WPF，而 WPF 具有您可以使用的模糊效果，尽管我怀疑它可以是定向的。但是，如果您的字符串足够简单，并且边缘在屏幕上不可见，则它可以正常工作。

2.  困难的方法：逐像素生成模糊。为此，您需要知道每个像素都会与其周围的像素混合。定向模糊只会与该方向的像素混合，而普通模糊会与其周围的所有像素混合。半径表示您与多少像素混合。

    混合意味着计算颜色（颜色分量）之间的加权平均值，离当前像素越远，权重越小。

    如果你想走这条路，这些维基百科文章是很好的阅读：[Box blur](http://en.wikipedia.org/wiki/Box_blur)，[Gaussian blur](http://en.wikipedia.org/wiki/Gaussian_blur)，你可以在这里找到公式，想法。

# sql-server - ms sql中oracle的等效锁是什么

> ID：12418477
> 
> 赞同：1
> 
> 时间：2012-09-14T05:10:49.597
> 
> 标签：sql-server, locking

在 Oracle 中是：

```
LOCK TABLE employees IN EXCLUSIVE MODE WAIT 10; 
```

在员工表上，我必须先删除然后插入。

```
LOCK TABLE employees ..
DELETE FROM employees ..
INSERT INTO employees ... 
```

ms sql server中LOCK的等效语句是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T05:14:01.970

```
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE 

BEGIN TRANSACTION

DELETE FROM employees .. 
INSERT INTO employees ... 

COMMIT TRANSACTION 
```

delete 语句要么成功并以独占方式锁定表，要么失败（如果锁已被另一个连接持有）。

顺便说一句，尝试避免这种极端的独占锁定是一种很好的做法。您可能可以使用其他不太激进的隔离级别来获得相同的结果。

请参阅[设置事务隔离级别](http://msdn.microsoft.com/en-us/library/ms173763%28v=sql.105%29.aspx)

# php - php imap_search 过滤器

> ID：12418485
> 
> 赞同：0
> 
> 时间：2012-09-14T05:11:34.567
> 
> 标签：php, email, imap, codeigniter-2

我需要通过过滤器`FROM`地址过滤来自收件箱的电子邮件。

我所拥有的是特定用户的电子邮件地址，`user@example.com`而我在 MAIL 等上没有他的姓名/昵称/联系人姓名

如何使用他的电子邮件地址从该用户获取所有邮件？

我试过

```
$some   = imap_search($con, 'FROM "user@example.com"', SE_UID);         
var_dump($some); 
```

它返回`FALSE`

但是以下一个有效

```
 $some   = imap_search($con, 'FROM "user"', SE_UID);            
    var_dump($some); 
```

请注意，这`user`是他的名字，但我需要使用实际的电子邮件地址对其进行过滤，

请帮忙

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:56:00.173

删除包裹电子邮件地址的双引号。

```
$some   = imap_search($con, 'FROM user@example.com', SE_UID) 
```

# android - 在 listview 中使用 setTag 来存储特定的 item 数据

> ID：12418489
> 
> 赞同：0
> 
> 时间：2012-09-14T05:11:56.930
> 
> 标签：android

我将 listview 与我的自定义 baseAdapter 一起使用。我想知道 setTag 和 getTag 的正确用法。

当我在 getView 函数中时，我正在执行 convertView.setTag(specificId)。因此，如果有人点击一个项目，我会执行一个 getTag，这将是被点击项目的特定 ID，因此我可以使用该 ID 来做更多的事情。为每个项目在该标签中存储自定义数据的排序

这是使用 setTag 的正确方法吗？如果没有，那么我需要一种方法来识别单击的项目。位置不会那么有用，否则我需要一个静态数组，其中包含位置和特定 ID 之间的映射（我发现它效率低下）

如果我错了请纠正我谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:06:36.823

实际上你不需要使用 setTag() 和 getTag()，如果你只关心 ListView 项目的点击。

使用`ListView.setOnItemClickListener`将做的位置参数。

既然你说：

```
Position won't be that helpful 
```

你的意思是`position`getView（）中的参数？因为您单击 ListView 项目的子视图（如文本/按钮）。

如果是，那么这`position`不能用于获取单击项的数据，因为它是新创建项的位置，而不是单击项的位置。

这样，您就可以正确地使用标签来识别您单击的确切 ListView 项目的子视图。

解决此问题的另一种方法是：

使用以下方法获取您单击的子视图的父视图位置（列表中的项目位置）：

```
int clickedItemPosition = yourListView.getPositionForView((View) childView.getParent()); 
```

# hlsl - 检查是否设置了 HLSL 采样器

> ID：12418490
> 
> 赞同：2
> 
> 时间：2012-09-14T05:12:24.267
> 
> 标签：hlsl

是否可以确定采样器是否实际附加到纹理单元而不是简单地未设置？

```
sampler2D mySampler : register(S0);
...
if(mySampler == 0)
  value = const_value;
else
  value = tex2D(mySampler, uv); 
```

这是针对 WPF 效果 (PS 3.0) 的，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:31:16.197

Afaik 没有直接的方法来检查这一点。在我的经验中，未初始化的着色器常量可能表现得非常奇怪，例如，一个系统用未初始化的纹理绘制了我的场景，因为 tex2D 只返回黑色。但在另一个系统上，整个场景看起来很糟糕，因为它返回的值不是 0。

所以你必须从你的其他代码中处理这种情况。或者带有一个由你自己设置的全局变量：

```
bool mySamplerisset;
sampler2D mySampler : register(S0);
... 
if (mySamplerisset)
  value = tex2D(mySampler, uv);
else
  value = const_value; 
```

或者为了获得最大性能，避免分支，使用预处理器指令，所以你编译你的着色器的两个版本（一次使用#define，一次不使用）并使用适当的：

```
#define SAMPLERISSET
sampler2D mySampler : register(S0);
... 
#if defined(SAMPLERISSET)
  value = tex2D(mySampler, uv);
#elseif
  value = const_value;
#endif 
```

# wpf - 为什么 Prism 鼓励使用服务定位器反模式？

> ID：12418494
> 
> 赞同：1
> 
> 时间：2012-09-14T05:12:54.593
> 
> 标签：wpf, design-patterns, prism, anti-patterns, prism-4

当我从 MVC 转向使用 Prism 做一些 WPF 时，我买了一本 Prism 书，我再次震惊地看到仍然是已知的反模式的服务定位器。我已经阅读了 .NET 中的依赖注入等书籍，Mark Seemann 彻底了解了为什么服务定位器是一种反模式。

我只是想帮助成为最佳模式和实践的传播者，并且想知道谁没有得到这些模式中的一些实际上是坏的备忘录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T05:36:06.797

科学与艺术之间当然存在平衡。发现模式不是故意发明的。一些语言使它们自己受制于更多的软件工程原则。这当然有很大的讨论空间。我认为您质疑某些东西的使用是正确的，但我不确定您是否会找到答案，因为您提到的另一个问题表明“非常”知名人士似乎彼此不同意。

我需要对需要的事项以及使用它的上下文进行更多说明。总的来说，我认为应该分析这些“反模式”的使用。我读过的 Singleton 很糟糕，但我们都知道它是有目的的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T07:48:13.090

首先要澄清事实：Prism 不鼓励使用 ServiceLocator。这使得这个问题没有实际意义。也许您想将问题重命名为“为什么棱镜书鼓励......”这可能是真的，也可能不是，因为我没有读过它。

Prism 建立在 Unity IoC 之上，Unity IoC 是 Microsoft 的 IoC 容器实现。如果你用它注册你的类型，它会正确地构建它们。互联网上有很多文章展示了如何做到这一点。

现在，肥皂盒部分：

我认为没有最佳实践之类的东西，因为任何“最佳实践”在某些情况下都没有意义。例如，当我看到一个单身人士时，它总是会响起警报，但在某些情况下拥有它是可以的。即使是“goto”有时也是合理的（哦，我的上帝！他刚刚说了什么？！？！）

现在，我对 Prism 了解不多，但是 IMO，服务定位器非常有意义，特别是如果它在框架内使用，因为它可以让开发人员有更多的设计和实现选择，这应该是开发人员的电话.

要真正了解这是否是一个错误的决定（而且很可能是），看看使用 Prism 的开发人员由于涉嫌使用 ServiceLocator 而不能做的事情会很有趣，否则如果 Prism 使用 DI，这将是可能的。

# java - Java中的服务器和客户端连接

> ID：12418501
> 
> 赞同：0
> 
> 时间：2012-09-14T05:13:39.217
> 
> 标签：java, java-server

这是一个示例 TCP/IP 服务器和客户端程序

**TCP服务器**

```
import java.io.*;
import java.net.*;

    class TCPServer
    {
       public static void main(String argv[]) throws Exception
          {
             String clientSentence;
             String capitalizedSentence;
             ServerSocket welcomeSocket = new ServerSocket(6789);

             while(true)
             {
                Socket connectionSocket = welcomeSocket.accept();
                BufferedReader inFromClient =
                   new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));
                DataOutputStream outToClient = new DataOutputStream(connectionSocket.getOutputStream());
                clientSentence = inFromClient.readLine();
                System.out.println("Received: " + clientSentence);
                capitalizedSentence = clientSentence.toUpperCase() + '\n';
                outToClient.writeBytes(capitalizedSentence);
             }
          }
    } 
```

**TCP客户端**

```
import java.io.*;
import java.net.*;

class TCPClient
{
 public static void main(String argv[]) throws Exception
 {
  String sentence;
  String modifiedSentence;
  BufferedReader inFromUser = new BufferedReader( new InputStreamReader(System.in));
  Socket clientSocket = new Socket("localhost", 6789);
  DataOutputStream outToServer = new DataOutputStream(clientSocket.getOutputStream());
  BufferedReader inFromServer = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
  sentence = inFromUser.readLine();
  outToServer.writeBytes(sentence + '\n');
  modifiedSentence = inFromServer.readLine();
  System.out.println("FROM SERVER: " + modifiedSentence);
  clientSocket.close();
 }
} 
```

在该客户端中，我需要将文本 hi 发送到服务器。一旦服务器从客户端读取文本 Hi 它显示客户端 ID 和文本现在是活动的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:21:11.693

使用[socket.getInetAddress()](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html#getInetAddress%28%29)获取包含 IP 地址的[InetAddress](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/InetAddress.html)对象，然后调用[InetAddress.getHostAddress()](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/InetAddress.html#getHostAddress%28%29)以将其作为字符串获取。

# python - 测试失败后出现很多IEDriverServer.exe

> ID：12418502
> 
> 赞同：2
> 
> 时间：2012-09-14T05:13:49.900
> 
> 标签：python, internet-explorer, selenium, webdriver

我在 Internet Explorer 8.0 上运行 selenium 测试时遇到问题。关于詹金斯。测试失败，然后出现很多IEDriverServer.exe。

在日志中：“无法建立连接，因为目标机器主动拒绝它”

什么是问题？

截图链接：[很多 IEDriverServer](http://www.screencast.com/t/3k7qzWdy2t)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T10:54:27.747

是的，之前有完全一样的情况，应该像 aneroid 所说的那样做。

在您的 TestCleanUp() 方法中，应该调用 driver.Quit()。然后，如果您的测试失败或在测试主体期间捕获到异常，测试仍然会正确退出。

```
[TestClass]
public class IEDriverTest {

    private IWebDriver driver;

    [TestInitialize]
    public void Initialize() {
        driver = new InternetExplorerDriver();
    }

    [TestMethod]
    public void Test() {
        // test steps
    }

    [TestCleanup]
    public void CleanupTests() {
        driver.Quit();
    }
} 
```

但是，我发现在一些极少数情况下，当在 TestInitialize 期间（使用 Visual Studio 测试框架）捕获异常时，一些旧版本的 IEDriverServer 会挂起。然后您可能需要一些特殊处理，它会捕获异常并手动调用 driver.Quit()。

如果 driver.Quit() 不能以某种方式工作。您也可以尝试手动杀死 ie 和 IEDriverServer 进程。**我强烈建议您避免这样做。**

```
[TestCleanup]
public void Cleanup() {
    KillProcessByName("iexplore");
    KillProcessByName("IEDriverServer");
}

private void KillProcessByName(string processName) {
    foreach (Process process in Process.GetProcessesByName(processName)) {
        process.Kill();
    }
} 
```

# gcc - 是否可以运行 TDM64-GCC 编译器以使用 code::blocks 运行

> ID：12418504
> 
> 赞同：0
> 
> 时间：2012-09-14T05:13:55.007
> 
> 标签：gcc, codeblocks, tdm-mingw

我正在尝试使用 64 位 TDM-GCC 和 Code::Blocks IDE 构建 64 位应用程序。我无法配置的是编译器和 IDE 的组合。

我看过 IDE wiki 和 TDM wiki；但没有我需要的细节。

有没有直接的方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T01:26:02.037

这是可能的，因为我自己亲自完成了，并且在最终从 Code::Blocks 转向 Codelite 之前使用了该开发配置一年的大部分时间（它们是类似的 IDE，但 Codelite 对 Obj-C 更友好盒子外面）。

要设置 Code::Blocks，您所要做的就是进入构建设置并将编译器 bin 位置指向您的 TDM-GCC bin 文件夹。我认为您需要做的唯一另一件事是确保 Code::Blocks 尝试运行`mingw32-make.exe`而不是`make.exe`默认情况下查找的 . 这是在同一个设置窗口中。由 Code::Blocks 运行的所有其他程序应该已经具有正确的名称。

如果您仍然遇到问题，您可以在尝试构建时发布确切的编译器输出吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-15T21:00:23.027

我在 Windows 10 64 位操作系统上使用 Code::Blocks 64 位

尝试这个：

将 TDM-GCC 64 位版本放在您用于 Code::Blocks 的目录（驱动器）中。我都在 C:/ 下（这是正常的，除非你使用另一个驱动器）。打开 CB 并单击 CB 中的 TDM（管理窗口左侧）。

现在转到**设置>编译器>工具链**可执行文件选项卡，然后单击编译器安装目录中的自动检测。您可能需要在下面的某些框中打勾。 之后确保在关闭 CB 之前**保存所有更改。**祝你好运。

# ios - PDF阅读器，细白线

> ID：12418506
> 
> 赞同：0
> 
> 时间：2012-09-14T05:14:03.017
> 
> 标签：ios, pdf

我的 PDF 阅读器显示像这样的细白线![在此处输入图像描述](../Images/fad589ba6b3d288cb1f8fbd3a9feff73.png)

但这个文件在 acrobat 阅读器上工作正常，没有白线，这是我处理我的 pdf 文件的方式

```
CGRect contentRect = CGRectMake(0, 0, width, height);
CGContextRef context = CGBitmapContextCreate(NULL, 
                                             width, 
                                             height, 
                                             8,                     /* bits per component*/
                                             width * 4,     /* bytes per row */
                                             colorSpace, 
                                             kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);

CGColorSpaceRelease(colorSpace);
CGContextSaveGState(context);
CGContextClipToRect(context, CGRectMake(0, 0, width, height));

// First fill the background with white.
CGContextSetRGBFillColor(context, 1.0,1.0,1.0,1.0);
CGContextFillRect(context,contentRect);
CGContextSetInterpolationQuality(context, kCGInterpolationHigh);
CGContextSetRenderingIntent(context, kCGRenderingIntentDefault);

CGContextDrawPDFPage(context,page);
CGImageRef image = CGBitmapContextCreateImage(context);
CGContextRestoreGState(context);
CGContextRelease(context); 
```

我应该怎么做才能解决这个问题，更新我的代码或对我的 PDF 文件做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T06:24:17.380

```
-(void)openPDfFile:(CGPDFDocumentRef)pdf 
```

{
// 获取我们将要绘制的 PDF 页面 page = CGPDFDocumentGetPage(pdf, pageNumer); CGPDFPageRetain(page);

```
// determine the size of the PDF page
CGRect pageRect = CGPDFPageGetBoxRect(page, kCGPDFCropBox);
pdfScale = self.frame.size.height/pageRect.size.height;
pageRect.size = CGSizeMake(pageRect.size.width*pdfScale, pageRect.size.height*pdfScale);

// Create a low res image representation of the PDF page to display before the TiledPDFView
// renders its content.
UIGraphicsBeginImageContext(pageRect.size);

CGContextRef context = UIGraphicsGetCurrentContext();

// First fill the background with white.
CGContextSetRGBFillColor(context, 1.0,1.0,1.0,1.0);
CGContextFillRect(context,pageRect);

CGContextSaveGState(context);
// Flip the context so that the PDF page is rendered
// right side up.
CGContextTranslateCTM(context, 0.0, pageRect.size.height);
CGContextScaleCTM(context, 1.0, -1.0);

// Scale the context so that the PDF page is rendered 
// at the correct size for the zoom level.
CGContextScaleCTM(context, pdfScale,pdfScale);  
CGContextDrawPDFPage(context, page);
CGContextRestoreGState(context);

UIImage *backgroundImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

backgroundImageView = [[UIImageView alloc] initWithImage:backgroundImage];
backgroundImageView.frame = pageRect;
backgroundImageView.contentMode = UIViewContentModeScaleAspectFit;
[self addSubview:backgroundImageView];
[self sendSubviewToBack:backgroundImageView];

[self createPage:pageRect]; 
```

}

-(void)createPage:(CGRect)pageRect { // 根据 PDF 页面的大小创建 TiledPDFView 并缩放以适应视图。pdfView = [[TiledPDFView alloc] initWithFrame:pageRect andScale:pdfScale]; [pdfView setPage:page];

```
self.frame = pdfView.frame;

[self addSubview:pdfView]; 
```

}

试试这些方法！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-08T10:31:11.803

这对我来说确实有帮助

```
CGContextSetInterpolationQuality(context, kCGInterpolationHigh);
CGContextSetShouldAntialias(context, NO); // solves the problem with white lines 
```

# ruby-on-rails-3 - Rails：向标准库类（如 DateTime）添加方法的自然位置在哪里？

> ID：12418508
> 
> 赞同：0
> 
> 时间：2012-09-14T05:14:18.523
> 
> 标签：ruby-on-rails-3

我需要检查一个`DateTime`对象是否在特定日期。实际上，日期`Dec 31 9999`在我们的一个遗留系统数据中被用作无穷大值。

将年份与 9999 进行比较，`some_date.year == 9999`就足以做到这一点，但我不喜欢到处乱扔。

我通常会尽量避免猴子修补，但在这种情况下，它看起来更清晰。

现在，在 Rails 中定义这样一个补丁的自然位置在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:19:47.623

通常，您会将这样的补丁放在下面`lib/`并从初始化程序中要求它。

# tomcat - 如何使用tomcat的catlina api访问会话管理

> ID：12418509
> 
> 赞同：3
> 
> 时间：2012-09-14T05:14:18.617
> 
> 标签：tomcat, servlets, java-ee-6, tomcat7

如何使用tomcat的catlina api访问会话管理。我需要从我的代码中使其他用户的会话无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T10:31:52.507

`javax.servlet`出于显而易见的原因，我个人不喜欢绑定到 Tomcat 包并尽可能多地使用API。您可以通过创建会话侦听器并将所有会话保存在 中来完成您的任务`WeakHashMap`，就像这样

```
<!-- your webapp's web.xml -->
<listener>
  <listener-class>path.to.SessionListener</listener-class>
</listener>

class SessionListener implements HttpSessionListener {
   private static final Map<String, HttpSession> sessions = Collections.synchronizedMap(new WeakHashMap<String, HttpSession>());

   public void sessionCreated(HttpSessionEvent event) {
      sessions.put(event.getSession().getId(), event.getSession());
   }

   public void sessionDestroyed(HttpSessionEvent event) {
      sessions.remove(event.getSession().getId());
   }
} 
```

其余的就像添加另一种方法来遍历所有会话并使它们无效一样简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:23:01.987

对特定用户使用 session.invalidate 方法，例如 .

如果您在 session.set 属性中设置用户，则从访问器方法中获取该特定方法。

使用 pojo bean 来访问它。

在使会话检查无效之前，它必须为真或有效。

# sql - 将嵌套的 xml 解析为非规范化表

> ID：12418517
> 
> 赞同：5
> 
> 时间：2012-09-14T05:15:20.807
> 
> 标签：sql, sql-server-2008, xpath

如何将 sql server 中的嵌套 xml 解析为单个表。考虑到每个客户的 RowGuid 都是独一无二的

例如

我想在一个表中解析这个 xml，该表将被非规范化并包含一对多的关系。考虑到每个嵌套都有业务主键。

```
<Customers>
    <Customer>
         <Type xsi:nil="true" />
          <RowGuid>FEFF32BC-1DAB-4F8A-80F0-CFE293C0BEC4</RowGuid>
          <AccountId>0</AccountId>
          <AccountNumber>bdb8eb51-d</AccountNumber>
          <AccountTransactions>
            <AccountTransaction>
                <PaymentDate>2012-09-13 22:19:58</PaymentDate>
                <Balance>500</Balance>
            </AccountTransaction>
            <AccountTransaction>
                <PaymentDate>2012-09-13 22:19:58</PaymentDate>
                <Balance>500</Balance>
            </AccountTransaction>
         </AccountTransactions>
        <Addresses>
             <Address>
                    <city>DELHI</city>
             </Address>
             <Address>
                    <city>MUMBAI</city>
             </Address>
         </Addresses>
      </Customer>
    <Customer>
         <Type xsi:nil="true" />
          <RowGuid>C3D4772E-1DAB-4F8A-80F0-CFE293C0BEC4</RowGuid>
          <AccountId>0</AccountId>
          <AccountNumber>bdb8eb51-d</AccountNumber>
          <AccountTransactions>
            <AccountTransaction>
                <PaymentDate>2012-09-13 22:19:58</PaymentDate>
                <Balance>500</Balance>
            </AccountTransaction>
            <AccountTransaction>
                <PaymentDate>2012-09-13 22:19:58</PaymentDate>
                <Balance>500</Balance>
            </AccountTransaction>
         </AccountTransactions>
      </Customer> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T06:29:31.260

如果不需要对表进行规范化，您可以执行`LEFT JOIN`. 我还为`Customers`元素添加了一个命名空间，因为`xsi:nil="true"`. 尝试一下：

```
DECLARE @xml XML =
'<Customers xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <Customer>
         <Type xsi:nil="true" />
          <RowGuid>FEFF32BC-1DAB-4F8A-80F0-CFE293C0BEC4</RowGuid>
          <AccountId>0</AccountId>
          <AccountNumber>bdb8eb51-d</AccountNumber>
          <AccountTransactions>
            <AccountTransaction>
                <PaymentDate>2012-09-13 22:19:58</PaymentDate>
                <Balance>500</Balance>
            </AccountTransaction>
            <AccountTransaction>
                <PaymentDate>2012-09-13 22:19:58</PaymentDate>
                <Balance>500</Balance>
            </AccountTransaction>
         </AccountTransactions>
        <Addresses>
             <Address>
                    <city>DELHI</city>
             </Address>
             <Address>
                    <city>MUMBAI</city>
             </Address>
         </Addresses>
      </Customer>
    <Customer>
         <Type xsi:nil="true" />
          <RowGuid>C3D4772E-1DAB-4F8A-80F0-CFE293C0BEC4</RowGuid>
          <AccountId>0</AccountId>
          <AccountNumber>bdb8eb51-d</AccountNumber>
          <AccountTransactions>
            <AccountTransaction>
                <PaymentDate>2012-09-13 22:19:58</PaymentDate>
                <Balance>500</Balance>
            </AccountTransaction>
            <AccountTransaction>
                <PaymentDate>2012-09-13 22:19:58</PaymentDate>
                <Balance>500</Balance>
            </AccountTransaction>
         </AccountTransactions>
      </Customer>
</Customers>'

SELECT  a.[Type],
        a.RowGuid,
        a.AccountId,
        a.AccountNumber,
        b.PaymentDate,
        b.Balance,
        c.[Address]
FROM    
(
    SELECT  
            Customer.value('Type[1]', 'VARCHAR(500)') [Type],
            Customer.value('RowGuid[1]', 'UNIQUEIDENTIFIER') RowGuid,
            Customer.value('AccountId[1]', 'INT') AccountId,
            Customer.value('AccountNumber[1]', 'VARCHAR(500)') AccountNumber
    FROM    @xml.nodes('/Customers/Customer') tbl(Customer)
) a
LEFT JOIN
(
    SELECT  
            AccountTransaction.value('PaymentDate[1]', 'DATETIME') PaymentDate,
            AccountTransaction.value('Balance[1]', 'DECIMAL(20, 2)') Balance,
            AccountTransaction.value('../../RowGuid[1]', 'UNIQUEIDENTIFIER') RowGuid
    FROM    @xml.nodes('/Customers/Customer/AccountTransactions/AccountTransaction') tbl(AccountTransaction)
)   b ON
    a.RowGuid = b.RowGuid
LEFT JOIN
(
    SELECT  
            Address.value('city[1]', 'VARCHAR(500)') [Address],
            Address.value('../../RowGuid[1]', 'UNIQUEIDENTIFIER') RowGuid
    FROM    @xml.nodes('/Customers/Customer/Addresses/Address') tbl(Address)        
)   c ON
    a.RowGuid = c.RowGuid 
```

**更新：**

由于这个查询的第一个版本（使用`XML`数据类型方法的那个）的查询成本很高，我创建了另一个版本，它使用`OPENXML`而不是`nodes`和`value`方法。有利于`OPENXML`方法的成本差异很大：

```
DECLARE @handle INT

CREATE TABLE #Customer (Type VARCHAR(500),
    RowGuid UNIQUEIDENTIFIER,
    AccountId INT,
    AccountNumber VARCHAR(500)
)

CREATE TABLE #AccountTransaction (
    PaymentDate DATETIME,
    Balance DECIMAL(20, 2),
    RowGuid UNIQUEIDENTIFIER
)

CREATE TABLE #Address (
    City VARCHAR(500),
    RowGuid UNIQUEIDENTIFIER
)

EXEC sp_xml_preparedocument @handle OUTPUT, @xml

INSERT  #Customer
SELECT  *
FROM    OPENXML(@handle, '/Customers/Customer', 2)
WITH    (
        Type VARCHAR(500),
        RowGuid UNIQUEIDENTIFIER,
        AccountId INT,
        AccountNumber VARCHAR(500)
)

INSERT  #AccountTransaction
SELECT  *
FROM    OPENXML(@handle, '/Customers/Customer/AccountTransactions/AccountTransaction', 2)
WITH    (
        PaymentDate DATETIME,
        Balance DECIMAL(20, 2),
        RowGuid UNIQUEIDENTIFIER '../../RowGuid[1]'
)

INSERT  #Address
SELECT  *
FROM    OPENXML(@handle, '/Customers/Customer/Addresses/Address', 2)
WITH    (
        city VARCHAR(500),
        RowGuid UNIQUEIDENTIFIER '../../RowGuid[1]'
)

SELECT  a.*,
        b.PaymentDate,
        b.Balance,
        c.City
FROM    #Customer a
LEFT    JOIN #AccountTransaction b ON
        b.RowGuid = a.RowGuid
LEFT    JOIN #Address c ON
        c.RowGuid = a.RowGuid

EXEC sp_xml_removedocument @handle 
```

# java - 如何使用 Httpclient 4.x 发送邮件

> ID：12418528
> 
> 赞同：1
> 
> 时间：2012-09-14T05:17:11.477
> 
> 标签：java, outlook, apache-httpclient-4.x

我正在使用 java HttpClient 4.x 为 Outlook 连接器创建一个库。我必须从我的应用程序发送邮件。我可以将消息放在草稿文件夹中。但我怎样才能发送给收件人。这是我尝试过的代码`

```
 String strTempURI = "https://" + serverName + "/exchange/" + Username
            + "/drafts/" +strSubject + "eml";
    String strSubURI = "https://" + serverName + "/exchange/" + Username
            + "/##DavMailSubmissionURI##/";

    URI uri=new URI(strTempURI);
    HttpPut put = new HttpPut(uri);
    ByteArrayEntity entity = new ByteArrayEntity(byteout1);
    DefaultHttpClient client =new DefaultHttpClient();
    HttpContext localContext = new BasicHttpContext();
    CredentialsProvider credsProvider = new BasicCredentialsProvider();
    credsProvider.setCredentials(new AuthScope(AuthScope.ANY_HOST,    
                  AuthScope.ANY_PORT,AuthScope.ANY_REALM, AuthPolicy.BASIC),
                new UsernamePasswordCredentials(Username, password));

   client.setCredentialsProvider(credsProvider);
   put.setHeader("Content-Type", "message/rfc822");
   put.setEntity(entity);
   localContext.setAttribute(ClientContext.CREDS_PROVIDER, credsProvider);
   HttpResponse response=client.execute(put,localContext);
   HttpEntity resEntity = response.getEntity();
   String result = EntityUtils.toString(resEntity); 
```

“byteout1”包含邮件内容。在 client.execute() 之后，我想将内容移动到“strSubURI”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:00:17.207

你需要 WebDAV 支持来执行 MOVE ，检查[Jackrabbit](http://jackrabbit.apache.org/jackrabbit-webdav-library.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T06:14:57.340

这是我的问题的答案。juts 创建一个 MoveMethod(sourceurl,desturl) 使用

```
String strTempURI = "https://" + serverName + "/exchange/" + Username
        + "/drafts/" +strSubject + "eml";
String strSubURI = "https://" + serverName + "/exchange/" + Username
        + "/##DavMailSubmissionURI##/";

URI uri=new URI(strTempURI);
HttpPut put = new HttpPut(uri);
ByteArrayEntity entity = new ByteArrayEntity(byteout1);
DefaultHttpClient client =new DefaultHttpClient();
HttpContext localContext = new BasicHttpContext();
CredentialsProvider credsProvider = new BasicCredentialsProvider();
credsProvider.setCredentials(new AuthScope(AuthScope.ANY_HOST,    
              AuthScope.ANY_PORT,AuthScope.ANY_REALM, AuthPolicy.BASIC),
            new UsernamePasswordCredentials(Username, password));

client.setCredentialsProvider(credsProvider);
put.setHeader("Content-Type", "message/rfc822");
put.setEntity(entity);
localContext.setAttribute(ClientContext.CREDS_PROVIDER, credsProvider);
HttpResponse response=client.execute(put,localContext);
HttpEntity resEntity = response.getEntity();
String result = EntityUtils.toString(resEntity);

 MoveMethod move = new MoveMethod(uri.toString(), strSubURI);
        move.setHeader("Destination", strSubURI);
        HttpResponse status = client.execute(move); 
```

# .htaccess - htaccess rewrite - 将 http 文件夹重写为 https 文件夹

> ID：12418535
> 
> 赞同：-2
> 
> 时间：2012-09-14T05:17:31.690
> 
> 标签：.htaccess, http, https

就像标题一样。我想将整个文件夹（在本例中为 /w1/）从 http 重定向到 https。如何重定向：[http](http://testdomain.com/system) **://testdomain.com/system/w1/**（以及所有包含该文件夹）到此：[https](https://testdomain.com/system) **://testdomain.com/system/w1/**（以及所有包含该文件夹）。因此，例如[http://testdomain.com/system/w1/w1_input.php](http://testdomain.com/system/w1/w1_input.php)将被重定向到**https://testdomain.com/system/w1/w1_input.php**

我试图使用这种规则：

```
RewriteCond %{HTTPS} !=on
RewriteRule ^/w1(.*)$ https://testdomain.com/system/w1/$1 [R=301,L] 
```

但这什么也没做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:20:11.983

不需要 .htaccess 和/或重写。只需在 http.conf 级别将 RedirectMatch 放入您的非 ssl 主机定义中。

```
<Host example.com:80>
   RedirectMatch 301 (.*) https://example.com$1
</Host> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T05:21:43.640

如果这些规则在 htaccess 文件中，则在通过重写引擎之前，前导斜杠会从 URI 中剥离，因此`^/w1`不会匹配任何内容。看起来您可能在`/system/`目录中的 htaccess 文件中有这些规则：

```
RewriteCond %{HTTPS} !on
RewriteRule ^w1/(.*)$ https://testdomain.com/system/w1/$1 [R=301,L] 
```

或者如果不是：

```
RewriteCond %{HTTPS} !on
RewriteRule ^system/w1/(.*)$ https://testdomain.com/system/w1/$1 [R=301,L] 
```

# c# - 鼠标右键单击事件不适用于使用 c# 的 winform 面板？

> ID：12418536
> 
> 赞同：1
> 
> 时间：2012-09-14T05:17:32.533
> 
> 标签：c#, winforms, panel

我正在尝试触发 a 的鼠标右键单击事件`Panel`并调用一个函数，但它没有触发。这是我的代码：

```
private void viewscreen_MouseClick(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Right)
    {
        generate_editpanel();
    }
} 
```

“视屏”是一个`Panel`. 我的设计师代码是：

```
// viewscreen
// 
this.viewscreen.BackColor = System.Drawing.SystemColors.ActiveCaptionText;
this.viewscreen.Location = new System.Drawing.Point(208, 16);
this.viewscreen.Name = "viewscreen";
this.viewscreen.Size = new System.Drawing.Size(370, 289);
this.viewscreen.TabIndex = 0;
this.viewscreen.MouseClick += 
    new System.Windows.Forms.MouseEventHandler(this.viewscreen_MouseClick); 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T06:08:10.237

面板中的视频对象必须覆盖面板的整个区域（停靠）。在这种情况下，不会触发面板事件，因为所有点击都将发生在视频对象上。
但是如果您仍然希望触发面板事件，您可以像这样修改表单设计器代码：

```
this.pictureBox1.MouseClick += new System.Windows.Forms.MouseEventHandler(this.pictureBox1_MouseClick);
this.pictureBox1.MouseClick += new System.Windows.Forms.MouseEventHandler(this.viewscreen_MouseClick); 
```

在这里，我在面板（viewscreen）中停靠了一个 PictureBox（pictureBox1）。现在在表单代码中，您可以像这样进行测试：

```
private void viewscreen_MouseClick(object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Right) 
        {
            MessageBox.Show(this, "Right Clicked on Panel");
        }            
    }
 private void pictureBox1_MouseClick(object sender, MouseEventArgs e)
    {
        MessageBox.Show(this, "Picture Clicked");
        //this.viewscreen_MouseClick(sender, e);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:34:57.697

在此处粘贴与 this.viewscreen 相关的完整代码 ....如果该面板上有任何其他控件，则这些控件将不允许鼠标单击面板。最顶层的控制事件将触发

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T07:18:13.750

代替 ...

```
private void viewscreen_MouseClick(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Right)
    {
        generate_editpanel();
    }
} 
```

使用这个...

```
private void viewscreen_MouseDown(object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Right)
        {
            generate_editpanel();
        }
    } 
```

为我工作

# javascript - 使用javascript的图像替换循环

> ID：12418538
> 
> 赞同：-1
> 
> 时间：2012-09-14T05:17:55.493
> 
> 标签：javascript, image

所以我正在学习 W3 上的图像替换技术，这就是我想要的：

1.  有一个狗的形象。

2.  当我点击这张图片时，这张图片将被一张猫的图片取代。

3.  但是，如果我再次单击此图像，它将再次被原本在那里的狗所取代。

4.  如果我再点击一次，猫就会代替狗。

5.  等等。

我该如何进行替换这两个图像的永久循环？

这是一个类似于我想要做的链接：

[http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_img_src](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_img_src)

在该示例中，如果您单击图像，它将替换图像一次。但是，如果您再次单击它，原始图像将不会替换它。

所以，是的，任何有关制作可以不断用新图像替换原始图像的有效算法的帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:28:20.500

将图像放在一个数组中，并使用一个变量来跟踪接下来要显示的图像：

```
var images = ["hackanm.gif", "compman.gif"];
var index = 0;

function changeSrc() {
  document.getElementById("myImage").src = images[index];
  index = (index + 1) % images.length;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:34:43.507

试试这个，

```
<img id="img" src="cat.jpg" />​ 
```

使用 jQuery 的 JavaScript，

```
$('#img').toggle(
    function(){
        $(this).attr('src', 'dog.jpg');
    },
    function(){
        $(this).attr('src', 'cat.jpg');
    }
);​ 
```

这是工作演示，[http://jsfiddle.net/D9VvV/](http://jsfiddle.net/D9VvV/)

# php - 使用 AJAX 自定义 Jquery 验证

> ID：12418541
> 
> 赞同：-4
> 
> 时间：2012-09-14T05:18:32.347
> 
> 标签：php, jquery

我想知道我们如何在 Jquery 验证中实现 AJAX 结果。例如，我想通过 AJAX 检查用户名在数据库中可用或不可用，并提示用户其可用或不可用我该怎么做？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:27:00.213

关于它的外观的想法

```
 $.ajax({
       url: 'yourusernamecheckpage.php',
       type:'post',
       data:{'username':$('#yourusername').val()},
       beforeSend:function(){
            //do a loading msg..like checking..

       },
       success:function(msg){
       if(msg == 'ok'){
        //username available
       }else{
        //username not available
       }
    },error:function(msg){

   alert(msg);
   }     

    });

//yourusernamecheckpage.php
//you can get the username as $_POST['username']:
//do your validation and 
echo 'ok';exit; 
//if available 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:29:21.163

使用 jQuery 验证插件，并使用其[远程](http://docs.jquery.com/Plugins/Validation/Methods/remote#options)验证方法。

# nginx - nGINX 读取标头并将其传递给不同的应用程序服务器

> ID：12418542
> 
> 赞同：0
> 
> 时间：2012-09-14T05:18:33.880
> 
> 标签：nginx, http-headers, uwsgi

我有一个 nGINX 服务器正在运行。我想从传入的请求中读取自定义 HTTP 标头并将其重定向到不同的应用程序服务器。我确实搜索了类似的问题，但发现用于编写自定义标题而不是如何阅读..

如果标头设置为 -> "version = Version 1.0" 那么它应该重定向不同的应用程序（比如 uwsgi_pass xxxx:80）

如果它设置为“版本 = 版本 2.0”，那么它应该重定向到 (uwsgi_pass xxxx:99)

我在我的 nginx.conf 文件中尝试过

```
server{
        listen 80;
        server_name xyz.com;

        if ($http_version ~ 'Version 1.0') {
            proxy_pass http://192.168.0.116:99/calc;
        }

        if ($http_version ~ 'Version 2.0') {
                proxy_pass http://192.168.0.116:99;
        }

    location /hello {
        proxy_pass http://192.168.0.116:99/calc;
            }

        } 
```

重新启动 nGINX 时出现错误

```
nginx: [emerg] "proxy_pass" directive is not allowed here in /etc/nginx/nginx.conf:19
nginx: configuration file /etc/nginx/nginx.conf test failed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:11:02.700

假设您以这种形式设置自定义标题：

```
version: Version 1.0 
```

然后你可以像这样配置nginx：

```
location / {
    if ($http_version ~ 'Version 1.0') {
        uwsgi_pass localhost:8888;
    }

    if ($http_version ~ 'Version 2.0') {
        uwsgi_pass localhost:9999;
    }
} 
```

参考：[http ://wiki.nginx.org/HttpCoreModule#.24http_HEADER](http://wiki.nginx.org/HttpCoreModule#.24http_HEADER)

# networking - 下载位于网络服务器外部的文件时，强制网络浏览器请求身份验证

> ID：12418544
> 
> 赞同：1
> 
> 时间：2012-09-14T05:18:56.030
> 
> 标签：networking, browser, download, drive, identification

我有一个网站，一种在 Intranet 上的网站（用 PHP 编写并在 IIS 上运行）

许多超链接指向不在网络服务器上而是在其他网络驱动器上的 PDF 文件。（不要问我为什么！:)

如果客户端已经（预先）登录到此网络驱动器，则在客户端单击链接时将继续下载。如果客户端尚未登录到网络驱动器，下载将失败（“Internet Explorer 无法显示此页面”）。

要从本网站下载文件，客户必须从 Windows（即“我的电脑”）打开此驱动器（所有用户都已映射此驱动器）。然后 Windows 将请求身份验证。

有没有办法请求浏览器（在我的情况下是 Internet Explorer）强制对此驱动器进行身份验证请求？

一种方法是将这些标识数据存储在 Windows 上，但这不是我想要的。还有其他方法吗？

感谢所有愿意花时间提供答案的人。

编辑：它不适用于不属于该域的客户端。但是在这种情况下有一些。

# facebook - 解析facebook签名的响应json

> ID：12418545
> 
> 赞同：0
> 
> 时间：2012-09-14T05:18:56.740
> 
> 标签：facebook, json, google-app-engine

我有一个适用于 java 的谷歌应用引擎应用程序，它有一个 facebook 表单，在提交时会向我们应用程序中的 servlet 发送一个签名请求。我们正在使用以下代码解密并转换为 json 字符串

```
String signedRequest = (String) req.getParameter("signed_request");
        String payload = signedRequest.split("[.]", 2)[1];
        payload = payload.replace("-", "+").replace("_", "/").trim();
        String jsonString = new String(Base64.decodeBase64(payload.getBytes()));
        System.out.println("Json is::" + jsonString); 
```

响应看起来像

[sakshumweb/3.361739372881481188].: Json 是::{"算法":"HMAC-SHA256","expires":1347588000,"issued_at":1347584290,"oauth_token":"XXXXX","re​​gistration":{"name" :"Vik Ku​​mar","first_name":"Vik","last_name":"Kumar","bloodGroup":"B-","gender":"male","birthday":"10/31/1983" ,"email":"vik.ceo\u0040gmail.com","cellPhone":"1234123456","homePhone":"1234123457","officePhone":"1234123458","primaryAddress":"jdfjfgj","area" :"jfdjdfj","location":{"name":"加州红木海岸","id":103107903062719},"subscribe":true,"eyePledge":false,"reference":"fgfgfgfg"}, "registration_metadata":{"fields":"[{\"name\":\"name\"},{\"name\ ":\"first_name\"},{\"name\":\"last_name\"}, {\"name\":\"bloodGroup\", \"description\":\"Blood Group\", \ "类型\":\"选择\",\"选项\":{\"A+\":\"A+\",\"A-\":\"A-\",\"B+\": \"B+\",\"B-\":\"B-\",\"O+\":\"O+\",\"O-\":\"O-\",\"AB+\ ":\"AB+\",\"AB-\":\"AB-\",\"A1+\":\"A1+\",\"A1-\":\"A1-\",\" A2+\":\"A2+\",\"A2-\":\"A2-\",\"A1B+\":\"A1B+\",\"A1B-\":\"A1B-\",\"A2B+\":\"A2B+\",\"A2B-\": \"A2B-\",\"HH\":\"孟买血型\"}}, {\"姓名\":\"性别\"}, {\"姓名\":\"生日\"} ,{\"name\":\"email\"}, {\"name\":\"cellPhone\", \"description\":\"Cell Number\", \"type\":\"text \"}, {\"name\":\"homePhone\", \"description\":\"Home Number\", \"type\":\"text\"}, {\"name\": \"officePhone\", \"description\":\"Office Number\", \"type\":\"text\"}, {\"name\":\"primaryAddress\", \"description\" :\"主要地址\", \"type\":\"text\"}, {\"name\":\"area\", \"description\":\"Locality/Village/Area\", \"type \":\"text\"},{\"name\":\"location\"}, {\"name\":\"subscribe\", \"description\":\"订阅我的 Sakshum活动更新。\", \"type\":\"checkbox\", \"default\":\"checked\"}, {\"name\":\"eyePledge\", \"description\": \"我也想发誓。\", \"type\":\"checkbox\"}, {\"name\":\"reference\", \"description\":\"How you联系我们（朋友、Facebook、谷歌等）？\", \"type\":\"text\"}]"},"user":{"国家":"us","locale":"en_GB"},"user_id":"875390603"}

那么，我如何解析这些数据以提取此响应的注册部分中的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T06:49:39.840

由于这是一个[有效的 JSON](http://jsonformatter.curiousconcept.com/)，您可以使用 JSON 库（如 Jackson 或[GS​​ON）](http://code.google.com/p/google-gson/)来解析它。

您可以使用此示例代码打印出所有`registration`字段：

```
JsonNode json = new ObjectMapper().readTree(response);
JsonNode registration_fields = json.get("registration");

Iterator<String> fieldNames = registration_fields.getFieldNames();
while(fieldNames.hasNext()){
    String fieldName = fieldNames.next();
    String fieldValue = registration_fields.get(fieldName).asText();
    System.out.println(fieldName+" : "+fieldValue);
} 
```

# jquery - WordPress 发布图片，点击后在灯箱中打开

> ID：12418547
> 
> 赞同：1
> 
> 时间：2012-09-14T05:19:12.950
> 
> 标签：jquery, wordpress, lightbox

我只是新手`WordPress`。我想知道如何制作`images posted in post pages to be open in a lightbox when clicked?`是否有任何好处`plugins`可以使我的工作更轻松或任何相关代码可以帮助我实现这一目标。任何帮助和建议都将不胜感激。

**[更新]**

管理员不会放任何`link`或任何`rel link`. 他只会`upload,insert`在帖子页面中显示图像。

# mysql - Mysql得到多少岁（N天）min（Date）是？

> ID：12418551
> 
> 赞同：0
> 
> 时间：2012-09-14T05:19:35.293
> 
> 标签：mysql

我正在对帖子进行分组，`Verb`并使用 min(Date) 从最旧的行中获取日期。我想知道这个日期存在多少天。

这是我当前的查询：

```
SELECT min(Date) AS firstPost FROM `Posts` GROUP BY `verb` 
```

我怎样才能知道 min(Date) 的年龄（n 天）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:20:44.773

```
 SELECT min(Date) AS firstPost,
         DATEDIFF(NOW(), min(Date)) `age_in_days`
    FROM `Posts`
GROUP BY `verb` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:22:38.960

这将是：

```
SELECT min(Date) AS firstPost 
    DATEDIFF(NOW(), min(Date)) AS dueDate
FROM `Posts` 
GROUP BY `verb` 
```

`DATEDIFF()`返回开始日期和结束日期之间的天数。

# javascript - DOM 元素 (div1) 正在执行 jquery 动画，并且 DOM 元素在手动事件中被删除，例如单击

> ID：12418555
> 
> 赞同：0
> 
> 时间：2012-09-14T05:19:52.800
> 
> 标签：javascript, jquery, html

DOM 元素 (div1) 正在执行 jquery 动画，并且 DOM 元素在手动事件中被删除，例如单击

在这种情况下会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:33:13.717

实际上没有办法直接删除 DOM 元素。您可以将其从 DOM 中移除（使用`.removeChild()`）并清除对它的引用。只有当没有其他对该 DOM 元素的引用时，垃圾收集器才会在一段时间后真正摆脱它。

但是，如果上面运行了动画，则该动画将引用它，以防止垃圾收集器实际删除它，并且动画可能会一直持续到完成。如果它已从 DOM 中移除，您将不会再看到动画的效果，因为它不在 DOM 中时是不可见的，但它的属性仍在动画中。

当动画结束并且由于动画闭包引用从动画队列中清除而释放对它的引用时，垃圾收集器最终将可以自由地实际删除元素。

仅供参考，如果您愿意，您可以调用`.stop(true)`任何动画 jQuery 对象来停止其当前动画。

# jquery - 单击或悬停时从 Dynatree 复选框模式中删除 Highligthing

> ID：12418557
> 
> 赞同：5
> 
> 时间：2012-09-14T05:20:01.843
> 
> 标签：jquery, dynatree

在带有 vista-skin 的 dynatree 中，当您将鼠标悬停在树项目上时，它会在具有蓝色背景的地方产生悬停效果。

此外，当您单击该项目以检查它时，它在 chrome 中具有橙色边框，在 IE 中具有虚线边框。

我正在尝试删除这两个，以便对悬停或单击后没有影响。

有关示例，请参见 selectMode 3：wwwendt.de/tech/dynatree/doc/sample-select.html

更新：我在 /src/skin-vista/ui.dynatree.css 中发现如果您注释掉以下块，它将阻止蓝色突出显示颜色。此外，您需要取消注释以修复 webbrowser 放入的大纲，如下所示。

```
/*Comment this out
ul.dynatree-container a:hover
{
/*  text-decoration: underline; */
    background: #F2F7FD; /* light blue */
    border-color: #B8D6FB; /* darker light blue */
}
*/

/*Comment this out
span.dynatree-active a
{
    border: 1px solid #99DEFD;
    background-color: #D8F0FA;
}
*/

ul.dynatree-container a
/*, ul.dynatree-container a:visited*/
{
    /*The line below was originally commented out, uncomment it to remove the orange/dotted border*/
    outline: 0; /* @ Firefox, prevent dotted border after click */
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-05T11:20:07.723

DynaTree 现在是 FancyTree 并且在 fancytree 中，这就是我所做的。

```
.fancytree-container,
table.fancytree-container,
ul.fancytree-container,
span.fancytree-focused span.fancytree-title
{
  border: 0 ; 
  outline: 0; 
  -moz-outline-style: none; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-08T14:59:15.327

要解决此问题，您只需要删除

> 边框：1px 虚线灰色；

来自ui.dynatree.css上的这个**ul.dynatree-container**

代码最终应该是这样的：

```
ul.dynatree-container
{
    font-family: tahoma, arial, helvetica;
    font-size: 10pt; 
    white-space: nowrap;
    padding: 3px;
    margin: 0; 
    background-color: #CCCCCC solid 1px;

    /*border: 1px dotted gray;*/

    overflow: auto;
    height: 100%; 
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 14px;
} 
```

或者只是删除点缀

> 边框：1px 灰色；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-17T14:47:05.373

```
/* Prevent focus frame */
.fancytree-container:focus {
   outline: none;
} 
```

来自 BootstrapTheme 的 CSS。

# c# - 在asp.net中上传文件时如何添加显示百分比级别的进度条

> ID：12418558
> 
> 赞同：-2
> 
> 时间：2012-09-14T05:20:05.743
> 
> 标签：c#, asp.net

> **可能重复：**
> [创建文件上传进度条 ASP.NET 和 JavaScript](https://stackoverflow.com/questions/11714858/create-file-upload-progress-bar-asp-net-and-javascript)

我必须使用 C#.net 在 asp.net 中创建一个 Web 应用程序，因为我必须显示进度条以显示文件的上传状态我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:40:26.280

我从你的问题中了解到了什么，基于我曾尝试使用 AJAX 扩展来实现这一点。

我的代码在这里

```
 <div>
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <div>

        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
                <asp:FileUpload ID="FileUpload1" runat="server" />
            </ContentTemplate>
        </asp:UpdatePanel>

    </div>
    <br />
    <div>
        <asp:UpdateProgress ID="UpdateProgress1" runat="server">
            <ProgressTemplate>
                <asp:Image ID="Image1" runat="server" ImageUrl="~/uploading.gif" />
            </ProgressTemplate>
        </asp:UpdateProgress>
    </div>

</div> 
```

我希望这可能对您有所帮助。如果对您有帮助，请标记为答案。

# mysql - 在 Mysql 中查找用户创建日期？

> ID：12418561
> 
> 赞同：2
> 
> 时间：2012-09-14T05:20:27.850
> 
> 标签：mysql, sql

有什么方法可以找到创建用户的时间吗？这意味着在mysql中跟踪用户创建日期。

请帮帮我。

谢谢，

尼特什·库马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:09:59.240

您可以在`timestamp`提交用户创建表单时添加用户信息，否则无法跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T07:32:41.827

您必须在数据库用户表中添加新字段，说它是“创建”的，类型为**DATETIME**

示例查询在这里：

```
ALTER TABLE `users` ADD `created` DATETIME NOT NULL COMMENT 'user created date' AFTER `name` 
```

这里 AFTER`name`是表的最后一个字段，因此它将添加在 users 表的最后创建的新字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T07:56:36.847

您可以向表中添加新`TIMESTAMP`字段，但请记住设置`CURRENT_TIMESTAMP`为默认值，以便在创建记录时，此字段会从记录创建时获取时间戳。

我会说以后不可能知道何时创建了记录，也许使用某种使用二进制日志，但我对此知之甚少。

# web - 使用 Apps 脚本写入 Google Docs 电子表格

> ID：12418567
> 
> 赞同：0
> 
> 时间：2012-09-14T05:20:59.633
> 
> 标签：web, google-apps-script, google-docs, google-docs-api

我正在尝试将 Apps 脚本集成到我的网站（不是 Google 网站）的订单页面中，以便可以将用户的订单写入 Google Doc 电子表格。我不知道该怎么做，因为 Apps Script 文档说 Apps Script 只能被开发并嵌入到 Google Sites Pages 中。即使我的网站不是 Google 网站，有没有办法实现这一目标？我会非常感谢任何帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T15:58:56.103

您可以创建一个数据捕获电子表格，并为其创建一个表单。您可以将表单（字段名称和表单操作）“克隆”到您的网站中。

您的电子表格可以有一个 onFormSubmit 操作 (https://developers.google.com/apps-script/understanding_events)，它可以对提交的数据执行您需要的任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:50:27.457

您可以编写常规 HTML 表单（不在 Apps 脚本中）并设置 method='post' action='the script url'。这将使用传递给 doGet 的表单中的数据作为参数调用您的脚本。

# algorithm - Prolog 中的代码生成所有结构不同的具有 n 个节点的完整二叉树

> ID：12418575
> 
> 赞同：0
> 
> 时间：2012-09-14T05:21:56.647
> 
> 标签：algorithm, prolog, catalan

在 Prolog 中生成所有具有 n 个叶子的结构不同的完整二叉树。问题是给定叶子的数量，输出所有不同的完整二叉树。这里的“完整”意味着任何内部节点都必须有两个孩子，左和右。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:49:09.443

通过回溯构建所有树：

```
full_tree(Leaves, [LTree, RTree]):-
  Leaves > 1,
  TLeaves is Leaves-1,
  between(1, TLeaves, LLeaves),
  RLeaves is Leaves-LLeaves,
  full_tree(LLeaves, LTree),
  full_tree(RLeaves, RTree).
full_tree(1, '.'). 
```

这个递归过程有一个基本情况，它将第二个参数与“。”统一起来。当叶数为 1 时。递归步骤适用于叶数大于 1 的情况。它将这个数字分成两个非零的新数字，它们对叶的数量求和，并调用自身来构建左右分支。

然后此过程会将所有树转储到控制台：

```
dump_all_trees(Leaves):-
  full_tree(Leaves, Tree),
  dump_full_tree(Tree),
  nl,
  fail.
dump_all_trees(_).

dump_full_tree([LTree, RTree]):-
  write('('),
    dump_full_tree(LTree),
    dump_full_tree(RTree),
  write(')'),
  !.
dump_full_tree(Leaf):- write(Leaf). 
```

测试用例：

```
?- dump_all_trees(4).
(.(.(..)))
(.((..).))
((..)(..))
((.(..)).)
(((..).).) 
```

# php - 缓存谷歌地图数据

> ID：12418578
> 
> 赞同：0
> 
> 时间：2012-09-14T05:22:23.267
> 
> 标签：php, javascript, caching, google-maps-api-3

我正在开发一个网络系统，它使用谷歌地图来查看我大学校园周围的不同数据点。我大量使用 maps API 中的 scrollTo() 方法，我注意到当一个区域离开屏幕然后再次滚动到时，会发出一个新的 ajax 请求来重新加载图块。

有没有办法缓存校园区域，让地图可以流畅滚动？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:17:48.550

缓存该区域可能违反使用条款。[这篇文章](https://stackoverflow.com/questions/6109369/how-to-cache-google-map-tiles-for-offline-usage)可能对你有所帮助

它有几个使用参考，可能是您需要的。

# ruby-on-rails - 在 Ruby on Rails 中使用 Devise 为用户播种

> ID：12418584
> 
> 赞同：33
> 
> 时间：2012-09-14T05:22:55.677
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, ruby-on-rails-3.2, seed

在我的开发和测试环境中，我想在数据库中植入一堆用户。我正在使用 Ruby on Rails v3.2.8 和最新的设计。所以我在我的 db/seeds.rb 文件中添加了这一行：

```
User.create(email: 'test@example.com', encrypted_password: '#$taawktljasktlw4aaglj') 
```

但是，当我运行时`rake db:setup`，我收到以下错误：

> 耙中止！无法批量分配受保护的属性： encrypted_pa​​ssword

播种用户的正确方法是什么？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-14T05:29:14.543

你必须这样做：

```
user = User.new
user.email = 'test@example.com'
user.encrypted_password = '#$taawktljasktlw4aaglj'
user.save! 
```

阅读本指南以了解什么是质量分配： http: [//guides.rubyonrails.org/security.html](http://guides.rubyonrails.org/security.html)

我想知道为什么必须直接设置加密密码。你可以这样做：

```
user.password = 'valid_password'
user.password_confirmation = 'valid_password' 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-09-14T07:13:20.440

阿伦是对的。在你的seeds.rb中这样做更容易

```
user = User.create! :name => 'John Doe', :email => 'john@gmail.com', :password => 'topsecret', :password_confirmation => 'topsecret' 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-09-14T07:21:53.160

该`skip_confirmation`方法仅`confirmable`在您的用户模型中有模块时才有效，否则将其删除。

```
 user = User.new(
      :email                 => "admin@xxxxx.xxx",
      :password              => "123456",
      :password_confirmation => "123456"
  )
  user.skip_confirmation!
  user.save! 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-02-06T14:17:20.440

这是一个老问题，但这里有一个管理员用户的例子（来自 cancancan）：

```
User.create!([
  {email: "testadmin@mvmanor.co.uk", password: "testadminuser", password_confirmation: "testadminuser", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 1, current_sign_in_at: "2015-02-06 14:02:10", last_sign_in_at: "2015-02-06 14:02:10", current_sign_in_ip: "127.0.0.1", last_sign_in_ip: "127.0.0.1", admin: true},
  {email: "testuser@mvmanor.co.uk", password: "testuseraccount", password_confirmation: "testuseraccount", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 1, current_sign_in_at: "2015-02-06 14:03:01", last_sign_in_at: "2015-02-06 14:03:01", current_sign_in_ip: "127.0.0.1", last_sign_in_ip: "127.0.0.1", admin: false},
  {email: "testcustomer@customer.co.uk", password: "testcustomeruser", password_confirmation: "testcustomeruser", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 1, current_sign_in_at: "2015-02-06 14:03:44", last_sign_in_at: "2015-02-06 14:03:44", current_sign_in_ip: "127.0.0.1", last_sign_in_ip: "127.0.0.1", admin: false}
]) 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-04-15T12:35:07.090

如果您使用的是设计`confirmable`模块，则需要执行以下操作：

```
user = User.new(
  email: 'user@domain.com', 
  password: '123456789', 
  password_confirmation: '123456789'
)
user.skip_confirmation!
user.save! 
```

电话只是告诉设计`skip_confirmation!`您不需要确认此帐户。
其他选项只是`confirmed_at`像保存之前一样设置用户属性`Time.now.utc`。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-02-05T02:47:06.477

播种用户表：

```
User.create(
        email: "example@gmail.com",
        password: "12345678"
    ) 
```

[安装设计](https://github.com/plataformatec/devise)后，将`:password`自动散列并保存到`:encrypted_password`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-02-04T23:20:48.430

我不知道它是否有帮助，但实际上我这样做是为了在我的**Rails 5应用程序中创建一个****默认管理员用户**，但没有在我的 GitHub 存储库中以纯文本形式共享密码。

 **基本上，这样做的逻辑是：

*   播种时为默认用户生成一个安全的随机密码。
*   转到**“.../admins/sign_in”**并单击***“忘记密码？”*** 链接重置它。
*   在该默认电子邮件帐户中获取**重置密码链接。**
*   设置新密码。

所以在`db/seeds.rb`附录中：

```
randomPassword = Devise.friendly_token.first(8)
mainAdminUser = Admin.create!(email: "me@gmail.com", password: randomPassword, name: "Username") 
```

如果您使用的是设计`confirmable`功能，只需执行以下操作即可跳过可确认的选项：

```
mainAdminUser = Admin.new(
    email: "me@gmail.com",
    password: randomPassword,
    password_confirmation: randomPassword,
    name: "Username"
)
mainAdminUser.skip_confirmation!
mainAdminUser.save! 
```

你的好去处！

现在您有一个默认用户，但您没有共享默认密码！我希望它对某人有用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-08-14T16:35:43.040

使用您的 db/seeds.rb 文件来启动您的第一个用户：

```
User.create!(email: 'palo@alto.com', 
             password: '123456789', 
             password_confirmation: '123456789') 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-11-08T19:20:20.793

对于 seed.rb 文件中的设计用户，对我有用的是在保存新用户时使用通用密码。然后更新加密密码并再次保存模型。这是一种骇人听闻的方式。

```
user = User.new(
    :email                 => "admin@xxxxx.xxx",
    :password              => "fat12345",
    :password_confirmation => "fat12345"
)
user.save!
user.encrypted_password="ENCRYPT.MY.ASS!!!KJASOPJ090923ULXCIULSH.IXJ!S920"
user.save 
```

更新其他人已经发布，这是更好的方法：

```
user = User.new(
    email: "foo@bar.com", 
    password: "foob1234", 
    password_confirmation: "foob1234"
)
user.skip_confirmation! #only if using confirmable in devise settings in user model.
user.save! 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-14T07:20:09.417

我在我的一个要求中做了同样的事情，所以只需粘贴我的片段

```
def triggerSeedUsers
      p "Starting Seeding Users..."
      p   "Deleting all users"..
      User.destroy_all
      normal_users = [{:email => 'abc@domain.com', :login => "abc_demo", :name => 'abc Demo'}]
      admin_users = [{:email => 'admin@domain.com', :login => 'abc_admin', :name => 'abc Admin'}]

      [normal_users,admin_users].each do |user_type|
        user_type.each do |user|
          User.create!(:name => user[:name],
            :login => user[:login],
            :email => user[:email],
            :first_login => false,
            :password => 'P@ssw0rd',
            :password_confirmation => 'P@ssw0rd'
            )
        end
      end
      User.where('name LIKE ?', '%demo%').update_all(:is_admin => 0)
      User.where('name LIKE ?', '%admin%').update_all(:is_admin => 1)
     end 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-08-04T04:57:29.977

在 db:seed 中确认电子邮件：

```
User.create!( name: 'John', email:'john@hotmail.com', password: '123456', password_confirmation: '123456',confirmed_at: '2018-08-04 04:51:43', current_sign_in_ip: "127.0.0.1", last_sign_in_ip: "127.0.0.1") 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-12-26T13:01:03.767

只需添加 :password 属性 rest，devise 会为你做 password_encrypt

```
user = User.new({ email: 'test@example.com', password: 'EnterYourPassword'})
user.save!
flash[:notice] = 'User Created'

#or for extra logic

        #if user.save
          #ExtraCredentialsOrLogic

        #elsif user.errors.any?
          #user.errors.full_messages.each do |msg|
            #puts msg
          #end
        #else
          #puts "****NOT VALID****"
    #end 
```

现在运行'rake db：seed'

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-01-26T22:08:56.530

这使您可以多次运行种子而不会出错：

```
User.where(email: "you@email.com").first_or_create.update_attributes(nome: "Your Name",
    email: "you@email.com",
    password:              "password#123",
    password_confirmation: "password#123") 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-05-01T09:08:01.637

不要尝试创建加密密码，请为您设计处理。这将起作用，只需确保密码长度至少为 6 个字符。

```
User.create(
        email: "test@test.com",
        password: "123456"
    ) 
```

更好的是，在您的终端中：

```
$bundle add faker 
```

然后：

```
User.create(
            email: test@test.com,
            password: "123456"
        )
10.times do
  User.create(
              email: Faker::Internet.email,
              password: "123456"
           )
end 
```

只要确保您在种子中设置了至少一封您能记住的电子邮件。因此保留“测试”电子邮件。**

# algorithm - 查找字符串的子字符串

> ID：12418590
> 
> 赞同：24
> 
> 时间：2012-09-14T05:23:31.750
> 
> 标签：algorithm, math, combinations

对于长度为 n 的字符串，计算所有子字符串的公式是：n(n+1)/2 有人可以帮我直观地理解这个公式吗？

维基百科说： *“符号仅出现一次的长度字符串的子字符串数，是在符号之间选择两个不同位置以开始/结束子字符串的方式的数量”*

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-09-14T05:32:43.667

要理解这一点，请注意任何子字符串都需要两个参数：开始索引和结束索引。

例如：string str = "Hello World"; // 长度 == 11

让我们从一次只取一个字符的子字符串开始：H, e, l, l, o, , W, o, r, l, d。然后每次取 2 个字符：He、el、ll、lo、o、W、Wo 或 rl、ld。然后取 3 个字符：Hel，.. 等。

所以总的子串数是 11 + 10 + 9 + .. + 1 并且，一般来说`for i from 1 to n`，我们有`n - i + 1`子串。通过峰会：

从 i = 1 到 n 的 Sigma (n + 1 - i)，`n * (n + 1) - n * (n + 1) / 2`产生`n * (n + 1) / 2`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-14T05:30:02.350

子字符串由它在原始字符串中的开始位置和结束位置确定。对于任何子串，我们都有这两个端点。相反，对于字符串中的任何两个字符，只有一个子字符串在这些点开始和结束。

因此，所有子串的数量是所有（不一定是不同的）字符对的数量。

有`n*(n-1)/2`成对的不同字符。您还需要添加非不同对，即 n。

所以总数为`n * (n-1) / 2 + n = n * (n+1) / 2`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-14T05:30:30.577

嗯，它是所有长度为 1（正好是 n）的子串，加上所有长度为 2（n-1）的子串，加上所有长度为 n（这是一个正确的字符串）的子串的总和。然后，你有 n + n-1 + n-2 ... + 1 = (n * (n+1)) / 2

总和可以使用自然归纳法计算，并且由于高斯在学校时解决了这个总和而为人所知。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-11-07T07:37:54.947

子字符串由它的两个端点定义，基本上我们可以将子字符串视为字符串的切片。让我们通过一个例子来理解它。考虑长度为 3 的字符串“abc”

> 美国广播公司

要对字符串进行切片，我们有 4 个位置，从 a 之前到 c 之后的字符串结尾。从这 4 个可用选项中，我们必须选择 2 个位置来创建切片，即等于⁴ C [2] == ^(n+1)的子字符串C [2] ==n*(n+1)/2

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T05:36:11.993

我不擅长数学，但是什么是`substrings`字符串以及获得字符串的可能性是什么，`substrings`我将尝试向您解释。

举个例子：“MOBILE”这是一个 6 个字符的字符串，现在根据你的公式 n(n+1)/2，结果是 6(6+1)/2=21

因此，子字符串是在整个字符串之间具有起始索引和结束索引的任何字符串。

在字符串“MOBILE”中，以下是我们可以拥有的子字符串：

第 1 步：“M”开始索引“M”和结束索引“M”这是一种可能性

第 2 步：“MO”开始索引“M”和结束索引“O”这是第二种可能性

.

.

第 5 步：“MOBIL”开始索引“M”和结束索引“L”这是第五种可能性

.

.

第 8 步：“OB”开始索引“O”和结束索引“B”这是八种可能性

.

.

第 21 步：“MOBILE”开始索引“E”和结束索引“E”这是第 21 种可能性

这些是在字符串中包含子字符串的可能性，并且子字符串中的结束索引不能小于开始索引。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-18T14:56:05.803

假设你想找出 "abc" 的子串，那就是 {"a","ab","abc","b","bc","c"} 我们将通过以下代码计算它

```
for(int i=0;i<len;i++){
        for(int j=i;j<len;j++){

        }
    } 
```

查看这段代码，很容易看出循环运行为

> 第一次运行3次，第二次运行2次，第三次运行1次

由于它每次都返回一个子字符串，因此***它等于 n 的总和，*** 即 = ***n(n + 1) / 2***

# sql-server-2005 - 在 sql server 2005 中添加列

> ID：12418592
> 
> 赞同：0
> 
> 时间：2012-09-14T05:24:03.960
> 
> 标签：sql-server-2005, jsp

我正在使用 SQL Server 2005 和 JSP。我想添加具有名称的列作为字符串对象值。

```
String dr="Doctor1";

stat1=conn.createStatement();
stat1.executeUpdate("ALTER TABLE dbo.PHPL ADD '"+dr+"' NVARCHAR(255) Null"); 
```

它在列名附近给出错误。我想我在语法上弄错了。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T05:29:25.730

```
String dr="Doctor1";

stat1=conn.createStatement();
stat1.executeUpdate("ALTER TABLE dbo.PHPL ADD "+dr+" NVARCHAR(255) Null"); 
```

效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:36:12.967

这里有几个问题

*   您需要使用[execute](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/PreparedStatement.html)，而不是`executeUpdate`. 更改表是 DDL 命令，而不是插入、更新或删除
*   正如 KittenLS 所指出的， for 的语法`ALTER TABLE`不需要引号。但是，您应该使用 '[]' 来转义空格、关键字等。

IE

```
stat1.execute("ALTER TABLE dbo.PHPL ADD [" + dr + "] NVARCHAR(255) Null"); 
```

# android - 无需用户创建帐户即可识别手机

> ID：12418593
> 
> 赞同：1
> 
> 时间：2012-09-14T05:24:27.627
> 
> 标签：android, cryptography, identify, handset

我正在开发一个 Android 应用程序（以及很快的 iPhone 应用程序）。我需要一种从服务器端识别手机的方法。我想我可以在第一次运行应用程序时在设备上的持久存储中写入一个秘密（某种加密字符串），并在下次与后端服务器通话时使用它来识别手机。这是怎么做的？有没有更好的办法？

澄清：问题应该说，我想识别应用程序的用户。我对跟踪实际设备不感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:20:48.150

据我了解您的问题，您希望确定来自哪个设备的请求，而不是手机的构建或固件。在这种情况下，您可以使用以下代码从他们的 IMEI 号码中识别他们 -

```
TelephonyManager telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
telephonyManager.getDeviceId(); 
```

将以下权限添加到您的清单文件中：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

# fortran - 使用 gfortran 在 Fortran 中格式化语句

> ID：12418598
> 
> 赞同：0
> 
> 时间：2012-09-14T05:25:19.927
> 
> 标签：fortran, gfortran

嗨，这是 Chapman 为科学家和工程师编写的 Fortran 95-2003 (3ed) 一书第 195 页中给出的代码

```
WRITE (*,100) index, time, depth, amplitude, phase

100 FORMAT('1',t20,'results for the test number  ',i3,///,&
      1x,'time      = ',f7.0/, &
      1x,'depth     = ',f7.1,' meters',/, &
      1x,'amplitude = ',f8.2/ &,
      1x,'phase     = ',f7.1) 
```

为了运行它，我完成了其余的语句

```
program test
implicit none

INTEGER :: index = 10
real:: time=300.0,depth=330.0,amplitude=850.65,phase=30.0
WRITE (*,100) index, time, depth, amplitude, phase

100 FORMAT('1',t20,'results for the test number  ',i3,///,&
      1x,'time      = ',f7.0/, &
      1x,'depth     = ',f7.1,' meters',/, &
      1x,'amplitude = ',f8.2/ &,
      1x,'phase     = ',f7.1)

end program test 
```

当我用 gfortran 编译它时，我得到以下错误..

```
test.f90:12.31:

      1x,'amplitude = ',f8.2/ &,
                               1
Error: Unexpected element '&' in format string at (1)
test.f90:13.8:

      1x,'phase     = ',f7.1)
        1
Error: Non-numeric character in statement label at (1)
test.f90:13.9:

      1x,'phase     = ',f7.1)
         1
Error: Invalid character in name at (1)
test.f90:7.12:

WRITE (*,100) index, time, depth, amplitude, phase
            1
Error: FORMAT label 100 at (1) not defined 
```

这里发生了什么事 ？我在stackoverflow上看到了另一个线程，问题是关于fortran中的控制字符。查普曼在他的书中讨论了它，但没有提到在 Fortran 2003 中删除了控制字符的功能。所以我想知道这是否是 gfortran 无法识别的类似旧东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T05:51:25.953

格式规范行中的 & 符号后面有一个逗号，其中包含“& 符号 = ”字面量。要在非字符上下文中充当连续字符，与号必须是该行中最后一个非空白、非注释字符。

逗号应该在 & 号之前。

（因为与号不被视为连续字符，编译器认为它是格式规范的一部分 - 因此是第一个错误。然后下一行开始一个新的语句 - 因此是后续错误。）

# java - How do you determine if an .sqlite or .sqback is corrupt in Java?

> ID：12418600
> 
> 赞同：8
> 
> 时间：2012-09-14T05:25:31.693
> 
> 标签：java, android, sqlite, corruption

I have been given a directory of directories each containing a collection of .sqlite and .sqback files that I must parse.

The problem is that I believe some of these files to be corrupt when I receive them because I get the error: ERR: [SQLITE_CORRUPT] The database disk image is malformed (database disk image is malformed) on my console when I try to process them. This only happens with some of the files. I have isolated a few and tried running my program on fresh copies of these bad files individually and they cause errors. Most of the files are fine though :)

I realized that there is a chance that I may indeed be given corrupt files to begin with so I would like a way to determine, prior to trying to parse them, which files are good and which are not.

I am writing in Java. I am only interested in the sqlite and sqback validation as I know my parser works. I am reusing it from a previous project.

Hint? Suggestions? Answers?

Many Thanks for the knowledge transfer.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T16:34:27.193

Run `PRAGMA quick_check` like a normal SQL query. The result is the same as a one-column table containing strings; for an intact database, you get a single row saying "ok", for a corrupt one, a bunch of error messages.

```
sqlite> pragma quick_check;
ok 
```

after changing some bytes in the file:

```
sqlite> pragma quick_check;
*** in database main ***
Page 64: btreeInitPage() returns error code 11
On tree page 40 cell 23: Child page depth differs
On tree page 40 cell 24: Child page depth differs 
```

* * *

There is no guarantee that errors will be found by this.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-17T16:52:54.117

I would and do use

```
pragma integrity_check 
```

> This pragma does an integrity check of the entire database. The integrity_check pragma looks for out-of-order records, missing pages, malformed records, missing index entries, and UNIQUE, CHECK, and NOT NULL constraint errors. If the integrity_check pragma finds problems, strings are returned (as multiple rows with a single column per row) which describe the problems. Pragma integrity_check will return at most N errors before the analysis quits, with N defaulting to 100\. If pragma integrity_check finds no errors, a single row with the value 'ok' is returned. ([ref](https://www.sqlite.org/pragma.html#pragma_integrity_check))

Why is this better than `pragma quick_check`?

> The pragma is like integrity_check except that it does not verify UNIQUE constraints and does not verify that index content matches table content. ([ref](https://www.sqlite.org/pragma.html#pragma_quick_check))

In other words, `pragma integrity_check` is more thorough.

# ruby - 在 2 个循环内将字符串插入字符串

> ID：12418602
> 
> 赞同：1
> 
> 时间：2012-09-14T05:25:35.873
> 
> 标签：ruby, string

我正在遍历单词列表，并在每个单词的开头插入字母表中的每个字母，代码如下：

```
def add_charac_front
  ("a".."z").each do |letter|
    @array.each do |list_word|
      list_word.insert(0, letter)
      puts list_word
    end #ends @array loop
  end #ends alphabet loop
end #ends method 
```

但是`.insert`正在发生变化`@array`，因此当我遍历`@array`字母“ ”时`b`，第一个不是“ ”而是“ ”。`list_word``@array``Hello``aHello`

我需要完全相同的行为，但是对于`@array`我运行的每个字母循环来说都是相同的数组。当我执行此代码时，它工作正常：

```
def add_charac_front
  ("a".."z").each do |letter|
    @array.each do |list_word|
      puts "#{letter}#{list_word}"
    end #ends @array loop
  end #ends alphabet loop
end #ends method 
```

但我最终想在 的不同部分插入字母`list_word`，而不仅仅是前面。

我想我可以做到这一点的另一种方法是`.split("")`，`list_word`然后`.insert(0, letter)`，然后`.join`。但这似乎更麻烦。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T05:44:29.327

Ruby 通过引用而不是值传递。这意味着`list_word`里面其实是指向里面的原话`@array`。

如果您只想在`list_word`不影响原始数组的情况下使用它，则需要对其进行一次性复制，例如：

```
def add_charac_front
  ("a".."z").each do |letter|
    @array.each do |orig_word|
      list_word = orig_word.dup # duplicates the list_word
      list_word.insert(0, letter)
      puts list_word
    end #ends @array loop
  end #ends alphabet loop
end #ends method 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T07:45:07.560

您还可以轻松地使用双引号创建一个新字符串并使用 #{varname} 这将创建一个新字符串。

```
irb> @array = %w(foo bar baz)
=> ["foo", "bar", "baz"]
irb> ("a".."e").inject([]) { |m,c| 
                m.concat(@array.map { |item| "#{c}-#{item}" });
                m }
=> ["a-foo", "a-bar", "a-baz", "b-foo", "b-bar", "b-baz", "c-foo", "c-bar", "c-baz", "d-foo", "d-bar", "d-baz", "e-foo", "e-bar", "e-baz"] 
```

使用 map 创建新数组不太容易出错，然后当您需要将另一个数组折叠到其中时使用注入。如果您对使用 inject 感到不舒服，可以使用 map 和 flatten 来实现相同的结果：

```
irb> ("a".."e").map { |c| @array.map { |item| "#{c}-#{item}" } }
=> [["a-foo", "a-bar", "a-baz"], ["b-foo", "b-bar", "b-baz"], ["c-foo", "c-bar", "c-baz"],     ["d-foo", "d-bar", "d-baz"], ["e-foo", "e-bar", "e-baz"]]
irb> ("a".."e").map { |c| @array.map { |item| "#{c}-#{item}" } }.flatten
=> ["a-foo", "a-bar", "a-baz", "b-foo", "b-bar", "b-baz", "c-foo", "c-bar", "c-baz", "d-foo", "d-bar", "d-baz", "e-foo", "e-bar", "e-baz"] 
```

在 Enumerables 上使用链式操作可以轻松检查每个执行点的状态。然后当你需要打印出来时，你可以附加 .each { |x| 放 x }

如果您经常这样做，为什么不安装 gem cartesian，这使得获取两个数组的笛卡尔积变得非常简单，这正是您所需要的：

```
irb> require 'cartesian'
=> true
irb> Cartesian::product(("a".."c"), %w(foo bar baz))
=> [["a", "foo"], ["a", "bar"], ["a", "baz"], ["b", "foo"], ["b", "bar"], ["b", "baz"], ["c",   "foo"], ["c", "bar"], ["c", "baz"]]
irb> Cartesian::product(("a".."c"), %w(foo bar baz)).map { |x| "#{x.first}-#{x.last}" }
=> ["a-foo", "a-bar", "a-baz", "b-foo", "b-bar", "b-baz", "c-foo", "c-bar", "c-baz"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T05:31:53.850

如果你觉得你需要使用插入，那么你可以创建一个新的字符串副本。

```
def add_charac_front
  ("a".."z").each do |letter|
     @array.each do |list_word|
       t = String.new(list_word).insert(0,letter)
       puts t
     end #ends @array loop
  end #ends alphabet loop
end #ends method 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T05:44:30.353

不确定我是否遵循要求，但我建议只操作数组本身

```
# example.rb

@alpha = %w{a b c d e f g h i j k l m n o p q r s t u v w x y z}

def add_charac_front(array)
  return @alpha + array
end 
```

或者上面的代码实际上是将字母插入到彼此的前面，所以它相当于反转 alpha 数组并将其插入到前面

```
@reverse_alpha = alpha.reverse

def add_charac_front(array)
  return @reverse_alpha + array
end 
```

希望这可以帮助。您还可以使用这样的范围来连接子数组

```
a2 = %w{b c}
a3 = @alpha[0..4] + a2 + @alpha[5..13] 
```

# jquery-ui - 向滑块 UI 添加刻度

> ID：12418608
> 
> 赞同：1
> 
> 时间：2012-09-14T05:26:47.750
> 
> 标签：jquery-ui, slider, jquery-ui-slider

我相当 javascript 和 jquery。我正在尝试向我的网页添加一个滑块。这是一个基本滑块，任何人都可以在其中选择 0-100 之间的值。我不确定如何在中间标记一些间隔。

这是我到目前为止的代码

```
 <script>
    $(function() {
    var temp = 0;
        $( "#slider" ).slider({
            animate: true,
            value:temp,
            min: 0,
            max: 100,
            step: 1,
            slide: function( event, ui ) {
                $( "#amount" ).val(ui.value );
            },
            stop: function(event, ui) {          
                temp = ui.value;
                //Do something
            }
        });
        $( "#amount" ).val($( "#slider" ).slider( "value" ) );
    });
    </script> 
```

它运行正常。我想做的是在 0.25、50、75 和 100 处添加间隔标记。

我已经解决了一些关于 SO 的问题，但不确定如何继续实施。将不胜感激。

我尝试了这个实现： http: [//jsbin.com/iwime](http://jsbin.com/iwime)但这不是我想要做的，因为我只是希望刻度以这些定期间隔出现，但用户应该能够选择其他值。

谢谢干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T22:54:24.517

[与此 SO 问题类似](https://stackoverflow.com/questions/4435437/how-do-i-add-a-marker-to-a-jquery-ui-slider)：Bijan 的回答可能会有所帮助。

他建议的 jQuery UI 滑块的实现可能会帮助您找到解决方案： [http ://www.filamentgroup.com/lab/update_jquery_ui_slider_from_a_select_element_now_with_aria_support/](http://www.filamentgroup.com/lab/update_jquery_ui_slider_from_a_select_element_now_with_aria_support/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T23:20:28.510

我猜你想要这样的东西：http: [//jsbin.com/iwime/116](http://jsbin.com/iwime/116)

因此，您无需使用滑块选项中的刻度数，而是使用`max`您想要提供的任何最大单位，例如 100。然后在 中`refershTicks()`，更新算法以切换类。

滑块设置：

```
 var slider = $("#slider").slider({
        ...
        max: 100,     // the only change
        ...
    }); 
```

和`refreshTicks()`方法：

```
 function refreshTicks() {
        var s = slider
            , lo = s.slider("values", 0), hi = s.slider("values", 1);
        var max = s.slider('option', 'max');
        s.find(".tick").each(function(i) {
            var i = (i + 1) * (max/ticks.length) - (max/ticks.length)/2;   // the updated algorithm
            var inRange = (i >= lo && i < hi);
            $(this)
                [(inRange ? 'add' : 'remove') + 'Class']("ui-widget-header")
                [(inRange ? 'remove' : 'add') + 'Class']("ui-widget-content");
        });
    } 
```

# facebook - 获得赞按钮代码：赞按钮消失

> ID：12418610
> 
> 赞同：0
> 
> 时间：2012-09-14T05:26:56.030
> 
> 标签：facebook, button, facebook-like

使用[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)获取代码，每次我进入我的网站 www.dealhijack.com 时，右侧的 Like 按钮就会消失。如果添加到我的网站 /deals 或其他任何东西，那么它可以工作，但是我想要的那个根 dealhijack.com 不起作用。

我不明白为什么它不喜欢网站名称。我不知道为什么。

任何解决它的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:54:04.877

我已将 http:// 添加到您的链接中，效果很好。

FB返回此代码

```
<div class="fb-like" data-href="http://www.dealhijack.com" data-send="true" data-width="450" data-show-faces="true"></div> 
```

# ruby-on-rails - 在 Rails 应用程序中通过 Ajax 渲染到部分

> ID：12418613
> 
> 赞同：1
> 
> 时间：2012-09-14T05:27:14.447
> 
> 标签：ruby-on-rails, ajax

我几乎完成了！但我有一个问题，在我的控制器文件中有这个：

```
def show
   @user = User.find(params[:id])
   @posts = @user.posts.paginate(page: params[:page])
end 
```

然后我的文件中有这段代码`show.html.erb`：

```
<div class="span8">
   <%= render 'follow_form' if signed_in? %>
 <% if @user.posts.any? %>
    <h3>Microposts (<%= @user.posts.count %>)</h3>
    <div id='posts'>
      <div class='page'>
     <ol class="microposts">
        <%= render @posts %>
     </ol>
  </div>
</div>
   <% end %>
 </div> 
```

在这个文件的底部，我有一个从教程中获取的 Javascript 代码：[https ://github.com/amatsuda/kaminari/wiki/How-To:-Create-Infinite-Scrolling-with-jQuery](https://github.com/amatsuda/kaminari/wiki/How-To:-Create-Infinite-Scrolling-with-jQuery)

在同一个文件夹中，我有以下文件`index.js.erb`：

```
$("#articles").append("<div class='page'><%= escape_javascript(render(@users)) %></div>");
$("#posts").append("<div class='page'><%= escape_javascript(render(@posts)) %></div>"); 
```

在部分`_posts.html.erb`有这个：

```
<div class='article'>
  <%= image_tag(user.picture_url, :width => 50) %>
  <%= link_to user.name, user %>
  <% if current_user.admin? && !current_user?(user) %>
    | <%= link_to "delete", user, method: :delete,
                              data: { confirm: "You sure?" } %>
  <% end %>
</div> 
```

第一个已经在我的文件中工作了`index.html.erb`，问题出在第二段代码上，当我尝试渲染部分 at 时`@post`，它带来了以下日志：

```
**
'nil' is not an ActiveModel-compatible object that returns a valid partial path.
Extracted source (around line #2):
1: $("#articles").append("<div class='page'><%= escape_javascript(render(@users)) %></div>");
2: $("#posts").append("<div class='page'><%= escape_javascript(render(@posts)) %></div>");
** 
```

我怎样才能渲染那个部分？

非常感谢 :D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:09:23.310

我通常使用 .js.erb 模板将部分渲染为 var，然后使用 JS 将其设置在页面上。一定要 escape_javascript 模板内容，否则你会得到 JS 错误。

```
<% template_html = render :partial => '_feed_item.html.erb' %>
<%="$('div#content').html('#{escape_javascript(template_html)}</div>');" %> 
```

我认为以上应该适用于erb。我使用 HAML，所以我的看起来像：

```
-template_html = render :partial => 'partial_template'
!="$('div#content').html('#{escape_javascript(template_html)');" 
```

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T15:05:06.383

根据您的，如果您的视图正在使用它`In script I'm calling to /users?page=, and I was wondering that It may calls the line`，您必须确保您的控制器正在填充`@posts`变量。你能显示控制器方法`users`吗？

# ruby-on-rails - 通过 Shopify API 添加新的产品类型或供应商？

> ID：12418614
> 
> 赞同：0
> 
> 时间：2012-09-14T05:27:15.760
> 
> 标签：ruby-on-rails, api, shopify

使用 Shopify API ruby​​gem 创建新产品效果很好。但是，我的应用需要能够创建新的产品类型和/或供应商。

我发现当我使用新产品类型或供应商发布创建产品请求时，Shopify 服务器返回 500。

有没有办法通过 API 创建这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T15:11:07.393

看起来它实际上与我们如何在破坏它的 POST 中发送产品标签有关。没有标签的产品仍然可以正常发布。

# java - 将图像分割成可点击区域

> ID：12418618
> 
> 赞同：4
> 
> 时间：2012-09-14T05:27:43.853
> 
> 标签：java, image, swing, jlabel, java-2d

有什么方法可以将图像拆分为区域（现在是 JLabel，但我可以在必要时更改它）？
我在我的程序中使用了 swing，我有一个图像（这个例子是正方形），里面有一些三角形、星形和梯形（可以是 JPG、PNG 等）。
这个想法是用户将在其中一个形状内单击，然后我将在用户单击的区域顶部放置另一个小图标。用户可以点击多个区域，但归根结底，我需要知道点击了哪些形状。

似乎有人可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T15:30:23.757

看看我做了什么：

这是我用于测试的图像：

![原始图像](../Images/5b1f7d6d072d403ab434273204b4461f.png)

图像分割后：

![图像分割后](../Images/df796a373ac5ab3d553cc888cc27beb9.png)

这是来源：

```
import java.awt.Graphics2D;
import java.awt.GridLayout;
import java.awt.Toolkit;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;

public class Test {

    private JFrame frame;
    private JLabel[] labels;
    private static String imagePath = "c:/test.jpg";
    private final int rows = 3; //You should decide the values for rows and cols variables
    private final int cols = 3;
    private final int chunks = rows * cols;
    private final int SPACING = 10;//spacing between split images

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test().createAndShowUI();
            }
        });
    }

    private void createAndShowUI() {
        frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        initComponents();
        frame.setResizable(false);
        frame.pack();
        frame.setVisible(true);
    }

    private void initComponents() {

        BufferedImage[] imgs = getImages();

        //set contentpane layout for grid
        frame.getContentPane().setLayout(new GridLayout(rows, cols, SPACING, SPACING));

        labels = new JLabel[imgs.length];

        //create JLabels with split images and add to frame contentPane
        for (int i = 0; i < imgs.length; i++) {
            labels[i] = new JLabel(new ImageIcon(Toolkit.getDefaultToolkit().createImage(imgs[i].getSource())));
            frame.getContentPane().add(labels[i]);
        }
    }

    private BufferedImage[] getImages() {
        File file = new File(imagePath); // I have bear.jpg in my working directory
        FileInputStream fis = null;
        try {
            fis = new FileInputStream(file);
        } catch (FileNotFoundException ex) {
            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
        }
        BufferedImage image = null;
        try {
            image = ImageIO.read(fis); //reading the image file
        } catch (IOException ex) {
            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
        }
        int chunkWidth = image.getWidth() / cols; // determines the chunk width and height
        int chunkHeight = image.getHeight() / rows;
        int count = 0;
        BufferedImage imgs[] = new BufferedImage[chunks]; //Image array to hold image chunks
        for (int x = 0; x < rows; x++) {
            for (int y = 0; y < cols; y++) {
                //Initialize the image array with image chunks
                imgs[count] = new BufferedImage(chunkWidth, chunkHeight, image.getType());

                // draws the image chunk
                Graphics2D gr = imgs[count++].createGraphics();
                gr.drawImage(image, 0, 0, chunkWidth, chunkHeight, chunkWidth * y, chunkHeight * x, chunkWidth * y + chunkWidth, chunkHeight * x + chunkHeight, null);
                gr.dispose();
            }
        }
        return imgs;
    }
} 
```

唯一的缺陷是我没有检查图像是否大于可能导致问题的屏幕，这将通过在图像上使用简单的图像调整大小`getScaledInstance(int x,int y, int width, in height)`并将其分成块来解决。

## 更新

抱歉，我错过了 Shapes 中的问题部分，请查看/的[`draw(Shape s)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics2D.html#draw%28java.awt.Shape%29)方法。`Graphics2D``Graphics`

我读到这个：

> 任何 Shape 对象都可以用作限制将要渲染的绘图区域部分的剪切路径。剪切路径是`Graphics2D`上下文的一部分；要设置剪辑属性，请调用 `Graphics2D.setClip`并传入定义要使用的剪辑路径的 Shape。

请参阅此处以将 u]image 裁剪为形状：[裁剪绘图区域](http://docs.oracle.com/javase/tutorial/2d/advanced/clipping.html)

**参考：**

*   [如何将图像拆分为块 - Java ImageIO](http://kalanir.blogspot.com/2010/02/how-to-split-image-into-chunks-java.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T12:17:33.043

您可以使用[此处](https://stackoverflow.com/a/3078354/230513)和[此处](https://stackoverflow.com/a/10862262/230513)说明的`getSubImage()`方法。该示例还使用，但您可以将 添加到可以单击的。按钮可以通过多种方式记住有关其图标的详细信息：`BufferedImage``JLabel``Icon``JButton`

*   子类化`JButton`并添加合适的字段。
*   将客户端属性添加到 parent `JComponent`。
*   使用`name`parent 的属性`Component`。

# ios - 在用户点击按钮之前设置计时器

> ID：12418620
> 
> 赞同：0
> 
> 时间：2012-09-14T05:27:57.340
> 
> 标签：ios, uibutton, nstimer

我需要帮助才能在按钮上设置计时器。现在我有这个代码，

```
- (IBAction)btnPlaySound:(id)sender {
    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundFileUrlRef;
    soundFileUrlRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"", CFSTR(""), NULL);
    UInt32 soundID;
    AudioServicesCreateSystemSoundID(soundFileUrlRef, &soundID);
    AudioServicesPlaySystemSound(soundID);
} 
```

我希望用户每 2 秒只能点击一次此按钮，我必须插入一个`NSTimer`我认为但以哪种方式？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:34:32.913

```
- (IBAction)buttonPressed:(id)sender
{
    myTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(timerAction) userInfo:nil repeats:YES];
}

- (void)timerAction
{

    if (myButton.userInteractionEnabled == YES) {
        //do something
    }

    if ([myButton.tag == 0) {
        [myTimer invalidate];
        [myButton setTag:2];
        myButton.userInteractionEnabled = YES;
    }else{
        myButton.userInteractionEnabled = NO;
        int currentTime = myButton.tag;
        int newTime = currentTime - 1;
        [myButton setTag:newTime];
    }

} 
```

为了使上述代码正常工作，您需要声明一个`NSTimer`名为“myTimer”和一个`UIButton`“myButton”。您还需要将按钮初始标签设置为“2”。

# c++ - Visual Studio 2012 中的 _mm_prefetch 在哪里？

> ID：12418622
> 
> 赞同：5
> 
> 时间：2012-09-14T05:28:18.843
> 
> 标签：c++, sse, prefetch

我想使用指令_mm_prefetch。MSDN[指定](http://msdn.microsoft.com/en-us/library/84szxsww%28v=vs.100%29.aspx#feedback)它在头文件 mmintrin.h 中，但没有。我使用 Visual Studio 2012。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T05:33:02.627

看起来像他们文档中的错误。我也找不到它`<mmintrin.h>`，但它似乎在`<xmmintrin.h>`.

* * *

这在 VS2010 中编译：

```
#include <xmmintrin.h>

int main()
{

    _mm_prefetch(0,0);

    return 0;
} 
```

# php - PHP复选框从数据库中检索数据

> ID：12418624
> 
> 赞同：0
> 
> 时间：2012-09-14T05:28:25.303
> 
> 标签：php, checkbox

我有：

```
$array_worker['$worker_id']=$worker_name;  
$array_job['$job_id']=$job_name; 
```

我对带有复选框的动态创建表并将数据存储在数据库中没有问题：

数据以worker_id,job_id的形式存储在表中！
通常，工人可能会从事一项以上的工作，因此我从存储数据的表中创建多维数组！

```
$array_worded['$worker_id'][]=$job_id; 
```

我的问题是：

如何基于**array_worked**数组 创建带有**选中**复选框的动态表？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:48:30.593

```
$table='';

  foreach($array_worker as $key=>$value){
    $table.=''.$value.''; // worker name
      $worker_id = // get worker id from $array_worker

      foreach($array_job as $key_job=>$val_job)
      {
        $job_id = // get job id from $array_job 

        $checked = false;
        foreach( $array_worked[$worker_id] as $key_worked => $val_worked )
        {
          if( $job_id == $val_worked ) // $val_worked contains $job_id
          {
            $checked = true;
            break;
          }
        }
        $table.='<input type="checkbox"' . ( $checked ? ' checked="checked"' : '') . '/>'.$val_job.''; // all jobs from database    
      }
    $table.='';           
  }
$table.=''; 
```

我可能会在语法上犯一些错误，但代码演示了基本原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:51:22.937

很简单：

```
<input type="checkbox" name="formWheelchair"  
<?php
$DATABASE-VALUE = $array_worded['$worker_id'][] = $job_id; // OR WHAT EVER
switch ($DATABASE-VALUE) {
    case 0:
        echo checked />"
        break;
........
}
?> 
```**

# nhibernate-mapping - NHibernate 映射的代码等效于

> ID：12418626
> 
> 赞同：1
> 
> 时间：2012-09-14T05:29:06.163
> 
> 标签：nhibernate-mapping, fluent-nhibernate-mapping

我有一个使用定义类的 <database-object> 元素的 NHibernate 映射。映射看起来有点像这样：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="Foo" assembly="Foo">
  <database-object>
    <definition class="Foo.AuxilliaryData,Foo"/>
  </database-object>    
</hibernate-mapping> 
```

这很好用，但我想按照 NHibernate >=3.2 使用代码映射。有没有办法做到这一点？

（出于兴趣，我想要转换它的原因是为了让 R#“查找用法”适用于`AuxilliaryData`该类。目前 R#（和任何其他代码检查工具）认为该类未使用）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T06:01:50.190

只需在生成配置对象时添加即可

```
config.AddAuxiliaryDatabaseObject(new Foo.AuxilliaryData()); 
```

# ios - UIWindow endDisablingInterfaceAutorotationAnimated: 错误

> ID：12418627
> 
> 赞同：25
> 
> 时间：2012-09-14T05:29:07.727
> 
> 标签：ios, objective-c, orientation, uiwindow

`MFMailComposerViewController`当用户进入并按下**主页**按钮时，我收到以下错误：

> [UIWindow endDisablingInterfaceAutorotationAnimated:] 在没有匹配 -beginDisablingInterfaceAutorotation 的情况下调用 >。无视。

我查看了论坛，其他一些人在不同的情况下遇到了这个错误，但没有解决方案。

我`shouldAutorotate`在应用程序的所有视图控制器中都设置了这个：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:
                                  (UIInterfaceOrientation)interfaceOrientation
{
    return interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown ||
           interfaceOrientation == UIInterfaceOrientationPortrait;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-27T06:52:22.757

检查您是否有多余的调用来关闭键盘、UIActionSheet 等。

我有同样的问题，并通过改变我关闭键盘的方式来解决。我发现下面的这篇文章是最有帮助的

[未知错误 [UIWindow endDisablingInterfaceAutorotation]](https://stackoverflow.com/questions/2368592/please-help-unknown-error-uiwindow-enddisablinginterfaceautorotation)

# vb.net - 单行 Readline()！= 在 VB.NET 中为空

> ID：12418628
> 
> 赞同：1
> 
> 时间：2012-09-14T05:29:09.173
> 
> 标签：vb.net, while-loop

> **可能重复：**
> [如何在 Visual Basic 中使用 while 循环从 StreamReader 中读取？](https://stackoverflow.com/questions/1714234/while-in-vb-to-make-a-read-from-stream-reader)

在 C# 中，我将循环一个流读取器，如下所示。

```
while ((line = reader.ReadLine()) != null)
{
    list.Add(line); // Add to list.
    Console.WriteLine(line); // Write to console.
} 
```

VB.NET 中的等价物是什么？

我试过

```
while ((line = reader.ReadLine()) IsNot Nothing) 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T05:41:28.320

在 C# 中，`((line = reader.ReadLine()) != null)`是**表达式中的赋值**。VB 不支持。因此，您将不得不拆分

*   任务`line = reader.ReadLine()`和
*   比较`line != null`（在VB中`line IsNot Nothing`：）

有很多方法可以做到这一点。[Prasanna在一个平行的答案中](https://stackoverflow.com/a/12418703/87698)提出了一个。这是我更喜欢的一个，因为您不需要重复`ReadLine`调​​用：

```
Do
    Dim line As String = reader.ReadLine()
    If line Is Nothing Then Exit Do
    Console.WriteLine(line)
Loop 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T05:37:22.093

试试这个 ：

```
 line = reader.ReadLine()
    Do Until line Is Nothing
     Console.WriteLine(line)
     line = reader.ReadLine()
    Loop 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T05:46:12.857

在 VB 中，您只能在语句中进行赋值，实际上有一个命令：

```
Let line = reader.ReadLine() 
```

该`Let`命令可以是隐式的，因此您不需要编写它。实际上编辑器会自动将其更改为隐式形式：

```
line = reader.ReadLine() 
```

尽管`Let`命令不可见，但它仍然潜伏在那里。您不能像在 C# 中那样将赋值用作表达式。如果您尝试，您将使用比较运算符`=`而不是赋值运算符`=`。它们是相同的，它们可以是一个只用于赋值，另一个只用于表达式。

您可以在分配后检查 null 并退出循环：

```
Do
  line = reader.ReadLine()
  If line Is Nothing Then Exit Do
  Console.WriteLine(line)
Loop 
```

# android - 围绕其中心旋转图像视图而不切断其边缘

> ID：12418641
> 
> 赞同：6
> 
> 时间：2012-09-14T05:30:52.807
> 
> 标签：android, rotation, imageview

我已经自定义了 imageview，但它只是旋转它的位图而不是整个视图。我不想使用动画，因为我也在拖动 imageview，所以移动动画 imageivew 结果很奇怪，所以坚持`onDraw/draw`，加上覆盖 draw 没什么特别的。

```
 @Override
        protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub
        canvas.save();
        canvas.rotate(rotationAngle, rotationW, rotationH);
        super.onDraw(canvas);
        canvas.restore();
        } 
```

我怎样才能旋转整个视图而不仅仅是它的位图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-27T21:32:09.220

我没有在这里得到提供的答案，但使用

> 机器人：clipChildren =“假”

为父母`ViewGroup` 和压倒一切`draw`，而不是`onDraw`为我做这项工作

欲了解更多信息，请参阅： [Rotating imageview and its background without cropp](https://stackoverflow.com/a/24985829/1885518)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T04:05:37.450

1.  必须检查图像视图的宽度和高度，如果高度>宽度，那么在旋转时宽度必须等于高度并且与高度相同。

2.  使宽度和高度等于fill_parent，然后通过矩阵旋转/平移/缩放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T05:47:44.827

从 API 11 开始，每个视图都可以使用以下方法：

```
.setRotation(float angle); 
```

[http://developer.android.com/reference/android/view/View.html#attr_android:rotation](http://developer.android.com/reference/android/view/View.html#attr_android%3arotation)

* * *

在 API 11 之前，您可以向视图的主要元素添加旋转：

```
@Override
protected void onDraw(Canvas c) {
  c.save();
  c.rotate(...);
  super.onDraw(c);
  c.restore();
} 
```

# android - Android 平板电脑不显示任何 ListView 数据

> ID：12418643
> 
> 赞同：1
> 
> 时间：2012-09-14T05:31:26.110
> 
> 标签：android, android-layout

我已经使用 webservice 开发了 android 应用程序，所有数据都来自 webservice，该应用程序在 android 手机上运行良好，但是当我尝试使用 gottab 平板电脑时，它没有在 listview 上显示任何数据。请任何人帮助我解决问题

# spring - i18 消息属性未通过 Controller 反映在 JSP 中

> ID：12418645
> 
> 赞同：0
> 
> 时间：2012-09-14T05:31:44.907
> 
> 标签：spring, internationalization

感谢任何帮助，因为我在将这些东西放在一起时迷失了方向，并且 JSP 没有按照 URL 参数中传递的语言显示 spring 消息。当在welcome.jsp 中选择不同的语言时，JSP 没有通过SessionLocaleResolver 获取SessionLocale。我在做什么/出了什么问题。

我正在使用 Spring 3.1.1。提前致谢

```
<!-- Configures the @Controller programming model -->
<mvc:annotation-driven />

<!-- Enables the Spring MVC @Controller programming model -->
<mvc:view-controller path="/views/**" view-name="secure/index" />

<bean id="localeResolver"
    class="org.springframework.web.servlet.i18n.SessionLocaleResolver">
    <property name="defaultLocale" value="en" />
</bean>

<!-- URL interceptor -->
<bean id="localeChangeInterceptor"
    class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
    <property name="paramName" value="lang" />
</bean>

<bean id="handlerMapping"
    class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping">
    <property name="interceptors">
        <ref bean="localeChangeInterceptor" />
    </property>
</bean>

<!-- Application Message Bundle -->
<bean id="messageSource"
    class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="classpath:messages" />
</bean>

<bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/views/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

我的欢迎控制器

```
@Controller
public class WelcomeController {

@Autowired
private MessageSource messageSource;

public void setMessageSource(MessageSource messageSource) {
    this.messageSource = messageSource;
}

@RequestMapping(value = "/welcome", method = RequestMethod.GET)
public String welcome(Model model, HttpServletRequest request, HttpServletResponse response) {
    String lang = request.getParameter("lang");
    if (lang == null) {
        lang = "en_US";
    }
    /**
     * Get Message having PARAMETERS in the message {0}, {1}.....{n}
     */
    model.addAttribute(
            "welcome_back_msg",
                messageSource.getMessage("message_welcome_back_user", new Object[] { "(USER)",
                        new DateTime(), new DateTime() }, new Locale(lang)));
    return "welcome";
}
} 
```

消息文件放在/WEB-INF/messages/messages_en.properties

```
welcome_springmvc=Welcome to Spring MVC
message_welcome_back_user=Welcome back {0} Your Last Successful : {1} Failed : {2} 
```

messages_zh.properties

```
welcome_springmvc=\u6B22\u8FCE\u5230 Spring \u7684 MVC 
```

message_welcome_back_user=\u6B22\u8FCE\u56DE\u6765 {0} \u4E0A\u6B21\u6210\u529F：{1} \u5931\u8D25：{2}

messages_fr.properties

```
welcome_springmvc=Bienvenue \u00E0 Spring MVC 
```

message_welcome_back_user=Bienvenue \u00E0 nouveau {0} Votre r\u00E9ussite Derni\u00E8re : {1} manqu\u00E9 : {2}

--- 欢迎.jsp

```
Spring Message from Property:<b><spring:message code="welcome_springmvc" text="default text" /></b>
Message from Controller:<b>${welcome_back_msg} 
```

JSP 图像 ![在此处输入图像描述](../Images/d9f5dafc25f8a2b71f49cb748c7389e5.png)

你可以看到来自 Property 的 Spring Message 总是回退到 locale = en。感谢在这方面的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:14:53.743

仅实例化 LocaleChangeInterceptor Bean 是不够的。与所有拦截器一样，它必须注册为拦截器：

所以把 bean def 放在一个`<mvc:interceptors>`标签里：

```
<!-- URL interceptor -->
<mvc:interceptors>
     <bean id="localeChangeInterceptor"
       class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
       <property name="paramName" value="lang" />
     </bean>
</mvc:interceptors> 
```

*顺便说一句：看看jsp spring消息标签*

# php - jquery/mysql 插入错误

> ID：12418647
> 
> 赞同：0
> 
> 时间：2012-09-14T05:32:12.757
> 
> 标签：php, javascript, jquery, html, codeigniter

正如您可能从下面的代码中收集到的那样，我正在尝试使配置文件更新程序脚本正常工作。不过，我似乎遇到了问题。当脚本完成处理时，我收到“你好”警报，但似乎 jquery 没有正确地从文本框中获取值，因为我的 mysql 表没有返回任何插入的内容。有任何想法吗？下面是我的代码和截图：

![在此处输入图像描述](../Images/eaa2f2bd84e3491bb6f7936fbb1b85c2.png)

前端代码：

```
<?php include("vh.php"); ?>
<script type="text/javascript">
    $(document).ready(function() {
    var birthdate = $("#birthdate").val();
    var sex = $("#sex :selected").val();
    var interestedIn = $("#interestedIn :selected").val();
    var relationshipStatus = $("#relationshipStatus :selected").val();
    var knownLanguages = $("#knownLanguages").val();
    var religiousViews = $("#religiousViews").val();
    var politicalViews = $("#politicalViews").val();
    var aboutMe = $("#aboutMe").val();
    var mobilePhone = $("#mobilePhone").val();
    var neighborhood = $("#neighborhood").val();
    var website = $("#website").val();
    var email = $("#email").val();

    $("#submitForm").live('click', function() {
        updateUserInfo();
    });

    function updateUserInfo() {
        jQuery.ajax({
            type: "POST",
            dataType: "JSON",
            url: "<?=base_url()?>index.php/regUserDash/updateUserInfo",
            data: { birthdate: birthdate,
                    sex: sex,
                    interestedIn: interestedIn,
                    relationshipStatus: relationshipStatus,
                    knownLanguages: knownLanguages,
                    religiousViews: religiousViews,
                    politicalViews: politicalViews,
                    aboutMe: aboutMe,
                    mobilePhone: mobilePhone,
                    neighborhood: neighborhood,
                    website: website,
                    email: email
            }, success: function(data) {
            if(data.userInfoUpdated == true) {
                alert("hello");
            }
          }
       });
    }
    });
</script>
<?php $selectedId = $_REQUEST['id'];
      $myuserid = $this->session->userdata('userid'); ?>
                        <table style="width: 34%">
                                <tr>
                                    <td style="width: 193px"><span class="font1">Birthdate</span></td>
                                    <td style="width: 275px">
                                    <input id="birthdate" class="textbox1" style="width: 200pt" type="text" /></td>
                                </tr>
                                <tr>
                                    <td style="width: 193px"><span class="font1">Sex</span></td>
                                    <td style="width: 275px">
                                    <select class="textbox1" id="sex" style="width: 207pt">
                                    <option selected="selected">Select your sex</option>
                                    <option>Male</option>
                                    <option>Female</option>
                                    </select></td>
                                </tr>
                                <tr>
                                    <td style="width: 193px" class="font1">Interested In</td>
                                    <td style="width: 275px">
                                    <select class="textbox1" id="interestedIn" style="width: 207pt">
                                    <option selected="selected">Select your interest</option>
                                    <option>Men</option>
                                    <option>Women</option>
                                    </select></td>
                                </tr>
                                <tr>
                                    <td style="width: 193px" class="font1">Relationship Status</td>
                                    <td style="width: 275px">
                                    <select class="textbox1" id="relationshipStatus" style="width: 207pt">
                                    <option selected="selected">Select your relationship status</option>
                                    <option>Single</option>
                                    <option>In a relationship</option>
                                    <option>Engaged</option>
                                    <option>Married</option>
                                    <option>It's complicated</option>
                                    <option>In an open relationship</option>
                                    <option>Widowed</option>
                                    <option>Seperated</option>
                                    <option>Divorsed</option>
                                    <option>In a civil union</option>
                                    <option>In a domestic partnership</option>
                                    </select></td>
                                </tr>
                                <tr>
                                    <td style="width: 193px" class="font1">Known Languages</td>
                                    <td style="width: 275px">
                                    <input class="textbox1" id="knownLanguages" style="width: 200pt" type="text" /></td>
                                </tr>
                                <tr>
                                    <td style="width: 193px" class="font1">Religious Views</td>
                                    <td style="width: 275px">
                                    <input class="textbox1" id="religiousViews" style="width: 200pt" type="text" /></td>
                                </tr>
                                <tr>
                                    <td style="width: 193px" class="font1">Political Views</td>
                                    <td style="width: 275px">
                                    <input class="textbox1" id="politicalViews" style="width: 200pt" type="text" /></td>
                                </tr>
                                <tr>
                                    <td style="width: 193px" class="font1">About Me<br />
                                    <br />
                                    <br />
                                    <br />
                                    </td>
                                    <td style="width: 275px">
                                    <textarea class="textarea2" id="aboutMe" style="width: 198pt; height: 93px"></textarea></td>
                                </tr>
                                <tr>
                                    <td style="width: 193px" class="font1">Mobile Phone</td>
                                    <td style="width: 275px">
                                    <input class="textbox1" id="mobilePhone" style="width: 200pt" type="text" /></td>
                                </tr>
                                <tr>
                                    <td style="width: 193px" class="font1">Neighborhood</td>
                                    <td style="width: 275px">
                                    <input class="textbox1" id="neighborhood" style="width: 200pt" type="text" /></td>
                                </tr>
                                <tr>
                                    <td style="width: 193px" class="font1">Website</td>
                                    <td style="width: 275px">
                                    <input class="textbox1" id="website" style="width: 200pt" type="text" /></td>
                                </tr>
                                <tr>
                                    <td style="width: 193px" class="font1">Email</td>
                                    <td style="width: 275px">
                                    <input class="textbox1" id="email" style="width: 200pt" type="text" /></td>
                                </tr>
                                <tr>
                                    <td style="width: 193px" class="font1">&nbsp;</td>
                                    <td style="width: 275px; text-align: right">
                                    <input id="submitForm" type="button" value="Submit" style="width: 63px; height: 28px" class="button1"></td>
                                </tr>
                            </table> 
```

后端代码：

```
public function updateUserInfo() {
        $userid = $this->session->userdata('userid');
        $birthdate = $this->input->post("birthdate");
        $sex = $this->input->post("sex");
        $interestedIn = $this->input->post("interestedIn");
        $relationshipStatus = $this->input->post("relationshipStatus");
        $languages = $this->input->post("languages");
        $religiousViews = $this->input->post("religiousViews");
        $politicalViews = $this->input->post("politicalViews");
        $aboutMe = $this->input->post("aboutMe");
        $mobilePhone = $this->input->post("mobilePhone");
        $neighborhood = $this->input->post("neighborhood");
        $websites = $this->input->post("websites");
        $email = $this->input->post("email");

        $this->db->query("INSERT INTO user_info (birthdate, sex, interestedIn, relationshipStatus, Languages, religiousViews, politicalViews, aboutMe, mobilePhone, neighborhood, websites, email, userid)
                          VALUES('{$birthdate}', '{$sex}', '{$interestedIn}', '{$relationshipStatus}', '{$languages}', '{$religiousViews}', '{$politicalViews}', '{$aboutMe}', '{$mobilePhone}', '{$neighborhood}', '{$websites}', '{$email}', '{$userid}')");

        echo json_encode(array('userInfoUpdated' => true));
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T05:43:50.357

当页面完成加载时，您会立即从表单中获取值，但此时它们是空的。当有人填写表格并单击提交时，函数会从变量生日、性别等中获取值，但它们是空的。

你必须移动变量赋值

```
var birthdate = $("#birthdate").val();
var sex = $("#sex :selected").val();
... 
```

在 updateUserInfo() 函数中是这样的：

```
 data: { 
     birthdate: $("#birthdate").val(),
     sex: $("#sex").val(),
     ...
 } 
```

# string - vb.net中的长度不能小于零参数名称长度错误

> ID：12418650
> 
> 赞同：0
> 
> 时间：2012-09-14T05:32:28.550
> 
> 标签：string, datatable, dataset, substring, vb.net-2010

正在从数据库中获取数据并存储在 dataset.dataset 中包含电话号码列表。我想找出每个电话号码的长度。如果长度为 10，则表示将其添加到一个数据表中。或长度大于 10 意味着从电话号码的右侧获取 10 个字符并将其存储在同一个数据表中。这是我的代码。当我调试代码时，我只得到 8000 行。但最初数据集包含 40,700行值。
数据表达到 8000 行后出现错误

```
my code
-------
  ada.Fill(ds, "reports.renewal_contact_t ")

                ds.Tables(0).DefaultView.RowFilter = " PHONE NOT like'0'"
                dt = ds.Tables(0)
                For Each q In dt.Rows
                    chkphone = q("PHONE").ToString
                    chkdphone = Regex.Replace(chkphone, "[^\d]", "")

                    'MessageBox.Show(chkdphone)

                    If (chkdphone.Length = 10) Then
                        Dim anyRow As DataRow = dt2.NewRow
                        anyRow(0) = chkphone.ToString
                        dt2.Rows.Add(anyRow)

                    ElseIf (chkdphone.Length >= 10) Then
                        rsltstring = chkdphone.Substring(chkdphone.Length, -10)

                        Dim anyrow1 As DataRow = dt2.NewRow
                        anyrow1(0) = rsltstring.ToString
                        dt2.Rows.Add(anyrow1)
                    Else

                    End If
                Next

                new_ds.Tables.Add(dt2)
                ComboBox1.DataSource = new_ds.Tables(0)
                ComboBox1.DisplayMember = "PHONE" 

 Error
 -----
 length cant be less than zero parameter name length 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:35:41.320

您不能在`Substring`方法中使用负长度。从长度中减去 10 以获得所需字符串的起点：

```
rsltstring = chkdphone.Substring(chkdphone.Length - 10, 10) 
```

由于您想要从该点开始的其余字符串，因此实际上不需要第二个参数：

```
rsltstring = chkdphone.Substring(chkdphone.Length - 10) 
```

# c# - C# 组合框按顺序填充，从外部 XML 填充数据

> ID：12418661
> 
> 赞同：1
> 
> 时间：2012-09-14T05:33:13.380
> 
> 标签：c#, .net, winforms

我在 C# winforms 中`A`有两个组合框。 默认情况下，B 将被禁用。我正在从外部 xml 文件将数据项填充到 A 中。`B`

现在，如果用户在 A 中选择选项，B 将被启用，并将根据 A 中的选择从另一个 XML 填充。最重要的是，我必须在**单个函数**中实现所有这些。

我如何实现这一目标？

我可以触发 B 的选择更改事件，但这需要另外一个功能。有什么办法吗？

这是片段：

```
 XmlDocument errors = new XmlDocument();
    errors.Load("../../ErrorFile.xml");
    XmlElement root = errors.DocumentElement;
    XmlNode categoryNode = root.FirstChild;
    XmlNodeList nodes = categoryNode.ChildNodes;
    for (int i = 0; i < nodes.Count; i++)
         A.Items.Add(nodes[i].Name);
    string category = A.SelectedItem.ToString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:43:55.143

使用 A 的 ComboBox.SelectedIndexChanged 事件填充组合框 B

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T06:06:21.297

说，你有一个文件“In.xml”：

```
<root>
  <a name="1">
    <b>b1</b>
    <b>b2</b>
    <b>b3</b>
  </a>
  <a name="2">
    <b>c1</b>
    <b>c2</b>
    <b>c3</b>
  </a>
</root> 
```

和 a`Form`有两个组合框，然后：

```
 XElement x;

    public Form1()
    {
        InitializeComponent();

        x = XElement.Load("In.xml");
        comboBox1.Items.AddRange(
             x.Elements("a")
              .Select(a => a.Attribute("name").Value)
              .ToArray());
        comboBox1.SelectedIndexChanged += new EventHandler((s, e) =>
        {
            comboBox2.Items.Clear();
            if (comboBox1.SelectedIndex > -1)
            {
                comboBox2.Items.AddRange(
                    x.Elements("a")
                     .First(a => a.Attribute("name")
                                  .Value
                                  .Equals(comboBox1.SelectedItem))
                     .Elements()
                     .Select(b => b.Value)
                     .ToArray());
            }
        });
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T05:49:22.790

将组合框一绑定到相关的 xml 文件。并使用其选择更改事件将组合框二绑定到与组合框的选定值相关的其他 xml。

# iphone - 文本字段值未存储在字符串中

> ID：12418665
> 
> 赞同：-3
> 
> 时间：2012-09-14T05:34:15.897
> 
> 标签：iphone, objective-c, ios, xcode, uitextfield

在我的应用程序中，我有很多文本字段，最后还有拍照按钮。但是当我从选择照片返回时，插入的文本字段值显示为空白。

单击照片按钮时，我尝试将文本字段值存储到字符串中。当我从那里返回时，我将字符串值设置为 text fied 但它向我展示了糟糕的过度。

帮我！！

```
-(void)ViewWillAppear
{
     if (clkph) {
             txtdate.text=[NSString stringWithFormat:@"%@",phdate];
             NSLog(@"%@",txtdate.text);
             txttime.text=[NSString stringWithFormat:@"%@",phtime];
             NSLog(@"%@",txttime.text);
         }
}

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex{

    clkph=YES;
    phdate=[NSString stringWithFormat:@"%@",txtdate];
    NSLog(@"%@",phdate);
    phtime=[NSString stringWithFormat:@"%@",txttime];
    NSLog(@"%@",phtime);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T05:44:48.617

这样做是因为我假设 phdate 和 phtime 作为 UITextField：

```
if (clkph) {
         txtdate.text=[NSString stringWithFormat:@"%@",phdate];
          NSLog(@"%@",txtdate.text);
          txttime.text=[NSString stringWithFormat:@"%@",phtime];
          NSLog(@"%@",txttime.text);
     }

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex{

  clkph=YES;
  phdate=[NSString stringWithFormat:@"%@",txtdate.text];
  [phdate retain];
  NSLog(@"%@",phdate);
  phtime=[NSString stringWithFormat:@"%@",txttime.text];
  [phtime retain];
  NSLog(@"%@",phtime);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:41:34.480

试试这个：

```
if (clkph) {
     NSString* txtdate=[NSString stringWithFormat:@"%@",phdate];
     NSLog(@"%@",txtdate);
     NSString* txttime=[NSString stringWithFormat:@"%@",phtime];
     NSLog(@"%@",txttime);
 } 
```

# java - 如何显示处理信息。在节目中？

> ID：12418666
> 
> 赞同：0
> 
> 时间：2012-09-14T05:34:26.093
> 
> 标签：java, swing, jbutton, event-dispatch-thread, jprogressbar

我创建了一个包含一个`JButton`和一些其他组件的 GUI。当我单击按钮时，涉及一些后端处理，需要将近 10-12 秒。

我应该如何以图形方式表示它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T06:03:17.233

使用 a[`JProgressBar`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JProgressBar.html)显示任务的进度。

![JProgressBar 为 52%](../Images/538f251afb6206b3d96487267f86d8cc.png)

将其放在具有“取消”按钮的非模式对话框中（如果可以安全地取消长时间运行的操作）。

请务必遵守 EDT 的[规则，](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)通过“在 EDT 之外”执行长时间运行的任务，而对进度条的更新是在“在 EDT 上”完成的。提供[`SwingWorker`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)轻松访问两者。

# notepad - 在记事本中设置分页符的十六进制字符

> ID：12418671
> 
> 赞同：1
> 
> 时间：2012-09-14T05:34:58.030
> 
> 标签：notepad

我已在程序输出中将 Hexa 字符 Hex(12) 设置为旧的打印机对齐方式以进行分页。使用记事本打开输出文本文件时，Hex'oc' 将显示为小男性符号（带有小圆圈和加号底部）。但是一些记事本显示为相同的分页符符号的小方框。

使用带有小公符号的记事本时，打印对齐正常。但是，当使用带有小方框符号的记事本时，打印对齐不正确。

顺便说一句，我使用的是 MS Window XP Pro 版本 2002 服务包 3。

任何人都可以帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:40:50.773

你是说这个♀“女性星座”吗？

可能是在发现此类符号时切换到 unicode 的编辑器。然后您的打印机可能会得到不同的数据。

另一个原因是打印机和驱动程序的类型：有些驱动程序只发送必须在纸上绘制的点，其他驱动程序只发送文本，打印机自己完成。

你写了两次记事本，你的意思是同一个原生的windows程序吗？它有哪些版本？如果我继续“帮助”>“关于”，则会打印：版本 6.1.7601

# clearcase - 如何更新 UCM 中所有成员基线的属性？

> ID：12418673
> 
> 赞同：1
> 
> 时间：2012-09-14T05:34:58.123
> 
> 标签：clearcase, clearcase-ucm, baseline

我们的组件有复合基线。

每当我们在推荐baseline之后发布产品时，我都会更改baseline的属性以更改促销级别。

默认情况下，提升级别为“ `INITIAL`”。
当我们发布产品时，我会将 Promotion 属性更改为“ `EXTERNAL RELEASE`”。

但要做到这一点，我必须去编辑每个成员的基线属性。
有什么方法可以更改复合基线属性以在其成员中复制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T05:41:29.420

不，复合基线的自定义值与其基线成员之间没有“继承”。

最好编写操作脚本，通过描述复合基线，提取基线成员名称，并`cleartool mkattr -replace`使用新值对每个成员进行操作。
（`cleartool mkattr`有一个`-recurs`-recursive - 选项，但它只适用于目录，它不适用于非文件系统对象）

```
cleartool descr -fmt "%[depends_on]Cp\n" aCompositeBaseline@\aPVob
# for each member baselines
cleartool mkattr -replace PromotionLevel "EXTERNAL RELEASE" baseline:aBaseline@\aPVob 
```

请注意我如何使用要在其上修改自定义属性值的对象的完全限定名称： `baseline:aBaseline@\aPVob`.

由于“ `EXTERNAL_RELEASE`”不是默认的提升级别，您需要先定义它：请参阅“[关于为 UCM 基线创建自定义提升级别和属性类型](http://www-01.ibm.com/support/docview.wss?uid=swg21135893)”。

![定义晋升级别](../Images/158ce15347d67bf5d04b13bb58fa5428.png)

# c# - Metro 中专门用于 Tile Update 的嵌入字体

> ID：12418675
> 
> 赞同：0
> 
> 时间：2012-09-14T05:35:14.083
> 
> 标签：c#, fonts, windows-8, microsoft-metro

*   如何在 Metro UI 应用程序中使用嵌入字体？
*   是否可以将一个用于 Tile Update？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:47:31.660

关于如何使用嵌入字体，首先看一下[关于字体嵌入](http://msdn.microsoft.com/en-us/library/windows/apps/ms530303(v=vs.85).aspx)。您可能使用的一些类是[CreateFontFace](http://msdn.microsoft.com/en-us/library/windows/desktop/dd368196(v=vs.85).aspx)或[CreateFontFileReference](http://msdn.microsoft.com/en-us/library/windows/desktop/dd368197(v=vs.85).aspx)。

不，没有办法在磁贴更新期间更改磁贴上的字体（当然，除非字体是您发送到磁贴的徽标/图像的一部分）。作为参考，这里是用于向您的磁贴发送实时更新的[磁贴架构](http://msdn.microsoft.com/en-us/library/windows/apps/br212859.aspx)，它无法更改字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-08T07:31:28.980

要在您的 Windows 应用商店应用程序中嵌入字体，请将字体作为“内容”添加到您的项目中，然后在您的 XAML 中简单地编写如下内容：

```
<TextBlock FontFamily="/Fonts/MyFont.otf#Cool Font"/> 
```

假设您的字体名称是“Cool Font”，文件名是“MyFont.otf”，并且您放置在“Fonts”文件夹中

# html - CSS 不会更改 DIV 中链接的字体颜色

> ID：12418676
> 
> 赞同：3
> 
> 时间：2012-09-14T05:35:18.437
> 
> 标签：html, css

不知道我错过了什么，但我的 HTML 忽略了我的 CSS 样式表规范的链接。我的所有其他 CSS 定义在整个页面中都可以正常工作。任何帮助是极大的赞赏！

我的 CSS 页面包括：

```
.footer {
    background:url( );
    margin:0;
    height:70px;
    clear:both;
}

.footer {
    margin:0;
    padding:10px;
    line-height: 175%;
    font:normal 11px helvetica, arial, sans-serif;
    color:#999;
}

a.footer {
    font:normal 11px helvetica, arial, sans-serif;
    color:#999;
    line-height: 175%;
}

a.footer:link {
    outline:none;
    text-decoration:none;
}

a.footer:visited {
    outline:none;
    text-decoration:none;
}

a.footer:hover {
    text-decoration:underline;
    font-weight:normal;
} 
```

我的网页包括：

```
<div class="footer">
<a href="http://www.someurl.org"> Page Title 1</a><br />
<a href="http://www.someurl.org/credits_policies.html">Page Title 2</a>
</div> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-14T05:38:06.407

全部更改`a.footer`为`.footer a`

*   `a.footer`意味着所有`<a>`与类`footer`
*   `.footer a`表示`<a>`在具有类的元素内`footer`，即您的`<div>`.

你的 CSS 应该是这样的：

```
.footer a { font:normal 11px helvetica,arial,sans-serif; color:#999; line-height: 175%; } 

.footer a:link { outline:none; text-decoration:none; }

.footer a:visited { outline:none; text-decoration:none; }

.footer a:hover { text-decoration:underline; font-weight:normal; } 
```

以下是类选择器和后代选择器的一些教程：

[类选择器](http://www.w3.org/TR/CSS2/selector.html#class-html)

[后代选择器](http://www.w3.org/TR/CSS2/selector.html#descendant-selectors)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T05:38:04.333

你会想`a.footer`变成`.footer a`. 您当前的 css 尝试自行设置具有“页脚”类的链接的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T05:39:34.313

它应该是

```
.footer a
{
//your syles
} 
```

目前`CSS`正在应用于所有具有类的链接，`footer`但情况并非如此。你`div`有那个类

**[演示](http://jsfiddle.net/BGJ7b/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T05:40:45.310

将所有更改`a.footer`为`.footer a`as `a.footer`is nothing here 这意味着将样式应用于`a`with`class footer`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T05:41:05.060

嗨，现在习惯了

```
.footer a{
// your css here 
} 
```

**并使用了这个格式的标题**

```
<a href="#" title="Your title here ">helo</a> 
```

# javascript - HTML5 音频加载和播放无法在 iPad 上运行

> ID：12418677
> 
> 赞同：1
> 
> 时间：2012-09-14T05:35:20.653
> 
> 标签：javascript, ipad, html, media-player, html5-audio

我已经尝试了所有我能想到的解决方案，但仍然无法让它发挥作用。我可以在包括 iPhone 在内的每个浏览器中加载和播放 mp3 或 ogg，但唯一剩下的边界是 iPad，并且无法播放音频。当我点击歌曲时，它会将代码加载到音频播放器 src 中，但它不会播放歌曲。同样，这适用于所有其他支持 HTML5 的浏览器，但 iPad 不播放该文件。如果我将文件路径粘贴到代码中，歌曲就会播放，所以我认为它与加载和播放功能有关，但我不知道具体如何。

下面是相应的代码。任何帮助都会非常感激。提前致谢。

**HTML**

```
<div id="song-title-display"></div>

        <div id="song-title">
        <ul class="list">
        <li><a class="tracks selected" id="1_tracks" href="1" data-file="song1">Song1</a></li>
        <li><a class="tracks" id="2_tracks" href="2" data-file="song2">Song2</a></li>
        </ul>
        </div>

    <audio id="audio-player" name="audio-player">
    <source id="source-file1" src="" type="audio/mpeg">
    <source id="source-file2" src="" type="audio/ogg">
    </audio> 
```

**JS**

```
$("#song-title a").click(function() {
  var name = $(this).html(),
      filename = $(this).attr("data-file");
      filename2 = "uploadedsongsfolder" + filename;
      filename3 = "uploadedsongsfolder" + filename + ".mp3";
      filename4 = "uploadedsongsfolder" + filename + ".ogg";
    $('#song-title-display').html($(this).html());
     clickedID=$(this).attr('href');
     $('.tracks').removeClass('selected'); $('#'+clickedID+'_tracks').addClass('selected');

    document.getElementById('source-file1').src =   filename3;
    document.getElementById('source-file2').src =   filename4;
    $("#audio-player")[0].load();
    $("#audio-player")[0].play();
    return false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-21T08:43:58.550

尝试这个 ：

```
$("#audio-player")[0].addEventListener('canplaythrough', mobileReady, false);

function mobileReady(){

  $("#audio-player")[0].play() 

} 
```

# xna - 如何移动没有小数位的精灵

> ID：12418681
> 
> 赞同：1
> 
> 时间：2012-09-14T05:35:36.627
> 
> 标签：xna, detection, pixel, move, xna-4.0

目前，我的游戏使用了一些像素检测。例如，对于精灵，我检索其位置的像素。当我移动它时，位置值有一些小数，如：

```
thePixel = new vector(position.X, position.Y);
//thePixel = (52.2451, 635.2642) 
```

所以我必须四舍五入这些值

```
thePixel = new vector((float)Math.Round(position.X, 0), (float)Math.Round(position.Y, 0));
//thePixel = (52, 635) 
```

我想知道是否有其他方法可以在不四舍五入的情况下获得完美的位置（意味着没有小数）。这可能是一个移动方法问题吗？

感谢阅读，希望对您有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T06:35:35.973

您无法真正绕过对值进行四舍五入的需要，但您可以通过使用扩展方法使其编码变得更好：

```
public static class Vector2Extensions
{
    public static Vector2 Floor(this Vector2 vector)
    {
        return new Vector2((float)Math.Floor(vector.X), (float)Math.Floor(vector.Y));
    }
} 
```

（如您所见，我个人更喜欢`Floor`。`Round`我也有一个`Ceiling`。）

然后你可以像这样使用它：

```
HandleCollision(position.Floor()); 
```

* * *

当然，如果您正在执行逐像素碰撞检测 - 您的碰撞数学可能应该是基于整数的（不存储为`float`a `Vector2`）。你可以使用`Point`. 原来我也有一个扩展方法：

```
public static class Vector2Extensions
{
    public static Point AsXnaPoint(this Vector2 v)
    {
        return new Point((int)v.X, (int)v.Y);
    }
} 
```

然后：

```
HandleCollision(position.AsXNAPoint()); 
```

或者可能：

```
HandleCollision(position.Floor().AsXNAPoint()); 
```

# php - PHP PDO 行计数

> ID：12418684
> 
> 赞同：0
> 
> 时间：2012-09-14T05:35:54.713
> 
> 标签：php, mysql, pdo, rowcount

如果有任何事件绑定到带有 host_id 参数的主机，我想检查行，如果没有任何事件绑定到主机，则一切都很好，它不会打印出来，但是如果主机绑定到其中一个事件，它没有列出事件，但是如果我删除了我在下面指出的带有注释问题的代码，问题从这里开始，问题在这里结束，它会列出事件。我也将上面的 fetchAll 函数用于另一件事，上面没有任何这样的错误，但是在下面的部分中，它没有列出事件，我该如何解决？

谢谢

```
try
{
    $eq = "SELECT * FROM `events` WHERE `host_id` = :id AND `confirmed` = '1' ";
    $eq_check = $db->prepare($eq);
    $eq_check->bindParam(':id', $id, PDO::PARAM_INT);
    $eq_check->execute();

    //problem starts here
    $count3 = $eq_check->fetchAll();
    $rowCount = count($count3);

    if ($rowCount == 0) 
    {
        echo "None"; 
    }
    //problem ends here

    while($fetch = $eq_check->fetch (PDO::FETCH_ASSOC) )
    { 
        $_loader = true;

        $event_id = $fetch['event_id'];
        $event_name = $fetch['event_name'];
        $link = "https://www.mywebsite.com/e/$event_id";

        echo "<a target=\"_blank\" href=\"$link\"><li>$event_name</li></a>";
    }
} 
catch(PDOException $e)
{
    $log->logError($e." - ".basename(__FILE__));
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:50:12.213

如果不执行两次，您就无法获取两次。如果您不想只是重复使用您的`$count3`项目，您可以再次触发，`closeCursor()`然后`execute()`再次获取集合。

要重用您的`$count3`变量，请将您的`while`循环更改为：`foreach($count3 as $fetch) {`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-14T05:47:42.797

当你有你的代码时它没有列出事件的原因是结果集已经使用你的 fetchAll 语句获取（`fetchAll`不会留下任何东西要在以后使用 获取`fetch`）。

在这种情况下，您最好运行 a`select count(*)`来获取行数，然后实际运行完整的查询来遍历结果：

[PDO 中的](http://php.net/manual/en/pdostatement.rowcount.php)一个示例如下：

```
<?php
$sql = "SELECT COUNT(*) FROM fruit WHERE calories > 100";
if ($res = $conn->query($sql)) {

    /* Check the number of rows that match the SELECT statement */
  if ($res->fetchColumn() > 0) {

        /* Issue the real SELECT statement and work with the results */
         $sql = "SELECT name FROM fruit WHERE calories > 100";
       foreach ($conn->query($sql) as $row) {
           print "Name: " .  $row['NAME'] . "\n";
         }
    }
    /* No rows matched -- do something else */
  else {
      print "No rows matched the query.";
    }
}

$res = null;
$conn = null;
?> 
```

请注意，您不能直接使用 rowCount 来获取所选行数 - 它旨在显示已删除的行数等。

# javascript - JavaScript 打印功能使日历停止工作

> ID：12418685
> 
> 赞同：0
> 
> 时间：2012-09-14T05:35:54.613
> 
> 标签：javascript, php, mootools, joomla1.7

我使用 Joomla 作为我的 CMS，并使用下面的 JavaScript 来打印页面的特定区域（实际上是这里的整个正文）。

JavaScript

```
function printDiv(divName) {

             var printContents = document.getElementById(divName).innerHTML;
             var originalContents = document.body.innerHTML;
             document.body.innerHTML = printContents;
             window.print();
             document.body.innerHTML = originalContents;
    } 
```

我使用 Joomla 在正文选择的同一页面上获取日历。

PHP

```
<?php echo JHTML::calendar($filter_date_to,'filter_date_to', 'filter_date_to', '%Y-%m-%d', `'');?> 
```

尝试打印某些内容后，日历停止工作。控制台中也没有显示 js 错误。似乎是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:05:26.903

假设日历依赖于 javascript，它可能会停止工作，因为所有事件侦听器都未绑定。您最好在新的弹出窗口中打开日历信息并打印它，或者拍摄日历信息的快照，使用 display:none 隐藏当前日历，创建一个可见的新 div 并将该快照放在要打印的日历信息，然后在完成后将其删除。

除此之外，您还可以使用 CSS 媒体查询来使页面中您不想打印的所有部分消失，因此您根本不必这样做。

# php - 我想要一个像 cron 工作这样的服务

> ID：12418686
> 
> 赞同：1
> 
> 时间：2012-09-14T05:36:03.337
> 
> 标签：php, cron

主要问题是如何自动创建一个 PHP 文件并在服务器上运行一段时间？就像我在浏览器中加载 abc.php 文件一样，它首先会在服务器上创建一个 xyz.php 文件并在服务器端运行它一段时间，当时间完成时它会重新加载 abc.php 文件。

请任何帮助，我想要这个很快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:49:03.500

您可以使用[crontab](http://www.manpagez.com/man/5/crontab/)

在您的 contab 中，您输入以下内容：

```
*/5 * * * * /usr/bin/php /path/to/your/file.php 
```

您的“file.php”脚本将每 5 分钟启动一次。

在数据库上管理您的日程安排，file.php 可以在时间到期时运行您想要的任何代码。

# jakarta-mail - JavaMail中的用户名和来自有什么区别

> ID：12418687
> 
> 赞同：2
> 
> 时间：2012-09-14T05:36:03.583
> 
> 标签：jakarta-mail

发送邮件时，应提供用户名和密码以访问邮件服务器。然后为什么仍然需要“来自”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:40:34.613

根据您的邮件服务器，您可能被允许以一个用户身份进行身份验证，然后以其他几个用户的身份发送邮件。例如，您可能想以您自己的身份登录，然后将您的公司通讯发送为“newsletter@company.com”。

# c++ - 外部库中出现奇怪的 C2065 错误

> ID：12418689
> 
> 赞同：1
> 
> 时间：2012-09-14T05:36:09.107
> 
> 标签：c++, c, namespaces, declaration

我在 MS VS 2010 的 C++ 项目中有一个用 C 编写的外部代码。它带有 .h 和 .c 文件，我使用 include 像这样：

```
extern "C"{
#include "Extern\libname.h"
} 
```

效果很好。然后我阅读了 [谷歌 C++ 风格指南](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml)并删除了所有条目

```
using namespace std; 
```

将它们替换为

```
std::whatINeed 
```

到处。

错误出现了-

```
error C2065: 'FILE' : undeclared identifier 
```

在外部库的标题中。然后我将光标移动到该代码中的单词“FILE”，有

```
tydef _iobuf FILE 
```

我应该在我的代码中添加什么来修复它？我不想更改外部代码，因为它可以更新，并且我将被迫在每次更新时添加我的修复程序。另外，我确信有一个由我引起的简单错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T06:04:08.003

添加

```
#include <cstdio> 
```

上面你包括。

# javascript - 为旋转添加触摸功能

> ID：12418692
> 
> 赞同：1
> 
> 时间：2012-09-14T05:36:17.413
> 
> 标签：javascript, touch, webgl

我正在尝试在使用[webgl-surface-plot](http://code.google.com/p/webgl-surface-plot/)的 3d 绘图的旋转中添加触摸设备的兼容性，但我无法进行最基本的测试。[这](http://bbhakhrani.bol.ucla.edu/SOCR_HTML5_BivariateNormalCalculator.html)是该页面的链接。出于测试目的，我添加了以下代码，但我无法让这个简单的东西工作。

```
var is_touch_device = 'ontouchstart' in document.documentElement;
function tStart(e){document.getElementById("rangeSigmaX").innerHTML='touchstart';} 
```

随后是 SurfacePlot.initGL 函数 (SurfacePlot.js) 中的以下内容。

```
if(is_touch_device){
        var el = $('canvas.surfacePlotCanvas');
        el.addEventListener('touchstart', tStart, false);
        el.addEventListener("touchend", tStart, false);
        el.addEventListener("touchcancel", tStart, false);
        el.addEventListener("touchleave", tStart, false);
        el.addEventListener("touchmove", tStart, false); 
        } 
```

这些听众似乎都没有工作。任何帮助，将不胜感激。

# javascript - Jquery 菜单行为不规律，定位错误和一般错误

> ID：12418695
> 
> 赞同：0
> 
> 时间：2012-09-14T05:36:25.627
> 
> 标签：javascript, jquery, html, css

我做了一个水平菜单。

它应该做的是让其下方的元素以有序的方式沿右侧排列。相反，它看似随机地在整个页面中跳转，并且还有其他问题，例如闪烁。我已经坚持了一段时间，并且希望得到一些解决这些问题的技巧。这是一个显示问题的**[JS FIDDLE](http://jsfiddle.net/CUsrS/)**，全部被剥离。

谢谢。

以下是当前的问题：

*   子菜单与主导航的右侧不完全对齐，即使它的偏移量是由主导航偏移量 + 宽度计算的。

*   闪烁（使用大边框适度解决）

*   Elements 有时无法捕捉鼠标悬停，为了重现，我将鼠标一直向下移动并向上移动

*   菜单滑出部分以某种随机顺序移到页面的右下角，并继续移得更远（哎呀）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:08:59.320

闪烁问题的解决方案是使子菜单项重叠或触摸。这可以通过向菜单项添加一个像素的白色边框来完成。

当涉及到对齐问题（这可能是有意的）时，您需要添加（两次）元素的填充和边框，因为宽度在填充内。

# javascript - 使用电话间隙在 Android 应用程序中显示来自 SQL Lite 的数据

> ID：12418697
> 
> 赞同：0
> 
> 时间：2012-09-14T05:36:46.417
> 
> 标签：javascript, android, html, eclipse, cordova

我在 Eclipse 中使用 Phonegap 来制作一个 android 应用程序。所以我制作了一个excel文件，然后我通过使用sql lite将它转换为一个db文件。现在我必须在 javascript 中访问该数据库。谁能给我一个想法从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T05:39:37.910

事实上，您可以访问您通过应用程序 Phonegap 本身创建的数据库。

您可以查看在线文档（我提供的链接适用于 Cordova 版本 1.5.0，但其他版本应该类似）以获取更多信息： [http ://docs.phonegap.com/en/1.5.0/phonegap_storage_storage.md .html#SQLResultSet](http://docs.phonegap.com/en/1.5.0/phonegap_storage_storage.md.html#SQLResultSet)

问题是您要访问预先设置的数据库。所以，关于这个问题的主要问题是：把我的数据库文件放在哪里？

我建议您阅读以下链接，这些链接应该可以回答您的问题：

*   [从 phonegap 读取本地 sqlite 文件](https://stackoverflow.com/questions/6424650/reading-a-local-sqlite-file-from-phonegap)

*   [https://groups.google.com/forum/?fromgroups=#!topic/phonegap/XlenKNxmoqE](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/XlenKNxmoqE)

我希望这些信息对您有所帮助。

# python - 从字符串中搜索用户输入并打印

> ID：12418701
> 
> 赞同：0
> 
> 时间：2012-09-14T05:37:16.767
> 
> 标签：python, bioinformatics

我有一个名为的字符串`new_file`，我从包含以下内容的文件中读取：

```
;ASP718I
;AspA2I
;AspBHI 0 6 9 15 ...
;AspCNI
;AsuI 37 116 272 348
... 
```

我正在使用`name = raw_input ("enter the enzyme ")` 从用户那里获取数据，并且我正在尝试从上述文件（new_file）中打印相应的字段。

对于输入`;AspBHI`，我希望程序从文件中打印相应的行：

`;AspBHI 0 6 9 15 ...`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:32:06.050

这是一个开始：

```
db = dict((x.split(" ")[0], x) for x in new_file.split("\n"))
name = raw_input("enter the enzyme ")
print db[name] 
```

下次也试着表现得很好，人们可能会更热情地帮助你，甚至解释他们的方法。

# css - 当一个元素悬停时更改所有其他元素的样式

> ID：12418702
> 
> 赞同：9
> 
> 时间：2012-09-14T05:37:20.417
> 
> 标签：css, hover, selector, siblings

假设我在同一个 DOM 级别有一堆 div。当我将鼠标悬停在一个上时，我希望所有其他人更改样式（即降低不透明度或更改背景），而悬停的那个保持不变。

我不能使用`+`or`~`选择器，因为我需要它来选择所有兄弟姐妹，而不仅仅是直接相邻的一个或仅以下兄弟姐妹。基本上我正在寻找的是一个“除了这个之外的所有兄弟姐妹”选择器。这存在吗？有没有办法在**没有 JavaScript**的情况下实现这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-14T05:42:07.580

诀窍是将悬停伪选择器放置在父元素上，然后相应地设置子元素的样式。这是我所指的：

```
.parent:hover .child {
    opacity: .5;
}
.parent .child:hover {
    opacity: 1;
} 
```

这是一个演示：http: [//jsfiddle.net/joshnh/FJAYk/](http://jsfiddle.net/joshnh/FJAYk/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-12T23:01:04.270

上面的例子很好，但是如果div之间有边距，并且您不希望鼠标悬停在空白区域时触发效果，则不需要javascript。

这是一个简单的解决方法：

只需添加`float:left`并`.child`确保它`.parent`具有`overflow:visible`（默认情况下它应该是可见的）。

通过这样做，`.parent`变为 0px 高（因此空白空间不会触发效果）但悬停在`.child`触发两个`:hover`伪类。

# telerik - WPF 应用程序中 Telerik Control 的更新版本

> ID：12418706
> 
> 赞同：1
> 
> 时间：2012-09-14T05:37:33.480
> 
> 标签：telerik

我是 WPF 和 Telerik Controls 的新手。我有一个现有的应用程序，其中使用了旧版本 (2010.2.714.35) 的 Telerik 控件。

我从网站和我的机器上安装了新版本的 Telerik 控件 (2012.2 912)。我想了解根据新版本更新我的应用程序引用的步骤。

# mongodb - Mongodb geohaystack 与标准 mongodb 空间索引相同吗？

> ID：12418713
> 
> 赞同：1
> 
> 时间：2012-09-14T05:38:21.873
> 
> 标签：mongodb, indexing

似乎 mongodb 有两种类型的地理空间索引。

[http://www.mongodb.org/display/DOCS/Geospatial+Indexing](http://www.mongodb.org/display/DOCS/Geospatial+Indexing)

标准的一个。附注：

> 目前，每个集合可能只有 1 个地理空间索引。虽然 MongoDB 可能允许创建多个索引，但不支持此行为。因为 MongoDB 只能使用一个索引来支持单个查询，所以在大多数情况下，拥有多个地理索引会产生不良行为。

然后就是所谓的 geohaystack 东西。

[http://www.mongodb.org/display/DOCS/Geospatial+Haystack+Indexing](http://www.mongodb.org/display/DOCS/Geospatial+Haystack+Indexing)

他们都声称使用相同的算法。他们都把地球变成了几个网格。然后根据它进行搜索。

那么有什么不同呢？

Mongodb 似乎没有使用 Rtree 之类的东西，对吧？

注意：回答这个问题，[MongoDB 如何实现它的空间索引？](https://stackoverflow.com/questions/12492065/how-does-mongodb-implement-its-spatial-indexes/12494924#12494924)说 2d 索引也使用 geohash。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T11:54:45.100

实现类似，但用例差异在[Geospatial Haystack Indexing](http://www.mongodb.org/display/DOCS/Geospatial+Haystack+Indexing)页面上进行了描述。

haystack 索引是针对小区域经度/纬度搜索调整的“基于桶”（又名“象限”）搜索：

```
 In addition to ordinary 2d geospatial indices, mongodb supports the use
    of bucket-based geospatial indexes. Called "Haystack indexing", these
    indices can accelerate small-region type longitude / latitude queries
    when additional criteria is also required.

    For example, "find all restaurants within 25 miles with name 'foo'".

    Haystack indices allow you to tune your bucket size to the distribution
    of your data, so that in general you search only very small regions of
    2d space for a particular kind of document.  They are not suited for
    finding the closest documents to a particular location, when the
    closest documents are far away compared to bucket size. 
```

该`bucketSize`参数是必需的，并确定干草堆索引的粒度。

因此，例如：

```
 db.places.ensureIndex({ pos : "geoHaystack", type : 1 }, { bucketSize : 1 }) 
```

此示例 bucketSize 为 1 创建一个索引，其中 1 个经度或纬度单位内的键存储在同一存储桶中。索引中还可以包含一个附加类别，这意味着将在查找位置详细信息的同时查找信息。

B-tree 表示类似于：

```
 { loc: "x,y", category: z } 
```

如果您的用例通常搜索“附近”位置（即“25 英里内的餐厅”），干草堆索引可能更有效。可以在每个存储桶中找到并计算附加索引字段（例如类别）的匹配项。

相反，如果您正在搜索“最近的餐厅”并且想要返回结果而不考虑距离，则普通的 2d 索引会更有效。

目前（从 MongoDB 2.2.0 开始）对 haystack 索引有一些限制：

*   haystack 索引中只能包含一个附加字段
*   附加索引字段必须是单个值，而不是数组
*   不支持空 long/lat 值

注意：纬度之间的距离会有很大差异（经度，较小）。请参阅：[纬度和经度之间的距离是多少？](http://geography.about.com/library/faq/blqzdistancedegree.htm).

# iphone - “NSString”没有可见的@interface 声明选择器“appendData”

> ID：12418715
> 
> 赞同：1
> 
> 时间：2012-09-14T05:38:48.693
> 
> 标签：iphone, objective-c, ios, xcode

我正在尝试异步调用服务器（ARC -on）：

```
NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:request delegate:self];

if (theConnection) {
    content = [NSMutableData data];
    NSLog(@"responseData from setup.php: %@", content);
} else {        
    // Inform the user that the connection failed.
    NSLog(@"error from server response in set up");
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    NSLog(@"connection did receive response");
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [content appendData:data];

    NSLog(@"connection did receive data");
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
   NSLog(@"connection did finish load");
   NSLog(@"Succeeded! Received %@ bytes of data",receivedData);
} 
```

但我在从服务器获取内容时遇到问题：- 在 didReceiveData 函数中，出现以下错误：- 'NSString' 没有可见的@interface 声明选择器'appendData'

有人可以建议我哪里错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T06:50:03.387

在接口部分的 .h 文件中，请声明以下内容

```
NSMutableData *content; 
```

# c# - 我怎样才能得到一个列表 来自网站链接的图像？

> ID：12418716
> 
> 赞同：-1
> 
> 时间：2012-09-14T05:38:53.240
> 
> 标签：c#

我想从网站链接构建图像列表，然后再将图像保存/下载到硬盘。

这就是我从网站/网址获取链接的方式：

```
private List<string> getLinks(HtmlAgilityPack.HtmlDocument document)
        {

            List<string> mainLinks = new List<string>();
            var linkNodes = document.DocumentNode.SelectNodes("//a[@href]");
            if (linkNodes != null)
            {
                foreach (HtmlNode link in linkNodes)
                {
                    var href = link.Attributes["href"].Value;
                    if (href.StartsWith("http://") ==true || href.StartsWith("https://") ==true || href.StartsWith("www.") ==true) // filter for http 
                    {
                        mainLinks.Add(href);
                    }
                }
            }
            return mainLinks;

        } 
```

然后我在这个测试函数中使用从 url 构建所有链接的列表：

```
private List<string> test(string url, int levels, DoWorkEventArgs eve)
        {

            HtmlWeb hw = new HtmlWeb();
            List<string> webSites;

                        try
            {
                doc = hw.Load(url);
                webSites = getLinks(doc);
                //retriveImages(); 
```

因此，作为列表的网站将包含来自主网站 url 的所有链接，例如，如果它的 google.com 则在网站中，我将有 19 个项目，每个项目都是来自 google.com 的链接

并且retrieveImages() 是：

```
private void retrieveImages()
        {
            var nodes = doc.DocumentNode.SelectNodes("//img");
            foreach (var node in nodes)
            {
                List<string> images = new List<string>();
                images.Add(node.Name);
            } 

        } 
```

并且retrieveImages() 肯定不是好的代码，也不能正常工作。如果我使用它移动 // 并调用retrieveImages() 没有发生任何事情网站列表是空的。

我想要做的是在函数retrieveImages() 中从当前站点/链接中构建图像列表，然后将图像下载到硬盘上我构建的列表中的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:44:12.143

```
private List<string> retrieveImages()
{
  List<string> imgList = new List<string>();
  HtmlDocument doc = new HtmlDocument();
  doc.Load("file.htm"); //or whatever HTML file you have
  HtmlNodeCollection imgs = doc.DocumentNode.SelectNodes("//img[@src]");
  if (imgs == null) return new List<string>();

  foreach (HtmlNode img in imgs)
  {
   if (img.Attributes["src"] == null)
      continue;
   HtmlAttribute src = img.Attributes["src"];

   imgList.Add(src.Value);
   //Do something with src.Value such as Get the image and save it locally
   // Image img = GetImage(src.Value)
   // img.Save(aLocalFilePath);
  }
return imgList;
}

private Image GetImage(string url)
{
    System.Net.WebRequest request = System.Net.WebRequest.Create(url);

    System.Net.WebResponse response = request.GetResponse();
    System.IO.Stream responseStream = response.GetResponseStream();

    Bitmap bmp = new Bitmap(responseStream);

    responseStream.Dispose();

    return bmp;
} 
```

# ruby-on-rails - 新手 - 视图中的 Rails 视图

> ID：12418718
> 
> 赞同：0
> 
> 时间：2012-09-14T05:39:02.760
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller, view, controller

我正在尝试制作两列布局。左边一栏是导航，右边一栏是内容。

Is there a way to display `show.html.erb`, `edit.html.erb`, and `new.html.erb`at different times in the right div, when the corresponding navigation is selected, without re-loading the whole page?

我知道我可以为左侧 div 使用部分，并呈现新页面，但我想避免为每个视图加载单独的页面。

物品控制器：

```
def index
    @item = item.find(:all, :order => "id DESC")
end

def new
    @item = item.new
end

def create
    @item = item.new(params[:item])

    if @item.save
        redirect_to root_path
    else
        render "new"
    end
end

def edit
    @item = item.find(params[:id])
end

def update
    @item = item.find(params[:id])

    if @item.update_attributes(params[:item])
        redirect_to root_path
    else
        render "index"
    end
end 
```

HTML：

```
<div id="left" ">
    <p id=link_to "Current_Item", item_path %></p>
    <p id=Link_to "Add_Item", new_item_path %></p>
    <p id=Link_to "Edit_Item", edit_item_path %></p>
</div>

<div id="right">

</div> 
```

路线文件：

```
resources :items 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:52:16.373

“**但我试图避免单独加载页面”**是否意味着您想通过 ajax 而不是完整的新页面加载视图？如果是这样，那么您的链接应该是 a`remote_link`并且您的视图应该`div id='right'`使用相应视图的内容更新。

您的链接应使用`:remote=>true`选项。[查看详情](http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to)。

并且您的视图应该响应更新`<div id="right">`.

[这里的另一个链接](http://www.alfajango.com/blog/rails-3-remote-links-and-forms/)有更多的见解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:47:47.567

我建议修改`app/views/layouts/application.html.erb`然后放

```
<div id="left">
    <p><%= link_to "Current_Item", item_path %></p>
    <p><%= Link_to "Add_Item", new_item_path %></p>
    <p><%= Link_to "Edit_Item", edit_item_path %></p>
</div>

<div id="right">
    <%= yield %>
</div> 
```

进去。然后，`show.html.erb, edit.html.erb, and new.html.erb`应该为调用到页面右侧部分的每个适当操作自动呈现视图。

我还推荐[Rails 教程](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)，这是一个很棒的 Rails 教程。然后去[Codeschool](http://codeschool.com)了解更多。

# c - C:strncpy 导致指针问题

> ID：12418726
> 
> 赞同：1
> 
> 时间：2012-09-14T05:40:29.213
> 
> 标签：c, pointers, strncpy

> **可能重复：**
> [为什么在写入字符串时会出现分段错误？](https://stackoverflow.com/questions/164194/why-do-i-get-a-segmentation-fault-when-writing-to-a-string)

我想替换字符串中的一个单词。这是代码

```
char text[] = "This is a list of lists";
char *find = "list";
char* pos = NULL;
pos = strstr(text,find);
strncpy(pos,"test",4) 
```

这工作正常，但

```
char *text = "This is a list of lists";
char *find = "list";
char* pos = NULL;
pos = strstr(text,find);
strncpy(pos,"test",4) 
```

这给出了分段错误。

在第一个示例中，“文本”是一个数组，数据只是复制到该位置。在第二个“文本”是一个指针。什么是问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T05:49:39.240

和...之间的不同

```
char text[] = "This is a list of lists"; // 1 
```

和

```
char *text = "This is a list of lists"; // 2 
```

是，在（1）中，`text`是一个**非常量**的字符数组；其中如 (2) 中，`text`指向字符串文字，并且字符串文字是**常量**。您无法修改您在 (2) 中尝试的常量对象。您在 (2) 中实际上未定义的行为中所做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T05:48:11.627

问题是第二个示例中的字符串是字符串文字，它必须保持不变。当您尝试在该字符串上写入时，您正在写入只读内存，这（取决于操作系统）是不允许的。

# jquery - Jquery将数据序列化到数组中

> ID：12418729
> 
> 赞同：3
> 
> 时间：2012-09-14T05:40:49.853
> 
> 标签：jquery, arrays, serialization, each

我想从我的表单中获取所有数据并将其放入可访问的数组中。这是我到目前为止所拥有的：

```
var data = $("#everything").serializeArray();
var test = [];
$(data).each(function(index, element) {
    test[element] = element.val();
}); 
```

我试过这个：

```
alert(data["fname"]); 
```

但是即使文本框中有东西，它也会返回“未定义”，这就是为什么我必须这样做 .each 方法。但现在当我这样做时

```
alert(test["fname"]); 
```

它甚至不会弹出消息。有谁知道我做错了什么？我只想将所有表单数据放入一个数组中，我可以通过输入的 id 或名称访问该数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T06:03:39.317

关于您的代码的一些事情......首先`test`是一个数组，但您将它用作像这样的对象`test[element]`，这会造成麻烦。然后创建一个对象数组`serializeArray`，每个对象都包含`name`，`value`所以没有为您提供您正在寻找的价值。试试这个：`element.val()``element``$(element).val()``element.value`

```
var data = $('#myform').serializeArray();
var obj = {};
for (var i = 0, l = data.length; i < l; i++) {
    obj[data[i].name] = data[i].value;
} 
```

**演示：http:** [//jsfiddle.net/elclanrs/KRbPg/](http://jsfiddle.net/elclanrs/KRbPg/)

# objective-c - 是否可以仅 NSLog 我传递的字符串，而不是其他信息？

> ID：12418731
> 
> 赞同：0
> 
> 时间：2012-09-14T05:40:55.797
> 
> 标签：objective-c, xcode, nslog

NSLog(@"示例");

将输出：

> 2012-09-13 04:54:48.128 MyApp [94652:a0f]：示例

在控制台上。

有没有办法让它只输出：

> 例子

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T05:44:15.010

如果您定义此宏并使用它而不是 NSLog 它只会输出您指定的内容。

```
#define NSLog(FORMAT, ...) printf("%s\n", [[NSString stringWithFormat:FORMAT, ##__VA_ARGS__] UTF8String]); 
```

# python - pip 无法安装 PIL 或 Pillow 并出现 mt.exe 错误

> ID：12418735
> 
> 赞同：3
> 
> 时间：2012-09-14T05:41:16.830
> 
> 标签：python, windows-7, python-imaging-library, pip

在我的一台 Windows 7 开发机器上，我正在尝试安装 Python Image Library。

我的机器类似。两者都运行 Windows 7 Professional，x64。两者都使用 Python 2.7.3（32 位）。在其中一台机器上`pip install PIL`工作正常。另一方面，它失败，跟踪以以下结尾：

```
build\temp.win-amd64-2.7\Release\_imaging.pyd.manifest : general error c1010070:
 Failed to load and parse the manifest. The system cannot find the file specified.

error: command 'mt.exe' failed with exit status 31 
```

如何解决此错误？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-11-18T14:28:05.183

感谢[http://bugs.python.org/issue4431](http://bugs.python.org/issue4431)，通过修改修复了这个错误：

```
C:\<Python dir>\Lib\distutils\msvc9compiler.py 
```

并添加：

```
 ld_args.append('/MANIFEST') 
```

在 MANIFESTFILE 行之后，它看起来像：

```
 # Embedded manifests are recommended - see MSDN article titled
        # "How to: Embed a Manifest Inside a C/C++ Application"
        # (currently at http://msdn2.microsoft.com/en-us/library/ms235591(VS.80).aspx)
        # Ask the linker to generate the manifest in the temp dir, so
        # we can embed it later.
        temp_manifest = os.path.join(
                build_temp,
                os.path.basename(output_filename) + ".manifest")
        ld_args.append('/MANIFESTFILE:' + temp_manifest)
        ld_args.append('/MANIFEST') 
```

如果仍然出现错误，请在方法中更改`if arg.startswith("/MANIFESTFILE:")`为。`if arg.startswith("/MANIFEST:")``manifest_get_embed_info(self, target_desc, ld_args)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T06:14:25.390

从 pypi 下载压缩包，并尝试在您的机器中构建和安装。这个**[链接](http://fuyun.org/2009/12/install-mysql-for-python-on-windows/)**可以给你一些提示。这仅能解决您的问题，但安装会有所不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-09T06:39:01.473

如果你已经到达这里寻找

```
general error c1010070:
 Failed to load and parse the manifest. The system cannot find the file specified.

error: command 'mt.exe' failed with exit status 31 
```

这是适用于 Windows 8/x64/Python 3.3/VS 11 的解决方法：

```
# py 3.3 seems to be compiled against VS 2010 compiler, force using VS11 cl.exe for us
$env:VS100COMNTOOLS=$env:VS110COMNTOOLS

# Modify C:\Python33\lib\distutils\msvc9compiler.py
# Comment line 670:         ld_args.append('/MANIFESTFILE:' + temp_manifest)
# Basically it will instruct build to not look for manifest file 
```

# ruby-on-rails-3 - 无法解决带有嵌套对象的淘汰赛js

> ID：12418740
> 
> 赞同：0
> 
> 时间：2012-09-14T05:41:35.967
> 
> 标签：ruby-on-rails-3, knockout.js, knockout-mapping-plugin

我正在尝试学习knockoutjs，但无法弄清楚孩子们的可观察性是如何工作的！我已经尝试阅读许多文章和许多问题，即使是在 SO 上，但可能在某处遗漏了一些东西。

我的 json 结构是（由 Rails json 渲染器生成）：

> 专辑 -> 曲目 -> 元数据

```
Album
 -Track
  --Metadata
 -Track
  --Metadata
Album
 -Track     
  -- Metadata 
```

等等

我的视图也是嵌套的。在一个页面中，每张专辑都位于一个 div 下，每首曲目都位于上述 div 中的表格行下。

我的视图和 JS 代码在 JS Fiddle 中。[http://jsfiddle.net/var56/](http://jsfiddle.net/var56/)

**问题：** 如果您在 JSFiddle 中看到该视图，您将看到我已标记 html 部分正在工作（专辑）和不工作（曲目）。初始视图正确渲染。当我在文本字段中更新专辑名称时，上面的 h2 正在正确更新。但是在轨道模板中，当我更新轨道标题时，它不会在下面的跨度中更新。

此外，我尝试在 chrome 控制台中导出数据。

```
ko.toJSON(viewModel) 
```

或者，ko.mapping.toJSON(viewModel)

它给了我旧数据（这意味着不返回更改的值）。

我还将添加/删除专辑和曲目，并希望 viewModel 和视图反映相同。

我在哪里错过了什么？

* * *

注意：实际的 JSON 数据在这里：

```
[
  { "id":9,
    "image_path":null,
    "name":"Test Album",
    "price":null,
    "sort_order":null,
    "tracks":[
      { "file_name":"01._Ei_Mon_Joshonay.mp3",
        "file_path":"/media/tracks/1/01._Ei_Mon_Joshonay.mp3",
        "id":192,
        "length":null,
        "metadata":{
          "artist":"Aroti (MR present)",
          "composer":"",
          "created_at":"2012-09-10T11:33:42Z",
          "duration":211,
          "genre":"Other",
          "id":124,
          "lyrics":null,
          "title":"01\. Ei Mon Joshonay.mp3",
          "track_id":192,
          "updated_at":"2012-09-10T11:33:54Z",
          "year":0
        },
        "price":null,
        "thumb":"/media/track_thumbs/1/thumb_192.jpg",
        "title":"01\. Ei Mon Joshonay.mp3"
      },
      { "file_name":"03._Jare_Ure_Ja_Pakhi.mp3",
        "file_path":"/media/tracks/1/03._Jare_Ure_Ja_Pakhi.mp3",
        "id":193,
        "length":null,
        "metadata":{
          "artist":"MR present",
          "composer":"",
          "created_at":"2012-09-10T11:33:48Z",
          "duration":204,
          "genre":"lata",
          "id":125,
          "lyrics":null,
          "title":"03.Jare ure ja pakhi",
          "track_id":193,
          "updated_at":"2012-09-10T11:33:54Z",
          "year":0
        },
        "price":99.0,
        "thumb":null,
        "title":"03.Jare ure ja pakhi"
      }
    ]
  },
  { "id":11,
    "image_path":null,
    "name":"Album 2",
    "price":null,
    "sort_order":null,
    "tracks":[  ]
  }
] 
```

**更新：**

我什么都做不了。现在我尝试创建一个可以模拟我面临的问题的 jsFiddle。

请检查[http://jsfiddle.net/Bb538/3/](http://jsfiddle.net/Bb538/3/)。

我现在也有一个映射对象（尽管在代码中你可能会看到它没有被引用，如果你愿意，你可以尝试）。您将看到专辑名称正在正确更新。但是 Title 和 File Name 字段不会更新相邻的 span（绑定到同一个 observable）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T03:40:33.840

根据您的更新，问题不在于子对象不可观察，而是与跟踪信息的输入字段上的 data-bind 属性有关。“value”数据绑定不是“attr”数据绑定的子项。

这是一个有效的 jsFiddle [http://jsfiddle.net/Bb538/4/](http://jsfiddle.net/Bb538/4/)

**你有什么**

```
<input data-bind="attr: { name: 'albums[track_attributes][$index][id]', value: title}" id="" name="" type="text" value=""/> 
```

**它应该是什么**

```
<input data-bind="attr: { name: 'albums[track_attributes][$index][id]'}, value: title" id="" name="" type="text" value=""/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T12:37:59.473

我怀疑您的“跟踪”对象和属性没有被映射插件映射到可观察对象，这将阻止它们在值更改时通知视图，反之亦然。

在此处查看我关于将嵌套 JSON 对象结构映射到代表性视图模型的问答：将 [JSON 数据映射到具有特定视图模型类型的 Knockout observableArray](https://stackoverflow.com/questions/9951521/map-json-data-to-knockout-observablearray-with-specific-view-model-type)

一个关键的要点是映射对象用于指定映射插件如何映射和转换嵌套对象。

这是与您的专辑曲目方案有关的具体示例：http: [//jsfiddle.net/KodeKreachor/qRKtK/26/](http://jsfiddle.net/KodeKreachor/qRKtK/26/)

# sql - tsql 面包屑查询

> ID：12418743
> 
> 赞同：0
> 
> 时间：2012-09-14T05:41:39.103
> 
> 标签：sql, tsql

![在此处输入图像描述](../Images/0db59faafe0e193e4695b009ba5d24cb.png)我有以下 CTE 查询

```
;WITH cte AS (
    SELECT 0 AS lvl, id, catName, parent,
        CAST(id AS VARCHAR(128)) AS Sort
    FROM CategoriesMap WHERE id =2
    UNION ALL
    SELECT p.lvl + 1, c.id, c.catName, c.parent,
        CAST(CAST(c.id AS VARCHAR) + '_' + p.Sort   AS VARCHAR(128))
    FROM CategoriesMap c
    INNER JOIN cte p ON p.parent = c.id
)
select * from cte 
```

排序（树）列有这样的输出（两行）......

```
2
1_2 
```

哪里，`2`是电视类别，`1_2`表示这是树状图`(1: Internet Tv, 2 = Jadoo Tv)`

现在我也可以返回带有类别代码的类别名称吗？

就像是

```
2:Jadoo Tc

1_Internet Tv: 2_Jadoo Tv 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T07:04:59.410

```
;WITH cte AS (
    SELECT 0 AS lvl, id, catName, parent,
        CAST(CAST(id AS VARCHAR(128)) + ':' + catName AS VARCHAR(128)) AS Sort
    FROM CategoriesMap WHERE id =2
    UNION ALL
    SELECT p.lvl + 1, c.id, c.catName, c.parent,
        CAST(CAST(c.id AS VARCHAR) + ':' + c.catName + '_' + p.Sort AS VARCHAR(128))
    FROM CategoriesMap c
    INNER JOIN cte p ON p.parent = c.id
)
select * from cte 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T11:14:57.607

```
;WITH cte AS (
    SELECT 0 AS lvl, id, catName, parent,
        CAST(id AS VARCHAR(128)) AS Sort
    FROM CategoriesMap WHERE id =2
    UNION ALL
    SELECT p.lvl + 1, c.id, c.catName, c.parent,
        CAST(CAST(c.id AS VARCHAR) + '_'+c.catName+':' + p.Sort   AS VARCHAR(128))
    FROM CategoriesMap c
    INNER JOIN cte p ON p.parent = c.id
)
select * from cte 
```

# iphone - 如何在iphone中将数组json值打印到uitableview中

> ID：12418747
> 
> 赞同：-4
> 
> 时间：2012-09-14T05:42:06.717
> 
> 标签：iphone, ios, json

*JSON*格式代码如下所示：

```
{   
 "rates": {  
           "amc": "201",  
           "hyd": "500.50",  
           "guj": "200.10",  
           "afgd": "400"  
         } 
} 
```

解析*JSON*值后，上述代码数组返回：

`array = [values valueForKey:@"rates"];`

返回哪个数组

```
{  
           amc = "201"; 
           hyd = "500.50";  
           guj = "200.10";  
           afgd = "400";
           ...........etc

} 
```

但我想在`UITableView`外观 amc:201中打印

我怎样才能做到这一点？

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
  [connection release];

   NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
   self.responseData = nil;

   values = [responseString JSONValue];
   array = [[NSMutableArray alloc] init];
   NSMutableArray *arrTitle = [[NSMutableArray alloc] init];
   NSMutableArray *arrValues = [[NSMutableArray alloc] init];
   array =[values valueForKey:@"rates"];

   NSLog(@"array values:--> %@",array);
 //    NSLog(@"values:--> %@",values);
 //    NSLog(@"Particular values:--> %@",[[values valueForKey:@"rates"] valueForKey:@"AED"]);

   tempDict1 = (NSMutableDictionary *)array;            
   NSArray *arr;// =[[NSArray alloc]init];
   arr = [[tempDict1 valueForKey:@"rates"] componentsSeparatedByString:@";"];
   NSLog(@"arr-->%@",arr);
   NSString *subStar = @"=";
   [arrTitle removeAllObjects];
   [arrValues removeAllObjects];

   for (int i=0; i<[arr count]-1; i++)
   {
        [arrTitle addObject:[[arr objectAtIndex:i] substringToIndex:NSMaxRange([[arr objectAtIndex:i] rangeOfString:subStar])-1]];
        [arrValues addObject:[[arr objectAtIndex:i] substringFromIndex:NSMaxRange([[arr objectAtIndex:i] rangeOfString:subStar])]];
         NSLog(@"arrTitle is:--> %@",arrTitle);
   }

   tempDict1 = (NSMutableDictionary*)[array objectAtIndex:0];
   array = [values valueForKey:@"rates"];
   NSLog(@"tempDict--%@",[tempDict1 objectForKey:@"AED"]);

   [array retain];
   [tbl_withData reloadData];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T06:01:33.670

尝试：

```
NSMutableArray * array2=[[NSMutableArray alloc]init];    
[array addObject: [[array objectAtIndex:0] objectForKey:@"amc"]];    
[array addObject: [[array objectAtIndex:0] objectForKey:@"hyd"]];    
[array addObject: [[array objectAtIndex:0] objectForKey:@"guj"]];    
[array addObject: [[array objectAtIndex:0] objectForKey:@"afgd"]]; 
```

现在将 array2 值放入表格单元格中。

喜欢：

```
cell.text=[array2 objectAtIndex:indexPath.row]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T06:06:17.990

**[values valueForKey:@"rates"] 的**返回类型是字典而不是值数组。

```
NSDictionary *dict = [values valueForKey:@"rates"]; 
```

现在您可以使用**objectForKey**在字典中引用获取**值**

 **或者，如果你想存储在数组中。

```
NSMutableArray *array = [NSMutableArray array];
for (NSString *key in [dict allKeys])
{
    array = [dict objectForKey:key];
} 
```

所以最后数组具有字典中的所有值。

```
// returns no of rows
-(NSInteger) tableView: (UITableView *) tableView numberOfRowsInSection: (NSInteger) section  
{
    return [array count];
}

// contents of row will be    
-(UITableViewCell*) tableView: (UITableView *) tableView cellForRowAtIndexPath: (NSIndexPath *) indexPath     
{
     static NSString *CellIdentifier = @"test";

     UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
     if (cell == nil) 
     {
         cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
     }

     // Configure the cell...
     NSString *value = [self. array objectAtIndex:indexPath.row];

     cell.textLabel.text = value;

     return cell;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T05:57:35.697

尝试这个：-

```
 NSDictionary *dict =[values valueForKey:@"rates"];
 NSString *str=[dict valueForKey:@"amc"];

You need to do this:-
 NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
   self.responseData = nil;

   values = [responseString JSONValue];
   NSMutableArray *arrTitle = [[NSMutableArray alloc] init];
   NSMutableArray *arrValues = [[NSMutableArray alloc] init];
     NSDictionary *dict =[values valueForKey:@"rates"];
 NSString *str=[dict valueForKey:@"amc"]; 
```

休息你可以根据你的要求去做。**

# ios - #import“PGPlugin.h”“找不到文件”错误在 xcode4.2 上的 phonegap2.0

> ID：12418751
> 
> 赞同：5
> 
> 时间：2012-09-14T05:42:48.337
> 
> 标签：ios, cordova, xcode4.2, cordova-2.0.0

我是phonegap2.0的新手。现在我想使用 phonegap 创建 iphone 应用程序。我在雪豹mac上使用xcode4.2。我在我的mac上安装了phonegap。但现在我使用以下链接在 IOS 上关注 Embedding Cordova Webview：

```
 "http://docs.phonegap.com/en/2.0.0/guide_cordova-webview_index.md.html#Embedding%20WebView" 
```

但是当我在 xcode4.2 中运行编码时`Iphone 5.0 Simulator`。我有 `#import"PGPlugin.h" "file not found"`错误。

```
"#ifdef PHONEGAP_FRAMEWORK
    #import <PhoneGap/PGPlugin.h>
#else
    #import "PGPlugin.h"
#endif". 
```

我附上了错误页面截图供您参考。 ![在此处输入图像描述](../Images/b4fb82c1731b86abd51b88124cf75046.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T06:11:13.583

更改此部分：

```
#ifdef PHONEGAP_FRAMEWORK
    #import <PhoneGap/PGPlugin.h>
#else
    #import "PGPlugin.h"
#endif 
```

具有以下内容：

```
#import <Cordova/CDVPlugin.h> 
```

此外，由于您使用的是 2.0.0 版的 cordova，您可能需要将所有以（例如：）开头的内容更改`PG`为`PGPlugin`（`CDV`例如：`PGPlugin`--> `CDVPlugin`）。

问题是以前版本的插件曾经以`PG`.

让我知道这个是否奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T15:15:20.820

这不适用于最新版本的 Cordova / Phonegap。

# javascript - vs2002如何调试html页面

> ID：12418753
> 
> 赞同：0
> 
> 时间：2012-09-14T05:43:17.330
> 
> 标签：javascript, .net, html, debugging

我有一个 .net 应用程序，它有一个带有框架的页面，显示一个 html 页面。

现在这个 html 页面没有正确呈现并且显示一些错误。它包含一些java脚本代码和一些会话变量问题，同样使该页面产生错误。

```
/abc.com/ticker_change.html Last-Modified: Fri, 31 Dec 2010 19:05:49 GMT Accept-Ranges: bytes ETag: "a090fbbc1da9cb1:180b" Server: Microsoft-IIS/6.0 X-Powered-By: ASP.NET set-cookie: SMSESSION=AdOPLEO1Ga0dGWimR8Y2nPIANxeujrkQLvFcWUdsEHvYb/V2h3SqGfBihelbQkNrjlloZFqnefT6jdK6axRrljAtJjrUTeC5v1yUXvZ7biI7jnqQelEYCfWA0KxUntH6lxxkZHyKLh/G0ONLRqf2eclOTFIsiyMKJErxUEk6XMCSD5bFAyc1TKXacHk13LdWaKu0jOAG8WwRji0vprBkHtAi1UQjPhZC/EqYKR3icr6DbY8MoSHyxVBnn2IFUlcPZa1ctX/9L6mPbejifwwPJ2aHxAiueTeTM1WwAvkmtnulSTtDF46EShGPiYfD9zRckdknkOsydU4vZcLCgRc+QjTgaduQ2HW1O07eTyMuRdXfBZBLLtzs2WkeQDsrC8jaUVlb82GQf0Q7ODph013AjV7rBnKUpgpSRa6iwBAcjvGvF4ErZOguXgaR5z7kNWkOwGorYSBNOD+1V2KOua/vWxMCql7PUQfZKIWuiCgMC2wBpFh1aLauxOls6jdnSlMHngUP6/QgQdT1gU20uV7hB4ygOAZwm9FAH1lTaPgm/zOxZwmwCVBfBSw1DVq5mUQpwWY2Wc1CSDBUz0V3ZyaSa8f79HI3J0+DZwrrMnd8i966tbGgkhChuUKU0YOphKao4ScfgTDu4amldYbxgwtqA5nNjYn+OX4RZj8lbNK35LyXii5/bJ6FMjxU/31Duq0MM5f8/+3EeA9HbpSVgbYYrLoDiPA99t3vojts/r0OBOPRkSxKkKnbvjIUrHPsp96gTSRdInWBv1Wzur2a3Dvg9cSHFmyjngLwXy8W9AGkbbfOZHYNnYhfNKtnZnc3MbdyAajvDHbYQKstFb7ZY7b9W2TZttrjxozc0JbRGDLlJM95xBmrVmoZ62uN+BlsCjnFJpnE9lqrltyZ/eF6Pqmzl4SRXKPyyaIT34mDEo+txMNoZS+QIJZm7yJckBXIKjTCG+9EJvb7BYhE7tCGvHwA8j469QvyJtQU; path=/; domain=.abc.com Date: Fri, 14 Sep 2012 05:39:22 GMT 
```

以上是在该页面上生成的一些废话代码。问题是**即使在应用后我也无法调试 HTM 页面`debugger`**。

有人可以解释如何在 html 页面上调试脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:50:25.777

几天前我遇到了类似的问题。

检查此链接，它应该可以帮助您。

[尽管编写了调试器-Visual Studio 2008，但无法在 Javascript 中达到断点](https://stackoverflow.com/questions/12338546/unable-to-reach-a-break-point-in-javascript-inspite-of-writing-debugger-visual)

# php - 我想自动创建一个在服务器上自动运行的 php 文件

> ID：12418755
> 
> 赞同：2
> 
> 时间：2012-09-14T05:43:29.100
> 
> 标签：php, cron

我想自动创建一个 php 文件，该文件将在服务器上自动创建和运行，然后在指定时间后重新加载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T05:46:20.247

为此使用 cron 作业。

Cron 作业在指定时间执行。Cron 作业是一个 php 文件。

[http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/](http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:50:40.683

我认为不可能自动创建带有代码的php文件=）

但就执行而言，U 应该在该 php 文件上**创建一个 cronjob**（在它所在的服务器上并设置执行时间段，比如每 1 小时），这是 U 然后需要执行的代码：

```
<?php
sleep(5); // for 5 sec
header('Location: filename.php'); // reloading on filename.php
?> 
```

# javascript - 在哪里使用称为“冻结”的 javascript 函数

> ID：12418756
> 
> 赞同：-2
> 
> 时间：2012-09-14T05:43:38.727
> 
> 标签：javascript, function

这段代码对什么场景有用？

```
freeze = function(o) { return o; }; 
```

我读过这样的某人的代码。

```
var obj = freeze({name: "Samuel-ZSJ", getName:function(){ return this.name; }}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T05:44:49.153

这是：

1.  笑话
2.  稍后实现它的存根函数
3.  开发人员不知道他们在做什么

选择任何你更喜欢的。

所以，就我个人而言，我想不出这个功能有什么用处。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-14T05:47:52.417

关于javascript函数冻结。请参阅[http://msdn.microsoft.com/en-us/library/ff806186%28v=vs.94%29.aspx](http://msdn.microsoft.com/en-us/library/ff806186%28v=vs.94%29.aspx)

# ruby-on-rails - 更改 store_dir，将旧文件移动到新路径

> ID：12418758
> 
> 赞同：3
> 
> 时间：2012-09-14T05:43:46.447
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, carrierwave

我需要更改我的 Carrierwave 上传器的 store_dir。不幸的是，这将破坏存储在旧 store_dir 中的所有现有文件的路径。将这些旧图像复制/移动到新的 store_dir 路径并更新其文件名的最安全方法是什么。

谢谢你。

# javascript - zurb基础3中的固定宽度列

> ID：12418759
> 
> 赞同：3
> 
> 时间：2012-09-14T05:43:48.217
> 
> 标签：javascript, html, css, responsive-design, zurb-foundation

如何在 zurb Foundation 3 中实现固定的柱状网格？目前，基金会的网格是流动的并且基于百分比。我想实现类似于引导（非流体）网格的东西，其中只有 4 个关于网格显示方式的可能性（至少在它下降到移动之前，它是流动的）

我想保留基础网格的功能（和语义），所以我不想简单地将它换成引导网格。

我知道这与纯“响应式”网格的理论背道而驰，但与现实世界的客户及其需求打交道使我倾向于拥有一组可预测的有限网格行为（自适应网格？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T14:20:19.207

您需要将 CSS 中的列宽和行宽重置为覆盖 @media 声明中的固定位置。例如你有

```
.row { width: 100%;}
.one, .row .one { width: 8.33333%; }    
.two, .row .two { width: 16.66667%; }    
.three, .row .three { width: 25%; } 
```

你现在需要，

```
@media screen and min-width(960px){
    .row { width: 960px;}
    .one, .row .one { width: 80px /* 960 x 8.33333% */ }    
    .two, .row .two { width: 160px; /* 960 x 8.33333% */}    
    .three, .row .three { width: 240px; /* 960 x 8.33333% */}
} 
```

*以下是更新问题之前的先前答案。*

在页面周围添加一个包装器 div

```
<div class="wrapper">
<!-- Page content and styles go here -->
</div> 
```

然后在你的CSS中你应该包括

```
.wrapper {
    width: 98%; 
    max-width: 1200px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T09:33:21.837

为了防止行缩放，您需要将以下内容放入您的`app.css`：

```
.row { max-width: none; } 
```

这将使所有高于 767px 的视口的行宽固定（767px 是默认的移动网格断点）。

如果您需要在几个固定步骤中调整网格，请尝试使用媒体查询：

```
@media screen and (min-width: 768px) and (max-width: 940px) {
  .row { width: 840px; }
}

@media screen and (min-width: 941px) and (max-width: 1050px) {
  .row { width: 960px; }
} 
```

# android - adjustViewBounds 在 Android 布局文件中不起作用

> ID：12418769
> 
> 赞同：1
> 
> 时间：2012-09-14T05:44:41.160
> 
> 标签：android, layout, imageview

我已经看过这个帖子：[ImageView adjustViewBounds not working](https://stackoverflow.com/questions/7719617/imageview-adjustviewbounds-not-working)，但它不适用于我的情况。

本质上，adjustViewBounds 不起作用。让我们假设以下内容：

```
square_icon => 1000x1000
rectangle_icon => 400x100
device height => 1000 
```

所以我想要发生的是四个具有以下尺寸的图标的垂直堆叠：

```
square_icon = 400x400
rectangle_icon = 400x100
square_icon = 400x400
rectangle_icon = 400x100 
```

但是发生的事情是 square_icon 没有占用它可以占用的所有空间......并且 rectangle_icon 更像是 400x200 而不是 400x100？图像没有以不正确的纵横比进行缩放，只是在视图中添加了空白空间（scalingType 确定空间是在顶部、底部还是两者兼而有之）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:src="@drawable/square_icon" />

    <ImageView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:adjustViewBounds="true"
        android:src="@drawable/rectangle_icon" />

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:adjustViewBounds="true"
        android:src="@drawable/square_icon" />

    <ImageView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:adjustViewBounds="true"
        android:src="@drawable/rectangle_icon" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:57:02.590

对于那些感兴趣的人，我通过使用权重明确指定 rectangle_icon 的高度来解决了这个问题……为每个 square_icon 分配了 4 的权重，为每个 rectangle_icon 分配了 1 的权重。花了我一辈子，但我终于想通了！

# php - 使用 PDO 创建安全的 CRUD 类

> ID：12418777
> 
> 赞同：0
> 
> 时间：2012-09-14T05:45:18.643
> 
> 标签：php, pdo

我创建了一个类来更轻松地处理 CRUD，但遇到了问题。我当前的课程以这种语法运行一个杂物：

```
$crud = Core::Db()->builder();
$userData =$crud
                ->select("city,adress")
                ->from('users')
                ->where('name')
                ->like(':name')
                ->read(array(':name','%stefan')); 
```

当你调用 crud 方法时，会自动创建 sql 语句并将其插入到私有变量 $this->sql 中。write() 准备数据并绑定准备好的语句（如果存在）。

最后一个示例生成以下 SQL：

$this-sql = "SELECT `city`, `address`FROM `users`WHERE `name`LIKE :name";

一切都很完美。绑定 :name 并添加 '%stefan'。一切都好。

这是我的问题。如果我添加：

```
$userData =$crud
                ->select("city,adress")
                ->from('users')
                ->where('name')
                ->like('%stefan')
                ->read(); 
```

返回：

```
//bad syntax
$this->sql = "SELECT `city`,`address` FROM `users` WHERE `name` LIKE %stefan"; 
```

如果我在数据中添加引号，第二个示例将正常工作，但第一个示例将失败：

```
// First example, bad sintax
$this-sql = "SELECT `city`,`address` FROM `users` WHERE `name` LIKE ':name'"; 

// Second example, good
$this-sql = "SELECT `city`,`address` FROM `users` WHERE `name` LIKE '%stefan' "; 
```

我想到了一个解决方案...在 like() 方法调用中添加引号并在名称等于 write() 中绑定的绑定参数的名称时对其进行条带化：

```
private function write(array $input_parameters=array(),$style=NULL)
{
  // clean possible errors in holders
  foreach($input_parameters as $key => $value):
      if(strpos($this->sql,"'".$key."'") !== FALSE)
      $this->sql = str_replace("'".$key."'",$key,$this->sql);
      if(strpos($this->sql,'"'.$key.'"') !== FALSE)
          $this->sql = str_replace('"'.$key.'"',$key,$this->sql);
  endforeach;

  // .... code ....//
} 
```

这个解决方案在这种情况下工作正常，但如果你有这样的事情：

```
$userData =$crud
                ->select("id")
                ->from('blog')
                ->where('content')
                ->like(':word')
                ->_or('something')
                ->like(':word')
                ->read(array(':word','something')); 
```

返回：

```
$this->sql = "SELECT `id` FROM `blog` WHERE `name` LIKE :word or `something` LIKE :word "; 
```

这不是一个现实生活中的例子，但它只是为了说明为什么我认为它是一个糟糕的解决方案，可能会成为安全风险。

我找不到在没有安全问题或损坏 sql 的情况下绑定数据的方法，我在这里错过了一些东西。

你能想到别的吗？我忘记了什么？我偏执？现在我的头很痛，我不能像人一样思考。

欢迎您的帮助，谢谢

# iphone - IOS Gamecenter排行榜：单人多个分数条目

> ID：12418781
> 
> 赞同：3
> 
> 时间：2012-09-14T05:46:11.377
> 
> 标签：iphone, game-center, leaderboard

我有一个关于 Apple 游戏中心排行榜的简单查询。是否有可能为单个玩家制作多个分数条目？例如，我的分数先是 100，然后是 200，我需要在排行榜上为我显示这两个分数。是否可以？

感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T07:35:41.600

不，GameCenter 不可能，Gamecenter 排行榜只选择最高的

你应该创建自己的排行榜和服务器来获得你想要的，或者也许使用 openfeint

# c++ - c++中的CURL Post方法

> ID：12418787
> 
> 赞同：1
> 
> 时间：2012-09-14T05:46:49.393
> 
> 标签：c++, libcurl

假设我们有一个如下的 HTTP 请求：

```
POST /safebrowsing/downloads?client=Firefox&appver=3.0.8&pver=2.2&wrkey=AKEgNiux-3bBzAgJeFWgqbneh_GLc2OrmgXnpxPrdH1-hFpbAM8k1ovPA8GB_UMRueBHnL3QJ7gsdQOWVm6QJr_VZNgAm8jmLQ== HTTP/1.1
Host: safebrowsing.clients.google.com
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.8) Gecko/2009033100 Ubuntu/9.04 (jaunty) Firefox/3.0.8
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip,deflate
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7
Keep-Alive: 300
Connection: keep-alive
Content-Length: 120
Content-Type: text/plain
Cookie: PREF=ID=551a1b8848e36099:U=e6fa7464d7c48884:FF=0:TM=1327553284:LM=1345022478:S=Qd0IssyrqLi17a4s; NID=62=R9Y5bkQ5iLF8zlyhma1gnRBfxPDoWuG2FibC2wc5u0eAIQgAuo4WCXMeLhdPZ7FXJEpN2Sw1a6da6QUNP7OC5OqTYK0Y39vd6c2fUh4BhY2B5CGsKtHuQ5RCpSnefSkb

goog-malware-shavar;a:83372-91327:s:59904-95254:mac
goog-phish-shavar;a:227421-233955,235041-235401:s:107142-110470:mac 
```

我已经构建了部分代码来处理标题。但是，消息正文部分我不确定如何处理。我已经阅读了 CURL 示例代码，它们为 HTTP 表单 POST 提供了解决方案，这不是处理我的数据的方式。有谁知道我应该使用什么参数来处理使用`curl_easy_setopt()`函数的消息体？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T10:50:34.123

仅供参考：cURL 提供了一个非常方便的选项，它列出了给定 HTTP 请求的临时选项：

```
--libcurl <file> Dump libcurl equivalent code of this command line 
```

如有疑问，您应该在使用此选项时通过 cURL（以及相应的选项，例如执行 POST 等）执行您的请求，因为它会输出`curl_easy_setopt`选项列表：

```
curl --libcurl out.c http://stackoverflow.com/ > /dev/null 
```

然后`out.c`在编辑器中打开文件：

```
...
curl_easy_setopt(hnd, CURLOPT_URL, "http://stackoverflow.com/");
curl_easy_setopt(hnd, CURLOPT_PROXY, NULL);
curl_easy_setopt(hnd, CURLOPT_NOPROGRESS, 0);
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T06:03:59.767

```
const char *post_data = "any_data";
...
curl_easy_setopt(curl_handle, CURLOPT_POST, 1);
curl_easy_setopt(curl_handle, CURLOPT_POSTFIELDS, post_data); 
```

# android - Android如何从Geocoder返回的地址中获取街道名称

> ID：12418790
> 
> 赞同：12
> 
> 时间：2012-09-14T05:47:22.977
> 
> 标签：android, reverse-geocoding

我正在使用`Geocoder`相反的方式从给定的纬度和经度获取地址。

您知道如何`Address` **仅从街道名称**中获取吗？

```
 Geocoder geocoder = new Geocoder(AutoFinderMapActivity.this);
    try {
        List<Address> addressList = geocoder.getFromLocation(latitude, longitude, 1);
        if (addressList != null && addressList.size() > 0) {
            // Help here to get only the street name
            String adress = addressList.get(0).get...;
        }
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

提前致谢，

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-03T01:35:37.593

我正在寻找同样的东西。我不同意标记为正确的答案。我可能是错的，但似乎“Thoroughfare”（多么古朴的英文术语！）是提供街道名称的字段。例如：

获取地址：

```
 List<Address> addresses = null;
    addresses = geocoder.getFromLocation(latitude, longitude,1);
    if(addresses != null && addresses.size() > 0 ){
       Address address = addresses.get(0);
       // Thoroughfare seems to be the street name without numbers
            String street = address.getThoroughfare();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-21T21:28:51.193

您可能从中获取门牌号的功能是`getSubThoroughfare().`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-26T16:34:47.413

这是我的代码示例，并显示地址、城市等。我希望这对你有所帮助..

```
try {
        List<Address> addresses;
        Geocoder geocoder= new Geocoder(MyactivityName.this);
        addresses = geocoder.getFromLocation(Marker.getPosition().latitude,Marker.getPosition().longitude,1);
        if(addresses != null && addresses.size() > 0 ){
            Address address = addresses.get(0);
            String province = addresses.get(0).getAdminArea();
            Marker.setSnippet(address.getThoroughfare()+", "+province);
        }
} catch (IOException e) {
    e.printStackTrace();
}
Marker.showInfoWindow(); 
```

* * *

```
//get current Street name
        String address = addresses.get(0).getAddressLine(0);

        //get current province/City
        String province = addresses.get(0).getAdminArea();

        //get country
        String country = addresses.get(0).getCountryName();

        //get postal code
        String postalCode = addresses.get(0).getPostalCode();

        //get place Name
        String knownName = addresses.get(0).getFeatureName(); // Only if available else return NULL

        System.out.println("Street: " + address + "\n" + "City/Province: " + province + "\nCountry: " + country
                + "\nPostal CODE: " + postalCode + "\n" + "Place Name: " + knownName); 
```

如果您查看更多信息或示例，请查看此[链接](http://www.devexchanges.info/2015/06/using-google-maps-api-v2-to-get-current.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-14T05:53:39.157

看一下 Address 类。

[Android 开发者：地址](http://developer.android.com/reference/android/location/Address.html)

# magento - 如何在 magento 中创建自定义注册模块

> ID：12418797
> 
> 赞同：0
> 
> 时间：2012-09-14T05:48:19.327
> 
> 标签：magento, module, registration

我是magento的新手。我想在 magento 1.5 或 1.6 中为卖家创建一个自定义注册模块。需要两个注册，一个是普通用户，另一个是卖家。我不知道magento的默认注册模块是如何构建的。我也不知道如何设置以及如何在表格和表格之间连接，例如'customer_entity_varchar'和其他表格。我认为它遵循 MVC 模式，如 Joomla 以及如何从控制器调用函数到模型以进行编写“插入” sql 查询。如果有人知道，请指导我提供链接或文档。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T09:11:40.967

您需要了解如何创建 Magento 模块。

1.  创建 Magento 模块[Magento 模块开发基础知识](http://coding.smashingmagazine.com/2012/03/01/basics-creating-magento-module/ "Magento 模块开发基础知识")
2.  然后你要为卖家创建一个自己的注册控制器。
3.  通过表示客户状态（卖方|一般）的属性扩展客户实体或使用客户组[向客户实体添加属性（有关](https://stackoverflow.com/questions/5961290/adding-attributes-to-customer-entity/5962237#5962237)[EAV 属性](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-7-advanced-orm-entity-attribute-value "关于 EAV 属性")的其他信息，请参阅）
4.  像第 3 步一样向卖家添加自定义属性。

希望能帮到你！

# service - java代码启动cassandra服务时nodetool不运行

> ID：12418798
> 
> 赞同：1
> 
> 时间：2012-09-14T05:48:24.090
> 
> 标签：service, cassandra

我使用 [services.msc] 启动了我的 CassandraDaemon 线程，而不是作为 Windows 中的服务，而是通过以下代码。

```
public static void start() {
    if (cassandraDaemon == null) {
        cassandraDaemon = new org.apache.cassandra.thrift.CassandraDaemon();
        cassandraDaemon.activate();
    }
} 
```

上面的代码启动了 cassandra 服务，我测试了它，它可以工作。但是 nodetool.bat 文件没有运行。

当我使用以下命令`nodetool -h IPADDRESS info`时，它会产生

> 无法连接到“IPADDRESS:7199”：连接被拒绝：连接

作为回复。

我在初始化期间添加了以下一个

```
System.setProperty("cassandra-foreground","true");
System.setProperty("com.sun.management.jmxremote","true");
System.setProperty("com.sun.management.jmxremote.port","7199");

System.setProperty("com.sun.management.jmxremote.authenticate","false");
System.setProperty("com.sun.management.jmxremote.ssl", "false");** 
```

我应该通过该节点工具添加什么编码才能运行....

如果有人知道请回复我，因为我非常需要它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:44:29.560

您将 JMX 端口设置为 7199，然后尝试使用 nodetool 连接到该端口。问题是 nodetool 使用 Thrift 端口，默认情况下是 9160。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-21T15:04:02.360

我已经浪费了很多时间试图解决这个问题，今天终于做到了。

C:\Program Files\DataStax Community\apache-cassandra\conf
并编辑文件 cassandra.yaml

查找：`listen localhost`并将其更改为本地主机的 IP 在`listen x.x.x.x`
哪里。`x.x.x.x`

重新启动 Cassandra 服务并确保 Windows 防火墙允许连接。也许您想从关闭防火墙开始检查 nodetool 是否正常工作。

# android - BluetoothChat 示例：NullPointerException

> ID：12418802
> 
> 赞同：2
> 
> 时间：2012-09-14T05:48:48.820
> 
> 标签：android, bluetooth

> **可能重复：**
> [getActionBar 返回 null](https://stackoverflow.com/questions/10031180/getactionbar-returns-null)

完整的安卓菜鸟。我正在尝试从 Galaxy S3 运行 BluetoothChat 示例，它似乎在应用程序运行时崩溃。

这是 LogCat 输出：

```
09-14 15:47:23.400: E/AndroidRuntime(6098): FATAL EXCEPTION: main
09-14 15:47:23.400: E/AndroidRuntime(6098): java.lang.NullPointerException
09-14 15:47:23.400: E/AndroidRuntime(6098):     at com.example.android.BluetoothChat.BluetoothChat.setStatus(BluetoothChat.java:235)
09-14 15:47:23.400: E/AndroidRuntime(6098):     at com.example.android.BluetoothChat.BluetoothChat.access$4(BluetoothChat.java:233)
09-14 15:47:23.400: E/AndroidRuntime(6098):     at com.example.android.BluetoothChat.BluetoothChat$2.handleMessage(BluetoothChat.java:260)
09-14 15:47:23.400: E/AndroidRuntime(6098):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-14 15:47:23.400: E/AndroidRuntime(6098):     at android.os.Looper.loop(Looper.java:137)
09-14 15:47:23.400: E/AndroidRuntime(6098):     at android.app.ActivityThread.main(ActivityThread.java:4514)
09-14 15:47:23.400: E/AndroidRuntime(6098):     at java.lang.reflect.Method.invokeNative(Native Method)
09-14 15:47:23.400: E/AndroidRuntime(6098):     at java.lang.reflect.Method.invoke(Method.java:511)
09-14 15:47:23.400: E/AndroidRuntime(6098):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
09-14 15:47:23.400: E/AndroidRuntime(6098):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
09-14 15:47:23.400: E/AndroidRuntime(6098):     at dalvik.system.NativeStart.main(Native Method) 
```

代码完全按照 SDK 中的示例：

```
private final void setStatus(int resId) {
    final ActionBar actionBar = getActionBar();
    actionBar.setSubtitle(resId);
} 
```

看来 getActionBar 返回 null。我可能做错了什么？

这只是我运行的第二个 Android 应用程序，所以请放轻松 :)

干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T12:24:46.907

在此处找到解决方案：[getActionBar 返回 null](https://stackoverflow.com/questions/10031180/getactionbar-returns-null)

这需要转到中的`onCreate()`方法`bluetoothChat.java`

> getWindow().requestFeature(Window.FEATURE_ACTION_BAR);

# javascript - 单击F5时如何停止页面加载

> ID：12418803
> 
> 赞同：0
> 
> 时间：2012-09-14T05:48:49.383
> 
> 标签：javascript, spring-mvc, safari, spring-security, hdiv

单击F5时如何停止页面加载...

感谢和问候

鲁比娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T06:07:25.147

对于 IE 和 FireFox

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>Block F5 Key In IE & Mozilla</title>

<script language="JavaScript">

    var version = navigator.appVersion;

    function showKeyCode(e) {
        var keycode = (window.event) ? event.keyCode : e.keyCode;

        if ((version.indexOf('MSIE') != -1)) {
            if (keycode == 116) {
                event.keyCode = 0;
                event.returnValue = false;
                return false;
            }
        }
        else {
            if (keycode == 116) {
                return false;
            }
        }
    }

 </script>

</head>
<body onload="JavaScript:document.body.focus();" onkeydown="return showKeyCode(event)">
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T07:38:33.253

尝试以下通过将其覆盖为禁用 location.reload() ：

```
location.reload = function() {return false;} 
```

但这可能有其他副作用......

# javascript - 使用添加的文本、评论功能更新 Div

> ID：12418805
> 
> 赞同：1
> 
> 时间：2012-09-14T05:49:11.043
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3

我正在开发一个具有剃刀语法的 MVC 应用程序。

我正在开发用于评论功能的部分类。

我有代码，其中显示以下模式的注释输出。

> ```
> John Smith 15-Aug-2012 
> -------------------------------
> Called Customer today, hold me to call later.
> 
> Will Parkar 15-Aug-2012 
> -------------------------------
> Keep track with him.
> 
> *Add New Comment in below text box.*
>  ___________________________________________
> |Called Again...                            |
> |                                           |
> |___________________________________________|
> 
>  Add Comment   Clear 
> ```

现在，每当用户将评论放在文本框中，该文本应该添加到上面的列表中......

输出应该是

> ```
> John Smith 15-Aug-2012 
> -------------------------------
> Called Customer today, hold me to call later.
> 
> Will Parkar 15-Aug-2012 
> -------------------------------
> Keep track with him.
> 
> John Smith 16-Aug-2012 
> -------------------------------
> Called Again...    <---------------------New Comment get added here.
> 
> *Add New Comment in below text box.*
>  ___________________________________________
> |                                           |
> |                                           |
> |___________________________________________|
> 
>  Add Comment   Clear 
> ```

我有以下代码...

```
 @model  IEnumerable<CRMEntities.Comment>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>

 <!DOCTYPE html>

<script src="../../Scripts/jquery.js" type="text/javascript"></script>

<script type="text/javascript">
    function clearText() 
    {
         document.getElementById('Comment').value = "";

    }
</script>

<script src="../../Scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
 $('#AddCommentButton').click(function () {
 $.ajax({
  type:'post',
  url: '/Comment/SaveComments', //url to your action method
  dataType: 'json',
  data: { 'comments': $('#Comment').val() },
  success: function(data)
  {
      $('#ParentBlock').appendChild("<div>" + data.msg + "</div>");
  }
 });
});

</script>

<script src="../../Scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $(".ShowComments").click(function () {
            $(".ParentBlock").slideToggle("slow");
            $("CommentP").append(document.getElementById('Comment').value);

        });
    });
</script>

<script src="../../Scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript">

    $(document).ready(function () {
        $(".ShowComments2").click(function () {
          $(".1").append("<strong>Hello</strong>");
        });
    });

</script>

<style type="text/css"> 
div.ParentBlock
{
position:relative;
display:none;
}

#ClassPara
{
   position:relative;
   background-color:#ECF5FC;
   cursor:pointer;
   border:2px;
   width: 115px;
   border-style:solid;
   border-width:thin;
   border-color: #DCEDF8;

}

<style type="text/css">

#OwnerName
{
    background-color : #F0F6FF;
    font-style:normal;
    font-family:Calibri;

}

#CommentTextBlock
{
     background-color : #F9F9FF;
}

#EmpName
{
   font-style:normal;
   font-size:medium;
}

#Clear
{
    text-decoration:underline;
    cursor:pointer;
    color:Blue;

}

#AddComment
{
    text-decoration:underline;
    cursor:pointer;
    color:Blue;
}

</style>

</head>
<body>

@{

    <p id="ClassPara" class="ShowComments" >Show Comments</p>

    <div class="ParentBlock">

    @foreach (var item in Model)
    {
        <div id="OwnerName">

         <span class="EmpName"> @Html.ActionLink(item.Owner.FullName, "Details", "EMployee", new { id = item.OwnerId }, new { @style = "color:#1A6690;" })</span>

           @Html.DisplayFor(ModelItem => item.CommentDateTime)

        </div>

       @* <div id="CommentTextBlock">
           @Html.DisplayFor(ModelItem => item.CommentText)
        </div>*@

        <p class="CommentP">
           @Html.DisplayFor(ModelItem => item.CommentText)
        </p>
        <br />

    }

    </div>

   @Html.TextArea("Comment", "", 5, 80, "asdsd")

    <input type="button" value="Add Comment" id="AddCommentButton"/>                         
    <input type="button" value="Clear" onclick="clearText()"/>                    

    <br />

  @*  <label id="AddComment">Add Comment</label>
    <label id="Clear" onclick="clearText()">Clear</label>*@

}

</body>
</html> 
```

这该怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:59:56.070

单击`ADD Comment`按钮将评论发布到您的操作以将其保存到数据库或您要保存的任何位置，然后在回调函数中返回该评论以`ajax`在页面上显示它。

```
$('#addCommentButtonID').click( function() {
 $.ajax({
  type:'post',
  url: 'SaveComments' //url to your action method
  dataType: 'json',
  data: {'comments':$('#textboxId').val()},
  success: function(data)
  {
     $('#yourMainDiv').appendChild("<div>"+data.msg+"</div>");
  }
 });
}); 
```

第二种方式：

```
$('#addCommentButtonID').click( function() {
    $.post('SaveComments',comments:$('#commentTextbox').val(),
        function (data) {
           $('#yourMainDiv').appendChild("<div>"+data.msg+"</div>");
        },'json');
}); 
```

你的行动

```
public JsonResult SaveComments(string comments)
{
   // save it wherever you want
   // after saving success return this string as jsonresult
   return Json(new { sc = true, msg = comment });
} 
```

# c++ - 将 Dll 注册到特定路径

> ID：12418807
> 
> 赞同：0
> 
> 时间：2012-09-14T05:49:14.887
> 
> 标签：c++, windows, registry

在将 dll 注册到注册表时，它会在某处注册到默认路径。现在我想更改此默认路径并使用*Regsvr32*`HKEY_LOCAL_MACHINE`将我的 Dll 注册到层次结构中的特定路径。我正在用 C++ 做我的项目。谁能帮我解决这个问题？

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:59:03.577

`RegSvr32`只需使用加载 DLL`LoadLibrary`并使用`GetProcAddress`来获取导出函数的地址`DllRegisterServer`。然后它调用该`DllRegisterServer`函数。所以无论是什么代码`DllRegisterServer`都会被执行。您可以在此功能中添加自己的注册码。*

# ruby-on-rails - 如何在模块中引用 Rails 中的类的实例？

> ID：12418810
> 
> 赞同：0
> 
> 时间：2012-09-14T05:49:30.277
> 
> 标签：ruby-on-rails, ruby, module

我试图在我的 Rails 应用程序中删除一些代码，这些代码允许在使用过滤器创建对象时设置唯一的 id。我在多个位置都有它，它似乎应该在一个模块中。

现在我在每个模型中都有这样的东西。

```
 def set_uid
    self.uid = SecureRandom.uuid
  end 
```

我在 /lib 目录中的 uid_generator.rb 文件中包含了一个新文件，并将该模块包含在每个模型中。

```
//model   
include UidGenerator

module UidGenerator
  def set_uid
    self.uid = SecureRandom.uuid
  end
end 
```

然而，在我的测试中，这会产生错误

```
uninitialized constant MODELNAME::UidGenerator (NameError). 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T06:05:38.573

您只需要为您的 rails 应用程序配置自动加载路径。这里有些东西可能会有所帮助。[从 Rails 3 中的 lib 文件夹加载模块/类的最佳方法？](https://stackoverflow.com/questions/3356742/best-way-to-load-module-class-from-lib-folder-in-rails-3)

# php - php while循环错误

> ID：12418812
> 
> 赞同：0
> 
> 时间：2012-09-14T05:49:32.517
> 
> 标签：php, loops, while-loop

我的脚本中有一个`PHP` `MySQL`fetch while 循环，如下所示：

```
$result2211 = mysql_query("select * from products where is_config = 'yes' ");
while($row2211 = mysql_fetch_assoc($result2211))
{
   $sn = $row2211['sn'];
   $allparrentselectq = mysql_query("SELECT * FROM parrentpro where parrentsn = $sn");
   while($allparrentselect = mysql_fetch_assoc($allparrentselectq))
   {
       $childarr = unserialize($allparrentselect['childsn']);
       $subpro  = '{"catname":"'.$allparrentselect['childname'].'",';
       $i = 0;
       foreach($childarr as $childarr):
           $subpro .= '"Pro'.$i++.'":"'.$childarr.'",';
       endforeach;
       $subpro1[] = substr($subpro, 0, -1)."}";
       $subproa = "[".implode(",",$subpro1)."]";
   }
   $prodObj2 = new ProductDetails();
   $prodObj2->productname = $row2211['productname'];
   $prodObj2->price = $row2211['productprice'];
   $prodObj2->discount = $row2211['discount'];
   $prodObj2->discountprice = $row2211['discountprice'];
   $prodObj2->imageURL = $row2211['productimageurl'];
   $prodObj2->category = $row2211['productcat'];
   $prodObj2->configurablepone = $subproa;
   $prodObj2->configurable = 'yes';
   array_push($totArr, $prodObj2);
} 
```

我有一个问题。我得到如下结果（JSON）：

```
[
    {
        "productname":"Veg.Pizaa",
        "price":"350",
        "discount":"",
        "discountprice":"350",
        "imageURL":"http:\/\/farm8.staticflickr.com\/7154\/6694188161_9ee692d854_s.jpg",
        "category":"Pizaa",
        "configurablepone":[{"catname":"Extra","Pro0":"Extra 25g Cheese","Pro1":"Extra 75g Cheese"},"catname":"Nuts","Pro0":"Almonds","Pro1":"Peanuts","Pro2":"Pistachios"}],
        "configurable":"yes"
    },
    {
        "productname":"Core i7 Pc",
        "price":"48000",
        "discount":"2",
        "discountprice":"47040",
        "imageURL":"http:\/\/www.4to40.com\/images\/science\/Basic_Computer_Parts\/Computer.jpg",
        "category":"Pc",
        "configurablepone":[{"catname":"Extra","Pro0":"Extra 25g Cheese","Pro1":"Extra 75g Cheese"},{"catname":"Nuts","Pro0":"Almonds","Pro1":"Peanuts","Pro2":"Pistachios"},{"catname":"Harddisk","Pro0":"Segate 500Gb","Pro1":"Samsung 250Gb"},{"catname":"Ram","Pro0":"8Gb Ram","Pro1":"4Gb Ram","Pro2":"2Gb Ram"}],
        "configurable":"yes"
    }
] 
```

但我需要如下结果：

```
[
    {
        "productname":"Veg.Pizaa",
        "price":"350",
        "discount":"",
        "discountprice":"350",
        "imageURL":"http:\/\/farm8.staticflickr.com\/7154\/6694188161_9ee692d854_s.jpg",
        "category":"Pizaa",
        "configurablepone":[{"catname":"Extra","Pro0":"Extra 25g Cheese","Pro1":"Extra 75g Cheese"},"catname":"Nuts","Pro0":"Almonds","Pro1":"Peanuts","Pro2":"Pistachios"}],
        "configurable":"yes"
    },
    {
        "productname":"Core i7 Pc",
        "price":"48000",
        "discount":"2",
        "discountprice":"47040",
        "imageURL":"http:\/\/www.4to40.com\/images\/science\/Basic_Computer_Parts\/Computer.jpg",
        "category":"Pc",
        "configurablepone":[{"catname":"Harddisk","Pro0":"Segate 500Gb","Pro1":"Samsung 250Gb"},{"catname":"Ram","Pro0":"8Gb Ram","Pro1":"4Gb Ram","Pro2":"2Gb Ram"}],
        "configurable":"yes"
    }
] 
```

如您所见，每个循环都会重复可配置的pone JSON，因此我也在第二个产品中获得第一个产品的价值，但我需要像下面这样分开：

第一个产品如下

```
"configurablepone":[{"catname":"Extra","Pro0":"Extra 25g Cheese","Pro1":"Extra 75g Cheese"},{"catname":"Nuts","Pro0":"Almonds","Pro1":"Peanuts","Pro2":"Pistachios"}] 
```

第二个产品如下

```
"configurablepone":[{"catname":"Harddisk","Pro0":"Segate 500Gb","Pro1":"Samsung 250Gb"},{"catname":"Ram","Pro0":"8Gb Ram","Pro1":"4Gb Ram","Pro2":"2Gb Ram"}] 
```

我试过改变循环，但我没有找到任何解决方案。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T06:04:08.363

我想，你的问题在行`$subpro1[] = substr($subpro, 0, -1)."}";`。

因此，首先调用此行将数据从“Veg.Pizaa”保存到`$subpro1[0]`. 此行的第二次调用将数据从“Core i7 Pc”保存到`$subpro1[1]`.

然后，行`$subproa = "[".implode(",",$subpro1)."]";`合并所有数组元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T07:22:40.713

只需`unset($subpro1);`在 `array_push($totArr, $prodObj2);`. 下面是一个示例来源试试这个这可能有效

```
$result2211 = mysql_query("select * from products where is_config = 'yes' ");
while($row2211 = mysql_fetch_assoc($result2211))
{
   $sn = $row2211['sn'];
   $allparrentselectq = mysql_query("SELECT * FROM parrentpro where parrentsn = $sn");
   while($allparrentselect = mysql_fetch_assoc($allparrentselectq))
   {
       $childarr = unserialize($allparrentselect['childsn']);
       $subpro  = '{"catname":"'.$allparrentselect['childname'].'",';
       $i = 0;
       foreach($childarr as $childarr):
           $subpro .= '"Pro'.$i++.'":"'.$childarr.'",';
       endforeach;
       $subpro1[] = substr($subpro, 0, -1)."}";
       $subproa = "[".implode(",",$subpro1)."]";
   }
   $prodObj2 = new ProductDetails();
   $prodObj2->productname = $row2211['productname'];
   $prodObj2->price = $row2211['productprice'];
   $prodObj2->discount = $row2211['discount'];
   $prodObj2->discountprice = $row2211['discountprice'];
   $prodObj2->imageURL = $row2211['productimageurl'];
   $prodObj2->category = $row2211['productcat'];
   $prodObj2->configurablepone = $subproa;
   $prodObj2->configurable = 'yes';
   array_push($totArr, $prodObj2);
   unset($subpro1);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-14T05:59:35.233

```
while($allparrentselect = mysql_fetch_assoc($allparrentselectq))
{
    $childarr = unserialize($allparrentselect['childsn']);
    $subpro  = '{"catname":"'.$allparrentselect['childname'].'",';
    $i = 0;
    foreach($childarr as $childarr):
       $subpro .= '"Pro'.$i++.'":"'.$childarr.'",';
    endforeach;
    $subpro1[] = substr($subpro, 0, -1)."}";
    $subproa = "[".implode(",",$subpro1)."]";
    $subpro1 = array();
} 
```

在第二个 while 循环中尝试这个

# workspace - Hyperion 中 MaxL 的用途是什么？

> ID：12418813
> 
> 赞同：0
> 
> 时间：2012-09-14T05:49:33.373
> 
> 标签：workspace, hyperion, essbase

我是 Essbase 的新手。在这里，我使用 Essbase Administration Services (EAS)、Planning and Workspace 创建了一个应用程序。

如果我能够单独使用上述服务创建和管理应用程序，那么 MaxL 提供了哪些附加功能..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:46:46.883

Oracle 提供了关于 MaxL 的优秀文档。它[位于这里](http://docs.oracle.com/cd/E10530_01/doc/epm.931/html_esb_techref/maxl/maxlintro.htm)。

如果您喜欢从命令行工作，您可能更喜欢 MaxL 而不是 EAS 和 Workspace，因为没有任何鼠标点击。其次，您直接连接到 Essbase 服务器，这也使其速度更快。

Raam 是正确的，您可以使用 MaxL 自动执行任务。例如，如果您需要连续运行四个计算脚本，您可以放弃在 EAS 中按顺序启动它们，而是编写一个 MaxL 脚本来为您连续运行它们。

编写过程脚本的另一个好处是能够利用 Essbase 中的一些不错的日志记录功能，该目录对您来说很方便，而不是深埋在 Hyperion 或 EPM 系统目录中。

但是，由于您是 Essbase 的新手，因此您应该知道 MaxL*并没有*提供您在 Hyperion Planning 和 Workspace UI 中拥有的所有功能。有用于规划和工作空间的命令行实用程序，但它们不是基于 MaxL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T21:29:03.580

MAXL 是用于管理 Essbase 的命令行工具。而EAS 是一个基于GUI 的工具。与所有命令行工具一样，MAXL 可用于通过创建脚本来自动执行任务。例如，您可以创建一个数据加载脚本并在需要时运行它，而不是从 UI 中执行相同的操作。

# asp.net - 展开时在TreeView的每个子节点前动态创建TextBox

> ID：12418815
> 
> 赞同：3
> 
> 时间：2012-09-14T05:49:34.600
> 
> 标签：asp.net, css

如何在 TreeView 展开时在每个子节点前面动态创建文本框。

我创建了一个程序，它有一些父节点和一些子节点，我希望每当用户在 TreeView 控件中展开任何“父节点”时，我只想在每个“子节点”前面显示（文本框/html 输入）节点'。

问题：我在服务器端动态创建了文本框，但无法将其放置在正确的位置（即在每个子节点的前面）。

可以通过服务器端代码实现吗？即`textbox1.position 12,12;`或一些CSS或HTML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:08:48.250

您可以在服务器上创建额外的控件，然后使用 CSS 定位它们。但是，我的猜测是您将希望在客户端创建它们。那是 JS（建议：使用 jQuery）。这样你的代码会更快，用户体验也会更好。

如果您提供有关您要达到的目标的信息，则更容易为您提供指导。

编辑：

当您在服务器端呈现它时，您可以将此字符串添加到控件。但请注意，我不推荐这种方法。

```
style="position: relative; left: 10px; top: -5px" 
```

# dart - 为什么 Dart 有编译时常量？

> ID：12418819
> 
> 赞同：14
> 
> 时间：2012-09-14T05:49:54.293
> 
> 标签：dart

Dart 有编译时常量的概念。编译时常量在编译时被解析和创建，并被规范化。

例如，这是`const`Point 的构造函数：

```
class Point {
  final num x, y;
  const Point(this.x, this.y);
} 
```

以下是你如何使用它：

```
main() {
  var p1 = const Point(0, 0);
  var p2 = const Point(0, 0);
  print(p1 == p2); // true
  print(p1 === p2); // true
} 
```

这是一个不明显的功能，似乎与其他动态语言中的功能没有相似之处。对象有一些限制`const`，比如所有字段都必须是 final 的，并且它必须有一个 const 构造函数。

为什么 Dart 有编译时常量？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-14T05:49:54.293

Florian Loitsch在[邮件列表中写道：](https://groups.google.com/a/dartlang.org/forum/#!topic/misc/pR2ClUIB_Aw)

> 编译时常量的规范化属性很好，但不是拥有它们的主要原因。编译时常量的真正好处是，它们不允许在构造时任意执行，因此可以在我们不想执行代码的地方使用。例如，静态变量初始化器最初仅限于编译时常量，以避免在顶层执行。简而言之，他们确保程序以“main”开头，而不是其他地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-14T01:48:05.403

[Lasse在这里](https://japhr.blogspot.com/2012/12/dart-constant-constructors.html?showComment=1356818172588#c8522270242427745784)的回答对我帮助很大

> 那么，编译时常量到底有什么用呢？
> 
> *   它们对枚举很有用。
> *   您可以在 switch case 中使用编译时常量值。
> *   它们用作注释。
> 
> **在 Dart 切换到惰性初始化变量之前，编译时常量曾经更重要**。在此之前，您只能声明一个已初始化的全局变量，如“var x = foo;” 如果“foo”是编译时常量。如果没有这个要求，大多数程序都可以在不使用任何 const 对象的情况下编写

# javascript - 使用压缩的 JavaScript 文件（不是运行时压缩）

> ID：12418822
> 
> 赞同：3
> 
> 时间：2012-09-14T05:50:08.220
> 
> 标签：javascript, python, extjs, embedded

我必须将大量基于 JS 的项目部署到嵌入式设备。它的磁盘大小不超过 16Mb。问题是我缩小的 js 文件的大小`all-classes.js`约为**3Mb**。如果我使用它压缩它，`gzip`我会得到一个**560k**的文件，它可以节省大约**2.4M**。现在我想存储`all-classes.js`这样`all-classes.js.gz`我可以节省空间并且可以很好地被浏览器解压缩。我所要做的就是处理标题。

现在的问题是如何包含`.gz`文件以便浏览器理解和解压缩？好吧，我知道一个`.gz`文件包含文件结构信息，而浏览器只接受原始压缩数据。在那我想存储原始的压缩数据。它有某种缓存！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T09:44:11.240

当请求“all-classes.js”文件时，您需要做的是返回“all-classes.js.gzip”的内容以及附加的“Content-Encoding: gzip”HTTP 标头。但只有在请求首先包含“Accept-Encoding: gzip”HTTP 标头时才有可能......

# jsp - 通过多列搜索数据库（类似于 Google）

> ID：12418827
> 
> 赞同：0
> 
> 时间：2012-09-14T05:50:39.753
> 
> 标签：jsp, servlets, search-engine

是否可以通过使用类似于 Google 的单个文本框输入单个关键字来搜索数据库？我知道谷歌有自己的搜索模式。我只想知道是否可以搜索类似于 Google 搜索的数据库表。

例如，有一个文本框，其中输入作为日期给出，输出根据给定日期显示。同样，如果我在同一文本框中输入名称，则应根据该名称显示输出。我尝试使用下面的查询；它将搜索并显示与文件描述列匹配的结果，该列基于单列搜索。

```
String query = "Select * from file1 where filedesc like '"+id+"%' and status='Y'"; 
```

我可以使用以下查询来通过使用与该列相关的多个文本框提供多个关键字来获得结果。

```
String query = Select * from file1 where filedesc where id='' or status='Y' or date=''; 
```

在搜索 Google 时，我遇到了来自 mysql 的 FULL TEXT SEARCH，其中全文搜索的准确性有些适中。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T06:05:47.077

如果您需要一个强大的解决方案，您可能需要查看[lucene](http://lucene.apache.org/core/)或[solr](http://lucene.apache.org/solr/)

# facebook-graph-api - 用于评论的 Facebook 图形 API 不返回对评论的“回复”

> ID：12418830
> 
> 赞同：1
> 
> 时间：2012-09-14T05:50:46.180
> 
> 标签：facebook-graph-api, facebook-comments

我在我的 JSP 中集成了以下标签

```
<div 
    class="fb-comments" 
    data-href="http://localhost:81/GGO_JSP_Chat/ID1012.jsp" 
    data-num-posts="10" 
    data-width="470">
</div> 
```

我在我的网站和 FB 页面上添加了评论和回复的组合。

但是，当我尝试使用图形 API 检索评论数据时，它只返回第一级评论。不返回后续回复/评论。回复可以在 FB 和我的网站上查看。

用于检索图形 API 数据的 URL： [https ://graph.facebook.com/comments/?ids=http://localhost:81/GGO_JSP_Chat/ID1012.jsp](https://graph.facebook.com/comments/?ids=http://localhost:81/GGO_JSP_Chat/ID1012.jsp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T14:49:41.873

找到了答案。我的应用程序处于沙盒模式。我禁用了沙盒模式，回复开始出现。

# java - JSP：我如何将图像从 HTML img 标签存储到数据库作为 blob

> ID：12418831
> 
> 赞同：2
> 
> 时间：2012-09-14T05:50:47.600
> 
> 标签：java, mysql, jsp

我有一个使用 Flash 播放器从 webcaam 捕获图像的 Web 应用程序。从网络摄像头捕获图像后，我在 HTML img 标记中显示它的预览，并在隐藏的表单字段中捕获图像 url，我用来将该图像存储在我的数据库中。但是我的查询是如何将来自该图像标签的图像作为 blob 存储在我的数据库中，并且我发现在数据库中存储图像的大多数解决方案都是从系统上传图像，然后从数据库中存储和检索它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T06:02:18.083

为了使其工作，您需要创建一个`<form enctype="multipart/form-data">`. 在您的 html 中，插入一个文件上传控件。然后您必须选择要上传的文件（由于大多数浏览器的安全原因，这不能自动完成）。然后提交您的表格。

提交表单时，您可以从请求中读取图像并将其存储到数据库（[如何在jsp中上传图像并将数据库存储为blob](https://stackoverflow.com/questions/6825818/how-to-upload-a-image-in-jsp-and-store-database-as-blob)）

# php - Jquery POST 标签/值对

> ID：12418832
> 
> 赞同：0
> 
> 时间：2012-09-14T05:51:08.850
> 
> 标签：php, jquery

我现在正在使用 jquery .submit 操作（表单）来发布数据。JAVA 中的正常 POST 操作不会传递标签/值键。对于以下（示例）表格，我该怎么做？我不想使用 Ajax，因为我的表单也会有上传文件字段，我知道如何仅在简单的 POST 操作中处理它。

```
<body>
     <form id="frmRequest" name="frmRequest" >

                <div class="clearfix" id="idRequestDetails"  >
                    <table width="809" border="0" id="tbl_data_1_1_1_1__" summary="Profile">
                      <tr>
                        <th width="156" scope="col"><label class="labelrequest" for="txtProfileName1__">Name</label>
                        </th>
                        <th width="74" scope="col"><label class="labelrequest" for="txtProfileUserID1__">User ID</label></th>
                        <th width="131" scope="col"><label class="labelrequest" for="txtSiteCost1__">Site Cost Centre</label></th>
                         <th width="182" scope="col"><label class="labelrequest" for="txtDetail1__">Additional Details</label></th>
                      </tr>
                      <tr>
                        <td><input type="text" name="txtProfileName1__" id="txtProfileName1__" tabindex="100" /></td>
                        <td><input name="txtProfileUserID1__" type="text" class="clearfix" id="txtProfileUserID1__" tabindex="110" size="8" /></td>
                        <td><input name="txtSiteCost1__" type="text" id="txtSiteCost1__" tabindex="220" size="8" /></td>

                        <td><textarea name="txtDetail1__" rows="1" id="txtDetail1__" tabindex="240"></textarea></td>
                      </tr>
                    </table>
                  </div>
        </body> 
```

尝试了以下但不工作

```
foreach ($_POST  as $key => $value)
{
   if($key === 'labels') {
      // Decode JSON string to array
      $value = json_decode($value, true);
   }
   if (!is_array($value))
   {
      $message .= "<br/>".$key." : ".$value;
   }
   else
   {
      foreach ($value as $itemvalue)
      {
         $message .= "<br/>".$value." : ".$itemvalue;
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:03:45.540

在发送表单之前，您必须使用您需要的信息来构建输入。

这是我在 LABEL 标签之间找到文本的示例。创建隐藏的输入。设置输入的名称。设置 INPUT 的值，它是 JSON 编码的标签值数组

```
$("form").submit(function(event) {
   $labels = $(this).find("label");
   $ret = [];
   $.each($labels, function() {
       $ret.push($(this).text());
   });
   $input = $("<input>").attr("type", "hidden").attr("name", "labels").val(JSON.stringify($ret));
   $(this).append($input);
}); 
```

由于我将所有标签放入 JSON 对象中，在 foreach 循环中，在第一个 if 之前，您需要找到标签数据，将其解码为数组

像这样：

```
foreach ($_POST  as $key => $value)
{
   if($key === 'labels') {
      // Decode JSON string to array
      $value = json_decode($value, true);
   }
   if (!is_array($value))
   {
      $message .= "<br/>".$key." : ".$value;
   }
   else
   {
      foreach ($value as $itemvalue)
      {
         $message .= "<br/>".$value." : ".$itemvalue;
      }
   }
} 
```

以防万一检查[JSON 函数](http://www.php.net/manual/en/ref.json.php)和您的 PHP 版本

# iphone - viewWillLayoutSubviews 被调用太多了

> ID：12418836
> 
> 赞同：8
> 
> 时间：2012-09-14T05:51:27.353
> 
> 标签：iphone, objective-c, ios, ipad, uikit

在我的`viewController.view`中，我做了一些工作来`viewWillLayoutSubviews`组织哪些子视图是可见的，哪些子视图要放在前面，哪些子视图要隐藏，等等，如果方向发生变化。

但是我的视图上有按钮，`viewWillLayoutSubviews`每次按下它们时都会以某种方式被调用。为什么会这样？根据 Apple 文档，`viewWillLayoutSubviews`仅当您的视图边界发生变化时才会调用。

结果是我的视图只是通过按下按钮重新排列，但我根本没有旋转设备，也没有以任何方式操纵 view.bounds 或 view.frame。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T06:26:28.187

你最好做一件事，andrews 取一个布尔值并在按下按钮时将其设置为 TRUE，并在 layoutSubviews 上检查它并操作它是真还是假。你明白我想要做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T06:01:56.727

很奇怪，我写了一个演示只有2个方法，一个用于按钮的动作，一个是`- (void)viewWillLayoutSubviews`，当我按下按钮时，`- (void)viewWillLayoutSubviews`没有被调用。也许你的代码有错误？

# c++ - 如何使用来自 boost.python 的 -fPIC 编译静态库

> ID：12418838
> 
> 赞同：14
> 
> 时间：2012-09-14T05:51:36.140
> 
> 标签：c++, python, c, boost, boost-python

默认情况下，`libboostpython.a`编译时没有`-fPIC`. 但我必须制作一个 python 扩展，它是一个动态库，带有`-fPIC`指向静态库的链接。如何使用from编译静态库 ( `libboostpython.a`) ？`-fPIC``boost.python`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-14T08:05:12.233

您可以使用几个选项：

*   从源代码编译 boost 并将额外的编译器选项传递给 bjam。例如`bjam ... cxxflags='-fPIC'`。这会将每个 boost 源文件编译为与位置无关的代码。
*   以共享库的形式使用 boost。在这种情况下，您可能希望将 boost 共享库与您的应用程序一起发布，以确保使用适当版本的 boost。您可以使用`'-Wl,-rpath,$ORIGIN'`标志链接您的可执行文件，以便当动态链接器搜索可执行文件所需的共享库时，它会在可执行文件所在的目录中查找它们。有关. [_](http://www.kernel.org/doc/man-pages/online/pages/man8/ld.so.8.html) _`$ORIGIN`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-17T14:39:21.437

请注意，如果您在需要首先清除目标时已经运行 bjam，那么通过应用 -d+2 来打印命令也很有帮助：

```
./bjam clean && 
./bjam -d+2 link=static cxxflags="-fPIC" install 
```

# mysql - 订房sql查询

> ID：12418843
> 
> 赞同：6
> 
> 时间：2012-09-14T05:52:16.127
> 
> 标签：mysql, sql, cakephp

我在编写 sql 以从表中获取可用房间时遇到问题。我的表结构如下。

**表：预订**

```
booking_id    |    room_id   |    start_datetime  |   end_datetime    |   customer_id
-------------------------------------------------------------------------------------
001           |     1        |  12-09-2012 2:35pm | 14-09-2012 9:00am |    23
002           |     2        | 10-09-2012 1:00am  | 20-09-2012 9:00am |    20
003           |     4        |  09-09-2012 1:35pm | 21-09-2012 9:00am |    43
004           |     1        |  22-09-2012 2:35pm | 24-09-2012 9:00am |    9
005           |     3        |  12-09-2012 9:00am | 13-09-2012 9:00am |    53
006           |     6        |  15-09-2012 9:00am | 19-09-2012 9:00am |    27 
```

**表：房间**

包含有关房间的详细信息，表的主键是 room_id，它有 10 个房间，从 1 到 10。

我的问题是我想知道房间在 2012 年 9 月 14 日下午 6:00 到 2012 年 9 月 21 日上午 9:00 之间可用，这意味着我应该只得到 room_id 的结果为 1,3,5,7,8 ,9,10。

有人可以帮我编写 SQL 以从上述表结构中获取可用房间。我使用 mysql 作为数据库引擎。提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-14T06:11:49.867

这应该这样做；*如果有预订没有在*我们想要的预订之前结束或之后开始，则认为房间很忙。

```
SELECT r.room_id
FROM rooms r
WHERE r.room_id NOT IN (
    SELECT b.room_id FROM bookings b
    WHERE NOT (b.end_datetime   < '2012-09-14T18:00'
               OR
               b.start_datetime > '2012-09-21T09:00'))
ORDER BY r.room_id; 
```

[SQLFiddle 在这里](http://sqlfiddle.com/#!2/3467a/5)。

# python - 如何在python中动态更改函数名

> ID：12418846
> 
> 赞同：6
> 
> 时间：2012-09-14T05:52:39.997
> 
> 标签：python

我想根据从另一个函数获得的结果更改函数名称但函数定义保持不变我该怎么做我尝试了以下示例但它不起作用

```
def f(text):
   def x(text):
     return text+"example"
   name=x(text)
   def name(y):
     return y
   return name
p=f("hi ")
print p("hello")
print p.__name__ 
```

**输出**

```
hello
name 
```

但我希望函数名称`p.__name__`为“hi example”而不是名称

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T05:59:13.653

您可以简单地分配给[`__name__`](http://docs.python.org/reference/datamodel.html#index-35)：

```
def f(text):
   def r(y):
     return y
   r.__name__ = text + "example"
   return r
p = f("hi ")
print (p("hello")) # Outputs "hello"
print (p.__name__) # Outputs "hi example" 
```

请注意，函数名称对函数的行为没有任何影响，并且除了作为字符串表示或调试帮助的一部分之外没有任何意义。

# java - Hadoop Map-Reduce 。记录阅读器

> ID：12418847
> 
> 赞同：0
> 
> 时间：2012-09-14T05:52:41.633
> 
> 标签：java, hadoop, mapreduce

我正在尝试解决以下 RecordReader 问题。示例输入文件：

```
1,1
2,2
3,3
4,4
5,5
6,6
7,7
.......
....... 
```

我希望我的 RecordReader 返回

```
key | Value 
0   |1,1:2,2:3,3:4,4:5,5
4   |2,2:3,3:......6,6
6   |3,3:4,4......6,6,7,7 
```

（对于第一个值的前五行，对于第二个值，从第二行开始的五行，对于第三个值，从第三行开始的五行，依此类推）

`public class MyRecordReader extends RecordReader<LongWritable, Text> {`

```
@Override
public boolean nextKeyValue() throws IOException, InterruptedException {

    while (pos < end) {
      key.set(pos);
      // five line logic 
      Text nextLine=new Text();

      int newSize = in.readLine(value, maxLineLength,
                                Math.max((int)Math.min(Integer.MAX_VALUE, end-pos),
                                         maxLineLength));
      fileSeek+=newSize;

      for(int n=0;n<4;n++)
      {
          fileSeek+=in.readLine(nextLine, maxLineLength,
                  Math.max((int)Math.min(Integer.MAX_VALUE, end-pos),
                           maxLineLength));
          value.append(":".getBytes(), 0,1);
          value.append(nextLine.getBytes(), 0, nextLine.getLength());
      }
      if (newSize == 0) {

        return false;

      }
      pos += newSize;
      if (newSize < maxLineLength) {

        return true;
      }

      // line too long. try again
      LOG.info("Skipped line of size " + newSize + " at pos " + (pos - newSize));
    }

    return false;
} 
```

}

但这会将值返回为

```
key | Value 
0   |1,1:2,2:3,3:4,4:5,5
4   |6,6:7,7.......10,10
6   |11,11:12,12:......14,14 
```

有人可以帮我处理这段代码，或者 RecodeReader 的新代码也可以吗？ [问题的需求（可以帮助您理解用例）](https://stackoverflow.com/questions/12455088/how-to-calculate-centered-moving-average-of-a-set-on-data-hadoop-map-reduce) 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T23:16:19.380

我想我理解这个问题......这就是我要做的：包装另一个 RecordReader 并将其中的键/值缓冲到本地队列中。

```
public class MyRecordReader extends RecordReader<LongWritable, Text> {
    private static final int BUFFER_SIZE = 5;
    private static final String DELIMITER = ":";

    private Queue<String> valueBuffer = new LinkedList<String>();
    private Queue<Long> keyBuffer = new LinkedList<Long>();
    private LongWritable key = new LongWritable();
    private Text value = new Text();

    private RecordReader<LongWritable, Text> rr;
    public MyRecordReader(RecordReader<LongWritable, Text> rr) {
        this.rr = rr;
    }

    @Override
    public void close() throws IOException {
        rr.close();
    }

    @Override
    public LongWritable getCurrentKey() throws IOException, InterruptedException {
        return key;
    }

    @Override
    public Text getCurrentValue() throws IOException, InterruptedException {
        return value;
    }

    @Override
    public float getProgress() throws IOException, InterruptedException {
        return rr.getProgress();
    }

    @Override
    public void initialize(InputSplit arg0, TaskAttemptContext arg1)
            throws IOException, InterruptedException {
        rr.initialize(arg0, arg1);
    }

    @Override
    public boolean nextKeyValue() throws IOException, InterruptedException {
        if (valueBuffer.isEmpty()) {
            while (valueBuffer.size() < BUFFER_SIZE) {
                if (rr.nextKeyValue()) {
                    keyBuffer.add(rr.getCurrentKey().get());
                    valueBuffer.add(rr.getCurrentValue().toString());
                } else {
                    return false;
                }
            }
        } else {
            if (rr.nextKeyValue()) {
                keyBuffer.add(rr.getCurrentKey().get());
                valueBuffer.add(rr.getCurrentValue().toString());
                keyBuffer.remove();
                valueBuffer.remove();
            } else {
                return false;
            }
        }
        key.set(keyBuffer.peek());
        value.set(getValue());
        return true;
    }

    private String getValue() {
        StringBuilder sb = new StringBuilder();
        Iterator<String> iter = valueBuffer.iterator();
        while (iter.hasNext()) {
            sb.append(iter.next());
            if (iter.hasNext()) sb.append(DELIMITER);
        }
        return sb.toString();
    }

} 
```

然后，例如，您可以拥有一个自定义 InputFormat，它扩展 TextInputFormat 并覆盖`createRecordReader`调用`super.createRecordReader`并返回包装在 a 中的结果的方法`MyRecordReader`，如下所示：

```
public class MyTextInputFormat extends TextInputFormat {
    @Override
    public RecordReader<LongWritable, Text> createRecordReader(
                InputSplit arg0, TaskAttemptContext arg1) {
        return new MyRecordReader(super.createRecordReader(arg0, arg1));
    }
} 
```

# css - CSS在pre标签上显示垂直滚动条

> ID：12418855
> 
> 赞同：21
> 
> 时间：2012-09-14T05:53:37.583
> 
> 标签：css, scrollbar, overflow

`running latest version 21`当`pre`标签的内容溢出时，我试图让垂直滚动条显示在 Chrome中。我无法让垂直滚动条实际显示。

看到这个jsFiddle：http: [//jsfiddle.net/justink101/2tJmC/](http://jsfiddle.net/justink101/2tJmC/)

**编辑**

在 Mac 上 - OSX

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-14T07:34:51.570

[http://jsfiddle.net/UTYzd/](http://jsfiddle.net/UTYzd/)

您正在从外部文件加载 css： bootstrap-combined.min.css 尝试更改以下内容：

`word-break` `word-wrap` `white-space`

```
pre {
    height: auto;
    max-height: 200px;
    overflow: auto;
    background-color: #eeeeee;
    word-break: normal !important;
    word-wrap: normal !important;
    white-space: pre !important;
}​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T06:32:50.890

您可以尝试用“div”包装“pre”部分标签，并在该 div 上应用 CSS。

这是一个[jsfiddle](http://jsfiddle.net/utkai/2tJmC/2/)。

# ios - 这是 NSScanner 的错误吗？

> ID：12418858
> 
> 赞同：0
> 
> 时间：2012-09-14T05:54:00.860
> 
> 标签：ios, ios5

代码片段如下：

```
 unichar chars[] = {0x0030, 0x0031, 0x0032, 0x003B, 0x0E31};//the testString is "012;" plus a thai character
    NSString *testString = [[NSString alloc] initWithCharacters:chars length:5];
    NSLog(@"testString %@", testString);
    NSScanner *theScanner = [NSScanner scannerWithString:testString];
    NSString *result = nil;
    [theScanner scanUpToString:@";" intoString:&result];        
    //[theScanner scanUpToCharactersFromSet:[NSCharacterSet characterSetWithCharactersInString:@";"]          intoString:&result];

    NSLog(@"the result is %@", result); 
```

使用 scanUpToString 失败，但是，使用 scanUpToCharactersFromSet 有效。如果 0x003B 之后的字符不是 0x0E31，例如 ,0x0030，则两个 api 都可以。所以我猜 scanUpToString 有一个处理某些字符的错误。有没有人有更好的想法？谢谢你。

# mysql - 执行时间与行数成正比吗？

> ID：12418860
> 
> 赞同：0
> 
> 时间：2012-09-14T05:55:05.897
> 
> 标签：mysql

我确信执行时间与 MySQL 查询中的行数成正比。我的问题是，比例是多少？查询的执行时间会随着数据库变大而显着增加还是只增加一点点？

任何有关该主题的信息将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T05:58:42.490

不，不是。

A`select * from table`将按比例花费更长的时间（如果您有很多行，对于只有四行的表，它不会比有两行的表花费两倍的时间，这将由“固定成本”主导）

无论表大小如何， A`select * from table limit 10`都将花费相同的时间。

A`select count(*) from table`在 MySQL 上是瞬时的，与表大小无关。

A`select * from table where primary_key = ?`将以对数方式缩放（因为使用了 B 树索引）。

A`select count(*) from table where non_indexed_column = ?`将按比例花费更长的时间，但 a`select count(*) from table where indexed_column = ?`不会。

如果行数加倍， A`select * from table_a join table_b`将花费四倍的时间。A`select * from table_a join table_b using (column_a = indexed_column_b)`应该线性缩放。

如果行数翻倍， A`select * from table_a order by unindexed_column`将花费两倍以上的时间。A`select * from table_a order by indexed_column`可以按比例缩放，但 a`select * from table_a where something = ? order by indexed_column`可能不会。

一旦表不再适合内存，所有操作都会花费更多时间。或者，如果您在内存用于其他表时运行查询。这可能是一堵真正的墙，执行时间会突然飙升。

此外，您正在讨论“查询中的行”（选择的行）和“表中的行”。这两者都有影响。表中已删除行的“存在”也会产生影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:58:25.820

SELECT 查询执行时间的最大因素是它们是否需要对数据库进行完整扫描或是否可以使用索引。对于前一种情况，执行时间随着数据库的增长而增长。对于后者，它没有（至少不显着）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T05:58:59.300

执行时间与行数和列数成正比，您必须将索引键放入列，然后从该列构建查询，这将运行得更快！

# android - 获取图像以设置图像的编码路径不起作用？

> ID：12418862
> 
> 赞同：0
> 
> 时间：2012-09-14T05:55:09.283
> 
> 标签：android

我遇到了奇怪的问题，我有一个用户单击按钮来选择图像。然后我将编码路径存储在 db 中并稍后检索它，因此我在另一个活动中显示图像但我得到以下异常

```
09-14 01:39:36.195: W/System.err(2241): java.io.FileNotFoundException: No content provider: /external/images/media/1113
09-14 01:39:36.195: W/System.err(2241):     at android.content.ContentResolver.openTypedAssetFileDescriptor(ContentResolver.java:610)
09-14 01:39:36.195: W/System.err(2241):     at android.content.ContentResolver.openAssetFileDescriptor(ContentResolver.java:542)
09-14 01:39:36.195: W/System.err(2241):     at android.content.ContentResolver.openInputStream(ContentResolver.java:377) 
```

我的按钮 OnClick 并存储在数据库代码中：

```
 Uri selectedImage = imageReturnedIntent.getData();
                InputStream imageStream;
                try {
                    imageStream = getContentResolver().openInputStream(selectedImage);
                    BitmapFactory.Options options=new BitmapFactory.Options();
                    options.inSampleSize = 8;
                    Bitmap yourSelectedImage = BitmapFactory.decodeStream(imageStream, null, options );
                    ivPictureChosen.setImageBitmap(yourSelectedImage);
                    storeEncodedImageInDb(selectedImage.getEncodedPath());
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Toast.makeText(this, "Couldn't pick image", Toast.LENGTH_SHORT).show();
                } 
```

我的检索和显示图像代码：

```
 String imagePath = db.getEncodedImage();
            if(imagePath.length()>0){
                Uri mainImgeUri = Uri.parse(imagePath);
                InputStream imageStream;
                try {
                    imageStream = getContentResolver().openInputStream(mainImgeUri);
                    BitmapFactory.Options options=new BitmapFactory.Options();
                    options.inSampleSize = 8;
                    Bitmap yourSelectedImage = BitmapFactory.decodeStream(imageStream, null, options );
                    mainImage.setImageBitmap(yourSelectedImage);
                } catch (FileNotFoundException e) {

                    e.printStackTrace();
                }
            } 
```

尽管那是我首先得到的编码路径，但为什么找不到文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:41:51.497

这是编码和解码到`base64 string`和返回的方式`base64 string`，请看一下。

```
public static String encodeTobase64(String Path)
{
    Bitmap immagex=Bitmap.createScaledBitmap(BitmapFactory.decodeFile(Path), 140, 120, false);    
    ByteArrayOutputStream baos = new ByteArrayOutputStream();  
    immagex.compress(Bitmap.CompressFormat.JPEG, 75, baos);
    byte[] b = baos.toByteArray();
    String imageEncoded = Base64.encodeToString(b,Base64.DEFAULT);

    Log.e("LOOK", imageEncoded);
    return imageEncoded;
}
public static Bitmap decodeBase64(String input) 
{
    byte[] decodedByte = Base64.decode(input, 0);
    return BitmapFactory.decodeByteArray(decodedByte, 0, decodedByte.length); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T06:02:26.533

您不仅需要路径，还需要方案等。Uri 看起来像这样： http: [//www.stackoverflow.com](http://www.stackoverflow.com)或 file://foo/bar/image.jpg。

encodedPath 只是其中的路径部分，例如 stackoverflow.com 或 /foo/bar/image.jpg。

尝试将结果存储`yourUri.toString()`在数据库中并检索`Uri.parse(theStringFromDatabase)`

# extjs - 如何为在可视化编辑器中创建的对象设置复杂的配置值

> ID：12418868
> 
> 赞同：0
> 
> 时间：2012-09-14T05:56:06.347
> 
> 标签：extjs, sencha-architect

我正在使用 Sencha Architect。

我找不到在配置编辑器中足够精确地指定配置值的方法。

几个例子：

1）我有面板，我想设置它的布局：

```
layout: {
    type: 'vbox'
    align : 'stretch',
    pack  : 'start',
} 
```

但是使用配置编辑器我无法继续设置它的类型'vbox'。如何设置它的`align`和`pack`属性？

2) Combobox 允许使用简单数组作为存储初始化器。它看起来很方便——例如，如果值是固定的，我们可以写`... store: ['constant', 'massive']...` 但是同样，如果我使用配置编辑器，我可以设置为`store`仅初步创建的类型对象`Store`。

问题是，有没有什么方法可以在设置配置值时获得更多的自由，而不会失去视觉编辑器的便利性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:41:30.837

1.  align 和 pack 是面板的直接属性。选择面板，您可以在右侧检查员的搜索框中找到它们。

2.  不幸的是，您不能在 sencha 的每个属性中设置对象，某些属性有一个按钮，您可以在其中设置类型：字符串、对象、数字。

# c - 在数组中搜索重复值

> ID：12418872
> 
> 赞同：2
> 
> 时间：2012-09-14T05:57:13.247
> 
> 标签：c, arrays, indexing

我对C非常陌生，我希望得到一些指示。我试图输入一个数组的 7 个整数并搜索它们以查看是否有任何数字只出现一次。这是我到目前为止所拥有的：

```
#define size 7
int main(void)
{
int array[size], target, i, prev, count;
//Initialize the array
printf("Please enter %d integers", size);
scanf("%d", &target);
prev = array[0];
count = 1;

for(i = 0; i<size; i++)
{
scanf("%d", &array[i]);
... 
```

我意识到这很糟糕，但 C 对我来说完全陌生。我想出了如何从用户那里输入这 7 个整数，但我没有第一个线索来说明从哪里开始尝试索引它们。我也意识到有更高级的方法可以解决这个问题。但是，我正在尝试使用业余爱好者可以理解的基本概念找到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T06:07:16.397

搜索重复项的最简单方法（尽管不是最有效的方法）是对数组进行排序。您可以像这样使用内置`qsort`函数：

```
int compare (const void * a, const void * b)
{
  return ( *(int*)a - *(int*)b );
}

/* ... */

qsort (array, size, sizeof(int), compare);

int seen = 0;
for (int i = 1; i < size; ++i) {
  if (array[i] == array[i - 1]) {
    if (!seen) {
      printf("%d\n", array[i]);
      seen = 1;
    }
  } else {
    seen = 0;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T06:37:42.027

我知道 3 种查找重复项的方法，2 种已经回答，所以这里是第三种（简化）-

复杂度 O(N) 时间，O(M) 内存。

如果数字在某个范围内`0 - M`并且与元素的数量`M`相当，`N`则可以使用大小数组`M+1`来检查该数字之前是否出现过。

代码 -

```
int exists[M+1]; //set M to appropriate value
memset(exists, 0, sizeof(exists)); //set all 0 
for (i = 0; i < N; i++)
{
  if (exists[array[i]])
  {
    printf("Duplicate found\n");
    break; //or something else
  }
  exists[array[i]] = 1;
} 
```

注意 - 不要忘记输入元素应该是正整数，不大于`M`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-21T09:21:28.170

这一篇读起来有点头疼，所以我在这里稍微解释一下我做了什么：

首先，包含标准 i/o 库，#define array size to any you want，声明你的数组（我叫我的：int entries[SIZE];）。

“输入 10 个数字”之后的第一个 for 循环是主要循环，它允许您将 10 个数字推入数组。

以下 if 语句是应用于键入后输入的值的测试：

1) 第一个 if 语句确保我们输入正确范围内的值。

2) 下面的 'else if' 表明 if entries[i] = entries[0] （意思是如果这是数组中的第一个对象）我们什么也不做，因为没有什么可以比较的。

3) 最后一个“else”包含一个嵌套循环。外部循环初始化为 1，因此我们确保在内部循环中进行的比较中，我们始终将当前值与前一个值进行比较。

我希望这会有所帮助......干杯:)

*/

```
#include <stdio.h>

#define SIZE 10

//declarations
int entries[SIZE];

int main(void)
{
    printf("Enter 10 numbers:\n");

    for(int i = 0; i <= SIZE-1; i++)
    {
        printf("[%d]:\n", i);
        scanf("%d", &entries[i]);

        if(entries[i] < 10 || entries[i] > 100) {
            printf("Please enter valid number (between 10 and 100)\n");
            scanf("%d", &entries[i]);
        }
        else if(i == 0) {
            ;
        } else
        {
            for(int j = 1; j <= i; j++)
            {
                *//internal loop goes through all the previous entries (entries[i-1], entries[i-2], etc)*
                for(int k = 0; k < j; k++) {
                    if(entries[j] == entries[k])
                        printf("%d is a duplicate value\n", entries[i]);
                }
            }
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T06:00:38.890

这可以在 O(n^2) 算法中完成：

```
int yes = 1, i, j;
for (i = 0; i < n; ++i)
{
   for (j = i + 1; j < n; ++j) if (arr[i] == arr[j])
   {
       printf("Found a duplicate of %d\n", arr[i]);
       yes = 0;
       break;
   }
   if (!yes) break;
}
if (yes) printf("No duplicates"); 
```

# php - 如何清除数组？

> ID：12418873
> 
> 赞同：0
> 
> 时间：2012-09-14T05:57:14.013
> 
> 标签：php

在循环中，我想在循环的每次迭代结束时清除一个数组：

```
$tab = array();
...
for($i=1; $i<=5; $i++)
{
    if ($regle_delegation_oper[$i] != "" && $regle_delegation_cond[$i] != "")
    {
        $tab['lien_id'] = $lien_id;
        $tab['regle_deleg_oper'] = $regle_delegation_oper[$i];
        $tab['regle_deleg_cond'] = $regle_delegation_cond[$i];
        $rd->ajouter($tab);
        // here I want to clear the $tab array
    }
} 
```

那么如何清除 $tab 数组呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T06:00:50.487

您可以在循环开始时初始化数组：

```
...
for($i=1; $i<=5; $i++)
{
    $tab = array(); // This will clear the $tab array at each iteration
    if ($regle_delegation_oper[$i] != "" && $regle_delegation_cond[$i] != "")
    {
        $tab['lien_id'] = $lien_id;
        $tab['regle_deleg_oper'] = $regle_delegation_oper[$i];
        $tab['regle_deleg_cond'] = $regle_delegation_cond[$i];
        $rd->ajouter($tab);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T05:59:02.293

你不能做类似的事情：

```
$tab = array(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-16T00:07:29.760

```
$tab = array();
for($i=1; $i<=5; $i++){

    if ($regle_delegation_oper[$i] != "" && $regle_delegation_cond[$i] != "")
    {
        $tab['lien_id'] = $lien_id;
        $tab['regle_deleg_oper'] = $regle_delegation_oper[$i];
        $tab['regle_deleg_cond'] = $regle_delegation_cond[$i];
        $rd->ajouter($tab);
        unset($tab);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T05:59:16.070

```
$tab = array(); 
```

或者

```
unset($tab); 
```

# java - JNI 本机：java.lang.UnsatisfiedLinkError：java.library.path 中没有 HelloWorld

> ID：12418875
> 
> 赞同：2
> 
> 时间：2012-09-14T05:57:23.997
> 
> 标签：java, c++, java-native-interface

我按照教程构建我的第一个 JNI 程序。我的程序很简单..

```
package JNI;
public class HelloWorld {

    private native void print();

    public static void main(String[] args) {
        new HelloWorld().print();
    }

    static {

        System.loadLibrary("HelloWorld");

    }
} 
```

而且我还构建了c++原生库（.so文件），并将其放在同一目录下

并使用

```
java -Djava.library.path=. JNI.HelloWorld 
```

（本机库和 helloworld.class 位于同一位置）

一切看起来都正确。但错误永远不会放弃纠缠我..

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T07:44:02.593

你需要检查一下

*   你的图书馆被称为`libHelloWorld.so`
*   它可以由您执行。
*   它与您的 JVM 相同的 32/64 位。

# c# - 在 Visual Studio 2012 中为 Office 2010 构建 VSTO 项目时出现“未安装项目目标框架”错误

> ID：12418876
> 
> 赞同：1
> 
> 时间：2012-09-14T05:57:23.557
> 
> 标签：c#, .net, vsto

我在 Visual Studio 2012 中开发了一个 VSTO 项目，它运行良好。

我已关闭 Visual Studio 并尝试再次打开相同的解决方案，但出现以下错误。

项目目标框架未安装

C#项目的目标是“.NETFramework,Version=v4.0”，它没有安装在这台机器上。要继续，您必须选择下面的一个选项。

1.将目标更改为.NET Framework 4.5.....

2.下载“.NET Framework, Version = v4.0”的目标包...

3.不要加载项目

上述步骤均无效。在我第一次为 Office 2010 创建 VSTO excel 插件后关闭应用程序时会发生这种情况。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-15T14:51:27.233

您需要安装 Microsoft .NET Framework 4.5.2 Developer Pack [https://www.microsoft.com/en-us/download/details.aspx?id=42637](https://www.microsoft.com/en-us/download/details.aspx?id=42637)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-17T14:15:32.510

VS 2013 Update 3 之前的 Visual Studio 中的 VSTO 项目被硬链接到最大 .NET 4.0。这很可能还包括 VS 2012。

由于 Visual Studio 2013 Update 3 ( [https://blogs.msdn.microsoft.com/vsto/2014/08/04/visual-studio-2013-update-3-released/](https://blogs.msdn.microsoft.com/vsto/2014/08/04/visual-studio-2013-update-3-released/) ) 您可以选择 .NET 4.5 (及更高版本)对于 VSTO 项目。因此，这可能是 Visual Studio 尝试将项目升级到 .NET 4.5 的一种古怪行为，因为缺少 .NET 安装 (4.0) 而生成的升级项目本身不受支持。

# android - 直接向固定用户发送短信

> ID：12418879
> 
> 赞同：1
> 
> 时间：2012-09-14T05:57:39.113
> 
> 标签：android, sms

我已经尝试了将短信发送给固定用户的代码，但是根据我的功能，我想发送取决于标志的短信。当标志为真时，直接发送短信。现在它正在调用 Intent 并转到短信屏幕，当我们点击发送按钮时，它将发送短信。但我不想进入这个屏幕，我想直接向固定用户发送短信

```
 startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("sms:"
                + phoneNumber))); 
```

和

```
String x="Hello World";
String y="You Rock!!!";
Intent sendIntent = new Intent(Intent.ACTION_VIEW);
sendIntent.putExtra("sms_body", x); 
sendIntent.putExtra("sms_body", y); 
sendIntent.setType("vnd.android-dir/mms-sms");
startActivity(sendIntent); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T06:45:19.420

您必须使用[SMSManager](http://developer.android.com/reference/android/telephony/SmsManager.html)类直接发送消息。在上面的类中使用[SmsManager.sentextMessage](http://developer.android.com/reference/android/telephony/SmsManager.html#sendTextMessage%28java.lang.String,%20java.lang.String,%20java.lang.String,%20android.app.PendingIntent,%20android.app.PendingIntent%29) api

```
SmsManager sm = SmsManager.getDefault();
sm. sendTextMessage(phoneNumber,null,x,null,null); 
```

并添加权限

```
<uses-permission android:name="android.permission.SEND_SMS"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T06:46:31.590

尝试使用下面给出的代码：

```
SmsManager sms = SmsManager.getDefault();
sms.sendTextMessage(number, null, message, null, null); 
```

*笔记：*

使用***android.telephony.SmsManager***类（***android.telephony.gsm.SmsManager***已弃用）

# powershell - Powershell csv 格式

> ID：12418882
> 
> 赞同：0
> 
> 时间：2012-09-14T05:57:53.237
> 
> 标签：powershell

我正在从 AD 中导出 A 用户。它工作正常，我只在导出文件中遇到问题。

电流输出

> A000354 CN=ATX_PUTTY,OU=个人,OU=abc,OU=xyz,DC=dd,DC=pp,DC=net

期望的输出

> ```
> A000354  ATX_PUTTY 
> ```

```
$FilePath = "c:/LocalData/A_Users.csv"
$OuDomain = "OU=Personal,OU=Personal,OU=abc,OU=xyz,DC=dd,DC=pp,DC=net"
$users = Get-QADUser -SamAccountName [A]* -searchRoot $OuDomain -SizeLimit 0 -DontUseDefaultIncludedProperties
$result = $users | % {
    $SamAccountName = $_.SamAccountName
    if ($lastDomain -eq $_.dn) {
        $lastDomain = ""
    } else {
        $lastDomain = $_.dn
    }

    $_.MemberOf | % {
        $user = New-Object -TypeName PsObject -Property @{
                "Domain" = $lastDomain
                "SamAccountName" = $SamAccountName
                "Group" = $_
            }
        $user
    }
}

$result | sort-object SamAccountName | Select-Object SamAccountName, Group |  Export-CSV $FilePath -NoTypeInformation 
```

现在我得到......输出像

```
A000354 CN=ATX_PUTTY,OU=Personal,OU=abc,OU=xyz,DC=dd,DC=pp,DC=net 
```

我想像下面这样输出，我不想要 CN= 和 ,OU=Personal,OU=abc,OU=xyz,DC=dd,DC=pp,DC=net

```
A000354  ATX_PUTTY 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T06:06:10.973

用于`Get-Help Export-CSV -detailed`查看是否有一个`-NoTypeInformation`开关可以满足您的需要：

> -NoTypeInformation [] 忽略 CSV 文件中的类型信息。默认情况下，CSV 文件的第一行包含“#TYPE”，后跟 .NET Framework 对象类型的完全限定名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T06:03:30.667

您可以使用`Select-Object`来选择所需的属性：

```
$result | sort-object SamAccountName | Select-Object SamAccountName, Group |  Export-CSV $FilePath 
```

# jquery - jQuery tokeninput 插件 + 将 id 传递给另一个 tokeninput url

> ID：12418883
> 
> 赞同：2
> 
> 时间：2012-09-14T05:57:56.007
> 
> 标签：jquery, jquery-tokeninput

我正在使用一个名为 jQuery Tokeninput [http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)的 jquery 插件，但我遇到了一个逻辑问题。

```
var country_id = "";
    jQuery("#demo-input-prevent-duplicates").tokenInput(host+"/forms/campaign_location.php?action=country", {
            theme: "facebook",
            hintText: "Enter a Country...",
            placeholder: "Enter a Country...",
            preventDuplicates: true,
            onAdd: function(item) {
                country_id = item.id;

            },
        onDelete: function(){
            hideElements();
        },
        tokenDelimiter: "|",
    }); 
```

我的问题是如何将 country_id 的值传递给以下代码的参数。我没有看到如何在 jquery tokeninput 文档中执行此操作。

```
jQuery("#targ_state").tokenInput(host+"/forms/campaign_location.php?action=stateorprovince&cid="+country_id, {
        theme: "facebook",
        preventDuplicates: true,
        hintText: "Enter a State or Province...",
        placeholder: "Enter a State or Province..."

    }); 
```

如果您查看这部分代码，我将传递上面在“onAdd”上生成的 country_id。但这不起作用。

```
jQuery("#targ_state").tokenInput(host+"/forms/campaign_location.php?action=stateorprovince&cid="+country_id .... 
```

我该怎么做呢？您的帮助将不胜感激，当然，奖励！

谢谢！:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:58:17.707

你的意思是这样吗？

```
$("#targ_state").tokenInput(host+"/forms/campaign_location.php?action=stateorprovince", 
{
    queryParam: "cid="+country_id+"&q",
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-25T15:50:52.680

如果您希望 url 是动态的，则必须将一个方法传递给 tokenInput ，该方法将返回 url

```
$("#targ_state").tokenInput(someMethodToReturnUrl, ...) 
```

所以现在每次`tokenInput`调用 ajax 都会调用这个方法，你可以返回动态 url。

# solr - SOLR：无缓冲的实体封闭请求不能重复

> ID：12418884
> 
> 赞同：1
> 
> 时间：2012-09-14T05:58:02.777
> 
> 标签：solr, indexing, solrj

运行索引时出现以下错误。我正在使用 Solr 1.4。自 1 天以来，我一直在努力了解其根本原因，但不能。请帮我解决这个问题。

```
Caused by: org.apache.solr.client.solrj.SolrServerException:
org.apache.commons.httpclient.ProtocolException: Unbuffered entity enclosing request can not be repeated.at 
org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:469) at
org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:243) at
org.apache.solr.client.solrj.request.AbstractUpdateRequest.process(AbstractUpdateRequest.java:105) at       
org.apache.solr.client.solrj.SolrServer.add(SolrServer.java:49)
 ... 3 more
Caused by: org.apache.commons.httpclient.ProtocolException: Unbuffered entity enclosing request can not be repeated.     at
org.apache.commons.httpclient.methods.EntityEnclosingMethod.writeRequestBody(EntityEnclosingMethod.java:487)     at
org.apache.commons.httpclient.HttpMethodBase.writeRequest(HttpMethodBase.java:2114)     at
org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1096)     at
org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)     at
org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)     at
org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)     at
org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)     at
org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:416)
... 7 more 
```

这是代码：

```
Collection<SolrInputDocument> docs = new ArrayList<SolrInputDocument>();

CommonsHttpSolrServer server = new CommonsHttpSolrServer(solrHost);
server.setDefaultMaxConnectionsPerHost(150);
server.setRequestWriter(new BinaryRequestWriter());

SolrInputDocument solrDoc = new SolrInputDocument();
solrDoc.addField("id", "1234");
docs.add(solrDoc);

try {
   server.add(docs);
   server.commit();
} catch (SolrServerException e) {
   throw new SolrException(e.getMessage());
} 
```

# java - 我收到“构造函数 Base64() 不可见错误”

> ID：12418889
> 
> 赞同：4
> 
> 时间：2012-09-14T05:58:44.883
> 
> 标签：java, android

我正在尝试从 flicker.com 生成 OAUTH 签名。我从以下位置获得了源代码：

[获得使用 Java 或 Groovy 填充的有效 oauth_signature 的绝对最少代码？](https://stackoverflow.com/questions/3756257/absolute-minimum-code-to-get-a-valid-oauth-signature-populated-in-java-or-groovy)

但是当我尝试执行它时，我收到“构造函数 Base64() 不可见错误”。

我的课是：

```
public class MainActivity extends Activity {

    Button login;

    //---------------------------------------------

     static String key = "key";
     static String secret = "secret";

     static final String HMAC_SHA1 = "HmacSHA1";

     static final String ENC = "UTF-8";

      static Base64 base64 = new Base64();

     @SuppressWarnings("static-access")
    private static String getSignature(String url, String params)
             throws UnsupportedEncodingException, NoSuchAlgorithmException,
             InvalidKeyException {
         /**
          * base has three parts, they are connected by "&": 1) protocol 2) URL
          * (need to be URLEncoded) 3) Parameter List (need to be URLEncoded).
          */
         StringBuilder base = new StringBuilder();
         base.append("GET&");
         base.append(url);
         base.append("&");
         base.append(params);
         System.out.println("Stirng for oauth_signature generation:" + base);
         // yea, don't ask me why, it is needed to append a "&" to the end of
         // secret key.
         byte[] keyBytes = (secret + "&").getBytes(ENC);

         SecretKey key = new SecretKeySpec(keyBytes, HMAC_SHA1);

         Mac mac = Mac.getInstance(HMAC_SHA1);
         mac.init(key);

         // encode it, base64 it, change it to string and return.
         return new String(base64.encode(mac.doFinal(base.toString().getBytes(
                 ENC)), 0, 0, 0), ENC).trim();
     }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        login=(Button)findViewById(R.id.login_button);
        login.setOnClickListener(new OnClickListener() {

            public void onClick(View v)  {

 HttpClient httpclient = new DefaultHttpClient();
            List<NameValuePair> qparams = new ArrayList<NameValuePair>();
            // These params should ordered in key
            qparams.add(new BasicNameValuePair("oauth_callback", "oob"));
            qparams.add(new BasicNameValuePair("oauth_consumer_key", key));
            qparams.add(new BasicNameValuePair("oauth_nonce", ""
                    + (int) (Math.random() * 100000000)));
            qparams.add(new BasicNameValuePair("oauth_signature_method",
                    "HMAC-SHA1"));
            qparams.add(new BasicNameValuePair("oauth_timestamp", ""
                    + (System.currentTimeMillis() / 1000)));
            qparams.add(new BasicNameValuePair("oauth_version", "1.0"));

            // generate the oauth_signature
            String signature = getSignature(URLEncoder.encode(
                    "http://www.flickr.com/services/oauth/request_token", ENC),
                    URLEncoder.encode(URLEncodedUtils.format(qparams, ENC), ENC));

            // add it to params list
            qparams.add(new BasicNameValuePair("oauth_signature", signature));

            // generate URI which lead to access_token and token_secret.
            URI uri = URIUtils.createURI("http", "www.flickr.com", -1,
                    "/services/oauth/request_token",
                    URLEncodedUtils.format(qparams, ENC), null);

            System.out.println("Get Token and Token Secrect from:"
                    + uri.toString());

            HttpGet httpget = new HttpGet(uri);
            // output the response content.
            System.out.println("oken and Token Secrect:");

            HttpResponse response = httpclient.execute(httpget);
            HttpEntity entity = response.getEntity();
            if (entity != null) {
                InputStream instream = entity.getContent();
                int len;
                byte[] tmp = new byte[2048];
                while ((len = instream.read(tmp)) != -1) {
                    System.out.println(new String(tmp, 0, len, ENC));
                }
            }

            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
    public void makeAToast(String str) {
        //yet to implement
        Toast toast = Toast.makeText(this,str, Toast.LENGTH_LONG);
        toast.setGravity(Gravity.CENTER, 0, 0);
        toast.show();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T06:05:15.853

如果您使用 Android SDK 中的 Base64 类，则不需要创建对象

[http://developer.android.com/reference/android/util/Base64.html#encode(byte[], int)](https://developer.android.com/reference/android/util/Base64.html#encode(byte[],%20int))

检查上面的链接所有编码和解码方法都是静态的，所以你可以在不创建对象的情况下使用它

```
String s= "hello";    
Base64.encode(s.getBytes()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T06:20:45.103

您不能实例化 Base64 类，因为它的构造函数是私有的。检查[Base64](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/util/Base64.java)的来源（第 740 行）。您有直接提供的静态方法，您可以直接将它们称为`Base64.encode(string)`. 检查[文档](http://developer.android.com/reference/android/util/Base64.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-20T18:34:56.070

使用 org.apache.commons.codec.binary.Base64；

# c++ - cvLoadImage 返回 NULL

> ID：12418890
> 
> 赞同：0
> 
> 时间：2012-09-14T05:58:55.053
> 
> 标签：c++, image-processing, opencv, eclipse-cdt, ubuntu-12.04

我在 Eclipse ide 上使用 OpenCV 版本 2.4.1 在 Ubuntu 12.04,32 位平台上工作。即使将图像放在我拥有 cpp 文件的项目的当前位置之后，cvLoadImage() 函数也会返回一个 NULL 值。

```
#include "highgui.h"
#include<iostream>
using namespace std;
int main( int argc, char** argv )
{
  char image[80]="baboon.jpg";
  IplImage* img = cvLoadImage(image,CV_LOAD_IMAGE_COLOR);
  cout<<img<<endl;
} 
```

以下是我的包含文件目录：

> -I/usr/local/include/opencv -I/usr/local/include

和

以下是库文件：

> /usr/local/lib/libopencv_calib3d.so /usr/local/lib/libopencv_contrib.so /usr/local/lib/libopencv_core.so /usr/local/lib/libopencv_features2d.so /usr/local/lib/libopencv_flann.so /usr/local/lib/libopencv_gpu.so /usr/local/lib/libopencv_highgui.so /usr/local/lib/libopencv_imgproc.so /usr/local/lib/libopencv_legacy.so /usr/local/lib/libopencv_ml.so /usr/local/lib/libopencv_nonfree.so /usr/local/lib/libopencv_objdetect.so /usr/local/lib/libopencv_photo.so /usr/local/lib/libopencv_stitching.so /usr/local/lib/libopencv_ts.so /usr/local/lib/libopencv_video.so /usr/local/lib/libopencv_videostab.so

我的 img 值始终为零（NULL）。我没有收到任何编译错误。我在论坛上查看了类似的帖子，但没有一个可以解决我的问题。我什至尝试过使用 PNG 图像，但遇到了同样的问题。如果以前有人遇到过类似的问题，请告诉我。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T07:31:41.127

您是否尝试提供图像文件的完整路径？如果没有，请确保映像文件位于包含可执行文件的文件夹中（某些 IDE 有一个单独的文件夹用于调试和发布）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-25T09:43:43.043

我也是 OpenCV 的新手，但我认为这里 cout'<<'img'<<'endl; 您正在打印指针的值，即存储在“img”中的地址。这是我使用的一个示例，它有效：

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <iostream>

using namespace cv;
using namespace std;

int main()
{
    Mat image; // new blank image
    image = imread("lena.bmp", 0);// reads the image file (I put the image in the same    project's directory).
    namedWindow("My Loaded Image", CV_WINDOW_AUTOSIZE );// creates a window for display.
    imshow("Display window",image);// shows the image inside it.
    waitKey(0);// wait for a keystroke in the window (When you don't do this, the image disappears instantly).
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T08:25:21.340

由于您使用的是最新版本的 OpenCV，因此我建议您使用较新的 C++ 接口来处理图像 (cv::Mat) 和读取功能。

运算符 << 是否甚至可用于 IplImage？我不这么认为，这可能是您的编译错误的原因。

使用新界面，您的代码将如下所示：

```
#include <cstdlib>
#include<iostream>
#include <string>
#include <opencv2/highgui/higui.hpp>

using namespace std;
int main( int argc, char** argv )
{
  const std::string imageName = "baboon.jpg";
  cv::Mat img = cv::imread(image,CV_LOAD_IMAGE_COLOR);
  cout<<img<<endl;
  return EXIT_SUCCESS;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T13:22:13.293

如果您直接在 Eclipse 中运行程序，则图像应位于具有 .cpp 文件的文件夹中。

但是如果您从终端执行程序，图像文件应该与可执行文件位于同一文件夹中。

您也可以使用直接路径来解决冲突。

# asp.net - 如何将Requiredfieldvalidator控件添加到formview itemtemplate

> ID：12418898
> 
> 赞同：0
> 
> 时间：2012-09-14T05:59:12.933
> 
> 标签：asp.net

如何将Requiredfieldvalidator控件添加（绑定）到formview itemtemplate？

```
 <tr runat="server" > 
         <td style="width: 120px">

             <asp:Label Text="Purchase Org.:" ID="LabelPurchOrg1" runat="server">  </asp:Label>
       </td>
        <td>
            <orbit:Control runat="server" ID="Purch" Text='<%# Eval("Site")%>'                    LabelPosition="Right" CssClassLabel="SectionTextLookup"   RenderTextBoxAsLabel="true" EnableLabel="true" EnableTooltip="true" LookupCommand="sit" />

           <asp:RequiredFieldValidator ID="PurchaseOrg" runat="server" ControlToValidate='<%#   Eval("Site") %>'   ErrorMessage="<" EnableClientScript="false" Enabled="false" >
        </asp:RequiredFieldValidator>
      </td>
  </tr>
</table>
</ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:11:06.190

所以你只需要改变RequiredFieldValidator如下：

```
<asp:RequiredFieldValidator ID="PurchaseOrg" runat="server" 
ControlToValidate="Purch" ErrorMessage="<" EnableClientScript="false" 
Enabled="false" ></asp:RequiredFieldValidator> 
```

# javascript - 如何使用phonegap将文件从一个文件夹移动/复制到android中的另一个文件夹？

> ID：12418901
> 
> 赞同：5
> 
> 时间：2012-09-14T05:59:35.293
> 
> 标签：javascript, android, html, cordova

在我单击按钮的应用程序中，我可以将文件从 url 下载到我的 android SDCARD 中，其路径类似于**“mnt/sdcard/files/data.pdf”**，现在我想将此文件移动/复制到其他目的地使用 phonegap 的文件夹。谁能帮助我如何在phonegap中做到这一点？

我在路径**“mnt/sdcard/files/data.pdf”**中有一个 pdf 文件，我想将该 pdf 文件移动到新路径**“mnt/sdcard/download/data.pdf”**，请帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T06:54:53.310

假设您实际上正在使用 Cordova，请检查[FileEntry](http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#FileEntry)，它具有名为`moveTo`and的方法`copyTo`。

请注意，文件系统 API 是回调地狱。

文档中的一个简单示例可以俯瞰文档：

```
var fail = function(err) { console.log(err) }
window.resolveLocalFileSystemURI("file:///example.txt", function(file) {
   window.resolveLocalFileSystemURI("file:///directory-to-move-to", function(destination) {
             file.moveTo(destination,"example.txt");
   },fail)
},fail); 
```

为了清楚起见，我跳过了错误处理功能，假设没有它也可以工作。

# android - 在 android 的 HttpURLconnection 中添加 ;jsessionid 以获取 GET 请求的问题

> ID：12418904
> 
> 赞同：0
> 
> 时间：2012-09-14T05:59:49.250
> 
> 标签：android, httpurlconnection, jsessionid

在第一个屏幕中的我的 android 应用程序中，用户使用会话 id 进行身份验证和 servlet 回复......在第二个屏幕中，用户再次调用 servlet，并将 url 中添加的会话 id 作为 ;jsession="sessionid" 以及参数。 ..

但是 servlet 没有获得会话 id，而是作为一个没有身份验证的新会话进行响应......

问题出在哪里？

我正在使用此代码进行连接

```
 URL u = new URL(aurl[0]);
        url=aurl[0];
        publishProgress(""+20,"Connecting...");
        HttpURLConnection c = (HttpURLConnection) u.openConnection();
        publishProgress(""+40,"Connecting...");
        c.setRequestMethod("GET");
        c.setDoOutput(true);
        c.connect();

        publishProgress(""+45,"Connecting...");
        publishProgress(""+40,aurl[0]);
        int lenghtOfFile = c.getContentLength();
        System.out.println(lenghtOfFile+"lenghtOfFile");

        is = c.getInputStream(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:59:04.527

我遇到了同样的问题，并找到了一个简单的解决方案。

// 首先设置默认的cookie管理器。

CookieHandler.setDefault(new CookieManager(null, CookiePolicy.ACCEPT_ALL));

// 以下所有后续 URLConnections 将使用相同的 cookie 管理器。

URLConnection 连接 = 新 URL(url).openConnection();

// ...

连接 = 新 URL(url).openConnection();

// ...

连接 = 新 URL(url).openConnection();

// ...

这是我找到的最简单的解决方案。我们需要设置默认的 CookieManager。 [使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)是一个很棒的博客。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:47:45.920

在 url 中添加 jseesioid 从来没有用过.. 代码使用这个解决方案工作

[http会话管理](https://stackoverflow.com/a/2793153/1473896)

尤其是这两...

```
 // Gather all cookies on the first request.
URLConnection connection = new URL(url).openConnection();
List<String> cookies = connection.getHeaderFields().get("Set-Cookie");
// ...

// Then use the same cookies on all subsequent requests.
connection = new URL(url).openConnection();
for (String cookie : cookies) {
connection.addRequestProperty("Cookie", cookie.split(";", 2)[0]);
 }
 // ... 
```

# php - 通过 Magento 中的 Web 服务检索运费

> ID：12418917
> 
> 赞同：0
> 
> 时间：2012-09-14T06:01:03.803
> 
> 标签：php, javascript, ajax, magento, magento-1.7

我已经创建了自己的运输模块，但问题是当用户进入运输方法步骤时调用 collectRates 函数，然后这些价格只显示给用户。但在我的情况下，我必须使用网络服务来获取价格，并且用户可以在运输方式步骤屏幕中选择一些选项，这会影响运输价格。价格本身是在其他服务器上计算的。

那么如何在运输方法步骤中通过 ajax 设置运输价格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:13:27.980

我自己找到了可行的解决方案。我调用 shipping.save() JavaScript 函数来更新运输方式页面，然后调用我自己的运输模块中的 collectRates (php) 函数，一切正常。

```
shipping.save(); 
```

# json - 在 Eclipse RCP 的视图中读取并显示从 Google Maps API 返回的 JSON

> ID：12418918
> 
> 赞同：0
> 
> 时间：2012-09-14T06:01:02.797
> 
> 标签：json, google-maps, eclipse-rcp

我正在使用 Google Directions API 使用 Eclipse RCP 开发一个桌面应用程序，其中提供源和目标将导致方向。

但是当我使用这个 API "http://maps.googleapis.com/maps/api/directions/json?origin=Toronto&destination=Montreal" 我返回一个 JSON 文件来保存。但我需要在透视图内的视图中显示方向。如何在视图中显示它？

另外，我目前正在使用 Browser 类在视图中显示整个浏览器。谁能告诉我是否可以只在视图中显示地图而不是整个浏览器实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:46:42.733

将您的浏览器视图添加到您的透视图中。您需要提供起点和终点并执行 java 脚本以使浏览器获取路线信息。无论如何，如果您需要在页面加载后通知 RCP 视图，您可以使用`BrowserFucntion`class.

# c# - 400 bad request invalid hostname 仅在 android 应用程序中

> ID：12418920
> 
> 赞同：2
> 
> 时间：2012-09-14T06:01:20.873
> 
> 标签：c#, java, android, asp.net-mvc

我在服务器上部署了一个 asp.net mvc 网站，为其他人提供了一些 Web 界面。例如，获取当前用户的信息，我的测试 C# 控制台应用程序如下所示：

```
using (var client = new WebClient())
{
     try
     {
         var url = "http://api.fake.mysite.com/v1.0/user/current";
         var token = "e0034e1c082de62b74e361b15f9c6471";
         var encoded = Convert.ToBase64String(Encoding.UTF8.GetBytes(token));
         client.Headers["Authorization"] = encoded;
         client.Headers["Content-Type"] = "application/json";
         Console.WriteLine(client.DownloadString(url));
     }
     catch (WebException e)
     {
         //log the exception
     }
} 
```

可以看到用法非常简单，只需通过 HTTP_GET 请求 url，将*Authorization*标头设置为编码令牌。实际上它在我的机器上运行良好。但是其他人在 android 应用程序中访问这个 url 时遇到了一个奇怪的问题，这里是 java 代码：

```
HttpClient httpClient = new DefaultHttpClient();
String token = "e0034e1c082de62b74e361b15f9c6471";
String url = "http://api.fake.mysite.com/v1.0/user/current";
HttpGet httpGet = new HttpGet(url);
String encoded = Base64.encodeToString(token.getBytes(), Base64.DEFAULT);
httpGet.addHeader("Authorization", encoded);
httpGet.addHeader("Content-Type", "application/json");

try {    
    HttpResponse httpResponse = httpClient.execute(httpGet);
    int responseCode = httpResponse.getStatusLine().getStatusCode();
    String response = EntityUtils.toString(httpResponse.getEntity());
} catch (ClientProtocolException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

然后他得到“400 bad request invalid host name”错误。我试过了：

(1) 确保变量“encoded”在 C# 和 Java 代码中具有相同的值。

(2) 确保在服务器 IIS 中正确设置网站的域名

（3）所有PC/手机均可访问测试索引页面（[http://api.fake.mysite.com](http://api.fake.mysite.com)）

(4) ping api.fake.mysite.com 工作正常

（5）如果删除`httpGet.addHeader("Authorization", encoded);`，Java程序按预期得到401 Unauthorized结果（我控制的服务器代码返回结果）

(6) 其他一些使用C#和PHP的应用程序可以很好地使用web方法，只有android应用程序不能（在两个完全不同的android手机上测试，android模拟器也有400个无效的主机名）

（7）用IP代替域名[http://xx.xx.xx.xx/v1.0/user/current](http://xx.xx.xx.xx/v1.0/user/current)，一切都一样。（xx.xx.xx.xx代表ip地址）

(8)查看IIS日志，对/v1.0/user/current的所有请求都返回200/401/500，没有400的结果。

(9) 确保android应用程序有internet权限（实际上我们已经添加了所有权限）

有谁知道原因或帮助找到原因？非常感谢，这个问题快把我逼疯了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T15:48:51.483

应该`httpGet.addHeader("Authorization", "basic " + encoded);`和`String encoded = Base64.encodeToString(token.getBytes(), Base64.NO_WRAP);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-13T00:27:50.413

我也遇到了同样的问题。我可以在调试模式下从 Fiddler 或任何其他工具向我的 asp.net Web API 发送 HTTP POST，但我无法从我的 android 应用程序访问。

1.  我试图确保从我的计算机浏览器连接到 Web API 接口。

2.  我试图确保从安卓模拟器网络
    浏览器（AEWB）进行连接。然后我将我的 web api 部署到 IIS，这样我就可以从 AEWB 获取某些地址来访问。

我可以从我的 AEWB 访问这个地址

```
http://10.0.0.2:8088/api/tran

http://10.0.0.2 -> this is your local host address seen from Android
8088  -> this is your port of web api hosted on IIS
/api  -> this is web api
/tran -> this is your controller 
```

[![我可以使用 AEWB 从我的 IIS 地址获取 json 值](../Images/94716b0879092f6ebb97c459729e9f67.png)](https://i.stack.imgur.com/THgMC.png)

# jquery - 点击时jQuery将一张图片的src复制到另一张图片

> ID：12418921
> 
> 赞同：4
> 
> 时间：2012-09-14T06:01:21.423
> 
> 标签：jquery, html

我能做些什么来实现这一点。我希望如果我单击该图像，该`imgThumb1`图像的 src 会复制到 上`mainIMG`，但是当我单击它时图像不会改变...我该怎么办？

```
$(document).ready(function(){
    $('.propertyResultImageThumb img[alt="imgThumb1"]').click(function(){
        var trial = $('img[alt="imgThumb1"]').attr('src');
        $("#mainIMG").attr("src", trial);
    });
});

<img alt="mainIMG" src="" id="mainIMG"/>
<img alt="imgThumb1" src="http://..../uploads/2012/09/Villa-Located-In-Almansa.jpg" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T06:09:43.997

```
$(document).ready(function(){
    $('img[alt="imgThumb1"]').click(function(){
        var trial = $('img[alt="imgThumb1"]').attr('src');
        $('img[alt="mainIMG"]').attr("src", trial);
    });
}); 
```

[演示](http://jsfiddle.net/8qnNG/1/)

* * *

我的代码

```
$(function(){
    $('#first').click(function(){
        $("#second").attr("src", $(this).attr('src'));
    });
});

<img src="" id="first"/>
<img src="" id="second" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T06:05:24.620

尝试将您的 html 包装在具有类 propertyResultImageThumb 的容器中

```
<div class="propertyResultImageThumb ">
<img alt="mainIMG" src="" id="mainIMG"/>
<img alt="imgThumb1" src="http://..../uploads/2012/09/Villa-Located-In-Almansa.jpg" />
</div> 
```

然后像这样

```
$(document).ready(function(){
    $('.propertyResultImageThumb img[alt="imgThumb1"]').click(function(){
        var trial = $(this).attr('src');
        $("#mainIMG").attr("src", trial);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T06:12:22.740

你需要有一个类名为“propertyResultImageThumb”的父dom元素检查jsfiddle

[http://jsfiddle.net/erwKP/1/](http://jsfiddle.net/erwKP/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-26T10:48:22.887

如果你想复制一个图像而不需要再次从服务器下载（如果是验证码，它可能会改变），那么应该使用这个代码：

```
$(function(){
    $('#first').click(function(){
        img_copy(document.getElementById('#first'),document.getElementById('#second'));
    });
});

//copy src to destination without destination to download the image
function img_copy(src,destination)
{
     var canvas = document.createElement('canvas');
    var context = canvas.getContext('2d');
    context.drawImage(src, src.width, src.height);
    var dataURL = canvas.toDataURL();
    destination.src = dataURL;
}

<img src="" id="first"/>
<img src="" id="second" /> 
```

# android - Android Widget：在小部件中向 ListView 添加上边距

> ID：12418923
> 
> 赞同：0
> 
> 时间：2012-09-14T06:01:32.197
> 
> 标签：android, listview, android-widget, widget, android-listview

虽然这个问题听起来像是其他人的欺骗，但我试图在小部件中执行此操作的事实大大限制了我在其他地方使用建议的解决方案的能力。

总结：我想在列表中最顶部的项目上方和最底部的项目下方添加间距，以使它们远离标题栏和底部栏边缘。

本质上，我试图解决与[在 Android 中的顶部 ListView 项目上方（以及最后一个下方）添加边距](https://stackoverflow.com/questions/6288167/add-margin-above-top-listview-item-and-below-last-in-android)相同的问题，但是，我不能依赖对我的 ListView 对象的引用来设置标题（）或类似的东西。

这真的不可能在 Android 小部件中做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T06:21:37.357

So ,here i have override function of adapter.From this function you can change or specify margin,height.Here you need to take object of Layout which you are using and from this you can change layout attributes.

```
 @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            if (convertView == null) {
                LayoutInflater mInflater = (LayoutInflater) context
                        .getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
                convertView = mInflater.inflate(R.layout.drawer_list_item, null);
            }
            if (position == 0) {//for first row

                ImageView imgIcon = (ImageView) convertView.findViewById(R.id.icon);
                TextView txtTitle = (TextView) convertView.findViewById(R.id.title);

                RelativeLayout.LayoutParams relate = new RelativeLayout.LayoutParams(200, 200);
                relate.setMargins(150, 0, 0, 0);

                imgIcon.setLayoutParams(relate);
                RelativeLayout.LayoutParams text = new RelativeLayout.LayoutParams(300, 100);
                text.setMargins(150, 180, 0, 0);

                }
    return convertView ; 
```

//HOPE IT HELP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T06:10:48.933

我假设您正在为您的 ListView 使用适配器，因此您正在夸大额外的 listview 布局。在一个`getView`方法中，根据列表项位置（0 和最后一个），放置底部或顶部填充。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-14T18:43:13.730

在 getView() 期间在适配器中检查它是位置 0 还是 .getLength() 并在 convertView 上设置 LayoutParams

# c# - 有什么简单的方法可以检查任何类实例的修改吗？

> ID：12418926
> 
> 赞同：2
> 
> 时间：2012-09-14T06:01:48.037
> 
> 标签：c#, .net, object, compare, instance

假设我有这样的课程：

```
class Test
{
   string asd;
   int dsa;
} 
```

后来，我创建了这个类的实例，然后它可能会改变数据成员的值。
我需要一个简单的比较方法而不比较所有类成员。
像这样的东西：

```
Test t = new Test();
t.asd = "asd";

SOMETHING SMTH = GetSOMETHINGof(t);

a.dsa = 3;

if (GetSOMETHINGof(t) != SMTH)
   //object modified 
```

也许有人知道可以用于此的内置东西？我知道我可以实现 Equal 等，但这不是我想要的。班级太多，会员也很多。
我使用 C# 和 .net 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T06:29:17.477

[Greg Finzer](https://stackoverflow.com/users/52962/greg-finzer) 比较 .NET Objects 1.4.2.0 [http://www.nuget.org/packages/CompareNETObjects](http://www.nuget.org/packages/CompareNETObjects)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T06:38:38.487

添加额外的属性来保持对象的状态：

```
public class A
{
    public bool HasChanged { get; set; }

    object _Value;
    public object Value
    {
        get
        {
            return _Value;
        }
        set
        {
            HasChanged = value != _Value;
            _Value = value;
        }
    }

    public A(object _value)
    {
        _Value = _value;
        HasChanged = false;
    }
} 
```

并使用它：

```
 A a = new A(5);
        Console.WriteLine(a.HasChanged);  //false
        a.Value = 6;
        Console.WriteLine(a.HasChanged);  //true
        a.HasChanged = false;
        Console.WriteLine(a.HasChanged);  //false 
```

# javascript - 使用帮助 asp.net 验证或使用 java 脚本验证多个文本

> ID：12418928
> 
> 赞同：0
> 
> 时间：2012-09-14T06:01:53.873
> 
> 标签：javascript, asp.net

在 asp.net 的 aspx 页面中，有多个文本框。

Like--> **Name** **E-mail Id** **EmployeeCode**

```
 Text Box1                    Text Box2                          Text Box3

   Text Box4                    Text Box5                           Text Box6

   Text Box7                    Text Box8                          Text Box9 
```

现在我需要对文本框1、文本框2、文本框3进行验证，至少有一个文本框被填充，无论是使用asp.net验证还是使用java脚本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T07:39:15.740

用这个。

```
<script type="text/javascript">
var oneFilled = false;
for(var a = 0 ; a < 3 ; a ++)
{
    if($('input').eq(a).val() != "")
    oneFilled = true
}
return oneFilled;
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T07:29:31.133

假设你的文本框的 ID 是 txt1、txt2 和 txt3，那么你可以这样做

```
 function validate()
  {
      var txt1Value = document.getElementById("<%=txt1.ClientID%>").value;
      var txt2Value = document.getElementById("<%=txt2.ClientID%>").value;
      var txt3Value = document.getElementById("<%=txt3.ClientID%>").value;
      if(txt1Value != "" || txt2Value != "" || txt3Value != "")
      {
            return true;
      }
      return false;
  } 
```

你也可以使用trim()，下面会提到

```
function trim(s)
{
    return rtrim(ltrim(s));
}

function ltrim(s)
{
    var l=0;
    while(l < s.length && s[l] == ' ')
    {   l++; }
    return s.substring(l, s.length);
}

function rtrim(s)
{
    var r=s.length -1;
    while(r > 0 && s[r] == ' ')
    {   r-=1;   }
    return s.substring(0, r+1);
} 
```

# c# - DotNetNuke 如何散列其密码？

> ID：12418932
> 
> 赞同：3
> 
> 时间：2012-09-14T06:02:04.043
> 
> 标签：c#, dotnetnuke

我正在编写一个登录系统，它将登录 DotNetNuke 应用程序的数据库。我可以访问数据库并且可以读取 aspnet_Membership 表中的 PasswordSalt。因此，我将有输入：

1.  用户密码（通过表单提交）
2.  用户的盐（我可以查）

我必须生成哈希密码作为输出。PasswordFormat=2，即“加密”。但是，我无法找到正在使用的加密算法的详细信息，因此我可以在自己的应用程序中重写它。到目前为止，我的研究导致了这个页面：

[http://msdn.microsoft.com/en-us/library/aa478949.aspx](http://msdn.microsoft.com/en-us/library/aa478949.aspx)

还有[这个 SO post](https://stackoverflow.com/a/8132734/438615)，其中一个评论中有以下公式：

```
Convert.ToBase64String((new Rfc2898DeriveBytes(YourPWD, YourSALT)).GetBytes(20)) 
```

但是，这个公式似乎不适用于我的测试数据，它具有以下输入和输出：

1.  密码：888888
2.  盐：ahEvjCX3FM04S5cSi1qdHA==
3.  哈希密码：y3rxLUDYdj1/+IGC94/tvW6M3pQTCi/9bq1cNOUgYlM=

你可以在这里看到我的测试：http: [//ideone.com/EClO2](http://ideone.com/EClO2)

```
using System;
using System.Security.Cryptography;

public class Test
{
        public static void Main()
        {
                Console.WriteLine(Convert.ToBase64String((new Rfc2898DeriveBytes("888888", System.Convert.FromBase64String("ahEvjCX3FM04S5cSi1qdHA=="))).GetBytes(20)));
        }
} 
```

谢谢你的帮助！

# 更新

在这里回答：[ASP.NET MembershipProvider——它究竟是如何进行加密的？](https://stackoverflow.com/questions/12433726/asp-net-membershipprovider-how-exactly-does-it-do-encryption)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T16:00:19.893

查看源代码，他们有一个名为的类`AspNetMembershipProvider`，其中有一个名为`UserLogin`. `UserLogin`调用一个名为的私有方法`ValidateUser`，该方法又使用 ASP.NET Membership 提供程序，因此它实际上在内部调用此方法[Membership.ValidateUser](http://msdn.microsoft.com/en-us/library/system.web.security.membership.validateuser.aspx)。

因此，如果您使用用户名和密码调用相同的方法，成员资格提供程序将处理密码散列并返回一个布尔值，指示密码是否匹配。

# xpath - 如何处理xpath中文本节点中的括号？

> ID：12418937
> 
> 赞同：2
> 
> 时间：2012-09-14T06:02:29.777
> 
> 标签：xpath, textnode

假设我们有以下 HTML 代码

```
<label for="467578">AgendaShowCapacity (1 remaining)</label> 
```

我在 Chrome 中尝试使用以下 xpath 表达式，但找不到该元素：

```
//label[text()='AgendaShowCapacity (1 remaining)'] 
```

我想知道括号是否应该为此负责。如果是，在这种情况下我应该如何处理？任何意见将不胜感激，谢谢！

编辑下面发布的 2012-9-18 真实代码块

```
<div id="pageContent">
    <fieldset>
        <legend>Agenda</legend>
        <ol class='fieldList custom' data-section='0'>
            <li class="checkboxLeft" data-id="467578" data-z="1">           
                <div class="fieldHolder1">
                    <input id="467578" type="checkbox" name="467578" />
                </div>
                <div class="fieldHolder2">
                    <label for="467578">AgendaShowCapacity&nbsp;(1 remaining)</label>
                </div>
            </li>
            <li class="checkboxLeft" data-id="467579" data-z="2">           
                <div class="fieldHolder1">
                    <input id="467579" type="checkbox" name="467579" />
                </div>
                <div class="fieldHolder2">
                    <label for="467579">AgendaHideReached</label>
                </div>
            </li>
            <li class="checkboxLeft" data-id="467580" data-z="3">           
                <div class="fieldHolder1">
                    <input id="467580" type="checkbox" name="467580" />
                </div>
                <div class="fieldHolder2">
                    <label for="467580">AgendaShowMessage</label>
                </div>
            </li>
            <li class="checkboxLeft" data-id="467584" data-z="4">           
                <div class="fieldHolder1">
                    <input id="467584" type="checkbox" name="467584" />
                </div>
                <div class="fieldHolder2">
                    <label for="467584">AgendaWaitlist</label>
                </div>
            </li>
        </ol>
    </fieldset>
    <div class="buttonGroup">
        <button type="button" name="ctl00$cph$ctlNavigation$btnAddAnother" class="button" onclick="SubmitForm(this);return false;">Add Another Person</button>
        <span class="textBetweenButtons">or</span>
        <button type="submit" name="ctl00$cph$ctlNavigation$btnContinue" class="button" onclick="SubmitForm(this);return false;">Continue</button>
    </div>
</div> 
```

这是我要定位到该 //label 元素的 html 页面的基本部分。

第二次编辑 2012/9/19 使用 selenium-webdriver 定位该元素的示例 C# 代码。

```
IWebDriver driver = new FirefoxDriver();
IWebElement = driver.FindElement(By.XPath("//div[@id='pageContent']//legend/following-sibling::ol/li/div/label[text()='AgendaShowCapacity (1 remaining)']"));
// Do something to that element 
```

# c++ - int to short 分配失败

> ID：12418939
> 
> 赞同：0
> 
> 时间：2012-09-14T06:02:56.930
> 
> 标签：c++, visual-studio

**在尝试将short**提升为**int**时，我遇到了一些奇怪的行为，其中提升后的高 2 个字节为 0xFFFF。AFAIK 高字节应始终保持为 0。请参见以下代码：

```
 unsigned int test1 = proxy0->m_collisionFilterGroup;
    unsigned int test2 = proxy0->m_collisionFilterMask;
    unsigned int test3 = proxy1->m_collisionFilterGroup;
    unsigned int test4 = proxy1->m_collisionFilterMask;

    if( test1 & 0xFFFF0000 || test2 & 0xFFFF0000 || test3 & 0xFFFF0000 || test4 & 0xFFFF0000 )
    {
        std::cout << "test";
    } 
```

一旦**cout**被命中，所涉及的变量的值是：

![奇怪的促销](../Images/3c8e06e85488352d24098933a626ec35.png)

请注意两个突出显示的值。我还查看了对我来说也很好的反汇编：

![拆卸](../Images/461fc201a69b9d0d1941a8118685401a.png)

我的软件针对使用 VS 2008 SP1 编译的 x64。我还链接了 Bullet Physics 2.80 的开箱即用版本。代理对象是子弹对象。

代理类定义如下（去掉了一些函数）：

```
 ///The btBroadphaseProxy is the main class that can be used with the Bullet broadphases. 
///It stores collision shape type information, collision filter information and a client object, typically a btCollisionObject or btRigidBody.
ATTRIBUTE_ALIGNED16(struct) btBroadphaseProxy
{

BT_DECLARE_ALIGNED_ALLOCATOR();

    ///optional filtering to cull potential collisions
    enum CollisionFilterGroups
    {
            DefaultFilter = 1,
            StaticFilter = 2,
            KinematicFilter = 4,
            DebrisFilter = 8,
            SensorTrigger = 16,
            CharacterFilter = 32,
            AllFilter = -1 //all bits sets: DefaultFilter | StaticFilter | KinematicFilter | DebrisFilter | SensorTrigger
    };

    //Usually the client btCollisionObject or Rigidbody class
    void*   m_clientObject;
    short int m_collisionFilterGroup;
    short int m_collisionFilterMask;
    void*   m_multiSapParentProxy;      
    int         m_uniqueId;//m_uniqueId is introduced for paircache. could get rid of this, by calculating the address offset etc.

    btVector3   m_aabbMin;
    btVector3   m_aabbMax;

    SIMD_FORCE_INLINE int getUid() const
    {
        return m_uniqueId;
    }

    //used for memory pools
    btBroadphaseProxy() :m_clientObject(0),m_multiSapParentProxy(0)
    {
    }

    btBroadphaseProxy(const btVector3& aabbMin,const btVector3& aabbMax,void* userPtr,short int collisionFilterGroup, short int collisionFilterMask,void* multiSapParentProxy=0)
        :m_clientObject(userPtr),
        m_collisionFilterGroup(collisionFilterGroup),
        m_collisionFilterMask(collisionFilterMask),
        m_aabbMin(aabbMin),
        m_aabbMax(aabbMax)
    {
        m_multiSapParentProxy = multiSapParentProxy;
    }
}
; 
```

我以前从未遇到过这个问题，只是在升级到 64 位并集成子弹后才开始得到它。我遇到问题的唯一地方是涉及子弹的地方，所以我怀疑这个问题与此有关，但我仍然对什么可能使原始类型之间的分配不符合预期感到非常困惑。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T09:38:02.823

您正在请求从已签名到未签名的转换。这是非常直截了当的：

*   您的源值为`-1`. 由于类型是`short int`，在您的平台上有位`0xFFFF`。

*   目标类型是`unsigned int`。`-1`不能表示为无符号整数，但转换规则由标准定义：选择与`-1`模 2 ^(*N*)一致的正值，其中*N*是无符号类型的值位数。

    在您的平台上，`unsigned int`有 32 个值位，因此`-1`模 2 ^(32)的模代表是`0xFFFFFFFF`.

如果您自己的想象规则在哪里应用，您会想要结果`0x0000FFFF`，即 65535，并且与 -1 没有任何明显或有用的关系。

如果您*确实*想要这种转换，则必须手动对短类型执行模块化环绕：

```
short int mo = -1;
unsigned int weird = static_cast<unsigned short int>(mo); 
```

**简而言之：** C++ 是关于*值*的，而不是关于*表示*的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T07:38:53.283

> AFAIK 高字节应始终保持为 0

当使用*从 short 到 int* **算术移位**（也称为有**符号移位**）时，要回答您的问题，知道它是通过对添加的字节数进行最大字节值的扩展来执行的就足够了；

*例子：*

```
short b;
int a = b; /* here promotion is performed, mechanism of it can be described by following bitwise operation: */
a = b >> (sizeof(a) - sizeof(b)); // arithmetic shift performed 
```

重要的是要注意，在计算机内存中，有符号和无符号值的表示可以相同，编译器生成的命令的唯一区别是：

例子：

```
unsigned short i = -1 // 0xffff
short j = 65535 // 0xffff 
```

所以实际上有*符号/无符号对于提升的结果并不重要，*在这两种情况下都会执行算术移位

# c - 在客户端套接字程序中使用 select()

> ID：12418941
> 
> 赞同：0
> 
> 时间：2012-09-14T06:03:05.120
> 
> 标签：c, sockets

我试图用 C 编写一个服务器-客户端套接字程序。我有一个关于如何使用计时器实现它的问题。我要做的是在服务器和客户端之间建立连接并进行读写操作。我开始了解在服务器端使用带有“timeval”结构的 select()。但是我应该在客户端做什么，我可以在一个套接字上读取一段固定的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T07:43:36.567

你可以在客户端做同样的事情，在`select()`系统调用的`timeval`结构中设置你想要的超时时间。但在客户端中，使用阻塞模式和使用`setsockopt()`选项`SO_TIMEOUT/SO_RCVTIMEO`（无论在您的平台上调用什么）来控制超时更容易。检查相关的*手册*页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:23:10.000

是的，如果您想要一个带有“setsockopt”的套接字的简短示例：

```
int mySocket;
struct timeval tv = {0, 0}; // Init to 0 (Or set directly with your values)

mySocket = socket(AF_INET, SOCK_STREAM, 0);
// Set the timeout (If you don't have set directly values)
tv.tv_sec = 10;
tv.tv_usec = 0;
// Set The Timeout On Socket RECV
setsockopt(mySocket, SOL_SOCKET, SO_RCVTIMEO, (char *)&tv, sizeof(struct timeval));
// Set The Timeout On Socket SEND
setsockopt(mySocket, SOL_SOCKET, SO_SNDTIMEO, (char *)&tv, sizeof(struct timeval)); 
```

# java - Glassfish 和 Verisign 试用测试证书

> ID：12418942
> 
> 赞同：1
> 
> 时间：2012-09-14T06:03:10.317
> 
> 标签：java, ssl, glassfish, certificate, keytool

我有 glassfish 3.1.2 并且需要配置 SSL，所以我参考了[This site](https://blogs.oracle.com/swchan/entry/how_to_use_verisign_cert)。一切似乎都很好，直到我到达最后一个命令

```
-import -v -alias myservkey -file myservkeyveri.cer -keystore keystore.jks 
```

我明白了

> /home/user/jdk1.6.0_35/bin/keytool -import -v -alias myservkey -file intex.cer -keystore > keystore.jks Enter keystore password:
> Enter key password for keytool error: java.lang.Exception: Public keys回复和密钥库不匹配 java.lang.Exception：回复中的公钥和密钥库在 sun.security.tools.KeyTool 的 sun.security.tools.KeyTool.establishCertChain(KeyTool.java:2618) 不匹配。 installReply(KeyTool.java:1870) 在 sun.security.tools.KeyTool.doCommands(KeyTool.java:807) 在 sun.security.tools.KeyTool.run(KeyTool.java:172) 在 sun.security.tools.KeyTool .main(KeyTool.java:166)

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:14:25.413

当您从 genkey 导入这些根证书时，您需要使用不同的别名。

当您使用 keytool -genkey 命令时，它会生成一个密钥库和一个密钥。您是否确定要导入的证书是 PEM 格式（PEM 证书可以在任何文本编辑器中打开）

# c# - 使用自定义类列表

> ID：12418949
> 
> 赞同：2
> 
> 时间：2012-09-14T06:03:28.927
> 
> 标签：c#, list, class, c#-4.0

我最近在我的程序中遇到了一个障碍，使用用户定义类的列表会破坏数据。例子：

```
class myClass {
    public int x;
}

myList<myClass> = new List<myClass>();
myClass myObject = new myClass();

myList.Add(myObject);
myList.Remove(myObject); 
```

当我尝试向列表中添加某些内容时，我的数据已损坏。我相信删除对象也会导致问题，尽管这可能是因为它们首先被损坏了。我在[这里](https://stackoverflow.com/questions/2959581/list-contains-is-not-working-as-hoped)和[那里](https://stackoverflow.com/questions/2629124/contains-on-a-list-of-custom-class-objects)看到过类似的问题，并希望有人可以向我解释发生了什么。虽然这些链接确实为我提供了一些答案，但它们并没有很好地解释幕后发生的事情。

编辑：我之前应该更清楚我的数据是如何被破坏的。我的对象字段中的值在添加到列表时正在更改。就我的程序而言，这些值都应该是 0 或 1，但是当添加到列表中时会变为 -1 到 3。

编辑 2：问题的根源是不熟悉 C#。来自 C++ 背景，我假设对象是按值传递的，而不是按引用传递的。将我的自定义类从类更改为结构立即解决了这个问题。感谢@MattW！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T13:33:50.483

这里没有太多可做的事情 - 所以以下是对问题的猜测......

`myObject`将其添加到 后，您是否更改了值`List<>`？请记住，由于您将 a 添加`Class`到列表中（并且所有类都是引用类型），如果您`myObject`在将其添加到列表后更改值，它将在任何地方（包括您的内部`List<>`）更改。

例如：

```
List<myClass> myList = new List<myClass>();
myClass myObject = new myClass();
myObject.x = 5;

myList.Add(myObject);
Console.WriteLine(myList[0].x); //this will be 5

myObject.x = 7;
Console.WriteLine(myList[0].x); //this will be 7 
```

即使你没有触及它`List<>`本身，你也改变了被引用对象的值，所以它在被引用的任何地方都被改变了。

查看[值与参考类型](http://www.albahari.com/valuevsreftypes.aspx)

# javascript - jQuery 中是否内置了任何字符串格式化函数？

> ID：12418953
> 
> 赞同：0
> 
> 时间：2012-09-14T06:03:40.687
> 
> 标签：javascript, jquery

我有以下代码：

```
$("#stats-list")
    .append("<li>Elapsed: " + ajaxElapsed + "</li>\n" +
            "<li>Display: " + tableElapsed + "</li>\n" +
            "<li>Total:   " + (ajaxElapsed + tableElapsed) + "</li>"); 
```

这最初是我连接成一个的三个附加。我可以用 jQuery 做些什么来进一步清理这段代码。我想知道的是，如果 jQuery 有任何我可以使用的带有标记的字符串格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T06:20:09.263

```
function format(formatString) {
    var args = Array.prototype.slice.call(arguments,1);
    return formatString.replace(/\{(\d+)\}/g, function(match, num) {
      return args[Number(num)];
    });
}

format("<li>Elapsed: {0}</li>\n<li>Display: {1}</li>\n<li>Total:   {2}</li>",
    ajaxElapsed, tableElapsed, ajaxElapsed + tableElapsed); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T06:17:26.433

如果你有很多项目，你可以做这样的事情来避免丢失`+`和写`li`很多次。您可以在数组中添加任意数量的项目，它们将与`li`s 适当地连接。

```
var list = '<li>' + [
  'Elapsed: ' + ajaxElapsed,
  'Display: ' + tableElapsed,
  'Total: ' + ajaxElapsed + tableElapsed
].join('</li><li>') + '</li>';

$("#stats-list").append(list); 
```

作为说明，我不会使用`\n`. `li`默认情况下是一个块元素，所以你最好用css来设计它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T06:05:07.467

afaik 没有内置的，但有一个强大的模板子系统，请参阅[jQuery 模板](http://api.jquery.com/category/plugins/templates/)

只是为了完整性，我认为这可以做得更优雅：

```
var list = $('#stats-list');
$('<li />').text('Elapsed: ' + ajaxElapsed).appendTo(list);
$('<li />').text('Display: ' + tableElapsed).appendTo(list);
$('<li />').text('Total: ' + (ajaxElapsed + tableElapsed)).appendTo(list); 
```

# jquery - Jqgrid 最大行数

> ID：12418955
> 
> 赞同：0
> 
> 时间：2012-09-14T06:03:54.557
> 
> 标签：jquery, asp.net-mvc-3, jqgrid, jqgrid-asp.net

在我的`ASP.NET MVC3(Razor)`应用程序中`jqgrid`用于显示数据。它包含每页的行数，例如

`rowList: [10, 20, 40, 80, 100],`

在更改行数时，它在 localhost 中工作正常。但是在上传到时`IIS`，如果我们选择`100 records it wont change`. 以前的记录只有那里。Jqgrid是否有最大行数策略？如果没有人知道，请分享

# java - 无法将 JOptionPane 设置为不可见，然后再次变为可见

> ID：12418961
> 
> 赞同：1
> 
> 时间：2012-09-14T06:04:17.820
> 
> 标签：java, swing, concurrency, joptionpane, event-dispatch-thread

我想要实现的是

*   在某种状态下，一个类应该自动隐藏其他类显示的对话框
*   当程序状态发生变化时，应显示隐藏的对话框

问题：

*   这不适用于 JOptionPanes
*   JOptionPanes 被隐藏并再次显示，但随后它们会自动关闭，所以我只在几秒钟内再次看到它们

我使用了以下方法：

```
public static void main(String[] args) {

    Toolkit.getDefaultToolkit().addAWTEventListener(new AWTEventListener() {

        public void eventDispatched(AWTEvent event) {
            WindowEvent windowEvent = ((WindowEvent) event);
            System.out.println(System.currentTimeMillis() + " " + windowEvent);
            switch (windowEvent.getID()) {
            case WindowEvent.WINDOW_OPENED:
                System.out.println("Hiding");
                windowEvent.getComponent().setVisible(false);
                try {
                    Thread.sleep(5000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                System.out.println("Showing");
                windowEvent.getComponent().setVisible(true);
                break;
            }
        }

    }, AWTEvent.WINDOW_EVENT_MASK + AWTEvent.WINDOW_STATE_EVENT_MASK);

    JOptionPane.showMessageDialog(null,
            "Eggs are not supposed to be green.",
            "Inane custom dialog",
            JOptionPane.INFORMATION_MESSAGE);
} 
```

它产生以下输出：

```
1347602481337 java.awt.event.WindowEvent[WINDOW_ACTIVATED,opposite=null,oldState=0,newState=0] 
on dialog0
1347602481337 java.awt.event.WindowEvent[WINDOW_GAINED_FOCUS,opposite=null,oldState=0,newState=0] on dialog0
1347602481337 java.awt.event.WindowEvent[WINDOW_OPENED,opposite=null,oldState=0,newState=0] on dialog0
Hiding
Showing
1347602486377 java.awt.event.WindowEvent[WINDOW_LOST_FOCUS,opposite=null,oldState=0,newState=0] on dialog0
1347602486377 java.awt.event.WindowEvent[WINDOW_DEACTIVATED,opposite=null,oldState=0,newState=0] on dialog0
1347602486377 java.awt.event.WindowEvent[WINDOW_ACTIVATED,opposite=null,oldState=0,newState=0] on dialog0
1347602486377 java.awt.event.WindowEvent[WINDOW_GAINED_FOCUS,opposite=null,oldState=0,newState=0] on dialog0
1347602486377 java.awt.event.WindowEvent[WINDOW_LOST_FOCUS,opposite=null,oldState=0,newState=0] on dialog0
1347602486377 java.awt.event.WindowEvent[WINDOW_DEACTIVATED,opposite=null,oldState=0,newState=0] on dialog0
1347602486377 java.awt.event.WindowEvent[WINDOW_CLOSED,opposite=null,oldState=0,newState=0] on dialog0
1347602486377 java.awt.event.WindowEvent[WINDOW_CLOSED,opposite=null,oldState=0,newState=0] on dialog0
1347602486377 java.awt.event.WindowEvent[WINDOW_CLOSED,opposite=null,oldState=0,newState=0] on frame0 
```

我的问题是，我做错了什么？这是每个设计还是我犯了错误，我是否以错误的方式使用这些类？如果是，正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T06:12:32.690

你做错的是在事件调度线程上睡觉：

```
windowEvent.getComponent().setVisible(false);
try {
  Thread.sleep(5000);
} catch (InterruptedException e) {
  e.printStackTrace();
}
System.out.println("Showing");
windowEvent.getComponent().setVisible(true); 
```

通过阻塞 EDT 5 秒，没有任何东西可以重新绘制。改用 a `Timer`。

有关更多信息，请参阅[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)教程。

# c# - 在转发器中找到 HtmlInputCheckbox 控件？

> ID：12418962
> 
> 赞同：1
> 
> 时间：2012-09-14T06:04:32.453
> 
> 标签：c#, asp.net

```
protected void Button1_Click1(object sender, EventArgs e)
{
    foreach (RepeaterItem contact in rptList.Items)
    {
        HtmlInputCheckBox cBox = contact.FindControl("chkteklif") as HtmlInputCheckBox;
        if (contact is HtmlInputCheckBox)
        {
            string a = cBox.Value;
        }
    }

} 
```

我使用了这段代码，但这段代码找不到 HtmlInputCheckBox .. 知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T06:17:40.313

您应该向我们展示`Repeater`. 但我假设您忘记添加`runat="server"`.

除此之外，您的代码中有错字。而不是`contact is HtmlInputCheckBox`您可能想要使用`cBox is HtmlInputCheckBox`since`contact`是`RepeaterItem`. 但这也是多余的，因为您已经将其转换为该类型。所以你应该检查一下`null`。

```
foreach (RepeaterItem contact in rptList.Items)
{
    HtmlInputCheckBox cBox = contact.FindControl("chkteklif") as HtmlInputCheckBox;
    if (cBox != null)
    {
        string a = cBox.Value;
    }
} 
```

你`html-checkbox`应该是什么样子：

```
<input id="chkteklif" type="checkbox" runat="server" value="check me" /> 
```

或（根据您的评论），试试这个：

```
<input id="chkteklif" type="checkbox" onclick='<%# "rptlist_onchange(this," + Eval("userid") + " );" %>' value="ilan" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T06:28:38.227

尝试

```
HtmlInputCheckBox cbox = (HtmlInputCheckBox)sender; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T06:13:42.193

确保您没有覆盖 Page_Load 上的控件。您将需要检查它是否是回邮。

# java - 快速增长非常大的二进制文件的最佳实践是什么？

> ID：12418965
> 
> 赞同：2
> 
> 时间：2012-09-14T06:04:37.357
> 
> 标签：java, clojure

我的 Java 应用程序使用内存映射文件（MappedByteBuffer、FileChannel 和 RandomAccessFile）处理大型二进制数据文件。它经常需要增加二进制文件——我目前的方法是用更大的区域重新映射文​​件。

它有效，但是有两个问题

1.  随着文件变大，增长需要越来越多的时间。
2.  如果增长非常迅速（EG 在 while(true) 循环中），JVM 将在重新映射操作完成大约 30,000 次后永远挂起。

有哪些替代方法，最好的方法是什么？

我也无法弄清楚为什么会出现第二个问题。还请就该问题提出您的意见。

谢谢！

用于增长文件的当前代码（如果有帮助）：

```
(set! data (.map ^FileChannel data-fc FileChannel$MapMode/READ_WRITE
                         0 (+ (.limit ^MappedByteBuffer data) (+ DOC-HDR room)))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T06:44:41.393

您可能希望以更大的块增长您的文件。每次重新映射时使用加倍，例如[动态数组](http://en.wikipedia.org/wiki/Dynamic_array)，以便增长的成本是摊销常数。

我不知道为什么重映射在 30,000 次后挂起，这似乎很奇怪。但是，如果您使用我建议的方案，您应该能够摆脱*少于*30,000 次的重映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T10:16:18.827

除非你能承受文件的指数增长，比如加倍，或者任何其他常数乘数，你需要考虑你是否真的需要 a `MappedByteBuffer`，考虑到它们的限制（无法增长文件，没有 GC 等）。我个人要么审查问题，要么使用`RandomAccessFile`“rw”模式，可能在其顶部有一个虚拟阵列层。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T07:14:26.413

即使您显式调用清理程序，JVM 也不会清理内存映射。感谢@EJP 的更正。

如果你创造了 32,000 个这样的东西，它们可能会同时存在。顺便说一句：我怀疑你可能会达到 15 位的限制。

唯一的解决方案是；不要创建这么多映射。您可以使用小于 4K 的映射映射整个磁盘 4 TB 磁盘。

如果您知道使用量会增长，我不会创建小于 16 到 128 MB 的映射，并且我会考虑每个映射最多 1 GB。您可以以很少的成本执行此操作的原因是在您实际使用页面之前不会分配主内存和磁盘空间。即主内存使用量一次增长 4 KB。

我不会创建 2 GB 映射的唯一原因是由于 Integer.MAX_VALUE 大小限制，Java 不支持这一点:( 如果您有 2 GB 或更多，则必须创建多个映射。

# php - 如何改进我的表格？

> ID：12418968
> 
> 赞同：-6
> 
> 时间：2012-09-14T06:04:43.830
> 
> 标签：php, forms

目前，我们收到了大量垃圾邮件。我刚刚添加了以下行：

`if ($field_budget == "" || $field_timeline == "" || $field_email == "" || $field_name == "") { echo "Please fill out all required form details, thank you!"; } else {`

这帮助了几个星期，但现在垃圾邮件发送者又回来了。什么是改进我的表单的简单、优雅的方法（下面的完整代码）？

```
<?php
$field_name = $_POST['cf_name'];
$field_email = $_POST['cf_email'];
$field_website = $_POST['cf_website'];
$field_company = $_POST['cf_company'];
$field_budget = $_POST['cf_budget'];
$field_custombudget = $_POST['cf_custombudget'];
$field_timeline = $_POST['cf_timeline'];
$field_message = $_POST['cf_message'];

$mail_to = 'sean@seanduran.com';
$subject = 'Message from a site visitor, '.$field_name;

$body_message = 'Name: '.$field_name."\n";
$body_message .= 'e-mail: '.$field_email."\n";
$body_message .= 'Website: '.$field_website."\n";
$body_message .= 'Company: '.$field_company."\n";
$body_message .= 'Budget: '.$field_budget."\n";
$body_message .= 'Custom Budget: '.$field_custombudget."\n";
$body_message .= 'Timeline: '.$field_timeline."\n";
$body_message .= 'Message: '.$field_message;

$headers = 'From: '.$field_email."\r\n";
$headers .= 'Reply-To: '.$field_email."\r\n";

if ($field_budget == "" || $field_timeline == "" || $field_email == "" || $field_name == "") {
    echo "Please fill out all required form details, thank you!";
} else {
    $mail_status = mail($mail_to, $subject, $body_message, $headers);

    if ($mail_status) { ?>
        <script language="javascript" type="text/javascript">
            alert('Thank you for the message. We will contact you shortly.');
            window.location = 'http://seanduran.com';
        </script>
    <?php
    }
    else { ?>
        <script language="javascript" type="text/javascript">
            alert('Message failed. Please, send an email to sean@seanduran.com');
            window.location = 'http://seanduran.com';
        </script>
    <?php
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T06:07:30.693

你可以使用一个技巧也许——

插入一个文本字段，通过 CSS（id）隐藏它并检查它必须是空的！

所有的垃圾邮件机器人都用一些东西填充字段，所以只需给它一个名称“地址”之类的东西......

如果机器人填写它，你可以给出一个错误......

其他提示只是使用[ReCaptcha](http://www.google.com/recaptcha)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T06:09:03.647

我会介绍一个验证码。垃圾邮件发送者也很擅长解决这些问题，但这是一个很好的附加措施。看看例如 reCAPTCHA，添加起来应该不会太难（请参阅[此处的说明](https://developers.google.com/recaptcha/docs/php)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T06:09:35.697

对于一般更改

*   验证所有发布数据。检查标头注入
*   验证码

查看这篇文章作为一个好的开始：[http ://www.digital-web.com/articles/bulletproof_contact_form_with_php/](http://www.digital-web.com/articles/bulletproof_contact_form_with_php/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T06:10:06.217

将您的姓名和电子邮件字段更改为：

```
Name: <input type="text" name="cf_123" />
Email: <input type="text" name="cf_456" /> 
```

引用如下：

```
$field_name  = $_POST['cf_123'];
$field_email = $_POST['cf_456']; 
```

然后添加这些字段：

```
<input type="text" name="name" class="foo" />
<input type="text" name="email" class="foo" /> 
```

..用这个CSS：

```
.foo {
    display : none;
} 
```

然后你可以简单地将这个条件添加到你的 PHP 中：

```
if (!empty($_POST['name']) || !empty($_POST['email'])) {
    return false; // only a bot would see those fields and fill them out. 
} 
```

# google-chrome-extension - 如果最初没有指定清单版本，是否需要将 Chrome 扩展更新到清单版本 2？

> ID：12418979
> 
> 赞同：1
> 
> 时间：2012-09-14T06:05:38.723
> 
> 标签：google-chrome-extension, manifest

我的扩展目前没有指定任何清单版本。是否需要更新到清单版本 2？

根据这些页面，这有点不清楚（为了清楚起见，可能需要更新）：

[http://developer.chrome.com/extensions/manifestVersion.html](http://developer.chrome.com/extensions/manifestVersion.html)提到了从版本 1 到 2 的政策更改：

[http://developer.chrome.com/extensions/contentSecurityPolicy.html](http://developer.chrome.com/extensions/contentSecurityPolicy.html)

特别是这段文字摘录：

“没有定义 manifest_version 的包没有默认的内容安全策略。选择 manifest_version 2 的包有一个默认的内容安全策略：script-src 'self'; object-src 'self' 这个策略通过限制扩展和增加安全性两种方式的应用……”

我确实收到了来自 Google 的一封电子邮件，内容是需要从清单版本 1 更新到 2，尽管假设这可能是一封给所有已发布到其商店的扩展程序开发人员的普通电子邮件。

我可以更新我的扩展，不幸的是，我使用内联 javascript，修改代码以进行新的设计更改会有点麻烦。由于我没有指定清单版本开始，如果我不需要，我宁愿不更新。

附带说明一下，如果 Google 有办法在您更改清单版本时确定应用程序是否破坏了兼容性，那就太好了。我的应用程序没有代码更新，添加清单版本 2 并在 Chrome 中加载可以正常安装，但由于内容安全策略而无法加载/弹出，这是我从阅读文档中得出的结论。如果它因为不符合政策而无法安装会更好，这样更容易调试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:40:53.267

你应该改变它。Mo manifest_version 等于版本 1。

引用：“尚未准备好跳转到 Chrome 18 中的新清单版本的扩展程序、应用程序和主题可以明确指定版本 1，**或者完全关闭密钥**。”

来自：http: [//developer.chrome.com/extensions/manifest.html#manifest_version](http://developer.chrome.com/extensions/manifest.html#manifest_version)

# ios - 重置模拟器时删除 Sqlite 文件

> ID：12418990
> 
> 赞同：0
> 
> 时间：2012-09-14T06:06:44.183
> 
> 标签：ios, sqlite, ios5, ios-simulator, nsfilemanager

我在我的 IOS 项目中使用 sqlite。我在启动应用程序时将 sqlite 文件从我的主包复制到文档目录。它确实复制了，但是假设如果我重置模拟器，文档目录中的 sqlite 文件也会被删除，因此所做的所有更改都会随之消失。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:09:05.900

首先，您可以[在此处](https://stackoverflow.com/q/12371321/1633251)阅读有关保存持久数据的位置以及如何防止 iCloud 备份的信息。在您使用模拟器的情况下，您需要将代码添加到包含在“ifdef SIMULATOR”中的程序中（我没有关于要测试的定义的参考资料，但我知道有一个参考资料），并保存一份副本将文件复制到通向您的用户帐户的完全限定路径（即 /Users/xyz/iOS/xzy.data）。当您的应用程序启动时，您首先在设备上的适当位置查找文件。然后，如果找不到文件，仅适用于模拟器，您会查看该硬编码路径中是否有文件，如果有，请将其复制回模拟器。

# vba - excel宏：一个xml文件两个根节点

> ID：12418992
> 
> 赞同：1
> 
> 时间：2012-09-14T06:07:08.720
> 
> 标签：vba

现在，我正在编写一个脚本来通过 vba 宏生成 xml 文件。我已经通过以下方法创建了一个根节点

```
Dim xmlDoc As DOMDocument
Dim xmlNode(100) As IXMLDOMElement

Dim rootNodeName_1 As String
rootNodeName_1 = "table" 

Set xmlDoc = New DOMDocument
Set rootNode_1 = xmlDoc.createElement(rootNodeName_1)
Set xmlDoc.DocumentElement = rootNode_1
Set Root_1 = xmlDoc.DocumentElement
Set xmlNode(1) = Root_1 
```

我的问题是我可以在同一个 xmlDoc 下创建另一个根节点吗？

我尝试通过相同的方法附加另一个 root_2，但它会覆盖之前的 root_1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T06:29:37.017

XML 文档中只能有一个根元素。

# iphone - 在 iOS 上加载压缩图像的最快方法是什么？

> ID：12418993
> 
> 赞同：9
> 
> 时间：2012-09-14T06:07:14.243
> 
> 标签：iphone, ios, image-processing, opengl-es, jpeg

我正在编写一个 iOS 应用程序，它需要将大量全屏大小的图像加载到 OpenGL 中。图像存储空间是一个问题，所以我使用的是 png 或 jpg。问题是：加载图像数据花费的时间太长（在 iPad2 上为 100 毫秒）。

我想知道是否有人知道在 iPad 或类似设备上加载高质量压缩图像数据的最快方法？这可能包括切换到不同的图像压缩格式（？）

这是我发现的：

*   通过 libturbo-jpeg 的 iOS 实现加载 jpg 比我为 png 找到的任何方式都快。

*   如果将 jpg 图像一分为二，则可以通过 GCD 并行解压缩，这几乎可以将加载时间缩短一半。还是不够！

*   PowerVR 压缩的 PVRTC 格式可以非常快速地加载，但是压缩比和图像质量都超出了我的需要......

*   不知道 jpeg-2000 的性能如何，但它似乎针对压缩比而不是解码速度进行了优化。

有任何想法吗？？这一定是游戏或类似游戏的常见问题..

是否有任何更新的图像格式（jpg 是 1986 年！！）具有可移植实现，可能比 jpg 压缩率略低，但解码速度更快？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-18T16:22:10.050

这个库可能会帮助你：

[https://github.com/path/FastImageCache](https://github.com/path/FastImageCache)

# android - 警报对话框 selectedItem 为空

> ID：12418995
> 
> 赞同：0
> 
> 时间：2012-09-14T06:07:22.573
> 
> 标签：android, android-arrayadapter, android-dialog, onitemclicklistener

![在此处输入图像描述](../Images/a8c7ed9539cfa7c2992d176709744f9c.png)

我有 ListwithImage 列表的代码。但是当我尝试使用 Dialog 显示 onclickItem 时，但 Dialog 显示为空。我实现 onclickItemListener 。我试过这个没有图像的代码，对话框显示选定的列表。但是当我尝试使用图像时，它不起作用。

我的代码：

```
public class MainActivity extends Activity {
     EditText edittext;
     ListView listview;

     String[] text = { "One", "Two", "Three", "Four", "Five", "Six", "Seven",
               "Eight", "Nine", "Ten" };

             int[] image = { R.drawable.one, R.drawable.two, R.drawable.three,
               R.drawable.four, R.drawable.five, R.drawable.six, R.drawable.seven,
               R.drawable.eight, R.drawable.nine, R.drawable.ten };

             int textlength = 0;

             ArrayList<String> text_sort = new ArrayList<String>();
             ArrayList<Integer> image_sort = new ArrayList<Integer>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        edittext = (EditText) findViewById(R.id.EditText01);
          listview = (ListView) findViewById(R.id.ListView01);
          listview.setAdapter(new MyCustomAdapter(text, image));

          edittext.addTextChangedListener(new TextWatcher()
          {

           public void afterTextChanged(Editable s)
           {

           }

           public void beforeTextChanged(CharSequence s, int start,
            int count, int after)
           {

           }

           public void onTextChanged(CharSequence s, int start,
            int before, int count)
           {

            textlength = edittext.getText().length();
            text_sort.clear();
            image_sort.clear();

            for (int i = 0; i < text.length; i++)
            {
             if (textlength <= text[i].length())
             {
              if (edittext.getText().toString().
           equalsIgnoreCase((String) text[i].subSequence(0, textlength)))
              {
               text_sort.add(text[i]);
               image_sort.add(image[i]);
              }
             }
            }

            listview.setAdapter(new MyCustomAdapter
             (text_sort, image_sort));

            listview.setOnItemClickListener(new OnItemClickListener(){

                @Override
                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long rowId) {
                    // TODO Auto-generated method stub
                    listview.getItemAtPosition(position);
                    AlertDialog.Builder adb = new AlertDialog.Builder(
                            MainActivity.this);
                            adb.setTitle("List");
                            adb.setMessage(" selected Item is="
                            + listview.getItemAtPosition(position));
                            adb.setPositiveButton("Ok", null);
                            adb.show();    

                }

            });

           }
          });
         }

         class MyCustomAdapter extends BaseAdapter
         {

          String[] data_text;
          int[] data_image;

          MyCustomAdapter()
          {

          }

          MyCustomAdapter(String[] text, int[] image)
          {
           data_text = text;
           data_image = image;
          }

          MyCustomAdapter(ArrayList<String> text, ArrayList<Integer> image)
          { 

           data_text = new String[text.size()];
           data_image = new int[image.size()];

           for(int i=0;i<text.size();i++)
           {
            data_text[i] = text.get(i);
            data_image[i] = image.get(i);
           }

          }

          public int getCount()
          {
           return data_text.length;
          }

          public String getItem(int position)
          {
           return null;
          }

          public long getItemId(int position)
          {
           return position;
          }

          public View getView(int position, View convertView, ViewGroup parent)
          {

           LayoutInflater inflater = getLayoutInflater();
           View row;

           row = inflater.inflate(R.layout.listview, parent, false);

           TextView textview = (TextView) row.findViewById(R.id.TextView01);
           ImageView imageview = (ImageView) row
             .findViewById(R.id.ImageView01);

           textview.setText(data_text[position]);
           imageview.setImageResource(data_image[position]);

           return (row);

          }
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:38:23.340

尝试改变这个：

```
adb.setMessage(" selected Item is= " + listview.getItemAtPosition(position)); 
```

对此：

```
adb.setMessage(" selected Item is= " + text_sort.get(position)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T06:29:30.663

你在你的警报中得到错误的值

```
 +listview.getItemAtPosition(position)); 
```

正确的

```
 adb.setMessage(" selected Item is="+text_sort.get(position).toString()); 
```