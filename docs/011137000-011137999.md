# StackOverflow 问答 11137000-11137999

# android - 在 Android 中测试订阅：未找到项目

> ID：11137002
> 
> 赞同：4
> 
> 时间：2012-06-21T11:18:29.687
> 
> 标签：android, testing, in-app-billing, subscription, google-play

我正在尝试在 Google Play 中测试新订阅，但服务返回“找不到项目”。

我使用标识符“android.test.purchased”进行测试。有了这个标识符，我可以完美地测试*普通*的应用内产品，但是订阅它不起作用。

在 Google Play 控制台中，我添加了一个订阅，并发布了它。

我必须使用真实的订阅标识符并支付测试费用吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T15:04:31.503

是的，您必须使用真正的订阅并付款（您可以稍后取消）。没有订阅测试。请注意，您必须发送您的请求 api version=2 并且产品类型应为“subs”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T13:16:24.320

即使我一直在寻找这个，并且我猜测您可能已经解决了您的问题。但这可能对其他人有所帮助即使我无法找到任何有关订阅测试产品 ID 的文档，但是[测试应用内计费](http://developer.android.com/guide/google/play/billing/billing_testing.html)建议仅使用4 个保留的静态产品 ID。这让我推断出订阅没有 test-id。

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-09T05:51:27.697

Google Play 已经实施了一个沙盒来测试订阅和发布购买。您需要在测试版中发布您的应用程序，并在几个小时后测试用户（添加到 Google Play 开发控制台中）可以在您的应用程序中进行测试购买（这些不收费）。他们甚至可以进行订阅测试购买。无论订阅持续时间长短，测试订阅每天都会自动续订（直到从 Google Play 取消）。不过请注意，测试用户（Google 帐户）必须将有效的信用卡添加到 Google Wallet 帐户才能进行测试购买（不收费）。在进行购买时，购买确认对话框清楚地提到这是一次测试购买，不会向您收费。

# javascript - Querystring 在 nodejs 中没有正确字符串化

> ID：11137003
> 
> 赞同：0
> 
> 时间：2012-06-21T11:18:34.867
> 
> 标签：javascript, node.js

这是我的问题，

这是我的字符串：

```
 var body = {
        message: "Hello",
        properties: [
            { text: 'Link Test 1', href: 'http://hei.it'},
            { text: 'Link Test 2', href: 'http://hei.it/rai1'},
        ],
        actions: [
            { name: 'Shawn', link: 'http://hu.com'}
        ]
    }; 
```

如果我使用

```
querystring.stringify(body); 
```

我回来

```
 message=Hello&properties=&properties=&actions= 
```

查询字符串被窃听还是我错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:47:45.723

到目前为止，我找到了一个名为 node-qs 的库，它输出：

message=Hello&actions[0][name]=Shawn&actions[0][link]=http%3A%2F%2Fhei.com

# java - Java , Oracle 查询每秒命中 CPU

> ID：11137007
> 
> 赞同：0
> 
> 时间：2012-06-21T11:18:47.533
> 
> 标签：java, sql, oracle

我有甲骨文数据库。我有一个非常基本的 java 程序，它每秒查询一个表以检查每个记录的状态并更新它。

```
"SELECT * FROM MYTABLE WHERE STATUS =10 AND MODUS<10" 
```

我在这个程序中使用 OJB。java程序运行10个线程。

该程序导致 CPU 使用率很高，平均占 Sun CPU 总量的 40%。我已经为该特定查询创建了索引。是的，每隔几秒钟，该表就会有数据，程序必须处理它。

我想知道，在 JAVA 或 Oracle 中有什么更好的方法来最小化 CPU 使用率并实现这种程序每秒运行一次。我的目标是每 1 分钟处理 200 条记录。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T00:45:13.303

这听起来像是一个复杂的设计。建议去AQ看看。

# android - 如何使 ListItem Textview 用作 Twitter 推文并获得不同的 Linkify 点击？

> ID：11137008
> 
> 赞同：1
> 
> 时间：2012-06-21T11:18:52.120
> 
> 标签：android, android-listview, textview

例如：

> 关注@SoccerBible，转发此消息，如果罗纳尔多今晚得分 [https://bit.ly/133/com](https://bit.ly/133/com)，我们将向一位幸运的获胜者赠送一双 Nike Clash Vapor 8！#RonaldoComp

在我的列表视图组件中。我在哪里显示推文列表。我已经为推文文本中的@、# 和 url 着色。所有这些都是动态可点击的。

我的问题是如何使非彩色文本成为可点击的。我使用了 Linkify.addLinks 和 Pattern API 来使它们可点击。但我希望非 @,# 和 url 文本可以点击而不添加任何颜色。

谢谢，多米尼克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T09:07:14.030

对于 twitter 应用程序，我也有相同的要求，即单击推文句柄并单击推文文本以获取推文详细信息。

为此，我使用了这个[**LinkEnabledTextView**](http://www.orangeapple.org/post/14809024490/android-custom-hyperlinked-textview)，这对我来说很容易完成任务。

我刚刚在我的项目中添加了类，然后在 List Item 中而不是简单的 TextView 中，我使用了 LinkEnabledTextView 的对象/实例。

上面的链接中有一个完整的演示，请检查。

编辑：适配器代码**特别检查 onTextLinkClick() 然后 holder.twtdata.setOnClickListener()**

```
 private static class EfficientAdapter extends BaseAdapter implements TextLinkClickListener {
        private LayoutInflater mInflater;
        static int pos =0;
        public EfficientAdapter(Context context) {
            mInflater = LayoutInflater.from(context);
        }

        public int getCount() {
            return timelines.length;
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(final int position, View convertView,
                ViewGroup parent) {

            ViewHolder holder;
            if (convertView == null) {
                convertView = mInflater.inflate(R.layout.listtimerow, null);
                holder = new ViewHolder();
                holder.twtdata = (LinkEnabledTextView) convertView
                        .findViewById(R.id.twtdata);
                holder.twtnm = (TextView) convertView
                        .findViewById(R.id.twthandle);
                holder.twtimg = (ImageView) convertView
                        .findViewById(R.id.avatar);
                holder.twtdt = (TextView) convertView
                        .findViewById(R.id.created);
                convertView.setTag(holder);
            } else {
                holder = (ViewHolder) convertView.getTag();
            }
               holder.twtdata.setOnTextLinkClickListener(this);
                holder.twtdata.gatherLinksForText(timelines[position]);
                holder.twtdata.setTextColor(Color.BLACK);
                holder.twtdata.setLinkTextColor(Color.BLUE);

                MovementMethod m = holder.twtdata.getMovementMethod();
                if ((m == null) || !(m instanceof LinkMovementMethod)) {
                    if (holder.twtdata.getLinksClickable()) {
                        holder.twtdata.setMovementMethod(LinkMovementMethod.getInstance());
                    }
                }

            if (bmpimg1[position] != null)
                holder.twtimg.setImageBitmap(bmpimg1[position]);
            holder.twtnm.setText(twitterhandles[position]);
            Date credate = new Date(created[position]);

            String dt = credate.getDate() + " "
                    + getMonthName(credate.getMonth());
            holder.twtdt.setText(dt);

            holder.twtdata.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    pos = position;
                    if(linkselected==true)
                        return;
                    childSelected = true;

                    Log.i("mention data", timelines[position]);
                    Intent textintent = new Intent(ctx, TimelineRe.class);
                    textintent.putExtra("userid", userid[position]);
                    textintent.putExtra("nm", twitterhandles[position]);
                    textintent.putExtra("msg", timelines[position]);
                    textintent.putExtra("pos", position);
                    textintent.putExtra("frm", "t");
                    textintent.putExtra("img", bmpimg1[position]);

                    if (urlentities[position] != null
                            && dpurlentities[position] != null) {
                    textintent.putExtra("urlentity", urlentities[position]);
                    textintent.putExtra("dpurlentity", dpurlentities[position]);
                    }
                    textintent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

                    ctx.startActivity(textintent);
                }
            });
            holder.twtnm.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    childSelected = true;
                    Intent iconintent = new Intent(ctx, TweetRe.class);
                    iconintent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    iconintent.putExtra("userid", userid[position]);
                    iconintent.putExtra("pos", position);
                    iconintent.putExtra("frm", "t");
                    iconintent.putExtra("img", bmpimg1[position]);
                    ctx.startActivity(iconintent);
                }
            });
            holder.twtimg.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    childSelected = true;
                    Intent iconintent = new Intent(ctx, TweetRe.class);
                    iconintent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    iconintent.putExtra("userid", userid[position]);
                    iconintent.putExtra("pos", position);
                    iconintent.putExtra("frm", "t");
                    iconintent.putExtra("img", bmpimg1[position]);
                    ctx.startActivity(iconintent);
                }
            });
            return convertView;

        }
        @Override 
        public int getItemViewType(int position) { 
            return position; 
        } 

        @Override 
        public int getViewTypeCount() { 
            return timelines.length;
        } 
        static class ViewHolder {

            TextView twtdt;
            LinkEnabledTextView twtdata;
            ImageView twtimg;
            TextView twtnm;
        }

        public void onTextLinkClick(View textView, String clickedString)
        {
            if (isWiFiConnected == false) {
                Toast.makeText(ctx,
                        "No Internet Connection \nPlease Check and Retry",
                        Toast.LENGTH_SHORT).show();

                return;
            }
            android.util.Log.v("Hyperlink clicked is :: " + clickedString, "Hyperlink clicked is :: " + clickedString);
            if(clickedString.charAt(0)=='#')
            {
                linkselected=true;
                childSelected=true;
                Intent reintent = new Intent(ctx,
                        Search.class);
                reintent.putExtra("frm", "l");
                reintent.putExtra("keyword",clickedString.substring(1, clickedString.length()) );
                reintent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                ctx.startActivity(reintent);
            }
            else if(clickedString.charAt(0)=='@')
            {
                linkselected=true;
                childSelected=true;
                Intent iconintent = new Intent(ctx, TweetRe.class);
                iconintent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                iconintent.putExtra("snm", clickedString.substring(1,clickedString.length()));
                iconintent.putExtra("frm", "l");
//              iconintent.putExtra("userid", userid[pos]);
//              iconintent.putExtra("pos", pos);

//              iconintent.putExtra("img", bmpimg2[pos]);
                ctx.startActivity(iconintent);
            }
            else if(clickedString.charAt(0)=='h')
            {
                linkselected=true;
                childSelected=true;
                Intent iconintent = new Intent(ctx, ShowLink.class);
                iconintent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                iconintent.putExtra("url","http://www."+dpurlentities[pos]);
                ctx.startActivity(iconintent);

            }
        }
    } 
```

# vb.net - 将 Double() 数组中的数据点添加到现有的 VB.NET 图表系列

> ID：11137009
> 
> 赞同：0
> 
> 时间：2012-06-21T11:18:55.330
> 
> 标签：vb.net, arrays, plot, double

`Double()`我有一个类型为(1 x *n* )的数组，我试图在我已经设置的图表上快速绘制它。我唯一想要/需要做的就是获取我的数组并将其存储为我已经拥有的系列中的数据点（y 轴值）。最好的方法是什么？此外，绘制的数据点会随着我的数组变化而变化，如果没有，我将如何重新绘制这些新点并摆脱旧点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:16:47.047

添加点应该很简单

```
Chart1.Series("Default").Points.Add(arrayName) 
```

至于当你改变数组时它会自动更新，我相信如果你只是添加点，你会遇到像在游泳池里撒尿的问题（一旦它们在那里，你就不能把它们弄出来） . 因此，您添加一个包含 3 个项目的数组，然后向数组添加一个双精度数，然后再次添加到图表中，您现在错误地有 7 个点。但是，您可以将数组数据绑定到系列，就像这样。

```
Chart1.Series("Default").Points.DataBindXY(xStrings, xDoubles) 
```

在这种情况下，如果数组改变，图表也应该改变。

# zend-framework - Zend_File_Transfer：上传后重命名文件

> ID：11137013
> 
> 赞同：0
> 
> 时间：2012-06-21T11:19:08.750
> 
> 标签：zend-framework, upload, rename

我正在尝试使用 rename-addFilter 重命名上传的文件。实际上传已经可以了，但是文件只是上传并没有重命名，那么我该怎么做呢？这是我的控制器代码，用于上传文件：

```
 //Getting the new filename, works perfectly:
        $name = explode('.', $form['pic']);
        $ext = $name[1];
        $mapper = new Application_Model_CmsMap();
        $row = $mapper->fetchRow('childId = "' . $id . '" AND type= "pic"');
        $new_filename = $row->name.'.'.$ext;

        //All images will and are be stored in /public/images/
        //Maybe the picture should be replaced, so it should be overwrited, in case it already exists
        $upload->addFilter('Rename', array(
            'target' => '/images/'.$new_filename,
            'overwrite' => true,
            )
        );

        $upload->receive(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:17:06.747

拧禅。好的 ol' PHP 很简单并且可以完美运行：

```
rename('images/'.$form['pic'], 'images/'.$new_filename); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:45:10.273

应该管用 ：-）

```
 $transferAdapter = new Zend_File_Transfer_Adapter_Http();
    $transferAdapter->receive();

    $newFilename = 'MY_NEW_FILE';

    $filterFileRename = new Zend_Filter_File_Rename(array(
        'target'    => 'PATH' + $newFilename,
    ));

    $file = $transferAdapter->getFileName();

    // new location and name..
    $movedFile = $filterFileRename->filter($file); 
```

# magento - 缩短 Magento 生成的图像 URL

> ID：11137014
> 
> 赞同：0
> 
> 时间：2012-06-21T11:19:09.127
> 
> 标签：magento

有没有办法/扩展使 Magento 生成的图像 URL 从以下位置缩短： [http ://www.website.com/media/catalog/product/cache/1/image/325x325/9df78eab33525d08d6e5fb8d27136e95/m/a/image_01_site_01.jpg](http://www.website.com/media/catalog/product/cache/1/image/325x325/9df78eab33525d08d6e5fb8d27136e95/m/a/image_01_site_01.jpg)

更容易接受的东西，比如：[http ://www.website.com/images/image_01_site_01.jpg](http://www.website.com/images/image_01_site_01.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:19:13.373

如果你想要缓存的图像，你必须使用长 url。如果你想要一个更短的 URL，你可以改变它，它会拉一个非缓存的图像：

替换这个：

```
http://www.website.com/media/catalog/product/cache/1/image/325x325/9df78eab33525d08d6e5fb8d27136e95/m/a/image_01_site_01.jpg 
```

有了这个：

```
http://www.website.com/media/catalog/product/m/a/image_01_site_01.jpg 
```

# jquery - 滑出 div 在完全显示之前不显示上边距

> ID：11137015
> 
> 赞同：0
> 
> 时间：2012-06-21T11:19:09.190
> 
> 标签：jquery, css, margin, show-hide

我有一个 div，我想在单击时使用`.show("slide", { direction: "left" }, 1000);`幻灯片显示滑出工作正常，我遇到的问题是滑出 div 的顶部有一个上边距，但在 div 完全显示之前，上边距不能正确呈现。

我在这里提出了问题的 jsfiddle [http://jsfiddle.net/NaXNe/1/](http://jsfiddle.net/NaXNe/1/)

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:20:30.467

只需添加`position:absolute`到您的`.slide-cont`元素

```
.slide-cont      {margin:20px;position:absolute;} 
```

## *[小提琴演示](http://jsfiddle.net/roXon/NaXNe/2/)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:24:32.163

添加`overflow:auto`到`.slide-out`，并可选择删除`height: 100%`（取决于您希望滚动条显示的位置）。小提琴：http: [//jsfiddle.net/sveinatle/NaXNe/3/](http://jsfiddle.net/sveinatle/NaXNe/3/)

# activemq - Mule - 如何停止 JMS 输入端点

> ID：11137024
> 
> 赞同：0
> 
> 时间：2012-06-21T11:19:37.813
> 
> 标签：activemq, mule

有一种情况，当我的输出端点关闭时，我需要在我的 Active MQ JMS 入站端点上进行暂停行为。这样我就不会处理队列中的消息。一旦然后输出端点启动，我想恢复队列获取操作。这在骡子中可能吗？如果是怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:53:16.960

你应该能够做这样的事情：

```
Connector connector = muleRegistry.lookupConnector(connectorName); 
connector.stop(); 
```

但是，如果您关心消息丢失，这并不是一个真正直接的解决方案。如果您不小心处理这些情况，那么在连接器关闭之前还有一段时间，触发此“停止”的手头消息可能会丢失。

还有另一种选择。假设您的其他资源仅在一小段时间内停机，您可能只想使用 JMS 事务并将消息回滚到队列（当输出端点失败时），然后它将重试事务并超过。

# java - Java Swing Button执行具有的功能

> ID：11137025
> 
> 赞同：1
> 
> 时间：2012-06-21T11:19:38.940
> 
> 标签：java, swing, jbutton

我编写了一个 java 应用程序，它使用 Netbeans 7.0.1 及其在 gui builder 中的构建来完成一些不同的事情。我遇到的问题是屏幕上有一些文本字段供用户输入。最初是一组字段和一个最多可添加 10 个的按钮。我还有一个删除按钮，用于删除一个字段。所以基本上按钮向面板添加和删除 jTextFields 和 jLabels。

当我单击按钮时似乎有延迟所以我添加了一些 System.out.prints 并发现有时按钮会被按下，系统会打印它应该打印的内容但只是忽略添加/删除组件.

这是一个已知问题吗？（我还没有找到任何东西，虽然我不是 100% 确定如何措辞我的搜索）还是我做错了什么？

代码示例：注意：当前组件是每个组件及其值的映射

```
private void addButtonMouseClicked(java.awt.event.MouseEvent evt) {                                       
    if(hiddenValue != 81) {
        currentComponents.get(hiddenValue).setVisible(true);
        currentComponents.get(hiddenValue + 1).setVisible(true);
        currentComponents.get(hiddenValue + 2).setVisible(true);
        currentComponents.get(hiddenValue + 3).setVisible(true);
        currentComponents.get(hiddenValue + 4).setVisible(true);
        currentComponents.get(hiddenValue + 5).setVisible(true);
        currentComponents.get(hiddenValue + 6).setVisible(true);
        currentComponents.get(hiddenValue + 7).setVisible(true);
        currentComponents.get(hiddenValue + 8).setVisible(true);
        hiddenValue =  hiddenValue + 10;
        numEntries++;
        removeButton.setVisible(true);
        removeButton.setEnabled(true);
        System.out.println(hiddenValue);
    }
    else {
        currentComponents.get(hiddenValue).setVisible(true);
        currentComponents.get(hiddenValue + 1).setVisible(true);
        currentComponents.get(hiddenValue + 2).setVisible(true);
        currentComponents.get(hiddenValue + 3).setVisible(true);
        currentComponents.get(hiddenValue + 4).setVisible(true);
        currentComponents.get(hiddenValue + 5).setVisible(true);
        currentComponents.get(hiddenValue + 6).setVisible(true);
        currentComponents.get(hiddenValue + 7).setVisible(true);
        currentComponents.get(hiddenValue + 8).setVisible(true);
        hiddenValue =  hiddenValue + 10;
        numEntries++;
        addButton.setVisible(false);
        addButton.setEnabled(false);
        System.out.println(hiddenValue);
    }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:04:12.543

我没有隐藏/显示组件的问题：

```
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class TestVisibility {

    private class Pair<P1, P2> {
        public final P1 first;
        public final P2 second;

        public Pair(P1 first, P2 second) {
            this.first = first;
            this.second = second;
        }
    }

    private List<Pair<JLabel, JTextField>> pairs = new ArrayList<TestVisibility.Pair<JLabel, JTextField>>();

    protected void initUI() {
        JFrame frame = new JFrame("test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().setLayout(new GridBagLayout());
        GridBagConstraints gbcLabel = new GridBagConstraints();
        gbcLabel.gridx = 0;
        gbcLabel.weightx = 0.0;
        gbcLabel.weighty = 0.0;
        gbcLabel.insets = new Insets(3, 3, 3, 3);
        GridBagConstraints gbcTF = new GridBagConstraints();
        gbcTF.gridx = 1;
        gbcTF.fill = GridBagConstraints.HORIZONTAL;
        gbcTF.weightx = 1.0;
        gbcTF.weighty = 1.0;
        gbcTF.insets = new Insets(3, 3, 3, 3);
        for (int i = 0; i < 10; i++) {
            gbcLabel.gridy = i;
            gbcTF.gridy = i;
            JLabel label = new JLabel("Field " + (i + 1) + ":");
            JTextField textField = new JTextField(50);
            label.setLabelFor(textField);
            Pair<JLabel, JTextField> pair = new Pair<JLabel, JTextField>(label, textField);
            pairs.add(pair);
            frame.add(label, gbcLabel);
            frame.add(textField, gbcTF);
        }
        JButton button = new JButton("Toggle");
        button.addActionListener(new ActionListener() {

            private boolean visible = true;

            @Override
            public void actionPerformed(ActionEvent e) {
                visible = !visible;
                boolean isOdd = false;
                for (Pair<JLabel, JTextField> pair : pairs) {
                    boolean oddVisible = isOdd || visible;
                    pair.first.setVisible(oddVisible);
                    pair.second.setVisible(oddVisible);
                    isOdd = !isOdd;
                }
            }
        });
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.gridy = 10;
        gbc.gridwidth = 2;
        gbc.anchor = GridBagConstraints.CENTER;
        frame.add(button, gbc);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestVisibility().initUI();
            }
        });
    }
} 
```

您可能应该考虑使用[SSCCE更新您的帖子](http://sscce.org)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T12:15:47.250

如果您只想在运行时隐藏/显示一些组件，我建议使用[MigLayout](http://www.miglayout.com/)。它是一个 LayoutManager，允许您定义如果组件不可见会发生什么。

*   `hidemode 0`: 不可见组件占用的空间与可见组件完全相同。
*   `hidemode 1`：不可见的组件不占用空间，但会消耗它们的网格单元。
*   `hidemode 2`：不可见的组件不占用空间，消耗它们的网格单元，但单元间隙设置为大小 0。
*   `hidemode 3`：不可见的组件根本不会参与布局（它们不会消耗它们的网格单元）。

它的工作方式与标准的 LayoutManagers 略有不同，但它们有很好的代码示例和很棒的备忘单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T11:45:43.030

`JComponents`由他们（es）调用真的不是好主意`index`，也不是为什么要重新发明轮子，请使用（避免任何一个`XxxExceptions`）

```
for (Component c : currentComponents.getComponents()) {
    //if (c instanceof JButton) {
       c.setVisible(true);
    //}
} 
```

类似于setEnabled ( [true / false)](https://stackoverflow.com/a/10985931/714968)`JButtons ActionPerfomed`的例子`JComponents``JPanel`

# optimization - 如何在网站用户之间实时共享数据？

> ID：11137027
> 
> 赞同：-2
> 
> 时间：2012-06-21T11:19:41.883
> 
> 标签：optimization, chat

我想在网站用户之间制作一个简单的网络界面聊天程序。这通常是如何实现的？

首先想到的是为两个用户分配一个唯一的聊天会话 id，然后继续轮询数据库以获取新消息。但这似乎效率低下。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:35:31.860

您可以使用两种技术来实现服务器和客户端之间的良好通信。您可以将任[一 WebSocket](http://www.websocket.org/)用于支持它的浏览器。（普通的聊天应用程序通常也使用套接字。）但是，WebSockets 是非常新的，旧的浏览器还不支持它（甚至新的浏览器也不总是支持它，或者默认禁用它）。您可以使用一种名为[COMET](http://en.wikipedia.org/wiki/Comet_%28programming%29)的技术来完成同样的事情。

# ruby - 仅使用没有外部依赖关系的 ruby 计算多边形联合？

> ID：11137029
> 
> 赞同：0
> 
> 时间：2012-06-21T11:19:45.033
> 
> 标签：ruby, math, jruby, polygons

从一些多边形开始，我想根据它们的并集计算得到的多边形。我需要这个，有一些国家，把它们的一个区域放在一个多边形中。

我需要这个没有外部依赖，因为我需要在不支持外部 C 依赖的 jruby 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:23:16.660

好吧，您可以检测多边形的点是否位于下一个多边形内并删除该点，因此您将拥有一个定义两个多边形并集的点数组。过程是递归的，这里描述了寻找内部点的算法：[http ://local.wasp.uwa.edu.au/~pbourke/geometry/insidepoly/](http://local.wasp.uwa.edu.au/~pbourke/geometry/insidepoly/)

另请阅读此问题：[如何组合复杂的多边形？](https://stackoverflow.com/questions/2667748/union-of-complex-polygons)

# c - 从某个包安装头文件的正确方法是什么？

> ID：11137033
> 
> 赞同：6
> 
> 时间：2012-06-21T11:19:48.993
> 
> 标签：c, autotools

我想从源代码构建一些包（`e2fsprogs`更具体地说）并将其头文件安装到我的系统中。之后，我将删除构建树，使其不再可访问。这样做的正确方法是什么？

当我想安装程序时，我很简单：

```
 $ ./configure
 $ make
 # make install 
```

当我想安装标头时，等效的操作是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T11:49:58.373

**对于 e2fsprogs**，逐字引用[`INSTALL`源附带的文件](http://git.kernel.org/?p=fs/ext2/e2fsprogs.git;a=blob_plain;f=INSTALL;hb=HEAD)：

> 7) 安装包含文件和库
> 
> 您可以运行“make install-libs”来安装包含文件和库。请注意，程序运行不需要此安装。仅当您希望使用这些库开发其他程序或想要使用这些库编译其他程序时才需要它（如 4.4BSD 转储和恢复端口）。

**更一般地说**，当我想找出安装对其他人有用的东西的“正确”方法时，我会看：

1.  [包的样子，在我最喜欢的发行版中](http://www.archlinux.org/packages/core/i686/e2fsprogs/)
2.  [该软件包是如何为我最喜欢的发行版构建的](https://projects.archlinux.org/svntogit/packages.git/tree/trunk/PKGBUILD?h=packages/e2fsprogs)

# google-apps-script - 如何快速测试 Google 协作平台中保存的代码？

> ID：11137034
> 
> 赞同：0
> 
> 时间：2012-06-21T11:19:50.163
> 
> 标签：google-apps-script

我正在处理站点中的一个脚本来处理 POST 参数。它作为服务发布并允许匿名访问。自从引入了新的版本和库功能以来，我无法测试我的代码。在我明确保存版本并发布之前，我所做的更改（显然）不会反映在我的服务中。我看不出“开发模式”如何为我工作，因为匿名访问位是必不可少的。每次我更改某些内容时保存和发布新版本非常非常耗时。有没有人对此有解决方法的建议/想法？我忽略了显而易见的事情吗？

谢谢，阿诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T00:27:33.233

这可能是在为 webapps 开发新的版本控制系统时没有考虑到的边缘情况。现在你最好的办法是创建一个新版本，但如果你觉得很强烈，你可以[提交一个功能请求](http://code.google.com/p/google-apps-script-issues/issues/list)以允许匿名访问开发 URL。

# r - 根据因子级别删除行

> ID：11137036
> 
> 赞同：4
> 
> 时间：2012-06-21T11:20:00.840
> 
> 标签：r, data.table, subset, r-factor

我有一个`df`格式为“long”的data.frame。

```
df <- data.frame(site = rep(c("A","B","C"), 1, 7),
                 time = c(11,11,11,22,22,22,33),
                 value = ceiling(rnorm(7)*10))
df <- df[order(df$site), ]

df
  site time value
1    A   11    12
2    A   22   -24
3    A   33   -30
4    B   11     3
5    B   22    16
6    C   11     3
7    C   22     9 
```

## 问题

如何删除`df$time`每个级别不存在唯一元素的行`df$site`？

在这种情况下，我想删除`df[3,]`，因为`df$time`时间戳 33 仅存在于站点 A 而不是站点 B 和站点 C。

期望的输出：

```
df.trimmed
  site time value
1    A   11    12
2    A   22   -24
4    B   11     3
5    B   22    16
6    C   11     3
7    C   22     9 
```

data.frame 很容易有 800k 行和 200k 唯一时间戳。我不想使用循环，但我不知道如何使用这种情况下的矢量化`apply()`函数`lapply()`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T12:16:41.927

这是使用该软件包的另一种可能的解决方案`data.table`：

```
unTime <- unique(df$time)

library(data.table)

DT <- data.table(df, key = "site")

(notInAll <- unique(DT[, list(ans = which(!unTime %in% time)), by = key(DT)]$ans))
# [1] 3

DT[time %in% unTime[-notInAll]]

#      site time value
# [1,]    A   11     3
# [2,]    A   22    11
# [3,]    B   11    -6
# [4,]    B   22    -2
# [5,]    C   11   -19
# [6,]    C   22   -14 
```

**来自马修**
尼斯的编辑。或者更直接的方式：

```
DT = as.data.table(df)
tt = DT[,length(unique(site)),by=time]
tt
   time V1
1:   11  3
2:   22  3
3:   33  1

tt = tt[V1==max(V1)]      # See * below
tt
   time V1
1:   11  3
2:   22  3

DT[time %in% tt$time]
   site time value
1:    A   11     7
2:    A   22    -2
3:    B   11     8
4:    B   22   -10
5:    C   11     3
6:    C   22     1 
```

如果所有站点都没有时间，当最终结果应该为空时（正如 Ben 在评论中指出的那样），`*`上面标记的步骤可能是：

```
tt = tt[V1==length(unique(DT$site))] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T11:44:05.220

会`rle`为你工作吗？

```
df <- df[order(df$time), ]
df <- subset(df, time != rle(df$time)$value[rle(df$time)$lengths == 1])
df <- df[order(df$site), ]
df
##   site time value
## 1    A   11    17
## 4    A   22    -3
## 2    B   11     8
## 5    B   22     5
## 3    C   11     0
## 6    C   22    13 
```

重新查看您的数据，似乎这个解决方案可能对您的需求来说太简单了......

## 更新

这是一种*应该*比`rle`我上面提到的解决方案更好的方法。而不是寻找“1”的运行长度，而是删除与结果的某些条件不匹配的行`table(df$site, df$time)`。为了说明，我还添加了一些假数据。

```
df <- data.frame(site = rep(c("A","B","C"), 1, 7),
                 time = c(11,11,11,22,22,22,33),
                 value = ceiling(rnorm(7)*10))
df2 <- data.frame(site = rep(c("A","B","C"), 1, 7),
                 time = c(14,14,15,15,16,16,16),
                 value = ceiling(rnorm(7)*10))
df <- rbind(df, df2)
df <- df[order(df$site), ]

temp <- as.numeric(names(which(colSums(with(df, table(site, time)))
                               >= length(levels(df$site)))))
df2 <- merge(df, data.frame(temp), by.x = "time", by.y = "temp")
df2 <- df2[order(df2$site), ]
df2
##   time site value
## 3   11    A    -2
## 4   16    A    -2
## 7   22    A     2
## 1   11    B   -16
## 5   16    B     3
## 8   22    B    -6
## 2   11    C     8
## 6   16    C    11
## 9   22    C   -10 
```

这是对站点/时间组合进行制表和总结的结果：

```
colSums(with(df, table(site, time)))
## 11 14 15 16 22 33 
##  3  2  2  3  3  1 
```

因此，如果我们对包含至少两个站点具有时间戳的站点感兴趣，我们可以将行`>= length(levels(df$site))`（在本例中为 3）更改为`>= length(levels(df$site))-1`（显然，2）。

不确定此解决方案是否对您有用，但我想我会分享它以展示我们使用 R 提供的解决方案的灵活性。

# maven - 如何在EAR中引用共享库，其中包含使用maven构建的EJB jar作为单独的工件

> ID：11137037
> 
> 赞同：0
> 
> 时间：2012-06-21T11:20:03.750
> 
> 标签：maven, deployment, weblogic, shared-libraries, ear

我正在使用 Maven 来构建应用程序。

我已经部署了一个包含许多常见 jar 的 WAR 文件作为应用程序服务器中的共享库。

我有一个封装类型 EJB 的工件（比如 A-EJB）。我已经构建了 ejb jar 文件。

我有另一个包装类型 EAR 的工件（比如 A-EAR）。

我在 A-EAR 的 pom 文件中添加了 A-EJB 依赖项。我可以构建 EAR 文件并添加共享库引用，我在 EAR 的 weblogic-application.xml 中添加了库引用。

在我的最终 EAR 文件中，我可以看到 A-EJB.jar 文件，以及 A-EAR 工件的其他依赖项 jar 文件。

EAR 结构：

--------------APP-INF\lib\some jars
--------------META-INF\application.xml, MANIFEST.MF , weblogic-application.xml
--------------A-ejb.jar

A-EJB.jar 的类文件需要引用共享库中的常用jar。

理想情况下，我希望部署应该成功进行，但这并没有发生。尽管我在 EAR 文件中共享了库引用，但在部署期间准备 EJB 模块时，由于 classNotFoundException 导致部署失败。

A-EJB.jar 的类文件搜索所需的 jar 文件以供参考，但它们在共享库中可用，即使 EAR 文件引用了共享库，也不使用共享库。

例外：

weblogic.application.ModuleException：异常准备模块：EJBModule [EJB:011023]读取部署描述符时发生错误。错误是：.................................................. ......

引起：java.lang.ClassNotFoundException：...................................... .....................

因此，这意味着即使 EAR 具有共享库引用，EAR 中存在的 ejb.jar 也没有对共享库的引用。这是真的 ？

有没有人遇到过这种异常和情况。请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:30:15.627

我建议您使用带有此设置的 ear 插件.. 可能会有所帮助..

```
<plugin>
    <artifactId>maven-ear-plugin</artifactId>
    <configuration>
        <modules>
            <ejbModule>
                <groupId>ur ejb</groupId>
                <artifactId>ur ejb Id</artifactId>
            </ejbModule>
            <jarModule>
                <groupId>......</groupId>
                <artifactId>......</artifactId>
            </jarModule>
            ....
            ....
    Other jar modules to be included other than the one included in dependency tag
            ....
            ....
        </modules>
        <archive>
            <manifest>
                <addClasspath>false</addClasspath>
            </manifest>
        </archive>
        <displayName>...name...</displayName>
        <description>........desc.......</description>
    </configuration>
</plugin> 
```

# php - 为投标平台同步数据库更新/检查

> ID：11137038
> 
> 赞同：0
> 
> 时间：2012-06-21T11:20:04.383
> 
> 标签：php, mysql

我正在 php/mysql 上构建一个平台，该平台允许用户使用产品的一部分。基本上，他们选择他们想要出价的百分比以及他们想要出价的加价，例如 1.2。

我遇到的问题是，如果同一产品同时有多个投标，我需要将投标排队，以便在处理时只有有效的投标通过。例如，如果有 20% 的可用价值为 1.2，并且两个用户同时以 1.2 出价 20%，则每个出价的过程将是： 1----- 选择当前出价 2----- php 处理确定出价是否仍然可用 3----- 出价

这里的问题是，如果两个“检查是否可用”都发生在任何一个“出价”之前，那么两个出价都将通过并有效地导致股票问题。

有没有办法让这个过程排队，所以在下一个可以运行之前，整个步骤 1-3 都发生在投标中。

我最初的想法是使用缓存表来存储所有出价，然后每隔几秒运行一次 cron，它将按照缓存表中的 ID 顺序进行处理并相应通知，但这似乎在高流量系统上可能不可行因为服务器会被锤击。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:20:48.727

我在 PHP 级别解决了这个问题，首先将出价作为“接受的出价”注入，这样任何后续的出价都会失败。然后我运行检查以查看出价是否正常，如果不是，则移除出价，是否根据新出价的要求更新表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:30:07.717

如果两个出价永远不可能相同，我会在数据层解决它。根据 item_id、bid_value 和其他任何需要唯一的内容，在您的出价表上创建一个唯一键。第二次插入将失败，您可以让用户知道他们被打败了

# objective-c - 如何在 Object-C 中进行方法覆盖

> ID：11137043
> 
> 赞同：0
> 
> 时间：2012-06-21T11:20:16.363
> 
> 标签：objective-c, oop, subclass, overloading

我正在尝试进行类扩展并从泛型方法调用扩展方法。我只是想知道是否有可能做到这一点？下面是我的代码。

类A.h：

```
@interface ClassA : NSObject

-(void) method; 
```

A.m 类：

```
#import "ClassA.h"

-(void) method{
    NSLog(@"do A");
} 
```

B类.h：

```
@interface ClassB : ClassA

-(void) method; 
```

B类.m：

```
#import "ClassB.h"

-(void) method{
    NSLog(@"do B");
} 
```

在 MainClass.m

```
-(void) doMethod {
    ClassA *class = [[ClassB alloc] init];
    [class method];
} 
```

我试图做这样的事情，但没有打印出来。是否有可能做到这一点？它会打印出“做B”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:21:32.467

您的代码编译并运行良好（减去**@interface ClassA.h**中的一个小错字，应该是**@interface ClassA**）：

```
cristi:tmp diciu$ cat test.m
#import <Cocoa/Cocoa.h>

@interface ClassA : NSObject
- (void) method;
@end

@interface ClassB : ClassA
-(void) method;
@end

@implementation ClassA
-(void) method{
    NSLog(@"do A");
}
@end

@implementation ClassB
-(void) method{
    NSLog(@"do B");
}
@end

int main()
{
    ClassA *class = [[ClassB alloc] init];
    [class method];
}
cristi:tmp diciu$ gcc test.m -framework Cocoa
cristi:tmp diciu$ ./a.out 
2012-06-21 15:04:22.652 a.out[14408:707] do B 
```

Apple 的 Objective-C 文档包含关于继承如何工作的章节，可[在此处](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocObjectsClasses.html#//apple_ref/doc/uid/TP30001163-CH11-86370)在线获取。

# asp.net - ASP.Net 报表查看器 - 多次使用不同参数值的同一报表

> ID：11137045
> 
> 赞同：2
> 
> 时间：2012-06-21T11:20:20.703
> 
> 标签：asp.net, sql-server, reportviewer, reporting-services, report-viewer2010

我目前正在开发一个 ASP.Net WebForms 应用程序，该应用程序允许用户从列表中选择一个项目，最终使用 Report Viewer 2010（在服务器模式下）显示一个 SSRS 报告。报告已使用参数进行编码，`@id`以允许报告显示所选项目的正确数据。

报告数据集可以返回多行，其中一些数据显示在顶部的摘要区域（而不是标题部分）中，例如文本框将具有表达式`=FIRST(Fields!Address.Value, "dsMain")`。返回的数据是非规范化的，因此 Address 将始终是相同的值。这就是为什么使用`FIRST()`有效。其余数据显示在 Tablix 中，并应用了分组等。

但现在我希望改变这一点，以便用户可以选择多个项目，从而有效地多次显示报表，但显示在同一个报表查看器控件中。主要要求是批量打印报表，因此在一个报表视图控件中显示它对于允许一键打印所有内容非常重要。

现在因为我一开始没有设计报告，而且它的布局和执行的 sql 相当复杂；sql 是为运行一个 id 而不是它们的列表而设计的。我正在寻找不必重写报告或 sql 的选项。

**是否可以将 id 参数作为列表提供给报表查看器，并让报表查看器为传递的每个 id 执行相同的报表？**- 我知道报告参数可以接受多个值，但这不一样，因为报告会不明智地将第一个值传递给我的存储过程，但不会为其他值重复报告。**也许报表设计器中有一个设置允许它在传递多个值时重复？**

**有人可以提出其他建议来使其正常工作吗？还是我唯一的选择是扩展报告和 sql 以接受多个 id 并有效地重新设计报告？**

感谢任何建议或帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:14:25.130

答案是使用[子报表](http://technet.microsoft.com/en-us/library/dd239314.aspx)。

创建一个将 id 列表作为多值参数的新报告。

将该参数用作列表控件的数据集。

在列表中有一个子报表。列表中的报告是您的原始报告。

然后，您可以将数据集的每个元素（您的参数列表）作为[参数传递给您的 sub-report](http://msdn.microsoft.com/en-us/library/ms160348%28v=sql.100%29.aspx)。SSRS 将根据您的需要重复它。

# php - 在数组中获取准备好的 mysqli 查询的结果，而不是将变量绑定到字段

> ID：11137048
> 
> 赞同：0
> 
> 时间：2012-06-21T11:20:29.867
> 
> 标签：php, mysqli

这会产生正确的结果，但我希望将结果行放在一个数组中，而不是将单个变量绑定到每个字段，这样我就可以访问`$row[0]`和/或之类的字段`$row["name"]`。

```
 $idToSearch = 2;

    $conn = new mysqli("localhost", "username", "password", "db_people");

    $statement = $conn->prepare("SELECT name, age from People where id = ?");
    $statement->bind_param("i", $idToSearch);
    $statement->execute();
    $statement->bind_result($name, $age);

    if($statement->fetch()) {
        echo "The name is $name and the age is $age. ";
    } else {
        echo "No person found with that id.";
    } 
```

看到了一个关于 fetch_assoc() 的例子，但它使用了一个我不知道热使用的 mysqli_result 类和我宁愿不使用的未准备好的语句。

**编辑**：澄清一下，无论它是否使用 bind_result，我都可以接受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:05:06.413

为了使用 fetch_assoc 你需要使用 get_results 这会迫使你不使用你似乎不想做的绑定。[所以我相信用户uramihsayibok](http://php.net/manual/en/mysqli-stmt.bind-result.php#92505)在bind_result函数的php文档中很好地解释了你想要做的事情，特别是在这里： [http](http://php.net/manual/en/mysqli-stmt.bind-result.php#92505) ://php.net/manual/en/mysqli-stmt.bind-result.php#92505 . 他们解释了如何解决这个问题，以便将结果放入数组中。

# ruby - rbenv irb 历史没有保存

> ID：11137050
> 
> 赞同：18
> 
> 时间：2012-06-21T11:20:39.593
> 
> 标签：ruby, history, irb, rbenv

我通过[rbenv-installer](https://github.com/fesplugas/rbenv-installer)安装 ruby ​​。

当我使用 irb 控制台时，我可以通过在键盘上上下按来使用历史记录。当我从控制台退出并重新启动它时，我无法使用以前的历史记录。当我按下向上箭头按钮时，什么也没发生。

当我使用 rvm 时，此选项有效。如何在 rbenv 中打开它？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-21T11:27:23.463

我发现这种方法可以解决我的问题。在文件 ~/.irbrc 中写入：

```
require 'irb/ext/save-history'
#History configuration
IRB.conf[:SAVE_HISTORY] = 100
IRB.conf[:HISTORY_FILE] = "#{ENV['HOME']}/.irb-save-history" 
```

在这个问题中发现：[irb history not working](https://stackoverflow.com/questions/2065923/irb-history-not-working)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-01-22T19:04:32.737

如果 ~/.irbrc 不存在，则创建它，并向其中添加以下行：

```
IRB.conf[:SAVE_HISTORY] = 1000 
```

# html - 如何使非标准字体适用于 IE 浏览器？

> ID：11137051
> 
> 赞同：0
> 
> 时间：2012-06-21T11:20:47.433
> 
> 标签：html, css, fonts, font-face

在我的网站中，我在 css 中使用以下代码使用“TitilliumText14L”字体，

```
@font-face{
font-family: 'titilliumtext14l_400_wt';
src: url('fonts/titilliumtext14l_400_wt.eot');
src: local('☺'), url('fonts/titilliumtext14l_400_wt.woff') format('woff'), url('fonts/titilliumtext14l_400_wt.ttf') format('truetype'), url('fonts/titilliumtext14l_400_wt.svg') format('svg');
font-weight: normal;
font-style: normal; 
```

}

```
#content{
font-family: 'titilliumtext14l_400_wt';
font-size: 1em; 
```

}

但问题是这种字体在除 IE（所有版本）之外的所有浏览器中都可以正常工作。有关更多信息，我使用了“ [http://www.font2web.com/](http://www.font2web.com/) ”在线字体转换器。将 .ttf 文件转换为 .eot 文件用于 IE。

请让我知道我哪里出错了。我陷入了这个问题。所有建议和代码都将是可观的。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:23:13.343

看看字体松鼠 - [http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

他们的字体生成器生成了令人头疼的 IE 字体样式，甚至可以创建适当的字体文件。

# python - Python：我无法理解 XML 迭代的工作原理

> ID：11137053
> 
> 赞同：0
> 
> 时间：2012-06-21T11:21:00.887
> 
> 标签：python, xml, xml-parsing, lxml

多亏了[对我的 XML 解析问题的出色帮助，](https://stackoverflow.com/questions/11123536/python-error-with-basic-xml-parsing-with-lxml)我已经迷失了如何实际处理 XML 元素（使用 lxml）。

我的数据是 nmap 扫描的输出，由许多记录组成，如下所示：

```
<?xml version="1.0"?>
<?xml-stylesheet href="file:///usr/share/nmap/nmap.xsl" type="text/xsl"?>
<nmaprun scanner="nmap" args="nmap -sV -p135,12345 -oX 10.232.0.0.16.xml 10.232.0.0/16" start="1340201347" startstr="Wed Jun 20 16:09:07 2012" version="5.21" xmloutputversion="1.03">
  <host>
    <status state="down" reason="no-response"/>
    <address addr="10.232.0.1" addrtype="ipv4"/>
  </host>  
  <host starttime="1340201455" endtime="1340201930">
    <status state="up" reason="echo-reply"/>
    <address addr="10.232.49.2" addrtype="ipv4"/>
    <hostnames>
      <hostname name="host1.example.com" type="PTR"/>
    </hostnames>
    <ports>
      <port protocol="tcp" portid="135">
        <state state="open" reason="syn-ack" reason_ttl="123"/>
        <service name="msrpc" product="Microsoft Windows RPC" ostype="Windows" method="probed" conf="10"/>
      </port>
      <port protocol="tcp" portid="12345">
        <state state="open" reason="syn-ack" reason_ttl="123"/>
        <service name="http" product="Trend Micro OfficeScan Antivirus http config" method="probed" conf="10"/>
      </port>
    </ports>
    <times srtt="890" rttvar="2835" to="100000"/>
  </host>
</nmaprun> 
```

我正在考虑在何时生成一条线

*   端口 12345 已打开**或**
*   端口 135 已打开，12345 已打开

为此，我使用以下代码，并根据我对事情进展的理解对其进行了评论：

```
from lxml import etree
import time

scanTime = str(int(time.time()))
d = etree.parse("10.233.85.0.22.xml")

# find all hosts records
for el_host in d.findall("host"):
    # only process hosts UP
    if el_host.find("status").attrib["state"] =="up":

         # here comes a piece of code which sets the variable hostname
         # used later - that part works fine (removed for clarity)

         # get the status of port 135 and 12345
         Open12345 = Open135 = False
         for el_port in el_host.findall("ports/port"):
             # we are now looping thought the <port> records for a given <host>
             if el_port.attrib["portid"] == "135":
                Open135 = el_host.find("ports/port/state").attrib["state"] == "open"
             if el_port.attrib["portid"] == "12345":
                Open12345 = el_host.find("ports/port/state").attrib["state"] == "open"
                # I want to get for port 12345 the description, so I search
                # for <service> within a given port - only 12345 in my case
                # I just search the first one as there is only one
                # this is the place I am not sure I get right
                el_service = el_host.find("ports/port/service")
                if el_service.get("product") is not None:
                   Type12345 = el_host.find("ports/port/service").attrib["product"]

         if Open12345:
            print "%s %s \"%s\"\n" % (scanTime,hostname,Type12345)
         if not Open12345 and Open135:
            print "%s %s \"%s\"\n" % (scanTime,hostname,"NO_OfficeScan") 
```

我不确定的地方在评论中突出显示。使用此代码，我总是匹配*Microsoft Windows RPC*，就像我在端口 135 的记录中一样（它在 XML 文件中首先出现，在端口 12345 之前）。

我确信问题出在我理解 find 函数的方式上。它可能匹配所有内容，与我所在的位置无关。换句话说，没有递归（据我所知）。

在那种情况下，我如何编码“当您在端口 12345 的记录中时获取服务名称”的概念？

谢谢你。

* * *

**编辑和解决方案：**

我在我的代码中发现了问题。如果有一天有人偶然发现这个问题，我会重新发布整个脚本（输出来自 nmap，因此有人重用可能会很有趣 - 这是为了解释下面的大块代码:)：

```
#!/usr/bin/python

from lxml import etree
import time
import argparse

parser = argparse.ArgumentParser()
parser.add_argument("file", help="XML file to parse")
args = parser.parse_args()

scanTime = str(int(time.time()))
d = etree.parse(args.file)

f = open("OfficeScanComplianceDSCampus."+scanTime,"w")
print "Parsing "+ args.file

# find all hosts records
for el_host in d.findall("host"):
    # only process hosts UP
    if el_host.find("status").attrib["state"] =="up":
         # get the first hostname if it exists, otherwise IP
         el_hostname = el_host.find("hostnames/hostname")
         if el_hostname is not None:
            hostname = el_hostname.attrib["name"]
         else:
              hostname = el_host.find("address").attrib["addr"]

         # get the status of port 135 and 12345
         Open12345 = Open135 = False
         for el_port in el_host.findall("ports/port"):
             # we are now looping thought the <port> records for a given <host>
             if el_port.attrib["portid"] == "135":
                Open135 = el_port.find("state").attrib["state"] == "open"
             if el_port.attrib["portid"] == "12345":
                Open12345 = el_port.find("state").attrib["state"] == "open"
                # if port open get info about service
                if Open12345:
                   el_service = el_port.find("service")
                   if el_service is None:
                      Type12345 = "UNKNOWN"
                   elif el_service.get("method") == "probed":
                      Type12345 = el_service.get("product")
                   else:
                        Type12345 = "UNKNOWN"

         if Open12345:
            f.write("%s %s \"%s\"\n" % (scanTime,hostname,Type12345))
         if not Open12345 and Open135:
            f.write("%s %s \"%s\"\n" % (scanTime,hostname,"NO_OfficeScan"))
         if Open12345 and not Open135:
            f.write("%s %s \"%s\"\n" % (scanTime,hostname,"Non-Windows with 12345"))

f.close() 
```

我还将探讨 Dikei 和 Ignacio Vazquez-Abrams 给出的 xpath 理念。

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:28:21.997

使用 xpath 应该很容易

```
from lxml import etree
d = etree.parse("10.233.85.0.22.xml")

d.xpath('//port[@portid="12345"]/service/@name') // return name of service in portid=12345
d.xpath('//port[@portid="12345"]/service/@product') // return product in port with portid=12345 
```

# ajax - 如何在 HTML 中使用 AJAX 提交表单

> ID：11137054
> 
> 赞同：0
> 
> 时间：2012-06-21T11:21:09.127
> 
> 标签：ajax

我的网络服务在 8080 端口上运行。这是在 C++ 中使用 gSoap 开发的。我还在我的 C++ 代码中实现了 post/get 方法。现在我想使用带有 POST 的 AJAX 提交表单。并且还将一些数据发送到网络服务。我已经为提交表单编写了以下代码。

```
$.ajax({
    type: "POST",
    url: "http://localhost:8080/myWebservice",
    cache: false,
    data: MyData,
    success: function () {
             alert("send Successful......");
    }      
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:33:53.523

据我所知，您应该将该调用绑定到您的任何点击或任何事件。或在任何函数中调用它。你的代码是正确的。

# c++ - 通过静态函数调用对象的函数

> ID：11137055
> 
> 赞同：1
> 
> 时间：2012-06-21T11:21:09.700
> 
> 标签：c++

你什么时候可以使用这样的类：

```
class IteratorFacadeAccess 
{
public:
    template<class Ret, class T>
    static Ret dereference(const T& t) 
    {
        return t.dereference();
    }
}; 
```

我在我正在使用的 api 中注意到它，但我不明白它的目的。

# c - 从内核到用户空间 (DMA)

> ID：11137058
> 
> 赞同：7
> 
> 时间：2012-06-21T11:21:16.850
> 
> 标签：c, networking, linux-kernel, kernel, dma

最近，我阅读了很多关于 10gb/s 网卡、它们的 DMA 以及 linux 内核（10/100 mb/s 网卡）处理数据的方式的网站和书籍，我想到了一些问题。

将 10GB/s 的数据流从 NIC 发送到用户空间的最简单方法是什么（我假设能够以相同的速率处理用户空间中的数据）。

和

您认为在用户空间内实现 DMA 缓冲区以直接从那里读取原始数据（并且显然以相同的速率处理它们）是一个好主意吗？

还是我没有想到的更好的解决方案：/

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T13:24:18.170

最简单的事情就是使用 Linux 的普通套接字。它可能不是最有效的，但它是最简单的。

有一些框架可以非常有效地在用户空间中接收和传输数据。它们将相同的缓冲区映射到 NIC (DMA) 和进程，因此不需要复制数据。
这些框架完全绕过内核——您必须直接与 NIC 交互。此类框架有，例如[PF-RING](http://www.ntop.org/products/pf_ring/)和[Netmap](http://info.iet.unipi.it/~luigi/netmap/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T08:15:07.733

我还建议看一下 PFQ 框架（[https://github.com/pfq/PFQ](https://github.com/pfq/PFQ)和[http://netgroup.iet.unipi.it/software/pfq/](http://netgroup.iet.unipi.it/software/pfq/)），它建立在 netmap 和pf_ring 概念并隐藏它们以允许在用户空间中进行简单的多核数据包处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:40:08.033

我记得在渥太华 Linux 研讨会上听过英特尔的一些人发表的演讲，该演讲完全实现了您的建议。当他们测量结果与普通套接字接口时，他们惊讶地发现，对于许多工作负载，这种方法的性能并没有比套接字接口更好，有时更差（！）。

我搜索但现在无法在网上找到确切的论文，但也许这会给你一个提示......

# jquery - 如何让我的多个轮播在一页上工作？

> ID：11137060
> 
> 赞同：2
> 
> 时间：2012-06-21T11:21:33.913
> 
> 标签：jquery, carousel

我在一页上有两个轮播，但不幸的是它们相互复制。

[http://jsfiddle.net/seanjacob/tB6y5/](http://jsfiddle.net/seanjacob/tB6y5/)

任何帮助我指出正确方向的帮助将不胜感激。

我不想使用外部插件。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:26:21.943

您将点击事件范围更改为高

```
$('.c_next',carousel ) 
```

和

```
$('.c_prev',carousel ) 
```

[小提琴](http://jsfiddle.net/tB6y5/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:30:01.763

而不是这些行

```
$('.c_next')
$('.c_prev')
$('.c_anchor') 
```

用这个

```
$(this).find('.c_next')
$(this).find('.c_prev')
$(this).find('.c_anchor')

$.fn.wf_carousel = function () {
    var carousel = $(this);

    if (carousel) {        

        var c_mask = $(carousel).children('.c_mask'),
        c_width = $(c_mask).outerWidth(),
        c_overflow = $(c_mask).children('.c_overflow'),
        c_slides = $(c_overflow).children('.c_slide'),
        c_count = $(c_slides).length,
        c_nav = $(carousel).children('.c_nav');

        $(c_overflow).children('.c_slide:nth-child(1)').addClass('active');
        $(c_nav).children('.c_anchor:nth-child(1)').addClass('active');

        $(this).find('.c_next').click(function (event) {
            c_current();

            if (c_position == c_count) { c_position = 0; }

            c_update(c_position + 1);

            $(c_overflow).stop(true, false).animate({ left: '-' + (c_position) * c_width + 'px' }, 'slow');
        });

         $(this).find('.c_prev').click(function (event) {
            c_current();

            if (c_position == 1) { c_position = c_count + 1; }

            c_update(c_position - 1);

            $(c_overflow).stop(true, false).animate({ left: '-' + (c_position - 2) * c_width + 'px' }, 'slow');
        });

        $(this).find('.c_anchor').click(function (event) {
            c_current()

            c_position = $(this).index();

            c_update(c_position + 1);

            $(c_overflow).stop(true, false).animate({ left: '-' + (c_position) * c_width + 'px' }, 'slow');

        });

    }

    function c_current() {
        c_active = $(c_overflow).children('.c_slide.active');
        c_activeAnchor = $(c_nav).children('.c_anchor.active');
        c_position = $(c_active).index();
        c_position = c_position + 1;
    }

    function c_update(c_position) {
        $(c_active).removeClass('active');
        $(c_activeAnchor).removeClass('active');
        $(c_overflow).children('.c_slide:nth-child(' + c_position + ')').addClass('active');
        $(c_nav).children('.c_anchor:nth-child(' + c_position + ')').addClass('active');
    }
};

$('#c_main').wf_carousel();
$('#c_second').wf_carousel();
​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T11:37:13.367

问题是，即使有人点击另一个轮播，您的点击事件也会被执行。

检查这个更新的小提琴：

[http://jsfiddle.net/tB6y5/3/](http://jsfiddle.net/tB6y5/3/)

我变了

```
$('.c_next').click(...) 
```

到

```
carousel.find('.c_next').click(...) 
```

与其他点击事件相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T11:39:26.817

两个轮播中的所有元素都具有相同的类。您的脚本仅通过查看它们的类来选择元素，并且由于两个轮播共享相同的类，因此它将在两个轮播中执行您的脚本。有很多方法可以解决这个问题。您可以向包含“链接”的 's添加一个`data-...`属性：`div`

```
<div class="c_nav">
    <div class="c_anchor" data-target="c_main">1</div>
    <div class="c_anchor" data-target="c_main">2</div>
    <div class="c_anchor" data-target="c_main">3</div>
    <div class="c_anchor" data-target="c_main">4</div>
</div>
<div class="c_next" data-target="c_main">next</div>
<div class="c_prev" data-target="c_main">prev</div> 
```

然后您可以使用自己的脚本并对其进行编辑以针对以下内容：

```
var carTarget = '#' + $(this).attr('data-target');

//let your functions apply to $(carTarget).animate( etc. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T11:40:25.473

如果您已经在变量中定义了 $(element)，则不需要一遍又一遍地使用它。这是多余的。

## *[工作和净化演示](http://jsfiddle.net/roXon/LctU6/)*

并使用：

```
carousel.on('click','.your_class', function (event) { 
```

你的代码：

```
/**
* @author Sean Jacob
* @extends jquery
*/

$.fn.wf_carousel = function () {
    var carousel = $(this);

    if (carousel) {        

        var c_mask = carousel.children('.c_mask'),
        c_width = c_mask.outerWidth(),
        c_overflow = c_mask.children('.c_overflow'),
        c_slides = c_overflow.find('.c_slide'),
        c_count = c_slides.length,
        c_nav = carousel.children('.c_nav');

        c_overflow.children('.c_slide:nth-child(1)').addClass('active');
        c_nav.children('.c_anchor:nth-child(1)').addClass('active');

        carousel.on('click','.c_next', function (event) {
            c_current();

            if (c_position == c_count) { c_position = 0; }

            c_update(c_position + 1);

            c_overflow.stop(true, false).animate({ left: '-' + (c_position) * c_width + 'px' }, 'slow');
        });

        carousel.on('click','.c_prev', function (event) {
            c_current();

            if (c_position == 1) { c_position = c_count + 1; }

            c_update(c_position - 1);

            c_overflow.stop(true, false).animate({ left: '-' + (c_position - 2) * c_width + 'px' }, 'slow');
        });

        carousel.on('click','.c_anchor', function (event) {
            c_current()

            c_position = $(this).index();

            c_update(c_position + 1);

            c_overflow.stop(true, false).animate({ left: '-' + (c_position) * c_width + 'px' }, 'slow');

        });

    }

    function c_current() {
        c_active = c_overflow.children('.c_slide.active');
        c_activeAnchor = c_nav.children('.c_anchor.active');
        c_position = c_active.index();
        c_position = c_position + 1;
    }

    function c_update(c_position) {
        c_active.removeClass('active');
        c_activeAnchor.removeClass('active');
        c_overflow.children('.c_slide:nth-child(' + c_position + ')').addClass('active');
        c_nav.children('.c_anchor:nth-child(' + c_position + ')').addClass('active');
    }
};

$('#c_main').wf_carousel();
$('#c_second').wf_carousel(); 
```

# perl - 从 Perl 中的 SGML DTD 获取所有信息

> ID：11137061
> 
> 赞同：2
> 
> 时间：2012-06-21T11:21:33.957
> 
> 标签：perl, sgml

我想从 SGML DTD（元素、属性等）中获取信息。我试图在模块 use SGML::DTD 的帮助下获取元素，但它不起作用。假设，如果 DTD 包含具有不同属性的重复元素，我只会得到一个元素。

我试过这个：`@allelements=$dtd->get_elements(0);`

是否有任何其他模块可以用来从 SGML DTD 和 SGML 解析器中检索值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:28:15.373

另一个可能工作的模块是 SGML-DTDParse：

*   [SGML-DTDParse](http://search.cpan.org/dist/SGML-DTDParse/bin/dtdparse)

# iphone - 更新本地通知的触发日期并取消之前的通知

> ID：11137066
> 
> 赞同：5
> 
> 时间：2012-06-21T11:22:18.330
> 
> 标签：iphone, date, uilocalnotification

我知道[这里](https://stackoverflow.com/questions/5866146/remove-a-local-notification-from-iphone-by-date)和[那里有](https://stackoverflow.com/questions/6340664/delete-a-particular-local-notification)一些关于如何删除可能是全部或特定通知的本地通知的问题。我还浏览了[本地通知类参考](https://developer.apple.com/documentation/uikit/uilocalnotification)，发现了一些方法，如重复时间间隔、触发日期、警报正文、时区等……但我无法找到有关如何修改触发日期的信息已经设置好了。假设用户使用今天的日期和下午 4:50 的时间设置通知，但如果用户希望修改设置的日期/时间，则发生的情况是通知在两种情况下都被触发。就编程道德而言，这是一个错误！

实际上我想要的是必须取消以前的通知，即必须将日期修改为已编辑的通知，并且应该在新日期设置和触发通知。

这就是我设置通知的方式，示例代码：

```
- (void)setNotification
{
    //Set notification after confirmation of saved data

    Class cls = NSClassFromString(@"UILocalNotification");
    reminderNotification = [[cls alloc] init];

    if (cls != nil) 
    {        
       NSDateFormatter *dateFormat = [[[NSDateFormatter alloc]init]autorelease];
       [dateFormat setDateFormat:@"YYYY-MM-dd HH:mm:ss"];
       NSDate *notificationDate = [dateFormat dateFromString:textField2.text];
       reminderNotification.fireDate = notificationDate;
       reminderNotification.timeZone = [NSTimeZone defaultTimeZone];
       NSString *reminderText = [NSString stringWithFormat:@"%@ 's %@ on %@",textField.text,textField1.text,strDate];
       reminderNotification.alertBody = reminderText;
       reminderNotification.alertAction = @"View";
       reminderNotification.soundName = @"lazy_afternoon.mp3";
       reminderNotification.applicationIconBadgeNumber = 1;
       NSDictionary *userDict = [NSDictionary dictionaryWithObject:self.textField1.text forKey:kReminder];
       reminderNotification.userInfo = userDict;
       [[UIApplication sharedApplication] scheduleLocalNotification:reminderNotification];
       [reminderNotification release];
    }
} 
```

如何处理这个任务？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-21T13:14:17.163

**使用此方法安排 Notification ，其中 notificationID 必须是唯一的**

```
 -(void) scheduleNotificationForDate:(NSDate *)date AlertBody:(NSString *)alertBody ActionButtonTitle:(NSString *)actionButtonTitle NotificationID:(NSString *)notificationID{

    UILocalNotification *localNotification = [[UILocalNotification alloc] init];
    localNotification.fireDate = date;
    localNotification.timeZone = [NSTimeZone localTimeZone];
    localNotification.alertBody = alertBody;
    localNotification.alertAction = actionButtonTitle;
    localNotification.soundName = @"yourSound.wav";

    NSDictionary *infoDict = [NSDictionary dictionaryWithObject:notificationID forKey:notificationID];
    localNotification.userInfo = infoDict;

    [[UIApplication sharedApplication] scheduleLocalNotification:localNotification];
} 
```

**使用此方法取消具有该通知 ID 的特定通知**

```
- (void)cancelLocalNotification:(NSString*)notificationID {
    //loop through all scheduled notifications and cancel the one we're looking for
    UILocalNotification *cancelThisNotification = nil;
    BOOL hasNotification = NO;

    for (UILocalNotification *someNotification in [[UIApplication sharedApplication] scheduledLocalNotifications]) {
        if([[someNotification.userInfo objectForKey:notificationID] isEqualToString:notificationID]) {
            cancelThisNotification = someNotification;
            hasNotification = YES;
            break;
        }
    }
    if (hasNotification == YES) {
        NSLog(@"%@ ",cancelThisNotification);
        [[UIApplication sharedApplication] cancelLocalNotification:cancelThisNotification];        
    }
} 
```

***参考：*** [UILocalNotification](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T11:35:03.073

设置通知后，编辑它的唯一方法是取消旧通知并重新创建另一个通知，因此您可以这样做，搜索现有通知并取消它。

```
for(UILocalNotification *aNotif in [[UIApplication sharedApplication] scheduledLocalNotifications]) {
        if([[aNotif.userInfo objectForKey:@"id"] isEqualToString:nId]) {
            [[UIApplication sharedApplication]cancelLocalNotification:aNotif];
        }
    } 
```

然后创建新通知。

# html - 使响应式网站在 IE7 和 IE8 中完美运行的最佳程序？

> ID：11137073
> 
> 赞同：0
> 
> 时间：2012-06-21T11:22:47.097
> 
> 标签：html, internet-explorer, responsive-design

我想知道在不影响任何设计的情况下，让 HTML5 响应式网站在 IE7 和 IE8 中正常运行的最佳方法。

我已经[在 IE7 和 IE8 中解决了响应式网站问题，](https://stackoverflow.com/questions/10387569/responsive-website-issue-in-ie7-and-ie8)但除了 respond.js，还有其他方法可以实现吗？

此外，如果我在块中使用了一些圆角和阴影，如果我使用 css3，它在较低版本的 IE9 中将不起作用。在处理这些要求时，有什么最好的方法可以遵循？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:20:04.247

如果您不想使用[优雅降级](http://en.wikipedia.org/wiki/Fault-tolerant_system)原则，您将需要所谓的 polyfills 用于您正在使用的所有技术。这是关于基本上所有这些的一个[很好的概述。](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)

所以，如果你想让 IE old 支持媒体查询，你需要一个媒体查询 polyfill，respond.js 就是其中之一。您还可以使用[Modernizr](http://modernizr.com/)，它包含一个 MQ polyfill。

# nunit - Assert.AreEqual(..) 失败

> ID：11137074
> 
> 赞同：0
> 
> 时间：2012-06-21T11:22:51.903
> 
> 标签：nunit

我有

```
var xmlConfiguration = InitTestConfiguration();
var xmlConfiguration2 = InitTestConfiguration();
Assert.AreEqual(xmlConfiguration, xmlConfiguration2); 
```

我得到这个错误：

```
Expected: <XmlConfiguration`1[Tests.TestConfiguration]>
But was:  <XmlConfiguration`1[Tests.TestConfiguration]> 
```

where`XmlConfiguration`是一个包含字符串和整数的类。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:29:06.833

equals 检查相同的引用（当您创建两个具有相同值的不同对象时 - 不同的引用），并且通过您的示例，我猜您正在尝试检查状态是否相等...

您可以创建一个包装 XmlConfiguration 的类并实现（通过覆盖） Equal 方法，然后它将起作用

# sql - 使用具有相同 ID 行的表中的列来形成字符串值的最佳方法是什么？

> ID：11137075
> 
> 赞同：0
> 
> 时间：2012-06-21T11:22:56.830
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在使用 SQL Server 2008。

这是我的桌子。

**表 A**

```
 Aid int pk
 col2
 col3
 XYZID int 
```

**表 B**

```
 Bid int pk
 XYZID int
 Col2
 Col3 
 Col4
 seq -- (Sequence ) 
```

`Table B`会是这样

```
seq   col2    |XYZID|Bid |col3| col4 
===============================================
  1   foo     | 1   |  1 | 12 | wqw
  3   bar     | 1   | 10 | 77 | kikk
  2   foobar  | 1   |  2 |  w | ed
  1   barfoo  | 2   |  4 |  e | dwe
  2   asdsad  | 2   |  5 |  e | e 
```

`Table A`是主表，基于`XYZID`A

我需要使用 col from `TableB`with生成一个字符串值`XYZID and Seq`。

我需要使用带有 XYZID 和 Seq 的 TableB 中的 col 生成一个字符串值。

例如：xyzid= 1

我期望 ：`foo-12-wqw#foobar-w-ed#bar-77-kikk`

基于`Sequence foo-1,foobar-2,bar-3`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T12:34:12.623

对于`XYZID = 1`.

```
select stuff((select '#'+col2+'-'+col3+'-'+col4
              from TableB
              where XYZID = 1
              order by seq
              for xml path(''), type).value('.', 'nvarchar(max)'), 1, 1, '') 
```

对于 TableA 中的所有行：

```
select stuff((select '#'+col2+'-'+col3+'-'+col4
              from TableB as B
              where A.XYZID = B.XYZID
              order by seq
              for xml path(''), type).value('.', 'nvarchar(max)'), 1, 1, '')
from TableA as A 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T12:58:33.593

DDL：

```
drop table tblx;
create table tblx
(
seq int,
col2 varchar(50),
xyzid int,
bid int,
col3 varchar(50),
col4 varchar(50)
); 
```

数据：

```
insert into tblx(seq,col2,xyzid,bid,col3,col4) values
(1,   'foo'     , 1,   1,  '12', 'wqw'),
(3,   'bar'     , 1,   10, '77', 'kikk'),
(2,   'foobar'  , 1,   2,  'w',  'ed'),
(1,   'barfoo'  , 2,   4,  'e',  'dwe'),
(2,   'asdsad'  , 2,   5,  'e',  'e'); 
```

使用 CTE 方法：

```
with a(xyzid, seq, x) as
(
select xyzid, seq, cast(col2 + '-' + col3 + '-' + col4 as varchar(max)) as x
from tblx
where seq = 1
union all
select t.xyzid, t.seq, a.x + '#' + (t.col2 + '-' + t.col3 + '-' + t.col4)
from tblx t
join a on a.xyzid = t.xyzid and t.seq = a.seq + 1
)
select xyzid, rtrim(x) as x 
from a w
where seq = (select MAX(seq) from a where xyzid = w.xyzid)
order by xyzid; 
```

输出：

```
xyzid       x
----------- -----------------------------------
1           foo-12-wqw#foobar-w-ed#bar-77-kikk
2           barfoo-e-dwe#asdsad-e-e

(2 row(s) affected) 
```

* * *

使用主表（例如表 A）只需要对查询进行简单的修改：

```
with a(xyzid, seq, x) as
(
select xyzid, seq, cast(col2 + '-' + col3 + '-' + col4 as varchar(max)) as x
from tblx
where seq = 1
union all
select t.xyzid, t.seq, a.x + '#' + (col2 + '-' + col3 + '-' + col4)
from tblx t
join a on a.xyzid = t.xyzid and t.seq = a.seq + 1
)
select w.xyzid, rtrim(x) as x 
from tblA w -- just add this main table
left join a on a.xyzid = w.xyzid 
               and seq = (select MAX(seq) from a where xyzid = w.xyzid)
order by xyzid; 
```

数据：

```
create table tblA
(
aid int identity(1,1) primary key,
col2 varchar(50),
col3 varchar(50),
xyzid int
);

insert into tblA(col2,col3,xyzid) values
('','',1),
('','',2),
('','',3); 
```

输出：

```
xyzid       x
----------- ------------------------------------
1           foo-12-wqw#foobar-w-ed#bar-77-kikk
2           barfoo-e-dwe#asdsad-e-e
3           NULL

(3 row(s) affected) 
```

* * *

如果 seq 字段不连续和/或不唯一，请放置一个序列器：

```
with sequencer as
(
select 
    xyzid, ROW_NUMBER() over(partition by xyzid order by seq) as seq
    , col2, col3, col4 
from tblx 
)
,a(xyzid, seq, x) as
(
select xyzid, seq, cast(col2 + '-' + col3 + '-' + col4 as varchar(max)) as x
from sequencer
where seq = 1
union all
select t.xyzid, t.seq, a.x + '#' + (col2 + '-' + col3 + '-' + col4)
from sequencer t
join a on a.xyzid = t.xyzid and t.seq = a.seq + 1
)
select w.xyzid, rtrim(x) as x 
from tblA w
left join a on a.xyzid = w.xyzid 
            and seq = (select MAX(seq) from a where xyzid = w.xyzid)
order by xyzid; 
```

示例非连续序列：

```
insert into tblx(seq,col2,xyzid,bid,col3,col4) values
(1,   'foo'     , 1,   1,  '12', 'wqw'),
(5,   'bar'     , 1,   10, '77', 'kikk'),
(3,   'foobar'  , 1,   2,  'w',  'ed'),
(1,   'barfoo'  , 2,   4,  'e',  'dwe'),
(3,   'asdsad'  , 2,   5,  'e',  'e'); 
```

输出（仍然相同）：

```
xyzid       x
----------- --------------------------------------
1           foo-12-wqw#foobar-w-ed#bar-77-kikk
2           barfoo-e-dwe#asdsad-e-e
3           NULL

(3 row(s) affected) 
```

关于速度，它仍然很快。与 XML 方法相比，CTE 查询成本为 5%，即 95%

# java - 在 Eclipse Javadoc 中显示方法参数而不定义 @Param 注解

> ID：11137076
> 
> 赞同：0
> 
> 时间：2012-06-21T11:22:58.070
> 
> 标签：java, eclipse, parameters, comments, javadoc

我们使用 Eclipse 3.7 来开发我们的 Java Web 应用程序。目前，我们使用 @param-Annotation 为每个单独的 Param 使用参数注释所有 Java 方法。主要优点是我们在 Eclipse 的 javadoc 视图中获得了所有方法参数的列表。我们现在想删除所有这些@param javadoc 注释，因为我们不需要它们（javadoc 中的方法列表除外）。我的问题是，是否有一种方法可以在不使用@param 注释此方法的每个参数的情况下获取方法中所有参数的列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:04:51.417

对于使用 Javadoc 的方法，您会得到以下信息：

![在此处输入图像描述](../Images/7802e631ca5008ca60cc4b26a890fc3d.png)

对于没有 Javadoc 的方法，您会在 Javadoc 视图中获得以下输出。我用红色矩形标记了参数。所以确实没有明确的**参数**段落，但您仍然可以看到方法参数。按下 Ctrl+Shift 时，您也会看到它们。

![在此处输入图像描述](../Images/a5ec7299b81847077eafbcc671ce88be.png)

# iphone - iOS：NSUserDefaults 是否与 iCloud 同步？

> ID：11137078
> 
> 赞同：0
> 
> 时间：2012-06-21T11:23:05.690
> 
> 标签：iphone, ios, nsuserdefaults, icloud

审查我的应用程序的 Apple 审查团队声称大量数据由 iCloud 支持（不应支持这些数据）。所以我试图找出哪些文件对此负责。也许是保存 NSUserDefaults 的 plist？iCloud 是否备份 NSUserDefaults？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:50:45.280

NSUserDefaults 真的不能太大而不能成为您拒绝的原因。此外，它们没有备份。

我建议您检查您的文档文件夹 - 这是真正备份到 iCloud 的内容。

# javascript - 单击时如何将css属性应用于选项卡？

> ID：11137081
> 
> 赞同：0
> 
> 时间：2012-06-21T11:23:13.553
> 
> 标签：javascript, css, html

```
<div class="abcd">
    <article class="xyz">
        <a href="#"><img src="#"></a>
        <hgroup><h1>Make it Personal</h1></hgroup>
    </article>
</div> 
```

我在 div 中有 6 个以上的“文章”标签。我将它们用作标签。我有 6 页，我在所有 6 页上都应用了相同的代码。我希望它们在活动时突出显示。单击后，他们将转到提供上述相同代码的 6 个页面之一。我想在选项卡处于活动状态时应用一些 CSS 属性。

如何使用简单的 javascript 实现这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-21T11:34:42.600

**这是一些可能对您有所帮助的代码。**

```
 html,body {
        margin:0;
        padding:0;
        color:#222;
        background:#FFF;
    }
    body {
        padding:10px;
        font:76%/150%  Arial, Helvetica, sans-serif;
    }
    a {
        text-decoration: none;
        outline: 0; /* removes dotted border around a:active from Firefox */
    }
    #nav {
        margin:0;
        padding:0;
        background:#708090 url(nav_bg.jpg) 0 0 repeat-x;
        width:100%;
        float:left;
        border:1px solid #191970;
        border-width:1px 1px 1px 0;
    }
    #nav li {
        display:inline;
        padding:0;
        margin:0;
    }
    #nav a:link,
    #nav a:visited {
        color:#000;
        background:#708090;
        padding:20px 40px 4px 10px;
        float:left;
        width:auto;
        border-right:1px solid #191970;
        text-decoration:none;
        font:bold 1em/1em Arial, Helvetica, sans-serif;
        text-transform:uppercase;
        text-shadow: 2px 2px 2px #555;
    }
    #nav a:hover {
        color:#fff;
        background:#191970;
    }
    #nav li:first-child a {
        border-left:1px solid #191970;
    }
    #home #nav-home a,
    #about #nav-about a,
    #contact #nav-contact a {
        background:#00FFFF; /* Active Page Color */
        color:#000;
        text-shadow:none;
    }
    #home #nav-home a:hover,
    #about #nav-about a:hover,
    #contact #nav-contact a:hover {
        background:#FFF;
        color:#000;
    }
    #nav a:active {
        background:#7FFF00; /*turns this color briefly when link is selected*/
        color:#000;
    }
</style>
</head>
<body id="about">
<ul id="nav">
    <li id="nav-home"><a href="#">Home</a></li>
    <li id="nav-about"><a href="#">About</a></li>
    <li id="nav-contact"><a href="#">Contact</a></li>
</ul>
</body>
</html> 
```

[提琴手](http://jsfiddle.net/R3Rhv/1/)

# java - 为什么我的真正简单的 Java 程序还没有做任何事情有时可以工作，有时却不行？

> ID：11137084
> 
> 赞同：3
> 
> 时间：2012-06-21T11:23:23.203
> 
> 标签：java, eclipse, swing, jcombobox

我刚刚开始使用 Java，并且以前只使用过 PHP - 发现我很难理解面向对象的东西。我正在使用 Eclipse IDE。

我正在尝试制作一个程序来告诉你你在另一个星球上的体重——看起来很简单

到目前为止，我所做的只是在 Swing 中制作一半的界面（这就是所谓的吗？）

有时我运行它，它会像我预期的那样出现，带有标题、文本框等......其他时候（绝对没有进行任何更改），它只是出现一个空白屏幕 ![在此处输入图像描述](../Images/25360d48ea2d1b0e44467402293d8d44.png)

该图像显示了它工作时的样子。当它不工作时，就没有对象。它的工作时间约为 20%。

**我认为这可能是因为我的下拉菜单 - 或 JComboBox，这太让人头疼了 - Eclipse 让我在每次提到 JComboBox 后添加“<Object>” - 它说“JComboBox 是原始类型。参考泛型类型 JComboBox 应该被参数化”**

我不知道为什么会这样，而且我可能真的很厚，如果这是一个愚蠢的问题，对不起，但是我该如何解决这个问题，我的代码有什么问题？

```
package calc;

import javax.swing.*;
import java.awt.*;

public class View extends JFrame {

static String titleText = "Calculate your Mass on another Plannet";

public View(){
    super(titleText);
    setSize(500,400);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setVisible(true);

    FlowLayout flo = new FlowLayout();
    setLayout(flo);

    JPanel inputData = new JPanel();

    //Labels
    JLabel lblTitle = new JLabel (titleText, JLabel.CENTER);
    lblTitle.setFont(new Font("Arial", Font.BOLD, 24));
    JLabel lblInputMass = new JLabel ("Weight", JLabel.LEFT);
    JLabel lblInputUnits = new JLabel("Units");     

    //Input Boxes and Lists
    JTextField txtInputMass = new JTextField(5);

    JComboBox<Object> comInputUnits;
    String arrUnits[] = {"Kilos", "Stone", "Pounds"};
    comInputUnits = new JComboBox<Object>(arrUnits);
    comInputUnits.setSelectedIndex(1);

    //Buttons
    JButton btnCalculate = new JButton("Calculate");

    //Append objects
    add(lblTitle);
    inputData.add(lblInputMass);
    inputData.add(txtInputMass);
    inputData.add(lblInputUnits);
    inputData.add(comInputUnits);
    inputData.add(btnCalculate);

    add(inputData);

}
/**
 * @param args
 */
public static void main(String[] args) {
    View sal = new View();

}

} 
```

抱歉，这是一个很长的问题，我将非常感谢任何建议或答案，正如我所说，我对大麦了解 Java 的任何知识，并且刚刚开始 - 谢谢 :)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T11:28:35.117

你应该

*   [仅在事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)内操作 Swing 组件；
*   `setVisible(true)`只有在所有组件都添加到框架后才调用；
*   只用一个*n*拼出*Planet*，尽管这不太重要。

 *“ `<Object>`Eclipse 让你添加”被称为泛型类型。阅读[泛型教程](http://docs.oracle.com/javase/tutorial/extra/generics/index.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T11:29:45.703

您需要在 EventDispatchThread (EDT) 内完成所有处理 Swing 组件的工作。

将调用包装到`new View()`调用中`SwingUtilities.invokeAndWait()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T12:13:45.347

总是打电话`pack()`。这个版本工作可靠（至少出现）。

```
import javax.swing.*;
import java.awt.*;

public class View extends JFrame {

    static String titleText = "Calculate your Weight on another Planet";

    public View(){
        super(titleText);
        // not now!
        //setSize(500,400);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        //setVisible(true);

        FlowLayout flo = new FlowLayout();
        setLayout(flo);

        JPanel inputData = new JPanel();

        //Labels
        JLabel lblTitle = new JLabel (titleText, JLabel.CENTER);
        lblTitle.setFont(new Font("Arial", Font.BOLD, 24));
        JLabel lblInputMass = new JLabel ("Weight", JLabel.LEFT);
        JLabel lblInputUnits = new JLabel("Units");     

        //Input Boxes and Lists
        JTextField txtInputMass = new JTextField(5);

        JComboBox comInputUnits;
        String arrUnits[] = {"Kilos", "Stone", "Pounds"};
        comInputUnits = new JComboBox(arrUnits);
        comInputUnits.setSelectedIndex(1);

        //Buttons
        JButton btnCalculate = new JButton("Calculate");

        //Append objects
        add(lblTitle);
        inputData.add(lblInputMass);
        inputData.add(txtInputMass);
        inputData.add(lblInputUnits);
        inputData.add(comInputUnits);
        inputData.add(btnCalculate);

        add(inputData);

        // force the container to layout the components.  VERY IMPORTANT!
        pack();
        setSize(500,400);
        setVisible(true);
    }

    public static void main(String[] args) {
        // This is what JB Nizet was alluding to..
        // 'start (or update) the GUI on the EDT'
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new View();
            }
        });
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-21T11:34:16.907

试试这个：

```
public static void main(String[] args) {
            View sal = new View();
            sal.setSize(500, 400);
            sal.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            sal.setVisible(true); 
```

}

在构造函数之后注释这些行：

```
super(titleText);
setSize(500,400);
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
setVisible(true); 
```

希望有帮助。*

# jquery - jQuery在鼠标悬停时水平滚动文本以在内容末尾停止

> ID：11137089
> 
> 赞同：0
> 
> 时间：2012-06-21T11:23:33.567
> 
> 标签：jquery

我正在尝试使用这个小提琴[http://jsfiddle.net/KpuyT/3/](http://jsfiddle.net/KpuyT/3/)但是，我不希望 div 无限滚动 - 我希望滚动在文本到达结尾时立即停止然后继续鼠标移出将其重置回原来的位置。我尝试了以下方法：

```
$(function(){
    var scroll_text,
        do_scroll = false;

    $('div.container').hover(
        function () {
            var $elmt = $(this);
            if ($elmt.find('div.title-holder a').width() > 130) {
                scroll_text = setInterval(function(){scrollText($elmt);}, 30);
                do_scroll = true;
            }
        },
        function () {
            if (do_scroll) {
                clearInterval(scroll_text);
                $(this).find('div.title-holder a').css({
                    left: 0
                });
            }
        },
        function (){
            $('div.container').scroll( function() {
                if ( $('div.container').scrollLeft() == ($('div.title-holder a').width() - $('div.container').width())) {
                    do_scroll = false;
                }
            });
        }
    );

    var scrollText = function($elmt){
        var left = $elmt.find('div.title-holder a').position().left - 1;
        left = -left > $elmt.find('div.title-holder a').width() ? $elmt.find('div.title-holder').width() : left;
        $elmt.find('div.title-holder a').css({
            left: left
        });
    };
}); 
```

但它不起作用。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:52:33.950

根据发布的小提琴，这可以解决：

```
//move

$('div.container').hover(function(){
var $elmt = $(this);
$elmt.find('div.title-holder a').animate({
    left: '-'+ ($elmt.find('div.title-holder a').width() - $('.container').width())
  }, 5000);    
});

//and return to 0

$('div.container').mouseleave(function(){
var $elmt = $(this);
$elmt.find('div.title-holder a').animate({
    left: 0
  }, 5000);    
}); 
```

[小提琴](http://jsfiddle.net/LRTEJ/)

# android - 如何将触摸侦听器传递给自定义视图以进行拖放？

> ID：11137090
> 
> 赞同：6
> 
> 时间：2012-06-21T11:23:35.723
> 
> 标签：android, ontouchlistener, custom-view

我有一个关于处理的问题。我正在`touch events`将`CustomView`自定义视图动态添加到布局（即 FrameLayout）。那些具有用于在角落拉点的 touchListener 的自定义视图（如下图所示）。除此之外，我必须在屏幕上拖放整个视图，如果用户触摸除了那些角点（图像中的颜色区域）以外的其他点，则必须拖放视图，否则，如果用户触摸之外查看我不想触发任何触摸监听器。

![检查此图像](../Images/e08b26ee67a194ae63e62a1617ada1f0.png)

我可以通过使用此代码来提取这些点

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:

        if (topTouchArea.contains(event.getX(), event.getY())) {                
            currentTouch = TOUCH_TOP;
        } else if (RightTouchArea.contains(event.getX(),event.getY())) {                
            currentTouch = TOUCH_RIGHT;
        } else if (LeftTouchArea.contains(event.getX(),event.getY())) {            
            currentTouch = TOUCH_LEFT;
        } else {
            return false; //Return false if user touches none of the corners
        }
        return true; 
    case MotionEvent.ACTION_MOVE:

        switch (currentTouch) {
        case TOUCH_TOP:              
             top.x = event.getX();
             top.y = event.getY();                            
             invalidate();
             return true;
        case TOUCH_RIGHT:                
             Right.x = event.getX();
             Right.y = event.getY();                
             invalidate();
             return true;
        case TOUCH_LEFT:                 
             Left.x = event.getX();
             Left.y = event.getY();             
             invalidate();
             return true;       
        }         

    case MotionEvent.ACTION_UP:

        switch (currentTouch) {
        case TOUCH_TOP:
             top.x = event.getX();
             top.y = event.getY();                
             invalidate();
             currentTouch = NONE;
             return true;
        case TOUCH_RIGHT:
             Right.x = event.getX();
             Right.y = event.getY();             
             invalidate();
             currentTouch = NONE;
             return true;
        case TOUCH_LEFT:
            Left.x = event.getX();
             Left.y = event.getY();               
             invalidate();
             currentTouch = NONE;
             return true;      
        }         
        return false;
    }
    return false;
} 
```

我怎样才能实现这种拖放以及CustomView的上述字符......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T10:20:37.753

我会使用一些线性代数来解决这个问题。您有 3 个或更多点不属于一条线（*线性无关*）。您可以使用此事实来确定接触点是否位于该区域内。您拥有的点越多，这就越困难，因此您需要将角数超过 3 的多边形转换为一组三角形，应用以下过程。

所以你有三个点 A,B,C 定义一个三角形。*然后，您使用您的触摸点定义三条线以获得方向矢量 AT、BT、CT，而 A、B、Cs 表示这三条触摸线*的基点。

然后用基点 A 定义*边界线*AB，用基点 A 定义 AC（A 或 C 是​​基点无关紧要），最后用基点 C 定义线 CB。所以让我们总结一下（大字母是表示向量，而小写字母表示标量或因子）：

**边界线**：

```
a:X=A+f1*AB
b:X=B+f2*BC
c:X=C+f3*AC 
```

**触摸线**：

```
ta:X=A+t1*AT
tb:X=B+t2*BT
tc:X=C+t3*CT 
```

![生成的带有接触线和交叉点的三角形](../Images/5de11ab808b97d61de7e354f2dc2c9df.png)

现在您将触摸线（图中粉红色）与与触摸线基点相对的边界线（绿色/红色）相交。例如，您需要将线“ta”与线 b 相交以获得交点 I3。如果将向量 AT 扩大因子**t1** ，您将达到这一点。

如果该因子**t1**大于 1，则接触点 T 位于 A 和 I3 之间，即“ta”线。如果因子**t1**小于 1 T 位于线部分 A-I3 之外。

您将不得不对行 tb 和 c 以及 tc 和 a 执行此操作 3 次。每次 I(n) 点都需要小于 1（其中 n 在 {1,2,3} 中）。

***如果此条件适用于所有三个交点，则您的接触点位于三角形内。***

您将通过求解这些简单的方程组得到交集：

首先

```
A+t1*AT = B+f2*BC
<=>
0 = A+t1*AT - B - f2*BC 
```

这个系统看起来像这样（其中 x,y 捐赠特定的坐标分量）：

```
0 = xA + t1*(xT-xA) - xB - f2*(xC-xB)
0 = yA + t1*(yT-yA) - yB - f2*(yC-yB) 
```

第二

```
B+t2*BT = C+f3*AC
<=>
0 = B+t2*BT - C - f3*AC 
```

第三

```
C+t3*CT = A+f1*AB
<=>
0 = C+t3*CT - A - f1*AB 
```

解决这三个系统将为您提供一个点是否位于该区域内的答案。解决方案必须与 0 明显不同（如果 0 是您的点在同一条线上的唯一解决方案 ->*线性相关*）！

基于此，您可以翻译对象的所有坐标。

如上所述，您需要缩减为三角形并将此方法应用于多边形的所有子三角形。如果一个匹配条件（或者如果你想实现多点触控，两个或更多）你的触摸就在对象区域内。

这只是三个小的计算，应该在“Touch-Down”事件处理程序中调用一次。由于您知道您触摸了该区域，因此无需在移动手指时进行所有这些计算。

**关于三角化** 这是一个更复杂的问题，不是一句话就能回答的。根据您对另一个答案的评论，您不想处理简单的多边形，而是想要处理由多边形组成的更复杂的形状。例如你的星形。在这里你可以使用上面的方法，你需要自己定义你的三角形。因为要知道哪个角属于一张脸，哪个角不属于这并不是那么简单。

另一种解决方案是使用所谓的 Quick Hull 算法从点集生成凸包。这将为您提供形状的轮廓，您应该使用哪些角点进行三角化。如果你有一些“无阴影”的面，如果你真的想处理所有可能的点集，也只需处理它们。

我在你的明星案例中的解决方案：

*   定义你的尖峰三角形

*   使用我前面提到的方法（通过解决一些 LSE）来确定是否被触摸。

*对于其他一切*：

使用三角形的外接圆对其进行三角化。通过找到定义一个不包含任何其他轮廓点的圆的三个点。所谓的[德劳内三角测量](http://en.wikipedia.org/wiki/Delaunay_triangulation)。让这个方法找到你的三角形。如果您有一些未着色的区域，您可以定义一个具有“可触摸”属性或类似属性的三角形对象，让您的算法知道是否应该处理触摸。

如果你正确地处理和更新你的三角形集，就不应该再有关于如何处理凹形的问题了。

对于您的五角大楼，请尝试以下操作：

*   使用快速外壳和三角测量方法。

*   如果用户更改点位置，则更新三角形

*   利润

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T09:57:18.443

首先，您需要重写 View.dispatchTouchEvent() 以过滤掉三角形外的触摸。在此处查看[我的答案，](https://stackoverflow.com/a/11137996/375929)以了解如何执行此操作以及为什么需要使用该特定方法而不是 OnTouchListener 来使部分视图触摸透明。

然后，在您的 OnTouchListener 中，您需要将触摸坐标与三角形点的坐标进行比较，以确定用户是点击了其中一个点还是三角形的内部。我还建议您在此处给点留出一点余地-在触摸屏上指向小对象非常困难，因此让用户为此设置一个 4-8 像素的错误缓冲区。

因此，如果用户击中一个点 - 拖动该点，如果他们击中三角形内部而不是其中一个点（即触摸点在三角形内但不在某个点的位置之一内） - 拖动整个看法。此外，如果三角形太小以至于点边距重叠（这将导致触摸匹配多个点位置），则只需选择最近的一个。

如果您不熟悉拖放 api，[这里有一个不错的教程](http://www.vogella.com/articles/AndroidDragAndDrop/article.html)。如果动作是 ACTION_DOWN 并且触摸点在三角形内，则需要从 OnTouchListener 调用 startDrag()。

[对于 pre-honeycomb API，有一个名为android-dragarea](https://github.com/doffm/android-dragarea)的拖放库。文档中有指向示例应用程序的链接。

**UPD**哦，我没有意识到你也在寻找算法。您想要一个 Point-in-Polygon 算法，这里有一些不错的解决方案，它们**几乎适用于任何复杂的多边形**：

*   *光线投射算法*实现1：[http](http://chandan-tech.blogspot.com/2010/12/whether-point-lies-inside-polygon-2d.html) ://chandan-tech.blogspot.com/2010/12/whether-point-lies-inside-polygon-2d.html （有完整代码，马上就可以了）
*   *光线投射算法*实现 2：这是第一个的稍微不同的实现：[http](http://www.anddev.org/other-coding-problems-f5/using-java-awt-polygon-in-android-t6521.html) ://www.anddev.org/other-coding-problems-f5/using-java-awt-polygon-in-android-t6521.html （完整的代码，立即工作）
*   这个实现起来有点复杂，需要更多的 RAM，但我相信它可能比前两个在速度上更有优势，因为它是基于位图的：[https ://stackoverflow.com/a/2597702/375929](https://stackoverflow.com/a/2597702/375929)

# c# - 将 Gridview 与从 JSON 创建的列表绑定

> ID：11137093
> 
> 赞同：0
> 
> 时间：2012-06-21T11:23:49.407
> 
> 标签：c#, asp.net, c#-4.0, gridview

我正在创建一个 Web 应用程序，在其中我从 klout API 获得 JSON 响应。我的代码如下，

```
var list= _jsserializer.Deserialize<List<MyItem>>(text_klout as string); 
```

myItem 的定义是

```
public class MyItem
{
    public string id;
    public string displayName;
    public string name;
    public string slug;
    public string imageUrl;
} 
```

我在 aspx 页面中拖动了一个 GridView。然后我在文件后面的代码中做了这个

```
GridView1.DataSource = list;
GridView1.DataBind(); 
```

但我的 GridView 没有填充列表字段。任何可以指导我的人。温柔地谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T15:19:38.390

代码非常好，我们只需要在 myItems 中添加带有字段的访问器和修改器，否则它将不起作用。希望这对你们有帮助。我在 5 到 6 小时后找到了它。

# iphone - 隐藏视图中的 UIStepper 会干扰另一个 UIView 中的 UIButton？

> ID：11137100
> 
> 赞同：0
> 
> 时间：2012-06-21T11:24:21.387
> 
> 标签：iphone, uiview, uibutton, uistepper

我在 UIView 中遇到了 UIButton 的问题：部分按钮不响应触摸。原因是另一个 UIView 中的 UIStepper。但是，那个观点是隐藏的！

为什么系统认为另一个隐藏视图中的 UIStepper 仍然存在？（UIStepper 不接收实际事件。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:42:11.090

通过从视图层次结构中真正删除带有步进器的视图而不是仅仅隐藏它来解决我的问题。

# windows - 如何在所有 Windows 操作系统上获取系统卷信息

> ID：11137106
> 
> 赞同：1
> 
> 时间：2012-06-21T11:24:48.983
> 
> 标签：windows, winapi, windows-7

我正在寻找有关所有 Windows 操作系统风格的系统卷信息，但无法找到一种独特的方法来做到这一点。根据我的调查。

waveOutGetVolume() :- 只能在 Windows XP IAudioEndPoint 之前工作，:- 只能在 VISTA 及以上操作系统中工作

请帮助我获得一些常见的解决方案来获取系统卷信息。

# iphone - MonoTouch 翻译不适用于“de”

> ID：11137110
> 
> 赞同：0
> 
> 时间：2012-06-21T11:24:55.990
> 
> 标签：iphone, ios, localization, xamarin.ios, localizable.strings

我遇到了 MonoTouch/iOS 翻译功能的问题。我在`en.lproj`和`de.lproj`文件夹中有英语和德语翻译文件（Localizable.strings），这两个文件都设置为`Build Action = Content`.

问题是，只有英文翻译适用于模拟器和设备。德语翻译不起作用，无论是在设备上还是在模拟器上。

我尝试了以下所有方法：

*   清理和重建
*   删除模拟器/设备上的应用程序，将语言更改为德语，重新启动模拟器/设备，重新安装应用程序
*   重新启动 MonoTouch，重新启动我的 Mac
*   这些的组合

我错过了什么？如何“指示” MonoTouch 切换到设备的 UI 语言？如何调试这样的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:21:19.293

解决了，问题是德语文件包含变音符号并且没有以 UTF-8 编码。如果您有同样的问题，只需将文件转换为 UTF-8 并重试。

# android - java.lang.NoClassDefFoundError: android.security.MessageDigest

> ID：11137112
> 
> 赞同：7
> 
> 时间：2012-06-21T11:25:13.680
> 
> 标签：android, classnotfoundexception

在我`MessageDigest.getInstance("SHA-1")`用来获取 SHA1 的应用程序中，它可以在 android 2.3 中成功运行，但它不能在 android 4.0 中运行，它会显示以下异常：

```
FATAL EXCEPTION: main
java.lang.NoClassDefFoundError: android.security.MessageDigest
 at com.screenshare.email.Utility.getConsistentDeviceId(Utility.java:597)
 at com.screenshare.exchange.SyncManager.getDeviceIdInternal(SyncManager.java:1079)
 at com.screenshare.exchange.SyncManager.getDeviceId(SyncManager.java:1045)
 at com.screenshare.exchange.SyncManager.onCreate(SyncManager.java:1813)
 at android.app.ActivityThread.handleCreateService(ActivityThread.java:2253)
 at android.app.ActivityThread.access$1600(ActivityThread.java:123)
 at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1201)
 at android.os.Handler.dispatchMessage(Handler.java:99)
 at android.os.Looper.loop(Looper.java:137)
 at android.app.ActivityThread.main(ActivityThread.java:4424)
 at java.lang.reflect.Method.invokeNative(Native Method)
 at java.lang.reflect.Method.invoke(Method.java:511)
 at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
 at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
 at dalvik.system.NativeStart.main(Native Method) 
```

谁能解释一下这个案子？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T11:33:56.563

从[googlegroups 的阅读](http://productforums.google.com/forum/#!category-topic/maps/google-maps-for-mobile/KinrGn9DcIE)来看，这听起来像是`android.security.MessageDigest`在 Honeycomb 中被删除了。不幸的是，我还没有在 Android 开发者文档中找到这方面的证据。

尝试[`java.security.MessageDigest`](http://developer.android.com/reference/java/security/MessageDigest.html)改用。

# java - 将 java 日期与 simpledateformat 匹配

> ID：11137115
> 
> 赞同：2
> 
> 时间：2012-06-21T11:25:29.457
> 
> 标签：java, parsing, date

我正忙于解析以下日期：Tue Jun 19 10:06:19 2012

我为此使用[http://docs.oracle.com/javase/1.5.0/docs/api/java/text/SimpleDateFormat.html 。](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/SimpleDateFormat.html)采用以下格式：EEE MMM dd HH:mm:ss yyyy

我会说这没关系，即使我看一下手册，但我不断收到异常消息：无法解析日期无法解析日期：“Tue Jun 19 10:06:19 2012”

谁能帮我？先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:27:20.160

我找到了解决方案，它与语言环境（未设置）有关，这很好用：

```
 SimpleDateFormat sdf = new SimpleDateFormat("EEE MMM dd HH:mm:ss yyyy", Locale.US); 
```

# c++ - DirectX 小型应用程序像地狱一样消耗资源

> ID：11137116
> 
> 赞同：0
> 
> 时间：2012-06-21T11:25:30.547
> 
> 标签：c++, winapi, resources, directx-9, consumption

我正在尝试学习一些 DirectX API，目前，我只有一个 WINAPI 窗口和一个简单的渲染函数，可以在整个屏幕上显示位图。我的 WINMAIN 函数：

```
LPDIRECT3D9 pD3D; // the Direct3D object
LPDIRECT3DDEVICE9 pd3dDevice; // the Direct3D device

// This is winmain, the main entry point for Windows applications
int WINAPI WinMain( HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, 
                    int nCmdShow) {
     hInst = hInstance;
     // Initialize the window
     if (!initWindow(hInstance)) return false;
     // called after creating the window
     if (!initDirect3D()) return false;
     // main message loop:
     MSG msg;
     ZeroMemory( &msg, sizeof( msg ) );
     while( msg.message != WM_QUIT) {
         if( PeekMessage(&msg, NULL, 0U, 0U, PM_REMOVE)) {
             TranslateMessage ( &msg );
             DispatchMessage ( &msg );
         } else {
             render();
         }
     }
     // Release the device and the Direct3D object
     if( pd3dDevice != NULL ) pd3dDevice->Release( );
     if( pD3D != NULL ) pD3D->Release( );
     return (int) msg.wParam;
} 
```

这是我的渲染功能：

```
void render(void) {
    IDirect3DSurface9* surface;
    pd3dDevice->CreateOffscreenPlainSurface(640, // the width of the surface to create
        480, // the height of the surface to create
        D3DFMT_X8R8G8B8, // the surface format
        D3DPOOL_DEFAULT, // the memory pool to use
        &surface, // holds the resulting surface
        NULL); // reserved
    D3DXLoadSurfaceFromFile(surface, NULL, NULL, L"test.bmp", NULL, D3DX_DEFAULT, 0, NULL);
    // This will hold the back buffer
    IDirect3DSurface9* backbuffer = NULL;
    // Check to make sure you have a valid Direct3D device
    if( NULL == pd3dDevice ) return;// Clear the back buffer to a blue color
    pd3dDevice->Clear(0, NULL, D3DCLEAR_TARGET, D3DCOLOR_XRGB( 0,0,255 ), 1.0f, 0 );
    // Get the back buffer
    pd3dDevice->GetBackBuffer( 0, 0, D3DBACKBUFFER_TYPE_MONO, &backbuffer );
    // Copy the offscreen surface to the back buffer
    // Note the use of NULL values for the source and destination RECTs
    // This ensures a copy of the entire surface to the back buffer
    pd3dDevice->StretchRect(surface, NULL, backbuffer, NULL, D3DTEXF_NONE );
    // Present the back buffer contents to the display
    pd3dDevice->Present( NULL, NULL, NULL, NULL );
} 
```

因此，主要问题是，当启用（未注释）渲染功能时，应用程序使用的内存会在一秒钟内达到 400 - 600 Mb。现在，如果我从 WinMain 禁用（注释）该行，内存将保留为 5 Mb，但处理器会发疯，应用程序会使用大约 50% 的内存。所以，看起来`WinMain()`使用了大量的处理器和`render()`大量的内存。为什么？我忘记了什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:29:32.707

```
pd3dDevice->CreateOffscreenPlainSurface(640, // the width of the surface to create
        480, // the height of the surface to create
        D3DFMT_X8R8G8B8, // the surface format
        D3DPOOL_DEFAULT, // the memory pool to use
        &surface, // holds the resulting surface
        NULL); // reserved
    D3DXLoadSurfaceFromFile(surface, NULL, NULL, L"test.bmp", NULL, D3DX_DEFAULT, 0, NULL); 
```

您正在调用这段代码，它会创建无数次资源，但您并没有释放它。它在渲染函数中，必须每秒至少调用 60 次（如果它与垂直回扫缺乏同步，则每秒可以调用数千次，这给您带来了巨大的问题）。这意味着您将指向表面的指针更改为具有相同图像的新表面内存块，并将地址丢失到旧的（未释放）。因此，它会导致内存泄漏。

将该代码转移到应用程序的初始化函数中，而不是渲染函数中。（并确保你管理它！当你停止使用它时，调用释放函数来降低 COM 对象的引用计数，以便系统可以声明内存（再次对你可用））

**编辑：这也需要移动到应用程序的初始化，这里只需要一次**

```
IDirect3DSurface9* backbuffer = NULL;
    // Check to make sure you have a valid Direct3D device
    if( NULL == pd3dDevice ) return;// Clear the back buffer to a blue color
    pd3dDevice->Clear(0, NULL, D3DCLEAR_TARGET, D3DCOLOR_XRGB( 0,0,255 ), 1.0f, 0 );
    // Get the back buffer
    pd3dDevice->GetBackBuffer( 0, 0, D3DBACKBUFFER_TYPE_MONO, &backbuffer );
    // Copy the offscreen surface to the back buffer
    // Note the use of NULL values for the source and destination RECTs
    // This ensures a copy of the entire surface to the back buffer
    pd3dDevice->StretchRect(surface, NULL, backbuffer, NULL, D3DTEXF_NONE );
    // Present the back buffer contents to the display 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-04T05:53:05.460

处理器使用率为 50% 主要是由于频繁调用 while 循环无限次。

前任。，

```
while(TRUE)
{
} 
```

这将经常检查，因为您正在指示处理器将其集中在条件为真时。如果您使用的是 4 核处理器，其中一个处理器将完全专注于此过程，在我的情况下，我使用了 4 核，因此我的 cpu 使用率为 25%。我认为您使用的是2核处理器。

```
while(TRUE)
{
Sleep(1);
} 
```

这将解决您的处理器问题。

# java - iText PdfPTable 行修复

> ID：11137117
> 
> 赞同：1
> 
> 时间：2012-06-21T11:25:39.633
> 
> 标签：java, itext

我在我的应用程序中使用 iText。

我将向 iText PDF 生成器类发送一个数组集合。该数组集合有 10 个项目，现在，我想在表格中显示这十个项目。

显示表格的条件是每页只显示5个项目，剩余的应该结转到下一页并显示在表格中。

```
float[] colsWidth = {0.5f,4f,1.4f,1.4f}; 
PdfPTable itemListTab = new PdfPTable(colsWidth); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:49:53.007

在遍历您的数组时，每隔五个元素，将您的表格添加到文档中，开始一个新页面，然后创建一个新表格。

```
if (/* 5 elements */) {
    // add your table to the document
    document.add(itemListTab);

    // create a new page
    document.newPage();

    // create a new table
    itemListTab = new PdfPTable(colsWidth);
} 
```

# ruby-on-rails - has_many/belongs_to 的项目计数

> ID：11137118
> 
> 赞同：2
> 
> 时间：2012-06-21T11:25:44.617
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我有 2 个模型：制造商和汽车

汽车属于制造商，制造商有很多汽车

当人们在搜索汽车时，我只想向他们展示列表中那些在 DB 中有汽车的制造商（隐藏没有汽车的制造商）。

我向制造商添加了字段“计数”，但不知道在添加/销毁汽车时如何更好地保持最新？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T11:39:29.260

由于您已经有了 count 字段，只需将其配置添加到您的汽车模型中：

```
class Car < ActiveRecord::Base
  belongs_to :manufacturer, :counter_cache => :counter
end 
```

现在，每当您添加新车时，`counter`字段 in`Manufacturer`都会增加。您现在需要正确填写此字段，因为您已经有一个数据库。

此外，如果您尚未定义该`counter`字段，Rails 默认将使用一个名为`cars_counter`（而不是仅`counter`）的字段，然后在`counter_cache`定义时您将仅使用它`counter_cache => true`而不是将列命名为`counter`.

# css - 字体无法在 Firefox 中加载，但可以在 chrome 中使用

> ID：11137119
> 
> 赞同：7
> 
> 时间：2012-06-21T11:25:51.440
> 
> 标签：css, fonts, font-face

字体有问题，不确定为什么要为 Chrome 加载，但在 Firefox 中似乎没有加载。

这是一个[例子](http://jsfiddle.net/LNC7h/)

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T12:09:17.203

看看这个 SO 线程，它和你有完全相同的问题。其他社区提供了建议的解决方法，并帮助解决了这个问题：

*   [css @font-face 不能与 Firefox 一起使用，但可以与 chrome 和 IE 一起使用](https://stackoverflow.com/questions/2856502/css-font-face-not-working-with-firefox-but-working-with-chrome-and-ie)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T12:04:30.760

我认为 Firefox 仅支持`TrueType/OpenType TT(.ttf)`和`OpenType PS (.otf)`.

看看[这张表](http://caniuse.com/#feat=fontface)。

**编辑：**我想你在[这里](https://stackoverflow.com/questions/2856502/css-font-face-not-working-with-firefox-but-working-with-chrome-and-ie)找到的答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T12:26:07.937

将字体保存在同一目录中并像这样应用这将起作用我已经签入了我的firefox 12.0

```
@font-face
{
    font-family: 'Play';
    src: url('play.ttf');
}
.font
{
    font-family: "play";
    font-size: 20px;
}

<p class="font">TESTING</p> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T12:04:42.507

Firefox 只接受字体的相对路径。如果要使用与页面所在域不同的域来托管字体，则必须遵循 Mozilla 的[HTTP 访问控制](https://developer.mozilla.org/En/HTTP_Access_Control)策略：

> 此跨域共享标准用于启用跨站点 HTTP 请求：
> 
> [...]
> 
> Web 字体（用于 CSS 中 @font-face 中的跨域字体使用）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T12:11:18.263

我认为直接从 Google 使用它可能会更好。那么您无需担心任何版权问题，而且它是免费的。

[http://www.google.com/webfonts#QuickUsePlace:quickUse/Family：](http://www.google.com/webfonts#QuickUsePlace%3aquickUse/Family%3a)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-21T12:18:40.133

在 Firefox (Gecko) 中，[网络字体](https://developer.mozilla.org/en/CSS/@font-face)受到相同的域限制（**字体文件必须与使用它们的页面位于同一域中**），除非使用 HTTP 访问控制来放松此限制。

注意：由于没有为 TrueType、OpenType 和 Web 开放文件格式 (WOFF) 字体定义 MIME 类型，因此不考虑指定文件的 MIME 类型。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-21T14:03:08.533

几周前我遇到了同样的问题。

我所做的只是添加`local('*Name of Font*)`，以便浏览器查找字体

火狐很奇怪。我注意到在开发本地服务器中，它会尝试从您的安装字体集中加载字体，然后再尝试在您指定的路径中实际查找 src 字体。

那是本地的将有助于它告诉它查看本地字体集。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-25T09:47:43.743

你使用：

```
<base href="http://www.site.com/" /> 
```

如果是这样，请将其更改为：

```
<base href="<?php echo $_SERVER['HTTP_HOST']; ?>" /> 
```

# python - 如何使用 Python 将图像从一种格式转换为另一种格式？

> ID：11137120
> 
> 赞同：18
> 
> 时间：2012-06-21T11:25:54.367
> 
> 标签：python, image, image-processing

我必须在 python 中编写一个用于图像处理的应用程序。有谁知道如何将图像的文件类型从 JPEG 转换为 TIFF？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-21T11:28:09.023

查看[Python 图像库 (PIL)](http://www.pythonware.com/products/pil/)。看这个[教程](http://effbot.org/imagingbook/introduction.htm)，PIL 很容易使用。

[支持的图像格式](http://infohost.nmt.edu/tcc/help/pubs/pil/formats.html)。

要进行转换，您打开图像，然后使用新的扩展名（PIL 使用它来确定用于保存的格式）保存它。

```
import Image
im = Image.open('test.jpg')
im.save('test.tiff')  # or 'test.tif' 
```

请注意，官方发行版不支持 Python 3.x（还没有？），但是，至少在 Windows 下，有一个可用于 v 3.x的[非官方版本。](http://www.lfd.uci.edu/~gohlke/pythonlibs/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-21T11:28:03.840

使用 Python 图像库 (PIL)。

```
from PIL import Image
img = Image.open('image.jpeg')
img.save('image.tiff') 
```

参考：[http ://effbot.org/imagingbook/image.htm](http://effbot.org/imagingbook/image.htm)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-21T11:27:50.500

您是否尝试使用[PIL](http://www.pythonware.com/products/pil/)？它可以支持多种图像文件格式。

# osgi - 在 OSGi 中使用声明式服务实现服务工厂

> ID：11137124
> 
> 赞同：2
> 
> 时间：2012-06-21T11:26:12.227
> 
> 标签：osgi, declarative-services, service-factory

我正在使用 OSGi 声明式服务和设置注册 OSGi 服务

> 服务工厂=“真”

如下。

```
<scr:component xmlns:scr="http://www.osgi.org/xmlns/scr/v1.1.0" name="test.Configuration">
  <implementation class="test.ConfigurationImpl"/>
  <service servicefactory="true">
     <provide interface="test.Configuration"/>
  </service>
</scr:component> 
```

我正在尝试从另一个捆绑包中多次使用该服务。但是，它返回给我相同的服务实例。

这里可能出了什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T13:35:26.357

该`servicefactory`标志意味着每个消费者捆绑包都有一个单独的实例。因此，如果您使用 2 个捆绑包中的服务，那么您将获得 2 个实例。每个消费者*不会*获得多个实例。

如果您希望消费者对实例数量进行编程控制，那么您需要使用该`ComponentFactory`方法。

# jsf-2 - Jsf inputText onkeyup 事件处理程序

> ID：11137125
> 
> 赞同：2
> 
> 时间：2012-06-21T11:26:13.787
> 
> 标签：jsf-2, primefaces

在 PrimeFace 中`inputText`，我需要在按下任意键时调用函数 ‍‍‍<code>f1()。

为了实现这一点，在`xhtml`文件中我有：

```
<p:inputText id="userName" onkeyup="#{myBean.f1()}" > 
```

在我的`MyBean.java`我已经声明了这个函数：

```
public void f1()
{
// somecode
} 
```

‌但是这段代码抛出了一个异常：

> javax.faces.FacesException: javax.el.E​​LException: /index.xhtml @103,191 onkeyup="#{MyBean.f1()}": java.lang.NullPointerException

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T11:30:50.100

如果你想调用一个java方法，你应该使用`p:ajax event`而不是`onkeyup`属性

```
<p:inputText id="userName">
     <p:ajax event="keyup" listener="#{myBean.f1}"></p:ajax>
</p:inputText> 
```

> onkeyup ：在输入元素上释放键时执行的客户端回调。

换句话说，onkeyup 用于调用 js 函数，例如`onkeyup="alert('hello')"`

关于您遇到的异常：它的原因是您的页面尝试`f1`在页面加载而不是在 keyup 事件上执行该方法 - 例如，如果您`f1`的方法将返回一个字符串，该字符串将替换该字符串，`#{myBean.f1()}`并且您生成的页面将如下所示：

```
... onkeyup="string value returned from f1 method" ... 
```

# mongodb - 在 MongoDB 中存储 GeoJSON 多边形

> ID：11137127
> 
> 赞同：10
> 
> 时间：2012-06-21T11:26:22.043
> 
> 标签：mongodb, indexing, geo, geojson

我对 MongoDB 有以下问题。我从我的祖国获得了一些地理数据，我必须将它们存储到 mongodb 以建立一个简单的 Web 功能服务。该服务将主要使用运算符进行边界框查询`$within`。数据采用 GeoJSON 格式。`[1,2]`因此，我首先导入了以这种格式表示为点 ( ) 的村庄和城市。没问题。下一步河流和街道是 LineStrings 并根据 GeoJSON 以这种方式表示`[[1,2],[3,4]]`。但是在导入区域（实际上是多边形并且根据 GeoJSON 规范 3 dim 数组）时，我 `geo values have to be numbers`在创建索引时遇到了错误。

```
db.collection.ensureIndex({"geometry.coordinates" : "2d"}); 
```

所有数据都是有效的 GeoJSON，并且在 EPSG:4326 投影中是纯二维坐标。

有人有想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-20T17:34:18.693

在 MongoDB 2.4 中，对 GeoJSON 点、线串和多边形使用“2dsphere”索引。

例如，您可以创建此索引：

```
db.mycoll.ensureIndex( { loc : "2dsphere" } ) 
```

并存储这个 LineString：

```
{ loc : { type : "LineString" , coordinates : [ [ 1 , 2 ] , [ 3 , 4 ] ] } } 
```

请参阅[http://docs.mongodb.org/manual/applications/2dsphere/](http://docs.mongodb.org/manual/applications/2dsphere/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T21:48:14.270

看来 mongo 2.3.2 开发版本现在支持 GeoJSON： [MongoDB 2.4 发行说明](http://docs.mongodb.org/manual/release-notes/2.4/#new-geospatial-indexes-with-geojson-and-improved-spherical-geometry)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T16:42:43.083

我必须自己做同样的事情来设置 GeoFence 功能。我所做的是将“多边形”数据存储为一系列坐标和一个中心。例如：

```
{ 
    "_id" : ObjectId( "4f189d132ae5e92272000000" ),
    "name" : "Alaska",
    "points" : [ 
        { "coords" : [ 
            -141.0205, 
            70.0187 ] 
        }, 

        ...

        { "coords" : [ 
            -141.0205, 
            70.0187 ] 
        } 
    ],
    "center" : { 
        "coords" : [ 
          -153.6370465116279, 
          61.42329302325581 ] 
    } 
} 
```

在我的应用程序（在 python 中）中，我使用[shapely library](http://toblerity.github.com/shapely/manual.html#polygons)。我首先要做的是找到一个中心最接近我的点的对象列表。然后在客户端（python）我使用将每个大坐标数组转换为多边形，然后测试这些区域以找出哪些区域包含我的观点。

因此，您*可以*将多边形数据作为数据存储在 MongoDB 中，并使用其他一些预先计算的 2d 索引，如中心。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-23T16:18:36.300

从 mongo shell 中尝试一下：

```
// Polygon in GeoJson format
var poly = {};
poly.name = 'GeoJson polygon';
poly.geo = {};
poly.geo.type = 'Polygon';
poly.geo.coordinates = [
    [ [ -80.0, 30.0 ], [ -40.0, 30.0 ], [ -40.0, 60.0 ], [-80.0, 60.0 ], [ -80.0, 30.0 ] ]
];
db.foo.insert(poly);
db.foo.ensureIndex({geo: "2dsphere" }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T16:27:12.220

MongoDB 的地理空间功能目前仅支持存储点，不支持存储形状或线条。但是，您可以使用圆形、矩形或多边形来查询点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-25T12:26:04.613

根据[此处](https://docs.mongodb.com/manual/reference/geojson/#polygon)的 MongoDB 文档，可以将多边形存储为 GeoJSON 多边形，例如：

```
{
  type: "Polygon",
  coordinates: [ [ [ 0 , 0 ] , [ 3 , 6 ] , [ 6 , 1 ] , [ 0 , 0  ] ] ]
} 
```

这是一个简单的环，但也可以存储具有多个环的多边形。

# perl - 使用 while(1) 的 perl 脚本中的内存泄漏

> ID：11137130
> 
> 赞同：0
> 
> 时间：2012-06-21T11:26:35.213
> 
> 标签：perl, memory, memory-leaks

大师。

我有一个 perl 脚本，它需要在无限循环中运行并监视我的 gnu/linux 的平均负载和空闲 ram，如果负载/ram 高于/低于设置的值，则使用 google 的帐户发送电子邮件。

我找到了这些

[Perl 脚本的内存使用情况](https://stackoverflow.com/questions/9937672/memory-usage-of-perl-script)

[如何在长时间运行的 Perl 程序中找到内存泄漏？](https://stackoverflow.com/questions/429254/how-can-i-find-memory-leaks-in-long-running-perl-program)

并按照建议使用 undef ，但这似乎没有帮助，因为很可能我有一些永远不会被清除/释放的东西。

这是内存使用量如何不断增加[的示例，并且在一天后它可以分配相当多的内存。](http://pastebin.com/Cbjq4v0W)

[这是 perl 脚本](http://pastebin.com/gThaTQ0t)本身。有人可以指出我如何解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:32:46.503

泄漏可能隐藏在模块的 XS 部分中。Perl 部分似乎没有泄漏。您可以尝试将外部模块一个一个移除，并检查泄漏何时停止。

无论如何，它看起来足够小，并且在迭代之间没有任何持久数据。为什么不把它放在 cron 上每分钟运行一次，而不是一直保存在内存中呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:09:42.303

除了使用 cron 之外，还有很多系统监控工具可以为您完成所有这些工作。

无论如何 - 如果您编写一些子例程，检查内存的使用位置会更容易：

```
while (1) {
  my $cpu = ...
  my $stat = ...
  if (need_to_send_msg($cpu, $stat)) { send_message($cpu,$stat) }
}

sub send_message {
  my ($cpu, $stat) = @_;
  my $msg_body = compose_message($cpu, $stat);
  transmit_message($msg_body, $from, $to);
} 
```

这将从脚本的主体中删除一大堆变量，并让您注释掉部分子例程以查看内存的使用位置。

哦-在我看来，即使您不打算发送消息，您也好像在不断地创建 $smtp 连接。一旦通过使用一些子例程使主循环变小，就更容易确定。

# java - 从java执行adb命令

> ID：11137131
> 
> 赞同：5
> 
> 时间：2012-06-21T11:26:36.073
> 
> 标签：java, android, android-emulator, adb

我想将文件从我的 Java 程序推送到 Android 模拟器。现在，我可以使用 ProcessBuilder 启动模拟器并捕获 logcat 消息。但是，每当我尝试在进程构建器中使用 adb push 命令时，进程都会挂起并且不会生成任何输出。

编码：

```
try {
    ProcessBuilder proc = new ProcessBuilder("D://android-sdk//platform-tools//adb.exe",
                                             "push D:\\final.xml /mnt/sdcard/final.xml");
    Process p = proc.start();
    BufferedReader br2 = new BufferedReader(new InputStreamReader(p.getInputStream()));
    while ( (line = br2.readLine()) != null)
        System.out.println(line);
} catch (Exception e) {
    System.err.println("Error");
} 
```

编辑：-找到可能的解决方案。我正在使用 Process.waitFor() 方法，但没有存储其返回的退出代码。现在我这样做了：

```
int exitVal = p.waitFor(); 
```

一切都像魅力一样。

和@Marc Van Daele 感谢您的意见。根据我的经验，ProcessBuilder 以两种方式工作，即。您可以使用由空格或逗号分隔的参数。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T11:36:05.560

这不应该是单独的论点吗

```
ProcessBuilder proc = new ProcessBuilder("D://android-sdk//platform-tools//adb.exe", "push",  "D:\\final.xml", "/mnt/sdcard/final.xml"); 
```

# jquery - jQuery 验证插件 - addMethod 非此即彼的验证

> ID：11137136
> 
> 赞同：0
> 
> 时间：2012-06-21T11:27:05.057
> 
> 标签：jquery, regex, jquery-validate

我有一个新的验证要求，我试图用最好的方法来完成。

我有一个字段是电子邮件地址或用户名。

该要求要求如果用户输入电子邮件，则将运行电子邮件验证（内置方法），否则验证将是带有基本标点符号的字母。

所以我的想法是——如果输入了@，则运行电子邮件验证——否则运行带有基本标点符号的字母——但我正在寻找可能的其他方法的输入。

另外，在这种情况下，如果/否则，您将如何编写两部分验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:35:41.007

```
 $("#frm").validate({
            rules: {
                username: {
                    required: true,
                    usernameemail: true,
                    maxlength: 100
                }
            }
   });

   $.validator.addMethod("usernameemail", function(value, element) {
        if (this.optional(element)) // return true on optional element
            return true;
        valid = true;

        if (value.indexOf("@") > 0) {
            valid = valid && $.validator.methods.email.call(this, value, element);
        } else {
            valid = valid && $.validator.methods.username.call(this, value, element);
        }
        return valid;
    }, 'Please provide a valid username or email');

    $.validator.addMethod("username", function(value, element) {
        return this.optional(element) || /^[a-z0-9\-]+$/i.test(value);
    }, "Username must contain only letters, numbers, or dashes."); 
```

您需要将用户名正则表达式更改为您需要的，希望这会有所帮助

# java - 使用 Java 代码浏览 OpenERP 联系人

> ID：11137140
> 
> 赞同：0
> 
> 时间：2012-06-21T11:27:17.617
> 
> 标签：java, xml-rpc

我在运行以下用于从 openERP 浏览联系人的 java 代码时遇到问题，第一部分运行没有问题，登录部分完成，但我在线上遇到异常

```
Object c = client.execute("execute", arg); 
```

说是选角有问题...

```
import java.net.URL;
import java.util.Vector;

import org.apache.xmlrpc.client.XmlRpcClient;
import org.apache.xmlrpc.client.XmlRpcClientConfigImpl;

public class Browse {

public static void main(String args[]) throws Exception {
// USEFUL ONLY LOCALLY WITH IN THE SERVER
Vector params1 = new Vector();
params1.addElement("TS_DB");
params1.addElement("alaa");
params1.addElement("123456");

XmlRpcClient xmlrpcLogin = new XmlRpcClient();
XmlRpcClientConfigImpl xmlrpcConfigLogin = new XmlRpcClientConfigImpl();
xmlrpcConfigLogin.setEnabledForExtensions(true);
xmlrpcConfigLogin.setServerURL(new URL("http", "10.0.0.177", 8069, "/xmlrpc/common"));
xmlrpcLogin.setConfig(xmlrpcConfigLogin);

Object id = xmlrpcLogin.execute("login", params1);
System.out.println("Login Id : " + id.toString());

System.out.println("------------------------");

XmlRpcClient client = new XmlRpcClient();
XmlRpcClientConfigImpl clientConfig = new XmlRpcClientConfigImpl();
clientConfig.setEnabledForExtensions(true);
clientConfig.setServerURL(new URL("http", "10.0.0.177", 8069, "/xmlrpc/object"));
client.setConfig(clientConfig);

// Object[] params2 = { "parner_id", "name" };
Object[] params2 = { 11 };
Vector<Object> params = new Vector<Object>();
params.add(params2);
Vector<Object> arg = new Vector<Object>();
arg.add("TS_DB");
arg.add(1);
arg.add("alaa");
arg.add("res.partner.address");
arg.add("browse");
// arg.add(24);
arg.add(params2);

Object c = client.execute("execute", arg);
// System.out.println("partner addressees with partner Id 24 :");
// for (Object obj : ids) {
// int a = Integer.parseInt(obj.toString());
// System.out.println(a);
// }

}
} 
```

我得到以下异常：

```
Exception in thread "main" java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Integer
    at org.apache.xmlrpc.parser.XmlRpcResponseParser.addResult(XmlRpcResponseParser.java:61)
    at org.apache.xmlrpc.parser.RecursiveTypeParserImpl.endValueTag(RecursiveTypeParserImpl.java:78)
    at org.apache.xmlrpc.parser.XmlRpcResponseParser.endElement(XmlRpcResponseParser.java:186)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:601)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1782)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2939)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
    at org.apache.xmlrpc.client.XmlRpcStreamTransport.readResponse(XmlRpcStreamTransport.java:186)
    at org.apache.xmlrpc.client.XmlRpcStreamTransport.sendRequest(XmlRpcStreamTransport.java:156)
    at org.apache.xmlrpc.client.XmlRpcHttpTransport.sendRequest(XmlRpcHttpTransport.java:143)
    at org.apache.xmlrpc.client.XmlRpcSunHttpTransport.sendRequest(XmlRpcSunHttpTransport.java:69)
    at org.apache.xmlrpc.client.XmlRpcClientWorker.execute(XmlRpcClientWorker.java:56)
    at org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:167)
    at org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:158)
    at org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:147)
    at Browse.main(Browse.java:47) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T05:41:06.143

您必须将用户 ID 传递给 arg 向量。您通过登录数据库获得的用户 ID 必须提供给 arg 向量，以便调用特定方法。但是，是的，它必须显示除该强制转换异常之外的其他一些异常，但我不知道为什么会出现该错误。但解决方案很简单，只需替换语句：

```
arg.add(1); 
```

有了这个：

```
arg.add(id); 
```

以上`id`设置如下：

```
Object id = xmlrpcLogin.execute("login", params1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:06:51.423

据我所知，xmlrpc 无法返回 openerp 的浏览方法返回的对象。所以你必须使用相同的读取方法。

# sql - 获取sql server中所有执行的查询

> ID：11137142
> 
> 赞同：8
> 
> 时间：2012-06-21T11:27:21.810
> 
> 标签：sql, sql-server, stored-procedures

我需要的是有一个可以执行和显示的存储过程

“当前连接的所有 SQL 先前已运行”和“当前未运行”。

我对此进行了很多搜索，但找不到答案。请帮助我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-21T11:51:29.310

最好使用 Profiler 来完成此任务。

但是如果你想要一个查询，`SQL Server 2005+`你可以使用系统视图[sys.dm_exec_query_stats](http://msdn.microsoft.com/en-us/library/ms189741.aspx)，`returns aggregate performance statistics for cached query plans`但仅适用于**兑现计划**和[sys.dm_exec_sql_text](http://msdn.microsoft.com/en-us/library/ms181929.aspx)。不幸的是，他们没有关于会话 ID 的信息，因此您只能获得服务器实例的兑现查询。

```
set transaction isolation level read uncommitted
select top 1000
    creation_time,
    last_execution_time,
    case 
        when sql_handle IS NULL then ' '
        else(substring(st.text,(qs.statement_start_offset+2)/2,(
            case
                when qs.statement_end_offset =-1 then len(convert(nvarchar(MAX),st.text))*2      
                else qs.statement_end_offset    
            end - qs.statement_start_offset)/2  ))
    end as query_text,
    db_name(st.dbid)as db_name,
    object_schema_name(st.objectid, st.dbid)+'.'+object_name(st.objectid, st.dbid) as object_name
FROM sys.dm_exec_query_stats  qs
     cross apply sys.dm_exec_sql_text(sql_handle) st
ORDER BY db_name, object_name 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T11:45:47.967

在甲骨文中：

[如何在 Oracle DB 中显示正在运行的进程？](https://stackoverflow.com/questions/199508/how-do-i-show-running-processes-in-oracle-db)

在`SQL server 2005+`你可以找到以前的使用 SPID 我认为。它会为您提供带有 XXX SPID 的进程。也许您可以获取正在运行的进程的 SPID 并创建一个循环，直到正在运行的 SPID。所以你可以得到所有进程直到运行进程。

```
DECLARE @sqltxt VARBINARY(128)
SELECT @sqltxt = sql_handle
FROM sys.sysprocesses
WHERE spid = XXX
SELECT TEXT
FROM sys.dm_exec_sql_text(@sqltext)
GO 
```

你也可以通过这些来运行 sql 语句；

```
SELECT sqltext.TEXT,
req.session_id,
req.status,
req.command,
req.cpu_time,
req.total_elapsed_time
FROM sys.dm_exec_requests req
CROSS APPLY sys.dm_exec_sql_text(sql_handle) AS sqltext 
```

它将对您有用。我猜

# php - Safari 通过 PHP 提供的 mp3 提供了错误的音频持续时间

> ID：11137145
> 
> 赞同：2
> 
> 时间：2012-06-21T11:27:35.713
> 
> 标签：php, safari, header, mp3, html5-audio

我正在向 javascript 播放器提供音频，例如（对于 Safari）：

```
new Audio('give_audio.php?n='+name+'&t=mp3'); 
```

我正在寻找为 Safari 设置正确的标题，以便他检索音频持续时间。我发现这个话题对我帮助很大： [audio.duration return Infinity on Safari when mp3 is serving from PHP](https://stackoverflow.com/questions/9629223/audio-duration-returns-infinity-on-safari-when-mp3-is-served-from-php)

我的 PHP 脚本 'give_audio.php' 是：

```
if (isset($_GET['n']) && isset($_GET['t'])) {

  $n = htmlspecialchars($_GET['n']);
  $t = htmlspecialchars($_GET['t']);
  $filename = $n.'.'.$t;
  $path = 'Audio/'.$filename;
  $fsize = filesize($path);
  $shortlen = $fsize - 1;

  $fp = fopen($path, 'r');
  $etag = md5(serialize(fstat($fp)));
  fclose($fp);

  if ($t == 'mp3') $t = 'mpeg';

  header("Pragma: public");
  header("Expires: 0");
  header('Cache-Control: no-cache, no-store');
  header('Content-Transfer-Encoding: binary');
  header('Content-Disposition: inline; filename="'.$filename.'"');      
  header('Content-Length: '.$fsize);
  header('Content-Type: audio/'.$t);
  header('Accept-Ranges: bytes');
  header('Connection: Keep-Alive');
  header('Content-Range: bytes 0-'.$shortlen.'/'.$fsize); 
  header('X-Pad: avoid browser bug');
  header('Etag: '.$etag);

  readfile($path);

} else {   
  header('HTTP/1.0 404 Not Found');
  echo 'Error';    
} 
```

现在 Safari 找到了音频持续时间，但它是假的！它太长了，所以最后有几秒钟没有数据，这会阻止玩家......

此外，这不适用于 Opera。

你有解决这个问题的想法吗？

# ruby-on-rails - RoR：集中管理 Rails 中的字符串？

> ID：11137148
> 
> 赞同：1
> 
> 时间：2012-06-21T11:27:43.073
> 
> 标签：ruby-on-rails, string

在 Rails 项目中，我必须处理很多字符串，这些字符串在不同的视图中多次使用。将它们集中存储以便将来重用/维护/更改它们的最佳方法是什么？也许已经有一些我不知道的约定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:35:39.297

看看rails提供的[I18n](http://guides.rubyonrails.org/i18n.html)设施。即使您的应用程序只有一种语言，同样的原则也适用。

# php - 如何使用文本框值更改 url

> ID：11137150
> 
> 赞同：0
> 
> 时间：2012-06-21T11:27:57.157
> 
> 标签：php, mysql, html

我有一个网站，例如[http://www.example.com/](http://www.example.com/)
我想添加一个搜索框来搜索地址等，例如“南达科他州”，然后单击提交按钮，记录将从数据库中获取php（使用选择查询配置 mySQL）编码文件。我想在[http://www.example.com/south-dakota/](http://www.example.com/south-dakota/)这个网址上显示我的结果。所以我想用文本框值更改 url，相关记录将显示在该页面上。

例如，您可以查看这个网站 findbankrates.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:32:02.097

您可以在使用 GET 操作的 HTML 表单中设置文本字段。然后在您的 .htaccess 文件中使用重写规则，将 www.xyz.com/search.php?string=south%20dakota 变为 www.xyz.com/south%20dakota。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:37:04.577

使用标头重定向网址（'位置：[http](http://www.yoursite.com/) : //www.yoursite.com/'.variableformtextbox）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T02:14:05.640

您需要查看 mod_rewrite 来执行此操作...然后只需将表单提交到该 url。

**编辑：** Linkie： [URL重写](http://www.yourhtmlsource.com/sitemanagement/urlrewriting.html)

# sql - TSQL：在单个查询中选择特色产品

> ID：11137152
> 
> 赞同：0
> 
> 时间：2012-06-21T11:28:01.093
> 
> 标签：sql, sql-server-2008, tsql

在我的数据库中，我有产品表（ID int, ... , Sponsored bool） 我的目标是能够从表中获得 20 个随机产品。必须先退回赞助产品。如果赞助产品少于 20 件，我会随机获得非赞助产品，直到 20 件。

我可以一次选择吗？或者，如果没有一个选择尽可能高效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:32:37.940

```
declare @a table (ID int, Sponsored bit)

insert @a values(1, 1)
insert @a values(2, 0)
insert @a values(3, 0)

select top 20 * from @a order by sponsored desc, newid() 
```

# rabbitmq - 通过 kaazing javascript 库与 rabbitMQ DIRECT 交换使用时出错

> ID：11137153
> 
> 赞同：0
> 
> 时间：2012-06-21T11:28:01.240
> 
> 标签：rabbitmq, amqp, kaazing

我无法通过 kaazing javascript AMPQ 库发送发布消息。下面的代码非常适合 FANOUT 交换，但不适用于 DIRECT 交换。我能够连接但无法将消息发布到 DIRECT 交换。

```
function amqpTest(){
load();
var $ = function(s) { return document.getElementById(s); };
var console = $("console");

var log = function(message){
var pre = document.createElement("pre");
pre.style.wordWrap = "break-word";
pre.innerHTML = message;
console.insertBefore(pre, console.firstChild);
while(console.childNodes.length > 500){
console.removeChild(console.lastChild);
}
}

var url = "ws://localhost:8000/amqp";
var username = "guest";
var password = "guest";
var connect = $("connect");
var disconnect= $("disconnect");

var consumeExchange = "demo_direct_exchange";
var consumeMessageText = "call";
var alias = "player";

var myQueueName = "clientqueue";
var myConsumerTag = "clientkey";
var routingKey = "broadcastkey";
var exchangeName = consumeExchange;
var send = $("send");

connect.onclick = function(){
log("Connecting: "+ url + " " + username);
myQueueName = "client" + Math.floor(Math.random() * 1000000);
myConsumerTag = "client" + Math.floor(Math.random() * 1000000);

var version = "0-9-0";
amqp = new AmqpClient();
amqp.addEventListener("close", function(){
log("Disconnected");
});

amqp.connect(url, '/', {username:username, password:password}, version, openHandler);
}

var openHandler = function(){
log("CONNECTED");
log("Open Publish Channel...");
publishChannel = amqp.openChannel(publishChannelOpenHandler);
log("Open Consume Channel...");
consumeChannel = amqp.openChannel(consumeChannelOpenHandler);
};

var publishChannelOpenHandler = function(channel) {
log("Opened Publish Channel");
publishChannel.declareExchange(exchangeName, "direct", false, false, false);
publishChannel.addEventListener("declareexchange", function(){log("Exchange Declared : "+exchangeName)});
publishChannel.addEventListener("close", function() { log("Channel Closed : Publish Channel" )});

};

var consumeChannelOpenHandler = function(channel) {
log("Opened Consumed Channel");
consumeChannel.addEventListener("declarequeue", function(){ log("Queue Declared : " +myQueueName); });
consumeChannel.addEventListener("bindqueue", function() { log("QUEUE BOUND: " + exchangeName + " " + myQueueName)});
consumeChannel.addEventListener("subscribe", function() { log("CONSUME: " + myQueueName)});
consumeChannel.addEventListener("close", function() {log("CHANNEL CLOSED: consume channel");});
        consumeChannel.addEventListener("message", messageHandler);

consumeChannel.declareQueue(myQueueName, false, false, false, false, false)
 .bindQueue(myQueueName, exchangeName, routingKey, false)
 .consumeBasic(myQueueName, myConsumerTag, false, true, true, false);
}

var messageHandler = function(m){
alert("A");
var body  = m.body.getString(Charset.UTF8);

if (body == "start_auction"){
ss();
}
if (body == "new_bidder"){
alert("New Bidder");
}

//log(body);
};

disconnect.onclick = function() { 
log("DISCONNECT");
amqp.disconnect();
};

send.onclick = function(){
log ("SENDING MESSAGE ....");
var body = new ByteBuffer();
body.putString("new_bidder", Charset.UTF8);
body.flip();
var headers = {};
publishChannel.publishBasic(body, headers, consumeExchange, routingKey, false, false);

};

$("clear").onclick = function() { while (console.childNodes.length > 0)
{
console.removeChild(console.lastChild);
}
};

} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:37:53.953

明白了...必须删除 declareExchange 的代码，因为交换已经存在。然而，奇怪的错误只针对直接交换而不是扇出.. :)

# mysql - mysql中的条件Order by子句

> ID：11137159
> 
> 赞同：1
> 
> 时间：2012-06-21T11:28:09.220
> 
> 标签：mysql

我读过一些有同样问题的帖子。我试图调整他们的答案，但没有成功。我想按状态对列进行排序，而不是按状态对列进行进一步排序。可能以下查询将清除我的观点

```
SELECT a.*,STR_TO_DATE(d_date, "%m/%d/%Y")>CURDATE() as status
FROM table AS a ORDER BY status DESC, 
IF(status=0,
'DATEDIFF(STR_TO_DATE( a.d_date, "%m/%d/%Y" ),CURDATE()) DESC',
'DATEDIFF(STR_TO_DATE( a.d_date, "%m/%d/%Y" ),CURDATE()) ASC') 
```

更新：经过以下查询

```
SELECT a . * , STR_TO_DATE( d_date,  "%m/%d/%Y" ) > CURDATE( ) AS 
STATUS 
FROM  `table` AS a
ORDER BY STATUS DESC , IF( 
STATUS =0, DATEDIFF( STR_TO_DATE( a.d_date,  "%m/%d/%Y" ) , CURDATE( ) ) DESC , DATEDIFF( STR_TO_DATE( a.d_date, "%m/%d/%Y" ) , CURDATE( ) ) ASC ) 
LIMIT 0 , 30 
```

我有以下错误

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DESC, DATEDIFF(STR_TO_DATE( a.d_date, "%m/%d/%Y" ),CURDATE()) ASC) LIMIT ' at line 4 
```

如果我的表名`table`比这个记录

```
d_date
06/28/2012
06/23/2012
06/20/2012
06/19/2012 
```

如果当前日期是`06/21/2012`

输出应该是

```
d_date               status
06/23/2012              1
06/28/2012              1
06/20/2012              0
06/19/2012              0 
```

可能这些信息就足够了。如果还不清楚，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:03:18.317

试试这个——

```
SELECT
  a.*,
  STR_TO_DATE(d_date, '%m/%d/%Y') > CURDATE() AS status
FROM
  table AS a
ORDER BY
  status DESC, 
  IF(status = 0,
    DATEDIFF(STR_TO_DATE(a.d_date, '%m/%d/%Y'),CURDATE()) * -1,
    DATEDIFF(STR_TO_DATE(a.d_date, '%m/%d/%Y'),CURDATE())
  ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:31:22.947

我想这个（新的）解决方案可以解决问题：

```
SELECT a.*, STR_TO_DATE(d_date, "%m/%d/%Y")>CURDATE() as status 
FROM `table` AS a ORDER BY status DESC, 
IF(status=0,
CONCAT_WS(' ', DATEDIFF(STR_TO_DATE( a.d_date, "%m/%d/%Y" ),CURDATE()), 'DESC'),
CONCAT_WS(' ', DATEDIFF(STR_TO_DATE( a.d_date, "%m/%d/%Y" ),CURDATE()), 'ASC')) 
```

# api - 维基百科导出api版本

> ID：11137160
> 
> 赞同：1
> 
> 时间：2012-06-21T11:28:18.630
> 
> 标签：api, mediawiki, wikipedia-api

Wikipedia Export Api 会不时更改其 xml 架构版本：

前任。请求[http://en.wikipedia.org/wiki/Special:Export/Apple](http://en.wikipedia.org/wiki/Special:Export/Apple) 给出：

```
<mediawiki xsi:schemaLocation="http://www.mediawiki.org/xml/export-0.7/ http://www.mediawiki.org/xml/export-0.7.xsd" version="0.7" xml:lang="en"> 
```

以前它有 0.6 版本。

有没有办法请求特定的 xml 架构版本？否则，它只会破坏我的服务。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T17:58:03.880

Special:Export 不是 API，它主要用于在 wiki 之间手动移动数据。

[在https://en.wikipedia.org/w/api.php](https://en.wikipedia.org/w/api.php)有一个适当的 API，在[此处](https://www.mediawiki.org/wiki/API%3aMain_page)记录，您应该使用它进行所有自动访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:03:53.800

我不知道，另请参阅[Special:Export](http://www.mediawiki.org/wiki/Manual%3aParameters_to_Special%3aExport)和[Help:Export](http://meta.wikimedia.org/wiki/Help%3aExport)的参数。

是否可以根据[模式](http://www.mediawiki.org/xml/export-0.7.xsd)动态解析文件？或者您是否尝试过使用[查询 api](http://www.mediawiki.org/wiki/API%3aQuery)？

# comments - 如何去除柜台上的 Disqus 反应？

> ID：11137162
> 
> 赞同：13
> 
> 时间：2012-06-21T11:28:27.783
> 
> 标签：comments, wordpress, disqus

**Stackoverflow 忍者的两个问题：**

1.  我有一个使用 Disqus 的博客。但是，我使用的主题没有空间来放置“反应”（Twitter 的数量），只有评论数量的空间。

    好的，基本上我没有足够的空间来处理为 Disqus 提供的“反应”。有谁知道我怎样才能从 Disqus 中删除“反应”计数？

2.  新的 Disqus 放置了一个框，其中包含“您的站点正在使用新的 Disqus。查看 Disqus 2012 常见问题解答或访问我们的支持页面寻求帮助。” 消息，我很想删除它。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T20:21:04.060

**编辑 2：我们通过在 Disqus 设置中包含评论计数/反应计数文本选项使这变得更容易。现在只需转到您的 Disqus 管理员并添加下面原始答案中提到的 HTML 标记，就可以实现这一点。**

**编辑 1：几周前，由于 Disqus Classic 设置的弃用，以下解决方案不再有效。目前，删除反应计数器的唯一方法是完全禁用反应，或使用[Disqus API](http://disqus.com/api/docs/threads/set/)获取原始线程数据。**

在 Disqus Classic 中，我们有一种方法可以在外观设置中更改评论计数链接文本。我们正在努力将其添加回 Disqus 2012，但现在您可以通过以下步骤解决它：

1.  转到您的 Disqus 管理员的常规设置，然后取消选中最顶部的“启用 Disqus 2012”
2.  单击“保存更改”后，您会在顶部看到一个名为“外观”的新选项卡 - 单击该选项卡
3.  在您的外观设置中，向下滚动到“评论计数链接”
4.  从每个条目中删除“评论”一词。然后，您需要插入一些内联样式为“display:none;”的 HTML 删除反应文本。

以下是所有字段的外观，以获取一个数字：

```
Zero Comments      | 0<span style="display:none;">
One Comment        | 1<span style="display:none;">
Multiple Comments  | {num}<span style="display:none;">

Zero Reactions     | 0 Reactions</span>
One Reaction       | 1 Reaction</span>
Multiple Reactions | {num} Reactions</span> 
```

现在您可以继续重新启用 Disqus 2012，评论计数链接首选项将继续存在。

我们还关闭了“New Disqus”标题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T15:57:18.730

取消选中“为您的站点启用 Disqus 2012 功能”，然后转到外观选项卡，您将在那里找到评论计数和反应设置，您可以根据需要自定义单词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T19:24:39.157

这应该是对置顶答案的评论，但我没有50个声望点，所以我无法评论。相反，请将此答案视为关闭 Disqus 2012 并在您的更改未生效时再次打开它的建议的附加组件。

我在使用 Disqus Wordpress 插件时遇到了这个问题。现在关闭 Disqus 2012 功能不再是一种选择，停用然后重新激活插件似乎具有刷新任何保持启用反应的相同效果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T14:48:01.343

2）你可以用CSS来做。

```
#help-notice {
    display: none;
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-26T05:20:08.957

您可以在 disqus 上使用自定义 CSS 代码，只需将其添加到外观部分 [http://disqus.com/admin/settings/appearance/](http://disqus.com/admin/settings/appearance/)

```
#disqus_thread #help-notice {
    display: none;
} 
```

# jquery - 使用 jQuery 操作后保持对齐的内联块元素的对齐

> ID：11137166
> 
> 赞同：2
> 
> 时间：2012-06-21T11:28:38.580
> 
> 标签：jquery, css, dom, text-align

我正在使用 text-align:justify 来均匀地隔开内联块元素。我正在使用 jQuery 交换某些元素，以便它们更适合（例如更有效地填充行）。然而，浏览器不再正确地证明交换的元素是正确的。有没有办法让浏览器重新调整元素来克服这个问题？

**编辑** 这是一个显示问题的jsfiddle：http: [//jsfiddle.net/sprintstar/HKDd9/3/](http://jsfiddle.net/sprintstar/HKDd9/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:17:40.323

问题在于行内块元素之间缺少空格。你错过的是文本节点：

```
$(function() {
    var eq3 = $('.container a:eq(3)');
    var eq4 = $('.container a:eq(4)');
    eq4.before(eq3).before(" ");
});​ 
```

[http://jsfiddle.net/archatas/HKDd9/4/](http://jsfiddle.net/archatas/HKDd9/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:04:30.460

尽管我不确定您的代码未按预期工作的原因，但我有一个可能的解决方案。也许有人可以对这个问题有所了解。

首先`eq4.before(eq3);`意味着你把它放回你选择它的地方。我相信你的意思是`eq4.insertBefore(eq3);`

我尝试添加一个新元素并且效果很好

```
 $('<a href="#" class="sq-1"><img src="http://placehold.it/64x32" /></a>').insertBefore(eq3); 
```

编辑：但克隆相同的元素不会产生相同的结果。

```
eq4.clone().insertBefore(eq3);
eq4.remove(); 
```

# c# - 使用 Facebook C# SDK 进行持久登录

> ID：11137167
> 
> 赞同：-2
> 
> 时间：2012-06-21T11:28:40.323
> 
> 标签：c#, facebook, winforms, facebook-c#-sdk, facebook-oauth

我正在使用 Facebook C# SDK 6.0 编写一个新应用程序。到目前为止，我成功地完成了所需的所有功能。我仍然坚持一件事。

现在，在我的应用程序中，用户总是通过 winform 中的 Web 浏览器组件登录。

我想在数据库中存储用户的登录详细信息，这样他每次启动应用程序时都不需要使用 Web 浏览器组件登录。

我创建了一个设置表单，用户可以在其中键入他的登录详细信息。我应该在数据库中保存什么以便之后以另一种形式简单地执行请求？是否可以不使用网络浏览器登录？

谢谢你的帮助，托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T15:15:09.467

你试过 HttpWebRequest 吗？你可以传递SDK的链接吗？

# bash - 为什么 bash 脚本的输出会乱序？

> ID：11137169
> 
> 赞同：-4
> 
> 时间：2012-06-21T11:28:46.817
> 
> 标签：bash, clearcase

我遇到了产生乱序输出的 bash 脚本的问题。
该脚本在多个地方使用，通常可以正常工作。

然而，在一个特定的目录中，它完全不同步并使其输出文件无用。
目录结构相同，其输入数据也非常相似。（在 ClearCase 中工作，如果这有影响的话。）

当 bash 正常运行时，它的输出如下所示：

```
Techpack Meta Version is currently 3, has this changed? y/n n
Have Techpack Version Dependencies changed? y/n n
Updating Version Properties

Building TPI File
Inside make_tpi_file
Created ../package/12.0/M_E_LCHS_DATAGEN_R0E_b1.tpi
Checked out "package/12.0/" from version "/main/at_job/1".
Created element "package/12.0/M_E_LCHS_DATAGEN_R0E_b1.tpi" (type "compressed_file").
Created branch "at_job" from "package/12.0/M_E_LCHS_DATAGEN_R0E_b1.tpi" version "/main/0".
Checked out "package/12.0/M_E_LCHS_DATAGEN_R0E_b1.tpi" from version "/main/at_job/0".
Checked in "package/12.0/M_E_LCHS_DATAGEN_R0E_b1.tpi" version "/main/at_job/1".
Checked in "package/12.0/" version "/main/at_job/2". 
```

当 bash 不起作用时，它的输出如下所示：

```
Techpack Meta Version is currently 3, has this changed? y/n n
Have Techpack Version Dependencies changed? y/n n
Updating Version Properties

Building TPI File
Inside make_tpi_file
_R0E_b1.tpipackage/12.0/M_E_HANF_DATAGEN
Checked out "package/12.0/" from version "/main/at_job/4".
_R0E_b1.tpi" (type "compressed_file").A_DATAGEN
_R0E_b1.tpi" version "/main/0".package/12.0/M_E_HANF_DATAGEN
_R0E_b1.tpi" from version "/main/at_job/0".
_R0E_b1.tpi" version "/main/at_job/1".GEN
Checked in "package/12.0/" version "/main/at_job/5".

/vobs/job/job_mg/test_tools/Data_Generator/HANF/FeatureTest/build
Checked in "install/version.properties" version "/main/at_job/14".
Checked in "../package/12.2/build.number" version "/main/at_job/4". 
```

一般来说，什么会导致 bash 脚本产生这样一个错误的输出？
考虑到它适用于许多目录，我认为问题不在于代码本身，而在于脚本读取的数据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T11:32:58.163

说真的，您希望我们在只查看其输出的同时调试脚本吗？

这是一项艰巨的任务。

尽管如此，我的猜测还是（请注意，它只能是猜测，因为我不知道脚本在做什么）某种竞争条件，其中脚本的步骤相互依赖但不是强制同步，当它们以意外的顺序完成时导致失败。

引用“代码是从某个地方复制的”作为它应该没有错误的原因也是非常离谱的，真的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:58:29.787

注意：您的脚本应该做的是：

*   签出 tpi 文件的父目录
*   创建元素（文件） tpi ( [`cleartool mkelem`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_mkelem.htm))
*   签出该（新的和空的）元素
*   （其内容被正在构建的实际 tpi 文件覆盖）
*   签入该文件
*   检查父目录。

您需要检查 bash 脚本如何调用 clearcase 命令，因为它似乎存在刷新问题（类似于“ [Getting another program's output as input on the fly](https://stackoverflow.com/a/1408710/6309) ”）

如果您的脚本正在设置动态视图，则可能会发生这种情况：请参阅“ [Python 和 ClearCase setview](https://stackoverflow.com/a/10252612/6309) ”：[`cleartool setview`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_setview.htm)创建一个子 shell，它可以使输出有点随机。

在 OP 的案例中，[patrick](https://stackoverflow.com/users/1370285/patrick)报告：

> 我的问题是由**读取变量中隐藏的空白字符**引起的：
> 我的问题是**上面提到的脚本从另一个文件中读取变量**。
> 一些所说的变量有尾随空格字符，这是原因。

# visual-studio-2010 - 如何在 Visual C# 项目类型节点之外创建项目模板节点？

> ID：11137170
> 
> 赞同：8
> 
> 时间：2012-06-21T11:28:53.500
> 
> 标签：visual-studio-2010, sdk, vsix

如果我这样做，请使用 VSIX 项目

```
<VSTemplate Include="ProjectTemplate1.vstemplate">

    <OutputSubPath>Sample Test Project</OutputSubPath>

</VSTemplate> 
```

位置是 **\bin\Debug\ProjectTemplates\CSharp\Sample Test Project\1033\ProjectTemplate1.zip**

这将在 VS Installed Templates 中的 Visual C# 模板中创建一个项目模板。但是，我不想将 Visual C# 作为我的项目类型节点。它应该在 Visual C# 项目类型节点之外。

我怎样才能做到这一点？我需要做哪些改变以及如何做？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:01:30.800

根据[http://blogs.msdn.com/b/visualstudio/archive/2010/03/04/creating-and-sharing-project-item-templates.aspx](http://blogs.msdn.com/b/visualstudio/archive/2010/03/04/creating-and-sharing-project-item-templates.aspx)，

> .vstemplate 文件根节点中的“类型”属性。项目模板位于“ProjectTemplates”下。项目模板位于“ItemTemplates”下。
> 
> 路径的“语言”部分（在我们的示例中为“CSharp”）由 .vstemplate 文件中的节点确定。

因此，您似乎需要从不同类型的项目创建项目模板，或者在您正在创建的项目中编辑项目模板类型。

# c++ - itoa 和 uitoa 用法

> ID：11137172
> 
> 赞同：0
> 
> 时间：2012-06-21T11:29:06.263
> 
> 标签：c++, c, pic

我正在使用 PIC-Web 的热敏电阻读取项目房间的温度。我必须评论代码以表明我理解它。我理解代码的第一部分（我认为），但第二部分不太了解。这是代码：

```
void HTTPPrint_temp(void)
{
// We define TempString as a string of bytes
BYTE TempString[8];

// We define SP_String as a string of bytes
BYTE SP_String[8];

// We define temperature and tmp as integers
int temperature, tmp;

// We define r and z as floating point number
float r, z;

#if defined(__18CXX)
// We utilize channel 9 for the A/D conversion
ADCON0bits.CHS0 = 1;
ADCON0bits.CHS1 = 0;
ADCON0bits.CHS2 = 0;
ADCON0bits.CHS3 = 1;

// We wait for the A/D conversion to end
ADCON0bits.GO = 1;
while(ADCON0bits.GO);

// We convert the 10-bit value into an ASCII string
tmp = (WORD)ADRES;

// We read and calculate the value of the temperature 
r = ((1024.0*10000.0)/(float)tmp)-10000.0;

// We calculate the value in degrees Celsius
temperature = 4100.0/log(r/0.0111182) - 273.15;

// We alocate the value of the temperature to TempString 
itoa(temperature, TempString);

#else

// Don't know?
ADval = (WORD)ADC1BUF0;

// Don't know
uitoa(ADval, (BYTE*)AN0String);

#endif

// We open up a socket and send the data to the website
TCPPutString(sktHTTP, TempString);

} 
```

有人可以解释我们为什么使用：

```
itoa 
else 
ADval=(WORD)ADC1BUF0
uitoa 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:34:52.947

这是使用条件编译指令为两种不同的架构定义的。

您需要进一步研究的部分是：

```
#if defined(__18CXX)
  // code for PIC18
#else
  // code for other 
#endif 
```

我不熟悉 PIC 系列，但您应该检查 PIC18 控制器是否具有与其他 PIC 不同的 ADC 设置。

该`__18CXX`符号可能是由您的编译器自动定义的。您可能能够找到所需目标设备的设置，这将导致在编译期间使用正确的代码。

# java - 从 StaleObjectStateException 中恢复

> ID：11137173
> 
> 赞同：0
> 
> 时间：2012-06-21T11:29:06.640
> 
> 标签：java, hibernate

我有一种情况，一个线程可以从数据库中检索一个对象，并对其进行编辑，当刷新它时，我得到一个**StaleObjectStateException**，因为与此同时另一个线程已经编辑了同一个对象（我使用乐观锁定）。我可以明白为什么会这样，但我无法改变这种行为。

所以我尝试做的是再次从数据库中检索对象并在最新版本上重新应用更改，但是在我什至更改任何内容之前进行检索后，我就会得到**另一个**StaleObjectStateException，这是为什么呢？

```
try{
    songs = nextSongGroup.getSongs(session);
    modifySongs(songs);
    session.flush();
}
catch(StaleObjectStateException sobe){
     songs = nextSongGroup.getSongs(session);
     modifySongs(songs);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:35:23.913

如果你得到这个例外，那就太晚了。您需要丢弃会话并获得一个新会话。同一会话上的任何查询都将导致相同的异常。

理论上调用 em.clear(); 并重新运行相同的查询可能会有所帮助。我从来没有试过这个。

对我来说，我通常会向用户展示一个糟糕的页面，该页面有一个重试按钮，可以在干净的会话中再次运行他的请求。

# database - 查询以获取 SQL Server 2008 中表的转置

> ID：11137176
> 
> 赞同：0
> 
> 时间：2012-06-21T11:29:07.460
> 
> 标签：database, sql-server-2008

我知道我没有正确写出问题，所以将在这里详细解释。

我有具有以下结构的表 TrnOutlet

```
 Retailer    Flag    Date
            ------------------------------------------------------------
                26901032    3     2012-05-05 00:00:00
                26901032    1     2012-04-28 00:00:00
                26901032    2     2012-04-21 00:00:00
                26901032    3     2012-04-20 00:00:00
                26901033    1     2012-04-28 00:00:00
                26901033    3     2012-04-28 00:00:00
                26901033    1     2012-04-21 00:00:00
                26901033    1     2012-04-20 00:00:00 
```

我希望输出是

```
 RetailerId  Flag Date flag date flag date....
        ------------------------------------------------------------

        RetailerID1 flag1 Date1 flag2 Date2 ...... flagn Daten
        RetailerID2 flag1 Date1 flag2 Date2 ...... flagn Daten
        .
        .
        .
        RetailerIDn flag1 Date1 flag2 Date2 ...... flagn Daten 
```

**输出将是**

```
 RetailerId  Flag Date      flag date       flag    date      flag   date
     ----------------------------------------------------------------------------------
        26901032     3   2012-05-05 1   2012-04-28  2    2012-04-21   3    2012-04-20 
        26901032     1   2012-04-28 3   2012-04-28  1    2012-04-21   1    2012-04-20 
```

**注意：日期和标志可以重复，就像我们在上面的例子中看到的那样**

**编辑：** **我用过的查询**

```
select retailerId,BeatId,
    MAX(case when TransactDate <> getDate() then TransactDate else '' end ) as Transactdate,
    MAX(case when CompleteFlag in ('1','2','3') then completeFlag else '' end) as completeFlag
    from TrnOutletHistory
    group by TransactDate,RetailerID,BeatID
    order by retailerID desc 
```

# java - 需要准备好的语句sql字符串建议吗？

> ID：11137177
> 
> 赞同：0
> 
> 时间：2012-06-21T11:29:16.530
> 
> 标签：java, hibernate, prepared-statement

嗨，我有一个类，其中包含检查数据库值的不同方法。每个方法都针对一个特定的表，所以每次调用该方法时选择 sql 保持不变，只有要检查的 where 子句值发生变化，所以我使用准备好的语句

喜欢

```
public boolean checkVal(Session session,String b,String c,String d)
    {
        String sql="select a from tbl_name where b=? and c=? " +
                "and d=? ";
        Query query=session.createSQLQuery(sql).addScalar("a",Hibernate.STRING);
        query.setParameter(0,b);
        query.setParameter(1,c);
        query.setParameter(2,d);

    if(){
some check and return
}
} 
```

这个方法要被调用100000次，所以我认为sql会重新生成，在这里使用准备好的语句是没用的，那么我应该怎么做才能提高性能呢？这样做的正确方法应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:41:49.577

您可以使用 Hibernate 命名查询，这样可以避免 Hibernate 在每次调用时对 HQL 或 SQL 进行解析（为什么在这里使用 SQL 查询而不是 HQL？）。

最后，Hibernate 将要求 JDBC 连接创建一个准备好的语句。而且，如果您的连接池或驱动程序缓存了准备好的语句，那么如果经常使用此方法，您很可能会得到一个已经准备好的语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:36:51.483

不，该`sql`变量只是一个常量字符串表达式，因此不会每次都创建它。`String`每次调用时都会使用一个对象。

即使这*确实*每次都会创建一个新字符串，这也不太可能成为性能瓶颈。你测量过性能吗？有问题吗？您是否有任何理由相信问题是由于此代码而不是（例如）数据库本身的瓶颈造成的？

我*希望*Hibernate 为此使用`PreparedStatement`缓存，但您应该研究一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T11:34:07.507

SQL 字符串可以是静态的和最终的；没有理由每次都重新创建它。

但这不是你最大的问题。

`PreparedStatement`为绑定和反复执行而生。没有比这更好的了。JDBC 驱动程序可以缓存 PreparedStatement 一旦它被解析和验证，所以你只做一次。

您是否测量过性能并发现此方法存在性能问题？如果没有，在你有一些数据之前不要猜测你有问题。

我会问为什么必须重复调用该方法。对于 100,000 个用户，是否每个人一次？如果是，那么除了减少听众或消除通话需求外，您无能为力。（想想缓存。）单个用户 100,000？弄清楚如何拨打一个电话或批量处理它们。有了这种安排，你就会死去。你夸张吗？深呼吸，放松，并获取一些数据。

# spring-mvc - spring mvc的参数注解不被继承

> ID：11137180
> 
> 赞同：1
> 
> 时间：2012-06-21T11:29:26.170
> 
> 标签：spring-mvc

我有一个用于 spring-mvc 3.1 控制器的接口，看起来像

```
 public interface RestCRUDOperations<T> {
         @RequestMapping(value = "/{id:\\d+}", 
                         method = RequestMethod.GET, 
                         produces = "application/json")
         public  ResponseEntity<T> getById(@PathVariable("id") String sourcId);
         //other code omitted
  } 
```

我观察到的是，在实现类时，@RequestMapping 注释仍然有效（我不必将其复制到方法实现上）但 @PathVariable 没有效果，直到我将注释复制粘贴到参数之前的相应位置. 有谁知道是否有办法解决这个问题？和/或spring承认这是一个它打算修复的错误或什么？

编辑：- 一种丑陋的方法可能是让抽象类翻译方法，即为`public abstract class RESTAdapter implements RestCRUDOperations`这些方法提供最终实现并委托给 2 个抽象方法，这个抽象类是控制器扩展的。
我想要一些自动的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-29T15:23:21.963

现在跟踪器出现问题.. 请参阅[https://jira.spring.io/browse/SPR-14526](https://jira.spring.io/browse/SPR-14526)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:03:54.710

我见过的所有注释几乎都是一样的。原因是，扫描它们的代码只检查层次结构中最低级别的孩子。

作为一种解决方法，我建议在基类中编写一个受保护的包装方法。然后，您可以从实现此接口的基类或派生类中使用它。这与您的建议相似。

最后，作为一个友好的建议，从纯粹的结构角度扩展其他 Controller 类可能是一个坏主意。你几乎总是会后悔的。

# php - 在 Elastic Beanstalk 中部署 Zend 应用程序？

> ID：11137181
> 
> 赞同：0
> 
> 时间：2012-06-21T11:29:28.237
> 
> 标签：php, zend-framework, amazon-web-services, amazon-elastic-beanstalk

嗨，我需要有关在 aws beanstalk 上部署基于 zend 框架的应用程序的帮助。到目前为止，我已经为 mysql 数据库配置了 aws rds，但是在 beanstalk 中部署应用程序对我不起作用，还需要知道 Application Health Check URL 的目的是什么for和Document Root是用来指什么的？谢谢 [-}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:27:26.827

解决方案是使用示例应用程序运行 beanstalk。通过这样做，它将创建一个实例 EC2 并适应环境。之后尝试上传您的应用程序并将运行状况检查的 url 设置为“/”，将根文件夹设置为“/”。

如果您仍然遇到健康检查失败，您必须等待一段时间，直到 EC2 实例完成其状态检查。

# yii - 任何 Yii 验证模式 - 如何允许插入缺少必填字段？

> ID：11137184
> 
> 赞同：1
> 
> 时间：2012-06-21T11:29:40.327
> 
> 标签：yii

乍一看，这可能看起来很奇怪。

我们希望允许用户保存到数据库中，即使缺少一些必填字段。

然后，当用户希望发布这些记录时，不应该被允许，因为缺少这些必填字段。

也许，创建某种所需的变体来告诉我们： PUBLISHING 需要，但 INSERTING 不需要；

考虑到您的 Yii 知识，我们应该在这种情况下使用某种模式吗？

## 更新

场景似乎是一个不错的方法，但文档建议添加：

```
$model = new MyActiveRecord('Inserting'); 
```

在我们的控制器上。

但是，在我的控制器上，我有：

```
public function actionCreate()
{
  $this->layout = 'admin';

  $model=new HsGuestbook;

  $localized[] = $this->getExtraModelGuestTr();

  if(isset($_POST['HsGuestbook']))
  {
   ... 
```

所以，我试着做：

```
 if(isset($_POST['HsGuestbook']))
  {
     //check validation scenarios
     if ($model->status === 0) { //if publish isn't set:
          $model->setScenario('Insert'); 
     } elseif ($model->status === 1){
           $model->setScenario('Publish'); 
     } 
```

在我的模型上：

```
public function rules()
{
    return array(
         array('name, category', 'required', 'on'=>'Insert'),
         array('name, category, image', 'required', 'on'=>'Publish')) 
```

我没有显示任何验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:02:43.627

您可以使用 Yii 的场景：您声明一个场景如“插入”，另一个场景如“发布”。

在您的模型规则中，您将拥有：

```
array('username, password, all your required attibutes', 'required', 'on'=>'Publishing'), 
// You defined with the "on" the scenario(s) in which the rule must apply 
```

然后在您的控制器中，您将调用：

如果您需要插入，请将场景设置为“插入”

```
$model = new MyActiveRecord('Inserting'); 
```

如果您需要发布，请将场景设置为“发布”

```
$model = new MyActiveRecord('Publishing'); 
```

链接：[了解场景](http://www.yiiframework.com/wiki/266/understanding-scenarios/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T11:41:46.923

请记住，不允许必填字段的限制来自数据库而不是 yii。您的模型基于数据库中的模式。即使您更改模型类中的规则以确保安全，数据库也不会允许插入通过，因为缺少必填字段。

我不建议从数据库中删除任何限制，如何在表中添加另一个字段，将条目标记为可发布或不可发布。您可以通过指定默认值并将发布标志设置为 false 来克服缺少的必需条目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T14:00:07.917

编辑是一个完全不同的问题，所以我正在创建一个新的回复

在分配场景之前，您需要使用 post 值填充模型

```
 <?php if(isset($_POST['HsGuestbook'])) {
         //Assign the post value to your model
         $model->attributes =  $_POST['HsGuestbook'];          
         //check validation scenarios 
          if ($model->status === 0) 
          { 
            //if publish isn't set: 
            $model->setScenario('Insert');
           } 
          elseif ($model->status === 1)
          { 
            $model->setScenario('Publish');
              }
         //Here you should validate/save the datas
        } ?> 
```

然后你可以验证数据

```
$model->validate(); 
```

哪个返回真或假。或者您可以在保存数据时验证数据：

```
$model->save(); // will validate the datas then save them 
```

它也返回 true 或 false

# dns - 创建私有名称服务器，注册商不知道如何

> ID：11137192
> 
> 赞同：0
> 
> 时间：2012-06-21T11:29:53.307
> 
> 标签：dns, private, nameservers, registrar

我已在扩展名 .al（阿尔巴尼亚）下注册了一个域。但是在我的域面板中，没有创建我自己的名称服务器的选项。我已经要求他们为我做这件事，但他们似乎很困惑，不知道该怎么做。

我相信一定有办法。有人可以告诉我他们需要做什么，以便我将这些信息传递给他们吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:37:19.453

也许您应该更改注册商。例如，我可以选择指定我自己的域服务器（注册商：nic.ru，.su 区域中的域）。

# javascript - 为什么 Collection.fetch() 不更新视图？

> ID：11137195
> 
> 赞同：0
> 
> 时间：2012-06-21T11:29:58.470
> 
> 标签：javascript, ruby-on-rails, backbone.js

我对 Rails TodoList 应用程序有以下看法。没有javascript错误。我什至可以通过 .fetch() 方法看到对 /todos 的 GET 请求。问题是，没有调用 addOne 函数，因此没有视图更新。

```
$(function(){
Todos = new TodoList.Collections.Todos;
TodoList.Views.TodoView = Backbone.View.extend({
    tagName: "li",
    events: {},
    initialize: function(){},
    template: _.template('<li> {{task }}</li>'),
    render: function(){
        var todo = this.model.toJSON();
        //return this.template(todo);
        return "blah";
    }
});

TodoView = TodoList.Views.TodoView;

TodoList.Views.AppView = Backbone.View.extend({
    el: $("#todo_app"),
    events: {
        "submit form#new_todo": "createTodo"
    },
    initialize: function(){
        _.bindAll(this, 'addOne', 'addAll','render');
        Todos.bind("add", this.addOne);
        Todos.bind("refresh", this.addAll);
        Todos.bind("all", this.render);
        Todos.fetch();
    },

    addOne: function(todo){
        var view = new TodoView({model: todo});
        this.$("#todo_list").append(view.render().el);
        alert("here");
    },

    addAll: function(){
        Todos.each(this.addone);
    },

    newAttributes: function(event){
        var new_todo_form = $(event.currentTarget).serializeObject();
        return {
            dog: {
                name: new_todo_form["todo[task]"],
                age: new_todo_form["todo[done]"]
            }
        };
    },

    createTodo: function (e){
        e.preventDefault();
        var params = this.newAttributes(e);
        Dogs.create(params);
    }
});
}); 
```

另外，我尝试使用手动调用它

```
this.addOne({task: "blah", done:"true"}); 
```

在初始化函数中。这会引发 javascript 错误，说明 toJSON 函数未定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:59:39.467

我认为您打错字并写`refresh`而不是`reset`. 事件是`reset`，所以你必须替换这一行：

```
Todos.bind("refresh", this.addAll); 
```

和：

```
Todos.bind("reset", this.addAll); 
```

# php - 在 PHP 中按顺序解析 XML

> ID：11137204
> 
> 赞同：1
> 
> 时间：2012-06-21T11:30:39.977
> 
> 标签：php, xml, xml-parsing, simplexml

我有一个如下的 XML 字符串：

```
<?xml version="1.0" encoding="utf-8"?>
<document id="0" name="RegSimple" Version="0.1">
<Description>
    Configuration document for simple registration of incidents.
    This document will contain both the fixed and the user-defined fields to
    show on the registration screen.
</Description>
<Fields>
    <Textbox id="1" name="IncidentID" visibility="Hidden" width="500"
        displayreadonly="False" />
    <Comment id="200" height="10" name="c1" caption=" " />
    <Header id="100" name="Header" caption="Description" />
    <Radiobox id="2" name="Type" caption="Feedback type" width="500"
        type="19" displayreadonly="true"></Radiobox>
    <Textbox id="3" name="Description" caption="My feedback"
        width="500" height="75" multiline="True" required="True"
        displayreadonly="True" />
    <Textbox id="4" name="Incident" caption="Title *" width="500"
        height="25" multiline="False" required="True" displayreadonly="False" />
    <Comment id="201" width="500" name="Comment2"
        caption="* All messages are published with a short title that describes the feedback"
        multiline="True" height="40" />
    <Comment id="202" height="20" name="c1" caption=" " />
    <Combobox id="5" name="Unit" caption="Unit" width="500" type="12"
        required="True" displayreadonly="True"></Combobox>
    <Combobox id="6" name="Country" caption="Country" width="500"
        type="11" required="True" displayreadonly="True"></Combobox>
    <Textbox id="7" name="Office" caption="Office" height="50"
        width="500" multiline="True" displayreadonly="True" />
    <Textbox id="8" name="Cause" caption="Cause" height="50"
        width="500" multiline="True" displayreadonly="True" />
    <Textbox id="9" name="Action" caption="Recommended actions"
        height="50" width="500" multiline="True" displayreadonly="True" />
    <Combobox id="10" name="Theme" caption="Theme" width="500"
        type="3" required="True" displayreadonly="True"></Combobox>
    <Header id="102" name="Time" caption="Date, Time and location" />
    <Datetime id="11" name="Date" caption="Date" width="120"
        displayreadonly="True" />
    <Textbox id="12" name="Time" caption="Time" width="120"
        displayreadonly="True" property="True" />
    <Textbox id="13" name="Location" caption="Location" width="500"
        displayreadonly="True" />
    <Header id="103" name="info" caption="Contact information" />
    <Textbox id="14" name="Name" caption="Name" width="500" tag="user.name"
        displayreadonly="False" />
    <Textbox id="15" name="E-Mail" caption="E-Mail" width="500"
        tag="user.e-mail" displayreadonly="False" />
    <Textbox id="16" name="Registered date" visibility="Hidden"
        width="500" tag="system.date" displayreadonly="False" />
</Fields>
</document> 
```

我希望按顺序解析 XML 中的元素，即按照它们在原始字符串中出现的顺序。但是使用`SimpleXMLElement`并`simplexml_load_string`给出类似元素的数组，如下所示：

```
object(SimpleXMLElement)[292]
  public '@attributes' => 
    array
      'id' => string '0' (length=1)
      'name' => string 'RegSimple' (length=9)
      'Version' => string '0.1' (length=3)
  public 'Description' => string '
    Configuration document for simple registration of incidents.
    This document will contain both the fixed and the user-defined fields to show on the registration screen.
  ' (length=178)
  public 'Fields' => 
    object(SimpleXMLElement)[293]
      public 'Textbox' => 
        array
          0 => 
            object(SimpleXMLElement)[294]
              public '@attributes' => 
                array
                  'id' => string '1' (length=1)
                  'name' => string 'IncidentID' (length=10)
                  'visibility' => string 'Hidden' (length=6)
                  'width' => string '500' (length=3)
                  'displayreadonly' => string 'False' (length=5)
          1 => 
            object(SimpleXMLElement)[298]
              public '@attributes' => 
                array
                  'id' => string '3' (length=1)
                  'name' => string 'Description' (length=11)
                  'caption' => string 'My feedback' (length=11)
                  'width' => string '500' (length=3)
                  'height' => string '75' (length=2)
                  'multiline' => string 'True' (length=4)
                  'required' => string 'True' (length=4)
                  'displayreadonly' => string 'True' (length=4)
          2 => 
            object(SimpleXMLElement)[299]
              public '@attributes' => 
                array
                  'id' => string '4' (length=1)
                  'name' => string 'Incident' (length=8)
                  'caption' => string 'Title *' (length=7)
                  'width' => string '500' (length=3)
                  'height' => string '25' (length=2)
                  'multiline' => string 'False' (length=5)
                  'required' => string 'True' (length=4)
                  'displayreadonly' => string 'False' (length=5)
      public 'Comment' => 
        array
          0 => 
            object(SimpleXMLElement)[295]
              public '@attributes' => 
                array
                  'id' => string '200' (length=3)
                  'height' => string '10' (length=2)
                  'name' => string 'c1' (length=2)
                  'caption' => string ' ' (length=1)
          1 => 
            object(SimpleXMLElement)[300]
              public '@attributes' => 
                array
                  'id' => string '201' (length=3)
                  'width' => string '500' (length=3)
                  'name' => string 'Comment2' (length=8)
                  'caption' => string '* All messages are published with a short title that describes the feedback' (length=75)
                  'multiline' => string 'True' (length=4)
                  'height' => string '40' (length=2)
          2 => 
            object(SimpleXMLElement)[301]
              public '@attributes' => 
                array
                  'id' => string '202' (length=3)
                  'height' => string '20' (length=2)
                  'name' => string 'c1' (length=2)
                  'caption' => string ' ' (length=1)
      public 'Header' => 
        array
          0 => 
            object(SimpleXMLElement)[296]
              public '@attributes' => 
                array
                  'id' => string '100' (length=3)
                  'name' => string 'Header' (length=6)
                  'caption' => string 'Description' (length=11)
          1 => 
            object(SimpleXMLElement)[308]
              public '@attributes' => 
                array
                  'id' => string '102' (length=3)
                  'name' => string 'Time' (length=4)
                  'caption' => string 'Date, Time and location' (length=23)
          2 => 
            object(SimpleXMLElement)[312]
              public '@attributes' => 
                array
                  'id' => string '103' (length=3)
                  'name' => string 'info' (length=4)
                  'caption' => string 'Contact information' (length=19)
      public 'Radiobox' => 
        object(SimpleXMLElement)[297]
          public '@attributes' => 
            array
              'id' => string '2' (length=1)
              'name' => string 'Type' (length=4)
              'caption' => string 'Feedback type' (length=13)
              'width' => string '500' (length=3)
              'type' => string '19' (length=2)
              'displayreadonly' => string 'true' (length=4)
      public 'Combobox' => 
        array
          0 => 
            object(SimpleXMLElement)[302]
              public '@attributes' => 
                array
                  'id' => string '5' (length=1)
                  'name' => string 'Unit' (length=4)
                  'caption' => string 'Unit' (length=4)
                  'width' => string '500' (length=3)
                  'type' => string '12' (length=2)
                  'required' => string 'True' (length=4)
                  'displayreadonly' => string 'True' (length=4)
          1 => 
            object(SimpleXMLElement)[303]
              public '@attributes' => 
                array
                  'id' => string '6' (length=1)
                  'name' => string 'Country' (length=7)
                  'caption' => string 'Country' (length=7)
                  'width' => string '500' (length=3)
                  'type' => string '11' (length=2)
                  'required' => string 'True' (length=4)
                  'displayreadonly' => string 'True' (length=4) 
```

在此结果中，所有**文本框**元素都以单个数组的形式返回。同样，无论原始 XML 中的顺序如何，所有**注释**和**组合框都在单独的数组中返回。**

谁能告诉我如何按实际顺序解析元素？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:42:30.280

您可以使用[`SimpleXmlIterator`](http://php.net/manual/en/class.simplexmliterator.php)and[`RecursiveIteratorIterator`](http://php.net/manual/en/class.recursiveiteratoriterator.php)遍历树：

```
$tree = new RecursiveIteratorIterator(
    new SimpleXmlIterator($xml),
    RecursiveIteratorIterator::SELF_FIRST
);

foreach ($tree as $node) {
    echo $node->getName(), PHP_EOL;
} 
```

将输出（[演示](http://codepad.viper-7.com/gxrHfj)）

```
Description
Fields
Textbox
Comment
Header
Radiobox
Textbox
Textbox
Comment
Comment
Combobox
Combobox
Textbox
Textbox
Textbox
Combobox
Header
Datetime
Textbox
Textbox
Header
Textbox
Textbox
Textbox 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:43:09.433

您需要不断遍历 XML 元素树。每个分支都是另一个 simple_xml_element，您可以在 foreach llops 中对它们进行锤击。

```
<?php

/* For each <character> node, we echo a separate <name>. */
foreach ($xml as $element) {
    $elementName = $element->getName();
    $elementAttributes = $element->attributes();
    if ($element->children()) {
        foreach ($element->children() as $subElement) {
          // etc
        }
    }
}

?> 
```

# asp.net - 使用 Firefox 和 Chrome 在响应中压缩内容类型

> ID：11137205
> 
> 赞同：0
> 
> 时间：2012-06-21T11:30:41.183
> 
> 标签：asp.net, zip, content-type

我正在为 Sharepoint 编写一个应用程序，该应用程序在功能区上实现一个按钮，以将多个文件下载为 zip...

一切顺利，一切顺利……但是当我尝试使用 Chrome 或 Firefox 下载 zip 时，他们什么也没做……

我的代码是这样的：

```
private void WriteStreamToResponse(MemoryStream ms)
    {
        if (ms.Length > 0)
        {
            string filename = DateTime.Now.ToFileTime().ToString() + ".zip";
            Response.Clear();
            Response.ClearHeaders();
            Response.ClearContent();
            Response.ContentType = "application/zip"; //also tried application/octect and application/x-zip-compressed
            Response.AddHeader("Content-Length", ms.Length.ToString());
            Response.AddHeader("Content-Disposition", "attachment; filename=" + filename);

            byte[] buffer = new byte[65536];
            ms.Position = 0;
            int num;
            do
            {
                num = ms.Read(buffer, 0, buffer.Length);
                Response.OutputStream.Write(buffer, 0, num);
            }

            while (num > 0);

            Response.Flush();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-23T13:18:45.407

删除 Content-Length 并在代码中使用 Flush() 然后 End() ，不要在代码末尾使用 Close() ，您可以在声明所有内容之前使用它。当您不知道文件类型将是什么时，通常使用八位字节流，因此如果您知道文件类型将是什么，请远离它。使用 application/zip 作为 Content-Disposition。

```
 string filename = DateTime.Now.ToFileTime().ToString() + ".zip";
        Response.Clear();
        Response.BufferOutput = false;
        Response.ClearHeaders();
        Response.ClearContent();
        Response.ContentType = "application/x-zip-compressed"; //also tried application/octect and application/x-zip-compressed         
        Response.AddHeader("Content-Disposition", "attachment; filename=" + filename);

        byte[] buffer = new byte[65536];
        ms.Position = 0;
        int num;
        do
        {
            num = ms.Read(buffer, 0, buffer.Length);
            Response.OutputStream.Write(buffer, 0, num);
        }

        while (num > 0);

        Response.Flush();
        Response.End(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:33:28.533

你试过`Application/octet-stream`作为 MIME 类型吗？

或者

```
private void WriteStreamToResponse(MemoryStream ms)
{
    if (ms.Length > 0)
    {
        byte[] byteArray = ms.ToArray();
        ms.Flush();
        ms.Close();

        string filename = DateTime.Now.ToFileTime().ToString() + ".zip";
        Response.BufferOutput = true;
        Response.Clear();
        Response.ClearHeaders();
        Response.ClearContent();
        Response.ContentType = "application/octet-stream";
        Response.AddHeader("Content-Length", ms.Length.ToString());
        Response.AddHeader("Content-Disposition", "attachment; filename=" + filename);

        Response.BinaryWrite(byteArray);
        Response.End();

    }
} 
```

# eclipse - 使用 Eclipse 插件中的菜单创建对话框

> ID：11137208
> 
> 赞同：0
> 
> 时间：2012-06-21T11:31:03.167
> 
> 标签：eclipse, eclipse-plugin

我正在我的 Eclipse 插件中创建一个弹出菜单（org.eclipse.ui.popupMenus）。现在我想启动一个文本字段或对话框来接受用户输入。根据输入，我将运行与 popupMenu 关联的运行方法。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:54:55.813

在最基本的交互中，您可以使用`org.eclipse.jface.dialogs.MessageDialog.openQuestion(Shell, String, String)`让用户回答是/否问题。

如果您希望他们输入一个字符串，您可以使用`org.eclipse.jface.dialogs.InputDialog`. 关闭后，`getValue()`返回他们的输入。

# socket.io - 为什么我的模型没有同步？

> ID：11137209
> 
> 赞同：1
> 
> 时间：2012-06-21T11:31:04.943
> 
> 标签：socket.io, derbyjs

我已经用[racer](http://racerjs.com)编写了我的第一个程序。它显示了一个手动绑定到“col.doc.prop”路径的简单文本框。当我更改该值时，它不适用于服务器上的商店。是什么导致我订阅的模型无法与服务器同步？

**服务器代码：**

```
var fs = require('fs');
var io = require('socket.io');
var racer = require('racer');

var mongo = require('racer-db-mongo');
racer.use(mongo);

racer.js({
    entry: __dirname + '/client.js'
}, function(err, js) {
    return fs.writeFileSync(__dirname + '/script.js', js);
});

var express = require('express');
var server = express.createServer();
server.use(express.static(__dirname));

server.get('/', function(req, res)
{
    var model = store.createModel();
    model.subscribe('col.doc', function(err, doc)
    {
        var prop = doc.get('prop');
        if (!prop)
        {
            doc.set('prop', 123);
            store.flush();
        }

        model.ref('_doc', doc);

        model.bundle(function(bundle)
        {
            var client = require('fs').readFileSync('./client.html', 'utf-8');
            client = client.replace('_init_', bundle.toString());
            res.send(client);
        });
    });
});

var store = racer.createStore(
{
    listen: server,
    db:
    {
        type: 'Mongo',
        uri: 'mongodb://localhost/racerdb'
    }
});
store.set('col.doc.prop', 123);
store.flush();

server.listen(3001); 
```

**客户端代码：**

```
useRacer = function()
{
    var socket = io.connect('http://localhost:3001');

    var racer = require('racer');

    process.nextTick(function() {
        racer.init(this.init, socket);
        return delete this.init;
    });

    racer.on('ready', function(model)
    {
        addListener = document.addEventListener ? function(el, type, listener) {
            return el.addEventListener(type, listener, false);
        } : function(el, type, listener) {
            return el.attachEvent('on' + type, function(e) {
                return listener(e || event);
            });
        };

        var element = document.getElementById('prop');
        var listener = function()
        {
            var val = element.value;
            model.set('col.doc.prop', val);
        };
        addListener(element, 'keyup', listener);

        var upgrade = function(id, value)
        {
            if (model.connected)
            {
                var prop = model.get('col.doc.prop');
                element.value = prop;
            }
            else
                model.socket.socket.connect();
        };

        model.on('connectionStatus', upgrade);
        model.on('set', 'con.*', upgrade);
    });
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:11:02.643

通过更改客户端代码的某些行来解决问题：

*   model.set('col.doc.prop', val) ==> model.set('_doc.prop', val)
*   model.get('col.doc.prop') ==> model.get('_doc.prop')
*   model.on('set', 'con. *', upgrade) ==> model.on('set', '* ', upgrade)

# php - behat mink symfony2 警告

> ID：11137211
> 
> 赞同：0
> 
> 时间：2012-06-21T11:31:12.993
> 
> 标签：php, symfony, behat, mink

我尝试使用捆绑包 Behat 和 Mink 进行功能测试

但是，在安装了 Bundle 之后，我发出了命令

```
php app / console test-e = Behat - init @ AcmeDemoBundle 
```

但我收到此错误：

> PHP警告：require_once（C:\wamp\www\exoNext-local\trunk\app/../Vendor/doctrine/lib/Doctrine/ORM/Mapping/Driver/DoctrineAnnotations.php）：打开流失败：否C:\wamp\www\exoNext-local\trunk\vendor\doctrine-common\lib\Doctrine\Common\Annotations\AnnotationRegistry.php 中的此类文件或目录第 51 行

你能帮我吗，非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:38:26.987

初始化我使用的捆绑包

```
$ php app/console --env=test behat --init @AcmeDemoBundle 
```

但是您的错误与学说注释有关吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:00:10.787

```
C: \ wamp \ www \ exoNext-local \ trunk \ app /.. / Vendor / doctrin e / lib / Doctrine / ORM / Mapping / Driver / DoctrineAnnotations.php 
```

“供应商”不应该是“供应商”吗？我知道 windows 不区分大小写，但 require_once 在某些情况下可能会遇到区分大小写的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-03T14:41:44.340

Try to run these two commands first and then yours:

```
composer dump-autoload
composer run-script post-update-cmd 
```

I hope it helps :-)

# iis-7.5 - 使用 PHP / IIS7 执行大型 MySQL 插入时出现 500 内部服务器错误

> ID：11137214
> 
> 赞同：0
> 
> 时间：2012-06-21T11:31:28.610
> 
> 标签：iis-7.5, php-5.2, mysql-5.1, windows-server-2008-web

系统规格： VPS 运行 Windows Server 2008 R2 SP1 64 位双核 2.39GHz VCPU 2GB RAM Parallels Plesk for Windows 10.4.4 IIS 7.5 PHP 5.2.17 MySQL 5.1.56

我有一个 PHP 脚本来循环遍历一个静态文件并将每一行作为一行导入 MySQL 中。如果将文件一次拆分为数千行，则此方法可以正常工作，但这会产生大量手动操作。

整个文件包含大约 160,000 行要导入的行。该脚本当前通过mysql_connect / mysql_select_db连接数据库，使用mysql_query处理循环，并在循环结束时断开连接。但是，在大约 55 秒 - 1 分 35 秒之间的任何时间，客户端浏览器都会返回一个 500 Internal Server Error 页面，其中不包含任何有用的诊断信息。

我尝试增加 MySQL、PHP、IIS 的最大连接时间，甚至是 winsock 的最大用户套接字，但无济于事。

我尝试为每个插入查询执行与 MySQL 的连接/断开连接，但这会导致与服务器的数千个连接然后卡在“TIME_WAIT”状态，并返回“无法连接到服务器”错误，可能是由于不足剩余的插座。我也尝试过 mysql 和 mysqli 扩展。

我查看了所有可以找到的 IIS 和 MySQL 日志，但看不到任何有助于查找原因的内容。

最后两次尝试分别插入了 33,979 和 78,173 行。

任何人都可以提供任何帮助吗？

谢谢。

** 更新 **

这一定是 IIS 问题。我已将脚本转换为通过命令行 PHP 运行，它可以毫无问题地处理整个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:59:11.573

听起来像一个IIS问题。我发现的大多数都位于 Web.config 文件中。我会看一下并确保设置正确且语法正确。很多时候我忘记关闭我的标签并收到 500 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-05T01:52:06.997

使用`LOAD DATA INFILE`而不是尝试`INSERTs`通过 PHP。它将运行得更快，从而避免 500 错误。

甚至不要考虑使用 mysql_* 接口。切换到 mysqli 或 PDO。它已被弃用并在最新的 PHP 版本中消失。

# php - 未初始化的字符串偏移量 0 和 1

> ID：11137217
> 
> 赞同：0
> 
> 时间：2012-06-21T11:31:50.123
> 
> 标签：php

我收到以下错误：

```
verzend mail naar t met attachment: e
verzend mail naar w met attachment: w
verzend mail naar r met attachment: a
verzend mail naar w met attachment: w
verzend mail naar r met attachment: a
verzend mail naar w met attachment: w

Notice: Uninitialized string offset: 0 in /variables.php on line 248

Notice: Uninitialized string offset: 1 in /variables.php on line 248
verzend mail naar met attachment: 
```

这是我的代码：

```
<?php
    $emailString = 'test@user.nl;www.test.nl^email1@live.nl;www.test2.nl^email3@live.nl;www.test3.nl^';

    $user = explode("^", $emailString); // urls 
    foreach($user as $a_user) {

        $user2 = explode(";", $a_user); // emails
        $a_mailing = array();

        foreach ($user2 as $a_user) {
            $a_mailing[$a_user[0]][] = $a_user[1];
        }   

       foreach($a_mailing as $key => $a_values) {
            foreach($a_values as $value) {
                echo 'verzend mail naar ' . $key . ' met attachment: ' . $value . '<br />';
            }
        }
    }
?> 
```

谁能帮我？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:43:55.543

问题是第一个循环中的 $a_user 是一个字符串。例如.. 在第一次迭代中，$a_user 变量包含："test@user.nl;www.test.nl";

从我所见，我相信您只是想将电子邮件地址用作键，将 url 用作值，因此您不需要为此使用第二个循环。您可以更换：

```
foreach ($user2 as $a_user) {
    $a_mailing[$a_user[0]][] = $a_user[1];
} 
```

和：

```
$a_mailing[$user2[0]][] = $user2[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:41:03.380

`$a_user`是一个刺痛，但需要是一个数组！你需要解决这个问题。

# wordpress - 在 WordPress 中重定向

> ID：11137224
> 
> 赞同：1
> 
> 时间：2012-06-21T11:32:35.757
> 
> 标签：wordpress, redirect

使用 Wordpress .. 如果用户访问存档 is_archive()，我想重定向到网站上的某个页面

请问我该怎么做？我可以在functions.php中添加一些东西吗？

干杯，史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:35:16.010

```
<?php
    wp_redirect($location);
    exit;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:40:53.350

使用 WordPress 挂钩`functions.php`，只需将此代码段粘贴到您的`functions.php`

```
function redirect_to_url(){
    if(is_archive()){
        $url='your redirect url url';
        wp_redirect( $url );
    }  

}
add_action('template_redirect', 'redirect_to_url'); 
```

[**这里**](http://heera.it/redirect-single-post-page)有一篇文章，它可以帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T12:24:22.497

`wp_redirect`很好

```
if(is_archive()){
    wp_redirect($location);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T11:34:41.370

在您的archive.php 模板文件中，如果满足重定向条件，则在顶部放置一个带有标头位置重定向的if 语句，可能使用is_page()；听它的声音

或者如果它是某个页面，您可以在 .htaccess 中执行某些操作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T11:34:58.027

有一个插件可以实现这一点，请在[这里找到](http://wordpress.org/extend/plugins/redirection/)

# regex - Razor 视图转义@登录正则表达式

> ID：11137231
> 
> 赞同：4
> 
> 时间：2012-06-21T11:32:56.557
> 
> 标签：regex, asp.net-mvc-3

在 MVC Razor 视图中，我正在编写一个正则表达式来检测文本中的 URL。表达式是

```
var exp = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig; 
```

但是 MVC 在每个 @ 符号上都显示错误，我该如何逃避以避免错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T11:37:07.720

你可以`@@`用来逃避`@`

```
var exp = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@@#\/%?=~_|!:,.;]*[-A-Z0-9+&@@#\/%=~_|])/ig; 
```

html 输出将包含单个`@`：

```
<script type="text/javascript">
        var exp = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
</script> 
```

# ios4 - 用于为 iPhone 显示 iAds 的单例类

> ID：11137234
> 
> 赞同：5
> 
> 时间：2012-06-21T11:33:19.063
> 
> 标签：ios4, xcode4, iad, ios5

我编写了一个用于管理 iAds 的 Singleton 类。用户不活动 5 秒后 iAds 会弹出。idleTimerExceeded调用**会**生成通知以显示 iAd。此代码可以很好地满足我的要求，但由于我是 iOS 开发新手，因此在集成此代码后，我的应用程序有时会意外挂起。此代码会导致大量警告等。我想在内存和性能方面优化我的代码。

我将非常感谢您的友好建议和评论。

下面是我的代码：

**iAdSingleton.h**

```
#import <Foundation/Foundation.h>
#import "AppDelegate.h"
#import "iAd/iAd.h"

@interface iAdSingleton : UIViewController<ADBannerViewDelegate> {
    ADBannerView *adView;
    UIViewController *displayVC;
    NSTimer *idleTimer;
    BOOL isItFirstTime;
}
@property (nonatomic, retain) ADBannerView *adView;
@property (nonatomic, retain) UIViewController *displayVC;
@property (nonatomic) BOOL isItFirstTime;

+ (id) shareAdSingleton;
- (void) resetIdleTimer;
- (void) idleTimerExceeded;

@end 
```

**iAdSingleton.m**

```
#import "iAdSingleton.h"

@implementation iAdSingleton

static iAdSingleton* _sharedAdSingleton = nil;

BOOL bannerVisible = NO;
BOOL controlAccessBannerVisibility = NO;
@synthesize adView, displayVC;
@synthesize isItFirstTime;

#define kMaxIdleTimeSeconds 5.0

+(id)sharedAdSingleton
{
    @synchronized(self)
    {
        if(!_sharedAdSingleton)
            _sharedAdSingleton = [[self alloc] init];
        return _sharedAdSingleton;
    }
    return nil;
}

+(id)alloc
{
    @synchronized([iAdSingleton class])
    {
        NSAssert(_sharedAdSingleton == nil, @"Attempted to allocate a second instance of a singleton.");
        _sharedAdSingleton = [super alloc];
        return _sharedAdSingleton;
    }

    return nil;
}

-(id)init
{
    self = [super init];
    if (self != nil) {

    /*                  Initialize The Parameters Over Here                  */

        //adView = [[ADBannerView alloc] initWithFrame:CGRectMake(0, 480, 0, 0)];
        adView = [[ADBannerView alloc] init];
        adView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
        self.adView.delegate=self;
        [self resetIdleTimer];
    }
    return self;
}

-(void)dealloc
{
    displayVC = nil;
    if (adView) {
        [adView removeFromSuperview]; //Remove ad view from superview
        [adView setDelegate:nil];
        adView = nil;
    }
    [super dealloc];
}

-(UIViewController *)viewControllerForPresentingModalView
{
    return displayVC;
}

- (void)bannerViewDidLoadAd:(ADBannerView *)banner 
{
    banner.hidden = NO;
    if(!bannerVisible){
        NSLog(@"Banner Changes 1 - Purpose: Visibility");
        // [UIView beginAnimations:@"bannerAppear" context:NULL];
        // banner.frame = CGRectOffset(banner.frame, 0, -100);
        // [UIView commitAnimations];
        bannerVisible = YES;
        controlAccessBannerVisibility = YES;

    }
}

- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{
    //NSLog(@"Unable to receive Ad.");
    NSLog(@"Banner Changes 2 - Purpose: Unable to Receive Ad.");
    banner.hidden = YES;
    if(bannerVisible){
        [UIView beginAnimations:@"bannerDisappear" context:NULL];
        banner.frame = CGRectOffset(banner.frame, 0, 100);
        [UIView commitAnimations];
        bannerVisible = NO;
    }
}

- (BOOL) bannerViewActionShouldBegin:(ADBannerView *)banner willLeaveApplication:(BOOL)willLeave
{
    NSLog(@"Pause anything necessary");
    return YES;
}

- (void) bannerViewActionDidFinish:(ADBannerView *)banner
{
    NSLog(@"We now resume to normal operations");
}

- (void)resetIdleTimer {

    if (!idleTimer) {
        idleTimer = [[NSTimer scheduledTimerWithTimeInterval:kMaxIdleTimeSeconds
                                                      target:self
                                                    selector:@selector(idleTimerExceeded)
                                                    userInfo:nil
                                                     repeats:NO] retain];
    }
    else {
        if (fabs([idleTimer.fireDate timeIntervalSinceNow]) < kMaxIdleTimeSeconds-1.0) {
            [idleTimer setFireDate:[NSDate dateWithTimeIntervalSinceNow:kMaxIdleTimeSeconds]];
            /*
             Notification: HideAd
             */

            NSLog(@"Notification Generated For HideAd");
            [[NSNotificationCenter defaultCenter] postNotificationName:@"HideAdBanner" object:nil userInfo:nil];

        }
    }
}

- (void)idleTimerExceeded {

    AppDelegate *appDel = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    if (appDel.adVisible == NO) {
        NSLog(@"Notification Generated For ShowAd");

        /*
         Notification: ShowAd
         */

        if (controlAccessBannerVisibility == YES) {
            [[NSNotificationCenter defaultCenter] postNotificationName:@"ShowAdBanner" object:nil userInfo:nil];
        }
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T13:25:12.493

这就是你需要的。此代码是线程安全的，不会有任何内存问题和警告。

```
+ (iAdSingleton *) sharedInstance
{
    static dispatch_once_t onceToken;
    static iAdSingleton * __sharedInstance = nil;

    dispatch_once(&onceToken, ^{
        __sharedInstance = [[self alloc] init];
    });

    return __sharedInstance;
} 
```

# javascript - d3js 树方块

> ID：11137238
> 
> 赞同：45
> 
> 时间：2012-06-21T11:33:33.373
> 
> 标签：javascript, svg, d3.js, tree

我想使用 d3.js 来构建谱系树。

我发现的所有例子都在展示有机树。

![在此处输入图像描述](../Images/05cf54dc422ac9f998fa16bfe7142215.png)

有没有像血统一样的风格的例子？

![在此处输入图像描述](../Images/49a7c71e6a67d3f530f31394fcda83b2.png)

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-06-21T15:01:23.800

您可以使用[集群](http://mbostock.github.com/d3/ex/cluster.html)或[树](http://mbostock.github.com/d3/ex/tree.html)布局来完成此操作。并使用自定义路径生成器绘制连接节点的正交线，如[肘部树状图](http://bl.ocks.org/2429963)所示。我想我受到了启发，所以我试了一下：

*   [http://bl.ocks.org/2966094](http://bl.ocks.org/2966094)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-06-01T15:45:56.267

我最近创建了一些[使用 D3 以](https://github.com/justincy/d3-pedigree-examples)大多数软件的风格绘制系谱的示例。有一些示例可以显示如何使其展开和折叠、转换以及显示后代和祖先。

![在此处输入图像描述](../Images/6bb3f0f98e6690d720f805f70e68c7bc.png)

# node.js - 使用 Mongoose 查询嵌套的嵌入文档

> ID：11137239
> 
> 赞同：4
> 
> 时间：2012-06-21T11:33:37.713
> 
> 标签：node.js, mongodb, coffeescript, mongoose

我正在尝试在嵌套的嵌入式文档中进行查询。我试图“填充”结果，但失败了。

如何在 find 调用中取回所有书籍详细信息？我想要用户架子上的所有书籍对象，我可以从中获取数据？

```
###

Trying to query nested embedded documents using Mongoose.

Database Outline for example

An Owner has multiple bookshelves which each have an array of books.
A book is not unique, and the same book could be on many different shelves.

###

mongoose = require("mongoose")
Schema = mongoose.Schema
mongoose.connect "localhost", "d1"

bookSchema = new Schema(title: String)
Book = mongoose.model("Book", bookSchema)

shelfBookSchema = new Schema(
  book:
    type: Schema.ObjectId
    ref: "Book"
  )

shelfSchema = new Schema(
  name: String
  books: [ shelfBookSchema ]
  )

Shelf = mongoose.model("Shelf", shelfSchema)

ownerSchema = new Schema(
  firstName: String
  shelves: [ shelfSchema ]
  )

Owner = mongoose.model("Owner", ownerSchema)

mongoose.connection.on "open", ->
  book1 = new Book(title:"How to make stuff")
  book1.save (err) ->
    throw err if err

    owner = new Owner(firstName:"John")
    shelf = new Shelf(name:"DIY Shelf")
    shelf.books.push
      _id: book1._id
      book: book1._id
    owner.shelves.push shelf
    owner.save (err) ->
      throw err if err

      #Let's find one owner and get all of his bookshelves and the books they containa
      Owner.findOne().populate("shelves.books.book").exec (err, owner) ->
        console.error owner.shelves[0].books

        ### Log shows:

        { book: 4fe3047401fc23e79c000003,
        _id: 4fe3047401fc23e79c000003 }]

        Great but how do I get the values of book like the title etc??

        ###

        mongoose.connection.db.dropDatabase ->
          mongoose.connection.close() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-06T16:55:27.377

在 Mongoose 3.6 中添加了深层人口。[https://github.com/LearnBoost/mongoose/issues/1377#issuecomment-15911192](https://github.com/LearnBoost/mongoose/issues/1377#issuecomment-15911192)

对于您的示例，它将类似于：

```
Owner.find().populate('shelves').exec(PopulateBooks);

function PopulateBooks(err, owners) {
      if(err) throw err;
      // Deep population is here
      Book.populate(owners, { path: 'shelves.books' }).exec(callback);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T21:06:55.140

目前不支持嵌套子文档填充。我将这篇文章的链接添加到开放的 github 问题以供将来跟踪。

[https://github.com/LearnBoost/mongoose/issues/601](https://github.com/LearnBoost/mongoose/issues/601)

# objective-c - 在 iOS 中创建网络处理程序类时选择什么超类

> ID：11137241
> 
> 赞同：0
> 
> 时间：2012-06-21T11:33:39.467
> 
> 标签：objective-c, ios, ipad, network-programming

我目前正在创建一个 iOS 5 iPad 应用程序，在该应用程序中，本地域上的网络使用量很大，查询和获取数据，上传等等。

所以我正在考虑创建一个网络处理程序来处理所有这些功能。现在在 iOS/objective-c 中，当你创建一个类时，你实际上是在创建一个超类（等）的接口，`NSObject`我`UIViewController`的问题是你会使用哪一个？`NSURLProtocol`?

我对 iOS/Objective-c 编程真的很陌生，所以我希望从那些更有经验的人那里获得最佳实践技巧，这些技巧类似于我正在尝试做的事情。

所有建议将不胜感激。

-德累斯顿先生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:36:49.500

如果您正在创建一个抽象所有脏工作的网络管理器，您应该`NSObject`简单地将其设为 的子类。所有工作都将由本地实例完成`NSURLConnection`（尽管我建议您使用一些更高级别的框架，例如非常好的 AFNetwork）。

# c - 将 zlib 与 C 一起使用

> ID：11137246
> 
> 赞同：2
> 
> 时间：2012-06-21T11:33:54.570
> 
> 标签：c, zlib

我目前正在学习 C，并且在尝试制作一个利用 zlib 的小程序时遇到了一些问题。

我已经设法使用 zlib 库编译我的应用程序（使用 Codeblocks/MinGW），并且编译工作正常。我使用了一个基于官方 zlib 站点 (zlib.net)上的[zpipe.c示例的示例。](http://www.zlib.net/zpipe.c)

执行时，会创建输出 zip 文件，但它似乎格式错误和/或为空。我无法使用 7zip 打开它。

这是我修改过的代码。我只是简单地替换了 zpipe.c 中的 main() 函数。

```
int main() {
    printf("Compression test...");

    int ret;
    FILE *fpsource;
    FILE *fpdest;

    fpsource = fopen("test.txt", "rb");
    fpdest = fopen("output.zip", "wb");

    ret = def(fpsource, fpdest, Z_DEFAULT_COMPRESSION);
    if (ret != Z_OK) {
        printf("failure\n");
        zerr(ret);
    }
    else {
        printf("success..\n");
    }

    fclose(fpsource);
    fclose(fpdest);

    return EXIT_SUCCESS;
} 
```

我没有收到任何错误，并且打印了我的“成功”消息。只是输出文件损坏了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T11:57:32.103

所讨论的代码只是使用 DEFLATE 算法压缩文件。缺少使其成为 zip 或 gzip 文件的适当结构。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T15:51:23.417

zpipe.c 将按原样生成 zlib 格式，它是包装在 zlib 标头和尾标中的原始 deflate 数据。7zip 无法识别。它将识别 gzip 或 zip 格式，它们是相同原始 deflate 数据的完全不同的包装器。

您可以修改 zpipe.c 以使用 deflateInit2（和 inflateInit2）而不是没有“2”的版本来选择 gzip 格式而不是 zlib 格式。您可以阅读[zlib.h](https://github.com/madler/zlib/blob/master/zlib.h)以了解如何执行此操作。

# php - 使用 php 处理 xml 文件

> ID：11137248
> 
> 赞同：-2
> 
> 时间：2012-06-21T11:34:00.017
> 
> 标签：php, xml

> **可能重复：**
> [一个简单的程序来 CRUD 节点和 xml 文件的节点值](https://stackoverflow.com/questions/4906073/a-simple-program-to-crud-node-and-node-values-of-xml-file)

我想用 php.xml 更改 xml 文件中的一些数据。

所以在我的 xml 文件中我有这个：

```
 <items><item href="p002.xhtml" id="p002" media-type="application/xhtml+xml"/>
 <item href="img/b002.jpg" id="b002" media-type="image/jpeg"/>
 <item href="p003.xhtml" id="p003" media-type="application/xhtml+xml"/>
 <item href="img/b003.jpg" id="b003" media-type="image/jpeg"/>
 <item href="p004.xhtml" id="p004" media-type="application/xhtml+xml"/>
 <item href="img/b004.jpg" id="b004" media-type="image/jpeg"/>
 <item href="p005.xhtml" id="p005" media-type="application/xhtml+xml"/>
 <item href="img/b005.jpg" id="b005" media-type="image/jpeg"/></items> 
```

我想打开文件，删除所有大于 0003 的项目并保存更改。我在这段摘录之间有一些标签。

结果：

```
 <items><item href="p002.xhtml" id="p002" media-type="application/xhtml+xml"/>
 <item href="img/b002.jpg" id="b002" media-type="image/jpeg"/>
 <item href="p003.xhtml" id="p003" media-type="application/xhtml+xml"/>
 <item href="img/b003.jpg" id="b003" media-type="image/jpeg"/></items> 
```

试 ：

```
if( ! $xml = simplexml_load_file("pack.xml") ) { 
    echo 'unable to load XML file'; 
} 
else { 
echo "<ul>";
    foreach($xml->items->item as $v ){
        //echo "<li>".$v[href]."</li>";
        if($v[href]=="p003.xhtml" || $v[href]=="img/bg003.jpg"){
            echo "<li>".$v[href]."</li>";
        }

    }
echo "</ul>";
} 
```

如何检查大于 p003.xhtml 和 img/bg003.jpg ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:36:46.800

您将要使用[`simplexml`](http://php.net/manual/en/book.simplexml.php). 这将生成一组不错的 DOM 类供您使用。从这些类中，您可以使用您的条件搜索元素并在将 xml 树保存回文本之前将其删除

# symfony - Symfony2 + Twig 获得真实/完整的当前路线

> ID：11137265
> 
> 赞同：4
> 
> 时间：2012-06-21T11:35:12.157
> 
> 标签：symfony, twig, routes

我有一个带有可选参数的路由：

```
/**
  * @Route( "/route/{id}", name="_route", defaults={"id" = ""} )
  * @Template()
  */ 
```

在模板中，我有一个表格，我希望将表格发送到：

```
/route 
```

或者：

```
/route/10
/route/10/mail – if there were more than just one parameter 
```

目前我正在像这样解决它：

```
{{ path(app.request.attributes.get('_route')) }}/{{ object.id }} 
```

效果很好，但我必须自己添加所有可能的参数。有没有办法从树枝中获取完整的当前路径？我不想在我的控制器中添加一个额外的变量以发送到模板。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-21T17:00:45.787

该类`Request`有一个[`getRequestUri()`](https://github.com/symfony/HttpFoundation/blob/master/Request.php#L715)方法。您可以在树枝中访问它，例如

```
{{ app.request.requesturi }} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-22T09:44:23.303

还有另一种方法（不确定这是否是一种好习惯）：

```
{{ path(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')) }} 
```

在这种情况下，您可以为其添加一个附加参数：

```
{{ path(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')|merge({'p': 10})) }} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T17:30:15.247

是不同的动作。具有不同模板的不同操作。使用 twig，您可以拥有 2 或 3 个扩展第三个模板的模板。在第三个中，您可以定义列表的块。还有一大堆形式。在树枝中，您可以扩展模板。

我仍然……认为您需要不同的模板和不同的操作。每个动作的模板，都扩展了一个带有列表的“超级”模板。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-21T12:02:49.123

您可以在操作中使用多个 @Route：

```
/**
  * @Route( "/route/{id}", name="_route" )
  * @Route( "/route/{id}/hello", name="_route_hello" )
  * @Route( "/route/{id}/hello/{world}", name="_route_hello_world" )
  * @Template()
  */ 
```

并检查变量是否存在......

但是......我不明白你需要对不同的路线使用相同的动作。我更喜欢为每个“目的”使用一个动作。为了遵循 DRY 模式，我喜欢编写一些不重写代码的私有方法......

# xampp - 本地主机上的 TYPO3 前端访问（BE 访问工作正常）

> ID：11137266
> 
> 赞同：0
> 
> 时间：2012-06-21T11:35:15.023
> 
> 标签：xampp, typo3, frontend, vhosts

在我的 Mac 上成功安装 XAMP 和typo3 后，我设置了一个虚拟主机以避免在使用 TYPO3 时输入长 URL。

我取消了处理 http-vhosts.conf 的 http.conf 行的注释，以便我可以设置虚拟主机，然后我在 httpd-vhosts.conf 中添加了我的虚拟主机（称为typo3dev），最后我相应地编辑了我的主机文件。

到目前为止一切顺利，但现在我遇到的问题是，虽然指向 BE ( with `http://typo3dev/typo3/`) 工作得很好（我可以登录并在那里玩得开心），但我看不到前端：当指向我的浏览器`http://typo3dev/`，我被重定向到`http://typo3dev/get-started/`我得到一个页面未找到错误的地方

查看服务器错误日志，我明白了

```
$[Thu Jun 21 12:39:20 2012] [error] [client 127.0.0.1] File does not exist: /Applications/XAMPP/htdocs/typo3/introductionpackage-4.7.1/get-started 
```

顺便说一句，我的主机文件如下所示：

```
127.0.0.1       localhost
255.255.255.255 broadcasthost
::1             localhost
fe80::1%lo0     localhost
127.0.0.1       typo3dev 
```

我的 httpd-vhosts.conf 是这样的：

```
NameVirtualHost *:80

#
# VirtualHost example:
# Almost any Apache directive may go into a VirtualHost container.
# The first VirtualHost section is used for all requests that do not
# match a ServerName or ServerAlias in any <VirtualHost> block.
#
<VirtualHost *:80>
    DocumentRoot "/Applications/XAMPP/htdocs"
    ServerName localhost
</VirtualHost>
<VirtualHost *:80>
    DocumentRoot "/Applications/XAMPP/htdocs/typo3/introductionpackage-4.7.1"
    ServerName typo3dev
</VirtualHost> 
```

非常感谢您提前提供任何帮助/评论/建议

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:52:32.623

这在我看来像是一个 RealURL/Apache 配置问题。确保您[允许](http://httpd.apache.org/docs/2.0/mod/core.html#allowoverride) `.htaccess`在您的 Apache 配置中...

```
<VirtualHost *:80>
    DocumentRoot "/Applications/XAMPP/htdocs/typo3/introductionpackage-4.7.1"
    ServerName typo3dev

    <Directory /Applications/XAMPP/htdocs/typo3/introductionpackage-4.7.1>
        AllowOverride all
        Order allow,deny
        allow from all
    </Directory>

</VirtualHost> 
```

...或`RewriteRules`直接在该`VirtualHost`部分中配置。

```
<VirtualHost *:80>
    DocumentRoot "/Applications/XAMPP/htdocs/typo3/introductionpackage-4.7.1"
    ServerName typo3dev

    <Directory /Applications/XAMPP/htdocs/typo3/introductionpackage-4.7.1>
        AllowOverride None
        Order allow,deny
        allow from all
    </Directory>

    <Directory /Applications/XAMPP/htdocs/typo3/introductionpackage-4.7.1>
        RewriteEngine On
        RewriteRule ^/(typo3|typo3temp|typo3conf|t3lib|tslib|fileadmin|uploads|showpic\.php)$ - [L]
        RewriteRule ^/(typo3|typo3temp|typo3conf|t3lib|tslib|fileadmin|uploads|showpic\.php)/.*$ - [L]
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteCond %{REQUEST_FILENAME} !-l
        RewriteRule .* index.php [L]
    </Directory>

</VirtualHost> 
```

`Apache`请记住在更改配置后重新加载/重新启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:49:26.737

在我看来，您安装了错误的软件包。仅安装源包，因为所有其他包都用于演示。另外，如果您可以避免使用 Apache。它复杂而臃肿。我可以推荐lighttpd。尤其是使用虚拟域进行配置要容易得多。

# c++ - VS2010 远程调试器在没有断点的地方停止

> ID：11137273
> 
> 赞同：0
> 
> 时间：2012-06-21T11:35:32.777
> 
> 标签：c++, visual-studio-2010, remote-debugging, visual-studio-debugging, debugbreak

我正在远程调试 Microsoft FSX 的 dll（C++，非托管）（我不知道这是否重要）。该 dll 被编译为“多线程 dll”，因为它不能作为“多线程 dll 调试”工作。我的 dll 目前只包含一个`DllStart`and`DllStop`函数，这是 FSX 中的标准。

我一般调试工作（它停止在我的断点处），但不知何故，调试器也停止在我没有**放置**断点的地方。首先，问题出现在“没有可用来源”的风格中。检查后

1.  [在 2010](https://stackoverflow.com/questions/2672153/suppress-no-source-available-pane-in-2010)和
2.  [无可用来源](https://stackoverflow.com/questions/2806993/no-source-available)

对我有用的唯一解决方案是安装提到的[扩展](http://visualstudiogallery.msdn.microsoft.com/fdbb2036-471e-40a7-b20e-31f8fd5578fa/)。现在我不再获得“无源”选项卡，但调试器仍然在我的代码之外的某个地方停止。我已经按照“[没有断点 VS2010 时调试器停止](https://stackoverflow.com/questions/7896820/debugger-stops-when-there-is-no-breakpoint-vs2010)”中的建议清理了所有断点。 ![在 VS2010 中停止](../Images/c8c350b0e6001afd155d016d6ed976e4.png) `bglmanx.dll`是另一个 dll，也是由 FSX 启动的。我在想，好吧，也许这些符号有些模棱两可，并将我的函数重命名为`DllStartFSXM`and `DllStopFSXM`（因此是唯一的）。没提升。

任何想法，提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:48:55.343

这可能是由其他代码中的 __asm int 3 或 DebugBreak 引起的？

也许有一些方法可以禁用这些命令或重新实现 DebugBreak 功能？

# android - 如何为片段设置动画？

> ID：11137279
> 
> 赞同：1
> 
> 时间：2012-06-21T11:35:50.873
> 
> 标签：android

我想为我的活动中的片段实现动画。但是常规`startAnimation()`方法不适用于片段。

如何为我的片段设置动画？以下是我的片段：

```
Fragment listview = (Fragment)getSupportFragmentManager().findFragmentById(R.id.my_tab_fragment);
final Animation a = AnimationUtils.loadAnimation(this, R.anim.translate); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:40:53.017

要动画添加/删除片段，您应该使用：

```
 getFragmentManager().beginTransaction()
                            .setCustomAnimation(); 
```

您应该查看[FragmentTransaction 文档](http://developer.android.com/reference/android/app/FragmentTransaction.html)。

请小心并在`setCustomAnimation()`您的.`add(fragment)``replace(fragment)``FragmentTransaction`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:42:22.023

您需要使用`FragmentManager`来创建一个`FragmentTransaction`通常您可以有 2 个动画，一个用于滑入新动画，一个用于滑出旧动画，我将使用您的两个动画，如下所示：

```
FragmentTransaction tx = getFragmentManager().beginTransaction();
tx.setCustomAnimations(a, a);
tx.replace(oldFragmentReference, newFragmentReference);
tx.commit(); 
```

希望这有帮助。

# content-management-system - Orchard CMS OrchardSuppressDependency 不起作用

> ID：11137280
> 
> 赞同：1
> 
> 时间：2012-06-21T11:35:53.290
> 
> 标签：content-management-system, orchardcms, suppress

我正在尝试替换 Orchard CMS `NavigationManager`，`Orchard.UI.Navigation`以便可以根据权限过滤菜单项。这是我的代码：

```
[OrchardSuppressDependency("Orchard.UI.Navigation.NavigationManager")]
public class MmtNavigationManager : NavigationManager
{

    public MmtNavigationManager(IEnumerable<INavigationProvider> providers, IAuthorizationService authorizationService, UrlHelper urlHelper, IOrchardServices orchardServices)
    : base(providers, authorizationService, urlHelper, orchardServices)
    {

    }

    public new IEnumerable<MenuItem> BuildMenu(string menuName)
    {
        var menu = base.BuildMenu(menuName);
        return menu;
    }
} 
```

此代码位于已安装并启用的模块中。构造函数被调用，但从不调用`BuildMenu`方法；原来`BuildMenu`的被调用。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:55:58.633

啊，猜出来了。我需要让我的新类 ( `MmtNavigationManager`) 也继承自`INavigationManager`。

# web-applications - 使用 OSGI 拆分应用程序层是一种好方法吗

> ID：11137288
> 
> 赞同：1
> 
> 时间：2012-06-21T11:36:27.993
> 
> 标签：web-applications, osgi, layer

我有一个具有不同层的 Web 应用程序（即 ui->services->core）。如果我必须更新其中一层，我必须重新启动整个应用程序。所以我决定使用 OSGI 来分离这些层。然后我可以在不重新启动的情况下更新每一层。

这是一个好主意还是 osgi 不是正确的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T12:22:31.297

好吧，我不能说这是否是**一种**方法，但 OSGi 肯定是一种好方法。正如 kctang 在其回答中指出的那样，它的学习曲线相当陡峭。然而，它最终会付出代价。您严格的模块化方法允许您实现关注点分离，这是其他框架根本无法实现的。

关于您的具体案例，我最近阅读了[OSGi in Depth](https://rads.stackoverflow.com/amzn/click/com/193518217X)的一章，其中他们指出了 OSGi 中的层分离，特别关注云部署。总而言之，远程服务规范将帮助您将层分布到多台机器上，这可以成为企业应用程序的救星。另一本有趣的书是[Enterprise OSGi in Action](https://rads.stackoverflow.com/amzn/click/com/1617290130)，但目前只能通过 Manning Early Access Program 获得。

如果我必须批评的话，仍然缺少框架实现者对 JMX 的支持。并不是说您不能以其他方式（编程或非编程方式）管理您的更新，但这会很有用。无论如何，这只是说OSGi还有改进的空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T12:05:40.923

如果要避免在开发过程中重新启动整个应用程序，那么 OSGi 不应该是第一个考虑的选项。检查 JRebel/LiveRebel 之类的东西是否能满足您的需求。

虽然 OSGi 可以实现不需要重新启动其他包/层之类的事情——如果你做对了——恕我直言，它有一些学习曲线能够正确地做。

一些进一步的阅读：

*   [http://zeroturnaround.com/blog/jrebel-vs-osgi-use-the-right-tool-for-the-right-job/](http://zeroturnaround.com/blog/jrebel-vs-osgi-use-the-right-tool-for-the-right-job/)
*   [http://www.theserverside.com/discussions/thread.tss?thread_id=62523](http://www.theserverside.com/discussions/thread.tss?thread_id=62523)
*   [我什么时候应该使用像 OSGI 这样的平台，什么时候必须避免？](https://stackoverflow.com/questions/1558720/when-should-i-use-a-platform-like-osgi-and-when-it-must-be-avoided)

# xslt - 处理嵌套标签中的数据并将它们分组到 xslt

> ID：11137291
> 
> 赞同：1
> 
> 时间：2012-06-21T11:36:42.493
> 
> 标签：xslt, xslt-1.0

我需要一些关于 XSLT 如何在 XSLT 中执行以下操作的说明。

我有这个源文件。

```
<Data>
    <additem>                   
                <choice>desc</choice>
                <sectiontext>
                    <a title="google" href="http://google.com" xmlns="http://www.w3.org/1999/xhtml">
                        <strong>Sample Text</strong>
                        <ul>
                            <li><em>aa</em></li>
                            <li><em>bb</em></li>
                            <li><em>cc</em></li>
                        </ul>
                    </a>                        
                </sectiontext>

    </additem>
    <additem>   
                <choice>image</choice>
                <files>
                    <a xmlns="http://www.w3.org/1999/xhtml" title="image location" href="xyz:12-2022">
                        <img  alt="No Image" title="No Image" xlink:href="some image path" xmlns:xlink="http://www.w3.org/1999/xlink"></img>
                    </a>
                </files>
    </additem>
            <additem>                   
                <choice>Paragraph</choice>
                <sectiontext>
                    <a title="google" href="http://google.com" xmlns="http://www.w3.org/1999/xhtml">
                        <strong>Sample Text</strong>
                        <ul>
                            <li><em>aa</em></li>
                            <li><em>bb</em></li>
                            <li><em>cc</em></li>
                        </ul>
                    </a>
                    hello alll

                </sectiontext>

    </additem>
</Data> 
```

输出：

```
<Information>

        <Section>
            <text>
                <strong>Sample Text</strong>
                        <ul>
                            <li><em>aa</em></li>
                            <li><em>bb</em></li>
                            <li><em>cc</em></li>
                        </ul>
            </text>
            <link external="http://google.com" title="google"></link>
        </Section>
        <picture>
            <image src="some image path" altText="No Image">
                <link local="xyz:12-2022" title="image location"></link>
            </image>
        </picture>
        <Body>
            <text>
                <hyperlink>
                    <text>
                        <strong>Sample Text</strong>
                                <ul>
                                    <li><em>aa</em></li>
                                    <li><em>bb</em></li>
                                    <li><em>cc</em></li>
                                </ul>
                    </text> 
                    <link external="http://google.com" title="google"></link>
                </hyperlink>
                hello alll
            </text>
        </Body>
</Information> 
```

规则：

1.根据addItem/choice中的选择，我们需要创建标签。

```
 choice    --    Desc
    desc    --      Section
    image   --      picture
    Paragraph----Body 
```

2.处理标签当前标签正在包装其他标签。

```
 A.If any element has only <a> in it. For example in the source,

            Code in the source:
            <sectiontext>
                    <a title="google" href="http://google.com" xmlns="http://www.w3.org/1999/xhtml">
                        <strong>Sample Text</strong>
                        <ul>
                            <li><em>aa</em></li>
                            <li><em>bb</em></li>
                            <li><em>cc</em></li>
                        </ul>
                    </a>                        
            </sectiontext> 
```

需要分离该标签并创建一个标签

```
i. if the "href" in attribute in <a> tag starts with "xyz:" need to add it as "local" attribute in <link> element
ii. If the "href" in the attribute <a> tag starts with "http" need to add it as "external" attribute in <link> element.
ii. "title" attribute in <a> tag remains same in <link>

    B.if any element has any other element other than <a> tag.

        Code in the source:

        <sectiontext>
                    <a title="google" href="http://google.com" xmlns="http://www.w3.org/1999/xhtml">
                        <strong>Sample Text</strong>
                        <ul>
                            <li><em>aa</em></li>
                            <li><em>bb</em></li>
                            <li><em>cc</em></li>
                        </ul>
                    </a>
                    hello alll

        </sectiontext> 
```

我需要把输出作为

```
 <text>
                <hyperlink>
                    <text>
                        <strong>Sample Text</strong>
                                <ul>
                                    <li><em>aa</em></li>
                                    <li><em>bb</em></li>
                                    <li><em>cc</em></li>
                                </ul>
                    </text> 
                    <link external="http://google.com" title="google"></link>
                </hyperlink>
                hello alll
        </text> 
```

规则：

```
 i. In the all the text inside the <a> tag have to come under the <inlinelink> tag as shown above. 
```

任何人都可以帮助它如何完成。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T15:14:48.200

这个 XSLT 1.0 样式表...

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                              xmlns:xhtml="http://www.w3.org/1999/xhtml"
                              xmlns:xlink="http://www.w3.org/1999/xlink" >
<xsl:output method="xml" indent="yes"/>

<xsl:template match="@*|node()">
 <xsl:copy>
   <xsl:apply-templates select="@*|node()" />
  </xsl:copy>
</xsl:template>

<xsl:template match="/">
 <Information>
   <xsl:apply-templates select="Data/additem"/>
 </Information>
</xsl:template>      

<xsl:template match="xhtml:a[../../self::additem]">
 <link title="{@title}">
  <xsl:if test="starts-with(@href,'http')">
    <xsl:attribute name="external"><xsl:value-of select="@href" /></xsl:attribute>
  </xsl:if>
  <xsl:if test="starts-with(@href,'xyz:')">
    <xsl:attribute name="local"><xsl:value-of select="@href" /></xsl:attribute>
  </xsl:if>
 </link>
</xsl:template>      

<xsl:template match="additem[choice='desc']">
 <Section>
  <text>
    <xsl:apply-templates select="sectiontext/xhtml:a/*" /> 
  </text>
  <xsl:apply-templates select="sectiontext/xhtml:a" />
 </Section>
</xsl:template>      

<xsl:template match="additem[choice='image']">
 <picture>
  <image src="{files/xhtml:a/xhtml:img/@xlink:href}" altText="{files/xhtml:a/xhtml:img/@alt}">
   <apply-templates select="files/xhtml:a" />
  </image>
 </picture>
</xsl:template>      

<xsl:template match="additem[choice='Paragraph']">
 <Body>
  <text>
   <hyperlink>
    <text>
     <xsl:apply-templates select="sectiontext/xhtml:a/*" />
    </text> 
    <xsl:apply-templates select="sectiontext/xhtml:a" />
   </hyperlink>
   <xsl:apply-templates select="sectiontext/node()[not(self::xhtml:a)]" />
  </text>
 </Body>
</xsl:template>      

</xsl:stylesheet> 
```

... 将您指定的输入文档转换为此输出文档...

```
<?xml version="1.0" encoding="utf-8"?>
<Information xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xlink="http://www.w3.org/1999/xlink">
  <Section>
    <text>
      <strong xmlns="http://www.w3.org/1999/xhtml">Sample Text</strong>
      <ul xmlns="http://www.w3.org/1999/xhtml">
                            <li><em>aa</em></li>
                            <li><em>bb</em></li>
                            <li><em>cc</em></li>
                        </ul>
    </text>
    <link title="google" external="http://google.com" />
  </Section>
  <picture>
    <image src="some image path" altText="No Image">
      <apply-templates select="files/xhtml:a" />
    </image>
  </picture>
  <Body>
    <text>
      <hyperlink>
        <text>
          <strong xmlns="http://www.w3.org/1999/xhtml">Sample Text</strong>
          <ul xmlns="http://www.w3.org/1999/xhtml">
                            <li><em>aa</em></li>
                            <li><em>bb</em></li>
                            <li><em>cc</em></li>
                        </ul>
        </text>
        <link title="google" external="http://google.com" />
      </hyperlink>

                    hello alll

                </text>
  </Body>
</Information> 
```

* * *

# 解释

您的每条规则都被一一采用并用于构建模板，从识别匹配条件开始。

# sql - 如何在同一语句的where子句中使用like和between？

> ID：11137293
> 
> 赞同：4
> 
> 时间：2012-06-21T11:36:48.613
> 
> 标签：sql, sql-server-2008, tsql

我试图根据日期在数据库中找到一组结果。日期以 dd/mm/yyyy hh:mm:ss 格式存储为 varchars。

我想做的是搜索指定日期范围内的所有日期。

例如我试过：

```
SELECT * FROM table_name
WHERE fromDate BETWEEN LIKE '%12/06/2012%' AND LIKE '%16/06/2012%' 
```

像这样的事情是可能的还是有更好的方法来做这种类型的陈述，因为到目前为止我几乎没有成功？

我正在使用 Microsoft SQL Server 2008。

彼得

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T12:22:43.583

由于您的日期值还包括时间，因此您不能使用 BETWEEN。唯一安全的方法是：

```
SELECT <cols> FROM dbo.table_name
WHERE CONVERT(DATE, fromDate, 103) >= '20120612' 
AND CONVERT(DATE, fromDate, 103) < '20120617'; 
```

但正如 Martin 所注意到的，您将永远无法在该列上使用索引，因此这将始终执行全表扫描。

如果您真的非常想使用 BETWEEN，则转换为 DATE 是唯一安全的方法（好吧，或者以其他效率较低的方式减少时间）：

```
SELECT <cols> FROM dbo.table_name
WHERE CONVERT(DATE, fromDate, 103) BETWEEN '20120612' AND '20120616'; 
```

但出于一致性原因[，即使在这种情况下，我也建议反对 between](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T11:39:22.513

尝试这个

```
SELECT * FROM table_name
WHERE Convert(Date,fromDate,103) 
BETWEEN '20120612' AND '20120616' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T11:40:11.203

最好的解决方案是将您的 varchars 作为 DateTime 存储在数据库中。

第二好的是将 then 转换为选择中的日期（因为其他答案只是表明，所以我不打算给出示例）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-01T15:07:54.860

嗨，伙计，这不是火箭科学兄弟，只是做一个类似的逻辑

> 块引用

SELECT * FROM table_name WHERE fromDate BETWEEN '2021-05-01 12:00:00' AND '2021-05-01 23:59:00'

> 块引用

它会工作我也卡住了，但它有帮助。我也试着像你一样做一个逻辑

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-25T12:46:21.693

以下对我来说很好。尝试这个：

```
 SELECT *
 FROM [MABH-Desi-Dera].[dbo].[Order] 
 WHERE (CONVERT(nvarchar,[Order_ID]) BETWEEN  '200622%' AND '200623%') 
```

这里`Order_ID`s 以一些**Date**开头：

# .net - VB.NET InputStream 为空

> ID：11137299
> 
> 赞同：2
> 
> 时间：2012-06-21T11:37:10.530
> 
> 标签：.net, asp.net-mvc, web-services, vb.net-2010

我正在使用 .NET 4.0 并试图将 Request.InputStream 转换为字符串。我已经尝试了明显的：

```
Dim req As HttpRequest = HttpContext.Current.Request
' Log input stream length
util.SystemError("inputstream length = " + req.InputStream.Length.ToString, "MBOL")
req.InputStream.Position = 0
Dim encodedString As String = New StreamReader(req.InputStream).ReadToEnd() 
```

这显示输入流长度为 1671，但我得到的编码字符串为空。我在它周围添加了一个 try / catch ，但它似乎没有出错，它只是返回一个空字符串。

有什么想法可能会出错吗？提前感谢您对此提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:04:55.727

一个输入流不一定要被多次读取，它是通过契约*读取一次*（尽管特定的实现可能会放宽这个限制）。

因此，您无法获取它的长度，因为它实际上读取了流。即使将其位置重置为 0 也不能保证有效（如您所见，也不会）。

如果要在阅读*前*获取内容的长度，则需要依赖`Content-Length`header 字段。请注意，服务器不必提供此信息。获取内容长度的唯一 100% 可靠的方法是读取内容，*然后*获取其长度。

可以说`Stream`基类根本不应该有`Length`属性。这是一个薄弱的设计。

# sql-server - Excel VBA - 通过宏在 SQL Server 中执行作业

> ID：11137302
> 
> 赞同：2
> 
> 时间：2012-06-21T11:37:13.897
> 
> 标签：sql-server, excel, vba

我有一个存储在数据库中的作业，计划每天运行。但有时需要在任何给定时间执行此作业以查看最新数据（我使用的是 SQL Server Management Studio 2008）。

作业本身只是从包含实时数据的视图中获取数据，并将其放入一个表中，然后该表将用作 excel 文件的数据源。执行作业会删除并使用新数据重新创建表。

在 excel（2010）中，我希望有一个“按钮”，按下该按钮将执行作业，然后在 excel 中的数据选项卡上点击刷新，然后将使用新数据更新工作表上的数据。

我的问题是：**我如何从 excel 宏中执行这项工作？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T11:44:54.377

```
Private Sub CmdRunJob_Click()
   Dim con As Object
   Set con = CreateObject("ADODB.Connection")
   con.Open = "DRIVER={SQL Server};SERVER=YourServer;" & _
       "USER=YourUser;PASSWORD=YourPassword;"
   con.Execute "exec msdb.dbo.sp_start_job 'YourJob'"
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:44:02.853

您创建了一个将数据从视图移动到表的 SP。然后修改它按计划执行该 SP 的作业。然后在 Excel 宏中，您可以使用该 SP 来更新数据。

或查看[示例](http://www.isecor.com/drupal6/node/26)如何从 VBScript 运行作业

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:44:43.337

您可以使用 SQLDMO.SQLServer 来执行您的作业。

# django - Django - 是否可以从视图中的函数进行重定向？

> ID：11137309
> 
> 赞同：3
> 
> 时间：2012-06-21T11:38:04.353
> 
> 标签：django, view, return, decorator, httpresponse

我尝试调用一个检查规则的函数，如果不满足规则，我想跳过其余的视图代码，只返回一个 HttpResponse 错误。

我想将所有转义逻辑放在一个函数中，因为我在整个项目中的多个点都需要它。

我试图做这样的事情：

```
def myView(request):

    checkFunction() 
```

和：

```
def checkFunction():
    #do stuff
    return HttpResponse(status=403) 
```

但它只是不起作用（难怪）......

任何想法如何正确地做到这一点？

谢谢

罗恩

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T12:50:56.320

你的错误是，在`myView`函数中，你调用了你的`checkFunction`，但是你没有使用的返回值，`checkFunction`所以你的返回值 `checkFunction` `return HttpResponse(status=403)`丢失了并且永远不会在 中返回`myView`。

它可能是这样的：

```
def myView(request):

    result = checkFunction()
    if result:
        return result
    #if no problem, keep running on...

def checkFunction():
    #do stuff
    if something_goes_wrong:
        return HttpResponse(status=403)
    # you do not need to return anything if no error occured... 
```

因此，如果没有出错，则`checkFunction`不会返回任何内容，并且将`result`不会执行 block。如果您返回响应，那么您的视图将返回该响应（在您的情况下，）...`None``if result:``HttpResponse(status=403)`

更新：那么你可以这样做....

```
def checkFunction(request):
    #do stuff
    if something_goes_wrong:
        return HttpResponse(status=403)
    elif some_other_issue:
        return HttpResponse(....)
    else: #no problems, everything is as expected...
        return render_to_response(...) # or any kind of response you want

def myView(request):

    return checkFunction(request) 
```

这样，您的视图将返回您`checkFunction`返回的内容...

此外，可能需要将`request`对象传递给您，因为您希望在那里创建响应。`checkFunction`你可能需要它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T12:31:46.250

您可以使用装饰器将逻辑应用于可能重定向的视图（如果您真的可以将逻辑放在视图之外）。

```
def check_my_logic(view):
    def wrap(request, *args, **kwargs):
        # do some logic here
        if all_ok:
             return view(request, *args, **kwargs)
        else:
            return HttpResponse(status=403)
  return wrap 
```

然后在views.py中：

```
 from mydecorators import check_my_logic

 @check_my_logic
 def some_view(request):
     .... 
```

# curl - 如何使用 AWK 单线获取 HTTP 状态代码？

> ID：11137310
> 
> 赞同：1
> 
> 时间：2012-06-21T11:38:10.920
> 
> 标签：curl, http-headers, awk

我只想打印使用 cURL 检索到的网页的[HTTP 状态代码。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)是否可以使用 AWK 单线执行此操作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T12:58:49.407

你可以用 curl 得到它，甚至不用 awk：

```
curl -I http://example.com/ -w '%{response_code}' -so /dev/null 
```

curl 的[-I](https://curl.haxx.se/docs/manpage.html#-I)选项发出 HEAD 请求，这通常是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:38:12.620

### 解决方案

下面的单行将从管道中读取 HTTP 标头，并打印出状态码。

```
awk 'BEGIN {"curl -sI http://example.com" | getline; print "Status Code: " $2}' 
```

### 有趣的方面

这种方法有一些好处，乍一看可能并不明显。例如：

*   这个解决方案是纯 AWK；不需要 shell 脚本或包装器。
*   由于我们只关心标题的第一行，我们不需要跟踪或比较 NR 来跳过不需要的行。
*   $0 填充在 BEGIN 块中，因此 AWK 不需要文件参数。

# java - 在 JSP 中显示地图的键集

> ID：11137312
> 
> 赞同：0
> 
> 时间：2012-06-21T11:38:13.943
> 
> 标签：java, spring, jsp, spring-mvc

我想在下拉列表中显示地图的键集，并在用户选择相应键时选择所选键的值。

```
<form:options items="${alertsPrices}" /> 
```

以上是我的选项元素（我必须使用 Spring 表单而不是标准的 html 表单）。目前，这是传递所选键的值，而不是键映射到的值。

另外，我不确定是否需要（从控制器）将 alertsPrices 的值作为整个 Map 或只是键集传递？

用户需要从下拉列表中选择一个键，这将传递键映射到的值而不是键本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:56:24.833

阅读[文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#view-jsp-formtaglib-optionstag)：

> items 属性通常由项目对象的集合或数组填充。itemValue 和 itemLabel 仅引用这些项目对象的 bean 属性（如果指定）；否则，项目对象本身将被字符串化

所以，如果你想要地图的所有条目都在选择框中，并且想要条目的键作为选项标签，条目的值作为选项值，你需要将`entrySet()`地图的 传递给`items`属性，并且使用`itemValue="value" itemLabel="key"`.

# javascript - 如何检查div是否有id？

> ID：11137317
> 
> 赞同：7
> 
> 时间：2012-06-21T11:38:30.007
> 
> 标签：javascript, jquery

```
<div id="cardSlots">
<div class="ui-droppable" tabindex="-1" id="card1">one</div>
<div class="ui-droppable" tabindex="-1" id="card2">two</div>
<div class="ui-droppable" tabindex="-1">three</div>
<div class="ui-droppable" tabindex="-1">four</div>
</div>

<script>
     $(".ui-droppable").each(function () {     
       if($(this).attr("id").length>0)
       {
       alert('here');
       }
    });
</script> 
```

我正在尝试遍历类，但问题是我在该页面中有重复的 card1 和 card2 id。但上面的代码似乎工作但显示以下错误。

```
Uncaught Type Error: Cannot read property 'length' of undefined 
```

我正在尝试从那里的循环中获取 id。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-21T11:44:50.637

使用**属性选择器** `selector[attribute]`仅获取具有 ID 的元素

```
$('.myClass[id]')   // Get .myClass elements that have ID attribute 
```

在你的情况下：

```
$('.ui-droppable[id]').each(function(){
   alert( this.id );
}); 
```

[jsFiddle 演示](http://jsfiddle.net/roXon/eNcDP/1/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-21T11:41:42.667

`if(this.id)`是你所需要的全部。

* * *

**为什么这会奏效？**

如果元素具有 ID，则该值将是一个非空字符串，其结果始终为`true`。
如果它没有 ID，则该值是一个空字符串，其计算结果为`false`。

* * *

> 我正在尝试从那里的循环中获取 id。

要获取 ID 列表，您可以`.map`像这样使用：

```
var ids = $(".ui-droppable").map(function() {     
    return this.id ? this.id : null;
}).get(); 
```

或使用选择器[Roko 在他的回答中建议](https://stackoverflow.com/a/11137426/218196)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T11:40:14.967

**演示** [http://jsfiddle.net/QRv6d/13/](http://jsfiddle.net/QRv6d/13/)

API 链接：[http ://api.jquery.com/prop/](http://api.jquery.com/prop/)

请试试这个，这应该有帮助

**代码**

```
 $(".ui-droppable").each(function () { 

       if($(this).prop("id").length > 0)
       {
       alert('here');
       }
    });​ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T11:39:55.973

如果没有`id`属性`attr`方法会返回`undefined`。写吧：

```
if($(this).attr("id")) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T11:46:02.027

```
if(typeof $(this).attr("id") != 'undefined') 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-06-21T11:40:08.517

```
var $this = $(this);
if (typeof $this.attr("id") != "undefined" && $this.attr("id").length > 0) {
    ...
} 
```

如果要多次使用`$(this)`，建议找到一次，然后将生成的 jQuery 对象放入局部变量中。

# jquery - 如何在不更改 Yaxis 比例的情况下在 Highchart Stock 的工具提示中添加比较值

> ID：11137321
> 
> 赞同：0
> 
> 时间：2012-06-21T11:38:48.360
> 
> 标签：jquery, highcharts

我有一个图表，我需要像 Highchart Stocks 这样的时间导航器，所以我使用了带有一些手工选项的 Stock，它的渲染效果非常好。在股票中，您可以选择绘制变化而不是值。例如这个数据系列：

[1,2,3,4,5] 变化是 [+1,+1,+1,+1]。您可以使用 {point.change} 和 serie plotoption {compare:'value'} 在工具提示中访问此信息。

但是这样做会改变 YAxis 以适应这些变化。我只想在工具提示中显示变化，而不是更改我的图表。任何的想法？

这是**具有正确 YAxis**的正确图表，但您可以看到工具提示永远不会显示变化：http: [//jsfiddle.net/techunter/PhW3t/](http://jsfiddle.net/techunter/PhW3t/)

带有 {compare: 'percent'} 的这个显示工具提示中的正确变化，但**YAxis 比例错误**：http : [//jsfiddle.net/techunter/PhW3t/49/](http://jsfiddle.net/techunter/PhW3t/49/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:51:41.557

显然很难让它工作，所以我已经像这样制作了我的工具提示格式化程序：

```
tooltip: {
                formatter:function(a,b,c){
                    var s = '<b>'+ Highcharts.dateFormat('%A, %b %e, %Y', this.x) +'</b>';
                    $.each(this.points, function(i, point) {
                        var prev = jQuery.inArray(point.x, point.series.processedXData)-1;
                        if(prev>=0){
                            prev = point.series.points[prev];
                            var percent = (point.y - prev.y) *100 / point.y;
                            var positive = false;
                            if(percent>0){
                                positive = true;
                                percent='+'+percent;
                            }
                            else
                                percent = percent +'';
                            percent = percent.substring(0,percent.indexOf('.')+3)+'%';
                            if(positive)
                                percent = '<span style="color:#000000">'+percent+'</span>';
                            else
                                percent = '<span style="color:#FF0000">'+percent+'</span>';
                            s += '<br/>'+'<span style="color:'+point.series.color+'">'+point.series.name+'</span>: <b>'+point.y+'</b> ('+percent+')';
                        }
                        else{
                            s += '<br/>'+'<span style="color:'+point.series.color+'">'+point.series.name+'</span>: <b>'+point.y+'</b>';
                        }
                    });

                    return s;
                },
                enable:true
            }, 
```

在行动：http: [//jsfiddle.net/techunter/PhW3t/55/](http://jsfiddle.net/techunter/PhW3t/55/)

如果有人有更好/更快的想法，请分享。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T12:29:29.833

查看您的代码，您将 yAxis 的最小值/最大值分别设置为 2/5 - 这与您的非变化图表相同。试试[这些](http://jsfiddle.net/7Kzvk/)值（让你看到所有的点）：

```
yAxis: {
            min: -10,
            max:25,
            title: {
                text: '# of Hospitalizations'
            }
        } 
```

如果需要，您也可以通过计算值设置最小值/最大值。

**编辑：** 我发现这个[链接](http://highslide.com/forum/viewtopic.php?f=12&t=18320)描述了进行预计算并将该数据作为注释字段放入系列对象中。如果您从 SQL 调用返回数据，这应该很容易。对 SQL 的简单修改以返回具有百分比变化的新列。然后，调用从调用到注释字段的百分比变化。

# c# - 将双斜杠替换为单斜杠

> ID：11137330
> 
> 赞同：0
> 
> 时间：2012-06-21T11:39:54.590
> 
> 标签：c#

在我的 c# 应用程序中，我想将字符串字符转换为特殊字符。我的输入字符串是“G\u00f6teborg”，我希望输出为 Göteborg。

我正在使用下面的代码，

```
 string name = "G\\u00f6teborg";

 StringBuilder sb = new StringBuilder(name);
 sb = sb.Replace(@"\\",@"\");
 string name1 = System.Web.HttpUtility.HtmlDecode(sb.ToString());
 Console.WriteLine(name1); 
```

在上面的代码中，双斜杠保持不变，它没有替换为单斜杠，所以解码后我得到的输出为 G\u00f6teborg 。

请帮助找到解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:43:32.007

```
string name = "G\\u00f6teborg"; 
```

只需删除其中一个反斜杠：

```
string name = "G\u00f6teborg"; 
```

如果您从用户那里得到输入，那么您需要做更多：替换反斜杠是不够的，因为这不是字符在内部存储的方式，它`\uXXXX`是表示 Unicode 代码点的*转义序列。*

如果您想用 Unicode 代码点替换用户输入转义序列，则需要正确*解析*用户输入。您可以为此使用正则表达式：

```
MatchEvaluator replacer = m => ((char) int.Parse(m.Groups[1].Value, NumberStyles.AllowHexSpecifier)).ToString();
string result = Regex.Replace(name, @"\\u([a-fA-F0-9]{4})", replacer); 
```

这匹配每个转义组（`\u`后跟四个十六进制数字），提取十六进制数字，解析它们并将它们转换为字符。

# git - git mergetool 失败

> ID：11137333
> 
> 赞同：6
> 
> 时间：2012-06-21T11:39:57.613
> 
> 标签：git, git-merge, mergetool

合并后，我想使用 git mergetool 解决问题，但使用我指定的任何工具都会失败：

```
git 合并工具                                                                                                          
 合并工具候选： opendiff kdiff3 tkdiff xxdiff meld tortoisemerge gvimdiffdiffuse ecmerge p4merge araxis bc3 vimdiff emerge
合并：
主程序

'main.c' 的正常合并冲突：
  {local}：修改文件
  {remote}：修改文件
点击回车开始合并解析工具（kdiff3）：
main.c 合并失败

```

我指定的工具似乎根本没有启动。

的输出

```
git 配置 -- 列表
```

```
合并工具=kdiff3
core.repositoryformatversion=0
core.filemode=true
core.bare=false
core.logallrefupdates=true

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T11:45:38.247

`kdiff3`可能没有安装在您的系统上。如果是，请检查它是否可以通过您的`PATH`变量获得

尝试

```
git config --global merge.tool <your_merge_program> 
```

此外，您可以指定您的操作系统和可用的合并程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-22T08:03:17.063

请注意，git 2.10 将提供更好的退出状态来识别 diff/merge 工具安装问题。

请参阅[John Keeping (](https://github.com/johnkeeping) [)的](https://github.com/johnkeeping)[提交 45a4f5d](https://github.com/git/git/commit/45a4f5d9f99334151af90b2199004ec49a651d7a)（2016 年 8 月 15 日） 。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 331f06d](https://github.com/git/git/commit/331f06d6f1cc0e164c4aa320c2659d99de67f2f6))^(中，2016 年 8 月 19 日）)[`johnkeeping`](https://github.com/johnkeeping)
^([`gitster`](https://github.com/gitster))

> ## `difftool`：始终遵守致命错误退出代码
> 
> 目前 difftool 的“信任退出代码”逻辑总是抑制我们调用的 diff 实用程序的退出状态。
> 这很有用，因为我们不想仅仅因为 diff 返回“1”而因为文件不同而退出，但是如果 shell 由于找不到所选的 diff 实用程序而返回错误，则会令人困惑。
> 
> POSIX 指定
> 
> *   127 作为“ `command not found`”的退出状态，
> *   126 代表“ `command found but is not executable`”和
> *   [如果命令因收到信号而终止，则值大于 128](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_08_02)
> 
> 至少 bash 和 dash 遵循此规范，而 diff 实用程序通常使用 " `1`" 表示我们要忽略的退出状态。
> 
> 将 126 或更大的任何值作为特殊值处理，以指示发生某种形式的致命错误。

# iphone - 在 iOS 中从图库中附加声音文件

> ID：11137346
> 
> 赞同：1
> 
> 时间：2012-06-21T11:40:40.160
> 
> 标签：iphone, ios, xcode

是否可以像在我的 iOS 应用程序中访问图像库一样访问声音文件库，我尝试在网上搜索但没有找到任何关于它的好内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:45:36.290

您可以参考 Apple 的[AddMusic](http://developer.apple.com/library/ios/#samplecode/AddMusic/Listings/ReadMe_txt.html#//apple_ref/doc/uid/DTS40008845-ReadMe_txt-DontLinkElementID_9)示例应用程序，了解它是如何完成的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:23:47.947

是的，您可以将其上传到服务器。使用以下代码：

当您从选取器中选择一首歌曲时

```
- (void)mediaPicker: (MPMediaPickerController *)mediaPicker didPickMediaItems:(MPMediaItemCollection *)mediaItemCollection 
{
    MPMediaItem *song = nil ;
    [self dismissModalViewControllerAnimated:YES];

    if ([mediaItemCollection count] < 1) 
    {
        return;
    }
    [song release];
    song = [[[mediaItemCollection items] objectAtIndex:0] retain];

    //song.accessibilityHin

    [self uploadMusicFile:song];
}

- (void) uploadMusicFile:(MPMediaItem *)song
{
    // Init audio with playback capability
    AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    [audioSession setCategory:AVAudioSessionCategoryPlayback error:nil];

    NSURL *assetURL = [song valueForProperty:MPMediaItemPropertyAssetURL];
    AVURLAsset *songAsset = [AVURLAsset URLAssetWithURL:assetURL options:nil];
 // to get uniqe time interval
    [[NSDate date] timeIntervalSince1970];
    // convert this ti string
    NSTimeInterval seconds = [[NSDate date] timeIntervalSince1970];
    NSString *intervalSeconds = [NSString stringWithFormat:@"%0.0f",seconds];

    AVAssetExportSession *exporter = [[AVAssetExportSession alloc] initWithAsset: songAsset                                                                       presetName: AVAssetExportPresetPassthrough];

    exporter.outputFileType = @"public.mpeg-4";

    NSString *exportFile = [[NSString alloc] initWithString:[DOCUMENTS_FOLDER stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.mp4",intervalSeconds]]];

    NSURL *exportURL = [[NSURL fileURLWithPath:exportFile] retain];
    exporter.outputURL = exportURL; 

    [exporter exportAsynchronouslyWithCompletionHandler:
     ^{
         NSData *data = [NSData dataWithContentsOfURL:exportURL];

         // Here your upload code 
     }];
} 
```

# java - 如何在 Spring Mvc+JPA 应用程序的实体中使用正则表达式模式

> ID：11137347
> 
> 赞同：-1
> 
> 时间：2012-06-21T11:40:51.837
> 
> 标签：java, regex, spring-mvc, bean-validation

任何人都可以建议我如何在实体中使用正则表达式模式，我已经在 springMvc+Jpa 中完成了应用程序，但我的问题是在 UI 用户名和密码字段中允许空格并且能够使用空格创建和更新用户。我有正则表达式模式的知识，但我很困惑如何在spring mvc应用程序中使用，请帮助我

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:49:29.000

我建议阅读 Springs 官方文档中的一些内容。它们确实支持 JSR-303，您可以在其中使用验证规范注释某些属性。

[http://static.springsource.org/spring/docs/3.1.1.RELEASE/spring-framework-reference/htmlsingle/spring-framework-reference.html#validation](http://static.springsource.org/spring/docs/3.1.1.RELEASE/spring-framework-reference/htmlsingle/spring-framework-reference.html#validation)

如果您只想要简单的东西，您可以随时将值发布到控制器，在那里检查您的模式，如果不通过则抛出错误。

一个非常简单粗暴的解决方案可能看起来像这样（我打赌有更多春季经验的人可以改进很多）。假设此页面存在一个表单 bean：

jsp：

```
<form:form *some attributes*>
<ul class="errorMessages">
    <c:forEach items="${errorMessages}" var="msg">
        <li>${msg}</li>
    </c:forEach>
</ul>
<form:input path="myStringNotValidated" id="myStringNotValidated/>
<form:input path="myStringValidated" id="myStringValidated/>
<input type="submit" value="submit"/>
</form:form> 
```

控制器：

```
List<String> errorMessages = new ArrayList<String>();
@RequestMapping(value="someURLYouPostedTo", method = RequestMethod.POST)
public ModelAndView save(@ModelAttribute myFormBean){
    if(!*check your regex here on myFormBean.getMyStringValidated()){
        errorMessages.add("Bad value on x");
        // Make sure error messages is available in the model map
        // Return to the same page
    }
} 
```

# php - 使用带有 php 和 mysql 的 select-option 标记检索信息

> ID：11137351
> 
> 赞同：0
> 
> 时间：2012-06-21T11:41:00.457
> 
> 标签：php, mysql, html

我有四个选择

```
name, region, year, month 
```

我想要的是当用户选择名称并点击提交时，它应该返回与该名称相关的数据，忽略区域、年份、月份（如果用户未提供）。当我选择名称和年份时，它应该返回与该名称和年份相关的数据而忽略其他数据。在任何选择中，它都应该如此。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:51:26.860

仅使用 PHP，这似乎不可能以简单的方式完成。您需要做的是检查您提交的（即$_POST）值数组`empty()`并根据它构建mysql-query，当用户选择一个字段时附加更多WHERE子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:58:39.850

尝试这个...

```
if($_POST['name'])
{ 
 $subqry.="name='".$_POST['name']."'";
 $and="and";
}
if($_POST['region'])
{
 $subqry.=$and." region='".$_POST['region']."'";
 $and="and";
}
if($_POST['month'])
{
 $subqry.=$and." month='".$_POST['month']."'";
 $and="and";
}
if($_POST['year'])
{
 $subqry.=$and." year='".$_POST['year']."'";
}

$sqlqry = "select * from tablename where ".$subqry; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:44:37.413

链式选择是您所需要的：

[http://www.appelsiini.net/2010/jquery-chained-selects](http://www.appelsiini.net/2010/jquery-chained-selects)

# deployment - 大型 Deb 文件在 Meego 中的部署崩溃

> ID：11137354
> 
> 赞同：1
> 
> 时间：2012-06-21T11:41:06.003
> 
> 标签：deployment, crash, deb, meego

我最近将我的 QtSdk 更新到 1.2，之后，我无法部署超过 6 mb 的 debian 文件。它给了我以下错误： 16:32:02：准备 SFTP 连接... 16:32:02：开始上传... 16:32:03：上传包失败：失败 16:32:03：部署步骤失败的。构建项目 Animal101SymbianMeegov1 时出错（目标：Harmattan）执行构建步骤“通过 SFTP 上传部署 Debian 包”时

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:09:11.437

我用来部署的解决方法是在 /tmp/.deb 中创建一个指向 /var/tmp/.deb 的链接，然后在 QtCreator 中运行部署步骤。

# asp.net - 水晶报表导出到可编辑字

> ID：11137355
> 
> 赞同：1
> 
> 时间：2012-06-21T11:41:06.677
> 
> 标签：asp.net, crystal-reports, ms-word, export, sap

我在 VS 2010 中使用 SAP 水晶报表。我创建了一个类似表结构的报表（使用行）。并将其导出到 Word... 我什至可以在那里进行编辑。一切正常。

但我想要的是：

1.  我想用 ms word 编辑生成的报告..
2.  我只能添加文本但不能编辑报告。
3.  我想像普通的 Ms word 文件一样使用它。

是否有任何替代解决方案。我用谷歌搜索了很多，但找不到任何有用的东西......所以终于来到这里。

谢谢阅读。任何帮助非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:15:39.860

没有直接的方法可以实现这一点，您不能在水晶报表上添加约束以禁用您的报表进行编辑。

但是可以有一个接近的解决方案，我建议在以 MS word 导出您的报告后，在此文档上应用限制编辑。

您必须编写一段代码，这些代码可能是您的代码或执行此任务的服务。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:39:54.960

尝试使用：

```
ExportOptions crExportOptions = report.ExportOptions;
{
   DiskFileDestinationOptions crDiskFileDestinationOptions = new DiskFileDestinationOptions();
   PdfRtfWordFormatOptions crFormatTypeOptions = new PdfRtfWordFormatOptions();
   crDiskFileDestinationOptions.DiskFileName = wordFilePath;
   crExportOptions.ExportDestinationType = ExportDestinationType.DiskFile;
   crExportOptions.ExportFormatType = ExportFormatType.WordForWindows; //Or EditableRTF
   crExportOptions.DestinationOptions = crDiskFileDestinationOptions;
   crExportOptions.FormatOptions = crFormatTypeOptions;
}
report.Export(crExportOptions);
report.Close(); 
```

# .htaccess - 创建子域（sub.domain.com）并重定向到另一台服务器（sub.domain.org），同时在 url 中维护 .com

> ID：11137356
> 
> 赞同：2
> 
> 时间：2012-06-21T11:41:11.530
> 
> 标签：.htaccess, redirect, subdomain

**重定向到不同的服务器但相同的域。** 我在不同的主机上有 2 台服务器。一个是 domain.com，另一个是 domain.org。domain.org 有更多的资源。现在我想在第一个（sub.domain.com）上创建一个子域并重定向到（sub.domain.org），同时在url中维护.com。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:56:05.100

这取决于您的主机运行在什么上（Apache、nginx 等...）。在 nginx 中，您可以使用 proxy_pass 将请求重定向到另一个主机，同时仍然保留 url：
location / {
proxy_pass [http://domain.org:80](http://domain.org:80) ;
proxy_set_header X-Real-IP $remote_addr; 查看 nginx 文档以获取更多信息：[http](http://wiki.nginx.org/HttpProxyModule)
: //wiki.nginx.org/HttpProxyModule 或者此讨论可能会有所帮助：[http](http://www.webmasterworld.com/apache/4464836.htm) ://www.webmasterworld.com/apache/4464836.htm 也可以这样做这是通过操纵 DNS 记录，因此 sub.domain.com 被解析为运行 subd.domain.org 的主机（但您需要在 webserver 中处理 HTTP Host 标头）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:00:15.847

有几种方法可以做到：

1.  您需要为 sub.domain.com 创建 DNS 别名，即 CNAME 记录，以便重定向到 sub.domain.org（查看此处 (http://en.wikipedia.org/wiki/CNAME_record) 了解更多信息）。您无需在 .com 服务器上进行任何操作。
2.  您可以使用 Web 服务器配置进行重定向。因此 sub.domain.com 将引用 .com 服务器，而 web-server 会将其重定向到 .org。例如apache中的虚拟主机它看起来像这样。

    ```
     ServerName sub.domain.com
            Options +FollowSymLinks
            RewriteEngine on
            RewriteRule (.*) http://sub.domain.org/ [R=302,L] 
    ```

3.  最后一种方法是通过网站文件重定向。例如，您可以放入 index.php（如果您使用的是 php）并放入其中：
4.  或者通过像`nginx`这样的网络服务器代理它。更新。正如@intense 建议的那样。

附言。我认为 302 是正确的变体。不是 301 =)

# c - C 中的 REST 客户端库

> ID：11137361
> 
> 赞同：5
> 
> 时间：2012-06-21T11:41:27.377
> 
> 标签：c, rest

是否有一个好的 C 库可以在我的客户端应用程序中用于与 REST 服务器通信？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T11:49:50.653

想到 libcurl，因为 REST 基于基本的 HTTP 请求。

当然，这只是一个起点；你需要在上面写一点逻辑。我不确定您正在寻找的是一个源生成解决方案，您可以将它指向服务描述符并自动生成存根，或者您是否只是在寻找连接。

# java - Struts2在jsp中显示pdf文件

> ID：11137362
> 
> 赞同：3
> 
> 时间：2012-06-21T11:41:35.863
> 
> 标签：java, struts2, itext

我的要求是创建一个动态报告 pdf 文件，其中包含我正在使用 iText 执行的数据库中的一些数据。现在，我想在网页中显示这个 pdf 文件以及菜单、页眉、页脚等。

所以，如果用户有一些 pdf 查看器，那么这个 pdf 应该显示在用户机器上，并带有打印选项来打印该 pdf。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T12:56:09.633

我就是这样做的。您可以在 iframe 或常规 jsp 中调用此操作

```
public class GeneratePdf extends ActionSupport{
    private InputStream inputStream;
    public String execute(){
        HttpServletResponse response = ServletActionContext.getResponse();
        Document document = new Document();
        ByteArrayOutputStream buffer = new ByteArrayOutputStream();
        try {
            PdfWriter.getInstance(document, buffer);
            document.open();
                        // do your thing
            document.close();
        } catch (DocumentException e) {
            e.printStackTrace();
        }

        byte[] bytes = null;
        bytes = buffer.toByteArray();
        response.setContentLength(bytes.length);

        if(bytes!=null){
            inputStream = new ByteArrayInputStream ( bytes );
        }
 return SUCCESS;
}

public InputStream getInputStream() {
        return inputStream;
    }
} 
```

在你的 struts.xml

```
 <action name="GeneratePdf" class="com.xxx.action.GeneratePdf">
    <result name="success" type="stream">
            <param name="contentType">application/pdf</param>
            <param name="inputName">inputStream</param>
            <param name="contentDisposition">filename="test.pdf"</param>
            <param name="bufferSize">1024</param>
    </result>
   </action> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:02:18.817

我正在使用`inputStream`Anu 建议的操作来执行此操作。并使用[PDF.JS](http://mozilla.github.com/pdf.js/)库。

[在线演示](http://mozilla.github.com/pdf.js/web/viewer.html)

[GitHub](https://github.com/mozilla/pdf.js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-31T11:37:42.873

```
public ByteArrayInputStream generatePDF(List<Object> items) {

    try {

        List<InputStream> listInputStream = new ArrayList<InputStream>();
        for (int i = 0; i < items.size(); i++) {
            listInputStream.add(new ByteArrayInputStream(getBytes(items.get(i)));
        }

        HttpServletResponse response = ServletActionContext.getResponse();
        ByteArrayOutputStream buffer = new ByteArrayOutputStream();
        Document document = new Document();

        PdfWriter writer = PdfWriter.getInstance(document, buffer);
        document.open();
        PdfContentByte cb = writer.getDirectContent();

        for (InputStream inputStream : listInputStream) {

            PdfReader reader = new PdfReader(inputStream);

            for (int i = 1; i <= reader.getNumberOfPages(); i++) {
                document.setPageSize(reader.getPageSize(i));
                document.newPage();
                PdfImportedPage page = writer.getImportedPage(reader, i);
                cb.addTemplate(page, 0, 0);
            }
        }

        document.close();

        byte[] bytes = null;
        bytes = buffer.toByteArray();
        response.setContentLength(bytes.length);

        return new ByteArrayInputStream(bytes);

    } catch(Exception e){
        System.out.println(e);
    }

} 
```

# javascript - knockoutjs 将多个输入元素绑定到一个 observable

> ID：11137363
> 
> 赞同：0
> 
> 时间：2012-06-21T11:41:36.167
> 
> 标签：javascript, knockout.js

我想将两个或多个输入元素绑定到 viewModel 的一个可观察属性。

例如，我可能有一个名为 Telephone number 的属性，它由区号和号码组成。我想为用户输入显示两个文本框，它会更新视图模型中的单个可观察对象（它可以存储为逗号分隔的字符串或数组）。我不想拥有多个属性，然后拥有电话号码的计算属性，因为我不知道将向用户显示多少个文本框以供输入（使用模板动态生成）。

有没有可能实现？谢谢！

编辑：这是更好理解的小提琴[http://jsfiddle.net/amitava82/wMH8J/2/](http://jsfiddle.net/amitava82/wMH8J/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:17:20.900

如果你的数据被组合成一个 observable，你需要一些东西来解析或拆分它们。一种方法是使用计算。如果您想要 3 个（仅选择一个数字）文本框作为电话号码，并且它们都指向 1 个可观察的电话号码，您可以为部件创建读/写计算属性并将它们绑定到输入文本框。例如，区号文本框将绑定到一个计算的被叫区号，该区号读取电话号码的前 3 个字符。它的可写方面只是将这 3 个写回可观察的电话号码。

# php - 如何使用 XPath 加载、修改和恢复 PHP 片段？

> ID：11137364
> 
> 赞同：2
> 
> 时间：2012-06-21T11:41:37.863
> 
> 标签：php, dom, xpath

我有这样的 PHP 片段（`snippet.php`）：

```
<?php 
    $some_param = some_function();
?>

<p>
    Text, bla bla bla... <?php echo $some_param ?> other text
    more text
</p> 
```

我像这样加载这些片段：

```
$html = file_get_contets('snippet.php');
$dom = new DOMDocument('1.0');
$dom->loadHTML($html); 
```

并使用 xpath 进行修改：

```
$xpath = new DOMXPath($dom);
foreach ($xpath->query("//text()") as $q) {
    $str = trim($q->nodeValue);
    if (isset($strings[$str])) {
        $q->nodeValue = translate($str);
    }
} 
```

当我尝试保存此文件时出现问题：

```
$dom->save($out); 
```

它完全破坏了片段结构：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><head><?php
    $some_param = some_function();
??></head><body><p>
    Translated text, bla bla bla... &lt;?php echo $some_param ?&gt; other text
    more text
</p></body></html> 
```

保存时如何恢复原始代码段结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:09:54.543

PHP 片段是[处理指令](http://www.w3.org/TR/REC-xml/#sec-pi)。[您可以使用XPath](http://www.w3.org/TR/xpath/)查询它们：

```
//processing-instruction('php') 
```

> 节点测试`text()`对于任何文本节点都是正确的。例如，`child::text()`将选择上下文节点的文本节点子项。类似地，节点测试`comment()`对于任何评论节点`processing-instruction()`都为真，节点测试对于任何处理指令都为真。测试`processing-instruction()`可能有一个 Literal 参数；在这种情况下，对于名称等于 Literal 值的任何处理指令都是如此。

如何将它们添加到文档中解释了

*   [如何使用 dom 解析器添加 php 标签](https://stackoverflow.com/questions/4247726/how-to-add-php-tags-with-the-dom-parser)

# jquery - 与鼠标位置相关的 Div 不透明度或宽度

> ID：11137368
> 
> 赞同：0
> 
> 时间：2012-06-21T11:41:48.723
> 
> 标签：jquery, mouse-position

我正在开发一个 VFX 投资组合网站。

我已经使用事件侦听器（几乎）同步三个视频。

计划是将三个video-div放在一起，然后让video1在鼠标位置的左侧可见，video2在鼠标位置的右侧可见，并让video3在鼠标位置50px处可见左侧，鼠标位置右侧 50 像素，有点像一段视频。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:05:58.310

使用 jQuery，您可以像这样获得鼠标位置：

```
$('div').bind('mousemove',function(e){
    videoX = e.pageX;
}); 
```

那是从窗口的左上角。所以你需要调整它以考虑到视频 div 的位置。得到这样的：

```
var videoOffset = $('video').offset().left; 
```

您也可以稍后获得宽度。

```
var videoWidth = $('video').width(); 
```

现在您可以计算出鼠标相对于视频左上角的位置：

```
$('div').bind('mousemove',function(e){
    videoX = e.pageX - videoOffset;
}); 
```

有了这些信息，您应该能够对视频做您想做的事情。

希望这能让你走上正确的轨道:)

# branch - TFS 上的成熟分支策略

> ID：11137376
> 
> 赞同：0
> 
> 时间：2012-06-21T11:41:59.170
> 
> 标签：branch

我的团队终于从 SourceSafe 迁移到 TFS 2010，我们正在努力制定我们的策略。

我们需要能够将错误修复放入下一个服务版本中，同时仍在处理当前的服务版本。基本上，在某个时候，我们将停止在当前版本中进行错误修复（除了一些关键版本），并在该版本中试用一两周。在此期间，我们仍然希望修复错误，因此我们将它们放入下一个服务版本中。这与将要进入下一个主要版本的开发是分开的。

我们喜欢成熟的分支策略的外观，其中包括从 main 中分离出一个服务发布分支，从服务版本中分离出一个热修复分支，以及从热修复中分离出一个发布分支。然后我们要做的是将发布分支作为我们正在试验的分支，并且仍然能够将错误修复添加到服务发布分支。然后，当我们完成试点并进行最后的关键更改时，我们通过热修复和服务发布分支将发布分支合并回主分支，然后从服务发布分支创建一个新的热修复和发布分支，这将成为我们的下一个服务版本。

我遇到的最大问题是我希望任何进入 main 的东西都经过全面测试。发布分支将是，但当我们将其合并回主分支时，它将获取我们已签入热修复和服务发布分支的任何更改。这些更改此时尚未经过测试。

为了解决这个问题，我们计划让开发人员在服务发布分支中搁置他们的更改，直到发布合并到主版本中。这对我来说似乎不是最好的主意，但我想不出其他办法来处理这个问题。

有没有其他人必须做类似的事情并有更好的处理方式？

# android - 带有背景的相对布局内的按钮太小

> ID：11137377
> 
> 赞同：0
> 
> 时间：2012-06-21T11:42:01.013
> 
> 标签：android, android-linearlayout

具有 RelativeLayout、TextView、EditText 和 Button 的典型搜索布局

我的`a.9.png`图像高度为 46px

相对布局看起来不错，但是里面的view太小了，Button不适应高度大小和EditText。（在平板电脑中使用hdpi）

这是我的代码::

```
<RelativeLayout
        android:id="@+id/cuadrobusqueda"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="9dp"
        android:layout_marginLeft="14dp"
        android:layout_marginRight="14dp"
        android:layout_marginTop="8dp"
        android:background="@drawable/bg_buscar_servicios"
        android:gravity="center_vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:text="TextView" />

        <EditText
            android:id="@+id/editText1"
            android:layout_width="50dp"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="27dp"
            android:layout_toRightOf="@+id/textView1"
            android:ems="10"
            android:inputType="number" >

            <requestFocus />
        </EditText>

        <Button
            android:id="@+id/button1"
            android:layout_width="100dp"
            android:layout_height="32dp"
            android:layout_alignTop="@+id/textView1"
            android:layout_marginLeft="26dp"
            android:layout_toRightOf="@+id/editText1"
            android:text="Button" android:textSize="11sp"/>

    </RelativeLayout> 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:47:20.340

您正在使用`32dp`按钮的高度，就像`48px`在 hdpi 设备上一样。尝试使用`wrap_content`，它会自动调整您的按钮大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:50:53.460

请确保您的 9 补丁有足够大的内容区域。如果您需要帮助，请在问题上发布 9 补丁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:55:12.003

试试这个.....

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/cuadrobusqueda"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_marginBottom="9dp"
    android:layout_marginLeft="14dp"
    android:layout_marginRight="14dp"
    android:layout_marginTop="8dp"
    android:background="@drawable/ic_launcher"
    android:gravity="center_vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:text="TextView" />
<EditText
            android:id="@+id/editText1"
            android:layout_width="50dp"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="27dp"
            android:layout_toRightOf="@+id/textView1"
            android:ems="10"
            android:inputType="number" >

            <requestFocus />
        </EditText>

        <Button
            android:id="@+id/button1"
            android:layout_width="100dp"
            android:layout_height="32dp"
            android:layout_alignTop="@+id/textView1"
            android:layout_marginLeft="26dp"
            android:layout_toRightOf="@+id/editText1"
            android:text="Button" android:textSize="11sp"/>

    </RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T11:57:25.957

检查您在 android:background="@drawable/bg_buscar_servicios" 中提供的图像，它是高度，如果您想让它变小并且在其下方需要更多屏幕区域，也不要给出 RealtiveLayout 的高度，然后尝试给 android:layout_weight它将根据您的设备自动调整。

但我确定你的图片有问题先检查一下..

# visual-studio - 在 VS 2010 中重用来自 VS 2008 的测试配置？

> ID：11137378
> 
> 赞同：0
> 
> 时间：2012-06-21T11:42:08.357
> 
> 标签：visual-studio, unit-testing, visual-studio-2008, automated-tests

我目前正在研究从 Visual Studio 2008 Professional 中运行自动化测试的选项。我注意到记录集成功能的[MSDN 页面](http://msdn.microsoft.com/en-us/library/ms182469%28v=vs.90%29)仅适用于 VS 2008 和 VS 2005。这让我很怀疑。由于我们计划升级到 VS 2010，我想知道我是否能够继续在 VS 2010 中使用我的配置和知识？这里有没有人有这方面的经验？

TIA，托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:30:23.203

不用紧张，围绕测试配置的术语在 VS 2010 中只是发生了变化。您所知道的大部分内容是相同的，但位于不同的产品品牌下，这会导致文档中出现一些版本控制问题。

最值得注意的是，“测试配置”在 2010 下通常被称为“[测试设置”。](http://msdn.microsoft.com/en-us/library/ee256991.aspx)

微软从 VS 2005/2008 的孤立的“团队测试”术语转移到更全面的大图，称为*Microsoft 应用程序生命周期管理*，其中测试是交付成功应用程序的集成组件。请记住，您将找到的大多数测试文档都指的是测试管理器，它随 Visual Studio 的 Ultimate 和 Test 版本一起提供。测试经理将测试与用例和需求联系起来，并且是大图的一部分。

如果您不了解 ALM 大图，那么仅运行测试的重点视图并没有太大变化，除了一些非常酷 的新功能（例如*Test Impact ）。*

以下链接可能对您有用，因为听起来您对开发人员如何使用测试或构建过程的一部分感兴趣：

*   [在 Visual Studio 中运行自动化测试](http://msdn.microsoft.com/en-us/library/ms182470)
*   [从命令行运行自动化测试](http://msdn.microsoft.com/en-us/library/ms182487)

希望有帮助！

# c# - Reflection.Emit 错误操作会破坏运行时的稳定性

> ID：11137379
> 
> 赞同：2
> 
> 时间：2012-06-21T11:42:09.140
> 
> 标签：c#, reflection, reflection.emit, il

我目前正在玩反射，我的短代码有问题：

```
public class Test
{
    public Test()
    { 

    }
    public string Call()
    {
        string called = "Called";
        return called;
    }
} 
```

和用法：

```
var method = new DynamicMethod("dummy", null, Type.EmptyTypes);
var g = method.GetILGenerator();

g.DeclareLocal(typeof(Object));
g.Emit(OpCodes.Newobj, typeof(Test).GetConstructor(Type.EmptyTypes));
g.Emit(OpCodes.Stloc, 0);
g.Emit(OpCodes.Nop);
g.Emit(OpCodes.Ldloc, 0);
g.Emit(OpCodes.Call, typeof(Test).GetMethod("Call", new Type[]{}));
g.Emit(OpCodes.Call, typeof(Console).GetMethod("WriteLine", new Type[]{ typeof(string) }));
g.Emit(OpCodes.Nop);
//g.Emit(OpCodes.Pop); - used in debugging
g.Emit(OpCodes.Ret);

var action = (Action)method.CreateDelegate(typeof(Action));
action();

Console.Read(); 
```

所以。我正在尝试在运行时创建新方法。在该方法中，我正在创建新的空测试实例。然后，我尝试将其设置为位置 (0)，即 if Object 类型。然后我正在加载它并调用它的方法 Call 来获取字符串。最后，我试图将字符串结果放在屏幕上。我的代码适用于“Ldloc_0”。当调用“调用”方法时会发生错误。有谁知道如何解决这个问题？请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T11:45:48.093

`Call(...)`并且是实例方法；尝试使用`CallVirt`而不是`OpCodes.Call`. `Console.WriteLine`是*静态* 方法，所以应该使用`Call`.

如果有疑问，只需为您想要发出的内容编写 C#，然后在反射器中查看它。

请注意，`Ldloc / 0`随后的 call/callvirt 将无法验证 - 也应该有一个演员表：

```
g.DeclareLocal(typeof(Object));
g.Emit(OpCodes.Newobj, typeof(Test).GetConstructor(Type.EmptyTypes));
g.Emit(OpCodes.Stloc, 0);
g.Emit(OpCodes.Ldloc, 0);
g.Emit(OpCodes.Castclass, typeof(Test));
g.Emit(OpCodes.Callvirt, typeof(Test).GetMethod("Call", new Type[] { }));
g.Emit(OpCodes.Call, typeof(Console).GetMethod("WriteLine",
       new Type[] { typeof(string) }));
g.Emit(OpCodes.Ret); 
```

或更好：

```
g.DeclareLocal(typeof(Test));
g.Emit(OpCodes.Newobj, typeof(Test).GetConstructor(Type.EmptyTypes));
g.Emit(OpCodes.Stloc_0);
g.Emit(OpCodes.Ldloc_0);
g.Emit(OpCodes.Callvirt, typeof(Test).GetMethod("Call", new Type[] { }));
g.Emit(OpCodes.Call, typeof(Console).GetMethod("WriteLine",
           new Type[] { typeof(string) }));
g.Emit(OpCodes.Ret); 
```

或最好：

```
g.Emit(OpCodes.Newobj, typeof(Test).GetConstructor(Type.EmptyTypes));
g.Emit(OpCodes.Callvirt, typeof(Test).GetMethod("Call", new Type[] { }));
g.Emit(OpCodes.Call, typeof(Console).GetMethod("WriteLine",
          new Type[] { typeof(string) }));
g.Emit(OpCodes.Ret); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:53:14.147

将局部变量声明为“Test”类型而不是“Object”类型：

```
g.DeclareLocal(typeof(Test)); 
```

# ruby-on-rails - Rails 的 Rake 任务执行时间异常长？

> ID：11137387
> 
> 赞同：1
> 
> 时间：2012-06-21T11:42:32.823
> 
> 标签：ruby-on-rails, rake

> **可能重复：**
> [如何加快 Ruby/Rake 任务](https://stackoverflow.com/questions/8545459/how-can-i-speed-up-ruby-rake-task)

在我的 Rails 应用程序中，我执行的任何 Rake 任务都需要非常长的时间才能执行。这可能是什么原因，我如何才能实现加速？

# jquery - 如何使用 jquery 使选择框中的选项只读不禁用？

> ID：11137388
> 
> 赞同：3
> 
> 时间：2012-06-21T11:42:36.493
> 
> 标签：jquery

如何使用 jquery 使选择框中的选项只读不禁用？我有一个用于选择角色的多选框和一个选择主要角色。

现在我想让主要角色中的选定选项在只读模式下自动选中角色多个选择框。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:47:07.873

```
$('select').change(function() {
    $(this)
        .siblings('select')
        .children('option[value=' + this.value + ']')
        .attr('disabled', true)
        .siblings().removeAttr('disabled');
}); 
```

# php - 如果我调用控制器，fpdf 可以正常工作，如果我通过 jquery 调用它，fpdf 就不能正常工作

> ID：11137389
> 
> 赞同：0
> 
> 时间：2012-06-21T11:42:38.733
> 
> 标签：php, pdf-generation, fpdf

我能够使用 fpdf 获得 pdf 的输出，问题是如果通过 jquery 调用函数，我不会生成它......而是 pdf 显示在 firebug 中？如何解决这个问题

firebug 中的输出显示

```
%PDF-1.3
3 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/Contents 4 0 R>>
endobj
4 0 obj
<</Filter /FlateDecode /Length 582>>
stream
x���Ms�0���{LU���͞&amp;�v�L�p��b��N��`Zc���k,ĳ��Bgh��b���{�|�����șP`�f�B���sS��C���*+�[H��K�ŁO��מ�����M:<�3�jt�:Z��1,�`�ˤc
�Ҁ��        ��0���~��^��U�  �;�q�_6y
y�� ��+Q�6��e/���C%�ً+�!q5+�Sf 
```

jQuery：

```
 $.post(url+"/create_pdf",js,function(data){

        },"json"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:51:08.463

$.post() 的插入（它将运行 PDF 生成器并将内容返回到 AJAX），您应该将用户重定向到浏览器中的 url：即使用

```
window.location.href=url+"registration/create_member?" + $.param(js); 
```

您需要将 PDF 生成函数转换为接受 $_GET，而不是 $_POST

或者，像您一样生成pdf文件，但存储在服务器上（临时）并通过ajax将url传回，然后ajax通过windows.location.href将用户重定向到该临时文件位置。

# postgresql - Postgres 9.1 日志在 Ubuntu 中默认位于哪里

> ID：11137393
> 
> 赞同：4
> 
> 时间：2012-06-21T11:42:57.237
> 
> 标签：postgresql, logging, ubuntu

我可以在哪里找到我的 postgres 9.1 服务器的启动日志。我正在使用 Ubuntu。 `postgres restart`失败。 `find / -name pg_log`没有发现任何标准日志`/etc/postgres/main/9.1/`是明确的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T12:24:10.807

在类似 RedHat 的发行版中，它会在init 脚本中或在 init 脚本中`/var/lib/pgsql/pgstartup.log`查找变量`PGLOG``/etc/init.d/postgresql`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T01:11:08.263

在 Ubuntu 中，它是`/var/lib/postgresql/9.3/main/pg_log/`.

# actionscript-3 - 随机闪存 cs5.5 as3 错误

> ID：11137394
> 
> 赞同：-1
> 
> 时间：2012-06-21T11:42:58.537
> 
> 标签：actionscript-3, flash

我在 Flash 中创建一个菜单，当我尝试测试该文件时，我收到以下错误：

```
"ReferenceError: Error #1065: Variable TCMText is not defined." 
```

一个网站说这是因为文件中有 TLF 文本框，但我修复了这个问题，但不断收到错误消息。

我用于按钮的代码如下：

```
myButton.addEventListener(MouseEvent.CLICK, onClick);

function onClick(event:MouseEvent):void{

gotoAndStop(5);

} 
```

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:51:54.867

尝试`textLayout.swc`从项目文件夹中删除文件。

# mysql - Doctrine 2 无法识别 FROM 子句中的 SELECT

> ID：11137395
> 
> 赞同：3
> 
> 时间：2012-06-21T11:43:02.447
> 
> 标签：mysql, doctrine-orm

我有一个想在 Doctrine2 中使用的 SQL 查询。

我的查询转到数据库，执行`GROUP BY`用户状态和`COUNT`每个状态的用户数。

然后我试图将一个表加入`COUNT`所有用户并为每个州制作一个百分比。

```
return $this->getEntityManager()
            ->createQuery("
                SELECT COUNT(u.id) as total, 
                    (100*(COUNT( u.id ) /  total_users.total)) as percent
                FROM UserBundle:User u,
                    (SELECT COUNT(*) as total
                     FROM UserBundle:User) as total_users
                LEFT JOIN u.idUserEstado ue
                GROUP BY u.idUserEstado")
            ->getResult(); 
```

问题是，当我运行 Doctrine2 查询时出现异常：

```
[Semantical Error] line 0, col 397 near 
'(SELECT COUNT(': Error: Class '(' is not defined. 
```

教义不承认`SELECT`该`FROM`条款。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-10T03:52:00.720

从子句上的选择不由学说2处理

关于教义的 jira 有一个已关闭（且不被接受）的功能请求：http: [//www.doctrine-project.org/jira/browse/DDC-2793](http://www.doctrine-project.org/jira/browse/DDC-2793)

> DQL 是关于查询对象的。在 FROM 子句中支持子选择意味着 DQL 解析器无法再构建结果集映射（因为子查询返回的字段可能不再与对象匹配）。这就是为什么不能支持它的原因（仅在没有水合的情况下运行查询的情况下支持它是不可行的 IMO，因为这意味着查询解析需要依赖于执行模式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:52:17.047

```
(SELECT COUNT( * ) as total FROM UserBundle:User) as total_users 
```

`COUNT(*)`DQL 中可能不存在。试一试`COUNT(u.id)`，结果会一样。您还可以在 EntityRepository 中尝试此操作：

```
$qb->select(array(
    'count(u.id) as total',
    '(100*(count(u.id)/total_users.total)) as percent',
    'select count(u.id) as total_users) as total_users'))
   ->from('UserBundle:User')
   ->leftJoin('u.idUserEstado','ue')
   ->groupBy('u.idUserEstado');

return $qb->getQuery()->getResult(); 
```

来源：[谷歌用户组问题](http://groups.google.com/group/doctrine-user/browse_thread/thread/43fa9880949f2bd7?pli=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:46:58.590

这

```
...  FROM UserBundle:User u, ... 
```

很奇怪。也许它找不到类用户。

# c++ - 我安装了 libboost 但无法链接到它

> ID：11137398
> 
> 赞同：7
> 
> 时间：2012-06-21T11:43:22.673
> 
> 标签：c++, boost, linker

我已经`libboost-dev`通过安装`apt-get`，它被放置在`/usr/lib`.

```
/usr/lib$ ls | grep boost
libboost_filesystem.so.1.46.1
libboost_iostreams.so.1.46.1
libboost_serialization.so.1.46.1
libboost_system.so.1.46.1
libboost_thread.so.1.46.1
libboost_wserialization.so.1.46.1 
```

但是当我试图编译一个使用的源时，`boost_thread`我仍然得到一个错误。

```
$ g++ tcp_echo.cpp -o tcp_echo -L/usr/lib -llibboost_thread
/usr/bin/ld: cannot find -lboost_thread
collect2: ld returned 1 exit status
$ g++ tcp_echo.cpp -o tcp_echo -L/usr/lib -lboost_thread
/usr/bin/ld: cannot find -lboost_thread
collect2: ld returned 1 exit status 
```

安装和链接的正确方法是`libboost`什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T12:07:40.450

> 我注意到的一件事是您确实没有 libboost_thread.so。您有版本化的 1.46.1 文件，但通常库会创建一个符号链接到带有未修饰名称的版本化副本。可能不是这样，但这是我注意到的一件事。（这通常由安装人员完成。） – [Omaha](https://stackoverflow.com/users/1235584/omaha)

我认为这就是重点。这意味着我安装`libboost`错误的方式。事实上，我只安装了`libboost-dev`：

```
sudo apt-get install libboost-dev 
```

但我应该做的是：

```
sudo apt-get install libboost-dev libboost1.46-doc libboost-date-time1.46-dev ibboost-filesystem1.46-dev libboost-graph1.46-dev libboost-iostreams1.46-dev libboost-math1.46-dev libboost-program-options1.46-dev libboost-python1.46-dev libboost-random1.46-dev libboost-regex1.46-dev libboost-serialization1.46-dev libboost-signals1.46-dev libboost-system1.46-dev libboost-test1.46-dev libboost-thread1.46-dev libboost-wave1.46-dev 
```

（或者，在我的特殊情况下，`libboost-system1.46-dev libboost-thread1.46-dev`至少安装）

一旦你正确安装它们，应该有`.a`and `.so`in `/usr/lib`。

```
/usr/lib$ ls | grep boost
libboost_date_time.a
libboost_date_time-mt.a
libboost_date_time-mt.so
libboost_date_time.so
libboost_date_time.so.1.46.1
libboost_filesystem.a
libboost_filesystem-mt.a
... and so on ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-18T18:02:41.910

在 Ubuntu 16.04 中，包被命名为：libboost-all-dev（不是 libboost-dev-all）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-12T17:40:13.637

评论框搞砸了这个建议的引用，所以我将其发布为获得正确引用的答案。

过去，Ubuntu 有元包 libboost-dev-all 来安装所有这些。不过，我现在好像找不到了。这是一个可能有帮助的命令行：

```
sudo apt-get install `apt-cache search libboost | \
    grep -- -dev | \
    grep -v '[12]\.[0-9]' | \
    awk '{ print $1; }'` 
```

（取自[https://github.com/imvu-open/istatd/](https://github.com/imvu-open/istatd/)文件 install-boost-dev.sh ）

# jquery - jquery 自定义幻灯片标题菜单

> ID：11137399
> 
> 赞同：0
> 
> 时间：2012-06-21T11:43:22.947
> 
> 标签：jquery, menu, slide

我想要做的如下：

我的页面顶部有一个标题栏。它看起来像这样：

标题：管理员 [客户] [报告]

用于此的 html 是：

```
<div id="header">
<span class="title">Title:</span>
<div id="section" class="active"><a href="javascript:void();">Admin</a></div>
<div id="section" class="hidden"><a href="javascript:void();">Customers</a></div> 
<div id="section" class="hidden"><a href="javascript:void();">Reports</a></div>
</div> 
```

所有的样式都用 CSS 很好，好吧。所以很明显，活动的可以看到，隐藏的不能看到。我想单击活动的，然后淡入并显示隐藏的，到目前为止我已经设法做到了，然后，当您选择其中一个隐藏的时，其他两个淡出，并且所选的滑动到位的活跃的。

但是我使用了 animate 属性，这一切都是歪斜的。出于某种原因，它的动画离开页面，不是我看不到它，但足够了，而且在我的 DIV 之外。我尝试在它周围放置一个绝对 DIV，因为我认为当我减去

```
animate({left: $(this).offset().left)}); 
```

左，它只会在 DIV 内进行动画处理。

标题、标题和部分的 CSS 是：

```
#header     { position: absolute; top: 0px; width: 1000px;
        height: 60px; text-align: left; display: block; }       
.title, #section, #section a
        {position: relative; left: 10px; font-family: 'Play', sans-serif;
        font-size: 50px; font-weight: bold;  float: left;}
.title  {color: #9900ff; display: inline-block; width: 150px;}
#section, #section a    
    {color: #CC81FD; font-size: 50px; margin-right: 5px; }
#section.active, #section.active a
          {display: inline-block; text-decoration: none;}
#section.hidden a {display: none; text-decoration: none;}
#section a:hover  {color: #9900FF;} 
```

而我当前（但失败）的 jQuery 是：

```
var curX = $(this).offset().left;
var curElement = this;
$(this).animate({left: -curX});
$("#section a").not(curElement).fadeOut("slow"); 
```

如果有人可以提供帮助，那就太棒了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:00:06.113

好吧，经过1小时的工作，我想我已经完成了！我希望它会像你的意思一样工作！但是我将（无效的）ID“部分”更改为一个类！在这里你可以看到它： [JSFiddle](http://jsfiddle.net/kE5u9/4/)

# javascript - javascript对象函数

> ID：11137401
> 
> 赞同：-1
> 
> 时间：2012-06-21T11:43:25.767
> 
> 标签：javascript, object

我试图让函数 feedAmount 打印到控制台，但我卡住了。有人可以帮我理顺吗（如果需要，可以优化它）？作为一个附加问题，我可以制作原型吗？chicken.prototype.chickenFeed("small")? 谢谢！

```
var chicken = new chickenObj("cluck");
chicken.talk();

function chickenObj(says) {

    this.says = says;

    this.talk = function talk() {
        console.log("::" + this.says);
    }
}

chicken.chickenFeed = new chickenFeed("small");
chicken.chickenFeed.foodAmount();

function chickenFeed(size) {

    this.size = size;

    function foodAmount() {

        if(this.size === "small") {
            this.food = "1 pound of feed";
        } else if(this.size === "medium") {
            this.food = "2 pound of feed";
        } else if(this.size === "large") {
            this.food = "3 pound of feed";
        }

        console.log(this.food);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:45:45.583

如果您希望 foodAmount 可用，您需要在由构造函数创建的对象（使用 this.foodAmount）或函数原型（chickenFeed.prototype.foodAmount）上定义它

```
function chickenFeed(size) { 
    this.size = size;

    this.foodAmount = function() { 
        if (this.size === "small") { 
            this.food = "1 pound of feed";
        } else if (this.size === "medium") { 
            this.food = "2 pound of feed";
        } else if (this.size === "large") { 
            this.food = "3 pound of feed";
        }

        console.log(this.food);
    }
} 
```

或者：

```
function chickenFeed(size) { 
    this.size = size;
}

chickenFeed.prototype.foodAmount = function() {
    if (this.size === "small") { 
        this.food = "1 pound of feed";
    } else if (this.size === "medium") { 
        this.food = "2 pound of feed";
    } else if (this.size === "large") { 
        this.food = "3 pound of feed";
    }

    console.log(this.food);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:49:48.580

```
function chickenFeed(size) { 
    this.size = size;
}

chickenFeed.prototype.foodAmount = function () { 

    if (this.size === "small") { 
        this.food = "1 pound of feed";
    }
    else if (this.size === "medium") { 
        this.food = "2 pound of feed";
    }
    else if (this.size === "large") { 
        this.food = "3 pound of feed";
    }

    console.log(this.food);
}; 
```

当你在它的时候，把它也放`.talk`上去`chickenObj.prototype`。

# c++ - 运行时访问应用程序变量

> ID：11137406
> 
> 赞同：1
> 
> 时间：2012-06-21T11:43:45.367
> 
> 标签：c++, winapi

我的 Win32 应用程序有以下代码：

```
class Foo {
public: 
    string mystring;    
    __declspec(dllexport) void foo();
};

void Foo::foo(){

    printf("foo called");

}

int _tmain(int argc, _TCHAR* argv[])
{
    Foo foo;
    foo.mystring =  "all your base are belong to us";

    return 0;
} 
```

如果我知道内存中有这个 Win32 的图像基地址：

*   鉴于我有图像基地址，我怎样才能获得`Foo`类实例偏移量
*   鉴于我在内存中有win32应用程序的图像基地址，如何获取变量的偏移地址`mystring`
*   获取函数的函数地址`foo()`相当容易，我能够做到这一点，甚至可以从另一个进程调用该函数。但是，我不确定如何获取（至少读取）变量的地址。

这个想法是我将执行这个程序，然后其他一些程序获取这个应用程序的图像基地址，然后尝试读取所述应用程序内的变量。

# ruby - 如何使 premailer gem 与活动邮件程序一起使用

> ID：11137407
> 
> 赞同：1
> 
> 时间：2012-06-21T11:43:45.823
> 
> 标签：ruby, actionmailer

当我使用 letter_opener 检查开发中的输出时，我可能会遇到复杂情况。

无论如何，当我运行电子邮件时，我会调用以下代码：

```
 add_attachment('mobile.css')
    mail(to: @user.email, subject: @alert.title do |format|
      format.html {
        Premailer.new(
          "#{render}",
          :with_html_string => true,
          :css => [Rails.root.join("app/assets/mail/basestyles.css"),Rails.root.join("app/assets/mail/" +         Site.current.name + ".css")],
          :preserve_styles => true
        ).to_inline_css
       }
    format.text {  
      Premailer.new(
        "#{render}",
        :with_html_string => true,
        :css => [Rails.root.join("app/assets/mail/basestyles.css"),Rails.root.join("app/assets/mail/" +         Site.current.name + ".css")],
        :preserve_styles => true
      ).to_plain_text
    }
  end
  ) 
```

现在这不会引发任何错误，但是当我运行它时，我得到的是没有内联样式设置的 html 文件。

视图正确呈现，当我运行 premailer 以自行生成内联样式时，它工作正常，当我使用 activemailer 时，我遇到了问题。

我看过[如何将'premailer'与Rails集成，](https://stackoverflow.com/questions/6127068/how-to-integrate-premailer-with-rails)但它对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:49:08.597

哇，这是一个语法错误！我不会对此感到惊讶，除非它从未给我任何错误消息，因此如果将来有人遇到类似情况，不要指望您的语法错误已被捕获。do |格式| 应该从方法中移出，并且渲染应该具有要渲染的实际视图，所以

```
add_attachment('mobile.css')
mail(to: @user.email, subject: @alert.title) do |format|
  format.html {
    Premailer.new(
      "#{render 'path to view to render'}",
      :with_html_string => true,
      :css => [Rails.root.join("app/assets/mail/basestyles.css"),Rails.root.join("app/assets/mail/" +         Site.current.name + ".css")],
      :preserve_styles => true
    ).to_inline_css
   } 
```

结尾

# knockout.js - 如何绑定到敲除Js中的鼠标右键单击？

> ID：11137408
> 
> 赞同：11
> 
> 时间：2012-06-21T11:43:46.930
> 
> 标签：knockout.js, knockout-2.0

我只是无法通过事件绑定来绑定到鼠标右键单击。鼠标悬停等工作正常。

有什么建议么？

谢谢安德烈亚斯

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-21T11:43:48.177

好的...

在写下我的问题后，我确实找到了解决方法。

但我想也许其他人会遇到同样的问题，所以我会同时发布问题和答案：

您可以通过绑定到 contextmenu 来绑定到鼠标右键：

```
<tr data-bind="event: { contextmenu: viewModel.ContextMenuClick }"> 
```

# jquery - 如何在jquery的自动完成中获取html

> ID：11137415
> 
> 赞同：0
> 
> 时间：2012-06-21T11:44:17.507
> 
> 标签：jquery, html

目前我正在使用 jquery 进行自动完成功能，如下所示

```
 $("#autoCompleteFieldId").autocomplete({minLength:0}, {delay:0}, {source: specValues}); 
```

这里 specValues 是一个数组，其中包含“<b>Html text</b>”、“普通文本”等值...现在我想在自动完成文本框中显示值，如
**Html 文本**
普通文本

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:21:50.530

那么你的目标`#autoCompleteFieldID`应该是应该显示值的地方......

我在下面包含了 jquery 官方示例：

你的问题不是很清楚，但如果你问如何获得新的价值......那么你应该使用`select`事件

> 当从菜单中选择一个项目时触发；ui.item 是指选中的项目。select 的默认操作是将文本字段的值替换为所选项目的值。取消此事件会阻止更新值，但不会阻止菜单关闭。

**重要提示**：如果我对您的问题的理解不正确，请让我知道并用更多信息更新您的问题。

**JS Fiddle**：适合您的选项 [http://jsfiddle.net/SRdFy/](http://jsfiddle.net/SRdFy/)

**例子**

```
<script>
    $(function() {
        var availableTags = [
            "ActionScript","AppleScript","Asp","BASIC", "C","C++","Clojure","COBOL","ColdFusion","Erlang","Fortran","Groovy","Haskell","Java","JavaScript","Lisp","Perl","PHP","Python","Ruby","Scala","Scheme"             
        ];
        $( "#tags" ).autocomplete({
            source: availableTags,                        
        });
    });
    </script>

<div class="demo">

<div class="ui-widget">
    <label for="tags">Tags: </label>
    <input id="tags">
</div>

</div><!-- End demo --> 
```

# jquery - 使用 Backbone.js 创建后的 HTML 元素动画

> ID：11137416
> 
> 赞同：4
> 
> 时间：2012-06-21T11:44:21.967
> 
> 标签：jquery, backbone.js

我的这段代码在下面给出。在这种情况下，如何使用类似 JQuery 的动画调整元素的大小？详细信息在代码中作为注释编写。

**模板：**

```
<script id="content_template" type="text/template">
        <div
                class="content"
                style="position: absolute;
                    top:<%= top %>px;
                    left:<%= left %>px;
                    width:<%= width %>px;
                    height:<%= height %>px; "
        ></div>
</script> 
```

**模型：**

```
var FrameObject = Backbone.Model.extend({
    defaults: {
        top: 0,
        left: 0,
        width: 1,
        height: 1
    }
}); 
```

**收藏：**

```
var FrameObjects = Backbone.Collection.extend({
    model: FrameObject
}); 
```

**对象视图：**

```
var Object_view = Backbone.View.extend({
    template: _.template($("#content_template").html()),
    render:function(){
        return this.template(this.model.toJSON());
    }
}); 
```

**对象容器视图：**

```
var App_view = Backbone.View.extend({
    el: $(".container"),
    events: {
        "click .container": "create_object"
    },
    create_object: function(event){
        var frame_object = new FrameObject({
            top: event.pageX,
            left: event.pageY,
            width: 100,
            height: 100
        });
        frame_objects.add(frame_object);

        var object_view = new Object_view({model: frame_object});
        this.$(".container").append(object_view.render());

        /* here I want to change the 'top' & 'left' attributes of the object model
           and want my object_view to animate to that position. Same as it would do for -

           someElement.animate({top: newTop, left: newLeft});
        */
    }
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T15:16:04.693

我写了一个简单的例子：

```
var FrameObject = Backbone.Model.extend({
    defaults: {
        top: 0,
        left: 0,
        width: 1,
        height: 1
    }
});

var FrameObjects = Backbone.Collection.extend({
    model: FrameObject
});

var ObjectView = Backbone.View.extend({
    className: 'frame',

    initialize: function() {
        this.model.on('change', this.animate, this);
    },

    render: function() {
        var params = _.extend(this.model.toJSON(),  { position: 'absolute' });
        this.$el.css(params);
        return this;
    },

    animate: function() {
        this.$el.animate(this.model.toJSON());
    }
});

var AppView = Backbone.View.extend({
    el: $("#container"),

    events: {
        "click": "createObject"
    },

    createObject: function(event) {
        var frameObject = new FrameObject({
            top: event.pageY,
            left: event.pageX,
            width: 100,
            height: 100
        });

        var frameObjects = new FrameObjects();

        frameObjects.add(frameObject);

        var objectView = new ObjectView({
            model: frameObject
        });
        this.$el.append(objectView.render().el);

        setTimeout(function() {
            frameObject.set({
                // 500 — width of #container
                top: Math.random() * 500,
                left: Math.random() * 500
            })
        }, 1000);
    }
});

var appView = new AppView(); 
```

[http://jsfiddle.net/theotheo/4Y8gy/](http://jsfiddle.net/theotheo/4Y8gy/)

请注意，我对您的代码进行了一些更改。首先，我更改`events`了 AppView 的哈希值，或者更准确地说，我省略了`selector`，[因为](http://backbonejs.org/#View-delegateEvents)

> 省略选择器会导致事件绑定到视图的根元素 ( `this.el`)。

看起来这正是你想要的。其次，我删除了`ObjectView`. 当然，您可以使用它，但在这种情况下，我认为没有必要。[第三，为了一致性](https://github.com/rwldrn/idiomatic.js/)，我重命名了变量。随意问。

# iphone - 遭受 UITabbbaritems 的折磨

> ID：11137422
> 
> 赞同：-3
> 
> 时间：2012-06-21T11:44:43.227
> 
> 标签：iphone, objective-c, ios, uitabbarcontroller, uitabbaritem

几天来，我一直在遭受`UITabBarItem`s 的折磨。

我以编程方式完成了我的应用程序，而不是使用 Interface Builder。我有一个`UINavigationBar`和一个`UITabbarController`。

从主页继续导航（我的意思是当我移动到下一页时），当我点击下一个标签项（联系人）时，当我再次点击主页按钮时，它没有移动到主页，它保留在我离开那个页面的上一页，它根本没有重定向到主页，

我已将`UITabbarController`-code 放在我的应用程序委托中：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
self.tabBarController = [[UITabBarController alloc] init];
viewController *vc = [[viewController alloc] init];
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:vc];
[navController.tabBarItem setTitle:@"Home"];
[navController.tabBarItem setImage:[UIImage imageNamed:@"home.png"]];

viewController1 *vc1 = [[viewController1 alloc] init];
UINavigationController *navController1 = [[UINavigationController alloc] initWithRootViewController:vc1];
[navController1.tabBarItem setTitle:@"Contact"];
[navController1.tabBarItem setImage:[UIImage imageNamed:@"contact.png"]];

viewController2 *vc2 = [[MapViewController alloc] init];
UINavigationController *navController2 = [[UINavigationController alloc] initWithRootViewController:vc2];
[navController2.tabBarItem setTitle:@"Info"];
[navController2.tabBarItem setImage:[UIImage imageNamed:@"info.png"]];

NSArray *viewControllers = [NSArray arrayWithObjects:navController, navController1,navController2,  nil];
 _tabBarController.delegate = self;
[_tabBarController setViewControllers:viewControllers];

[self.window setRootViewController:_tabBarController];
[self.window makeKeyAndVisible];
 return YES; 
```

我没有使用这些方法：

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item 
```

请给我一些建议，或者对我有用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:16:45.927

UITabbarController 的默认行为是，如果您点击一个选项卡并且此选项卡包含一个导航控制器，您将获得位于导航控制器视图控制器堆栈顶部的页面。

为避免这种情况，您必须在点击选项卡时弹出ToRootViewController。

如果你实施

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
 {
    [viewController.navigationController popToRootViewControllerAnimated:NO];
 } 
```

它应该可以解决问题。

# inno-setup - 如何仅在尚未安装的情况下重新安装 vcredist_x86？

> ID：11137424
> 
> 赞同：45
> 
> 时间：2012-06-21T11:44:45.583
> 
> 标签：inno-setup, msvcrt

在我的 inno setup RUN 选择中，我强制静默安装 MSVCRT。我想知道如何使它仅在尚未安装的情况下自行安装？

这就是我现在所说的：

```
Filename: {tmp}\vcredist_x86.exe; Parameters: "/passive /Q:a /c:""msiexec /qb /i vcredist.msi"" "; StatusMsg: Installing 2010 RunTime... 
```

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-06-23T20:59:00.307

由于您不想告诉您需要什么最小版本的 Visual C++ 可再发行包，因此这里有代码示例，您可以从中自己构建它。请注意，我不知道，哪些版本与哪些版本兼容，必须安装哪些较低版本，我会一直告诉你。

我唯一可以告诉您的是，您绝对应该使用[`Check`](http://www.jrsoftware.org/ishelp/topic_scriptcheck.htm)条件参数，在打开向导时尝试安装框架或运行时库的解决方案是错误的。此条件参数的工作方式与您返回 True 时一样，正在安装文件，如果为 False，则跳过它。`VCRedistNeedsInstall`因此，当您想要安装运行时库时，您需要返回 True 才能运行，否则返回 False。`VCVersionInstalled`使用以 here 开头的常量的辅助函数`VC_`在安装包时返回 True，否则返回 False。

作为这个来源，我使用了以下来源：

1.  [如何检测 VC 8.0 运行时可再发行包的存在](http://blogs.msdn.com/b/astebner/archive/2007/01/16/mailbag-how-to-detect-the-presence-of-the-vc-8-0-runtime-redistributable-package.aspx)
2.  [如何检测 VC 9.0 运行时可再发行包的存在](http://blogs.msdn.com/b/astebner/archive/2009/01/29/9384143.aspx)
3.  [如何检测 VC 2010 运行时可再发行包的存在](http://blogs.msdn.com/b/astebner/archive/2010/05/05/10008146.aspx)

[由于kobik 使用条件定义的想法，](https://stackoverflow.com/users/937125/kobik)以下代码应该与 Inno Setup 的 Unicode 和 ANSI 版本兼容。

这是代码：

```
[Files]
Source: "vcredist_x86.exe"; DestDir: {tmp}; Flags: deleteafterinstall

[Run]
; add the Parameters, WorkingDir and StatusMsg as you wish, just keep here
; the conditional installation Check
Filename: "{tmp}\vcredist_x86.exe"; Check: VCRedistNeedsInstall

[Code]
#IFDEF UNICODE
  #DEFINE AW "W"
#ELSE
  #DEFINE AW "A"
#ENDIF
type
  INSTALLSTATE = Longint;
const
  INSTALLSTATE_INVALIDARG = -2;  { An invalid parameter was passed to the function. }
  INSTALLSTATE_UNKNOWN = -1;     { The product is neither advertised or installed. }
  INSTALLSTATE_ADVERTISED = 1;   { The product is advertised but not installed. }
  INSTALLSTATE_ABSENT = 2;       { The product is installed for a different user. }
  INSTALLSTATE_DEFAULT = 5;      { The product is installed for the current user. }

  VC_2005_REDIST_X86 = '{A49F249F-0C91-497F-86DF-B2585E8E76B7}';
  VC_2005_REDIST_X64 = '{6E8E85E8-CE4B-4FF5-91F7-04999C9FAE6A}';
  VC_2005_REDIST_IA64 = '{03ED71EA-F531-4927-AABD-1C31BCE8E187}';
  VC_2005_SP1_REDIST_X86 = '{7299052B-02A4-4627-81F2-1818DA5D550D}';
  VC_2005_SP1_REDIST_X64 = '{071C9B48-7C32-4621-A0AC-3F809523288F}';
  VC_2005_SP1_REDIST_IA64 = '{0F8FB34E-675E-42ED-850B-29D98C2ECE08}';
  VC_2005_SP1_ATL_SEC_UPD_REDIST_X86 = '{837B34E3-7C30-493C-8F6A-2B0F04E2912C}';
  VC_2005_SP1_ATL_SEC_UPD_REDIST_X64 = '{6CE5BAE9-D3CA-4B99-891A-1DC6C118A5FC}';
  VC_2005_SP1_ATL_SEC_UPD_REDIST_IA64 = '{85025851-A784-46D8-950D-05CB3CA43A13}';

  VC_2008_REDIST_X86 = '{FF66E9F6-83E7-3A3E-AF14-8DE9A809A6A4}';
  VC_2008_REDIST_X64 = '{350AA351-21FA-3270-8B7A-835434E766AD}';
  VC_2008_REDIST_IA64 = '{2B547B43-DB50-3139-9EBE-37D419E0F5FA}';
  VC_2008_SP1_REDIST_X86 = '{9A25302D-30C0-39D9-BD6F-21E6EC160475}';
  VC_2008_SP1_REDIST_X64 = '{8220EEFE-38CD-377E-8595-13398D740ACE}';
  VC_2008_SP1_REDIST_IA64 = '{5827ECE1-AEB0-328E-B813-6FC68622C1F9}';
  VC_2008_SP1_ATL_SEC_UPD_REDIST_X86 = '{1F1C2DFC-2D24-3E06-BCB8-725134ADF989}';
  VC_2008_SP1_ATL_SEC_UPD_REDIST_X64 = '{4B6C7001-C7D6-3710-913E-5BC23FCE91E6}';
  VC_2008_SP1_ATL_SEC_UPD_REDIST_IA64 = '{977AD349-C2A8-39DD-9273-285C08987C7B}';
  VC_2008_SP1_MFC_SEC_UPD_REDIST_X86 = '{9BE518E6-ECC6-35A9-88E4-87755C07200F}';
  VC_2008_SP1_MFC_SEC_UPD_REDIST_X64 = '{5FCE6D76-F5DC-37AB-B2B8-22AB8CEDB1D4}';
  VC_2008_SP1_MFC_SEC_UPD_REDIST_IA64 = '{515643D1-4E9E-342F-A75A-D1F16448DC04}';

  VC_2010_REDIST_X86 = '{196BB40D-1578-3D01-B289-BEFC77A11A1E}';
  VC_2010_REDIST_X64 = '{DA5E371C-6333-3D8A-93A4-6FD5B20BCC6E}';
  VC_2010_REDIST_IA64 = '{C1A35166-4301-38E9-BA67-02823AD72A1B}';
  VC_2010_SP1_REDIST_X86 = '{F0C3E5D1-1ADE-321E-8167-68EF0DE699A5}';
  VC_2010_SP1_REDIST_X64 = '{1D8E6291-B0D5-35EC-8441-6616F567A0F7}';
  VC_2010_SP1_REDIST_IA64 = '{88C73C1C-2DE5-3B01-AFB8-B46EF4AB41CD}';

  { Microsoft Visual C++ 2012 x86 Minimum Runtime - 11.0.61030.0 (Update 4) }
  VC_2012_REDIST_MIN_UPD4_X86 = '{BD95A8CD-1D9F-35AD-981A-3E7925026EBB}';
  VC_2012_REDIST_MIN_UPD4_X64 = '{CF2BEA3C-26EA-32F8-AA9B-331F7E34BA97}';
  { Microsoft Visual C++ 2012 x86 Additional Runtime - 11.0.61030.0 (Update 4)  }
  VC_2012_REDIST_ADD_UPD4_X86 = '{B175520C-86A2-35A7-8619-86DC379688B9}';
  VC_2012_REDIST_ADD_UPD4_X64 = '{37B8F9C7-03FB-3253-8781-2517C99D7C00}';

  { Visual C++ 2013 Redistributable 12.0.21005 }
  VC_2013_REDIST_X86_MIN = '{13A4EE12-23EA-3371-91EE-EFB36DDFFF3E}';
  VC_2013_REDIST_X64_MIN = '{A749D8E6-B613-3BE3-8F5F-045C84EBA29B}';

  VC_2013_REDIST_X86_ADD = '{F8CFEB22-A2E7-3971-9EDA-4B11EDEFC185}';
  VC_2013_REDIST_X64_ADD = '{929FBD26-9020-399B-9A7A-751D61F0B942}';

  { Visual C++ 2015 Redistributable 14.0.23026 }
  VC_2015_REDIST_X86_MIN = '{A2563E55-3BEC-3828-8D67-E5E8B9E8B675}';
  VC_2015_REDIST_X64_MIN = '{0D3E9E15-DE7A-300B-96F1-B4AF12B96488}';

  VC_2015_REDIST_X86_ADD = '{BE960C1C-7BAD-3DE6-8B1A-2616FE532845}';
  VC_2015_REDIST_X64_ADD = '{BC958BD2-5DAC-3862-BB1A-C1BE0790438D}';

  { Visual C++ 2015 Redistributable 14.0.24210 }
  VC_2015_REDIST_X86 = '{8FD71E98-EE44-3844-9DAD-9CB0BBBC603C}';
  VC_2015_REDIST_X64 = '{C0B2C673-ECAA-372D-94E5-E89440D087AD}';

function MsiQueryProductState(szProduct: string): INSTALLSTATE; 
  external 'MsiQueryProductState{#AW}@msi.dll stdcall';

function VCVersionInstalled(const ProductID: string): Boolean;
begin
  Result := MsiQueryProductState(ProductID) = INSTALLSTATE_DEFAULT;
end;

function VCRedistNeedsInstall: Boolean;
begin
  { here the Result must be True when you need to install your VCRedist }
  { or False when you don't need to, so now it's upon you how you build }
  { this statement, the following won't install your VC redist only when }
  { the Visual C++ 2010 Redist (x86) and Visual C++ 2010 SP1 Redist(x86) }
  { are installed for the current user }
  Result := not (VCVersionInstalled(VC_2010_REDIST_X86) and 
    VCVersionInstalled(VC_2010_SP1_REDIST_X86));
end; 
```

* * *

**由[咯咯植物](https://stackoverflow.com/users/2628257/chuckleplant)更新：**

添加了 VC++ 2012 产品代码。请注意，可再发行包安装了两个东西，最小运行时和附加运行时。寻找最小运行时间应该就足够了。针对 Microsoft Visual C++ 2012 Redistributable 产品代码进行测试将给出`INSTALLSTATE_UNKNOWN`，改用最小运行时代码。VC++ 2013 和 2015 的情况相同。

`HKEY_CLASSES_ROOT\Installer\Dependencies\`例如，您可以在 中找到其他 Visual Studio 版本的产品代码`HKEY_CLASSES_ROOT\Installer\Dependencies\Microsoft.VS.VC_RuntimeAdditionalVSU_amd64,v14`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-08-31T10:40:28.240

这是一个使用 Microsoft 推荐的方法来确定是否安装了 VC Redistributable 的版本。我只需要 VC 2015，因此您需要为其他版本调整值和参数​​：

```
[Files]
Source: ".\vc-redist\vc-redist\win64\bin\vc_redist.x64.exe"; DestDir: "{tmp}"; Flags: deleteafterinstall; Check: Is64BitInstallMode

; FlexLM requires the VC 2015 redistributables so run the installer if this 
; or a later 2015 version is not already present
[Run]
Filename: "{tmp}\vc_redist.x64.exe"; Parameters: "/install /passive"; StatusMsg: "{#VCmsg}"; Check: IsWin64 and not VCinstalled

[Code]
function VCinstalled: Boolean;
 // Function for Inno Setup Compiler
 // Returns True if same or later Microsoft Visual C++ 2015 Redistributable is installed, otherwise False.
 var
  major: Cardinal;
  minor: Cardinal;
  bld: Cardinal;
  rbld: Cardinal;
  key: String;
 begin
  Result := False;
  key := 'SOFTWARE\Microsoft\VisualStudio\14.0\VC\Runtimes\x64';
  if RegQueryDWordValue(HKEY_LOCAL_MACHINE, key, 'Major', major) then begin
    if RegQueryDWordValue(HKEY_LOCAL_MACHINE, key, 'Minor', minor) then begin
      if RegQueryDWordValue(HKEY_LOCAL_MACHINE, key, 'Bld', bld) then begin
        if RegQueryDWordValue(HKEY_LOCAL_MACHINE, key, 'RBld', rbld) then begin
            Log('VC 2015 Redist Major is: ' + IntToStr(major) + ' Minor is: ' + IntToStr(minor) + ' Bld is: ' + IntToStr(bld) + ' Rbld is: ' + IntToStr(rbld));
            // Version info was found. Return true if later or equal to our 14.0.24212.00 redistributable
            // Note brackets required because of weird operator precendence
            Result := (major >= 14) and (minor >= 0) and (bld >= 24212) and (rbld >= 0)
        end;
      end;
    end;
  end;
 end; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-11-13T14:45:35.060

容易得多：

```
#define VCmsg "Installing Microsoft Visual C++ Redistributable...."

[Run]
Filename: "vc_redist.x86.exe"; StatusMsg: "{#VCmsg}"; Check: not IsWin64 and not VCinstalled
Filename: "vc_redist.x64.exe"; StatusMsg: "{#VCmsg}"; Check: IsWin64 and not VCinstalled

[Code]
function VCinstalled: Boolean;
 // By Michael Weiner <mailto:spam@cogit.net>
 // Function for Inno Setup Compiler
 // 13 November 2015
 // Returns True if Microsoft Visual C++ Redistributable is installed, otherwise False.
 // The programmer may set the year of redistributable to find; see below.
 var
  names: TArrayOfString;
  i: Integer;
  dName, key, year: String;
 begin
  // Year of redistributable to find; leave null to find installation for any year.
  year := '';
  Result := False;
  key := 'Software\Microsoft\Windows\CurrentVersion\Uninstall';
  // Get an array of all of the uninstall subkey names.
  if RegGetSubkeyNames(HKEY_LOCAL_MACHINE, key, names) then
   // Uninstall subkey names were found.
   begin
    i := 0
    while ((i < GetArrayLength(names)) and (Result = False)) do
     // The loop will end as soon as one instance of a Visual C++ redistributable is found.
     begin
      // For each uninstall subkey, look for a DisplayName value.
      // If not found, then the subkey name will be used instead.
      if not RegQueryStringValue(HKEY_LOCAL_MACHINE, key + '\' + names[i], 'DisplayName', dName) then
       dName := names[i];
      // See if the value contains both of the strings below.
      Result := (Pos(Trim('Visual C++ ' + year),dName) * Pos('Redistributable',dName) <> 0)
      i := i + 1;
     end;
   end;
 end; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-07-06T13:34:37.363

我知道这是一个非常古老的问题，但我遇到了这种情况，因为我无法进行 winregistry 检查，所以我采用了这种方法，

基于此文件列表：[https ://matthew-brett.github.io/pydagogue/_sources/python_msvc.rst.txt](https://matthew-brett.github.io/pydagogue/_sources/python_msvc.rst.txt)

我能够检查文件是否存在，例如 VCRedist 2015/2013 x86/x64：

2015

`C:/Windows/System32/msvcp140.dll`- x64

`C:/Windows/SysWOW64/msvcp140.dll"`- x86

2013

`C:/Windows/System32/msvcp120.dll`- x64

`C:/Windows/SysWOW64/msvcp120.dll"`- x86

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-13T09:45:37.403

我正在处理 Visual C++ 2015-2019 可再发行包和 64 位操作系统上可能的 32 位安装。

我修改[了user3433200解决方案](https://stackoverflow.com/a/45979466)如下：

```
function VCinstalled(const regKey: string): Boolean;
 { Function for Inno Setup Compiler }
 { Returns True if same or later Microsoft Visual C++ 2015 Redistributable is installed, otherwise False. }
 var
  major: Cardinal;
  minor: Cardinal;
  bld: Cardinal;
  rbld: Cardinal;
 begin
  Result := False;

  if RegQueryDWordValue(HKEY_LOCAL_MACHINE, regKey, 'Major', major) then begin
    if RegQueryDWordValue(HKEY_LOCAL_MACHINE, regKey, 'Minor', minor) then begin
      if RegQueryDWordValue(HKEY_LOCAL_MACHINE, regKey, 'Bld', bld) then begin
        if RegQueryDWordValue(HKEY_LOCAL_MACHINE, regKey, 'RBld', rbld) then begin
            Log('VC 2015-2019 Redist Major is: ' + IntToStr(major) + ' Minor is: ' + IntToStr(minor) + ' Bld is: ' + IntToStr(bld) + ' Rbld is: ' + IntToStr(rbld));
            { Version info was found. Return true if later or equal to our 14.23.27820.0 redistributable }
            { Note brackets required because of weird operator precendence }
            Result := (major >= 14) and (minor >= 23) and (bld >= 27820) and (rbld >= 0)
        end;
      end;
    end;
  end;
 end;

function VCRedistNeedsInstall: Boolean;
begin
 if NOT IsWin64 then 
  Result := not (VCinstalled('SOFTWARE\Microsoft\VisualStudio\14.0\VC\Runtimes\X86'))
 else if Is64BitInstallMode then
  Result := not (VCinstalled('SOFTWARE\WOW6432Node\Microsoft\VisualStudio\14.0\VC\Runtimes\x64'))
 else
  Result := not (VCinstalled('SOFTWARE\WOW6432Node\Microsoft\VisualStudio\14.0\VC\Runtimes\x86'));  
end; 
```

在 Win 7 32 位和 Win10 64 位上测试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-29T12:12:04.167

[Comsci 的答案](https://stackoverflow.com/a/45979466/125992)（[马丁的答案](https://stackoverflow.com/a/59319870/125992)改编）很接近，但没有正确执行版本检查。（例如，如果次要版本中有一个凸起并且内部版本号重置为零，它将失败。）这是该答案的更正版本，适用于 32 位和 64 位 Visual Studio 2015-2019 软件包。

我发现当前的 64 位软件包如果已经安装会破坏运行时，所以在安装之前检查是必要的（直到微软修复了这个问题）。编辑：这可能已在 Visual Studio 16.10（[发行说明](https://docs.microsoft.com/en-us/visualstudio/releases/2019/release-notes-v16.10)）中修复。

与原始答案一样，这是基于[Microsoft 推荐的确定是否已安装 VC Redistributable 的方法](https://docs.microsoft.com/en-us/cpp/windows/redistributing-visual-cpp-files?view=msvc-160)。

```
[Files]
Source: C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Redist\MSVC\v142\vcredist_x86.exe; DestDir: {tmp}; Flags: deleteafterinstall ignoreversion
Source: C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Redist\MSVC\v142\vcredist_x64.exe; DestDir: {tmp}; Flags: deleteafterinstall ignoreversion; Check: IsWin64

[Run]
Filename: {tmp}\vcredist_x86.exe; Parameters: /quiet /norestart; StatusMsg: "{#VCmsg32}"; Check: not VCRuntime32Installed
Filename: {tmp}\vcredist_x64.exe; Parameters: /quiet /norestart; StatusMsg: "{#VCmsg64}"; Check: IsWin64 and not VCRuntime64Installed

[Code]
function VCRuntime32Installed: Boolean;
 var
  required_major: Cardinal;
  required_minor: Cardinal;
  required_bld: Cardinal;
  required_rbld: Cardinal;
  major: Cardinal;
  minor: Cardinal;
  bld: Cardinal;
  rbld: Cardinal;
  key: String;
 begin
  required_major := 14;
  required_minor := 29;
  required_bld := 30037;
  required_rbld := 0;
  Result := False;
  key := 'SOFTWARE\Microsoft\VisualStudio\14.0\VC\Runtimes\X86';
  if RegQueryDWordValue(HKLM32, key, 'Major', major) then begin
    if RegQueryDWordValue(HKLM32, key, 'Minor', minor) then begin
      if RegQueryDWordValue(HKLM32, key, 'Bld', bld) then begin
        if RegQueryDWordValue(HKLM32, key, 'Rbld', rbld) then begin
            Log('vcruntime (x86) version: ' + IntToStr(major) + '.' + IntToStr(minor) + '.' + IntToStr(bld) + '.' + IntToStr(rbld));
            Result := (major > required_major) or ((major = required_major) and ((minor > required_minor) or ((minor = required_minor) and ((bld > required_bld) or ((bld = required_bld) and (rbld >= required_rbld))))))
        end;
      end;
    end;
  end;
 end;
function VCRuntime64Installed: Boolean;
 var
  required_major: Cardinal;
  required_minor: Cardinal;
  required_bld: Cardinal;
  required_rbld: Cardinal;
  major: Cardinal;
  minor: Cardinal;
  bld: Cardinal;
  rbld: Cardinal;
  key: String;
 begin
  required_major := 14;
  required_minor := 29;
  required_bld := 30037;
  required_rbld := 0;
  Result := False;
  key := 'SOFTWARE\Microsoft\VisualStudio\14.0\VC\Runtimes\X64';
  if RegQueryDWordValue(HKLM64, key, 'Major', major) then begin
    if RegQueryDWordValue(HKLM64, key, 'Minor', minor) then begin
      if RegQueryDWordValue(HKLM64, key, 'Bld', bld) then begin
        if RegQueryDWordValue(HKLM64, key, 'Rbld', rbld) then begin
            Log('vcruntime (x64) version: ' + IntToStr(major) + '.' + IntToStr(minor) + '.' + IntToStr(bld) + '.' + IntToStr(rbld));
            Result := (major > required_major) or ((major = required_major) and ((minor > required_minor) or ((minor = required_minor) and ((bld > required_bld) or ((bld = required_bld) and (rbld >= required_rbld))))))
        end;
      end;
    end;
  end;
 end; 
```

# php - DateTime::diff() 不受时区影响，但总是返回相同的值

> ID：11137425
> 
> 赞同：0
> 
> 时间：2012-06-21T11:44:46.970
> 
> 标签：php, datetime, timezone

我正在将基于拍卖的数据添加到我的系统中。例如：

```
user's timezone  is : `America/Denver`
auction start time is : Thu, 21 Jun 2012 03:46:22 AM
auction period : 1 day.
auction end time : Fri, 22 Jun 2012 03:46:22 AM 
```

我将所有这些信息按原样存储在我的数据库中（即*所有存储时间都基于用户的时区*）。

现在我想要结束时间和当前时间（美国/丹佛时区） 之间的实际**差异。**

我使用[`DateTime()`](http://www.php.net/manual/en/book.datetime.php)了函数

> 所以即使我不转换时区；它返回相同的差异（这也是错误的）。

我的PHP代码如下；您也可以在[CodePad上找到它](http://codepad.org/B5bDkRWO)

```
$end_time = 'Fri, 22 Jun 2012 03:46:22 AM';
$tz = 'America/Denver';
dateDifference($end_time,$tz);

function dateDifference($end, $tz = NULL)
    {
      $owner_tz = new DateTimeZone($tz);
      //var_dump($owner_tz->getName()); 

      $from  = new DateTime("now", new DateTimeZone('GMT'));     
      $from ->setTimeZone($owner_tz);

      $to = new DateTime($end,new DateTimeZone('GMT'));
      /* @Note:I have commented below setTimeZone() because I have already stored 
       * `end time` as per user's  timezone, So I dont need to convert it again 
       * into user's timezone.you can un-comment below line. 
       * it doesn't affect the results anyways.
       */
     //$to ->setTimeZone($owner_tz);        

    //procedural style using date_diff()
    $interval = date_diff($from, $to);        
    var_dump($interval); 

    // OO style using dateTime::diff()
    $interval = $from->diff($to);       
    var_dump($interval);     
} 
```

回报：

```
object(DateInterval)[4]
  public 'y' => int 0
  public 'm' => int 0
  public 'd' => int 0
  public 'h' => int 16
  public 'i' => int 40
  public 's' => int 24
  public 'invert' => int 0
  public 'days' => int 6015 
```

**参考：**

*   [`DateTime()`](http://www.php.net/manual/en/datetime.construct.php)
*   [`DateTime::diff`](http://www.php.net/manual/en/datetime.diff.php)
*   [`DateTime::setTimeZone`](http://www.php.net/manual/en/datetime.settimezone.php)
*   [使用 PHP DateTime 处理时区转换](http://blog.serverdensity.com/2009/03/21/handling-timezone-conversion-with-php-datetime/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:41:05.400

在以下几行中，您基本上是在说结束日期是格林威治标准时间，而它应该是美国/丹佛时间：

```
$to = new DateTime($end, new DateTimeZone('GMT')); 
```

然后您打算将其转换为美国/丹佛时间，但由于您使用 GMT 时区创建日期，所以无论如何这都是错误的。

```
// $to ->setTimeZone($owner_tz); 
```

这将使用用户时区创建结束日期，这可能是您正在寻找的：

```
$to = new DateTime($end, $owner_tz); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T04:35:16.653

我得到了解决方案，所以我想分享

实际上我已经在`config.inc.php`文件中设置了默认时区，如下所示

`date_default_timezone_set('America/Los_Angeles');`

然后我使用以下查询从 phpmyadmin检查**MySQL 服务器的当前时间和时区**

```
SELECT NOW(), SYSDATE(), @@global.time_zone , @@session.time_zone , 
      TIMEDIFF( NOW( ) , CONVERT_TZ( NOW( ) , @@session.time_zone ,  '+00:00' )) 
      AS OFFSET 
```

这将返回`OFFSET`值**+05:30**

### 解决步骤：

*   首先，我将 mySQL Server 的时区更改为**GMT/UTC +00:00**（我在 mySQL Server 上拥有**超级**特权）

    ```
    SET GLOBAL time_zone = '+00:00'; 
    ```

*   `start_date = NOW()`我们使用（列数据类型：）`DATETIME`保存日期和时间

现在有两种方法可以根据用户的时区 ( `America/Denver`)获取日期和时间

### 第一种方法（使用 PHP [DateTime](http://php.net/manual/en/book.datetime.php)）

```
 /*
   * first set timezone as GMT.
   * This is MUST because default timezone is differ from user timezone  
  */     
    $gmt = new DateTimeZone('GMT');
    $user_tz = 'America/Denver';
    $st = new DateTime($row[`start_date`], $gmt);
    // now set user timezone
    $st->setTimezone($user_tz );
    $stime = $qt->format('r');
    echo $stime; 
```

### 第二种方法（使用 MySQL [UNIX_TIMESTAMP](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_utc-timestamp)）

```
#$retrieve data from server in timestamp
$qry = "SELECT `start_date`,UNIX_TIMESTAMP(`start_date`) AS sTimestamp FROM..."  
$st = new DateTime('@'.$row['sTimestamp ']);                     
$stime = $st->format('r');
echo $stime; 
```

**注意：**不要更改`start_date` 为时间戳`strtotime()`。它将返回与`UNIX_TIMESTAMP()` ie不同的值

```
 strtotime($row['start_date']) !== $row['sTimestamp'] 
```

# excel - 使用 RODBC 将公式写入 Excel 文件

> ID：11137431
> 
> 赞同：0
> 
> 时间：2012-06-21T11:45:06.507
> 
> 标签：excel, r, rodbc

我可以使用包将数据框写入 excel 文件`RODBC`。

现在我想包括一些公式，例如`=A1`，在打开 excel 文件时被解释为这样；在数据框中包含“=A1”作为文本会在 Excel 文件中生成字符串条目“=A1”（公式栏中显示的值为`'=A1`），并且不会被解释为公式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:17:50.140

您最好使用与 xls 文件本地连接的 CRAN 包之一——我对[xlsx](http://cran.r-project.org/package=xlsx)很幸运；其他人报告了[xlsReadWrite的成功](http://cran.r-project.org/package=xlsReadWrite)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T14:51:58.163

您需要编写不带引号的文件。当我构建一个名为 testcsv.csv 的小文件时，它的内容如下：

=B2, 2

... 然后使用 File/Open ... 菜单并在选择 All Files 作为文件类型后使用对话框打开它，发生预期的计算：

![在此处输入图像描述](../Images/70e42f5af198874ec93efb9b4efeaaa0.png)

（这是在带有 Excel2011 的 Mac 上，<\strike> 所以 Windoze 可能会有所不同。<\strike>）在 WinXP 中运行的 Excel 2007 上的工作原理相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:56:40.583

Windows 中另一种可能的方法是使用`rcom`包[http://rcom.univie.ac.at/](http://rcom.univie.ac.at/)。

# bash - 如何在 Bash 循环中每秒切换一个界面？

> ID：11137433
> 
> 赞同：0
> 
> 时间：2012-06-21T11:45:09.373
> 
> 标签：bash, for-loop, ifconfig, network-interface

我想每 1 秒将一个接口上下移动 80 次，我该如何通过 bash 脚本来实现呢？

像这样的东西？

```
COUNT = 80
for n in $(seq -w 1 $COUNT); do
    case $n in   
    [1,3,5,7,9....79]*) # I don't know how to represent the odd value only
       ifconfig veth1 down
       sleep 1
       ;;
    [2,4,6,8,10....80]*)
       ifconfig veth1 up
       sleep 1
       ;;
   esac
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:53:18.823

```
COUNT=40
for n in $(seq -w 1 $COUNT); do
  ifconfig veth1 down
  sleep 1
  ifconfig veth1 up
  sleep 1
done 
```

或者如果你真的想数到 80：

```
COUNT=80
for n in $(seq -w 1 $COUNT); do
  case $n in
    *[13579])
     ifconfig veth1 down
     ;;
    *)
     ifconfig veth1 up
     ;;
  esac
  sleep 1
done 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T16:45:21.173

切换标志：

```
#!/bin/bash
for ((i = 1, flag = 0; i <= 80; i++))
do
    if ((flag ^= 1))
    then
        ifconfig veth1 down    # odd
    else
        ifconfig veth1 up
    fi
    sleep 1
done 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T11:55:19.447

使用 % 运算符。如下所示，将 echo 替换为您想要的命令

```
count=0
while [ $count -lt 80 ]
do
    if (( $count % 2 == 0 ))
    then
        echo 'aaa'
    else
        echo 'bbb'
    fi

    count=$(( $count + 1 ))
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T12:31:55.033

如果您不介意 bashism，您可以通过使用 Bash 中可用的各种扩展来使您的代码更加简洁。例如：

```
for i in {1..80}; do
    case $((i % 2)) in
        0) ifconfig veth1 down ;;
        1) ifconfig veth1 up   ;;
    esac
    sleep 1
done 
```

这里的神奇之处在于`{1..80}`序列表达式，再加上模运算符来确定数字是奇数还是偶数。如果您的 Bash 版本出于任何原因不支持序列表达式，请`$(seq 1 80)`改用。

# ruby - Ruby中的正则表达式：检查总位数

> ID：11137435
> 
> 赞同：0
> 
> 时间：2012-06-21T11:45:10.980
> 
> 标签：ruby, regex

我需要一行 gsub 来替换字符串中的所有非数字，但前提是非数字不超过三个并且数字的总长度为 10

我有这个符合第一个条件

```
p "0177/385490".gsub(/((\d+)\D?(\d+)\D?(\d+)\D?+(\d+))/,'\2\3\4\5') 
#=>"0177385490" 
```

但是当我尝试这个时，{10} 检查不起作用

```
p "0177/385490".gsub(/((\d+)\D?(\d+)\D?(\d+)\D?+(\d+)){10}/,'\2\3\4\5') 
#=>"0177/385490" 
```

请问该怎么做？

编辑

我设法做到了这样，但是如何在单行 gsub 中做到这一点？

```
strings = [
   "0473/385 490",
   "0473/385490",
   "0473 38 54 90",
   "0473/385 4901"    #this one is't captured
 ]

 strings.each do |s|
   if /((\d+)\D?(\d+)\D?(\d+)\D?+(\d+))/ =~ s
     if "#{$2}#{$3}#{$4}#{$5}".length == 10
       puts "#{$2}#{$3}#{$4}#{$5}"
     end
   end
 end 
```

编辑：为了说明为什么它真的需要在我的例程中成为在线 gsub，将会添加更多替换

```
def cleanup text
  replacements = [
     {:pattern => /(04\d{2}) (\d{2}) (\d{2}) (\d{2})/, :replace_with => '\1\2\3\4'},
     {:pattern => /(0\d)(\/| |-)(\d{3}) (\d{2}) (\d{2})/, :replace_with => '\1\3\4\5'},
     {:pattern => /(\d{6} )(\d{3})-(\d{2})/, :replace_with => '\1\2 \3'},
     {:pattern => /(\d{2,4})\D?(\d{2,3})\D?(\d{2,3})/, :replace_with => '\1\2\3'}
  ].each{|replacement|text.gsub!(replacement[:pattern], replacement[:replace_with])}
  text
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:08:15.353

我认为单行`gsub`不会过于可读。这是我的方法：

```
chars, non_chars = s.each_char.partition { |c| c =~ /\d/ }
puts chars.join if chars.size == 10 && non_chars.size <= 3 
```

干净易读，没有任何神奇的变量。另外，它清楚地显示了您对字符串施加的规则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T12:20:13.320

这是一个带有 gsub 的单行代码，主要是为了说明为什么 Michael Kohl 的方法更好：

```
(digits = s.gsub(/\D/, '')).length == 10 && s.length < 14 ? digits : s 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T12:24:44.987

你可以使用这样的东西：

```
puts s.gsub(/\D/, '') if (/\A(\d\D?){10}\z/ =~ s) && (/\A(\d+\D){0,3}\d*\z/ =~ s) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T12:32:49.023

您可能还想了解该`scan`方法。

```
strings.each do |s|
  numbers = s.scan(/\d/).join
  non_numbers = s.scan(/\D/)
  puts numbers if numbers.length == 10 && non_numbers.length < 4
end 
```

但我更喜欢@MichaelKohl 的解决方案。

然后是一个愚蠢的例子：

```
strings.select{|s| s.scan(/\D/).length < 4}.map{|s| s.scan(/\d/).join}.select{|s| s.length==10} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T12:42:08.700

谢谢大家，但我无法使用答案，因为我无法将它们插入我的日常工作（编辑我的答案以使其更清楚）。自己找到了解决方案。我按要求给每个有单行解决方案的人投票，现在我仍然需要找到一种方法将我的块作为替换模式插入到清理例程中

```
p "0177/3854901".gsub(/(\d+)\D?(\d+)\D?(\d+)\D?+(\d+)/){ |m| "#{$1}#{$2}#{$3}#{$4}".length==10 ? "#{$1}#{$2}#{$3}#{$4}":m} 
#=> "0177/3854901" isn't replaced because it has 11 digits
p "0177/385490".gsub(/(\d+)\D?(\d+)\D?(\d+)\D?+(\d+)/){ |m| "#{$1}#{$2}#{$3}#{$4}".length==10 ? "#{$1}#{$2}#{$3}#{$4}":m} 
#=> "0177385490" 
```

# c# - 当我尝试过滤（排序、分页等）我的网格时出现错误 500

> ID：11137436
> 
> 赞同：1
> 
> 时间：2012-06-21T11:45:13.957
> 
> 标签：c#, asp.net-mvc, telerik, telerik-grid

我无法让排序和分页功能与我的网格一起使用。我有一个使用 Ajax Databindning 填充数据的网格。但是，当我尝试刷新或更改过滤信息时收到错误 500。我有一个搜索功能，它将每个输入传递给控制器​​。

```
 public ActionResult Results(FormCollection form)
    {
        string foo= form["foo"];
        string bar= form["bar"];

        model.Result(foo, bar);
        var data = model.FilterResult().Select(o => new SearchViewModel
                        {
                            //Binding SearchViewModel propertys with the XML-elements found in model.FilterResults().
                            Foo= o.Element("Foo").Value,
                            Bar = o.Element("Bar").Value
                        });

        return View(data);
    } 
```

在控制器中，我调用了“Result()-Method”，它基本上将输入值设置为模型中的属性。“FilterResult()”方法使用用户输入（属性）来使用 LINQ 查询 XML 文件。该方法返回一个带有 XElements 的 IENumerable。

我的观点是这样的：

```
Html.Telerik().Grid(Model)
                .Name("Search")
                .PrefixUrlParameters(false)
                .DataKeys(keys => { keys.Add(m => m.Foo); })
                            .Columns(columns =>
                            {
                                columns.Bound(o => o.Foo);
                                columns.Bound(o => o.Bar);
                            })
                .DataBinding(dataBinding =>
                {
                    dataBinding.Ajax()       
                        .Select("Results", "Search").Enabled(true);   
                })
                .Pageable(pager => pager.Enabled(true).PageSize(20))
                .Sortable(sorting => sorting.Enabled(true).OrderBy(sortOrder => sortOrder.Add(o => o.TimeStamp).Ascending()))
                .Filterable(filterable => filterable.Enabled(true))
                .Render(); 
```

当我尝试更改任何过滤设置时，我收到输入值的错误 500 和 NullException（在我的控制器中）。我已经意识到它是空的，因为它在没有用户进行新搜索的情况下回调控制器，导致空值。所以我想知道如何做到这一点？我只想对网格中已经存在的数据进行过滤和排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:04:29.203

如果 foo 和 bar 是您页面上的表单元素，您可以使用 ajax 提交页面，这样当您进行数据绑定时，您会以相同的方式调用数据。然后在您的视图中，将 ClientEvents 添加到网格中。

```
.ClientEvents(events => events.OnDataBinding("onDataBinding")) 
```

onDataBinding 函数如下所示：

```
<script type="text/javascript">
  function onDataBinding(e) {
    var foo = document.getElementById('foo').value;
    var bar = document.getElementById('bar').value;
    var params = { pFoo: foo, pBar: bar };
    var paramsStr = $.param(params);
    var selectUrl = '@Url.Action("Results", "Search")'
      + "?" + paramsStr;
    var grid = $('#Grid').data('tGrid');
    grid.ajax.selectUrl = selectUrl;
  } 
</script> 
```

在您的控制器中，您传入的参数将是 foo 和 bar。

```
public ActionResult Results(string pFoo, string pBar) 
```

提交函数看起来像这样：

```
<script type="text/javascript">
  function displaySummary() {
    var grid = $('#Grid').data('tGrid');
    var foo = document.getElementById('foo').value;
    var bar = document.getElementById('bar').value;
    $.ajax(
    {
      type: 'POST',
      url: '@Url.Action("Results", "Search")',
      dataType: 'json',
      data: { pFoo: foo, pBar: bar },
      success: function (result) {
        grid.dataBind(result);
      },
      error: function (req, status, error) {
        alert("Sorry! Error. " + status + error);
      }
    });
  }
</script> 
```

# php - mysql查询顺序与多个LIKE子句完全匹配

> ID：11137437
> 
> 赞同：2
> 
> 时间：2012-06-21T11:45:14.377
> 
> 标签：php, mysql, sql-like

好的，我已经使用这个有一段时间了，我有点卡住了。

也许我做错了！

基本上我有一个搜索字段的查询。总体思路是根据 LIKE %% 选择结果，同时仍将完全匹配放在首位。

因此，例如，如果您搜索 47，我希望显示 id、surname 或 company_name 中带有 47 的所有内容，但是如果我输入姓氏，则 id 编号为 47 的结果应该在顶部并且相同。

请参阅下面的代码，它可能有助于澄清我的问题。

```
SELECT id, 
IF(company_name IS NOT NULL AND company_name <> '', company_name, surname) AS name, 
first_name, country, phone1, isowner, isholidayrenter, isproholidayrenter, 
islongtermrenter, isprolongtermrenter, isprobuyer, isbuyer 
FROM clients 
WHERE id LIKE '$search' OR surname LIKE '$search' OR company_name LIKE '$search'
union all
SELECT id, 
IF(company_name IS NOT NULL AND company_name <> '', company_name, surname) AS name,      
first_name, country, phone1, isowner, isholidayrenter, isproholidayrenter,     
islongtermrenter, isprolongtermrenter, isprobuyer, isbuyer 
FROM clients 
WHERE id LIKE '%$search%' AND id NOT LIKE '$search' OR surname LIKE '%$search%' 
and SURNAME NOT LIKE '$search' OR company_name LIKE '%$search%' 
and company_name NOT LIKE '$search' 
LIMIT $start, $limit"; 
```

`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T12:40:37.363

尝试这个：

> *（选择完全匹配）将所有与（选择部分匹配省略完全匹配）联合*

**示例**：

```
(
  SELECT
      id, 
      IF( company_name IS NOT NULL AND company_name <> '', company_name, surname ) AS name,
      first_name, country, phone1, isowner, isholidayrenter, isproholidayrenter, 
      islongtermrenter, isprolongtermrenter, isprobuyer, isbuyer 
  FROM
      clients 
  WHERE
      id LIKE '$search' OR 
      surname LIKE '$search' OR 
      company_name LIKE '$search'
)
union all
(
  SELECT 
      id,
      IF( company_name IS NOT NULL AND company_name <> '', company_name, surname ) AS name, 
      first_name, country, phone1, isowner, isholidayrenter, isproholidayrenter,
      islongtermrenter, isprolongtermrenter, isprobuyer, isbuyer 
  FROM
      clients 
  WHERE
      ( id LIKE '%$search%' AND id NOT LIKE '$search' ) OR 
      ( surname LIKE '%$search%' AND SURNAME NOT LIKE '$search' ) OR
      ( company_name LIKE '%$search%' AND company_name NOT LIKE '$search' )
)
LIMIT $start, $limit; 
```

# select - SQL 通过将值与聚合函数结果进行比较来选择行

> ID：11137438
> 
> 赞同：1
> 
> 时间：2012-06-21T11:45:17.420
> 
> 标签：select, sqlite, group-by

我有一个表格列表（gameid、playerid、team、max_minions），我想获得每个团队中 max_minions 最低的玩家（在每个团队中，在每个游戏中）。即我想要每个游戏/团队组合的列表（gameid、团队、playerid_with_lowest_minions）。

我试过这个：

```
SELECT * FROM MinionView GROUP BY gameid, team
HAVING MIN(max_minions) = max_minions; 
```

不幸的是，这似乎不起作用，因为它似乎从每个（gameid，团队）的可用行中选择一个随机行，然后进行 HAVING 比较。如果随机选择的行不匹配，则直接跳过。

使用 WHERE 也不起作用，因为您不能在 WHERE 子句中使用聚合函数。LIMIT 不起作用，因为我还有更多游戏，并且 LIMIT 限制了返回的总行数。

有没有办法在不添加另一个包含（gameid、teamid、MIN（max_minions））的表/视图的情况下做到这一点？

示例数据：

```
sqlite> SELECT * FROM MinionView;
gameid|playerid|team|champion|max_minions
21|49|100|Champ1|124
21|52|100|Champ2|18
21|53|100|Champ3|303
21|54|200|Champ4|356
21|57|200|Champ5|180
21|58|200|Champ6|21
64|49|100|Champ7|111
64|50|100|Champ8|208
64|53|100|Champ9|8
64|54|200|Champ0|226
64|55|200|ChampA|182
64|58|200|ChampB|15
... 
```

预期结果（我主要关心 playerid，但在这里包括冠军、max_minions 以获得更好的概述）：

```
21|52|100|Champ2|18
21|58|200|Champ6|21
64|53|100|Champ9|8
64|58|200|ChampB|15
... 
```

如果这很重要，我在 Python 3.1 下使用 Sqlite3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:07:56.893

这是在 SQL Server 中，希望语法也适合您：

```
SELECT
    MV.*
FROM
    (
        SELECT
            team, gameid, min(max_minions) as maxmin
        FROM
            MinionView
        GROUP BY
            team, gameid
    ) groups
    JOIN MinionView MV ON
        MV.team = groups.team
        AND MV.gameid = groups.gameid
        AND MV.max_minions = groups.maxmin 
```

换句话说，首先您进行通常的分组查询（嵌套查询）。此时，您拥有每个组的最小值，但您不知道它属于哪一行。为此，您加入原始表并匹配“键”（团队、游戏和分钟）以获取其他列。

请注意，如果一个团队将有多个成员具有相同的 max_minions 值，则将选择所有这些行。如果您只想要其中一个，那么这可能会更复杂一些。

# java - android：使用包安装程序以编程方式安装应用程序

> ID：11137439
> 
> 赞同：1
> 
> 时间：2012-06-21T11:45:22.993
> 
> 标签：java, android, installation, action, package-managers

我正在以编程方式安装一个 android 应用程序。将出现一个对话框“使用完成操作”。它们之间有许多选项“包安装程序”。如何在不要求用户选择的情况下隐式选择“包安装程序”？

**编辑** 我使用的代码是：

```
 Intent intent = new Intent();
intent .setDataAndType(Uri.fromFile(new File("/mnt/sdcard/download/App.apk")),"application/vnd.android.package-archive");
startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T11:47:52.807

我正在使用此代码执行该任务。我猜你错过了添加类型？

```
Uri fileUri = Uri.fromFile(myFile);
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(fileUri, "application/vnd.android.package-archive");
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-29T18:31:37.687

这目前不适用于 3rd 方应用程序。这对安卓来说将是一个安全风险。但是，第 3 方应用程序可以询问内置安装程序是否要安装软件包。以下是以编程方式安装 apk 的代码。

**来自 Google Play 的应用**

```
Intent installIntent = new Intent(Intent.ACTION_VIEW);
installintent.setData(Uri.parse("market://details?id=com.package.megaapp"));
startActivity(installIntent); 
```

**APK 文件（没有安装程序提示）**

```
Intent installIntent = new Intent(Intent.ACTION_INSTALL_PACKAGE);
installIntent.setData(Uri.fromFile(new File("/sdcard/yourapk.apk"));
startActivity(installIntent); 
```

但是你不能像 Google Play 那样安装 apk，除非你的应用是系统的并且你的设备是 root 的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-15T02:51:32.757

Android O 及更高版本支持以编程方式安装应用程序。为此，您需要声明并请求`REQUEST_INSTALL_PACKAGES`许可。

**在您的清单中**

```
<uses-permission android:name="android.permission.REQUEST_INSTALL_PACKAGES" /> 
```

在您的活动请求权限运行时 - 指示用户允许权限

```
startActivity(new Intent(android.provider.Settings.ACTION_MANAGE_UNKNOWN_APP_SOURCES, Uri.parse("package:".concat("your.package.name")))); 
```

在此之后，您需要实现下载管理器和文件提供程序并在下载后安装应用程序

关注[本文](https://androidwave.com/download-and-install-apk-programmatically/)了解更多详情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-08T13:08:00.757

如果您想在不选择安装程序对话框的情况下重定向到 Android 的包安装程序，请使用以下代码：

```
Intent intent = new Intent(Intent.ACTION_INSTALL_PACKAGE);
        intent.setDataAndType(Uri.fromFile(new File(path)), "application/vnd.android.package-archive");
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(intent); 
```

如果要打开“选择安装程序对话框（如果您的设备中存在任何其他软件包安装程序应用程序）”，请使用以下代码：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setDataAndType(Uri.fromFile(new File(path)), "application/vnd.android.package-archive");
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(intent); 
```

***注意 Intent 中的参数***

# xml - 如何使用 xslt2.0 在 xml 文件中以相同的顺序获取特定的 xml 元素值？

> ID：11137440
> 
> 赞同：1
> 
> 时间：2012-06-21T11:45:34.900
> 
> 标签：xml, xslt, xpath, xslt-2.0

这是我的 Xml 文件。我想使用 xslt 将此 xml 文件转换为另一个自定义的 xml 文件。

**XML 文件：**

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
    <w:document xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main">
    <w:body>
    <w:p>
        <w:r>
            <w:t>Text1-</w:t>
        </w:r>
        <w:smartTag>
            <w:smartTag>
                <w:smartTag>
                    <w:smartTag>
                        <w:r>
                            <w:t>Text2-</w:t>
                        </w:r>
                    </w:smartTag>
                </w:smartTag>
                <w:r>
                    <w:t>Text3-</w:t>
                </w:r>
                <w:smartTag>
                        <w:r>
                            <w:t>Text4-</w:t>
                        </w:r>
                </w:smartTag>
                <w:r>
                    <w:t>Text5-</w:t>
                </w:r>
            </w:smartTag>
        </w:smartTag>
        <w:r>
            <w:t>Text6-</w:t>
        </w:r>
    </w:p>
    </w:body>
    </w:document> 
```

**而我的 XSLT 片段是：**

```
<?xml version="1.0" encoding="iso-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                              xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main">                              
  <xsl:output method="html" indent="yes"/>

  <xsl:template match="*">

    <Document>
        <xsl:choose>
            <xsl:apply-templates select="//w:p[w:r[w:t]]">
            </xsl:apply-templates>      
      </xsl:choose>
    </Document>
  </xsl:template>

  <xsl:template match="w:p">
    <Paragraph>

     <xsl:if test="(.//w:smartTag/w:r/w:t)">
            <xsl:apply-templates select="//w:smartTag//w:r//w:t"/>
     </xsl:if>
    <xsl:apply-templates select="./w:r/w:t"/>
    </Paragraph>    
  </xsl:template>

  <xsl:template match="w:t">
    <xsl:value-of select="."/>
  </xsl:template>
  </xsl:stylesheet> 
```

**我当前的输出是：**

```
<Document>
<Paragraph>
       Text2-Text3-Text4-Text5-Text1-Text6-
</Paragraph>
</Document> 
```

**我需要的输出是：**

```
<Document>
    <Paragraph>
           Text1-Text2-Text3-Text4-Text5-Text6-
    </Paragraph>
</Document> 
```

请指导我在不丢失其保留顺序的情况下获取元素...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:58:46.580

除非您对应该处理的内容有一些额外的规则，否则这可以非常简单地通过使用模板来匹配**w:t**元素

```
<xsl:template match="w:r/w:t">
   <xsl:value-of select="." />
</xsl:template> 
```

您还需要匹配来处理文档和段落。尝试以下 XML

```
<xsl:stylesheet version="1.0" 
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"    
 xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main" 
 exclude-result-prefixes="w">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="/">
      <Document>
         <xsl:apply-templates />
      </Document>
   </xsl:template>

   <xsl:template match="w:p">
      <Paragraph>
         <xsl:apply-templates />
      </Paragraph>
   </xsl:template>

   <xsl:template match="w:r/w:t">
      <xsl:value-of select="." />
   </xsl:template>

   <!-- Ignore text for all other elements -->
   <xsl:template match="text()"/>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<Document>
   <Paragraph>Text1-Text2-Text3-Text4-Text5-Text6-</Paragraph>
</Document> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:41:52.983

简短而简单：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main"
 exclude-result-prefixes="w">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*/*/w:p">
     <Document>
      <Paragraph>
        <xsl:value-of select="string()"/>
      </Paragraph>
     </Document>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<w:document xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main">
    <w:body>
        <w:p>
            <w:r>
                <w:t>Text1-</w:t>
            </w:r>
            <w:smartTag>
                <w:smartTag>
                    <w:smartTag>
                        <w:smartTag>
                            <w:r>
                                <w:t>Text2-</w:t>
                            </w:r>
                        </w:smartTag>
                    </w:smartTag>
                    <w:r>
                        <w:t>Text3-</w:t>
                    </w:r>
                    <w:smartTag>
                        <w:r>
                            <w:t>Text4-</w:t>
                        </w:r>
                    </w:smartTag>
                    <w:r>
                        <w:t>Text5-</w:t>
                    </w:r>
                </w:smartTag>
            </w:smartTag>
            <w:r>
                <w:t>Text6-</w:t>
            </w:r>
        </w:p>
    </w:body>
</w:document> 
```

**产生了想要的正确结果：**

```
<Document>
   <Paragraph>Text1-Text2-Text3-Text4-Text5-Text6-</Paragraph>
</Document> 
```

# haskell - 是否可以不透明地将 Haskell 嵌入到 C 库中？

> ID：11137443
> 
> 赞同：18
> 
> 时间：2012-06-21T11:45:41.587
> 
> 标签：haskell

*即*是否可以将Haskell 代码嵌入C 库中，这样库的用户就不必知道正在使用Haskell？特别是，这样用户可以使用多个嵌入 Haskell 的库，而不会发生任何冲突？

据我了解，您嵌入了对 hs_init 和 hs_exit 的调用之间，但这些涉及全局状态恶作剧，应该与其他调用冲突，不是吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-21T11:49:33.410

是的，[可以通过 FFI（](http://en.wikibooks.org/wiki/Haskell/FFI#Calling_Haskell_from_C)[外部函数接口](http://www.haskell.org/haskellwiki/GHC/Using_the_FFI)）从 C 调用 Haskell 代码（反之亦然）。不幸的是，正如[haskell.org 文档](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/ffi-ghc.html)所说，您无法避免初始化和完成 haskell 环境的调用：

> 对 hs_init() 的调用初始化 GHC 的运行时系统。在调用 hs_init() 之前不要尝试调用任何 Haskell 函数：坏事无疑会发生。

但是，[这](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/ffi-ghc.html#using-own-main)也很有趣：

> 可以对 hs_init() 进行多次调用，但每次调用都应与一次（并且只有一次）对 hs_exit() 的调用匹配

[此外](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/bugs-and-infelicities.html#infelicities-ffi)：_

> FFI 规范要求实现支持在使用 hs_exit() 关闭后重新初始化自身，但 GHC 目前不支持。

基本上我的想法是，您可以利用此规范为自己编写一个包装 C++ 类来管理对您的调用`hs_init`和`hs_exit`为您管理调用，例如通过使用包围的模板方法，`hs_init`并且`hs_exit`您可以使用您想要的任何 haskell 调用覆盖。但是，请注意与调用 haskell 代码的其他库的交互：对`hs_init`和的嵌套调用层`hs_exit`应该没问题（因此使用在包装器之间调用它们的库是安全的），但调用的总数应该始终匹配，这意味着如果这些库只初始化环境而不试图关闭它，然后由你来完成这项工作。

**在不利用继承和覆盖的情况下，**另一个（可能更好）的想法**可能是拥有一个在构造函数和析构函数`HaskellEnv`中调用的简单类。如果您将它们声明为自动变量，您将获得对和的调用将始终匹配，并且当您离开其范围时，一旦最新对象被破坏，将立即进行最新调用。看看[这个问题](https://stackoverflow.com/questions/10985/how-to-prevent-an-object-being-created-on-the-heap)，以防止在堆上创建对象（在这种情况下它们可能很危险）。`hs_init``hs_exit``hs_init``hs_exit``hs_exit``HaskellEnv`**

# objective-c - 无法将一个可变数组“复制”到另一个

> ID：11137444
> 
> 赞同：0
> 
> 时间：2012-06-21T11:45:42.760
> 
> 标签：objective-c, ios, xcode, cocoa-touch, nsmutablearray

在我的 iPhone 应用程序中。

我正在将一个可变数组（带字典）复制到另一个。

它像是

```
resultsToDisplay = [[[NSMutableArray alloc]initWithArray:resultsPassed]mutableCopy];

  2012-06-21 17:07:07.441 AllinoneCalc[3344:f803] Results  To Display (
        {
        lbl = "Monthly EMI";
        result = "75.51";
    }
)
2012-06-21 17:07:08.224 AllinoneCalc[3344:f803] Results Passed (
        {
        lbl = "Monthly EMI";
        result = "75.51";
    }
) 
```

然后我正在修改其中之一。

```
[[resultsToDisplay objectAtIndex:i] setValue:[NSString stringWithFormat:@"%.2f",[[[resultsPassed objectAtIndex:i] valueForKey:@"result"] floatValue]] forKey:@"result"]; 
```

但是发生了什么，两者都被编辑了。

```
2012-06-21 17:07:08.703 AllinoneCalc[3344:f803] Results Passed (
        {
        lbl = "Monthly EMI";
        result = "75.00";
    }
)
2012-06-21 17:07:08.705 AllinoneCalc[3344:f803] Results  To Display (
        {
        lbl = "Monthly EMI";
        result = "75.00";
    }
) 
```

他们都指的是同一个副本。

如何解决这个问题。我只想修改一个数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:53:38.810

数组（或可变数组）只是一个对象列表，您正在修改其中一个数组中引用的对象之一。第二个数组仍然指向同一个对象，所以它也发生变化是正常的......

您正在复制数组：意味着您正在复制对象列表，而不是复制列表中的所有对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:55:00.490

您只是在复制对象指针数组，而不是对象本身。请参阅[这篇](http://www.cocoanetics.com/2009/09/deep-copying-dictionaries/)关于深度复制的文章。

# internet-explorer - IE9中jqGrid中的虚拟页面滚动

> ID：11137449
> 
> 赞同：0
> 
> 时间：2012-06-21T11:45:55.900
> 
> 标签：internet-explorer, jqgrid

谁能指出我的修复或告诉我如何在 jqGrid 中以 IE 9 作为浏览器的大型数据集实现虚拟滚动。它适用于 Chrome、Firefox 但 IE 9，该功能不起作用。

# algorithm - 为什么 Dijkstra 的算法需要用到 deleteMin() 和 reductionKey()？

> ID：11137454
> 
> 赞同：2
> 
> 时间：2012-06-21T11:46:18.573
> 
> 标签：algorithm, language-agnostic, computer-science, dijkstra

在大多数伪代码中，我通常会发现以下内容：

> *   DeleteMin（返回具有最小键的元素并将其从集合中删除。）
>     
>     
> *   DecreaseKey（适应特定元素键值的减少）

*   为什么使用 DeleteMin 来检索最小元素 - 为什么不是随机元素？
*   DecreaseKey 的目的是什么？在伪代码中，它总是在元素的值更改后调用。它在做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T11:52:37.500

> 为什么使用 DeleteMin 来检索最小元素 - 为什么不是随机元素？

我们从开放顶点集中检索并删除最小元素，`Q`因为它确保了最小性（稍后在证明中使用）。没有它 - 无法保证最小化功能，并且解决方案不会是最佳的（不会是最短路径）。请记住，一旦我们找到通往 的路径`v`，我们会将其从 中删除`Q`，并且永远不会重新打开它，因此我们取出的边必须具有可用路径最小的边。

请注意，对于这个（最小）顶点，让它成为`v`：对于每个`u`in `Q` `d(u) + x <= d(v)`- 因为当没有负边时使用 dijkstra 算法，x >=0。
**对于任何其他顶点 - 这不是最小的 - 我们不能保证没有更短的路径尚未被发现。**

> DecreaseKey 的目的是什么？在伪代码中，它总是在元素的值更改后调用。它在做什么？

使用减少是因为我们可能已经找到了一条新的、更好的通往连接到我们找到的最后一个顶点的顶点的路径。**这一步是 dijkstra 算法正在做的松弛步骤。**请记住，dijkstra 的算法始终保持到目前为止找到的到每个顶点的最短路径，因为最后一步可能已经找到了到某个顶点的新最短路径——这一步正在更新迄今为止找到的最短路径。

# encoding - 高效的编码方案

> ID：11137459
> 
> 赞同：0
> 
> 时间：2012-06-21T11:46:58.690
> 
> 标签：encoding, hardware

我想为数据存储选择一种编码方案。我的可用内存非常低。哪种编码应该最能最佳地利用可用空间。ANSI、UTF 或任何其他..

数据是大写字母

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:51:26.097

如果你知道字母的频率分布，[Huffman Coding](http://en.wikipedia.org/wiki/Huffman_coding)在复杂性、速度和效率之间取得了很好的平衡。

如果您不知道字母的分布或者它们是随机的，则一次存储 5 位。例如，考虑字符串“ABCDE”。字母数字是 0, 1, 2, 3, 4。转换为二进制，这是：

```
00000 00001 00010 00011 00100 
```

现在您只需将每 8 位分组为字节：

```
00000000 01000100 00110010 0xxxxxxx 
```

您还需要存储长度，以便您知道最后一个字节的 7 位中没有有用的数据。

如果不关心代码空间并且您只想尽可能地打包字符串，您可以使用 Huffman 编码或算术编码，即使频率分布均匀，也可以将每个字符平均打包为 log2(26) 位，即略小于 5（即 4.7 位）。

# sencha-touch - Sencha touch 2：学习第2版需要第1版的知识吗？

> ID：11137460
> 
> 赞同：0
> 
> 时间：2012-06-21T11:47:00.497
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我打算学习煎茶触摸。我听说 Sencha touch-2 是最新版本。所以我开始看版本2。我仍然有一个困惑，我是否也应该学习煎茶触摸1？有朋友说，版本一的知识对学习版本二的帮助不大，因为两者的架构不同。你能澄清我的疑问吗？而作为一个初学者，我发现按照官方文档很难？有没有什么简单的文件可以启动 Sencha 2..??

任何单一的帮助将不胜感激......

谢谢....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:46:08.080

我在没有使用过 ST1 的情况下开始学习 Sencha Touch 2。我建议您开始阅读[本指南](http://docs.sencha.com/touch/2-0/#!/guide/getting_started)并可能还观看[这些视频](http://docs.sencha.com/touch/2-0/#!/video)。

通过观看他们的示例代码，我学到了很多东西，你可以在[这里](http://docs.sencha.com/touch/2-0/#!/example)找到。

您可以编辑指南中包含的示例（例如，转到[http://docs.sencha.com/touch/2-0/#!/guide/first_app](http://docs.sencha.com/touch/2-0/#!/guide/first_app)并单击代码编辑器）。尝试一些东西，你会很快学会 ST2 ;)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T14:16:27.550

使用 Sencha Touch 已经一年多了，从 Sencha Touch 1 到 Sencha Touch 2 的 beta 版本，我可以确保你在学习 2.x 之前**不需要了解任何**关于 1.x的知识

为什么？

1.  Sencha Touch 1 有一个**糟糕**的MVC 设计。如果你试图理解它们，就像你要花一年时间来掌握 Windows 98。
2.  Sencha Touch 1 没有友好的 API。会有很多事情你不知道为什么它们必须存在，为什么不存在。
3.  Sencha Touch 1 的文档很差，只有一些示例集，而 Sencha Touch 2 的文档几乎可以教您入门的所有内容。
4.  这两个版本之间的优化差异很大，其中（当然）Sencha Touch 2 更好。

# php - yii 从数据库管理配置

> ID：11137462
> 
> 赞同：4
> 
> 时间：2012-06-21T11:47:06.373
> 
> 标签：php, yii

我正在研究 yii 框架。我有**tbl_setting**表和**设置**模型。其中有许多键和值。管理员可以从管理面板更改所有值。表结构如下图所示：

```
 define           Value     
 COMPANY_NAME     Google    
 META_TITLE       .::My Site::.
 ........  
 ........ 
```

在核心 php 中，我使用 define() 定义所有键值，在 yii 中我如何在全局范围内使用它？

我试图在 main.php 文件中设置参数，但我不能在那里使用设置模型。

* * *

我找到了答案。我已经使用以下方法完成了。我不确定这是否是好的做法，如果有人知道其他好的方法，请发布。

创建新组件：WebSetting.php

```
class WebSetting extends CApplicationComponent
{
    function getValue($key)
    {
        $model = Setting::model()->findByAttributes(array('define'=>$key));
        return $model->value;
    }
} 
```

主文件

```
'setting'=>array('class'=>'WebSetting'), 
```

现在我可以使用以下方式访问任何地方的所有值：

```
 echo Yii::app()->setting->getValue('META_TITLE'); 
 echo Yii::app()->setting->getValue('COMPANY_ADDRESS'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-22T07:08:32.387

您可以添加新的应用程序组件

```
 class EConfig extends CApplicationComponent
{
    public $cache = 0;
    public $dependency = null;

    protected $data = array();

    public function init()
    {

        $items=Config::model()->findAll();

        foreach ($items as $item)
        {
            if ($item['param'])
                $this->data[$item['param']] = $item['value'] === '' ?  $item['default'] : $item['value'];
        }
        parent::init();
    }

    public function get($key)
    {
        if (array_key_exists($key, $this->data))
            return $this->data[$key];
        else
            //throw new CException('Undefined parameter ' . $key);
            return '';
    }

    public function set($key, $value)
    {
        $model = Config::model()->findByAttributes(array('param'=>$key));
        if (!$model)
            throw new CException('Undefined parameter ' . $key);

        $model->value = $value;

        if ($model->save())
            $this->data[$key] = $value;

    }

    public function add($params)
    {
        if (isset($params[0]) && is_array($params[0]))
        {
            foreach ($params as $item)
                $this->createParameter($item);
        }
        elseif ($params)
            $this->createParameter($params);
    }

    public function delete($key)
    {
        if (is_array($key))
        {
            foreach ($key as $item)
                $this->removeParameter($item);
        }
        elseif ($key)
            $this->removeParameter($key);
    }

    protected function getDbConnection()
    {
        if ($this->cache)
            $db = Yii::app()->db->cache($this->cache, $this->dependency);
        else
            $db = Yii::app()->db;

        return $db;
    }

    protected function createParameter($param)
    {
        if (!empty($param['param']))
        {
            $model = Config::model()->findByAttributes(array('param' => $param['param']));
            if ($model === null)
                $model = new Config();

            $model->param = $param['param'];
            $model->label = isset($param['label']) ? $param['label'] : $param['param'];
            $model->value = isset($param['value']) ? $param['value'] : '';
            $model->default = isset($param['default']) ? $param['default'] : '';
            $model->type = isset($param['type']) ? $param['type'] : 'string';

            $model->save();
        }
    }

    protected function removeParameter($key)
    {
        if (!empty($key))
        {
            $model = Config::model()->findByAttributes(array('param'=>$key));
            if ($model)
                $model->delete();
        }
    }
} 
```

之后，您可以使用它来将参数添加到数据库（如果还没有这样的参数）

```
 Yii::app()->config->add(array(
                'param'   => 'PARAMNAME',
                'label'   => 'yourlabel',
                'value'   => 4534,
                'type'    => 'integer',
                'default' => 4534,
            )); 
```

获取参数值 -

```
Yii::app()->config->get('PARAMNAME'); 
```

设置参数值（如果参数存在）

```
Yii::app()->config->set('PARAMNAME',100500); 
```

当然你需要为它创建表和类和控制器

```
 CREATE TABLE `Config` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `param` varchar(128) NOT NULL,
  `value` text NOT NULL,
  `default` text NOT NULL,
  `label` varchar(255) NOT NULL,
  `type` varchar(128) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `param` (`param`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=290 ; 
```

并对配置添加一些更改

```
 components=>array(
 ...
  'config' => array(
          'class' => 'application.extensions.components.EConfig',
         //   'cache'=>3600,
       ), 
```

并将配置添加到配置中的预加载部分

```
 'preload' => array(..,'config'), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:28:02.627

我正在使用，

```
<?php
class SitesettingWidget extends CWidget {

    public function run() {
        $siteData = SiteSetting::model()->findAll(); 

        $this->render('setting', array(
            'siteData'=>$siteData,   
        ));
    }
} 
```

但认为 CApplicationComponent 是更好的方法......

# c# - 如何以与 MouseWheelEvent 相同的方式以编程方式滚动 ListBox？

> ID：11137464
> 
> 赞同：3
> 
> 时间：2012-06-21T11:47:08.953
> 
> 标签：c#, wpf

好的，我有以下问题：

我想上下滚动一个溢出的 ListBox。

我想在从 ListBox 继承的自定义控件中以编程方式进行。我已经看到并测试了诸如`scrollIntoView`. 但是，我希望滚动类似于使用鼠标滚轮时的滚动。

我根本不想让鼠标参与（我正在为 Kinect 开发，因为有 2 个光标，我不想使用鼠标事件参数）

谷歌搜索并没有出现太多：我已经阅读了大量关于如何使用 scrollIntoView 滚动代码或放置滚动条等的线程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:00:21.993

我认为这将涉及两个步骤：

1.  在 listBox 模板中找到 scrollViewer 控件
2.  在该 scrollViewer 中执行实际滚动

对于第一步实施，请看[这里](https://stackoverflow.com/questions/3963341/get-reference-to-my-wpf-listboxs-scrollviewer-in-c)。这是从那里提取的代码片段：

```
this.Loaded += MainWindow_Loaded;

void MainWindow_Loaded(object sender, RoutedEventArgs e)
{
    var scrollViewer = listbox.Template.FindName("Scroller", listbox);
} 
```

对于第二步，您应该使用[此处](http://msdn.microsoft.com/en-us/library/system.windows.controls.scrollviewer_methods)的方法之一，`LineDown`或者`PageDown`可能。

PS：我根本没有测试过这种方法，因为我没有安装 VS，所以请随时在此处添加所需的代码。

# jquery - 如何确定 dom 元素的“数据角色”

> ID：11137466
> 
> 赞同：1
> 
> 时间：2012-06-21T11:47:20.060
> 
> 标签：jquery, jquery-mobile

我有一个函数可以将 dom 元素的文本更改为给定值，例如，更改以下文本：

```
<a id="btnAdd" href="#" onclick='Persist()' data-role="button" data-icon="plus">Persist</a> 
```

我需要使用这段代码：

```
domElement.find('.ui-btn-text').text('testing'); 
```

如您所见，我需要调用`.find('.ui-btn-text')`. 有没有办法确定“数据角色”（在这种情况下是“按钮”），所以我可以使用正确的“东西”（例如“.ui-btn-text”）来使用 - 我认为这被称为一个 CSS 类？，不确定。

未完成的功能：

```
 function SetDomElementText(elementId, value) {
            //get the domElement
            var domElement = $('#' + elementId);

            //check if it exists
            if (domElement.length === 1) {

                switch(domElement.get(0).tagName.toLowerCase()) {
                    case 'label':
                        domElement.text('testing');
                        break;
                    case 'a': //link
                        //I need to determine what the data-role is here.
                        domElement.find('.ui-btn-text').text('testing');
                        break;
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T11:49:18.557

您可以像获取任何其他 HTML 属性一样获取它。

```
var datarole = $(selector).attr('data-role'); 
```

或者，jQuery 也`data-*`自动获取属性值，因此您可以通过以下方式访问它`.data()`：

```
var datarole = $(selector).data('role');  // data-role 
```

# android - Bing Maps Android SDK 中多边形的信息框

> ID：11137471
> 
> 赞同：5
> 
> 时间：2012-06-21T11:47:23.023
> 
> 标签：android, gis, bing-maps

我正在使用[Bing Maps Android SDK](http://bingmapsandroidsdk.codeplex.com/)，我正在寻找一种方法来单击我创建的多边形并显示一个信息框。我已经能够为图钉完成此操作，但不能为多边形完成。我已经看到[了这个答案](https://stackoverflow.com/questions/2375697/is-it-possible-to-make-a-polygon-clickable-using-the-bing-maps-api)，但是我的应用程序需要制作数百个这样的多边形，我正在寻找一种更快的解决方案，在多边形上使用 addHandler 方法。我知道这对于 SDK 的 AJAX v7 风格是可能的，它是 Android SDK 的底层基础。

我为 AJAX 版本尝试的代码（使用[此](http://www.bingmapsportal.com/ISDK/AjaxV7#Shapes7)模拟器测试。）

```
map.entities.clear(); 
latlon = map.getCenter(); 

var polygon = new Microsoft.Maps.Polygon([new Microsoft.Maps.Location(latlon.latitude, latlon.longitude-0.15), new Microsoft.Maps.Location(latlon.latitude+0.1, latlon.longitude-0.05), new Microsoft.Maps.Location(latlon.latitude+0.1, latlon.longitude+0.05), new Microsoft.Maps.Location(latlon.latitude, latlon.longitude+0.15), new Microsoft.Maps.Location(latlon.latitude-0.1, latlon.longitude+0.05), new Microsoft.Maps.Location(latlon.latitude-0.1, latlon.longitude-0.05), new Microsoft.Maps.Location(latlon.latitude, latlon.longitude-0.15)], null);  
Microsoft.Maps.Events.addHandler(polygon, 'click', DisplayInfo);

map.setView( {zoom:10}); 
map.entities.push(polygon);

function DisplayInfo (e) {
    var vertices = e.target.getLocations();
    var verticeCenter = new Microsoft.Maps.Location(0,0);

    //Calculating location of center
    for (i=0; i<vertices.length-1; i++) {
        verticeCenter.latitude = verticeCenter.latitude + vertices[i].latitude;
        verticeCenter.longitude = verticeCenter.longitude + vertices[i].longitude;
    }
    verticeCenter.latitude = verticeCenter.latitude / (vertices.length - 1);
    verticeCenter.longitude = verticeCenter.longitude / (vertices.length - 1);
    defaultInfobox = new Microsoft.Maps.Infobox(verticeCenter, {width: 200, height: 50} );    
    map.entities.push(defaultInfobox);
} 
```

但是，我从 SDK 的资产文件夹中将类似的代码推送到了 BingMapsAndroid.js，但这不起作用。处理程序已附加，正如我使用 hasHandler 方法检查的那样。记录触摸并将它们的 lat 和 long 值发送到日志，但即使触摸位于多边形内，也不会触发多边形事件。

BingMapsAndroid.js 中的多边形测试函数：

```
this.PolygonTest = function() {
    _map.entities.clear(); 
    latlon = new Microsoft.Maps.Location(1,1); 
    console.log("Polygon test function");
    var polygon = new Microsoft.Maps.Polygon([new Microsoft.Maps.Location(latlon.latitude, latlon.longitude-0.15), new Microsoft.Maps.Location(latlon.latitude+0.1, latlon.longitude-0.05), new Microsoft.Maps.Location(latlon.latitude+0.1, latlon.longitude+0.05), new Microsoft.Maps.Location(latlon.latitude, latlon.longitude+0.15), new Microsoft.Maps.Location(latlon.latitude-0.1, latlon.longitude+0.05), new Microsoft.Maps.Location(latlon.latitude-0.1, latlon.longitude-0.05), new Microsoft.Maps.Location(latlon.latitude, latlon.longitude-0.15)], null);  

    try {
    Microsoft.Maps.Events.addHandler(polygon, 'click', function(e) { console.log("Polygon click!"); }); //This is never evoked
    Microsoft.Maps.Events.addHandler(_map, 'click', function(e) { var point = new MM.Point(e.getX(), e.getY()); var loc = e.target.tryPixelToLocation(point); console.log("lat: " + loc.latitude + ", lon: " + loc.longitude); });

    } catch(e) {
        alert("Error");
    }

    _map.setView( {zoom:10}); 
    _map.entities.push(polygon);

    if (Microsoft.Maps.Events.hasHandler(polygon,'click')) {
        console.log("Polygon has click handler."); //This works
    }

    //This function should be added to the click handler for polygon. I'll add it when I know the handler works.
    function DisplayInfo (e) {
        console.log("Polygon has been clicked.");
        var vertices = e.target.getLocations();
        var verticeCenter = new Microsoft.Maps.Location(0,0);
        for (i=0; i<vertices.length-1; i++) {
            verticeCenter.latitude = verticeCenter.latitude + vertices[i].latitude;
            verticeCenter.longitude = verticeCenter.longitude + vertices[i].longitude;
        }
        verticeCenter.latitude = verticeCenter.latitude / (vertices.length - 1);
        verticeCenter.longitude = verticeCenter.longitude / (vertices.length - 1);
        defaultInfobox = new Microsoft.Maps.Infobox(verticeCenter, { width: 200, height: 50 });
        _map.entities.push(defaultInfobox);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:30:32.833

经过大量测试，我发现问题出在Android上。我在 Bing Maps Interactive SDK for AjaxV7 上尝试了代码，这些是我的结果：

*   桌面浏览器：有效（如问题中所述）
*   iPhone 4S：工作
*   带有默认浏览器的 Android 2.3.4：不起作用
*   带有 Opera 的 Android 2.3.4：有效
*   带有 Opera 的 Android ICS：有效
*   带有默认浏览器的 Android ICS：不起作用

# javascript - 如何在javascript中进行修剪操作

> ID：11137475
> 
> 赞同：-1
> 
> 时间：2012-06-21T11:47:39.250
> 
> 标签：javascript, asp.net

我需要修剪已使用 Java 脚本在文本框中输入的文本，然后再将其保存在 asp.net 中的 DB 中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:52:25.550

```
function trim(stringToTrim) {
    return stringToTrim.replace(/^\s+|\s+$/g,"");
}
function ltrim(stringToTrim) {
    return stringToTrim.replace(/^\s+/,"");
}
function rtrim(stringToTrim) {
    return stringToTrim.replace(/\s+$/,"");
}

// example of using trim, ltrim, and rtrim
var myString = " hello my name is ";
alert("*"+trim(myString)+"*");
alert("*"+ltrim(myString)+"*");
alert("*"+rtrim(myString)+"*"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T11:49:24.350

您可以将修剪功能添加到您的工具集：

```
Function trim (str) {
    return str.replace(/^\s+/g,'').replace(/\s+$/g,'')
} 
```

Ans 像这样使用它：

```
var trimmed = str.trim(); 
```

请注意，如果您使用 jquery，则可以使用[包含的修剪功能](http://api.jquery.com/jQuery.trim/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T11:49:36.563

```
 String.prototype.trim = function() {
        return this.replace(/^\s+|\s+$/g,"");
    }

    var text = "      fdsfsdf        ";
    text = text.trim(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T11:52:51.323

如果你不需要支持 IE <= 8，javascript 已经有`String.prototype.trim`：

```
" hello ".trim() //"hello"; 
```

# java - 如何在Scala中覆盖特征变量名称

> ID：11137477
> 
> 赞同：2
> 
> 时间：2012-06-21T11:47:42.957
> 
> 标签：java, scala

我有如下的scala特征

```
trait Id {
            @javax.persistence.Id
            @GeneratedValue(strategy=GenerationType.IDENTITY)
            @BeanProperty
            var id: Long = _
} 
```

现在我有一个实体（Person），我想扩展 Id 特征，但将 id 列名称更改为 personid。我怎样才能做到这一点？
人物片段如下：

```
@NamedQuery(name=”findAll”,query=”select p from Person p”)
class Person extends Id {
    @BeanProperty
    @Column(name=”personid”)
    def personid = id
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T12:15:06.903

您可以引入一个`personid`返回值的方法`id`：

```
trait Person extends Id {
  def personid = id
} 
```

删除`id`成员`Person`将违反子类实例必须始终可用的原则，就好像它们是基类的实例一样。也就是说，如果`Person`extends `Id`，那么您必须能够调用它的所有方法`id`，否则您将无法将 type 的对象分配给 type`Person`的引用`Id`。

因此，如果您 extend `Id`，则扩展的 trait/class 将始终具有`id`.

但是，您可以通过将包设为私有来限制`id`基本特征中的可见性：`Id``id`

```
private[package_name] var id: Long = _ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T12:58:54.723

如果您想要做的是简单地覆盖 JPA 使用的列名，那么您应该能够使用`AttributeOverride`注释。

它可能看起来像：

```
@MappedSuperclass
trait Id {
        @javax.persistence.Id
        @GeneratedValue(strategy=GenerationType.IDENTITY)
        @BeanProperty
        var id: Long = _
}

@Entity
@AttributeOverride(name="id", column=@Column(name="personid"))
class Person extends Id 
```

如果您想更改用于访问的属性名称，`id`那么您可以执行 Alex 建议的操作...

**编辑：**忘记让`Person`实体扩展`Id`特征

# machine-learning - WEKA - arff 格式的向量属性

> ID：11137479
> 
> 赞同：3
> 
> 时间：2012-06-21T11:47:50.480
> 
> 标签：machine-learning, signal-processing, weka, arff

我是 Weka 的新手，我正在尝试构建一个分类器来对 EEG 数据进行分类。EEG 属性数据是 5 分钟记录的原始信号以及其他属性。如何以 WEKA arff 文件格式指定我的实例具有 5 分钟原始信号的矢量输入？

例如：

```
Num. -- raw -- class
1    -- [1,2,3,4,5,6] -- Relaxed
2    -- [2,3,4,5,6] --- Bored 
```

`raw`属性向量在哪里..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T18:59:42.483

想想你的问题——你试图分类/预测什么，以及如何最好地表示它。您可能不想预测下一个原始 EEG 读数，因此时间序列方法可能并不重要。

Weka 只能处理具有一组固定属性（特征、值，或者换句话说，预定义长度的向量）的实例（数据行）。可能具有的属性类型是`nominal`（例如“红色”、“绿色”、“蓝色”）、`numeric`（任何整数/浮点值）、`string`（主要用于文本挖掘）。和`date`。没有办法将向量表示`raw signal`为单个属性。这是文档：[http ://weka.wikispaces.com/ARFF+%28stable+version%29](http://weka.wikispaces.com/ARFF+%28stable+version%29)

也就是说，您的实例可能如下所示：

```
num,class1,reading_1,reading_2,reading_3 ... reading_n,relaxed,bored 
```

where`reading_1`是第一个原始读数，`reading_n`是 5 分钟结束时的最后一个读数。这将要求 WEKA 根据原始读数来预测您的班级，并且可能不会很有效（因为读数可能不会相互对齐，并且因为这会单独处理每个读数，而不关心频率之类的事情或相对的平均值）。

或者，您可以对原始数据进行一些预处理，以便它对 WEKA 中的大多数机器学习算法有用。在这种情况下，您需要决定重要的功能，然后创建它们。一个粗略的例子可能是：

```
num,class1,average,frequency,max_magnitude,standard_deviation,relaxed,bored 
```

在将数据放入 ARFF 文件之前，您已经计算了数据的平均值和频率等内容。然后，算法对数据集的信息量大得多，作为预测的基础。

然而，另一个问题是你代表什么？整个 5 分钟的样本是同一类，还是用户`relaxed`对它`bored`的一部分和它的一部分？如果是这种情况，您可能应该有两个样本：一个用于用户无聊时，一个用于用户放松时。

# iphone - 从代码编写文件时，应使用多少 iOS 设备的最大“磁盘空间”？

> ID：11137480
> 
> 赞同：0
> 
> 时间：2012-06-21T11:47:50.647
> 
> 标签：iphone, ios, memory, diskspace

我们尝试检查使用代码编写文件时允许使用的最大内存量，为此我们使用了以下过程：

*   我们将视频从 itune 加载到设备以填充设备内存（显示可用内存 0.01 GB）
*   我们编写了下载视频的代码，在加载视频之前，我们检查有多少内存可用（通过代码），它显示 175MB。
*   现在我们加载大小为 16.70 MB 的视频，它允许我们将该视频写入文档目录
*   但是现在当我们看到时，我们的设备在 iTunes 中显示了有关大量使用 X MB 内存的警告（我忘记了确切的数字）。

所以我的问题是：
如何检查我的应用程序是否停止广泛使用设备内存？
什么时候（在多大的内存上）我们应该检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:16:48.217

不要进行任何检查，您使用的内存量不是静态值，它可能会因很多因素而异。

你要做的就是实现内存警告的通知观察器，并根据这些回调，行动并释放你的一些内存，不要试图自己计算内存，只取决于iOS告诉你什么，iOS会告诉你什么时候使用大量内存

# html - IE10 上的伪元素 负定位不起作用

> ID：11137484
> 
> 赞同：2
> 
> 时间：2012-06-21T11:48:17.817
> 
> 标签：html, css, pseudo-element, internet-explorer-10

我试图在 a 上否定定位`:before`和`:after`伪元素`<hr>`，但 IE10 很顽固，只是没有显示这些元素。

这是我的例子：http: [//jsfiddle.net/Shpigford/HyVMR/](http://jsfiddle.net/Shpigford/HyVMR/)

这似乎在除 IE10 之外的所有浏览器中都可以正常工作。它不显示左右块。

它适用于 a `<div>`，但使用 a`<hr>`会导致左侧伪元素根本不显示

CSS：

```
hr {
    background:red;
    margin:0 150px;
    height:50px;
    position:relative;
}
hr:before {
    content: '';
    position:absolute;
    height:50px;
    left:-150px;
    width:150px;
    background:green;
}
hr:after {
    content: '';
    position:absolute;
    height:50px;
    right:-150px;
    width:150px;
    background:blue;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-22T10:27:19.943

尝试**溢出：可见；**上`<hr>`

```
hr {
background:red;
margin:0 150px;
height:50px;
position:relative;
overflow:visible; 
```

}

# c++ - 包括QT包

> ID：11137485
> 
> 赞同：0
> 
> 时间：2012-06-21T11:48:23.863
> 
> 标签：c++, qt

我的主目录中有一个目录为 qt-everywhere-opensource-src-4.8.2。此目录包含基本的 QT 包，但问题是，当我编译主目录中存在的普通 Qt 文件时，它显示找不到相应 QT 包的错误。但是，当我尝试编译普通 c 文件时g++ 生成的 gcc 和 c++ 文件，那么它不会出错。我只想知道如何包含目录中存在的那些包。我要编译的文件是：-

```
#include <QApplication>
#include <QWidget>

   int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    QWidget window;

    window.resize(250, 150);
    window.setWindowTitle("Simple example");
    window.show();

    return app.exec();
} 
```

错误 =

```
demo.cpp:1:24: error: QApplication: No such file or directory
demo.cpp:2:19: error: QWidget: No such file or directory
demo.cpp: In function âint main(int, char**)â:
demo.cpp:6: error: âQApplicationâ was not declared in this scope
demo.cpp:6: error: expected â;â before âappâ
demo.cpp:8: error: âQWidgetâ was not declared in this scope
demo.cpp:8: error: expected â;â before âwindowâ
demo.cpp:10: error: âwindowâ was not declared in this scope
demo.cpp:14: error: âappâ was not declared in this scope 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:52:08.737

您应该将此行添加到您的 .pro 文件中： `QT += core gui`

# file - svn 忽略目录中的一些文件

> ID：11137487
> 
> 赞同：1
> 
> 时间：2012-06-21T11:48:30.560
> 
> 标签：file, svn, directory, ignore

我想忽略`*.dll`和`*.xml`在`bin`目录下，但包括其他所有内容（`*.dll.refresh`）。我尝试了以下忽略模式，但没有奏效：

```
bin/*.dll bin/*.xml
bin\*.dll bin\*.xml 
```

我不想忽略 all `*.dll`，显然需要`bin`签入文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:38:37.357

您应该在目录本身上设置`svn:ignore`属性。[这是一些文档的链接](http://svnbook.red-bean.com/en/1.1/ch07s02.html#svn-ch-7-sect-2.3.3)。`bin`

# php - SQL 查询无法正常工作

> ID：11137488
> 
> 赞同：0
> 
> 时间：2012-06-21T11:48:35.520
> 
> 标签：php, mysql, sql

所以基本上我有一张桌子 -

```
ID | from | To

-----------------
1  | 25.05.2012|30.05.2012
-----------------
2  | 15.05.2012|20.05.2012
-----------------
3  | 25.06.2012|30.06.2012 
```

我有一个疑问

```
SELECT date.*
FROM table AS date
WHERE (date.from >= '25.05.2012' OR date.to >= '25.06.2012' )  AND (date.to <= '30.05.2012' OR date.from <= '25.05.2012' )
GROUP by date.id 
```

但它不起作用，可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:51:31.040

您正在执行字符串比较，而不是日期比较，例如：`26.05`大于，`25.06`因为比较仅到达字符串的第二个字符并确定`6`大于`5`。

为了执行日期比较，您需要将值存储为日期（首选）或适当的字符串形式，例如`yyyyMMdd`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:53:30.840

`date`是 MySQL 中的保留关键字，请尝试调用其他表！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:53:41.977

```
SELECT * FROM table WHERE (from >= '25.05.2012' AND to <= '25.05.2012') GROUP by id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T11:55:43.143

“日期”是 MySQL 中的保留字符串。我建议将具有该名称的所有表和列重命名为自定义表和列。这可能已经解决了您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T12:12:43.993

**第 1 点：** table、date、from 是保留关键字。这些不应该用于命名表。如果您的表名是表，请使用反引号

**第 2 点：**当您有一张表时，为什么要为其创建别名？

**第 3 点：**比较日期时应采用`yyyy-mm-dd`. 我相信`from`列`to`是时间戳。

**第 4 点：**目前不需要 GROUP BY 语句，因为您没有使用任何聚合函数，例如`SUM, COUNT, etc`

您的查询应该是

```
SELECT *
FROM `table`
WHERE 
    (`from`>= '2012-05-25' OR `to`>= '2012-06-25' ) 
    AND
    (`to` <= '2012-05-30' OR `from` <= '2012-05-25'); 
```

如果要将日期传递为`25.05.2012`，请使用**[STR_TO_DATE](http://www.java2s.com/Tutorial/MySQL/0280__Date-Time-Functions/SELECTSTRTODATE04312004mdY.htm)**函数将字符串转换为日期。

# wpf - 使用数据模板时视图/视图模型的生命周期

> ID：11137489
> 
> 赞同：0
> 
> 时间：2012-06-21T11:48:38.763
> 
> 标签：wpf, mvvm

我正在定义一种策略，其中主视图将使用数据模板在视图之间切换。目前它可以在 3 个视图之间切换：

*   ApplicationView：它实际上是由许多不同的视图组成的视图，主要使用选项卡/停靠进行分层。这是一个处理应用程序数据的视图。
*   LogInView：用于登录用户。
*   DialogView：用于显示对话框视图。此视图还将使用数据模板来选择所需的适当视图。

这个想法是，当需要显示对话框视图时，将其设置为主视图上的当前视图。选择完成后，此信息将传递给 ApplicationView，或作为 ApplicationView 一部分的视图。虽然显示了 DialogView，但 ApplicationView 不能从内存中释放，因为 ApplicationViewModel 仍将处理数据（它需要在后台不断工作）。

我正在考虑使用 DataTemplates 来实现这一点，并将 ContentControl 的内容绑定到 CurrentView：

```
// in MainView
DataTemplate DataType="{x:Type vm:ApplicationViewModel}">
    <vw:ApplicationView />
</DataTemplate>

.....

// in MainViewModel
public ViewModelBase CurrentView { get; set; } 
```

基本上我试图避免对对话框使用模态窗口。

1）这个策略可以吗，还是有一些我不知道的问题？

2) 当我切换到 DialogView（我实际上是在切换视图模型）时，ApplicationView/ApplicationViewModel 会发生什么？我是否需要将 ApplicationViewModel 的引用存储在某处，这样它就不会被垃圾收集？我没有对此进行测试，但可能当我设置 CurrentView 时，将创建一个新的 ViewModel/View 实例。

3）连接到第二个问题，当使用DataTemplates时，以前使用的View/ViewModel会发生什么，现在被不同的view/viewmodel替换了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:19:15.403

就个人而言，我会发现在标准网格中使用 ZOrdering 更容易，并将所有内容放在同一个视图中 - 使用 ViewModel 来管理可见性。

例如

```
<Grid>
    <Grid Visibility="{Binding IsView1Visible, 
        Converter={StaticResource BoolToVisibilityConverter}}">
        <!-- view 1 contents -->
    </Grid>
    <Grid Visibility="{Binding IsView2Visible, 
        Converter={StaticResource BoolToVisibilityConverter}}">
        <!-- view 2 contents -->
    </Grid>
    <Grid Visibility="{Binding IsView3Visible, 
        Converter={StaticResource BoolToVisibilityConverter}}">
        <!-- view 3 contents -->
    </Grid>
    <Grid Visibility="{Binding IsDialogVisible, 
        Converter={StaticResource BoolToVisibilityConverter}}">
        <!-- dialog contents contents -->
    </Grid>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:27:16.110

1.  我认为您切换视图的方式没有任何问题，尽管通常您不想在显示对话框时摆脱应用程序。

    我过去所做的是将`CurrentView`, 和`DialogView`in a`Grid`放在彼此的顶部，然后`ApplicationViewModel`包含一个`IDialogViewModel`和`IsDialogVisible`属性，当您想要显示对话框时，只需填充这两个字段。（请参见下面的示例）

2.  `ApplicationViewModel`如果您想回到某个地方并避免创建新的，则必须将其存储在某个地方`ApplicationViewModel`

3.  WPF 处理不再可见的 UI 对象，因此将`CurrentView`from切换`Login`到`Application`将摆脱`LoginView`并创建一个`ApplicationView`

    ContentControl 的 Content 被设置为您的`ViewModel`，因此 ViewModel 实际上被放入应用程序中`VisualTree`。每当 WPF 在其中遇到一个`VisualTree`它不知道如何绘制的对象时，它将使用`TextBlock`包含`.ToString()`该对象的 来绘制它。通过定义 a `DataTemplate`，您是在告诉 WPF 如何绘制对象而不是使用其默认`.ToString()`方法。一旦对象离开`VisualTree`，为渲染对象而创建的任何视觉对象都将被销毁。

虽然我会继续使用您目前拥有的切换视图，但我不会将这种方法用于`Login`、`Application`和`Dialog`视图。

通常，`LoginView`登录时应该只显示一次，尽管`Dialog`如果您允许用户在登录后切换登录名，它可能会再次显示。因此，我通常`LoginView`在启动代码中显示 ，然后显示`ApplicationView`一次登录成功.

```
protected override void OnStartup(StartupEventArgs e)
{
    base.OnStartup(e);

    var login = new LoginDialog();
    var loginVm = new LoginViewModel();

    login.DataContext = loginVm;
    login.ShowDialog();

    if (!login.DialogResult.GetValueOrDefault())
    {
        Environment.Exit(0);
    }

    // Providing we have a successful login, startup application
    var app = new ApplicationView();
    var context = new ApplicationViewModel(loginVm.CurrentUser);
    app.DataContext = context;
    app.Show();
} 
```

就像我之前说的，我不想在`Application`显示时隐藏 a `Dialog`，所以我会制作 the 的`Dialog`一部分`Application`

`DataTemplate`这是我将用于我的 Dialog的示例`ApplicationViewModel`，使用我自己的[博客中的自定义弹出窗口](http://rachel53461.wordpress.com/2011/08/20/popup-panel-for-wpf/)作为对话框

```
<Grid x:Name="ApplicationView">
    <ContentControl Content="{Binding CurrentView}" />
    <local:PopupPanel x:Name="DialogPopup"
                      Content="{Binding DialogContent}"
                      local:PopupPanel.IsPopupVisible="{Binding IsDialogVisible}"
                      local:PopupPanel.PopupParent="{Binding ElementName=ApplicationView}" />
</Grid> 
```

# proxy - WSO2 ESB：对代理使用外部参数定义？

> ID：11137496
> 
> 赞同：0
> 
> 时间：2012-06-21T11:49:12.463
> 
> 标签：proxy, wso2, mediator, wso2esb, synapse

我们正在使用几个代理来监听不同的位置。但是在开发过程中，我们没有与生产环境中相同的 URI。是否可以定义外部 URI (transport.vfs.File.URI)？（也许是本地条目或其他属性？）

以下行应该能够加载实际 URI 的外部定义：

```
<parameter name="transport.vfs.FileURI">get-property('myURI')</parameter> 
```

完整代理示例（不工作）：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="getRN100xml"
statistics="disable" trace="disable" transports="vfs">
<target>
    <inSequence>
   <send>...</send>
    </inSequence>
</target>
<parameter name="transport.vfs.ActionAfterProcess">MOVE</parameter>
<parameter name="transport.PollInterval">5</parameter>
<parameter name="transport.vfs.MoveAfterProcess">C:/WSO2/In/saved</parameter>
<parameter name="transport.vfs.FileURI">get-property('myURI')</parameter>
<parameter name="transport.vfs.FileNamePattern">.*.xml</parameter>
<parameter name="transport.vfs.ContentType">application/xml</parameter>
<parameter name="transport.vfs.MoveTimestampFormat">yyMMddHHmmss</parameter> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:39:14.513

您可以查看这篇文章[WSO2 ESB - 代理参数的动态值（传输）](https://stackoverflow.com/questions/11123151/wso2-esb-dynamic-value-for-proxy-parameters-transport/11126008#11126008)，以了解如何在代理序列中动态设置值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-25T09:25:00.150

一种简单的方法是制作一个序列模板并在该模板中设置参数。您将此模板作为 inSequence 中的第一个操作阅读。您的代理定义如下所示：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="getRN100xml"
statistics="disable" trace="disable" transports="vfs">
<target>
 <inSequence>
   <call-template target="transport_vfs_parameter_settings"/>
 <send>...</send>
/<inSequence>
</target> 
```

模板定义看起来 sg。像：

```
<template xmlns="http://ws.apache.org/ns/synapse" name="transport_vfs_parameter_settings">
   <sequence>
    <property xmlns:ns="http://org.apache.synapse/xsd" name="transport.vfs.FileNamePattern" expression="test.xml"></property>
    <property xmlns:ns="http://org.apache.synapse/xsd" name="transport.PollInterval" expression="15" scope="transport"></property>
    <property xmlns:ns="http://org.apache.synapse/xsd" name="transport.vfs.ActionAfterProcess" expression="MOVE" scope="transport"></property>
    <property xmlns:ns="http://org.apache.synapse/xsd" name="transport.vfs.FileURI" expression="//localhost/D:/Test/in" scope="transport"></property>
    <property xmlns:ns="http://org.apache.synapse/xsd" name="transport.vfs.MoveAfterProcess" expression="//localhost/D:/Test/processed" scope="transport"></property>
    <property xmlns:ns="http://org.apache.synapse/xsd" name="transport.vfs.MoveAfterFailure" expression="//localhost/D:/Test/failure" scope="transport"></property>
    <property xmlns:ns="http://org.apache.synapse/xsd" name="transport.vfs.ContentType" expression="text/xml" scope="transport"></property>
    <property xmlns:ns="http://org.apache.synapse/xsd" name="transport.vfs.ActionAfterFailure" expression="MOVE" scope="transport"></property>
   </sequence>
</template> 
```

这样，将您的代理定义传输到另一个环境意味着使用不同的模板。自然，您只能在 inSequence 中设置那些参数，其值可以在 inSequence 的开头确定。例如，如果您希望 replyFilename 包含回复 messageID，请在 outSequence 中设置它。

# android - 在 Android 中连接 WEP 无线网络在我的应用程序中没有做任何事情

> ID：11137502
> 
> 赞同：1
> 
> 时间：2012-06-21T11:49:32.273
> 
> 标签：android, wireless

> **可能重复：**
> [如何以编程方式连接到android中的特定wifi网络？](https://stackoverflow.com/questions/8818290/how-to-connect-to-a-specific-wifi-network-in-android-programmatically)

我一直在尝试使用以下链接连接 WEP 无线网络的各种方法：

[如何以编程方式连接到 Android 中的特定 Wi-Fi 网络？](https://stackoverflow.com/questions/8818290/how-to-connect-to-a-specific-wifi-network-in-android-programmatically)

或者

[如何以编程方式在 Android 中创建和读取 WEP/EAP WiFi 配置？](https://stackoverflow.com/questions/4374862/how-to-programatically-create-and-read-wep-eap-wifi-configurations-in-android/4374934#4374934)

我还尝试了密码的引号和没有引号。根本没有出现。也是上述两个链接的组合。

这是我最后一次尝试：

```
networkSSID = bundle.getString("networkName");
networkPass = bundle.getString("networkPassword");

WifiConfiguration conf = new WifiConfiguration();
conf.SSID = "\"" + networkSSID + "\""; 
conf.wepKeys[0] = "\"" + networkPass + "\"";
conf.wepTxKeyIndex = 0;
conf.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);
conf.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP40); 
conf.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP104);
Toast.makeText(getApplicationContext(), "pass is" + networkPass ,Toast.LENGTH_LONG).show();
Toast.makeText(getApplicationContext(), "id is" + networkSSID ,Toast.LENGTH_LONG).show();
WifiManager wifiManager = (WifiManager)this.getSystemService(Context.WIFI_SERVICE); 
wifiManager.addNetwork(conf);
List<WifiConfiguration> list = wifiManager.getConfiguredNetworks();
for( WifiConfiguration i : list ) {
   if(i.SSID != null && i.SSID.equals("\"" + networkSSID + "\"")) {
    wifiManager.disconnect();
    wifiManager.enableNetwork(i.networkId, true);
    wifiManager.reconnect();                
        break;
   }           
} 
```

我不确定问题出在哪里 - 当我通过设置手动连接到同一个 WEP 网络时，我可以连接它。

如果有人能给我一个关于如何连接它的正确解决方案，那就太好了？

让我知道！！

谢谢！

# progress-4gl - 会话在工作过程中断开连接

> ID：11137504
> 
> 赞同：0
> 
> 时间：2012-06-21T11:49:36.253
> 
> 标签：progress-4gl, openedge

会话自动断开（在工作中）。

用户在通过 putty telnet 应用程序使用 telnet 连接到 Linux 服务器工作时会发生断开连接。

在断开连接期间，网络黑白利用率很高，并且对网络中的用户总数没有限制。

错误“收到挂断信号 (562)”

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:03:43.620

网络连接中断或通过“kill”发送挂断信号。

当断开连接发生时，您提到网络利用率“高”。你怎么知道？你在看什么测量告诉你它是“高”的？这可能是问题根源的网络问题的症状。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-15T16:21:59.027

有几个方向：

1.  OpenEdge 发布了这篇文章，其中包含实现 keep-alive 数据包的链接： [https ://knowledgebase.progress.com/articles/Article/Telnet-connection-times-out-after-15-minutes](https://knowledgebase.progress.com/articles/Article/Telnet-connection-times-out-after-15-minutes)

2.  增加 xinetd.conf 中“实例”的数量，然后重新启动服务。

3.  确保数据库监视器已启动并正在运行：[https ://documentation.progress.com/output/ua/OpenEdge_latest/index.html#page/dmadm/prowdog-command.html](https://documentation.progress.com/output/ua/OpenEdge_latest/index.html#page/dmadm/prowdog-command.html)

4.  检查数据库日志文件，找出挂断前发生的事情（[https://documentation.progress.com/output/ua/OpenEdge_latest/index.html#page/gsins/openedge-database-log-file.html](https://documentation.progress.com/output/ua/OpenEdge_latest/index.html#page/gsins/openedge-database-log-file.html)）

# php - 如何使用mysql从多个类别中选择行并显示每个类别的数据列表？

> ID：11137506
> 
> 赞同：0
> 
> 时间：2012-06-21T11:49:38.063
> 
> 标签：php, mysql

假设我有一个这样的数据库设计：

对于数据：

```
id |    title     | category
1  | first title  | 1
2  | second title | 4
3  | third title  | 5
4  | fourth title | 2
5  | fifth title  | 3
6  | other title  | 1 
```

对于类别：

```
id | name 
1  | music 
2  | movies
3  | funny 
4  | people 
5  | sport 
```

如何输出每个类别的列表以及该类别中的项目标题？

有人认为：

```
<div>
<h1>music</h1>
<div>first title</div>
<div>other title</div>
<div>

<div>
<h1>movies</h1>
<div>fourth title</div>
<div>

// and so on... 
```

我不知道如何为这样的结果制定 mysql 查询......

有人可以给我建议吗？（我希望这个例子可以很容易理解）

提前致谢。

**编辑：我使用了 Eugen Rieck 的代码，但我不知道如何做以下事情**

我怎样才能在同一时间订购`categories.id`并`titles.id`最终在此之后使用 where 条件？

像这样的东西： `ORDER BY titles.id DESC LIMIT 0, 10 WHERE titles.views > 10`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:59:58.513

假设您的第一个表被调用`titles`并且您的第二个表被调用，请`categories`使用类似的查询

```
SELECT categories.name as cat, tiltes.title as title
FROM categories INNER JOIN titles ON titles.category=categories.id
ORDER BY categories.id 
```

然后进行组更改循环

```
define('MAX_TITLES_PER_CAT',10);

$cat='';
$tcount=0;
while (true) {
  //Fetch a row depending on your DB framework, eg. mysql_fetch_row()
  if ($row['cat']!=$cat) {
    if ($cat!='') echo '</div>';
    $cat=$row['cat'];
    $tcount=MAX_TITLES_PER_CAT;
    echo "<div><h1>$cat</h1>";
  }
  if ($tcount--<=0) continue;
  echo '<div>'.$row['title'].'</div>';
}
if ($cat!='') echo '</div>'; 
```

**编辑**

我更新了上面的代码，将每个类别显示的标题数量限制为`MAX_TITLES_PER_CAT`- 请理解，如果每个类别的平均标题数量远高于`MAX_TITLES_PER_CAT`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:56:18.687

```
SELECT
    t.title,
    c.name
FROM
    titles t
INNER JOIN categories c
    ON c.id = t.category
ORDER BY
    c.name
ASC 
```

这为您提供了按类别排序的所有标题的列表。你在 PHP 中所做的大致如下：

```
$prevCategory = null;

while(fetchRows)
{
    $newCategory = $row['name'];

    if($prevCategory != $newCategory)
    {
        echo '<ul>{category name}</ul>';
    }

    echo '<li>{title}</li>';

    $prevCategory = {category name};

} 
```

请注意，这是半伪代码。它不会关闭以前的 UL，也不会根据您寻求的 HTML 格式。不过，这应该可以帮助您。

# java - 如何在安卓应用计费服务中记住该商品是否已购买？

> ID：11137509
> 
> 赞同：0
> 
> 时间：2012-06-21T11:49:48.823
> 
> 标签：java, android

在我的应用程序中，我在地牢示例项目中完成了以下代码，以检查该项目是否已购买并更改列表项的文本：

```
@Override
        public void onPurchaseStateChange(PurchaseState purchaseState,
                String itemId, int quantity, long purchaseTime,
                String developerPayload) {
            if (Consts.DEBUG) {
                Log.i("Tag", "onPurchaseStateChange() itemId: " + itemId + " "
                        + purchaseState);
            }

            if (purchaseState == PurchaseState.PURCHASED) {
                ownedItems.add(itemId);
                list.get(purchaseposition).setPurchase("Play");
                adapter.notifyDataSetChanged();
            }
            // YOU can also add other checks here
        } 
```

但是当我重新运行应用程序时，它不记得我已经购买了该商品，并提示我再次购买。我怎样才能做到这一点？它对我来说看起来有点复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:03:22.607

有两种类型的应用内购买，一种是托管的，另一种是非托管的，即使在设备上重新安装应用程序后，play.google 也会处理该项目，而对于非托管你必须处理自己购买。正如您可以在以下链接中看到详细信息 [http://developer.android.com/guide/market/billing/billing_admin.html#billing-purchase-type](http://developer.android.com/guide/market/billing/billing_admin.html#billing-purchase-type)

还回答这个问题，解释托管产品和非托管产品之间的区别

[托管和非托管应用内产品android之间的区别？](https://stackoverflow.com/questions/9391123/difference-between-managed-and-unmanaged-in-app-product-android)

# c++ - 范围与变量的生命周期

> ID：11137516
> 
> 赞同：30
> 
> 时间：2012-06-21T11:50:14.820
> 
> 标签：c++, scope

变量的作用域和生命周期之间有什么关系？如果一个变量超出范围，它的内存是否允许被另一个变量覆盖，或者是保留的空间，直到函数离开。

我之所以问，是因为我想知道下面的代码是否真的有效，或者 *p 是否可能是未定义的

```
foo() {
  int *p;
  {
    int x = 5; 
    p = &x;
  }
  int y = *p;

} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-21T11:51:05.347

> **什么是范围？**

***范围***是可以访问变量的区域或代码段。

> **什么是一生？**

***生命周期***是对象/变量处于有效状态的持续时间。

因为，***自动/局部非静态变量`Lifetime`仅限于它们的`Scope`***.
换句话说，一旦创建它们的作用域（ `{`， ）结束，自动变量就会自动销毁。`}`因此名称自动开始。

> **您的代码示例有什么问题？**

所以是的，你的代码有一个**未定义的行为**。

在您的示例中，范围`*p`是创建后的整个函数体。
然而，`x`它是一个非静态的局部/自动变量，因此它的生命周期`x`结束于它的范围，即`}`它创建的右括号，一旦范围结束`x`不存在。`*p`指向不再存在的东西。

请注意，技术上`x`不存在超出其范围的情况，但可能会发生编译器没有删除的内容，`x`并且可以`x`通过指针访问超出其范围的内容（*如您所做*的那样）。但是，执行此操作的代码不是有效的 C++ 代码。它是调用未定义行为的代码。这意味着任何事情都可能发生（*您甚至可能会看到`x`完好无损*的价值），人们不应该期望从这样的代码中观察到可观察的行为。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-21T11:58:57.810

### C11 第 6.2.1 节第 2 段

> 对于标识符指定的每个不同实体，标识符仅在称为其范围的程序文本区域内可见（即，可以使用）。由同一标识符指定的不同实体要么具有不同的作用域，要么位于不同的名称空间中

.

### C11 第 6.2.4 节第 2 段

> 对象的生命周期是程序执行期间保证为其保留存储的部分。

在您的情况下`x`，它是块本地的，它的生命周期也是如此，因此`x`不能在块外通过其名称访问，也因为它的生命周期仅限于其块，`x`离开块后将不再保留其地址，因此将导致未定义的行为。

另一方面，例如，一个`static`局部变量，在这种情况下，作用域是块的本地变量，因此我们不能在块之外通过它的名称访问，但生命周期是整个程序，所以我们可以使用程序运行时变量在程序中任何位置的地址。这个例子应该有助于获得差异。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-21T11:53:49.263

对象（即存储值的实际底层事物）具有生命周期。

变量（即用于引用对象的事物）具有范围。

无论哪种方式，都会`y = *p`调用未定义的行为；引用的对象`x`是*自动*`x`的，超出范围时其生命周期结束。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T12:04:25.783

> 变量的作用域和生命周期之间有什么关系？

正如 Oli 所说，变量具有范围和对象的生命周期。变量的范围和它的生命周期是绑定的，但是您可以拥有生命周期超出创建它们的范围的对象：

```
int* f() {
   int *p                    // Variable p
          = new int(1);      // object (call it x)
   return p;                 // p scope ends, p lifetime ends, x survives
}
int main() {
   int *q                    // Variable q
          = f();             // ... points to x
   delete q;                 // x lifetime ends, q is in scope, q is alive
} 
```

在您的特定情况下，`x`变量在创建它的范围关闭时结束它的生命周期，因此您有未定义的行为。

> 如果一个变量超出范围，它的内存是否允许被另一个变量覆盖，或者是保留的空间，直到函数离开。

这是实现的一个细节。在所有情况下访问变量都是未定义的行为*，因为并非所有情况都必须相等*，并且如果变量具有非平凡的析构函数，它将在作用域的末尾被调用，因此内存是否存在是无关紧要的：*对象*不再存在。话虽如此，在许多情况下，当变量超出范围时，编译器不会*释放*函数中的内存（即它们不会重置帧指针），但它们可能会重用相同的空间来保存同一函数中的其他变量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T12:40:19.333

我已经运行了你的程序，输出是 5。输出仍然是 5，尽管 x 变量在第二个 '}' 之后被破坏是因为内存位置没有被任何其他变量覆盖。如果你有很多代码之后第二个作用域的结尾，很有可能之前由“x”拥有的内存位置被覆盖。

```
int x = 5; 
*p = &x;
}  //  x lifetime ends after this.but the number '5' is still there in that memory.
   //but it is possible to assign this memory (which previously belong to x) to a new var. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T12:00:54.427

标准定义一旦离开范围就允许覆盖内存。编译器实现使其保留和释放。编译时优化可能会移动堆栈分配，因此它们将不再反映您的顺序。

您的代码确实会调用未定义的行为，因此不应使用。您的代码实际上可能有效，因为 y 的写入值发生在取值 p 指向之后。

# ruby-on-rails - 是否有内置函数可以访问嵌套的 yaml 字符串？

> ID：11137518
> 
> 赞同：3
> 
> 时间：2012-06-21T11:50:29.743
> 
> 标签：ruby-on-rails, ruby, yaml

假设我们有以下 YAML 结构：

```
books:
  book_one: "Some name"
  book_two: "Some other name" 
```

如果我们像这样加载文件：

```
f = YAML.load_file("my.yml") 
```

我们可以`book_one`像这样访问：`f["books"]["book_one"]`。是否有一个内置函数可以接受类似的字符串：`books.book_one`并返回相同的值？

编辑：这是我到目前为止所拥有的，它似乎有效：

```
 ...
  @yfile = YAML.load_file("my.yml")
  ...

  def strings_for(key)
    key_components = key.split(".")
    container      = @yfile
    key_components.each_with_index do |kc,idx|
      if container && container.kind_of?(Hash) && container.keys.include?(kc)
        container  = container[kc]
      else
        container = nil
      end
    end
    container
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:01:31.207

为此，您可以使用[OpenStruct](http://ruby-doc.org/stdlib-1.9.3/libdoc/ostruct/rdoc/OpenStruct.html)和递归函数，它看起来像这样：

```
require 'ostruct'

def deep_open_struct(hash)
  internal_hashes = {}
  hash.each do |key,value|
    if value.kind_of?( Hash )
      internal_hashes[key] = value
    end
  end
  if internal_hashes.empty?
    OpenStruct.new(hash)
  else
    duplicate = hash.dup
    internal_hashes.each do |key,value|
      duplicate[key] = deep_open_struct(value)
    end
    OpenStruct.new(duplicate)
  end
end

f = YAML.load_file('my.yml')
struct = deep_open_struct(f)
puts struct.books.book_one 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:35:30.197

我在我的扩展库中使用它：

```
class OpenStruct
  def self.new_recursive(hash)
    pairs = hash.map do |key, value|
      new_value = value.is_a?(Hash) ? new_recursive(value) : value
      [key, new_value]
    end
    new(Hash[pairs])
  end
end 
```

在行动：

```
struct = OpenStruct.new_recursive(:a => 1, :b => {:c => 3})
struct.a #=> 1
struct.b.c #=> 3 
```

# ios - iPhone 中的 SOX 用于音频转换

> ID：11137520
> 
> 赞同：1
> 
> 时间：2012-06-21T11:50:36.237
> 
> 标签：ios, audio, caf, audio-converter

我想实现将`.caf`文件转换为任何其他格式的音频。我听说过`sox`。但我没有找到任何合适的参考或任何关于如何实现它的代码。有人有想法吗？

# maven - 从内部（JUnitRunner）集成测试使用外部战争启动 Jetty

> ID：11137535
> 
> 赞同：1
> 
> 时间：2012-06-21T11:51:31.290
> 
> 标签：maven, junit, jetty, integration-testing, embedded-jetty

我需要使用外部（可能是远程）.war 文件（App T）作为我的测试内部的 Web 应用程序资源启动一个码头，以便我的被测系统（App A）可以连接到它以针对其 REST 接口运行调用.

我找到了很多关于如何为被测系统之战（App A）启动码头的教程。我还发现了一些关于如何让外部 .war (App T) 的 maven 启动码头作为构建周期的一部分。但是我不知道是否可以执行上述操作。

理想情况下，我将 AppT 项目添加为 maven 依赖项并通过类路径访问它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:47:09.787

好吧，我不知道你会怎么做，如果它是一个远程战争文件（你可能需要在执行码头插件之前先下载它），但这里是如何去做，当你'已经在你的文件系统的某个地方找到了它：

```
 <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <version>${version.jetty}</version>
            <configuration>

                <contextHandlers>
                    <contextHandler implementation="org.eclipse.jetty.webapp.WebAppContext">
                        <war>${project.build.directory}/webapps/foo-bar.war</war>
                        <contextPath>/foo</contextPath>
                    </contextHandler>
                </contextHandlers>

            </configuration>
        </plugin> 
```

我的建议是将该战争添加为具有范围的依赖项：提供。

```
<dependencies>

    <!-- Webapps which will not be included in the final WAR artifact: -->
    <dependency>
        <groupId>com.foo.bar</groupId>
        <artifactId>foo-bar</artifactId>
        <version>${version.foo.bar}</version>
        <type>war</type>
        <scope>provided</scope>
    </dependency>

</dependencies> 
```

此外，您很可能需要以下内容：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.3</version>

            <executions>
                <execution>
                    <!-- Used to copy the foo bar war to the webapps folder -->
                    <id>copy-dependency-foo-bar</id>
                    <phase>process-resources</phase>
                    <goals>
                        <goal>copy</goal>
                    </goals>

                    <configuration>
                        <artifactItems>
                            <artifactItem>
                                <groupId>com.foo.bar</groupId>
                                <artifactId>foo-bar</artifactId>
                                <version>${version.foo.bar}</version>
                                <type>war</type>
                                <overWrite>true</overWrite>
                                <outputDirectory>${project.build.directory}/webapps</outputDirectory>
                                <destFileName>foo-bar.war</destFileName>
                            </artifactItem>
                        </artifactItems>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

上面的最后一点将确保在 jetty 插件尝试加载解析的工件之前将其复制到目标目录的 webapps 子文件夹。

# asp.net-mvc-3 - mvc3SiteMapProvider：站点地图显示正确，但面包屑不显示

> ID：11137536
> 
> 赞同：0
> 
> 时间：2012-06-21T11:51:31.380
> 
> 标签：asp.net-mvc-3, localization, mvcsitemapprovider

嗨，我有一个带有区域的网站，这个

[url 本地化策略。](http://blog.maartenballiauw.be/post/2010/01/26/Translating-routes-(ASPNET-MVC-and-Webforms).aspx)

我在使用 mvc3sitemapprovider 时遇到了问题（也是 marteen ...）。节点是明确定义的，当我输入时，站点地图会完美显示：

```
@Html.MvcSiteMap().Menu(false, true, true) 
```

但有时 Bredcrums 路径不会出现：

```
 @Html.MvcSiteMap().SiteMapPath() 
```

在没有显示sitemappath的页面中，view和routeData正确（页面显示正常），节点的数据也正确。这是一个示例：

```
<mvcSiteMapNode title="$resources:URL, LinkSolPerso" clickable="false" >

  <mvcSiteMapNode  title="$resources:URL, LinkInteg" area="soluciones_personalizadas"  controller="integracion"  action="Index" />

    <mvcSiteMapNode  title="$resources:URL, LinkServOfre" area="soluciones_personalizadas" controller="proyectos"  action="servicios-ofrecidos" />
    <mvcSiteMapNode  title="$resources:URL, LinkTrabRea" area="soluciones_personalizadas" controller="proyectos"  action="trabajos-realizados" />
    <mvcSiteMapNode  title="$resources:URL, LinkObtPres" area="soluciones_personalizadas" controller="proyectos"  action="obtener-presupuesto" />

  <mvcSiteMapNode  title="$resources:URL, LinkSolPerso" area="soluciones_personalizadas" controller="formacion"  action="Index" />

  <mvcSiteMapNode  title="$resources:URL, LinkPromPat" area="soluciones_personalizadas" controller="promociones_patrocinios"  action="Index" />

</mvcSiteMapNode> 
```

问题是我不知道会发生什么（节点是正确的，因为它们显示在站点地图中......）也不是调试的最佳方式......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:42:51.373

我不知道出了什么问题。但是为了节省您的时间，我应该告诉我已经修复了它，从项目中下载源代码（在我使用 nuget 包之前）并引用它。这样做一切都很完美。

# html - Outlook 中的 HTML 电子邮件

> ID：11137540
> 
> 赞同：12
> 
> 时间：2012-06-21T11:51:47.387
> 
> 标签：html, email, outlook

我正在为 html 中的电子邮件制作模板，它在苹果电子邮件客户端、gmail、hotmail 和 windows 邮件 2006 中运行良好。它在 Outlook 中不起作用，它延伸了，字体系列不起作用，因为它延伸了它不在页面中心。

这是我的代码；

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="initial-scale=0.5">
<meta name="format-detection" content="telephone=yes">
<title>Untitled Document</title>
<style type="text/css">
body {
    margin:                     0; 
    padding:                    0; 
    width:                      100% !important; 
    overflow-y:                 hidden; 
    background-color:           #ffffff; 
    -webkit-text-size-adjust:   100%; 
    -ms-text-size-adjust:       100%; 
    font-family:                Helvetica;
    vertical-align:             top;
    border-spacing:             0px;
}
ul, ol, dl { 
    padding:                    0;
    margin:                     0;
}
h1, h2, h3, h4, h5, h6, p {
    margin-top:                 0;  
    padding-right:              0px;
    padding-left:               0px; 
}
a img { 
    border:                     none;
}
a:link {
    color:                      #42413C;
    text-decoration:            underline;
}
a:visited {
    color:                      #6E6C64;
    text-decoration:            underline;
}
a:hover, a:active, a:focus { 
    text-decoration:            none;
}
.container {
    width:                      600px;
    background:                 #FFF;
    margin:                     0 auto; 
}

.content {
    padding:                    0px;
    padding-left:               10px;
    border:                     none;
    background-color:           #E9E9E9;
    line-height:                16px; 
    font-size:                  14px;
    width:                      590px;
}
.footer {
    padding:                    0px 0;
    background:                 #000000;
    text-align:                 center;
    color:                      white;
    font-size:                  12px;
    margin-bottom:              10px;
    height:                     45px;
    width:                      600px;
}
.actie {
    background-color:           #69696D;
}
.icons {
    font-size:                  12px;
}
.contact {
    text-align:                 center;
}
.table {
    border-spacing:             0px;
}
.contact a {
    color:                      white;
}
.devices {
    background-color:           #2f2f31; 
    height:                     253px;
    border:                     0;
}
.header {
    background-color:           #2f2f31; 
    height:                     87px;
    border:                     0;
}
p {
    font-color:                 black;
}

</style></head>

<body>

<div class="container" width="600px" height="900px">
  <div class="header"><img src="http://mediabunker.com/newsletters/newsletter_201206/logo.png" width="600" height="87px" />
  </div> 
  <div class="devices" background-color="#2f2f31" height="220px" border="0"><img src="http://mediabunker.com/newsletters/newsletter_201206/devices2.png" /></div>
  <div class="content">
    <table width="590" border="0">
      <tr>
        <td width="55%"><h3><strong>Werkt u al met apps?</strong></h3>
          <p>Het gebruik van applicaties, oftewel apps, is namelijk booming! Steeds meer merken en bedrijven zien het gemak van een app in. Het is de ideale optie voor het versterken van uw merk, zowel extern als intern, of het opzetten van een geheel nieuw product. Ook de enorme groei in gebruik van mobiele apparaten zorgt er voor dat een sterk merk niet meer kan achter blijven.</p>
          <p>Mocht u geïnteresseerd zijn in onze service, van op maat gemaakte applicaties en backend oplossingen, neem dan gerust contact met ons op. U bent van harte welkom voor een kop koffie bij ons in de Suikersilo's, tijdens een verkennend gesprek of een demonstratie van de mogelijkheden van apps voor mobiel, tablets, tv en het web.</p>
        <p>Alvast bedankt en hopelijk tot ziens.</p></td>
        <td width="45%" valign="top">
        <table height="auto" border="0" cellpadding="5px" class="icons" margin-top="0">
          <tr>
            <td colspan="2"><h3>No matter what device.<br />
              We build natively.</h3></td>
            </tr>
          <tr>
            <td><img src="http://mediabunker.com/newsletters/newsletter_201206/apple.png"/></td>
            <td width="199"><div align="center">Apple iOS is the operating<br />
              system that powers the <br />
              iPhone, iPad and iPod touch.</div></td>
            </tr>
          <tr>
            <td><img src="http://mediabunker.com/newsletters/newsletter_201206/android.png"  /></td>
            <td><div align="center">With partners like Google,<br />
              HTC and Motorola, Android is<br />
              the fastest growing mobile OS.</div></td>
            </tr>
          <tr>
            <td><img src="http://mediabunker.com/newsletters/newsletter_201206/windows.png" /></td>
            <td><div align="center">Together Microsoft and Nokia<br />
              support conventional users <br />
              with Windows Phone.</div></td>
            </tr>
          <tr>
            <td><img src="http://mediabunker.com/newsletters/newsletter_201206/html5.png" /></td>
            <td><div align="center">Looking for other platforms<br />
              like BlackBerry, Samsung <br />
              Bada or HTML5 &amp; CSS3?<br />
              We can build it!</div></td>
            </tr>
        </table></td>
      </tr>
    </table></div>
    <div class="actie">
      <div align="center"><a href="http://www.mediabunker.com/products"><img src="http://mediabunker.com/newsletters/newsletter_201206/actie2.png" /></a></div>
    </div>
  <div class="footer" background-color="#000000" halign="center" height="40px">
    <table class="contact" border="0" HALIGN="center">
      <tr align="center">
        <td align="center" width="189px"><font color="white">Suikersilo-West 23 <br />
        1165 MP Halfweg</font></td>
        <td align="center" width="189px"><a href="tel:0031238200140">Tel +31 23 820 0140</a><br> <a href="mailto:info@mediabunker.com">info@mediabunker.com</a></td>
        <td align="center" width="189px"><a href="http://mediabunker.com">www.mediabunker.com</a><br> <a href="http://twitter.com/mediabunker">twitter.com/mediabunker</a></td>
      </tr>
    </table>
<img src="http://mediabunker.com/newsletters/newsletter_201206/footer.png" width="600"/></div></div>
</body>
</html> 
```

有人可以帮我解决这个问题吗？我是否使用了 Outlook 不支持的任何元素？我需要更多的内联 CSS 吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-21T12:03:53.667

我建议看看[www.emailology.org](http://www.emailology.org)。在为 Outlook 构建电子邮件时，我发现它非常有用。作为 HTML 电子邮件的规则，我纯粹在表格中构建它们并在元素上使用样式。这太可怕了，就像几年前建立糟糕的网站一样，但不幸的是，它似乎是最好的解决方案。

例如，我会更改`<p>`为`<p style="font-family: Helvetica; font-size: 12px;">`等等。像往常一样构建它并设置它的样式，但是当您足够高兴地测试它时，复制所有内联样式。

不过看看电子邮件学。这是一个很好的资源。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-10T13:27:03.577

该站点提供了一个很好的表格概述（可以下载 PDF），其中包含哪些 CSS 属性将与哪些电子邮件客户端一起使用、支持哪些 CSS 选择器以及在哪里定义您的 CSS 样式（样式标签、头部样式和内联）：

[http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

这篇文章提供了额外的来源：[https ://stackoverflow.com/a/1019166/1143126](https://stackoverflow.com/a/1019166/1143126)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T11:57:37.703

那里有大量的指南可以帮助您解决这个问题，因为 Outlook 对 HTML 来说真的很不稳定，例如它不支持您正在使用的 nested 。

# c# - 使用 Lync 2010 UCMA 3.0 c# 添加组

> ID：11137544
> 
> 赞同：0
> 
> 时间：2012-06-21T11:52:11.900
> 
> 标签：c#, lync, ucma

我正在尝试为 Lync 2010 UCMA 创建一个简单的联系人管理器。

我正在使用一个`NotificationReceived`事件，并测试是否`IsFullNotification`设置了标志。我希望随着组的添加，不会有“IsFullNotification”。

但是这样的事件永远不会发生，它总是设置为`true`。

在添加新创建的数量之前，我如何仍然获得已添加组的完整联系人列表（因为它们已成功添加）以重新映射联系人。

PS 使用 translate.google.com 翻译

```
_contactGroupServices.NotificationReceived += OnNotificationReceived;
_contactGroupServices.BeginSubscribe(ar =>
{
   try
   {
      _contactGroupServices.EndSubscribe(ar);
   }
   catch (RealTimeException rtex)
   {
       Console.WriteLine(rtex);
   }
}
, null); 
```

处理程序：

```
void OnNotificationReceived(object sender, ContactGroupNotificationEventArgs e)
{
    Console.WriteLine("Received a contact update.");

    if (e.IsFullNotification) //always this value :(
    {
        ExtractContactGroupInfo(e);
        AddGroups();
    }
    else
    {
        HandleAddedGroupNotification(e); // The LINE
    }
} 
```

我已经标记了添加所有组时需要执行的行。而且我还需要`ContactGroupNotificationEventArgs e`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T07:27:24.530

我也有同样的问题，这是因为您拨打了 BeginSubscribe 但订阅未完成。确保在添加组之前订阅 _contactGroupService.State。如果不等到它被订阅。这应该有望解决您的问题。

快乐编码:)

# java - Java JAR 保护

> ID：11137545
> 
> 赞同：2
> 
> 时间：2012-06-21T11:52:13.817
> 
> 标签：java, classloader, urlclassloader, source-code-protection

我编写了一个 Java 应用程序，并计划在线分发它。每个版本都将使用我制作的秘密序列号进行锁定。

我需要从反编译器等保护我的 jar 文件。这是我到目前为止所做的：

1.  用户在表单中输入他的序列号
2.  串行通过 php 脚本发送到我的开发服务器
3.  该脚本生成一个新的 jar bin 文件，该文件以 AES 128 加密
4.  我的“加载器”将 jar 文件作为字节下载并解密。
5.  它调用 main 方法。
6.  用户可以随心所欲地使用该应用程序
7.  用户关闭应用
8.  缓存被清除，一切都返回到第 1 步或之前。

我已经完成了步骤 1 到 3，但我需要知道是否可以制作一个自定义类加载器，从 HTTP 中获取字节，解密它们并调用 main 方法。由于文件是完全加密的（在 PHP 服务器上保存为 bin），我不能使用基本的类加载器。关于第 8 步，是否可以从计算机内存中卸载内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T11:55:52.167

是的，有可能，但也没用。

您的类加载器将是您的安全系统的最薄弱环节。它不能被加密，因此反编译它会相对容易。

现在，由于 Classloader 中有一个地方必须有一个字节数组形式的解密类，攻击者唯一需要做的就是将该字节数组转储到文件中。

参考[`dystroy`](https://stackoverflow.com/a/11137612/1344008)代码：

```
classBytes = EncryptionUtil.decryptBytes(url, key); 

// In this moment, classBytes contains unencrypted class.
// If an attacker adds:   
//
//   FileOutputStream fos = new FileOutputStream("some.name");
//   fos.write(classBytes);
//   fos.close();
// 
// he will destroy all your security.

return defineClass(name, classBytes, 0, classBytes.length); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:56:14.690

是的，您可以向类加载器提供您抓取的字节。我在类似的问题中这样做：

```
public class SecureClassLoader extends URLClassLoader {

    @Override
    protected Class<?> findClass(final String name) throws ClassNotFoundException {
        if (isEncrypted(name)) {
            final String resourceName = name.replace('.', '/') + ".class";
            URL url = findResource(resourceName);
            if (url != null) {
                byte[] classBytes = null;
                try {
                    classBytes = EncryptionUtil.decryptBytes(url, key);
                    return defineClass(name, classBytes, 0, classBytes.length);
                } catch (ClassFormatError e) {
                    log.severe("Bad format for decrypted class " + name);
                    throw new EncryptedClassNotFoundException(name, e);
                } catch (InvalidKeyException e) {
                    throw new EncryptedClassNotFoundException(name, e);
                } catch (IOException e) {
                    throw new EncryptedClassNotFoundException(name, e);
                }
            }
        }

        // default loader
        try {
            return super.findClass(name);
        } catch (ClassNotFoundException e) {
            throw new EncryptedClassNotFoundException(name, e);
        }
    }

    private boolean isEncrypted(String className) {
        /// some things
    }
} 
```

但这不足以保护您的代码。至少，不要为两个用户使用相同的字节（你似乎这样做了）。并混淆你的代码（我使用 proguard）。这将保护您免受普通黑客的攻击，而不是最好的黑客。

# ios - 核心数据和“双重”属性不起作用。一个数字被转换成一个nan？

> ID：11137547
> 
> 赞同：0
> 
> 时间：2012-06-21T11:52:16.980
> 
> 标签：ios, core-data, double, nan

我对 Core Data 中的“双重”属性有一个奇怪的问题。我已经在这两行中隔离了问题：

```
newStrategy.order = 444.0; 
NSLog(@"Order is %f", newStrategy.order); 
```

该 NSLog 的输出是：

```
Order is nan 
```

newStrategy 类型是 'Strategy'，这是我在 Core Data 中定义的实体之一。'order' 属性声明为

```
@property (nonatomic) double order; 
```

在 Core Data 生成的文件中。

当然，保存数据时，“订单”不会存储为 444.0。奇怪的情况是我有其他核心数据实体（带有关联文件）使用类似的“订单”属性作为双精度数，它们在类似的操作中完全没有给我带来任何问题。

任何的想法？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:52:28.813

核心数据模型中的一些不一致是原因，因此重新创建属性会有所帮助。我在模型和 .h 文件中将它从“double”更改为“float”。然后，我又回到了“双重”，现在它正在工作。

# python - AttributeError：包装实例没有属性“长笛”

> ID：11137548
> 
> 赞同：0
> 
> 时间：2012-06-21T11:52:17.157
> 
> 标签：python, attributes

```
class Packagings:
    def _init_(self):
        self.length,self.deckle,self.tmp,self.flute,self.gsm,self.t_weight,self.weight

    def read_values(self):
        print """Select Type Of Paper
               1.3 Ply
               2.5 Ply
               3.7 Ply
               """
        self.type=input("Enter the type:")
        self.l=input("Enter Length:")
        self.b=input("Enter Breadth:")
        self.h=input("Enter Height:")
        self.flap=input("Enter Flap:")

    def ply_read_values(self):
        for i in range(0,3):
            self.flute[i]=input("Enter flute:")
            self.gsm[i]=input("Enter Gsm:")
            self.weight[i]=self.tmp*(flute[i]*gsm[i])
            self.t_weight=self.t_weight+self.weight[i]

    def do_calc(self):
        self.length=(2*self.l+2*self.b+self.flap)/1000
        self.deckle=(float(self.h+self.b))/1000
        self.tmp=self.length*self.deckle

    def print_value(self):
        print self.length
        print self.deckle
        print self.t_weight

#Main Function
obj=Packagings()
obj.read_values()
obj.do_calc()
obj.ply_read_values()
obj.print_value() 
```

尝试运行程序时出现以下错误：

```
Traceback (most recent call last):
  File "C:/Python27/packagings.py", line 41, in <module>
    obj.ply_read_values()
  File "C:/Python27/packagings.py", line 21, in ply_read_values
    self.flute[i]=input("Enter flute:")
AttributeError: Packagings instance has no attribute 'flute' 
```

在 python 程序中使用列表有什么特定的方法吗？我认为错误是由于我以错误的方式使用列表。你能通过代码告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T11:55:07.453

你想用这条线做什么？：

```
class Packagings:
    def _init_(self):      # first, I suppose you wanted to write __init__ as @larsmans noticed in comment
        self.length,self.deckle,self.tmp,self.flute,self.gsm,self.t_weight,self.weight 
```

如果你不影响他们做某事，那些成员就永远不会存在。

试试这个：

```
class Packagings:
    def __init__(self):
        self.length = 0
        self.deckle = 0.0
        self.tmp = 0.0
        self.flute = []
        self.gsm = []
        self.t_weight = 0
        self.weight = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:17:49.033

正如拉尔斯曼斯所说，你必须更换

```
def _init_(self): 
```

经过

```
def __init__(self): 
```

在您的代码中，永远不会调用 init，因此永远不会创建您的数组。

然后，查看 Cédric Julien 的帖子，了解如何正确创建您的属性

# html - 如何设置在 HTML5 中验证的 GWT 属性？

> ID：11137555
> 
> 赞同：1
> 
> 时间：2012-06-21T11:52:51.413
> 
> 标签：html, gwt

GWT 使用此代码设置语言环境（请参阅[文档](https://developers.google.com/web-toolkit/doc/latest/DevGuideI18nLocale#LocaleSpecifying)）：

```
<meta name="gwt:property" content="locale=ja_JP"> 
```

但是，不幸的是，此代码不能作为 HTML 5 验证。

W3C 验证器报告此错误消息：

> 元素元上属性名称的错误值 gwt:property：关键字 gwt:property 未注册。

有没有办法以符合 HTML 5 的方式在 GWT 主机页面中设置属性（例如语言环境）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T15:34:12.940

语言环境选择在您的 gwt 引导代码 (APPNAME.nocache.js) 中完成。因此，如果您不想破解 gwts 代码生成器，那么您只有参考文档中提到的两个选项（元标记/url 参数）。

但是报告的错误并不严重，也没有什么害处。所以我建议保持原样。

# iphone - 仅在设备测试时显示内存泄漏。不知道为什么。？

> ID：11137556
> 
> 赞同：0
> 
> 时间：2012-06-21T11:52:56.653
> 
> 标签：iphone, objective-c, ios, xcode, memory-leaks

![在此处输入图像描述](../Images/04808f9a79f0a410567e76240c3f87fc.png)

大家好，

在我的 iPhone 应用程序中，当我在显示这些错误的设备上运行它时。那么请告诉我这些会是App被拒绝的原因吗？

请告诉我，为什么会出现这些错误？

这是我正在使用的代码。请看一下：

```
NSMutableString* s = [[[NSMutableString alloc]init]autorelease];
[s appendString: @"<?xml version=\"1.0\" encoding=\"utf-8\"?>"];
[s appendFormat: @"<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns=\"%@\">", ns];
if(headers != nil && headers.count > 0) {
    [s appendString: @"<soap:Header>"];
    for(id key in [headers allKeys]) {
        if([[headers objectForKey: key] isMemberOfClass: [SoapNil class]]) {
            [s appendFormat: @"<%@ xsi:nil=\"true\"/>", key];
        } else {
            [s appendString:[Soap serializeHeader:headers forKey:key]];
        }
    }
    [s appendString: @"</soap:Header>"];
}
[s appendString: @"<soap:Body>"];
[s appendFormat: @"<%@>%@</%@>", method,[params stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"], method] ;
[s appendString: @"</soap:Body>"];
[s appendString: @"</soap:Envelope>"];
return s; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:55:53.553

我认为您创建了一个 NSMutableString。如果你不使用 ARC，你必须释放它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:59:50.737

```
NSMutableString* s = [[[NSMutableString alloc]init]autorelease];
[s appendString: @"<?xml version=\"1.0\" encoding=\"utf-8\"?>"];
[s appendFormat: @"<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns=\"%@\">", ns];
if(headers != nil && headers.count > 0) {
    [s appendString: @"<soap:Header>"];
    for(id key in [headers allKeys]) {
        if([[headers objectForKey: key] isMemberOfClass: [SoapNil class]]) {
            [s appendFormat: @"<%@ xsi:nil=\"true\"/>", key];
        } else {
            [s appendString:[Soap serializeHeader:headers forKey:key]];
        }
    }
    [s appendString: @"</soap:Header>"];
}
[s appendString: @"<soap:Body>"];
[s appendFormat: @"<%@>%@</%@>", method,[params stringByReplacingOccurrencesOfString:@"&" withString:@"&amp;"], method] ;
[s appendString: @"</soap:Body>"];
[s appendString: @"</soap:Envelope>"];
return s; 
```

这是我正在使用的代码。请看一下。

# javascript - 将输入转换为使用 jquery 链接回

> ID：11137573
> 
> 赞同：1
> 
> 时间：2012-06-21T11:53:56.780
> 
> 标签：javascript, jquery, jquery-ui

jQuery代码是：

```
$(document).ready(function () {
  $('.a0').click(function(){
    $('#url0,#url1').val($(this).text()).show();
    $(this).hide();
});

$('.a0 a').click(function(e){
   e.stopPropagation();
});

}); 
```

的HTML：

```
<div style="padding:0 !important">
    <div class="a0" style="padding: 0px ! important; display: none;">
        <a href="http://dasda.cas">dasda.cas</a>
    </div>
    <input type="text" value="dasda.cas" class="mandatory1" id="url1" style="" readonly="readonly">
</div> 
```

首先是链接，然后当我单击 div 时，它会转换为输入以进行编辑，然后当我单击它或选项卡需要再次转换为链接时。

更新： **我的需要是**：在编辑后将文本转换为链接。这是一个结帐表格，结帐的最后一步，所以我有即时编辑 ajax，默认情况下，它是一个带有隐藏输入的链接，你可以看到，我也需要在编辑后成为一个链接，因为在编辑它之后仍然是文本而不是链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T08:18:45.513

您可以尝试将文本框转换回链接

```
$('#url0,#url1').blur(function() {
    $(this).prev().show().find('a').attr(this.value);
    $(this).hide();
});
​ 
```

# csh - 如何从 csh 脚本中查找某个命令是否可用？

> ID：11137577
> 
> 赞同：0
> 
> 时间：2012-06-21T11:54:12.430
> 
> 标签：csh, tcsh

在 csh 脚本中，只有当某个命令可用时，我才需要执行某些操作。我想做类似的事情

```
if( _WHAT_TO_PUT_HERE_ ) then   # enter only if command "cmd" is in the path
   cmd ...
endif 
```

如何在 csh 或 tcsh 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T07:45:25.917

我想使用 where 命令可以解决您的问题

检查这个：

```
~/animesh >where grep
/bin/grep
/tools/cfr/bin/grep
~/animesh >where egrep
/bin/egrep
/tools/cfr/bin/egrep
~/animesh >where xgrep
~/animesh > 
```

因此，假设您正在尝试查找名为 my_cmd 的命令，请尝试以下代码：

```
if(`where my_cmd` != "") then
   my_cmd
endif 
```

# java - Jenkins 中的 PermGen 错误

> ID：11137578
> 
> 赞同：15
> 
> 时间：2012-06-21T11:54:13.117
> 
> 标签：java, tomcat, ubuntu, jenkins

我遇到过 Jenkins 失败的案例，但只有 Jenkins 重新部署（Jenkins 是 Tomcat 中的 webapp）有所帮助。即使是新作业也因 PermGen 空间错误而失败，但所有设置都很好（所有这些`-XX:PermSize`参数都可以）。关键是重新部署后，一切都像魅力一样。但这是一个苛刻的解决方案。我想知道，是否有一些选项可以回滚 Jenkins 状态。提前致谢。

**更新**：好的，对于那些可能面临类似情况的人，这就是我想出的。那些写过最好将 Jenkins 部署为 Tomcat 模块的人可能没有遇到任何类型的项目部署的问题（使用 Jenkins Deploy 插件或使用`tomcat-maven-plugin`Maven 中的`pom.xml`）。单独安装 Jenkins 时，我没有遇到我描述的任何问题。哇！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-21T13:57:41.937

*对 PermGen 空间错误真正*重要的一个设置是（它必须是这个）：

```
-XX:MaxPermSize=512m 
```

**一个**破折号，**两个**大 X，Big-M，Big-P，Big-S，无空格，以 meg 为单位的大小，**小写**m。如果你把它搞砸了，它将被忽略。在我看到的所有 PermGen 修复中，99% 的“不起作用”是因为有人没有严格按照说明进行操作，而是使用 Big-M 表示兆字节而不是 little-m，或者在前面放两个破折号而不是一个例子。

此外，512 兆只是一个起点...调整以适应您的系统。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T12:49:10.203

我曾经遇到过类似的错误：jenkins 正在执行 maven 构建，其中包括执行肯定的测试。我发现我使用的 maven 版本（V2 的东西）没有将我的 JVM 内存选项传递给 surefire 进程分支，因此一些测试失败了。MAVEN_OPTS、JAVA_OPTS，都没有工作。

我最终直接在 settings.xml 中传递了我的内存选项，并且 PermGen 错误消失了。

以下是我使用的选项（应用程序相当大）：

-Xms512m -Xmx1024m -XX:PermSize=512m -XX:MaxPermSize=1024m

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-21T13:44:18.933

完全未经测试的建议，但[这个答案](https://stackoverflow.com/a/88262/274466)建议`-XX:+CMSClassUnloadingEnabled -XX:+CMSPermGenSweepingEnabled`在启动 Tomcat 时使用（尽管在完全不同的上下文中出现问题）。然而，[这个答案](https://stackoverflow.com/a/3720052/274466)`CMSPermGenSweepingEnabled`表明这在 Java 6 上是不必要的，`-XX:+UseConcMarkSweepGC`必须使用`CMSClassUnloadingEnabled`它才能有效。

`-XX:+CMSClassUnloadingEnabled`假设底层问题是由在您的 Tomcat 实例的 PermGen 空间中不必要地维护类引起的，至少可以做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T12:03:37.890

也许这个问题可以帮助你：

[当它在 Windows 下作为服务启动时，如何给 Jenkins 更多的堆空间？](https://stackoverflow.com/questions/5936519/how-to-give-jenkins-more-heap-space-when-its-started-as-a-service-under-windows)

那里有一些非常好的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-16T11:05:26.537

我`PermGen`通过添加以下内容解决了 Linux 中的错误`jenkins.conf`：

```
wrapper.java.additional.4=-XX:PermSize=1024M 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-06T02:47:08.983

我发现撞到有`JRE`帮助`Java 8`。默认情况下，Jenkins 使用任务`JRE`调用的主文件夹下的`jenkins.xml`

# c# - windows phone - 文本框背景

> ID：11137579
> 
> 赞同：3
> 
> 时间：2012-06-21T11:54:13.630
> 
> 标签：c#, .net, windows-phone-7, textbox

我有`Textbox`蓝色`Background`和白色`Foreground`的。输入文本时，我的整体`Textbox`变成白色，我看不到我正在输入的内容，因为我在白色背景上写白色字母。写入即蓝色时如何更改文本框的背景？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T12:08:22.493

像这样将事件处理程序添加`GotFocus`到 TextBox。

```
private void TextBox_GotFocus(object sender, RoutedEventArgs e)
    {
        (sender as TextBox).Background = new SolidColorBrush(Colors.Blue);
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T14:55:54.900

一个更好的方法是直接在表达式混合中编辑焦点样式。本教程将为您提供帮助。

[http://www.windowsphonegeek.com/tips/wp7-textbox-light-theme-problems-the-solution](http://www.windowsphonegeek.com/tips/wp7-textbox-light-theme-problems-the-solution)

# php - MySQL 列的回显内容打印出“未定义”

> ID：11137581
> 
> 赞同：2
> 
> 时间：2012-06-21T11:54:28.600
> 
> 标签：php, mysql

我有一个以前从未遇到过的奇怪问题。

我`description`在 mysql 表中有一个名为`list_items`.

在某些行中，描述为空，而在某些行中则不是。格式是中文本，但是当我将其更改为类似 VARCHAR(1000) 时也会出现同样的问题。

这是一个简单的查询：

```
$result=mysql_query("select * from list_items where list_id='$id' order by position desc") or die(mysql_error());
while($iteminfo=mysql_fetch_assoc($result)){
    print_r($iteminfo);
} 
```

它给出了这样的东西：

```
Array ( 
  [id] => 85 [list_id] => 16 [position] => 4 
  [item] => How To Be Richer Smarter And Better Looking Than Your Parents 
  [voted_up] => 0 [voted_down] => 0 
  [small_image] => http://ecx.images-amazon.com/images/I/51tdjl56TwL._SL160_.jpg
  [large_image] => http://ecx.images-amazon.com/images/I/51tdjl56TwL.jpg 
  [asin] => 1591845440 [description] => undefined [author] => Zac Bissonnette 
  [publish_date] => 2012-04-24 [genre] => ) 
```

描述列始终为“未定义”，无论它是否为空。有任何想法吗？

表结构：

```
CREATE TABLE IF NOT EXISTS `list_items` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `list_id` int(11) NOT NULL,
  `position` int(11) NOT NULL,
  `item` varchar(512) NOT NULL,
  `voted_up` int(11) NOT NULL,
  `voted_down` int(11) NOT NULL,
  `small_image` varchar(128) NOT NULL,
  `large_image` varchar(128) NOT NULL,
  `asin` varchar(16) NOT NULL,
  `description` mediumtext NOT NULL,
  `author` varchar(128) NOT NULL,
  `publish_date` varchar(16) NOT NULL,
  `genre` varchar(128) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=107 ; 
```

var_dump 返回：

```
array(13) { ["id"]=> string(2) "87" ["list_id"]=> string(2) "16" ["position"]=> string(1) "2" ["item"]=> string(22) "Game Of Thrones Book 1" ["voted_up"]=> string(1) "1" ["voted_down"]=> string(1) "0" ["small_image"]=> string(61) "http://ecx.images-amazon.com/images/I/51VcGBtiLTL._SL160_.jpg" ["large_image"]=> string(53) "http://ecx.images-amazon.com/images/I/51VcGBtiLTL.jpg" ["asin"]=> string(10) "0553386794" ["description"]=> string(0) "" ["author"]=> string(18) "George R.R. Martin" ["publish_date"]=> string(10) "2011-03-22" ["genre"]=> string(0) "" } 
```

但`echo $iteminfo['description']`仍然给出'未定义'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:12:55.597

@robert，我将其作为答案发布，因此您可以接受并关闭它。您根本没有收到任何错误。“未定义”实际上是根据您导出并发送给我的数据的那些记录的“描述”字段的内容。

执行此操作的流氓记录的“ID”如下：**97、96、95、94、86、85、84，**按 desc 顺序排列。我想你或其他人早些时候填写了这个。此外，您应该查看上面的@bfavaretto 评论。我认为这可能是原因。

我的测试源代码如下所示：

```
<?php
   //@Author: ProfNoTime 062012 (Test Code - Not For Production Level Use)

   $conn = mysql_connect("localhost", "root", "");

   if (!$conn) { echo "Unable to connect to DB: " . mysql_error(); exit; }

   if (!mysql_select_db("test")) { echo "Unable to select mydbname: " . mysql_error(); exit; }

   $id = 1;
   $sqlQuery = "select * from list_items where list_id='$id' order by position desc";
   var_dump($sqlQuery);

   $result=mysql_query($sqlQuery) or die(mysql_error());

   if (!$result) { echo "Could not successfully run query ($sqlQuery) from DB: " . mysql_error(); exit; }
   else{
      if (mysql_num_rows($result) == 0) {
         echo "No rows found, nothing to print so am exiting...bye!"; exit;
      }
   else{
         while($iteminfo=mysql_fetch_assoc($result)){
           print_r($iteminfo);
           var_dump($iteminfo);
         }
      }
    }

   mysql_free_result($result); 
```

希望这可以帮助。

# java - 为什么重绘只画一条线？

> ID：11137585
> 
> 赞同：2
> 
> 时间：2012-06-21T11:54:57.530
> 
> 标签：java, swing

我在重绘期间绘制多条线时遇到问题。代码如下：

```
public void paintComponent(Graphics g){
    Graphics2D g2d = (Graphics2D) g;

    Map<Device, Device> devMap = matchEncDec();
    if(devMap != null){
        Iterator<?> it = devMap.entrySet().iterator();
        while(it.hasNext()){
            Map.Entry<Device, Device> pair =  (Entry<Device, Device>) it.next();
            it.remove();

            g2d.setColor(Color.BLUE);
            g2d.drawLine(pair.getKey().getLocationOnScreen().x + 150, pair.getKey().getLocationOnScreen().y, 
                    pair.getValue().getLocationOnScreen().x + 150, pair.getValue().getLocationOnScreen().y);

            g2d.drawLine(50, 50, 500, 550);
        }
    }
} 
```

它只为 HashMap 中的最后一对和我添加的测试线画线。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:03:56.423

**不要从迭代器中删除该对。**

```
it.remove(); 
```

如果它是一个临时的 hashmap，这是一个不必要的步骤，如果它是一个重用的 hashmap，这是一个关键问题。这将从基础哈希图中删除该项目。因此，如果`matchEncDec()`返回一个正在重用的 hashmap，您将只绘制每行一次，因为一旦绘制，该对将从 hashmap 中删除。

查看该`matchEncDec()`方法会很有帮助，但我只是检查您是否在每次调用时返回对相同哈希图的引用。如果是这样的话，那么这绝对是问题所在。

# linux - CVS linux服务器项目太多，服务器命令导致“argument list too long”

> ID：11137590
> 
> 赞同：3
> 
> 时间：2012-06-21T11:55:08.407
> 
> 标签：linux, configuration, cvs

我有一个 CVS 服务器，上面托管了数千个 CVS 存储库。它以典型配置运行，其中允许匿名 pserver 访问的项目使用`--allow-root`参数添加到 cvs 命令行。问题是，项目太多，现在 cvs 命令会导致`"argument list too long"`错误。

目前，我目前的解决方案是破解 CVS 源代码，将 CVS 命令行参数从`"--allow-root"`更改为`"--ar"`. 它有效，但有可能我会在某个时候再次超过命令行长度。

我使用`xargs`. 问题在于，它似乎必须为每个存储库运行 CVS 命令，一次一个，直到找到传入 CVS 命令中指定的命令。

我试图编写一个可以从传入的客户端命令行获取存储库名称的包装器，但我无法这样做。可能只是我缺乏知识，但我尝试了一段时间，找不到有效的方法。

我查看了`cvs-pserver`脚本，但它做同样的事情，将所有存储库放在命令行中。

我看了看`cvsd`，它也有同样的限制。

我正式没有想法。最优雅的解决方案是 cvs 包装器，它可以从传入的客户端命令中获取存储库名称。我很想看到这项工作，但任何有用的输入将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:22:31.763

在 Linux 内核 >= 2.6.23 中，此问题已得到[一定程度的解决](http://kernelnewbies.org/Linux_2_6_23#head-ae2a4a278f6bb0de179f59b3dfc3fbdb2b43bf01)。最大参数列表大小增加到最大堆栈大小的大约 25%。

在我的 Linux 64 位系统上，最大堆栈大小默认约为 8MB，为参数列表留下了大约 2MB 的空间。例如，每个 100 个字节允许大约 20,000 个程序参数。

由于您使用的是 2.6.18 内核，因此您应该考虑更新内核。这应该可以解决这个特定问题，并且您将获得更新内核的所有额外好处（和麻烦，我想）。

# c++ - EulerAngles 矩阵

> ID：11137591
> 
> 赞同：2
> 
> 时间：2012-06-21T11:55:10.807
> 
> 标签：c++, matrix-multiplication, opengl-3

我正在尝试从旋转矩阵中提取欧拉角。我的约定：矩阵列主要，坐标系右手，正角右手，旋转顺序 YXZ（第一个航向，然后是姿态，然后是银行）

我找到了这个，但不能使用它，因为他们使用其他轴顺序：（http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToEuler/index.htm）

```
/** this conversion uses conventions as described on page:
*   http://www.euclideanspace.com/maths/geometry/rotations/euler/index.htm
*   Coordinate System: right hand
*   Positive angle: right hand
*   Order of euler angles: heading first, then attitude, then bank
*   matrix row column ordering:
*   [m00 m01 m02]
*   [m10 m11 m12]
*   [m20 m21 m22]*/
public final void rotate(matrix  m) {
    // Assuming the angles are in radians.
    if (m.m10 > 0.998) { // singularity at north pole
        heading = Math.atan2(m.m02,m.m22);
        attitude = Math.PI/2;
        bank = 0;
        return;
    }
    if (m.m10 < -0.998) { // singularity at south pole
        heading = Math.atan2(m.m02,m.m22);
        attitude = -Math.PI/2;
        bank = 0;
        return;
    }
    heading = Math.atan2(-m.m20,m.m00);
    bank = Math.atan2(-m.m12,m.m11);
    attitude = Math.asin(m.m10);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T12:51:37.640

好的，我通过数学来解决这个问题。我拿了一张纸和一支笔，写了 3 个旋转矩阵（在我的例子中：X、Y、Z）。然后我按照我愿意旋转的顺序将它们相乘（在我的例子中：Y*X*Z）。

结果矩阵的其中一个值等于**-sinB**，即**B**第二次旋转。您可以根据该值计算**B**旋转。如果您继续查看矩阵，您还会注意到有两个值等于**sinA*cosB**和cosA* **cosB**，这两个值的除法简化了**cosB**导致**sinA/ cosA 与****tanA**相同，即**A**第一次旋转。您可以从该除法计算**A**旋转。同样，您会注意到**sinC*cosB**和**cosC*cosB**值。

最后，您需要考虑**cosB=0**的情况，即**B=90**或**B=-90**的情况，在这种情况下，您无法进行我之前所说的除法，因为您将除以零！因此，在这种情况下，您考虑**B=+-90 C=0**并从更简单的结果矩阵计算**A。**

所以这是我为我的约定编写的代码！！

```
/**
*   Matrix column-major
*   Coordinate System right-handed
*   Positive Angle right-handed
*   Rotation Order YXZ (first heading, then attitude, then bank)
*   [m00 m01 m02]
*   [m10 m11 m12]
*   [m20 m21 m22]
*/
public final void rotate(matrix  m) {
    // Assuming the angles are in radians.
    if ( m.m12 > 0.998 || m.m12 < -0.998 ) { // singularity at south or north pole
        heading = Math.atan2( -m.m20, m.m00 );
        bank = 0;
    } else {
        heading = Math.atan2( m.m02, m.m22 );
        bank = Math.atan2( m.m10, m.m11 );
    }
    attitude = Math.asin( m.m12 );
} 
```

# php - 如何将我的 www 域名转发到根域

> ID：11137596
> 
> 赞同：1
> 
> 时间：2012-06-21T11:55:27.657
> 
> 标签：php, web

我无权修改 htaccess 文件。我现在可以做些什么来将我的 www 域名转发到根域。

前任：

```
www.bulkanswer.com to bulkanswer.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:21:12.943

为了将所有请求重定向`www.example.com`到`example.com`，您需要进行一定数量的服务器配置（例如，.htaccess 修改）。通常，您会通过 .htaccess（或 httpd.conf）使用以下内容完成所有操作：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www\.example\.com$
RewriteRule ^(.*)$ http://example.com/$1 [R=301,QSA] 
```

那将重定向`http://www.example.com/anything`到`http://example.com/anything`.

使用 PHP 可以做到这一点，但为了做到这一点，您必须将服务器配置为将所有请求发送到给定的 PHP 文件，该文件将处理重定向。在 Apache 上，您可能会看到在复杂性方面与上面有些相似的配置，以及实际的 PHP 重定向。将所有请求发送到该 PHP 文件也可能会破坏您的网站。尽管如此，除非您的网站目前是这样设置的（我非常怀疑），否则很难重定向除您的索引页面等以外的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T23:23:25.953

You *can* do this in PHP, if you must, but if at all possible the htaccess route is much better. Here is some code which should do what you're after:

```
// Check if the current request has www in the server name
if (substr($_SERVER['SERVER_NAME'], 0, 3) === "www") {
   // Redirect required so ensure you use a 301
   header("HTTP/1.1 301 Moved Permanently");
   header("Location: http://example.com" . $_SERVER['REQUEST_URI']);
} 
```

It's very important you use the 301 so that the redirect is cached in the browser and you don't cause any issues by having competing domains with regards to your sites SEO.

A few notes: there may be a better way than using the REQUEST_URI depending on how your site is created, but this is a pretty simple solution that should work in most instances. There may be issues with sending forms that are then redirected (can't remember off the top of my head) so make sure all links in your own HTML are always pointing to the non-www version.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T22:39:18.687

如果你可以使用 PHP，你可以设置一个`location` [header](http://php.net/manual/en/function.header.php)。

```
$url = 'http://yourdomain.com';
header( 'Location: ' . $url ); 
```

您希望在通过例如`$_SERVER`var 检查非 www 的条件中执行此操作。

注意：如果您的根域重定向到 www，您将导致无限循环。

# datagrid - Dojo 数据网格未显示在取消选择的选项卡栏上

> ID：11137599
> 
> 赞同：0
> 
> 时间：2012-06-21T11:55:35.097
> 
> 标签：datagrid, dojo, tabbar

我有两个标签栏（dojox.mobile.TabBarButton），我在每个标签上放置了自定义小部件。在第二个选项卡上，小部件使用数据网格来显示 JSON 数据。这是我遇到问题的地方。数据网格的数据正在正确加载，并且 DOM 节点也已形成，但数据网格本身并未显示。然而，当我把它放在第一个标签上时，它会产生奇迹。这是我的 JS 代码。

```
var gridDataUrl = "gridData.json";
var params = {
    url: gridDataUrl,
    handleAs: "json"
};

var resultGridNode = this.resultGridNode;

dojo.xhrGet(params).then(function(response){
    var gridData = response;
    var data = {
        label: gridData.identifier,
        identifier: gridData.identifier,
        items: gridData.items
    };

    var store = new dojo.data.ItemFileReadStore({
        data: data
    });

    var dg = new dojox.grid.DataGrid({
        id: "grid",
        store: store,
        structure: gridData.structure
    }, resultGridNode);

    dg.resize();
    dg.startup();
}); 
```

自定义模板：

```
<div data-dojo-type="dijit.layout.BorderContainer" style="width: 100%; height: 100%">
    <div data-dojo-attach-point="resultGridNode" style="height: 600px; width: 400px">
    </div>
</div> 
```

我附加小部件的父模板：

```
<div id="tabView1" data-dojo-type="dojox.mobile.View" data-dojo-props="selected: true" style="height: 100%;">
    <h1 data-dojo-type="dojox.mobile.Heading">Result</h1>
    <div data-dojo-type="dojox.mobile.RoundRect" style="height: 100%" class="mblRoundRect">
        <div data-dojo-attach-point="resultgrid"></div>
    </div>
</div> 
```

经过调试，我发现问题可能是视图中的resize方法。当数据网格放在取消选择的标签栏上时，宽度和高度设置为0。显式调用resize方法没有任何效果。谁能给我一个线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:57:25.150

什么是标签栏，`dijit.layout.TabContainer`？

为什么网格在 a 中`dijit.layout.BorderContainer`？除非所有父 dom 节点的高度都为 100%，否则使用`BorderContainer`高度为 100% 的 a 将不起作用。我会删除它，看看它是否有效。

# iphone - 带有 ARC 的 MVC 模式

> ID：11137602
> 
> 赞同：2
> 
> 时间：2012-06-21T11:55:49.077
> 
> 标签：iphone, ios, model-view-controller, automatic-ref-counting

作为 iOS 的新手，我发现 ARC 迄今为止确实有助于快速开发。话虽如此，有一些警告我不确定 ARC 如何适合以前长期存在的 iOS 模式，例如 MVC。这是我试图描绘事物的方式，我将不胜感激任何澄清或更正我的理解。

我正在使用 Storyboard 为我的应用程序实例化和设置一些视图控制器。从我读过的文档中，当活动视图控制器转到不同的视图控制器时，发送视图控制器的实例变量会丢失（是吗？/否？）。因此，我使用模型层来存储应用程序的数据。现在在这里我的理解开始变得（更多）模糊..

假设我只有一个视图控制器正在使用模型数据对象。我从视图控制器（在 viewDidLoad 中）分配和实例化数据对象。所以现在我从我的控制器中引用了数据对象，当控制器在前台时，可以自由地协调从视图到控制器，可能到数据对象，再到控制器的信息，以使用更新视图MVC 模式。嗯不错..

但是当我转到不同的视图控制器时，发送者控制器的实例变量会丢失，因此对数据对象的唯一引用也会丢失。那么ARC是否也会自动释放数据对象？

我的目标是能够为特定的视图控制器保存数据，这样当我返回它时，我可以用保存的状态更新它。这是如何在 iOS 中使用 MVC 和 ARC 完成的？我想到的选项（记住，我是新人，哈哈）

1.  在 Application Delegate 中包含对数据对象的引用。它不会去任何地方，所以对数据对象的引用也不会。这个好精确吗？
2.  将所有数据以静态形式存储在数据类对象中？
3.  使用 NSUserDefaults

任何建议将不胜感激。谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:04:39.697

例如，如果您使用的是 push 或 modal segue，则*不会*释放前一个视图的视图控制器。如果您收到一个`didReceiveMemoryWarning`，视图本身可能会被释放，但控制器不会。您的控制器的 ivars 将被保留，因此当辅助视图控制器弹出（或关闭）时，您的原始 ivars 将与以前一样。

# c++ - boost::interprocess 如何在另一个进程的共享内存中找到包含数据的容器

> ID：11137605
> 
> 赞同：1
> 
> 时间：2012-06-21T11:55:55.827
> 
> 标签：c++, boost

我正在学习 boost::interprocess 。[boost 文档](http://www.boost.org/doc/libs/1_49_0/doc/html/interprocess/allocators_containers.html#interprocess.allocators_containers.allocator_introduction)中显示的示例描述了如何在共享内存中创建容器的两种方法：通过使用完全在共享内存中构建它，`myManagedSharedMemSegement.construct<..>(..)(..)`或者通过使用自定义分配器在本地内存中创建容器，该分配器将内部数据放入共享内存中。如示例中所示，此字符串数据将存在于共享内存中，但字符串本身不会：

```
using namespace boost::interprocess;

typedef allocator<char, managed_shared_memory::segment_manager>
      CharAllocator;
typedef basic_string<char, std::char_traits<char>, CharAllocator>
      MyShmString;

managed_shared_memory shm(create_only, "MySharedMemory", 10000);

CharAllocator charallocator  (shm.get_segment_manager());

MyShmString mystring(charallocator);
mystring = "this is my text"; 
```

到目前为止我无法弄清楚的是如何使用来自共享内存的字符串数据在另一个进程中创建一个字符串对象。有没有合理的方法可以做到这一点，还是建议将整个容器放在共享内存中？

# jquery - wijmo 弹出式日历

> ID：11137606
> 
> 赞同：1
> 
> 时间：2012-06-21T11:56:00.913
> 
> 标签：jquery, html, wijmo

嗨，我正在使用 wijmo 弹出日历。

我设法通过使用自动选择日期

```
$("#to-calendar").wijcalendar("selectDate", "March 14, 2012"); 
```

问题是日历默认显示当前月份。是否有自动更改日历的月/年视图？

我搜索了 wijmo 网站和文档，但很难找到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:02:41.533

啊想通了，还需要添加：displayDate：

```
$("#to-calendar").wijcalendar(
            {
                popupMode: true,
                showOtherMonthDays: false,
                displayDate: new Date('2010/08/25')

            }); 
```

# c# - 通过拦截回发来清理用户输入 - 全局 - ASP.Net 3.5 C#

> ID：11137609
> 
> 赞同：0
> 
> 时间：2012-06-21T11:56:07.197
> 
> 标签：c#, asp.net, .net-3.5, master-pages, postback

我有一个现有的项目，所以我需要一种可靠的方法来全局清理/检查用户输入。

我有一个带有`form`标签的母版页（父），“子”页包含带有回发命令的表单元素，插入/更新/删除到数据库等。

**仅使用 C# - 是否有某种方法可以在帖子通过子页面运行之前全局拦截回发？**

**是否可以检查它是否是文本框/复选框/单选按钮等以不同方式操作用户输入的清理？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:44:21.523

这就是我为使其正常工作所做的。

*   覆盖我的 MasterPage 上的 OnInit 事件

*   为我的 Request 集合禁用 ReadOnly 以便它是可设置的。

*   循环通过 Posted .Net 控件，清理值并设置新值。

*   重新启用只读。

**在全球范围内工作得很好，为我节省了几天的体力劳动:)**

```
protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);

        if (IsPostBack)
        {
            var fCollection = (NameValueCollection)Request.GetType().GetField("_form", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(Request);
            PropertyInfo oReadable = fCollection.GetType().GetProperty("IsReadOnly", BindingFlags.NonPublic | BindingFlags.Instance);
            oReadable.SetValue(fCollection, false, null);

            foreach (string s in Request.Params.Keys)
            {
                var pCtrl = Page.FindControl(s);

                //Sanitize the posted values (TextHandler.SimpleSanitize is my own static method)
                if (pCtrl != null) fCollection[s] = TextHandler.SimpleSanitize(fCollection[s]);
            }

            oReadable.SetValue(fCollection, true, null);

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:34:42.210

您可以使用处理 context.BeginRequest 事件的自定义 IHttpModule 来做一些事情。

```
public class MyHttpModule : IHttpModule
{
    public void Init(HttpApplication context)
    {
        context.BeginRequest += new EventHandler(OnBeginRequest);
    }

    protected void OnBeginRequest(object sender, EventArgs e)
    {
        var context = ((HttpApplication) sender).Context;
        // do something here, use the context to get request info
    }

    public void Dispose()
    {
    }
} 
```

您必须在 web.config 中注册 HttpModule，例如：

```
<httpModules>
  <add name="MyHttpModule" type="MyProject.MyNamespace.MyHttpModule, MyProject"/>
</httpModules> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-21T12:18:08.300

只需在您的 MasterPage 标记中添加 Jquery 函数，它将拦截您需要的所有事件并执行您需要的操作。为了捕获只需要控件，您可以应用 css 类

# javascript - jQuery UI datepicker：将 6 个月添加到另一个 datepicker

> ID：11137616
> 
> 赞同：6
> 
> 时间：2012-06-21T11:56:40.540
> 
> 标签：javascript, jquery, jquery-ui, date, jquery-ui-datepicker

我有两个日期选择器日历，一个用于开始日期，另一个用于结束日期。

我想要的是动态设置第二个日期选择器的 defaultDate 比第一个日期晚六个月，当第一个日期被选中时。

我知道如何将第一个日期报告给第二个日期选择器，但我不知道如何将六个月添加到第一个日期然后将其添加为第二个日期选择器的默认日期

这是我的代码：

```
$(".firstcal").datepicker({
    dateFormat: "dd/mm/yy",
    onSelect: function (dateText, inst) {
        var date = $.datepicker.parseDate('dd/mm/yy', dateText);
        var $sec_date = $(".secondcal");
        $sec_date.datepicker("option", "defaultDate", date);
    }
});
$(".secondcal").datepicker({
    dateFormat: "dd/mm/yy"
}); 
```

非常感谢你的帮助

编辑：

在 datePicker 中，存在添加六个月到日期的函数：它被标记为“+6M”。我只想将“+6M”添加到第一个日期并将其作为默认日期发送到第二个日期。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T13:57:23.510

1.  将选定的日期字符串解析为 JavaScript 日期对象。
2.  使用`Date.getMonth()`和`Date.setMonth()`更改月份。如有必要，后一个功能会自动增加/减少年份。
3.  使用 jQuery datepicker 的[`setDate`](http://jqueryui.com/demos/datepicker/#method-setDate)方法来更改第二个 datepicker 的日期（设置`defaultDate`不会给你想要的结果）。

```
onSelect: function(dateText, instance) {
    date = $.datepicker.parseDate(instance.settings.dateFormat, dateText, instance.settings);
    date.setMonth(date.getMonth() + 6);
    $(".secondcal").datepicker("setDate", date);
} 
```

[**演示在这里**](http://jsfiddle.net/salman/XtbYz/2/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T13:20:47.660

将 6 个月添加到日期

```
 var second_date = new Date(date);
 second_date.setMonth(second_date.getMonth()+6); //+6 is however many months 
```

然后更新值

```
$("#secondcal").val(second_date);  //It is probably better to work with ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:05:51.733

这是我用来将第二个对话框的最大日期设置为比第一个晚一个月的代码。所以你只需设置默认日期

```
 var beginsDate=$('#dlg_begins').datepicker('getDate');
   var monthMillisec=30*24*60*60*1000;
   var maxDate=new Date();
   maxDate.setTime( beginsDate.getTime() + monthMillisec );

   $('#dlg_expires').datepicker('option',
   {
       'maxDate':maxDate,
       'minDate':beginsDate
   }); 
```

# jquery - IE8鼠标悬停后图片一直显示

> ID：11137620
> 
> 赞同：0
> 
> 时间：2012-06-21T11:56:48.810
> 
> 标签：jquery, css, internet-explorer-8, mouseenter, mouseleave

我有一个具有 mouseover jquery 功能的图像：

```
$(document).ready(function ()) {
    mouseenter: function () {
        $(this).children('.item_450_description').stop().fadeTo(500, 1);
    },
    mouseleave: function () {
        $(this).children('.item_450_description').stop().fadeTo(500, 0);
    }
}); 
```

当您使用鼠标光标输入图像时，会显示说明。描述包含图像和文本：

```
<div class="item_450_image">
    <a class="item_popup" href="popup.php?id=1?>"><img src="pic.jpg" class="img_450" /></a>
    <div class="item_450_description">
        <p class="title">Title</p>
        <p class="poster">by poster</p>
        <div class="item_poster">
            <img src="user.jpg" class="img_poster" />
        </div>
    </div>
</div> 
```

当您用光标离开图像时，描述就会消失。这在 IE9、Chrome、Safari 和 Firefox 中运行良好。但是当我在 IE8 中尝试时，我遇到了问题。

当我用光标输入图像时，会显示描述（包括图像和文本）。但是当我用光标离开图像时，描述和文本都消失了。但是描述中的图像一直存在并且不会消失。

我怎么解决这个问题？

（附加CSS）

```
.item_450_image {
    text - align: left;
    position: relative;
    width: 450px;
    border - top: 1px solid#cdcdcd; - webkit - border - radius: 5px; - moz - border - radius: 5px;
    border - radius: 5px;
    margin - left: 5px;
    padding: 4px 4px 2px 4px;
    background - color: #efefef;
    box - shadow: 0 1px 3px rgba(0, 0, 0, 0.5); - moz - box - shadow: 0 1px 3px rgba(0, 0, 0, 0.5); - webkit - box - shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
}

.img_450 {
    width: 450px;
}

.item_450_description {
    position: absolute;
    bottom: 5px;
    left: 4px;
    width: 450px;
    display: none;
    background: url('../img/items/bg_description.png');
    padding: 5px 0px 5px 0px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:00:30.173

添加 z-index:-1; （或减去某些东西）属性以在鼠标离开时成像，当鼠标再次进入时将其更改为 0（或某个大数字）。

# c# - 来自 jquery 代码的 asp.net make 函数

> ID：11137621
> 
> 赞同：3
> 
> 时间：2012-06-21T11:56:53.350
> 
> 标签：c#, javascript, jquery, asp.net, qtip

我正在为我的工具提示使用 Qtip jquery 插件，因为我有很多需要这个的项目，所以我不想为每个项目手动执行它，反正编码不好。

这是JS代码：

```
$('#<%= textlink.ClientID %>').qtip({               
    position: { 
          corner: {
                      target: 'topRight', 
                      tooltip: 'bottomLeft'
            }
              },                                    
        style:{ 
            name: 'dark',
            tip: 'bottomLeft',
            border:
              {
            width: 3,
            radius: 7
        }
    } 
}); 
```

和

```
<asp:LinkButton ID="textlink" runat="server" Text="some text" ToolTip="some other text"></asp:LinkButton> 
```

我将有很多链接按钮对象，那么如何从上面的 JS 代码创建一个函数并在鼠标悬停链接按钮操作时调用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T11:59:26.340

做这个：

```
<asp:LinkButton cssClass="qTip" ID="textlink" runat="server" Text="some text" ToolTip="some other text"></asp:LinkButton>

$('.qTip').qtip({               
    position: { 
          corner: {
                      target: 'topRight', 
                      tooltip: 'bottomLeft'
            }
              },                                    
        style:{ 
            name: 'dark',
            tip: 'bottomLeft',
            border:
              {
            width: 3,
            radius: 7
        }
    } 
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T11:58:04.130

在 jQuery上放置一个类`LinkButton`并使用类选择器

```
<asp:LinkButton ID="textlink" cssClass="qtip" runat="server" Text="some text" ToolTip="some other text"></asp:LinkButton> 
```

```
$('.qtip').qtip({               
    //...
}); 
```

# php - 回显带有变量的数组编号

> ID：11137623
> 
> 赞同：0
> 
> 时间：2012-06-21T11:57:03.787
> 
> 标签：php, arrays, vimeo

我从 json 文件创建了一个数组，可以很好地调用缩略图/标题。

```
<?php
$file_contents = file_get_contents("http://vimeo.com/api/v2/username/videos.json");
    $data = json_decode($file_contents);
    $image= $data[0]->{'thumbnail_large'};
    $title= $data[1]->{'title'};
    ?>

    <?php
   echo '<img src="'.$image.'"/>';
       echo $title; 
    ?> 
```

但是我想用 $image 回显数组编号，这样我就不必为每个缩略图或标题创建多个变量，即 $image1 $image2 等。

下面是上面代码的一个版本，我用 $num 来说明我的意思。

```
<?php
    $file_contents = file_get_contents("http://vimeo.com/api/v2/olouali/videos.json");
    $data = json_decode($file_contents);
    $image[$num]= $data[$num]->{'thumbnail_large'};
    ?>

    <?php 
    echo '<img src="'.$image[$num].'"/>';
            ?> 
```

我不确定这是否是我正在尝试创建的正确方法，因为我仍在学习 php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:01:56.417

尝试这个：

```
<?php
$file_contents = file_get_contents("http://vimeo.com/api/v2/olouali/videos.json");
$data = json_decode($file_contents);

$count = count($data);
for($i = 0; $i < $count; $i++) {
    echo '<img src="'.$data[$i]->{'thumbnail_large'}.'"/>';
} 
```

# c# - 将大文件发布到 Dropbox

> ID：11137624
> 
> 赞同：4
> 
> 时间：2012-06-21T11:57:04.287
> 
> 标签：c#, dropbox, spring.net, spring-social

有没有办法使用 Spring Social 库将大文件（>150MB）发布到 Dropbox 服务？我总是收到连接错误：

> WebException：底层连接已关闭：连接意外关闭）如果我尝试上传大文件。

这是一个 Windows 窗体应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:12:06.657

不，Spring Social 使用[DropBox REST API](https://www.dropbox.com/developers/reference/api)。

对于使用 REST API 的所有客户端，上传文件有 150MB 的限制。如果您想上传更大的文件，您必须通过 Dropbox 桌面应用程序进行。

您可以在 Dropbox REST API SDK 中找到它：

*   [上传文件（PUT）](https://www.dropbox.com/developers/reference/api#files_put)（在注释下）

据我从 Spring Social 实现中可以看出，它确实是基于 REST 的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-14T09:59:59.007

要使用 Dropbox REST API 上传大于 150 MB 的文件，我们可以使用“上传会话”。根据文档：-

> 上传会话允许您在一个或多个请求中上传单个文件，例如文件大小大于 150 MB 的情况。此调用使用给定数据启动新的上传会话。然后，您可以使用 upload_session/append:2 添加更多数据并使用 upload_session/finish 将所有数据保存到 Dropbox 中的文件中。单个请求不应上传超过 150 MB。可以上传到上传会话的文件的最大大小为 350 GB。

检查以下链接以获得清晰的理解

[https://www.dropbox.com/developers/documentation/http/documentation#files-upload_session-start](https://www.dropbox.com/developers/documentation/http/documentation#files-upload_session-start)

# php - PHP - 显示 404 错误而不重定向到另一个页面

> ID：11137625
> 
> 赞同：15
> 
> 时间：2012-06-21T11:57:06.750
> 
> 标签：php, custom-error-pages

如果用户访问存在但我不希望他/她看到的页面，我想显示 404 错误。

我不想进行重定向（这会导致地址栏在地址栏中显示错误页面的链接），如下所示：

```
if ($this_page_should_not_be_seen)
   header("Location: err.php?e=404"); 
```

相反，如果浏览器地址中的 URL 没有更改，看起来该页面确实不存在。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-21T11:59:43.857

在当前页面中包含错误页面并发送 404 错误状态代码：

```
<?php
if ($nobody_should_ever_be_here) {
  header('HTTP/1.1 404 Not Found'); //This may be put inside err.php instead
  $_GET['e'] = 404; //Set the variable for the error code (you cannot have a
                    // querystring in an include directive).
  include 'err.php';
  exit; //Do not do any more work in this script.
}
?> 
```

请注意，如果该页面永远不可见，则应使用此选项。未经授权的访问（如果某些登录用户应该看到该页面）的更好状态代码是 403（未授权）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-21T11:59:12.847

您可以通过编程方式实现 404（或任何其他 HTTP 响应代码）

```
header('HTTP/1.0 404 Not Found');
die; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-29T07:18:24.760

根据我的经验，在不更改 URL 的情况下显示 404 错误文档的最佳方法是在 apaches`.htaccess`文件中定义错误文档：

```
RewriteEngine on
RewriteBase /

# Defines 404 error pages content:
ErrorDocument 404 /my_root/errors/404.html

# for all invalid links (non existing files):
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* - [L,R=404]

# for some valid links (existing files to be un-accessible):
RewriteCond %{THE_REQUEST} ^.*some_file.php.*$ [NC]
RewriteRule .* - [L,R=404] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T12:02:55.580

你写的让我们很难理解。

> 如果他/她到达我不希望他/她到达的页面，我想将任何传入用户重定向到 404 错误页面。

那么，一个人到达一个存在的页面？

例如，如果此人访问了他/她不应该看到的受保护页面。使用标头是最好的方法。您的选择是回显元刷新或 javascript，但标题更清晰。你可以展示一些`You do not have permission to do that!`在网络上很常见的东西。如果您不想重定向，可以通过标题显示 404“假消息”。

如果您正在谈论某人到达 404 页面，一个不存在的文件，您唯一的选择是使用 .htaccess

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-30T20:51:40.090

您可以直接访问您的 404 页面吗？

header('位置：[http](http://www.website.com/errors/404.php) ://www.website.com/errors/404.php ');

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-05T13:50:56.880

*对于单个页面*，这些都是重定向到 404 错误的绝佳答案。 这是一个解决方案，可让您测试条件并重定向*站点上的任何脚本。*

编写一个`.htaccess`文件，使用重写规则，并使用`[QSA,NC,L]`来维护页面位置和标题 post/get 参数......

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php [QSA,NC,L] 
```

这将导致每个页面都重定向到`./index.php`（如果您已经在使用，请随意重命名`index.php`）。URL 不会更改。然后，在 中`index.php`，检查一些条件，如果通过，则包含`$_SERVER`指示脚本的变量，否则，执行自定义 404。这意味着您可以简单地控制异常处理`index.php`...

```
$someNon404Condition = file_exists($_SERVER['PHP_SELF']);
if ($someNon404Condition) {
    include($_SERVER['PHP_SELF']);   // do the stuff
} else {
    print("404!  Why are you trying to access " . $_SERVER['PHP_SELF'] . "?");
} 
```

这也可以让你做很多其他的事情！忘记静态 404.html 页面，使用动态页面，您可以...

*   您的情况可以像您编写的代码一样复杂：检查身份验证，检查永久重定向，也许您想自动使内容过期？等等等等。
*   在您的数据库中搜索`explode('/', $_SERVER['PHP_SELF'])`，然后在标题“也许这就是您要找的东西？”下显示这些匹配结果的列表。
*   响应用户级事件：是不是因为页面被移动了 404？然后处理重定向。404 是不是因为版主删除了它并且是用户的帖子？告诉用户版主删除了他们的帖子。等等等等。
*   做API调用、动态代码等等等等，可能性是有的。

# objective-c - 目标 Zip 问题入门

> ID：11137629
> 
> 赞同：0
> 
> 时间：2012-06-21T11:57:13.067
> 
> 标签：objective-c, ios, zip

我正在尝试在 IOS4 应用程序中使用目标 zip (v1.01e)，因为我希望能够通过电子邮件发送受密码保护的 zip 文件。

我在我的应用程序中获得了目标 zip 源代码文件，但在遵循此入门指南后遇到了一些问题。[http://code.google.com/p/objective-zip/wiki/GettingStarted](http://code.google.com/p/objective-zip/wiki/GettingStarted)

我使用以下命令

```
ZipFile *zipFile= [[ZipFile alloc] initWithFileName:@"yourFiles.zip" mode:ZipFileModeCreate]; 
```

但这总是无法通过下面显示的代码从方法 zipOpen2（第 507 行）返回 null。这里：

```
if (ziinit.filestream == NULL)
        return NULL; 
```

在堆栈跟踪之后，它通过以下方法：

```
//First
- (id) initWithFileName:(NSString *)fileName mode:(ZipFileMode)mode 

//Second
extern zipFile ZEXPORT zipOpen (pathname, append)

//Third
extern zipFile ZEXPORT zipOpen2 (pathname, append, globalcomment, pzlib_filefunc_def) 
```

但是，我注意到第二种方法有这个代码。

```
extern zipFile ZEXPORT zipOpen (pathname, append)
    const char *pathname;
    int append;
{
    return zipOpen2(pathname,append,NULL,NULL);
} 
```

当我从这个方法查询字符串路径名（在 GDB 中）的值时，我得到：

0x1b7f30 似乎没有指向有效对象。

所以我的问题：

1.  是`const char *pathname`什么，它做了什么，它是否弄乱了路径名？AFAIK char 是一个不能代表文件名的单个字符？
2.  显示的代码来自目标 zip 项目的源代码，而不是我自己的，所以我假设它可以工作。这可能是我对它的误解。那么还有哪些其他可能的原因会导致这个问题呢？

有关更多信息`initWithFileName:`，请获取参数文件名并通过`zipOpen()`创建指向文件名的指针将其传递给，如下所示。

```
_fileName = [fileName retain]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:06:16.257

我已经[将打开的文件追溯到 fopen](http://code.google.com/p/objective-zip/source/browse/trunk/Objective-Zip/MiniZip/ioapi.c#85)，这是个好消息，因为现在您可以[找出错误使用的是什么`errno`](http://www.cplusplus.com/reference/clibrary/cstring/strerror/)。在你告诉我们`errno`你得到了什么之前，我只能猜测问题出在哪里。但是，如果我猜的话，我会说它失败了，因为您没有正确的权限来写入该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T09:54:35.320

最终我设法解决了这个问题。问题是因为我没有将应用程序的文档目录位置附加到文件名的开头。

一旦我这样做了，一切都很好。

# hosting - 我在 hostgator 上的子域不工作

> ID：11137631
> 
> 赞同：5
> 
> 时间：2012-06-21T11:57:19.637
> 
> 标签：hosting, subdomain, web-hosting

我们在 HostGator 上托管我们的主域，我们最近在主域上创建了具有以下格式的子域：SubDomainName.PrimarySiteName.com

我可以通过cPanel打开子域文件，并且每个子域应该从中获取内容的文件夹是正确的。但是当我们尝试在浏览器中打开子域时，我们会收到以下错误：“找不到服务器”。从我们创建子域到现在已经一个多月了。此外，子域有时会在一台计算机上打开，但不是在另一台计算机上。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-03-12T01:11:37.990

通过 Host Gator 为您的帐户使用 CPanel，只需单击“**简单 DNS 区域编辑器**”，然后最后为子域添加一个“ **A 名称**”。您的“ **A Name** ”将是您完整的子域 URL。**示例： subdomain.yourmaindomain.com**并添加**主域的 IP 地址**。

我遇到了这个问题，并且能够通过简单地添加单个 A Name 记录来解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-23T15:44:01.537

创建子域后，主机通常会为您创建 DNS 记录。最有可能的是，您只需要等待几个小时，子域就会变得可用。

但是，您可以同时使用以下方法之一访问您的子域：

[http://ipaddress/~username/subfolder/](http://ipaddress/~username/subfolder/) -或- [http://servername/~username/subfolder/](http://servername/~username/subfolder/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-09T21:22:19.443

Hostgator 文档中有一个错误。

如果您将 Hostgator 用于 DNS，当您在 cpanel 中使用 create subdomain 命令时，它会自动为新子域完全设置 DNS。您甚至不必使用 Hostgator 作为您的注册商，只要您的注册商的名称服务器条目指向您的 Hostgator 名称服务器，即 Hostgator cpanel 屏幕上显示的名称服务器。

文档错误涉及使用 cpanel create subdomain 命令时要填写的 Document Root 字段，当子域文件托管在与主域相同的 hostgator 帐户中时，需要填写该字段。在 hostgator 文档中，文档根目录的示例是“/public_html/blog1”作为放置新子域“blog1”文件的示例位置。这是不正确的 - 您在 cpanel 子域命令中为新子域输入的文档根目录不得以 SLASH 开头。删除斜线并使用“public_html/blog1”（或任何你想将文件放在 public_html 中的地方），它就可以工作了。

此外，只要您的主站点已经设置好，就不会延迟。当您正确输入 create subdomain 命令时，它会在此时进入 hostgator DNS，并且 Internet 已经将 hostgator 名称服务器作为您的域名的权威名称服务器。因此，您不必等待几天甚至几个小时。有时您必须刷新浏览器缓存。

祝你好运，给你更多的子域！

# caching - 如何告诉 joomla 使用 HTTP 标头而不是 HTML 元标记进行缓存

> ID：11137635
> 
> 赞同：0
> 
> 时间：2012-06-21T11:57:45.957
> 
> 标签：caching, joomla

我在 Joomla 中有一个网站，有些页面可以缓存一段时间。

我在 HTML 中看到元标记：

```
<meta http-equiv="expires" content="Fri, 29 Jun 2012 11:24:54 GMT" />
<meta http-equiv="cache-control" content="public" /> 
```

但我的 CDN 只支持 HTTP 标头缓存。

```
Expires: Fri, 29 Jun 2012 11:24:54 GMT 
```

如何告诉 Joomla 使用 HTTP 标头而不是响应正文中的元标记进行缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T10:11:52.737

经过一番挖掘，我决定最好修改我正在使用的模板。

而不是写

```
$ExpStr = gmdate("D, d M Y H:i:s", time() + $offset) . " GMT"; 
```

其次是

```
<meta http-equiv="expires" content="<?php echo $ExpStr ; ?>" />
<meta http-equiv="cache-control" content="public" /> 
```

我将其修改为

```
$ExpStr = gmdate("D, d M Y H:i:s", time() + $offset) . " GMT";
JResponse::allowCache(TRUE);
JResponse::setHeader( 'Expires', $ExpStr.' GMT' ,true); 
```

这似乎工作

我在以下位置找到了这个提示：[http ://www.teachmejoomla.net/code/joomla-1.5/joomla-1.5-enabling-google-and-browser-cache.html](http://www.teachmejoomla.net/code/joomla-1.5/joomla-1.5-enabling-google-and-browser-cache.html)

但是，我希望有一些 Joomla API 用于配置要使用的实现。像 Rails 中的会话（最知名）以及是否将其保存在 cookie 或 DB 中。

# excel - 我可以在不更改样式的情况下清除单元格内容吗？

> ID：11137636
> 
> 赞同：24
> 
> 时间：2012-06-21T11:57:53.397
> 
> 标签：excel, vba

有没有办法清除多个单元格的内容，但不改变单元格的背景/字体属性？

我目前正在使用`Range("X").Cells.Clear`，但它删除了我的背景颜色，我不想在每次清除时都“重新绘制”它。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-21T12:02:30.250

如果要清除内容但保留格式，则应使用[ClearContents方法。](http://msdn.microsoft.com/en-us/library/bb178828%28v=office.12%29.aspx)

```
Worksheets("Sheet1").Range("A1:G37").ClearContents 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-21T12:38:40.510

您可以使用[ClearContents](http://msdn.microsoft.com/en-us/library/aa223828%28v=office.11%29.aspx)。前任，

```
Range("X").Cells.ClearContents 
```

# ios - 响应选择器但抛出错误

> ID：11137641
> 
> 赞同：0
> 
> 时间：2012-06-21T11:58:16.170
> 
> 标签：ios, objective-c, grand-central-dispatch, nsoperationqueue

```
- (void)TargetHit:(int)target{

    void (^threadBlock)(void) = ^{
        NSLog(@"respond to selector %d", [self respondsToSelector:@selector(changeImageOfTarget:)]);

        [[NSOperationQueue mainQueue] performSelectorOnMainThread:@selector(changeImageOfTarget:) withObject:[NSNumber numberWithInt:target] waitUntilDone:YES];
        [NSThread sleepForTimeInterval:1.0]; 
        [[NSOperationQueue mainQueue] performSelectorOnMainThread:@selector(changeImageOfTarget:) withObject:[NSNumber numberWithInt:target] waitUntilDone:YES];
    };

    dispatch_async(dispatch_queue_create(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), threadBlock);
} 
```

我可以理解为什么我的代码返回`YES`以响应选择器，但是当我尝试执行它时，我收到一条错误消息并且应用程序崩溃。

```
[NSOperationQueue changeImageOfTarget:]: unrecognized selector sent to instance 0x6a39810' 
```

这也是一样的

```
 [[NSThread currentThread] performSelectorOnMainThread:@selector(changeImageOfTarget:) withObject:[NSNumber numberWithInt:target] waitUntilDone:YES]; 
```

我如何能够执行方法或`@selector`在主线程上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T12:00:46.307

`self`可能会响应选择器。问题是`[NSOperationQueue mainQueue]`事实并非如此。

> 我如何能够在主线程上执行方法或 @selector？

只需在要执行操作的对象上调用它：

```
[self performSelectorOnMainThread:@selector(changeImageOfTarget:) withObject:[NSNumber numberWithInt:target] waitUntilDone:YES]; 
```

# php - 代码含义和说明

> ID：11137642
> 
> 赞同：0
> 
> 时间：2012-06-21T11:58:19.637
> 
> 标签：php

> **可能重复：**
> [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)

我有一段我不明白的 PHP 代码。

```
private $request;

    public function checkForConfigRequest($observer) {
        $this->request = $observer->getEvent()->getData('front')->getRequest();
        if($this->request->{self::FLAG_SHOW_CONFIG} === 'true'){
            $this->setHeader();
            $this->outputConfig();
        }
    } 
```

这是我感到困惑的一行：

```
if($this->request->{self::FLAG_SHOW_CONFIG} === 'true') 
```

我没有在“->”之后使用“{”，而“self::”指的是什么？

如果有人帮助我理解语法，我将不胜感激，这样我以后可以自己编写相同的代码。可以随意向我指出外部参考

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:00:44.167

假设 self::FLAG_SHOW_CONFIG = 'foo'; 在这种情况下

`$this->request->{self::FLAG_SHOW_CONFIG}`

方法

`$this->request->foo`

更多信息在这里[http://www.php.net/manual/en/language.variables.variable.php](http://www.php.net/manual/en/language.variables.variable.php)。

# objective-c - 信号 SIGABRT xcode

> ID：11137643
> 
> 赞同：0
> 
> 时间：2012-06-21T11:58:23.193
> 
> 标签：objective-c, ios, xcode

我有一个网格，当我单击我的正方形时，我的网格内部有 52 个正方形作为按钮，我应该转到另一个页面，但我的进程已终止，我不知道为什么？

你能帮帮我吗？

提前致谢！

**听说是我的 YearView 页面（这里有 52 个正方形）**

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.
int rows = 13, columns = 4;
UIView *buttonView = [[UIView alloc] initWithFrame:CGRectMake(0.f, 0.f, 80*columns, 32*rows)];
int currentTag = 0;

for (int y = 0; y < rows; y++) {
    for (int x = 0; x < columns; x++) {

        UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom]; 
        //  [button.layer setBorderWidth:1.0]; 
        //  [button.layer setBorderColor:UIColor blackColor]];
        button.backgroundColor=[UIColor colorWithRed: 201.0/255.0 green: 201.0/255.0 blue:201.0/255.0 alpha: 1.0];
        button.tag = currentTag;
        currentTag++;
        [button.layer setBorderColor: [[UIColor blackColor] CGColor]];
        [button.layer setBorderWidth: 1.0];
        [button setTitle:[NSString stringWithFormat:@"%d",currentTag] forState:UIControlStateNormal];
        button.frame = CGRectMake(80*x, 32*y, 80, 32); 
        [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
        [buttonView addSubview: button];

    }
}

// Center the view which contains your buttons
CGPoint centerPoint = buttonView.center;
centerPoint.x = self.view.center.x;
buttonView.center = centerPoint;
[self.view addSubview:buttonView];    

}

-(void)buttonPressed:(UIButton *)button
{
NSLog(@"button %u -- frame: %@", button.tag, NSStringFromCGRect(button.frame));
WeekView *crtObj=[[WeekView alloc]initWithNibName:@"WeekView" bundle:nil];
[self.navigationController pushViewController:crtObj animated:YES];
// [crtObj release];

}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([segue.identifier isEqualToString: @"WeekView"]){

        // Get reference to the destination view controller
     //  WeekView *vc = [segue destinationViewController];

        // Pass any objects to the view controller here, like...
       // [vc setMyObjectHere:object];
    [segue.destinationViewController setTitle:@"WeekView"];
    }} 
```

**编辑：**

***首先抛出调用栈：

```
 (0x13e0022 0x1571cd6 0x1388a48 0x13889b9 0x24b638 0xf11fc 0xf1779 0xf199b 0xf1d11 0x1038fd 0x103aef 0x103dbb 
  0x10485f 0x104e06 0x104a24 0x3529 0x13e1e99 0x2d14e 0x2d0e6 0xd3ade 0xd3fa7 0xd3266 0x523c0 0x525e6 0x38dc4 
 0x2c634 0x12caef5 0x13b4195 0x1318ff2 0x13178da 0x1316d84 0x1316c9b 0x12c97d8 0x12c988a 0x2a626 0x204d 0x1fb5)
 terminate called throwing an exception(lldb) 

0xbffff5b4
0xbffff6d4 
```

带调试 = Signal Sigabrat 从这里开始

```
WeekView *crtObj=[[WeekView alloc]initWithNibName:@"WeekView" bundle:nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:36:04.283

您正在使用情节提要，但您正在使用

```
WeekView *crtObj=[[WeekView alloc]initWithNibName:@"WeekView" bundle:nil];
[self.navigationController pushViewController:crtObj animated:YES]; 
```

我想你想在这里使用故事板：

```
[self performSegueWithIdentifier:@"WeekView" sender:self]; 
```

# deployment - .NET4.5 应用程序的安装程序和部署建议

> ID：11137645
> 
> 赞同：5
> 
> 时间：2012-06-21T11:58:48.700
> 
> 标签：deployment, installation, installshield, setup-deployment, .net-4.5

我们曾经使用 Visual Studio 安装项目以及 Git、TeamCity 和 NetSparcle 来为我们的客户创建一个简单的部署过程以及舒适的自动更新功能。

由于我们正在切换到 .net4.5，因此我们不能再使用 VS 安装项目（不再支持）并且必须切换到另一个安装程序。所以这是我对你的问题：

*   您有什么建议，哪个安装程序适用于 VS2012 中的 .net4.5？如果您推荐 InstallShield，我应该选择哪一个
*   哪一个与 TeamCity 配合得很好，或者您推荐哪种部署服务器/系统？
*   与特定安装人员有什么好的或坏的经验？

我读过[这个](https://stackoverflow.com/questions/1285591/installer-recommendation)，但 .net4.5 似乎在这里改变了游戏规则。

PS：Flexira 软件相当昂贵...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T07:21:00.463

Advanced Installer 最近[添加了对 .NET Framework 4.5 的支持](http://www.advancedinstaller.com/release-9.1.html)。您可以尝试一下，看看它是否满足您的需求。它有免费版和许可版。

以下是其他设置创作工具的列表：[http ://en.wikipedia.org/wiki/List_of_installation_software](http://en.wikipedia.org/wiki/List_of_installation_software)

您可以尝试测试您喜欢的那些，看看它们是否满足您的需求。

附带说明一下，.NET Framework 4.5 并不能改变游戏规则。应用程序部署过程没有太大变化。因此，即使安装工具不提供完整的 .NET 4.5 支持，它仍然可以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T17:20:52.440

Visual Studio 包含免费下载和安装 InstallShield Limited Edition 的功能。它基本上与 VS Setup Project 的能力相当，如果您对此感到满意，您应该对此感到满意，并且从安装程序质量和升级路径的角度来看处于更好的位置。

如果选择升级，一般Professional就足够了。还有windows Installer XML，我过去写过关于如何使用WiX合并模块“增加installshield”限量版项目的策略。这使您可以通过各种方式扩大 InstallShield LE 的范围。

# events - 如何在 node.js+express 中捕获“响应结束”事件？

> ID：11137648
> 
> 赞同：40
> 
> 时间：2012-06-21T11:59:00.673
> 
> 标签：events, node.js, express, response

我想编写一个快速中间件函数，它在响应的“结束”事件（如果存在）上设置一个侦听器。目的是根据最终处理程序决定发送的http响应代码进行清理，例如记录响应代码和数据库事务的回滚/提交。即，我希望此清理对最终调用者透明。

我想在 express 中执行以下操作：

路由中间件

```
function (req, res, next) {
   res.on ('end', function () {
      // log the response code and handle db
      if (res.statusCode < 400) { db.commit() } else { db.rollback() }
   });
   next();
} 
```

路线：

```
app.post ("/something", function (req, res) { 
    db.doSomething (function () {
       if (some problem) {
          res.send (500);
       } else {
          res.send (200);
       }
    });
 } 
```

当我尝试这个时，'end' 事件处理程序永远不会被调用。相同`res.on('close')`，我在另一篇文章中读到。这样的事件会被解雇吗？

我能想到的唯一另一种方法是在自定义中间件中包装`res.end`或使用我自己的版本。`res.send`这并不理想，因为`res.end`并且`res.send`不接受回调，所以我不能只包装它们，调用原始代码，然后根据他们给我回电时设置的响应代码做我的事情（因为他们不会打电话我回来了）。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-07T08:21:19.447

奇怪的是，当响应关闭时，响应似乎会发出“完成”事件： [https ://web.archive.org/web/20120825112648/http://sambro.is-super-awesome.com/2011/ 06/27/listening-for-end-of-response-with-nodeexpress-js/](https://web.archive.org/web/20120825112648/http://sambro.is-super-awesome.com/2011/06/27/listening-for-end-of-response-with-nodeexpress-js/)

尽管这个博客条目有点旧，但这个事件仍然存在（[lib/http.js 中的第 836 行](https://github.com/joyent/node/blob/master/lib/http.js#L836)），所以我认为它不会很快消失，即使节点和 express 的文档都没有提到它。到 2014 年初，它已移至[lib/_http_outgoing.js 的第 504 行，](https://github.com/joyent/node/blob/master/lib/_http_outgoing.js#L504)并且仍然有效。

顺便说一句，服务器响应上的“错误”事件可能不是您通常希望看到的。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2016-06-27T15:12:25.447

只是为了进一步@Amatsuyu的回应，它应该是这样的：

```
res.on('finish', function() {
  // do stuff here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T14:21:28.620

阅读[文档](http://expressjs.com/guide.html#res.send%28%29)，这里是签名`res.send`：

```
res.send(body|status[, headers|status[, status]]) 
```

这意味着您可以设置自己的状态，例如：`res.send( 'some string', 200 );`甚至只是`res.send( 404 );`.

此方法是您用来*发送*响应的方法。

一旦发送到客户端，就不能再访问了，所以没有回调。

**这是您的服务器做的最后一件事。一旦它处理了请求，它就会发送响应。**

但是，您可以在将其发送给客户端*之前访问它。*这意味着您可以：

```
console.log( res );
res.send( datas ); 
```

如果要回滚/提交，请在调用数据库回调时执行，而不是在响应消失时执行。

# linux - FreeBSD 执行 linux 文件，“ELF 二进制类型“3”未知。” 错误

> ID：11137650
> 
> 赞同：1
> 
> 时间：2012-06-21T11:59:20.740
> 
> 标签：linux, freebsd

我按照[FreeBSD Handbook](http://docs.freebsd.org/doc/8.1-RELEASE/usr/share/doc/freebsd/en_US.ISO8859-1/books/handbook/linuxemu-lbc-install.html)上的说明进行操作，但它不起作用。

```
$ pkg_info | grep linux_base
linux_base-f10-10_4 Base set of packages needed in Linux mode for i386/amd64 (L
$ kldstat | grep linux
 5    1 0xffffffff8112d000 1c4ac    linux.ko
$ ./wkhtmltoimage-amd64
ELF binary type "3" not known.
./wkhtmltoimage-amd64: Exec format error. Binary file not executable.
$ uname -ai
FreeBSD xxxxxx.xxx.xxx 8.1-RELEASE-p1 FreeBSD 8.1-RELEASE-p1 #0: Mon Oct 18 01:46:34 CST 2010     root@xxxxxx.xxx.xxx:/usr/obj/usr/src/sys/CSSULA  amd64 CSSULA 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:31:56.637

基于“-amd64”后缀，您似乎正在尝试使用 Linux 仿真执行 64 位二进制文​​件......根据包括[此](http://forums.freebsd.org/showthread.php?t=29389)线程在内的众多来源，这不受支持。

# ruby-on-rails - Rabl json 集合动态键

> ID：11137653
> 
> 赞同：4
> 
> 时间：2012-06-21T11:59:36.673
> 
> 标签：ruby-on-rails, ruby, rabl

我有一个有很多帖子的用户模型。我试图在 rabl 集合中呈现帖子。

```
collection @posts
attributes :title, :created_at 
```

渲染 json 集合的默认 rabl 格式是 `{'posts': ['post':{}, 'post':{}]}`. 例如，我想要完成的是将“post”键更改为动态值 post id，以便我的格式看起来像这样`{'posts':[1:{}, 2:{} ]}`。正在尝试使用 Rabl 的配置，但我发现的唯一一件事是如何使用

```
Rabl.configure do |config|
  config.include_json_root = false
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T14:57:26.303

我不认为 RABL 目前本机支持这一点，但由于 RABL 只不过是 ruby​​ 代码库之上的语法糖，因此您应该能够通过使用循环自己做到这一点。

例如（我没有试过这个，但你应该得到一般的要点）：

```
collection @posts

@posts.each do |post|
  node(post.id.to_sym) {{ title: post.title, created_at: post.created_at }}
end 
```

# java - 检查特定行中的给定字符串

> ID：11137661
> 
> 赞同：0
> 
> 时间：2012-06-21T12:00:05.670
> 
> 标签：java

我有一个非常转储的问题。我正在逐行读取一个文件，它是“.html”文件。我想检查一个特定的包含是否在行中退出。为此，我使用 String 类 contains 方法。

我正在检查包含引号的以下内容。

```
<div class="tupBin"/> 
```

我的语法是这样的..

```
Str line;
line.contains() 
```

我应该写什么包含大括号..？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:01:54.370

编辑：如果您想对已经包含引号/反逗号的字符串进行搜索，您只需要特别注意您的输入。您可以“转义”特殊字符以告诉 Java 将它们视为普通字符。你可以通过在它们前面加上一个反斜杠来做到这一点。事实上，不仅仅是引号会成为问题 - < 和 > 也会出现问题，请查看[此链接](http://www.javapractices.com/topic/TopicAction.do?Id=96)以获取有关转义字符的更多信息。所以要搜索你的字符串，你会写：

```
boolean didContain = line.contains("\<div class=\"tupBin\"/\>"); 
```

如果输入被扫描器或流读入，很可能它已经为您转义了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:04:33.697

```
line.contains("\"") 
```

[http://www.javacoffeebreak.com/faq/faq0050.html](http://www.javacoffeebreak.com/faq/faq0050.html)

# excel - 如何在Excel中查找重复的行

> ID：11137663
> 
> 赞同：-1
> 
> 时间：2012-06-21T12:00:08.187
> 
> 标签：excel

嗨，这是我的 Excel 表。我想消除从 A 到 B 的重复值

```
A       B
1       1
519     18
640     19
475     20
216     24
639     26
950     28
519     519 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:15:32.853

我想你想使用[VLOOKUP 功能](http://spreadsheets.about.com/od/excelfunctions/ss/vlookup.htm):)

# image - 检查是否在特定类别中，然后添加一个类以在 Wordpress 中发布图像

> ID：11137666
> 
> 赞同：0
> 
> 时间：2012-06-21T12:00:18.867
> 
> 标签：image, wordpress, class, post

*我正在尝试在页面上设置画廊以及灯箱效果，我将使用 jQuery 实现。*

我需要为每个图像添加一个类，以便 jQuery 可以针对这个类并做它的事情 - 不幸的是，我还需要这个效果只适用于给定类别中的图像 - 所以用 jQuery 添加类是行不通的。

到目前为止，这是我的代码（它不起作用）：

```
if ( in_category( 'gallery' )) {
/** * Attach a class to linked images' parent anchors * e.g. a img => a.img img */

function give_linked_images_class($html, $id, $caption, $title, $align, $url, $size, $alt = '' ){ $classes = 'gallery_img gllry'; // separated by spaces, e.g. 'img image-link'  

// check if there are already classes assigned to the anchor

if ( preg_match('/<a.*? class=".*?">/', $html) ) { $html = preg_replace('/(<a.*? class=".*?)(".*?>)/', '$1 ' . $classes . '$2', $html); } else { $html = preg_replace('/(<a.*?)>/', '$1 class="' . $classes . '" >', $html); } return $html; } add_filter('image_send_to_editor','give_linked_images_class',10,8); 
```

我把它放在我主题的functions.php 和nada、zilch 中。它应该针对标签内的img标签，在“画廊”类别中，不是吗？

任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:48:18.450

通常，如果您有一个特定类别的帖子，它可能有类`.category-ID` 或`.category-name`应用到它。您只需要在 style.css 文件中添加样式即可。

资料来源：[http ://codex.wordpress.org/Function_Reference/post_class](http://codex.wordpress.org/Function_Reference/post_class)

# xcode - Xcode 4.5 损坏 XIB？

> ID：11137669
> 
> 赞同：45
> 
> 时间：2012-06-21T12:00:24.863
> 
> 标签：xcode, exception, uitableview, xib, nib

我正在使用新的 xcode 4.5，我在某些视图控制器上有这行代码：

```
DiscoverCell* cell=[table dequeueReusableCellWithIdentifier:@"DiscoverCell"];
if(cell==nil){
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"DiscoverCell" 
                                                 owner:self 
                                               options:nil];
    cell = [nib objectAtIndex:0];
} 
```

当我运行应用程序时抛出：由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“NIB 数据无效。” 在 LoadNib 线上，那是什么？这个xcode是苹果垃圾吗？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-07-07T14:29:45.920

我遇到了同样的问题，并通过取消选中“实用工具”中“文档检查器”窗格上的“使用自动布局”复选框来修复它。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-10-11T08:14:54.467

取消选中下图中突出显示的“使用自动布局”。Xcode 4.5 默认为您添加到项目中的新 nib 文件启用此属性。取消选中自动布局复选框解决了问题

![](../Images/e34c4020e1b77ee47b62e3288c58f9f8.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-03T05:29:31.760

我刚刚遇到了这个问题，并将其追踪到一个 UIButton，该 UIButton 的 Title 字段在 Attributes Inspector 中设置为 Attributed。将其更改为普通解决了该问题。如果我没记错的话，我在 Xcode 的最后一个版本中添加了这个按钮，然后也遇到了问题。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-26T10:13:29.037

对我来说，这是 Jason Coco 的评论和 tomgerhardt 的回答的结合：我的应用程序针对 iOS5，我升级到 Xcode 4.5 并创建了一个新的 NIB。默认情况下，这针对 iOS6，导致崩溃。我在 NIB 的文件检查器窗口中将其设置为 iOS5。

然后我得到一个编译器错误，告诉我 iOS5 不支持使用自动布局，在文档检查器中打开了它，我的问题得到了修复。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-02T15:29:05.407

我正在使用 Xcode 4.5 和 iPhone 模拟器 5.0，并且在显示第一个表时出现同样的错误。按照“取消选中自动布局”的建议，我通过将文档版本控制切换到 iOS 5.0 来实现它。（故事板已选择 -> 文件识别选项卡 -> 界面生成器文档 -> 文档版本控制。）已取消选择自动布局。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-04T02:11:37.593

因此，在尝试了大约一个小时后，我发现了问题所在。确实是上面描述的：确保您的 .xib 设置为与您的主应用程序编写的相同的目标版本（在这种情况下，很可能 < 6.0），并取消选中选项中的“使用自动布局”特别是.xib。

它可以在模拟器中运行的原因是因为您的模拟器实际上正在运行 iOS6。尝试使用具有较旧 iOS 的设备时，将导致此错误。我的问题是，我正在创建一个自定义 TableViewCell，默认情况下它是针对 iOS 6 的，并且选中了“使用自动布局”。这是我的罪魁祸首。

希望我能够拯救有人因这个错误而遭受的悲痛！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-08T11:55:03.373

在为我的所有 .xib 文件禁用自动布局后，我仍然遇到错误。这是因为我在 .xib 文件中为 UILabel 使用了 Text -> Attributed。

将其设置为平原后，错误消失了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-16T13:40:11.710

"loadNibNamed:" 之后的名称必须是 nib 文件的名称（在屏幕左侧的项目导航器中），有时人们会在 CellForRowAtIndexPath （静态 NSString ...） .

这个小故障可能是你的问题吗？

# delphi - 如何在 Delphi XE2 中使用 IMultiLanguage2？

> ID：11137672
> 
> 赞同：2
> 
> 时间：2012-06-21T12:00:29.477
> 
> 标签：delphi, idl

我需要一个白痴指南，了解如何使用 Delphi XE2 的 IMultiLanguage2 接口和 32 位 VCL 应用程序。

到目前为止，我在 RAD Studio 的 include\windows\sdk\idl 文件夹中找到了 MLANG.IDL，并验证了我的操作系统在 SysWOW64 中有 mlang.dll 文件。

我还设法在 MLANG.IDL 上使用 MIDL.exe 创建了一个 MLANG.TLB 文件（我需要这一步吗？）但我无法将 TLB 导入 XE2，因为它没有出现在“已注册”列表中。我也不想尝试注册它，因为我不想创建对 mlang.dll 以外的依赖项。TLibImp 不会打开 mlang.dll。

我查看了 GenTLB（它不打开 MLANG.IDL）并阅读了很多关于使用类型库的 EMB Docwiki，包括“RAD Studio 上的类型库使用 RIDL 而不是 IDL”的声明。那么 XE2 安装的 IDL 文件的巨大文件夹的目的是什么？由于它们位于包含文件夹中，它们是否仅用于 C++ 而不是用于 Delphi？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T13:20:18.420

如果您已经拥有二进制`.tlb`格式的类型库，那么您可以通过单击“导入组件”对话框中的“添加”按钮来导入它——这将让您浏览 .tlb 文件，并且应该生成一个带有声明的 Delphi 单元。

或者，您可以使用`tlibimp`命令行工具，例如：

```
tlibimp -P mlang.tlb 
```

一个快速使用示例：

```
uses
  MultiLanguage_TLB;

var
  M: IMultiLanguage2;
  C: Cardinal;
begin
  M := CreateComObject(CLASS_CMultiLanguage) as IMultiLanguage2;
  OleCheck(M.GetNumberOfCodePageInfo(C));
  ShowMessage(Format('GetNumberOfCodePageInfo: %d', [C]));
end; 
```

# eclipse - 在 Eclipse 中运行 Web 应用程序

> ID：11137675
> 
> 赞同：0
> 
> 时间：2012-06-21T12:00:39.310
> 
> 标签：eclipse, apache, jsp

我在 Eclipse 中打开了一个 JSP Web 项目，但不确定如何从 Eclipse 中运行 .jsp 页面。如何将 Tomcat 添加到我的 Eclipse 项目并直接从那里运行网页？

以下教程： http: [//www.eclipse.org/webtools/community/tutorials/BuildJ2EEWebApp/BuildJ2EEWebApp.html](http://www.eclipse.org/webtools/community/tutorials/BuildJ2EEWebApp/BuildJ2EEWebApp.html)

我发现通过右键单击项目>属性，那里没有服务器选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:23:03.807

CTRL+3 ，然后键入“服务器”。选择所需的 tomcat 服务器，然后右键单击它 - 选择添加，然后在打开的对话框中选择您希望在此服务器下运行的 Web 应用程序。
完成后，只需右键单击服务器并选择运行/调试

# javascript - 对 Flex 的 iframe Javascript 调用

> ID：11137676
> 
> 赞同：1
> 
> 时间：2012-06-21T12:00:39.950
> 
> 标签：javascript, actionscript-3, apache-flex, flex3

我有一个 flex 应用程序，顶部有一个 iframe。

我想从 iframe 拨打电话以使用 javascript 进行调整。

到目前为止，我已经尝试过：

这是包含嵌入在 ROOT 文档中的 swf 的对象

```
 <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
        id="IPRS_Dispatcher" width="1400" height="1000"
        codebase="http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab">
        <param name="movie" value="DispatcherMain.swf" />
        <param name="quality" value="high" />
        <!-- <param name="bgcolor" value="${bgcolor}" /> -->
        <param name="allowScriptAccess" value="sameDomain" />
        <param name='flashVars' value='strLang=english&strIPRSSrvHost=&strGPSSrvHost=192.168.1.130&strGPSSrvSoapPort=8081&strGPSSrvFwdPort=26000&strLoginMode=simple&strSOSSrvHost=192.168.1.80&strSOSSrvSoapPort=8082&strSOSSrvFwdPort=26001&strSOSLoginMode=simple&strUserSIP=&strUserPswd=&nDelayForMapReadySecs=10&nGPSUpdatesRateSecs=120&nGPSSubscriptionsIntervalMinutes=10&nLat=35.0&nLng=32.5&nZoomLevel=5&strClientServiceVersion=2.1.36.19&nPathDotsSize=1&nPathWidth=5&bHideAnnounce=false&bHideEmergencyPan=true&strMapMarkerLabelMode=name&key=ABQIAAAAYbXZyR09wFj6QsiYucHpGxQEO34WZEWuIFq1A7yobGXPE-K5exQV9ZYR6NIkF8LCR8wsYvlhOIYsfA' />
        <embed id="IPRS_Dispatcher2" src="DispatcherMain.swf"
            flashVars='strLang=english&strIPRSSrvHost=&strGPSSrvHost=192.168.1.130&strGPSSrvSoapPort=8081&strGPSSrvFwdPort=26000&strLoginMode=simple&strSOSSrvHost=192.168.1.80&strSOSSrvSoapPort=8082&strSOSSrvFwdPort=26001&strSOSLoginMode=simple&strUserSIP=&strUserPswd=&nDelayForMapReadySecs=10&nGPSUpdatesRateSecs=120&nGPSSubscriptionsIntervalMinutes=10&nLat=35.0&nLng=32.5&nZoomLevel=5&strClientServiceVersion=2.1.36.19&nPathDotsSize=1&nPathWidth=5&bHideAnnounce=false&bHideEmergencyPan=true&strMapMarkerLabelMode=name&key=ABQIAAAAYbXZyR09wFj6QsiYucHpGxQEO34WZEWuIFq1A7yobGXPE-K5exQV9ZYR6NIkF8LCR8wsYvlhOIYsfA' 
            width="1400" height="1000" name="IPRS_Dispatcher" align="middle"
            play="true"
            loop="false"
            quality="high"
            allowScriptAccess="sameDomain"
            type="application/x-shockwave-flash"
            pluginspage="http://www.adobe.com/go/getflashplayer"> <!-- bgcolor="${bgcolor}" -->
        </embed>
</object> 
```

我为要公开的函数添加了 addcallback

```
ExternalInterface.addCallback("sendToFlash", callFromJavaScript); 
```

供参考

```
 public function callFromJavaScript(str):void
  {
  LogAddItem( 30, str);
  } 
```

在我的 IFRAME 中，我添加了该功能

```
function callToFlash(str) 
{
  var swf = parent.top.$("#IPRS_Dispatcher");
  var bool = swf.sendToFlash(str);
} 
```

现在在 chrome 中出现错误 - Uncaught TypeError: Object [object Object] has no method 'sendToFlash'

更新 25/06/2012 - **console.log(swf)的输出**

```
[
<embed src=​"DispatcherMain.swf" width=​"100%" height=​"100%" align=​"middle" id=​"IPRS_Dispatcher" quality=​"high" name=​"IPRS_Dispatcher" wmode=​"opaque" allowfullscreen=​"true" allowscriptaccess=​"always" pluginspage=​"http:​/​/​www.adobe.com/​go/​getflashplayer" flashvars=​"strOEM=mt&strSplashImage=./​assets/​loadinglogo.jpg&strLang=english&strSelectableLangs=english,chinese, portuguese_brazil,german,french,spanish&strIPRSSrvHost=85.118.26.10&strGPSSrvHost=85.118.26.16&strGPSSrvSoapPort=8081&strGPSSrvFwdPort=26000&strLoginMode=simple&strUserSIP=&strUserPswd=&strSOSSrvHost=85.118.26.17&strSOSSrvSoapPort=8082&strSOSSrvFwdPort=26001&strClientServicePort=&strSOSLoginMode=simple&themeColor=a7c3e3&showRTTPriority=false&showGPSUpdateRate=true&nSamePosErrMeters=300&nDelayForMapReadySecs=10&nGPSUpdatesRateSecs=65535&nGPSSubscriptionsIntervalMinutes=10&nLat=48.311058&nLng=11.636753&nZoomLevel=13.0&strClientServiceVersion=2.1.36.04&bDispatcherEndsSessions=true&nSOSSubscriptionsIntervalMinutes=1&GPSKATime=20&SOSKATime=20&nPathDotsSize=2&nPathWidth=5&bHideAnnounce=false&bHideEmergencyPan=false&bHideDebugLog=false&showMutedColumn=false&strLogFilter=&strMapMarkerLabelMode=name&key=ABQIAAAAfJEcVYS6-jYp2UOUy8Wh5xSCeXAFBxztfWxjY5w1WzTnKjnSVRS7Uu5XoOIwTg2R_tq_c0QSCPxSHw" type=​"application/​x-shockwave-flash">​
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:27:58.000

请问你能跑吗：

```
function sendToActionscript(str) 
{
  var swf = jQuery("#IPRS_Dispatcher", parent.document);
  console.log('step1');
  console.log(swf);
  console.log('step2');
  console.log.(swf.html());
  console.log('step3');

  swf.LogAddItem(30, str);
  console.log('step4');
} 
```

好的，下一个调试步骤：运行：

```
function sendToActionscript(str) 
{
  var swf = parent.top.$(“#IPRS_Dispatcher”);
  console.log('step1');
  console.log($);
  console.log('step2');
  console.log.(jQuery);
  console.log('step3');
  console.log(parent.document);
  console.log('step4');
} 
```

编辑

步骤输出

```
step1 
function (j,s){return new b.fn.init(j,s)} iframecontent.html:49
step2 
[
<embed src=​"DispatcherMain.swf" width=​"100%" height=​"100%" align=​"middle" id=​"IPRS_Dispatcher" quality=​"high" name=​"IPRS_Dispatcher" wmode=​"opaque" allowfullscreen=​"true" allowscriptaccess=​"sameDomain" pluginspage=​"http:​/​/​www.adobe.com/​go/​getflashplayer" flashvars=​"strOEM=mt&strSplashImage=./​assets/​loadinglogo.jpg&strLang=english&strSelectableLangs=english,chinese, portuguese_brazil,german,french,spanish&strIPRSSrvHost=85.118.26.10&strGPSSrvHost=85.118.26.16&strGPSSrvSoapPort=8081&strGPSSrvFwdPort=26000&strLoginMode=simple&strUserSIP=&strUserPswd=&strSOSSrvHost=85.118.26.17&strSOSSrvSoapPort=8082&strSOSSrvFwdPort=26001&strClientServicePort=&strSOSLoginMode=simple&themeColor=a7c3e3&showRTTPriority=false&showGPSUpdateRate=true&nSamePosErrMeters=300&nDelayForMapReadySecs=10&nGPSUpdatesRateSecs=65535&nGPSSubscriptionsIntervalMinutes=10&nLat=48.311058&nLng=11.636753&nZoomLevel=13.0&strClientServiceVersion=2.1.36.04&bDispatcherEndsSessions=true&nSOSSubscriptionsIntervalMinutes=1&GPSKATime=20&SOSKATime=20&nPathDotsSize=2&nPathWidth=5&bHideAnnounce=false&bHideEmergencyPan=false&bHideDebugLog=false&showMutedColumn=false&strLogFilter=&strMapMarkerLabelMode=name&key=ABQIAAAAfJEcVYS6-jYp2UOUy8Wh5xSCeXAFBxztfWxjY5w1WzTnKjnSVRS7Uu5XoOIwTg2R_tq_c0QSCPxSHw" type=​"application/​x-shockwave-flash">​
] 
step3 iframecontent.html:52
#document
step4 
```

好的，所以现在只需尝试

```
function sendToActionscript(str) 
{
  var swf = parent.top.$(“#IPRS_Dispatcher”);
  swf.LogAddItem(30, str);
} 
```

您的 flex 应用程序中有错误 ![在此处输入图像描述](../Images/4354b21e4affa9b8507eb109c07c0ea0.png)

**终于解决了**

```
 // get flash movie object
var flashMovie;
function init() {
   if (document.getElementById) {
      flashMovie = parent.document.getElementById("IPRS_Dispatcher");
   }
}

// wait for the page to fully load before initializing
window.onload = init;

function callToFlash(str) 
{
  var bool = flashMovie.sendToFlash(str);
} 
```

我认为在初始化之前等待页面完全加载是解决方法。

您也可以使用[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

```
$(document).ready(init); 
```

在 DOM 初始化后让它工作。

# complexity-theory - 复杂性分析 - 考虑非对数因素

> ID：11137677
> 
> 赞同：1
> 
> 时间：2012-06-21T12:00:41.673
> 
> 标签：complexity-theory, big-o

只是为我的考试做一个快速的准备，例如我有：

```
f(x) = 5x<sup>2</sup> + 4x * log(x) + 2 
```

大 O 是`O(x<sup>2</sup> + x * log(x))`还是应该考虑非对数系数，例如 5 或 4？

同样，考虑这段代码

```
for (int i = 0; i < block.length; i++)
    for (int j = 0; j < block.length;  j++)
        for (int k = 0; k < 5; k++)
             g(); //assume worst case time performance of g() is O(1) 
```

那么大 O 是 O(5n ² ) 还是 O(n ² )？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:10:43.850

复杂性`f(x) = 5x^2 + 4xlogx + 2`是`O(x^2)`因为

```
O(g(x) + k(x)) = max(O(g(x), k(x))
// and O(X^2) > O(xlogx)

//additionally coeffs are disregarded
O(c*g(x)) = O(g(x)) 
```

因此，如果您有一个总和，您只需选择一天结束时最大的复杂度，当*n*趋于无穷大时，最大的组件将提供最多的计算负载。你是否有任何系数也没关系，因为你试图*粗略*估计会发生什么。

* * *

对于您的其他示例，请参见下面的推理

```
for (int i = 0; i < block.length; i++)
    for (int j = 0; j < block.length;  j++)
        for (int k = 0; k < 5; k++)
             g(); //assume worst case time performance of g() is O(1) 
```

首先将循环转换为总和并从右到左计算总和

```
Sum (i=0,n)
    Sum(j=0, n)
        Sum(k=0, k=5)
            1 
```

O(1) 从 1 到 5 的计数器仍然是 O(1)，记住你忽略 coeffs

```
Sum(k=0, k=5) 1 = O(5k) = O(1) 
```

所以你最终得到了中间和，它计算了 O(1) n 次的函数，这给出了 O(n) 的复杂度

```
Sum(j=0, n) 1 = O(n) 
```

最后你得到最左边的总和，注意到你计算了*nn*次，即`n+n+n...`，它等于`n*n`或`n^2`

```
Sum (i=0,n) n = O(n^2) 
```

所以最终的答案是 O(n^2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:11:11.727

`O(x**2)`因为：

`lim n^2 if (x->8) = 8`

`lim 5n^2 if (x->8) = 8`

`8 is infinity`

但是如果你有几个表达式的总和，你需要理解增长最快的函数。这将是你问题的答案。

表达式之前的任何其他常量都会给你相同的答案。在那种情况下，你应该使用[渐近分析](http://en.wikipedia.org/wiki/Asymptotic_analysis) 我可以给你一个建议。如果您面临您需要的几个功能的总和：

> *   在组件上分解您的表达式
> *   想象每个元素的图
> *   了解增长最快的元素，不超过无限

这个元素会给你答案

# jquery - 如果使用 $.post() 时条件不起作用

> ID：11137680
> 
> 赞同：-1
> 
> 时间：2012-06-21T12:00:50.247
> 
> 标签：jquery, asp.net, login

我有一个带有 OnClientClick 和 OnClick 事件的图像按钮。

```
 <asp:ImageButton ImageUrl="./../../images/login.gif" Style="margin-right: 153px;"
        runat="server" OnClientClick="return SendLoginData();" OnClick="Login_Click" /> 
```

OnClientClick，我在使用 $.post() 函数的地方调用了一些客户端函数 SendLoginData()。

```
 function SendLoginData() {
        var flagLogin = "0";
        if (LoginValidation() != false) {
            $.post(window.location,
                {
                    LOGIN: "LOGIN",
                    UserName: $.trim($('#txtUserNameLogin').val()),
                    Password: $.trim($('#txtPasswordLogin').val())
                },
                function (data) {

                    var d = $(data).find('#<%=lblMessageLogin.ClientID %>');
                    if ($(d).html() == "SUCCESS") {
                        flagLogin = "1";
                    }
                    else {
                        $('#lblErrorMsgLogin').html(d.html());
                    }
                }
            );
        }
        //alert(flagLogin);
        if (flagLogin == "1") {
            return true;
        }
        else {
            return false;
        }
    } 
```

Afer $.post() 当我得到响应为“SUCCESS”时，我想向客户端函数 SendLoginData 返回 true。这样我的服务器端 onClick 就可以工作了。

但我面临一个问题。你可以看到有一个被注释的警报 (//alert(flagLogin);)。

如果我取消注释警报，则 if (flagLogin == "1") 条件有效。而如果我按照评论留下警报，那么 if (flagLogin == "1") 不起作用。

有人可以解释我该如何处理这种情况，这背后的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T12:03:50.033

因为请求是异步的。AJAX 调用不会“等待”请求完成，因此您的“if”会在请求完成之前执行。

换句话说，代码继续它的执行流程，同时处理 POST 请求，并且当`SendLoginData()`函数已经完成时，你的标志就会被赋值。

`function (data)`您应该在 POST 请求内的位中管理登录成功。

* * *

**顺便说一句：永远不要依赖 JavaScript 来验证登录，它很**容易被篡改。考虑彻底改变方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T07:38:09.323

我已经通过使用下面的代码解决了这种情况

```
 function SendLoginData() {
        var flagLogin = "0";
        if (LoginValidation() != false) {

            $.post(window.location,
                {
                    LOGIN: "LOGIN",
                    UserName: $.trim($('#txtUserNameLogin').val()),
                    Password: $.trim($('#txtPasswordLogin').val())
                },
                function (data) {

                    var d = $(data).find('#<%=lblMessageLogin.ClientID %>');
                    if ($(d).html() == "SUCCESS") {
                        flagLogin = "1";
                        window.location = window.location + "?HOME=true";
                    }
                    else {
                        $('#lblErrorMsgLogin').html(d.html());
                    }
                }
            );

        }
        if (flagLogin == "1") {
            return true;
        }
        else {
            return false;
        }
    } 
```

在这里，我使用 window.location 和回调函数中的一些查询字符串来执行我的服务器端代码，它工作正常。

# eclipse - SVN从主干合并到分支

> ID：11137685
> 
> 赞同：2
> 
> 时间：2012-06-21T12:00:58.027
> 
> 标签：eclipse, svn

在主干/分支方面，我是新手，所以我的问题很愚蠢。

我正在使用 Subversion 的 Eclipse 插件。目前，我正在尝试确切地了解如何工作。

我创建了一个分支，然后回到我的主干并对其中一个对象进行了小改动（以前是版本 1，现在是版本 2）。我犯了。

我回到我的分支，对象仍然是版本 1 并执行了合并命令。我本来希望看到的是该对象现在在我的分支中是第 2 版。相反，我将其作为修改后的版本 1。

当然，它应该只是“复制”新的，因为我没有对我的分支进行任何更改。

我什至选择了“使用传入版本解决冲突”选项，但我仍然得到相同的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:06:32.553

这就是它应该的样子。合并将一个分支的两个修订版之间的更改（在您的情况下为 trunk-rev-1 和 trunk-rev2）应用到另一个分支的工作副本。更新工作副本后，您可以测试合并是否不会破坏所有内容（编译正常，单元测试通过等），如果需要手动应用其他更改，然后提交工作副本。这将在存储库中创建一个新修订。

文件在 SVN 中没有任何修订。整个存储库从一个修订版到另一个修订版。

我建议你阅读免费的[SVN 书](http://svnbook.red-bean.com/en/1.7/svn-book.html)，它非常清楚地解释了一切。

# windows - 如何在cmd上执行其他程序生成的命令？

> ID：11137686
> 
> 赞同：0
> 
> 时间：2012-06-21T12:00:58.967
> 
> 标签：windows, cmd

我正在使用 Windows 命令行脚本。我想做的是执行由另一个命令“B”生成的命令“A”作为其输出，我还可能想在执行之前先检查该命令是否存在。这里有人知道怎么做吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:03:56.703

```
a.exe > tmp.cmd
CALL tmp.cmd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T15:03:20.813

经典方法是按照[Eugen Rieck 的建议](https://stackoverflow.com/a/11137746/1012053)将输出重定向到脚本文件。可以通过写入临时文件夹并在完成后删除临时脚本来完善它。我在临时脚本名称中加入了一个随机数，以降低脚本的两个同时实例不会相互干扰的可能性。

```
@echo off
setlocal
set script="%temp%\temp%random%.bat"
commandA >%script%
call %script%
del %script% 
```

您的 commandA 可能不会产生任何输出。执行空脚本不会导致任何错误。但是，如果您愿意，可以通过以下方式检测到脚本为空：

```
for %%A in (%script%) do if %%~zA equ 0 echo The script is empty. 
```

可以使用多个命令构建脚本：

```
commandA >%script%
commandB >>%script%
commandC >>%script% 
```

或更有效地：

```
>%script% (
  commandA
  commandB
  commandC
) 
```

一种非经典的方法是将命令存储在变量而不是脚本文件中，然后将扩展值作为宏执行。宏的执行可能比脚本的执行快得多，因为它都是基于内存的。但是，成功构建功能宏的规则比构建脚本要复杂得多。此外，宏被限制为最多 8191 个字符（字节） - 批处理环境变量的最大长度。

甚至可以创建一个接受参数和返回值的宏！

在 DOSTips 站点上，已经对批处理宏进行了大量的工作。如果您有兴趣尝试一下，这里有两个重要的参考资料：

[http://www.dostips.com/forum/viewtopic.php?p=7330](http://www.dostips.com/forum/viewtopic.php?p=7330) 一个很好的起点，展示了概念的发展，以及许多关键组件

[http://www.dostips.com/forum/viewtopic.php?p=11344](http://www.dostips.com/forum/viewtopic.php?p=11344)最新和最伟大的带有参数的宏的语法得到了很大改进

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T22:59:56.917

在大多数情况下应该有效的简单方法是：

```
for /F "tokens=*" %%i in ('a.exe') do %%i 
```

或者

```
for /F "tokens=*"  %%i in ('a.exe') do if "%%i" NEQ "" %%i 
```

# php - 获取 phpmyadmin 路径

> ID：11137687
> 
> 赞同：0
> 
> 时间：2012-06-21T12:01:04.187
> 
> 标签：php, mysql, security, phpmyadmin

我想获取`"www.site.com"`
我知道默认路径的 phpmyadmin 路径，`"www.site.com/phpmyadmin"`但如果路径是隐藏的（phpmyadmin 的路径已更改），

有一个端口可以返回 phpmyadmin 的路径吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:13:00.440

你首先需要它做什么？

长答案简短：无法获取运行 PHPMyAdmin 的地址。可能在另一台服务器上，可能在任何地方。这是您对自己的网站了解的内容，而您不想对其他网站了解的内容。

# javafx-2 - 对 StyleClass 使用 bindBidirectional() 方法

> ID：11137690
> 
> 赞同：0
> 
> 时间：2012-06-21T12:01:14.427
> 
> 标签：javafx-2

我需要在两个 TextField 之间建立下一个依赖关系：当我点击其中任何一个时，它们都会改变它们的样式。

我试着让它像这样：

```
 tb2.styleProperty().bindBidirectional(tb1.styleProperty());
    tb1.setOnMouseClicked(new EventHandler<MouseEvent>() {
        @Override
        public void handle(MouseEvent t) {
            System.out.println(tb1.styleProperty().toString());
            System.out.println(tb2.styleProperty().toString());
            tb1.getStyleClass().clear();
            tb1.getStyleClass().add("green");
            System.out.println(tb1.styleProperty().toString());
            System.out.println(tb2.styleProperty().toString());
        }
    }); 
```

但是不行：tb1点击后改变了样式，而tb2没有；此外，systemouts 显示样式不相等：

```
StringProperty [bean: TextField[id=tb1, styleClass=green], name: style, value: ]
StringProperty [bean: TextField[id=tb2, styleClass=text-input text-field], name: style, value: ]
StringProperty [bean: TextField[id=tb1, styleClass=green], name: style, value: ]
StringProperty [bean: TextField[id=tb2, styleClass=text-input text-field], name: style, value: ] 
```

另外，我尝试绑定他们的 text 属性，并且它可以工作（当我更改其中一个 TextField 中的文本时，另一个中的文本也会更改）：

```
tb2.textProperty().bindBidirectional(tb1.textProperty()); 
```

那么，我在 Style Property 上做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:21:22.040

`Style`并且`StyleClass`是两个不同的属性。`Style`包括`;`分隔`property:value`对，同时`StyleClass`包括 CSS 文件中定义的 CSS 选择器列表。在您的处理程序中，如果您尝试类似

```
tb1.setStyle("-fx-background-color: red"); 
```

代替

```
tb1.getStyleClass().clear();
tb1.getStyleClass().add("green"); 
```

您会看到`tb2`的背景颜色也会发生变化。要完成您的任务，请尝试将列表更改侦听器添加到 styleClass 可观察列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-21T21:02:44.160

我能够以这种方式实现样式绑定：

```
SimpleStringProperty dynamicProperty = new SimpleStringProperty("-fx-background-color: " +     "#d6d6d6");
Text title = new Text("Test");
title.setId("textID");
dynamicProperty.bindBidirectional(title.styleProperty()); 
```

当对 dynamicProperty 对象调用 setValue() 方法时，它会更新 Text 对象的样式属性。我建议您对两个对象（tb1，tb2）进行双向绑定。

```
SimpleStringProperty dynamicProperty = new SimpleStringProperty("-fx-background-color: " + "#d6d6d6");
dynamicProperty.bindBidirectional(tb1.styleProperty());
dynamicProperty.bindBidirectional(tb2.styleProperty()); 
```

# html - SVG作为背景图像？

> ID：11137695
> 
> 赞同：0
> 
> 时间：2012-06-21T12:01:31.130
> 
> 标签：html, svg

我在解决方案中有一个 SVG 文件，我有一个母版页，我想将该 SVG 作为背景图像。我尝试过：

```
html { background-image: url("../Images/MainBackground.svg"); } 
```

但它不起作用；SVG 根本没有出现。

有谁知道为什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:10:16.090

恕我直言，您应该在“body”而不是“html”上设置背景。

顺便说一句：这不适用于 Internet Explorer。

编辑：

在你的 CSS 上试试这个

```
background-image: url(your-file.svg);
-o-background-size: 100% 100%;
-webkit-background-size: 100% 100%;
-moz-background-size: 100% 100%; 
```

# asp.net-mvc-3 - 当用户尝试在我的 MVC3 应用程序中更改他们的电子邮件地址时，我想发送一封确认电子邮件

> ID：11137696
> 
> 赞同：0
> 
> 时间：2012-06-21T12:01:37.530
> 
> 标签：asp.net-mvc-3, email

. . . 但我不确定实现这一点的正确工作流程。

在用户注册时，我已经向用户的电子邮件地址发送了一封确认电子邮件 - 他们被标记为“非活动”，直到他们点击他们在电子邮件中收到的链接。

我希望我的用户能够随时更改他们的电子邮件，目前他们可以，但我也希望能够通过让用户在他们的新电子邮件地址收到一封带有他们拥有的链接的电子邮件来确认电子邮件地址在电子邮件更改发生之前单击。

实现这一点的正确工作流程是什么？

# windows - 当删除失败等时，“rd”退出，errorlevel 设置为 0

> ID：11137702
> 
> 赞同：15
> 
> 时间：2012-06-21T12:01:57.333
> 
> 标签：windows, batch-file, error-handling, cmd, exit-code

我正在编写一个批处理 (.bat) 脚本，我需要处理文件夹删除失败的情况。我`%errorlevel%`用来捕获退出代码，但在`rd`命令的情况下它似乎不起作用：

```
C:\Users\edo\Desktop>rd testdir
Directory is not empty

C:\Users\edo\Desktop>echo %errorlevel%
0 
```

为什么？你有什么建议？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-21T12:09:23.460

哇，这是我见过的第二个 ERRORLEVEL 设置不正确的情况！请参阅[Windows 中的文件重定向和 %errorlevel%](https://stackoverflow.com/q/10354016/1012053)。

解决方法与检测重定向失败的方法相同。使用`||`操作员在失败时采取措施。

```
rd testdir || echo The command failed! 
```

奇怪的是，当您使用`||`运算符时，如果文件夹不为空，则 ERRORLEVEL 会正确设置为 145，如果文件夹不存在，则设置为 2。所以你甚至不需要做任何事情。您可以有条件地“执行”一个注释，然后错误级别将被正确设置。

```
rd testdir || rem
echo %errorlevel% 
```

* * *

我认为上面给出了一个完整的画面。但随后下面的一系列评论表明，`/RD /S`使用时仍然存在潜在问题。如果父文件夹下的文件或子文件夹被锁定（在父文件夹下的任何级别），`RD /S /Q PARENT && echo removed || echo failed`则会打印出错误消息，但`&&`会触发分支而不是`||`分支。非常不幸。如果命令因父文件夹本身被锁定而失败，`||`则将正确触发并设置 ERRORLEVEL。

通过将 stderr 与 stdout 交换并将结果通过管道传输到`FINDSTR "^"`. 如果找到匹配项，则一定有错误。

```
3>&2 2>&1 1>&3 rd /s test | findstr "^" && echo FAILED 
```

缺少时，stderr 和 stdout 的交换很重要，`/q`因为它允许“您确定（Y/N）吗？” 提示在 stderr 上可见，与 stdout 上的错误消息分开。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-04-10T13:36:18.210

`rd`不设置`errorlevel`为零 - 它保持`errorlevel`不变：fe 如果先前的操作以正数结束`errorlevel`并`rd`成功完成，它`errorlevel`保持不变。示例：`robocopy`低于 4 的错误级别是警告而不是错误，可以忽略，因此即使目录已成功删除，以下代码也可能以错误结尾：

```
robocopy ...
if errorlevel 4 goto :error
rd somedir
if errorlevel 1 goto :error 
```

解决方法：忽略该错误，然后检查目录是否仍然存在`rd`：

```
rd somedir
if exist somedir goto :error 
```

# jquery - 如何禁用/启用使用 selectToUiSlider jQuery 插件的滑块？

> ID：11137705
> 
> 赞同：1
> 
> 时间：2012-06-21T12:02:02.977
> 
> 标签：jquery, jquery-ui, slider, jquery-ui-slider

我正在使用一个 jQuery 插件来创建带有刻度、标签和工具提示的滑块。我需要一种能够像文本框或组合框一样禁用/启用它的方法。例如，当用户登陆页面时，滑块显示为禁用，但当用户更改保管箱或滑动另一个滑块时，这应该启用。我找不到有关此特定功能的任何文档。需要帮忙。

```
//SLIDER 1
$('select#milestones').selectToUISlider({
    labels:4,
    tooltip: false,
    labelSrc: 'text',
    sliderOptions:{
        change: function(e, ui) {
            filterAndLoadChart((parseInt(ui.value)) + 1);
            if(ui.value > 0){
                //I WANT TO ENABLE THE SLIDER 2 HERE
            }
        }
    }
});

//SLIDER 2
$('select#age').selectToUISlider({
    tooltip: false,
    labelSrc: 'value',
    sliderOptions:{
        disabled:true,
        change:function(e, ui) {
            var selVal = $('#age').val();
            $("#ageTxt").html(selVal + " Days");
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T08:13:21.000

selectToUISlider 使用类 ui-slider 创建滑块，因此您可以使用标准 jquery-ui 滑块方法禁用/启用它：

`$('.ui-slider').slider('disable');`

`$('.ui-slider').slider('enable');`

# google-docs-api - Google Documents List API v3 - 如何创建文件夹？

> ID：11137709
> 
> 赞同：0
> 
> 时间：2012-06-21T12:02:35.360
> 
> 标签：google-docs-api

我尝试按照[https://developers.google.com/google-apps/documents-list/#creating_a_new_document_or_file_with_metadata_only的说明创建一个新文件夹](https://developers.google.com/google-apps/documents-list/#creating_a_new_document_or_file_with_metadata_only)

而不是 term="http://schemas.google.com/docs/2007#document，我使用了 term="http://schemas.google.com/docs/2007#folder.

但是，我得到一个 HTTP 状态 200 并且没有创建文件夹。即使我使用 term="http://schemas.google.com/docs/2007#document ，结果也是一样的。

我在搜索中看到了这种方法的问题，我尝试发布到[https://docs.google.com/feeds/default/private/full/folder%3A](https://docs.google.com/feeds/default/private/full/folder%3A) 现在，我收到 400 错误。

任何帮助将不胜感激。

最好的问候， Karthik

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:27:59.117

要创建文件夹，请使用以下 xml 正文发送`POST`请求：`https://docs.google.com/feeds/default/private/full`

```
<?xml version='1.0' encoding='UTF-8'?>
  <entry xmlns="http://www.w3.org/2005/Atom">
  <category scheme="http://schemas.google.com/g/2005#kind"
    term="http://schemas.google.com/docs/2007#folder"/>
  <title>Example Collection</title>
</entry> 
```

有关更多详细信息，请查看文档中的特定部分：[https ://developers.google.com/google-apps/documents-list/#creating_collections](https://developers.google.com/google-apps/documents-list/#creating_collections)

# c# - 即使使用“新”关键字，列表项也会重复

> ID：11137710
> 
> 赞同：0
> 
> 时间：2012-06-21T12:02:38.490
> 
> 标签：c#, asp.net

很抱歉问了这么一个模糊的问题，我是使用 C#/ASP.NET 的新手。在创建随机生成的问题并通过使用 for 循环将问题对象存储在列表中时，当我输出问题时会出现相同/重复的问题。我用调试器检查了问题列表，它显示了 10 个相同的对象。

**服务器端 C# 用于填充问题列表：**

```
private void Populate()
{
    __NumberOfQuestions = 10;
    __Questions = new List<Question>(__NumberOfQuestions);

    for (int i = 0; i < __NumberOfQuestions; i++)
    {
        __Questions.Add(new Question());
    }

    QuestionList.DataSource = __Questions;
    QuestionList.DataBind();
} 
```

问题类在这里可用：http: [//pastebin.com/mEArQFHh](http://pastebin.com/mEArQFHh)

**用于将问题添加到页面的 ASP 代码：**

```
 <asp:Repeater ID="QuestionList" runat="server">
                <ItemTemplate>
                    <tr>
                        <td><%#DataBinder.Eval(Container.DataItem,"__LeftOperand")%></td>
                        <td><%#DataBinder.Eval(Container.DataItem,"__Operator")%></td>
                        <td><%#DataBinder.Eval(Container.DataItem,"__RightOperand")%></td>
                        <td><%#DataBinder.Eval(Container.DataItem,"__Answer")%></td>
                    </tr>
                </ItemTemplate>
            </asp:Repeater> 
```

输出：

9 减 6 3 9 减 6 3 9 减 6 3 9 减 6 3 9 减 6 3 9 减 6 3 9 减 6 3 9 减 6 3 9 减 6 3 9 减 6 3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T12:09:59.407

你做错了什么：

1.  您`Random`为每个`Question`.
2.  由于您不向`Random`构造函数提供参数，因此使用默认的、基于时间的种子。这使用`Environment.TickCount`（虽然我不认为这是专门记录的），所以它具有毫秒粒度。
3.  由于您在同一毫秒内构建所有问题，因此它们将使用相同的种子。
4.  这意味着他们将获得相同的随机数序列。
5.  这意味着您会得到 10 个不同的问题，但所有问题的值都相同。

解决这个问题的最简单方法是创建你的`Random`对象`static`，这意味着它被所有`Question`对象共享——或者属于`Question`类，而不是质疑实例。这意味着它只会被构造一次，并且你会得到一个合理的随机数序列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T12:10:08.967

每个问题都有自己的`Random`实例，而且它们很可能都产生相同的值。

当您使用默认`Random`构造函数时，它会[使用派生自系统时钟的种子进行初始化](http://msdn.microsoft.com/en-us/library/h343ddh9.aspx)，如果创建对象之间的时间如此短，则很可能系统时钟值在实例化之间不会发生变化。

准确地说，是用（至少在 .NET 4.0 中）`Random`初始化的，它每毫秒只更改一次。[`Environment.TickCount`](http://msdn.microsoft.com/en-us/library/system.environment.tickcount.aspx)那是足够的时间来创建无数的`Question`对象。

解决方案：制作`Random`字段`static`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T12:19:01.010

如果 new Question() 应该返回一个新的随机问题，并且您想要 10 个随机问题，我认为“随机”函数总是返回相同的问题，因此请验证问题对象。Random 类的种子总是一样的？

# javascript - 通过 jquery 不显眼的电子邮件验证

> ID：11137711
> 
> 赞同：1
> 
> 时间：2012-06-21T12:02:41.570
> 
> 标签：javascript, jquery, jquery-validate

`validate`我想`email address`通过 jquery `unobtrusive validation`。喜欢做

任何必填字段，`data-val-required`在字段中添加属性。电子邮件也一样

验证我可以使用哪个属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T12:06:25.767

您可以使用：

```
<input type="email" ... /> 
```

当然，您需要添加 jQuery 验证插件，但我猜您已经这样做了，否则`data-val-required`也无法正常工作。

# jasper-reports - 实体名称必须紧跟在 jasper 报告中的实体引用错误中的“&”之后

> ID：11137714
> 
> 赞同：7
> 
> 时间：2012-06-21T12:02:44.340
> 
> 标签：jasper-reports, ireport, saxparseexception

我有一个包含 4 个子报告的主报告。当我在 iReport（版本 4.1.3）中生成报告时，报告生成成功。但是，当报告部署在 JBoss 服务器中时，会出现以下错误

```
Error Parsing Styled Text
"org.xml.sax.SAXParseException: The entity name must immediately follow the '&' in the entity reference jasper reports". 
```

其对应的与 datsource 没有任何映射的空白报告正在成功生成。但是，从数据源中获取值的那个会抛出这个错误。

你能告诉我可能是什么问题。

iReport版本：4.1.3

数据源：XML 数据源

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-21T14:18:11.700

我的猜测是您的 XML 数据源在某些数据中包含“&”字符。

如果是这样，将 '&' 替换为`&amp;`并尝试，它应该可以正常工作。

PS：如果他们帮助你，你应该接受答案。！

**编辑：** 查看JasperForge 论坛上的讨论[。](http://jasperforge.org/plugins/espforum/view.php?group_id=102&forumid=103&topicid=16080)说的一样

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-29T06:39:24.003

xml中常见的如何转义错误：

1.  与号 (&) 转义为`&amp;`

2.  双引号 (") 转义为`&quot;`

3.  单引号 (') 转义为`&apos;`

4.  小于 (<) 被转义为`. &lt;`

5.  大于 (>) 被转义为`. &gt;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T06:05:30.720

您应该转义特殊字符。您可以从 Apache Commons Lang 库中查看 StringEscapeUtils。

# c# - 使用 Visual Studio 扩展设置光标位置

> ID：11137716
> 
> 赞同：9
> 
> 时间：2012-06-21T12:02:45.987
> 
> 标签：c#, visual-studio-2010, envdte, visual-studio-extensions, visual-studio-sdk

我正在编写自己的 Visual Studio 2010 Extension，它应该可以帮助我浏览一个相当大的解决方案。
我已经有一个基于对话框的 VS 扩展，它根据某些搜索条件向我显示类名和函数名。我现在可以单击此类/方法，然后我已经可以打开正确的文件并跳转到该函数。
我现在要做的是将光标设置在该函数的开头。
我跳转到该函数的代码是：

```
Solution currentSolution = ((EnvDTE.DTE)System.Runtime.InteropServices.Marshal.GetActiveObject("VisualStudio.DTE.10.0")).Solution;
ProjectItem requestedItem = GetRequestedProjectItemToOpen(currentSolution.Projects, "fileToBeOpened");
if (requestedItem != null)
{
    // open the document
    Window window = requestedItem.Open(Constants.vsViewKindCode);
    window.Activate();

    // search for the function to be opened
    foreach (CodeElement codeElement in requestedItem.FileCodeModel.CodeElements)
    {
        // get the namespace elements
        if (codeElement.Kind == vsCMElement.vsCMElementNamespace)
        {
            foreach (CodeElement namespaceElement in codeElement.Children)
            {
                // get the class elements
                if (namespaceElement.Kind == vsCMElement.vsCMElementClass)
                {
                   foreach (CodeElement classElement in namespaceElement.Children)
                   {
                       try
                       {
                           // get the function elements
                           if (classElement.Kind == vsCMElement.vsCMElementFunction)
                           {
                               if (classElement.Name.Equals("functionToBeOpened", StringComparison.Ordinal))
                               {
                                   classElement.StartPoint.TryToShow(vsPaneShowHow.vsPaneShowTop, null);
                                   this.Close();
                               }
                           }
                       }
                       catch
                       {
                       }
                   }
               }
           }
       }
   }
} 
```

这里的重点是`window.Activate();`打开正确的文件并`classElement.StartPoint.TryToShow(vsPaneShowHow.vsPaneShowTop, null);`跳转到正确的功能。
不幸的是，光标未设置为请求函数的开头。我怎样才能做到这一点？我在想类似的东西`classElement.StartPoint.SetCursor()`。
干杯西蒙

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-22T12:39:33.783

我终于明白了......
你只需要使用`TextSelection`你有方法的接口`MoveToPoint`。
所以上面的代码现在是：

```
// open the file in a VS code window and activate the pane
Window window = requestedItem.Open(Constants.vsViewKindCode);
window.Activate();

// get the function element and show it
CodeElement function = CodeElementSearcher.GetFunction(requestedItem, myFunctionName);

// get the text of the document
TextSelection textSelection = window.Document.Selection as TextSelection;

// now set the cursor to the beginning of the function
textSelection.MoveToPoint(function.StartPoint); 
```

# c# - 使用任务在后台处理列表视图

> ID：11137718
> 
> 赞同：0
> 
> 时间：2012-06-21T12:02:52.100
> 
> 标签：c#, winforms, backgroundworker, task-parallel-library, multitasking

我有以下代码：

```
 private void _DoValidate(object sender, DoWorkEventArgs e)
    {
        this.BeginInvoke(new MethodInvoker(() =>
        {
            Parallel.ForEach
                (this.listView2.CheckedItems.OfType<ListViewItem>(),
                new ParallelOptions { MaxDegreeOfParallelism = 4 },
                (item) =>
                {
                    List<string> data = new List<string>();
                    for (int s = 1; s < 5; s++)
                    {
                        if (item.SubItems[s].Text != null)
                            data.Add(item.SubItems[s].Text);
                        else
                            data.Add("");
                    }
                    this.BeginInvoke((Action)(delegate()
                    {
                        bool verified = checkdata(data);
                        item.Checked = verified;
                    }));
                });
        }));
    } 
```

它正在工作，但在所有任务完成后它正在更新 gui。我添加了一个后台工作，以便能够在任务运行时使用 gui。

**我怎样才能使这个功能在它们最终被验证后立即更新列表视图项？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:35:45.633

我认为你的问题是你只是在 UI 线程上排队。我不知道这条线到底是做什么的

```
this.BeginInvoke(new MethodInvoker(() => 
```

但看起来它在 UI 线程上运行了一些东西。

Parallel.ForEach 也在 UI 线程上运行，最终分叉成一些调用的工作线程

```
this.BeginInvoke((Action)(delegate() 
```

再次 - 这只是在 UI 线程上排队工作，直到 Parallel.ForEach 方法返回（它等待其所有工作线程首先完成）才会执行，但它也在 UI 线程上运行！

我的建议是通过使用 BackgroundWorker 或仅调用 Task.Factory.StartNew 在工作线程上运行 Prallel.ForEach。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:13:36.267

如果您使用 4.0，则可以使用[Task.ContinueWith](http://msdn.microsoft.com/en-us/library/dd270696.aspx)构造。

以这种方式在每个任务的`ContinueWith`执行 UI 更新。

希望这可以帮助。

# javascript - “Permission denied to shadow native property”使用 location.replace 在 JavaScript 中重定向

> ID：11137720
> 
> 赞同：2
> 
> 时间：2012-06-21T12:02:55.073
> 
> 标签：javascript

我被我面临的这个问题所困扰`location.replace`。我需要模拟 HTTP 重定向（我不希望我的用户因为我正在实现的这个特定功能而陷入永无止境的后退按钮惨败），所以我使用`location.replace`而不是`location.href`重定向。但是，我经常在控制台上收到以下错误消息`Firefox 12.0`。

`Permission denied to shadow native property`

下面是我的代码（在此处添加代码时，我从请求 URL 中屏蔽了我的服务器详细信息）

```
$(document).ready(function() {

    $(".workout_sel_month").click(function() {
       month_number = $(this).attr('id').replace(/month/g,"");
       weekwise_workout_url = "http://www.example.com/viewrecord/getscheduleformonth";
       location.replace = weekwise_workout_url + "&month_number=" + month_number;
    });

}); 
```

请注意，如果我`location.href`改用它，它就像一个魅力。这可能是什么原因？. 如果这是一个重复的帖子（我做了一些基本的搜索并找到了一些帖子，但没有一个特别适合我的情况），我最诚挚的道歉，在这种情况下，请在此处将我与适当的问题联系起来。:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T12:05:09.507

`location.replace`是一个**函数**。通过为您尝试覆盖它的属性分配一个值（不允许这样做）。

`location.href`另一方面，只包含一个您可以更改的字符串。

请参阅[MDN 文档](https://developer.mozilla.org/en/DOM/window.location)。

* * *

再澄清一点：

仅`location.replace`作为函数这一事实并不意味着该属性是不可变的，但它使这样做的决定是可以理解的：
函数应该被调用，它们不应该被覆盖。我认为这就是为什么这个属性相对于其他属性是不可变的。包含字符串、数字等的属性更有可能被更改。

但是任何属性都可以被标记为不可变的，无论它的价值如何。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T12:06:24.107

我是一个函数而不是一个值。浏览器现在假设的是您希望覆盖一个本机属性，该属性是一个具有您自己的函数的函数。这会引发错误。正确的语法是

location.replace("url");

你的代码需要变成

```
$(document).ready(function() {

    $(".workout_sel_month").click(function() {
       month_number = $(this).attr('id').replace(/month/g,"");
       weekwise_workout_url = "http://www.example.com/viewrecord/getscheduleformonth";
       location.replace(weekwise_workout_url + "&month_number=" + month_number);
    });

}); 
```

# java - Android 广播接收器和传递意图

> ID：11137724
> 
> 赞同：1
> 
> 时间：2012-06-21T12:03:15.510
> 
> 标签：java, android, networking

我有一个简单的广播接收器设置来接收系统意图，通知我的应用程序网络状态的变化。这个想法是要么显示一个对话框，告诉用户他们已经离开了运行应用程序的 WiFI 网络，要么完全失去了连接。

```
public class NetworkChangedReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {

    if(intent.getAction().equals(WifiManager.SUPPLICANT_CONNECTION_CHANGE_ACTION)){

        boolean connected = intent.getBooleanExtra(WifiManager.EXTRA_SUPPLICANT_CONNECTED,false);
        if(!connected){
            //connection off
            Log.w("Network Changed","SUPPLICATION_CONNECTION_CHANGE_ACTION");

        }
    }else if(intent.getAction().equals(WifiManager.NETWORK_STATE_CHANGED_ACTION)){

        NetworkInfo info = intent.getParcelableExtra(WifiManager.EXTRA_NETWORK_INFO);
        if(info.isConnected()){
            //connection on or WIFI changed
            Log.w("Network Changed","NETWORK_STATE_CHANGED_ACTION");
        }
    }
} 
```

}

我是否可以以这种方式显示对话框？我无法知道用户在应用程序中的位置，接收到广播时的未知状态。我的另一个选择是使用带有字符串和布尔额外测试的意图将用户跳回我的登录活动。这样做是不好的编程习惯吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:09:41.683

```
I have no way of knowing where the user is in the application, 
```

在这种情况下，当您收到广播时，您应该考虑在通知栏中显示通知

> 我的另一个选择是使用带有字符串和布尔额外测试的意图将用户跳回我的登录活动。是不是很糟糕

当用户单击通知时，您可以将它们导航到登录活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:25:26.293

在这种情况下，在您的每个活动中放置相同的广播接收器，哪个活动将在前面将接收此广播，然后您可以显示一个对话框，说明该活动中的连接丢失并做任何您想做的事情。

# dictionary - 什么是 PostScript 字典，如何访问它们（通过 Ghostscript）？

> ID：11137732
> 
> 赞同：7
> 
> 时间：2012-06-21T12:03:36.107
> 
> 标签：dictionary, stack, ghostscript, postscript

我通常将`ghostscript`其视为命令行工具；然而，我从未停止对那里存在的大量设置和选项感到惊讶——这是因为它`ghostscript`是一个成熟的 PostScript 语言解释器（我经常忘记）。

例如，在[查询 Ghostscript 以获取输出设备的默认选项/设置（例如 'pdfwrite' 或 'tiffg4'）](https://stackoverflow.com/questions/11001107/querying-ghostscript-for-the-default-options-settings-of-an-output-device-such/11002313#comment14584841_11002313)；学习如何检索给定输出设备的默认选项。但是，我想知道的是 - 这些选项与所谓的 PostScript 字典有关吗？

或者，换句话说——什么是 PostScript 字典？以及有哪些设施`ghostscript`可以查询（并可能）修改这些数据？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T14:00:00.047

用最简单的术语来说：**在 PostScript 中，字典是 *键（名称）+ 值*对的列表。**字典允许 PostScript 解释器查找键是否存在并获取其值以在任何过程中使用它。解释器还可以创建键、存储或修改值，甚至创建完整的自定义字典（由 PostScript 代码处理）。键通常是*类型名称*（但它们也可以是任何其他类型，但*null*除外）。

对于 PostScript 解释器的任何实现，必须始终存在其中两个字典：

*   **`systemdict`** 这个包含预定义的 PostScript 操作符（以及使它们执行 PostScript 规范所期望的操作的实现）。

*   **`userdict`** 它包含 PostScript 程序的变量和过程（将“过程”视为由语言定义的运算符和程序定义的值和参数组合而成的函数或子例程）。

*关于名称*的一个词：名称是其他编程语言的唯一*标识符*（并且它们区分大小写）。这些标识符可以是变量或过程名称。它们可以由 ASCII 的 256 个字符的任意组合组成（但它们不是*字符串*）。

您可能知道，PostScript 是一种面向*堆栈*的语言。它使用了几个堆栈：

*   **操作数堆栈** 此堆栈保存每个操作数和中间操作的每个结果（将最后一个结果临时转入操作数堆栈的最顶部元素）。

*   **字典栈** 顾名思义：这个栈只保存字典。因此，堆栈定义了任何键/名称查找的当前上下文。

*   **执行栈** 这一个包含*可执行*对象，即主要是当前正在执行的*程序*和*文件。*如果解释器中断了当前对象的执行，它会将被中断的对象放到这个堆栈中。在一个对象完全执行后，它会从堆栈中移除，并从现在最顶层的那个继续执行。

*   **图形状态堆栈** 该堆栈承载当前用于弹出图形元素的上下文：当前线宽设置、当前字体、当前颜色或灰度值、当前路径... 当前图形状态可以保存（**`gsave`**）并在以后恢复（**`grestore`**）。最顶层的图形状态始终是*当前图形状态*。

所有这些堆栈都是相互独立的。然而，操作数、字典和图形状态堆栈都在 PostScript 程序的控制之下（也就是说，可以被它操纵）。执行堆栈是解释器的唯一属性。

对于每个堆栈都有一定的限制（如可以存储在其上的元素数量等）。PostScript 知道可以操作堆栈的运算符：将新元素放入堆栈，删除最顶部的元素（**`pop`**），复制最顶部的元素（**`dup`**），打乱堆栈上元素的顺序（**`roll`**），交换两个顶部-大多数元素（**`exch`**），还有更多（PostScript 编程的一个很好的介绍是 Adob​​e 的*“蓝皮书”*）。

正如我已经说过的，字典有自己的*堆栈*，其中包含 PostScript 解释器可能使用的所有字典。

在该堆栈上可能有一个单独的字体字典，或者 PostScript 程序想要创建（使用**`dict`**关键字）并私下使用的任意数量的字典，或者特定于某个 P​​ostScript 解释器的一些字典，例如 Ghostscript。

`systemdict`永远是最底层的；以上是`userdict`. 这两个不能从字典堆栈中删除，而所有其他的都可以受制于任何堆栈操作运算符（例如**`pop`**从堆栈中删除最顶部的元素）。

每当解释器查找一个名字时，它都会在字典中搜索那个名字，从最上面的字典开始。因此`userdict`之前搜索过`systemdict`。一旦找到名称（键），解释器就会停止搜索并使用该键（或者更确切地说，它保存的值）。这种体系结构的结果是 PostScript 程序员可以`systemdict`用他自己的变体覆盖任何预定义的 PostScript 运算符。

此外，某些字典可以用于 PS 程序“私有”（不可访问，例如字体字典）或“只读”。

* * *

**更新** ——更多答案：

*   [**如何获取包含在`userdict`or中的其他字典列表`systemdict`？**](https://stackoverflow.com/a/11144359/359307)
*   [**Ghostscript 高级用户如何打印出字典内容？**](https://stackoverflow.com/a/11141807/359307)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-21T15:43:32.487

其他答案已经涵盖了*“什么是字典？”* 你问题的一部分。现在让我们转向*“Ghostscript 如何访问它们？”*

也许问题应该是：*“我（高级用户、开发人员、极客……）如何访问它们？”*

您可以通过编写一个简单的 PostScript 程序单行程序来打印出 PostScript 解释器（可能是 Ghostscript）已知的任何可访问字典的内容 - 或者只需调用解释器（Ghostscript）并将程序代码移交给命令行 ( `-c ...`)。

为此，您只需要知道相应字典的名称。

让我们看一个有趣的内部 Ghostscript 字典，称为`.distillersettings`：

```
gs \
 -dNODISPLAY \
 -c ".distillersettings {exch ==only ( ) print ==} forall quit" 
```

结果：

```
/default -dict-
/prepress -dict-
/PSL2Printer -dict-
/ebook -dict-
/screen -dict-
/printer -dict- 
```

乍一看，这可能不会告诉你太多。但是您可能会认出该字典中的一些键名：`/prepress`, `/printer`, `/screen`, `/ebook`...

`-sDEVICE=pdfwrite`所有这些您都可以在 Ghostscript 命令行上使用，以在您希望通过（Ghostscript 'Distiller'-类似功能）进行输出时请求一组预定义的设置。要请求这样一组设置，只需添加`-dPDFSETTINGS=/printer`到命令行。

现在再看一眼，您会发现`.distillersettings`字典的内容本质上是一组 6 个以上的字典。它是一本“字典中的字典”。

默认情况下不打印字典内容（不使用上面的 PostScript 代码）。但是，如果您需要它们，您可以使用特定于 Ghostscript 的过程，而不是上述命令`===`中的标准 PostScript 语言运算符。`==`此过程的行为与`==`execpt 相同，它还扩展字典并打印其中包含的所有键：值对。

**小心这个`===`过程：**`-dict-`你试图扩张的东西可能很长，可能会导致你失去视力。:-)

然而，在我们目前的情况下，它仍然是可以管理的：

```
gs \
 -dNODISPLAY \
 -c ".distillersettings {exch ==only ( ) print ===} forall quit" 
```

现在的输出是：

```
 /default << /Optimize false /DoThumbnails false /PreserveEPSInfo true /ColorConversionStrategy /LeaveColorUnchanged /DownsampleMonoImages false /EmbedAllFonts true /CannotEmbedFontPolicy /Warning /PreserveOPIComments true /GrayACSImageDict << /HSamples [2 1 1 2] /VSamples [2 1 1 2] /QFactor 0.9 /Blend 1 >> /DownsampleColorImages false /PreserveOverprintSettings true /CreateJobTicket false /AutoRotatePages /PageByPage /NeverEmbed [/Courier /Courier-Bold /Courier-Oblique /Courier-BoldOblique /Helvetica /Helvetica-Bold /Helvetica-Oblique /Helvetica-BoldOblique /Times-Roman /Times-Bold /Times-Italic /Times-BoldItalic /Symbol /ZapfDingbats] /ColorACSImageDict << /HSamples [2 1 1 2] /VSamples [2 1 1 2] /QFactor 0.9 /Blend 1 >> /DownsampleGrayImages false /UCRandBGInfo /Preserve >>
 /prepress << /DoThumbnails true /MonoImageResolution 1200 /ColorImageDownsampleType /Bicubic /PreserveEPSInfo true /ColorConversionStrategy /LeaveColorUnchanged /GrayImageDownsampleType /Bicubic /EmbedAllFonts true /CannotEmbedFontPolicy /Error /PreserveOPIComments true /GrayImageResolution 300 /GrayACSImageDict << /ColorTransform 1 /QFactor 0.15 /Blend 1 /HSamples [1 1 1 1] /VSamples [1 1 1 1] >> /ColorImageResolution 300 /PreserveOverprintSettings true /CreateJobTicket true /AutoRotatePages /None /MonoImageDownsampleType /Bicubic /NeverEmbed [] /ColorACSImageDict << /ColorTransform 1 /QFactor 0.15 /Blend 1 /HSamples [1 1 1 1] /VSamples [1 1 1 1] >> /CompatibilityLevel 1.4 /UCRandBGInfo /Preserve >>
 /PSL2Printer << /DoThumbnails false /CompatibilityLevel 1.2 /TransferFunctionInfo /Preserve /MonoImageResolution 1200 /PreserveEPSInfo true /CompressFonts true /ColorImageDownsampleType /Bicubic /GrayImageDownsampleType /Bicubic /ColorConversionStrategy /LeaveColorUnchanged /EmbedAllFonts true /ColorACSImageDict << /ColorTransform 1 /QFactor 0.15 /Blend 1 /HSamples [1 1 1 1] /VSamples [1 1 1 1] >> /CannotEmbedFontPolicy /Error /PreserveOPIComments true /CompressPages true /GrayImageResolution 600 /GrayACSImageDict << /ColorTransform 1 /QFactor 0.15 /Blend 1 /HSamples [1 1 1 1] /VSamples [1 1 1 1] >> /ColorImageResolution 600 /PreserveOverprintSettings true /AutoRotatePages /None /MonoImageDownsampleType /Bicubic /ASCII85EncodePages true /MaxViewerMemorySize 8000000 /NeverEmbed [] /PreserveHalftoneInfo true /UCRandBGInfo /Preserve >>
 /ebook << /DoThumbnails false /MonoImageResolution 300 /ColorImageDownsampleType /Bicubic /PreserveEPSInfo false /ColorConversionStrategy /sRGB /GrayImageDownsampleType /Bicubic /EmbedAllFonts true /CannotEmbedFontPolicy /Warning /PreserveOPIComments false /GrayImageResolution 150 /GrayACSImageDict << /ColorTransform 1 /QFactor 0.76 /Blend 1 /HSamples [2 1 1 2] /VSamples [2 1 1 2] >> /ColorImageResolution 150 /PreserveOverprintSettings false /CreateJobTicket false /AutoRotatePages /All /MonoImageDownsampleType /Bicubic /NeverEmbed [/Courier /Courier-Bold /Courier-Oblique /Courier-BoldOblique /Helvetica /Helvetica-Bold /Helvetica-Oblique /Helvetica-BoldOblique /Times-Roman /Times-Bold /Times-Italic /Times-BoldItalic /Symbol /ZapfDingbats] /ColorACSImageDict << /ColorTransform 1 /QFactor 0.76 /Blend 1 /HSamples [2 1 1 2] /VSamples [2 1 1 2] >> /CompatibilityLevel 1.4 /UCRandBGInfo /Remove >>
 /screen << /DoThumbnails false /MonoImageResolution 300 /ColorImageDownsampleType /Average /PreserveEPSInfo false /ColorConversionStrategy /sRGB /GrayImageDownsampleType /Average /EmbedAllFonts true /CannotEmbedFontPolicy /Warning /PreserveOPIComments false /GrayImageResolution 72 /GrayACSImageDict << /ColorTransform 1 /QFactor 0.76 /Blend 1 /HSamples [2 1 1 2] /VSamples [2 1 1 2] >> /ColorImageResolution 72 /PreserveOverprintSettings false /CreateJobTicket false /AutoRotatePages /PageByPage /MonoImageDownsampleType /Average /NeverEmbed [/Courier /Courier-Bold /Courier-Oblique /Courier-BoldOblique /Helvetica /Helvetica-Bold /Helvetica-Oblique /Helvetica-BoldOblique /Times-Roman /Times-Bold /Times-Italic /Times-BoldItalic /Symbol /ZapfDingbats] /ColorACSImageDict << /ColorTransform 1 /QFactor 0.76 /Blend 1 /HSamples [2 1 1 2] /VSamples [2 1 1 2] >> /CompatibilityLevel 1.3 /UCRandBGInfo /Remove >>
 /printer << /DoThumbnails false /MonoImageResolution 1200 /ColorImageDownsampleType /Bicubic /PreserveEPSInfo true /ColorConversionStrategy /UseDeviceIndependentColor /GrayImageDownsampleType /Bicubic /EmbedAllFonts true /CannotEmbedFontPolicy /Warning /PreserveOPIComments true /GrayImageResolution 300 /GrayACSImageDict << /ColorTransform 1 /QFactor 0.4 /Blend 1 /HSamples [1 1 1 1] /VSamples [1 1 1 1] >> /ColorImageResolution 300 /PreserveOverprintSettings true /CreateJobTicket true /AutoRotatePages /None /MonoImageDownsampleType /Bicubic /NeverEmbed [] /ColorACSImageDict << /ColorTransform 1 /QFactor 0.4 /Blend 1 /HSamples [1 1 1 1] /VSamples [1 1 1 1] >> /CompatibilityLevel 1.4 /UCRandBGInfo /Preserve >> 
```

还是不怎么好看。所以让我们试着让它变得更好。我们可以这样做的方法是修改我们的 PostScript 代码：我们现在告诉它访问`.distillersettings`字典并从中获取其中一个键的值（让我们使用`/screen`）。由于我们知道该值是另一个字典，因此我们知道我们将获得另一组 key:value 对，我们将能够以与之前相同的方式对其进行格式化：

```
gs \
 -q \
 -dNODISPLAY \
 -c ".distillersettings /screen get {exch ==only ( ) print ===} forall quit" 
```

现在这看起来更好，不是吗？看看自己：

```
/DoThumbnails false
/MonoImageResolution 300
/ColorImageDownsampleType /Average
/PreserveEPSInfo false
/ColorConversionStrategy /sRGB
/GrayImageDownsampleType /Average
/EmbedAllFonts true
/CannotEmbedFontPolicy /Warning
/PreserveOPIComments false
/GrayImageResolution 72
/GrayACSImageDict -dict-
/ColorImageResolution 72
/PreserveOverprintSettings false
/CreateJobTicket false
/AutoRotatePages /PageByPage
/MonoImageDownsampleType /Average
/NeverEmbed [/Courier /Courier-Bold /Courier-Oblique /Courier-BoldOblique /Helvetica     /Helvetica-Bold /Helvetica-Oblique /Helvetica-BoldOblique /Times-Roman /Times-Bold /Times-Italic /Times-BoldItalic /Symbol /ZapfDingbats]
/ColorACSImageDict -dict-
/CompatibilityLevel 1.3
/UCRandBGInfo /Remove 
```

正如您敏锐的眼光可能已经发现的那样：一些关键值又是*字典*。您可以再次使用上述命令，这次用 a`===`代替第二个`==`来解决`/GrayACSImageDict -dict-`诸如此类可能一直隐藏的谜团......

无论如何，现在您知道通过简单地使用`-dPDFSETTINGS=/screen`而不是枚举嵌入在此`/screen`字典中的所有单个参数来节省键入的内容...

*如果您想要一般的“屏幕”*质量输出， 您还知道需要覆盖的单个值，但不同之处在于**所有**字体都被嵌入：

```
gs \
 -o out.pdf \
 -sDEVICE=pdfwrite \
 -dPDFSETTINGS=/screen \
 -c "<</NeverEmbed [ ] /AlwaysEmbed [/Courier /Courier-Bold /Courier-Oblique /Courier-BoldOblique /Helvetica /Helvetica-Bold /Helvetica-Oblique /Helvetica-BoldOblique /Times-Roman /Times-Bold /Times-Italic /Times-BoldItalic /Symbol /ZapfDingbats]>> setdistillerparams" \
 -f input.pdf 
```

只要您知道它使用的字典的名称，您就可以通过这种方式探索很多关于 Ghostscript 内部的有趣事物。:-)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-06T00:07:16.323

已经有很多好的答案，但没有人提到这一点：

调用 ghostscript 时，`-d`和`-s`选项在 systemdict 中创建初始定义。这允许您对[postscript 程序进行参数化调用](http://groups.google.com/group/comp.lang.postscript/browse_thread/thread/25c20c2ed26eefdb/6cce20147844f382#6cce20147844f382)。

用于`-dname[=token]`将值设置为 null 或数字（或任何其他单个 postscript 标记）。用于`-sname=string`设置字符串值（在大多数情况下，它与名称一样有效）。

您可以使用正确的运算符在某种程度上操纵所有堆栈。

*   `token`从字符串或文件推送到操作数堆栈（这是解释器循环用来消耗程序流的内容，因此无论是通过文件输入代码还是直接从键盘输入代码，这都是您使用的内容）
*   `pop`从操作数堆栈中丢弃
*   `begin`推送到字典堆栈
*   `end`从字典堆栈中弹出
*   `run`, `exec`,`%procedure-invocation`推送到执行堆栈
*   `exit`,`stop`弹出或清除执行堆栈
*   `gsave`在图形堆栈上推送 gstate
*   `grestore`弹出图形堆栈
*   `save`推送所有 VM 内容的副本（所有字典和数组，但不是字符串）
*   `restore`将内存倒回保存状态（将所有字典和数组恢复到以前的状态）

字典作为复合对象，继承了所有复合对象共有的许多运算符。

*   `-typename-`创建对象，例如`dict`
*   `length`报告对象大小
*   `put`插入一个元素
*   `get`检索一个元素
*   `copy`用另一个对象的内容填充一个对象
*   `forall`对每个元素做一些事情
*   `*load`备用检索元素（对于字典，使用然后`load`执行搜索；对于数组，将数组的全部内容溢出到操作数堆栈上）`where``get``aload`
*   `*store`备用插入元素（对于字典，如果找到，则`store`执行搜索，`where`然后执行搜索；对于数组，从堆栈上的对象填充数组）`put``def``astore`

在这个套件中，字典添加

*   `def`放入当前字典（字典堆栈顶部）
*   `known`元素的查询字典
*   `where`在所有字典中查询元素
*   `maxlength`PS Level 2 添加自动扩展字典和 gc 后不再有趣
*   `dictstack`将 dictstack 复制到一个数组中（也许你想自下而上搜索，你可以！）
*   `前面没有斜杠的名称`/`会自动`load`编辑，如果可执行，则执行`
`*   `//`while`token`正在构造一个 postscript 对象，任何以双斜杠开头的名称都将被`load`编辑并替换到过程数组中。这非常强大，因为您可以模仿 Lisp 宏。`

 `* * *

*编辑：*还有一件事。创建字典时，当您选择字典的大小时，需要权衡时间/空间。字典几乎肯定是作为哈希表实现的（除了最简单的解释器之外），大多数哈希函数可以在表大约半满时避免冲突（经验法则：**使用双倍大小的字典来提高速度**）。当然，由于 level-2，当您添加 size+1 个元素时，字典会自动增长，大概是通过分配一个新的 k*size 字典（其中 k 可能是 1.5 或 2）；但是手动控制尺寸可以提高速度。在级别 1 中，如果您没有多次引用您的字典，您可以安装一个替换为`dictfull`in`errordict`增长 dict 并重新执行 put （或 def 或其他）。由于 level-2 在内部执行此操作，因此它可以替换所有引用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-21T18:21:06.233

如果要获取包含在**`systemdict`**和**`userdict`**字典中的其他字典的列表，只需运行：

```
for _dict in userdict systemdict; \
   do \
   gs \
     -dNODISPLAY \
     -c "${_dict} {exch ==only ( ) print ==} forall quit"; \
done \
| awk '{print $1, $2}' \
| grep -- -dict- \
| sort 
```

这将产生一个字典名称的排序列表，您可以调查这些字典名称以查找潜在的“有趣”名称。

你会发现这样的名字，如`Fontmap`, `localdict`, `AdobeGlyphList`, `userparams`, `.eexec_param_dict`, `.substitutefamilies`, `EncodingDirectory`, `colorspacedict`, `.distillerparamkeys`, `devicedict`, `.symbol_list`, ...

使用这些名称中的每一个，您都可以通过运行 fe 来查找有关 Ghostscript 内部的或多或少有趣的信息和花絮：

```
gs \
  -q \
  -dNODISPLAY \
  -c "Fontmap {exch ==only ( ) print ==} forall quit" 
```

如您所见，甚至 Ghostscript 使用的*Fontmap*也存储在字典中。我在本地的结果摘录如下：

```
[....]
/Arial [/ArialMT]
/Arial,Bold [/Arial-BoldMT]
/AvantGarde-Book [/URWGothicL-Book]
/Bookman-Demi [/URWBookmanL-DemiBold]
/Calligraphic-Hiragana [(fhirw.gsf)]
/Calligraphic-Katakana [(fkarw.gsf)]
/Charter-Bold [/CharterBT-Bold]
/CharterBT-Bold [(bchb.pfa)]
/Courier [/NimbusMonL-Regu]
/Courier-Bold [/NimbusMonL-Bold]
/Courier-BoldOblique [/NimbusMonL-BoldObli]
/Courier-Oblique [/NimbusMonL-ReguObli]
/Helvetica [/NimbusSanL-Regu]
/Helvetica-Bold [/NimbusSanL-Bold]
/NewCenturySchlbk-Bold [/CenturySchL-Bold]
/Palatino-Roman [/URWPalladioL-Roma]
/Symbol [/StandardSymL]
/Times-Bold [/NimbusRomNo9L-Medi]
/TimesNewRoman,Bold [/TimesNewRomanPS-BoldMT]
/Utopia-Regular [(putr.pfa)]
/ZapfDingbats [/Dingbats]
[....] 
```

**注意事项：**当您想要操作 Ghostscript 应该使用的 Fontmap***文件***（通常，或用于特定作业）时，上述文件格式实际上并不是您必须使用的文件格式。对于该格式，请阅读 Ghostscript 提供的示例 Fontmap 文件中的注释。上面的列表是 Ghostscript 存储在其内部***字典***中的字体图表示。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-21T13:00:02.870

PostScript 中的字典是一个“容器”对象，它们本质上是一个对、一个键和一个值的列表。有关详细信息，请参阅 PostScript 语言参考手册，尤其是第三版中的第 3.3.9 节。

字典通常用于将一组参数传递给 PostScript 运算符或函数，例如图像运算符可以接受字典参数，但它们同样可以简单地存储。

字典可以具有访问权限，因此可以具有只读字典，其值可以检查但不能修改，并且字体字典可以是“无权访问”以防止在 PostScript 中提取轮廓数据。

字典中非只读或不可访问的条目可以随意修改。`

# unit-testing - 测试 - 命名法

> ID：11137735
> 
> 赞同：3
> 
> 时间：2012-06-21T12:03:39.573
> 
> 标签：unit-testing, testing, tdd, integration-testing, bdd

类通常通过使用以下语法编写的测试进行测试，这些语法由大量测试框架（例如 Ruby 的 Unit::Test；或本例中的 MiniTest）提供：

```
class TestLolcat < MiniTest::Unit::TestCase
  def setup
    @lolcat = Lolcat.new
  end   
  def test_that_lolcat_can_have_cheezburger
    assert_equal true, @lolcat.i_can_has_cheezburger?
  end
end 
```

或者使用第二种语法编写的测试，由一组重叠的测试框架提供（例如 RSpec；或者在这个例子中，MiniTest 再次）：

```
describe Lolcat do
  before do
    @lolcat = Lolcat.new
  end
  it "must be able to have cheezburger" do
    @lolcat.i_can_has_cheezburger?.must_equal true
  end
end 
```

*（可能还有其他语法系列也适用于测试类方法和属性，但这是我感兴趣的两个。）*

我想知道的是：**这两个语法家族的正确名称是什么？**

如果您想了解更多关于我*为什么要问的信息，请参阅该行下方。*

* * *

我问这个问题的原因是搜索网络并没有产生明显的共识。例如，[MiniTest 文档](http://docs.seattlerb.org/minitest/)将上面的*第一个*语法称为*“单元测试”*语法，将*第二个*语法称为*“规范”*语法。相比之下，Michael Hartl将用[*第二种*](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#sec%3afirst_tests)[语法](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#sec%3afirst_tests)[编写的类方法和属性测试描述为*“单元测试”*](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#sec%3afirst_tests)**。用这种语法编写的测试测试由多个类的交互产生的更高级别的功能，他称它们为*“集成测试”*。**

 **我还看到人们将第一种和第二种语法分别描述为[*"Test::Unit style"*和*"RSPec-esque"*，](http://www.rubyinside.com/a-minitestspec-tutorial-elegant-spec-style-testing-that-comes-with-ruby-5354.html)或*"TDD"*语法和*"BDD"*语法。*第二种*语法的其他名称包括*“ ['should-like syntax](http://test-spec.rubyforge.org/test-spec/) ”*和*“ [**it** syntax](http://www.ultrasaurus.com/sarahblog/2011/04/on-choosing-rspec-as-a-test-framework/) ”*。

我的理解（含糊地表明 Hartl 是正确的）如下：

*   *TDD*是一种*实践*，而不是一种测试语法。具体来说，通常是编写一个失败的测试（例如单元测试或集成测试），然后编写代码使测试通过，然后在适当的情况下进行重构，然后重新开始循环。
*   [*BDD*](http://dannorth.net/introducing-bdd/)也是一种*实践*，但它确实对测试语法做出了一些有限的规定。具体来说，它是遵循 TDD 的做法，但在测试名称中使用“应该”作为第一个单词，并在适当的情况下嵌套测试代码以提供上下文。
*   *单元测试*是一种*实践*，而不是一种测试语法。特别是测试单个代码单元的实践（例如类方法或属性）
*   *单元测试*是在单元*测试*过程中编写的测试，与使用的语法无关。
*   *集成测试*是一种*实践*，而不是一种测试语法。特别是测试由多个类的交互产生的高级功能的实践。

但是，这仍然不能完全解决问题。显然，我不是测试实践命名法、测试类型或测试语法方面的专家。对于上面给出的两种语法，我能想到的最好的名称分别是*"'assert' syntax"*和*"'it ... do' syntax"*。除非这些名称被广泛使用，否则我需要您的建议，StackOverflow 用户！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:08:09.657

我不确定每个都有一个公认的定义。

我喜欢以这些方式思考它们。

迷你测试版更像是一种*断言*

rspec 版本更像是一个*规范*

后者是为了引导您远离对“测试”的强调，而更多地是为了从利益相关者的角度排除需求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T08:09:19.810

如果我们分享一些关于 BDD 和 TDD 的历史，它可能会澄清一些事情。

早在 2003 年，TDD 选择的单元测试框架是 JUnit。Dan North 开始[编写 JBehave 作为 JUnit 的替代品](http://lizkeogh.com/2007/03/08/jbehave-10-released/)，使用[“should”而不是“test”](http://dannorth.net/introducing-bdd/) ——因此，BDD 语法。现在这看起来与您在 Ruby 中所做的（以及 RSpec 所做的）不太相似，但尽管如此，RSpec 是作为同一事物的 Ruby 版本创建的。JBehave 从未嵌套测试代码；它只有“应该”用于单元级示例，然后是其他一些用于运行全系统场景的 gubbins。Dan 将场景运行器迁移到 Ruby，在那里它成为 RSpec 故事运行器，然后最终成为 Cucumber。

因此，“它...应该”语法绝对是单元级 BDD。大多数人都熟悉 BDD 作为全系统场景，但这并不是 BDD 的起点。如今，BDD 并不是一种真正的实践。这是一种[直接用于项目愿景的迷你方法](http://lizkeogh.com/2012/06/01/bdd-in-the-large/)——以防万一你遇到类似的困惑。并且 JBehave 2.0 被重写以处理场景和步骤，并且失去了单元级测试以及模拟框架，因为那时 JUnit 和 Mockito 运行良好。但是，尽管如此，这就是“应该”开始的地方。

现在......一旦你使用“必须”而不是“应该”，你就会失去“应该”提供[的不确定感。](http://lizkeogh.com/2012/02/20/its-about-the-examples-you-cant-find-not-the-ones-you-can/)使用“应该”可以让您提出很多问题，其中最重要的是“应该吗？” 所以，任何使用“必须”而不是“应该”的东西都不再是真正的 BDD 语法了。这是一个混合体。

顺便说一句，我们在谈论 BDD 时尽量避免使用“测试”一词，因此它们不是在测试过程中编写的单元测试；它们是在设计代码的过程中编写的类行为方式的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:45:35.310

在处理软件时，需要区分“**什么**”和“**如何**”：程序应该做什么，它是如何工作的。

恕我直言，重要的是要记住在开发的所有阶段两者之间的区别。这种区别支持几个原则，例如[针对接口编码](http://wiki.apidesign.org/wiki/Code_Against_Interfaces,_Not_Implementations)、[责任驱动设计](http://en.wikipedia.org/wiki/Responsibility-driven_design)、[合同和断言设计](http://en.wikipedia.org/wiki/Assertion_%28computing%29#Assertions_in_design_by_contract)以及单元测试。

唉，将这两个概念解耦并不总是那么容易。诸如排序之类的经典示例很容易处理：存在几种排序算法（如何排序），它们都产生一组排序的元素（什么），可以很容易地表示为断言、契约、不变量。对于业务代码，情况可能变得不太清楚。

我相信这两种语法从根本上实现了相同的目标，但第二种方法有助于思考“什么”，而不是“如何”。让我们考虑两个陈述：

> 断言值 % 2 = 0
> 
> 值应该是偶数

它们强制执行相同的不变量，但第二个更强调“什么”，并且更易于阅读。

Smalltalk 使用例如这种`should`措辞，但测试是类似于 Ruby 中的命令式代码。

```
SetTestCase>>testAdd
    empty add: 5.
    self should: [empty includes: 5] 
```

不幸的是，我的题外话仍然没有回答你的问题，而且评论太长了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T12:43:21.043

测试方法没有全球公认的语法名称。大多数单元测试工具都鼓励某种约定，比如 JUnit 鼓励所有测试方法名称都以“test”开头，现在通过 @Test 注释已经不需要了。

大多数单元测试工具都建议开发人员同意的某种**约定**。测试方法名称没有语法，因为目标受众是应该很容易掌握测试方法功能的开发人员。

如果您正在寻找测试上下文中的定义，请查看 Gerard Meszaros 的“xUnit 测试模式”一书。作者对不同的术语进行了一些澄清。他对“测试替身”的定义已被多次引用。**

# iphone - iPhone-仅在appdelegate中的HTTP请求完成后才加载UIViewController

> ID：11137736
> 
> 赞同：0
> 
> 时间：2012-06-21T12:03:41.087
> 
> 标签：iphone, objective-c, ios5

我正在创建一个应用程序，我在其中读取 JSON 提要并将内容 json 存储在文件中。每次用户打开应用程序时，我都会发送一个 http 请求并更新文件中的内容。

现在，当我在 Appdelegeate 的“应用程序 didFinishLaunchingWithOptions”函数中调用 HTTP 请求时，Http 请求在另一个线程中运行，并且我的应用程序始终从文件中加载先前的数据。

1.  有没有办法只有在 HTTP 请求完成后才能读取文件

注意：我在一个名为 HTTP.h 和 HTTP.m 的支持文件中拥有所有 Http 连接

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:11:10.680

看看 NSURLConnection sendSynchronousRequest 方法。但我认为你正在做的事情不是正确的方法。让用户等待才能使用 UI 对我来说似乎是一种非常糟糕的用户体验。

# php - 将csv导入mysql数据库 - 错误

> ID：11137740
> 
> 赞同：0
> 
> 时间：2012-06-21T12:03:47.343
> 
> 标签：php, mysql, csv, import

我创建了一个 php 脚本，我将把它放入 cron 作业中，应该在午夜执行，但这不是问题。问题是当 cron 运行我的代码时，它会从数据库中删除所有记录，但不会从 CSV 文件中插入新记录。有什么提示吗？

PHP代码如下：

```
<?php 

# I run this script from a cron job every night to update 
# the mysql database I use with my employee web site 
# so it matches my local database every day.  Feel free to 
# modify it to meet your specific needs.  If you find it 
# usefull, drop me an email and let me know. 

# edit the follow six items to use the script 

# first connect to your mysql database 
# i have my connection settings in a diferent file 
# so i just include that file in all my scripts 
include("db.php"); 

# assign the tables that you want to import to to the table array 
$table = array( 
                'table1', 
                'table2', 
                'table3', 
                'table4', 
                'table5', 
        ); 

# if the first row of your csv file contains column headings: 
# $columnheadings=1 
# if the first row does not contain column headings and should be imported: 
# $columnheadings=0 
$columnheadings = 0; 

# contains the email address you want the results sent to 
$emailaddress = "user@domain.com"; 

# contains the subject you want the message to have 
$subject = "Enter Subject Here"; 

# contains the email address that will show in the from line 
$emailfrom = "user@domain.com"; 

# perform the required operations for every table listed in the table array 
foreach ($table as $tablename) { 

    # empty the table of its current records 
    $deleterecords = "TRUNCATE TABLE `$tablename`"; 
    mysql_query($deleterecords); 

    # intialize your counters for successful and failed record imports 
    $pass = 0; 
    $fail = 0; 

    # the csv file needs to be the same name as the table, 
    # comma seperated with the columns in the same order as the table, 
    # and in the same dir as this script 
    $filecontents = file ("$tablename.csv"); # .csv is added to the table name to get the name of the csv file 

    # every record in the csv file will be inserted into the table unless an error occurs with that record 
    for($i=$columnheadings; $i<sizeof($filecontents); $i++) { 
        $insertrecord = "Insert Into `$tablename` Values ($filecontents[$i])"; 
        mysql_query($insertrecord); 
        if(mysql_error()) { 
            $fail += 1;     # increments if there was an error importing the record 
        } 
        else 
        { 
            $pass += 1;        # increments if the record was successfully imported 
        } 
    } 

    # adds a line to the email message we will send stating how many records were imported 
    # and how many records failed for each table 
    $message .= "Table $tablename: Success=$pass  Failure=$fail \n"; 
} 

# set to the date and time the script was run 
$runtime = (date("d M Y H:i")); 

# add the run time to the body of the email message 
$message .= "\nTime of the message: $runtime (server time zone)\n\n"; 

# Send the email message 
mail($emailaddress, $subject, $message, "From: '$emailfrom'"); 

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:07:42.400

您的代码不会检查文件是否存在 - 那么，如果它不在您认为的位置怎么办？根据您从 cron 运行它的方式，它可能从不同的目录运行，而不是从 Web 运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:07:37.103

表的架构是什么，最后你得到了`$message`什么？您是否将所有行都视为失败？

**添加：**

由于所有行都失败了，这意味着插入语句中存在一些问题，或者 csv 和目标表之间可能存在模式不匹配。尝试这个

```
 # and in the same dir as this script 
    $filecontents = file ("tablename.csv"); # .csv is added to the table name to get the name of the csv file 

    # every record in the csv file will be inserted into the table unless an error occurs with that record 
    for($i=$columnheadings; $i<sizeof($filecontents); $i++) { 
        $insertrecord = "Insert Into `$tablename` Values ($filecontents[$i])"; 
        mysql_query($insertrecord); 
        if(mysql_error()) { 
            $fail += 1;     # increments if there was an error importing the record
             //this is include exact error in email, and will help you to identify the
             //problem very easily.
             $message .= mysql_errno() . ": " . mysql_error() . "\n"; 
        } 
        else 
        { 
            $pass += 1;        # increments if the record was successfully imported 
        } 
    } 
```

试试这个，让我知道你的发现？

# java - 我可以简化一下吗？（字节中 1 位的异或）

> ID：11137743
> 
> 赞同：2
> 
> 时间：2012-06-21T12:03:53.717
> 
> 标签：java, binary, set, bit

是否可以简化这一点？

```
 public void setDisabled(boolean disabled) {
    if(disabled)
        this._rflags |= 1 << B1;
    else
        this._rflags &= ~(1 << B1);
} 
```

它设置一个字节的 1 位 (B1 = 2)

-编辑-

我错过的重要信息

```
private char _rflags;

public static final char B1 = 1 << 2; 
```

我想将其保留为 char 并以不同类型访问单个或多个位，因为数据来自带有联合的 C 结构。我还将通过 UDP 发回这些数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:14:24.377

您可能会看到一些巧妙的方法来重组您的方法。我将提供一个稍微不同的答案。它可能适用于您的情况，也可能不适用于您的情况；我没有很多上下文。

一种方法是使用工厂返回一个类的实例。如果将“true”传递给工厂，则返回包含此方法的类：

```
public void setDisabled() {
        _rflags &= ~(1 << B1);
} 
```

如果传入“false”，则工厂返回的类将是执行其他计算的单线。注意缺少论据；由于已经做出决定，因此不需要它。关于访问的斜视`_rflags`；我不知道这些课程是什么样子的。也许`_rflags`会被传递给这个方法。

在一个更美好的世界中，包含您的方法的整个类`setDisabled(boolean)`将由工厂返回。然后工厂可以抽象出任何检查禁用标志的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:21:15.050

在 Java 中没有真正简洁的方法可以使它更短。如果您要重复它，我会说坚持 DRY 原则并将其放在另一种方法中。

```
public void setDisabled(final boolean disabled) {
    toggleFlag(B1, disabled);
}

private void toggleFlag(final int bit, final boolean on) {
    if (on)
        this._rflags |= 1 << bit;
    else
        this._rflags &= ~(1 << bit);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:51:55.510

形式简化：在您的签名中将*void*更改为*Object （从未使用过）：*

```
 return disabled == true ? this._rflags |= 1 << B1 :  this._rflags &= ~(1 << B1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T12:54:34.173

主要问题是将布尔值转换为int。如果不使用 java 中的某种条件运算符/if-else，就无法表达这一点。

有很多方法可以以看似聪明的方式做到这一点，但恕我直言，最好坚持使用大多数人容易理解的变体（您已经拥有的 if-else 方法）。

你可以把它写得更紧凑一点，但它仍然是一团糟：

```
final static int B1 = 2;

public void setDisabled(final boolean disabled) {
     final int bitmask = disabled ? (1 << B1) : 0;
     _rflags = (_rflags & ~bitmask) | bitmask; 
} 
```

顺便说一句，如果将属性命名为*enabled*，并且在打开选项时设置位蜂，大多数人可能会发现它更合乎逻辑（这就是 setEnabled() 在语义上适用于 java.awt.Component 等的方式） .

# java - java中是否有任何方法与Visual C++中的ReadInt16（）具有相同的功能

> ID：11137748
> 
> 赞同：0
> 
> 时间：2012-06-21T12:04:06.327
> 
> 标签：java, visual-c++

java中是否有任何方法与Visual C++中的ReadInt16（）具有相同的功能。我必须读取一个二进制文件，其中数字数据以 16 位形式存储。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T12:12:14.380

如果您正在从 java.io.InputStream 读取数据，您可能需要这样的内容：

```
DataInputStream dataInputStream = new DataInputStream(inputStream);
short myInt16 = dataInputStream.readShort(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T12:08:35.370

不，Java 中的 int 固定为 32 位。但是short是16位；也许你可以使用它。

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

听起来你必须做一些工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:19:34.923

值得注意的是，Java 默认使用大端。许多基于 MS 的系统使用 little endian，因此您可能希望改用 ByteBuffer。

对小于 2 GB 的文件执行此操作的一种简单方法是对文件进行内存映射并使用 order(ByteOrder.LITTLE_ENDIAN) 您也可以使用 position(pos) 随机访问此文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T12:09:45.657

你可以试试`RandomAccessR`'s [readInt16()](http://www.extex.org/snapshot/javadoc/org/extex/util/file/random/RandomAccessR.html#readInt16%28%29)方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T12:22:40.173

我建议使用`ByteBuffer`读取二进制数字数据，尤其是在使用 c/c++ 时，因为 Java 的默认字节顺序是大端，而在 c/c++ 中是小端。

```
byte[] bin_data = {0x01, 0x02, 0x03, 0x04};
ByteBuffer bb = ByteBuffer.wrap (bin_data);
bb.order (ByteOrder.LITTLE_ENDIAN);
System.out.println (String.format("0x%04X", bb.getShort ());  // 0x0201
System.out.println (String.format("0x%04X", bb.getShort ());  // 0x0403 
```

# javascript - 为什么视图不能使用 .el 呈现？

> ID：11137749
> 
> 赞同：0
> 
> 时间：2012-06-21T12:04:08.107
> 
> 标签：javascript, backbone.js

我终于让我的 Rails Todo List 应用程序使用 Backbone 的渲染器显示 Todos。不过我有一个小问题。在 addOne 函数中，我使用了 view.render() 而不是 view.render().el，这是教程中所教的。

视图不使用 view.render.el() 渲染。有什么解释吗？

```
$(function(){
Todos = new TodoList.Collections.Todos;
TodoList.Views.TodoView = Backbone.View.extend({
    tagName: "li",
    events: {},
    initialize: function(){},
    template: _.template('<li> <%= task %></li>'),
    render: function(){
        var todo = this.model.toJSON();
        return this.template(todo);
    }
});

TodoView = TodoList.Views.TodoView;

TodoList.Views.AppView = Backbone.View.extend({
    el: $("#todo_app"),
    events: {
        "submit form#new_todo": "createTodo"
    },
    initialize: function(){
        _.bindAll(this, 'addOne', 'addAll','render');
        Todos.bind("add", this.addOne);
        Todos.bind("reset", this.addAll);
        Todos.bind("all", this.render);
        Todos.fetch();
    },

    addOne: function(todo){
        var view = new TodoView({model: todo});
        this.$("#todo_list").append(view.render());
    },

    addAll: function(){
        Todos.each(this.addOne);
    },

    newAttributes: function(event){
        var new_todo_form = $(event.currentTarget).serializeObject();
        return {
            dog: {
                name: new_todo_form["todo[task]"],
                age: new_todo_form["todo[done]"]
            }
        };
    },

    createTodo: function (e){
        e.preventDefault();
        var params = this.newAttributes(e);
        Dogs.create(params);
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:34:25.883

如果您要`console.log`调用的每个组件，输出将类似于以下内容：

```
view // your view object which contains methods and properties - BackboneView
render  // a method of the view object - a function
el // a property of the view object - an HTMLElement 
```

所以，你不能调用`el`，因为它只是一个属性，实际上它是一个`HTMLElement`对象。在您的代码中，您是`returning html`. 如果要通过 view.render().el 链接调用，则必须使用`this`关键字返回实例。当您返回 an 时，您可以在一行中再次`instance`访问所有 的属性和方法（可链接性）。`instance`因此，当您返回时，`html`您无法链接视图对象，这就是为什么在演示中，它们返回`this`.

```
render: function () {
    this.$el.html( this.template( this.model.toJSON() ));
    return this; // return the instance
} 
```

无论如何，您都不应该返回视图的 html。您总是希望通过`el`or`$el`属性访问 Backbone 的 html。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:08:57.860

`el`不是函数，而是构成视图的 HTML。调用`render()`通常会生成 HTML 并将其存储在`el`属性中。按照惯例，此方法应返回`this`允许您直接引用对象（并用于链接）。

因此，`view.render().el`将渲染元素并返回适合附加到 DOM 的 HTML。

# java - Java：在 MySQL 中高效存储 Protobuf 对象

> ID：11137750
> 
> 赞同：2
> 
> 时间：2012-06-21T12:04:09.360
> 
> 标签：java, mysql, serialization, protocol-buffers

我在 Java 的容器对象中有几十万个[ProtoBuf对象。](http://code.google.com/p/protobuf/)

容器变得非常大，序列化到 MySQL 数据库似乎是最好的主意。

使用 Java 在 MySQL 中存储 Protobuf 对象的最合理方法是什么？

*   什么是正确的（反）序列化技术？
*   我应该在 MySQL Schema 中为序列化对象使用哪种字段类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T15:08:50.087

使用协议缓冲区内置序列化技术。 [序列化](https://developers.google.com/protocol-buffers/docs/reference/java/com/google/protobuf/AbstractMessageLite#toByteArray%28%29)protobufs，然后将序列化后的数据存入数据库。要检索这些值，只需从数据库中取回数据并使用各种 parseFrom 方法之一来取回信息。

我不是 MySQL（甚至一般的 SQL）方面的专家，但您可能会使用 BLOB 数据类型来存储这些数据。您可以有两列，一列保存类名，另一列保存数据。那时可以使用 Java 反射来加载所需的类，并在该对象上调用 parseFrom。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:10:18.023

您可能会比 Hibernate 做得更糟。这种方法的美妙之处在于，您可以将它们序列化为可以查询的体面记录，同时不会失去将它们转回 protobuf 消息的能力。

# performance - 为 PostgreSQL 查询选择正确的索引

> ID：11137752
> 
> 赞同：3
> 
> 时间：2012-06-21T12:04:13.530
> 
> 标签：performance, postgresql, indexing, postgresql-8.4

简化表：

```
CREATE TABLE products (
product_no integer PRIMARY KEY,
sales integer,
status varchar(16),
category varchar(16));

CREATE INDEX index_products_sales ON products (sales);
CREATE INDEX index_products_status ON products (status);
CREATE INDEX index_products_category ON products (category); 
```

PostgreSQL 版本是 8.4。列“状态”和“类别”

有 2000 万个产品/行分布在 15 个类别中。

最常用的查询之一是获取最畅销的三种产品，不包括类别“cat3”和“cat7”中的产品：

```
SELECT product_no, sales 
FROM products 
WHERE status = 'something' AND category NOT IN ('cat3', 'cat7') 
ORDER BY sales DESC 
LIMIT 3;

Limit  (cost=0.00..8833.39 rows=3 width=12) (actual time=9235.332..9356.284 rows=3 loops=1)
   ->  Index Scan using index_products_sales on products  (cost=0.00..68935806.85 rows=23412 width=12) (actual time=9235.327..9356.278 rows=3 loops=1)
     Filter: (((category)::text <> ALL ('{cat3,cat7}'::text[])) AND ((status)::text = 'something'::text)) 
```

使这个特定查询运行得更快的最佳索引是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-22T02:49:17.303

使用此特定排序顺序创建部分多列索引：

```
CREATE INDEX products_status_sales_partial_idx ON products (status, sales DESC)
WHERE  category NOT IN ('cat3','cat7'); 
```

稍微修改您的查询：

```
SELECT product_no, sales 
FROM   products 
WHERE  status = 'something'
AND    category NOT IN ('cat3', 'cat7') 
ORDER  BY **status,** sales DESC 
LIMIT  3; 
```

添加`status`作为`ORDER BY`子句的第一个元素似乎是多余且毫无意义的。但是试一试。

### 为什么？

查询计划器不够聪明，无法理解，

```
WHERE  status = 'something' ...
ORDER  BY sales DESC 
```

索引的排序顺序`(status, sales DESC)`匹配作为逻辑结果。所以它将读取*所有*符合条件的行，排序并选择前 3 个。

通过添加`status`，`ORDER BY`您可以使查询计划器直接从索引中读取前 3 个条目。预计速度会提高**几个数量级**。

使用 PostgreSQL 8.4 和 9.1 测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T12:50:25.650

我认为 b-tree 索引仍然是你最好的选择。不过，我可能是错的。我想我会测试两件事。

首先，不包括“cat3”和“cat7”的类别的部分索引。

```
CREATE INDEX index_products_category ON products (category)
  WHERE category NOT IN ('cat3','cat7'); 
```

第二，按销售额降序排列。

```
CREATE INDEX index_products_sales ON products (sales DESC); 
```

但是，其中任何一个都可能会减慢其他查询的速度，因此*除了*现有索引之外，您可能还需要其中一个或两个。

# sql - 为多个用户使用 SDF 数据库文件

> ID：11137753
> 
> 赞同：1
> 
> 时间：2012-06-21T12:04:14.687
> 
> 标签：sql, database, sql-server-ce

我可以将 SDF 文件用作多个用户可以同时访问的小型网站的数据库吗？还是 SDF 仅适用于单个用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:09:16.493

一点问题都没有！这`.SDF`是一个[SQL Server Compact](http://en.wikipedia.org/wiki/SQL_Server_Compact)数据库文件。

> 与 Microsoft SQL Server 一样，SQL CE 支持事务、参照完整性约束、锁定以及与数据库存储的多个连接。
> 
> SQL CE 运行时调解对 .sdf 文件的并发多用户访问。

您可以让多个用户同时访问您的应用程序并使用同一个数据库文件。

由于 SQL CE 是完整 SQL Server 的受限版本，因此您有一些限制。看看[支持部分](http://en.wikipedia.org/wiki/SQL_Server_Compact#Support)。

# android - Android 中 Service、Web 和 Activity 之间来回通信

> ID：11137754
> 
> 赞同：1
> 
> 时间：2012-06-21T12:04:22.523
> 
> 标签：android, service, broadcastreceiver, intentservice

我阅读了大多数关于 SO 的问题和答案，我必须说，就我而言，我仍然不知道该走哪条路。有几种方法可以使用，但我无法确定哪一种最适合我的情况。

**我有什么**

我有一个从我的应用程序开始的服务。它检查用户的当前位置并使用读取的位置调用 Web 服务。这每 x 米发生一次。

**我想得到什么**

*   使用地图进行活动并显示来自服务的当前位置读数。这意味着我的 Activity 需要在读取的每个位置上得到通知。请记住，这仅在用户启动活动时使用，因此我认为从服务广播每个位置不是一个好主意。
*   我可以向服务询问其上次读取位置的活动。
*   正如我之前提到的，该服务读取位置并需要每隔几秒钟将其发送到 Web 服务器。最好的方法是什么？在服务中为每个 Web 服务调用创建一个新的 Thread() ？使用异步任务？有时我可能会收到一些额外的值作为响应，在这种情况下我需要从 web 服务启动一个活动。

说了这么多，你会推荐我用什么？这会是一个好方法吗：[示例：使用消息传递在 Activity 和 Service 之间进行通信](https://stackoverflow.com/questions/4300291/example-communication-between-activity-and-service-using-messaging)？

LE：我已经从 IntentService 切换到简单的 Service + 线程来向 Web 服务发送数据。我的 IntentService 实现启动并迅速销毁。大概是我做错了什么......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:22:29.480

> 这意味着我的 Activity 需要在读取的每个位置上得到通知。

我认为为您的目标提供一个干净有效的解决方案是使用[ResultReceiver](http://developer.android.com/reference/android/os/ResultReceiver.html)。

**注意：（**下面我将向您展示我的应用程序中的示例）。

**例子：**

来自您调用**Service**的活动。

```
Intent i = new Intent(this, DownloadService.class);
i.putExtra("url", "http://dl.dropbox.com/u/67617541/2011-11-11_102220_nature.jpg");
i.putExtra("receiver", new DownloadReceiver(new Handler()));
startService(i); 
```

已实现**的 ResultReceiver**

```
private class DownloadReceiver extends ResultReceiver {

        public DownloadReceiver(Handler handler) {
            super(handler);
        }

        @Override
        public void onReceiveResult(int resultCode, Bundle resultData) {
           super.onReceiveResult(resultCode, resultData);
           if (resultCode == DownloadService.PROGRESS_UPDATE) {
              int progress = resultData.getInt("progress");
              pd.setProgress(progress);
           }
       }
} 
```

和**IntentService的片段**

```
protected void onHandleIntent(Intent intent) {  
   String urlLink = intent.getStringExtra("url");
   ResultReceiver receiver = intent.getParcelableExtra("receiver");
   // some body
   Bundle data = new Bundle();
   //publishing progress
   receiver.send(PROGRESS_UPDATE, data);
} 
```

因此，只需调用`send`（当你需要时）方法就会在你可以做你需要的地方被`onReceiveResult`调用`ResultReceiver`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:34:07.620

对此采取的另一种方法是根据此[响应](https://stackoverflow.com/a/6393317/614231)使用处理程序。

列出的文章讨论了如何将数据从服务传递到启动它的 UI 之外的 UI ......虽然这不是您的问题/问题，但您仍然可以使用相同的模式。

基本上，您的 Activity 在启动时会将自己注册为处理程序回调并启动位置服务。位置服务会将消息发布到处理程序回调，并由您的活动处理。

在活动终止时，您停止服务，然后将自己作为处理程序回调删除。

如果服务一直在运行，但不知道 UI 是否存在，那么也可以使用此模式，因为代理处理程序会检查是否存在真正的回调，如果没有，则消息只是简单的掉了。

# google-apps-script - 不显示具有指向站点附件图像的源 URL 的图像。错误的方法？

> ID：11137759
> 
> 赞同：0
> 
> 时间：2012-06-21T12:04:30.723
> 
> 标签：google-apps-script

有一项任务是从 Google App Site 脚本显示放置到 Google App Site 的图像，即代码如下所示`UiApp.getActiveApplication().createImage('http://....');`。通过单击`Insert->Image`页面编辑器菜单项将图像上传到站点，它被存储到站点的附件中，并且如果将带有已上传图像的图像小工具拖放到页面中，则它是可见的。图像小工具 URL 具有以下格式`https://sites.google.com/a/.../image00.png`。我将此 URL 指定为`createImage` `URL`参数，但运行脚本不显示图像，其 URL 为`https://static-focus-opensocial.googleusercontent.com/gadgets/proxy?url=https://sites.google.com/a/.../image00.png&container=focus&gadget=...&rewriteMime=image/*&no_expand=1&refresh=60`. 打开此链接会输出一个新的 Web 浏览器窗口

> 未找到此网页.... 错误 6 (net::ERR_FILE_NOT_FOUND)：找不到文件或目录。

这条路有错吗？如果是，如何正确执行此任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:29:02.877

你的网站是公开的吗？如果不是，[这个问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=912)可能是相关的

# jakarta-ee - 如果显示标签中的条件？

> ID：11137763
> 
> 赞同：1
> 
> 时间：2012-06-21T12:04:42.320
> 
> 标签：jakarta-ee, struts, displaytag

如果行的值等于“GRAND TOTAL”，我想显示链接，否则我在代码段下方尝试了纯文本但出现错误

```
<display:table name="expScoreCardCol" export="true" pagesize="20" sort="list" id="data" requestURI="" class="tablelist">   

     <display:column title="Zone" sortable="true" property="zone"></display:column>              
    <display:column title="Non-HNI Total" sortable="true" property="nonhniTotal"></display:column>   
        <display:column title="Non-HNI Per %" sortable="true" property="nonhniPer"></display:column>   

    <%if(!${data.zone}=="GRAND TOTAL"){ %>       
        <display:column title="Grand Total" sortable="true">   
        <html:link action="/exceptionScoreCardGrandReport.do?zone=${data.zone}"><b>${data.grandTotal}</b></html:link>   
        </display:column>   
        <%} %>   
</display:table> 
```

错误：

```
An error occurred at line: 270 in the generated java file
Syntax error, insert "while ( Expression ) ;" to complete DoStatement

An error occurred at line: 282 in the generated java file
Syntax error, insert "while ( Expression ) ;" to complete BlockStatements

An error occurred at line: 288 in the generated java file
Syntax error, insert "else Statement" to complete IfStatement

An error occurred at line: 288 in the generated java file
Syntax error, insert "}" to complete Block 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T12:16:22.583

不要使用小脚本。绝不。使用 JSTL 和 EL。并且理解 EL 不能在 scriptlet 中使用：scriplet 包含 Java 代码，而 EL 不是 Java。

此外，如果特定行不是总计，则代码会添加一列。这不是应该做的。该列应始终存在，但其*内容*应根据行而变化：

```
<display:table name="expScoreCardCol" export="true" pagesize="20" sort="list" id="data" requestURI="" class="tablelist">
    <display:column title="Zone" sortable="true" property="zone" />
    <display:column title="Non-HNI Total" sortable="true" property="nonhniTotal" />
    <display:column title="Non-HNI Per %" sortable="true" property="nonhniPer" />
    <display:column title="Grand Total" sortable="true">
        <c:if test="${data.zone != 'GRAND TOTAL'}">       
            <html:link action="/exceptionScoreCardGrandReport.do?zone=${data.zone}">
                <b>${data.grandTotal}</b>
            </html:link>
        </c:if>
    </display:column>      
</display:table> 
```

# iphone - 我有 XML 喜欢跟随我如何使用 touchXML 解析，我想获取像 26400174350 这样的数据 26400174350

> ID：11137765
> 
> 赞同：1
> 
> 时间：2012-06-21T12:04:45.453
> 
> 标签：iphone, objective-c, ios, touchxml

```
 <p231:getTraceDataReturn>
    <p231:proNum>26400174350</p231:proNum>
    <p231:proDate>05/13/2011</p231:proDate>
    <p231:statusCode>DEL</p231:statusCode>
    <p231:status>Delivered</p231:status>
    <p231:appointment/>
    <p231:pieces>7</p231:pieces>
    <p231:weight>1082</p231:weight>
    <p231:po/>
    <p231:bol/>
    <p231:trailer/>
    <p231:signature>BARNES</p231:signature>
    <p231:origTerminal>BIS</p231:origTerminal>
    <p231:origAddress>2300 VERMONT AVE</p231:origAddress>
    <p231:origState>ND</p231:origState>
    <p231:origName>BISMARCK, ND</p231:origName>
    <p231:origCity>BISMARCK</p231:origCity>
    <p231:origZip>58504</p231:origZip>
    <p231:origPhone>(866) 466-5031</p231:origPhone>
    <p231:origFax>(701) 223-3790</p231:origFax>
    <p231:destTerminal>RKI</p231:destTerminal>
    <p231:destAddress>320 31ST AVE</p231:destAddress>
    <p231:destState>IL</p231:destState>
    <p231:destName>ROCK ISLAND, IL</p231:destName>
    <p231:destCity>ROCK ISLAND</p231:destCity>
    <p231:destZip>61201</p231:destZip>
    <p231:destPhone>(800) 728-6806</p231:destPhone>
    <p231:destFax>(309) 794-1496</p231:destFax>
    <p231:delivered>Y</p231:delivered>
    <p231:url/>
    <p231:type>P</p231:type>
    <p231:scac/>
    <p231:errorMessage/>
    <p231:guaranteed>N</p231:guaranteed>
    <p231:call>N</p231:call>
  </p231:getTraceDataReturn> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:30:09.147

如果您不介意使用`NSXMLParser`...这是一个完整的类代码，它可以为您获取所有`<p231:pronum>`数据并存储在其中`NSArray`：

标题：

```
@interface MyParser : NSObject <NSXMLParserDelegate> {
  NSMutableArray *nodeArray;
  NSMutableString *nodeString;
}

+(NSArray*)parseNodeData:(NSData*)data;
-(NSArray*)nodes;
-(void)parseWithData:(NSData*)data;
@end 
```

执行：

```
@implementation MyParser

+(NSArray*)parseNodeData:(NSData*)data {
  NSArray *ret;
  MyParser *parser = [[MyParser alloc] init];
  [parser parseWithData:data];
  ret = [parser nodes];
  [parser release];
  return(ret);
}

-(NSArray*)nodes {
  if (nodeArray == nil)
    return(nil);
  return([NSArray arrayWithArray:nodeArray]);
}

-(void)dealloc {
  [nodeArray release];

  [super dealloc];
}

-(void)parseWithData:(NSData*)data {
  NSXMLParser parser = [[NSXMLParser alloc] initWithData:data];
  [parser setDelegate:self];
  [parser parse];
  [parser release];
}

#pragma mark - NSXMLParserDelegate methods
-(void)parserDidStartDocument:(NSXMLParser*)parser {
  if (nodeArray != nil)
    [nodeArray release];

  nodeArray = [[NSMutableArray alloc] init];
  [nodeString release];
  nodeString = nil;
}

-(void)parser:(NSXMLParser*)parser didStartElement:(NSString*)elementName namespaceURI:(NSString*)namespaceURI qualifiedName:(NSString*)qName attributes:(NSDictionary*)attributeDict {
  [nodeString release];
  nodeString = [[NSMutableString alloc] init;
}

-(void)parser:(NSXMLParser*)parser foundCharacters:(NSString*)string {
  [nodeString appendString:string];
}

-(void)parser:(NSXMLParser*)parser didEndElement:(NSString*)elementName namespaceURI:(NSString*)namespaceURI qualifiedName:(NSString*)qName {
  if ([elementName compare:@"p231:pronum" options:NSCaseInsensitiveSearch] == NSOrderedSame) {
    [nodeArray addObject:[NSString stringWithString:nodeString]];
  }

  [nodeString release];
  nodeString = nil;
}

@end 
```

这可以给你的数据`NSArray`只用一个方法调用（假设你的对象上有你的 XML `NSData`）。

# lucene - 刷新段时提交 IndexWriter

> ID：11137766
> 
> 赞同：1
> 
> 时间：2012-06-21T12:04:45.423
> 
> 标签：lucene

我正在使用 Lucene/Solr 作为我的日志搜索工具。当一组特定的文档从内存刷新到磁盘时，有没有一种方法可以在我的 IndexWriter 上执行提交操作。我的 RamBufferSize 是 24Mb，MergeFactor 是 10。

或者是在频繁的时间间隔调用提交，而不管刷新是唯一的方法吗？我希望自动提交功能没有被弃用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:13:46.797

您可以考虑使用 Solr 的[commitWithin](http://wiki.apache.org/solr/CommitWithin)功能。这会将提交责任移交给 Solr。

> CommitWithin 是 Solr 1.4 中引入的一种提交策略，它允许客户端要求 Solr 确保在特定时间内提交。这将何时进行提交的控制权留给了 Solr 本身，将提交的数量优化到最低限度，同时仍然满足更新延迟要求。如果我说（在 XMLUpdateRequestHandler 更新中），这会告诉 Solr 确保文档在 10000 毫秒内提交，即 10 秒。然后我可以在这 10 秒内继续添加其他文档（可能带有其他 commitWithin 值），当缓冲区中最旧的文件到期时，Solr 会自动执行。

我在添加文档时经常使用它来帮助我尽可能接近 NRT（接近实时），而不需要频繁地发布提交。

# c - 通过特定端口创建原始 HTTP 请求

> ID：11137769
> 
> 赞同：2
> 
> 时间：2012-06-21T12:04:54.313
> 
> 标签：c, http, curl, libcurl

我想在 Linux 机器上使用 C 从特定端口创建 HTTP 请求。有，`libcurl`但我不确定你是否可以指定接口。是否可以 ？

非常感谢 ：）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T12:18:46.940

是的。查看选项[`CURLOPT_INTERFACE`](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTINTERFACE)和[`CURLOPT_LOCALPORT`](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTLOCALPORT).

# c# - WPF 属性返回 int null

> ID：11137774
> 
> 赞同：0
> 
> 时间：2012-06-21T12:05:31.150
> 
> 标签：c#, wpf, properties, null, int

我的视图模型中有一个 int 属性，它返回一个自定义类属性。我检查类引用是否为空，在这种情况下，我想向视图返回一些空值，以便不显示任何值。

代码是这样的：

```
public int percentage
{
get {
   if (customClass != null)
   {
      return customClass.getInt();
   }
   else
   {
      return 0;
   }
...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T12:07:31.500

如果要返回“无值”结果，则应返回`null`. 由于这不是 an 的有效值`int`，因此您必须将属性的类型更改为`int?`：

```
public int? Percentage
{
    get { return customClass == null ? null : customClass.getInt(); }
} 
```

如果您以前没有看过语法，`int?`它是 . 的简写[`System.Nullable<int>`](http://msdn.microsoft.com/en-us/library/1t3y8s4s%28v=vs.100%29.aspx)。

不要忘记，您还可以通过为绑定`Percentage`定义适当的值，从视图内部将值转换为您真正喜欢的任何内容。[`Converter`](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:09:53.850

`int`是一个值类型，所以不能为空。相反，您可以返回`int?`（它是 的简写`Nullable<int>`），它可以为 null，或者您可以指定一些特定`int`的值，例如`0`适用于 when `customClass == null`。这当然取决于您的要求。

```
public int? Percentage {
    get {
       if (customClass != null)
          return customClass.getInt();
       else
          return null;
    }
} 
```

任何调用`Percentage`都需要检查`Percentage.HasValue`它是否为空，并用于`Percentage.Value`提取实际的整数，如果`Percentage.HasValue`是，这将起作用`true`。

# android - 操作栏中的 GPS 图标

> ID：11137777
> 
> 赞同：0
> 
> 时间：2012-06-21T12:05:53.167
> 
> 标签：android, actionbarsherlock

我想在操作栏中显示一个图标，提供 GPS 位置的信号强度。
所以每当我收到 locationUpdate 时，我都想根据准确性更改图标。

我可以设置一个不可点击的菜单项，但我不能按需更新它？

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:28:21.537

我的理解是调用activity的invalidateOptionsMenu()方法会导致ActionBar失效，所以你可以在onCreateOptionsMenu()中更新图标。

# java - 排除 Eclipse Workbench 中的内置导入/导出向导

> ID：11137782
> 
> 赞同：0
> 
> 时间：2012-06-21T12:06:15.903
> 
> 标签：java, eclipse, eclipse-plugin, workbench

在 Eclipse 工作台`Import`视图中，有一些预定义的菜单项，它们是：

> 提供的实现：工作台预装了文件和目录的基本导入引擎。

他们来了：

![导入菜单](../Images/2e7e4884a6d78787c802dc5d5173b35e.png)

问题是：是否可以将它们从`Import`视图中移除？可以不通过代码而是通过更改一些`plugin.xml`配置文件来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:00:32.550

您可以在这个可能重复的问题中找到答案：[How to remove a Category from Import wizard in Eclipse-RCP?](https://stackoverflow.com/questions/8112012/how-to-remove-a-category-from-import-wizard-in-eclipse-rcp)

顺便说一句：如果您正在深入调查，请注意扩展点称为“活动”，但在 Eclipse 术语中，该功能始终称为“功能”。

# facebook - FB._https 不适用于 https

> ID：11137785
> 
> 赞同：1
> 
> 时间：2012-06-21T12:06:23.330
> 
> 标签：facebook, facebook-javascript-sdk

您好，我遇到了与`https://`. 我`FB.getLoginStatus(function(response)`在我的代码中使用了函数。它仅适用于`http://`但不适用于`https://`. 我用谷歌搜索并找到了使用`FB._https = (window.location.protocol == "https:");`. 几天前它工作得很好，但现在已经停止工作。

我的代码看起来像

```
 <script>
        FB._https = (window.location.protocol == "https:");
        FB.init({
            appId : '<?php echo $this->appId; ?>',
            status : true, // check login status
            cookie : true, // enable cookies to allow the server to access the session
            xfbml : true // parse XFBML
        });

     function PostAction(custom_action)
     {
        console.log('out side of getlogin status');
        FB.getLoginStatus(function(response)
        {
          console.log("in getlogin status");
          if (response.authResponse) {
             fbcallBack(response);
          } else {
             FB.login(fbcallBack, {scope:'publish_stream'});
        }
      });
   }
</script> 
```

我`PostAction()`在 onclick 事件中被调用。我已经写`console.log()`了调试代码。使用 facebook 时会触发控制台，`out side of reglogin status`但不会触发. 但如果我使用它效果很好。`in getlogin status``https``http://`

任何机构都可以指导我这是什么问题？如何解决？

问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T12:10:42.587

截至昨天 22:00，Facebook 发布了此公告：

[http://developers.facebook.com/blog/post/2012/06/20/platform-updates--operation-developer-love/](http://developers.facebook.com/blog/post/2012/06/20/platform-updates--operation-developer-love/)

> 正如 5 月宣布的那样，我们更新了 Javascript SDK 以限制公开暴露的接口。这是提高 SDK 可靠性的持续过程的一部分。我们删除了对所有内部属性和以 _ 为前缀的方法的访问权限。
> 
> 如果您当前依赖于访问内部属性，请重构它，以便您仅依赖于 [https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)中列出的公开可用（和官方支持）的方法。
> 
> 请注意，所有未作为公共 API 的一部分列出的方法都可能会更改或删除，您不应直接使用它们。

# c++ - 将超类函数作为非类型名模板参数传递

> ID：11137789
> 
> 赞同：8
> 
> 时间：2012-06-21T12:06:29.000
> 
> 标签：c++, templates

假设你有

```
 struct A{
  void f(){}
};

struct B:public A{
};

template<typename C,void (C::*f)()>
struct Call{

  void operator()(C* c){
    (c->*f)();
  }
}; 
```

为什么

```
int main(){
  void (B::*f)()=&B::f;    
} 
```

工作但

```
 Call<B,&B::f> a; 
```

没有，抱怨

```
could not convert template argument ‘&amp;A::f’ to ‘void (B::*)() 
```

?

（`Call<A,&A::f>`显然有效）

以类似的方式

```
const void (B::*f)()=&B::f; 
```

给

```
cannot convert ‘void (A::*)()’ to ‘const void (B::*)()’ in initialization 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T14:03:08.783

```
void (B::*f)()=&B::f; 
```

有效，因为从隐式转换

```
void (A::*f)() 
```

到

```
void (B::*f)() 
```

被申请;被应用。

**4.11 (2)**

**“指向类型为 cv T 的 B 的成员的指针”类型的纯右值，其中 B 是类类型，可以转换为类型为“指向类型为 cv T 的 D 的成员的指针”类型的纯右值，其中 D 是派生类 ( B.第 10) 条。**

但是，该标准不允许对模板参数中的成员函数的指针进行任何转换，但 nullptr_t 转换除外：

**14.3.2**

**For a non-type template-parameter of type pointer to member function, if the template-argument is of type std::nullptr_t, the null member pointer conversion (4.11) is applied; otherwise, no conversions apply. If the template-argument represents a set of overloaded member functions, the matching member function is selected from the set (13.4).**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:12:02.083

该错误准确地说明了问题所在，`void (A::*)()`并且`void (B::*)()`是不同的类型。

虽然在这种情况下看起来应该很容易做到，但一般情况会变得复杂得多。考虑一下如果`A`有几个虚函数并且`B`有多重继承会发生什么。指向成员函数的指针是非常复杂的野兽，因为它们必须考虑这类事情。看看[http://blogs.msdn.com/b/oldnewthing/archive/2004/02/09/70002.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2004/02/09/70002.aspx)

您可以更改`B`为：

```
struct B:public A{
    void f() { A::f(); }
}; 
```

所以这`B::f()`确实存在。现在`B::f()`是一个别名，`A::f()`它显然是类型`void (A::*)()`而不是`void (B::*)()`

# javascript - Javascript焦点删除文本突出显示

> ID：11137794
> 
> 赞同：2
> 
> 时间：2012-06-21T12:06:57.027
> 
> 标签：javascript, asp.net, focus, highlight

我在更新面板中有一个输入（文本字段），它会在每次更改文本后自动回发。我可以将注意力集中在同一个文本字段上，但我无法摆脱调用 document.getElementById('myTextField').focus() 后出现的文本高亮。这个解决方案似乎是最准确的：

```
if (window.getSelection) {
    window.getSelection().removeAllRanges();
} else if (document.selection) {
    document.selection.empty();
} 
```

但它有一个问题。输入仍然集中，但我不能写文本。我必须在写之前点击它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:14:38.357

如果您在焦点后重置您的值，您可以这样做，即

**HTML**

```
<input id="myTextField" type="text" value="SomeValue" />​ 
```

**JS**

```
var myInput=document.getElementById('myTextField');
var myInput_value=myInput.value;
myInput.focus();
myInput.value=myInput_value;​ 
```

[**工作示例。**](http://jsfiddle.net/heera/D37n5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:19:11.897

我认为理想的解决方案不会涉及取消设置和重置输入的值。这可能会产生不必要的副作用。在我看来，这是移动插入符号的正确方法：

```
var input = document.getElementById('inputElement');
input.focus();
if(input.setSelectionRange) {
  input.setSelectionRange(input.value.length, input.value.length);
} else {
  var range = input.createTextRange();
  range.moveStart('character', input.value.length);
  range.moveEnd('character', input.value.length);
  range.select();
} 
```

# javascript - websocket javascript读写

> ID：11137796
> 
> 赞同：1
> 
> 时间：2012-06-21T12:07:05.213
> 
> 标签：javascript, html, websocket

我试图为 websocket 创建一个 Read\Write 函数，但我遇到了问题......

```
var inarrivo = 0;
var risposta = "";

function RDW_Command(Stringa) {
    var Risposta = "";
    Stringa = "$" + Stringa;
    socket.send(Stringa);
    inarrivo = 0;
    while (inarrivo == 0) {
        doNothing();
    }
    return risposta;
}

function doNothing() {}
socket.onmessage = function (msg) {
    risposta = msg.data;
    inarrivo = 1;
}; 
```

问题是当它进入while循环时它会冻结......有什么想法可以解决它吗？>.<谢谢！！安德烈亚

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T12:55:10.357

您以通常（在 javascript 中）基于事件/回调的方式在 javascript 中编写 websockets。

这是一个例子：

```
var somePackage = {};
somePackage.connect = function()  {
    var ws = new WebSocket('ws://'+document.location.host+'/ws');
    ws.onopen = function() {
        console.log('ws connected');
        somePackage.ws = ws;
    };
    ws.onerror = function() {
        console.log('ws error');
    };
    ws.onclose = function() {
        console.log('ws closed');
    };
    ws.onmessage = function(msgevent) {
        var msg = JSON.parse(msgevent.data);
        console.log('in :', msg);
        // message received, do something
    };
};

somePackage.send = function(msg) {
    if (!this.ws) {
        console.log('no connection');
        return;
    }
    console.log('out:', msg)
    this.ws.send(window.JSON.stringify(msg));
}; 
```

你打电话`somePackage.connect`打开连接。之后，消息到达在处理程序中`onmessage`处理，并将消息发送到您刚刚调用的服务器`somePackage.send`。

即使这充满了异步调用，这并不意味着您的程序不会立即对消息的到达做出反应（一旦您的其他函数因为只有一个线程而停止工作）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T12:09:39.367

这是一个无限循环：

```
inarrivo = 0;
while (inarrivo == 0) {
    doNothing();
} 
```

解决办法是去掉无限循环。

# php - 使用 foreach 循环比较两个数组

> ID：11137797
> 
> 赞同：2
> 
> 时间：2012-06-21T12:07:17.540
> 
> 标签：php, mysql, codeigniter-2

在 PHP 中，我将编辑一些实体，比如说一个**名为的项目：ABC**这个项目属于许多**国家**，同时添加我使用的这个项目`<select multiple="multiple">`并将所有选定的国家存储在**projectCountries**表中。现在，当我开始编辑这个项目时，我使用相同的逻辑并稍作改动：

1.  从国家表中填充所有国家
2.  从 projectCountries 表中获取与 projectId 关联的所有国家/地区

我有两个数组：

```
Array ( 
    [0] => Array ( [countryId] => 1 [countryName] => Pakistan ) 
    [1] => Array ( [countryId] => 2 [countryName] => China ) 
) 
```

步骤 1 的输出

和

```
Array ( 
    [0] => Array ( [pcId] => 1 [countryId] => 1 [projectId] => 1 ) 
    [1] => Array ( [pcId] => 2 [countryId] => 2 [projectId] => 1 ) 
) 
```

步骤 2 的输出

但我很困惑如何显示名为中国的国家已经与该项目相关联（已在 中选择`<select multiple="multiple">`）

因为要创建`<select multiple="multiple">`我使用了**foreach**循环。现在我无法猜测如何比较**foreach**循环中的两个数组，以便我设置`selected="selected"`.`<option>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:18:45.877

遍历所有国家并检查该国家是否存在于`projectCountries`输出数组中。

像这样的东西：

```
$pc_list = array();
foreach($project_countries as $pc) {
    $pc_list[] = $pc['countryId'];  
}

foreach($countries as &$country) {
    if(in_array($country['countryId'], $pc_list)) {
        $country['selected'] = TRUE;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:17:42.663

**选项 1：** 为 step1 运行 foreach 循环。在每次迭代中，您都可以遍历第二个数组并检查是否存在具有当前 id 的国家/地区（来自第一个循环）。

**选项 2：** 将您的 SQL-Query 更改为类似的内容（例如使用连接）：

CountryId CountryName ProjectId
1 巴基斯坦 1
2 中国 1
3 德国 null

# java - 从 PHP 调用 Java 方法

> ID：11137813
> 
> 赞同：0
> 
> 时间：2012-06-21T12:08:44.827
> 
> 标签：java, php, hessian

我有一个应用程序，前端是 php，后端是 Java。我正在使用 php 中的 Hessian 调用 Java 方法，并将 Java 中的数据返回到 php。现在我在粗麻布上遇到了一些问题，我遇到了一些异常，你可以看到我之前发布的问题。 [https://stackoverflow.com/questions/11121340/hessianserviceexporter-only-supports-post-requests](https://stackoverflow.com/questions/11121340/hessianserviceexporter-only-supports-post-requests)

**有没有其他方法可以从 php 代码中调用 java 函数，就像 hessian 一样？**

如果是这样，有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:12:09.023

最简单的方法是使用 JAX-RS 实现 REST 层。Apache CXF 是用于部署 JAX-RS 服务的优秀、非常简单的系统。您可以构建整个服务层，而不必担心 Java/PHP 交互。

为了让您了解它是多么容易：

```
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.QueryParam;
import javax.ws.rs.core.MediaType;

public class DemoService {
    @GET
    @Path("sayHello")
    @Produces(MediaType.TEXT_PLAIN)
    public String sayHello() { return "Hello, world!"; }
} 
```

CXF 的 servlet 的 beans.xml 的内容如下所示：

```
<import resource="classpath:META-INF/cxf/cxf.xml"/>
<import resource="classpath:META-INF/cxf/cxf-servlet.xml"/>

<jaxrs:server id="demoService" address="/demoService">
    <jaxrs:serviceBeans>
        <ref bean="serviceBean"/>
    </jaxrs:serviceBeans>
</jaxrs:server>

<bean id="serviceBean" class="com.company.DemoService"/> 
```

# user-interface - 在 ADF 中动态层叠树状结构？

> ID：11137816
> 
> 赞同：0
> 
> 时间：2012-06-21T12:08:54.327
> 
> 标签：user-interface, tree, master-detail, oracle-adf

我需要在 ADF 应用程序的 UI 上表示**级联树**结构，但有一个问题，

> 树的深度是未知的，即一个根节点有一个或多个节点，而这些节点又可能有多个子节点。

我最初的处理想法是，创建多个表，从这些表中创建 ADF BC 组件，其中多个 VO 具有主 - 详细信息类型的关系，但这适用于 2 - 3 个或更多表，但我需要为其添加动态**支持**.

任何声明式或程序化方法的建议将不胜感激。

提前致谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:31:02.473

目前，ADF 要求您为树层次结构定义规则，这限制了动态方法，因为您 i) 需要在视图之间的 ADF BC 级别上定义访问器，并且 ii) 需要在配置 ADF 绑定时基于这些关联定义规则树。

为了满足您的要求，您将基于 Trinidad ChildPropertyTreeModel 构建自己的树模型

见： http: [//myfaces.apache.org/trinidad/trinidad-api/apidocs/org/apache/myfaces/trinidad/model/ChildPropertyTreeModel.html](http://myfaces.apache.org/trinidad/trinidad-api/apidocs/org/apache/myfaces/trinidad/model/ChildPropertyTreeModel.html)

在此自定义模型中，您可以查询 ADF BC 视图（是否通过 ADF 绑定层）以构建您想要的动态树结构

# javascript - 为什么带有 javascript 验证的 jsf 表单不转发视图？

> ID：11137817
> 
> 赞同：3
> 
> 时间：2012-06-21T12:08:55.417
> 
> 标签：javascript, jsf, submit

我在 Tomcat 7 上运行 JSF 2.0 应用程序。我想使用 javascript 进行表单验证。这是我的问题的简化版本：

我有两个 jsf 文件 index.xhtml 和 result.xhtml 以及一个带有 javascript 代码的文件。这两个 xhtml 文件都在应用程序根文件夹中。
在 index.xhtml 中：

```
<h:head>  
    <h:outputScript name="script.js" library="js" />  
</h:head>  
<h:body>  
    <h:form>  
        <h:inputSecret id="password" />  
        <h:inputSecret id="confirm" />  
        <h:commandButton 
                type="button" 
                value="go" 
                action="result"  
                onclick="checkPassword(this.form)" />  
    </h:form>  
</h:body> 
```

脚本.js：

```
function checkPassword(form){  
    var password = form[form.id+":password"].value;  
    var confirm = form[form.id+":confirm"].value;  
    alert(password + " " + confirm);  
    if(password == confirm){  
        form.submit();  
    }else{  
        alert("Password doesn't match");  
    }  
} 
```

result.xhtml 的内容无关紧要。当我运行这个 index.xhtml 时，我得到了我的预期。当我用相同的值填充文本框并单击按钮时，将触发 checkPassword 函数，但浏览器仍停留在 index.xhtml 上，我希望它转发到 result.xhtml。我究竟做错了什么？我不仅对漫游感兴趣，而且对它不起作用的原因感兴趣。你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:02:59.077

导航是通过执行命令按钮的操作来执行的，而不是单独提交表单。您基本上是通过调用来抑制按钮的默认操作`form.submit()`。这样，JSF 将无法找出在提交表单期间按下了哪个命令按钮。相反，您应该返回`true`或`false`取决于验证结果。如果您返回`true`，则按钮的默认操作将照常继续。

将您的 onclick 处理程序更改为

```
onclick="return checkPassword(form)" 
```

和你的 JS 代码

```
function checkPassword(form) {
    var password = form[form.id + ":password"].value;
    var confirm = form[form.id + ":confirm"].value;

    if (password == confirm) {
        return true;
    } else {
        alert("Password doesn't match");
        return false;
    } 
} 
```

* * *

**与具体问题无关**，这不是验证输入的最佳方式。由于 JavaScript 完全在客户端运行，最终用户可以完全控制其进程。最终用户可以完全禁用 JavaScript，甚至可以操纵/绕过代码。

而是使用普通的 JSF 在服务器端完全进行验证`Validator`。您可以使用`<f:ajax>`即时验证，从而改善用户体验。显示 JS 警报也是 90 年代。而是使用 JSF 自己的`<h:message>`工具在页面本身中显示消息。

# php - php标志-d是什么意思？

> ID：11137819
> 
> 赞同：2
> 
> 时间：2012-06-21T12:08:58.407
> 
> 标签：php

我最近看到了这个页面：[PHP cli command line safe_mode 限制](https://stackoverflow.com/questions/4740353/php-cli-command-line-safe-mode-restriction/11134191#11134191)

建议使用`-d flag`覆盖 php.ini 的安全模式设置，如下所示：

```
/usr/bin/php -q -d safe_mode=Off /var/www/vhosts/path-to-your-php-file.php 
```

我一直在网上搜索 cron man、php man、php 标志等，但在任何地方都找不到 -d 标志。

它是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T12:10:33.040

它代表 INI 属性。

```
-d foo[=bar]     Define INI entry foo with value 'bar' 
```

为了将来参考，[http ://php.net/manual/en/features.commandline.options.php](http://php.net/manual/en/features.commandline.options.php)

# ajax - 如何防止在jquery mobile中触发页面事件

> ID：11137820
> 
> 赞同：0
> 
> 时间：2012-06-21T12:09:05.347
> 
> 标签：ajax, events, jquery-mobile

当从页面 A 转换到页面 B 时，会调用以下事件：

*   pagebeforechange
*   加载前的页面
*   pagebeforecreate
*   页面创建
*   页面初始化
*   页面加载
*   pagebeforechange（是的，再次）
*   显示前的页面
*   页面显示
*   换页

我想在某个时候停止该事件链以通过 AJAX 加载一些动态数据，然后重新启动事件链以显示完整的页面。

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:44:04.110

不。除非您在绑定到这些事件之一的处理程序中运行循环之类的操作……在这种情况下，您很可能最终得到一个无响应的脚本。

您可以`changePage`在 Ajax`success`处理程序的最后一步调用。或者您可以转换到目标`toPage`并显示加载动画，直到您的 Ajax 返回。

# spring - 为什么 Spring Integration 有多个 XML 模式，我应该使用哪一个？

> ID：11137824
> 
> 赞同：7
> 
> 时间：2012-06-21T12:09:22.237
> 
> 标签：spring, xsd, spring-integration

要在 Spring XML 配置文件中使用 Spring Integration，我需要声明`si`命名空间，并提供 XML Schema 的模式位置：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:int="http://www.springframework.org/schema/integration"
   xsi:schemaLocation="http://www.springframework.org/schema/integration
      http://www.springframework.org/schema/integration/spring-integration.xsd
      http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans.xsd"> 
```

但是，根据文档，有两种模式可供选择：

> 从现在开始，用户必须始终声明最新的 XML 模式（当前为 2.1 版）。或者，他们可以使用无版本模式。通常，最好的选择是使用无版本命名空间，因为它们会自动使用最新可用的 Spring Integration 版本。

来自：[http ://static.springsource.org/spring-integration/reference/htmlsingle/#2.1-schema-updated](http://static.springsource.org/spring-integration/reference/htmlsingle/#2.1-schema-updated)

为什么两者都有`spring-integration.xsd`和`spring-integration-2.1.xsd`？我检查了两者，后者几乎是前者的三倍。

那么为什么文档说使用无版本模式更好呢？使用其中一个或另一个的后果是什么？`spring-integration.xsd`或者它只是一个`spring-integration-2.1.xsd`不同的错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T12:38:50.023

您不应该查看托管在 Internet 上的模式；模式分布在罐子中；META-INF下还有一个映射文件。

如您所见，我们始终将无版本模式映射到当前模式；因此我们建议始终在应用程序配置中使用无版本模式，否则每次升级时都必须更改文件；例如 2.2 不会使用 2.1 模式运行，但是，如果您在模式上不使用任何版本，则框架将负责使用正确的模式。

互联网上的无版本模式是旧的 1.0 模式；我们需要弄清楚如何才能改变这一点，但这并不简单，由于各种原因，

`http\://www.springframework.org/schema/integration/spring-integration-1.0.xsd=org/springframework/integration/config/xml/spring-integration-1.0.xsd http\://www.springframework.org/schema/integration/spring-integration-2.0.xsd=org/springframework/integration/config/xml/spring-integration-2.0.xsd http\://www.springframework.org/schema/integration/spring-integration-2.1.xsd=org/springframework/integration/config/xml/spring-integration-2.1.xsd http\://www.springframework.org/schema/integration/spring-integration.xsd=org/springframework/integration/config/xml/spring-integration-2.1.xsd`

# asp.net - 如何使用 WebRequest 重定向？

> ID：11137826
> 
> 赞同：0
> 
> 时间：2012-06-21T12:09:33.477
> 
> 标签：asp.net, html, asp.net-4.0

我创建了一个`WebRequest`to`POST`信息。我的目标是在 C# 中模拟 html 中的 PayPal“立即购买”按钮。

发送时如何获得重定向`WebRequest`？仅仅拥有`Response.Redirect`是行不通的，因为我必须对*信息*进行重定向。

我试图模拟的按钮代码是：

```
<form name="_xclick" action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_xclick">
...
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:19:30.160

不确定你可以从后面的代码中做你想做的事。我有类似的情况，除了正常的 ASP.net 表单之外，我还有像你这样的表单。我通过 CSS 隐藏了非 ASP.net 表单，因此它不在用户面前，然后我通过 javascript 触发了 POST（我在表单中放置了一个按钮，然后调用`buttonX.click();`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:20:26.163

您不能使用`post`.

您可以做什么：将实际帖子直接发送到贝宝，或重定向到重新创建所有帖子数据的第二个页面，并使用 javascript 进行自动发布。

如何创建具有自动发布参数的页面的示例。

[http://www.codeproject.com/Articles/37539/Redirect-and-POST-in-ASP-NET](http://www.codeproject.com/Articles/37539/Redirect-and-POST-in-ASP-NET)

# java - 相机意图回调后Android图像调整大小

> ID：11137832
> 
> 赞同：5
> 
> 时间：2012-06-21T12:09:45.850
> 
> 标签：java, android, android-camera, android-camera-intent

我的第一个问题在这里！我有一段代码有问题，该代码使用额外的输出选项启动相机意图，然后在活动结果上尝试调整该图像的大小。正在发生的事情是在回调的 resize 函数中抛出了一个空指针异常。

原始的大图片仍然保存在文件系统中，因为我可以从文件系统中访问它。

原始相机 jpeg 大小为 2560x1920，使用的手机是 google nexus 手机。

**我不清楚为什么调整大小不起作用，有人有任何见解吗？**

这是一些代码：

也创建虚拟文件的 takePicture 函数：

```
 public boolean takePicture( ) {

            Log.e(TAG, "takePicture interface function");
            String FileUri = Environment.getExternalStorageDirectory()  + "/samples/";
            File file = new File(FileUri,"picture"+ pictureNumber +".jpg");
            try {
                file.createNewFile();
                } catch (IOException e) {
                e.printStackTrace();
                }
                Uri outputFileUri = Uri.fromFile(file);

            Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
            cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
            startActivityForResult(cameraIntent, CAMERA_REQUEST);
            Log.e(TAG, "intent started");
            return true;
        } 
```

onactivity结果回调函数：

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) { 

        // handle the camera request returns and handle back button in camera.

        if (requestCode == CAMERA_REQUEST && resultCode == RESULT_CANCELED ) {
            Toast toast = Toast.makeText(this,"Canceled, no picture taken.", 1000);
            toast.show();
            return;
           }

        else if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK ) { 

            Log.e(TAG, "Camera intent return");

            Bitmap scaledphoto = null;
            int height = 300;
            int width = 300;    

            Bitmap photo = BitmapFactory.decodeFile( APP_DATA_PATH + "/samples/picture" + pictureNumber + ".jpg" );
            Log.e(TAG, "Picture fetched");

            scaledphoto = Bitmap.createScaledBitmap(photo, height, width, true);

            Log.e(TAG, "Picture scaled");

            saveImageToFile(scaledphoto, "picture" + pictureNumber + ".jpg");

            Log.e(TAG, "Scaled picture saved");

            myWebView.loadUrl("javascript:pictureTaken(\""+ pictureLoc + "\")");

            pictureNumber++; 
```

这是 LogCat：

```
06-21 14:59:13.496: E/AndroidRuntime(6130): FATAL EXCEPTION: main
06-21 14:59:13.496: E/AndroidRuntime(6130): java.lang.RuntimeException: Failure     delivering result ResultInfo{who=null, request=1888, result=-1, data=null} to activity {test.test/test.test.CameraIntentTestActivity}: java.lang.NullPointerException
06-21 14:59:13.496: E/AndroidRuntime(6130):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2980)
06-21 14:59:13.496: E/AndroidRuntime(6130):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3023)
06-21 14:59:13.496: E/AndroidRuntime(6130):     at android.app.ActivityThread.access$1100(ActivityThread.java:123)
06-21 14:59:13.496: E/AndroidRuntime(6130):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1177)
06-21 14:59:13.496: E/AndroidRuntime(6130):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-21 14:59:13.496: E/AndroidRuntime(6130):     at android.os.Looper.loop(Looper.java:137)
06-21 14:59:13.496: E/AndroidRuntime(6130):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-21 14:59:13.496: E/AndroidRuntime(6130):     at java.lang.reflect.Method.invokeNative(Native Method)
06-21 14:59:13.496: E/AndroidRuntime(6130):     at java.lang.reflect.Method.invoke(Method.java:511)
06-21 14:59:13.496: E/AndroidRuntime(6130):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-21 14:59:13.496: E/AndroidRuntime(6130):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-21 14:59:13.496: E/AndroidRuntime(6130):     at dalvik.system.NativeStart.main(Native Method)
06-21 14:59:13.496: E/AndroidRuntime(6130): Caused by: java.lang.NullPointerException
06-21 14:59:13.496: E/AndroidRuntime(6130):     at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:432) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:16:11.180

改变

```
Bitmap photo = BitmapFactory.decodeFile( APP_DATA_PATH + "/samples/picture" + pictureNumber + ".jpg" ); 
```

至

```
 Bitmap photo = (Bitmap) data.getExtras().get("data"); 
```

# wcf - WCF - 如何从外部源向所有客户端发布内容？

> ID：11137835
> 
> 赞同：0
> 
> 时间：2012-06-21T12:09:49.500
> 
> 标签：wcf, triggers

我有一个连接到多个服务的客户端应用程序 (WPF)。其中一项服务是**提醒服务**，它有一个回调给客户端，它可以向客户端发送一个“提醒”消息，客户端可以在屏幕上显示该消息。

但是您可能会问 - 这个回调操作何时从服务触发到客户端？

好吧，当一个新的提醒行被添加到数据库中时（通过“**命令服务**”），就会发生这种情况。

我有两种方法来实现这个：

***方法一：***

当“提醒服务”被实例化时，它还将启动一个“工作线程”，它将检查 MS SQL 数据库是否有新的提醒添加到数据库中（通过使用“Sql Dependency”或每隔几分钟轮询一次数据库） \ 小时）。一旦找到新的提醒 - “工作线程”应该循环连接到它的所有 WPF 客户端 - 并向他们发送“提醒回调”消息。

***方法B：***

让“命令服务”（将新提醒添加到数据库的实际服务）以某种方式触发“提醒服务”并告诉它 - '我刚刚向数据库添加了新提醒。继续并将提醒发送给所有连接的客户。

***方法三：***

这实际上是对方法 B 的详细说明 - 让“命令服务”连接到“提醒服务”并向其发送“发布提醒”消息，这反过来会使“提醒服务”遍历其所有客户端并发送它们通过回调方法提醒。

.

**最好的方法是什么？有没有更好的主意来做到这一点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:04:49.580

根据您的描述，我将采用方法 C 的一些变体。对于示例实现，您可以查看[此链接](http://www.codeproject.com/Articles/22796/WCF-Implementation-of-the-Publisher-Subscriber-Mod)，或者一般来说对于发布者/订阅者解决方案，因为这是一个相对常见的问题。

# javascript - YQL从请求的页面中删除标签内的数据

> ID：11137836
> 
> 赞同：1
> 
> 时间：2012-06-21T12:09:49.877
> 
> 标签：javascript, jquery, yql

我在两个域中分开了代码。域和代码都是可信的。

我想通过域 A 的 jquery 的 .load() 方法访问域 B 的代码，但由于跨域之间数据访问的限制，我知道这是不可能的。

YQL 是我的选择，效果很好。但它不会在 < script ></ script > 标签中带来数据。我检查了返回的数据，它包含来自域 B 的所有被调用页面的 HTML，而不是 SCRIPT 代码。

我需要带上 SCRIPT 代码并执行它。

在 YQL 帮助中找不到任何相关内容（他们只提到了如何从返回的数据中删除 <脚本>），但在我的情况下，YQL 本身会删除脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:20:04.027

YQL 不会剥离`<script>`元素。[不会导致](https://stackoverflow.com/questions/2592092/executing-script-elements-inserted-with-innerhtml)[元素执行](https://stackoverflow.com/questions/2592092/executing-script-elements-inserted-with-innerhtml)`load()`的用途。[`innerHTML``<script>`](https://stackoverflow.com/questions/2592092/executing-script-elements-inserted-with-innerhtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T14:35:10.997

[在您提供的 url](http://tele.xtream-dev.com/test.php)上发生的事情与其说是`script`标签被剥离，不如说是 YQL 选择默认只返回文档的正文，并且您的脚本被放置在头部。

您可以通过如下查询获得头部：

```
where url="..." and xpath='/html/head/' 
```

# php - 求解一级线性方程组的 PHP 算法

> ID：11137840
> 
> 赞同：3
> 
> 时间：2012-06-21T12:10:00.247
> 
> 标签：php, algorithm, math, equation-solving, linear-equation

我有一个用 PHP 解决的 1 级方程组。方程比变量多，但方程不比变量少。

该系统如下所示。n 个方程，m 个变量，变量是 x[i]，其中 'i' 取值从 1 到 m。系统可能有解决方案，也可能没有。m 最大为 100，n 最大为 ~5000（千）。

我将不得不解决数千个这样的方程组。速度可能是个问题，但我现在正在寻找一种用 PHP 编写的算法。

```
a[1][1] * x[1] + a[1][2] * x[2] + ... + a[1][m] * x[m] = number 1
a[2][1] * x[1] + a[2][2] * x[2] + ... + a[2][m] * x[m] = number 2
...
a[n][1] * x[1] + a[n][2] * x[2] + ... + a[n][m] * x[m] = number n 
```

有克拉默规则可以做到这一点。我可以制作 1 个系数方阵，使用 Cramer 规则求解系统（通过计算矩阵的行列式），然后我应该检查未使用方程中的值。我相信我可以自己尝试 Cramer，但我正在寻找更好的解决方案。

这是计算科学的问题， [http](http://en.wikipedia.org/wiki/Computational_science#Numerical_simulations) ://en.wikipedia.org/wiki/Computational_science#Numerical_simulations 我知道有一些复杂的算法可以解决我的问题，但我不知道哪个会做，哪个最好对于我的情况。一个算法会比仅仅通过演示的理论更好地使用我。

我的问题是，有人知道用 PHP 编写的类、脚本、代码来解决 1 级线性方程组吗？或者，我可以尝试 API 或 Web 服务，最好是免费的，付费的也可以。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-08T12:44:16.313

我正是需要这个，但我找不到行列式函数，所以我自己做了一个。Cramer 规则函数也是如此。也许它会帮助某人。

```
/**
 * $matrix must be 2-dimensional n x n array in following format
 * $matrix = array(array(1,2,3),array(1,2,3),array(1,2,3))
 */
function determinant($matrix = array()) {
    // dimension control - n x n
    foreach ($matrix as $row) {
        if (sizeof($matrix) != sizeof($row)) {
            return false;
        }
    }
    // count 1x1 and 2x2 manually - rest by recursive function
    $dimension = sizeof($matrix);
    if ($dimension == 1) {
        return $matrix[0][0];
    }
    if ($dimension == 2) {
        return ($matrix[0][0] * $matrix[1][1] - $matrix[0][1] * $matrix[1][0]);
    }
    // cycles for submatrixes calculations
    $sum = 0;
    for ($i = 0; $i < $dimension; $i++) {
        // for each "$i", you will create a smaller matrix based on the original matrix
        // by removing the first row and the "i"th column.
        $smallMatrix = array();
        for ($j = 0; $j < $dimension - 1; $j++) {
            $smallMatrix[$j] = array();
            for ($k = 0; $k < $dimension; $k++) {
                if ($k < $i) $smallMatrix[$j][$k] = $matrix[$j + 1][$k];
                if ($k > $i) $smallMatrix[$j][$k - 1] = $matrix[$j + 1][$k];
            }
        }
        // after creating the smaller matrix, multiply the "i"th element in the first
        // row by the determinant of the smaller matrix.
        // odd position is plus, even is minus - the index from 0 so it's oppositely
        if ($i % 2 == 0){
            $sum += $matrix[0][$i] * determinant($smallMatrix);
        } else {
            $sum -= $matrix[0][$i] * determinant($smallMatrix);
        }
    }
    return $sum;
}
/**
 * left side of equations - parameters:
 * $leftMatrix must be 2-dimensional n x n array in following format
 * $leftMatrix = array(array(1,2,3),array(1,2,3),array(1,2,3))
 * right side of equations - results:
 * $rightMatrix must be in format
 * $rightMatrix = array(1,2,3);
 */
function equationSystem($leftMatrix = array(), $rightMatrix = array()) {
    // matrixes and dimension check
    if (!is_array($leftMatrix) || !is_array($rightMatrix)) {
        return false;
    }
    if (sizeof($leftMatrix) != sizeof($rightMatrix)) {
        return false;
    }
    $M = determinant($leftMatrix);
    if (!$M) {
        return false;
    }
    $x = array();
    foreach ($rightMatrix as $rk => $rv) {
        $xMatrix = $leftMatrix;
        foreach ($rightMatrix as $rMk => $rMv) {
            $xMatrix[$rMk][$rk] = $rMv;
        }
        $x[$rk] = determinant($xMatrix) / $M;
    }
    return $x;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:00:32.563

维基百科应该有伪代码，用于将表示您的方程的矩阵简化为[简化的行梯形形式](http://en.wikipedia.org/wiki/Row_echelon_form)。一旦矩阵采用这种形式，您就可以遍历行以找到解决方案。

有一个未[维护的 PEAR 包](http://pear.php.net/package/Math_Matrix)可以节省您编写代码的工作量。

另一个问题是您主要关注的是“宽”系统（变量多于方程，通常有许多可能的解）还是“窄”系统（方程多于变量，通常没有解），因为最佳策略取决于在这种情况下，狭窄的系统可能会受益于使用线性回归技术，例如[最小二乘法](http://en.wikipedia.org/wiki/Ordinary_least_squares)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-20T12:14:36.603

[这个包](https://github.com/jimilinuxguy/PHP-Gaussian-Elimination)使用高斯消除。我发现它对更大的矩阵（即更多的变量/方程）执行得很快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T13:48:54.677

这里有一个基于 JAMA 的真正优秀的包：[http ://www.phpmath.com/build02/JAMA/docs/index.php](http://www.phpmath.com/build02/JAMA/docs/index.php)

我已经将它用于简单的线性，以用于高度复杂的多元线性回归（在此基础上编写我自己的 Backwards Stepwise MLR 函数）。非常全面，希望能满足您的需求。

当然，速度可以被认为是一个问题。但是当我在 BSMLR 计算中交叉引用结果时，它可以很好地处理和匹配 SPSS。

# ruby-on-rails - Rails 应用程序和 goliath api 以及数据库/模型共享

> ID：11137849
> 
> 赞同：11
> 
> 时间：2012-06-21T12:10:30.697
> 
> 标签：ruby-on-rails, ruby, eventmachine, goliath

我正在尝试使用 Goliath 框架创建异步 api。服务应该写入 mysql，向 RabbitMQ 添加消息并接收响应。还应该有一个使用 Rails 构建的单独的管理应用程序。我对此有几个问题：

有没有办法在 Rails 和 Goliath 之间有效地共享模型？在 em 中使用 Activerecord 或任何其他 orm 有什么问题吗？是否有任何最佳实践、配置（连接池大小、驱动程序）或其他选项？我必须使用什么来接收来自 AMQP 的消息？构建一个单独的 eventmachine 守护进程会更好，还是我可以以某种方式使用 Goliath 的守护进程？感谢提前。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T14:28:24.763

这是在 Goliath 中使用 ActiveRecord 模型的快速技巧。使用这种方法，您可以在不使用 require 的情况下使用模型，但您没有模型级别的关系。为了获得 has_many 和 belongs_to 关系（在这种方法中），我将加载模型文件并在下面的类定义循环中包含包含此类单词的行。

```
 require 'goliath'
    require 'active_record'
    require 'active_support'

    # The location of the Rails app to integrate
    RAILS_APP ||= ENV['HOME']+"/dev/qtrack"

    # Load the ActiveRecord database configuration, development settings
    configpath = File.join(RAILS_APP, "config", "database.yml")
    config = YAML::load_file(configpath)
    ActiveRecord::Base.establish_connection config["development"]

    # Set the names of all Rails models to a constant
    MODELS ||= []
    models_dir = File.join(RAILS_APP, "app", "models")
    model_names = Dir[models_dir+"/*.rb"]

    # Loop over each file name, define a class for each
    model_names.each do |fname|
      mname = File.basename(fname, '.rb').titleize.sub(/ /, '')
      eval %Q{
        class ::#{mname} < ActiveRecord::Base
        end
      }
      m = mname.constantize
      MODELS << m unless MODELS.include?(m)
    end

    class Hello < Goliath::API
      # default to JSON output, allow Yaml as secondary
      use Goliath::Rack::Render, ['json', 'yaml']

      def response(env)
        # Create a Hash with each model name and the object count
        models = MODELS.inject({}) {|hsh,model| hsh[model] = model.count; hsh }
        [200, {}, models.to_json ]
      end
    end 
```

这是基于您的反馈的 hack。

# vb.net - 从 ms 检索自动编号访问 vb.net 中的强类型数据库

> ID：11137862
> 
> 赞同：0
> 
> 时间：2012-06-21T12:11:32.040
> 
> 标签：vb.net, visual-studio-2010, ms-access-2007, identity, autonumber

我正在使用 VS2010/VB.NET/MS Access 2007

我添加了一个从 ms 访问到 vb.net 应用程序（强类型）的数据库，该表包含一个自动编号字段。

我做了一个按钮来添加新行，另一个按钮来保存行问题是我想从数据库中获取最后一个自动编号，以便我可以保存行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:15:10.010

执行`SELECT @@IDENTITY`以获取最后插入的标识值。

# batch-file - 将命令输出批量传递给变量

> ID：11137864
> 
> 赞同：0
> 
> 时间：2012-06-21T12:11:53.147
> 
> 标签：batch-file, sed

我想将 Sed 命令的输出批量传递给变量。例如，在文件“input.txt”中，我有`name=kiddy bla bla`. 我想提取单词`kiddy`并将其保存在一个变量中（例如，`name`），以便以后可以使用它（使用`%name%`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:15:51.353

当然，您可以使用循环`sed`命令的输出设置变量：`for`

```
for /f %%v in ('sed blah blah...') do (set "name=%%v") 
```

是的，它不是那么直观，但它确实有效。
此外，您可以将命令更改为您想要的任何内容，只要它位于撇号 ( `'`) 之间即可。

PS
要从中提取值`kiddy`，请`name="kiddy" bla bla`使用以下`sed`语法：

```
sed "s/""/'/g" | sed "s/.*='\(.[^']*\)'.*/\1/" 
```

# magento - 了解 Magento Adminhtml 布局

> ID：11137868
> 
> 赞同：0
> 
> 时间：2012-06-21T12:12:06.987
> 
> 标签：magento

我正在尝试为我的自定义管理页面“设备”加载自定义布局页面。它不工作！:)

```
<layout version="0.1.0">
  <adminhtml_devices_index_index>
    <reference name="content">
        <block type="adminhtml/template" name="index" output="toHtml" template="devices/index.phtml"/>
    </reference>
   </adminhtml_devices_index_index>
</layout> 
```

如果这是我的 app/design/adminhtml/default/default/layout/devices.xml 中的 XML

我必须注意哪些不同的文件/属性？

另外， type='adminhtml/template' 实际上指向什么？

注意：我的控制器代码是

```
public function indexAction() {
  $this->loadLayout();
  $this->renderLayout();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:25:29.360

对于快速测试，请使用非模板块。该块将作为“内容”块中的渲染过程输出，因此无需指定`output="toHtml"`.

```
<reference name="content">
    <block type="core/text" name="devices.test">
        <action method="setText">
            <val>This is some sample text</val>
        </action>
    </block>
</reference> 
```

块类型参数`adminhtml/template`指向块类组“adminhtml”，它在`Mage_Adminhtml`config.xml 中定义：

```
<global>
    <blocks>
        <adminhtml>
            <class>Mage_Adminhtml_Block 
```

基于此，`adminhtml/template`参数指向块名称`Mage_Adminhtml_Block_Template`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:10:14.470

试试看：

```
<layout version="0.1.0">
  <devices_adminhtml_index_index>
    <reference name="content">
        <block type="adminhtml/template" name="index" output="toHtml" template="devices/index.phtml"/>
    </reference>
   </devices_adminhtml_index_index>
</layout> 
```

而且我不确定这里应该是什么：`adminhtml/template`尝试将其替换为`core/template`

# c++ - 静态工厂方法和静态对象内存泄漏

> ID：11137874
> 
> 赞同：0
> 
> 时间：2012-06-21T12:12:27.287
> 
> 标签：c++, memory-leaks, new-operator, static-methods, delete-operator

我有一个带有静态工厂构造函数的类，它返回一个指向所创建对象的指针。

我必须将对象声明为命名空间内的静态对象，但我不知道如何正确删除它

```
class Foo
{
   public:
   Foo(int, int* );
   virtual ~Foo();
   static Foo* MyFooInitializer(int n )
   {
      int *p = new int[n];
      for (int i=0; i<n; i++)
         p[i]=i;

      Foo *ret = new Foo(n,p);
      delete p;
      return ret;
   }
   int someFooFunction(int a);
} 
```

然后在我的命名空间中我有一个`static inline`函数

```
namespace MyNamespace
{

    static inline void  myfunction()
    {
        static Foo  *foo1 = Foo::MyFooInitializer(10); 
        int y = somevalue();
        int x = foo1->someFooFunction(int y);
    } 
} 
```

我显然在这里有内存泄漏，因为该对象永远不会被删除。

重要的事实是我需要将 foo1 声明为静态的，因为一旦创建，它在所有程序中必须是同一个对象并且必须是唯一的（它跟踪一些变量）。

可能这是一个设计问题，但是当我的程序退出或当我明确想要删除它以重新初始化它时，我不知道如何删除它。

**解决方案：**

我这样修改了正文`MyFooInitializer`：

```
 static Foo* MyFooInitializer(int n )
   {
      int *p = new int[n];
      for (int i=0; i<n; i++)
         p[i]=i;

      static Foo ret = Foo(n,p);
      delete[] p;
      return &ret;
   } 
```

这允许我在程序终止时正确释放所有内存。Valgrind 说所有的堆内存都被释放了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T12:15:36.743

这里不需要在堆上分配 Foo ：

```
static Foo* MyFooInitializer(int x) {
    static Foo some_foo(x);
    return &some_foo;
} 
```

该代码没有泄漏， Foo 将在您的程序结束时被销毁。

请注意，如果返回的指针`MyFooInitializer`实际上指向某个继承自 的类`Foo`，那么您只需对静态变量使用派生类型：

```
static Foo* MyFooInitializer(int x) {
    static SomeFooDerived some_foo(x);
    return &some_foo;
} 
```

**编辑**：由于您提供了实际的函数体，我的回答是有效的。你会这样做：

```
static Foo* MyFooInitializer(int n ) {
   // Don't know what this p is, anyway...
   int *p = new int[n];
   for (int i=0; i<n; i++)
      p[i]=i;

   static Foo ret(n,g); // what is g?
   delete[] p; // smart pointer plx
   return &ret;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:37:43.470

如果您绝对需要动态创建 foo1，则编写一个额外的类并按值使其静态/全局。然后使用它的析构函数来删除对象。

```
class MasterControlClass
{
    public:
    Foo* foo1;
    MasterControl(){foo1 = NULL;}
    ~MasterControl(){delete(foo1), foo1 = NULL;}
};

static inline void myfunction()
{
     static MasterControlClass mcp;
     mcp.foo1 = Foo::MyFooInitializer(10); 
} 
```

这样，当您的程序关闭时，mcp 析构函数将被调用并进行清理。如果要重新初始化，则必须在每次分配时删除 foo1 ，只需添加

```
if(mcp.foo1)
{
    delete mcp.foo1;
    mcp.foo1= NULL;
} 
```

或者更好的是，将其移至 mcp 的方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:16:25.893

怎么样

```
static inline void  myfunction()
{
    static std::unique_ptr<Foo> foo1(Foo::MyFooInitializer(10));
    int y = somevalue();
    int x = foo1->someFooFunction(int y);
} 
```

# android - java.lang.NoClassDefFoundError: android.provider.Calendar$Calendars

> ID：11137883
> 
> 赞同：2
> 
> 时间：2012-06-21T12:13:19.120
> 
> 标签：android

版本为 2.3 的本机电子邮件应用程序在 4.0 版本中运行，它将显示以下异常：

```
W/dalvikvm( 1308): VFY: unable to resolve static field 31 (CONTENT_URI) in Landroid/provider/Calendar$Calendars;
D/dalvikvm( 1308): VFY: replacing opcode 0x62 at 0x0014
E/AccountManager( 1308): Listener was not previously added
W/dalvikvm( 1308): threadid=13: thread exiting with uncaught exception (group=0x40c391f8)
V/EmailProvider( 1308): EmailProvider.query: uri=content://com.screenshare.email.provider/account/2, match is 2
E/AndroidRuntime( 1308): FATAL EXCEPTION: SyncManager
E/AndroidRuntime( 1308): java.lang.NoClassDefFoundError: android.provider.Calendar$Calendars
E/AndroidRuntime( 1308):        at com.screenshare.exchange.SyncManager$CalendarObserver.<init>(SyncManager.java:704)
E/AndroidRuntime( 1308):        at com.screenshare.exchange.SyncManager.registerCalendarObserver(SyncManager.java:655)
E/AndroidRuntime( 1308):        at com.screenshare.exchange.SyncManager.checkMailboxes(SyncManager.java:2138)
E/AndroidRuntime( 1308):        at com.screenshare.exchange.SyncManager.run(SyncManager.java:1949)
E/AndroidRuntime( 1308):        at java.lang.Thread.run(Thread.java:856) 
```

日历 API 是否从 4.0 中删除？2.3 如何让Email应用在4.0中成功运行？还是修不了？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:51:39.163

我知道原因：日历提供程序在 4.0 中已更改。在 2.3 中，日历提供程序是`android.provider.Calendar`，在 4.0 中，日历提供程序是`android.provider.CalendarContract`. 所以如果不修改源代码，4.0是无法成功运行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T06:48:07.640

让您的代码在任何版本的 android 上运行

```
if (android.os.Build.VERSION.SDK_INT > android.os.Build.VERSION_CODES.GINGERBREAD) {
    use android.provider.Calendar

}else{
    use android.provider.CalendarContract
} 
```

# xaml - 让 TextBox 拉伸以填充 StackPanel 中的宽度

> ID：11137884
> 
> 赞同：32
> 
> 时间：2012-06-21T12:13:20.207
> 
> 标签：xaml, textbox, windows-runtime, microsoft-metro, stackpanel

我的`StackPanel`WinRT C# Metro 应用程序中有一个我想用作标签/值对（`TextBlock`和`TextBox`）的容器，如下所示：

```
<StackPanel Orientation="Horizontal" Width="400">
    <TextBlock Text="Label" Width="150" />
    <TextBox Text="Value" />
</StackPanel> 
```

现在我想要的是让 TextBox 自动填充 StackPanel 的剩余水平空间。这有可能吗？`HorizontalAlignment`/`HorizontalContentAlignment`不工作。

我知道另一种选择是为此定义一个`Grid`。问题是我多次使用此构造并希望在`Style`定义中使用它。我不想用 x 次的行和列来定义 Grid 的定义......

也许另一种选择是定义一个自定义用户控件，但我希望有一个简单的可能性`TextBox`来伸展。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-21T12:41:25.543

不幸的是，Metro 没有替代方案（DockPanel）。您可以尝试 WrapGrid，但我不知道它是否能解决您的问题（我从未使用过它）。

这样做的唯一真正方法是使用您所描述的 Grid ：

```
<Grid Width="400">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <TextBlock Text="Label" Width="150" />
    <TextBox Text="Value" Grid.Column="1" />
</Grid> 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-05-15T08:57:33.910

我不确定你放`HorizontalAlignment`了哪个元素，但这对我有用：

```
<StackPanel>
    <TextBlock Text="Title" Style="..."/>
    <TextBlock Margin="0,0,0,10" Text="Description" Style="..."/>
    <TextBox HorizontalAlignment="Stretch" />
    <Button Margin="0" Content="Save"/>
</StackPanel> 
```

这会将 延伸`TextBox`到 的整个宽度`StackPanel`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-27T02:18:27.300

在查找是否存在 WinRT DockPanel 时遇到了这个问题。

我最终稍微修改了 Silverlight Toolkit 附带的 DockPanel，它似乎可以工作。

要使用，添加`xmlns:toolkit="using:System.Windows.Controls"`到顶部，并以上面的问题为场景，我们可以这样写：

```
<toolkit:DockPanel Width="400">
    <TextBlock Text="Label" Width="150" toolkit:DockPanel.Dock="Left" />
    <TextBox Text="Value" />
</toolkit:DockPanel> 
```

DockPanel.cs：

```
// (c) Copyright Microsoft Corporation.
// This source is subject to the Microsoft Public License (Ms-PL).
// Please see http://go.microsoft.com/fwlink/?LinkID=131993 for details.
// All other rights reserved.

// Modified slightly for Windows Runtime support.

using System;
using System.Collections.Generic;
using System.Diagnostics.CodeAnalysis;
using System.Globalization;
using System.IO;
using System.Linq;
using Windows.Foundation;
using Windows.Foundation.Collections;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Controls.Primitives;
using Windows.UI.Xaml.Data;
using Windows.UI.Xaml.Input;
using Windows.UI.Xaml.Media;
using Windows.UI.Xaml.Navigation;

namespace System.Windows.Controls
{
    public enum Dock
    {
        // Summary:
        //     Specifies that the control should be positioned on the left of the control.
        Left = 0,
        //
        // Summary:
        //     Specifies that the control should be positioned on top of the control.
        Top = 1,
        //
        // Summary:
        //     Specifies that the control should be positioned on the right of the control.
        Right = 2,
        //
        // Summary:
        //     Specifies that the control should be positioned at the bottom of the control.
        Bottom = 3,
    }

    /// <summary>
    /// Arranges child elements around the edges of the panel.  Optionally, 
    /// last added child element can occupy the remaining space.
    /// </summary>
    /// <QualityBand>Stable</QualityBand>
    public class DockPanel : Panel
    {
        /// <summary>
        /// A value indicating whether a dependency property change handler
        /// should ignore the next change notification.  This is used to reset
        /// the value of properties without performing any of the actions in
        /// their change handlers.
        /// </summary>
        private static bool _ignorePropertyChange;

        #region public bool LastChildFill
        /// <summary>
        /// Gets or sets a value indicating whether the last child element
        /// added to a <see cref="T:System.Windows.Controls.DockPanel" />
        /// resizes to fill the remaining space.
        /// </summary>
        /// <value>
        /// True if the last element added resizes to fill the remaining space,
        /// false to indicate the last element does not resize. The default is
        /// true.
        /// </value>
        public bool LastChildFill
        {
            get { return (bool)GetValue(LastChildFillProperty); }
            set { SetValue(LastChildFillProperty, value); }
        }

        /// <summary>
        /// Identifies the
        /// <see cref="P:System.Windows.Controls.DockPanel.LastChildFill" />
        /// dependency property.
        /// </summary>
        public static readonly DependencyProperty LastChildFillProperty =
            DependencyProperty.Register(
                "LastChildFill",
                typeof(bool),
                typeof(DockPanel),
                new PropertyMetadata(true, OnLastChildFillPropertyChanged));

        /// <summary>
        /// LastChildFillProperty property changed handler.
        /// </summary>
        /// <param name="d">DockPanel that changed its LastChildFill.</param>
        /// <param name="e">Event arguments.</param>
        private static void OnLastChildFillPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            DockPanel source = d as DockPanel;
            source.InvalidateArrange();
        }
        #endregion public bool LastChildFill

        #region public attached Dock Dock
        /// <summary>
        /// Gets the value of the
        /// <see cref="P:System.Windows.Controls.DockPanel.Dock" /> attached
        /// property for the specified element.
        /// </summary>
        /// <param name="element">
        /// The element from which the property value is read.
        /// </param>
        /// <returns>
        /// The <see cref="P:System.Windows.Controls.DockPanel.Dock" /> property
        /// value for the element.
        /// </returns>
        [SuppressMessage("Microsoft.Design", "CA1011:ConsiderPassingBaseTypesAsParameters", Justification = "DockPanel only has UIElement children")]
        public static Dock GetDock(UIElement element)
        {
            if (element == null)
            {
                throw new ArgumentNullException("element");
            }
            return (Dock)element.GetValue(DockProperty);
        }

        /// <summary>
        /// Sets the value of the
        /// <see cref="P:System.Windows.Controls.DockPanel.Dock" /> attached
        /// property for the specified element to the specified dock value.
        /// </summary>
        /// <param name="element">
        /// The element to which the attached property is assigned.
        /// </param>
        /// <param name="dock">
        /// The dock value to assign to the specified element.
        /// </param>
        [SuppressMessage("Microsoft.Design", "CA1011:ConsiderPassingBaseTypesAsParameters", Justification = "DockPanel only has UIElement children")]
        public static void SetDock(UIElement element, Dock dock)
        {
            if (element == null)
            {
                throw new ArgumentNullException("element");
            }
            element.SetValue(DockProperty, dock);
        }

        /// <summary>
        /// Identifies the
        /// <see cref="P:System.Windows.Controls.DockPanel.Dock" />
        /// attached property.
        /// </summary>
        public static readonly DependencyProperty DockProperty =
            DependencyProperty.RegisterAttached(
                "Dock",
                typeof(Dock),
                typeof(DockPanel),
                new PropertyMetadata(Dock.Left, OnDockPropertyChanged));

        /// <summary>
        /// DockProperty property changed handler.
        /// </summary>
        /// <param name="d">UIElement that changed its Dock.</param>
        /// <param name="e">Event arguments.</param>
        [SuppressMessage("Microsoft.Usage", "CA2208:InstantiateArgumentExceptionsCorrectly", Justification = "Almost always set from the attached property CLR setter.")]
        private static void OnDockPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            // Ignore the change if requested
            if (_ignorePropertyChange)
            {
                _ignorePropertyChange = false;
                return;
            }

            UIElement element = (UIElement)d;
            Dock value = (Dock)e.NewValue;

            // Validate the Dock property
            if ((value != Dock.Left) &&
                (value != Dock.Top) &&
                (value != Dock.Right) &&
                (value != Dock.Bottom))
            {
                // Reset the property to its original state before throwing
                _ignorePropertyChange = true;
                element.SetValue(DockProperty, (Dock)e.OldValue);

                string message = string.Format(
                    CultureInfo.InvariantCulture,
                    "InvalidValue",
                    value);
                throw new ArgumentException(message, "value");
            }

            // Cause the DockPanel to update its layout when a child changes
            DockPanel panel = VisualTreeHelper.GetParent(element) as DockPanel;
            if (panel != null)
            {
                panel.InvalidateMeasure();
            }
        }
        #endregion public attached Dock Dock

        /// <summary>
        /// Initializes a new instance of the
        /// <see cref="T:System.Windows.Controls.DockPanel" /> class.
        /// </summary>
        public DockPanel()
        {
        }

        /// <summary>
        /// Measures the child elements of a
        /// <see cref="T:System.Windows.Controls.DockPanel" /> in preparation
        /// for arranging them during the
        /// <see cref="M:System.Windows.Controls.DockPanel.ArrangeOverride(System.Windows.Size)" />
        /// pass.
        /// </summary>
        /// <param name="constraint">
        /// The area available to the
        /// <see cref="T:System.Windows.Controls.DockPanel" />.
        /// </param>
        /// <returns>
        /// The desired size of the
        /// <see cref="T:System.Windows.Controls.DockPanel" />.
        /// </returns>
        [SuppressMessage("Microsoft.Naming", "CA1725:ParameterNamesShouldMatchBaseDeclaration", MessageId = "0#", Justification = "Compat with WPF.")]
        protected override Size MeasureOverride(Size constraint)
        {
            double usedWidth = 0.0;
            double usedHeight = 0.0;
            double maximumWidth = 0.0;
            double maximumHeight = 0.0;

            // Measure each of the Children
            foreach (UIElement element in Children)
            {
                // Get the child's desired size
                Size remainingSize = new Size(
                    Math.Max(0.0, constraint.Width - usedWidth),
                    Math.Max(0.0, constraint.Height - usedHeight));
                element.Measure(remainingSize);
                Size desiredSize = element.DesiredSize;

                // Decrease the remaining space for the rest of the children
                switch (GetDock(element))
                {
                    case Dock.Left:
                    case Dock.Right:
                        maximumHeight = Math.Max(maximumHeight, usedHeight + desiredSize.Height);
                        usedWidth += desiredSize.Width;
                        break;
                    case Dock.Top:
                    case Dock.Bottom:
                        maximumWidth = Math.Max(maximumWidth, usedWidth + desiredSize.Width);
                        usedHeight += desiredSize.Height;
                        break;
                }
            }

            maximumWidth = Math.Max(maximumWidth, usedWidth);
            maximumHeight = Math.Max(maximumHeight, usedHeight);
            return new Size(maximumWidth, maximumHeight);
        }

        /// <summary>
        /// Arranges the child elements of the
        /// <see cref="T:System.Windows.Controls.DockPanel" /> control.
        /// </summary>
        /// <param name="arrangeSize">
        /// The area in the parent element that the
        /// <see cref="T:System.Windows.Controls.DockPanel" /> should use to
        /// arrange its child elements.
        /// </param>
        /// <returns>
        /// The actual size of the
        /// <see cref="T:System.Windows.Controls.DockPanel" /> after the child
        /// elements are arranged. The actual size should always equal
        /// <paramref name="arrangeSize" />.
        /// </returns>
        [SuppressMessage("Microsoft.Naming", "CA1725:ParameterNamesShouldMatchBaseDeclaration", MessageId = "0#", Justification = "Compat with WPF.")]
        protected override Size ArrangeOverride(Size arrangeSize)
        {
            double left = 0.0;
            double top = 0.0;
            double right = 0.0;
            double bottom = 0.0;

            // Arrange each of the Children
            UIElementCollection children = Children;
            int dockedCount = children.Count - (LastChildFill ? 1 : 0);
            int index = 0;
            foreach (UIElement element in children)
            {
                // Determine the remaining space left to arrange the element
                Rect remainingRect = new Rect(
                    left,
                    top,
                    Math.Max(0.0, arrangeSize.Width - left - right),
                    Math.Max(0.0, arrangeSize.Height - top - bottom));

                // Trim the remaining Rect to the docked size of the element
                // (unless the element should fill the remaining space because
                // of LastChildFill)
                if (index < dockedCount)
                {
                    Size desiredSize = element.DesiredSize;
                    switch (GetDock(element))
                    {
                        case Dock.Left:
                            left += desiredSize.Width;
                            remainingRect.Width = desiredSize.Width;
                            break;
                        case Dock.Top:
                            top += desiredSize.Height;
                            remainingRect.Height = desiredSize.Height;
                            break;
                        case Dock.Right:
                            right += desiredSize.Width;
                            remainingRect.X = Math.Max(0.0, arrangeSize.Width - right);
                            remainingRect.Width = desiredSize.Width;
                            break;
                        case Dock.Bottom:
                            bottom += desiredSize.Height;
                            remainingRect.Y = Math.Max(0.0, arrangeSize.Height - bottom);
                            remainingRect.Height = desiredSize.Height;
                            break;
                    }
                }

                element.Arrange(remainingRect);
                index++;
            }

            return arrangeSize;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-02T03:29:35.887

如何使用RelativePanel。

```
<RelativePanel Width="320" Height="180" BorderBrush="Black" BorderThickness="1">
  <TextBox RelativePanel.AlignTopWithPanel="True"
           RelativePanel.AlignBottomWithPanel="True"
           RelativePanel.AlignLeftWithPanel="True"
           RelativePanel.AlignRightWithPanel="True"
           TextWrapping="Wrap"/>
</RelativePanel> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-09-30T13:20:12.247

发现最好的本地控制内容是网格看看我的例子对我来说很好：

```
<Grid >
   <TextBox x:Name="txtCountry" Margin="0,8,41,8" />
   <Button x:Name="btnGetCountry" Content="..." Margin="0,8,0,8"  HorizontalAlignment="Right"  Click="btnGetCountry_Click"> </Button>
</Grid> 
```

这将生成一个很好的适应性布局，其中包含一个文本框和一个按钮，可以保持他的外观

# r - 对于何时应将可重现的代码包含在出版物中，是否有任何指导方针？

> ID：11137887
> 
> 赞同：13
> 
> 时间：2012-06-21T12:13:37.857
> 
> 标签：r

鉴于对可重复科学的压力，我想知道我最近的工作是否值得在出版物中包含示例代码。我使用的数据集非常大，因此发布这些必要性是没有意义的 - 但是，我在 R 中应用的统计方法通常不为我的听众所知（尽管我认为它们应该是）。

我在分析中使用经验正交函数分析 (EOF) 和广义加法模型 (GAM)。尤其是 GAM，广泛用于生态研究，但在物理科学中应用较少——我的工作跨越两个学科。

我肯定会参考我使用的 R 包，审阅者/读者自己查找这些参考资料（和包含的示例）并不难。所以，我的问题是，什么情况下最适合在出版物中包含可重现的代码？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-21T12:21:21.717

代码是您实际所做的最准确的表示。因此，在我看来，您应该*始终*将代码与您的文章一起发布。

但是，编辑对此的抵制非常强烈。担心的是，如果审稿人可以访问代码，那么如果以后发现实质性的编码错误，期刊就会看起来很糟糕。[鉴于莱维特论文](http://scienceblogs.com/deltoid/2005/12/02/lott-levitt-and-coding-errors/)等，这不是假设的恐惧。

Knuth 对文学编程有一些强烈的观点，你应该可以引用这些观点作为理由。如果您无法说服期刊接受您的代码作为出版物的组成部分，请考虑将其发布在您的个人网站上（例如[Raj Chetty](http://obs.rc.fas.harvard.edu/chetty/chettypaperschrono.html)为他的许多论文所采用的方法）或将其作为 R 包发布。

最后，这是我写给我的编程学生的便条：

> 考虑发布您的代码。这样做将作为一种承诺手段，鼓励良好的习惯——使你自己的工作更轻松的习惯。发布您的代码还可以让其他人更轻松地扩展您的分析，这可能会导致更多人引用您的工作。发布您的代码也是一种很好的学术实践：它是您分析的最真实证明。将您的程序提供给全世界展示您即将获得的优美的编码技能。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-21T12:35:42.797

科学的一个基本原则是可重复性。因此，答案是“包含”对基于数据分析的每篇论文/出版物进行分析所需的代码。

我说“包含”是因为您不需要将 R 代码直接放入论文中。许多（如果不是大多数）期刊都允许补充材料，这是一种选择。或者，将您的脚本提供给许多科学数据存档站点之一（例如 Figshare），然后（这就是杀手！）使用 Figshare 为您存放的脚本提供的 DOI 引用您自己的脚本。如果您也可以发布数据，那就更好了；Figshare 并不太关心大数据集。

以上适用于您使用其他包的代码，并且您的 R 脚本执行诸如加载和格式化数据、从其他包调用函数然后绘制或显示输出/结果等操作。如果您开发了新的 R 代码来实现特定方法，那么我会说将代码打包为 R 包并将其提交给 CRAN 或 r-forge 或类似的东西。

根据您的描述，前者（将分析脚本存放在回购中）将是最合适的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-21T13:11:51.393

我们最近在我们的研究所就可重复性研究进行了讨论。激励来自 Nature 社论 (http://arstechnica.com/science/2012/02/science-code-should-be-open-source-according-to-editorial/)，该社论认为你的所有代码都应该发布. 我完全同意这一点。即使您的数据集非常大，发布用于创建结果的 R 代码也可以让您一目了然。通常，论文的方法没有包含足够的细节来重现结果，在这种情况下，代码很有帮助。

# dependencies - Liferay：是否可以通过 portlet 定义初始化依赖关系？

> ID：11137889
> 
> 赞同：4
> 
> 时间：2012-06-21T12:13:38.477
> 
> 标签：dependencies, initialization, liferay, portlet

我有两个 Portlet：Portlet-A 和 Portlet-B。

Portlet-A 进行一些数据初始化并将其存储在共享范围内。

初始化期间的 Portlet-B 需要来自共享范围的此数据（来自 Portlet-A）。

但是，我需要定义 Portlet-A 必须在 Portlet-B 之前启动（渲染）。

Liferay 是否可以定义某种初始化顺序，或类似 portlet 依赖项之类的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T05:29:27.593

如果我理解正确，您需要在同一页面上的 Portlet-B 之前呈现 Portlet-A。

然后您可以在 中定义`liferay-portlet.xml`： portlet 渲染`<render-weight>50</render-weight>`得`render-weight`越快，换句话说，如果`render-weight`Portlet-B 小于 Portlet-A，那么它将在 Portlet-A 之后渲染。

[关于DTD](http://www.liferay.com/dtd/liferay-portlet-app_6_1_0.dtd)`render-weight`的更多解释

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T15:37:56.933

据我所知，Liferay 对 portlet 进行延迟加载，因此您无法保证 portlet 初始化和 portlet`doView()`调用的顺序。

当您在单个页面上使用多个 portlet 时，您面临的问题是常见的问题。

在这里，常见的解决方法是，setter portlet（在您的情况下是 portlet A）应该在`processAction()`方法中设置属性，而 getter portlet（portlet B）应该从`doView()`.

原因是，你不能保证的顺序，`doView()`但是，如果你正在触发 actionURL，`processAction()`总是会在 doView() 之前调用。

因此，在呈现 UI 时，所有其他 portlet 都可以使用该属性。保证！

# c# - C#：使用 XPath 获取所需节点

> ID：11137894
> 
> 赞同：0
> 
> 时间：2012-06-21T12:13:52.837
> 
> 标签：c#, xpath, xmldocument

我有具有下一个结构的 XmlDocument 对象：

```
<ROOT>
<MESSAGE>
 <some_fields />
 <myDate>
 <myParameter>
</MESSAGE>
<MESSAGE>
 ...
</ROOT> 
```

我想获取 myDate>= 给定日期和 myParameter=given 参数的所有 MESSAGE 节点。即类似的东西：

```
MyDoc.SelectNodes("/ROOT/MESSAGE..") 
```

是否可以使用 XPath 来做到这一点？

==================

好的。myDate 已经输入了 xs:dateTime。但现在我有下一个例外：

> //MESSAGE[myDate < xs:dateTime(2012-06-22T11:17:44)]' 具有无效的限定名称。

代码是：

```
 XmlNodeList nodeList = MyXmlDocument.SelectNodes("//MESSAGE[myDate < xs:dateTime(" + givenDateTime + ")]"); 
```

即使使用它也不起作用

```
"//MESSAGE[xs:dateTime('2012-06-22T11:47:32')=xs:dateTime('2012-06-22T11:47:32')]" 
```

然后我有 System.Xml.XPath.XPathException：

> 需要命名空间管理器或 XsltContext。此查询具有前缀、变量或用户定义的函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:33:10.067

它可以纯粹在 XPATH 中完成：

```
MyDoc.SelectNodes("//MESSAGE[xs:date(./myDate@text()) > xs:date('given date') and myParameter[text()='given parameter']]") 
```

*[未经测试]*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:19:20.323

是的，这很有可能。请通过以下链接获取您需要的所有运营商。

[http://msdn.microsoft.com/en-us/library/aa226440(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa226440%28v=sql.80%29.aspx)

[http://www.javabeat.net/2009/03/how-to-query-xml-using-xpath/](http://www.javabeat.net/2009/03/how-to-query-xml-using-xpath/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T12:17:31.633

我建议使用 LINQ。

你可以有类似的东西

```
var nodes = from node in XDoc.Root.Elements("MESSAGE")
            where (DateTime)node.Element("myDate") >= DateTime.Now
            select node; 
```

这将选择 myDate 时间是当前 DateTime 或将来的节点元素。您可能想进一步研究使用 LINQ 进行 XML 解析。我发现它是 XML 解析的首选方法。

给你的另一个例子：

```
var nodes = from node in XDoc.Root.Elements("MESSAGE")
                where (DateTime)node.Element("myDate") >= DateTime.Now
                && node.Element("myParameter").Value == "whatever"
                select node; 
```

# c++ - 为什么 strcmp 对 clang 是未知的？

> ID：11137895
> 
> 赞同：14
> 
> 时间：2012-06-21T12:13:54.443
> 
> 标签：c++, clang, strcmp

我有一个比较两个字符串的基本程序：

```
#include <string>
#include <iostream>

using namespace std;

int main (int argc, char *argv[]) {
  if(strcmp (argv[0],"./test") != 0) {
    cout << "not equal" << endl;
  } else {
    cout << "equal" << endl;
  }
  return 0;
} 
```

它用 gcc 编译，但不能用 clang 编译：

```
 > clang -o test test_clang.cpp 
test_clang.cpp:7:6: error: use of undeclared identifier 'strcmp'
  if(strcmp (argv[0],"./test") != 0) {
     ^
1 error generated. 
```

为什么它不能用 clang 编译？

编辑：人们对堆栈溢出越来越苛刻，直到我犹豫要不要发布一个问题。上面的问题有一个简单的答案，很好，但是因为他们有一个简单但不明显的答案而对问题投反对票（在第一分钟两次！）是正常的吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-21T12:16:52.770

采用

```
#include <string.h> 
```

或者

```
#include <cstring> 
```

代替

```
#include <string> 
```

**字符串**标头用于 C++ 中的std::string。**string.h**用于 C 零终止的 char* 字符串。**cstring**类似于 string.h 但用于 C++。

它与 gcc 一起工作的原因可能是不同的警告/错误级别设置。可以在没有#include 标头和声明strcmp 的情况下编译代码。编译器将无法进行类型检查，但符号仍由链接器解析。

您还可以完全避免使用 strcmp 并编写

```
#include <string>
#include <iostream>

int main (int argc, char *argv[]) {
  std::string command = argv[0];

  if( command != "./test" ) {
    std::cout << "not equal" << endl;
  } else {
    std::cout << "equal" << endl;
  }
  return 0;
} 
```

Using a std::string on one side of the comparison will cause the "./test" string to be converted into a std::string as well and the comparison will be done by the == operator of the std::string class.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-21T12:15:42.713

您没有包含正确的头文件

```
#include <cstring> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-21T12:16:44.713

您需要`#include <cstring>`（或可能`#include <string.h>`。）

当您包含另一个时，许多编译器会包含额外的标准头文件。该标准允许这样做；您有责任使用保证您使用的声明的头文件，而不仅仅是恰好具有编译器声明的头文件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-21T12:15:56.433

你必须包括`<cstring>`. `<string>`是 C++ 字符串的标头。

# mysql - 从 mysql 数据库中提取并加载到另一个数据库

> ID：11137896
> 
> 赞同：0
> 
> 时间：2012-06-21T12:14:02.913
> 
> 标签：mysql, etl, talend

我想从 mysql DB 中提取数据并将其加载到另一个 mysql DB，而无需在此过程中关闭 mysql。

尝试使用开源 Talend 社区版。使用了 mysql 输入组件，填写了经过测试可以工作的连接详细信息。

组件无法连接到 mysql 并得到错误：

```
Exception in component tMysqlOutput_1
java.lang.ClassNotFoundException: org.gjt.mm.mysql.Driver 
```

虽然我将 jar 添加到 eclipse 项目中：**`mysql-connector-java-5.0.8.jar`**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:16:02.477

talend 中的 mysql 组件绝对可以开箱即用，无需加载任何额外的驱动程序。我会说重新安装 talend，因为还有其他问题。

要手动加载 mysql 连接器，可以使用 tLibraryLoad 组件。从“基本设置”的下拉列表中选择 jar 文件。如果它被包含在项目中，它应该在那里。您还可以在组件的高级设置中选择一个 lib 路径，并在其下方添加导入行。

同样，您当然不需要为 mysql 组件执行此操作。Talend 随附用于连接到所有具有组件的数据库的驱动程序。事实上，我已经将这些驱动程序复制到了其他没有附带它们的程序中。

祝你好运！

# ruby-on-rails - FactoryGirl 序列不递增

> ID：11137898
> 
> 赞同：2
> 
> 时间：2012-06-21T12:14:13.950
> 
> 标签：ruby-on-rails, factory-bot

我正在使用 FactoryGirl 为 Rails 相关的 gem 创建日期维度模型的实例。我的工厂是这样的：

```
FactoryGirl.define do
  sequence :next_day do |n|
    Date.new(2000,12,31) + n.days
  end

  factory :date_dimension do
    the_date = FactoryGirl.generate(:next_day)
    date {the_date.to_s}
    calendar_year {the_date.strftime("%Y")}
    (...other attributes created similarly to calendar_year)
  end

end 
```

出于沮丧，我实际上建立了一个小测试来显示什么不起作用：

```
describe "working date factories" do
  before(:all) do
    @date_dimension = FactoryGirl.create(:date_dimension)
    @jan_two = FactoryGirl.create(:date_dimension)
  end

  describe "sequence incrementing" do
    it "returns a date dimension object ok" do
      @date_dimension.date.should == "2001-01-01"
    end
    it "returns the next date in the sequence" do
      @jan_two.date.should == "2001-01-02"
    end
  end
end 
```

当我运行该测试时，我得到：

```
working date factories
  sequence incrementing
    returns a date dimension object ok
    returns the next date in the sequence (FAILED - 1)

Failures:

  1) working date factories sequence incrementing returns the next date in the sequence
     Failure/Error: @jan_two.date.should == "2001-01-02"
       expected: "2001-01-02"
            got: "2001-01-01" (using ==) 
```

我已经阅读了一堆与序列相关的其他问题，但似乎我并没有犯其中发现的错误。这是一个不同的（可能更愚蠢的）错误。它是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T17:04:35.530

我终于找到了一种可行的方法，而且可能会更好一些。我仍然不明白为什么上面的代码不起作用 - 如果有人可以向我解释（可能参考文档或部分源代码），我会继续接受这个答案 - 这篇文章只为那些跟随的人。这是有效的：

```
FactoryGirl.define do

  factory :date_dimension do
    sequence(:date) { |n| (Date.new(2000,12,31) + n.days).to_s }
    calendar_year { Date.parse(date).strftime("%Y") }
    day_of_week { Date.parse(date).strftime("%A") }
  end

end 
```

上面的代码通过了这个测试：

```
describe "working date factories" do
  before(:all) do
    @date_dimension = FactoryGirl.create(:date_dimension)
    @jan_two = FactoryGirl.create(:date_dimension)
  end

  describe "sequences" do
    it "returns the proper first date in the sequence" do
      @date_dimension.date.should == "2001-01-01"
      @date_dimension.calendar_year.should == "2001"
      @date_dimension.day_of_week.should == "Monday"
    end
    it "returns the next date in the sequence" do
      @jan_two.date.should == "2001-01-02"
      @jan_two.calendar_year.should == "2001"
      @jan_two.day_of_week.should == "Tuesday"
    end
  end
end 
```

# android - Android 上的 SQLite MAX

> ID：11137899
> 
> 赞同：1
> 
> 时间：2012-06-21T12:14:15.403
> 
> 标签：android, sqlite, max

我有一个数据库，其中有一个表格记录车辆最后一次加油的时间。它有一个整数类型的日期列。

我需要能够确定最后的燃料更新日期。我在用：

```
Cursor cursor = db.query(FUEL_USE_TABLE_NAME, LAST_FUEL_UP_DATE_CLAUSE,
            REGISTRATION_NO_COLUMN + "=? ", new String[]{registrationNumber}, 
            null, null, null); 
```

where `LAST_FUEL_UP_DATE_CLAUSE`is `MAX(date_time)`, where`date_time`是相关列的名称。

当表中有条目时，这很好用，但是在编写单元测试时，我希望当表中没有条目时光标的行数为零，但是我得到了一个值为零的单行。即列中的最大值`date_time`为零，而实际上没有值。

我很高兴对此进行编码（用于`0`表示没有记录而不是`-1`），但想知道这是否是预期的行为，或者我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:38:15.687

这似乎是预期的行为。

[在此处](http://www.sqlite.org/lang_aggfunc.html)查看 SQLite 文档

具体来说，它说：

> 最大（X）
> 
> max() 聚合函数返回组中所有值的最大值。最大值是在同一列的 ORDER BY 中最后返回的值。当且仅当组中没有非 NULL 值时，聚合 max() 才返回 NULL。

# java - Android MediaPlayer 行为（事件顺序保证）

> ID：11137902
> 
> 赞同：2
> 
> 时间：2012-06-21T12:14:18.753
> 
> 标签：java, android, media-player

假设有两个线程：我的线程和 MediaPlayer 线程（通过 looper 向我发送消息）。我的游戏线程对用户输入做出反应：如果用户暂停游戏，我也会调用 MediaPlayer.pause()。

考虑以下事件顺序：

1.  MediaPlayer 音频流到达终点，因此它将 OnCompletion 消息排入队列给我
2.  我的线程：MediaPlayer.pause() 由于用户操作而被调用
3.  我收到 OnCompletion 调用（为时已晚，上面已经调用了 pause()）

这样做的问题是 MediaPlayer.pause() 只允许在 PAUSED 和 STARTED 状态下，但是由于第 1 步，当调用 pause() 时 MediaPlayer 已经处于 PlaybackCompleted 状态。我看到两个解决方案：

1.  捕捉异常
2.  在调用 pause() 之前询问 MediaPlayer.isPlaying()

但是第二种方案在以下场景中存在问题：

1.  游戏开始，MediaPlayer.start() 被调用，但媒体播放器状态 *尚未*开始
2.  用户离开游戏，调用代码： if(isPlaying()) pause();
3.  MediaPlayer 进入 STARTED 状态（现在 isPlaying 将返回 true，但为时已晚）

这里的问题是 isPlaying() 仍将返回 false （正如文档所说），因此 MediaPlayer 仍将由于第 3 步而启动。

是否有正确的解决方案并在这两种情况下都避免异常？（或者我上面的思路有什么错误吗？）

* * *

**更新**

对 Geobits 的回答做出反应（我在这里这样做是因为我会引用 Android 文档）：

是的，我也在做本地播放，和你一样测试了很多，一切看起来都很好。但是文档有点自相矛盾。第一部分（这没关系）：

> 调用 start() 为暂停的 MediaPlayer 对象恢复播放，恢复的播放位置与暂停的位置相同。当**对 start() 的调用返回时，暂停的 MediaPlayer 对象将返回 Started 状态**。

来自同一页面的另一句话：

> 播放可以暂停和停止，当前播放位置可以调整。可以通过 pause() 暂停播放。当对 pause() 的调用返回时，MediaPlayer 对象进入 Paused 状态。请注意，从 Started 状态到 Paused 状态的转换（**反之亦然**）在播放器引擎中异步发生。**在对 isPlaying() 的调用中更新状态可能需要一些时间，在**流式内容的情况下可能需要几秒钟。

后者表示，当*启动*暂停播放器时，状态更改可能需要时间（“反之亦然”）。到目前为止一切都很好，因为它仅适用于内部播放器引擎，但随后出现了疯狂的部分：*“在调用 isPlaying() 时更新状态可能需要一些时间”*。这意味着 isPlaying()**没有返回 OBSERVABLE 状态**，而是取决于内部状态。这令人困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T00:03:42.487

我用MediaPlayer做了一些应用程序，`if(isPlaying()) pause();`每次使用都没有不良影响。不过，这是当地媒体的情况。如果您正在流式传输，则延迟实际上可能会导致第二种问题。

试一试，看看你能不能打破它。如果你不能，那就没什么好担心的。如果可以的话，你总是可以解决它。当你打电话时设置一个布尔值`start()`，排队暂停，我敢肯定还有其他我没有想到的方法。

但是先试试看。它对我来说表现良好，而且我已经对我的垃圾进行了游戏测试。

# javascript - Html分区边框动画

> ID：11137909
> 
> 赞同：0
> 
> 时间：2012-06-21T12:14:43.113
> 
> 标签：javascript, jquery, html

我一直在学习 css & jquery。

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
#box
{
 border-style:solid;
 border-color:red;
 height: 80px;
 width: 180px;
}
</style>
</head>

<body>
<div id="box">Demo Box</div>
</body>
</html> 
```

我想要实现的是边框颜色应该从左上角出现并流动以在分区周围创建一个框边框。如果可以做到这一点，就想知道专家的指导似乎是不可能的。

*编辑 MobyD 感谢“就像一辆 tron 自行车”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:49:43.653

假设你想要一个围绕盒子的动画，它可以通过动画一系列线条来排列，每个动画触发下一个动画，因为它完成。

```
addLine1();
line1.animate({ width: width-of-box }, duration, function() {
   addLine2();
   line2.animate({ height: height-of-box }, duration, ... );
}); 
```

每条线都必须位于其适当的角落。

[演示](http://jsfiddle.net/LfULS/)

可能可以构建一个更简洁的递归解决方案，但是您必须遵循这些思路。边框属性本身不能以这种方式进行动画处理。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T12:26:44.753

假设您想要渐变边框或流是什么意思？

是的，它可以做到。

示例 2px 渐变边框：

只需创建一个 div 定位相对，它的颜色具有渐变背景然后创建一个绝对定位在其中的子 div，宽度和高度略小，你就准备好了。

见[http://jsfiddle.net/njL3H/](http://jsfiddle.net/njL3H/)

# java - 将不同类型的文档转换为 pdf 的全包工具

> ID：11137912
> 
> 赞同：6
> 
> 时间：2012-06-21T12:14:55.173
> 
> 标签：java, pdf, command-line, document, file-conversion

我一直在网上寻找可以与 Java 一起使用的工具。无论是 Java API 还是命令行界面，我都可以创建一个 Java 包装器，让我能够将多种类型的文档转换为 PDF。

这是我需要能够转换为 PDF 的文档列表：

*   图像（.tiff、.jpeg、.png、.bmp、.gif）
*   MS WORD (.doc, .docx)
*   文本文件（.txt、.rtf）

以下是我迄今为止在网络上发现的与 pdf 转换相关的一些注释

JODConverter - [http://www.artofsolving.com/opensource/jodconverter](http://www.artofsolving.com/opensource/jodconverter) 看起来可以将许多不同类型的格式转换为 PDF 不再积极开发免费

iText 将不起作用 - [http://itextpdf.com/itext.php/](http://itextpdf.com/itext.php/) “iText 可以将 XML 或 XHTML/CSS 文件转换为 PDF（使用 XML Worker）。将文档从一种格式转换为另一种格式超出了 iText 的范围. 不：iText 不会将 Word 文档转换为 PDF！”

GhostScript - [http://www.ghostscript.com/](http://www.ghostscript.com/) 将 postscript 转换为 pdf 需要先找到将文件格式转换为 ps 的软件，这可能不是最好的解决方案 免费

Qoppa 软件 - [http://www.qoppa.com/solutions/javapdf.html](http://www.qoppa.com/solutions/javapdf.html) jPDFImages - 从 jpg、tif 和 png 图像创建 pdf jWordConvert - 将 word 文档转换为 PDF（doc、docx） 成本

imagemagick - [http://www.imagemagick.org/script/index.php](http://www.imagemagick.org/script/index.php) 一次将一个图像转换为 pdf 需要与批处理脚本一起使用，以将所有 pdf 组合成一个除了图像之外什么都不做。自由

如果有关这些产品的任何信息不正确，我们将不胜感激。

是否有一种仍然受到积极支持的解决方案，可以在一个软件中完成所有这些转换？

我觉得这是人们遇到的常见问题，必须有比将多个第三方产品组合在一起更好的解决方案。它可以是开源的，也可以需要许可证和资金。

# shell - 我可以将 RVM 作为后台进程加载并使其作业控制消息静音吗？

> ID：11137914
> 
> 赞同：-1
> 
> 时间：2012-06-21T12:14:58.777
> 
> 标签：shell, rvm, zsh

我需要将 RVM*作为函数*加载到 shell 会话中 ，所以我在我的 zshrc 中执行这个脚本。

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" 
```

但是，每当我启动一个新终端时，这个脚本会让我慢约 1 秒。所以我想出了一个解决方案，将这个脚本放到后台工作中，如下所示：

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" & 
```

然后，当我启动一个新终端时，我得到了一个快速启动时间。但我会看到这条消息：

```
[1]  + done       source "$HOME/.rvm/scripts/rvm" 
```

1.  有没有更好的方法让这个脚本不会减慢我的终端启动时间？
2.  当这个后台工作完成时，如何抑制这个“完成”消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:06:59.473

这不适用于 rvm 之类的东西。rvm 依赖于能够操纵当前 shell 的环境（定义自己的 shell 函数等）。当您将作业置于后台时，它会在对当前 shell 没有影响的子进程中运行。例子：

```
[0 mbunkus@chai-latte ~] print $some_var

[0 mbunkus@chai-latte ~] cat the-file
some_var=some_value
[0 mbunkus@chai-latte ~] source the-file &
[1] 17090
[0 mbunkus@chai-latte ~]
[1]  + done       source the-file
[0 mbunkus@chai-latte ~] print $some_var

[0 mbunkus@chai-latte ~] source the-file
[0 mbunkus@chai-latte ~] print $some_var
some_value 
```

如果 rvm 对您来说太慢了，那么您还可以查看[rbenv](https://github.com/sstephenson/rbenv)，它的功能与 rvm 类似，但外壳魔法要少得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T14:09:27.207

### 分析

您不能按照您的要求做，因为 RVM 必须在当前 shell 中获取。您的问题实际上也不太可能是 RVM。你真的计时了吗？

我反复分析它，我*最慢*的时间不到 2/10 秒：

```
$ time "$HOME/.rvm/scripts/rvm"

real        0m0.165s
user        0m0.068s
sys         0m0.036s 
```

*确实，RVM 使用cd*命令有一些处理开销（根据[此博客条目](http://niczsoft.com/2011/11/what-you-should-know-about-rbenv-and-rvm/)，约为 60 毫秒），但它是微不足道的。其他方法（例如 rbenv）只是将开销转移到其他地方。

### 解决方案

在您自己的系统上计时 RVM。然后是时间`source ~/.bashrc`或您正在调用的任何启动文件。很有可能，是你的 shell 初始化中的其他东西让你陷入了困境。

例如，在我的系统上，一个交互式 shell 大约需要 8/10 秒的时间来加载：

```
$ time bash -ic 'exit' > /dev/null 2>&1

real        0m0.853s
user        0m0.320s
sys         0m0.148s 
```

只有 19% 的时间花在加载 RVM 上——即便如此，整个加载时间也不到一秒。这对我来说似乎很合理。

# html - 如何在 HTML5 中实现 SMIL

> ID：11137920
> 
> 赞同：0
> 
> 时间：2012-06-21T12:15:19.270
> 
> 标签：html, smil

如何将 SMIL 文件附加到 HTML 文件中并在浏览器上运行？这是我的 SMIL 文件

谢谢

尼基尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:20:02.630

唯一支持用于音频/视频绑定（而不是 SVG 动画）的 SMIL 时间表的浏览器是[X-Smiles](http://sourceforge.net/projects/x-smiles/)。使用[Timesheets Engine](http://www.tml.tkk.fi/~pv/timesheets/)或[timesheets.js](http://wam.inrialpes.fr/timesheets/markup/extTimesheet.html)在其他浏览器中模拟它。[Azardi Online](http://azardi.infogridpacific.com/online/)有一个实现供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T16:34:55.093

网络搜索？有几种尝试在 javaScript 中实现 SMIL

试试这个例如：

[http://docenti.math.unipd.it/gaggi/smilingweb/](http://docenti.math.unipd.it/gaggi/smilingweb/)

# android - 如何在android中下载图像并存储在sdcard中？

> ID：11137922
> 
> 赞同：0
> 
> 时间：2012-06-21T12:15:24.190
> 
> 标签：android, android-image

我准备了从服务器下载图像并存储在 sdcard 中的代码。为此我准备了代码，

```
 URL url;
 try {
     url = new URL("http://myserver_path/applikaza/appstore/apks/ScrResoluton/scrresolution.jpg");
     input = url.openStream();
     String storagePath = Environment.getExternalStorageDirectory().toString();
     String basepath = storagePath + "/Guayama/" + folderName;
     output = new FileOutputStream(basepath + "/home.png");
     byte[] buffer = new byte[5000];

     int bytesRead = 0;
     while ((bytesRead = input.read(buffer, 0, buffer.length)) >= 0) {
         output.write(buffer, 0, bytesRead);
     }

 } catch (MalformedURLException e) { // TODO Auto-generated catch block
     e.printStackTrace();
 } finally {
     output.close();
     input.close();
 } 
```

但是在 . 我认为在某些地方犯了 NullPointerException `output.close()`错误。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:58:43.820

您在 output.close() 获得 NullPointerException 的原因是您的 URL 格式不正确。对于初学者，它不包含有效的协议。这将导致 MalformedURLException 在线抛出

```
url = new URL("E:/Suresh/images/home.png"); 
```

然后您将直接进入 catch 块，然后是调用 output.close() 的 finally 块，但输出为空，因为该行

```
output = new FileOutputStream(basepath + "/home.png"); 
```

从未被处决。

您需要更正您的 URL（请参阅[此处](http://developer.android.com/reference/java/net/URL.html#URL%28java.lang.String%29)的描述）并且您需要更正您的异常处理，如 MalformedURLException 的情况，这只会在您设置 url 的值的地方被抛出，因此您永远不会有一个非- 执行“finally”块时输出或输入的空值。

您的 URL 应该是“http://something/Suresh/images/home.png”或“file://something/Suresh/images/home.png”的形式。如果 home.png 文件位于 Android 设备的另一台机器上，请尝试通过 Web 浏览器访问它，并使用 Web 浏览器显示的 URL 并加上“http://”。

# gwt - 如何将文本包装在 GWT CellTable 单元格中？

> ID：11137923
> 
> 赞同：0
> 
> 时间：2012-06-21T12:15:25.307
> 
> 标签：gwt, gwt2, gwt-2.2-celltable, celltable, gwt-celltable

我需要包装列的文本。我的专栏很小。所以如果我设置列宽，一些字母是不可见的。由于文本的长度大于列大小。如果文本中有空格，则它会自动换行。所以我需要包装文本。

例如，emailColumn 的值为 xxxxxxxxxxxxx@XXXXXXX.com。

我希望结果`xxxxxxxxxxx@x`与第一行和`xxxx.xom`下一行一样。

可能吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-11-27T10:55:21.200

我尝试将文本包装在单元格表中，我们可以通过创建自定义列来实现。

为单元格表创建一个抽象单元格列，在该单元格中附加 html contant 并将列添加到单元格表中，如下所示。

1.  将此代码添加到您的主 java 文件中，该文件包含单元格表并将下面的代码粘贴到必要的位置。

    ```
     WrappedColumn<T> textDetail = new WrappedColumn<T>() {
            // This is method in wrapped details column java file.

            public WrapDetails getValue(T object) {
                return new WrapDetails( T.<your method1 for wrap text>(), T.<your method2 for wrap text>());
            }
        };    
        <your cell table>.addColumn(textDetail); 
    ```

2.  创建名为“WrapDetails.java”的新 java 文件以呈现动态数据并粘贴以下代码。

    ```
    public class WrapDetails extends Composite {    
        String mail_id;
        String website;

        public WrapDetails(String id, String site) {
            this.mail_id = id;
            this.website = site;
        }   
    } 
    ```

3.  为名为“WrappedColumn.java”的换行文本列创建新的 java 文件并粘贴以下代码。

    ```
    public abstract class WrappedColumn<T> extends Column<T, WrapDetails> {

        public WrappedColumn() {
            super(new WrapDetailsColumnCell());
        }

        /**      
         * Return the passed-in object. 
         * @param object The value to get
         */    
       @Override    
       public WrapDetails getValue(T object) {   
           return null;         
       }    
    } 
    ```

4.  创建名为“WrapDetailsColumnCell.java”的新 java 文件并粘贴以下代码。

    ```
    public class WrapDetailsColumnCell extends AbstractCell<WrapDetails> implements Cell<WrapDetails>{      
        String mail_id, website;

        /**
         * Add this constructor, if you want click event for this column.
         */
        public WrapDetailsColumnCell() {
            super("click", "keydown");      
        }

        /**
         * This method provides style for your wrap data
         * 
         */
        @Override
        public void render(Context context, WrapDetails value, SafeHtmlBuilder sb) {

            sb.appendHtmlConstant("<div><table width='100%'>");
            sb.appendHtmlConstant("<tr><td><div style='your style here'>"+mail_id+"</div></td></tr>");
            sb.appendHtmlConstant("<tr><td><div style='your style here'>"+website+"</div></td></tr>");
            sb.appendHtmlConstant("</table></div>");
        }

        /**
         * This method update cell value on click event.
         * 
         */
        @Override
        public void onBrowserEvent(Context context, Element parent,WrapDetails value, NativeEvent event,  ValueUpdater<FaxDetails> valueUpdater) {
            super.onBrowserEvent(context, parent, value, event, valueUpdater);
            setValue(context, parent, value); 
            valueUpdater.update(value);
        }
    } 
    ```

它对我很有效。试过这个之后，如果你有任何问题，请告诉我。玩得开心。

# python - 在从数据库中获取它们之后，在表单中设置选择项

> ID：11137926
> 
> 赞同：1
> 
> 时间：2012-06-21T12:15:33.237
> 
> 标签：python, django, google-app-engine, widget

首先请原谅我在 django、python 和 html 中的跛足。

我将小部件添加到 html，并且我想从数据库中填充项目。我尝试了以下但它不起作用，它只显示明显的（'ALL'项目）：

HTML：

```
<select name=\"accountName\" >
    <option value=\"ALL\">ALL</option>
    {% for item in select_items %}
    <option value=\"'+item.accountName+'\">'+item.accountName+'</option>
    {% endfor %}
</select> 
```

Python：

```
class StartPage(webapp.RequestHandler):
    def get(self):
    select_items = db.GqlQuery( "SELECT * FROM Registration" )
    self.response.out.write(template.render("tst.html", {'select_items': select_items})) 
```

请注意，数据库确实包含东西，而不是空的。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:21:08.170

我不是 django 专家，但我认为您的模板有一些错误。

```
<option value=\"'+item.accountName+'\">'+item.accountName+'</option> 
```

应该

```
<option value="{{ item.accountName }}">{{ item.accountName  }}</option> 
```

欲了解更多信息： [https ://docs.djangoproject.com/en/dev/topics/templates/](https://docs.djangoproject.com/en/dev/topics/templates/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T12:21:17.137

您的 django 语法错误。它应该是这样的：

```
{% for item in select_items %}
<option value="{{item.accountName}}">{{item.accountName}}</option>
{% endfor %} 
```

而且您也不应该转义双引号，例如

```
<select name=\"accountName\" > 
```

应该只是

```
<select name="accountName" > 
```

此外，您的 python 代码存在缩进问题，但我认为这与您在此处粘贴的方式有关，而不是代码中的实际问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T12:21:01.203

我不认为您想转义 HTML。

```
<select name="accountName" >
    <option value="ALL">ALL</option>
    {% for item in select_items %}
    <option value="{{ item.accountName }}">{{ item.accountName }}</option>
    {% endfor %}
</select> 
```

其余的乍一看还不错，但我的 GAE 生锈了。

希望你能得到更好的答案。

# image - ProxyPass GET 参数通过使用 Nginx 的图像

> ID：11137928
> 
> 赞同：0
> 
> 时间：2012-06-21T12:15:36.507
> 
> 标签：image, nginx, proxypass

我有一个使用 Nginx 作为静态文件的图像，但我需要使用不同的 GET 参数调用它。是否可以将这些参数代理传递给不同的服务器但（这是诀窍）返回静态图像？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T05:14:55.083

如果我对您的理解正确，您想将请求参数传递给不同的服务器，但通过返回静态图像来屏蔽用户？

如果您可以使远程服务器返回 404，那么这应该可以工作：

```
root /path/to/webroot;

location @otherserver {
    include proxy_params;
    proxy_pass http://some.other.server;
}

location /image.jpg {
    try_files @otherserver /real_image.jpg;
} 
```

您可能会利用 error_page 指令来达到类似的效果。

# java - 通过 editCellAt(row,col) 在单元格上强制编辑时，JTable 单元格不会触发键事件

> ID：11137931
> 
> 赞同：0
> 
> 时间：2012-06-21T12:15:38.293
> 
> 标签：java, swing, jtable, focusmanager

下面是我的代码片段。我有一个 JTable。我扩展了 DefaultCellEditor 以创建自己的编辑器。我为单元格添加了键侦听器和鼠标侦听器。我也有一个 JButton。当我单击 JButton 时，我希望 JTable 中的第一个单元格进入编辑模式。为此，我使用了 requestFocus 和 editCellAt(0,0)。我已将此代码放入执行的操作中。

```
public void actionPerformed(ActionEvent e)
{
     System.out.println("action performed");

     if(e.getSource().equals(btn))
     {
    oTable.requestFocus();
    oTable.setRowSelectionInterval(0, 0);
    oTable.editCellAt(0, 0);
     }
} 
```

这会将光标放在第一个单元格中。但是当我输入任何内容时，不会触发关键事件！注意：如果我用鼠标单击单元格然后键入，它会触发键事件。但我不想做这个额外的点击。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T12:26:22.167

似乎对我有用。也许您可以尝试以下方法：

```
table.editCellAt(0, 0);
table.getEditorComponent().requestFocus(); 
```

# javascript - 当前浏览器中剪贴板的最大大小

> ID：11137940
> 
> 赞同：3
> 
> 时间：2012-06-21T12:16:09.560
> 
> 标签：javascript, browser

可以**从**剪贴板粘贴的文本大小是否存在与浏览器相关的限制？对于不同的浏览器（例如 IE、Chrome、Firefox），这些限制是否不同？在我们公司，存在一些关于限制的轶事知识，但对 google 进行一些研究并没有真正让我得到可靠的事实。

文本将由外部程序（例如 Microsoft Excel）复制到剪贴板。因此，我只对从剪贴板粘贴感兴趣，而不对复制到剪贴板感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T12:20:29.027

大多数数据是作为参考而不是数据本身复制的，因此您可以复制任何大小的任何内容。文本虽然实际上是复制的。

对于 32 位应用程序，最多可以分配 2 GB 大小的块或 PC 拥有的虚拟内存量，以较小者为准。

它不依赖于浏览器或 Windows 剪贴板。

# sql - 将行转换为列 Oracle

> ID：11137943
> 
> 赞同：0
> 
> 时间：2012-06-21T12:16:21.263
> 
> 标签：sql, oracle11g, pivot

这个问题已经被问了好几次，也被回答了很多次，但这是不同的，因为：

1.  这是在 Oracle 11g 中 - 我见过的其他示例是在带有 StUFF 函数的 SQL Server 中
2.  这需要加入 2 个表来获取信息

让我解释

这是包含字段名称和 File_ID 的表

```
CREATE TABLE RESPONSE_METADATA
(
  FILE_ID        NUMBER(10)                     NOT NULL,
  FIELD_NUMBER   NUMBER(4)                      NOT NULL,
  FIELD_NAME     VARCHAR2(50 BYTE)              NOT NULL,
  FIELD_TYPE     VARCHAR2(50 BYTE)              NOT NULL
); 
```

这是一个保存每个文件的记录的表，但记录是分开的。

```
CREATE TABLE RESPONSE_DETAILS
(
  FILE_ID        NUMBER(10),
  REC_FLD_1      VARCHAR2(300 BYTE),
  REC_FLD_2      VARCHAR2(300 BYTE),
  REC_FLD_3      VARCHAR2(300 BYTE),
  REC_FLD_4      VARCHAR2(300 BYTE),
  REC_FLD_5      VARCHAR2(300 BYTE),
  REC_FLD_6      VARCHAR2(300 BYTE),
  REC_FLD_7      VARCHAR2(300 BYTE),
  REC_FLD_8      VARCHAR2(300 BYTE),
  REC_FLD_9      VARCHAR2(300 BYTE),
  REC_FLD_10     VARCHAR2(300 BYTE),
  REC_FLD_11     VARCHAR2(300 BYTE),
  REC_FLD_12     VARCHAR2(300 BYTE),
  REC_FLD_13     VARCHAR2(300 BYTE),
  REC_FLD_14     VARCHAR2(300 BYTE),
  REC_FLD_15     VARCHAR2(300 BYTE),
  REC_FLD_16     VARCHAR2(300 BYTE),
  REC_FLD_17     VARCHAR2(300 BYTE),
  REC_FLD_18     VARCHAR2(300 BYTE),
  REC_FLD_19     VARCHAR2(300 BYTE),
  REC_FLD_20     VARCHAR2(300 BYTE)
); 
```

插入数据

```
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (1,1,'REC_ID','NUMBER');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (1,2,'EMAIL','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (1,3,'CAMP','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (1,4,'ACTION','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (1,5,'DESC','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (1,6,'TIME','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (1,7,'CHANNEL','NUMBER');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (1,8,'STATUS','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (1,9,'DI_CODE','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (1,10,'CUSTOM','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (2,1,'REC_ID','NUMBER');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (2,2,'EMAIL','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (2,3,'CAMP','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (2,4,'ACTION','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (2,5,'DESC','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (3,1,'REC_ID','NUMBER');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (3,2,'EMAIL','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (3,3,'CAMP','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (4,1,'REC_ID','NUMBER');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (4,2,'ORGN','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (4,3,'LOGOS','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (4,4,'ACTN','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (4,5,'BLANK1','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (4,6,'ALERT_ID','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (4,7,'DEVNUM','NUMBER');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (4,8,'RES_CODE','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (4,9,'STRAT_ID','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (4,10,'COMP_FLAG','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (4,11,'AUDLOG','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (4,12,'STARTTIME','VARCHAR2');
INSERT INTO RESPONSE_METADATA (FILE_ID, FIELD_NUMBER, FIELD_NAME, FIELD_TYPE) VALUES (4,13,'DURATION','VARCHAR2');

INSERT INTO RESPONSE_DETAILS (FILE_ID, REC_FLD_1, REC_FLD_2, REC_FLD_3, REC_FLD_4, REC_FLD_5, REC_FLD_6, REC_FLD_7, REC_FLD_8, REC_FLD_9, REC_FLD_10, REC_FLD_11, REC_FLD_12, REC_FLD_13, REC_FLD_14, REC_FLD_15, REC_FLD_16, REC_FLD_17, REC_FLD_18, REC_FLD_19, REC_FLD_20)VALUES (8,'67537','Line','','81433','1','15062012','DELIVERED','67537','','','','','','','','','','','','');
INSERT INTO RESPONSE_DETAILS (FILE_ID, REC_FLD_1, REC_FLD_2, REC_FLD_3, REC_FLD_4, REC_FLD_5, REC_FLD_6, REC_FLD_7, REC_FLD_8, REC_FLD_9, REC_FLD_10, REC_FLD_11, REC_FLD_12, REC_FLD_13, REC_FLD_14, REC_FLD_15, REC_FLD_16, REC_FLD_17, REC_FLD_18, REC_FLD_19, REC_FLD_20)VALUES (8,'67551','Line','','81430','1','15062012','DELIVERED','67551','','','','','','','','','','','','');
INSERT INTO RESPONSE_DETAILS (FILE_ID, REC_FLD_1, REC_FLD_2, REC_FLD_3, REC_FLD_4, REC_FLD_5, REC_FLD_6, REC_FLD_7, REC_FLD_8, REC_FLD_9, REC_FLD_10, REC_FLD_11, REC_FLD_12, REC_FLD_13, REC_FLD_14, REC_FLD_15, REC_FLD_16, REC_FLD_17, REC_FLD_18, REC_FLD_19, REC_FLD_20)VALUES (8,'67579','Line','','81403','1','15062012','DELIVERED','67579','','','','','','','','','','','','');
INSERT INTO RESPONSE_DETAILS (FILE_ID, REC_FLD_1, REC_FLD_2, REC_FLD_3, REC_FLD_4, REC_FLD_5, REC_FLD_6, REC_FLD_7, REC_FLD_8, REC_FLD_9, REC_FLD_10, REC_FLD_11, REC_FLD_12, REC_FLD_13, REC_FLD_14, REC_FLD_15, REC_FLD_16, REC_FLD_17, REC_FLD_18, REC_FLD_19, REC_FLD_20)VALUES (8,'67593','Line','','81452','1','15062012','DELIVERED','67593','','','','','','','','','','','','');
INSERT INTO RESPONSE_DETAILS (FILE_ID, REC_FLD_1, REC_FLD_2, REC_FLD_3, REC_FLD_4, REC_FLD_5, REC_FLD_6, REC_FLD_7, REC_FLD_8, REC_FLD_9, REC_FLD_10, REC_FLD_11, REC_FLD_12, REC_FLD_13, REC_FLD_14, REC_FLD_15, REC_FLD_16, REC_FLD_17, REC_FLD_18, REC_FLD_19, REC_FLD_20)VALUES (8,'67607','Line','','81453','1','15062012','DELIVERED','67607','','','','','','','','','','','','');
INSERT INTO RESPONSE_DETAILS (FILE_ID, REC_FLD_1, REC_FLD_2, REC_FLD_3, REC_FLD_4, REC_FLD_5, REC_FLD_6, REC_FLD_7, REC_FLD_8, REC_FLD_9, REC_FLD_10, REC_FLD_11, REC_FLD_12, REC_FLD_13, REC_FLD_14, REC_FLD_15, REC_FLD_16, REC_FLD_17, REC_FLD_18, REC_FLD_19, REC_FLD_20)VALUES (4,'28072','16','1','189325','','ins/code.com/20120621','6551','WID ','VOLN ','N',';B10100','41061.6740856481','14','','','','','','','');
INSERT INTO RESPONSE_DETAILS (FILE_ID, REC_FLD_1, REC_FLD_2, REC_FLD_3, REC_FLD_4, REC_FLD_5, REC_FLD_6, REC_FLD_7, REC_FLD_8, REC_FLD_9, REC_FLD_10, REC_FLD_11, REC_FLD_12, REC_FLD_13, REC_FLD_14, REC_FLD_15, REC_FLD_16, REC_FLD_17, REC_FLD_18, REC_FLD_19, REC_FLD_20)VALUES (4,'28072','16','1','189325002','','ins/code.com/20120622','6551','CON ','VOLN ','N',';B10100','41061.6978240741','124','','','','','','','');
INSERT INTO RESPONSE_DETAILS (FILE_ID, REC_FLD_1, REC_FLD_2, REC_FLD_3, REC_FLD_4, REC_FLD_5, REC_FLD_6, REC_FLD_7, REC_FLD_8, REC_FLD_9, REC_FLD_10, REC_FLD_11, REC_FLD_12, REC_FLD_13, REC_FLD_14, REC_FLD_15, REC_FLD_16, REC_FLD_17, REC_FLD_18, REC_FLD_19, REC_FLD_20)VALUES (4,'28075','15','30','443433001','','ins/code.com/20120623','5908','AMP ','VOLN ','N',';B10100','41061.6737268519','13','','','','','','','');
INSERT INTO RESPONSE_DETAILS (FILE_ID, REC_FLD_1, REC_FLD_2, REC_FLD_3, REC_FLD_4, REC_FLD_5, REC_FLD_6, REC_FLD_7, REC_FLD_8, REC_FLD_9, REC_FLD_10, REC_FLD_11, REC_FLD_12, REC_FLD_13, REC_FLD_14, REC_FLD_15, REC_FLD_16, REC_FLD_17, REC_FLD_18, REC_FLD_19, REC_FLD_20)VALUES (4,'28075','15','30','4443433','','ins/code.com/20120624','5908','CON ','VOLN ','N',';B10100','41061.6953240741','113','','','','','','','');
INSERT INTO RESPONSE_DETAILS (FILE_ID, REC_FLD_1, REC_FLD_2, REC_FLD_3, REC_FLD_4, REC_FLD_5, REC_FLD_6, REC_FLD_7, REC_FLD_8, REC_FLD_9, REC_FLD_10, REC_FLD_11, REC_FLD_12, REC_FLD_13, REC_FLD_14, REC_FLD_15, REC_FLD_16, REC_FLD_17, REC_FLD_18, REC_FLD_19, REC_FLD_20)VALUES (4,'28078','11','1','2576141','','ins/code.com/20120625','6681','CON ','VOLN ','N',';B10100','41061.6764236111','81','','','','','','',''); 
```

现在问题是

我希望以这种方式查看数据

```
FILE_ID REC_ID  EMAIL   CAMP    ACTION  DESC    TIME    CHANNEL STATUS  DI_CODE CUSTOM
1   67537   Line        81433   1   15062012    DELIVERED   67537       
1   67551   Line        81430   1   15062012    DELIVERED   67551       
1   67579   Line        81403   1   15062012    DELIVERED   67579       
1   67593   Line        81452   1   15062012    DELIVERED   67593       
1   67607   Line        81453   1   15062012    DELIVERED   67607       

FILE_ID REC_ID  ORGN    LOGOS   ACTN    BLANK1  ALERT_ID            DEVNUM  RES_CODE    STRAT_ID    COMP_FLAG   AUDLOG  STARTTIME   DURATION
4   28072   16  1   189325          ins/code.com/20120621   6551    WID         VOLN    N       ;B10100 1/06/2012 16:10 14
4   28072   16  1   1893250         ins/code.com/20120622   6551    CON         VOLN    N       ;B10100 1/06/2012 16:44 124
4   28075   15  30  4434330         ins/code.com/20120623   5908    AMP         VOLN    N       ;B10100 1/06/2012 16:10 13
4   28075   15  30  4443433         ins/code.com/20120624   5908    CON         VOLN    N       ;B10100 1/06/2012 16:41 113
4   28078   11  1   2576141         ins/code.com/20120625   6681    CON         VOLN    N       ;B10100 1/06/2012 16:14 81 
```

它需要工作的方式是 METADATA 表中的每个 File_ID 都有 FIELD_NUMBER。这些 Filed_Numbers 是 Details 表中的列

我在 Oracle 中尝试了 XML PIVOT，但由于这些列将创建多个节点，所以它不起作用。

我已经尝试过只做一些事情 - 不起作用。这需要动态 - File_ID 可以包含不超过 30 个的任意数量的字段。

这需要是一个存储的过程或查询 - 因为我没有构建 ETL 的权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:03:43.953

试试这个来生成一个脚本：

```
select 'select '||FILE_ID||' FILE_ID,'||
  ltrim(sys_connect_by_path('REC_FLD_'||FIELD_NUMBER||' "'||FIELD_NAME||'"',','),',')||
  ' from RESPONSE_DETAILS where FILE_ID=' ||FILE_ID||';'
  from (select t.*,count(*) over (partition by FILE_ID) cnt from RESPONSE_METADATA t)
 where cnt=FIELD_NUMBER start with FIELD_NUMBER=1 
connect by prior FILE_ID=FILE_ID and prior FIELD_NUMBER=FIELD_NUMBER-1 
```

添加了双引号，因为某些列名是保留的“DESC”，例如

# python - Python使用web.py从POST请求中提取二进制文件

> ID：11137946
> 
> 赞同：0
> 
> 时间：2012-06-21T12:16:26.010
> 
> 标签：python, http, web.py, python-requests

我正在开发一个 API，它允许外部客户端发送将被处理的二进制文件。我的 web.data() 是一个字符串，我调用的函数需要一个二进制文件。如何将其转换为正确的格式？也许我的标题不正确？如何提取二进制数据。我正在使用 web.py。

-----------------POST 请求------------------------------- ---------------------

```
import json
import requests

files = {'file':('000038fe4b46c210c37bdde767835007', open('000038fe4b46c210c37bdde767835007', 'rb'))}
headers = {'content-type' : 'application/octet-stream',  'X-Auth-Token':'xxxf'}
r = requests.post('http://XXX:8080/v1/binaries', files = files, headers = header 
```

------------------------API函数------------- -----

```
 def POST(self):
                a = web.ctx.env.get("HTTP_X_AUTH_TOKEN", None)
                creds = authenticator(a)
                postdata = web.data().read()
                analysis = atklite.FileAnalysis(data=postdata)
                metadata = analysis.return_analysis() 
```

- - - - - - - - - - - - 追溯 - - - - - - - - - - - - - --------

```
 File "/usr/lib/pymodules/python2.7/web/application.py", line 242, in process
    return self.handle()
  File "/usr/lib/pymodules/python2.7/web/application.py", line 233, in handle
    return self._delegate(fn, self.fvars, args)
  File "/usr/lib/pymodules/python2.7/web/application.py", line 415, in _delegate
    return handle_class(cls)
  File "/usr/lib/pymodules/python2.7/web/application.py", line 390, in handle_class
    return tocall(*args)
  File "/home/XXXXXX/ProcessingCode/bfsapi.py", line 75, in POST
    postdata = web.data().read()
AttributeError: 'str' object has no attribute 'read' 
```

谢谢

对不起，如果格式在帖子中全部搞砸了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:52:28.480

即使它是二进制文件，读取原始帖子数据也会得到一个编码字符串。您需要解码才能转换为二进制数据。您可以按如下方式写入文件：

```
 written = open('binary.file', 'wb')
 for chunk in rawdata.chunks():
        written.write(chunk)
 written.close() 
```

# c# - 在给定的字符串中打印不可打印的字符？

> ID：11137947
> 
> 赞同：5
> 
> 时间：2012-06-21T12:16:38.880
> 
> 标签：c#, .net, visual-studio-2010, visual-studio

我有一个字符串，在 sql 中我测试过这个字符串包含不可打印的字符，但我找不到那些。

那么任何人都可以建议我如何通过传递此字符串在 C# 中查找和打印那些不可打印的字符？

> 我在八月份订购了 Taurus，但还没有预定，我只是想知道订单是否有问题？或者如果队列很长？订单号：8028Vehicle Rep:74JTag#: 200L049Description: 2011 TAURUS FWD SELOrdered: 08-AUG- 2010VIN Assigned:VIN#:Scheduled:In Production:Produced:Invoiced:Released:Shipped:Ready:Tax Location:STATE OF MICHIGAN (20 )被保险人状态：USOB 状态：050 - 清洁计划外订单

当我在记事本++中粘贴字符串时，它显示如下。

![在此处输入图像描述](../Images/f3a37d7e257a93e8de8615ab1af239dc.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T12:28:01.387

您可以使用`char.IsControl(c)`来测试字符是否是控制（不可打印）字符：

```
foreach (var c in str)
{
    if (char.IsControl(c))
    {
        Console.WriteLine("Found control character: {0}", (int)c);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:43:49.710

我在谷歌和 SO 的帮助下编写了一个程序。

该程序将打印 ascii 值和不可打印字符的位置。

```
class Program
    {
        static void Main(string[] args)
        {

            string text = @"I am an FMCC employee located in the Chicagoland area that currently has 2 available/active ManagementLease tags (non-incremental) and 1 currently utilized Sales Vehicle tag. I have a 2009 Sales vehicle now andhave ordered a replacement for that vehicle (2010 Taurus) per our current direction. I have not had a 2009  Model vehicle for either of my Management Lease tags in 2009\. I was married in August of this year andordered a 2010 Flex on one of my Management Lease tags in September.My issue is that my wife's current vehicle is no longer serviceable, and the 2010 Flex has yet to be scheduled tobe built.My exception request is that I be allowed to take delivery and assume payments for a 2010 Taurus that is at alocal dealership and displayed on the ""Vehicles Available Now"" page on an interim basis until my 2010 Flex isdelivered. I appreciate that typically an employee cannot have two vehicles from the same model year on agiven Management Lease tag, but I was hoping an exception could be made due to my recent marriage andthe fact that I did not have a 2009 model year vehicle on any tags.";
            for (int i = 0; i < text.Length; i++)
            {
                if (Char.ConvertToUtf32(text, i) < 32)
                {
                    Console.WriteLine( "position " + i + " " + text[i] + " => " + Char.ConvertToUtf32(text, i));
                }
            }
            Console.ReadLine();

        }
    } 
```

# java - File.lastModified 值会一直增加吗？

> ID：11137948
> 
> 赞同：4
> 
> 时间：2012-06-21T12:16:40.563
> 
> 标签：java, datetime, timezone, last-modified

我正在尝试监视在 Windows 或 Linux 上运行的 Java 更改的文件。

目前，我正在研究轮询文件的最后修改属性，而不是挂钩 OS 文件事件，以避免处理 API 差异的平滑和处理异步事件。

我正在存储`new File("path").lastModified()`处理文件并`lastModified`每秒比较新结果的结果`x`。

我可以相信这样一个事实，假设没有犯规并且有人手动修改时间戳，lastModified 总是会增加吗？Java 文档说它是与 GMT 纪元的偏移量，所以即使调整时区也可能不会倒退？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T12:33:07.890

嗯，有时，`lastModified`不会增加。这完全与时间分辨率有关，并且每个文件系统的分辨率都不同：

*   所有`FAT`s (FAT32, FAT16, FAT12) 都有`2 second`时间分辨率，
*   因为`NTFS`它是`100 ns`（是的，*纳秒*）
*   对于大多数**nixes*它的`1 second`.

因此，如果您的文件会快速`lastModified`更改，不会更改，并且您的*显示器*可能会丢失一些更改。

这也很棘手，因为如果您在不同的文件系统（如 FAT32 和 NTFS）上有相同的文件，它们的`lastModified`时间**会**因时间分辨率不同而不同。现在正因为如此，您可能会对没有发生的*虚假文件更改*`FAT32`做出反应 - 它只是返回与时间相差 1 秒的`NTFS`时间。Web 服务器也是如此——如果你不知道服务器文件系统，那么你就不知道 HTTP Header 中值的时间分辨率是多少。

解决方法是假设如果存储值和 FS 值之间的差异小于 3-4 秒，则文件没有更改。这就是`WebStart`在服务器上检查 JAR 文件的新版本时所做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:07:08.550

您可以将文件的时间戳更改为任何内容

[http://unixhelp.ed.ac.uk/CGI/man-cgi?touch](http://unixhelp.ed.ac.uk/CGI/man-cgi?touch)

如果使用 NTP 之类的方法更正时间，它可以倒退。

这些情况很少见，您可能不需要担心。

# c++ - 将 boost 线程作为守护进程运行

> ID：11137959
> 
> 赞同：0
> 
> 时间：2012-06-21T12:17:25.723
> 
> 标签：c++, daemon, boost-thread

是否可以创建 boost::thread 并在后台运行它（作为守护进程）？我正在尝试以下操作，但是当 main 退出时我的线程死了。

```
/*
 * Create a simple function which writes to the console as a background thread.
 */
void countDown(int counter) {
    do {
        cout << "[" << counter << "]" << endl;
        boost::this_thread::sleep(seconds(1));
    }while(counter-- > 0);
}

int main() {
    boost::thread t(&countDown, 10);

    if(t.joinable()) {
        cout << "Detaching thread" << endl;
        t.detach(); //detach it so it runs even after main exits.
    }

    cout << "Main thread sleeping for a while" << endl;
    boost::this_thread::sleep(seconds(2));
    cout << "Exiting main" << endl;
    return 0;
} 
```

[rajat@localhost 线程]$ ./a.out

拆线

主线程休眠一段时间

[10]

[9]

退出主

[rajat@localhost 线程]$

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:24:49.633

当您`main()`退出时，该进程的所有其他线程都将终止（假设 Linux，对于 Windows 不能说）。

为什么不只是`join()`末尾的那个后台线程`main()`？或者甚至更好——使用主线程作为“守护进程”线程？

# mysql - 使用 Eclipse 从 Google Cloud Sql 生成数据库的 DDL 语句会导致脚本出现问题？

> ID：11137960
> 
> 赞同：25
> 
> 时间：2012-06-21T12:17:27.707
> 
> 标签：mysql, eclipse, google-cloud-sql

我使用数据源浏览器从 Eclipse 连接到 Google Cloud SQL 数据库。但是，当我使用它的选项生成该数据库的 DDL 时`Generate DDL`，我无法`AUTO_INCREMENT`在我的脚本中获取，而是获取相应的主键。

我将如何去获取`AUTO_INCREMENT`我的脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:55:10.213

虽然这不是直接回答问题，但我相信它将为根本目标提供解决方案：提取 DDL。

假设：下面是一个shell脚本，所以需要合适的环境（OS X、Linux、cygwin）

脚步：

1.  安装命令行脚本（[按照此处的说明进行操作](https://developers.google.com/cloud-sql/docs/commandline)）
2.  在与 google_sql.sh 相同的目录中创建以下自定义脚本：

    ```
    GOOGLE_CLOUD_SQL_INSTANCE=test:test

    echo "SELECT CONCAT('SELECT CONCAT(\"SHOW CREATE TABLE ',schema_name,'.\",table_name,\";\") \"select \\\\\"use ',schema_name,';\\\\\";\" FROM information_schema.tables WHERE table_schema = \"',schema_name,'\";') 'use information_schema;' FROM SCHEMATA WHERE schema_name NOT IN ('information_schema','mysql','performance_schema');" >> $$.1.get_schema.sql

    ./google_sql.sh $GOOGLE_CLOUD_SQL_INSTANCE information_schema < $$.1.get_schema.sql > $$.2.show_create.sql

    ./google_sql.sh $GOOGLE_CLOUD_SQL_INSTANCE information_schema < $$.2.show_create.sql > $$.3.sql.out

    ./google_sql.sh $GOOGLE_CLOUD_SQL_INSTANCE information_schema < $$.3.sql.out > $$.4.create.raw

    awk -F"  " '/Table Create Table/{print "";}
     /CREATE/{sub(/^..*CREATE TABLE/,"CREATE TABLE");print $0}
     $1 == "" {print $0}
     /^\)/{print $0";"}
     /^use/{print $0}' $$.4.create.raw > $GOOGLE_CLOUD_SQL_INSTANCE.ddl.sql

    rm $$.* 
    ```

3.  将脚本中的“test:test”替换为您的 Google Cloud 实例标识符

4.  执行脚本以生成格式为“test:test”.ddl.sql 的文件，该文件将包含所有数据库中所有表的 DDL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T14:11:57.917

也许这有帮助：

[谷歌云 SQL 第 3 步](https://cloud.google.com/appengine/docs/java/cloud-sql/#Java_Create_your_database_and_table)

另一个使用 DDL 的例子是：

```
CREATE TABLE tabelle
(
feld datentyp [NOT NULL | NULL] [DEFAULT default_value] [AUTO_INCREMENT] [COMMENT 'string'],
CONSTRAINT name
  PRIMARY KEY (feld1, feld2, ...)
  FOREIGN KEY (feld1, feld2, ...) REFERENCES tabelle (feld1, feld2)
) 
```

资料来源：[http](http://www.tinohempel.de/info/info/datenbank/sql_tabelle.htm)
://www.tinohempel.de/info/info/datenbank/sql_tabelle.htm 是德文的，但例子非常好！

希望我正确理解了您的问题，这会有所帮助！

# android - 使用复选框将手机模式更改为振动

> ID：11137965
> 
> 赞同：3
> 
> 时间：2012-06-21T12:17:46.900
> 
> 标签：android

在我的应用程序中，我想使用可以使手机的振动模式禁用或无法使用的功能。我想通过复选框来做到这一点，即如果我单击复选框，它会将其模式更改为振动，反之亦然。有什么想法吗 ？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T12:22:32.280

尝试使用 AudioManager 作为：

```
 CheckBox  beijing=(CheckBox)findViewById(R.id.beijing);
// USE AudioManager  for Settingringing from vibration
                        AudioManager am = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
    beijing.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener(){ 
                @Override 
                public void onCheckedChanged(CompoundButton buttonView, 
                        boolean isChecked) { 
                    // TODO Auto-generated method stub 
                    if(isChecked){ 

                        switch (am.getRingerMode()) {   
                            case AudioManager.RINGER_MODE_NORMAL:   
                                Log.i("MyApp","NORMAL mode");
                                am.setRingerMode(AudioManager.RINGER_MODE_VIBRATE);
                                break;   
                        } 
                    }else{ 
                        switch (am.getRingerMode()) {   
                            case AudioManager.RINGER_MODE_VIBRATE:   
                                Log.i("MyApp","VIBRATE mode");
                                am.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
                                break;   
                        } 
                    } 
                } 
            }); 
```

# c# - DataGridView 按钮

> ID：11137966
> 
> 赞同：0
> 
> 时间：2012-06-21T12:17:47.107
> 
> 标签：c#, winforms, ms-access, ado.net, datagridview

我有一个 DataGridView 控件，其中包含以下列、项目、价格、数量和 2 个 DataGridViewButton 列，以便通过单击相应的按钮来增加和减少该特定行中项目的数量，然后更新新的数量在数据库中。我怎样才能做到这一点？将 ADO.Net 用于 DB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:29:15.347

使用datagridview的CurrentCell属性获取行，然后获取单元格值：

```
object val = dataGridView1.Rows[dataGridView1.CurrentCell.RowIndex].Cells["QTYColumn"].Value; 
```

# html - 由于身体高度，是否可以垂直居中元素（跨度、div 等）？

> ID：11137968
> 
> 赞同：1
> 
> 时间：2012-06-21T12:17:49.043
> 
> 标签：html, css

我希望这个问题很清楚。

我有 DOM 的主体（应该是任何高度，考虑到驻留在窗口的用户），我想（垂直）居中一个元素（可以包含其他子元素，但这并不意味着）。

是否可以？也许使用桌子？我想避开Js...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T12:34:40.180

你需要一个适当的标记。像这样的东西

```
<html>
<body style="position:fixed; top:0px; left:0px;bottom:0px; right:0px;  margin:0px;">
    <div style='display : table; width : 100%; height : 100%'>
    <div style='display : table-row;'>
        <div style="border:solid; display : table-cell; vertical-align : middle">
            Hello
        </div>
    </div>
    </div>
</body>
</html> 
```

**[现场示例](http://jsfiddle.net/wUK4q/3/)**（查看我对[这个](https://stackoverflow.com/a/10910802/653211)问题的回答）

还有另一种方式

```
<html>
    <body style='width : 100%; height : 100%'>
        <div style='position : absolute; width : 50px; height : 50px; margin : -25px 0px 0px 0px; top : 50%; border : 1px solid #000'>
        </div>
    </body>
</html> 
```

在这里，可以避免前面方法中看到的额外 div 元素。

**[现场示例](http://jsfiddle.net/LuXBp/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T12:55:53.930

这是我使用的一个棘手的方法。请注意， wrapper 给出高度，而 wrapper > div 给出宽度。

那不应该在IE上工作......

```
<html>
<head>
    <style>
    html, body {
         height: 100%; width: 100%; margin: 0; display: table;
         vertical-align: middle
    }
    #wrapper {
         display: table-cell;
         height: 100px;
         vertical-align: middle;
         width: 100%;
    }
    #wrapper > div {
          width: 50%; margin: auto;
          border: 1px solid red
    }
</style>
</head>
<body>

<div id="wrapper">
    <div class="content">
        content there...
    </div>
</div>
</body>
</html> 
```

# multithreading - OmniThreadLibrary：如何检测所有递归调度（=pooled）线程何时完成？

> ID：11137969
> 
> 赞同：2
> 
> 时间：2012-06-21T12:17:49.153
> 
> 标签：multithreading, delphi, recursion, threadpool, omnithreadlibrary

假设我必须在后台递归迭代存储在树结构中的项目，并且我想使用线程池中的多个线程（每个“文件夹”节点一个线程）遍历这棵树。我已经设法使用 OmniThreadLibrary 提供的几种不同的低级和高级方法来实现这一点。

但是，我还没有弄清楚如何正确地检测到扫描实际上已经完成，即每个最后的叶节点都已被处理。

我在网上找到了各种例子来检查是否`GlobalThreadPool.CountExecuting + GlobalThreadPool.CountQueued <= 0`使用了`IOmniTaskGroup.WaitForAll()`. 不幸的是，这些方法似乎都不适合我。检查总是返回`True`得太早，即当仍有一些任务在运行时。我看过的所有例子都没有使用递归——以及那些没有使用线程池的例子——这可能不是一个好的组合吗？

这是我目前正在尝试执行此操作的（非常）简化的示例代码片段：

```
procedure CreateScanFolderTask(const AFolder: IFolder);
begin
  CreateTask(ScanFolder)
    .SetParameter('Folder', AFolder)
    .Schedule();
end;

procedure ScanFolder(const ATask: IOmniTask);
var
  lFolder,
  lCurrentFolder: IFolder;
begin
  if ATaks.CancellationToken.IsSignalled then Exit;

  lCurrentFolder := ATask.Param['Folder'].AsInterface as IFolder;

  DoSomethingWithItemsInFolder(lCurrentFolder.Items);

  for lFolder in lCurrentFolder.Folders do
    begin
      if ATaks.CancellationToken.IsSignalled then Exit;
      CreateScanFolderTask(lFolder);
    end;
end;

begin
  GlobalOmniThreadPool.MaxExecuting := 8;
  CreateScanFolderTask(FRootFolder);

  // ??? wait for recursive scan to finish

  OutputResult();
end. 
```

我尝试过的等待的一个示例实现是这样的（基于[在 About.com 上找到的示例](http://delphi.about.com/od/kbthread/a/threaded-delphi-tasks-thread-pool-otl-omnithreadlibrary-example.htm)）：

```
 while GlobalOmniThreadPool.CountExecuting + GlobalOmniThreadPool.CountQueued > 0 do
    Application.ProcessMessages; 
```

但这似乎总是在“根线程”完成后立即退出。即使我使用`Sleep()`-calls 添加人为延迟，它仍然总是过早退出。似乎在从执行任务列表中删除的一项任务与在该任务中安排的要添加到排队任务列表中的任务之间存在“差距”......

实际上，与其等待扫描完成，我更喜欢使用事件处理程序（另外，我宁愿不使用`Application.ProcessMessages`，因为我在无表单应用程序中也需要它）并且我已经尝试过两者`IOmniTaskControl.OnTerminated`并且使用 a `TOmniEventMonitor`but 因为这些火为每一个完成的任务我仍然需要以某种方式检查当前的是否是最后一个，这再次归结为与上述相同的问题。

或者有没有更好的方法来创建可以避免这个问题的任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T15:08:14.973

一个简单的方法是自己计算“要处理的文件夹”。每次创建文件夹任务时增加一个值，每次处理文件夹时减少一个值。

```
var
  counter: TOmniCounter;

counter.Value := 0;

procedure ScanFolder(const ATask: IOmniTask);
var
  lFolder,
  lCurrentFolder: IFolder;
begin
  if ATaks.CancellationToken.IsSignalled then Exit;

  lCurrentFolder := ATask.Param['Folder'].AsInterface as IFolder;

  DoSomethingWithItemsInFolder(lCurrentFolder.Items);

  for lFolder in lCurrentFolder.Folders do
    begin
      if ATaks.CancellationToken.IsSignalled then Exit;
      counter.Increment;
      CreateScanFolderTask(lFolder);
    end;
  counter.Decrement;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T15:08:29.960

我通常做的是将所有发出的“folderScan”对象计数出来，然后重新计数。

每次需要一个新的 TfolderScan 时，创建 TfolderScan 都会为其调用一个工厂。工厂增加一个受 CS 保护的“taskCount”以及创建 TfolderScan。每次完成 TfolderScan 时，它都会调用工厂的“OnComplete”方法，以减少受 CS 保护的“taskCount”。如果在“OnComplete”中，计数减为 0，则可能没有 TfolderScan，并且整个搜索最完整。设法将计数减为 0 的线程可以做任何需要发出完成信号的信号 - PostMessage() 主窗体或调用“OnSearchComplete”事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T10:46:06.417

作为旁注：而不是检查`(GlobalOmniThreadPool.CountExecuting + GlobalOmniThreadPool.CountQueued > 0)`use `(not GlobalOmniThreadPool.IsIdle)`。这隐藏了实现细节并且更有效。

# java - pdf，doc，xls文件上传到mysql数据库

> ID：11137974
> 
> 赞同：-1
> 
> 时间：2012-06-21T12:18:11.533
> 
> 标签：java, mysql, jpa, spring-mvc

如何使用java和JPA和Spring将PDF，DOCX，XLS等所有文档文件上传到mysql数据库提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:56:36.457

我确实遇到过类似的情况，但是对您的要求进行了细微修改..，例如

*   DB - Oracle 11g（而不是 mySql）
*   IDE - jDeveloper 11（照顾 Java，Swings - MVC）

如果你对这个修改很酷，请看看我是如何开发这个的，

流程：UI（传递文件）--->（IDE处理）--->DB（数据保存）

创建数据库模式：（2 列）

*   信息 - Varchar 2（数据类型）
*   媒体 - Blob

现在已经用 DB 完成了，来到 IDE 并创建一个 .jspx 页面（没有支持 Bean！），从 Component Palette 拖放 InputFile 组件。创建一个托管 bean 并编写以下代码以将文件作为参数从 UI 接收并进一步处理。

代码：-

```
public class Upload()
{     
   private UploadedFile _file;

   public void setFile(UploadedFile _file) {
       this._file = _file;
   }

   public UploadedFile getFile() {
       return _file;
   }

   public String UploadMedia(){

       UploadedFile myFile = (UploadedFile)this.getFile();

       System.out.println("****************************************************");

       BindingContext bc = BindingContext.getCurrent();
       BindingContainer bindings = bc.getCurrentBindingsEntry();
       DCBindingContainer dbc = (DCBindingContainer)bindings;
       DCIteratorBinding iter = dbc.findIteratorBinding("MediadbVO1Iterator");

       Row row = iter.getCurrentRow();
       row.setAttribute("Media", createBlobDomain(myFile));
       return null;
   }

   private BlobDomain createBlobDomain(UploadedFile file) {
       InputStream in = null;
       BlobDomain blobDomain = null;
       OutputStream out = null;

       try {
           in = file.getInputStream();

           blobDomain = new BlobDomain();
           out = blobDomain.getBinaryOutputStream();
           byte[] buffer = new byte[8192];
           int bytesRead = 0;

           while ((bytesRead = in.read(buffer, 0, 8192)) != -1) {
               out.write(buffer, 0, bytesRead);
           }

           in.close();

       } catch (IOException e) {
           e.printStackTrace();
       } catch (SQLException e) {
           e.fillInStackTrace();
       }

       return blobDomain;

   }
} 
```

将 InputFile 组件的“值”字段设置为“ `#{backing_Upload.file}`”，其中 backing_Upload 是我的 bean 名称，文件为参数。

现在拖放一个命令按钮并将其操作字段设置为“ `#{backing_Upload.UploadMedia}`”，其中 backing_Upload 是我的 bean 名称，UploadMedia 是我的方法。

希望您在选择文件和单击按钮时实现您想要的文件存储到数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:26:50.040

您不能将文件存储在数据库中，但可以将它们的位置存储在表中。

# c# - RegEx通过visual studio search-replace实现asp.net页面中的资源

> ID：11137975
> 
> 赞同：1
> 
> 时间：2012-06-21T12:18:15.580
> 
> 标签：c#, asp.net, regex, visual-studio-2010

我目前正在浏览我们的 asp.net 页面以实现全球化。

然而，将全球化添加到 asp 文本的任务是无聊且容易出错的。这显然可以自动化！我想做的替换类型如下：

从：

```
<asp:Label ID="whatever" runat="server" Text="This is the text" /> 
```

到：

```
<asp:Label ID="whatever" runat="server"
    Text="<%$Resources:ResourceName, This is the text%>" /> 
```

`Text`以、或结尾`Message`的标签应被替换。例如：`Title``ToolTip`

```
<asp:Control ID="whatever" runat="server" HeaderText="Header"
    ErrorMessage="You did it wrong"> 
```

应该变成：

```
<asp:Control ID="whatever" runat="server"
    HeaderText="<%$Resources:ResourceName, Header%>"
    ErrorMessage="<%$Resources:ResourceName, You did it wrong%>"> 
```

一个例外是**不应全球化空文本**。

我想使用带有正则表达式的 Visual Studio 搜索替换功能。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:11:21.363

我自己设法做到了..

找什么：

```
{Text|Message|ToolTip|Title}="{[^<"]+}" 
```

用。。。来代替：

```
\1="<%$Resources:ResourceName, \2%>" 
```

# iphone - 如何将数据保存在 plist 的下一个索引上

> ID：11137976
> 
> 赞同：0
> 
> 时间：2012-06-21T12:18:17.280
> 
> 标签：iphone, xcode, plist

我是 iOS 编程的新手，我的手很脏。我在网上搜索了一些 plist 帮助，得到了一些东西并理解并使用了它，但现在我陷入了困境。我已经搜索了很多这个问题。但我只是无法为我找到正确的答案。

问题：我的 UI 只有 2 个文本字段和 1 个保存按钮。1 个文本字段采用字符串，而另一个采用数字 (int) 作为输入。

我的 plist 有 1 个字典项，有 1 个字符串项和 1 个 int 项。而已。

我从用户那里获取 2 个 UITextView 的输入，并通过保存按钮将它们保存到这个 plist 中。

问题是每当我输入新值并按下保存按钮时，它都会覆盖旧的 plist 数据。

我发现我需要阅读字典，将新值附加到它，然后将其保存回来以获得我想要的输出。但我无法抓住这个概念并将其放入代码中。一些带有解释的代码真的很有帮助。

我的保存按钮是这样工作的：

```
-(IBAction)saveit
{
    // get paths from root direcory
    NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);

    // get documents path
    NSString *documentsPath = [paths objectAtIndex:0];

    // get the path to our Data/plist file
    NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"data.plist"];

    // set the variables to the values in the UITextField text1 n text2 respectively

   self.personName = text1.text;
    num = (int)text2.text;    

    // create dictionary with values in UITextFields
    NSDictionary *plistDict = [NSDictionary dictionaryWithObjects: [NSArray arrayWithObjects: personName, num, nil] forKeys:[NSArray arrayWithObjects: @"name", @"phone", nil]];

    NSString *error = nil;

    // create NSData from dictionary
    NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:plistDict format:NSPropertyListXMLFormat_v1_0 errorDescription:&error];

    // check is plistData exists
    if(plistData)
    {
        // write plistData to our Data.plist file
        [plistData writeToFile:plistPath atomically:YES];
    }
    else
    {
        NSLog(@"Error in saveData: %@", error);
       // [error release];
    }

} 
```

这段代码工作得很好，只是因为它过度写入了新值。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:22:57.733

您的 plist 将返回一个字典。将该字典检索为 NSMutableDictionary 并将您的新密钥对值添加到该字典，然后保存它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:29:54.563

像这样将数据保存为字典数组

```
// get paths from root direcory
NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsPath = [paths objectAtIndex:0];
NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"data.plist"];

//Load the original file
NSMutableArray *arr;
if([[NSFileManager defaultManager] fileExistsAtPath:plistPath])   
     //File exist load
     arr = [[NSMutableArray alloc] initWithContentsOfFile:plistPath];
else
    //File does not exist create
    arr = [[NSMutableArray alloc] init];

//Create dictionary
NSDictionary *plistDict = [NSDictionary dictionaryWithObjects: [NSArray arrayWithObjects: personName, num, nil] forKeys:[NSArray arrayWithObjects: @"name", @"phone", nil]];

//Append to arr
[arr addObject:plistDict];

//Save to file
[arr writeToFile:plistPath atomically:YES]; 
```

# objective-c - 我应该在哪里调用 Objective-c iOS 应用程序中的计算函数？

> ID：11137978
> 
> 赞同：0
> 
> 时间：2012-06-21T12:18:24.980
> 
> 标签：objective-c, ios, xcode, encryption, aes

请原谅我对 Objective-C 的缺乏经验。我只玩了几个星期。

我正在尝试测试 Apple 加密和解密数据的方法（在本例中为 NSString）。最终目标是让用户在文本区域中输入内容，然后对其进行加密。

我在 Xcode 中使用一个基本的单视图应用程序并添加到这两个文件中（从[这里](http://www.iphonedevsdk.com/forum/iphone-sdk-development/60926-aes-encryption-objective-c-php.html)）：

NSDataEncryption.h

```
#import <Foundation/Foundation.h>

@interface NSData (AES256) 
- (NSData *)AES256EncryptWithKey:(NSString *)key;
- (NSData *)AES256DecryptWithKey:(NSString *)key;
@end 
```

和 NSDataEncryption.m

```
#import "NSDataEncryption.h"

#import <CommonCrypto/CommonCryptor.h>

@implementation NSData (AES256)

- (NSData *)AES256EncryptWithKey:(NSString *)key {
    // 'key' should be 32 bytes for AES256, will be null-padded otherwise
    char keyPtr[kCCKeySizeAES256+1]; // room for terminator (unused)
    bzero(keyPtr, sizeof(keyPtr)); // fill with zeroes (for padding)

    // fetch key data
    [key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

    NSUInteger dataLength = [self length];

    //See the doc: For block ciphers, the output size will always be less than or 
    //equal to the input size plus the size of one block.
    //That's why we need to add the size of one block here
    size_t bufferSize = dataLength + kCCBlockSizeAES128;
    void *buffer = malloc(bufferSize);

    size_t numBytesEncrypted = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                          keyPtr, kCCKeySizeAES256,
                                          NULL /* initialization vector (optional) */,
                                          [self bytes], dataLength, /* input */
                                          buffer, bufferSize, /* output */
                                          &numBytesEncrypted);
    if (cryptStatus == kCCSuccess) {
        //the returned NSData takes ownership of the buffer and will free it on deallocation
        return [NSData dataWithBytesNoCopy:buffer length:numBytesEncrypted];
    }

    free(buffer); //free the buffer;
    return nil;
}

- (NSData *)AES256DecryptWithKey:(NSString *)key {
    // 'key' should be 32 bytes for AES256, will be null-padded otherwise
    char keyPtr[kCCKeySizeAES256+1]; // room for terminator (unused)
    bzero(keyPtr, sizeof(keyPtr)); // fill with zeroes (for padding)

    // fetch key data
    [key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

    NSUInteger dataLength = [self length];

    //See the doc: For block ciphers, the output size will always be less than or 
    //equal to the input size plus the size of one block.
    //That's why we need to add the size of one block here
    size_t bufferSize = dataLength + kCCBlockSizeAES128;
    void *buffer = malloc(bufferSize);

    size_t numBytesDecrypted = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCDecrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                          keyPtr, kCCKeySizeAES256,
                                          NULL /* initialization vector (optional) */,
                                          [self bytes], dataLength, /* input */
                                          buffer, bufferSize, /* output */
                                          &numBytesDecrypted);

    if (cryptStatus == kCCSuccess) {
        //the returned NSData takes ownership of the buffer and will free it on deallocation
        return [NSData dataWithBytesNoCopy:buffer length:numBytesDecrypted];
    }

    free(buffer); //free the buffer;
    return nil;
}

@end 
```

基于[这个问题](https://stackoverflow.com/questions/2577366/how-do-i-call-a-method-from-other-class)，我正在调用这样的方法：

```
#include "NSDataEncryption.h"

//...

NSString * key = @"ThisIsAKey";
    NSDataEncryption *encryptionClass = [[NSDataEncryption alloc] init]; //Errors: "Use of undeclared identfier 'encryptionClass'" and "Use of undeclared identifer 'NSDataEncryption'"
    NSData * newData = [encryptionClass AES256EncryptionWithKey:key]; //Errors: "Use of undeclared identfier 'encryptionClass'" and "Use of undeclared identifer 'NSDataEncryption'" 
```

我试过把它放在 main() 和另一个类（ViewController）的新函数中：

```
- (IBAction)someFunctionName { code here } 
```

**大问题：**为什么 Xcode 不接受 NSDataEncryption 作为一个类，也不让我调用它的函数 AES256EnryptionWithKey？我应该在应用程序的其他地方执行加密吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:22:25.313

NSDataEncryption 不是一个类。它是标准 NSData 类的一个[类别](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)。这意味着它用两种方法“扩展”了 NSData 类：`- (NSData *)AES256EncryptWithKey:(NSString *)key;`和`- (NSData *)AES256DecryptWithKey:(NSString *)key;`. 它们都返回 NSData 并将一个 NSString 作为参数。

你这样称呼他们：

```
NSData *dataToBeEncrypted = [NSData data]; //Put your data here
NSString *key = @"ThisISAKEy";
NSData *newData = [dataToBeEncrypted AES256EncryptionWithKey:key]; 
```

您可以使用这些方法来加密/解密字符串：

```
- (NSData*) encryptString:(NSString*)plaintext withKey:(NSString*)key {
    return [[plaintext dataUsingEncoding:NSUTF8StringEncoding] AES256EncryptWithKey:key];

}

- (NSString*) decryptData:(NSData*)ciphertext withKey:(NSString*)key {
    return [[[NSString alloc] initWithData:[ciphertext AES256DecryptWithKey:key]
                                  encoding:NSUTF8StringEncoding] autorelease];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:34:26.663

```
NSData *data = [myString dataUsingEncoding:NSUTF8StringEncoding];
NSData *encrypted = [data AES256EncryptionWithKey:@"RandomString"]; 
```

# c#-4.0 - 使用 C# 调整图像大小

> ID：11137979
> 
> 赞同：8
> 
> 时间：2012-06-21T12:18:27.607
> 
> 标签：c#-4.0, png, jpeg, gif, tiff

刚从数码相机拍摄的图像通常超过 2-3 MB，因此很难通过电子邮件和其他方式传输。这需要调整图像的大小（根据文件大小而不是高度或宽度）。与提供图像大小调整功能的 MS Paint 非常相似。我没有受过良好的图像文件理论教育。如果有人能指出以下信息来源，我将不胜感激：

*   图像理论（各种图像格式如何工作 jpeg、png、tiff 等）。？

*   调整大小时图像如何失去清晰度？有没有一些

*   是否有任何免费的.Net（我使用的是 4.0）库可用于执行此操作？如果不能，我可以使用任何使用 com 互操作性的库吗？

非常感谢，

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-21T12:25:06.500

图像大小调整功能内置于 .NET 框架中。有几种不同的方法：

*   GDI+
*   WIC
*   WPF

这是一篇很好的[博客文章](http://weblogs.asp.net/bleroy/archive/2009/12/10/resizing-images-from-the-server-using-wpf-wic-instead-of-gdi.aspx)，涵盖了它们之间的差异。

以下是 GDI+ 的示例：

```
public void Resize(string imageFile, string outputFile, double scaleFactor)
{
    using (var srcImage = Image.FromFile(imageFile))
    {
        var newWidth = (int)(srcImage.Width * scaleFactor);
        var newHeight = (int)(srcImage.Height * scaleFactor);
        using (var newImage = new Bitmap(newWidth, newHeight))
        using (var graphics = Graphics.FromImage(newImage))
        {
            graphics.SmoothingMode = SmoothingMode.AntiAlias;
            graphics.InterpolationMode = InterpolationMode.HighQualityBicubic;
            graphics.PixelOffsetMode = PixelOffsetMode.HighQuality;
            graphics.DrawImage(srcImage, new Rectangle(0, 0, newWidth, newHeight));
            newImage.Save(outputFile);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-03-09T22:30:52.703

我使用了 Darin Dimitrov 提供的示例，Image 被膨胀到并占用了大量磁盘空间（从 1.5MB 到 17MB 左右）。

这是由于最后一行代码中的一个小错误。

下面的函数将图像保存为位图（巨大的图像尺寸）。

```
newImage.Save(outputFile) 
```

正确的功能应该是：

```
newImage.Save(outputFile, ImageFormat.Jpeg); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T12:25:21.443

图像调整器效果很好。 [http://imageresizing.net/](http://imageresizing.net/)

# mysql - Rails ActiveRecord Mysql2::Error: Unknown column 'objectname.'

> ID：11137983
> 
> 赞同：3
> 
> 时间：2012-06-21T12:18:42.883
> 
> 标签：mysql, ruby-on-rails, activerecord

我对在 Rails 下失败的现有 MySQL 表进行了更新。这是相关的控制器代码：

```
on = ObjectName.find_by_object_id(params[:id])
if (on) #edit existing
  if on.update_attributes(params[:param_type] => params[:value])
    respond_to do |format|
      ...
end 
```

ObjectName 模型类有 3 个值（object_id、other_id 和 prop1）。更新发生时，生成的 SQL 将作为

```
UPDATE `objectname` SET `other_id` = 245 WHERE `objectname`.`` IS NULL 
```

生成的`SET`SQL 部分是正确的。为什么将`WHERE`子句设置为`.`` IS NULL`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-09T16:52:01.903

在使用未定义主键的表时，我遇到了同样的错误。现场设置了唯一密钥，但没有 PK。在模型中设置 PK 为我修复了它：

```
self.primary_key = :object_id 
```

# java - 在一个根应用程序中显示不同的 Web 应用程序

> ID：11137986
> 
> 赞同：0
> 
> 时间：2012-06-21T12:18:52.620
> 
> 标签：java, jsp, iframe

假设，在 root.com 网站的标题中有 3 个链接，称为 A、B 和 C。如果我们单击这些链接，我们将被重定向到 A.com、B.com 和 C.com。我需要在 root 中显示它们。上面可以看到带有这些链接的 com。如果他们在同一个域中，我该如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:26:11.520

使用 iframe 加载 A.com、B.com 和 C.com

单击超链接时，使用一个 java 脚本函数来设置 iframe 的 src。

```
<iframe src="http://www.google.com"></iframe> 
```

# java - 在迭代 Java 对象的集合时——如何改变当前对象？

> ID：11137989
> 
> 赞同：6
> 
> 时间：2012-06-21T12:19:05.870
> 
> 标签：java, iterator

我将使用迭代器循环遍历 Java 中的对象集合。但是，我对使用 Iterator 有点困惑（习惯于为每个循环使用）。假设我有这样的代码：

```
Iterator<Organization> orgIter = orgs.iterator();
while (orgIter.hasNext()) {
    Organization orgObj = orgIter.next();
    orgObj.setChildOrgsTree(generateOrgChildTree(orgObj, new ArrayList<Organization>()));
} 
```

我创建一个新对象，然后更改对象内的字段。然后我的计划是设置我形成迭代器的原始对象等于我创建的这个对象的列表（上面没有显示列表，但我只是发现我需要它）。

但是，如果我不必创建一个新对象来完成所有这些工作，那就容易多了。有没有办法可以获取当前对象并对其进行变异？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T12:29:03.067

试试这个：

```
for(Organization org : orgs)
    org.setChildOrgsTree(generateOrgChildTree(org, new ArrayList<Organization>()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T12:23:22.837

如果您的迭代器迭代 a [`List`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)or[`Queue`](http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html)实例，则限制较少。只要你不改变列表的结构，你可以对返回的对象做任何你想做的事情[`Iterator.next()`](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html#next%28%29)。当然，该特定对象的类应该允许对其进行修改，但我认为您可以添加必要的代码...

另一方面，在不使 Iterator 对象无效的情况下，唯一允许的列表结构修改是使用 删除当前元素[`Iterator.remove()`](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html#remove%28%29)，顺便说一下，这是一个可选操作。如果您尝试直接修改列表，则迭代器将失效，并且您将[`ConcurrentModificationException`](http://docs.oracle.com/javase/7/docs/api/java/util/ConcurrentModificationException.html)在下次尝试使用它时得到一个。

此外，如果您在 a 上进行迭代[`Set`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)，您通常会受到更多限制：根据实际`Set`实现的细节，您通常无法修改对象中的任意字段。例如，`hashCode()`一旦将对象插入`HashSet`...

作为旁注，`for-each`Java 中的循环只是使用`Iterator`. 如果您不打算使用`Iterator.remove()`，只需使用`for-each`循环而不是显式迭代器并完成它。

# expression - 正则表达式 - 不以 AA 或 AD 或 ADL 开头

> ID：11137990
> 
> 赞同：0
> 
> 时间：2012-06-21T12:19:08.403
> 
> 标签：expression

我怎样才能找到每个字符串的正则表达式不以 AA 或 AD 或 ADL 开头。

<<[[^AA][^AD][^ADL][a-zA-Z0-9-_]*]>> 它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:20:51.500

您可以使用[负前瞻](http://www.regular-expressions.info/lookaround.html)：

```
^(?!AA|ADL?) 
```

# zend-framework - zend 框架部分未在 ajax 请求上呈现回显

> ID：11137991
> 
> 赞同：0
> 
> 时间：2012-06-21T12:19:09.683
> 
> 标签：zend-framework, jquery, echo, partial, renderpartial

我想在我的控制器操作中呈现一个部分作为对 ajax 请求的响应。我的目标是在 ajax 请求成功时回显[Twitter Bootstrap Alert 。](http://twitter.github.com/bootstrap/javascript.html#alerts)

这是我的操作（`redigeraLottningAction`）：

```
if($this->getRequest()->isXmlHttpRequest()){
    $this->_helper->viewRenderer->setNoRender();
    $this->_helper->layout->disableLayout();
    echo $this->view->partial('partial/alert-ajax.phtml', array('type' => 'success', 'msg' => 'Lyckat! Lottningen är nu sparad.'));
} 
```

而我的部分（`alert-ajax.phtml`）：

```
<div id="alert-msg" class="alert alert-<?= $this->type?> fade in">
    <a class="close" data-dismiss="alert" href="#">×</a>
    <p><?= $this->msg?></p>
</div> 
```

**问题是部分中的 php 脚本作为文本输出。这是浏览器中未呈现变量时的样子：**

```
<div id="alert-msg" class="alert alert-<?= $this->type?> fade in">
    <a class="close" data-dismiss="alert" href="#">×</a>
    <p><?= $this->msg?></p>
</div> 
```

和 jquery 部分：

```
$(document).ready(function(){

    $('#lottning-spara').click(function () {
        $.ajax({
            type: "POST",
            url: '/turnering/redigera-lottning',
            cache: false,
            data: {id: getParam("turnering"), klass_id: getParam("klass"), type: "spara", lottning: $('#lottning_str').val()},
            dataType: 'html',
            success: function(msg){
                $('#alert-div').html(msg);
            },
            error: function(){
                $('#alert-div').html('Error!');
            }
        });
    });
}); 
```

任何想法为什么不呈现部分的php？

**编辑是粗体的。**

**问题解决了。alert-ajax.phtml 文件是不同的字符集类型。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:41:22.387

如果你试试这个怎么办：

```
<div id="alert-msg" class="alert alert-<?php echo $this->type; ?> fade in">
<a class="close" data-dismiss="alert" href="#">×</a>
<p><?php echo $this->msg; ?></p>
</div>

if($this->getRequest()->isXmlHttpRequest()){
    $this->view->assign(array('type' => 'success', 'msg' => 'Lyckat! Lottningen är nu sparad.'));
    echo $this->view->render('partial/alert-ajax.phtml');
    exit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-16T11:19:26.240

问题解决了。该`alert-ajax.phtml`文件是不同的字符集类型。

# c# - 在绑定源中循环

> ID：11137992
> 
> 赞同：2
> 
> 时间：2012-06-21T12:19:09.623
> 
> 标签：c#, .net, winforms

我想知道是否有一种方法可以循环到相关的绑定源，而不是循环到 DataGrid 中显示的实际数据。之所以提出这个问题，是因为在 DataGrid 中只有要显示的数据，但在绑定源中也可以是隐藏数据，例如一个标志。

当我在绑定源处循环时，虽然我还需要知道我在数据网格中的哪个位置（在哪一行）。这可能吗？有更简单的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-02T15:55:40.637

知道你在哪一行

```
 int position = bindingsource.Position ; 
```

如果您的绑定源是 Person .. 类型并且您想要选择行

```
> var obj = bindingsource.List.OfType<Person>().ToList().Find(p=>p.name==" A name");

 var pos = bindingsource.IndexOf(obj); bindingsource.Position = pos; 
```

# nosql - 带有 OR 和 WHERE 的 Mongoid 查询

> ID：11137994
> 
> 赞同：0
> 
> 时间：2012-06-21T12:19:12.287
> 
> 标签：nosql, mongoid

我正在构建一个 rails3 网络应用程序。在 mongoid 中是否有这样的查询

```
 db.collection.where((:status => "abc" OR :status2=>"abc") , :license=>"Active") 
```

我不知道我的集合中存在哪些字段，status 和 status2 字段之间的一个字段可能存在于我的集合中，或者两者都存在。

更新我发现我可以将 any_of 用于 OR 但它不起作用。查询是runny find，但没有结果。

```
 db.collection.any_of(:status=>"abc",:status2=>"abc").where(:license=>"Active") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:00:14.700

没有足够的搜索就发布了这个问题。答案是

```
 db.collection.any_of({:status=>"abc"},{:status2=>"abc"}).where(:license=>"Active‌​") 
```

# sql-server - 为什么结合了 3 个独立查询的 TSQL 查询运行速度要慢得多？

> ID：11137995
> 
> 赞同：1
> 
> 时间：2012-06-21T12:19:14.133
> 
> 标签：sql-server, sql-server-2008, tsql, stored-procedures

我正在编写一个查询，并且我正在分析 SQL Profiler 跟踪以监控我的查询的性能和速度。

在执行此操作时，我注意到如果我在同一张表上运行 3 个不同的选择，这些选择比我在 WHERE 子句中使用 OR 将它们分组在一个选择中运行要快得多。

一个）

```
SELECT * FROM navigation_trees nt  INNER JOIN contents c ON c.navigation_tree_id = nt.id WHERE nt.id = @NodeID

SELECT * FROM navigation_trees nt INNER JOIN contents c ON c.navigation_tree_id = nt.id WHERE nt.id = @ParentID

SELECT * FROM navigation_trees nt INNER JOIN contents c ON c.navigation_tree_id = nt.id WHERE nt.id IN (SELECT id FROM @ChildrenIDS) 
```

二）

```
SELECT * FROM navigation_trees nt  INNER JOIN contents c ON c.navigation_tree_id = nt.id 
    WHERE 
        nt.id = @NodeID OR
        nt.id = @ParentID OR
        nt.id IN (SELECT id FROM @ChildrenIDS) 
```

这是两个查询的 Profiler 读数：

```
CPU | Reads | Writes | Duration(ms)

A) 15 | 1095 | 0 | 26

B) 531 | 456139 | 0 | 541 
```

你能解释一下吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:23:19.673

三选就是三选，一个三条件的选，加入的`OR`其实是选加上去重复的额外成本。

如果您确定永远不会有重复，请考虑使用`UNION ALL`而不是`OR`. 或者，当然，这是一个非常笼统的建议。仅出于性能考虑而调整查询时，请始终参考您的执行计划以查看特定建议是否适用于您的场景。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T12:40:53.080

我同意大卫的观点，但想放一个代码示例；那些 Or 很可能是杀手。我教新开发人员的一个基本规则是，如果你需要一个或者你需要一个联合；这通常与过滤早期过滤的其他基本规则相关。在每个连接上过滤的查询通常比在 where 子句中运行的过滤器更快，因为优化器可以看到更好的路由来减少数据。

您的查询可能像这样工作或需要其他联合全部。

```
Select
    *
From
(
    SELECT * 
    FROM 
        navigation_trees nt  
    WHERE 
        nt.id = @NodeID 

    union 
    SELECT 
        * 
    FROM 
        navigation_trees nt  
    WHERE 
        nt.id = @ParentID 

    union 
    SELECT 
        * 
    FROM 
        navigation_trees nt  
    WHERE
        nt.id IN (SELECT id FROM @ChildrenIDS)

) nt

INNER JOIN 
    contents c 
ON 
    c.navigation_tree_id = nt.id 
```