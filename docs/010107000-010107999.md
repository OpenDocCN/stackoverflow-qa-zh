# StackOverflow 问答 10107000-10107999

# delphi - 从套接字读取原始数据

> ID：10107004
> 
> 赞同：3
> 
> 时间：2012-04-11T13:34:10.043
> 
> 标签：delphi, sockets

我有一个通过 gprs 向我的服务器发送数据的设备。问题是它发送原始数据，我不知道在哪里可以停止读取

目前我正在使用 TIdHttpServer 之类的东西来读取字符串：

```
var
    s : string;
    repeat
       s:=s+acontext.Connection.Socket.ReadChar;
    until acontext.Connection.Socket.InputBufferIsEmpty; 
```

我的问题有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:24:11.683

TCP是面向流的。如果协议未知，服务器只能尝试读入字节数组（如果内存没有问题）或文件流。如果客户端正常断开连接，则数据“完整”。不幸的是，如果协议未知，服务器无法判断客户端是否正常死亡或断开连接。

InputBufferIsEmpty 没有帮助，因为它只说明（TCP）缓冲区中是否有数据 - 并且根据延迟，这可能会经常发生，但这并不意味着没有更多的飞行字节。

您可以尝试通过在客户端设备上发送已知字符串来对协议进行“逆向工程”。但是如果发件人是一个黑盒子，可能会有很多特殊情况——想想编码或“转义”字符等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:24:30.023

您可以制定自己的协议。

一些想法是：

1.  使用特殊字符或字符组合来定义消息的结尾。
2.  在消息的开头附加一些带有消息大小的固定大小字段

# ruby - 如何正确删除 rvm 包装器？

> ID：10107006
> 
> 赞同：4
> 
> 时间：2012-04-11T13:34:13.507
> 
> 标签：ruby, rvm

我已经使用 rvm 创建了一些包装器，但我不再使用它们，如何正确删除这些包装器？我使用以下方法创建了包装器：

```
rvmsudo rvm wrapper 1.9.3@mygemset mywrapper unicorn_rails 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T21:51:50.787

没有直接的方法可以通过 RVM 删除包装器，但它应该很简单：

```
rm -i $(which mywrapper_unicorn_rails) 
```

# matlab - 在堆栈中上一步获取 matlab 文件的名称

> ID：10107007
> 
> 赞同：0
> 
> 时间：2012-04-11T13:34:15.740
> 
> 标签：matlab, callstack

我正在编写一个 matlab 脚本，我想知道该脚本的名称，这是*一个步骤*。我需要这个的原因是我正在编写一个帮助脚本，以便在进行更重的计算之前断言有关工作区的一些基本事实，并且帮助脚本应该能够在调用计算脚本时给出错误消息。

我试过使用`mfilename`and `dbstack`，但除了帮助脚本的名称之外，我什么也没有得到。

为了进一步解释，我有以下脚本：

*   `verify_base_conditions`: 辅助脚本，在第一行中的一个调用
*   `heavy_stuff_calculation`和
*   `sweet_mother_of_algorithms`.
*   `general_entry_point`：我在单元格中收集常见工作流程的脚本

我尝试使入口点脚本尽可能小，并将较重的计算（或实际上需要多于几行的任何东西）重构为基于任务的、可重用的脚本。如果我从入口点脚本调用`sweet_mother_of_algorithms`并且该脚本运行的基本条件不满足，我希望看到一条错误消息，例如

```
Error: this_cool_var must be defined when running sweet_mother_of_algorithms
general_entry_point line 15 
```

我尝试使用

```
error(['this_cool_var must be defined when running ' mdfilename]) 
```

和其他类似的构造，但我不能让错误消息说除了`verify_base_conditions`.

如何找到在堆栈中上一级运行的脚本的名称？

（注意：我对查找在堆栈*底部运行的脚本**不*感兴趣- 几乎总是. 我只是对获取调用的脚本的名称感兴趣。）*`general_entry_point``verify_base_conditions`*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:53:20.740

`dbstack`应该为此工作。我认为这与您的设置类似：

```
a.m:
  b;

b.m:
  c;

c.m:
  stack = dbstack;
  for i=1:3
    disp(stack(i));
  end 
```

当我运行时`a;`，这会打印出整个堆栈，包括`b`（我认为这是您想要的 - 调用堆栈上的第二个顶部项目。

或者，尽管这可能给出完全相同的结果，但您可以抛出并捕获错误并查看其堆栈：

```
c.m:
  try
    error('What is on the call stack?');
  catch e
    for i=1:3
      disp(e.stack(i));
    end
  end 
```*

# javascript - 我可以在自动换行的 contenteditable div-tag 中获得“换行符”吗？

> ID：10107010
> 
> 赞同：1
> 
> 时间：2012-04-11T13:34:19.903
> 
> 标签：javascript, nicedit

我在用户可以输入和格式化一些文本的页面上使用 nicedit，它使用可内容编辑的 DIV 标记作为输入字段，然后将其提交给 php 脚本，该脚本将这种格式化文本转换为图像。此 contenteditable div 中的文本被自动换行，其中没有换行符。
有没有办法找出这种换行发生的位置，或者在发生时插入换行符，以便我可以将文本作为单独的行访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:05:04.187

您必须计算每个单词的像素坐标，这对于实现跨浏览器是可能的，但并非易事。一种方法是在每个单词之前插入一个零宽度的虚拟元素并使用它的位置。最近的 WebKit 和 Firefox 浏览器为您提供了[`getClientRects()`](https://developer.mozilla.org/en/Document_Object_Model_%28DOM%29/range.getClientRects)一种 DOM Range 对象的方法，这种方法更可取，因为它侵入性较小并且可能性能更好。IE 的专有`TextRange`对象具有在单词和属性之间移动的方法`boundingLeft`，[`boundingTop`](http://msdn.microsoft.com/en-us/library/ie/ms533540%28v=vs.85%29.aspx)这将为您提供 TextRange 的边界框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T17:09:10.757

尝试不同的方法，改变渲染图像的方式。也许您可以找到一个自动处理自动换行的图形库，或者复制页面上的 HTML 并使用[PhantomJS](http://phantomjs.org/)或类似工具拍摄快照。

# android - 有没有办法像在 Iphone 中一样启动 Google Map form Android 应用程序？

> ID：10107011
> 
> 赞同：0
> 
> 时间：2012-04-11T13:34:20.573
> 
> 标签：android, google-maps, google-maps-mobile

我想在我的**android 应用程序中使用****Google 的路线规划**等。我知道 iPhone 开发人员可以使用这样的 url 调用来启动它：

 **```
[someUIApplication openURL:[NSURL URLWithString:@"http://maps.google.com/maps?q=London"]] 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:37:18.597

是的，只需使用 url geo:latitude,longitude?z=zoom 触发 VIEW 意图

有关谷歌应用程序意图的完整列表，您可以查看[此](http://developer.android.com/guide/appendix/g-app-intents.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:38:46.927

Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse("http://maps.google.com/maps?q=London"));

开始活动（意图）；**

# c# - AD LDS ValidateCredentials 在启用密码策略后给出 false

> ID：10107013
> 
> 赞同：0
> 
> 时间：2012-04-11T13:34:30.217
> 
> 标签：c#, adlds, local-security-policy

我正在使用 AD LDS 对用户进行身份验证。我面临一个问题。

我有以下代码来验证用户：

```
PrincipalContext context = new PrincipalContext(ContextType.ApplicationDirectory,xxxx, xxxx, ContextOptions.SimpleBind);
auth = context.ValidateCredentials(userId, CryptoHelper.Decrypt(password), ContextOptions.SimpleBind); 
```

当本地安全策略中的密码策略被禁用时，身份验证返回 true，但是当我启用它时，它返回 false。

此外，auth 仅对启用密码策略后创建的用户返回 false。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T05:38:10.960

发现问题，当我们启用密码策略时，当我们创建用户时 msDS-UserAccountDisabled 设置为 TRUE。因此，在创建用户的过程中，如果我们将其设置为 false，它将起作用。

# ruby-on-rails - Spree Commerce：GEM 文件的位置

> ID：10107017
> 
> 赞同：0
> 
> 时间：2012-04-11T13:34:55.613
> 
> 标签：ruby-on-rails, gem, spree

我是 Rails 开发和使用 Spree Commerce bitnami Stack VM 实例的新手。我正在尝试安装 spree 扩展，并且说明说要对我在 webserver 目录中找不到的应用程序 Gem 文件进行配置更改

Running Rails 2.3.5 大礼包 0.9.4 版

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:54:18.747

您找不到它的原因是因为 Gemfile 是 Rails 3+ 的标准并且您使用的是 Rails2 应用程序。Rails3 使用 Bundler，它会为您的应用处理所有 Gem。

在 Rails 2 gem 依赖定义是不同的。它没有 Bundler，因此“捆绑安装”在您的情况下也不起作用。

相反，您需要像这样将 Gem 依赖项添加到 config/environment.rb：

`config.gem 'your_gem_name_here'`

您还需要手动安装 Gem，所以不像 Rails3 中的 Bundler 安装它。在外壳中使用它：

```
gem install your_gem_name 
```

一般来说，将应用程序更新到 Rails3 是个好主意，我推荐它，因为我看到你想使用的这个 Gem 没有早期版本。

# php - Symfony2 - 表单类：data_class 似乎不起作用

> ID：10107019
> 
> 赞同：0
> 
> 时间：2012-04-11T13:35:06.750
> 
> 标签：php, symfony

我正在使用 Form 类来帮助生成表单。这是一个密码重置表格。

此表单需要绑定到我的用户实体，一旦提交表单，密码将被更新。

一切都在使用我目前拥有的代码，但为了尝试删除一些我认为不需要的代码（由于使用 data_class 选项），我的验证中断（因为表单似乎变得“分离”了实体）

好的，所以一些代码：

```
public function passwordResetAction(Request $request, $key = NULL)
{
    $user = $this->getDoctrine()
            ->getRepository('DemoUserBundle:User\User')
            ->findOneBy(array('resetToken' => $key));

    if (!$user) {
        throw $this->createNotFoundException('No user found for reset token '.$key.'!');
    }

    $form = $this->createForm(new PasswordResetType(), $user);

    if ($request->getMethod() == 'POST') {
        $form->bindRequest($request);

        if ($form->isValid()) {
            $postData = $request->request->get('resetpass');

            $newPassword = $postData['password'];

            $encoder = new MessageDigestPasswordEncoder('sha1', false, 1);
            $password = $encoder->encodePassword($newPassword, $user->getSalt());
            $user->setPassword($password);

            $newToken = base64_encode($user->getUsername().'|'.date('Y-m-d'));
            $user->setResetToken($newToken);

            $em = $this->getDoctrine()->getEntityManager();
            $em->persist($user);
            $em->flush();

            return $this->redirect($this->generateUrl('password_reset_success'));
        }

    }

    return $this->render('DemoUserBundle:User\Reset:password-reset.html.twig', array('key' => $key, 'form' => $form->createView()));
} 
```

我感兴趣的代码是“$form = $this->createForm(new PasswordResetType(), $user);” 如您所见，我使用表单类型来构造表单并将其传递给将表单附加到用户实体的 $user 变量。现在，据我所知，我不需要这个参数集，因为我在表单类型中设置了实体（代码见下文）

```
namespace Demo\UserBundle\Form\Type\User;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;
use Symfony\Component\Form\FormError;
use Symfony\Component\Form\CallbackValidator;

class PasswordResetType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->add('password', 'password', array('label' => 'New Password'));
        $builder->add('confirmPassword', 'password', array('label' => 'Confirm Password', 'property_path' => false));
        $builder->addValidator(new CallbackValidator(function($form)
            {
                if($form['confirmPassword']->getData() != $form['password']->getData()) {
                    $form['confirmPassword']->addError(new FormError('Passwords must match.'));
            }
        }));
}

public function getDefaultOptions(array $options)
{
    return array(
        'data_class' => 'Demo\UserBundle\Entity\User\User',
    );
}

public function getName()
{
    return 'resetpass';
}

} 
```

所以这个表单应该默认附加到用户实体（不需要 $user 变量）但它不起作用。如果没有传递该变量，验证根本不起作用（表明它没有附加到用户实体）

是什么赋予了？有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-19T18:37:26.857

在新的 symfony 版本中使用另一个方法签名（选项解析器而不是 $options 变量）：

```
public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
         'data_class' => 'Demo\UserBundle\Entity\User\User',
    ));
} 
```

**Symfony 2.7 的注意事项：表单 API 略有变化**，所以你应该改用它：

```
public function configureOptions(OptionsResolver $resolver)
{
    $resolver->setDefaults(array(
         'data_class' => 'Demo\UserBundle\Entity\User\User',
    ));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:02:43.293

此`data_class`选项用于设置表单使用的适当数据映射器。如果你不提供它，它会根据你传递给它的对象来猜测它。

它不会让您免于将对象传递给表单。您认为它如何知道您要使用哪个对象？

# jasper-reports - 服务器生成的报告文本字段中的新行，但 iReport 中没有

> ID：10107023
> 
> 赞同：2
> 
> 时间：2012-04-11T13:35:15.320
> 
> 标签：jasper-reports, ireport

我有一个表格`iReport`可以正确生成 PDF：

```
<componentElement>
    <reportElement key="server vendor table" style="table" x="272" y="437" width="150" height="115"/>
    <jr:table>
        <jr:column width="50">
            <jr:columnHeader style="table_CH" height="15" rowSpan="1">
                <staticText>
                    <reportElement x="5" y="0" width="45" height="15"/>
                    <textElement/>
                    <text><![CDATA[Server Vendor]]></text>
                </staticText>
            </jr:columnHeader>
            <jr:detailCell style="table_TD" height="18" rowSpan="1">
                <textField>
                    <reportElement x="5" y="0" width="45" height="15"/>
                    <textElement/>
                    <textFieldExpression><![CDATA[$F{vendor}]]></textFieldExpression>
                </textField>
            </jr:detailCell>
        </jr:column>
        <jr:column width="50">
            <jr:columnHeader style="table_CH" height="15" rowSpan="1">
                <staticText>
                    <reportElement x="5" y="0" width="45" height="15"/>
                    <textElement/>
                    <text><![CDATA[# Hosts]]></text>
                </staticText>
            </jr:columnHeader>
            <jr:detailCell style="table_TD" height="18" rowSpan="1">
                <textField>
                    <reportElement x="5" y="0" width="45" height="15"/>
                    <textElement/>
                    <textFieldExpression><![CDATA[$F{count}]]></textFieldExpression>
                </textField>
            </jr:detailCell>
        </jr:column>
        <jr:column width="50">
            <jr:columnHeader style="table_CH" height="15" rowSpan="1">
                <staticText>
                    <reportElement x="5" y="0" width="45" height="15"/>
                    <textElement/>
                    <text><![CDATA[Host %]]></text>
                </staticText>
            </jr:columnHeader>
            <jr:detailCell style="table_TD" height="18" rowSpan="1">
                <textField>
                    <reportElement x="5" y="0" width="45" height="15"/>
                    <textElement/>
                    <textFieldExpression><![CDATA[$F{pc}]]></textFieldExpression>
                </textField>
            </jr:detailCell>
        </jr:column>
    </jr:table>
</componentElement> 
```

从 生成报告时`iReport`，正确生成了 PDF，结果为： ![使用 iReport 生成的正确结果](../Images/3e97cc8f7c4dff0e8e5bba7dc08b3bdc.png)

但是当使用 Java 生成时，第一列中“HP”的文本条目被分成多行： ![使用 Java 代码生成的错误结果](../Images/8643f2d19dfccc7e1da5950a82c05f85.png)

请注意，只有“HP”文本被拆分 - 带有空格的较长文本（例如“Dell inc.”）*不会*被拆分。

我猜我需要设置一些属性，但我看不出我需要设置哪个属性。

```
Class.forName("org.postgresql.Driver");
Connection conn = DriverManager.getConnection("jdbc:postgresql://localhost:5432/hardwaredata","???","???");       
InputStream input = new FileInputStream(new File("/reports/hardware_report.jrxml"));
JasperDesign design = JRXmlLoader.load(input);
input.close();
Map<String, Object> param_map = new HashMap<String, Object>();
JasperReport jReport = JasperCompileManager.compileReport(design);
JasperPrint jPrint = JasperFillManager.fillReport(jReport, param_map, conn);
String path = application.getRealPath("/") + "/"+"static_report.pdf";
JasperExportManager.exportReportToPdfFile(jPrint, path); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:23:22.463

在垂直对齐的文本的属性中，选中标题为“溢出溢出”的字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T20:37:06.463

我以前见过这个。我不记得找到真正的原因。同样奇怪（但很高兴）我发现像“HP”这样的字符串不会表现出这种行为。

尝试更改您的文本字段以显示以下内容：`$F{Vendor} + " "`

一定要记录一个错误！但这可能足以解决眼前的问题。

# mysql - 将 CSV 文件导入包含 html 的 phpmyadmin

> ID：10107025
> 
> 赞同：0
> 
> 时间：2012-04-11T13:35:22.213
> 
> 标签：mysql, wordpress

我有一个导出为 CSV 的自定义数据库。我重新排列了列和数据以匹配 Wordpress 数据库的列，因此我可以导入数据。

唯一的问题是自定义数据库中的一列包含 HTML。这会阻止数据以 CSV 格式导入 Wordpress。有没有办法解决这个问题？我真的需要保留 HTML，因为我不想再次重新设置数百行的样式。

首先将数据转换为可操作的格式需要一段时间。

ps 如果我在没有 HTML 列的情况下导入数据，它会很好地导入 Wordpress。

这是一个例子：

```
ID,post_author,post_date,post_date_gmt,post_content,post_title,post_excerpt,post_status,comment_status,ping_status,post_password,post_name,to_ping,pinged,post_modified,post_modified_gmt,post_content_filtered,post_parent,guid,menu_order,post_type,post_mime_type,comment_count
5000,1,28/02/2012 15:00,28/02/2012 15:00,"<p>Marriott Royal Hotel, College Green, Bristol<br />
<br />
We are pleased to announce the launch of the <a rel=""nofollow"" target=""_blank"" href=""http://www.inets-sw.co.uk/default.aspx?page=495"">Microelectronics iNet</a> for the South West. This &pound;2.3 million ERDF funded project will facilitate innovation and growth across the microelectronics industry by working with businesses to transform exciting ideas into new products and services.</p>
<p>Join us for the opportunity to learn more about the iNet and to hear leading technology entrepreneur Professor David May speaking on future trends and opportunities.</p>
<p>Speaking alongside Professor May will be Rick Chapman, Director of the Microelectronics iNet and Nick Sturge, Director of the SETsquared Business Acceleration Centre in Bristol.</p>
<p>Please register by Friday 26 November.</p>
<p><a rel=""nofollow"" target=""_blank"" href=""http://www.inets-sw.co.uk/micro/events/december_200/ingenious_britain_in_action.aspx"">Further details</a> or <a target=""_blank"" rel=""nofollow"" href=""https://www.formstack.com/forms/inets-launch"">book now</a></p>
<p>About the iNets<br />
The Microelectronics iNet is a consortium of universities, commercial organisations and industry networks. The project is led by the University of the West of England, and includes the University of Bristol, STMicroelectronics, the National Microelectronics Institute and the Electronics, Sensors and Photonics KTN.<br />
<br />
Agenda<br />
16:00 Arrival<br />
16:30 Welcome &amp; Introduction<br />
16:45 Professor David May<br />
17:30 Rick Chapman<br />
17:50 Nick Sturge<br />
18:30 Drinks and canap&eacute;s</p>
<p>Get updates<br />
<a rel=""nofollow"" target=""_blank"" href=""https://www.formstack.com/forms/inets-mailing_list"">Sign up</a> to receive regular updates from the Microelectronics iNet</p>
<p>Contact Us<br />
0117 32 86690<br />
<a href=""mailto:microelectronics@inets-sw.co.uk"">microelectronics@inets-sw.co.uk</a><br />
<a rel=""nofollow"" target=""_blank"" href=""http://www.inets-sw.co.uk/"">http://www.inets-sw.co.uk/</a></p>",Microelectronics iNet Launch,,publish,closed,closed,,,,,11/04/2012 10:04,11/04/2012 10:04,,0,http://www.mediwales.com/v3/?post_type=tribe_events&#038;p=5000,0,tribe_events,,0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:39:48.947

好的在csv文件中查找替换

替换`'`为`\'` \\ 将转义文件中的单引号

然后替换

`"<p>`使用`'<p>` \\ 将文本字段放在单引号中

然后替换

`</p>"`使用`</p>'` \\ 将文本字段放在单引号中

然后尝试导入....它应该可以工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-04T11:35:59.783

嘿，我在尝试更新西里尔文[酒店](https://myplanet.bg/hotels/)网站上的 wordpress 帖子时遇到了同样的问题。

简短的解决方案是：

编辑完csv文件后，将所有**“**替换为**\”**，保存文件并用记事本++打开查找并将所有**“”**替换为**“**保存文件，您可以使用以下选项将其导入phpmyadmin： [在此处输入图像描述](https://i.stack.imgur.com/aVaDe.jpg)

（如果要替换当前帖子，请检查 Replace table data with file）最重要的是 ** Columns escaped with: \ ** - 这将帮助 phpmyadmin 不给你***“在线 CSV 输入中的无效列数X" ***错误

**这是一步一步的整个过程：**

1.  从 phpmyadmin 导出 wp_posts 表。
2.  由于我无法直接使用 excel 打开它 - 首先您应该使用打开的 Open Office 打开它，然后在 excel 中复制。
3.  完成编辑后，将所有**“**替换为**\”**，然后另存为 UNICODE TEXT。
4.  用记事本 ++ 打开并用 替换所有选项卡，并将其保存为**UTF-8**（如果您不知道如何使用常规记事本也可以做到这一点）
5.  手动将扩展名从 .txt 更改为 .csv
6.  用记事本++打开，找到所有的**“”**替换为**“**，然后保存。
7.  使用上述设置导入文件。

我花了一天的时间进行测试，但最终我明白了这一点。最好的部分是它也适用于西里尔字符。

# select - 加载网格时未加载jqGrid dataUrl

> ID：10107026
> 
> 赞同：0
> 
> 时间：2012-04-11T13:35:24.770
> 
> 标签：select, jqgrid

我正在使用 inlineNav （由于这里的帮助而成功！）。

现在`dataUrl`在 select 语句中使用，我不明白这种行为。

加载网格时不加载选择选项。在按下编辑或添加记录之前，不会发出选择 HTML 请求。

我可以在加载网格后立即加载它吗？

```
$("#navgrid").jqGrid({
    sortable: true,
    rownumbers: true,
    url: 'cms.dbw?action=ajaxgrid&sessionid=3d70a780-d6ec-102f-bd56-0015171f0bcc&subaction=jq&tableid=carepln',
    editurl: 'cms.dbw',
    datatype: 'json',
    mtype: 'GET',
    pager: '#navgrid_bottompager',
    rowNum: 10,
    rowList: [10,50,100],
    width: 750,
    height: '100%',
    shrinkToFit: false,
    toolbar: [false,'top'],
    sortname: 'id',
    sortorder: 'asc',
    viewrecords: true,
    gridview: true,
    altRows: false,
    toppager: true,
    caption: 'Care Plan Detail',
    colNames: ['ID','Act','Resident&nbsp;Code','Care Code'],
    colModel: [
        {name:'id',index:'id',width:50,align:'center',search:false,key:true,hidden:true},
        {name:'active',width:30,align:'center',editable:true,edittype:'checkbox',editoptions: {value:'Y:N'},formatoptions:{disabled:false,value:"Y:N"}},
        {name:'resid',align:'left',editable:true,width:70},
        {name:'classid',align:'left',editable:true,edittype: 'select',editoptions: { dataUrl: 'cms.dbw?action=ajaxgrid&sessionid=3d70a780-d6ec-102f-bd56-0015171f0bcc&subaction=jqsubtable&tableid=careserv&field1=classid&field2=description'} ,width:70}
    ]
}); 
```

> {"page":1,"records":4024,"total":403,"rows":[{"id":"1","cell":["1","Y","100243", "22020"]},{"id":"2","cell":["2","Y","100220","22020"]},{"id":"3","cell" :["3","Y","100193","22020"]},{"id":"4","cell":["4","Y","100082","22020"] },{"id":"5","cell":["5","Y","100068","22020"]},{"id":"6","cell":["6 ","Y","100241","22020"]},{"id":"7","cell":["7","Y","100215","22020"]},{"id":"8","cell":["8","Y","100059","22020"]},{"id":"9", "细胞":["9","Y","100240","22020"]},{"id":"10","细胞":["10","Y","100009"," 22020"]}]}

在`dataUrl`开始编辑之前不会解决。并且编辑后不显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T22:16:17.523

我有同样的问题 - 我的数据中有一个外键，我希望网格显示该列的一些可理解的值，而不是用户不知道的一些随机键。像您一样，我使用 dataUrl 来获取选项，并且希望使用`formatter:'select'`它来显示这些值，即使在不编辑行时也是如此。问题是这个 ajax 请求只在编辑行时发生，所以在编辑发生之前它不知道值。我发现的唯一解决方案是在设置网格之前对这些值进行一些手动 ajax 加载，并使用这些值进行设置`editoptions: {value: ... }`，就像对其他列之一进行设置一样。这是网格格式化程序在编辑之前可以知道这些值的唯一方法。

[该答案](https://stackoverflow.com/a/2715125)提供了在网格之前加载选项的示例，但省略了该`formatter:'select'`部分 - 这是有关该文档的[链接。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:predefined_formatter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:08:47.920

我认为`dataUrl`在编辑开始时加载的没有任何缺点。相反，我认为这种行为是优势。首先，不应加载*可选*数据。最好按需加载数据。第二个优点是您可以从中获取当前数据`dataUrl`。在开始编辑当前数据时`dataUrl`将被加载。因此，如果数据将在服务器上更改，您可以在每行编辑时使用不同的值。

如果您*只需要加载一次*数据，则根本无法使用`dataUrl`。取而代之的是，您可以`editoptions.value`针对`setGridParam`.

# javascript - 立即撤消使用 JavaScript 对 HTML 输出 (ASP.Net) 所做的更改

> ID：10107029
> 
> 赞同：0
> 
> 时间：2012-04-11T13:35:34.710
> 
> 标签：javascript, asp.net, html, css

我有一个显示属性列表的页面（即房屋）。此列表是使用 CSS 组成的。所以我构建了第二个 CSS 类，它使属性/房屋在 2 列中正确对齐。到目前为止，我通过按下按钮、回发并输出不同的 html（基本相同，但使用其他 Css 类引用）来做到这一点。

现在我在 SO 上找到[了这个问题](https://stackoverflow.com/questions/195951/change-an-elements-css-class-with-javascript)，并实现了一个基本场景。一个带有“黄色”类的 div 被写入 html 页面，一个按钮将这个类更改为“红色”。发生这种情况，但 div 立即变回“黄色”类。

我是 JS 的初学者，但不是初级程序员。这将是对我的网站的一个很好的补充，但我找不到正确的答案。如果这个问题是多余的，我深表歉意。

```
<script type="text/javascript">
    function changeView() {
        document.getElementById("box").className = " red";
    } 
```

格兹，在此先感谢，克里斯托夫，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:41:09.753

默认情况下，按钮元素的类型为“提交” - 这将导致您的浏览器回发到服务器。

尝试将类型更改为按钮。

```
<input type="button" .... 
```

有关此处差异的更多信息... [<input type='button' /> 和 <input type='submit' /> 之间的区别](https://stackoverflow.com/questions/290215/difference-between-input-type-button-and-input-type-submit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:42:40.007

如果您的按钮导致回发（可能是带有`asp:`标签的服务器控件），则您所做的 javascript 更改将丢失，因为默认情况下，asp 按钮会向服务器提交页面，因此您的页面会重新加载。

如果您只需要更改 a 的类，请`div`使其成为一个简单的 html 按钮，例如

```
<input type="button" onclick="changeView()" value="Change" /> 
```

# jquery - jQuery UI 对话框 onClick 事件

> ID：10107030
> 
> 赞同：4
> 
> 时间：2012-04-11T13:35:38.700
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我正在尝试使用 onclick 命令打开一个对话框，但我没有任何运气。我已经尝试了一切，我只能让它工作。

这里的对话框 jQuery：

```
<script type="text/javascript">
        $(function runDialog(){
            $('#testimonialOpen').dialog({
                autoOpen:false
                });
            })
    </script> 
```

有一个 div id'd testimonialOpen 所以我知道它正在选择元素，并且当删除 autoOpen 时对话框工作，但是，当我尝试像这样调用函数时：

```
<p class="topper">Top words<a onClick="runDialog()"><img id="readMore" style="display: inline; padding-left:40px;" src="../images/content/readMore.png"/></a></p> 
```

它什么也不做。我尝试在 jQuery 中使用“打开”命令，但它仍然什么也没做，有什么想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-11T13:38:25.170

首先，您的 document.ready 处理程序没有完全使用正确的语法 - 您当前正在将函数声明放置在 jQuery 对象中。

其次，如果您使用 jQuery，您应该使用它来附加您的事件，而不是过时的`onclick`属性。在可能的情况下，应避免使用后者，而不是使用不显眼的事件处理程序。在 jQuery 中，这将通过使用 来完成`on()`，而在本机 JS 中则为`addEventListener()`.

试试这个：

```
<p class="topper">
  Top words
  <a href="#">
    <img id="readMore" style="display: inline; padding-left: 40px;" src="../images/content/readMore.png"/>
  </a>
</p> 
```

```
$(function() {
  $('#testimonialOpen').dialog({
    autoOpen: false
  });

  $(".topper a").on('click', function(e) {
    e.preventDefault();
    $('#testimonialOpen').dialog('open');
  });
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-12T11:52:38.060

试试这个代码

```
 $(function() {
  $("#ok_link").click(function(e) {
        e.preventDefault();
        $('#dialog-confirm').dialog('open');
    });

  $( "#dialog-confirm" ).dialog({
      resizable: false,
      height:160,
      modal: true,
      minWidth: 400,
      autoOpen:false,
      buttons: {
        "OK": function() {
          location.href="index.html";
        },
        Cancel: function() {
          $( this ).dialog( "close" );
        }
      }
    });
  });
```

```
body {
	font-family: "Trebuchet MS", "Helvetica", "Arial",  "Verdana", "sans-serif";
	font-size: 62.5%;
}
```

```
<link href="http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css" rel="stylesheet"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js">
</script>
<script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

<a href="index.html" id="ok_link">OK</a>

<div id="dialog-confirm" title="Are you sure to go home?">
  <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>You are about to redirect to home page. Are you sure?</p>
</div>
```

# delphi - delphi 网络摄像头捕获：为什么它在笔记本电脑上不起作用？

> ID：10107031
> 
> 赞同：1
> 
> 时间：2012-04-11T13:35:41.760
> 
> 标签：delphi

我已经为**delphi XE**尝试了许多网络摄像头组件（Tcamera、TJVAviCapture、我找到的源代码......）它们中的大多数都可以在我的台式计算机上运行，​​但不能在我的 maptop 上运行（用 2 台笔记本电脑测试）。

![在此处输入图像描述](../Images/8a0db312da111bb232e9656221dd21ed.png)

他们打开这个源视频窗口，然后打开网络摄像头面板。其中一些可以在 DELPHI IDE 中工作，但不能在 delphi 生成的 .exe 中工作！

有人知道一个可靠的组件（或片段），它只是在任何笔记本电脑或桌面上显示网络摄像头而不显示该视频源窗口？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:44:21.267

几年来我一直在使用 Mitov 视频库来做这种事情，对此我感到非常满意。它可以在全世界数百台笔记本电脑和台式机上运行我的网络摄像头应用程序，没有任何问题。免费用于非商业用途。定期更新。很好的支持。可用的源代码。

[http://www.mitov.com/screenshots/videolab](http://www.mitov.com/screenshots/videolab)

# macros - 编辑合流页面标题以添加其 ID？

> ID：10107034
> 
> 赞同：1
> 
> 时间：2012-04-11T13:35:48.017
> 
> 标签：macros, confluence

我正在尝试为融合的页面标题添加唯一 ID。

我设法添加了一个用户宏，它使用 jQuery 将页面 ID 和字符串前缀添加到标题；

```
## @param _prefix:title=Prefix|type=string|required=true|desc=Prefix for the page ID

<script type="text/javascript">
jQuery("document").ready(function() {
  if ("${param_prefix}" != "${_prefix}")
    jQuery('#title-text a').prepend('${param_prefix}', '$content.getIdAsString()', ' ');
});
</script> 
```

但我希望它能够真正编辑标题，而不仅仅是在运行时添加。它需要始终保持一致，允许该 ID 成为搜索词并出现在所有菜单等中。

我找不到任何表明这是可能的，但它一定是，当然！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:36:15.750

$content.setTitle("newtitle") 应该可以工作。但！您必须确保这只发生一次，否则每次呈现此宏时，您的标题都会重复地附加在您的文本前面。我想您可能会检查标题是否已经以您的前缀开头。然后您可能想要添加更改前缀的处理。

有关详细信息，请参阅[http://confluence.atlassian.com/display/CONF35/Guide+to+User+Macro+Templates#GuidetoUserMacroTemplates-OtherObjectsAvailabletoyourMacro 。](http://confluence.atlassian.com/display/CONF35/Guide+to+User+Macro+Templates#GuidetoUserMacroTemplates-OtherObjectsAvailabletoyourMacro)

话虽如此，这似乎是解决您遇到的任何问题的一种非常笨拙的方法。我建议重新考虑这是否真的是你想要做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-30T21:12:05.813

您可以使用实际的 Confluence 页面 ID 或页面小链接，而不是生成您自己的 ID。这两个都是静态的。

在任何 Confluence 页面上，输入“k”以查看超链接。您可能会惊讶地发现它还包含一个小链接。Atlassian 确认微小链接保持不变，即使您移动并重命名页面 ( [https://jira.atlassian.com/browse/CONF-27049](https://jira.atlassian.com/browse/CONF-27049) )。这是使用固定 URL 引用同一页面的一致方式。另一种方法是使用 Confluence 内置的 PageID。

Confluence 知识库：如何获取 Confluence 页面 ID [https://confluence.atlassian.com/confkb/how-to-get-confluence-page-id-648380445.html](https://confluence.atlassian.com/confkb/how-to-get-confluence-page-id-648380445.html)

*   确保当前用户具有查看和编辑页面的权限导航到特定页面
*   通过单击编辑按钮或按“e”键进入编辑模式

进入编辑模式后，地址栏中的 URL 将更改页面 ID 将显示为 URL 中的参数，例如：进入编辑模式时，URL 将更改为[http://my.domain.com/pages/editpage。 action?pageId=1540132](http://my.domain.com/pages/editpage.action?pageId=1540132) 在上面的示例中，**1540132**是页面 ID。

使用宏获取页面 ID： ContentEntityObject contentEntityObject = conversionContext.getEntity(); System.out.println("pageId : " + contentEntityObject.getId());

更改标题：content.setTitle("newtitle")。请记住，在设置 title = title + page ID 之前检查 title 是否包含页面 ID。

# html - 提交按钮上的 3 种状态

> ID：10107036
> 
> 赞同：1
> 
> 时间：2012-04-11T13:35:50.000
> 
> 标签：html, css, image, forms, button

我想知道如何将 3-States 添加到提交按钮。我所说的状态是指按钮在悬停、单击并且只是静态/未触摸时会更改图像。如果解决方案使用纯 HTML 和 CSS 但 Javascript 也可以，我更喜欢。谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T13:37:57.877

这是你想要的？

```
button[type=submit]
button[type=submit]:hover
button[type=submit]:active 
```

编辑：保持“点击”状态可以使用 jQuery：http: [//jsfiddle.net/WYTHG/1/](http://jsfiddle.net/WYTHG/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:39:42.853

试试这个[http://jsfiddle.net/jfeltis/Ufs7u/](http://jsfiddle.net/jfeltis/Ufs7u/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T08:21:15.920

我发现为此类事物提供 id 或类以使其更容易更容易。您可以在 jquery 中执行以下操作：

假设按钮有一个#derp id。

```
$("#derp").click(function(){
   $(this).toggleClass("pressed");
}); 
```

基本上，这将根据其状态从项目中添加或删除“按下”类。只需为 .pressed 添加 CSS 即可。

```
#derp {...}
#derp:hover {...}
#derp:active {...}
#derp.pressed {...} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T13:39:04.100

正常状态应该很清楚，其他两个可以使用 .element:hover 和 .element:active 样式

# php - 从 twitter url 获取 twitter 用户用户名或 id

> ID：10107046
> 
> 赞同：0
> 
> 时间：2012-04-11T13:36:20.140
> 
> 标签：php, twitter

**我只有像http://twitter.com/#!/tomcruise**这样的人的 twitter url

 **我在 PHP 的 Twitter API 周围使用 Wrapper 类，其中函数 userTimeline（用户最近的推文等）只能通过其 id 或用户名检索，但我只有 url。有什么地方可以检索用户名或 id 吗？

我正在 为 twitter api使用这个[包装类](http://www.boxuk.com/upload/class.twitter.php.txt)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:50:51.447

您将不得不使用正则表达式从 URL 中提取用户名。即使您将该 URL 传递给某个可以为您提取用户名的服务，它也有可能只使用正则表达式。

这是一个正则表达式，它将匹配来自 twitter URL 的用户名（带或不带[hashbang](http://en.wikipedia.org/wiki/HashBang)）

```
(?<=/)([\w]+?)$ 
```

我并没有真正与 Twitter API 交谈过，但我认为您可以使用[users/lookup](https://dev.twitter.com/docs/api/1/get/users/lookup) API 调用从用户名中获取 ID。

希望这应该是完成您想要完成的一切所需的一切。**

# java - 如何使用“ant”文件和 .mxml 在 java 中创建 .swf？

> ID：10107050
> 
> 赞同：0
> 
> 时间：2012-04-11T13:36:25.813
> 
> 标签：java, apache-flex

我是使用 flex 技术的新手。我在 Eclipse 中使用 ant 文件和 .mxml 创建图表，我的“ant”文件可以正确执行，但是当我打开自动创建的 .swf 文件时会出现以下错误：

Flex 错误 #1002：需要 Flash Player 9.0.115 及更高版本才能支持签名的 RSL。尝试加载 RSL 文件时出现问题：///C|/Users/cerebrum/workspace/Flex/textLayout_1.0.0.595.swz。升级您的 Flash Player，然后重试。

请告诉我如何解决这个错误？

蚂蚁文件：

```
<project name='Flex' default='mxml'>

 <target name='mxml'>
 <property name='compiler' location='C:\flex_sdk_4.0.0.14159A\bin\mxmlc.exe' />
 <exec executable='${compiler}' failonerror='true'>
 <arg line='-output C:\Users\cerebrum\workspace\Flex\CandleStick.swf' />
 <arg line='C:\Users\cerebrum\workspace\Flex\CandleStick.mxml' />
 </exec>
 <echo>mxml file compiled successfully</echo>
 <echo>swf file generated successfully</echo>
 </target>
</project> 
```

CandleStick.mxml 文件：

```
<?xml version = '1.0' encoding = 'ISO-8859-1'?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml">

 <mx:Label id = "eve"/>
 <mx:TextInput text = 'Click me to label eve' 
 click = 'eve.text = String("Rachel Weisz")'/>

 </mx:Application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:03:30.943

默认情况下，4.0 SDK 以 10.0 播放器为目标（在 frameworks/flex-config.xml 中）。这让我相信如果你可以编译得很好，但是在运行时遇到这个，你的实际播放器不是这个版本或更高版本。还给出了您的 swz 路径，您是否将 SDK 安装在与工作区相同的位置？- 通常它应该看起来像： (path/to/sdk/ **frameworks/rsls** ) - 这是在工作区之外，以防止 eclipse 与它发生冲突。

如果您现在只想“启动并运行”，请在您的项目属性 > flex 构建路径集：框架链接到“合并”，并取消选中“验证 RSL 摘要”。这应该确保框架的所有依赖项都被烘焙到您的最终输出中（是的，此时它会有点臃肿）。

至于播放器，你应该可以去 adobe.com/go/get/flashplayer，它会告诉你你有什么版本。当前的生产版本是 11.1 或 11.2（R-单击正在运行的 swf）。

# oracle - Oracle DB：电子邮件触发器

> ID：10107055
> 
> 赞同：1
> 
> 时间：2012-04-11T13:36:46.240
> 
> 标签：oracle

我正在为 Oracle DB 编写触发器以发送电子邮件，然后更新该记录的列，确认电子邮件已发送。有人建议我创建一个游标来获取每一行，然后收集电子邮件的信息，发送电子邮件，更新记录，然后循环重复。下面的代码是我到目前为止所拥有的。

```
CREATE OR REPLACE TRIGGER  "SEND_EMAIL" 
After INSERT OR UPDATE OF ISSUE_ADDED_TO_ALM ON DB_TABLE FOR EACH ROW

DECLARE
  l_table DB_TABLE%rowtype;
  l_body varchar2(4000);
  l_to_address varchar2(2000);
  l_from varchar2(200);
  l_name varchar2(100);
  l_summary varchar2(1000);
  l_description varchar2(4000);
  l_ALM_ID varchar2(100);
  l_subject varchar2(400);
  l_added_to_alm varchar2(200);
  l_SID varchar2(200);

CURSOR cur_ADDED_TO_ALM IS
select * FROM DB_TABLE where ISSUE_ADDED_TO_ALM = '1' and EMAIL_NOTIFICATION = '0';

BEGIN
OPEN cur_ADDED_TO_ALM;
LOOP
Fetch cur_ADDED_TO_ALM into l_table;
Exit when cur_ADDED_TO_ALM%NOTFOUND;

l_from := 'Data Quality IMS Team';

select ISSUE_REQUESTER into l_SID from DB_TABLE;

select emp_email_name,concat(concat(emp_first_name,' '),emp_last_name) into l_to_address, l_name from telephone_book where emp_id = l_SID;

select ISSUE_SUMMARY,ISSUE_DESCRIPTION,ALM_ISSUE_ID into l_summary, l_description, l_ALM_ID from DB_TABLE where ISSUE_ADDED_TO_ALM = '1' and EMAIL_NOTIFICATION = '0';

l_subject := l_ALM_ID + 'Request has been created.';

l_body :=  '<style type="text/css">
p{font-family: Calibri, Arial, Helvetica, sans-serif;
font-size:12pt;
margin-left:30px;
}
</style>';

l_body := l_body ||  '<p>Your request has been created.</p>';
l_body := l_body ||  '<p>Data Quality Center received the following request:</p>';
l_body := l_body ||  '<p>Request ID: '|| l_ALM_ID ||'</p>';
l_body := l_body ||  '<p>Request Title: '|| l_summary||'</p>';
l_body := l_body ||  '<p>Request Description: '|| l_description||'</p>';

  HTMLDB_MAIL.SEND(
    P_TO        => l_to_address,
    P_FROM      => l_from,
    P_BODY      => l_body,
    P_BODY_HTML => l_body,
    P_SUBJ      => l_subject);

    wwv_flow_mail.push_queue(
   P_SMTP_HOSTNAME => 'mail.sever_name.net',
   P_SMTP_PORTNO => '5'
   );

 END LOOP;

update DB_TABLE set EMAIL_NOTIFICATION = '1' where ALM_ISSUE_ID = l_ALM_ID

IF cur_ADDED_TO_ALM%ISOPEN then
CLOSE cur_ADDED_TO_ALM;
END IF;
 end; 
```

我收到以下错误：ORA-04091：表 server.DB_Table 正在变异，触发器/函数可能看不到它 ORA-06512：在“server.SEND_EMAIL”，第 15 行 ORA-06512：在“server.SEND_EMAIL”，第 18 行ORA-04088: 执行触发器 'server.SEND_EMAIL' 期间出错

![在此处输入图像描述](../Images/07a2b2dca2ba0a500ea637e55a68526c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:34:30.560

我提供这些*解决方案。*

1.  您不能`UPDATE`在其上激活触发器的表。您应该改为使用`:new.EMAIL_NOTIFICATION := 1;`
2.  您不能`SELECT`在其上激活触发器的表。这在逻辑上是没有意义的。这就是您收到“变异表”错误的原因。该表正在更改（变异）并且您想阅读它，这会产生模棱两可的结果。**不要通过自主交易来解决这个问题。**有人会在某个地方给你这个建议。那将把自己挖得更深。
3.  不需要显式游标。为了清晰和简单，使用隐含的。

总的来说，这是一个糟糕的主意。出于这样的目的，您真的不想这样做。想想看，用户进行插入或更新，必须等到数据库发送所有必要的电子邮件。如果触发器中引发任何异常，则事务将失败，您必须回滚。

**更好的计划**

1.  让触发器将电子邮件请求放入表中。有一个经常运行的作业，将这些电子邮件发送到后台的电子邮件服务器，这样用户就不会等待。
2.  让触发器将类似电子邮件的消息放入队列中。有一份工作......
3.  完全避免触发。只要有一份工作来识别这些记录和....

# c# - 由于查询找不到我要求的值的单个实例而出现错误，我该如何得到这个？

> ID：10107062
> 
> 赞同：2
> 
> 时间：2012-04-11T13:37:10.157
> 
> 标签：c#, sql-server

所以基本上我正在用 C# 编写一个程序，我需要对数据库进行查询。在这个查询中，我需要总结一个给定列的所有值，其他 2 个列符合我的要求。然后我把这个值放入一个“int”类型的变量中。

```
SELECT SUM(Column1) FROM table WHERE Column2="blahblah" AND Column3="Case1" ...
int the_sum = System.Convert.ToInt32(sql.ExecuteScalar()); 
```

现在的问题是，Column3 只能有 2 种类型的字符串值，这里我将它们称为 Case1 或 Case2，只有当 column3 包含 Case1 值时，我才需要 Column1 的 SUM。一切都很酷，只是 Column3 中的所有值都可能是 Case2。这样一来，将不会有求和的实例，并且我想将总和放入“the_sum”int 的第二行中出现错误：

```
int the_sum = System.Convert.ToInt32(sql.ExecuteScalar()); 
```

我该怎么办？我在这里做错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T13:40:14.950

更改`SUM(column1)`为`ISNULL(SUM(column1),0)`

这样，当没有要添加的值时，您将返回零。

# php - 字符串比较；寻找“喜欢”的字符

> ID：10107065
> 
> 赞同：3
> 
> 时间：2012-04-11T13:37:19.927
> 
> 标签：php

我正在对表格进行快速重复检查。在比较两个字符串时，我正在尝试这样的事情：

```
if (stripos($_SESSION['website'], $f['website'])) 
```

我收到此错误：

```
Fatal error: Call to undefined function: stripos() in... 
```

我不希望它完全匹配，基本上如果`$_SESSION['website']`是 www.google.com，我想`stripos`返回`true`如果`$f['website]`是 www.goog.com

我做错了什么，还是有更好的方法来做到这一点？

编辑：我正在做一些测试，并注意到我的`$_SESSION['website']`变量是否包含`www`and `.com`。我的`$f['website]`变量也是如此。不应该将`strpos`其返回为 true 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T13:52:13.403

[stripos()](http://nl.php.net/stripos)，根据手册仅存在于 PHP 5 或更高版本的核心中。如果 stripos 不存在，则表明您使用的是 PHP 4，它已经过时了。建议你升级。如果出于某种疯狂的原因你真的不能，你总是可以在调用 strpos 之前将两个字符串强制为小写，这将具有相同的效果：

```
<?php
// PHP 5.
$pos = stripos( 'www.google.com', 'google.com' );

// PHP 4.
$pos = strpos( strtolower( 'www.google.com' ), strtolower( 'google.com' ) ); 
```

也就是说，您的代码还有更多内容：如果字符串以 string开头，您正在检查`if( stripos( $foo, $bar ) )`which 将返回 0 。你应该检查一下。`$foo``$bar``if( stripos( $foo, $bar ) !== false )`

另一方面：我不认为stripos会帮助你。你提到`www.google.com`和`www.goog.com`，这是两个完全不同的东西。后者不是前者的子字符串，stripos 检查子字符串的起始位置，它不进行“松散比较”。

如果你想要“喜欢”并且你有一个数组中的术语，你可能想检查一下[similar_text()](http://www.php.net/manual/en/function.similar-text.php)函数，它可以告诉你两个不同的字符串有多相似。举个例子：

```
<?php
$similarity = 0;
similar_text( 'www.goog.com', 'www.google.com', $similarity );
var_dump( $similarity ); 
```

上面的代码将设置`$similarity`为`float(92.307692307692)`，这是两个字符串的相似度百分比。自然，您可以自己决定相似度的阈值。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-11T13:53:07.240

它是一个 strpos('Your String or Websitename','The Term Search');

如果找到匹配，则返回 true 否则返回 false

```
$a=strpos($_SESSION['website'], $f['website']) 
```

如果（$a==真）{

```
 //do stuff 
```

} 别的 {

```
 //other stuff
} 
```

# javascript - 重定向前写入数据库

> ID：10107069
> 
> 赞同：1
> 
> 时间：2012-04-11T13:37:26.510
> 
> 标签：javascript, jquery, html, ajax

有一个按钮，当它被点击（html onclick）时，它会重定向到另一个页面。在 javascript 中有一个函数，当单击此按钮时，它会将一些新值写入数据库表。我的问题是：重定向发生在数据写入数据库之前，所以在新页面上我仍然有旧值。有没有一种简单的方法可以反转这些步骤（重定向、写入数据库）？感谢您的意见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:01:37.600

只需将重定向移动到 ajax 调用的回调中，假设你有

```
<a href="#" id="savedata">Save data</a>
<script type="text/javascript">
    $(document).ready(function() {
        $("#savedata").click(function() {
            $.post('/savemydata/', { mydata: 'data' }, function(data) {
                window.location.href = '/newpage/'
            });
            return false;
        });
    });
</script> 
```

如果按钮实际上提交了表单，那么您可能想要隐藏按钮，然后只需在发布后触发它，只需添加：

```
$("#buttonID").trigger('click'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:01:23.193

这取决于您如何写入数据库。但是，在加载新页面时将数据传输到服务器的常用且推荐的方法是使用**URL 参数**。如果你使用类似的东西

```
<form action="/next.php" method="POST">
 <input type="hidden" name="data" value="values" />
 <button type="submit" value="Next Page" />
</form> 
```

或者

```
<a href="/next.php?data=values">Next Page</a>
// also simply usable with
window.location = "/next.php?data=values"; 
```

你可以确定

1.  数据到达服务器，
2.  之前可以处理（写入数据库）
3.  返回请求的页面。

您也可以使用 cookie。只需将您的数据值写入`document.cookie`，它们将通过请求新页面的*相同请求传输到服务器。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:47:14.753

将重定向到新页面的代码移动到 ajax 保存请求的回调中。

像这样的东西：

```
$.post('/savemydata/', { my: 'data' }, function(data) {
    //the Ajax post has been completed successfully, so now we redirect
    window.location.href = '/newpage/'
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T13:46:01.260

使用ajax写入数据，然后在ajax的回调中抛出重定向。这将确保在信息写入数据库之前不会发生重定向。这将有助于查看您的一些代码以做出更好的答案。此外，如果您是 ajax 新手，这很可能最好使用 jQuery 来完成。

# networking - 欺骗的数据包会被丢弃吗？

> ID：10107070
> 
> 赞同：1
> 
> 时间：2012-04-11T13:37:26.753
> 
> 标签：networking, ip, router

为了进行一些实验，我需要欺骗一些数据包的 IP 源地址。我应该期望这些数据包被丢弃吗？路由器的常见做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:42:23.840

这完全取决于路由器，有些路由器会进行入口过滤，这可能会丢弃您的数据包。在此处查看更多信息：[http ://en.wikipedia.org/wiki/Ingress_filtering](http://en.wikipedia.org/wiki/Ingress_filtering)

# powershell - 如果手动或 powershell 脚本，SharePoint2010 功能激活的作用不同

> ID：10107073
> 
> 赞同：0
> 
> 时间：2012-04-11T13:37:34.297
> 
> 标签：powershell, sharepoint-2010

我有一个 SharePoint 解决方案，其中包含 3 个功能。一个功能是站点范围的，两个是 Web 范围的。

站点功能包含不同的列表、2 个工作流程和内容类型。其中两个是准相似的，一个叫做`CTTaskAchat`，一个叫做`CTTaskAccord` 。这两个 web 特性包含列表定义、列表实例和事件接收器。

当我使用我的 powershell 脚本部署解决方案并使用 powershell 脚本**启用该功能时**，几乎一切都运行良好。问题是我无法在`CTTaskAccord`任何地方找到我的内容类型。而且我不明白为什么我找不到它而我可以找到`CTTaskAchat`内容类型。

如果我使用我的 powershell 脚本部署解决方案，但我**手动激活了该功能**（即通过站点设置菜单），内容类型确实会出现。

因此，如果您知道我在哪里可以找到我的解决方案。

供您参考，我很想删除所有网站集并创建一个新网站集，但这是解决方案的更新，因此不可能。

编辑：我刚刚注意到该功能的其他一些点没有被激活（我有一个列表，它在 powershell 中不存在，但在我手动激活该功能时存在）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:33:53.753

您可以在里面找到内容类型：站点操作 -> 画廊 -> 站点内容类型。

当您激活站点功能时，只需检查该功能是否已正确激活。

# perl - 如何使用 Perl 的 grep 通过匹配名称中的模式来查找特定文件

> ID：10107075
> 
> 赞同：0
> 
> 时间：2012-04-11T13:37:44.197
> 
> 标签：perl, file, grep, design-patterns, matching

我有一个存储在 Perl 变量中的字符串，它应该与存储在目录中的文件名的开头部分匹配。

我使用这个变量从目录中找到匹配这个模式的文件，使用 Perl 的 grep。这就是我正在做的事情：

```
 opendir (DIR, "data/testroot/") or die "$!";
    @file1 = <$f1/*.hdf>
    foreach(@file1){
       $patt = substr(basename($_),0,$ind);
       $file2 = grep {/${patt}*\.hdf/} readdir(DIR);
       #other code follows.......
    }
    closedir(DIR); 
```

首先，我得到文件夹中所有文件的列表`f1`并将它们存储在数组中`@file`。然后对于 中的每个条目`@file1`，我提取前几个字符，将它们存储在 中`$patt`，然后尝试从另一个文件夹`data/testroot/`中提取类似文件，这些文件具有存储在 中的匹配开始模式`$patt`。

那个 grep`$file2 = grep {/${patt}*\.hdf/} readdir(DIR);`不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:16:51.720

我认为您想`*.hdf`在目录 A 中查找文件名与`$ind`目录 B 中任何此类文件的第一个字符匹配的所有文件？

您应该使用其中一个`glob`或`readdir`两个目录，但不能同时使用。在这种情况下`glob`似乎是最好的选择，因为它允许您`*.hdf`从 A 中选择所有文件，而无需使用正则表达式检查它们。

下面的程序似乎可以满足您的需要。`$f1`我已经用和替换了样本值`$ind`。

```
use strict;
use warnings;

use File::Basename;

my $f1 = 'data';
my $f1 = 'data/testroot';
my $ind = 6;

foreach (glob "$f1/*.hdf") {
  my $patt = substr(basename($_), 0, $ind);
  my @match = glob "$f2/$patt*.hdf";

  #other code follows.......
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:44:57.247

`${patt}*\.hdf`表示“$patt 出现 0 次或多次，后跟 .hdf”。您确定您的意思不是“$patt，后跟任意文本，后跟 .hdf”吗？

那将是`/${patt}.*\.hdf/`。

# javascript - 启用 JSLint 时，停止 IntelliJ 11 向每个嵌套函数定义添加“use strict”

> ID：10107083
> 
> 赞同：10
> 
> 时间：2012-04-11T13:38:13.393
> 
> 标签：javascript, intellij-idea, jslint

任何人都知道如何阻止 IntelliJ 11`"use strict"`在启用 JSLint 时自动添加到我创建的每个嵌套函数定义中？

我已经`'use strict'`在外部封闭中指定了。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-12T08:26:44.993

作为一种解决方法，您可以在（在 Mac 上）|中禁用**Prefer Strict 模式。**（自 IDEA 11.1.1 起可用）。`Settings``Preferences``JavaScript`

请为我们创建[的问题投票。](http://youtrack.jetbrains.com/issue/WI-10717)

# jquery - jquery ui自动完成和json调用

> ID：10107087
> 
> 赞同：1
> 
> 时间：2012-04-11T13:38:26.963
> 
> 标签：jquery, json, jquery-ui, autocomplete

我正在尝试使用以下代码为文本框实现自动完成，但它不起作用：（对 MyUrl 的 ajax 调用工作正常并返回由字符串列表组成的 json 字符串）

```
$(document).ready(function () {
    $(".searchbox").autocomplete({
        source: function (request, response) {
            $.ajax({
                url: "/MyUrl/" + request.term.toLowerCase(),
                dataFilter: function (data) { return data; },
                success: function (data) {
                    return data;
                }
            });

        },
        minLength: 1
    });
}); 
```

这个电话正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T13:42:13.803

你不应该`return`得到数据，你应该将它传递给`response`回调。

```
success: function(data) {
    response(data);
} 
```

这与以下内容几乎相同：

```
success: response 
```

# java - doLayout() 和 ActionListener 问题

> ID：10107091
> 
> 赞同：1
> 
> 时间：2012-04-11T13:38:51.067
> 
> 标签：java, swing, awt

我是 JSwing 的新手，所以请原谅我可能是一些真正初学者的问题。

在阅读了有关如何使用顶级容器的教程后，我在按钮的 actionPerformed 事件中尝试了以下代码：

```
private void colgarActionListener(java.awt.event.ActionEvent evt) {

        auxButton = new JButton();
        auxButton.setSize(100,30);
        auxButton.setText("Me button");
        getContentPane().add(auxButton);
        getContentPane().doLayout();

} 
```

正如您所料，它发生了它不起作用。该按钮只是没有出现。如果我尝试一个荒谬的事情，例如：

```
getContentPane().setBackground(Color.red); 
```

代替

```
getContentPane().doLayout(); 
```

有用。我究竟做错了什么？

最后一个：如果我编写一个作为自定义 ActionListener 工作的类（带有带参数的构造函数），我应该把它放在哪里？作为 GUI 代码中的私有类？它只是感觉很脏......或者作为另一个包中的公共类。也许？

非常感谢。

问候。

马丁。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:42:03.353

您需要了解布局管理器的工作原理以及如何使用它们，这是使用 Swing 的关键之一（顺便说一下，不是 JSwing）。[布局管理器教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)是一个很好的起点。

一方面，避免使用空布局，`setBounds(...)`另一方面，contentPane 通常使用 BorderLayout。另外，我以前从未见过`doLayout()`以这种方式使用过。相反，我通常在更改其组件后看到`validate()`或`revalidate()`随后`repaint()`调用容器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:48:24.737

是的，ActionListener 通常不仅是私有类，而且是匿名类，完全在使用站点上实现。匿名课是你写作的时候

```
x.addActionListener(new ActionListener() { public void actionPerformed(Event e) {
   ... stuff to do ...
}}); 
```

# java - 如何从用户输入向数组添加字符串 - Java

> ID：10107097
> 
> 赞同：-5
> 
> 时间：2012-04-11T13:39:13.947
> 
> 标签：java

有没有办法使用`ArrayList()`方法将字符串从用户输入添加到数组中？我有一个程序提示用户从 JTextBox 输入某个输入，我想将此输入存储到一个数组中。

我是学生，因此提示和解释将优于简单的答案。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:42:43.410

`ArrayList`是一个类，而不是一个方法。如果要将字符串放入数组中，则需要跟踪

1) 数组的大小，或可以输入多少值的合理上限。
2) 当前索引

您可以将输入的字符串放入数组中。

```
String[] strings = new String[SOME_MAX];
...
strings[currentIndex] = userEnteredString; 
```

这样做的缺点是您需要预先知道数组的大小。

如果你不这样做，那么你可以使用一个`List`实现。

`List<String> strings = new ArrayList<String>();`

然后只需使用该`add`方法添加字符串。

要取回数组，您可以执行

`strings.toArray()`

这显然有一个缺点，就是最后只能得到数组，所以如果整个过程都需要使用数组，这是不可接受的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T13:59:13.047

> 有没有办法使用 ArrayList() 方法将字符串从用户输入添加到数组中？

最简洁的答案是不。数组具有固定数量的元素。添加更多元素的唯一方法是创建一个新数组。这个限制是 Java 语言和 JVM 的基础，没有聪明的方法可以绕过它。

您可以使用`ArrayList`Hvgotcodes 所描述的 ，但这涉及创建一个新数组。

更直接的方法是使用其中一种`Arrays.copyOf(...)`方法创建一个新数组，然后添加额外的元素；例如

```
 String[] bigger = Arrays.copyOf(strings, string.length + 1);
    bigger[bigger.length - 1] = extraString; 
```

# xcode4 - XCode：文档：“ “无法保存。文件已被另一个应用程序更改”

> ID：10107098
> 
> 赞同：14
> 
> 时间：2012-04-11T13:39:16.207
> 
> 标签：xcode4

自从开始使用 XCode 4.2 以来，我或多或少地经常遇到错误：

![在此处输入图像描述](../Images/f59359d8739570277ba09302c2533e9d.png)

文件名的各种替换。这通常是在 Xcode 进行自动保存时发生的，所以它似乎是随机发生的。我通常单击“无论如何保存”，然后保留我最近的编辑，尽管 Xcode 很可能会挂起。当它挂起时，我通常不会损失太多，除了一分钟拍摄它并让它重新启动，但仍然......

除了 XCode，我*不会*在任何应用程序中打开这些文件中的任何一个。我无法弄清楚这种模式，尽管它可能与在文件之间来回弹出有关。上次我注意到它时，我还注意到对该文件的上一轮编辑没有进行。所以其他一些编辑没有保存文件。

足够的序言：**这是问题**：

其他人会遇到这种情况吗？有没有人缩小是什么原因造成的？有没有我可以更改的设置来防止它？我的行为有什么可以改变的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-10T08:59:21.473

当你发生这种情况时

1) 有本地未保存的修改（导航器图标会变暗）

2) 其他东西改变了 Xcode 之外的文件。`svn`对我来说，当我从命令行或通过进行外部更新时会发生这种情况`Versions`

你有什么在 Xcode 之外修改和保存文件？任何事物？

检查您的源代码管理（如果有）并确定您正在做的事情是否导致条件得到满足。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-20T07:55:02.990

好吧，当我尝试本地化我的文件时，我遇到了同样的问题。然后我注意到每次弹出消息都是因为项目导航器中所选文件的图标是灰色的，这意味着没有保存。所以我所做的是在执行使“由另一个应用程序更改”消息出现的操作之前保存文件（Cmd+S），在我的例子中是本地化按钮。

# ruby - Datamapper "Update" does not update record

> ID：10107109
> 
> 赞同：1
> 
> 时间：2012-04-11T13:39:43.633
> 
> 标签：ruby, datamapper

I am having trouble with datamapper not updating a model. I can create and save models without issue. I have enabled `raise_on_save_failure` and checked the return value of `update` but see no errors.

Here is the model:

```
class UserProfile   
  include DataMapper::Resource  
  attr_accessor :id, :wants_hints, :is_beta_user  
  property :id, Serial #auto-increment integer key  
  property :is_beta_user, Boolean  
  property :wants_hints, Boolean  
  has 1, :user, :through => Resource 
end 
```

And here is where it is updated in the controller:

```
if user = User.get(request.session[:user])      
  if request.params[:user_profile]        
    beta = request.params[:user_profile].has_key?('is_beta_user')        
    hints = request.params[:user_profile].has_key?('wants_hints')        
    user.user_profile.update({:is_beta_user => beta, :wants_hints => hints}) # returns true
    Log.puts user.user_profile.errors.each {|e| Log.puts e.to_s} # returns empty list []
  end    
end 
```

When the controller is called `update` always returns true, and there are never errors in the error list. The datamapper log, which is set to `:debug`, only shows the `SELECT` queries for retrieving the `user` and `user_profile` and that is all. Why would I be able to `save` a newly created model, but not be allowed to `update` that same model?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T03:50:57.027

Removing `attr_accessor` fixed the problem. From my research `attr_accessor` is used for attributes not in the database.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:46:23.267

DataMapper's `save` and `update` do not necessarily produce an `UPDATE` sentence. It will only do so if the data held by the model object has changed. So, for example, in the following code the `update` will return `true` but will not produce an `UPDATE`:

```
# This generates an INSERT
user = User.create(:login => 'kintaro', :email => 'kintaro@example.com')

# This does NOT generate an UPDATE
user.update(:login => 'kintaro') 
```

If you do this, however, an `UPDATE` will be produced:

```
# This generates an UPDATE
user.update(:login => 'kintaro22') 
```

Maybe this is what's happening?

# grails - message.properties 中的自定义错误消息

> ID：10107112
> 
> 赞同：0
> 
> 时间：2012-04-11T13:39:53.733
> 
> 标签：grails

我有**Form**域类，并且有 **typeOfTransaction**属性。此属性是必需的（空白：false）。我想为此属性编写自定义错误消息，如果用户未设置该值，则必须出现该消息。

```
com.example.domain.form.typeOfTransaction.blank = Type of transaction required 
```

上面是消息，但是当我尝试使用空**的 typeOfTransaction**字段保存表单时，我没有得到它。而不是这条消息，我有默认消息

```
"Please select an item in the list." 
```

ps 我不知道这个默认消息是在哪里定义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:01:09.250

如果您使用类的绝对名称，则需要使用类的确切名称，包括大写 - 所以我猜您应该输入：

```
 com.example.domain.Form.typeOfTransaction.blank = Type of transaction required 
```

如果您不使用绝对名称，则不要将类名大写：

```
 form.typeOfTransaction.blank = Type of transaction required 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-11T18:07:43.227

好吧，对于 1.3.7，它应该在 grails-app/i18n/messages.properties 中（或适当的语言特定变体之一）。我假设 2.0 将使用相同的位置。

# ios - CCLabelTTF UILineBreakModeWordWrap 不适用于自定义字体

> ID：10107114
> 
> 赞同：1
> 
> 时间：2012-04-11T13:39:56.447
> 
> 标签：ios, fonts, cocos2d-iphone

我在我的项目中使用了几种自定义字体。当我使用 Bookman 时，换行符工作正常，但当我切换到 Myriad Pro 时，它停止工作。基本上，文本显示在一个大的单行中。甚至 \n 也不起作用。有什么建议么？

```
textSize = [text2 sizeWithFont:[UIFont fontWithName:@"myriadprosemibold" size:24.0f]
                     constrainedToSize:CGSizeMake(self.contentSize.width/2, 2000)
                         lineBreakMode:CCLineBreakModeWordWrap];

label = [CCLabelTTF labelWithString:content
                                 dimensions: textSize
                                  alignment: alignment
                                   fontName:font
                                   fontSize:size];

        [label setColor:color];
        [self addChild:label z:1]; 
```

注意：我已将 Myriad pro 作为 OTF 并将其转换为 TTF

更新：我注意到 textSize 是 0,0。所以计算出错了。现在，我已经硬编码了大小，因为文本不是动态的，但有什么建议吗？

# asp.net - Treeview 不适用于站点地图

> ID：10107116
> 
> 赞同：1
> 
> 时间：2012-04-11T13:39:59.287
> 
> 标签：asp.net

我用我的 default.aspx 页面创建了一个站点地图，对其进行了相应的编码，然后在页面中添加了一个站点地图数据源控件和一个树视图控件。然后，我通过添加“datasourceID”来更改树视图的代码以链接到站点地图数据源。但是，在浏览器中查看页面时，我仍然遇到错误，不知道还能做什么。帮助将不胜感激。谢谢你。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

        <asp:Panel ID="Panel1" runat="server" BackColor="#DFDFFF" Font-Names="Arial" 
            Font-Size="Medium" Height="557px" Width="913px">
            <asp:Panel ID="Panel2" runat="server" Width="223px" BackColor="#3333CC" 
                ForeColor="White" 
                style="top: 58px; left: 10px; position: absolute; height: 437px; margin-top: 70px; text-align: center;">
                <asp:Panel ID="Panel3" runat="server" BackColor="#003399" ForeColor="White" 
                    style="margin-left: 259px; top: -109px; left: -258px; position: absolute; width: 906px; height: 105px;">
                    <asp:Label ID="Label1" runat="server" Font-Size="XX-Large" 
                        style="z-index: 1; left: 293px; top: 33px; position: absolute; width: 345px; text-align: center;" 
                        Text="Web Page Header"></asp:Label>
                </asp:Panel>
                <asp:Label ID="Label2" runat="server" Font-Bold="True" ForeColor="White" 
                    style="z-index: 1; left: 56px; top: 7px; position: absolute; width: 99px" 
                    Text="Menu"></asp:Label>
                <br />
                <br />

                <asp:SiteMapDataSource ID="SiteMapDataSource1" runat="server" />
                <asp:TreeView ID="TreeView1" runat="server" DataSourceID="SiteMapDataSource1">
                </asp:TreeView>

            </asp:Panel>
        </asp:Panel>

    </div>
    </form>
</body>
</html> 
```

站点地图代码：

```
<?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >
    <siteMapNode url="Default.aspx" title="Home"  description="this is the home page">
        <siteMapNode url="Aboutus.aspx" title="About us"  description="this is the contact page" />
        <siteMapNode url="Contactus.aspx" title="Contact Us"  description="this is the whatever page" />
        <siteMapNode url="History.aspx" title="Our History"  description="this is the whatever page" />
    </siteMapNode>
</siteMap> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:06:04.360

我可以看到几个问题，所以简单的方法是给你一个工作样本：

```
<?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >
    <siteMapNode url="~/Home" title="Home" description="Home">
        <siteMapNode url="~/About" title="About" description="About">
    </siteMapNode>
</siteMap> 
```

在您的 ASPX 页面中：

```
<asp:TreeView ID="TreeView1" runat="server" DataSourceID="SiteMapDataSource1"  
    HoverNodeStyle-Height="0" ImageSet="BulletedList">
</asp:TreeView>

<asp:SiteMapDataSource ID="SiteMapDataSource1" runat="server" /> 
```

此外，您需要丢失内联 CSS ;-)

# javascript - Flash 横幅周围的超链接

> ID：10107121
> 
> 赞同：1
> 
> 时间：2012-04-11T13:40:19.490
> 
> 标签：javascript, jquery, html, css, flash

Chrome 和 Firefox 中没有超链接（如果我单击，Firefox 链接将打开，但指针不显示可单击）。我正在尝试这个：

```
<a href="http://www.teamrustic.com/" target="_blank"> 
    <embed class="ads" 
           style="margin:0px;border:0px;" 
           src="swf/flash_banner.swf"
           width="315" height="100" wmode="opaque">
    </embed>
</a>​ 
```

尝试使用 CSS`.ads{cursor : pointer;}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:48:45.087

问题是在某些浏览器中，flash 捕获了点击事件，而不是通过 DOM 过滤它。对此没有具体的解决方法。

我知道有两种解决方法：

1.  将代码添加到处理点击并打开相应 URL 的 swf 文件中
2.  在 Flash 顶部放置一个“垫片”不可见链接，该链接可以适当地捕获点击和链接 - 请注意，您的 Flash 文件中只能有其中的一个，因此如果您需要 Flash 文件中的两个链接，它将不起作用。

#2 的例子：

```
<div id="flashContainer">
    <a id="shim" href="mylink.aspx">&nbsp;</a>
    <div id="flash">
        <embed class="ads" src="swf/flash_banner.swf" width="315" height="100" wmode="opaque"></embed>
    </div>
</div> 
```

```
#flashContainer {
    position: relative;
}
#flash { 
    z-index: 5;
}
#shim {
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    width: 315px;
    height: 100px;
    z-index: 10;
} 
```

**更新**

#2 使用 div 的示例，使用 jQuery 连接点击事件：

```
<div id="flashContainer">
    <div id="shim"></div>
    <div id="flash">
        <embed class="ads" src="swf/flash_banner.swf" width="315" height="100" wmode="opaque"></embed>
    </div>
</div> 
```

```
#flashContainer {
    position: relative;
}
#flash { 
    z-index: 5;
}
#shim {
    position: absolute;
    top: 0;
    left: 0;
    width: 315px;
    height: 100px;
    cursor: hand; cursor: pointer;
    z-index: 10;
} 
```

```
$("#shim").click(function() {
    window.location.assign("mylink.aspx");
}); 
```

# bash - bash -x 命令

> ID：10107124
> 
> 赞同：40
> 
> 时间：2012-04-11T13:40:40.557
> 
> 标签：bash

我看到一个客户端执行`$bash -x`命令来查看文件是否可执行（或`ksh -x`命令等），就像shell 脚本`-x`中的语句一样。`if`

我的问题是：**命令做什么****？`$bash -x`**

我的解释是在当前 shell 中的新 bash shell 中启动一个命令，继承相同的环境变量并由同一用户执行。

有趣的是我可以做`$ls`但不能`$bash -x ls`，这给出了：

（在 AIX 6 下） `/usr/bin/ls: /usr/bin/ls: cannot execute binary file`

对我来说，为什么错误是一个谜——猜测是由于特权，这意味着我上面的假设是不正确的。

另外，我相信`$bash ls`并且`$bash -x ls`是同一件事（`-x`对于“执行”）？

任何意见都非常感谢。

干杯!

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-04-11T13:43:24.403

该`-x`选项以跟踪模式启动 BASH shell。您可以查看有关如何处理命令/脚本的所有详细信息。如果您的脚本不符合您的预期，这是查找一些错误的好方法

而且，正如 Alex[在评论](/q/10107124#comment-12948907)中所说，要在 BASH 中运行命令，您必须使用`-c`类似`bash -x -c ls`.

请参阅`man bash`或在线手册，特别是有关[调用 Bash](https://www.gnu.org/software/bash/manual/html_node/Invoking-Bash.html)和[内置命令的部分](https://www.gnu.org/software/bash/manual/html_node/The-Set-Builtin.html)[以`set`](https://www.gnu.org/software/bash/manual/html_node/The-Set-Builtin.html)获取更多信息：

> 调用 shell 时，所有与内置函数一起使用的单字符选项`set`（请参阅 The Set Builtin）都可以用作选项。

> ### `-x`
> 
> 在展开之后和执行之前打印简单命令、`for`命令、`case`命令、`select`命令和算术`for`命令及其参数或相关单词列表的轨迹。变量的值`PS4`被扩展，结果值在命令及其扩展参数之前打印。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-07-11T16:59:27.323

*   **`bash -x <file>`**运行脚本`<file>`并跟踪执行的每个命令

*   **`test -x <file>`**测试`<file>`当前用户是否有执行权限。

看来你把这两个弄混了。

# android - Android 邮件 API

> ID：10107135
> 
> 赞同：2
> 
> 时间：2012-04-11T13:41:52.023
> 
> 标签：android, email

我最近一直在努力研究这个。是否有我可以使用并添加到其中的 android API？我想为一个电子邮件应用程序制作一个插件，但我不想制作一个完整的电子邮件应用程序。

所以我非常想要一些已经处理发送和接收电子邮件的东西，我想要用我的应用程序做的就是在发送电子邮件之前添加到电子邮件中。

这是可能的还是我必须创建一个完整的邮件应用程序才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:03:29.440

不幸的是，Android 没有内置任何功能。但是，我使用了 Javamail，它工作得很好。

# python - 谷歌应用引擎和谷歌存储

> ID：10107136
> 
> 赞同：2
> 
> 时间：2012-04-11T13:41:53.183
> 
> 标签：python, google-app-engine, google-cloud-storage

我尝试为我的 GAE 应用启用云存储。我在文档中读到：

> 将服务帐户作为项目编辑器添加到存储桶所属的 Google API 控制台项目。有关 Cloud Storage 中权限的信息，请参阅 Cloud Storage 文档中的范围和权限。

但是，当我尝试在 API 控制台上向团队成员提供服务帐户时，我收到以下消息：

用户*** *@* *** .gserviceaccount.com 不得添加到项目“ ****”中。只能添加来自域 *** .com 的成员。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T03:56:22.557

您可以使用 google 组来为您的自定义域进行这项工作。

1.  在用于管理您的域的 cpanel 中，转到“组”选项卡并添加一个用于您的应用的新组。
2.  将服务帐户 *.gserviceaccount.com 作为成员添加到您创建的组中。
3.  [在https://code.google.com/apis/console](https://code.google.com/apis/console)将组添加到您的项目的团队中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T23:57:40.607

由于您使用 Apps 帐户（一个 @yourdomain.com）创建了 API 控制台项目，因此该项目会自动被视为 Apps 项目，并且只能将您域中的用户添加到其中。

为避免这种情况，请使用@gmail.com 帐户创建一个新项目，然后添加您想要访问它的所有开发人员。然后，您可以删除 @gmail.com 帐户。

# c# - 如何测量函数运行的时间？

> ID：10107140
> 
> 赞同：54
> 
> 时间：2012-04-11T13:42:03.370
> 
> 标签：c#, .net, performance, timer, stopwatch

我想看看一个函数运行了多长时间。所以我在我的表单上添加了一个计时器对象，我得到了这段代码：

```
private int counter = 0;

// Inside button click I have:
timer = new Timer();
timer.Tick += new EventHandler(timer_Tick);
timer.Start();
Result result = new Result();
result = new GeneticAlgorithms().TabuSearch(parametersTabu, functia);
timer.Stop(); 
```

和：

```
private void timer_Tick(object sender, EventArgs e)
{
    counter++;
    btnTabuSearch.Text = counter.ToString();
} 
```

但这不算什么。为什么？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-04-11T14:10:33.780

为避免将来出现计时器问题，以下是正确的代码：

```
timer = new Timer();
timer.Tick += new EventHandler(timer_Tick);
timer.Interval = 1; //set interval on 1 milliseconds
timer.Enabled = true; //start the timer
Result result = new Result();
result = new GeneticAlgorithms().TabuSearch(parametersTabu, functia);
timer.Enabled = false; //stop the timer 
```

* * *

```
private void timer_Tick(object sender, EventArgs e)
{
   counter++;
   btnTabuSearch.Text = counter.ToString();
} 
```

但这是错误的方法。您必须使用[Stopwatch (System.Diagnostic)](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)类，因为它是一个**高分辨率计时器，** *Diagnostic*一词说明了一切。

所以试试这个：

```
Stopwatch timer = Stopwatch.StartNew();

Result result = new Result();
result = new GeneticAlgorithms().TabuSearch(parametersTabu, functia);

timer.Stop();  
TimeSpan timespan = timer.Elapsed;

btnTabuSearch.Text = String.Format("{0:00}:{1:00}:{2:00}", timespan.Minutes, timespan.Seconds, timespan.Milliseconds / 10); 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-04-11T13:44:08.723

不要使用计时器 - 使用[`Stopwatch`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)类。

```
var sw = new Stopwatch();
Result result = new Result();

sw.Start();
result = new GeneticAlgorithms().TabuSearch(parametersTabu, functia);

sw.Stop();

// sw.Elapsed tells you how much time passed 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-04-11T13:43:55.707

查看一段代码需要多长时间运行的最好方法是使用`System.Diagnostics.Stopwatch`.

这是一个例子：

```
using System.Diagnostics;

#if DEBUG
     Stopwatch timer = new Stopwatch();
     timer.Start();
#endif

     //Long running code

#if DEBUG
     timer.Stop();
     Debug.WriteLine("Time Taken: " + timer.Elapsed.TotalMilliseconds.ToString("#,##0.00 'milliseconds'"));
#endif 
```

我使用`#if DEBUG`来确保秒表代码不会进入生产版本，但您可以不使用它。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-12-23T15:55:50.447

[Visual Studio](https://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2015) 2015、2017 Professional 和 Enterprise 具有诊断工具。如果您在函数末尾有一个断点，它将在“*事件*”选项卡下显示时间和持续时间，如图所示：

[![在此处输入图像描述](../Images/802763cec92f8d24021617c13c81d3e4.png)](https://i.stack.imgur.com/KQUyD.png)

*[您可以在 Visual Studio 2015](http://blogs.msdn.com/b/visualstudioalm/archive/2015/01/16/diagnostic-tools-debugger-window-in-visual-studio-2015.aspx)*中查看文章诊断工具调试器窗口以了解更多详细信息。

附言; 到目前为止只有 Xamarin 形式，跨平台项目不支持此功能。我希望 Microsoft 也能为 xamarin 表单项目带来这一强大功能。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-04-11T13:46:13.620

您应该将秒表类用于计时功能。

尝试以下操作：

```
private int counter = 0;

// setup stopwatch and begin timing
var timer = System.Diagnostics.Stopwatch.StartNew();

Result result = new Result();
result = new GeneticAlgorithms().TabuSearch(parametersTabu, functia);

// stop timer and get elapsed time
timer.Stop();
var elapsed = timer.Elapsed;

// display result time
MessageBox.Show(elapsed.ToString("mm':'ss':'fff")); 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-04-11T13:46:08.237

使用System.Diagnostics 的[秒表](https://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch%28v=vs.110%29.aspx)：

```
static void Main(string[] args)
{
    Stopwatch stopWatch = new Stopwatch();
    stopWatch.Start();
    Thread.Sleep(10000);
    stopWatch.Stop();

    // Get the elapsed time as a TimeSpan value.
    TimeSpan ts = stopWatch.Elapsed;

    // Format and display the TimeSpan value.
    string elapsedTime = String.Format("{0:00}:{1:00}:{2:00}.{3:00}",
        ts.Hours, ts.Minutes, ts.Seconds,
        ts.Milliseconds / 10);
    Console.WriteLine("RunTime " + elapsedTime);
} 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-04-11T13:44:16.303

对于计时功能，您应该使用[Stopwatch 类](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)

此外，您的计时器不计数的原因是您没有为其设置时间间隔。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-03-23T16:05:24.393

也许，您可以编写这样的方法：

```
public static void Time(Action action)
{
    Stopwatch st = new Stopwatch();
    st.Start();
    action();
    st.Stop();
    Trace.WriteLine("Duration:" + st.Elapsed.ToString("mm\\:ss\\.ff"));
} 
```

并像这样使用它：

```
Time(()=>
{
 CallOfTheMethodIWantToMeasure();
}); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-09-01T18:02:54.877

我审查并同意所有建议。但是想分享一个执行时间记录器的通用实现，我们不想多次实现秒表逻辑，但仍想测量多个方法的执行时间。

不以通用方式实现记录器的主要原因是 - 方法执行在 stopwatch.Start() 和 stopwatch.Stop() 之间，我们也可能需要执行后的方法结果以进行进一步处理。

因此，为了解决这个问题，我创建了以下示例实现，其中单独记录执行时间，而不将其与实际方法流混合。

```
public static class Helper
{
    public static T Time<T>(Func<T> method, ILogger log)
    {
        var stopwatch = new Stopwatch();
        stopwatch.Start();
        var result = method();
        stopwatch.Stop();
        log.Info(string.Format("Time Taken For Execution is:{0}", stopwatch.Elapsed.TotalMilliseconds));
        return result;
    }
}

public class Arithmatic
{
    private ILogger _log;
    public Arithmatic(ILogger log)//Inject Dependency
    {
        _log = log;
    }

    public void Calculate(int a, int b)
    {
        try
        {
            Console.WriteLine(Helper.Time(() => AddNumber(a, b), _log));//Return the result and do execution time logging
            Console.WriteLine(Helper.Time(() => SubtractNumber(a, b), _log));//Return the result and do execution time logging
        }
        catch (Exception ex)
        {
            _log.Error(ex.Message, ex);
        }
    }

    private string AddNumber(int a, int b)
    {
        return "Sum is:" + (a + b);
    }

    private string SubtractNumber(int a, int b)
    {
        return "Subtraction is:" + (a - b);
    }
}

public class Log : ILogger
{
    public void Info(string message)
    {
        Console.WriteLine(message);
    }

    public void Error(string message, Exception ex)
    {
        Console.WriteLine("Error Message:" + message, "Stacktrace:" + ex.StackTrace);
    }
}

public interface ILogger
{
    void Info(string message);
    void Error(string message, Exception ex);
} 
```

**调用部分：**

```
 static void Main()
 {
    ILogger log = new Log();
    Arithmatic obj = new Arithmatic(log);
    obj.Calculate(10, 3);
    Console.ReadLine();
 } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-04-26T14:05:12.850

为了在调试代码时查看断点之间经过的毫秒数，Visual Studio 提供了[PerfTips](https://devblogs.microsoft.com/devops/perftips-performance-information-at-a-glance-while-debugging-with-visual-studio/)，它是一个内置的、有用且快速的工具。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-09-22T11:52:22.107

记录当前步骤开始处理的时间

```
DateTime dtStart = DateTime.Now;

//Calculate the total number of milliseconds request took (Timespan = to represent the time interval)-> current - started time stamp ...
//TotalMilliseconds -->Gets the value of the current TimeSpan structure expressed in whole and fractional milliseconds.
// to measure how long a function is running 
var result=((TimeSpan)(DateTime.Now - dtStart)).TotalMilliseconds.ToString("#,##0.00") + "ms"; 
```

# xcode - NSTextField 的“带模式的值”绑定中的条件显示模式

> ID：10107141
> 
> 赞同：4
> 
> 时间：2012-04-11T13:42:07.030
> 
> 标签：xcode, cocoa, interface-builder, cocoa-bindings

我有一个文本字段，显示项目的`NSArrayController`数量和选定项目的数量，如下所示：

> 已选择 5 个中的 3 个

我还想在没有选定项目时显示另一种模式，例如：

> 5 项

有没有办法只使用没有代码的 Interface Builder 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T06:16:20.953

对于第一种情况：`{value2}@ of %{value1}@`

对于第二种情况：`%{value2}@ Items`

你想要两个吗？

如果是，则使用上述两种方法。

# c# - 基于 Amazon s3 同步文件夹

> ID：10107142
> 
> 赞同：1
> 
> 时间：2012-04-11T13:42:09.677
> 
> 标签：c#, .net, amazon-s3

我有一个 Amazon s3 存储桶，并希望让我的 .net 应用程序的应用程序数据文件夹自行同步以反映存储桶中的更改。

因此，例如，如果用户通过我的 Web 应用程序上传照片。当他们启动桌面应用程序时，我希望应用程序数据文件夹与存储桶状态同步，因此它会自动下载上传的照片等。

有没有为此制作的api或sdk？我已经看到了应用程序更新存储桶以反映本地存储更改的示例，但我希望反过来做。

# ios - 两个 addTarget:action:forControlEvent: 调用的不同结果

> ID：10107143
> 
> 赞同：1
> 
> 时间：2012-04-11T13:42:09.700
> 
> 标签：ios, button, target-action

代码只不过是按钮的*目标操作*：

```
[subButton addTarget:self
              action:@selector(pickerviewSubButtonClicked:) 
    forControlEvents:UIControlEventTouchUpInside];

//[subButton addTarget:self action:@selector(pickerViewSubButtonClicked:) forControlEvents:UIControlEventTouchUpInside]; 
```

我的第一个**失败**并出现错误“ *...无法识别的选择器已发送到实例...* ”，而使用标记的选择器将**成功**。我怀疑它是由排版引起的，但不知道具体原因。这是他们的**十六进制转储**：

```
00000000: 5b73 7562 4275 7474 6f6e 2061 6464 5461  [subButton addTa
00000010: 7267 6574 3a73 656c 660a 0920 2020 6163  rget:self..   ac
00000020: 7469 6f6e 3a40 7365 6c65 6374 6f72 2870  tion:@selector(p
00000030: 6963 6b65 7276 6965 7753 7562 4275 7474  ickerviewSubButt
00000040: 6f6e 436c 6963 6b65 643a 2920 0a09 2020  onClicked:) ..  
00000050: 2066 6f72 436f 6e74 726f 6c45 7665 6e74   forControlEvent
00000060: 733a 5549 436f 6e74 726f 6c45 7665 6e74  s:UIControlEvent
00000070: 546f 7563 6855 7049 6e73 6964 655d 3b0a  TouchUpInside];.
00000080: 2f2f 5b73 7562 4275 7474 6f6e 2061 6464  //[subButton add
00000090: 5461 7267 6574 3a73 656c 6620 6163 7469  Target:self acti
000000a0: 6f6e 3a40 7365 6c65 6374 6f72 2870 6963  on:@selector(pic
000000b0: 6b65 7256 6965 7753 7562 4275 7474 6f6e  kerViewSubButton
000000c0: 436c 6963 6b65 643a 2920 666f 7243 6f6e  Clicked:) forCon
000000d0: 7472 6f6c 4576 656e 7473 3a55 4943 6f6e  trolEvents:UICon
000000e0: 7472 6f6c 4576 656e 7454 6f75 6368 5570  trolEventTouchUp
000000f0: 496e 7369 6465 5d3b 0a                   Inside];. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:46:21.587

你有一个错字**v**和**V**：

选择器视图**ViewSubButtonClicked**

Objective-C 是区分大小写的语言

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:45:54.160

```
[subButton addTarget:self
              action:@selector(pickerviewSubButtonClicked:) 
    forControlEvents:UIControlEventTouchUpInside];

pickerviewSubButtonClicked <-- Error
pickerViewSubButtonClicked <-- Work 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:46:17.217

您的操作按钮是否发送事件？在选择器名称之后包含“：”也期望发送一个对象。

# php - 就jQuery ajax调用而言，php echo和return之间的区别

> ID：10107144
> 
> 赞同：19
> 
> 时间：2012-04-11T13:42:13.347
> 
> 标签：php, jquery, ajax, return, echo

我无法让 jQuery Ajax 调用的成功函数正常工作，有人向我指出原因是我的 PHP 函数在我应该使用 echo $result 时使用了 return $result。

将 Ajax 调用的 PHP 函数从“return $result”更改为“echo $result”解决了这个问题，但为什么呢？关于 PHP 脚本中两者（返回和回显）之间的区别有很多解释，但是当将该值发送到 Ajax 调用时它们有何不同？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-11T13:45:09.890

好吧，ajax 调用从服务器读取响应，并且该响应必须呈现为某种类型的可读数据，例如`application/json`or `text/html`。

为了写入该数据，您需要`echo`使用 PHP 从服务器中写入该数据。

return 语句不写入数据，它只是在服务器级别返回。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-11T13:44:05.580

Ajax 调用使用 HTTP 请求的响应。PHP 脚本不会通过返回来生成输出，而是通过回显。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-11T13:48:51.793

Ajax 调用以与我们相同的方式查看数据，它将数据作为字符串读取。它基本上是访问另一个网页并“接收”结果。PHP 的“返回”仅返回服务器上的值。您需要实际输出数据，以便在进行 Ajax 调用时，它正在查看的页面实际上已写出数据。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-11T13:48:20.057

该`echo`命令将数据输出到标准输出，这是在 Web 浏览器应用程序中，即请求数据的客户端。在 CLI 中，这会在控制台上打印数据。命令以一个值退出函数，`return`但不打印任何内容。

如果你想在**PHP 函数**之间进行通信，你必须使用`return`. 但是如果你想**输出**一些数据，你必须使用`echo`.

# c# - Web 服务不调用

> ID：10107147
> 
> 赞同：0
> 
> 时间：2012-04-11T13:42:22.540
> 
> 标签：c#, asp.net, web-services, visual-studio-2008

我已经使用 godaddy 在服务器上发布了我的网络服务。我可以从服务器访问我的 web 服务页面。但问题是当我调用 web 服务时，它给了我错误 404，找不到页面。数据库连接也是正确的。

可能是什么问题？

等待回复..

提前致谢。

# sql - 如何将其重写为嵌套查询？

> ID：10107150
> 
> 赞同：1
> 
> 时间：2012-04-11T13:42:30.063
> 
> 标签：sql, sql-server, sql-server-2008-r2

我被告知用没有连接的嵌套查询重写以下查询以获得更好的性能。这是真的吗？如果是这样，如何重写它？

```
SELECT distinct A.Company_Name,C.Outlet_Name,
       C.Outlet_FCE_ID,D.Usergroup_Name
FROM   company A, PURCHASE_INVOICE B, 
       Outlet C, User_Group D,CT_USER E
WHERE A.Company_ID = B.Company_ID AND B.Outlet_ID  = C.Outlet_ID 
  AND B.Company_ID = C.Company_ID AND B.Username   = E.Username 
  AND E.Usergroup_ID=D.Usergroup_ID 
```

这是表结构。

![在此处输入图像描述](../Images/a3eb9673d6a8c7b23fa37971985fd879.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:32:17.503

优化器应该可以做到这一点，但您可能希望将原始查询的性能与此进行比较：

```
select distinct 
    c.company_name, 
    o.outlet_name, 
    o.outlet_fce_id, 
    ug.usergroup_name
from company c 
    inner join (select distinct company_id, outlet_id, username from purchase_invoice) i on c.company_id=i.company_id
    inner join outlet o 
        on  i.outlet_id  = o.outlet_id
        and i.company_id = o.company_id
    inner join ot_user u     on b.username     = e.username
    inner join user_group ug on u.usergroup_id = d.usergroup_id 
```

purschases 表上的不同可以消除一些工作，但我怀疑是否会有那么多骗子。

更有帮助的是`purchase_invoice (username, outlet_id, company_id)`. 这可以加快速度，因为它将是表上的[覆盖索引](http://www.sql-server-performance.com/2007/covering-indexes/)。连接只需要查看索引并且可以跳过读取实际表。如果桌子很宽，这会有所帮助。

还要注意索引中列的顺序。我猜它`ct_user`也有很多行，并且它在`Username`. 这样索引和`ct_user`将按用户名排序，允许[合并连接](http://blog.sqlauthority.com/2007/04/28/sql-server-explanation-sql-server-merge-join/)以连接两个大表。

还请为您的表使用连接语法和有意义的别名，例如 c fr company 和 ug 用于 user_group。这对数据库无关紧要，但它无疑可以帮助人们尝试阅读您的代码。此外，所有大写字母看起来就像你一直在尖叫，但也许这只是我 :-)

GJ

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:08:36.640

让我回答我自己的问题。我不喜欢这样，但我们走吧......

```
 SELECT  distinct
        ( SELECT    Company_Name
          FROM      dbo.COMPANY
          WHERE     Company_ID = p.Company_ID
        ) AS 'CompanyName' ,
        ( SELECT    Outlet_Name
          FROM      dbo.OUTLET
          WHERE     Company_ID = p.Company_ID
                    AND Outlet_ID = p.Outlet_ID
        ) AS 'OutletName' ,
        ( SELECT    Outlet_FCE_ID
          FROM      dbo.OUTLET
          WHERE     Company_ID = p.Company_ID
                    AND Outlet_ID = p.Outlet_ID
        ) 'OutletFCEID' ,
        ( SELECT    Usergroup_Name
          FROM      dbo.USER_GROUP
          WHERE     Usergroup_ID IN ( SELECT    Usergroup_ID
                                      FROM      CT_USER
                                      WHERE     Username = p.UserName )
        ) 'UsergroupName'
FROM    dbo.PURCHASE_INVOICE p 
```

# ruby-on-rails - Rails - 如何通过列表操作中的表单更新多个记录？

> ID：10107151
> 
> 赞同：0
> 
> 时间：2012-04-11T13:42:33.413
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我正在尝试更新模型中多个记录的一个字段，Lead。每个潜在客户都显示在一个表格行中，并且为多行修改的字段是“选定的”，它是一个布尔值，存储为 tinyint 1 或 0，true 或 false。

**引导控制器.rb**

```
 def list
    @leads = Lead.where({:store_number => session[:store_number]}).order("selected DESC")
    @targeted_leads = Lead.where(:store_number => session[:store_number], :selected => true)
  end

  def update_multiple
    @leads = Lead.find(params[:lead_ids])
    @leads.update(params[:lead_ids])
    redirect_to(:action => 'list')
  end 
```

**list.html.erb**

```
<%= form_tag update_multiple_leads_path, :method => :put do %>
<table>
  <thead>
    <tr>
      <th>Lead Name</th>
      <th>Selected Leads</th>
    </tr>
  </thead>
  <tbody>
  <% for lead in @leads %>
    <tr>
        </td>
      <td><%= lead.company_name %></td>
      <td>
        <%= fields_for("lead_ids[]", lead) do |f| %>
          <%= f.check_box("selected") %>
        <% end %>
      </td>
    </tr>
  <% end %>
  </tbody>
</table>
<%= submit_tag('Save Targeted Leads', :class => "btn") %>
<% end %> 
```

现在，我希望这个表单做的是传递所有潜在客户，如果选中，则将该记录的“选定”字段更新为 1，如果未选中，则将该字段更新为 0。

当它通过时，以下是 update_multiple 操作的结果：

```
ArgumentError in LeadsController#update_multiple

Unknown key: 6
Rails.root: (my/rails/root)

Application Trace | Framework Trace | Full Trace
app/controllers/leads_controller.rb:73:in `update_multiple'
Request

Parameters:

{"commit"=>"Save Targeted Leads",
 "lead_ids"=>{"6"=>{"selected"=>"1"},
 "1"=>{"selected"=>"0"},
 "3"=>{"selected"=>"0"}},
 "authenticity_token"=>"ALYtIkJNsAANsHXaAvgeb84G9Ms7OPSkyFO6jkM19yU=",
 "_method"=>"put",
 "utf8"=>"\342\234\223"} 
```

仅供参考：（第 73 行在我的控制器中引用了这一行：）`@leads = Lead.find(params[:lead_ids])`当我看到这个时，它看起来就像我希望它传递的所有内容一样......领导模型，使用 id 6，设置为 1。现在将 id 设为 1，将 selected 设置为 0。真正让我困惑的是“未知密钥”位。我最初的想法是，它不是在寻找要修改的正确字段……例如，它知道我在寻找“6”，但是“6”呢？“6”不是键。ID 6，还是别的什么？有没有其他人解决了这个问题？预先感谢您的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:03:09.357

也许您需要传递每个密钥`#to_i`？参数均以字符串形式返回。 `#find`（可能）每个 id 都需要一个整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:04:05.953

弄清楚了！花了我几天（我对 ruby​​ 很陌生），但我有一些工作要做。这仅在这种特殊情况下有效，因为它不灵活...... Rails 可能有更好的方法来做到这一点，但对于其他陷入困境的人来说：

```
 def update_multiple
    params[:lead_ids].each do |lead|
      record = Lead.find(lead[0])
      record.update_attributes(lead[1[0]], lead[1[1]])
    end

    redirect_to(:action => 'index')
  end 
```

值得注意的是，关于之前的评论，id 作为字符串通过是无关紧要的（至少对我而言），所以不需要散列......但如果你想这样做，我在调试时写了这个。

```
the_hash = Hash[params[:lead_ids].map {|key, array| [key.to_i, array]}] 
```

然后将哈希传递给每个循环，所以......

```
the_hash.each do |lead| 
```

它手动循环遍历每个参数并根据索引进行分配。因此，对于每个 id（例如 1），它获取该 id 数组的第一个索引，并手动将其分配给同一数组的第二个索引。

同样，不是很像 Rails，而且绝对不是这样做的方法，但它确实有效。谁有更好的方法，请随时贡献。

# c# - ITrackingPoint、ITrackingSpan、SnapshotPoint、SnapshotSpan、ITextViewLine 有什么区别以及何时使用？

> ID：10107152
> 
> 赞同：7
> 
> 时间：2012-04-11T13:42:36.457
> 
> 标签：c#, .net, wpf, visual-studio-2010, vs-extensibility

我试图弄清楚如何在 IWpfTextView 中获取可见线以根据可见线放置 ViewPort 和/或文本装饰。

似乎这 4 个以某种方式参与其中，至少 Spans 是这样。为了确保我理解，Span 只是 TextView 中的一系列字符，对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T23:47:44.010

`IWpfTextView.TextViewLines`是可见线的集合。在某些情况下，第一行和最后一行可能隐藏或部分可见（但倒数第二行和倒数第二行应始终完全可见）。要获得完全可见线条的集合，您可以使用`IWpfTextView.TextViewLines.FirstVisibleLine`和`IWpfTextView.TextViewLines.LastVisibleLine`，或按 过滤集合`ITextViewLine.VisibilityState == VisibilityState.FullyVisible`。

A`Span`是一个结构，用于包装起始位置和长度，但它不包含实际文本。VS 编辑器中有多种跨度用于不同的目的，例如 a`SnapshotSpan`是 a 的跨度`ITextSnapshot`，它存储起始位置、长度和它所属的快照。

**编辑：**

对不起，我错过了标题中的问题。

A`Point`表示位置，a`Span`表示范围。大多数将一个作为参数的 VS 编辑器 API 都会对另一个进行重载。

`ITrackingPoint`并且`ITrackingSpan`关闭`ITextBuffer`。“跟踪”意味着它们随着文本缓冲区的变化而偏移/增长/收缩。它们与快照无关。

`SnapshotPoint`并且`SnapshotSpan`关闭`ITextSnapshot`。它们被绑定到`ITextSnapshot`并且是不可变的。

`ITextViewLine`是用于显示的格式化行。通常您不需要更改它，只需从中获取视觉信息，例如`Height`或`VisibilityState`。

# user-interface - 防止按钮单击的操作

> ID：10107162
> 
> 赞同：0
> 
> 时间：2012-04-11T13:43:04.147
> 
> 标签：user-interface

我正在开发一个 GUI。当用户按下“加载”时，会发生一系列需要 2-3 分钟的处理。在“加载”处理完成后，用户单击“执行”。

问题是当用户在“加载”处理完成之前单击“执行”时，我的程序崩溃了。目前这是可能的，因为“加载”仍在处理中，因此无法阻止点击“执行”。

请建议一种友好的用户方法，以防止用户在“加载”完成之前按“执行”。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:50:39.080

在不了解您的 UI 环境的情况下很难给出明确的答案。简单的解决方案是禁用或隐藏执行按钮，直到加载过程完成。

虽然我首选的解决方案是让执行过程检查数据是否已加载，如果没有执行加载，然后再继续它自己的事情。

如果加载是一个漫长的资源密集型过程，那么您总是可以要求用户确认 - 但如果他们要求“执行”并且数据尚未加载，那么加载它是正确的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:51:12.573

您可以在 type="button" 的输入上使用 disabled 属性来启用或禁用按钮。当您希望禁用按钮时，使用 jQuery 添加 disabled 属性。

```
$("#Execute").attr( 'disabled', 'disabled' ); 
```

并删除它

```
$("#Execute").removeAttr( 'disabled'); 
```

当您希望启用它时。例如，在您的加载事件完成后。

# grails - Grails - 如何从 WAR 中删除 log4j

> ID：10107164
> 
> 赞同：4
> 
> 时间：2012-04-11T13:43:06.663
> 
> 标签：grails, ivy

我想从 Grails 构建的 WAR 中删除 log4j。我的 jboss 已经部署了它。我在尝试：

```
grails.project.dependency.resolution = {
    ...
    dependencies {
        provided 'log4j:log4j:1.2.16'
    }
} 
```

但它不起作用。在构建之后，WAR 仍然包含 log4j-1.2.16.jar。该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T13:46:43.747

把它放在**BuildConfig.groovy**的底部：

```
grails.war.resources = { stagingDir ->
   delete(file:"${stagingDir}/WEB-INF/lib/log4j-1.2.16.jar")
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T08:04:47.970

每当我进行 grails 战争时，让运行 grails doc 以及将 grail log4j 插件包含到我的战争中都是浪费。前者有错误，也需要大量时间来减缓战争的产生。后者导致运行时异常，要求将 log4j.xml 放入 grails-app/conf。显然生产战争没有 grails-app/conf 目录。它也不存在于我从中运行启动的 tomcat bin 中。有没有办法在战争期间避免“grails doc”并为 log4j.xml 复制一个冗余文件以避免该异常？我的 grails 版本是 1.3.4

# facebook-graph-api - 使用 selenium 和 phpunit 测试 facebook 帖子

> ID：10107168
> 
> 赞同：1
> 
> 时间：2012-04-11T13:43:20.943
> 
> 标签：facebook-graph-api, selenium, phpunit

我有一个脚本，可以在用户操作完成后发布到用户 Facebook。因此，我想自动化测试/查看此帖子的过程是否出现在用户的墙上（并且可能在通过拆解功能看到它时将其删除）

测试自动化是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:56:05.173

如果用户授予`publish_stream`您的应用程序权限，这是可能的，一旦您获得权限，您就可以使用[application](https://developers.facebook.com/docs/authentication/applications/)`publish_stream`发布到用户的提要。[`access_token`](https://developers.facebook.com/docs/authentication/applications/)

您的应用程序发布的提要故事也可以通过 Graph API 删除（实际上应用程序只能删除它创建的故事）...

# c# - 添加数据库：操作系统错误，进程无法访问正在被另一个进程使用的文件 b/c）

> ID：10107175
> 
> 赞同：0
> 
> 时间：2012-04-11T13:43:39.403
> 
> 标签：c#, database-connection, sql-server-2008-r2

我在 C# Windows 应用程序中添加 SQL 数据库文件时遇到问题。

我正在使用 Visual Studios 2010 Express 中的实体数据模型向导连接到以下 MS SQL 数据库文件：C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\School.mdf

当我单击“确定”进行连接时，出现以下错误：操作系统错误 32（进程无法访问文件 b/c，它正被另一个进程使用）。

我正在运行 MSSQL Server 2008 R2（不是 Express），并将连接字符串更改为“Data Source = 。” 和“用户实例 = False”。（MSSQL Server 2008 不支持用户实例。）

我可以在 SQL Server Management Studio 中打开 School.mdf 数据库，但是当我尝试将 sp_attach_db School.mdf 掌握时，我得到了同样的错误。

将 SQL Server 更改为在本地系统下运行并不能解决问题。对数据库文件有完全的读/写权限。

当我尝试连接到这个数据库时，我的计算机上没有运行其他应用程序——甚至没有 SQL Server Management Studio，并且根据任务管理器，机器上只有一个 sqlservr.exe 实例运行。

提前感谢您的任何想法。-大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:13:58.937

你读过错误信息吗？显然，有人正在打开该文件，因此 SQL Server 无法访问它。

使用 Sysinternals Process Explorer 找出保持它打开的原因。

# java - 将项目动态添加到 Windows 资源管理器的上下文菜单

> ID：10107178
> 
> 赞同：1
> 
> 时间：2012-04-11T13:43:46.670
> 
> 标签：java, windows, registry, contextmenu

我想做以下事情：

当用户右键单击任何文件（在 Windows 中）时，我希望上下文菜单弹出一个特殊项目。我是用 regedit 做到的，我在网上看了一些例子，得到了这个

```
[HKEY_CLASSES_ROOT\*\shell\Do something]

[HKEY_CLASSES_ROOT\*\shell\Do something\command]
@="notepad.exe %1" 
```

可以，但是我想运行一个 java 应用程序并将所选项目的文件路径发送给它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:54:00.200

考虑运行批处理脚本文件，而不是将整个 java 命令放在 regedit 中。这可能更容易调试，因为您可以手动运行批处理文件并确保其正常工作。只需将“notepad.exe”替换为您的批处理文件即可。

您需要将传递给批处理文件的参数传递给您的 java 应用程序。以下是批处理文件中参数的快速参考：[http ://www.robvanderwoude.com/parameters.php](http://www.robvanderwoude.com/parameters.php)

# ocr - 正方体 OCR 和 gImageReader 不起作用

> ID：10107186
> 
> 赞同：1
> 
> 时间：2012-04-11T13:44:06.097
> 
> 标签：ocr, tesseract, image-recognition

我是 C# .Net 开发人员，一个朋友让我制作一个程序，将 pdf 手写数字转换为 excel 文件。

嗯，有一个他正在手动翻译的文件类型的例子。

![[1]：[http](http://s19.postimage.org/pt56qyfeb/example.jpg) ://s19.postimage.org/pt56qyfeb/example.jpg “示例”][1]

我尝试使用 gImageReader 但使用英文单词（因为没有数字选项），即使我将 pdf 转到正确的位置并选择只有数字的地方，输出也是完全错误的。

如果有人知道实现我目标的更好方法，请告诉我。

此致

# javascript - 向 SerializeArray 输出添加新行

> ID：10107192
> 
> 赞同：0
> 
> 时间：2012-04-11T13:44:17.390
> 
> 标签：javascript, newline, serializearray

我正在尝试创建一个表单，该表单返回所选（完成）项目的总和和所选项目的列表。我的项目值的格式如下：
*input name="Door" type="radio" value="260~~Stable Door"*
我正在使用 serializeArray 拆分所选列表输出的项目值。它可以工作，但我想在每个项目之后添加一个换行符，而不是：

*你选择了木头、马厩门、松木地板*

我会得到：

*您选择了木质马厩门松木地板*

在将值附加到数组时，我尝试添加 +"\n" 甚至 +"\r\n" ，但输出仍保留在一行上。

我将代码基于下面的 W3C 学校代码，包括我试图放置 \n 的位置。要么这是不可能的，因为它是一个数组，要么我错过了一些明显的东西。很抱歉问了这样一个基本问题：/

```
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  $("button").click(function(){
    x=$("form").serializeArray();
    $.each(x, function(i, field){
      $("#results").append(field.name + ":" + field.value + " \n");
    });
  });
});
</script>
</head>
<body>
<form action="">
First name: <input type="text" name="FirstName" value="Mickey" /><br />
Last name: <input type="text" name="LastName" value="Mouse" /><br />
</form>

<button>Serialize form values</button>
<div id="results"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:49:51.220

你不能只使用BR标签吗？

```
$(document).ready(function(){
  $("button").click(function(){
    x=$("form").serializeArray();
    $.each(x, function(i, field){
      $("#results").append(field.name + ":" + field.value + " <br />");
    });
  });
});​ 
```

[JSFiddle](http://jsfiddle.net/CQaZA/)

# solr - solr fieldType 定义，用于处理多部分词字段值

> ID：10107195
> 
> 赞同：3
> 
> 时间：2012-04-11T13:44:31.707
> 
> 标签：solr

我的应用程序中有 solr，我需要涵盖以下场景：我有一个包含三个值的字段：咖啡店甜甜圈店体育用品店

当我搜索“咖啡店”时，我得到所有具有上述任何值的文件的问题。原因是所有人都有“商店”。我正在尝试更改此搜索行为，以便当我搜索“咖啡店”时，我只获得具有“咖啡店”的文档，而当我搜索“商店”时，我会获得具有上述所有值的文档。下面是我的 fieldType 定义

```
 <fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="index">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
        <filter class="solr.ReversedWildcardFilterFactory"/>
        <filter class="solr.WordDelimiterFilterFactory"
                splitOnNumerics="0"
                stemEnglishPossessive="1"
                splitOnCaseChange="1"
                generateWordParts="1"
                generateNumberParts="1"
                catenateWords="1"
                catenateNumbers="1"
                catenateAll="0"
                preserveOriginal="1"                
                protected="protwords.txt"/>
        <filter class="solr.StopFilterFactory" 
                ignoreCase="true" 
                words="stopwords.txt" 
                enablePositionIncrements="true" /> 
        <filter class="solr.HunspellStemFilterFactory"
                dictionary="en_US.dic"
                affix="en_US.aff"
                ignoreCase="true" />       
      </analyzer>
      <analyzer type="query">        
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <charFilter class="solr.HTMLStripCharFilterFactory"/>        
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.TrimFilterFactory"/>
        <filter class="solr.WordDelimiterFilterFactory"
                splitOnNumerics="0"
                stemEnglishPossessive="1"
                splitOnCaseChange="1"
                generateWordParts="1"
                generateNumberParts="1"
                catenateWords="0"
                catenateNumbers="0"
                catenateAll="0"
                preserveOriginal="1"                
                protected="protwords.txt"/>
        <filter class="solr.StopFilterFactory" 
                ignoreCase="true" 
                words="stopwords.txt" 
                enablePositionIncrements="true" />
        <filter class="solr.HunspellStemFilterFactory"
                dictionary="en_US.dic"
                affix="en_US.aff"
                ignoreCase="true" />
      </analyzer>
    </fieldType> 
```

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:33:13.507

似乎我有同样的需求，搜索`sac à main`（`handbag`法语）返回内容 only `sac`，这是我不想要的。但我想搜索`sac`以返回内容`sac à main`。

这是我在网上研究了几个小时后所做的：

在`schema.xml`中，至少有这些参数：

```
<fieldType name="text" class="solr.TextField" indexed="true" stored="true" multiValued="true" positionIncrementGap="100">
  <analyzer type="index">
    …
    <filter class="solr.SynonymFilterFactory"
      synonyms="fr_expressions.txt"
      ignoreCase="true"
      expand="true" />
    …
  </analyzer>
  <analyzer type="query">
    …
    <filter class="solr.SynonymFilterFactory"
      synonyms="fr_expressions.txt"
      ignoreCase="true"
      expand="false" />
    …
  </analyzer>
</fieldType> 
```

在`fr_expressions.txt`, 像这样的行：

```
sac_a_main,sac a main,sacs a main 
```

`index`分析器将用所有这些值替换索引文本中的 3 个值中的任何一个。

分析器会将查询中的 3 个值中的`query`任何一个替换为`sac_a_main`.

然后搜索`sac à main`将只找到具有 的内容`sac_a_main`，但搜索`sac`也会找到这些内容以及其他内容。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:13:49.160

在 schema.xml 中有一个默认运算符，默认为 OR。但是，据说不要依赖它（尽管我会将其更改为 AND）。

假设您在“描述”字段中进行搜索，您可以执行以下操作：

**描述：“咖啡店”** <<< 这是一个完全匹配（忽略大小写），按确切顺序（我认为没有分隔）
**描述：（咖啡店）** <<< 这将匹配包含两个单词的描述，在任何订单（我认为有任何距离）

# java - 使用 Affine Trasform 缩放时 JPanel 不绘制

> ID：10107196
> 
> 赞同：3
> 
> 时间：2012-04-11T13:44:33.450
> 
> 标签：java, swing, scaling, paint, affinetransform

我的应用程序布局类似于：自定义 JFrame（仅处理 gui 的创建），其中包含一个标准 JPanel，其中包含一个自定义 JPanel

在名为 MinimapPanel 的自定义 JPanel 中，我更改了绘制方法：

```
 //in a constructor:
    scaledTransform = new AffineTransform(); = new AffineTransform();
    scaledTransform = new AffineTransform();
    scaledTransform.scale(scaleAmount, scaleAmount);
    //...
@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);

    Graphics2D g2d = (Graphics2D) g;
    g2d.setTransform(scaledTransform);
    mapDrawer.paintMinimap(g, seatMap, miniViewHandler);//it just calls a bunch of fillRect

    if (viewRect != null) {
        g.setColor(new Color(255, 0, 0));
        int x = viewRect.x;
        int y = viewRect.y;
        g.drawRect(x, y, Math.abs(viewRect.width), Math.abs(viewRect.height));
    }
    g2d.setTransform(plainTransform);
} 
```

**如果我不应用 trasform，或者缩放比例为 1.0（无），一切正常，但如果我缩放，每次 JFrame 重新绘制时，MinimapPanel 都保持空白。**

关于我可能做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T13:52:17.877

不要使用清晰的变换。以前的组件添加自己的转换，例如`translate()`到子位置等。而是像这样调用代码

```
AffineTransform old=g2d.getTransform();
//do your changes here
g2d.scale(scaleAmount, scaleAmount);
//paint
g2d.setTransform(old); 
```

# python - 传递参数后如何在模板中的元素中创建id？

> ID：10107197
> 
> 赞同：1
> 
> 时间：2012-04-11T13:44:44.300
> 
> 标签：python, html, django, django-templates

传递参数后如何在模板中的元素中创建 id ？我尝试过类似的东西

```
<button id="p_"+{{key}} >TEST</button> 
```

但在呈现的 HTML 中，id 只是**p_**。有人可以告诉我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T13:46:54.190

`<button id="p_{{key}}">TEST</button>`

你需要钥匙在引号内

我假设你`+`用来连接字符串。我不相信 html 支持任何这样的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:48:08.103

```
<button id="p_{{key}}">TEST</button> 
```

# javascript - 创建对象时出现Javascript“不是构造函数”异常

> ID：10107198
> 
> 赞同：127
> 
> 时间：2012-04-11T13:44:50.617
> 
> 标签：javascript, object, constructor, typeerror

我正在定义一个这样的对象：

```
function Project(Attributes, ProjectWidth, ProjectHeight) {
    this.ProjectHeight = ProjectHeight;
    this.ProjectWidth = ProjectWidth;
    this.ProjectScale = this.GetProjectScale();
    this.Attributes = Attributes;

    this.currentLayout = '';

    this.CreateLayoutArray = function()
    {....}
} 
```

然后我尝试创建一个这样的实例：

```
var newProj = new Project(a,b,c); 
```

但是抛出了这个异常：

```
Project is not a constructor 
```

有什么问题？我用谷歌搜索了很多，但我仍然无法弄清楚我做错了什么。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-04-11T13:49:59.953

问题中发布的代码无法生成该错误，因为`Project`它不是用户定义的函数/有效的构造函数。

```
function x(a,b,c){}
new x(1,2,3);               // produces no errors 
```

你可能做过这样的事情：

```
function Project(a,b,c) {}
Project = {};               // or possibly   Project = new Project
new Project(1,2,3);         // -> TypeError: Project is not a constructor 
```

变量声明 using`var`被[提升](https://en.wikipedia.org/wiki/JavaScript_syntax#hoisting)，因此总是在其余代码之前评估。因此，这也可能导致问题：

```
function Project(){}
function localTest() {
    new Project(1,2,3); // `Project` points to the local variable,
                        // not the global constructor!

   //...some noise, causing you to forget that the `Project` constructor was used
    var Project = 1;    // Evaluated first
} 
```

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2016-05-04T20:40:26.860

造成这种情况的另一个原因可能是 ES2015[箭头函数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions)。 **它们不能用作构造函数**。

```
const f = () => {};
new f(); // This throws "f is not a constructor" 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2016-12-23T11:32:16.427

对我来说，这是ES6之间`import`的差异。`require`

例如

**处理器.js**

```
 class Processor {

    }

    export default Processor 
```

**index.js**

```
const Processor = require('./processor');
const processor = new Processor() //fails with the error

import Processor from './processor'
const processor = new Processor() // succeed 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2012-04-11T13:51:48.767

我也四处搜索并找到了这个解决方案：

您在`Project`某处有一个不是函数的变量。然后`new`运营商会抱怨它。`console.log(Project)`在您将其用作构造器的地方尝试一下，您会找到它。

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2016-10-18T17:43:53.287

对于我的项目，问题原来是由 require() 调用创建的循环引用：

```
y.js:
var x = require("./x.js");
var y = function() { console.log("result is " + x(); }
module.exports = y;

x.js:
var y = require("./y.js");
var my_y = new y(); // <- TypeError: y is not a constructor
var x = function() { console.log("result is " + my_y; }
module.exports = x; 
```

原因是当它试图初始化 y 时，它在依赖系统中创建了一个临时的“y”对象（不是类，对象！），它在某种程度上还不是构造函数。然后，当 x.js 完成定义后，它可以继续制作 ya 构造函数。只是，x.js 在尝试使用非构造函数 y 时出现错误。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2019-12-04T16:43:36.357

我在一个文件中有一个类，我要导入到测试文件中：

```
//Vec.js
class Vec {

}

module.exports.Vec = Vec; 
```

改变

```
//Vec.test.js
const Vec = require('./Vec');
const myVec = new Vec(); //TypeError: Vec is not a constructor 
```

到

```
//Vec.test.js
const {Vec} = require('./Vec');
const myVec = new Vec(); //Succeeds! 
```

为我解决了这个错误。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2016-07-31T14:55:15.997

在我的例子中，我使用原型名称作为对象名称。例如

```
function proto1()
{}

var proto1 = new proto1(); 
```

这是一个愚蠢的错误，但可能对像我这样的人有帮助；）

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-03-03T20:12:27.837

有时这只是您导出和导入它的方式。对于此错误消息，可能是缺少**默认**关键字。

```
export default SampleClass {} 
```

在哪里实例化它：

```
import SampleClass from 'path/to/class';
let sampleClass = new SampleClass(); 
```

选项 2，带花括号：

```
export SampleClass {}
import { SampleClass } from 'path/to/class';
let sampleClass = new SampleClass(); 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-07-15T15:07:37.433

要添加到@wprl 的答案，ES6 对象方法简写，如箭头函数，也不能用作构造函数。

```
const o = {
  a: () => {},
  b() {},
  c: function () {}
};

const { a, b, c } = o;

new a(); // throws "a is not a constructor"
new b(); // throws "b is not a constructor"
new c(); // works 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2018-06-26T15:03:13.910

汽车.js

```
class Car {
 getName() {return 'car'};
}
export default Car; 
```

测试文件.js

```
const object = require('./Car.js');
const instance = new object(); 
```

错误：TypeError：实例不是构造函数

打印对象的内容

```
object = {default: Car} 
```

将默认值附加到 require 函数，它将作为构造函数工作

```
const object = require('object-fit-images').default;
const instance = new object();
instance.getName(); 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-10-27T08:36:17.617

我只想补充一点，如果从不同的文件调用构造函数，那么就像忘记导出构造函数一样简单

```
module.exports = NAME_OF_CONSTRUCTOR 
```

也会导致“不是构造函数”异常。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-04-11T05:34:50.413

在尝试将 BS5ModalJS 与 webpack 结合使用时，我遇到了类似的错误，这意味着我正在尝试导入 js 文件。

因为提供的单个 .js 文件设计为通过脚本标签使用，所以我花了一段时间才意识到为了避免“BSModal 不是构造函数”错误，我不得不进入他们的代码并添加：

```
export {BSModal} 
```

然后我就可以使用

```
import { BSModal } from './../thirdparty/BS5ModalJS/BS5Modal.js'; 
```

做

让 myModal `enter code here`= new BSModal(...)

没有得到那个错误。

因此，如果您使用的是 webpack，也许要确保将类和函数导出（因此可用）给调用者。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-03-03T02:24:03.553

就我而言，我忘记了函数定义末尾的打开和关闭括号，该函数将我的所有代码包装在导出的模块中。即我有：

```
(function () {
  'use strict';

  module.exports.MyClass = class{
  ...
); 
```

代替：

```
(function () {
  'use strict';

  module.exports.MyClass = class{
  ...
)(); 
```

编译器没有抱怨，但是导入模块中的 require 语句没有设置它被分配的变量，所以在你尝试构造它时它是未定义的，它会给出`TypeError: MyClass is not a constructor`错误。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-09-22T20:29:18.160

我有一个类似的错误，我的问题是变量名称和构造函数名称的名称和大小写相同，这不起作用，因为 javascript 将预期的构造函数解释为新创建的变量。

换句话说：

```
function project(name){
    this.name = name;
}

//elsewhere...

//this is no good! name/case are identical so javascript barfs. 
let project = new project('My Project'); 
```

不过，只需更改大小写或变量名称即可解决问题：

```
//with a capital 'P'
function Project(name){
    this.name = name;
}

//elsewhere...

//works! class name/case is dissimilar to variable name
let project = new Project('My Project'); 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-12-26T17:19:50.640

发生这种情况是因为您必须在代码中使用了另一个名为“project”的变量。就像是 `var project = {}`

为了使代码工作，更改如下：

`var project = {}`进入`var project1 = {}`

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-12-08T02:32:06.107

为了添加我在遇到这个问题时发现的解决方案，我包含了另一个文件中的一个类，而我试图在其中实例化它的文件给出了“不是构造函数”错误。最终问题是在定义类之前另一个文件中有几个未使用的要求。我不知道他们为什么把它弄坏了，但是把它们去掉就修复了。始终确保检查您正在考虑的步骤之间是否隐藏了某些东西。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2022-01-06T20:46:00.677

在浏览中（假设您的应用程序正在运行），检查、获取并确保加载了构造函数的 javascript 文件。

# java - JMenuBar 项目消失在面板后面

> ID：10107203
> 
> 赞同：1
> 
> 时间：2012-04-11T13:45:13.410
> 
> 标签：java, swing, netbeans

我有一个带有 4 个项目的简单 JMenuBar 和一个带有一些文本字段微调器和组合框的面板。

现在，如果我在面板中使用微调器或其他一些组件，Jmenu 项目似乎在面板后面打开，我看不到它，但我仍然可以使用它。我正在使用 netBeans GUI 工具。我必须始终将 JMenuBar 设置在顶部还是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:50:44.553

```
the Jmenu items seem to open behind the panel 
```

[您在将 AWT 与 Swing JComponents 混合时](http://java.sun.com/products/jfc/tsc/articles/mixing/)遇到问题，最好是更改

```
java.awt.Panel myPanel = new Panel 
```

到

```
java.swing.JPanel myPanel = new JPanel 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:53:57.507

默认情况下，JMenu 应位于顶部。您应该将内容放在某些面板中，而不是将其直接放入 JFrame。例如，您可以使用边框布局并将大部分布局放在位于 CENTER 的 JPanel 中，然后在 SOUTH JPanel 上添加一些按钮。这里的常量是 BorderLayout 常量。没有您的代码，很难知道您做错了什么。

# html - 具有缓存处理的 HTML5 样板

> ID：10107204
> 
> 赞同：-1
> 
> 时间：2012-04-11T13:45:14.540
> 
> 标签：html, html5boilerplate

我对 html5 Boilerplate 中使用的缓存处理有很大的疑问。

我为标题到期日期设置了 2 年缓存，1 年后我从服务器中删除了文件。但是缓存仍然存在一年多。样板如何处理这种情况。？. 如果这是正常情况，我们可以使用 ?v=2 到 ?v=1 。但在这种情况下，我在设置缓存后从服务器中删除了文件。所以任何想法来解决这个问题。！
这行得通？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:42:37.323

将 get 变量附加到您要上传的新站点。如果您更改它，浏览器将无法识别此 url，因此它不会使用任何缓存文件。这是 html5 样板中使用的解决方案。使用 .htaccess 文件。要了解更多信息，请参考 html5boilerplate.com。youtube 视频也可用。希望这对您有所帮助。！

# android - android从用户提供的输入中不正确的减法

> ID：10107208
> 
> 赞同：0
> 
> 时间：2012-04-11T13:45:32.077
> 
> 标签：android, double, user-input

**让我们从一点数学开始。**

目标体重 = 8.4 当前体重 = 9.1 当前体重 - 目标体重 = 0.7（你会这么认为）

```
if( obj != null && obj.targetWeight != null && obj.currentWeight != null) {
            try {
                double i = Double.parseDouble( obj.targetWeight );
                double o = Double.parseDouble( obj.currentWeight);
                //do something if target weight is a number
                if(i>o){
                    outputEditText.setText ("Congratulations. you have passed your target weight");
                }
                else if (i<o){
                    outputEditText.setText(
                            "Your Target Weight is " + obj.targetWeight +obj.unit + "\n" + 
                                    "Your Current Weight is " + obj.currentWeight + "\n" +
                                    "Difference is " + (o - i));
                } 
```

根据上述8.4-9.1 = 0.6999999999999993

目标权重和当前权重都是用户提供的输入，被解析为双精度。

有谁知道我做错了什么

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T13:47:06.253

你没有做错什么。欢迎来到浮点运算的美妙世界！许多看起来不错的数字，甚至对我们来说，实际上都不能在您的计算机使用的二进制数字系统中准确表示。

您当前问题的答案是*格式化*。您永远不能简单地打印原始双精度数字；例如，您*总是*必须使用`DecimalFormat`适当的小数位数。您的数字（例如）四舍五入到小数点后五位，将打印为 0.7 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:50:09.040

并非所有小数（即双精度数）都可以以 2 为底完美表示。因此，您通常会进行四舍五入，从而得到您刚刚看到的结果。.6999999... 的输出是计算机使用输入的近似基数 2 表示的减法的最佳近似值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:26:58.343

谢谢大家的回答。

事实证明，机器的世界与我的大脑想象的不同。

这是我为解决我的问题所做的。

```
DecimalFormat df = new DecimalFormat("####.##"); 

                    String b = df.format(o-i); 
```

# security - Zend 和 Yii 框架应用程序之间的单点登录

> ID：10107228
> 
> 赞同：2
> 
> 时间：2012-04-11T13:46:36.963
> 
> 标签：security, zend-framework, yii, single-sign-on, cas

我们有 3 个网站在 Yii 和 Zend 框架上运行，我们希望实现某种形式的集中式身份验证系统（类似于 Google 所做的）。我以前从来没有这样做过。我想知道是否有人知道任何可能有帮助的开源解决方案。[我之前从http://www.jasig.org](http://www.jasig.org)偶然发现了 CAS ，但我不确定它是否是最好的解决方案。

我将不胜感激对此的任何见解（可能包括安全风险和最佳实践）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:09:24.293

OAuth / OpenID 应该为您解决问题。

[http://oauth.net/documentation/getting-started/](http://oauth.net/documentation/getting-started/)

# javascript - 在这种情况下检测 window.load 的有效方法

> ID：10107229
> 
> 赞同：1
> 
> 时间：2012-04-11T13:46:40.920
> 
> 标签：javascript, jquery

我的要求是，在所有页面脚本执行完成后，我必须执行一个脚本。我正在使用下面的代码来做同样的事情

```
$(window).load(function ()
{
  var j = setTimeout (function ()
  {
     alert("All page scripts have been executed and DOM is ready.");
     // And here the script will work 
        to update the DOM changes made by the pagescripts.
  },100); // Here execution time cant be less than 100 all the time, right?
}); 
```

但问题是，在上述情况下，我使用的时间为 100。但有时页面加载时间为 101 毫秒。在这种情况下，脚本无法更新更改。让我们看一个例子

有一个页面脚本会在 DOM 准备好时将图像添加到 DOM。如果我使用

```
$(document).ready() 
```

该脚本未能检测到图像，因为图像尚未添加到 DOM。

如果您需要对问题进行更多说明，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:52:30.257

如果问题是您需要预加载的图像。
尝试使用[这个扩展](http://ditio.net/2010/02/14/jquery-preload-images-tutorial-and-example/)。

# comments - 为什么评论编辑器崩溃了？

> ID：10107245
> 
> 赞同：1
> 
> 时间：2012-04-11T13:47:16.567
> 
> 标签：comments, facebook-comments

我在评论审核工具 (https://developers.facebook.com/tools/comments) 中设置了始终显示评论编辑器的设置。但是当有几个评论时它不起作用。它只显示一个链接，上面写着“添加评论”。

# php - 开始使用 PHP 开发 Facebook 应用程序

> ID：10107247
> 
> 赞同：0
> 
> 时间：2012-04-11T13:47:19.480
> 
> 标签：php, facebook, facebook-apps

我想开始使用 PHP 进行 facebook 应用程序开发。PHP 没问题，我已经使用它很多年了。网上有很多教程，其中许多已经过时，因为 facebook API 发生了变化，所以如果你有一个好的教程的链接，那么如果你能分享它会很好。

就 facebook 应用程序而言，是否可以在 PHP 中设计一个完全独立的应用程序，然后将 facebook 集成到其中。另外，是否有任何 PHP 框架被推荐用于 facebook 应用程序开发的开发

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:54:25.793

尝试使用[Facebook PHP SDK](https://developers.facebook.com/docs/reference/php/)。

最好遵循他们的标准和代码以尽快迁移，并且您不会遇到有关过时代码的任何问题。

[您可以从Github 上的官方存储库](https://github.com/facebook/facebook-php-sdk)中获取 SDK 本身和一些示例。

# java - java移动球穿过

> ID：10107248
> 
> 赞同：-2
> 
> 时间：2012-04-11T13:47:28.003
> 
> 标签：java, graphics

我正在做一个简单的项目，但我无法实现如何将可绘制对象作为（a）交叉移动。我的意思是，例如，当我同时按下向上和向左箭头键时，我希望我的可绘制对象准确地向西北方向移动。但是，通过在方法中使用简单的 if 语句`KeyListener`，我无法实现它。有没有特殊的方法或额外的包装？这是我的代码：

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.geom.Ellipse2D;
import javax.swing.*;
import javax.swing.JPanel;

public class Top extends JPanel implements ActionListener, KeyListener {

/**
 * 
 */
private static final long serialVersionUID = 1L;
Timer t = new Timer(5, this);
int xR = 0;int yR = 0; int zR = 0;
 double x = 0, y = 0, xVel = 0, yVel = 0, width = 0, height = 0;

public Top() {
    t.start();
    setBackground(Color.black);
    addKeyListener(this);
    setFocusable(true);
}
public void actionPerformed(ActionEvent e) {
    repaint();
    x+=xVel;
    y+=yVel;
}
public void paintComponent(Graphics g)  {
    super.paintComponent(g);
    Graphics2D g2d = (Graphics2D)g;

    g2d.setPaint(Color.blue);
    g2d.fill(new Ellipse2D.Double(this.x, this.y, 50, 50));
}
@Override
public void keyTyped(KeyEvent e) {
    // TODO Auto-generated method stub
}
@Override
public void keyPressed(KeyEvent e) {
    int keyCode = e.getKeyCode();

    if(keyCode == KeyEvent.VK_DOWN) {
        down();
    }
    if(keyCode == KeyEvent.VK_UP) {
        up();
    }
    if(keyCode == KeyEvent.VK_RIGHT) {
        right();
    }
    if(keyCode == KeyEvent.VK_LEFT) {
        left();
    }
}
public void down() {
    this.yVel= 1;
    this.xVel= 0;
}
public void up() {
    this.yVel = -1;
    this.xVel = 0;
}
public void left() {
    this.xVel = -1;
    this.yVel = 0;
}
public void right() {
    this.xVel = 1;
    this.yVel = 0;
}
@Override
public void keyReleased(KeyEvent e) {
    int keyCode = e.getKeyCode();
     if(keyCode == KeyEvent.VK_DOWN || 
               keyCode == KeyEvent.VK_UP ||            
               keyCode == KeyEvent.VK_RIGHT || 
               keyCode == KeyEvent.VK_LEFT ) {
                   xVel=0;
                   yVel=0;  
    }
  }
} 
```

**此代码只能将椭圆完全左上或下移动 **

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T20:13:29.080

我会为每个方向使用布尔值，左、右、上和下。因此，当另一个键盘事件发生时，它会检查其中一个箭头键是否仍被按住。例如，如果您按下（而不释放）右箭头键，则右箭头键的布尔值将设置为 true。

这仅用于设置变量，现在用于处理对角线方向。再次，转到您的 keyPressed 方法。对于向上和向下键，格式应如下所示...

```
if (keyCode == VK.DOWN) {
   if (leftKeyHeld) {
         DownLeft(); 
   } else if (rightKeyHeld) {
         DownRight();
   } else {
         Down();
   }

} 
```

只要确保您的 keyReleased 方法，您将布尔值设置为 false，这样程序就不会认为您在不按住键时一直在按住键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:52:58.427

您需要使用 a`KeyListener`来监听键盘事件，然后根据按下的特定键在正确的位置重新绘制对象。您可能还需要，`repaint()`这`JPanel`取决于您如何实现图像。

您能否发布一些代码来显示您正在尝试做的事情，我们将尝试帮助您解决问题。首先要做的是验证它`KeyListener`是否正常工作，因此您的代码`KeyListener`可能是一个好的开始。

# ios - 如何使用 subView 模拟 inputView 行为？

> ID：10107249
> 
> 赞同：1
> 
> 时间：2012-04-11T13:47:31.713
> 
> 标签：ios, uitableview, uipickerview, inputview

我有一个带有原型单元格的 tableView。它根据所选日期加载单元格数据。我想要一个按钮（UIBarButton 或 UIButton），它显示一个与 UITextField 中的 inputView 具有相同行为的 datePicker（例如，联系人应用程序上的生日 datePicker）。

我找到了这个解决方案：[如何制作仅覆盖一半屏幕的模态日期选择器？](https://stackoverflow.com/questions/8484147/how-do-i-make-a-modal-date-picker-that-only-covers-half-the-screen)但那是为了点击 UITextField 而不是 UIButton。

有没有办法通过按钮点击显示 inputView？如果没有，我如何模拟 PickerView 的相同行为？

提前致谢，

胡利亚诺

# android - 在 Android 上使用 OpenCV 进行数字识别

> ID：10107258
> 
> 赞同：2
> 
> 时间：2012-04-11T13:47:53.767
> 
> 标签：android, opencv, image-processing, ocr

我是第一次使用 Android 和 OpenCV 开发人员，非常感谢您的帮助和一些建议。我想提取和识别手机摄像头输入的数字。

**我该如何处理？处理它的最佳方法是什么，步骤是什么？**

如果你能尽可能具体，这将对我有很大帮助。

这是如何输入图片的：

![在此处输入图像描述](../Images/1f9c96bc691d5789de327cf17a7fc8c9.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:27:33.913

我在这里和其他地方看到了一些很棒的讨论，它们可以真正帮助您实现所需的目标：

*   [如何使用 Opencv 进行 OCR 文档识别？](https://stackoverflow.com/q/7542194/176769)

*   [OpenCV 中的基本 OCR](https://web.archive.org/web/20160508124832/http://blog.damiles.com/2008/11/basic-ocr-in-opencv/)

*   [OpenCV-Python 中的简单数字识别 OCR](https://stackoverflow.com/q/9413216/176769)

*   在[带有 OpenCV 的 SuDoKu Grabber 上](https://web.archive.org/web/20150915165623/http://www.aishack.in/tutorials/sudoku-grabber-with-opencv-plot/)，检查[项目 5 识别数字](https://web.archive.org/web/20150317181458/http://www.aishack.in/tutorials/sudoku-grabber-with-opencv-recognizing-digits/)。

# vb6 - 是否可以在没有括号的情况下调用 VB 函数？

> ID：10107259
> 
> 赞同：4
> 
> 时间：2012-04-11T13:47:54.773
> 
> 标签：vb6

我正在查看 VB6 代码，我看到如下语句 -

```
 Public Sub CheckXYZ(abc As Integer)

       If abc <> pqr Then SetVars abc 
```

当我单击 SetVars 上的 go to definition 时，我被带到以下定义 -

```
 Private Sub SetVars(i As Integer) 
```

我是 VB 的新手。这在 VB 中很常见，允许在没有括号的情况下调用函数吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T14:53:49.573

正如 Ryan 所指出的，括号只能在调用将返回值的函数时使用。

我想补充的一个陷阱是，如果您在调用 Sub 时确实无意中使用了双亲，VB6 将通过值而不是通过引用传递参数。

当 Sub 接受多个参数时，这不是风险，因为这是 VB6 中的非法语法：

```
SomeFunc (arg1, arg2) 
```

但是考虑这个例子：

```
Sub AddOne(ByRef i As Integer)
  i = i + 1
End Sub

Sub Command1_Click()
  Dim i as Integer

  i = 1
  AddOne i    'i will be passed by reference and increased by 1
  Msgbox i    'Will print "2"
  AddOne (i)  'i will be passed by value, so the return value will be lost!!
  MsgBox i    'Will still print "2"!!
End Sub 
```

所以要注意你如何使用括号，一个小的改变可能会产生意想不到的效果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T10:28:03.193

这是 VB6 的一项*功能*（很高兴在 VB.NET 中取消了该功能），并且是合法的语法。

但是我不建议使用它，因为它会使代码更难阅读，并且正如@GTG 指出的那样，如果您不小心，当方法声明为 ByRef 时会强制执行 ByVal。

[（请参阅此处的 MS 文档）](http://msdn.microsoft.com/en-us/library/chy4288y.aspx)

因此，我的建议是*始终*使用括号。如果您在方法名称和第一个括号之间看到一个空格，如下所示：

`SomeSubName (abc)`

这会提醒您有问题（即 abc 如果被迫通过`ByVal`），因此您需要使用`Call`并且空间将被删除：

`Call SomeSubName(abc)`

这使您的所有方法调用在您的代码中保持一致。

在极少数情况下您*想*强制`abc`通过`ByVal`，您可以这样做，这使得它更加明显：

`Call SomeSubName((abc))`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T14:19:59.597

带参数的子调用不需要括号。只有返回结果的函数才需要括号。

```
Private Sub Testy1()
    Function1 "Testy2" ' does not require parenthesis
    Debug.Print Function1("Testy3") ' does require parenthesis
End Sub

Private Function Function1(str as String) as Boolean
    Function1 = True
End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T14:04:04.783

我个人不使用也不推荐使用 Call 语句。我个人发现，具有功能的括号和缺少 subs 的括号有效地区分了两者。也就是说，我真的很喜欢 Matt 对调用语句/byval/double parens 的使用。在极少数情况下，当您需要此功能时，如果它是您使用 Call 语句的唯一位置，它会使其在所有其他调用中更加突出。如果我活得足够长，我会使用它。:)

# c# - 我如何上传大尺寸文件

> ID：10107261
> 
> 赞同：0
> 
> 时间：2012-04-11T13:47:58.200
> 
> 标签：c#, wcf, file-upload

我有问题！我在某处读到我们可以通过 IIS 6 传输 2GB 的最大值，但我需要使用 C# 创建应用程序，它可以上传大小超过 150mb 的文件，并且能够同时将文件上传给许多用户时间。任何人都可以告诉或展示如何工作文件交换网站的例子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:53:11.520

您能否提供一个链接，您可以在其中阅读有关 2GB 限制的信息？

`transferMode="Streamed"`如果您用于 WCF 绑定，我很确定情况并非如此。另外，请记住将`httpRuntime maxRequestLength`and和设置为适当`binding`的值。`maxReceivedMessageSize``maxBufferSize`

例如，这取决于您要使用的 Web 服务的类型。如果它是一个 RESTful web 服务，你只需要定义一个类似下面的方法：

```
[OperationContract]
[WebInvoke(
    Method = "POST",
    BodyStyle = WebMessageBodyStyle.Bare,
    ResponseFormat = WebMessageFormat.Json,
    UriTemplate = "/fileUpload/?userId={userId}" )]
public void UploadFile( int userId, Stream fileStream)
{
    // Here you read the file from fileStream
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:21:31.763

看看这个关于使用 WCF 进行流式文件传输的[教程。](http://stefanoricciardi.com/2009/08/28/file-transfer-with-wcp/)它展示了如何从头开始创建用于文件上传/下载的流式 WCF 服务。大小无关紧要，因为您基本上在消息中传递了一个流，并且您可以设置最大消息大小。

# html - 嵌入字体在 Chrome/Firefox 中不显示

> ID：10107266
> 
> 赞同：2
> 
> 时间：2012-04-11T13:48:13.550
> 
> 标签：html, css, fonts, font-face

每当我在 Mac 上的 Firefox 和另一台 PC 上的 Chrome 中查看网页时，我嵌入的任何字体都没有显示。

我问过一位技术朋友，他坚持认为这是因为用户没有在他们的机器上安装字体。我说我已经使用谷歌字体嵌入，并且还上传了第二个字体到网络服务器，但他说这仍然取决于用户没有安装字体。

它是否正确？如果他是正确的，这意味着我完全误解了我认为我在网页中嵌入字体的知识。

供参考的站点（不是您可以看到字体）在[这里](http://www.tomrankinmusic.com/test/index.html)。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:55:13.000

您的朋友不正确，但您也没有正确实施它们。

对于 Google 字体，您应该首先将链接添加到字体中，或者将其放入 html 中，如下所示：

```
<link href='http://fonts.googleapis.com/css?family=Russo+One' rel='stylesheet' type='text/css'> 
```

或通过将其导入您的 CSS。

```
@import url(http://fonts.googleapis.com/css?family=Russo+One); 
```

然后在 css 中为 div 指定字体，如下所示：

```
font-family: 'Russo One', sans-serif; 
```

**您还有一个指向您自己的 CSS 的死链接。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:56:05.753

您的 MyFonts 工具包的链接已损坏。修复它，它们应该会出现。目前你有：

[http://www.tomrankinmusic.com/type/mercearia_antique/MyFontsWebfontsKit.css](http://www.tomrankinmusic.com/type/mercearia_antique/MyFontsWebfontsKit.css)

但应该是：

[http://www.tomrankinmusic.com/test/type/mercearia_antique/MyFontsWebfontsKit.css](http://www.tomrankinmusic.com/test/type/mercearia_antique/MyFontsWebfontsKit.css)

PT Sans 字体正在工作（至少在我的 Mac Firefox 中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T13:56:14.387

如果您在谈论字体`PT Sans`，我看不到您实际上将字体嵌入到 css 中的任何位置。

您需要提供字体路径并将其存储在某个位置以供引用，例如：

```
@font-face {
    font-family: 'RieslingRegular';
    src: url('fonts/riesling.eot');
    src: local('Riesling Regular'), local('Riesling'), url('fonts/riesling.ttf') format('truetype');
} 
```

请参阅此处以供参考： [http ://bavotasan.com/2010/embedding-fonts-web-site-css-font-face/](http://bavotasan.com/2010/embedding-fonts-web-site-css-font-face/)

# iphone - 如何获取距离当前位置最近的 100 米位置的纬度和经度值

> ID：10107268
> 
> 赞同：1
> 
> 时间：2012-04-11T13:48:17.793
> 
> 标签：iphone, mkmapview, cllocationmanager

我需要在当前位置的任何方向上获取最近 100 米位置的经纬度值，这是我的代码，

```
CLLocationCoordinate2D annotationCenter;
double ms = 100;
double scalingFactor = ABS( (cos(2 * M_PI * currentLocationCoordinates.latitude / 360.0) ));
if ([misson.location.latitude doubleValue] == 0.0 && [mission.location.longitude doubleValue] == 0.0) {
    annotationCenter.latitude = currentLocationCoordinates.latitude+(ms/103.5*1000);
    annotationCenter.longitude = currentLocationCoordinates.longitude+(ms/(scalingFactor * (103.5*1000)));
} 
```

我不知道天气是否正确，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:13:04.333

看看 Chris Veness 的一篇文章：

[http://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

您的问题似乎是计算“目标点给定距离和从起点开始的方位”。示例代码全是 JavaScript，但它简单而简短，移植到 Objective-C 应该没有问题。

# objective-c - 未指定返回内容时的返回值

> ID：10107273
> 
> 赞同：0
> 
> 时间：2012-04-11T13:48:29.477
> 
> 标签：objective-c

如果我有一些类似下面的代码，并且我使用`return`，那么真正返回的是什么？这是在假设自己吗？还是虚空还是什么？

```
if (actSheet) {
    [actSheet dismissWithClickedButtonIndex:-1 animated:YES];
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:49:12.657

这意味着此时函数退出。它在 void 函数中是允许的。例如，它不返回任何值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:59:05.730

没有任何东西被退回。如果您想了解绝对基础，大多数编译器将使用寄存器来包含或指向要返回的值。但是对于 void 函数，寄存器的值是未定义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:49:53.797

我一直认为它返回 void，因为大概方法是 -(void)someMethod

# jquery - 如何加快页面过渡动画的速度？

> ID：10107274
> 
> 赞同：15
> 
> 时间：2012-04-11T13:48:35.813
> 
> 标签：jquery, jquery-mobile, cordova

我使用 jQuery Mobile 和 Phonegap 为我的 iphone 制作了一个简单的应用程序。它工作得很好，但是应用程序使用以下内容转换到另一个页面，这非常慢：

```
<a data-role="button" id="about_link" data-transition="slide" 
     href="#page3" data-icon="gear" data-iconpos="left">
     Settings
</a> 
```

只是一个简单`a`的在这里做魔术，这导致了奇怪的 400 毫秒延迟等......

现在经过大量阅读，我制作了`a`按钮 a`div`并自己处理了点击事件以使按钮更快。

```
$("#about_link").live("touchstart", function(){
    slideTo('#page3',false);
});
function slideTo(page,reverse){
    $.mobile.changePage( page, {
        transition: "slide",
        reverse: reverse
    } );
} 
```

差异很大，但对于我的口味来说仍然太慢了。看起来 jQuery Mobile 会等待整个按钮动画（悬停和单击）完成，然后再转到其他页面。

现在我的问题：

1.  touchstart是最快的方法吗？我使用了其他库，例如[fastclick](https://github.com/drowne/jquery.mobile.fastclick/blob/master/zepto.onpress.js)，但这也不是超级快。
2.  按钮动画在这里是坏人吗？那我可以禁用它吗？
3.  你们能给我一些建议吗？谷歌在这个特殊问题上不是我的朋友......

格。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-11T15:42:18.473

它实际上在 jquery mobile 的 css 中：

```
.in, .out {
    -webkit-animation-timing-function: ease-in-out;
    -webkit-animation-duration: 350ms !important;
} 
```

只需调整 ms 就可以了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T11:56:41.987

您可能应该进行自定义转换。比破解 CSS 更干净。

[http://jquerymobile.com/test/docs/pages/page-customtransitions.html](http://jquerymobile.com/test/docs/pages/page-customtransitions.html)

# ios5 - MFMessageComposeViewController 和 UIAppearance，苹果说不要自定义

> ID：10107276
> 
> 赞同：11
> 
> 时间：2012-04-11T13:48:37.513
> 
> 标签：ios5, containment, uiappearance

问题

在MFMessageComposeViewController 苹果的文档中说[：](http://developer.apple.com/library/ios/documentation/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html#//apple_ref/doc/uid/TP40009668-CH1-DontLinkElementID_1)

> **重要**消息组合接口本身不可定制，并且不能由您的应用程序修改。

但是 MFMessageComposeViewController 和 MFMailComposeViewController 中的导航栏和 barbuttonitems 继承了我通过 UIAppearance 完成的所有样式。

我试图通过使用 UIAppearance 包含并将导航栏/barbuttonitem 背景图像设置为零来恢复默认外观，但我无法弄清楚如何恢复导航栏和 barbuttonitem 的默认 titleTextAttributes。

我尝试了另一条路线并使用遏制来限制我的导航控制器的样式，但似乎 MFMessageComposeViewController 和 MFMailComposeViewController 无论如何都包含在我的导航控制器中，所以这没有帮助。

所以我的问题是：

1) 更改 MFMessageComposeView 和 MFMailComposeView 上的导航栏外观是否会成为应用商店批准的问题？（如果这不是问题，我可以保留自定义样式。）

2) 有没有办法呈现 ComposeViewController 以便它不会包含在我的导航控制器中？

3）或者简单地说，我怎样才能恢复 barButtonItems 和 navigationBar 的默认标题文本属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-14T11:28:02.363

这似乎是一个相当古老的问题，但是：

1）。不，改变导航栏的外观不会影响 AppStore 的批准。提到的 Apple note 与 MFMessageComposeViewController 的字段有关（例如 To: Cc: ...），而不是导航栏。（我们有一个经过批准的应用程序，带有这种定制的导航栏）

2, 3) 不需要那个 =)

# spring - Spring security - 为什么 RoleVoter 支持所有类而 WebExpressionVoter 只支持 FilterInvocation 的子类？

> ID：10107278
> 
> 赞同：5
> 
> 时间：2012-04-11T13:48:41.433
> 
> 标签：spring, spring-security, spring-3

在 的`supports(Class clazz)`方法中`RoleVoter`，它总是返回 true 表示

> 此实现支持任何类型的类，因为它不查询提供的安全对象。

这是什么“**提供的安全对象**”。另一方面，只有当是 的子类型时，`supports(Class clazz)`方法`WebExpressionVoter`才会返回 true 。这里是“提出的安全对象”吗？为什么选民必须支持它？`clazz``FilterInvocation``FilterInvocation`

如果我`@Secured`在我的方法上使用注释并为作为投票者之一的全局方法安全性配置访问决策管理器`WebExpressionVoter`，则会出现错误

> AccessDecisionManager 不支持安全对象类：接口 org.aopalliance.intercept.MethodInvocation

这是因为访问决策管理器的所有投票者（当为方法安全性配置时）必须支持上述类，而 while`RoleVoter`和其他人则`WebExpressionVoter`需要`FilterInvocation`.

`SPEL`tag中的表达式`@PreAuthorize`也需要`WebExpressionVoter`，并且再次需要支持`MethodInvocation`类，但它不需要。但它确实有效。那么我在这里做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-11T14:47:55.557

这`secured object`是一个抽象，代表任何被保护的东西。如果需要，它可以是 a `MethodInvocation`in case of `@Secured`、和，或 a in case of或任何其他对象。`@RolesAllowed``@PreFilter``@PreAuthorize``FilterInvocation``<intercept-url />`

`@PreFilter`和`@PreAuthorize`注释由处理`PreInvocationAuthorizationAdviceVoter`。它使用`MethodInvocation`来获取注释及其属性值，因此它具有：

```
public boolean supports(Class<?> clazz) {
    return clazz.isAssignableFrom(MethodInvocation.class);
} 
```

这`WebExpressionVoter`是特定于 Web 调用的，因为它将 URL 与来自 的模式匹配`<intercept-url />`，这就是它具有的原因：

```
public boolean supports(Class<?> clazz) {
    return clazz.isAssignableFrom(FilterInvocation.class);
} 
```

`RoleVoter`唯一使用对象`Authentication`内容，因此它不依赖于`secured object`，这就是它具有的原因：

```
public boolean supports(Class<?> clazz) {
    return true;
} 
```

请注意，您可以有一个单独`AccessDecisionManager`的 URL 级别安全性和方法级别安全性。第一个将使用支持`FilterInvocation`的选民，另一个将使用支持的选民`MethodInvocation`。另请注意，它`RoleVoter`支持两者，因此可以在两种情况下使用。

# iphone - iOS：当其中一些可能改变大小时，如何通过IB正确调整UI元素的位置？

> ID：10107279
> 
> 赞同：0
> 
> 时间：2012-04-11T13:48:43.900
> 
> 标签：iphone, ios

例如，在一个 UIView 上，从左到右有三个按钮：,button1,button2,button3。当按钮 1 变宽时，比如它的宽度变成原来宽度的两倍，是否有任何界面构建器方式可以使按钮 2 和 3 自动向右移动？

对不起，我没有把我的问题说清楚。

我的意思是这样的大小变化：我按下button1，然后我在我的代码中改变它的框架，而不是由butotn1中的文本变化引起的。我希望 button2&3 自动向右移动，保持按钮 1 和 2 之间间隙的宽度不变。

感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:58:00.140

我可能是错的，但我不知道你有什么方法可以在 IB 中做到这一点。不过，它在代码中非常简单，只需将按钮链接到一些 IBOutlets 并检查按钮图像的大小（myUIImage.size），然后调整按钮的框架（在 viewWillAppear 中进行）。

看到你的编辑 - 如果你正在使用代码调整它的大小，也调整它的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:55:00.563

IB 只能用于视图的初始定位。

没错，您还可以定义视图的自动调整大小掩码，仅此而已。

任何额外的布局都应该在代码中完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:00:51.160

是的 - 通过使用自动调整蒙版。如果您允许边距灵活（没有将框架连接到超级视图框架的红线）并允许灵活的宽度和高度，则按钮将按比例调整大小和移动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T22:42:51.397

如果您的按钮在屏幕底部的一行中，请考虑使用`UIToolBar`. 它的`UIBarButtonItem`对象会自动调整以适应彼此的`width`变化。对于更一般的情况，您需要按照 Franklyn Weber 的回答重新计算位置和大小。

# symfony - 使用“sonata_type_model”多对多映射时字段未更新

> ID：10107282
> 
> 赞同：0
> 
> 时间：2012-04-11T13:48:53.863
> 
> 标签：symfony, doctrine-orm, symfony-sonata

这是我的 TagAdmin 课程

```
protected function configureFormFields(FormMapper $formMapper) 
    { 
        $formMapper 
            ->add('name') 
            ->add('description') 
            ->add('slug','text',array( 
                'read_only' => true, 
            )) 
            ->add('categories', 'sonata_type_model', array('expanded' 
=> true, 'multiple' => true)); 
    } 
```

`manyToMany mapping`类别和标签之间有一个。

我最近升级到 Sonata Admin 2.0 版。

我确信它之前工作过，但是现在当我将新类别添加到标签时，我会收到一条成功的 Flash 消息，但没有反映更改。

我所做的唯一其他更改是集成 Chosen JQuery 插件以处理复选框。我也尝试过删除它，但它的功能是一样的。

可能出了什么问题？

这是标签类。

```
class Tag 
{ 
    /** 
     * @var integer $id 
     * 
     * @ORM\Column(name="id", type="integer") 
     * @ORM\Id 
     * @ORM\GeneratedValue(strategy="AUTO") 
     */ 
    private $id; 
    /** 
     * @var string $name 
     * 
     * @Gedmo\Sluggable(slugField="slug") 
     * @ORM\Column(name="name", type="string", length=255) 
     * @Gedmo\Translatable 
     */ 
    private $name; 
    /** 
     * @var text $description 
     * 
     * @ORM\Column(name="description", type="text") 
     * @Gedmo\Translatable 
     */ 
    private $description; 
    /** 
     * @ORM\ManyToMany(targetEntity="Category", mappedBy="tags") 
     */ 
    protected $categories; 
    /** 
     * @var string $slug 
     * @Gedmo\Slug(updatable=false) 
     * @ORM\Column(name="slug", type="string", length=255) 
     */ 
    private $slug; 
    public function __construct() 
    { 
        $this->categories = new \Doctrine\Common\Collections 
\ArrayCollection(); 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T06:14:07.090

抱歉，这与奏鸣曲无关。

这是映射的问题。Doctrine2 文档指出：

> 关系的拥有方确定数据库中关系的更新。
> 
> 要完全理解这一点，请记住在对象世界中如何维护双向关联。关联的每一侧都有 2 个引用，这 2 个引用都代表相同的关联，但可以相互独立地更改。当然，在正确的应用程序中，双向关联的语义由应用程序开发人员正确维护（这是他的责任）。Doctrine 需要知道这两个内存引用中的哪一个是应该被持久化的，哪个不是。这就是拥有/反向概念的主要用途。
> 
> 仅对关联的反面所做的更改将被忽略。确保更新双向关联的双方（或至少从 Doctrine 的角度来看拥有方）
> 
> 双向关联的拥有方是 Doctrine 在确定关联状态时“查看”的一方，因此是否需要更新数据库中的关联。

我的映射是这样定义的：-

```
class Tag
{
...
   /**
     * @ORM\ManyToMany(targetEntity="Category", mappedBy="tags")
     */
    protected $categories;
...
}

class Category
{
...
   /**
     * @ORM\ManyToMany(targetEntity="Tag", inversedBy="categories")
     */
    protected $tags;
...
} 
```

**将“inversedBy”设置为 Tag 类，解决了这个问题。** 所以正确的实现是这样的：

```
class Tag
{
...
   /**
     * @ORM\ManyToMany(targetEntity="Category", inversedBy="tags")
     */
    protected $categories;
...
}

class Category
{
...
   /**
     * @ORM\ManyToMany(targetEntity="Tag", mappedBy="categories")
     */
    protected $tags;
...
} 
```

# conflict - SCons 处理多个 SConstruct 文件中的冲突选项 (OptionConflictError)

> ID：10107283
> 
> 赞同：1
> 
> 时间：2012-04-11T13:48:55.210
> 
> 标签：conflict, options, scons

我有一个项目，其中包含几个单独的 Sconstruct 文件和一个顶级 SConstruct 文件。

```
project/SConstruct -- toplevel SConstruct file
project/binary1/SConstruct -- lower level SConstructs
project/binary2/SConstruct
project/binary3/src/SConstruct 
```

我希望能够使用选项调用各个 SConstruct 文件。所以每个 SConstruct 都可以这样调用：

```
scons install --prefix=/usr/local/bin 
```

他们在 SConstruct 文件中有一个关于该选项的部分：

```
AddOption('--prefix',
          dest='prefix',
          type='string',
          nargs=1,
          action='store',
          metavar='DIR',
          default=prefix,
          help='installation prefix') 
```

另外，在顶层 SConstruct 文件中，我希望能够调用所有较低级别的 SConstruct 文件，因此我将其添加到顶层 SConstruct 中：

```
SConscript(binary1/SConstruct)
SConscript(binary2/SConstruct)
SConscript(binary3/src/SConstruct) 
```

但是，如果我尝试这样做，我会得到一个`OptionConflictError`on，`binary2/SConstruct`因为该`--prefix`选项已经定义（在 中`binary1/SConstruct`）：

```
OptionConflictError: option --prefix: conflicting option string(s): --prefix: 
```

有没有办法解决这个问题`OptionConflictError`？

我知道我可以`AddOption()`用一个`try`块来包围调用，但是有更好的方法吗？我可以添加一个`conflict_handler`吗？我可以检查该`--prefix`选项是否已经存在吗？

我可以更好地组织事情吗？不幸的是，我需要单独的 SConstruct 文件，所以我不能重新组织太多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:20:14.837

我认为最好通过在子目录中定义 SConscript 文件来做到这一点：binary1、binary2 和 binary3。

我最近回答了一个类似的问题，并提出了如何组织 SConstruct 和 SConscript 文件，我认为这个答案会对您有所帮助：

[使用 SCons 进行真正的分层构建？](https://stackoverflow.com/q/9950474/1158895)

这样你就可以`--prefix`在 SConstruct 文件中定义选项，并从根 SConstruct 文件中调用子目录 SConscript 文件，从而避免上述错误。

# java - Logback 的奇怪行为 - 空文件

> ID：10107285
> 
> 赞同：5
> 
> 时间：2012-04-11T13:49:00.010
> 
> 标签：java, logging, logback

我正在翻新使用 logback 的旧系统，一些简单的东西（3 个附加程序，2 个记录器）。现在在系统的下一个版本中（或重新实现，因为以前的版本被笔记本和备份窃取，只有配置文件和二进制文件已经在机器人上），我使用相同的配置文件，但所有日志文件都保持为空。

奇怪的是它实际上通过给定的模式创建了正确的文件和文件夹，所以它肯定会对配置文件做一些事情。除此之外，记录器和附加器根本不起作用。

我还尝试使用在示例中找到的各种其他配置文件——甚至没有一个有效，所以我怀疑使用的库和 logback 之间存在一些冲突。我试图用谷歌搜索它，但没有发现任何相关或有效的东西。

你们有没有人遇到过（或希望通过）这样的问题？或者请指错线...

提前谢谢...卡米尔

下一个代码显示初始化：

```
public static final String LOGGER_CONFIG_FILE = "hacs.logger.conf";
public static final String LOGGER_CONFIG_FILE_DEFAULT = "./conf/logconf.xml";

    public static void main( String[] args ) {

        File configurationFile = new File(HACSProperties.instance().getProperty(LOGGER_CONFIG_FILE, LOGGER_CONFIG_FILE_DEFAULT));

        if( configurationFile.exists() ){
            LoggerContext context = (LoggerContext) LoggerFactory.getILoggerFactory();
        context.reset(); // When this is commented, logback works in some default configuration

            try {
            JoranConfigurator configurator = new JoranConfigurator();
        configurator.setContext(context);

        configurator.doConfigure( LOGGER_CONFIG_FILE_DEFAULT );
        System.out.println("Logger successfully configured..");

        Logger log = LoggerFactory.getLogger("analytics");
        log.info( "Please appear in file" );

            } catch (JoranException je) {
            System.out.println("Error - failed to configure logger. Please check configuration.");
        je.printStackTrace();

                System.exit( 1 );
            }

        } else {
            System.out.println("Error - failed to configure logger - configuration file does not exist. Please check configuration.");

            System.exit( 2 );
        }
} 
```

配置文件本身：

```
<configuration>
    <timestamp key="bySecond" datePattern="dd.MM.yyyy'_T'HH.mm.ss" timeReference="contextBirth" />

    <appender name="FILE" class="ch.qos.logback.core.FileAppender">
        <file>./logs/HACS_LAST_RUN.log</file>
        <append>false</append>
        <layout class="ch.qos.logback.classic.PatternLayout">
            <Pattern>%date %level [%thread] %logger{10} [%file:%line] %msg%n
            </Pattern>
        </layout>
    </appender>

    <appender name="FILE_PER_MINUTE" class="ch.qos.logback.core.FileAppender">
        <file>./logs/PER_MINUTE/HACS-RUN-${bySecond}.log</file>
        <append>false</append>
        <layout class="ch.qos.logback.classic.PatternLayout">
            <Pattern>%date %level [%thread] %logger{10} [%file:%line] %msg%n
        </Pattern>
        </layout>
    </appender>

    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <layout class="ch.qos.logback.classic.PatternLayout">
        <Pattern>%d{HH:mm:ss.SSS} %level [%file:%line] %msg%n</Pattern>
        </layout>
    </appender>

    <logger name="org.hibernate" additivity="false">
        <level value="warn" />
        <appender-ref ref="FILE" />
        <appender-ref ref="STDOUT" />
        <appender-ref ref="FILE_PER_MINUTE" />
    </logger>

    <logger name="FILE_ONLY" additivity="false">
        <level value="INFO" />
        <appender-ref ref="FILE_PER_MINUTE" />
        <appender-ref ref="FILE" />
    </logger>

    <root>
        <level value="INFO" />
        <appender-ref ref="FILE" />
        <appender-ref ref="STDOUT" />
        <appender-ref ref="FILE_PER_MINUTE" />
    </root>
</configuration> 
```

图书馆列表：

*   antlr-2.7.7.jar*   aopalliance-1.0.jar*   asm-3.3.jar*   bcprov-jdk15-1.43.jar*   cglib-2.2.jar*   编年史.jar*   commons-collections-3.2.1.jar*   commons-lang-2.5.jar*   commons-logging-1.1.1.jar*   commons-pool-1.5.2.jar*   cxf-2.3.0.jar*   cxf-manifest.jar*   cxf-xjc-boolean-2.3.0.jar*   cxf-xjc-bug671-2.3.0.jar*   cxf-xjc-dv-2.3.0.jar*   cxf-xjc-ts-2.3.0.jar*   dom4j-1.6.1.jar*   FastInfoset-1.2.8.jar*   felix.jar*   geronimo-activation_1.1_spec-1.1.jar*   geronimo-annotation_1.0_spec-1.1.1.jar*   geronimo-javamail_1.4_spec-1.7.1.jar*   geronimo-jaxws_2.2_spec-1.0.jar*   geronimo-jms_1.1_spec-1.1.1.jar*   geronimo-servlet_3.0_spec-1.0.jar*   geronimo-stax-api_1.0_spec-1.0.1.jar*   geronimo-ws-metadata_2.0_spec-1.1.3.jar*   groovy-all-1.8.5.jar*   h2-1.3.154.jar*   hibernate-jpa-2.0-api-1.0.0.Final.jar*   hibernate3.jar*   javassist-3.12.0.GA.jar*   jaxb-api-2.2.1.jar*   jaxb-impl-2.2.1.1.jar*   jaxb-xjc-2.2.1.1.jar*   抛弃-1.2.jar*   jetty-continuation-7.1.6.v20100715.jar*   码头-http-7.1.6.v20100715.jar*   jetty-io-7.1.6.v20100715.jar*   jetty-server-7.1.6.v20100715.jar*   jetty-util-7.1.6.v20100715.jar*   jmdns.jar*   jra-1.0-alpha-4.jar*   js-1.7R1.jar*   jsr311-api-1.1.1.jar*   jta-1.1.jar*   logback-access-1.0.1.jar*   logback-classic-1.0.1.jar*   logback-core-1.0.1.jar*   neethi-2.0.4.jar*   oro-2.0.8.jar*   saaj-api-1.3.jar*   saaj-impl-1.3.2.jar*   序列化程序-2.7.1.jar*   slf4j-api-1.6.4.jar*   spring-aop-3.0.4.RELEASE.jar*   spring-asm-3.0.4.RELEASE.jar*   spring-beans-3.0.4.RELEASE.jar*   spring-context-3.0.4.RELEASE.jar*   spring-core-3.0.4.RELEASE.jar*   spring-expression-3.0.4.RELEASE.jar*   spring-jms-3.0.4.RELEASE.jar*   spring-tx-3.0.4.RELEASE.jar*   spring-web-3.0.4.RELEASE.jar*   stax2-api-3.0.2.jar*   速度-1.6.4.jar*   服务员-dns.jar*   woodstox-core-asl-4.0.8.jar*   wsdl4j-1.6.2.jar*   wss4j-1.5.9.jar*   xalan-2.7.1.jar*   xml-resolver-1.2.jar*   xmlbeans-2.4.0.jar*   XmlSchema-1.4.7.jar*   xmlsec-1.4.3.jar

# silverlight - 当值更改回原始状态时，Silverlight 5 DependencyProperty PropertyChangedCallback 不会触发

> ID：10107287
> 
> 赞同：0
> 
> 时间：2012-04-11T13:49:04.617
> 
> 标签：silverlight, dependency-properties

我有一个 Silverlight 控件，其 DependencyProperty 绑定到 TextBox 的 TextProperty

```
public static readonly DependencyProperty StringValueProperty =
    DependencyProperty.Register(
    "StringValue",
    typeof(string),
    typeof(VisFeldTControl),
    new PropertyMetadata(new PropertyChangedCallback(OnStringValueChanged)));

private static void OnStringValueChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
    {
    } 
```

“StringValue”的初始值（在绑定时的 ViewModel 中）例如是“Mike”。当我通过在文本框中键入给 Mike 一词添加一个字母时，PropertyChangedCallback 被正确触发，但是当我再次删除这个字母时，PropertyChangedCallback 没有被触发（它的作用是原始值再次成为原始值。当我第一次删除一个字母（事件被触发）时，同样的事情会发生，再次添加相同的字母不会触发事件。

我不知道是什么原因造成的。

# qmake - qmake QMAKE_EXTRA_TARGETS 与 VS2010

> ID：10107289
> 
> 赞同：2
> 
> 时间：2012-04-11T13:49:14.723
> 
> 标签：qmake

在这个简单的案例中你能帮我吗？我的简历：

```
wordparser.target = generated_source
wordparser.commands = build.bat
wordparser.depends = FORCE
wordparser.CONFIG = recursive
QMAKE_EXTRA_TARGETS += wordparser
PRE_TARGETDEPS += wordparser
TEMPLATE = vcapp
TARGET = demo
SOURCES = stub_test.cpp 
```

build.bat 会生成许多在演示目标构建中未使用的文件。此 pro 文件生成不包含任何预构建事件的 vcxproj。如何在 VS2010 的预构建步骤中强制执行 build.bat？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-27T16:21:19.200

qmake pro 文件无法做到这一点。qmake 不支持预构建操作

改用 cmake。

# c - char * 作为 C 中的参考

> ID：10107292
> 
> 赞同：9
> 
> 时间：2012-04-11T13:49:23.143
> 
> 标签：c

如何传递像 char * 这样的参数作为参考？

我的函数使用 malloc()

```
void set(char *buf)
{
    buf = malloc(4*sizeof(char));
    buf = "test";
}

char *str;
set(str);
puts(str); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-11T13:50:52.140

您传递指针的地址：

```
void set(char **buf)
{
    *buf = malloc(5*sizeof(char));
    // 1\. don't assign the other string, copy it to the pointer, to avoid memory leaks, using string literal etc.
    // 2\. you need to allocate a byte for the null terminator as well
    strcpy(*buf, "test");
}

char *str;
set(&str);
puts(str); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T13:51:10.577

您必须将其作为指向指针的指针传递：

```
void set(char **buf)
{
    *buf = malloc(5 * sizeof(char));
    strcpy(*buf, "test");
} 
```

像这样称呼它：

```
char *str;
set(&str);
puts(str);
free(str); 
```

请注意，我已将`malloc`调用更改为分配五个字符，这是因为您只为实际字符分配，但字符串还包含一个特殊的终止符，您也需要空间。

我还使用`strcpy`将字符串复制到分配的内存。那是因为否则您将覆盖指针，这意味着您会丢失分配的指针并且会发生内存泄漏。

完成后还应该记住`free`指针，否则内存将一直分配到程序结束。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-11T13:51:24.877

C 不支持通过引用传递。但是您可以将指针传递给您的指针，并设置：

```
void set(char **buf)
{
    *buf = malloc(5*sizeof(char)); //5, to make room for the 0 terminator
    strcpy(*buf,"test"); //copy the string into the allocated buffer.
}

char *str;
set(&str);
puts(str); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-11T13:51:32.030

您将指针传递给指针，`char**`：C 中没有引用。

```
void set(char** buf)
{
    *buf = malloc(5); /* 5, not 4: one for null terminator. */
    strcpy(buf, "test");
} 
```

注意：

```
buf = "test"; 
```

不复制`"test"`到`buf`，而是指向`buf`字符串文字的地址`"test"`。要复制使用`strcpy()`。

请记住`free()`在不再需要时返回缓冲区：

```
char* str;
set(&str);
puts(str);
free(str); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-11T13:50:41.860

C 是按值传递。没有传递引用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T13:53:54.387

C 不能不通过引用传递函数参数，C 总是按值传递它们。

来自 Kernighan & Ritchie：

> （K&R 2nd，1.8 按值调用）“在 C 中，所有函数参数都由“值”传递”

要修改指向 的指针`T`，您可以将指向指针的指针`T`作为函数参数类型。

# php - PHP全局数组不起作用

> ID：10107296
> 
> 赞同：0
> 
> 时间：2012-04-11T13:49:28.047
> 
> 标签：php, arrays

我正在我的 PHP 函数之外创建一个数组并在函数内部调用 global，但我的函数看不到该数组。该函数也被递归调用。知道我做错了什么吗？

```
 $node_types = array( 1 => 'testproject',
                         2 => 'testsuite',
                         3 => 'testcase');

function get_subtree($node_id,&$node_list) {

    global $node_types;

    foreach ($node_types as $key)  { 
        echo("node_types: " . $key . "<BR>"); 
    }

    ....

    get_subtree($node_id,$node_list);
} 
```

我的错误：

```
Notice: Undefined variable: node_types in ... 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:10:23.437

放

```
global $node_types; 
```

在数组定义之上以及函数内部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:23:25.600

在函数中声明数组会在每次使用函数时创建一个新数组，并且数组的范围只有函数的长度。全局数组必须在函数之外声明。所以在这种情况下应该放在例子的前面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:06:09.907

不要在函数中使用**全局 $node_types**。它将创建新变量，因此您的函数将使用 null 变量而不是全局变量。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2016-02-23T14:04:10.480

我的猜测，您将全局定义放在函数调用之后。

# c# - HttpWebRequest 错误：503 服务器不可用

> ID：10107305
> 
> 赞同：7
> 
> 时间：2012-04-11T13:50:03.090
> 
> 标签：c#, https, httpwebrequest

我正在使用 HttpWebRequest，但在执行 GetResponse() 时出现错误。

我使用这段代码：

```
private void button1_Click(object sender, EventArgs e)
    {
        Uri myUri = new Uri("http://www.google.com/sorry/?continue=http://www.google.com/search%3Fq%3Dyamaha");
        // Create a 'HttpWebRequest' object for the specified url. 
        HttpWebRequest myHttpWebRequest = (HttpWebRequest)WebRequest.Create(myUri);
        // Set the user agent as if we were a web browser
        myHttpWebRequest.UserAgent = @"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.0.4) Gecko/20060508 Firefox/1.5.0.4";

        HttpWebResponse myHttpWebResponse = (HttpWebResponse)myHttpWebRequest.GetResponse();
        var stream = myHttpWebResponse.GetResponseStream();
        var reader = new StreamReader(stream);
        var html = reader.ReadToEnd();
        // Release resources of response object.
        myHttpWebResponse.Close();

        textBox1.Text = html;
    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-11T14:01:57.260

服务器确实返回了 503 HTTP 状态码。但是，它还会返回响应正文以及 503 错误条件（打开该 URL 时在浏览器中看到的内容）。

您可以访问异常`Response`属性中的响应（如果有 503 响应，则引发的异常是 a `WebException`，它有一个`Response`属性）。您需要捕获此异常并正确处理

具体来说，您的代码可能如下所示：

```
string html;

try
{
    var myUri = new Uri("http://www.google.com/sorry/?continue=http://www.google.com/search%3Fq%3Dyamaha");
    // Create a 'HttpWebRequest' object for the specified url. 
    var myHttpWebRequest = (HttpWebRequest)WebRequest.Create(myUri);
    // Set the user agent as if we were a web browser
    myHttpWebRequest.UserAgent = @"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.0.4) Gecko/20060508 Firefox/1.5.0.4";

    var myHttpWebResponse = (HttpWebResponse)myHttpWebRequest.GetResponse();
    var stream = myHttpWebResponse.GetResponseStream();
    var reader = new StreamReader(stream);
    html = reader.ReadToEnd();
    // Release resources of response object.
    myHttpWebResponse.Close();
}
catch (WebException ex)
{
    using(var sr = new StreamReader(ex.Response.GetResponseStream()))
        html = sr.ReadToEnd();
}

textBox1.Text = html; 
```

# php - PHP图像裁剪为正方形

> ID：10107306
> 
> 赞同：1
> 
> 时间：2012-04-11T13:50:06.467
> 
> 标签：php, image, resize, thumbnails, crop

我正在使用以下 PHP 脚本来创建我在这里得到的方形缩略图[http://www.abeautifulsite.net/blog/2009/08/cropping-an-image-to-make-square-thumbnails-in-php/](http://www.abeautifulsite.net/blog/2009/08/cropping-an-image-to-make-square-thumbnails-in-php/)

我能够将其集成到我的图像上传脚本中，该脚本会上传全尺寸图像，然后获取上传的图像并从中创建缩略图。问题是脚本的作者说，它会毫无问题地裁剪横向和纵向图像。它完美地裁剪横向图像，但是当它面向纵向图像时，输出缩略图将不会被裁剪，但它会按比例缩小以适合给定的方形缩略图高度，并且两侧的空白空间将填充黑色。我知道有一种方法可以解决这个问题，但由于我对 PHP 比较陌生，我无法解决它。

有 PHP 真正经验的人可以解决这个问题吗？先感谢您！

脚本在这里：$

```
 function square_crop($src_image, $dest_image, $thumb_size = 64, $jpg_quality = 90) {

// Get dimensions of existing image
$image = getimagesize($src_image);

// Check for valid dimensions
if( $image[0] <= 0 || $image[1] <= 0 ) return false;

// Determine format from MIME-Type
$image['format'] = strtolower(preg_replace('/^.*?\//', '', $image['mime']));

// Import image
switch( $image['format'] ) {
    case 'jpg':
    case 'jpeg':
        $image_data = imagecreatefromjpeg($src_image);
    break;
    case 'png':
        $image_data = imagecreatefrompng($src_image);
    break;
    case 'gif':
        $image_data = imagecreatefromgif($src_image);
    break;
    default:
        // Unsupported format
        return false;
    break;
}

// Verify import
if( $image_data == false ) return false;

// Calculate measurements
if( $image[0] & $image[1] ) {
    // For landscape images
    $x_offset = ($image[0] - $image[1]) / 2;
    $y_offset = 0;
    $square_size = $image[0] - ($x_offset * 2);
} else {
    // For portrait and square images
    $x_offset = 0;
    $y_offset = ($image[1] - $image[0]) / 2;
    $square_size = $image[1] - ($y_offset * 2);
}

// Resize and crop
$canvas = imagecreatetruecolor($thumb_size, $thumb_size);
if( imagecopyresampled(
    $canvas,
    $image_data,
    0,
    0,
    $x_offset,
    $y_offset,
    $thumb_size,
    $thumb_size,
    $square_size,
    $square_size
)) {

    // Create thumbnail
    switch( strtolower(preg_replace('/^.*\./', '', $dest_image)) ) {
        case 'jpg':
        case 'jpeg':
            return imagejpeg($canvas, $dest_image, $jpg_quality);
        break;
        case 'png':
            return imagepng($canvas, $dest_image);
        break;
        case 'gif':
            return imagegif($canvas, $dest_image);
        break;
        default:
            // Unsupported format
            return false;
        break;
    }

     } else {
    return false;
     }
    }
    ?> 
```

我这样称呼它 - square_crop('source_image', 'destination_image', 65);

你可以在这里看到结果[http://imageshack.us/photo/my-images/717/imgfl.png/](http://imageshack.us/photo/my-images/717/imgfl.png/)

它只发生在纵向图像上，横向图像以填充整个正方形的方式进行裁剪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:22:09.773

仅用于裁剪，将 imagecopyresampled() 函数替换为 imagecopy()。

如果源坐标和目标坐标以及宽度和高度不同，则重新采样会执行图像的适当拉伸或收缩。imagecopy() 没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T10:32:19.773

您应该在 if() 语句中添加图像配给，这样它就会知道它是纵向还是横向。

更改下面的行

```
// Calculate measurements
if( $image[0] > $image[1] ) { 
```

# salesforce - Salesforce 文档，“-”的含义

> ID：10107308
> 
> 赞同：0
> 
> 时间：2012-04-11T13:50:12.153
> 
> 标签：salesforce

我有一个来自我的客户的文档。我不明白下面的说法。“-”是什么意思；

```
string lldRecType='-'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T13:53:50.673

它将值分配`-`给`string`变量`lldRecType`。因此，当您使用`lldRecType`变量时，它将返回 value `-`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T13:53:01.583

“-”的值实际上就是连字符。它不代表任何东西或具有特殊含义。

# php - 自动更新聊天框

> ID：10107309
> 
> 赞同：0
> 
> 时间：2012-04-11T13:50:18.193
> 
> 标签：php, javascript

所以我正在开发一个 javascript/php 聊天框。一切正常，除了它更新我的 div 的内容（这工作一次，但之后当新消息被放入数据库时​​它不会继续更新它）。这是我的代码：

Javascript部分：

```
 <script language=javascript type='text/javascript'> 

        setInterval(function () {

            var arrayOfObjects = <?print_r(getChatArray());?>;
            var chat = "";

            for (var i = 0; i < arrayOfObjects.length; i++) {
                var object = arrayOfObjects[i];

                chat += "["+object.date+"]"+object.op+": " + object.msg + "</br>";
            }
            $('#chat').html(chat);

        }, 10);
    </script> 
```

php部分：

```
<?php
function getChatArray() {
    $result = mysql_query("SELECT * FROM shouts ORDER BY id DESC"); 
    $to_encode = array();

    $count = mysql_num_rows($result);
    $size = 0;
        if($count > 0) {
            while($row = mysql_fetch_assoc($result)) {
              $to_encode[$size]['id'] = $row['id'];
              $to_encode[$size]['msg'] = $row['msg'];
              $to_encode[$size]['op'] = $row['op'];
              $to_encode[$size]['date'] = $row['date'];
              $size += 1;
            } 

        } else {
            return "None";
        }

return json_encode($to_encode);
}
?> 
```

关于为什么它不不断更新它的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T13:53:28.870

因为您的 JS 每 10 毫秒解析一次原始聊天室内容，所以您不会获取任何新内容。您需要实现一个 ajax 调用，我强烈建议将该 setInterval 更改为递归 setTimeout，延迟更实际为 500 毫秒，这样您就不会杀死客户端。

而不是这个：

```
setInterval(function() {

    var arrayOfObjects = <?print_r(getChatArray());?>;
    ... 
```

你会使用这样的东西：

```
(function updateChat(){

    var arrayOfObjects, 
        chat, 
        max,
        _object,
        i = 0;

    $.ajax({
        url : '/getChatArray.php', // php echoes the json
        success: function(arrayOfObjects){
            for (max = arrayOfObjects.length; i < max; i++) {
                _object = arrayOfObjects[i];
                chat += "["+_object.date+"]"+_object.op+": " + _object.msg + "</br>";
            }
            $('#chat').html(chat);
            setTimeout(updateChat, 500);
        }
    });
}()); 
```

显然，您会根据需要填充该 ajax 处理程序，添加更多参数，如 dataType 等，以及一些错误处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T13:57:33.127

您的数据库内容只会在初始导航时输出到页面。这段代码：

```
var arrayOfObjects = <?print_r(getChatArray());?>; 
```

只会在 PHP 渲染页面时输出 getChatArray() 的返回内容。所以脚本在渲染时只能看到该函数返回的一种状态。

您需要使用[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)从数据库中异步检索内容。

我建议你：

1.  创建一个以[JSON](http://www.json.org/)格式输出数据的 PHP 脚本
2.  使用[jQuery](http://www.jquery.com/)，特别是[getJSON](http://api.jquery.com/jQuery.getJSON/)函数来检索该脚本的输出
3.  用这些数据做你想做的事。

# php - 在 MAMP MacOsX 上更新 PEAR

> ID：10107311
> 
> 赞同：3
> 
> 时间：2012-04-11T13:50:23.407
> 
> 标签：php, pear

目前我正在尝试在我的 mac os x 和 mamp 服务器上安装 phpunit：

```
梨配置集 auto_discover 1
梨安装 pear.phpunit.de/PHPUnit

```

我在安装过程中遇到的错误：

```
验证错误：此 package.xml 需要 PEAR 1.9.4 版才能正确解析，我们是 1.9.2 版

```

```
梨升级梨

```

```
没什么可升级的

```

**更新 1**

这是我的梨配置。我假设我搞砸了本地和 mamp 安装（我不知道 mamp 也有梨，所以我安装了本地的）。

我想 bin_dir、php_dir 和其他路径有问题？

```
Keefir-Samolet-iMac:MAMP jevgenismirnov$ pear config-show
配置（频道pear.php.net）：
======================================
自动发现新频道 auto_discover 1
默认频道 default_channel pear.php.net
HTTP 代理服务器地址 http_proxy       
PEAR 服务器 [已弃用] master_server pear.php.net
默认频道镜像 preferred_mirror pear.php.net
远程配置文件 remote_config    
PEAR 可执行文件目录 bin_dir /Users/jevgenismirnov/pear/bin
PEAR 文档目录 doc_dir /Users/jevgenismirnov/pear/docs
PHP 扩展目录 ext_dir /Applications/MAMP/bin/php/php5.3.6/lib/php/extensions/no-debug-non-zts-20090626/
PEAR 目录 php_dir /Users/jevgenismirnov/pear/share/pear
PEAR 安装程序缓存目录 cache_dir /var/folders/k7/xpwbcbrs1xs8tlxjk5mvkwrr0000gp/T//pear/cache
PEAR 配置文件 cfg_dir /Users/jevgenismirnov/pear/cfg
目录
PEAR 数据目录 data_dir /Users/jevgenismirnov/pear/data
PEAR 安装程序下载 download_dir /tmp/pear/install
目录
PHP CLI/CGI 二进制 php_bin /Applications/MAMP/bin/php/php5.3.6/bin/php
php.ini 位置 php_ini          
--program-prefix 传递给 php_prefix       
PHP 的 ./config
--program-suffix 传递给 php_suffix       
PHP 的 ./config
PEAR 安装程序临时目录 temp_dir /tmp/pear/install
PEAR 测试目录 test_dir /Users/jevgenismirnov/pear/tests
PEAR www 文件目录 www_dir /Users/jevgenismirnov/pear/www
缓存 TimeToLive cache_ttl 3600
首选包状态 preferred_state stable
Unix 文件掩码 umask 22
调试日志级别详细 1
PEAR 密码（用于密码         
维护者）
签名处理程序 sig_bin /usr/local/bin/gpg
签名密钥目录 sig_keydir /Applications/MAMP/bin/php/php5.3.6/conf/pearkeys
签名密钥 ID sig_keyid        
包签名类型 sig_type gpg
PEAR 用户名（用于用户名         
维护者）
用户配置文件文件名 /Users/jevgenismirnov/.pearrc
系统配置文件文件名 /Applications/MAMP/bin/php/php5.3.6/conf/pear.conf

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:53:11.060

好吧，我的坏！

问题出在 2 个梨安装中。

所以运行后：

```
梨卸载梨；
pear config-set bin_dir /Applications/MAMP/bin/php/php5.3.6/bin;
pear config-set doc_dir /Applications/MAMP/bin/php/php5.3.6/lib/php/doc;
pear config-set ext_dir /Applications/MAMP/bin/php/php5.3.6/lib/php/extensions/no-debug-non-zts-20090626;
pear config-set php_dir /Applications/MAMP/bin/php/php5.3.6/lib/php;
pear config-set data_dir /Applications/MAMP/bin/php/php5.3.6/lib/php/data;
pear config-set php_bin /Applications/MAMP/bin/php/php5.3.6/bin/php;
pear config-set test_dir /Applications/MAMP/bin/php/php5.3.6/lib/php/test;
pear config-set www_dir /Applications/MAMP/bin/php5.2/lib/php/www

```

Everything worked fine.

Thank you for your help.

# cuda - Nvidia Cuda Program - 我的问题适合 Cuda 架构吗？

> ID：10107312
> 
> 赞同：2
> 
> 时间：2012-04-11T13:50:25.047
> 
> 标签：cuda, gpu, nvidia

我一直在阅读有关 Nvidia Cuda 的信息，并且我看到了一些关于 SO 的问题，人们已经回答了这些问题，其中包括“您的问题不适合在 GPU 上运行”的评论。

在我的办公室，我们有一个数据库，其中包含我们查询的大量记录，而且可能需要很长时间。我们已经实现了 SELECT DISTINCT 或它们对值应用大写函数的 SQL 查询。作为对 Cuda 的介绍，我考虑编写一个程序，该程序可以在 GPU 上获取所有字符串并将它们大写。

我一直在读一本关于 Cuda 的书，作者谈到试图让 GPU 内核尽可能多地执行，以隐藏通过 PCI 总线读取数据或将东西放入全局内存中的延迟。由于内存非常小，而且我有数百万个不同的单词，我自然会让总线饱和并让 GPU 内核饿死。

这是一个不会从显卡而不是 CPU 获得出色性能提升的问题吗？

谢谢，

米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T01:17:57.143

由于您的操作/传输比率为 O(1)，因此您将在全局内存访问中遇到相当大的瓶颈。

可能更值得在 GPU 上进行比较，因为它的操作/传输比要大得多。

当您将字符串加载到共享内存中以执行此操作时，您还可以将其大写，有效地包括您之前想要做的事情，等等。

我不禁觉得基于 CPU 的实现可能会给你更好的性能。至少，它会减少你的头痛……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T01:32:18.877

> 我们已经实现了 SELECT DISTINCT 或它们对值应用大写函数的 SQL 查询。

您是否考虑过在表中添加一个包含预先计算的大写字符串版本的列？

我倾向于认为，如果您的数据库完全在 RAM 中并且查询仍然需要“永远”，那么您的数据库可能没有正确构建和索引。检查您的查询计划。

我认为，在正常情况下，您的选择被索引整齐地覆盖，您将无法使用 GPU 进行优化。但也许有些东西可以针对 GPU 进行优化，例如需要表扫描的查询，例如带有通配符的 LIKE 查询和基于计算（值小于等）选择行的查询。当连接列具有许多重复值时，甚至可能是诸如具有许多连接的查询之类的事情。

这种实现的关键是在 GPU 上保留数据库中某些数据的镜像，并使其与数据库保持同步。然后对该数据运行诸如并行缩减之类的操作，以得出行 ID，然后用于针对常规数据库的选择。

不过，在采取这样的步骤之前，我将探索使用时空权衡的数据库查询优化的无数可能性。

# sencha-touch-2 - 我使用 JSP 从数据库中检索数据，我想在使用 senchatouch2 时显示该数据列表？

> ID：10107313
> 
> 赞同：0
> 
> 时间：2012-04-11T13:50:25.273
> 
> 标签：sencha-touch-2

我有以下jsp页面。它正在显示结果。

```
enter code here

<%@page language="java" import="java.sql.*, java.util.*, java.lang.*, net.sf.json.*,       org.json.simple.JSONObject" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"  %>

<%
try{
Class.forName("com.mysql.jdbc.Driver").newInstance();
Connection connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/thermo?user=root&password=");
Statement statement = connection.createStatement();
ResultSet result = statement.executeQuery("select model_number from product");

JSONObject json      = new JSONObject();
JSONArray  addresses = new JSONArray();
//JSONObject address =new JSONObject();
    while(result.next())
    {
        //address.put(result.getString("model_number"));
        addresses.add(result.getString("model_number"));
    }
    json.put("Addresses", addresses);
    out.println(addresses);

response.setContentType("application/json");
response.getWriter().write(json.toString());
}
    catch (JSONException jse)
{ 

}
%>

 and i have following js file.

  I got the following Exception when i run the js file.
[WARN][Anonymous] [Ext.Loader] Synchronously loading 'Ext.dataview.List'; consider     adding 'Ext.dataview.List' explicitly as a require of the corresponding class 
```

:8080/Sample/sdk/src/log/writer/Console.js?_dc=1334137320671:35

[WARN][Anonymous] [Ext.Loader] 同步加载'Ext.data.proxy.JsonP'；考虑明确添加“Ext.data.proxy.JsonP”作为相应类的要求

Uncaught SyntaxError: Unexpected token ::8080/new/modelnumber_list.jsp?_dc=1334137328213&page=1&start=0&limit=25&callback=Ext.data.JsonP.callback1:1

```
enter code here

 `Ext.define('Sample.view.Blog',{
       extend:'Ext.navigation.View',
       xtype:'bloglist',
       config:{
           title:'Blog',
           iconCls:'star',
           scrollable:true,
           styleHtmlContent: true,
           items:{
               xtype: 'list',
               itemTpl: '{model_number}',
               store:{
                   autoLoad: true,
                   fields: ['model_number'],
                   proxy:{
                       type: 'jsonp',
                       url: 'modelnumber_list.jsp',
                       reader:{
                           type: 'json',
                            rootProperty: 'root'
                       }
                   }
               }   
           }
       }
       });

Thank you. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:45:44.260

尝试在 app.js 而不是视图上添加它，这将删除警告。

```
requires: ['Ext.data.Store', 'Ext.data.proxy.JsonP', 'Ext.dataview.List'], 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:07:28.097

尝试在`xtype:'bloglist',`. 我认为这将处理您收到的警告。

```
requires: ['Ext.data.proxy.JsonP'], 
```

# php - 使用 IF-ELSE php MYSQL 插入或更新

> ID：10107314
> 
> 赞同：0
> 
> 时间：2012-04-11T13:50:28.007
> 
> 标签：php, mysql

```
DONOR
donor-nic----username-----status
111----------ali----------available
222---------usman--------notavailable 
```

另一个是

```
DONATION
donation_id------donor_nic-----date---
1----------------111----------2012/03/04
2---------------111-----------2012/06/07
3----------------111---------2012/07/08
4----------------222---------2012/03/03 
```

现在我想更新日期，如果它已经退出对应于donor_nic，如果日期不存在我想插入那个新日期，。

我正在使用此查询根据相应的donor_nic 获取所有日期

```
SELECT donor.donor_nic, donation.lastdonationdate
FROM donor
JOIN donation ON donor.donor_nic = donation.donor_nic
WHERE username = 'ali'
GROUP BY donation.lastdonationdate 
```

现在这个查询在 phpmyadmin 中工作.. 但是当我在我的页面中使用它时.. 它不匹配日期.. 我匹配这样的日期

```
 $sql= SELECT donor.donor_nic, donation.lastdonationdate
    FROM donor
    JOIN donation ON donor.donor_nic = donation.donor_nic
    WHERE username = 'ali'
    GROUP BY donation.lastdonationdate

$res=mysql_query($sql, $con);

if($res == $date)
{
echo "update";
}
else
{
echo "insert";
} 
```

但这件事没有用..可能是我在条件（if-else）语句中犯了错误..请帮助我该怎么办..提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:54:47.563

问题是您的`$res`变量是结果集对象，而不是字符串或日期值。还有你在哪里定义的`$date`？

如果要从查询中获取单个结果，请使用：

```
$res=mysql_result(mysql_query($sql, $con),0,1); 
```

这将从结果的第一行返回第二列，（即`,0,1`定义为函数参数的`mysql_result`内容）我认为这是您要查找的日期。

检查 mysql_result 的文档：http: [//php.net/manual/en/function.mysql-result.php](http://php.net/manual/en/function.mysql-result.php)

mysql_query 总是返回一个数组，而不是一个特定的值。假设您的`$date`变量格式正确，上述应该可以工作。

**编辑**

您还需要更改定义的方式`$SQL`，在其周围加上引号，如下所示：

```
$sql= "SELECT donor.donor_nic, donation.lastdonationdate
    FROM donor
    JOIN donation ON donor.donor_nic = donation.donor_nic
    WHERE username = 'ali'
    GROUP BY donation.lastdonationdate"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T05:11:12.153

对于我设置为变量的解决方案 - 再次测试的 nic 和测试的日期，设置在脚本的顶部。已在我认为需要的地方进行了编辑，但基本上脚本设置为变量（您可以更新以通过表单或其他方式检索）。然后构建第一个 mysql 查询，它将返回所需的 nic 和日期的数组。需要循环内的循环来获取返回的值。值（和键）并存储在自己的数组中，然后我们使用我们预先确定的变量进行搜索，如果插入/更新成功，您会被告知。显然需要工作，但可以完成工作。

```
$nic = "111";
$date2add = "14/12/13";

$sql="SELECT donor.donor-nic, donation.date
FROM donor
JOIN donation ON donor.donor-nic = donation.donor-nic
WHERE username = 'ali'
GROUP BY donation.date";

$res=mysqli_query($mysqli, $sql);

//may need error checking here to verify that $res has data.
$row = mysqli_fetch_array($res, MYSQLI_ASSOC);

//initiate a loop to select values
while ($row = mysqli_fetch_array($res, MYSQLI_ASSOC)) {
    //initiate a loop to store values into an array so that we can compare against later.
foreach ($row as $keys => $val) {
    echo "<br />$keys...$val<br />";
    $keysar[] = $keys;
    $valsar[] = $val;
}
}

 //using values above we will search the $valsar (created in the above loop) for $date2add (the date req. to be searched against)
if (in_array($date2add, $valsar) == $date2add) {
$sql = "UPDATE donation SET date = '$date2add' WHERE nic='$nic'";
$res = mysqli_query($mysqli, $sql) or trigger_error("Query: $sql\n<br />MySQL   Error: " . mysqli_error($mysqli));
if ($res) {
    echo "Record  updated correctly<br />";
} else {
    echo "failed  to update<br />";
}
} else {
  //these variables will have to set from somewhere if the script will insert correctly.
$sql = 'INSERT INTO donation ("$donation_id", "$nic", "$date")';
$res = mysqli_query($mysqli, $sql);
if (mysqli_affected_rows($mysqli) == 1) {
    echo "it inserted correctly<br />";
} else {
    echo "failed  to insert<br />";
}
} 
```

# matrix - 从三个已知点获取变换矩阵

> ID：10107328
> 
> 赞同：2
> 
> 时间：2012-04-11T13:51:01.093
> 
> 标签：matrix, transformation, pitch

我有三个 3d (x,y,z) 点。我通过使用 kinect 跟踪对象的角落来获得它们。

我现在想相应地平移和旋转 3d 模型。

我通过这样做得到滚动和俯仰：（我正在使用 openframeworks.cc 所以一些类方法对人们来说可能看起来很奇怪）

```
ofVec3f v10 = pointB - pointA;
ofVec3f v20 = pointC - pointA;  

v10.normalize();
v20.normalize();

//create rotation matrix for roll+pitch relative to up vector 0,0,1
ofVec3f normaleVec = v10.crossed(v20);
ofVec3f fromVec = ofVec3f(0,0,1);       
ofVec3f toVec = normaleVec;

mMR0.makeRotationMatrix(fromVec,toVec); 
```

要获得航向/偏航，我这样做： ofVec3f myV0_flat = avePointA*mMR0.getInverse(); ofVec3f myV1_flat = avePointB*mMR0.getInverse();

```
//get points relative to origion
ofVec3f myV10_flat = myV1_flat - myV0_flat;
//create rotation matrix for heading relative to flat 2d plane
float angle = atan2(myV10_flat.x,myV10_flat.y)/M_PI*180;

mMR1.makeRotationMatrix(angle,fromVec); 
```

最后创建平移矩阵并组合所有矩阵：

```
 mMT1.makeTranslationMatrix(avePointD); //translate from origin 

ofMatrix4x4 mMc;
mMc = mMR0 * mMR1 * mMT1; 
```

但是当我的 3d 模型旋转时，它似乎总是以相同的角度倾斜。

我的问题是。我将如何分别计算滚动和俯仰，这样我就可以知道它在哪里下降以及如何修复它。

谢谢。s。

# google-docs-api - 上传时缺少 Google Docs 缩略图链接，无需转换

> ID：10107334
> 
> 赞同：2
> 
> 时间：2012-04-11T13:51:20.203
> 
> 标签：google-docs-api

我一直在使用 Gdocs API 上传图片而不进行转换。在响应中，我曾经在 feed.entry.link[x] 下看到一个缩略图条目。自 2 天前以来，这似乎丢失了。有谁知道 API 是否发生了变化？是否有其他方法可以获取上传文件的缩略图 URL？

谢谢！罗德里克·福赛思

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:58:19.180

我不知道 API 有任何更改，缩略图应该仍然可以作为 rel="http://schemas.google.com/docs/2007/thumbnail" 的链接使用。

您能否向我们展示您的请求和不包含缩略图链接的响应？

编辑：生成缩略图需要很短的时间，您可能无法在创建请求的响应中得到它。如果您在创建资源后获取资源，它将显示出来。

# android - 按钮无法解析为类型

> ID：10107337
> 
> 赞同：3
> 
> 时间：2012-04-11T13:51:25.900
> 
> 标签：android, eclipse

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class ProjectActivity extends Activity{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button tut1 = (Button) findViewById(R.id.tutorial1);
        tut1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

            startActivity(new Intent("android.intent.action.TUTORIALONE"));

            }
        });

    }
} 
```

遵循了 youtube 教程，但我在此行中遇到错误：

```
setContentView(R.layout.main); 
```

“按钮无法解析为类型”

我是android dev的新手，所以我很困惑。帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T15:04:52.527

将光标移动到代码中的“按钮”并选择“导入按钮（android.widget）”..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:56:05.523

您的 main.xml 布局中是否定义了一个 Button？就像是：

```
<Button android:text="Click me" android:id="@+id/tutorial1"
    android:layout_width="wrap_content" android:layout_height="wrap_content"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:04:51.793

您是否在根布局中添加了以下内容：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T14:10:38.377

在你的 xml 中使用它：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/tutorial1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" >
    </Button>

</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-08T20:22:33.617

请尝试以下步骤： 1\. 删除 import android.R（可能是不小心导入了） 2\. 清理项目 3\. 重新构建项目

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-03-14T18:01:42.103

将光标移动到代码中的“按钮”并按`ALT + Enter`

我加粗你必须按`alt + enter`

```
Button tut1 = **(Button)** findViewById(R.id.tutorial1); 
```

# mysql - Mysql：在免费服务器条件下，对新的 innodb 表的预期写入性能是多少

> ID：10107339
> 
> 赞同：0
> 
> 时间：2012-04-11T13:51:33.120
> 
> 标签：mysql, performance, innodb

我想知道以下服务器配置的预期写入性能。

```
OS: ubuntu 10.04 
Processor: 2 cores each with 2.6 GHz on same die
RAM : 2GB RAM
hard disc: 450GB
Mysql version 5.1.61 
innodb_buffer_pool_size = 8MB
innodb_log_buffer_size = 8MB
innodb_log_buffer_size = 1
log-bin : YES
rpm: 7200 
```

我正在使用 mysql（如转储导入）从同一台服务器进行插入。我的转储将有一个接一个的单独插入，没有交易。表非常简单，有 5 个属性，除了 ID 中的主键和一个空的主键之外没有索引。

当前性能是 6 分钟插入 10K 记录。

```
Thanks in advance.
Regards,
UDAY 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:23:31.787

您可能会发现以下感兴趣的文章。特别注意：

*   innodb_buffer_pool_size
*   innodb_log_file_size
*   innodb_log_buffer_size
*   innodb_flush_log_at_trx_commit
*   启动事务并提交/回滚

*   [http://www.mysqlperformanceblog.com/2006/09/29/what-to-tune-in-mysql-server-after-installation/](http://www.mysqlperformanceblog.com/2006/09/29/what-to-tune-in-mysql-server-after-installation/)

*   [http://vimeo.com/20990641](http://vimeo.com/20990641)

*   [http://jpipes.com/presentations/perf_tuning_best_practices.pdf](http://jpipes.com/presentations/perf_tuning_best_practices.pdf)

*   [http://dev.mysql.com/doc/refman/5.0/en/commit.html](http://dev.mysql.com/doc/refman/5.0/en/commit.html)

一个简单的例子：

```
drop table if exists users;
create table users
(
user_id int unsigned not null auto_increment primary key,
username varchar(32) unique not null
)
engine=innodb;

drop procedure if exists load_test_data;

delimiter #
create procedure load_test_data()
begin

declare v_max int unsigned default 10000;
declare v_counter int unsigned default 0;

  truncate table users;
  start transaction;
  while v_counter < v_max do
        insert into users (username) values (concat('username ', v_counter+1));
    set v_counter=v_counter+1;
  end while;
  commit;
end #

delimiter ;

mysql> call load_test_data();
Query OK, 0 rows affected (1.69 sec)

mysql> select count(*) from users;
+----------+
| count(*) |
+----------+
|    10000 |
+----------+
1 row in set (0.00 sec) 
```

希望这可以帮助 ：）

# javascript - Javascript pub/sub 实现适用于函数，但不适用于对象的方法

> ID：10107340
> 
> 赞同：1
> 
> 时间：2012-04-11T13:51:34.720
> 
> 标签：javascript, function, object, methods, publish-subscribe

我正在尝试在 javascript 中实现一个简单的 Pub/Sub 对象，这是我的代码：

```
var PubSub=new function(){
    this.subscriptions=[];
    this.subscribe=function(topic,callback){
        if(!this.subscriptions[topic]){
            this.subscriptions[topic]=[];
        }
        this.subscriptions[topic].push(callback);
    }
    this.unsubscribe=function(topic,callback){
        if(this.subscriptions[topic]){
            for(var i=this.subscriptions[topic].length-1;i>=0;i--){
                if(this.subscriptions[topic][i]==callback){
                    this.subscriptions[topic].splice(i,1);
                }
            }
        }
    }
    this.publish=function(topic,data){
        if(this.subscriptions[topic]){
            for(var i=this.subscriptions[topic].length-1;i>=0;i--){
                this.subscriptions[topic][i](data);
            }
        }
    }
} 
```

现在，订阅一个简单的函数，然后发布一些东西效果很好：

```
PubSub.subscribe("test",print); //print: shell function
PubSub.publish("test","hello"); //print outputs "hello" 
```

但是，订阅一个作为对象方法的函数是行不通的：

```
var a=new function(){
    this.c=0;
    this.i=function(x){
        this.c+=x;
    }
}
PubSub.subscribe("test",a.i);
PubSub.publish("test",17);
a.c; //is still 0 
```

我也尝试过使用 apply （假设 data 是一个数组）：

```
PubSub.publish=function(topic,data){
    ...
        this.subscriptions[topic][i].apply(this,data);
    ...
} 
```

它也不起作用，尽管我认为这不是同一个问题：我认为`this`apply 传递的对象覆盖了 的`this`对象`a`，因此`a.i`尝试设置`PubSub.a`而不是`a.a`...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:55:10.570

当你传递`a.i`到 时`PubSub.subscribe`，你已经从它的调用上下文中“分离”了`i`函数。`a`要么使用匿名函数来维护绑定：

```
PubSub.subscribe("test", function (x) { a.i(x); }); 
```

或使用[`Function.bind`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)to preserve `a`aswhen`this`被`i`调用：

```
PubSub.subscribe("test", a.i.bind(a)); 
```

并非所有浏览器都支持NB `Function.bind`，因此您需要[使用 shim](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind#Compatibility)。

# load - 使用作业队列分配工作负载

> ID：10107342
> 
> 赞同：0
> 
> 时间：2012-04-11T13:51:37.720
> 
> 标签：load, message-queue, zeromq

我有一个创建许多作业的应用程序，我希望能够在多台服务器上处理这些作业以分配负载

每个作业都有一个类别，并且一个类别中的所有作业都按特殊顺序排列，因此如果与类别 A 相关的作业 j1 排在与类别 A 相关的作业 j2 之前，则 j1 必须在 j2 之前处理，但与类别 A 相关的作业 j3 B类可以在两者之间进行处理。

关于如何实现这一点，我有两个想法：

1.  将所有作业组成一个队列，并让多个工作人员从该队列中拉出。当一个工人拉出与 A 类相关的工作时，它必须锁定与 A 类相关的工作，这样其他人就不会开始处理这些工作了。然后它会在完成后释放锁。

2.  每个类别都有一个队列，然后告诉工作人员从哪个队列中提取。如果只有一个工作人员负责类别队列，则不必锁定它。一个工作人员可以负责许多队列。

我喜欢一个队列的想法，而不必为每个工作人员指定一个特殊的队列，但我不喜欢必须为每个类别实现某种信号量的想法。

到目前为止，我使用 Redis 进行排队取得了巨大的成功，但我已经开始研究 zeromq，它有更多可能对我有帮助的模式。

这样做的最佳方法是什么，您可以推荐哪些工具/库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:03:55.840

您可以尝试使用[Gearman](http://gearman.org)：

> Gearman 提供了一个通用的应用程序框架，将工作外包给其他更适合完成工作的机器或进程。它允许您并行工作、负载平衡处理以及在语言之间调用函数。它可用于各种应用程序，从高可用性网站到数据库复制事件的传输。

它允许您在服务器之间分配工作负载（并且，从案例研究中读取，看起来很擅长），它还允许您将任务的优先级设置为高/低/正常，您可以使用它（如果我了解您的大小写正确）以确保按应有的顺序处理作业。

# gis - 南美的 xllcorner 和 yllcorner 是什么？

> ID：10107346
> 
> 赞同：0
> 
> 时间：2012-04-11T13:51:58.453
> 
> 标签：gis, arcgis

我有一张南美洲地图，我想将其插入使用 arcGIS 投影为 WGS84 的全球地图中。为了放在正确的位置，必须在 ASCII 文件中正确分配 xllcorner 和 yllcorner。我一直在通过互联网搜索，但没有找到正确的值。任何建议或帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:13:35.340

南美洲的左下角没有一般坐标。这在很大程度上取决于您使用的地图及其坐标系。我认为你能做的最好的事情就是对你的图像进行地理校正以获得正确的投影。

# python - 如何处理 pylint 消息：ID:W0612 未使用变量

> ID：10107350
> 
> 赞同：26
> 
> 时间：2012-04-11T13:52:16.293
> 
> 标签：python, coding-style, pylint

我正在使用 pylint 将一些代码更新为 PEP 8 标准。部分代码抛出 W0612 未使用的变量错误，但这是因为它使用了一个返回 (x,y) 的模块，例如在这种特殊情况下只需要 x 时，这就是所做的。

```
(var_1, var_2) = func()

def func():
    a="a"
    b="b"
    return (a,b) 
```

然后返回 var_1 但从未使用 var_2 并因此引发错误。我该如何处理？我在想这个

```
var = func()[0] 
```

处理它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-11T13:55:58.760

我相信这`a, dummy = func()`可以解决问题。Pylint 允许（如果我没记错的话）以`_`or开头的未使用的变量名称`dummy`，例如`dummy_index`.

您可以通过将`--dummy-variables-rgx`选项传递给 Pylint 来配置它。这指定了捕获虚拟变量名称的正则表达式。

从[Pylint 1.6.0 文档](https://docs.pylint.org/en/1.6.0/features.html#id17)：

> 虚拟变量-rgx：
> 
>     与虚拟变量名称匹配的正则表达式（即预期未使用）。默认值：(_+[a-zA-Z0-9]*?$)|dummy

**注意**：使用`_`确实会引起混乱（道具：Sven Marnach）。有一个约定使用单下划线作为半私有标识符的前缀，双下划线当然是特殊 Python 方法的前缀，最重要的是，在需要本地化的程序中，有一个别名`gettext()`函数的约定，如.`_()``_("text to translate")`

# objective-c - iOS / Flickr - 使用 ObjectiveFlickr 将照片上传到另一个用户相册

> ID：10107353
> 
> 赞同：4
> 
> 时间：2012-04-11T13:52:25.083
> 
> 标签：objective-c, ios, upload, photo, flickr

我正在尝试开发一个 iOS 应用程序，将用户的照片上传到我的相册中。可以使用我的登录创建一个将用户照片上传到默认相册的应用程序吗？例子：

我妈妈下载了该应用程序，但她没有 Flickr 帐户。她拍了一张照片，应用程序将照片上传到我的相册，我的用户名和密码存储在应用程序中。在我的 flickr 帐户和我的相册中，我将拥有用户选择上传到我的相册的所有照片！

这是可能的？

谢谢

# linux - 内核模块到以太网数据包回显

> ID：10107367
> 
> 赞同：1
> 
> 时间：2012-04-11T13:53:43.503
> 
> 标签：linux, networking, module, kernel, ethernet

我开发了一个 linux 内核模块来重新传输一些以太网数据包（做回声）。数据包到达，我检查以太网目标地址，如果是给我的，我重新传输。如果不是我什么都不做。

我使用 dev_pack_eth 定义我的协议处理程序以接收所有以太网数据包（EHT_P_ALL）和 dev_queue_xmit 以传输接收到的 skb buff。

它有效，回声功能正常，但......

有时，很多时候。内核崩溃，我不知道为什么。

当我重新传输数据包时，我返回 NET_RX_Sucess。

当我不重新传输时，我使用 kfree_skb 释放收到的 skb buff 并返回 NET_RX_DROP。

我认为我的问题在于这个问题。你能帮助我吗？

如果需要，我可以发布内核模块代码。

此致！

------------编辑：添加代码--------

```
#include <linux/module.h>   /* Needed by all modules */
#include <linux/kernel.h>   /* Needed for KERN_INFO */
#include <linux/init.h>     /* Needed for the macros */
#include <linux/skbuff.h>
#include <linux/if_ether.h>
#include <linux/netdevice.h>
#include <linux/netfilter.h>
#include <linux/netfilter_ipv4.h>
#include <linux/netfilter_bridge.h>
#include <asm-generic/types.h>

/*Buscar as interfaces de rede*/
struct net_device *dev_eth0;
struct net_device *dev_eth1;
int contador;

static struct packet_type hook; /* Initialisation routine */

void handler_add_config (void);
void handler_remove(void);
void print_mac_hdr(struct ethhdr *eth);

static int hook_func( struct sk_buff *skb)
{

        struct ethhdr *eth;    
        struct ethhdr aux;

        eth= eth_hdr(skb)
        print_mac_hdr(eth);

       /*If destination isn't the same that dev_addr, the packet is not for me: do nothing*/
        if(memcmp(eth->h_dest,skb->dev->dev_addr,ETH_ALEN)!=0)
            {
            printk("NÃ£o sÃ£o iguais!!!\n");
            }
        else
            {
        /*Swap addr*/
            memcpy(&(aux.h_dest),eth->h_dest,ETH_ALEN);
            memcpy(eth->h_dest,eth->h_source,ETH_ALEN);
            memcpy(eth->h_source,&(aux.h_dest),ETH_ALEN);
     /*Re build ther hearders*/
            skb->data = (unsigned char *)skb->mac_header;
            skb->len += ETH_HLEN;

            skb->pkt_type = PACKET_OUTGOING;

                  /*Send*/
                if(dev_queue_xmit(skb)!= NET_XMIT_SUCCESS)
                 {
                      printk("Erro na transmissÃ£o\n");
                 }
                else
                 {
                      printk("Trama retransmitida com sucesso\n");
                      return NET_RX_SUCCESS;
                 }

            }

    kfree_skb(skb);
    return NET_RX_DROP;
}

/*Print eth  headers*/
void print_mac_hdr(struct ethhdr *eth)
{
    printk("Destino: %02x:%02x:%02x:%02x:%02x:%02x \n",eth->h_dest[0],eth->h_dest[1],eth->h_dest[2],eth->h_dest[3],eth->h_dest[4],eth->h_dest[5]);
    printk("Origem: %02x:%02x:%02x:%02x:%02x:%02x\n",eth->h_source[0],eth->h_source[1],eth->h_source[2],eth->h_source[3],eth->h_source[4],eth->h_source[5]);
    printk("Proto: 0x%04x\n",ntohs(eth->h_proto));

}

/*Configure Protocol Handler*/

void handler_add_config (void)
{
        hook.type = htons(ETH_P_ALL);
        hook.func = (void *)hook_func;
        hook.dev = NULL;
        dev_add_pack(&hook);
        printk("Handler Protocol adicionado!!!!\n");

}
/*Unregist protocol handler*/
void handler_remove(void)
{
    dev_remove_pack(&hook);
    printk("Handler Protocol removido!!!!\n");
    synchronize_net();/*Sincronizar a rede!*/
}

/*Init module and protocol handler*/
static int __init hook_init(void)
{

    printk("Hello:I'm the hook module!!!!\n");
    contador =0;
    dev_eth0=dev_get_by_name(&init_net,"eth0");
    dev_eth1=dev_get_by_name(&init_net,"eth1");
    handler_add_config();
    return 0;
}

/*Remove module and protocol handler*/
static void __exit hook_exit(void)
{

    printk("Hook module says Goodbye!!!!!\n");
    handler_remove();

}

module_init(hook_init);
module_exit(hook_exit);
MODULE_LICENSE("GPL"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-18T09:02:28.330

Look at af_x25.c in net/x25 for a sample implementation of the same where they return 0 even on a drop. BTW didn't understand why are you incrementing skb->len when all you are doing is swapping the mac addresses ? I.e why the need to rebuild hdrs in that sense? Am i missing something here?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:38:15.973

我想当你返回时**返回 NET_RX_DROP；**它会导致问题，因为钩子中基本上有返回类型......

```
Return Code          Meaning
  NF_DROP        Discard the packet.
  NF_ACCEPT      Keep the packet.
  NF_STOLEN      Forget about the packet.
  NF_QUEUE       Queue packet for userspace.
  NF_REPEAT      Call this hook function again. 
```

＆你正在返回 NET_RX_DROP 所以尝试使用**NF_DROP**。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-09-01T21:44:54.330

您可能正在崩溃，因为您正在通过调用 kfree_skb(skb); 释放 sk_buff 的 slngle 副本；

# haskell - 预期类型和主要

> ID：10107371
> 
> 赞同：2
> 
> 时间：2012-04-11T13:53:52.073
> 
> 标签：haskell

总 Haskell 菜鸟在这里。我有一个简单的功能，和一个主要的。我不知道这个错误是什么意思：

```
Couldn't match expected type `IO t0' with actual type `Bool'
In the expression: main
When checking the type of the function `main' 
```

编译代码时：

```
is_instructor :: String -> Bool
is_instructor "Jeremy Erickson" = True
is_instructor x = False

main :: Bool
main = is_instructor "foo" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:01:53.643

`main`是运行程序时调用的东西。预计程序会以某种方式与外界交互（读取输入、打印输出等），因此 a`main`应该具有 type 是合理的`IO something`。出于类型安全和简单的原因，这是 Haskell 中的要求，就像`main`在 Java 中必须有 type一样`public static void main(String[] arrgh)`。

您可能希望您重视被打印，所以

```
main :: IO ()
main = print $ is_instructor "foo" 
```

会是你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T19:03:56.840

你肯定听说过 Haskell 是一种纯粹的函数式语言。这意味着（除其他外）一个函数在 Haskell 中唯一能做的就是计算一个取决于参数的结果。函数不能执行 I/O，或者其结果取决于参数值以外的其他内容。

但是 Haskell 允许您编写执行 I/O 和其他有效操作的程序。这怎么可能？嗯，这意味着在 Haskell 中，执行 I/O 或副作用的东西不是函数。他们是别的东西。人们经常把它们称为**行动**。Haskell 中的 I/O 动作有以下形式的类型`IO a`。

您在这里遇到的错误是，`main`Haskell 程序的入口点必须是类型为 的操作`IO ()`。But`is_instructor`是 type 的函数`String -> Bool`，并且`is_instructor "foo"`是`Bool`.

Haskell 不允许您像那样随意混合和匹配纯函数和动作。应用函数和执行动作是两件不同的事情，需要不同的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T13:56:25.730

你不能有一个`main`带有 type 的函数`Bool`，它总是需要在`IO`monad 中。您可能想要的是*打印出*这个布尔值之类的东西。然后就这样做！

```
main :: IO()
main = print $ is_instructor "foo" 
```

# sql - 如何扫描两个查询之间的差异？

> ID：10107375
> 
> 赞同：1
> 
> 时间：2012-04-11T13:54:03.427
> 
> 标签：sql, database, sql-server-2005, hash, checksum

我有一个每天加载新数据的表和另一个包含该表更改历史的表。检查自上次加载数据以来是否有任何数据发生更改的最佳方法是什么？

例如，我有针对不同国家/地区的一些策略的表@a，表@b 跟踪对表@a 所做的更改。我可以使用 checksum() 对可以更改的字段进行散列，如果现有散列与新散列不同，则将它们添加到表中。然而，MSDN 认为这不是一个好主意，因为可能会发生“冲突”，例如，两个不同的值映射到同一个校验和。

校验和的 MSDN 链接 [http://msdn.microsoft.com/en-us/library/aa258245(v=SQL.80).aspx](http://msdn.microsoft.com/en-us/library/aa258245(v=SQL.80).aspx)

示例代码：

```
declare @a table
(
    ownerid bigint
    ,Strategy varchar(50)
    ,country char(3)
)
insert into @a
select 1,'Long','USA'

insert into @a
select 2,'Short','CAN'

insert into @a
select 3,'Neutral','AUS'

declare @b table
(
    Lastupdated datetime
    ,ownerid bigint
    ,Strategy varchar(50)
    ,country char(3)

)

insert into @b
(
    Lastupdated
    ,ownerid
    ,strategy
    ,country
)
select 
    getdate()
    ,a.ownerid
    ,a.strategy
    ,a.country
from @a a left join @b b
    on a.ownerid=b.ownerid
where
    b.ownerid is null

select * from @b

--get a different timestamp
waitfor delay '00:00:00.1'

--change source data
update @a 
set strategy='Short'
where ownerid=1

--add newly changed data into 
insert into @b
select 
    getdate()
    ,a.ownerid
    ,a.strategy
    ,a.country
from 
    (select *,checksum(strategy,country) as hashval from @a) a 
    left join 
    (select *,checksum(strategy,country) as hashval from @b) b
    on a.ownerid=b.ownerid
where 
    a.hashval<>b.hashval

select * from @b 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:29:38.570

如果您对问题使用不同的方法，则无需检查更改。

在您的主表上创建一个触发器`INSERT`，`UPDATE`并`DELETE`通过写入表来跟踪您的更改`@b`。

如果您在 Internet 上搜索“ **SQL 审计表**”，您会发现许多页面描述了该过程，例如：[向 SQL Server 数据库添加简单的基于触发器的审计](http://weblogs.asp.net/jgalloway/archive/2008/01/27/adding-simple-trigger-based-auditing-to-your-sql-server-database.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T19:24:27.533

感谢@newenglander，我能够使用 EXCEPT 找到更改的行。正如@Tony 所说，我不确定多个更改将如何工作，但这里是相同的示例代码，经过重新设计以使用 except 而不是 CHECKSUM

```
declare @a table
(
    ownerid bigint
    ,Strategy varchar(50)
    ,country char(3)
)
insert into @a
select 1,'Long','USA'

insert into @a
select 2,'Short','CAN'

insert into @a
select 3,'Neutral','AUS'

declare @b table
(
    Lastupdated datetime
    ,ownerid bigint
    ,Strategy varchar(50)
    ,country char(3)

)

insert into @b
(
    Lastupdated
    ,ownerid
    ,strategy
    ,country
)
select 
    getdate()
    ,a.ownerid
    ,a.strategy
    ,a.country
from @a a left join @b b
    on a.ownerid=b.ownerid
where
    b.ownerid is null

select * from @b

--get a different timestamp
waitfor delay '00:00:00.1'

--change source data
update @a 
set strategy='Short'
where ownerid=1

--add newly changed data using EXCEPT
insert into @b 
select getdate(),
    ownerid,
    strategy,
    country
from 
(
    (
    select 
        ownerid
        ,strategy
        ,country 
    from @a changedtable
    ) 
    EXCEPT 
    (
    select 
        ownerid
        ,strategy
        ,country 
    from @b historicaltable
    )
) x

select * from @b 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T10:01:58.693

使用 编写查询怎么样[`EXCEPT`](http://msdn.microsoft.com/en-us/library/ms188055.aspx)？只需为两个表编写查询，然后`EXCEPT`在它们之间添加：

```
(SELECT * FROM table_new) EXCEPT (SELECT * FROM table_old) 
```

结果将`table_new`是不在其中的条目`table_old`（即已更新或插入的条目）。

注意：要获取最近从 中删除的行`table_old`，您可以颠倒查询的顺序。

# java - 数据java的XML解析

> ID：10107376
> 
> 赞同：1
> 
> 时间：2012-04-11T13:54:10.600
> 
> 标签：java, xml, parsing, xml-parsing

我有以下 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>

<root>
    <eq1>-3.874999999999* Math.pow(x, 4.0) + 48.749999999993* Math.pow(x, 3.0)</eq1>
    <eq2>-0.166666666667* Math.pow(x, 4.0) + 2.166666666667* Math.pow(x, 3.0)</eq2>
</root> 
```

我想解析这两个方程并将它们放在变量中以进行进一步计算。我目前使用的方法是解析它们并将它们放在一个字符串中，但它不起作用，因为我需要使用方程式执行计算。

有没有更好的方法可以解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:35:24.680

您可以使用 JAXB 将 XML 文件解组为具有这些字段的自定义对象。

您的对象可能看起来像：

```
@XmlRootElement
public class Equations {

    String eq1;
    String eq2;

    // create getters and setters as well
    // and put the @XmlElement annotation on the setters
} 
```

然后从 Equations 对象中使用它们。（`equations.getEq1()`例如）；

这是一个非常简单快速的 JAXB 介绍：[http ://www.mkyong.com/java/jaxb-hello-world-example/](http://www.mkyong.com/java/jaxb-hello-world-example/)

关于方程式的执行，一种方法是解析字符串并查看您拥有哪些指令和数字并将它们放在堆栈上，然后当所有内容都被解析后，执行操作（您将在堆栈上获得数字和操作）。也许需要做更多的工作，但这绝对是解决问题的有趣方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:03:35.167

试试[BeanShell](http://www.beanshell.org/manual/embeddedmode.html)评估器：

```
import bsh.EvalError;
import bsh.Interpreter;

public class BeanShellInterpreter {

  public static void main(String[] args) throws EvalError {

    Interpreter i = new Interpreter();  // Construct an interpreter
    i.set("x", 5);
    // Eval a statement and get the result
    i.eval("eq1 = (-3.874999999999* Math.pow(x, 4.0) + 48.749999999993* Math.pow(x, 3.0))");
    System.out.println( i.get("eq1") );
  }
} 
```

# scala - 抽象类型构造函数

> ID：10107378
> 
> 赞同：3
> 
> 时间：2012-04-11T13:54:18.410
> 
> 标签：scala, generics, types, abstraction, type-parameter

我有以下玩具功能：

```
def test[T](x: Option[List[Option[T]]])
{
    for (a <- x; b <- a; c <- b) println(c)
    println("----------")
} 
```

我如何概括上述函数，使其也适用于`Option[Option[Option[T]]]`or或and`List[List[List[T]]]`的任何其他组合？`Option``List`

以下尝试显然不起作用，因为类型不是类型构造函数：

```
def test2[Q,R,S,T](x: Q[R[S[T]]]) 
```

在 C++ 中，我可能会为此目的使用模板模板。Scala有类似的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:28:24.630

你可以使用[Scalaz](http://code.google.com/p/scalaz/)吗？如果是这样，使用[`Each`](https://github.com/scalaz/scalaz/blob/master/core/src/main/scala/scalaz/Each.scala)类型类很容易：

```
import scalaz._, Scalaz._

def test[Q[_]: Each, R[_]: Each, S[_]: Each, T](x: Q[R[S[T]]]) {
  for (a <- x; b <- a; c <- b) println(c)
  println("----------")
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:37:47.987

Option 和 List 都实现了 for 循环使用的 foreach 方法，但没有通用的超类型。然而，结构类型通过将我们想要的方法声明为类型来实现。

```
type E[V] = {def foreach[U](f: (V) => U)}
def test2[Q[R] <: E[R],R[S] <: E[S],S[T] <: E[T],T](x: Q[R[S[T]]]) {
  for (a <- x; b <- a; c <- b) println(c)
  println("----------")
} 
```

例子：

```
scala> test2(List(List(List(8))))
8

scala> test2(Some(List(Some(8))))
8 
```

如果将 for 循环更改为使用 yield，则需要更改 E 以实现 flatmap 和 map-methods 而不是 foreach。

# c# - 无法为运行时创建的按钮设置动画

> ID：10107379
> 
> 赞同：0
> 
> 时间：2012-04-11T13:54:20.257
> 
> 标签：c#, wpf

我有一个包含一堆按钮的 UniformGrid，当 UniformGrid 第一次显示它时，它会循环显示每个按钮的动画。这一切都很好，但是当用户按下某个按钮时，所有按钮都会从网格中删除，并且会在其中创建一些新按钮并再次设置动画。

这是我在代码中创建按钮的方式

```
 int ModelsAnimateIndex = 0;  // Index of button to animate

    private void GetModels()
    {
        DirectoryInfo di = new DirectoryInfo(Globals.ModelsPath);
        FileInfo[] fis = di.GetFiles();

        // ugModels is the UniformGrid

        switch (fis.Length)
        {
            case 1:
                ugModels.Rows = 1;
                ugModels.Columns = 1;
                break;
            case 2:
                ugModels.Rows = 1;
                ugModels.Columns = 2;
                break;
            case 3:
            case 4:
                ugModels.Rows = 2;
                ugModels.Columns = 2;
                break;
            case 5:
            case 6:
                ugModels.Rows = 2;
                ugModels.Columns = 3;
                break;
            case 7:
            case 8:
            case 9:
                ugModels.Rows = 3;
                ugModels.Columns = 3;
                break;
            default:
                break;
        }

        foreach (FileInfo s in fis)
        {
            ugModels.Children.Add(new Button()
            {
                Background = ThemeColour,                             // SolidBrush
                Foreground = new SolidColorBrush(Colors.White),
                Name = "btn" + s.Name.Split('.')[0].Replace(" ",""),
                Style = MainButtonStyle,                              // Button Style
                Content = s.Name.Split('.')[0]
            });
        }
    } 
```

现在按钮单击事件开始为新创建的按钮设置动画

```
private void btnModelSelect_Click(object sender, System.Windows.RoutedEventArgs e)
    {
        // TODO: Add event handler implementation here.
        sbShowMenuButton.Completed += new EventHandler(sbShowModels_Completed);
        Storyboard.SetTargetName(sbShowMenuButton.Children[0], ((Button)ugModels.Children[ModelsAnimateIndex]).Name);
        Storyboard.SetTargetName(sbShowMenuButton.Children[1], ((Button)ugModels.Children[ModelsAnimateIndex]).Name);
        Storyboard.SetTargetName(sbShowMenuButton.Children[2], ((Button)ugModels.Children[ModelsAnimateIndex]).Name);
        sbShowMenuButton.Begin((Button)ugModels.Children[ModelsAnimateIndex]); // Error is here
    } 
```

当第一个按钮尝试设置动画时，出现以下错误

在“System.Windows.Controls.Button”的名称范围内找不到“btnTestModel”名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:42:42.837

我已经解决了我的问题。我需要在这样创建的按钮上创建 RenderTransform。

```
foreach (FileInfo s in fis)
        {
            ugModels.Children.Add(new Button()
            {
                Background = ThemeColour,
                //          This Fixed the problem           //
                RenderTransform = new TransformGroup()
                {
                    Children = new TransformCollection()
                    {
                        new ScaleTransform(),
                        new SkewTransform(),
                        new RotateTransform(),
                        new TranslateTransform()
                    }
                },                
                ////////////////////////////////////////////////
                BorderBrush = null,
                Foreground = new SolidColorBrush(Colors.White),
                Name = "btn" + s.Name.Split('.')[0].Replace(" ", ""),
                Margin = new Thickness(12, 12, 12, 12),
                FontSize = 48,
                Style = MainButtonStyle,
                Content = s.Name.Split('.')[0]
            });
        } 
```

感谢马特的建议，我还修改了故事板的设置

```
private void btnMenu_Click(object sender, System.Windows.RoutedEventArgs e)
    {
        sbShowMenuButton.Completed += new EventHandler(sbShowModels_Completed);
        Storyboard.SetTarget(sbShowMenuButton, ((Button)ugModels.Children[ModelsAnimateIndex]));            
        sbShowMenuButton.Begin();
    } 
```

# php - php mysql 查询在 phpmyadmin 中有效，但在网页上无效

> ID：10107380
> 
> 赞同：0
> 
> 时间：2012-04-11T13:54:22.863
> 
> 标签：php, mysql

我写了以下查询

```
SELECT COUNT(userID) From statistics WHERE userID = "" 
```

此查询显示未经验证的网站访问次数。

当我使用双引号时，该查询在 phpmyadmin 中有效，但是当我使用如下所示的单引号时它不起作用，它只是给了我存储在表中的记录数

```
 $queryB = "SELECT COUNT(userID) From statistics WHERE userID = ''";
 $resultB =mysql_query($queryA, $con) or die(mysql_error());
 $authB = mysql_result($resultB, "COUNT(userID)");

 echo "the number of authenticated visits were $authB<br />\n"; 
```

我不知道它为什么会坏，有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:01:28.970

你存储你的查询，`$queryB`但你使用`$queryA`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:03:18.917

不确定它是否会起作用......它只是首先想到的是：当你使用转义双引号时怎么样？

$queryB = "SELECT COUNT(userID) From statistics WHERE userID = \"\""

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:03:46.000

您应该对您的代码进行一些更改

```
$queryB = "SELECT COUNT(userID) From statistics WHERE userID = ''";
$resultB =mysql_query($queryB, $con) or die(mysql_error());
$authB = mysql_result($resultB, 0, 0);

echo "the number of authenticated visits were $authB<br />\n"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T14:01:57.607

尝试这个：

```
 $queryB = "SELECT COUNT(userID) AS total From statistics WHERE userID = ''";
 $resultB =mysql_query($queryB, $con) or die(mysql_error());
$authB = mysql_fetch_assoc($resultB);
 echo "the number of authenticated visits were ".$authB['total']."<br />\n"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T14:02:10.533

userID 有默认值吗？如果默认值为 NULL，则将查询更改为

```
$queryB = "SELECT COUNT(userID) From statistics WHERE userID IS NULL"; 
```

# zend-framework - 将活动类应用于 Zend_Navigation 中的锚标记

> ID：10107385
> 
> 赞同：-1
> 
> 时间：2012-04-11T13:54:34.310
> 
> 标签：zend-framework, zend-navigation

我正在使用部分来装饰 Zend_Navigation 以获取所需的输出。一切都很好，除了我在添加标签时遇到`class="active"`困难`<a href..>`。这是我的部分布局`sidebar.phtml`

```
<ul id="menu" class="nav">
<?php foreach($this->container as $page): ?>
    <li class="<?php echo $page->class; ?>"><a href="<?php echo $page->getHref(); ?>"><span><?php echo $page->label; ?></span></a></li>
<?php endforeach; ?>
</ul> 
```

在`<a href="<?php echo $page->getHref(); ?>">`我想`class="active"`为当前页面添加。

我尝试了一些搜索后找到的解决方案。但没有什么对我有用。

例如，大多数解决方案都谈论在控制器中执行此操作

```
$page = $this->view->navigation()->findOneByLabel('Your Label');
if ( $page ) {
  $page->setActive();
} 
```

我还没有测试过这个。因为我在一个`navigation.xml`文件的布局中使用多个导航。我想知道是否有办法可以在部分本身而不是在控制器或其他助手中做到这一点？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:26:47.120

这很简单。在部分视图中，您可以检查哪个页面处于活动状态：

```
if ($page->isActive()) { ... } 
```

从采埃孚文档：

> 注意：注意在页面中使用路由属性时，还要指定路由定义的默认参数（模块、控制器、动作等），否则isActive()方法将无法判断页面是否活跃。这样做的原因是目前没有办法从 Zend_Controller_Router_Route_Interface 对象获取默认参数，也无法从 Zend_Controller_Router_Interface 对象检索当前路由。

# php - iPhone POST 请求总是被 PHP 中的 $_SERVER['REQUEST_METHOD'] 视为 GET

> ID：10107386
> 
> 赞同：4
> 
> 时间：2012-04-11T13:54:38.367
> 
> 标签：php, ios, http

我在 iPhone 上做一个项目。在这里，我必须向 Web 服务发送 POST 请求。我使用 NSMutableURLRequest 和 NSURLConnection 来发送数据，服务器使用 PHP。我发现检查`if ($_SERVER['REQUEST_METHOD'] != "POST")`总是失败，因为返回“GET”，即使我在 localhost 上尝试它也是如此。

我的 POST 请求如下所示（通过 Wireshark 嗅探）：

```
POST tester.php HTTP/1.1
Host: localhost
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:10.0.2) Gecko/20100101 Firefox/10.0.2
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Referer: http://localhost/tester.php
Content-Type: application/x-www-form-urlencoded
Content-Length: 422

protocol=4&msgtype=authorize&merchant=86189919&language=da&ordernumber=1274168351&amount=100&currency=DKK&continueurl=http%3A%2F%2Fquickpay.net%2Ffeatures%2Fpayment-window%2Fok.php&cancelurl=http%3A%2F%2Fquickpay.net%2Ffeatures%2Fpayment-window%2Ferror.php&callbackurl=http%3A%2F%2Fquickpay.net%2Ffeatures%2Fpayment-window%2Fcallback.php&autocapture=0&cardtypelock=&splitpayment=1&md5check=d2259d9db077e0f5a41b4bf271c3c549 
```

当然，那里有很多虚拟文本，通常不会来自 iPhone，但我尝试通过 html 表单进行相同的调用，并且有效。因此，我复制了所有信息，看看是否会有所作为，但无济于事。

我比较了这两个请求（一个来自 iPhone，另一个来自我的 php 页面），它们看起来完全一样。

我大吃一惊——有人对该怎么做有好的建议吗？

**编辑：**

> 您的测试不是针对 post 或 post vs get 进行测试，而是专门针对 POST 进行测试，您可能会遇到案例问题...您是否尝试过在 php 中检查请求本身？– 格雷迪球员

是的，这可能是真的，但该行总是返回 GET，所以如果这就是你的意思，那么案例问题就被涵盖了。

> 另外，请在 iPhone 发送请求时从服务器发布 print_r($_SERVER) 的结果 – Aleks G

Array( HTTP_HOST => 10.11.105.254 HTTP_USER_AGENT => Mozilla/5.0 (iPhone Simulator; CPU iPhone OS 5_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Mobile/9B176 HTTP_ACCEPT => text/html,application/xhtml+ xml *,*应用程序/xml;q=0.9,/*;q=0.8 HTTP_ACCEPT_LANGUAGE => en-us HTTP_ACCEPT_ENCODING => gzip, deflate HTTP_CONNECTION => keep-alive PATH => /usr/bin:/bin:/usr/sbin:/sbin SERVER_SIGNATURE => Apache/2.2.21 (Unix ) DAV/2 PHP/5.3.8 与 Suhosin-Patch 服务器在 10.11.105.254 端口 80 SERVER_SOFTWARE => Apache/2.2.21 (Unix) DAV/2 PHP/5.3.8 与 Suhosin-Patch SERVER_NAME => 10.11.105.254 SERVER_ADDR => 10.11.105.254 SERVER_PORT => 80 REMOTE_ADDR => 10.11.105.254 DOCUMENT_ROOT => /Library/WebServer/Documents SERVER_ADMIN => you@example.com SCRIPT_FILENAME => /Users/tester.php REMOTE_PORT => 51492 GATEWAY_INTERFACE => CGI/ 1.1 SERVER_PROTOCOL => HTTP/1.1 REQUEST_METHOD => GET QUERY_STRING => REQUEST_URI => /tester.php SCRIPT_NAME => /tester.php PHP_SELF => /tester.php REQUEST_TIME => 1334211212 argv =>数组 argc => 0 )*

 *> 您是否尝试检查是否设置了已知变量，例如 $_POST['known_to_be_set_by_client'] ？确定请求是 POST 还是 GET 的不是 PHP，而是 Web 服务器。——蒂姆·波斯特

当我尝试从 iPhone 请求中回显一个已知变量时，它当然是空的。这是有道理的。当我从表单中回显相同的内容时，它就在那里。

> 发布您用来发出实际请求的 iOS 代码。– 克里夫·里鲍多

这是创建请求并发送它的代码：

```
//variables
NSString *protocol = @"4";
NSString *msgtype = @"authorize";
NSString *merchant = @"86189919";
NSString *language = @"da";
NSString *orderNo = @"1274168351";
NSString *amount = @"100";
NSString *currency = @"DKK";
NSString *continueURL = @"http://quickpay.net/features/payment-window/ok.php";
NSString *cancelURL = @"http://quickpay.net/features/payment-window/error.php";
NSString *callbackURL = @"http://quickpay.net/features/payment-window/callback.php";
NSString *autoCapture = @"0";
NSString *cardtypeLock =@"";
NSString *splitText = @"1";
NSString *md5check = @"d2259d9db077e0f5a41b4bf271c3c549";

//setting up the request
NSMutableString *post = [[NSMutableString alloc] initWithString:@"protocol="];
[post appendString:protocol];

[post appendString:@"&msgtype="];
[post appendString:msgtype];

[post appendString:@"&merchant="];
[post appendString:merchant];

[post appendString:@"&language="];
[post appendString:language];

[post appendString:@"&ordernumber="];
[post appendString:orderNo];

[post appendString:@"&amount="];
[post appendString:amount];

[post appendString:@"&currency="];
[post appendString:currency];

[post appendString:@"&continueurl="];
[post appendString:continueURL];

[post appendString:@"&cancelurl="];
[post appendString:cancelURL];

[post appendString:@"&callbackurl="];
[post appendString:callbackURL];

[post appendString:@"&autocapture="];
[post appendString:autoCapture];

[post appendString:@"&cardtypelock="];
[post appendString:cardtypeLock];

[post appendString:@"&splitpayment="];
[post appendString:splitText];

[post appendString:@"&md5check="];
[post appendString:md5check];

//escape characters
NSString *tmp = (__bridge NSString *)CFURLCreateStringByAddingPercentEscapes(
                                        NULL, 
                                        (__bridge CFStringRef)post, 
                                        NULL, 
                                        (CFStringRef)@";/:@+$,~", 
                                        kCFStringEncodingUTF8
                                        );

NSData *body = [tmp dataUsingEncoding:NSUTF8StringEncoding];
//setup url
NSString *urlString =@"http://10.10.225.255/tester.php";
NSURL *quickUrl = [NSURL URLWithString:urlString];

//setup URL request
NSMutableURLRequest *request = [[NSMutableURLRequest alloc]init];
//method
[request setHTTPMethod:@"POST"];
//url
[request setURL:url];

//body data to string
NSString *strData = [[NSString alloc]initWithData:body encoding:NSUTF8StringEncoding];

//content length
NSString *postLenght = [NSString stringWithFormat:@"%d", [body length]];

//set body
[request setHTTPBody:body];

//Dummy data to make the request look like the same from the HTML form.
[request setValue:@"localhost" forHTTPHeaderField:@"Host"];
[request setValue:@"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:10.0.2) Gecko/20100101 Firefox/10.0.2" forHTTPHeaderField:@"User-Agent"];
[request setValue:@"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8" forHTTPHeaderField:@"Accept"];
[request setValue:@"en-us,en;q=0.5" forHTTPHeaderField:@"Accept-Language"];
[request setValue:@"gzip, deflate" forHTTPHeaderField:@"Accept-Encoding"];
[request setValue:@"http://localhost/tester.php" forHTTPHeaderField:@"Referer"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-type"];
[request setValue:postLenght forHTTPHeaderField:@"content-length"];

//send the request to server
if([[NSURLConnection alloc] initWithRequest:request delegate:self]){
    NSLog(@"sending data to quickpay"); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:01:58.910

（这更像是评论而不是答案）如果

```
if ($_SERVER['REQUEST_METHOD'] != "POST") 
```

总是失败（正如您在问题中所写），这**必须意味着**：

```
$_SERVER['REQUEST_METHOD'] == "POST" 
```

所以要么你问错了问题，要么你没有正确验证输入值。请将输出添加`var_dump($_SERVER)`到您的问题中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:53:43.443

我想到了。不出所料，这是我自己的疏忽！当我将 url 加载到 UIWebView 中时，在委托中，我使用了 loadRequest 方法，该方法当然使用 GET 请求来返回内容。相反，我应该使用 loadHTMLString:baseURL: 方法来加载返回的数据。这个错误意味着应用程序在我的初始 POST 之后发出了另一个 GET 请求，这导致了错误。很明显，我很久没有注意到这个额外的请求。*

# liferay - Liferay：如何从资产发布者那里获取前 3 个项目？

> ID：10107387
> 
> 赞同：2
> 
> 时间：2012-04-11T13:54:39.490
> 
> 标签：liferay, assets, publisher

在 Liferay 中，我使用资产发布者在我的新闻页面上发布新闻。我想从页面中获取 3 个热门新闻并将其嵌入到另一个页面中。我怎样才能做到这一点？包含新闻链接的页面 URL 如下所示：

```
Liferay.Widget({ url: 'http://test.com/testnews/101_INSTANCE_f22'}); 
```

Liferay 本身有一个属性，可以在网站上的任何其他地方共享资产发布者实例，但这并不是我想要的。因此，感谢任何帮助或指导。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T16:23:01.793

如果您只想要链接，那么您可以设置显示样式“标题列表”（这会将您带到主新闻页面上的文章）。如果您想在另一个页面中打开链接，请将资产链接行为更改为“在特定 portlet 中查看”。您可以将资产发布者的外观更改为您想要的任何设计。按照路径外观--> 高级样式--> 复制portlet id。现在通过使用 mozilla firefox 选择类、标签等。并编写你的 CSS 代码。这将覆盖基本设计。例如

```
#p_p_id_101_INSTANCE_8f5JPIxv8ml0_ .asset-abstract {
    width: 25%;
    float: left;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T21:26:59.690

您不想在第二页上配置另一个 AssetPublisher 是否有特殊原因？您可以只使用相同的配置，但将显示的结果数量限制为 3 - 完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:11:40.913

问题解决了。这是使用 jQuery 的解决方案：

```
 $.get('http://test.com/news/', function(data) {
      var top3links = $(data).find('a:lt(3)');
      $('#top3').html(top3links); // }); 
```

# jquery - jQuery DataTables 可编辑 - 仅在空值时读取

> ID：10107393
> 
> 赞同：4
> 
> 时间：2012-04-11T13:54:48.567
> 
> 标签：jquery, datatable

我正在使用[jQuery DataTables Editable](http://code.google.com/p/jquery-datatables-editable/)来编辑表格中的数据。（使用 jQuery 1.7.2）数据是从 Asp.net Web 服务中获取的。（见下面的代码）

当值为空时（例如，如果列表中的一个项目没有类别）我不希望该特定项目的类别是可编辑的。因此，该项目的类别应该是只读的。我没有找到办法做到这一点，这可能吗？

```
<table id="admin_list" cellpadding="0" cellspacing="0" border="0">
    <thead>
        <tr>
            <th>Title</th>
            <th>Category</th>
        </tr>                
    </thead>
    <tbody>
    </tbody>
</table>

<script type="text/javascript">
$(document).ready(function () {
    function renderTable(result) {
        var dtData = [];
        $.each(result, function () {
            dtData.push([
                this.title,
                this.category
            ]);
        });

        $('#admin_list').dataTable({
            'aaData': dtData
        }).makeEditable({
            sReadOnlyCellClass: "read_only",
            sUpdateURL:"Service.svc/update",
            "aoColumns":
            [
                {}, //title
                {} //category
            ]
        });
    }

    $.ajax({
        type: "GET",
        url: "Service.svc/list",
        dataType: "json", cache: false, data: {}, contentType: "application/json; charset=utf-8",
        success: function (data) {
            renderTable(data.d);
        },
        error: function (data) {}
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:56:10.047

是的，有一个解决方案。我还提供了一个[例子](http://jsfiddle.net/ey2ae/4/)。

```
function renderTable(result) {
    var dtData = [];
    $.each(result, function () {
        dtData.push([
            this.title,
            this.category ? this.category : "&nbsp;"
        ]);
    });

    $('#admin_list').dataTable({
        'aaData': dtData
    }).makeEditable();
}
$.ajax({
    type: "GET",
    url: "Service.svc/list",
    dataType: "json", cache: false, data: {}, contentType: "application/json; charset=utf-8",
    success: function (data) {
        renderTable(data.d);
    },
    error: function (data) {}
});
​
$("#admin_list tr").live("mousedown", function() {
    console.log($(this).find("td:eq(1)").text());
    if (/^(?:\s+|Click to edit)?$/.test($(this).find("td:eq(1)").text())) {
        $(this)
            .find("td:eq(1)")
            .empty()
            .unbind();
    }
}); 
```

# json - mvc3 实体框架 - 将逗号分隔的字符串列表转换为列表 在 viewmodel 中，允许用户从列表中删除项目

> ID：10107394
> 
> 赞同：0
> 
> 时间：2012-04-11T13:54:51.323
> 
> 标签：json, asp.net-mvc-3, jquery

我正在努力弄清楚如何使用 MVC 做到这一点，

我有一个实体框架对象，它有一个与 db 分隔的列表，（不能改变它在 db 中是一个可怕的 csl 的事实）。我可以轻松地显示列表并让他们手动编辑它。这很容易出错，并且希望将它们拆分并在视图中显示它们的列表。然后允许用户单击链接/按钮并将它们从字符串和数据库中删除，并刷新页面以反映这一点。

我的第一个想法是使用 JQuery 做一个 ajax json 帖子，为单击 @Html.ActionLink 的每个项目执行删除操作。我可以让它执行异步回发，它会删除该项目并发回一个表示新字符串列表的字符串，我可以用它来更新 UL。他们第二次点击链接时，它会给我一个 404，我使用的脚本是：

```
<script type="text/javascript">

    $(document).ready(function () {
    $('.viewSeasonsLink').click(function () {
            var data =
            {
                item: $(this).parents('li').first().find('.flagName').text(), 
                deploymentId: @Model.Id                 
            };
            $.post(this.href, data, function (result) {
                var list = $("#testme");
                list.empty();
                var items = result.split(",");
                $(items).each(function(index) {

//                  /* var link = '&quot;' +  @Html.ActionLink("Remove",     "RemoveItemFromList", "Deployment", null, new { @class = "viewSeasonsLink" }) + '&quot;';     */
                    var link = '<a class="viewSeasonsLink"     href="/SAMSite/Deployment/RemoveItemFromList">Remove</a>';

                list.append('<li><span class="flagName">' + items[index] + '</span> - ' + link + ' </li>');
                    /* list.append('<li><span class="flagName">' + items[index] + '</span> - ' + '\'' + @Html.ActionLink("Remove", "RemoveItemFromList", "Deployment", null,     new { @class = "viewSeasonsLink" }) + '\'</li>');                     */
                });                
            }, "json");
           return false;     
        });
    });
</script> 
```

我无法让操作链接与 jquery 脚本一起使用，因此尝试对其进行硬编码，但仍然没有成功。

然后我想我会尝试做一个简单的操作链接回到一个方法来删除它并返回正常视图，再次发布这个帖子并将更新数据库，但根本不会刷新网页。

```
 <ul id="testme2">
            @foreach (string flag in ViewBag.FeatureFlags)
            {
                <li><span class="flagName">@flag</span> - @Html.ActionLink("Remove", "RemoveItemFromListTest", "Deployment", null, new { @class = "viewSeasonsLink" })</li>
            }
        </ul>

 public ActionResult RemoveItemFromListTest(string item, int deploymentId)
    {
        Deployment deployment = db.Deployments.Single(d => d.Id == deploymentId);
        ViewBag.CustomerId = new SelectList(db.Customers, "Id", "Name", deployment.CustomerId);

        List<string> featureFlags = deployment.FeatureFlags.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries).ToList();
        featureFlags.Remove(item);

        deployment.FeatureFlags = ConvertBackToCommaList(featureFlags);
        ViewBag.FeatureFlags = featureFlags;
        //db.SaveChanges();

        return View("Edit", deployment);
    } 
```

**编辑**

释放我在某一时刻有点愚蠢：

让它做一个完整的回帖并进行更新的第二个测试仍然被 jquery 捕获，（也没有传递值）。我将这一行改为：

```
<li><span class="flagName">@flag</span> - @Html.ActionLink("Remove", "RemoveItemFromListTest", "Deployment", new { item = @flag, deploymentId = Model.Id }, null)</li> 
```

这确实有效，但有点不合时宜，这意味着在单击删除链接之前对表单所做的任何更改都会丢失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:07:32.393

我想我看到了两个问题。一种是`.Post`viewSeasonsList 上的初始点击事件。您正在回发到加载页面的操作，而不是处理删除的操作。在我看来，根据您描述的方法，它们不会是相同的 Action 。

```
var url = '/SAMSite/Deployment/RemoveItemFromList'; 
```

然后

```
$.post(url, data, function (result) { 
```

其次，在 Ajax 响应中，当您重建列表时，您将包含`href`链接的属性。为什么？您不是在使用这些链接导航，而是在发起一个 Ajax 请求，该请求已经设置好。

```
var link = '<a class="viewSeasonsLink">Remove</a>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:02:55.447

最终，我遇到了 jquery 解决方案的一个主要问题。当我添加一个新的 LI 元素时，它并没有连接到 ajax 调用，因为这只是在 document.ready 中发生的。我现在将简单的 .click 替换为一个委托，该委托还将连接在就绪事件之后添加的所有元素，[感谢此页面以获取帮助](https://stackoverflow.com/questions/9213114/dom-not-responding-to-jquery-evers-after-load-function)：

```
$('#featureflaglist').delegate('.removeflaglink', 'click', RemoveFlagFromList); 
```

# java - 为什么使用 long[] 而不是 Date[]？

> ID：10107395
> 
> 赞同：-2
> 
> 时间：2012-04-11T13:54:58.227
> 
> 标签：java, coding-style, date-formatting

[我读过这条编码规则](http://www.appperfect.com/support/java-coding-rules/garbagecollection.html#rule6)，指出您应该更喜欢使用`long[]`over `Date[]`，但没有提供关于*原因*的参考。

我为什么要这样做？使用`long`over 有什么好处`Date`？这会对垃圾回收产生什么影响？或者这只是一堆废话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:58:21.390

这取决于您要达到的目标。例如，`long[]`内存需求比`Date[]`（因为`Date`它是一个对象并且`long`是一个原始对象）要小，但这对您的目的真的很重要吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T07:13:46.710

如果其他人偶然发现这个问题：

> 我不是想成为一个聪明人 :) 但事实上你只有一个对象（实际上是一个 10000 个长数组）或者如果你有 10001 个对象（一个是数组，10000 个日期）是一个巨大的垃圾收集器的区别

来自[卢卡斯·埃德](https://stackoverflow.com/users/521799/lukas-eder)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-11T13:58:00.533

我相信这是因为使用 Date 的数据库可能会遇到很多问题。

# javascript - 如何使用 localStorage 存储用户的页面历史记录？

> ID：10107402
> 
> 赞同：0
> 
> 时间：2012-04-11T13:55:11.313
> 
> 标签：javascript, html, local-storage

我要做的是创建一个应用程序，一旦用户登录，就会启动一个会话。然后用户点击“记录旅程”按钮，然后用户浏览网络。一旦他们返回我的页面，它将显示他们刚刚访问过的页面。

尝试存储用户的页面历史记录时，使用 html5 local-storage 会是最佳选择吗？它甚至允许我这样做吗？如果没有，有哪些替代方案？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:55:45.353

在网页中使用 JavaScript 读取用户历史记录是不明智的。

如果您的“应用程序”是一个浏览器扩展，那么这是可能的，使用环境公开的 API 之一（例如[`chrome.history`](https://developer.chrome.com/extensions/history)）。

当“应用程序”用于跟踪您拥有的网页上的历史记录时，这是可能的。`localStorage`确实是一个不错的选择，因为持久数据不会增加 Web 请求的开销。不要忘记存储大小是[有限](https://stackoverflow.com/questions/2747285/html5-localstorage-restrictions-and-limits)的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:07:20.537

我建议您使用 locache - 一种 JavaScript 缓存框架，用于在浏览器中使用 localStorage 进行客户端缓存 - 当浏览器不支持 localStorage 时会优雅地降级。

[https://github.com/d0ugal/locache](https://github.com/d0ugal/locache)

# c++ - 梯度下降算法

> ID：10107406
> 
> 赞同：1
> 
> 时间：2012-04-11T13:55:32.623
> 
> 标签：c++, floating-point, double

这是我在梯度下降算法上的工作

```
#include<iostream>
#include<math.h>
#include<float.h>
using namespace std;
double f_prime(double x)
{

    return (double)(4.0*powf(x,3)-9.0*powf(x,2));

}
void gradient()
{
    double x_old=0;
    double x_new=6;
    double eps=0.01;
    double precision=0.00001;
    while(abs(x_new-x_old)>precision)

    {
        x_old=x_new;
    x_new=x_old-eps*f_prime(x_old);

    }
    cout<<" local minimum at : "<<x_new<<endl;

}
int main()
    {

        gradient();

        return 0;
} 
```

上面的代码警告我从 double 到 float 的转换不正确，可能会丢失数据，因此它给了我一些未定义的值，例如`-1.IND`. 谁能解释这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:59:20.533

`abs`仅针对 int 和 long 类型定义。对于浮点数，请使用`fabs`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:56:46.900

更改`powf`为`pow`虽然我不确定这会解决您的问题。

# javascript - 如何创建自定义下拉框？

> ID：10107407
> 
> 赞同：1
> 
> 时间：2012-04-11T13:55:42.950
> 
> 标签：javascript, html, drop-down-menu

好的，伙计们和姑娘们。

我希望从标题中创建一个下拉框，我希望它是自定义的，即绘图。我只是不是 100% 确定如何去做，我有一个想法，即制作一个带有下拉框链接的基本 div，并使其显示为空，直到我单击一个链接，使 div 样式的 css 显示为内联，我只是想知道是否有更好的方法来解决它？我还希望下拉框从上到下滑入，而不仅仅是出现。

任何帮助都会很棒！

谢谢 ：）

# jdbc - 在 JDK 1.5 中构建错误，但在 1.6 中没有连接接口

> ID：10107413
> 
> 赞同：0
> 
> 时间：2012-04-11T13:56:10.443
> 
> 标签：jdbc

我有我的类实现连接接口，[http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html)

当我在一台具有 JDK 1.6 版本的本地机器上测试它时，我没有收到任何构建错误。但是在将其部署到另一台具有 JDK 1.5 版本的远程机器上时，它会抛出 16 个构建错误，说“找不到符号......”

从文档页面中显示的 createClob 开始的方法会引发错误。实际上，在 1.6 版本中，我没有实现这些方法，所以它抛出错误说，“方法必须实现”。所以我实现它如下，

```
public Clob createClob() {
return conn.createClob();
} 
```

但是在 1.5 中构建相同的代码后，它会抛出“找不到符号...”构建错误。

是因为版本问题吗？有没有办法纠正 1.5 版本中的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:40:26.470

Java 1.6 / JDBC 4.0 中添加了[createClob()](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#createClob%28%29)方法。`Connection`它在 Java 早期版本的接口上不可用。

因此，您需要为每个 Java 版本使用不同的类/实现，或者使用代理实现而不是手动实现每个方法。

顺便说一句：你在这里想要达到什么目的？除非您正在实现 JDBC 驱动程序，否则您通常不需要`Connection`自己实现。

# javascript - nodejs peepcode tutorial - can't get it to work

> ID：10107420
> 
> 赞同：3
> 
> 时间：2012-04-11T13:56:28.440
> 
> 标签：javascript, node.js, coffeescript, pug, express

I bought the latest nodejs peepcode tutorial and followed it, however I can't get past the initial step.

I'm getting frustrated after spending several hours to find out where I got an error since debugging nodejs is a riddle for me.

app structure looks like this:

```
example 
  |__public
  |__views
  |__assets 
  |__apps <- instead of routes
  server.js
  package.json 
```

Here is my simple code:

server.js

```
/**
 * Module dependencies.
 */
require('coffee-script');

var express = require('express');
var app = module.exports = express.createServer();

// Configuration
app.configure(function(){
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
});

app.configure('development', function(){
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.configure('production', function(){
  app.use(express.errorHandler());
});

// routes
require('./apps/authentication/routes')(app);

app.listen(3000);
console.log("Express server listening on port %d in %s mode", app.address().port, app.settings.env); 
```

/apps/authentication/routes.coffee:

```
routes = (app) ->

    app.get '/login', (req, res) ->
        res.render "views/login",
            title: 'Login'
            stylesheet: 'login'

module.exports = routes 
```

apps/authentication/views/login.jade template:

```
form(action='/sessions', method='post')
  label
    | Username
    input(type='text', name='user')
  label
    | Password
    input(type='password', name='password')
  input(type='submit', name='Submit') 
```

nothing fancy, i got a stylesheet file and login.css in public/stylesheet/login.css instead of a login template from authentication/routes.coffe when browsing [http://localhost:3000/](http://localhost:3000/)

```
Cannot GET / 
```

no any other error message from node either:

```
Express server listening on port 3000 in development mode 
```

I can't figure out where the problem is and this is really frustrating. Probably some dumb typo somewhere but I can't figure this out :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:42:51.360

You do not have a route configured for the root '/'. Navigating to [http://localhost:3000/login](http://localhost:3000/login) should return your login view as specified by the route to the resource '/login'. You need to add something along the lines of:

```
app.get '/', (req, res) ->
  #if not logged-in then send to /login else
  res.render('/views/authenticated', 'Home', 'index') 
```

For more details on routing see [http://expressjs.com/guide.html#routing](http://expressjs.com/guide.html#routing).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:33:21.217

It looks like everything is working as intended. The problem is that you haven't defined a route that matches the request `GET /`. You've only defined a route matching `GET /login` in your `routes.coffee`; also, `GET /anythinginyourpublicdir` will work thanks to the `express.static` middleware.

# java - JOptionPane中的JSpinner？

> ID：10107422
> 
> 赞同：6
> 
> 时间：2012-04-11T13:56:42.190
> 
> 标签：java, swing, joptionpane, jspinner

我需要在 JOptionPane 中放置一个 JSpinner。这是我尝试过的：

```
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JSpinner;
import javax.swing.SpinnerNumberModel;

    public static void main(String[] args) {
        SpinnerNumberModel sModel = new SpinnerNumberModel(0, 0, 30, 1);
        JSpinner spinner = new JSpinner(sModel);
        JOptionPane.showInputDialog(spinner);
    } 
```

结果是：

![在此处输入图像描述](../Images/29d527434e1e33f852d8b80962346da0.png)

如何删除文本框？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T13:57:47.260

你必须使用`showMessageDialog`.

```
SpinnerNumberModel sModel = new SpinnerNumberModel(0, 0, 30, 1);
JSpinner spinner = new JSpinner(sModel);
JOptionPane.showMessageDialog(null, spinner); 
```

如果仍然有取消按钮，请使用：

```
int option = JOptionPane.showOptionDialog(null, spinner, "Enter valid number", JOptionPane.OK_CANCEL_OPTION, JOptionPane.QUESTION_MESSAGE, null, null, null);
if (option == JOptionPane.CANCEL_OPTION)
{
    // user hit cancel
} else if (option == JOptionPane.OK_OPTION)
{
    // user entered a number
} 
```

这是 OS X 上的屏幕截图：

![在此处输入图像描述](../Images/f5be9af0e294d90190dba3a59ee23aee.png)

# regex - 正则表达式：6 位数字或 0-6 个符号（数字或星号），至少有一颗星

> ID：10107425
> 
> 赞同：4
> 
> 时间：2012-04-11T13:57:03.750
> 
> 标签：regex

如何编写正则表达式来验证这种模式？

```
123456 - correct
*1 - correct
1* - correct
124** - correct
*1*2 - correct
* - correct
123456* - incorrect (size 7)
12345 - incorrect (size 5 without stars) 
```

试过：

```
^[0-9]{6}$|^(([0-9]){1,6}([*]){1,5}){1,6}+$ 
```

但它允许有 6 个以上的数字，并且不允许星号在数字之前。“*”符号没有最小/最大计数（但所有符号的最大计数为 6）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-11T14:08:34.283

干得好：

```
^(?:\d{6}|(?=.*\*)[\d*]{1,6}|)$ 
```

这是它的作用：

```
^            <-- Start of the string (we don't want to capture more than that)
  (?:          <-- Start a non captured group (it will be used to do the "or" part)
    \d{6}          <-- 6 digits, nothing more
    |            <-- OR
    (?=.*\*)       <-- Look ahead for a '*' (you could replace the first * with {0,5})
    [\d*]          <-- digits or '*'
    {1,6}          <-- repeated one to six times (we know from the look ahead that there will be at least one '*'
    |            <-- OR (nothing)
  )            <-- End the non capturing group
$            <-- End of the string 
```

* * *

我不太确定您是否想要空箱（但您说的是 0 到 6），如果您真的想要 1 到 6，只需删除最后一个`|`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:03:18.493

/ ([0-9] {6} ) | ( ( [0-9]{0-5} & [*]{1-5} ) {0-6})/

像这样的东西？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T14:11:50.793

恐怕您将不得不尝试 * 可能具有的每个位置，如下所示：

```
/([0-9]{6}|\*[0-9][0-9\*]{0,4}|[0-9]\*[0-9\*]{0,4}|[0-9]{2}\*[0-9\*]{0,3}|[0-9]{3}\*[0-9\*]{0,2}|[0-9]{4}\*[0-9\*]?|[0-9]{5}\*)/ 
```

**编辑：**

然而，上述解决方案不允许**2

而我错了。你可以像 Colin 那样向前看。这就是要走的路。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T14:17:32.450

```
[1-6]{6}|([1-6]|\*){1,6}[^123456] 
```

这适用于您提供的输入...

如果您想要其他内容，请更新我...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-11T14:17:51.897

你不能只用一个正则表达式来做到这一点。您还需要进行长度检查。但是，这是一个有用的正则表达式。

```
([\d*]*\*[\d*]*)|(\d{6}) 
```

要验证输入，请尝试以下操作：

```
validate(input)
{
    regex = "([\d*]*\*[\d*]*)|(\d{6})";
    digitregex = ".*\d.*"; // this makes sure they aren't all stars

    return (input.length < 7 and regex.matches(input) and digitregex.matches(input))
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T14:02:55.080

如果允许任何数字 0..9，请尝试此正则表达式`[0-9*]{2,6}`
，如果只有数字 1..6，如您的示例所示`[1-6*]{2,6}`

这有点棘手，因为这里也`12345`将被验证为正确的
[示例](http://rubular.com/r/0FSEjs1Qf1)

[正如@Colin](https://stackoverflow.com/a/10107608/397667)已经建议的那样，您实际上需要一个[环视解决方案](http://www.regular-expressions.info/lookaround.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-11T14:09:04.160

**试试这个：（** 更新）

```
([0-6]{6})|([0-6\*]{1,6}) 
```

它应该工作...

# java - 无模式 JDialog 需要在父级之上可见

> ID：10107434
> 
> 赞同：8
> 
> 时间：2012-04-11T13:57:45.213
> 
> 标签：java, swing, jdialog

我的应用程序提供了启动长时间运行任务的能力。发生这种情况时，会生成一个无模式`JDialog`显示任务的进度。我专门使对话框无模式，以允许用户在任务运行时与 GUI 的其余部分进行交互。

我面临的问题是，如果对话框隐藏在桌面上的其他窗口后面，则很难找到：任务栏上没有相应的项目（在 Windows 7 上），Alt+ 下也没有可见的图标选项卡菜单。

有没有一种惯用的方法来解决这个问题？我曾考虑`WindowListener`在应用程序中添加一个`JFrame`并使用它来将 JDialog 带到前台。然而，这可能会变得令人沮丧（因为这可能意味着 JFrame 然后失去焦点）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T14:20:49.200

您可以创建一个非模态对话框并为其提供父框架/对话框。当您调出父框架/对话框时，它也会带来非模态对话框。

这样的事情说明了这一点：

```
public static void main(String[] args) throws IOException {
    JFrame frame = new JFrame();
    frame.setTitle("frame");
    JDialog dialog = new JDialog(frame, false);
    dialog.setTitle("dialog");
    final JButton button = new JButton("Click me");
    button.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            JOptionPane.showMessageDialog(button, "Hello");
        }
    });
    final JButton button2 = new JButton("Click me too");
    button2.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            JOptionPane.showMessageDialog(button2, "Hello dialog");
        }
    });
    frame.add(button);
    dialog.add(button2);
    frame.pack();
    dialog.pack();
    frame.setVisible(true);
    dialog.setVisible(true);
} 
```

# android - Android：如何将 Parcelable 对象传递给意图并使用捆绑的 getParcelable 方法？

> ID：10107442
> 
> 赞同：74
> 
> 时间：2012-04-11T13:58:09.077
> 
> 标签：android, android-intent, bundle, parcelable

为什么 bundle 有`getParcelableArrayList`,`getParcelable`方法；但 `Intent`只有`putParcelableArrayListExtra`方法？我可以只传输`object<T>`，而不是`ArrayList`一种元素吗？那么，究竟是`getParcelable`为了什么？

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2012-04-11T22:33:37.167

Intent 提供了一堆重载的[putExtra()](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20android.os.Parcelable%29)方法。

假设你有一个类 Foo 正确地实现了 Parcelable，把它放到一个 Activity 中的 Intent 中：

```
Intent intent = new Intent(getBaseContext(), NextActivity.class);
Foo foo = new Foo();
intent.putExtra("foo ", foo);
startActivity(intent); 
```

要从另一个活动的意图中获取它：

```
Foo foo = getIntent().getExtras().getParcelable("foo"); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:03:15.870

```
Parcelable p[] =getIntent().getParcelableArrayExtra("parcel"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-27T05:03:51.677

发件人活动：

```
val intent = Intent(this, RestaurantDetails::class.java)
        intent.putExtra(Constants.RESTAURANT, restaurant)
        startActivity(intent) 
```

接收器活动：

```
 val restaurant = intent.getParcelableExtra<Restaurant>(Constants.RESTAURANT) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-08-21T19:35:20.923

请务必记住，您的模型必须实现[Parcelable](https://developer.android.com/reference/android/os/Parcelable.html)接口和静态[CREATOR](https://developer.android.com/reference/android/os/Parcelable.Creator.html)方法。此案例适用于列表

```
 private static final String MODEL_LIST = "MODEL_LIST";
    public MainFragment() {}

    public static MainFragment newInstance(ArrayList<YourModel>   
models) {
        MainFragment fragment = new MainFragment();
        Bundle args = new Bundle();
        args.putParcelableArrayList(MODEL_LIST,models);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if (getArguments() != null) {
            ArrayList<YourModel> models = getArguments().getParcelableArrayList(MODEL_LIST);
        }
    } 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-05-03T12:53:22.600

首先使用[**Given Technique**](https://stackoverflow.com/questions/7181526/how-can-i-make-my-custom-objects-parcelable)创建 Parcelable然后

```
public static CreditCardDetail newInstance(CreditCardItemBO creditCardItem) {
        CreditCardDetail fragment = new CreditCardDetail();
        Bundle args = new Bundle();
        args.putParcelable(CREDIT_KEY,creditCardItem);
        fragment.setArguments(args);
        return fragment;
    } 
```

得到它喜欢

```
 if(getArguments() != null)
 {
    creditCardItem = getArguments().getParcelable(CREDIT_KEY);               
 } 
```

> 在哪里

```
public static final String CREDIT_KEY = "creditKey"; 
```

# magento - 访问被拒绝错误出现在 magento 管理系统/配置页面

> ID：10107446
> 
> 赞同：0
> 
> 时间：2012-04-11T13:58:43.350
> 
> 标签：magento

更多人问这个问题并且答案可用，但没有 amswer 对我有用，我的管理员工作正常，但配置页面突然出现拒绝访问错误，我没有安装任何模块或扩展，我有登录/注销，清除缓存，清除会话我所做的一切可用，管理员权限设置为全部，我不知道为什么会发生这种情况，所以请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:39:09.800

我已授予自定义权限并且拒绝访问错误消失了

# asp.net-mvc - 在客户端清除输出缓存

> ID：10107447
> 
> 赞同：3
> 
> 时间：2012-04-11T13:58:47.960
> 
> 标签：asp.net-mvc, outputcache

正如标题所说，**我怎样才能清除客户端的输出缓存**？在用户执行某些特定操作后，我有几个需要清除的 ajax 调用。

我试过：

```
Response.RemoveOutputCacheItem(Url.Action("Action", "Controller")); 
```

但它没有用。

我什至尝试手动将其过期（即使这是一个不好的方法）：

```
 Response.Expires = 0;
                Response.ExpiresAbsolute = DateTime.Now.AddMinutes(-1);
                Response.AddHeader("pragma", "no-cache");
                Response.AddHeader("cache-control", "private");
                Response.CacheControl = "no-cache"; 
```

那也没有成功。

为了清楚起见，我正在使用`OutputcacheLocation = Client`. 如果我将其设置为`Server`上面的示例，则可以完美地工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:12:02.120

如果您需要的是 axax 调用，尽管缓存每次都返回不同的数据，那么当使用相同的参数调用时，唯一可靠的方法是在查询字符串中添加另一个变量，该变量总是不同的，例如时间下降到毫秒.

这是我的做法（参数 no_cache）：

```
<script type="text/javascript">
Date.prototype.getTicksUTC = function() 
{
    return Date.parse(this.toUTCString()) + this.getUTCMilliseconds();
} // End Function getTicksUTC

Date.prototype.getTicksGMT = function() 
{
    return Date.parse(this.toGMTString()) + this.getMilliseconds();
} // End Function getTicksGMT

var strURL= "http://localhost/ajax/whateverhandler.ashx?param1=value1&para2=value2&paraN=valueN&no_cache=" + new Date().getTicksUTC();
alert(strURL);

</script> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-11T14:13:39.150

你不能。将缓存位置设置为客户端后，您就赋予了客户端管理它的责任。

# android - Android - 更改目录权限

> ID：10107451
> 
> 赞同：0
> 
> 时间：2012-04-11T13:59:03.047
> 
> 标签：android, permissions, sd-card

如何将 SD 卡权限更改为 drwxrwx--x 目前是 d--------

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:04:51.140

在android中`avd manager ->edit->size of sdcard less then 1024mb ->apply->ok` 然后运行avd

# java - 使用旧版 DB 模式和复合 FK 和 PK 进行休眠

> ID：10107455
> 
> 赞同：0
> 
> 时间：2012-04-11T13:59:21.237
> 
> 标签：java, hibernate

我在试图找到解决方案时遇到了一些麻烦，我认为这可能根本不可能，但我仍然会在这里尝试一下。因此，假设我在 MySQL 上使用 MyISAM（无 FK）的旧数据库模式具有以下 2 个表：

```
TblOrder
ORDERID (INT)    PK
CUSTOMERID (INT) PK
REPID (INT)      PK
ISORDER (INT)    PK
other columns...

TblOrderPos
ORDERID (INT)    PK
POSITIONID (INT) PK
other columns 
```

我的注释应该是什么样子才能允许 TblOrder 拥有一组 TblOrderPos（由 ORDERID 标识）和 TblOrderPos 一个私有 TblOrder 实例？我确实为这两个表创建了 EmbeddedId 对象，并且每次我尝试使用 @ManyToOne 或 @OneToMany 创建一个覆盖 @JoinColumns 的属性时，Hibernate 抱怨 PK 列的数量不匹配（它不能）。

我真的希望有人有一个想法，或者是否有可能。

- - - - - -更新 - - - - - -

在 TblOrder 上

```
@OneToMany(mappedBy="shoporder")
@JoinColumn(name="ORDERID")
public List<Orderposition> getOrderpositions(){
    return this.positions;
}

public void setOrderPositions(List<Orderposition> positions){
    this.positions = positions;
} 
```

在 TblOrderPos 上

```
@ManyToOne
@JoinColumn(name="ORDERID")
public Shoporder getShoporder(){
    return this.shoporder;
}

public void setShoporder(Shoporder order){
    this.shoporder = order;
} 
```

这就是我不断收到的错误：从 TblOrderPos 引用 TblOrder 的外键具有错误的列数。应该是 4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:01:48.937

不建议这样做，但可以使用复合 ID：

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:38:04.760

注释是可能的，因为我使用过这样的结构。

您是否正确使用`@ManyToOne`注释与具有复合 PK 的表链接？它应该是这样的：

```
@ManyToOne
    @JoinColumns({
        @JoinColumn(name = "WOJ_ID", referencedColumnName = "WOJ_ID"),
        @JoinColumn(name = "POW_NR", referencedColumnName = "POW_NR"),
        }) 
```

我正在使用`@IdClass`注释并为复合 PK 提供类，在我对其他问题的回答中发布了一些示例： [为什么我的 EmbeddedId 在休眠中不起作用？](https://stackoverflow.com/questions/9923611/why-is-my-embeddedid-in-hibernate-not-working/9923865#9923865)

# java - 有没有办法知道 ExecutorService 是否成功结束？

> ID：10107457
> 
> 赞同：2
> 
> 时间：2012-04-11T13:59:30.573
> 
> 标签：java, concurrency, executorservice

当异常发生时，我在我的 ExecutorService 上调用 shutdownNow()。我认为 isTerminated() 会给我成功状态，当所有线程完成时为真，否则为假。但无论如何，我总是说实话。有什么推荐吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:03:11.317

我怀疑 isTerminated() 总是返回 true ，因为您正在调用`shutdownNow()`而不是`shutdown()` **and**，根据 API 文档`shutdownNow()`：

> ... 典型的实现将通过 Thread.interrupt() 取消

因此，听起来您的任务都立即响应中断尝试，导致它们立即完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:07:42.970

`shutdownNow()`将停止正在等待的任务。如果您希望当前等待的线程执行，请尝试使用`shutdown()`

javadoc就可以了： http: [//docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#shutdown](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#shutdown) ()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:05:07.223

正如文档所说，“`isTerminated`除非首先调用 shutdown 或 shutdownNow，否则永远不会正确”。所以它只告诉任务是否结束，而不是告诉他们是否成功。你可以有一个标志，比如一个`AtomicBoolean`并在成功完成之前切换它的状态。这样，您将使用方法`ExecutorService`来检查任务是否完成，并使用标志来检查它是否成功完成。

# regex - 使用sed用多行替换一个单词？

> ID：10107459
> 
> 赞同：39
> 
> 时间：2012-04-11T13:59:40.973
> 
> 标签：regex, bash, sed, replace

我正在研究一个 bash 脚本，该脚本必须准备一封电子邮件以发送给用户。

它聚合了一些数据，最终成为多行内容。对于存储在`$DATA`.

现在，经过一些 stfw 之后，我发现了一些东西，比如`sed -ei "s/_data_/${DATA}/g" mail.tpl`sed [replace with variable with multiple lines](https://stackoverflow.com/questions/6684487/sed-replace-with-variable-with-multiple-lines)。它们都不起作用。

现在的问题是，如何`sed`用多行文本替换某些内容？

`sed`（也欢迎替代品！）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-11T14:11:20.477

您可以使用 AWK 使用变量替换来做到这一点。我们可以在 AWK 中使用 设置一个变量`-v`，然后使用 AWK 的`gsub`函数将所有出现的正则表达式替换为该变量。

例如，如果文件`test`具有以下内容...

```
foo
bar
blah _data_and_data_
foo
_data_ foobar _data_ again 
```

...而 Bash 变量`$DATA`是 ...

```
1
2
3
4
5 
```

... 然后用的内容替换文件中`awk -v r=$DATA '{gsub(/_data_/,r)}1' test`所有出现的正则表达式，结果如下：`_data_``test``$DATA`

```
foo
bar
blah 1
2
3
4
5and1
2
3
4
5
foo
1
2
3
4
5 foobar 1
2
3
4
5 again 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-11T14:31:49.133

我建议简单地将 sed 替换为 perl 命令，如下所示：

```
perl -i.bak -pe 's/_data_/$ENV{"DATA"}/g' mail.tpl 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-04-11T14:13:15.423

如果你用 " `\n`"s 构建你的多行文本，这将使用一个简单的`sed`命令：

```
DATA=`echo ${DATA} | tr '\n' "\\n"`
#now, DATA="line1\nline2\nline3"
sed "s/_data_/${DATA}/" mail.tpl 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-04-11T14:14:20.107

我试过了，`sed 's/pattern/\na\nb\nc/g'`但它不适用于所有系统。起作用的是`\`在替换模式中添加一个后跟换行符，如下所示：

```
sed 's/pattern/a\
b\
c/g' 
```

这会在看到模式时附加一行包含`b`和包含的行。`c`

要将其放入变量中，请使用双反斜杠：

```
export DATA="\\
a\\
b\\
c" 
```

进而：

```
sed "s/pattern/${DATA}/g" 
```

注意双引号。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-04-06T23:39:32.780

持戒人的回答对我不起作用；我认为`tr`there 的用法是错误的，而且它的编写方式只是通过使用来去除换行符`echo`。

相反，我使用了`sed`. 我使用来自[另一个答案](https://stackoverflow.com/questions/1251999/sed-how-can-i-replace-a-newline-n)的代码来替换换行符（来源：Zsolt Botykai）。我还期望在我的输入中有一些美元符号（`$`），所以我也处理了它。您可能需要添加其他输入处理。注意使用双引号`echo`来保留换行符。

```
DATA="$(cat whatever)"
ESCAPED_DATA="$(echo "${DATA}" | sed ':a;N;$!ba;s/\n/\\n/g' | sed 's/\$/\\$/g')" 
```

然后你可以`${ESCAPED_DATA}`使用`sed`：

```
cat input | sed 's/one liner/'"${ESCAPED_DATA}"'/' > output 
```

只是想我会分享。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-10-28T17:52:43.870

将变量回显到临时文本文件中。

将文本文件插入 mail.tpl 并从 mail.tpl 中删除*数据*

```
echo ${DATA} > temp.txt    
sed -i -e "/_data_/r temp.txt" -e "//d" mail.tpl 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-01-08T17:53:10.547

用 a 转义所有换行符`\`（最后一个除外）对我有用。不得转义最后一个换行符以免破坏`s`命令。

例子 ：

```
DATA="a
b
c"

ESCAPED=$(echo "${DATA}" | sed '$!s@$@\\@g')
echo "${ESCAPED}" 
a\
b\
c

sed "s/pattern/${ESCAPED}/" file 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-04-11T14:19:40.347

您可以将数据放在临时文件中并运行：

```
$ sed '/_data_/r DATA_FILE' mail.tpl | sed '/_data_/d'> temp; mv temp mail.tpl 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-02T05:17:29.547

不确定您是否尝试将“\n”放入替换部分

```
sed 's/[pattern]/\
[line 1]\n\
[line 2]\n\
[line n]\n\
/g' mail.tpl 
```

出于可读性原因，第一行有 /\。之后的每一行都是一个独立的行，就像您在文本编辑器中找到的那样。最后一行是独立的，再次出于可读性原因。如果需要，您可以制作所有这一条线。当我测试它时，它可以在 Debian Jessie 上运行。

# app-config - 从 Biztalk Orchestration 调用 .Net 程序集：将配置放在哪里？

> ID：10107460
> 
> 赞同：2
> 
> 时间：2012-04-11T13:59:49.107
> 
> 标签：app-config, biztalk, orchestration

我有一个外部 .net 程序集，包括我需要从 Biztalk Orchestration 调用的 app.config。

我已经将一些日志记录到 .net 程序集中，并且可以看到它没有读取或找不到 app.config 文件，因为 ConfigurationManager.AppSettings.Count 为 0

我使用 gacutil /i path.to.dll 将 .net 程序集安装到 GAC，但我不确定 app.config 会发生什么。

当我从 Biztalk Orchestration 调用 app.config 时，有什么想法可以确保它被读取吗？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T14:41:21.753

BizTalk 使用它自己的名为 btsntsvc.exe.config 的配置文件，该文件位于 BizTalk 程序文件目录中。您可以将配置部分添加到此文件中，然后反弹 biztalk 主机实例以获取更改。

**但是**，这不是一个好习惯。当您只有一个 biztalk 应用程序服务器时可以这样做，但如果您需要突然向外扩展，您需要维护多个配置文件。

推荐的方法是使用 SSO 来存储特定于应用程序的配置数据，因为它是 BizTalk 的配置存储解决方案，因此始终可用。我总是使用这种方法并且从来没有遇到过任何问题（尽管有一些与开发和管理相关的开销）。

有关如何执行此操作的详细信息，请[参阅](http://seroter.wordpress.com/2007/09/21/biztalk-sso-configuration-data-storage-tool/)Richard Seroter 的博客。

我实际上[在这里](http://geekswithblogs.net/paulp/archive/2008/05/16/122205.aspx)使用了修改后的版本。

[我还在这里](http://geekswithblogs.net/paulp/archive/2008/06/09/122746.aspx)使用 MSBuild 任务来自动部署新配置。

**编辑**：发布了用于包装 SSOCLient 并在[此处调用配置值的代码](https://stackoverflow.com/a/11746059/569662)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-24T05:53:31.787

您也可以使用**自定义解决方案**。在您的外部项目中创建一个函数，它将配置文件作为 XML 文档加载，您可以从配置文件中获取值。

```
XmlDocument doc = new XmlDocument();
doc.Load(Config Path);
string value = doc.SelectSingleNode("/configuration/appSettings/add 
[@key='key']/@value").Value; 
```

# c# - DockPanel 中只有一个 DockContent

> ID：10107461
> 
> 赞同：1
> 
> 时间：2012-04-11T13:59:59.037
> 
> 标签：c#, .net, winforms, dockpanel, dockpanel-suite

这是我的设置的外观： ![当前设置](../Images/f7584abe304e186fcda135da2ee88bfd.png)

这是 DockPanel 套件。白色区域是我在表单上放置的 dockPanel 可视组件。我不需要任何停靠、嵌套停靠、可拖放选项卡等。我只需要一个“ProjectsForm”面板并希望它通过用户点击自动隐藏和隐藏。

所以，我的问题是如何将以前的图片转换为这张新图片： ![新的，想要的视图](../Images/074b53cf14d2582983be53ceae7149f6.png)

我怎样才能禁止让这个面板浮动？

这是一些代码：

```
private void MainForm_Load(object sender, EventArgs e)
{
    DockContent dockProjectsContent = new ProjectsForm();
    dockProjectsContent.AllowDrop = false;
    dockProjectsContent.AllowEndUserDocking = false;
    dockProjectsContent.ShowHint = DockState.DockLeft;            
    dockProjectsContent.Show(dockProjects);            
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T04:15:05.023

为什么不为表单的“主体”创建一个 DockContent（你不会像那样把它留空吗？！）在停靠面板的中间打开它？！

首先，您需要将停靠面板的 DocumentStyle 设置为“DockingWindow”

```
dockProjects.DocumentStyle = DocumentStyle.DockingWindow 
```

然后..

```
dockProjectsContent.Show(this.dp, DockState.DockRight);
dockMainContent.Show(this.dp, DockState.Document); 
```

然后查看您可以设置的所有不同的 DockContent 属性。

```
dockProjectsContent.AllowEndUserDocking = false; 
```

我确定您还想设置其他内容，例如阻止用户关闭其中任何一个！

# java - 我的项目运行并连接到 net beans 中的数据库（访问 .mbd），但 jar 没有连接到数据库，一直说无效的用户或密码

> ID：10107464
> 
> 赞同：-1
> 
> 时间：2012-04-11T14:00:04.013
> 
> 标签：java, ms-access, netbeans, jar, connection

我制作了一个程序，它将（用户名和密码）作为输入，并使用存储在数据库（student.mbd）中的用户名和密码进行检查。

这工作正常并且没有问题，但是当我尝试运行 jar 文件时抛出异常并显示用户名或密码无效。

登录页面代码是：

```
import java.awt.Container;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPasswordField;
import javax.swing.JTextField;

public class Login extends JFrame implements ActionListener {

    Container c = getContentPane();
    private JButton btnLogin,  btnCancel;
    private JLabel lblUName,  lblPasswd;
    private JTextField txtUName;
    private JPasswordField txtPasswd;

    public Login() {
        super("Login ...");
        this.setSize(350, 200);
        this.setLayout(null);
        this.setResizable(false);
        this.setLocation((Settings.getScreenSize().width / 2) - 175, (Settings.getScreenSize().height / 2) - 150);
        this.setDefaultCloseOperation(EXIT_ON_CLOSE);

        lblUName = new JLabel("Username");
        lblPasswd = new JLabel("Password");
        txtUName = new JTextField();
        txtPasswd = new JPasswordField();
        btnLogin = new JButton("Login");
        btnCancel = new JButton("Cancel");
        lblUName.setBounds(50, 40, 140, 25);
        txtUName.setBounds(150, 40, 130, 25);
        lblPasswd.setBounds(50, 80, 140, 25);
        txtPasswd.setBounds(150, 80, 130, 25);
        btnLogin.setBounds(50, 120, 100, 25);
        btnCancel.setBounds(180, 120, 100, 25);
        btnLogin.addActionListener(this);
        btnCancel.addActionListener(this);
        this.add(lblUName);
        this.add(lblPasswd);
        this.add(txtUName);
        this.add(txtPasswd);
        this.add(btnLogin);
        this.add(btnCancel);
    }//constructor closed
    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == btnLogin) {
            try {
                Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
                Connection con = DriverManager.getConnection("jdbc:odbc:student");
                try {
                    Statement st = con.createStatement();
                    ResultSet rs = st.executeQuery("SELECT * FROM UAD WHERE Username='" + txtUName.getText() +
                            "' and Password='" + txtPasswd.getText() + "'");
                    if (rs.next()) {
                        if (rs.getString(3).equals("Student")) {
                            userMDI frm = new userMDI();
                            frm.setVisible(true);
                        } else {                            
                            new frmAdminMDI().setVisible(true);
                        }
                        this.dispose();
                    }else{
                        JOptionPane.showMessageDialog(null,"Invalid username or password","Invalid",JOptionPane.ERROR_MESSAGE);
                    }
                    con.close();

                } catch (Exception ex) {
                    JOptionPane.showMessageDialog(null, "Invalid username or password", "Invalid", JOptionPane.ERROR_MESSAGE);
                    txtUName.setText("");
                    txtPasswd.setText("");
                }//inner try catch closed
            } catch (Exception x) {
                JOptionPane.showMessageDialog(null, "Unable to connect to the database", "Connection error", JOptionPane.ERROR_MESSAGE);
            }//outer try catch closed
        }//if closed

        if (e.getSource() == btnCancel) {
            System.exit(0);
        }//if closed
    }//actionPerformed() closed
    public static void main(String args[])    {
        new Login().setVisible(true);
    }
}//class closed 
```

请帮助我，因为我必须提交 jar 文件并将其作为大学项目提交..

下载整个项目[http://www.4shared.com/rar/9sz2jBtE/CollegeInformationSystem.html](http://www.4shared.com/rar/9sz2jBtE/CollegeInformationSystem.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:52:08.323

我假设您遇到了未处理的异常。检查您的 DNS 设置。您是否尝试在代码中传递用户名/密码？

```
Connection con = DriverManager.getConnection("jdbc:odbc:student","username","password"); 
```

# python - rpy2中数组的索引

> ID：10107466
> 
> 赞同：0
> 
> 时间：2012-04-11T14:00:09.300
> 
> 标签：python, arrays, r, indexing, rpy2

我刚开始使用 Python resp。Rpy2 所以我真的是一个初学者。到目前为止，我设法通过 Rpy2 加载了我自己的 R 包，并生成了我的输入变量的结果（类似于 R 的 lm() 函数）。我的结果如下：

```
>>> res
<ListVector - Python:0x1561828 / R:0xe6a5c8>
[Matrix, Array]
  coef.f: <class 'rpy2.robjects.vectors.Matrix'>
  [-10.554713, 1.640681, 0.957045, ..., 0.000000, 0.000000, 0.783108]
  pred.f: <class 'rpy2.robjects.vectors.Array'>
  [17.189366, 7.116058, 41.526062, ..., 459.952946, 312.088634, 677.908581] 
```

我还可以通过使用索引 1 获取数组子部分（pred.f）：

```
>>>res1 = res[1]
>>> res1
<Array - Python:0x1561850 / R:0x4b299d0>
[17.189366, 7.116058, 41.526062, ..., 459.952946, 312.088634, 677.908581]
>>> print res1
, , L=300, AR=1.5, SO=1, T=30

    sigma_stat sigma_mob
fit  17.189366 152.21461
lwr   7.116058  76.98245
upr  41.526062 301.01379

, , L=300, AR=1.5, SO=2, T=30

    sigma_stat sigma_mob
fit   27.62310  284.5423
lwr   14.54639  173.3316
upr   52.45825  467.1449

, , L=300, AR=1.5, SO=3, T=30

    sigma_stat sigma_mob
fit   39.75894  459.9529
lwr   24.07098  312.0886
upr   65.67369  677.9086 
```

现在我想用一种智能的方式来访问这个数组中的某些数字。例如。我想要 sigma_stat,fit,L=300,AR=1.5,SO=3,T=30 的数字……这意味着我的数组是 6 维的。

有没有简单的方法可以做到这一点？类似于使用维度名称/数字进行索引： res1('sigma_stat','fit','L'=300,'AR'=1.5,'SO'=3,'T'=30)

感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T20:42:56.180

像这样的工作吗？

```
res1.rx('sigma_stat', 'fit', 'L=300', 'AR=1.5', 'SO=3', 'T=30') 
```

（请注意，维度名称必须按正确的顺序排列——我不认为测试的时间可能是“sigma_stat”，而“fit”应该放在参数列表的末尾）

# css - 当 div 设置其父级的高度时，将 div 设为其容器的 100%

> ID：10107467
> 
> 赞同：2
> 
> 时间：2012-04-11T14:00:16.510
> 
> 标签：css, html, height

这是我的 HTML 结构：

```
<li>
     <div class='wrapper'>
          <div class='controller'> ... </div>
          <div class='preview'> ... </div>
     </div>
</li> 
```

'controller' 和 'preview' div 中的内容可能会有所不同，因此内容的高度也会有所不同。“控制器”和“预览”div 的高度之间没有必要存在关联。在给定的包装器中，一个可能是 10px 高，而另一个是 100px 高。我希望较小的一个扩展以匹配较小的高度。使用“height: 100%;”的css规则 不起作用，因为没有为包装器设置明确的高度，而且我无法为包装器设置高度，因为其中的内容可能会有所不同。

我正在寻找css而不是javascript的解决方案。我的公司对未启用 javascript 的浏览器有严格的编写政策。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:02:54.917

对 div 使用 100% 高度只会占用 div 所需的内容。您必须明确设置高度。

您可以通过使用一些 javascript 来做到这一点：

```
var height = document.getElementById('parentDiv').style.height;
document.getElementById('childDiv').style.height = height +'px'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T14:04:30.063

它可以用脚本设置，或者当你不想使用 JS 时，你可以使用仿列技术：

[http://www.alistapart.com/articles/fauxcolumns/](http://www.alistapart.com/articles/fauxcolumns/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T14:08:22.160

假设两个 div 彼此相邻（使用浮点数或其他），这在 HTML 中是一个非常常见的问题，但仍然没有原生解决方案。

解决这个问题的一种方法是假列，但这有其局限性：通常使用非常宽的边框来伪造较小 div 的背景颜色，因此您只能使用纯色。

如果您确实需要高度相同（出于在两个 div、背景图像上使用相同边框的原因，甚至在 div 内都需要位于 div 底部的定位元素），您将不得不使用一个javascript解决方案。

# xaml - 使用可绑定集合启用 ScrollViewer Horizo ntalSnapPoints

> ID：10107470
> 
> 赞同：13
> 
> 时间：2012-04-11T14:00:34.637
> 
> 标签：xaml, windows-8, winrt-xaml

我正在尝试创建与 Windows 8 SDK 示例中的 ScrollViewerSample 类似的体验，以便能够在左右滚动时捕捉到 ScrollViewer 内的项目。示例中的实现（有效）如下所示：

```
<ScrollViewer x:Name="scrollViewer" Width="480" Height="270"
              HorizontalAlignment="Left" VerticalAlignment="Top"
              VerticalScrollBarVisibility="Disabled" HorizontalScrollBarVisibility="Auto" 
              ZoomMode="Disabled" HorizontalSnapPointsType="Mandatory">
    <StackPanel Orientation="Horizontal">
        <Image Width="480" Height="270" AutomationProperties.Name="Image of a cliff" Source="images/cliff.jpg" Stretch="None"  HorizontalAlignment="Left" VerticalAlignment="Top"/>
        <Image Width="480" Height="270" AutomationProperties.Name="Image of Grapes" Source="images/grapes.jpg" Stretch="None" HorizontalAlignment="Left" VerticalAlignment="Top"/>
        <Image Width="480" Height="270" AutomationProperties.Name="Image of Mount Rainier" Source="images/Rainier.jpg" Stretch="None" HorizontalAlignment="Left" VerticalAlignment="Top"/>
        <Image Width="480" Height="270" AutomationProperties.Name="Image of a sunset" Source="images/sunset.jpg" Stretch="None" HorizontalAlignment="Left" VerticalAlignment="Top"/>
        <Image Width="480" Height="270" AutomationProperties.Name="Image of a valley" Source="images/valley.jpg" Stretch="None" HorizontalAlignment="Left" VerticalAlignment="Top"/>
    </StackPanel>
</ScrollViewer> 
```

与我想要的实现的唯一区别是我不想要一个里面有项目的 StackPanel，但我可以绑定到一些东西。我正在尝试使用 ItemsControl 来完成此操作，但由于某种原因，Snap 行为没有生效：

```
<ScrollViewer x:Name="scrollViewer" Width="480" Height="270"
              HorizontalAlignment="Left" VerticalAlignment="Top"
              VerticalScrollBarVisibility="Disabled" HorizontalScrollBarVisibility="Auto" 
              ZoomMode="Disabled" HorizontalSnapPointsType="Mandatory">
    <ItemsControl>
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <Image Width="480" Height="270" AutomationProperties.Name="Image of a cliff" Source="images/cliff.jpg" Stretch="None"  HorizontalAlignment="Left" VerticalAlignment="Top"/>
        <Image Width="480" Height="270" AutomationProperties.Name="Image of Grapes" Source="images/grapes.jpg" Stretch="None" HorizontalAlignment="Left" VerticalAlignment="Top"/>
        <Image Width="480" Height="270" AutomationProperties.Name="Image of Mount Rainier" Source="images/Rainier.jpg" Stretch="None" HorizontalAlignment="Left" VerticalAlignment="Top"/>
        <Image Width="480" Height="270" AutomationProperties.Name="Image of a sunset" Source="images/sunset.jpg" Stretch="None" HorizontalAlignment="Left" VerticalAlignment="Top"/>
        <Image Width="480" Height="270" AutomationProperties.Name="Image of a valley" Source="images/valley.jpg" Stretch="None" HorizontalAlignment="Left" VerticalAlignment="Top"/>
    </ItemsControl>
</ScrollViewer> 
```

建议将不胜感激！

* * *

感谢 Denis，我最终在 ItemsControl 上使用了以下样式，并完全删除了 ScrollViewer 和内联 ItemsPanelTemplate：

```
<Style x:Key="ItemsControlStyle" TargetType="ItemsControl">
    <Setter Property="ItemsPanel">
        <Setter.Value>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ItemsControl">
                <ScrollViewer Style="{StaticResource HorizontalScrollViewerStyle}" HorizontalSnapPointsType="Mandatory">
                    <ItemsPresenter />
                </ScrollViewer>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-11T20:05:43.767

让快照点为绑定集合工作可能很棘手。要使 ScrollViewer 的直接子节点工作的快照点应实现 IScrollSnapPointsInfo 接口。ItemsControl 没有实现 IScrollSnapPointsInfo，因此您不会看到捕捉行为。

要解决此问题，您有几个选择：

*   创建从 ItemsControl 派生的自定义类并实现 IScrollSnapPointsInfo 接口。
*   为项目控件创建自定义样式并在样式内的 ScrollViewer 上设置 Horizo​​ntalSnapPointsType 属性。

我已经实现了以前的方法，并且可以确认它有效，但在您的情况下，自定义样式可能是更好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-25T14:42:10.353

好的，这是水平 ListView 的最简单（和独立）示例，其中包含绑定项目和正确工作的捕捉（请参阅以下代码中的注释）。

**xml**：

```
 <ListView x:Name="YourListView"
              ItemsSource="{x:Bind Path=Items}"
              Loaded="YourListView_OnLoaded">
        <!--Set items panel to horizontal-->
        <ListView.ItemsPanel>
            <ItemsPanelTemplate>
                <ItemsStackPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
        </ListView.ItemsPanel>
        <!--Some item template-->
        <ListView.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding}"/>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView> 
```

**背景代码**：

```
 private void YourListView_OnLoaded(object sender, RoutedEventArgs e)
    {
        //get ListView
        var yourList = sender as ListView;

        //*** yourList style-based changes ***
        //see Style here https://msdn.microsoft.com/en-us/library/windows/apps/mt299137.aspx

        //** Change orientation of scrollviewer (name in the Style "ScrollViewer") **
        //1\. get scrollviewer (child element of yourList)
        var sv = GetFirstChildDependencyObjectOfType<ScrollViewer>(yourList);

        //2\. enable ScrollViewer horizontal scrolling
        sv.HorizontalScrollMode =ScrollMode.Auto;
        sv.HorizontalScrollBarVisibility = ScrollBarVisibility.Auto;
        sv.IsHorizontalRailEnabled = true;

        //3\. disable ScrollViewer vertical scrolling
        sv.VerticalScrollMode = ScrollMode.Disabled;
        sv.VerticalScrollBarVisibility = ScrollBarVisibility.Disabled;
        sv.IsVerticalRailEnabled = false;
        // //no we have horizontally scrolling ListView

        //** Enable snapping **
        sv.HorizontalSnapPointsType = SnapPointsType.MandatorySingle; //or you can use SnapPointsType.Mandatory
        sv.HorizontalSnapPointsAlignment = SnapPointsAlignment.Near; //example works only for Near case, for other there should be some changes
        // //no we have horizontally scrolling ListView with snapping and "scroll last item into view" bug (about bug see here http://stackoverflow.com/questions/11084493/snapping-scrollviewer-in-windows-8-metro-in-wide-screens-not-snapping-to-the-las)

        //** fix "scroll last item into view" bug **
        //1\. Get items presenter (child element of yourList)
        var ip = GetFirstChildDependencyObjectOfType<ItemsPresenter>(yourList);
        //  or   var ip = GetFirstChildDependencyObjectOfType<ItemsPresenter>(sv); //also will work here

        //2\. Subscribe to its SizeChanged event
        ip.SizeChanged += ip_SizeChanged;

        //3\. see the continuation in: private void ip_SizeChanged(object sender, SizeChangedEventArgs e)
    }

    public static T GetFirstChildDependencyObjectOfType<T>(DependencyObject depObj) where T : DependencyObject
    {
        if (depObj is T) return depObj as T;

        for (var i = 0; i < VisualTreeHelper.GetChildrenCount(depObj); i++)
        {
            var child = VisualTreeHelper.GetChild(depObj, i);

            var result = GetFirstChildDependencyObjectOfType<T>(child);
            if (result != null) return result;
        }
        return null;
    }

    private void ip_SizeChanged(object sender, SizeChangedEventArgs e)
    {
        //3.0 if rev size is same as new - do nothing
        //here should be one more condition added by && but it is a little bit complicated and rare, so it is omitted.
        //The condition is: yourList.Items.Last() must be equal to (yourList.Items.Last() used on previous call of ip_SizeChanged)
        if (e.PreviousSize.Equals(e.NewSize)) return;

        //3.1 get sender as our ItemsPresenter
        var ip = sender as ItemsPresenter;

        //3.2 get the ItemsPresenter parent to get "viewable" width of ItemsPresenter that is ActualWidth of the Scrollviewer (it is scrollviewer actually, but we need just its ActualWidth so - as FrameworkElement is used)
        var sv = ip.Parent as FrameworkElement;

        //3.3 get parent ListView to be able to get elements Containers
        var yourList = GetParent<ListView>(ip);

        //3.4 get last item ActualWidth
        var lastItem = yourList.Items.Last();
        var lastItemContainerObject = yourList.ContainerFromItem(lastItem);
        var lastItemContainer = lastItemContainerObject as FrameworkElement;
        if (lastItemContainer == null)
        {
            //NO lastItemContainer YET, wait for next call
            return;
        }
        var lastItemWidth = lastItemContainer.ActualWidth;

        //3.5 get margin fix value
        var rightMarginFixValue = sv.ActualWidth - lastItemWidth;

        //3.6\. fix  "scroll last item into view" bug
        ip.Margin = new Thickness(ip.Margin.Left, 
            ip.Margin.Top, 
            ip.Margin.Right + rightMarginFixValue, //APPLY FIX
            ip.Margin.Bottom);
    }

    public static T GetParent<T>(DependencyObject reference) where T : class
    {
        var depObj = VisualTreeHelper.GetParent(reference);
        if (depObj == null) return (T)null;
        while (true)
        {
            var depClass = depObj as T;
            if (depClass != null) return depClass;
            depObj = VisualTreeHelper.GetParent(depObj);
            if (depObj == null) return (T)null;
        }
    } 
```

关于这个例子。

1.  大多数检查和错误处理都被省略了。

2.  如果您覆盖 ListView 样式/模板，则必须相应更改 VisualTree 搜索部分

3.  我宁愿用这个逻辑创建继承自 ListView 控件，也不愿在实际代码中按原样使用提供的示例。
4.  相同的代码适用于垂直大小写（或两者），只需稍作改动。
5.  提到的捕捉错误 - 处理 SnapPointsType.MandatorySingle 和 SnapPointsType.Mandatory 情况的 ScrollViewer 错误。它出现在尺寸不固定的物品上

.

# java - 是否可以使用 Jsoup 解析 DOCTYPE 以发现 HTML 版本？

> ID：10107471
> 
> 赞同：5
> 
> 时间：2012-04-11T14:00:47.880
> 
> 标签：java, html, jsoup, doctype

我想用*Jsoup**`DOCTYPE`*解析页面以发现 HTML 的版本*（* HTML *5*、*HTML 4*、*XHTML*等）。

 ***是否可以*`DOCTYPE`*用*Jsoup*解析来处理它？如果不是，有一种方法可以实现发现页面 HTML 版本的主要目标？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T14:14:30.367

`Jsoup`有`DocumentType`这个目的的类：

```
List<Node>nods = doc.childNodes();
         for (Node node : nods) {
            if (node instanceof DocumentType) {
                DocumentType documentType = (DocumentType)node;
                  System.out.println(documentType.toString());
                  System.out.println(DocumentType.attr("publicid"));
            }
        } 
```***

# python - 上传到pypi，用pip下载

> ID：10107476
> 
> 赞同：2
> 
> 时间：2012-04-11T14:01:19.057
> 
> 标签：python, package, pip, distutils, pypi

我写了一个小工具并上传到 pypi ([这里](http://pypi.python.org/pypi?name=undo&version=0.5.1&%3aaction=display))，但我无法使用 pip 下载它。这是点子日志：

```
------------------------------------------------------------
c:\python32\scripts\pip-script.py run on 04/11/12 15:53:45
Downloading/unpacking undo

  Getting page http://pypi.python.org/simple/undo
  Could not fetch URL http://pypi.python.org/simple/undo: HTTP Error 301: Moved Permanently - Redirection to url '/simple/undo/' is not allowed
  Will skip URL http://pypi.python.org/simple/undo when looking for download links for undo
  Getting page http://pypi.python.org/simple/
  Real name of requirement undo is undo

  URLs to search for versions for undo:
  * http://pypi.python.org/simple/undo/
  Getting page http://pypi.python.org/simple/undo/
  Getting page http://bitbucket.org/aquavitae/undo
  Analyzing links from page http://pypi.python.org/simple/undo/
    Skipping link http://bitbucket.org/aquavitae/undo (from http://pypi.python.org/simple/undo/); not a file
    Could not parse version from link: https://bitbucket.org/aquavitae/undo/get/latest.tar.gz (from http://pypi.python.org/simple/undo/)
    Skipping link https://bitbucket.org/aquavitae/undo/get/latest.tar.gz (from http://pypi.python.org/simple/undo/); wrong project name (not undo)
  Could not find any downloads that satisfy the requirement undo

No distributions at all found for undo

Exception information:
Traceback (most recent call last):
  File "C:\python32\lib\site-packages\pip\basecommand.py", line 104, in main
    status = self.run(options, args)
  File "C:\python32\lib\site-packages\pip\commands\install.py", line 245, in run
    requirement_set.prepare_files(finder, force_root_egg_info=self.bundle, bundle=self.bundle)
  File "C:\python32\lib\site-packages\pip\req.py", line 978, in prepare_files
    url = finder.find_requirement(req_to_install, upgrade=self.upgrade)
  File "C:\python32\lib\site-packages\pip\index.py", line 157, in find_requirement
    raise DistributionNotFound('No distributions at all found for %s' % req)
pip.exceptions.DistributionNotFound: No distributions at all found for undo 
```

谁能看到我哪里出错了？我在代理后面，虽然这可能是问题，但 pip 与其他软件包没有问题，只是这个，所以我假设我以某种方式将它打包错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:37:04.700

https 中的 bitbucket 链接仅在您通过身份验证时才有效。请改用 bitbucket 上的 http 链接。

*（pypi页面中的两个网站/问题跟踪链接的相同问题，我无法在没有先登录的情况下访问它）*

**编辑**：http链接重定向到登录页面，登录后，我得到：

> 您无权访问此存储库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:53:41.990

有多个问题：您的 tar 文件中没有包名（'undo' 不是 'latest.tar.gz' 的子字符串）；并且 pypi 出于某种原因想要重定向（这似乎不正常，所以我不会进入那个）。

通常 pip 首先查看与您的包名称匹配的所有 url，包括主页和 pypi 在[http://pypi.python.org/simple/undo/](http://pypi.python.org/simple/undo/)上提供的下载页面（假设您同时指定了两者）。分析那些页面上包含项目名称的任何 url。

有几件事使 pip 拒绝一个 url：

```
Skipping link http://bitbucket.org/aquavitae/undo (from http://pypi.python.org/simple/undo/); not a file 
```

这个 url 里面有 undo，但它没有指向一个文件。

```
Could not parse version from link: https://bitbucket.org/aquavitae/undo/get/latest.tar.gz (from http://pypi.python.org/simple/undo/) 
```

没有版本号`latest.tar.gz`

```
Skipping link https://bitbucket.org/aquavitae/undo/get/latest.tar.gz (from http://pypi.python.org/simple/undo/); wrong project name (not undo) 
```

文件组件中没有项目名称`undo`。

现在的工作是因为`https://bitbucket.org/aquavitae/undo/downloads`可以访问并且在其中的文件名部分有 3 个带有撤消的链接，还有很多很多没有的链接。采用：

```
pip install undo --no-install --log undo.log 
```

并查看`undo.log`文件。

Please note that pip uses the function parse_versions from the pkg_resources (in dist_packages) to determine what is the newest version available. So even if you specify `undo-1.1.tar.gz` explicitly as the the version on your pypi download link, if your homepage also points to newer version like `undo-1.2-dev-20120614` the latter is taken as found.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T04:24:06.067

您可能需要使用以 latest.tar.gz#egg=undo 之类结尾的链接

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T05:21:04.670

我不知道它是 pip 中的错误还是故意的，但是一旦我打开 bitbucket 站点它就可以工作，尽管它需要下载（并确实下载）的实际文件托管在 pypi 上。所以如果其他人有这个问题，解决方案是确保 pypi 页面上的所有链接都可以访问，即使它们没有托管下载文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T13:28:12.517

`setup.py`将'更改`download_url`为[https://bitbucket.org/aquavitae/undo/get/undo-0.5.1.tar.gz](https://bitbucket.org/aquavitae/undo/get/undo-0.5.1.tar.gz)。

# java - Opa：它如何识别服务器端或客户端脚本

> ID：10107477
> 
> 赞同：4
> 
> 时间：2012-04-11T14:01:19.847
> 
> 标签：java, javascript, sql, opa

我最近对学习一种叫做 Opa 的新语言很感兴趣，当我读到它时似乎很有希望。就维基百科的描述而言，它能够进行客户端、服务器端的脚本编写，也可以用于数据库（如果错了，请纠正我）。我的问题是：OPa 编译器如何知道，脚本应该在哪一侧执行？它应该是用户定义的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T16:58:26.830

您可以注释函数以强制它位于特定的一侧。但这不是强制性的，您可以让编译器决定。

例如，DOM 访问在客户端，数据库查询在服务器端。但如果可能，会为双方编译一个函数。

阅读[http://doc.opalang.org/manual/Developing-for-the-web/Client-server-distribution](http://doc.opalang.org/manual/Developing-for-the-web/Client-server-distribution)了解更多信息。

# sql - 如何在 SQL MSAccess 中对同一字段使用“喜欢”和“不喜欢”？

> ID：10107484
> 
> 赞同：4
> 
> 时间：2012-04-11T14:01:41.733
> 
> 标签：sql, ms-access, where, sql-like

我想过滤以下所有行：

```
field like "*AA*" and field not like "*BB*" 
```

但这是返回所有内容，而不是显示包含`AA`和不包含的所有行`BB`。

好吧，现在它可以正常工作了，只是重新启动了 ms 访问...

对不起我的错字...：s更新

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T14:02:58.063

尝试这个：

```
filed like "*AA*" and filed not like "*BB*" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-27T08:17:00.007

我发现MS Access 将拒绝--Not Like "BB*"-- 如果没有包含在括号中，不像--Like "BB*"-- 没有括号也可以。

我在 MS Access 2010 上测试了这些并且都是有效的：

1.  喜欢“ *BB* ”

2.  （如“ *BB* ”）

3.  （不像“ *BB* ”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:03:00.237

只需重述目标字段和条件；

```
where (field like "*AA*" and field not like "*BB*") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-27T23:19:13.277

如果您在 VBA 中（而不是在查询中）执行此操作，则： where 字段如“ *AA* ”和字段不喜欢“ *BB* ”则不起作用。

你必须使用： where field like " *AA* " and field like " *BB* " = false then

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T14:21:47.577

有什么问题：

```
field like "*AA*" and field not like "*BB*" 
```

它应该工作。

你能发布一些你的数据的例子吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-24T10:31:48.907

不确定这是否仍然存在，但我猜你需要类似的东西

```
((field Like "AA*") AND (field Not Like "BB*")) 
```

# wcf - wcf + postsharp 的探查器库

> ID：10107486
> 
> 赞同：1
> 
> 时间：2012-04-11T14:01:50.937
> 
> 标签：wcf, profile, postsharp, mvc-mini-profiler

我们需要向我们的 WCF 应用程序添加一个新的分析功能，用于记录在应用程序中花费的时间。我正在查看 PostSharp 以获取应用日志记录的约定驱动方法，并且需要一些关于如何实际记录日志的输入。我已经使用 StopWatch 创建了一个用于记录目的的自定义类，并且可以通过我的 WCF 应用程序的各个层记录这些步骤。但是，我想知道是否有一个线程安全的替代库可以与 PostSharp 一起用于此目的。我遇到过 MiniProfiler，但它似乎主要用于 ASP.NET MVC 应用程序。我应该考虑的任何其他框架还是应该只使用我的自定义类？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:31:46.097

PostSharp 本身是线程安全的。如果写得不好，您编写的方面可能是线程不安全的，但总有一种方法可以使它们成为线程安全的。

如果您正在使用 OnMethodBoundaryAspect 并且需要将某些内容从 OnEntry 传递到 OnSuccess，请将初始秒表值存储在 OnMethodExecutionArgs.MethodExecutionTag 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:10:11.130

我过去使用`IClientMessageInspector`在 custom 上实现了类似的操作`IEndpointBehavior`。根据您想要的日志记录类型，这可能会奏效。以下链接中有一个示例

[IClientMessageInspector 接口](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.iclientmessageinspector.aspx)

# c - C 编程 - 初始化 struct 2D 数组

> ID：10107503
> 
> 赞同：0
> 
> 时间：2012-04-11T14:02:40.020
> 
> 标签：c, arrays, string, struct

好的，所以我试图将带有字符串元素的 2D 数组的元素传递给 struct 中的 2D 数组。我做了一个代码，但它收到一个运行时错误。我认为我尝试初始化 board2[i][j] 的代码中存在问题。任何帮助表示赞赏。

```
 char ***board;
  int i, j, size;

  printf("Enter the size of array:");
  scanf("%d", &size);

  if((board = (char***)malloc(sizeof(char**)*size))==NULL)
  {
       printf("Memory Allocation failed\n");
       return -1;
  }

  for(i=0; i<size; i++)
  {
       if((board[i] = (char**)malloc(sizeof(char*)*size))==NULL)       
       { 
          printf("Memory Allocation failed\n");
          return -1;
       }
       for(j=0; j<size; j++)
       {
          if((board[i][j] = (char *)malloc(sizeof(char)*4))==NULL)
          {
            printf("Memory Allocation failed\n");
            return -1;
          }
          a = rand() % 2;  
          b = rand() % 2;
         if(a==0 && b==0)
            strcpy(board[i][j], "ab");
         else if(a && b==0)
            strcpy(board[i][j], "Ab");
         else if(a==0 && b==1)
            strcpy(board[i][j], "aB");
         else
            strcpy(board[i][j], "AB");
        }

  struct data{
    const char *element;
    int visited;
  };    
  void board2_initialize(char ***board, int size)
  {
  struct data **board2;

  for(i=0;i<size;i++)
  {
    for(j=0;j<size;j++)
    {
     board2[i][j].element = board[i][j];
     board2[i][j].visited = 0;
     printf("%s", board2[i][j].element);
    }
  }
  } 
```

编辑：忘了提到初始化将发生在函数内部

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:05:39.883

您分配它的方式与您对`board`数组的分配方式相同：

```
struct data **board2 = malloc(sizeof(struct data *) * size);

for(i = 0; i < size; i++)
{
    board2[i] = malloc(sizeof(struct data) * size);

    for(j = 0; j < size; j++)
    {
        /* ... */
    }
} 
```

# iphone - iPhone 石英是否泄漏内存？

> ID：10107509
> 
> 赞同：3
> 
> 时间：2012-04-11T14:02:58.313
> 
> 标签：iphone, quartz-graphics

我一直在用仪器分析我的应用程序，泄漏表明我有一个泄漏：

4 kb - malloc

责任库 - QuartzCore

责任框架 - CA::Transaction::create()

我一直想知道这真的是石英泄漏，还是我把它误认为是别的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:45:40.557

是的。Apple 框架并不完美，尤其是`QuartzCore`其他与媒体相关的框架。别担心——这只有 4K！

# c++ - 如何降低此程序中大型数据集输入的时间复杂度？

> ID：10107514
> 
> 赞同：0
> 
> 时间：2012-04-11T14:03:09.737
> 
> 标签：c++, performance

我编写了这段代码来计算数字范围之间的设置位数。我的程序编译得很好并给出了正确的输出。大量输入和“超出时间限制”花费了太多时间。

```
#define forn(i, n) for(long int i = 0; i < (long int)(n); i++)
#define ford(i, n) for(long int i = (long int)(n) - 1; i >= 0; i--)
#define fore(i, a, n) for(long int i = (int)(a); i < (long int)(n); i++)

long int solve(long int i) {
    i = i - ((i >> 1) & 0x55555555);
    i = (i & 0x33333333) + ((i >> 2) & 0x33333333);
    return (((i + (i >> 4)) & 0x0F0F0F0F) * 0x01010101) >> 24;
}

int main() {
    freopen("C:/Projects/CodeChef/SetBits/input.txt", "rt", stdin);
    freopen("C:/Projects/CodeChef/SetBits/output.txt", "wt", stdout);

    int tt;
    long long int num1;
    long long int num2;
    scanf("%d", &tt);
    forn(ii, tt) {
        unsigned long int bits = 0;
        unsigned long long int total_bits = 0;
        scanf("%lld",&num1);
        scanf("%lld",&num2);
        fore(jj, num1, num2+1) {
                bits = solve(jj);
                total_bits += bits;
                }

        printf("%lld\n",total_bits);
    }

    return 0;
} 
```

示例测试用例：-

样本输入：3

-2 0

-3 4

-1 4

样本输出：

63

99

37

对于第一种情况，-2 包含 31 个 1，后跟一个 0，-1 包含 32 个 1，0 包含 0 个 1。因此总数为 63。

对于第二种情况，答案是 31 + 31 + 32 + 0 + 1 + 1 + 2 + 1 = 99

具有大值的测试用例：-

10

-1548535525 662630637

-1677484556 -399596060

-2111785037 1953091095

643110128 1917824721

-1807916951 491608908

-1536297104 1976838237

-1891897587 -736733635

-2088577104 353890389

-2081420990 819160807

-1585188028 2053582020

关于如何优化代码以减少时间的任何建议。所有有用的建议和答案都将通过投票表示赞赏。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:22:56.380

我真的不知道你在做什么，但我知道你可以大量清理你的代码，你可以内联你的函数。

此外，我冒昧地“改写”您的代码，您正在使用像 C 一样的 C++，而这些定义只是严峻的，将文件映射到 stdio 甚至更糟。我没有测试或编译代码，但它就在那里。

```
#include <fstream>

inline long int solve(long int i) {
    i = i - ((i >> 1) & 0x55555555);
    i = (i & 0x33333333) + ((i >> 2) & 0x33333333);
    return (((i + (i >> 4)) & 0x0F0F0F0F) * 0x01010101) >> 24;
}

int main() {
    long first, last;
    unsigned count;
    std::ifstream inf("C:/Projects/CodeChef/SetBits/input.txt");
    std::ofstream off("C:/Projects/CodeChef/SetBits/output.txt");
    inf >> count;
    for(unsigned i=0u; i!=count; ++i) {
        inf >> first >> last;
        long total=0;
        ++last;
        for(long t=first; t!=last; ++t) {
            total+=solve(t);
        }
        off << total << '\n';
    }
    return 0;
} 
```

关于如何加快速度的一些想法：

*   您可以构建计算值的 std::map ，如果它们先前已被处理，则使用它们而不是重新计算。
*   做同样的事情，但存储范围而不是单个值，但这会很棘手。您可以查看映射中是否存在值并在映射中递增，直到没有更多预处理值，在这种情况下开始处理它们以进行迭代。
*   检查上一个数字和下一个数字之间是否存在微不足道的序列，您可以计算出第一个值，然后将其递增。
*   这样的序列可能有一个 O(1) 算法
*   查看英特尔 TBB 并使用 tbb::parallel 之类的东西将工作分配到每个内核上，因为您正在处理如此小的内存或内存，那么您应该在大块大小的情况下获得非常好的回报。

# expressionengine - Expression Engine - 如何使用 SafeCracker 上传图像？

> ID：10107519
> 
> 赞同：0
> 
> 时间：2012-04-11T14:03:19.720
> 
> 标签：expressionengine

我是 SafeCracker 的新手，虽然我能够输入大多数其他输入类型，但文件输入类型对我来说无法正常工作。

这是我在名为 event_icon 的字段类型文件上使用的代码

```
<label for="event_icon"><span>*Event Icon:</span>
   <input type="file" name="event_icon" value="{event_icon}">
</label> 
```

我也试过：

```
<label for="event_icon"><span>*Event Icon:</span>
 {field:event_icon}
</label> 
```

没有喜悦。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:01:02.053

嗯，不确定到底发生了什么，但是您的页面上有一个 javascript 错误，该错误来自与 File 字段相关的 EE javascript 输出。

```
Failed to load resource: the server responded with a status of 500 (Internal Server Error)
/?&ACT=10&action=setup&_=1334166664318 
```

我会尝试将 File 字段更改为 Safecracker File，这是一个更简单的字段类型。

# css - 使用 CSS 无限移动多个背景

> ID：10107520
> 
> 赞同：1
> 
> 时间：2012-04-11T14:03:19.957
> 
> 标签：css, animation, background, css-animations

我有两个背景：

```
body {
    background-image: url(img/nemo.png),url(img/ocean.png);
} 
```

如何`nemo.png background`从左右无限移动但不影响`ocean.png background`？

**编辑：**当他到达最右边（并且图像不再可见）时，他将再次从左边出现并开始从左到右漂移。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T14:44:58.550

这可以使用纯 CSS 3 来完成，例如[关键帧动画](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Using_CSS_animations)：

## 演示：http: [//jsfiddle.net/dghsV/112](http://jsfiddle.net/dghsV/112)

```
body {
    background-image: url("http://www.animaatjes.nl/disney-plaatjes/disney-plaatjes/finding-nemo/nemo11.gif"), url("http://images2.layoutsparks.com/1/200022/ocean-dreams-blue-waves.jpg");
    background-repeat: no-repeat;
    background-position: 50% 0%, 0;
    -moz-animation: swim 2s linear 0s infinite;
    -webkit-animation: swim 2s linear 0s infinite;
    animation: swim 2s linear 0s infinite;
}
@-moz-keyframes swim {
    from { background-position: 200% 0, 0 0; }
    to  { background-position: -100% 0, 0 0; }
}
@-webkit-keyframes swim {
    from { background-position: 200% 0, 0 0; }
    to  { background-position: -100% 0, 0 0; }
}
@keyframes swim {
    from { background-position: 200% 0, 0 0; }
    to  { background-position: -100% 0, 0 0; }
} 
```

## 句法

> [`animation`](https://developer.mozilla.org/en-US/docs/Web/CSS/animation): ;[`animation-name`](https://developer.mozilla.org/en-US/docs/Web/CSS/animation-name) [`animation-duration`](https://developer.mozilla.org/en-US/docs/Web/CSS/animation-duration) [`animation-timing-function`](https://developer.mozilla.org/en-US/docs/Web/CSS/animation-timing-function) [`animation-delay`](https://developer.mozilla.org/en-US/docs/Web/CSS/animation-delay) [`animation-iteration-count`](https://developer.mozilla.org/en-US/docs/Web/CSS/animation-iteration-count) [`animation-direction`](https://developer.mozilla.org/en-US/docs/Web/CSS/animation-direction)

`-webkit-`该功能是实验性的，因此必须添加供应商前缀（例如）（另请参阅[Can I use CSS3 Animation](http://caniuse.com/css-animation)以获取兼容性说明）。在我的演示中，我使用了所有属性，除了最后一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:14:54.923

这是一个选项：

从中创建一个动画 GIF，`nemo.png`它是图像从左向右移动的简单动画。

`ocean.png`然后通过设置为页面的背景来创建分层背景`body`。

`div`然后使用以下 css创建一个which：

```
width:100%; 
height:100%;
background-position:center center;
background-image: url(img/moving-nemo.gif); 
```

这`div`将是您所有内容的包罗万象的容器，将为您提供分层的背景效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:40:17.283

仅将海洋作为背景并创建一个以 nemo 作为背景的 div：

```
<div id="nemo"></div>

#nemo {
    background: url(nemo.png) no-repeat;
    width: 100px;
    height: 100px;
    position:absolute;
    left: 0px;
    top: 500px;
    z-index:-10;
} 
```

比你可以用 javascript (jQuery) 为这个 div 设置动画：

```
<script type="text/javascript">
    $(document).ready(function() {
        SwimRight();
    });

//duration is in ms
function SwimRight() {
     $('#nemo').css({positionLeft: 0});
     $('#nemo').animate(
          { left: $(document).width() },
          { duration: 5000,
          easing: normal,
          queue: true, 
          complete: SwimRight}
     );
</script> 
```

# android - 一次只选择一个单选按钮

> ID：10107532
> 
> 赞同：5
> 
> 时间：2012-04-11T14:03:54.993
> 
> 标签：android, radio-button, radio-group

我在一个单选组中有两个单选按钮。我还有 2 个 androd:button checkbox- 用于取消选择单选按钮时，以及 checkbox_v 用于用户选择复选框时。我还实现了一种方法`onRadioButtonClick`，以确保只有一个单选按钮具有 drawable:checkbox 而另一个具有 checkbox_v 。我怎样才能实现 onRadioClick 来做到这一点？任何想法？

```
public void onRadioButtonClick(View v)
{
    RadioButton button = (RadioButton) v;
    boolean checkBox1Selected;
    boolean checkBox2Selected = false;

    Toast.makeText(MainActivity.this,
        button.getId()+ " was chosen."+R.id.wificheckBox,
        Toast.LENGTH_SHORT).show();

    if ( button.getId() ==R.id.wificheckBox) {
        // Toggle status of checkbox selection
        checkBox1Selected = radiowifiButton.isChecked();

        // Ensure that other checkboxes are not selected
        if (checkBox2Selected) {
            radiomobileButton.setChecked(false);
            checkBox2Selected = false;
        }
        else if (button.getId() ==R.id.wifimobilecheckBox) {
            // Toggle status of checkbox selection
            checkBox2Selected = radiomobileButton.isChecked();
            // Ensure that other checkboxes are not selected
            if (checkBox1Selected) {
                radiowifiButton.setChecked(false);
                checkBox1Selected = false;
            }
        }
    } 
```

主xml

```
<RadioGroup
    android:id="@+id/radioGroup"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
     android:layout_alignParentLeft="true"
    android:layout_below="@+id/ll_1"
    android:layout_marginLeft="20dp">

<LinearLayout
    android:id="@+id/ll_2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/ll_1"
    android:layout_marginLeft="20dp"
    android:orientation="horizontal" >

    <RadioButton
        android:id="@+id/wifimobilecheckBox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:button="@drawable/button_radio"
        android:checked="true"
        android:onClick="onRadioButtonClick" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/wificheckBox"
        android:layout_toRightOf="@+id/wificheckBox"
        android:paddingLeft="15dp"
        android:text="WiFi or mobile network"
        android:textColor="#333333"
        android:textSize="20dp" />
</LinearLayout>

<LinearLayout
    android:id="@+id/ll_3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/ll_2"
    android:paddingTop="20dp"
    android:layout_marginLeft="20dp"
    android:orientation="horizontal" >

    <RadioButton
        android:id="@+id/wificheckBox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:button="@drawable/button_radio"

        android:onClick="onRadioButtonClick" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/wificheckBox"
        android:layout_toRightOf="@+id/wificheckBox"
        android:paddingLeft="15dp"
        android:text="WiFi "
        android:textColor="#333333"
        android:textSize="20dp" />
</LinearLayout>

</RadioGroup> 
```

Drawabe- button_radio

```
<item android:state_checked="true"android:state_pressed="false" android:drawable="@drawable/checkbox_v"/><item android:state_checked="false"android:state_pressed="false"'android:drawable="@drawable/checkbox"/> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-11T14:13:52.410

如果它们在一个无线电组中，则一次只能选择一个。如果您希望两者都能够被选中，请将它们从无线电组中删除。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-13T13:48:57.207

由于投票最多的答案对我和其他许多人一样不起作用。我正在分享我使用的方法及其完美运行。

```
<RadioGroup
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checkedButton="@+id/rb_female"
            android:orientation="horizontal">

            <RadioButton
                android:id="@+id/rb_female"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginEnd="10dp"
                android:layout_marginRight="10dp"
                android:button="@drawable/selector_radio_button"
                android:text="Female" />

            <RadioButton
                android:id="@+id/rb_male"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:button="@drawable/selector_radio_button"
                android:text="Male" />
</RadioGroup> 
```

`android:checkedButton="@+id/rb_female"`为我工作的设置在`RadioGroup`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-29T13:54:01.057

To check/uncheck radio buttons not part of a RadioGroup, add a method in the android GUI designer under the RadioButton Properties 'onClick' (In this example radio1_onClick).

In your activity.xml under the xml for the RadioButton

```
RadioButton 
    [blah blah blah]
    android:id="@+id/radio1"
    android:onClick="radio1_onClick" 
```

In your activity_main.xml you would write the following method.

```
private void radio1_onClick(View v)
{
    CompoundButton b=(CompoundButton)findViewById(R.id.radio1);
    b.setChecked(true); /* light the button */

    //b.setChecked(false); /* unlight the button */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T14:33:29.683

您应该删除您的 onRadioButtonClick 方法并将 OnCheckedChangeListener 添加到您的无线电组。[http://developer.android.com/reference/android/widget/RadioGroup.OnCheckedChangeListener.html](http://developer.android.com/reference/android/widget/RadioGroup.OnCheckedChangeListener.html)

我想通过实现您自己的点击处理程序，您正在覆盖无线电组的某些功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-17T20:53:53.863

你的要求不清楚。你介意让它更简单吗？我尽力了解您的要求，这些是下面给出的发现:(。

单选按钮可以有文本。因此，您不必`TextView`在布局中添加另一个。请删除它们`android:text="blah.. blah.."`并向您的单选按钮添加一个简单的。

根据我的理解，您有两个疑问。

**如何使用自定义可绘制对象自定义 RadioButtons？**

[在这里](https://stackoverflow.com/questions/4259295/how-can-i-set-the-width-of-radio-buttons-to-change-with-regards-to-screen-size)查看答案。

**如何取消选择先前选择的单选按钮？**

事实上，您不必手动执行此操作，因为您将这些单选按钮保存在一个单选组中。

希望这会帮助你。

# java - 基于使用 wsdl2java 创建的存根将客户端证书附加到 Web 服务调用

> ID：10107533
> 
> 赞同：3
> 
> 时间：2012-04-11T14:03:56.137
> 
> 标签：java, web-services, certificate

我已经创建了用于使用 wsdl2java 使用 Web 服务的存根类，但我需要为传输指定客户端证书。我该怎么做呢？

在 .NET 中，我习惯于在调用之前直接将 X509Certificate 对象附加到类似的存根类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T19:48:34.707

在 Java 中，您有几个选择：

*   指定`java.net.ssl*`参数以设置证书存储、密码等。您将希望使用这些参数来设置`keytool`这些对象。

这是代码，或者可以在命令行中使用 -D 指定这些代码。请注意，这些对您的应用程序来说是全局的。

```
System.setProperty("javax.net.ssl.keyStore", "myKeyStore.p12");
System.setProperty("javax.net.ssl.keyStoreType", "pkcs12");
System.setProperty("javax.net.ssl.keyStorePassword", "password"); 
```

*   创建一个自定义`SSLFactory`，在较低级别配置您的证书并将其设置在您的 WS 上下文中。你可以用[谷歌](http://www.google.com?q=jaxws+ssl+client+certs)搜索并找到很多信息。还要检查[这个问题](https://stackoverflow.com/questions/5689233/pass-client-certificate-to-web-service-without-setting-system-wide-properties)（作者说它是针对 JAX-RPC，但在评论中他将他的 impl 更改为 JAX-WS）。

[您可以在JSSE 文档](http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/JSSERefGuide.html#Customization)中找到更多信息（这适用于 java 1.5）。

# windows - 如何在 Windows 上使用 DOS 命令以编程方式将档案解压缩到他们自己的目录中？

> ID：10107534
> 
> 赞同：8
> 
> 时间：2012-04-11T14:04:01.217
> 
> 标签：windows, recursion, dos, unzip

在 Unix 上解压缩档案有很多方法：

*   [如何从 Unix 命令行递归解压缩目录及其子目录中的档案？](https://stackoverflow.com/questions/107995/how-do-you-recursively-unzip-archives-in-a-directory-and-its-subdirectories-from)
*   [将一堆 zip 解压到自己的目录中](https://stackoverflow.com/questions/2463874/unzip-a-bunch-of-zips-into-their-own-directories)

***目标是在 Windows 上***找到所有存档并将它们解压缩到它们自己的目录（找到每个存档的位置）中。
可选的：

*   解压后删除存档。
*   如果一个存档在解压缩期间有任何问题，请记录任何错误消息。

我正在寻找一个**普通的 DOS 命令行**，例如使用`7z.exe`（包含在[PeaZip](http://peazip.sourceforge.net/)的便携式版本中）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T14:04:11.873

[我从Sevenzip 项目的这个线程中获取](http://sourceforge.net/projects/sevenzip/forums/forum/45798/topic/3539542)了一个命令行，稍作修改：

```
FOR /R %I IN (*src.zip) DO (C:\apps\peazip_portable-3.8.WINDOWS\res\7z\7z.exe x "%I" -aoa -o"%~dpI\*" |c:\windows\system32\find.exe "Everything is Ok" >nul  &&DEL /F "%I" ||ECHO.%I : EXTRACT FAIL - ARC NOT DELETED >>ERR.TXT) 
```

（多行可见性）

```
FOR /R %I IN (*src.zip) DO ( \
  C:\apps\peazip_portable-3.8.WINDOWS\res\7z\7z.exe x "%I" -aoa -o"%~dpI\*" 
  |c:\windows\system32\find.exe "Everything is Ok" >nul &&DEL /F "%I"
  ||ECHO.%I : EXTRACT FAIL - ARC NOT DELETED >>ERR.TXT) 
```

笔记：

*   我更喜欢指定 " `c:\windows\system32\find.exe`" 而不是 just `FIND`，因为我的（来自[msysgit](https://github.com/msysgit/msysgit/wiki)或[gow](https://github.com/bmatzelle/gow/wiki)）`find.exe`上还有其他 ' ' 。`PATH`
*   `&&DEL /F "%I"`如果要保留存档，请删除 ' ' 部分。

我刚刚在两分钟内`src.zip`从[Rational Team Concert SDK](https://jazz.net/downloads/rational-team-concert/)中解压缩了 470 " " 文件！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-22T22:15:33.090

这是一个老问题，但有人可能会觉得这很有用。这种方法适用于我使用 WinZip 和 WinZip 命令行插件，两者都可以在 WinZip 网站上为注册用户使用。

```
FOR /R %I IN (*.zip) DO (C:\Program Files (x86)\winzip\wzunzip.exe -ye "%I" "%~pI") 
```

-ye 将以 zip 文件名命名文件夹。%I 是 zip 文件名 %~pI 是 zip 文件内容目标

随意在上一个答案中添加调试消息。在存储所有包含 zip 文件的子文件夹的文件夹中运行命令。

# api - 访问“你在做什么”-foursquare 上的评论

> ID：10107542
> 
> 赞同：0
> 
> 时间：2012-04-11T14:04:16.133
> 
> 标签：api, comments, foursquare, hashtag

我正在开发一个foursquare应用程序，我依赖于用户生成的数据。

例如，假设我想在菜单上对带有稀有啤酒的地方进行分类，然后我希望用户在他们的“你在做什么”中写下诸如#RareBeer Pabst Blue Ribbon 之类的评论，并能够捕捉到该评论.

我知道我的 OAuthed 用户必须与用户成为朋友才能看到这一点，但我该如何从那里着手呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:01:46.237

解决此问题的最佳方法是使用我们在此处详述的实时 API：[https](https://developer.foursquare.com/overview/realtime) ://developer.foursquare.com/overview/realtime 。

设置 Push API 使用者后，您将能够在 OAuthed 用户发生签入时直接发送到您的服务器。每次推送都将包含喊声，如果有的话，让您可以解析用户进来时留下的评论。这是像 Hashtag Mom ( [http://hashtagmom.com/](http://hashtagmom.com/) ) 等应用程序使用的方法能够尽快收集用户的呼声并采取行动。

# database - 处理数据库并发

> ID：10107544
> 
> 赞同：1
> 
> 时间：2012-04-11T14:04:25.563
> 
> 标签：database, jakarta-ee, concurrency, sum

似乎是一个常见问题，但我不知道一个直接的答案-

## 环境

*   Java EE 环境（多个 JVM）
*   2阶段提交设置
*   甲骨文数据库

## 给定

带有“AMOUNT”列的数据库表

## 逻辑

```
if SELECT SUM(AMOUNT) WHERE... + current amount < Const. ==> insert row 
```

## 问题

竞争条件 - 我只想在“提交”时插入行。同时，我不希望其他线程访问我用于求和的数据。我还想尽可能减少未访问的数据库数据，以免滞留其他线程。

## 当前解决方案

使用 Oracle 的 SELECT FOR UPDATE 机制

* * *

有没有人有其他解决方案来处理这个问题？开箱即用的解决方案也将受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:40:34.057

使用 Oracle，您可以使用该`INSERT WHEN`子句（请参阅[此处](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_9014.htm)）在数据库上一举进行条件插入（使用直接 JDBC）：

```
insert 
  when sumamount + ? < ? then
     into mytable (id, amount, otherfield) values(myseq.nextval, ?, ?)
  select sum(amount) sumamount from mytable 
```

使用参数：

*   新金额
*   持续的
*   新金额
*   其他字段值

如果这对您不起作用，那么我将使用具有“可序列化”隔离级别的事务管理器来防止脏读、幻读或不可重复读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:41:26.303

JPA 作为 Java EE 的一部分提供了[锁定机制](http://docs.oracle.com/javaee/6/tutorial/doc/gkjiu.html)。

一般有悲观锁和乐观锁之分。

**悲观锁定**实际上会在读取数据时锁定表行（生成的 SQL 是`SELECT FOR UPDATE ...`您当前的解决方案），例如

```
Person person = em.find(Person.class, personPK, LockModeType.PESSIMISTIC_WRITE); 
```

**乐观锁定**为每个表使用一个版本列：

```
public class Employee {
@ID int id;
@Version int version;
... 
```

悲观的方法似乎最适合你

# c# - AutoMapper - 使用构造函数映射子集合

> ID：10107550
> 
> 赞同：0
> 
> 时间：2012-04-11T14:04:36.867
> 
> 标签：c#, collections, pagination, automapper

我有以下类，我需要将 Thread 类中的帖子集合映射到 ThreadView 类中的分页帖子集合，但我完全不知道如何去做。

```
// Database class
public class Thread
{
    public virtual int Id { get; set; }
    public virtual string Title { get; set; }
    public virtual IEnumerable<Post> Posts { get; set;}
}

// View class
public class ThreadView
{
    public int Id { get; set; }
    public string Title { get; set; }
    public PaginatedList<PostView> Posts { get; set; }
}

public class PaginatedList<T> : List<T>
{
    public PaginatedList<IEnumerable<T> source, int page)
    {
        ...
    }
} 
```

我的映射很简单：

```
Mapper.CreateMap<Thread, ThreadView>();
Mapper.CreateMap<Post, PostView>(); 
```

我的操作方法如下所示：

```
public ViewResult ViewThread(int threadId, int page = 1)
{
    var thread = _forumService.GetThread(threadId, page);
    var viewModel = Mapper.Map<Thread, ThreadView>(thread);

    return View(viewModel);
} 
```

但这显然行不通。任何人都可以帮忙吗？

谢谢

**更新**

我想我现在会满足于这样做，即使它闻起来有点：

```
public ViewResult ViewThread(int id, int page = 1)
{
    var thread = _forumService.GetThread(id, page);
    var posts = Mapper.Map<IEnumerable<Post>, IEnumerable<PostView>>(thread.Posts);

    var viewModel = new ThreadView {
        Id = thread.Id,
        Title = thread.Title,
        Posts = new PaginatedList<PostView>(posts, page)
    };

    return View(viewModel);
} 
```

除非其他人知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:30:06.577

看起来您无论如何都返回了所有 Post 项目，您可以修改操作以从 Thread 对象而不是 ThreadView 创建 PaginatedList。就像是：

```
public ViewResult ViewThread(int threadId, int page = 1)
{
    var thread = _forumService.GetThread(threadId, page);
    thread.Posts = new PaginatedList(thread.Post, page);
    var viewModel = Mapper.Map<Thread, ThreadView>(thread);

    return View(viewModel);
} 
```

仅使用 AutoMapper 可能不是一种简单的方法。

编辑：哦，刚刚注意到该页面正在传递到您的服务中。所以这个答案可能根本不是你想要的。让我知道，如果是这样，我会删除它。

# ios - 自定义 iOS 推送通知声音

> ID：10107556
> 
> 赞同：11
> 
> 时间：2012-04-11T14:04:54.667
> 
> 标签：ios, push-notification, apple-push-notifications

我一直面临一个问题。我在 iOS 中使用自定义声音实现了推送通知。它是一个 MP3 文件。当我在 iOS 5 中收到推送通知时，它播放良好，但在 iOS4 中，它不播放任何声音。你能帮我解决这个问题吗？

代码是这样的

```
{
    "aps": {
        "badge": 10,
        "alert": "Hello",
        "sound": "sound.mp3"
    }
} 
```

尼廷

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-11T14:13:34.907

根据推送通知指南：

> 您可以将音频数据打包到 aiff、wav 或 caf 文件中。然后，在 Xcode 中，将声音文件作为应用程序包的非本地化资源添加到您的项目中。

它没有说任何关于 MP3 的内容。我使用了有效的 aif 文件。我会坚持[Apple 指定](https://developer.apple.com/documentation/usernotifications/unnotificationsound)的内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-14T21:16:47.697

您无法播放 .mp3 文件。但是，您可以在此处将它们转换为 .wav 文件：http: [//media.io/](http://media.io/)（在线和免费）。然后将转换后的文件放入您的 XCode 项目中，您可以通过指定调用它`"sound":"sound.wav"`

# php - ping 成功了吗？

> ID：10107557
> 
> 赞同：0
> 
> 时间：2012-04-11T14:04:56.817
> 
> 标签：php, xml, ping

我用过这个 php 文件 [http://www.barattalo.it/2010/02/24/ping-pingomatic-com-services-with-php/](http://www.barattalo.it/2010/02/24/ping-pingomatic-com-services-with-php/)

这是调试信息：

```
HTTP/1.0 200 OK
Server: nginx
Date: Mon, 09 Apr 2012 17:36:24 GMT
Content-Type: text/xml;charset=utf-8
Content-Length: 345
X-Cache: MISS from proxy34.samanet.sy
X-Cache-Lookup: MISS from proxy34.samanet.sy:3128
Via: 1.0 proxy34.samanet.sy (squid/3.0.STABLE19)
Proxy-Connection: close

<?xml version="1.0"?>
<methodResponse>
  <params>
    <param>
      <value>
        <struct>
  <member><name>flerror</name><value><boolean>0</boolean></value></member>
  <member><name>message</name><value><string>Pings being forwarded to 10 services!</string></value></member>
</struct>
      </value>
    </param>
  </params>
</methodResponse> 
```

结果是否意味着一切正常？如果不是，错误是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:10:36.933

[您可以从这里](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)找到 HTTP 状态码的含义

顺便说一句，您的日志说一切正常，我引用：

> **10.2.1 200 正常**
> 
> 请求已成功。响应返回的信息取决于请求中使用的方法，例如：
> 
> GET 在响应中发送与请求的资源对应的实体；
> 
> HEAD 请求资源对应的实体头字段在响应中发送，不带任何消息体；
> 
> POST 描述或包含操作结果的实体；
> 
> TRACE 包含终端服务器收到的请求消息的实体。

# ruby-on-rails - 回形针宝石不显示图片

> ID：10107564
> 
> 赞同：0
> 
> 时间：2012-04-11T14:05:11.453
> 
> 标签：ruby-on-rails

我已成功安装 Paperclip gem 并将图片上传到我的帖子中，但在显示操作中没有任何图片，只有带有图像 alt 的 alt 文本。

我在 Rails 3.2.1 上使用 ruby

**@post 表格：**

```
<% create_url = {:url=>{:action=>"create"}} if @post.new_record? %>
      <% form_for @post, :html => { :multipart => true } do |t| %>
        <b><%= t.label :title, 'Virsraksts:' %></b><br />
        <%= t.text_field :title %><br /><br />
        <b><%= t.label :content, 'Teksts:' %></b><br />
        <%= t.text_area :content %><br /><br />
        <%= f.file_field :bildes %>
<div class="actions">
  <%= t.submit %>
</div> 
```

**@post 节目：**

```
 <p><%= @post.content  %></p>
 <%= image_tag @post.bildes.url %>
 <%= image_tag @post.bildes.url(:medium) %>
 <%= image_tag @post.bildes.url(:thumb) %> 
```

在我看来@post 模型 url 和路径是不正确的，但正是我不知道的。

**@post 模型：**

```
class Post < ActiveRecord::Base
  has_attached_file :bildes, :styles => { :medium => "300x300>", :thumb => "100x100>" },
                    :url => ":rails_root/app/assets/bildes/:id/:style/:basename.:extension",
                    :path => ":rails_root/app/assets/bildes/:id/:style/:basename.:extension"
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:32:02.653

尝试通过不在模型中指定附加文件的默认 url/路径。

# c# - ASP.Net MVC：带有新行的本地化文本？

> ID：10107566
> 
> 赞同：8
> 
> 时间：2012-04-11T14:05:21.880
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, localization

我有一个将本地化的 Asp.Net MVC 3 网站。

我有几个包含我的文本的 resx 文件，我认为有些

> @My.NameSpace.Through.My.LocalizationFile.Key

但我不能让它代表新线。

我试过：

*   Shift+enter：我在资源文件中有新行，但在我的浏览器中没有
*   \r\n ：我在浏览器中看到了 \r\n
*   \n : 相同
*   `<br/>`: 我`<br/>`在我的文字中看到

那么我应该怎么做才能有一条新线呢？

**编辑**：我知道我可以使用 Html.Raw，但我不能要求翻译人员将 html 代码放入他们的翻译中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T15:02:39.380

老实说，我知道这不是世界上最好的东西，但它是万无一失的，这意味着您的翻译人员不必在翻译中添加任何代码：

在已经给出的答案的基础上，您为什么不直接使用`Html.Raw`，但在这样做之前，`\r\n`在资源文件中使用 Shift+Enter替换会导致`<br />`

例如，假设您`Welcome`在资源文件中命名了字符串`ApplicationMessage`，您可以这样做：

```
@Html.Raw(ApplicationMessage.Welcome.Replace("\r\n", "<br />") 
```

这会给你你所需要的。这是一个类似的问题：

[HTMLencode HTMLdecode](https://stackoverflow.com/questions/2650059/htmlencode-htmldecode)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T14:14:08.507

您可以将`<br />`for 换行符并使用该`@Html.Raw()`方法显示带有换行符的字符串而不是`<br />`字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-03T07:26:18.360

我认为您应该使用`Shift`+`Enter`和[CSS white-space 属性](https://developer.mozilla.org/en-US/docs/Web/CSS/white-space)的组合，而不是像使用解决方案那样故意打开 XSS 漏洞`@Html.Raw()`。

```
<span style="white-space: pre-line">@My.NameSpace.Through.My.LocalizationFile.Key</span> 
```

我不知道具体情况，但您可能会发现`pre-wrap`更适合您的情况。[在此处阅读有关不同空白属性的更多信息](https://css-tricks.com/almanac/properties/w/whitespace/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T14:10:36.530

您可能应该使用`<br />`并渲染输出`Html.Raw()`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-02-11T01:18:45.353

是的，多亏了mattytommo。

您可以使用

```
First line <br /> second line 
```

在资源中，或

```
resource.Replace("\r\n", "<br />") 
```

在代码中和 Shift + Enter 在资源编辑器中。

两者都工作正常，但你必须使用

```
@Html.Raw(); 
```

# hl7 - HL7 版本 3 解析

> ID：10107569
> 
> 赞同：14
> 
> 时间：2012-04-11T14:05:45.227
> 
> 标签：hl7, hapi, ccd, cda

我正在通过 HAPI 解析 HL7 版本 2.x 消息。现在我想解析 XML 格式的 HL7 版本 3 消息。HAPI 不支持 HL7 版本 3，我该怎么做呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T16:26:16.550

HL7 版本 3 本质上是 XML 格式的 HL7 数据。因此，您可以使用任何旧的 XML 解析器。也就是说，您必须在自己身上建立智能：细分等。

然而，似乎有一个[HL7 v3 Java Special Interest Group](http://www.hl7.org/documentcenter/public_temp_54CA69E6-1C23-BA17-0CE89D34E2D89320/wg/java/HL7-java.pdf)，它至少为 RIM 开发了一个 API。

另一种选择是查看集成引擎。这里的一个开源选项是[mirth](http://www.mirthcorp.com/community/downloads)。Mirth 是一个界面集成引擎。它是一个单独的产品——而不是一个你会与你自己集成的库。但是，它可以接管将 HL7 转换为在您的应用程序中更有用的东西的繁重工作——Web 服务调用、数据库插入、不同格式的文件（pdf、edi 等）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-25T04:55:01.117

Mohawk College 发布了一个免费和开源 (FLOSS) API 框架，用于 HL7 版本 3 消息传递和 CDA 文档处理，称为“Everest 框架”。

该框架可用于 Java 和 .NET，并附带有关如何使用 HL7v3 消息传递的大量示例和文档。

[您可以在 ( https://github.com/MohawkMEDIC/everest](https://github.com/MohawkMEDIC/everest) )下载该框架。

也可以通过 GitHub 项目页面获得支持。

该框架是通过加拿大自然科学和工程研究委员会 (NSERC) 和加拿大健康信息网提供的赠款资金开发的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-31T04:01:43.933

前段时间（2008 年）我使用了 HL7 Java SIG，但很容易 1\. 使用 JAXB 从模式创建自己的解析器（[从 .XSD 文件生成 Java 类...？](https://stackoverflow.com/questions/686453/generate-java-classes-from-xsd-files)），或 2\. 创建自己的解析器从头开始（我建议使用 Groovy XMLSlurper [http://www.groovy-lang.org/processing-xml.html](http://www.groovy-lang.org/processing-xml.html)）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T16:17:30.647

您要求提供 HL7v3 官方解析器的链接（转到“v3 实用程序”下的部分，我承认它不容易找到，但它是： [http ://www.hl7.org/participate/toolsandresources .cfm?ref=nav](http://www.hl7.org/participate/toolsandresources.cfm?ref=nav)

他们也有一些示例和数据文件可供测试。

# python - 有效地序列化 JSON 对象

> ID：10107571
> 
> 赞同：0
> 
> 时间：2012-04-11T14:05:49.470
> 
> 标签：python, mysql, django, json

这有点令人困惑，我有这些伪模型：

```
class Country(models.Model):
   name = models.CharField(unique=True)

class Region(models.Model):
   name = models.CharField(unique=True)
   country = models.ForeignKey(Country)

class SubRegion(models.Model):
   name = models.CharField(unique=True)
   region = models.ForeignKey(Region)

class Estate(models.Model):
   name = models.CharField(unique=True)
   sub_region = models.ForeignKey(SubRegion) 
```

我正在尝试 JSON 序列化他们的数据，如下所示。但是我不确定如何有效地做到这一点（避免过多的数据库查询），建议表示赞赏

```
{

    CountryX: { 
        RegionX {
            SubRegionX = [
                "EstateX"
                "EstateY",
                "EstateZ"
            ],
            SubRegionY = [ etc... ]
        },
        RegionY { etc... }
    },
    CountryY: { etc... }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:12:33.597

我没有测试过这个，但它应该给你的想法。从最里面的对象开始，使用 select_related 遍历层次结构，然后遍历最里面的对象，根据需要添加层次结构的键。

请注意，如果有没有任何庄园的国家/地区/子区域，它们将不会包含在 JSON 中。如果这不行，您需要分别查询每个模型。

```
data = {}
for e in Estate.objects.select_related("sub_region__region__country"):
    sub, region, country = e.sub_region, e.sub_region.region, e.sub_region.region.country
    if country.name not in data:
        data[country.name] = {}
    if region.name not in data[country.name]:
        data[country.name][region.name] = {}
    if sub.name not in data[country.name][region.name]:
       data[country.name][region.name][sub.name] = []
    data[country.name][region.name][sub.name].append(e.name)
json_data = json.dumps(data) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:59:22.500

这个建议可能不是您正在寻找的，但我已经在几个需要应用程序数据的快速且脏的 JSON 的情况下使用它。

签出[`./manage.py dumpdata app_name`](https://docs.djangoproject.com/en/dev/ref/django-admin/#dumpdata-appname-appname-appname-model)（或`app_name.model_name`）。这将为您提供该应用程序（或该模型）的所有表中的所有数据的 JSON。*格式可能与您想象的略有不同，但它确实包含维护 ForeignKey 关系所需的所有 PK 和类信息，并且在创建引用对象之前*按照创建引用对象所需的顺序将它们吐出. 非常便利。

如果您想从脚本内部调用它，`django/core/management/commands/dumpdata.py`请查看他们是如何做到的。

# css - 奇怪的css宽度问题？

> ID：10107578
> 
> 赞同：0
> 
> 时间：2012-04-11T14:06:42.587
> 
> 标签：css, html, width

或者我一直在构建网页太久没有休息或发生了一些非常奇怪的事情。

```
<div style="background-color:#0F0; margin:5px; height:5px;"></div> 
```

将在父 div 的宽度上产生一个 5 高度的长条。这通常不应该是可见的，因为我没有给 div 宽度。

我尝试了一切，弄乱了我的整个 CSS 布局，但似乎没有什么能摆脱它。我什至在同一个项目中检查了我的一些 div，它们仍然像这样工作。

所以我打开了一个新项目并填写了上面的那一行，以确保没有一些样式设置搞砸了。但仍然有一个绿色条显示。

我只希望我的 div 是其中文本的大小。

再一次，我可能会看到一些东西，但这突然发生了，我真的一无所知......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:12:00.913

您的 div 必须`display:block`在您的代码中或从您的浏览器继承。

将其更改`display:inline`为您想要的结果。

这里的例子。 [http://jsfiddle.net/Hn2xP/1](http://jsfiddle.net/Hn2xP/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:13:23.070

使用`display:inline`，因为 div 元素自动获取`display:block`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T14:13:49.040

## 打断文档流

默认情况下，`div`元素的 style`display`属性设置为`block`，这使得它的宽度可以填充父元素的尺寸。

您有两个选项可以将其剪辑为文本，`position: absolute`或者`float: left`（也可以使用，取决于），如：

```
<div style="background-color:#0F0; margin:5px; height:5px; position: absolute;"></div> 
```

或者：

```
<div style="background-color:#0F0; margin:5px; height:5px; float: left;"></div> 
```

有关更多信息，请参阅[CSS 浮动](http://www.w3schools.com/cssref/pr_class_float.asp)和/或[CSS 位置](http://www.w3schools.com/cssref/pr_class_position.asp)。

PS 请记住，绝对位置和/或浮动元素会将其从文档流中删除。

* * *

## span 而不是 div（显示：内联）

如果您想保持文档流，请使用`span`而不是`div`- 默认情况下，它的`display`属性是`inline`Blowsie 建议的。

```
<span style="background-color:#0F0; margin:5px; height:5px;"></span> 
```

* * *

## 显示：内联块

还有一个`display`属性设置为的选项`inline-block`，但它的兼容性是有限的。有关更多详细信息，请参阅[CSS 显示](http://www.w3schools.com/cssref/pr_class_display.asp)属性信息。

```
<div style="background-color:#0F0; margin:5px; height:5px; display: inline-block;"></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T14:09:58.050

通常是填充问题。如果不查看代码或站点错误示例，则很难诊断。

尝试：

```
div {padding: 0px;} 
```

在你的 CSS

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T14:17:22.303

默认情况下，div 的宽度是自动的，这意味着它将填充整个可用内容。要获得您想要的“无宽度”，请将宽度明确设置为零。或者，使用其他答案之一......

# php - 获得准确的 Facebook 点赞数

> ID：10107579
> 
> 赞同：2
> 
> 时间：2012-04-11T14:06:46.490
> 
> 标签：php, javascript, facebook, facebook-fql

我正在尝试确定特定 url 的点赞数，但发现 Facebook 通过图形 api、rest api 和 fql 查询返回零点赞，尽管通过自己的按钮显示了 91 个点赞。

我的问题是如何访问 facebook 之类的按钮从中获取计数的数据源？

[图形](http://graph.facebook.com/?ids=http://www.originalsourcevote.co.uk/orange_tracker.php)

[休息](http://api.facebook.com/restserver.php?method=links.getStats&urls=https://www.originalsourcevote.co.uk/orange_tracker.php)

[FQL](https://api.facebook.com/method/fql.query?query=SELECT+url%2C+normalized_url%2C+share_count%2C+like_count%2C+comment_count%2C+total_count%2C+commentsbox_count%2C+comments_fbid%2C+click_count+FROM+link_stat+WHERE+url%3D%22https://www.originalsourcevote.co.uk/orange_tracker.php%22&access_token=AAAAAAITEghMBAL8cvwBNHeN9k8ejzMzxZCTpEZATNKyotkekCginLomn1VuKaHbtJm0jwuA2NMKMmwp5HZAWTHzk2smxVjjtJS2sAUMmb7J4wiUlLgg)

[调试器不会引发潜在问题](https://developers.facebook.com/tools/debug/og/object?q=https%3A%2F%2Fwww.originalsourcevote.co.uk%2Forange_tracker.php)

以上所有返回零喜欢，或者根本不返回任何东西。[但是，在此处输入 url](https://developers.facebook.com/docs/reference/plugins/like/)（并启用 button_count 布局）：您将在 button_count 上看到 91 个赞。

我可以在任何地方从 Facebook 访问这些数据吗？

我真的不想尝试从 like 按钮的 iframe 中提取值！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:48:31.947

您检索了错误 URL 的点赞数。

在`https://www.originalsourcevote.co.uk/orange_tracker.php` `og:url`属性的 OpenGraph 标记中指向 Canonical URL `https://www.originalsourcevote.co.uk/`。

正如您在 Graph API 的结果中看到的（下一个查询将返回正确的分享/喜欢数量）：

```
http://graph.facebook.com/?ids=https://www.originalsourcevote.co.uk/ 
```

FQL 和 Rest 都将为规范 URL 返回正确的结果。

# c# - 如何在 Windows Azure 上运行的 WCF 服务中返回文件？

> ID：10107580
> 
> 赞同：1
> 
> 时间：2012-04-11T14:06:58.383
> 
> 标签：c#, xml, wcf, azure

我有一个简单的 Web 服务，我想创建一个方法来返回一个文本文件。我是这样做的：

```
 public byte[] GetSampleMethod(string strUserName)
    {
        CloudStorageAccount cloudStorageAccount;
        CloudBlobClient blobClient;
        CloudBlobContainer blobContainer;
        BlobContainerPermissions containerPermissions;
        CloudBlob blob;
        cloudStorageAccount = CloudStorageAccount.DevelopmentStorageAccount;
        blobClient = cloudStorageAccount.CreateCloudBlobClient();
        blobContainer = blobClient.GetContainerReference("linkinpark");
        blobContainer.CreateIfNotExist();
        containerPermissions = new BlobContainerPermissions();
        containerPermissions.PublicAccess = BlobContainerPublicAccessType.Blob;
        blobContainer.SetPermissions(containerPermissions);
        string tmp = strUserName + ".txt";
        blob = blobContainer.GetBlobReference(tmp);
        byte[] result=blob.DownloadByteArray();
        WebOperationContext.Current.OutgoingResponse.Headers.Add("Content-Disposition", "attachment; filename="+strUserName + ".txt");
        WebOperationContext.Current.OutgoingResponse.ContentType = "text/plain";
        WebOperationContext.Current.OutgoingResponse.ContentLength = result.Length;
        return result;
    } 
```

...并从服务接口：

```
 [OperationContract(Name = "GetSampleMethod")]
    [WebGet(UriTemplate = "Get/{name}")]
    byte[] GetSampleMethod(string name); 
```

它返回给我一个包含 XML 响应的测试文件。所以问题是：如何返回没有 XML 序列化的文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T18:56:41.820

更改您的方法以返回 a `Stream`。另外，我建议在返回之前不要将整个内容下载到 byte[] 中。相反，只需从 Blob 返回流。我已尝试调整您的方法，但这是徒手代码，因此它可能无法按原样编译或运行。

```
public Stream GetSampleMethod(string strUserName){
  //Initialization code here

  //Begin downloading blob
  BlobStream bStream = blob.OpenRead();

  //Set response headers. Note the blob.Properties collection is not populated until you call OpenRead()
  WebOperationContext.Current.OutgoingResponse.Headers.Add("Content-Disposition", "attachment; filename="+strUserName + ".txt");
  WebOperationContext.Current.OutgoingResponse.ContentType = "text/plain";
  WebOperationContext.Current.OutgoingResponse.ContentLength = blob.Properties.Length;

  return bStream;
} 
```

# linux - 如何在 Shell 脚本中添加双引号

> ID：10107586
> 
> 赞同：1
> 
> 时间：2012-04-11T14:07:20.340
> 
> 标签：linux, shell, unix

很抱歉提出非常基本的问题。我在 shell 脚本和 Cygwin 的帮助下进行 SVN 导出。以下是 shell 脚本。

```
#!/bin/bash
echo "Svn_path="$1 
echo "Destination_Path="$2 
echo "Svn_version="$3 
echo "Svn_username="$4 
echo "Svn_password="$5 
svn export $1 $2 -r $3 --username $4 --password $5 --force --non-interactive 
```

当 Destination_path 不包含空格时，此脚本可以正常工作。例如：- **`D:\Test`**。如果我的 Destination_Path 包含空间，它将不起作用。例如：-**`D:\Test Folder`**

解决方案为此，我必须`$2`在双引号中传递参数。这个怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:14:41.817

嗯，你只需在 $2 左右添加双引号。您通常使用键盘来执行此操作，但[Google 也有 Morse 输入板和其他 HID](http://matome.naver.jp/odai/2133337551109399901)。

```
#!/bin/bash
echo "Svn_path=$1" 
echo "Destination_Path=$2"
echo "Svn_version=$3"
echo "Svn_username=$4"
echo "Svn_password=$5"
svn export "$1" "$2" -r "$3" --username "$4" --password "$5" --force --non-interactive 
```

总是在不需要单词扩展的地方添加双引号。

# php - 为什么这个贪婪的正则表达式不能按预期工作？

> ID：10107588
> 
> 赞同：1
> 
> 时间：2012-04-11T14:07:25.280
> 
> 标签：php, regex

我正在尝试学习一些关于正则表达式的知识，有人可以向我解释这里发生了什么吗？并举例说明将提供预期输出的正则表达式？谢谢！

```
input data = 'Sometext|even more text'

regex = '(.*)?\|?.*'

replacement = '$1'

expected output = 'Sometext'

actual output = 'Sometext|even more text' 
```

PHP

```
preg_filter("(.*)?\|?.*", "$1", 'Sometext|even more text'); // returns  Sometext|even more text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:10:07.020

`(.*)`是贪婪的，所以匹配一切。`$1`就是一切。

您可能正在寻找：

```
/^([^|]*).*$/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:12:31.960

您的正则表达式是说“所有字符，后跟一个可选字符，然后`|`是 0 个或更多字符”。

将首字母更改`(.*)`为`([^\|]*)`，或将其设为`|`非可选。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T14:13:51.710

`*`是贪婪的，这意味着它将尝试匹配尽可能多的文本。在这种情况下：

*   `(.*)?`将匹配所有文本
*   `\|?.*`将匹配“rest”（空字符串）

尝试：`regex = '\|[^|]*', replacement = ''`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T14:13:55.983

如果您将您的正则表达式更改为`(\w+)?\|?.*`，特别是`+`在之后添加 ，`\w`那么您将得到您预期的“Sometext”答案。

您进行整个字符串匹配的原因是第一个`.*`匹配整个字符串。通过上面的更改，您将匹配任何单词字符。

# java - 这个java小部件叫什么名字？

> ID：10107591
> 
> 赞同：1
> 
> 时间：2012-04-11T14:07:30.333
> 
> 标签：java, swing

我正在尝试查找此小部件的 java 类名。当用户将鼠标悬停在某个项目上时，它看起来就像一个气泡弹出。此小部件通常用于显示有关项目的简短描述。当鼠标在按钮上时，您经常会在工具栏按钮上看到这个。如果有人使用过 Qt，它会类似于 QWhatsThis 小部件。java中是否有等效的小部件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T14:09:03.813

这可能是一个[工具提示](http://docs.oracle.com/javase/tutorial/uiswing/components/tooltip.html)，虽然没有看到截图很难说。

# php - 如何优化 UPDATE 查询以获得更好的 MySQL 性能

> ID：10107595
> 
> 赞同：6
> 
> 时间：2012-04-11T14:07:36.333
> 
> 标签：php, mysql, sql, mysql-error-1064

我在 mySQL 数据库中有 2 个表......它们非常大.. 现在大约 100 万，很快将达到 500 万左右

一个是求职者另一个是joomla用户表

我想将 ID 复制或插入到两个电子邮件列匹配的求职者表中。

即求职者电子邮件=乔斯用户电子邮件。

我使用了下面的查询，但它花费了太多时间并且给 mysql 服务器带来了沉重的负载 ....查询卡住了，我总是最终重新启动 mysql ...

```
UPDATE  `jos_jbjobs_jobseeker` 
SET user_id =   ( SELECT jos_users.id
FROM jos_users
WHERE jos_users.email =  jos_jbjobs_jobseeker.email)
WHERE EXISTS
  ( SELECT jos_users.id
    FROM jos_users
    WHERE jos_users.email =  jos_jbjobs_jobseeker.email); 
```

如何优化上述查询以获得更好的性能。此外，如果它可以分批执行，即一次 20000 或 40000 条记录，我会感兴趣。

请指教

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T14:12:56.530

试试这个：

```
UPDATE
    jos_jbjobs_jobseeker a
    INNER JOIN jos_users b ON a.email = b.email
SET
    a.user_id = b.id 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T14:15:29.077

这个简单的查询怎么样？

```
UPDATE jos_jbjobs_jobseeker jjj
JOIN jos_users ju
  ON jjj.email = ju.email
SET jjj.user_id = ju.id; 
```

# ruby-on-rails - 运行捆绑安装时Mysql gem失败

> ID：10107596
> 
> 赞同：0
> 
> 时间：2012-04-11T14:07:38.267
> 
> 标签：ruby-on-rails, ruby

我正在尝试`bundle install`从 GitHub 中提取的 Rails 项目。但是，我在[这个问题上运行。](http://pastebin.com/cAjhK1qE)这是我的[Gemfile。](http://pastebin.com/XmK8b7bn)

我不能让它工作。任何意见这里可能会出现什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:27:30.527

在 ubuntu 上，您需要使用以下命令安装 libmysqlclient-dev 包

```
sudo apt-get install libmysqlclient-dev 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:10:46.237

您需要安装 mysql 开发包来编译本机扩展。

# django - Django 1.4：在 TEMPLATE_DEBUG 模式下不包装异常隐藏异常

> ID：10107603
> 
> 赞同：1
> 
> 时间：2012-04-11T14:08:07.510
> 
> 标签：django, django-templates

我已经在 django-users 邮件列表上询问过，但没有得到任何答案..所以我想我会在这里尝试。

> 在以前的 Django 版本中，只要 TEMPLATE_DEBUG 设置为 True，在模板渲染期间引发的任何异常（甚至与模板语法无关的异常）都会被包装在 TemplateSyntaxError 中并重新引发。这样做是为了在调试 500 页面中提供详细的模板源位置信息。
> 
> 在 Django 1.4 中，不再包装异常。相反，原始异常使用源信息进行注释。这意味着无论 TEMPLATE_DEBUG 的值如何，从模板渲染中捕获异常现在都是一致的，并且无需捕获和解包 TemplateSyntaxError 来捕获其他错误。

很酷..我猜。但是现在我怎样才能看到引发的异常？

如果我包含模板或调用引发异常的模板标签，则不会发生任何事情。

我很欣赏增加的健壮性..但是没有关于如何显示这些异常的明确文档，调试有点痛苦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:27:06.070

我不太确定我是否理解您的问题，但我会尽力回答。

当`DEBUG`和`TEMPLATE_DEBUG`are `True`，并且在渲染过程中引发异常时，您会看到（这个 Django 开发人员非常熟悉的）黄色错误页面。

在 Django 1.3 和更早版本中，Django 会报告一个`TemplateSyntaxError`

> ### /my-url/ 处的 TemplateSyntaxError
> 
> **渲染时捕获 ValueError：这是异常值**
> 请求方法：GET
> 请求 URL： http: [//127.0.0.1](http://127.0.0.1:8000/my-url/)
> :8000/my-url/ Django 版本：1.3.1
> 异常类型：TemplateSyntaxError
> 异常值：渲染时捕获 ValueError：这个是异常值

从 Django 1.4 开始，您会看到原始异常：

> ### /my-url/ 处的 ValueError
> 
> **这是异常值**
> 请求方法：GET
> 请求 URL： http: [//127.0.0.1](http://127.0.0.1:8000/my-url/)
> :8000/my-url/ Django 版本：1.4
> 异常类型：ValueError
> 异常值：这是异常值

要自己测试这一点，请尝试在您包含在模板中的任何模板标记中引发异常：

```
raise ValueError("This is the exception value") 
```

或者更简单的查看差异的方法是使用带有无效视图名称的 url 标签。

```
{% url invalid_view_name %} 
```

# python - 重命名存在于 Python 中的文件

> ID：10107604
> 
> 赞同：2
> 
> 时间：2012-04-11T14:08:07.777
> 
> 标签：python, rename

所以我觉得我可能使用了错误的词在 Google/StackOverflow 上四处寻找代码。

我正在构建一个脚本（除其他外）将执行大量移动文件。

我目前有一条小线将文件名与扩展名分开，如果文件已存在于目录中，则添加文件名+（重复）+扩展名。

但是，我觉得必须有一个简单的小单线，基本上可以做到（重复）、（重复 1）、（重复 2）、（重复 3）等（基本上只是将第二个数字更改为下一个如果文件与当前文件存在，则编号）。

什么是我太愚蠢而无法弄清楚自己的简单解决方案？

抱歉，我没有想到我当前的代码可能会帮助人们回答我的问题！

```
def destination(self, f): return os.path.abspath('.')+'/'+self.filename(f)+'/'+self.filename(f)+' (Duplicate)'+self.extension(f) if and os.path.isfile(os.path.abspath('.')+'/'+self.filename(f)+'/'+f) else os.path.abspath('.')+'/'+self.filename(f)+'/'+f 
```

我使用了一种稍微改变的方法来获取文件名和扩展名（基本上只是为了解决一些 rar 部分和一些文件夹问题）。但是'self.filename(f) 和self.extension(f) 基本上只是os.splittext(f)[0] 和os.splittext(f)[1]。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T14:15:43.357

当然，有*一些*单行代码可以做到这一点，但我想不出一个可读性很强的代码。我会去做这样的事情：

```
def alternative_names(filename):
    yield filename
    base, ext = os.path.splitext(filename)
    yield base + "(Duplicate)" + ext
    for i in itertools.count(1):
        yield base + "(Duplicate %i)" % i + ext

target_name = next(alt_name
                   for alt_name in alternative_names(target_name)
                   if not os.path.exists(alt_name)) 
```

（这可能基本上是你所做的，但你没有发布你的代码。）

# video - DirectShow 中的负演示时间

> ID：10107606
> 
> 赞同：2
> 
> 时间：2012-04-11T14:08:25.160
> 
> 标签：video, camera, directshow, video-capture, logitech

这个真的让我把头发拉出来。我编写了一个从 CTransformFilter 派生的 DirectShow 变换过滤器。我从 CTransformInputPin 派生了一个输入引脚。当我的输入引脚的 Receive 方法被调用时，它会将 IMediaSample 的呈现时间记录到一个文件中。这一切都很好，直到我停止图表并重新启动它（我正在使用 MS 的 graphedt）。大多数时候，再次运行时，没有任何问题。但是，大约每十次左右我停下来然后再次运行图表，开始呈现时间是负数。随着图表的运行，它最终会增加到零并超过零，但它永远不会赶上流时间，因此流时间仍然明显领先于每个样本的呈现开始时间。

我用 Logitech Webcam Pro 9000 和 Logitech C600 相机观察到了这一点，但没有用 Winbook 相机观察到，所以我想知道这是否是 Logitech 的问题。有没有其他人在停止并再次运行后在视频 IMediaSamples 上看到负面的演示时间？（我查看了 IMediaSample 中的预卷标志：它始终为 S_FALSE。）

**更新：**

我已经用这个覆盖了 CTransformFilter（实际上是 CBaseFilter）的 Run 方法：

```
STDMETHODIMP MyTransformFilter::Run(REFERENCE_TIME tStart)
{
    char buff[1000];
    REFERENCE_TIME rTime;

    m_pClock->GetTime(&rTime);
    sprintf(buff, "Run tstart = %lld, rTime = %lld", tStart, rTime);
    Trace(buff); // open my log file, add buff, close my log file
    return CTransformFilter::Run(tStart);
} 
```

我用 graphedt 启动图表，运行 10 秒，暂停 5 秒，然后重新开始。这是输出：

```
Run tstart = 7855978550000, rTime = 7855978450000
Run tstart = 7856030610000, rTime = 7856126960000 
```

传递给 Run 的两次时间相差 5.2 秒（大约是我暂停的时间）。两个参考时钟时间相差 14.6 秒（大约是调用 Run 之间的总时间）。除了过滤器图形管理器略微增加传递给 Run 的时间（10 毫秒，在第一次调用中），我希望每次调用 Run 时这些几乎相同。相反，在第二次调用中传递给 Run 的时间比参考时钟晚了大约 10 秒。我将非常感谢帮助理解为什么第二次调用时传递给 Run 的时间与第二次调用时参考时钟返回的时间不同（几乎）相同。

**更新 2：**

问题似乎出在 Logitech 版本 13.31.1044.0 驱动程序中。请参阅下面的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T15:41:43.877

负时间没什么大不了的。本质上，它的意思是“媒体样本应该在不久前呈现”。所以你可能认为媒体样本可以被丢弃？有时这是真的，有时不是：想象一系列时间压缩的视频帧，其中一个关键帧后跟 10 个增量帧。您希望演示从第 5 帧开始，您该怎么做？您必须从关键帧推入，以便解码器可以从拼接点有效解码，否则它无法从增量帧开始。无论帧是否迟到，解码器都可能会传递输出帧，这就是这些帧最终到达您的方式。

导致负时间的另一种情况是由线程、流和控制的竞争条件引起的。捕获线程可能正在开始其操作，但手头上没有基本的“开始时间”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:28:46.567

经过相当多的实验，我得出结论，该问题很可能是 Logitech 13.31.1044.0 摄像头驱动程序特有的。使用较早的 Logitech 12.10.1110 驱动程序、Winbook DC-6120 摄像头（及其驱动程序）和 Chicony USB 2.0 摄像头（及其驱动程序），我无法使问题再次出现。没有明显的原因，Logitech 13 驱动程序将在包含它的图形重新启动的大约每十次左右的时间中以负演示时间开始提供样本（也就是说，在我在 graphedt 中停止它然后再次启动它之后）。将这些时间与流时间进行比较不会提供 MSDN 描述的关于样本是否计划在过去、现在或将来显示的信息，因为流时间似乎没有受到影响。每次重启，正如人们所期望的那样，流时间再次从零开始，无论相机的演示时间是什么时候开始的。（请注意，Logitech 以 RGB24 子类型进行流式传输，没有压缩帧。）

我正在研究一个多线程直通过滤器，它可能能够根据流时间重新分配具有值的呈现时间，并且做得足够快以“伪造”正确的值，如果我得到一个有意义的值，我会在这里发布结果。此外，我将记录我的测试并将它们传达给罗技。如果他们回复，我也会在这里发布。

如果其他人正在使用使用上述驱动程序的罗技产品（或以其他方式观察我所描述的行为），请在此处发表评论。我很乐意向您发送我的过滤器的副本，其中记录了时间、帧等。我们也许可以一起寻找解决这个问题的好方法。

**更新**

通过编写我可以编写的最简单的可能的变换过滤器（一个简单地将输入 IMediaSample 的负图像复制到输出的过滤器），我已经能够相当一致地重现这种行为。大约每五六次我重新启动一个由 Camera->Filter->Renderer 组成的图表，前几个样本以负帧时间传递，远远落后于流时间，并且永远不会赶上。（也就是说，流时间永远领先于样本的呈现时间）。同样，其他相机和较旧的罗技驱动程序都不会发生这种情况。

这是有趣的部分：如果我在过滤器的 Run 方法中添加一些延迟（在覆盖 CTransformFilter::Run 之后），问题就会消失。这是代码：

```
STDMETHODIMP DLPassThrough::Run(REFERENCE_TIME tStart)
{
    Sleep(10);

    return CTransformFilter::Run(tStart);
} 
```

我可以通过注释掉或恢复“Sleep(10)”调用来解决问题。我能猜到的是相机代码是多线程的，并且在总是在“运行”调用之前的“暂停”调用和它得到的下一个“运行”调用之间需要一些时间来清理它正在做的事情。据我了解 MSDN 文档，图形管理器将在渲染器上调用“暂停”，然后是我的过滤器，然后是相机，然后返回并在渲染器、我的过滤器和相机上调用“运行”。我相信这些调用中的每一个都是同步的，但如果相机代码是多线程的，当调用其“运行”方法时，它可能仍在处理来自图形管理器的最新“暂停”调用。通过向我的过滤器的“运行”方法添加延迟，

仍在等待/希望收到罗技的回复。同时，我确实编写了一个多线程就地转换过滤器，它只是添加对它获得的最新样本的引用，用当前流时间替换它的呈现时间，将其保存给下游过滤器以供下次下游使用过滤器准备好接收它，然后返回等待下一个传入样本。（如果在下游过滤器取一个之前有多个样本进入，则先前的样本将被释放，并替换为最新的样本。）到目前为止似乎正在工作。

**更新 2**

这是罗技的回答：

我想通知您，该设备主要用于视频流的 IM 应用程序，而不是作为开发软件或过滤器的主题。

# c# - 从 WCF 服务返回的 XML 中缺少集合项值

> ID：10107610
> 
> 赞同：0
> 
> 时间：2012-04-11T14:08:43.557
> 
> 标签：c#, .net, wcf, soap

我有一个简单的 WCF 服务，它有一个返回“复杂”对象（由简单和集合属性组成）的方法。当我调用此方法并查看生成的 XML 时，集合中的项目缺少值；但是，如果我在调试器中检查 .net 对象，则会正确填充集合及其值。

包含集合的类：

```
 [DataContract]
    public class MetadataResponse
    {
        [DataMember]
        public int index;
        [DataMember]
        public int count;
        [DataMember]
        public int total;
        [DataMember]
        public MediaCollection[] mediaCollection;
        [DataMember]
        public MediaMetadata[] mediaMetadata;
    } 
```

包含的项目类：

```
 [DataContract]
    public class MediaCollection
    {
        public String id;
        public String title;
        public Enum itemType;
        public String artistId;
        public String artist;
        public String albumArtURI;
        public Boolean canPlay;
        public Boolean canEnumerate;
        public Boolean canAddToFavorites;
        public Boolean canScroll;
        public Boolean canSkip;
    } 
```

返回对象的方法：

```
 public MetadataResponse getMetadata(string id, int index, int count, bool recursive)
        {
            MetadataResponse metadataResponse = new MetadataResponse();
            MediaCollection mediaCollectionItem = new MediaCollection();

            // return a static collection for now
            metadataResponse.index = 0;
            metadataResponse.count = 3;
            metadataResponse.total = 3;
            metadataResponse.mediaCollection = new MediaCollection[3];

            // add some items
            mediaCollectionItem.id = "0001";
            mediaCollectionItem.title = "foo";
            metadataResponse.mediaCollection[0] = mediaCollectionItem;

            mediaCollectionItem.id = "0002";
            mediaCollectionItem.title = "bar";
            metadataResponse.mediaCollection[1] = mediaCollectionItem;

            mediaCollectionItem.id = "0003";
            mediaCollectionItem.title = "choo";
            metadataResponse.mediaCollection[2] = mediaCollectionItem;

            return metadataResponse;
        } 
```

检查填充对象的调试器结果：

```
 {MurfieSoapApi.MetadataResponse}
    count: 3
    index: 0
    mediaCollection: {MurfieSoapApi.MediaCollection[3]}
    mediaMetadata: null
    total: 3 
```

方法调用的 XML 结果（仍在试图弄清楚如何让 StackOverflow 格式化这个......）：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
    <s:Header />
    <s:Body>
        <getMetadataResponse xmlns="http://www.sonos.com/Services/1.1">
            <getMetadataResult xmlns:a="http://schemas.datacontract.org/2004/07/MurfieSoapApi" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
                <a:count>3</a:count>
                <a:index>0</a:index>
                <a:mediaCollection>
                    <a:MediaCollection />
                    <a:MediaCollection />
                    <a:MediaCollection />
                </a:mediaCollection>
                <a:mediaMetadata i:nil="true" />
                <a:total>3</a:total>
            </getMetadataResult>
        </getMetadataResponse>
    </s:Body>
</s:Envelope> 
```

我尝试过其他集合类型而不是数组（列表等），但结果始终相同。我正在使用默认的 web.config 值，该值对于返回简单结果的其他方法效果很好，但是当涉及到这种返回类型时，自动映射器可能无法胜任任务......不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:14:09.530

因为你错过了

> 数据成员

MediaCollection 类的属性。

而不是这个：

```
[DataContract]
    public class MediaCollection
    {
        public String id;
        public String title;
        public Enum itemType;
        public String artistId;
        public String artist;
        public String albumArtURI;
        public Boolean canPlay;
        public Boolean canEnumerate;
        public Boolean canAddToFavorites;
        public Boolean canScroll;
        public Boolean canSkip;
    } 
```

你应该这样写：

```
[DataContract]
    public class MediaCollection
    {
        [DataMember]
        public String id;

        [DataMember]
        public String title;

     ....
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:15:31.500

MediaCollection 字段没有被序列化。您需要将 [DataMember] 属性添加到您的字段。

```
[DataContract]
    public class MediaCollection
    {
        [DataMember]
        public String id;
        [DataMember]
        public String title;
        [DataMember]
        public Enum itemType;
        [DataMember]
        public String artistId;
        ...etc...
    } 
```

# git - 从 bitbucket 克隆 git 存储库时的密码问题

> ID：10107611
> 
> 赞同：6
> 
> 时间：2012-04-11T14:08:44.757
> 
> 标签：git, repository, bitbucket

我有 bitbucket git 存储库。我试图从我的电脑克隆它，但我无法提供密码。

```
git clone https://id@bitbucket.org/id/SOMEGITPROJ.git
Cloning into SOMEGITPROJ...
Password: 
```

因为我有这个错误。

```
'PASSWORD' is not recognized as an internal or external command,
operable program or batch file. 
```

如何解决这个问题？有没有办法在“git clone 命令”的同一命令行中提供密码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T17:05:38.597

我在这个网站上找到了答案：

[https://confluence.atlassian.com/bitbucket/set-up-an-ssh-key-728138079.html](https://confluence.atlassian.com/bitbucket/set-up-an-ssh-key-728138079.html)

**对于苹果**

简而言之：

1.  `pbcopy < ~/.ssh/id_rsa.pub`
2.  转到帐户/ssh 密钥以添加此密钥
3.  使用 ssh 协议而不是 https

**电脑用**

简而言之：

1.  `cat /home/USER/.ssh/id_rsa.pub > key.txt`
2.  和麦克一样

**对于 Linux**

简而言之：

1.  `cat ~/.ssh/id_rsa.pub | xclip -sel clip`
2.  和麦克一样

# perl - DNS 查找给出不正确的输出

> ID：10107613
> 
> 赞同：0
> 
> 时间：2012-04-11T14:08:56.157
> 
> 标签：perl, dns

这是我正在使用的代码。代码有什么问题？此外，如何指定超时参数？tcp_timeout 似乎不起作用。

```
sub resolve_dns()
{
    my $dns = $_[0];
    my $res   = Net::DNS::Resolver->new(

                nameservers => [qw(24.116.197.232)],
                recurse     => 0,
                debug       => 1,
                tcp_timeout => 3
                );
    my $query = $res->search($dns);

    if ($query) {
        foreach my $rr ($query->answer) {
            next unless $rr->type eq "A";
            print $rr->address, "\n";
        }
    } else {
        warn "query failed: ", $res->errorstring, "\n";
    }
} 
```

这是我得到的输出。

```
Output

query failed: query timed out
;; search(www.youtube.com)
;; setting up an AF_INET() family type UDP socket
;; send_udp(24.116.197.232:53)
;; send_udp(24.116.197.232:53)
;; send_udp(24.116.197.232:53)
;; send_udp(24.116.197.232:53) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:53:11.643

您可以使用以下方法指定超时：

```
$res->udp_timeout(3); 
```

或者，替换在构造函数中指定它。

# performance - 网页性能测试工具

> ID：10107616
> 
> 赞同：1
> 
> 时间：2012-04-11T14:09:00.317
> 
> 标签：performance, sharepoint, sharepoint-2010, web

我正在寻找最简单的方法来确保网页加载的时间（sharepoint 2010）如果可以使用 windows 工具

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:11:16.593

您可以使用 IE 附带的内置调试工具来获取有关页面性能的一些基本指标。在 IE 中，按 F12 打开调试器，然后切换到“Profiler”选项卡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:13:38.503

开发者仪表板是完美的工具，它将显示 SQL 和页面之间的时间，突出显示所有步骤发生的位置，而不仅仅是来自页面服务。

[有关开发人员仪表板的 MSDN 文章](http://msdn.microsoft.com/en-us/library/ff512745.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T07:14:59.023

大多数浏览器都内置了某种分析工具。到目前为止，我最喜欢的是 firefox 的 YSlow 扩展（需要 firebug 扩展）[https://addons.mozilla.org/en-US/firefox/addon/yslow/](https://addons.mozilla.org/en-US/firefox/addon/yslow/)

它为您页面上的每个组件（httpRequests、标题、链接、重定向、css 使用等）的数量提供等级 (AF) 评级。对于每个等级，它都提供了优化技巧，例如缩小 css 和 js 文件，添加 expires-headers 等，并详细描述了如何进行实际优化。

它还可以很好地细分每个加载文件（图像、js、css 文件）的大小，并使用一些饼图显示页面上每个组件的权重，帮助您更好地了解页面占用空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T10:14:18.393

使用以下 PowerShell 脚本启用开发仪表板。它将为您提供页面上的所有时间。

```
$spDevDash = [Microsoft.SharePoint.Administration.SPWebService]::ContentService.DeveloperDashboardSettings;
$spDevDash.DisplayLevel = [Microsoft.SharePoint.Administration.SPDeveloperDashboardLevel]::OnDemand;
$spDevDash.RequiredPermissions = ‘EmptyMask’;
$spDevDash.TraceEnabled = $true;
$spDevDash.Update(); 
```

@Paul 是的，这个工具非常适合这个。

# java - 测试两个 Maven 工件的向后兼容性

> ID：10107622
> 
> 赞同：2
> 
> 时间：2012-04-11T14:09:26.360
> 
> 标签：java, testing, classloader, backwards-compatibility

我正在开发一个库，用于将数据编组和解组为 xml 格式以进行传输。我现在有两个版本的 Jar，其中包含一个`com.mycorp.Marshaller`我想测试兼容性的类（因为我们不能同时更新所有客户端）。

有谁知道是否可以编写一个单元测试，可以同时加载类的版本 A 和版本 B 并统一使用它们以确保 B 输出的 xml 可以被 A 解析。

我不能使用完全限定名称，因为这在两种情况下都是相同的，并且我不能更改它，因为版本 B 旨在成为替代品。

* * *

有谁知道如何加载具有相同完全限定名称的类的两个不同版本（来自不同的 jar）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:16:35.500

你可以这样做：创建一个类加载器，从其中一个 jar 中按名称加载类。然后调用编组并创建 XML。在此之后，创建类加载器的另一个实例（或完全是另一个类加载器）以从另一个 jar 中按名称加载类，并使用通过第二个类加载器创建的对象解析 XML。

如果遇到麻烦，您总是可以创建两个测试：一个创建版本 A 的 xml，然后另一个解析版本 B 的 XML。这两个测试可以在不同的 JVM 中运行，一个接一个

# javafx - 获取 StackPane 的宽度

> ID：10107624
> 
> 赞同：4
> 
> 时间：2012-04-11T14:09:34.913
> 
> 标签：javafx, javafx-2

我不知道如何获得 StackPane 的宽度：

如果我参考[http://docs.oracle.com/javafx/2.0/api/javafx/scene/layout/StackPane.html，StackPane](http://docs.oracle.com/javafx/2.0/api/javafx/scene/layout/StackPane.html)的尺寸应该适应它的内容：

> 堆栈窗格的父级将在布局期间在堆栈窗格的可调整大小范围内调整堆栈窗格的大小。默认情况下，堆栈窗格根据下表中列出的内容计算此范围。
> 
> preferredWidth 左/右插图加上最大的孩子的首选项宽度。

这里的语法是 scala，但问题涉及 javafx ：

```
import javafx.scene.layout.StackPane
import javafx.scene.shape.Rectangle

class Bubble() extends StackPane {
val rect = new Rectangle(100, 100)

getChildren.add(rect)

println(rect.getWidth)
println(this.getWidth)
}

Output :
>> 100.0
>> 0.0 <- Why isn't it 100 ? 
```

这是一个错误还是期待的行为？如何获得 StackPane 的内容宽度？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:44:39.650

布局管理器（实际上是所有可调整大小的对象）在实际显示应用程序之前不会更新它们的边界。Rectangle 给出宽度 100，因为它是构造函数的默认值。

见下一个代码：

```
@Override
public void start(Stage stage) throws Exception {
    StackPane root = new StackPane();
    Rectangle rect = new Rectangle(100, 100);
    root.getChildren().add(rect);

    // 100 - 0
    System.out.println(rect.getWidth());
    System.out.println(root.getWidth());

    stage.setScene(new Scene(root));

    // 100 - 0
    System.out.println(rect.getWidth());
    System.out.println(root.getWidth());

    stage.show();

    // 100 - 100
    System.out.println(rect.getWidth());
    System.out.println(root.getWidth());
} 
```

因此，您需要等待 StackPane 显示。或者在这件事上更好地依赖 JavaFX 并使用绑定。例如

```
 stage.titleProperty().bind(root.widthProperty().asString()); 
```

# c# - DateTime 的 6 字节时间戳

> ID：10107625
> 
> 赞同：1
> 
> 时间：2012-04-11T14:09:42.300
> 
> 标签：c#, datetime

我使用第 3 方 API。根据其规格如下

```
 byte[] timestamp = new byte[] {185, 253, 177, 161, 51, 1} 
```

表示*从 1970 年 1 月 1 日开始生成消息以供传输的毫秒数*

问题是我不知道如何将其转换为 DateTime。

我试过了

```
DateTime Epoch = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);
long milliseconds = BitConverter.ToUInt32(timestamp, 0);
var result =  Epoch + TimeSpan.FromMilliseconds(milliseconds); 
```

结果是 {2/1/1970 12:00:00 AM}，但预计是 2012 年。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:16:20.113

```
 byte[] timestamp = new byte[] { 185, 253, 177, 161, 51, 1, 0, 0, };
        DateTime Epoch = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);
        ulong milliseconds = BitConverter.ToUInt64(timestamp, 0);
        var result = Epoch + TimeSpan.FromMilliseconds(milliseconds); 
```

结果是 2011 年 11 月 14 日

为 CodeInChaos 添加特殊的填充代码：

```
 byte[] oldStamp = new byte[] { 185, 253, 177, 161, 51, 1 };
    byte[] newStamp = new byte[sizeof(UInt64)];
    Array.Copy(oldStamp, newStamp, oldStamp.Length); 
```

在大端机器上运行：

```
if (!BitConverter.IsLittleEndian)
{
    newStamp = newStamp.Reverse().ToArray();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T14:13:08.433

我假设`timestamp`使用小端格式。我也省略了参数验证。

```
long GetLongLE(byte[] buffer,int startIndex,int count)
{
  long result=0;
  long multiplier=1;
  for(int i=0;i<count;i++)
  {
    result += buffer[startIndex+i]*multiplier;
    multiplier *= 256;
  }
  return result;
}

long milliseconds = GetLongLE(timestamp, 0, 6); 
```

# jms - 对于 ESB4，如何在 out seqence 访问 in sequence 消息

> ID：10107629
> 
> 赞同：0
> 
> 时间：2012-04-11T14:10:03.850
> 
> 标签：jms, wso2, wso2esb

我们正在使用具有 in sequence 和 out 序列的 ESB4 代理服务。消息在顺序期间被调解并发送到端点。响应进入顺序。我们喜欢过滤诸如身份验证失败之类的响应，并将入站消息放回 JMS 存储以重试。但我不知道如何按顺序获取消息。将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:04:22.723

您可以在您的 outsequence 中定义一个消息存储来保存消息...定义一个消息存储并在 store meditaor 中使用它。在这里找到样品

[http://wso2.org/project/esb/java/4.0.0/docs/samples/store_n_forward_samples.html](http://wso2.org/project/esb/java/4.0.0/docs/samples/store_n_forward_samples.html)

# android - CheckJNI 选项不起作用

> ID：10107630
> 
> 赞同：4
> 
> 时间：2012-04-11T14:10:06.093
> 
> 标签：android, c, android-ndk, java-native-interface, android-2.2-froyo

[我有一个植根设备，并按照 Android Dev Link http://android-developers.blogspot.in/2011/07/debugging-android-jni-with-checkjni.html](http://android-developers.blogspot.in/2011/07/debugging-android-jni-with-checkjni.html)中给出的方式设置构建属性

```
$ adb shell stop
$ adb shell setprop debug.checkjni 1
$ adb shell start 
```

但是在这样做之后，我在 DDMS 日志中得到 CheckJNI is OFF

任何人都可以有一些解决方案来“打开”CheckJNI

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:54:21.160

尝试这个：

1.  转到数据 > 本地属性

2.  在 localproperties 如果有写权限

3.  在本地磁盘中有一个带有 local.prop 的文件，其文本为 dalvik.vm.checkjni=true。

4.  adb 推送 /data/local.prop /local.prop。

5.  然后重新启动设备，您将在 LOGCAT 中看到 CheckJNI 选项。

# c# - C# UpdateResource 函数失败

> ID：10107637
> 
> 赞同：1
> 
> 时间：2012-04-11T14:10:30.787
> 
> 标签：c#, resources

我正在用 C# 编写一个简单的应用程序，它允许将资源添加到我选择的 .EXE 文件中。问题是对 UpdateResource 函数的调用失败并出现错误 6，根据 MSDN 是 InvalidHandle（尽管对 BeginUpdateResource 的调用似乎是成功的）（代码是从更大的文件中复制和粘贴的，所以如果某些 {缺少, 不用在意, 代码可以编译, 但不能按预期工作)

```
public partial class Form1 : Form
{
    [DllImport("kernel32.dll", SetLastError=true)] 
    static extern bool UpdateResource(IntPtr hUpdate, string lpType, string lpName, ushort wLanguage, IntPtr lpData, uint cbData);

    [DllImport("kernel32.dll",SetLastError=true)]
    static extern IntPtr BeginUpdateResource(string pFileName, [MarshalAs(UnmanagedType.Bool)]bool bDeleteExistingResources);

    [DllImport("kernel32.dll",SetLastError=true)]
    static extern bool EndUpdateResource(IntPtr hUpdate, bool fDiscard);

    static unsafe void  SetRes(string path)
    {
        IntPtr beginPointer = BeginUpdateResource(path, false);

        if (beginPointer != null)
        {
            MessageBox.Show("Begin works");//This is shown

            ushort id = (ushort)Language.MakeLanguageID();
            string newMessage = "hello world!";
            Byte[] bytes = new ASCIIEncoding().GetBytes(newMessage);
            GCHandle bHandle = GCHandle.Alloc(bytes, GCHandleType.Pinned);
            IntPtr ptr = bHandle.AddrOfPinnedObject();

            bool update = UpdateResource(beginPointer,"FILE", "Test", id,ptr, (uint)bytes.Length);

            if (update == true)
            {
                MessageBox.Show("Update");
                EndUpdateResource(beginPointer, false);

            }
            else
            {
                MessageBox.Show(Marshal.GetLastWin32Error().ToString()); //It gives error 6
            }
        }
    } 
```

# c++ - std::sort 如何仅使用迭代器实现交换操作？

> ID：10107638
> 
> 赞同：3
> 
> 时间：2012-04-11T14:10:31.943
> 
> 标签：c++, algorithm, stl

我怎样才能实现例如以下

```
template <typename ITERATOR> void Swap (ITERATOR a, ITERATOR b) {
  ...
} 
```

以便 Swap(a, b) 交换 a 和 b 所指向的值。换句话说：如何在不知道数据类型的情况下创建第三个变量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T14:14:02.723

只是[`iter_swap`](http://en.cppreference.com/w/cpp/algorithm/iter_swap)为了那个工作：

```
std::iter_swap(a, b); 
```

此外，如果您可以使用 c++11，您可以使用`decltype`：

```
std::remove_reference<decltype(*a)>::type c = *a;
*a = *b;
*b = c; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-11T14:14:06.190

> 如何在不知道数据类型的情况下创建第三个变量？

采用`std::iterator_traits<ITERATOR>::value_type`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-11T14:28:17.630

在 C++11 中，类型是`std::remove_reference<decltype(*a)>::type`，但要声明变量，您将使用`auto`.

在 C++03 中，推断任意表达式类型的最可靠方法是通过另一个模板：

```
// NOTE: This is for illustration only. If you are simply swapping
// values, use 'std::swap' instead of this, since that is specialised
// for many types to avoid unnecessary copy-assignment.
template <typename T> void value_swap(T & a, T & b) {
    T t = a;
    a = b;
    b = t;
}

template <typename I> void iterator_swap(I a, I b) {
    value_swap(*a, *b);
} 
```

或者，对于表现良好的迭代器（包括指针和标准迭代器），该类型可用作`std::iterator_traits<ITERATOR>::value_type`. `iterator_traits`如果有人编写了自己的迭代器类型而没有提供默认所需的嵌套类型或专门`iterator_traits`针对它，这将不起作用。

`decltype`一些编译器提供类似于;的非标准扩展。例如 GCC 提供`typeof`. 如果你不需要你的代码是可移植的，你可以使用这样的东西。

顺便说一句，您的特定功能已经作为`std::iter_swap`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-11T14:16:02.317

```
template <typename ITERATOR> void Swap (ITERATOR a, ITERATOR b) {
  using std::swap;
  swap(*a,*b);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-11T14:12:22.073

迭代器有一个所谓的特征来定义它的值类型。

```
 iterator_traits<ITERATOR>::value_type temp = *a;
        *a = *b;
        *b = temp; 
```

# c# - 插入错误：文件的目录查找

> ID：10107639
> 
> 赞同：0
> 
> 时间：2012-04-11T14:10:33.097
> 
> 标签：c#, sql, sql-server

我在 VS2010 中构建的网站上有一个注册页面，当我在点击注册中填写表格时，我收到以下错误。帮助将不胜感激。

```
System.Exception was unhandled by user code
      Message=Insert Error:Directory lookup for the file "C:\Users\myname\Documents\myname\Project\App_Data\SJDatabase.mdf" failed with the operating system error 5(error not found).
    Cannot attach the file 'C:\Users\myname\Documents\myname\Project\App_Data\SJDatabase.mdf' as database 'SJDatabase'. 
```

连接字符串：

```
<connectionStrings>
        <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient"/>

    <add name="MyConsString" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|SJDatabase.mdf;
                             Initial Catalog=SJDatabase;
                             Integrated Security=SSPI;"
                             providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:30:54.780

我认为您缺少反斜杠`|DataDirectory|\SJDatabase.mdf`

此外，您有两次 Integrated Security=SSPI，我认为您不需要 AttachDBFileName 部分

尝试一些更简单的方法：

```
"data source=ServerName;Initial Catalog=SJDatabase;Integrated Security=SSPI" providerName="System.Data.SqlClient" 
```

# javascript - 在javascript中创建多维数组，自定义函数中的错误

> ID：10107641
> 
> 赞同：1
> 
> 时间：2012-04-11T14:10:33.900
> 
> 标签：javascript, arrays

我试图在单个 javascript 语句中定义一个数组（包括其他数组作为值），我可以循环通过它来验证提交时的表单。

我写（尝试）创建内联数组的函数如下：

```
function arr(){
    var inc;
    var tempa = new Array(Math.round(arguments.length/2));
    for(inc=0; inc<arguments.length; inc=inc+2) {
        tempa[arguments[inc]]=arguments[inc+1];
    }
    return tempa;
} 
```

这里调用了 3 次来分配一个数组：

```
window.validArr = arr(
    'f-county',arr('maxlen',10, 'minlen',1),
    'f-postcode',arr('maxlen',8, 'minlen',6)
); 
```

但是在 javascript 调试器中，该变量为空，并且该`arr()`函数没有返回任何内容。有谁知道为什么我对这段代码应该做什么的期望不正确？

（***我已经想出了如何在没有这个函数的情况下创建数组***，但我很好奇为什么这段代码不起作用（我以为我比这更了解 javascript）。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:15:19.093

好吧，从您的代码的作用来看，您并没有真正制作数组。在 JavaScript 中，数组的特殊之处在于对**数字索引**属性的管理。否则它们只是对象，因此它们也可以具有其他属性，但是如果您不将数组用作数组，则最好只使用对象：

```
function arr(){
    var inc;
    var tempa = {};
    for(inc=0; inc<arguments.length; inc=inc+2) {
        tempa[arguments[inc]]=arguments[inc+1];
    }
    return tempa;
} 
```

您从调试器中看到的是它试图将您的数组显示为应该显示的真实数组的结果：也就是说，它的数字索引属性。如果您按原样调用“arr()”函数，然后查看（从您的示例）结果的“f-county”属性，您会在那里看到一些东西。

此外，如果您*确实*发现自己想要一个真正的数组，那么将它们初始化为特定大小绝对没有意义。只需创建一个新数组`[]`：

```
 var tempa = []; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:38:42.643

您的代码有效。只需检查您的变量，您就会看到数组上有自定义键。如果不展开，您的调试器只会以简短的语法向您显示（数字）索引值 - 不适合您。

但是，您可能需要了解数组和对象之间的区别。对象只是键值对（您可以称其为“映射”）及其原型。数组是一种特殊类型的对象。它具有特殊的原型方法、`length`功能和不同的方法：存储索引值对（即使索引仍然是键）。因此，[您不应该将 Array 用作关联数组](http://www.andrewdupont.net/2006/05/18/javascript-associative-arrays-considered-harmful/)。

因此，它们的字面语法不同：

```
var array = ["indexed with key 0", "indexed with key 1", ...];
var object = {"custom":"keyed as 'custom'", "another":"string", ...};
// but you still can add keys to array objects:
array.custom = "keyed as 'custom'"; 
```

# java - 如何检查 Java 源代码中是否没有对包的引用

> ID：10107645
> 
> 赞同：7
> 
> 时间：2012-04-11T14:10:39.150
> 
> 标签：java

在 Java 源代码中，我不想使用某些包。例如，我不想要任何对 swing、io 或其他的引用。

是否有系统可以在编译时或测试时进行检查？

例如，使用假定的注释

```
@NoPackage("javax.swing")
class Foo
{
    private JFrame fram; // NOT OK.
} 
```

为什么我需要这个？因为我有一个带有swing 的应用程序，我想用一个使用swing 的部分重构它，而另一个不使用它的部分，因为我想将它移植到其他ui 的东西（web、pda 等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:27:27.737

我不知道这样的工具，但创建它并不复杂。对所有使用的类的引用都编码在类文件中。使用一些[类文件库](https://stackoverflow.com/questions/164378/best-library-for-programatically-inspecting-java-class-files)，可以检查类文件，并列出所有使用的类（或包）。如果插入了 @NoPaquage 之类的注释，那么该工具可以检查该类是否真的不使用该包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T14:20:11.723

我可以想到一种相当*老套*的方法来做到这一点。但是，您需要有一个此类*禁止*类的列表，而不仅仅是包。说，你想禁止使用`javax.swing.JFrame`.

只需创建下面的假类。

```
package javax.swing;

class JFrame {
} 
```

请注意，该类不是公共的，因此任何导入它的尝试都会导致编译错误“ `The type javax.swing.JFrame is not visible.`”

您可以从所有此类禁止的类中创建一个 JAR 文件，并确保它们**最后**由类加载器加载。这样可以确保肯定会发生编译器错误。每当您想运行此测试时，您都可以简单地选择包含/排除此 JAR 文件 - 如果使用 ant，这是一项微不足道的任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:55:55.360

您可以在导入区域中选择要使用的包装。

在 Eclipse 中，您可以选择您的类来自哪个包。

您必须删除导入行才能选择另一个包中的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T14:17:31.913

我认为这将是非常困难的，因为也有可能一个类使用反射来获得它想要的东西。

如果我试图这样做，我会编写自己的自定义类加载器，但我不确定类加载器接口是否知道哪个类实际上正在尝试加载。如果你想禁止*所有*代码使用某个包，我认为你可以使用自定义类加载器，但是如果你想要它更具体的类，你可能需要像*grep*这样的手动代码？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T14:30:13.880

您不能让 JVM 过滤您正在编写的代码。但是，您可以使用泛型来限制所有公共 API 中允许的类。您还可以像这样限制继承：

```
class Parent {
    public Parent() throws Exception {
        if (this instanceof Child)
            throw new Exception("It's a child");
    }
}

public class Child extends Parent {
    public Child() throws Exception {
        super();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T14:21:16.470

像这样的东西：

```
$ find srcTree -name \*.java | xargs grep javax\\.swing 
```

# mongodb - Lambda 表达式不适用于 MongoDb C# Driver 1.4

> ID：10107646
> 
> 赞同：2
> 
> 时间：2012-04-11T14:10:40.357
> 
> 标签：mongodb, c#-4.0, mongodb-.net-driver

我已经使用 MongoDb C# Driver 1.4 更新了我的项目，并且我的 Lambda 表达式之一不再工作。

在我使用 MongoDb C# Driver 1.3.1 和 Fluent Mongo 来支持 Linq 之前。

这是我的方法：

```
IQueryable<T> IBackend<T>.Get(System.Linq.Expressions.Expression<Func<T, bool>> expression)
{
    return collection.AsQueryable<T>().Where(expression);
} 
```

这个 lambda 表达式有效：

```
var addedCustomer = repo.Get(c => c.FirstName == "Elwood").SingleOrDefault(); 
```

这个现在抛出一个异常：

```
var updatedCustomer = repo.Get(c => c.Id == customer.Id).SingleOrDefault(); 
```

抛出异常消息：

```
Object reference not set to an instance of an object. 
```

更新这里是我的堆栈跟踪：

```
MongoDB.Bson.dll!MongoDB.Bson.Serialization.BsonClassMapSerializer.GetMemberSerializationInfo(string memberName) Line 253 + 0x3 bytes   C#
MongoDB.Driver.dll!MongoDB.Driver.Linq.SelectQuery.GetSerializationInfoMember(MongoDB.Bson.Serialization.IBsonSerializer serializer, System.Linq.Expressions.MemberExpression memberExpression) Line 962 + 0xc bytes    C#
MongoDB.Driver.dll!MongoDB.Driver.Linq.SelectQuery.GetSerializationInfo(MongoDB.Bson.Serialization.IBsonSerializer serializer, System.Linq.Expressions.Expression expression) Line 888 + 0xf bytes  C#
MongoDB.Driver.dll!MongoDB.Driver.Linq.SelectQuery.GetSerializationInfo(System.Linq.Expressions.Expression expression) Line 880 + 0xf bytes C#
MongoDB.Driver.dll!MongoDB.Driver.Linq.SelectQuery.BuildComparisonQuery(System.Linq.Expressions.BinaryExpression binaryExpression) Line 433 + 0x1f bytes    C#
MongoDB.Driver.dll!MongoDB.Driver.Linq.SelectQuery.BuildQuery(System.Linq.Expressions.Expression expression) Line 768 + 0x37 bytes  C#
MongoDB.Driver.dll!MongoDB.Driver.Linq.SelectQuery.BuildQuery() Line 113 + 0xc bytes    C#
MongoDB.Driver.dll!MongoDB.Driver.Linq.SelectQuery.Execute() Line 122 + 0x9 bytes   C#
MongoDB.Driver.dll!MongoDB.Driver.Linq.MongoQueryProvider.Execute(System.Linq.Expressions.Expression expression) Line 147 + 0xb bytes   C#
MongoDB.Driver.dll!MongoDB.Driver.Linq.MongoQueryProvider.Execute<Lion.Tools.Tests.Backends.Entities.Customer>(System.Linq.Expressions.Expression expression) Line 131 + 0xc bytes  C#
[External Code] 
Lion.Tools.Tests.dll!Lion.Tools.Tests.Backends.MongoDbBackendTests.MongoDb_Can_Add_Select_And_Update_Test() Line 79 + 0x27f bytes   C#
[External Code] 
```

知道出了什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T15:03:44.297

C# 驱动程序的 1.4 版本中存在一个错误，该错误会影响针对继承属性的 LINQ 查询：

[https://jira.mongodb.org/browse/CSHARP-418](https://jira.mongodb.org/browse/CSHARP-418)

这已在 master 分支中修复，修复将在我们计划很快发布的 1.4.1 版本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:20:55.487

没有什么明显是错的。您需要检查几件事：

1.  真的是在向你展示的那条线投掷吗？
2.  是`repo`不是`null`？
3.  不是，例如，如果您用固定值替换它`customer`是否有效？`null``customer.Id``1`
4.  确保`repo.Get(...)`永远不会返回`null`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:22:27.840

没什么帮助，但是，Where 表达式通常返回一些东西或抛出一个 NotFound。在这种情况下，这意味着 repo 或 customer 为空。

如果您认为更新提供程序导致了这种情况，请尝试检查 Where 返回值。

# c# - 在 C# 中一次从字符串中提取五个数字

> ID：10107647
> 
> 赞同：0
> 
> 时间：2012-04-11T14:10:40.553
> 
> 标签：c#, .net, windows

我正在尝试从文件中获取数字（字符 0-9）并将它们存储在内存中。

假设我们有一个名为“register”的字符串（并且只能（必须）最多保存 5 个字符），并且 register 字符串将接收从文件中读取的数字，例如：

文件 1.txt：

> 门牌号是10，价格是4000和3。

所以寄存器将填写以下内容：“10400”

然后将对字符串执行一些逻辑，然后从字符串中删除第一个字符，所有内容都会向左移动 1，并且将添加文件中的另一个字符（数字），例如：

> 04000

接着...

> 40003

希望有人可以对此有所了解并提供一些实现这一目标的方法:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:14:27.627

好吧，如果你想去掉字符串的第一个字符并在最后添加一个，你可以说：

```
string s = "10400";
string t = s.Substring(1) + "0"; 
```

这给了`t = "04000"`. 重复：

```
string u = t.Substring(1) + "3"; 
```

这给了`u = "40003"`.

那么，你还想要什么？弄清楚最后添加什么的逻辑是你的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:34:12.807

您可以像这样创建 List 的扩展方法：

```
static class Helper
{
    public static void Push<T>(this List<T> list, T item)
    {

        if (list.Count == 5)
            list.RemoveAt(0);

        list.Add(item);

    }
} 
```

然后你可以像这样使用它：

```
 List<char> queue = new List<char>(5);
 queue.Push('1');
 queue.Push('0');
 queue.Push('4');
 queue.Push('0');
 queue.Push('0'); 
```

后续调用 Push 将删除第一个字符并添加最后一个字符

```
 queue.Push('1'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:31:29.507

好的...

首先，FileStream 和相关的 StreamReaders 将允许您以几乎任何您想要的格式读取文件。这很重要，因为您的特定算法将决定检索方法。

归结起来，您想从文件中读取字符，当该字符是数字时，将其存储在寄存器中，以这种方式继续，直到寄存器中有五个数字字符。然后，您将执行一些逻辑，导致第一个数字不再有用，因此您将其截断并获取下一个值。

这些方面的东西怎么样？

```
var register = new StringBuilder();

using(var stream = File.Open("File1.txt"))
{
   bool ended, fileEnded;   
   int buffer;
   while(!ended)
   {
      while(register.Length < 5 && !fileEnded)
      {
         buffer = stream.ReadByte();
         if(buffer == -1)
         {
            fileEnded = true;
            break;
         }

         var myChar = (char)buffer;
         if(Char.IsNumber(myChar))
            StringBuilder.Append(myChar);
      }

      //at this point you have 5 characters in register (or have run out of file).
      //perform your logic, then remove the front character
      register.Remove(0,1);

      //repeat the loop. You won't get any more new characters once you reach the end of file,
      //but the main loop will keep running until you set ended to true
      if(WereDone())
         ended=true;
   }
   stream.Close();
} 
```

您还可以将整个文件读入一个字符串变量，然后应用一个查找数字字符的正则表达式，将它们连接到一个大缓冲区中，然后从中填充您的寄存器。对于小文件来说，这是一种更好的方法，但这种方法适用于任何文件大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T14:55:34.493

我可能会将一种用于获取正确字符串的方法放入一个值中。请参阅下面的示例：

```
 static string FetchRegister(string Source, int Max, int StartIndex)
    {
        string Register = string.Empty;
        int RegisterIndex = 0;

        for (int i = 0; i < Source.Length; i++)
        {
            if (char.IsNumber(Source[i]))
            {
                if (RegisterIndex >= StartIndex)
                {
                    Register += Source[i].ToString();
                    if (Register.Length == Max)
                    {
                        return Register;
                    }
                }
                RegisterIndex += 1;
            }
        }
        return Register;
    } 
```

# plot - Gnuplot：点大小单位

> ID：10107650
> 
> 赞同：3
> 
> 时间：2012-04-11T14:10:44.317
> 
> 标签：plot, gnuplot

如何以绘图坐标为单位在 gnuplot 中设置点大小？

换句话说，如果我增加 xrange，点应该会变小。

看起来这完全取决于终端。有解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:22:56.363

这是一个使用内联数据的小例子......

```
plot '-' u 1:2:1 ps variable
  1 2
  2 3
  3 4
  4 5
  5 6
  e 
```

请注意，虽然可以使用数据文件中的列来更改点大小，但我不知道有什么方法可以指定每个点的大小，因为点大小（甚至点类型）是与终端相关的数量。我能想出的唯一解决方法是通过终端相关值来缩放点。

```
default_value=1.0
func(x)=1.0*x  #Change this to change the functional dependence of the pointsize on x.
scale_point(x)=(GPVAL_TERM=="postscript") ? 1.0*func(x) :\
               (GPVAL_TERM=="png") ?        2.0*(x) :\
               default_value
plot "mydata.dat" u 1:2:(scale_point($1)) w pt ps variable 
```

它很难看，但它应该可以完成工作——你也可以编写一个类似的函数来返回 pointtype 以实现某种终端独立性......

**编辑**

请注意，随着 x 变大，我的点的大小会线性*增加*，但是您可以替换任何您想要使点变得更小的函数，因为您认为合适。我要说的是，我不相信该选项存在，因为正如您所说“这一切都取决于终端”。我试图提供一个丑陋的 hack，让您可以在每个情节的基础上以最少的干预对其进行修改——允许使用不同的终端等。

**编辑 2**

在回复您的评论时，我想起了 gnuplot 文档的一个奇怪的小角落，它可能会有所帮助。

```
set style fill transparent solid noborder  #whatever fillstyle you want...
plot 'mydata' u 1:2:3 w circles 
```

看`help circles`...我不确定何时引入此功能，可能是使用 gnuplot 4.3，但如果您使用的是 4.2，请尝试一下，让我知道它是如何进行的...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:37:03.490

如果我正确理解了这个问题，您只希望 pointsize 是 xrange 的递减函数。打印点的大小以及它们的外观取决于终端。但是要得到你想要的基本行为并不难。

首先，定义一个函数来返回 pointsize。咱们试试吧

```
sps(a,b) = 1./(b-a) 
```

设置你的 xrange：

```
set xrange [0:3] 
```

制作一个你不会使用的情节：

```
plot sin(X) 
```

我们这样做是为了定义一些 gnuplot 的特殊变量。现在我们可以做

```
plot sin(x) with points pt 7 ps sps(GPVAL_X_MIN, GPVAL_X_MAX) 
```

如果您现在重置 xrange 并重新输入*两个*绘图命令，您将看到点大小发生变化，与 xrange 成反比。您可能需要与我使用的“sps”示例不同的 pointsize 函数。我希望这就像你所追求的。

# java - Android RSS阅读器描述问题

> ID：10107651
> 
> 赞同：0
> 
> 时间：2012-04-11T14:10:45.950
> 
> 标签：java, android, rss

我正在为 android 构建一个简单的 RSS 阅读器，我对 RSS 的顶部描述有点问题。RSS 文件是这样的：

```
<rss>
<channel>
<title>myTitle</title>
<description>desc</description>
<link>myLink</link>
<lastbuilddate>date</lastbuilddate>
<item>
*ITEM1
</item>
<item>
*ITEM2
</item>

...
...

...
</channel>
</rss> 
```

我遇到的问题是，这是显示 RSS 频道的顶部描述（myTitle、desc、myLink、日期等），而不是显示第一项。我想这是因为翻译正在寻找一个，但第一个不是直到第一个项目的结尾？

有什么帮助吗？在本教程的帮助下，我使用了 SAX 实现：http: [//www.ingeniumblog.net/2012/01/making-a-slick-rss-reader-in-android/](http://www.ingeniumblog.net/2012/01/making-a-slick-rss-reader-in-android/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:33:08.330

尝试使用 [Android Rome 提要阅读器](https://www.google.it/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCQQFjAA&url=http://code.google.com/p/android-rome-feed-reader/&ei=p5WFT9SbBovssgb-17ivBg&usg=AFQjCNHD3vH2Z7UfeX8JKR2Zbhh_wde_dQ)有点慢，但效果很好，可以处理各种 RSS 提要（主要是 RSS 2.0 和 Atom）。

# orbeon - 为“查看”模式配置 xforms:select 元素

> ID：10107653
> 
> 赞同：0
> 
> 时间：2012-04-11T14:10:48.620
> 
> 标签：orbeon, xforms

我有下一个问题，当用户查看填充的表单元素 xforms:select 显示为它应该是只读的并显示所选项目的标签时，下面是浏览器中元素的 html 表示

```
 ...
<span 
  id="control-8-control" 
  class="xforms-control xforms-select xforms-incremental xforms-select-appearance-full xforms-static xforms-readonly"
>
    some value1
</span>
    ... 
```

，但是当用户单击文本“某个值”时，此文本将变为所选项目的值，并查看下一个方式

```
 ...
<span 
 id="control-8-control" 
 class="xforms-control xforms-select xforms-incremental xforms-select-appearance-full xforms-static xforms-readonly"
>
   2WPbzcoW3eoH/1rDCyejaA==
</span>
        ... 
```

显然，一些听众挂在那个元素上，并改变了它的内部 html。

此外，这种行为只能在**xforms:select带有****外观=“full”**的元素中观察到

 **我在哪里可以重新配置此元素行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:15:28.710

这是一个错误。我没有重现您遇到的完全相同的问题，因为我一直在夜间构建中对此进行测试，但问题的根源很可能是相同的：当您单击标签，虽然它不应该。我修复了这个，修复将在下一个夜间版本中进行。作为参考，这是[bug](https://github.com/orbeon/orbeon-forms/issues/158)和[commit](https://github.com/orbeon/orbeon-forms/commit/692baedfb9691f05a8225c66007272701ffc0c28)。**

# javascript - 为什么 jQuery.fn 在控制台中显示 []？

> ID：10107657
> 
> 赞同：3
> 
> 时间：2012-04-11T14:10:54.203
> 
> 标签：javascript, jquery

我试图了解 jQuery 是如何编码的。

他们有一个对象：

```
jQuery.fn = {
     //key value pairs
} 
```

但是如果我`jQuery.fn`在浏览器控制台中输入，它只会返回`[]`而不是对象本身。有谁知道为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T14:19:04.457

`jQuery.fn`简单地满足了[开发者控制台类数组](https://stackoverflow.com/questions/4951054/what-makes-firebug-chrome-console-treat-a-custom-object-as-an-array)的要求。它实际上不是一个`Array`实例*，但它有一个可以被视为数组的接口。

[*如果`jQuery.fn`实际上*是*一个数组，则`jQuery.fn instanceof Array`计算结果为`true`; 它没有。它*确实*复制了一些`Array.prototype`方法。]

* * *

如果您想检查一个对象是否真的是`Array`，有两种方法，最简单的是`obj instanceof Array`，但是对于继承自 的对象也是如此`Array`。如果你想检查一个对象是否是一个数组，但需要排除继承自`Array`你的对象，应该使用：

```
function isArray(arg) {
    return Object.prototype.toString.call(arg) === '[object Array]';
} 
```

例子：

```
var a, b;
function Foo() {}
Foo.prototype = [];
a = new Foo();
b = [];
a instanceof Array; //true
b instanceof Array; //true
isArray(a);         //false
isArray(b);         //true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T14:16:55.533

尝试在控制台中只输入 jQuery，jQuery.fn 是它的原型

# php - array_diff() 留下空数组键

> ID：10107658
> 
> 赞同：0
> 
> 时间：2012-04-11T14:10:54.983
> 
> 标签：php, array-difference

也许我在这里遗漏了一些东西，但`array_diff()`似乎在数组的末尾让我空了 kesys。

有了这个示例数据 -

```
$term_ids = array(0 => 242, 1 => 270);
$term_ids = array_diff($term_ids, array(242, 243, 266, 267, 268, 269)); 
```

我只剩下这个-

```
Array
(
    [1] => 270
    [0] => 
) 
```

据我了解，这是不正确的（应该取消设置 [0]，只留下 [1]）。我正在使用`$term_ids = array_values($term_ids);`after 使密钥正确，但似乎这不是必需的，所以我想知道是否有比我了解更多的人可以澄清一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:15:44.100

无法重现：

```
$term_ids = array(0 => 242, 1 => 270);
$term_ids = array_diff($term_ids, array(242, 243, 266, 267, 268, 269));
print_r($term_ids); 
```

输出：

```
Array
(
    [1] => 270
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:22:55.153

我试过了

```
<?php

$arr1 = array(15, 16, 17,18);
$arr2 = array(15, 17);

$arr3 = array_diff($arr1, $arr2);

var_dump($arr3); 
```

?>

我得到 [1] => 16，[3] => 18。

[正如官方页面](http://de3.php.net/manual/en/function.array-diff.php)上的示例所示，这实际上似乎是预期的结果。

# ruby-on-rails-3 - Rails 3 Full Calendar-无法更新事件

> ID：10107660
> 
> 赞同：2
> 
> 时间：2012-04-11T14:10:59.637
> 
> 标签：ruby-on-rails-3, jquery, fullcalendar

Jquery 和 Rails 3 相对较新。我已经在我的网站中实现了完整的日历，除了通过完整的日历界面实际更新我的事件模型之外，所有的工作都很好。据我了解，我应该能够将日历条目拖放到另一天，它将更新事件模型并在刷新后将约会留在新的一天。然而，这不会发生。有没有人有类似的问题？此操作的代码如下所示

```
function updateEvent(the_event) {
$.update(
  "/events/" + the_event.id,
  { event: { title: the_event.title,
             starts_at: "" + the_event.start,
             ends_at: "" + the_event.end,
             description: the_event.description
           }
  },
  function (reponse) { alert('successfully updated task.'); }
); 
```

};

我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:49:12.563

我[在 fullCalendar 插件中编辑事件时](https://stackoverflow.com/questions/9038062/fullcalendar-eventclick-handler-does-not-work-if-editable-false)遇到问题。在我的情况下，它与参数`editable`和`disableResizing`. 您必须为拖放功能实现[eventDrop处理程序。](http://arshaw.com/fullcalendar/docs/event_ui/eventDrop/)参数 dayDelta、minuteDelta、allDay 包含新旧日期之间的时间差：

```
$('#calendar').fullCalendar({
    ...
    editable: true,
    eventDrop: function(event,dayDelta,minuteDelta,allDay,revertFunc) {
      $.ajax({
         type:"PUT",
         url: "/events/"+event.id,
         data: "minute_delta="+minuteDelta+"&day_delta="+dayDelta,
         ..
       });
    }
}); 
```

# android - Android上的PhoneGap和ChildBrowser，Twitter不加载..只有闪屏

> ID：10107661
> 
> 赞同：1
> 
> 时间：2012-04-11T14:10:59.640
> 
> 标签：android, twitter, cordova, childbrowser

我正在尝试在 Android 上的 ChildBrowser 中加载 twitter 页面[https://mobile.twitter.com/](https://mobile.twitter.com/)，它只加载启动画面。

顺便提一下，我在同一个应用程序中使用 http:// 和 https:// 尝试了许多网站，它们都在工作，包括 Facebook。我唯一的问题是推特。

有什么建议么？

# asp.net-mvc - ASP.NET MVC3 区域 _ViewStart.cshtml 未部署

> ID：10107663
> 
> 赞同：5
> 
> 时间：2012-04-11T14:11:02.223
> 
> 标签：asp.net-mvc, visual-studio-2010

我正在使用 Visual Studio 2010 Web 部署工具将 ASP.NET MVC3 项目部署到 Windows 2008 r2 服务器。

浏览我的顶级站点时，一切似乎都可以正常工作，但是当我浏览到网站中某个区域内的视图时，该区域的本地布局样式丢失了。

查看服务器，我可以看到 Area 的共享布局文件已部署到文件夹中，但文件夹 中缺少`<site>/<area>/views/shared`Area 的。大概因为这个文件指定了我的布局视图的来源，这是我的问题。`_ViewStart.cshtml``<site>/<area>/views/`

所以问题是关于我在部署阶段做错了什么/遗漏了这个文件的任何想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-11T14:38:07.333

有时，文件的“构建操作”会从“内容”更改为其他内容。发生这种情况时，部署过程要么嵌入（在 bin 文件夹中）文件，要么执行一些其他操作（如忽略）。

要检查/解决问题：

1.  右键单击文件
2.  选择属性
3.  在属性窗口中，确保构建操作是“内容”

# sql - ORA-24247: 访问控制列表 (ACL) 拒绝网络访问

> ID：10107664
> 
> 赞同：1
> 
> 时间：2012-04-11T14:11:07.390
> 
> 标签：sql, oracle, email, ora-24247

我似乎收到了上述错误，我也尝试通过 Intranet 发送邮件，但没有用。上面的错误信息是否意味着我的邮件程序是正确的，问题是数据库管理员对用户施加的限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:15:12.203

取自[http://www.dba-oracle.com/t_ora_24247_network_access_denied_by_access_control_list_tips.htm](http://www.dba-oracle.com/t_ora_24247_network_access_denied_by_access_control_list_tips.htm)：

> **ORA-24247** : 访问控制列表 (ACL) 拒绝网络访问
> 
> **原因**：没有为目标主机分配访问控制列表 (ACL)，或者访问控制列表中的用户没有授予访问目标主机所需的权限。
> 
> **操作**：确保已将访问控制列表 (ACL) 分配给目标主机，并且已将访问目标主机所需的权限授予用户。
> 
> 如果您的应用程序依赖于其中一个网络包并且没有创建正确的 ACL，您的应用程序将遇到 ORA-24247 错误。要使用以下软件包，必须在 11g 中为应用程序用户提供 ACL：
> 
> UTL_TCP
> 
> UTL_SMTP
> 
> UTL_MAIL
> 
> UTL_HTTP
> 
> UTL_INADDR

另请阅读Ian Hoogeboom的以下[帖子](http://blog.whitehorses.nl/2010/03/17/oracle-11g-access-control-list-and-ora-24247/)

# hadoop - 运行本地文件系统目录作为集群中 Mapper 的输入

> ID：10107665
> 
> 赞同：7
> 
> 时间：2012-04-11T14:11:15.593
> 
> 标签：hadoop, mapreduce

我从本地文件系统向映射器提供了一个输入。它从 eclipse 成功运行，但没有从集群运行，因为它无法找到本地输入路径说：输入路径不存在。请任何人帮助我如何为映射器提供本地文件路径，以便它可以在集群中运行，我可以在 hdfs 中获取输出

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-16T13:32:58.350

这是一个非常古老的问题。最近面临同样的问题。我不知道这个解决方案对我来说有多*正确。*如果这样做有任何缺点，请注意。这就是我所做的。

`fs.default.name`从[邮件档案中读取解决方案](http://mail-archives.apache.org/mod_mbox/hadoop-general/200910.mbox/%3C95f8b1a90910132317h87df034nf59b8a3c69cc0b9c@mail.gmail.com%3E)，我意识到如果我修改`hdfs://localhost:8020/`它`file:///`可以访问本地文件系统。但是，我不想在我所有的 mapreduce 工作中使用这个。因此，我`core-site.xml`在本地系统文件夹中制作了一份副本（与我将 MR jar 提交到的文件夹相同`hadoop jar`）。

在我的`Driver` 课堂上`MR`我补充说，

```
Configuration conf = new Configuration();
conf.addResource(new Path("/my/local/system/path/to/core-site.xml"));
conf.addResource(new Path("/usr/lib/hadoop-0.20-mapreduce/conf/hdfs-site.xml")); 
```

从`MR`本地系统获取输入并将输出写入`hdfs:`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T15:46:30.717

在集群中运行需要将数据加载到分布式存储（HDFS）中。首先使用将数据复制到 HDFS `hadoop fs -copyFromLocal`，然后尝试再次运行您的作业，为其提供 HDFS 中数据的路径

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T04:39:16.790

这个问题很有趣。可以在 S3 上拥有数据并在运行作业之前访问这些数据而无需显式复制到 HDFS。在 wordcount 示例中，可以按如下方式指定：

hadoop jar*示例*.jar 字数`s3n://bucket/input s3n://bucket/output`

其中发生的是映射器直接从 S3 读取记录。

如果这可以用 S3 完成，为什么不使用类似的 hadoop，使用这种语法而不是 s3n

```
file:///input file:///output 
```

?

但从经验上看，这似乎以一种有趣的方式失败了——我看到 Hadoop 为确实位于输入目录中的文件提供了一个文件未找到异常。也就是说，它似乎能够列出我本地磁盘上 put 目录中的文件，但是当需要打开它们来读取记录时，找不到（或无法访问）该文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-25T17:49:28.363

I have tried the following code and got the solution... Please try it and let me know..

You need to get FileSystem object for local file system and then use makequalified method to return path.. As we need to pass path of local filesystem(no other way to pass this to inputformat), i ve used make qualified, which in deed returns only local file system path..

The code is shown below..

```
Configuration conf = new Configuration();
FileSystem fs = FileSystem.getLocal(conf);
Path inputPath = fs.makeQualified(new Path("/usr/local/srini/"));  // local path

FileInputFormat.setInputPaths(job, inputPath); 
```

I hope this works for your requirement, though it's posted very late.. It worked fine for me.. It does not need any configuration changes i believe..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T19:59:21.123

数据必须位于 HDFS 上，任何 MapReduce 作业才能处理它。因此，即使您有诸如本地文件系统或网络路径或基于 Web 的存储（如 Azure Blob 存储或 Amazon Block stoage）之类的源，您也需要先将数据复制到 HDFS，然后再运行作业。最重要的是，您需要先将数据推送到 HDFS，并且有几种方法取决于数据源，您可以执行从源到 HDFS 的数据传输，例如从本地文件系统，您可以使用以下命令：

$hadoop -f CopyFromLocal *SourceFileOrStoragePath* _HDFS__Or_directPathatHDFS_

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T04:25:00.787

尝试像这样设置输入路径

FileInputFormat.addInputPath(conf, new Path(file:///本地文件系统上的目录));

如果您提供文件扩展名，它可以从本地系统访问文件

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-23T23:17:09.460

你可能想通过将配置设置为

```
Configuration conf=new Configuration();
conf.set("job.mapreduce.tracker","local");
conf.set("fs.default.name","file:///"); 
```

在此之后，您可以使用本地路径设置文件输入格式，然后您就可以开始了

# java - FileUploadBean.uploadFile 处的 java.lang.NullPointerException

> ID：10107669
> 
> 赞同：2
> 
> 时间：2012-04-11T14:11:20.763
> 
> 标签：java, nullpointerexception

我得到了`java.lang.NullPointerException at FileUploadBean.uploadFile`，不知道为什么，因为我的字符串列表中有数据`fileData`。

**Java代码：**

```
private List<String> fileData;

public void uploadFile(FileEntryEvent event) {
    System.out.println("Event: " + event.getSource());
    System.out.println("Test");
    FileEntry fileEntry = (FileEntry) event.getSource();
    FileEntryResults results = fileEntry.getResults();
    for (FileEntryResults.FileInfo fileInfo : results.getFiles()) {
        if (fileInfo.isSaved()) {
            System.out.println("File is saved sucessfully");
            fileData.add("FileName: " + fileInfo.getFileName());
            fileData.add("FileSize: " + fileInfo.getSize());
            fileData.add("FileStatus: " + fileInfo.getStatus());
        }
    }
}

public List<String> getFileData() {
    System.out.println("inside getFileData");
    List<String> data = fileData;
    return fileData;
}

public void setFileData(List<String> fileData) {
    this.fileData = fileData;
} 
```

**例外：**

```
 Caused by: java.lang.NullPointerException
        at FileUploadBean.uploadFile(FileUploadBean.java:54)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.el.parser.AstValue.invoke(AstValue.java:264)
        at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
        at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
        at org.icefaces.ace.component.fileentry.FileEntry.broadcast(FileEntry.java:306)
        ... 28 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:47:16.930

`fileData`是`null`，因为您还没有创建它。将以下内容添加到您的`uploadFile`方法中：

```
fileData = new ArrayList<String>(); 
```

PS：`setFileData`你可能不需要的方法。

# php - ffmpeg MAMP“dyld：未加载库”错误

> ID：10107671
> 
> 赞同：10
> 
> 时间：2012-04-11T14:11:23.660
> 
> 标签：php, macos, ffmpeg

我通过 PHP 的`exec()`命令在 MAMP 中的 Mac OSX 10.7.3 上使用 ffmpeg，我设置了一个绝对路径来调用 ffmpeg，例如

```
/opt/local/bin/ffmpeg -i "/sample.avi" 
```

但我收到以下错误 -

```
dyld: Library not loaded: /opt/local/lib/libjpeg.8.dylib  Referenced from: /opt/local/lib/libopenjpeg.1.dylib  Reason: Incompatible library version: libopenjpeg.1.dylib requires version 13.0.0 or later, but libJPEG.dylib provides version 12.0.0 
```

注意 ffmpeg 是通过 Macports 安装的。

它从命令行工作。

该怎么办？

**编辑**

我重新打开了这个 - 最初认为`shell_exec()`解决了这个问题，但实际上它应该被称为不同的 - 我直到今天进一步调查才意识到。这是我使用 shell_exec 的代码，但仍然出现上述错误：

```
 $cmd = '/opt/local/bin/ffmpeg -h';
 $cmd = escapeshellcmd($cmd) . ' 2>&1';
 $output = shell_exec($cmd);
 var_dump($output); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-12T14:22:28.180

问题是 DYLD_LIBRARY_PATH 是在 MAMP 中设置的，我已经通过 macports 安装了 ffmpeg。

这可能不是最好的解决方案，但它现在让我启动并运行：

在`/Applications/MAMP/Library/bin/envvars`文件中并注释以下行，如下所示：

```
#DYLD_LIBRARY_PATH="/Applications/MAMP/Library/lib:$DYLD_LIBRARY_PATH"
#export DYLD_LIBRARY_PATH 
```

并重新启动 Apache

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-09T15:52:51.133

注释掉该行将`#DYLD_LIBRARY_PATH="/Applications/MAMP/Library/lib:$DYLD_LIBRARY_PATH"`在短期内起作用，但它可能会破坏其他事情，因为您要删除 MAMP 用来告诉服务器将其库保存在何处的行。

更好的解决方案是将行更改为：

```
DYLD_LIBRARY_PATH="/usr/local/lib:/Applications/MAMP/Library/lib:$DYLD_LIBRARY_PATH" 
```

所以你只是`/usr/local/lib:`在已经给定的路径之前。这告诉 Apache 首先查看`/usr/local/lib`，然后如果这不起作用，则查看`/Applications/MAMP/Library/lib`.

因此，如果您通过 Brew 安装某些东西，并且有两个版本，它会先查看您使用 Brew 安装的版本，然后再使用 MAMP 附带的任何版本，这很可能已过时。但是，如果它只是 MAMP 附带的，您没有单独安装或者是特定于 MAMP 的，那么您不会破坏它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:24:48.040

`exec`当您使用命令行时，确保 PHP使用与您相同的 shell。

[`shell_exec`^(*文档*)](http://php.net/shell_exec)可能会有所帮助。

参见[php shell_Exec not working while the command works in shell](https://stackoverflow.com/questions/8808413/php-shell-exec-not-working-while-the-command-works-in-shell)。

# mysql - 用另一个表中的数据更新表数据

> ID：10107674
> 
> 赞同：1
> 
> 时间：2012-04-11T14:11:33.330
> 
> 标签：mysql

我试图用另一个表中的数据更新一个表，这两个表之间的关系是一对多的关系。我在这里举了一个例子：

```
UPDATE
    foo f
INNER JOIN 
    bar b 
ON 
    b.fooId = f.Id 
SET
    f.something1 = b.barSome1,
    f.something2 = b.barSome1, 
    f.something3 =  b.barSome1, 
    f.something4 = b.barSome1 
```

但我的例子只带了我一半，我想做的是根据最新的 bar.post_date 或 bar.Id 选择前 1 个栏，或者检查 bar.barSome1 （假设它是一个 varchar）是否为空或为空。

现在它是我酒吧的一些内部订购

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:15:05.703

因此，您需要添加一个`WHERE`子句来限制`foo`修改哪些行。

```
UPDATE
    foo f
INNER JOIN 
    bar b 
ON 
    b.fooId = f.Id 
SET
    f.something1 = b.barSome1,
    f.something2 = b.barSome1, 
    f.something3 =  b.barSome1, 
    f.something4 = b.barSome1
WHERE 
  /* only the latest foo.Id */
  f.Id = (SELECT MAX(Id) FROM foo)
  /* Or f.barSome1 is NULL or an empty string */
  OR (f.barSome1 IS NULL OR f.barSome1 = '') 
```

要做到这一点，最新`post_date`的使用如下构造：

```
WHERE
  f.id = (SELECT id FROM (SELECT id, post_date FROM foo HAVING post_date = MAX(post_date)) AS maxpost)
  OR (f.barSome1 IS NULL OR f.barSome1 = '') 
```

## 更新

要从 的单行修改`foo`具有匹配条件的所有行，您可以对不带子句`bar`的子查询使用联接。`ON`首先使用 SELECT 语句对此进行测试。 *我从来没有尝试过这样的事情，如果它破坏了你的`foo`桌子，我不承担任何责任。*:) 先备份。

### 测试 JOIN

```
SELECT f.*, barsub.*
FROM 
  foo f
  JOIN (SELECT * FROM bar WHERE Id = (SELECT MAX(Id) FROM bar)) barsub 
```

### UPDATE 应该以同样的方式工作

```
UPDATE foo f
/* subquery returns one row so all rows of foo are joined to it */
JOIN (SELECT * FROM bar WHERE Id = (SELECT MAX(Id) FROM bar)) barsub
/* no ON clause */
SET
   f.something1 = barsub.barSome1,
   f.something2 = barsub.barSome1, 
   f.something3 = barsub.barSome1, 
   f.something4 = barsub.barSome1 
```

# java - XmlPullParserException：未终止的实体

> ID：10107675
> 
> 赞同：0
> 
> 时间：2012-04-11T14:11:33.837
> 
> 标签：java, android

我的 Android 项目有问题。我正在尝试从 XML 文件中提取信息，该文件目前存储在 WAMP 项目文件中。但是每次我运行该项目时，都会出现 XmlPullParser 异常。我对不同的活动使用了相同的代码，它工作得很好。无法弄清楚错误。这是代码

```
public class MondayActivity extends Activity{

    static String LIST_URL = "http://192.168.1.10/monday.xml";
    ArrayList<HashMap<String, String>> timetableList;
    Handler mHandler;
    ClassesDownloadTask mTask;
    ProgressDialog mProgress;

    public Object onRetainNonConfigurationInstance(){
        Log.v("XML", "Saving data");
        return timetableList;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        Log.v("HIT", "onCreate triggered");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.monday);
        loadTimetableLists();
        displayTimetableLists();

        mHandler = new Handler(){
            public void handleMessages(Message mgs){
                displayTimetableLists();
                mProgress.dismiss();
                if(mgs.what == 1){
                    new AlertDialog.Builder(MondayActivity.this)
                        .setTitle("Error")
                        .setPositiveButton(android.R.string.ok, null)
                        .setMessage("Failed to download packages")
                        .show();
                }else{
                    displayTimetableLists();
                }
            }
        };
        //startBackgroundTask();
        //displayTourPackages();
        timetableList = (ArrayList<HashMap<String,String>>)
        getLastNonConfigurationInstance();
        if(timetableList == null){
            startBackgroundTask();
        }else{
            displayTimetableLists();
        }
    }

    private void startBackgroundTask(){
        mProgress = ProgressDialog.show(this, "Loading tour packages",
                "Please wait...", true);
        mProgress.setCancelable(true);
        mProgress.setOnCancelListener(new OnCancelListener(){

            public void onCancel(DialogInterface args0){
                MondayActivity.this.finish();
            }
        });
        mProgress.show();
        mTask = new ClassesDownloadTask();
        mTask.execute();
    }

    private void loadTimetableLists(){

        try{
            Log.v("HIT", "loadTimetableLists triggered");
            HttpParams params = new BasicHttpParams();
            HttpConnectionParams.setConnectionTimeout(params, 10000);
            HttpConnectionParams.setSoTimeout(params, 1000);

            DefaultHttpClient client = new DefaultHttpClient(params);
            HttpGet get = new HttpGet(LIST_URL);
            HttpResponse res = client.execute(get);
            int code = res.getStatusLine().getStatusCode();

            if (code != 200){
                throw new Exception("Invalid status code: " + code);
            }
            Log.v("XML", "Successfully fetched XML file");
            InputStream is = res.getEntity().getContent();

            timetableList = new ArrayList<HashMap<String, String>>();
            XmlPullParserFactory parseCreator = XmlPullParserFactory.newInstance();
            XmlPullParser parser = parseCreator.newPullParser();
            parser.setInput(is, null);

            int event;
            String name = null;
            String time = null;
            String type = null;
            String room = null;
            String tag = null;
            while((event = parser.next()) != XmlPullParser.END_DOCUMENT){
                if(event == XmlPullParser.START_TAG){
                    tag = parser.getName();
                    if("class".equals(tag)){
                        name = time = type = room = "";
                    }
                } else if(event == XmlPullParser.TEXT){
                    if("time".equals(tag)){
                        time = parser.getText();
                    } else if("name".equals(tag)){
                        name = parser.getText();
                    }else if ("type".equals(tag)){
                        type = parser.getText();
                    }else if ("type".equals(tag)){
                        type = parser.getText();
                    }
                } else if (event == XmlPullParser.END_TAG){
                    if ("tour".equals(parser.getName())){
                        HashMap<String, String> map = new HashMap<String, String>();
                        map.put("name", name);
                        map.put("time", time);
                        map.put("type", type);
                        map.put("room", room);
                        timetableList.add(map);
                        Log.v("XML", "loaded package: " + name);
                    }
                    tag = null;
                }
            }
        }catch (Exception e){
            Log.v("XML", "Error fetching monday.xml", e);
        }
    }

    private void displayTimetableLists(){
        Log.v("HIT", "displayTourPackages triggered");
        String from[] = {"name", "time", "type","room"};
        int to[] = {R.id.tName, R.id.tTime, R.id.typeTimetable,R.id.roomTimetable};
        SimpleAdapter a  = new SimpleAdapter(this, timetableList, R.layout.timetable_list, from, to);
        ListView l = (ListView) findViewById (R.id.courseList);
        l.setAdapter(a);
    }

    public class ClassesDownloadTask extends AsyncTask<Void,Void,Void>{
        boolean bFailed = false;
        @Override
        protected Void doInBackground(Void... params){
            Log.v("XML", "Loading data from AsyncTask");
            loadTimetableLists();
            if(!isCancelled()){
                mHandler.sendEmptyMessage(bFailed ? 1:0);
            }
            return null;
        }
    }
} 
```

# python - python RuntimeError：字典在迭代期间改变了大小

> ID：10107676
> 
> 赞同：19
> 
> 时间：2012-04-11T14:11:34.627
> 
> 标签：python

我有这样的obj

```
{hello: 'world', "foo.0.bar": v1, "foo.0.name": v2, "foo.1.bar": v3} 
```

它应该扩展到

```
{ hello: 'world', foo: [{'bar': v1, 'name': v2}, {bar: v3}]} 
```

我在下面写了代码，拆分`'.'`，删除旧密钥，如果包含则附加新密钥`'.'`，但它说`RuntimeError: dictionary changed size during iteration`

```
def expand(obj):
    for k in obj.keys():
        expandField(obj, k, v)

def expandField(obj, f, v):
    parts = f.split('.')
    if(len(parts) == 1):
        return
    del obj[f]
    for i in xrange(0, len(parts) - 1):
        f = parts[i]
        currobj = obj.get(f)
        if (currobj == None):
            nextf = parts[i + 1]
            currobj = obj[f] = re.match(r'\d+', nextf) and [] or {}
        obj = currobj
    obj[len(parts) - 1] = v 
```

对于 obj.iteritems() 中的 k，v：

RuntimeError：字典在迭代期间改变了大小

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-11T14:15:36.813

就像消息说的那样：您在 expandField() 中更改了 obj 中的条目数，同时在 expand 中循环这些条目。

您可以尝试创建一个您希望的形式的新字典，或者以某种方式记录您想要进行的更改，然后在循环完成后进行更改。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-02-11T22:07:49.477

您可能希望将密钥复制到列表中并使用后者迭代您的 dict，例如：

```
def expand(obj):
    keys = obj.keys()
    for k in keys:
        expandField(obj, k, v) 
```

我让您分析结果行为是否符合您的预期结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-14T21:24:47.173

我想在其他字典中更改字典的结构（删除/添加）字典时遇到了类似的问题。

对于我的情况，我创建了字典的深层副本。使用我的 dict 的 deepcopy，我能够根据需要遍历并删除键。[深拷贝 - PythonDoc](http://docs.python.org/3.3/library/copy.html#copy.deepcopy)

> 深拷贝构造一个新的复合对象，然后递归地将在原始对象中找到的对象的副本插入其中。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-07T02:19:16.310

重写这部分

```
def expand(obj):
    for k in obj.keys():
        expandField(obj, k, v) 
```

到以下

```
def expand(obj):
    keys = obj.keys()
    for k in keys:
        if k in obj:
            expandField(obj, k, v) 
```

将使它工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-14T13:35:12.593

对于那些经历

```
RuntimeError: dictionary changed size during iteration 
```

还要确保在尝试访问不存在的密钥时没有**迭代 a ！`defaultdict`**我发现自己在`for`循环中这样做，这导致为该`defaultdict`键创建默认值，从而导致上述错误。

解决方案是在循环之前将您转换`defaultdict`为，即`dict`

```
d = defaultdict(int)
d_new = dict(d) 
```

或确保您在迭代时没有添加/删除任何键。

# git-svn - git svn clone 失败，在移动的 svn 主干上找不到 HTTP 路径

> ID：10107677
> 
> 赞同：0
> 
> 时间：2012-04-11T14:11:41.927
> 
> 标签：git-svn

我正在使用 git svn 访问 svn 存储库。svn 存储库最近被重新组织，主干和一个分支被交换，即主干被移动到分支/旧主干，分支/foobar 被移动到主干。

在新主干上运行`svn co http://path/to/svn/trunk`正常，我可以毫无问题地添加、更新和提交文件。

但是，当我这样做时，`git svn clone http://path/to/svn --stdlayout`会出现以下错误：

> 未找到 HTTP 路径：该路径不是存储库的一部分：PROPFIND 请求在“/”上失败：在 C:\Program Files (x86)\Git/libexec/git-core\git-svn 行找不到“/”路径2299

有谁知道如何让 git svn 再次工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:05:33.937

事实证明，这个问题是由从代理后面访问 svn repo 引起的。

除了机器范围的代理设置外，我还在该部分下的文件中设置了一`http-proxy-host`组，这两个设置似乎相互影响。`~/.subversion/servers``[global]`

我注释掉了`http-proxy-host`设置，并且能够运行`git svn clone`而没有任何进一步的问题。

**TL;DR**用户错误

# java - 在java中的数据报套接字编程中发送和接收的int数组

> ID：10107678
> 
> 赞同：2
> 
> 时间：2012-04-11T14:11:46.247
> 
> 标签：java, datagram

我尝试通过数据报套接字发送一个整数数组。实现这一目标的最佳方法是什么。我的发送代码是：

```
public void sendObj(Object obj) {
        try{
            byteArr = new ByteArrayOutputStream();
            objOut = new ObjectOutputStream(byteArr);
            objOut.writeObject(obj);
            byte[] b = byteArr.toByteArray();
            DatagramPacket dgram = new DatagramPacket(b, b.length, InetAddress.getByName("230.0.0.1"), 4446); // multicast
            socket.send(dgram);
            System.out.println("Package is sent!");
        }catch(Exception e){
            System.out.println(e.getMessage());
            e.printStackTrace();
        }
    } 
```

接收代码是：

```
byte[] b = new byte[65535];
ByteArrayInputStream b_in = new ByteArrayInputStream(b);
DatagramPacket dgram = new DatagramPacket(b, b.length);

socket.receive(dgram); // blocks
ObjectInputStream o_in = new ObjectInputStream(b_in);
Object o = o_in.readObject();
dgram.setLength(b.length); // must reset length field!
b_in.reset(); // 
```

但是，当我收到它时，它会为未知标头值 00000 提供 StreamException

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:19:29.663

我们通过基本更改解决了这个问题。我们使用像“100200300...”这样的字符串通过用两个 0' 分隔元素来表示数组，因此我们没有使用 ArrayList。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:02:44.497

您必须使用`getbyte()`方法来获取字节并将这些字节放入数据报包实例中，然后将其传递给客户端或发送它......

采用

```
arrayName.getBytes(); /// save this into some byte[] temp = new byte[size]; 
```

并制作一个数据报包并放入它的参数并发送它

# ruby-on-rails - Has_many :through in Rails 3 - 在加入模型中设置一个额外的 ID

> ID：10107681
> 
> 赞同：0
> 
> 时间：2012-04-11T14:11:59.030
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model, sqlite

我整理了一张图表来帮助解释这个问题：http: [//i.imgur.com/ZnN1X.png](http://i.imgur.com/ZnN1X.png)

基本上，在我的“新员工”表单上，我目前有一个员工姓名输入字段，以及一个列出所有公司的选择框。如果我选择一家公司并点击Go，它会在“就业”中创建一个新记录。到现在为止还挺好。

我的问题是，在选择公司时，还需要在“就业”模型中设置类型，该模型链接到“就业类型”模型。理想情况下，这样我就可以拥有两种不同类型的工作 - 但两者都列出了相同的公司。

在此先感谢，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:58:52.550

不确定我是否完全理解你的问题，但我会试一试。

员工模型：

```
has_many :employments, :dependent => :destroy
has_many :companies; :through=>employments
has_many :employment_types, :through=>employments 
```

公司型号：

```
has_many :employments
has_many :employees; :through=>employments
has_many :employment_types, :through=>employments 
```

就业类型模型：

```
has_many :employments
has_many :companies; :through=>employments
has_many :employees; :through=>employments 
```

就业模式：

```
belongs_to :employee
belongs_to :company
belongs_to :employment_type 
```

查看代码：

```
<%= form_for @employee do |f| %>
  <%= f.text_field :name %>
  <% 2.times do %>
    <%= f.fields_for :employments, @employee.employments.build do |employment_fields| %>
      <%= f.select :company_id, options_from_collection_for_select(Company.all, 'id', 'name') %>
      <%= f.select :employment_type_id, options_from_collection_for_select(EmploymentType.all, 'id', 'name') %>
    <% end %>
  <% end %>
<% end %> 
```

在您的图表中，您将 ID 字段设置为非标准 (model_id)，rails 通常更喜欢这些字段只是 id。但是您可以通过将其添加到每个模型来覆盖默认主键：

```
set_primary_key <symbol representing primary key> 
```

# visual-studio-2010 - 在 MS Project 中正确填充 TFS 的问题

> ID：10107682
> 
> 赞同：0
> 
> 时间：2012-04-11T14:11:59.293
> 
> 标签：visual-studio-2010, tfs, ms-project

我在 TFS 中定义了一个字段，以便它映射到 MS Project 中的完成日期。当我将 TFS 中的数据加载到 MS Project 中时，该字段不会填充到 Finish 字段中。但是，当我在 MS Project 中填充 Finish 字段并单击 Publish 时，它确实会使用添加/更改的日期更新 TFS 中的字段。

我究竟做错了什么？我将我的 ETA 字段映射到 Finished 字段，但更新后它只会从 Project 转到 TFS。当我将 ETA 日期添加到 TFS 中的某个内容时，当我尝试将工作项从 TFS 打开到 Project 时，它不会填充到 Project 中。

让我知道这是否没有意义，或者您是否需要进一步澄清。谢谢你，莎娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:41:19.633

如果您使用的完整字段名称不是来自 Microsoft 的名称，则此行为是预期的。更清楚地说，如果您使用自己想出的全名自己创建了该字段：MS Project 不会使用它。

您必须只使用 Microsoft 的字段，在这种情况下：Microsoft.VSTS.Scheduling.FinishDate 用于 MS Project，以便在加载 MS Project 工作表时从工作项中提取数据。

请注意，您可以在团队项目定义中手动设置 WIT 字段和 MS 项目字段的关系。使用 Process Template Editor（来自 TFS Power 工具）来执行此操作。

有关调度字段的更多信息在[这里](http://msdn.microsoft.com/en-us/library/ee461579.aspx)

# struts2 - 如何在 OGNL/Struts2 中迭代和索引列表列表？

> ID：10107684
> 
> 赞同：-2
> 
> 时间：2012-04-11T14:12:01.570
> 
> 标签：struts2, ognl

我有一个配置文件如下的属性：

```
public List<List<String>> getAvailablePassengersJS() 
```

我希望为外部列表中的每个元素创建一个表，为内部列表中的前五个位置中的每一个创建一个列。我尝试使用这个：

```
<s:iterator value="ssn.docked.AvailablePassengersJS" var="line">
<tr>
    <td><s:property value="line[0]"/></td>
    <td><s:property value="line[1]"/></td>
    <td><s:property value="line[2]"/></td>
    <td><s:property value="line[3]"/></td>
    <td><s:property value="line[4]"/></td>
</tr>
</s:iterator> 
```

但是，输出是 100 多行完全空白的列：

```
<tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
</tr> 
```

我知道数据已正确填充。当我这样做时：

```
<s:iterator value="ssn.docked.AvailablePassengersJS" var="line">
<tr>
    <td><s:property/></td>
</tr>
</s:iterator> 
```

我得到100多行这样的：

```
<tr>
    <td>[2236, Middle, Onbenbosin Bawed, true, You can book Tritho Fonand]</td>
</tr> 
```

当我这样做时：

```
<s:iterator value="ssn.docked.AvailablePassengersJS" var="line">
<tr>
    <td><s:property value="line"/></td>
</tr>
</s:iterator> 
```

我得到一个例外：

```
java.lang.ClassCastException: java.util.ArrayList incompatible with java.lang.String 
```

所以我知道“行”解析为 ArrayList。[我读到的关于 OGNL 的所有内容](http://commons.apache.org/ognl/language-guide.html)似乎都暗示我应该能够通过 [] 表示法对数组进行索引。我已经尝试了更多的 {}、# 等组合，我不会给你带来负担，但无济于事。谁能解释为什么这不起作用以及我需要做些什么才能使它起作用？

**更新**

在下面尝试四元数的建议时，我使用了以下代码：

```
<s:iterator value="ssn.docked.AvailablePassengersJS" var="line">
<tr id="availPass<s:property value="#line[0]"/>">
    <td><s:property value="#line[1]"/></td>
    <td><s:property value="#line[2]"/></td>
    <td><s:checkbox key="#line[3]" value="false" theme="simple"/>&nbsp;Book</td>
</tr>
</s:iterator> 
```

它**主要**工作。不幸的是，复选框失败了：

```
<tr id="availPass151570">
    <td>Low</td>
    <td>Andadicko Ostan</td>
    <td><input type="checkbox" name="#line[3]" value="true" id="#line_3_"/><input type="hidden" id="__checkbox_#line_3_" name="__checkbox_#line[3]" value="true" />&nbsp;Book</td>
</tr> 
```

如果我不使用键，则 id 或 value 的组合也不起作用。如果我只是名字和身份证：

```
<td><s:checkbox name="#line[3]" id="#line[3]" value="false" theme="simple"/>&nbsp;Book</td> 
```

如果不能解决：

```
<td><input type="checkbox" name="Book" value="true" id="#line3"/><input type="hidden" id="__checkbox_#line3" name="__checkbox_Book" value="true" /></td> 
```

如果我只使用名称：

```
<td><s:checkbox name="#line[3]" value="false" theme="simple"/>&nbsp;Book</td> 
```

它也不起作用：

```
<td><input type="checkbox" name="#line[3]" value="true" id="#line_3_"/><input type="hidden" id="__checkbox_#line_3_" name="__checkbox_#line[3]" value="true" />&nbsp;Book</td> 
```

如果我只使用 id，我会收到一些内部错误：

```
 <td><s:checkbox id="#line[3]" value="false" theme="simple"/>&nbsp;Book</td>
    <td><input type="checkbox" name="<!-- FREEMARKER ERROR MESSAGE STARTS HERE -->...
Expression parameters.name is undefined on line 23, column 32 in template/simple/checkbox.ftl.
The problematic instruction:
----------
==> ${parameters.name?html} [on line 23, column 30 in template/simple/checkbox.ftl] 
```

为什么复选框的参数需要与属性不同的语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:01:06.500

```
private List<List<String>> listOfLists;

public List<List<String>> getListOfLists() {
    return listOfLists;
}

public void setListOfLists(List<List<String>> listOfLists) {
    this.listOfLists = listOfLists;
}

    <s:iterator var="list" value="%{listOfLists}">
        <s:iterator var="list" value="#list" status="stat">
              <s:property value="#list[#stat.index]"/> //by index.
        </s:iterator><br/>
    </s:iterator> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-19T17:53:32.877

这是一个老问题，但对于其他人，您需要使用`%{listname[index]}"`复选框，例如

```
<input type="checkbox" name="%{#line_3_[1]}" value="true" id="%{#line_3_[1]}"/> 
```

# android - 使用 Ceylon 编写 Android 应用程序

> ID：10107686
> 
> 赞同：6
> 
> 时间：2012-04-11T14:12:12.867
> 
> 标签：android, ceylon

我可以使用 Ceylon 创建 android 应用程序吗？由于 Ceylon 可以运行任何 JVM，据我所知，创建 android 应用程序的 Ceylon 实现应该非常简单。是不是像 Scala 一样，App 的大小变得相当大并且必须使用 proguard 或 SBT-android 插件？它的可行性如何？锡兰可以成为这个的好选择吗？如果是，有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:45:38.353

在 Ceylon 编写 Android 应用程序是一个长期目标，而不是目前的优先事项。所以至少在 2012 年剩下的时间里，我认为答案是不，你不能在 Ceylon 编写 Android 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-11T09:04:14.950

似乎 Chochos 的回答有点过时了。[在这里，您可以看到](https://groups.google.com/forum/#!msg/ceylon-dev/BNqosBRDuSI/WuqUWfxraQcJ)Ceylon 团队已经发布（2014 年 1 月）一些初始 Android 支持，即使使用 Eclipse 插件也是如此。

另一个谈论这个的旧线程是[这个](https://groups.google.com/forum/#!msg/ceylon-dev/n2ZfmaW-I2M/GhZVEa_uV44J)。如果他们在 2014 年的这 7 个月里解决了大部分问题，那就太好了，用 Ceylon 编写 Android 应用程序已经是一种乐趣。我自己会尽快测试这个。

**更新**：有一个可以安装的[“Ceylon-Android”兼容性插件](https://groups.google.com/forum/#!topic/ceylon-dev/BNqosBRDuSI)。

# css - 通过多个 CSS 附加内容 :after 类

> ID：10107687
> 
> 赞同：10
> 
> 时间：2012-04-11T14:12:13.783
> 
> 标签：css

给定以下 HTML：

```
<div class="required">required only</div>
<div class="note">note only</div>
<div class="required note">required and note</div>
<div class="note required">note and required</div> 
```

和 CSS：

```
.required:after { content: " *"; color: red; }
.note:after { content: " +"; color: red; } 
```

Firefox 11 中的结果是：

```
required only *
note only +
required and note +
note and required + 
```

如果提供了多个类（.required 和 .note），我希望将“*”和“+”都附加到元素上，这样：

```
required and note *+
note and required +* 
```

这是否可能使用纯 CSS，如果可以，如何？

编辑：这是此示例的 jsfiddle 链接：http: [//jsfiddle.net/xpZST/](http://jsfiddle.net/xpZST/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T14:14:17.150

您需要额外的规则才能使其正常工作。

鉴于类的顺序很重要（通常不应该！），您需要使用属性选择器而不是类选择器，并且您需要创建*两个*规则：

```
[class="required note"]:after { content: " *+"; color: red; }
[class="note required"]:after { content: " +*"; color: red; } 
```

只需在您拥有的规则之后添加这些规则，它应该可以工作，因为属性和类选择器同样具体。

[jsFiddle 预览](http://jsfiddle.net/BoltClock/xpZST/1)

顺便说一句，如果你有共同的风格，你可以通过在另一个规则中隔离它们来保持你的代码干燥。例如，您可以选择每个类并同时给它们`color: red`：

```
.required:after, .note:after { color: red; } 
```

[jsFiddle 预览](http://jsfiddle.net/BoltClock/xpZST/2)

# javascript - 摆脱形式并使用按钮创建新记录

> ID：10107689
> 
> 赞同：0
> 
> 时间：2012-04-11T14:12:18.667
> 
> 标签：javascript, jquery, ajax, ruby-on-rails-3.1

导轨 3.1。我有以下内容：

```
// _form.html.erb
<%= form_for ([@country, @state], :remote => true) do |td| %>
  <div id= "state_errors" style="display:none"></div>
  <%= td.text_field :position, :id => "next_state" %>
    <div class="actions">
        <%= td.submit %>
    </div>
<% end %>

// global.js
function nextState() {
    Array.max = function( array ) {
        return Math.max.apply( Math, array );
    };
    var getLastState = $("input.sortable_state_item_position").map(function() {
        return $(this).val();
    }).get();
    getLastState.push("0");

    return Array.max(getLastState) + 1;
}
$("input#next_state").val(nextState());

// states_controller.rb
class StatesController < ApplicationController
  before_filter :load

  def load
    @country = Country.find(params[:country_id])
    @states = State.all
  end

  def create
    @state = @country.states.build(params[:state])
    @state.save
  end

  ...
end 
```

您会注意到我`form`为用户创建了一个标签，以便在单击提交按钮时创建记录。但我不确定我是否可以摆脱整个表单`form_for`并只使用正常`a`或`button`触发，`create`因为我有点认为整个表单是多余的，因为用户不需要输入任何内容。我的 javascript 会自动输入值。

请指教。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:49:47.740

在我的状态控制器中：

```
def create
  @state = @country.states.build(params[:trip_day])
  @state.position = State.where(:country_id => @country.id).maximum(:position).to_i + 1
  @state.save
end 
```

替换为`form`：

```
<%= link_to "Add new state", country_states_path(@country), :remote => true, :method => :post %> 
```

我删除了`nextState()`整个函数`form`。

# java - 有没有办法修复错误的编码字符串？

> ID：10107691
> 
> 赞同：3
> 
> 时间：2012-04-11T14:12:28.993
> 
> 标签：java, character-encoding

我通过消息代理（Stomp）得到这个字符串：

```
JoÃÂ£o 
```

这就是它应该是的样子：

```
João 
```

有没有办法在Java中恢复它？！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:22:31.617

```
U+00C3  Ã   c3 83   LATIN CAPITAL LETTER A WITH TILDE
U+00C2  Â   c3 82   LATIN CAPITAL LETTER A WITH CIRCUMFLEX
U+00A3  £   c2 a3   POUND SIGN
U+00E3  ã   c3 a3   LATIN SMALL LETTER A WITH TILDE 
```

我无法确定这可能是数据（编码）转换问题。有没有可能数据很糟糕？

如果数据还不错，那么我们必须假设您误解了编码。我们不知道原始编码，除非您做一些不同的事情，否则 Java 的默认编码是 UTF-16。我看不出`João`任何常见编码中的编码如何被解释为`JoÃÂ£o`UTF-16

可以肯定的是，我在没有找到匹配项的情况下启动了这个 python 脚本。我不*完全*确定它涵盖了所有编码，或者我没有错过一个极端情况，FWIW。

```
#!/usr/bin/env python                                                                                                                   
# -- coding: utf-8 --                                                                                                                   
import pkgutil
import encodings

good = u'João'
bad = u'JoÃÂ£o'

false_positives = set(["aliases"])

found = set(name for imp, name, ispkg in pkgutil.iter_modules(encodings.__path__) if not ispkg)
found.difference_update(false_positives)
print found

for x in found:
    for y in found:
        res = None
        try:
            res =  good.encode(x).decode(y)
            print res,x,y
        except:
            pass
        if not res is None:
            if res == bad:
                print "FOUND"
                exit(1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T09:29:13.487

在某些情况下，黑客是有效的。但最好的办法是防止它发生。

当我有一个 servlet 可以在页面上正确打印正确的标题和 http 内容类型和编码时，我遇到了这个问题，但是 IE 会提交用 latin1 编码的表单而不是正确的表单。所以我创建了一个快速的脏 hack（涉及一个请求包装器，它可以检测并转换它是否确实是 IE）来修复它以获取新数据，这些数据运行良好。对于数据库中已经搞砸的数据，我使用了以下 hack。

不幸的是，我的 hack 不适用于您的示例字符串，但它看起来非常接近（与我的“理论原因”复制的损坏字符串相比，您的损坏字符串中只是一个额外的 Ã）。所以也许我对“latin1”的猜测是错误的，你应该尝试其他的（比如在 Tomas 发布的其他链接中）。

```
package peter.test;

import java.io.UnsupportedEncodingException;

/**
* User: peter
* Date: 2012-04-12
* Time: 11:02 AM
*/
public class TestEncoding {
    public static void main(String args[]) throws UnsupportedEncodingException {
        //In some cases a hack works. But best is to prevent it from ever happening.
        String good = "João";
        String bad = "JoÃÂ£o";

        //this line demonstrates what the "broken" string should look like if it is reversible.
        String broken = breakString(good, bad);

        //here we show that it is fixable if broken like breakString() does it.
        fixString(good, broken);

        //this line attempts to fix the string, but it is not fixable unless broken in the same way as breakString()
        fixString(good, bad);
    }

    private static String fixString(String good, String bad) throws UnsupportedEncodingException {
        byte[] bytes = bad.getBytes("latin1"); //read the Java bytes as if they were latin1 (if this works, it should result in the same number of bytes as java characters; if using UTF8, it would be more bytes)
        String fixed = new String(bytes, "UTF8"); //take the raw bytes, and try to convert them to a string as if they were UTF8

        System.out.println("Good: " + good);
        System.out.println("Bad: " + bad);
        System.out.println("bytes1.length: " + bytes.length);
        System.out.println("fixed: " + fixed);
        System.out.println();

        return fixed;
    }

    private static String breakString(String good, String bad) throws UnsupportedEncodingException {
        byte[] bytes = good.getBytes("UTF8");
        String broken = new String(bytes, "latin1");

        System.out.println("Good: " + good);
        System.out.println("Bad: " + bad);
        System.out.println("bytes1.length: " + bytes.length);
        System.out.println("broken: " + broken);
        System.out.println();

        return broken;
    }
} 
```

结果（使用 Sun jdk 1.7.0_03）：

```
Good: João
Bad: JoÃÂ£o
bytes1.length: 5
broken: JoÃ£o

Good: João
Bad: JoÃ£o
bytes1.length: 5
fixed: João

Good: João
Bad: JoÃÂ£o
bytes1.length: 6
fixed: Jo�£o 
```

# couchdb - 如何在 CouchDB 中使用 Map-Reduce 计算最大值？

> ID：10107693
> 
> 赞同：6
> 
> 时间：2012-04-11T14:12:32.417
> 
> 标签：couchdb, mapreduce

我知道有内置`_stats`函数可以为您提供 sum、count、min、max 和 sumsqr。我想知道的是如何以 map-reduce 方式计算最大值。如果没有更多信息，我无法想出一个可以工作的 reduce 函数。

我唯一能想到的就是对值使用排序并选择第一个值。

我的地图功能如下所示：

```
function(doc){
  emit(null, doc.value);
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-25T10:53:59.630

这也可以通过以下方式解决

```
function (key, values, rereduce) {
  return Math.max.apply({}, values);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-11T16:32:43.380

[couchdb wiki为 sum](http://wiki.apache.org/couchdb/Introduction_to_CouchDB_views#Reduce_Functions)提供了一个简单的示例。

max 的 reduce 函数应该返回 values 数组的最大值，而不是返回值的总和。由于计算最大值是可交换的、关联的等，因此您无需担心 rereduce。

```
function (key, values, rereduce) {
    // Return the maximum numeric value.
    var max = -Infinity
    for(var i = 0; i < values.length; i++)
        if(typeof values[i] == 'number')
            max = Math.max(values[i], max)
    return max
} 
```

# ios - UIView 是否保留其视图控制器

> ID：10107696
> 
> 赞同：1
> 
> 时间：2012-04-11T14:12:43.940
> 
> 标签：ios, xcode, cocoa-touch, uiview, uiviewcontroller

UIView 是否保留其关联的视图控制器？

例如，在以下代码中，视图由父视图保留。如果这个视图也保留它的 ViewController 会很方便，这样我就可以继续并在 loadView 方法中释放控制器。

```
- (void) loadView {

  ...

  MyViewController* ctrl = [[MyViewController alloc] init];
  [self.view addSubview: ctrl.view];
  [ctrl release];

} 
```

我想，另一种方法是将控制器作为实例变量进行跟踪，并在适当的时候释放它。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:15:09.620

不，它没有。正如您已经提到的，您需要一个成员变量。

（一个视图甚至不知道它自己的视图控制器）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:01:23.483

您有些落后：视图控制器保留其视图，而不是相反。通常，一个视图控制器管理屏幕上的整个视图层次结构。虽然 iOS 5 确实允许您一次使用多个视图控制器，但正确执行此操作需要的不仅仅是将一个控制器的视图添加为另一个控制器视图的子视图。有关该过程的易于理解的解释，请阅读Matt Neuberg 的书[*Programming iOS 5, 2nd Edition*](http://shop.oreilly.com/product/0636920023562.do)[的 View Controllers 章节的预览](http://www.apeth.com/iOSBook/ch19.html)。如果您将一个视图控制器添加为另一个视图控制器的子级，则父级将保留该子级，您无需为其创建单独的属性。[](http://shop.oreilly.com/product/0636920023562.do)

# c# - 处理 linq 组的方法

> ID：10107698
> 
> 赞同：2
> 
> 时间：2012-04-11T14:12:47.390
> 
> 标签：c#, linq

我有一个简单的整数列表（重复一些值）并处理：

```
var groups = from n in numbers
    group n by n into numGroup
    where numGroup.Count()>1
    select numGroup; 
```

我可以在 linq 之后直接使用嵌套循环遍历组，但我无法编写一个单独的方法来循环它们。这是我尝试过的。

```
private void PrintGroups(IEnumerable groups, string title)
{
    int i = 0;
    foreach (var group in groups)
    {
        txt1.Text += "Group " + ++i + "\r\n"; ;
        foreach (var x in group)
               txt1.Text += "    " + x.ToString() + "\r\n"; ;
     }
} 
```

编译器不喜欢内部 foreach：

“foreach 语句不能对 'object' 类型的变量进行操作，因为 'object' 不包含 'GetEnumerator' 的公共定义”

但是相同的代码与 linq 内联工作。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T14:14:40.727

在我看来，您只需要更改参数的类型：

```
private void PrintGroups(IEnumerable<IGrouping<int, int>> groups, string title) 
```

但是，您真的不只是对密钥和计数感兴趣吗？毕竟，组中的所有值都将是相同的......

```
private void PrintGroups(IEnumerable<IGrouping<int, int>> groups)
{
    StringBuilder builder = new StringBuilder();
    foreach (var group in groups)
    {
        builder.AppendFormat("Group {0}: {1}\r\n", group.Key, group.Count());
    }
    txt1.Text = builder.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:19:28.717

在 Linq 中，人们认为是投影，这是一个示例，我将一组数字投影到一个可以显示给用户的字符串中。

```
 var nums = new List<int>() { 1, 1, 5, 6, 1, 5, 2 };

 nums.GroupBy (n => n)
     .Select (n => string.Format("Number {0} is found {1} times ({2})", n.Key, n.Count (), string.Join(",", n)))
     .ToList()
     .ForEach(strN => Console.WriteLine (strN));

/* Output

Number 1 is found 3 times (1,1,1)
Number 5 is found 2 times (5,5)
Number 6 is found 1 times (6)
Number 2 is found 1 times (2)

*/ 
```

# java - Android - 创建“到下一页”按钮

> ID：10107701
> 
> 赞同：0
> 
> 时间：2012-04-11T14:12:57.780
> 
> 标签：java, android, xml, eclipse, onclicklistener

我有这段代码，但每次我运行应用程序并单击我的按钮时它都会崩溃，我不明白为什么..我在这里做错了什么任何帮助都会非常感谢

我试图进入“Sec.class”页面/班级

```
public class APPcalendarActivity extends Activity implements OnClickListener{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        View continueButton = findViewById(R.id.continue_button);
        continueButton.setOnClickListener( (OnClickListener) this);
    }

    //@Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {
        case R.id.continue_button:
            Intent i = new Intent(this, Sec.class);
            startActivity(i);           
            break;
        }

    } 
```

这是我在 MANISFEST.XML 文件中缺少的内容

我想打给我的问题降级的人

```
 <activity android:name=".Sec"
android:label="@string/sec" >
</activity> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:21:04.530

检查您是否`<activity>`已`Sec`在`AndroidManifest.xml`.

但是发布（或简单地阅读）崩溃堆栈跟踪`logcat`会更具启发性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:18:48.490

在不知道错误是什么的情况下，真的很难猜出问题是什么，但通常发生这种情况时，`continueButton`在布局中找不到按钮（在您的情况下）。因此，请确保您有一个带有 id `continue_button`in的视图`main.xml`。

# xcode - RestKit - 仅在第二次调用时将缓存保存到核心数据

> ID：10107703
> 
> 赞同：2
> 
> 时间：2012-04-11T14:12:59.037
> 
> 标签：xcode, core-data, sync, restkit

我正在使用RestKit（0.10.0）和后端的Core Data使用以下方法从服务器加载编辑的对象。每当应用程序进入前台时，都会调用该方法作为同步过程的一部分。

```
[syncObjectManager loadObjectsAtResourcePath:[NSString stringWithFormat:@"?config=accounts&since=%@", lastSync] usingBlock:^(RKObjectLoader *loader) {
    [loader.mappingProvider setObjectMapping:companyMappingSync forKeyPath:@"data"];
    loader.backgroundPolicy = RKRequestBackgroundPolicyContinue;
    loader.delegate = self;
}]; 
```

响应加载正常，并且似乎也找到了缓存。

```
2012-04-11 15:58:32.147 mobileCRM[3575:707] T restkit.support:RKCache.m:82 Found cachePath '/var/mobile/Applications/C5E4BF4F-4CB0-4F4C-AC11-FC1E17AE4AF2/Library/Caches/RKClientRequestCache-www.URLTOSERVER.de/PermanentStore/37abc4aff62918578288d10530e6bcd6' for PermanentStore/37abc4aff62918578288d10530e6bcd6
2012-04-11 15:58:32.152 mobileCRM[3575:707] T restkit.support:RKCache.m:119 Wrote cached data to path '/var/mobile/Applications/C5E4BF4F-4CB0-4F4C-AC11-FC1E17AE4AF2/Library/Caches/RKClientRequestCache-www.URLTOSERVER.de/PermanentStore/37abc4aff62918578288d10530e6bcd6'
2012-04-11 15:58:32.158 mobileCRM[3575:707] T restkit.support:RKCache.m:100 Writing dictionary to cache key: 'PermanentStore/37abc4aff62918578288d10530e6bcd6.headers'
2012-04-11 15:58:32.159 mobileCRM[3575:707] T restkit.support:RKCache.m:82 Found cachePath '/var/mobile/Applications/C5E4BF4F-4CB0-4F4C-AC11-FC1E17AE4AF2/Library/Caches/RKClientRequestCache-www.URLTOSERVER.de/PermanentStore/37abc4aff62918578288d10530e6bcd6.headers' for PermanentStore/37abc4aff62918578288d10530e6bcd6.headers
2012-04-11 15:58:32.166 mobileCRM[3575:707] T restkit.support:RKCache.m:103 Wrote cached dictionary to cacheKey 'PermanentStore/37abc4aff62918578288d10530e6bcd6.headers' 
```

在测试属性“street”中的更改时，更改也会被映射。

```
2012-04-11 15:58:33.013 mobileCRM[3575:1a03] T restkit.object_mapping:RKObjectMappingOperation.m:332 Mapped attribute value from keyPath 'street' to 'street'. Value: Musterweg 55 
```

完成操作后，我正在调用一个新的 fetchRequest 并重新加载所属的表视图。

**问题**

在第一次调用之后，以某种方式更改的对象没有保存在后端（即使 Core Data 显示 COMMIT 消息）。

```
2012-04-11 16:05:44.235 mobileCRM[3603:351f] I restkit.core_data:RKInMemoryEntityCache.m:131 Caching all 2861 Company objectsIDs to thread local storage
2012-04-11 16:05:44.354 mobileCRM[3603:351f] CoreData: sql: BEGIN EXCLUSIVE
2012-04-11 16:05:44.357 mobileCRM[3603:351f] CoreData: sql: UPDATE ZCOMPANY SET ZSTREET = ?, Z_OPT = ?  WHERE Z_PK = ? AND Z_OPT = ?
2012-04-11 16:05:44.361 mobileCRM[3603:351f] CoreData: sql: COMMIT 
```

但是当我再次打开应用程序以再次调用该方法时，刷新的数据会按预期显示。因此，我正在努力使该方法在第一次通话时起作用。

谢谢你的想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T10:17:48.860

检查输出后

```
// App Delegate
RKLogConfigureByName("RestKit/*", RKLogLevelTrace);

// Scheme
-com.apple.CoreData.SQLDebug 1 
```

我意识到我在核心数据中的数据提交完成之前重新加载了数据。

因此，即使我使用的是 RKRequestQueue，也可以使用以下方法解决问题。

```
- (void)objectLoaderDidFinishLoading:(RKObjectLoader *)objectLoader
{
    // Send notification to tableView
    [[NSNotificationCenter defaultCenter] postNotificationName:@"refreshTableView" object:self];
} 
```

...它的工作原理。:)

# asp.net-mvc-3 - MVC3 使用用户名编辑客户

> ID：10107706
> 
> 赞同：0
> 
> 时间：2012-04-11T14:13:10.777
> 
> 标签：asp.net-mvc-3, where

我正在尝试使用使用 User.Identity.Name 的用户名编辑客户。

我不知道如何在控制器中编写 Where 条件。

看起来很容易。你可以帮帮我吗？谢谢。

这是我的编码。

```
[Authorize]
    public ActionResult Edit()
    {
        //the username gets username through User.Identity.Name.
        string username = User.Identity.Name;

        //How can I write below coding?
        //In DB, it has userName field.

        Customer customer = db.Customer.Where(userName = username);
        return View(customer);
    }

[HttpPost]
    public ActionResult Edit(Customer customer)
    {
        if (ModelState.IsValid)
        {
            db.Entry(customer).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(customer);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:14:45.390

您需要了解[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)的工作原理：

```
.Where(c => c.UserName == username) 
```

`c`是隐式类型的参数。

另外，如果你想要一个结果，你应该打电话`FirstOrDefault()`；`Where()`返回一个序列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:24:18.310

```
Customer customer = db.Customer.Single(c=>c.UserName == username) 
```

如果返回一个多于一个匹配元素，则抛出异常

或者

```
Customer customer = db.Customer.SingleOrDefault(c=>c.UserName == username); 
```

如果返回多个匹配元素，则返回 null

# internet-explorer - JQGrid：IE 中 textarea 中的换行符/换行符在回发时丢失

> ID：10107710
> 
> 赞同：1
> 
> 时间：2012-04-11T14:13:17.403
> 
> 标签：internet-explorer, post, jqgrid, textarea, newline

我正在使用带有 jquery 的 ASP.NET MVC 来实现客户端功能。

我的一列中有一个带有 textarea 的 jqgrid。当我在 jqgrid textarea 中的文本片段之间添加一些换行符/空行时，这些换行符在回发到服务器时会丢失。这只发生在 IE 上，firefox 很好。这也只发生在 jqgrid 上，jqgrid 之外的 textarea 会正常发布。

我知道在 IE 中也存在 jqgrid 中 textarea 的显示换行问题，可以通过对其应用 css 'white-space:pre-wrap' 来修复它。但我遇到的问题是回发。

任何想法为什么会发生这种情况以及如何解决它？

谢谢你的帮助。

# tfs - 不小心将任务状态更改为“已删除”，想要撤消

> ID：10107711
> 
> 赞同：0
> 
> 时间：2012-04-11T14:13:19.387
> 
> 标签：tfs

我不小心将一些任务从“进行中”更改为“已删除”。任务已保存，我无法撤消此更改。有没有办法，或者我只需要重新创建任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:13:59.920

您只需要创建一个新查询并选择状态“已删除”即可找到它

![在此处输入图像描述](../Images/ff1a076c067e2f8bdda31e418dd50fc9.png)

# xpath - xpath查询是否有像mysql这样的限制选项

> ID：10107715
> 
> 赞同：9
> 
> 时间：2012-04-11T14:13:33.170
> 
> 标签：xpath, limit

我想限制从 xpath 查询收到的结果数量。

例如：-

```
$info = $xml->xpath("//*[firstname='Sheila'] **LIMIT 0,100**"); 
```

你看`LIMIT 0,100`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T14:21:23.907

你应该可以使用`"//*[firstname='Sheila' and position() <= 100]`“

**编辑：**

给定以下 XML：

```
<root> 
    <country.php desc="country.php" language="fr|pt|en|in" editable="Yes"> 
        <en/> 
        <in> 
            <cityList desc="cityList" language="in" editable="Yes" type="Array" index="No"> 
                <element0>Abu</element0>
                <element1>Agartala</element1>
                <element2>Agra</element2> 
                <element3>Ahmedabad</element3>
                <element4> Ahmednagar</element4> 
                <element5>Aizwal</element5>
                <element150>abcd</element150> 
            </cityList> 
        </in> 
    </country.php> 
</root> 
```

您可以使用以下 XPath 获取前三个城市：

```
//cityList/*[position()<=3] 
```

结果：

```
Node    element0    Abu
Node    element1    Agartala
Node    element2    Agra 
```

如果要将其限制为以 开头的节点`element`：

```
//cityList/*[substring(name(), 1, 7) = 'element' and position()<=3] 
```

请注意，后一个示例有效，因为您正在选择cityList 的*所有*子节点，因此在这种情况下`Position()`可以按预期限制结果。如果 cityList 节点下混合有其他节点名称，您会得到不希望的结果。
例如，如下更改 XML：

```
<root> 
    <country.php desc="country.php" language="fr|pt|en|in" editable="Yes"> 
        <en/> 
        <in> 
            <cityList desc="cityList" language="in" editable="Yes" type="Array" index="No"> 
                <element0>Abu</element0>
                <dog>Agartala</dog>
                <cat>Agra</cat> 
                <element3>Ahmedabad</element3>
                <element4> Ahmednagar</element4> 
                <element5>Aizwal</element5>
                <element150>abcd</element150> 
            </cityList> 
        </in> 
    </country.php> 
</root> 
```

并使用上面的 XPath 表达式，我们现在得到

```
Node    element0    Abu 
```

请注意，我们丢失了第二个和第三个结果，因为该`position()`函数正在以更高的优先级进行评估 - 与请求“给我前三个节点，现在给我所有以 'element '”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-29T10:24:18.577

我自己也遇到了同样的问题，并且对 Geoffs 的回答有一些问题，因为正如他清楚地描述的那样，由于优先级，它限制了在执行查询的其他部分之前返回的元素数量。

我的解决方案是`position() < 10`在应用我的其他条件后添加作为附加条件，例如：

```
//ElementsIWant[./ChildElementToFilterOn='ValueToSearchFor'][position() <= 10]/. 
```

请注意，我使用了两个单独的条件块。这将首先过滤掉符合我条件的元素，其次只取其中的 10 个。

# c# - 从两个不同的表中从数据库中获取数据

> ID：10107716
> 
> 赞同：1
> 
> 时间：2012-04-11T14:13:33.410
> 
> 标签：c#, asp.net, sql, sql-server-2008

我正在使用 C#(asp.net)。我在同一个数据库中有两个表（数据和详细信息）。

表“数据”

```
id | chap | unit |
  ----------------
  1| chap1|unit1 |
  2| chap2|unit2 |
  3| chap3|unit3 | 
```

表“详细信息”

```
id| code| num |
----------------
 1|abc  |2    |
 2|efg  |3    |
 3|hij  |1    | 
```

现在我想从 code="efg" 的 "num" 中获取一个值（在表 "details" 中）。并使用相同的值 (3) 通过 id 从表“data”中获取数据。我正在使用此代码。

```
OleDbConnection conn = new OleDbConnection(*** ...... *****); 
       OleDbCommand cmd;
       OleDbDataReader reader;
        String query = String.Format("select num from details where code="efg");
        cmd = new OleDbCommand(query, conn);
        reader = cmd.ExecuteReader();
        int num = int.Parse(reader.GetValue(0).ToString());

        query = String.Format("select chap from data where id={0}",num);
         cmd = new OleDbCommand("select lesson from data where id=3", conn);
        reader = cmd.ExecuteReader();

        Label1.Text = reader.GetValue(0).ToString(); 
```

但它显示错误。它显示“行/列不存在数据”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:16:47.537

您可以使用

```
SELECT d.chap, d.unit
FROM data d INNER JOIN details de
    ON d.id = de.num
WHERE de.code = 'efg' 
```

或者

```
SELECT d.chap, d.unit
FROM data d INNER JOIN details de
    ON d.id = de.num
   AND de.code = 'efg' 
```

更多：如果您使用的是 SQL-Server，请使用[SqlConnection](http://msdn.microsoft.com/it-it/library/system.data.sqlclient.sqlconnection%28v=vs.80%29.aspx)代替`OleDbConnection`.
更多：不要格式化您的查询加入字符串、数字、日期等；使用[SqlParameter](http://msdn.microsoft.com/it-it/library/system.data.sqlclient.sqlparameter%28v=vs.80%29.aspx)所以你不必担心类型和格式！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-11T14:21:06.763

或者您可以使用子查询

```
SELECT * FROM data INNER JOIN 
    (SELECT num FROM details WHERE code='efg') det
ON data.id = det.num 
```

# c# - 有没有比使用计数更优雅的方法来确定列表是否包含元素？

> ID：10107725
> 
> 赞同：1
> 
> 时间：2012-04-11T14:13:58.463
> 
> 标签：c#, list

目前，我使用以下过程来确定列表是否包含元素：

```
if (aList.Count > 0)
{
   //doStuff
} 
```

我问自己是否有更优雅的方法来找出是否有元素，而不使用比较。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T14:15:18.333

您可以使用 linq：

```
if (aList.Any())
{
   //doStuff
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-11T14:16:19.317

`Count`是最好的选择——`List<>`访问时间是意义的属性`O(1)`。

它也是描述性的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T14:25:22.383

我想如果这是困扰您的措辞并且您想要一种更具表现力的方式来描述它，您可以编写一个自定义扩展方法：

```
public static bool HasItems(this IList<T> list)
{
    return list.Count > 0;
} 
```

然后你会像这样使用它：

```
if (aList.HasItems())
{
   //doStuff
} 
```

这是个人喜好的问题，真的。`HasItems`例如，该术语听起来可能比听起来更直观`Count > 0`，甚至可能看起来更清晰（再次，主观地）。

但是，我个人不喜欢它是一种方法而不是属性。（如果 C# 增加对“扩展属性”的支持，我个人会*很*高兴。）也有例外，但对我来说，直觉上我希望一个属性只是给我关于某物状态的信息（希望[像 Oded 提到](https://stackoverflow.com/a/10107775/328193)`O(1)`的那样及时），而我会期望一种方法“做某事”并对对象的状态产生某种副作用。

同样，这完全取决于个人喜好。只是一个可供您使用的选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T14:22:59.357

您可以编写如下扩展方法

```
 public static Boolean IsEmpty<T>(this IEnumerable<T> sourceList)
    {
       return (sourceList==null) ? true : !sourceList.Any();
    } 
```

有关更多信息，请参阅此问题 -[使用 LINQ 检查列表是否为空](https://stackoverflow.com/questions/41319/checking-if-a-list-is-empty-with-linq)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T14:15:30.537

这已经是一个最优雅的解决方案。

可以使用（只是一个示例）`Count(x=>x..condition..);`linq 类型来找出满足某些指定条件的元素的计数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T14:30:40.983

我将此检查包含在扩展中（空检查和检查项目很麻烦 imo）

```
 public static bool IsAny<T>(this IEnumerable<T> item)
  {
            return item != null && item.Any();
  }

// Usage
listOfFoo.IsAny() 
```

# php - 如何在这个 PHP 脚本中使用 else 语句来回显 HTML 表格

> ID：10107732
> 
> 赞同：0
> 
> 时间：2012-04-11T14:14:14.277
> 
> 标签：php, html

此脚本运行良好，除非您将两个没有元标记的 URL 放入其中，否则它们在 html 中呈现都是错误的。

如何在其中使用 else 语句使其停止？

如果你想测试它去这里： http: [//php-playground.co.cc/testdir/metaex.php](http://php-playground.co.cc/testdir/metaex.php)

```
<form method="get" action=<?php echo "'".$_SERVER['PHP_SELF']."'";?> >
<p>URL of Competitor:</p> 
<textarea name="siteurl" rows="10" cols="50">
<?php //Check if the form has already been submitted and if this is the case, display the     submitted content. If not, display 'http://'.
echo (isset($_GET['siteurl']))?htmlspecialchars($_GET['siteurl']):"http://";?>
</textarea><br>
<input type="submit" value="Submit">
</form>
<div id="nofloat"></div>
<table>
<?php
function parseUrl($url){
    //Trim whitespace of the url to ensure proper checking.
    $url = trim($url);
    //Check if a protocol is specified at the beginning of the url. If it's not,    prepend 'http://'.
    if (!preg_match("~^(?:f|ht)tps?://~i", $url)) {
            $url = "http://" . $url;
    }
    //Check if '/' is present at the end of the url. If not, append '/'.
    if (substr($url, -1)!=="/"){
            $url .= "/";
    }
    //Return the processed url.
    return $url;
}
//If the form was submitted
if(isset($_GET['siteurl'])){
    //Put every new line as a new entry in the array
    $urls = explode("\n",trim($_GET["siteurl"]));
    //Iterate through urls
    foreach ($urls as $url) {
            //Parse the url to add 'http://' at the beginning or '/' at the end if not   already there, to avoid errors with the get_meta_tags function
            $url = parseUrl($url);
            //Get the meta data for each url
            $tags = get_meta_tags($url);
            //Check to see if the description tag was present and adjust output   accordingly
            echo (isset($tags['description']))?"<tr><td>Description($url)</td>  <td>".$tags['description']:"Description($url)</td><td>No Meta Description</td></tr>.";
    }
}
?>
</table> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:19:36.350

首先，删除该`.`行中的最后一个点：

`echo (isset($tags['description']))?"<tr><td>Description($url)</td> <td>".$tags['description']:"Description($url)</td><td>No Meta Description</td></tr>.";`

编辑：
我还没有看到这个，但你在这一行还有一个错误：
替换`".$tags['description']:"`为`".$tags['description'].":`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:47:35.640

多种方法可以做到这一点；你为什么不使用更简单的方法来做到这一点

```
$tags = NULL;
$tags = get_meta_tags($url);
if($tags)
echo "<tr><td>Description($url)</td><td>" .$tags['description']. "</td></tr>";
else 
echo "<tr><td>Description($url)</td<td>No Meta Description</td></tr>"; 
```

或者如果你想坚持你的代码试试这个，需要有真假的开始和结束标签；

```
echo (isset($tags['description'])) ? '<tr><td>Description($url)</td><td>' . $tags['description'] . '</td></tr>' : '<tr><td>Description($url)</td><td>No Meta Description</td></tr>'; 
```

# javascript - Javascript，仅对某个 div ID 执行函数

> ID：10107735
> 
> 赞同：-1
> 
> 时间：2012-04-11T14:14:23.990
> 
> 标签：javascript, function

我想知道如何使用 javascript（而不是 jquery）仅为具有 ID 的某个 DIV 执行函数。例如，在此 div 中查找 ID="content" 的特定文本。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:15:32.180

```
var elem = document.getElementById("content")
someFunction(elem) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:18:21.500

```
someFunction(elem) {
    if (elem.id != "content" || elem.tagName != "DIV")
        throw new Error("wrong element");
    return find(elem, text);
}
someFunction(document.getElementById("content")); // works
someFunction(document.body.firstChild); // throws error 
```

# sql-server - SQL server 中的日期部分函数

> ID：10107740
> 
> 赞同：1
> 
> 时间：2012-04-11T14:14:40.980
> 
> 标签：sql-server

我在下面有一个示例数据集：

```
Date
01/01/2010
01/02/2010
01/03/2010 
```

运行下面的查询给出：

```
SELECT
   DATEPART (MONTH, Date)  AS MONTH
FROM MYTABLE 
```

输出：

```
MONTH
1 
```

我想输出`mm/dd/yyyy`格式如下。

```
MONTH
01/01/2010 
```

有人可以调查一下吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:20:15.340

如果要将日期截断为一个月，可以使用：

```
select dateadd(m, datediff(m, 0, getdate()), 0) 
```

放置您的日期列而不是 getdate()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:20:21.523

如果您正在运行最新的 SQL Server 2012，则可以使用[`datefromparts`](http://msdn.microsoft.com/en-us/library/hh213228.aspx)函数来制作“每月第一天”的日期，如下所示：

```
SELECT
DATEFROMPARTS(YEAR(Date), MONTH(Date), 1) AS FIRST_OF_THE_MONTH
FROM MYTABLE 
```

# mysql - 根据行号更新表

> ID：10107744
> 
> 赞同：1
> 
> 时间：2012-04-11T14:14:46.703
> 
> 标签：mysql, sql

我有一个带有整数字段的表，用于控制记录的自定义显示顺序。

例子：

```
SET @rownumber = 0;

SELECT 
@rownumber:=@rownumber+1 AS rownumber, 
slides.displayorder 
WHERE 
active = 1 
ORDER BY displayorder ASC 
```

这个查询给了我一个有点像这样的结果：

```
 rownumber | displayorder
-----------+-------------
     1           2
     2           7 
     3           15
     4           50 
     5           80 
```

这可以正常工作，直到记录被删除/未批准（因此显示顺序存在差距）。

我想做的是运行更新查询，在`displayorder`删除记录后将列设置为 rownumber 变量的值。

给出这样的结果：

```
 rownumber | displayorder
-----------+-------------
     1           1
     2           2 
     3           3
     4           4 
     5           5 
```

是否有捷径可寻？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:43:09.637

这似乎完成了这项工作。

```
SET @rownumber = 0;
INSERT INTO slides (id, displayorder) 
SELECT a.id, a.rownumber 
FROM (SELECT id, (@rownumber:=@rownumber+1) AS rownumber FROM slides WHERE active = 1 ORDER BY displayorder ASC) AS a ON DUPLICATE KEY UPDATE displayorder = a.rownumber 
```

# java - 我如何在 java gui 中调整背景图像的大小？

> ID：10107752
> 
> 赞同：0
> 
> 时间：2012-04-11T14:15:08.700
> 
> 标签：java, swing, user-interface, jpeg

所以我制作了一个 gui，我有一个背景图片。我不知道如何将其设置为背景，所以任何帮助都会很好。一个解释也很好。另外，在我们将该图像作为背景之后，我们如何将图像调整为窗口大小。比如， `image.setSize(frame.getHeight(), frame.getWidth());` 但我不知道这是否可行。图像名称为 ABC0001.jpg，框架名称为 frame。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:29:10.180

要调整图像大小，您可以使用

```
 public void paintComponent(Graphics g) {
g.drawImage(img, 0, 0, getWidth(), getHeight(), this); // draw the image
} 
```

or you can use a componentlistener, implemented like:

```
 final Image img = ...;
        ComponentListener cl = new ComponentAdapter() {
            public void componentResized(ComponentEvent ce) {
                Component c = ce.getComponent();
                img = im1.getScaledInstance(c.getWidth(), c.getHeight(), Image.SCALE_SMOOTH); 
            }
        }; 
```

Image quality will degrade over time with the second solution, so it is recommended that you keep the original and the copy separate.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:35:38.393

创建一个扩展 JPanel 的类。让该类通过覆盖paintComponent来加载图像

```
class BackgroundPanel extends JPanel
{
    Image img;
    public BackgroundPanel()
    {
        // Read the image and place it in the variable img so it can be used in paintComponent
        img = Toolkit.getDefaultToolkit().createImage("ABC0001.jpg");
    }

    public void paintComponent(Graphics g)
    {
        g.drawImage(img, 0, 0, null); // draw the image
    }
} 
```

现在您有了这个类，只需将它添加到您的 JFrame（或任何您想要背景的地方）。

```
//create refrence if you want to add stuff ontop of the panel
    private BackgroundPanel backGroundPanel;

//constructor
    add(backGroundPanel, BorderLayout.CENTER); 
```

背景的大小将填满整个框架，因此无需缩放它，除非您希望它更小

# android - 在联系人上显示带有同步适配器的在线状态图标

> ID：10107758
> 
> 赞同：1
> 
> 时间：2012-04-11T14:15:26.983
> 
> 标签：android, android-contacts, android-syncadapter, user-presence

我尝试使用状态图标并为我的自定义用户显示状态。无论我做什么，我都遇到了插入失败错误或我的联系人上没有显示存在。

```
 values.put(StatusUpdates.DATA_ID, profileId);
   values.put(StatusUpdates.STATUS, user.getStatus());
   values.put(StatusUpdates.PROTOCOL, Im.PROTOCOL_CUSTOM);
   values.put(StatusUpdates.CUSTOM_PROTOCOL, CUSTOM_IM_PROTOCOL);
   values.put(StatusUpdates.IM_ACCOUNT, username);
   values.put(StatusUpdates.IM_HANDLE, user.getuserID());
   values.put(StatusUpdates.STATUS_RES_PACKAGE, context.getPackageName());
   values.put(StatusUpdates.STATUS_ICON, R.drawable.tray_icon);
   values.put(StatusUpdates.STATUS_LABEL, R.string.app_name);
   values.put(StatusUpdates.PRESENCE, StatusUpdates.AVAILABLE); 
```

有没有人有解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T07:39:09.597

有关包括对 2.2、权限等的特殊处理的指南，另请参阅：

[http://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-1](http://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-1)

[http://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-2](http://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-2)

他们的来源是可用的：

[https://github.com/c99koder/lastfm-android/](https://github.com/c99koder/lastfm-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:12:47.347

这条线看起来很可疑：

`values.put(StatusUpdates.DATA_ID, profileId);`

什么是profileId？如果指定，StatusUpdates.DATA_ID 应该是“数据”表中 IM 行的 _ID。在插入状态之前，您需要拥有该行。

通常的做法是在“数据”表中有一行，然后提供 IM_PROTOCOL 和 IM_HANDLE（与 Im.DATA 匹配），但在状态更新插入中未指定 DATA_ID。ContactsProvider 会自动将状态与数据行匹配，并为您保存查找查询。

此外，如果可以，请确保使用 bulkInsert 获取状态。这会加快很多事情。

# web-services - HTTP vs Webservices 计算文件传输的逻辑

> ID：10107764
> 
> 赞同：0
> 
> 时间：2012-04-11T14:15:38.263
> 
> 标签：web-services, http, file-upload, rpc

我想在客户端和服务器之间传输文件（上传+下载），这对我来说会更好吗？任何建议。

一种方法是使用http，客户端在请求中发送不同的参数，服务器根据算法结果发送或请求文件。

其他方式可能是，在 LAMP 服务器上实现 WebService，然后正确使用 RPC 来决定上传或下载。

我有网络服务的基本知识。

谢谢

# javascript - JSONP 回调和闭包/范围

> ID：10107765
> 
> 赞同：1
> 
> 时间：2012-04-11T14:15:38.937
> 
> 标签：javascript, jsonp, scope

我正在使用来自[http://www.microsofttranslator.com/dev/的 Microsoft Translation api（AJAX 版本）](http://www.microsofttranslator.com/dev/)

我在闭包和回调方面遇到了一些问题，我希望这段代码能够证明：

```
function translate(original){

    window.translateComplete = function(language) {

        if (language!="en"){
        alert(original +" "+language);
        }   
    }

    var windowsliveid = 'API_KEY_REMOVED';
    var el = document.createElement("script"); 
    el.src = 'http://api.microsofttranslator.com/V2/Ajax.svc/Detect'; 
    el.src += '?oncomplete=translateComplete'; 
    el.src += '&appId=' + windowsliveid; 
    el.src += '&text=' + escape (original); 
    document.getElementsByTagName('head')[0].appendChild (el);

}

translate("Au Revoir"); 
translate("Hola"); 
```

现在，我的回复是

```
Hola es
Hola fr 
```

`original`在回调有机会执行之前，变量被覆盖。

我该如何避免这种情况，以便它显示如下内容：

```
Hola es
Au revoir fr 
```

我试图在不使用 jQuery 和 when() 的情况下做到这一点

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:21:40.030

好吧，您对每个响应都使用相同的回调函数，因为`window. translateComplete`只能引用一个函数。所以每次调用`translate`都会被一个新函数覆盖`window.translateComplete`，这是一个闭包。

您可以为每个调用创建一个*具有不同名称*的新回调。这就是 jQuery 正在做的事情。

以最简单的形式：

```
var i = 0; // some running variable
function translate(original){

    var cb_name = 'cb' + (i++); // create a new name
    window[cb_name]= function(language) {
        delete window[cb_name]; // remove function to not pollute the global scope
        if (language!="en"){
            alert(original +" "+language);
        }   
    }

    var windowsliveid = 'API_KEY_REMOVED';
    var el = document.createElement("script"); 
    el.src = 'http://api.microsofttranslator.com/V2/Ajax.svc/Detect'; 
    el.src += '?oncomplete=' + cb_name; // use the dynamic name instead
    el.src += '&appId=' + windowsliveid; 
    el.src += '&text=' + escape (original); 
    document.getElementsByTagName('head')[0].appendChild (el);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:21:04.860

这是因为您在调用“translate”时重新分配了全局“translateComplete”函数。只能有一个函数绑定到“窗口”的单个属性，对吗？

（“原始”变量*没有*被改变；只是第一个函数，带有“Au Revoir”，在等待垃圾收集时被完全抛弃，漫无目的地漂浮。）

# extjs - 组合框无法聚焦并因此展开

> ID：10107770
> 
> 赞同：0
> 
> 时间：2012-04-11T14:15:52.813
> 
> 标签：extjs, combobox, callback, focus, jsonstore

两天来我一直在摆弄几行代码，但由于某种原因，我无法让它运行。

我想要的是：

用户从组合框中选择关系，随后必须从由第一个组合框过滤的人员列表中选择人员。如果只有一个人，必须直接选择。如果它有多个，我希望组合框展开并显示检索到的人员列表。听起来很简单。

onRelationContactSelect() 是通常在选择一个人时执行的代码。由于手动设置值时不会触发选择事件，我只是手动调用它。我在加载事件的回调中有代码，以确保从服务器检索数据。这是首先扩展或选择记录所必需的。

问题：

当我有一个记录（records.length == 1）时，一切都像魅力一样。当我有超过 1 条记录时，组合框 contactCombo 无法展开。我通过 ExtJs 内部代码调试了很多，原因是没有焦点。无论我如何尝试调用contactCombo.focus()，它都***不会***聚焦。因此它不会扩展。为了让它更烦人，我可以使用以下代码扩展另一个组合框：

```
function onRelationContactSelect() {
categorieStore.load({ callback: function(r, options, success) {
    //debugger;
    //categorieCombo.focus();
    //categorieCombo.expand();
}});
categorieCombo.focus();
categorieCombo.expand(); 
```

}

可以看出，我在回调*之外*调用了 focus() 和 expand() ，但 categorieStore 的模式是“本地”。categorieStore 中的数据是静态的，但仍从服务器检索。

编码：

```
function onRelatieSelect() {
contactStore.baseParams = {"relatieId": relatieCombo.value };
contactStore.load({callback: function(records, options, success) {
    if(records.length == 1) {
        contactCombo.setValue(records[0].get('Id'));
        onRelationContactSelect();
    } else {
        contactCombo.clearValue();
        contactCombo.focus();
        contactCombo.expand();
    }
}}); 

openTicketRelationLabel.show();
gridTicketRelatie.show();
ticketRelatieStore.load({ params: {relatieId:relatieCombo.value}});
SetRelatieInfo();
SetContractsInfo();
setSfHoursOsab();
showRelationNotifications(relatieCombo.value);
} 
```

我已经尝试了很长时间，但似乎我根本无法从回调处理程序内部和回调处理程序外部聚焦组合框，我还没有数据。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:37:52.020

在对两个不同的组合框进行沙盒处理后，我找到了解决方案。

结果证明解决方案很奇怪但很简单：

```
categorieCombo.on('select', function() {
subcategorieCombo.focus();
subcategorieStore.load({ callback: function(r, options, success) {
    subcategorieCombo.focus();
    subcategorieCombo.expand();
} }); 
```

负载前的焦点。

再次关注负载的回调。

除了需要关注两次之外，对这个解决方案唯一不满意的是，我不知道*为什么*会这样，但它为我解决了这个问题。

# java - 为什么Java不能解析这个图像？

> ID：10107771
> 
> 赞同：2
> 
> 时间：2012-04-11T14:15:55.953
> 
> 标签：java, image-processing

我正在尝试使用 ImageIO.read() 使用 1.7.0u JVM 加载此图像：

[http://taste-for-adventure.tablespoon.com/files/2012/02/2012-02-05-poll-hotdog-275w.jpg](http://taste-for-adventure.tablespoon.com/files/2012/02/2012-02-05-poll-hotdog-275w.jpg)

Chrome 对此没有任何问题，但 Java 会抛出以下异常：

```
java.lang.NullPointerException
    at java.awt.color.ICC_Profile.intFromBigEndian(ICC_Profile.java:1770)
    at java.awt.color.ICC_Profile.getNumComponents(ICC_Profile.java:1462)
    at sun.java2d.cmm.lcms.LCMSTransform.<init>(LCMSTransform.java:122)
    at sun.java2d.cmm.lcms.LCMS.createTransform(LCMS.java:76)
    at java.awt.color.ICC_ColorSpace.fromRGB(ICC_ColorSpace.java:222)
    at com.sun.imageio.plugins.jpeg.JPEGImageReader.setImageData(JPEGImageReader.java:635)
    at com.sun.imageio.plugins.jpeg.JPEGImageReader.readImageHeader(Native Method)
    at com.sun.imageio.plugins.jpeg.JPEGImageReader.readNativeHeader(JPEGImageReader.java:550)
    at com.sun.imageio.plugins.jpeg.JPEGImageReader.checkTablesOnly(JPEGImageReader.java:295)
    at com.sun.imageio.plugins.jpeg.JPEGImageReader.gotoImage(JPEGImageReader.java:427)
    at com.sun.imageio.plugins.jpeg.JPEGImageReader.readHeader(JPEGImageReader.java:543)
    at com.sun.imageio.plugins.jpeg.JPEGImageReader.readInternal(JPEGImageReader.java:986)
    at com.sun.imageio.plugins.jpeg.JPEGImageReader.read(JPEGImageReader.java:966)
    at javax.imageio.ImageIO.read(ImageIO.java:1448)
    at javax.imageio.ImageIO.read(ImageIO.java:1400) 
```

众所周知，Java 的图像阅读器很脆弱吗？是否有更强大的 Java 库来加载图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:21:34.327

嗨，请尝试以下方法，这在 java 1.6 中运行没有任何问题吗？它是否给出相同的例外？

```
import java.awt.BorderLayout;
import java.awt.Image;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class ShowImage {
    public static void main(String[] args) {
        JFrame frame = new JFrame("Debug Frame");
        frame.setSize(200, 200);
        frame.setLayout(new BorderLayout());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        Image image = null;
        JLabel label = null;

        try {
            image = ImageIO.read(new File("c:/scratch/hotdog.jpg"));
            label = new JLabel(new ImageIcon(image));
        } catch (IOException e) {
            label.setText("Image loading failed");
        }

        frame.add(label,BorderLayout.CENTER);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:58:07.443

不确定您要做什么，您的代码中到底有什么，以及哪一行抛出 NullPointerException 但以下在 Java 6 中有效：

```
String imageUrl = "http://taste-for-adventure.tablespoon.com/files/2012/02/2012-02-05-poll-hotdog-275w.jpg";
BufferedImage bi = ImageIO.read(new URL(imageUrl));
if(bi != null)
    System.out.println("Image Loaded!");
else
    System.out.println("Something's wrong..."); 
```

抱歉，我现在无法在 Java 7 中对其进行测试...

# c++ - 从二维数组 C++ 中提取行或列

> ID：10107782
> 
> 赞同：1
> 
> 时间：2012-04-11T14:16:47.340
> 
> 标签：c++, arrays

我想做一个函数，它接收一个二维数组并返回它的行（'which'）作为一个简单的数组。我写了这个：

```
int *row(int *array, int lines, int columns, int which)
{
    int result[columns];

    for (int i=0; i<columns; i++)
    {
        result[i] = *array[which][i];
    }
    return result;
} 
```

但是，在第 7 行中，我收到了以下错误：数组下标的无效类型 'int[int]'。知道如何正确执行此操作吗？我还尝试将二维数组作为数组处理，但没有成功。我是新手，所以请避免太高级的概念。

谢谢您的帮助！

更新：感谢您的帮助！现在我的代码看起来像：

```
int n;  //rows
int m;  //columns
int data[100][100];   
int array[100];

int *row(int *array, int rows, int columns, int which)
{
    int* result = new int[columns];
    for (int i=0; i<columns; i++)
    {
        result[i] = *array[which*columns+i];
    }
    return result;
    delete[] result;
}

int main()
{
    array=row(data, n, m, 0);
} 
```

我仍然在 main 中遇到错误：将 'int*' 分配给 'int [100]' 时的类型不兼容

现在可能是什么问题？我也不知道在哪里使用 delete[] 函数来释放数组。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:21:19.200

你不能这样做：

```
int result[columns]; 
```

您需要*动态*分配：

```
int* result = new int[columns]; 
```

* * *

此外，您的使用`array`看起来是错误的。如果`array`将是一个单一的指针，那么你想要：

```
result[i] = array[which*columns + i]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T14:20:56.130

“数组”是一维的。您可以通过以下方式访问索引为 [which][i] 的元素：array[which*columns + i]。还要删除星号，因为数组只是一个指针。

编辑：你也不能返回本地数组 - 你需要处理动态内存：

```
int* result = new int[columns]; 
```

然后特别注意释放这个内存。其他选择是使用 std::vector。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T14:30:02.350

有几个错误需要首先修复。

1.  您永远不应该从函数返回指向局部变量的指针。在上面的代码中，您试图返回一个指向“结果”内容的指针，它是一个局部变量。
2.  不能使用可变大小声明数组，在您的情况下是可变列。
3.  如果数组是一个二维数组，我认为这是你的意图，那么 array[which][i] 会给你一个 int。你不必取消引用它。

虽然我知道我没有遵守这里的发帖礼仪，但我建议你从一本好的教科书开始，掌握基础知识，遇到问题时来这里。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T14:30:54.233

数组的大小需要是编译时常量。

您可能应该使用`std::vector`（可能与 2D 矩阵类一起使用），而不是弄乱数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T14:33:07.213

您可以通过使用避免所有这些指针算术和内存分配`std::vector`

```
#include <vector>
#include <iostream>

typedef std::vector<int> Row;
typedef std::vector<Row> Matrix;

std::ostream& operator<<(std::ostream& os, const Row& row) {
  os << "{ ";
  for(auto& item : row) {
    os << item << ", ";
  }
  return os << "}";
}

Row getrow(Matrix m, int n) {
  return m[n];
}

Row getcol(Matrix m, int n) {
  Row result;
  result.reserve(m.size());
  for(auto& item : m) {
    result.push_back(item[n]);
  }
  return result;
}

int main () {
  Matrix m = {
    { 1, 3, 5, 7, 9 },
    { 2, 4, 5, 6, 10 },
    { 1, 4, 9, 16, 25 },
  };

  std::cout << "Row 1: " << getrow(m, 1) << "\n";
  std::cout << "Col 3: " << getcol(m, 3) << "\n";  
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-11T11:11:04.957

```
double *row(double **arr, int rows, int columns, int which)
{
double* result = new double[columns];
for (int i=0; i<columns; i++)
{
    result[i] = arr[which][i];

}
return result;
delete[] result; 
} 
```

这将返回该行。

# javascript - 将字符添加到值

> ID：10107786
> 
> 赞同：0
> 
> 时间：2012-04-11T14:16:56.110
> 
> 标签：javascript, jquery

我有一个 Table、TextArea 和 Button，当用户在 Textarea 中键入诸如“Hello World！”然后单击按钮时，我希望文本变为“Hello World！(*)”。

我如何使用我正在使用的这个 Jquery 代码来做到这一点：

```
$(document).ready(function () {
     $('#Button').click(function () {
         if ($("#MyTextArea").val().indexOf('|') > -1) {
             alert("The box has special characters. \nThese are not allowed.\n");
         } else {
             if ($.trim($("#MyTextArea").val()).length > 0) {
                 $('#MyTable tbody').append(
                 $('<tr/>', {
                     click: function () {
                         $(this).remove()
                     },
                     html: $("<td />", {
                         html: $("#MyTextArea").val(),
                         'data-sharp-id': 8
                     })
                 }));
                 return false;
             }
         }
     });
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:19:37.600

改变这个

```
html: $("#MyTextArea").val(), 
```

到

```
html: $("#MyTextArea").val() + "(*)", 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:27:08.587

那么文本框中是否允许使用特殊字符（ * ）？或者你想在不显示的情况下将 value+(*) 发送到服务器？

如果是前者那么

```
$('#Button').click(function () {
  var val =$("#MyTextArea").val(); 
  if (val.indexOf('(*)')==-1) $("#MyTextArea").val(val+"(*)");
  if (val.indexOf('|') > -1) {

.
.
. 
```

如果是后者，请参阅[@ManseUKs 解决方案](https://stackoverflow.com/a/10107820/295783)

# c# - 电子邮件：如何在 C#/System.Mail 中设置嵌入图像的名称？

> ID：10107788
> 
> 赞同：3
> 
> 时间：2012-04-11T14:17:00.673
> 
> 标签：c#, html-email, mime-message

我正在尝试从 C# 发送带有嵌入图像的电子邮件。当我在 Gmail 中收到这封电子邮件时，嵌入的图像没有正确的名称 - 相反，它们显示为“noname” - 请参见下面的屏幕截图

![](../Images/0913e2ad676d9e64a812c4e15fe5a59b.png)

以下是我将图像嵌入电子邮件的方式：

```
foreach (var objimage in images)
{
    var ms = new MemoryStream(objimage.ImageBytes);
    var lr = new LinkedResource(ms, MediaTypeNames.Image.Jpeg);
    lr.ContentId = "Photo_" + (++i).ToString();
    lstImages.Add(lr);

    body += string.Format("<img src='cid:{0}' alt='{1}' name='{1}' title='{1}' />", lr.ContentId, objimage.ImageName);
} 
```

看这个问题：[如何阻止电子邮件中的嵌入图像被 GMail 显示为附件？](https://stackoverflow.com/questions/4040358/how-to-stop-embedded-images-in-email-being-displayed-as-attachments-by-gmail)- 并比较我的电子邮件正文，看起来我需要将 Content-Type 字段设置为

内容类型：图片/jpeg；**name="我的图片名称.png"** "

而目前我的电子邮件看起来像这样：

```
----boundary_3_d581d04c-d294-4dc5-971e-785a678fbd12
Content-Type: image/jpeg
Content-Transfer-Encoding: base64
Content-ID: <Photo_1> 
```

知道如何使用 C# 和 System.Mail 做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T14:50:30.293

好吧，答案很简单：

```
lr.ContentType.Name = "my image name.jpg"; 
```

学分[发送带有嵌入图像的 html 电子邮件和与 C# 中的附件具有相同图像的纯文本](https://stackoverflow.com/questions/6573944/send-html-email-with-embedded-image-and-plain-text-with-same-image-as-attachment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:53:30.033

如果图像没有出现在 IE 中，请使用以下 linkedResource = new LinkedResource(src, MediaTypeNames.Image.Jpeg); //abbukmailer.com

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-11T14:54:31.390

对于附件

```
Content-Disposition: attachment; fileName=<Your file name> 
```

关于 RFC

对于链接资源必须是相似的

# c# - 部署c#win表单应用程序的兼容性问题

> ID：10107792
> 
> 赞同：2
> 
> 时间：2012-04-11T14:17:17.527
> 
> 标签：c#, winforms, deployment

在 CD 上部署 Windows 窗体应用程序时，我遇到了很多麻烦。我已经在 .NET 框架 2.0 中制作了应用程序，我想在安装盘中包含框架的设置。该应用程序将在 WindowsXP 上运行（该死，用户要求）。我尝试在 VS2010 中通过一键部署来部署它，但安装程序无法在 winXP 上运行。（运行应用程序需要 Error-.NET 框架 4.0）。有什么方法可以部署可以在 winXP(.NET 2.0)、win7(.NET 4.0)-32 位以及 64 位环境上运行的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:26:53.683

32 位应用程序将在 32 或 64 位操作系统上运行。

.NET 2.0 应用程序将在 .NET 2.0 或 .NET 4.0 上运行。

听起来您的安装程序是 .NET 4 的唯一依赖项。检查您在项目中设置的发布先决条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:36:47.770

Visual Studio 2010 不为部署项目提供 .Net 2.0 先决条件。MSDN 支持代表在[这个问题](http://social.msdn.microsoft.com/Forums/en/winformssetup/thread/d3eb2b4c-2af2-4ca6-a525-756d4d453298)中解释了（？）这个：

> 在 VS 2010 中，不支持将 .NET Framework 2.0 设置为先决条件。您可以改为设置 .NET 3.5 SP1 客户端配置文件。尽管您的应用程序仍然是针对 .NET 2.0 构建的，但 .NET 3.5 客户端配置文件是一个轻量级的 .NET 框架运行时，它支持运行基于 .NET 2.0 的应用程序。因此，Microsoft 从先决条件列表中删除了 .NET 2.0。

虽然在那个线程中有一个解决方案：

> 如果您从 VS2008 引导程序包文件夹中获取 .NET 2.0 包并将其复制到 VS2010 的相应位置，则可以正常工作。我在运行 Windows XP 且没有 .NET 的虚拟机中对其进行了测试。
> 
> 在 Vista 或 Windows 7 上，VS2008 软件包在这里：
> 
> c:\Program Files\Microsoft SDKs\Windows\v6.0A\Bootstrapper\Packages\DotNetFX（这是 .NET 2.0）
> 
> 在 Vista 或 Windows 7 上，VS2010 软件包在这里：
> 
> c:\Program Files\Microsoft SDKs\Windows\v7.0A\BootStrapper\Packages

有关更多详细信息，请参阅线程中的其他帖子。

# jsf - PrimeFaces 面板在更新时崩溃

> ID：10107795
> 
> 赞同：4
> 
> 时间：2012-04-11T14:17:27.983
> 
> 标签：jsf, jsf-2, primefaces

我不知道这是否可能仅使用 primefaces 和 JSF，但我有一个面板，它在 View Entry 上折叠。我可以打开具有触发面板更新的复选框的面板。

问题是当面板被 Ajax 更新时，面板又被折叠了。但我想保留面板当前的打开状态。它不应该关闭更新。这可能吗？

我使用 PF 3.2 和 JSF2.1

```
<p:fieldset style="width:200px;height:300px;overflow:auto;">

        <h:outputLabel value="Available Applications"
    style="font-weight: bold;font-size: 14px;" />
                <br />
                <br />
                <h:panelGroup>

                    <ui:repeat var="category"
                        value="#{epsEditController.subscriptionCategoryVOs}">

                        <p:panel header="#{category.applicationCategory.name}"
                            id="panell" toggleable="true" closable="false" toggleSpeed="500"
                            collapsed="true"
                            widgetVar="panel_#{category.applicationCategory.name}">

                            <h:panelGrid columns="2" border="0">
                                <h:outputLabel value="Select all"
                                    style="font-weight: bold;float:left;" />
                                <p:selectBooleanCheckbox value="#{category.allSelected}">
                                    <p:ajax event="change"
                                        listener="#{epsEditController.selectionChanged(category)}"
                                        update="panell" />
                                </p:selectBooleanCheckbox>
                            </h:panelGrid>

                            <ui:repeat var="subcat"
                                value="#{category.applicationSubcategoryVOs}">

                                <p:selectBooleanCheckbox value="#{subcat.selected}"
                                    title="#{subcat.applicationSubcategory.name}"
                                    itemLabel="#{subcat.applicationSubcategory.name}" />

                </ui:repeat>

                </p:panel>
            </ui:repeat>
        </h:panelGroup>
    </p:fieldset> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T16:10:49.457

每次更新后面板折叠的原因是在面板上使用了静态`collapsed="true"`。这可以通过以下两种方式之一修复

*   只是更新面板的内容而不是面板
*   通过 ajax 跟踪面板折叠状态的状态并将该状态用作`collapsed`属性的值

## 更新内容

通过将表单放在面板中并仅更新该表单，您可以有效地更新内容而不是面板。这确保只有表单被刷新并且面板状态保持不变。

```
 <p:panel header="#{category.applicationCategory.name}" id="panell"
                    toggleable="true" closable="false" toggleSpeed="500"
                    collapsed="true"
                    widgetVar="panel_#{category.applicationCategory.name}">

                    <h:form id="epsAppForm">

                        <h:panelGrid columns="2" border="0">
                            <h:outputLabel value="Select all"
                                style="font-weight: bold;float:left;" />
                            <p:selectBooleanCheckbox value="#{category.allSelected}">
                                <p:ajax event="change"
                                    listener="#{epsEditController.selectionChanged(category)}"
                                    update="@form" />
                            </p:selectBooleanCheckbox>
                        </h:panelGrid>

                       ........
                    </h:form>
                </p:panel> 
```

## 使用 EL 代替固定值

您可以将 EL 放在`collapsed`属性中而不是 fixed`collapsed="true"`中。就像是

```
collapsed="#{myBean.toggleStates[category.applicationCategory]}" 
```

然后，您可以通过 ajax 调用跟踪面板的状态

```
<p:ajax event="toggle" listener="#{myBean.toggleState(category.applicationCategory)" /> 
```

...'myBean' 代码：

```
Map<ApplicationCategory, boolean> toggleStates = new HashMap<>();

... prepopulate toggleStates on @init or something

public void toggleState(ApplicationCategory myCategory) {
    toggleStates.put(myCategory, !(toggleStates.get(myCategory));
} 
```

# arrays - 包含列表中每个单词的最小“ 拼字板”

> ID：10107799
> 
> 赞同：2
> 
> 时间：2012-04-11T14:17:53.157
> 
> 标签：arrays, algorithm, letter

我正在寻找一种能够构建字母数组（2D）的算法，我可以从中提取给定列表的每个单词。就像在拼字游戏中一样，单词可以相互交叉，可以是水平的、垂直的或对角的。当然有一些明显的解决方案，但这里的目标是让它尽可能小，这也意味着最大化交叉的数量。

我已经想到了一种使用大量拼字游戏网格的机器学习方法，无论是由人类还是由计算机制作，但我确信有一种更清洁的方法。

谢谢你的帮助。

PS：这是一个艺术项目，不是开玩笑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:28:51.530

那将是相当多的算法。我怀疑解决方案将涉及某种递归。

假设您有一个网格 G0 开始，所有方块都为空白，并且 f(G0) 是优化后的完整网格。

然后我会尝试：

对于第一个单词的每个可能位置 - 设置 G1 = 这个位置的这个单词的网格和所有其他方块空白 - 计算 G1 继续到下一个位置

要计算 G1，您可以递归调用 f(G1)。

如果你有一个很大的网格和很多单词，这将需要永远运行，因为它是一种浪费的算法，但对于典型的 Scrabble 板，我认为它在笔记本电脑上会足够快。

# ruby-on-rails - Ruby - html 标签不会转换为格式化标签

> ID：10107802
> 
> 赞同：0
> 
> 时间：2012-04-11T14:17:59.470
> 
> 标签：ruby-on-rails, ruby, string, string-formatting, html

我有一个简单的表单，用户可以在其中写一些文本，这些文本将发送到他的电子邮件。这个过程工作正常，但我对用户写的文本有疑问 - 在电子邮件中显示如下：

```
["sadgsdah\r\nsdh\r\ndsf\r\nh\r\nfdhdfhdfh\r\n\r\n\r\n\r\nfdh\r\ndf\r\njh"] 
```

为什么有括号和`\n`和`\r`字符？

在将带有内容的变量提供给电子邮件模板之前，我尝试执行以下操作：

> mess_body = params[:contact][:message].to_s.html_safe

但不幸的是，这对我没有帮助......我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:39:17.317

要将换行符转换为在 html 中正确显示，请使用[simple_format](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-simple_format)转换文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:23:46.420

首先

```
mess_body = params[:contact][:message] 
```

返回一个数组，而不是一个东西。这就是为什么你在输出周围得到 [" 和 "] 的原因。你可以得到这样的第一个元素：

```
mess_body = params[:contact][:message][0] 
```

此外 \n\r 是文本框的行尾。假设您发送的电子邮件是 HTML，则 \n\r 应替换为字符串中的 <br>

# matlab - Matlab：根据时间戳进行速度对齐

> ID：10107804
> 
> 赞同：0
> 
> 时间：2012-04-11T14:18:16.937
> 
> 标签：matlab, alignment, video-capture, timestamp

可能它是如此简单，但我是 Matlab 的新手，一般来说时间戳问题并不好。对不起！

我有两个不同的相机，每个相机都包含帧的时间戳。我将它们读入两个数组 TimestampsCam1 和 TimestampsCam2：

TimestampsCam1 包含 1500 条记录，时间戳以**微秒**为单位，如下所示：

```
1 20931160389
2 20931180407
3 20931200603
4 20931220273
5 20931240360 ... 
```

TimestampsCam2 包含 1000 条记录，时间戳以**毫秒**为单位，如下所示：

```
1 28275280  
2 28315443  
3 28355607  
4 28395771  
5 28435935 ... 
```

第一台摄像机首先开始捕捉，但比第二台摄像机稍晚结束。所以我需要做的是确切地知道第一台摄像机的帧在哪里同时（或几乎同时）被另一台摄像机捕获。换句话说，我想根据时间戳及时对齐两个数组（相机）。我想最后得到两个大小相同的数组，其中每个记录都与另一个数组中的相应记录进行速度对齐。

非常感谢大家！

山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:46:36.247

确保它们采用相同的测量单位，例如微秒

创建一个包含所有值（重复项除外）的索引，假设该索引的长度为 2400 条记录

通过将值（例如帧号）放在索引与时间戳匹配的位置来创建两个长度为 2400 的 NaN 向量

现在您有两个对齐的向量，它们带有 NaN，可以在需要的地方填充它们。

# android - 未安装应用程序

> ID：10107807
> 
> 赞同：-1
> 
> 时间：2012-04-11T14:18:35.300
> 
> 标签：android

我在 android 手机中测试我的应用程序。这是来自 Eclipse 的未签名应用程序导出。当我在手机中安装应用程序时，它会显示用户许可消息。然后最后我得到了一个未安装的消息应用程序。这是我的主要代码

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.z_enterprise.praywithme"
    android:versionCode="1"
    android:versionName="1.0" 
    android:installLocation="preferExternal" >

    <uses-sdk android:minSdkVersion="2" />
     <uses-permission android:name="android.permission.INTERNET" />
    <application
        android:icon="@drawable/appicon"
        android:label="@string/app_name" >
        <activity
            android:name=".main"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".about"
            android:label="@string/app_name" >
        </activity>

             <activity
            android:name=".favour"
            android:label="@string/app_name" >
        </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:22:55.470

检查设置>应用程序>标记/启用未知来源
标记答案，如果有用的话

# php - mysqli 构造函数返回 null

> ID：10107810
> 
> 赞同：1
> 
> 时间：2012-04-11T14:18:49.300
> 
> 标签：php, mysqli

我正在尝试使用单例模式编写一个 db util 类。我的问题是“连接”对象始终为空。连接设置正确。我可能做错了什么？另外，我对 php 开发比较陌生。我应该使用什么方法来找出问题所在？代码如下。

```
 class DBUtil {
        public $connection = NULL; //mysqli_connection object
        private static $instance = NULL;

        private function _constructor($conn){
            //$this->connection = mysqli_connect(TagMetroConfiguration::getConfigurationValueFor("db_servser_name"), TagMetroConfiguration::getConfigurationValueFor("db_username"), TagMetroConfiguration::getConfigurationValueFor("db_password"), TagMetroConfiguration::getConfigurationValueFor("db_name"));
            $this->connection = new mysqli("localhost", "root", "toor", "testdb");
        }

        public static function getInstance(){
            if(DBUtil::$instance == NULL){
                try{
                    DBUtil::$instance = new DBUtil();
                }catch(Exception $ex){
                    throw new Exception("Unable to create DB Instance");
                }
            }

            return DBUtil::$instance;
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:24:03.390

你的构造函数应该被命名`__construct`（注意两个下划线）。

此外，在您的构造函数中，您有一个参数`$conn`. 当您调用 时`new DBUtil()`，您没有提供该输入参数，因此它可能正在调用默认构造函数，而不是您的自定义构造函数。

如果您希望输入参数`$conn`是可选的，请尝试`__construct($conn = null)`.

或尝试将其称为`new DBUtil(null)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T14:25:46.997

```
private function _constructor($conn)   ?? 
```

这应该是

```
private function __construct($conn) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T14:38:43.303

应该有两个下划线`__`（`__construct`）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-11T14:28:22.150

你应该这样做：

```
class DBUtil {

        private static $instance;

        private function _construct(){
            $this->$instance = new mysqli("localhost", "root", "toor", "testdb");
        }

        public static function getInstance(){
            if(!isset(self::$instance){
                try{
                    self::$instance = new DBUtil();
                }catch(Exception $ex){
                    throw new Exception("Unable to create DB Instance");
                }
            }

            return self::$instance;
        } 
```

# android - 在 FrameLayout 中启动活动

> ID：10107811
> 
> 赞同：2
> 
> 时间：2012-04-11T14:18:54.963
> 
> 标签：android, android-intent, android-activity, android-framelayout

一旦用户单击在 FrameLayout 中呈现的按钮，我需要启动一个新活动。它呈现了我希望用户单击的按钮，但当然它现在没有做任何事情。

类的代码如下，但是我不能调用startActivity(intent)。

```
public class TopBarView extends FrameLayout {

    private ImageView mLogoImage;
    private Button mInfoButton;

    public TopBarView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public TopBarView(Context context) {
        super(context);
        init();
    }

    public TopBarView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    private void init() {
        LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view = inflater.inflate(R.layout.top_bar, null);

        mLogoImage = (ImageView) view.findViewById(R.id.imageLogo);
        mInfoButton = (Button) view.findViewById(R.id.infoButton);

        mInfoButton.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // We load & render the view for the information screen
//              Intent i = new Intent();
//              i.setClass(getContext(), MeerActivity.class);
//              startActivity(i);
            }
        });

        addView(view);
    }
} 
```

提前非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:34:05.890

改变 ：

```
public void onClick(View v) {
// We load & render the view for the information screen
//              Intent i = new Intent();
//              i.setClass(getContext(), MeerActivity.class);
//              startActivity(i);
} 
```

到 ：

```
public void onClick(View v) {
// We load & render the view for the information screen
    Intent i = new Intent();
    i.setClass(v.getContext(), MeerActivity.class);
    v.getContext().startActivity(i);
} 
```

注意：通过您正在使用的活动分配 onclicklistener 可能会更好，因此 TopBarView 更可重用，以防您想使用 MeerActivity 以外的其他东西作为目标。没什么大不了的。

# facebook - FQL 中的 Group by 子句

> ID：10107818
> 
> 赞同：2
> 
> 时间：2012-04-11T14:19:28.990
> 
> 标签：facebook

我正在尝试在查询中使用 group by 子句，

```
select actor_id
from stream
where source_id = me()
group by actor_id limit 15. 
```

但是我在 group by 中遇到了解析器错误。我们应该如何在 FQL 中使用 group by？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:27:54.827

Where 中没有`GROUP BY`子句支持`FQL`：

> FQL 可以处理简单的数学运算、基本的布尔运算符、AND 或 NOT 逻辑运算符以及 ORDER BY 和 LIMIT 子句。

您需要手动迭代结果以进行分组。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-11T12:25:31.207

尝试使用此方法..

```
 def group_by(h, col_name)
    vals = h.map {|hash| hash[col_name]}.uniq
    vals.collect {|val| h.map {|ha| ha  if (ha[col_name] == val)}.compact}.uniq
  end 
```

# gwt - GWT 中的 JDO，什么是 PMF？

> ID：10107822
> 
> 赞同：0
> 
> 时间：2012-04-11T14:19:52.053
> 
> 标签：gwt, jdo

我尝试从[https://developers.google.com/appengine/docs/java/datastore/jdo/creatinggettinganddeletingdata学习在 GWT 中使用 JDO](https://developers.google.com/appengine/docs/java/datastore/jdo/creatinggettinganddeletingdata)

在第一个示例代码中，有一行：

```
PersistenceManager pm = PMF.get().getPersistenceManager(); 
```

在这一行中，什么是 PMF？教程中没有答案，我想不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:21:42.990

PMF 是一个 java 类（持久化管理器工厂）

您可以在此处找到有关它的更多信息：[信息 PMF](http://db.apache.org/jdo/pmf.html)

你可以在这里找到源代码：[PMF 源代码](http://code.google.com/p/gwt-examples/source/browse/trunk/DemoUpload/src/org/gonevertical/upload/server/PMF.java)

# java - JavaFX 2.0 + FXML。从不同的任务更新场景值

> ID：10107829
> 
> 赞同：4
> 
> 时间：2012-04-11T14:20:18.330
> 
> 标签：java, javafx-2, fxml

我想从我用 FXMLoader 加载的场景中获取控制器。用例是：

1.  我的 JSON 管理器收到一个 JSON 对象
2.  我启动的任务显示了一个新场景，使用

    ```
    Parent p = FXMLLoader.load(getClass().getResource("foo.fxml"));
    Scene scene = new Scene(p);
    stage.setScene(scene); 
    ```

    在那之后，我有空的场景。

3.  现在我这样做是为了填充组件

    ```
    AnchorPane pane = (AnchorPane)((AnchorPane) scene.getRoot()).getChildren().get(0);
    for(Node node : pane.getChildren()){
        String id = node.getId();
        if(id.equals(NAME)){
             ((TextField)node).setText(value);
        }
    } 
    ```

我的问题，有没有更简单的方法来做到这一点？我有一个在 FXML 中指定的控制器

```
<AnchorPane id="AnchorPane" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="526.0" minWidth="356.0" prefHeight="526.0" prefWidth="356.0" 
xmlns:fx="http://javafx.com/fxml" fx:controller="bar.foo"> 
```

我想获取具有绑定值的实例（在这种情况下，TextField 称为名称）

提前致谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-11T15:10:56.070

1）您可以从以下位置获取控制器，`FXMLLoader`但不知道是否可以从`Scene`：

```
FXMLLoader fxmlLoader = new FXMLLoader();
Pane p = fxmlLoader.load(getClass().getResource("foo.fxml").openStream());
bar.foo fooController = (bar.foo) fxmlLoader.getController(); 
```

要`fooController`在代码的不同部分使用后者，您可以使用`Node#setUserData()`. 例如在上面的代码之后：

```
p.setUserData(fooController);
...
// after a while of app logic and code
bar.foo controller_of_p = (bar.foo) p.getUserData(); 
```

这提供了解决方法和实现目标的捷径。

2）如果您的节点有一个 id 那么您可以直接使用`Node#lookup()`它而不是构造一个 for-loop ：

```
TextField txt = (TextField) pane.lookup("#nodeId"); 
```

# java - 是否可以使用可在 Java 6 JVM 上运行的 Java 7 SDK 编译类文件？

> ID：10107831
> 
> 赞同：23
> 
> 时间：2012-04-11T14:20:22.523
> 
> 标签：java, javac, java-7, java-6

由于公共 Java 6 SE JRE 越来越接近它的 EOL（2012 年 11 月），我正在考虑将我的项目从 Java 6 移植到 Java 7。如果 Apple 提供 Java 7 JRE，这没什么大不了的对于 Mac OS X。但由于 Apple 不愿意这样做，我仍然必须支持只有 Java 6 JRE 的用户。

有没有办法用 Java 7 javac 编译 Java 6 兼容的二进制文件（类文件）？当然，我知道这样做时我不能使用新的 Java 7 功能。

感谢期待！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-11T14:24:08.120

这取决于。如果您的程序不使用新的 Java 7 语言扩展，那么您可以使用`-source 1.6`和`-target 1.6`选项运行 Java 编译器。但是如果你使用 Java 7 语言扩展那么`-source 1.6`会导致编译错误。

> 当然，我知道这样做时我不能使用新的 Java 7 功能。

这包括 Java 7 语言特性……以及对标准类库 API 的 Java 7 更改的依赖。另请注意，存在少量行为差异（也称为 API 错误修复）可能会导致代码在 Java 6 和 Java 7 上以不同方式运行。它们应在 Java 6 到 Java 7 转换文档中进行描述。

* * *

**更新**- 无论如何，这对您来说可能不再是问题，因为 Oracle 已经发布了适用于 Mac OSX 的 Java 7。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T14:24:18.833

我已经安装了jdk6。如果您查看 javac 的手册页：

```
Cross-Compilation Options
          By default, classes are compiled against the bootstrap and extension classes of the platform that javac shipped with. But javac also supports cross-compil‐
          ing, where classes are compiled against a bootstrap and extension classes of a different Java platform implementation. It is important to use -bootclasspath
          and -extdirs when cross-compiling; see Cross-Compilation Example below.

         -target version
            Generate class files that target a specified version of the VM. Class files will run on the specified target and on later versions, but not on earlier
            versions of the VM. Valid targets are 1.1 1.2 1.3 1.4 1.5 (also 5) and 1.6 (also 6). 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T14:27:58.663

是的，但在某些情况下不是。在 java 1.6 中，它们没有资源尝试、字符串切换或多捕获语句等。因此程序的这些部分将无法编译。但是java的思想是编译一次，到处运行；所以代码可以在旧的 JVM 上运行

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-30T18:32:54.140

Stephen C 的回答是正确的，但并不完整。如果您的 Java 7 程序使用 Java 7 语言功能，它们将无法在 Java 6 中编译，但请注意，一个开发人员在 Java 6 中编码和另一个在 Java 7 中编译时仍可能出现其他细微的错误。

以 java.sql.Driver 为例。在 Java 7 中，该接口获得了一个额外的方法。

**Java 7 开发人员** 该开发人员实现了 Driver 接口，并在实现的附加 Driver 方法上使用了“Override”注解。该程序作为 Java 6 程序编译得很好，因为 Java 6 编译器看到的类确实具有该方法并且代码被检入。将程序编译为 Java 6 并不意味着 Java 6 编译器会自动切换到使用 Java 6 源代码！

**Java 6 开发人员** Java 6 开发人员尝试构建 Java 7 开发人员提交的代码并得到编译错误，即使 Java 7 开发人员没有实现任何 Java 7 语言结构。

因此，即使您*可以将*其编译为 Java 6，我也建议您不要这样做。

# ios - 我的 iOS 应用程序中的变量？

> ID：10107832
> 
> 赞同：0
> 
> 时间：2012-04-11T14:20:25.150
> 
> 标签：ios, nsstring

我不能相信我在问这个，但我对这个可变的东西非常疯狂。

我想保存用户名信息。我将它们加载到我的视图中。在此之后，我将在单击按钮时获得信息。

这是我的代码：

```
@interface SelfViewController : UIViewController
{
    NSString *usernameString;
}

- (void)viewDidLoad
{
     usernameString = @"test";
}

- (IBAction)goToProfileButtonPressed:(id)sender
{
    NSLog(@"%@", usernameString); //CRASH BAD EXEC

} 
```

我做错了什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:41:51.340

将您的 .h 文件更改为：

```
@interface SelfViewController : UIViewController {
    NSString *usernameString;
}

@property (retain, nonatomic) NSString *usernameString; 
```

然后在你的 .m 文件中：

```
@synthesize usernameString;

- (void)viewDidLoad {
     self.usernameString = @"test";
}

- (IBAction)goToProfileButtonPressed:(id)sender {
    NSLog(@"%@", self.usernameString); // "self." can be omitted, but it is best practice not to
}

- (void)dealloc {
    [usernameString release];

    [super dealloc];
} 
```

问题是您分配`usernameString`给自​​动释放的字符串对象。到按钮被按下时，`usernameString`已经被释放并变成了垃圾内存。通过保留它（然后将其释放`-dealloc`以避免泄漏），您知道它不会过早释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:26:20.850

您需要合成 ivar 并将其添加为属性。（对于非 ARC 编译）：

在.h中：

```
@interface SelfViewController : UIViewController
{
    NSString *usernameString;
}    
@property (nonatomic, retain) NSString *usernameString; 
```

在他们中：

```
@synthesize usernameString; 
```

# c# - 检索 asp.net 会员安全答案

> ID：10107836
> 
> 赞同：1
> 
> 时间：2012-04-11T14:20:37.010
> 
> 标签：c#, asp.net, security, asp.net-membership

这个问题被讨论过很多次。他们中的大多数（99.99%）说没办法。

[Asp.net Membership-如何明确匹配安全答案？](https://stackoverflow.com/questions/4897625/asp-net-membership-how-to-match-security-answer-explicitly)

[MembershipProvider.GetPassword 算法](https://stackoverflow.com/questions/4323800/membershipprovider-getpassword-algorithm)

[如何在 .net sql 会员提供程序中获得安全问题答案？](https://stackoverflow.com/questions/2308068/how-to-get-security-question-answer-in-net-sql-membership-provider)

然而，有一个答案是肯定的。

[http://throughexperience.blogspot.com/2009/06/how-to-retrieve-memberships.html](http://throughexperience.blogspot.com/2009/06/how-to-retrieve-memberships.html)

所以我很困惑。哪一个是对的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T20:54:20.557

上一篇文章明确指出，只有将密码答案存储为“加密”或“清除”时，您才能解密密码答案。

换句话说，如果密码（和密码答案）存储为“散列”，则它不起作用。

默认情况下，passwordFormat 为“Hashed”，除非您明确提及。

[http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.passwordformat.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.passwordformat.aspx)

注意：如果您的密码存储为“加密”，请确保您使用相同的机器密钥进行解密。

# php - 将时事通讯复选框添加到 Magento (1.4.1.1) 一页结帐

> ID：10107837
> 
> 赞同：1
> 
> 时间：2012-04-11T14:20:40.183
> 
> 标签：php, magento

我从刚刚离开的开发人员那里接手了一个旧项目，我可以在完成这项工作时需要一些帮助。

**我正在尝试做的事情：**

Magento (1.4.1.1) 一页结帐，我需要添加一个时事通讯订阅复选框，如果它被选中，将订阅客户来宾，注册或以其他方式订阅时事通讯。

**我做了什么：**

我在计费阶段有一个复选框，我有一个模块可以通过观察事件`checkout_type_onepage_save_order`来工作，然后我像这样订阅客户：

```
public function list_subscribe(Varien_Event_Observer $observer) 
{
    $quote = $observer->getEvent()->getQuote();
    $customer = $quote->getCustomer();

    if (($customer instanceof Mage_Customer_Model_Customer))
    {
        Mage::getModel('newsletter/subscriber')->subscribeCustomer($customer);
    }
    else
    {
        Mage::getModel('newsletter/subscriber')->subscribe($email);
    }
} 
```

这很好用，但它订阅了所有访问结帐的人，我需要以某种方式检查该复选框是否在结帐过程中被勾选。这是让我感到困惑的部分。我对 Magento 很陌生，只需要完成这项工作，所以希望那里的好人可以帮助我精简我将如何去做这个看似简单的检查复选框？

非常感谢您的任何贡献。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:10:40.133

这个扩展可以满足你的要求，如果你想添加模块，这里是链接[http://www.emthemes.com/em-newsletter-optin.html](http://www.emthemes.com/em-newsletter-optin.html) 有很多扩展可以做到这一点并且它是免费的

# eclipse - 在其他软件中接收 Matlab/simulink UDP 块

> ID：10107838
> 
> 赞同：3
> 
> 时间：2012-04-11T14:20:45.467
> 
> 标签：eclipse, matlab, udp, xpc-target

我们可以将 Matlab/Simulink UDP 块发送到 eclipse 等其他软件吗？eclipse可以读取/使用它来构建android应用程序吗？我该怎么做？

当通过 xPC 目标的 UDP 发送块发送数据时，它以二进制形式打包我认为，我们如何在 Eclipse 中打包它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:27:49.670

我只是建立了一个 simulink 模型并使用 udp 发送块来发送数据。然后在eclipse中我写了一个客户端从服务器获取数据并将其从二进制转换为ascii

# mysql - 如何修复 InnoDB 脏页？

> ID：10107845
> 
> 赞同：8
> 
> 时间：2012-04-11T14:20:59.257
> 
> 标签：mysql, innodb

当我发出`SHOW GLOBAL STATUS;` `MySQL`命令时，我得到的行之一如下：

```
Innodb_buffer_pool_pages_dirty  28 
```

当我查看[文档](http://dev.mysql.com/doc/refman/5.0/en/server-status-variables.html#statvar_Innodb_buffer_pool_pages_dirty)时，我看到的只是：

> 当前脏页数。在 MySQL 5.0.2 中添加。

**我该如何解决这个问题（我假设脏页不是什么好事）？**

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-15T18:14:49.107

当数据库发生更改（更新/插入/删除）时，出现脏页是正常的。

当您更改一行时，MySQL 会在缓冲池中更新它，将页面标记为“脏”。更改也写入二进制日志，因此在崩溃的情况下，MySQL 将重播日志并且数据不会丢失。写入二进制日志是一种快速的仅追加（顺序）操作，而实际的页面更新使用较慢的随机写入。（这是在后台完成的）

当 MySQL 需要在缓冲池中加载新数据时，它会将脏页刷新到磁盘。所以，在 InnoDB 中有脏页是正常的——它是这样工作的，它是为了提高整体性能而做的。

但如果你真的想摆脱它们，请将[innodb_max_dirty_pages_pct](http://dev.mysql.com/doc/refman/5.0/en/innodb-parameters.html#sysvar_innodb_max_dirty_pages_pct)设置为 0

# javascript - Mousover 父 DIV 更改子 DIV 背景

> ID：10107846
> 
> 赞同：1
> 
> 时间：2012-04-11T14:21:02.127
> 
> 标签：javascript, mouseover, background-color

我有一个包含其他三个小 DIV 的父 DIV。当我将鼠标悬停或鼠标悬停在父 DIV 上时，我想更改三个子 DIV 的背景颜色。是否可以在 javascript 或 jquery 中执行此操作？

```
<div id="r1">  //Mousover

<div class="bx"></div>  //Change background color
<div class="bx"></div>  //Change background color
<div class="bx"></div>  //Change background color

</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T14:23:58.777

您不需要使用 javascript 来执行此操作，只需使用 CSS

```
div#r1:hover div.bx{ background-color: red; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:27:44.343

将此添加到您的 javascript：

```
$('#r1').hover(function(){ $(this).addClass('r1hovered'); }); 
```

并将其添加到您的 CSS 中：

```
.r1hovered .bx { background-color: red; } 
```

来源：[http ://api.jquery.com/hover/](http://api.jquery.com/hover/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:33:03.903

您也可以在 CSS 中执行此操作，

但据我了解你想要做的，这就是你如何在 JQuery 中实现这一点：

```
<div id="r1" onmouseover='changeBg(this);' onmouseout='revertBg(this);'>  //Mousover

    <div class="bx"></div>  //Change background color
    <div class="bx"></div>  //Change background color
    <div class="bx"></div>  //Change background color

</div>

<script type='text/javascript'>
    function changeBg(div){
       $(div).children('.bx').attr('background-color', '#AAAAAA');
    }
    function revertBg(div){
       $(div).children('.bx').attr('background-color', '#BBBBBB');
    }    <script> 
```

# java - Ubuntu 中的 Java 打印

> ID：10107862
> 
> 赞同：2
> 
> 时间：2012-04-11T14:21:34.810
> 
> 标签：java, ubuntu, printing

我正在开发一个小应用程序来在 Ubuntu 中打印数据，问题是我的应用程序在 Windows 中运行良好，使用：

```
PrintService service = PrintServiceLookup.lookupDefaultPrintService();

FileInputStream fis = new FileInputStream(myfile);

DocFlavor flavor = DocFlavor.INPUT_STREAM.AUTOSENSE;
DocPrintJob job = service.createPrintJob();

Doc doc = new SimpleDoc(fis, flavor, null);
job.print(doc, null);
fis.close(); 
```

但是在 Ubuntu 中，它只是不打印。对于我正在使用的打印 API，Linux 打印是否有任何特殊配置？还是我错过了其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:45:50.020

我认为，您的打印机在操作系统中不是默认安装的。检查您的“服务”是什么。您也可以从打印对话框中选择打印机，如下所示：

```
PrintRequestAttributeSet pras =
                new HashPrintRequestAttributeSet();
        DocFlavor flavor = DocFlavor.INPUT_STREAM.TEXT_PLAIN_UTF_8;
        PrintRequestAttributeSet aset =
                new HashPrintRequestAttributeSet();
        aset.add(MediaSizeName.ISO_A4);
        aset.add(new Copies(1));
        aset.add(Sides.ONE_SIDED);
        aset.add(Finishings.STAPLE);

        PrintService printService[] =
                PrintServiceLookup.lookupPrintServices(flavor, pras);
        PrintService defaultService =
                PrintServiceLookup.lookupDefaultPrintService();
        PrintService service = ServiceUI.printDialog(null, 200, 200,
                printService, defaultService, flavor, pras);
        if (service != null) {
            try {
                FileInputStream fis = new FileInputStream("c://test.txt");
                DocAttributeSet das = new HashDocAttributeSet();
                Doc doc1 = new SimpleDoc(fis, flavor, das);

                DocPrintJob job1 = service.createPrintJob();

                try {
                    job1.print(doc1, pras);
                } catch (PrintException e) {
                    e.printStackTrace();
                }
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            }
        } 
```

一些打印机不支持文本 DocFlavors，只支持图像。您也可以使用 OS 本机方法简单地打印 html 文件，如下所示：

```
if (Desktop.isDesktopSupported()){
    Desktop desktop = Desktop.getDesktop();
    if (desktop.isSupported(Desktop.Action.PRINT))
    {
        try {
            File html1 = new File("c://file1.html");
            desktop.print(html1);
            desktop.print(html2);
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

}

# database - Codeigniter 转义 - 从数据库中转义数据

> ID：10107863
> 
> 赞同：4
> 
> 时间：2012-04-11T14:21:38.293
> 
> 标签：database, codeigniter, quotes

请不要认为通过阅读问题来否定问题。因为我进行了很多搜索，而且我知道这个问题到处都被问了很多但是我不知道我没有得到正确的解决方案。

我希望数据在存储在数据库中和从数据库中检索时是安全的（来自 sql 注入和 xss ）。

我的 CI 配置设置：

```
$config['global_xss_filtering'] = FALSE; 
```

我的数据库添加查询：

```
$add_data['name'] = $this->db->escape($name);
.....
.....
$this->db->insert($this->table, $add_data); 
```

我的数据库视图查询：

```
$q =$this->db->select($this->fld);
$q = $this->db->where("$this->cond");
$q = $this->db->order_by($this->sortid, $this->sortby);
$q = $this->db->limit( $this->limit,$this->offset);
$ret=$q->get()->result_array(); 
```

**我的问题是：**

> DB值有单引号：例如。如果 $name = abc 在 DB 它是：'abc'

**问题 ：**

> 如果我想显示带引号的数据如何在不带引号的情况下显示它们。

**加**

> 如何防止在数据库中添加单引号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:34:58.423

使用时不需要转义数据`CI insert`。活动记录会自动为您转义值。在您的示例中：

```
/* $add_data['name'] = $this->db->escape($name); - not need */
$add_data['name'] = $name;
.....
.....
$this->db->insert($this->table, $add_data); 
```

阅读**[CI 活动记录](http://codeigniter.com/user_guide/database/active_record.html)**。每个功能都有解释。还有哪些需要转义，哪些不需要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:40:49.580

活动记录自动转义值。对于显示不带引号的字符串，您可以使用字符串助手。

```
$string="Joe's \"dinner\"";
$string=strip_quotes($string); //results in "Joes dinner" 
```

它在[用户指南](http://codeigniter.com/user_guide/helpers/string_helper.html)中。

# sql - 将行数据转换为列 Access 07 不使用 PIVOT

> ID：10107866
> 
> 赞同：1
> 
> 时间：2012-04-11T14:21:45.470
> 
> 标签：sql, ms-access, ms-access-2007

我正在学校工作一个学期。我不太习惯使用 SQL，我正在努力掌握它....

我的主管给了我一个用户任务，我需要在其中获取行数据并制作列。我们使用交叉表向导并自动创建 SQL 来获得我们需要的东西。

基本上，我们有一个这样的表：

```
ReqNumber       Year       FilledFlag(is a checkbox)      FilledBy

    1          2012               (notchecked)            ITSchoolBoy
    1          2012               (checked)               GradStudent
    1          2012               (notchecked)            HighSchooler
    2        etc, etc. 
```

用户想要的是列出所有请求编号以及检查的内容

我们的自动透视代码为我们提供了所有 FilledBy 选项（总共有 9 个）作为列标题，并按 reqnumber 对其进行分组。

如果没有枢轴，你怎么能做到这一点？我想解决这个问题。我能找到的最近的是：

```
SELECT
   SUM(IIF(FilledBy = 'ITSchoolboy',1,0) as ITSchoolboy,
   SUM(IIF(FilledBy = 'GradStudent',1,0) as GradStudent, etc.
FROM myTable 
```

有人可以帮我解释一下吗？给我指个向导的方向？我一直在寻找一天中最好的部分，即使我是学生，我认为这不会被笑太久。但我真的很想知道！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:33:43.870

如果您按 ReqNumber 分组，我认为您老板的建议可能会奏效。

```
SELECT
   ReqNumber,
   SUM(IIF(FilledBy = 'ITSchoolboy',1,0) as ITSchoolboy,
   SUM(IIF(FilledBy = 'GradStudent',1,0) as GradStudent,
   etc.
FROM myTable
GROUP BY ReqNumber; 
```

另一种方法是加入多个子查询。此示例引入了您的 2 个类别。如果您需要将其扩展到 9 个类别，那么您将有大量的加入。

```
SELECT
    itsb.ReqNumber,
    itsb.ITSchoolboy,
    grad.GradStudent
FROM
    (
        SELECT
           ReqNumber,
           FilledFlag AS ITSchoolboy
        FROM myTable
        WHERE FilledBy = "ITSchoolboy"
    ) AS itsb
    INNER JOIN
    (
        SELECT
           ReqNumber,
           FilledFlag AS GradStudent
        FROM myTable
        WHERE FilledBy = "GradStudent"
    ) AS grad
    ON itsb.ReqNumber = grad.ReqNumber 
```

请注意，我并不是建议您*使用*这种方法。但是，既然您询问了枢轴方法的替代方案（有效）......这是一个。请继续关注，以防其他人提供更简单的替代方案。:-)

# vb.net - EWS 连接问题 - 401 未经授权

> ID：10107872
> 
> 赞同：0
> 
> 时间：2012-04-11T14:22:24.493
> 
> 标签：vb.net, exchangewebservices

尝试使用 EWS 和 VB.Net 连接到 Exchange 2010 SP1。当我尝试使用自动发现时，它工作得很好。问题是它连接到我的本地交换邮箱，这不是我需要的。我们有一个 Exchange 管理员设置的邮箱，所有程序员都可以连接到该邮箱（称为 TestMailbox）。所以当我这样做时：

```
exchange.AutoDiscoverUrl("TestMailbox@MyDomain.com") 
```

它连接到我的本地邮箱而不是“TestMailbox”。我从我们的管理员那里获得了 TestMailbox NT 帐户的密码，并尝试了以下所有方法：

```
exchange.Credentials = New WebCredentials("TestMailbox@MyDomain.com", "Password")      

exchange.Credentials = New WebCredentials("TestMailbox", "Password") 

exchange.Credentials = New WebCredentials("TestMailbox", "Password","MyDomain")

exchange.Credentials = New WebCredentials("MyDomain\TestMailbox", "Password") 
```

他们都失败了。假设我在本地网络上的 NT 用户名是“用户”，我什至尝试过：

```
exchange.Credentials = New WebCredentials("User@MyDomain.com", "MyPassword") 
```

它失败了。我一直在使用以下[链接](http://msdn.microsoft.com/en-us/library/ff597939%28v=exchg.80%29.aspx)作为参考。

编辑 1：我已经用 NetworkCredential 而不是 WebCredential 尝试了上述所有方法，但它仍然失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:26:09.067

我们想通了。TestMailbox 和 ProdMailbox 域帐户都设置为仅允许某些计算机在本地登录。

# url - python：如何获取一个网址？（带有不正确的响应标头）

> ID：10107874
> 
> 赞同：0
> 
> 时间：2012-04-11T14:22:28.557
> 
> 标签：url, python-3.x

我想在 python 中构建一个需要获取 url 的小脚本。虽然服务器有点蹩脚，但它回复纯 ASCII 而没有任何标题。

当我尝试：

```
import urllib.request
response = urllib.request.urlopen(url)
print(response.read()) 
```

我收到一个`http.client.BadStatusLine: 100`错误，因为这不是格式正确的 HTTP 响应。

是否有另一种方法来获取 url 并获取原始内容，而无需尝试解析响应？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:44:06.290

如果没有更多信息，很难回答您的直接问题；不确切知道有问题的（网络）服务器是如何损坏的。

也就是说，您可以尝试使用一些较低级别的东西[`socket`](http://docs.python.org/py3k/library/socket.html) ，例如。这是一种方式（python2.x 风格，未经测试）：

```
#!/usr/bin/env python
import socket                                                                  
from urlparse import urlparse                                                  

def geturl(url, timeout=10, receive_buffer=4096):                              
    parsed = urlparse(url)                                                     
    try:                                                                       
        host, port = parsed.netloc.split(':')                                  
    except ValueError:                                                         
        host, port = parsed.netloc, 80                                         

    sock = socket.create_connection((host, port), timeout)                     
    sock.sendall('GET %s HTTP/1.0\n\n' % parsed.path)                          

    response = [sock.recv(receive_buffer)]                                     
    while response[-1]:                                                        
        response.append(sock.recv(receive_buffer))                             

    return ''.join(response)  

print geturl('http://www.example.com/') #<- the trailing / is needed if no 
                                            other path element is present 
```

这是一个 python3.2 转换的尝试（例如，如果将响应写入文件，您可能不需要从字节解码）：

```
#!/usr/bin/env python
import socket                                                                  
from urllib.parse import urlparse                                                  

ENCODING = 'ascii'

def geturl(url, timeout=10, receive_buffer=4096):                              
    parsed = urlparse(url)                                                     
    try:                                                                       
        host, port = parsed.netloc.split(':')                                  
    except ValueError:                                                         
        host, port = parsed.netloc, 80                                         

    sock = socket.create_connection((host, port), timeout)                     

    method  = 'GET %s HTTP/1.0\n\n' % parsed.path
    sock.sendall(bytes(method, ENCODING))

    response = [sock.recv(receive_buffer)]                                     
    while response[-1]:                                                        
        response.append(sock.recv(receive_buffer))                             

    return ''.join(r.decode(ENCODING) for r in response)

print(geturl('http://www.example.com/')) 
```

！

**编辑：**您可能需要调整您在请求中输入的内容，具体取决于相关的 Web 服务器。Guanidene 的出色答案提供了多种资源来指导您走上这条道路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:41:13.357

在这种情况下，您需要做的是`send a raw HTTP request using sockets`.
在这种情况下，您需要使用[`socket`](http://docs.python.org/library/socket.html)python 模块进行一些低级网络编程。（网络套接字实际上将服务器发送的所有信息返回给您`as it as`，因此您可以根据需要相应地解释响应。例如，HTTP 协议根据标准 HTTP 标头 - GET、POST、HEAD 等来解释响应。高级模块`urllib`对您隐藏此标头信息并仅返回数据。）

您还需要了解一些有关 HTTP 标头的基本信息。对于您的情况，您只需要了解`GET`HTTP 请求。在此处查看其定义 - [http://djce.org.uk/dumprequest](http://djce.org.uk/dumprequest)，在此处查看它的示例 - [http://en.wikipedia.org/wiki/HTTP#Example_session](http://en.wikipedia.org/wiki/HTTP#Example_session)。（如果您希望捕获从浏览器发送的 HTTP 请求的实时跟踪，则需要像[wireshark](http://www.wireshark.org/)这样的数据包嗅探软件。）

一旦您了解了有关`socket`模块和的基础知识`HTTP headers`，您就可以通过这个示例 - [http://coding.debuntu.org/python-socket-simple-tcp-client](http://coding.debuntu.org/python-socket-simple-tcp-client)告诉您如何通过套接字将 HTTP 请求发送到服务器和读回它的回复。[您也可以在 SO 上](https://stackoverflow.com/questions/5755507/creating-a-raw-http-request-with-sockets)参考这个不清楚的问题。

（您可以谷歌`python socket http`获取更多示例。）

（提示：我不是 Java 爱好者，但是，如果你在 python 下没有找到足够令人信服的例子，请尝试在 Java 下找到它，然后将其相应地翻译成 python。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:25:05.327

```
urllib.urlretrieve('http://google.com/abc.jpg', 'abc.jpg') 
```

# javascript - NodeJS - 任何电子商务解决方案？

> ID：10107878
> 
> 赞同：8
> 
> 时间：2012-04-11T14:22:44.050
> 
> 标签：javascript, node.js, content-management-system, e-commerce

我想知道，有没有开源的 NodeJS 灵魂？我的意思是准备好生产，托管的网上商店 cms？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:12:04.560

目前，我们可以使用 express.js 之类的框架来更轻松地创建应用程序。但是期待像 magento 这样的电子商务解决方案，它还不够成熟，我认为有很多人和公司正在使用 node.s 制作电子商务解决方案，就像 Jakub Oboza 所说的那样，它可能会出现 2 或 3 年 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:43:58.163

它现在是0.6.18，离稳定还很远，平台还很年轻，你没有很多成熟的软件。预计在 2-3 年内会更多:)。

# sql-server-2008 - 几分钟后终止 SQL Server 事务

> ID：10107888
> 
> 赞同：0
> 
> 时间：2012-04-11T14:23:05.943
> 
> 标签：sql-server-2008, transactions

有没有办法配置 SQL Server 2008 来终止一个事务，如果它既没有被取消也没有提交一段时间？（比如说电源、网络连接或任何在打开计算机时被切断的东西。）

要么是在一些定义的规则集之后自动发生，要么是通过创建和调用命令行应用程序来查询 SQL Server 的活动事务+它们运行的​​时间......然后指示 SQL Server 关闭那些“冻结的” ”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:36:44.197

从[这里](http://www.sqlservercentral.com/Forums/Topic1080497-5-2.aspx#bm1084557)引用 Gail Shaw 的话：

> SQL Server 不会使查询超时，连接的应用程序（在本例中为查询分析器）会。

无论您使用哪种技术进行连接（ADO 等），都可能具有连接超时和执行超时属性，您可以在调用代码中更改这些属性。默认值通常为 30 秒。

你可能*会*在一个循环中包装这样的东西来杀死每个有问题的 spid：

```
select datediff(second, last_batch, getdate()) as secs_running, *
from sys.sysprocesses
where hostname != ''
    and open_tran = 1 
```

关于如何最好地找到哪些进程是“安全的”可以杀死的，可能会有很多意见，我当然会有点担心根据任意时间跨度自动做这样的事情。我也不确定在此过程中完成的任何数据更改都可以[保证被回滚](https://stackoverflow.com/questions/161960/sql-server-query-question-if-i-stop-a-long-running-query-does-it-rollback)。

# spring - 为什么需要自动装配？自动装配概念的解释是什么？

> ID：10107891
> 
> 赞同：2
> 
> 时间：2012-04-11T14:23:10.143
> 
> 标签：spring, spring-mvc, spring-security

为什么需要自动装配？自动装配概念的解释是什么？

`@autowired`[Spring 框架](https://en.wikipedia.org/wiki/Spring_Framework)中的注释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:26:53.127

不需要自动装配，只是方便。

这意味着，如果您有一个需要一个的属性，`InterfaceA`并且在 Spring 中声明了一个类型为 的 bean `InterfaceA`，而不是使用 XML 手动“连接”关系（将 bean 引用设置为另一个的属性），您可以让Spring为你做接线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-26T23:20:35.003

这是初学者的常见问题。由于 bean 是使用[DI 注入](https://en.wikipedia.org/wiki/Dependency_injection)的（setter 注入、构造函数注入），为什么我们需要自动装配？自动布线也做同样的事情，对吧？

答案是，它使您免于编写更多代码。

1.  如果**使用 XML 文件**，使用***`autowire`属性***可以避免在 bean 定义中编写**接线代码。**

    请看下面的代码。

    ***不带自动连线的***配置代码：

     **```
     <bean id="employee" class="com.Employee">
         <property name="name" value="Dexter"></property>
     </bean>

     <bean id="employeeService" class="com.EmployeeService">
         <property name="employee" ref="employee"></property>
     </bean> 
    ```

    ***自动接线的***配置代码：

     **```
     <bean id="employee" class="com.Employee">
         <property name="name" value="Dexter"></property>
     </bean>

     <bean id="employeeService" class="com.EmployeeService" autowire="byName" /> 
    ```

    请注意，我们不必编写任何内容来引用 EmployeeService 的属性，即 Employee。但还是被注入了。 ***自动装配使容器可以搜索 bean 配置并在 bean 之间进行协作，而开发人员没有特别提及这些。******* 
*****   如果我们**使用 annotation**，甚至我们不必在 XML 文件中写任何东西，包括 this`autoware="byName"`等。***只需`@Autowired`在 bean 的 setter/field/constructor***上就足够了。****

# gridview - MVC Devexpress Gridview 禁用特定列隐藏

> ID：10107899
> 
> 赞同：0
> 
> 时间：2012-04-11T14:23:39.703
> 
> 标签：gridview, devexpress

如何在自定义窗口中禁用 MVC Devexpress Gridview 特定列隐藏或设置不允许在自定义窗口中隐藏的最小列数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T20:33:45.577

将**MVCxColumn.Settings.AllowDragDrop**属性设置为“ **DefaultBoolean.False** ”以防止列移入/移出自定义窗口：

```
@Html.DevExpress().GridView(
    settings => {
        ...
        settings.Columns.Add(...).Settings.AllowDragDrop = DefaultBoolean.False;
    }).Bind(Model).GetHtml() 
```

# c++ - VS2008 中的访问冲突，但在 VS2002 中没有

> ID：10107900
> 
> 赞同：0
> 
> 时间：2012-04-11T14:23:44.777
> 
> 标签：c++, visual-studio-2008, visual-c++

我在 Visual Studio 2008 中面临“访问冲突错误”，但相同的代码在 VS2002 中运行良好。我已经验证了项目设置都是相同的。我认为 VS2008 中指针的处理有所不同。我想我错过了一些东西。

任何人都可以帮忙吗？

下面给出的示例代码。

```
schemap = (typ_ty_schema *)((dbs_ty_obj *)obj)->f_schema; 
```

执行此行后，值没有被分配给 schemap 但是我可以看到值`((dbs_ty_obj *)obj)->f_schema`

请帮忙。

尼克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:29:18.617

我认为这与处理不同的指针没有任何关系。这可能只是您代码中的一个错误，由于某种原因（不同的代码生成、内存分配等）隐藏在 VS2002 生成的代码中。

# c++ - 从 Unix 本地套接字和缓冲区大小接收

> ID：10107902
> 
> 赞同：0
> 
> 时间：2012-04-11T14:23:51.907
> 
> 标签：c++, sockets, unix

我在使用 unix 本地套接字时遇到问题。在读取比我的临时缓冲区大小长的消息时，请求花费的时间太长（可能无限期）。

**经过一些测试后添加：** 在 ::recv 处冻结仍然存在问题。当我向 UNIX 套接字发送 (1023*8) 字节或更少时 - 一切正常，但是当发送超过 (1023*9) 时 - 我在 recv 命令上冻结。 **也许它的 FreeBSD 默认 UNIX 套接字限制或 C++ 默认套接字设置？谁知道？**

* * *

## 我做了一些额外的测试，我 100% 确定它在执行 ::recv 命令时的最后第 9 次迭代中“冻结”，当尝试读取 >= (1023*9) 字节长的消息时。（第 8 次迭代进展顺利。）

**我在做什么：** 这个想法是从一个套接字读取一个 do/while 循环

```
::recv (current_socket, buf, 1024, 0); 
```

并检查`buf`特殊符号。如果没有找到：

1.  将缓冲区的内容合并到`stringxxx += buf;`
2.  bzero 温度缓冲区
3.  继续 ::recv 循环

**如何解决请求在 while 循环中花费太长时间的问题？**

有没有更好的方法来清除缓冲区？目前，它是：

```
 char buf [1025];
 bzero(buf, 1025); 
```

但我知道 bzero 在新的 c++ 标准中已被弃用。

**编辑：** * *“为什么需要清理缓冲区**

我在这个问题的评论中看到了问题。如果在读取缓冲区的下一次（最后一次）迭代中没有清理缓冲区，它将包含消息第一部分的“尾部”。

例子：

```
 // message at the socket is "AAAAAACDE"
 char buf [6];
 ::recv (current_socket, buf, 6, 0); // read 6 symbols, buf = "AAAAAA"
 // no cleanup, read the last part of the message with recv
 ::recv (current_socket, buf, 6, 0); 
 // read 6 symbols, but buffer contain only 3 not readed before symbols, therefore
 // buf now contain "CDEAAA" (not correct, we waiting for CDE only) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:25:55.847

而不是`bzero`，您可以使用

```
memset(buf, 0, 1025); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:30:30.090

这是两个不同的问题。由于代码中的错误，长时间可能是无限循环，与清除缓冲区的方式无关。事实上，您不需要清除缓冲区；*接收*返回读取的字节数，因此您可以扫描缓冲区中的 SPECIAL_SYMBOL 直到该点。

如果您粘贴代码，也许我可以提供帮助。更多的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T14:41:03.010

只是为了澄清：`bzero`在 C++ 11 中不被弃用。相反，它从未成为*任何*C 或 C++ 标准的一部分。C 始于`memset`20 多年前。对于 C++，您可能会考虑使用`std::fill_n`代替（或仅使用`std::vector`，它可以自动填零）。再说一次，我不确定在这种情况下是否有充分的理由对缓冲区进行零填充。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T20:00:01.747

当您`recv()`进入无限循环时，这可能意味着它在迭代上没有任何进展（即，您总是立即获得零大小的短读，因此您的循环永远不会退出，因为您没有获得任何数据）。对于流套接字，大小为零的 a意味着远程端已断开连接（当输入位于 EOF 时，`recv()`它类似于从文件中获取零字节），或者至少它已关闭发送通道（即`read()`专门用于 TCP）。

检查您的 PHP 脚本是否实际发送了您声称发送的数据量。

添加一个小的（无意义的）示例以在循环中正确使用 recv() ：

```
char buf[1024];
std::string data;
while( data.size() < 10000 ) { // what you wish to receive
    ::ssize_t rcvd = ::recv(fd, buf, sizeof(buf), 0);
    if( rcvd < 0 ) {
        std::cout << "Failed to receive\n";  // Receive failed - something broke, see errno.
        std::abort();
    } else if( !rcvd ) {
        break; // No data to receive, remote end closed connection, so quit.
    } else {
        data.append(buf, rcvd); // Received into buffer, attach to data buffer.
    }
}

if( data.size() < 10000 ) {
    std::cout << "Short receive, sender broken\n";
    std::abort();
}

// Do something with the buffer data. 
```

# javascript - 在 Internet Explorer 的 Click 事件中从 div 获取类

> ID：10107903
> 
> 赞同：0
> 
> 时间：2012-04-11T14:23:52.880
> 
> 标签：javascript, internet-explorer, class, click

我在文档上定义了一个单击函数，单击时我想知道目标是否包含一个“下拉”类，该函数应该返回。所以这在 Firefox 中运行良好：

```
$(document).click(function(e){  
    if (e.target.classList.contains('dropdown'))
        return;

    //Other work here;
}); 
```

但不知何故 IE 显示`e.target`为`null`. 在阅读了一些 IE 没有`target`点击事件但`srcElement`要在两种浏览器中工作的地方之后，我需要将其更改为：

```
(event.target || event.srcElement).id //etc 
```

但是我需要获取类属性，有人知道如何获取`srcElement`IE 中“不使用 JQUERY”的类吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:26:28.227

为什么不使用 JQuery API 函数 hasClass？

你应该可以更换

```
if(e.target.classList.contains('dropdown')) 
```

和

```
if($(this).hasClass('dropdown')) 
```

~~~~~~~~~~~~编辑~~~~~~~~~~

就此而言，如果我了解您在做什么，也许您应该重组整个事件处理程序（除非您出于效率原因这样做，有时人们会捕获更大的异常然后弄清楚点击了什么）

```
$('.dropdown').each(function () {
    //Do some action
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:26:54.170

jQuery来拯救：

```
$(document).click(function(e){  
   if($(this).hasClass("dropdown"))
      return    
    //Other work here;
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:27:51.480

```
$target = $(e.target);

if($target.hasClass("dropdown"))
    return; 
```

# python - 如何创建用于比萨（xhtml2pdf）的布局？

> ID：10107911
> 
> 赞同：0
> 
> 时间：2012-04-11T14:24:12.337
> 
> 标签：python, css, pdf, pisa, xhtml2pdf

我正在使用比萨创建 PDF。我试图转换为 PDF 的布局有一些绝对定位，这似乎被比萨忽略了。我可以通过使用表格进行布局来解决这个限制。有没有其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T09:20:50.763

进行绝对定位的一种方法是使用 xhtml2pdf 特定的 @frame 块。有关详细信息，请参阅[文档](https://github.com/chrisglass/xhtml2pdf/blob/master/doc/pisa-en.html)。

# android - Bundle 在 Intent 中设置后为空

> ID：10107915
> 
> 赞同：8
> 
> 时间：2012-04-11T14:24:20.787
> 
> 标签：android, android-intent, null, bundle

我知道有这样的问题： [android-intent-bundle-always-null](https://stackoverflow.com/questions/8097267/android-intent-bundle-always-null)和[intent-bundle-returns-null-every-time](https://stackoverflow.com/questions/8106306/intent-bundle-returns-null-every-time)但没有正确答案。

在我的`Activity 1`：

```
public void goToMapView(Info info) {
    Intent intent = new Intent(getApplicationContext(), MapViewActivity.class);
    //intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
    intent.putExtra("asdf", true);
    info.write(intent);
    startActivity(intent);
} 
```

在信息：

```
public void write(Intent intent) {
    Bundle b = new Bundle();
    b.putInt(AppConstants.ID_KEY, id);
    ... //many other attributes
    intent.putExtra(AppConstants.BUNDLE_NAME, b);
}
public static Info read(Bundle bundle) {
    Info info = new Info();
    info.setId(bundle.getInt(AppConstants.ID_KEY));
    ... //many other attributes
    return info;
} 
```

在 MapViewActivity ( `Activity 2`) 中：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map_view);

    Bundle extras = getIntent().getBundleExtra(AppConstants.BUNDLE_NAME);
    info = Info.read(extras);
    ...
} 
```

问题是`extras`捆绑始终为空。我已经对其进行了调试，并且 Intent ( `intent = getIntent()`) 将所有字段都设置为 null，除了一个指示这是什么类的字段 ( `MapViewActivity`)。

我也尝试过`intent.putExtras(b)`以相同的效果放置捆绑包。`intent.putExtra("asdf", true)`仅出于调试原因 - 我也无法获取此数据（因为几乎`getIntent()`所有字段都设置为空）。

**编辑**

以下答案是正确且有效的。这是我的错。我没有正确地将我的捆绑包传递给新的意图。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T14:34:36.140

我不确定“信息”的用途，但我建议在涉及其他数据对象之前先将数据从一个活动传递到另一个活动。

活动1

```
 Intent intent = new Intent(Activity1.this, Activity2.class);
    intent.putExtra("asdf", true);
    info.write(intent);
    startActivity(intent); 
```

活动2

```
 Bundle bundle = getIntent.getExtras();
    if (bundle!=null) {
        if(bundle.containsKey("asdf") {
            boolean asdf = bundle.getBooleanExtra("asdf");
            Log.i("Activity2 Log", "asdf:"+String.valueOf(asdf));
        }
    } else {
        Log.i("Activity2 Log", "asdf is null");

    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T15:59:48.917

活动一

```
Intent intent = new Intent(getApplicationContext(), MapViewActivity.class);

        Bundle b = new Bundle();
         b.putBoolean("asdf", true);
         b.putInt(AppConstants.ID_KEY, id);
         intent.putExtras(b);

         startActivity(intent); 
```

活动二

```
Bundle extras = getIntent().getExtras();

 boolean bool = extras.getBoolean("asdf");
 int m_int = extras.getInt(AppConstants.ID_KEY,-1); 
```

# c++ - lua - 类析构函数的延迟调用

> ID：10107917
> 
> 赞同：4
> 
> 时间：2012-04-11T14:24:32.893
> 
> 标签：c++, garbage-collection, lua, destructor

我正在开发一个基本上只是执行 lua 脚本的 c++ 程序。然而，在那个 lua 脚本中构造了类，这些类已从我的 c++ 程序导出到 lua 脚本。

我的 main() c++ 函数只是在一些准备工作后调用...

```
 luabind::call_function<void>(m_L, "main"); 
```

现在我的 lua 脚本看起来像这样

```
local function test()
local c = C()
end

function main()
    for i=1,2 do
        log(i)
        test()
    end
end 
```

我已经包含了一个 std::cout << "destructor" << std::endl; 在 C 的析构函数中，所以我知道它何时被调用。我希望每次执行 test() 结束时，lua 的垃圾收集都会调用 c 的析构函数，因为那是它超出范围的时候。相反，我看到以下输出：

```
1
2
destructor
destructor 
```

而不是

```
1
destructor
2
destructor 
```

有谁知道这是为什么？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T14:34:30.373

> 我希望每次执行 test() 结束时，lua 的垃圾收集都会调用 c 的析构函数，因为那是它超出范围的时候。

不是这种情况。Lua 的垃圾收集不会在每个作用域的末尾运行。这是典型的垃圾收集语言，您不能依赖于析构函数何时运行，并且在某些语言中，对象可能根本不会被销毁。

没有任何方法可以让 Lua 像 C++ 那样自动确定性地销毁对象。

如果您必须依赖它，那么您可能可以使用 Lua 的`collectgarbage`功能，但是最好简单地改变您的期望并相应地重新设计。

[这是](http://www.lua.org/manual/5.2/manual.html#2.5)关于垃圾收集如何工作的 Lua 文档。

* * *

使用 collectgarbage 的示例：

```
local function test()
    local c = C()
end

function main()
    for i=1,2 do
        log(i)
        test()
        collectgarbage "collect"
    end
end 
```

# iphone - 应用程序有重击行为

> ID：10107918
> 
> 赞同：0
> 
> 时间：2012-04-11T14:24:39.373
> 
> 标签：iphone, objective-c

我的应用程序运行缓慢。例如，如果我弹出一个 UIActionSheet，而不是平滑地滚动，它会在大约 5 帧中出现口吃。我知道理想情况下你应该尽可能少地在屏幕上看到，但这就是我所拥有的。

有什么建议可以加快速度吗？

编辑：

在我看来，我有：

自定义导航栏代替常规导航栏。它是一个 UIImageView，使用图像文件。它有一个石英核阴影。它包含 3 个按钮。其中 2 个按钮有 2 个 UIImage，分别用于正常和突出显示，在显示视图时由代码生成。另一个按钮使用图像文件进行正常和突出显示。

背景的图像文件位于其下。背景之上是一个 UITableView。默认情况下，它没有任何单元格（用户添加它们）。我们将忽略该牢房，因为无论它们是否在那儿，它都会发出重击。

tableview 的标题包含一些标签和一个可编辑的 uitextview。随着更多行添加到文本视图，标题的大小会发生变化。它还有一个背景图像，它是透明的，可以让您看到它后面的视图的背景图像。它是从文件中加载的，并且在其之上的纹理图像也是从文件中加载的。

页脚只是从顶部具有相同纹理的文件加载的背景图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:15:45.580

安德鲁，恐怕你还不够具体，无法找出确切的问题。然而，有几件事我已经挑选出来了。首先，检查您的表格视图是否设置为不透明。还要尝试设计您的应用程序，以便您的表格单元格可以是不透明的。我假设您的设计将允许这样做。如果您希望表格及其单元格在其他内容上看起来是半透明的，您需要真正知道如何优化视图渲染性能，如果您确实需要知道的话，您可能需要开发自己的自定义专用替代 UITableView （可以完成但相当先进的东西）。

您还提到使用石英阴影。你应该能够使用 UIKit 在图像周围绘制阴影，除非你有一些专业要求。你确定你需要使用 Quartz 来做你想做的事吗？抱歉，如果您已经知道这一点，但是如果您对 iOS 开发还很陌生并且一直在寻找如何做阴影，您可能已经找到了 Quartz API 并认为这是解决方案，何时（取决于您需要什么） ) 你可能会更好地留在 UIKit。作为一般经验法则，仅当您确定不能仅使用 UIKit API 完成您想做的事情时，才使用 Quartz。

另一件事要检查。如果您使用的是 Quartz，那么您可能正在获取 UIImage 视图的图形上下文并在 drawRect 中的视图上下文上绘图：取决于您的视图层次结构的配置方式，以及您是否将导航栏视图设置为透明UITableView 的顶部，那么您的自定义 drawRect 实现可能会在每个动画帧中被不必要地调用，这将极大地消耗性能。

鉴于您提供的信息水平，我不得不猜测一下，无法给出准确的答案。但是，为了明确了解如何优化 UIView 性能，我建议您观看此视频（尽管您需要一个 Apple 开发人员帐户才能访问它）：

[https://developer.apple.com/videos/wwdc/2011/](https://developer.apple.com/videos/wwdc/2011/)

第 121 课 - 了解 UIKit 渲染

希望这可以帮助。保罗。

# iphone - 找不到架构 i386 的符号？

> ID：10107920
> 
> 赞同：2
> 
> 时间：2012-04-11T14:24:49.263
> 
> 标签：iphone, objective-c, xcode, viewdidload

基本上我已经将 EGOTableViewPullRefresh 文件添加到我的项目中。我编写的代码应该可以工作。但是，当由 viewDidLoad 中的代码触发时，会出现 2 个错误。

错误如下所示：![在此处输入图像描述](../Images/ae60a1570f47a887d48fa95aca9ac5af.png)

似乎是什么问题，我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:40:33.777

确保您正在导入正确的标头，并且实现文件已链接到您的目标。

![在此处输入图像描述](../Images/deb69aaca0f4122ba5b48a3c6bc8b637.png)

![在此处输入图像描述](../Images/9a81cbc3e317ae7b1888cfd0dd871a75.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T11:27:46.300

让我告诉你，首先进入project-> `build phases`，现在，你可以找到目录`Compling sources` ，进入它，你找不到EGOREF......m，现在将.m添加进去，构建并运行！

# json - Perl - 取消引用哈希

> ID：10107921
> 
> 赞同：3
> 
> 时间：2012-04-11T14:24:55.047
> 
> 标签：json, perl

我只是想知道是否可以在 Perl 中获得一些关于取消引用的帮助？

我有一个 while 循环，我在其中查询数据库并迭代我返回的内容。然后我将我需要的数据写入哈希并将哈希推送到数组中。这都是 JSON 字符串的一部分。

但是，我只能推送对哈希的引用，而不是哈希本身（我已经尝试了各种方法），这意味着如果循环进行（例如）3 次，我会在 JSON I 中得到相同的东西出现 3 次我正在尝试放置。

这是代码：

```
my $json = new JSON::XS;
my $json_text = JSON::XS->new->decode (shift->content);
my $sig_num = 0;
my %sig_hash;
<MySQL Stuff -removed for readability>

while($query_handle->fetch()) 
    {
    $sig_num++;
    $sig_hash{position} = 'below';
    $sig_hash{signature_text} = $sig;
    $sig_hash{signature_name} = 'Signature '.$sig_num;
    $sig_hash{signature_default} = JSON::XS::true;
    push (@{$json_text->{data}->{mail}->{signatures}}, \%sig_hash);
    }
return $json_text; 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T14:42:22.180

您推送到数组的哈希 ref 的范围在外层（`while`循环外）。这意味着只有一个哈希被引用：您将多次对同一哈希的引用推送到数组中。我假设您希望循环的每次迭代都有一个新的哈希值。如果是这样，`my %sig_hash`请在循环内部而不是外部声明。

您可以尝试使用此脚本来查看差异。首先按原样运行它；然后移动`my %h`循环外部并再次运行它。

```
my @data;

for (1..3){
    my %h;              # New hash for each iteration of the loop.
    $h{a} = 10 * $_;
    $h{b} = 20 * $_;
    push @data, \%h;
}

use Data::Dumper;
print Dumper(\@data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:03:34.317

*正如FMc*解释的那样，我建议您在`while`循环中使用自动激活的匿名哈希。这样代码就变得更简单了

```
my $json = new JSON::XS;
my $json_text = JSON::XS->new->decode(shift->content);
my $sig_num = 0;

while ($query_handle->fetch) {
  my $sig_hash;
  $sig_hash->{position} = 'below';
  $sig_hash->{signature_text} = $sig;
  $sig_hash->{signature_name} = "Signature ".++$sig_num;
  $sig_hash->{signature_default} = JSON::XS::true;
  push @{$json_text->{data}{mail}{signatures}}, $sig_hash;
}

return $json_text; 
```

或者，如果您愿意，您可以构建匿名哈希并将其直接推送到堆栈上，而无需将其分配给变量

```
my $json = new JSON::XS;
my $json_text = JSON::XS->new->decode(shift->content);
my $sig_num = 0;

while ($query_handle->fetch) {
  push @{$json_text->{data}{mail}{signatures}}, {
    position => 'below',
    signature_text => $sig,
    signature_name => "Signature ".++$sig_num,
    signature_default => JSON::XS::true,
  };
}

return $json_text; 
```

# android - 是否可以让第二个屏幕设备在 Google TV 上启动应用程序？

> ID：10107926
> 
> 赞同：0
> 
> 时间：2012-04-11T14:25:10.357
> 
> 标签：android, google-tv

我一直在阅读 AnyMot 协议，其中提到了第二个屏幕应用程序可以启动 YouTube 应用程序。平板电脑应用程序启动时可以说是 Flixter、Pandora 或 Goolge Music 应用程序，而不是远程控制模拟器。如果是这样，AnyMot 协议会被使用吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:31:30.050

Anymote 非常适合。如果你想做一个像“Able Remote”这样的应用程序，你需要在电视上放一个小应用程序，它会告诉你有哪些应用程序。但是对于您的要求，只需 Anymote 即可。

# javascript - Toggle 基于点击的不同文本

> ID：10107927
> 
> 赞同：0
> 
> 时间：2012-04-11T14:25:10.647
> 
> 标签：javascript, jquery, html, css, typo3

我在这个主题上做了很多搜索，发现了很多不同的方法。虽然有些接近，但我还没有找到我要找的东西。

基本上，我在 Typo3 中工作，我正在尝试创建许多链接，单击这些链接会更改链接下方给定区域中显示的文本。单击新链接时，我希望用新信息链接中的信息覆盖以前的文本。

理解我在说什么的一种更简单的方法是考虑一个图片库，除了显示图片，文本会发生变化。如果我不够具体，请告诉我。任何事情都有帮助。

更新：我正在尝试做一些与您在此页面上看到的非常相似的事情。除了 div 在悬停时可见之外，文本显示并保持 OnClick 直到做出下一个选择。

使用此代码悬停，但需要它是 OnClick 才能显示。

```
<script language="Javascript">
<!--
function ShowPicture(id,Source) {
if (Source=="1"){
if (document.layers) document.layers[''+id+''].visibility = "show"
else if (document.all) document.all[''+id+''].style.visibility = "visible"
else if (document.getElementById) document.getElementById(''+id+'').style.visibility = "visible"
}
else
if (Source=="0"){
if (document.layers) document.layers[''+id+''].visibility = "hide"
else if (document.all) document.all[''+id+''].style.visibility = "hidden"
else if (document.getElementById) document.getElementById(''+id+'').style.visibility = "hidden"
}
}
//-->
</script>
<style type="text/css">
#Style {
position:absolute;
left:218px;
top:300px;
visibility:hidden;
border:none 1px #CCC;
padding:5px;

}
</style>

<div id="CC1" style="position:absolute; left:30px; top:472px;"><a href="#" STYLE="TEXT-DECORATION: NONE" onMouseOver="ShowPicture('Style',1)" onMouseOut="ShowPicture('Style',0)"><center><h1 style="color:white; font-size:125%;">Lorum Ipsum<center></a></div>
<div id="Style"><img src="http://www.example.org/fileadmin/template/images/CCSS/TextBox.png"><div style="position: relative;top:-285px;font:12pt;font-weight:bold;color: #0067b2;margin-left: 15px;width:280px">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</div></div> 
```

* * *

我设法使用此代码获得了我想要的效果。现在我唯一的问题是，当页面第一次加载时，所有 div 都会显示，直到单击一个。想法？

```
function showonlyone(thechosenone) {
 $('div[name|="newboxes"]').each(function(index) {
      if ($(this).attr("id") == thechosenone) {
           $(this).show(200);
      }
      else {
           $(this).hide(600);
      }
 });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:34:26.173

这是一个如何实现这一目标的快速示例。您还没有具体说明新文本的来源，所以我只是使用了一个`data-*`属性。您可以将其更改为您需要的任何内容 - 无论是另一个元素、AJAX 调用等。

```
<p id="message"></p>    
<a href="#" data-text="Message #1" class="link">Show message #1</a><br>
<a href="#" data-text="Message #2" class="link">Show message #2</a><br>
<a href="#" data-text="Message #3" class="link">Show message #3</a><br>
<a href="#" data-text="Message #4" class="link">Show message #4</a><br>
<a href="#" data-text="Message #5" class="link">Show message #5</a><br> 
```

```
$(".link").click(function() {
   $("#message").text($(this).data("text"));
}); 
```

[**示例小提琴**](http://jsfiddle.net/Uw6W9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T21:13:36.947

[您的示例中的rgaccordion](http://typo3.org/extensions/repository/view/rgaccordion)扩展解决了这个问题。

如果您使用的是 TemplaVoila，您可以轻松创建一个[适合您的标记的 FCE](http://wiki.typo3.org/TemplaVoila/FCE)

# c# - 如何在 C# 中使用 Word 文档

> ID：10107928
> 
> 赞同：1
> 
> 时间：2012-04-11T14:25:14.250
> 
> 标签：c#, asp.net-mvc, reference, ms-word

我有一个问题，起初似乎是许可。在 localhost 上工作得很好，但是当转到服务器时会发生错误：

> [UnauthorizedAccessException：检索具有 CLSID {000209FF-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败，原因是以下错误：80070005。]

我使用 IIS7
我给了 iis 用户权限但无济于事，然后我在代码中传播“try catch”，发现错误与它尝试创建 Microsoft.Office.Interop.Word 实例的时刻有关

例子

```
using Word = Microsoft.Office.Interop.Word;

private bool Exemple(SqlDataReader dbReader, string strFilePath)
{ 
    Word.Application oApp = new Word.Application ();   // error here
    ...
    ...
    ...
} 
```

Microsoft.Office.Interop.Word 这个 dll 在服务器的 Bin 文件夹中，有没有人知道会发生什么？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:39:22.153

虽然您不应该在服务器上使用 Office 互操作库。Microsoft 不推荐或不支持这种实现，但如果您请求惩罚以克服您的错误，您需要打开服务器上的 DCOM 配置并将身份设置为运行您的应用程序池的用户并授予他们访问启动和激活权限。同样，您不想在服务器上设置 Office 互操作库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T07:36:51.373

在`Application Pools`IIS 下，设置`Identity`字段以`NetworkService`在我的设置中解决此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:31:44.467

（虽然不建议在服务器中使用office interop，但有时我们不得不......）

该问题与安全性有关。ASP.NET 进程的用户身份没有使用 Office 应用程序的访问权限，并且该身份应仅具有运行应用程序所需的最低权限。您可以使用**代码模拟**在运行时提高权限，而无需在 web.config 中设置模拟或为我的 ASP.NET 用户帐户使用高权限帐户。我在服务器中使用过它，我喜欢这种方法。

你可以[google](http://www.google.com/search?sourceid=chrome&ie=UTF-8&q=asp.net%20pool%20identity#hl=en&sclient=psy-ab&q=asp.net%20code%20impersonation&oq=asp.net%20code%20impersona&aq=0v&aqi=g-v2g-vC1&aql=1&gs_l=serp.1.0.0i15l2j0i15i33.266655l270410l1l272412l20l20l2l0l0l4l958l9786l3-1j4j10j2l17l0.cfis.1.&psj=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=c2a3d8871f6dcd2c&biw=1024&bih=643)一下以了解更多。这是来自[http://support.microsoft.com/kb/306158](http://support.microsoft.com/kb/306158)的代码：

```
public class CodeImpersonate
{
    /// <summary>
    /// This logon type is intended for users who will be interactively using the computer, such as a user being logged on by a terminal server, 
    /// remote shell, or similar process. This logon type has the additional expense of caching logon information for disconnected operations; therefore,
    /// it is inappropriate for some client/server applications, such as a mail server.
    /// </summary>
    public const int LOGON32_LOGON_INTERACTIVE = 2;
    /// <summary>
    /// Use the standard logon provider for the system. The default security provider is negotiate, 
    /// unless you pass NULL for the domain name and the user name is not in UPN format. In this case, the default provider is NTLM.
    /// Windows 2000: The default security provider is NTLM.
    /// </summary>
    public const int LOGON32_PROVIDER_DEFAULT = 0;

    WindowsImpersonationContext impersonationContext;

    [DllImport("advapi32.dll")]
    public static extern int LogonUserA(String lpszUserName,
                                        String lpszDomain,
                                        String lpszPassword,
                                        int dwLogonType,
                                        int dwLogonProvider,
                                        ref IntPtr phToken);

    [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    public static extern int DuplicateToken(IntPtr hToken, int impersonationLevel, ref IntPtr hNewToken);

    [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    public static extern bool RevertToSelf();

    [DllImport("kernel32.dll", CharSet = CharSet.Auto)]
    public static extern bool CloseHandle(IntPtr handle);      

    public bool ImpersonateValidUser(String userName, String domain, String password)
    {
        WindowsIdentity tempWindowsIdentity;
        IntPtr token = IntPtr.Zero;
        IntPtr tokenDuplicate = IntPtr.Zero;

        if (RevertToSelf())
        {
            if (LogonUserA(userName, domain, password, LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT, ref token) != 0)
            {
                if (DuplicateToken(token, 2, ref tokenDuplicate) != 0)
                {
                    tempWindowsIdentity = new WindowsIdentity(tokenDuplicate);
                    impersonationContext = tempWindowsIdentity.Impersonate();
                    if (impersonationContext != null)
                    {
                        CloseHandle(token);
                        CloseHandle(tokenDuplicate);
                        return true;
                    }
                }
            }
        }
        if (token != IntPtr.Zero)
            CloseHandle(token);
        if (tokenDuplicate != IntPtr.Zero)
            CloseHandle(tokenDuplicate);
        return false;
    }

    public void UndoImpersonation()
    {
        if (impersonationContext != null)
            impersonationContext.Undo();
    } 
```

}

将上面的代码复制到一个文件中。这是它的示例用法：

```
CodeImpersonate codeImpersonate = null;
try
{
    codeImpersonate = new CodeImpersonate();
    var isLoggedIn = codeImpersonate.ImpersonateValidUser(AppConfigs.OfficeUser, AppConfigs.OfficeUeerDomnia, AppConfigs.OfficeUserPass);

    if (isLoggedIn)
    {
        //Do your office work....
    }
    else
        throw new InvalidOperationException("Login failed for office user.");
}
finally
{
    if (codeImpersonate != null)
        codeImpersonate.UndoImpersonation();
    codeImpersonate = null;
} 
```

要在几个地方使用上面的代码，这里是一个门面：

```
public class ImpersonateServices
{
    public ImpersonateServices(String userName, String domain, String password)
    {
        this.UserName = userName;
        this.Domain = domain;
        this.Password = password;
    }

    public string UserName { get; private set; }

    public string Domain { get; private set; }

    public string Password { get; private set; }

    public void Execute(Action privilegedAction)
    {
        CodeImpersonate codeImpersonate = null;
        try
        {
            codeImpersonate = new CodeImpersonate();
            var isLoggedIn = codeImpersonate.ImpersonateValidUser(this.UserName, this.Domain, this.Password);

            if (isLoggedIn){
                privilegedAction();
            }
            else
                throw new InvalidOperationException("Login failed for office user.");
        }
        finally
        {
            if (codeImpersonate != null)
                codeImpersonate.UndoImpersonation();
            codeImpersonate = null;
        }
    }
} 
```

像这样使用它：

```
var impersonateServices = new ImpersonateServices(AppConfigs.OfficeUser, 
                                              AppConfigs.OfficeUserDomain, 
                                              AppConfigs.OfficeUserPass);
impersonateServices.Execute(() => { 
    //Do your Office work...
}); 
```

*office-User*应该是有效的本地或域帐户。要测试 office 用户帐户是否正常工作，请使用此用户帐户凭据登录服务器并启动 MS word 应用程序。如果是第一次打开 Word，可能会出现一些设置相关的弹窗。解决它们，否则它们可能会在编程访问期间产生问题。

如果您将用户帐户凭据保存在配置文件中，请考虑对这些值进行加密。请参阅以下 SO Q&A：

[如何加密 web.config 中的一项](https://stackoverflow.com/questions/6224732/how-to-encrypt-one-entry-in-web-config)

[在 web.config 中加密 appSettings](https://stackoverflow.com/questions/54200/encrypting-appsettings-in-web-config)

希望这可以帮助...

# c# - 固定文档动态页面插入

> ID：10107929
> 
> 赞同：0
> 
> 时间：2012-04-11T14:25:14.460
> 
> 标签：c#, wpf, fixeddocument, fixedpage

我正在尝试在我的固定文档中循环插入动态页面

```
FixedPage page1 = new FixedPage(); 
```

但是在第一页之后它给出的错误内容已经是另一个控件的子控件。您能指导我如何将页面添加到您的固定文档。如何制作页面数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:26:56.200

确保`FixedPage page1 = new FixedPage();`在每个循环开始时执行该行，否则 page1 将始终指向同一页面，并且您将尝试多次将同一页面插入到文档中。

您的代码应如下所示

```
while( looping )
{
     FixedPage page1 = new FixedPage(); 
     myFixedDocument.Pages.Add(page1);
} 
```

在将变量重新分配给新的 FixedPage 之前，您不应该再次将 page1 添加到任何内容。

# iad - 我的应用只显示“测试广告”

> ID：10107930
> 
> 赞同：0
> 
> 时间：2012-04-11T14:25:19.077
> 
> 标签：iad

我正在我的应用程序中实施 iAds。该视图显示图像“测试广告”。如何在视图中展示不同的广告？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:30:21.200

当您在 App Store 上发布应用程序时，它将获得真实的广告。“测试广告”广告只是为了让您在开发时测试您的实现。因此，它们正确显示的事实是一个好兆头。

要从已发布应用程序上显示的广告中获得收入，您必须签署 iAds 合同，您可以在 iTunes Connect 帐户中找到该合同。

* * *

请注意，Apple 有算法来决定哪些广告出现在哪些应用程序中。因此，即使您的应用已发布，特别是如果您没有庞大的用户群，您也可能不会收到广告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:33:50.263

您不会向 iAd 投放广告 - 系统会在您的应用发布时自动执行。

广告收入也会自动计算。

请参考：[iAd 编程指南](http://developer.apple.com/library/ios/DOCUMENTATION/UserExperience/Conceptual/iAd_Guide/iAd_Guide.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:31:21.637

当应用程序发布时，您可以从应用程序中获得资金。

如果您尝试从模拟器启动它，您将始终看到“测试广告”消息。

您将自动看到不同的广告，您不必关心它。

# asp.net-mvc - 在数据实体框架中显示名称

> ID：10107934
> 
> 赞同：5
> 
> 时间：2012-04-11T14:25:27.220
> 
> 标签：asp.net-mvc, entity-framework

我想知道如何更改模型的显示名称，并在实体框架中自定义错误消息。我尝试了以下但没有奏效。

```
 [Required(ErrorMessage = "Required .... :")]
    [Display(Name = "Name Agency : ")]
    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.String Nag
    {
        get
        {
            //code
        }
        set
        {
           //code
        }
    } 
```

这是我的表单背后的代码，用于将数据添加到我的数据库中。我省略了不相关的行。

```
 <% using (Html.BeginForm("addcar", "Agence", FormMethod.Post, new { @class = "search_form" }))
   { %>
    <%: Html.ValidationSummary(true) %>
        <div class="editor-label">
            <%: Html.LabelFor(model => model.Dmcv) %>
        </div>
        <div class="editor-field">
            <%: Html.EditorFor(model => model.Dmcv) %>
            <%: Html.ValidationMessageFor(model => model.Dmcv) %>
        </div>

        <div class="editor-label">
            <%: Html.LabelFor(model => model.Puisv) %>
        </div>
        <div class="editor-field">
            <%: Html.EditorFor(model => model.Puisv) %>
            <%: Html.ValidationMessageFor(model => model.Puisv) %>
        </div>

        // Similaire code

        <p>
            <input type="submit" value="Create" />
        </p>
<% } %> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T15:53:09.383

改为`[Display(Name = "Name Agency")]`改为`[DisplayName("Name Agency")]`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-27T18:57:13.307

首先你需要参考这个：

```
using System.ComponentModel.DataAnnotations; 
```

对于更改列的显示名称，实际上 [Display(Name="Name Agency")] 是可以的。我在我的项目中使用它。

对于错误信息

```
[Required(ErrorMessage="Required...")] 
```

我读到，如果您使用实体框架设计器，这可能不起作用，因为设计器会一遍又一遍地覆盖您的更改，那么您将需要使用如下元数据类型：

```
[MetadataType(typeof(MetadataMyClass))]
public partial class myclass
{
}

//data annotations here
public class MetadataMyClass
{
  [Required(ErrorMessage = "Required...")]
  [Display(Name="Column Name")]
  public global:: System.String Nag
  {
    // ... etc, etc...
  }
} 
```

# android - onDestroy() 里面必须有什么？（如果有的话）

> ID：10107936
> 
> 赞同：0
> 
> 时间：2012-04-11T14:25:31.270
> 
> 标签：android

所以在这里我对内存泄漏很着迷，坦率地说，我不明白什么会真正导致内存泄漏（是的，我已经阅读了常见的链接，例如[http://kohlerm.blogspot.co.uk/2009/02/memory -leaks-are-easy-to-find.html](http://kohlerm.blogspot.co.uk/2009/02/memory-leaks-are-easy-to-find.html)）。

我试图故意创建一些，例如通过在我的活动中留下一个 PhoneStateListener 子类并打开和关闭它无数次，在 DDMS 堆或 MAT 中看不到任何异常。然而在SO上，我一遍又一遍地阅读，不仅需要取消注册onDestroy，还需要取消注册onPause（[PhoneStateListener（）没有完成](https://stackoverflow.com/questions/4607344/phonestatelistener-isnt-finished)）

问题：有这样的清单吗？额外的问题：PhoneStateListener 是否真的会创建泄漏，除非它在 ​​onPause/onDestroy 等上取消注册。

**更新：** 我的立场得到纠正。当一遍又一遍地重新生成我的应用程序时，即使在单实例模式下，它已注册的 PhoneStateListener(s) 在调用 onDestroy 后仍然存在，并开始累加。我目前正在研究一种优雅的方式来杀死它们，并将在此处发布我的结果。

**UPDATE2：**注销监听器的正确方法是：instanceOfTelephonyManager.listen(phoneStateListener, PhoneStateListener.LISTEN_NONE); ... 根据 API

**UPDATE3：**正如承诺的那样，将其与一个措辞更好的问题联系起来：[https ://stackoverflow.com/a/4607435/821423](https://stackoverflow.com/a/4607435/821423)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T19:45:19.790

活动在自己之后进行清理并准备在 onPause() 中死去是一种很好的做法 - 这总是在它失去焦点之前被调用，并且不能与用户交互。onDestroy() 可能在此之后调用（但不保证）。

您的活动是否不是用户的焦点，它不再需要任何听众，因为它无法显示这些听众的结果。

# php - 回显评论返回所有注册用户的所需评论

> ID：10107946
> 
> 赞同：0
> 
> 时间：2012-04-11T14:26:05.730
> 
> 标签：php, mysql

我的评论系统有问题。添加评论有效，MySql 表显示已提交的正确评论。但是，当回显表格的内容时，会为每个注册用户打印评论。即，而不是只是说......**詹姆斯在 2012 年 4 月 11 日**打招呼，它会在 2012 年 4 月 11 日打招呼**詹姆斯打招呼 2012 年 11 月 4 日汤姆打招呼 2012 年 4 月 11 日艾玛打招呼**等。

就像我说的，MySql 表只显示一条评论，它显示了上传评论的用户的正确 user_id 编号（对应于 users 表中的 id）。这一定是我回应评论的方式，但我是 PHP 和 MySql 的新手，我不确定我是否正确加入表格。

我会很感激任何帮助。

```
require_once("db_connect.php");
    if($db_server) {
        //If a connection to the database is made...
        mysql_select_db($db_database) or die ("<p>Couldn't find database</p>");

            //Print out existing comments
            $result = mysql_query("SELECT * FROM comments JOIN users ON comments.profile_id = $problemID");
            if (!$result) die ("Database access failed: " . mysql_error());
            $rows = mysql_num_rows($result);
            for ($j=0; $j<$rows; ++$j) {
                $str_comments .= "<span class='comment'>" . mysql_result($result, $j, 'comment') . "</span>";
                $str_comments .= " bt " . mysql_result($result, $j, 'username');
                $str_comments .= " on " . mysql_result($result, $j, 'comm_date') . "</br><br/>";
            }

            //Get any submitted comments and insert into database
            $comment = clean_string($_POST['comment']);
            if ($comment != '') {
                //If the submitted comment is not empty...
                if (strlen($comment)<200) {
                    mysql_query("INSERT INTO comments (`user_id`, `profile_id`, `comment`) 
                                VALUES ('{$_SESSION['user_id']}', $problemID, ('$comment'))") or die(mysql_error());
                }else{
                    $message = "Comment not submitted. The comment must be less than 200 characters long";
                }
            }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:27:45.840

在您的查询中，我没有看到 WHERE 子句。应该是这样的：

```
$result = mysql_query("SELECT * FROM comments JOIN users ON comments.profile_id = $problemID WHERE users.id=$userid"); 
```

连接仅将表连接在一起，但它不会“过滤掉”结果，因为您仍然需要 WHERE 子句

# java - 从不同的语言调用 web 服务 (asmx)

> ID：10107948
> 
> 赞同：1
> 
> 时间：2012-04-11T14:26:12.757
> 
> 标签：java, .net, xsd, wsdl, asmx

从一个非技术中介那里，我收到了一个关于将使用我们的网络服务的外部组织的一些文件（.xsd 和 .wsdl）的问题。

这是我第一次为将使用.NET 以外的不同技术的外部方编写 Web 服务（它将是 java）。

如帖子中所述：[如何为 Web 服务生成 XSD 文件](https://stackoverflow.com/questions/4177309/how-to-generate-xsd-files-for-web-service)我认为只发送 wsdl 文件就足够了。

有人可以告诉我我是否正确。如果不是这样。如何使用此 wsdl 生成合适的 xsd？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:29:11.137

据我所知，公开 WSDL 就足够了。
每种能够读取 wsdl 的语言都可以创建代理、包装器和/或类，以便更轻松地访问/使用您的 Web 服务。
如[维基百科页面中所述](http://en.wikipedia.org/wiki/Web_Services_Description_Language)

> WSDL 将服务描述为网络端点或端口的集合。WSDL 规范为此目的为文档提供了一种 XML 格式。端口和消息的抽象定义与其具体用途或实例分离，允许重用这些定义。通过将网络地址与可重用绑定相关联来定义端口，而端口集合定义服务。消息是正在交换的数据的抽象描述，端口类型是支持的操作的抽象集合。特定端口类型的具体协议和数据格式规范构成可重用的绑定，其中操作和消息然后绑定到具体的网络协议和消息格式。通过这种方式，WSDL 描述了 Web 服务的公共接口。
> 
> WSDL 通常与 SOAP 和 XML Schema 结合使用，以通过 Internet 提供 Web 服务。连接到 Web 服务的客户端程序可以读取 WSDL 文件以确定服务器上可用的操作。使用的任何特殊数据类型都以 XML Schema 的形式嵌入到 WSDL 文件中。然后，客户端可以使用 SOAP 使用 XML 或 HTTP 实际调用 WSDL 文件中列出的操作之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:41:38.607

只需向他们公开一个测试网址。无论如何，您都应该这样做，以便他们能够在开发客户时真正测试事物。完成此操作后，只需让他们检索 http://[insert url]?wsdl

# asp.net - 重定向后 ASP.NET ScriptManager History url hash 丢失

> ID：10107951
> 
> 赞同：0
> 
> 时间：2012-04-11T14:26:23.857
> 
> 标签：asp.net, hash, history, state, scriptmanager

我在网上看到几篇帖子抱怨 Firefox 在重定向后维护历史 url 哈希。这是我希望的行为 - 它发生在 Firefox (11.0)、Chrome (18.0) 和 Opera (11.61) 中，但不是 IE (9) 或 Safari (5.1.2)。

在我的页面上，我设置并运行了 ASP.NET 4.0 历史记录点（已经工作了几年）。我还将一些查询字符串参数传递给页面。我现在要做的是检查新查询字符串参数的值，如果它与我的期望不匹配，则使用更新的值重定向到同一页面。我正在使用这种机制来跟踪浏览器的各个选项卡的会话，以便当它们在多个选项卡中打开相同的页面时，会话值不会从一个选项卡到另一个选项卡。

无论如何，我的一切工作正常，包括使用 ASP.NET 历史记录点的后退/前进 - 当我访问书签并且查询字符串参数不匹配时，我重定向并更改查询字符串参数以跟踪会话，以及历史状态是在书签的 url 然后用于将页面重新加载到我想要的状态。但这仅适用于 Firefox、Chrome 和 Opera。不是 IE，它对我来说很重要（仅基于我们的用户群），而不是 Safari。

我已经确定除了（或者可能是因为）不存在 url 历史状态这一事实之外，在 IE 或 Safari 中重定向后不会调用 ScriptManager.Navigate。

**是否有我可以在 ScriptManager 上或在重定向期间设置的设置/选项以维护 url 中的历史状态？** 如果历史状态在 url 中，如果需要，我可以直接调用 ScriptManager.Navigate，但值不存在于 url 中。

如果它有帮助，这里列出了我在哪里进行检查和重定向。然后将 ReportRunID 附加到每个选项卡需要唯一的会话变量键。我保留了以前 ReportRunID 的列表以跟踪并清除它们（在某个时间段之后，或者遇到超过 [MAX] 个 id 时），这样我就不会因为这些会话条目而使服务器内存过载。

```
Private Sub Page_PreInit(sender As Object, e As System.EventArgs) Handles Me.PreInit

    If IsPostBack = False Then
        Dim rrid As String = Request.QueryString("RRID")
        If ReportRunIDExists(rrid) = False Then
            ReportRunID = Now.ToString("_HHmmssfff")
            Dim url As String = Request.Url.PathAndQuery

            If String.IsNullOrEmpty(rrid) Then
                Response.Redirect(String.Format("{0}&RRID={1}", url, _reportRunID))
            Else
                Dim idx As Integer = url.IndexOf("&RRID=")
                Response.Redirect(String.Format("{0}&RRID={1}{2}", url.Substring(0, idx), _reportRunID, url.Substring(idx + 6 + rrid.Length)))
            End If
        End If
    End If

End Sub

Private Sub Page_PreRender(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.PreRender
    'save current RRID/Page/Time to session
    UpdateSessionReportRunID(_reportRunID)
End Sub 
```

...

如果我的书签网址看起来像：

```
mysite.com/mypage.aspx?Rpt=123&RRID=_095224678#&&state1=abc&state2=def... 
```

在重定向后的 FF/Chrome/Opera 中，我的网址如下所示：

```
mysite.com/mypage.aspx?Rpt=123&RRID=_102176253#&&state1=abc&state2=def... 
```

但是在重定向后的 IE/Safari 中，我的 url 看起来像：

```
mysite.com/mypage.aspx?Rpt=123&RRID=_102176253 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:28:49.123

经过更多的搜索，我意识到历史状态哈希没有发送到服务器。它存储在查询字符串中，因此它包含在书签中，但它由客户端脚本管理器访问，这会导致回发加载状态值。由于服务器从未在查询字符串中看到哈希值，因此当用户关注该页面的书签时，我无法找到这些值。

当我试图开始单独跟踪不同浏览器选项卡的会话状态时，引入了这个问题。在上面的代码中，如果参数为空或无效，我必须使用新值`RRID`重定向到 self 。`RRID`当我这样做重定向时，IE 和 Safari 的历史状态哈希丢失了（但其他浏览器没有）。

**我的解决方法：**

问题是我需要在我的重定向中包含哈希值，但这在服务器上不可用，所以我决定向页面注入一些 javascript 以从*哈希可用*的客户端执行重定向。

我已经有一个在不同场景中使用过的客户端重定向扩展助手方法，我对其进行了修改以包含当前的哈希值：

```
<System.Runtime.CompilerServices.Extension()>
Public Sub ClientRedirect(ByVal Response As HttpResponse, ByVal url As String, Optional ByVal target As Target = Nothing, Optional ByVal windowFeatures As String = Nothing, Optional includeCurrentHash As Boolean = False)

    If IsNothing(target) Then
        If windowFeatures = String.Empty Then
            target = ResponseHelper.Target._self
        Else
            target = ResponseHelper.Target._blank
        End If
    End If

    Dim page As Page = CType(HttpContext.Current.Handler, Page)
    url = page.ResolveClientUrl(url)

    Dim script As String
    script = "window.open(""{0}"", ""{1}"", ""{2}"");"

    script = String.Format(script, url & If(includeCurrentHash, "#"" + window.location.hash + """, String.Empty), target.ToString, windowFeatures)
    If target = ResponseHelper.Target._self Then
        'execute after page has loaded
        page.ClientScript.RegisterStartupScript(GetType(Page), "Redirect_" & Now.ToString("HHmmssfff"), script, True)
    Else
        'execute as page is loading
        page.ClientScript.RegisterClientScriptBlock(GetType(Page), "Redirect_" & Now.ToString("HHmmssfff"), script, True)
    End If

End Sub 
```

然后在我进行重定向的 Page_PreInit 中，我将其更改为包含当前哈希的 ClientRedirect，并且得到了预期的结果：
重定向浏览器，同时在所有浏览器上保持历史状态哈希。

```
 'redirect from the client so that we keep the History State URL hash 
    Response.ClientRedirect(String.Format("{0}&RRID={1}", Request.Url.PathAndQuery, _reportRunID), , , True) 
```

# performance - 我的数据库设计技能很糟糕。到哪里寻求补救？

> ID：10107953
> 
> 赞同：1
> 
> 时间：2012-04-11T14:26:31.537
> 
> 标签：performance, database-design, database-performance

我有一个网站，它在流量和数据库设计的复杂性方面都在逐步扩展。我一直首先是作为一名开发人员工作，除了我需要做的让我的代码运行之外，我从来没有真正成为一名数据库管理员。这需要改变——我需要提高数据库方面的效率。

举一个模糊的例子，我正在寻找如何去学习：

*   优化复杂表/关系以实现性能/扩展
*   如何高效索引。（目前我在外键上抛出索引，仅此而已）
*   复杂数据库的一般设计原则

我发现的大多数资源要么更多地针对 SQL 的基础知识（“这是一个 SELECT 查询、一个 JOIN 等”），要么主要关注数据库之外的性能问题。

所以，我知道这有点模糊 - 但我应该在哪里寻找以确保我的数据库以最有效和最完整的方式设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:41:03.703

1.  了解数据建模。选择正确的数据结构始终是至关重要的第一步，尤其是对于一般的编程，尤其是数据库。性能不能在糟糕的数据结构之上“固定”！[**ERwin 方法指南**](https://support.ca.com/cadocs/0/CA%20ERwin%20Data%20Modeler%20r8-ENU/Bookshelf_Files/PDF/ERwin_Methods.pdf)可能是开始学习数据建模的好方法。
2.  了解 DBMS 如何在物理级别组织数据。这将极大地帮助您了解如何“塑造”您的数据以提高性能，以及如何有效地利用现代 DBMS 为您提供的许多性能机制。[**使用索引，卢克！**](http://use-the-index-luke.com/)是关于该主题的出色教程。
3.  了解如何有效地*访问*数据库并确保您真正了解将从您的代码中调用的客户端 API。不同的 API 有自己的特性，但它们都有一些共同的主题，例如参数绑定、查询准备和获取。即使你被 ORM “屏蔽”，不必手动绑定参数，这仍然是“在幕后”发生的，理解它会提高你编写高性能代码的能力。
4.  测量，测量，测量。现代信息系统非常复杂，甚至专家也发现自己做出了错误的假设，所以不要依赖假设！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:36:49.360

我建议阅读一些性能调整。它非常专业，具体取决于您使用的数据库后端。但是这里有一些书要考虑：

SQl 服务器 [http://www.amazon.com/Server-Query-Performance-Tuning-Distilled/dp/1590594215/ref=sr_1_2?s=books&ie=UTF8&qid=1334154710&sr=1-2](https://rads.stackoverflow.com/amzn/click/com/1590594215)

[http://www.amazon.com/Performance-Tuning-Server-Dynamic-Management/dp/1906434476/ref=sr_1_12?s=books&ie=UTF8&qid=1334154710&sr=1-12](https://rads.stackoverflow.com/amzn/click/com/1906434476)

MySQL [http://www.amazon.com/High-Performance-MySQL-Optimization-ebook/dp/B0028N4W7Y/ref=sr_1_3?ie=UTF8&qid=1334154504&sr=8-3](https://rads.stackoverflow.com/amzn/click/com/B0028N4W7Y)

甲骨文 [http://www.amazon.com/Oracle-Database-Release-Performance-Techniques/dp/0071780262/ref=sr_1_2?s=books&ie=UTF8&qid=1334154909&sr=1-2](https://rads.stackoverflow.com/amzn/click/com/0071780262)

一般性能调优 [http://www.amazon.com/SQL-Performance-Tuning-Peter-Gulutzan/dp/0201791692/ref=sr_1_18?s=books&ie=UTF8&qid=1334154964&sr=1-18](https://rads.stackoverflow.com/amzn/click/com/0201791692)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T14:38:29.737

首先，我建议学习如何使用 EXPLAIN 及其输出的含义。在最常见的查询上运行它并研究输出。查询是否使用了合理的索引？他们是否在使用索引？乍看之下非常简单的查询最终可能会变得非常昂贵。

接下来，我建议找到你最慢的查询。Postgres（例如）有一个功能，允许您记录所有运行时间超过 N 秒的查询的 SQL 源。它们的速度慢是因为它们没有索引、非常复杂还是需要处理大量数据？

第三，我会查看特定查询的运行次数。您是否使用数据库来存储静态数据，并一遍又一遍地访问一个表以获取一条永不改变的记录？您可能会在某处缓存结果。

# php - 它没有正确显示消息

> ID：10107960
> 
> 赞同：-1
> 
> 时间：2012-04-11T14:26:57.443
> 
> 标签：php, javascript, jquery

我在下面有一个 javscript 函数，它根据结果显示一条消息：

```
 function stopImageUpload(success){
          var result = '';
          if (success == 1){
             result = '<span class="msg">The file was uploaded successfully!<\/span><br/><br/>';
          }
          else {
             result = '<span class="emsg">There was an error during file upload!<\/span><br/><br/>';
          }  
          return true;   
    } 
```

下面的代码总是显示消息“文件已成功上传！”

```
 <?php

       $destination_path = str_replace("//", "/", $_SERVER['DOCUMENT_ROOT']."/")."ImageFiles";

       $result = 0;

       $target_path = $destination_path . basename( $_FILES['fileImage']['name']);

       if(move_uploaded_file($_FILES['fileImage']['tmp_name'], $target_path)) {
          $result = 1;
       }

       sleep(1);

    ?>

   <script type='text/javascript' language='javascript'>
      window.top.window.stopImageUpload(1);
   </script> 
```

但是，如果我将最后一行更改为下面的内容，则它始终会显示消息“文件上传期间出错！”。为什么会这样，如何解决它，以便根据结果显示正确的消息？

```
<script language="javascript" type="text/javascript">
  window.top.window.stopImageUpload(<?php echo $result; ?>);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:31:35.153

找出这`<?php echo $result; ?>`实际呈现的内容。只需查看页面源。

最有可能的是`0`。然后尝试找出`move_uploaded_file`返回 false 的原因。移动文件时可能发生了错误。

# java - 如何创建可以跨多个页面或在框架/iframe 内访问的全局 JSP 变量？

> ID：10107962
> 
> 赞同：4
> 
> 时间：2012-04-11T14:27:03.863
> 
> 标签：java, html, jsp, variables, global-variables

简单地说，我如何在 JSP 中创建一个全局变量，以便我可以跨其他 JSP 页面和/或内部框架/iframe 访问它？我尝试了 <%!..%> 但我收到一个错误，即无法在单独的 jsp 页面中解析变量。是否甚至可以在多个页面中访问 JSP 变量而无需求助于查询字符串、会话变量等？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T14:49:37.997

正如我已经评论过的，您可以使用[ServletContext](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html)来维护所有应用程序的变量。不要将此与静态变量混淆，因为 ServletContext 会在您的应用程序取消部署时消失，但静态变量会一直存在，直到 JVM 关闭。

您可以使用[`setAttribute`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#setAttribute%28java.lang.String,%20java.lang.Object%29)方法将变量保存在 ServletContext 中。此外，您可以使用[`getAttribute`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getAttribute%28java.lang.String%29). 让我们看一个 servlet 中的 ServletContext 示例：

```
public class SomeServlet extends HttpServlet {
    public void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
        ServletContext servletContext = getServletContext();
        String someAttribute = servletContext.getAttribute("someAttribute");
        System.out.println("someAttribute value: " + someAttribute);
    }
} 
```

此外，您可以使用 ServletContext 的侦听器，因此您可以在应用程序启动（正确部署）以初始化 ServletContext 上的属性）和完成时（在其取消部署之前）执行一些代码。

```
public final class MyAppListener implements ServletContextListener {
    public void contextInitialized(ServletContextEvent event) {
        System.out.println("Application gets started.");
        ServletContext servletContext = event..getServletContext();
        servletContext.setAttribute("someAttribute", "Hello world!");
    }

    public void contextDestroyed(ServletContextEvent event) {
        System.out.println("Application has finished.");
    }
} 
```

如果您使用的是 Java EE 5，则应在 web.xml 中配置侦听器

```
<listener>
    <listener-class>mypackage.listener.MyAppListener</listener-class>
</listener> 
```

# scala - Scala - 传递函数 - 类型混乱

> ID：10107965
> 
> 赞同：0
> 
> 时间：2012-04-11T14:27:21.573
> 
> 标签：scala, functional-programming

我在 Scala-IDE 中有以下代码：

```
type myF = () => Boolean

def acceptFunction(f: myF) {
  //...
} 
```

接着：

```
var a = false

def isA = () => a 
```

但是当我尝试将它传递给acceptFunction时，它会导致错误：

```
acceptFunction(isA) 
```

错误是：

> 类型不匹配; 发现 : () => 需要布尔值：布尔值

但为什么？

如果我`isA`这样声明：

```
def isA() = () => a 
```

然后它被接受，但我认为，它会因为括号而被评估。

有没有办法通过这样的功能进行进一步评估？

**更新：**

看起来它与Scala-IDE有关。REPL 对这些表达式没有任何问题。但是，我仍然无法使传递的函数不会变成闭包。我的意思是，它变成了闭包，然后更改`var a`后者并`println(f())`再次调用示例 - 不会更改值。所以，问题的第二部分仍然存在——有没有办法通过这样的函数进行进一步的评估？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:40:24.640

您确定第一次编写代码时没有犯错吗？我将您所拥有的内容复制并粘贴到 2.9.1 REPL 中，它运行良好。

```
scala> type myF = () => Boolean
defined type alias myF

scala>  var a = false
a: Boolean = false

scala> def isA = () => a
isA: () => Boolean

scala> def acceptFunction(f: myF) {println(f())}
acceptFunction: (f: () => Boolean)Unit

scala> acceptFunction(isA)
false

scala> 
```

**更新：** `isA`定义它时是一个闭包。传递给它对它`acceptFunction`是否抓取没有影响`a`。

您的目的是编写一个函数 ，`acceptFunction`它接受一个函数 ，`f`，它在定义时捕获一个外部值 ，`a`？

你可以这样做：

```
// Defines a function which returns a function with returns the 
// value that was captured at the outer function's call time.
def isB = { (b: Boolean) => { () => b }: myF }

a = true

val f = isB(a)

acceptFunction(f) // >> true

a = false

acceptFunction(f) // >> true 
```

那是你想去的地方吗？

# iphone - SQLCIPHER sqlite 加密的 iphone ios 将未加密的数据库转换为加密的数据库

> ID：10107966
> 
> 赞同：0
> 
> 时间：2012-04-11T14:27:24.980
> 
> 标签：iphone, sqlite, encryption, sqlcipher

我知道有一些关于此的帖子，但只是想确保有一些我没有丢失/当前的东西。

使用 sqlcipher，带有未加密的数据库，想对其进行加密。加密新数据库工作正常。

我正在尝试使用现有数据库的 sqlcipher rekey 似乎不起作用（数据库保持未加密）。

```
 [fmdb open];
       NSString *sel = @"SELECT count(*) FROM sqlite_master";            
       FMResultSet *fmr = [self executeQuery : fmdb : sel];

        if ( [fmr next] ) // unencrypted
        {
            NSLog(@"Encrypting");
            fmdb.key = @"";
            [fmdb rekey : @"somekey"];
        } 
```

否则将不得不使用其他 PRAGMA 方法之一，等等。

重新生成密钥是否仅适用于已加密的数据库？

这是使用 FMDatabase 框架，但在框架的底层它正在做......

```
 - (BOOL)rekey:(NSString*)key {
    #ifdef SQLITE_HAS_CODEC
    if (!key) {
        return NO;
    }

    int rc = sqlite3_rekey(db, [key UTF8String], (int)strlen([key UTF8String]));

    if (rc != SQLITE_OK) {
        NSLog(@"error on rekey: %d", rc);
        NSLog(@"%@", [self lastErrorMessage]);
    }

    return (rc == SQLITE_OK);
    #else
        return NO;
    #endif
   } 
```

它通过 sqlite3_rekey 运行，没有错误，但数据库没有被加密。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T12:20:34.453

之前关于这个问题的所有评论都是不正确的。**您不能使用 rekey 来加密明文数据库。**Rekey 仅用于更改加密数据库上的加密密钥。

加密明文数据库的正确方法是附加和导出 - 请参阅此处的示例[http://sqlcipher.net/sqlcipher-api/#sqlcipher_export](http://sqlcipher.net/sqlcipher-api/#sqlcipher_export)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:36:19.093

诀窍是，当数据库用于检查加密（下次打开应用程序）时，它已经加密，但不使用密钥进行选择，这将失败，但随后数据库将不得不关闭并且再次用钥匙重新打开。

# python - 在 Python 中使用 struct timeval

> ID：10107971
> 
> 赞同：4
> 
> 时间：2012-04-11T14:27:34.227
> 
> 标签：python, ctypes, timeval

我有一个包含结构的 C 程序

```
struct S{
           int x;
           struct timeval t;
 }; 
```

和一个函数

```
int func(struct S s1, struct S s2) 
```

我需要从我的 python 程序中调用这个函数。我正在使用 ctypes。Python 上的并行结构

```
import ctypes
from ctypes import *
class S(Structure):
        _fields_ = [("x",c_int),
                     ("t", ?)] 
```

现在，我的问题是我将在 ? place 以及与之相关的任何依赖项。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T14:30:59.477

`struct timeval`在您平台的 C 包含文件（互联网建议）中找到 的定义`sys/time.h`，然后将其转码为 ctypes 结构。

在我的平台上`struct timeval`是

```
struct timeval {
  long tv_sec;
  long tv_usec;
}; 
```

（我想无论如何这是标准），所以

```
class timeval(Structure):
    _fields_ = [("tv_sec", c_long), ("tv_usec", c_long)]

class S(Structure):
    _fields_ = [("x",c_int), ("t", timeval)] 
```

可能符合要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T14:31:58.250

没有任何进一步的信息，它将是[timeval](http://www.gnu.org/software/libc/manual/html_node/Elapsed-Time.html)的定义：

```
class timeval(Structure):
    _fields_ = [("tv_sec",c_long),
                 ("tv_usec", c_long)]

class S(Structure):
    _fields_ = [("x",c_int),
                 ("t", timeval)] 
```

# ios - 在 iPhone 上以横向创建 ViewController

> ID：10107976
> 
> 赞同：0
> 
> 时间：2012-04-11T14:27:54.000
> 
> 标签：ios, orientation, xib, viewcontroller

在我的应用程序中，我需要在用户单击按钮时加载新的视图控制器。我从 XIB 文件加载它。它是根据 XIB 文件中设置的 ORIENTATION 出现的（在视图的“模拟指标”中），而不是实际的设备方向。

如何有问题地更改视图的方向？

**注意：** 一旦加载视图控制器，它就会正确处理方向更改事件并在旋转时自动调整所有正确的大小。

**编辑：** 我通过为横向添加另一个 XIB 文件来使其工作：

```
[self initWithNibName: ( UIDeviceOrientationIsLandscape([[UIDevice currentDevice] orientation]) ? @"tfdSearchViewController_iPhone_Landscape" : @"tfdSearchViewController_iPhone" )] 
```

但这很愚蠢，因为2 个 xib 文件之间**的唯一区别是“方向”值。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:37:01.590

```
[[UIDevice currentDevice] setOrientation:UIDeviceOrientationLandscapeRight]; 
```

更改设备方向只需将其设置为您想要的

# maven-2 - 如何在通过原型创建项目时操作 pom.xml

> ID：10107979
> 
> 赞同：0
> 
> 时间：2012-04-11T14:28:00.170
> 
> 标签：maven-2

我正在通过目标 create-from-project 和使用 jaxws 的 web 服务项目的 propertyFile 制作原型。因此，我必须将服务端点实现输入到 jaxws 插件的配置中。我的 POM 片段：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>jaxws-maven-plugin</artifactId>
    <version>1.12</version>
    <executions>
      <execution>
        <id>wsgen</id>
        <goals>
          <goal>wsgen</goal>
        </goals>
        <configuration>
          <sei>ws.ExampleWSBean</sei> 
```

如何操作 ws.ExampleWSBean？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:28:13.437

我解决了我的问题。通过命令创建原型项目后：

```
mvn archetype:create-from-project -Darchetype.properties=../archetype.properties 
```

我修改了原型资源中的 pom.xml。我只用 ${package}.ExampleWSBean 替换了 ws.ExampleWSBean。

# python - 如何将逗号分隔的日期属性列表转换为 MySQL 日期值？

> ID：10107980
> 
> 赞同：1
> 
> 时间：2012-04-11T14:28:01.097
> 
> 标签：python, mysql, shell

不确定我的标题措辞是否正确，但这里有。我有一个与此格式相似的作业文件：

```
423720,hparviz,RUN,512,22,Mar,10:38,11,April,14:06 
```

基本上，我需要将开始日期和结束日期转换为允许我将其导入 mysql 的格式（22-Mar 10:38 - 11-Apr 14:06 或者 MySQL 需要格式化日期）。这些数据是使用 linux 中的命令提取的，我在其中处理结果以允许导入 MySQL 数据库。在 Linux（在命令期间）、Python（在我展示的状态下）或 MySQL（在导入后）中操作会更容易吗？

如果您需要更多详细信息，请告诉我，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:36:16.040

假设每一行都像你发布的那样：

```
f=open(filename,"r")
listOfLines=f.readlines()
for line in listOfLines:
    splitLine=line.split(",")
    print "Day of Month: "+splitLine[4]#this is an example of one piece of info.
    print "Month: "+splitLine[5]#this is an example of one piece of info. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T14:40:03.163

你可以用 分割线`string.split(',')`。您可以使用[time.strftime转换日期](http://docs.python.org/library/time.html#time.strftime)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T14:42:29.537

```
process to create data | awk -F, -v OFS=, '
  function format_date(day, mon, time) {
    return sprintf("%s-%s %s", day, substr(mon,1,3), time)
  }
  {print $1,$2,$3,$4,format_date($5,$6,$7),format_date($8,$9,$10)}
' 
```

输出

```
423720,hparviz,RUN,512,22-Mar 10:38,11-Apr 14:06 
```

根据需要更改格式字符串。

# google-earth - 通过 Google 地球内的链接选中/取消选中元素

> ID：10107981
> 
> 赞同：0
> 
> 时间：2012-04-11T14:28:07.323
> 
> 标签：google-earth

所以我有一个文件夹，里面有 2 个地标。其中一个在加载时隐藏，而另一个是可见的。我想在可见的描述中有一个链接来隐藏/显示隐藏的。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:49:50.757

如果您使用的是 Google Earth 插件，这是一种方法。

首先为每个地标分配一个“id” - 所以在 KML 文件中，您需要编辑显示的代码

```
 <Placemark>
   <name>Placemark 1</name> 
```

到

```
 <Placemark id="placemark1">
   <name>Placemark 1</name> 
```

与地标 #2 相同

然后你有一个像下面这样的javascript函数，通过气球描述添加一个按钮来执行[（参见这个示例页面如何做到这一点）](http://code.google.com/apis/ajax/playground/#javascript_in_balloons)

```
 function togglePlacemarks() {
         var pm1 = ge.getElementById('placemark1');
         var pm1 = ge.getElementById('placemark1');
         if (pm1.getVisibility() == true) {
    pm1.setVisibility(false);
            pm2.setVisibility(true);
     } else {
    pm1.setVisibility(true);
            pm2.setVisibility(false);
     }
    } 
```

在从气球执行 JS 的示例代码中，您将更改以下行

```
 balloon.setContentString(
    '<a href="#" onclick="alert(\'Running some JavaScript!\');">Alert!</a>'); 
```

到

```
 balloon.setContentString(
    '<a href="#" onclick="togglePlacemarks();">Toggle Visibility</a>'); 
```

最后，如果您只希望有一个简单的（即只有 2 个地标），那么也许您应该使用示例代码来创建地标，而不是创建和加载自定义 KML 文件。在这种情况下，当您创建地标时（通过这行代码）

```
 placemark = ge.createPlacemark(''); 
```

你会这样做

```
 placemark1 = ge.createPlacemark('placemark1');
     ...etc 
```

并且

```
 placemark2 = ge.createPlacemark('placemark2');
     ... etc
     placemark2.setVisibility(false); 
```

# java - JVM 中有 JSR-335 的特殊支持吗？提升基于 JVM 的功能性语言？

> ID：10107987
> 
> 赞同：2
> 
> 时间：2012-04-11T14:28:40.777
> 
> 标签：java, scala, jvm, closures, jsr335

据说 JSR-335 很快就会与 Java 8 一起出现。它带来了对闭包和虚拟扩展方法的支持。我想知道在 JVM 级别上是否对此有任何特别的支持？如果是这样，我们是否希望在基于 JVM 的函数式语言中提高速度，这些函数式语言提供闭包和类似扩展方法的特性（例如 scala 中的特征或隐式）？

编辑：阅读Brian Goetz[关于 Java 8 的 Oracle 演示文稿](https://blogs.oracle.com/briangoetz/resource/devoxx-lang-lib-vm-co-evol.pdf)，看起来： - 不需要闭包 - 虚拟扩展方法确实需要特定的 JVM 支持。

这是否意味着在 scala 中，一些隐含和特征可以以更有效的方式重新实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T17:39:54.023

我认为扩展方法不能用于实现特征——方法实现不能调用`super`它们（afaik——我可能错了），并且覆盖语义会有所不同。此外，它不会涵盖领域，仅涵盖方法。

JVM 无法帮助处理隐式，因为它们没有固有的问题。它们是作为普通参数传递的普通实例。查找它们会使*编译器*变慢，但 JVM 也无能为力。

我看不到这些特性中的任何一个对 Scala 中的任何东西都有帮助，但实际上这几乎没有实际意义。Scala 仍然使用 JVM 1.5 类文件生成 JVM 1.5 字节码。您可以打开 JVM 1.6 字节码，这没什么区别。在 Scala 2.10 中，1.6 类文件将*在实验基础上*启用。

原因很简单：Java 1.7 运行 1.5 个具有 1.5 个字节码的类文件，但反之则不然。仍然有很多人在运行旧版本的 Java，而且这种情况不太可能改变。

所以我没有看到任何 Java 1.8 的特性，除非它们带来了巨大的优势。而且，即使那样，它们也很可能可用于使用 Scala 编译的代码，但不适用于 Scala 库本身。同样，除非它带来巨大的优势，否则我看不到两个版本都提供库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T14:36:32.793

我认为 Scala 的速度已经非常接近 Java。它是动态类型的 jvm 语言很慢（例如 Groovy）。实际上 JDK 7 推出了新功能 invokedynamic 以改进那些动态 jvm 语言：http: [//java.sun.com/developer/technicalArticles/DynTypeLang/](http://java.sun.com/developer/technicalArticles/DynTypeLang/)

# java - 自毁应用

> ID：10107989
> 
> 赞同：15
> 
> 时间：2012-04-11T14:28:43.390
> 
> 标签：java, desktop-application, self-destruction

就像*“这盘磁带将在五秒钟内自毁。祝你好运，吉姆”* ......

一旦达到预设的使用时间或其他条件，应用程序是否有可能删除自己（或其可执行包装形式）？

或者，可以使用哪些其他方法使应用程序无用？

这里的目的是让测试版过期，邀请用户获得更新的版本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T14:44:57.003

有可能的。为了绕过对 JAR 文件的锁定，您的应用程序可能需要生成一个后台进程，该进程会等到 JVM 退出后再删除内容。

但是，这不是防弹的。有人可以安装应用程序，然后将安装的文件和目录设为只读，这样您的应用程序就无法自行删除。用户（或其管理员）通过操作系统的访问控制系统对创建和删除哪些文件拥有最终决定权。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T14:48:16.067

如果您控制测试人员下载您的应用程序的位置，您可以使用自动构建系统（例如[Jenkins](http://jenkins-ci.org/)），您可以每晚创建一个具有硬编码到期日期的新 beta 版本：

```
private static final Date EXPIRY_DATE = <90 days in the future from build date>; 
```

上述日期由构建过程自动插入

```
if (EXPIRY_DATE.before(new Date()) {
    System.out.println("Get a new beta version, please");
    System.exit(1);
} 
```

[将其与已签名和密封的 jars](http://docs.oracle.com/javase/tutorial/deployment/jar/sealman.html)混合使用，为反编译字节码设置障碍并提供不包含该代码的替代实现，您可以分发代码的过期测试版。

自动构建系统可以配置为自动将 beta 版本上传到托管下载版本的服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-30T14:15:02.590

由于 Windows 在`JAR`运行时锁定文件，因此您无法从自己的 Java 代码中删除它，因此您需要一个`Batch`文件：

```
private static void selfDestructWindowsJARFile() throws Exception
{
    String resourceName = "self-destruct.bat";
    File scriptFile = File.createTempFile(FilenameUtils.getBaseName(resourceName), "." + FilenameUtils.getExtension(resourceName));

    try (FileWriter fileWriter = new FileWriter(scriptFile);
         PrintWriter printWriter = new PrintWriter(fileWriter))
    {
        printWriter.println("taskkill /F /IM \"java.exe\"");
        printWriter.println("DEL /F \"" + ProgramDirectoryUtilities.getCurrentJARFilePath() + "\"");
        printWriter.println("start /b \"\" cmd /c del \"%~f0\"&exit /b");
    }

    Desktop.getDesktop().open(scriptFile);
}

public static void selfDestructJARFile() throws Exception
{
    if (SystemUtils.IS_OS_WINDOWS)
    {
        selfDestructWindowsJARFile();
    } else
    {
        // Unix does not lock the JAR file so we can just delete it
        File directoryFilePath = ProgramDirectoryUtilities.getCurrentJARFilePath();
        Files.delete(directoryFilePath.toPath());
    }

    System.exit(0);
} 
```

`ProgramDirectoryUtilities`班级：

```
public class ProgramDirectoryUtilities
{
    private static String getJarName()
    {
        return new File(ProgramDirectoryUtilities.class.getProtectionDomain()
                .getCodeSource()
                .getLocation()
                .getPath())
                .getName();
    }

    public static boolean isRunningFromJAR()
    {
        String jarName = getJarName();
        return jarName.contains(".jar");
    }

    public static String getProgramDirectory()
    {
        if (isRunningFromJAR())
        {
            return getCurrentJARDirectory();
        } else
        {
            return getCurrentProjectDirectory();
        }
    }

    private static String getCurrentProjectDirectory()
    {
        return new File("").getAbsolutePath();
    }

    public static String getCurrentJARDirectory()
    {
        try
        {
            return getCurrentJARFilePath().getParent();
        } catch (URISyntaxException exception)
        {
            exception.printStackTrace();
        }

        throw new IllegalStateException("Unexpected null JAR path");
    }

    public static File getCurrentJARFilePath() throws URISyntaxException
    {
        return new File(ProgramDirectoryUtilities.class.getProtectionDomain().getCodeSource().getLocation().toURI().getPath());
    }
} 
```

[受此](https://stackoverflow.com/q/30368534/3764804)问题启发的解决方案。

* * *

这是适用于 Windows 的更好方法：

```
private static void selfDestructWindowsJARFile() throws Exception
{
    String currentJARFilePath = ProgramDirectoryUtilities.getCurrentJARFilePath().toString();
    Runtime runtime = Runtime.getRuntime();
    runtime.exec("cmd /c ping localhost -n 2 > nul && del \"" + currentJARFilePath + "\"");
} 
```

[这](https://stackoverflow.com/a/47058060/3764804)是原始答案。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-11T14:37:43.587

我猜这很有可能。也许你可以像这样删除 jar 并确保应用程序消失，因为你有权利。

```
File jar = new File(".\\app.jar");
jar.deleteOnExit();
System.exit(0); 
```

还使用[Nullsoft Scriptable Install System 之](http://nsis.sourceforge.net/Main_Page)类的东西，它使您能够编写自己的安装/卸载程序应该会有所帮助。

# haskell - 哈斯克尔和奥德

> ID：10107990
> 
> 赞同：4
> 
> 时间：2012-04-11T14:28:46.987
> 
> 标签：haskell

我正在尝试实现一个简单的 min 函数，该函数接受两个参数&如果第一个必须按排序顺序出现在第二个之前，则返回 True，否则返回 False：

```
min :: a -> a -> Bool
min a b = if a < b then True else False 
```

我得到：

```
No instance for (Ord a)
arising from a use of `<' 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-11T14:42:00.030

如果您[查看文档](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t%3aOrd)，您将看到 for 的类型`(<)`为

```
(<) :: a -> a -> Bool 
```

这是误导！

类型声明出现在类型类定义中：

```
class Eq a => Ord a where ... 
```

所以完整的类型是

```
(<) :: Ord a => a -> a -> Bool 
```

顺便说一句，如果你问 ghci 什么`(<)`是类型，它会正确回答。

```
Prelude> :t (<)
(<) :: (Ord a) => a -> a -> Bool 
```

另请注意，在同一个类型类中已经有一个名为 的函数`min`。

```
min :: Ord a => a -> a -> a 
```

所以你不能调用你的函数`min`，除非你隐藏原来的`min`. （我不会向您展示如何操作。请为您的函数使用不同的名称。）

* * *

最后，你现在有

```
min :: Ord a => a -> a -> Bool
min a b = if a < b then True else False 
```

正如莎拉所指出的，`if blah then True else False`与 相同`blah`，因此您可以简化为更清晰

```
min :: Ord a => a -> a -> Bool
min a b = a < b 
```

现在 Haskell 中的操作符只是名称很有趣的函数 --- 这与

```
min :: Ord a => a -> a -> Bool
min a b = (<) a b 
```

我们可以进一步简化：

```
min :: Ord a => a -> a -> Bool
min = (<) 
```

所以你`min`只是一个不同的名字`(<)`。为什么不简单地使用原件`<`而不是您的`min`？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-11T15:54:42.803

已经有两个答案，但我认为缺少一个重要的点：

您需要在类型签名中的*原因是您需要限制允许“进入”您的函数的类型。*`(Ord a) =>`

当我定义一个函数`function :: a -> a`时，我是说我的函数将获取**任何**类型的数据，并返回一个相同类型的值。

A good example of this is `head :: [a] -> a` -- given a list of **any** type, head will return the list's first argument. This is because head doesn't really "touch" the data itself, so it doesn't matter at all what it is.

However, your situation isn't like that: imagine we have a data type Countries:

```
data Countries = USA | Nigeria | China | Canada -- yes, I know there are a few missing 
```

It makes no sense to say `min USA Canada` or `USA < Canada`.

Therefore you have to restrict your functions to types which can be compared this way: types which have instances of the `Ord` (meaning ordered) typeclass. The way you restrict them is by writing `(Ord a) =>` before your type signature.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-11T14:30:51.173

您需要一个类型约束`<`才能工作：

```
min :: Ord a => a -> a -> Bool
--     ^^^^^ 
```

# wpf - 如何使用 MVVM 在 RibbonComboBox 上设置 SelectedItem？

> ID：10107992
> 
> 赞同：3
> 
> 时间：2012-04-11T14:28:51.643
> 
> 标签：wpf, mvvm, ribboncontrolslibrary

如何设置使用`SelectedItem`模式？`RibbonComboBox``MVVM`

**看法**

```
<ribbon:RibbonComboBox>
    <ribbon:RibbonGallery SelectedItem="{Binding Foobar, Mode=TwoWay}">
        <ribbon:RibbonGalleryCategory ItemsSource="{Binding Foobars}" DisplayMemberPath="FoobarID" />
    </ribbon:RibbonGallery>
</ribbon:RibbonComboBox> 
```

**视图模型**

```
// Selected Item
private Foobar _foobar { get; set; }

public Foobar Foobar
{
    get { return _foobar; }
    set
    {
        if (value == _foobar || value == null)
            return;

        _foobar = value;

        base.NotifyPropertyChanged("Foobar");
    }
}   

// Collection
private ObservableCollection<Foobar> _foobars = new ObservableCollection<Foobar>();

public ObservableCollection<Foobar> Foobars
{
    get
    {
        return _foobars;
    }
}

// Constructor
public FoobarViewModel(MyObject myObject)
{
    LoadFoobars();

    Foobar = myObject.Foobar;
}

// Method
private void LoadFoobars()
{
    foreach (var foobar in _localRepository.GetFoobars())
    {
        this._foobars.Add(foobar);
    }
} 
```

**更新**

删除`IsEditable="True"`确实将“Namespace.Foobar”放入`RibbonComboBox`并更改`SelectedItem`和添加确实显示`SelectedValuePath`了`RibbonGallery`正确的值，但是`RibbonComboBox`有一个红色边框，所以我猜它没有经过验证（比如比较苹果和梨）。

```
<ribbon:RibbonComboBox>
    <ribbon:RibbonGallery SelectedItem="{Binding Foobar.FoobarID, Mode=TwoWay}" SelectedValuePath="DisplayMemberPath">
        <ribbon:RibbonGalleryCategory ItemsSource="{Binding Foobars}" DisplayMemberPath="FoobarID"/>
    </ribbon:RibbonGallery>
</ribbon:RibbonComboBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:37:18.657

我通过更改构造函数解决了它。

```
// Constructor
public FoobarViewModel(MyObject myObject)
{
    LoadFoobars();

    Foobar = _repository.GetFoobar(myObject.FoobarID);
} 
```

# objective-c - NSKeyedUnarchiver 无法解码我保存的对象

> ID：10107994
> 
> 赞同：0
> 
> 时间：2012-04-11T14:28:58.823
> 
> 标签：objective-c, ios, persistence

我这样编码：

```
NSMutableData *data = [[NSMutableData alloc] init];
NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];          
[archiver encodeObject:data forKey:@"Object"];
[archiver finishEncoding]; 
```

然后，从磁盘检索保存的文件后，我尝试像这样解码它：

```
Object *object = (Object*)[unarchiver decodeObjectForKey:@"Object"]; 
```

问题是这永远不会被解码回 Object* 类型。它仍然是 NSMutableData。因此，当我尝试访问诸如“object.name”之类的对象的某些属性时，我得到 -[NSConcreteMutableData name]: unrecognized selector sent to instance 0x2c8510'。

我遵循了 Ray Wenderlich 的教程[http://www.raywenderlich.com/1914/how-to-save-your-app-data-with-nscoding-and-nsfilemanager](http://www.raywenderlich.com/1914/how-to-save-your-app-data-with-nscoding-and-nsfilemanager)。尽管他的代码有效，但我的却不行。因此，在搞砸了一天之后，我正在寻求帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:48:19.230

您引用的教程在类上使用了一个名为“data”的属性，并在 saveData 方法中使用了名为“data”的变量。他在调用 encodeObject: 时将属性“_data”（或至少合成的实例变量 _data）写入 NSMutableData 对象“data”。这有点令人困惑，因为他对两个不同的事物使用相同的名称。

您，otoh，正在创建一个名为“data”的 ivar，然后将其发送到 encodeObject:。你永远不会访问你的 Object* 属性，只是将一个空的 NSMutableData 写入 NSMutableData。区别在于缺少下划线，但恕我直言，有更好的方法。

我建议您将要编码的数据的属性重命名为，例如“info”（或者可能提供更多信息，例如“stockPrices”或“todaysWeather”或此类存储的任何数据）

```
@property Object* info; 
```

并适当地重命名您的访问器（假设您按照他的方式做事）

然后写：

```
[archiver encodeObject:self.info forKey:@"Object"] 
```

作为开发人员，为了您的利益，这里发生了两件事：您正在为正在编码的数据和正在编码的信息使用不同的名称，并且您正在明确编写代码，表明您正在访问您的班级信息属性，而不是一些局部变量。从现在起 6 个月后，当您查看此代码时，这两者都会让您的生活更轻松。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:41:40.670

这是因为你`data`没有编码`object`。更改此行：

```
[archiver encodeObject:data forKey:@"Object"]; 
```

对此

```
[archiver encodeObject:object forKey:@"Object"]; 
```

# javascript - 如何在 html 中输出 javascript 变量的值？

> ID：10107995
> 
> 赞同：1
> 
> 时间：2012-04-11T14:28:58.920
> 
> 标签：javascript, jquery, html

全部，

我有一个返回字符串值的javascript例程，我想在我的html标签中使用这个例程，如下所示，

```
<a href="#"><script>getKeyValue('empDesignation')</script></a> 
```

这可能吗？。有什么见解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:36:25.273

```
<html>
  <head>

<script type="text/javascript">
function alterText(){
document.getElementById('hello').innerHTML = empDesignation();
}
  function empDesignation(){   
    var output = 'test'
   return output
  }
</script>

  </head>
  <body onload="javascript:alterText()">

    <a id="hello"></a>

  </body>

  </html> 
```

这应该有效。我不得不模拟你的 empDesignation 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:31:53.273

document.write(getKeyValue('empDesignation')); 这可能会奏效。

**更新**：它必须包含在`<script>`标签内

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:31:37.517

不，您不能在 html 标记中使用 javascript 变量。您必须使用 DHTML 将值设置为 html。

如果您发布一些代码，我可以帮助您

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T14:32:15.413

你可以做

```
var txt = getKeyValue('empDesignation');
$('#result').text(txt); 
```

这假设 getKeyValue() 返回一个字符串。然后你把结果作为 id=result 元素的文本

编辑 - 编辑后。你可以做

HTML

```
<a href="#" data-key='empDesignation' class='functional'>your text</a> 
```

js

```
//when you click on a link that has the class functional    
$('a.functional').on('click', function(e){
  //prevent the default action
  e.preventDefault();
  //retrieve the data that from the html5 data attribute and pass it to 
  //your custom function
  var result = getKeyValue($(this).data('key'));
  //use the resulting string as the new text for the clicked link
  $(this).text(result);
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T14:40:05.217

在 html 标签内这个 getKeyValue('empDesignation') 是不可能的，

像下面的例子一样使用innerHTML

```
 <html>
    <script type="text/javascript">
    function changeText(){
        document.getElementById('boldStuff').innerHTML = 'is Software Developer';
    }
    </script>
    <body>
    <p>Employee Designation <b id='boldStuff'>is what?</b> </p> 
    <input type='button' onclick='changeText()' value='Change Text'/>
    </body>
    </html> 
```

编辑

```
 <script type="text/javascript">
    function changeText(){
             var get_des=getKeyValue('empDesignation');

            document.getElementById('change_id').innerHTML = get_des;
    }
    </script>

           <a href="#" id="change_id" onclick='changeText()'></a> 
```