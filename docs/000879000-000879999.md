# StackOverflow 问答 000879000-000879999

# java - 将文本从 Word 文档拖到 Java 文本组件？

> ID：879000
> 
> 赞同：1
> 
> 时间：2009-05-18T17:57:15.890
> 
> 标签：java, swing, ms-word, jtextcomponent

当您将文本块从 Word 文档拖到 Java 文本组件中时，该文本将从 Word 文档中删除。这在某些情况下显然是不可取的。有没有办法可以阻止 Word 删除文本，同时仍将其复制到 Java 文本组件中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T18:15:10.347

尝试在拖动时按住 ALT、CTL 或 SHIFT（我忘记了）。我相信这会改变光标的默认行为，从剪切 -> 复制。

您可以在 JText 组件中将默认的 Drop 操作设置为仅允许复制，我知道您可以在 SWT 中做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-18T19:22:19.573

从. `false`_ `TransferHandler.importData(JComponent comp,Transferable t)`你可以保留数据，但你告诉拖拽系统你没有拿走它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T18:15:30.423

我认为这是默认行为（即使您将文本从一个 Word 文档拖到另一个文档中也会发生这种情况）。您可能希望按住“Ctrl”键以获得所需的结果（Ctrl + Drag 强制执行复制操作）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T18:16:23.950

你不能使用复制/粘贴吗？突出显示 Word 文档中的任何内容并将其从 Word 文档中拖出到另一个文档或文本区域中，这相当于剪切和粘贴。Ctrl + C（复制）和 Ctrl + V（粘贴）的工作速度一样快。

# jquery - jQuery HighlightFade 插件的社区已经死了吗？

> ID：879009
> 
> 赞同：2
> 
> 时间：2009-05-18T17:59:41.393
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-highlightfade

我目前正在使用 jQuery [HighlightFade](http://jquery.offput.ca/)插件，似乎无法找到是否有人正在开发下一个版本（即超过 0.7）。我只是出去寻找一个新版本，因为在我将 jQuery.UI 从 1.5.x 更新到 1.7.x 之后 - 该插件不再适用于 IE 6/7/8（不确定这个插件是否依赖于 jQuery UI ，但我还是去搜索了）

如果有人知道为什么这个插件的 0.7 版本可能无法使用最新版本的 jQuery UI - 请告诉我。另外，如果有人知道插件的状态（或者如果这个插件死在水中，你可以推荐一个替代品）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T01:53:30.093

highlightFade 插件的功能现在可以使用动画效果方法在 jQuery 1.2 中使用。

来自[http://jquery.offput.ca/highlightFade/](http://jquery.offput.ca/highlightFade/)

> 耶！这个插件终于过时了。经过漫长的 1.1 版本发布后，jQuery 1.2 终于问世，随之而来的是对效果系统的升级。特别是它现在允许自定义动画。John Resig 与 1.2 一起发布了一个官方的 jQuery 插件，它添加了边框和背景动画，所以现在它比以前工作得更好，并且得到了 jQuery 团队的全力支持。您可以在 jquery 插件存储库中找到新的官方动画插件的站点。同时，可以在这里找到演示现在未维护的 highlightFade 插件的旧主页。

要为颜色设置动画，您将需要免费的“颜色动画”插件。

[http://plugins.jquery.com/project/color](http://plugins.jquery.com/project/color)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-16T14:11:55.883

我很好奇没有代码示例说明如何使用 jQuery 1.2 进行经典的“高亮淡入淡出”：

`$('#someDiv').effects('highlight')`

# regex - 是否可以更改 emacs 的正则表达式语法？

> ID：879011
> 
> 赞同：43
> 
> 时间：2009-05-18T17:59:59.410
> 
> 标签：regex, emacs, syntax, advising-functions

我喜欢emacs。我喜欢正则表达式。我讨厌 emacs 的正则表达式语法 - 需要转义分组括号和大括号，您*不*转义文字括号，缺少预定义的字符类等。

我可以替换 emacs 的正则表达式引擎，或者调整一些设置，以便当我使用 Query-replace-regexp（或许多其他功能之一）时，我可以使用我在 java/js/perl/ruby/etc 中编写的语法...？

**编辑：** 主题最初是“如何更改 emacs 的正则表达式引擎”，它不仅会更改转义规则并添加字符类，而且（帖子中未提及）添加对各种常见扩展的支持（？...）。诸如非捕获括号之类的功能：(?:...)，仅当/如果-不匹配时才匹配：(?=...)/(?!...) 等。我不相信（尽管很高兴得到纠正）这些是 emacs 当前的正则表达式引擎可能实现的，并且没有任何语法替换可以解决这个问题。

下面的解决方案通过替换为 emacs 理解的语法来解决转义和附加 char 类的原始问题。第二个答案（现已删除）建议建议（添加一个在另一个开头运行的函数）emacs 的正则表达式函数来替换所有正则表达式处理。作者很快审查了他/她自己，意识到这可能会破坏许多现有的 emacs 代码，最终该帖子被删除。

我仍然想将正则表达式引擎更改为支持扩展的引擎，但我同意普遍更改转义行为会造成严重破坏，我不愿意追逐。因此，我正在更改主题以匹配问题并接受回复。

我突然想到要更改引擎以支持通用语法和扩展，建议正则表达式函数将 emacs 内部代码转换为通用语法，建议交互式函数将我的通用语法转换为 emacs 语法（所以它可以是转换回通用）...但我认为即使是 RMS 也会在此之前推荐一个分叉。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-18T18:09:52.713

您可以定义自己的 elisp 函数来修改正则表达式，然后将其传递回 emacs。在伪 elisp 中：

```
(defun my-query-replace-regexp (regexp)
    ; modify regexp to replace ( with \(, { with \{, etc.
    (query-replace-regexp modified-regexp)
)

; rebind C-% to use new regexp function
(global-set-key "\C-%" 'my-query-replace-regexp) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-09T21:40:02.667

如果使用 Python 正则表达式进行增量搜索/替换，并且对于替换和查询替换就足够了，那么[visual-regexp-steroids](https://github.com/benma/visual-regexp-steroids.el)是一个不错的选择。

> visual-regexp-steroids 是 visual-regexp 的扩展，它支持使用现代正则表达式引擎（不再有转义的组括号和其他好东西！）...目前，开箱即用地支持 Python 和 pcre2el（在Linux 和 Windows）。

它默认为[Python 正则表达式](https://docs.python.org/2/library/re.html)。

一个非常好的功能是实时搜索/替换，例如从

```
one = 1
two = 2
three = 3
four = 4 
```

你可以像这样交换数字和字符串：

![在此处输入图像描述](https://i.stack.imgur.com/D0Bg9.png)

它可以通过[MELPA](http://melpa.org/#/)轻松安装。我的 .emacs 是：

```
(require 'visual-regexp-steroids)
(define-key global-map (kbd "C-c r") 'vr/isearch-backward)
(define-key global-map (kbd "C-c s") 'vr/isearch-forward)
(define-key global-map (kbd "C-c l") 'vr/replace)
(define-key global-map (kbd "C-c q") 'vr/query-replace) 
```

但显然您可以更改以适应，并根据需要覆盖用于搜索和替换的内置键映射。

# algorithm - 算法和方法有什么区别

> ID：879015
> 
> 赞同：22
> 
> 时间：2009-05-18T18:00:25.137
> 
> 标签：algorithm, methods

如何区分算法和方法？为什么我们不称牛顿法或福特-福克森法算法？什么是好的算法的属性以及什么使方法成为算法？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-05-18T18:13:22.783

算法以有限数量的步骤终止。

> 除了可能缺乏有限性之外，具有算法所有特征的过程可以称为计算方法。欧几里得最初不仅提出了数字的最大公约数的算法，而且还提出了一种非常相似的几何结构，用于两条线段长度的“最大公约数”；这是一种计算方法，如果给定的长度不可通约，则不会终止。-- D.Knuth，TAOCP vol 1，基本概念：算法

Newton Raphson 方法不能保证收敛，也不能检测收敛失败。如果你在有限的 epsilon 或有限的步数之后用收敛检测和终止来包装该方法，你就会得到一个算法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-18T18:05:44.720

“牛顿法”和“算法”中的“方法”一词在技术上没有区别。

编辑：经过反思，也许Pete 是正确的，算法终止而方法可能不会终止（我与Knuth 争论谁？）但是，我认为大多数人不会仅根据您使用一个词或另一个。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-18T18:09:02.107

在我看来，方法是比算法更通用的概念，可以或多或少是任何东西，例如将数据写入文件。几乎任何由于事件或某种逻辑表达而应该发生的事情。此外，“方法”和“算法”这两个词的含义可能会因使用它们的上下文而异。它们可能被用来描述同一件事。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-18T18:12:13.847

在一般的编程语言中，算法是完成任务的步骤。根据[维基百科](http://en.wikipedia.org/wiki/Algorithm)，

> 算法是有限的指令序列，是解决问题的明确的、逐步的过程，通常用于计算和数据处理。它在形式上是一种有效的方法，其中用于完成任务的定义明确的指令列表，在给定初始状态时，将通过一系列明确定义的连续状态，最终终止于结束状态。从一种状态到下一种状态的转变不一定是确定性的；一些称为概率算法的算法包含随机性。<

在计算机科学中，方法或函数是面向对象编程哲学的一部分，其中程序由包含执行特定任务的方法/函数的类组成。再次引用[维基百科](http://en.wikipedia.org/wiki/Method_(computer_science))

> 在面向对象的编程中，方法是与类（称为类方法或静态方法）或与对象（称为实例方法）专门关联的子例程。与过程编程语言中的过程类似，方法通常由执行操作的语句序列、用于自定义这些操作的一组输入参数以及可能的某种输出值（称为返回值）组成。方法可以提供一种机制来访问（用于读取和写入）存储在对象或类中的封装数据。<

简而言之，算法是我们执行诸如打开灯泡之类的操作的步骤：

1) 步行开关 2) 翻转开关 3) 电子流 4) 产生的光

方法是我们在类中实际编写动作的地方。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-18T18:06:46.403

我认为这只是因为算法的起源域。如果发明者具有计算机科学背景，他可能更喜欢称为算法。在数学和其他科学领域，他们可能更喜欢所谓的方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-18T18:08:46.257

在您所说的上下文中（牛顿法等），算法和方法之间没有本质区别。两者都是解决问题的分步说明。在关于牛顿法的维基百科文章中，它指出“该算法是 Householder 方法类中的第一个，后继是 Halley 方法”。边界充其量是模糊的。

在计算机科学中，算法仍然是解决问题的逐步方式 - 一组与实现无关的步骤。方法通常是指与执行某些任务的类或对象相关联的代码块——它可以潜在地实现许多算法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-18T18:12:30.727

好吧，对于词源爱好者

[http://www.etymonline.com/index.php?search=algorithm+method&searchmode=or](http://www.etymonline.com/index.php?search=algorithm+method&searchmode=or)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-02-28T18:05:48.927

算法就像一个公式，一步一步解决任何特定问题，对任何一步都没有歧义，并且必须有一个终点。方法论是任何解决方案的更一般形式。它提供了一种解决任何问题的方法，但在算法中，这种方法更精确地制定解决方案。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-05-10T21:01:56.393

方法好比策略，算法好比战术。一个例子：在战争中，你制定了一个战略（方法）来接管一个国家：先占领港口，向西推进陆地，然后包围首都等。这个战略分为几个战术阶段（算法）：首先，一个一步一步地告诉士兵他们将如何占领港口；然后，告诉士兵他们必须如何向西前进；然后，一个带有士兵包围城市的确切步骤，等等。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-14T05:05:21.613

一个过程可以永远持续下去。作为一种算法，最终将终止并且将精确定义每个步骤。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2009-05-18T18:35:20.743

关于 Ford-Faulkerson 方法，CLRS 将其称为方法而不是算法，因为“它包含具有不同运行时间的多个实现”[pp 651\. 第 2 版]

# asp.net - 通过代码安全调用 Web 服务以登录服务 (.NET / WCF)

> ID：879017
> 
> 赞同：0
> 
> 时间：2009-05-18T18:00:42.903
> 
> 标签：asp.net, wcf, web-services, security

我的网络应用程序将调用网络服务。

我正在寻找登录网络服务的最佳实践/指南，因此我知道授权用户正在尝试访问它，而不仅仅是任何人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T18:10:55.490

[一篇关于 WCF 授权的好文章](http://msdn.microsoft.com/en-us/magazine/cc948343.aspx)。它讨论了许多选项。

# asp.net - web.config 不包含成员资格部分

> ID：879021
> 
> 赞同：1
> 
> 时间：2009-05-18T18:02:18.627
> 
> 标签：asp.net, membership

我正在关注这个演练：http: [//msdn.microsoft.com/en-us/library/879kf95c.aspx](http://msdn.microsoft.com/en-us/library/879kf95c.aspx) 使用开箱即用的 asp.net 登录和注册控件添加用户登录和注册页面。例如，对于用户注册，我使用 CreateUserWizard。

现在我想自定义注册过程，我想删除安全问题，并添加一个“位置”字段来询问。

与此相关的所有文章都提到了 web.config 中的“会员”和“个人资料”部分，我的问题是它们不在我的 web.config 中。我应该手动添加它们吗？或者它们应该存在（自动生成）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T18:07:35.167

您必须在 web.config 中手动注册 MembershipProvider：

```
 <membership>
 <providers>
   <clear/>
    <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" passwordFormat="Hashed" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" passwordStrengthRegularExpression="" applicationName="/"/>
  </providers>
  </membership> 
```

connectionString 属性用于设置在 web.config 中注册的连接字符串的名称，该名称适用于您的 memeberhsip 提供程序

```
<connectionStrings>
        <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient"/>
    </connectionStrings> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T18:07:45.777

继续并手动输入信息。当 Visual Studio “自动”为您生成 web.config 文件时，它基于当前项目设置和它可能检测到的任何潜在依赖项。它不包含每个 web.config 选项，并且根据需要添加新字段是安全的。

# msbuild - 遵守 msbuild 调用的批处理文件中的退出代码

> ID：879023
> 
> 赞同：8
> 
> 时间：2009-05-18T18:02:45.363
> 
> 标签：msbuild, batch-file, msbuild-task

我有一个使用`exit`命令返回退出代码的批处理文件。

在某些情况下，可以从命令行以交互方式调用此批处理文件，或者在其他情况下，可以使用`Exec`任务将其作为 MSBuild 项目的一部分运行。

*   如果我`exit %errorlevel%`在我的批处理文件中使用它会很好，并且 MSBuild 会看到错误代码，**但是**在这种情况下，从命令窗口运行批处理文件的交互式用户将粗鲁地退出 cmd.exe。
*   如果我使用`exit /b %errorlevel%`交互式场景没有得到粗鲁的退出，但这也意味着`cmd`我的`Exec`任务启动的也没有退出，因此 MSBuild 看不到返回值。

作为这两个问题的解决方案，我正在尝试使用`exit /b`但从我的构建脚本中启动批处理文件，如下所示：

```
<Exec Command="Batch.cmd params &amp; exit %errorlevel%" /> 
```

这个想法是我明确地从“非终端”返回`exit /b`并手动调用以在构建任务可以看到它`exit`的位置之外传播这个值。`cmd.exe``Exec`

这似乎是完美的解决方案，但它不起作用。`Exec`仍然没有得到正确的错误值。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-19T03:02:41.373

处理此问题的一种方法可能是让 MSBuild 将参数传递给批处理文件，以便它知道 MSBuild 正在调用它，而不是从命令提示符处调用它。例如，我创建了如下所示的示例文件 test.bat

```
ECHO OFF

IF (%1)==() goto Start
SET fromMSBuild=1

:Start

ECHO fromMSBuild:%fromMSBuild%

REM ***** Perform your actions here *****

set theExitCode=101
GOTO End

:End
IF %fromMSBuild%==1 exit %theExitCode%

REM **** Not from MSBuild ****

ECHO Exiting with exit code %theExitCode%
exit /b %theExitCode% 
```

我创建了 MSBuild 文件 wrapper.proj，它是：

```
<Project DefaultTargets="Demo" ToolsVersion="3.5"
         xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <PropertyGroup>
    <BatchFile>test.bat</BatchFile>
    <FromMSBuild>FromMSBuild</FromMSBuild>
  </PropertyGroup>

  <Target Name="Demo">

    <Message Text="Executing batch file $(BatchFile)" Importance="high"/>

    <PropertyGroup>
      <_Command>$(BatchFile) $(FromMSBuild)</_Command>
    </PropertyGroup>

    <Exec Command="$(_Command)">
      <Output PropertyName="CommandExitCode" TaskParameter="ExitCode"/>
    </Exec>

    <Message Text="CommandExitCode: $(CommandExitCode)"/>

  </Target>
</Project> 
```

如果您从命令提示符执行文件 test.bat，结果是

```
C:\Data\Development\My Code\Community\MSBuild\BatchFile>test.bat

C:\Data\Development\My Code\Community\MSBuild\BatchFile>ECHO OFF
fromMSBuild:0
Exiting with exit code 101 
```

从 MSBuild 得出的结果是：

```
C:\Data\Development\My Code\Community\MSBuild\BatchFile>msbuild Wrapper.proj /t:Demo /fl /nologo
Build started 5/18/2009 10:54:52 PM.
Project "C:\Data\Development\My Code\Community\MSBuild\BatchFile\Wrapper.proj" on node 0 (Demo target(s)).
  Executing batch file test.bat
  fromMSBuild:1
C:\Data\Development\My Code\Community\MSBuild\BatchFile\Wrapper.proj(17,5): error MSB3073: The command "test.bat FromMSBuild" exi
ted with code 101.
Done Building Project "C:\Data\Development\My Code\Community\MSBuild\BatchFile\Wrapper.proj" (Demo target(s)) -- FAILED.

Build FAILED.

"C:\Data\Development\My Code\Community\MSBuild\BatchFile\Wrapper.proj" (Demo target) (1) ->
(Demo target) ->
  C:\Data\Development\My Code\Community\MSBuild\BatchFile\Wrapper.proj(17,5): error MSB3073: The command "test.bat FromMSBuild" e
xited with code 101.

    0 Warning(s)
    1 Error(s)

Time Elapsed 00:00:00.06 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T10:27:35.103

这个问题有点老了，但回答可能仍然很有趣，所以这里是：

将您的 MSBuild 任务稍微修改为

```
<Exec Command='cmd.exe /C "call Batch.cmd params &amp;&amp; exit %errorlevel%"' /> 
```

并保持

```
exit /b %errorlevel% 
```

在您的 Batch.cmd 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-12T09:31:58.197

我还没有尝试过，但是如果您只是设置了一个名为 ERRORLEVEL 的环境变量呢？在执行命令的内容之后隐藏，MSBuild 具有“退出 %ERRORLEVEL%”。%ERRORLEVEL% 如果设置覆盖任何实际错误级别。

# api - 远程控制 API 或如何启动？

> ID：879028
> 
> 赞同：4
> 
> 时间：2009-05-18T18:04:54.953
> 
> 标签：api, remote-desktop, remote-control, logmein

如果有任何机会，我想开发自己的远程协助/屏幕共享工具以包含在我自己的 CRM 中，我应该去哪里？

我对沟通一无所知，但我想参与这样的想法。我的问题是，创建[LogMeIn](http://www.logmein.com) / [CoPilot](http://www.copilot.com) /etc产品的基本知识和基本结构是什么？

我记得乔尔（几年前）在一次 PodCast 中谈到了 CoPilot，他使用了一位才华横溢的伙伴用 C++ 开发了整个协议......

关于如何实现这一点的任何想法，或者是否有一个开放的 API 等着我？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-09-22T11:24:54.413

请看这篇文章：[VNC、Fog Creek Copilot 等远程控制软件的工作原理](http://brianbondy.com/blog/id/87/)。

我将根据该博客文章的内容在此处提供一些额外的详细信息，但这更具体到 Fog Creek Copilot 源代码。所有这些数据都是通过查看源代码获得的。

基本上，Copilot 不是用 C++ 从头开始​​编写的，而是基于 GPL 的 TightVNC 构建的。是的，这意味着 Copilot 的主要来源也必须提供。您可以在[此处获取 Fog Creek copilot 源代码](https://www.copilot.com/faq/#t28)。据我了解，只要您也将其设为 GPL，您就可以从该项目的源代码中构建您的解决方案。

该项目分为 Mac 版本和 Windows 版本。Mac 版本内置于 Objective C，windows 版本内置于 Win32 C++（不是 MFC）。对于 Windows 版本，VS 2008 提供了一个 Helper 解决方案，VS 2008 提供了一个 Host 解决方案（主机是被帮助的人）。我认为他们没有使用 Trolltech 的 Qt，因为它的链接大小很大，这很重要给他们以保持下载量非常小，因为它最初必须由每个帮助某人和每个需要帮助的人下载。

没有 x64 或 IA64 配置，因此 Windows 上的所有代码仅作为 x86 进程运行。它可以通过 WOW64 在 64 位窗口上运行，就像任何其他 32 位进程可以使用一样。

据我了解，大部分情况下，开发是通过在 VM 上运行的主机完成的。Helper 的开发是在他们的桌面上完成的。

Copilot 源代码使用 boost 1.38 和其他几个第三方库。这些库包括用于 NAT 遍历的 STUNT、MatrixSSL、libntlm（用于 Microsoft 的 NTLM 身份验证的库）和omnithread（线程和同步库）。

大多数情况下，它使用 bsd 样式的套接字，但在 boost::asio 中也有一些网络代码。这是有问题的，因为 boost::asio 1.38 中有很多在 boost 1.40 中修复的错误。该项目还有一个windows hook dll，用于在主机上挂钩键盘、鼠标和其他windows消息。

有一个与 windows shell 不同的 shell 项目，但它基本上包含 3 个二进制文件：主机、删除程序和钩子 dll。它提取这些。

他们没有给出的是反射器和网站的源代码，据我从[projectaardvark.com](http://projectaardvark.com)上的一些博客文章中了解到，它们都是 C#，其他一切都是 C++。反射器的目的是协助 NAT 穿越。顺便说一下，取代[projectaardvark.com](http://projectaardvark.com)的新博客名为[Air Traffic](http://blog.copilot.com/)。

VNC 基于远程帧缓冲协议。如果您有很多协议经验，RFB 协议本身并不难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T18:26:15.503

看看开源 VNC 程序。它们允许受密码保护的屏幕共享和查看

[http://www.realvnc.com/vnc/index.html](http://www.realvnc.com/vnc/index.html) [http://en.wikipedia.org/wiki/Virtual_Network_Computing](http://en.wikipedia.org/wiki/Virtual_Network_Computing) [http://libvncserver.sourceforge.net/](http://libvncserver.sourceforge.net/)

我希望**VNC**库和应用程序有所帮​​助。它们用于 Windows 和各种 Unix 系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T18:09:14.133

您可以查看远程桌面 activeX 控件。在这种情况下，协议是 RPC（有据可查）。此外，通信和远程 UI 层都已为您完成，您只需编写一些简单的 UI shell 代码。

# winapi - closesocket() 失败并显示 WSAEOPNOTSUPP

> ID：879033
> 
> 赞同：1
> 
> 时间：2009-05-18T18:07:03.280
> 
> 标签：winapi, sockets

我有一个使用套接字的应用程序（我没有写，所以请耐心等待），当我尝试关闭套接字时，closesocket() 失败并出现错误 WSAEOPNOTSUPP 并且套接字仍然存在......就像在，它不是完全删除。

套接字创建如下：

```
bool Socket::CreateConnection()
{
   int error;
   struct addrinfo hints;
   struct addrinfo *list = NULL;

   memset(&hints, 0, sizeof(hints));
   hints.ai_family = AF_INET;
   hints.ai_socktype = SOCK_STREAM;
   hints.ai_protocol = IPPROTO_TCP;

   error = getaddrinfo(socketAddress.c_str(), socketPort.c_str(), &hints, &list);
   if (error)
   {
      Log().RecordError("Unable to initialize connection to server", WSAGetLastError(), EventTypeError);
   }

   for (struct addrinfo *ptr = list; ptr != NULL; ptr = ptr->ai_next)
   {
      connection = socket(ptr->ai_family, ptr->ai_socktype, ptr->ai_protocol);
      if (connection == INVALID_SOCKET)
      {
         Log().RecordError("Unable to initialize socket connection", WSAGetLastError(), EventTypeError);
         break;
      }

      error = connect(connection, ptr->ai_addr, (int)ptr->ai_addrlen);
      if (error == SOCKET_ERROR)
      {
         closesocket(connection);
         connection = INVALID_SOCKET;
         continue;
      }
      break;
   }

   freeaddrinfo(list);

   return connection != INVALID_SOCKET;
} 
```

以及该类的析构函数：

```
Socket::~Socket()
{
   int error;

   if (connection != INVALID_SOCKET)
   {
      continueReading = false;

      error = shutdown(connection, SD_SEND);
      if (error != SOCKET_ERROR)
      {
         /* Finish any necessary receives to politely close the socket */
         int length;
         do
         {
            char buffer[1024];
            length = recv(connection, buffer, sizeof(buffer)/sizeof(*buffer), MSG_WAITALL);
         } while (length > 0);
      }
      else
      {
         Log().RecordError("Error shutting down connection to server", WSAGetLastError(), EventTypeError);
      }

      closesocket(connection);  //Fails HERE
      int wsa_err = WSAGetLastError();
      if(wsa_err)
          Log().RecordError("closesocket() error", wsa_err, EventTypeError);
   }

   if (winsockInitialized)
   {
      WSACleanup();
   }
} 
```

任何人都知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T18:22:46.043

您没有检查 closesocket() 上的返回代码，这意味着 WSAGetLastError() 可能与 closesocket 操作相关，也可能不相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T18:23:59.520

我不是 Windows 套接字专家，但我仍然会尝试.. 你确定返回的代码`WSAGetLastError()`关注到调用`closesocket()`吗？

引用[msdn](http://msdn.microsoft.com/en-us/library/ms741580(VS.85).aspx)：

> ...这是必要的，因为如果某些功能成功，**可能会将**最后一个扩展错误代码重置为 0 ...

我假设您之前可能有一个与套接字相关的调用失败（？）。Msdn 告诉在每个与套接字相关的调用之后，您必须通过`WSASetLastError()`使用 0 调用来防止这种情况发生。

> 要专门重置扩展错误代码，请使用将 iError 参数设置为零的 WSASetLastError 函数调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-24T09:12:42.517

几乎可以肯定，错误状态是上一次操作遗留下来的。Winsock 函数在成功时通常不会清除错误状态。

检查 closesocket() 的返回码。如果这不表示错误，那么 WSAGetLastError() 的值是没有意义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-27T11:20:32.347

由于 windows xp 不支持标志 MSG_WAITALL，因此错误代码是从 recv 遗留下来的

# opengl - 在没有 GLUT 的情况下初始化 OpenGL

> ID：879035
> 
> 赞同：43
> 
> 时间：2009-05-18T18:07:15.853
> 
> 标签：opengl, glut

我能找到的每个介绍和示例似乎都使用 GLUT 或其他一些框架来“初始化”OpenGL。有没有办法用 GL 和 GLU 中可用的东西来初始化 OpenGL？如果不是，那么没有它，GLUT 做什么是不可能的？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-05-18T18:30:43.360

正如 luke 所指出的，创建和绑定上下文的代码特定于每个窗口平台。

这里有一些函数可以帮助您在特定平台上初始化 OpenGL：

Windows（[这里](http://www.nullterminator.net/opengl32.html)有教程）

*   wglCreateContext(hDC)

Mac OS X -- OS X 本质上具有三个选项：Carbon、Cocoa 和底层核心图形层

*   [Mac OS X OpenGL 开发的完整指南](http://developer.apple.com/documentation/graphicsimaging/Conceptual/OpenGL-MacProgGuide/opengl_intro/opengl_intro.html)
*   [碳](http://developer.apple.com/documentation/graphicsimaging/Reference/AGL_OpenGL/Reference/reference.html)：aglCreateContext
*   [Cocoa](http://developer.apple.com/documentation/GraphicsImaging/Conceptual/OpenGL-MacProgGuide/opengl_drawing/opengl_drawing.html#//apple_ref/doc/uid/TP40001987-CH404-SW23)：创建（或子类化）一个 NSOpenGLView。他们创建自己的上下文，您可以阅读他们的方法文档以了解如何使其成为最新的。
*   [CoreGraphicsLayer](http://developer.apple.com/documentation/GraphicsImaging/Reference/CGL_OpenGL/Reference/reference.html)：CGLCreateContext

Linux

*   [glx](http://www.opengl.org/sdk/docs/man/) : glXCreateContext

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-18T18:10:14.337

您正在做的是使用 OpenGL 上下文初始化一个窗口。这需要对操作系统进行一些调用。仅使用 gl.h 和 glu.h 无法初始化 OpenGL。 [GLUT](http://www.xmission.com/~nate/glut.html)（或[SDL](http://www.libsdl.org/)、[SMFL](http://www.sfml-dev.org/)等）以一种很好的平台独立方式为您工作。您也可以使用本机调用进行初始化。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-16T14:14:10.400

**[GLX](https://en.wikipedia.org/wiki/GLX)最小可运行示例**

![](https://i.stack.imgur.com/883hU.png)

改编自[这里](https://www.opengl.org/discussion_boards/showthread.php/177999-GCC-OpenGL-without-glut?p=1239444&viewfull=1#post1239444)。

还处理键盘输入。

编译：

```
gcc glx.c -lGLU -lGL -lX11 
```

在 Ubuntu 14.04 中测试：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>
#include <sys/time.h>
#define GL_GLEXT_PROTOTYPES
#define GLX_GLXEXT_PROTOTYPES
#include <GL/gl.h>
#include <GL/glu.h>
#include <GL/glx.h>

struct MyWin {
    Display  *display;
    Window win;
    int displayed;
    int width;
    int height;
};

const int WIN_XPOS = 256;
const int WIN_YPOS = 64;
const int WIN_XRES = 320;
const int WIN_YRES = 320;
const int NUM_SAMPLES = 4;

struct MyWin Win;

double elapsedMsec(const struct timeval *start, const struct timeval *stop) {
    return ((stop->tv_sec  - start->tv_sec ) * 1000.0 +
            (stop->tv_usec - start->tv_usec) / 1000.0);
}

void displayCB() {
    glClear(GL_COLOR_BUFFER_BIT);
    glLoadIdentity();
    gluLookAt(0.0, 0.0, 5.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0);
    glBegin(GL_TRIANGLES);
    glColor3f(1.0f, 0.0f, 0.0f);
    glVertex3f( 0.0f, 1.0f, 0.0f);
    glVertex3f(-1.0f, -1.0f, 0.0f);
    glVertex3f( 1.0f, -1.0f, 0.0f);
    glEnd();
    glFlush();
    glXSwapBuffers(Win.display, Win.win);
}

void keyboardCB(KeySym sym, unsigned char key, int x, int y,
        int *setting_change) {
    switch (tolower(key)) {
        case 27:
            exit(EXIT_SUCCESS);
            break;
        case 'k':
            printf("You hit the 'k' key\n");
            break;
        case 0:
            switch (sym) {
                case XK_Left  :
                    printf("You hit the Left Arrow key\n");
                    break;
                case XK_Right :
                    printf("You hit the Right Arrow key\n");
                    break;
            }
            break;
    }
}

void reshapeCB(int width, int height) {
    Win.width = width;
    Win.height = height;
    glViewport(0, 0, width, height);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glFrustum(-1.0, 1.0, -1.0, 1.0, 1.5, 20.0);
    glMatrixMode(GL_MODELVIEW);
}

/* Try to find a framebuffer config that matches
 * the specified pixel requirements.
 */
GLXFBConfig chooseFBConfig(Display *display, int screen) {
    static const int Visual_attribs[] = {
        GLX_X_RENDERABLE  , True,
        GLX_DRAWABLE_TYPE , GLX_WINDOW_BIT,
        GLX_RENDER_TYPE   , GLX_RGBA_BIT,
        GLX_X_VISUAL_TYPE , GLX_TRUE_COLOR,
        GLX_RED_SIZE      , 8,
        GLX_GREEN_SIZE    , 8,
        GLX_BLUE_SIZE     , 8,
        GLX_ALPHA_SIZE    , 8,
        GLX_DEPTH_SIZE    , 24,
        GLX_STENCIL_SIZE  , 8,
        GLX_DOUBLEBUFFER  , True,
        GLX_SAMPLE_BUFFERS, 1,
        GLX_SAMPLES       , 4,
        None
    };
    int attribs [ 100 ] ;
    memcpy(attribs, Visual_attribs, sizeof(Visual_attribs));
    GLXFBConfig ret = 0;
    int fbcount;
    GLXFBConfig *fbc = glXChooseFBConfig(display, screen, attribs, &fbcount);
    if (fbc) {
        if (fbcount >= 1)
            ret = fbc[0];
        XFree(fbc);
    }
    return ret;
}

GLXContext createContext(Display *display, int screen,
        GLXFBConfig fbconfig, XVisualInfo *visinfo, Window window) {
#define GLX_CONTEXT_MAJOR_VERSION_ARB       0x2091
#define GLX_CONTEXT_MINOR_VERSION_ARB       0x2092
    typedef GLXContext (*glXCreateContextAttribsARBProc)(Display*,
            GLXFBConfig, GLXContext, int, const int*);
    /* Verify GL driver supports glXCreateContextAttribsARB() */
    /*   Create an old-style GLX context first, to get the correct function ptr. */
    glXCreateContextAttribsARBProc glXCreateContextAttribsARB = 0;
    GLXContext ctx_old = glXCreateContext(display, visinfo, 0, True);
    if (!ctx_old) {
        printf("Could not even allocate an old-style GL context!\n");
        exit(EXIT_FAILURE);
    }
    glXMakeCurrent (display, window, ctx_old) ;
    /* Verify that GLX implementation supports the new context create call */
    if (strstr(glXQueryExtensionsString(display, screen),
                "GLX_ARB_create_context") != 0)
        glXCreateContextAttribsARB = (glXCreateContextAttribsARBProc)
            glXGetProcAddress((const GLubyte *) "glXCreateContextAttribsARB");
    if (!glXCreateContextAttribsARB) {
        printf("Can't create new-style GL context\n");
        exit(EXIT_FAILURE);
    }
    /* Got the pointer.  Nuke old context. */
    glXMakeCurrent(display, None, 0);
    glXDestroyContext(display, ctx_old);

    /* Try to allocate a GL 4.2 COMPATIBILITY context */
    static int Context_attribs[] = {
        GLX_CONTEXT_MAJOR_VERSION_ARB, 4,
        GLX_CONTEXT_MINOR_VERSION_ARB, 2,
        GLX_CONTEXT_PROFILE_MASK_ARB , GLX_CONTEXT_COMPATIBILITY_PROFILE_BIT_ARB,
        /*GLX_CONTEXT_PROFILE_MASK_ARB, GLX_CONTEXT_CORE_PROFILE_BIT_ARB, */
        /*GLX_CONTEXT_FLAGS_ARB       , GLX_CONTEXT_FORWARD_COMPATIBLE_BIT_ARB, */
        /*GLX_CONTEXT_FLAGS_ARB       , GLX_CONTEXT_DEBUG_BIT_ARB, */
        None
    };
    GLXContext context = glXCreateContextAttribsARB(display, fbconfig, 0,
            True, Context_attribs);
    /* Forcably wait on any resulting X errors */
    XSync(display, False);
    if (!context) {
        printf("Failed to allocate a GL 4.2 context\n");
        exit(EXIT_FAILURE);
    }
    printf("Created GL 4.2 context\n");
    return context;
}

void createWindow() {
    /* Init X and GLX */
    Win.displayed = 0;
    Display *display = Win.display = XOpenDisplay(":0.0");
    if (!display)
        printf("Cannot open X display\n");
    int    screen   = DefaultScreen(display);
    Window root_win = RootWindow(display, screen);
    if (!glXQueryExtension(display, 0, 0))
        printf("X Server doesn't support GLX extension\n");
    /* Pick an FBconfig and visual */
    GLXFBConfig fbconfig = chooseFBConfig(display, screen);
    if (!fbconfig) {
        printf("Failed to get GLXFBConfig\n");
        exit(EXIT_FAILURE);
    }
    XVisualInfo *visinfo = glXGetVisualFromFBConfig(display, fbconfig);
    if (!visinfo) {
        printf("Failed to get XVisualInfo\n");
        exit(EXIT_FAILURE);
    }
    printf("X Visual ID = 0x%.2x\n", (int)visinfo->visualid);
    /* Create the X window */
    XSetWindowAttributes winAttr ;
    winAttr.event_mask = StructureNotifyMask | KeyPressMask ;
    winAttr.background_pixmap = None ;
    winAttr.background_pixel  = 0    ;
    winAttr.border_pixel      = 0    ;
    winAttr.colormap = XCreateColormap(display, root_win,
            visinfo->visual, AllocNone);
    unsigned int mask = CWBackPixmap | CWBorderPixel | CWColormap | CWEventMask;
    Window win = Win.win = XCreateWindow (display, root_win,
            WIN_XPOS, WIN_YPOS,
            WIN_XRES, WIN_YRES, 0,
            visinfo->depth, InputOutput,
            visinfo->visual, mask, &winAttr) ;
    XStoreName(Win.display, win, "My GLX Window");
    /* Create an OpenGL context and attach it to our X window */
    GLXContext context = createContext(display, screen, fbconfig, visinfo, win);
    if (! glXMakeCurrent(display, win, context))
        printf("glXMakeCurrent failed.\n");
    if (! glXIsDirect (display, glXGetCurrentContext()))
        printf("Indirect GLX rendering context obtained\n");
    /* Display the window */
    XMapWindow(display, win);
    if (! glXMakeCurrent(display, win, context))
        printf("glXMakeCurrent failed.\n");
    printf("Window Size    = %d x %d\n", WIN_XRES, WIN_YRES);
    printf("Window Samples = %d\n", NUM_SAMPLES);
}

void processXEvents(Atom wm_protocols, Atom wm_delete_window) {
    int setting_change = 0;
    while (XEventsQueued(Win.display, QueuedAfterFlush)) {
        XEvent event;
        XNextEvent(Win.display, &event);
        if(event.xany.window != Win.win)
            continue;
        switch (event.type) {
            case MapNotify:
                {
                    Win.displayed = 1;
                    break;
                }
            case ConfigureNotify:
                {
                    XConfigureEvent cevent = event.xconfigure;
                    reshapeCB(cevent.width, cevent.height);
                    break;
                }
            case KeyPress:
                {
                    char chr;
                    KeySym symbol;
                    XComposeStatus status;
                    XLookupString(&event.xkey, &chr, 1, &symbol, &status);
                    keyboardCB(symbol, chr, event.xkey.x, event.xkey.y,
                            &setting_change);
                    break;
                }
            case ClientMessage:
                {
                    if (event.xclient.message_type == wm_protocols &&
                            (Atom)event.xclient.data.l[0] == wm_delete_window) {
                        exit(EXIT_SUCCESS);
                    }
                    break;
                }
        }
    }
}

void mainLoop() {
    /* Register to receive window close events (the "X" window manager button) */
    Atom wm_protocols     = XInternAtom(Win.display, "WM_PROTOCOLS"    , False);
    Atom wm_delete_window = XInternAtom(Win.display, "WM_DELETE_WINDOW", False);
    XSetWMProtocols(Win.display, Win.win, &wm_delete_window, True);

    while (1) {
        /* Redraw window (after it's mapped) */
        if (Win.displayed)
            displayCB();

        /* Update frame rate */
        struct timeval last_xcheck = {0, 0};
        struct timeval now;
        gettimeofday(&now, 0);

        /* Check X events every 1/10 second */
        if (elapsedMsec(&last_xcheck, &now) > 100) {
            processXEvents(wm_protocols, wm_delete_window);
            last_xcheck = now;
        }
    }
}

int main(int argc, char *argv[]) {
    Win.width = WIN_XRES;
    Win.height = WIN_YRES;
    createWindow();

    glClearColor(0.0, 0.0, 0.0, 0.0);
    glShadeModel(GL_FLAT);

    printf("Valid keys: Left, Right, k, ESC\n");
    printf("Press ESC to quit\n");
    mainLoop();
    return EXIT_SUCCESS;
} 
```

TODO 在 Ubuntu 20.04 上失败了：

```
Invalid MIT-MAGIC-COOKIE-1 keyCannot open X display
Segmentation fault (core dumped) 
```

和 Debian 8：

```
Failed to get GLXFBConfig 
```

人们总是可以打开[FreeGlut](https://github.com/dcnieho/FreeGLUT)的源代码，看看它是如何实现每个 glut 功能的，但低于 GLX 的级别可能是硬核。

**EGL**

看起来像是 GLX 的 Khronos 标准化替代品，目前最常与 OpenGL ES 一起使用。

[https://cgit.freedesktop.org/mesa/demos/tree/src/egl](https://cgit.freedesktop.org/mesa/demos/tree/src/egl)包含使用 Mesa 实现的示例，但我还没有设法使它们工作：

```
git checkout mesa-demos-8.1.0
./autogen.sh
./configure
make 
```

失败：

```
/work/git/mesa-demos/src/egl/opengl/demo1.c:26: undefined reference to `eglGetScreensMESA' 
```

但是Ubuntu 14.04已经`es2gears`在`mesa-utils-extra`包里了，所以一定有办法。

另请参阅：[什么是 EGL 以及如何使用它](https://stackoverflow.com/questions/3127360/what-is-egl-and-how-can-i-use-it)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-18T18:15:04.700

您可以获取[GLUT 源代码](http://www.xmission.com/~nate/glut.html)并查看您关注的任何平台的初始化代码。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-18T18:27:59.103

GL 是一个 API，而 GLU 是一个在 GL 之上的实用程序库。它完全独立于操作系统。

OpenGL 初始化和扩展获取是平台相关的操作。因此，仅使用 OpenGL 就无能为力。

GLUT 是一个快速不足且非常糟糕的库，它所做的只是它初始化了 opengl 上下文并提供了一些原始的鼠标/键盘输入模块来让你继续前进。

Win32 也提供了初始化 opengl 上下文的工具。对于 linux，您可以查看 GLX。此外，如果您想要一种独立于系统的方式，那么您可以查看 SDL。对于不同的编程语言，可能会有一些实用程序为您提供独立于平台的桌面 API。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2011-12-22T13:37:09.943

您可以查看 Galaxy Forces V2 的来源，[http://www.galaxy-forces.com/](http://www.galaxy-forces.com/)

它在不使用 GLUT 或 Windows、Mac 和 Linux 上的其他库的情况下为 OpenGL 实现类。使用本机平台代码，所有公共领域。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2009-05-18T18:23:27.490

这是一个关于如何在不使用 GLUT 的情况下初始化 OpenGL（假设是 windows）的基本且很好的介绍：

[没有 GLUT 的初始化 OpenGL](http://nehe.gamedev.net/data/lessons/lesson.asp?lesson=01)

正如 Luke 所说，如果您不想使用 GLUT，则需要有关您正在开发的操作系统的特定信息。使用 GLUT 将使您的代码更容易移植。

# ruby - Redmine 插件：未初始化的常量 I18n

> ID：879036
> 
> 赞同：0
> 
> 时间：2009-05-18T18:07:18.303
> 
> 标签：ruby, plugins, redmine

我们刚刚安装了 Redmine Charts ( [http://github.com/mszczytowski/redmine_charts/tree/master](http://github.com/mszczytowski/redmine_charts/tree/master) ) 和相关的 OpenFlashChart 插件，但是当我们启动 Ruby 服务器时，我们收到以下错误。我们的步骤是：

1.  下载图表的 tar 文件
2.  解压到 $REDMINE_ROOT/plugins 目录
3.  $REDMINE_ROOT/script/plugin 安装[http://svn.pullmonkey.com/plugins/trunk/open_flash_chart/](http://svn.pullmonkey.com/plugins/trunk/open_flash_chart/)
4.  尝试启动服务器

    => 正在启动 WEBrick... /usr/lib64/ruby/gems/1.8/gems/activesupport-2.1.2/lib/active_support/dependencies.rb:276:in `load_missing_constant': uninitialized constant Redmine::I18n (NameError) from /usr/lib64/ruby/gems/1.8/gems/activesupport-2.1.2/lib/active_support/dependencies.rb:468:in`const_missing' 来自 /usr/local/apps/redmine-0.8 /vendor/plugins/mszczytowski-redmine_charts-e3c5010466d7585d987bc1018e94daee90906a5d/lib/redmine_charts/line_data_converter.rb:4 来自 /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in`gem_original_require' from /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in`来自 /usr/lib64/ruby /gems/1.8/gems/activesupport-2.1.2/lib/active_support/dependencies.rb:510:in `require' from /usr/lib64/ruby/gems/1.8/gems/activesupport-2.1.2/lib/active_support/dependencies.rb:355:in`new_constants_in' 来自 /usr/lib64/ruby/gems/1.8/gems/activesupport-2.1.2/lib/active_support/ dependencies.rb:510:in `require' from /usr/lib64/ruby/gems/1.8/gems/activesupport-2.1.2/lib/active_support/dependencies.rb:102:in`require_or_load' ... 27 个级别...来自 /usr/lib64/ruby/gems/1.8/gems/rails-2.1.2/lib/commands/server.rb:39 来自 /usr/ lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in`gem_original_require' from /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in`要求'从脚本/服务器：3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T21:29:34.963

查看 redmine_charts 的来源，它需要 Redmine::I18n - 有几个“包含 Redmine::I18n”的实例。

有关 Rails、Redmine 和 I18n 的更多信息，另请参见[http://www.redmine.org/news/22 。](http://www.redmine.org/news/22)

看来您可能有版本控制（Rails 和 Redmine）问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-19T19:23:00.470

Redmine's`I18n`是最近添加的多语言版本。它仅在 Redmine 的主干版本中可用，Redmine 的 0.8.x 版本使用较旧的`GLoc`插件。

您有几个选项可以解决此问题：

*   升级到Redmine的主干版
*   要求开发人员使插件与 Redmine 的发布版本兼容（我个人为我的 Redmine 插件这样做）
*   或者尝试自己修复`I18n`错误

要修复错误，您需要检查代码并将所有提及的内容替换为`I18n`，然后在插件目录`GLoc`中创建旧版本的翻译。`lang/`

埃里克·戴维斯

# javascript - 基于原型的 OO 相对于基于类的 OO 有哪些优势？

> ID：879061
> 
> 赞同：44
> 
> 时间：2009-05-18T18:14:36.277
> 
> 标签：javascript, oop, class, programming-languages, selflanguage

为什么基于类的 OO 而不是基于原型的 OO 如此受欢迎？他们在学校教后者吗？尽管 Javascript 是基于原型的，但大多数人主要是在功能上使用它，或者通过尝试模拟基于类的系统的框架来使用它。

我知道 Sun 对[Self](http://research.sun.com/self/)进行了一些研究- 还有其他关于基于原型的 oo 的知识来源吗？最好是可以自学的东西。

我找到了一本书，其中包含已发表的论文：[基于原型的编程：概念、语言和应用程序](https://rads.stackoverflow.com/amzn/click/com/9814021253)

有人读过吗？

--

因此，我为给我最多的答案提供了赏金。不过，我并不是很满意。我希望听到更多技术性的答案。也许我没有很好地解释自己。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-25T07:18:52.957

原型继承的优势在于它可能允许以简单的方式进行花哨的元编程，因为原型链很容易操作。这是一个相当学术的优势，因为元编程在 99% 的情况下都是错误的答案。例如，您可以拥有一个带有特殊 DSL 的 Javascript Key-Value Observer 样式的数据操作层，该层在离线时通过原型交换在本地 SQLite 支持和在线时基于 REST 的服务器存储之间透明地切换。我不确定这是不是最好的方法，但这是我这么晚能想到的最好的方法。这不是你通常想要在项目代码中做的那种事情，因为一旦你开始让它在多层上运行，这种间接的调试就很难了，但是当你将它保存在库中时它也不错。

另一个不太有用的优点是它允许您设计自己的类系统。我说不太有用，因为或多或少所有的 javascript 库都有自己稍微不兼容的方法来组合“类”。

有很多人在回答他们将继承模型与该模型中实现的语言混合在一起。javascript 是动态且弱类型的，因此难以工具化这一事实与它是一种原型语言无关。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-05-20T18:49:50.303

如果您正在寻找有人指出每个人的优点/缺点作为对其受欢迎程度的解释，我认为您正在陷入一种谬误，出于某种原因，这种谬误在技术中非常普遍 - 受欢迎程度与某些人有关质量的绝对衡量标准。

事实要平淡得多——基于类的 OO 很受欢迎，因为 Java 使用经典的 OO，而 Sun 花费了数百万美元和很长时间来建立 Java 的普及——确保人们知道它已在公司中成功使用，在大学中广泛教授，以及高中 AP 考试。

原型/经典 OO 只是组织想法的不同方式。您可以用本机不支持它的语言来实现任何一个（想到[Python](http://mail.python.org/pipermail/python-list/2000-September/053605.html)和[Java](http://steve-yegge.blogspot.com/2008/10/universal-design-pattern.html) ，另一边是[JavaScript ）。](http://justin.harmonize.fm/index.php/2009/01/cobra-a-little-javascript-class-library/)

在经典的 OO 中，您为对象定义类的抽象层次结构，然后实际使用这些类的实例。在原型继承中，您创建对象实例的层次结构。虽然我想这在两个阵营中可能有点异端，但我看不出你不能将两者混合的原因......

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-05-18T18:22:53.063

我不知道确切的原因，但这是我的原因

我认为这个争论与动态与静态相同，类是对象的静态定义，可以很容易地使用它来了解对对象的期望，它还有助于工具语言具有适当的智能感知支持和文档，因为你可以很容易地知道对象中有哪些不同的成员和方法，另一件事是能够在类中声明私有成员的不同范式，这些成员没有显示在对象上，这不能在原型中完成范例。

原型范例很好，但是它缺乏提供有关对象中的方法和成员的信息的能力，这使得工具变得更加困难，并且对于动态类型编程也更有意义。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-10-08T15:05:16.260

这个问题让我很感兴趣，所以我回去阅读了一些关于这个概念的原始论文。它似乎始于 1980 年代中期的 Smalltalk 世界，但最终成为[Self](http://selflanguage.org)的创始负责人之一。很久以后 Javascript 也采用了它。

论文中提出的论点是它更容易学习。除了学习之外，确实没有提出任何技术上的好处。这些论文都解释了它如何与基于类的语言一样具有表达力，但更容易学习。人们自然而然地以具体的方式而不是抽象的方式思考事物。我们想到的是我们在动物园看到的大象，而不是一般的“大象”。当我们看到其他大象时，我们将它们归类为与第一只大象不同。基于原型的语言促进了这种思考。把它想象成微分编程。

这是在语言中使用它的充分理由吗？也许。自从这个想法开始渗透以来的 25 年里，我认为像基于类的 OO 这样的抽象概念对于大多数人来说并不太难学习。另一方面，也许需要一种更容易的蓝领编程语言（如 Javascript），这可能是实现这一目标的一种方式。

如果有兴趣，您可以从[这篇](http://selflanguage.org/documentation/published/organizing-programs.html)关于自我的论文开始。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-05-20T18:29:01.873

[http://en.wikipedia.org/wiki/Prototype-based_programming#Criticism](http://en.wikipedia.org/wiki/Prototype-based_programming#Criticism)我认为很好地解释了它。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-06-01T13:38:14.433

我真的不想再写一篇关于原型继承的文章了，所以我只是将你链接到我以前的文章。请注意，它们确实很长，但非常值得一读：

1.  [原型继承优于经典继承的好处？](https://stackoverflow.com/a/16872315/783743 "javascript - 原型继承优于经典的好处？ - 堆栈溢出")
2.  [为什么原型继承很重要](http://aaditmshah.github.io/why-prototypal-inheritance-matters/ "阿迪特 M 沙阿 |  为什么原型继承很重要")

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-05-21T14:40:22.827

我认为不同之处在于为您提供的动力动态（原型）语言。Javascript 与 LISP 一样，为程序员提供了几乎无限的能力。这种权力只受程序员的责任和他的自信心水平的限制。所以讨论和它一样古老 - 与静态类型与无类型相同。如果你认为你的编程能力和自律性足够强，那就选择原型风格。

套用一句名言：

人才做他能做的（阅读：基于类），天才做他想做的（阅读：基于原型）。

# iphone - 如何捕获当前视图屏幕截图并在代码中重用？(iPhone SDK)

> ID：879064
> 
> 赞同：11
> 
> 时间：2009-05-18T18:15:22.033
> 
> 标签：iphone, core-animation, rotation

当用户旋转设备时，我正在尝试从一个 UIView 转换到另一个。这本身并不难。但是，由于我在旋转后显示的是完全不同的内容，所以 UIKit 提供的默认动画（旋转当前显示的视图）在概念上是不合适的。

简单地禁用动画并突然交换视图是可以容忍的，但远低于我正在构建到应用程序其余部分的润色。我更愿意这样做：

当 shouldAutorotateToInterfaceOrientation: 被调用时，我想抓取一个不透明的视图快照，如果你愿意的话，一个屏幕截图，在旋转之前的用户视图。然后在旋转完成并且系统应用了视图变换等之后，我可以显示我保存的快照视图，并将我选择的动画转换为我的新视图。完成后，我可以释放我的快照并继续前进。

有没有不贵的办法做到这一点？

我能想到的唯一其他选择是在我的默认方向以外的所有方向上返回 NO，然后通过应用我自己的动画和变换来做出反应。但是，我更喜欢使用系统来执行此操作，因为我觉得自己可能会在手动旋转视图等中导致“未定义”键盘行为。

想法？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-11-22T09:42:12.513

```
- (UIImage *)captureView:(UIView *)view {
    CGRect screenRect = [[UIScreen mainScreen] bounds];

    UIGraphicsBeginImageContext(screenRect.size);

    CGContextRef ctx = UIGraphicsGetCurrentContext();
    [[UIColor blackColor] set];
    CGContextFillRect(ctx, screenRect);

    [view.layer renderInContext:ctx];

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return newImage;
} 
```

在这里找到这个：

[http://discussions.apple.com/thread.jspa?messageID=8358740](http://discussions.apple.com/thread.jspa?messageID=8358740)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2011-08-16T17:59:09.280

这段代码对我有用

```
- (UIImage *)captureScreenInRect:(CGRect)captureFrame {
    CALayer *layer;
    layer = self.view.layer;
    UIGraphicsBeginImageContext(self.view.bounds.size); 
    CGContextClipToRect (UIGraphicsGetCurrentContext(),captureFrame);
    [layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *screenImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return screenImage;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-18T18:31:29.190

在 Mac 上，这很容易……你只需要`-bitmapImageRepForCachingDisplayInRect:`，但当然 iPhone 没有这样的东西。

我想我会通过设置图形上下文并调用`[window drawRect:...]`它来捕获屏幕的当前图像来解决这个问题。这有点不合规格，因为你真的不应该打电话给`-drawRect:`自己。我会有点担心这样做的副作用，但它可能没问题。如果它是您控制的全屏视图，您当然可以将绘图代码提升出来，`-drawRect:`这样您就不会直接调用它。

类似的方法是使用`CALayer -drawInContext:`当前的`-presentationLayer`. 这可能会稍微“符合规范”，因为传递您自己的上下文是合法的。但我不知道您是否真的能够正确获取所有子视图。可能取决于您的 UIWindow 的性质。

无论如何，很好的问题。也许有人有更聪明的解决方案，但这是我攻击它的方式。

**编辑：**感谢 Rob Terrell 和他聪明的[UIApplication+TVOut.m](http://groups.google.com/group/iphone-developers-nc/files)，我被介绍给返回 CGImageRef 的私有方法 UIGetScreenImage()。如果您愿意使用私有方法，那对您来说是一个不错的选择。鉴于它的名称和功能，它在我看来相当稳定，似乎不太可能违反 Apple 的意图。我还碰到了一个关于[Air Source](http://blog.airsource.co.uk/index.php/2008/11/11/views-of-uiimagepickercontroller/)的非常好的讨论。通读几个链接的评论。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-28T02:00:46.970

我可以保证你 [window drawRect:] 不会工作。大多数视图没有实现 drawRect: 并且它肯定不像在 mac 上那样递归。

drawInContext: 也非常相似，因为它从根本上要求图层绘制自己，而不是递归地绘制它的子图层。“默认实现什么都不做。” 说明了一切。

我通过执行以下操作在应用商店中为 Clif Bar Save Our Snow 应用程序实现此功能：

*   递归遍历层层次结构，从每一层获取内容。如果它闻起来像图像，请使用 CGContext 方法将其绘制到您的上下文中。
*   行走时，确保在递归调用时应用每一层的变换/位置

是的，相当大的痛苦。但是，是的，它运行得很好，并且被 Apple 通过了 :)。

# xml - 使用属性值在 XML 转换中调用 ColdFusion 函数

> ID：879067
> 
> 赞同：2
> 
> 时间：2009-05-18T18:15:52.360
> 
> 标签：xml, xslt, coldfusion

如何在 XML 转换模板语句中调用 ColdFusion 函数，将属性值作为参数传递。例如，类似：

```
<xsl:template match="date">
    <cfoutput>#DateFormat(now(), <xsl:value-of select="@format"/>)#</cfoutput>
</xsl:template> 
```

这样以下 XML：

```
<date format="mm/dd/yy" /> 
```

将被匹配并转换为`DateFormat(now(), "mm/dd/yy")`? 是否可以？我可以使用静态参数来做到这一点`DateFormat()`，但无法弄清楚如何从属性/节点中提取值并将其用作参数。谢谢！

**更新**

当前尝试的完整版本：

```
<cfxml variable="xmlData">
    <?xml version="1.0"?>
    <date format="mm/dd/yy" />
</cfxml>

<cfxml variable="stylesheet">
    <?xml version="1.0"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="date">
    <cfoutput>#DateFormat(now(), '<xsl:value-of select="@format"/>')#</cfoutput>
    </xsl:template>
    </xsl:stylesheet>
</cfxml>

<cfoutput>#XmlTransform(xmlData, trim(stylesheet))#</cfoutput> 
```

这会导致以下错误：

```
    解析 XML 文档时发生错误。

    元素类型“x2l:value-of”后面必须跟
    属性规范，“>”或“/>”。

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T19:47:01.630

好的，这就是我认为您正在尝试做的事情。您不能一次性使用 XSLT 和 ColdFusion 进行解析。你必须通过两次。

```
<cfxml variable="xmlData">
    <?xml version="1.0"?>
    <date format="mm/dd/yy" />
</cfxml>

<cfxml variable="stylesheet">

    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="date">
        #DateFormat(now(), "<xsl:value-of select="@format"/>")#
    </xsl:template>   

    </xsl:stylesheet>  

</cfxml>

<cfset filename = "#createUUID()#.cfm" />
<cffile action="write" file="#getDirectoryFromPath(getCurrentTemplatePath())##filename#" output="#XmlTransform(xmlData, trim(stylesheet))#"/>

<cfinclude template="#filename#"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T18:35:14.923

您可以使用 CFML 生成 XSL 模板。

您还可以使用 XSL 模板将适当的 XML 转换为 CFML（如 Patrick 的回答）。

然而，这是两个不同的操作，不能同时发生（如果你需要两个操作，你必须先做一个然后另一个）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T18:33:39.123

看起来您只需要在值周围加上引号。

```
<xsl:template match="date">
    <cfoutput>#DateFormat(now(), '<xsl:value-of select="@format"/>')#</cfoutput>
</xsl:template> 
```

这是一个完整的样式表，我[使用在线解析器对其进行了测试](http://www.w3schools.com/xsl/tryxslt.asp?xmlfile=cdcatalog&xsltfile=cdcatalog)。

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="date">
    <cfoutput>#DateFormat(now(), '<xsl:value-of select="@format"/>')#</cfoutput>
</xsl:template>

</xsl:stylesheet> 
```

这是我用来测试的 XML 代码：

```
<?xml version="1.0"?>
<date format="mm/dd/yy" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T18:36:48.743

为什么不使用 exslt 日期时间？

[http://exslt.org/date/functions/format-date/index.html](http://exslt.org/date/functions/format-date/index.html)

Xalan 支持它，可能还有其他支持。

# compression - 仅适用于数字的压缩算法

> ID：879069
> 
> 赞同：8
> 
> 时间：2009-05-18T18:16:18.987
> 
> 标签：compression, data-compression

我要压缩位置数据（纬度、经度、日期、时间）。所有数字都是固定格式。其中 2 个（纬度、经度）采用十进制格式。其他 2 是整数。

现在这些数字是固定格式的字符串。

以固定格式压缩数字的算法是什么？仅数字压缩（如果有的话）是否比字符串压缩更好？我应该直接压缩字符串而不将其转换为数字然后压缩吗？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-18T18:52:03.003

这是一些理论很有帮助的地方之一。你需要考虑几件事：

*   您的测量分辨率是多少：0.1° 或 0.001°？1 秒还是 1 微秒？
*   测量值是关联的并按某种顺序排列，还是随机组合在一起？

例如，假设分辨率为 0.01°。他们知道您的值范围从 -180° 到 +180°，或 35900 个不同的值。Lg(35900) ≈ 16 所以你需要 16 位；-90°–+90° 为 14 位。显然，如果您将这种值存储为浮点数，您可以立即将数据压缩一半。

与日期时间类似，范围是多少；你必须有多少位？

现在，如果数据按某种顺序排列（例如，在一艘船上按顺序采集样本），那么您只需要一个起始值和一个增量；这可以产生*很大*的不同。一艘船以 30 节的速度航行，位置不能再改变大约每小时 0.03 度或每秒大约 0.0000083 度。这些增量将是非常小的值，因此您可以将它们存储在很少的位中。

关键是您可以做很多事情，但您必须比我们更了解数据才能提出建议。

* * *

更新：哦，等等，定点*字符串*？！

好的，这（相对）容易。首先，是的，您想将字符串转换为某种二进制表示形式。只是组成一个数据项，你可能有

```
040.00105.0020090518212100Z 
```

你可以转换成

```
| 4000 | 短整数，16 位 |  
| 10500 | 短整数，16 位 |  
| 20090518212100Z | 64 位 |

```

所以这是 96 位，12 字节与 26 字节。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-18T18:23:03.077

压缩通常适用于字节流。当流的字节值分布不均匀时（例如文本或存储为文本的数字），您可以获得的压缩率会更高，因为用于存储更频繁出现的字节的位更少（在 Huffman压缩）。

通常，您所谈论的数据将简单地存储为二进制数（而不是文本），这通常是空间和检索效率。

我建议你看看[The Data Compression Book](https://rads.stackoverflow.com/amzn/click/com/1558514341)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-18T18:30:33.297

你在压缩什么样的数据？它是如何分布的？是否以任何方式订购？所有这些事情都会影响它的压缩程度，并且可能允许您将数据转换为更容易压缩的东西，或者只是一开始就更小。

数据压缩在“随机”数据上效果不佳。如果您的数据在较小的范围内，您很可能可以利用它。

事实上，您应该简单地尝试运行任何常用算法，看看数据是否“足够压缩”。如果不是，并且您对数据的了解比压缩算法“直觉”的多，那么您应该利用该信息。

举个例子，假设您的数据不仅仅是 Lat 和 Long 的数据，而且它们被假定为彼此“接近”。然后你可能会存储一个“原点”纬度和经度，其余的可以是微分的。也许这些差异小到足以放入单个有符号字节。

这只是一个简单的例子，说明您可以利用数据知识做的事情与一些通用算法可能无法弄清楚的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T19:23:38.900

这取决于您将如何处理数据，以及您需要多少精度。

纬度/经度传统上以度、分和秒表示，60 秒到分钟，60 分钟到度数，1 纬度名义上等于 60 海里 (nmi)。1 分钟是 1 nmi，1 秒刚好超过 100 英尺。

纬度从 -90 度到 +90 度。将纬度表示为整数秒为您提供 -324000..+324000 的范围，或大约 20 位。经度从 -180 到 +180，因此以相同方式表示经度需要多 1 位。

因此，您可以以 41 位表示完整的纬度/经度位置，达到 +/- 50 英尺。

显然，如果您不需要那么高的精度，您可以降低您的位数。

请注意，传统的单精度 32 位浮点数使用大约 24 位尾数，因此如果您只需将纬度/经度（以秒为单位）转换为浮点数，就可以降低到大约 +/- 6 英尺。对于这种事情，很难击败两个单精度浮点数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-12T08:40:28.017

根据可用的字符，您可以很容易地制作一些东西。

例如，如果输入只有数字（0..9），这是一个在 Kotlin 中对它们进行编码和解码的解决方案（Java 上类似的东西）：

```
fun encodeDigitsOnlyString(stringWithDigitsOnly: String): ByteArray {
    //we couple each 2 digits together into a single byte.
    //For the last digit, if it has no digit to pair with, it's paired with something that's not a digit
    val result = ArrayList<Byte>()
    val length = stringWithDigitsOnly.length
    var lastDigit: Byte? = null
    for (i in 0 until length) {
        val char = stringWithDigitsOnly[i]
        val digitAsByte = char.toString().toInt().toByte()
        if (lastDigit == null) {
            if (i == length - 1) {
                //last digit
                val newByte = (digitAsByte + 0xf0).toByte()
                result.add(newByte)
            } else {
                //more to go
                lastDigit = digitAsByte
            }
        } else {
            val newByte = (digitAsByte + lastDigit.toInt().shl(4)).toByte()
            result.add(newByte)
            lastDigit = null
        }
    }
    return result.toByteArray()
}

fun decodeByteArrayToDigitsOnlyString(encodedDigitsOnlyByteArray: ByteArray): String {
    val sb = StringBuilder(encodedDigitsOnlyByteArray.size * 2)
    for (byte in encodedDigitsOnlyByteArray) {
        val hex = Integer.toHexString(byte.toInt()).takeLast(2).padStart(2, '0')
        if (hex[0].isLetter())
            sb.append(hex.last())
        else
            sb.append(hex)
    }
    return sb.toString()
} 
```

示例用法：

```
val inputString="12345"
val byteArray=encodeDigitsOnlyString(inputString) //produces a byte array of size 3
val outputString=decodeByteArrayToDigitsOnlyString(byteArray) //should be the same as the input 
```

# performance - Google 文件系统的吞吐量是多少？

> ID：879072
> 
> 赞同：0
> 
> 时间：2009-05-18T18:16:36.663
> 
> 标签：performance, gfs

Google 文件系统的吞吐量是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T18:23:07.383

[http://labs.google.com/papers/gfs-sosp2003.pdf](http://labs.google.com/papers/gfs-sosp2003.pdf)

第 11 页，在 6.1.2 写入下有一些吞吐量数据。不确定这是否是您要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T18:25:16.553

[这是一篇关于它的文章](http://storagemojo.com/google-file-system-eval-part-ii/)

自由贸易协定：

```
集群 AB
读取速率 - 最后一分钟 583 MB/s 380 MB/s
读取速率 - 最后一小时 562 MB/s 384 MB/s
读取速率 - 自重新启动后 589 MB/s 49 MB/s
写入速率 - 最后一分钟 1 MB/s 101 MB/s
写入速率 - 最后一小时 2 MB/s 117 MB/s
写入速率 - 自重启 25 MB/s 13 MB/s
Master Ops - 最后一分钟 325 Op/s 533 Op/s
Master Ops - 最后一小时 381 Op/s 518 Op/s
Master Ops - 自重启以来 202 Op/s 347 Op/s
```

# c - 更改指针是否被视为 C 中的原子操作？

> ID：879077
> 
> 赞同：33
> 
> 时间：2009-05-18T18:17:47.393
> 
> 标签：c, multithreading, synchronization

如果我有一个通过引用读取缓存类型内存的多线程程序。我可以通过主线程更改此指针，而不会冒任何其他线程读取意外值的风险。

如我所见，如果更改是原子的，则其他线程将读取旧值或新值；永远不要随机内存（或空指针），对吗？

我知道无论如何我都应该使用同步方法，但我仍然很好奇。

**指针更改是原子的吗？**

更新：我的平台是 64 位 Linux (2.6.29)，虽然我也想要一个跨平台的答案:)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-05-18T18:32:21.343

正如其他人所提到的，C 语言中没有任何东西可以保证这一点，它取决于您的平台。

在大多数当代桌面平台上，对字大小的对齐位置的读/写将是原子的。但这确实不能解决您的问题，因为处理器和编译器对读写进行了重新排序。

例如，以下代码被破坏：

线程 A：

```
DoWork();
workDone = 1; 
```

线程 B：

```
while(workDone != 0);

ReceiveResultsOfWork(); 
```

尽管写入`workDone`是原子的，但在许多系统上，处理器不能保证在`workDone`通过写入完成之前写入对其他处理器`DoWork()`可见。编译器也可以`workDone`在调用`DoWork()`. 在这两种情况下，都`ReceiveResultsOfWork()`可能开始处理不完整的数据。

根据您的平台，您可能需要插入内存栅栏等以确保正确排序。这可能非常棘手。

或者只是使用锁。更简单，更容易验证是否正确，并且在大多数情况下性能足够。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-05-18T18:21:48.743

C 语言没有说明任何操作是否是原子的。我曾在具有 8 位总线和 16 位指针的微控制器上工作过；这些系统上的任何指针操作都可能是非原子的。我想我记得 Intel 386s（其中一些有 16 位总线）提出了类似的担忧。同样，我可以想象具有 64 位 CPU 和 32 位数据总线的系统，这可能会引起对非原子指针操作的类似关注。（我还没有检查是否真的存在任何这样的系统。）

编辑：[迈克尔的回答](https://stackoverflow.com/questions/879077/is-changing-a-pointer-considered-an-atomic-action-in-c/#879136)非常值得一读。总线大小与指针大小并不是关于原子性的唯一考虑因素。这只是我想到的第一个反例。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-18T18:24:14.650

你没有提到平台。所以我认为一个更准确的问题是

> 指针更改是否保证是原子的？

区分是必要的，因为不同的 C/C++ 实现可能在此行为上有所不同。特定平台可以保证原子分配并且仍然在标准范围内。

至于这是否在 C/C++ 中得到全面保证，答案是否定的。C 标准没有做出这样的保证。保证指针分配是原子的唯一方法是使用特定于平台的机制来保证分配的原子性。例如 Win32 中的 Interlocked 方法将提供这种保证。

你在哪个平台上工作？

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-18T18:25:11.293

逃避的答案是 C 规范不需要指针分配是原子的，所以你不能指望它是原子的。

实际的答案是，它可能取决于您的平台、编译器，还可能取决于您编写程序当天的星号对齐方式。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-18T18:39:31.297

“正常”指针修改不能保证是原子的。

检查“比较和交换”（CAS）和其他原子操作，不是 C 标准，但大多数编译器都可以访问处理器原语。在 GNU gcc 案例中，有几个[内置函数](http://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Atomic-Builtins.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-18T18:29:41.333

该标准唯一保证的是 sig_atomic_t 类型。

正如您从其他答案中看到的那样，在针对通用 x86 架构时可能没问题，但对于更多“专业”硬件来说风险很大。

如果您真的很想知道，可以将 sizeof(sig_atomic_t) 与 sizeof(int*) 进行比较，看看它们是您的目标系统。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-18T18:34:00.620

事实证明这是一个相当复杂的问题。我问了一个[类似的问题](https://stackoverflow.com/questions/762288/seeking-articles-on-shared-memory-locking-issues)并阅读了我指出的所有内容。我学到了很多关于缓存如何在现代架构中工作的知识，但没有找到任何确定的东西。正如其他人所说，如果总线宽度小于指针位宽，您可能会遇到麻烦。特别是如果数据落在缓存线边界。

谨慎的架构将使用锁。

# php - 将帖子信息放入变量而不在 Wordpress 中显示它们的最佳方法

> ID：879078
> 
> 赞同：1
> 
> 时间：2009-05-18T18:17:54.413
> 
> 标签：php, wordpress, post

我正在编写一个 Wordpress 插件，需要浏览许多帖子，从中获取数据（大部分是标题、永久链接和内容），然后对它们进行处理而不在页面上显示它们。

**我看过的：**

我查看了[get_posts()](http://codex.wordpress.org/Template_Tags/get_posts)以获取帖子，然后

```
getting title via the_title(),
content via the_content(),
and permalink via the_permalink() 
```

请记住，在应用了所有过滤器之后，我需要这些数据，以便获得将显示给用户的确切数据。上面的每个功能似乎都应用了所有必要的过滤器并已经进行了一些后处​​理，这很棒。

**问题：**

问题在于所有这些功能，至少在 WP 2.7.1（目前最新发布的版本）中，默认情况下只是回显所有内容，甚至不返回任何内容。the_title() 实际上支持一个说不打印并返回的标志，就像这样

```
the_title(null, null, false) 
```

然而，另外两个没有这样的标志，这种不一致让我很震惊。

我查看了每个 the_() 函数的作用，并尝试将这段代码拉出，以便我可以在不显示数据的情况下调用它（这是我书中的一个 hack，因为 the_() 函数的行为可以在随时）。这适用于永久链接，但由于某种原因 get_the_content() 返回 NULL。无论如何，我相信必须有更好的方法。

**那么，在不打印这些值的情况下提取这些值的最佳方法是什么？**

一些示例代码

```
global $post;
$posts = get_posts(array('numberposts' => $limit));

foreach($posts as $post){
    $title = the_title(null, null, false); // the_title() actually supports a "do not print" flag
    $permalink = apply_filters('the_permalink', get_permalink()); // thanks, WP, for being so consistent in your functions - the_permalink() just prints /s
    $content = apply_filters('the_content', get_the_content()); // this doesn't even work - get_the_content() returns NULL for me
    print "<a href='$permalink'>$title</a><br>";
    print htmlentities($content, ENT_COMPAT, "UTF-8"). "<br>";
} 
```

PS 我也看过[创建自己的 Wordpress 循环的最佳方法是什么？](https://stackoverflow.com/questions/570152/what-is-the-best-method-for-creating-your-own-wordpress-loops)虽然它处理了一种已经很明显的方式来循环浏览帖子，但那里的解决方案只是打印这些数据。

**更新：**我已经用 Wordpress 开了一张关于这个的票。[http://core.trac.wordpress.org/ticket/9868](http://core.trac.wordpress.org/ticket/9868)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T18:59:36.170

WP 中大多数回显某些东西的函数 the_stuff() 都有*返回*某些东西的 get_the_stuff() 对应项。

例如`get_the_title()`，`get_permalink()`...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T19:55:51.657

如果您找不到确切的方法，您可以随时使用输出缓冲。

```
<?php
ob_start();
echo "World";
$world = ob_get_clean();
echo "Hello $world";
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T00:22:17.407

好的，我现在都整理好了。这是最终结果，有兴趣的人可以看看：

*   可以通过迭代 get_posts() 返回的数组来访问每个帖子的数据，但这些数据将只是数据库中的任何内容，无需通过任何中间过滤器
*   首选方法是使用 get_the_ 函数访问数据，并将它们包装在对 apply_filters() 的调用中，并使用适当的过滤器。这样，将应用所有中间过滤器。

`apply_filters('the_permalink', get_permalink())`

*   返回空字符串的原因`get_the_content()`是显然`setup_postdata($post);`需要先进行特殊调用。然后`get_the_content()`正确返回数据

谢谢大家的建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T21:24:14.303

是否有任何原因您不能在每个帖子发布时或显示时进行处理？

WP 插件通常一次只在一个帖子上工作，所以有很多钩子可以这样做。

# java - 如何使用应用程序安全执行 EJB 查找？

> ID：879080
> 
> 赞同：3
> 
> 时间：2009-05-18T18:18:10.607
> 
> 标签：java, jakarta-ee, websphere, ejb

我正在尝试从独立的 java 应用程序中查找 EJB。我正在考虑 WebSphere Application Server 6.1，但如果有人知道如何为另一个应用程序服务器执行此操作，它可能会让我朝着正确的方向前进。

我目前在做什么：

```
 initialContext= new InitialContext(env);
    initialContext.lookup("");

    lc = new LoginContext("WSLogin", new WSCallbackHandlerImpl("wasadmin", "defaultWIMFileBasedRealm", "wasadmin"));
    lc.login();
    subject = lc.getSubject();
    WSSubject.setRunAsSubject(subject); 
```

这不起作用...我的主题仍然是“/未验证”，当我尝试查找 EJB 时出现错误。在执行应用程序时，我还为 VM 指定了以下参数：

-Dcom.ibm.CORBA.ConfigURL="C:\was\profiles\AppSrv01\properties\sas.client.props" -Djava.security.auth.login.config="C:\was\profiles\AppSrv01\properties\ wsjaas_client.conf"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:01:43.733

对于 WebSphere 6，试图从同样部署在同一个 WebSphere 中的 servlet（Jersey-RESTful WAR）访问安全 EJB；这是有效的代码

```
 Properties prop = new Properties();

    prop.put("org.omg.CORBA.ORBClass", "com.ibm.CORBA.iiop.ORB");   
    prop.put("java.naming.factory.initial", "com.ibm.websphere.naming.WsnInitialContextFactory");
    prop.put("java.naming.provider.url", "corbaloc:iiop:localhost:9810");
    prop.put("com.ibm.CORBA.securityEnabled", "true");
    prop.put("com.ibm.CORBA.validateBasicAuth", "true");

    Context ctx;
    try {
        ctx = new InitialContext(prop);

        System.out.println("Resolved Inital Context");
        Object ejbHome = ctx.lookup("");
        System.out.println("Resolved Home OperationManagerEJB");
        logger.info("So far so good, tryining to Login ");
        LoginContext lc;
        lc = new LoginContext("WSLogin",new WSCallbackHandlerImpl("username","password"));
        lc.login();

        logger.info("Login Suceeded with omc_user");
        WSSubject.setRunAsSubject(lc.getSubject()); //This is one key call 
        logger.info("Setting the authorization sibject"); 
```

参考

[http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Frtrb_secprobs.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Frtrb_secprobs.html)

[http://pic.dhe.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Fxsec_jaas.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Fxsec_jaas.html)

[http://pic.dhe.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Fxsec_jaas.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Fxsec_jaas.html)

# visual-studio - 有没有人设法让 Visual Studio 2003 在 Windows 7 上运行？

> ID：879082
> 
> 赞同：21
> 
> 时间：2009-05-18T18:18:35.787
> 
> 标签：visual-studio, windows-7, visual-studio-2003

是的，我知道...我可以设置一个运行 XP 的虚拟机。不幸的是，我们的构建环境是这样的，我们需要同时运行 VC2003、2005 和 2008，如果我可以在 Windows 7 上本地运行 2003 来处理我们需要它的少数项目，那将更加方便。

我意识到有些东西在 IDE 中可能不可用，但我能够在 Windows Vista 下运行 2003，如果我能在 Windows 7 下获得相同的基本功能，我会非常高兴。

现在，当我在 XP SP 2 的兼容模式下切换 vc2003 以管理员身份运行后编译时，打开 *.pdb 文件时出现错误。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-18T18:34:57.187

如果您无法使其在本机运行，请尝试 XP Mode。

[http://www.microsoft.com/windows/virtual-pc/download.aspx](http://www.microsoft.com/windows/virtual-pc/download.aspx)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2010-03-12T10:31:48.900

我不久前写了一篇关于此的[博客文章](http://technikhil.wordpress.com/2010/01/12/visual-studio-2003-and-windows-7-can-get-along-really/)，您可以查看 - [http://technikhil.wordpress.com/2010/01/12/visual-studio-2003-and-windows-7-can-get-along-真的/](http://technikhil.wordpress.com/2010/01/12/visual-studio-2003-and-windows-7-can-get-along-really/)

我现在唯一坚持的是 VS 2003 的全局搜索功能 - 它挂起应用程序。我的解决方法是使用 Windows 7 搜索:-)。除此之外 - 到目前为止一切都很好......

更新：通过禁用 Aero 功能，我的搜索也能正常工作 - 我已经更新了我的[博客文章](http://technikhil.wordpress.com/2010/01/12/visual-studio-2003-and-windows-7-can-get-along-really/)的详细信息......

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-21T01:03:35.483

（其中大部分重复了上面已经写过的内容。）

我需要在 Win7 64 位下以管理员身份运行 VS2003，以支持遗留项目（例如在原始 Xbox 上运行的项目）。旧的 XDK 需要 VS2003，所以升级不是一个选项。我可以运行 WinXP，但我更喜欢 Win7。

VS2003 在 Win7 下不受官方支持，尝试这样做会产生一些相当烦人的问题：

Find-in-files 会导致 VS2003 挂起。由于 PDB 文件句柄泄漏，链接失败。Find-in-files 挂起通过使用“禁用视觉主题”来解决。导航到 VS2003 快捷方式（开始-->Microsoft Visual Studio .NET 2003），右键单击以获取上下文菜单，选择兼容性选项卡，设置窗格，然后选中“禁用视觉主题”。

当您通过调试器运行程序、停止它、修改文件并构建时，会发生链接器故障 (LNK1201)。错误是 Visual Studio 持有 PDB 文件的句柄，而链接器尝试写入该文件。您可以停止并重新启动 VS2003 以绕过该问题。工作，但很烦人。

您还可以使用 Microsoft SysInternals“handle.exe”实用程序查找，然后关闭特定文件上某个进程所持有的句柄。编写一个脚本来调用handle.exe 并设置VS2003 项目以将该脚本作为预构建事件运行。（请参阅[此线程](http://social.msdn.microsoft.com/Forums/mr/vclanguage/thread/b0271379-3ab1-4e08-af9e-d4f51fe8de79)。）但是 handle.exe 需要以管理员身份运行。

您可以假设将handle.exe 更改为使用通常的步骤（例如作为兼容性设置）以管理员身份运行，但随后handle.exe（显然）在嵌套shell 中运行，然后stdout 文本不会到达调用脚本。

您可以让 VS2003 以管理员身份运行，在这种情况下，Pre-Build 脚本也以管理员身份运行，因此 handle.exe 也是如此，并且有效。

剩下的技巧是让 VS2003 SLN 文件正确打开。如果您只是让 VS2003 自动以管理员身份运行，那么 VS 版本选择器将无法运行 VS2003。我不知道为什么，但事实就是如此。

您可以关联 SLN 文件以使用 VS2003 devenv.exe 而不是 VSLauncher.exe 打开。这可行，但所有新的 SLN 文件（2005、2008、2010、2012，...）都无法打开。

所以最后一步是让 VSLauncher.exe 以管理员身份运行。[如该线程](http://social.msdn.microsoft.com/Forums/en-IE/vssetup/thread/041bb394-44d5-41a7-8650-0f1af80ef3ae)所示，此操作自 KB2492386 起失败。卸载该更新是这个传奇的最后一步，让一切正常工作。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-07-06T04:02:20.300

**现在可用**
的补丁 经过一些逆向工程，我发现了导致泄漏的错误引用的 COM 对象（它关闭了 1），并开发了一个稳定的补丁和描述修复的相应文章。这解决了在使用 Windows 7 到 Windows 10 时遇到的问题。详细信息和下载地址：

[](http://bytepointer.com/articles/vs7.1_2003_on_win7_pdb_handle_leak_bug_unofficial_fix.htm)[http://bytepointer.com/articles/vs7.1_2003_on_win7_pdb_handle_leak_bug_unofficial_fix.htm](http://bytepointer.com/articles/vs7.1_2003_on_win7_pdb_handle_leak_bug_unofficial_fix.htm)

如果您想手动执行修补程序，还包括这些详细信息。

注意：SysInternals Handle 工具解决方法不适用于网络共享上的文件。尽管 Handle 工具声称它已关闭，但 .PDB 并未完全解锁。我的修复一劳永逸地消除了问题并避免了任何副作用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-06-08T15:01:10.960

运行此安装。您需要从安装目录运行它，cd 根目录下的 setup.exe 将无法运行。

D:\setup\SetUp.exe /NO_BSLN_CHECK

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-10-25T22:42:27.147

我在网上找到的解决方案有帮助：对于您的 Visual Studio，使用应用程序兼容性 = Windows Vista SP2，而不是 WinXP SP3

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-10-10T15:17:35.747

对于 pdb 问题，我有一个非常肮脏和可悲的解决方法。

下载并运行 Sysinternals-ProceXP，按 CTRL-F 输入链接时无法创建的 pdb(smt like ($ProjectName).pdb) 的名称。找到后双击。（如果找不到，请以管理员权限运行 procexp）

然后您将看到 .pdb 文件在主屏幕的下部窗格中突出显示。右键单击它并选择关闭句柄。当您重试构建解决方案时，它不会引发错误。

我不知道这个解决方案是否可以编写脚本，但至少比重新启动 Visual Studio 好。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2010-02-17T23:22:48.213

自从第一个 RC 版本发布以来，我一直在 win7 上使用 Visual Studio 2003：S 为什么人们会遇到问题？

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-07-02T00:48:46.287

我尝试使用虚拟 Windows XP 功能在 64 位 Windows 7 上安装 VS2003。我有理由相信这会成功。我遇到的问题是安装程序想要安装 IIS，而 Virtual XP 提供的 XP 安装默认情况下没有启用该功能。

如果您转到添加/删除组件并尝试添加它，它会要求提供我手头没有的光盘。一旦我拿到光盘，我很确定它会运行良好。

如果您还没有尝试过其他应用程序，Virtual XP 功能*真的很*简洁......

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-12-03T00:01:16.783

我遇到了同样的问题；devenv.exe 在运行项目后打开 pdb 文件。我制作了一个批处理文件来解决它，它关闭了 devenv.exe 打开的**所有 .pdb文件：**

`handle.exe .pdb | awk "/devenv.exe/ { split($4, fd, \":\"); system(\"handle.exe -c \" fd[1] \" -y -p \" $3)}"`

您需要在路径中使用 sysinternals 的 handle.exe 和 gnu 的 awk 才能使其工作。

*使用风险自负。关闭句柄可能会导致应用程序或系统不稳定。*

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-18T18:40:42.620

在 Windows 7 中，可执行属性中有兼容模式。打开：C:\Program Files\Microsoft Visual Studio .NET 2003\Common7\IDE\ 然后右键单击 devenv.exe 并选择属性。在兼容性选项卡中，选择“以兼容模式运行”并在下拉菜单中选择“Windows XP”。

试试看，我不确定它是否有效，但值得一试。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2010-05-19T11:52:28.063

我在 Windows 7 64 位上使用 Visual Studio 2003 没有问题。

1.  导航到 VS2003 devenv.exe（可能是 C:\Program Files (x86)\Microsoft Visual Studio .NET 2003\Common7\IDE\devenv.exe）
2.  右键单击并选择属性
3.  在“兼容性”选项卡中，选中“以兼容模式运行此程序：”并选择“Windows XP (Service Pack 3)”
4.  勾选“以管理员身份运行此程序”

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-07-17T18:42:06.737

我确实设法在 Windows 7 32 位上安装了 VS2003。但是，为了能够运行我的 ASP.NET 项目，我必须做一些 IIS 技巧。安装 VS2003 Web Development 组件时无法选择。基本上，您必须先将 VS2003 ASP.NET v1.1 放入 C:\inetpub\wwwroot\project_name 并使其首先作为独立的门户网站运行。这是我所做的步骤。

1.  在 Windows 7 上安装 IIS

[![在此处输入图像描述](https://i.stack.imgur.com/uhtwT.png)](https://i.stack.imgur.com/uhtwT.png)

2.  将您的 VS2003 项目复制到 C:\inetpub\wwwroot\project_name。右键单击您的 project_name 并转换为应用程序。以下是我的自定义问题，即使我的 web.config 中没有相关设置，在我启用 Windows 身份验证之前它也不起作用。选择您的 project_name > 身份验证 > 启用匿名和 Windows 身份验证。

[![在此处输入图像描述](https://i.stack.imgur.com/yEn1P.png)](https://i.stack.imgur.com/yEn1P.png)

3.  在 ISAPI 和 CGI​​ 限制中启用 ASP.NET 1.1 并确保在 ISAPI 过滤器下添加 ASP.NET [![在此处输入图像描述](https://i.stack.imgur.com/FtiFh.png)](https://i.stack.imgur.com/FtiFh.png) [![在此处输入图像描述](https://i.stack.imgur.com/1UK04.png)](https://i.stack.imgur.com/1UK04.png)
4.  一旦我能够在浏览器中启动我的 ASP.NET 项目，请继续从您的项目位置打开项目，在我的例子中是 C:\inetpub\wwwroot\MHSScoreOrg\MHSScoreOrg.sln。只有当它完全集成在 IIS 上时，我才能运行我的项目。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-06-22T21:29:08.437

通过执行一些高级步骤，我获得了 Visual Studio .NET 2003 在我的 HP EliteBook Workstation 8760W 上​​运行良好，它配备 I7 处理器和 12GB RAM，运行 Windows 7 Professional 64 位。他们如下：

1.  为 IIS 7.0 安装 FrontPage 2002 服务器扩展。
2.  安装 Visual Studio .Net 2003。当安装程序命令您配置 Frontpage 2002 服务器扩展时，只需跳过即可。
3.  安装 .Net Framework 1.1 Service Pack 1（在此处下载）。
4.  转到控制面板 > 管理工具 > Internet 信息服务 (IIS) 管理器。突出显示您的计算机，然后双击 ISAPI 和 CGI​​ 限制。将 ASP .NET v1.1.4322 的设置更改为允许。

然后它将始终显示带有以下消息的警报

> 该程序存在兼容性问题...

忽略它。另外，不要在 IDE 的属性中将其置于兼容模式。

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2009-05-18T18:28:39.993

抱歉，您的构建环境要求您同时运行 VC 2003、2005 和 2008？我真的敢打赌，您的努力最好只是将您的构建环境整合到一个环境中。

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2009-05-18T18:30:54.293

您是否考虑过将解决方案升级到 vs2005，使用[MSBEE](http://msbee.codeplex.com/)以 .net 1.1 为目标？

# apache-flex - Flex Bulder 3 版本 Pro 或非识别

> ID：879092
> 
> 赞同：1
> 
> 时间：2009-05-18T18:22:14.250
> 
> 标签：apache-flex, flexbuilder

如何判断已安装的 Flex Builder 3 是否为 Pro（或 Not）版本。

帮助 | 关于仅状态 Flex Builder 3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T18:58:25.550

帮助 > 产品详情 > 配置详情

我的说：

> *** Adob​​e Flex Builder 3：Flex Builder 3-专业版 - 教育

我有教育执照，因为我在大学工作；但你可以看到它说“专业”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T11:58:09.183

帮助 > 管理 Flex 许可证

我的说：当前许可证：专业版 - 从标准升级

# rdbms - 主内存数据库与对象数据库

> ID：879093
> 
> 赞同：3
> 
> 时间：2009-05-18T18:22:18.133
> 
> 标签：rdbms, in-memory-database, object-oriented-database

我目前正在尝试选择数据库供应商。

我只是从那里的数据库开发人员那里寻求一些个人意见。

我的问题特别针对以下人群：

1）之前使用过支持复制到磁盘（混合）的主内存数据库（MMDB）（即[ExtremeDB](http://www.mcobject.com/standardedition.shtml)）

或者

2) 使用过[Versant Object Database](http://www.versant.com/en_US/products/objectdatabase)和/或[Objectivity Database](http://www.objectivity.com/pages/objectivity/technical-information.asp)和/或[Progress ObjectStore](http://www.progress.com/objectstore/index.ssp)

问题确实是：如果您可以根据您的经验推荐适合我的应用程序的数据库供应商。

我的应用程序是一个商业实时（阅读：高性能）面向对象的 C++ GIS 类型的应用程序，我们需要在其中进行大量纬度/经度搜索（即给定一个区域，查找该区域内的所有匹配目标。 ..R-树索引）。

我想存储到数据库中的数据类型都被建模为对象，并且它们使用 std::list 和 std::vector，所以自然地，对象数据库似乎是有意义的。我已经阅读了足够多的文章来说服自己，传统的 RDBMS 可能不是我真正想要的

1.  性能（用于动态长度数据（如列表/向量）的连接或多个表）
2.  易于编程（阻抗不匹配）

不过，就性能而言，

1.  输入数据以大约 40 MB/s 的速度输入系统。

2.  因此，系统还将以大约每秒 350 次插入的速率插入数据库（其中每个对象从 64KB 到 128KB 不等），

3.  数据库将始终通过多个线程进行搜索和更新。

据我了解，我在这里列出的所有对象数据库都使用缓存来存储数据库对象。ExtremeDB 声称，由于它是专为内存设计的，因此可以避免缓存逻辑等开销。通过谷歌搜索查看更多信息：主内存与 RAM 磁盘数据库：基于 Linux 的基准测试

所以..我只是有点困惑。对象数据库可以在实时系统中使用吗？它和 MMDB 一样“快”吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-18T18:46:04.187

从根本上说，MMDB 和 OODB 之间的区别在于，MMDB 期望其所有数据都基于 RAM，但在某些时候会持久保存到磁盘。而 OODB 更传统，因为不期望整个 DB 适合 RAM。

MMDB 可以通过放弃持久数据不一定要“匹配”RAM 中的数据这一概念来利用这一点。

任何具有持久性的东西都会起作用的方式是，它必须以某种方式在更新时将数据写入磁盘。

几乎所有的数据库都为此使用某种日志。这些日志基本上是附加到文件的“原始”数据页面，或者可能是单个事务。当文件变得“太大”时，将启动一个新文件。

一旦日志被正确地合并到主存储中，日志就会被丢弃（或重复使用）。

现在，可以通过将事务附加到日志文件来简单地存在 RAM DB 中的原始数据库，并且当它重新启动时，它只是将日志加载到 RAM 中。因此，从本质上讲，日志文件就是数据库。

这种技术的缺点是您拥有的事务越长越多，您的日志/数据库就越大，因此数据库启动时间就越长。但是，理想情况下，您还可以“快照”当前状态，从而消除所有最新的日志，并有效地压缩它们。

以这种方式，数据库必须管理的所有日常操作是将页面附加到日志，而不是更新其他磁盘页面、索引页面等。因为理想情况下，大多数系统不需要经常“启动”，也许启动时间不是问题。

因此，通过这种方式，MMDB 可以比与磁盘有不同合约、维护日志和磁盘页面的 OODB 更快。通过这种方式，即使整个 DB 适合 RAM 并被正确缓存，OODB 也会变慢，这仅仅是因为您在正常操作期间会在日志操作之外进行磁盘操作，而 MMDB 则将这些操作作为“维护”发生任务，可以在停机时间和/或安静时间安排。

至于这两个系统是否能满足你的实际性能需求，我不能说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-11-06T10:34:09.530

数据库的后端（读写器进程、缓存、锁管理、txn 日志文件、ACID 语义）是相同的，因此这里的 RDB 和 OODB 实际上非常相似。不同之处在于应用程序程序员的接口。您的数据模型是否复杂，由许多具有真实继承关系的类组成？那么OO就好了。是不是比较扁平和简单？然后去RDB。关系的本质是什么？它是指针式的吗？然后去RDB。是否更复杂，例如（有序）列表、数组、地图？那你应该去OO。另外，您是否有无需与其他应用程序集成的独立应用程序？然后OO就可以了。您是否必须与其他应用程序共享数据（即多个应用程序访问同一个数据库）？那么这对 OO 来说是个大问题，你应该坚持使用 RDB。您的数据库架构是稳定的还是您希望它经常发展？OODB 是糟糕的广告模式演变，因此如果您期望频繁更改，请坚持使用 RDB。

# .net - DataSet 中的可空 Int 列

> ID：879095
> 
> 赞同：8
> 
> 时间：2009-05-18T18:22:33.610
> 
> 标签：.net, int, nullable, strongly-typed-dataset

我正在使用 .NET 强类型数据集，并且有一个带有可为空的 int 列（以及可为空的 DateTime 列）的表。

显然，数据集设计器存在一个错误，该错误会阻止在这些数据类型上具有可为空的列。设计器只允许“抛出异常”作为空值的默认行为。不幸的是，在数据库中使用可为空的数据类型时，空值是合法值，但在尝试从数据行中检索此值时会引发异常。

我已经看过几个关于这个问题的新闻组帖子，但还没有看到任何体面的解决这个问题的方法。

我很想听听其他人是如何处理这个问题的。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-01T07:45:48.383

我认为 ASP.NET 论坛上的这篇文章将对以下问题有所帮助： [Strongly-Typed DataSet/Nullable column issue](http://forums.asp.net/t/1227689.aspx)

> 将此类属性设置为 null 的唯一方法是使用数据集生成器也创建的辅助方法。这些方法以您的列名命名，因此在您的情况下，您应该在数据行对象上有名为 IsApprovingUserNull() 和 SetApprovingUserNull() 的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-18T20:38:14.850

DBNull 基本上是用来处理不可为空的值类型，在 .NET 2.0 之前。由于 ADO.NET 的设计，您无法避免 DBNull，除非您选择更直接的方法。DBNull 是 ADO.NET 的内置核心，因此如果您想继续使用它，就必须学会接受它。

如果您提供自己的数据传输对象而不是依赖通用 System.Data 命名空间，则可以检查（在使用数据读取器读取结果时）该值是否为空，但您需要某种方法来生成强类型对象和映射，因为那是非常乏味的工作。

据我所知，DBNull 内置于 ADO.NET 的设计中，如果使用它，构建应用程序的最佳方法是将 DBNull 和 null 合并（规范化）。基本上，提供您自己的 DbConvert 类，该类拦截 DBNull 并在值为 DBNull 时返回实际的空引用。这是最低要求，但一旦完成，您将不必担心浮动的 DBNull 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T20:28:43.200

自从我使用类型化 DataSet 已经有一段时间了，但我在旧代码中看到使用`codegen:nullValue`属性。我认为设计师不支持它，至少在 VS2005（我用于那个项目）中不支持，所以你必须在 xml 编辑器中打开你的 xsd 文件并手动完成。

生成的 xml 看起来像这样：

```
<xs:sequence>
    <xs:element 
        name="MyIntColumn" 
        codegen:nullValue="0" 
        type="xs:int" 
        minOccurs="0" />
    <xs:element 
        name="MyBoolColumn" 
        codegen:nullValue="false" 
        type="xs:boolean" 
        minOccurs="0" />
    <xs:element 
        name="MyDateColumn" 
        codegen:nullValue="1900-01-01" 
        type="xs:dateTime" 
        minOccurs="0" />
</xs:sequence> 
```

# javascript - Internet Explorer 中的递归图像延迟加载失败 (6-8)

> ID：879109
> 
> 赞同：4
> 
> 时间：2009-05-18T18:25:15.803
> 
> 标签：javascript, jquery, internet-explorer, recursion

## 问题：

我无法在所有相关版本的 Internet Explorer 中实现递归图像延迟加载。我使用的是 jQuery 1.3.2，下面的代码在 Firefox、Safari 和 Chrome 上运行良好。

虽然我预计 IE6 的 javascript 引擎会阻塞，但我很惊讶地发现它在 IE7 上根本不起作用，而且只是偶尔在 IE8 上起作用。它有时在 IE8 上工作令人沮丧，因为这似乎意味着如果我足够努力并在 Microsoft 脚本调试器中设置足够的断点，我可能会在经过一番努力后让它工作。

我知道我不必递归地执行此操作，如果找不到合适的解决方案，我将重新实现它，但递归方法在此示例中特别适合，因为我希望图像加载一个时间，相当连续。（我预计最大深度约为 15）

我带着这个问题来到 StackOverflow，因为我过去曾遇到过这样的问题，并且想知道是否有人对问题可能有任何见解：

*   jQuery中的递归？
*   IE[6-8]的javascript引擎中的递归？
*   IE [6-8] 中的错误 jQuery 回调/方法链接？
*   幼稚的实施？

## 代码：

这是延迟加载功能：

```
jQuery.lazyLoadImages = function(imgSelector, recursive, fadeIn)
{
  var image = $(imgSelector);
  if (image.size()) {
    image.parents(SAH.imageContentSelector).addClass(SAH.loadingClass);
    // the img src attribute is stored in the alt attribute
    var imgSrc = image.attr('alt');
    image.attr('src', imgSrc).attr('alt','').load(function() {
      $(this)
      .removeClass(SAH.lazyLoadClass)
      .parents(SAH.imageContentSelector)
      .removeClass(SAH.loadingClass);
      if (fadeIn) $(this).fadeIn(SAH.lazyLoadDuration);
      if (recursive) {
        var nextPos = eval(parseInt(imgSelector.replace(/.*position-(\d+).*/,'$1')) + 1);
        var nextImage = imgSelector.replace(/position-(\d+)/,'position-' + nextPos);
        $.lazyLoadImages(nextImage, recursive, fadeIn);
      }
    });
    return true;
  } else {
    return false;
  }
} 
```

* * *

SAH.* 变量只是存储在全局对象 SAH 中的变量。下面是调用 $.lazyLoadImages() 的相关部分：

```
// fade the first image in with the navBar
var firstGalleryImageSelector = 'img#img-position-1-' + galleryId + '.' + SAH.lazyLoadClass;
$.lazyLoadImages(firstGalleryImageSelector,false,true);
navBar.show('slide', { direction: 'right' }, function() {
  // load the rest after the navBar callback
  $.lazyLoadImages(firstGalleryImageSelector.replace(/position-1/,'position-2'), true, true);
}); 
```

第一次调用 $.lazyLoadImages() 是非递归的；第二个是递归的，在导航栏滑入窗口后触发。

* * *

最后，这是相关的html：

```
<div id='position-1-i4design' class='content image' style='width:400px'>
  <div class='image-gallery'>
    <a class='local-x' href='#position-1-i4design'>
      <img alt='/images/press/i4design/i4design-1.jpg' id='img-position-1-i4design' class='lazy-load hide'>
    </a>
    ...
  </div>
  ...
</div>

<div id='position-2-i4design' class='content image' style='width:389px'>
  <div class='image-gallery'>
    <a class='local-x' href='#position-2-i4design'>
      <img alt='/images/press/i4design/i4design-2.jpg' id='img-position-2-i4design' class='lazy-load hide'>
    </a>
    ...
  </div>
  ...
</div>

<div id='position-3-i4design' class='content image' style='width:398px'>
  <div class='image-gallery'>
    <a class='local-x' href='#position-3-i4design'>
      <img alt='/images/press/i4design/i4design-3.jpg' id='img-position-3-i4design' class='lazy-load hide'>
    </a>
    ...
  </div>
  ...
</div>

... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-18T19:06:43.007

在您尝试设置该元素的 src*之前*，IE 需要为图像定义 onload 事件。所有其他浏览器都会处理得很好；IE 会窒息。

由于这个原因，您上面的加载函数很可能永远不会运行。

试试这个：

```
 image.attr('alt','').load(function() {
      $(this)
      .removeClass(SAH.lazyLoadClass)
      .parents(SAH.imageContentSelector)
      .removeClass(SAH.loadingClass);
      if (fadeIn) $(this).fadeIn(SAH.lazyLoadDuration);
      if (recursive) {
        var nextPos = eval(parseInt(imgSelector.replace(/.*position-(\d+).*/,'$1')) + 1);
        var nextImage = imgSelector.replace(/position-(\d+)/,'position-' + nextPos);
        $.lazyLoadImages(nextImage, recursive, fadeIn);
      }
    }).attr('src', imgSrc); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T19:07:21.257

我用递归 JavaScript 函数做了一些非常相似的事情来加载图像，这在 IE 中运行良好。

我可以看到的主要区别是：

*   我使用了普通的 JavaScript 函数，而不是 jQuery 函数。
*   我用 jQuery 创建了每个图像并将其添加到相关容器中。

我不确定这两点是否重要，但只要看看你的代码，我猜一些更昂贵的函数会引用图像的父母两次，并且还会淡入图像。

如果这些被注释掉，它会成功运行吗？

# sql - T-SQL 子查询 Max(Date) 和连接

> ID：879111
> 
> 赞同：28
> 
> 时间：2009-05-18T18:25:47.237
> 
> 标签：sql, sql-server, tsql, join, subquery

我正在尝试加入多个表，但其中一个表有多个记录，用于具有不同日期的 partid。我想获得最近日期的记录。

以下是一些示例表：

```
Table: MyParts
Partid   Partnumber   Description
1        ABC-123      Pipe
2        ABC-124      Handle
3        ABC-125      Light

Table: MyPrices
Partid   Price        PriceDate
1        $1           1/1/2005
1        $2           1/1/2007
1        $3           1/1/2009
2        $2           1/1/2005
2        $4           1/1/2006
2        $5           1/1/2008
3        $10          1/1/2008
3        $12          1/1/2009 
```

如果我只是想找到某个零件的最新价格，我可以这样做：

```
SELECT * FROM MyPrice WHERE PriceDate = (SELECT MAX(PriceDate) 
FROM MyPrice WHERE Partid = 1) 
```

但是，我想先加入并取回所有零件的正确价格，而不仅仅是一个。这是我尝试过的：

```
SELECT * FROM MyParts LEFT JOIN MyPrice ON MyParts.Partid = MyPrice.Partid WHERE 
MyPart.PriceDate = (SELECT MAX(PriceDate) FROM MyPrice) 
```

结果是错误的，因为它采用了整个表格的最高价格日期。

```
SELECT * FROM MyParts LEFT JOIN MyPrice ON MyParts.Partid = MyPrice.Partid WHERE 
MyPart.PriceDate = (SELECT MAX(PriceDate) FROM MyPrice WHERE MyPrice.Partid =   
MyParts.Partid) 
```

那错误了。

我该怎么做才能得到我想要的结果。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-05-18T19:00:18.183

这是另一种不使用子查询的方法。这种方法通常会优于其他方法，因此值得测试这两种方法，看看哪种方法性能最佳。

```
SELECT
     PRT.PartID,
     PRT.PartNumber,
     PRT.Description,
     PRC1.Price,
     PRC1.PriceDate
FROM
     MyParts PRT
LEFT OUTER JOIN MyPrices PRC1 ON
     PRC1.PartID = PRT.PartID
LEFT OUTER JOIN MyPrices PRC2 ON
     PRC2.PartID = PRC1.PartID AND
     PRC2.PriceDate > PRC1.PriceDate
WHERE
     PRC2.PartID IS NULL 
```

如果您有两个具有相同 EXACT PriceDate 的价格，这将给出多个结果（大多数其他解决方案也会这样做）。此外，我没有什么可以解释最后一个价格日期是在未来。无论您最终使用哪种方法，您都可能需要考虑进行检查。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2009-05-18T18:32:43.790

试试这个：

```
Select *,
    Price = (Select top 1 Price 
             From MyPrices 
             where PartID = mp.PartID 
             order by PriceDate desc
            )
from MyParts mp 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-05-18T18:31:40.253

```
SELECT
    MyParts.*,MyPriceDate.Price,MyPriceDate.PriceDate
    FROM MyParts
        INNER JOIN (SELECT Partid, MAX(PriceDate) AS MaxPriceDate FROM MyPrice GROUP BY Partid) dt ON MyParts.Partid = dt.Partid
        INNER JOIN MyPrice ON dt.Partid = MyPrice.Partid AND MyPrice.PriceDate=dt.MaxPriceDate 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-05-18T21:30:11.140

在 SQL Server 2005 及更高版本中使用[`ROW_NUMBER()`](https://docs.microsoft.com/en-us/sql/t-sql/functions/row-number-transact-sql)：

```
SELECT * FROM 
    ( SELECT p.*,
        ROW_NUMBER() OVER(PARTITION BY Partid ORDER BY PriceDate DESC) AS rn
    FROM MyPrice AS p ) AS t
WHERE rn=1 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-18T18:33:24.523

像这样的东西

```
SELECT * 
FROM MyParts 
LEFT JOIN 
(
SELECT MAX(PriceDate), PartID FROM MyPrice group by PartID
) myprice
 ON MyParts.Partid = MyPrice.Partid 
```

如果你知道你的partid或者可以限制它把它放在join里面。

```
 SELECT myprice.partid, myprice.partdate, myprice2.Price, * 
    FROM MyParts 
    LEFT JOIN 
    (
    SELECT MAX(PriceDate), PartID FROM MyPrice group by PartID
    ) myprice
     ON MyParts.Partid = MyPrice.Partid 
    Inner Join MyPrice myprice2
    on myprice2.pricedate = myprice.pricedate
    and myprice2.partid = myprice.partid 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-18T18:32:24.307

```
SELECT
    *
FROM
    (SELECT MAX(PriceDate) AS MaxP, Partid FROM MyPrices GROUP BY Partid) MaxP 
    JOIN
    MyPrices MP On MaxP.Partid = MP.Partid AND MaxP.MaxP = MP.PriceDate
    JOIN
    MyParts P ON MP.Partid = P.Partid 
```

您首先获取 partid 的最新价格日期（标准汇总），然后将其加入以获取价格（不能汇总），然后获取零件详细信息。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-05-18T18:39:45.617

加入价格表，然后选择最后一天的条目：

```
select pa.partid, pa.Partnumber, max(pr.price)
from myparts pa
inner join myprices pr on pr.partid = pa.partid
where pr.PriceDate = (
    select max(PriceDate) 
    from myprices 
    where partid = pa.partid
) 
```

max() 是在每天有多个价格的情况下；我假设你想显示最高的。如果您的价格表有一个 id 列，您可以避免使用 max() 并简化如下：

```
select pa.partid, pa.Partnumber, pr.price
from myparts pa
inner join myprices pr on pr.partid = pa.partid
where pr.priceid = (
    select max(priceid)
    from myprices 
    where partid = pa.partid
) 
```

PS改用wcm的解决方案！

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-18T18:45:11.643

所有其他答案必须有效，但使用相同的语法（并理解错误原因）

```
SELECT * FROM MyParts LEFT JOIN MyPrice ON MyParts.Partid = MyPrice.Partid WHERE 
MyPart.PriceDate = (SELECT MAX(MyPrice2.PriceDate) FROM MyPrice as MyPrice2 
WHERE MyPrice2.Partid =  MyParts.Partid) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-11-08T07:45:24.920

请尝试下一个代码示例：

```
select t1.*, t2.partprice, t2.partdate 
from myparts t1
join myprices t2 
on t1.partid = t2.partid
where partdate = 
(select max(partdate) from myprices t3 
where t3.partid = t2.partid group by partid) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-06-25T00:36:29.487

对于 MySQL，请查找以下查询：

```
select * from (select PartID, max(Pricedate) max_pricedate from MyPrices group bu partid) as a 
    inner join MyParts b on
    (a.partid = b.partid and a.max_pricedate = b.pricedate) 
```

在子查询中，它为 MyPrices 的每个 partyid 获取 max pricedate，然后使用 partid 和**max_priceate与 MyParts 进行内部连接**

# javascript - 总是用鼠标滚轮滚动父框架？

> ID：879114
> 
> 赞同：0
> 
> 时间：2009-05-18T18:26:21.543
> 
> 标签：javascript, scroll, parent, frame

我有一个位于*indexflash.html中的 iframe* *main* ，其中包含html 文档*indexflash2.html*，其中包含两个框架*topframe*（加载 main.html）和*bottomframe*（加载 home.html）。topframe和*bottomframe**都有*scrolling *="no"*。

 ****topframe*保存 Flash 导航控件 *bottomframe*更新与要显示的内容

我希望能够用鼠标滚轮控制*main*的滚动条，这样你就可以无缝地滚动整个页面作为一个单元。现在，我猜测焦点会落在*顶部框架*或*底部框架*上，因为当您尝试使用滚轮时，鼠标指针所在的位置。

我正在处理的页面可以在[http://96.9.39.101/indexflash.html看到](http://96.9.39.101/indexflash.html)

如何强制鼠标滚轮始终控制父 iframe *main*的滚动条，而不管其中包含哪些框架或 iframe？

我确定这将需要一些 javascript，但我对 JS 还不够熟悉，无法单独解决这个问题。

indexflash.html：

```
<iframe name="main" src="indexflash2.html" width="100%" height=2505></iframe> 
```

indexflash2.html：

```
<frameset framespacing="0" border="0" frameborder="0" rows="400,*">
<frame name="topFrame" height="400" scrolling="no" noresize target="bottomFrame" src="main.html">
<frame name="bottomFrame" height="2105" target="_self" scrolling="no" src="home.html">
<noframes>
</frameset> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T18:31:10.470

您可以使用[onscroll 事件](http://snook.ca/archives/javascript/handling_onscroll/)来同步两个帧。

**编辑**- 该网站在 Chrome 中对我来说运行良好，滚动没有什么奇怪的。不过，IE 并没有那么好用。我不确定我的想法是否可行。

```
<script type="text/javascript">
document.onscroll = function() {
    parent.b.document.body.scrollTop = document.body.scrollTop;
}
</script> 
```

会将名称为 b 的框架与滚动框架同步，但这可能不是您所需要的。

# c# - C# 透明图形用户界面

> ID：879119
> 
> 赞同：2
> 
> 时间：2009-05-18T18:29:02.783
> 
> 标签：c#, user-interface, transparency

大家好。我想知道如何在 C# 中制作一个“透明”的 GUI。现在我不是在谈论透明度键等。

我想制作一个使用 vistas 航空主题的窗口，而不是表单中的控件，我只是希望它显示更多的 seethru 航空外观。我还想从窗口中删除所有按钮、图标和文本。我该怎么做？

编辑...我找到了我想要创建的完美示例。在 vista 上加载 windows 移动中心。我怎样才能创造出这样的东西，但没有盒子。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-18T19:41:19.253

**如何进入您的客户区**

这是几年前我为我们的 Windows 应用程序执行此操作时使用的 API。

查看方法 ExtendGlassIntoClientArea(Form form, int leftMargin, int topMargin, int rightMargin, int bottomMargin)

```
using System;
using System.Drawing;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace UserInterface
{
    public enum TextStyle
    {
        Normal,
        Glowing
    }

    public static class Glass
    {
        [DllImport("dwmapi.dll")]
        private static extern void DwmIsCompositionEnabled(ref bool pfEnabled);
        [DllImport("dwmapi.dll")]
        private static extern void DwmExtendFrameIntoClientArea(IntPtr hWnd, ref MARGINS pMargins);
        [DllImport("gdi32.dll", ExactSpelling = true, SetLastError = true)]
        private static extern IntPtr CreateCompatibleDC(IntPtr hDC);
        [DllImport("gdi32.dll", ExactSpelling = true)]
        private static extern IntPtr SelectObject(IntPtr hDC, IntPtr hObject);
        [DllImport("gdi32.dll", ExactSpelling = true, SetLastError = true)]
        private static extern bool DeleteObject(IntPtr hObject);
        [DllImport("gdi32.dll", ExactSpelling = true, SetLastError = true)]
        private static extern bool DeleteDC(IntPtr hdc);
        [DllImport("gdi32.dll")]
        private static extern bool BitBlt(IntPtr hdc, int nXDest, int nYDest, int nWidth, int nHeight, IntPtr hdcSrc, int nXSrc, int nYSrc, uint dwRop);
        [DllImport("UxTheme.dll", CharSet = CharSet.Unicode)]
        private static extern int DrawThemeTextEx(IntPtr hTheme, IntPtr hdc, int iPartId, int iStateId, string text, int iCharCount, int dwFlags, ref RECT pRect, ref DTTOPTS pOptions);
        [DllImport("gdi32.dll")]
        static extern IntPtr CreateDIBSection(IntPtr hdc, [In] ref BITMAPINFO pbmi, uint iUsage, out IntPtr ppvBits, IntPtr hSection, uint dwOffset);

        [StructLayout(LayoutKind.Sequential)]
        private struct DTTOPTS
        {
            public int dwSize;
            public int dwFlags;
            public int crText;
            public int crBorder;
            public int crShadow;
            public int iTextShadowType;
            public POINT ptShadowOffset;
            public int iBorderSize;
            public int iFontPropId;
            public int iColorPropId;
            public int iStateId;
            public bool fApplyOverlay;
            public int iGlowSize;
            public int pfnDrawTextCallback;
            public IntPtr lParam;
        }

        private const int DTT_COMPOSITED = 8192;
        private const int DTT_GLOWSIZE = 2048;
        private const int DTT_TEXTCOLOR = 1;

        [StructLayout(LayoutKind.Sequential)]
        private struct POINT
        {
            public POINT(int x, int y)
            {
                this.x = x;
                this.y = y;
            }

            public int x;
            public int y;
        }

        [StructLayout(LayoutKind.Sequential)]
        private class BITMAPINFO
        {
            public int biSize;
            public int biWidth;
            public int biHeight;
            public short biPlanes;
            public short biBitCount;
            public int biCompression;
            public int biSizeImage;
            public int biXPelsPerMeter;
            public int biYPelsPerMeter;
            public int biClrUsed;
            public int biClrImportant;
            public byte bmiColors_rgbBlue;
            public byte bmiColors_rgbGreen;
            public byte bmiColors_rgbRed;
            public byte bmiColors_rgbReserved;
        }

        [StructLayout(LayoutKind.Sequential)]
        private struct MARGINS
        {
            public int left, right, top, bottom;
        }

        [StructLayout(LayoutKind.Sequential)]
        private struct RECT
        {
            public int Left;
            public int Top;
            public int Right;
            public int Bottom;

            public RECT(int left, int top, int right, int bottom)
            {
                Left = left;
                Top = top;
                Right = right;
                Bottom = bottom;
            }

            public RECT(Rectangle rectangle)
            {
                Left = rectangle.X;
                Top = rectangle.Y;
                Right = rectangle.Right;
                Bottom = rectangle.Bottom;
            }

            public Rectangle ToRectangle()
            {
                return new Rectangle(Left, Top, Right - Left, Bottom - Top);
            }

            public override string ToString()
            {
                return "Left: " + Left + ", " + "Top: " + Top + ", Right: " + Right + ", Bottom: " + Bottom;
            }
        }
        public static bool IsCompositionEnabled
        {
            get
            {
                if (Environment.OSVersion.Version.Major < 6)
                    return false;

                bool compositionEnabled = false;
                DwmIsCompositionEnabled(ref compositionEnabled);
                return compositionEnabled;
            }
        }

        public static void ExtendGlassIntoClientArea(Form form, int leftMargin, int topMargin, int rightMargin, int bottomMargin)
        {
            MARGINS m = new MARGINS();
            m.left = leftMargin;
            m.right = rightMargin;
            m.top = topMargin;
            m.bottom = bottomMargin;

            DwmExtendFrameIntoClientArea(form.Handle, ref m);
        }

        public static void DrawText(Graphics graphics, string text, Font font, Rectangle bounds, Color color, TextFormatFlags flags)
        {
            DrawText(graphics, text, font, bounds, color, flags, TextStyle.Normal);
        }

        public static void DrawText(Graphics graphics, string text, Font font, Rectangle bounds, Color color, TextFormatFlags flags, TextStyle textStyle)
        {
            IntPtr primaryHdc = graphics.GetHdc();

            // Create a memory DC so we can work offscreen
            IntPtr memoryHdc = CreateCompatibleDC(primaryHdc);

            // Create a device-independent bitmap and select it into our DC
            BITMAPINFO info = new BITMAPINFO();
            info.biSize = Marshal.SizeOf(info);
            info.biWidth = bounds.Width;
            info.biHeight = -bounds.Height;
            info.biPlanes = 1;
            info.biBitCount = 32;
            info.biCompression = 0; // BI_RGB
            int ppvBits;
            IntPtr dib = CreateDIBSection(primaryHdc, ref info, 0, out ppvBits, IntPtr.Zero, 0);
            SelectObject(memoryHdc, dib);

            // Create and select font
            IntPtr fontHandle = font.ToHfont();
            SelectObject(memoryHdc, fontHandle);

            // Draw glowing text
            System.Windows.Forms.VisualStyles.VisualStyleRenderer renderer = new System.Windows.Forms.VisualStyles.VisualStyleRenderer(System.Windows.Forms.VisualStyles.VisualStyleElement.Window.Caption.Active);
            DTTOPTS dttOpts = new DTTOPTS();
            dttOpts.dwSize = Marshal.SizeOf(typeof(DTTOPTS));

            if (textStyle == TextStyle.Glowing)
            {
                dttOpts.dwFlags = DTT_COMPOSITED | DTT_GLOWSIZE | DTT_TEXTCOLOR;
            }
            else
            {
                dttOpts.dwFlags = DTT_COMPOSITED | DTT_TEXTCOLOR;
            }
            dttOpts.crText = ColorTranslator.ToWin32(color);
            dttOpts.iGlowSize = 8; // This is about the size Microsoft Word 2007 uses
            RECT textBounds = new RECT(0, 0, bounds.Right - bounds.Left, bounds.Bottom - bounds.Top);
            DrawThemeTextEx(renderer.Handle, memoryHdc, 0, 0, text, -1, (int)flags, ref textBounds, ref dttOpts);

            // Copy to foreground
            const int SRCCOPY = 0x00CC0020;
            BitBlt(primaryHdc, bounds.Left, bounds.Top, bounds.Width, bounds.Height, memoryHdc, 0, 0, SRCCOPY);

            // Clean up
            DeleteObject(fontHandle);
            DeleteObject(dib);
            DeleteDC(memoryHdc);

            graphics.ReleaseHdc(primaryHdc);
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-18T18:31:10.550

如果是 WPF，则需要打开透明度，并为背景设置正确的值（此外，WPF 本身就支持 AERO 用于边框等）。

对于传统的 winforms... 事情开始变得艰难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T19:13:54.473

再加上窗体的窗体总是有[Form.Opacity属性。](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.opacity.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T19:10:59.550

您是否尝试过检查另一个问题中[提到的](https://stackoverflow.com/questions/555383/making-vista-style-apps-in-c)[这个？](http://code.msdn.microsoft.com/VistaBridge)

# asp.net-mvc - 使用 ASP.NET MVC 支持“Expect: 100-continue”标头

> ID：879120
> 
> 赞同：14
> 
> 时间：2009-05-18T18:29:08.137
> 
> 标签：asp.net-mvc, http, http-headers, http-status-code-100

`Expect: 100-continue`我正在使用 ASP.NET MVC 实现一个 REST API，并且以请求标头的形式出现了一个小绊脚石，用于带有帖子正文的请求。

[RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.2.3)指出：

> 在接收到一个包含“100-continue”期望的 Expect 请求头字段的请求时，源服务器必须要么以 100（继续）状态响应并继续从输入流中读取，要么以最终状态码响应。源服务器在发送 100（继续）响应之前不能等待请求正文。如果它以最终状态码响应，它可以关闭传输连接，或者它可以继续读取并丢弃请求的其余部分。如果它返回一个最终状态码，它绝不能执行请求的方法。

这听起来像是我需要对请求做出*两个*响应，即它需要立即发送一个 HTTP 100 Continue 响应，然后继续从原始请求流（即`HttpContext.Request.InputStream`）读取而不结束请求，然后最终发送结果状态码（为了论证，假设它是 204 No Content 结果）。

所以，问题是：

1.  我是否正确阅读规范，我需要对请求做出两个响应？
2.  这如何在 ASP.NET MVC 中完成？

wrt (2) 在继续读取输入流之前，我尝试使用以下代码...

```
HttpContext.Response.StatusCode = 100;
HttpContext.Response.Flush();
HttpContext.Response.Clear(); 
```

...但是当我尝试设置最终的 204 状态代码时，我得到了错误：

> System.Web.HttpException：发送 HTTP 标头后服务器无法设置状态。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-06-23T21:20:29.807

默认情况下，.NET 框架总是发送`expect: 100-continue`每个 HTTP 1.1 帖子的标头。这种行为可以通过如下[`System.Net.ServicePoint.Expect100Continue`](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.expect100continue.aspx)属性以编程方式控制每个请求：

```
HttpWebRequest httpReq = GetHttpWebRequestForPost();
httpReq.ServicePoint.Expect100Continue = false; 
```

它也可以通过编程方式进行全局控制：

```
System.Net.ServicePointManager.Expect100Continue = false; 
```

...或通过配置全局：

```
<system.net>
  <settings>
    <servicePointManager expect100Continue="false"/>
  </settings>
</system.net> 
```

感谢 Lance Olson 和[Phil Haack](http://haacked.com/archive/2004/05/15/http-web-request-expect-100-continue.aspx)提供此信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T21:12:10.973

100-continue 应该由 IIS 处理。你有什么理由要明确地这样做吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-12T00:57:15.993

IIS 处理 100。

也就是说，不，这不是两个回应。在 HTTP 中，当 Expect: 100-continue 作为消息头的一部分出现时，客户端应该等到收到响应后再发送内容。

由于 asp.net 的架构方式，您几乎无法控制输出流。每当您刷新时，写入流的任何数据都会自动放入带有分块编码的 200 响应中，无论您是否处于缓冲模式。

可悲的是，所有这些东西都隐藏在各处的内部方法中，结果是，如果你依赖 asp.net，就像 MVC 一样，你几乎无法绕过它。

等到您尝试以非缓冲方式访问输入流。满满的痛苦。

塞布

# javascript - 在 jQuery 中访问 DOM 元素的最有效方法是什么？

> ID：879123
> 
> 赞同：4
> 
> 时间：2009-05-18T18:29:44.577
> 
> 标签：javascript, jquery

我正在编写一个 jQuery 插件，我正处于优化阶段。

我想知道其中哪些通常会导致脚本更快，以及哪些缓解因素很重要：

1.  让脚本在开始时生成大量类和 id，以便以后在 dom 中查找元素更容易（也更快？）。
2.  将类和 id 保持在最低限度（这样可以通过不创建它们来节省时间），但稍后会以更复杂的方式查找元素（例如对象中的第 n 个项目），我认为这比通过 id/class 获取要慢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-18T19:50:09.453

浏览器的工作方式是在加载时创建一个内存中的 DOM 树，如下所示：

```
 P
                               _______________|______________
                              |                              |
                          childNodes                    attributes
                ______________|___________                   |
               |              |           |            title = 'Test paragraph'
         'Sample of text '   DIV   'in your document'
                              |
                          childNodes
                    __________|_______
                   |          |       |
           'HTML you might'   B     'have' 
```

因此，当您查找时`P > DIV > B`，查找必须查找所有`P`元素，然后查找其中的所有 DIV 元素，然后查找 DIV 中的`P`所有`B`元素。嵌套越深，需要进行的查找就越多。此外，它可能会发现 all`P > DIV`只是发现它们都没有，`B`并且会浪费时间查看所有`P > DIV`匹配项。

按 ID 查找更快，因为 ID 保证是唯一的，因此 DOM 可以将它们存储为具有非常快速查找的哈希表条目。就 jQuery 而言，实现可能略有不同，但是 document.getElementById 具有最快的查找时间，因此`$('#my_node_id')`也应该很快。

因此，如果您的节点没有 ID，您可以找到最近的祖先，并找到相对于该祖先的节点

```
#my_node_id > div > b 
```

因为查找只需要在它的子树下进行`#my_node_id`就会比`p > div > b`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-18T18:54:35.557

这个问题不够具体，所以我可以给你直接与你的代码相关的建议，但这里有一些我最喜欢的 jQuery 优化技巧：

1.  只要有可能，指定一个上下文！不要让 jQuery 看起来它不需要的地方。如果您知道某些内容将在`#container`div 内，请执行`$(something, '#container');`
2.  `.myclass`很*慢*。在内部，jQuery 必须遍历*每一个*元素以查看它是否具有您要搜索的类，至少对于那些不支持`getElementsByClassName`. 如果您知道一个类只会应用于某个元素，那么*这样*做会更快`tag.myclass`，因为 jQuery 可以使用本机`getElementsByTagName`并且只搜索那些。
3.  不要一口气做复杂的选择器。当然，jQuery 可以弄清楚你想要什么，但是解析字符串并将你想要的逻辑应用到它需要时间。因此，我总是喜欢将我的“查询”分成补丁。虽然大多数人可能会这样做`$('#myform input:eq(2)');`或类似的事情，但我更愿意这样做`$('input','#myform').eq(2);`来帮助 jQuery。
4.  如果您计划对一组对象执行多项操作，请不要重新查询 DOM。利用链接，如果由于某种原因无法使用链接，请将查询结果缓存到变量中并对其执行调用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-18T18:38:23.950

我想你回答了你自己的问题：“复杂的方式”是“它会破坏”的同义词——对 html 结构的任何更改都会破坏你的代码。

例如，假设您正在尝试获取`myDiv`并且假设它是 的最后一个兄弟`child`：

```
<div>parent
     <div>child</div>
     <div>myDiv</div>
</div> 
```

如果你后来决定结构应该是这样的，会发生什么？

```
<div>parent
     <div>child</div>
     <div>myDiv</div>
     <div>child</div>
</div> 
```

通过依赖关于结构的假设，您的代码变得非常脆弱。向节点添加类和 id 将防止这种情况发生。

我认为你应该选择第一选择。还要记住，按类获取节点总是比通过 id 获取节点慢。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-18T18:52:36.217

使用我的插件，我尽我所能来限制我在文档中引入的钩子的数量。“钩子”是指 ID 或类。

完全避免它们的最好方法是在插件的闭包中保留对任何已创建元素的引用。例如：

```
jQuery.fn.addList = function(items, fn){
    var $list = $('<ul/>').html('<li>' + items.join('</li><li>') + '</li>');
    return this.each(function(){
        $(this).append($list);
        fn.call($list);
    });
};

$('body').addList(['item 1', 'item 2'], function(){
    var referenceToTheList = this;
    console.log(referenceToTheList, '<- this is my list, no hooks involved!');
}); 
```

该列表可以围绕 JavaScript 函数进行（在多个地方引用和使用），而不需要 HTML 中的任何钩子；从而使其尽可能不引人注目！

避免/限制钩子在插件开发中尤其重要，因为你永远不知道它最终会在哪里使用。

# ruby - 是否可以在不实际发送或读取数据的情况下确定红宝石套接字是否处于 ESTABLISHED 或 CLOSE_WAIT 状态？

> ID：879124
> 
> 赞同：6
> 
> 时间：2009-05-18T18:29:59.133
> 
> 标签：ruby, sockets, select, openssl

```
s = Socket.new(Socket::AF_INET, Socket::SOCK_STREAM, 0)
s.connect(Socket.pack_sockaddr_in('port', 'hostname'))

ssl = OpenSSL::SSL::SSLSocket.new(s, sslcert)
ssl.connect 
```

从这里开始，我想检查一个线程，如果 ssl 连接和底层套接字仍然存在`ESTABLISHED`，或者它是否`CLOSE_WAIT`在默认的 7200 秒之后进入，或者更糟的是在实际上不需要进出`.write()`它的情况下关闭`.read()`。

是用`select()`,`IO.select()`还是其他方法完成的？

顺便说一句：套接字从不接收任何数据，它只是偶尔发送一些数据。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-06-06T05:20:26.287

答案是[特定于实现](http://www.developerweb.net/forum/showthread.php?t=4395)的。您需要检查操作系统上的 tcp 实现头文件。这是一个返回套接字状态的 linux 示例客户端。

```
 ts = TCPSocket.new('localhost', 5777)
  ssl = OpenSSL::SSL::SSLSocket.new(ts, OpenSSL::SSL::SSLContext.new)
  ssl.sync = true
  ssl.connect
  # TCP_INFO is 11
  # note that TCP_INFO isn't defined in the ruby source.  
  # i had to look up the integer value in /usr/include/netinet/tcp.h
  optval = ts.getsockopt(Socket::SOL_TCP, 11) 
  state = optval.unpack "i" 
  puts "state: #{state}" 
```

这是我最新的 ubuntu linux 的 tcp_info 结构

```
struct tcp_info
{
  u_int8_t      tcpi_state;
  u_int8_t      tcpi_ca_state;
  u_int8_t      tcpi_retransmits;
  u_int8_t      tcpi_probes;
  u_int8_t      tcpi_backoff;
  u_int8_t      tcpi_options;
  u_int8_t      tcpi_snd_wscale : 4, tcpi_rcv_wscale : 4;

  u_int32_t     tcpi_rto;
  u_int32_t     tcpi_ato;
  u_int32_t     tcpi_snd_mss;
  u_int32_t     tcpi_rcv_mss;

  u_int32_t     tcpi_unacked;
  u_int32_t     tcpi_sacked;
  u_int32_t     tcpi_lost;
  u_int32_t     tcpi_retrans;
  u_int32_t     tcpi_fackets;

  /* Times. */
  u_int32_t     tcpi_last_data_sent;
  u_int32_t     tcpi_last_ack_sent;     /* Not remembered, sorry.  */
  u_int32_t     tcpi_last_data_recv;
  u_int32_t     tcpi_last_ack_recv;

  /* Metrics. */
  u_int32_t     tcpi_pmtu;
  u_int32_t     tcpi_rcv_ssthresh;
  u_int32_t     tcpi_rtt;
  u_int32_t     tcpi_rttvar;
  u_int32_t     tcpi_snd_ssthresh;
  u_int32_t     tcpi_snd_cwnd;
  u_int32_t     tcpi_advmss;
  u_int32_t     tcpi_reordering;

  u_int32_t     tcpi_rcv_rtt;
  u_int32_t     tcpi_rcv_space;

  u_int32_t     tcpi_total_retrans;
}; 
```

您可能会注意到我的脚本只返回一个整数。这是详细说明 TCP 状态及其整数值的 C 枚举。同样，这是在 /usr/include/netinet/tcp.h 中找到的

```
enum
{   
  TCP_ESTABLISHED = 1,          
  TCP_SYN_SENT,
  TCP_SYN_RECV,
  TCP_FIN_WAIT1,
  TCP_FIN_WAIT2,
  TCP_TIME_WAIT,
  TCP_CLOSE,
  TCP_CLOSE_WAIT,
  TCP_LAST_ACK,
  TCP_LISTEN, 
  TCP_CLOSING   /* now a valid state */
}; 
```

此外，该[线程](http://fixunix.com/tcp-ip/66328-detecting-socket-state.html)说您可以通过读取 EOF 来检测 CLOSE_WAIT。但由于您担心数据是否已发送，您可能需要解压到 tcpi_last_data_sent。

最后，一个警告。我接受了回答你的问题的挑战，因为它听起来很有趣，但我的 C 腿仍然摇摆不定，所以 YMMV。:)

# .net - .NET fullscreen two monitors

> ID：879135
> 
> 赞同：1
> 
> 时间：2009-05-18T18:31:50.970
> 
> 标签：.net, fullscreen, multiple-monitors

I'm working on a multi-monitor kiosk application that needs to run full-screen on both monitors. I'm using C# and the standard winforms library. I've used a full-screen method for a single monitor with success, but I don't know how to get it full screen on both monitors.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-18T19:58:03.930

Aye, you need to [stretch it accross two monitors](http://www.codeproject.com/KB/cs/multi-monitor_in_c_.aspx) or use a videocard that can handle that at a driver level. I know that any recent NVidia cards can do it.

# javascript - Internet Explorer 8 中的 jQuery 问题

> ID：879137
> 
> 赞同：78
> 
> 时间：2009-05-18T18:32:23.947
> 
> 标签：javascript, jquery, internet-explorer-8

我试图让我的 jQuery 函数在 IE8 上工作。我正在从 Google 的服务器（[http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js)）加载库。

`$(function(){})`永远不会被调用。相反，我得到一个错误`Object expected`。我打开开发人员并`typeof $`在控制台中运行，结果显示为`undefined`.

我曾尝试访问我知道使用 jQuery (jquery.com) 的其他网站，这些网站都可以正常工作，这里有什么我可能遗漏的吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2010-05-06T17:32:40.323

定义变量时，在变量之前写上“var”。当没有“var”时，IE8 会死掉。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2010-12-15T11:05:45.247

更正：

检查您的脚本包含标签，是否使用

```
type="application/javascript" src="/path/to/jquery" 
```

改成

```
type="text/javascript" src="/path/to/jquery" 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2009-10-15T01:29:53.537

我遇到了类似的问题。在 IE7 兼容模式下运行的 IE6、Firefox 和 IE8 中工作正常；但不是在“正常”的 IE8 中。我的解决方案是将此代码放在标题中

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" /> 
```

至于为什么 jquery 不能在 IE8 中工作，我不清楚。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2010-06-11T08:13:11.227

解决方案是升级到最新版本的 jQuery。我遇到了完全相同的问题并升级到 1.4.2 并且在 IE8 中一切正常。

似乎与我所做的所有 jQuery 1.3.2 东西完全向后兼容，所以这里没有抱怨！

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2010-11-19T12:49:10.897

我遇到了这个问题，并尝试了这里提到的解决方案，但没有成功。

最终，我意识到我正在链接到脚本的 Google CDN 版本，`http URL`而嵌入脚本的页面是`https page`.

这导致**IE**无法加载 jquery（它会提示用户是否只想加载安全内容）。更改 Google CDN URL 以使用 https 方案为我解决了这个问题。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-08-27T23:48:14.383

Some people stumbling on this post might get this issue with jquery and IE8 because they're using >= jQuery v2\. Use this code:

```
<!--[if lt IE 9]>
    <script src="jquery-1.9.0.js"></script>
<![endif]-->
<!--[if gte IE 9]><!-->
    <script src="jquery-2.0.0.js"></script>
<!--<![endif]--> 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2009-05-18T18:43:01.460

jQuery 没有被加载，这不太可能特定于 IE8。检查 jQuery 包含的路径。陈述。或者更好的是，将以下内容用于 CDN：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.3.1/jquery.min.js">
</script> 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2011-04-26T19:31:33.490

如果您在站点上使用 HTTPS，则需要从 Google 的 https 服务器加载 jQuery 库。试试这个： [https](https://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js) ://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js （或最新的[https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/ jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js) )

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2010-12-07T05:00:33.077

我正在修复一个忘记包含文档类型的其他人*创建的模板。*

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

如果您不声明`doctype` **IE8**在 Quirks 模式下会发生奇怪的事情。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2011-08-17T09:19:12.850

引发错误`Object expected`是因为未加载 Jquery。这是因为浏览器安全性（通常是 IE）不允许您执行外部 javascript 源代码。您可以通过以下方式纠正此问题：

*   1：更改浏览器安全级别以允许执行外部 javascript 代码。你可以[在这里找到如何做到这一点](http://support.microsoft.com/gp/howtoscript)

或者

*   2：将jquery源代码复制粘贴到您的网页中，这样它就不会被视为外部脚本。

我更喜欢第一个解决方案。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2010-10-21T12:24:41.373

**onload 事件在IE7/8**中并不总是有效`<head> ... </head>`

您可以通过在页面末尾的标签之前添加一个 onload 脚本来强制它，如下所示。

```
 <script>
    window.onload();
  </script>
</body> 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2011-05-01T22:33:52.513

这解决了我在 IE8 中的问题：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script> 
```

在本地主机上运行，​​我不得不将**https://**更改为**http://**

如果我尝试浏览到安全链接，我会收到**Internet Explorer 无法显示网页** 友好警告。

如果出现问题，请务必先尝试在浏览器中加载文本脚本！

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2010-09-16T07:17:22.417

也许您插入两个脚本，它应该可以工作。

```
<script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE8.js"></script>  
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.1/jquery.min.js">/script> 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2009-08-05T14:07:44.273

我有同样的问题。

我解决了它验证 IE8 没有正确配置以访问 SRC URL。

我改变了这个，它工作正常。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2010-10-13T14:54:28.533

我遇到过同样的问题。解决方案是将 JQuery 文件的链接添加为 IE 中的受信任站点。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-05-18T18:54:40.207

也许您打开了[inPrivate Filtering ？](http://blogs.msdn.com/ie/archive/2008/08/25/ie8-and-privacy.aspx)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2011-04-18T13:49:45.950

我认为你和我有同样的问题：

```
Message: Permission denied
Line: 13
Char: 27021
Code: 0
URI: http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.3.2.min.js 
```

因为跨域引用。尝试在同一域上托管 jquery.js。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2010-05-08T14:09:23.333

好的！我知道 jQuery 正在加载。我知道`jQuery.textshadow.js`正在加载。我可以在开发者工具中找到这两个脚本。

奇怪的部分：此代码在内容区域中有效，但在横幅中无效。甚至有专门的`fixIE.css`. 并且当我将 css 内联时它可以工作。（当然，这会弄乱 FireFox。）

我什至在横幅中的文本字段周围放置了一个有条件的 IE 跨度，但没有运气。

`jquery-1.4.2.min.js`我发现没有区别，并且在和中都有相同的错误`jquery-1.2.6.min.js`。 `jquery.textshadow.js`在尝试找到解决此问题的方法时从 jQuery 站点下载。

这没有发布到网站上

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2011-03-12T08:34:27.737

简而言之，是因为IE8的解析引擎。

猜猜为什么微软在使用新的 HTML5 标记（如“section”）时也遇到了麻烦？这是因为 MS 决定他们不会像世界其他地方那样使用常规的 XML 解析。是的，没错——他们对 XML 进行了大量宣传，但最终，他们依靠“愚蠢”的解析引擎寻找“已知标签”，并在新事物出现时搞砸了。

IE8 和带有“load”、“get”和“post”的 jquery 问题也是如此。再次，微软决定在版本 8 中“走自己的路”。希望他们在 IE9 中解决（d）这个问题，目前唯一的选择是使用`<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />`.

哦，好吧......微软让我们再次在论坛上发布内容真是令人惊讶。;)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2012-08-17T11:10:25.390

就我而言，解决方案是从您尝试访问的 URL 中取出任何特殊字符。我有一个波浪号 (~) 和一个百分比符号， $.get() 调用默默地失败了。

# ruby-on-rails - Rails 中的 SEO 网址：.html 结尾与无。什么是最好的？

> ID：879141
> 
> 赞同：3
> 
> 时间：2009-05-18T18:33:21.060
> 
> 标签：ruby-on-rails, ruby, seo

我正在为博客应用程序考虑一个好的 SEO Url 策略。我不确定——也许只是一样——但有什么更好的呢？有或没有 .html

**/blog/entry_permalink_name.hml**

**VS**

**/blog/entry_permalink_name**

你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T18:50:05.643

我建议从 url 中删除 /blog/ 并使其如下： /entry-permallink-name

'博客'这个词在你的 URL 中引入了额外的不相关术语 .html 很可能会被搜索引擎忽略，但它的缺失使它更加用户友好，所以用破折号代替下划线。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-18T21:10:54.860

我不同意那里没有博客条目。我不认为“博客”是一个无关紧要的术语，因为您正在编写一个“博客”应用程序，并且有一个搜索“博客”部分。

至于您的问题，请在查看此问题时查看您的地址栏。堆栈溢出似乎是一个很好的模仿网站。

我同意 xelurg 关于破折号而不是下划线的观点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-18T23:30:04.033

直接回答你的问题，没有 HTML 是更好的 SEO 明智的。搜索引擎会考虑 url 中的关键字。现在，网址中的单词或字符越多，给定关键字的力量就越弱。

从逻辑上讲，在 url 末尾添加“.html”没有 SEO 优势。

同样删除博客位会增强标题中关键字的力量，但如果您想使用“博客”作为有价值的关键字，请保留它。

请记住，网址只是为 SEO 优化页面的众多因素之一，并不是最强大的。这里的普遍想法是，这些优化技巧本身都不会产生重大影响，但它们会累积起来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T21:44:21.017

我会像 stackoverflow 一样保留名称中的唯一 ID。这样就简单多了。

# c++ - C++ 电子邮件/SMTP

> ID：879147
> 
> 赞同：0
> 
> 时间：2009-05-18T18:34:43.507
> 
> 标签：c++, windows, email, visual-c++, smtp

嘿，你能推荐我哪些 C++ 库或类可用于在 C++ 中通过 SMTP 发送电子邮件。我在Windows平台上。我需要一个支持附件和 SSL 连接的库。有哪些可用选项。我不打算实施我自己的:)

问候

编辑：哦，我忘了提到我正在使用 Visual C++ 6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T18:43:16.577

我找到了一个可能是您正在寻找的项目：[lib smtp](http://developer.berlios.de/projects/libsmtp/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T18:45:16.637

我对[ATL 类 CSMTPConnection](http://msdn.microsoft.com/en-us/library/wt90h0a7(VS.80).aspx)很幸运，但我认为它不支持 SSL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T12:26:29.477

你不需要任何图书馆。（从不在 Windows 上）
只需使用 Winsock 或 COM

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T19:18:12.983

试用[Ultimate-TCP/IP](http://www.codeproject.com/KB/MFC/UltimateTCPIP.aspx)，在 Code Project 上免费 - 它包括对 SMTP 的支持，您可以只编译您想要的部分。这很好。

# web-applications - 带有集合的 ORM 类；试图保持对父类而不是孩子的关注

> ID：879149
> 
> 赞同：0
> 
> 时间：2009-05-18T18:35:14.877
> 
> 标签：web-applications, orm, collections, oop

假设我有一个 Farmer 类，而一个 Farmer 有一个 Pigs 集合。

如果我使用像 Hibernate 这样的 ORM，我可以将更新级联到 Farmer's Pig 集合，这样我就可以从我的控制器中执行以下操作：

```
Pig pig = new Pig("Charlie");
farmer.addPig(pig);
farmerService.save(farmer); 
```

我的农夫服务对猪一无所知。根据应用程序的要求，我什至可能根本不需要 Pig DAO。我只关心农民。

很酷，但是当猪变成培根时会发生什么？

```
farmer.removePig(pig);
farmerService.save(farmer); 
```

**这里的问题是，在一个无状态的 Web 应用程序中，我需要某种方法来创建一个 Pig，我将把它传递给 Farmer 的 removePig 方法。**

我可以：

```
// manual search Farmer's collection - requires loading all pigs.
// Yes, I could just pass id to removePig, but it confuses the example
pig = farmer.getPigById(id);
farmer.removePig(pig);
farmerService.save(farmer); 
```

或者

```
// loads up a pig, and hopefully it belongs to the farmer
pig = farmerService.getPigById(id);
farmer.removePig(pig);
farmerService.save(farmer); 
```

后者似乎更好，但如果我要向我的 farmerService 添加一个 getPigById() 方法，我可能也只有一个 savePig() 方法。这会将焦点从农民转移到猪。

```
pig = farmerService.getPigById(id);
farmerService.removePig(pig); 
```

啊哈，看起来它的代码更少了。但是，这违反了希望与农民及其猪收藏而不是个体猪合作的逻辑观点。我不再明确地从农民那里移除一头猪，这一切都是隐含的和倒退的。

**我似乎经常遇到这个问题。应该关注的课程是农民。猪是次要的。但是，如果不从斜坡上滑到与单个 Pigs 一起工作，就很难处理 Pigs 集合，这些 Pigs 的变化只是在 Farmers 从持久性中重新加载时反映出来。**

在这件事上你能给我什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T18:54:28.520

在这种情况下，我倾向于倾向于您的第二种方法。您处于无状态环境中的事实不应该反映在您的对象模型中，只能反映在您在特定 http 请求中恢复状态的方式中。这是在这里完成的：

```
pig = farmerService.getPigById(id); 
```

此代码应出现在控制器中（在 MVC 或 MVP 模式中）。然后其余的代码像往常一样继续：

```
farmer.removePig(pig);
farmerService.save(farmer); 
```

处理当前请求的特定控制器应该负责维护当前正在考虑的猪的这种状态。它应该负责向浏览器发送一个 pig id，并负责将这个 pig id 翻译成一个 pig 对象。它的方式是它自己的，但使用对农民服务的调用是最有意义的。从这里，您可以通过一个通用的 id-to-object 调用来进一步自动化这种翻译，反之亦然。

您认为此领域模型应该以农民为中心的想法是正确的，并且与领域驱动设计相一致。在这种情况下，Farmer 类是猪的集合，因此定义了围绕一组猪的边界。所有的猪都应该通过农场主。通过这种方式，您可以清楚地了解猪是如何创建、销毁和修改的。因此，您的最后一种方法不像以前那样健全。

# javascript - 如何让 JavaScript 发出哔哔声？

> ID：879152
> 
> 赞同：280
> 
> 时间：2009-05-18T18:36:20.303
> 
> 标签：javascript, audio, browser, beep

我希望我的网页在用户超过我的`<textarea>`.

* * *

## 回答 #1

> 赞同：545
> 
> 时间：2014-04-30T18:08:25.933

**解决方案**

您现在可以使用[base64 文件在作为](http://en.wikipedia.org/wiki/Base64)[数据 URI](http://en.wikipedia.org/wiki/Data_URI_scheme)导入时产生声音。解决方案与前面的几乎相同，只是您不需要导入外部音频文件。

```
function beep() {
    var snd = new Audio("data:audio/wav;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDgYtAgAyN+QWaAAihwMWm4G8QQRDiMcCBcH3Cc+CDv/7xA4Tvh9Rz/y8QADBwMWgQAZG/ILNAARQ4GLTcDeIIIhxGOBAuD7hOfBB3/94gcJ3w+o5/5eIAIAAAVwWgQAVQ2ORaIQwEMAJiDg95G4nQL7mQVWI6GwRcfsZAcsKkJvxgxEjzFUgfHoSQ9Qq7KNwqHwuB13MA4a1q/DmBrHgPcmjiGoh//EwC5nGPEmS4RcfkVKOhJf+WOgoxJclFz3kgn//dBA+ya1GhurNn8zb//9NNutNuhz31f////9vt///z+IdAEAAAK4LQIAKobHItEIYCGAExBwe8jcToF9zIKrEdDYIuP2MgOWFSE34wYiR5iqQPj0JIeoVdlG4VD4XA67mAcNa1fhzA1jwHuTRxDUQ//iYBczjHiTJcIuPyKlHQkv/LHQUYkuSi57yQT//uggfZNajQ3Vmz+Zt//+mm3Wm3Q576v////+32///5/EOgAAADVghQAAAAA//uQZAUAB1WI0PZugAAAAAoQwAAAEk3nRd2qAAAAACiDgAAAAAAABCqEEQRLCgwpBGMlJkIz8jKhGvj4k6jzRnqasNKIeoh5gI7BJaC1A1AoNBjJgbyApVS4IDlZgDU5WUAxEKDNmmALHzZp0Fkz1FMTmGFl1FMEyodIavcCAUHDWrKAIA4aa2oCgILEBupZgHvAhEBcZ6joQBxS76AgccrFlczBvKLC0QI2cBoCFvfTDAo7eoOQInqDPBtvrDEZBNYN5xwNwxQRfw8ZQ5wQVLvO8OYU+mHvFLlDh05Mdg7BT6YrRPpCBznMB2r//xKJjyyOh+cImr2/4doscwD6neZjuZR4AgAABYAAAABy1xcdQtxYBYYZdifkUDgzzXaXn98Z0oi9ILU5mBjFANmRwlVJ3/6jYDAmxaiDG3/6xjQQCCKkRb/6kg/wW+kSJ5//rLobkLSiKmqP/0ikJuDaSaSf/6JiLYLEYnW/+kXg1WRVJL/9EmQ1YZIsv/6Qzwy5qk7/+tEU0nkls3/zIUMPKNX/6yZLf+kFgAfgGyLFAUwY//uQZAUABcd5UiNPVXAAAApAAAAAE0VZQKw9ISAAACgAAAAAVQIygIElVrFkBS+Jhi+EAuu+lKAkYUEIsmEAEoMeDmCETMvfSHTGkF5RWH7kz/ESHWPAq/kcCRhqBtMdokPdM7vil7RG98A2sc7zO6ZvTdM7pmOUAZTnJW+NXxqmd41dqJ6mLTXxrPpnV8avaIf5SvL7pndPvPpndJR9Kuu8fePvuiuhorgWjp7Mf/PRjxcFCPDkW31srioCExivv9lcwKEaHsf/7ow2Fl1T/9RkXgEhYElAoCLFtMArxwivDJJ+bR1HTKJdlEoTELCIqgEwVGSQ+hIm0NbK8WXcTEI0UPoa2NbG4y2K00JEWbZavJXkYaqo9CRHS55FcZTjKEk3NKoCYUnSQ0rWxrZbFKbKIhOKPZe1cJKzZSaQrIyULHDZmV5K4xySsDRKWOruanGtjLJXFEmwaIbDLX0hIPBUQPVFVkQkDoUNfSoDgQGKPekoxeGzA4DUvnn4bxzcZrtJyipKfPNy5w+9lnXwgqsiyHNeSVpemw4bWb9psYeq//uQZBoABQt4yMVxYAIAAAkQoAAAHvYpL5m6AAgAACXDAAAAD59jblTirQe9upFsmZbpMudy7Lz1X1DYsxOOSWpfPqNX2WqktK0DMvuGwlbNj44TleLPQ+Gsfb+GOWOKJoIrWb3cIMeeON6lz2umTqMXV8Mj30yWPpjoSa9ujK8SyeJP5y5mOW1D6hvLepeveEAEDo0mgCRClOEgANv3B9a6fikgUSu/DmAMATrGx7nng5p5iimPNZsfQLYB2sDLIkzRKZOHGAaUyDcpFBSLG9MCQALgAIgQs2YunOszLSAyQYPVC2YdGGeHD2dTdJk1pAHGAWDjnkcLKFymS3RQZTInzySoBwMG0QueC3gMsCEYxUqlrcxK6k1LQQcsmyYeQPdC2YfuGPASCBkcVMQQqpVJshui1tkXQJQV0OXGAZMXSOEEBRirXbVRQW7ugq7IM7rPWSZyDlM3IuNEkxzCOJ0ny2ThNkyRai1b6ev//3dzNGzNb//4uAvHT5sURcZCFcuKLhOFs8mLAAEAt4UWAAIABAAAAAB4qbHo0tIjVkUU//uQZAwABfSFz3ZqQAAAAAngwAAAE1HjMp2qAAAAACZDgAAAD5UkTE1UgZEUExqYynN1qZvqIOREEFmBcJQkwdxiFtw0qEOkGYfRDifBui9MQg4QAHAqWtAWHoCxu1Yf4VfWLPIM2mHDFsbQEVGwyqQoQcwnfHeIkNt9YnkiaS1oizycqJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=");  
    snd.play();
}
beep(); 
```

**兼容性**

现在几乎所有浏览器都支持数据 URI。更多信息请访问[http://caniuse.com/datauri](http://caniuse.com/datauri)

**演示**

[http://jsfiddle.net/7EAgz/](http://jsfiddle.net/7EAgz/)

**转换工具**

在这里您可以将 mp3 或 wav 文件转换为 Data URI 格式：

[https://dopiaza.org/tools/datauri/index.php](https://dopiaza.org/tools/datauri/index.php)

* * *

## 回答 #2

> 赞同：148
> 
> 时间：2009-05-18T18:42:23.850

无法直接在 JavaScript 中执行。您需要在 HTML 中嵌入一个简短的 WAV 文件，然后通过代码播放该文件。

一个例子：

```
<script>
function PlaySound(soundObj) {
  var sound = document.getElementById(soundObj);
  sound.Play();
}
</script>

<embed src="success.wav" autostart="false" width="0" height="0" id="sound1"
enablejavascript="true"> 
```

然后，您可以从 JavaScript 代码中调用它，如下所示：

```
PlaySound("sound1"); 
```

这应该完全符合您的要求 - 您只需要自己找到/创建哔声，这应该是微不足道的。

* * *

## 回答 #3

> 赞同：102
> 
> 时间：2015-04-15T03:38:29.530

最佳答案当时是正确的，但现在是错误的；你可以用纯javascript来做。但是使用 javascript 的一个答案不再起作用，而其他答案非常有限或不使用纯 javascript。

我制作了自己的解决方案，效果很好，可以让你控制音量、频率和波形。

```
//if you have another AudioContext class use that one, as some browsers have a limit
var audioCtx = new (window.AudioContext || window.webkitAudioContext || window.audioContext);

//All arguments are optional:

//duration of the tone in milliseconds. Default is 500
//frequency of the tone in hertz. default is 440
//volume of the tone. Default is 1, off is 0.
//type of tone. Possible values are sine, square, sawtooth, triangle, and custom. Default is sine.
//callback to use on end of tone
function beep(duration, frequency, volume, type, callback) {
    var oscillator = audioCtx.createOscillator();
    var gainNode = audioCtx.createGain();

    oscillator.connect(gainNode);
    gainNode.connect(audioCtx.destination);

    if (volume){gainNode.gain.value = volume;}
    if (frequency){oscillator.frequency.value = frequency;}
    if (type){oscillator.type = type;}
    if (callback){oscillator.onended = callback;}

    oscillator.start(audioCtx.currentTime);
    oscillator.stop(audioCtx.currentTime + ((duration || 500) / 1000));
}; 
```

有人建议我编辑它以注意它仅适用于某些浏览器。然而，据我所知，所有现代浏览器[似乎都支持 Audiocontext 。](http://caniuse.com/#search=audiocontext)它在 IE 上不受支持，但 Microsoft 已停止使用它。如果您在特定浏览器上对此有任何问题，请报告。

* * *

## 回答 #4

> 赞同：87
> 
> 时间：2012-11-02T11:12:17.183

我写了一个函数来使用新的音频 API 发出哔哔声。

```
var beep = (function () {
    var ctxClass = window.audioContext ||window.AudioContext || window.AudioContext || window.webkitAudioContext
    var ctx = new ctxClass();
    return function (duration, type, finishedCallback) {

        duration = +duration;

        // Only 0-4 are valid types.
        type = (type % 5) || 0;

        if (typeof finishedCallback != "function") {
            finishedCallback = function () {};
        }

        var osc = ctx.createOscillator();

        osc.type = type;
        //osc.type = "sine";

        osc.connect(ctx.destination);
        if (osc.noteOn) osc.noteOn(0); // old browsers
        if (osc.start) osc.start(); // new browsers

        setTimeout(function () {
            if (osc.noteOff) osc.noteOff(0); // old browsers
            if (osc.stop) osc.stop(); // new browsers
            finishedCallback();
        }, duration);

    };
})(); 
```

[js小提琴](http://jsfiddle.net/55Kfu/1506/)。

* * *

## 回答 #5

> 赞同：69
> 
> 时间：2016-12-10T15:25:16.110

根据[Houshalter 的建议](https://stackoverflow.com/a/29641185/642706)，我制作了这个简单的音调合成器演示。

# 截屏

这是一个屏幕截图。在此答案中进一步尝试现场演示（单击*运行代码片段*）。

[![此答案中进一步提供的现场演示屏幕截图](https://i.stack.imgur.com/9a8od.png)](https://i.stack.imgur.com/9a8od.png)

# 演示代码

```
audioCtx = new(window.AudioContext || window.webkitAudioContext)();

show();

function show() {
  frequency = document.getElementById("fIn").value;
  document.getElementById("fOut").innerHTML = frequency + ' Hz';

  switch (document.getElementById("tIn").value * 1) {
    case 0: type = 'sine'; break;
    case 1: type = 'square'; break;
    case 2: type = 'sawtooth'; break;
    case 3: type = 'triangle'; break;
  }
  document.getElementById("tOut").innerHTML = type;

  volume = document.getElementById("vIn").value / 100;
  document.getElementById("vOut").innerHTML = volume;

  duration = document.getElementById("dIn").value;
  document.getElementById("dOut").innerHTML = duration + ' ms';
}

function beep() {
  var oscillator = audioCtx.createOscillator();
  var gainNode = audioCtx.createGain();

  oscillator.connect(gainNode);
  gainNode.connect(audioCtx.destination);

  gainNode.gain.value = volume;
  oscillator.frequency.value = frequency;
  oscillator.type = type;

  oscillator.start();

  setTimeout(
    function() {
      oscillator.stop();
    },
    duration
  );
};
```

```
frequency
<input type="range" id="fIn" min="40" max="6000" oninput="show()" />
<span id="fOut"></span><br>
type
<input type="range" id="tIn" min="0" max="3" oninput="show()" />
<span id="tOut"></span><br>
volume
<input type="range" id="vIn" min="0" max="100" oninput="show()" />
<span id="vOut"></span><br>
duration
<input type="range" id="dIn" min="1" max="5000" oninput="show()" />
<span id="dOut"></span>
<br>
<button onclick='beep();'>Play</button>
```

您可以在此处克隆和调整代码： [Tone synthesizer demo on JS Bin](http://jsbin.com/tupoyi/4/edit?html,js,output)

玩得开心！

## 兼容的浏览器：

*   Chrome 移动设备和桌面设备
*   Firefox 移动和桌面
*   Opera 移动版、迷你版和桌面版
*   安卓浏览器
*   微软边缘浏览器
*   iPhone 或 iPad 上的 Safari

## 不兼容

*   Internet Explorer 版本 11（但可以在 Edge 浏览器上运行）

* * *

## 回答 #6

> 赞同：44
> 
> 时间：2012-07-30T21:47:49.947

正如我们在[这个答案](https://stackoverflow.com/a/1934325/456584)中所读到的，如果您对该路线持开放态度，HTML5 将为您解决这个问题。[所有现代浏览器](http://html5readiness.com/)都支持 HTML5 音频。

这是示例的副本：

```
var snd = new Audio("file.wav"); // buffers automatically when created
snd.play(); 
```

* * *

## 回答 #7

> 赞同：43
> 
> 时间：2016-02-28T20:01:16.670

与投票最多的答案相比，这将使您能够多次播放声音：

```
var playSound = (function beep() {
    var snd = new Audio("data:audio/wav;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDgYtAgAyN+QWaAAihwMWm4G8QQRDiMcCBcH3Cc+CDv/7xA4Tvh9Rz/y8QADBwMWgQAZG/ILNAARQ4GLTcDeIIIhxGOBAuD7hOfBB3/94gcJ3w+o5/5eIAIAAAVwWgQAVQ2ORaIQwEMAJiDg95G4nQL7mQVWI6GwRcfsZAcsKkJvxgxEjzFUgfHoSQ9Qq7KNwqHwuB13MA4a1q/DmBrHgPcmjiGoh//EwC5nGPEmS4RcfkVKOhJf+WOgoxJclFz3kgn//dBA+ya1GhurNn8zb//9NNutNuhz31f////9vt///z+IdAEAAAK4LQIAKobHItEIYCGAExBwe8jcToF9zIKrEdDYIuP2MgOWFSE34wYiR5iqQPj0JIeoVdlG4VD4XA67mAcNa1fhzA1jwHuTRxDUQ//iYBczjHiTJcIuPyKlHQkv/LHQUYkuSi57yQT//uggfZNajQ3Vmz+Zt//+mm3Wm3Q576v////+32///5/EOgAAADVghQAAAAA//uQZAUAB1WI0PZugAAAAAoQwAAAEk3nRd2qAAAAACiDgAAAAAAABCqEEQRLCgwpBGMlJkIz8jKhGvj4k6jzRnqasNKIeoh5gI7BJaC1A1AoNBjJgbyApVS4IDlZgDU5WUAxEKDNmmALHzZp0Fkz1FMTmGFl1FMEyodIavcCAUHDWrKAIA4aa2oCgILEBupZgHvAhEBcZ6joQBxS76AgccrFlczBvKLC0QI2cBoCFvfTDAo7eoOQInqDPBtvrDEZBNYN5xwNwxQRfw8ZQ5wQVLvO8OYU+mHvFLlDh05Mdg7BT6YrRPpCBznMB2r//xKJjyyOh+cImr2/4doscwD6neZjuZR4AgAABYAAAABy1xcdQtxYBYYZdifkUDgzzXaXn98Z0oi9ILU5mBjFANmRwlVJ3/6jYDAmxaiDG3/6xjQQCCKkRb/6kg/wW+kSJ5//rLobkLSiKmqP/0ikJuDaSaSf/6JiLYLEYnW/+kXg1WRVJL/9EmQ1YZIsv/6Qzwy5qk7/+tEU0nkls3/zIUMPKNX/6yZLf+kFgAfgGyLFAUwY//uQZAUABcd5UiNPVXAAAApAAAAAE0VZQKw9ISAAACgAAAAAVQIygIElVrFkBS+Jhi+EAuu+lKAkYUEIsmEAEoMeDmCETMvfSHTGkF5RWH7kz/ESHWPAq/kcCRhqBtMdokPdM7vil7RG98A2sc7zO6ZvTdM7pmOUAZTnJW+NXxqmd41dqJ6mLTXxrPpnV8avaIf5SvL7pndPvPpndJR9Kuu8fePvuiuhorgWjp7Mf/PRjxcFCPDkW31srioCExivv9lcwKEaHsf/7ow2Fl1T/9RkXgEhYElAoCLFtMArxwivDJJ+bR1HTKJdlEoTELCIqgEwVGSQ+hIm0NbK8WXcTEI0UPoa2NbG4y2K00JEWbZavJXkYaqo9CRHS55FcZTjKEk3NKoCYUnSQ0rWxrZbFKbKIhOKPZe1cJKzZSaQrIyULHDZmV5K4xySsDRKWOruanGtjLJXFEmwaIbDLX0hIPBUQPVFVkQkDoUNfSoDgQGKPekoxeGzA4DUvnn4bxzcZrtJyipKfPNy5w+9lnXwgqsiyHNeSVpemw4bWb9psYeq//uQZBoABQt4yMVxYAIAAAkQoAAAHvYpL5m6AAgAACXDAAAAD59jblTirQe9upFsmZbpMudy7Lz1X1DYsxOOSWpfPqNX2WqktK0DMvuGwlbNj44TleLPQ+Gsfb+GOWOKJoIrWb3cIMeeON6lz2umTqMXV8Mj30yWPpjoSa9ujK8SyeJP5y5mOW1D6hvLepeveEAEDo0mgCRClOEgANv3B9a6fikgUSu/DmAMATrGx7nng5p5iimPNZsfQLYB2sDLIkzRKZOHGAaUyDcpFBSLG9MCQALgAIgQs2YunOszLSAyQYPVC2YdGGeHD2dTdJk1pAHGAWDjnkcLKFymS3RQZTInzySoBwMG0QueC3gMsCEYxUqlrcxK6k1LQQcsmyYeQPdC2YfuGPASCBkcVMQQqpVJshui1tkXQJQV0OXGAZMXSOEEBRirXbVRQW7ugq7IM7rPWSZyDlM3IuNEkxzCOJ0ny2ThNkyRai1b6ev//3dzNGzNb//4uAvHT5sURcZCFcuKLhOFs8mLAAEAt4UWAAIABAAAAAB4qbHo0tIjVkUU//uQZAwABfSFz3ZqQAAAAAngwAAAE1HjMp2qAAAAACZDgAAAD5UkTE1UgZEUExqYynN1qZvqIOREEFmBcJQkwdxiFtw0qEOkGYfRDifBui9MQg4QAHAqWtAWHoCxu1Yf4VfWLPIM2mHDFsbQEVGwyqQoQcwnfHeIkNt9YnkiaS1oizycqJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=");  
    return function() {     
        snd.play(); 
    }
})();

playSound(); // Play first time
playSound(); // Play second time 
```

* * *

## 回答 #8

> 赞同：19
> 
> 时间：2020-01-02T22:20:07.167

[现在使用 JavaScript AudioContext API](https://developer.mozilla.org/en/docs/Web/API/AudioContext)很容易。它[完全支持](https://caniuse.com/#search=AudioContext)主要的桌面和移动网络浏览器......

```
let context = null;

const beep = (freq = 520, duration = 200, vol = 100) => {
    const oscillator = context.createOscillator();
    const gain = context.createGain();
    oscillator.connect(gain);
    oscillator.frequency.value = freq;
    oscillator.type = "square";
    gain.connect(context.destination);
    gain.gain.value = vol * 0.01;
    oscillator.start(context.currentTime);
    oscillator.stop(context.currentTime + duration * 0.001);
}

document.querySelector('button').addEventListener('click', function () {
    context = new AudioContext();
    beep();
}); 
```

我写了一个小应用程序，它播放马里奥游戏中的音乐，没有任何音频文件，只是运行时。在我看来这很有趣，你可以看到[源代码](https://gist.github.com/tripolskypetr/a793967504aa6fcc0d3ebb30d1642dec)并听它。

[![在此处输入图像描述](https://i.stack.imgur.com/OI1Vd.png)](https://i.stack.imgur.com/OI1Vd.png)

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2011-01-07T20:10:21.097

使用 CSS 如果您将以下样式添加到标签，您可以做到这一点，但您需要一个`wav`文件：

```
<style type="text/css">
        .beep {cue: url("beep.wav") }
</style>

var body=document.getElementByTagName("body");
body.className=body.className + " " + "beep"; 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2014-02-28T16:01:41.813

这是我使用 HTML5 让它发出哔声的方法：首先我复制 windows wav 文件并将其转换为 mp3，然后使用以下代码：

```
var _beep = window.Audio("Content/Custom/Beep.mp3")

function playBeep() { _beep.play()}; 
```

全局声明声音文件并根据需要引用它会更快。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2021-06-14T10:34:47.267

此代码支持多个哔声的顺序，以及频率的逐渐变化（“斜坡”标志）。下面给出了这两个例子。

```
<script>
var audioContext = null;
var oscillatorNode = null;
var stopTime = 0;

function beep (frequency, durationSec, ramp=false)
{
    if (oscillatorNode == null) {
        audioContext = new (window.AudioContext || window.webkitAudioContext) ();
        stopTime = audioContext.currentTime;

        oscillatorNode = audioContext.createOscillator();
        oscillatorNode.type = "sine";
        oscillatorNode.connect (audioContext.destination);
        if (ramp) {
            oscillatorNode.frequency.setValueAtTime (frequency, stopTime);
        }
        oscillatorNode.start ();
        oscillatorNode.onended = function() {
            oscillatorNode = null;
            audioContext = null;
        }
    }

    if (ramp) {
        oscillatorNode.frequency.linearRampToValueAtTime (frequency, stopTime); // value in hertz
    } else {
        oscillatorNode.frequency.setValueAtTime (frequency, stopTime);  // value in hertz
    }

    stopTime += durationSec;
    oscillatorNode.stop (stopTime);
}
function test1()
{
        beep (250, 0.5);
        beep (1000, 0.2);
        beep (550, 0.5);
}

function test2()
{
        beep (50, 2, true);
        beep (5000, 2, true);
        beep (50, 0, true);
}
</script>

<button onclick='test1()'>Beep!</button>
<button onclick='test2()'>Beep(ramped)!</button> 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-05-18T18:42:19.077

没有跨浏览器的方法可以用纯 javascript 实现这一点。相反，您可以使用使用嵌入或对象标签播放的小型 .wav 文件。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-06-25T16:30:04.940

```
function beep(wavFile){
    wavFile = wavFile || "beep.wav"
    if (navigator.appName == 'Microsoft Internet Explorer'){
        var e = document.createElement('BGSOUND');
        e.src = wavFile;
        e.loop =1;
        document.body.appendChild(e);
        document.body.removeChild(e);
    }else{
        var e = document.createElement('AUDIO');
        var src1 = document.createElement('SOURCE');
        src1.type= 'audio/wav';
        src1.src= wavFile;
        e.appendChild(src1);
        e.play();
    }
} 
```

适用于 Chrome、IE、Mozilla 使用 Win7 操作系统。需要`beep.wav`服务器上的文件。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-09-30T08:36:48.173

```
function Sound(url, vol, autoplay, loop)
{
    var that = this;

    that.url = (url === undefined) ? "" : url;
    that.vol = (vol === undefined) ? 1.0 : vol;
    that.autoplay = (autoplay === undefined) ? true : autoplay;
    that.loop = (loop === undefined) ? false : loop;
    that.sample = null;

    if(that.url !== "")
    {
        that.sync = function(){
            that.sample.volume = that.vol;
            that.sample.loop = that.loop;
            that.sample.autoplay = that.autoplay;
            setTimeout(function(){ that.sync(); }, 60);
        };

        that.sample = document.createElement("audio");
        that.sample.src = that.url;
        that.sync();

        that.play = function(){
            if(that.sample)
            {
                that.sample.play();
            }
        };

        that.pause = function(){
            if(that.sample)
            {
                that.sample.pause();
            }
        };
    }
}

var test = new Sound("http://mad-hatter.fr/Assets/projects/FreedomWings/Assets/musiques/freedomwings.mp3");
test.play(); 
```

[http://jsfiddle.net/sv9j638j/](http://jsfiddle.net/sv9j638j/)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-04-08T14:37:25.017

注意：将此代码放入您的 javascript 中您希望发出哔声的位置。并记住指定存储哔声的目录或文件夹（源）。

```
<script>
//Appending HTML5 Audio Tag in HTML Body
$('<audio id="chatAudio"><source src="sound/notify.ogg" type="audio/ogg"><source src="sound/notify.mp3" type="audio/mpeg"><source src="sound/notify.wav" type="audio/wav"></audio>').appendTo('body');

$('#chatAudio')[0].play();
</script> 
```

参考：[http](http://www.9lessons.info/2013/04/play-notification-sound-using-jquery.html) ://www.9lessons.info/2013/04/play-notification-sound-using-jquery.html 。

我在我正在开发的社交媒体中实现了这一点，它可以在聊天时找到类似 facebook 的通知，通知您有新的聊天消息

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-01-31T08:32:03.537

```
<html>
<head>
    <script src='https://surikov.github.io/webaudiofont/npm/dist/WebAudioFontPlayer.js'></script>
    <script src='https://surikov.github.io/webaudiofontdata/sound/0000_JCLive_sf2_file.js'></script>
    <script>
        var selectedPreset=_tone_0000_JCLive_sf2_file;
        var AudioContextFunc = window.AudioContext || window.webkitAudioContext;
        var audioContext = new AudioContextFunc();
        var player=new WebAudioFontPlayer();
        player.loader.decodeAfterLoading(audioContext, '_tone_0000_JCLive_sf2_file');
    </script>
</head>
<body>
    <p><a href="#" onmousedown="player.queueWaveTable(audioContext, audioContext.destination, selectedPreset, 0, 55, 3.5);">Play a note</a></p>
    <hr/>
    <p><a href="https://github.com/surikov/webaudiofont">source</a></p>
</body> 
```

在这里听 [https://jsbin.com/lamidog/1/edit?html ,输出](https://jsbin.com/lamidog/1/edit?html,output)

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2009-05-18T18:44:41.693

您需要从某个地方提供声音文件。这是[Scriptaculous](http://github.com/madrobby/scriptaculous/downloads)的声音库中的代码：

```
//Default:
<embed style="height:0" id="sound_#{track}_#{id}" src="#{url}" loop="false" autostart="true" hidden="true"/>

//For Gecko:
if(Prototype.Browser.Gecko && navigator.userAgent.indexOf("Win") > 0){
  if(navigator.plugins && $A(navigator.plugins).detect(function(p){ return p.name.indexOf('QuickTime') != -1 }))
    Sound.template = new Template('<object id="sound_#{track}_#{id}" width="0" height="0" type="audio/mpeg" data="#{url}"/>');
  else if(navigator.plugins && $A(navigator.plugins).detect(function(p){ return p.name.indexOf('Windows Media') != -1 }))
    Sound.template = new Template('<object id="sound_#{track}_#{id}" type="application/x-mplayer2" data="#{url}"></object>');
  else if(navigator.plugins && $A(navigator.plugins).detect(function(p){ return p.name.indexOf('RealPlayer') != -1 }))
    Sound.template = new Template('<embed type="audio/x-pn-realaudio-plugin" style="height:0" id="sound_#{track}_#{id}" src="#{url}" loop="false" autostart="true" hidden="true"/>');
  else
    Sound.play = function(){};
} 
```

# python - 如何在 Windows 上安装 python-dateutil？

> ID：879156
> 
> 赞同：50
> 
> 时间：2009-05-18T18:38:53.357
> 
> 标签：python, installation, python-dateutil

我正在尝试将一些日期/时间转换为 UTC，我认为这在 Python 中会很简单——包括电池，对吧？好吧，这很简单，只是 Python (2.6) 不包含任何 tzinfo 类。没问题，快速搜索会出现[python-dateutil](http://pypi.python.org/pypi/python-dateutil)，它应该完全符合我的需要。

问题是我需要在 Windows 上安装它。我能够使用 7-zip 压缩 .tar.gz2 发行版，但现在我只剩下一组文件，并且没有关于如何继续的指导。当我尝试运行 setup.py 时，我收到错误“没有名为 setuptools 的模块”。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2011-08-25T08:05:27.953

如果 dateutil 丢失，请通过以下方式安装：

```
pip install python-dateutil 
```

或者在 Ubuntu 上：

```
sudo apt-get install python-dateutil 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-05-18T21:15:02.747

为什么没有人告诉我我是个十足的菜鸟？我所要做的就是将`dateutil`目录复制到我的 Python 路径中的某个位置，这很好。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-18T18:49:41.400

看起来 setup.py 使用 easy_install （即`setuptools`）。只需安装[setuptools](http://pypi.python.org/pypi/setuptools/0.6c9)包，一切就绪。

要在 Python 2.6 中安装 setuptools，请参阅[此问题](https://stackoverflow.com/questions/309412/how-to-setup-setuptools-for-python-26-on-windows)的答案。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-09-26T14:02:29.010

从“用于 Python 扩展包的非官方 Windows 二进制文件”安装

[http://www.lfd.uci.edu/~gohlke/pythonlibs/#python-dateutil](http://www.lfd.uci.edu/~gohlke/pythonlibs/#python-dateutil)

几乎有你需要的每一个包。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-12-09T03:12:43.763

对于不习惯命令提示符的人来说，这有点棘手。您所要做的就是打开安装python的目录（默认为C：\ Python27）并在那里打开命令提示符（shift +右键单击并选择在此处打开命令窗口）然后键入：

**python -m pip install python-dateutil**

希望有帮助。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2010-04-26T21:38:36.183

在 setup.py 中使用`setup`from`distutils.core`而不是对我也有用：`setuptools`

```
#from setuptools import setup
from distutils.core import setup 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-24T09:24:24.380

如果您处于脱机状态并且已解包，则可以使用命令提示符。

导航到未去皮的文件夹并运行：

```
python setup.py install 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-09T22:58:42.887

只需以管理员身份运行命令提示符并输入。

```
easy_install python-dateutil 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-10-29T09:32:38.293

您还可以更改您的 PYTHONPATH：

```
$ python -c 'import dateutil'
   Traceback (most recent call last):
     File "<string>", line 1, in <module>
   ImportError: No module named dateutil
$
$ PYTHONPATH="/usr/lib/python2.6/site-packages/python_dateutil-1.5-py2.6.egg":"${PYTHONPATH}"
$ export PYTHONPATH
$ python -c 'import dateutil'
$ 
```

我的盒子里安装**dateutil**`/usr/lib/python2.6/site-packages/python_dateutil-1.5-py2.6.egg`的地方在哪里（ *centos* using ）***`sudo yum install python-dateutil15`***

 **** * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-04-26T13:46:30.480

首先确认你在C:/python##/Lib/Site-packages/有一个文件夹dateutil，也许你下载了它，你应该已经有pip,matplotlib, Six##,,确认你已经安装了dateutil---转到cmd，cd /python，你应该有一个文件夹/Scripts。cd 到 Scripts，然后输入 --pip install python-dateutil -- ----这适用于 windows 7 Ultimate 32bit, Python 3.4------

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-12-06T19:10:49.797

我遵循了这个列表中的几个建议，但没有成功。最后使用这种方法将它安装在 Windows 上：我提取了 zip 文件并将文件夹放在我的文件夹下`python27`。在 DOS 窗口中，我从解压缩 zip 文件 ( ) 导航到已安装的根文件夹`python-dateutil-2.6.0`，然后发出以下命令：

```
.\python setup.py install 
```

Whammo-bammo 这一切都奏效了。

# configuration - 为什么我的 SSIS 配置更新没有保存？

> ID：879157
> 
> 赞同：0
> 
> 时间：2009-05-18T18:38:53.733
> 
> 标签：configuration, ssis, scheduled-tasks

我有一个在我们的生产环境中启动并运行的 SSIS 2005 包。该程序包使用 SMTP 连接管理器将电子邮件消息发送给指定用户。我们有一个执行这个包的计划作业，并且还覆盖了 SMTP 连接字符串，以便包可以针对测试或生产邮件服务器，这使得我们可以在我们的测试和生产服务器上保留一个服务，只是配置不同.

我们最近更改了生产邮件服务器的服务器名称，并进入了计划的作业，并将运行的命令提示符值更改为指向新服务器。但是，第二天早上，该作业失败，错误日志表明该作业尝试连接到旧邮件服务器。

更新 SSIS 包参数有什么我缺少的吗？我是否必须删除现有包，然后重新导入并重新安排作业才能保留新的服务器更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T13:58:18.357

如果您使用的是包配置功能？它可能对执行顺序很挑剔。这里有更多信息：http: [//msdn.microsoft.com/en-us/library/ms141132.aspx](http://msdn.microsoft.com/en-us/library/ms141132.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T19:22:17.873

我工作的 dba 也有类似的问题。他们不得不更改作业的运行参数，但似乎使用修改后的参数运行作业仅在他们第一次运行时才有效。在那次运行之后，它在后续运行中继续使用旧值。他们不得不重新包装这该死的东西。

# perl - 压缩 Perl 转置代码

> ID：879162
> 
> 赞同：2
> 
> 时间：2009-05-18T18:40:03.167
> 
> 标签：perl

我总是发现自己在写这样的代码：

```
my $var = $result[0];
my $var_changed = $var;
$var_changed =~ s/somepattern/somechange/g; 
```

有什么更好的方法来做到这一点？我所说的“更好”是指：减少打字，同时保持可以理解。

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-18T18:46:56.213

这将与第二行和第三行执行相同的操作；

```
(my $var_changed = $var) =~ s/somepattern/somechange/g; 
```

你的电话有多清晰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T19:37:26.733

甚至

```
(my $var_changed = my $var = $result[0]) =~ s/somepattern/somechange/g; 
```

但这开始让人质疑为什么首先需要 $var 。

# .net - IAsyncResult 接口的正确实现是什么？

> ID：879163
> 
> 赞同：13
> 
> 时间：2009-05-18T18:40:17.847
> 
> 标签：.net, asynchronous, design-patterns, iasyncresult

我正在考虑为我创建的类增加一些灵活性，该类建立与远程主机的连接，然后执行信息交换（握手）。当前实现提供了一个 Connect 函数，该函数建立连接，然后阻塞等待 ManualResetEvent 直到双方完成握手。

这是调用我的类的示例：

```
// create a new client instance
ClientClass cc = new ClientClass("address of host");
bool success = cc.Connect();  // will block here until the
                              //  handshake is complete
if(success)
{

} 
```

..这是该类内部功能的过度简化的高级视图：

```
class ClientClass
{
    string _hostAddress;
    ManualResetEvent _hanshakeCompleted;
    bool _connectionSuccess;

    public ClientClass(string hostAddress)
    {
        _hostAddress = hostAddress;            
    }

    public bool Connect()
    {
        _hanshakeCompleted = new ManualResetEvent(false);            
        _connectionSuccess = false;

        // start an asynchronous operation to connect
        //  ...
        //  ...

        // then wait here for the connection and
        //  then handshake to complete
        _hanshakeCompleted.WaitOne();

        // the _connectionStatus will be TRUE only if the
        //  connection and handshake were successful
        return _connectionSuccess;
    }

    // ... other internal private methods here
    // which handle the handshaking and which call
    // HandshakeComplete at the end

    private void HandshakeComplete()
    {
        _connectionSuccess = true;
        _hanshakeCompleted.Set();
    }
} 
```

我正在研究为这个类实现[.NET Classic Async Pattern](http://msdn.microsoft.com/en-us/library/ms228975.aspx)。为此，我将提供 BeginConnect 和 EndConnect 函数，并允许该类的用户编写如下代码：

```
ClientClass cc = new ClientClass("address of host");
cc.BeginConnect(new AsyncCallback(ConnectCompleted), cc);
// continue without blocking to this line

// ..

void ConnectCompleted(IAsyncResult ar)
{
    ClientClass cc = ar.AyncState as ClientClass;
    try{
        bool success = cc.EndConnect(ar);
        if(success)
        {
             // do more stuff with the 
             //  connected Client Class object
        }
    }
    catch{
    }
} 
```

为了能够提供此 API，我需要创建一个实现 IAsyncResult 接口的类，该接口由 BeginConnect 函数返回，并分别传递给 EndConnect 函数。

**现在，我的问题是：在类中实现 IAsyncResult 接口的正确方法是什么？**

一个明显的解决方案是为 Connect 函数创建一个具有匹配签名的委托，然后使用 BeginInvoke - EndInvoke 异步调用该委托，但这不是我想要的（它不是很有效）。

我对如何做到这一点有一个粗略的想法，但是在查看了 .NET 框架内部他们如何在某些地方实现这种模式之后，我觉得问问是否有人成功地做到了这一点是明智的，如果是的话是什么问题领域要特别注意。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-15T10:51:20.123

您可以将调用包装在 IAsyncResult 实现中。因为我最近一直在研究多线程，所以我在这里发布了它（它也有指向其他接口实现的链接）：

[http://msmvps.com/blogs/luisabreu/archive/2009/06/15/multithreading-implementing-the-iasyncresult-interface.aspx](http://msmvps.com/blogs/luisabreu/archive/2009/06/15/multithreading-implementing-the-iasyncresult-interface.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T11:51:09.693

*   [杰弗里·里希特](http://msdn.microsoft.com/en-us/magazine/cc163467.aspx)（MSDN 杂志）
*   [Microsoft 的 WCF 示例](http://msdn.microsoft.com/library/dd483346.aspx)
*   [Niko Schuessler](http://blogs.msdn.com/b/nikos/archive/2011/03/14/how-to-implement-iasyncresult-in-another-way.aspx)（MS 员工）
*   谷歌“IAsyncResult 实现”了解更多...

您在 BCL 中也有许多实现（例如 `System.Runtime.Remoting.Messaging.AsyncResult`） - 使用反射器或参考源来检查它们。

# php - 我可以发布正在使用 jquery 上传的文件的临时文件名吗

> ID：879165
> 
> 赞同：1
> 
> 时间：2009-05-18T18:40:22.963
> 
> 标签：php, jquery, ajax, upload

我需要发布一个包含个人详细信息的表单，并且我需要上传一个附件文件，我还需要使用 AJAX 来实现这一点。

如何使用 AJAX 上传文件，我需要发布个人详细信息以及使用 AJAX 同时上传文件，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T18:47:33.963

您无法使用 AJAX 上传文件，因为您无法执行多部分编码请求 - 这是 XMLHttpRequest API 的限制。

解决方法通常涉及使用作为表单目标的 IFRAME，该表单将实际文件上传处理为整个表单的单独子流程。然后，在 IFRAME 中加载的响应与有关上传文件的信息返回到父/调用页面中的 DOM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T18:48:53.447

如果您在页面上添加隐藏的 iframe

```
<iframe name="iframe1" ... /> 
```

并将表单上的目标更改为发布到 iframe

```
<Form traget="iframe1" ...>...</form> 
```

您可以将数据上传并发布到页面。您还可以使用 javascript (JQuery) 来挂钩 iframe 的事件。

要获取上传进度表，请使用 php uploadprogress 模块。效果很好！ [http://pecl.php.net/package/uploadprogress](http://pecl.php.net/package/uploadprogress) 和 [http://bluga.net/projects/uploadProgressMeter/](http://bluga.net/projects/uploadProgressMeter/)

这是我发现可能有帮助的链接： [http ://www.finalwebsites.com/forums/topic/php-ajax-upload-example](http://www.finalwebsites.com/forums/topic/php-ajax-upload-example)

# svn - 子行级合并工具？

> ID：879168
> 
> 赞同：1
> 
> 时间：2009-05-18T18:41:49.343
> 
> 标签：svn, tortoisesvn, mergetool

是否有任何交互式合并工具，当它们在给定行上发生合并冲突时，返回并尝试对冲突行进行一次字符合并？

我正在考虑在更改的代码行与缩进的同一行之间发生合并冲突的情况。

* * *

顺便说一句：我正在使用从 TortoiseSVN 调用的[Beyond Compare](http://www.scootersoftware.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T18:54:41.203

虽然这不是您正在寻找的东西，但我发现使用不同的差异工具（如 Kdiff）会更容易地向您指出这一点。（他们突出了性格差异。我没有尝试过以这种方式合并）

现在使用了一段时间后，我再也无法忍受使用 Visual Studio 的内置差异了。

一些用于配置的资源：

[http://www.ytechie.com/2008/12/advantages-of-a-3rd-party-diffcompare-tool.html](http://www.ytechie.com/2008/12/advantages-of-a-3rd-party-diffcompare-tool.html)

[http://blogs.msdn.com/jmanning/articles/535573.aspx](http://blogs.msdn.com/jmanning/articles/535573.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T19:11:17.787

```
patch -l 
```

忽略空格。

我不认为更通用的子行级合并对于代码来说不是一个好主意，除非它是交互式的；如果您触摸的线路发生了变化，那么很有可能会发生故障。

# python - 如何忽略 Python 中的弃用警告

> ID：879173
> 
> 赞同：219
> 
> 时间：2009-05-18T18:42:44.380
> 
> 标签：python, warnings, deprecated

我不断得到这个：

```
DeprecationWarning: integer argument expected, got float 
```

如何让这条消息消失？有没有办法避免 Python 中的警告？

* * *

## 回答 #1

> 赞同：260
> 
> 时间：2009-05-18T19:01:48.350

你应该只修复你的代码，但以防万一，

```
import warnings
warnings.filterwarnings("ignore", category=DeprecationWarning) 
```

* * *

## 回答 #2

> 赞同：213
> 
> 时间：2009-10-28T23:24:01.537

我有这些：

```
/home/eddyp/virtualenv/lib/python2.6/site-packages/Twisted-8.2.0-py2.6-linux-x86_64.egg/twisted/persisted/sob.py:12:
DeprecationWarning: the md5 module is deprecated; use hashlib instead import os, md5, sys

/home/eddyp/virtualenv/lib/python2.6/site-packages/Twisted-8.2.0-py2.6-linux-x86_64.egg/twisted/python/filepath.py:12:
DeprecationWarning: the sha module is deprecated; use the hashlib module instead import sha 
```

修复它：

```
import warnings

with warnings.catch_warnings():
    warnings.filterwarnings("ignore",category=DeprecationWarning)
    import md5, sha

yourcode() 
```

现在你仍然得到所有其他`DeprecationWarning`的，但不是由以下原因引起的：

```
import md5, sha 
```

* * *

## 回答 #3

> 赞同：136
> 
> 时间：2009-05-18T18:50:07.827

从[`warnings`模块](https://docs.python.org/3/library/warnings.html)的文档：

```
 #!/usr/bin/env python -W ignore::DeprecationWarning 
```

如果您在 Windows 上：`-W ignore::DeprecationWarning`作为参数传递给 Python。最好通过强制转换为[int](http://docs.python.org/3.0/library/functions.html#int)来解决问题。

（请注意，在 Python 3.2 中，默认情况下会忽略弃用警告。）

* * *

## 回答 #4

> 赞同：49
> 
> 时间：2018-05-24T23:49:18.303

**这些答案都不适合我，所以我将发布解决此问题的方法。我使用以下`at the beginning of my main.py`脚本，它工作正常。**

* * *

按原样使用以下内容（复制粘贴）：

```
def warn(*args, **kwargs):
    pass
import warnings
warnings.warn = warn 
```

例子：

```
import "blabla"
import "blabla"

def warn(*args, **kwargs):
    pass
import warnings
warnings.warn = warn

# more code here...
# more code here... 
```

* * *

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2010-03-04T17:35:36.753

我发现最简洁的方法（尤其是在 Windows 上）是将以下内容添加到 C:\Python26\Lib\site-packages\sitecustomize.py：

```
import warnings
warnings.filterwarnings("ignore", category=DeprecationWarning) 
```

请注意，我必须创建此文件。当然，如果您的路径不同，请更改为 python 的路径。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2019-05-02T07:41:26.203

#### 码头解决方案

*   在运行 python 应用程序之前禁用所有警告
    *   您也可以禁用 dockerized 测试

```
ENV PYTHONWARNINGS="ignore::DeprecationWarning" 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2019-11-19T13:01:26.793

> 蟒蛇 3

只需在编写代码之前写下容易记住的行：

```
import warnings

warnings.filterwarnings("ignore") 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2009-05-18T18:49:35.567

传递正确的论点？:P

更严重的是，您可以将命令行上的参数 -Wi::DeprecationWarning 传递给解释器以忽略弃用警告。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-12-04T21:02:39.940

当您只想忽略函数中的警告时，可以执行以下操作。

```
import warnings
from functools import wraps

def ignore_warnings(f):
    @wraps(f)
    def inner(*args, **kwargs):
        with warnings.catch_warnings(record=True) as w:
            warnings.simplefilter("ignore")
            response = f(*args, **kwargs)
        return response
    return inner

@ignore_warnings
def foo(arg1, arg2):
    ...
    write your code here without warnings
    ...

@ignore_warnings
def foo2(arg1, arg2, arg3):
    ...
    write your code here without warnings
    ... 
```

只需在要忽略所有警告的函数上添加 @ignore_warnings 装饰器

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-05-18T18:49:38.453

将参数转换为 int。这很简单

```
int(argument) 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2019-12-14T16:34:27.490

对于 python 3，只需编写以下代码即可忽略所有警告。

```
from warnings import filterwarnings
filterwarnings("ignore") 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-03-08T04:53:54.833

如果您使用的是 Python3，请尝试以下代码：

```
import sys

if not sys.warnoptions:
    import warnings
    warnings.simplefilter("ignore") 
```

或试试这个...

```
import warnings

def fxn():
    warnings.warn("deprecated", DeprecationWarning)

with warnings.catch_warnings():
    warnings.simplefilter("ignore")
    fxn() 
```

或试试这个...

```
import warnings
warnings.filterwarnings("ignore") 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-08-16T07:33:07.203

如果您知道自己在做什么，另一种方法是简单地**找到警告您的文件（文件的路径显示在警告信息中），注释生成警告的行。**

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-09-17T22:17:47.687

如果您使用日志记录 ( [https://docs.python.org/3/library/logging.html](https://docs.python.org/3/library/logging.html) ) 来格式化或重定向您的错误、通知和调试消息，您可以将警告从警告系统重定向到日志记录系统：

```
logging.captureWarnings(True) 
```

请参阅[https://docs.python.org/3/library/warnings.html](https://docs.python.org/3/library/warnings.html)和[https://docs.python.org/3/library/logging.html#logging.captureWarnings](https://docs.python.org/3/library/logging.html#logging.captureWarnings)

就我而言，我正在使用日志系统格式化所有异常，但警告（例如 scikit-learn）不受影响。

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2009-05-18T18:55:05.603

不是为了打败你，而是警告你，当你下次升级 python 时，你正在做的事情可能会停止工作。转换为 int 并完成它。

顺便提一句。您还可以编写自己的警告处理程序。只需分配一个什么都不做的函数。 [如何将 python 警告重定向到自定义流？](https://stackoverflow.com/questions/858916/how-to-redirect-python-warnings-to-a-custom-stream)

* * *

## 回答 #16

> 赞同：-4
> 
> 时间：2020-09-20T08:35:45.993

注释掉以下文件中的**警告行：**

```
lib64/python2.7/site-packages/cryptography/__init__.py 
```

# mysql - 如何从 .myd、.myi、.frm 文件中恢复 MySQL 数据库

> ID：879176
> 
> 赞同：190
> 
> 时间：2009-05-18T18:43:05.627
> 
> 标签：mysql, recovery

如何从`.myd`, `.myi`,`.frm`文件中恢复我的 MySQL 数据库之一？

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2009-05-18T19:07:12.257

如果这些是 MyISAM 表，则将 .FRM、.MYD 和 .MYI 文件放入数据库目录（例如，`/var/lib/mysql/dbname`）将使该表可用。它不必是来自相同的数据库、相同的服务器、相同的 MySQL 版本或相同的架构。您可能还需要更改文件夹的所有权（例如，`chown -R mysql:mysql /var/lib/mysql/dbname`）

请注意，权限（`GRANT`等）是`mysql`数据库的一部分。因此它们不会与表格一起恢复；您可能需要运行适当的`GRANT`语句来创建用户、授予访问权限等（恢复`mysql`数据库是可能的，但您需要小心 MySQL 版本和任何需要的`mysql_upgrade`实用程序运行。）

实际上，您可能只需要 .FRM（表结构）和 .MYD（表数据），但您必须修复表以重建 .MYI（索引）。

唯一的限制是，如果您要降级，最好检查发行说明（并且可能运行修复表）。当然，较新的 MySQL 版本添加了功能。

[虽然应该很明显，如果你混合和匹配表，这些表之间关系的完整性是你的问题；MySQL 不会在意，但您的应用程序和您的用户可能会。此外，此方法根本不适用于 InnoDB 表。只有 MyISAM，但考虑到您拥有的文件，您拥有 MyISAM]

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2010-05-21T10:47:08.827

请注意，如果要重建 MYI 文件，则正确使用 REPAIR TABLE 是：

修复表某个表 USE_FRM；

否则你可能会得到另一个错误。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-06-27T10:13:36.123

我刚刚发现解决这个问题。我在 Windows 7 上使用 MySQL 5.1 或 5.6。

1.  从位于“C:\Program Data\MySQL\MSQLServer5.1\Data”的旧文件中复制**.frm**文件和**ibdata1**
2.  停止当前 SQL 实例中的 SQL Server 实例
3.  转到位于“C:\Program Data\MySQL\MSQLServer5.1\Data”的数据文件夹
4.  粘贴**ibdata1**和数据库的文件夹，其中包含要恢复的文件**中的 .frm文件。**
5.  启动 MySQL 实例。

无需为此恢复查找 .MYI 和 .MYD 文件。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2011-05-25T16:24:10.350

简单的！创建一个虚拟数据库（比如 abc）

将所有这些 .myd、.myi、.frm 文件复制到 mysql\data\abc，其中 mysql\data\ 是存储所有数据库的 .myd、.myi、.frm 的位置。

然后去 phpMyadmin，去 db abc 你找到你的数据库。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2010-04-11T03:58:02.577

需要注意的一件事：

.FRM 文件中包含您的表结构，并且特定于您的 MySQL 版本。

.MYD 文件不是特定于版本的，至少不是次要版本。

`REPAIR TABLE`.MYI 文件是特定的，但可以像其他答案所说的那样被忽略并重新生成。

这个答案的重点是让您知道，如果您有表的模式转储，那么您可以使用它来生成表结构，然后用您的备份替换那些 .MYD 文件，删除 MYI 文件并修复它们全部。这样，您可以将备份恢复到另一个 MySQL 版本，或者完全移动您的数据库而不使用`mysqldump`. 我发现这在移动大型数据库时非常有用。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2016-01-28T09:43:43.050

我找到了将文件转换为文件的解决方案`.sql`（然后您可以将`.sql`文件导入服务器并恢复数据库），而无需访问`/var`目录，因此您也不需要成为服务器管理员来执行此操作。

它确实需要在您的计算机上安装 XAMPP 或 MAMP。

*   安装 XAMPP 后，导航到安装目录（通常`C:\XAMPP`）和子目录`mysql\data`. 完整路径应该是`C:\XAMPP\mysql\data`
*   在里面，您将看到您创建的任何其他数据库的文件夹。将充满`.myd`,`.myi`和`.frm`文件的文件夹复制并粘贴到那里。该文件夹的路径应该是

    `C:\XAMPP\mysql\data\foldername\.mydfiles`

*   然后`localhost/phpmyadmin`在浏览器中访问。选择您刚刚粘贴到`mysql\data`文件夹中的数据库，然后单击导航栏中的导出。选择将其导出为`.sql`文件。然后它会弹出询问保存文件的位置

就是这样！您（应该）现在有一个`.sql`文件，其中包含原来的数据库`.myd`和`.myi`文件`.frm`。然后，您可以通过 phpMyAdmin 将其导入到另一台服务器，方法是创建一个新数据库并在导航栏中按“导入”，然后按照步骤导入它

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2009-11-08T15:50:17.480

我认为 .myi 你可以从 mysql 内部修复。

如果您从 MySQL 中看到这些类型的错误消息： Database failed to execute query (query) 1016: Can't open file: 'sometable.MYI'。（errno：145）错误消息：1034：表的密钥文件不正确：'sometable'。尝试修复它然后你可能有一个崩溃或损坏的表。

您可以从 mysql 提示符检查和修复表，如下所示：

```
check table sometable;
+------------------+-------+----------+----------------------------+
| Table | Op | Msg_type | Msg_text | 
+------------------+-------+----------+----------------------------+ 
| yourdb.sometable | check | warning | Table is marked as crashed | 
| yourdb.sometable | check | status | OK | 
+------------------+-------+----------+----------------------------+ 

repair table sometable;
+------------------+--------+----------+----------+ 
| Table | Op | Msg_type | Msg_text | 
+------------------+--------+----------+----------+ 
| yourdb.sometable | repair | status | OK | 
+------------------+--------+----------+----------+ 
```

现在你的桌子应该没问题：

```
check table sometable;
+------------------+-------+----------+----------+ 
| Table | Op | Msg_type | Msg_text |
+------------------+-------+----------+----------+ 
| yourdb.sometable | check | status | OK |
+------------------+-------+----------+----------+ 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2009-05-18T18:49:15.707

您可以将文件复制到数据文件夹的适当命名的子目录目录中，只要它与 mySQL 的版本完全相同，并且您保留了该目录中的所有关联文件。如果您没有所有文件，我很确定您会遇到问题。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2010-08-20T20:51:30.940

[http://forums.devshed.com/mysql-help-4/mysql-installation-problems-197509.html](http://forums.devshed.com/mysql-help-4/mysql-installation-problems-197509.html)

它说要重命名 ib_* 文件。我已经做到了，它还给了我数据库。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-01-27T03:51:28.697

上面的描述不足以让事情对我有用（可能是密集的或懒惰的），所以一旦我找到了将来可以帮助我的答案，我就创建了这个脚本。希望它可以帮助别人

```
vim fixperms.sh 

#!/bin/sh
for D in `find . -type d`
do
        echo $D;
        chown -R mysql:mysql $D;
        chmod -R 660 $D;
        chown mysql:mysql $D;
        chmod 700 $D;
done
echo Dont forget to restart mysql: /etc/init.d/mysqld restart; 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2012-05-31T11:57:17.903

对于那些安装了 Windows XP 并安装了 MySQL 服务器 5.5 - 数据库的位置是 C:\Documents and Settings\All Users\Application Data\MySQL\MySQL Server 5.5\data，除非您在 MySql Workbench 安装中更改了位置图形用户界面。

# vba - 捕获整个公司的电子表格使用情况

> ID：879182
> 
> 赞同：3
> 
> 时间：2009-05-18T18:45:08.743
> 
> 标签：vba, excel, inventory-management

我们有很多正在使用的定制电子表格解决方案，我们需要一些程序化的方式来跟踪它们。显然，由于它们是电子表格，人们可以将它们保存在本地，重命名它们等等，所以我们需要一个可以解决这个问题的解决方案。

一些想法是：

1.  在电子表格打开时，处理 OnOpen 事件并将消息写入数据库以进行跟踪

与此相关的问题是我们在哪里存储数据库详细信息。如果数据库关闭，我们不希望电子表格崩溃等

有没有人想出一个很好的电子表格库存管理解决方案来处理上述所有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T19:07:18.650

我不明白您要在这里解决的问题：您不需要将电子表格使用记录作为最终结果，某些事情正在引起痛苦，这就是您试图解决的问题。

如果您需要非常可靠地记录所有电子表格的使用情况，那么我认为这不会奏效。如果您需要最可靠的日志记录，那么只需使用数据库，而不必担心数据库关闭的（罕见）情况。`On Error Resume Next`应该足以确保电子表格在该事件中继续存在。

也就是说，我更倾向于使用基于 Web 的解决方案：这样您就不必参与确保每个人都有必要的数据库驱动程序、工作连接字符串和其他可怕的事情。

一些更尴尬的问题让我认为您可能需要另一种方法：

您将如何将更改部署到您的日志记录解决方案？

您的用户是否可以控制他们的宏观安全级别？或者编写和编辑宏的能力？因此，他们可以（无辜地或以其他方式）禁用日志记录吗？

用户可以离线操作吗？那会发生什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T18:57:05.503

让 Excel 电子表格向 Web 服务器发出请求。

将 msinet.ocx 添加到您的工具箱并使用 Inet 控件创建一个表单。通过右键单击工具箱区域中的某处来添加 ocx。

然后，您可以将 Inet 控件的位置设置在您可以处理打开电子表格的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T19:12:22.807

尽管您可能需要在短期内登录，但长期的解决方案应该是控制您的电子表格。您应该收集电子表格的“最终”副本，并将它们移动到文件共享中，它们都将受到保护 - 用户将能够更改其中的数据，但无法更改公式。

如果您需要更可控的协作解决方案，那么您应该考虑使用 SharePoint，可能是具有 Excel Services 的 MOSS 版本。

您可能还需要探索电子表格的使用方式。也许他们被用来代替编写程序的人，在某些情况下，可能是时候这样做了。

最后，您不想跟踪电子表格的使用情况——您不在乎是否有人创建了电子表格来跟踪他们孩子的足球队得分。这是您感兴趣的特定电子表格。日志记录可能会帮助您从一开始就追踪它，但这就是它可以帮助您的全部。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T01:26:05.120

我喜欢到目前为止提出的建议以及您所写的内容。我个人喜欢保持简单，所以这是我的谦虚建议。听起来您可能正在管理很多模板，而使用 Excel 时，事情会变得一团糟，而且很难知道公式没有被篡改。考虑到这一点，我会忘记任何数据库更改管理解决方案，而是：

*   创建一个共享驱动器文件夹，该文件夹设置为只读且公司中的每个人都可以访问
*   您可以创建一个按团队、部门、位置等有效的子文件夹结构
*   将 Excel 模板的最新副本存储在文件夹中
*   我还建议锁定其中包含关键计算的模板-> 尽量将其保持打开状态，以便可以在需要的地方自定义它们，但由您自行决定

您还可以考虑设置一个版本控制存储库来管理对此文件夹结构的更改。使用像 tortoiseSVN 这样的简单界面查看版本控制，这样您就可以跟踪所做的更改以及更改的时间。标准的共享驱动器备份可以挽救生命，但我仍然会补充版本控制系统（只是让事情变得更容易一些）。这里有几个链接可以帮助您入门，您可以在本地尝试 subversion 并查看您的想法：

[在 Windows 上设置 Subversion 的说明](http://www.codinghorror.com/blog/2008/04/setting-up-subversion-on-windows.html)

[Tortoise 客户端与 Subversion 交互](http://tortoisesvn.net/)

另请注意，如果您选择为电子表格实现某种数据库连接以在数据库服务器上执行日志记录，如前所述，您可以使用“on error resume next”。以下是您可以执行的操作：

*   恢复后下一次尝试打开与数据库的连接
*   您可以选择使用 if 语句来处理错误，例如：

    ```
    if err.number = 3024 then
        msgbox "Database file not found, check network connection and retry"
        exit
    end if 
    ```

这是一个链接，用于查找以类似方式捕获的其他错误代码：

[VBA 中的错误捕获](http://support.microsoft.com/kb/146864)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-01T15:17:11.500

我做了一些与此非常相似的事情来检查 Excel 应用程序的当前版本。您可以轻松地使用相同的代码向将记录“命中”的服务器发出 Web 请求。这是我的代码：

在**本工作簿**中：

```
Option Explicit

Private Sub Workbook_Open()
    Updater.CheckVersion
End Sub 
```

**其他地方（在一个名为 Updater 的模块中）**

```
Option Explicit

Const VersionURL = "http://yourServer/CurrentVersion.txt"
Const ChangesURL = "http://yourServer/Changelog.txt"
Const LatestVersionURL = "http://yourServer/YourTool.xlsm"

#If VBA7 Then
    Private Declare PtrSafe Function ShellExecute Lib "shell32.dll" Alias "ShellExecuteA" _
        (ByVal hwnd As Long, ByVal lpOperation As String, ByVal lpFile As String, ByVal lpParameters As String, ByVal lpDirectory As String, ByVal nShowCmd As Long) As Long
#Else
    Private Declare Function ShellExecute Lib "shell32.dll" Alias "ShellExecuteA" _
        (ByVal hwnd As Long, ByVal lpOperation As String, ByVal lpFile As String, ByVal lpParameters As String, ByVal lpDirectory As String, ByVal nShowCmd As Long) As Long
#End If

Public Sub CheckVersion()
    On Error GoTo fail
    Application.StatusBar = "Checking for newer version..."

    Dim ThisVersion As String, LatestVersion As String, VersionChanges As String
    ThisVersion = Range("CurrentVersion").Text
    If ThisVersion = vbNullString Then GoTo fail

    LatestVersion = FetchFile(VersionURL, , True)
    VersionChanges = FetchFile(ChangesURL, , True)
    If LatestVersion = vbNullString Then
        Application.StatusBar = "Version Check Failed!"
        Exit Sub
    Else
        If LatestVersion = ThisVersion Then
            Application.StatusBar = "Version Check: You are running the latest version!"
        Else
            Application.StatusBar = "Version Check: This tool is out of date!"
            If (MsgBox("You are not running the latest version of this tool. Your version is " & _
                ThisVersion & ", and the latest version is " & LatestVersion & vbNewLine & _
                vbNewLine & "Changes: " & VersionChanges & vbNewLine & _
                vbNewLine & "Click OK to visit the latest version download link.", vbOKCancel, _
                "Tool Out of Date Notification") = vbOK) Then
                ShellExecute 0, vbNullString, LatestVersionURL, vbNullString, vbNullString, vbNormalFocus
            End If
        End If
    End If
    Exit Sub
fail:
    On Error Resume Next
    Application.StatusBar = "Version Check Failed (" & Err.Description & ")"
End Sub 
```

如您所见，错误处理已到位，以确保如果 URL 不可用，应用程序不会崩溃，它只是在状态栏中向用户写入一条消息。

请注意，如果您不想设置执行此操作的 Web 服务，您可以尝试将电子表格写入数据库 - 您仍然可以重复使用很多此代码，但不能重复使用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-04T10:02:05.780

你的想法很好。数据库可用性通常高于用户笔记本电脑的可用性。而且 VBA 中有一种原始错误（异常）处理，因此他们不一定会看到可怕的错误消息。

是的，你有损失。当用户不在您的网络上时，离线保存的工作表的任何使用都将从数据库中丢失。但我不认为有一个 100% 万无一失的解决方案。

尝试搜索金融时报的文章，例如“Excel - 一种过于临时且容易出错的工具”。甚至标题都说明了一切。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-18T18:48:12.370

写入数据库，如果写入失败，捕获错误并发送电子邮件给可以在数据库备份时手动增加计数的人。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-30T01:37:24.813

您可以使用多种文件完整性监控解决方案中的任何一种来执行基于文件的方法。Samhain 是一个免费的开源示例。这将允许您的员工不受干扰地访问他们的电子表格，但会在发现新电子表格或其时间戳或哈希值更改时报告。一旦他们重新连接到网络，它还将检测开发人员在离线时（例如在他们的笔记本电脑上）所做的更改。

# silverlight-3.0 - 浏览器中的silverlight - 图标

> ID：879188
> 
> 赞同：9
> 
> 时间：2009-05-18T18:47:06.413
> 
> 标签：silverlight-3.0

有谁知道如何更改 Silverlight outofbrowser 应用程序中的图标？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-18T18:50:17.500

`AppManifest.xml`在您的项目中修改：

```
<Deployment.ApplicationIdentity>
    <ApplicationIdentity
        ShortName="xxx"
        Title="xxx">
        <ApplicationIdentity.Blurb>
            xxx
        </ApplicationIdentity.Blurb>
        <ApplicationIdentity.Icons>
            <Icon Size="16x16">icons/16x16.png</Icon>
            <Icon Size="32x32">icons/32x32.png</Icon>
            <Icon Size="48x48">icons/48x48.png</Icon>
            <Icon Size="128x128">icons/128x128.png</Icon>
        </ApplicationIdentity.Icons>
    </ApplicationIdentity>
</Deployment.ApplicationIdentity> 
```

图标应该是 png 格式的图像（构建操作设置为内容）

[你可以在这里](http://mokosh.co.uk/post/2009/04/21/silverlight-3-out-of-browser-oob-applications/)阅读更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:51:45.993

我有实现这个的新想法

1\. 单击 Sliverlight 项目

2\. 选择属性选项

3\. 选择第一个选项卡选项，例如 Silverlight

4\. 单击浏览器外设置选项

5\. 您可以根据您的要求设置图标.......

# sql - Oracle 从 IN 子句中选择数字

> ID：879189
> 
> 赞同：2
> 
> 时间：2009-05-18T18:47:16.617
> 
> 标签：sql, oracle

我正在寻找直接从 in 子句中选择数字的最佳方法。

基本上像：

```
选择 * 从 (2,6,1,8);

```

那是行不通的。我可以这样做：

```
SELECT Lv FROM ( 选择级别 LV
                  从双
                  连接级别 < 20)
WHERE Lv IN (2,6,1,8);

```

但这似乎有点笨拙。有没有更优雅的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T00:24:05.907

你可以做

```
select column_value from table(sys.dbms_debug_vc2coll(1,2,3,4,5)); 
```

但这实际上返回了一个 varchar2。您可以创建自己的 TYPE 并使用它

```
create type tab_num is table of number;
/
select column_value from table(tab_num(1,2,3,4,5)); 
```

MODEL 子句也值得一看。看起来很复杂，但是非常擅长生成数据

```
SELECT x from dual
MODEL DIMENSION BY (1 AS z) MEASURES (1 x)
  RULES ITERATE (7) (x[ITERATION_NUMBER]=ITERATION_NUMBER+1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T19:58:15.477

如果你实现一个辅助数字表会更优雅：

```
SELECT num FROM numbers WHERE num IN (2,6,1,8); 
```

这在与另一个表组合时也很有用。

例如，我有一个案例需要使用分段结果的更改填充大型配置表：

Big SP 或 Excel 工作表或报告识别配置中缺失的成本中心会提供大量结果，这些结果需要在某些组中插入不同的数据。

将部分结果粘贴到单独的逗号分隔列表中：

```
INSERT INTO {stuff}
SELECT {stuff}, 130 as line_item
FROM numbers
WHERE numbers.num IN ({pasted a section of results})

INSERT INTO {stuff}
SELECT {stuff}, 135 as line_item
FROM numbers
WHERE numbers.num IN ({pasted another section of results}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T18:51:26.717

如果您不明确需要 IN 子句，则可以使用 UNION：

```
 select 2 from dual
  union
  select 6 from dual
  union
  select 1 from dual
  union
  select 8 from dual 
```

有一个更优雅的变体可以将多行插入到表中：

```
INSERT ALL
   INTO table (col) VALUES ('a')
   INTO table (col) VALUES ('b')
   INTO table (col) VALUES ('c')
SELECT * FROM dual; 
```

但我不知道如何为 SELECT 做到这一点。

# vb.net - 尝试将参数传递给 Crystal Reports

> ID：879196
> 
> 赞同：0
> 
> 时间：2009-05-18T18:48:33.930
> 
> 标签：vb.net, visual-studio-2005, crystal-reports

我正在尝试使用 VB.net 将参数从 Visual Studio 传递到 Crystal 报表。

我正在使用以下代码：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    If IsDate(MaskedTextBox1.Text) Then
        Dim report As New invoice4

        report.SetParameterValue(0, gCustId)
        report.SetParameterValue("CustID", gCustId)
        report.SetParameterValue("inputDate", MaskedTextBox1.Text)

        Try
            report.DataSourceConnections.Item(0).SetConnection("", "" & My.Settings.storeCS, False)
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try

        gReport = ""
        With removenotice
            .CrystalReportViewer1.ReportSource = report
            .ShowDialog()
        End With
    Else
        MsgBox("Please Enter a Valid Date")
    End If
End Sub 
```

但每次我运行它都会提示我：

Pm-?CustID 输入时会给我一个“字段不是无”

所以我尝试替换第一个ParameterValue：

report.SetParameterValue(0, gCustId) 与 report.SetParameterValue("Pm-?CustID", gCustId)

然后它给了我错误：链接参数上的操作非法。

如果我单击 OK，它仍然会提示我输入 CustID 和 inputDate，并最终给我正确的报告。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-18T19:09:22.360

您确定将其正确链接到子报告吗？我的印象是它与将参数传递给子报表有关。

您是否尝试在没有此行的情况下运行报告：report.SetParameterValue(0, gCustId)？

# visual-studio - MSVC 等效于“__builtin_return_address”

> ID：879197
> 
> 赞同：6
> 
> 时间：2009-05-18T18:48:35.100
> 
> 标签：visual-studio, visual-c++, gcc, gnu

使用 msvc，是否有等效于 gcc 的“__builtin_return_address”？

我正在寻找调用函数的地址，深度为 1 级。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-18T18:50:44.533

[__退货地址](https://docs.microsoft.com/en-us/cpp/intrinsics/returnaddress)

来自 MSDN：

> _ReturnAddress 内部函数提供调用函数中指令的地址，该函数将在控制权返回给调用者后执行

请注意，在某些平台上，由于尾部折叠，结果可能会产生误导 - 编译器可能会让您的内部函数返回 2 层深。像这样的代码通常会发生这种情况：

```
int DoSomething()
{
   return DoSomethingSpecial();
} 
```

编译器可以生成代码，以便 DoSomethingSpecial 直接返回给 DoSomething 的调用者。

此外，返回地址不够可靠，无法做出安全决定，请参见[此处](http://blogs.msdn.com/oldnewthing/archive/2004/01/01/47042.aspx)。

# objective-c - 无法运行我的应用程序；“找不到图像”指的是捆绑的框架

> ID：879206
> 
> 赞同：13
> 
> 时间：2009-05-18T18:50:04.317
> 
> 标签：objective-c, cocoa, frameworks, runtime-error

我正在尝试在我的应用程序中包含 Sparkle 框架。我不太了解必要的具体步骤，现在收到此错误消息：

```
Dyld Error Message:
Library not loaded: @loader_path/../Frameworks/Sparkle.framework/Versions/A/Sparkle
Referenced from: <..>/build/Debug/CoRay.app/Contents/MacOS/CoRay
Reason: image not found 
```

所以我的问题分为两部分： 1\. 如何解决我的问题？2\. 将框架包含到 Cocoa/Obj-C 应用程序中的正确路径是什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-05-18T18:57:26.923

错误是说它在您的应用程序包中找不到 sparkle 框架的副本。

您需要向目标添加一个新的 Copy Files 构建阶段。将其设置为“Frameworks”以复制框架并将 Sparkle.framework 的副本从您的 Xcode 项目拖到您刚刚创建的新 Copy Files 构建阶段。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2010-06-23T12:30:15.760

在“复制文件”阶段添加 Sparkle.framework 后，您必须将其从“使用库链接二进制文件”中删除。

干杯。

# python - 将 Python 对象序列化为 XML (Apple .plist)

> ID：879212
> 
> 赞同：3
> 
> 时间：2009-05-18T18:51:32.990
> 
> 标签：python, xml, plist

我需要从 XML 读取和序列化对象，尤其是 Apple 的 .plist 格式。在 Python 中最智能的方法是什么？有没有现成的解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-18T18:54:30.003

查看[plistlib](http://docs.python.org/dev/library/plistlib.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-08-11T15:45:50.743

假设您在 Mac 上，您可以使用 PyObjC。

这是一个从 plist 中读取的示例，来自[Using Python For System Administration](http://mwpdf.shownets.net:8080/MacIT%20Conference/IT831_nkersten_cadams.pdf)，幻灯片 27。

```
from Cocoa import NSDictionary

myfile = "/Library/Preferences/com.apple.SoftwareUpdate.plist"
mydict = NSDictionary.dictionaryWithContentsOfFile_(myfile)

print mydict["LastSuccessfulDate"]

# returns: 2009-08-11 08:38:01 -0600 
```

还有一个写入 plist 的例子（我写的）：

```
#!/usr/bin/env python

from Cocoa import NSDictionary, NSString

myfile = "~/test.plist"
myfile = NSString.stringByExpandingTildeInPath(myfile)

mydict = {"Nice Number" : 47, "Universal Sum" : 42}
mydict["Vector"] = (10, 20, 30)
mydict["Complex"] = [47, "i^2"]
mydict["Truth"] = True

NSDictionary.dictionaryWithDictionary_(mydict).writeToFile_atomically_(myfile, True) 
```

然后当我`defaults read ~/test`在 bash 中运行时，我得到：

```
{
    Complex =     (
        47,
        "i^2"
    );
    "Nice Number" = 47;
    Truth = 1;
    "Universal Sum" = 42;
    Vector =     (
        10,
        20,
        30
    );
} 
```

在 Property List Editor.app 中打开该文件时看起来非常漂亮。

# python - Python学习环境

> ID：879218
> 
> 赞同：3
> 
> 时间：2009-05-18T18:53:42.407
> 
> 标签：python

我希望加快 Python 的速度，是否值得通过 ActivePython 界面在本地工作，然后进入支持标准框架之一（Django 或 Pylons）或利用 Google Apps 环境的网站？我想尽可能保持互动——让反馈/学习更容易。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-18T18:57:24.037

使用 Python 解释器。参加 SO 上许多人[推荐](https://stackoverflow.com/search?q=python+tutorial)的教程之一，您就可以开始了。熟悉该语言后，请看一下 Django 之类的框架，但不要更早。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T18:55:32.090

不明白你的意思。

用于发展

第一选择：闲置——你已经拥有了。

第二选择：Komodo Edit——非常容易使用，但不如 idle 那样直接交互。

对于部署应用程序，这取决于您的应用程序。如果您正在构建桌面应用程序或 Web 应用程序，您仍然使用类似的工具。我更喜欢将 Komodo Edit 用于大型事物（桌面或 Web），因为它是一个不错的 IDE。

你在问什么？开发工具或成品的最终部署？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-18T18:56:08.410

我会从本地开始。Django 和 Pylons 为编辑/反馈循环增加了另一层复杂性。

除非您的主要重点是制作 python 网站，否则请坚持使用编辑器和控制台。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-18T18:57:41.230

我学会了使用[文档](http://docs.python.org/tutorial/)和 IDLE（带 shell）。完全理解 Python 后再去 Django。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-18T21:04:48.070

ipython 和你最喜欢的文本编辑器。花一个小时观看这些截屏视频，您很快就会感到舒适。

[http://showmedo.com/videotutorials/series?name=CnluURUTV](http://showmedo.com/videotutorials/series?name=CnluURUTV)

# svn - 使用 SVN 删除不相关的目录

> ID：879220
> 
> 赞同：1
> 
> 时间：2009-05-18T18:54:00.143
> 
> 标签：svn, tortoisesvn, repository

我有一个目录，该目录来自我检查的与我的兴趣无关的主干部分。如何使用 Tortoise SVN 从我的系统中删除此文件夹并阻止 SVN 尝试为我提供更新而不将其从存储库中删除？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T19:05:27.033

我自己还没有使用它，但是看看稀疏目录：

[http://svnbook.red-bean.com/en/1.5/svn.advanced.sparsedirs.html](http://svnbook.red-bean.com/en/1.5/svn.advanced.sparsedirs.html)

> Subversion 1.5 引入了一个称为稀疏目录（或浅签出）的功能，它允许您轻松签出工作副本或工作副本的一部分，比完全递归更浅，可以自由地引入以前忽略的文件和子目录稍后。
> 
> ...
> 
> 此时你可能会想，“那又怎样？我什么时候用这个？” 此功能找到实用程序的一种情况与特定的存储库布局相关联，特别是当您有许多相关或相互依赖的项目或软件模块作为同级存在于单个存储库位置（trunk/project1、trunk/project2、trunk/project3 等）时。 ）。**在这种情况下，您个人可能只关心其中的几个项目——可能是一些主要项目和它所依赖的一些其他模块。您可以检查所有这些东西的单个工作副本，但这些工作副本是不相交的，因此，同时对多个或全部执行操作可能很麻烦。另一种方法是使用稀疏目录功能，构建一个仅包含您关心的模块的工作副本。**您将从项目的公共父目录的空深度签出开始，然后仅以无限深度更新您希望拥有的项目，就像我们在前面的示例中演示的那样。可以将其视为工作副本公民的选择加入系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T18:58:42.333

据我所知，退房时不可能有选择地忽略条目。当你查看一个 SVN URL 时，你会得到它下面的所有内容。

因此，如果您的项目具有以下结构：

```
\trunk\Dir1
\trunk\Dir2
\trunk\Dir3 
```

您可以获取所有 \trunk，也可以将每个 Dir1、Dir2 或 Dir3 单独检出到它们自己的工作目录中。不支持尝试检查中继但不包括 Dir2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T19:02:15.073

如果你检查后备箱，你会得到一切。如果它是您的回购，请根据项目/兴趣进行组织。如果您无法在一年内弄清楚它是什么，那么备份它并对其进行版本控制有什么意义？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T19:11:25.540

你有几个选择：

1.  只需删除文件夹，永远不要更新根目录，只更新已删除文件夹附近的子目录。

2.  在根目录上设置 svn:ignore 属性以忽略不需要的文件夹，并且永远不要提交根目录。

3.  您可以设置 tortoiseSvn 以检查根目录下的特定级别。如果您的问题在于不需要的目录中的大文件，那么您可以仅使用子级（一级）签出 root，然后在不需要的目录之外的所有目录上使用 switch 命令来签出它们下的所有级别，以节省不需要的空间目录 您仍然会看到一个空的不需要的目录。

# windows - 有没有办法在 Perl 脚本中使用 move 函数来获取文件传输的进度？

> ID：879233
> 
> 赞同：3
> 
> 时间：2009-05-18T18:57:04.960
> 
> 标签：windows, perl, command-line, progress, file-transfer

我是一名 ETL 开发人员，我需要处理大量数据，这些数据需要从一种形式处理到另一种形式，然后才能加载到表中。因此，在某些时候，我使用的大多数脚本都必须将文件从一个地方移动到另一个地方。我们是一家橱窗店。我想知道当我在 Perl 中使用 move 函数时，是否有办法查看移动需要多少时间。如果我需要通过系统调用一个 Windows 命令来给我这个选项，那么我也可以使用它。Perl 或 windows 命令行中是否有任何内容可以告诉我文件传输的进度？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-18T19:04:43.897

您可以使用 cpan 中的[Win32::FileOp](http://search.cpan.org/~jenda/Win32-FileOp-0.14.1/FileOp.pm)包。

这是一个相关的摘录：

> **复制确认**
> 
> ```
>  CopyConfirm ($FileName => $FileOrDirectoryName [, ...])
>  CopyConfirm (\@FileNames => $DirectoryName [, ...] )
>  CopyConfirm (\@FileNames => \@FileOrDirectoryNames [, ...]) 
> ```
> 
> 复制指定的文件。如果发生碰撞，显示确认对话框。显示进度对话框。
> 
> 如果成功则返回真。
> 
> **移动确认**
> 
> 移动指定的文件。参数为 CopyConfirm

命令行替代方案是[Term::ProgressBar](http://search.cpan.org/~fluffy/Term-ProgressBar-2.09/lib/Term/ProgressBar.pm)，它也更加灵活，但设置起来有些困难。您必须执行以下操作：获取原始文件的大小，然后开始复制并轮询新文件的大小（来自子进程）以更新进度条。

# apache - 在 Apache 中混合使用 RewriteRule 和 ProxyPass

> ID：879241
> 
> 赞同：5
> 
> 时间：2009-05-18T18:58:06.643
> 
> 标签：apache, mod-rewrite, apache2, load-balancing, mod-proxy

我今天正在调试一个与混合`mod_proxy`和`mod_rewrite`一起相关的问题，我最终不得不使用`balancer://mycluster`in`RewriteRule`以停止从 Apache 接收 404 错误。我有两个问题：

1）有没有其他方法可以让重写的 URL 通过平衡器而不添加`balancer://mycluster`到`RewriteRule`？

2) 有没有办法在 or 中定义我在`ProxyPass`(stickysession=JSESSIONID|jsessionid scolonpathdelim=On lbmethod=bytraffic nofailover=Off) 中定义的所有参数`<Proxy>`？`RewriteRule`我担心与新请求匹配的请求不会以与通过的请求`RewriteRule`相同的方式进行负载平衡`ProxyPass`（例如`/app1/something.do`）？

以下是 httpd.conf 的相关部分。我正在使用 Apache 2.2。

```
<Proxy balancer://mycluster>
    Order deny,allow
    Allow from all

    BalancerMember ajp://my.domain.com:8009 route=node1
    BalancerMember ajp://my.domain.com:8009 route=node2
</Proxy>

ProxyPass /app1 balancer://mycluster/app1 stickysession=JSESSIONID|jsessionid scolonpathdelim=On lbmethod=bytraffic nofailover=Off
ProxyPassReverse /app1 ajp://my.domain.com:8009/app1 
```

...

```
RewriteRule ^/static/cms/image/(.*)\.(.*) balancer://mycluster/app1/$1.$2 [P,L] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T19:31:00.117

看起来我可以使用[ProxySet](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxyset)指令，以便以相同方式匹配 RewriteRule 负载平衡的 URL。

```
<Proxy balancer://mycluster>
    Order deny,allow
    Allow from all

    BalancerMember ajp://my.domain.com:8009 route=node1
    BalancerMember ajp://my.domain.com:8009 route=node2

    ProxySet stickysession=JSESSIONID|jsessionid scolonpathdelim=On lbmethod=bytraffic nofailover=Off
</Proxy> 
```

# c# - 如何使用 VS 2008 调试器获取所有堆栈跟踪

> ID：879248
> 
> 赞同：2
> 
> 时间：2009-05-18T19:01:15.090
> 
> 标签：c#, visual-studio-2008, debugging, stack-trace

我正在尝试使用 VS 2008 调试器帮助调试挂起。如果我在“线程”窗格中双击一个线程，我可以在“调用堆栈”窗格中看到该线程的跟踪。

我的问题是：有没有办法一次性获取所有线程的所有调用堆栈，而不必单独选择每个线程？我想将所有线程的跟踪通过电子邮件发送给将要进行调查的开发人员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T19:13:32.727

对于应用程序的开发人员来说，比文本堆栈跟踪更有用的是使用 Debug | 保存小型转储。将转储另存为（在 Visual Studio 中）并发送它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T19:50:51.257

...虽然我找到了在 VS 之外执行此操作的更简单方法。

[托管堆栈资源管理器](http://blogs.msdn.com/tess/archive/2009/05/08/neat-net-2-0-stackviewer-to-troubleshoot-hangs-performance-issues.aspx)正是我想要的。它是一个免费且轻量级的 exe，可连接到正在运行的应用程序，并且可以在一个地方为您提供所有堆栈跟踪的转储。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T19:10:34.713

使用 Visual Studio 没有很好的方法来做到这一点。

如果您能够使用 WinDbg，则可以使用以下命令获取所有线程的堆栈跟踪。

```
~* kn 500 
```

# algorithm - 如何在算法的块表示中描绘“for”循环

> ID：879250
> 
> 赞同：31
> 
> 时间：2009-05-18T19:01:48.600
> 
> 标签：algorithm

我有探测/奇怪的问题，我得到了几个“for”循环的算法，现在我需要做这个算法的块方案。

我知道如何描绘“while”循环，但是使用“while”来表示“for”循环是否可以接受，并且此时在源代码和算法之间有所不同？当然，假设所有“for”循环都正确并使用任何其他类型的循环会产生不必要的代码，而我避免使用“for”循环。

我猜想简单地描绘“for”循环是不可能的（至少我无法想象），但也许有一种方法（如果存在）。

提前致谢

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2009-05-18T19:07:40.430

这是一个说明 for 循环的流程图：

![循环流程图](https://i.stack.imgur.com/dr2hY.png)

等效的 C 代码将是

```
for(i = 2; i <= 6; i = i + 2) {
    printf("%d\t", i + 1);
} 
```

[我在Tenouk 的 C 实验室练习工作表](http://www.tenouk.com/clabworksheet/labworksheet7_1.html)之一上找到了这个和其他几个例子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-18T19:07:15.827

什么是“块方案”？

如果我在画它，我可能会画一个盒子，里面写着“for each *x* in *y ”。*

如果您正在绘制流程图，那么总会有一个带有决策框的循环。

Nassi-Schneiderman 图有一个可以使用的[循环结构。](http://en.wikipedia.org/wiki/File:Test_First.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-26T07:38:32.837

**给定流程图的算法：**

[![在此处输入图像描述](https://i.stack.imgur.com/ZTRtY.png)](https://i.stack.imgur.com/ZTRtY.png)

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

***步骤：01***

*   开始

***Step :02*** [变量初始化]

*   设置计数器： ***i<----K*** [其中**K**：正数]

***Step :03*** [条件检查]

*   如果条件为真，则执行您的任务，设置**i=i+N**并转到步骤：03 [其中**N**：正数]
*   如果条件为假，则转到步骤：04

***步骤：04***

*   停止

# jquery - 无法让 jquery 输出我的 json 对象

> ID：879252
> 
> 赞同：1
> 
> 时间：2009-05-18T19:01:59.940
> 
> 标签：jquery, json

我的页面中有以下代码。我期待从 person_output.aspx 页面返回一系列 json 对象，它确实成功了。但是，在输出内容时，我收到一个错误。

```
 $.getJSON("ajax/person_output.aspx", { 'uID': 1 }, function(data) {
            $.each(data.items, function(i, item) {
            $("<span/>").html(item.first_name).appendTo("#content");
                });
            }); 
```

ajax/person_output.aspx 生成以下 json （这仅用于一条记录..）

```
{
    "l_id": "49",
    "u_id": "1",
    "first_name": "john",
    "last_name": "doe",
    "title" : "General Manager",
    "color" : "333"
} 
```

firebug 产生以下错误；

```
G is undefined
init()()jquery-1....2.min.js (line 12)
(?)()()URLINX5 (line 99)
I()jquery-1....2.min.js (line 19)
F()()jquery-1....2.min.js (line 19)
[Break on this error] (function(){var l=this,g,y=l.jQuery,p=l.....each(function(){o.dequeue(this,E)})}}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T19:04:36.537

JSON 结果中的颜色属性后面有一个逗号，删除它有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T19:18:09.737

我是萤火虫的新手，但您需要弄清楚这里未定义的内容

```
 $.getJSON("ajax/person_output.aspx", { 'uID': 1 }, function(data) {
            $.each(data.items, function(i, item) {
            $("").html(item.first_name).appendTo("#content");
                });
            }); 
```

它可以是 data、data.items、item 或 item.first_name。如果您要返回一个数组，您不需要执行 data.items[i] 之类的操作，而不是 item.first_name 吗？您现在设置它的方式，“项目”可能是 0,1,2,3...n

# asp.net - 更改中继器内的 WebControl 属性

> ID：879255
> 
> 赞同：0
> 
> 时间：2009-05-18T19:03:05.727
> 
> 标签：asp.net

我有一个转发器控件，其中包含一个 ItemTemplate 包含一个数据绑定标签和一个 DropDownList 控件。对于每次迭代，我想在每次迭代时更改 DropDownList 的 ID，以便在提交时使用这些值作为输入。谁能告诉我这通常是怎么做的？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T19:06:20.043

这是自动为您完成的，有关其工作原理的详细信息，请参阅[使用 NamingContainer 属性确定控件的命名容器](http://msdn.microsoft.com/en-us/library/txxbk90b.aspx)。

我想这可能不是你正在寻找的东西。为了从下拉列表中获取值，您应该遍历转发器中的项目并使用 FindControl 方法根据您指定的 ID 查找下拉列表。

```
foreach(RepeaterItem item in repeater1.Items) {
    DropDownList dropdown = (DropDownList)item.FindControl("DropDownList1")
    //dropdown.SelectedValue
} 
```

编辑：根据您的评论，我不会将下拉列表重命名为您数据库中的 ID。相反，您应该在中继器中放置一个隐藏的文字控件。将其值设置为数据库记录的 ID。然后以与获取下拉列表的值相同的方式获取 ID。

```
(Literal)item.FindControl("ListeralWithDataBaseId") 
```

您的 aspx 标记将如下所示

```
<asp:Literal runat="server" id="ListeralWithDataBaseId" 
     Value='<%# Eval("Id")' %> Visible="false" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T22:11:10.323

我发现将 PlaceHolder 放在 Repeater 中，然后在设计时创建 DropDownList 控件，而不是尝试在设计时创建一个并在迭代时更改 ID 是最简单的。

# http - 对返回给浏览器的“请求实体太大”（HTTP 413）错误消息进行故障排除

> ID：879263
> 
> 赞同：5
> 
> 时间：2009-05-18T19:06:18.887
> 
> 标签：http, cookies, proxy

我们的 Web 应用程序的用户偶尔会遇到以下错误消息：

```
Request Entity Too Large
The requested resource
/ourapp/ourlocation/
does not allow request data with GET requests, or the amount of data provided in the request exceeds the capacity limit. 
```

我们检查了我们的日志，但我们找不到任何似乎与上述错误相关的条目。经过一番研究，我认为问题在于请求的某些方面对于某些代理服务器来说太大了，并且代理正在将 413 错误返回给用户的 Web 浏览器。（不过，这只是一个猜测。）

**您对找出导致此错误的原因有什么想法吗？**到目前为止，我已经使用[Charles Web Debugging Proxy](http://www.charlesproxy.com/)和[LiveHTTPHeaders](http://livehttpheaders.mozdev.org/)来尝试观察对给定页面的每个请求使用了多少字节。

以下是一些可能有助于我进行故障排除的其他问题。

1.  允许的最大 cookie 大小是多少？4096 字节？
2.  GET 请求的哪些部分计入错误消息中引用的容量限制？
3.  GET 请求的最大大小是多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-11-28T11:33:35.783

对于充当反向代理的 nginx，我必须添加：

* * *

```
 proxy_set_header  Destination   $dest;
    client_max_body_size       1000m; #100m shoul'd do fine too
    client_body_buffer_size    128k;

    proxy_connect_timeout      90;
    proxy_send_timeout         90;
    proxy_read_timeout         90;

    proxy_buffer_size          4k;
    proxy_buffers              4 32k;
    proxy_busy_buffers_size    64k;
    proxy_temp_file_write_size 64k; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-18T19:30:02.193

如果它是返回错误的代理服务器，那么我希望会有另一个响应标头在某处具有代理的名称。也许是“X-Via”或“Server”标头？

对于您的问题... 1 和 3 取决于代理服务器。2：我想请求中的每个字节都会计入限制。

为了测试这一点，我将创建一个控制台应用程序，该应用程序将继续发送更大和更大的“GET”请求，直到它收到 413 回复。然后你可以让这些用户之一运行它，看看它是否可重现。

# asp.net-mvc - 如何向 MVC 的 HTML Helpers 生成的 HTML 元素添加类属性？

> ID：879266
> 
> 赞同：189
> 
> 时间：2009-05-18T19:06:46.610
> 
> 标签：asp.net-mvc, razor, html-helper

ASP.NET MVC 可以使用 HTML Helpers 生成 HTML 元素，例如`@Html.ActionLink()`，`@Html.BeginForm()`等等。

我知道我可以通过创建一个[匿名对象](http://msdn.microsoft.com/en-us/library/vstudio/bb397696.aspx)来指定表单属性并将该对象传递给（在这种情况下为第四个）参数，其中为元素`htmlAttributes`指定一个：`id`

```
Html.BeginForm("Foo", "Bar", FormMethod.Post, new { id = "MyForm"}) 
```

但是`class`属性呢？显然这不起作用：

```
Html.BeginForm("Foo", "Bar", FormMethod.Post, new { class = "myclass"}) 
```

因为当我的视图被请求时，它只会引发随机语法错误，因为它在遇到 C# 关键字后会期待其他东西`class`。

我也试过：

```
new { _class = "myclass"} 
```

和

```
new { class_ = "myclass"} 
```

但它们也不起作用，因为[下划线被 dashes 取代](https://stackoverflow.com/questions/4108943/actionlink-htmlattributes)。

我知道我也可以手动编写 HTML 元素或将表单包装在 a`<div class="myClass">`中，但我仍然有兴趣知道它应该如何完成。

* * *

## 回答 #1

> 赞同：351
> 
> 时间：2009-05-18T19:09:36.993

为了在 C# 中创建具有[保留关键字](http://msdn.microsoft.com/en-us/library/x53a06bb(v=vs.110).aspx)作为其名称的属性的匿名类型（或任何类型），您可以在属性名称前加上 at 符号`@`：

```
Html.BeginForm("Foo", "Bar", FormMethod.Post, new { @class = "myclass"}) 
```

对于 VB.NET [，此语法将](https://stackoverflow.com/questions/1444495/how-do-i-apply-a-css-class-to-html-actionlink-in-asp-net-mvc)使用点来完成`.`，在该语言中，它是[*所有*匿名类型](http://msdn.microsoft.com/en-us/library/vstudio/bb384767.aspx)的默认语法：

```
Html.BeginForm("Foo", "Bar", FormMethod.Post, new with { .class = "myclass" }) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-23T09:52:44.667

当前 CSS 开发的最佳实践是创建更通用的选择器，其修饰符可以在整个网站上尽可能广泛地应用。我会尽量避免为单个页面元素定义单独的样式。

如果元素上的 CSS 类的目的`<form/>`是控制表单内元素的样式，则可以在`<fieldset/>`ASP.NET MVC 生成的网页中默认封装任何表单的现有元素添加 class 属性。很少需要表单上的 CSS 类。

# ruby-on-rails - 使用思考狮身人面像的浮点字段搜索和排序

> ID：879267
> 
> 赞同：1
> 
> 时间：2009-05-18T19:06:51.507
> 
> 标签：ruby-on-rails, sphinx

我正在使用thinking sphinx 在rails 应用程序上进行搜索。我有一个名为“高度”的浮点字段。我需要能够在该字段中搜索确切的值（即正好是 6.0，而不是 6.5）。我还需要能够在现场进行排序。

到目前为止我所拥有的：

```
indexes height, :sortable => true 
```

问题：排序不正确，如果我搜索“6”，则返回 6.0 和 6.5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T23:37:17.310

如果您正在处理浮点值，最好将它们作为属性而不是字段：

```
define_index do
  # ... other fields

  has height
end 
```

默认情况下，属性是可排序的（实际上，如果您将 :sortable 添加到字段，它所做的只是在 Thinking Sphinx 的引擎盖下创建一个属性），因此这应该允许您进行排序。

当然，这不允许您*搜索*高度，因此您还需要一个字段：

```
define_index do
  # ... other fields
  indexes height, :as => :height_field

  has height
end 
```

我给该字段起了一个别名，因为您不能将字段和属性命名为相同的东西。

鉴于所有这些，您正在搜索浮点数，对于 Sphinx，所有字段都是字符串。它将 6.5 读取为两个单词 - 6 和 5，由句号/句点分隔。因此，不幸的是，我不希望这方面的事情能优雅地解决。

# apache-flex - 从 Flex 中的 Textarea 中获取最长的字符串（以换行符结尾）

> ID：879275
> 
> 赞同：0
> 
> 时间：2009-05-18T19:08:15.373
> 
> 标签：apache-flex, actionscript-3, string, split, textarea

这个有点简单的任务并不是那么简单。我可以使用 mx:internals 获取 textarea 的行数，但这并不总是以换行符结尾的最长行。

我尝试了各种`textArea.text.split("\n") \r <br/> {/n ..` 它总是返回 1 的长度。

我永远崇拜任何能把我引向正确方向的人。

格雷格

==========

```
var arr:Array = texCodeArea.text.split(/\n/);
trace(arr.length);
trace("TEXT iS :", texCodeArea.text, "END"); 
```

==========

```
1
TEXT iS : aaaaaaaaaaaaaaaaaaaaaaa
bbbbbbbbbbbbbb 
cccccc END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T19:47:35.357

使用 /\r/ 而不是 /\n/。

不知道为什么；它就是这样工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T19:23:38.027

尝试：

```
textArea.text.split(/\n/); 
```

反而。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-20T13:22:55.560

s.split(/\r\n/);

# c# - 如何配置 Unity 以创建一个包含两个相同类型的不同项目的类？

> ID：879279
> 
> 赞同：0
> 
> 时间：2009-05-18T19:09:42.937
> 
> 标签：c#, unity-container

我仍然开始使用 Unity，并且有一个似乎很简单的问题。

我有一个类依赖于同一接口的两个不同实例。如何配置和解决这个类？

IE 给定：

```
public interface ILogger
{
    void Write(string message);
}
public class ConsoleLogger : ILogger
{
    public void Write(string message) 
    {
        Console.WriteLine(message);
    }
}
public class AnotherLogger : ILogger
{
    public void Write(string message)
    {
        Console.WriteLine(DateTime.Now.ToString() + " " + message);
    }
}
public class CombinedLogger : ILogger
{
    IList<ILogger> _loggers;
    public CombinedLogger(params ILogger[] loggers)
    {
         _loggers = new List<ILogger>(loggers);
    }
    public void Write(string message)
    {
         foreach(var logger in _loggers) logger.Write(message);
    }
} 
```

我知道如何配置 ConsoleLogger 和 AnotherLogger。我也知道如何在实际代码中访问它们。我似乎在阻止的是弄清楚如何配置和使用 CombinedLogger，传入 ConsoleLogger 和 AnotherLogger 的实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T19:20:40.153

```
IUnityContainer container = new UnityContainer();
container.RegisterType<ILogger, ConsoleLogger>();
container.RegisterType<ILogger, AnotherLogger>("another");
container.RegisterType<ILogger, CombinedLogger>("combined");
var instances = container.ResolveAll<ILogger>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T19:21:56.330

您使用命名注册。

myContainer.RegisterType("ConsoleLogger"); myContainer.RegisterType("AnotherLogger"); myContainer.RegisterType("CombinedLogger");

然后当您解析类型时，您使用名称来获取特定的

```
public class CombinedLogger : ILogger{    
IList<ILogger> _loggers;    
public CombinedLogger(params ILogger[] loggers)    
{         
_loggers = new List<ILogger>();    
_loggers.Add(myContainer.Resolve(Of ILogger)("ConsoleLogger")
_loggers.Add(myContainer.Resolve(Of ILogger)("AnotherLogger")
}    
public void Write(string message)    
{         
foreach(var logger in _loggers) logger.Write(message);    
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T20:13:50.890

阅读有关[阵列配置支持](http://msdn.microsoft.com/en-us/library/dd203195.aspx)的文档。

# c# - 如何在 C# 中将 HP LaserJet 5 生成的 PCL 转换为 PDF？

> ID：879286
> 
> 赞同：-1
> 
> 时间：2009-05-18T19:11:13.637
> 
> 标签：c#, pdf, printing, printer-control-language

我需要淘汰 15 岁的系统并保留所有数据。它只能将文档打印到特定的打印机 HP LaserJet 5。我可以将文档打印到 PCL 文件中，并寻找以编程方式将所有这些文件转换为 PDF 的方法。最好在 C# 中。有人可以推荐好的库或命令行工具吗？最好是免费的;-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-06-06T12:37:42.390

命令行工具[GhostPCL](http://www.ghostscript.com/GhostPCL/)（GhostPDL 的一部分）由与 Ghostscript 相同的开发人员开发，可以将 PCL 转换为 PDF。他们公共[源代码存储库](http://svn.ghostscript.com/)的最新更改提供了一个完全集成的源代码树，包括 Ghostscript、GhostPCL 和 GhostXPS。这包括用于构建其全部或部分产品的 MS Visual Studio *.sln 和 *.vcproj 文件。许可证是 GPL 或商业许可证（从[Artifex](http://www.artifex.com/)获得商业许可证）：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T20:13:56.957

我找到的最简单的解决方案是[VeryPDF PCL Converter](http://www.verypdf.com/pcltools/index.html) [http://www.verypdf.com/pcltools/index.html](http://www.verypdf.com/pcltools/index.html)。它具有命令行模式、GUI（用于命令行）、批处理模式，只需 125 美元。我的公司已经为此付出了代价。希望这也会对某人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T17:04:34.027

我在几个项目中使用了[Visual Softwares pcl2pdf](http://www.visual.co.uk/)，它对我来说效果很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-09T14:02:25.500

我们目前正在使用林肯的 PCL 到 PDF 转换器。它很容易调用并提供嵌入到我们的 C# 应用程序中。它还可以在页面转换时提供良好的事件反馈等，因此您甚至可以添加进度条等。

[林肯 PCL 到 PDF 转换器](http://www.lincolnco.com/products/pclpdfconverter.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T11:09:49.817

我已经为基于 GhostPCL[的 Windows 和 OS X 使用 PCL 到 PDF 。](http://www.columbia.edu/~em36/pcltopdf.html)

# wpf - 查看状态和触发器

> ID：879289
> 
> 赞同：0
> 
> 时间：2009-05-18T19:11:57.707
> 
> 标签：wpf, silverlight

有谁知道下一版本的 WPF 中是否可以使用视图状态（在 Silverlight 中使用）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T19:24:22.003

上次我听说，WPF 将在即将发布的版本中实现 Visual States（使用 VisualStateManager）。

如果您在此之前迫切需要一些东西，请查看 WPF 工具包。它内置了 VisualStateManager（减去一些功能，这是预期的，因为它是带外开发的）。

[WPF 工具包（通过 Codeplex）](http://wpf.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=25047)

# f# - F# 如果为真则打印

> ID：879290
> 
> 赞同：3
> 
> 时间：2009-05-18T19:12:11.480
> 
> 标签：f#, functional-programming

我试图仅在它为真时打印函数的输出，但到目前为止所有尝试都没有成功。

类似的东西：

```
let printFactor a b =  if b then print_any((a,b)) 
```

where`b`是一个布尔值，`a`是一个整数。当我尝试它时，我得到：

```
val printFactor : 'a -> bool -> unit 
```

有什么建议么？

编辑：

为了把事情放在上下文中，我试图将它与管道运算符一起使用。假设我有一个`xyz`输出（int，bool）列表的函数。我想在这些方面做点什么：

```
xyz |> printFactor 
```

仅打印真实值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-18T19:41:25.133

你可以这样做

```
let xyz() = [ (1,true); (2,false) ]

let printFactor (i,b) = 
    if b then
        printfn "%A" i

xyz() |> List.iter printFactor 
```

但这样做可能会更惯用，例如这个

```
xyz() 
|> List.filter (fun (i,b) -> b) 
|> List.iter (fun (i,b) -> printfn "%d" i) 
```

即先过滤，再打印。

# php - EC2 上的内存缓存

> ID：879293
> 
> 赞同：7
> 
> 时间：2009-05-18T19:12:29.437
> 
> 标签：php, memcached, amazon-ec2, load-balancing

我是否认为在我能够负担得起专用服务器或拥有任何备用服务器之前，我可以通过 EC2 成功运行少量 memcached 服务器？

随着亚马逊今天宣布新的自动扩展和负载平衡，你们认为这将是一个可行的选择吗？

您建议我采取的基本技术步骤是什么？

谢谢

目前，我有一台专用服务器，没有 memcached 服务器。我想使用 EC2 的强大功能来设置一些实例并运行这样的 memcached 服务器。这是我目前的设置。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-19T14:27:26.580

*   负载均衡与 Memcached 无关——它使用哈希算法连接服务器
*   我强烈建议不要对 Memcached 使用自动缩放——添加服务器会破坏散列算法并使缓存无效。数据将丢失，您将不得不重新缓存。
*   您需要检查从服务器到 EC2 的延迟——如果超过 50 毫秒，您将严重影响性能。好吧，无论如何我都会假设。

您可以通过一个请求拉出多个键（请参阅[此处了解如何](http://ca3.php.net/manual/en/memcached.getmulti.php)）以减少延迟效应，但您仍然会受到最初的打击。这也意味着您需要在拨打电话之前知道您将获得的所有密钥。否则，每个请求都会为脚本的执行时间增加 50 毫秒（或更多）。

考虑您尝试缓存的数据。64mb 的平板是否足以帮助您？您可能可以在主服务器上运行它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-18T20:16:53.427

要真正利用 memcached，您需要让 memcache 尽快与您的代码通信。您可能想要调查 EC2 服务器与您自己的服务器之间的延迟时间。

最终，您最好将当前机器上的 ram 提高到 4 gigs（应该花费您大约 50 美元）并将 memcached 放在主服务器上。该文档实际上建议您将 memcached 安装在提供请求的同一台服务器上。根据您的应用程序的大小和它的作用，一个或两个 gig 的 memcached 实例可能比您需要的要多得多。

此外，如果您没有使用像 APC 或 Eaccelerator 这样的 php 对象缓存引擎，那也会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-10-07T09:29:39.620

最近 AWS 发布了一项新的 Web 服务 - Amazon ElasticCache。此服务符合 Memcached 的协议。

有关更多详细信息，请参阅：[http ://aws.amazon.com/elasticache/](http://aws.amazon.com/elasticache/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T19:42:22.387

您当前的盒子通常有多少可用内存？你不能在那里设置一个 memcached 实例吗？我认为这可能是延迟/开销/等。拥有远程缓存会使您否定任何好处，但也许事实并非如此。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-08-04T05:15:51.463

更笼统地说：如果您想使用任何类型的缓存机制，让您的服务器非常靠近您的缓存服务器是有意义的。示例：数据库服务器和 Memcached 服务器，它们应该在同一个托管位置，或者同一个 AWS“区域”。如果你尝试使用缓存系统，是因为你想提高性能。如果您将缓存系统远离您的服务器，那么您基本上是在浪费所有的好处。

最好的，

# xslt - 无效 html 输入上的 XSLT 和 XQuery，URI 片段看起来像实体

> ID：879294
> 
> 赞同：0
> 
> 时间：2009-05-18T19:12:34.710
> 
> 标签：xslt, input, entity, xquery

我正在使用 Saxon 9 来分析无效的 html 源。具体来说，html 的 href 值如下：

<a href="blah.asp?fn=view&g_varID=1234">一些文字</a>

我收到错误：

“XML 解析器报告的错误：对实体“g_varID”的引用必须以 ';' 结尾 分隔符。”

xml 解析器正在读取“&g_varID”字符串并抱怨应该有一个“;” 来界定实体。但是，当然，这并不是一个 HTML 实体——它只是一个 URI 的一部分。

我如何告诉解析器忽略它？注意：我使用的是非模式感知 Saxon，而不是 Saxon-SA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T19:15:13.470

如果您的 HTML 不是 XML，那么您希望任何 XML 处理器如何处理它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T19:25:10.487

确保您有正确的 xhtml DOCTYPE。根据我正在查看的 xhtml1-strict.dtd，href 属性声明为 CDATA，而不是 PCDATA，这意味着文字 & 完全可以，不应将其解析为实体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T21:34:51.440

如上所述，这不是有效的 XML，它是 HTML。但是，这个特殊问题是 HTML tidy 默认清理的问题：http: [//www.w3.org/People/Raggett/tidy/](http://www.w3.org/People/Raggett/tidy/)。将它与以下命令行参数一起使用以将 HTML 转换为 XHTML：

```
tidy -asxhtml foo.html > foo.xhtml 
```

然后您应该能够通过您的 XSLT 运行它。

# regex - 为什么这个遗留代码在调用 open() 时在文件名上使用 cat？

> ID：879299
> 
> 赞同：1
> 
> 时间：2009-05-18T19:13:47.717
> 
> 标签：regex, perl, file-io

我在遗留 Perl 应用程序中遇到了一行非常奇怪的代码。这里的代码是本地 RSS 阅读器的一部分，它会进行一些缓存以防止被列入黑名单。

```
open(CAT, "/usr/bin/cat -v /tmp/cat-cache 2>&1|"); 
```

原作者是否有可能通过结果`cat -v`来去除非打印字符以处理任意数量的字符集？在 Perl 本身中使用正则表达式不是更有意义吗？另外，我对最后的管道感到最困惑。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-18T19:23:04.500

看起来“cat -v”显示了文件中的所有非打印字符，因此您可以实际看到 CRLF、TAB 等。

管道是 Perl 向**打开**命令识别这不是一个简单文件的方式，它正在打开该命令的管道输出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-18T22:17:47.863

## 功能上

该代码将执行类似于此的操作：

```
open my $fh, '<' , '/tmp/cat-cache' or Carp::croak("Cant open file $@ $! ");

sub lessquote {
    my $x  = shift;
    my $meta = shift; # meta means were repeating thise code for >128
    # Special Case for whitespace 
    if(( not defined $meta ) && ( $x  == 9 or $x == 10 ) ){
        return chr($x);
    }
    # Null and M-^@
    if(  $x  == 0 ){ 
        return "^@"; 
    }
    # ^A to ^Z as well as M-^A to M-^Z
    if( ( 0 <= $x ) && ( $x  <= 31 )){
        return "^" . chr( $x + ord('A') - 1 );
    }
    # Also M-^?
    if( $x == 127 ){ 
        return "^?";
    } 
    # Does the M- Family
    if( $x >= 128 && $x <= 255 ){ 
        return "M-" . lessquote( $x - 128 , 1); 
    }
    return chr( $x );
}

while( my $line = <$fh> ){
   $line =~ s{(.)}{ lessquote( ord( $1 ) ) }eg;
} 
```

不完全相同，但相似。

**注意：lessquote 似乎与我的“cat -v”输出相匹配。**

但是正如你所看到的，做同样的事情有点不简单，也不直接适合正则表达式，但是，我仍然不明白他们为什么要炮轰“猫”。

## 就他们的风格而言

他们以一种糟糕的方式进行炮轰，代码风格是如此 1990 年代，应该避免。

```
open my $fh , '-|' , 'cat' , '-v' , '/tmp/cat-cache' or Carp::croak("Cant open file $@ $! "); 
```

句法：

```
打开我的 $FILEHANDLE , $OPENMODE, $FILENAME || 鲤鱼::呱呱($ERRORMESSAGE)
打开我的 $FILEHANDLE , $OPENMODE, $SHELLCOMMAND || 鲤鱼::呱呱($ERRORMESSAGE)
打开我的 $FILEHANDLE , $OPENMODE, $SHELLPROGRAM, @ARGS || 鲤鱼::呱呱($ERRORMESSAGE)

```

由于多种原因，这些天是“首选”符号。当然，您实际上不会想要使用*cat*，但我将它留在这里作为一个清晰的示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-18T20:00:45.220

你不妨看看[perl 开放教程](http://perldoc.perl.org/perlopentut.html)。

基本上，传递给 open 的“文件名”末尾的管道会导致执行名为文件的程序，并将输出馈送到 perl。同样，您可以在“文件名”的开头使用管道将输出通过管道输出到外部程序。

在 perl 程序本身内部执行此操作可能更有意义，但引用的代码更符合[Perl 程序员的三个主要优点中的](http://c2.com/cgi/wiki?LazinessImpatienceHubris)两个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T22:01:56.927

原作者在某些时候感到困惑或有一只 setuid 猫 :)

对“cat -v”的作用有些困惑......

```
 -v, --show-nonprinting
              use ^ and M- notation, except for LFD and TAB 
```

...它不像“字符串”（字符串 - 打印文件中可打印字符的字符串）...

```
$ strings /bin/rm | head
/lib/ld-linux.so.2
e="?
__gmon_start__
libc.so.6
_IO_stdin_used
fflush
setlocale
mbrtowc
strncmp
optind 
```

# c# - 如何使用 LINQ 编写 ContainsAll 查询？（C# LINQ-TO-SQL）

> ID：879302
> 
> 赞同：2
> 
> 时间：2009-05-18T19:15:06.357
> 
> 标签：c#, .net, linq-to-sql

假设我有以下

```
var mustHave = new int [] { 1, 2 } 
```

和一个名为 db.Numbers 的表

```
public class Number
{
     public int id;
     public int number;
} 
```

充满

```
Numbers.add(new Number(){id=8,number=1});
Numbers.add(new Number(){id=8,number=2});
Numbers.add(new Number(){id=8,number=3});
Numbers.add(new Number(){id=9,number=1});
Numbers.add(new Number(){id=9,number=3}); 
```

我想获取与 mustHave 变量中的**所有数字相关联的所有 id。**例如，查询必须返回 id=8 而不是 id=9。实际情况要复杂得多，并且使用 Linq-To-Sql 对数据库进行查询。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2009-05-18T19:27:48.453

好吧，如果你在 LINQtoSQL 中使用 DataContext 做某事，试试这个：

```
var mustHave = new int [] { 1, 2 };
var items = 
  from x in DataContext.SomeTable
  where mustHave.Contains(x.SomeProperty)
  select x; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-18T19:25:11.720

尝试这个：

```
var numbers = Numbers.FindAll(n=>n.id=8);
var mustHave= new int[numbers.Count][2];
int counter = 0;`
foreach(var number in numbers)
{
    mustHave[counter][0]=number.id;
    mustHave[counter][1]=number.number;
    counter++;
 } 
```

# .net - ASP.NET 时间线控件

> ID：879308
> 
> 赞同：1
> 
> 时间：2009-05-18T19:17:06.743
> 
> 标签：.net, asp.net, controls, servercontrols, timeline

我正在寻找一个免费控件来按比例时间线显示事件。

我无法让[TimeLine.NET](http://timelinenet.codeplex.com/)工作。

还有什么我可以尝试的吗？

### 编辑

只要我可以从数据库中将数据放入其中，任何 flash 或 javascript 解决方案都可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T18:01:43.577

OP 请求了一个不改变 y 轴值的时间轴，因此您可以使用 google 的标准时间轴，而不是使用前面提到的带注释的时间轴：

[https://developers.google.com/chart/interactive/docs/gallery/timeline](https://developers.google.com/chart/interactive/docs/gallery/timeline)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T19:49:47.177

不确定这是否是您要查找的内容，但我使用谷歌[注释的时间线](http://code.google.com/apis/visualization/documentation/gallery/annotatedtimeline.html)来显示类似的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-19T16:33:22.647

使用 DayPilot 怎么样？

[http://www.daypilot.org/demo/Lite/SchedulerMonth.aspx](http://www.daypilot.org/demo/Lite/SchedulerMonth.aspx)

如果你不需要垂直轴上的多个资源，你可以把所有的东西都塞进一行，它会自动排列。

# java - 如何将对象从休眠状态中拉出并进入内存。我遇到了会话问题

> ID：879309
> 
> 赞同：0
> 
> 时间：2009-05-18T19:17:13.263
> 
> 标签：java, hibernate, session, lazy-loading, in-memory

我有一个相当庞大的项目，我正在尝试改进内存中的数据。本质上，我有一大堆对象，其中包含原语和其他存在于休眠状态的对象。大部分非 dao 代码依赖于通过休眠的延迟加载来动态地对对象进行水合。但是，由于一切都存在于内存中，我的对象没有加载，并且我得到了休眠延迟加载异常。

我可以通过手动浸入休眠和水合休眠对象来手动实现休眠延迟加载，但是该对象的对象图很大，包含数百种需要初始化和设置的类型。这似乎不切实际，我正在寻找一个可行的解决方案来解决这个问题。如果有人对此类问题或类似问题有任何提示、提示、解决方案或故事，我将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T19:35:35.007

如果您手动处理会话，请尝试传递对象 ID（数据库中的行 ID）而不是完整对象。然后在您想要获取完整的 ORM 对象时执行数据库读取，并且仅将 ORM 对象保持在有限的范围内，以便在您完成后可以将其作为垃圾回收。这可能会为您节省一些内存。

这也有一个副作用，即限制您需要打开会话的时间量。因为您可以打开会话（我会推荐一个会话工厂）并根据需要关闭它们。但是，我认为打开和关闭会话可能会对数据库造成重大影响（我认为底层事务是真正的问题）。您可能想研究 JPA，据我所知，它不需要读取事务。Spring 也有一些不错的特性来自动化他们可能想要研究的事务和会话管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T19:30:18.747

您可能已经关闭了会话。尝试在数据延迟加载时保持会话打开，或者如果无法做到这一点，请通过在集合上指定lazy="false" 属性来进行急切加载（lazy="true" 是默认值）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T19:46:14.970

最常见的原因`LazyInitializationException`是休眠会话已关闭。保持休眠会话打开，你应该没问题。

请注意，如果您使用 Spring`HibernateTemplate`加载对象，那么您加载的对象必然会被分离。如果你正在使用 Spring MVC 构建一个 webapp，一个简单的方法是使用[OpenSessionInViewInterceptor](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/orm/hibernate3/support/OpenSessionInViewInterceptor.html)。

# c# - FormsAuthentication.FormsCookiePath

> ID：879321
> 
> 赞同：1
> 
> 时间：2009-05-18T19:21:33.507
> 
> 标签：c#, asp.net, security, authentication, forms-authentication

Q1 我了解到在设置身份验证 cookie 的超时时间时，我们应该记住，cookie 持续的时间越长，cookie 被盗和滥用的机会就越大。

A）但是假设我们通过为整个应用程序启用 SSL 来保护我们的应用程序免受重放攻击，并且由于表单身份验证模块还在身份验证 cookie 中加密身份验证数据，那么我认为这个 cookie 不可能被滥用，因此 cookie 被持久化长时间不应该存在任何安全风险？！

第二季度

FormsAuthentication.FormsCookiePath 指定身份验证 cookie 的存储位置。默认值为“/”。

A）假设使用默认值'/'，那么cookie保存在哪里？

B) 此选项是否仅用于持久性 cookie？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T19:35:26.800

2A cookie 路径是与 cookie 相关的服务器上的路径，而不是存储 cookie 的路径。

来自[http://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)

> 该路径使您有机会指定 cookie 处于活动状态的目录。因此，如果您希望 cookie 仅发送到目录 cgi-bin 中的页面，请将路径设置为 /cgi-bin。通常路径设置为 /，这意味着 cookie 在整个域中都有效。该脚本会执行此操作，因此您可以在此页面上设置的 cookie 将被发送到 www.quirksmode.org 域中的任何页面（尽管只有此页面有一个脚本可以搜索 cookie 并对其进行处理）。

您正在使用 ASP.Net。另请参阅“CookieLess”会话和身份验证选项，例如 [http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.formscookiepath.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.formscookiepath.aspx) 如果您担心 cookie。这使用 URL 会话 ID 来跟踪您的会话。

您还可以使用 SQL Server 来跟踪会话状态或状态服务器。例如

```
<sessionState mode="SQLServer" sqlConnectionString="SQLSessionDB" cookieless="false" timeout="65" cookieName="MSESSID"/> 
```

1A。SSL 加密传输。因此，您的 cookie 在前往客户端或返回的途中被盗的可能性较小。这并不意味着客户端计算机上的恶意程序无法窃取它。不过，这不太可能。

# mysql - 删除巨大 MySQL 表的最快方法

> ID：879327
> 
> 赞同：56
> 
> 时间：2009-05-18T19:22:50.633
> 
> 标签：mysql, innodb

我有一个巨大的 MySQL (InnoDB) 数据库，会话表中有数百万行，这些行是由与我们在同一台服务器上运行的不相关、故障爬虫创建的。不幸的是，我现在必须解决这个烂摊子。

如果我尝试，`truncate table sessions;`它似乎需要很长时间（超过 30 分钟）。我不关心数据；我只想让桌子尽快被消灭。有没有更快的方法，还是我必须一夜之间坚持下去？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2011-06-14T21:00:51.780

（由于这在 Google 的搜索结果中很高，我认为更多的说明可能会很方便。）

MySQL 有一种方便的方法来创建像现有表一样的空表，以及一个原子表重命名命令。总之，这是一种清除数据的快速方法：

```
CREATE TABLE new_foo LIKE foo;

RENAME TABLE foo TO old_foo, new_foo TO foo;

DROP TABLE old_foo; 
```

完毕

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2009-05-18T19:28:13.133

最快的方法是使用 DROP TABLE 完全删除表并使用相同的定义重新创建它。如果您在表上没有外键约束，那么您应该这样做。

如果您使用高于 5.0.3 的 MySQL 版本，这将使用 TRUNCATE 自动发生。您也可以从手册中获得一些有用的信息，它描述了 TRUNCATE 如何与 FK 约束一起工作。 [http://dev.mysql.com/doc/refman/5.0/en/truncate-table.html](http://dev.mysql.com/doc/refman/5.0/en/truncate-table.html)

编辑：TRUNCATE 与 drop 或 DELETE FROM 不同。对于那些对差异感到困惑的人，请查看上面的手动链接。如果可以的话，TRUNCATE 将与删除相同（如果没有 FK），否则它就像没有 where 子句的 DELETE FROM。

编辑：如果您有一个大表，您的 MariaDB/MySQL 以 binlog_format 作为 ROW 运行，并且您在没有谓词/WHERE 子句的情况下执行 DELETE，您将遇到保持复制甚至保持 Galera 的问题节点在没有达到流控制状态的情况下运行。此外，二进制日志可以让您的磁盘满。当心。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-05-19T03:11:28.143

我发现使用 MySQL 执行此操作的最佳方法是：

```
DELETE from table_name LIMIT 1000; 
```

或 10,000（取决于它发生的速度）。

把它放在一个循环中，直到所有行都被删除。

请尝试一下，因为它确实有效。这需要一些时间，但它会起作用。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-05-18T19:24:58.163

你不能抓住模式删除表并重新创建它吗？

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-18T19:25:34.263

`drop table`应该是摆脱它的最快方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-18T19:27:17.177

如果您只是想完全摆脱桌子，为什么不干脆**放下**它呢？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-18T19:25:05.743

你试过用“drop”吗？我在超过 20GB 的表上使用过它，它总是在几秒钟内完成。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-19T20:28:54.617

截断速度很快，通常在几秒钟或更短的时间内。如果花了 30 分钟，您可能遇到了一些外键引用您正在截断的表的情况。也可能涉及锁定问题。

截断与清空表一样有效，但您可能必须删除外键引用，除非您也希望清理这些表。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-19T20:39:11.787

我不确定为什么要花这么长时间。但也许尝试重命名，并重新创建一个空白表。然后，您可以删除“额外”表，而不必担心需要多长时间。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-19T02:08:09.457

我们遇到了这些问题。我们不再将数据库用作 Rails 2.x 和 cookie 存储的会话存储。但是，删除表是一个不错的解决方案。您可能需要考虑停止 mysql 服务，暂时禁用日志记录，以安全模式启动，然后进行删除/创建。完成后，再次打开您的日志记录。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-03-02T14:26:17.170

searlea 的[回答](https://stackoverflow.com/a/6350096/2472196)很好，但正如评论中所述，您在战斗中丢失了外键。 **此解决方案类似：截断在一秒钟内执行，但您保留外键。**

诀窍是我们禁用/启用 FK 检查。

```
SET FOREIGN_KEY_CHECKS=0;
CREATE TABLE NewFoo LIKE Foo;
insert into NewFoo SELECT * from Foo where What_You_Want_To_Keep  

truncate table Foo;
insert into Foo SELECT * from NewFoo;
SET FOREIGN_KEY_CHECKS=1; 
```

* * *

## 扩展答案 - 删除除某些行之外的所有行

我的问题是：*由于一个疯狂的脚本，我的表格包含 7.000.000 行垃圾。我需要删除该表中 99% 的数据*，这就是为什么我需要在删除之前将*我想要保留*的内容复制到 tmp 表中。

我需要保留的这些 Foo 行取决于具有外键和索引的其他表。

类似的东西：

```
insert into NewFoo SELECT * from Foo where ID in (
 SELECT distinct FooID from TableA 
 union SELECT distinct FooID from TableB 
 union SELECT distinct FooID from TableC
) 
```

但是这个查询总是在 1 小时后超时。所以我不得不这样做：

```
CREATE TEMPORARY TABLE tmpFooIDS  ENGINE=MEMORY  AS (SELECT distinct FooID from TableA);
insert into tmpFooIDS SELECT distinct FooID from TableB
insert into tmpFooIDS SELECT distinct FooID from TableC
insert into NewFoo SELECT * from Foo where ID in (select ID from tmpFooIDS); 
```

我理论上，因为索引设置正确，我认为填充 NewFoo 的两种方式应该是相同的，但实际上它没有。

这就是为什么在某些情况下，您可以这样做：

```
SET FOREIGN_KEY_CHECKS=0;
CREATE TABLE NewFoo LIKE Foo;

-- Alternative way of keeping some data.
CREATE TEMPORARY TABLE tmpFooIDS  ENGINE=MEMORY  AS (SELECT * from Foo where What_You_Want_To_Keep);
insert into tmpFooIDS SELECT ID from Foo left join Bar where OtherStuff_You_Want_To_Keep_Using_Bar
insert into NewFoo SELECT * from Foo where ID in (select ID from tmpFooIDS);

truncate table Foo;
insert into Foo SELECT * from NewFoo;
SET FOREIGN_KEY_CHECKS=1; 
```

# deployment - 已部署 VPS 服务器中的请求统计

> ID：879330
> 
> 赞同：0
> 
> 时间：2009-05-18T19:23:28.900
> 
> 标签：deployment, statistics, vps

我正在考虑不同的可扩展性功能，突然明白我真的不知道一台服务器（VPS）可以处理多少。已经加载项目的他们的问题。

想象一下服务器：

1.  1 Gb 内存
2.  1 个至强 CPU
3.  中央操作系统
4.  带 FastCGI 的灯
5.  PostgreSQL 在同一台机器上

我们需要计算请求的数量，所以我决定为应用取中间参数：

1.  80% 的请求使用一次调用带有索引的 db
2.  40-50 Kb 的 html
3.  在 60% 的情况下缓存

添加一些其他参数，然后让我们计算或讲述有关负载的故事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T13:47:36.160

我会看一下仙人掌——它可以为您提供大量可供选择的统计数据。

# eclipse - Eclipse：刷新 Java 项目中的已知类型

> ID：879331
> 
> 赞同：8
> 
> 时间：2009-05-18T19:23:36.950
> 
> 标签：eclipse, eclipse-3.4

如果您按 Shift+Ctrl+T 或选择“导航 > 打开类型...”，您将获得“打开类型”对话框，用于快速导航到已知类。当您开始输入名称时，只有名称匹配的类保持可见。这样，您可以很快找到一个您知道名称的类，而无需浏览包资源管理器树。

直到今天早上，这对我来说一直很有效。突然之间，对于我的几个项目，我只看到*了一些*存在的类型。当然，我尝试了刷新项目、清理项目、重新构建项目、在外部重新构建项目的明显步骤，但都无济于事。这有点奇怪，因为这些类型在其他地方是已知的。如果我添加一个导入语句，Eclipse 不会抱怨它不知道类型，我可以通过 Ctrl-Click 类型来访问它们的文件。但是，类型导航对它们一无所知。

过去，当 InteliJ 曾经对我这样做时，我会找到它的缓存文件并删除它们，迫使它重建。Eclipse 是否有类似的事情我可能会做（我是 Eclipse 新手）？我正在使用 Eclipse 3.4.2，并且我已将其配置为*不*彻底删除文件（因为我们的实际构建过程将文件放入我不希望 Eclipse 处理的输出目录中）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-18T19:30:26.513

您是否尝试过关闭并重新打开项目？只有打开项目中的类型保存在内存中，当您第一次在新打开的项目上使用 Shift+Ctrl+T 时会发生刷新。

编辑添加：Ctrl+Shift+R 还显示类型（以及其他所有内容），但它还支持 Camel-case 以快速查找 Java 类型。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-29T08:34:46.297

Close eclipse and delete any .index files and the savedIndexNames.txt file in workspace/.metadata/.plugins/org.eclipse.jdt.core once eclipse is restarted it will rebuildl the entire index for Ctrl+T

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-18T19:51:33.087

尝试使用 -clean 标志启动 eclipse，您可以将其添加到 eclipse.ini 中，该文件可以在与 eclispe.exe 相同的目录中找到，或者如果您使用 bat 或 shell 脚本启动 eclipse，请将其添加为启动参数，例如 eclipse -clean。

clean 将整理您的工作区，并应强制 eclipse JDT 重新计算类型。我遇到了 .snap 文件的问题（似乎是在脏关机时创建的），这些文件似乎破坏了我的工作区，直到我清理它们，不久前 eclipse 丢失了 Object 类！犯了一些有趣的错误！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-08-10T14:39:52.257

I get problems like this often. I tried your solution, noticed it seemed to rebuild its search index, but I still couldn't find any of my classes. Then I took a look at the little green arrow on top right corner of that dialog, and noticed I had a working set selected which belonged to another project. I find it a little dumb that Eclipse doesn't warn you about this or anything, since this can be a very annoying little detail that one tends to forget (me at least ;-)).

Anyways, clicked on "Deselect Working Set" and bam I can find my classes again. Thought I'd add this here since others may make the same mistake.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-25T06:29:16.553

This worked for me -

1.  Select your project in `Package Explorer`
2.  Press `F5` or Right click and select `Refresh`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-24T13:16:26.507

I used the "-clean" as first line in the eclipse.ini (version Juno) and worked like a charm.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-14T17:09:09.867

I'v tried all the answers and I still had the issue. I then tried this:
I deleted the project (it's a maven project) and re-imported it. This time I made sure i check the "Add Project(s) to working set" checkbox. After that Eclipse was able to find the classes in that project.

The problem must have started because I didn't check this checkbox when i first imported this project.
By the way, I'm using Neon

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2009-05-19T04:04:43.700

*（警告：前方无耻营销）*

If you like this feature, you would love [nWire](http://www.nwiresoftware.com/). nWire allows, among other things, to quickly search not only for types, but for any possible Java element like method or field. It also uses a navigator view which is non-modal. After searching you can see the class associations in a very quick and easy way. Check out [the video on our site](http://www.nwiresoftware.com/).

# excel - VBA - 如何从 excel 2007 的最近文档列表中删除文件？

> ID：879334
> 
> 赞同：4
> 
> 时间：2009-05-18T19:23:48.837
> 
> 标签：excel, file, ms-office, vba

Office 中的最近文档功能非常有用，但我将文件移动到新目录，现在我无法让 Excel 停止在我打开工作簿时向我发送“找不到此文件”通知。Excel 选项似乎只控制显示这些“最近的文档”的数量，而不是实际保存的数量。所以我想知道 VBA 中是否有办法进入列表并删除有问题的文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-06-06T05:04:03.857

试试这个...

```
Public Function TestIt()
    For i = 1 To Application.RecentFiles.Count - 1
        Dim answer As String
        answer = MsgBox("Delete " & Application.RecentFiles(i).Name, vbYesNo)

        If answer = vbYes Then
            answer = MsgBox("Are you sure?", vbYesNo)
            If answer = vbYes Then
                Application.RecentFiles(i).Delete
            End If
        End If
    Next i
End Function 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-18T19:38:11.427

不是 VBA 解决方案，但打开 Regedit，您可以随意从列表中删除文件。

“文件 MRU”列表就是您所追求的；对于 Excel 2007，它位于

```
HKEY_CURRENT_USER\Software\Microsoft\Office\12.0\Excel\File MRU 
```

相应地调整版本号。

关闭 Excel，从那里找到的列表中删除有问题的文件条目，然后重新启动。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-16T09:51:59.913

面对同样的问题，我编写了这个小宏，从最近的文件列表中删除了所有无法访问的文件：

```
Public Function CheckRecentFiles() As Integer
    Dim i As Integer, c As Integer
    For i = Application.RecentFiles.count To 1 Step -1
        'Debug.Print Application.RecentFiles(i).name
        If Dir(Application.RecentFiles(i).name) = "" Then
            Debug.Print "Delete from recent file list: " & Application.RecentFiles(i).name
            Application.RecentFiles(i).Delete
            c = c + 1
        End If
    Next i
    Debug.Print c & " files removed."
    CheckRecentFiles = c
End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-16T18:07:05.720

尝试上面的例程，而不是作为函数，而是作为 SUB。并在第二行中删除其末尾的“-1”，因为最后一个条目将不会被处理。

然后该例程将正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-07T09:40:40.130

根据@GunnarBernsteinI 的回答，我刚刚将此添加到我的个人宏书中。这对于清理我为回答关于 SO 的问题而创建的临时文件将非常方便。

```
Public Sub CleanRecentFiles()
    Const ReviewEntry As Boolean = False
    Dim f As RecentFile
    For Each f In Application.RecentFiles
        If Len(Dir(f.Name)) = 0 Then
            f.Delete
        ElseIf ReviewEntry Then
            Debug.Print f.Name
            Stop
        End If
    Next
End Sub 
```

## 演示

[![在此处输入图像描述](https://i.stack.imgur.com/Y8f5I.gif)](https://i.stack.imgur.com/Y8f5I.gif)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-28T12:32:13.797

打开最近的工作簿列表。在要从列表中删除的文档的图标和文本之间快速而牢固地单击鼠标右键。出现一个下拉列表。它是允许您将项目固定到列表的列表。选择从列表中删除。它确实有效，但正确计时可能有点棘手。如果你太慢，它只会尝试打开文件。

# java - 包括 Java 类并在运行时运行它们

> ID：879336
> 
> 赞同：0
> 
> 时间：2009-05-18T19:24:11.753
> 
> 标签：java, reflection, dynamic-loading

我有一个需要“插件”接口的 Java 项目。我正在考虑加载某种具有默认方法的类文件，例如`initialize()`，`shutdown()`在将类加载到应用程序后将调用该类文件。这是这样做的方法吗？我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T19:30:35.437

查看[Class](http://java.sun.com/javase/6/docs/api/java/lang/Class.html)类，特别是[forName](http://java.sun.com/javase/6/docs/api/java/lang/Class.html#forName(java.lang.String))方法，它允许您按名称引用类。路径中的任何类都可以这样加载。我不知道是否可以*重新加载。*

在任何情况下，您想要动态加载的每个类都必须实现您的自定义`AddOn`接口，从而实现`initialize`and `shutdown`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T20:45:07.237

如果你看一些更复杂的东西，你可以试试：http: [//jpf.sourceforge.net](http://jpf.sourceforge.net)。

*... JPF 提供了一个动态发现和加载“插件”的运行时引擎。插件是一个结构化组件，它使用“清单”向 JPF 描述自己。...*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T19:31:42.860

首先，你需要一个[`ClassLoader`](http://java.sun.com/javase/6/docs/api/java/lang/ClassLoader.html); 您可以使用 获取当前的`getClass().getClassLoader()`，但是您的插件类必须在类路径中。您可能想要创建一个自定义类加载器来搜索您的插件目录。

一旦你得到了`ClassLoader`，你就可以用它来[加载一个类](http://java.sun.com/javase/6/docs/api/java/lang/ClassLoader.html#loadClass(java.lang.String))。这给了你一个[`Class`](http://java.sun.com/javase/6/docs/api/java/lang/Class.html)对象；然后，您可以使用反射来调用该`initialize()`方法（如果存在）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T19:34:15.477

另一个实现插件的好方法是[java.util.Serviceloader](http://java.sun.com/javase/6/docs/api/java/util/ServiceLoader.html)。看看javadocs，他们解释了原理。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-18T19:28:32.523

```
public class SomeClass { 
    static {
        System.out.println("Being called with the class is loaded");
        initialize();
    }
    static void initialize(){}
} 
```

那是你的问题吗？

# perl - 如何在不破坏语法检查的情况下将项目特定的 @INC 模块路径添加到 Komodo？

> ID：879342
> 
> 赞同：2
> 
> 时间：2009-05-18T19:25:23.887
> 
> 标签：perl, komodo, syntax-checking

对于 Perl 移植项目，我使用 ActiveState 的 Komodo IDE 5.1

由于外部原因，xyz.pm 模块位于不同的目录树中。通过在 debu/run 对话框的“environemt”选项卡下添加 PERL5LIB=<>，我可以向 Komodo/Perl 展示如何运行脚本。

不幸的是，语法检查似乎没有评估这些指令，并且 IDE 声称存在致命的“无法找到 xyz.pm”错误，尽管脚本运行良好。

解决此问题的一种方法是使用 <Edit><Preferences><Languages><Perl> 下的“Additional Perl Import Directories”添加模块路径，但这是一个全局指令，而不是特定于项目的指令，这会导致各种模块名称冲突时的有趣问题。

那么，如何配置 Komodo IDE 以在项目中存储“附加 Perl 导入目录”[用于语法检查的 @INC 路径]？

**编辑：**建议的添加方法使用**lib qw'../lib';** 可能会有所帮助，如果我只能让它在**IDE**中执行就好了。但是这段代码不能出现在生产环境中，因为启动脚本正确设置了环境。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-19T07:33:16.503

对于 Komodo IDE 5.0.1：

项目（顶部菜单栏）-> -> 属性 -> 语言（左侧菜单）-> Perl

这将允许您添加您想要的“其他 Perl 导入目录”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T04:04:12.750

我放了一个`use lib qw'../lib';`让 Komodo 正确突出显示。

它只是增加`../lib`了`@INC`.

# c# - IOC 和动态参数

> ID：879348
> 
> 赞同：1
> 
> 时间：2009-05-18T19:26:08.630
> 
> 标签：c#, inversion-of-control

我在这里阅读了一些关于在传递给构造函数时不混合参数的帖子，但是有一个问题。我有类，它们都依赖于公司参数，所有方法都依赖于公司。我不想在每个方法调用中都传递公司，我想将它传递给构造函数。这确实使类变得困难，因为我几乎必须确保具体类的构造函数接受某些我不喜欢的参数（不能将其放在作为接口的合同中）。建议只将公司传递给类中的每个方法调用？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T19:30:56.013

如果所有方法都需要一个公司名称，那么从 OOP 设计的角度来看，将这个公司名称传递给类的构造函数是完全合理的。这意味着如果没有公司名称，您的类将无法正常运行，因此该类的任何使用者都将被迫提供所需的依赖项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T19:31:47.963

假设您没有使用已经为您处理此问题的已知 IoC 框架，您始终可以将其实现为属性注入。并不是说我在构造函数级别上也看到了这样做的问题——你还没有真正说出你为什么觉得这是一个问题。

当然不建议将它传递给每个方法（显然是多余的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T19:33:14.917

是的，在 IoC 世界中，大多数工具（Spring.Net、Castle Windsor 甚至 LinFu）都有可以为您处理这些问题的方法，因此您可以在配置中定义它，并且每次获得副本时（从容器或无论如何）它是预先配置的。

你可以包装你的“容器”

```
IWindsorContainer _ConfiguredContainer = null;

public IWindsorContainer GetContainer()
{
   if (LoggedIn == false)
      throw new InvalidOperationException("Cannot be called before a user logs in");

   if (_ConfiguredContainer == null)
   {
      _ConfiguredContainer = new WindsorContainer(new XmlInterpreter());

      // Do your 'extra' config here.
      _ConfiguredContainer.AddComponentWithProperties(/*blah blah blah*/);
   }

   return _ConfiguredContainer;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T19:36:22.790

如果您的班级的行为取决于所述公司名称，那么将其与构造函数一起传递有什么问题？构造函数本身就是一个契约——你必须用一些东西来实例化它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T03:29:00.663

你可以有一个 ICommonSettings （几乎像一个全局静态类），它被注入到你的登录管理器（设置公司名称）和你谈论的对象中。然后您不必将其传递给构造函数或方法。

# java - 将 MouseOverHandler 添加到元素？

> ID：879349
> 
> 赞同：9
> 
> 时间：2009-05-18T19:26:25.383
> 
> 标签：java, gwt

我想在 GWT 1.6 中监听鼠标悬停事件。由于 GWT 1.6 引入了处理程序和不推荐使用的侦听器，因此我不确定如何使用存在的少量信息来完成此任务。

注意：我有一个 Element 对象。这就是我需要添加鼠标处理程序的地方。我为我的不清楚的地方道歉。

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-19T12:49:54.467

在我需要自己解决这个问题之前，我希望我们能看到答案。他发布的示例代码中存在一些错误，但[Mark Renouf 在此线程](http://groups.google.com/group/Google-Web-Toolkit/browse_thread/thread/b2eae8c3700291fb/d879a9c2a2796a76?lnk=raot)中的帖子包含了我们需要的大部分内容。

假设您想在自定义小部件上侦听鼠标悬停和鼠标移出事件。在您的小部件中，添加两个方法：

```
public HandlerRegistration addMouseOverHandler(MouseOverHandler handler) {
  return addDomHandler(handler, MouseOverEvent.getType());
}

public HandlerRegistration addMouseOutHandler(MouseOutHandler handler) {
  return addDomHandler(handler, MouseOutEvent.getType());
} 
```

然后创建一个处理程序类：

```
public class MyMouseEventHandler implements MouseOverHandler, MouseOutHandler {
  public void onMouseOver(final MouseOverEvent moe) {
    Widget widget = (Widget) moe.getSource();
    widget.addStyleName("my-mouse-over");
  }

  public void onMouseOut(final MouseOutEvent moe) {
    Widget widget = (Widget) moe.getSource();
    widget.removeStyleName("my-mouse-over");
  }
} 
```

最后，将处理程序添加到小部件：

```
myWidget.addMouseOverHandler(new MyMouseEventHandler());
myWidget.addMouseOutHandler(new MyMouseEventHandler()); 
```

如果您只是在监听鼠标悬停事件，则可以跳过鼠标移出处理。而且，如果您不制作自定义小部件，则该小部件已经有了添加处理程序的方法。

最后，根据线程的警告，请记住`addDomHandler`鼠标事件，而不是`addHandler`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T12:38:01.730

你想在你的类中实现这些接口：

*   HasMouseOverHandlers
*   HasMouseOutHandlers
*   MouseOverHandler
*   鼠标输出处理程序

MouseOverEvent 在鼠标进入元素时被触发，而 MouseOutEvent 在它不再结束时被触发。

**HasMouseOverHandler**是这样实现的：

```
public HandlerRegistration addMouseOverHandler(MouseOverHandler handler) {
    return addDomHandler(handler, MouseOverEvent.getType());
} 
```

**HasMouseOutHandler**是这样实现的：

```
public HandlerRegistration addMouseOutHandler(MouseOutHandler handler) {
    return addDomHandler(handler, MouseOutEvent.getType());
} 
```

之后，您只需使用 MouseOverHandler 和 MouseOutHandler 处理事件，之后应该非常简单。

如果您想将 EventHandler 添加到 HTML 中已经存在的元素中，那么我想出的唯一想法是创建一个包装类。**这是完全未经测试的。**

```
class ElementWrapper extends UIObject implements HasMouseOverHandlers, 
HasMouseOutHandlers
{
     public ElementWrapper(Element theElement)
     {
        setElement(theElement);
     }   

    public HandlerRegistration addMouseOutHandler(MouseOutHandler handler) {
        return addDomHandler(handler, MouseOutEvent.getType());
    }

    public HandlerRegistration addMouseOverHandler(MouseOverHandler handler) {
        return addDomHandler(handler, MouseOverEvent.getType());
    }
} 
```

然后你可以从 HTML 中获取一个现有的 Element 并像这样初始化：

```
onModuleLoad()
{
    Element theElement = RootPanel().get("elementID");
    ElementWrapper wrapper = new ElementWrapper(theElement);
    wrapper.addMouseOverHandler(new myHandler());

} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-12-11T03:32:51.123

如果您知道元素的类型，则可以包装 Element 并取回适当的 Widget。例如，在图像的情况下：

```
Element el = DOM.getElementById("someImageOnThePage");
Image i = Image.wrap(el);
i.addMouseOverHandler(...); 
```

我遇到的唯一问题是，如果元素已附加到另一个父小部件，您将在 HostedMode 中收到 AssertionError。但是，它会在生产中正常工作。这种说法可能有充分的理由，所以要小心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-05-12T16:49:31.793

如果您知道对象的类型，则某些小部件包含静态包装功能。从其中一个我能够派生以下类。

```
public class Widget extends com.google.gwt.user.client.ui.Widget
{
    public Widget(Element element, boolean detatchFromDom)
    {
        super();
        if (detatchFromDom)
            element.removeFromParent();

        setElement(element);

        if (!detatchFromDom)
        {
            onAttach();
            RootPanel.detachOnWindowClose(this);
        }
    }

    public <H extends EventHandler> HandlerRegistration addDomHandlerPub(final H handler, DomEvent.Type<H> type)
    {
        return addDomHandler(handler, type);
    }
} 
```

# javascript - firebug net tab 0 请求问题

> ID：879350
> 
> 赞同：0
> 
> 时间：2009-05-18T19:26:32.623
> 
> 标签：javascript, firebug

我遇到了萤火虫的问题，

在“网络”选项卡下说，它总是显示“0请求”

但我已经“为 xxx 启用了监视器”

有没有人遇到过同样的问题？

我该怎么做才能使“网络”选项卡再次恢复正常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T20:04:19.597

你可能没有看“全部”。“网络”选项卡上方是另一组选项卡（全部、HTML、CSS、JS、XHR、图像、Flash）您可能选择了其中一个。

我会笑，但我以前也遇到过这种情况。

# wpf - Silverlight 3.0 出浏览器与 WPF/Windows 应用程序 - 差异摘要？

> ID：879361
> 
> 赞同：7
> 
> 时间：2009-05-18T19:28:56.440
> 
> 标签：wpf, silverlight, silverlight-3.0

借助允许在浏览器外部托管组件的新 Silverlight 3.0 功能，我们公司正在寻找有关此新功能与 WPF Windows 应用程序之间差异的详细信息（因为 Silverlight 部分是 WPF 的子集）。

是否有一个很好的资源列出了浏览器之外的 Silverlight 3 和 WPF 应用程序之间的区别？权限、功能等领域。

如果没有网络资源，主要区别是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-18T19:46:30.507

Silverlight OOB 应用程序具有与浏览器内 Silverlight 应用程序完全相同的功能，只是它们失去了与 DOM 通信的能力（通过 System.Windows.Browser API）。

以下是您可能计划在 WPF 应用程序中使用的 Silverlight 无法访问的一些常见内容的简要列表：

*   客户端文件系统
*   客户端 Windows 注册表
*   客户端事件日志
*   客户端 OLEDB
*   客户端 SQL 客户端

这似乎是一个很长的列表，但对于任何 Web 应用程序平台（如 ASP.NET、JSP、PHP）来说，它应该看起来相当熟悉。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-18T21:44:50.440

Jaime Rodriguez 有一篇非常好的文章，涵盖了 Silverlight 和 WPF 的主要区别和特性：[这里](http://blogs.msdn.com/jaimer/archive/2009/03/30/mix09-recap-series-part2.aspx)。这是非常高级的，旨在区分 WPF 和 Silverlight 浏览器外应用程序带来的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T18:44:18.470

马克蒂是正确的。

**Scott Barnes - 富平台产品经理 - Microsoft。**

# c# - 从 jQuery 调用 ASMX

> ID：879362
> 
> 赞同：19
> 
> 时间：2009-05-18T19:29:07.860
> 
> 标签：c#, jquery, asmx

我试图从 jQuery 调用 ASMX 方法但没有成功。以下是我的代码，我不明白我缺少什么。

文件Something.js，

```
function setQuestion() {
    $.ajax({
        type: "POST",
        data: "{}",
        dataType: "json",
        url: "http: //localhost/BoATransformation/Survey.asmx/GetSurvey",
        contentType: "application/json; charset=utf-8",
        success: onSuccess
    });
}

function onSuccess(msg) {
    $("#questionCxt").append(msg);
} 
```

文件SomethingElse.cs，

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.Web.Script.Services.ScriptService]
public class Survey : System.Web.Services.WebService {

    public Survey () {
    }

    [WebMethod]
    [ScriptMethod(UseHttpGet = true)]
    public string GetSurvey() {
        return "Question: Who is Snoopy?";
    }
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-05-18T19:32:43.077

突出的一件事是你有`UseHttpGet=true`，但在你的 jQuery 代码中你使用的是 POST。

这里还有一个我创建的调用 ASMX 页面的测试页面。

```
[WebMethod]
public Catalog[] GetCatalog()
{
    Catalog[] catalog = new Catalog[1];
    Catalog cat = new Catalog();
    cat.Author = "Jim";
    cat.BookName ="His Book";
    catalog.SetValue(cat, 0);
    return catalog;
}

<script type="text/javascript">
    $(document).ready(function() {
    $.ajax({
            type: "POST",
            url: "default.asmx/GetCatalog",
            cache: false,
            contentType: "application/json; charset=utf-8",
            data: "{}",
            dataType: "json",
            success: handleHtml,
            error: ajaxFailed
        });
    });

    function handleHtml(data, status) {
        for (var count in data.d) {
            alert(data.d[count].Author);
            alert(data.d[count].BookName);
        }
    }

    function ajaxFailed(xmlRequest) {
        alert(xmlRequest.status + ' \n\r ' + 
              xmlRequest.statusText + '\n\r' + 
              xmlRequest.responseText);
    }
</script> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-18T20:11:04.497

您必须确保将 Json 指定为响应格式，如果这是您想要的并且`UseHttpGet`由于[安全功能](http://weblogs.asp.net/scottgu/archive/2007/04/04/json-hijacking-and-how-asp-net-ajax-1-0-mitigates-these-attacks.aspx)而摆脱它：

```
[WebMethod]
[ScriptMethod(ResponseFormat=ResponseFormat.Json)]
public string GetSurvey() {
    return "Question: Who is Snoopy?";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-18T19:33:39.130

这是一个 jQuery 调用 aspx 上的页面方法的示例，但它类似于 asmx 页面。

```
$.ajax(
    {
        type: "POST",
        url: "NDQA.aspx/ValidateRoleName",
        data: '{"roleName":"' + $('[id$=RoleNameTextBox]').val() + '"}',
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: ValidateSuccess,
        error: ValidateError

    }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T13:57:18.653

我遇到了这个问题并且遇到了同样的问题。我通过添加解决了它：

```
[WebInvoke(Method="POST",ResponseFormat=WebMessageFormat.Json)] 
```

如果您想使用 POST，请在您的网络方法属性下方。IE：

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.Web.Script.Services.ScriptService]
public class Survey : System.Web.Services.WebService {

    public Survey () {
    }

    [WebMethod]
    [WebInvoke(Method="POST",ResponseFormat=WebMessageFormat.Json)]
    [ScriptMethod(UseHttpGet = true)]
    public string GetSurvey() {
        return "Question: Who is Snoopy?";
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-18T19:42:25.150

我还建议按照 Jim Scott 的建议删除 UseHttpGet。

您可以将以下内容添加到您的选项中并检查 objXMLHttpRequest 以查看更详细的错误响应。

```
error: function(objXMLHttpRequest, textStatus, errorThrown) {
 debugger;               
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-08T17:04:11.830

> 如果这是您想要的，您必须确保将 Json 指定为响应格式，并且由于安全功能而摆脱 UseHttpGet ：

如果您阅读了那篇文章，那么您会发现使用 UseHttpGet 是安全的，因为 ASP.NET 具有阻止跨站点脚本攻击向量的功能。

使用 GET 有很多正当理由。

他可以删除 data 参数并将 POST 更改为 GET 以使调用正常工作。假设您需要 JSON 响应，则还需要添加 ResponseFormat=ResponseFormat.Json 。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-08-13T18:41:07.310

以下步骤解决了我的问题，希望对某些人有所帮助，

1.  要允许使用 ASP.NET AJAX 从脚本调用此 Web 服务，请在 asmx 服务类上方包含以下行，例如

    [System.Web.Script.Services.ScriptService] 公共类 GetData : System.Web.Services.WebService {

2.  在web.config中system.web下添加协议，如果看不到配置请点击链接

[https://pastebin.com/CbhjsXZj](https://pastebin.com/CbhjsXZj)

```
<system.web>
<webServices>
  <protocols>
    <add name="HttpGet"/>
    <add name="HttpPost"/>
  </protocols>
</webServices> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-10T19:34:57.390

如果您尝试使用 chrome 浏览器，请尝试使用 Internet Explorer，它对我有用，而且它与 chrome 浏览器有关，您必须在 chrome 中添加扩展名，但我不知道扩展名

# winapi - 在 Windows Mobile 上使用 IImage 接口将 BITMAP 转换为 PNG

> ID：879371
> 
> 赞同：0
> 
> 时间：2009-05-18T19:31:38.057
> 
> 标签：winapi, image, windows-mobile, native

我在 Windows Mobile 应用程序中有一个 BITMAP 结构 (HBITMAP) 的句柄——我想将位图保存为 PNG 文件，如果可能的话，使用[IImage](http://msdn.microsoft.com/en-us/library/aa915136.aspx)接口。（在这种情况下没有 BMP 文件，BITMAP 仅在内存中）。

看起来我可以使用 IImagingFactory 的[IImagingFactory::CreateImageEncoderToFile](http://msdn.microsoft.com/en-us/library/aa919941.aspx)方法来保存文件，但我认为我首先必须将 BITMAP 转换为“IImage”格式。

关于如何使用本机代码执行此操作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T03:39:02.770

使用[CreateImageFromStream](http://msdn.microsoft.com/en-us/library/aa919079.aspx)读取您的 BITMAP 数据，从而为您提供 IImage。

编辑：

我对此做了更多的研究。有几种路径，但我认为最简单的是：

1.  创建一个[DIBSECTION](http://msdn.microsoft.com/en-us/library/dd183567(VS.85).aspx)并将您的位图粘贴到它。
2.  为图像数据创建一个指向 DIBSECTION的[BitmapData实例。](http://msdn.microsoft.com/en-us/library/ms925969.aspx)
3.  调用[CreateBitmapFromBuffer](http://msdn.microsoft.com/en-us/library/aa452203.aspx)生成一个[IBitmapImage](http://msdn.microsoft.com/en-us/library/ms908972.aspx)接口
4.  通过您的编码器推送 IBitmapImage（它是一个 IImage）。

# c# - LINQ中的参数动态“非”（或任何其他代码）

> ID：879374
> 
> 赞同：2
> 
> 时间：2009-05-18T19:31:49.630
> 
> 标签：c#, linq, parameters

好的，

这可能真的很简单，或者甚至不可能，或者我只是大脑冻结:)

这是我正在尝试做的一个例子：

```
public void SomeMethod(bool include)
        {
            using (AccountDataContext db = AccountContextFactory.CreateContext())
            {
                if (include)
                {
                    var query = from a in db.FundingTypes where a.FundingTypeId == 1 select a;
                }
                else
                {
                    var query = from a in db.FundingTypes where a.FundingTypeId != 1 select a;
                }
            }
        } 
```

我想动态更改 != 和 = 而不必编写一个全新的查询。我在现实生活中使用的查询非常大，我不喜欢代码重复。

想法还是想法？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-18T19:38:09.150

这似乎非常简单。

```
var predicate = include ? 
  (Func<int, bool>) x=>x == 1 : 
  (Func<int, bool>) x=>x != 1 ;
var query = from a in db.FundingTypes where predicate(a.FundingTypeId) select a; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T19:49:09.753

这个怎么样：

```
var query = 
    from a in db.FundingTypes 
    where (a.FundingTypeId == 1) == include 
    select a; 
```

乔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T19:36:49.030

这个怎么样：

```
public void SomeMethod(bool include, Func<int, bool> query)
{
    using (AccountDataContext db = AccountContextFactory.CreateContext())
    {
         var query = from a in db.FundingTypes where query(a.FundingTypeId) select a;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T19:37:10.463

试试这个：

```
SomeMethod(bool include)
{
    using (AccountDataContext db = AccountContextFactory.CreateContext())
    {
        var query = from a in db.FundingTypes where !include ^ (a.FundingTypeId == 1) select a;
    }
} 
```

**编辑**使用 XOR 简化了逻辑

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-18T19:38:06.827

试试这个：

```
var predicate = include
    ? (Func<FundingType, bool>) f => f.FundingTypeId == 1
    : (Func<FundingType, bool>) f => f.FundingTypeId != 1
return (from a in db.FundingTypes select a).Where(predicate); 
```

# c++ - 如何从循环生成的整数中删除前导零并将其存储为数组？

> ID：879375
> 
> 赞同：1
> 
> 时间：2009-05-18T19:32:17.603
> 
> 标签：c++, arrays, integer

我有一个`for`生成整数的循环。

例如：

```
for (int i=300; i>200; i--)
    {(somefunction)*i=n;
    cout<<n;
    } 
```

这会在屏幕上产生如下输出：

```
f=00000000000100023; 
```

我想将这个数字的 100023 部分存储为一个数组（即在非零数字开始之前忽略所有零，然后保留后面的零）。

像这样：

```
array[0]=1;
array[1]=0;
array[2]=0;
array[3]=0;
array[4]=2;
array[5]=3; 
```

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T20:25:24.937

这是一个混杂的答案，因为它们都在那里，我只是认为您没有看到解决方案。

首先，如果它们是整数[比尔的答案](https://stackoverflow.com/questions/879375/how-can-i-remove-the-leading-zeroes-from-an-integer-generated-by-a-loop-and-store/879446#879446)以及其他答案都很棒，请保存其中一些跳过“存储在数组中”部分。此外，正如在对您的问题的评论中指出的那样，这部分是[重复的](https://stackoverflow.com/questions/515612/convert-an-integer-number-into-an-array)。

但是对于您的新代码，我想到的解决方案是[John's solution](https://stackoverflow.com/questions/879375/how-can-i-remove-the-leading-zeroes-from-an-integer-generated-by-a-loop-and-store/879525#879525)。您只需要弄清楚如何忽略前导零，这很容易：

```
std::vector<int> digits;
bool inNumber = false;

for (int i=300; i>200; i--)    
{
    int value = (somefunction) * i;

    if (value != 0)
    {
        inNumber = true; // its not zero, so we have entered the number
    }

    if (inNumber)
    {
        // this code cannot execute until we hit the first non-zero number
        digits.push_back(value);
    }
} 
```

基本上，在达到实际数字之前不要开始推动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-18T19:48:50.750

鉴于已编辑的问题，我的原始答案（如下）并不是最好的。如果您绝对必须将输出放在数组而不是向量中，则可以从 GMan 的答案开始，然后将结果字节传输到数组。一旦你在他的结果中找到第一个非零数字，你就可以对 JohnFx 的答案做同样的事情。

* * *

我假设`f`是 type `int`，在这种情况下它不存储前导零。

```
int f = 100023; 
```

首先，您需要找到所需的数组长度。您可以通过获取`f`. 您可以导入 cmath 库以使用该`log10`功能。

```
int length = log10(f);
int array[length]; 
```

`length`现在应该是 6。

接下来，您可以使用循环和模数 (%) 运算符从数组中剥离每个数字`f`并将其存储在数组中。

```
for(int i=length-1; i >= 0; --i)
{
    array[i] = f % 10;
    f = f / 10;
} 
```

每次通过循环，模数通过返回除以 10 的余数来取最后一位。下一行除以`f`10 为循环的下一次迭代做好准备。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-18T19:44:19.450

直接的方法是

```
std::vector<int> vec;
while(MyInt > 0)
{
  vec.push_back(MyInt%10);
  MyInt /= 10;
} 
```

它以相反的顺序存储小数（用于简化我的代码的向量）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-18T20:05:30.687

稍等一下。如果您编写了生成整数的代码，为什么还要费心将其解析回数组？

为什么不将整数塞入循环中的数组中呢？

```
int array[100];

for (int i=300; i>200; i--)    
{
    array[i]= (somefunction)*i;    
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-18T19:53:25.593

由于前导零不保留**，因为它代表相同的数字**

请参阅：[将整数转换为数组](https://stackoverflow.com/questions/515612/convert-an-integer-number-into-an-array)

# postgresql - 如何将文本文件插入到 PostgreSQL 的字段中？

> ID：879378
> 
> 赞同：3
> 
> 时间：2009-05-18T19:32:49.160
> 
> 标签：postgresql, full-text-search, text-files

如何将文本文件插入到 PostgreSQL 的字段中？

我想插入一行，其中包含来自本地或远程文本文件的字段。

我希望像 gettext() 或 geturl() 这样的函数来执行以下操作：

% INSERT INTO collection(id, path, content) VALUES(1, '/etc/motd', gettext('/etc/motd'));

-S。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T01:51:49.897

最简单的方法是使用一种可嵌入的脚本语言。下面是一个使用 plpythonu 的例子：

```
创建函数 gettext(url TEXT) 返回文本
作为$$
导入 urllib2
尝试：
  f = urllib2.urlopen(url)
  返回 '​​'.join(f.readlines())
除了例外：
  返回 ””
$$ 语言 plpythonu;

```

这个示例函数的一个缺点是它依赖于 urllib2，这意味着您必须使用“file:///” URL 来访问本地文件，如下所示：

选择 gettext('file:///etc/motd');

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-22T23:10:25.713

感谢您的提示。我找到了另一个带有内置函数的答案。您需要拥有超级用户权限才能执行该操作！

```
-- 1\. Create a function to load a doc
-- DROP FUNCTION get_text_document(CHARACTER VARYING);
CREATE OR REPLACE FUNCTION get_text_document(p_filename CHARACTER VARYING)
  RETURNS TEXT AS $$
  -- Set the end read to some big number because we are too lazy to grab the length
  -- and it will cut of at the EOF anyway
  SELECT CAST(pg_read_file(E'mydocuments/' || $1 ,0, 100000000) AS TEXT);
$$ LANGUAGE sql VOLATILE SECURITY DEFINER;
ALTER FUNCTION get_text_document(CHARACTER VARYING) OWNER TO postgres;

-- 2\. Determine the location of your cluster by running as super user:
SELECT name, setting FROM pg_settings WHERE name='data_directory'; 

-- 3\. Copy the files you want to import into <data_directory>/mydocuments/
--    and test it: 
SELECT get_text_document('file1.txt');

-- 4\. Now do the import (HINT: File must be UTF-8) 
INSERT INTO mytable(file, content)
  VALUES ('file1.txt', get_text_document('file1.txt')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-25T10:28:36.407

Postgres 的[COPY 命令](https://www.postgresql.org/docs/current/sql-copy.html)正是为此而生的。

我的建议是将其上传到临时表，然后在您对格式感到满意时将数据传输到主表。例如

```
CREATE table text_data (text varchar)
COPY text_data FROM 'C:\mytempfolder\textdata.txt';
INSERT INTO main_table (value) 
  SELECT string_agg(text, chr(10)) FROM text_data;
DROP TABLE text_data; 
```

另请参阅[此问题](https://stackoverflow.com/questions/5233321/how-to-load-data-from-a-text-file-in-a-postgresql-database)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T19:48:05.230

你不能。您需要编写一个程序来读取文件内容（或 URL）并将其存储到所需的字段中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-02-03T02:39:56.697

使用 COPY 而不是 INSERT

参考： http: [//www.commandprompt.com/ppbook/x5504#AEN5631](http://www.commandprompt.com/ppbook/x5504#AEN5631)

# .net - ADO.NET：DataSet 或 DataTable 以及如何检索数据

> ID：879381
> 
> 赞同：2
> 
> 时间：2009-05-18T19:33:20.393
> 
> 标签：.net, database, ado.net

SO社区

我刚开始使用 ADO.NET，而且对编程还很陌生。我已经从这个社区获得了一些支持，这非常有用并且还有另一个问题。

简单来说，我正在创建一个简单的 Windows 表单，其中包含员工姓名和按钮的组合框，以便当用户单击按钮时，所选员工的电子邮件地址会出现在表单的文本框中。

在我的项目中，我有数据库并在加载表单时连接到我的数据库并创建一个数据表，如下所示：

```
Public Class GetEmployeeDataset

Private tbl As New DataTable

Public Sub New()
    Dim strConn, strSQL As String
    strConn = "Data Source=.\SQLExpress;Initial Catalog=MyDatabase;Integrated Security=True;"
    strSQL = "SELECT * FROM EmployeeTable"

    Dim da As New SqlDataAdapter(strSQL, strConn)
    da.Fill(tbl)
End Sub

End Class 
```

在这一点上，我有两个问题：

1.  我使用的是 DataTable 而不是 DataSet，因为据我了解，DataSet 是 DataTable 的集合，而我这里只有一个简单的 DataTable（5 列，100 行），所以使用 DataTable 似乎更容易。这有什么问题吗？
2.  现在我有一个 DataTable（在我的示例中为“tbl”），我如何查询该 DataTable 以检索正确的数据，即基于员工姓名的 EmailAddress？在 SQL 中，它将是“SELECT EmailAddress WHERE EmployeeName = SelectedItem”。我看过使用 DataTable 的 Select 方法但无济于事，然后我使用 DataView 的 RowFilter 方法但没有任何成功。

有人可以指出我正确的方向吗？

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T19:50:39.267

我根本不使用 DataSets 或 DataTables。我发现使用它们的唯一原因是，如果您想“离线”保存所有数据，对数据进行更改，然后根据需要将这些更改提交回数据库。

如果您所做的只是根据用户交互从服务器获取数据，那么使用 DataTable 可能有点过头了。

编辑：哦，回答你的实际问题：

1.  听起来不错，因为您只需要一张桌子。
2.  在 DataTable 上使用 Select 方法（这将返回满足 where 条件的 DataRows 数组）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T05:27:11.567

继续使用 ADO 对象，这就是您可以使用 DataView 的方式...

```
 Dim dv As DataView
  Dim strFilter As String
  Dim strEmail As String = ""  

  strFilter = "EmployeeName = '" & cbo.Text & "'"  

  dv = tbl.DefaultView
  dv.RowFilter = strFilter  

  If dv.Count > 0 Then
     strEmail = dv(0).Item("EmailAddress").ToString
  End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T15:51:51.297

对于 100 条记录（或 1,000,000 条，如果按员工姓名编制索引），对于这种特定情况，您最好的选择是使用 SqlCommand 对象的 ExecuteScalar 方法在需要时检索电子邮件地址。将整个表格拉过电线只是为了获得一个字段几乎总是一个坏主意。出于性能和维护的原因，即使使用 where 子句选择 * 通常也是一个坏主意。

以下代码将为您提供员工姓名的电子邮件地址。

```
Using cn as new SqlConnection("Data Source=.\SQLExpress;Initial Catalog=MyDatabase;Integrated Security=True;")
    Using cmd as new SqlCommand("SELECT EmailAddress From Employees WHERE EmployeeName = '" & employeeName & "'", cn)
        Return TryCast(cmd.ExecuteScalar(), String)
    End Using
End Using 
```

正如其他人所说，DataTables 用于在您需要的相对罕见的情况下进行离线存储。你是对的，除非你需要离线缓存整个数据库（或数据库的子集），否则没有理由使用 DataSet。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T19:55:50.440

一个简单的枚举就可以解决问题：

```
string email = string.Empty;
foreach (Row row in tbl.Rows)
{
    string employeeName = (string)row["EmployeeName"];
    if (employeeName == "John")
    {
        email = (string)row["Email"];
        break;
    }
} 
```

或者您可以尝试 LINQ：

```
var email = (from row in tbl.Rows
            where (string)row["EmployeeName"] == "John"
            select (string)row["Email"]).First (); 
```

我没有检查 VS 中的代码，所以“保留了错别字”。对不起 C# 版本，但我不知道 VB。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-18T20:08:38.370

1.  作为一个 DataSet 只存储多个 DataTables 并管理它们之间的关系和视图，您可以在这里使用 ::shudder:: DataTable。

2.  您应该考虑这里到底发生了什么。当您说“SELECT * FROM EmployeeTable”时，您将这样做 - 从数据库中获取所有数据，然后尝试在应用程序代码中将其过滤到数据库之外。出于多种原因，这不是一个好主意，但现在让我们说我们应该让数据库执行他们真正擅长的工作，那就是过滤和排序数据。

您可能会发现 Linq to SQL 是一种比 ADO.NET 更容易实现的技术。有很多关于这个主题的教程，所以[这里有一个可以帮助您入门](http://weblogs.asp.net/scottgu/archive/2007/05/19/using-linq-to-sql-part-1.aspx)（尽管它比较旧）。Linq to SQL 本质上允许您将基于集合的 SQL 知识带到应用程序域并为您提供良好的启动性能（即您可以从“SELECT * FROM Employees”开始并依次添加过滤器，例如“WHERE Name = 'Smith'" 最终在数据库上执行）。

如果您绝对肯定必须使用 ADO.NET 并且必须采用这种方法，您可以这样做：

```
yourDataTable.Select("EmployeeName='" + yourSelectedValue + "'") 
```

# java - 如何使用 JPA/EclipseLink 从联结表中获取信息？

> ID：879385
> 
> 赞同：0
> 
> 时间：2009-05-18T19:34:12.543
> 
> 标签：java, jpa, persistence, eclipselink, entitymanager

我有以下多对多映射：

```
`public class Student implements
{
    @Id
    @GeneratedValue
    private Integer xID;

```
@ManyToMany
@JoinTable(name = "x_y", 
           joinColumns = { @JoinColumn(name = "xID")},
           inverseJoinColumns={@JoinColumn(name="yID")})
private Set<Cat> cats; 
```

}

public class Cat implements
{
    @Id
    @GeneratedValue
    private Integer yID;

```
@ManyToMany
@JoinTable(name = "x_y", 
           joinColumns = { @JoinColumn(name = "yID")},
           inverseJoinColumns={@JoinColumn(name="xID")})
private Set<Student> students; 
```

}` 
```

`请忽略对象和属性名称，它们是虚构的和不相关的。这可以编译并正常工作。我也可以这样做：`

 ````
`Entitymanager em = emf.createEntityManager();

em.getTransaction().begin();
Student s = new Student();
Student s2 = new Student();
Cat c = new Cat();
em.persist(s);
em.persist(s2);
em.persist(c);
s.getCats().add(c);
c.getStudents().add(s2);
em.getTransaction().commit();` 
```

`当我从数据库中取回对象时，我的问题就来了。`

 ````
`em.getTransaction().begin();
Student s = em.find(Student.class, 2);
Cat c = em.find(Cat.class, 3);

if( c != null )
   System.out.println(c.getYID() + ": " + c.getStudents());
if( s != null )
   System.out.println(s.getXID() + ": " + s.getCats());
em.getTransaction().commit();` 
```

`打印输出是：`

 `3：{IndirectSet：未实例化}

2：{IndirectSet：未实例化}

这很可能是正常行为。在我看来，当我从表中取回对象时，应该填充与其他对象相关的集合。我的意思是，因为连接表看起来像这样：

X | 是

2 | 3

1 | 3

em.find(Cat.class,3) 应该为 getStudents() 返回一个带有一组 {1,2} 的 Cat 对象，而 em.find(Student.class,2) 应该返回一个带有一组 {3 的 Student 对象} 对于 getCats()。

有没有办法让这成为可能？

谢谢， BJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-18T19:52:23.147

尝试将 @ManyToMany(cascade = CascadeType.ALL) 添加到您的 Cat 对象中，以级联您的读取操作。

正确设置级联后，您可以将保存代码更改为；

```
Entitymanager em = emf.createEntityManager();

em.getTransaction().begin(); 
Student s = new Student(); 
Student s2 = new Student();
Cat c = new Cat();
// this should be c.setStudents(s2)
c.getStudents().add(s2); 
em.persist(c); 
em.getTransaction().commit(); 
```

老实说，不完全理解为什么要尝试将两个学生集分配给猫，您应该将两个集合并为一个，然后将它们添加到猫中。

您可能还想明确设置您的获取类型，@ManyToMany(fetch = FetchType.LAZY) 或 FetchType.EAGER。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T21:20:42.657

也许一个更好的例子是：

```
`em.getTransaction().begin(); 
Student s = new Student(); 
Student s2 = new Student(); 
Cat c = new Cat(); 
em.persist(s); 
em.persist(s2);
em.persist(c); 
c.getStudents().add(s); 
c.getStudents().add(s2); 
em.getTransaction().commit();` 
```

 `然后试着说

```
`Cat c2 = em.find(Cat.class,c.getYID());
Student s3 = em.find(Student.class,s.getXID());
System.out.println(c2.getYID() + ": " + c2.getStudents());
System.out.println(s3.getXID() + ": " + s3.getCats());` 
```

`以上打印：`

 `1：{[[电影：movieID=2]，[电影：movieID=3]]}

2：{[]}

这对我来说毫无意义，因为 id=1 的猫在其集合中具有 id=2 的电影，但 id=2 的电影在其集合中没有 id=1 的猫。（更改级联类型似乎不会影响结果。）

非常感谢您的回复。

北京

# coldfusion - 是否可以针对组件类型和/或继承类型测试对象？

> ID：879388
> 
> 赞同：6
> 
> 时间：2009-05-18T19:34:35.350
> 
> 标签：coldfusion, cfc

> **更新：**根据答案，我最初选择了使用 IsInstanceOf() 的方法，它是为这种需要而设计的。然而，由于某种未知的原因，它被证明是极其低效的。后来在调试应用程序时，我最终只是在要使用的对象上设置了一些属性，而不是 IsInstanceOf，从而使速度提高了几个数量级。

我想做的是在 ColdFusion 中测试一个对象，看看它是什么类型的组件。就像是...

```
<cfif isValid( "compath.dog", currentObj)>
    ...do something specific with dog objects...
</cfif> 
```

我认为这是可能的，但收到一条错误消息，指出我传递的类型与有效类型列表中的类型不对应...

> 有效类型参数有：any、array、Boolean、date、numeric、query、string、struct、UUID、GUID、binary、integer、float、eurodate、time、creditcard、email、ssn、telephone、zipcode、url、regex、range 、组件或变量名。

有没有办法在 ColdFusion 中实现这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-18T19:56:54.447

您可以使用 GetMetaData 来查找类型。一些快速代码：

```
<cfif GetMetaData(currentObj).type eq "compath.dog"> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-18T22:53:41.190

您也可以使用 IsInstanceOf()。尽管您仍必须使用完整路径，但它也可用于确定继承或识别实现特定接口的组件。

```
<cfif IsInstanceOf(obj, "compath.Dog")>
   yes. it is a dog component {woof}
<cfelse>
    some other type of component 
</cfif>

<cfif IsInstanceOf(obj, "compath.AnimalInterface")>
     yes. it implements the animal interface
<cfelse>
     no. it must be vegetable or mineral ...
</cfif> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-18T21:10:36.857

您可以使用 getmetadata() 函数中的名称或全名。

```
<cfif GetMetaData(currentObj).name eq "compath.dog">
    ...do something specific with dog objects...
</cfif> 
```

或者

```
<cfif GetMetaData(currentObj).fullname eq "compath.dog">
    ...do something specific with dog objects...
</cfif> 
```

文档在这里[getmetadata()](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_e-g_50.html)关于 getmetadata() 根据对象类型返回的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-03-30T01:57:25.913

Dan，请随意从 MXUnit 中提取代码，这正是您需要做的。我们在 assertIsTypeOf() 断言中这样做。有关详细信息，请参见此处：[http ://code.google.com/p/mxunit/source/browse/mxunit/trunk/framework/MXUnitAssertionExtensions.cfc](http://code.google.com/p/mxunit/source/browse/mxunit/trunk/framework/MXUnitAssertionExtensions.cfc)

您看到 isInstanceOf() 性能下降的原因很可能与在 Application.cfc 中设置 this.customTagPaths 有关。我自己打了这个，最近提交了一个错误。希望它会在 CF10 中得到修复，无论何时。

# c# - LINQ .Any VS .Exists - 有什么区别？

> ID：879391
> 
> 赞同：459
> 
> 时间：2009-05-18T19:35:35.583
> 
> 标签：c#, linq, collections

在集合上使用 LINQ，以下代码行有什么区别？

```
if(!coll.Any(i => i.Value)) 
```

和

```
if(!coll.Exists(i => i.Value)) 
```

**更新 1**

当我反汇编`.Exists`时，它看起来像没有代码。

**更新 2**

有谁知道为什么这个没有代码？

* * *

## 回答 #1

> 赞同：460
> 
> 时间：2009-05-18T20:07:00.683

查看文档

[List.Exists](http://msdn.microsoft.com/en-us/library/bfed8bca.aspx)（对象方法 - MSDN）

> 确定 List(T) 是否包含与指定谓词定义的条件匹配的元素。

这从 .NET 2.0 开始就存在，所以在 LINQ 之前。旨在与 Predicate **delegate**一起使用，但 lambda 表达式是向后兼容的。此外，只有 List 有这个（甚至没有 IList）

[IEnumerable.Any](http://msdn.microsoft.com/en-us/library/bb534972.aspx)（扩展方法 - MSDN）

> 确定序列的任何元素是否满足条件。

这是 .NET 3.5 中的新功能，并使用 Func(TSource, bool) 作为参数，因此它旨在与 lambda 表达式和 LINQ 一起使用。

在行为上，它们是相同的。

* * *

## 回答 #2

> 赞同：215
> 
> 时间：2009-05-18T19:41:18.787

不同之处在于 Any 是`IEnumerable<T>`System.Linq.Enumerable 上定义的 any 的扩展方法。它可以在任何`IEnumerable<T>`实例上使用。

Exists 似乎不是扩展方法。我的猜测是 coll 是 type `List<T>`。If so Exists 是一个实例方法，其功能与 Any 非常相似。

**总之**，*方法基本相同。一个比另一个更通用。*

*   **Any**也有一个不带参数的重载，只是在可枚举中查找任何项目。
*   **Exists**没有这样的重载。

* * *

## 回答 #3

> 赞同：63
> 
> 时间：2015-11-30T13:39:38.233

**TLDR；** **性能方面`Any`似乎更慢**（如果我已正确设置它以几乎同时评估两个值）

```
 var list1 = Generate(1000000);
        var forceListEval = list1.SingleOrDefault(o => o == "0123456789012");
        if (forceListEval != "sdsdf")
        {
            var s = string.Empty;
            var start2 = DateTime.Now;
            if (!list1.Exists(o => o == "0123456789012"))
            {
                var end2 = DateTime.Now;
                s += " Exists: " + end2.Subtract(start2);
            }

            var start1 = DateTime.Now;
            if (!list1.Any(o => o == "0123456789012"))
            {
                var end1 = DateTime.Now;
                s +=" Any: " +end1.Subtract(start1);
            }

            if (!s.Contains("sdfsd"))
            {

            } 
```

测试列表生成器：

```
private List<string> Generate(int count)
    {
        var list = new List<string>();
        for (int i = 0; i < count; i++)
        {
            list.Add( new string(
            Enumerable.Repeat("ABCDEFGHIJKLMNOPQRSTUVWXYZ", 13)
                .Select(s =>
                {
                    var cryptoResult = new byte[4];
                    new RNGCryptoServiceProvider().GetBytes(cryptoResult);
                    return s[new Random(BitConverter.ToInt32(cryptoResult, 0)).Next(s.Length)];
                })
                .ToArray())); 
        }

        return list;
    } 
```

拥有 1000 万条记录

> “任何：00:00:00.3770377 存在：00:00:00.2490249”

拥有 500 万条记录

> “任何：00:00:00.0940094 存在：00:00:00.1420142”

拥有 100 万条记录

> “任何：00:00:00.0180018 存在：00:00:00.0090009”

使用 500k，（我还翻转了评估它们的顺序，以查看是否没有与先运行的任何一个相关的额外操作。）

> “存在：00:00:00.0050005 任何：00:00:00.0100010”

拥有 10 万条记录

> “存在：00:00:00.0010001 任何：00:00:00.0020002”

它似乎`Any`慢了 2 个数量级。

**编辑：**对于 5 和 10M 记录，我改变了它生成列表的方式，`Exists`突然变得比`Any`这意味着我测试的方式有问题。

新的测试机制：

```
private static IEnumerable<string> Generate(int count)
    {
        var cripto = new RNGCryptoServiceProvider();
        Func<string> getString = () => new string(
            Enumerable.Repeat("ABCDEFGHIJKLMNOPQRSTUVWXYZ", 13)
                .Select(s =>
                {
                    var cryptoResult = new byte[4];
                    cripto.GetBytes(cryptoResult);
                    return s[new Random(BitConverter.ToInt32(cryptoResult, 0)).Next(s.Length)];
                })
                .ToArray());

        var list = new ConcurrentBag<string>();
        var x = Parallel.For(0, count, o => list.Add(getString()));
        return list;
    }

    private static void Test()
    {
        var list = Generate(10000000);
        var list1 = list.ToList();
        var forceListEval = list1.SingleOrDefault(o => o == "0123456789012");
        if (forceListEval != "sdsdf")
        {
            var s = string.Empty;

            var start1 = DateTime.Now;
            if (!list1.Any(o => o == "0123456789012"))
            {
                var end1 = DateTime.Now;
                s += " Any: " + end1.Subtract(start1);
            }

            var start2 = DateTime.Now;
            if (!list1.Exists(o => o == "0123456789012"))
            {
                var end2 = DateTime.Now;
                s += " Exists: " + end2.Subtract(start2);
            }

            if (!s.Contains("sdfsd"))
            {

            }
        } 
```

**Edit2：**好的，为了消除生成测试数据的任何影响，我将其全部写入文件，现在从那里读取。

```
 private static void Test()
    {
        var list1 = File.ReadAllLines("test.txt").Take(500000).ToList();
        var forceListEval = list1.SingleOrDefault(o => o == "0123456789012");
        if (forceListEval != "sdsdf")
        {
            var s = string.Empty;
            var start1 = DateTime.Now;
            if (!list1.Any(o => o == "0123456789012"))
            {
                var end1 = DateTime.Now;
                s += " Any: " + end1.Subtract(start1);
            }

            var start2 = DateTime.Now;
            if (!list1.Exists(o => o == "0123456789012"))
            {
                var end2 = DateTime.Now;
                s += " Exists: " + end2.Subtract(start2);
            }

            if (!s.Contains("sdfsd"))
            {
            }
        }
    } 
```

10M

> “任何：00:00:00.1640164 存在：00:00:00.0750075”

5M

> “任何：00:00:00.0810081 存在：00:00:00.0360036”

1M

> “任何：00:00:00.0190019 存在：00:00:00.0070007”

500k

> “任何：00:00:00.0120012 存在：00:00:00.0040004”

[![在此处输入图像描述](https://i.stack.imgur.com/51o8f.png)](https://i.stack.imgur.com/51o8f.png)

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2016-09-27T09:17:59.297

作为[Matas](https://stackoverflow.com/questions/879391/linq-any-vs-exists-whats-the-difference/33999983#33999983)关于基准测试的答案的延续。

**TL/DR**：Exists() 和 Any() 同样快。

首先：使用 Stopwatch 进行基准测试并不精确（[请参阅 series0ne 对不同但相似的主题的回答](https://stackoverflow.com/a/14019738/3075917)），但它比 DateTime 精确得多。

获得真正精确读数的方法是使用性能分析。但是，了解这两种方法的性能如何相互衡量的一种方法是执行这两种方法的***加载***次数，然后比较每种方法的最快执行时间。这样一来，JITing 和其他噪音给我们带来不好的读数（*确实如此*）并不重要，因为从某种意义上说，这两种执行方式“*同样具有误导*性”。

```
static void Main(string[] args)
    {
        Console.WriteLine("Generating list...");
        List<string> list = GenerateTestList(1000000);
        var s = string.Empty;

        Stopwatch sw;
        Stopwatch sw2;
        List<long> existsTimes = new List<long>();
        List<long> anyTimes = new List<long>();

        Console.WriteLine("Executing...");
        for (int j = 0; j < 1000; j++)
        {
            sw = Stopwatch.StartNew();
            if (!list.Exists(o => o == "0123456789012"))
            {
                sw.Stop();
                existsTimes.Add(sw.ElapsedTicks);
            }
        }

        for (int j = 0; j < 1000; j++)
        {
            sw2 = Stopwatch.StartNew();
            if (!list.Exists(o => o == "0123456789012"))
            {
                sw2.Stop();
                anyTimes.Add(sw2.ElapsedTicks);
            }
        }

        long existsFastest = existsTimes.Min();
        long anyFastest = anyTimes.Min();

        Console.WriteLine(string.Format("Fastest Exists() execution: {0} ticks\nFastest Any() execution: {1} ticks", existsFastest.ToString(), anyFastest.ToString()));
        Console.WriteLine("Benchmark finished. Press any key.");
        Console.ReadKey();
    }

    public static List<string> GenerateTestList(int count)
    {
        var list = new List<string>();
        for (int i = 0; i < count; i++)
        {
            Random r = new Random();
            int it = r.Next(0, 100);
            list.Add(new string('s', it));
        }
        return list;
    } 
```

在执行上述代码 4 次之后（依次执行 1 000 次`Exists()`并`Any()`在包含 1 000 000 个元素的列表上），不难看出这些方法几乎同样快。

```
Fastest Exists() execution: 57881 ticks
Fastest Any() execution: 58272 ticks

Fastest Exists() execution: 58133 ticks
Fastest Any() execution: 58063 ticks

Fastest Exists() execution: 58482 ticks
Fastest Any() execution: 58982 ticks

Fastest Exists() execution: 57121 ticks
Fastest Any() execution: 57317 ticks 
```

有细微*的*差别，但差别太小，无法用背景噪音来解释。我的猜测是，如果一个人会做 10 000 或 100 000 次`Exists()`，`Any()`那么这种微小的差异会或多或少地消失。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-04-07T07:17:26.733

当您更正测量值时 - 如上所述：Any and Exists，并添加平均值 - 我们将获得以下输出：

```
Executing search Exists() 1000 times ... 
Average Exists(): 35566,023
Fastest Exists() execution: 32226 

Executing search Any() 1000 times ... 
Average Any(): 58852,435
Fastest Any() execution: 52269 ticks

Benchmark finished. Press any key. 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-05-18T19:46:44.250

此外，这仅在 Value 为 bool 类型时才有效。通常这与谓词一起使用。通常使用任何谓词来查找是否存在满足给定条件的任何元素。在这里，您只是在做一个从元素 i 到 bool 属性的映射。它将搜索其 Value 属性为 true 的“i”。完成后，该方法将返回 true。

# c# - 如何获得 IEnumerable Enumerable 中 T2 类的成员 使用Linq？（C＃）

> ID：879394
> 
> 赞同：1
> 
> 时间：2009-05-18T19:36:26.220
> 
> 标签：c#, .net, linq

假设我有：

```
 public class foobar
 {
    public int lorem;
    public int ipsum;
 }

 IEnumerable<foobar> items = new List<foobar>();
 items.add(new foobar(){lorem = 0, ipsum = 0};
 items.add(new foobar(){lorem = 1, ipsum = 1}; 
```

如何使用 Linq 获得“项目”中所有“lorem”的 IEnumerable？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T19:38:21.023

尝试以下

```
var allLorems = items.Select(x => x.lorem); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T19:41:06.603

我想你的意思是：

```
 List<foobar> items = new List<foobar>();
 items.Add(new foobar(){lorem = 0, ipsum = 0});
 items.Add(new foobar(){lorem = 1, ipsum = 1}); 
```

进而：

```
var lorems=from i in items select i.lorem; 
```

# c++ - C++：行为就像函数本身一样的函数包装器

> ID：879408
> 
> 赞同：19
> 
> 时间：2009-05-18T19:38:25.780
> 
> 标签：c++, function, wrapper, functional-programming, tr1

如何编写一个可以包装任何函数并且可以像函数本身一样被调用的包装器？

我需要这个的原因：我想要一个 Timer 对象，它可以包装一个函数并像函数本身一样运行，而且它记录所有调用的累积时间。

场景如下所示：

```
// a function whose runtime should be logged
double foo(int x) {
  // do something that takes some time ...
}

Timer timed_foo(&foo); // timed_foo is a wrapping fct obj
double a = timed_foo(3);
double b = timed_foo(2);
double c = timed_foo(5);
std::cout << "Elapsed: " << timed_foo.GetElapsedTime(); 
```

我该如何写这`Timer`门课？

我正在尝试这样的事情：

```
#include <tr1/functional>
using std::tr1::function;

template<class Function>
class Timer {

public:

  Timer(Function& fct)
  : fct_(fct) {}

  ??? operator()(???){
    // call the fct_,   
    // measure runtime and add to elapsed_time_
  }

  long GetElapsedTime() { return elapsed_time_; }

private:
  Function& fct_;
  long elapsed_time_;
};

int main(int argc, char** argv){
    typedef function<double(int)> MyFct;
    MyFct fct = &foo;
    Timer<MyFct> timed_foo(fct);
    double a = timed_foo(3);
    double b = timed_foo(2);
    double c = timed_foo(5);
    std::cout << "Elapsed: " << timed_foo.GetElapsedTime();
} 
```

（顺便说一句，我知道`gprof`还有其他用于分析运行时的工具，但是拥有这样一个`Timer`对象来记录一些选定函数的运行时对于我的目的来说更方便。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-18T20:29:05.820

基本上，您想要做的事情在当前的 C++ 中是不可能的。对于要包装的任意数量的函数，您需要通过

```
const reference
non-const reference 
```

但是它仍然不是完美的转发（一些边缘情况仍然存在），但它应该可以正常工作。如果您将自己限制为 const 引用，则可以使用这个（未经测试）：

```
template<class Function>
class Timer {
    typedef typename boost::function_types
       ::result_type<Function>::type return_type;

public:

  Timer(Function fct)
  : fct_(fct) {}

// macro generating one overload
#define FN(Z, N, D) \
  BOOST_PP_EXPR_IF(N, template<BOOST_PP_ENUM_PARAMS(N, typename T)>) \
  return_type operator()(BOOST_PP_ENUM_BINARY_PARAMS(N, T, const& t)) { \
      /* some stuff here */ \
      fct_(ENUM_PARAMS(N, t)); \
  }

// generate overloads for up to 10 parameters
BOOST_PP_REPEAT(10, FN, ~)
#undef FN

  long GetElapsedTime() { return elapsed_time_; }

private:
  // void() -> void(*)()
  typename boost::decay<Function>::type fct_;
  long elapsed_time_;
}; 
```

请注意，对于返回类型，您可以使用 boost 的函数类型库。然后

```
Timer<void(int)> t(&foo);
t(10); 
```

您还可以使用纯值参数重载，然后如果您想通过引用传递某些内容，请使用`boost::ref`. 这实际上是一种非常常见的技术，尤其是在要保存此类参数时（此技术也用于`boost::bind`）：

```
// if you want to have reference parameters:
void bar(int &i) { i = 10; }

Timer<void(int&)> f(&bar);
int a; 
f(boost::ref(a)); 
assert(a == 10); 
```

或者，您可以如上所述为 const 和非 const 版本添加这些重载。查看[Boost.Preprocessor](http://www.boost.org/doc/libs/1_39_0/libs/preprocessor/doc/index.html)以了解如何编写正确的宏。

您应该意识到，如果您希望能够传递任意可调用对象（不仅仅是函数），整个事情将会变得更加困难，因为您需要一种方法来获取它们的结果类型（这并不那么容易）。C++1x 将使这种事情变得更容易。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-18T20:13:36.833

这是包装函数的*简单方法。*

```
template<typename T>
class Functor {
  T f;
public:
  Functor(T t){
      f = t;
  }
  T& operator()(){
    return f;
  }
};

int add(int a, int b)
{
  return a+b;
}

void testing()
{
  Functor<int (*)(int, int)> f(add);
  cout << f()(2,3);
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-18T21:07:55.943

我假设您出于测试目的需要它，并且不会将它们用作真正的代理或装饰器。所以你不需要使用 operator() 并且可以使用任何其他更不方便的调用方法。

```
template <typename TFunction>
class TimerWrapper
{
public:
    TimerWrapper(TFunction function, clock_t& elapsedTime):
        call(function),
        startTime_(::clock()),
        elapsedTime_(elapsedTime)
    {
    }

    ~TimerWrapper()
    {
        const clock_t endTime_ = ::clock();
        const clock_t diff = (endTime_ - startTime_);
        elapsedTime_ += diff;
    }

    TFunction call;
private:
    const clock_t startTime_;
    clock_t& elapsedTime_;
};

template <typename TFunction>
TimerWrapper<TFunction> test_time(TFunction function, clock_t& elapsedTime)
{
    return TimerWrapper<TFunction>(function, elapsedTime);
} 
```

所以要测试你的一些函数，你应该只使用`test_time`函数而不是直接`TimerWrapper`结构

```
int test1()
{
    std::cout << "test1\n";
    return 0;
}

void test2(int parameter)
{
    std::cout << "test2 with parameter " << parameter << "\n";
}

int main()
{
    clock_t elapsedTime = 0;
    test_time(test1, elapsedTime).call();
    test_time(test2, elapsedTime).call(20);
    double result = test_time(sqrt, elapsedTime).call(9.0);

    std::cout << "result = " << result << std::endl;
    std::cout << elapsedTime << std::endl;

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-05-29T02:31:16.927

如果您查看包含的 std::tr1::function 的实现，您可能会找到答案。

在 c++11 中，std:: 函数是用可变参数模板实现的。使用此类模板，您的计时器类可能看起来像

```
template<typename>
class Timer;

template<typename R, typename... T>
class Timer<R(T...)>
{
    typedef R (*function_type)(T...);

    function_type function;
public:
    Timer(function_type f)
    {
        function = f;
    }

    R operator() (T&&... a)
    {
        // timer starts here
        R r = function(std::forward<T>(a)...);
        // timer ends here
        return r;
    }
};

float some_function(int x, double y)
{
    return static_cast<float>( static_cast<double>(x) * y );
}

Timer<float(int,double)> timed_function(some_function); // create a timed function

float r = timed_function(3,6.0); // call the timed function 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-19T05:10:32.373

Stroustrup 展示了一种函数包装器（注入）技能，可重载`operator->`. 关键思想是：`operator->`会重复调用，直到遇到原生指针类型，所以让我们`Timer::operator->`返回一个临时对象，临时对象返回它的指针。然后会发生以下情况：

1.  创建了临时 obj（称为 ctor）。
2.  调用的目标函数。
3.  temp obj 已破坏（调用 dtor）。

您可以在 ctor 和 dtor 中注入任何代码。像这样。

```
template < class F >
class Holder {
public:
    Holder  (F v) : f(v) { std::cout << "Start!" << std::endl ; }
    ~Holder ()           { std::cout << "Stop!"  << std::endl ; }
    Holder* operator->() { return this ; }
    F f ;
} ;

template < class F >
class Timer {
public:
    Timer ( F v ) : f(v) {}
    Holder<F> operator->() { Holder<F> h(f) ; return h ; }
    F f ;
} ;

int foo ( int a, int b ) { std::cout << "foo()" << std::endl ; }

int main ()
{
    Timer<int(*)(int,int)> timer(foo) ;
    timer->f(1,2) ;
} 
```

实施和使用都很容易。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-01-31T14:18:34.060

使用宏和模板的解决方案：例如你想换行

```
double foo( double i ) { printf("foo %f\n",i); return i; }
double r = WRAP( foo( 10.1 ) ); 
```

在调用 foo() 之前和之后，应该调用包装函数 beginWrap() 和 endWrap()。（endWrap() 是一个模板函数。）

```
void beginWrap() { printf("beginWrap()\n"); }
template <class T> T endWrap(const T& t) { printf("endWrap()\n"); return t; } 
```

宏

```
#define WRAP(f) endWrap( (beginWrap(), f) ); 
```

使用逗号运算符的优先级来确保首先调用 beginWrap()。f 的结果被传递给 endWrap() ，它只是返回它。所以输出是：

```
beginWrap()
foo 10.100000
endWrap() 
```

结果 r 包含 10.1。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-18T19:51:53.867

我不太清楚你在看什么。但是，对于给定的例子，它很简单：

```
void operator() (int x)
{
   clock_t start_time = ::clock();    // time before calling
   fct_(x);                           // call function
   clock_t end_time = ::clock();      // time when done

   elapsed_time_ += (end_time - start_time) / CLOCKS_PER_SEC;
} 
```

*注意：这将以秒为单位测量时间。如果您想拥有高精度计时器，您可能必须检查操作系统的特定功能（如Windows 上的[GetTickCount](http://msdn.microsoft.com/en-us/library/ms724408(VS.85).aspx)或[QueryPerformanceCounter](http://msdn.microsoft.com/en-us/library/ms644904(VS.85).aspx)）。*

如果你想拥有一个通用的函数包装器，你应该看看[Boost.Bind](http://www.boost.org/doc/libs/1_39_0/libs/bind/bind.html)这将有很大帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-18T19:53:46.840

如果您希望创建一个可以包装和调用任意函数的泛型类，那么您将面临巨大的挑战。在这种情况下，您必须使仿函数（operator()）返回 double 并将 int 作为参数。然后，您创建了一系列可以调用具有相同签名的所有函数的类。只要您想添加更多类型的函数，就需要更多该签名的函子，例如

```
MyClass goo(double a, double b)
{
   // ..
}

template<class Function>
class Timer {

public:

  Timer(Function& fct)
  : fct_(fct) {}

  MyClass operator()(double a, double b){

  }

}; 
```

编辑：一些拼写错误

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-18T20:52:59.657

如果您的编译器支持可变参数宏，我会试试这个：

```
class Timer {
  Timer();// when created notes start time
  ~ Timer();// when destroyed notes end time, computes elapsed time 
}

#define TIME_MACRO(fn, ...) { Timer t; fn(_VA_ARGS_); } 
```

所以，要使用它，你可以这样做：

```
void test_me(int a, float b);

TIME_MACRO(test_me(a,b)); 
```

这是即兴的，您需要尝试让返回类型起作用（我认为您必须在 TIME_MACRO 调用中添加一个类型名称，然后让它生成一个临时变量）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-18T19:52:36.517

在 C++ 中，函数是一等公民，您可以从字面上将函数作为值传递。

由于您希望它采用 int 并返回双精度：

```
Timer(double (*pt2Function)(int input)) {... 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-18T20:30:08.500

这是我的做法，使用函数指针而不是模板：

```
// pointer to a function of the form:   double foo(int x);
typedef double  (*MyFunc) (int);

// your function
double foo (int x) {
  // do something
  return 1.5 * x;
}

class Timer {
 public:

  Timer (MyFunc ptr)
    : m_ptr (ptr)
  { }

  double operator() (int x) {
    return m_ptr (x);
  }

 private:
  MyFunc m_ptr;
}; 
```

我将其更改为不引用函数，而只是一个普通的函数指针。用法保持不变：

```
 Timer t(&foo);
  // call function directly
  foo(i);
  // call it through the wrapper
  t(i); 
```

# linq - 实体框架 - “无法创建‘闭包类型’类型的常量值...”错误

> ID：879411
> 
> 赞同：79
> 
> 时间：2009-05-18T19:40:40.940
> 
> 标签：linq, entity-framework

为什么我会收到错误消息：

> 无法创建“闭包类型”类型的常量值。此上下文仅支持原始类型（例如 Int32、String 和 Guid）。

当我尝试枚举以下 Linq 查询时？

```
IEnumerable<string> searchList = GetSearchList();
using (HREntities entities = new HREntities())
{
   var myList = from person in entities.vSearchPeople
   where upperSearchList.All( (person.FirstName + person.LastName) .Contains).ToList();
} 
```

**更新**：如果我尝试以下只是试图隔离问题，我会得到同样的错误：

```
where upperSearchList.All(arg => arg == arg) 
```

所以看起来问题出在 All 方法上，对吧？有什么建议么？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2009-05-18T20:33:40.723

看起来您正在尝试执行相当于“WHERE...IN”条件的操作。查看[如何使用 LINQ to Entities 编写“WHERE IN”样式查询，以](https://docs.microsoft.com/en-us/archive/blogs/alexj/tip-8-how-to-write-where-in-style-queries-using-linq-to-entities)获取有关如何使用 LINQ to Entities 执行该类型查询的示例。

另外，我认为错误消息在这种情况下特别无用，因为`.Contains`后面没有括号，这会导致编译器将整个谓词识别为 lambda 表达式。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2011-12-08T01:00:06.530

在过去的 6 个月里，我一直在与 EF 3.5 的这个限制作斗争，虽然我不是世界上最聪明的人，但我很确定我可以在这个主题上提供一些有用的东西。

通过增长 50 英里高的“OR 样式”表达式树生成的 SQL 将导致糟糕的查询执行计划。我正在处理几百万行，影响很大。

如果您只是通过 id 查找一堆实体，我发现有一个小技巧可以帮助您执行 SQL 'in'：

```
private IEnumerable<Entity1> getByIds(IEnumerable<int> ids)
{
    string idList = string.Join(",", ids.ToList().ConvertAll<string>(id => id.ToString()).ToArray());
    return dbContext.Entity1.Where("it.pkIDColumn IN {" + idList + "}");
} 
```

其中 pkIDColumn 是 Entity1 表的主键 id 列名。

但请继续阅读！

This is fine, but it requires that I already have the ids of what I need to find. Sometimes I just want my expressions to reach into other relations and what I do have is criteria for those connected relations.

If I had more time I would try to represent this visually, but I don't so just study this sentence a moment: Consider a schema with a Person, GovernmentId, and GovernmentIdType tables. Andrew Tappert (Person) has two id cards (GovernmentId), one from Oregon (GovernmentIdType) and one from Washington (GovernmentIdType).

Now generate an edmx from it.

Now imagine you want to find all the people having a certain ID value, say 1234567.

This can be accomplished with a single database hit with this:

```
dbContext context = new dbContext();
string idValue = "1234567";
Expression<Func<Person,bool>> expr =
    person => person.GovernmentID.Any(gid => gid.gi_value.Contains(idValue));

IEnumerable<Person> people = context.Person.AsQueryable().Where(expr); 
```

Do you see the subquery here? The generated sql will use 'joins' instead of sub-queries, but the effect is the same. These days SQL server optimizes subqueries into joins under the covers anyway, but anyway...

The key to this working is the .Any inside the expression.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-05-09T13:15:35.577

I have found the cause of the error (I am using Framework 4.5). The problem is, that EF a complex type, that is passed in the "Contains"-parameter, can not translate into an SQL query. EF can use in a SQL query only simple types such as int, string...

```
this.GetAll().Where(p => !assignedFunctions.Contains(p)) 
```

GetAll provides a list of objects with a complex type (for example: "Function"). So therefore, I would try here to receive an instance of this complex type in my SQL query, which naturally can not work!

If I can extract from my list, parameters which are suited to my search, I can use:

```
var idList = assignedFunctions.Select(f => f.FunctionId);
this.GetAll().Where(p => !idList.Contains(p.FunktionId)) 
```

Now EF no longer has the complex type "Function" to work, but eg with a simple type (long). And that works fine!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-02T06:56:27.343

I got this error message when my array object used in the .All function is null After I initialized the array object, (upperSearchList in your case), the error is gone The error message was misleading in this case

where upperSearchList.All(arg => person.someproperty.StartsWith(arg)))

# macos - 将 MAC 字体移动到 PC - 如何？

> ID：879412
> 
> 赞同：1
> 
> 时间：2009-05-18T19:40:52.593
> 
> 标签：macos, fonts

这在很多场合都是一个相当有问题的问题。我们有很多设计师使用 Mac 进行设计和基于那里的字体，但是当我们需要在 PC 上查看设计时，字体不存在。

我想知道是否有人知道将字体从 MAC OS X 移动/复制到 PC (Windows) 的相当有效且轻松的方法。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T19:51:06.113

如果您愿意付款，这似乎是一个解决方案：

[交叉字体](http://www.asy.com/)

如果免费更好，我会试试这个：

[字体文员](http://www.tucows.com/preview/204310)

# javascript - 对 JavaScript 表单构建器的建议？

> ID：879414
> 
> 赞同：30
> 
> 时间：2009-05-18T19:41:13.700
> 
> 标签：javascript, javascript-framework

我正在寻找将表单构建器集成到我正在使用的网站中，但我希望找到一个具有我正在寻找的部分或大部分功能的库。

我正在寻找一个库，它会给我一个很好的 GUI 来构建表单，以及一个我可以在`django`后端使用的 JSON（或 XML，或类似的）输出。我打算用来`django`输出完成的表格。

我尝试通过 Google 运行此程序，但这只会产生通过在线创建和托管表单来开展业务的公司。但是没有图书馆的形式。

有什么建议么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-09T13:27:56.950

我也有同样的要求

我会随着时间的推移更新这个答案，但引导表单生成器（ PHP ）看起来不错

[https://github.com/minikomi/Bootstrap-Form-Builder](https://github.com/minikomi/Bootstrap-Form-Builder) 演示： http: [//minikomi.github.io/Bootstrap-Form-Builder/](http://minikomi.github.io/Bootstrap-Form-Builder/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-27T02:35:15.197

如果你不介意花一点现金，你可以看看：

Machforms： http: [//www.appnitro.com/](http://www.appnitro.com/)

表单构建器本身完全是客户端 JS，因此您只需将输出（即 JSON）发布到 django 而不是他们的 php 脚本。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-09-16T22:13:27.970

一个刚刚弹出的新 JS 库可能是您正在寻找的：[http ://dobtco.github.io/formbuilder/](http://dobtco.github.io/formbuilder/)

项目页面：[https ://github.com/dobtco/formbuilder](https://github.com/dobtco/formbuilder)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-02-27T22:31:17.590

这里有一些：

[http://code.google.com/p/jquery-form-b​​uilder-plugin/](http://code.google.com/p/jquery-form-builder-plugin/)

[https://github.com/stas/jquery.formbuilder](https://github.com/stas/jquery.formbuilder)

您还可以查看：

[http://wordpress.org/extend/plugins/visual-form-b​​uilder/](http://wordpress.org/extend/plugins/visual-form-builder/)

[http://wordpress.org/extend/plugins/formbuilder/](http://wordpress.org/extend/plugins/formbuilder/)

[http://wordpress.org/extend/plugins/form/](http://wordpress.org/extend/plugins/form/)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-09-13T06:25:09.963

不确定 Django 的部分，因为我还没有使用它，但你可能想看看 AlpacaJS：[http ://www.alpacajs.org/](http://www.alpacajs.org/)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-05-27T04:40:17.190

我会推荐很棒的[ExtJS 框架](http://www.extjs.com)来构建这样的应用程序。这是一个例子。

[分机/表单生成器](http://tof2k.com/ext/formbuilder/)

添加一个表单面板，然后放置一个文本框等等......非常简单。Ext JS 2.2 和 3.0（尚未准备好）已获得 LGPL 和 GPL 许可，您也有商业订阅，我认为值得一看。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-10-02T10:21:02.297

[SpiffForm](https://github.com/knipknap/SpiffForm)类似于 Appnitro，但免费 (AGPL)，也许它适合您的需求。

欢迎使用补丁:-)。（我是作者。）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-19T00:15:11.417

去年有一个 google Summer Of Code 项目，它使用 Dojo JavaScript 工具包构建了一个拖放表单编辑器。就我猜你想要的功能而言，它并不是 100% 完整的。

它确实转储了一个 javascript 对象，表示您可以将其转换为 JSON 以通过网络发送的表单。

根据你的 JavaScript 技能组合，它应该能让你在问题上领先一步。

演示在这里：http: [//jbalogh.dojotoolkit.org/dojo-svn/release/dojo/soc/test.html](http://jbalogh.dojotoolkit.org/dojo-svn/release/dojo/soc/test.html)

工作人员的博客文章：http: [//www.dojotoolkit.org/blog/jbalogh](http://www.dojotoolkit.org/blog/jbalogh)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-18T23:34:48.160

我不认为那里有任何与您想要的完全一样的东西。最接近的可能是富文本编辑器，例如 FCKEditor 或 TinyMCE。这些库有点像您在 StackOverflow 中用来编写问题的 UI，除了它们具有用于不同 FORM 元素的工具栏按钮（或者如果它们没有，您可以轻松地自己添加它们）。

面对这些编辑器之一的用户（假设您已将其配置为具有 FORM 元素的按钮）将能够在基本上没有技术知识的情况下布置表单。

但是，如果富文本编辑器不适合您，那么您基本上只能使用 jQuery UI 库（我主要考虑 Draggable 子库）来构建自己的解决方案。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-19T00:22:15.147

这取决于您是否准备好自己编程。你想要多动态？如果您想走这条路，使用[GWT](http://code.google.com/webtoolkit/overview.html)、[Dojo](http://www.dojotoolkit.org/)或[your-favorite-js-library 编写](http://www.prototypejs.org/)一个简单的表单构建器应该不会太难。我推荐 GWT，因为它真的很有趣，使用简单，并且可以解决浏览器之间的不兼容问题。

以下是对每个表格/问题的可能输入的一些想法：

*   单行（用于名称等）
*   RichTextArea（类似于 FCKEditor）
*   日历日期/时间
*   多项选择（复选框）
*   单选（列表选择器）

每个输入都需要一个相应的问题或标签。这些需要在 Django 中的模型中处理，并在表单视图（和编辑器）中表示。

我建议您查看[如何将 GWT 应用程序嵌入到现有模板/html](http://groups.google.com/group/Google-Web-Toolkit/browse_thread/thread/a3c335df1a78a097/b05dcb72aad0166d?lnk=gst&q=gwt+django#b05dcb72aad0166d)以及如何[使用 json 在 django 和 GWT 之间进行通信](http://groups.google.com/group/Google-Web-Toolkit/browse_thread/thread/ebf9e4857f0db7a2/eb393866cad61384?lnk=gst&q=hannson#eb393866cad61384)

希望这可以帮助，

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-01-13T12:13:37.890

如果你使用的是 JSF，你可以使用这个 formbuilder 组件：

[http://code.google.com/p/jsf-form-b​​uilder/](http://code.google.com/p/jsf-form-builder/)

此处提供演示：

[http://www.reppe-itsolutions.at/jsf-form-b​​uilder/](http://www.reppe-itsolutions.at/jsf-form-builder/)

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2009-05-18T20:57:05.107

也许这不是正确的答案，但还是看看吧，它太棒了：你在 Java 服务器上放置了一些非常**清晰易读的代码，你就得到了一个完整的 AJAX /Javascript 表单。**看看[这里](http://echo.nextapp.com/site/demo)的演示。
我发誓这真的，**真的**很棒。

奥利维尔

# drupal - Drupal 站点 - 内存缓存连接错误

> ID：879417
> 
> 赞同：3
> 
> 时间：2009-05-18T19:41:24.947
> 
> 标签：drupal, timeout, memcached

我们正在调整我们的 drupal 站点。我们正在使用 Siege 来衡量性能（作为 drupal 访问者）。

环境：Nginx + FastCGI+ Memcache

Siege 运行良好几秒钟，然后我们遇到连接错误： 示例：

```
HTTP/1.1 200  29.18 secs:    5877 bytes ==> /
HTTP/1.1 200  29.39 secs:    5877 bytes ==> /
warning: socket: -1656235120 select timed out: Connection timed out
warning: socket: -1673020528 select timed out: Connection timed out 
```

使用相同的 Siege 测试配置，Nginx + FastCGI+ Drupal Cache 似乎工作正常。例子：

```
HTTP/1.1 200   1.41 secs:    5868 bytes ==> /
HTTP/1.1 200   1.40 secs:    5868 bytes ==> / 
```

如您所见，除了连接错误之外，使用 MemCache 的响应时间要长得多。

知道这里可能出了什么问题......以及为什么 Drupal 在加载内存缓存时会抛出错误？

Memcache 在单独的实例上运行。为 MemCache 分配 2GB 内存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T22:43:14.300

我**猜**你的 memcached 连接用完了。请每秒使用一个简单的脚本检查您的 memcached 安装。然后开始围攻。我猜您的 memcached 会在一段时间后停止响应。

测试 memcache php 脚本：

```
<?php
 $memcache = new Memcache;
 $memcache->connect('localhost', 11211) or die ('Unable to connect');
 $version = $memcache->getVersion();
 echo 'Server version: '.$version;
?> 
```

我**猜**正在发生的是您没有禁用 memcache 中的持久连接，它们在 php 线程中徘徊。Memcached 一次可以服务约 1023 个，而在 Sieging 时这可能还不够。

您也可以尝试使用**[ab](http://pwet.fr/man/linux/administration_systeme/ab)**、 apache 基准测试工具，仔细查看`-c`开关。玩弄它，看看结果如何在不同的值上变化。

最后，您应该`tcpdump`在 php 机器上的您的 memcached 端口（通常为 11211）上运行 a，以了解连接发生了什么。drupal会启动它们吗？其他主机是否以 RST 响应或超时？

memcached php 文档 api 中有一个错误，表示默认情况下连接是非持久的。默认情况下它们**是**持久的（嗯，它们在我遇到问题的时候）。

随意评论这个答案，我会阅读评论并在必要时提供进一步帮助。

# flash - 加快或降低动作脚本中的音频速度？

> ID：879426
> 
> 赞同：0
> 
> 时间：2009-05-18T19:43:03.040
> 
> 标签：flash, actionscript-3

我找不到使用动作脚本（或 Flash 中的任何其他方式）加快或降低音频速度（音高）的方法。可能吗？

我想制作一个小型 DJ 游戏，可以控制上传的 mp3 从 15% 加速或减速。关于如何实现它的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T19:56:56.133

我在音频方面并不出色，但我认为你这样做的方式是操纵声音的 ByteArray：

这里有一个例子：

[http://www.kelvinluck.com/2008/11/first-steps-with-flash-10-audio-programming/](http://www.kelvinluck.com/2008/11/first-steps-with-flash-10-audio-programming/)

我还建议看看 Andre Michelle 的东西（[http://blog.andre-michelle.com/](http://blog.andre-michelle.com/)）

# php - 在处理大型项目时保持一致

> ID：879428
> 
> 赞同：0
> 
> 时间：2009-05-18T19:43:25.613
> 
> 标签：php, design-patterns, environment

可能有点跑题了，但我真的很想从具有不同经验和背景的其他人那里了解它。

您如何跟踪您的大型项目？你使用颠覆吗？EER 模型？你会写笔记吗？您是否对 phpdoc 充满信心？您使用哪种框架，遵循哪种设计模式？很多问题，我知道，我不希望你回答所有问题，只要总结你最想强调的。

就个人而言，我使用 subversion 进行源代码控制、phpdoc、为每个模型/控制器等写下个人笔记，而且我几乎总是遵循 MVC 模式。

有一个美妙而自动的一天！;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T19:48:59.487

我建议使用最适合您拥有的人的工具，以及可能最难管理的部分。

如果您有很多需求，请使用能够很好地跟踪需求的工具。

如果您有很多简单的一次性项目，那么简单的项目跟踪可能效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T20:13:00.623

记录您的项目（尤其是高级内容）的一个好方法是拥有一个 wiki。这显然完全取决于你的队友。如果他们讨厌写散文，那么整个想法基本上从一开始就注定了。但如果有合适的人，它*真的*可以得到回报。一些带有几个图表的 wiki 页面可以走很长的路，而且通常比任何 UML 图表和你有什么（当然，两者的结合更好:-) 如果你能让你的测试人员和其他人的加入，你有了一个良好的开端。多多益善。

您在帖子中忘记提及的一件事是错误跟踪器。这绝对是必备的，我相信 Joel 有一些很好的提示，哪些是那里最好的软件选择；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T12:37:29.937

您应该使用错误跟踪软件来记录每个问题是如何解决的，并将其绑定到您的 Subversion 存储库，以便您可以看到生成签入的问题，反之亦然。我们自己使用[Fogbugz](http://www.fogcreek.com/FogBugz/)。

# api - 最佳实践 - 是否存储 Twitter 凭据？

> ID：879430
> 
> 赞同：3
> 
> 时间：2009-05-18T19:43:45.613
> 
> 标签：api, twitter, credentials

我希望能够让我的用户能够在我的网站上的个人资料中显示他们最近的推文。

我有一个 PHP twitter 包装器并了解如何进行 API 调用等，但我只是想知道如何管理用户信息。

**这里的最佳做法是什么？**我希望他们能够一次输入他们的凭据，但我想自己存储每个人的用户名/密码并不是最好的方法。

*   有没有办法进行一次经过身份验证的调用，并让 Twitter 记住它？
*   我应该存储用户名/密码，然后在显示推文时拨打电话吗？

这里的任何建议都会很棒。

谢谢，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-18T19:47:19.740

使用 OAuth，无需向用户询问密码：

[http://apiwiki.twitter.com/Authentication](http://apiwiki.twitter.com/Authentication)

我认为每个人都会/应该可能同意存储 twitter 用户名/密码是不好的，我不敢相信他们曾经创造过你需要它的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-18T19:49:11.813

您**永远不**应该存储任何类型的未加密凭据。如果您的解决方案涉及保留纯文本密码，即使是很短的时间，您也需要重新设计一些东西。

绝对的最佳做法是自己不保存任何信息 - 使用 cookie 或 OAuth 来处理您的身份验证。用户可以随意禁用会话令牌或 cookie，从而使他们能够控制您网站的行为。

下一个最好的事情（尽管仍然很不受欢迎）是保存不可逆加密的凭据，以便在您需要显示推文时重新发送到 Twitter。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-18T19:49:46.210

您不需要他们的密码来拉取他们最新的推文，除非他们的个人资料被锁定，只需从[http://twitter.com/statuses/user_timeline/](http://twitter.com/statuses/user_timeline/) *username* .rss拉取提要

您应该查看 Twitter 的[OAUTH 支持](http://apiwiki.twitter.com/OAuth-FAQ)（尽管他们已[禁用它](http://blog.twitter.com/2009/04/whats-deal-with-oauth.html)）。这使您能够提示用户一次，然后存储来自 twitter 的响应，这将允许您发布

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T19:48:30.270

无论如何，您希望在您的网站上发布的推文通常都是公开的。

如果您*确实*需要代表用户在某处进行身份验证（可能允许用户发送*新*推文），最佳实践是在您最初进行身份验证时提示用户，然后存储资源返回的任何身份验证令牌而不是凭据用来得到它。

# algorithm - 生成算法和判别算法有什么区别？

> ID：879432
> 
> 赞同：645
> 
> 时间：2009-05-18T19:44:45.220
> 
> 标签：algorithm, machine-learning, generative

**生成**算法和 **判别**算法有什么区别？

* * *

## 回答 #1

> 赞同：902
> 
> 时间：2009-05-18T20:18:54.263

假设您有输入数据`x`，并且您想将数据分类为标签`y`。生成模型学习**联合**概率分布`p(x,y)`，而判别模型学习**条件**概率分布`p(y|x)`——您应该将其理解为“*给定**的概率”`y``x`*。

这是一个非常简单的例子。假设您在表单中有以下数据`(x,y)`：

`(1,0), (1,0), (2,0), (2, 1)`

`p(x,y)`是

```
 y=0   y=1
     -----------
x=1 | 1/2   0
x=2 | 1/4   1/4 
```

`p(y|x)`是

```
 y=0   y=1
     -----------
x=1 | 1     0
x=2 | 1/2   1/2 
```

如果你花几分钟盯着这两个矩阵，你就会明白这两个概率分布之间的区别。

分布`p(y|x)`是将给定示例分类`x`为一类的自然分布`y`，这就是为什么直接对其建模的算法称为判别算法。生成算法模型`p(x,y)`，可以通过应用贝叶斯规则转化为`p(y|x)`，然后用于分类。但是，分发`p(x,y)`也可以用于其他目的。例如，您可以`p(x,y)`用来*生成*可能的`(x,y)`配对。

从上面的描述中，您可能会认为生成模型更普遍有用，因此更好，但事实并非如此简单。[这篇论文](http://papers.nips.cc/paper/2020-on-discriminative-vs-generative-classifiers-a-comparison-of-logistic-regression-and-naive-bayes.pdf)是关于判别式与生成式分类器主题的非常受欢迎的参考资料，但它的内容非常繁重。总体要点是判别模型在分类任务中通常优于生成模型。

* * *

## 回答 #2

> 赞同：308
> 
> 时间：2009-12-05T00:41:23.793

**生成算法**对如何生成数据进行建模，以便对信号进行分类。它提出了一个问题：根据我的生成假设，哪个类别最有可能生成此信号？

**判别算法**不关心数据是如何生成的，它只是对给定的信号进行分类。

* * *

## 回答 #3

> 赞同：169
> 
> 时间：2011-10-14T02:36:14.163

想象一下，您的任务是将语音分类为一种语言。

您可以通过以下任一方式进行：

1.  学习每种语言，然后使用您刚刚获得的知识对其进行分类

或者

2.  在不学习语言的情况下确定语言模型的差异，然后对语音进行分类。

第一个是**生成**方法，第二个是**判别**方法。

查看此参考以获取更多详细信息：[http](http://www.cedar.buffalo.edu/~srihari/CSE574/Discriminative-Generative.pdf) ://www.cedar.buffalo.edu/~srihari/CSE574/Discriminative-Generative.pdf 。

* * *

## 回答 #4

> 赞同：142
> 
> 时间：2013-02-28T14:06:23.250

在实践中，模型的使用如下。

在**判别模型**`y`中，要从训练示例中预测标签`x`，您必须评估：

![在此处输入图像描述](https://i.stack.imgur.com/loiUt.gif)

它只是选择最有可能`y`考虑的类`x`。就像我们试图对**类之间的决策边界进行建模**一样。这种行为在神经网络中非常明显，其中计算的权重可以看作是在空间中隔离类元素的复杂形状的曲线。

现在，使用贝叶斯规则，让我们![在此处输入图像描述](https://i.stack.imgur.com/nheag.gif)将等式中的 替换为![在此处输入图像描述](https://i.stack.imgur.com/qU3aV.gif)。由于您只对*arg max*感兴趣，因此您可以消除分母，这对于每个 都是相同的`y`。所以，你只剩下

![在此处输入图像描述](https://i.stack.imgur.com/27V7I.gif)

这是您在**生成模型**中使用的方程。

在第一种情况下，您*有条件概率分布* `p(y|x)`，它模拟了类之间的边界，而在第二种情况下，您有*联合概率分布* `p(x, y)`，因为`p(x | y) p(y) = p(x, y)`，它**明确地模拟了每个类的实际分布**。

使用联合概率分布函数，给定 a `y`，您可以计算（“生成”）其各自的`x`。因此，它们被称为“生成”模型。

* * *

## 回答 #5

> 赞同：99
> 
> 时间：2017-03-08T08:44:42.087

这是 CS299（Andrew Ng 撰写）[讲义](http://cs229.stanford.edu/notes/cs229-notes2.pdf)中与该主题相关的最重要部分，它*确实*帮助我理解了**判别式**和**生成**式学习算法之间的区别。

假设我们有两类动物，大象 ( `y = 1`) 和狗 ( `y = 0`)。**x**是动物的特征向量。

给定一个训练集，逻辑回归或感知器算法（基本上）试图找到一条直线——即决策边界——将大象和狗分开。然后，为了将新动物分类为大象或狗，它检查它落在决策边界的哪一侧，并据此做出预测。我们将这些称为**判别学习算法**。

这是一种不同的方法。首先，看大象，我们可以建立一个大象长什么样的模型。然后，看看狗，我们可以建立一个单独的模型来了解狗的样子。最后，为了对新动物进行分类，我们可以将新动物与大象模型进行匹配，并将其与狗模型进行匹配，看看新动物看起来更像大象还是更像我们在训练集中看到的狗. 我们称这些**生成学习算法**。

* * *

## 回答 #6

> 赞同：46
> 
> 时间：2018-09-19T18:45:32.210

下表总结了不同的模型： [![在此处输入图像描述](https://i.stack.imgur.com/Xrmqg.png)](https://i.stack.imgur.com/Xrmqg.png)

图片来源：[监督学习备忘单——Stanford CS 229（机器学习）](https://stanford.edu/%7Eshervine/teaching/cs-229/cheatsheet-supervised-learning)

* * *

## 回答 #7

> 赞同：33
> 
> 时间：2011-03-16T10:52:40.020

一般来说，机器学习社区有一种做法，就是不要学习你不想学习的东西。例如，考虑一个分类问题，其中一个人的目标是将 y 标签分配给给定的 x 输入。如果我们使用生成模型

```
p(x,y)=p(y|x).p(x) 
```

我们必须对与手头的任务无关的 p(x) 进行建模。数据稀疏等实际限制将迫使我们`p(x)`使用一些弱独立性假设进行建模。因此，我们直观地使用判别模型进行分类。

* * *

## 回答 #8

> 赞同：23
> 
> 时间：2019-12-17T13:40:39.577

# 简短的回答

这里的许多答案都依赖于广泛使用的数学定义 [1]：

> *   判别模型直接学习条件预测分布`p(y|x)`。
> *   生成模型学习联合分布`p(x,y)`（或者更确切地说，`p(x|y)`和`p(y)`）。
>     *   `p(y|x)`可以使用贝叶斯规则获得预测分布。

虽然非常有用，但这个**狭义的定义**假设了有监督的设置，并且在检查无监督或半监督方法时不太方便。它**也不适用于许多当代深度生成建模方法**。例如，现在我们有隐式生成模型，例如生成对抗网络 (GAN)，它们是基于采样的，甚至不显式建模概率密度`p(x)`（而是通过鉴别器网络学习散度度量）。但我们称它们为“生成模型”，因为它们用于生成（高维 [10]）样本。

一个**更广泛和更基本的定义**[2] 似乎同样适合这个一般问题：

> *   判别模型学习类之间的边界。
>     *   因此它们可以*区分*不同类型的数据实例。
> *   生成模型学习数据的分布。
>     *   所以他们可以*生成*新的数据实例。

[![来自 http://primo.ai/index.php?title=Discriminative_vs._Generative](https://i.stack.imgur.com/mipQS.png)](https://i.stack.imgur.com/mipQS.png) *[图片来源](http://primo.ai/index.php?title=Discriminative_vs._Generative)*

* * *

# 仔细看看

即便如此，这个问题在某种程度上暗示了一种错误的二分法[3]。生成-判别“二分法”实际上是一个**频谱**，您甚至可以在 [4] 之间进行平滑插值。

因此，这种区分变得任意且令人困惑，尤其是当许多流行模型没有完全归入其中一种时 [5,6]，或者实际上是混合模型（经典的“判别”模型和“生成”模型的组合） .

尽管如此，它仍然是一个非常有用和常见的区别。我们可以列出一些典型的和最近的生成模型和判别模型的明确示例：

*   生成：朴素贝叶斯、潜在狄利克雷分配 (LDA)、生成对抗网络 (GAN)、变分自动编码器 (VAE)、规范化流。
*   判别：支持向量机 (SVM)、逻辑回归、大多数深度神经网络。

还有很多有趣的工作深入研究了生成-判别分界 [7] 和频谱 [4,8]，甚至将判别模型转化为生成模型 [9]。

最后，定义在不断发展，尤其是在这个快速发展的领域:) 最好对它们持保留态度，甚至为自己和他人重新定义它们。

* * *

# 来源

1.  可能源自“机器学习 - 判别和生成”（Tony Jebara，2004）。
2.  [Google 机器学习速成课程](https://developers.google.com/machine-learning/gan/generative)
3.  [生成-判别谬误](http://www.trivialorwrong.com/2016/05/22/the-generative-discriminative-fallacy.html)
4.  [“生成模型和判别模型的原则混合”（Lasserre 等人，2006 年）](https://arxiv.org/abs/1705.09011)
5.  [@shimao的问题](https://stats.stackexchange.com/questions/408421/is-the-only-difference-between-conditional-generative-models-and-discriminative)
6.  [比努贾西姆的回答](https://stats.stackexchange.com/a/191320/188037)
7.  比较逻辑回归和朴素贝叶斯：
    *   [cs.cmu.edu/~tom/mlbook/NBayesLogReg.pdf](https://cs.cmu.edu/~tom/mlbook/NBayesLogReg.pdf)
    *   [“论判别式与生成式分类器”](https://papers.nips.cc/paper/2020-on-discriminative-vs-generative-classifiers-a-comparison-of-logistic-regression-and-naive-bayes)
    *   [评论“关于判别式与生成式分类器”](https://link.springer.com/article/10.1007/s11063-008-9088-7)
8.  [https://www.microsoft.com/en-us/research/wp-content/uploads/2016/04/DengJaitly2015-ch1-2.pdf](https://www.microsoft.com/en-us/research/wp-content/uploads/2016/04/DengJaitly2015-ch1-2.pdf)
9.  [“你的分类器秘密地是一个基于能量的模型”（Grathwohl 等人，2019 年）](https://arxiv.org/abs/1912.03263)
10.  [斯坦福 CS236 笔记](https://deepgenerativemodels.github.io/notes/introduction/)：从技术上讲，概率判别模型也是基于数据的标签的生成模型。然而，术语生成模型通常是为高维数据保留的。

* * *

## 回答 #9

> 赞同：23
> 
> 时间：2016-10-02T07:57:43.887

一个额外的信息点，与上面 StompChicken 的答案相得益彰。

**判别模型**和**生成模型**的**根本区别**在于：

 ****> **判别模型**学习类之间的**（硬或软）边界**
> 
> **生成模型**对各个类的**分布进行建模**

编辑：

生成模型是**可以生成数据**的模型。它对特征和类（即完整数据）进行建模。

如果我们建模`P(x,y)`：我可以使用这个概率分布来生成数据点——因此所有算法建模`P(x,y)`都是生成的。

例如。生成模型

*   朴素贝叶斯模型`P(c)`和`P(d|c)`- 其中`c`是类，`d`是特征向量。

    还，`P(c,d) = P(c) * P(d|c)`

    因此，某种形式的朴素贝叶斯模型，`P(c,d)`

*   贝叶斯网

*   马尔可夫网

判别模型是只能用于**区分/分类数据点的**模型。您只需要`P(y|x)`在这种情况下进行建模（即给定特征向量的类概率）。

例如。判别模型：

*   逻辑回归

*   神经网络

*   条件随机场

一般来说，生成模型需要比判别模型更多地建模，因此有时效率不高。事实上，大多数（不确定是否全部）无监督学习算法（如聚类等）都可以称为生成算法，因为它们建模`P(d)`（并且没有类：P）

PS：部分答案摘自[源码](https://stats.stackexchange.com/questions/12421/generative-vs-discriminative/12426#12426)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-05-17T09:31:50.750

生成算法模型将从训练数据中完全学习并预测响应。

判别算法的工作只是对两种结果进行分类或区分。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-06-24T22:53:54.533

之前的所有答案都很棒，我想再补充一点。

从生成算法模型中，我们可以推导出任何分布；而我们只能从判别算法模型中获得条件分布P(Y|X)（或者我们可以说它们只对判别Y的标签有用），这就是为什么它被称为判别模型。在给定 Y($X_i \perp X_{-i} | Y$) 的情况下，判别模型不假设 X 是独立的，因此通常对于计算该条件分布更有效。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-04-16T00:52:52.330

[这篇](https://medium.com/@mlengineer/generative-and-discriminative-models-af5637a66a3)文章对我理解这个概念有很大帮助。

总之，

*   两者都是概率模型，这意味着它们都使用概率（**准确地说是条件概率**）来计算未知数据的类别。
*   生成分类器在数据集上应用**联合 PDF 和贝叶斯定理**，并使用这些值计算条件概率。
*   判别分类器直接在数据集上找到条件概率

一些不错的阅读材料： [条件概率](https://medium.com/@mithunmanohar/machine-learning-101-what-the-is-a-conditional-probability-f0f9a9ec6cdaprobability)，[联合PDF](https://en.wikipedia.org/wiki/Joint_probability_distribution)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-05-31T10:17:00.597

我的两分钱： 判别式方法突出差异 生成式方法不关注差异；他们试图建立一个代表班级的模型。两者之间有重叠。理想情况下，两种方法都应使用：一种有助于发现相似之处，另一种有助于发现不相似之处。

# sql - 用分隔符分隔字符串#@#

> ID：879433
> 
> 赞同：0
> 
> 时间：2009-05-18T19:45:23.973
> 
> 标签：sql, string

下面的字符串我必须使用 sql 调用 3 次。字符串：JAN#@#PIET#@#HENK

第一次调用应该返回：JAN 第二次调用：PIET 第三次调用：HENK

所以我们可以使用#@# 作为分隔符，但字符串可能只是：JAN#@#PIET。仍然所有三个调用都将在调用 1 返回的地方完成：JAN 调用 4 返回：PIET cal 三返回：<>

仅字符串 JAN 也可能发生同样的情况。

我希望这个解释足以让有人帮助我处理这个案子。

提前致谢。

问候， 里尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T19:51:14.273

如果您使用的是 sql 2005，请根据您的需要调整这篇文章：

[拆分函数 - SQL 2005](http://www.logiclabz.com/sql-server/split-function-in-sql-server-to-break-comma-separated-strings-into-table.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T20:33:03.847

在我看来，您需要一个像枚举器一样维护状态的拆分函数。你实际上并不想要那个。这可能会非常糟糕。

我推荐一个[拆分字符串函数](http://dpatrickcaldwell.blogspot.com/2008/08/table-valued-function-to-split-strings.html)（在 sql server 中，它们被称为表值函数）。如果你这样做，最坏的情况是你必须遍历表结果。无论如何，您可以在这里找到该函数：http: [//dpatrickcaldwell.blogspot.com/2008/08/table-valued-function-to-split-strings.html](http://dpatrickcaldwell.blogspot.com/2008/08/table-valued-function-to-split-strings.html)

您的用法如下所示：

```
SELECT *
FROM dbo.SplitString('JAN#@#PIET#@#HENK', '#@#')
-- PartId      Part
-- ----------- --------
-- 1           JAN
-- 2           PIET
-- 3           HENK

SELECT *
FROM dbo.SplitString('JAN#@#PIET#@#HENK', '#@#')
WHERE PartId = 2
-- PartId      Part
-- ----------- --------
-- 2           PIET 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T20:03:58.367

每种可能的 SQL Server 拆分字符串方法都有详细的优缺点：

[http://www.sommarskog.se/arrays-in-sql.html](http://www.sommarskog.se/arrays-in-sql.html)

# asp.net - ASP.NET CheckBoxList 数据绑定问题

> ID：879434
> 
> 赞同：29
> 
> 时间：2009-05-18T19:45:46.217
> 
> 标签：asp.net, web-controls

是否可以对 ASP.NET CheckBoxList 进行 DataBind，以使数据中的字符串值成为复选框的标签，并且布尔值选中/取消选中该框？

在我的 asp.net 网络表单上，我有一个这样的 CheckBoxList：

```
<asp:CheckBoxList runat="server" ID="chkListRoles" DataTextField="UserName" DataValueField="InRole" /> 
```

在后面的代码中，我有以下代码：

```
var usersInRole = new List<UserInRole> 
{ 
  new UserInRole { UserName = "Frank", InRole = false},
  new UserInRole{UserName = "Linda", InRole = true},
  new UserInRole{UserName = "James", InRole = true},
};

chkListRoles.DataSource = usersInRole;
chkListRoles.DataBind(); 
```

我有点希望在 InRole = true 时选中复选框。我也试过 InRole = "Checked"。结果是一样的。我似乎找不到 DataBind 的方法并自动选中/取消选中复选框。

目前，我通过为 DataBound 事件中的相应项目设置 selected = true 来解决问题。似乎有一个更清洁的解决方案超出了我的掌握。

谢谢你

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-05-18T20:12:00.300

**编辑：**没有办法通过标记来做到这一点。DataValueField 不能确定复选框项是否被选中。它检索或存储要在回发中使用的值。[DataValueField](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.datavaluefield.aspx)在 CheckBoxLists、RadioButtonLists、ListControl 等中很常见。

正如您已经发现的那样，这是预先选择复选框的唯一方法。

```
chkListRoles.DataSource = usersInRole;
chkListRoles.DataBind();

foreach(ListItem item in chkListRoles.Items)
 item.Selected = usersInRole.Find(u => u.UserName == item.Text).InRole; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2011-06-22T19:16:15.670

`OnItemDataBound`在厌倦了-binding之后，我为此做了一个自定义控件。它会让你绑定`Selected`属性。您可以`RadioButtonList`通过更改自定义控件的派生内容轻松地制作相同的控件。

要使用它，只需`DataCheckedField`在标记中创建控件时添加属性。*请记住在web.config*文件中引用自定义控件。

**标记**

```
<myControls:SimpleCheckBoxList runat="server" ID="chkListRoles"
                               DataCheckedField="InRole"
                               DataTextField="UserName"
                               DataValueField="UserId" /> 
```

**控制代码**

```
public class SimpleCheckBoxList : System.Web.UI.WebControls.CheckBoxList
{
    public string DataCheckedField
    {
        get
        {
            string s = (string)ViewState["DataCheckedField"];
            return (s == null) ? String.Empty : s;
        }
        set
        {
            ViewState["DataCheckedField"] = value;
            if (Initialized)
                OnDataPropertyChanged();
        }
    }

    protected override void PerformDataBinding(IEnumerable dataSource)
    {
        if (dataSource != null)
        {
            if (!this.AppendDataBoundItems)
                this.Items.Clear();

            if (dataSource is ICollection)
                this.Items.Capacity = (dataSource as ICollection).Count + this.Items.Count;

            foreach (object dataItem in dataSource)
            {
                ListItem item = new ListItem()
                {
                    Text = DataBinder.GetPropertyValue(dataItem, DataTextField).ToString(),
                    Value = DataBinder.GetPropertyValue(dataItem, DataValueField).ToString(),
                    Selected = (DataCheckedField.Length > 0) ? (bool)DataBinder.GetPropertyValue(dataItem, DataCheckedField) : false
                };
                this.Items.Add(item);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2011-12-06T04:00:17.770

使用标记是不可能的。您可以做的是像您希望的那样绑定复选框列表 - 使用 DataValueField 中的布尔值，然后简单地将其添加为 OnDataBound 事件。

```
protected void myCheckBoxList_DataBound(object sender, EventArgs e)
    {
        foreach (ListItem item in myCheckBoxList.Items)
        {
            item.Selected = bool.Parse(item.Value);
        }
    } 
```

该解决方案与 Jose Basilio 提出的解决方案之间的区别在于，该解决方案适用于所有类型的数据绑定方法。例如，使用 v4.5 中的新 ModelBinding 功能与 SelectMethod 绑定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T19:49:19.597

我认为您必须告诉控件将其绑定到哪个属性...在本例中为“InRole”。

我玩过它，似乎没有办法绑定到复选框的选择，你必须自己做。我能够绑定到清单的文本和值，这似乎只处理列表中每个复选框的标签。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-28T23:00:29.647

使用 a`DataList`可能是另一种选择

```
<asp:DataList ID="dataListRoles" runat="server">
    <ItemTemplate>
        <asp:CheckBox runat="server" Text='<%# Eval("UserName ") %>' Checked='<%# Eval("IsInRole") %>' />
    </ItemTemplate>
</asp:DataList> 
```

# language-agnostic - 从哪里开始编程？

> ID：879435
> 
> 赞同：3
> 
> 时间：2009-05-18T19:46:08.057
> 
> 标签：language-agnostic, coding-style, methodology

一旦你完成了你的第一组需求和设计，你从哪里开始编程？（假设测试将以相同的顺序编写，但在代码之前）。

*   入口点
*   框架/支持类
*   实体类
*   先说最简单的
*   先说最难的

你有什么建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-18T19:48:39.240

我从依赖链中的最低层工作到最高层。这样我就可以尽早编译和测试一些东西，然后我就可以在它的基础上进行构建。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-18T19:54:21.943

我几乎总是从用户界面开始。一旦我确切地知道什么进出什么，我会发现组织其他一切变得更容易。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-18T19:49:42.187

我从我的数据结构（数据库表、XTD、数据字典等）开始，然后是数据如何进出所述结构（数据访问层），然后是业务对象及其相关逻辑，最后是用户界面并附加这些我的业务逻辑的编程挂钩

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-18T19:58:28.643

似乎每个发布此问题答案的人都指定了不同的起点。起点的巨大差异完美地说明了您应该*真正*从哪里开始：*您*理想的起点在哪里。

不同的人有不同的处理问题的方法。通常，一个项目的成功与一个人采用的初始方法无关。花时间思考并尝试不同的领域，首先关注并找出适合您的领域。

**编辑：**在更抽象的层面上，[Paul Graham 的这篇文章](http://www.paulgraham.com/progbot.html)对 Lisp 风格的自下而上的编程方法提供了很好的见解。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-18T20:07:33.210

就个人而言，我认为您应该从域模型开始。这将在很大程度上直接从您的需求中提取，并将帮助您确定需要创建哪些部分。您的领域模型将驱动您的数据模型，需求将告诉您必须对领域对象做什么。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-18T20:35:42.980

回复：简单 vs 困难项目优先级：

我尝试先做我认为更难的事情。这样，如果出现问题，您更有可能获得并能够提前通知。此外，如果事实证明某些事情是无法实现的，您不会将时间浪费在一堆依赖且不再需要的小事情上。

[http://www.businessballs.com/rocks.htm](http://www.businessballs.com/rocks.htm)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-18T19:53:57.620

它必须取决于你正在创造什么。我正在开发一个 Windows 移动应用程序，从自下而上开始，处理类和各种数据抽象，然后用 gui 将它们全部插入，这是一场噩梦。你只是不能向人们（非开发人员）展示代码并让他们相信你已经完成了 40%，他们需要看到某种 GUI。如果我可以回去，我会先模拟 GUI。

但是当涉及到数据驱动的网站时，我纯粹从数据开始，因为允许您操作它们的网页取决于了解数据的外观以及您可能如何与之交互。

顺便说一句，我对“最简单”和“最难”的事情感兴趣，因为我认为人类的自然倾向是认为简单的事情会比实际情况更容易，而困难的事情会比实际情况更难！

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-18T19:54:10.727

我喜欢从粗略的 UI 开始。

这样可以更快地讨论设计和需求是如何错误的（即使每个人都签署了它们），并节省了大量浪费的精力。

然而，这有点危险，因为大多数人认为 UI 是大部分工作，并且不会理解为什么当屏幕看起来几乎是最终完成时要花这么长时间才能完成。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-18T20:44:53.867

恕我直言，最好的起点是数据模式，然后是域模型，然后是模型和接口之间的任何业务逻辑，然后是接口。

根据您使用的技术和开发范例，它将作为您的业务需求到编码世界的自然扩展，因为它应该在理想情况下代表您的大部分需求。

实际上，您需要考虑的是您正在构建的内容、用于构建解决方案的设计模式、正在使用的相关技术以及它们如何相互关联（或不相互关联）及其依赖关系。

从限制因素开始——如果没有数据模式就无法构建足够的领域模型，那么就从模式开始。

如果你有一个相当智能的数据库（所有的表、完整性和规则都内置在存储过程中，它们会进行所有的错误检查和验证）和一个相当无知的中间层（它所做的只是传递数据）设计，那么大部分工作和功能在后面....

如果你有一个相当简单的数据库（只有表和字段）和一个非常智能的中间层（所有的逻辑、验证和完整性检查都在这里完成）......大部分功能都在中间......

现在这是一个偏好问题。我喜欢进步，所以我从构建“最简单”的东西开始——应用程序的“最简单”部分。对我来说，这有助于我在代码级别将整个过程具体化 - 以相对频繁的速度查看各个部分。

但我总是把令人眼花缭乱的前端留到最后（或者我让其他人来做——我更喜欢）。！！

它既是一门艺术，也是一门科学……每个项目都是不同的，除非你只是用相同的技术和流程重复一个模式——在这种情况下，把它分解成一门科学，并确保你从中吸取教训每个项目，以便您可以编写一个更有效的流程。

干杯

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-18T21:04:49.303

我更喜欢从更高级别（架构）部分开始，因为它们将更好地定义您在较低级别特别需要的内容。如果您从较低级别开始，那么您通常最终会混淆较高级别以适应您认为较低级别应该工作的方式。因此，从本质上讲，您从较低级别开始会使您的工作变得更加困难，并且您的设计变得更难理解。更高级别的应用程序代码是您希望易于理解的部分，因此从那里开始并确保它完全按照您的意愿工作对我来说更有意义。

这通常意味着从 UI 开始，并在构建 UI 时添加功能。

编辑：如果您不知道在您工作的更高级别上将如何工作；然后为更高级别的部分创建一个方法来调用并将工作推送到较低级别的模块。这在简化我的代码方面对我来说确实很神奇。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-05-18T19:53:36.717

我倾向于首先编写和测试支持的框架类。我发现如果我不这样做，我最终会在编译和测试之前编写太多代码。此外，首先编写它们意味着您将更倾向于使它们完全抽象，而不是与使用它们的代码过于乱伦耦合的半生不熟的抽象。如果您在编写支持类时没有编写更高级别的代码，您将避免意外引入循环依赖。

也就是说，当我编写支持类时，我至少已经编写了代码片段，展示了如何在更高级别代码中使用它们的示例。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-05-18T19:58:57.940

使用桌面/命令行程序时，我通常按照 Ted 的建议从依赖链（树）的顶部（根）开始，以便尽早测试和编译。然后我逐步向下（向上）添加类和复杂性链（树）。

使用 Web 应用程序时，我通常会采取一些不同的方法：

1.  我倾向于从构建一个粗略的 html shell 开始，以了解网站应该是什么样子。
2.  然后我从最简单的功能开始（在许多情况下，它是一个留言簿或类似博客的输入/显示数据类型的东西），我首先在数据库中设置一个表，将它映射到我的数据提供者（如果是实体框架）我在 .Net 中）并让网站访问数据（还没有输入功能！）。
3.  当页面正确获取数据时（我通过手动将随机内容放入数据库进行测试）我开始处理网站这一部分的输入部分。
4.  一旦网站的一个部分（例如留言簿）完成并完全按照我的意愿工作，我会继续下一部分并从 1 重新开始。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-05-18T20:53:40.433

我喜欢从编写框架开始，然后让其他部分拼凑起来。

例如，我通常会编写一个我知道需要的类，然后在我有一些所需的功能时对其进行接口......然后将继续使用周围的功能。

我喜欢用这种方式做事，因为如果感觉像是意识流，当事情发生时，它是非常令人满意的。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-18T21:03:24.487

我作为熟练程序员的看法：

1.  规划数据结构
2.  制作一个粗略的 UI
3.  编写应用程序逻辑代码
4.  对 UI 进行最后的润色

在开发 Django 应用程序时，我会首先定义模型，将一些刚刚合适的模板组合在一起，编写视图函数并完成 UI 上的剩余工作。所有这些步骤不可避免地会有一些重叠（比如在编写视图时对模型类进行更改），但这对我来说是一般的路线图。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-05-18T20:31:12.227

只要有可能，我都会从整个应用程序的路径开始。慷慨地处理存根。这有助于阐明程序的整体架构。

完成后，我强烈建议接下来进行最难的部分。（最难的部分，也就是最危险的部分，也就是你掌握的信息最少的部分。）

为什么？因为你需要时间来找到所有缺失的信息，如果你不能让这部分工作，其他部分就被浪费了。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-05-18T20:03:24.747

我同意到目前为止的普遍共识，即您从应用程序的最低级别（数据层）开始并从那里构建。对我来说这很有意义，因为业务逻辑建立在数据层之上，而前端则建立在业务逻辑等之上。

然而，只考虑一件事——你的客户。不幸的是，客户需要看到可见的变化才能知道您正在做某事。你会惊讶地发现，即使是技术经理也倾向于落入这种心态。

因此，我尝试确保在每次迭代中对 UI 也进行一些处理，因此从某种意义上说，应用程序是在垂直线中构建的。即一些数据，一些业务逻辑，一些UI，展示给客户。重复。

# c# - 如何知道 RAPI dll 是否存在

> ID：879448
> 
> 赞同：1
> 
> 时间：2009-05-18T19:49:00.843
> 
> 标签：c#

我已经构建了与 RAPI 一起使用的 C# 程序（与 PPC 或 WinCE 的通信）

我的问题是，如果用户没有安装 ActiveSync - 我的程序崩溃了！！

如何在不安装 ActiveSync 的情况下加载和使用我的程序？

（也许像#if...#define ......我真的不知道......）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T19:56:59.597

您在这里有两个选择：

一，延迟加载 RAPI dll，这样如果 DLL 不存在，您的应用程序就不会抱怨。在这种情况下，如果安装了 ActiveSync，您将只使用 RAPI 调用（您可以通过检查注册表来确定这一点）。

-或者-

二、动态加载RAPI dll，如果安装了ActiveSync，只引用RAPI函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T19:52:58.620

我不确定这是否是您的想法，但是您将代码放在接口后面并放入另一个 DLL，然后在程序启动时查看是否可以找到 RAPI（查找文件或安装代码）。

如果找到，则加载 DLL 并获取使用它的代码的接口，如果未找到，则不加载 DLL 并禁用任何需要它的 UI 选项。

# java - 如何制作像 xmlbean XmlObject.copy() 这样的 JAXB 对象的深层副本？

> ID：879453
> 
> 赞同：2
> 
> 时间：2009-05-18T19:49:32.873
> 
> 标签：java, jaxb

我的任务是重构一些使用 xmlbeans 的组件，以便现在使用 jaxb。一切都很顺利，直到我到达前一位作者调用[XmlObjects 之一的 copy() 函数的](http://xmlbeans.apache.org/docs/2.0.0/reference/org/apache/xmlbeans/XmlObject.html#copy())地方。由于 xmlbeans 中的所有对象都扩展了 XmlObject，我们免费获得了神奇的深拷贝功能。

Jaxb 似乎没有为我们提供这个。制作 Jaxb 对象的深层副本的正确且简单的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-06-03T09:53:41.540

你可以参考这个

```
public static <T> T deepCopyJAXB(T object, Class<T> clazz) {
  try {
    JAXBContext jaxbContext = JAXBContext.newInstance(clazz);
    JAXBElement<T> contentObject = new JAXBElement<T>(new QName(clazz.getSimpleName()), clazz, object);
    JAXBSource source = new JAXBSource(jaxbContext, contentObject);
    return jaxbContext.createUnmarshaller().unmarshal(source, clazz).getValue();
  } catch (JAXBException e) {
      throw new RuntimeException(e);
  }
}

public static <T> T deepCopyJAXB(T object) {
  if(object==null) throw new RuntimeException("Can't guess at class");
  return deepCopyJAXB(object, (Class<T>) object.getClass());
} 
```

这个对我有用。

所有功劳归于[https://gist.github.com/darrend/821410](https://gist.github.com/darrend/821410)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-10-10T10:15:16.847

您可以使用 JAXBSource

假设您要深度复制 Foo 类型的 sourceObject。为同一类型创建 2 个 JAXBContext：

```
JAXBContext sourceJAXBContext = JAXBContext.newInstance("Foo.class");
JAXBContext targetJAXBContext = JAXBContext.newInstance("Foo.class"); 
```

然后做：

```
targetJAXBContext.createUnmarshaller().unmarshal(
  new JAXBSource(sourceJAXBContext,sourceObject); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-18T20:20:36.070

您可以使您的 JAXB 类可序列化，然后通过序列化和反序列化来深度复制对象。代码可能类似于：

```
Object obj = ...  // object to copy

ObjectOutputStream out = new ObjectOutputStream(new ByteArrayOutputStream());
out.writeObject(obj);
byte[] bytes = baos.toByteArray();

ObjectInputStream in = new ObjectInputStream(new ByteArrayInputStream(bytes));
Object copy = in.readObject(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-19T03:07:56.123

您可以使用 XSD 中的注释为生成的 jaxb 对象声明基类...

```
<xsd:annotation>
  <xsd:appinfo>
    <jaxb:globalBindings>
      <xjc:superClass name="com.foo.types.support.JaxbBase" />
    </jaxb:globalBindings>
  </xsd:appinfo>
</xsd:annotation> 
```

您可以使用 xmlbeans 基类作为模板添加可克隆性支持。

# c# - 向 ASP.NET GridView 动态添加页脚

> ID：879462
> 
> 赞同：2
> 
> 时间：2009-05-18T19:51:05.817
> 
> 标签：c#, asp.net, gridview, footer

我正在尝试将 DropDownLists 的页脚行添加到我的 GridView 控件。问题是我不知道在设计时我的数据源中有多少列，所以我尝试使用 AutoGenerateColumns=true 并且不指定列模板。因此，我将 DropDownList 控件添加到页脚的方式是动态地在 GridView 的 DataBound 事件中使用代码。

这很好用，除了我想在用户单击按钮时对每个 DropDownLists 的 SelectedItem 做一些事情。这些动态添加的控件似乎不再存在于用户单击按钮的帖子后面，我相信问题是因为我没有在 DropDownList 控件上指定 runat="server" 标记。

有没有其他方法可以在不指定所有列的情况下将这些下拉列表添加到 FooterTemplate 中，以便在用户单击页面上的按钮时可以访问它们的 SelectedItems？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T19:58:46.083

你部分正确——回发后动态添加的控件不再存在。在运行 DataBound 事件之前，它们不会被重新添加。问题是数据绑定事件发生**在控件事件****之后**，即按钮的 Click 事件之后。因此，在处理单击事件的页面生命周期中，这些控件尚未重新创建。

[这是一个相关的问题，可能有一些有用的信息](https://stackoverflow.com/questions/113392/dynamically-added-controls-in-asp-net)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T21:20:49.083

您需要创建一个 Addhandler：

```
dim dropdownlistname as new Dropdownlist
Addhandler dropdownlistname.selected_indexchanged,AddressOf dropdownlistname_SelectedIndexChanged 
```

那么你需要创建一个子如下：

```
Protected Sub dropdownlistname_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles ddldept.SelectedIndexChanged

'Insert Code here

End sub 
```

因此，它的作用是创建一个事件并声明一个地址以用于该事件。您应该能够在此事件中编写任何代码。

# svn - 如何从同一个存储库中仅检查多个项目的主干？

> ID：879467
> 
> 赞同：23
> 
> 时间：2009-05-18T19:51:40.137
> 
> 标签：svn

我们有一个包含多个相关项目的 SVN 存储库。像这样...

```
\repo
  \Project1
    \branches
    \tags
    \trunk
  \Project2
    \branches
    \tags
    \trunk
  \Project3
    \branches
    \tags
    \trunk 
```

我想在没有分支/标签文件夹的情况下将每个项目的主干检出到我的工作区中。

```
\workspace
  \Project1
    \trunk
  \Project2
    \trunk
  \Project3
    \trunk 
```

有没有办法在不单独检查每个中继线的情况下做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-18T19:55:16.603

简短的回答：没有。

长答案：请参阅[http://svnbook.red-bean.com/en/1.5/svn.advanced.sparsedirs.html](http://svnbook.red-bean.com/en/1.5/svn.advanced.sparsedirs.html)并在循环脚本中进行结帐。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-19T23:10:22.933

您可以使用 -N 选项，它会忽略子目录。您可以在第一次查看源代码时运行它：

```
svn co -N http://path/to/repo
cd repo
for f in Project1 Project2 Project3; do
  svn up -N $f
  svn up $f/trunk
done 
```

并在以后更新中继：

```
svn up repo/*/trunk 
```

这适用于所有 SVN 客户端。如果您使用的是 SVN 1.5.x 客户端，您还可以查看“稀疏目录”，记录在*[稀疏目录](http://svnbook.red-bean.com/en/1.5/svn.advanced.sparsedirs.html)*中（我还不允许发布链接：-C），这将允许您运行“ svn update”在存储库目录中。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-09-18T04:18:38.393

这在 bash 中做得很好。请注意，我重命名了输出文件夹以使 Eclipse 在导入项目时更快乐。

```
for f in `svn ls http://path/to/repo`; do svn checkout http://path/to/repo/${f}trunk $f; done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T19:55:39.007

编辑：查看以下部分的[SVN 书](http://svnbook.red-bean.com/en/1.0/re04.html)

将 2 个不同的目录签出到两个单独的工作副本中：

```
$ svn checkout file:///tmp/repos/test  file:///tmp/repos/quiz
A  test/a
A  test/b
Checked out revision 2.
A  quiz/l
A  quiz/m
Checked out revision 2.
$ ls
quiz  test 
```

将 2 个不同的目录检出到两个单独的工作副本中，但将它们都放入一个名为“工作副本”的目录中：

```
$ svn checkout file:///tmp/repos/test  file:///tmp/repos/quiz working-copies
A  working-copies/test/a
A  working-copies/test/b
Checked out revision 2.
A  working-copies/quiz/l
A  working-copies/quiz/m
Checked out revision 2.
$ ls
working-copies 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-18T19:56:22.420

我怀疑您仍然需要告诉它（结帐）每个单独的主干 - 但您至少还可以使用[稀疏目录](http://svnbook.red-bean.com/en/1.5/svn.advanced.sparsedirs.html)签出工作区（以获取所有项目，因此您可以全局更新等） 。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-21T11:50:49.197

发现这是有效的，而不是上面的：

```
checkoutList.bat:

for %%G in (projectA, projectB, projectC) do (
  echo %%G
  mkdir %%G
  svn co http://your.repo/path/%%G/trunk %%G
) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-28T09:44:47.283

Windows 批处理脚本：

```
@echo off
for /f %%G in ('svn ls https://path/to/main/folder/') do (
    mkdir %%G
    cd %%G
    echo Checking out [%%G] project
    svn co https://path/to/main/folder/%%Gtrunk
) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-12-22T09:59:10.927

Right click on folder - SVN Check out. Place your URL and click "Choose Item" button. With the check boxes select the sub-folders that you want to include.

# c# - 继承和属性值

> ID：879474
> 
> 赞同：1
> 
> 时间：2009-05-18T19:53:33.567
> 
> 标签：c#, inheritance

我正在使用代表 pdf 的类填充 PDF 应用程序。我在 pdf 上的每个文本框都有一个属性，并且正在使用属性来指定属性映射到的 pdf 文本框。我所有的 PDF 都具有相同的属性，但 pdf 对文本框使用不同的名称。所以，我能想到的唯一解决方案是创建一个基类，让每个应用程序类型扩展我的基类并覆盖每个属性，以便在其上抛出新的属性值。有没有更简单的方法？

示例（请注意，Application1 和 Application2 之间的唯一区别是 ITextField 值从“TextBox1”更改为“TextBox2”：

```
public class Application
{
    private string accountNumber;
    public virtual string AccountNumber
    {
        get { return this.accountNumber; }
        set { this.accountNumber = value; }
    }
}

public class Application1 : Application
{
    [ITextField("TextBox1")]
    public override string AccountNumber
    {
        get
        {
            return base.AccountNumber;
        }
        set
        {
            base.AccountNumber = value;
        }
    } 
}

public class Application2 : Application
{
    [ITextField("TextBox2")]
    public override string AccountNumber
    {
        get
        {
            return base.AccountNumber;
        }
        set
        {
            base.AccountNumber = value;
        }
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-18T19:59:27.797

我知道这是一个糟糕的答案，但这似乎是一个很好的方法。它也应该适用于未来的变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T20:01:13.707

如果该值确实是系统的一部分，那么也许将其作为属性：

```
public string AccountNumber {get;set;}
public string AccountNumberTextField {get;set;} 
```

然后，您可以拥有两个`Application`具有不同属性的实例（相同类型）。这真的取决于上下文。

Eric Lippert 有一篇关于何时（和不）使用属性的好博客：[Properties vs. Attributes](http://blogs.msdn.com/ericlippert/archive/2009/02/02/properties-vs-attributes.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T22:05:54.407

如果您要使用属性，我会说基类不是正确的选择。要定义这样的方案，我会选择接口而不是基类。需要维护的代码更少，并且可以为您带来相同的效果。

```
public interface IApplication
{
    string AccountNumber { get; set; }        
}

public class Application1 : IApplication
{
    [ITextField("TextBox1")]
    public string AccountNumber { get; set; }
}

public class Application2 : IApplication
{
    [ITextField("TextBox2")]
    public override string AccountNumber { get; set; }
} 
```

此外，您可以使用基类的想法来包含一个将属性映射到文本字段的字典，然后在派生类中进行设置......这只有在您在每个表单中都有大量属性时才会真正有效需要这样做。

```
public abstract class Application
{
    public Application() { }

    private Dictionary<string, string> mappings = new Dictionary<string, string>();

    public Dictionary<string, string> Mappings
    {
        get { return mappings; }
    }

    public string AccountNumber { get; set; }

    protected abstract void ProvideMappings();        
}

public class Application1 : Application
{
    protected override void ProvideMappings()
    {
        Mappings.Add("AccountNumber", "TextBox1");
    }
}

public class Application2 : Application
{
    protected override void ProvideMappings()
    {
        Mappings.Add("AccountNumber", "TextBox2");
    }
} 
```

真的需要更多的上下文来说明哪些是好主意。用例将推动细节。例如，如果字典将 PropertyInfo 映射到 PDF 字段的字符串名称，它可能会为您提供更多帮助，这取决于您如何使用它。

# java - 如何使用 BOM 编码/解码 UTF-16LE 字节数组？

> ID：879482
> 
> 赞同：24
> 
> 时间：2009-05-18T19:55:08.617
> 
> 标签：java, unicode, utf-16, byte-order-mark

我需要将 UTF-16 字节数组编码/解码到`java.lang.String`. [字节数组是通过Byte Order Marker (BOM)](http://unicode.org/faq/utf_bom.html#bom1)提供给我的，我需要使用 BOM 对字节数组进行编码。

此外，因为我正在处理 Microsoft 客户端/服务器，所以我想以小端序（连同 LE BOM）发出编码以避免任何误解。我确实意识到使用 BOM 应该可以使用大端，但我不想在 Windows 世界中逆流而上。

例如，这里有一个用 BOM 将 a 编码`java.lang.String`为`UTF-16`little endian 的方法：

```
public static byte[] encodeString(String message) {

    byte[] tmp = null;
    try {
        tmp = message.getBytes("UTF-16LE");
    } catch(UnsupportedEncodingException e) {
        // should not possible
        AssertionError ae =
        new AssertionError("Could not encode UTF-16LE");
        ae.initCause(e);
        throw ae;
    }

    // use brute force method to add BOM
    byte[] utf16lemessage = new byte[2 + tmp.length];
    utf16lemessage[0] = (byte)0xFF;
    utf16lemessage[1] = (byte)0xFE;
    System.arraycopy(tmp, 0,
                     utf16lemessage, 2,
                     tmp.length);
    return utf16lemessage;
} 
```

在 Java 中执行此操作的最佳方法是什么？理想情况下，我想避免将整个字节数组复制到一个新的字节数组中，该数组在开始时分配了两个额外的字节。

[`java.lang.String`解码这样的字符串也是如此，但使用构造函数](http://file:///Users/jared/Documents/jdk-6u10-docs/api/java/lang/String.html#String(byte[],%20int,%20int,%20java.lang.String))更简单：

```
public String(byte[] bytes,
              int offset,
              int length,
              String charsetName) 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-05-18T20:08:45.157

“UTF-16”字符集名称将始终使用 BOM 进行编码，并使用大/小字节序对数据进行解码，但“UnicodeBig”和“UnicodeLittle”对于以特定字节顺序进行编码很有用。对无 BOM 使用 UTF-16LE 或 UTF-16BE -[请参阅这篇文章](http://illegalargumentexception.blogspot.com/2009/05/java-rough-guide-to-character-encoding.html#javaencoding_boms)了解如何使用“\uFEFF”手动处理 BOM。[有关 charset 字符串名称或（最好） Charset](http://java.sun.com/javase/6/docs/api/java/nio/charset/Charset.html)类的规范命名，请参见[此处。](http://java.sun.com/javase/6/docs/technotes/guides/intl/encoding.doc.html)另请注意，仅绝对需要支持[有限的编码子集。](http://illegalargumentexception.blogspot.com/2009/05/java-rough-guide-to-character-encoding.html#javaencoding_encodings)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-18T23:09:56.650

这就是你在 nio 中的做法：

```
 return Charset.forName("UTF-16LE").encode(message)
            .put(0, (byte) 0xFF)
            .put(1, (byte) 0xFE)
            .array(); 
```

它当然应该更快，但我不知道它在幕后制作了多少个数组，但我对 API 的理解是它应该将其最小化。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-18T20:15:47.453

首先，对于解码，您可以使用字符集“UTF-16”；自动检测初始 BOM。对于 UTF-16BE 编码，您还可以使用“UTF-16”字符集 - 这将编写一个正确的 BOM，然后输出大端的东西。

对于使用 BOM 编码为小端序，我认为您当前的代码不会太糟糕，即使使用双重分配（除非您的字符串真的很可怕）。如果它们不是处理字节数组而是处理 java.nio ByteBuffer，您可能想要做的事情，并使用 java.nio.charset.CharsetEncoder 类。（您可以从 Charset.forName("UTF-16LE").newEncoder() 获得）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-18T20:09:49.897

```
 ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream(string.length() * 2 + 2);
    byteArrayOutputStream.write(new byte[]{(byte)0xFF,(byte)0xFE});
    byteArrayOutputStream.write(string.getBytes("UTF-16LE"));
    return byteArrayOutputStream.toByteArray(); 
```

编辑：重读你的问题，我看到你宁愿完全避免双数组分配。不幸的是，据我所知，API 并没有给你。（有一个方法，但它已被弃用，你不能用它指定编码）。

我在看到您的评论之前写了上面的内容，我认为使用 nio 类的答案是正确的。我在看那个，但我对 API 不够熟悉，无法立即知道你是如何完成的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-24T22:17:10.220

这是一个老问题，但我仍然找不到适合我情况的可接受答案。基本上，Java 没有内置的带有 BOM 的 UTF-16LE 编码器。因此，您必须推出自己的实现。

这就是我最终得到的结果：

```
private byte[] encodeUTF16LEWithBOM(final String s) {
    ByteBuffer content = Charset.forName("UTF-16LE").encode(s);
    byte[] bom = { (byte) 0xff, (byte) 0xfe };
    return ByteBuffer.allocate(content.capacity() + bom.length).put(bom).put(content).array();
} 
```

# java - rrdtool 的替代品？

> ID：879483
> 
> 赞同：3
> 
> 时间：2009-05-18T19:55:14.843
> 
> 标签：java, database, real-time, rrdtool

我正在寻找[rrdtool的替代品](http://oss.oetiker.ch/rrdtool/index.en.html)

它需要快速、可靠、能够处理大量数据并具有 Java 接口。我正在调查的一种可能性是[KDB+](http://kx.com/Products/kdb+.php)还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T21:02:22.913

RRD 有两个 Java 端口：[rrd4j](https://github.com/rrd4j/rrd4j)和[JRobin](http://www.jrobin.org)

如果您只想替换 RRDTool，K 可能是矫枉过正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-10-23T23:30:11.970

JRobin 已经过时，不再开发。RRD4J 是前进的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T20:50:55.963

你看过[RRD4J](https://github.com/rrd4j/rrd4j)吗？

编辑：Nat 指出的 RRD4J 是[JRobin](http://www.jrobin.org/index.php/Main_Page)的一个端口。在这一点上，看起来 JRobin 是最新的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-07-14T16:16:43.350

+1 给 JRobin。我将它用于[我的项目](http://code.google.com/p/rrdws/issues/list)。

# entity-framework - 如何让 EF 对象在 WCFTestClient 中工作

> ID：879492
> 
> 赞同：1
> 
> 时间：2009-05-18T19:56:25.900
> 
> 标签：entity-framework, wcf, wcf-client

我有一个包含一些 EF 对象的解决方案。我想将它们传递给客户。

当我尝试在 WCFTestClient.exe 中对此进行测试时，我的对象出现此错误：

“wcf 测试客户端不支持此操作”

有没有办法进行设置，以便我可以将我的实体对象传递给客户端，或者我将不得不创建一个单独的类来复制所有内容。

瓦卡诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T15:34:02.830

这不能通过 WCFTestClient 完成。我正在研究其他一些客户，看看他们是否会这样做（即 WCFStorm）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-12T15:06:03.503

试用 SOA Cleaner，可以在[http://xyrow.com](http://xyrow.com)找到，它可能会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-31T20:40:24.247

为什么不创建自己的客户端？它只有 10-15 分钟的编码（如果有的话）

# wxpython - wxPython：异步执行命令，在文本小部件中显示标准输出

> ID：879511
> 
> 赞同：3
> 
> 时间：2009-05-18T20:01:17.077
> 
> 标签：wxpython

我正在寻找与我对[Tcl/Tk 示例的答案等效的 wxPython？](https://stackoverflow.com/questions/166231/tcl-tk-examples). 具体来说，我想看一个如何创建几个按钮的示例，每个按钮在单击时都会运行一些外部命令。在进程运行时，我希望输出转到可滚动的 wxPython 小部件。

在进程运行时，GUI 不应阻塞。例如，假设其中一个按钮可能会启动开发任务，例如构建或运行单元测试。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-24T13:01:56.730

这是一个完整的工作示例。

```
import wx
import functools
import threading
import subprocess
import time

class Frame(wx.Frame):
    def __init__(self):
        super(Frame, self).__init__(None, -1, 'Threading Example')
        # add some buttons and a text control
        panel = wx.Panel(self, -1)
        sizer = wx.BoxSizer(wx.VERTICAL)
        for i in range(3):
            name = 'Button %d' % (i+1)
            button = wx.Button(panel, -1, name)
            func = functools.partial(self.on_button, button=name)
            button.Bind(wx.EVT_BUTTON, func)
            sizer.Add(button, 0, wx.ALL, 5)
        text = wx.TextCtrl(panel, -1, style=wx.TE_MULTILINE|wx.TE_READONLY)
        self.text = text
        sizer.Add(text, 1, wx.EXPAND|wx.ALL, 5)
        panel.SetSizer(sizer)
    def on_button(self, event, button):
        # create a new thread when a button is pressed
        thread = threading.Thread(target=self.run, args=(button,))
        thread.setDaemon(True)
        thread.start()
    def on_text(self, text):
        self.text.AppendText(text)
    def run(self, button):
        cmd = ['ls', '-lta']
        proc = subprocess.Popen(cmd, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
        for line in proc.stdout:
            wx.CallAfter(self.on_text, line)

if __name__ == '__main__':
    app = wx.PySimpleApp()
    frame = Frame()
    frame.Show()
    app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T20:11:40.270

单击按钮时启动线程：

```
try:
    r = threading.Thread(target=self.mycallback)
    r.setDaemon(1)
    r.start()
except:
    print "Error starting thread"
    return False 
```

使用 wx.PostEvent 和 wx.lib.newevent 将消息从回调发送到主线程。

此[链接](http://mail.python.org/pipermail/python-list/2007-July/621566.html)可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-23T21:32:16.773

布莱恩，试试这样的事情：

```
import subprocess, sys

def doit(cmd):
    #print cmd
    out = subprocess.Popen(cmd, stdout=subprocess.PIPE, stderr=subprocess.STDOUT, shell=True).stdout
    return out.read() 
```

因此，当按下按钮时，命令会使用 subprocess 模块运行，并且您会以字符串形式获得输出。您可以将其分配给文本控件的值以显示它。您可能需要 out.readfully() 或多次阅读才能逐步显示文本。

如果按钮和文本字段不熟悉，那么快速浏览一下[wxPython 演示](http://www.wxpython.org/download.php#demo)将告诉您确切的操作。

# c# - 如何使用*多个*连接限制/节流带宽

> ID：879513
> 
> 赞同：4
> 
> 时间：2009-05-18T20:02:20.147
> 
> 标签：c#, limit, bandwidth, connection

我正在用 C# 编写一个应用程序，它使用多个连接到多个服务器同时下载（在不同的线程中），我希望能够限制使用的带宽。

对于单个连接，解决方案很简单；我会使用此处发布的解决方案：http: [//www.codeproject.com/KB/IP/Bandwidth_throttling.aspx](http://www.codeproject.com/KB/IP/Bandwidth_throttling.aspx) ，它计算单个连接的睡眠时间。

我想知道对多个连接执行此操作的最佳方法是什么。

使用上面发布的 ThrottledStream 并在连接之间平均分配带宽（比如 2MB/秒）是不对的，如果我有 3 个非常慢的连接和 1 个非常快的连接，它们都将被限制为 512kb/秒，所以快速的一个不会超过 512kb/sec，而其他 3 个甚至都不会。

我认为首选的解决方案是只限制最快的连接，以便最佳地使用较慢的连接。

有没有人对此有任何经验，示例代码或任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T20:17:31.723

如果是我，我会先将带宽要求分成 N 块，其中 N 是并发连接数。接下来，我将监控每个连接的性能并根据需要进行调整。首先，我会确定以我设置的最大速度运行的任何连接。如果需要，这些连接将成为提高速度的候选者。接下来，我将确定那些不符合我提出的带宽限制的连接（成绩不佳者）。这样就很容易总结后一组的不足之处。您将获取该数字，除以以最高速度执行的连接数并进行调整。

```
允许的总带宽：100KB/秒
连接数：5
初始每个连接限制：20KB/秒

实际结果：
连接 1：10KB/秒
连接 2：5KB/秒
连接 3：20KB/秒
连接 3：20KB/秒
连接 3：20KB/秒

总短：15KB/秒

新的每连接限制：
连接 1：10KB/秒
连接 2：5KB/秒
连接 3：25KB/秒
连接 3：25KB/秒
连接 3：25KB/秒

```

然后，您将每隔一段时间对其进行监控。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T20:08:27.327

在我的脑海中，我会得到一个收集器对象/类，它从每个流中按顺序提取，收集器在适当的时候处于休眠状态（可能通过移动平均比较）。如果一个比另一个慢，这将平衡您的流以允许实现完整的带宽限制......您将轮询拉，发现它是空的，然后在睡觉前拉下一个流。

由于您的收集器受提取的聚合数据/时间的限制，您将获得正确的客户端带宽。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-04-20T22:25:12.327

我也有同样的问题。我正在尝试 VS2010 Pro，并且我制作了小型家庭项目，我正在同时下载多个文件（10-50）并且我想限制所有文件的带宽。我找到了这个帖子，但我真的看不到解决方案，所以我自己尝试了。

我所做的是，我创建了一个非常简单的 DownloadLimiter 类。每次下载器想要下载一个块时（例如，就在 InputStream.Read() 之前），它必须向 DownloadLimiter 询问带宽。它有一个变量，它有一个限制，例如 50 000（如 bytesPerSecond）和 availableBandwidthPerSecond，它随着每个 ask() 的处理和返回而减少。

它还包含一个 Timer，它每 1000 毫秒将 availableBandwidthPerSecond 重置为限制。

ask() 方法被锁定，因此如果当前没有任何可用带宽，它只会循环并休眠一段时间，直到计时器重置可用带宽。

然而，它完美地工作。有一个问题。假设您的连接速度非常快（100 兆位），并且您将限制设置为 200kb。如果您下载一个文件（从类似的快速连接），那么您将在 x 毫秒内达到 100 兆比特的峰值，然后它将等到可用带宽被重置。这将一直持续到文件完成。平均下载速度将相当均匀，但如果您查看带宽图，它每秒都会出现峰值。我猜想 ThrottledStream 的发布链接与峰值的工作方式相同。

我不知道上面的文字是否对您有所帮助...如果有人有兴趣，我可以将代码发布在某处供您阅读。一些优化（如果你愿意的话）也会很好，因为我还不太熟悉线程。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-11T22:10:33.763

上面的总短实际上是 25kb/秒，但我不会将连接分成组，而是按速度排序并循环遍历它们。从总带宽开始，将新带宽设置为（剩余带宽/剩余计数）。这将保持 5k 和 10k 连接的限制，以防它们加速。您可以超出分配的带宽，但您会更正它。

```
List<Connection> connections = GetConnections();
connections.Sort(); // sorts by Speed
bandwidth = 100000;
for (int i = 0; i < connections.Count; i++)
{
    Connection cnn = connections[i];
    cnn.SpeedLimit = bandwidth / (connections.Count - i);
    bandwidth -= Math.Min(cnn.Speed, cnn.SpeedLimit);
}

(start with all connections SpeedLimit set to 20000 bytes/sec)

Speed   bandwidth SpeedLimit
5000    100000  20000
10000   95000   23750
20000   85000   28333
20000   65000   32500
20000   45000   45000 
```

连接的总速度限制为 149583，因此如果慢速连接速度加快，您可以超过限制，但如果您每秒调整限制，它应该非常接近。

连接速度更改为：5000、10000、28333、21000、45000，所以我们实际下载了 109,333 字节，但我们会再次调整。除 45k 外的所有连接都已达到其可能的限制：

```
Speed   bandwidth SpeedLimit
5000    100000  20000
10000   95000   23750
21000   85000   28333
28333   64000   32000
45000   35667   35667 
```

新的速度将是 5000、10000、21000、28333、35667、100k

```
Speed   bandwidth SpeedLimit
5000    100000  20000
10000   95000   23750
21000   85000   28333
28333   64000   32000
35667   35667   35667 
```

现在让我们假设 5k 连接速度高达 20k：

```
Speed   bandwidth SpeedLimit
10000   100000  20000
20000   90000   22500
21000   70000   23333
28333   49000   24500
35667   20667   20667 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-04-22T04:02:15.457

稍加调整，您就可以使用您在第一篇文章中链接的类，将 Throttle 和 Reset 放在静态类中。

# jquery - GalleryView - 带有横向和纵向照片的 JQuery

> ID：879520
> 
> 赞同：1
> 
> 时间：2009-05-18T20:03:29.707
> 
> 标签：jquery, image

当我想显示混合了风景和肖像的照片时，是否有人为[GalleryView](http://spaceforaname.com/galleryview)提供了一个不错的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T20:19:57.257

我通常用 CSS 来做这件事。我有一个向左浮动并根据需要调整大小的主 div。然后，我将其余内容放入该 div 中。您可能会看到我在这篇关于[在线图像缩略图的](http://dpatrickcaldwell.blogspot.com/2008/12/online-image-thumbnailer.html)文章中所说的内容。如果您找到指向实际[缩略图的链接，您会看到一些我通常使用的 CSS](http://thumbnailer.netuniverse.com/)。

要记住的一个区别是，在文档中，我使用表格而不是 div（因为它们更容易而且我很懒，而且我不再真的购买 HTML 中的 no tables 了......但这是另一个线）。无论如何，它工作得很好。如果您需要一些与您正在寻找的更相似的 CSS 样本，我可以向您发送更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T20:20:59.907

当我使用它时，我必须将照片裁剪为我在 Photoshop 中需要的常用尺寸。您可以随时在照片中添加黑条以保持比例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T23:05:43.940

有点晚了，但对于那些通过谷歌运行的人来说很方便（就像我一样）：

GalleryView（至少从 v3.0 开始）在 init 上有一个选项：panel_scale

从来源：

```
panel_scale: 'crop',            //STRING - cropping option for panel images (crop = scale image and fit to aspect ratio determined by panel_width and panel_height, fit = scale image and preserve original aspect ratio) 
```

将此设置为“适合”允许纵向、横向和奇异图像尺寸的无缝组合。

# flash - 在 AS3 中动态加载 AS2 文件 - 如何判断文件是否为 AS2

> ID：879524
> 
> 赞同：1
> 
> 时间：2009-05-18T20:05:04.650
> 
> 标签：flash, actionscript-3, actionscript-2

我有一个使用相同功能动态加载 AS2 和 AS3 SWF 文件的 Flash 程序。我正在尝试将所有 AS2 文件转换为 AS3，但我没有某些 FLA，因此它们需要保留为 AS2。

我需要做的是，如果加载的文件是 AS3，我需要运行一组额外的代码来设置一些交互功能。如果是 AS2，我只想加载它。

检查动态加载的 SWF 文件是否为 AS2 的代码是什么？

谢谢

* * *

更新。看起来 actionScriptVersion 是我正在寻找的，但它没有按我预期的方式工作。我的代码中有：

```
trace(loader.loaderInfo.actionScriptVersion); 
```

但是当我尝试加载一个我知道是 AS2 的文件时，我得到的是 3 而不是 2。我是否错误地使用了这段代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T20:12:33.730

检查加载内容的 loaderInfo 属性的 actionscriptVersion 属性：

[http://livedocs.adobe.com/flex/2/langref/flash/display/LoaderInfo.html#actionScriptVersion](http://livedocs.adobe.com/flex/2/langref/flash/display/LoaderInfo.html#actionScriptVersion)

# .net - 在 VS.NET 中，为什么运行调试不会在活动配置中构建所有选定的项目？

> ID：879526
> 
> 赞同：0
> 
> 时间：2009-05-18T20:05:33.637
> 
> 标签：.net, visual-studio-2008

为什么运行调试不会在活动配置中构建所有选定的项目？

通常我有一些 DLL 间接连接到主项目（MEF），当我在调试（F5）中运行时，VS.NET 不会构建这些 DLL。我必须先构建 (Ctrl+Shift+B)，然后调试应用程序以调试这些 DLL 的当前版本。

我假设 VS.NET 试图通过不构建非引用的 DLL 来加快调试过程，但在我的情况下它使它变得更慢。

有没有办法改变这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T20:12:44.697

我可以假设这些 DLL 只是被引用而不是当前解决方案的一部分吗？如果是这样，那就是为什么。为了让您实现我认为您正在寻找的功能，那么您将必须为您的解决方案引用的 DLL 添加项目，而不是直接引用 DLL，而是引用该项目. 这将允许您与主项目一起编译 DLL 并无缝调试。如果这不是你所说的，那么我道歉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T20:10:20.397

也许检查您的项目依赖项：项目 | 项目依赖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T17:05:59.537

以下设置也可能会影响在启动调试会话时构建解决方案中的哪些项目：

> 工具 -> 选项... -> 项目和解决方案 -> 构建和运行 -> 仅在运行时构建启动项目和依赖项

# java - 从 Java 程序中终止 Windows 会话

> ID：879527
> 
> 赞同：2
> 
> 时间：2009-05-18T20:05:36.833
> 
> 标签：java, tomcat, windows-services

我正在运行一个 tomcat 服务器，并试图更新该服务器上的代码。为此，我需要在 Windows 环境中可靠地关闭服务器。据我所知，tomcat shutdown.bat 脚本可能会遇到线程失控的问题，即使我不小心创建了一个会使 .bat 脚本无法工作的线程，我也需要它来工作。我一直在尝试的方法是使用服务名称运行 NET STOP 命令 - 但是在某些情况下，我有多个 tomcat 在一台机器上运行（这意味着多个服务）。有没有办法获取与运行我的代码的 tomcat 相关的服务名称？我应该研究一下我的问题还有其他好的解决方案吗？

我有很多客户，因此更喜欢不涉及安装额外软件或硬编码服务名称的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T20:15:47.857

如果你是在运行 tomcat 的 Vm 中的服务名称之后，你可能想查看 ManagementBean 的东西，下面关于 sun 的帖子会详细介绍；

[太阳论坛](http://forums.sun.com/thread.jspa?threadID=570865)

无论你做什么都将是相当 hacky，因为它完全依赖于操作系统！我肯定会建议坚持使用 Tomcat 控制和部署服务，您甚至不需要终止 Tomcat 进程，您应该能够使用 tomcat 热部署工具重新部署您的 web 应用程序 - 无论是从控制面板还是从提供的 ant 库与tomcat。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T20:10:10.163

使用 cygwin 和 netstat 查找监听该端口的进程，然后通过 PID 将其杀死将是我的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T20:12:47.817

Tomcat 热部署。有什么特别的原因不能只放入新的 WAR 文件吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-23T23:08:16.390

刚刚发现服务在 Windows 注册表中列出，其中包含“HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\”等键和服务名称。Image Path 包含可执行文件的完整路径名。如果我扫描注册表，我可以将 tomcat home url 与可执行文件的路径匹配，并从密钥中获取服务名称。然后我可以对此进行净停止。

# c++ - 如何监视文件上的锁以查看它何时被释放？[C++]

> ID：879530
> 
> 赞同：1
> 
> 时间：2009-05-18T20:06:33.757
> 
> 标签：c++, winapi, file

我正在寻找一种在*非托管*c++ 中创建一个程序的方法，该程序等待文件被解锁（因为它不再使用）然后做一些事情。我没有运气找到如何做到这一点，任何帮助将不胜感激！

更新：我可能已经回答了我自己的问题，请参见下文并告诉我您的想法。

更新：真正重要的是该文件是可写的，它是否仍在使用并不重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T20:41:23.890

这样的事情会等待而不会浪费 CPU 周期。

```
HANDLE h = FindFirstChangeNotification("C:\Path to folder holding file", FALSE, FILE_NOTIFY_CHANGE_LAST_WRITE);

while(true)
{
    if (CheckLockFile("C:\Path to file"))
    {
        // Do something
        break;
    }

    WaitForSingleObject(h, APPROPRIATE_TIMEOUT_VALUE);
    FindNextChangeNotification(h);
}

bool CheckLockFile(char* FilePath)
{
    HANDLE fh = CreateFile(FilePath, GENERIC_READ | GENERIC_WRITE, 0, NULL, OPEN_EXISTING, 0,NULL);
    if (fh == INVALID_HANDLE_VALUE)
    {
        return false; 
    }
    CloseHandle(fh);

    return true;
} 
```

这假设具有文件锁定的应用程序已将其打开以进行写入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T20:13:41.123

创建一个循环，每 5 秒调用一次[::CreateFile()](http://msdn.microsoft.com/en-us/library/aa363858(VS.85).aspx)直到它成功。在 dwShareMode 参数中传递 0，以确保没有其他进程打开了该文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T20:13:41.420

这是我的问题的一种可能的解决方案，有人看到这个问题吗？

```
#include <iostream>
#include <fstream>
#include <windows.h>
using namespace std;
void main(int argc, char ** argv) {
    if (argc < 2 || argc > 2) {
        return;
    }

    ofstream myfile;
    myfile.open(argv[1], ios_base::app);
    while (!myfile.is_open()) { Sleep(100); myfile.open(argv[1], ios_base::app); }
    myfile.close();

    // file should now be unlocked..
} 
```

再次感谢！

更新：将代码更改为更完整。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T22:58:25.003

听起来您想在另一个程序释放锁定后访问该文件。UNIX（和 Cygwin）通过简单地锁定文件来为您提供这种行为。

使用类似的东西`ScopeGuard`可能会变得`File_locker`不必要，但如果你不使用`ScopeGuard`，请像这样：

UNIX：

```
#include <stdexcept>
#include <string>
#include "sys/file.h" //flock
#include "sys/fcntl.h" //open

class File_locker {
    int file_descriptor;
  public:
    File_locker(std::string filename)
    {
        // you can use errno to determine why the open/flock failed,
        // but this is a demo, not production code

        file_descriptor = ::open(filename.c_str(), O_RDWR);
        if (file_descriptor < 0)
            throw std::runtime_error((std::string("unable to open file ")
                + filename).c_str());
        if (::flock(file_descriptor, LOCK_EX)) {
            ::close(file_descriptor);
            throw std::runtime_error((std::string("unable to flock file ")
                + filename).c_str());
        }
    }
    ~File_locker()
    {
        ::flock(file_descriptor, LOCK_UN); // don't forget to unlock
        ::close(file_descriptor);
    }
}; 
```

在 Windows 中，您似乎必须轮询文件。

视窗：

```
#include <string>
#include "windows.h"

class File_locker {
    HANDLE file_handle;
    static const int MAX_TRIES = 10;
    static const int SLEEP_INTERVAL = 500;

  public:
    File_locker(std::string filename)
    {
        // you can use GetLastError() to determine why the open failed,
        // but this is a demo, not production code
        for (int i = 0; i < MAX_TRIES; ++i) {
            file_handle = ::CreateFile(filename.c_str(),
                                       GENERIC_READ | GENERIC_WRITE,
                                       0,
                                       NULL,
                                       OPEN_EXISTING,
                                       FILE_ATTRIBUTE_NORMAL,
                                       NULL);
            if (file_handle != INVALID_HANDLE_VALUE)
                return;
            ::Sleep(SLEEP_INTERVAL);
            }
            throw std::runtime_error((std::string("unable to open file ")
                + filename).c_str());
    }
    ~File_locker()
    {
        ::CloseHandle(file_handle);
    }
}; 
```

像这样使用它：

```
#include <fstream>
#include <stdexcept>

// .. define File_locker, as above

int main()
{
    try {
        File_locker fl("filename.txt");
        // once fl is constructed, nobody else has the file locked
        std::fstream file("filename.txt");
        // ...
        return 0;
    }
    catch (std::runtime_error& ex)
    {
        // just bail
        return 1;
    }
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-05-20T13:32:00.273

只需使用系统锁定文件通知

# c++ - 模板类和类模板有什么区别？

> ID：879535
> 
> 赞同：96
> 
> 时间：2009-05-18T20:07:06.673
> 
> 标签：c++

模板类和类模板有什么区别？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2009-05-18T20:54:25.457

对于许多人来说，这是一个常见的混淆点（包括 Wikipedia 上的通用编程页面、一些 C++ 教程以及此页面上的其他答案）。就 C++ 而言，**没有“模板类”之类的东西，只有“类模板”。** 阅读该短语的方式是“类的模板”，而不是“函数模板”，后者是“函数的模板”。 **同样：类不定义模板，模板定义类**（和函数）。例如，这是一个*模板*，特别是一个*类模板*，但*它**不是**一个类*：

```
template<typename T> class MyClassTemplate
{ 
    ...
}; 
```

声明`MyClassTemplate<int>` **是一个类，**或者学究式地说，是一个基于模板的类。 *基于模板的类与不基于模板的类没有特殊属性。* 特殊属性是*模板本身的*。

短语“模板类”没有任何意义，因为就 C++ 而言，当应用于名词“类”时，“模板”一词作为形容词没有任何意义。它意味着存在一个**作为**（或定义）*模板的**类*，这不是 C++ 中存在的概念。

 ***我理解常见的混淆，因为这可能是基于单词在实际语言中以“模板类”的顺序出现的事实，这是另一回事。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-09-24T22:36:06.247

C++ 的创造者 Bjarne Stroustrup 在他*的《C++ 编程语言第 4 版*》23.2.1 定义模板一书中说：

> *有些人对术语类模板*和*模板类*进行语义区分。我不; 那太微妙了：请考虑这些术语可以互换。同样，我认为*function template可以与**template function*互换。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-05-18T23:44:23.193

不同之处在于 C++ 标准中根本不存在术语“模板类”。这是一个主要由认为“类模板”一词令人困惑的人使用的术语（如 Qt 公司诺基亚和以前的 Trolltech）。

标准没有它的概念，所以要由其他人来做出改变。有些人将其用作同义词，而另一些人则说术语“模板类”指的是实例化或明确专门化的类模板，这使其等同于术语“类模板专业化”。从历史上看，它有这个含义。[注释参考手册](https://rads.stackoverflow.com/amzn/click/com/0201514591)在第343 页定义

> 从类模板生成的类称为模板类，与专门定义的以*模板类名*作为其名称的类一样

non-terminal *template-class-name*等价于当今 Standard 中使用的 non-terminal *template-id*并且下来了`template-name < arguments >`。

* * *

让您熟悉今天的术语，这比使用可疑的旧术语更重要

```
// (1) defines a class template
template<typename T> class A { }; 

// (2) defines a class template explicit specialization 
template<> class A<int> { };

// (3) defines a class template partial specialization
template<typename T> class A<T*> { };

// (4) explicitly instantiates A<char>. 
template class A<char>;

// (5) implicitly instantiates A<short> (because of the member declaration)
struct D { A<short> a; }; 
```

*   ARM 将类 (2) 和由 (4) 和 (5) 生成的类称为*模板类*。我不确定 ARM 是否已经知道部分专业化。但是如果是这样的话（3）就不叫模板类了，因为（3）没有定义一个类，而是定义了一个模板。
*   当前的标准调用类 (2)，以及由 (4) 和 (5)*类模板专业化*生成的类。并且 (3) 被称为*部分专业化*，而不是*显式专业化*。它有时也将 (3) 称为专业化（3.2/5 - 但需要澄清交叉链接），尽管我发现这对我来说并不完全清楚，因为它将“专业化”定义为“类、函数或类成员”，其中 (3) 不满足。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-18T20:10:22.067

模板类与[模板方法设计模式](http://en.wikipedia.org/wiki/Template_method_pattern)有关，而类模板只是一个“填空”类模板。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-05-08T02:25:49.143

类模板是用于生成类的模板，而模板类是由模板生成的类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-23T18:19:02.790

模板类：具有通用定义的类或具有参数的类，直到客户端提供信息才实例化。它被称为普通模板的行话。带有前缀模板和使用 T 的简单类。类模板：类的单个构造由类模板指定，这与使用类构造单个对象的方式几乎相似。引用模板类的对象 Ex-classname objectname(argument list)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-17T19:32:48.600

类模板是不同类型对象的通用类。基本上，它提供了基于参数生成类的规范。每当创建一个新对象时，都会在内存中为此目的创建一个新类。这称为实例化类模板，类的每个实例化版本称为模板类。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-05T07:11:20.100

看看[这篇论文（来自 wg21，发表于 1992 年）](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/1992/)：

> # 一致的术语
> 
> 迄今为止，许多争论和分歧都与描述模板的章节中使用的术语有关。最常见的是**“功能模板”**和**“模板功能”**的不同应用来表达不同的想法和意图。由于没有应用一致的命名，结果是混乱和争论。
> 
> 就本文件而言，作为委员会在讨论模板时正式采纳的提案，以及澄清文件的目的；我建议我们采用形式化，即**尾随的“-template”**描述模板描述的一组类型或功能。并且前面的**'template-'**用于描述部分**'-template'**的模板定义，例如`'template-member-function'`. 因此 ：-
> 
> *   **'function-template'：**由模板描述的一组函数，参数化了作为参数提供给该模板的某些类型信息。例如 ：-

```
template<class T> int nullcheck( T* pT )
{ return ( pT != 0 ); } 
```

> *   **'class-template'：**由模板描述的一组类，参数化了作为参数提供给该模板的某些类型信息。例如 ：-

```
template<class T> class S {
int i;
public:
int sep_member();
int imm_member()
{ return 2; }
} 
```

> *   **“模板功能”：**不再允许使用此术语。**
> *   **'template-class'：**这个词是不允许的。**
>     
>     
> *   **'member-function-template'：**这个术语是不允许的，因为它描述了模板定义当前不支持的属性。使用上述术语约定，这将描述一个非类模板的成员，其定义本身就是一个模板。例如 ：-

```
class Normal { public:
template<class T> int foo(T*pT)
{ return ( pT == 0 ); }
}; 
```

> 但是，由于模板目前仅限于全局范围，因此这样的模板是无效的。
> 
> *   **'模板静态成员函数'：**
> *   **'模板成员函数'：**
> *   **“模板静态成员”：**
> *   **'template-static-data-member** **'template-member'：成员** 定义的替代术语，与它所属的 'class-template' 分开出现。例如 ：-

```
template<class T> int S<T>::sep_member()
{ return i; } 
```

# web-applications - 是否有软件可以插入我的网站以提供电子学习课程？

> ID：879546
> 
> 赞同：0
> 
> 时间：2009-05-18T20:09:46.763
> 
> 标签：web-applications

现在有没有人可以在我的网站中使用任何电子学习解决方案？我试图不从头开始创建一些东西。:-)

更新：有没有类似[http://www.knewton.com/](http://www.knewton.com/)的东西？甚至接近那个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T20:11:12.923

[Moodle](http://moodle.org/)是一个构建在线课程的平台。它是免费和开源的。它是使用 PHP 构建的。查看[关于页面](http://docs.moodle.org/en/About_Moodle)了解更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T20:12:12.407

我不太确定你想要什么，但[Moodle](http://moodle.org)是一个开源课程管理系统。

它的一些功能包括 - 论坛 - 多课程管理 - 课程注册 - 聊天 - 授权层

看看[演示](http://demo.moodle.org/)

你也可以看看

*   [前锋](http://www.efrontlearning.net/)
*   [登录管理系统](http://www.joomlalms.com/)

或者如果您有共享点 - [SharePointLMS](http://en.wikipedia.org/wiki/SharePointLMS)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T20:28:28.330

当我在寻找免费软件时，我总是查看[OpenSourceCMS 。](http://php.opensourcecms.com/scripts/show.php?catid=6&cat=Learning%20Management)我建议您查看[ATutor](http://php.opensourcecms.com/scripts/details.php?scriptid=130&name=ATutor)，即使您对[Moodle](http://php.opensourcecms.com/scripts/details.php?scriptid=137&name=Moodle)感兴趣。在这两者之间，你应该被覆盖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T20:34:23.843

添加到您的网站？怀疑——即使是最轻的 LMS 也是一个严肃的企业软件，您不妨询问添加社交网络应用程序或电子邮件客户端。

如果你能支持它并想运行一个 LMS，你可能会比 moodle 做得更糟，但几乎所有其他 LMS 都会花费你大量的钱。这些大多是银行、大学和政府机构等大型机构的玩具。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T02:05:01.867

如果您尝试仅显示文本数据，则使用来自 Joomla 或 moodle 的任何开源 cms 来点网核弹，但如果您正在查看显示书籍，那么您可能需要考虑使用 jalbum 和其他类似产品。我相信您可以在这些开放的 CMS 中嵌入各种对象作为文章的一部分。在旁注中，我听说我认识的人使用购物车软件通过制作产品和让学生成为客户来超越免费的电子学习计划讲座/笔记等。希望这可以帮助。问候，安迪

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-05T03:50:02.953

感谢所有答案，但[Adob​​e Acrobat Connect Pro](http://www.adobe.com/br/products/acrobatconnectpro/)正是我所寻找的。再次感谢 ！

# exception - ole32.dll 导致 GPF。如何解释 DebugDiag 报告？

> ID：879552
> 
> 赞同：2
> 
> 时间：2009-05-18T20:10:38.850
> 
> 标签：exception, com, vb6, debugging, crash

我的应用程序 ( [EasyJob](http://www.easyjob.net) ) 在退出时会导致访问冲突错误。这只发生在某些系统上，主要是 Vista，但它发生在某些 XP 机器上。该应用程序是用 VB6 编写的。

在找到一个显示这种行为的系统后，我在我的进程上运行了 DebugDiag 并得到了这个报告：

```
功能 Arg1 Arg2 Arg3
0x04246c81 726c7fc8 778bf188 0012fea4
ole32!CoDisconnectObject+55 726c7fc8 00000000 00000002
msvbvm60!BASIC_CLASS_Release+10b2d 00000002 013e07cc 727ae518
msvbvm60!TipUnloadProject+df2 013e08dc 013e07cc 727ae470
msvbvm60!EbResetProjectNormal+1a54 00000000 00000000 00000000

```

在 easyjobpro__PID__5240__Date__05_18_2009__Time_09_24_01PM__619__Second_Chance_Exception_C0000005.dmp 中，模块 C:\Windows\System32\ole32.dll 在尝试写入线程 0 上的内存位置 0x726c7fc8 时导致访问冲突异常 (0xC0000005)

好的，所以看起来是 OLE32.dll 导致了这种情况，但是我该如何解决呢？？？？哦:-)

有没有办法获得更长的堆栈跟踪，这样我才能真正看到我的代码的哪一部分启动了这个东西？它似乎与某些类被卸载（BASIC_CLASS_Release）有关，但我如何找出哪一个？

任何人都知道为什么这可能主要发生在 Vista 上？

这些东西让我发疯，所以任何帮助都将不胜感激。说真的，不管你在哪里，我都会给你买啤酒。哦:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T04:15:13.930

退出时的 GPF 通常是由错误的反初始化序列引起的。例如，可能会发生以下情况：已经调用了一些释放所有对象的代码，现在你有一个悬空指针，当前执行的代码正试图释放同一个对象。由于对象不再存在，您将获得一个 GPF。

这种情况通常很难调试。您需要的是一个专用的取消初始化，您可以在其中断开、完成、刷新、关闭等您在运行程序时初始化的所有对象。在大多数情况下，您只需将指向对象的指针设置为`Nothing`- 内置资源管理将使对象正确取消初始化。您必须在整个程序终止开始之前执行此代码 - 就像关闭主窗口时一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-19T08:04:12.733

我发现在这些情况下，VB Forms 经常引用对象。如果在 Unload 事件中将 Form 的变量设置为 Nothing，并确保在使用表单之后或在应用程序关闭之前调用 Unload，那么 GPF 就会消失。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-21T05:49:36.493

您可以尝试使用 John Robbins 的[Crashfinder](http://msdn.microsoft.com/en-gb/magazine/cc188721.aspx)来查看十六进制地址 (0x04246c81) 是否对应于您自己的任何代码。可能会为您提供有关涉及哪些对象的线索。使用调试信息构建应用程序以创建 PDB。然后使用新应用再次重现错误（因为 PDB 信息将更改 exe 中的十六进制地址）。

Crashfinder.exe 位于此[自解压 ZIP](http://download.microsoft.com/download/0/6/7/0678184e-905e-4783-9511-d4dca1f492b4/Apr98Bugslayer.exe)中。执行 File-New 创建一个新项目，然后 Edit-Add Image 加载您的 exe。然后编辑-查找崩溃并输入新的十六进制地址。它会告诉你十六进制地址对应的源文件和例程（如果它在你自己的代码中）。

# mysql - Mysql 每日性能报告

> ID：879555
> 
> 赞同：0
> 
> 时间：2009-05-18T20:11:28.443
> 
> 标签：mysql, performance, reporting

我希望创建一份关于我的 mysql 服务器当天表现的每日报告。但似乎 mysql 自正常运行以来只存储聚合数据。
一种方法是生成报告，然后重新启动 mysql（或执行 FLUSH STATUS）。

还有其他建议做同样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T20:26:09.333

查看[MySQL Cacti 模板](http://code.google.com/p/mysql-cacti-templates/)。它们提供了大量图表，显示您的 MySQL 服务器性能随时间的变化。这是一个[演示页面](http://www.xaprb.com/blog/2008/05/25/screenshots-of-improved-mysql-cacti-templates/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T05:14:03.700

仙人掌非常棒。它还可以帮助您在更改代码库时确定随时间推移的性能。

此外，它报告的一些值非常神秘。这是[一个解释 kilorows 的答案](https://stackoverflow.com/questions/840212/cacti-reports-kilorows-as-a-mysql-sort/840955#840955)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T05:22:30.730

我同意 Cacti 很棒，但我更喜欢使用 Munin，因为我发现在 Munin 中创建新模板更容易。

# c# - 如何在 C# 中分层两个音频文件？

> ID：879560
> 
> 赞同：2
> 
> 时间：2009-05-18T20:12:19.767
> 
> 标签：c#, audio, mp3

我需要混合两个音频文件。音频 1 将是一个静态文件，用于“标记”音频 2。为了清楚起见，我说的是音频标签而不是 ID3 标签。

有两个基本问题我无法解决。

1) 如何在与音频 2 混合时重复音频 1，以使结果与音频 2 的长度相同？

2) 音频 2 将是 MP3，我不想重新编码它并可能降低它的质量。

任何关于如何在 C# 中完成此操作的库或想法将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-19T16:30:55.953

您可以使用[NAudio](http://naudio.codeplex.com)来执行此操作。使用 WaveFileReader 类创建一个可以读取每个文件的 WaveStream（MP3 文件需要先转换为 PCM - 请参阅 NAudio 演示代码中 Mp3FileReader 的使用）。然后我会创建一个循环的派生 WaveStream（即在 Read 方法中，当你到达源数据的末尾时，回到开头）。

然后使用 WaveMixerStream32 将它们混合在一起。（它们需要先转换为 32 位 - 使用 WaveChannel32 来执行此操作）。此类还允许您设置每个文件的音量级别。最后，使用 Wave32To16Stream 转换回 16 位，然后使用 WaveFileWriter 制作最终文件。然后使用 LAME 转换为 MP3。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T20:31:56.373

您将不得不将 mp3 解码为波形格式，执行混合，然后将其编码回 mp3 格式。

有人将不得不向您指出一些 mp3 库。不过，我可以帮助你进行实际的混合。

这实际上是如何工作的，这有点酷。声音文件只是以一定间隔记录的一堆幅度样本。例如，这可能是一个声音：

0、12、128、14、-1、-13、-128、-64、-32

好的，这是一个非常短的声音，但请跟我来。假设我想将上述声音与此声音混合：

10、-12、-100、-150、-75、-25、-12、-0

这是很酷的部分，我们只需将两个数组相加：

10、0、28、-136、-76 ...

0 + 10 = 10 12 + -12 = 0 128 + -100 = 28 ...

您真正需要注意的唯一一件事是，您可以存储在波形文件中的幅度存在限制。现在大多数都是 16 位的，但您仍然可以制作 8 位的波形文件。如果您的幅度超过了波形文件的限制，您将不得不尽可能高或尽可能低并限制它。

无论如何，这就是它的要点。更精细的点，将需要解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-31T04:40:16.270

我建议使用 BASS 库。它可以“混合”并允许播放多种格式以及 DSP，例如 EQ/Fade/Compressor。[http://un4seen.com/bass.html](http://un4seen.com/bass.html)

# javascript - insertRow 与 appendChild

> ID：879563
> 
> 赞同：7
> 
> 时间：2009-05-18T20:12:42.153
> 
> 标签：javascript, dom, dhtml

向表中添加行时首选哪种方法？

var tr = tbl.insertRow(-1);

或者

var tr = document.createElement('tr'); tbl.appendChild(tr);

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-18T20:17:42.533

`insertRow`会好很多。它由 A 级浏览器[支持](http://www.quirksmode.org/dom/w3c_html.html)，它不那么冗长且 API 更简洁。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-09-17T01:07:10.510

我看到了 insertRow 的好论据，但我发现了一个缺点：insertRow 只能创建一个新的空行，而 appendChild 采用现有的行对象。使用 appendChild，您可以在表中移动行，将行从一个表移动到另一个表，或者从表中取出一行，然后再将其放回（对于分页表非常方便）。要对 insertRow（和 insertCell）执行相同操作，您必须打包内容，创建新行和单元格，然后将旧内容添加到新单元格中。笨拙，而且似乎效率较低。有没有更优雅的方法来做到这一点？采用现有行对象的 insertRow 变体会很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-18T20:28:54.540

`insertRow`可能被认为更可靠，因为它是 DOM[1]。

*在 DOM之外*运行时，该`appendChild`方法在所有测试的浏览器（IE6/7、FF3、Chrome2、Opera9）上始终更快（尽管略微），但在尝试修改文档中的表格（更常见的尝试）时，**速度明显较慢**。

 ***换句话说：绝对使用`insertRow`.

* * *

这些测试是在本地进行的，因此可能不可靠，请参阅此处的来源：http: [//pastie.org/482023](http://pastie.org/482023)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T22:19:52.007

如果确实使用 dom 方法，则应将 tr 附加到 tbody、thead 或 tfoot 元素，而不是 table 元素。

# visual-studio - 如何使用 EnvDTE 打开新的 Visual Studio 实例？

> ID：879575
> 
> 赞同：0
> 
> 时间：2009-05-18T20:14:28.797
> 
> 标签：visual-studio, com, automation

我正在使用 EnvDTE COM 对象来自动化 Visual Studio。我仍在查看文档，但是，我想我会在这里提出问题，看看是否有人已经知道如何做到这一点。

所以，问题是当我得到 DTE 对象并查看打开的解决方案时，如果解决方案不是我所期望的，我需要打开另一个 Visual Studio 实例。我不一定要在现有的 VS 实例上加载另一个解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T18:32:05.480

所以，我自己想出了这个。事实证明，RunningObjectTable 是遍历所有 VS 实例并寻找一个解决方案打开的方法，这是我所期望的。如果我没有找到可以使用的实例，那么我调用 CoCreateInstance() 来启动一个新的 VS IDE：

```
#define RETURN_ON_FAIL( expression ) \
result = ( expression );    \
if ( FAILED( result ) )     \
    return false;           \
else // To prevent danging else condition 
```

...

```
HRESULT result;
CLSID clsid;
CComPtr<IUnknown> punk;
CComPtr<EnvDTE::_DTE> dte;

RETURN_ON_FAIL( ::CLSIDFromProgID(L"VisualStudio.DTE", &clsid) ); 
```

...

```
// Search through the Running Object Table for an instance of Visual Studio
    // to use that either has the correct solution already open or does not have 
    // any solution open.
    CComPtr<IRunningObjectTable> ROT;
    RETURN_ON_FAIL( GetRunningObjectTable( 0, &ROT ) );

    CComPtr<IBindCtx> bindCtx;
    RETURN_ON_FAIL( CreateBindCtx( 0, &bindCtx ) );

    CComPtr<IEnumMoniker> enumMoniker;
    RETURN_ON_FAIL( ROT->EnumRunning( &enumMoniker ) );

    CComPtr<IMoniker> dteMoniker;
    RETURN_ON_FAIL( CreateClassMoniker( clsid, &dteMoniker ) );

    CComBSTR bstrSolution( solutionPath );
    CComPtr<IMoniker> moniker;
    ULONG monikersFetched = 0;
    while ( enumMoniker->Next( 1, &moniker, &monikersFetched ) == S_OK)
    {
        if ( moniker->IsEqual( dteMoniker ) )
        {
            result = ROT->GetObject( moniker, &punk );
            if ( result == S_OK )
            {
                dte = punk;

                if ( dte )
                {
                    CComPtr<EnvDTE::_Solution> solution;
                    RETURN_ON_FAIL( dte->get_Solution( &solution ) );

                    VARIANT_BOOL isOpen = FALSE;
                    RETURN_ON_FAIL( solution->get_IsOpen( &isOpen ) );
                    if ( !isOpen )
                    {
                        RETURN_ON_FAIL( solution->Open( bstrSolution ) );
                        break;
                    }
                    else
                    {
                        CComBSTR fullName;
                        RETURN_ON_FAIL( solution->get_FullName( &fullName ) );

                        if ( fullName == bstrSolution )
                            break;
                    }
                }
            }

            punk = NULL;
        }

        moniker = NULL;
    }

if ( !dte )
{       
    RETURN_ON_FAIL( ::CoCreateInstance( clsid, NULL, CLSCTX_LOCAL_SERVER, EnvDTE::IID__DTE, (LPVOID*)&punk ) );
    dte = punk;

    if ( !dte )
        return false;

    if ( solutionPath )
    {
        CComPtr<EnvDTE::_Solution> solution;
        RETURN_ON_FAIL( dte->get_Solution( &solution ) );

        CComBSTR bstrSolution( solutionPath );
        RETURN_ON_FAIL( solution->Open( bstrSolution ) );
    }
} 
```

# mysql - MySQL + Drupal：INNER JOIN 中忽略了索引

> ID：879576
> 
> 赞同：0
> 
> 时间：2009-05-18T20:14:45.520
> 
> 标签：mysql, indexing, inner-join

我们的环境：Drupal+MySQL

检查查询日志表明，源自 Drupal 核心的 node_load 函数的以下查询需要相当长的时间。

node_load 查询上的 EXPLAIN 表明该索引未在 USER 表上使用。

```
mysql> explain SELECT n.nid, n.vid, n.type, n.status, n.created, n.changed, 
    n.comment, n.promote, n.sticky, r.timestamp AS revision_timestamp, r.title, 
    r.body, r.teaser, r.log, r.format, u.uid, u.name, u.picture, u.data 
FROM xyz_node n 
INNER JOIN xyz_users u ON n.uid = u.uid 
INNER JOIN xyz_node_revisions r ON r.vid = n.vid;

+----+-------------+-------+--------+---------------+---------+---------+--------------+------+-------------+
| id | select_type | table | type   | possible_keys | key     | key_len | ref          | rows | Extra       |
+----+-------------+-------+--------+---------------+---------+---------+--------------+------+-------------+
|  1 | SIMPLE      | u     | ALL    | PRIMARY       | NULL    | NULL    | NULL         |  181 |             | 
|  1 | SIMPLE      | n     | ref    | vid,uid       | uid     | 4       | xyz.u.uid |    9 | Using where | 
|  1 | SIMPLE      | r     | eq_ref | PRIMARY       | PRIMARY | 4       | xyz.n.vid |    1 |             | 
+----+-------------+-------+--------+---------------+---------+---------+--------------+------+-------------+ 
```

知道会发生什么，以及如何强制 MYSQL 在此查询上使用索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T21:55:15.490

表不一定按照它们在`FROM`子句中指定的顺序连接。在这种情况下，看起来 MySQL 已经决定在`WHERE`查询中没有子句的情况下，首先扫描用户表，然后将其与其他表连接可能是最快的。

我要做的第一件事是`ANALYZE TABLE`在查询中涉及的所有三个表上运行。这会更新表统计信息和存储的键分布，并允许连接优化器做出更好的决策。之后运行该`EXPLAIN`语句并查看它是否已更改。

如果它没有改变，您可能需要使用`STRAIGHT_JOIN`关键字。这会强制连接优化器按照查询中指定的确切顺序连接表。为了帮助确定是否应该这样做，您应该`rows`从结果中获取所有值的乘积`EXPLAIN`，并将其与查询返回的实际行数进行比较。所以在这种情况下，将 1629 (181x9x1) 与实际行数进行比较。如果它们显着不同，则`STRAIGHT_JOIN`可能会调用 a（用作 的关键字`SELECT`，即`SELECT STRAIGHT_JOIN n.nid`...等）。

顺便说一句，有一种方法可以[告诉 MySQL 使用特定的 index](http://dev.mysql.com/doc/refman/5.0/en/index-hints.html)，但我认为它不会像现在这样适用于这个查询中的用户表，因为没有`WHERE`子句。如果您最终使用`STRAIGHT_JOIN`，您可能需要它，但在这种情况下，如果用户表不是连接中的第一个表，MySQL 可能会选择主键。

您还应该查看[EXPLAIN 语法页面](http://dev.mysql.com/doc/refman/5.0/en/using-explain.html)以获取更多有用的详细信息。

这个查询看起来不应该*那么*慢。如果没有 where 子句，您可能会在某处进行全表扫描，而 MySQL 已将其检查的总行数减少到大约 1700 行。看起来这只有在它是一个高使用查询时才会成为问题，在这种情况下，您可能想要检查底层架构（没有`WHERE`子句）涉及运行一个查询，该查询将影响系统中的每个用户，并且将随着更多用户的添加，只会变得更重。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T21:58:26.980

由于 MySQL 每次查询只能使用每个表的一个索引，因此您有时可以通过抛出这个看似无用的条件来获得“自由”范围的索引扫描。

```
WHERE u.uid > 0 
```

尝试添加该子句，可能 ALL 表扫描将更改为“范围”，这比全表扫描要好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-04T02:27:22.070

这有帮助吗？

在表节点中，在 (uid,vid) ALTER TABLE 'xyz_node' ADD INDEX `user_ver`('uid,'vid' ) 上创建索引（注意解释输出中的第二行.. 在标题可能的键下.. 你会看到 vid,uid )

# ruby-on-rails - 为什么 Capistrano 不复制我的文件？

> ID：879582
> 
> 赞同：1
> 
> 时间：2009-05-18T20:16:04.753
> 
> 标签：ruby-on-rails, capistrano, mediatemple

我目前正在使用 Capistrano 部署 Rails 应用程序。`Cap deploy:update_code`通常可以很好地将应用程序文件从 SVN 复制到 rails 容器，但是当我现在这样做时，它会复制文件夹但它们都是空的。关于为什么会发生这种情况或如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-18T21:49:26.343

手动在服务器上检查您的项目以查看是否所有内容都已签入。老实说，我见过的唯一一次是我

部署旧标签

或者

忘记检查东西

Capistrano 没有做任何花哨的事情——它只是在做 svn co 或 svn export（取决于你的设置）。

不过，查看您的 deploy.rb 会有所帮助。没有那个我只是猜测。

# ruby - 红宝石中有基数函数吗？

> ID：879583
> 
> 赞同：8
> 
> 时间：2009-05-18T20:16:05.143
> 
> 标签：ruby

在阅读此处的另一个问题时，在创建 URL 缩短服务时，建议获取行的 ID，然后将其转换为 base 62（0 到 9、a 到 z 和 A 到 Z）。在 Ruby 中是否有标准函数可以完成此任务？

编辑：不确定我是否足够清楚。

像这样的东西：123456.radix(62)

应该给出 123456 的基数 62。

我正在考虑写一个，如果它还没有的话。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-18T20:24:28.887

Ruby 整数类中的[to_s](http://www.ruby-doc.org/core/classes/Fixnum.html#M001069)方法有一个可选参数来指定基数，例如：

```
123456.to_s(16) 
```

但是，它只接受从 2 到 36 的值作为基数。

如果您想编写自己的编码器，[这个片段可能是一个很好的起点。](http://refactormycode.com/codes/125-base-62-encoding)还有一个[base62 Ruby Gem](http://base62.rubyforge.org/)，它在 base62 中添加了编码和解码方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-06-05T18:57:28.893

由于我最近需要在 Ruby 中使用基数，而且这是“Ruby 基数”的第一个结果，所以我想我会指出现在[有一个可以使用基数的 gem](http://rubyworks.github.com/radix/)。以下是如何使用它对 OP 的示例进行编码：¹

```
require 'radix'
SIXTYTWO = ('0'..'9').to_a + ('a'..'z').to_a + ('A'..'Z').to_a
123456.b(62).to_s(SIXTYTWO) 
```

¹需要该`SIXTYTWO`数组，因为 gem 不会对使用哪些字符来编码结果做出任何假设。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-06T14:06:22.057

无法打开 base62 编码 gem 的链接，也不喜欢 radix gem 的功能。SO 找到了一种用于 base62 编码的快速简单的解决方案：

[https://github.com/steventen/base62-rb](https://github.com/steventen/base62-rb)

# c# - 接口继承——一件好事？

> ID：879584
> 
> 赞同：2
> 
> 时间：2009-05-18T20:16:39.573
> 
> 标签：c#, inheritance, interface, language-agnostic

我刚刚第一次使用它 - 考虑：

```
IGameObject
    void Update()

IDrawableGameObject : IGameObject
    void Draw() 
```

我有一个使用 DrawableGameObjects 的关卡类——我把它改成 IDrawableGameObject 的，以减少耦合并帮助 TDD。

但是，我当然失去了在不强制转换的情况下调用 Update(..) 的能力——为了解决这个问题，我使用了继承。我以前从未使用过基于接口的继承——除了这种情况，我也没有真正找到需要。

我真的不想每次都在我的更新方法中进行转换，因为它每秒最多调用 60 次，另一方面，使用 IGameObject 的 foreach(..) 可能会起作用。

有什么建议吗？

**编辑**

我应该补充一下——我后来为单元测试创​​建了我的假的，然后实现了 IDrawableGameObject——这些类现在有很多方法，而不仅仅是每个接口的少数方法。我知道接口必须只有少数几个成员，但是继承是否违反了这个规则？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-18T20:22:54.147

> 我知道接口必须只有少数几个成员大

它们需要包含表达概念所需的数量——不多也不少。BCL 中有一些非常可怕的接口（尽管您可能会认为有些接口过大）。

我会说这绝对看起来像是接口继承的可接受使用。

顺便说一句...如果存在仅依赖于接口成员的实现逻辑，请考虑使用扩展方法，以便实现类不需要重复它...例如：

```
// just a silly example that only uses members of the target type
public static void DrawComplete(this IDrawableGameObject obj, Canvas canvas) {
   obj.Draw(canvas);
   foreach(var child in obj.Children.OfType<IDrawableGameObject>()) {
       child.DrawComplete(canvas);
   }
} 
```

然后所有调用者都获得该`DrawComplete`方法，而所有实现都不必重复它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-18T20:21:39.093

就“你应该这样做”而言，基于接口的继承实际上与普通继承没有什么不同。它仍然表示两种类型之间的“是”关系。因此，在这种情况下，如果 IDrawableGameObject 确实是 IGameObject，那么继承就有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T20:22:02.587

以这种方式应用接口继承需要注意的是，对根接口的添加可能会创建大量工作以使接口的实现符合新的更改（在大型项目中）。如果你有多个接口继承层，它也可能使更好地判断一个方法属于哪个接口变得更加困难。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T20:31:14.783

如果您为此使用 IGameObject 并且仅此目的，则可以考虑将它们组合到一个界面中。但是，如果您在代码的其他区域中独立使用 IGameObject，那么您正在做的事情是完全可以接受的。如果您可以以这种方式继承，则没有理由在接口中复制方法和属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-18T20:31:25.533

正如 JaredPar 所说，接口继承本身并没有错。只要一个是另一个的逻辑基类型，它只是一个实现细节。如果您不能简单地回答这个问题（IDrawableGameObject 是否始终是 IGameObject？），可能是您的模型需要重新思考。例如，将您创建的层次结构分成两个独立的 IUpdateable 和 IDrawable 接口可能是有意义的；没有什么可以阻止单个类实现两个接口。

在任何一种情况下，如果演员表困扰您，您可能会考虑保留一个列表和一个单独的列表，并在创建对象时将对象添加到其中一个或两个中。这是否简化了您的代码或使其复杂化取决于其他所有内容的组合方式。

# apache-flex - 奇怪的 Flex 双击行为

> ID：879592
> 
> 赞同：0
> 
> 时间：2009-05-18T20:19:25.027
> 
> 标签：apache-flex, events, click, double-click

在任何组件上使用双击启用时，有时我无法激活双击。

我意识到，如果我在快节奏的单击之间移动，它将永远不会触发双击事件。但是，如果我没有在两次点击之间移动鼠标，则会触发双击。

我正在考虑使用计时器来获得我自己的双击。

你会如何解决这个问题？

**样本**

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" applicationComplete="init()">
    <mx:Canvas id="bg" width="100%" height="100%" backgroundColor="white" />

     <mx:Script>
        <![CDATA[

            private function init():void {

            var cvstest:Canvas = new Canvas();
            cvstest.width = 200;
            cvstest.height = 200;
            cvstest.x = 100;
            cvstest.doubleClickEnabled = true;
            cvstest.addEventListener(MouseEvent.DOUBLE_CLICK, dc);
            cvstest.addEventListener(MouseEvent.MOUSE_DOWN, md);
            cvstest.setStyle("backgroundColor",0xff0000);
            this.addChild(cvstest);   

            }

         public function dc (e:MouseEvent) : void {
            trace("DOUBLE CLICK ON TEST CANVAS");
        } 
         public function md (e:MouseEvent) : void {
            trace("SINCLICK ON TEST CANVAS");
        } 

        ]]>    
    </mx:Script>
</mx:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T01:49:57.153

在我的触控板上，您的代码运行良好，但我想那是因为在点击之间移动鼠标非常困难。

如果我使用我的 wacom，我的双击似乎只有大约 1/3 的时间成功。

还有这个： [http](http://bugs.adobe.com/jira/browse/FP-15) ://bugs.adobe.com/jira/browse/FP-15 :(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-22T22:30:43.423

我可以通过清除`classInterval`并调用延迟验证来解决这个问题。

# performance - Oracle/PLSQL 性能

> ID：879593
> 
> 赞同：2
> 
> 时间：2009-05-18T20:19:47.820
> 
> 标签：performance, oracle, stored-procedures, plsql

当您将存储过程分解为多个过程而不是拥有一个大过程时，性能是否有任何差异？
哪个更快？

例如：

```
mainSP
  callSP1
  callSP2
  callSP3
end; 
```

而不是：

```
SP
  .... 
  ....
  .... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-18T23:49:27.380

在 10g 及更高版本中，有一个“优化编译器”。

在[11g](http://download.oracle.com/docs/cd/B28359_01/appdev.111/b28370/tuning.htm)中，它将执行“子程序内联。子程序内联用被调用子程序的副本替换子程序调用（对同一程序单元中的子程序）”

我认为内联是 10g 的一部分，但在那里找不到它的记录。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-20T02:57:38.420

在非常罕见的情况下，任何性能优势都会出现，例如，在循环中多次调用主 proc 并且每个单独的迭代不会花费太多时间。

大多数情况下，将程序分解为逻辑步骤的可维护性将远远超过可能获得的微小性能提升。

如前所述，基准测试和测试 - 除非您看到显着的好处，否则请追求可维护性 - 未来的开发人员会感谢您！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-18T20:24:47.230

理论上，每次从另一个存储过程调用存储过程时都会对性能造成轻微影响。然而，确切的影响会根据参数的数量和被调用的存储过程的类型而有所不同。

一般来说，这应该没关系。但是当有疑问时测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T20:23:50.883

这取决于正在发生的事情。

如果 mainSP 在 callSP1 上循环，并且 mainSP 可以只执行单个语句来处理一组数据，那么它会更慢。

调用其他过程有一点开销，传回错误消息也有一点痛苦。

如果你在重复代码，做一个通用的例程。其他明智的保持在一起。

# c++ - 移除一个数组元素并移动剩余的元素

> ID：879603
> 
> 赞同：32
> 
> 时间：2009-05-18T20:22:59.140
> 
> 标签：c++, arrays

如何删除数组的元素并将剩余元素向下移动。所以，如果我有一个数组，

```
array[]={1,2,3,4,5} 
```

并想删除 3 并转移其余部分，所以我有，

```
array[]={1,2,4,5} 
```

我将如何用最少的代码来解决这个问题？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2009-05-18T20:33:27.730

您只需要用数组中的下一个值覆盖要删除的内容，传播该更改，然后记住新端的位置：

```
int array[] = {1, 2, 3, 4, 5, 6, 7, 8, 9};

// delete 3 (index 2)
for (int i = 2; i < 8; ++i)
    array[i] = array[i + 1]; // copy next element left 
```

现在你的数组是`{1, 2, 4, 5, 6, 7, 8, 9, 9}`. 你不能删除额外的`9`，因为这是一个静态大小的数组，你只需要忽略它。这可以通过以下方式完成`std::copy`：

```
std::copy(array + 3, // copy everything starting here
          array + 9, // and ending here, not including it,
          array + 2) // to this destination 
```

在 C++11 中，use 可以使用`std::move`（算法重载，而不是实用程序重载）。

更一般地，用于`std::remove`删除匹配值的元素：

```
// remove *all* 3's, return new ending (remaining elements unspecified)
auto arrayEnd = std::remove(std::begin(array), std::end(array), 3); 
```

更一般地说，有`std::remove_if`.

请注意，`std::vector<int>`这里的使用可能更合适，因为它是一个“真正的”动态分配的调整大小数组。（从某种意义上说，要求它`size()`反映了已删除的元素。）

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-05-18T20:29:59.437

您可以使用[`memmove()`](http://linux.die.net/man/3/memmove)，但您必须自己跟踪数组大小：

```
size_t array_size = 5;
int array[5] = {1, 2, 3, 4, 5};

// delete element at index 2
memmove(array + 2, array + 3, (array_size - 2 - 1) * sizeof(int));
array_size--; 
```

但是，在 C++ 中，最好使用 a `std::vector`：

```
std::vector<int> array;
// initialize array...

// delete element at index 2
array.erase(array.begin() + 2); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-05-18T20:29:46.567

就移动元素而言，std::copy 完成了这项工作：

```
 #include <algorithm>

 std::copy(array+3, array+5, array+2); 
```

请注意，复制的前提条件是目标不得在源范围内。范围重叠是允许的。

此外，由于数组在 C++ 中的工作方式，这不会“缩短”数组。它只是在其中移动元素。无法更改数组的大小，但是如果您使用单独的整数来跟踪其“大小”，即您关心的部分的大小，那么您当然可以减少它。

因此，您最终得到的数组将就好像它被初始化为：

```
int array[] = {1,2,4,5,5}; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-18T20:28:49.937

你无法用数组实现你想要的。请改用向量，并阅读有关 std::remove 算法的信息。就像是：

```
std::remove(array, array+5, 3) 
```

将在您的阵列上工作，但不会缩短它（为什么 - 因为这是不可能的）。有了向量，它就像

```
v.erase(std::remove(v.begin(), v.end(), 3), v.end()) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-18T20:28:33.013

根据您的要求，您可能希望对这些类型的操作使用 stl 列表。您可以遍历您的列表，直到找到该元素，然后删除该元素。如果您不能使用列表，那么您将不得不自己移动所有内容，无论是通过某种 stl 算法还是手动。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-28T06:49:28.487

如果您最关心代码大小和/或性能（也用于 WCET 分析，如果您需要），我认为这可能是更透明的解决方案之一（用于查找和删除元素）：

```
unsigned int l=0, removed=0;

for( unsigned int i=0; i<count; i++ ) {
    if( array[i] != to_remove )
        array[l++] = array[i];
    else
        removed++;
}

count -= removed; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-02-06T07:54:44.190

请注意：如果放宽了保留元素顺序的要求，则将要删除的元素替换为最后一个元素会更有效。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-01-11T15:21:31.190

*Programming Hub*随机提供了一个代码片段，实际上**确实**减少了数组的长度

```
for (i = position_to_remove; i < length_of_array; ++i) {
        inputarray[i] = inputarray[i + 1];
} 
```

不确定它是否是后来才添加的行为。不过，它确实有效。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-25T12:55:01.233

它确实减少了***长度。****但是，如果我们谈论 int 数组，那么length*和*size*是有区别的。大小告诉我们给定数组的容量，我们可以在其中存储多少。数组的长度告诉我们实际有多少项。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-06T03:27:24.883

这个问题有点老了。尝试使用标准库提供的容器。这些是由专家设计的，并且经过了很好的测试。此外，标准库算法的未来发展旨在适应这些标准库容器。

如果由于某种原因您必须坚持使用数组，请尝试使用`std::array`

```
std::array<int, 5> array = { 1,2,3,4,5 };

//std::remove - The elements that are not deleted are moved to the front of the array,
//and returns the iterator of the element from where it can be completely erased.
auto itr = std::remove(array.begin(), array.end(), 3);

//New array with new size
std::array<int,4> newArray;

std::copy(array.begin(), itr, newArray.begin()); 
```

**不**使用也可以完成同样的事情`std::array`。但正如前面所说，许多其他好处更喜欢与`std::array`

```
int array[] = { 1,2,3,4,5 };    
auto itr = std::remove(std::begin(array), std::end(array), 3);    
int newArray[4];    
std::copy(std::begin(array), itr, std::begin(newArray)); 
```

# javascript - 正则表达式将输入标签拉出形式

> ID：879607
> 
> 赞同：0
> 
> 时间：2009-05-18T20:24:16.017
> 
> 标签：javascript, regex

我正在尝试从标签中提取所有`<input >`标签`<form>`。我创建了一个正则表达式，它可以识别整个`<form>`标签和所有代码直到结尾`</form>`，但我不知道如何匹配其中的所有`<input[^>]+>`内容。

编辑：数据是一个字符串。我不能使用 DOM 函数，因为它不是文档的一部分。如果我将它插入隐藏标签，它会改变页面的布局，因为该字符串包含整个 HTML 页面，包括指向外部样式表的链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T20:32:34.767

正则表达式根本不擅长解析 HTML（请参阅[您能否提供一些示例，说明为什么用正则表达式解析 XML 和 HTML 很困难？](https://stackoverflow.com/questions/701166)为什么）。您需要的是一个 HTML 解析器。请参阅[您能否提供一个使用您最喜欢的解析器解析 HTML 的示例？](https://stackoverflow.com/questions/773340)对于使用各种解析器的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T20:37:11.107

为什么不能只使用 DOM？

```
var inputFields = document.getElementById('form_id').getElementsByTagName('input');
for (var i = 0, l = inputFields.length; i < l; i++) {
    // Do something with inputFields[i] ...
} 
```

如果您必须使用正则表达式：

```
var formHTML = document.getElementById('form_id').innerHTML;
var inputs = formHTML.match(/<input.+?\/?>/g); 
```

请注意，上面的正则表达式并不可靠，并且在所有情况下都不起作用，因此为什么应该使用 DOM！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T21:34:12.083

您可以使用`document.createElement`创建一些元素，然后（ab）使用它的`innerHTML`属性从字符串创建 DOM：

```
var html = document.createElement("div");
html.innerHTML = "<form><input/><input/><input/></form>";

// now you can use dom methods, e.g. getElementsByTagName
var inputs = html.getElementsByTagName("input");
var foo = inputs[0].value; // ... 
```

`<html>`尽管 IE 无法解析完整文档（如果我没记错的话），您可能必须事先手动删除标签。

# jquery - ASP.NET MVC - 没有从表单中收集控制器参数？

> ID：879608
> 
> 赞同：1
> 
> 时间：2009-05-18T20:24:19.417
> 
> 标签：jquery, asp.net-mvc

我们现在在控制器上遇到这个问题；控制器如下所示：

```
public class AccountsController:Controller {
    public ActionResult List(int? page, int? pageSize, string keywords) {...}
} 
```

我们通过 jquery 发布到此页面：

```
$.post("/myapp/Accounts/List",
       {"page":0,"pageSize":10,"keywords":"asdf"}, 
       updategrid,
       "json");
...
function updategrid(result) {...} 
```

动作内部： Request.Form["keywords"] == "asdf", but keywords=="" 在这里我不知所措。为什么关键字没有我们想要的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-01T19:01:07.363

引用 Mark Worth 作为评论提供的答案...

> 你的控制器是如何被实例化的？我遇到了这个问题，我发现是我的 SpringControllerFactory 将我的控制器创建为单例（因此总是使用第一个请求中的值）。– 马克沃思 5 月 19 日 8:19
> 
> 就是这样！我的控制器在我的 Windsor 容器中注册为单例，因此我的 WindsorControllerFactory 返回了一个单例。– 比尔巴里 5 月 19 日 18:14

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T20:26:26.637

您不想传递 URL 上的值并让 MVC 的路由处理传递值吗？不作为实际变量传递？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T20:34:29.507

如果您要发布值，则可以只使用 FormCollection..

```
public class AccountsController:Controller {
public ActionResult List(int? page, FormCollection collection) {

  string keywords=collection["keywords"];
  ....
} 
```

}

此外，对于帖子，您可以将 id 附加到 url 并将其他参数放在 json 中。我也不认为有必要将您的属性名称放在 json 中的引号中。

```
$.post("/myapp/Accounts/List/"+page,
   {pageSize:10,keywords:"asdf"}, 
   updategrid,
   "json"); 
```

...函数更新网格（结果）{...}

...或者正如其他人所建议的那样，您可以创建一个具有所有可能参数的路线..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T20:47:27.607

使用此属性：

```
[AttributeUsage(AttributeTargets.All, Inherited = false, AllowMultiple = true)]
public class StringParamFilterAttribute:ActionFilterAttribute {
    public string Param { get; set; }

    public override void OnActionExecuting(ActionExecutingContext filterContext) {
        filterContext.ActionParameters[Param] = filterContext.HttpContext.Request[Param];
    }
} 
```

我能够在操作上添加一个属性，以便将此参数提供给该方法：

```
[StringParamFilter(Param="keywords")]
public ActionResult List(int? page, int? pageSize, string keywords) {...} 
```

现在关键字具有所需的值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-18T21:12:39.257

由于上面指定的属性有效，您是否检查过将 HttpContext.Request.Form 集合的内容与 MVC-Binder-Bound FormCollection 对象进行比较。？好像两组有区别。此外，尝试访问 FormCollection 的其他方式 - Get()、GetValue() ...检查 AllKeys 以获取您感兴趣的密钥？？？

另外，关于路线注册的想法......

如果您没有注册路由 myApp/Accounts/List/{page}/{pageSize} 并且页面大小仍在通过，则无需注册 myApp/Accounts/List/ {page}/{pageSize}/{keywords} 路由。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-18T21:29:52.437

这很奇怪，因为我机器上的代码有效。当您直接从浏览器请求 URL（没有 jQuery .post() 调用）时会发生什么，如下所示：

```
/myapp/Accounts/List?page=0&pageSize=10&keywords=asdf 
```

这会生成一个 GET 请求（而不是由 jQuery .post() 方法生成的 POST 请求——但仍应填充操作方法参数）。

出于调试的目的，您可能希望将操作方法​​更改为：

```
public ActionResult List(int? page, int? pageSize, string keywords)
{
     return Content(String.Format("page = {0}, pageSize = {1}, keywords = {2}",
                    page, pageSize, keywords));
} 
```

如果可行，下一步是使用类似（将返回的数据格式从 JSON 更改为文本）来测试您的 jQuery 调用：

```
 $.post('/myapp/Accounts/List',
        { 'page' : 0, 'pageSize' : 10, 'keywords' : 'asdf' },
        function(result) {
           alert(result);
        },
        'text'); 
```

上面的一切对我来说都是正确的，所以除非我错过了什么......我很困惑为什么它对你不起作用？我哪里做错了？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-18T09:02:43.070

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, Inherited = true, AllowMultiple = false)]
    public class JsonParametersFilter : ActionFilterAttribute
    {
        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            string contentType = filterContext.HttpContext.Request.ContentType;

            if (string.IsNullOrEmpty(contentType))
                return;

            if (!contentType.Contains("application/json"))
                return;

            string paramValue;

            using (var reader = new StreamReader(filterContext.HttpContext.Request.InputStream))
                paramValue = reader.ReadToEnd();

            var serializer = new JavaScriptSerializer();
            var rawResult = (IDictionary<string, object>)serializer.DeserializeObject(paramValue);

            var keys = new List<string>(filterContext.ActionParameters.Keys);

            foreach (var key in keys)
            {
                object value = null;

                if (rawResult.TryGetValue(key, out value))
                {
                    filterContext.ActionParameters[key] = value;
                }
            }
        }
    } 
```

这将尝试从输入流中填充所有参数值。

# javascript - 当文本被清除或不匹配时清除 extJS 组合值

> ID：879609
> 
> 赞同：2
> 
> 时间：2009-05-18T20:24:20.353
> 
> 标签：javascript, extjs

当显示文本为空白或与列表值不匹配时，如何让 extJS 组合字段清除其“值”，即自定义文本不在数据存储中？我敢肯定，我肯定缺少某些东西，因为如此简单的功能无法使原本令人印象深刻的组合变得毫无用处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T06:13:05.977

[http://extjs.com/forum/showthread.php?t=68403](http://extjs.com/forum/showthread.php?t=68403)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T08:59:59.987

您可以使用 forceSelection 强制进入列表，也可能需要放置一个事件以捕获文本值更改并使其无效，如果它不在商店中，也许是我不确定的有效事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T20:19:35.040

只是一个想法。在“keydown”事件中，在每次击键时执行“validate()”。然后使用 'valid' 和 'invalid' 事件来执行适当的操作（fe setValue('')）。

# .net - .NET 或 Visual C++ 6.0 的 Uuencode / Uudecode 库？

> ID：879621
> 
> 赞同：0
> 
> 时间：2009-05-18T20:26:25.013
> 
> 标签：.net, visual-c++

我有一些 uuencoded 文件，我需要使用 .NET 2.0 或 Visual C++ 6.0 对它们进行解码。有什么好的库/类可以帮助到这里吗？看起来这不是内置在 .NET 或 MFC 中的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T20:45:16.440

试试 uudeview，[在这里](http://www.fpx.de/fp/Software/UUDeview/)。它是一个运行良好的开源库，除了 uuencoded 文件之外，它还将处理日元文件。您可以将它与 C/C++ 一起使用，或者为 C# 编写互操作包装器，而不会遇到太多麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-06-14T05:02:21.147

Code Project 有一个 .NET 库 + 用于 uuencoding/decoding 的源代码。实际的算法本身在网络上传播得相当广泛，而且很短。

代码项目链接： http: [//www.codeproject.com/KB/security/TextCoDec.aspx](http://www.codeproject.com/KB/security/TextCoDec.aspx)

文章的简短介绍：

> 本文介绍了一个类库，用于在 .NET 中以多种算法对文件和/或文本进行编码/解码。这个库的一些特性：
> 
> 编码/解码 Quoted Printable 中的文本 编码/解码文件和 Base64 中的文本 编码/解码文件和 UUEncode 中的文本 yEnc 中的编码/解码文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-17T03:09:56.703

我知道这是一个老问题，但我想我会发布我的回复，以防其他人遇到它。

[我为编码器和解码器编写了一个基于 Stream 的 uuencoding 实现，](https://github.com/awalsh128/Awalsh128.Text)并进行了广泛的单元测试。

要解码任何流：

```
using (Stream encodedStream = /* Any readable stream. */)
using (Stream decodedStream = /* Any writeable stream. */)
using (var decodeStream = new UUDecodeStream(encodedStream))
{ 
    decodeStream.CopyTo(decodedStream);
    // Decoded contents are now in decodedStream.
} 
```

编码任何流：

```
bool unixLineEnding = // True if encoding with Unix line endings, otherwise false.
using (Stream encodedStream = /* Any readable stream. */)
using (Stream decodedStream = /* Any writeable stream. */)
using (var encodeStream = new UUEncodeStream(encodedStream, unixLineEnding))
{
    decodedStream.CopyTo(encodeStream);
    // Encoded contents are now in encodedStream.
} 
```

# visual-c++ - 使用 Visual C++ 绘制图形

> ID：879637
> 
> 赞同：1
> 
> 时间：2009-05-18T20:29:20.203
> 
> 标签：visual-c++, activex, zedgraph

我需要在使用 Visual C++ 构建的 activex 控件中绘制散点图。我看过[ZedGraph](http://zedgraph.org/)，但乍一看，我无法使用它，因为我没有框架。

我相信绘图必须使用 c++ 绘图上下文来完成。是否有任何 Visual C++ API 能够将其输出定向到绘图上下文对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-09-28T09:50:40.290

您可以在类似终端的模式下使用 ZedGraph。这很容易，您只需要记住缩放/调整大小。

请参阅此处的示例：http: //zedgraph.org/wiki/index.php?title= [Use_ZedGraph_to_generate_an_image_from_a_console_application](http://zedgraph.org/wiki/index.php?title=Use_ZedGraph_to_generate_an_image_from_a_console_application)

# c# - 在鼠标悬停时显示图片

> ID：879640
> 
> 赞同：1
> 
> 时间：2009-05-18T20:29:54.523
> 
> 标签：c#, asp.net

我有一个 ASP.NET 页面，我在其中显示 Gridview 控件中的产品。当用户将鼠标悬停在产品名称上时，应出现一个窗口并在其中显示该产品的图片（通过获取产品 ID 并为其查找相关图像。）

是否有 AJAX 控件或类似的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T20:42:09.257

有多种方法可以完成，但通常我将其视为具有图像标签的项目上的“工具提示”，它指向返回图像的 aspx 页面。或者直接上图。

这是我的第一个选项的示例

```
<img src="http://www.mysite.com/GenerateProductImage.aspx?productId=1" alt="My Product" /> 
```

为此，您必须创建 GenerateProductImage.aspx 页面，并将响应类型设置为图像，让它只返回图像。

这是一个[CSS ToolTip](http://www.kollermedia.at/archive/2008/03/24/easy-css-tooltip/)演示，它将帮助您开始使用样式部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T20:42:44.683

你有几个选择。您可以使用[jQuery 工具提示插件](http://jquery.bassistance.de/tooltip/demo/)，也可以尝试[Ajax Control Toolkit HoverMenu](http://www.asp.net/AJAX/AjaxControlToolkit/Samples/HoverMenu/HoverMenu.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-10-21T20:52:29.630

我做了一个有很多小图片的网站。当您将鼠标悬停在它们上时，它们会在页面顶部显示很大。我使用了这段 jQuery：

```
$(document).ready(function () {
    $(".picture").hover(function () {
        var src = $(this).attr("src");
        var max_size = 200;
        $("#img").attr("src", src);
    });
}); 
```

# jquery - 如何使用 jQuery（有序）向 DropDownList 添加选项？

> ID：879645
> 
> 赞同：1
> 
> 时间：2009-05-18T20:30:28.703
> 
> 标签：jquery, sorting, drop-down-menu

这个问题与这个问题类似[How do I add options to a DropDownList using jQuery?](https://stackoverflow.com/questions/317095/how-do-i-add-options-to-a-dropdownlist-using-jquery) 但我想以有序的方式添加它。另一个问题中的示例只是将其添加到列表的末尾。代码如下：

```
var myOptions = {
      1: "Test"
      2: "Another"
};
$.each(myOptions, function(val, text) {
      $('#Projects').append(
           $('<option></option').val(val).html(text)
      );
}); 
```

假设列表已经包含 3 个项目：“Blah”、“Foo”和“Zebra”。我希望能够将两个新选项（“Test”和“Another”）添加到下拉列表中，以便使用（“Another”、“Blah”、“Foo”、“Test”和“Zebra”）对其进行排序jQuery。

任何帮助深表感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T21:17:53.520

[在这里](https://stackoverflow.com/questions/667010/sorting-dropdown-list-using-javascript/667198#667198)查看与 jQuery 相关的答案。当然，您需要在调用 sort 方法之前添加新选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T21:32:43.380

试一试：

```
// Sort Function
function sortAlpha(a,b) { 
    if(a.name > b.name) {
        return 1;
    } else if(a.name < b.name) {
        return -1;
    }
    return 0;
}

// Options you want to add
var myOptions = [ {id:1, name:"Test"}, {id:2, name:"Another" } ];

// Create array from existing options and merge
$.merge(myOptions, 
    $.map( $('#Projects').find('option'), function(n){ 
        return { id:n.value, name:n.innerHTML}; 
    }) 
);

// Sort all options using above sort function
myOptions.sort(sortAlpha);

// Clear the <select> of existing options
$('#Projects').empty();

// Add the options to the <select>
$.each(myOptions, function() {
      $('#Projects').append(
           $('<option></option').val(this.id).html(this.name)
      );
}); 
```

# arrays - 在 Specman 中返回一个数组

> ID：879646
> 
> 赞同：1
> 
> 时间：2009-05-18T20:30:36.423
> 
> 标签：arrays, specman

如何从[Specman](http://en.wikipedia.org/wiki/Specman)中的方法调用返回数组？例如

```
method a : list of uint is { 
   var data: list of uint;
   .....
   result = data;

};

extend sys {
 var data_sys: list of uint;
 run() is also {
  data_sys = a();
 };
}; 
```

我的打印输出显示某些元素与数组数据和 data_sys 不同。你能告诉我我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T02:35:05.067

您发布的代码不会编译。放入更多打印语句或在 specview 中设置断点并逐步执行代码。您知道您正在打印输出的哪个测试阶段吗？如果您想在程序上设置 data_sys（而不是让 Specman 生成它），您应该指定不生成修饰符“！”。

```
[...]
!data_sys : list of uint;
[...] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-03-15T15:04:01.777

请提供一个[sscce](http://sscce.org/)。

没有它，这个*非常基本*的例子可能会：

```
extend sys {
  m() : list of uint is {
    print result.size(); // result.size() = 0
  };

  run() is also {
    var m := m();
  };
}; 
```

方法可以返回一个数组，该数组是默认分配给你的。它是由指针返回的，所以要注意。

作为一个经验法则，在计算它们时尽量避免返回列表的方法。尝试将列表作为参数传递，以传达其动态性质，除非该方法是创建方法或 getter：

```
collect_packets(packets : list of packet) is {...};
get_collected_packets() : list of packet is {...}; 
```

# asp.net - SqlException：用户 'NT AUTHORITY\NETWORK SERVICE 登录失败

> ID：879647
> 
> 赞同：10
> 
> 时间：2009-05-18T20:30:39.387
> 
> 标签：asp.net, sql-server, iis, iis-7

当我通过 VS 2008 运行 Web 应用程序时，该应用程序能够登录到 Sql 服务器并检查用户输入的凭据（用户名和密码），但是当我通过 IIS 7 浏览到该应用程序并尝试回发用户名和密码时，应用程序报告异常：

*System.Data.SqlClient.SqlException：用户“NT AUTHORITY\NETWORK SERVICE”登录失败*

*   使用 IIS 7，每个进程都在*网络服务*帐户下运行……那么我需要为该帐户分配什么权限才能使应用程序能够“联系”Sql server？

谢谢

**编辑：**

你好，

它现在有效，但我不明白为什么机器帐户需要这些权限。我知道机器帐户需要一些权限才能与特定程序（Sql server）“交谈”，但是为什么需要它访问数据库及其表的权限呢？不取决于连接字符串中指定的帐户吗

```
<add name="MyConnection" connectionString="data source=localhost; integrated security=sspi; initial catalog=aspnetdb;" /> 
```

拥有对数据库及其表的适当访问权限？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-18T20:35:53.073

您需要在 SQL Server 中为网络服务帐户实际创建一个帐户。然后，您将授予它访问您的数据库的权限，您授予该帐户的特定权限取决于您的数据库需要执行的任务的性质。

您可以通过“安全”部分在 SSMS 中完成所有这些操作，右键单击“登录”并选择添加。您将添加一个 Windows 帐户，然后您可以查找并验证名称“NETWORK SERVICE”。然后切换到“用户映射”部分并授予查看数据库的权限。我所说的权限取决于您，或者您可以为其分配 dbowner 权限以进行完全控制。

这样做之后你会没事的。我警告不要给应用程序提供比需要更多的权限！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-18T20:39:29.277

我个人会在自定义服务帐户下运行 Web 应用程序。如果您真的想在 Network Service 下运行它，[请参阅此 MSDN 文档](http://msdn.microsoft.com/en-us/library/ms998320.aspx#paght000015_sqlserver)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-18T21:55:12.383

当您在连接字符串中指定“集成安全 = sspi”时，我猜您期望模拟。但为此，您应该： 1\. 在 IIS 中打开集成身份验证 2\. 在 asp.net 中打开 Windows 身份验证： 3\. 在 asp.net 中打开模拟：

还要考虑如果您的 Web 服务器和 SQL Server 机器是不同的机器，这还不够。然后，您的用户帐户将需要受信任才能进行委派。这是 AD 中的特殊选项。

因此，您已经说过最好为 SQLSRV 连接设置单独的帐户。希望这可以帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-18T20:38:07.640

我建议创建一个服务帐户并让您的 IIS 7 进程作为该帐户运行。确保该帐户具有对 DB 的正确访问权限（如果它只是读取则 DB-REader）（如果它读取和更新则 DB-Reader 和 DB-Writer）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-10-18T03:39:29.973

我在新的 IIS 设置中遇到了同样的错误。我使用了“集成安全=假；用户 ID=sa；密码=您的密码”，一切正常。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-10-29T11:12:34.967

当您使用 IIS 配置应用程序时会发生此错误，并且 IIS 会转到 SQL Server 并尝试使用没有适当权限的凭据登录。设置复制或镜像时也会发生此错误。

我将介绍一个始终有效且非常简单的解决方案。

转到 SQL Server >> 安全 >> 登录并右键单击 NT AUTHORITY\NETWORK SERVICE 并选择属性

在新打开的登录属性屏幕中，转到“用户映射”选项卡。然后，在“用户映射”选项卡上，选择所需的数据库——尤其是显示此错误消息的数据库。在下方屏幕上，检查角色 db_owner。单击确定。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-04T17:13:26.693

我在一个 SharePoint 项目中遇到了这个问题。集成安全性已启用，并且数据库已配置为允许应用程序池的用户访问。

问题是模拟在*需要*关闭时被打开。[这个答案](https://stackoverflow.com/questions/125096/can-i-turn-off-impersonation-just-in-a-couple-instances)使我朝着正确的方向前进：

```
WindowsImpersonationContext noImpersonateContext = null;

try
{
    noImpersonateContext = WindowsIdentity.Impersonate(IntPtr.Zero);
    using (SqlConnection conn = CreateConnection())
    {
        // database calls...
    }
}
finally
{
    if (noImpersonateContext != null) noImpersonateContext.Undo();
} 
```

# svn - 颠覆“标签”，如 SourceSafe

> ID：879651
> 
> 赞同：18
> 
> 时间：2009-05-18T20:31:13.163
> 
> 标签：svn

有没有办法在 svn 中做类似于 SourceSafe 标签的事情？我知道分支/标签，但我希望有一种更轻量级的方式来为特定修订设置名称。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-18T20:35:50.797

这正是标签的用途。请参阅[svn-book 上的标签](http://svnbook.red-bean.com/en/1.1/ch04s06.html)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-18T20:38:32.803

Subversion 中的标签是执行此操作的正确方法。它们可能不是“看起来”轻量级的，因为它们是树副本，但因为 Subversion 非常懒惰地复制，它不会占用超出用于记录事务“将 /trunk/ 复制到 /tags/whatever”的任何磁盘空间。Subversion 书有[更多关于标签](http://svnbook.red-bean.com/en/1.5/svn.branchmerge.tags.html)的信息。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-18T20:35:51.763

标签是非常轻量级的，尽管它是由“复制”命令制成的。

在颠覆中，复制非常简单、快速且有效。您不应该担心性能或存储空间。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-28T01:49:03.503

虽然这个问题已经发布了很长一段时间，并且已经给出了使用标签的正确答案（反复:-) 我相信最有用的答案不仅提供*正确*的信息，而且*提供全面的*信息：深思熟虑，洞察力更进一步，等等。我写了一篇长篇文章，它作为我的**TortoiseSVN 和 Subversion Cookbook**（在 Simple-Talk.com 上）的[第 6 部分新出版。](http://www.simple-talk.com/dotnet/.net-framework/tortoisesvn-and-subversion-cookbook-part-6-snapshots/)其中一个食谱（*移动标签*）甚至解决了 AnT 在他/她的回答中提出的相关问题，并为您为什么不应该这样做提供了强有力的*论据*。

 ****以下是该章中激发您的智力胃口的食谱列表：

**管理标签**

*   将最新版本标记为发布
*   将早期版本标记为发布
*   点点滴滴贴标签
*   移动标签

**使用标签和修订调整您的世界观**

*   将您的环境恢复到带标签的修订版
*   将您的环境恢复到未标记的修订版
*   了解切换和更新之间的区别
*   了解还原和更新之间的区别
*   从以前的版本回到现在

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-18T20:34:56.227

您应该为此使用标签。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-09-07T14:53:39.767

如何更改修订日志中的标签位置？

示例：我创建了一个名为“生产版本”的标签，它将 file1.txt 标记为修订版 8，几天后我想要相同的标签告诉我 file1.txt 被标记为修订版 16

在 VSS 中，可以在这种情况下在修订日志中“移动标签”。在 SVN 中，我不想创建“生产版本 1”、“生产版本 2”......

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-08T14:26:42.557

如果您不想使用标签分支，则可以使用修订号。

随着 SVN 增加 revnum 以便每次签入都是唯一的，每个 revnum 成为给定时间整个 repo 的快照。因此，如果您知道您签入了“标签 1.0”并且分配了 revnum 232，那么您可以通过签出修订版 232 来重现该签入（即从该“标签”获取所有文件）。就这么简单.

但是，SVN 中没有将人类可读的文本与修订号相关联的工具，因此您必须自己跟踪它们（或找到为您执行此操作的软件包）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-03-28T12:27:07.617

我认为如果您从中继的修订号创建一个标签，那么您可以开始查看中继的日志。

# .net - 制作 Uri 对象的最通用方法？

> ID：879661
> 
> 赞同：2
> 
> 时间：2009-05-18T20:32:18.137
> 
> 标签：.net, uri

我需要将以下所有形式转换为 .NET Uri 对象：

*   “你好世界”
*   “..\某事\某事”
*   “../某事/某事/其他”
*   “c:\autoexec.bat”
*   “ [http://whatever.com/nevermind.html](http://whatever.com/nevermind.html) ”
*   或多或少您可能希望在构建本地或 Web 路径的东西中找到的任何其他内容。

我已经检查过`new Uri("..\somthing\something")`并且`new Uri("../something/somthing/else")`不工作。none`Uri`的静态似乎也适用于此。

大逻辑树和/或正则表达式旁边的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T20:33:31.537

尝试以下

```
new Uri("../whatever",UriKind.RelativeOrAbsolute); 
```

如果没有 RelativeOrAbsolute 标志，Uri 将尝试解析完整的绝对 URI。添加标志将让它基本上解析任何有效的 URI（相对或绝对）

# c# - c++中的结构和c#中的结构有区别吗？

> ID：879664
> 
> 赞同：23
> 
> 时间：2009-05-18T20:33:24.327
> 
> 标签：c#, c++

c++中的结构和c#中的结构有区别吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-05-18T20:47:25.813

`class`在 C# 中，您使用结构来定义值类型（与es声明的引用类型相反）。

在 C++ 中，结构与具有默认可访问性级别的类相同`public`。

所以问题应该是：C#中的结构与C++中的类不同吗？是的，它们是：你不能从C#结构派生，你不能有虚函数，你不能定义默认构造函数，你没有析构函数等。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-05-18T20:38:10.433

C# 中的结构与类非常不同，请参阅[结构与类](http://www.jaggersoft.com/pubs/StructsVsClasses.htm)了解更多信息

C++ 中的结构与类相同，除了成员默认情况下是公共的。除此之外，C++ 结构可以做 C++ 类可以做的所有事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T20:46:12.837

AC# struct 是托管代码，当没有人再引用它时，它将被 C# 垃圾释放。每当垃圾收集器决定清理它时，就会调用它的析构函数。

C++ 结构是一个非托管对象，您必须自己清理它。当您删除它或超出范围时，它的析构函数可以预见地被调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T20:38:19.950

是的。

c# 中的结构是普通的旧的，按值，数据类型（与通过引用并具有 OO 内容的类相反）

C++ 中的结构只是默认公共的类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-18T20:40:19.337

您是否尝试在托管 C++ 和 C# 之间进行互操作？如果是这样，有 C++ 的扩展允许这样做：见[链接](http://msdn.microsoft.com/en-us/library/4xs93xhk(VS.71).aspx)

# php - 在 CakePHP 中，什么是退出或从控制器方法返回的好方法？

> ID：879665
> 
> 赞同：3
> 
> 时间：2009-05-18T20:33:26.997
> 
> 标签：php, cakephp

在控制器的方法中，通常有许多“做正确的事”的检查。
例如，我检查用户是否正在访问正确的数据。

但是，我想知道在确实发生错误时返回或退出这些方法的最佳方法是什么。我一直在使用简单的 return 语句，但是有什么更像 CakePHP 并遵循框架的设计吗？还是简单的返回/退出语句足够好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T21:56:16.890

这真的取决于你想做什么。

如果您正在处理表单发布，并且数据验证失败，那么简单的返回就足够了。

如果验证已通过，则重定向更合适（以防止重复发布具有潜在可怕后果的数据）。

如果发生真正致命的错误，甚至可能不是由您自己的代码引起的（不太可能，对吗？:)），cake 为您提供了一些处理这些错误的选项，通过 AppController::appError() 或整个名为 AppError 的类。

在此处查看更多信息：

[http://book.cakephp.org/view/154/Error-Handling](http://book.cakephp.org/view/154/Error-Handling)

# php - 为什么我在 PHP 中使用 GD 自动生成的缩略图都是黑色背景？

> ID：879669
> 
> 赞同：0
> 
> 时间：2009-05-18T20:34:05.030
> 
> 标签：php, gd, thumbnails

好吧，我正在使用以下代码将任何旧图像转换为 160x120 缩略图，问题是如果溢出，背景总是黑色。我一直在窥探 PHP 文档，但这些函数似乎都没有任何颜色参数。任何想法或指示都会很棒！

```
$original = 'original_image.jpg';
$thumbnail = 'output_thumbnail.jpg';

list($width,$height) = getimagesize($original);
$width_ratio = 160 / $width;
if ($height * $width_ratio <= 120)
{
    $adjusted_width = 160;
    $adjusted_height = $height * $width_ratio;
}
else
{
    $height_ratio = 120 / $height;
    $adjusted_width = $width * $height_ratio;
    $adjusted_height = 120;
}
$image_p = imagecreatetruecolor(160,120);
$image = imagecreatefromjpeg($original);
imagecopyresampled($image_p,$image,ceil((160 - $adjusted_width) / 2),ceil((120 - $adjusted_height) / 2),0,0,ceil($adjusted_width),ceil($adjusted_height),$width,$height);
imagejpeg($image_p,$thumbnail,100); 
```

另外，如果您不清楚我的意思，请拍摄[这张图片](http://www.andrew-g-johnson.com/thumb.jpg)并认为它最初只是白色背景上的红色文字

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T20:42:20.083

[imagecreatetruecolor 函数](http://www.php.net/imagecreatetruecolor)创建一个黑色画布。

使用 imagefill 功能将其涂成白色...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T20:44:18.223

在将原件复制到新件之前添加：

```
$white = ImageColorAllocate($image_p, 255, 255, 255); 
ImageFillToBorder($image_p, 0, 0, $white, $white); 
```

编辑：

实际上，我不知道 imagefill 。. .

```
$white = imagecolorallocate($image_p, 255, 255, 255); 
imagefill($image_p, 0, 0, $white); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-29T04:33:18.227

不要使用 imagecreatetruecolor 代替 imagecreate，我认为这会解决

# .net - 如何使用 .NET 实现此 XML 摘录

> ID：879671
> 
> 赞同：1
> 
> 时间：2009-05-18T20:34:24.450
> 
> 标签：.net, xml

我正在尝试生成此 XML 语句（减去格式和特定​​值）：

```
<swatchcolor RGB="c5c5c5">
  <sldcolorswatch:Optical 
    Ambient="0.520000" 
    Transparency="0.000000" 
    Diffuse="0.800000" 
    Specularity="1.000000" 
    Shininess="0.400000" 
    Emission="0.000000" />
</swatchcolor> 
```

我正在使用这段代码：

```
Public Sub ToXml(ByVal writer As XmlWriter)
    writer.WriteStartElement("swatchcolor")
    writer.WriteAttributeString("RGB", _rgb)
    writer.WriteStartElement("sldcolorswatch", "Optical", My.Resources.xmlns)
    writer.WriteAttributeString("Ambient", _ambient.ToString("####################.000000"))
    writer.WriteAttributeString("Transparency", _transparency.ToString("####################.000000"))
    writer.WriteAttributeString("Diffuse", _diffuse.ToString("####################.000000"))
    writer.WriteAttributeString("Specularity", _specularity.ToString("####################.000000"))
    writer.WriteAttributeString("Shininess", _shininess.ToString("####################.000000"))
    writer.WriteAttributeString("Emission", _emission.ToString("####################.000000"))
    writer.WriteEndElement()
    writer.WriteEndElement()
End Sub 
```

不幸的是，我得到以下包含不需要的 xmlns 子句的 XML：

```
<swatchcolor RGB="c5c5c5">
  <sldcolorswatch:Optical 
    Ambient=".520000" 
    Transparency=".000000" 
    Diffuse=".800000" 
    Specularity="1.000000" 
    Shininess=".400000" 
    Emission=".000000" 
    xmlns:sldcolorswatch="http://www.w3.org/2000/xmlns/" />
</swatchcolor> 
```

我怎样才能摆脱“xmlns”？我知道它在那里，因为我使用的是 WriteStartElement 的第三个参数，但是当我使用双参数版本时，它会将“光学”一词移出位置，如下所示：

```
<swatchcolor RGB="c5c5c5">
  <sldcolorswatch 
    Ambient=".520000" 
    Transparency=".000000" 
    Diffuse=".800000" 
    Specularity="1.000000" 
    Shininess=".400000" 
    Emission=".000000" 
    xmlns="Optical" />
</swatchcolor> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T20:39:48.403

我想你想要：

```
writer.WriteStartElement("sldcolorswatch", "Optical", "http://www.solidworks.com/sldcolorswatch"); 
```

# c# - 单击gridview中的编辑时在Jquery中显示/隐藏手风琴面板？

> ID：879675
> 
> 赞同：2
> 
> 时间：2009-05-18T20:35:01.563
> 
> 标签：c#, asp.net, jquery, jquery-ui

我有一个 Jquery Accordion，下面有一个 asp.net GridView。当我单击 gridview 行中的编辑按钮时，它会抓取一些数据。根据单击的行，我想显示/隐藏手风琴面板。我可以在 GridView_RowEditing 事件中完成此操作，如果可以，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T13:02:36.317

```
ClientScript.RegisterStartupScript
(Me.GetType(), "ClientScript", "$(document).ready(function(){$('#accordion').accordion('activate', parseInt(theIndex));}", True) 
```

所以，我还没有尝试过，但它似乎应该工作。但是您可能需要稍微尝试一下，theIndex 需要从网格行传入变量。

# c# - 在 Windows CE 上正确处理网络超时

> ID：879676
> 
> 赞同：3
> 
> 时间：2009-05-18T20:35:06.260
> 
> 标签：c#, sockets, compact-framework, windows-ce

我正在尝试使用 .NET Compact Framework 在 Windows CE 上执行相对基本的 TCP 套接字发送/接收操作。我正在尝试设置超时值，以便在慢速连接超时时读取/写入，而不是永远阻塞。在完整的框架上，我可以简单地设置对象的`ReceiveTimeout`和`SendTimeout`属性`Socket`。不幸的是，在紧凑框架上设置这些属性会立即导致关于使用不受支持的套接字选项的 SocketException。

在进一步挖掘之后，我看到了[这个](http://msdn.microsoft.com/en-us/library/ms911745.aspx)页面，上面写着以下内容：

```
    下表显示了 setsockopt 不支持的 BSD 选项：

    值类型 描述
    SO_ACCEPTCONN BOOL 设置套接字监听。
    SO_RCVLOWAT int 设置 recv 低水位线。
    SO_RCVTIMEO int 设置接收超时。
    SO_SNDLOWAT int 设置发送低水位线。
    SO_SNDTIMEO int 设置发送超时值。
    SO_TYPE int 设置套接字类型。

```

所以看起来 Windows CE 不支持超时。超时最终会在无响应的连接上发生，但它似乎需要大约一分钟（必须在 WinCE 中的某处硬编码）。所以现在我试图弄清楚如何手动实现这一点。我的第一个想法是使用允许我的异步 IO `WaitOne(timeout)`。但是，这不会停止将卡在`EndSend()`or上的异步线程`EndReceive()`。因此，即使我可以使我的主线程超时，仍然会有线程徘徊，直到达到硬编码超时。在此期间，我的应用程序将无法正常关闭。我能想到解决这个问题的唯一方法是中止异步线程，但这似乎是一个非常糟糕的主意，我想避免它。

那么处理这个问题的正确方法是什么？必须有一个简单的方法，因为其他应用程序（例如 WinCE 上的 IE）似乎没有任何问题超时或取消挂起的网络操作，而且它们似乎也能够毫无问题地关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T15:26:39.130

我找到了一种干净的方法来做到这一点。基本上我在一个单独的线程中进行发送和接收，然后等待一个事件（手动或自动重置事件应该有效）。如果等待超时，那么简单地关闭（或处置）套接字将取消另一个线程中的阻塞读/写，从而导致该线程上的优雅退出（在 Send()/Receive() 调用上引发异常）。希望这对其他人有帮助......

# firefox - 总页面大小的 Firefox 扩展？

> ID：879684
> 
> 赞同：3
> 
> 时间：2009-05-18T20:36:21.157
> 
> 标签：firefox, firefox-addon

有谁知道一个好的 Firefox 扩展来监控总页面大小，包括所有补充文件。我知道有一个可以监视底部栏中的视图状态大小，这对于 ASP.Net 开发人员来说是非常宝贵的，但我想知道是否有一个可以监视整个大小——有点像 Firebug 的 Net 选项卡。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T20:39:52.647

Web 开发人员工具栏只需单击两次即可完成此操作：

信息 -> 查看文档大小

它还有很多其他方便的功能！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T20:37:40.543

[YSlow](http://developer.yahoo.com/yslow/)对我很有用（看看统计标签）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-07-30T05:18:21.437

我找到了我想要的扩展状态栏扩展。它在底部栏中非常简单地具有速度，大小等。

# grammar - MGrammar 和不止一种有效的解释

> ID：879688
> 
> 赞同：1
> 
> 时间：2009-05-18T20:37:16.537
> 
> 标签：grammar, mgrammar, interpretation

我认为我可能遇到的是悬空的 else 问题，但我不确定。我负责编写的语言需要支持多行 if 语句以及单行 ie

```
if(conditions){
   print "multi";
   print "line";
} 
```

和

```
if(conditions)
  print "single line" 
```

用我的语言对应

```
if conditions then begin
end 
```

和

```
if conditions then 
```

我还需要添加对 else-if 和 else's 的支持，两者都使用与上述相同的语法以及 begin's 和 end's。我花了一段时间试图让它工作并且我已经接近了，但是我现在使用的语法我得到了“这个输入有多个有效的解释......”错误。这是我正在使用的 MGrammar 代码：

```
syntax sIf = tIf conditions:Common.List(sBooleanExpression) tThen sBegin statements:sStatements2 (tEnd | tEnd2) next:Common.List(sElseIf)?
              => If{Conditions{conditions}, Body{statements}, Next{next}}
              | tIf conditions:Common.List(sBooleanExpression) tThen statement:sSingleStatement next:Common.List(sElseIf)?
              => SingleIf{Conditions{conditions}, Body{statement}, Next{next}}
              ;

syntax sElseIf = tElseIf conditions:Common.List(sBooleanExpression) tThen sBegin statements:sStatements2 (tEnd | tEnd2) next:Common.List(sElseIf)?
                => ElseIf{Conditions{conditions}, Body{statements}, Next{next}}
                | tElseIf conditions:Common.List(sBooleanExpression) tThen statement:sSingleStatement next:Common.List(sElseIf)?
                => ElseIf{Conditions{conditions}, Body{statement}, Next{next}}
                | e:sElse => e;

syntax sElse         = tElse tThen sBegin es:sStatements2 (tEnd | tEnd2) => Else{Body{es}}
                     | tElse statement:sSingleStatement => Else{Body{statement}}
                     ; 
```

这可能是第 10 个版本，因为我尝试了各种方法来使 if/else if/else 结构正常工作。

基本上，我的 Main 得到一个 StatementList，sIf 就是其中之一。sIf 尝试查找多行或单行 if 语句，后跟可选的 sElseIf（您不必有 else）。

我认为问题在于正则表达式编译器可能将 else if 视为 sElse 后跟 sIf 语句，而不是 sElseIf 语句。在预览模式下，它实际上完全按照我想要的方式绘制了树，所以如果有办法在我的 C# 应用程序中解析它时忽略此消息，那么我猜这也可以。

# jquery - 如何将 jQuery UI 日期选择器初始化为查询字符串中的日期？

> ID：879703
> 
> 赞同：7
> 
> 时间：2009-05-18T20:39:09.480
> 
> 标签：jquery, jquery-ui, datepicker

鉴于此标记：

```
// Calendar.html?date=1/2/2003
<script>
  $(function() { 
    $('.inlinedatepicker').datepicker();
  });
</script>
...

<div class="inlinedatepicker" id="calendar"/> 
```

这将毫不费力地显示一个内联日期选择器（太棒了！）。如何将日期选择器预设为通过查询字符串传入的日期？

请注意，在这种情况下，我没有输入框——只有一个附加到 div 的日历。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-18T20:52:23.760

这应该可行，尽管您可能会遇到语言环境问题（特别是 M/D/Y 与 D/M/Y）。

```
var date = location.match(/(?:\?|&)date=(\d+\/\d+\/\d+)(&|$)/)[1];
$('.inlinedatepicker').datepicker().datepicker("setDate", new Date(date)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-10-11T22:24:16.780

我设法做到了

```
$('.inlinedatepicker').datepicker().datepicker("setDate", new Date(2011,11,01)); // Date equals December 1, 2011. 
```

我不得不从月份中减去一个以获得正确的日期，因为日期似乎从零开始（0 = 一月）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-03-25T22:11:25.957

除了@Ben Blank 答案，您还可以像这样使用**defaultDate**

```
var date = location.match(/(?:\?|&)date=(\d+\/\d+\/\d+)(&|$)/)[1];
$('.inlinedatepicker').datepicker({defaultDate:new Date(date)}); 
```

# asp.net - 如何临时冒充用户打开文件？

> ID：879704
> 
> 赞同：1
> 
> 时间：2009-05-18T20:39:19.730
> 
> 标签：asp.net, security, file, impersonation, windows-principal

我想临时模拟一个域用户帐户以从 ASP.NET 站点读取网络驱动器上的文件。

我宁愿不为整个站点设置模拟或在服务器上设置映射驱动器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T20:46:03.710

我最终使用了[Michiel van Otegem 的代码：WindowsImpersonationContext 变得简单](http://www.vanotegem.nl/PermaLink,guid,36633846-2eca-40fe-9957-2859d8a244dc.aspx)，并添加了 IDisposable 的实现。我在[另一个关于 ASP.NET 中的模拟的问题中](https://stackoverflow.com/questions/125341/impersonation-in-net#125364)发现了这一点。

用法：

```
using (WindowsImpersonationContextFacade impersonationContext
     = new WindowsImpersonationContextFacade(
                    Settings.Default.ImpersonationDomain, 
                    Settings.Default.ImpersonationUser,
                    Settings.Default.ImpersonationPass))
                {
                    transactions  = TransactionLoader.Load(filePath);
                } 
```

代码：

```
using System;
using System.Runtime.InteropServices;
using System.Security.Principal;
using System.Security.Permissions;
using System.ComponentModel;

namespace MyNamespace
{
    public class WindowsImpersonationContextFacade : IDisposable
    {
        [DllImport("advapi32.dll", SetLastError = true)]
        public static extern bool LogonUser(String lpszUsername, String lpszDomain,
                                            String lpszPassword, int dwLogonType, int dwLogonProvider,
                                            ref IntPtr phToken);

        [DllImport("kernel32.dll", CharSet = CharSet.Auto)]
        public static extern bool CloseHandle(IntPtr handle);

        private const int LOGON32_PROVIDER_DEFAULT = 0;
        private const int LOGON32_LOGON_INTERACTIVE = 2;

        private string m_Domain;
        private string m_Password;
        private string m_Username;
        private IntPtr m_Token;

        private WindowsImpersonationContext m_Context = null;

        protected bool IsInContext
        {
            get { return m_Context != null; }
        }

        public WindowsImpersonationContextFacade(string domain, string username, string password)
        {
            m_Domain = domain;
            m_Username = username;
            m_Password = password;
            Enter();
        }

        [PermissionSetAttribute(SecurityAction.Demand, Name = "FullTrust")]
        private void Enter()
        {
            if (this.IsInContext) return;
            m_Token = IntPtr.Zero;
            bool logonSuccessfull = LogonUser(
                m_Username,
                m_Domain,
                m_Password,
                LOGON32_LOGON_INTERACTIVE,
                LOGON32_PROVIDER_DEFAULT,
                ref m_Token);
            if (logonSuccessfull == false)
            {
                int error = Marshal.GetLastWin32Error();
                throw new Win32Exception(error);
            }
            WindowsIdentity identity = new WindowsIdentity(m_Token);
            m_Context = identity.Impersonate();
        }

        [PermissionSetAttribute(SecurityAction.Demand, Name = "FullTrust")]
        private void Leave()
        {
            if (this.IsInContext == false) return;
            m_Context.Undo();

            if (m_Token != IntPtr.Zero) CloseHandle(m_Token);
            m_Context = null;
        }

        public void Dispose()
        {
            Leave();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-18T20:46:23.943

实际上，这个过程很简单，你可以使用这样的代码；

```
using System.Security.Principal;
...
// Obtain the authenticated user's Identity
WindowsIdentity winId = (WindowsIdentity)HttpContext.Current.User.Identity;
WindowsImpersonationContext ctx = null;
try
{
  // Start impersonating
  ctx = winId.Impersonate();
  // Now impersonating
  // Access resources using the identity of the authenticated user
}
// Prevent exceptions from propagating
catch
{
}
finally
{
  // Revert impersonation
  if (ctx != null)
    ctx.Undo();
}
// Back to running under the default ASP.NET process identity 
```

您的代码位于“现在模拟”部分。KEY 是 finally 块，这非常重要。您可以查看此[MSDN](http://msdn.microsoft.com/en-us/library/ms998351.aspx)文章以了解有关其工作原理的完整详细信息。

# serial-port - XON 和 XOFF 可以相等吗？

> ID：879708
> 
> 赞同：0
> 
> 时间：2009-05-18T20:39:33.473
> 
> 标签：serial-port, device-driver, control-flow

应用程序可以在 XON 和 XOFF 中使用设置相同的字符吗？如果是，我的设备驱动程序应该如何处理这种情况

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-19T07:43:58.717

XON 和 XOFF 是两个不同的 ASCII 字符，所以它们不能相等。

也就是说，使用 XON/XOFF 样式的流控制切换是一个坏主意，因为字符可能会丢失。我也没有看到使用两个字符的任何优势。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T20:44:00.250

如果您的驱动程序单独负责处理 xon/xoff，并且 xon/xoff 标志字符可以相同，那么我会说您需要为驱动程序中的 xon/xoff 状态设置一个小型状态机（标志），并且只有在已经看到 xoff 时才寻找 xon。

如果您对 xon/xoff 有硬件支持，那么您将不得不确定硬件是否支持此状态，如果不支持则返回适当的错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-18T20:48:56.667

虽然也许是允许的，但我从未见过这种情况。如果双方的状态机与丢失的字节不同步，我认为这是灾难的根源。

# java - 当父级退出时，Java 守护线程是否会自动终止？

> ID：879713
> 
> 赞同：5
> 
> 时间：2009-05-18T20:40:45.950
> 
> 标签：java, multithreading

如果一个线程创建了一个守护线程，我可以依赖这样一个事实，即当父级退出运行方法时，子级也会终止吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-18T20:41:45.433

否 - 线程是独立的。没有一个线程“拥有”另一个线程并强制终止的感觉。

如果你*真的*要问应用程序中的所有非守护线程是否都死了，你可以依靠进程死：是的，你可以。但这就是您可以依靠的*全部。*

特别是，如果有两个非守护线程，每个都创建了一个守护线程，并且*其中一个*非守护线程终止，那么剩下的三个线程将继续运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T20:42:47.273

我相信守护线程与 JVM 相关联，而不是创建线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T20:42:30.830

来自：http: [//journals.ecs.soton.ac.uk/java/tutorial/java/threads/daemon.html](http://journals.ecs.soton.ac.uk/java/tutorial/java/threads/daemon.html)

当进程中仅剩的线程是守护线程时，解释器退出。这是有道理的，因为当只剩下守护线程时，没有其他线程可以为守护线程提供服务。

# c# - 从字节数组中解包整数的惯用 c# 是什么？

> ID：879722
> 
> 赞同：1
> 
> 时间：2009-05-18T20:42:19.363
> 
> 标签：c#, parsing

我正在解析二进制文件格式。它以自然适合 c# 的 uint 类型的方式使用四个字节对整数进行编码。

实现此功能的最 C#/惯用方式是什么：

```
uint ReadUint(byte[] buffer); 
```

假设缓冲区包含 4 个元素。一个完整的答案可能会考虑由文件中的小/大端假设引起的一些常见字节排序，并记录它选择解析的那些。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-18T20:48:17.620

最基本的（但有点危险的 re endianness）是：

```
return BitConverter.ToUInt32(buffer, 0); 
```

除此之外，移位很好（根据您自己的回复） - 或者您可以[在 MiscUtil 中使用 Jon 的 EndianBitConverter](http://www.yoda.arachsys.com/csharp/miscutil/)来处理翻译。

（编辑）

我在 protobuf-net 中使用的 little-endian 位移版本与您的版本几乎相同 - 我只是按升序阅读它们并使用按位（非数字）加法：

```
return ((uint)buffer[0])
        | (((uint)buffer[1]) << 8)
        | (((uint)buffer[2]) << 16)
        | (((uint)buffer[3]) << 24); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T20:48:13.673

我通常会为此使用 BitConverter 类。在您的情况下是[BitConverter.ToUInt32()](http://msdn.microsoft.com/en-us/library/system.bitconverter.touint32.aspx)方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-18T21:13:07.727

这个回复实际上是一个扩展评论（因此是 wiki），比较了 BitConverter 的性能和使用 + 与 | 的位移；它仅适用于微优化！

结果第一：

```
BitConverter: 972ms, chk=1855032704
Bitwise: 740ms, chk=1855032704
ReadLength: 1316ms, chk=1855032704 
```

或者如果调整为允许非零基本偏移量的结果：

```
BitConverter: 905ms, chk=1855032704
Bitwise: 1058ms, chk=1855032704
ReadLength: 1244ms, chk=1855032704 
```

和代码：

```
using System;
using System.Diagnostics;
static class Program
{
    static void Main()
    {
        byte[] buffer = BitConverter.GetBytes((uint)123);
        const int LOOP = 50000000;
        uint chk = 0;
        var watch = Stopwatch.StartNew();
        for (int i = 0; i < LOOP; i++)
        {
            chk += BitConverter.ToUInt32(buffer, 0);
        }
        watch.Stop();
        Console.WriteLine("BitConverter: " + watch.ElapsedMilliseconds
            + "ms, chk=" + chk);

        chk = 0;
        watch = Stopwatch.StartNew();
        for (int i = 0; i < LOOP; i++)
        {
            chk += Bitwise(buffer);
        }
        watch.Stop();
        Console.WriteLine("Bitwise: " + watch.ElapsedMilliseconds
            + "ms, chk=" + chk);

        chk = 0;
        watch = Stopwatch.StartNew();
        for (int i = 0; i < LOOP; i++)
        {
            chk += ReadLength(buffer);
        }
        watch.Stop();
        Console.WriteLine("ReadLength: " + watch.ElapsedMilliseconds
            + "ms, chk=" + chk);

        Console.ReadKey();
    }
    static uint Bitwise(byte[] buffer)
    {
        return ((uint)buffer[0])
            | (((uint)buffer[1]) << 8)
            | (((uint)buffer[2]) << 16)
            | (((uint)buffer[3]) << 24);
    }
    static uint ReadLength(byte[] buffer)
    {
        uint result = ((uint)buffer[3]) << 24;
        result += ((uint)buffer[2]) << 16;
        result += ((uint)buffer[1]) << 8;
        result += buffer[0];
        return result;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T20:44:05.540

作为来自 C 的人，这就是我目前实现此功能的方式：

```
static uint ReadLength(byte[] buffer)
{
    uint result = ((uint) buffer[3]) << 24;
    result |= ((uint) buffer[2]) << 16;
    result |= ((uint) buffer[1]) << 8;
    result |= buffer[offset];
    return result;
} 
```

这会解析 Wikipedia 声称在 i386/Vista 上运行的 .net 实现上以 little-endian 方式布局的格式

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-18T20:46:50.073

假设您想读取它们的流（正如您的代码所建议的那样），我会说这非常接近事实上的标准方式：

```
MemoryStream ms = new MemoryStream(new byte[100]);
BinaryReader br = new BinaryReader(ms);
uint q = br.ReadUInt32(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-18T20:50:24.293

```
byte[] ba = new byte[]{ 0x10, 0xFF, 0x11, 0x01 } ;
var ui = BitConverter.ToUInt32(ba, 0); 
```

使用[BitConverter 类](http://msdn.microsoft.com/en-us/library/system.bitconverter.aspx)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-18T20:50:52.280

最简单的方法就是

```
int val  = System.BitConverter.ToInt32(buffer, 0); 
```

这使用当前系统字节序，这可能是也可能不是您想要的。

# .net - 什么是 .NET RIA 服务？

> ID：879725
> 
> 赞同：10
> 
> 时间：2009-05-18T20:42:36.867
> 
> 标签：.net, silverlight, wcf-ria-services

有人可以简要解释一下吗？它可以与非 Silverlight 客户端一起使用吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-18T21:23:09.203

基本上，.NET RIA 服务是一个框架，它隐藏了网络管道逻辑以通过有线 RPC 进行处理，并在客户端和服务器之间桥接代码。

您可以将其视为客户端/服务器开发的 RAD。

[来自 Dinesh 的博客：](http://blogs.msdn.com/dinesh.kulkarni/archive/2009/03/18/net-ria-services-is-now-public.aspx)
1\. 简化 n 层开发（并真正向您展示为您的 ORM 对象获取多层故事的更好方法 - LINQ to SQL 或 EF 或其他）
2\. 在 Silverlight 上支持富 Internet 应用程序 (RIA) 开发- 对于验证、身份验证、简单的数据绑定等，有很棒的端到端故事。
3\. 扩展您的 ASP.NET 开发经验。这是基于您已经知道和使用的。那里甚至还有一个用于 SEO 的 ASP.NET DomainDataSource 和模板（希望很快就会有一些 AJAX 的东西 - 手指交叉）。

为了回答你关于未来的一些其他问题，[布拉德艾布拉姆斯说](http://blogs.msdn.com/brada/archive/2009/03/19/what-is-net-ria-services.aspx)：

ASP.NET 访问——通过遵循 RIA 服务模式，您还可以轻松构建 ASP.NET 应用程序，同时利用 RIA 服务的所有内置功能，例如数据验证、授权等。在 3 月预览版中，我们提供了一个 asp:DomainDataSource 控件，它可以让 ASP.NET WebForms 轻松访问您的域逻辑。在此之上构建的是 ASP.NET 动态数据的未来版本，它可以非常容易地根据您的域逻辑生成通用的标准 UI。

回到雷德蒙德，我们正在努力通过 ASP.NET MVC 提供对域逻辑​​的非常干净的访问。这里的模式很酷，我迫不及待地想在未来的 CTP 中谈论它。

如果您将数据源的真实性与我们希望通过 .NET RIA 服务实现的各种演示选项相结合……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T21:01:04.350

我讨厌只是将您转发到一个网站，但是[这个](http://blogs.msdn.com/brada/archive/2009/03/19/what-is-net-ria-services.aspx)链接有一个很好的解释。

> Microsoft .NET RIA 服务通过将 ASP.NET 和 Silverlight 平台结合在一起，简化了传统的 n 层应用程序模式。RIA 服务提供了一种模式来编写在中间层上运行的应用程序逻辑，并控制对查询、更改和自定义操作的数据的访问。它还通过与客户端上的 Silverlight 组件和中间层上的 ASP.NET 集成，为数据验证、身份验证和角色等常见任务提供端到端支持。

据我了解，这是对代码管道和业务逻辑的抽象。例如，您可以使用 LINQ 使用自然查询语法查询这些服务，而不是直接处理控制器中的服务协议。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-28T14:12:16.027

尽量简洁...

使 Silverlight 前端和服务器后端尽可能透明地使用相同的模型类。通过使模型类可用于前端，为您提供集成的模型验证和操作。

心智模型：RIA 作为一个应用程序而不是两个应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T21:03:06.390

我根据我听过的一些播客猜测：

这是一个图书馆，它做这样的事情：

*   提供某种方式（我认为是 .NET 属性）在服务器端数据模型上指定数据验证
*   不知何故将此数据发送给客户端（也许是一些自定义的 wsdl-ish 类型的东西？）
*   在客户端，生成一些代理代码，执行与服务器上指定的相同的验证。

如果我没记错的话，他们只支持生成 .NET 代码，所以是 silverlight（可能还有 WPF/XBAP）应用程序。他们提到生成 javascript 作为未来的东西（可能）。

这个想法似乎是您可以超越简单的验证并执行“业务规则”等等，但我不太确定这将如何工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-22T20:03:04.733

有人说它适用于 Silverlight 和 WCF，就像 DCOM 适用于 VB6；在没有真正理解其含义的情况下，连接客户端和服务器非常容易。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-22T19:38:55.420

根据我从所有博客、演示文稿和官方营销声明中了解到的情况：

一种在应用程序逻辑、持久性逻辑和消费者（例如服务和/或 UI 客户端）逻辑之间清晰划分的模式。这鼓励了应用程序逻辑的重用以及持久性和消费者逻辑的可互换性。

是的，据我所知，将支持非 Silverlight 客户端。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-22T19:58:05.663

一般信息和下载[http://silverlight.net/forums/t/80529.aspx](http://silverlight.net/forums/t/80529.aspx)

详细信息在这里 RIAServicesOverviewforMay2009.docx [http://www.microsoft.com/downloads/details.aspx?FamilyID=76bb3a07-3846-4564-b0c3 -27972bcaabce&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyID=76bb3a07-3846-4564-b0c3-27972bcaabce&displaylang=en)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-10-10T10:02:35.017

上面有一个系列可以帮助你。

SL 4 + RIA

[http://www.dotnetscraps.com/dotnetscraps/post/Silverlight-and-NET-RIA-Services-Step-By-Step.aspx](http://www.dotnetscraps.com/dotnetscraps/post/Silverlight-and-NET-RIA-Services-Step-By-Step.aspx)

# c# - 加载 XDocument 时可以使用预定义的名称空间吗？

> ID：879728
> 
> 赞同：5
> 
> 时间：2009-05-18T20:42:50.660
> 
> 标签：c#, .net, xml, linq, xml-namespaces

我经常需要处理包含命名空间元素但不声明命名空间的 XML 文档。例如：

```
<root>
  <a:element/>
</root> 
```

因为前缀“a”从未分配过命名空间 URI，所以文档是无效的。当我使用以下代码加载这样的 XML 文档时：

```
using (StreamReader reader = new StreamReader(new FileStream(inputFileName,    
       FileMode.Open, FileAccess.Read, FileShare.ReadWrite))) {
            doc = XDocument.Load(reader, LoadOptions.PreserveWhitespace);
} 
```

它抛出一个异常，说明（正确地）该文档包含一个未声明的命名空间并且格式不正确。

那么，我可以为解析器预定义默认命名空间前缀 -> 命名空间 URI 对吗？XMLNamespaceManager 看起来很有希望，但不知道如何将其应用于这种情况（或者如果可以的话）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-18T21:43:05.670

您可以创建一个知道名称空间的`XmlReader`with an ；`XmlParserContext`以下适用于`XmlDocument`和`XDocument`：

```
class SimpleNameTable : XmlNameTable {
    List<string> cache = new List<string>();
    public override string Add(string array) {
        string found = cache.Find(s => s == array);
        if (found != null) return found;
        cache.Add(array);
        return array;
    }
    public override string Add(char[] array, int offset, int length) {
        return Add(new string(array, offset, length));
    }
    public override string Get(string array) {
        return cache.Find(s => s == array);
    }
    public override string Get(char[] array, int offset, int length) {
        return Get(new string(array, offset, length));
    }
}
static void Main() {
    XmlNamespaceManager mgr = new XmlNamespaceManager(new SimpleNameTable());
    mgr.AddNamespace("a", "http://foo/bar");
    XmlParserContext ctx = new XmlParserContext(null, mgr, null,
        XmlSpace.Default);
    using (XmlReader reader = XmlReader.Create(
        new StringReader(@"<root><a:element/></root>"), null, ctx)) {

        XDocument doc = XDocument.Load(reader);

        //XmlDocument doc = new XmlDocument();
        //doc.Load(reader);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-09-16T20:25:03.317

在上一个答案的基础上，您可以通过首先加载到 XmlDocument 并将 XmlDocument 的 OuterXml 解析为 XDocument 来保留命名空间前缀

```
XDocument LoadWithPrefix(Stream stream)
{
    XmlNamespaceManager mgr = new XmlNamespaceManager(new NameTable());
    mgr.AddNamespace("a", "http://foo/bar");
    XmlParserContext ctx = new XmlParserContext(null, mgr, null, XmlSpace.Default);
    using (XmlReader reader = XmlReader.Create(stream, null, ctx)) 
    {
        XmlDocument doc = new XmlDocument();
        doc.Load(reader);
        return XDocument.Parse(doc.OuterXml);
    }
} 
```

# windows - 是否可以在已经使用 GDI+ 的窗口中使用 OpenGL？

> ID：879731
> 
> 赞同：0
> 
> 时间：2009-05-18T20:43:23.653
> 
> 标签：windows, opengl, drawing, gdi, openglcontext

基本上，我被要求渲染到一个屏幕外 DC，该 DC 设置（我不确定如何）使用 GDI+。当我尝试将 OpenGL 上下文与 DC 相关联时，它只是失败了（即返回零但没有错误）。SetPixelFormat 也失败了（可能是因为它已经设置好了？），再次返回零，而不是错误。

任何人都知道，在这种情况下（即其他人使用 GDI+ 的窗口的屏幕外上下文）是否有可能创建 OpenGL 上下文并使用 OpenGL 进行我自己的渲染？（如果可能，为什么 wglCreateContext 会失败？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T20:50:10.457

本文向您展示了连接 GDI 窗口的所有步骤：http: [//nehe.gamedev.net/data/lessons/lesson.asp ?lesson=01](http://nehe.gamedev.net/data/lessons/lesson.asp?lesson=01)

本质上，您必须：

1.  创建一个窗口
2.  注册窗口
3.  获取窗口绘图区的设备上下文
4.  设置设备上下文的像素格式
5.  调用 wglCreateContext
6.  调用 wglMakeCurrent
7.  显示窗口

如果您已经可以访问设备上下文，请跳过前两个步骤。

*在您的情况下，您可能会看到 wglMakeCurrent 是否是您所需要的。否则，您可能希望发布有关您遇到的错误和行为的更多详细信息。*

# python - 使用过滤器记录

> ID：879732
> 
> 赞同：52
> 
> 时间：2009-05-18T20:43:48.847
> 
> 标签：python, logging

我正在使用 Logging ( `import logging`) 来记录消息。

在 1 个单个模块中，我在调试级别记录消息`my_logger.debug('msg')`；

这些调试消息中的一些来自，`function_a()`而另一些来自`function_b()`；我希望能够根据它们是来自 a 还是来自 b 来启用/禁用日志记录；

我猜我必须使用 Logging 的过滤机制。

有人可以告诉我如何对下面的代码进行检测以执行我想要的操作吗？

```
import logging
logger = logging.getLogger( "module_name" )

def function_a( ... ):
    logger.debug( "a message" )

def function_b( ... ):
    logger.debug( "another message" )

if __name__ == "__main__":
    logging.basicConfig( stream=sys.stderr, level=logging.DEBUG )

    #don't want function_a()'s noise -> ....
    #somehow filter-out function_a's logging
    function_a()

    #don't want function_b()'s noise -> ....
    #somehow filter-out function_b's logging
    function_b() 
```

如果我将这个简单的示例扩展到更多模块和每个模块的更多功能，我会担心很多记录器；

我可以将每个模块减少到 1 个记录器吗？请注意，日志消息是“结构化的”，即如果记录它的函数正在做一些解析工作，它们都包含一个前缀`logger.debug("parsing: xxx")`- 我可以用一行代码以某种方式关闭所有“解析”消息（不管发出消息的模块/功能？）

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2009-05-18T21:27:07.323

只需实现一个子类`logging.Filter`：[http](http://docs.python.org/library/logging.html#filter-objects) ://docs.python.org/library/logging.html#filter-objects 。它将有一个方法，`filter(record)`检查日志记录并返回 True 以记录它或 False 以丢弃它。然后，您可以通过调用其方法在 a`Logger`或 a上安装过滤器。`Handler``addFilter(filter)`

例子：

```
class NoParsingFilter(logging.Filter):
    def filter(self, record):
        return not record.getMessage().startswith('parsing')

logger.addFilter(NoParsingFilter()) 
```

或者类似的东西，无论如何。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-05-18T20:49:26.370

不要使用全局。这是一场等待发生的事故。

您可以为您的记录器指定任何对您有意义的以“.”分隔的名称。

您可以将它们作为层次结构进行控制。如果您有名为`a.b.c`and 的记录器`a.b.d`，您可以检查`a.b`并更改两个记录器的日志记录级别。

您可以拥有任意数量的记录器——它们很便宜。

最常见的设计模式是每个模块一个记录器。请参阅[命名 Python 记录器](https://stackoverflow.com/questions/401277/naming-python-loggers)

做这个。

```
import logging

logger= logging.getLogger( "module_name" )
logger_a = logger.getLogger( "module_name.function_a" )
logger_b = logger.getLogger( "module_name.function_b" )

def function_a( ... ):
    logger_a.debug( "a message" )

def function_b( ... ):
    logger_b.debug( "another message" )

if __name__ == "__main__":
    logging.basicConfig( stream=sys.stderr, level=logging.DEBUG )
    logger_a.setLevel( logging.DEBUG )
    logger_b.setLevel( logging.WARN )

    ... etc ... 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-10-27T20:26:49.570

我发现了一种在主脚本中使用函数的更简单方法：

```
# rm 2to3 messages
def filter_grammar_messages(record):
    if record.funcName == 'load_grammar':
        return False
    return True

def filter_import_messages(record):
    if record.funcName == 'init' and record.msg.startswith('Importing '):
        return False
    return True

logging.getLogger().addFilter(filter_grammar_messages)  # root
logging.getLogger('PIL.Image').addFilter(filter_import_messages) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-11-10T21:06:36.413

我找到了一种更简单的方法，如何使用**sshtunel**模块过滤默认日志记录配置以解决以下问题，抑制 INFO 级别的消息。

*带有前 2 条不良记录*的默认报告如下所示：

```
2020-11-10 21:53:28,114  INFO       paramiko.transport: Connected (version 2.0, client OpenSSH_7.9p1)
2020-11-10 21:53:28,307  INFO       paramiko.transport: Authentication (password) successful!
2020-11-10 21:53:28,441  INFO       |-->QuerySSH: Query execution successful. 
```

记录器配置更新：

```
logging.basicConfig(
            level=logging.INFO,
            format='%(asctime)s  %(levelname)-10s %(name)s: %(message)s',
            handlers=[
                logging.StreamHandler(),
                logging.FileHandler(self.logging_handler)
            ]
        )

# Filter paramiko.transport debug and info from basic logging configuration
logger_descope = logging.getLogger('paramiko.transport')
logger_descope.setLevel(logging.WARN) 
```

结果我很满意，看起来像这样：

```
2020-11-10 22:00:48,755  INFO       |-->QuerySSH: Query execution successful. 
```

# xcode - Xcode #pragma mark 对我不起作用

> ID：879738
> 
> 赞同：2
> 
> 时间：2009-05-18T20:44:31.730
> 
> 标签：xcode

在 Xcode 方法列表（通过 Ctrl-2 激活）中，方法名称总是按字母顺序列出。如果我做：

#pragma 标记 -

#pragma 标记 TableView 委托

...表视图代表在这里...

该清单没有在表格视图委托方法之前显示分隔符或“表格视图委托”，而是在列表底部显示它们。但我已经看到它在其他人的 Xcode IDE 中工作。知道为什么我会得到这个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-18T20:49:31.050

我认为您可能在 Code Sense 下的 XCode Preferences 中启用了“按字母顺序排序列表”。取消选中此选项，它应该可以工作。有关详细信息，请参阅[这篇关于#pragma mark 的文章](http://iphonedevelopertips.com/xcode/xcode-and-pragma-mark.html)。

# sqlite - 如何让基于 sqlite 数据的耀斑可视化 (swf) 在 Adob e AIR 桌面应用程序中工作？

> ID：879751
> 
> 赞同：0
> 
> 时间：2009-05-18T20:46:36.203
> 
> 标签：sqlite, flash, air, desktop-application, flare

我试图找到一个如何让基于 sqlite 数据的耀斑可视化（swf）在 Adob​​e AIR 桌面应用程序中运行的示例，但没有成功。

这是我所拥有的：

1.  ProjectA：基于[教程](http://flare.prefuse.org/tutorial)在 FlexBuilder 中完成的耀斑可视化示例；
2.  ProjectB：一个桌面 AIR 应用程序，能够根据[教程](http://www.insideria.com/2008/03/air-api-querying-a-local-datab.html)从 sqlite 检索数据。

这是我想要的：

1.  通过 flash.data.SQLResult 从 sqlite db 查询数据（这不会出现在 ProjectA 命名空间中进行导入 - 无法在没有 AIR 的情况下尝试基于 sqlite 的可视化）
2.  将结果集转换为flare.data.DataSet并使用flare创建可视化
3.  在 windowedApplication 中显示可视化（我不知道如何从 2 添加可视化结果。）
4.  控制可视化（一旦前三个点起作用就会到达那里）

尝试了谷歌搜索和 adobeairtutorials，但找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-09-27T21:15:38.843

您还可以查看文章[Using Flare Visualization with Flex](http://www.gridlinked.info/using-flare-visualization-with-flex/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T21:38:59.967

在注意到flare.vis.Visualization 对象与我的主窗口断开连接后，我的问题得到了解决。

这是我解决问题的方法：

```
mx:Canvas id="container" // "main window" definition in app.mxml file

<mx:Script>
...
vis = new Visualization(data);
container.stage.addChild(vis); // make sure that you add the vis object 
```

现在，我要开始第四点了 - 控制可视化 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-15T07:38:46.290

这是一个可能有助于此过程的博客条目：http: [//www.boxshapedworld.com/blog/post/SQLite-Flare-and-AIR.aspx](http://www.boxshapedworld.com/blog/post/SQLite-Flare-and-AIR.aspx)

# multithreading - DCOM/ COM+ 激活的对象会死锁 CPU 吗？

> ID：879758
> 
> 赞同：0
> 
> 时间：2009-05-18T20:47:37.247
> 
> 标签：multithreading, deadlock, multicore, com+

如何计算 COM+ 应用程序的 CPU 级死锁？这是一个在 Win2K 上运行的应用程序。无论负载如何，所有其他对象都使用的 1 个对象开始突然增加调用时间，然后系统崩溃。将系统恢复到正常工作状态的唯一方法是重新启动 COM+ 应用程序。

有趣的是，这种情况无法在 QA 或 DEV 中重现。唯一的区别是 CPU 头数和内存。

COM+ 应用程序是 n 层模型中的应用程序组件，它使用 MSDAORA 连接到使用 v9.2 客户端的 Oracle v9.2 DB。

任何想法/想法都非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-18T20:53:24.053

COM+ 应用程序在死锁方面没有什么特别之处。

从它的声音来看，应用程序内的某些代码存在导致死锁的错误。至于为什么你不能在 QA 或 Dev 中重现 - 线程很难正确处理，可能有一个非常小的时间窗口，必须发生某些事情导致死锁，而你只是没有足够的加载它（或足够长）在 QA/Dev.

不幸的是，除非您有一些非常详细的日志，而且很可能还有应用程序源代码，否则无法诊断出实际的错误是什么。

# html - IE8 无法在新窗口中打开网页

> ID：879761
> 
> 赞同：0
> 
> 时间：2009-05-18T20:48:25.280
> 
> 标签：html, internet-explorer-8

我已经在几次随机安装的 IE8 上看到了这个问题，并且无法在我的一生中找到它。如果您使用传统的 <a href="fu" target="_blank">bar</a> 打开一个新窗口 - IE8 在单击时绝对不会执行任何操作。我已经在谷歌周围挖了很长时间，但无济于事。有没有其他人经历过这种情况，也许有解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-04T19:44:13.870

据我所知，这种行为在 IE8 的最新版本中已经停止发生。我认为它一定是某种安全设置随着 IE8 的更高版本而改变。感谢那些回答的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T21:03:16.030

也许弹出窗口阻止程序设置已更改为“高：阻止所有弹出窗口”。检查工具-> Internet 选项-> 隐私-> [弹出窗口阻止程序] 设置。

# sql-server - 开发环境应该禁用外键吗？

> ID：879763
> 
> 赞同：5
> 
> 时间：2009-05-18T20:48:52.160
> 
> 标签：sql-server, development-environment

因此，当我们在当前项目中使用外键时，我之前听说过这样的论点，即在开发环境中启用外键检查只会在开发人员面前设置障碍——代码不应依赖于外键的存在。

我想知道人们对这个想法的看法 - 在开发时，您是在开发环境中启用外键，还是关闭它们？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-18T20:52:10.327

我总是启用它们。您要确保您的代码不会做违反 FK 规则的事情。如果您将它们删除，则没有什么可以阻止代码放入错误数据。此外，我们将使用 CodeSmith 等工具来帮助我们完成一些自动化工作，并且使用 CodeSmith，如果我们有 FK，它可以自动为我们生成查询过程。

总的来说，我坚信开发环境应该是非常接近生产环境的复制品。如果您没有它们，那么很可能会有代码在生产中失败，因为它违反了 FK 约束，并且它在测试中可以正常工作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-18T20:51:59.500

绝对保持它们启用。外键约束的存在其实在开发中非常有用；不使用约束可以允许惰性开发；此外，它可能会导致一些严重的问题潜入代码中，这可能会在迁移到生产环境时造成一些困难。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-18T20:52:59.810

我总是在我的环境中启用 FK。这样做的原因是，如果我在没有 FK 的情况下编写代码，那么稍后打开它们可能会中断。

尽管打开它们可能会引起更多的头痛，但从长远来看，我认为这是值得的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-18T20:52:30.937

我强烈建议您继续使用它们。它提供了一个安全网，以确保您的数据层正常运行。除非您正在使用 ETL 应用程序，并且您需要为数据加载故意关闭约束。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-18T20:53:00.857

你让它们保持启用状态。如果它们在您的测试和生产环境中启用，它们也应该在您的开发环境中，或者您只是将潜在问题推到另一个环境中，这实际上会使问题需要更长的时间来修复。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-05-18T20:55:12.723

在我看来，在开发环境中拥有外键**不会成为障碍，而是会带来好处**。数据完整性是一件好事，外键是执行它的好方法。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-18T20:56:58.150

这就像说“运行失败的测试”给开发团队带来了困难。约束的全部意义在于确保系统的有效性和正确性。

花时间为您的开发过程开发所需的支持基础架构，以方便添加和修改数据库。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-18T20:52:48.143

外键不应该依赖于代码。我会考虑这个愚蠢的建议。破坏数据库的引用完整性很容易，开发人员会犯很多错误。就像 ac# 开发人员欣赏类型安全一样，任何为数据库开发的人都会欣赏引用完整性的保护。

但是，在批量插入等情况下，关闭 FK 约束可能会更快，但只有在启用它们的全面测试之后。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-18T20:55:11.460

我〜总是启用FK，我理解应用程序逻辑应该强制执行数据约束而不是依赖数据库约束本身的论点的前提，除此之外，但我认为我不会是第一个错过级联的人之前在我的应用程序逻辑中的约束，并且数据库已经为我选择了这个，我想这很常见，并且在开发周期中选择它比在生产环境中更容易处理！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-18T21:09:31.853

除了其他帖子中的许多原因之外，在开发中禁用外键具有很大的风险，即您编写的代码不会在生产中运行。例如，假设您在创建订单之前创建了订单行。如果没有外键，这将运行良好，但在启用它们时会失败。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-05-18T21:14:33.963

我很高兴看到其他答案几乎一致认为您应该在开发中保持启用约束。

`INSERT`我要补充一点，当尝试的数据/ `UPDATE`/`DELETE`导致违反约束时，您的代码需要处理异常。当（而不是如果）在生产中发生这种情况时，您需要您的代码正常工作。因此，您*必须*在开发和测试期间启用约束。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-19T12:47:46.093

我要说，让我们消除约束。

打倒FK！

并删除所有索引，以及所有其他约束。

只是在开玩笑。:)

当然..让它尽可能接近生产 - 缩小数据的大小，请在分发数据之前先对数据进行筛选。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2011-12-07T17:58:25.417

无意冒犯，但你们听起来就像是一群绵羊在吐出强行喂给你的东西。对于任何 SQL Server 问题，答案总是“视情况而定”。

外键旨在规范可以将手放在饼干罐中的人。如果您设计了一种有效的方式将 cookie 分发给其他人并防止直接访问 cookie jar，则不需要外键。

# php - 从 PHP 对象中提取数据

> ID：879768
> 
> 赞同：0
> 
> 时间：2009-05-18T20:50:00.113
> 
> 标签：php, facebook

我正在使用 Facebook API，并且该类生成了这个对象。

```
 object(User)#4 (5) {
      ["fbc_uid"]=>
      string(9) "324234324"
      ["fbc_first_name"]=>
      string(5) "James"
      ["fbc_last_name"]=>
      string(5) "Proud"
      ["fbc_name"]=>
      string(11) "James Proud"
      ["fbc_email"]=>
      NULL
    } 
```

如何从“用户”Facebook 类之外从该对象中提取 fbc_uid？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T21:02:24.317

你有没有尝试过：

```
$userObj->fbc_uid 
```

# fonts - Helvetica 是浏览器基础字体吗？

> ID：879769
> 
> 赞同：12
> 
> 时间：2009-05-18T20:50:07.243
> 
> 标签：fonts

谁能告诉我 Helvetica 是否是浏览器基础字体？如果是这样，它没有加载到我的 PS CS 4 中。

我可以从哪里下载它？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-18T20:57:11.660

不，Helvetica 不是“基本字体”。

“bast font”的最佳定义可能是 Microsoft 的[Core Fonts for web](http://en.wikipedia.org/wiki/Core_fonts_for_the_Web)，而 Helvetica 不存在。

如果您想要 Helvetica，您要么必须获得 Mac（它是 mac OS X 上的默认字体之一），要么[从 Linotype](http://www.linotype.com/526/helvetica-family.html)（拥有它的公司）购买。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2011-07-30T06:09:45.367

这实际上是对 Mark Ransom 的评论，但它成长为一个评论。

不仅有一个免费的 Helvetica URW++ 克隆，作为 GhostScript 项目的一部分由 GNU 资助，它是目前最好看的 Helvetica 替代品之一：URW++ Nimbus Sans。不幸的是，对于很多用途，它是一种 PS Type 1 字体。

同样来自 GNU 项目的 FreeSans 字体（采用 openfont 文件格式）基于 Nimbus Sans。它随大多数 Linux 发行版一起提供。它比 Arial 更好看（尤其是在使用不支持 Microsoft（专利）字体混叠技术的计算机系统时打印或在屏幕上显示），甚至可能是 Helvetica，并且支持许多 Unicode 字形，但它不兼容公制与 Helvetica，如 Arial。

有一种免费的（在任何意义上）Arial 替代字体，名为 Liberation Sans，它与 Arial 以及 Helvetica 的公制兼容，但它看起来并不像 Helvetica，也不太像 Arial。

Nimbus、Arial、Liberation Sans 或 FreeSans 都不支持 Helvetica 的所有样式变体（更不用说 Helvetica Neue 的所有变体，一种与 OS X 捆绑在一起的字体）。Nimbus 是上述免费字体中最兼容 Helvetica 的，因为它支持 PostScript 2 打印机和旧版 Mac OS 中 Helvetica 附带的所有变体。但是大多数现代文字处理器（当然不是网络浏览器）不能使用所有的变体，甚至那些支持 PS Type 1 字体的变体。

Nimbus 和 FreeSans 遵循“带有字体例外的 GPL”许可证，允许嵌入到文档中。大多数商业字体不允许在没有高额许可费用的情况下嵌入。Windows 和 OS X 附带的任何字体都不允许嵌入，几乎所有与其他 MS 或 Apple 软件捆绑的字体也不允许嵌入，也不允许将字体与数字文档一起运送到印刷店。对于大多数商业字体，印刷厂必须拥有字体许可证才能打印文档，这对于 Windows 字体尤其困难，因为大多数（全部？）微软字体许可证不允许在 MS Windows 之外使用（MS Web 的 Web Core 字体不适合打印，与较新的字体版本不兼容，并且支持非常有限的一组字形），

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-18T20:58:04.637

Helvetica 是仅适用于 Mac 的标准系统字体。

但是，您可以做的是在 CSS 字体声明中指定 Helvetica，但还要确保包含 Windows 用户的备用字体。

例如

```
body {font-family: Helvetica, Arial, sans-serif;} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-18T21:01:41.917

如果您使用的是 Windows PC，并且不想购买 Helvetica，Arial 有点类似于 Helvetica（穿上阻燃服）。

Microsoft Sans Serif 具有水平和垂直终端（切口），比 Arial 更像 Helvetica，但前提是您不需要斜体；Microsoft Sans Serif 的斜体有太多的斜率。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-18T21:05:46.120

在 GPL 许可下，URW++ 提供了一组标准 Postscript 字体；我相信这包括 Helvetica 的克隆，尽管它可能不是那个名字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-04T19:10:40.450

为了最大限度地提高浏览器运行 Helvetica 的机会，您可以设置良好的后备堆栈。（我在这里假设您实际上是指在设计中更常用的 Helvetica neue）。

```
body {
   font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; 
   font-weight: 300;
} 
```

从[https://css-tricks.com/snippets/css/better-helvetica/偷来的](https://css-tricks.com/snippets/css/better-helvetica/)

如前所述，Helvetica 是 mac 上的基础字体，但在 pc 上不常用。这意味着超过 10% 的人（使用桌面设备）可以开箱即用。

如果您希望您的网站在任何地方都显示相同的内容，您可能需要购买该字体。您可以在很多网站上购买 Helvetica。价格各不相同，但对于小型网络使用，您正在寻找一种类型变化的最低 30 磅（40 美元）。

另一种选择是使用不同的字体。Open sans in google fonts [https://fonts.google.com/specimen/Open+Sans](https://fonts.google.com/specimen/Open+Sans)通常被推荐，但在我看来，它并不是真正的替代品。

有很多文章列出了与 Helvetica 类似的字体，其中一些是免费的。好的起点可能是这篇文章：

[https://pangrampangram.com/blogs/journal/helvetica-alternatives](https://pangrampangram.com/blogs/journal/helvetica-alternatives)

# .net - 使用 DataContractSerializer 在 WCF 中序列化和反序列化 XmlDocument

> ID：879774
> 
> 赞同：4
> 
> 时间：2009-05-18T20:51:19.020
> 
> 标签：.net, xml, wcf

我有一个 WCF 服务，它接受一个字符串作为其操作合同之一的参数。但是，此字符串中包含 xml 内容。

我需要将其转换为标记为 a`DataContract`但不暴露于外界的类。

我需要使用，`DataContractSerializer`因为类成员的`[DataMember]`属性设置为不同的名称。例如：该属性`Phone`的 DataMember Name 设置为`"Telephone"`，因此当我使用普通序列化程序反序列化 xmldocument 时，当反序列化程序查找`Phone`不存在的元素时出现错误。

我如何反序列化`XmlDocument`使用`DataContractSerializer`？一个限制是我无法将 xmldocument 保存到文件中。

**编辑**：在这里找到一篇关于序列化和反序列化的优秀文章`DataContractSerializer` [。](http://msmvps.com/blogs/peterritchie/archive/2009/04/29/datacontractserializer-readobject-is-easily-confused.aspx)

我的客户代码：

```
string xmldata = "&lt;Customer> + 
                System.Environment.NewLine+ 
                "&lt;Age>1&lt;/Age>"+
                System.Environment.NewLine+
                "&lt;BirthDate>1900-01-01T01:01:01.0000000-05:00&lt;/BirthDate>" + 
                System.Environment.NewLine+
                "&lt;FistName>John&lt;/FistName>"+
                System.Environment.NewLine +
                "&lt;LastName>Doe&lt;/LastName>" +
                System.Environment.NewLine +
                "&lt;/Customer>";

doc.LoadXml(xmldata); 
Service1Client a = new Service1Client();
a.GetData(doc.OuterXml.ToString()); 
```

我的服务代码：

```
public string GetData(string per)
{
    string xmldata = per;
    XmlDocument xmlDoc = new XmlDocument();
    xmlDoc.LoadXml(xmldata);
    XmlDemo.Person a = Person.Create();

    DataContractSerializer ser = new DataContractSerializer(a.GetType());
    StringWriter stringWriter = new StringWriter();
    XmlTextWriter xmlWriter = new XmlTextWriter(stringWriter);
    xmlDoc.WriteTo(xmlWriter);

    MemoryStream stream = new MemoryStream(Encoding.ASCII.GetBytes(stringWriter.ToString()));
    stream.Position = 0;
    XmlDictionaryReader reader = XmlDictionaryReader.CreateTextReader(stream, new XmlDictionaryReaderQuotas());
    Person myContact = (Person)ser.ReadObject(reader, true);

    return string.Empty; 

} 
```

我的数据合同：

```
[Serializable]
[DataContract(Name = "Customer")]
public class Person
{
    private Person() {}
    [DataMember(Name = "FistName")]
    public string FName { get; set; }
    [DataMember(Name = "LastName")]
    public string LName { get; set; }
    [DataMember(Name = "Age")]
    public int Age { get; set; }
    [DataMember(Name = "BirthDate")]
    public DateTime DOB { get; set; }

    public static Person Create()
    {
        return new Person();
    }
} 
```

我在 Person myContact = (Person)ser.ReadObject(reader, true); 处收到此错误

```
第 1 行位置 11 出错。从命名空间“http://schemas.datacontract.org/2004/07/XmlDemo”中期待元素“客户”。遇到名称为“客户”、命名空间“”的“元素”。

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T21:19:01.367

从字符串直接反序列化

```
MemoryStream stream = new MemoryStream(Encoding.ASCII.GetBytes("<myXml />"));
stream.Position = 0;
XmlDictionaryReader reader = XmlDictionaryReader.CreateTextReader(stream, new XmlDictionaryReaderQuotas());
MyContact myContact = (MyContact)ser.ReadObject(reader, true); 
```

从 XmlDocument 反序列化

```
StringWriter stringWriter = new StringWriter();
XmlTextWriter xmlWriter = new XmlTextWriter(stringWriter);
xmlDoc.WriteTo(xmlWriter);

MemoryStream stream = new MemoryStream(Encoding.ASCII.GetBytes(stringWriter.ToString()));
stream.Position = 0;
XmlDictionaryReader reader = XmlDictionaryReader.CreateTextReader(stream, new XmlDictionaryReaderQuotas());
MyContact myContact = (MyContact)ser.ReadObject(reader, true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T00:12:40.890

这是你的服务吗？如果是这样，那么不要在*字符串*参数中发送或接收 XML，因为它们不是同一个东西。

此外，虽然您还没有向世界公开您想要反序列化此 XML 的 DataContract，但您几乎已经通过公开 XML 来做到这一点。基本上是一样的效果。因此，您应该创建一个没有与之关联的行为的 DataContract 类，然后在您的 ServiceContract 中公开它。如果您需要在内部将其用作具有行为的类中的数据，则将数据复制到您永远不会公开的内部类的新实例中。

* * *

我仍然建议您通过将 XML 复制进和复制出字符串来停止这种愚蠢行为。尽管如此，根据您发布的代码和异常：

为什么这样做

```
XmlDemo.Person a = Person.Create(); 
```

然后在反序列化时将其清除？

XmlDemo.Person a;

是足够的。然后使用 typeof(XmlDemo.Person) 代替 a.GetType()。

另外，您发布的 Person 类是否与“XmlDemo.Person”类完全相同？我很想知道那个命名空间是从哪里来的。要消除我的不确定性，请尝试将 [DataContract] 属性更改为 Namespace=String.Empty（或者 Namespace=null）。

最后，您是否听说过没有在实现 IDisposable 的类的实例上调用 Dispose 的开发人员？

# version-control - 在线源代码控制

> ID：879778
> 
> 赞同：2
> 
> 时间：2009-05-18T20:52:12.573
> 
> 标签：version-control

基本上，我正在寻找一个像 p4/svn 这样的应用程序，它能够将文件签入到安全的 ftp 服务器或从 ftp 服务器签出。

有没有应用程序可以做到这一点？这样我就不必一直担心哪台电脑/笔记本电脑有我最近更新的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T21:30:41.153

[DropBox](https://www.getdropbox.com/home)自动对文件进行版本化，并免费为您提供 2 GB。不像托管的 SVN 那样花哨，但非常简单。

或者，您可以安装 SVN 或 GIT（或其他）并将其指向您的 DropBox 文件位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T20:59:10.017

您可以通过 HTTPS 使用 SVN 并从外部访问它。

**编辑：** 如果您希望按照您的评论建议设置新的源代码控制环境。我会推荐[VisualSVN](http://www.visualsvn.com/server/)，它默认设置了 http 的东西，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T21:25:54.487

在家里，我使用 SVN 和使用共享驱动器的文件协议。因此，只要打开网络和文件服务器，我就可以轻松地从家里的任何计算机进行更新。文档说他们建议不要将文件用于生产用途，但我不明白为什么：它对我来说很好用。

在办公室，我们使用带有 http 协议的 SVN，因此我们可以从任何可以访问 Internet 的地方访问。

SVN 也有一个自定义协议。我们简单地尝试过，但与使用 http 相比没有明显的优势。

至于客户：在家里，我使用 Subcommander 进行日常操作。如果 Subcommander 能够创建新库并执行一些其他管理功能，我不知道该怎么做，所以我回退到命令行 Subversion 来处理管理内容。

在办公室，我们主要使用 Eclipse 客户端。我使用 Tortoise 进行浏览。

这个故事的寓意是有很多选择。

我不知道任何使用 FTP 的版本控制系统，但我认为 HTTP 可以完成同样的事情。当然，您可能有我不知道的要求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T20:58:47.490

www.springloops.com 是 svn 的托管解决方案。我正在使用它，我发现它非常有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-18T21:05:03.093

这个问题似乎不清楚。

“将文件签入到安全的 ftp”是什么意思？我知道的所有源代码控制系统（至少 Perforce、SVN、CVS）都有自己的服务器组件和协议。所以他们都可以在线工作，但使用自己*的*服务器。

你想做什么？

**编辑：**

根据您的评论，您想使用您的网络空间。这将不允许您进行版本控制以及 VCS（版本控制系统）允许您做的其他好事，例如检索旧版本、查看历史记录、合并更改等等。

您可以通过 HTTP/FTP 交换文件，但如果您想要版本控制，您将需要一台运行 VCS 软件的服务器，例如 Subversion、git 或 Mercurial。您可以自己设置一个，但有可用的托管解决方案（请参阅其他答案）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-18T21:05:17.523

虽然不是颠覆解决方案：将[git-ftp](http://wiki.github.com/ezyang/git-ftp)与 git 结合起来，你就可以开始了。我会假设 svn 也有一些相同的东西。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-19T06:21:05.700

Subversion 和 Git 都是免费的，并且有多种不同的方式可以连接和推送/拉取/签入/签出数据。特别是，它们都有自己的协议，如果您需要安全性，它们可以通过 SSH 进行隧道传输，并且它们也具有 HTTP/HTTPS 访问权限。

我不太遵循“安全 FTP”，我猜这只是要求它可以以安全的方式远程访问。git 和 svn 都符合条件并且非常免费。

SVN更“成熟”，拥有更多、更成熟的客户。

GIT 较新（人们想玩的新的闪亮玩具），它的客户端还没有那么成熟，但它有很多新的很酷的功能。此外，每个“签出”版本的 git 本身就是一个带有日志和历史记录的存储库。这使它非常强大。

# jquery - 任何具有良好 UI 的轻量级 Web 日期/时间选择器？

> ID：879783
> 
> 赞同：15
> 
> 时间：2009-05-18T20:52:53.663
> 
> 标签：jquery, datetime, jquery-ui

几个愿望：

*   如果它是基于 jQuery 的，最好。
*   如果它专注于简单的用户界面而不是吸引眼球，那就更好了。
*   如果它既是日期和时间选择器，那很好。

我应该提一下，我已经查看了使用 Google 可以找到的大多数可用选项。

问题不在于官方的 jQuery-UI 项目中没有包含一个日期+时间选择器，所以有些是针对旧版本的 jQuery，有些是丑陋的 UI 选择，而一个有一些好的 UI 似乎有问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2010-12-02T03:06:56.873

我发现 Trent Richardson 的日期/时间选择器很好。它有很多选择，而且似乎运作良好。

可在此处获得：http: [//trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)

它基于 jQuery UI

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-18T21:00:56.567

日期选择器：

[jQuery UI 日期选择器](http://jqueryui.com/demos/datepicker/)

时间选择器：

[时间选择器插件](http://haineault.com/media/jquery/ui-timepickr/page/)

加分，两者都使用[jQuery UI Themeroller](http://jqueryui.com/themeroller/)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-10T16:04:57.227

我最喜欢的两个干净的 UI：

# [日期对](http://jonthornton.github.io/Datepair.js/)

*[乔恩·](https://github.com/jonthornton)桑顿*

看看[Jon Thornton](https://github.com/jonthornton)的最新作品[DatePair](http://jonthornton.github.io/Datepair.js/)，它的灵感来自 Google Calendar 的简洁 UI。从我发现它是迄今为止最干净的设计和最容易使用的。

### 日期

![日期选择](https://i.stack.imgur.com/mYtlA.png)

### 时代

![时间选择](https://i.stack.imgur.com/4jooH.png)

# [Pickadate.js](http://amsul.ca/pickadate.js/)

*通过[Amsul](http://amsul.ca/)*

Amsul 的[Pickadate.js](http://amsul.ca/pickadate.js/)非常干净且响应迅速，因此它在移动设备上也能很好地工作，在小屏幕上消耗全屏。

### 日期

![日期选择](https://i.stack.imgur.com/sxz1B.png)

### 时代

![时间选择](https://i.stack.imgur.com/JR7Rl.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-04-01T14:28:09.590

[Any+Time(TM)](http://www.ama3.com/anytime/)小部件将单个输入字段的日期/时间选择器与多种格式相结合。它现在使用 jQuery 并支持 jQuery UI 主题和 CSS 自定义，以完全可视化集成到任何网站中。如果您遇到任何错误，只需报告它们并期望在几个小时内得到解决！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-18T21:05:02.627

有一个插件兼具两者，但它完全基于 jquery [UI/Datepicker](http://docs.jquery.com/UI/Datepicker)，允许用户选择时间 HH:MM 适用于 jquery-1.2.3。 [jQuery 日期时间选择器](http://plugins.jquery.com/project/DateTimepicker)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-18T21:08:33.633

检查这个[http://www.queness.com/post/204/25-jquery-plugins-that-enhance-and-beautify-html-form-elements#8](http://www.queness.com/post/204/25-jquery-plugins-that-enhance-and-beautify-html-form-elements#8)
我还偶然发现了以下内容：
[http://code。 google.com/p/dyndatetime/](http://code.google.com/p/dyndatetime/)
[http://www.kelvinluck.com/assets/jquery/datePicker/](http://www.kelvinluck.com/assets/jquery/datePicker/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-07-13T22:09:24.160

对于我的需要，这个例子是一个很好的选择。它结合了 jQuery datepicker 和一个易于使用的时间选择器。

[http://puna.net.nz/timepicker.htm#](http://puna.net.nz/timepicker.htm#)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-01T22:19:47.040

这是一篇旧文章，但为了将来参考，我想把它放在这里：

[Calentim 日期时间选择器插件](https://codecanyon.net/item/calentim-date-time-range-picker/20099228)

*   它是基于 jQuery 的，易于修改
*   基于 SCSS 文件的 UI，对桌面的下拉或内联支持，对移动设备的模态支持
*   它是一个日期和时间范围选择器，但您可以禁用范围功能、时间功能，因此它可以用作日期范围选择器、单个日期选择器或单个日期时间选择器等。

# .net - 如何使用 ClickOnce 安装 COM

> ID：879788
> 
> 赞同：3
> 
> 时间：2009-05-18T20:53:32.057
> 
> 标签：.net, com, activex, clickonce, teechart

我已经使用 ClickOnce 安装了使用 TeeChart ActiveX（用于图表的 COM 组件）的 Windows 应用程序。

如果我使用 regsvr32 teechart8.ocx 手动注册 TeeChart，我的应用程序可以正常工作。但我想要并且需要使用 ClickOnce 安装应用程序。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-18T21:08:32.930

ClickOnce 只能复制文件。所以你有这些选择：

*   使用[Jeff Hall 建议](https://stackoverflow.com/questions/879788/how-to-install-a-com-using-clickonce/879819#879819)的无注册 COM 。如果可以的话，这可能是最好的选择。
*   `regsvr32`首次加载文件时手动运行`.exe`（在它尝试访问 COM 对象之前）
*   [创建一个](http://www.codeproject.com/KB/aspnet/Add_Custom_Prerequisite.aspx)安装 COM 对象的自定义 clickonce 必备包

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-18T21:02:08.733

使用无注册 COM。查看这篇[MSDN 文章](http://msdn.microsoft.com/en-us/magazine/cc188708.aspx)

# java - Java AOT + 动态加载 java 类

> ID：879794
> 
> 赞同：1
> 
> 时间：2009-05-18T20:54:32.443
> 
> 标签：java, class, compilation

我正在为我的应用程序构建一个插件系统。我已经读到任何人都可以对 .class 文件进行反编译，因此我不得不使用 Ahead-Of-Time 编译器（对吗？）。问题是我需要动态加载一些插件类。现在我正在将所有 .class 文件加载到一个文件夹中，并调用一个静态方法（我从不创建对象）作为插件系统。

当我的所有源代码都已完成 AOT 时，我可以加载这些类吗？我应该以另一种方式解决问题吗？Java 是适合我的语言吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T21:06:34.183

提前编译不是为了阻止人们反编译。我认为您应该为此目的使用混淆器。

插件系统的动态加载类应该适用于混淆器和 AOT。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T21:11:33.940

塔希特·阿赫塔尔是对的。你需要一个混淆器。您必须对其进行配置，以免混淆程序用于动态加载和调用插件的类和方法的名称。也就是说，插件的公共 SPI 不能被混淆，但它们的实现可以。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T21:22:00.487

除非您的课程包含一些真正的绝密功能，否则我会说放弃混淆......

我正在为自己构建一个插件框架，并且我有同样的想法来阻止对插件代码的访问（因为所有敏感的东西都会在那里）但我放弃了，现在你能想到的一切都已经发布在网络上，软件开发中没有更多的秘密；）

# php - 重构使用公式输出 csv 的 PHP 代码

> ID：879798
> 
> 赞同：0
> 
> 时间：2009-05-18T20:55:38.823
> 
> 标签：php, excel, design-patterns, csv

我有一些 PHP 代码，旨在制作一个包含公式的电子表格，以对某些列进行求和。似乎应该有比下面的代码更优雅的方法来做到这一点。有哪些重构或设计模式可以更好地完成下面的代码？

```
<?
echo ",Current Milestone,Total Hours,Milestone 1 Hours,Milestone 2 Hours,Milestone 3 Hours\n";
$row = 2; 
$totSSRange = ""; 
foreach($departments as $dept){
    $deptStartRow = $row + 1;
    echo $dept['name']."\n";
    foreach($dept['modules'] as $module){
        $row++;
        echo $module['name'].','.$module['ms'].',=SUM(D'.$row.':F'.$row.'),'.$module['m1'].','.$module['m2'].','.$module['m3']."\n";
    }
    $deptSSRange = "C".$deptStartRow.":C".$row; 
    $totSSRange .= $deptSSRange.","; 
    $sumStr = "=SUM(".$deptSSRange.")"; 
    echo 'Sum,,'.$sumStr.','.str_replace("C","D",$sumStr).','.str_replace("C","E",$sumStr).','.str_replace("C","F",$sumStr)."\n\n";
    $row+=3; 
} 
$totSumStr = "\"=SUM(".$totSSRange.")\"";
echo 'Total,,'.$totSumStr.','.str_replace("C","D",$totSumStr).','.str_replace("C","E",$totSumStr).','.str_replace("C","F",$totSumStr);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T22:00:19.143

使用[PEAR::Spreadsheet_Excel_Writer](http://pear.php.net/package/Spreadsheet_Excel_Writer)，它实际上会对你强制执行一些好的设计原则。此外，它还会对所有输入进行清理和规范化。

# java - Java：基于正则表达式在 HashMap 键中搜索？

> ID：879807
> 
> 赞同：14
> 
> 时间：2009-05-18T20:57:48.273
> 
> 标签：java, regex, hashmap

我正在使用 HashMap 构建同义词库来存储同义词。

我正在尝试根据正则表达式搜索单词：该方法必须将字符串作为参数并返回结果数组。这是我的第一次尝试：

```
public ArrayList<String> searchDefinition(String regex) {
    ArrayList<String> results = new ArrayList<String>();

    Pattern p = Pattern.compile(regex);

    Set<String> keys = thesaurus.keySet();
    Iterator<String> ite = keys.iterator();

    while (ite.hasNext()) {
        String candidate = ite.next();
        Matcher m = p.matcher(candidate);
        System.out.println("Attempting to match: " + candidate + " to "  + regex);
        if (m.matches()) {
            System.out.println("it matches");
            results.add(candidate);
        }
    }   

    if (results.isEmpty()) {
        return null;
    }
    else {
        return results;
    }
} 
```

现在，这不像我预期的那样工作（或者我可能错误地使用了正则表达式）。如果我在哈希图中有以下键：

```
cat, car, chopper 
```

然后通过调用`searchDefinition("c")`或`searchDefinition("c*")`我得到`null`。

1.  我如何使这项工作按预期进行？
2.  是否有比 HashMap 更好的数据结构来保持`graph`同义词库所需的相似？（只是好奇，至于这个作业，我们被要求使用 Java Collection Map）。
3.  我在上面的代码中还有什么不恰当的地方吗？

谢谢，丹

编辑：我已经更正了这个例子。即使我使用正确的案例，它也不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-18T21:04:53.390

您需要指定不区分大小写[Pattern.compile](http://java.sun.com/javase/6/docs/api/java/util/regex/Pattern.html#compile(java.lang.String,%20int)) `( "c",`[Pattern.CASE_INSENSITIVE](http://java.sun.com/javase/6/docs/api/java/util/regex/Pattern.html#CASE_INSENSITIVE) `)`。要查找包含 a 的单词，`c`您需要使用[matcher.find()](http://java.sun.com/javase/6/docs/api/java/util/regex/Matcher.html#find())。[Matcher.matches()](http://java.sun.com/javase/6/docs/api/java/util/regex/Matcher.html#matches())尝试匹配整个字符串。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-18T22:09:27.910

但是，嗯：

(a) 如果您打算始终按顺序搜索它，为什么要使用 HashMap？当你从不使用它们时，处理散列键和所有这些都是浪费的开销。当然，一个简单的 ArrayList 或 LinkedList 会是一个更好的主意。

（乙）这与词库有什么关系？为什么要使用正则表达式搜索词库？如果我想知道“cat”的同义词，我会认为我会搜索“cat”，而不是“c.*”。

我对如何构建同义词库的第一个想法是......好吧，我想我要问的第一个问题是，“同义词是等价关系吗？”，即如果 A 是 B 的同义词，是否遵循 B是A的同义词吗？如果A是B的同义词，B是C的同义词，那么A是C的同义词吗？假设这些问题的答案是“是”，那么我们想要构建的是将语言中的所有单词划分为同义词集合，因此我们可以将每个集合中的任何单词映射到该集合中的所有其他单词. 因此，您需要一种获取任何单词的方法，将其映射到某种联系点，然后从该联系点转到映射到它的所有单词。

这在数据库上很简单：只需创建一个包含两列的表，比如“word”和“token”，每列都有自己的索引。所有同义词都映射到同一个标记。标记可以是任何东西，只要它对于任何给定的同义词集都是唯一的，例如序列号。然后搜索给定的单词，找到相关的标记，然后获取所有带有该标记的单词。例如，我们可能会使用 (big,1)、(large,1)、(gigantic,1)、(cat,2)、(feline,2) 等创建记录。搜索“big”，你会得到 1，然后搜索 1 会得到“big”、“large”和“giant”。

我不知道内置 Java 集合中的任何类都可以做到这一点。我能想到的最简单的方法是构建两个协调的哈希表：一个将单词映射到标记，另一个将标记映射到单词数组。所以表 1 可能有 big->1、large->1、gigantic->1、cat->2、feline->2 等。然后表 2 映射 1->[big,large,gigantic], 2-> [cat,feline] 等。您在第一个表中查找以将单词映射到标记，并在第二个表中将该标记映射回单词列表。这很笨拙，因为所有数据都是冗余存储的，也许有更好的解决方案，但我并没有想到它。（好吧，如果我们假设每次都按顺序搜索整个单词列表会很容易，但是随着列表变大，性能会变差。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-18T21:17:45.707

那是您正在使用的正则表达式吗？

Matcher.matches() 方法仅在整个输入序列与表达式匹配（来自 Javadoc）时才返回 true，因此您需要`"c.*"`在这种情况下使用，而不是`"c*"`不区分大小写匹配。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-18T21:00:10.310

正则表达式区分大小写。你要：

```
Pattern p = Pattern.compile(regex, Pattern.CASE_INSENSITIVE); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-18T21:03:28.650

看起来你不恰当地使用你的正则表达式。"c" 只匹配小写 c，而不匹配大写。

也就是说，我建议您考虑使用具有全文搜索功能的嵌入式数据库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-14T12:10:29.333

回应上面“但是嗯”的杰，

（我会添加评论，但没有代表。）

按顺序搜索它是一种缓慢的方式。用正则表达式做这件事会陷入疯狂。用数据库做这件事是一个编程警察。当然，如果您的数据集很大，可能需要，但请记住“对于这个任务，我们被要求使用 Java 集合映射”我们应该找出使用这个 Java 集合的正确方法。

它不明显的原因是因为它不是一个集合。是两个。但这不是两张地图。它不是一个 ArrayList。缺少的是一套。它是同义词集的映射。

Set<String> 将让您建立同义词列表。你可以随心所欲地制作。两组同义词就是一个很好的例子。它是 Set 而不是 ArrayList，因为您不想要重复的单词。

Map<String, Set<String>> 将让您快速找到从任何单词到其同义词集的方式。

建立你的集合。然后构建地图。编写一个辅助方法来构建带有地图和集合的地图。

addSet(Map<String, Set<String>> map, Set<String> newSet)

此方法只是循环 newSet 并将字符串作为键添加到映射中，并将对 newSet 的引用作为值。您将为每个集合调用一次 addSet 。

现在您已经构建了数据结构，我们应该能够找到东西。为了使它更健壮，请记住在搜索之前清理您的搜索键。使用 trim() 去除无意义的空格。使用 toLowerCase() 摆脱无意义的大写。您应该在构建集合之前（或同时）对同义词数据进行这两项操作。这样做，谁需要正则表达式？这种方式更快，更重要的是更安全。正则表达式非常强大，但是当它们出错时调试起来可能是一场噩梦。不要仅仅因为你认为它们很酷就使用它们。

# subsonic - 存储过程没有任何参数时出错

> ID：879817
> 
> 赞同：1
> 
> 时间：2009-05-18T21:01:32.477
> 
> 标签：subsonic

我正在尝试使用 subsonic 和 getting 调用存储过程`Object Reference not set`。它适用于其他程序。只有当过程没有任何参数时它才会失败。

这是一个已知错误吗？有解决办法吗？

（我使用的是最新版本）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-18T21:08:22.650

这是一个已知问题，此时的解决方法是为不做任何事情的存储过程创建一个参数，我喜欢使用 an`int`和 pass `0`。

这应该有望由 v3.0 修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T03:31:45.030

这已在 2.2 版中修复（我现在无法找到它的 Google Code 或 CodePlex 问题，但我确定它已修复）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T11:43:54.700

升级到修复此问题的最新版本： [在此处获取 2.2 版本](http://code.google.com/p/subsonicproject/downloads/list)

# asp.net-mvc - 在 asp.net mvc 中创建“可插入”应用程序

> ID：879825
> 
> 赞同：1
> 
> 时间：2009-05-18T21:03:20.383
> 
> 标签：asp.net-mvc, web-applications, servercontrols

我一直在使用 asp.net MVC，但仍然不是很擅长。但是，我开始想知道如何以最小的复杂性创建可以“插入”或安装到现有 ASP.net MVC 站点中的应用程序。

例如，在 ASP.net 网络表单中，我开发了一种博客应用程序。为了安装这个应用程序，我只需将一个 dll 放入 Bin 文件夹，添加一些 web.config 行，然后根据需要将控件添加到 aspx 页面。无需进行其他更改。

现在我正在使用 MVC，我遇到了部分视图，它们似乎以某种方式取代了 webform 用户控件。但是，您似乎仍然需要从控制器传递部分视图的数据，并且它比页面级别更高。我必须修改控制器代码才能安装应用程序。

我很确定我是在以错误的心态思考这个问题。有没有办法为 asp.net mvc 创建可以轻松插入现有网站的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T21:05:11.003

我已经完成了很多这样的工作，并且我得到了几乎所有我需要从这里开始的信息：

[http://www.codeproject.com/KB/cs/pluginsincsharp.aspx](http://www.codeproject.com/KB/cs/pluginsincsharp.aspx)

我使用插件的最大项目是音频处理应用程序。

总体思路是：

您在一个单独的、可分发的、签名的 DLL 中为您需要的每种插件类型创建一个接口。这是一个示例界面：

```
/// <summary>
/// Describes an audio reader.
/// </summary>
public interface IReader : IPlugin
{
    /// <summary>
    /// Fired by the reader to update the UI on long operations.
    /// </summary>
    event EventHandler<ProgressChangedEventArgs> ProgressChanged;

    /// <summary>
    /// Gets a list of of MIME types the reader supports.
    /// </summary>
    ReadOnlyCollection<string> TypesSupported { get; }

    /// <summary>
    /// Loads a SampleSet from the given input stream.
    /// </summary>
    /// <param name="inStream">The stream to read the</param>
    /// <returns>A SampleSet read from the stream.</returns>
    SampleSet Load(Stream inStream);
} 
```

然后在您的插件 dll 中，您使用接口实现一个类：

```
public sealed class WavReader : IReader
{
    ...
} 
```

然后使用反射加载 DLL：

```
 private void LoadPlugins(string applicationPath)
    {
        if (!Directory.Exists(applicationPath))
            throw new ArgumentException("The path passed to LoadPlugins was not found.", "applicationPath");

        List<IPluginFactory> factoriesList = new List<IPluginFactory>();
        List<IReader> readersList = new List<IReader>();

        foreach (string assemblyFilename in Directory.GetFiles(applicationPath, "*.plugin"))
        {
            Assembly moduleAssembly = Assembly.LoadFile(Path.GetFullPath(assemblyFilename));

            foreach (Type type in moduleAssembly.GetTypes())
            {
                IPluginFactory instance = null;
                if (type.GetInterface("IPluginFactory") != null)
                    instance = (IPluginFactory)Activator.CreateInstance(type);
                if (instance != null)
                {
                    factoriesList.Add(instance);
                    switch (instance.PluginType)
                    {
                        case PluginType.Reader:
                            readersList.Add((IReader)instance.Create());
                            break;
                    }
                }
            }
        }

        this.readers = readersList.AsReadOnly();
    } 
```

BAM 你有你的插件！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-18T21:09:09.780

[已在 ASP.NET MVC 的插件架构中回答](https://stackoverflow.com/questions/340183/plug-in-architecture-for-asp-net-mvc)

另请参阅：
[ASP.NET MVC 插件](http://www.wynia.org/wordpress/2008/12/05/aspnet-mvc-plugins/)
[插件混合：ASP.NET WebForms 和 ASP.MVC 以及 ASP.NET 动态数据并排](http://www.hanselman.com/blog/PlugInHybridsASPNETWebFormsAndASPMVCAndASPNETDynamicDataSideBySide.aspx)
[ASP.NET MVC - 如何实现插件架构](http://trandangkhoa.blogspot.com/2009/04/aspnet-mvc-how-to-implement-plugin.html)

# regex - 如何使 Dreamwaver 的正则表达式查找和替换？

> ID：879838
> 
> 赞同：0
> 
> 时间：2009-05-18T21:06:10.190
> 
> 标签：regex, dreamweaver, replace

我在大约 300 个 HTML 文件中有以下代码，我需要用其他代码替换它。但是以下代码中的问题是`click=12FA863`每个文件中的 ID 是变化的并且不同，我想使用在 Dreamwaver 中的查找和替换中可以使用的正则表达式。

```
<iframe src="http://example.net/?click=12FA863" width=1 height=1 style="visibility:hidden;position:absolute"></iframe> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T06:29:19.757

放

```
<iframe src="http://example\.net/\?click=[^"]+" width=1 height=1 style="visibility:hidden;position:absolute"></iframe> 
```

在您的查找字段中以及您想在替换字段中替换它的任何内容，您应该进行设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T21:09:56.517

这是有关 Dreamweaver 正则表达式的教程。

[http://www.adobe.com/devnet/dreamweaver/articles/regular_expressions_pt1.html](http://www.adobe.com/devnet/dreamweaver/articles/regular_expressions_pt1.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T22:01:09.003

如果，正如您在评论中所说，您想替换

```
<iframe src [Anything] </iframe> 
```

然后这会做：

```
<iframe src.+</iframe> 
```

在哪里 ”。” 表示“任何字符”，“+”表示“其中一个或多个”

如果您*关心*点击 ID 值或其他部分，则需要捕获它，如下所示：

```
<iframe src.+click=([A-F0-9]+).+</iframe> 
```

并在替换时使用 1 美元（或 2 美元、3 美元等，如果您添加更多）。

请注意， [A-F0-9]+ 仅表示“一个或多个十六进制字符”

因此，如果您使用该正则表达式，并将其作为替换：

```
<div>something else using $1</div> 
```

然后

```
<iframe src="http://example.net/?click=12FA863" width=1 height=1 style="visibility:hidden;position:absolute"></iframe> 
```

会成为

```
<div>something else using 12FA863</div> 
```

我肯定会花一些时间在 Daniel 推荐的教程上，并查看其他 Regex 教程、备忘单等，例如[visibone.com/regular-expressions](http://www.visibone.com/regular-expressions/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-03-06T19:33:27.900

```
<iframe.+?</iframe> 
```

这是一个惰性正则表达式，用于查找 Finisher 标签`</iframe>`。

这个正则表达式不在乎它在哪里`src`，它也会找到`<iframe width... src=.. ></iframe>`。

# c# - 如何在网络环境中学习 MVC——*不是*

> ID：879840
> 
> 赞同：4
> 
> 时间：2009-05-18T21:07:38.377
> 
> 标签：c#, .net, model-view-controller, user-interface

我希望学习 MVC 范式并将其应用于 GUI 开发（至少在 C#.NET 中，但我想我也想在其他地方应用它）。到目前为止，我所看到的几乎所有教程都假设如果您正在考虑 MVC，那么您必须进行 Web 开发，并且他们仅从 Web 上下文中检查 MVC。我不关心 Web 开发。

有人在非 Web 环境中使用 MVC 吗？它似乎是 GUI 开发的理想选择——将表示与底层数据模型分开。但我只是在学习，所以我不知道。任何指向教程或参考作品的指针将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-18T21:12:28.850

查看《Head *First Design Patterns》一书。*它是实现设计模式的极好指南，并且还有一个可靠的 MVC 示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-18T22:20:15.377

大多数 GUI 以某种形式使用 MVC。

MVC 并没有什么神奇之处，事实上，它只是一种让你的模型与其他一切分开的方式。视图和控件几乎总是配对的，因为视图的实现细节驱动了控制器的构建方式。

此外，每个实现 MVC 的人似乎对什么属于哪里都有稍微不同的想法。东西在视图和控制器之间来回滑动非常容易——许多视图实际上是由一个完整的微型 MVC 架构组成的！

我不是要你忽略 MVC 或任何东西，它是一套非常好的指导方针，我只是告诉你不要强调提出一套每个人都遵循的完全定义 MVC 的确切规则，因为你可能不会找到一个。每个人都会稍微弯曲它以适应他们的架构的其余部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-18T21:09:21.773

Java 中的 Swing 使用 MVC。可能值得一试？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T21:15:32.900

我没有任何链接可以分享，但我最近一直在尝试这个。我所做的是创建一个控制器和一个控制器接口。控制器接口实际上实现了几个其他接口，以使所有独特的功能清晰地分开。

UI（窗口和窗体）仅通过其接口具有控制器的句柄。当窗口上发生事件时，窗口类将直接通过控制器将这些路由到等效调用。

控制器知道模型。就我而言，我有一个 Oracle 数据库和一个 SDE 数据库。这些被包装在类中，因此我可以控制自己的实现和接口。控制器将向数据库（存在于数据模型命名空间中）发出请求并处理数据以满足视图的请求。

它非常容易实现，并使开发变得非常清晰、干净和简洁。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-18T22:01:49.237

如果我的声誉足够高，我会评论 Rick 发布的内容。但由于它不是我自己的帖子：

我也喜欢 Head First 设计模式书，但我认为它对于您感兴趣的特定主题来说有点过于宽泛。

如果您想了解专业人士如何使用 C#.NET WinForms 实现 MVC，我强烈建议您查看 CAB（复合 UI 应用程序块）。

[http://en.wikipedia.org/wiki/Composite_UI_Application_Block](http://en.wikipedia.org/wiki/Composite_UI_Application_Block)

[http://www.microsoft.com/downloads/details.aspx?FamilyId=7B9BA1A7-DD6D-4144-8AC6-DF88223AEE19&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyId=7B9BA1A7-DD6D-4144-8AC6-DF88223AEE19&displaylang=en)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-19T08:06:24.447

MVC 模式也可以应用于 windows 窗体。查看 MVC#。[http://www.MVCSharp.org/Using_Winforms_views_engine/Default.aspx](http://www.MVCSharp.org/Using_Winforms_views_engine/Default.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-18T21:14:05.400

这个[pygame 教程](http://ezide.com/games/writing-games.html)使用 MVC。将一个小游戏放在一起可能是掌握设计模式的一种有趣方式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-18T21:14:23.917

Objective C 和 Cocoa 中的 Mac 编程通常是 MVC 模型。

它不是 C#/.NET，但如果您想花时间阅读它，您可能会得到一些想法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-18T21:20:58.303

我相信您将 MVC 和 MVP 模式与 Microsoft 的复合应用程序块和智能客户端软件工厂一起使用。这是文档的链接： [链接文本](http://www.microsoft.com/downloads/details.aspx?familyid=5F9A8435-1651-4BE2-956D-0446A89A7358&displaylang=en)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2009-05-18T21:22:51.217

MVC 最初被定义为 GUI 应用程序的模块化 OOP 样式。只是后来这个名字被一种完全不同的 web 应用程序的分层样式借用了。如果您不注意“web MVC”，您会发现很多“GUI MVC”示例和参考资料。

# javascript - jQuery 启用/禁用带有 SELECT 选项的显示/隐藏按钮。获取剩余的选项值

> ID：879842
> 
> 赞同：2
> 
> 时间：2009-05-18T21:08:15.083
> 
> 标签：javascript, jquery, dhtml

我有一个使用文本字段中的值填充的选择列表。我还有两个按钮：一个添加按钮，它将输入的值添加到选择列表中，一个删除按钮，它从选择列表中删除输入的值。我想使用 jQuery 执行以下操作：

1.  如果输入文本字段的值在选择列表中**不可**用，则显示添加按钮并隐藏删除按钮。
2.  如果输入文本字段的值在选择列表中为**AVAILABLE**，则隐藏添加按钮并显示删除按钮。
3.  如果选择列表为**空**，则显示添加按钮并隐藏删除按钮。

这是我想出的一些代码：

```
// Remove selected options
$('#removeButton').click(function() {
   //$.map($('#addedchargeamtid :selected'), function(e) {
   $.map($('#addedchargeamtid option'), function(e) {
      var exp = $(e).text();
      // Would like to have all the Option values in CVS format 0.00,1.99, etc...
      // If removed this should also remove the value in the array
   })

   $('#removeButton').hide();
      return !$('#addedchargeamtid :selected').remove();
   });

   // Add charge amount
   $('#addedchargeamtid option:selected').focus(function() {
      $('#removeButton').show();
   }); 
```

当我添加第一个值时，它会显示删除按钮，但如果我删除该值，则按钮不会显示备份。

更新：

好的，我已将其编辑为此。

```
$('#removeButton').click(function() {
   $('#addedchargeamtid :selected').remove();

   $.map($('#addedchargeamtid option'), function(e) {
      var exp = $(e).text();
      alert(exp); // Need this in CSV format but I think it displays the correct values
   })

   //if($("#addedchargeamtid option").length > 0) {  <-- Didn't work                
   if($("#addedchargeamtid").length > 0) {
      $('#removeButton').show();
   } else {
      $('#removeButton').hide();
   }
}); 
```

当 SELECT 中没有值时，仍然没有隐藏按钮。也尝试了该选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T21:21:18.863

我相信您可以检查选项长度是否 >0 表示它具有值，如果不是，则它不存在意味着它没有像这样的值：

```
if($("#addedchargeamtid option").length > 0 ) //if addedchargeamtid is the id of select tag
{
   $('#removeButton').show();
}
else
{
  $('#removeButton').hide();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T21:24:39.530

如果我正确理解了这个问题，我想你想改变这个：

```
// Add charge amount
$('#addedchargeamtid option:selected').focus(function() {
   $('#removeButton').show();
}); 
```

对此：

```
// Add charge amount
$('#addedchargeamtid option').focus(function() {
   $('#removeButton').show();
}); 
```

这样事件处理程序就会被添加到所有选择的选项中，而不仅仅是代码执行时当前选择的选项。还要确保为任何新创建的项目设置此处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T22:05:21.303

我对原始问题进行了大量编辑，假设我的编辑是正确的，这里是您问题的解决方案：

XHTML：

```
<input type="text" id="textField" />
<input type="button" id="addButton" value="Add" />
<input type="button" id="removeButton" value="Remove" />
<select multiple="multiple" id="selectList">
</select> 
```

JavaScript（假设上面的文档结构）：

```
$(function(){

  $("#textField").keypress(function(){

    var val = $(this).val();

    if (val === '') {
      return;
    }

    // Clear selections
    $("#selectList option").removeAttr("selected");

    // Value not in select list
    if ($("#selectList option").length === 0 || $("#selectList option[value="+val+"]").length === 0) {
      $("#removeButton").hide();
      $("#addButton").show();

    // Value in select list
    } else {
      $("#removeButton").show();
      $("#addButton").hide();

      // Select it
      $("#selectList option[value="+val+"]").attr("selected", "selected");
    }
  });

  $("#removeButton").click(function(){
    var val = $("#textField").val();
    val !== '' && $("selectList option[value="+val+"]").remove();
  });

  $("#addButton").click(function(){
    var val = $("#textField").val();
    val !== '' && $("#selectList").append('<option value="'+val+'" label="'+val+'">'+val+'</option>');
  });

}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-07-15T06:23:12.447

为了获得最佳答案，请尝试以下代码：

添加选项以使用 Jquery 选择标签

```
$(document).ready(function(){

//Function To Add or Remove New Option Field in Form
var i=2;
$(".add").on("click", function add_new(){
$(".more").append($("<p/>").append(
 "<input type='text' id='option"+i+"' placeholder='option"+i+"'/>",
 $("<img/>",{class:'add', src:'images/add.png'}).click(function(){add_new();}),
 $("<img/>",{class:'del', src:'images/del.png'}).click(function(){$(this).parent().remove();})
 ))
i=i+1;
});

//Below Function Executes on Click of create select Button
$("#button").on("click",function(){

//To Clear Previous Select Option Field if Exists in Div
$("#prm").empty();

//Creating Select Option in Div
$("#prm").append("<select></select>");

//Creating Options and Adding it To Above Select Tag
 $("input[type=text]").each(function(){
 if($(this).val()==""){
 alert($(this).attr('id')+" is Empty !");
 }
 else{
 $("select").append('<option>'+$(this).val()+'</option>');
 }
 });

});

}); 
```

[http://www.formget.com/jquery-add-option-to-select/](http://www.formget.com/jquery-add-option-to-select/)

# sql-server - 暂存和生产数据库

> ID：879850
> 
> 赞同：0
> 
> 时间：2009-05-18T21:09:55.300
> 
> 标签：sql-server

我需要在一个非常大的数据库上运行计算。当我运行计算时，应用程序会显着减慢。一种可能的解决方法是将其复制到第二个数据库中并离线运行计算。完成后用实时数据库切换它。这个过程可以自动化吗？

这是谷歌对他们的搜索索引所做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T21:16:05.367

当然，它可以自动化。但是，如果您要交换数据，则无法更改数据。

我只会传输需要传输的数据，并聚合在传输过程中可以聚合的数据 - 并索引目标表以优化计算。但是，这两个选项都是可能的，而无需将数据从数据库中取出并在数据库中创建其他表。

如果您在同一台机器上进行操作，您可能仍然会遇到同样的缓慢，因为服务器将执行相同的操作......

如果“缓慢”实际上是由锁定/阻塞行为引起的并且数据不会被更改，则可以`WITH(NOLOCK)`在表上使用该选项以避免在长时间操作期间阻塞其他操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T21:16:50.060

是的，这可以通过复制、代理任务（假设 SQL Server）甚至自定义应用程序实现自动化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T00:17:27.323

有几种方法可以做到这一点。您可以使用 sql server 代理自动化。

在不知道更多细节的情况下，以及计算对您来说可能实现数据仓库的情况下，如果可能，请使用聚合

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T21:17:26.360

我想说最好的办法是将计算提取到他们自己的模块中，然后在另一个进程或使用相同数据库的另一台计算机上单独运行。如果没有有关您的特定设置的更多信息，很难准确判断这是否是正确的做法。

# asp.net - 在 ASP.NET MVC 中显示来自另一个控制器的视图

> ID：879852
> 
> 赞同：269
> 
> 时间：2009-05-18T21:09:56.890
> 
> 标签：asp.net, asp.net-mvc, views, controllers

是否可以显示来自另一个控制器的视图？

比如说我有一个`CategoriesController`和一个`Category/NotFound.aspx`观点。而在中`CategoriesController`，我可以轻松返回`View("NotFound")`。

现在说我有`ProductsController`一个动作和视图来添加一个产品。但是，此操作需要我们有一个类别来添加产品。例如，`Products/Add/?catid=10`。

如果我找不到基于的类别`catid`，我想显示类别控制器中的视图，而不是在产品控制器下`NotFound`创建视图。`CategoryNotFound`

这是可能的还是我以错误的方式构建事物？有没有好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：310
> 
> 时间：2009-05-18T21:12:11.723

是的。默认情况下，ASP.NET MVC 首先签入`\Views\[Controller_Dir]\`，但之后，如果找不到视图，它会签入`\Views\Shared`.

共享目录专门用于跨多个控制器共享视图。只需将您的视图添加到 Shared 子目录，您就可以开始了。

如果你这样做，`return View("~/Views/Wherever/SomeDir/MyView.aspx")`你可以返回任何你想要的视图。

* * *

## 回答 #2

> 赞同：170
> 
> 时间：2010-12-05T11:33:14.183

您可以使用：

```
return View("../Category/NotFound", model); 
```

它在 ASP.NET MVC 3 中进行了测试，但也应该在 ASP.NET MVC 2 中工作。

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2014-08-28T07:57:01.447

是的，有可能。返回这样的`RedirectToAction()`方法：

```
return RedirectToAction("ActionOrViewName", "ControllerName"); 
```

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2012-02-24T17:41:27.087

你试过`RedirectToAction`吗？

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2015-04-16T02:44:04.993

是的你可以。像这样返回一个动作：

```
return RedirectToAction("View", "Name of Controller"); 
```

一个例子：

```
return RedirectToAction("Details/" + id.ToString(), "FullTimeEmployees"); 
```

这种方法将调用 GET 方法

您也可以像这样将值传递给操作：

```
return RedirectToAction("Details/" + id.ToString(), "FullTimeEmployees", new {id = id.ToString(), viewtype = "extended" }); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-05-20T14:43:03.343

您还可以从[JavaScript](http://en.wikipedia.org/wiki/JavaScript) / [jQuery](http://en.wikipedia.org/wiki/JQuery)调用任何控制器。假设您有一个控制器返回 404 或其他一些用户控件/页面。然后，在某些操作中，从您的客户端代码中，您可以调用某个地址，该地址将触发您的控制器并以[HTML](http://en.wikipedia.org/wiki/HTML)格式返回结果，您的客户端代码可以获取此返回的结果并将其放在页面中您想要的任何位置......

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-09-07T02:07:17.280

使用此代码，您可以获得任何控制器：

```
var controller = DependencyResolver.Current.GetService<ControllerB>();
controller.ControllerContext = new ControllerContext(this.Request.RequestContext, 
controller); 
```

# sql-server-2005 - 使用 SSIS 更新表

> ID：879853
> 
> 赞同：6
> 
> 时间：2009-05-18T21:10:17.047
> 
> 标签：sql-server-2005, ssis, dataflowtask

我正在尝试使用基于公共键的另一个表中的数据更新表中的字段。如果它是直接 SQL，它会是这样的：

```
Update EHSIT
set e.IDMSObjID = s.IDMSObjID
from EHSIT e, EHSIDMS s
where e.SITENUM = s.SITE_CODE 
```

但是，这两个表不在同一个数据库中，所以我尝试使用 SSIS 进行更新。哦，sitenum/site_code 一个是 varchar，另一个是 nvarchar，所以我必须进行数据转换，以便它们匹配。

我该怎么做？
我有一个数据流对象，源为 EHSIDMS，目标为 EHSIT。我有一个数据转换来将 unicode 转换为非 unicode。但是如何根据比赛进行更新？我已经尝试使用目标，使用 SQL 命令作为数据访问模式，但它似乎没有源表。如果我只是映射要更新的字段，它如何根据字段匹配来限制它？

我即将将我的源表导出到 Excel 或其他东西，然后尝试从那里输入，尽管似乎我能做的就是删除数据转换步骤。

不应该有更新数据任务之类的吗？它是那些数据流转换任务之一，我只是不知道它是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-18T21:20:18.883

您可以使用 SQLCommand（带参数），但您将有效地`UPDATE`为每一行编写一个。我发现最好在目标端编写一个临时表（来自远程端的所有数据或由 SSIS 确定要更改的数据）并使用单个 SQL`UPDATE`执行更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-08T06:21:35.717

您始终可以使用完整的数据库名称。

```
UPDATE server1.databasename.EHSIT
SET E.IDMSOBJID = S.IDMSOBJID
FROM server1.databasename.EHSIT E, server2.databasename.EHSIDMS S
WHERE E.SITENUM = S.SITE_CODE

[serverpath].[database].[databaseobject] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-06-10T15:20:07.947

我发现使用缓慢变化的维度，将业务键作为您要匹配的值，而您希望随着值的变化而更新的其他属性似乎有效。

Devtron，我试过这个并且得到关于服务器路径的错误，里面有很多/。我还被告知这是高度看不起的，特别是如果它是一个经常发生的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-14T10:49:28.863

[我会使用查找转换](https://msdn.microsoft.com/en-us/library/ms141821.aspx) 不需要暂存 - 不需要编写 SQL 代码 - 这就是 SSIS 的本意！

# java - 什么是具体泛型？它们如何解决类型擦除问题，为什么不进行重大更改就不能添加它们？

> ID：879855
> 
> 赞同：78
> 
> 时间：2009-05-18T21:10:44.610
> 
> 标签：java, generics, collections, jvm, reification

我已经阅读了[Neal Gafter](http://gafter.blogspot.com/2006/11/reified-generics-for-java.html)关于这个主题的博客，但在很多方面仍然不清楚。

鉴于 Java、JVM 和现有集合 API 的当前状态，为什么不能创建保留类型信息的集合 API 实现？这些难道不能以保留向后兼容性的方式替换 Java 未来版本中的现有实现吗？

举个例子：

```
List<T> list = REIList<T>(T.Class); 
```

REIList 是这样的：

```
public REIList<T>() implements List {
  private Object o;
  private Class klass;

  public REIList(Object o) {
    this.o = o;
    klass = o.getClass();
  }
... the rest of the list implementation ... 
```

这些方法使用 Object o 和 Class 类来获取类型信息。

为什么保留通用类信息需要更改语言而不仅仅是 JVM 实现更改？

我不明白什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-05-18T21:19:11.023

关键是，编译器支持具体化泛型来保存类型信息，而类型擦除泛型则不支持。AFAIK，首先进行类型擦除的全部目的是为了实现向后兼容性（例如，较低版本的 JVM 仍然可以理解泛型类）。

您可以像上面那样在实现中显式添加类型信息，但是每次使用列表时都需要额外的代码，并且在我看来非常混乱。此外，在这种情况下，除非您自己添加检查，否则您仍然没有对所有列表方法进行运行时类型检查，但是具体化的泛型将确保运行时类型。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2011-01-27T04:08:58.633

与大多数 Java 开发人员的看法相反，保留编译时类型信息并在运行时检索此信息是可能的，尽管方式非常有限。换句话说：**Java 确实以非常有限的方式提供了具体化的泛型**。

## 关于类型擦除

请注意，在编译时，编译器具有可用的完整类型信息，但*通常*在生成二进制代码时故意删除此信息，该过程称为*类型擦除*。这样做是因为兼容性问题：语言设计者的目的是在平台版本之间提供完整的源代码兼容性和完整的二进制代码兼容性。如果它以不同的方式实现，那么当您迁移到新版本的平台时，您将不得不重新编译您的遗留应用程序。这样做的方式是保留所有方法签名（源代码兼容性），您不需要重新编译任何东西（二进制兼容性）。

## 关于 Java 中的具体化泛型

如果需要保留编译时类型信息，则需要使用匿名类。关键是：在匿名类的非常特殊的情况下，可以在运行时检索完整的编译时类型信息，换句话说，这意味着：具体化的泛型。

我写了一篇关于这个主题的文章：

[http://rgomes-info.blogspot.co.uk/2013/12/using-typetokens-to-retrieve-generic.html](http://rgomes-info.blogspot.co.uk/2013/12/using-typetokens-to-retrieve-generic.html)

在文章中，我描述了我们的用户对该技术的反应。简而言之，这是一个晦涩难懂的主题，并且该技术（或模式，如果您愿意的话）对于大多数 Java 开发人员来说似乎是无关紧要的。

## 示例代码

我上面提到的文章有链接到源代码，这些链接都在实践这个想法。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-05-18T21:22:32.140

IIRC（并基于链接），Java 泛型只是使用对象集合和来回转换的现有技术的语法糖。使用 Java 泛型更安全、更简单，因为编译器可以为您进行检查以验证您是否维护了**编译**时类型安全。然而，运行时间是一个完全不同的问题。

另一方面，.NET 泛型实际上创建了新类型 - `List<String>`C# 中的 a 与`List<Int>`. 在 Java 中，在幕后，它们是同一个东西 - 一个`List<Object>`. 这意味着，如果您各有一个，您就无法在运行时查看它们并查看它们被声明为什么——只能看到它们现在的样子。

具体化的泛型将改变这一点，为 Java 开发人员提供与 .NET 现在相同的功能。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-18T21:23:06.707

我不是这方面的专家，但据我所知，类型信息在编译时会丢失。与 C++ 不同，Java 不使用模板系统，类型安全完全通过编译器实现。在运行时，List 实际上总是一个 List。

所以我的看法是，需要更改语言规范，因为类型信息对 JVM 不可用，*因为它不存在*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-30T12:33:25.760

我能想到的简单解释 - 他们故意选择简单而不是代码膨胀，因为在编译代码后擦除只有一个泛型类及其子类型的实现。

另一方面，C++ 为每个实现创建单独的代码版本。

# sql - SQL -- 在 select 语句中分配一个位变量

> ID：879857
> 
> 赞同：3
> 
> 时间：2009-05-18T21:11:14.783
> 
> 标签：sql

例如：

```
declare @bitHaveRows bit
 select @bitHaveRows = count(*)
   from table
  where (predicate) 
```

我可以在这条线上调用任何函数吗：

```
select @bitHaveRows = count(*) 
```

如果没有行，则为该位分配值 0，如果有一行或多行，则为 1？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2010-07-23T15:41:58.903

```
declare @bRowsExist
SELECT @bRowsExist = CAST(count(*) as bit)
FROM yourtable 
```

...不确定它是否比其他建议更好

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-18T21:12:27.337

根据转换[图表](http://msdn.microsoft.com/en-us/library/ms187928.aspx)，存在从 int 到 bit 的隐式转换。但如果由于某种原因不起作用：

```
CASE WHEN COUNT(*) > 0 THEN 1 ELSE 0 END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T21:12:52.983

如果您的数据库支持它，您可以使用 CASE 语句：

```
declare @bitHaveRows
select @bitHaveRows = case when count(*) > 0 then 1 else 0 end
from yourtable 
```

# syntax - => 标记叫什么？

> ID：879860
> 
> 赞同：10
> 
> 时间：2009-05-18T21:12:04.797
> 
> 标签：syntax, c#-3.0, lambda

=> 标记是 C# 3.0 lambda 语法的一部分。到目前为止，我寻找这个令牌名称的努力都失败了。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-18T21:14:56.477

[Lambda 运算符](http://msdn.microsoft.com/en-us/library/bb311046.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-18T21:23:48.830

就阅读代码时如何发音而言，它的名称由 Eric Lippert 在[通过电话阅读代码中](http://blogs.msdn.com/ericlippert/archive/2008/05/16/reading-code-over-the-telephone.aspx)介绍。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-18T21:14:16.990

它被称为“转到”运算符。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-06-30T11:50:21.093

原来[答案](https://stackoverflow.com/questions/879860/what-is-the-token-called/879924#879924)取决于上下文：

```
c=>c+1 
```

*c**到**c 加一*

```
(Customer c)=>c.Name 
```

*客户 c**成为**c 点名称*

```
(Customer c)=>c.Age > 21 
```

*客户 c**使得**c 点年龄大于 21*

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-18T21:21:39.597

[http://msdn.microsoft.com/en-us/library/bb397687.aspx](http://msdn.microsoft.com/en-us/library/bb397687.aspx)

摘自上面：所有 lambda 表达式都使用 lambda 运算符 =>，读作“goes to”。

# aop - 除了日志记录和事务管理，AOP 还有哪些实际应用？

> ID：879863
> 
> 赞同：6
> 
> 时间：2009-05-18T21:12:25.543
> 
> 标签：aop

我理解这些原则，但我很难看到实际应用程序在少数几个之外。请赐教；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T21:26:15.923

问任何支持人员：日志记录*不是*AOP 的一个好的应用程序。他们不在乎应用程序内部调用了什么方法。他们关心应用程序正在执行的重要操作，并需要以他们理解的方式呈现这些信息。要创建体面的日志，您必须将日志视为应用程序的另一个用户界面并相应地进行设计。

更准确地说，可以使用 AOP 来实现*跟踪*。

而且我也不相信它对事务管理有用。我发现简单的 OO 委托将事务管理和业务逻辑完全分开。

不过，好问题！我发现支持 AOP 的论点分为两个阵营：

1.  无需清理糟糕的设计即可将更改更改为设计不佳的代码。
2.  解决糟糕的开发工具，例如将跟踪编织到应用程序中，因为环境对跟踪或调试没有很好的支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T22:20:41.537

Spring 人员和 EJB3 规范委员会都认为 AOP 对于声明式事务很有用。

安全，当然。

“AOP In Action”有一个很好的例子，展示了如何使用 AOP 来执行架构规则，例如在服务层之外不调用持久层。

Qi4j 是 Rickard Oberg 最新的脑孩子，它使用 AOP 进行动态类修改。我还没有完全理解它，但如果 R​​ickard 推动它，我们总有一天会想知道的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T21:20:52.673

当您有一个大型遗留应用程序并且您希望在整个应用程序中进行全面更改时，AOP 非常有用。

最近我用它来使用额外的 cookie（会话 id 除外）来划分 http 会话范围。它很快减轻了编写糟糕的会话绑定代码的许多痛苦。

还可以查看 Glassbox，了解 AOP 如何帮助制作轻量级监控和性能管理工具的一个很好的例子

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-19T15:02:19.647

我才刚刚开始探索如何使用 AOP。到目前为止，我已经将它用于依赖注入并实现了一个接口，以在某些 UI 代码中支持两种方式的数据绑定。

# .net - Castle Logging Facility 2.0 版本

> ID：879877
> 
> 赞同：0
> 
> 时间：2009-05-18T21:14:49.253
> 
> 标签：.net, open-source, logging, castle-windsor

有谁知道使用 Castle Windsor 2.0 版本的城堡伐木设施是否有新的二进制文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T22:44:33.220

Windsor 2.1.1（撰写本文时的最新版本）现在包括 Logging Facility。

# sql - 从 Visual Studio 调试 SQL Server 2005 中的存储过程？

> ID：879890
> 
> 赞同：4
> 
> 时间：2009-05-18T21:18:54.907
> 
> 标签：sql, sql-server, debugging

我在这里和其他地方看到很多令人沮丧的问题，没有明确的答案。我试图让存储的过程进行调试，但没有成功。

客户端：VS2005 或 VS2008，两者都不能工作。当我从存储过程上下文菜单中选择“步入存储过程”时，我在调试窗口中得到“用户取消”，这就是它的结束。

我做了以下事情来帮助自己（都无济于事）：

1.  右键单击连接并选择“应用程序调试”和“允许 SQL/CRL 调试”
2.  确保所有框都在同一个域中。
3.  确保我使用与登录工作站相同的域帐户登录 SQL Server。
4.  确保我的域帐户既是 SQL 框上的管理员又是 SQL Server 中的管理员。
5.  我在 SQL 框上运行 msvsmon.exe 并成功地从我的客户端框（在 VS 中）附加到一个进程。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T17:40:11.437

这里的一个重要问题是，如果 SQL Server 进程作为本地系统运行（这是默认安装），这将不起作用。它需要作为本地计算机上管理员组中的帐户运行。

我所做的是在名为“sqlserver”的盒子上设置本地用户并将其放入本地管理员组。然后，进入服务控制面板，停止sql server服务。修改它并将其设置为作为指定的用户帐户而不是作为本地系统运行。指定您创建的 sqlserver 本地用户帐户和密码。然后重启服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T08:52:36.437

您的 SQL Server 是什么版本？SP 调试仅在 Pro 和 Team 版本中可用（不是 Express 和 Standard）

还要确保（再次）您使用 Windows 身份验证登录，并且您的帐户是 SQL Server 中的系统管理员。

由于您能够附加到 SQL 框上的进程，我假设 DCOM 可以正常工作，并且两者之间没有阻止防火墙。

# sql - SQL 操作顺序

> ID：879893
> 
> 赞同：12
> 
> 时间：2009-05-18T21:19:30.507
> 
> 标签：sql, join, optimization, where, sql-execution-plan

如果我运行以下 SQL 查询

```
SELECT * 
FROM A
LEFT JOIN B
ON A.foo=B.foo
WHERE A.date = "Yesterday" 
```

该`WHERE`语句是在 ? 之前还是之后进行评估的`JOIN`？

如果之后，编写此语句的更好方法是什么，以便仅返回`A`from`"Yesterday"`中的行 join to `B`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-18T21:22:12.530

这取决于数据库。

在 SQL Server 上，运行：`SET SHOWPLAN_ALL ON`然后运行查询，您将了解它运行时会发生什么。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-18T21:23:41.573

您对“评估”的想法是不正确的，因为 SQL 是一种声明性语言。

顺便说一句，您可以看到查询执行计划。在 MySQL 中为您的查询添加关键字前缀`describe`以查看执行计划。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-18T21:22:49.937

语义上：在 JOIN 之后。但在这种情况下，时间上没有区别，因为它在 JOIN 的左侧。

正如您已经拥有的那样，“只有来自“昨天”的 A 中的行才连接到 B”。

优化器可以根据关系代数中的等价性自由地重新组织其操作顺序。

这仅返回 A.date="Yesterday" 并加入 B，它可以在 foo 上找到匹配项：

```
SELECT * FROM A
LEFT JOIN B
    ON A.foo=B.foo
WHERE A.date="Yesterday" 
```

无论任何条件如何，这都会返回所有 A 并加入 B 其中 A.date="Yesterday" 并且它在 foo 上找到匹配项：

```
SELECT * FROM A
LEFT JOIN B
    ON A.foo=B.foo
    AND A.date="Yesterday" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-18T21:30:36.193

满足查询的操作顺序决定了为什么特定数据库的查询优化器会心血来潮。查询优化器试图根据它可以从查询中收集到的信息以及它现有的关于数据库的任何统计信息（可能包括表的基数和数据的某些分布）来生成一个好的“查询计划”（一组操作） .

在您的情况下，答案可能取决于您是否在 A.date 上有二级索引

查询优化是一个相当丰富的话题。您使用的任何数据库的文档都会有更多的说明。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-18T21:46:36.397

在 SQL Server 中：

作为一般经验法则，JOIN 子句在 WHERE 子句之前进行评估。

如果在连接部分需要过滤器的复杂连接，我将它们与我的连接一起编写

```
SELECT *
FROM A
LEFT JOIN B
    ON A.Foo1 = B.Foo1
    And A.Date = 'Yesterday'
OUTER JOIN C
    ON B.Foo2 = C.Foo2
JOIN D
    ON B.Foo3 = D.Foo3 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-18T21:22:41.373

取决于索引和统计数据。

您应该显示查询的执行路径以确定应该在哪里应用优化（如果有的话）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-08-23T04:44:28.493

```
SELECT * 
FROM (SELECT * FROM A WHERE Date = 'Yesterday') A
LEFT JOIN B 
    ON A.Foo1 = B.Foo1 
OUTER JOIN C 
    ON B.Foo2 = C.Foo2 
JOIN D 
    ON B.Foo3 = D.Foo3 
```

# unit-testing - 是否存在一个托管各个领域的单元测试集合的站点？

> ID：879894
> 
> 赞同：1
> 
> 时间：2009-05-18T21:19:34.283
> 
> 标签：unit-testing, web, collections

是否存在一个托管各个领域的单元测试集合的站点？具体来说，我不想挖掘和提取看起来接近您的编码主题的包，而是像共享代码一样使用它，看看它是如何测试的。（然后也知道它应该如何工作）

那么有没有这样的呢？它们是用哪种编程语言编写的并不重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T21:37:03.357

[您可以通过Google 代码搜索](http://codesearch.google.com)找到大量测试代码。搜索“test”或流行测试框架的命名空间/包名称（例如“org.junit”）

# c++ - C++：如何为任意函数调用实现超时？

> ID：879896
> 
> 赞同：27
> 
> 时间：2009-05-18T21:20:08.150
> 
> 标签：c++, function, timeout, abort

不幸的是，我需要调用一个有时不会在给定时间内终止的库函数。有没有办法调用该函数但如果它没有在`n`几秒钟内终止则中止它？

我不能修改函数，所以我不能直接把中止条件放进去。我必须**在外部为函数添加超时**。

将它作为（增强）线程启动是否可能是一种可能的解决方案，然后我可以在一段时间后终止它？这样的东西会起作用吗？我实际上相信该函数*不是线程安全的，但是如果我将它作为**唯一*的单线程运行，那也没关系，对吧？还有其他（更好的）解决方案吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-18T21:45:13.620

您可以生成一个`boost::thread`来调用 API：

```
boost::thread api_caller(::api_function, arg1, arg2);
if (api_caller.timed_join(boost::posix_time::milliseconds(500)))
{
    // API call returned within 500ms
}
else
{
    // API call timed out
} 
```

但是，Boost 不允许您杀死工作线程。在此示例中，它只是孤立的。

您必须小心该 API 调用的作用，因为它可能永远不会释放它获取的资源。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-05-18T21:25:53.940

我认为实现这一点的唯一安全方法是生成一个单独的*沙箱*进程，该进程调用库函数作为应用程序的代理。您需要在应用程序和代理之间实现某种类型的 IPC。在读取 IPC 回复时实现超时是相当简单的。如果读取由于超时而失败，您可以安全地终止代理，而不会危及应用程序的健康。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-18T21:23:24.320

您所说的通常称为“看门狗”系统。看门狗通常是检查所有其他线程状态的第二个线程。看门狗通常设置为定期运行。如果没有收到来自其他线程的响应，则看门狗可以通知用户，甚至在可能安全的情况下杀死有问题的线程（取决于您的应用程序）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-18T21:25:34.287

线程的问题是线程终止后您将无法释放某些资源。如果您没有获得必须释放的资源，则使用线程。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-18T22:50:25.957

Boost.Test 的 execution_monitor 做你想做的事：

[http://www.boost.org/doc/libs/1_39_0/libs/test/doc/html/execution-monitor/reference.html#boost.execution_monitor](http://www.boost.org/doc/libs/1_39_0/libs/test/doc/html/execution-monitor/reference.html#boost.execution_monitor)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-20T08:13:22.960

问题在于，如果使用*没有函数支持*的进程内解决方案，您最终可能会处于无效状态。

示例：当您在进行内存分配时终止线程时，您的进程堆可能已损坏。

因此，您可能会终止呼叫，但您也必须终止该过程。在许多情况下，破坏性副作用的可能性很小，但我不会把我的计算押在这上面。

正如 Ben Straub 建议的那样，您可以将线程孤立起来：将其置于最低优先级并让它无限运行。这当然只是一个有限的解决方案：如果线程消耗资源（可能），它们会减慢系统速度，每个进程的线程也有限制（通常是由于线程堆栈的地址空间）。

一般来说，我更喜欢外部流程解决方案。一个简单的模式是：
将输入数据写入文件，以文件作为参数启动外部进程。外部进程将进度（如果有的话）写入可以监控的磁盘文件，甚至可以允许进程从它开始的地方恢复。结果被写入磁盘，父进程可以读取它们。

当您终止进程时，您仍然必须处理对外部资源（如文件）的同步访问，以及如何处理废弃的 mutice、半写文件等。但这通常是获得强大解决方案的方法。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2011-12-08T20:19:01.687

“不幸的是，我需要调用一个有时不会在给定时间内终止的库函数。有没有办法调用该函数，但如果它没有在 n 秒内终止，则中止它？”

最简洁的答案是不。这通常很麻烦...调用本身必须在某个时间终止（实现自己的超时），但阻塞调用通常很麻烦（例如 gethostbyname()），因为这取决于它们（或系统）的超时，而不是您的超时。

因此，只要有可能，就尽量让线程中运行的代码在必要时干净地退出——代码本身必须检测并处理错误。它可以发送消息和/或设置状态，以便主（或其他）线程知道发生了什么。

个人偏好，在高可用性系统中，我喜欢我的线程经常旋转（虽然没有忙锁定），有特定的超时，调用非阻塞函数，并且有精确的退出条件。全局或线程特定的“完成”变量可以实现干净退出。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-18T21:59:45.497

您需要的是一个线程和一个可以保存函数调用结果的[Future 对象。](http://en.wikipedia.org/wiki/Future_(programming))

有关使用 boost 的示例，请参见[此处](http://www.boostcookbook.com/Recipe:/1234841)。

您需要在超时后检查未来，如果未设置，请采取相应措施。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-21T21:34:46.797

使用孤儿进程，启动它并确定其执行时间。如果超时，请调用操作系统将其杀死。

如何避免比赛条件。在这个模式上：

*   创建一个文件以存储在 args 中（当然，所有内容都作为 VAL 传递）。孤儿进程只允许从此文件中读取数据。

*   孤儿处理输入数据，创建带有结果值的输出文件并关闭它。

*   只有当一切都完成后，orphan 才会删除输入文件，这是向主进程发出工作已完成的信号。

这避免了读取半写文件的问题，因为master首先注意到输入文件的缺失，打开读取输出文件，这肯定是完成的（因为在删除输入之前关闭，并且操作系统调用堆栈是顺序的）。

# asp.net-mvc - 扩展 AccountController：ASP.NET MVC 成员资格

> ID：879898
> 
> 赞同：6
> 
> 时间：2009-05-18T21:20:29.133
> 
> 标签：asp.net-mvc, asp.net-membership

ASP.NET MVC 1.0（最终版）项目模板具有内置的基本成员资格，但我需要通过两种方式对其进行扩展：

*   **电子邮件确认**以验证新帐户。
*   **注册视图上的其他字段**，例如“家庭街道地址”和“部门编号”

我打算修改诸如*Controllers/AccountController.cs*和*Views/Account/Register.aspx*之类的模板文件，但我真的不知道从哪里开始。

我发现了许多有些适用的文章（例如[aspnet.4guysfromrolla.com 上的这篇文章](http://aspnet.4guysfromrolla.com/articles/062508-1.aspx#postadlink)），但是如果有更好的方法可以在 ASP.NET MVC 中实现 ASP.NET WebForms 教程可能会浪费时间已在 ASP.NET MVC 中启动或实现非常适合我的需求。

我只是在寻找关于从哪里开始的一般指导。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-18T22:01:08.160

MVC 框架实际上并没有太大的不同，因为它适用于 Membership 提供程序。它不是那么无缝，但功能相似。ASP.NET 成员资格与 MVC 平台目前的标准一样接近。但是，如果您使用会员服务提供的界面，您应该能够在必要时插入您自己的会员或个人资料提供者。

[这是在 MVC 中实现电子邮件验证的人的博客条目](http://weblogs.manas.com.ar/smedina/?p=5)。

我更喜欢将附加信息作为应用程序数据库的一部分，但如果您希望它作为注册信息，ASP.NET 配置文件提供程序应该在 MVC 中为您工作。您链接的系列的第 6 部分中有一个示例，应该可以很好地概述功能。[如果您在使用它时遇到问题，这里有一个](https://stackoverflow.com/questions/79129/implementing-profile-provider-in-asp-net-mvc)来自该站点的问题，它可能会对您有所帮助。

# jquery - jQuery：通过类过滤掉元素？

> ID：879902
> 
> 赞同：19
> 
> 时间：2009-05-18T21:20:57.070
> 
> 标签：jquery, filter

我有一个网站，上面有一长串名字。为了使其更易于监督，我想在其中添加一个文本链接

（加载时）显示所有

（点击单词“梨”）隐藏所有带有class =“apple”的元素

（点击单词“apples”）隐藏所有带有class="pear"的元素

（点击“全部显示”）全部显示

我想这就像一个真正简化的“键入时”过滤。

是否存在用于此的插件？我什至不知道从哪里开始！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-12T00:02:21.387

刚刚碰到这篇文章，我知道它已经过时了，但老实说，给出的答案都不是很有帮助。*在我看来，您可以使用带有:not*的过滤器过滤掉元素，如`filter(':not()')`.

正如*Joel Potter*所说， using`$("span[class='apple']").hide();`只会选择只有一个类名*apple*的跨度。如果存在多个类（很有可能），那么这种方法将行不通。

如果单击一个单词，例如*pears*，则可以过滤掉*不*包含该类的元素`pears`。

```
$('span').show().filter(':not(.pears)').hide(); 
```

你就完成了；）

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-05-18T21:35:16.573

嗯..如果您有如下列表：

```
<span class="apple">red apple</span>
<span class="apple">green apple</span>
<span class="pear">big pear</span>
<span class="pear">little pear</span> 
```

以下将显示所有内容：

```
$("span.*").show(); 
```

以下将隐藏所有带有 'class="apple"' 的元素：

```
$("span[class='apple']").hide(); 
```

或者你可以隐藏所有没有'class="pear"'的东西：

```
$("span[class!='pear']").hide(); 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-09-17T12:30:29.330

要过滤掉包含给定类或任何其他属性值的元素，使用[Attribute Contains Word Selector](http://api.jquery.com/attribute-contains-word-selector/)将是一个很好的解决方案：

```
$("span").filter("[class~='apple']") 
```

实际上，对于 class 属性，写起来更容易：

```
$("span").filter(".apple") // or:
$("span.apple") 
```

[这也是乔尔·波特在对此[答案](https://stackoverflow.com/a/879959/177710)的评论中所写的。]

这样您就可以匹配以下所有内容：

```
<span class="apple">...</span>
<span class="apple fruit">...</span>
<span class="fruit apple sweet">...</span> 
```

因此，当您不能 100% 确定您只会在一个元素上设置一个类时，请使用`~=`运算符。

# ruby - 存储应用程序文本：内联文件与单独文件

> ID：879907
> 
> 赞同：1
> 
> 时间：2009-05-18T21:21:23.390
> 
> 标签：ruby, text, haml, merb

我正在开发一个使用[Haml](http://haml.hamptoncatlin.com/)作为模板语言的 Merb 应用程序。由于 haml 鼓励将逻辑移出视图并移入帮助程序，因此我很快开始考虑从模板本身中删除副本/文本。在过去，我要么只是将文本内联留在模板中，要么将其移动到由控制器分隔的单独 yaml 文件中。我发现内联文本更方便，但更丑陋，并且需要大量使用[Ack](http://betterthangrep.com/)来找出特定文本的存储位置。将其存储在 yaml 文件中更容易搜索，但更难找到合理的命名模式来查找给定区域中的特定文本。

我也很好奇解决这个问题的其他方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-13T12:55:54.153

如果您想使您的应用程序全球化/国际化，单独存储文本是很好的选择。对于 Rails，有很多很好的插件可以做到这一点（Rails 2.3 甚至为此提供了一个 api），但这些通常也适用于 merb。有多种方法可以解决这个问题，两种主要方法是如何存储密钥：

*   您正在使用的类似 YAML 的界面存储我认为的符号，并将文本分配给该符号。
*   gettext 风格的方法是文本是符号，如果需要，您可以在单独的文件中重新定义它（但如果您不这样做，那么您将返回与密钥相同的字符串）。

两种方法都有其优点和缺点。除了密钥之外，您还可以使用许多存储工具，例如 YAML，或者您实际上可以构建一个完整的 ActiveRecord/DataMapper/等。基于存储机制。

您可以查看 rails 2.3 如何处理全球化，因为它们的命名模式对您来说可能是一个很好的起点。或者使用命名空间来拆分 YAML 文件，这样它们会更容易搜索。您也可以尝试 gettext-approach，但实际上它不被认为既不 DRY 也不安全（但它有很多工具可以创建包含应用程序所有文本的映射文件）。

# ruby - Smalltalk 如何处理猴子补丁？

> ID：879909
> 
> 赞同：7
> 
> 时间：2009-05-18T21:21:45.883
> 
> 标签：ruby, smalltalk, monkeypatching

我是一名 Ruby 程序员。对我来说，monkeypatching 是在运行时更改外部项目中的类或模块方法。我感兴趣的是，您有什么机制可以保护您免受某些对该功能的滥用。接下来是我遇到的一些场景，monkeypatching 咬了我一口。

虽然我根本不了解 Smalltalk，但这种语言早在 Ruby 之前就已经存在了。我做了一些研究，看看 Smalltalk 是否以及如何解决其中的一些问题，但在 Google 上没有找到太多。所以我在这里，询问 Smalltalkers 是否可以分享他们的智慧。

**场景 A：错误修复冲突**

项目 A 和 B 依赖于项目 C。项目 C 有一个错误。项目 A 和 B 版本包含对项目 C 的修复。

如果你的代码使用项目 A 和 B，你怎么知道补丁不会冲突？

**场景 B：过时的错误修复**

项目 C 发布了他们项目的固定次要版本。

如果您加载项目 A，是否仍会应用补丁，但可能会损坏？我很想知道是否存在某种机制，例如，如果代码已修复，则不加载补丁。

**场景 C：冲突的扩展**

项目 A 和 B 使用项目 C 的类 Foo。两者都向 Foo 添加了一个实用方法，例如 #toDate。A 的 toDate 版本返回一个日期字符串，而 B 的一个返回 Date 对象。

如果您加载两个项目（使用 C dep），是否有一种机制可以警告/防止冲突？或者您是否必须等到运行时由于方法中的错误期望而引发错误？

**关于问题更新**

阅读答案，我意识到我的问题过于广泛和模糊。所以这里是它的重写版本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-18T22:00:33.810

在 Smalltalk 中，我们传统上称之为覆盖。根据您在 Smalltalk 中使用的版本控制工具，您可以：

*   创建最初拥有相关类/方法的包的新版本
*   创建一个新包，该包将拥有相关类/方法的覆盖

在 VisualWorks 和 ObjectStudio（我最熟悉的 Smalltalk）中，使用的是后一种方法。在使用 Envy 的 VA Smalltalk 中，采用了前一种方法。我相信 Squeak 会使用 Monticello 遵循后一种方法，但我并不完全确定。

在大多数 Smalltalk 实现中，很容易看到被覆盖代码的原始版本和当前安装的覆盖。

在客户端应用程序中，只有当您从供应商（或 Squeak 团队等）更新到新版本的 Smalltalk 时，覆盖才会真正影响您。对于服务器应用程序，多个应用程序可能驻留在服务器中，您需要更加谨慎地决定要做什么。

覆盖（或称为猴子补丁）是一个强大的工具，但您需要注意如何使用它们 - 如果您确实使用它们，您应该重新检查您是否仍然需要定期使用它们。在我的开源新闻聚合器[BottomFeeder](http://www.cincomsmalltalk.com/BottomFeeder)中，我删除了很多我最初设置的覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T21:37:36.413

它说“是的！去吧！”

整个概念很可能首先出现在 Smalltalk 中。

在类浏览器中进入根类，你可以将所有方法添加到你喜欢的图像中。

不过，请记住，Smalltalk 与其他常用语言的世界图景截然不同（Smalltalk 等唯一常见的语言是 APL。）您有一个包含整套代码和运行时包的*图像。*当您更改图像时，图像中的每一位代码都会受到影响。其他图像不变。您可以使用更改集来重新加载您最喜欢的 hack，但它们基本上是将代码导入图像中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-18T21:37:52.827

Smalltalkers 不使用术语“猴子补丁”，但我觉得“方法覆盖”是最接近的术语。也就是说，用包B中同一个类的方法覆盖了包A中一个类的方法。因此，当您加载包B时，将覆盖A中的原始方法。

方法覆盖有其优点，但如果不小心使用，则缺点更多，因此通常我们倾向于避免使用它们。它还取决于 Smalltalk 方言 - 例如，在 VisualWorks 中，工具支持很好的覆盖，而在 Squeak 中则不然。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-16T08:30:21.687

如果您正在寻找最先进的解决方案，请查看 Changeboxes。Changeboxes 的研究原型基于 Squeak Smalltalk。

见[http://scg.unibe.ch/research/changeboxes](http://scg.unibe.ch/research/changeboxes)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-21T13:29:30.757

回答我自己，这是我目前的观点：

**场景 A 和 B**

由于所有代码都是开放的，最好的做法是直接修复损坏的项目。像 git 这样的工具已经管理代码合并，所以我们不需要依赖运行时合并，这并不总是有效的。

根据上游合并您的修复程序的意愿和发布新版本的速度，您可能会设想生成一个猴子补丁。在这种情况下，最好的办法是有一个机制说：

```
monkeypatch(ClassName, :method, &newcode) of the broken project
is applied if project.version in [a set of releases where the bug exist]
if the project version is unknown to the monkeypatch,
  raise an error to tell the developer to fix the monkeypatch (check if bug exist).
if a monkeypatch for that project, classname and method already exist, yell 
```

这是我的想法。如果错误修复需要的不仅仅是方法更改，则可能会出现问题。

**场景 C：待办事项**

# javascript - 如何使用 JQuery / JavaScript / CSS 实现显示请求的命名锚点

> ID：879910
> 
> 赞同：2
> 
> 时间：2009-05-18T21:21:56.273
> 
> 标签：javascript, jquery, accordion, anchor

该页面有一个包含多个内容 div 的容器 div。每个内容 div 都有一个命名的锚点。一次只显示一个内容 div：

例子：

```
<style>
  .lurk { display: none; }
</style>
<div class="container">
  <div id="c1">
    <a name="#c1">One</a> is the loneliest number.
  </div>
  <div id="c2" class="lurk">
    <a name="#c2">Two</a> is company.
  </div>
  <div id="c3" class="lurk">
    <a name="#c3">Three</a> is a crowd.
  </div>
</div>
<script>
// ... something that adds and removes the lurk class from the content divs
</script> 
```

期望的行为是，如果有人在 URL 中使用有效的命名锚点请求页面，JavaScript / JQuery 将看到它并适当地设置各种显示属性，以便与命名锚点对应的内容可见。

1.  请求的 URL 对 JQuery 可用吗？
2.  检查 URL 中的命名锚点是否通常在 $(document).ready 的早期完成？()
3.  这很难以跨浏览器的方式实现吗？
4.  是否有用于从 URL 中提取锚点的库例程，或者每个人都使用自己的正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T21:47:21.167

您可以使用`location.hash`从 URL 中检索锚点。这将适用于浏览器，并且适用于`$(document).ready`.

例如：

```
$("div.container > div").removeClass("lurk");
if (location.hash)
    $("#" + location.hash).addClass("lurk"); 
```

# visual-studio - 将 Visual Studio 2010 与 VS2008 并排安装会导致问题吗？

> ID：879913
> 
> 赞同：57
> 
> 时间：2009-05-18T21:22:24.993
> 
> 标签：visual-studio, visual-studio-2008, visual-studio-2010

这可能会导致什么样的问题？

安装在VM中更好吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-05-18T23:00:15.840

并行安装问题总是可能存在的，您应该采取适当的保护措施（例如备份、使用虚拟机等）。

根据我的个人经验，它工作得很好。在我的 Tech Ed 演示中，我使用 Visual Studio 2005、2008 和 2010 重建了我的笔记本电脑，所有这些都并排安装在 Windows 7 x64 上。我没有遇到任何问题。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-05-22T15:43:04.750

VS 团队已在[此问题](http://blogs.msdn.com/vseditor/archive/2009/05/20/vs-2010-beta1-released.aspx)上发表意见。从帖子：

“问：在我的机器上安装 VS 2010 Beta1 是否‘安全’？

答：是的！我们已经测试了并行方案，因此在安装了 VS 2008 的机器上安装测试版就可以了。测试版还支持卸载，之后应该让 VS 2008 和您的机器正常工作。如果您愿意，您可以在 VPC 上安装 VS 2010 Beta1，但您会发现性能比在本地机器上运行 VS 慢。请记住，无论您如何安装，这都是预发布软件。VS 2010 Beta1 自述文件记录了主要的已知问题，但不能保证是详尽的列表。”

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2010-04-30T12:52:51.850

在我的机器上我安装了：

*   视觉工作室 2003
*   视觉工作室 2005
*   视觉工作室 2008
*   视觉工作室 2010

它就像一个魅力

s

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-18T22:51:06.437

这不太可能导致问题，因为 VS 2010*主要*设计用于使用 .NET 4.0 框架进行开发（尽管实现了多目标，就像在 VS 2008 中一样，只是以更好的方式）。

我（和我一起工作的人）从来没有遇到过并排安装 VS 2005 和 VS 2008 的问题。事实上，我们强烈鼓励这样做，因为我们有在 VS 2005 中构建的遗留项目，虽然升级到 VS 2008 的规模很小（如果项目使用 .NET 2.0 框架），但不要冒险更安全。

如果您真的担心使用测试版软件的冲突或潜在问题，可能不适合您。如果您确实想尝试它并且仍有保留，我建议您使用带有 VS 2010 的单独 VM。

我自己将在 Vista 上与 VS 2008 并排安装它（在备份我的 VM 之后），所以如果有任何问题，我会编辑这篇文章并报告它们。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-19T00:08:23.380

我预计 VS2010 RTM 与任何以前的版本并排安装不会有任何问题。

但这是一个*测试版*。在您的计算机上安装它意味着您要求重新格式化您的磁盘（比喻地说）。确保您已准备好重新格式化安装它的磁盘。

对我来说，这意味着我在虚拟机中运行它。

也就是说，我很有可能会在 RC 发货时安装它，但这只是我试图找到错误，因此其他人不必这样做。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-05-18T23:24:54.810

我的 Windows 7 机器上安装了 Visual Studio 2008 Professional SP1 和 Visual Studio 2010 Team Suite。到目前为止，我的问题为零。

这是否意味着你不会？我不知道。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2010-05-11T16:30:41.460

您可以并排安装它们，Microsoft 支持这样做。有关详细信息，请访问位于此处的 Microsoft 网站[http://msdn.microsoft.com/en-us/library/ms246609.aspx](http://msdn.microsoft.com/en-us/library/ms246609.aspx)。

但是，您可能想确定为什么需要这样做。Visual Studio 2010 与以前的 Visual Studio 版本一样支持多目标，但它在 2010 中更加先进。您可以通过使用项目导入轻松地将项目升级到 2010，然后定位您需要的任何 .NET 版本。这里唯一需要注意的是，一旦升级到2010，2008的项目将无法再打开，后面的转换也不是一件容易的事情。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-19T00:28:50.390

为了安全起见，我会在虚拟机中执行此操作，这样当最终版本发布时我就不必卸载它。同样在虚拟机中，我可以回滚到干净的操作系统并安装 RC 版本。它更安全，您在虚拟机中有更多选择，我什至没有注意到轻微的性能损失。有人去他们的系统上试试，让我们知道。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-12-01T00:00:56.977

这是一个老问题，但以防万一其他人需要答案：

VS 2010 不再支持 .Net compact 框架，所以你只能坚持`WinPhone`。您基本上必须为您的 Windows mobile 6.5 项目使用 VS 2008。对我来说，这只是并排安装 2008 和 2010 的另一个原因。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2010-12-20T03:07:22.223

我安装了 2003 年、2005 年和 2008 年的专业版，它们在同一台电脑上运行良好。我什至安装了 beta 2010，它在卸载时工作了一段时间，因为它没有水晶报告。就在上个月，我购买了 2010 年的专业版，它把我的 2008 年炸成了碎片。我无法再加载数据库，系统会停止或停止。所以我在另一台电脑上加载它（2010）。它们似乎融合在一起，我们彼此设置。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2010-01-11T07:57:48.150

如果它是你的工作机器，我建议将它安装在 VM 上，但除此之外，我通常在我的家用机器上安装 Beta 产品，因为我有备份并且不介意重新安装，因为我的家用电脑有点像我的沙盒

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-05-18T23:19:41.980

对于它的价值，我在同一个盒子上安装了 VS2008 和 VS2010 没有问题。卸载可能会导致一些问题，但这些问题与 VS2010 的新版本直接相关，不应影响 2008。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2010-05-11T16:20:56.803

它给我带来了问题。我不得不从我的 Windows 7 机器上卸载 Visual Studio 2010 Ultimate，因为无论我是否运行 VS 2010，VS 2008 都会一直冻结。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-18T23:02:45.900

会不会造成问题？

简短的回答：是的。

更长的答案：不，但很有可能。如果您正在处理任何含糊不清的事情，请暂时 VM'ify 安装..

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2011-03-03T16:54:54.947

[如果您使用 Crystal Reports，您将在同一台机器上运行 Visual Studio 2008 和 2010 时遇到问题。](http://www.sdn.sap.com/irj/servlet/prt/portal/prtroot/com.sap.km.cm.docs/oss_notes_boj/sdn_oss_boj_bi/sap%28bD1lbiZjPTAwMQ==%29/bc/bsp/spn/scn_bosap/notes%7B6163636573733d36393736354636443646363436353344333933393338323636393736354637333631373036453646373436353733354636453735364436323635373233443330333033303331333533343334333633393333%7D.do)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2011-08-31T14:53:44.083

安装 VS 2010 Ultimate 后，我无法安装 VS 2008 Prof。猜猜你必须从最小版本升级到最大版本才能让一切正常。

# jquery - YUI的使用方法

> ID：879918
> 
> 赞同：6
> 
> 时间：2009-05-18T21:23:04.227
> 
> 标签：jquery, yui

我体验过 JQuery 和 YUI 的新手。

我正在寻找与 JQuery "$(document).ready" 等效的 YUI。

我找到了“onDOMReady”。如果我有一个包含大量函数的 .JS 文档，将它们全部包装在“onDOMReady”中的正确方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2011-08-22T23:01:24.900

在 YUI3 中，您可以这样做（见下文），但如果您按照建议将指向 YUI JS 的链接放在 html body 标记的底部，则不是必须的。

```
YUI().use('node', function(Y) {
      Y.on("domready", function(){
        console.log('dom is ready');
        // your code
      }); 
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-18T21:26:22.600

```
YAHOO.util.Event.onDOMReady(function(){

    YAHOO.myModule.init();
    YAHOO.myOtherModule.init();

    }); 
```

我通常会做类似上述的事情。否则，如果您只需要存在特定元素，则可以执行以下操作

```
YAHOO.util.Event.onAvailable('required-element', YAHOO.myModule.init); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-20T10:29:55.760

```
<script>
YUI().use('event', function (Y) {
 var button = Y.one("#readygo");
 var buttonname= this.get('value'); 
 alert(buttonname);
}
</script>

<input type="button" name="button" id="readygo" value="Click"> 
```

参考这里：http: [//yuilibrary.com/yui/docs/](http://yuilibrary.com/yui/docs/)

# c - 指向指针的指针

> ID：879925
> 
> 赞同：0
> 
> 时间：2009-05-18T21:24:05.677
> 
> 标签：c, pointers

**复制：**

> [用于多级指针取消引用](https://stackoverflow.com/questions/758673/uses-for-multiple-levels-of-pointer-dereferences)

我有一个关于 C 和指针的问题。

我知道何时需要指针，甚至何时可能需要指向指针的指针。举个例子，如果我有一个链表，并且我想编写一个函数来删除该链表的一个元素，为此我需要发送一个指向链表头指针的指针。

指向指针的指针怎么样？是否会出现需要这样做的情况？如果您有一些示例代码，则可以加分，这样我就可以真正理解它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T21:36:05.030

一个向量是*，一个数组是**，一个体积是***，一个时间空间是****。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T21:28:41.657

极其罕见，但您可以想象某种引用计数场景，您需要获取其他对象的指针地址并对其进行更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T21:31:22.230

从链表数组中的链表中删除元素的函数，或者从链接数组中的链表中删除元素的函数……你明白我的意思。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T21:34:55.687

指针在某种意义上是数组。这是一个简单的场景。假设您正在构建一个文本编辑器。行和列都是动态的。

你可能有一个行的“数组”，因为它们是动态的，所以它是一个指针。然后您的列也将是动态的，并且可能包含在您的线阵列中。所以本质上：

```
char **lines; 
```

在添加字符之前，您必须先 malloc 行，但这可能会提供一种非常粗糙的编辑器方法。

```
lines = malloc(num_of_lines_in_my_file);
lines[0] = malloc(num_of_chars_for_line_1); 
```

当然不是漂亮的代码，但希望它有助于回答这个问题。

# dependency-injection - 如果这些容器属于不同的层，每个应用程序有许多 Castle Windsor 容器是否正确？

> ID：879930
> 
> 赞同：0
> 
> 时间：2009-05-18T21:25:38.637
> 
> 标签：dependency-injection, castle-windsor, ioc-container

我最近一直在玩 Castle Windsor，并意识到我可以用它来支持我目前已经使用的类似容器的对象。到目前为止，我只阅读了有关每个应用程序只有一个容器实例的应用程序的信息。如果这些容器属于不同的层，每个应用程序有多个容器是否正确？

我问的原因是因为我想利用 Windsor 的依赖解析和 XML 配置来为我自己的容器类对象。我目前使用 Windsor 与 MonoRail 的集成，混合与 MonoRail 及其控制器层无关的组件似乎不正确。我的第二个容器会有自己的配置文件，并且不知道 MonoRail 和它使用的容器。它完全位于不同的层，最终将注册为 MonoRail 控制器的依赖项。我觉得应该避免传递容器实例，所以这是避免这种情况的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T00:23:37.607

就个人而言，我只使用一个容器没有任何问题。毕竟，您的 MonoRail 控制器只会知道他们需要的服务/接口，因此他们不需要了解其他层的内部组件。

如果你仍然不想让你的内部组件对应用程序的其余部分如此可见，这里有几个想法：

*   将您的相关组件包装在[设施](http://www.castleproject.org/container/documentation/trunk/concepts/facility.html)中。这将有助于简化内部组件的配置并保持私有。
*   [使用工厂或子依赖解析器（ ref1](http://www.candland.net/blog/2008/05/02/CastleMicroKernelShowsItsStrengthP2.aspx)、[ref2](http://bugsquash.blogspot.com/2008/09/changing-windsor-components.html)、[ref3](http://www.tunatoksoz.com/post/Castle-ServiceIdResolver.aspx)）将组件实例化委托给类似容器的对象
*   使用子容器。我从未尝试过它们，但看起来它在这种情况下会有所帮助（参见[ref1](http://ayende.com/Blog/archive/2007/06/21/Hierarchical-Containers.aspx)、[ref2](http://www.blechie.com/WPierce/archive/2008/06/06/Advanced-Dependency-Injection-with-Castle-Windsor.aspx)、[ref3](http://hammett.castleproject.org/?p=296)）。

无论您做什么，您***都不***希望每个组件都直接访问容器。如果有的话，请将其保存在您的“胶水代码”中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T09:33:10.060

我认为拥有许多*独立*容器并不是一个好主意。但是，您可能希望拥有一个应用程序范围的*母*容器和范围更窄的*子容器。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T12:24:39.817

您可能会使用子内核，可能吗？但我不太喜欢这个主意。

# c# - C# 应用程序设置不使用自定义类保存

> ID：879935
> 
> 赞同：5
> 
> 时间：2009-05-18T21:26:28.107
> 
> 标签：c#, class, settings, appsettings

这是我试图存储的课程

```
 [Serializable]
[XmlRoot(ElementName = "Database", IsNullable = false, Namespace = "http://somesite.com")]

class Database
{
    [XmlAttribute(AttributeName = "Name")]   
    public string Name { get; set; }

    [XmlAttribute(AttributeName = "Provider")]
    public DatabaseProvider Provider { get; set; }

    [XmlAttribute(AttributeName = "Driver")]
    public string Driver { get; set; }

    [XmlElement("DatabaseEntry")]
    public List<DatabaseEntry> SavedEntries { get; set; }

    public Database()
    {
        SavedEntries = new List<DatabaseEntry>();
    }

    public Database(string type, string provider, string driver)
    {

        Name = type;
        Driver = driver;
        Provider = DatabaseProvider.SqlClient;

        Provider = SetProvider(provider);
        SavedEntries = new List<DatabaseEntry>();
    }

    private DatabaseProvider SetProvider(string provider)
    {
        switch (provider)
        {
            case "OleDb":
                return DatabaseProvider.OleDb;
            case "SqlClient":
                return DatabaseProvider.SqlClient;
            default:
                return DatabaseProvider.SqlClient;
        }
    }
}

[Serializable]
[XmlRoot(ElementName = "DatabaseEntry", IsNullable = false, Namespace = "http://somesite.com")]

class DatabaseEntry

{
    [XmlAttribute(AttributeName = "Name")]
    public string Name { get; set; }

    [XmlAttribute(AttributeName = "ConnectionString")]
    public string ConnectionString { get; set; }

    [XmlAttribute(AttributeName = "DsnString")]
    public string DsnString { get; set; }

    public DatabaseEntry()
    { }
} 
```

数据库是我正在尝试存储的父类，有人看到有什么问题吗？当我实例化类并保存它时，什么都没有保存。是什么赋予了？

编辑！用于保存的代码：

```
if (Settings.Default.SqlDatabase == null) 
   { 
      Settings.Default.SqlDatabase = CreateNewDatabase();
      Settings.Default.Save();
   }

private Database CreateNewDatabase()
{
    Database data = new Database("SQL Server", "SqlClient", "SQL Native Client");
    data.SavedEntries.Add(new DatabaseEntry()
    {
        Name = "Default",
        ConnectionString = @"Hello1",
        DsnString = @"Hello2"
    });
    return data;
} 
```

我只是想将 Database 类的实例存储到 AppSettings 中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-18T22:10:10.403

您可以尝试上课`public`-`XmlSerializer`对此很挑剔。

但是，我似乎记得设置代码对类型转换器更感兴趣；你可以尝试`TypeConverter`为它写一个吗？

# java - Linux 上没有默认浏览器的解决方法？

> ID：879938
> 
> 赞同：2
> 
> 时间：2009-05-18T21:27:27.387
> 
> 标签：java, linux

我正在尝试使用[Desktop](http://java.sun.com/javase/6/docs/api/java/awt/Desktop.html) .browse() 调用 URL，这在 Windows 机器或配置了默认浏览器的 Linux 机器上运行良好。但是，当在 Linux 上找不到默认浏览器时，它会引发 IOException 异常。有哪些方法可以解决这个问题？我想我可以尝试启动 Firefox 并假设它在那里，但我不想做出这样的假设。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-18T21:30:34.040

您可以允许用户输入他们想要启动浏览器的命令，然后保存该命令，以便它每次都使用该命令。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-18T21:30:22.480

我不认为你可以做更多的事情：

1.  检查常用浏览器（firefox、mozilla 等）的常用位置
2.  迭代 PATH 环境变量以查找常见的浏览器可执行文件。
3.  在配置中询问用户。

此外，SWT FAQ 有一[整节](http://www.eclipse.org/swt/faq.php#whatisbrowser)专门用于发现在特定系统上使用的适当版本的 firefox（继续阅读从上面链接的问题开始的问题。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-18T21:59:57.117

尝试[xdg-open](http://portland.freedesktop.org/xdg-utils-1.0/xdg-open.html)或仅尝试使用 konqueror（KDE 上的默认设置，但桌面 API 不支持）和 firefox。

也试试kmclient exec url。

```
if (Desktop.isDesktopSupported()) {
   desktop = Desktop.getDesktop();
   // blah blah
} else {
   // try to launch xdg-open
   // or try launching other browsers?
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-18T21:31:44.193

你可以按顺序尝试各种浏览器——firefox、opera等；还保留一个可编辑的配置文件，让用户设置浏览器，记住你找到的浏览器，等等。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-18T22:45:24.890

看起来 Desktop.browse() 最终会在 *ix 上调用 XDesktopPeer.browse()。该方法[是](http://hg.openjdk.java.net/icedtea/jdk7/jdk/file/tip/src/solaris/classes/sun/awt/X11/XDesktopPeer.java)通过调用[gnome_url_show](http://library.gnome.org/devel/libgnome/stable/libgnome-gnome-url.html#gnome-url-show)来实现的。在某些情况下这可能工作得很好，但正如其他人所指出的那样，xdg-open 是跨平台解决方案。

可以说，这是 Sun Java 中的一个错误。 [错误 6490730](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6490730)，“桌面抛出 IOException 而不是显示 URL 或发送邮件”，（2006 年 11 月报告）似乎相关

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-18T21:36:33.890

如果您要实现“通过一堆浏览器循环”中的一个，请尝试先执行`xdg-open http://the/url` *。*如果由于某种原因 Java 找不到它，那应该[打开默认浏览器。](http://portland.freedesktop.org/xdg-utils-1.0/xdg-open.html)（这似乎确实是 Java 所做的。）

# java - 成为守护线程意味着什么？

> ID：879939
> 
> 赞同：5
> 
> 时间：2009-05-18T21:27:41.800
> 
> 标签：java

我完全了解将线程标记为守护线程对 JVM 退出的影响（如果所有非守护线程都退出，则 JVM 将退出。）

将线程设置为守护进程还有其他副作用吗？

（作为一个完整的旁白，除了语义之外真的无关紧要，在这种情况下守护线程的含义不向后：守护线程不应该让JVM保持活动状态......例如，如果我编写自己的HTTP守护进程并开始运行，我不希望 JVM 只要该线程还活着就一直活着吗？或者“守护进程”一词是否有其他语义？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T21:36:07.790

正如您所拥有的，这意味着线程已分离并且只要 JVM 运行就会运行，除非您明确停止它。按照规范，只要任何*非*守护线程正在运行，JVM 就会一直运行。

除此之外，它并不意味着什么。

你可能会争辩说这是倒退——毕竟，*shutdown(8)*会杀死守护进程——但 JVM 应该表现得像一个行为良好的进程，否则，这意味着人们应该能够期望它终止而不必被杀死。因此，此规范是基于更常见用例的设计决策。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-18T21:37:32.793

守护线程是对其他线程的服务。它只是 jvm 本身的守护进程，而不是外部世界的守护进程。因此，如果只有守护进程存在，它们就没有更多用处了。如果你想要一个 http 守护进程，你只需编写一个带有普通线程的 httpserver 并使用你的操作系统的工具集将它作为守护进程调用，以将应用程序作为守护进程运行。

总结 jvm 中的守护线程不是操作系统的守护线程。守护进程通常是无限循环，你不希望你的 jvm 无限运行，而你所运行的只是一些等待输入的守护进程（没有给出）。

# wpf - 如何在不破坏文本换行的情况下保留和格式化 wpf UserControl 中的内容？

> ID：879963
> 
> 赞同：2
> 
> 时间：2009-05-18T21:36:30.300
> 
> 标签：wpf, xaml, user-controls

我有这个 xaml 块，它允许超链接的文本很好地环绕：

```
<TextBlock>
  <Hyperlink TextDecorations="None" Click="DoSomething">
    <TextBlock TextWrapping="Wrap">
Click this text that is really rather long and overly descriptive in order to do something.
    </TextBlock>
  </Hyperlink>
</TextBlock> 
```

它最终看起来像这样：

[![替代文字](https://i.stack.imgur.com/36lf7.png)](https://i.stack.imgur.com/36lf7.png)

我想使用大致以下语法创建一个控件来简化此 xaml：

```
<MyLinkControl Click="DoSomething">
Click this text that is really rather long and overly descriptive in order to do something.
</MyLinkControl> 
```

好吧，我已经尝试了很多方法来让它作为 UserControl 工作，但无论我最终得到什么：

[![替代文字](https://i.stack.imgur.com/GWzRT.png)](https://i.stack.imgur.com/GWzRT.png)

谁能建议创建这种控件的正确方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T22:50:41.307

我无法确定为什么 UserControl 没有正确格式化文本，尽管它应该是可能的。但是，为了解决最初的问题，我会为此使用 CustomControl 而不是 UserControl。

我们要做的第一件事是创建CustomControl。不幸的是，TextBlock 和 Hyperlink 都不是从 Control 派生的，所以虽然简单地扩展其中之一会很好，但我们不能。

```
[ContentProperty("Text")]
[TemplatePart(Name = "PART_HyperlinkContainer", Type=typeof(Hyperlink))]
[TemplatePart(Name = "Part_TextContainer", Type = typeof(TextBlock))]
public class CustomLinker : Control
{
    static CustomLinker()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(CustomLinker), new FrameworkPropertyMetadata(typeof(CustomLinker)));
    }

    public string Text
    {
        get { return (string)GetValue(TextProperty); }
        set { SetValue(TextProperty, value); }
    }

    // Using a DependencyProperty as the backing store for Text.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty TextProperty =
        DependencyProperty.Register("Text", typeof(string), typeof(CustomLinker), new UIPropertyMetadata(""));  

    public ICommand Click
    {
        get { return (ICommand)GetValue(ClickProperty); }
        set { SetValue(ClickProperty, value); }
    }

    // Using a DependencyProperty as the backing store for Click.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty ClickProperty =
        DependencyProperty.Register("Click", typeof(ICommand), typeof(CustomLinker), new UIPropertyMetadata(null));
} 
```

控件只需要 Click 事件和 Text 属性，对于 click 事件，我决定改用 Command。超链接支持命令，从长远来看，这使得它更容易使用。

ContentProperty 告诉 CustomControl 如何处理直接在其中设置的内容。这两个 TemplatePart 定义了将包含我们的文本的 TextBlock，以及包含该文本块的 Hyperlink。

现在，与自定义控件一起生成了一个默认模板，让我们来看看。并构建我们定义的 TemplateParts。

```
<Style TargetType="{x:Type local:CustomLinker}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:CustomLinker}">
                <Border Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                    <TextBlock>
                      <Hyperlink x:Name="PART_HyperlinkContainer"
                                 TextDecorations="None"
                                 Command="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Click}">
                        <TextBlock x:Name="Part_TextContainer"
                                   TextWrapping="Wrap"
                                   Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Text}" />
                      </Hyperlink>
                    </TextBlock>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

而且，这就是所有需要的。现在我们可以使用我们的控件，

```
<local:CustomLinker Click="{Binding MyCommand}">
    Click this text that is really rather long and overly descriptive in order to do something.
</local:CustomLinker> 
```

# java - 如何在 Spring 中检测未使用的属性

> ID：879965
> 
> 赞同：7
> 
> 时间：2009-05-18T21:36:35.387
> 
> 标签：java, spring

我正在开发一个没有注释的 Spring 2.0 项目。我们使用几个带有不同前缀和后缀的 PropertyPlaceholderConfigurer bean 来从不同的属性文件加载属性。这很好用。

由于大量的属性文件和属性，我希望应用程序列出**未使用**的属性。这意味着，在属性文件中配置的属性，但从未在 Spring 应用程序上下文中引用。

我编写了一个实现 BeanFactoryPostProcessor 的 bean，并做了一些技巧来在应用程序上下文中找到对不同 PropertyPlaceHolderConfigurers 的引用。这给了我一个使用的属性列表。

但是，我无法访问 PlaceHolderConfigurers 加载的属性。因此，我无法显示未使用的属性。

是否有（简单）方法可以获取 PropertyPlaceholderConfigurer 的属性？关于如何解决这个问题的任何其他建议？

**编辑**：解决方案是访问 mergeProperties 方法，如下所示：

```
PropertyPlaceholderConfigurer ppc = 
    (PropertyPlaceholderConfigurer) applicationContext.getBean("yourBeanId");
Method m = PropertiesLoaderSupport.class.getDeclaredMethod("mergeProperties", 
            new Class[] {});
m.setAccessible(true);
Properties loadedProperties = (Properties) m.invoke(propertyPlaceHolder, null); 
```

在获得最初加载的属性，并在 BeanFactoryPostProcessing 期间获取 beandefinitions 之后，剩下的就很简单了。减去这两个集合，瞧：我们现在可以列出未使用的属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T22:44:06.950

您可以尝试使用反射调用受保护的方法[mergeProperties](http://static.springframework.org/spring/docs/2.0.x/api/org/springframework/core/io/support/PropertiesLoaderSupport.html#mergeProperties())以获取完整的属性列表，然后，正如其他发帖人已经说过的那样，删除所有实际使用的属性，最终得到一组未使用的属性。

对于生产代码来说可能有点太老套了，但我假设你只会在单元测试设置中运行它来生成这个报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T22:03:35.223

如何创建您自己的 PropertyPlaceholderConfigurer 子类，该子类将保留对其 Properties 对象的引用并提供访问器。然后，您的 BeanFactoryPostProcessor 将能够访问每个原始 Properties 对象并结合使用的属性列表，您可以找出未使用的属性。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-18T22:16:03.887

您不能只遍历已用属性列表并将它们从所有属性的重复集中删除吗？那将留下未使用的。

# c++ - 如何判断 stderr 是否将输出定向到文件？

> ID：879966
> 
> 赞同：5
> 
> 时间：2009-05-18T21:36:48.757
> 
> 标签：c++, c, unix, pipe, stderr

有没有办法可以判断 stderr 是输出到 C/C++ 程序中的文件还是终端？我需要根据程序是否被调用来输出不同的错误消息：

。/程序

或喜欢：

./程序 2>> 文件

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-18T21:40:14.567

尝试`isatty()`在文件描述符上使用：

> 该`isatty()`函数确定文件描述符是否`fd`引用了有效的终端类型设备。
> 
> 该函数`fileno()`检查参数流并返回其整数描述符。

请注意，`stderr`它始终位于文件描述符 2 上，因此`fileno()`在这种情况下您并不真正需要。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-18T21:38:42.293

是的，您可以使用[`isatty(3)`](http://linux.die.net/man/3/isatty)来判断文件描述符是指终端还是其他东西（文件、管道等）。文件描述符 0 是`stdin`， 1 是`stdout`， 2 是`stderr`。

```
if(isatty(2))
    // stderr is a terminal 
```

# django - 使用 reverse() 将变量传递给 Django 通用视图模板

> ID：879968
> 
> 赞同：1
> 
> 时间：2009-05-18T21:37:09.643
> 
> 标签：django, django-templates, reverse

我有一个这样的 urlpatterns：

```
urlpatterns = patterns('',
...
    (r'^(?P<object_id>\d+)/$', 'django.views.generic.list_detail.object_detail', info_dict, 'poll_detail'),
... 
```

我的 html 页面模板包含以下内容：

```
{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %} 
```

我的视图代码包含：

```
 return HttpResponseRedirect(reverse('poll_detail',args=(p.id,))) 
```

我的问题是，我应该在 reverse() 调用中的什么位置放置我的 'error_message' 变量值？

抱歉，如果这是一个愚蠢的问题，但我已尝试搜索文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T22:10:35.677

[`reverse()`](http://docs.djangoproject.com/en/dev/topics/http/urls/#reverse)将视图名称转换为 URL。它不调用视图。此外，它只能在 URL 中设置参数；它不能设置模板标签。

你能做的就是对视图进行`error_message`论证。`poll_detail`这样，您可以使用将其值传递给视图`reverse()`。

# .net - 您如何对内部使用计时器的类进行单元测试？

> ID：879971
> 
> 赞同：13
> 
> 时间：2009-05-18T21:37:38.380
> 
> 标签：.net, unit-testing, testing, timer

不管你喜不喜欢，有时你必须为在内部使用定时器的类编写测试。

例如，一个类会报告系统可用性并在系统停机时间过长时引发事件

```
public class SystemAvailabilityMonitor {
    public event Action SystemBecameUnavailable = delegate { };
    public event Action SystemBecameAvailable = delegate { };
    public void SystemUnavailable() {
        //..
    }
    public void SystemAvailable() {
        //..
    }
    public SystemAvailabilityMonitor(TimeSpan bufferBeforeRaisingEvent) {
        //..
    }
} 
```

我有一些我使用的技巧（将这些技巧作为答案发布）但我想知道其他人会做什么，因为我对我的任何一种方法都不完全满意。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-18T21:47:35.707

我从对警报做出反应的对象中提取计时器。例如，在 Java 中，您可以将 ScheduledExecutorService 传递给它。在单元测试中，我通过了一个我可以确定性控制的实现，例如[jMock 的 DeterministicScheduler](http://www.natpryce.com/articles/000761.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-07-02T12:31:05.750

如果你正在寻找这个问题的答案，你可能会对这个博客感兴趣： http: [//thorstenlorenz.blogspot.com/2009/07/mocking-timer.html](http://thorstenlorenz.blogspot.com/2009/07/mocking-timer.html)

在其中我解释了一种方法来覆盖 System.Timers.Timer 类的通常行为，使其在 Start() 上触发。

这是简短的版本：

```
class FireOnStartTimer : System.Timers.Timer
{
public new event System.Timers.ElapsedEventHandler Elapsed;

public new void Start()
{
  this.Elapsed.Invoke(this, new EventArgs() as System.Timers.ElapsedEventArgs);
}
} 
```

当然，这要求您能够将计时器传递给被测类。如果这是不可能的，那么类的设计在可测试性方面存在缺陷，因为它不支持依赖注入。如果可以的话，你应该改变它的设计。否则，您可能会不走运，并且无法测试该类涉及其内部计时器的任何内容。

有关更详尽的解释，请访问博客。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-19T22:29:18.757

这就是我正在使用的。我在这本书中找到了它： **Test Driven - Practical TDD and Acceptance TDD for Java Developers** by Lasse Koskela。

```
public interface TimeSource {
    long millis();
}

public class SystemTime {

    private static TimeSource source = null;

    private static final TimeSource DEFAULTSRC =
        new TimeSource() {
        public long millis() {
            return System.currentTimeMillis();
        }
    };

    private static TimeSource getTimeSource() {
        TimeSource answer;
        if (source == null) {
            answer = DEFAULTSRC;
        } else {
            answer = source;
        }
        return answer;
    }

    public static void setTimeSource(final TimeSource timeSource) {
        SystemTime.source = timeSource;
    }

    public static void reset() {
        setTimeSource(null);
    }

    public static long asMillis() {
        return getTimeSource().millis();
    }

    public static Date asDate() {
        return new Date(asMillis());
    }

} 
```

请注意，默认时间源 DEFAULTSRC 是 System.currentTimeMillis()。它在单元测试中被替换；但是，正常行为是标准系统时间。

这是使用它的地方：

```
public class SimHengstler {

    private long lastTime = 0;

    public SimHengstler() {
        lastTime = SystemTime.asMillis();  //System.currentTimeMillis();
    }
} 
```

这是单元测试：

```
import com.company.timing.SystemTime;
import com.company.timing.TimeSource;

public class SimHengstlerTest {
    @After
    public void tearDown() {
        SystemTime.reset();
    }

    @Test
    public final void testComputeAccel() {
        // Setup
        setStartTime();
        SimHengstler instance = new SimHengstler();
        setEndTime(1020L);
    }
    private void setStartTime() {
        final long fakeStartTime = 1000L;
        SystemTime.setTimeSource(new TimeSource() {
            public long millis() {
                return fakeStartTime;
            }
        });
    }
    private void setEndTime(final long t) {
        final long fakeEndTime = t;  // 20 millisecond time difference
        SystemTime.setTimeSource(new TimeSource() {
            public long millis() {
                return fakeEndTime;
            }
        });
    } 
```

在单元测试中，我只用一个设置为 1000 毫秒的数字替换了 TimeSource。这将作为开始时间。调用 setEndTime() 时，我输入 1020 毫秒作为结束时间。这给了我一个受控的 20 毫秒时间差。

生产代码中没有测试代码，只是获取正常的Systemtime。

确保在测试后调用 reset 以恢复使用系统时间方法而不是伪造的时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T21:47:05.177

听起来应该嘲笑计时器，但唉……在快速谷歌之后，[这个带有一些答案的另一个 SO 问题](https://stackoverflow.com/questions/12045/unit-testing-a-timer-based-application)是热门搜索。但后来我发现问题是关于在内部使用计时器的类的概念，doh。无论如何，在进行游戏/引擎编程时 - 您有时会将计时器作为参考参数传递给构造函数 - 我猜这会使模拟它们再次成为可能？但话又说回来，我是编码新手^^

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-18T21:37:50.283

我通常处理的方法是

1.  将计时器设置为每 100 毫秒滴答一次，并认为到那时我的线程可能已经切换到了。这很尴尬，并且会产生一些不确定的结果。
2.  将计时器的经过事件连接到公共或受保护的内部 Tick() 事件。然后从测试中将计时器的间隔设置为非常大的值，并从测试中手动触发 Tick() 方法。这为您提供了确定性测试，但有些事情您无法使用这种方法进行测试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-24T22:36:40.010

我意识到这是一个 Java 问题，但展示它在 Perl 世界中是如何完成的可能会很有趣。您可以简单地覆盖测试中的核心时间函数。:) 这可能看起来很可怕，但这意味着您不必为了测试它而在生产代码中注入大量额外的间接性。 [Test::MockTime](http://search.cpan.org/dist/Test-MockTime)就是一个例子。在你的测试中冻结时间会让一些事情变得容易得多。就像那些敏感的非原子时间比较测试一样，你在时间 X 运行某些东西，然后在你检查它的 X+1 时。下面的代码中有一个示例。

更传统一点，我最近有一个 PHP 类来从外部数据库中提取数据。我希望它每 X 秒最多发生一次。为了测试它，我将最后更新时间和更新时间间隔都作为对象的属性。我最初将它们设为常量，因此这种测试更改也改进了代码。然后测试可以像这样摆弄这些值：

```
function testUpdateDelay() {
    $thing = new Thing;

    $this->assertTrue($thing->update,  "update() runs the first time");

    $this->assertFalse($thing->update, "update() won't run immediately after");

    // Simulate being just before the update delay runs out
    $just_before = time() - $thing->update_delay + 2;
    $thing->update_ran_at = $just_before;
    $this->assertFalse($thing->update, "update() won't run just before the update delay runs out");
    $this->assertEqual($thing->update_ran_at, $just_before, "update_ran_at unchanged");

    // Simulate being just after
    $just_after = time() - $thing->update_delay - 2;
    $thing->update_ran_at = $just_after;
    $this->assertTrue($thing->update, "update() will run just after the update delay runs out");

    // assertAboutEqual() checks two numbers are within N of each other.
    // where N here is 1\.  This is to avoid a clock tick between the update() and the
    // check
    $this->assertAboutEqual($thing->update_ran_at, time(), 1, "update_ran_at updated");
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-18T21:44:19.753

我重构了这些，使时间值成为方法的参数，然后创建另一个除了传递正确参数之外什么都不做的方法。这样，所有实际行为都是隔离的，并且可以在所有奇怪的边缘情况下轻松测试，只留下非常微不足道的参数插入未经测试。

作为一个非常微不足道的例子，如果我从这个开始：

```
public long timeElapsedSinceJan012000() 
{
   Date now = new Date();
   Date jan2000 = new Date(2000, 1, 1);  // I know...deprecated...bear with me
   long difference = now - jan2000;
   return difference;
} 
```

我会对此进行重构，并对第二种方法进行单元测试：

```
public long timeElapsedSinceJan012000() 
{
   return calcDifference(new Date());
}

public long calcDifference(Date d) {
   Date jan2000 = new Date(2000, 1, 1);
   long difference = d - jan2000;
   return difference;
} 
```

# silverlight - 使用具有绝对 URI 的 Silverlight MediaElement

> ID：879982
> 
> 赞同：0
> 
> 时间：2009-05-18T21:42:55.793
> 
> 标签：silverlight, mediaelement

我正在尝试构建一个小型 Silverlight 应用程序。我有我在本地主机上托管的文件。我希望能够使用 MediaElement 来播放它们。但是，当我启动 silverlight 应用程序时，我不断收到这个烦人的错误消息：

错误：Silverlight 2 应用程序 SLControls.xap 中的未处理错误代码：4001
类别：MediaError
消息：AG_E_NETWORK_ERROR

我正在使用以下行来初始化 MediaElement 源：

Uri.TryCreate( [http://localhost:/mywebsite/Data/Users/16/Channels/472.MP3](http://localhost:/mywebsite/Data/Users/16/Channels/472.MP3) , UriKind.Absolute, out Channellocation);

先感谢您，

冯迪普洛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T06:57:11.540

问题可能出在 localhost 之后的 ':' 字符中？试试这个链接： [http://localhost/mywebsite/Data/Users/16/Channels/472.MP3](http://localhost/mywebsite/Data/Users/16/Channels/472.MP3)

[您可以使用Fiddler](http://www.fiddler2.com/fiddler2/version.asp)工具调试网络问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-19T07:48:52.423

Silverlight 不支持跨方案新网络请求。如果您从 Blend 2 SP1 创建应用程序，或者选择不生成测试 ASP.NET 站点，则默认情况下 IDE 将自动生成一个测试页面并使用 file:// 方案运行它。确保您没有使用 file:// 方案，并确保如果您将 URL 粘贴到浏览器中，则该文件已成功定位。

# perl - 我可以告诉 Perl 一些数据是不可变的以加快速度吗？

> ID：879984
> 
> 赞同：1
> 
> 时间：2009-05-18T21:43:40.270
> 
> 标签：perl, optimization

Perl 非常适合编写我通常需要做的那种字符串/文件解析程序。与 C/C++/JAVA 相比，我真正喜欢的是编写快速脚本和一次性代码所需的时间微不足道。但是，我想学习如何加快速度。

例如，我想学习如何向 Perl 提供提示，以便它可以更好地做出一些决定——尤其是与字符串相关的事情。在我看来，每当你做任何事情时，Perl 都会复制一个字符串，而不管你以后是否真的修改了这个副本。这是设计使然（我可以用一些魔法将其关闭吗？）还是我在咆哮？

我真的很想把一些字符串当作`(const char *`)。我确信我们总是不需要所有东西都是 std::string 及其所有包袱（让我们假设 std::string 类似于 Perl 字符串）。我可以提示 Perl 在某些字符串上执行此操作吗？

我记得在一些文章中读到（如果可以放置请发表评论），您可以向 Perl 暗示您不会修改某些变量，因此它消除了在修改它时需要的额外包袱等。

我相信 Perl 变量有两个指向同一个 Perl 变量的内部指针——一个可以存储一个数字，另一个可以存储一个字符串（字符数组）。我可以一直告诉 Perl 从头到尾选择一个吗？我可以让 Perl 处理一些字符串，`(const char *)`以便它们不会标记修改它们所需的功能吗？

例如，我在某处（可能是同一篇文章？）读到 unpack() 比 substr() 更快，因为 substr() 返回一个左值，因此您也可以对其进行操作。例如，如果我想用 'ef' 替换字符串的前两个字符，我可以这样写：

```
substr(string, 0, 2) = 'ef'; # string now begins with 'ef' 
```

因此，除非我使用 substr() 的这个特殊功能，否则我最好使用 substr 吗？

我是不是一直在咆哮？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-18T21:56:52.070

您可以`SvREADONLY`使用 为变量设置标志[`Readonly::XS`](http://search.cpan.org/dist/Readonly-XS/XS.pm)，但这不会提高效率。效率来自选择正确的算法，而不是通过编译器提示。如果您希望您的代码更快/使用更少的内存，请对其进行分析（请参阅 参考资料[`Devel::NYTProf`](http://search.cpan.org/dist/Devel-NYTProf/lib/Devel/NYTProf.pm)）。当您发现瓶颈时，要么在那里使用不同的算法，要么切换到使用[`XS`](http://perldoc.perl.org/perlxs.html).

此外，如果您要尝试优化某些内容，请确保结果确实更快，这是 substr 与 unpack ：

```
 Rate unpack substr
unpack 2055647/s     --   -74%
substr 7989875/s   289%     -- 
```

这是基准代码。

```
#!/usr/bin/perl

use strict;
use warnings;

use Benchmark;

my %subs = (
    unpack => sub { return unpack "a3", "foobarbaz" },
    substr => sub { return substr "foobarbaz", 0, 3 }
);

for my $sub (keys %subs) {
    print "$sub => ", $subs{$sub}(), "\n";
}

Benchmark::cmpthese -1, \%subs; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-19T00:00:08.403

## 一般来说：

使用好的算法，除非必要，否则不要优化。如果是，请分析您的代码并对您的更改进行基准测试。这是根据需要考虑 XS 或 Inline::C 的好时机。

## a (const *) char 等价物：

`use constant Foo => 'bar';`创建[一个可以被](http://perldoc.perl.org/perlsub.html#Constant-Functions)perl 编译器内联的最小子例程。您还可以创建自己的可内联常量函数

## 避免额外的复制：

典型的 perl 习惯用法做了一些“额外”的复制：

```
sub foo {
    my $bar = shift;

    ..do stuff with $bar...
} 
```

许多人没有意识到 Perl 通过引用将参数传递给子例程。`@_`包含子例程参数的**别名。**

因此，您可以通过`@_`直接使用来避免复制您的论点：

```
foo( $big_scalar );

sub foo {
    ..do stuff with $_[0]...
    .. sneakily risk modifying $big_scalar ..
} 
```

当然，这是有风险的，因为如果你修改了值，你就会修改调用值。仅当您需要保存 BIG 文件副本时才使用此选项。（或者您明确想要修改调用参数。）

如果我需要移动一大块数据，但不打算修改它，我通常通过引用显式传递它，而不是乱用`@_`;

```
foo( \$big_scalar );
sub foo {
    my $bar = shift;
    ... do stuff with $$bar ...
    ... can modify $big_scalar, but the pass by ref is explicit ...
} 
```

## [P]过早的优化是万恶之源

至少那是唐纳德·克努斯（Donald Knuth）相当著名的话。这句话有很多智慧。

不正确的优化（声称是优化但不是优化的代码）也很糟糕。

首先代码清晰。请务必分析您的代码以找到瓶颈。请务必对您的优化进行基准测试，以确保它们有效。记录您的优化代码，随身携带一些基准代码——明天的编译器可能与今天的响应方式不同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-18T22:44:54.033

我与 Chas 合作，首先对您的代码进行基准测试和概要分析。我真的怀疑字符串复制是您的瓶颈，您将浪费大量时间而收效甚微。即使字符串复制确实是瓶颈，也要先在代码中寻找有缺陷的算法。Perl 相对于 C 和 Java 的巨大潜在性能提升之一是因为它编写代码的速度非常快，它让您有大量额外的时间来分析、优化和改进算法。

如果字符串复制确实是您的瓶颈，请考虑简单地将大字符串作为引用传递。C 中字符串指针的道德等价物。这将防止复制。请记住在使用它们之前取消引用它们。

```
sub foo {
    my $ref = shift;

    print $$ref;
}

$string = "Some string";
foo(\$string); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T21:56:59.027

> 我记得在一些文章中读到（如果可以放置，请发表评论），您可以暗示 perl 您不会修改某些变量，因此它消除了如果您要修改它等所需的额外包袱？

假设您在谈论“[使用常量](http://www.perl.com/doc/manual/html/lib/constant.html)...”，我是否正确？

# .net - 创建不受 Windows 任务栏遮挡的表单的正确方法是什么？

> ID：879986
> 
> 赞同：6
> 
> 时间：2009-05-18T21:44:16.493
> 
> 标签：.net, winforms, taskbar

我将任务栏停靠在左侧，这会导致在任务栏下方打开许多窗口。

System.Windows.Form.FormStartPosition 值均不考虑任务栏，手动除外。这是设计使然吗？这令人沮丧。我想尊重操作系统应该强制执行的默认监视器和窗口位置值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-18T21:58:42.627

好吧，如果 WinForms 不自动执行此操作，您可能必须手动设置。

您必须使用 System.Windows.Forms.Screen.PrimaryScreen.WorkingArea 来获取没有任务栏的屏幕区域，并使用该 Rectangle 手动计算表单的启动区域，并将其设置为 Form 的 Bounds 属性. （确保表单使用 FormStartPosition.Manual）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T21:58:20.880

我认为没有.NET 方法可以做到这一点。我看不出有任何理由拥有这样一个。

您可以找到[任务栏位置](http://www.google.com/search?q=taskbar+position+c%23)并手动将表单放在那里。

# css - IE6 浮动

> ID：879989
> 
> 赞同：2
> 
> 时间：2009-05-18T21:44:32.843
> 
> 标签：css, html, image, internet-explorer-6

有时在浮动的 div 中。IE6 不显示标签，但是它会正确地分隔图像，并且当您右键单击图像时，它会提供正确的详细信息，例如大小和文件大小。它只是不显示图像：

```
<div style="float:left">
    <img src="one.gif" />
</div>
<div style="float:left">
    <img src="two.gif" />
</div> 
```

这些图像在 IE6 中不显示，但在 Firefox/Safari/etc 中显示... 解决方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-18T22:41:51.730

它被称为“Peekaboo”错误。有关更多信息，请参阅：

[http://www.positioniseverything.net/explorer/peekaboo.html](http://www.positioniseverything.net/explorer/peekaboo.html)

解决此问题的首选方法是将容器上的 hasLayout 属性设置为 true

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-18T21:46:03.823

一种解决方法是使用：

```
position: relative;
float: left; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-19T01:40:48.903

尝试也浮动图像，这将工作！

```
div img {
   float:left;
} 
```

默认情况下，图像是`display:inline;`在浮动 div 中时，div 不会包围它们。我相信这是显示错误的原因。

# tfs - Team Foundation 2010 beta - 摆脱未使用的字段（迁移计划）

> ID：879990
> 
> 赞同：0
> 
> 时间：2009-05-18T21:44:43.263
> 
> 标签：tfs, migration

现在下载它，想知道是否有其他人将现有的自定义流程模板（工作项类型、工作项和源代码控制）移动到测试版。

在过去的几年里，我们的自定义流程模板已经“进化”了，我知道它里面有未使用的字段。你认为如果我设置另一台服务器添加我们的自定义流程模板，我是否能够移动我们现有的工作项，并将源作为测试？我们将保留 2008 年的日常开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-19T11:35:29.203

在您的新服务器实例中，您将能够从版本控制中移动最新版本文件的副本，并通过获取新版本的流程模板并放入您需要的字段然后添加数据来迁移您的工作项对于当前工作项（我通常使用 Excel 进行批量导入）。但是，您将丢失版本控制和工作项跟踪的历史记录。

当 TFS2010 发布时，我希望能够为希望更新现有模板以具有新功能并与新测试工作项等集成的人们提供指导。

# php - 如何将具有用户提供数量的未知库存项目选择添加到购物车？

> ID：879993
> 
> 赞同：0
> 
> 时间：2009-05-18T21:45:05.820
> 
> 标签：php, javascript, html, shopping-cart

我目前正在使用 PHP、JAVASCRIPT、MYSQL、XHTML、CSS 来开发我的网站。请注意，解决方案不限于此，而是在可能的情况下首选。

我有一个大的 MYSQL 小部件表和一个允许用户搜索特定小部件的页面。

例如，假设用户键入某个小部件的型号名称，搜索可能会返回 20 个不同的小部件型号。每个小部件型号都不一样，它们都有自己的小部件单价和小部件型号名称等。

现在是棘手的部分（无论如何对我来说），用户应该能够在所需的小部件 html 文本字段旁边输入一个数量。

然后，用户应该能够按下添加到购物车按钮，该按钮存储数量和模型与其关联的数量。

（设计说明：MYSQL 查询用于返回搜索结果列表，我使用 PHP 回显找到的小部件行。在每次迭代时，我还显示应输入所需数量的文本字段。）。

我的主要问题是弄清楚如何将 MYSQL 绘制的小部件名称与用户输入的数量相关联并将其一起存储在购物车中。有人能指出我正确的方向吗，我不知道如何解决这个问题。

我在想我可能能够将小部件模型回显到文本字段 Id 中，但是在发布后我将如何确定哪个模型有数量......这可能不是最好的方法，即使它是可能的。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-18T21:58:34.577

使文本字段名称类似于 items[uniq_module_id]

```
<input type="text" name="items[10001]">
<input type="text" name="items[10002]">
<input type="text" name="items[10003]"> 
```

然后在 php

```
$items = $_POST['items'];
print_r($items); 
```

你会得到

```
[items] => Array
    (
        [uniq_module_id] => quantity
            ...
    ) 
```

和一个样本

```
$items = (isset($_POST['items'])) ? $_POST['items'] : array();
if (is_array($items)) {
    foreach ($items as $module_id => $quantity)
    {
        if (intval($quantity) > 0) {
            add2cart($module_id, $quantity);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T22:07:43.000

每个小部件上是否有“添加到购物车”按钮/链接？生成将所需信息（数量和小部件 ID）发送到 add-to-cart.php 的按钮/链接。

```
foreach ($rows as $row) {
    // Print widget info
    echo '<input type="text" name="quantity" id="widget_' . $row['widgetID'] . '_qty" value="1">';
    echo "<button onclick=\"javascript: location.href='add-to-cart.php?widgetId=" . $row['widgetID'] . "&quantity=' + document.getElementById('widget_" . $row['widgetId'] . "_qty').value;\" value=\"Add to cart\" />";
} 
```

或类似的东西。使用 Ajax 也可能是一个很好的解决方案。**************`````******