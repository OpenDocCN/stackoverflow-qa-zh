# StackOverflow 问答 12002000-12002999

# android - 在 android 模拟器中安装 .apk 报告 0x501 错误，同时使用 GPU Emulation 和 OpenGL ES

> ID：12002000
> 
> 赞同：3
> 
> 时间：2012-08-17T08:02:34.467
> 
> 标签：android, opengl-es, android-emulator, apk, arcgis

我正在尝试在 Android Emulator 中运行**ArcGIS for Android示例。**根据[ArcGIS 的建议](http://blogs.esri.com/esri/arcgis/2012/05/02/arcgis-runtime-sdk-for-android-v1-1-supports-android-emulator/)，我安装了**Intel HAXM**并启用了**GPU 仿真**。

我的一台机器有 3GB RAM，在模拟器中运行 .apk 没有问题。但是另一台具有 2GB RAM 的机器在运行应用程序时报告以下控制台输出。似乎应用程序已经**安装了 ERRORS**，我可以看到**没有 MAP**的应用程序布局并且它没有响应我。

请建议我，是否与硬件不足有关，或者我是否缺少任何软件配置来使其正常工作？

提前致谢！

```
[2012-08-17 12:07:07 - GeometryEditor] New emulator found: emulator-5554
[2012-08-17 12:07:07 - GeometryEditor] Waiting for HOME ('android.process.acore') to be launched...
[2012-08-17 12:08:32 - GeometryEditor] HOME is up on device 'emulator-5554'
[2012-08-17 12:08:32 - GeometryEditor] Uploading GeometryEditor.apk onto device 'emulator-5554'
[2012-08-17 12:09:20 - GeometryEditor] Installing GeometryEditor.apk...
[2012-08-17 12:09:42 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_V2/GLESv2Imp.cpp:glUseProgram:1911 error 0x501
[2012-08-17 12:09:42 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_V2/GLESv2Imp.cpp:glGetUniformLocation:1380 error 0x501
[2012-08-17 12:09:42 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_V2/GLESv2Imp.cpp:glGetAttribLocation:825 error 0x501
[2012-08-17 12:09:42 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_V2/GLESv2Imp.cpp:glUseProgram:1911 error 0x501
[2012-08-17 12:09:42 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_V2/GLESv2Imp.cpp:glGetUniformLocation:1380 error 0x501
[2012-08-17 12:09:42 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_V2/GLESv2Imp.cpp:glGetAttribLocation:825 error 0x501
[2012-08-17 12:09:42 - Emulator] sdk/emulator/opengl/host/libs/Translator/GLES_V2/GLESv2Imp.cpp:glGetUniformLocation:1380 error 0x501
.............
.............
.............
[2012-08-17 12:10:27 - GeometryEditor] Success!
[2012-08-17 12:10:27 - GeometryEditor] Starting activity com.esri.arcgis.android.samples.geometryeditor.GeometryEditor on device emulator-5554
[2012-08-17 12:10:30 - GeometryEditor] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.esri.arcgis.android.samples.geometryeditor/.GeometryEditor } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:13:55.737

您收到 OpenGL 错误 501 (GL_INVALID_VALUE)，其中每个函数看起来都与您的着色器相关。

我猜想程序中包含的着色器没有编译，并且在编译和链接着色器时没有错误检查/验证，所以它正在处理一个损坏的程序。不同的 GPU 对它们将接受的着色器源有些挑剔，因此在一台计算机上运行的程序会停止在另一台计算机上运行似乎一点也不奇怪。

你有这个项目的源代码，你可以编辑吗？如果您从着色器打印调试消息，它可能很容易修复。

# r - Black-Scholes：VBA 代码和 R 代码之间的区别......哪里出错了？

> ID：12002002
> 
> 赞同：1
> 
> 时间：2012-08-17T08:02:44.133
> 
> 标签：r, vba

以下 VBA 代码应该是正确的：

```
Function BlackScholes(CallPutFlag As String, S As Double, X _
As Double, T As Double, r As Double, v As Double) As Double

Dim d1 As Double, d2 As Double

d1 = (Log(S / X) + (r - v ^ 2 / 2) * T) / (v * Sqr(T))
d2 = d1 - v * Sqr(T)
    If CallPutFlag = "c" Then
     BlackScholes = S * CND(d1) - X * Exp(-r * T) * CND(d2)
    ElseIf CallPutFlag = "p" Then
     BlackScholes = X * Exp(-r * T) * CND(-d2) - S * CND(-d1)
    End If

End Function

'// The cumulative normal distribution function
Public Function CND(X As Double) As Double

Dim L As Double, K As Double
Const a1 = 0.31938153: Const a2 = -0.356563782: Const a3 = 1.781477937:
Const a4 = -1.821255978: Const a5 = 1.330274429

L = Abs(X)
K = 1 / (1 + 0.2316419 * L)
CND = 1 - 1 / Sqr(2 * Application.Pi()) * Exp(-L ^ 2 / 2) * (a1 * K + a2 * K ^ 2 + a3 * K ^ 3 + a4 * K ^ 4 + a5 * K ^ 5)

If X < 0 Then
CND = 1 - CND
End If
End Function 
```

现在我尝试在 R 中做到这一点：

```
blackscholes <- function(S, X, rf, T, sigma) {
values <- c(2)

d1 <- (log(S/X)+(rf-sigma^2/2)*T)/sigma*sqrt(T)
d2 <- d1 - sigma * sqrt(T)

values[1] <- S*pnorm(d1) - X*exp(-rf*T)*pnorm(d2)
values[2] <- X*exp(-rf*T) * pnorm(-d2) - S*pnorm(-d1)

values
} 
```

使用以下输入，我得到的结果略有不同：

```
Spot    2,8
Strike  2,9
Risk free   0,01
T   0,083333333
Sigma   0,2 
```

使用 'fOptions' R 包的结果等于 VBA 之一，然后我不明白 R 代码错误在哪里。

任何的想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T08:06:07.347

你有一个错误

```
d1 <- (log(S/X)+(rf-sigma^2/2)*T)/sigma*sqrt(T) 
```

应该读

```
d1 <- (log(S/X)+(rf-sigma^2/2)*T)/(sigma*sqrt(T)) 
```

# cocoa-touch - 父 UIView 和子视图背景颜色

> ID：12002007
> 
> 赞同：2
> 
> 时间：2012-08-17T08:03:06.003
> 
> 标签：cocoa-touch, uiview

我尝试构建一个简单的 iPhone 应用程序。我想创建一个表示矩形的自定义 UIView 并将其添加到其子视图中绘制一个圆圈的自定义 UIView。我希望矩形 UIView 背景为蓝色，圆圈为红色。这样的事情可能吗？我只想设置圆圈内的填充，但是当我创建圆圈 UIView 时，它实际上是一个大小为矩形的矩形，因此如果我想实现这一点，我想我必须将圆圈 UIView 的背景设置为与矩形的背景。我必须将圆圈的 UIView 的背景颜色设置为与矩形相同，还是有另一种方法可以做到这一点？（使用可能不透明？）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:54:17.153

刚刚发现可以将UIView背景色设置为clearColor，这似乎是我想要的结果。

# cordova - PhoneGap 架构设计

> ID：12002008
> 
> 赞同：1
> 
> 时间：2012-08-17T08:03:24.083
> 
> 标签：cordova, mobile, architecture

我将编写我的第一个 phonegap 应用程序（用于平板电脑），但我不确定应该以何种方式组织它的结构：

1.  一个包含许多 div 的 .html 文件，我用 js 进行了更改。
2.  许多 .html 文件

PhoneGap 开发的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:23:14.513

好吧，这两种方法都很好，但我建议第二个选项，因为它易于管理单独的文件而不是一个文件。

你可以让你的 html 文件包含使用

```
$.get(file_name, function(data){
   console.log(data);
}); 
```

jquery 函数，您可以将 innerHtml 用于任何 DIV 或文档正文

# java - 通过 AndEngine 触摸旋转

> ID：12002013
> 
> 赞同：3
> 
> 时间：2012-08-17T08:03:55.143
> 
> 标签：java, android, andengine

我有名为“枪”的 Sprite，我想通过用户触摸来旋转它。
**我的问题：**当我触摸并向下移动时它会旋转并且效果很好，但是当我触摸并向上移动时它不会旋转。
**这是我的代码：**

```
package com.example.samplegameone;

import java.io.IOException;
import java.io.InputStream;

import org.andengine.engine.camera.Camera;
import org.andengine.engine.options.EngineOptions;
import org.andengine.engine.options.ScreenOrientation;
import org.andengine.engine.options.resolutionpolicy.RatioResolutionPolicy;
import org.andengine.entity.scene.Scene;
import org.andengine.entity.scene.background.Background;
import org.andengine.entity.sprite.Sprite;
import org.andengine.entity.util.FPSLogger;
import org.andengine.input.touch.TouchEvent;
import org.andengine.opengl.texture.ITexture;
import org.andengine.opengl.texture.bitmap.BitmapTexture;
import org.andengine.opengl.texture.region.ITextureRegion;
import org.andengine.opengl.texture.region.TextureRegionFactory;
import org.andengine.ui.activity.SimpleBaseGameActivity;
import org.andengine.util.adt.io.in.IInputStreamOpener;
import org.andengine.util.debug.Debug;

import android.util.Log;
import android.widget.Toast;

public class SampleGameOne extends SimpleBaseGameActivity {

private static final int CAMERA_WIDTH = 480;
private static final int CAMERA_HEIGHT = 320;

private ITexture mTexture;
private ITextureRegion mFaceTextureRegion;
Sprite gun = null;

@Override
public EngineOptions onCreateEngineOptions() {
    final Camera camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);

    return new EngineOptions(true, ScreenOrientation.LANDSCAPE_SENSOR,
            new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), camera);
}

@Override
public void onCreateResources() {
    try {
        this.mTexture = new BitmapTexture(this.getTextureManager(),
                new IInputStreamOpener() {
                    @Override
                    public InputStream open() throws IOException {
                        return getAssets().open("gfx/gun.png");
                    }
                });

        this.mTexture.load();
        this.mFaceTextureRegion = TextureRegionFactory
                .extractFromTexture(this.mTexture);
    } catch (IOException e) {
        Debug.e(e);
    }
}

@Override
public Scene onCreateScene() {
    this.mEngine.registerUpdateHandler(new FPSLogger());

    final Scene scene = new Scene();
    scene.setBackground(new Background(0.09804f, 0.6274f, 0.8784f));

    final float centerX = (CAMERA_WIDTH - this.mFaceTextureRegion
            .getWidth()) / 2;
    final float centerY = (CAMERA_HEIGHT - this.mFaceTextureRegion
            .getHeight()) / 2;

    gun = new Sprite(centerX, centerY, this.mFaceTextureRegion,
            this.getVertexBufferObjectManager()) {

        @Override
        public boolean onAreaTouched(TouchEvent pSceneTouchEvent,
                float pTouchAreaLocalX, float pTouchAreaLocalY) {
            switch (pSceneTouchEvent.getAction()) {
            case TouchEvent.ACTION_DOWN:

                break;
            case TouchEvent.ACTION_MOVE:
                float pValueX = pSceneTouchEvent.getX();
                float pValueY = CAMERA_HEIGHT - pSceneTouchEvent.getY();

                float directionX = pValueX - gun.getX();
                float directionY = (CAMERA_HEIGHT - pValueY) - gun.getY();

                float rotationAngle = (float) Math.atan2(directionY,
                        directionX);
                gun.setRotationCenter(0, gun.getHeight() / 2);
                gun.setRotation(org.andengine.util.math.MathUtils
                        .radToDeg(rotationAngle));

                break;
            case TouchEvent.ACTION_UP:
                break;

            default:
                break;
            }
            return super.onAreaTouched(pSceneTouchEvent, pTouchAreaLocalX,
                    pTouchAreaLocalY);
        }

    };
    scene.registerTouchArea(gun);
    scene.setTouchAreaBindingOnActionDownEnabled(true);
    scene.attachChild(gun);

    return scene;
}
} 
```

我认为本节计算旋转角度的问题

```
 float pValueX = pSceneTouchEvent.getX();
                float pValueY = CAMERA_HEIGHT - pSceneTouchEvent.getY();

                float directionX = pValueX - gun.getX();
                float directionY = (CAMERA_HEIGHT - pValueY) - gun.getY();

                float rotationAngle = (float) Math.atan2(directionY,
                        directionX);
                gun.setRotationCenter(0, gun.getHeight() / 2);
                gun.setRotation(org.andengine.util.math.MathUtils
                        .radToDeg(rotationAngle)); 
```

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:52:30.567

您应该修复两件事：

*   实际上`directionY`是（让我们查看您的公式）：

    ```
    float directionY = pSceneTouchEvent.getY() - gun.getY(); 
    ```

*   与您的枪的世界位置相比，您`directionX`和`directionY`是触摸位置的移位元素`[top,left]`=> 所以您**计算的角度**实际上是围绕这把枪`[top,left]`位置的旋转。因此，事情应该是：

    ```
    gun.setRotationCenter(0, 0); 
    ```

其中 (0,0) 是本地 [top, left] 相对位置，用于设置枪中旋转的锚点。

**笔记：**

您应该了解有关 AndEngine (Box2D) 中的物理的更多信息。要随心所欲地做事，通常应该执行以下操作：

*   **`fix anchor body`**在您希望`gun`旋转的位置创建一个（可能是圆形体）。
*   用这个锚创建一个**`RevoluteJoint`**来固定你的枪。
*   **`Mouse Joint`**每次**触摸**您的枪并**释放**您的触摸时，在您的枪和鼠标点之间创建和处置一个。

您可以在 中查看 AndEngine 示例的示例`Physics\Using a RevoluteJoint + MouseJoint`。

这将帮助您创建在现实世界中发生的正常交互，而不管计算身体对象的位置、旋转或速度（因为物理引擎会为您完成）。

此外，您可以在游戏中的任何对象上应用相同的机制（通过将上述过程封装在函数或类中）。

# php - 在论文中创建自定义页面布局

> ID：12002023
> 
> 赞同：0
> 
> 时间：2012-08-17T08:04:53.233
> 
> 标签：php, wordpress, wordpress-thesis-theme

我是 wordpress 的初学者，因为我使用的是论文主题，我被停在一个地方，不知道那个地方的解决方案。

**问题是**：

我想在论文主题中创建自定义页面模板，所以不知道该怎么做。那么如何在 wordpress中创建**custom_template呢？**提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:34:38.213

您可以在 Wordpress 中创建自定义模板并将其存储在您正在使用的当前主题中

```
<?php
/* Template Name: ContactTemplate (like this try giving any logical name so that while using this template you can Remember it by name, this is for Contact page Template)
?>
<?php get_header(); //this will call your header files ?>
<?php 
//your content goes here 
//you can run custom Query here, try running query_posts(); if you want to show posts
?>
<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

注意：- 所有页面的页眉、页脚和侧边栏将保持不变

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:40:36.020

在您激活的主题文件夹中创建自定义模板创建文件。例如，如果您的自定义模板名称是“home_custom_template”。在文件中编写代码：

```
 <?php
    /*
    Template Name: home_custom_template
    */
    get_header();
    ?>
          /*
             Your Php and html code here...
          */

 <?php get_footer();?> 
```

1))

```
 /*
        Template Name: home_custom_template
     */ 
```

此代码定义为 wordpress 这是模板。

2））创建新页面在wordpress中，第一页右侧的模板下拉菜单。你可以在那里找到你的模板。因此，选择您的自定义模板并发布页面。

# compilation - 安装 Umbraco 4.8.1 编译失败

> ID：12002024
> 
> 赞同：0
> 
> 时间：2012-08-17T08:04:53.657
> 
> 标签：compilation, umbraco, virtual-path

我已经使用 Umbraco 4.8.1 安装了一个新站点，我尝试做的第一件事是构建项目，但我收到此错误：

```
C:\inetpub\wwwroot\UmbracoAlden\umbraco\developer\RelationTypes\NewRelationType.aspx(1): Build (web): The virtual path '/umbraco/masterpages/umbracoPage.Master' maps to another application, which is not allowed. 
```

我该如何解决这个问题？

# objective-c - 请解释 NSDateComponents 中按位运算符 OR 的使用？

> ID：12002025
> 
> 赞同：1
> 
> 时间：2012-08-17T08:04:57.853
> 
> 标签：objective-c, ios, nscalendar

我似乎找不到这个问题的答案。这里也没有文档。也许我不确定我应该寻找什么？

```
unsigned int unitFlags = NSHourCalendarUnit | NSMinuteCalendarUnit | NSDayCalendarUnit | NSMonthCalendarUnit; 
```

据我了解，这些应该是“OR”的逻辑按位运算符

他们如何在这种情况下工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T08:12:18.443

像这样使用的位运算符是一种在一个变量中设置多个布尔标志的方法，称为位掩码

因此，如果

```
FlagA = 1 << 3; //binary = 1000
FlagB = 1 << 2; //binary = 0100
FlagC = 1 << 1; //binary = 0010
FlagD = 1 << 0; //binary = 0001 
```

我设置

```
myFlag = FlagA | FlagC | FlagD; 
```

它是或

```
1000 |
0010 |
0001 =
1011 
```

因此，在您的示例中，您将单位标志设置为小时、分钟、日和月

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T08:14:13.043

您正在为`NSDateComponents`with设置位掩码`NSHourCalendarUnit | NSMinuteCalendarUnit | NSDayCalendarUnit | NSMonthCalendarUnit`。

所以基本上你是说你想使用所有的参数。如果您想在一个变量中为方法提供多个标志，这很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T08:14:41.020

`NSCalendar`是相当昂贵的课程，某些单位的计算可能需要很长时间。因此，使用这些标志，您可以指定要计算的单位以使其更快。没有指定的单位将不计算。

此外，当您使用`NSCalendar`, 缓存它时，一次又一次地创建它真的很昂贵。

休息由@wattson12 回答。

# android - 当通过音频采样的数据数量超过 AudioRecord 构造函数中设置的“bufferSizeInBytes”时会发生什么？

> ID：12002031
> 
> 赞同：3
> 
> 时间：2012-08-17T08:05:28.677
> 
> 标签：android, audio, record, audiorecord

```
public AudioRecord (int audioSource, int sampleRateInHz, int channelConfig, int audioFormat, int bufferSizeInBytes) 
```

这是 的 Public Constructor `AudioRecord`，你可以找到最后一个名为 的参数`bufferSizeInBytes`，它的意思是“在录制过程中写入音频数据的缓冲区的总大小（以字节为单位）”。在安卓文档中。

我认为这是一个用于存储从音频硬件采样的所有数据的缓冲区。我有个问题 ：

> 如果通过音频采样的数据数量超过“bufferSizeInBytes”，会发生什么，停止采样还是其他？

我做了一些测试，发现即使样本数据的数量超过了，也没有发生任何事情（它一直在记录）。为什么？

> ```
> So  can anyone tell me what's the meaning about  "bufferSizeInBytes" 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T08:19:36.940

这是在录制过程中缓冲的音频数据量。它决定了您必须通过 拉取`AudioRecord`对象的频率，而不是在对象的生命周期`read()`内可以记录的总量。`Audiorecord`

如果不读出`AudioRecord`对象，记录的数据就会丢失。它继续录制，但超过缓冲区级别的音频帧被丢弃。

如果从对象中读取音频数据，缓冲区填充级别会降低。

# knockout.js - KnockoutJS foreach 数据绑定功能？

> ID：12002032
> 
> 赞同：2
> 
> 时间：2012-08-17T08:05:30.660
> 
> 标签：knockout.js

如何从 KnockoutJS foreach 中的函数绑定数据？

例如，我有以下代码：

```
 <div data-bind="foreach: timeEntries">
     <a href="#page1" data-icon="refresh" data-theme="c">
         <span data-bind="text: getActivityName(ActivityId)"></span>
     </a> 
```

我想调用模型上下文中存在的函数 getActivityName，并传递 ActivityId，它是 foreach 迭代的 timeEntry 上的一个属性。

只是绑定这个

```
data-bind="text: ActivityId" 
```

将正确显示每一行的活动 ID，但我需要进行查找并从字典中获取名称。我确实知道上面的代码很可能在当前项目而不是上下文上调用 getactivityname，那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T08:11:36.923

foreach 绑定创建一个新的绑定上下文（它允许您直接绑定到循环中项目的属性。如果您想从视图模型而不是循环引用属性，您可以使用 $root 或 $parent 绑定。

```
<span data-bind="text: $root.getActivityName(ActivityId)"></span> 
```

getActivityName 函数可以为您进行查找。

另一种选择是使在 foreach 中迭代的对象可观察，并创建一个计算的可观察对象来为您进行查找。

# java - 在 Maven 中，如何在运行时动态构建属性值？

> ID：12002033
> 
> 赞同：26
> 
> 时间：2012-08-17T08:05:37.617
> 
> 标签：java, maven, properties

在 maven 中，使用以下语法在 pom 中设置属性非常容易：

```
...
<properties>
  <myValue>4.06.17.6</myValue>
 </properties>
... 
```

现在我需要构建一个取决于我的 pom 版本的属性。为了创建属性，我想要执行以下操作（java 伪代码）：

```
String[] parts = version.split("\\.");
String.format("V%s_%s_%s_P%s", splitted[0],  splitted[1],splitted[2],splitted[3]);
// example: 4.06.17.6 => V_4_06_17_P6 
```

它应该是动态的，因为它在我们的存储库中用作标签名称，并且必须始终与工件的版本同步。

任何想法如何创建“动态”属性？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-17T08:29:15.440

Mojo 的 Build-Helper Maven 插件可以在这里为您提供帮助。

有许多目标可用于帮助转换属性。

有

*   [构建助手：正则表达式属性](http://www.mojohaus.org/build-helper-maven-plugin/regex-property-mojo.html)

*   [构建助手：解析版本](http://www.mojohaus.org/build-helper-maven-plugin/parse-version-mojo.html)

*   [构建助手：发布版本](http://www.mojohaus.org/build-helper-maven-plugin/released-version-mojo.html)

可能[regex-property](http://www.mojohaus.org/build-helper-maven-plugin/regex-property-mojo.html)是您想要的，但如果您的版本号符合“标准”，那么另外两个可能会拯救您。

要使用[regex-property](http://www.mojohaus.org/build-helper-maven-plugin/regex-property-mojo.html)目标，您可以执行类似的操作

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>build-helper-maven-plugin</artifactId>
        <version>1.7</version>
        <executions>
          <execution>
            <id>regex-property</id>
            <goals>
              <goal>regex-property</goal>
            </goals>
            <configuration>
              <name>tag.version</name>
              <value>${project.version}</value>
              <regex>^([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)\.(-SNAPSHOT)?$</regex>
              <replacement>V$1_$2_$3_P$4</replacement>
              <failIfNoMatch>true</failIfNoMatch>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
  ...
</project> 
```

注意：我的正则表达式可能略有偏差，因此您应该测试上述内容。

注意：属性值仅可用于在此执行绑定到的阶段之后的执行。它绑定的默认阶段是，`validate`但如果您处于不同的生命周期（例如站点生命周期），则该值将不可用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T08:27:53.393

您可以使用 maven build-helper 插件，尤其是它的[regex-property mojo](http://mojo.codehaus.org/build-helper-maven-plugin/regex-property-mojo.html)。查看[使用示例](http://mojo.codehaus.org/build-helper-maven-plugin/usage.html)（滚动到**通过将正则表达式替换应用于值**部分来设置属性）。

基本上，您希望在您的 pom 中使用类似的东西来获取从以下位置`myVersionTag`推断的属性`myValue`：

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>build-helper-maven-plugin</artifactId>
        <version>1.7</version>
        <executions>
          <execution>
            <id>regex-property</id>
            <goals>
              <goal>regex-property</goal>
            </goals>
            <configuration>
              <name>myVersionTag</name>
              <value>$\{myValue}</value>
              <regex>(\d+)\.(\d+)\.(\d+)\.(\d+)</regex>
              <replacement>V_$1_$2_$3_P$4</replacement>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
  ...
</project> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-16T23:09:51.003

Ihor Kaharlichenko 的回答基本上是正确的，只是它从[Codehaus 文档](http://www.mojohaus.org/build-helper-maven-plugin/usage.html)中复制了一个错误。'$' 和'{' 之间不应有'\'。 **mojo 没有它就可以工作，也不能与它一起工作。** 确实，对正则表达式和 Maven 有基本的了解，我看不出反斜杠应该做什么，而且确实是错误的。

斯蒂芬康诺利的回答正确地省略了反斜杠。当心。
这个错误在整个 SO 中激增，而且 Codehaus 的停业可能永远不会得到解决。

# c# - Win RT SQLite 事务插入

> ID：12002034
> 
> 赞同：1
> 
> 时间：2012-08-17T08:05:41.603
> 
> 标签：c#, sqlite, windows-runtime

我正在开发一个 Win 8 RT 应用程序，该应用程序必须将一些数据从 Web 服务合并到本地 SQLite 数据库，并且我已经实现了这种方法来仅在事务中更新数据库。

```
int result;

                await MyDatabaseManager.Connection.RunInTransactionAsync(async (connection) =>
                {
                    foreach (Hotel _hotel in listUpdates)
                    {
                        result = await connection.UpdateAsync(_hotel);

                        if (result == 0)
                        {
                            await MyDatabaseManager.Connection.InsertAsync(_hotel);
                        }
                    }

                }); 
```

但是，我不知道为什么，当`await connection.UpdateAsync(_hotel);`被调用时，它会破坏 for bucle，并退出函数而不抛出任何异常或返回任何错误。

如果我评论 RunInTransactionAsync 行，一切正常。

任何想法？？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T11:12:19.057

[您正在使用](https://github.com/praeclarum/sqlite-net/blob/master/src/SQLiteAsync.cs)的库没有最好的`async`支持（请参阅[我是否应该为同步方法公开异步包装器以](http://blogs.msdn.com/b/pfxteam/archive/2012/03/24/10287244.aspx)描述该方法存在缺陷的原因）。

您需要使用`RunInTransactionAsync(Action<SQLiteConnection>)`重载而不是`RunInTransactionAsync (Action<SQLiteAsyncConnection>)`. 应该这样做（在升级到最新版本的 sqlite-net 之后）：

```
await MyDatabaseManager.Connection.RunInTransactionAsync((SQLiteConnection connection) =>
{
  foreach (Hotel _hotel in listUpdates)
  {
    result = connection.Update(_hotel);

    if (result == 0)
    {
      connection.Insert(_hotel);
    }
  }
}); 
```

# character-encoding - iTextRendered - PDF 中的俄语字符

> ID：12002038
> 
> 赞同：0
> 
> 时间：2012-08-17T08:06:06.080
> 
> 标签：character-encoding, itext, cyrillic

我正在使用 iText2.0.8 生成 PDF 文件。

简而言之，代码如下所示：

```
FileOutputStream fOut = new FileOutputStream(fileFullPath);
ITextRenderer renderer = new ITextRenderer();
renderer.setDocumentFromString(str); //str is HTML fetched from a velocity template
renderer.layout();
renderer.createPDF(fOut);
fOut.close(); 
```

这工作正常。但是，当我有俄语字符时，它们只会在 PDF 中显示为“空白”。我尝试将获取的 HTML 字符串转换为 UTF-8，但随后俄罗斯字符开始出现乱码。

有谁知道解决这个问题的方法？

# php - php - 将图像存储在服务器上的最佳方式

> ID：12002039
> 
> 赞同：3
> 
> 时间：2012-08-17T08:06:05.770
> 
> 标签：php, image

我有一个使用 6 个不同参数生成图像的网络服务。该过程持续 1 秒。我使用函数 ImageCreateFromPNG、ImageCopy 和 ImageJPEG 现在我想加快速度。这个想法是保存已经在服务器上生成的图像，如果它们已经存在，则通过使用带有 6 个参数的名称来使用它们。我的问题是：有没有比将 jpg 文件保存在服务器目录中更好的方法来存储图像？（因为有 6^6（恕我直言 6 的 6 次方）组合可能性）

再见乔吉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T08:08:00.520

将图像以老式文件形式存储在服务器上。

将图像存储在数据库中效率不高，并且最终可能会带来比其价值更多的痛苦。将图像存储在一个文件夹中（甚至可能是他们自己的小文件夹）并按照正常方式链接到它们。这将允许用户轻松缓存图像，并且对您的服务器的影响最小。

从文件结构中提供文件所需的资源比查询数据库、提取信息、告诉用户该数据是*什么*以及每秒/分钟/小时/天执行多次所需的资源要少得多。

现在，另一方面，如果这些是*大*图像并且占用大量空间，您可能会考虑动态生成它们，直到您可以提供更多驱动器空间，但如果可以的话，我建议您使用第一个选项。

最后（可能是最重要的——跳出框框思考），我不知道这些图像是什么样的，但您也可以考虑其他创建它们的方法。例如，它们可以平铺吗？与其存储数百张图像，您可以从 10 个片段中制作数百张图像吗？您甚至可以将它们原样发送给客户，而无需将它们连接起来，只需将它们排列在页面上，使它们看起来就像是一个图像 - 但这只是在吐槽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:14:14.747

我并不是要插入，但有一种有益的存储 atm 类型，GridFS。

它基本上是一种将数据放入 MongoDB 的方法（我相信其他数据库有自己的存储机制）。

主要缺点是速度，但主要优点是在您的网络（和全球）上分片和分发图像非常容易。您甚至可以暂时将它们 ping 到 CDN 以使它们更快。

但是我应该说这适用于更大的网站。您的网站听起来像是一个普通的个人博客类型项目，所以我想说只是将图像存储在服务器上的目录中。

然而，同样，即使一直从目录中提供服务也会变得很痛苦，因此您可以设置某些缓存机制，例如永远不会使图像上的标头过期，以确保浏览器尽可能长时间地缓存它们。还要将它们缓存在您的网络服务器（如 Apache）中，因为我怀疑您是否会一直直接从您存储它们的目录中提供它们，并且在极少数情况下，您会想阻止恶意的人将他们肮脏的手指放在您的照片上因此，作为预防措施（与服务器端配置一起），您可能会从服务器端语言或其他语言中提供未缓存的图像。

使用任何 GD 工具都会造成极大的负载和 CPU 负担，因此您想尽量少做，因为在这种情况下，几兆的文件存储比新实例更便宜，因为您的 CPU 受超大图像的限制。

Google 上有更多建议和其他建议。例如来自谷歌的直接点击：http: [//developer.yahoo.com/performance/rules.html/](http://developer.yahoo.com/performance/rules.html/)

# c - 如何禁用C中的关闭按钮？

> ID：12002041
> 
> 赞同：4
> 
> 时间：2012-08-17T08:06:13.193
> 
> 标签：c, windows, console-application, exe, application-close

有谁知道如何使用`.exe`从 C 程序创建的可执行文件禁用 Windows 控制台窗口上的关闭按钮？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T08:13:11.163

从[这里开始：](http://programming-technique.blogspot.co.uk/2011/09/how-to-disable-close-button-of-console.html)

```
#define _WIN32_WINNT 0x0500
#include <stdio.h>
#include <windows.h>

int main(int argc, _TCHAR* argv[]){
  HWND h;   
  HMENU sm;
  int i, j, c; 
  LPTSTR buf;  
  // get the handle to the console
  h = GetConsoleWindow(); 
  // get handle to the System Menu
  sm = GetSystemMenu(h, 0);  
  // how many items are there?  
  c = GetMenuItemCount(sm);   
  j = -1;  
  buf = (TCHAR*) malloc (256 *sizeof(TCHAR));  
  for (i=0; i<c; i++) {
    // find the one we want   
    GetMenuString(sm, i, buf, 255, MF_BYPOSITION);   
    if (!strcmp(buf, "&Close")) {        
      j = i;        
      break;      
    }
  }
  // if found, remove that menu item  
  if (j >= 0)
    RemoveMenu(sm, j, MF_BYPOSITION); 
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:12:20.510

如果你想禁用正在运行的程序中的按钮，有一些方法可以做到这一点。

原理是找到窗口，然后找到窗口里面的按钮，然后给按钮发送WM_DISABLE消息。

# php - 检查用户是否在局域网上

> ID：12002043
> 
> 赞同：0
> 
> 时间：2012-08-17T08:06:21.987
> 
> 标签：php, drupal, lan

我正在制作一个将在博物馆中使用的 drupal 网站。他们想向用户发送带有可打印页面的邮件。如果用户当前在博物馆，他们也想将邮件发送到接待处，这样页面就可以在博物馆中打印。

我假设检查此人是否在博物馆中的最佳方法是确定用户是否在 LAN 上。有没有办法在 php 和/或 drupal 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:10:40.297

我有一个类似的项目。

我所做的是检查用户的 IP 地址是否与 LAN 的外部 IP 地址相同。如果是，它会做这件事。

您使用获取 IP 地址

```
$_SERVER['REMOTE_ADDR']; 
```

然后，将此值放在 if-else 下。

简单的？

# android - 谷歌地图删除后仍然显示标记

> ID：12002047
> 
> 赞同：0
> 
> 时间：2012-08-17T08:06:46.657
> 
> 标签：android, google-maps, itemizedoverlay

我一直在编写一些应用程序，并且一直在从地图中删除一个项目，这是我代码中的一个相关片段：

```
protected boolean onTap(final int index) {
    tapped=true;
    AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
    dialog.setTitle("Remove Item");
    dialog.setMessage("Are you sure you want to Remove this Item?");
    dialog.setNegativeButton("No", null);
    dialog.setPositiveButton("Yes", new OnClickListener() {
        @SuppressWarnings("unchecked")
        @Override
        public void onClick(DialogInterface arg0, int arg1) {
            mOverlays.remove(index);
            ItemOverlay.this.populate();
            ItemOverlay.this.setLastFocusedIndex(-1);
            ItemOverlay.this.setFocus(null);
        }
    });
    dialog.show();
    return true;
} 
```

如您所见，我删除了被点击的项目，并确保没有焦点，但删除的项目仍然被绘制，直到用户点击屏幕的另一个点，或滚动地图。

我还应该尝试什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T08:35:21.507

你应该记得更新地图视图：

```
mapview.invalidate(); 
```

# design-patterns - 使用 DTO 作为数据契约

> ID：12002049
> 
> 赞同：1
> 
> 时间：2012-08-17T08:06:49.090
> 
> 标签：design-patterns, architecture, entity, dto, datacontract

我只是在想，与其为我们的服务层使用一组单独的数据协定程序集，不如将 DTO 程序集用作数据协定，对 [Data contract] 和 [KnownType] 等属性进行必要的更改。换句话说，当我们将 DTO 用作数据合同时，我们有哪些困难/缺点（当然需要对 DTO 进行必要的修改）。如果您能就此提供您的观点，将会很有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:13:04.100

我认为从您的服务层公开 DTO 是对 DTO 的明智使用。

缺点？由于您已经拥有域模型，因此您正在增加复杂性。

使用像[AutoMapper](http://automapper.org/)或[ValueInjector](http://valueinjecter.codeplex.com/)这样的映射框架可以减少这个问题。

# python - 如何在 ipad 上使用 python？

> ID：12002051
> 
> 赞同：16
> 
> 时间：2012-08-17T08:06:56.370
> 
> 标签：python, ipad

最近，我发现 ipad 可以使用特殊的 python 解释运行 python。但在 ipad 上编辑代码是一场可怕的噩梦。那么如何将在PC上完全编辑好的python代码推送到ipad中运行呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-17T08:15:19.387

您可能对[https://www.pythonanywhere.com](https://www.pythonanywhere.com)项目感兴趣。

我也在ipad上使用它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-22T22:11:34.570

如果您使用 Python for IOS，以下应该可以工作，尽管我自己还没有尝试过。

将程序以文本形式通过电子邮件发送到您自己的电子邮件帐户。然后在 iPad 上的多个电子邮件应用程序中的任何一个中阅读电子邮件。将电子邮件消息中的文本剪切并粘贴到 python 编辑器中。

不要将代码剪切并粘贴到解释器中。那你就不能保存了，至少在当前版本的Python for IOS里是不能保存的。相反，点击底部的第二个图标（我认为是那个图标，我的 iPad 在家，我现在不在家），打开编辑器。您可以使用右上角的菜单按钮从编辑器中保存文件；有一个“保存”菜单项，允许将代码保存到 iPad 上的文件中。

我今晚要试试这个。很抱歉在尝试之前发布了这个，但我不确定我稍后会回到这个问题。它“应该”工作。（著名遗言！）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-17T08:12:02.167

如果您只是在运行命令行 Python，那么您可以对其进行编辑和/或将其上传到服务器，然后从 iPad ssh 终端客户端运行它。我知道这与将其推送到 iPad 上不同，它需要服务器和互联网连接，但这是最简单的方法。

否则，请在您的应用程序中包含 Python 解释器和打印其输出的 UITextView。在您的 PC（或 Mac，我猜）上编辑代码，作为 Xcode 项目中的文件，让解释器运行该代码并在 UITextView 中显示输出。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-27T03:44:49.160

## Pythonista for Ipad：将来自网络的脚本保存在 Ipad 中

Pythonista 是 ipad 上一个很棒的 Python 应用程序。如果您使用蓝牙键盘，它也可以更容易数字（我使用罗技键盘，它很棒）。将其保存到您的 github 存储库（或任何其他站点）。进入 pythonista 并运行这个脚本（python 3）：

```
from urllib.request import urlopen
import os

file = "test_es1.py"
url = urlopen("https://formazione.github.io/" + file)
content = url.read()
p = ""
with open(file, "w") as new_file:
    content = content.decode("utf-8")
    print(content)
    new_file.write(content)
os.startfile(file) 
```

现在，您已将文件从您的站点保存到 pythonista，您可以从应用程序中打开它并运行它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-27T09:04:37.193

我将 Python 2.7 用于 IOS，并通过 iFunBox 将源 python 文件下载到 /var/mobile/Applications/Python 2.7 用于 IOS/Documents/User Scripts。尽管如此，我还是不推荐这个应用程序，因为它在编辑代码时非常有问题并且非常慢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-16T03:35:28.087

使用 Codenvy.com 上的 eclipse Che 编辑器

[Codenvy Websife](https://codenvy.com/)

它是一个基于浏览器的 IDE，可以在任何具有 Web 浏览器的设备上使用。

# linux - 创建 Linux TFS 工作区 - 参数错误

> ID：12002052
> 
> 赞同：2
> 
> 时间：2012-08-17T08:07:06.800
> 
> 标签：linux, tfs

我正在尝试`TFS`在我的`CentOS`虚拟机中创建一个新工作区，以便随后`TFS`与`Jenkins`. 但是，尽管关注[了这篇](http://msdn.microsoft.com/en-us/library/y901w7se.aspx)Microsoft 帖子，但它一直在告诉我`An argument error occurred: Only one name may be supplied when editing a workspace`。

```
[me@centos ~]$ tf 工作区 /new /collection:http://10.9.8.7:8081/tfs/Col /permission:Public tfs /login:dev\onlyme,Password1
发生参数错误：编辑工作区时只能提供一个名称。
[我@centos ~]$
[me@centos ~]$ tf 工作区/新集合：http://10.9.8.7:8081/tfs/Col tfs
发生参数错误：编辑工作区时只能提供一个名称。
[我@centos ~]$

```

使用上面链接中的语法，我看不出哪里出错了（请记住，我已经尝试了上面命令的所有变体）。即使我在上面的命令 2 中使用示例（期待身份验证错误或其他问题），它也会告诉我同样的事情。

此外，这是一个全新的 VM，因此我不确定为什么错误消息指出该命令正在*编辑*工作区。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T08:37:09.000

我认为您的问题是您使用斜杠“/”而不是破折号“-”作为选项。Unix tf 应用程序符合选项的 unix 语法。

# c# - 这个查询的返回类型应该是什么？

> ID：12002056
> 
> 赞同：0
> 
> 时间：2012-08-17T08:07:23.597
> 
> 标签：c#, lambda

我有一个`lambda expression`可以从我的表中获取多条记录。

这是表达式

```
public sys_Log_Deposits_Interest_Master GetDepositsPendingRecord(string glCode, int fromDateID)
        {
            using (var db = new DataClasses1DataContext())
            {
               var deposit = db.sys_Log_Deposits_Interest_Masters.Where(deposits => deposits.cGLCode.Equals(glCode) && deposits.nFromDateID.Equals(fromDateID));
               return deposit; 
            }
        } 
```

我收到一个错误`Cannot implicitly convert type IQueryable To Table Object`。

我想将表对象返回给我`Update method`，这将更新结果的一些文件。

这是我的更新方法

```
public void UpdatePendingRecords(string glCode, int fromDateID)
        {
            using (var db = new DataClasses1DataContext())
            {

                var deposit = GetDepositsPendingRecord(glCode, fromDateID);

                foreach (var pending in deposit)
                {
                    pending.cAuthorizedStatus = "Authorized";
                    pending.dAuthorizedOn = DateTime.Now;
                    pending.cAuthorizedBy = HttpContext.Current.User.Identity.Name;

                }
}
} 
```

目前我无法让它工作。

谁能帮我解决这个问题？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:11:44.850

这是一张桌子的`IQueryable<T>`任何`T`类型。`sys_Log_Deposits_Interest_Masters`例如`IQueryable<Log_Deposits_Interest_Master>`等。

请注意，作为`sys_Log_Deposits_Interest_Masters`的实例的表类也实现了该接口。结果是一个不同的实现，它有信息知道它应该从那里获取结果，并在`Where`.

您还在错误的位置处理上下文，因为在枚举值时它不会存在。

在这种情况下，由于您将直接处理结果而不是对查询应用任何进一步的更改，我将在方法中`foreach`遍历结果和`yield`它们，因此它变成了一个枚举块，并且生命周期的处理方式不同. 否则，我要么通过将数据上下文传递给该方法而不是在那里创建它来确保数据上下文的存活时间更长，要么在紧要关头我不会处理它（但只是在紧要关头，而 linq2sql 人说不处理 datacontexts 是安全的，它违反了良好的做法——你真的应该假设这样做是不安全的——而且，它只是在大多数时候是安全的；你想知道它什么时候是安全的吗？我也不想。编辑：今天碰巧带来了一个不安全的例子[https://stackoverflow.com/a/12002914/400547](https://stackoverflow.com/a/12002914/400547)）。

编辑示例：

最佳方法：

```
public IQueryable<Log_Deposits_Interest_Master> GetDepositsPendingRecord(DataClasses1DataContext db, string glCode, int fromDateID)
{
  return db.sys_Log_Deposits_Interest_Masters.Where(deposits => deposits.cGLCode.Equals(glCode) && deposits.nFromDateID.Equals(fromDateID));
}

public void UpdatePendingRecords(string glCode, int fromDateID)
{
  using (var db = new DataClasses1DataContext())
  {

    var deposit = GetDepositsPendingRecord(db, glCode, fromDateID);

    foreach (var pending in deposit)
    {
      pending.cAuthorizedStatus = "Authorized";
      pending.dAuthorizedOn = DateTime.Now;
      pending.cAuthorizedBy = HttpContext.Current.User.Identity.Name;

    }

    //presumably you want to call db.SubmitChanges() here, no?
  }
} 
```

如果您*真的*必须在调用的方法中包含数据上下文创建，您可以这样做

```
public IEnumerable<Log_Deposits_Interest_Master> GetDepositsPendingRecord(string glCode, int fromDateID)
{
  using(var db = new DataClasses1DataContext())
    foreach(Log_Deposits_Interest_Master item in db.sys_Log_Deposits_Interest_Masters.Where(deposits => deposits.cGLCode.Equals(glCode) && deposits.nFromDateID.Equals(fromDateID))
      yield return item;
} 
```

但是，如果您想将所做的更改保存回数据库，这并不是很有用，因为您必须调用`SubmitChanges()`与它们相同的上下文或重新绑定它们。这也意味着如果您要添加另一个`Where()`，或使用`Count()`或任何其他可以传递给数据库的东西，它不会是，因为我们已经破坏了可查询的能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T08:15:23.273

从我看到的 db.sys_Log_Deposits_Interest_Masters 代表 sys_Log_Deposits_Interest_Master 对象的集合。您的 Where 查询还返回无法转换为单个对象的对象集合 (IQueriable)。如果您确定您的 Where 查询返回一个且仅一个条目，您可以将其替换为 Single 或 SingleOrDefault 语句，其中具有相同的条件。如果它可以返回多个对象，但只需要第一个，则可以使用 First 或 FirstOrDefault，条件相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:15:26.087

添加 .ToList() 扩展，然后像这样：

```
var deposit = db.sys_Log_Deposits_Interest_Masters.Where(deposits => deposits.cGLCode.Equals(glCode) && deposits.nFromDateID.Equals(fromDateID)).ToList(); 
```

# iphone - 如何将 cpp 导入到 Objective-C

> ID：12002058
> 
> 赞同：0
> 
> 时间：2012-08-17T08:07:32.703
> 
> 标签：iphone, c++, objective-c, namespaces

我在我的项目中创建了一个 .h 和一个 .cpp 文件。

```
//  TestClass.h

namespace testNamepace {

  class TestClass {
      int num;
  };
} 
```

当我将 TestClass.h 导入到 ViewController.h 并编译项目时，它说 Unknown type name 'namespace'。

```
//  ViewController.h

#import <UIKit/UIKit.h>
#import "TestClass.h"
using namespace testNamepace;

@interface ViewController : UIViewController

@end 
```

我已经将 ViewController.m 的扩展名更改为 .mm

我应该怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:46:34.600

您的 .h 文件被识别为 C 或 Obj-C，这可能是您出错的原因。

Xcode 维护每个文件的索引以了解它们必须如何编译。您可以在检查器中更改它（我不记得了，也没有 Xcode 了）。

另一个可行的解决方案是使用 extern "C++" 声明来包装你的头代码。

例如：

```
extern "C++" {
namespace test {

class MyClass;    

}
} 
```

# php - PHP Header Redirect 是否强制浏览器重新加载图像而不使用缓存的图像

> ID：12002060
> 
> 赞同：0
> 
> 时间：2012-08-17T08:07:39.437
> 
> 标签：php, caching, redirect

当我们使用以下代码将用户重定向到页面时

header("位置：www.somewebsite.com");

然后从服务器重新加载图像（如徽标、子弹等）并不使用缓存在计算机上的图像。

是这样吗？如果是，如何告诉浏览器只使用缓存的图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:11:00.300

标头与此无关，图像有自己的带有缓存过期的标头，您需要直接通过 Web 服务器或通过某些脚本将缓存标头添加到这些图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:12:31.330

不，标头功能对缓存没有影响...但是您的页面上是否有类似的东西：

```
header("Cache-Control: no-cache, must-revalidate");
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); 
```

因为这样的事情会停用您的缓存......缓存在客户端（浏览器）上，这与您的重定向无关。

# qt4 - 从 QAbstractScrollArea 派生的类中的 QT QPainter 错误

> ID：12002064
> 
> 赞同：0
> 
> 时间：2012-08-17T08:07:50.453
> 
> 标签：qt4

我尝试编写一个小的十六进制编辑器。为此，我想创建一个显示十六进制数据并按行滚动的小部件。为此，我开始通过从 QAbstractScrollArea 派生并覆盖 paintEvent() 来进行实验，如下所示：

```
void CuteHexeEditorWidget::paintEvent(QPaintEvent *event)
{
    QPainter painter(this);
    QPoint position(50,50);
    QString text("00 11 22");
    painter.drawText(position, text);
} 
```

代码被调用，但在控制台中我看到以下消息： QPainter::begin: Paint device returned engine == 0\. 我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T16:27:38.560

必须在视口上创建 QPainter：

```
QPainter painter(viewport()); 
```

# ruby-on-rails - 不在映射中的字段包含在 ElasticSearch 返回的搜索结果中

> ID：12002069
> 
> 赞同：2
> 
> 时间：2012-08-17T08:08:19.650
> 
> 标签：ruby-on-rails, mapping, attachment, elasticsearch, tire

我想使用 Tire gem 作为 ElasticSearch 的客户端来索引 pdf 附件。在我的映射中，我从 _source 中排除了附件字段，这样附件就不会存储在索引中，也**不会在搜索结果中返回**：

```
mapping :_source => { :excludes => ['attachment_original'] } do
  indexes :id, :type => 'integer'
  indexes :folder_id, :type => 'integer'
  indexes :attachment_file_name
  indexes :attachment_updated_at, :type => 'date'
  indexes :attachment_original, :type => 'attachment'
end 
```

当我运行以下 curl 命令时，我仍然可以看到搜索结果中包含的附件​​内容：

```
curl -X POST "http://localhost:9200/user_files/user_file/_search?pretty=true" -d '{
  "query": {
    "query_string": {
      "query": "rspec"
    }
  }
}' 
```

我在这个[帖子](https://stackoverflow.com/questions/11873248/how-to-prevent-attachments-from-being-stored-in-source-with-elasticsearch-and-t/11991205#comment16005481_11991205)中发布了我的问题：

但是我刚刚注意到，不仅附件包含在搜索结果中，而且所有其他字段，包括未映射的字段，也包括在内，如您在此处看到的：

```
{
  "took": 20,
  "timed_out": false,
  "_shards": {
    "total": 5,
    "successful": 5,
    "failed": 0
  },
  "hits": {
    "total": 1,
    "max_score": 0.025427073,
    "hits": [
      {
        "_index": "user_files",
        "_type": "user_file",
        "_id": "5",
        "_score": 0.025427073,
        "_source": {
          "user_file": {
            "id": 5,
            "folder_id": 1,
            "updated_at": "2012-08-16T11:32:41Z",
            "attachment_file_size": 179895,
            "attachment_updated_at": "2012-08-16T11:32:41Z",
            "attachment_file_name": "hw4.pdf",
            "attachment_content_type": "application/pdf",
            "created_at": "2012-08-16T11:32:41Z",
            "attachment_original": "JVBERi0xLjQKJeLjz9MKNyA"
          }
        }
      }
    ]
  }
} 
```

`attachment_file_size`并且`attachment_content_type`未在映射中定义，但在搜索结果中返回：

```
{
  "id": 5,
  "folder_id": 1,
  "updated_at": "2012-08-16T11:32:41Z",
  "attachment_file_size": 179895, <---------------------
  "attachment_updated_at": "2012-08-16T11:32:41Z",
  "attachment_file_name": "hw4.pdf", <------------------
  "attachment_content_type": "application/pdf",
  "created_at": "2012-08-16T11:32:41Z",
  "attachment_original": "JVBERi0xLjQKJeLjz9MKNyA"
} 
```

这是我的完整实现：

```
 include Tire::Model::Search
  include Tire::Model::Callbacks

  def self.search(folder, params)
    tire.search() do
      query { string params[:query], default_operator: "AND"} if params[:query].present?
      #filter :term, folder_id: folder.id
      #highlight :attachment_original, :options => {:tag => "<em>"}
      raise to_curl
    end
  end

  mapping :_source => { :excludes => ['attachment_original'] } do
    indexes :id, :type => 'integer'
    indexes :folder_id, :type => 'integer'
    indexes :attachment_file_name
    indexes :attachment_updated_at, :type => 'date'
    indexes :attachment_original, :type => 'attachment'
  end

  def to_indexed_json
     to_json(:methods => [:attachment_original])
   end

  def attachment_original
    if attachment_file_name.present?
      path_to_original = attachment.path
      Base64.encode64(open(path_to_original) { |f| f.read })
    end    
  end 
```

有人可以帮我弄清楚为什么所有字段都包含在`_source`?

**编辑：**这是运行的输出`localhost:9200/user_files/_mapping`

```
{
  "user_files": {
    "user_file": {
      "_source": {
        "excludes": [
          "attachment_original"
        ]
      },
      "properties": {
        "attachment_content_type": {
          "type": "string"
        },
        "attachment_file_name": {
          "type": "string"
        },
        "attachment_file_size": {
          "type": "long"
        },
        "attachment_original": {
          "type": "attachment",
          "path": "full",
          "fields": {
            "attachment_original": {
              "type": "string"
            },
            "author": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "name": {
              "type": "string"
            },
            "date": {
              "type": "date",
              "format": "dateOptionalTime"
            },
            "keywords": {
              "type": "string"
            },
            "content_type": {
              "type": "string"
            }
          }
        },
        "attachment_updated_at": {
          "type": "date",
          "format": "dateOptionalTime"
        },
        "created_at": {
          "type": "date",
          "format": "dateOptionalTime"
        },
        "folder_id": {
          "type": "integer"
        },
        "id": {
          "type": "integer"
        },
        "updated_at": {
          "type": "date",
          "format": "dateOptionalTime"
        }
      }
    }
  }
} 
```

如您所见，由于某种原因，所有字段都包含在映射中！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T16:30:22.933

在您的`to_indexed_json`中，您包含该`attachment_original`方法，因此它被发送到 elasticsearch。这也是为什么您的所有其他属性都包含在映射中并因此包含在源中的原因。

有关该主题的更多信息，请参阅[ElasticSearch & Tire：使用映射和 to_indexed_json](https://stackoverflow.com/questions/11672072/elasticsearch-tire-using-mapping-and-to-indexed-json)问题。

看来，Tire 确实将正确的映射 JSON 发送到 elasticsearch ——我的建议是使用它`Tire.configure { logger STDERR, level: "debug" }`来检查正在发生的事情，并使用 trz 来查明原始级别的问题。

# scala - Scala Swing：组件上缺少 JComponent 方法

> ID：12002070
> 
> 赞同：5
> 
> 时间：2012-08-17T08:08:20.190
> 
> 标签：scala, scala-swing

我想使用 setComponentPopupMenu()。但是 Scala.Swing.Component 似乎没有所有 JComponent 方法，尽管在文档中引用了 javax.swing.JComponent 。所以我有点困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T08:50:12.800

ScalaSwing api 相当不完整，但它让您可以访问底层的 swing 对象，使用`peer`. 所以你可以做

```
 yourScalaSwingComponent.peer.setComponentPopupMenu(...) 
```

那么你又回到了java（swing）领域。

# c# - Array.ConstrainedCopy() 不仅仅是备份和复制操作吗？

> ID：12002071
> 
> 赞同：2
> 
> 时间：2012-08-17T08:08:20.520
> 
> 标签：c#, .net, arrays

我一直在研究`Array.ConstrainedCopy`，但在 CLR 内部，我无法弄清楚为什么它的实现如此隐秘。

### `ConstrainedCopy`除了以下内容之外，还做其他事情吗？

```
[ReliabilityContract(Consistency.WillNotCorruptState, CER.Success)]
static void ConstrainedCopy(Array src, int iSrc, Array dest, int iDest, int len)
{
    Array backup = Array.CreateInstance(dest.GetType().GetElementType(), len);
    Array.Copy(dest, iDest, backup, 0, len);
    try { Array.Copy(src, iSrc, dest, iDest, len); }
    catch { Array.Copy(backup, 0, dest, iDest, len); throw; }
} 
```

如果是这样，它还有什么作用？
如果不是，那么为什么 CLR 对实现进行如此特殊的处理，而不是在纯 C#/.NET 代码中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T09:04:32.327

Yes, `Array.ConstrainedCopy` is different from your sample implementation. `Array.ConstrainedCopy` checks beforehand whether there is *any* chance the copy might throw an exception, and if so, refuses to copy at all. For example, copying from an `int[]` to an `object[]` involves boxing the `int`s, which might throw an `OutOfMemoryException`, so `Array.ConstrainedCopy` doesn't even attempt to copy.

```
object[] dst = { 1, 2 };
int[] src = { 3, 4 };
Array.ConstrainedCopy(src, 0, dst, 0, 2); 
```

> **ArrayTypeMismatchException occurred**
> 
> Array.ConstrainedCopy will only work on array types that are provably compatible, without any form of boxing, unboxing, widening, or casting of each array element. Change the array types (i.e., copy a Derived[] to a Base[]), or use a mitigation strategy in the CER for Array.Copy's less powerful reliability contract, such as cloning the array or throwing away the potentially corrupt destination array.

# ios - Apple 会批准内部使用 Google 开发的库的应用程序吗？

> ID：12002077
> 
> 赞同：1
> 
> 时间：2012-08-17T08:09:05.607
> 
> 标签：ios, iphone

我正在使用`GDataXML`Google 开发的库作为其 Objective-C 客户端库的一部分。作为其谷歌的 XML 处理库，我听说苹果不允许在应用程序中使用任何第三方库，他们会允许这个吗？（我使用这个库是因为许多 iOS 极客建议使用它。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T08:13:15.657

我们可以使用任何不执行私有 api 调用的第三方库。iOS 开发中使用了许多第三方库。如果不调用私有 API，Apple 将批准它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T08:16:27.833

Apple 为开发人员在向应用商店提交应用程序时提供了审查指南。请[在此处](https://developer.apple.com/appstore/resources/approval/guidelines.html)查看指南。

**2.5 使用非公开 API 的应用将被拒绝**

GDataXML 是公共 api 所以应该没问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:12:49.823

您在哪里听说不能使用第三方库？一直有很多人使用第三方库。许多应用程序都这样做。[以 AFNetworking 库https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)为例，这是一个非常常见的第​​三方网络连接库。

# fonts - 更改 zen 购物车模板中的字体

> ID：12002078
> 
> 赞同：1
> 
> 时间：2012-08-17T08:09:12.870
> 
> 标签：fonts, zen-cart

我已经使用默认主题启动了一个 zen cart 自定义主题。现在我在我的[测试链接中托管了该站点](http://sh1.nettantra.com/u/cmFuaml0/nt/ecommerce/zencart/dvdshop/)

在该站点中，我使用默认主题来创建自定义主题。但我根据要求更改了主题。现在的问题是网站中使用的字体不起作用。我使用字体创建者网站创建字体，然后将其放入我的模板中

字体目录的路径

`~Rootdirectory/includes/templates/dvd_shop/fonts/`

并使用css文件中的字体

`~Rootdirectory/includes/templates/dvd_shop/css/stylesheet.css`

但是现在我在萤火虫中收到了禁止的消息。所以我不知道在哪里使用自定义模板中的字体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:16:54.133

正如我在评论中所说，我遇到了类似的问题并设法解决了它，您需要编辑包含文件夹中的 .htaccess 文件并设置正确的权限 - 在这里查看我的问题和答案：[@fontface - 403-forbidden error在禅车](https://stackoverflow.com/questions/12056008/fontface-403-forbidden-error/12059850#12059850)

# forms - form onsubmit 提交其他表单

> ID：12002083
> 
> 赞同：0
> 
> 时间：2012-08-17T08:09:27.533
> 
> 标签：forms, onsubmit

提交form1时如何自动提交form2？

```
if( $_POST['submit'] == 'Submit')
{ im going to put my form2 here then automatically submit.
what code do i need?}

<form name=form1 action=# method=post>
<input type=submt name=submit value=Submit />
</form> 
```

注意我的 form2 有不同的操作，这就是为什么我不能将我的 form2 的内容包含到我的 form1 中

也可以是，当我点击某些东西时，这两个表单将被提交。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:17:51.847

就像简单的功能一样（如果我的问题是正确的:-S）

```
function submitForm()
{
  document.form2.submit();
} 
```

从提交中调用此函数

```
<input type="submit" onclick="submitForm();"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T08:17:53.293

[将每个表单的 onsubmit 事件链接](http://api.jquery.com/submit/)到一个新函数“launchMyForms”。在这些功能中手动启动您的表单：

```
$('#myform1').submit();
$('#myform2').submit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:18:49.763

JQuery 具有序列化和提交表单的 Ajax 函数

# python - 使用滤锅进行 xml 反序列化

> ID：12002088
> 
> 赞同：6
> 
> 时间：2012-08-17T08:09:59.837
> 
> 标签：python, pylons, pyramid, colander

xml反序列化应该如何使用[滤锅？](http://docs.pylonsproject.org/projects/colander/en/latest/?awesome)文档说它甚至可以用于 xml 反序列化和验证，但我在文档或网络上没有找到任何好的例子！

如果有人使用滤锅进行 xml 反序列化，你可以在这里放一个片段来说明它的用法吗？这将非常有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T09:01:30.337

将其视为“从python*字典*`colander`中反序列化/验证”的工具。我猜，Python 中的 dict 可以由任何结构化数据格式形成。

 *在我的一个项目中，我验证 POST ( `webob.multidict`) 数据和 JSON 文件并使用相同的代码行：

```
recipe_schema = RecipeSchema()
try:
    appstruct = recipe_schema.deserialize(cstruct)
... 
```

`cstruct`始终是一个字典，如上所述 - 有时由处理`Multidict`制成，有时由`json.load(json_data)`.

因此，首先[将 XML 转换为 dict](https://stackoverflow.com/questions/2148119/how-to-convert-a-xml-string-to-a-dictionary-in-python)，然后使用`colander`.*

# operating-system - 基本启动条款

> ID：12002089
> 
> 赞同：3
> 
> 时间：2012-08-17T08:10:12.413
> 
> 标签：operating-system, boot

关于PC的启动，我在某些方面不是很清楚。

术语：引导块、引导扇区、MBR、引导加载程序与引导程序、bios 与 cmos 及其功能。

以及这些与当前的引导加载程序（如 grub）有何关系。

*我了解启动后*的启动顺序和高级软件内容，但我真的很好奇当有人按下电源按钮时这些芯片内部发生了什么。

维基百科似乎有点神秘，所以我想也许 stackoverflow 可以给我一些清晰的答案，或者至少将我指向一个我可以找到简单解释的位置。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T08:39:03.710

好的。

您需要了解的第一件事是 CPU 的工作原理。有一种称为指令指针 (IP) 寄存器的东西，它指向包含 CPU 要执行的下一条指令的地址。每次启动新程序时，该程序都会加载到内存中，然后将 CPU 的 IP 设置为程序的起始地址。但是当你的 CPU 关闭时你会怎么做。如何让 CPU 运行“引导”程序。

为此，有一个叫做“引导向量”的东西，即 CPU 一上电就会跳转到的地址。

但是，谁会在引导向量处加载程序。自然不能将程序预加载到 RAM 中。因为 RAM 需要电源（易失性）。所以他们有一个叫做“引导闪存”的东西，它是 EEPROM，因此是非易失性的。该闪存包含一个名为“BIOS”的程序，其职责是将系统从死亡中唤醒。其想法是它必须具有最低限度和必要的功能。该引导闪存被烧录并固定在系统上，以使该程序的启动指令恰好位于 CPU 的“引导向量”处。

现在，您需要 BIOS 执行的下一个任务是加载操作系统。但是您的硬盘上可能安装了多个操作系统。因此，您首先要加载一个可以进一步加载操作系统的程序。这个程序称为引导加载程序（grub 就是一个例子）

那你怎么做。每个磁盘上都有一个称为“引导扇区”的东西。一般是磁盘的第一个扇区。它的大小一般为 512MB 左右。足以存储一个小程序。您告诉 BIOS 使用哪个磁盘（主要、次要、CD、USB、网络）进行进一步引导。最常见且默认情况下，它使用主硬盘。所以引导加载程序去获取那个程序并跳转到它。引导加载程序知道如何从该点引导操作系统。例如，在 grub 中，您指定内核名称等。

主引导记录是另一个术语，它更像是一个 Windows 世界术语。Window 的引导加载程序假定某种“记录”关于安装在引导扇区上的操作系统的性质。它将该记录称为 MBR。

希望这对你现在有好处。

# python - shell 脚本中的 sed 、 awk 或 python

> ID：12002091
> 
> 赞同：0
> 
> 时间：2012-08-17T08:10:12.807
> 
> 标签：python

我有一个带有以下行的 shell 脚本，用于从文本文件中删除双引号 "。

```
sed 's/\"//g' old_file.txt > new_file.txt 
```

还有一个**awk**语句仅从 ^ 分隔的文本文件中选择特定列。

这两个语句都按预期工作。但是当输入文件的大小超过几 GB 时，服务器会挂起。我想知道**python**是否可以更有效地做同样的事情。

更新：

它没有停止服务器，但是当我运行 shell 脚本时，托管在同一台服务器上的 mysql 很慢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T08:27:04.313

Python 不可能更快地做到这一点。稍加工作，它就可以以 +/- 相同的效率做同样的事情。除非你试图做错；因为那样它会更慢。

sed 和 awk 都在线路模式下运行。它们是相当 I/O 优化的，我认为你无法改进。如果涉及到执行操作，Python 脚本可能会更快，但在这种情况下，它*不太可能*是相关的。

就像*@paxdiablo*建议的那样通过管道传输它们：

```
sed 's/"//g' old_file.txt | awk '...' > new_file.txt 
```

或者，如果列格式足够简单，您可以`awk`用更简单的替换，`cut`这样会更快：

```
sed 's/"//g' old_file.txt | cut -d' ' -f1-2,4 > new_file.txt 
```

（例如第 1、2 和 4 列，以空格分隔）

并且如果需要中间输出，可以同时放入`tee`管道中编写：

```
sed 's/"//g' old_file.txt | tee inter_file.txt | cut -d' ' -f1-2,4 > new_file.txt 
```

但它实际上可能效率较低，因为两者都`inter_file.txt`将`new_file.txt`同时编写。

* * *

好的，现在我想我明白问题所在了。您的问题不在于脚本不够*快，*因为它变得尽可能快。是您的硬盘驱动器达到了吞吐量限制，因此使用它的其他应用程序会延迟。你可以说它对你的硬盘来说太快了。

一种解决方案是尝试使用`ionice`给它较低的优先级。它可能会有所帮助，它可能根本没有任何区别。

```
ionice -c3 -p$$ 
```

为当前 shell 或脚本提供最低（空闲）I/O 优先级。同样，您可以使用以下命令以给定的优先级启动脚本：

```
ionice -c3 ./yourscript.sh 
```

结果可能因使用的 I/O 调度程序而异。有些调度程序会忽略这一点，有些可能实际上会使脚本变慢（每当 mysql 请求 I/O 时）。

或者，您可以使用一个额外的程序来限制 sed 的吞吐量，并有效地使其变慢，并为 mysql 提供一些可用空间来适应。但是，您需要衡量哪种吞吐量对您来说是最佳的。

最后，如果以上都不是一个选项，你可以跳到 Python，`time.sleep()`每隔几百或几千行添加一次以停止脚本一段时间，让 mysql 完成它的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T08:23:01.160

这可能是对您当前方法的改进，因为您可以同时执行双引号删除和列选择并写出最终结果。通过这种方式，您可以避免将非常大的中间文件写入磁盘。它也可能比将 sed 和 awk 放在管道中更快，因为这需要一个额外的进程和一些同步开销。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T08:16:43.147

这不太可能。两者都不会一次将整个文件放入内存中，因此您的限制基本上是磁盘 I/O 速率。

我认为它*实际上*并没有挂起（完全停止），更有可能的是它只是需要一些时间来处理更大的文件。

您可以尝试几件事。

首先，如果您将该`new_file.txt`文件发送到`awk`流程中，则根本不要创建中间文件。你应该能够做到：

```
sed 's/\"//g' old_file.txt | awk 'some commands' >next_file.txt 
```

其次，由于它是一个相当简单的替换，您可能会发现编写自己的固定过滤器比依赖运行速度较慢的脚本更快，`sed`因为`python`它必须满足一般情况。

换句话说，类似：

```
create 1M buffer
read up to 1M from input
while not EOF:
    go through data removing `"` characters.
    write changed buffer to output.
    read up to 1M from input 
```

正确的 C 代码是：

```
#include <stdio.h>
#include <errno.h>
static char buff[1000000];
int main (void) {
    int sz;
    char *src, *dst;
    while ((sz = fread (buff, 1, sizeof(buff), stdin)) > 0) {
        src = dst = buff;
        while (sz-- >= 0) {
            if (*src == '"') {
                src++;
                continue;
            }
            *dst++ = *src++;
        }
        sz = dst - buff;
        if (fwrite (buff, sz, 1, stdout) != 1) {
            fprintf (stderr, "Error %d writing data\n", errno);
            return -1;
        }
    }
    return 0;
} 
```

这*可能会*运行得更快，因为它是针对特定情况的，但是与所有优化一样，*测量，不要猜测！*

在我的系统上，编译该代码`gcc -O3`给出了以下结果，首先是`sed`：

```
pax> time ( cat Photo_* | sed 's/"//g' >/dev/null )
real  0m0.094s
user  0m0.080s
sys   0m0.024s

pax> time ( cat Photo_* | sed 's/"//g' >/dev/null )
real  0m0.097s
user  0m0.076s
sys   0m0.032s

pax> time ( cat Photo_* | sed 's/"//g' >/dev/null )
real  0m0.095s
user  0m0.092s
sys   0m0.012s

pax> time ( cat Photo_* | sed 's/"//g' >/dev/null )
real  0m0.096s
user  0m0.060s
sys   0m0.048s

pax> time ( cat Photo_* | sed 's/"//g' >/dev/null )
real  0m0.095s
user  0m0.088s
sys   0m0.016s 
```

然后对于自定义过滤器：

```
pax> time ( cat Photo_* | ./qq >/dev/null )
real  0m0.030s
user  0m0.012s
sys   0m0.028s

pax> time ( cat Photo_* | ./qq >/dev/null )
real  0m0.032s
user  0m0.008s
sys   0m0.032s

pax> time ( cat Photo_* | ./qq >/dev/null )
real  0m0.030s
user  0m0.012s
sys   0m0.028s

pax> time ( cat Photo_* | ./qq >/dev/null )
real  0m0.030s
user  0m0.012s
sys   0m0.028s

pax> time ( cat Photo_* | ./qq >/dev/null )
real  0m0.030s
user  0m0.012s
sys   0m0.028s 
```

所以平均值`system+user`和`wallclock`时间是：

```
 system+user   wallclock
sed           0.1056      0.0954
custom        0.0400      0.0304 
```

因此，与一般情况相比，自定义过滤器似乎很可能会给您带来性能优势。对于测试数据，有 3 个文件与该通配符匹配，分别位于 sizes和`3427158`，总共大约 14M。`5462472``5921534`

对于更大的输入大小，使用 3,791,657,984 字节（约 4G）的单个文件，`sed`（用户 + 系统）时间为 27.037 秒，而自定义时间为 9.020 秒（均取 5 个样本并取平均值）。

* * *

而且，关于你的问题编辑，如果这个过程正在减慢另一个更重要的过程，你*不*应该在那里运行它。您应该同时`nice` *使用* `ionice`一个`copy/ftp/rcp`命令，将文件转移到一个完全*独立*的盒子中，您可以在其中运行脚本到您的心脏内容，而不会损害性能。

如果我在我们的生产机器上运行脚本，降低了它们的性能，我会让一半的网站维护者要求我的头脑：-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T09:01:50.657

您不需要同时使用`sed`and `awk`; 只需使用`awk`.

假设您想要第三列：

```
awk -F'^' '{gsub(/"/, "", $3); print $3;}' huge_data_file 
```

这有许多优点，例如不需要 sed、管道、中间文件等。此外，替换`"`仅针对所需列中包含的数据，而不是整行。

我在一个包含 64,400,000 行的 2.1G 文件上对此进行了测试，这些行包含重复的数据（不确定数据重复是否会影响我的测试）：

```
"blah"^"blah blah"^"test1   ""^stuff
"blah"^"blah blah"^"test2   ""^stuff
"blah"^"blah blah"^"test3"^stuff
"blah"^"blah blah"^"test4^stuff^

$ time awk -F'^' '{gsub(/"/, "", $3); print $3;}' huge_data_file >/dev/null

real    2m31.706s
user    2m29.745s
sys 0m0.953s 
```

没有“挂起”。虚拟内存使用量不超过 105MB。当然，实际性能可能因您的服务器而异。

* * *

**[编辑]**

为了比较：

```
$ time sed -e 's/"//g' huge_data_file | awk -F'^' '{ print $3;}' >/dev/null

real    2m9.723s
user    3m34.355s
sys 0m3.585s 
```

这有效地破坏了我的“非 sed”解决方案，尽管它确实需要两倍的内存。

# iphone - Cocoa：Webkit Webview 中的奇怪行为

> ID：12002092
> 
> 赞同：0
> 
> 时间：2012-08-17T08:10:13.393
> 
> 标签：iphone, macos, cocoa, webkit

请赐教我正在加载一个 URL 请求

1.  在野生动物园中，页面正在按预期加载
2.  在 UIWebview 再次页面加载就好了
3.  但是当我在 Cocoa webkit web 视图中加载相同的内容时，它没有加载

不确定它是否没有使用 CSS 或什么，但你能建议我如何克服这个问题吗？

提前致谢 问候 Ankit

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-17T09:54:11.550

如果您的意思是您正在加载本地文件，那么是的，UIWebview 似乎没有加载任何外部文件，这有点令人沮丧。您只需将 html 中的所有内容放在一起。我用这样的 jQuery 做了一些东西，只需将整个 jQuery.js 文件粘贴到标题中！但是很愚蠢，但它奏效了。

# php - 查找字符串中存在的数字

> ID：12002095
> 
> 赞同：-1
> 
> 时间：2012-08-17T08:10:32.730
> 
> 标签：php, search, find

```
$st1='sdfsffgfgfdgf4324csadsaffas34df'
$st2='saddsd56856785 dfdffffv'
$st3='fdasfdsfdsfdsfdsfdffd' 
```

如何查找数字，存在于字符串中？

在上面，st1，st2 包含数字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:13:53.250

只需使用`preg_match`

```
if (preg_match('/\d/', $str)) {

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:14:47.513

使用[preg_match](http://php.net/manual/en/function.preg-match.php)。

```
$result = preg_match('/[0-9]/', $st1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:15:04.283

使用正则表达式。

```
preg_match('/[0-9]/', $st1, $matches);
return !empty($matches); // returns true if there is a number in $st1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T08:16:24.720

使用[`ereg_replace`](http://in3.php.net/ereg_replace). 此函数扫描字符串以查找与模式匹配的内容，然后用替换替换匹配的文本。

```
<?php
$ms="String321";
$string = ereg_replace("[^0-9]", "",$ms);
echo $string;
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T08:16:55.750

```
function containsNumeric($str) {
    preg_match("/\\d/", $str, $matches);
    return !empty($matches);
}

echo containsNumeric("ab2c"); // true 
```

# jquery - 效率：页面请求上的 Page_load 与 Ajax 调用

> ID：12002097
> 
> 赞同：0
> 
> 时间：2012-08-17T08:10:40.967
> 
> 标签：jquery, asp.net

当我的页面被点击时，将我的功能放在`page_load`cs 文件中还是在对`$(document).ready(function() {});`webmethod 进行 ajax 调用中是更好的做法？

哪种方式效率更高，我倾向于 Ajax 调用，但我的想法是这将是双重工作？（加载页面，然后也调用 WebMethod）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:14:26.377

简短的回答：这取决于您想要实现的目标和您的要求。

更长的一个：如果你的代码需要几秒钟的时间运行，请使用 ajax 路径：这样你可以向用户显示一个等待图标，让他知道正在发生一些事情，比如在 gmail 上立即显示一个进度条。

您还可以查看 Firebug“网络”选项卡来比较两种解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:14:23.870

如果您正在开发一个完整的 JQuery 应用程序，我建议您在准备好的 dom 中添加该功能。如果这样做，则不必在 Page_Load 中包含该方法。仅声明您的 jquery 函数并执行 webmethod 以返回所需的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:16:26.443

这取决于您正在轮询数据的应用程序的后端。实际上，Page_Load 会更有效，因为初始响应将发回最初需要在页面上显示的数据。

不过，正如 Rudolf 所建议的，为了互操作性和可扩展性，执行返回 JSON 的 AJAX 调用可能更可行。

# root-framework - 删除根 TTree 中的重复条目

> ID：12002098
> 
> 赞同：1
> 
> 时间：2012-08-17T08:10:42.443
> 
> 标签：root-framework

我有三个`.root`文件需要合并在一起。通常我会`hadd`用来合并文件，但文件包含我需要删除的重复条目。我不能只删除重复的条目，因为 TTree 是只读的。有没有一种简单的方法来合并文件，同时确保只保存唯一的条目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:24:51.297

我确实设法找到一种方法来生成仅包含唯一条目的直方图，使用`TEntryList`. 这允许您指定要使用的树条目。就我而言，每个条目都有一个标识它的事件编号。因此，我生成了一个条目列表，其中条目编号仅对应于唯一事件编号。

```
set<int> eventIds; // keep track of already seen event numbers
int EVENT;
int nEntries = tree->GetEntries();

tree->SetBranchAddress("EVENT",&EVENT); // grab the event number from the tree

TEntryList *tlist = new TEntryList(tree); // initialize entry list for 'TTree* tree'

// loop over the entries in 'tree'
for (int j = 0; j < nEntries; ++j)
{
    tree->GetEvent(j);

    // if we have not seen this event yet, add it to the set
    // and to the entry list
    if (eventIds.count(EVENT) == 0)
    {
        eventIds.insert(EVENT);
        tlist->Enter(j,tree);
    }
}

// apply the entry list to the tree
tree->SetEntryList(tlist);

// histogram of the variable 'var' will be drawn only with the
// entries specified by the entry list.
tree->Draw("var"); 
```

# ios - 从不同的表视图单元格“segue”到同一个视图控制器

> ID：12002105
> 
> 赞同：1
> 
> 时间：2012-08-17T08:11:02.397
> 
> 标签：ios, xcode

我有一个包含五个单元格的表格视图。

我希望每个单元格都连接到同一个视图控制器，根据选择的单元格（didSelectRowAtIndexPath）更改视图控制器中的属性。

主要技巧是我想使用故事板视图控制器作为 segued to view 控制器。

太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:36:39.263

通过 segue 直接连接视图或 tableview 和下一个视图控制器，而不是 tableview 单元。接着 ，

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
     //set any value depending on which cell was selected
     //...
     [self performSegueWithIdentifier:@"yourSegueID" sender:self];
} 
```

关于更改属性：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    MyViewController *viewController = segue.destinationViewController;
    [viewController setAnyValue:anyvalue];
} 
```

# java - 期待 NamingException，得到 NoSuchObjectException

> ID：12002108
> 
> 赞同：0
> 
> 时间：2012-08-17T08:11:11.727
> 
> 标签：java, web-services, error-handling, ejb-3.0, weblogic11g

我在 Weblogic 11g 上运行 Java 6。

我正在开发一个使用 EJB 与数据库通信的 Web 服务项目。目前我正在处理错误，因此我尝试在调用 Web 服务之前取消部署 EJB。我的 EJBClientHelper 类如下所示：

```
package mypackage.elkom.utils;

import java.io.Serializable;
import java.util.Properties;

import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;

import mypackage.elkom.ejb.beans.session.remote.ElkomRemote;

public class EJBClientHelper implements Serializable {

  /**
   * 
   */
  private static final long serialVersionUID = 1L;

  private ElkomRemote elkomRemote;

  private static final String ELKOM_JNDI =   "ElkomBean#mypackage.ejb.beans.session.remote.ElkomRemote";

  private Context ctx;

  private void prepareEjb3Connection() throws PropsFileException, NamingException {
      // Here's code for getting the ejbProviderURL from propsfile //
      props.put("java.naming.factory.initial", weblogic.jndi.WLInitialContextFactory");
      props.put("java.naming.provider.url",ejbProviderURL);
      ctx = new InitialContext(props);

 }

  public void setElkomRemote(ElkomRemote elkomRemote) {
    this.elkomRemote = elkomRemote;
  }

  public ElkomRemote getElkomRemote() throws NamingException, PropsFileException {
    prepareEjb3Connection();
    if(elkomRemote == null) {
    elkomRemote = (ElkomRemote)ctx.lookup(ELKOM_JNDI);
   }
   return elkomRemote;
  }

} 
```

但是，当我使用 getElkomRemote(); 我收到此消息的 NamingException：

```
SEVERE: The object identified by: '678' could not be found.  Either it was has not been exported or it has been collected by the distributed garbage collector.; 
nested exception is: java.rmi.NoSuchObjectException: The object identified by: '678' could not be found.  
Either it was has not been exported or it has been collected by the distributed garbage collector.
javax.ejb.EJBException: The object identified by: '678' could not be found.  Either it was has not been exported or it has been collected by the distributed garbage collector.; 
nested exception is: java.rmi.NoSuchObjectException: The object identified by: '678' could not be found.  
Either it was has not been exported or it has been collected by the distributed garbage collector.
java.rmi.NoSuchObjectException: The object identified by: '678' could not be found.  Either it was has not been exported or it has been collected by the distributed garbage collector. 
```

任何人都知道为什么我收到此消息而不是 NamingException？也许如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T20:43:32.377

异常分为三个类别：

*   系统异常
*   JVM 异常
*   应用程序例外

由于代码错误或配置错误的资源（例如配置错误的 JNDI 查找），可能会发生系统异常。如果企业 bean 面临系统错误，它通常会抛出 javax.ejb.EJBException。容器将 EJBException 包装在 RemoteException 中，最后将 RemoteException 传递回客户端。这就是您的情况发生的情况，这就是您收到 RemoteException 的原因。

系统异常无法从客户端应用程序处理，应作为未经检查的异常抛出。

有关更多详细信息，您可以查看以下文章：

*   [http://www.ibm.com/developerworks/java/library/j-ejbexcept/index.html](http://www.ibm.com/developerworks/java/library/j-ejbexcept/index.html)
*   [http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/BMP6.html](http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/BMP6.html)

我希望这可以帮助你。

# c# - 与 .NET 服务的通信

> ID：12002114
> 
> 赞同：1
> 
> 时间：2012-08-17T08:11:54.650
> 
> 标签：c#, .net, windows-services, ipc

> **可能重复：**
> [GUI 和 Windows 服务通信](https://stackoverflow.com/questions/1773046/gui-and-windows-service-communication)

.NET GUI 应用程序和 .NET Windows 服务之间最简单的本地（在一台机器上）IPC 方式是什么？在最低级别上，它应该是命名管道或本地套接字之类的东西？是否有任何基础设施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:28:59.993

我会认为最简单的方法是使用 Web 服务或 RPC/RMC 的东西——这样所有的通信都是为你完成的。不幸的是，我不确定您应该使用哪些类等的详细信息。如果您开始使用套接字，您基本上必须重新发明轮子并创建您自己的程序之间通信的方式，其他两个选项基本上将涉及做一些配置，然后一切看起来就像方法调用

# c# - 线程竞赛，线程为什么会这样工作？

> ID：12002117
> 
> 赞同：5
> 
> 时间：2012-08-17T08:12:09.123
> 
> 标签：c#, multithreading, static, thread-safety

交换两行代码我有两个不同的结果（*done = true 与 Console.Write() one*）

如果我把done = true，首先，结果将是： *True*

否则，如果我先放置 Console.WriteLine()，结果将是： *False False*

为什么？（仔细看，那个 bool 变量是静态的！）

```
using System;
using System.Threading;

class Program
{
    static bool done;

    static void Main(string[] args)
    {
        new Thread(test).Start();
        test();
    }

    static void test()
    {
        if (!done)
        {
            done = true;
            Console.WriteLine(done);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T08:17:18.777

我敢打赌，当第二次调用有机会执行时，这`Console.WriteLine`将足以让线程保持忙碌。`test()`

所以基本上调用`WriteLine`延迟了`done`足够长的设置，以便第二次调用`test`能够测试`done`并发现它仍然设置为`false`.

如果您将其保留为如图所示，`done = true;`在写入控制台之前，它将几乎立即设置，因此对 test 的第二次调用将发现`done`设置为`true`，因此不会执行`Console.WriteLine`.

希望一切都说得通。

* * *

我刚刚[发现](http://www.albahari.com/threading/)它包含的代码非常像你的问题。如果你还没有从这个页面得到你的问题，那么我建议你阅读一下，因为它更详细地解释了这种影响的原因。

使用以下密钥提取：

> 在单处理器计算机上，线程调度程序执行时间片——在每个活动线程之间快速切换执行。在 Windows 下，时间片通常在几十毫秒范围内——比在一个线程和另一个线程之间实际切换上下文的 CPU 开销（通常在几微秒范围内）要大得多。

所以本质上调用需要`Console.WriteLine`足够长的时间让处理器决定是时候让主线程在允许你的额外线程继续之前再进行一次（并最终设置`done`标志）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T08:24:19.803

您的代码不是线程安全的，结果将是不可预测的。

读取/写入静态布尔值时需要锁定访问权限，如下所示：

```
 static bool done;
    static readonly object _mylock = new object();
    static void Main()
    {
        //Application.EnableVisualStyles();
        //Application.SetCompatibleTextRenderingDefault(false);
        //Application.Run(new Form1());
        new Thread(test).Start();
        test();
        Console.ReadKey();
    }

    static void test()
    {
        lock (_mylock)
        {
            if (!done)
            {
                Console.WriteLine(done);
                done = true;
            }
        }
    } 
```

*编辑*：只读感谢@d4wn

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T08:19:40.737

看起来调度程序只是在调用后从一个线程中减少 CPU 时间，`Console.Writeline`然后将其交给另一个线程，之前`done`都设置为`true`.

您确定它**总是**在您分配之前`False\nFalse`调用时打印吗？据我了解，这应该是相当随机的。`Console.Writeline``done = true;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T14:56:10.370

每次共享线程之一访问共享变量时，都必须明确地受到同步技术之一的保护。环境（clr..）并没有为我们做这件事，因为在多线程的整个可能的复杂性中，这是不可能的。所以这个绝对负责且不容易的任务必须由开发人员完成，编写多线程代码。

我想你可以在那里找到大量必要的信息： [Thread Synchronization (C# Programming Guide)](http://msdn.microsoft.com/en-us/library/ms173179%28v=vs.80%29.aspx)

# javascript - 在 YUI 中过渡颜色？

> ID：12002125
> 
> 赞同：0
> 
> 时间：2012-08-17T08:12:51.077
> 
> 标签：javascript, yui, yahoo

我正在尝试为我在 YUI 中编码的东西延迟转换颜色，问题是由于某种原因，IE 不会转换颜色。. . 其他一切在 IE 中都可以正常转换，但颜色保持透明。

我认为发布一些示例代码比试图解释正在发生的事情更容易：

[http://jsfiddle.net/Sb3Gt/](http://jsfiddle.net/Sb3Gt/)

在 Firefox/Chrome 中检查，您应该会在短暂延迟后看到颜色从透明变为黑色，然后在 IE 中检查，颜色保持透明。

这是 YUI 的一个已知问题还是我的 JavaScript 出错了？

**编辑：要使示例起作用，您必须单击灰色方块。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:46:51.967

显然这是 YUI 的一个问题，有关更多信息，请参见[此处](http://yuilibrary.com/forum/viewtopic.php?f=92&t=10489)

# gwt - EXT GWT BaseModel 需要有 DTO 参考吗？

> ID：12002128
> 
> 赞同：0
> 
> 时间：2012-08-17T08:13:05.253
> 
> 标签：gwt, gwt-rpc, gwt2, gxt

我对 GWT 很陌生。我正在使用 ext-gwt 小部件。

我在我的办公室代码中发现很多地方包含类似，

```
class A extends BaseModel{

 private UserAccountDetailsDto userAccountDetailsDto = null;

 //SETTER & GETTER IN BASEMODEL WAY
} 
```

此外，未使用 DTO 参考。

```
public class UserAccountDetailsDto implements Serializable{

    private Long userId=null;
    private String userName=null;
    private String userAccount=null;
    private String userPermissions=null;

        //NORMAL SETTER & GETTER
} 
```

现在，我可以从 GWT 服务器端代码中获得结果，并且一切正常，但是当我在 A 类中评论 DTO 引用时，我没有得到任何结果。

请解释我的需要。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:03:14.007

将使用 BaseModel 的 GXT2 应用程序代码移植到 GXT3 模型是一项艰巨的任务。使用 GXT3 的 ModelProviders 在模型方面或多或少会完全重写，提供一些灵活性。任何依赖模型事件、存储、记录等的代码都需要重写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T08:38:46.830

那么问题在于 GXT`BaseModel`和 GWT-RPC 序列化的实现。BaseModel 基于特殊的 GXT 地图 RpcMap。这个 map 定义了特殊的序列化规则，可以避免 RPC 类型爆炸，但是作为副作用，只有一些存储在 map 中的简单类型会被序列化。例如，您可以将任何类型放入映射中，但是如果您对其进行序列化/反序列化，则只会出现 Integer、String、Double、Byte、Float 和 Short（以及这种类型的数组）类型的值。所以在 BaseModel 中引用 DTO 的意义，就是告诉 GWT-RPC 这个类型也必须被序列化。

**详细解释**

基本上 GWT-RPC 是这样工作的：

当您为服务定义接口时，GWT-RPC 会分析参数/返回类型中使用的所有类，以创建序列化器/反序列化器。如果你从你的服务中返回类似的东西`Map<Object,Object>`，GWT-RPC 将不得不为每个实现 Map 和 Serializable 接口的类创建一个序列化器，而且它还将为每个实现 Serializable 的类生成序列化器。最后这是一个相当糟糕的情况，因为你编译的 js 文件的大小会更大。这种情况称为 GWT-RPC 类型爆炸。

因此，在 中`BaseModel`，所有值都存储在 中`RpcMap`。并且`RpcMap`具有自定义编写的序列化程序（`RpcMap_CustomFieldSerializer`如果您对如何创建此类内容感兴趣，可以查看它的代码），因此不会导致上述问题。但是由于它有自定义序列化器，GWT 不知道里面放了哪个自定义类`RpcMap`，也不会为它们生成序列化器。因此，当您将一些字段放入您的`BaseModel`类时，gwt 知道它可能需要能够序列化此类，因此它将生成此类所需的所有内容。

# php - 字符串区别php

> ID：12002132
> 
> 赞同：5
> 
> 时间：2012-08-17T08:13:17.770
> 
> 标签：php

我想创建一个方法来比较两个句子并返回使它们不同的单词。

例如

灰色瓷砖 100 X 200 厨房地板

灰色瓷砖 300 X 600 厨房地板

差异为 100 x 200 300 x 600

它将允许一个单词（不需要一个字符位于两个唯一单词之间），但如果距离超过一个，它会抛出一个错误，说短语不够相似，可以在开始/结束/中间找到差异文本

在传递到不同的博客后，我发现使用本机 php 函数 xdiff_string_diff 的方法与我的关注类似，但问题是，我无法使代码正常工作。我收到错误说 xdiff_string_diff 是未定义的函数。你们中的任何人都知道应该加载哪些扩展才能使此功能可用？或者，如果您可以建议另一种方法，那将非常感谢。:)

```
<?php
$old_article = "grey tiles 100 X 200 kitchen flooring";
$new_article = "grey tiles 300 X 600 kitchen flooring"

$diff = xdiff_string_diff($old_article, $new_article, 1);
if (is_string($diff)) {
    echo "Differences between two articles:\n";
    echo $diff;
}

?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T08:19:34.370

你必须安装 xdiff

```
pecl install  xdiff 
```

或者，您可以尝试使用 array_diff 来查找字符串之间的差异。在空间上分解它们，然后对它们进行 array_diff ：

```
$a1 = explode(" " , 'grey tiles 100 X 200 kitchen flooring');
$a2 = explode(" ", 'grey tiles 300 X 600 kitchen flooring');

echo join(' ', array_diff($a1, $a2)); // 100 200 
```

不过，这不会捕获 X，因为 X 将成为该上下文中字符串的公共部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T08:18:56.267

在每个函数（或库）的每个手册页上，它总是提到它是否默认随附 PHP，以及他们从哪个版本的 PHP 开始将其打包到发行版中。

如果它不在发行版中，那么它会提到它所在的包（PECL 或 PEAR）。

O[它的](http://php.net/manual/en/function.xdiff-string-diff.php)手册页指出：

```
PECL xdiff >= 0.2.0 
```

如果您正在运行 BSD/Solaris/Linux/Mac，您只需打开控制台并输入：

```
pear install xdiff 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:19:51.133

您可以逐个比较每个字符，在每个差异中您都可以增加一个计数器。但是这个解决方案不会给你“300”，它会给你3。

# grails - 有没有一种简单的方法可以在 Grails 控制器中重定向到以前的 URL？

> ID：12002142
> 
> 赞同：0
> 
> 时间：2012-08-17T08:14:03.463
> 
> 标签：grails, redirect, controller

我有一个 grails 控制器操作，它改变了用户的一些内部状态，但应该将用户返回到他之前所在的页面。由于状态的变化，这个页面看起来会有些不同，但是有没有一种简单的方法可以重定向到任意上一页？

例如

```
class MyController {
    changeSomething() {
        // ... change something here ...
        redirect controller:request.controller,
                action:request.action,
                params:request.params
    }
} 
```

# c# - 如何实现像 StringCollection 和某些类这样的默认方法？

> ID：12002145
> 
> 赞同：3
> 
> 时间：2012-08-17T08:14:10.393
> 
> 标签：c#, .net

在回答问题时我遇到了这个

```
StringCollection sc = new StringCollection();

sc.Add("Foo"); 
```

但这可以写成

```
StringCollection sc = new StringCollection() {"Foo"}; 
```

这不能写

```
StringCollection sc = new StringCollection() {new string[] {"Foo"} }; 
```

这意味着`Add`方法被调用而`AddRange`不是。

我怎样才能使一个类具有在创建其对象时调用默认方法的功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T08:16:00.967

它被称为[Collection Initializer](http://msdn.microsoft.com/en-us/library/bb384062.aspx)。该类必须实现[IEnumerable](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx)并具有公共`Add`方法。

该类可以有多种`Add`方法，例如

```
public class MyCollection : IEnumerable
{
    public void Add(string item) { ... }

    public void Add(string[] items) { ... }

    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T08:17:21.007

该代码是一个集合初始化器：http: [//msdn.microsoft.com/en-us/library/bb384062.aspx](http://msdn.microsoft.com/en-us/library/bb384062.aspx)

> 集合初始化器允许您在初始化实现 IEnumerable 的集合类时指定一个或多个元素初始化器。元素初始值设定项可以是简单值、表达式或对象初始值设定项。通过使用集合初始化器，您不必在源代码中指定对类的 Add 方法的多次调用；编译器添加调用。

对“Add”的调用由编译器生成。因此，除非您编写自己的 C# 编译器，否则无法自定义调用“AddRange”的行为。

# javascript - 简单的 JSFiddle。当我运行一个函数时，它输出代码而不是结果

> ID：12002156
> 
> 赞同：1
> 
> 时间：2012-08-17T08:14:37.993
> 
> 标签：javascript, jsfiddle

在这个简单的示例中，我有一个返回文本字符串的函数。当我尝试输出函数的结果时，它只输出函数的代码。有任何想法吗？

[http://jsfiddle.net/VQz73/](http://jsfiddle.net/VQz73/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T08:16:28.870

```
document.write(hello()); 
```

不是

```
document.write(hello); 
```

前者是输出函数调用的结果。后者输出对函数本身的引用。你没有调用它。

作为旁注，`document.write`这是非常古老的学校，这些天几乎没有用。如果您是 JavaScript 新手，我建议您研究其他输出方式，例如 DOM 脚本，例如

```
var p = document.createElement('p');
p.textContent = hello();
document.body.appendChild(p); 
```

# gstreamer - 多媒体面试准备

> ID：12002161
> 
> 赞同：0
> 
> 时间：2012-08-17T08:14:53.947
> 
> 标签：gstreamer

我在 Symbian 上的多媒体框架方面有实践经验但我有 GStreamer 的知识和对多媒体协议的基本了解（没有深入的知识也没有实践）

我有这两个查询

1，我能否在简历中提及有关 GStreamer 和多媒体协议的这些事实以及我在这些领域会遇到什么样的问题（对于 GSteramer，多媒体协议）

2、有没有好书可以参考一下：GSteramer、多媒体协议（如RTP、RTSP等，）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:18:18.510

可能有点跑题了……不管怎样，在你的简历中提到你觉得被问到的技术是很舒服的。否则明确说明专业水平。如果你得到这份工作但你不知道这些东西，你会感到不开心或可能被解雇。

书的推荐很难。关于 GStreamer，最好的建议是使用它。学习技术总是需要时间的。

# java - Java 中 System.out.println() 中的 System, out, println 是什么

> ID：12002170
> 
> 赞同：39
> 
> 时间：2012-08-17T08:15:51.237
> 
> 标签：java, system.out

> **可能重复：**
> [Java 中 System.out.println 的含义是什么？](https://stackoverflow.com/questions/3406703/whats-the-meaning-of-system-out-println-in-java)

我一直在寻找什么的答案`System`，`out`并且`println`在`System.out.println()`Java 中。我搜索并找到了一个不同的答案，如下所示：

*   > System 是 java.lang 包中的一个内置类。这个类有一个final修饰符，这意味着它不能被其他类继承。它包含预定义的方法和字段，提供标准输入、输出等功能。

*   > out 是 System 类中的静态 final 字段（即变量），属于 PrintStream 类型（内置类，包含打印不同数据值的方法）。静态字段和方法必须使用类名来访问，所以（ System.out ）。

*   > 这里的 out 表示类型 PrintStream 类的引用变量。

*   > println() 是 PrintStream 类中用于打印数据值的公共方法。因此，要访问 PrintStream 类中的方法，我们使用 out.println() （因为非静态方法和字段只能通过使用 refrence 变量来访问）

在另一页中，我发现另一个对比定义为

> System.out.print 是 java 中使用的标准输出函数。其中 System 指定包名，out 指定类名，print 是该类中的函数。

我对这些感到困惑。有人能准确告诉我它们是什么吗？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-08-17T08:23:00.810

`System`是`java.lang`包中的最后一个类。

`out`是在类中`PrintStream`声明的类型的类变量`System`。

`println`是`PrintStream`类的方法。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-17T08:22:22.883

每当您感到困惑时，我建议您首先查阅[Javadoc](http://docs.oracle.com/javase/7/docs/api/)以进行澄清。

从 javadoc about`System`中，文档是这样说的：

```
public final class System
extends Object

The System class contains several useful class fields and methods. It cannot be instantiated.
Among the facilities provided by the System class are standard input, standard output, and error output streams; access to externally defined properties and environment variables; a means of loading files and libraries; and a utility method for quickly copying a portion of an array.

Since:
JDK1.0 
```

关于`System.out`

```
public static final PrintStream out
The "standard" output stream. This stream is already open and ready to accept output data. Typically this stream corresponds to display output or another output destination specified by the host environment or user.
For simple stand-alone Java applications, a typical way to write a line of output data is:

     System.out.println(data) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-17T08:22:30.217

您发布的第一个答案（系统是内置类...）非常准确。

您可以添加`System`该类包含大部分是本机的并且由 JVM 在启动期间设置，例如将`System.out`打印流连接到与“标准输出”（控制台）关联的本机输出流。

# android - 将动画图标添加到 Android 操作栏（无操作栏 Sherlock）

> ID：12002171
> 
> 赞同：0
> 
> 时间：2012-08-17T08:15:54.053
> 
> 标签：android, android-actionbar

[我找到了一些使用 ActionBar Sherlock ( Stackoverflow Link](https://stackoverflow.com/questions/9731602/animated-icon-for-actionitem) )将动画项目添加到操作栏的解决方案

仅使用默认操作栏时是否有任何示例？

我尝试了链接中给出的方法，它确实为按钮创建了动画。问题是在设置 actionVIew 后，按钮在操作栏中左对齐。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T20:01:28.057

我必须为一个项目这样做。您只需继承 ImageView 并将该类用作菜单项的操作视图。

```
package com.---.events.android;

import android.content.Context;
import android.graphics.drawable.AnimationDrawable;
import android.os.Handler;
import android.util.AttributeSet;
import android.widget.ImageView;

public class AnimatedImageView extends ImageView {

    public AnimatedImageView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public AnimatedImageView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public AnimatedImageView(Context context) {
        super(context);
    }

    public void initializeAnimation(){
        setImageDrawable(null);
        setBackgroundAnimation();
        AnimationDrawable da = (AnimationDrawable) getBackground();
        da.start();
    }

    public void setBackgroundAnimation() {
        setBackgroundResource(R.drawable.logo_animation); // this is an animation-list
    }

    @Override
    protected void onAttachedToWindow() {
        super.onAttachedToWindow();
        Handler handler = new Handler();
        final AnimatedImageView me = this; 
        handler.post(new Runnable(){
            public void run() {
                me.initializeAnimation();
            }
        });
    }
} 
```

以下是您从菜单 XML 中指定操作视图的方法。

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menu_animation"
          android:title="test"
          android:showAsAction="always" 
          android:actionViewClass="com.--.events.android.AnimatedImageView" />
</menu> 
```

# iphone - 在 iPhone 的 MapKit 上查找两点之间的路径/路线

> ID：12002179
> 
> 赞同：9
> 
> 时间：2012-08-17T08:16:25.483
> 
> 标签：iphone, objective-c, ios, mapkit

我正在尝试在 Mapkit 上找到两个位置之间的路径。我只有两个位置。现在我必须找到这些点之间的确切路径，并使用 MapKit 在这些点之间画一条线。我已经浏览了几个使用 .csv 文件的示例。在该 .csv 文件中，他们根据这些值存储了完整路径和绘图线的纬度和经度值。

但在这里我试图在不知道路径的情况下画一条线。那么有没有办法动态找到路径并画线呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-17T09:04:00.320

下面是在两个位置之间查找路径和画线的代码。

要实现以下类：

```
_mapRecord = [[PSMapDirection alloc] initWithFrame:CGRectMake(0.0, 49.0, 320.0, 411.0)];
[self.view addSubview:_mapRecord]; 
```

地图方向.h

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>
#import "RegexKitLite.h"

@interface MapDirection : UIView<MKMapViewDelegate> 
{    
    MKMapView* mapView;
    NSArray* routes;    
    BOOL isUpdatingRoutes;
}

-(void) showRouteFrom: (MKAnnotation*) f to:(MKAnnotation*) t;

@end 
```

地图方向.m

```
#import "MapDirection.h"

@interface MapDirection()
-(NSArray*) calculateRoutesFrom:(CLLocationCoordinate2D) from to: (CLLocationCoordinate2D) to;
-(void) centerMap;

@end

- (id) initWithFrame:(CGRect) frame
{
    self = [super initWithFrame:frame];
    if (self != nil) 
    {
        mapView = [[MKMapView alloc] initWithFrame:CGRectMake(0, 0, frame.size.width, frame.size.height)];
        mapView.showsUserLocation = NO;
        [mapView setDelegate:self];
        [self addSubview:mapView];      
    }
    return self;
}

- (NSMutableArray *)decodePolyLine: (NSMutableString *)encoded 
{
    [encoded replaceOccurrencesOfString:@"\\\\" withString:@"\\" options:NSLiteralSearch range:NSMakeRange(0, [encoded length])];
    NSInteger len = [encoded length];
    NSInteger index = 0;
    NSMutableArray *array = [[NSMutableArray alloc] init];
    NSInteger lat=0;
    NSInteger lng=0;
    while (index < len) 
    {
        NSInteger b;
        NSInteger shift = 0;
        NSInteger result = 0;
        do 
        {
            b = [encoded characterAtIndex:index++] - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        NSInteger dlat = ((result & 1) ? ~(result >> 1) : (result >> 1));
        lat += dlat;
        shift = 0;
        result = 0;
        do
        {
            b = [encoded characterAtIndex:index++] - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        NSInteger dlng = ((result & 1) ? ~(result >> 1) : (result >> 1));
        lng += dlng;
        NSNumber *latitude = [[NSNumber alloc] initWithFloat:lat * 1e-5];
        NSNumber *longitude = [[NSNumber alloc] initWithFloat:lng * 1e-5];
        //printf("[%f,", [latitude doubleValue]);
        //printf("%f]", [longitude doubleValue]);
        CLLocation *loc = [[CLLocation alloc] initWithLatitude:[latitude floatValue] longitude:[longitude floatValue]];
        [array addObject:loc];
    }   
    return array;
}

-(NSArray*) calculateRoutesFrom:(CLLocationCoordinate2D) f to: (CLLocationCoordinate2D) t 
{
    NSString* saddr = [NSString stringWithFormat:@"%f,%f", f.latitude, f.longitude];
    NSString* daddr = [NSString stringWithFormat:@"%f,%f", t.latitude, t.longitude];

    NSString* apiUrlStr = [NSString stringWithFormat:@"http://maps.google.com/maps?output=dragdir&saddr=%@&daddr=%@", saddr, daddr];
    NSURL* apiUrl = [NSURL URLWithString:apiUrlStr];
    //NSLog(@"api url: %@", apiUrl);
    NSError* error = nil;
    NSString *apiResponse = [NSString stringWithContentsOfURL:apiUrl encoding:NSASCIIStringEncoding error:&error];
    NSString *encodedPoints = [apiResponse stringByMatching:@"points:\\\"([^\\\"]*)\\\"" capture:1L];   
    return [self decodePolyLine:[encodedPoints mutableCopy]];
}

-(void) centerMap
{
    MKCoordinateRegion region;
    CLLocationDegrees maxLat = -90.0;
    CLLocationDegrees maxLon = -180.0;
    CLLocationDegrees minLat = 90.0;
    CLLocationDegrees minLon = 180.0;
    for(int idx = 0; idx < routes.count; idx++)
    {
        CLLocation* currentLocation = [routes objectAtIndex:idx];
        if(currentLocation.coordinate.latitude > maxLat)
            maxLat = currentLocation.coordinate.latitude;
        if(currentLocation.coordinate.latitude < minLat)
            minLat = currentLocation.coordinate.latitude;
        if(currentLocation.coordinate.longitude > maxLon)
            maxLon = currentLocation.coordinate.longitude;
        if(currentLocation.coordinate.longitude < minLon)
            minLon = currentLocation.coordinate.longitude;
    }
    region.center.latitude     = (maxLat + minLat) / 2.0;
    region.center.longitude    = (maxLon + minLon) / 2.0;
    region.span.latitudeDelta = 0.01;
    region.span.longitudeDelta = 0.01;

    region.span.latitudeDelta  = ((maxLat - minLat)<0.0)?100.0:(maxLat - minLat);
    region.span.longitudeDelta = ((maxLon - minLon)<0.0)?100.0:(maxLon - minLon);
    [mapView setRegion:region animated:YES];
}

-(void) showRouteFrom: (MKAnnotation*) f to:(MKAnnotation*) t 
{   
    if(routes) 
    {
    [mapView removeAnnotations:[mapView annotations]];
    }

    [mapView addAnnotation:f];
    [mapView addAnnotation:t];

    routes = [self calculateRoutesFrom:f.coordinate to:t.coordinate];
    NSInteger numberOfSteps = routes.count;

    CLLocationCoordinate2D coordinates[numberOfSteps];
    for (NSInteger index = 0; index < numberOfSteps; index++) 
    {
        CLLocation *location = [routes objectAtIndex:index];
        CLLocationCoordinate2D coordinate = location.coordinate;
        coordinates[index] = coordinate;
    }
    MKPolyline *polyLine = [MKPolyline polylineWithCoordinates:coordinates count:numberOfSteps];
    [mapView addOverlay:polyLine];
    [self centerMap];
}

#pragma mark MKPolyline delegate functions
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay 
{
    MKPolylineView *polylineView = [[MKPolylineView alloc] initWithPolyline:overlay];
    polylineView.strokeColor = [UIColor purpleColor];
    polylineView.lineWidth = 5.0;
    return polylineView;
}

@end 
```

**起点**的示例地图路线- “41.967659,-87.627869”和目的地点 - “41.574361,-91.083069 ”

![地图路线](../Images/31a5075b2dba5fdfc42225b5dcbf600e.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-22T17:38:57.703

这里我能够在两点（位置）之间绘制方向的方式。

* * *

> > 首先，从此链接下载 GoogleMap sdk[并将](https://developers.google.com/maps/documentation/ios/releases)其集成到您的应用程序中。

[现在需要 API 密钥，您可以在此](https://developers.google.com/maps/documentation/ios/start#the_google_maps_api_key)链接上按照给定的准则创建。

下面是在两个位置之间的谷歌地图上绘制方向的代码。

* * *

```
-(NSArray*) calculateRoutesFrom:(CLLocationCoordinate2D) f to: (CLLocationCoordinate2D) t {
NSString* saddr = [NSString stringWithFormat:@"%f,%f", f.latitude, f.longitude];
NSString* daddr = [NSString stringWithFormat:@"%f,%f", t.latitude, t.longitude];

NSURL *url=[NSURL URLWithString:[NSString stringWithFormat:@"http://maps.googleapis.com/maps/api/directions/json?origin=%@&destination=%@&sensor=false&avoid=highways&mode=driving",saddr,daddr]];

NSError *error=nil;

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init] ;

[request setURL:url];
[request setHTTPMethod:@"POST"];

NSURLResponse *response = nil;

NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error: &error];

NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

NSDictionary * dic = [NSJSONSerialization JSONObjectWithData:[responseString dataUsingEncoding:NSUTF8StringEncoding] options:NSJSONWritingPrettyPrinted error:nil];

return [self decodePolyLine:[self parseResponse:dic]];
}
- (NSString *)parseResponse:(NSDictionary *)response {
NSArray *routes = [response objectForKey:@"routes"];
NSDictionary *route = [routes lastObject];
if (route) {
    NSString *overviewPolyline = [[route objectForKey:
                                   @"overview_polyline"] objectForKey:@"points"];
    return overviewPolyline;
}
return @"";
}
-(NSMutableArray *)decodePolyLine:(NSString *)encodedStr {
NSMutableString *encoded = [[NSMutableString alloc]
                            initWithCapacity:[encodedStr length]];
[encoded appendString:encodedStr];
[encoded replaceOccurrencesOfString:@"\\\\" withString:@"\\"
                            options:NSLiteralSearch
                              range:NSMakeRange(0,
                                                [encoded length])];
NSInteger len = [encoded length];
NSInteger index = 0;
NSMutableArray *array = [[NSMutableArray alloc] init];
NSInteger lat=0;
NSInteger lng=0;
while (index < len) {
    NSInteger b;
    NSInteger shift = 0;
    NSInteger result = 0;
    do {
        b = [encoded characterAtIndex:index++] - 63;
        result |= (b & 0x1f) << shift;
        shift += 5;
    } while (b >= 0x20);
    NSInteger dlat = ((result & 1) ? ~(result >> 1)
                      : (result >> 1));
    lat += dlat;
    shift = 0;
    result = 0;
    do {
        b = [encoded characterAtIndex:index++] - 63;
        result |= (b & 0x1f) << shift;
        shift += 5;
    } while (b >= 0x20);
    NSInteger dlng = ((result & 1) ? ~(result >> 1)
                      : (result >> 1));
    lng += dlng;
    NSNumber *latitude = [[NSNumber alloc] initWithFloat:lat * 1e-5];
    NSNumber *longitude = [[NSNumber alloc] initWithFloat:lng * 1e-5];
    CLLocation *location = [[CLLocation alloc] initWithLatitude:
                            [latitude floatValue] longitude:[longitude floatValue]];
    [array addObject:location];
}
return array;
}
- (void)loadMapViewWithDirection {

float lat = 23.050671;
float lng = 72.541351;

GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:lat
                                                        longitude:lng
                                                             zoom:10];

GMSMapView  * mapView = [GMSMapView mapWithFrame:CGRectMake(0, 75, 320, self.view.frame.size.height-kHeaderRect.size.height) camera:camera];
self.mapView.myLocationEnabled = YES;

float sourceLatitude = 23.050671;
float sourceLongitude = 72.541351;

float destLatitude = 23.036138;
float destLongitude = 72.603836;

GMSMarker *sourceMarker = [[GMSMarker alloc] init];
marker.position = CLLocationCoordinate2DMake(sourceLatitude, sourceLongitude);
marker.map = self.mapView;

GMSMarker *destMarker = [[GMSMarker alloc] init];
marker.position = CLLocationCoordinate2DMake(destLatitude, destLongitude);
marker.map = self.mapView;

self.mapView.delegate = self;

   [self drawDirection:CLLocationCoordinate2DMake(sourceLatitude, sourceLongitude) and:CLLocationCoordinate2DMake(destLatitude, destLongitude)];

[self.view addSubview:self.mapView];
}
- (void) drawDirection:(CLLocationCoordinate2D)source and:(CLLocationCoordinate2D) dest {

GMSPolyline *polyline = [[GMSPolyline alloc] init];
GMSMutablePath *path = [GMSMutablePath path];

NSArray * points = [self calculateRoutesFrom:source to:dest];

NSInteger numberOfSteps = points.count;

for (NSInteger index = 0; index < numberOfSteps; index++)
{
    CLLocation *location = [points objectAtIndex:index];
    CLLocationCoordinate2D coordinate = location.coordinate;
    [path addCoordinate:coordinate];
}

polyline.path = path;
polyline.strokeColor = [UIColor redColor];
polyline.strokeWidth = 2.f;
polyline.map = self.mapView;

// Copy the previous polyline, change its color, and mark it as geodesic.
polyline = [polyline copy];
polyline.strokeColor = [UIColor greenColor];
polyline.geodesic = YES;
polyline.map = self.mapView;
}
- (void)viewDidLoad {
[super viewDidLoad];
[self loadMapViewWithDirection];   
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T08:30:56.423

您可以参考[此代码](https://github.com/kishikawakatsumi/MapKit-Route-Directions/downloads)，它完全符合您的要求。
编辑：[这也是](https://github.com/Surya121/SBMapWithRoute/downloads)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T08:23:52.473

我认为您无法在本地执行此操作。实现一个算法来寻找两个 gps 点之间的路径需要大量的输入数据（来自地图的数据），而你没有这个。只有地图提供者才能负担得起实现这种算法并公开使用它的 API。我认为`Google`有 routing `API`，但我还没有玩过它......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T08:29:03.140

[https://developers.google.com/maps/documentation/directions/](https://developers.google.com/maps/documentation/directions/)

请注意，TOS 规定您必须在 Google 地图上显示结果，因此您必须在下一个 iOS 版本中禁用该功能

# java - 类似winamp选择文件的java程序

> ID：12002183
> 
> 赞同：1
> 
> 时间：2012-08-17T08:16:28.883
> 
> 标签：java, swing, multi-select, jfilechooser

用户可以使用 JFileChooser 选择一个或多个 mp3 文件吗？

我只能选择用户一个文件，使用这种方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T08:24:39.567

只需将多选设置为 true 并将选择模式设置为 JFileChooser.FILES_AND_DIRECTORIES ，它将适用于多个文件和目录中的所有文件：

```
fileChooser.setFileSelectionMode( JFileChooser.FILES_AND_DIRECTORIES );
fileChooser.setMultiSelectionEnabled(true); 
```

然后以这种方式检索所有文件：

```
fileChooser.getSelectedFiles(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T09:05:40.463

My understanding of your requirement is:

*   User can choose one or multiple files
*   If a single file is chosen, then you work with that file
*   If multiple files are chosen then you would create a playlist and work with this playlist.

If this is what you want, I think the following might work for this scenario. Note that I've left the implementation to you because you know how to create a playlist or how to create a single file and feed it to your player.

```
/** This method returns a set of files chosen by the user. 
  * Returns null if selection is cancelled 
  **/
private File[] openFiles(){

    JFileChooser fileChooser = new JFileChooser();
    fileChooser.setMultiSelectionEnabled(true);
    fileChooser.setFileSelectionMode( JFileChooser.FILES_AND_DIRECTORIES );

    int optionChosen = fileChooser.showOpenDialog(this);

    return (optionChosen == JFileChooser.CANCEL_OPTION) ? null : fileChooser.getSelectedFiles();
}

public void actionPerformed(ActionEvent e){
    File[] selectedFiles = openFiles();

    if(selectedFiles == null){
       //handleNoFileChosen
    }else if(selectedFiles.length == 1){
        //handle single file selected
    }else{
        //handle creating playlist
    }
} 
```

# jquery - Wordpress 中错误消息的可访问性、表单验证

> ID：12002184
> 
> 赞同：1
> 
> 时间：2012-08-17T08:16:29.830
> 
> 标签：jquery, wordpress, accessibility

我正在开发一个可访问的 Wordpress 主题，并且已经到了无法使用常规表单验证消息的地步。通常我会在字段下方立即插入验证，以便使用向下箭头键的盲人用户在继续下一个字段之前会收到任何错误消息。

但是现在我有一次被结构强迫，在页面顶部单独显示一条错误消息。我想避免将用户的焦点放在页面的开头，在那里他会再次收听所有链接。这是一个好计划吗？

```
<div class="error">
<a href="#" class="assistive-text foci">Error</a>
Your login failed. Please try again.
</div>
<script>
jQuery(document).ready(function($) {
     $('#main').find('.foci').focus();
});
</script> 
```

css 与 211 主题相同（剪辑方法）：

```
.assistive-text {
  position: absolute !important;
  clip: rect(1px 1px 1px 1px); /* IE6, IE7 */
  clip: rect(1px, 1px, 1px, 1px);
  max-width:1em;  /* Chrome */
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:38:20.610

我认为您最好将`strong`元素（[HTML5 规范](http://www.w3.org/TR/html5/the-strong-element.html#the-strong-element)）用于错误消息。它表明了重要性。

* * *

也许您想使用[WAI-ARIA](http://en.wikipedia.org/wiki/WAI-ARIA)？例如，参见[http://webaim.org/techniques/aria/](http://webaim.org/techniques/aria/)：

> 的`aria-live`值`assertive`将导致用户立即或尽快收到有关内容更改的警报。断言将用于重要更新，例如错误消息

它还说明了错误消息的焦点：

> 此外，通常需要将焦点设置到页面元素。例如，表单验证错误消息可能会在使用脚本的页面内显示为文本（不是链接或表单元素）。视觉用户可以立即看到错误消息。然而，屏幕阅读器用户可能不知道新消息的存在。为了将焦点设置为错误消息以便屏幕阅读器可以阅读，消息必须能够接收焦点——除非它是链接或表单元素，否则它通常无法做到这一点。
> 
> […]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:36:53.550

作为一个盲人计算机用户，我不介意我的焦点被移到页面顶部，因为表单验证错误假设我希望在提交表单时被带到一个新页面。根据您的示例，这似乎是一个登录表单，我希望将我带到另一个页面。在提交表单后将焦点设置为页面顶部的错误文本对我来说是可以接受的。如果在点击提交实时验证之前填写表格时将我移动到页面顶部，我会觉得很烦人，并导致我失去了我的位置。

# c# - 如何从 asp.net 代码隐藏将 HTML 内容分配给 iframe 控件？

> ID：12002185
> 
> 赞同：2
> 
> 时间：2012-08-17T08:16:29.730
> 
> 标签：c#, asp.net, html

我想将 html 内容从页面后面的 asp.net 代码分配给 iframe 控件；

这工作正常 myIframe.Attributes.Add("src", "pathtofilewith.html"); 但是，我不想给出要显示的 html 文件的路径，我只想将一些来自数据库的 html 内容分配给 iframe 控件。

我希望这样的东西（Ashok）显示在 iframe 控件中

我尝试了以下方法，但没有任何成功

```
myIframe.Attributes["innerHTML"] = "<h1>Thank You..</h1>";

myIframe.Attributes.Add("innerHTML", "<h1>Ashok</h1>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:43:02.783

一种在两个不同页面之间进行通信的方法是使用 JQuery 发布数据，其中一个在 IFrame 中。[这个 StackOverflow 问题](https://stackoverflow.com/questions/1003973/target-an-iframe-with-a-html-post-with-jquery)中给出了一个例子

[在另一个 StackOverflow 问题](https://stackoverflow.com/questions/1597548/form-post-in-iframe-without-affecting-history)中也讨论了它

在[此页面上](http://humandoing.net/blog/2011/07/19/set-the-contents-of-an-iframe-using-jquery/)，您还将找到一个简短的示例，说明如何在不使用单独网页的情况下将内容放入 IFrame（请注意缺少`src`属性！）。

希望有些帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:23:08.320

你不能。这不是 an 的`IFRAME`工作方式 - 它与您已经发现的 src 属性一起使用。

也许您想创建`DIV`一个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:33:30.723

没有办法将 HTML 内容直接插入**iframe**标签，但您可以创建一个页面，从数据库中获取内容，然后您可以使用**iframe**查看它，

**或者**

例如，您可以创建一个名为 getContent.aspx 的页面，该页面从 URL 请求值，例如 getContent.aspx?content=`<h1>Thank You..</h1>`并将其显示在您喜欢的任何位置，然后从**iframe**调用它。

# cocos2d-iphone - 哪个 cocos2d 项目用于 android？

> ID：12002190
> 
> 赞同：1
> 
> 时间：2012-08-17T08:16:50.653
> 
> 标签：cocos2d-iphone, cocos2d-x, cocos2d-android

我们正在构建一个具有 sns 功能的游戏。
我们计划使用原生框架（例如 iOS 的 UIKit）来实现 sns 功能。

考虑到这一点，

哪一个会更好？

[http://www.cocos2d-x.org/](http://www.cocos2d-x.org/)或[http://code.google.com/p/cocos2d-android-1/](http://code.google.com/p/cocos2d-android-1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:52:16.087

我们应该根据“更好”的哪个定义来决定什么对您来说“更好”？

我通过说您应该尝试两者来回答这个问题，然后使用您感觉更有效率的引擎。使用所需的最少功能制作最快的原型。在您的情况下，可能会在 cocos2d OpenGL 视图中显示本机 UI 视图。

有关选择引擎时真正重要的内容的更多信息，请阅读我的[“游戏引擎选择器指南”](http://www.learn-cocos2d.com/2012/05/the-game-engine-dating-guide-how-to-find-the-right-engine-for-your-game/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:00:34.970

我想可能是 cocos2d-x。我确实比较了这两个，基本上，android一个几乎死了，没有更新了。支持和教程是池。

但是cocos2d-x在尝试与SDK功能集成时会比较困难，因为需要通过jni。但是，网上有很多教程向您展示如何做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:08:14.140

我曾在 windows 环境中使用 eclipse 尝试过 cocos2d-x，但最终决定放弃它，因为它缺乏调试支持和适当的 IDE 集成，这在 Java/Android/eclipse/ADT 中非常好。我推荐 cocos2d-x 的唯一方法是，如果您正在为 IOS 开发然后移植到 Android，但我不了解 UIKit 和 SNS。

# qt - 通过拖放移动 QLabel

> ID：12002191
> 
> 赞同：2
> 
> 时间：2012-08-17T08:16:52.240
> 
> 标签：qt

如果我有一个`QLabel`显示图像：

```
QImage image("1.jpg");
ui->label_1->setGeometry(QRect(0,0,0,0));
ui->label_1->setpixmap(QPixmap("1.jpg",0,QT::Autocolor));
ui->label_1->adjustsize(); 
```

我怎样才能拖放它？是否可以移动标签？

# qt - 在我的应用程序被终止之前如何通知我？

> ID：12002195
> 
> 赞同：1
> 
> 时间：2012-08-17T08:17:01.667
> 
> 标签：qt

我希望在我的应用程序被终止时得到通知并能够处理它。

我不想重新实现`QWidget::closeEvent()`或响应`signal` `QCoreApplication::aboutToQuit()`，我更想知道我的应用程序何时在外部终止并被告知以便我可以停止它。

# javascript - jqPlot - x 坐标、时间戳和日期

> ID：12002197
> 
> 赞同：0
> 
> 时间：2012-08-17T08:17:06.417
> 
> 标签：javascript, jquery, jqplot

我正在使用`jqPlot`with`DateAxisRenderer`来显示各种时间函数的图表。我想让图表与应用程序的其他模块进行通信，这些模块也处理时间数据（但不处理图表）。为此，所有模块将写入和读取相同的`time`变量（因此它们始终显示同一时刻的数据）。如果任何模块设置了变量，其他模块必须做出相应的反应。

**示例**：用户以可读格式输入时间，导致自定义刻度显示在图形中正确`x`坐标上的原因。

但是，要实现这一点，我需要在三种时间表示之间进行转换

*   任何人类可读的格式（或`Date`作为其封装的 javascript 对象）
*   `jqPlot`内部用于表示时间的时间戳
*   `x`图中的坐标（以像素为单位）

我知道它`DateAxisRenderer`可以以可自定义的人类可读格式显示时间戳，就像它在渲染`x-axis`. 我知道点击图表后，我得到了事件信息中的时间戳（连同`x`坐标）。但我的问题是：如何***明确地进行这些转换？***.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T01:25:37.853

## 日期 <--> 人类可读的格式

[Datejs](http://www.datejs.com/)很适合这个。例如：

```
var date = Date.parse('February 20th 1973');
var date = Date.parse('next thursday');

// Now let's convert a date into a human-readable string
var dateString = date.toString('dddd, MMMM d, yyyy'); 
```

## 日期 <--> jqPlot 时间戳

jqPlot 内部使用的时间戳只是[Unix 时间](http://en.wikipedia.org/wiki/Unix_time)（以毫秒为单位）：

```
var exampleTimestamp = 1345671839000;
var date = new Date(exampleTimestamp);

// Now let's convert a date into a timestamp
var jqPlotTimestamp = date.getTime(); 
```

## 日期 <--> x 坐标（以像素为单位）

假设您的 x 轴是线性的，您可以像这样确定 x 轴上一个点的值（填写您自己的值）：

```
var myPlot = jqplot(...);
var xAxis = myPlot.axes.xaxis;

var MARGIN_LEFT = 15; // Pixels from [left edge of chart --> minimum X value]

var pixelRange = 300; // Pixels from [min X value --> max X value]
var timeRange = xAxis.max - xAxis.min;

var time; // This will be our answer in the chart's units
time = xAxis.min + timeRange * (xCoordinate - MARGIN_LEFT) / pixelRange;

var timeInMillis = ... ; // Convert the X-Axis unit of time into millis
var date = new Date(timeInMillis);

// Now let's convert a date into an x coordinate
timeInMillis = date.getTime();
time = ...; // Convert millis into X-Axis unit of time
var x = MARGIN_LEFT + pixelRange * (time - xAxis.min) / timeRange; 
```

在撰写本文时，这里是轴名称列表：

```
['yMidAxis', 'xaxis', 'yaxis', 'x2axis', 'y2axis', 'y3axis', 'y4axis', 'y5axis', 'y6axis', 'y7axis', 'y8axis', 'y9axis']; 
```

# javascript - jQuery插件开发保留元素原始状态

> ID：12002200
> 
> 赞同：0
> 
> 时间：2012-08-17T08:17:14.463
> 
> 标签：javascript, jquery, jquery-plugins

我正在开发一个 jQuery 插件来创建模态窗口，所以，现在，我想在隐藏元素后恢复元素的原始状态。

有人可以帮助我吗？

谢谢！

- - 更新 - -

对不起，

我想在显示时将元素html存储在某个地方，然后在隐藏时将存储的数据放回去。

这是我的插件：

```
(function ($) { // v2ui_modal
    var methods = {
        show: function (options) {
            var _this = this;

            var defaults = {
                showOverlay: true,
                persistentContent: true
            };

            var options = $.extend(defaults, options);

            if (!_this.attr('id')) {
                _this.attr('id', 'v2ui-id_' + Math.random().toString().replace('.', ''));
            }

            if (options.showOverlay) {
                $('<div />', { // overlay
                    id: 'v2-ui-plugin-modal-overlay-' + this.attr('id'),
                    css: {
                        zIndex: ($.topZIndex() + 1),
                        display: 'none',
                        position: 'fixed',
                        width: '100%',
                        height: '100%',
                        top: 0,
                        left: 0
                    }
                }).addClass('v2-ui').addClass('plugin').addClass('overlay').appendTo('body');
            };

            _this.css({
                zIndex: ($.topZIndex() + 2),
                position: 'fixed'
            });

            _this.center();

            $('#v2-ui-plugin-modal-overlay-' + _this.attr('id')).fadeIn(function () {
                _this.fadeIn();
            });
        },

        hide: function () {
            var _this = this;

            _this.fadeOut();

            $('#v2-ui-plugin-modal-overlay-' + _this.attr('id')).fadeOut(function () {
                $('#v2-ui-plugin-modal-overlay-' + _this.attr('id')).remove();
                if ((_this.attr('id')).substr(0, 8) == 'v2ui-id_') {
                    _this.removeAttr('id');
                };
            });
        }
    };

    jQuery.fn.v2ui_modal = function (methodOrOptions) {
        if (methods[methodOrOptions]) {
            methods[methodOrOptions].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof methodOrOptions === 'object' || !methodOrOptions) {
            methods.show.apply(this, arguments);
        };
    };
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:48:34.427

你可以看看[`jQuery.detach`](http://api.jquery.com/detach/)。

> .detach() 方法与 .remove() 方法相同，不同之处在于 .detach() 保留与已删除元素关联的所有 jQuery 数据。当移除的元素稍后要重新插入到 DOM 中时，此方法很有用。

但是我很难完全理解您的问题，所以如果我的回答不符合您的问题，我深表歉意。

# .net - 在部分类中覆盖 Equals

> ID：12002205
> 
> 赞同：2
> 
> 时间：2012-08-17T08:17:41.607
> 
> 标签：.net, entity-framework, partial-classes

我正在使用 EF 4.3。为了扩展实体类的功能，我创建了部分类。这主要工作正常。

该框架创建一对多的导航属性作为哈希集，我需要更改其中的一些，因为它们包含用户在站点访问期间操作的项目列表。

理想情况下，我想做的是提供对 Equals 和 HashCode 的覆盖，但是代码不会编译，而是给出消息“找不到合适的方法来覆盖”。

这个问题有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:57:45.707

您的问题中没有太多代码可以从 :) 开始，但通常要添加自定义 equlity 成员，您将创建部分类的第二部分并让它实现[`IEquatable<T>`接口](http://msdn.microsoft.com/en-us/library/ms131187.aspx)。

如果这样做，还建议覆盖非泛型相等成员`Equals()`和`GetHashCode()`of `Object`，您应该始终能够覆盖它们。也许异常是由您使用“HashCode”而不是“GetHashCode”引起的。

一个简单的例子：

```
public partial class EntityClass : IEquatable<EntityClass>
{
    public bool Equals(EntityClass other)
    {
        return this.Id == other.Id;
    }

    public override bool Equals(object other)
    {
        return (other is EntityClass)
            && this.Id == ((EntityClass)other).Id;
    }

    public override int GetHashCode()
    {
        return this.Id.GetHashCode();
    }
} 
```

# java - 无法使用套接字通信从 PC 和手机发送消息

> ID：12002206
> 
> 赞同：0
> 
> 时间：2012-08-17T08:17:40.597
> 
> 标签：java, android, sockets

这是我的任务：使用套接字通信连接 PC 和手机。我在发送我在套接字连接中键入的消息时遇到问题。我使用 Eclipse 将程序从 PC 运行到手机。我在文本框中输入我的文本。当我按下发送按钮时，我无法发送文本并让它反映在手机上。程序代码不再有错误。这是我得到的代码链接：[http ://android-er.blogspot.sg/2011/01/simple-communication-using.html](http://android-er.blogspot.sg/2011/01/simple-communication-using.html)

这些是我没有错误的代码：

```
public class AndroidClient extends Activity {

EditText textOut;
TextView textIn;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.socket_client);

    textOut = (EditText)findViewById(R.id.textout);
    Button buttonSend = (Button)findViewById(R.id.send);
    textIn = (TextView)findViewById(R.id.textin);
    buttonSend.setOnClickListener(buttonSendOnClickListener);
}

Button.OnClickListener buttonSendOnClickListener
= new Button.OnClickListener(){

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        Socket socket = null;
        DataOutputStream dataOutputStream = null;
        DataInputStream dataInputStream = null;

        try {
            socket = new Socket("10.217.137.207", 8888);
            dataOutputStream = new DataOutputStream(socket.getOutputStream());
            dataInputStream = new DataInputStream(socket.getInputStream());
            dataOutputStream.writeUTF(textOut.getText().toString());
            textIn.setText(dataInputStream.readUTF());
        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        finally{
            if (socket != null){
                try {
                    socket.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

            if (dataOutputStream != null){
                try {
                    dataOutputStream.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

            if (dataInputStream != null){
                try {
                    dataInputStream.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    }};
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:40:17.780

从代码看来，您正试图打开从您的设备到具有给定 IP [10.217.137.207] 的外部设备的套接字连接。

仅当您使用正在测试它的设备的 ip 时，此代码才应该有效。尝试使用 127.0.0.1

```
dataInputStream.readUTF(); 
```

当且仅当它是从具有 IP [10.217.137.207] 的设备写入时才会返回任何内容。

如果您使用的是设备的 IP 地址，那么

```
dataInputStream.readUTF(); 
```

将返回您所写的所有内容

```
dataOutputStream.writeUTF() 
```

我相信一定很清楚。

# c# - 显示 datagridview 的水平条以溢出单元格内容

> ID：12002207
> 
> 赞同：0
> 
> 时间：2012-08-17T08:17:43.457
> 
> 标签：c#, .net, winforms, datagridview

![在此处输入图像描述](../Images/69498153e7458c6238b628dbce6c218f.png)

当单元格太小而无法包含字符串时，我的 datagridview 会缩写字符串的其余部分。

如何制作以显示水平滚动条以便查看内容？

datagridview 停靠（填充）到表单，并且有一个带有填充属性的列标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:23:17.037

```
<asp:TemplateField HeaderText="Body">
<ItemTemplate>
 <div style="overflow:auto; height: 100px;">
  <asp:Label ID="Label1" runat="server" Text='<%# Bind("Body")%>'></asp:Label>
 </div>
</ItemTemplate>
</asp:TemplateField> 
```

在您的 gridview 中以这种方式使用以设置溢出数据。这显示了滚动条。

# magento - Magento 1.5。未捕获的异常“Mage_Core_Model_Session_Exception”

> ID：12002208
> 
> 赞同：1
> 
> 时间：2012-08-17T08:17:46.660
> 
> 标签：magento, magento-1.5

我在 Magento 1.5.0.1 上偶尔收到以下错误，当它发生时，客户报告他们无法将商品添加到购物车。在清除他们的浏览器缓存并因此建立新会话时，没有问题。

关于正在发生的事情以及如何解决的任何想法？

```
[17-Aug-2012 04:37:09 UTC] PHP Fatal error:  Uncaught exception 'Mage_Core_Model_Session_Exception' in        /home/magento/public_html/app/code/core/Mage/Core/Model/Session/Abstract/Varien.php:341
Stack trace:
       #0 /home/magento/public_html/app/code/core/Mage/Core/Model/Session/Abstract/Varien.php(166): Mage_Core_Model_Session_Abstract_Varien->validate()
       #1 /home/magento/public_html/app/code/core/Mage/Core/Model/Session/Abstract.php(84): Mage_Core_Model_Session_Abstract_Varien->init('checkout', NULL)
       #2 /home/magento/public_html/app/code/core/Mage/Checkout/Model/Session.php(38): Mage_Core_Model_Session_Abstract->init('checkout')
       #3 /home/magento/public_html/app/code/core/Mage/Core/Model/Config.php(1254): Mage_Checkout_Model_Session->__construct(Array)
       #4 /home/magento/public_html/app/Mage.php(432): Mage_Core_Model_Config->getModelInstance('checkout/sessio...', Array)
       #5 /home/magento/public_html/app/Mage.php(446): Mage::getModel('checkout/sessio...', Array)
       #6 /home/magento/public_html/app/code/core/Mage/Checkout/Model/Cart.php(54): Mage::getSingleton(' in /home/magento/public_html/app/code/core/Mage/Core/Model/Session/Abstract/Varien.php on line 341 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T03:49:48.667

找到了原因。幸运的`Mage_Core_Model_Session_Exception`是，在会话验证失败时抛出的 Magento 代码中只出现一次，这一切都归结为 HTTP 用户代理验证器，所以我只是关闭了所有验证。不知道为什么用户代理会在会话期间更改，因为这些不是黑客尝试和真正的客户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:35:25.107

您最近是否删除了交易/会话？可能是 Magento 试图从不存在的数据库中读取会话/事务

# gridview - 如何在 WinRT-Apps 中检测和处理非常不同的屏幕尺寸？

> ID：12002213
> 
> 赞同：2
> 
> 时间：2012-08-17T08:18:09.460
> 
> 标签：gridview, windows-8, microsoft-metro, screen-resolution

我想知道检测（和处理）非常不同的屏幕尺寸的最佳方法是什么。

为什么这么问：我有一个带有 GridView（和不同项目）的 Metro (Win8 UI) 风格的应用程序，请参阅模型。对于每个类别，我选择了几个我在第一页显示的。如果屏幕尺寸（分辨率）很小（例如在平板电脑上），我只想在每个类别中显示 3-4 个项目。在大屏幕上，我大概可以显示 10 个项目。否则会有很多未使用的空白空间。（在详细页面上这没问题，因为我显示了所有项目，它会自动调整到更大的屏幕尺寸。）

这也是 Steven Sinofsky（微软）在他的[BlogPost](http://blogs.msdn.com/b/b8/archive/2012/03/21/scaling-to-different-screens.aspx)中所写的意图。

这是我的应用在小屏幕上的模型。

![小屏幕上的 Win8 RT 应用程序样机](../Images/90392ab1acdb399f41143b59656342ea.png)

感谢您的提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:25:52.223

您可能只需在页面加载时检查 和 的值，`this.Frame.ActualWidth`以`this.Frame.ActualHeight`大致计算出您要显示的项目数量。但是请注意缩放 - 这可能会使您的计算更加复杂，但不会过于复杂。由于您可能应该知道网格视图中元素的大小，因此您应该能够计算出有多少元素适合您的屏幕区域。那么这只是将适当数量的项目放入您的视图模型然后将其绑定到视图的情况。

# ruby - 强制链接绕过 ssl (ruby)

> ID：12002226
> 
> 赞同：0
> 
> 时间：2012-08-17T08:19:01.570
> 
> 标签：ruby, http, https

我已经通过 .htaccess 强制网站使用 https://

现在我需要强制这些链接绕过 ssl，以便它们像 sub.domain.com 一样加载 -

现在代码如下所示，但是当我单击链接时，它会以 https:// 打开

```
<%  link = "" %>
<% if user.external_link.present? %>
<% link = user.external_link %>
<% else %>
<% link =  root_url(:subdomain => user.subdomain, :port => 80) %>
<% end %>
<%= link_to link, :target => "_blank" do %> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:01:08.323

希望[这个链接](https://stackoverflow.com/questions/3993651/rails-3-ssl-routing-redirects-from-https-to-http)可以帮助。[我不确定 link_to 的选项有 :protocal，虽然我在这里](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html)找不到

# java - 直接从 Spring @Service Bean 使用 EntityManager 有什么缺点吗？

> ID：12002232
> 
> 赞同：2
> 
> 时间：2012-08-17T08:19:41.437
> 
> 标签：java, spring

直接从 Spring Service bean 而不是 @Repository bean 使用实体管理器有什么缺点吗

```
@Service
public class SomeService {
   @PersistenceContext EntityManager em; 

   @Transactional(....)
   public void doSomething(....)
   {
      // use entity manager here 
   } 
} 
```

对比

```
@Repository
public class SomeRepository {
   @PersistenceContext EntityManager em; 

   public void doSomething(....)
   {
      // use entity manager here 
   } 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T08:55:21.080

这是永恒的争论之一，但归结为您希望坚持的风格。在 JEE6 世界中，问题的表述是：“我们应该制作单独的 EJB 来充当 DAO，还是只在我们的服务中使用 EntityManager”）。我喜欢 Adam Bien 的“Real World Java EE Patterns”中的经验法则：如果您发现自己创建的服务只是委托给存储库，那么可以省去一些复杂性，减少中间人，只使用服务中的 EntityManager。有人可能会争辩说 EntityManager 是一种存储库。

至于可能的疑问：

*   EM 永远不会抛出 SQLException（或任何已检查的异常），因此您可能不需要 @Repository 为您提供的翻译，
*   如果您想重用其他地方的功能，只需使用该服务，它与存储库一样可注入，

风格很重要，总是将 daos 与服务分开的人当然有道理。但是你不能真正称一种风格为“正确”或“不正确”，它更多的是在“我喜欢它”或“我不喜欢它”的范围内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T08:35:09.353

是的，有：

*   它更清晰地分离了关注点（它从服务类中隐藏了数据库访问的实现）
*   如果您有其他服务需要与存储库类似的功能，则可以重用它。
*   `@Repository`用或`@Service`明确定义应用程序中的角色注释类。如果您想使用方面，这很方便。
*   在 Spring 中，如果您的类带有注释，`@Repository`则它有资格进行 DataAccessException 转换（转换`SQLException`为`DataAccessException`）。

# linux - tar 提取最新文件

> ID：12002237
> 
> 赞同：0
> 
> 时间：2012-08-17T08:19:58.817
> 
> 标签：linux, bash, shell

使用 bash，我有 /home/user/logs/ 的目录

8 月 2 日 15:34 backup.20120802.tar.gz

8 月 3 日 00:26 backup.20120803.tar.gz

8 月 4 日 00:25 backup.20120804.tar.gz

8 月 15 日 06:39 backup.20120816.tar.gz

这每隔几天就会更新一次，但是如果出现问题，我希望它自动恢复最近的备份，我怎样才能使用 bash 只提取最近的备份？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:28:55.470

```
ls -t1 /home/user/logs/ | head -1 
```

在 /home/user/logs/ 中为您提供最新修改的文​​件。所以你可以这样做：

```
cd /dir/to/extract
tar -xzf "$(ls -t1 /home/user/logs/ | head -1)" 
```

**注意：**
这假设 /home/user/logs/ 是平面的并且只包含“*.tar.gz”文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:46:40.860

如果时间戳可能并不总是可靠的，请尝试按日期排序。

```
ls -1 /home/user/logs/backup.*.tar.gz | sort -t . -k2rn | head -1 
```

理想情况下，您不应该解析来自 的输出`ls`，但如果只有与通配符匹配的常规命名文件，这可能是最简单的解决方案；`sort`无论如何，都需要面向行的输入，因此该任务更多地涉及完全任意文件名的一般情况。（这对您来说可能没有意义，但就 Unix 而言，拥有一个名为 的文件是完全可以的`backup.20120816.tar.gz(newline)backup.20380401.tar.gz`。）

# php - php if else 替代语法

> ID：12002238
> 
> 赞同：1
> 
> 时间：2012-08-17T08:20:08.100
> 
> 标签：php

是否可以在接近此的地方编写 if 语法：

```
if (function($value)) else {echo "Error Message";} 
```

如果函数（$value），什么都不需要发生。该函数返回true，但如果不是，我需要错误消息，我不能把它放在函数中。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T08:21:10.440

如果不需要发生任何事情，您根本不需要包含案例。因此，您正在寻找的是：

```
if (!function($value)) {
    echo "Error Message";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T08:22:14.993

这是一个更好的方法：

```
if (!function($value)){echo "Error Message";} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T08:21:25.600

```
if (!function($value)) {
    echo "Error Message";
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T08:29:13.030

您实际上可以通过插入一个空语句来做到这一点：

```
if (function($value)) ; else {echo "Error Message";} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T08:21:19.953

您可以使用三元组来执行此操作：

```
echo (function($value)? "" : "Error Message"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T08:26:01.850

```
return (function($value)? true : "Error Message"); 
```

在有效时返回 true else 将返回一个字符串，该字符串可以在外部回显。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-17T08:48:52.217

最好的办法：

```
if (function($value)==0)
{
echo "Error Message";
}else{

//Execution code
} 
```

# maven - 在 Maven 中合并配置值

> ID：12002242
> 
> 赞同：1
> 
> 时间：2012-08-17T08:20:16.617
> 
> 标签：maven, pom.xml

我有一个 Maven 子模块，它需要将一个字符串附加到配置选项的现有值。父模块如下所示：

```
<!-- in parent -->
<plugin>
   ...
   <configuration>
       <someOption>A</someOption>
   </configuration>
   ...
</plugin> 
```

子模块需要附加一个字符串`someOption`，这样效果就好像子模块已经完成了

```
<!-- in child -->
<plugin>
   ...
   <configuration>
       <someOption>A B</someOption>
   </configuration>
   ...
</plugin> 
```

我已经查看了这些`combine.*`属性，但它们似乎都没有做我想要的。有没有办法做到这一点？是否可以`someOption`从孩子那里访问父母的价值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:41:27.843

我怀疑您将不得不退回到财产。

```
<!-- in parent -->
<project>
  ...
  <properties>
    <foo-plugin.config.someOption>A<foo-plugin.config.someOption>
  </properties>
  ...
  <build>
    ...
    <plugins>
      ...
      <plugin>
        ...
        <configuration>
          <someOption>${foo-plugin.config.someOption}</someOption>
        </configuration>
        ...
      </plugin>
      ...
    <plugins>
    ...
  </build>
  ...
</project> 
```

然后子根据父重新定义属性

```
<!-- in child -->
<project>
  ...
  <properties>
    <foo-plugin.config.someOption>${foo-plugin.config.someOption} B<foo-plugin.config.someOption>
  </properties>
  ...
</project> 
```

不理想，但我现在能看到的唯一解决方案

# c# - Internet Explorer 在 window.close() 上打开一个新的弹出窗口，然后关闭新打开的弹出窗口

> ID：12002243
> 
> 赞同：0
> 
> 时间：2012-08-17T08:20:18.710
> 
> 标签：c#, javascript, html, internet-explorer

我有一个弹出窗口，它基本上将文本字段输入用于在我的父表单/页面中的网格视图（asp）中输入，我回发回父级，以便反映弹出窗口中新添加的数据在父页面中。

虽然这个流程在 Chrome 或 firefox 中运行顺利，但当我在 IE 中使用相同的逻辑时，它会出现一个奇怪的问题，

为了解释这个问题，让我给你我的代码背景，这是我从父页面打开弹出窗口的方式：

```
 <asp:Button ID="AddBtn" runat="server" Visible="false" OnClientClick="javascript:OpenChildWindow();" Text="Add"/> 

   function OpenChildWindow()
    {
        //open a new dialog window
        var sFeatures="dialogHeight: 500px;";
        sFeatures += "dialogWidth: 800px;";
        sFeatures += "center: yes;";
        sFeatures += "edge: sunken;";
        sFeatures += "scroll: no;";
        sFeatures += "status: yes;";
        sFeatures += "resizeable: no;";
        var url = 'TransNewEntry.aspx?SomeValue=12345';

        entryWindow=window.showModalDialog(url, 'TransNewEntry', sFeatures);            

    } 
```

这是我在用户单击弹出窗口中的保存按钮后尝试关闭它的方式：

```
 protected void saveRow(object sender, EventArgs e)
    {
       {/*some code to insert/modify datarow*/
        }
        Response.Write("<script type='text/javascript'> window.open('','_self',''); window.close();</script>");
    } 
```

所以现在发生的事情是当我单击保存按钮（在弹出窗口中）而不是关闭当前窗口时，它会打开一个新窗口（与已打开的弹出窗口相同）并关闭新打开的窗口。

请注意，我使用了“window.open('','_self','');” 如果我只使用“window.close”，则在“window.close”之前 IE 会抛出一个关于我是否应该关闭新打开的弹出窗口的确认框，但无论如何它都会打开重复的弹出窗口。

# c# - UDP连接出错

> ID：12002244
> 
> 赞同：0
> 
> 时间：2012-08-17T08:20:22.467
> 
> 标签：c#

当我尝试通过单击表单右侧的“X”关闭应用程序时遇到问题我收到一条错误消息

> 由于线程存在或应用程序请求，I/O 操作已中止

我得到了这行代码：

```
newsocket.EndReceiveFrom(ar,ref tmp); 
```

这是我的代码示例：

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        int m;
        Socket newsocket;    
        EndPoint tmp;
        IPEndPoint sen = new IPEndPoint(IPAddress.Loopback, 5001);
        byte[] data = new byte[1024];
        byte[] buffer = new byte[1024];

        public Form1()
        { 
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e) 
        {
            CheckForIllegalCrossThreadCalls = false;
            IPEndPoint endpoint = new IPEndPoint(IPAddress.Loopback, 1235);
            newsocket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram,ProtocolType.Udp);
            newsocket.Bind(endpoint);
            tmp = (EndPoint)sen;
            newsocket.BeginReceiveFrom(data, 0, 40, SocketFlags.None,ref tmp, new AsyncCallback(ReadCallback), tmp);
            Thread thread = new Thread(new ThreadStart(this.threadtask));
            thread.Start();
        }

        protected void ReadCallback(IAsyncResult ar) 
        {
            newsocket.EndReceiveFrom(ar,ref tmp);
            send();
            newsocket.BeginReceiveFrom(data, 0, 40, SocketFlags.None, ref tmp, new AsyncCallback(ReadCallback), tmp);
        }

        private void send()
        {
            newsocket.BeginSendTo(buffer, 0, 7, SocketFlags.None, sen, newAsyncCallback(SendCallback), sen);
        }

        protected void SendCallback(IAsyncResult ar)
        {
            newsocket.EndSendTo(ar);
        }

        private void threadtask()
        {
            while (true)
            {
                cMicroLCCore.getDAC(m).Value = data[m];
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:32:43.833

您的

```
Thread thread = new Thread(new ThreadStart(this.threadtask));
thread.Start(); 
```

接收器线程在后台运行，我没有看到任何可以处理表单卸载和接收器线程正常关闭的代码。这就是您需要做的 - 当您关闭表单时停止您的线程（您需要将线程引用存储在您的类变量中）。

# php - 使用 PHP 进行多用户海量图片上传

> ID：12002246
> 
> 赞同：0
> 
> 时间：2012-08-17T08:20:25.980
> 
> 标签：php

我很快将建立一个完全基于图片上传的竞赛微型网站：为了参赛，用户需要上传图片。

我之前在 PHP MVC 框架上构建了一个类似的网站，该框架运行得非常好，直到比赛结束前几个小时，最后一分钟的输入导致服务器崩溃，导致网站无法访问. 在某些情况下，上传的文件非常大（普通用户扫描的图像，其中许多人不知道优化文件大小）。

我显然希望在这个新项目中尽我所能避免这个问题，并且希望获得有关如何构建一个在最后一分钟涌入时不会崩溃的强大网站的提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T08:27:31.333

这很难回答。你只需要弄清楚你的应用程序中的瓶颈到底在哪里，然后改进那个特定的部分。是网络服务器本身充斥着太多同时、长时间运行的连接吗？然后调整服务器以一次接受更少的连接，并以某种方式在前端解决它，使用不同类型的服务器，使用更强大的服务器或使用多个负载平衡的服务器。还是你正在做的任何后期处理？然后优化它以不同时处理数百张图像，而是使用队列工作系统或将处理工作外包给其他服务器。还是正在下载的图像数量？然后你可能想看看一个CDN。

再次，*分析*问题所在并寻找具体的解决方案。

# php - 如何更新codeigniter购物车中的多行

> ID：12002247
> 
> 赞同：0
> 
> 时间：2012-08-17T08:20:25.707
> 
> 标签：php, codeigniter

我正在使用 codeigniter 购物车来存储多行。这是一个预订系统网站。

这是我检索购物车的代码：

```
<?php if ($cart = $this->cart->contents()): ?>
<table class="booking">
  <tr>
    <td>#</td>
    <td>Room Type</td>
    <td>Check In</td>
    <td>Checkout</td>
    <td>Nights</td>
    <td align="right">Price/Night</td>
    <td width="10">Rooms</td>
    <td align="right">Amount</td>
    <td>Options</td>
  </tr>
  <?php $grand_total = 0; $i = 0; ?>
  <?php foreach ($cart as $item): ?>
  <tr bgcolor="#FFFFFF">
    <td><?php echo $i+1; ?></td>
    <td><?php echo $item['name']; ?></td>
    <td><?php echo $item['checkin']; ?></td>
    <td><?php echo $item['checkout']; ?></td>
    <td align="center"><?php echo $item['nights']; ?></td>
    <td align="right"><?php echo number_format($item['subtotal'],2); ?></td>
    <td><input type="text" name="booking<?php echo $item['id'] ?>" value="<?php echo $item['qty'] ?>" maxlength="3" size="1" style="text-align: right" /></td>
    <?php $amount = $item['subtotal'] * $item['qty']; ?>
    <?php $grand_total = $grand_total + $amount; ?>
    <td align="right"><?php echo number_format($amount,2) ?></td>
    <td><?php echo anchor('bookings/remove/'.$item['rowid'],'Cancel'); ?></td>
    <?php endforeach; ?>
  </tr>
  <tr>
    <td colspan="2"><b>Order Total: <?php echo number_format($grand_total,2); ?></b></td>
    <td colspan="7" align="right">
    <input type="button" value="Clear Cart" onclick="clear_cart()">
    <input type="button" value="Update Cart" onclick="update_cart()">
      <?php
        /*if(isset($_SESSION['sess_user_id']) || (trim($_SESSION['sess_user_id']) <> '')) {
            $location='booking_checkout.php';
        }else{
            $location='billing_info.php';
        }*/
      ?>
    <input type="button" value="Place Order" onclick="window.location='<?php //echo $location; ?>'"></td>
  </tr>
</table>
<?php endif; ?> 
```

该`clear_cart()`函数适用于以下代码：

```
<script>
function clear_cart() {
    var result = confirm('Are you sure want to clear all bookings?');

    if(result) {
        window.location = "http://localhost/reservation/bookings/remove/all";
    }else{
        return false; // cancel button
    }
}
</script> 
```

这是我的控制器中的删除功能：

```
function remove($rowid) {
    if ($rowid=="all"){
        $this->cart->destroy();
    }else{
        $data = array(
            'rowid'   => $rowid,
            'qty'     => 0
        );

        $this->cart->update($data);
    }

    redirect('bookings');
} 
```

但是如果我有超过 1 行，我不知道如何更新购物车。这里重要的是更新购物车中的房间数量（即数量）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:14:26.970

您可以使用多维数组

```
$data = array(
   array(
           'rowid'   => 'b99c',
           'qty'     => 3
        ),
   array(
           'rowid'   => 'xw82',
           'qty'     => 4
        ),
   array(
           'rowid'   => 'fh4k',
           'qty'     => 2
        )
);

$this->cart->update($data); 
```

# ruby-on-rails - Yaml，我这样做对吗？

> ID：12002249
> 
> 赞同：1
> 
> 时间：2012-08-17T08:20:40.693
> 
> 标签：ruby-on-rails, ruby, parsing, yaml

我有这样的yaml：

```
Numbers Five:
  noun:
    cuarenta y uno
    cuarenta y dos
    cuarenta y tres
    cuarenta y cuatro
    cuarenta y cinco
    cuarenta y seis
    cuarenta y siete
    cuarenta y ocho
    cuarenta y nueve 
```

这是写这个的正确方法吗？我这样说是因为我很难在完整的三个单词部分中抓住一个“名词”。或者我看到的整条线。相反，它会产生一个列出所有名词的散列，但没有必要将它们分开。

我应该使用逗号分隔单词，还是有办法在不向 yaml 添加任何内容的情况下正确解析这些单词？

我的解析结构：

```
YAML::load(file).each do |topic, word_types|
  word_types.map do |type, words|
    words.split(' ').map do |word|
    #            ^ This is my ghetto way to do it, but would not work appropriately for a three word line. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:01:07.303

正如评论中所讨论的， csv 是最简单的方法。仍然存在一个问题：那么 yaml 是存储数据的最佳格式吗？:)

# .htaccess - 如何使用 .htaccess 在 PHP 中重写此 URL？

> ID：12002256
> 
> 赞同：-3
> 
> 时间：2012-08-17T08:21:21.190
> 
> 标签：.htaccess, url, rewrite

我在一个网站上工作。

在这个网站上，porfile URL 目前是这样的：

[http://eprofile.co/eprofile.php?user=degroundshaker](http://eprofile.co/eprofile.php?user=degroundshaker)

我想将此 URL 重写为：

[http://eprofile.co/degroundshaker](http://eprofile.co/degroundshaker)

这是插件域，因此它的文件位于我的 cPanel 中名为“eprofile.co”的文件夹下，并且有一个 .htaccess 文件。

所以，我需要解决方案，请让我知道我需要添加什么规则以及 .htaccess 中的完整格式应该是什么

我是.htaccess 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:16:46.203

尝试将其放入文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]*)$ /eprofile.php?user=$1 [L] 
```

然后你需要改变你所有的个人资料链接，看起来像这样：

```
http://eprofile.co/eprofile.php?user=degroundshaker 
```

看起来像这样：

```
http://eprofile.co/degroundshaker 
```

* * *

编辑：

或者，您可以这样做：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/eprofile.php
RewriteRule ^([^/]*)$ /eprofile.php?user=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:27:37.390

尝试这个：

```
RewriteEngine On
RewriteRule ^([^/]*)$ /eprofile.php?user=$1 [L] 
```

# sql-server-2008 - 针对特定查找优化的索引

> ID：12002259
> 
> 赞同：1
> 
> 时间：2012-08-17T08:21:44.820
> 
> 标签：sql-server-2008, query-optimization, indexing

我有一个表（它可能会变大，大约数百万行），我经常在上面执行查询`SELECT * from table WHERE somefield = 20`，我希望这个查询能够快速运行。在任何时候，我都希望这个查询在可能的数百万中最多返回 10 行，对于这个特定的值 20（不保证任何其他值）。索引这个的正确方法是什么？仅在某个字段上放置索引并确保统计信息大致是最新的就足够了吗？或者还有其他我可以尝试优化的技巧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:25:38.337

> 仅在某个字段上放置索引并确保统计信息大致是最新的就足够了吗？

是的，很简单。确保 somefield 是正确的类型（即 int）。如果 somefield 需要包含文本，你可以做更多的事情，否则一个普通的索引就可以了。

如果您不需要不使用返回的每个字段（您可能不需要某个字段，因为您已经知道它是什么），那么您可以获得小幅增加（我的意思是*small ）。*`SELECT *`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T09:15:19.597

**此查询的**理想索引将是具有键列的索引`somefield`并包含表中所有其他列的列（通过使索引聚集或带有`INCLUDE`选项的 NCI）。

这将允许直接查找值并避免需要书签查找。

但是包含所有这些列的 NCI 的维护开销会影响数据修改操作，您可能更喜欢在不同键列上定义的 CI 以使其他查询受益或无论如何避免碎片

因此，出于这个原因，您可能更喜欢`somefield`单独定义 NCI 并使用 10 个书签查找。这是一种平衡行为。

**编辑。**实际上，如果您**只**对优化查询感兴趣，`somefield = 20`那么您可以在该值上创建一个[过滤索引](http://technet.microsoft.com/en-us/library/cc280372.aspx)。然后我可能会`include`在该索引定义中的所有列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:26:20.040

是的，您想在某个字段上添加索引。

如果您不进行其他查询，那么您可能希望将其设为聚集索引，但如果没有上下文，则很难得出结论。

# java - 在 JPA @GeneratedValue 列中手动指定主键的值

> ID：12002260
> 
> 赞同：33
> 
> 时间：2012-08-17T08:21:47.483
> 
> 标签：java, mysql, jpa, orm, eclipselink

我有一个实体，它有一个主键/id 字段，如下所示：

```
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Long id; 
```

这很好用。我正在使用 EclipseLink 创建 DDL-Schema，并且该列已正确创建，如下所示：

```
`id` bigint(20) NOT NULL AUTO_INCREMENT 
```

但是，我有几个实体，我确实想自己指定 PK（这是​​一个将数据从旧数据库传输到我们正在构建的新数据库的小应用程序）。如果我为 POJO 指定 ID（使用`setId(Long id)`）并将其持久化，EclipseLink*不会*保存它（即保存记录，但 id 是由 eclipseLink 自动生成的）。

**有没有办法手动指定具有 @GeneratedValue 的列的值？**

这里有一些关于这个问题的想法：

我试图通过根本不使用@GeneratedValue 来解决该问题，而只是手动将列定义为AUTO_INCREMENTed。*然而，这迫使我总是*手动提供一个 ID ，因为 EclipseLink 验证主键（因此它可能不是 null、零或负数）。异常消息显示我应该指定 eclipselink.id_validation，但这似乎没有任何区别（我注释`@PrimaryKey(validation = IdValidation.NONE)`但仍然得到相同的消息）。

**澄清一下：**我使用 EclipseLink (2.4.0) 作为持久性提供程序，我无法摆脱它（项目的大部分依赖于 eclipselink 特定的查询提示、注释和类）。

* * *

编辑（回应答案）：

**自定义排序：**我尝试实现自己的排序。我尝试继承 DefaultSequence，但 EclipseLink 会告诉我`Internal Exception: org.eclipse.persistence.platform.database.MySQLPlatform could not be found`。但我检查过：该类在类路径上。

所以我将另一个类 NativeSequence 子类化：

```
public class MyNativeSequence extends NativeSequence {

    public MyNativeSequence() {
        super();
    }

    public MyNativeSequence(final String name) {
        super(name);
    }

    @Override
    public boolean shouldAlwaysOverrideExistingValue() {
        return false;
    }

    @Override
    public boolean shouldAlwaysOverrideExistingValue(final String seqName) {
        return false;
    }

} 
```

但是，我得到的是以下内容：

```
javax.persistence.RollbackException: Exception [EclipseLink-7197] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Null or zero primary key encountered in unit of work clone [de.dfv.datenbank.domain.Mitarbeiter[ id=null ]], primary key [null]. Set descriptors IdValidation or the "eclipselink.id-validation" property.
    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commitInternal(EntityTransactionImpl.java:102)
    ...
Caused by: Exception [EclipseLink-7197] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Null or zero primary key encountered in unit of work clone [de.dfv.datenbank.domain.Mitarbeiter[ id=null ]], primary key [null]. Set descriptors IdValidation or the "eclipselink.id-validation" property.
    at org.eclipse.persistence.exceptions.ValidationException.nullPrimaryKeyInUnitOfWorkClone(ValidationException.java:1451)
    ... 
```

（为清楚起见缩短了堆栈跟踪）。这与我之前收到的消息相同。我不应该继承 NativeSequence 吗？如果是这样，我不知道为 Sequence 或 StandardSequence 中的抽象方法实现什么。

还可能值得注意的是，简单地子类化（不覆盖任何方法）该类按预期工作。但是，返回 false`shouldAlwaysOverrideExistingValue(...)`根本不会生成单个值（我单步执行了程序并且`getGeneratedValue()`没有被调用一次）。

此外，当我在事务中插入某种类型的 8 个实体时，它会在数据库中产生 11 条记录（到底是什么？！）。

**编辑（2012-09-01）：**我仍然没有解决问题的方法，实施我自己的序列并没有解决它。我需要的是一种能够不显式设置 Id（因此它将自动生成）并且能够显式设置 Id（因此它将用于在数据库中创建记录）的方法。

我尝试自己将列定义为 auto_increment 并省略 @GeneratedValue，但是验证将启动并且不允许我保存这样的实体。如果我指定一个值 != 0 和 != 零，mysql 会抱怨主键重复。

我已经没有想法和选择可以尝试了。任何？（开始赏金）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T13:25:27.303

这适用于 eclipselink。它将为序列创建一个单独的表，但这不应该造成问题。

```
@Id
@GeneratedValue(strategy=GenerationType.AUTO)
@Column(name="id", insertable=true, updatable=true, unique=true, nullable=false)
private Long id; 
```

GenerationType.AUTO 将选择理想的生成策略。由于该字段被指定为可插入和可更新，因此将使用 TABLE 生成策略。这意味着 eclipselink 将生成另一个保存当前序列值的表并生成序列本身，而不是将其委托给数据库。由于该列被声明为可插入的，如果持久化时 id 为空，eclipselink 将生成 id。否则将使用现有的 id。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-04T14:04:13.250

如果您使用 TABLE 排序，则 EclipseLink 将允许您覆盖该值（如果您的数据库支持，则为 SEQUENCE，MySQL 不支持）。

对于 IDENTITY，我什至不确定 MySQL 是否允许您提供自己的 ID，您可能需要验证这一点。一般来说，我永远不会推荐使用 IDENTITY，因为它不支持预分配。

是否允许 IDENTITY 提供 ID 存在一些问题。一是需要根据 id 值生成两个不同的插入 SQL，至于 IDENTITY id 根本不能在插入中。您可能希望记录一个错误以让 IDENTITY 支持用户提供 ID。

您应该仍然可以使用您自己的 Sequence 子类，或者可能是 MySQLPlatform 子类。您将使用“eclipselink.target-database”持久性单元属性设置您的 MySQLPlatform 子类。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-06T20:01:25.190

针对您的问题的以数据库为中心的解决方案：

1.  在表中创建一个可以为空的辅助列。它将保存您手动分配的 ID：

    ```
    CREATE TABLE `test_table`
    (
      `id` bigint(20) NOT NULL AUTO_INCREMENT,
      `manual_id` bigint(20) NULL,
      `some_other_field` varchar(200) NOT NULL,
      PRIMARY KEY(id)
    ); 
    ```

2.  将此列映射到实体中的普通字段：

    ```
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    @Column(name="manual_id")
    private Integer manualId; 
    ```

3.  如果表 ID 不为空，则创建一个触发器，将表 ID 设置为手动分配的 ID：

    ```
    DELIMITER //
    CREATE TRIGGER `test_table_bi` BEFORE INSERT ON `test_table`
      FOR EACH ROW 
      BEGIN
        IF NEW.`manual_id` IS NOT NULL THEN 
          SET NEW.`id` = NEW.`manual_id`;
        END IF;
    END;//
    DELIMITER; 
    ```

4.  `manualId`当您需要分配自定义 ID 时，请始终使用。触发器将为您施展魔法：

    ```
    testEntiy.setManualId(300);
    entityManager.persist(testEntity); 
    ```

5.  在数据库导入阶段之后，简单地删除触发器、辅助列和它的映射。

    ```
    DROP TRIGGER `test_table_bi`;
    ALTER TABLE `test_table` DROP COLUMN `manual_id`; 
    ```

* * *

**警告**

如果手动指定一个大于当前`AUTO_INCREMENT`值的id，下一个生成的`id`会跳转到手动分配的id的值加1，例如：

```
INSERT INTO `test_table` (manual_id, some_other_field) VALUES (50, 'Something');
INSERT INTO `test_table` (manual_id, some_other_field) VALUES (NULL, 'Something else');
INSERT INTO `test_table` (manual_id, some_other_field) VALUES (90, 'Something 2');
INSERT INTO `test_table` (manual_id, some_other_field) VALUES (NULL, 'Something else 2');
INSERT INTO `test_table` (manual_id, some_other_field) VALUES (40, 'Something 3');
INSERT INTO `test_table` (manual_id, some_other_field) VALUES (NULL, 'Something else 3'); 
```

将使用结果：

```
+----+-----------+------------------+
| id | manual_id | some_other_field |
+----+-----------+------------------+
| 50 |        50 | Something        |
| 51 |      NULL | Something else   |
| 90 |        90 | Something 2      |
| 91 |      NULL | Something else 2 |
| 40 |        40 | Something 3      |
| 92 |      NULL | Something else 3 |
+----+-----------+------------------+ 
```

为避免出现问题，强烈建议将`AUTO_INCREMENT`列设置为以大于以前数据库中所有现有 ID 的数字开头，例如：

```
ALTER TABLE `test_table` AUTO_INCREMENT = 100000; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-06T03:05:45.720

我可能遗漏了一些明显的东西，但为什么不使用相同的`@Table(name=".....")`注释定义另一个实体，具有相同的字段，但不生成 id 呢？然后，您可以将该实体用于将数据从旧数据库复制到新数据库的代码，并且具有生成 ID 的代码可用于需要生成 ID 的正常创建。

我不能告诉你它是否适用于 EclipseLink，但我们在这里使用的是 Hibernate，它似乎并不介意。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-13T15:06:40.920

将**GenerationType.SEQUENCE**与 PostgreSQL 和 EclipseLink 一起使用对我有用。

1) 改变

```
@GeneratedValue(strategy = GenerationType.IDENTITY) 
```

经过

```
@GeneratedValue(strategy=GenerationType.SEQUENCE, generator="step_id_seq")
@SequenceGenerator(name="step_id_seq", sequenceName="step_id_seq") 
```

现在，您可以使用 NativeQuery 调用序列：

```
return ((Vector<Integer>) em.createNativeQuery("select nextval('step_id_seq')::int").getSingleResult()).get(0); 
```

并在调用 EntityManager.persist() 方法之前将返回的 Id 设置为您的实体。

希望还不算太晚！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T08:36:49.190

**寻找自定义 ID 生成器** 

[http://blog.anorakgirl.co.uk/2009/01/custom-hibernate-sequence-generator-for-id-field/](http://blog.anorakgirl.co.uk/2009/01/custom-hibernate-sequence-generator-for-id-field/)

**也许这会有所帮助。**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-24T10:21:48.293

我的方式（MySql）是停用 GeneratedValue：

```
@Id
//@GeneratedValue
@Column(unique = true, nullable = false, columnDefinition ="BINARY(16)")
private UUID id; 
```

并添加实体：

```
@PrePersist
protected void onCreation() {
    if (id == null) setId(UUID.randomUUID());
} 
```

现在在我的代码中我可以做（例如在服务上）：

```
String clientID = env.getParam("id");
Entity entity = entityRepository.findFirstById(UUID.fromString(clientID));
//is new?
if (entity==null){
  entity = new Entity();
  entity.setId(UUID.fromString(clientID));//set cumstom ID here
}

Entity entityNew = entityRepository.save(entity); //insert
if (entityNew.getId().equals(entity.getId()) ){
  Log.i("OK!")
} 
```

# powershell - 在 PowerShell 中将二进制类型 SID 转换为 System.Security.Principal.SecurityIdentifier

> ID：12002261
> 
> 赞同：2
> 
> 时间：2012-08-17T08:22:00.397
> 
> 标签：powershell, binary, sid

我在这个网站上找到了一个链接，它显示了如何将 SID 转换为二进制类型。有人可以告诉我如何做相反的事情 - 将二进制类型转换回 SID。

这是提供从 SID 到二进制文件的脚本：

```
PS> $sid = New-Object System.Security.Principal.SecurityIdentifier ("S-1-5-21-105005785-2143699225-541720777-501") 
PS> $c = New-Object 'byte[]' $sid.BinaryLength 
PS> $sid.GetBinaryForm($c, 0) 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T08:45:42.577

要从字节数组转到 SID，请尝试：

```
(New-Object System.Security.Principal.SecurityIdentifier($c, 0)).toString() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-10T01:23:47.370

如果你想在 C# 中做同样的事情，那么你可以这样做（来自[https://stackoverflow.com/a/59258680/12508260](https://stackoverflow.com/a/59258680/12508260)）：

就我而言，byte[] 来自 ManagementEventWatcher：

```
ManagementBaseObject ne = e.NewEvent;
var securityIdentifier = System.Security.Principal.SecurityIdentifier((byte[])ne.Properties["SID"].Value, 0); 
```

您可以使用 securityIdentifier.ToString() 将 SID 作为字符串获取。

# oracle - 如何永久保存 SQL * Editor 的设置？

> ID：12002262
> 
> 赞同：1
> 
> 时间：2012-08-17T08:22:09.630
> 
> 标签：oracle, sqlplus

在 Oracle 10g 的默认编辑器 Sql * Editor 中，当我们更改 rownum、pagesize 等设置时。更改仅适用于当前会话。从 SQL * Editor 退出后，所有设置都将被删除。我们可以使更改成为永久性的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T08:25:09.333

假设您的意思是 SQL*Plus，那么是的 - 您可以使用 personal`login.sql`或 global`glogin.sql`以及配置语句列表。有关详细信息，请参阅[文档](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_two.htm#i1132910)；不确定我可以添加任何有用的内容。但请确保它们位于正确的位置：

> 站点配置文件脚本在 UNIX 中为 $ORACLE_HOME/sqlplus/admin/glogin.sql，在 Windows 中为 ORACLE_HOME\sqlplus\admin\glogin.sql。
> 
> 用户配置文件脚本通常命名为 login.sql。SQL*Plus 在您的当前目录中搜索用户配置文件，然后搜索您使用 SQLPATH 环境变量指定的目录。SQL*Plus 搜索这个以冒号分隔的目录列表及其子目录，按照它们的列出顺序。

此外，有时我有一组脚本需要类似的格式，但不一定是我在交互式会话中想要的（可能像报告一样）。对于那些我有一个带有相关设置的单独文件，我将它包含在每个脚本的顶部`@format.sql`，而不是必须将整个列表添加到每个脚本文件中。如果有必要，还可以更轻松地对所有这些进行更改。这在`login.sql`or之后运行，`glogin.sql`它有时需要扭转那些事情以恢复默认行为。

# java - 从Java中的String数组中删除未填充的值或空值

> ID：12002264
> 
> 赞同：11
> 
> 时间：2012-08-17T08:22:16.850
> 
> 标签：java, string

`tmp = [null, null, null, Mars, Saturn, Mars]`执行操作后， 我有以下字符串数组 - 字符串数组在`allSig[d3].split(" ");`哪里`allSig`。null 值是数组中的空值。现在我想删除空值。为此，我正在使用

`tmp[indexNumber] != null`不工作并且给予真实；取 null 作为值。即使我使用“null”作为字符串也不起作用。

这个怎么去掉。

```
public static String[] removeElements(String[] allElements) {
    String[] _localAllElements = new String[allElements.length];

    for (int i = 0; i < allElements.length; i++)
        if (allElements[i] != null)
            _localAllElements[i] = allElements[i];

    return _localAllElements;
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-13T09:27:41.183

> Simplest Solution :

```
 public static String[] clean(final String[] v) {
    List<String> list = new ArrayList<String>(Arrays.asList(v));
    list.removeAll(Collections.singleton(null));
    return list.toArray(new String[list.size()]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T08:37:27.283

```
public static String[] clean(final String[] v) {
  int r, w;
  final int n = r = w = v.length;
  while (r > 0) {
    final String s = v[--r];
    if (!s.equals("null")) {
      v[--w] = s;
    }
  }
  return Arrays.copyOfRange(v, w, n);
} 
```

或者

```
public static String[] clean(final String[] v) {
  int r, w, n = r = w = v.length;
  while (r > 0) {
    final String s = v[--r];
    if (!s.equals("null")) {
      v[--w] = s;
    }
  }
  final String[] c = new String[n -= w];
  System.arraycopy(v, w, c, 0, n);
  return c;
} 
```

工作正常...

```
public static void main(final String[] argv) {
  final String[] source = new String[] { "Mars", "null", "Saturn", "null", "Mars" };
  assert Arrays.equals(clean(source), new String[] { "Mars", "Saturn", "Mars" });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T08:30:08.320

您正在创建一个与原始数组大小相同的数组。所以它与原始数组相同，因为您复制非空值并且默认值为空。

做这个 ：

```
public static String[] removeElements(String[] allElements) {
    // 1 : count
    int n = 0;
    for (int i = 0; i < allElements.length; i++)
        if (allElements[i] != null) n++;

    // 2 : allocate new array
    String[] _localAllElements = new String[n];

    // 3 : copy not null elements
    int j = 0;
    for (int i = 0; i < allElements.length; i++)
        if (allElements[i] != null)
            _localAllElements[j++] = allElements[i];

    return _localAllElements;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-18T20:28:41.640

抽象@az 答案，这适用于任何类类型：

```
@SuppressWarnings("unchecked")
public static <T> T[] clean(T[] a) {
    List<T> list = new ArrayList<T>(Arrays.asList(a));
    list.removeAll(Collections.singleton(null));
    return list.toArray((T[]) Array.newInstance(a.getClass().getComponentType(), list.size()));
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T08:31:06.263

如果您希望数组仅包含非空值（即结果数组将是`["Mars", "Saturn", "Mars"]`），那么我会将其视为一个两部分的问题。

首先，您必须确定新数组的大小。通过检查，很容易看出它是`3`，但您需要对它们进行计数才能以编程方式计算。你可以这样说：

```
// Calculate the size for the new array.
int newSize = 0;
for (int i = 0; i < allElements.length; i++)    {
    if (allElements[i] != null) {
        newSize++;
    }
} 
```

其次，您需要创建一个具有该大小的新数组。然后您可以将所有非空元素放入您的新数组中，就像您在上面所做的那样。

```
// Populate the new array.
String[] _localAllElements = new String[newSize];
int newIndex = 0;
for (int i = 0; i < allElements.length; i++) {
    if (allElements[i] != null) {
        _localAllElements[newIndex] = allElements[i];
        newIndex++;
    }
}

// Return the new array.
return _localAllElements; 
```

您可以将这两个组件组合为`results`方法的新内容。[在此处](http://ideone.com/Ecg8X)查看完整的组合代码和实时示例输出。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T08:49:18.513

```
public static String[] removeElements(String[] allElements) {
    String[] _localAllElements = new String[allElements.length];
    int j = 0;
    for (int i = 0; i < allElements.length; i++)
        if ( allElements[i] != null && !allElements[i].equals(""))
            _localAllElements[j++] = allElements[i];

    return _localAllElements;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-19T18:02:59.637

这是一个非常古老的问题，但这个 Java 8+ 解决方案可能对某人有用：

`public static String[] removeElements(String[] allElements) { return Arrays.stream(allElements) .filter(Objects::nonNull) .collect(Collectors.toArray()); }` 或者，如果您像我一样喜欢可读代码并且不希望静态方法妨碍您，您可以使用静态导入进一步简化它：

`public static String[] removeElements(String[] allElements) { return stream(allElements).filter(Objects::nonNull).collect(toArray()); }`

# visual-studio-2010 - 如何在允许 XAML 缩进具有相同背景颜色的同时保留自定义字符串颜色？

> ID：12002268
> 
> 赞同：24
> 
> 时间：2012-08-17T08:22:43.213
> 
> 标签：visual-studio-2010, xaml, settings, background-color

刚刚重新安装了我想要回到 Visual Studio 2010 的深色主题的所有内容。

[我下载了 .vssettings](https://nprogramming.wordpress.com/2011/03/25/visual-studio-2010-resharper-6-color-theme/#comment-61)并导入了它们。一切看起来都很好，除了在 XAML 文件中缩进的棕色/黄色背景非常分散注意力：

![在此处输入图像描述](../Images/0e2760ca328aa0aae2072aba50cf14d1.png)

我检查了其他文件类型（.cs、.xml 等），我只看到 XAML 文件的这种行为，这让我相信我可以通过更改`Tools->Options->Environment->Fonts and Colors`.

但我找不到任何与我所看到的相匹配的东西。

该设置似乎受`Tools-->Options-->Environment-->Fonts`.

如何在允许 XAML 缩进与背景颜色相同的同时保留自定义字符串颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:07:08.083

您可能已经打开了“查看空白”选项。要通过菜单关闭此功能，您可以选择 Edit->Advanced->View White Space。默认的键盘快捷键是 Ctrl E、Ctrl W。

# google-maps - 谷歌地图中标记的实时更新？

> ID：12002269
> 
> 赞同：0
> 
> 时间：2012-08-17T08:22:46.960
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

这就是我的场景：我想根据用户的位置（使用 HTML5 地理位置）加载用户感兴趣的地点列表。但问题是，我有一个非常大的地点列表（我不想从我的数据库中加载所有地点），所以我到目前为止采用的解决方案只是为给定半径内的结果调用 mysql从用户，比方说，1公里。但是我想当用户拖动谷歌地图来探索地图时，逐步加载该区域的位置显示在地图上（基本上类似于foursquare所做的）。

有什么简单的方法可以实现吗？希望我对这个问题很清楚，在此先感谢，感谢您的帮助。

耶稣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:32:20.570

一般的做法：

1.  获取地图的边界并在数据库中查询当前可见的标记
    *   可选，向边界添加填充，以便在拖动地图时一些标记在视野之外可用
2.  显示结果标记
3.  移动地图时（bounds_changed 事件），查询您的数据库以获取其他标记
4.  处理返回的标记，仅添加新的标记（需要现有标记的数组以及确定现有标记和新下载的标记相同的方法）

搜索[Google Maps API v3 组](https://groups.google.com/group/google-maps-js-api-v3)（和[Google Maps API v2 组](https://groups.google.com/group/google-maps-api)，这些概念将适用，但代码示例可能不适用）应该会给您一些示例。

# git - 从 git bundle 恢复所有 refs

> ID：12002273
> 
> 赞同：3
> 
> 时间：2012-08-17T08:23:03.153
> 
> 标签：git, backup, bundle, remote-branch

如何从备份（git bundle）中恢复所有远程分支。

备份：

```
$ git bundle create /tmp/dp --all
$ git bundle list-heads /tmp/dp | head -n5
f37c9fc7f0ce121568f42fb01390b1862c67f308 refs/heads/master
f37c9fc7f0ce121568f42fb01390b1862c67f308 refs/heads/show
9aabc2a4fb18181fee6d0e7e03170a976b6ed49b refs/remotes/origin/NewLayers
aef1fc8a416413ee5b7f4370f255ab654b3407ee refs/remotes/origin/elevator
bc4c78f94a67857fbd7210ecc5ebcd80ec736b1a refs/remotes/origin/elevator_1
$ git bundle verify /tmp/dp | head -n1
/tmp/dp is okay
The bundle contains 65 refs 
```

恢复：

```
$ git clone /tmp/dp dp
Cloning into dp...
$ cd dp
$ git branch -a
* master
  remotes/origin/HEAD -> origin/master
  remotes/origin/master
  remotes/origin/show 
```

我试着取和拉，但没有帮助。

我还尝试使用“--mirror”进行克隆以创建裸仓库，然后从中克隆，但结果是一样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T10:00:51.037

问题是在克隆远程存储库的远程分支时没有跟踪（并且远程存储库的本地分支被跟踪为远程跟踪分支）。你没有在你的问题中说，但我猜想创建的（裸）存储库`--mirror`包含远程跟踪分支。

所以正确的做法是：

```
git clone --mirror /tmp/dp
mkdir dp
mv dp.git dp/.git
cd dp
git config core.bare false
git reset --hard 
```

（即使用--mirror 克隆并撤消隐含的--bare。）不漂亮但有效。或者使用 git-init 创建一个新的空仓库，并使用一行将 /tmp/dp 定义为远程

```
fetch = +refs/*:refs/* 
```

而不是正常的

```
fetch = +refs/heads/*:refs/remotes/remotename/* 
```

并从中获取。

# java - 谷歌应用引擎中的安全错误

> ID：12002279
> 
> 赞同：1
> 
> 时间：2012-08-17T08:23:31.533
> 
> 标签：java, google-app-engine, browser

我正在尝试在 google 应用程序引擎中创建应用程序我正在尝试在我的 google 应用程序中对用户进行身份验证。它运行良好，但是当我输入用户浏览器的用户名和密码时，会向我显示警告这可能不是您要查找的站点！

您尝试访问 www.onemoredemo.appspot.com，但实际上您访问了一个将自身标识为 *.appspot.com 的服务器。这可能是由于服务器上的错误配置或更严重的原因造成的。您网络上的攻击者可能试图让您访问 www.onemoredemo.appspot.com 的假冒（并且可能有害）版本。您无法继续，因为网站运营商已要求提高此域的安全性。

这是我的 servlet 代码

```
public class HelloWorld9Servlet extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
        OAuthConsumer consumer;
        OAuthProvider provider;
        provider=new DefaultOAuthProvider("https://accounts.google.com/o/oauth2/auth",)
        ;
         signer = new OAuthHmacSigner();

                 signer.clientSharedSecret = Constants.CONSUMER_SECRET;

    consumer=new DefaultOAuthConsumer(Constants.CLIENT_ID,Constants.CLIENT_SECRET);

    String redirect_uri="https://accounts.google.com/o/oauth2/auth?client_id="+
            Constants.CLIENT_ID+"&redirect_uri="
            +Constants.REDIRECT_URL+"&response_type="
            +Constants.response_type+"&scope="
            +Constants.SCOPE;

        resp.sendRedirect(redirect_uri);

    } 
```

为了将他重定向到谷歌身份验证页面，任何人都可以告诉我为什么会收到此警告以及如何删除此警告。你可以看到我在 onemoredemo.appspot.com 上托管这个应用程序的演示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:48:21.290

google 使用的通配符 https 证书涵盖`*.appspot.com`和`*.*.appspot.com`，但并非所有浏览器都接受这个。一些浏览器（尤其是 Firefox）抱怨使用`*.*.appspot.com`证书。

请参阅：[appengine 上的通配符子域通过 Firefox 上的 https](https://stackoverflow.com/questions/5722397/wildcard-subdomains-on-appengine-over-https-on-firefox)

您使用的是哪个浏览器？

**编辑：**

解决方案：

1.  将[ssl 与自定义域一起](https://developers.google.com/appengine/docs/ssl)使用，即`www.onemoredemo.com`
2.  仅使用域匹配`*.appspot.com`，即`onemoredemo.appspot.com`
3.  使用[文档中描述的备用主机名表示法](https://developers.google.com/appengine/docs/java/config/webxml#Secure_URLs)：替换`.`为`-dot-`，即使用`www-dot-onemoredemo.appspot.com`

# android - 翻页动画在 viewflipper 的视图之间翻转

> ID：12002284
> 
> 赞同：1
> 
> 时间：2012-08-17T08:23:55.120
> 
> 标签：android, animation, viewflipper, page-curl

我遇到了几个页面卷曲动画和 viewflippers 的例子。是否可以通过页面卷曲动画在 viewflipper 的子项之间导航。到目前为止，我应用于 viewflippers 的动画非常基本，例如滑入/滑出，我想知道是否可以使用页面卷曲动画完成/已经实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:30:40.063

这里有一个开源的 android 项目：[http](http://code.google.com/p/android-page-curl/) ://code.google.com/p/android-page-curl/ 。我在这里找到了另一个：[https](https://github.com/harism/android_page_curl/) ://github.com/harism/android_page_curl/ 。

但是，如果这是您所要求的，则没有本机实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-07T11:01:44.863

为此，您需要从[HERE导入一个模块库](https://codeload.github.com/openaphid/android-flip/zip/master)

之后使用以下代码： -

item_page.xml

```
<?xml version="1.0" encoding="utf-8"?>
    <ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical">

            <ImageView
                android:id="@+id/image"
                android:layout_width="200dp"
                android:layout_height="200dp"
                android:layout_gravity="center"
                android:layout_marginTop="10dp"
                android:contentDescription="@string/app_name"
                android:scaleType="centerCrop" />

            <TextView
                android:id="@+id/text"
                android:padding="10dp"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:textAppearance="?android:attr/textAppearanceMediumInverse"
                android:textColor="@android:color/black" />
        </LinearLayout>
    </ScrollView> 
```

activity_flipper_view_controller.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:flip="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@android:color/darker_gray"
        android:paddingLeft="10dp"
        android:text="@string/header"
        android:textAppearance="@android:style/TextAppearance.Large" />

    <com.aphidmobile.flip.FlipViewController
        android:id="@+id/flip_view"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        flip:orientation="horizontal" />

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@android:color/darker_gray"
        android:paddingLeft="10dp"
        android:text="@string/footer"
        android:textAppearance="@android:style/TextAppearance.Large" />
</LinearLayout> 
```

FlipperAdapter.java

```
package pratiksha.com.pagecurlviewdemo;

import android.app.Activity;
import android.support.v7.app.AppCompatActivity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

import java.util.List;

import pratiksha.com.pagecurlviewdemo.R;

/**
 * Created by User(LPT-APR2015-02) on 11/7/2016.
 */
public class FlipperAdapter extends BaseAdapter {

    private AppCompatActivity appCompatActivity;
    private List<String> strings;
    private int[] drawableIds = {R.mipmap.ic_launcher, R.mipmap.page1, R.mipmap.page2, R.mipmap.ic_launcher,
            R.mipmap.page2, R.mipmap.page1, R.mipmap.page2, R.mipmap.ic_launcher,
            R.mipmap.page1};

    public FlipperAdapter(AppCompatActivity appCompatActivity, List<String> strings) {
        super();
        this.strings = strings;
        this.appCompatActivity = appCompatActivity;
    }

    @Override
    public int getCount() {
        return strings.size();
    }

    @Override
    public String getItem(int position) {
        return strings.get(position);
    }

    @Override
    public long getItemId(int position) {
        return strings.indexOf(getItem(position));
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        LayoutInflater inflater = (LayoutInflater) appCompatActivity.getSystemService(Activity.LAYOUT_INFLATER_SERVICE);

        // If holder not exist then locate all view from UI file.
        if (convertView == null) {
            // inflate UI from XML file
            convertView = inflater.inflate(R.layout.item_page, parent, false);
            // get all UI view
            holder = new ViewHolder(convertView);
            // set tag for holder
            convertView.setTag(holder);
        } else {
            // if holder created, get tag from view
            holder = (ViewHolder) convertView.getTag();
        }

        holder.textView.setText(getItem(position));
        holder.imageView.setImageResource(drawableIds[position]);

        return convertView;
    }

    private static class ViewHolder {
        private TextView textView;
        private ImageView imageView;

        public ViewHolder(View v) {
            imageView = (ImageView)v.findViewById(R.id.image);
            textView = (TextView) v.findViewById(R.id.text);
        }
    }
} 
```

主要活动.java

```
package pratiksha.com.pagecurlviewdemo;

import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;

import com.aphidmobile.flip.FlipViewController;

import java.util.ArrayList;

public class FlipperViewController extends AppCompatActivity {

    private FlipViewController flipViewController;
    private FlipperAdapter adapter;
    private ArrayList<String> stringArrayList;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_flipper_view_controller);

        flipViewController = (FlipViewController)findViewById(R.id.flip_view);
        stringArrayList = new ArrayList<>();
        readDataFromAssets();

        //create and attach adapter to flipper view
        adapter = new FlipperAdapter(this, stringArrayList);
        flipViewController.setAdapter(adapter);
    }

    private void readDataFromAssets() {
        for(int i=1;i<10;i++)
        stringArrayList.add("Page Number "+i);
    }
} 
```

# oracle - 如何从另一个系统连接到 Oracle DB

> ID：12002285
> 
> 赞同：0
> 
> 时间：2012-08-17T08:23:55.323
> 
> 标签：oracle, jdbc, connection

我已经在我的系统上安装了 Oracle 11g，并且能够使用简单的 java 程序连接到数据库。

```
ORACLE_USER = "user1"
ORACLE_PASSWORD = "user1"
ORACLE_HOST = "localhost"
ORACLE_SID = "ORCL"
ORACLE_PORT = "1521 "  

String connectionString = "jdbc:oracle:thin:@(description=(address=(host=" + ORACLE_HOST
                    + ")(protocol=tcp)(port=" + ORACLE_PORT + "))(connect_data=(sid=" + ORACLE_SID + ")))";
Connection connection = DriverManager.getConnection(connectionString, ORACLE_USER,ORACLE_PASSWORD); 
```

现在，我想连接我的队友系统的数据库（局域网网络）。我可以ping通那个系统。我在上面的代码中所做的唯一改变是

```
ORACLE_HOST = "kdsystem" //machine name 
```

但相同的代码失败并显示以下错误消息：

```
java.sql.SQLException: Io exception: The Network Adapter could not establish the
 connection
        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java
:112)
        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java
:146)
        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java
:255)
        at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:387)
            at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:
    414)
......
.... 
```

请帮我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:01:27.477

在您的队友机器上，您可以使用 netstat 或其他工具检查它是否正在侦听 ORACLE_PORT 和 ORACLE_HOST（您的机器可见的 IP 地址，或 0.0.0.0）。你可以在 Linux/unix 机器上检查它：

```
netstat -an | grep 1521 
```

`grep`或在不可用的 Windows 机器上：

```
netstat -an | findstr 1521 
```

向我们展示此类命令的结果。

如果 Oracle 正在侦听 localhost (127.0.0.1)，则其他机器无法与其连接。您必须配置 Oracle 服务器以供其他人使用。

如果 Oracle 正在侦听其他机器可用的地址，则检查您是否可以使用 telnet 连接到该机器。如果它无法与 Oracle 连接，那么这两台机器之间可能存在防火墙或类似的封锁。

# javascript - Lotus Xpages TypeAhead 选项更改标签的 DOM id

> ID：12002287
> 
> 赞同：1
> 
> 时间：2012-08-17T08:24:11.043
> 
> 标签：, 预输入字段，, lotus, xpage, 预先输入, 预先, xpage代码：, , 预先输入, javascript, dojo, xpages, lotus, type-ahead

如果为该字段启用了[预输入字段，](/questions/tagged/type-ahead "显示标记为“提前输入”的问题") [lotus](/questions/tagged/lotus "显示标记为“莲花”的问题")会更改为输入文本字段生成的标签 ID 。

1\. [xpage](/questions/tagged/xpage "显示标记为“xpage”的问题")上的源代码没有[预先输入](/questions/tagged/type-ahead "显示标记为“提前输入”的问题")：

`<xp:tr> <th scope="row">
<xp:label id="labelClientRapporteur" for="clientRapporteur"> <xp:this.value><![CDATA[${javascript:clientData['clientRapporteur']}]]></xp:this.value> </xp:label> </th> <xp:td> <xp:inputText id="clientRapporteur" value="#{complaintDocument.clientRapporteur}">
</xp:inputText> </xp:td> </xp:tr>`

2.以及浏览器中页面的来源：

`<tr> <th scope="row"> <label id="view:_id1:_id2:_id31:_id45:labelClientRapporteur" class="xspTextLabel" for="view:_id1:_id2:_id31:_id45:clientRapporteur">Ügyfélreferens</label> </th> <td> <input id="view:_id1:_id2:_id31:_id45:clientRapporteur" class="xspInputFieldEditBox" type="text" name="view:_id1:_id2:_id31:_id45:clientRapporteur"> </td> </tr>`

3.为相同输入启用[预先](/questions/tagged/type-ahead "显示标记为“提前输入”的问题")输入时的[xpage代码：](/questions/tagged/xpage "显示标记为“xpage”的问题")

`<xp:tr> <th scope="row">
<xp:label id="labelClientRapporteur" for="clientRapporteur"> <xp:this.value><![CDATA[${javascript:clientData['clientRapporteur']}]]></xp:this.value> </xp:label> </th> <xp:td> <xp:inputText id="clientRapporteur" value="#{complaintDocument.clientRapporteur}"> <xp:typeAhead mode="partial" minChars="1" ignoreCase="true" valueList="#{javascript:return namesTypeAhead();}" var="lupkey" valueMarkup="true"> </xp:typeAhead> </xp:inputText> </xp:td> </xp:tr>`

4\. 以及浏览器中带有[预先输入](/questions/tagged/type-ahead "显示标记为“提前输入”的问题")字段的页面的来源：

`<tr> <th scope="row"> <label id="view:_id1:_id2:_id31:_id45:clientRapporteur_label" class="xspTextLabel" for="view:_id1:_id2:_id31:_id45:clientRapporteur">Ügyfélreferens</label> </th> <td> <span id="view:_id1:_id2:_id31:_id45:_id78" mode="partial" jsid="view__id1__id2__id31__id45__id78" dojotype="ibm.xsp.widget.layout.data.TypeAheadReadStore"></span> <div id="widget_view:_id1:_id2:_id31:_id45:clientRapporteur" class="dijit dijitReset dijitInlineTable dijitLeft xspInputFieldEditBox dijitTextBox dijitComboBox" role="combobox" widgetid="view:_id1:_id2:_id31:_id45:clientRapporteur" aria-labelledby="view:_id1:_id2:_id31:_id45:clientRapporteur_label"> </td> </tr>`

5\. 为标签生成的 id 为：

`view:_id1:_id2:_id31:_id45:clientRapporteur_label`

, 而不是

`view:_id1:_id2:_id31:_id45:clientRapporteur`

. 问题是，我使用

`setTextLabelForRequired("#{id:labelClientRapporteur}");`

更改标签的样式，此代码在这种情况下不起作用，因为标签的 id 已更改。

我想知道如何解决这个 id 更改，或者最好的解决方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T09:41:12.393

在我看来，这是一个可行的解决方法。最佳方案是拥有唯一的 jsid ofc。

这会

1.  使用选择器循环所有节点
2.  循环所有文本框
3.  通过 domNode 查找注册的小部件（不确定逻辑如何，但通过 Id 肯定更好）

所以：

```
var arr = dojo.filter(dojo.query('.xspInputFieldEditBox'), function(domNode) {

   if(/labelClientRapporteur/.test(domNodes.className))
      return true;

});
var widget = dijit.getEnclosingWidget(arr[0]); 
```

或者更松散的匹配：

```
var nodes = dojo.query('.xspInputFieldEditBox[id*="labelClientRaporteur"]');
var domNode = nodes[0]; 
```

# json - ExtJS 表单模型和阅读器

> ID：12002293
> 
> 赞同：0
> 
> 时间：2012-08-17T08:24:41.190
> 
> 标签：json, forms, data-binding, extjs

我想使用 Ext JS 4 从 JSON 阅读器将数据绑定到我的表单。 JSON 的结构如下所示：

```
[
{"form[name]":"John","form[city]":"Dublin"},{"form[name]":"Deborah","form[city]":"London"}
] 
```

但我的读者和模型不解析它。模型：

```
Ext.define('contact', {
        extend: 'Ext.data.Model',
        fields: [
            {name: 'form[name]'},
            {name: 'form[city]'}
        ]
    }); 
```

读者：

```
reader : Ext.create('Ext.data.reader.Json', {
            model: 'contact'
        }), 
```

绑定：

```
myFormPanel.getForm().load({
                    url: 'data.json'
}) 
```

你能告诉我我做错了什么吗？

# vb.net - Html.ActionLink 作为按钮而不是超链接

> ID：12002294
> 
> 赞同：3
> 
> 时间：2012-08-17T08:24:45.717
> 
> 标签：vb.net, asp.net-mvc-3, razor, twitter-bootstrap

似乎在 VB 中找不到与此实现相关的代码，但我有一个当前显示为超链接的操作链接：

```
@Html.ActionLink("Edit", "Edit", New With {.id = currentItem.CustomerId}) 
```

但是希望它显示为一个按钮，而不是像使用 twitter bootstrap 一样，并且在 CSS 中定义的按钮看起来很棒。我知道如何正常定义按钮链接，但如何将操作链接更改为一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T08:30:07.700

将 CSS 类属性设置为`btn`.

```
@Html.ActionLink("Edit", "Edit", New With {.id = currentItem.CustomerId}, New With {.class = "btn"}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T08:29:36.770

你应该做一个扩展方法

```
public static class MVCExtensions
    {
public static string SubmitButton(this HtmlHelper helper, string buttonText)
        {
            return String.Format("<input type=\"submit\" value=\"{0}\" />", buttonText);
        }
} 
```

然后你调用代码

```
@Html.SubmitButton("Save") 
```

# pug - Jade - 每个...in 函数中的 id 和变量

> ID：12002297
> 
> 赞同：1
> 
> 时间：2012-08-17T08:24:57.787
> 
> 标签：pug

我想`each...in`在 Jade 文件中使用函数

但是当我`#{...}`用来设置变量时，我不能在 div 中设置 id。

玉：

```
sidebars = ['home', 'club', 'bond']
each sidebar in sidebars
    div.side_bar_category#side_bar_#{sidebar} #{sidebar} 
```

结果出来了：

```
<div id="side_bar_" class="side_bar_category"></div><home> home</home>
<div id="side_bar_" class="side_bar_category"></div><club> club</club>
<div id="side_bar_" class="side_bar_category"></div><bond> bond</bond> 
```

我希望它变成：

```
<div id="side_bar_home" class="side_bar_category">home</div>
<div id="side_bar_club" class="side_bar_category">club</div>
<div id="side_bar_bond" class="side_bar_category">bond</div> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T23:32:10.250

答案是将您的 id 属性放在括号内，以便您可以将属性与变量连接起来

```
 sidebars = ['home', 'club', 'bond']
  each sidebar in sidebars
    div.side_bar_category(id='side_bar_'+ sidebar) #{sidebar} 
```

# android - PDF 编辑器。合并两个活动

> ID：12002298
> 
> 赞同：-1
> 
> 时间：2012-08-17T08:25:03.423
> 
> 标签：android, pdf, android-activity

我每天都在练习 PDF 编辑器。我成功加载了 Pdf 文件。并且要编辑文件，我在文件上使用了不可见的活动。当然，活动是“编辑器”。我可以写和突出显示的东西。但问题是这两个活动的合并。我必须转到菜单并单击“写入”按钮才能写入。然后 PDF 不再移动，因为我正在进行“编辑”活动。所以我必须保存文字并退出“写入”模式。这是超级不舒服....我希望它更简单。'特别是'那些'节省'的部分..我真的很讨厌它。在没有保存过程的情况下，两个活动之间的“移动”应该更自然......你对此没有任何好主意吗？

请帮帮我！！！！新的初学者正在为anwser哭泣。谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:32:22.087

您将启动您的编辑器活动并等待结果。

沿线的东西....

```
void goToEditMode() {
  startActivityForResult(new Intent(this, PdfEditorActivity.class), SOME_REQUEST_CODE);
} 
```

然后等待结果...

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
  if(requestCode == SOME_REQUEST_CODE) {
    if(resultCode == RESULT_OK) {
        extractData(data);
    }
  }
} 
```

假设您额外传递了必要的数据，那么实现`extractData(...)`应该很容易。

# android - 两个 Wifi 设备之间的数据传输

> ID：12002303
> 
> 赞同：6
> 
> 时间：2012-08-17T08:25:24.277
> 
> 标签：android, android-wifi

我在谷歌搜索过。在 Android 2.2 和 sdk 8 中，如何在 Android 的列表中使用 SSID？

通过使用 SSID 应该以编程方式获取特定的启用 wifi 的设备属性。有了这个帮助，应该在 Android 中的两个启用 Wifi 的设备之间传输数据。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-18T10:58:40.643

要在两个 Android 设备之间以有意义的方式发送数据，您将使用 TCP 连接。为此，您需要 IP 地址和其他设备正在侦听的端口。

示例取自[这里](http://www.helloandroid.com/tutorials/simple-connection-example-part-ii-tcp-communication)。

对于服务器端（监听端），您需要一个服务器套接字：

```
try {
        Boolean end = false;
        ServerSocket ss = new ServerSocket(12345);
        while(!end){
                //Server is waiting for client here, if needed
                Socket s = ss.accept();
                BufferedReader input = new BufferedReader(new InputStreamReader(s.getInputStream()));
                PrintWriter output = new PrintWriter(s.getOutputStream(),true); //Autoflush
                String st = input.readLine();
                Log.d("Tcp Example", "From client: "+st);
                output.println("Good bye and thanks for all the fish :)");
                s.close();
                if ( STOPPING conditions){ end = true; }
        }
ss.close();

} catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
} catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
} 
```

对于客户端，您需要一个连接到服务器套接字的套接字。请将“localhost”替换为远程 Android 设备的 IP 地址或主机名：

```
try {
        Socket s = new Socket("localhost",12345);

        //outgoing stream redirect to socket
        OutputStream out = s.getOutputStream();

        PrintWriter output = new PrintWriter(out);
        output.println("Hello Android!");
        BufferedReader input = new BufferedReader(new InputStreamReader(s.getInputStream()));

        //read line(s)
        String st = input.readLine();
        //. . .
        //Close connection
        s.close();

} catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
} catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-10T13:30:31.590

对于通过 wifi 在 2 个设备之间传输的数据，可以使用“TCP”协议来完成。客户端和服务器之间的连接需要 3 件事

1.  使用 NSD 管理器，客户端设备应获取服务器/主机 IP 地址。
2.  使用 Socket 向服务器发送数据。
3.  客户端应将其 IP 地址发送到服务器/主机以进行双向通信。

为了通过 wifi 更快地传输数据，可以使用“WifiDirect”，这是一种“p2p”连接。这样这将在没有中间（套接字）的情况下将数据从一个设备传输到另一个设备。例如，请参阅谷歌开发人员[wifip2p](http://developer.android.com/guide/topics/connectivity/wifip2p.html)和[P2P Connection with Wi-Fi](http://developer.android.com/training/connect-devices-wirelessly/wifi-direct.html)中的此链接。

在 Github [WifiDirectFileTransfer中获取示例](https://github.com/mayfourth/WiFi-Direct-File-Transfer)

# c++ - 如何使用 g++ 编译 openmp

> ID：12002304
> 
> 赞同：29
> 
> 时间：2012-08-17T08:25:24.677
> 
> 标签：c++, compilation, g++, openmp

我对 openmp 编译有疑问。

像下面的代码：

```
#include <iostream> 
#include <pthread.h>
#include <omp.h>
#include <semaphore.h>
#include <stack>
using namespace std;
sem_t empty,full;
stack<int> stk;
void produce(int i)
{
    {
    sem_wait(&empty);
            cout<<"produce "<<i*i<<endl;
            stk.push(i*i);
    sem_post(&full);
    }
}
void consume1(int &x)
{
    sem_wait(&full);
            int data=stk.top();
            stk.pop();
            x=data;
    sem_post(&empty);
}
void consume2()
{
    sem_wait(&full);
            int data=stk.top();
            stk.pop();
            cout<<"consume2 "<<data<<endl;
    sem_post(&empty);
}
int main()
{
    sem_init(&empty,0,1);
    sem_init(&full,0,0);
    pthread_t t1,t2,t3;
    omp_set_num_threads(3);
    int TID=0;
    #pragma omp parallel private(TID)
    {
            TID=omp_get_thread_num();
            if(TID==0)
            {
            cout<<"There are "<<omp_get_num_threads()<<" threads"<<endl;
            for(int i=0;i<5;i++)
                    produce(i);
            }
            else if(TID==1)
            {
                    int x;
                    while(true)
                    {
                            consume1(x);
                            cout<<"consume1 "<<x<<endl;
                    }
            }
            else if(TID==2)
            {
                    int x;
                    while(true)
                    {
                            consume1(x);
                            cout<<"consume2 "<<x<<endl;
                    }
            }
    }
    return 0;
} 
```

首先，我使用以下方法编译它：

```
g++ test.cpp -fopenmp -lpthread 
```

而且，我得到了正确的答案，总共有 3 个线程。

但是，当我像这样进行编译时：

```
g++ -c test.cpp -o test.o
g++ test.o -o test -fopenmp -lpthread 
```

只有一个线程。

任何人都可以告诉我如何正确编译此代码。先感谢您。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-17T10:45:06.123

OpenMP 是一组*代码转换*pragma，即它们仅在编译时应用。您不能将代码转换应用于已编译的目标代码（好吧，您可以，但它涉及的过程要多得多，并且超出了当今大多数编译器所做的范围）。您`-fopenmp`只需要在链接阶段让编译器自动链接 OpenMP 运行时库`libgomp`- 它对目标代码没有任何其他作用。

附带说明一下，尽管在技术上是正确的，但您的代码以非常非 OpenMP 的方式执行 OpenMP。首先，您重新实现了 OpenMP`sections`构造。函数中的并行区域`main`可以用更 OpenMP 的方式重写：

```
#pragma omp parallel sections
{
    #pragma omp section
    {
        cout<<"There are "<<omp_get_num_threads()<<" threads"<<endl;
        for(int i=0;i<5;i++)
            produce(i);
    }
    #pragma omp section
    {
        int x;
        while(true)
        {
            consume1(x);
            cout<<"consume1 "<<x<<endl;
        }
    }
    #pragma omp section
    {
        int x;
        while(true)
        {
            consume1(x);
            cout<<"consume2 "<<x<<endl;
        }
    }
} 
```

（如果您`SIGILL`在使用超过三个 OpenMP 线程运行此代码时遇到了 GCC 中的错误，该错误将在即将发布的版本中修复）

其次，您可能想看看 OpenMP`task`构造。使用它，您可以将代码段排队，以由任何空闲线程作为任务同时执行。不幸的是，它需要一个支持 OpenMP 3.0 的编译器，它从等式中排除了 MSVC++，但前提是您关心 Windows 的可移植性（您显然不关心，因为您使用的是 POSIX 线程）。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-08-17T08:37:41.507

OpenMP 编译指示仅在使用`-fopenmp`. 否则编译器会完全忽略它们。（因此，只有 1 个线程......）

因此，您将需要添加`-fopenmp`到使用 OpenMP 的每个模块的编译中。（而不仅仅是最后的链接步骤。）

```
g++ -c test.cpp -o test.o -fopenmp
g++ test.o -o test -fopenmp -lpthread 
```

# java - 在Android中更改第一个字母的字体

> ID：12002305
> 
> 赞同：2
> 
> 时间：2012-08-17T08:25:34.343
> 
> 标签：java, android, fonts

有没有一种简单的方法可以更改 Android 中字符串或单词中第一个字母的字体？例如，我想为标题中每个单词的第一个字母使用奢华的哥特式字体，然后将标题的其余部分使用较小的字体。

使用自定义导入的字体，所以我不确定 HTML 标签是否有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:40:38.857

我最好的猜测是使用 a`Spannable`作为具有不同字体的第一个字母，使用`TypefaceSpan`. [例子](https://stackoverflow.com/a/7037054/1117415)。

如果你想使用自己的自定义字体，你应该[扩展 TypefaceSpan](https://stackoverflow.com/a/4826885/1117415)。

# fuelphp - Fuelphp input and session issue in model

> ID：12002306
> 
> 赞同：0
> 
> 时间：2012-08-17T08:25:34.560
> 
> 标签：fuelphp

I ran into a problem what i cant really solve (i am a begginer with fuelphp).

So when i place input in my model i get this error

```
ErrorException [ Error ]: Class 'Model\Input' not found 
```

when i try with session its the same thing

```
ErrorException [ Error ]: Class 'Model\Session' not found 
```

And when i try to hardcode a value in it its not inserting, debuged the query no errors. it shows the value is posted (when passing hard code value) but not inserts it in the database.

my code

model

```
namespace Model;
use DB;

    class Event extends \Model {

        static function send_event()
        {
            $query = DB::insert('events');

            $query->set(array(
                'user_id' => Session::get('sentry_user'),
                'event_name' => Input::post('event_name'),
                'event_desc' => Input::post('event_desc'),
                'event_start' => Input::post('event_start'),
                'event_end' => Input::post('event_end'),
            ));
        }

} 
```

controller

```
function action_send_data()
{
    $response = Response::forge();
    $val = Validation::forge('events');

    $val->add_field('event_name', 'Esemény neve', 'required');
    $val->add_field('event_desc', 'Esemény leírás', 'required');
    $val->add_field('event_start', 'Esemény kezdődik', 'required');
    $val->add_field('event_end', 'Esemény kejár', 'required');  

    Event::send_event();
    $response->body(json_encode(array(
        'status' => 'ok',
    )));

    return $response;
} 
```

could please someone give me a hint what i am doing wrong?

thank you

P.S: in the controller i removed the validation for query debuging

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T08:47:03.933

When you declare a namespace at the top of a file as you have done with

```
namespace Model; 
```

This declares the namespace for all classes called where the namespace is not explicitly defined. For example, your call to Session is actually looking in `Model\Session` when it actually exists in `\Fuel\Core\Session`

There are two ways around this. You've demonstrated an example yourself in your question with a call to the `use` language construct.

```
use DB; 
```

This causes PHP to search for classes in this namespace as well as the one which is already being used (Model in this case).

The other way you can do it is by calling the class with the explicit namespace. For example

```
\Fuel\Core\Session::get(); 
```

Fuel also aliases all core classes to the root namespace for convenience. What this means is you can also directly call classes in `\Fuel\Core` just using `\`. For example

```
\Session::get(); 
```

# c - 数组和基地址重定向

> ID：12002307
> 
> 赞同：1
> 
> 时间：2012-08-17T08:25:36.203
> 
> 标签：c, arrays

```
int a[10];
printf("%p ", &a); 
```

将显示数组的地址`a`。

所以，如果我执行重定向，`*(&a)`为什么我没有得到存储在`a[0]`. C 语言中规定我应该获得`a`. 是的，这确实有道理，我得到了 的地址`a`，因为`*`和`&`将相互取消导致简单`a`的 ，即 的地址`a`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:28:33.190

```
int a[10];
printf("%p ", (void *) &a);  // address of the array
printf("%p ", (void *) a);   // adress of the first element of the array
printf("%p ", (void *) *(&a));// same as above 
```

这里， 的值`a`与 相同`&a[0]`。并且该值与对象为数组时的`*&a`值相同。`a``a``int`

请注意，打印的地址将相同，因为它们都从相同的地址开始。

我添加了需要参数的`void *`演员表。`p``void *`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T09:56:21.550

管理这一点的 C 规则是 C 2011 6.3.2.1 3：“除非它是 sizeof 运算符、_Alignof 运算符或一元 & 运算符的操作数，或者是用于初始化数组的字符串文字，否则表达式类型为 ''array of type'' 的表达式转换为类型为 ''pointer to type'' 的表达式，该表达式指向数组对象的初始元素，而不是左值。”</p>

`a`是一个 int 数组。当您传递`a`给 printf 时，规则将其转换为指向 int 的指针，并打印该指针的值。

当您传递`&a`给 printf 时：首先，`a`是 的操作数`&`，因此该规则不适用；`a`不转换为指向 int 的指针；它仍然是一个 int 数组。二`&`是评价。`&a`产生数组的地址，并打印该地址。由于数组的地址与其第一个元素的地址相同，因此打印了地址。

请注意，表达式的类型`&a`是“指向 int 数组的指针”。所以，当你有 时`*&a`，你正在应用`*`一个指向 int 数组的指针，结果是一个 int 数组。由于表达式是一个 int 数组，因此适用规则，并且这个 int 数组被转换为指向第一个元素的指针，并打印该指针的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:30:45.203

事实：

```
a[0] == *(a)
a[9] == *(a+9) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T08:32:28.260

计算结果的指针类型`&a`是指向数组的指针（特别是指向 的指针`int[10]`）。这是一种与指向数组第一个元素的指针不同的类型，即使它是相同的地址。

`printf("%d ", *&a[0]);`将打印数组的第一个元素的值，因为 `&a[0]`它具有 type `int*`。

# php - p12到pem文件使用php

> ID：12002310
> 
> 赞同：2
> 
> 时间：2012-08-17T08:25:45.800
> 
> 标签：php, apple-push-notifications

我检查了这个[url](https://stackoverflow.com/questions/5422205/php-p12-to-pem-openssl) 并按照步骤从 p12 文件生成 pem 文件。下面是生成pem文件的代码。

```
....
if ($this->file->save($uploadDirectory . $filename . '.' . $ext)) {
   $filenamewithpath = $uploadDirectory . $filename . '.' . $ext;
   $handle = fopen($filenamewithpath, 'r');
   $p12buf = fread($handle, filesize($filenamewithpath));
   fclose($file); 
   $password = @$p12pwd;
   $results = array();
   $worked = openssl_pkcs12_read($p12buf, $results, $password);
   //d($results); exit;
   if ($worked) {
      //echo '<pre>', print_r($results, true), '</pre>';
      $new_password = null;
      $result = null;
      $worked = openssl_pkey_export($results['pkey'], $result, $new_password);
      if($worked) {
         //echo "<pre>It worked!  Your new pkey is:\n", $result, '</pre>';
         file_put_contents( $uploadDirectory . $filename . '.pem',$result);
         return array(
            'success' => true,
            'filename'=>$filename . '.pem',
            'uploaddir' =>$uploadDirectory,
         );
      } else {
         return array('error' => openssl_error_string());
      }

   } else {
      return array('error' => openssl_error_string());
   }
}
.... 
```

我让它工作正常，生成的 pem 文件存储在给定的目录中。现在我正在尝试使用这个 pem 文件进行推送通知。检查下面的代码，

```
<?php 
   $apnsHost = 'gateway.sandbox.push.apple.com';
   //$apnsHost = 'gateway.push.apple.com';

   $apnsCert = 'test.pem';
   $apnsPort = 2195;

   $streamContext = stream_context_create(); 
   stream_context_set_option($streamContext, 'ssl', 'local_cert', $apnsCert);

   $apns = stream_socket_client('ssl://' . $apnsHost . ':' . $apnsPort, $error, $errorString, 2, STREAM_CLIENT_CONNECT, $streamContext);
   $payload['aps'] = array('alert' => 'this is test!', 'badge' => 1, 'sound' => 'default');
   $output = json_encode($payload);
   $token = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx';
   $token = pack('H*', str_replace(' ', '', $token)); 
   $apnsMessage = chr(0) . chr(0) . chr(32) . $token . chr(0) . chr(strlen($output)) . $output;
   //var_dump($apnsMessage); exit;
   fwrite($apns, $apnsMessage);

   @socket_close($apns);
   fclose($apns);
?> 
```

当我运行此代码时，出现以下错误，

```
Warning: stream_socket_client(): Unable to set local cert chain file `test.pem'; Check that your cafile/capath settings include details of your certificate and its issuer in /var/www/html/myserver/apns/test.php on line 13
Warning: stream_socket_client(): failed to create an SSL handle in /var/www/html/myserver/apns/test.php on line 13 
Warning: stream_socket_client(): Failed to enable crypto in /var/www/html/ela/apns/test.php on line 13 
Warning: stream_socket_client(): unable to connect to ssl://gateway.sandbox.push.apple.com:2195 (Unknown error) in /var/www/html/myserver/apns/test.php on line 13 
Warning: fwrite() expects parameter 1 to be resource, boolean given in /var/www/html/myserver/apns/test.php on line 20 
Warning: fclose() expects parameter 1 to be resource, boolean given in /var/www/html/myserver/apns/test.php on line 23 
```

请建议解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:02:24.857

我会打电话给

```
'openssl pkcs12  -in cert.p12  -inpass pass:password  ...something.. ..something...' 
```

在命令行上并尝试获取或通过管道返回其输出。也许在 php 中有一个包装器，否则系统命令似乎是最简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T02:16:12.173

在为 iOS 开发时，我遇到了同样的问题。我们获得了 *.cer 证书并使用以下命令行将它们更改为 *.pem：
openssl x509 -inform der -in aps_production_identity.cer -out aps_production_identity.pem

如果这不起作用，请确保包含此处所示的私钥： [Apple Push Notification Service](https://stackoverflow.com/questions/1481443/apple-push-notification-service)

# javascript - Javascript + ActionScript：如何将 Actionscript 返回的字节数组转换为 Javascript 中的图像

> ID：12002311
> 
> 赞同：3
> 
> 时间：2012-08-17T08:25:54.377
> 
> 标签：javascript, actionscript-3

我通过 ExternalInterface 调用从 ActionScript 返回到 Javascript 的 bytearray。现在，我必须将此字节数组转换为 Javascript 代码中的图像。请帮助...任何示例代码...

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T08:51:04.147

我看到这个问题的两种可能的解决方案，我都没有测试过，所以尝试一下：

## HTML5 画布

首先，使用 ActionScript 将字节数组转换为整数数组。您将需要四个值：

*   红色的
*   绿
*   蓝色的
*   Α

使用字符串表示或纯数字将其传输到 Javascript，然后将这些数字加载到画布中：

```
var canvasData = ; // data from actionscript
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
var imgData=ctx.createImageData(100,100);
for (var i=0;i<imgData.width*imgData.height*4;i+=4)
{
  imgData.data[i+0]=canvasData[i][0]; // red
  imgData.data[i+1]=canvasData[i][1]; // green
  imgData.data[i+2]=canvasData[i][2]; // blue
  imgData.data[i+3]=canvasData[i][3]; // alpha
}
ctx.putImageData(imgData,10,10); 
```

## 通过 CSS 进行 Base64 编码

如果您不想依赖 HTML5，请使用 ActionScript 将字节数组转换为 base64 字符串，然后使用以下 css 规则插入图像：

```
background-image: url(data:image/png;base64,__base64_data__); 
```

并替换`__base64_data__`为生成的字符串。这可以使用 JQuery 动态完成：

```
$('#img').css("background-image", "url(data:image/png;base64,__base64_data__)"); 
```

这似乎也是比 HTML5 Canvas 更有效的方法，尽管实际性能将取决于图像大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:40:38.390

您可以将数据存储在 an 中`ArrayBuffer`并将其注入 a`canvas`以显示，如下所述： [https ://hacks.mozilla.org/2011/12/faster-canvas-pixel-manipulation-with-typed-arrays/](https://hacks.mozilla.org/2011/12/faster-canvas-pixel-manipulation-with-typed-arrays/)

# objective-c - 如何在 UILabel 上计算 NSString 的宽度和高度

> ID：12002314
> 
> 赞同：2
> 
> 时间：2012-08-17T08:26:01.153
> 
> 标签：objective-c, ios, uitableview, uilabel

我正在开发一个项目来动态地在 UILabel Width 和 Height 上制作 NSString。我试过：

```
NSString *text = [messageInfo objectForKey:@"compiled"];
writerNameLabel.numberOfLines = 0;
writerNameLabel.textAlignment = UITextAlignmentRight;
writerNameLabel.backgroundColor = [UIColor clearColor];
CGSize constraint = CGSizeMake(296,9999);
CGSize size = [text sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE] 
               constrainedToSize:constraint 
                   lineBreakMode:UILineBreakModeWordWrap];
NSLog(@"sizewidth = %f, sizeheight = %f", size.width, size.height);
NSLog(@"writerNameLabel.frame.size.width 1 -> %f",writerNameLabel.frame.size.width);
[writerNameLabel setFrame:CGRectMake(writerNameLabel.frame.origin.x, writerNameLabel.frame.origin.y, size.width, size.height)];

CGRect labelFram = writerNameLabel.frame;
labelFram.origin.x = cell.frame.size.width - writerNameLabel.frame.size.width - 80;
writerNameLabel.frame = labelFram;
NSLog(@"writerNameLabel.frame.size.width 2-> %f",writerNameLabel.frame.size.width); 
```

![在此处输入图像描述](../Images/8f906ba5ae7526bc3df292bdafc9223f.png)

请看绿色气泡而不是灰色气泡。还是不对。

气泡代码

```
bubbleImageView.frame = CGRectMake(writerNameLabel.frame.origin.x, writerNameLabel.frame.origin.y, writerNameLabel.frame.size.width+15, writerNameLabel.frame.size.height+5); 
```

请指教！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:06:48.223

那是因为你没有重用表格单元格，结构应该是这样的：

```
NSString *text = [messageInfo objectForKey:@"compiled"];
if(cell == nil) 
        { 
     writerNameLabel.numberOfLines = 0;
     writerNameLabel.textAlignment = UITextAlignmentRight;
     writerNameLabel.backgroundColor = [UIColor clearColor];
     [cell addSubview:writerNameLabel];
}
else {
     writerNameLabel = (UILabel *)[cell viewWithTag:WRITER_NAME_LABEL_TAG];
}
CGSize constraint = CGSizeMake(296,9999);
CGSize size = [text sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE] 
               constrainedToSize:constraint 
                   lineBreakMode:UILineBreakModeWordWrap];
[writerNameLabel setFrame:CGRectMake(writerNameLabel.frame.origin.x, writerNameLabel.frame.origin.y, size.width, size.height)]; 
```

我已经完成并回答了您的一些问题，这是编写 tableview 控制器的正确方法。你的问题将得到解决。

# bash - 从 vmlinuz 或 bzImage 中提取 vmlinux

> ID：12002315
> 
> 赞同：16
> 
> 时间：2012-08-17T08:26:01.917
> 
> 标签：bash, linux-kernel, kernel

我想从vmlinuz生成System.map，因为大多数机器没有System.map文件。实际上，vmlinuz被压缩为vmlinuz或bzImage。

有什么工具或脚本可以做到这一点？

我试过：

```
dd if=/boot/vmlinuz skip=`grep -a -b -o -m 1 -e $'\x1f\x8b\x08\x00' /boot/vmlinuz | cut -d: -f 1` bs=1 | zcat > /tmp/vmlinux 
```

它失败了：

```
zcat: stdin: not in gzip format
32769+0 records in
32768+0 records out 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-17T09:00:08.763

要从内核映像中提取未压缩的内核，您可以使用内核树目录中的`extract-vmlinux`脚本`scripts`（至少在内核版本 3.5 中可用）（如果您收到类似的错误

> mktemp：无法创建临时文件 /tmp/vmlinux-XXX：参数无效

您需要在脚本中替换`$(mktemp /tmp/vmlinux-XXX)`为）。`$(mktemp /tmp/vmlinux-XXXXXX)`命令是`/path/to/kernel/tree/scripts/extract-vmlinux <kernel image> >vmlinux`。

如果提取的内核二进制文件包含符号信息，您应该能够使用同一子目录`System.map`中的脚本创建文件。`mksysmap`这里的命令是`NM=nm /path/to/kernel/tree/scripts/mksysmap vmlinux System.map`。

¹ 我的发行版附带的内核映像似乎已被剥离，因此脚本无法获取符号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-03T19:51:31.333

正如 Abrixas2 所写，您将需要一个带有符号信息的内核映像来创建 System.map 文件，而打包的 vmlinuz 映像中不太可能包含符号。但是，我可以验证您原始帖子中的脚本是否使用 '-e' 替换为 '-P' 和 '$' 已删除，即

```
$ dd if=vmlinuz-3.8.0-19-generic skip=`grep -a -b -o -m 1 -P '\x1f\x8b\x08\x00' vmlinuz-3.8.0-19-generic | 剪切-d: -f 1` bs=1 | zcat > /tmp/vmlinux
gzip: stdin: 解压OK，尾随垃圾被忽略

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-23T20:51:42.737

我在ubuntu linux上。
您可以更改`$'\037\213\010\000'`为`"$(echo '\037\213\010\000')"`in sh

```
bash$ N=$(grep -abo -m1  $'\037\213\010\000' vmlinuz-4.13.0-37-generic | awk -F: '{print $1+1}') && 
tail -c +$N vmlinuz-4.13.0-37-generic | gzip -d > /tmp/vmlinuz 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-01T18:32:16.497

试试这个 ：

```
dd if=vmlinuz bs=1 skip=24584 | zcat > vmlinux 
```

和

```
24584 = 24576 + 8 
```

什么时候

```
od -A d -t x1 vmlinuz | grep '1f 8b 08 00' 
```

给

```
....... 0  1  2  3  .  .  .  .  8  
0024576 24 26 27 00 ae 21 16 00 1f 8b 08 00 7f 2f 6b 45 
```

请享用 ！

# r - scale_x_datetime 产生错误？

> ID：12002317
> 
> 赞同：3
> 
> 时间：2012-08-17T08:26:07.720
> 
> 标签：r, ggplot2

我正在尝试使用 scale_x_datetime 来优化我的 x 轴。我从[ggplot2 website](http://had.co.nz/ggplot2/scale_datetime.html)阅读了文档，但是这个站点中的示例产生了与我得到的相同的错误：

```
> library(ggplot2)
> start <- ISOdate(2001, 1, 1, tz = "") 
> df <- data.frame( 
+    day30  = start + round(runif(100, max = 30 * 86400)), 
+    day7  = start + round(runif(100, max = 7 * 86400)), 
+    day   = start + round(runif(100, max = 86400)), 
+    hour10 = start + round(runif(100, max = 10 * 3600)), 
+    hour5 = start + round(runif(100, max = 5 * 3600)), 
+    hour  = start + round(runif(100, max = 3600)), 
+    min10 = start + round(runif(100, max = 10 * 60)), 
+    min5  = start + round(runif(100, max = 5 * 60)), 
+    min   = start + round(runif(100, max = 60)), 
+    sec10 = start + round(runif(100, max = 10)), 
+    y = runif(100) 
+ ) 
> 
> last_plot() + scale_x_datetime(major = "2 weeks", minor = "1 week") 
Error in continuous_scale(aesthetics, "datetime", identity, breaks = breaks,  : 
  unused argument(s) (major = "2 weeks", minor = "1 week")
> 
```

那么文档是否已过时或这里有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T08:41:09.473

您使用的文档已过时，它适用于 pre v0.9.0。[在这里](http://docs.ggplot2.org/current/scale_date.html)可以找到正确的。您的示例现在应该如下所示：

```
library(ggplot2)
library(scales) # for date_breaks()
start <- ISOdate(2001, 1, 1, tz = "") 
df <- data.frame( 
    day30  = start + round(runif(100, max = 30 * 86400)), 
    day7  = start + round(runif(100, max = 7 * 86400)), 
    day   = start + round(runif(100, max = 86400)), 
    hour10 = start + round(runif(100, max = 10 * 3600)), 
    hour5 = start + round(runif(100, max = 5 * 3600)), 
    hour  = start + round(runif(100, max = 3600)), 
    min10 = start + round(runif(100, max = 10 * 60)), 
    min5  = start + round(runif(100, max = 5 * 60)), 
    min   = start + round(runif(100, max = 60)), 
    sec10 = start + round(runif(100, max = 10)), 
    y = runif(100) ) 

qplot(sec10, y, data = df) 
last_plot() + scale_x_datetime(breaks = date_breaks("2 weeks"),
                               minor_breaks = date_breaks("1 week")) 
```

# amazon-web-services - Amazon ELB 转发 http 请求更改 request.RemoteAddress

> ID：12002318
> 
> 赞同：2
> 
> 时间：2012-08-17T08:26:13.177
> 
> 标签：amazon-web-services, playframework, amazon-elb

我们正在使用 Amazon EC2 服务来实时托管我们的游​​戏应用程序。我对弹性负载均衡器有一个非常重要的问题。在我的应用程序中，我需要请求远程地址，并且我正在使用播放框架控制器的`request.remoteAddress`属性。但是在亚马逊上，它总是存储为负载均衡器的 IP 地址，这会误导我们，因为我们无法跟踪请求远程地址。

Amazon ELB 配置中是否有类似于转发请求的设置？在 Apache 中，我认为有一个解决方案，但我浏览了 ELB 文档并找不到任何线索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:41:19.080

我认为您可以在代理或负载均衡器后面使用它：

```
String ip = Http.Request.current().headers.get("x-forwarded-for") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T12:00:27.600

我想我找到了 Play Framework 支持的优雅解决方案，例如`XForwardedSupport`. 我计划在短时间内对其进行测试。

XForwardedSupport 的详细信息在[这里](http://www.playframework.org/documentation/1.2.4/configuration#XForwardedSupport)

# jquery - 单击按钮时如何加载facebox

> ID：12002319
> 
> 赞同：0
> 
> 时间：2012-08-17T08:26:13.457
> 
> 标签：jquery, ajax, cakephp

我有一个名为“添加项目”的按钮和一个列表。当我在该列表中选择特定内容时，我单击“添加项目”按钮，它必须显示一个面框。在那个面框上，应该有一个下拉列表（该下拉列表的值将根据某些条件从数据库中加载）。请帮我这样做,,,谢谢提前

这是我的代码..鉴于：

```
<input type="button" id="add_folder" value="Add Item"  rel="facebox" style="display:block; float:left;"/> //for the button 'Add Item'

<input type="hidden" name="nodeval" id="nodeval" value="" /> 
```

//获取选中集合的代码

```
$('#tree1').tree({selectable: true});
$('#tree1').bind('tree.click',
    function(event) {
    $('#nodeval').val(event.node.id);$('#nodepval').val(event.node.parent.id);
    }
); 
```

//添加

```
$('#add_folder').click(function(){
nval = $('#nodeval').val();
if(nval){
$.get('http://localhost/xxxx/add_items',{ nodval:nval},function(data) { 
if(data == 0){
alert('Cannot Add Items');
}else{
alert(data);                                               
}        
});
}else{alert('Please select any item to add.');}
  }); 
```

在控制器中，

```
 function add_items()
        {

 $this->layout = 'ajax';
 $nodval = trim($_REQUEST['nodval']);
 if($nodval)
             {

here i loaded some values from database based on certain conditions .and that is set to a variable 'users'

}else{
           echo "0";
             }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:36:49.157

我不清楚您问题的某个部分，您选择的列表在这种情况下扮演什么角色，因为您刚才说您选择并单击“添加项目”，那么为什么要从列表中选择呢？

# upload - 如何在 Telerik MVC Upload 中过滤文件？

> ID：12002322
> 
> 赞同：1
> 
> 时间：2012-08-17T08:26:25.993
> 
> 标签：upload, telerik, telerik-mvc

我在我的 MVC3 项目中使用 Telerik Upload。我需要将选择文件窗口设置为仅显示文本文件而不是显示所有文件类型文件。有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-06T06:43:01.627

以下代码仅过滤***jpeg/jpg***和***png***文件。在选择文件时还要检查它是否是***有效的扩展***文件。

```
 @(Html.Telerik().Upload()
            .Name("attachments")
            .Multiple(false)
            .Async(async => async
            .Save("AddImg", "Home")
            .AutoUpload(false)
            )
            .ClientEvents(events => events
            .OnLoad("onLoad")
            .OnSelect("onSelect")
            .OnSuccess("onSuccess")
            )
        )

<script type="text/javascript">

    function onLoad(e) {
        $(this).find("input").attr("accept", "image\/jpeg,image\/jpg,image\/png");
    }

    function onSelect(e) {

        if (e.files[0].size > 102400) {
            alert('The file size is too large for upload');
            e.preventDefault();
            return false;
        } 

        var ext = e.files[0].extension.toLowerCase();
        if ($.inArray(ext, ['.gif', '.jpeg', '.jpg', '.png']) == -1) {
            alert('This type of file is restricted from being uploaded due to security reasons');
            e.preventDefault();
            return false;
        }
        return true;
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T07:34:06.380

Telerik 论坛对此有一个答案。请参阅Telerik 团队的[这篇文章](http://www.telerik.com/community/forums/aspnet-mvc/upload/is-it-possible-to-restrict-allowed-file-types.aspx#1915324)。

# selenium - 等待文件在 selenium 网格上下载

> ID：12002324
> 
> 赞同：1
> 
> 时间：2012-08-17T08:26:29.743
> 
> 标签：selenium, webdriver, selenium-grid

我有一个使用 Webdriver 和 C# 的测试，它从网站下载文件。在我的本地机器上运行此测试时，它工作正常，但是当我尝试在 Selenium 网格上运行它时，它会在集线器上而不是节点上查找我正在下载的文件。

是否访问节点文件结构以监视何时下载文件。

对不起，如果这不清楚。

谢谢艾丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T13:31:47.307

看来，没有这种可能。。我也试图找到这样的功能，但失败了。但是，检查它的一种方法仍然存在 - “上传下载”。当然，它是一种解决方法，并不总是你有上传这样的功能。

无论如何，您可以：

1.  下载测试数据
2.  从页面中删除测试数据
3.  再次在页面上传测试数据
4.  检查它是否真的出现了

这是一种相当肮脏的方式，但另一方面，它不仅可以让您测试下载功能，还可以测试上传功能。

# c# - Win8 挂起后重新初始化 MainWindow 对象

> ID：12002325
> 
> 赞同：0
> 
> 时间：2012-08-17T08:26:40.793
> 
> 标签：c#, windows-8, microsoft-metro

我对“重新初始化”MainWindow 对象设置有疑问。我认为 OnNavigatedTo 也会在暂停后调用，我在 MainWindow 中有一些代码，例如：protected override void OnNavigatedTo(NavigationEventArgs e) { object.value = initValue; }

但是在暂停后它没有被调用。那么暂停后怎么办呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:36:18.657

如果您使用 VS2012 附带的默认模板，您将在 App.xaml.cs 文件中看到以下代码：

```
 protected override async void OnLaunched(LaunchActivatedEventArgs args)
    {
        Frame rootFrame = Window.Current.Content as Frame;

        // ... took out some code here

            if (args.PreviousExecutionState == ApplicationExecutionState.Terminated)
            {
                // Restore the saved session state only when appropriate
                try
                {
                    await SuspensionManager.RestoreAsync();
                }
                catch (SuspensionManagerException)
                {
                    //Something went wrong restoring state.
                    //Assume there is no state and continue
                }
            }

        // ... took out some more code here    

        Window.Current.Activate();
    } 
```

ApplicationExecutionState 的可能值为

```
public enum ApplicationExecutionState
{
    // Summary:
    //     The app is not running.
    NotRunning = 0,
    //
    // Summary:
    //     The app is running.
    Running = 1,
    //
    // Summary:
    //     The app is suspended.
    Suspended = 2,
    //
    // Summary:
    //     The app was terminated after being suspended.
    Terminated = 3,
    //
    // Summary:
    //     The app was closed by the user.
    ClosedByUser = 4,
} 
```

所以只需添加另一个 if 语句

```
if (args.PreviousExecutionState == ApplicationExecutionState.Suspended) 
```

在挂起状态后执行要执行的代码。

要恢复页面本身的先前状态，请使用在每个页面的 LayoutAwarePage 基类上定义的 LoadState 和 SaveState 方法（或实现您自己的状态管理）。VS2012 附带的模板（例如 Grid 应用程序）已经使用了所有这些技巧来进行状态管理，并且是入门的好方法。

```
protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
protected override void SaveState(Dictionary<String, Object> pageState) 
```

# tcp - 如何在 Mac 上打开 80 端口？

> ID：12002329
> 
> 赞同：2
> 
> 时间：2012-08-17T08:27:04.577
> 
> 标签：tcp, ip, tcpclient, tcplistener

我想通过 tcp-socket 从移动设备发送应用程序日志。我将带有 nc -l -k 80 命令的监听器放在 Mac 的终端中。但是 Mac 上的 80 端口是关闭的。如何打开 80 端口？

关于我的IP地址的其他问题：使用网络检查工具，我收到我的IP是：89.xxx.xx.196 我认为它应该从196开始而不是从89开始。为什么它是相反的，我怎样才能收到不反对我的IP？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T07:47:48.747

根据您的`netstat`输出表明 netcat 侦听器正在运行并且端口已打开。要执行本地测试，在您的 MBP 上运行`telnet 127.0.0.1 80`，您应该能够像这样连接 -

```
$ telnet 127.0.0.1 80
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'. 
```

您的移动设备（我假设）与 MBP 在同一无线网络上。因此，正如 Michael Graczyk 所提到的，您需要连接到内部网络 ( `ifconfig en1`) 上的 MBP IP 地址，即 192.xxx IP 地址。如果您可以`telnet 192.x.x.x 80`在 MAC 的 IP 为 192.xxx 的地方运行并获得连接提示，那么一切正常。如果您什么也没有得到并且只是返回了 CLI，那么在阻止或丢弃端口 80 连接尝试之间存在一些问题。您的 WAN 路由器可能需要一个 ACL 规则来允许连接。

如果移动设备在外部网络上，您需要连接到 89.xxx（在您的 WAN 路由器上）并在路由器上的端口 80 上启用端口转发（很可能）。

# ios - 我的应用在 iOS 4.3 上崩溃，但仅在从 App Store 下载时

> ID：12002330
> 
> 赞同：1
> 
> 时间：2012-08-17T08:27:10.540
> 
> 标签：ios

我最近向 App Store 发送了一个应用程序来修复 iOS 4.3 上的崩溃（我不小心在 a 上使用了颜色`UIProgressBar`）。我在 iOS 4.3 设备上测试了新版本，一切正常。Apple 已接受该应用程序并且更新已推出。用户仍在报告 iOS 4.3 上的崩溃。

我已经在 iOS 4.3 的 Debug 和 Release 中测试了该应用程序，它似乎完全按照它应该运行的方式运行。但是如果我从 App Store 下载我自己的应用程序，它会在 iOS 4.3 上崩溃。自从我将新版本上传到 App Store 后，我的代码中没有任何更改。

这怎么可能发生？直接从 Xcode 运行应用程序作为 Release 并从 App Store 下载应用程序不应该完全相同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:33:40.000

尝试查看设备上的崩溃报告。为此：

1.  将您的设备连接到计算机。
2.  在 XCode 中打开管理器
3.  选择您的 iOS 设备
4.  打开设备日志。

也许你可以在那里找到一些东西 - 可能是对 iOS 4.x 不支持的方法的调用

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T08:32:31.743

它可能来自设备的看门狗在启动时杀死应用程序。当您从 Xcode 运行时，看门狗被禁用以补偿附加调试器等的开销。

从应用商店下载（或从 Xcode 中拔出）时，看门狗处于活动状态，如果启动时间过长，则会终止您的应用。

在崩溃日志中查找错误代码“0x8badf00d”。

# drools - 流口水日志文件

> ID：12002331
> 
> 赞同：0
> 
> 时间：2012-08-17T08:27:12.427
> 
> 标签：drools

我已尝试但无法找到描述 Drools 日志文件中属性的文档。例如，在下面的 HelloWorld 示例日志中，什么是类型？

```
<org.drools.audit.event.ActivationLogEvent>
  <type>4</type>
  <activationId>Hello World [1]</activationId>
  <rule>Hello World</rule>
  <declarations>m=com.sample.DroolsTest$Message@19a01f9(1)</declarations>
</org.drools.audit.event.ActivationLogEvent> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:28:18.293

从 ActivationLogEvent.java：

@param type 事件的类型。这只能是 ACTIVATION_CREATED、ACTIVATION_CANCELLED、BEFORE_ACTIVATION_FIRE 或 AFTER_ACTIVATION_FIRE。

来自 LogEvent.java：

```
public static final int ACTIVATION_CREATED                  = 4;
public static final int ACTIVATION_CANCELLED                = 5;
public static final int BEFORE_ACTIVATION_FIRE              = 6;
public static final int AFTER_ACTIVATION_FIRE               = 7; 
```

所以我猜你的事件是一个 ACTIVATION_CREATED 事件。

# java - 如何操作数组。找到平均值。初学者Java

> ID：12002332
> 
> 赞同：9
> 
> 时间：2012-08-17T08:27:17.553
> 
> 标签：java, arrays, double, average

我有一个家庭作业，我想知道是否有人可以帮助我，因为我是 Java 和编程的新手并且被困在一个问题上。问题是：

第一种方法求整数数组元素的平均值：

```
public double average(int[] data) 
```

即给定一个整数数组，data，计算其元素的平均值，均返回平均值。例如，{1, 3, 2, 5, 8} 的平均值为 3.8。

这是我到目前为止所做的：

```
public double average(int[] data) {  
    int sum = 0;

    while(int i=0; i < data.length; i++) 

    sum = sum + data[i]; 
    double average = sum / data.length;; 

    System.out.println("Average value of array element is " " + average);
} 
```

`int i=0`编译它时，我在“.class expected”部分收到一条错误消息。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-17T08:30:21.850

使用增强的 for 会更好：

```
int sum = 0;
for (int d : data) sum += d; 
```

另一件可能会让您大吃一惊的事情是您将获得的错误结果

```
double average = sum / data.length; 
```

原因：右侧有整数除法，Java 不会自动将其提升为浮点除法。它将计算 的整数商，`sum/data.length`然后才将该整数提升为 a `double`。一个解决方案是

```
double average = 1.0d * sum / data.length; 
```

这将迫使被除数变为 a `double`，这将自动传播到除数。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-10-05T12:11:35.957

Java 8 流 api 提供了一个优雅的替代方案：

```
public static void main(String[] args) {
    double avg = Arrays.stream(new int[]{1,3,2,5,8}).average().getAsDouble();

    System.out.println("avg: " + avg);
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-17T08:28:45.140

```
-while(int i=0; i < data.length; i++) 
+for(int i=0; i < data.length; i++) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T10:09:08.777

试试这个方法

```
public void average(int[] data) {  
    int sum = 0;
    double average;

    for(int i=0; i < data.length; i++){
        sum = sum + data[i];
    }
    average = (double)sum/data.length;
    System.out.println("Average value of array element is " + average);    
} 
```

如果需要返回平均值，则需要使用**双**关键字而不是**void**关键字，并且需要返回值**返回平均值**。

```
public double average(int[] data) {  
    int sum = 0;
    double average;

    for(int i=0; i < data.length; i++){
        sum = sum + data[i];
    }
    average = (double)sum/data.length;
    return average;    
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-02T16:14:57.263

找到一些数字的平均值的最好方法是尝试 **Classes** ......

```
public static void main(String[] args) {
    average(1,2,5,4);

}

public static void average(int...numbers){
    int total = 0;
    for(int x: numbers){
        total+=x;
    }
    System.out.println("Average is: "+(double)total/numbers.length);

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-05T11:56:44.527

好吧，要计算数组的平均值，您可以考虑使用`for`循环而不是 while 循环。

因此，根据您的问题，让我假设一个数组为`arrNumbers`（这里我正在考虑与您的问题中相同的数组元素）

```
int arrNumbers[] = new int[]{1, 3, 2, 5, 8};
int sum = 0;

for(int a = 0; a < arrNumbers.length; a++)
{
   sum = sum + arrNumbers[a];
}

double average = sum / arrNumbers.length;

System.out.println("Average is: " + average); 
```

您也可以使用`scanner`类。它留给你。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-17T08:33:24.773

几个问题：

`while`应该是`for` 你没有返回一个值，但你已经声明了一个返回类型为double

```
double average = sum / data.length;; 
```

sum 和 data.length 都是整数，因此除法将返回一个整数 - 检查您的类型

双分号，可能不会破坏它，只是看起来很奇怪。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-06-02T13:05:30.173

如果我们想添加一个数组的数字并找到它们的平均值，请遵循这个简单的方法！......

```
public class Array {

    public static void main(String[] args) {

        int[]array = {1,3,5,7,9,6,3};
        int i=0;
        int sum=0;
        double average=0;
        for( i=0;i<array.length;i++){
            System.out.println(array[i]);
            sum=sum+array[i];
        }
        System.out.println("sum is:"+sum);
        System.out.println("average is: "+(double)sum/vargu.length);

    }

} 
```

# c# - 我想测试一个自写的绑定模块

> ID：12002334
> 
> 赞同：0
> 
> 时间：2012-08-17T08:27:33.287
> 
> 标签：c#, unit-testing, binding, ninject

如果我的内核模块的所有绑定都设置为正确的目标，我想进行单元测试。我发现最简单的方法是创建一个加载模块的内核，获取每个绑定类型并检查它是否是正确的：

```
this.kernel = new StandardKernel(new MainKernelModule());
Assert.That(this.kernel.Get<IMyClass>() is MyClass); 
```

但是有些类依赖于与服务器的连接，这不应该在我的单元测试中使用。这就是为什么内核不能在单元测试环境中创建这些类的原因。

我的问题：如何获得 IBinding 的目标类？

```
var module = new MainKernelModule();
var kernel = new StandardKernel(module);

foreach (IBinding binding in module.Bindings)
{
     // if (binding.BindingTarget is MyClass)
     // Debug.WriteLine("Yeah");
} 
```

我希望有人能帮助我。不幸的是，我在谷歌上一无所获。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:59:45.827

你不能或者你能告诉我什么是目标类

```
Bind<IFoo>().ToMethod(ctx=> IsItSunny() ? New SunnyFoo() : BadWeatherFoo()) 
```

我们通常做的不是直接测试绑定。但是要编写集成测试，我们将接口类替换为其他系统，例如通过模拟数据库访问或 Web 服务并测试系统功能。这可以检测到几乎所有的绑定问题。当您进行手动集成测试时，可以很快检测到错误绑定到外部系统的小风险。

# jasper-reports - 是否可以在使用 subDataSet 的表组件中从主报告中引用 JasperReport 字段？

> ID：12002339
> 
> 赞同：0
> 
> 时间：2012-08-17T08:27:52.130
> 
> 标签：jasper-reports

我正在处理一个包含各种字段以及子数据集的报告：

```
<subDataset name="mySubDataset">
    <field name="name" class="java.lang.String"/>
    <field name="net" class="java.lang.String"/>
    <field name="tax" class="java.lang.String"/>
    <field name="total" class="java.lang.String"/>
</subDataset>
<parameter name="myDataSource" class="net.sf.jasperreports.engine.JRDataSource" isForPrompting="false"/>
<field name="totalAmount" class="java.lang.String"/> 
```

我使用如下表组件迭代“mySubDataset”：

```
<jr:table>
   <datasetRun subDataset="mySubDataset">
      <dataSourceExpression><![CDATA[$P{myDataSource}]]></dataSourceExpression>
   </datasetRun>
... 
```

我想知道的是：是否可以引用表中的“totalAmount”字段？即我想在使用“totalAmount”字段的表的末尾添加一个“total”行。例如，也许像这样使用 columnFooter eleemnt：

```
<jr:column width="110">
    <jr:tableHeader height="25">
        <staticText>
            <reportElement x="0" y="0" width="110" height="25" />
        </staticText>
    </jr:tableHeader>
    <jr:columnHeader height="25">
        <textField>
            <reportElement x="0" y="0" width="110" height="25"/>
            <textFieldExpression><![CDATA[$R{netCol}]]></textFieldExpression>
        </textField>
    </jr:columnHeader>
    <jr:columnFooter height="25">
        <textField>
            <reportElement x="0" y="0" width="110" height="25" />
            <textFieldExpression><![CDATA[$F{totalAmount}]]></textFieldExpression>
        </textField>
    </jr:columnFooter>
    <jr:detailCell height="25">
        <textField>
            <reportElement x="0" y="0" width="110" height="25" />
            <textFieldExpression><![CDATA[$F{net}]]></textFieldExpression>
        </textField>
    </jr:detailCell>
</jr:column> 
```

我觉得我在叫错树，“正确”的解决方案是首先将 totalAmount 存储在 subDataset 中，但是我不确定这是否适合我。

更新：问题已[在 jasper 论坛中交叉发布](http://jasperforge.org/plugins/espforum/view.php?group_id=102&forumid=103&topicid=100324)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T12:25:11.360

解决方案是将我的主数据源中的字段添加为 subDataset 的参数，如下所示：

```
<subDataset name="mySubDataset">
  <parameter name="totalAmount" class="java.lang.String"/>
  <field name="name" class="java.lang.String"/>
  <field name="net" class="java.lang.String"/>
  <field name="tax" class="java.lang.String"/>
  <field name="total" class="java.lang.String"/>
</subDataset> 
```

然后像这样在表的 datasetRun 中填充参数：

```
<datasetRun subDataset="myDataSet">
    <datasetParameter name="totalAmount">
        <datasetParameterExpression><![CDATA[$F{totalAmount}]]></datasetParameterExpression>
    </datasetParameter>
    <dataSourceExpression><![CDATA[$P{myDataSource}]]></dataSourceExpression>
</datasetRun> 
```

然后我可以像这样引用 tableFooter 中的 totalAmount：

```
<jr:tableFooter height="25">
    <textField>
        <reportElement x="0" y="0" width="200" height="25" style="SubSummary"/>
        <textFieldExpression><![CDATA[$P{totalAmount}]]></textFieldExpression>
    </textField>
</jr:tableFooter> 
```

# vb.net - 将数据列乘以参数

> ID：12002342
> 
> 赞同：1
> 
> 时间：2012-08-17T08:28:10.883
> 
> 标签：vb.net, datatable, operation

我有一个 DataColumn，我想将其中的所有行乘以某个值。假设我有一个名为*price*的列，[DataColumn.Expression](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression)属性允许我通过以下方式执行此操作：

```
MyDataColumn.Expression = "price * 0.0862" 
```

但是，如果我确实想使用参数怎么办？我想写：

```
Dim tax As Double = 0.0862
MyDataColumn.Expression = "price * tax" 
```

但是在 Visual Basic 中这样做实际上将列*price*与列*tax*相乘，这不是我想要的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:30:07.417

为什么不直接使用这样的变量：

```
Dim tax As Double = 0.0862
MyDataColumn.Expression = "price * " & tax 
```

**编辑：**

您必须先转换`tax`为字符串`InvariantCulture`：

```
Dim tax As Double = 0.0862
MyDataColumn.Expression = "price * " & tax.ToString(CultureInfo.InvariantCulture) 
```

因为否则，`MyDataColumn.Expression`将`price * 0,0862`代替，`price * 0.0862`并且 DataColumn 将抱怨语法错误。

# ruby - 错误处理：如何正确抛出/捕获错误

> ID：12002347
> 
> 赞同：1
> 
> 时间：2012-08-17T08:28:36.413
> 
> 标签：ruby

我有一个调用其他两种方法的方法：

```
def first_method
  second_method

  # Don´t call this method when something went wrong before
  third_method
end 
```

second_method 调用其他方法：

```
def second_method
  fourth_method
  fifth_method
end 
```

假设 Fifth_method 有一个 begin/rescue 语句：

```
def fifth_method
  begin
    # do_something
  rescue Error => e
    # 
  end
end 
```

现在我想避免在 Fifth_method 抛出错误时调用 third_method。我/你将如何在 Ruby 中最优雅地解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T08:52:00.983

在我看来这很明显，但无论如何

```
def first_method
  begin 
    second_method
  rescue
    return
  end
  third_method
end 
```

这种构造（没有明确的异常类型）将捕获`StandartError`异常。

为避免与其他异常相交，您可以创建自己的异常类：

```
class MyError < StandardError; end 
```

然后使用它

```
begin 
  second_method
rescue MyError => e
  return
end 
```

请注意，您不应继承异常，`Exception`因为这种类型的异常来自环境级别，其中的异常`StandardError`旨在处理应用程序级别的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T09:22:02.433

如果你不想使用异常，你可以只返回一个状态：

```
def fifth_method
  # do_something
  true
rescue Error => e
  false
end

def first_method
  if second_method
    third_method
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T08:39:31.003

我认为最简单的方法是从 Fifth_method 中删除错误捕获并将其移至 first_method

```
def first_method
  begin 
     second_method

     third_method
  rescue Error => e

  end
end

def fifth_method
   # do_something

end 
```

# c# - 在单个 CMD 进程中读取和写入命令

> ID：12002351
> 
> 赞同：0
> 
> 时间：2012-08-17T08:28:45.910
> 
> 标签：c#, cmd

嗨，我想启动一个 cmd 进程，我可以从中读取和写入我的 Windows 应用程序表单。我想强调我不想继续为我输入的每个命令创建一个新的 cmd 进程。我的代码现在一团糟。. . 我现在有一个只有 2 个文本框和一个按钮的 Windows 窗体应用程序。Textbox1 用于输出。Textbox2 用于输入。按钮是发送输入。

```
 Process cmd = new Process();
    ProcessStartInfo psi = new ProcessStartInfo()
    {
         FileName = "cmd.exe",

         UseShellExecute = false,
         CreateNoWindow = true,
         RedirectStandardOutput = true,
         RedirectStandardInput = true
    };

    StreamReader sr;
    StreamWriter sw;

    private void Form1_Load(object sender, EventArgs e)
    {
        cmd.StartInfo = psi;
        cmd.Start();

        sr = cmd.StandardOutput;

        sw = cmd.StandardInput;
        sw.AutoFlush = true;

        System.Threading.Thread t = new System.Threading.Thread(new System.Threading.ThreadStart(GetOutput));
        t.Start();

    }

    delegate void Write(string Text);
    private void SetTextBox(string Text)
    {
        if (textBox1.InvokeRequired)
        {
            textBox1.Invoke(new Write(SetTextBox),Text);
        }
        else
            textBox1.Text += Text;
    }

    private void GetOutput()
    {
        while (true)
        {
            if (sr.Peek() != -1)
                SetTextBox(sr.ReadToEnd());
            else
                System.Threading.Thread.Sleep(1000);

        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        sw.WriteLine(textBox2.Text);
        textBox2.Clear();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:30:07.233

尝试使用 /k 参数，它告诉 CMD.exe 打开，运行指定的命令，然后保持窗口打开。

# java - 如何查看 UmbrellaException 的完整 statcktrace（或根本原因）？

> ID：12002352
> 
> 赞同：0
> 
> 时间：2012-08-17T08:28:48.200
> 
> 标签：java, gwt

我的 GWT 应用程序的客户端部分出现了一个错误（可能是 NPE）。它仅在部署时发生。

我得到的唯一消息是 JS 控制台中的 UmbrellaException。没有堆栈跟踪，没有根本原因。

我无法使用 gwt 插件在本地重现该错误，这将向我显示完整的堆栈跟踪。

所以我被困住了。

有什么办法：

*   在服务器中记录客户端异常？
*   或者在 js 控制台中打印堆栈跟踪？

谢谢

编辑：供将来参考：如果部署时出现错误而不是 gwt 运行器，那是因为错误与编译的 JS 有关。就我而言，正则表达式的实施不当。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T14:16:07.110

可以将 GWT 开发模式与远程服务器一起使用。启动配置必须包括“-noserver”开关以及正确的“-startupUrl”（对应于远程服务器）。您可以像往常一样从本地浏览器访问它：

```
http://my-remote-server/example?gwt.codesvr=127.0.0.1:9997 
```

请注意，HTTP 主机是远程服务器，但“gwt.codesvr”仍然指向 localhost。这意味着应用程序将在“my-remote-server”中运行服务器端代码，但将使用本地 Eclipse 中的客户端代码，允许您对其进行调试。换句话说，URL 中的“gwt.codesvr”告诉 GWT 浏览器插件从 localhost 即时编译代码，而不是使用远程服务器上的已编译 javascript 代码。我发现这对于调试无法在本地服务器中重现的客户端异常非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:55:14.407

为了捕获运行时异常，我采用了以下方法：

1.  为我的应用程序引入了故障排除 GWT 模块，例如`MyAppSnapshot.gwt.xml`. 在其中我要求 GWT 编译器包含堆栈跟踪数据：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <module rename-to='client'>
       <inherits name='com.teknoscan.aims.ui.MyAppBase' />
       <set-property name="compiler.stackMode" value="emulated" />
       <set-configuration-property name="compiler.emulatedStack.recordFileNames" value="true" />
    </module> 
    ```

    （还有一个`MyAppProduction.gwt.xml`删除了上述属性。有关这些属性含义的更多信息，请参见[WebModeExceptions](http://code.google.com/p/google-web-toolkit/wiki/WebModeExceptions)。）

2.  在我的应用程序中引入了一个窗格，当[GWT.UncaughtExceptionHandler()](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/core/client/GWT.UncaughtExceptionHandler.html)捕获运行时异常时会显示该窗格。辅助方法解析并设置堆栈跟踪的文本（如果可用）：

    ```
     public void setThrowable(Throwable caught) {
      if (!(caught == null || stackTraceTextArea == null)) {
         if (caught.getStackTrace().length == 0) {
            stackTraceTextArea.setText("No stack trace available.");
         } else {
            StringBuffer stb = new StringBuffer();
            stb.append(caught.getMessage() + "\n\nStack trace:\n");
            for (int i = 0; i < caught.getStackTrace().length; i++) {
               stb.append(caught.getStackTrace()[i].toString() + "\n");
            }
            stackTraceTextArea.setText(stb.toString());
         }
      } 
    ```

    （有点重，但结合编译器属性给了我相当清晰的 Java 堆栈跟踪信息。当然不适用于生产构建，因为生成的 JS 更大，您的用户可能看不到堆栈跟踪。）

# prolog - 从两个目标中扣除

> ID：12002356
> 
> 赞同：0
> 
> 时间：2012-08-17T08:29:00.773
> 
> 标签：prolog

假设我有这样的目标：

```
times(0,_,0).                          % zero times X is zero
times(X,Y,Z) :- times(Y,X,Z) ,!.       % X * Y = Y * X 
```

当我试图问：

```
?- times(0,1,X). 
```

我得到了双重答案：

```
X = 0 ;
X = 0. 
```

可能是因为第一个答案是从 推导出来的`fact`，第二个答案是从 推导出来的`rule`。
问题 - 如何让序言只给出一个答案而不是两个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:43:28.887

添加剪切以“确认”第一选择：

```
times(0,_,0) :- !. 
```

**或**从第二个中禁止 0：

```
times(X,Y,Z) :- X \= 0, times(Y,X,Z). 
```

我已经删除了剪辑，但如果有更多规则，请留下它。但我认为“自反性”规则会给你带来麻烦，并且会出现不适当的递归。

# forms - 如何在访问 2010 中将查找字段值设置为空/空白？

> ID：12002361
> 
> 赞同：0
> 
> 时间：2012-08-17T08:29:23.673
> 
> 标签：forms, ms-access, null, field, lookup

我需要一些有关 Access 2010 表单的帮助。我的表单有许多字段（来自一个表）。其中一个字段是逻辑字段。如果用户选择 true，则应启用下一个字段（文本字段）。这工作正常 - 我创建了一个更新后事件过程。我遇到的问题是，如果用户不小心选择了 true，然后为文本字段选择了一个值（文本字段查找查询 - 它是一个查找字段，它可以有多个值 - 用户可以从列表中选择/检查尽可能多的内容，它们将存储到文本字段中，以逗号分隔）。

如果用户返回并将逻辑字段设置为 false，我将如何将文本字段（查找字段）值设置为空白？me.textfield.value = null 给出错误。

谁能帮帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T17:27:45.303

请记住，实际上多值列实际上是规范化的数据表。

所以显示看起来像这样：

![在此处输入图像描述](../Images/2187a1613a4860b526eddc52ac227827.png)

要清除在此子表中选择的记录，这是您的多值选择，您可以使用上面按钮后面的代码：

```
 Dim rstChild      As DAO.Recordset

  Set rstChild = Me.Recordset.Color.value

  Do While rstChild.EOF = False
     rstChild.Delete
     rstChild.MoveNext
  Loop

  Me.Color.Requery 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T02:44:18.650

插入空白查阅字段的一种简单方法是在设计视图中选择该字段，然后单击字段属性中的查阅选项卡。在 Row Source 的第一个条目之前插入以下“”；

# sql - 按两个 DATETIME 列的条件排序

> ID：12002376
> 
> 赞同：1
> 
> 时间：2012-08-17T08:30:25.540
> 
> 标签：sql, sql-server-2005

我阅读了[ORDER BY 条件](https://stackoverflow.com/questions/2367457/order-by-condition)和[如何在“order by”中添加条件？](https://stackoverflow.com/questions/4213270/how-to-add-condition-in-order-by)但这些不能回答我的问题。

我有 2 个名为`CREATION_DATE`和的日期时间列`UPDATE_DATE`。

我想按以下方式排序（使用`ORDER BY`子句）：

*   `CREATION_DATE`如果`CREATION_DATE = UPDATE_DATE`

    或者

*   `UPDATE_DATE`在其他情况下。

我写

```
SELECT * FROM Table1
ORDER BY
CASE Table1.CREATION_DATE
    WHEN Table1.CREATION_DATE = Table1.UPDATE_DATE THEN Table1.CREATION_DATE
    ELSE Table1.UPDATE_DATE
END ASC 
```

但它不起作用，我在`=`符号处收到错误。

我尝试使用其他运算符...当然，我犯了错误，但我不知道在`WHEN`语句中使用运算符是否正确。

不接受运营商`WHEN`吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T08:31:59.230

尝试

```
ORDER BY
CASE WHEN Table1.CREATION_DATE = Table1.UPDATE_DATE
     THEN Table1.CREATION_DATE
     ELSE Table1.UPDATE_DATE
END ASC 
```

或更简单

```
ORDER BY Table1.UPDATE_DATE ASC 
```

`UPDATE_DATE`因为只有当它等于 时，您才想订购`CREATION_DATE`。在这种情况下，您也可以订购`UPDATE_DATE`。在其他情况下，您希望按`UPDATE_DATE`. 所以只能按那个顺序。这是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:32:04.313

尝试

```
ORDER BY UPDATE_DATE, CREATION_DATE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:32:22.753

```
SELECT * FROM Table1
ORDER BY
CASE 
    WHEN Table1.CREATION_DATE = Table1.UPDATE_DATE THEN Table1.CREATION_DATE
    ELSE Table1.UPDATE_DATE
END ASC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T08:38:09.047

在 C++/java/C#“类比”中，SQL`Case`语句既可以用作 a `switch()`，也可以用作`if / elseif / if`构造。

例如，以下两项都是合法的：

```
declare @flag bit
set @flag = 0
select case 
    when @flag = 1
        then '1 selected'
    else
        '0 selected'
    end 
```

和

```
declare @flag bit
set @flag = 0
select case @flag
    when 1
        then '1 selected'
    else
        '0 selected'
    end 
```

# windows - 编译的Delphi资源在部分中文Windows下无法读取

> ID：12002378
> 
> 赞同：0
> 
> 时间：2012-08-17T08:30:39.197
> 
> 标签：windows, delphi, dll, compiler-construction, resources

我分两步在 dll 文件中编译了一个资源

```
brcc32 Xresource.rc
dcc32 resource.dpr 
```

resource.dpr 是一个 delphi 项目，包含

```
library resource;

{$R XResource.res}

begin
end. 
```

该问题出现在某些（不是全部）中文 Windows（XP 和 7）上。在这些机器上，我无法从资源中读取字符串。

任何想法？我应该以不同的方式编译它吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:26:03.473

使用现代 Unicode 就绪版本，您只需将字符串保存到 DFM 中。

您也可以尝试使用 resourcestring 关键字。

# sqlite - 使用 Xcode 更新 Sqlite 数据库的字段值

> ID：12002390
> 
> 赞同：0
> 
> 时间：2012-08-17T08:31:09.853
> 
> 标签：sqlite, sql-update, insert-update

我有一个带有保存按钮的应用程序。当我单击保存按钮时，应用程序应自动更新一行的值并将其设置为 YES。

到目前为止，我有以下代码，但它实际上并没有工作。请记住，我的应用程序是一个选项卡菜单应用程序。在第一个视图中，我有表格单元格，单击时我转到另一个视图控制器，即详细信息视图控制器，其中存在按钮。

当我单击按钮时，数据库中“Fav”字段的值应该从 NO 变为 YES。

这是我的代码：

```
- (IBAction)AddButClick:(UIButton *)sender {

    [AddBut setImage:[UIImage imageNamed:@"apple-logo copy.png"] forState:UIControlStateSelected];
    [AddBut setImage:[UIImage imageNamed:@"apple-logo copy.png"] forState:UIControlStateHighlighted];
    Favo = [[NSMutableArray alloc] initWithCapacity:1000000];

  //  NSLog(authorNAme);

    @try {
        NSFileManager *fileMgr = [NSFileManager defaultManager];
        // NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"dictionary.sqlite"];
        //NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"authorsDb2.sqlite"];
        //     NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"FinalDb.sqlite"];
        //NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"xxJuridique-FINAL-OK.sqlite"];

        NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"data.sqlite"];

        BOOL success = [fileMgr fileExistsAtPath:dbPath];
        if(!success)
        {
            NSLog(@"Cannot locate database file '%@'.", dbPath);
        }
        if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
        {
            NSLog(@"An error has occured: %@", sqlite3_errmsg(db));

        }

        sqlite3_stmt *compiled_statement1;
        if(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK) {
            //const char *sqlStatement = 
            NSString *formatedSql = [NSString stringWithFormat:@"UPDATE Sheet1 SET Fav = 'YES'  WHERE field3 = '%@' " , authorNAme2];

           NSLog(@"This is the query %@",formatedSql);
            const char *sql = [formatedSql UTF8String];
            NSLog(@" !!!!!!!! In the middle of it !!!!!!!!!!!!");
            if (sqlite3_prepare_v2(db, sql, -1, &compiled_statement1, NULL) != SQLITE_OK) {
                NSLog(@"!!!!!!!!!!!!!!!!!!!ERRRRROOOOOOORRRRRRRRR!!!!!!!!!!!!!!!!!!!!!!!!!");
                NSAssert1(0, @"Error: failed to prepare statement with message '%s'.", sqlite3_errmsg(db));
            }
        //    sqlite3_exec(db, [compiled_statement1 UTF8String], NULL, NULL, NULL);
//sqlite3_bind_text(compiled_statement1, 1, [formatedSql UTF8String], -1, SQLITE_TRANSIENT);

        int success = sqlite3_step(compiled_statement1);

        sqlite3_reset(compiled_statement1);
        if (success != SQLITE_ERROR) {
            NSLog(@"Successfully inserted");
            sqlite3_last_insert_rowid(db);
        }
            sqlite3_finalize(compiled_statement1);

        }

        //        
//        BOOL success = [fileMgr fileExistsAtPath:dbPath];
//        
//        if(!success)
//        {
//            NSLog(@"Cannot locate database file '%@'.", dbPath);
//        }
//        if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
//        {
//            NSLog(@"An error has occured: %@", sqlite3_errmsg(db));
//            
//        }

        // const char *sql = "SELECT F_Keyword FROM wordss";  
        const char *sql = "SELECT * FROM Sheet1";
        NSLog(@"Successfully selected from database");
        sqlite3_stmt *sqlStatement;
        if(sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK)
        {
            NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db));

        }else{

            NSLog(@"Got in the else tag");

            while (sqlite3_step(sqlStatement)==SQLITE_ROW /*&& PAss == NO*/) {

                NSLog(@"Got in the while tag");

                Author * author = [[Author alloc] init];
                NSLog(@"Author initialized");

                author.name = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,10)];
                NSLog(@"Initialization ok");
           //     NSLog(author.name);

                if(/*author.name == @"NO" &&*/ HighLighted == NO){
                    //const char *sql2 = "INSERT INTO Sheet1 ";

                    [AddBut setImage:[UIImage imageNamed:@"apple-logo copy.png"] forState:UIControlStateNormal];
                    NSLog(@"We have not selected it as fav yet");
                  //  [AddBut setSelected:NO]; //btn changes to normal state
                    NSLog(@"The button was NOt highlighted and now is");
                    HighLighted = YES;

                    //  PAss = YES;
                    //  [self release];
                     break;

                }

                else
                {

                    NSLog(@"We have selected it as fav");

                    [AddBut setImage:[UIImage imageNamed:@"apple-logo.png"] forState:UIControlStateNormal];
                    [AddBut setSelected:NO]; //btn changes to normal state
                    NSLog(@"The button was highlighted and now is NOt");

                    HighLighted = NO;
                     break;

                   // [self viewDidLoad];
                  //  PAss = YES;

                }
         //       [Favo release];

         //       NSLog(Favo);

//                author.name = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,2)];
//                author.title = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,2)];
//                author.genre = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement, 4)];
//                [theauthors addObject:author];
            }
        }
    }
    @catch (NSException *exception) {

        NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db));

    }
    @finally {
        //   sqlite3_finalize(sqlStatement);
        sqlite3_close(db);

        return Favo;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:45:11.910

问题不在于添加，而是点击，它实际上是在 viewWillAppear 中，我应该在其中完成：

```
 [self authorList2];
 [self.tableView reloadData] ; 
```

为了加载可变数组然后重新加载数据

# javascript - 在使用 Django 静态文件时动态设置图像时，只有绝对路径才能与 Jquery 一起使用

> ID：12002393
> 
> 赞同：0
> 
> 时间：2012-08-17T08:31:33.123
> 
> 标签：javascript, jquery, django, django-staticfiles

我有一些 jquery 代码可以在用户单击按钮时切换按钮的活动与非活动图像。当我只是使用相对路径从 Windows 静态运行所有内容时，它工作正常。

但是，一旦我将它迁移到我的 django 开发框，如果我通过 jquery 设置它的相对路径，单击按钮将无法加载所需的图像。所有其他静态图像都可以通过具有相对路径的 css 正常服务，但是如果我在文档加载时通过 jquery 设置相对路径，例如，它就不起作用。我已经通过检查元素确认路径相同并且 jquery 正确设置它们。

尝试各种相对路径20分钟后，发现设置开发服务器的绝对路径是可行的，即“url('http://127.0.0.1:8000/static/img/img.jpg').I'我想让相对路径工作，因为这种方法在灵活性和部署方面有其局限性。

我是否遇到了 django 静态文件服务的限制？我发现错误了吗？还是我缺少什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:50:53.473

我不知道 Django，但是当您的服务器端框架为您提供根路径时，一种方法是将其导出到主文档中的 JavaScript：

```
<script>
 templateRootPath = {{% static "path to your template dir" %}}
</script> 
```

然后在适当的地方使用：

```
$('#mybutton').css('background,"url('"+templateRootPath+"/img/img.jpg')"); 
```

# django - 让不同的模型视图在 Django-admin 中为同一个模型工作

> ID：12002394
> 
> 赞同：1
> 
> 时间：2012-08-17T08:31:33.970
> 
> 标签：django, django-admin

我试图在 django-admin 中为同一模型获取两个模型视图，我指的是这个：[多个模型视图](https://stackoverflow.com/questions/2223375/multiplue-modeladmins-views-for-same-model-in-django-admin)，似乎在解决它时遇到了一些问题。

代码：

```
from models import Student

class StudentAdmin(admin.ModelAdmin):
    list_display = ('displayname', 'StudentID','Parent_First_Name')
    search_fields = ['displayname',]

    def StudentID(self, obj):
      return '%s' % obj.pk
    StudentID.short_description = 'StudentID'
    def Parent_First_Name(self, obj):
        try:
            adult = obj.relationships.filter(role=StudentAdultRelationship.PARENT)[0].adult
            return '%s' % adult.profile.lastname
        except Exception:
            return '' 
```

错误：“函数”对象没有属性“字段”。

不确定错误在哪里。需要一些关于错误在哪里的指导......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:34:31.193

您可能想要更改：

`def ChildTeacherAdmin(StudentAdmin):`

至

`class ChildTeacherAdmin(StudentAdmin):`

# azure - 检查当前 Azure CloudDrive 是否已挂载

> ID：12002398
> 
> 赞同：0
> 
> 时间：2012-08-17T08:31:59.147
> 
> 标签：azure

`Azure CloudDrive.Unmount()`会例外

```
[InteropCloudDriveException: Exception of type 'Microsoft.WindowsAzure.CloudDrive.Interop.InteropCloudDriveException' was thrown.]
   Microsoft.WindowsAzure.CloudDrive.Interop.InteropCloudDrive.Unmount(String urlOrMountPoint) +348
   Microsoft.WindowsAzure.StorageClient.CloudDrive.Unmount() +71 
```

当没有安装驱动器时。

我的问题是：有没有办法检查当前的 clouddrive 是否已安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:37:57.937

看看 CloudDrive.GetMountedDrives()：http: [//msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.clouddrive.getmounteddrives](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.clouddrive.getmounteddrives)。

# javascript - 使用按钮关闭 iframe 模式

> ID：12002399
> 
> 赞同：0
> 
> 时间：2012-08-17T08:32:01.677
> 
> 标签：javascript, iframe

我正在使用以下内容从书签加载 iframe：

```
javascript:(function(d){
var%20modal=document.createElement('iframe');
modal.setAttribute('src','http://myurl.com/page.html?url=
'+encodeURIComponent(window.location.href)+'&
page_title='+document.title);
modal.setAttribute('scrolling','no');
modal.className='modal';
document.body.appendChild(modal);
var c=document.createElement('link');
c.type='text/css';
c.rel='stylesheet';
c.href='//myurl.com/css/wl_iframe.css';
document.body.appendChild(c);
}(document)); 
```

并关闭它我正在尝试：

```
<button onclick="parent.$.iframe.close();">X Close Window</button> 
```

我也试过：

```
<button onclick="modal.$.iframe.close();">X Close Window</button> 
```

但他们没有工作，他们什么也不做。

我知道我可以使用：

```
<a href="underneath url" target="_parent">X Close Window</a> 
```

但这会导致浏览器重新刷新他们正在查看的页面，并且用户必须按两次后退按钮才能到达之前的页面，这并不理想。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:46:54.893

您应该在 iframe 中添加一些名称或 ID

```
javascript:(function(d){
var modal=document.createElement('iframe');
modal.setAttribute('src','http://myurl.com/page.html?url='+encodeURIComponent(window.location.href)+'&page_title='+document.title);
modal.setAttribute('scrolling','no');

modal.setAttribute('name', 'my_modal_window');

modal.className='modal';
document.body.appendChild(modal);
var c=document.createElement('link');
c.type='text/css';
c.rel='stylesheet';
c.href='//myurl.com/css/wl_iframe.css';
document.body.appendChild(c);
}(document)); 
```

接着

```
<a href="#" onclick="var modals = document.getElementsByName('my_modal_window'), i = modals.length; while(i--){ modals[i].parentNode.removeChild(modals[i])}">X close window</a> 
```

**编辑** 工作解决方案，刚刚在 Chrome JS 控制台中的 stackoverflow 上进行了测试：

```
(function(d){
var modal=document.createElement('iframe');
modal.setAttribute('src','http://myurl.com/page.html?url='+encodeURIComponent(window.location.href)+'&page_title='+document.title);
modal.setAttribute('scrolling','no');

modal.setAttribute('name', 'my_modal_window');

modal.className='modal';
document.body.appendChild(modal);
var c=document.createElement('link');
c.type='text/css';
c.rel='stylesheet';
c.href='/css/wl_iframe.css';
document.body.appendChild(c);

var a = document.createElement('a');
a.onclick= function(){
   var modals = document.getElementsByName('my_modal_window'),i = modals.length;
   while (i--) {
      modals[i].parentNode.removeChild(modals[i]);
   }
};
a.innerHTML = 'Close Iframes';
document.body.appendChild(a);
}(document)) 
```

# vim - Vim：检测我是否在 netrw

> ID：12002401
> 
> 赞同：0
> 
> 时间：2012-08-17T08:32:07.607
> 
> 标签：vim

我有一个 Vim 映射来开始搜索（带有 ack.vim 插件的 ack-grep）从当前目录的目录中寻找一个模式（所以是 之后的结果`:pwd`）。当我查看缓冲区时，此映射有效。

我想在 netrw 中使用相同的映射。但是，我想将当前目录 (:pwd) 更改为 netrw 显示的目录，因此搜索将从我正在查看的目录开始。我知道我可以使用 netrw`c`命令执行此操作，但显然我只想在我*实际上在*netrw 中时才给出此命令。

**问题** 如何检测当前窗口是否处于 netrw“模式”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T08:46:02.963

您可以测试`filetype`：

```
if &ft ==# "netrw"
    " your code here
endif 
```

# android - Android - ListView 项目更改项目的高度

> ID：12002403
> 
> 赞同：1
> 
> 时间：2012-08-17T08:32:08.697
> 
> 标签：android, android-layout, accordion

我有一个自定义 ListView，其中包含一些 TextView 和一个按钮，ListView 项目视图的默认高度是 100dp，但是在单击按钮时，我想将该特定行项目的高度增加到例如 500dp。问题是我可以增加行的高度，但它不会增加列表内容视图的高度![在此处输入图像描述](../Images/3c01b73a1b30aca012c69b14bebb38eb.png)

这是当我单击“+”按钮后列表折叠的时候，它会展开，但看起来很奇怪。 ![在此处输入图像描述](../Images/5bb74f63857d1d1b41c7a8ea1937363f.png)

我需要让它看起来像手风琴类型视图。

**更改高度的代码：**

```
LinearLayout row_view = (LinearLayout)v.getParent().getParent().getParent().getParent().getParent().getParent();
                if(mCurrentBg == R.drawable.widget_minus)
                {
                    v.setBackgroundResource(R.drawable.widget_plus);
                    mCurrentBg = R.drawable.widget_plus;
                    row_view.getLayoutParams().height = (int) Common.convertDpToPixel(100, context);                    
                }
                else
                {
                    mCurrentBg = R.drawable.widget_minus;
                    row_view.getLayoutParams().height =(int) Common.convertDpToPixel(700, context);                 
                    v.setBackgroundResource(R.drawable.widget_minus);                   
                }
                row_view.requestLayout();
                row_view.invalidate(); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T22:55:27.220

你检查过 Android 的[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T13:00:18.100

请在此处查看实现手风琴布局的开源库：[Android Accordion View](https://github.com/hamsterready/android-accordion-view#android-accordion-view)。

请给我反馈

希望有帮助。

# ruby-on-rails - 如何根据内部散列中的键值最有效地迭代散列散列？

> ID：12002407
> 
> 赞同：0
> 
> 时间：2012-08-17T08:32:23.017
> 
> 标签：ruby-on-rails, json, hash-of-hashes

我有一个网站 API 返回的 JSON 哈希值，我想根据内部哈希值中的特定键值对其进行解析和显示。

我可以想到可以实现这一目标的解决方案，但它们会占用多行代码并且看起来效率不高。当然，在 Rails 中必须有一种本地方式，因为重点是约定优于配置。我用谷歌搜索了一下，但没有找到任何涵盖这个问题的东西。

来自 API 的示例响应：

```
[{"banner":"01197271","birthday":"1991-01-11","committee_id":1,"created_at":"2012-08-08T01:56:02-05:00","email":"me@example.com","first_name":"Dan","graduation_date":"May 2013","hometown":"San Antonio","hours_enrolled":15,"id":2,"image":{"url":null,"thumb":{"url":null},"large":{"url":null}},"invitation_accepted_at":null,"invitation_limit":null,"invitation_sent_at":null,"invitation_token":null,"invited_by_id":null,"invited_by_type":null,"last_name":"Tester","local_apt":"","local_city":"San Antonio","local_state":"Texas","local_street":"One UTSA Circle","local_zip":"78249","major":"Computer Science","permanent_apt":"","permanent_city":"","permanent_state":"","permanent_street":"One UTSA Circle","permanent_zip":"","phone":"5558813284","same_address":true,"tour_trained":false,"updated_at":"2012-08-17T03:35:26-05:00","utsa_id":"uoi431"},
{"banner":"","birthday":"1990-10-25","committee_id":null,"created_at":"2012-08-03T16:19:23-05:00","email":"you@example.com","first_name":"Test","graduation_date":null,"hometown":null,"hours_enrolled":null,"id":1,"image":{"url":null,"thumb":{"url":null},"large":{"url":null}},"invitation_accepted_at":null,"invitation_limit":null,"invitation_sent_at":null,"invitation_token":null,"invited_by_id":null,"invited_by_type":null,"last_name":"User","local_apt":"","local_city":"","local_state":"","local_street":"","local_zip":"","major":null,"permanent_apt":"","permanent_city":"","permanent_state":"","permanent_street":"","permanent_zip":"","phone":"","same_address":false,"tour_trained":false,"updated_at":"2012-08-15T10:05:54-05:00","utsa_id":""}] 
```

潜在的解决方案是遍历每个内部散列，确定相关键值的值，然后根据键值与已测试散列相比的位置进行存储。完成后，返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:53:31.770

好的，如果您有设置为解析此信息的对象，这些对象可以根据您的哈希参数构建自己。所以你可以做这样的事情

```
object = MyObject.create(your_hash_parameters) 
```

`your_hash_parameters`您在示例中提供的参数在哪里。

我不确定如果有比你的对象知道的更多的参数会发生什么，如果它仍然会自行构建。如果是这种情况，您可以使用该`delete_if`方法排除不需要的属性。

还有一点需要注意，如果这不是您想要保存到数据库中的内容，那么它只是为了显示临时信息。我会建立一个模型`attr_accessors`，代表您正在显示的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:57:42.000

正如评论中所说，我将创建一个 ActiveResource 对象并向其添加相关方法。

# database - 如何防止数据库更新的并发问题？

> ID：12002411
> 
> 赞同：0
> 
> 时间：2012-08-17T08:32:34.547
> 
> 标签：database, concurrency

我有以下序列，可以在任何时候由我的程序的多个实例执行：

> **第 1 步：**查看账单是否未付
> 
> **第 2 步：**如果账单未支付，则将账单标记为已支付

我担心我的程序的实例 1 和实例 2 几乎同时执行第 1 步，因此继续执行第 2 步。我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:35:26.170

使用 (可序列化) `TRANSACTION`。更多详细信息取决于您的数据库平台

有关详细信息，请参阅[http://en.wikipedia.org/wiki/Database_transaction](http://en.wikipedia.org/wiki/Database_transaction)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:19:26.857

不看代码很难具体说明这一点，但显而易见的方法是将步骤 1 和 2 结合起来。

所以，而不是：

```
$invoice_status = call_database(
select INVOICE_STATUS
from   INVOICES
where  INVOICE_ID = $invoice_id)

if ($invoice_status = UNPAID){
   call_database (
      UPDATE INVOICES 
      SET INVOICE_STATUS = PAID 
      WHERE INVOICE_ID = $invoice_id)
} 
```

你会做类似的事情

```
call_database(
   update invoices
   set    invoice_status = PAID
   where  invoice_id = $invoice_id
   and    invoice_status = UNPAID) 
```

# wso2 - G-Reg 注册表 (4.1) 上的 WSO2 远程实例连接中的访问被拒绝错误

> ID：12002412
> 
> 赞同：0
> 
> 时间：2012-08-17T08:32:36.307
> 
> 标签：wso2, esb, wso2carbon

我创建了一个 ESB 服务并尝试从 G-Reg 注册表加载远程实例。我的 ESB 和 G-Reg 使用相同的 MySQL DB、JVM、操作系统。

然后在我的控制台中打印了两条错误日志消息：（1）ERROR - RegistryAdminServiceClient 检查注册表模式时发生错误（2）org.apache.axis2.AxisFault：访问被拒绝。请先登录。

“请先登录”和“检查注册表模式”是什么意思？我应该在哪里登录？什么是注册表模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:58:56.967

当您从服务器后端注销时，通常会发生此异常。检查注册表模式意味着它会尝试检查注册表是否为只读。

# c++ - 来自 Qt Creator 中 VS2008 的库

> ID：12002413
> 
> 赞同：0
> 
> 时间：2012-08-17T08:32:41.087
> 
> 标签：c++, qt, static-libraries, externals

我正在从 VS2008 迁移到 Qt Creator（但仍在 Windows 上使用 msvc2008 编译器），并且我有一个用 VS2008 编译的库（.lib）。
现在，在 Windows 上的 Qt Creator 中，它没有与我的程序链接，我得到了未解决的外部问题。
知道为什么会这样吗？
我尝试将所有编译器标志设置为与 Visual Studio 中的相同（它在其中链接没有问题）。哪些不同的编译器标志会导致这种情况？VS编译命令：

```
/Od /I "XXX\inc" /I ".\GeneratedFiles" /I "C:\QtSDK\Desktop\Qt\4.8.1\msvc2008\include" /I ".\GeneratedFiles\Debug" /I "C:\QtSDK\Desktop\Qt\4.8.1\msvc2008\include\qtmain" /I "C:\QtSDK\Desktop\Qt\4.8.1\msvc2008\include\QtCore" /I "C:\QtSDK\Desktop\Qt\4.8.1\msvc2008\include\QtGui" /I "C:\QtSDK\Desktop\Qt\4.8.1\msvc2008\include\QtSql" /I ".\\" /I "XXX\inc" /D "UNICODE" /D "WIN32" /D "QT_LARGEFILE_SUPPORT" /D "QT_CORE_LIB" /D "QT_GUI_LIB" /D "QT_SQL_LIB" /D "QT_PLUGIN" /D "_AFXDLL" /D "_DEBUG" /D "QT_DLL" /D "_WINDLL" /D "_UNICODE" /FD /EHsc /MDd /Yu"preHeader.h" /Fp"XXX\build\XXX\Debug\XXX.pch" /Fo"CXXX\build\XXX\Debug\\" /Fd"XXX\build\XXX\Debug\vc90.pdb" /nologo /c /Zi /TP /errorReport:prompt 
```

Qt Creator 编译命令：

```
cl -c -FIpreHeader.h -YupreHeader.h -Fpdebug\XXX_pch.pch -nologo -Zm200 -Zc:wchar_t -Zi -MDd -GR -EHsc -W3 -w34100 -w34189 -DUNICODE -DWIN32 -DQT_LARGEFILE_SUPPORT -DQT_LARGEFILE_SUPPORT -DQT_SQL_LIB -DQT_DLL -D_UNICODE -DUNICODE -D_AFXDLL -DBOOST_TT_HAS_OPERATOR_HPP_INCLUDED -DQT_DLL -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -I"c:\QtSDK\Desktop\Qt\4.8.1\msvc2008\include\QtCore" -I"c:\QtSDK\Desktop\Qt\4.8.1\msvc2008\include\QtNetwork" -I"c:\QtSDK\Desktop\Qt\4.8.1\msvc2008\include\QtGui" -I"c:\QtSDK\Desktop\Qt\4.8.1\msvc2008\include\QtSql" -I"c:\QtSDK\Desktop\Qt\4.8.1\msvc2008\include" -I"..\inc" -I"GeneratedFiles" -I"GeneratedFiles\debug" -I"C:\QtSDK\Desktop\Qt\4.8.1\msvc2008\\include" -I"C:\QtSDK\Desktop\Qt\4.8.1\msvc2008\\include\QtCore" -I"c:\lib\boost_1_48_0" -I"c:\QtSDK\Desktop\Qt\4.8.1\msvc2008\include\ActiveQt" -I"GeneratedFiles\debug" -I"c:\QtSDK\Desktop\Qt\4.8.1\msvc2008\mkspecs\win32-msvc2008" -Fodebug\ @XXX\Temp\qrc_resource.obj.1104.11375.jom 
```

第二个有趣的事情是，在 Linux 上的 Qt Creator 中，相同的代码，相同的项目，它与在 Visual Studio 中编译的库链接并解析这些外部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:13:59.230

找到了。
问题出在...增强版！
库是用 boost 1.38 编译的，它的 int32_t 定义为“long”，其中应用程序是用 boost 1.48 构建的，它的 int32_t 定义为“int”。
所以从库中导出的符号是“long FuncName(...)”，其中应用程序试图在库中找到“int FuncName(...)”但无法做到。
这仍然很奇怪，因为“int”和“long”在我的机器上是 32 位的……它们应该是一样的。

哦，Linux 版本在 1.41 中得到了提升，其中 int32_t 定义为“int”，所以它可以工作。

# c# - 在 wpf 项目中找不到资源

> ID：12002418
> 
> 赞同：0
> 
> 时间：2012-08-17T08:33:06.623
> 
> 标签：c#, wpf, resources

所以：

![](../Images/5ff839e6bf77c30877144c17be75deef.png)

我写的

```
StreamResourceInfo sri = Application.GetResourceStream(new Uri("ProjectName;component/45.ani", UriKind.Relative)); 
```

但找不到文件:) 为什么？项目是图片

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:41:49.857

您可以检查文件上的构建操作（在属性面板上）吗？是否设置为“资源”？

你错过了“资源”吗？（也许使用 UriKind.Absolute）

```
new Uri("pack://application:,,,/ProjectName;component/Resources/45.ani", UriKind.Absolute) 
```

# c++ - 转储关键部分队列（线程等待）

> ID：12002424
> 
> 赞同：0
> 
> 时间：2012-08-17T08:33:37.807
> 
> 标签：c++, synchronization, windbg, critical-section

我有一个问题（崩溃转储），我的关键部分被破坏但在检查 LockCount 后我注意到有 1 个线程在等待它（似乎线程已被唤醒，但尚未进入，因为锁定状态不是锁定）。

我想看看哪个线程被唤醒了。我知道关键部分有一个等待线程队列，如果我可以转储这个队列/列表结构，我应该能够回答我的问题，有什么想法可以做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:05:36.010

the CriticalSection Object is defined as

```
typedef RTL_CRITICAL_SECTION CRITICAL_SECTION; 
```

with `RTL_CRITICAL_SECTION` defined as

```
typedef struct _RTL_CRITICAL_SECTION {
    PRTL_CRITICAL_SECTION_DEBUG DebugInfo;
    LONG LockCount;
    LONG RecursionCount;
    HANDLE OwningThread;        // from the thread's ClientId->UniqueThread
    HANDLE LockSemaphore;
    ULONG_PTR SpinCount;        // force size on 64-bit systems when packed
} RTL_CRITICAL_SECTION, *PRTL_CRITICAL_SECTION; 
```

*OwningThread* will contain a handle to the owning thread. So you may just read the `CriticalSection` data structure to obtain the handle to the owning thread.

```
DWORD WINAPI GetThreadId(_In_ HANDLE OwningThread); 
```

will return the ID of the owning thread.

*However, there is a small mishap with the definition of OwningThread. [MSDN](http://msdn.microsoft.com/en-us/magazine/cc164040.aspx) reports that field actually contains the thread ID itself.*

You may use

```
GetThreadInformation(OwningThread,....); 
```

to obtain more thread details.

[Break Free of Code Deadlocks in Critical Sections Under Windows](http://msdn.microsoft.com/en-us/magazine/cc164040.aspx) on MSDN is a **must read** in this context. Particulary the `EntryCount/ContentionCount` field in the `RTL_CRITICAL_SECTION_DEBUG` structure may give an answer to the question here.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:21:59.813

你试过！锁吗？在 WinDBG 文档中有关于查看进程中的关键部分的信息：

[http://msdn.microsoft.com/en-us/library/windows/hardware/ff541979(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff541979(v=vs.85).aspx)

# android - 已弃用的 SensorManager API Google 地图

> ID：12002429
> 
> 赞同：0
> 
> 时间：2012-08-17T08:33:56.953
> 
> 标签：android, android-activity, mapactivity

我正在使用我项目中的 MapActivity。

我在主类上有这个 onCreate 方法：

```
 public class TabMap extends MapActivity implements LocationListener
{
    private MapView mapView;
    private MapController mc;

    private LocationManager lm;

    private double latitude;
    private double longitude;
    private double altitude;
    private float accuracy;

    private MyLocationOverlay myLocation = null;
    private Button select;

    ListInterestPoints currentListofInterest = null;
    String provider;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.onglet_map);

        // instance de l'objet mapView
        mapView = (MapView) this.findViewById(R.id.mapView);

        // ajout des boutons zoom et dezoom
        mapView.setBuiltInZoomControls(true);

        mc = mapView.getController();
        // niveau de zoom a l'initialisation de la map (1->21)
        mc.setZoom(18);

        // instanciation de la classe MyLocationOverlay
        myLocation = new MyLocationOverlay(getApplicationContext(), mapView);

        // ajout de la location a la MAP
        mapView.getOverlays().add(myLocation);

        // afficher le point
        myLocation.enableMyLocation();
        // afficher la boussole
        myLocation.enableCompass();

        // bouton qui repositionne sur la position de l'utilisateur
        select = (Button) findViewById(R.id.googlemaps_select_location);
        select.setOnClickListener(new OnClickListener() 
            {
                public void onClick(View v) 
                {
                    GeoPoint point = new GeoPoint((int) (latitude * 1E6), (int) (longitude * 1E6));
                    mc.animateTo(point);
                    mc.setCenter(point);
            }});

        // centrage sur la postion de l'utilisateur au 1er lancement
        myLocation.runOnFirstFix(new Runnable() 
        {
            public void run() 
            {
                mc.animateTo(myLocation.getMyLocation());
                mc.setZoom(18);
            }
        });
    } 
```

OnResume 方法：

```
@Override
    protected void onResume()
    {
        super.onResume();

        lm = (LocationManager) this.getSystemService(LOCATION_SERVICE);
        if (lm.isProviderEnabled(LocationManager.GPS_PROVIDER))
            lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10000, 0, this);
        lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 10000, 0, this);

        /** Gestion du remplissage des item Shop sur la MAP **/
        if (checkPromotionNotNull() == true)
        {
            // 1er lancement ac list null
            if (currentListofInterest == null)
            {
                putInterestPointsOnMap();
            }
            else
            {
                currentListofInterest.removeAllOverlayItem();
                putInterestPointsOnMap();
            }
        }
        else
        {
            if (currentListofInterest == null){}
            else
                currentListofInterest.removeAllOverlayItem();
        }
    }
    } 
```

我遇到的问题是：我在运行它时收到了这 2 条错误消息（此活动运行良好..）：

```
08-16 14:32:28.390: E/SensorManager(5605): registerListener :: handle = 2  name= Mag & Acc Combo Orientation Sensor delay= 60000 Listener= android.hardware.SensorManager$LegacyListener@405dbf70
08-16 14:32:28.398: E/SensorManager(5605): =======>>>Sensor Thread RUNNING <<<========
08-16 14:32:28.406: E/SensorManager(5605): reg :: handle = 2

08-13 12:37:43.855: I/SensorManager(25211): This application is using deprecated SensorManager API which will be removed someday.  Please consider switching to the new API. 
```

但我不知道你在“新”API中得到它。我对游标管理器做的唯一一件事是：

```
lm = (LocationManager) this.getSystemService(LOCATION_SERVICE); 
```

进入 onResume().. Somoene 确实有解决它的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T08:51:14.927

是因为你打电话`myLocation.enableCompass()`

这是`enableCompass`Android源代码中Android的实现源代码：

```
 @Override
    public boolean enableCompass() {
        mCompassEnabled = true;
        mSensorOrientation = mSensorManager.getDefaultSensor(Sensor.TYPE_ORIENTATION);
        mSensorManager.registerListener(this, mSensorOrientation, SensorManager.SENSOR_DELAY_NORMAL);
        return true;
    } 
```

这个使用`Sensor.TYPE_ORIENTATION`并且该`TYPE_ORIENTATION`常量现在已被弃用。

所以，这不是你的错，他们在他们之间说话的那些模块，你可以忽略它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:51:03.243

您的位置侦听器类在哪里：

```
private final LocationListener locationListener = new LocationListener() 
{ 

    @Override 
    public void onLocationChanged(Location location) { 
        updateWithNewLocation(location); 
    } 

    @Override 
    public void onProviderDisabled(String provider) { 
        updateWithNewLocation(null); 
    } 

    @Override 
    public void onProviderEnabled(String provider) { 
    } 

    @Override 
        public void onStatusChanged(String provider, int status, Bundle extras) { 
    } 

}; 
```

你也错过了这部分：

```
@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
} 
```

# c# - 正则表达式查找 jQuery 模板标签

> ID：12002430
> 
> 赞同：0
> 
> 时间：2012-08-17T08:34:00.537
> 
> 标签：c#, regex, jquery-templates

我正在寻找 C# 正则表达式来查找 jQuery 模板标签。我们有一个编辑器，人们可以在其中设计自己的字母，我需要用实际值替换这些标签。

这是一个例子：

```
Welcome {{Name}} to our webshop. Your last visited our website on {{LastVisit}} 
```

在服务器上，我想在发布的内容中搜索这些标签，如下所示：

```
[HttpPost]
public ActionResult Create(Report report)
{
    Dictionary<string,string> tags = new Dictionary<string,string>();
    var matches = Regex.Matches(report.Content, @"\{{2}(?'tagname'[^{}]+)\}{2}"); 
    foreach(Match match in matches){
      tags.add(match.Value, match.Groups[1].Value);
    }
    return View();
} 
```

我的正则表达式应该返回这个：

*   姓名
*   上次访问

希望你能帮帮我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T09:07:27.800

这个可以解决问题：

```
string text = @"Welcome {{Name}} to our webshop. Your last visited our website on {{LastVisit}}";
IList<string> results = new List<string>();
MatchCollection matchCollection = Regex.Matches(text, @"\{\{([\w]*)\}\}");
foreach (Match match in matchCollection)
{
    results.Add(match.Groups[1].ToString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T08:37:26.440

```
var text = 'Welcome {{Name}} to our webshop. Your last visited our website on {{LastVisit}}';
text = text.replace('\{\{Name\}\}', theName).replace('\{\{LastVisit\}\}', theLastVisit); 
```

示例：http: [//jsfiddle.net/Grimdotdotdot/zcsp5/1/](http://jsfiddle.net/Grimdotdotdot/zcsp5/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T08:54:35.790

我会使用这个正则表达式：

```
@"\{{2}(?'tagname'[^{}]+)\}{2}" 
```

提取命名组“标记名”中的标记名。使用[Regex.Matches()](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.matches.aspx)方法获取您提交的字符串中的所有匹配项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T08:55:40.173

你可以试试这个：

```
 string input = @"Welcome {{Name}} to our webshop. 
                         Your last visited our website on {{LastVisit}}";

        int startIndex = input.IndexOf("{{") + 2;
        int length = input.IndexOf("}}") - startIndex;
        var name = input.Substring(startIndex, length);

        startIndex = input.LastIndexOf("{{") + 2;
        length = input.LastIndexOf("}}") - startIndex;
        var lastVisit = input.Substring(startIndex, length); 
```

此示例不使用正则表达式，因为似乎可以使用字符串方法解析此示例。此方法始终需要两个括号中的参数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T09:19:54.113

我会使用以下内容：`\{{2}(\w+)\}{2}`

像这样使用：

```
Regex regex = new Regex(@"\{{2}(\w+)\}{2}", RegexOptions.Singleline);
Match match = regex.Match(targetString);
while (match.Success) {
    for (int i = 1; i < match.Groups.Count; i++) {
        Group group = match.Groups[i];
        if (group.Success) {
            string templateItemValue = group.Value;
        } 
    }
    match = match.NextMatch();
} 
```

希望这可以帮助

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-17T09:26:48.013

像这样的东西可以完成这项工作。然后你需要做的就是用你想要的值填充字典，替换将为你处理繁重的工作。

```
var replaces=new Dictionary<string,string> { {"Name","Bob"} , {"LastVisit","2012-01-01"}};
var regex=new Regex(@"\{\{(?<field>.*?)\}\}");

var report="Welcome {{Name}} to our webshop. Your last visited our website on {{LastVisit}}";
var result=regex.Replace(report,delegate(Match match) {
     return replaces.ContainsKey(match.Groups["field"].Value) ? replaces[match.Groups["field"].Value] : match.Value;
  }); 
```

# ios - 有效确定自定义可变大小 UITableViewCell 的高度

> ID：12002431
> 
> 赞同：1
> 
> 时间：2012-08-17T08:34:03.300
> 
> 标签：ios, uitableview

首先，我知道并经常使用，

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

...这个问题比那个复杂一点:-)

我有一个数据驱动的自定义 UITableViewController。根据运行时表格的定义，它会选择自定义单元格（它们本身是单独的自定义 UITableViewCell 类）。

自定义单元格也是数据驱动的，其高度仅在运行时确定。

通过进行一些运行时日志记录，我看到 UITableViewController在为可见单元格调用 cellFor... 之前为表中的*所有单元格调用 heightFor... 。*

这意味着我必须有效地构造一次单元格以确定高度，然后在请求时再次返回单元格。

是否可以通过 heightFor.. 返回高度的默认值，然后在知道实际高度后覆盖它？

或者是否有任何替代解决方案来避免必须构建细胞两次？

建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:17:03.837

好的，所以这里没有好的解决方案（即，一旦创建单元格，您就无法更改单元格的高度）。

所以，我在这里采用的解决方案是从 heightFor... 中调用 cellFor...，它构造单元以获得高度。然后我将该单元格的高度记录为一个属性，并从 heightFor...

获得高度后，单元格会自动释放（因为它没有保留）。当然，不久之后，UITableController 会再次请求单元格，所以它会被构造两次，但事情就是这样......

这是代码，这很好用。

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    float height;

    UITableViewCell <CMyTableViewDelegate> *cell = (UITableViewCell <MyTableViewDelegate> *) [self tableView:tableView cellForRowAtIndexPath:indexPath];

    height = [cell getHeight];

    return height;
} 
```

希望能帮助别人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:43:37.780

不，这是不可能的。再想想解决办法。我要给你一些指针。

*   缓存计算高度
*   检查 uitablebiewcell 本身的性能。也许它有太多的子视图。
*   如果可能，预先计算高度 - 在表格视图的数据源要求您这样做之前执行此操作，然后返回缓存的高度

# android - android phonegap自定义插件问题没有响应

> ID：12002433
> 
> 赞同：1
> 
> 时间：2012-08-17T08:34:20.210
> 
> 标签：android, cordova, phonegap-plugins

我在 phonegap（html5、JQuery、JS）中开发了一个应用程序，我想开发一个插件来打印到 BT 打印机。

我下载了打印机制造商的 SDK，并使用我在项目中需要的所有方法将适当的 .jar 文件导入到我的项目中。

我按照互联网教程创建了以下插件，以便从 JS 调用打印机制造商 SDK 的 JAVA 方法。

JS

```
var msgbox = function() {
};

msgbox.prototype.show = function(str, success, fail) {
PhoneGap.exec(success, fail, "msgbox", "show1", [str]);
};
navigator.msgbox = new msgbox(); 
```

JAVA

```
public class msgbox extends Plugin {

    private static final String SHOW = "show";
    private static final String SHOW1 = "show1";
    private static final Context context = null;
    private static final int MSG_INDEX = 0;
    private String msg;

    @Override

    public PluginResult execute(String arg0, final JSONArray arg1, String arg2) {

        if ( arg0.equals(SHOW1) )
        {
             StarIOPort port = null;
             byte[] texttoprint = new byte[]{0x1b, 0x40, 0x1b,0x74,0x0D,(byte) 0x91,(byte) 0x92,(byte) 0x93,(byte) 0x94,(byte) 0x95,(byte) 0x96,(byte) 0x97,(byte) 0x98,(byte) 0x99,0x0A,0x0A,0x0A,0x0A,0x0A};
             try 
             {
                 port = StarIOPort.getPort("BT:", "mini", 10000);
                 port.writePort(texttoprint, 0, texttoprint.length);
             }
             catch (StarIOPortException e)
             {
                    Builder dialog = new AlertDialog.Builder(ctx);
                    dialog.setNegativeButton("Ok", null);
                    AlertDialog alert = dialog.create();
                    alert.setTitle("Failure");
                    alert.setMessage("Failed to connect to printer");
                    alert.show();    
             }
             finally
             {
                 if(port != null)
                 {
                     try 
                     {
                         StarIOPort.releasePort(port);
                     } catch (StarIOPortException e) {}
                 }
             }
        }
        return new PluginResult(Status.OK);
    }

} 
```

当我运行项目时，我没有收到任何错误，我没有收到任何警报，也没有打印到打印机。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:22:04.703

你的代码看起来很完美。

请将以下代码添加到 config.xml ：

<插件名称="msgbox" value="Your_Package_name.msgbox">

# python - 在 scipy 中使用 ks_2samp 处理随机分布的实验数据

> ID：12002435
> 
> 赞同：0
> 
> 时间：2012-08-17T08:34:27.813
> 
> 标签：python, statistics, scipy

我有两组不同的随机分布的实验数据。我必须检查天气是否来自同一数据集。我希望在 python 中使用 scipy 应用 2 个示例 KS 测试。

我不明白如何在 function 中传递两个数据序列`ks_2samp`。

`scipy.stats.ks_2samp(data1, data2)`

谁能解释一下什么是data1和data2？我可以使用序列直接传递我的数据吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T08:43:32.943

像这样使用它：

```
import numpy as np
from scipy import stats

dataset1 = np.random.randn(100)  #random distribution
dataset2 = np.random.randn(100) 

res = stats.ks_2samp(dataset1, dataset2)

print res 
```

你的结果是这样的：

```
(0.089999999999999969, 0.79418377128477335) 
```

# php - 如何在现有 Symfony 2 项目中使用 Sonata Admin 设置 Symfony-cmf？

> ID：12002439
> 
> 赞同：0
> 
> 时间：2012-08-17T08:34:39.503
> 
> 标签：php, doctrine, symfony-2.1, sonata-admin, symfony-cmf

我一直在尝试使用 Symfony-CMF 为我的项目设置 Sonata Admin，但在尝试添加菜单项时出现了一些错误。

如何解决这个问题？

错误：

> 在链配置的命名空间 Doctrine\ODM\PHPCR\Document 中找不到类“Symfony\Cmf\Bundle\MenuBundle\Document\MenuItem”

日志：

```
DEBUG - Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\ProfilerListener::onKernelRequest". 
DEBUG - Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\SessionListener::onKernelRequest". 
DEBUG - Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\RouterListener::onKernelRequest". 
DEBUG - SET NAMES UTF8 
DEBUG - SELECT t0.id AS id1, t0.name AS name2, t0.billing_address AS billing_address3, t0.contact_name AS contact_name4, t0.contact_email_address AS contact_email_address5, t0.contact_phone_number AS contact_phone_number6 FROM client t0 
DEBUG - SELECT t0.id AS id1, t0.name AS name2, t0.billing_address AS billing_address3, t0.contact_name AS contact_name4, t0.contact_email_address AS contact_email_address5, t0.contact_phone_number AS contact_phone_number6 FROM client t0 
INFO - Matched route "admin_bundle_menu_menuitem_create" (parameters: "_controller": "Sonata\AdminBundle\Controller\CRUDController::createAction", "_sonata_admin": "symfony_cmf_menu.admin", "_sonata_name": "admin_bundle_menu_menuitem_create", "_route": "admin_bundle_menu_menuitem_create") 
DEBUG - Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\LocaleListener::onKernelRequest". 
DEBUG - Notified event "kernel.request" to listener "Symfony\Component\Security\Http\Firewall::onKernelRequest". 
DEBUG - Read SecurityContext from the session 
DEBUG - Reloading user from user provider. 
DEBUG - SELECT t1.username AS username2, t1.username_canonical AS username_canonical3, t1.email AS email4, t1.email_canonical AS email_canonical5, t1.enabled AS enabled6, t1.salt AS salt7, t1.password AS password8, t1.last_login AS last_login9, t1.locked AS locked10, t1.expired AS expired11, t1.expires_at AS expires_at12, t1.confirmation_token AS confirmation_token13, t1.password_requested_at AS password_requested_at14, t1.roles AS roles15, t1.credentials_expired AS credentials_expired16, t1.credentials_expire_at AS credentials_expire_at17, t1.id AS id18, t1.fb_uid AS fb_uid19, t1.tw_uid AS tw_uid20, t0.categorySelectFlag AS categorySelectFlag21, t0.paypalName AS paypalName22, t1.type FROM seeder t0 INNER JOIN user t1 ON t0.id = t1.id WHERE t1.id = ? LIMIT 1 
DEBUG - SELECT t1.username AS username2, t1.username_canonical AS username_canonical3, t1.email AS email4, t1.email_canonical AS email_canonical5, t1.enabled AS enabled6, t1.salt AS salt7, t1.password AS password8, t1.last_login AS last_login9, t1.locked AS locked10, t1.expired AS expired11, t1.expires_at AS expires_at12, t1.confirmation_token AS confirmation_token13, t1.password_requested_at AS password_requested_at14, t1.roles AS roles15, t1.credentials_expired AS credentials_expired16, t1.credentials_expire_at AS credentials_expire_at17, t1.id AS id18, t1.fb_uid AS fb_uid19, t1.tw_uid AS tw_uid20, t0.client_id AS client_id21, t1.type FROM manager t0 INNER JOIN user t1 ON t0.id = t1.id WHERE t1.id = ? LIMIT 1 
DEBUG - Username "admin" was reloaded from user provider. 
DEBUG - Notified event "kernel.request" to listener "Doctrine\Bundle\PHPCRBundle\EventListener\LocaleListener::onKernelRequest". 
DEBUG - Notified event "kernel.request" to listener "Symfony\Bundle\AsseticBundle\EventListener\RequestListener::onKernelRequest". 
DEBUG - Notified event "kernel.request" to listener "MyProject\MyBundle\Listener\Kernel::onKernelRequest". 
DEBUG - Notified event "kernel.controller" to listener "Symfony\Bundle\FrameworkBundle\DataCollector\RouterDataCollector::onKernelController". 
DEBUG - Notified event "kernel.controller" to listener "Sensio\Bundle\FrameworkExtraBundle\EventListener\ControllerListener::onKernelController". 
DEBUG - Notified event "kernel.controller" to listener "Sensio\Bundle\FrameworkExtraBundle\EventListener\ParamConverterListener::onKernelController". 
DEBUG - Notified event "kernel.controller" to listener "Sensio\Bundle\FrameworkExtraBundle\EventListener\TemplateListener::onKernelController". 
DEBUG - Notified event "kernel.controller" to listener "Acme\DemoBundle\EventListener\ControllerListener::onKernelController". 
DEBUG - Notified event "kernel.controller" to listener "Symfony\Component\HttpKernel\DataCollector\RequestDataCollector::onKernelController". 
DEBUG - Notified event "kernel.exception" to listener "Symfony\Component\Security\Http\Firewall\ExceptionListener::onKernelException". 
DEBUG - Notified event "kernel.exception" to listener "Symfony\Component\HttpKernel\EventListener\ProfilerListener::onKernelException". 
DEBUG - Notified event "kernel.exception" to listener "Symfony\Component\HttpKernel\EventListener\ExceptionListener::onKernelException". 
CRITICAL - Doctrine\Common\Persistence\Mapping\MappingException: The class 'Symfony\Cmf\Bundle\MenuBundle\Document\MenuItem' was not found in the chain configured namespaces Doctrine\ODM\PHPCR\Document (uncaught exception) at /var/www/likeseed/vendor/doctrine/common/lib/Doctrine/Common/Persistence/Mapping/MappingException.php line 38 
DEBUG - Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\ProfilerListener::onKernelRequest". 
DEBUG - Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\SessionListener::onKernelRequest". 
DEBUG - Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\RouterListener::onKernelRequest". 
DEBUG - Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\LocaleListener::onKernelRequest". 
DEBUG - Notified event "kernel.request" to listener "Symfony\Component\Security\Http\Firewall::onKernelRequest". 
DEBUG - Notified event "kernel.request" to listener "Doctrine\Bundle\PHPCRBundle\EventListener\LocaleListener::onKernelRequest". 
DEBUG - Notified event "kernel.request" to listener "Symfony\Bundle\AsseticBundle\EventListener\RequestListener::onKernelRequest". 
DEBUG - Notified event "kernel.request" to listener "MyProject\MyBundle\Listener\Kernel::onKernelRequest". 
DEBUG - Notified event "kernel.controller" to listener "Symfony\Bundle\FrameworkBundle\DataCollector\RouterDataCollector::onKernelController". 
DEBUG - Notified event "kernel.controller" to listener "Sensio\Bundle\FrameworkExtraBundle\EventListener\ControllerListener::onKernelController". 
DEBUG - Notified event "kernel.controller" to listener "Sensio\Bundle\FrameworkExtraBundle\EventListener\ParamConverterListener::onKernelController". 
DEBUG - Notified event "kernel.controller" to listener "Sensio\Bundle\FrameworkExtraBundle\EventListener\TemplateListener::onKernelController". 
DEBUG - Notified event "kernel.controller" to listener "Acme\DemoBundle\EventListener\ControllerListener::onKernelController". 
DEBUG - Notified event "kernel.controller" to listener "Symfony\Component\HttpKernel\DataCollector\RequestDataCollector::onKernelController". 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:59:39.053

我在 config.yml 的教义_phpcr 部分中添加了这个：

```
odm:
    auto_mapping: true 
```

现在它可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:00:32.657

错误解释了自己。我想您应该寻找缺少的 MenuItem 类并将其放置在正确的命名空间中

# javascript - jquery 灯箱不适用于 Meteor

> ID：12002440
> 
> 赞同：1
> 
> 时间：2012-08-17T08:34:41.657
> 
> 标签：javascript, lightbox, meteor, handlebars.js

灯箱曾经工作。但是，当我在流星上尝试它时，它不再起作用了。

我首先添加 jquery 依赖并将 jquery.lightbox.js 和 jquery.lightbox.css 放到客户端文件夹中。

```
$ meteor add jquery
$ ls -l client/js/jquery.lightbox.js
$ ls -l client/css/jquery.lightbox.css 
```

这是使用灯箱的测试模板和脚本。

```
->test.html

<template name="test">
<a href="xxxxxxxx" class="screenshot">
    <img src="xxxxxx" alt="Screenshot" class="thumbnail"/>
    <span class="screenshot-zoom"></span>
</a>
</template>

->screenshot.js

$(function () {
     $(".screenshot").lightbox();
}); 
```

如果我将它用作常规 html，它会起作用。但它不在流星之下。我想念什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T02:54:38.783

从 Meteor 0.4.0 开始，您可以使用以下[`Template.myTemplate.rendered`](http://docs.meteor.com/#template_rendered)方法执行此操作：

在你的情况下，那将是

```
Template.test.rendered = function() {
    if(!this._rendered) {
      this._rendered = true;
      $(this.find(".screenshot")).lightbox();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T03:54:18.680

这是我从 Meteor 的开发人员那里得到的，但是，我没有在新的流星 0.4.0 上验证它。

[http://docs.meteor.com/#meteor_startup](http://docs.meteor.com/#meteor_startup)

```
Meteor.startup(function () (
  $(".screenshot").lightbox();
}); 
```

# c - 在 c 中的 mod_fastcgi 进程中打开一个套接字

> ID：12002441
> 
> 赞同：1
> 
> 时间：2012-08-17T08:34:45.230
> 
> 标签：c, linux, apache, sockets, mod-fastcgi

我正在将 mod_fastcgi 与 apache webserver 一起使用，我在 c 中创建了一个模块来满足 fastcgi 请求，并且还充当 TCP 服务器，它与充当客户端的其他模块-x 进行通信。当只有一个这样的模块运行时，它工作正常。

但是当我配置运行另一个类似的模块时，当调用 socket(PF_INET,SOCK_STREAM,0) 以及从模块-x 接受新连接时，这两个进程都会获得相同的文件描述符，这会导致向模块发送消息时出现意外行为- X。

HTTP 配置

FastCgiServer /scripts/first.fcgi -processes 1 FastCgiServer /scripts/second.fcgi -processes 1

任何人都可以帮助请.......

谢谢， TC

# python - 从源文件缓冲区导航 python 回溯

> ID：12002442
> 
> 赞同：1
> 
> 时间：2012-08-17T08:34:48.137
> 
> 标签：python, debugging, emacs

我正在使用当前的 python 模式在顶部窗口中编辑我的源文件，并在底部窗口中使用 python 劣质 shell 来查看输出（使用`C-c C-c`源文件，光标停留在顶部，源文件窗口中）。

有没有办法在仍然停留在源代码窗口中时导航回溯错误？另外 - 是否有类似的方法可以仅在实际发送的文件中导航错误（即不是那些来自被称为外部文件的错误）？

目前我要么`M-g M-g`跳转到行号，要么切换到 python shell 窗口并导航到我想查看的错误。

这将是一个巨大的效率提升！非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:15:11.693

事实证明，有 [next/previous]-error bound 的函数`M-g M-n`可以`M-g M-p`执行此操作（出于某种原因，python 模式描述中未提及......）。如果有人对第二部分有很好的解决方案，我将保持开放状态 - 仅循环查看当前文件中的错误。

# c# - 如何强制释放 MemoryStream 占用的内存？

> ID：12002443
> 
> 赞同：15
> 
> 时间：2012-08-17T08:34:53.700
> 
> 标签：c#, .net, memory-management, garbage-collection, idisposable

我有以下代码：

```
const int bufferSize = 1024 * 1024;
var buffer = new byte[bufferSize];
for (int i = 0; i < 10; i++)
{
    const int writesCount = 400;
    using (var stream = new MemoryStream(writesCount * bufferSize))
    {
        for (int j = 0; j < writesCount; j++)
        {
            stream.Write(buffer, 0, buffer.Length);
        }
        stream.Close();
    }
} 
```

我在 32 位机器上运行。

第一次迭代完成得很好，然后在下一次迭代中，我`System.OutOfMemoryException`在.`new``MemoryStream`

尽管声明，为什么没有`MemoryStream`回收以前的内存？`using`如何强制释放使用的内存`MemoryStream`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-17T08:48:02.497

我认为问题不在于垃圾收集器没有做好它的工作。如果 GC 处于内存压力之下，它应该运行并回收您刚刚分配的 400 MB。

这更有可能归结为 GC 没有找到连续的**400 MB**块。

> 相反，会发生“内存不足”错误，因为进程无法在其虚拟地址空间中找到足够大的*连续未使用页面部分来执行请求的映射。*

您应该阅读 Eric Lippert 的博客文章[“内存不足”不涉及物理内存](https://web.archive.org/web/20100529211435/http://blogs.msdn.com/b/ericlippert/archive/2009/06/08/out-of-memory-does-not-refer-to-physical-memory.aspx)

你最好做以下**两个**。

1.  重用您分配的内存块（为什么要创建另一个大小完全相同的内存块）
2.  分配更小的块（小于**85KB**）

在 Dotnet 4.5 之前，Dotnet 构建了两个堆，**小对象堆 (SOH)**和**大对象堆 (LOH)**。请参阅Brandon Bray[的 .NET 4.5 中的大型对象 Hearp 改进。](https://devblogs.microsoft.com/dotnet/large-object-heap-improvements-in-net-4-5/)您`MemoryStream`在 LOH 中被分配，并且在整个过程中没有被压缩（碎片整理），这使得分配大量内存的多次调用更有可能引发`OutOfMemoryException`

> CLR 管理两个不同的分配堆，小对象堆 (SOH) 和大对象堆 (LOH)。任何大于或等于 85,000 字节的分配都会在 LOH 上进行。复制大对象会降低性能，因此 LOH 不像 SOH 那样被压缩。另一个定义特征是 LOH 仅在第 2 代收集期间收集。总之，这些都有一个内置的假设，即大对象分配不常见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T08:39:36.927

当您确定有必要清理未引用的对象时，请尝试强制进行垃圾收集。

```
GC.Collect();
GC.WaitForPendingFinalizers();
GC.Collect(); 
```

另一种选择是使用`Stream`外部存储：`FileStream`例如。

但是，在一般情况下，最好使用**一个足够小的**缓冲区（数组，分配一次）并将其用于读/写调用。避免在 .NET中**包含许多大对象（请参阅**[CLR Inside Out：Large Object Heap Uncovered](http://msdn.microsoft.com/en-us/magazine/cc534993.aspx)）。

**更新**

假设`writesCount`是常数，为什么不分配一个缓冲区并重用它呢？

```
const int bufferSize = 1024 * 1024;
const int writesCount = 400;

byte[] streamBuffer = new byte[writesCount * bufferSize];
byte[] buffer = new byte[bufferSize];
for (int i = 0; i < 10; i++)
{
    using (var stream = new MemoryStream(streamBuffer))
    {
        for (int j = 0; j < writesCount; j++)
        {
            stream.Write(buffer, 0, buffer.Length);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T08:45:51.267

看起来您分配的太多，超出了系统的处理能力。您的代码在我的机器上运行良好，但如果我像这样更改它：

```
const int bufferSize = 1024 * 1024 * 2; 
```

我得到和你一样的错误。

但是，如果我将目标处理器更改为 x64，那么代码就会运行，这似乎是合乎逻辑的，因为您可以处理更多内存。

这篇文章的详细解释：[http](http://www.guylangston.net/blog/Article/MaxMemory) ://www.guylangston.net/blog/Article/MaxMemory 关于这个问题的一些信息：[Maximum Memory a .NET process can allocate](https://stackoverflow.com/questions/934314/maximum-memory-a-net-process-can-allocate)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T08:58:52.587

首先，`Dispose()`不保证会释放内存（它不标记对象进行 GC 收集，以防`MemoryStream`- 它不释放任何内容，因为`MemoryStream`没有非托管资源）。释放所使用的内存的唯一可靠方法`MemoryStream`是丢失对它的所有引用并等待垃圾收集发生（如果你有`OutOfMemoryException`- 垃圾收集器已经尝试但未能释放足够的内存）。此外，分配如此大的对象（任何 > 85000 字节）会产生一些后果 - 这些对象将进入大对象堆 (LOH)，这可能会变得碎片化（并且无法压缩）。由于 .NET 对象必须占用连续的字节序列，这可能会导致您有足够的内存，但没有空间容纳大对象。在这种情况下，垃圾收集器无济于事。

似乎这里的主要问题是对`stream`对象的引用保留在堆栈上，从而阻止了`stream`对象的垃圾收集（即使强制垃圾收集也无济于事，因为 GC 认为该对象仍然存在，您可以检查这个创建`WeakRefrence`它）。重构此示例可以修复它：

```
 static void Main(string[] args)
    {
        const int bufferSize = 1024 * 1024 * 2;
        var buffer = new byte[bufferSize];
        for(int i = 0; i < 10; i++)
        {
            const int writesCount = 400;
            Write(buffer, writesCount, bufferSize);
        }
    }

    static void Write(byte[] buffer, int writesCount, int bufferSize)
    {
        using(var stream = new MemoryStream(writesCount * bufferSize))
        {
            for(int j = 0; j < writesCount; j++)
            {
                stream.Write(buffer, 0, buffer.Length);
            }
        }
    } 
```

这是一个证明对象不能被垃圾收集的示例：

```
 static void Main(string[] args)
    {
        const int bufferSize = 1024 * 1024 * 2;
        var buffer = new byte[bufferSize];
        WeakReference wref = null;
        for(int i = 0; i < 10; i++)
        {
            if(wref != null)
            {
                // force garbage collection
                GC.Collect();
                GC.WaitForPendingFinalizers();
                GC.Collect();
                // check if object is still alive
                Console.WriteLine(wref.IsAlive); // true
            }
            const int writesCount = 400;
            using(var stream = new MemoryStream(writesCount * bufferSize))
            {
                for(int j = 0; j < writesCount; j++)
                {
                    stream.Write(buffer, 0, buffer.Length);
                }
                // weak reference won't prevent garbage collection
                wref = new WeakReference(stream);
            }
        }
    } 
```

# amazon-web-services - 自定义 Elastic Beanstalk AMI

> ID：12002445
> 
> 赞同：9
> 
> 时间：2012-08-17T08:35:09.180
> 
> 标签：amazon-web-services, glassfish, glassfish-3, amazon-ami, amazon-elastic-beanstalk

我需要在 Elastic Beanstalk 上使用为 Glassfish 服务器编写的 Java 应用程序。因为亚马逊不允许我选择带有 Glassfish 的 AMI，我选择了带有 Tomcat 的 AMI，并且我修改了我的应用程序以在 Tomcat 上正常工作。

现在，我发现我还需要使用 Sun JDK，而默认情况下 Elastic Beanstalk AMI 带有 openjdk。[我用谷歌搜索了很多，在StackOverflow](https://stackoverflow.com/questions/8049431/customize-elastic-beanstalk-instances)上找到了一些（不是很多资源）有趣的帖子，比如这个答案

我无法理解的是答案的这一部分：

> 从您从 EC2 手动启动的 Amazon beanstalk AMI 的运行实例创建您的自定义 AMI，而不是从通过 beanstalk 启动您的应用程序启动的实例。

所以，我的问题是：有人如何在 Elastic Beanstalk 上使用带有 Glassfish 的自定义 AMI？如果不可能，有人可以解释一下如何创建自定义 AMI 吗？

谢谢，安德里亚

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T12:18:34.630

该答案仅意味着“不要启动 beanstalk 应用程序并直接从其中一个实例中剪切 AMI。相反，启动基于 beanstalk AMI 的实例（可在公共 AMI 列表中获得）。” 即，使用其中之一；请注意，其中有 84 个：

![Beanstalk AMI](../Images/e08d6ac357dfbf84e81742649834ec3f.png)

完成配置该实例后剪切您自己的私有 AMI，并在您的 beanstalk 环境中指定它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T20:56:47.537

我个人发现选择的答案让我难以理解，可能是因为我仍在攀登 AWS 学习曲线。也许这个答案会帮助其他新手。刚刚弄清楚如何使用我自己的自定义 AMI 成功启动 Elastic Beanstalk 实例，我相信这句话的意思是执行以下对我有用的完全不明显的步骤：

1.  转到 EC2 服务（不是 Elastic Beanstalk 服务）并启动基于*Elastic Beanstalk AMI*的实例，您希望将其用作自定义 AMI 的起点。你会在一分钟内把它扔掉。

2.  选择实例并选择“创建映像/EBS AMI”。创建后，您可以删除您创建的临时 EC2 实例。它的唯一目的是创建自定义 AMI。

3.  现在转到 Elastic Beanstalk 服务并编辑您的配置以引用您的自定义 AMI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-16T01:56:27.960

@Danger 这将加快扩大规模。

我在 EB 上使用 docker 应用程序，但来自 Docker Hub 的“docker pull”太慢了，所以当所有实例都不健康时，我的网站将在 15-30 分钟内关闭。创建自定义 AMI 并拉取基础 Docker 映像将节省时间。

# c++ - 模板方法 enable_if 特化

> ID：12002447
> 
> 赞同：6
> 
> 时间：2012-08-17T08:35:10.807
> 
> 标签：c++, class, templates, c++11, enable-if

我有以下无法编译的代码。这是模板类中的两个函数，它们接受参数

```
typename std::enable_if<std::is_void<Ret>::value, Ret>::type _on_dispatched() {
    // ...
}

typename std::enable_if<!std::is_void<Ret>::value, Ret>::type _on_dispatched() {
    // ....
} 
```

我想根据 Ret 的类型对成员方法进行专门化。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T08:43:55.930

SFINAE 不适用于非模板函数（成员或非成员）。

正如 Kerrek SB 所指出的，使它们成为非成员函数模板将起作用。或者正如 Xeo 指出的那样，使它们具有默认模板参数的成员函数模板也将起作用。

但是，这仅起作用，因为这两个`std::enable_if`条件**不重叠**。如果您想为`int`（比如说）添加不同的重载，那么您会发现它的扩展性不那么好。根据您要执行的操作，标签调度通常比 SFINAE 具有更好的扩展性，您希望在多个备选方案上进行调度：

```
#include<type_traits>

template<typename Ret>
class Foo
{
public:
    void _on_dispatched()
    {
        // tag dispachting: create dummy of either std::false_type or std::true_type
        // almost guaranteed to be optimized away by a decent compiler
        helper_on_dispatched(std::is_void<Ret>()); 
    } 

private:
    void helper_on_dispatched(std::false_type)
    {
        // do stuff for non-void
    }

    void helper_on_dispatched(std::true_type)
    {
        // do stuff for void
    }
};

int main()
{
    Foo<void>()._on_dispatched();
    Foo<int>()._on_dispatched();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T09:08:38.003

SFINAE 仅适用于模板。只需稍加修改即可编译您的代码：

```
template <typename Ret>
typename std::enable_if<std::is_void<Ret>::value, Ret>::type _on_dispatched() { /*...*/ }

template <typename Ret>
typename std::enable_if<!std::is_void<Ret>::value, Ret>::type _on_dispatched() { /*...*/ } 
```

用法：

```
auto q = _on_dispatched<int>(); 
```

你当然不能推断出函数的返回类型，因为它是不可推断的。但是，您可以将此模板打包*到*另一个模板中：

```
template <typename T>
struct Foo
{
    // insert templates here, maybe privately so

    T bar() { return _on_dispatched<T>(); }
}; 
```

# cocos2d-iphone - 像 cocos2d 中的键盘一样滑入和滑出动画

> ID：12002449
> 
> 赞同：2
> 
> 时间：2012-08-17T08:35:17.370
> 
> 标签：cocos2d-iphone

我想创建一个工具栏（最初是隐藏的），其中包含可以拖动的项目。如果点击一个按钮，工具栏将出现自下而上（就像键盘的动画一样）。就是想问一下在cocos2d中怎么做。

感谢您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:39:21.217

我使用此代码打开和关闭抽屉。

```
-(void)showMyCocos2DDrawer
{
    CGSize s = [[CCDirector sharedDirector] winSize];

    self.position = ccp(-s.width,0.0f);  //do this in ur init method :)

    CGPoint pos =ccp(0.0f, 0.0f );

    id moveTo = [CCMoveTo actionWithDuration:0.5f position:pos];
    id calFun = [CCCallFunc actionWithTarget:self selector:@selector(animDone)];
    id seq    = [CCSequence actions:moveTo, calFun, nil];

    [self runAction:seq];
}

-(void)hideCocos2DDrawer
{
    CGSize s = [[CCDirector sharedDirector] winSize];

    CGPoint pos =ccp(-s.width, 0.0f);

    id moveTo = [CCMoveTo actionWithDuration:0.3f position:pos];
    id calFun = [CCCallFunc actionWithTarget:self selector:@selector(goBack)];
    id seq    = [CCSequence actions:moveTo, calFun, nil];

    [self runAction:seq];
}

-(void) animDone
{
//write in code here..
}

-(void)goBack
{
//write out code here..
} 
```

# java - 如何中断无限循环

> ID：12002450
> 
> 赞同：24
> 
> 时间：2012-08-17T08:35:16.680
> 
> 标签：java, loops, infinite-loop

虽然我知道问起来有点傻，但我还是想多问问它的技术角度。

一个简单的无限循环示例：

```
public class LoopInfinite {
    public static void main(String[] args) {
        for (;;) {
            System.out.println("Stack Overflow");
        }
    }
} 
```

我怎样才能从这个类的外部中断（停止）这个无限循环（例如，在继承的帮助下）？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-17T08:41:24.553

写到这里我都觉得很脏，但是...

从不同的线程，你可以调用`System.setOut()`一个`PrintStream`实现，`RuntimeException`当你调用`println()`.

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-08-17T08:41:09.573

我们可以使用变量来实现它`volatile`，我们将改变它`Thread`并停止循环。

```
 for(;!cancelled;) /*or while(!cancelled)*/{
       System.out.println("Stackoverflow");
   } 
```

这是编写无限循环的更好方法。

```
public class LoopInfinite{
      private static volatile boolean cancelled=false;
      public static void main(String[] args){
             for(;!cancelled;) { //or while(!cancelled)
                    System.out.println("Stackoverflow");
             }
      }
      public void cancel(){
        cancelled=true;
      }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-17T08:57:28.677

您*可以*从另一个线程获取运行无限循环的线程并在其上调用中断。不过，您必须非常确定自己在做什么，并希望被中断的线程在中断时能够正常运行。

在这里，我用有问题的循环命名了线程，以便于识别。请注意，以下解决方案容易受到竞争条件的影响。

```
 Thread loop = new Thread() { 

        public void run() {
            Thread.currentThread().setName("loop");
            while(true) {
                System.out.print(".");
            }
        }
    }.start(); 
```

然后在其他课程中：

```
 ThreadGroup group = Thread.currentThread().getThreadGroup();
    Thread[] threads = new Thread[group.activeCount()];
    group.enumerate(threads);

    for(Thread t : threads) {
        if(t.getName().equals("loop")) {
            /* Thread.stop() is a horrible thing to use. 
               Use Thread.interrupt() instead if you have 
               any control over the running thread */
            t.stop();
        }
    } 
```

请注意，在我的示例中，我假设两个线程在同一个 ThreadGroup 中。不能保证会出现这种情况，因此您可能需要遍历更多组。

如果您对此有一些控制权，那么这里的一个不错的模式是`while(!isInterrupted())`在循环声明中使用`t.interrupt()`而不是使用`t.stop()`.

我给你的唯一建议是，即使在发布后，也不要这样做。你**可以**这样做，但你真的**不应该**。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-17T08:38:09.170

我认为这是不可能的。仅在循环内使用*break 。*你可以使用

```
while(cond) {} 
```

并从其他地方使它成为*假*

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-17T09:03:58.903

您可以通过从 Thread.currentThread() 询问来保持其对这个线程 [main] 的继承引用的静态引用来中断这个线程，就像这样

```
public class LoopInfinite{
public static Thread main = null;
public static void main(String[] args){
    main = Thread.currentThread();
    for(;;)
       System.out.println("Stackoverflow");
    }
} 
```

要终止，您可以从其他线程调用它

```
LoopInfinite.main.interrupt(); 
```

但它只有在两个线程都属于同一组时才有效。否则调用线程会得到[SecurityException](http://docs.oracle.com/javase/6/docs/api/java/lang/SecurityException.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-17T08:40:22.743

你的问题看起来像一个线程问题。但是，即使在线程中包含停止标志，现在也是一个好习惯

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-17T08:36:41.543

你不能从这个类之外阻止它。如果您使用继承，您可以覆盖您的循环，但如果没有 abort-flag，您将无法这样做。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-08-17T08:38:19.433

非常开放的问题，但停止这样的循环很可能需要您从另一个线程进行操作。然后另一个线程需要设置一些你的无限循环可以定期检查的变量，如果该变量具有某个值；跳出循环。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-08-17T08:39:24.367

如果不完全停止该过程，您将无法中断此特定循环。通常，如果您尝试从外部源执行此操作（我假设您无法控制源代码，因为如果您这样做了，您可以轻松地在循环中设置一个条件，例如您可以设置的布尔值从外部线程），您将不得不停止正在运行的线程，无论您是通过[Thread 对象](https://stackoverflow.com/questions/4399883/killing-a-thread)执行此操作（您必须以某种方式找到对它的引用，例如通过循环通过[现有的 Threads](https://stackoverflow.com/questions/1323408/get-a-list-of-all-threads-currently-running-in-java)），或者您是否停止它作为[系统进程](https://stackoverflow.com/questions/6356340/killing-a-process-using-java)。

另一种选择是使用不是无限循环的循环覆盖该方法，但不幸的是，这不适用于您的示例，因为它是一个静态方法。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-08-17T09:03:04.520

如果你需要一个“无限”循环，你肯定需要一个线程（否则你的应用程序将被卡住直到循环结束）。

```
class BigLoop extends Thread
{

    private boolean _sexyAndAlive = true;

    // make some constructor !

    public void softTerminate()
    {
    _sexyAndAlive = false;
    }

    public void run()
    {
        try
        {
            while( _sexyAndAlive )
            {
               // Put your code here 
            }
        }
        catch( Some Exceptions ... )
        {
            // ...
        }
        // put some ending code here if needed
    }
}

// in another file :

BigLoop worker = new BigLoop();
worker.start(); // starts the thread

// when you want to stop it softly
worker.softTerminate(); 
```

因此，这是一种让后台运行循环的简单方法。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-08-17T08:58:16.093

添加一个变量 shouldBreak 或可以使用 getter 和 setter 设置的东西。

```
public class LoopInfinite {
private boolean shouldBreak = false;

public boolean isShouldBreak() {
    return shouldBreak;
}

public void setShouldBreak(boolean shouldBreak) {
    this.shouldBreak = shouldBreak;
}

public static void main(String[] args) {
    // Below code is just to simulate how it can be done from out side of
    // the class
    LoopInfinite infinite = new LoopInfinite();
    infinite.setShouldBreak(true);
    for (;;) {
        System.out.println("Stackoverflow");
        if (infinite.shouldBreak)
            break;
    }
} 
```

}

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-10-21T01:14:26.193

这是我所做的：

```
while(Exit == false){
    Scanner input = new Scanner(System.in);
    String in = input.next();

    switch(in){
        case "FindH": 
            FindHyp hyp = new FindHyp();
            float output = hyp.findhyp();
            System.out.println(output); 
        case "Exit":
            Exit = true;
    break;

    }
  } 
```

# iphone - iphone开发：按下按钮时迭代循环

> ID：12002454
> 
> 赞同：-2
> 
> 时间：2012-08-17T08:35:28.950
> 
> 标签：iphone, objective-c, button, while-loop, iteration

在我的 iPhone 应用程序中，我在 viewDidLoad 中有一个 while 循环。我的视图中有四个按钮。

如果按下四个按钮之一，我想让 while 循环进行迭代。

让我们说；

```
int k = 0;
while (k<4){

     if (// one of the buttons is pressed...){
         k++;
     }

} 
```

谢谢您的帮助。

编辑：我试过了，但没有用：

```
 int k = 0;
    while (k<4){

         if ([self.answerButton_1 isSelected]){
             k++;
         }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T09:31:54.273

问题是**viewDidLoad**方法只在应用程序启动时被调用一次，但是当有人按下按钮时你想稍后再做一些事情。

您需要让按钮在按下时调用一个方法。所以你需要做一些事情

1）在标题中，您需要添加变量 k 以便它在您的所有函数中可用：

```
int k; 
```

2) 在您的 viewDidLoad 中创建一个按钮：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self 
      action:@selector(someoneTouchedYourButton)
             forControlEvents:UIControlEventTouchUpInside];
[button setTitle:@"add to k" forState:UIControlStateNormal];
button.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
[self.view addSubview:button]; 
```

3）设置k的初始值，在viewDidLoad中就OK了

```
k = 0; 
```

3）创建当有人按下按钮时被调用的函数：

```
-(void) someoneTouchedYourButton
{
    k ++;
    NSLog(@"someone pressed the button. k is now %d",k);
} 
```

4）您似乎想将 k 限制为最多 4，因此在 someoneTouchedYourButton 部分添加一些内容以将其限制为 4。

```
if(k > 4)
{
     k = 4;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:31:10.337

这是一种奇怪的做法。while 循环将阻塞主线程，您将无法获得任何 UI 输入。您应该使用 IBAction 并通过界面构建​​器（或以编程方式）连接按钮，并为每个按钮使用标签。

```
-(IBAction)buttonPressed:(id) sender {
        UIButton *button = (UIButton *)sender;
        int tag = [button tag];
        //Do what you need to depending on "tag"
} 
```

# android - 在 Android 上播放 HTML5 嵌入的声音

> ID：12002458
> 
> 赞同：1
> 
> 时间：2012-08-17T08:35:43.130
> 
> 标签：android, android-webview, html5-audio, html5-animation

我有一个带有声音的 Flash 动画，我将其转换为 HTML5。当我在 WebView 中播放或使用设备浏览器打开它时，没有声音。

我尝试了几种声音格式，但都没有成功。

我使用[www.html5test.com](http://www.html5test.com)来查看浏览器的兼容性，它应该支持 mp3。

![在此处输入图像描述](../Images/9c093f6bb70f2ae4f0ed8055a6e93211.png)

有可能吗？有什么想法吗？

我使用的是安卓 4.0.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-27T22:01:46.723

我在这里找到了解决方案 Embed Background Audio in Android >= 2.3 Browser

```
<audio id="audio1" controls="controls" loop="loop" autoplay="autoplay" >
   <source src="scene1.mp3" type="audio/mpeg" />
   <source src="scene1.ogg" type="audio/ogg" />
</audio> 
```

这对我有用:)

# erd - 如何在 ERD 图中组织大量数据库表？

> ID：12002462
> 
> 赞同：-1
> 
> 时间：2012-08-17T08:35:50.193
> 
> 标签：erd

比如说我在数据库中有 100 个表，我使用 SQL Server 2008`ERD`为我生成图表。如何对相关表进行逻辑分组，以便用户一眼就能看到他们想要查看的部分，而不是数据库关系中的全部表？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-17T08:45:47.553

您可以创建多个图表，显示数据库的各个区域

# jsf - 根据条件在 JSF 页面中渲染 IFrame

> ID：12002467
> 
> 赞同：1
> 
> 时间：2012-08-17T08:36:26.437
> 
> 标签：jsf, iframe, jsf-2, richfaces, rendering

我们使用 iFrame 在 GUI 上显示应用程序中生成的报告。报告在 iframe 内的 GUI 上正确显示。但是，在某些按钮上单击我希望 iframe 消失（render=false）。但令我完全不相信的是，这并没有发生。

在页面上呈现 iframe 后，除非我刷新整个页面，否则它不会被 render=false。

iframe 放置在`<rich:layoutPanel>`. 我尝试将 iframe 保留在内部`<h:panelGrid>`并`<h:panelGroup>`使用那里的渲染属性对其进行渲染，但是 iframe 本身并没有出现。当它出现时，即使将渲染属性`<h:panelGrid>`设置为 false，iframe 也不会被渲染=false。

我知道 iframe 会针对整个页面的现有 DOM 创建一个单独的 DOM，但应该有一些方法可以根据某些按钮单击来呈现 iframe。

iFrame 的代码片段：

```
<h:panelGroup id="checkIFrame" rendered="#{Bean.renderPanelGroup}">
    <iframe frameborder="0" align="left"
        src="${pageContext['request'].contextPath}/moduleName/PageName.jsf"
        name="PdfPnl" id="PdfPnl" scrolling="auto" width="750"
        height="500" marginheight="5" marginwidth="10">
    </iframe>
</h:panelGroup> 
```

单击哪个按钮的代码片段，应呈现 iframe=false

```
<a4j:outputPanel id="outButton">
    <a4j:commandButton value="Send" immediate="true" status="Hello" 
        rendered="#{Bean.renderTrueFalse}" reRender="outButton,checkIFrame"
        id="Again" process="FormName" actionListener="#{bean.affirmative}"
    />
</a4j:outputPanel> 
```

如何根据某些按钮单击呈现 iframe=false/true？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T09:49:22.647

您不能重新渲染定义了已渲染属性的组件。您需要重新渲染未定义渲染属性的 checkIFrame 的父组件。

更新：

```
<h:panelGroup id="aParentPanel">
     <h:panelGroup id="checkIFrame" rendered="#{Bean.renderPanelGroup}">
         <iframe frameborder="0" align="left"
             src="${pageContext['request'].contextPath}/moduleName/PageName.jsf"
             name="PdfPnl" id="PdfPnl" scrolling="auto" width="750"
             height="500" marginheight="5" marginwidth="10">
         </iframe>
     </h:panelGroup>
</h:panelGroup>

...
<a4j:commandButton reRender="aParentPanel".../> 
```

...

# javascript - fullcalendar 为放置在事件上的可点击图标取消绑定 eventClick 方法

> ID：12002468
> 
> 赞同：2
> 
> 时间：2012-08-17T08:36:27.327
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, fullcalendar

我正在使用全日历插件。我曾使用 jquery .on() 函数使图标可点击，但问题是当我点击放置在事件上的图标时，也会触发 fullcalendar 插件的 eventClick 方法。当我单击放置在全日历月视图上的事件上的图标时，我不希望触发 eventClick 方法。有人遇到过类似的问题吗？是否只有在单击事件上的图标时才禁用 eventClick 方法。我尝试使用 .unbind() 函数，但仍然触发了 evenClick 方法以及用于使图标可点击的 .on() 函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T08:41:28.903

最后，在您的图标的单击事件中，您可以取消将事件传播到 DoomTree。

示例：[http ://api.jquery.com/event.stopImmediatePropagation/](http://api.jquery.com/event.stopImmediatePropagation/)

```
$(".icons").on("click", function(event){
  event.stopImmediatePropagation();
}); 
```

或者：[http ://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

```
$(".icons").on("click", function(event){
  event.stopPropagation();
  // do something
}); 
```

# iphone - 附加 NSData

> ID：12002469
> 
> 赞同：0
> 
> 时间：2012-08-17T08:36:31.730
> 
> 标签：iphone, objective-c, c, nsdata

谁能帮我添加nsdata

我有 NSData 作为加密数据

```
<a5ecaf36 15519fcb cd164cf6 a83eaf55 367f1109 b6898951 2c227b86 ed98d0a6 db2d7a8a   25086baf 58436328 2583ed78 ef3410e5 4507d8a4 40fe22f9 0538a67c 065fbb8e ad445041 56f3ea87 e7b73189 aa0b8c66 a9da381e 6f718583 dce57b9a f2f5d9c9 b336c92f b2df2d43 9083bd1d e33e907b 7fd0fdc7 e5f64db9 b7f0975a> 
```

我想添加 F8 并将其作为 NSData 发送到服务器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T13:36:38.937

```
NSMutableData *mData = [NSMutableData dataWithData:mData];
unsigned char f8[1] = 0xF8;
[mData appendBytes:f8 length:1];

// You can use the mutable data as is or turn it back into a non-mutable object:

data = [NSData dataWithData:mData]; 
```

# dynamics-crm-2011 - 如何在 Microsoft CRM 2011 插件注册工具中备份保存到数据库的 dll

> ID：12002470
> 
> 赞同：2
> 
> 时间：2012-08-17T08:36:34.250
> 
> 标签：dynamics-crm-2011

我需要更新一个程序集。但是我在任何地方都没有旧的程序集。如果出现问题，我无法恢复到旧程序集。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T08:45:53.487

这解决了它：

> 您可以将其导出为解决方案：
> 
> 1）创建一个名为“插件备份”或其他名称的新解决方案（设置->解决方案->新建）
> 
> 2）添加插件（插件程序集->添加现有）
> 
> 3) 将解决方案导出为非托管解决方案（导出解决方案）
> 
> 这将创建一个包含您的 dll 的解决方案 zip，如果您需要恢复到以前的版本，您可以使用“导入解决方案”重新导入。

我在[http://social.microsoft.com/Forums/en/crmdevelopment从](http://social.microsoft.com/Forums/en/crmdevelopment/thread/e4506653-92e4-4259-b4bc-f15dcd772a46)[Scott Durow那里得到了答案](http://social.msdn.microsoft.com/profile/scott%20durow%20%5Bdevelop1%5D/?ws=usercard-mini)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:26:39.150

假设您的插件存储在数据库中而不是磁盘上，[则此工具](http://blogs.infinite-x.net/2011/06/27/free-utility-released-export-crm-4-0-plugins/)将完成这项工作。虽然它说它适用于 CRM 4.0，但我很确定它适用于 CRM 2011 就好了。

# excel - 合并两个excel宏

> ID：12002472
> 
> 赞同：0
> 
> 时间：2012-08-17T08:36:37.787
> 
> 标签：excel

我需要合并 2 个宏，我尝试了相同的方法，但第一个宏的结尾显示错误。请在这方面提供帮助，

宏

```
Sub ERS()
'
' ERS Macro
'

'
    ActiveWindow.SmallScroll Down:=-6
    Range("E1:E41").Select
    Selection.End(xlUp).Select
    Range("E2:E100").Select
    Selection.TextToColumns Destination:=Range("E2"), DataType:=xlDelimited, _
        TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=False, Tab:=True, _
        Semicolon:=False, Comma:=False, Space:=False, Other:=True, OtherChar _
        :=".", FieldInfo:=Array(Array(1, 1), Array(2, 1), Array(3, 1), Array(4, 1), Array(5, _
        1), Array(6, 1), Array(7, 1), Array(8, 1), Array(9, 1), Array(10, 1), Array(11, 1)), _
        TrailingMinusNumbers:=True
    Range("P2").Select
    ActiveCell.FormulaR1C1 = "=RC[-5]&RC[-4]"
    Range("P2").Select
    Selection.Copy
    Application.CutCopyMode = False
    Selection.AutoFill Destination:=Range("P2:P100"), Type:=xlFillDefault
    Range("P2:P100").Select
    Selection.Copy
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
    ActiveWindow.SmallScroll Down:=-21
    Selection.Replace What:="\", Replacement:=".", LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False
    ActiveWindow.SmallScroll Down:=-3

    Windows("qty.xls").Activate
    ActiveWindow.SmallScroll Down:=-12
    Range("M2").Select
    ActiveCell.FormulaR1C1 = "=VLOOKUP(RC[-9],lots.xlsx!R2C2:R100C16,15,0)"
    Range("M2").Select
    Selection.Copy
    Range("N2").Select
    Application.CutCopyMode = False
    ActiveCell.FormulaR1C1 = "=RC[-1]*RC[-6]"
    Range("M2:N2").Select
    Selection.Copy
    Range("M2:N100").Select
    ActiveSheet.Paste
    ActiveWindow.SmallScroll Down:=-12
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:53:22.447

试试这个代码（**未测试**）

如果您有任何错误，请告诉我。还要提到错误消息和给你错误的行

```
Sub ERS()
    Dim lRow As Long

    With Thisworkbook.ActiveSheet
        lRow = .Range("E" & .Rows.Count).End(xlUp).Row

        .Range("E2:E" & lRow).TextToColumns Destination:=.Range("E2"), DataType:=xlDelimited, _
        TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=False, Tab:=True, _
        Semicolon:=False, Comma:=False, Space:=False, Other:=True, OtherChar _
        :=".", FieldInfo:=Array(Array(1, 1), Array(2, 1), Array(3, 1), Array(4, 1), Array(5, _
        1), Array(6, 1), Array(7, 1), Array(8, 1), Array(9, 1), Array(10, 1), Array(11, 1)), _
        TrailingMinusNumbers:=True

        With .Range("P2:P" & lRow)
            .FormulaR1C1 = "=RC[-5]&RC[-4]"
            .Value = .Value

            .Replace What:="\", Replacement:=".", LookAt:=xlPart, _
            SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
            ReplaceFormat:=False
        End With
    End With

    Windows("qty.xls").Activate
    Range("M2").FormulaR1C1 = "=VLOOKUP(RC[-9],lots.xlsx!R2C2:R100C16,15,0)"
    Range("N2").FormulaR1C1 = "=RC[-1]*RC[-6]"
    Range("M2:N2").Copy Range("M2:N100")
End Sub 
```

我还建议您阅读[此](https://stackoverflow.com/questions/10714251/excel-macro-avoiding-using-select)内容。这正是您应该避免使用的原因`.Select`

# mysql - 追踪高级报告

> ID：12002473
> 
> 赞同：0
> 
> 时间：2012-08-17T08:36:38.217
> 
> 标签：mysql, trac

我有一个跟踪报告，显示工作流程的每个阶段有多少票。是否可以使报告动态化，因此如果单击一行，则会显示这些工单的报告。

```
SELECT stage,
count(status) as 'Number of Matches',
id as _id, 
'[..1] Tickets Here' as link
FROM ticket 
```

如果做不到这一点，那么有一个指向另一个报告的链接会很有用，该报告显示了该阶段的所有票证，但链接在报告中被视为文本。

```
 [..1] Tickets Here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:04:41.407

如果您有兴趣查看每个里程碑的此信息，那么您最好自定义里程碑页面而不是创建单独的报告。[这个页面](http://trac.edgewall.org/wiki/TracRoadmapCustomGroups)解释了如何在里程碑进度条中创建自定义状态分组，在这种情况下对你很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T23:43:42.157

您还可以使用 wiki 页面制作动态报告。就个人而言，我发现大多数时候这是更简单的方法。

出于您的目的，您可以使用以下内容：

```
== Open Tickets, By State ==
[report:4 New] ([[TicketQuery(status=new,format=count)]])\\
[report:5 Accepted] ([[TicketQuery(status=accepted,format=count)]])\\
[report:6 Code Review] ([[TicketQuery(status=codereview,format=count)]])\\
[report:7 Testing] ([[TicketQuery(status=testing,format=count)]]) 
```

这将导致输出如下所示：

```
New (40)
Accepted (12)
Code Review (8)
Testing (17) 
```

其中州名是指向列出该州所有门票的详细报告的链接。您需要为每个州创建一个报告，并为`report:#`示例中的链接填写正确的报告编号。

# apache2 - 无法加载 C:/Program Files/Apache Software Foundation/Apache2.4/modules/mod_dav_svn

> ID：12002476
> 
> 赞同：-1
> 
> 时间：2012-08-17T08:36:43.790
> 
> 标签：apache2

我在 Windows 7 和 svn 1.7.4 存储库上使用 Apache 2.4.1。

当我尝试在 httpd.conf 中加载模块 mod_dav_svn 时。

它显示错误

httpd.exe：C:/Program Files/Apache Software Foundation/Apache2.4/conf/httpd.conf 第 172 行的语法错误：无法加载 C:/Program Files/Apache Software Foundation/Apache2.4/modules/mod_dav_svn。所以进入服务器：找不到指定的程序。

mod_dav_svn.so 已经在 Module 文件夹中，并且 libapr-1.dll,intl3_svn.dll 也可以在 bin 目录中找到。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:07:34.873

That error is usually because the modules and the apache version don't jive. It's possible that the version of SVN isn't built for apache 2.4\. Try grabbing a set built for apache 2.4 from here: [http://alagazam.net/](http://alagazam.net/)

# c++ - 将 std::shared_ptr 传递给构造函数

> ID：12002480
> 
> 赞同：15
> 
> 时间：2012-08-17T08:36:56.803
> 
> 标签：c++, std

以下是关于创建 Stuff 并赋予 Foo 所有权的合理有效的方法吗？

```
class Foo
{
    explicit Foo(const std::shared_ptr<Stuff>& myStuff)
        : m_myStuff(myStuff)
    {
    }

    ...

private:
    const std::shared_ptr<Stuff> m_myStuff;
}

std::shared_ptr<Stuff> foosStuff(new Stuff());
Foo f(foosStuff); 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-17T08:50:04.650

既然您对效率感兴趣，我想提出两点：

shared_ptr<> 是移动构造比复制构造便宜的许多标准库类型之一。复制构造 shared_ptr 比较慢，因为复制需要引用计数器自动递增，而移动 shared_ptr 根本不需要接触引用的数据或计数器。从 Dave Abrahams 的文章“[想要速度？按值传递！](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/) ”中可以了解到，在某些情况下，按值获取函数参数实际上是有益的。这是以下情况之一：

```
class Foo
{
  explicit Foo(std::shared_ptr<Stuff> myStuff)
  : m_myStuff(move(myStuff))
  {}

  ...

private:
  std::shared_ptr<Stuff> m_myStuff;
}; 
```

现在你可以写

```
Foo f (std::make_shared<Stuff>()); 
```

其中参数是临时的，并且没有 shared_ptr 被复制（仅移动一次或两次）。

此处使用 std::make_shared 的优点是只完成了一次分配。在您的情况下，您自己分配了 Stuff 对象，并且 shared_ptr 构造函数也必须动态分配引用计数器和删除器。make_shared 只需一次分配即可为您完成所有工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T08:40:34.457

是的，这完全合理。这样，管理共享指针所涉及的工作只需要完成一次，如果您通过值传递它，则不需要两次。您还可以考虑使用 make_shared 来避免复制构造。

```
std::shared_ptr<Stuff> foosStuff(std::make_shared<Stuff>()); 
```

您可以做出的唯一改进是，如果 Foo 是唯一的所有者（即，您不会在创建 Foo 后保留 foosStuff），那么您可以切换到使用 std::unique_ptr 或 boost::scoped_ptr（即C++11 之前的等价物），这将有更少的开销。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T08:47:34.720

`make_foo`有一个助手可能更有效：

```
Foo make_foo() { return Foo(std::make_shared<Stuff>()); } 
```

现在你可以说`auto f = make_foo();`。或者至少`make_shared`自己使用调用，因为结果`shared_ptr`可能比从`new`表达式构造的更有效。如果`Stuff`实际上采用构造函数参数，私有辅助构造函数可能是合适的：

```
struct Foo
{
    template <typename ...Args>
    static Foo make(Args &&... args)
    {
        return Foo(direct_construct(), std::forward<Args>(args)...);
    };

private:

    struct direct_construct{};

    template <typeaname ...Args>
    Foo(direct_construct, Args &&... args)
    : m_myStuff(std::make_shared<Stuff>(std::forward<Args>(args)...))  // #1
    {  }
}; 
```

您可以包装`Foo::make`到上述`make_foo`内容中，也可以直接使用它：

```
auto f = Foo::make(true, 'x', Blue); 
```

也就是说，除非您真的*共享*所有权，否则`std::unique_ptr<Stuff>`听起来更可取的方法是：它在概念上更简单，也更有效。在这种情况下，您会`m_myStuff(new Stuff(std::forward<Args>(args)...))`在标记的行中说`#1`。

# php - php变量异常行为

> ID：12002484
> 
> 赞同：1
> 
> 时间：2012-08-17T08:37:19.090
> 
> 标签：php, javascript, codeigniter

我正在尝试同时增加 java 脚本变量和 php 变量的值，所以在我的 java 脚本中我这样做：

```
<script>
<?php $i=1;?>
for(var i=1;i<=5;i++){
var abc = $('<input>').attr('name','demo'+i).attr('value','<?php echo set_value('demo'.$i++));
 <?php echo $i; ?>
 }
</script> 
```

但是，每次 $i echo`ed 的值为 2 时，逻辑上它应该增加 java 脚本循环迭代的次数并回显 5 但它不是，我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T08:40:06.760

PHP 代码不会与 Javascript 代码同时运行。

PHP 代码在客户端接收页面之前在服务器上运行。客户端收到页面后，Javascript 代码在客户端上运行。

您需要在 PHP 代码中编写一个循环，为您的 Javascript 代码提供完整的数据。

一种常见的方法是将其放入数组中并将其编码为 JSON 服务器端，然后将 JSON 提供给您的 Javascript 以进行进一步处理。请注意，如果您只是将数据分配给一个变量，则 Javascript 端不需要额外解析数据 - JSON 是有效的 Javascript。

### 进一步阅读

*   [PHP 中的 JSON](http://php.net/manual/en/book.json.php)
*   [Javascript 中的 JSON](http://www.json.org/js.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:52:40.297

这段代码里面没有循环！（如果你问 PHP 解释器）。

它只是一个输出几行文本的 PHP 脚本（恰好是 Javascript 代码，恰好包含一个 Javascript 循环）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:52:55.580

您可以尝试理解此代码：

```
<script>
    <?php
    echo "var data = [";
    for ($i = 1; $i <= 5; $i++) {
        echo "'".set_value('demo'.$i)."'";
    }
    echo "];";
    ?>

    for (var i = 1; i <= 5; i++) {
        var abc = $('<input>').attr('name', 'demo' + i).attr('value', data[i]);
    }
</script> 
```

实际发生的是，一旦你运行这个 php 文件，php 块会生成如下输出：

```
var data = ['demo1 value', 'demo2 value', 'demo3 value','demo4 value','demo5 value',]; 
```

这是 javascript 中的一个数组，您可以在 php 块下方的 javascript 代码中使用它。

# jquery - 即使选择列表重复为假，jQuery也会返回真

> ID：12002486
> 
> 赞同：0
> 
> 时间：2012-08-17T08:37:20.100
> 
> 标签：jquery, selectlist

我对 jQuery 很陌生。我坚持这一点，我试图在单击鼠标时在选择列表框中找到重复项。如果为 true，它将提醒用户，如果为 false，它将附加新值和文本。但是，函数 findDuplicates(aVal) 在调用时总是返回 true。我尝试进入代码，函数本身可以工作，但是当它进入 jQuery 脚本（1.7.2）时，它变成了真的。可能是我做错了什么？提前致谢！

这是代码：

```
 function findDuplicates(aVal) {
        $("#listBoxAllergy option").each(function (i){
            var isDuplicate = false;
            if ($.trim(aVal) == $(this).val()) {
                isDuplicate = true;
            }
            return isDuplicate;
        });
    };

    $("#btnAddAllergy").on("click", function () {
        var allergy = $("#autoComAllergy").val();
        if (findDuplicates(allergy))
            alert("The allergy is already in the list");
        else
            $("#listBoxAllergy").append("<option value='" + allergy + "'>" + allergy + "</option>");
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:40:25.980

***首先，*** jQuery中没有`.value()`方法。

`.value()`应该是`.val()`。

***其次，***你不应该`return isDuplicate;`在`.each`回调里面，把它移到外面。

```
function findDuplicates(aVal) {
    var isDuplicate = false;
    $("#listBoxAllergy option").each(function (i){
        if ($.trim(aVal) == $(this).val()) {
            isDuplicate = true;
            return false; // here return false let stop the each.
        }
    });
    return isDuplicate;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T08:42:09.043

```
function findDuplicates(aVal) {
    var isDuplicate = false;
    $("#listBoxAllergy option").each(function (i){            
        if ($.trim(aVal) == $(this).val()) {
            isDuplicate = true;
        }            
    });
    return isDuplicate;
}; 
```

试试这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:40:07.470

在您的比较器函数中，我将使用严格相等（===）而不是仅相等（==），尽管这不是问题的根源。

jQuery中没有`value()`方法，`val()`而是

# java - 有中缀到postix的公式吗？

> ID：12002498
> 
> 赞同：0
> 
> 时间：2012-08-17T08:38:17.563
> 
> 标签：java, computer-science

嗨，我可以寻求帮助吗？是否有中缀到后缀的公式？...我不知道如何转换它们并给出后缀表达式和后缀评估...例如这个 1*2(5+2 )-9/6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:46:19.857

按照此过程从 转换`infix`为`postfix`：

```
Define a stack
Go through each character in the string
If it is between 0 to 9, append it to output string.
If it is left brace push to stack
If it is operator *+-/ then 
    If the stack is empty push it to the stack
    If the stack is not empty then start a loop:
            If the top of the stack has higher precedence
            Then pop and append to output string
            Else break
        Push to the stack

If it is right brace then
    While stack not empty and top not equal to left brace
    Pop from stack and append to output string
    Finally pop out the left brace.

If there is any input in the stack pop and append to the output string. 
```

[阅读此处，以更好地理解带有图表的过程。](http://scriptasylum.com/tutorials/infix_postfix/algorithms/infix-postfix/index.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:46:33.770

如果您想以不同的符号获得表达式，一种方法是使用二叉树并使用前/中/后遍历进行转换。

# c# - 如何从 c# 中的另一个正在运行的窗口窗体访问控件

> ID：12002505
> 
> 赞同：0
> 
> 时间：2012-08-17T08:38:45.280
> 
> 标签：c#

实际上，我是 C# 的新手。在我的程序中，我有两个窗体。每个窗体有一个标签和一个激活按钮。一旦我启动（加载）程序，两个窗体将一起弹出。我的意图是当我单击窗体1 激活按钮时，我的form1标签的背面颜色将变为“绿色”（让用户知道这个form1已激活）。到这里我可以编写软代码。但是当我点击form2激活按钮时，form1将不再活动，我的form2 将被激活，form2 标签的背景颜色也将变为“绿色”。由于 form1 不再处于活动状态，我想将 form1 标签的背景颜色更改为红色。我该如何更改？

到目前为止我是如何编写程序的。

在 form1 激活按钮点击 1.form1 标签的背景颜色 = Colour.green // 让用户知道 form1 在按钮点击 2 时被激活。 form2 f2 = new form2(); f2.(form2 label's).BackColour = Colour.red

form2 没有变化。

当我添加 f2.Show() 时，一旦我单击 form1 上的激活按钮，form2 将弹出红色标签背景色。

请记住，我在我的 Mainform 上同时运行 form1 和 form2。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:49:52.210

您的表单只是普通的 c# 类，而表单控件是这些类的私有成员。

如果您需要对这些控件中的一些控件进行公共访问，只需为这些控件创建一个公共属性。

```
public Button MyColorButton 
{
    get { return MyButton; }
} 
```

# linux - 什么是“共享文件系统信息”？

> ID：12002507
> 
> 赞同：0
> 
> 时间：2012-08-17T08:38:49.077
> 
> 标签：linux, linux-kernel, linuxthreads

**说“共享文件系统信息**”到底是什么意思？“文件系统信息”中有什么？

[`CLONE_FS`（当我在一些 linux 头文件中看到标志时出现了这个问题）]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T09:47:56.757

文件系统信息包括文件的根目录、当前工作目录和 umask（文件权限）。[在内核中由 表示`struct fs_struct`]

因此，当您设置 CLONE_FS 标志时，子进程和父进程将共享文件系统信息。

现在，举个例子：父进程正在处理某个文件，而此时子进程已经更改了工作目录，那么父进程会遇到问题（如果指定了相对路径），因为它们共享相同的工作目录。

希望你得到你的答案。

# magento - Magento 通用集合

> ID：12002509
> 
> 赞同：0
> 
> 时间：2012-08-17T08:38:55.627
> 
> 标签：magento

我有一个模型，我想使用一个集合来保存这些对象，而不仅仅是一个数组。我想知道是否需要创建自己的集合类，或者是否可以使用通用集合类。

这在 Magento 中可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:35:47.577

对于收集工作，您需要按顺序：

yourmodel/Model/Mysql4/Youmodel/Collection.php 扩展了 Mage_Core_Model_Mysql4_Collection_Abstract。有了这个：`protected function _construct() { $this->_init('modelname/model'); }` yourmodel/Model/Mysql4/Setup.php 扩展了 Mage_Eav_Model_Entity_Setup。在你的 config.xml 里有类似的东西

```
 <models>
        <you_model_name>
            <class>you_model_name_Model</class>
            <resourceModel>you_model_name_mysql4</resourceModel>
                    </you_model_name>
                    <you_model_name_mysql4>
                        <class>you_model_name_Model_Mysql4</class>
                        <entities>
                            <you_model_name><table>you_model_name</table></you_model_name>
                        </entities>
                    </you_model_name_mysql4>
    </you_model_name> 
```

现在只需调用：

```
Mage::getModel('yourmodel/yourmodel')->getCollection(); 
```

# decimal - 减少十进制变量的长度（算法）

> ID：12002510
> 
> 赞同：0
> 
> 时间：2012-08-17T08:38:57.390
> 
> 标签：decimal

我有一串十进制数字，例如：

```
965854242113548732659745896523654789653244879653245794444524
length : 60 character 
```

我想将它发送到一个函数，但首先我想尽可能地减少它的长度。我怎样才能做到这一点？

我考虑将其转换为 base-34，即`1RG7EEWTN7NW60EWIWMASEWWMEOSWC2SS8482WQE`. 即 40 个字符的长度。我可以通过某种方式减少它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:04:02.673

您的数字适合 70 位 - 对于如此小的有效负载压缩似乎是荒谬的。假设服务器 API 支持任意二进制数据，我只需将值编码为二进制并在其前面加上所需的字节数。

*   1 字节长度信息 - 对于 854657986453156789675，您最初给出的示例，这将是 9
*   9字节的二进制有效载荷

→ 为您的示例传输了 10 个字节的数据。

您的十六进制示例：

```
09 2e 54 c3 1e 81 cf 05 fd ab 
```

使用以字节为单位的长度，这当然只支持长度为 255 字节的小数，但我想这已经足够了。如果您的传输协议具有内置*的数据包长度*概念，您甚至可以跳过初始长度字节。

重要提示：确保所有边使用相同的字节序。当您通过网络传输数据时，网络字节顺序（[大端](http://en.wikipedia.org/wiki/Endianness#Endianness_in_networking)）将是自然的。

如果您想传输非常大的数字，请记住您可以对数据的二进制表示使用任何您喜欢的压缩算法。但是，您的有效负载必须大得多才能使压缩可行 - 例如，由于 zLib 数据结构的开销，对上述 9 字节有效负载使用 zLib 压缩会导致 18 字节有效负载。

如果（且仅当）您不能对有效负载使用任意字节，则可以对数据进行编码（可能在压缩之后）。大多数现代库都内置了对[Base64](http://en.wikipedia.org/wiki/Base64)的支持，因此这将是表示数据的一种自然方式。

# return - C++中的延迟执行策略

> ID：12002513
> 
> 赞同：0
> 
> 时间：2012-08-17T08:39:03.753
> 
> 标签：return, deferred-execution

我有一个回调实现，其中未知的第三方在我的代码中调用函数指针。

但是，许多语言中的一个问题是在函数返回后触发代码。例如，当调用回调并且我必须删除调用对象（并且在这种情况下，重新初始化它）时，从回调返回会导致异常。

假设我不能挂钩并且我不拥有/不能修改调用回调的代码，那么在函数返回后执行代码的最佳方式是什么？

我能想到的唯一真正的方法是设置某种状态机并让工作线程检查状态。但是，我预见到的问题是竞争条件，在重置回调返回和调用对象被重置之间调用回调。

是否有任何我不知道的功能，或者这是实现这种结果的最有效方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-04T17:15:54.973

它需要 c++11 或更高版本。但这就是我要做的。您可以重写它以使用函数指针，以便它适用于较旧的 c++ 版本

```
#include <functional>
#include <iostream>

#define CONCACT_IMPL(x , y) x##y
#define CONCAT(x, y) CONCACT_IMPL(x, y)
#define deffered(x) auto CONCAT(__deffered, __COUNTER__)  = Defer(x);

struct Defer {
    Defer(std::function<void(void)> pFunc) : func(pFunc) {};
    std::function<void(void)> func;
    virtual ~Defer(){
        func();
    }
};

int main() {

    deffered([] () {
        std::cout << "deffered" << std::endl;
    });

    std::cout << "now" << std::endl;
} 
```

输出 -->

```
now
deffered 
```

# objective-c - Cocos2d-iphone 动画从一帧到另一帧的过渡

> ID：12002514
> 
> 赞同：0
> 
> 时间：2012-08-17T08:39:05.037
> 
> 标签：objective-c, cocos2d-iphone

是否可以为一个精灵制作动画，使一帧淡出以便另一帧可见？这就像在同一个位置创建两个精灵，而在顶部的精灵失去了不透明度。我宁愿用两个帧对一个精灵进行操作，而不是对两个精灵进行操作。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:49:57.147

一个精灵只能显示一个“帧”。对于您的要求，您**必须**使用两个精灵，这是没有办法的。毕竟，您同时显示两张图像，一张淡出，另一张淡入。

# php - PHPExcel异常错误“单元格坐标不能是零长度字符串”尝试简单示例生成xls文件

> ID：12002520
> 
> 赞同：0
> 
> 时间：2012-08-17T08:39:30.823
> 
> 标签：php, exception, phpexcel

我正在尝试在我的 Web 应用程序中生成一个 xls 模板，为此，我正在使用 PHPExcel。我使用个性化框架 (PHPFW) 和 ZendFramework。

我正在尝试使用示例进行我的第一个测试：01simple-download.xls。但是当下载文件并使用 Excel mac 2008 打开它时，我收到以下错误消息： ![PHPExcel错误](../Images/9db950a1838d90ce66546cf598a845cb.png)

现在，我在控制器中使用以下示例代码来生成要下载的 xls 文件：

```
 public function bulkUploadTemplateExcel($ctx) {
    /** Error reporting */
    error_reporting(E_ALL);
    ini_set('display_errors', TRUE);
    ini_set('display_startup_errors', TRUE);
    date_default_timezone_set('Europe/London');

    if (PHP_SAPI == 'cli')
        die('This example should only be run from a Web Browser');

    // Create new PHPExcel object
    $objPHPExcel = new PHPExcel();
    // Set document properties
    $objPHPExcel->getProperties()->setCreator("Maarten Balliauw")
    ->setLastModifiedBy("Maarten Balliauw")
    ->setTitle("Office 2007 XLSX Test Document")
    ->setSubject("Office 2007 XLSX Test Document")
    ->setDescription("Test document for Office 2007 XLSX, generated using PHP classes.")
    ->setKeywords("office 2007 openxml php")
    ->setCategory("Test result file");

    // Add some data
    $objPHPExcel->setActiveSheetIndex(0)
    ->setCellValue('A1', 'Hello')
    ->setCellValue('B2', 'world!')
    ->setCellValue('C1', 'Hello')
    ->setCellValue('D2', 'world!');

    // Miscellaneous glyphs, UTF-8
    $objPHPExcel->setActiveSheetIndex(0)
    ->setCellValue('A4', 'Miscellaneous glyphs')
    ->setCellValue('A5', 'éàèùâêîôûëïüÿäöüç');

    // Rename worksheet
    $objPHPExcel->getActiveSheet()->setTitle('Simple');

    // Set active sheet index to the first sheet, so Excel opens this as the first sheet
    $objPHPExcel->setActiveSheetIndex(0);

    // Redirect output to a client’s web browser (Excel5)
    header('Content-Type: application/vnd.ms-excel');
    header('Content-Disposition: attachment;filename="01simple.xls"');
    header('Cache-Control: max-age=0');

    $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5');
    $objWriter->save('php://output');
    exit;
} 
```

你知道我可能做错了什么吗？

PS：就像在示例中一样，我正在`require_once 'application/classes/lib/PHPExcel.php';`我的视图中进行操作（在 phpfw 中，控制器调用了调用模板的视图）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:51:02.560

正如@Mark Ba​​ker 所说，这个问题的发生只是因为我使用的版本。我建议所有有相同问题的用户检查您使用的版本是否是您可以在 github 中找到的最新版本。

再次感谢@Mark Ba​​ker！现在效果很好！

# jquery - 新添加到 DOM 的动画内容

> ID：12002524
> 
> 赞同：0
> 
> 时间：2012-08-17T08:39:45.127
> 
> 标签：jquery, dom, jquery-animate

我正在开发 Web 应用程序的前端。所有内容都是从我从后端收到的 JSON 对象生成的。然后我将这些内容包装在 HTML 中并将其添加到 DOM。我使用 jQuery append() 来做到这一点。添加内容后，我会为旧页面设置动画，并为新页面设置动画。

我的问题是在动画开始之前内容似乎没有完成加载。似乎并不是我所有的 CSS 都在动画开始之前生效。它仅在动画完成后显示。

我假设我需要在开始制作动画之前检查内容是否已完成附加。我知道 append() 应该是同步的，但检查起来不会有坏处。

这是一个代码片段，可让您了解所涉及的动画。（注意：这不是我的全部代码，只是让您了解我到底在做什么的最低限度）

*   'mainTransitionContainer' 是添加了新内容的元素。
*   “transitionWidth”是一个变量，它使用旧页面和新页面的宽度来确定。
*   这两个页面都在 mainTransitionContainer 内，彼此相邻浮动。

> ```
> $(mainTransitionContainer).append(newElement);
> $(mainTransitionContainer).ready(function () {
>    $(mainTransitionContainer).animate({ right: transitionWidth }, 2000,'easeInOutQuart'});
> }); 
> ```

这是检查内容是否已完成加载的正确方法吗？

有谁知道为什么我的内容没有正确显示？

jQuery 动画是否会影响我的 CSS 样式？

有人有建议吗？将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:47:12.827

大概，如果您使用 JSON 加载数据，您正在使用 Ajax 调用来检索数据？

您不能在`.ready()`这里真正使用该功能。这将在页面最初加载时触发，而不管之后可能发生的任何 Ajax 调用。它基本上在预期元素空闲时触发（即它已被更改，并且在更改完成且没有代码运行的第一刻，`ready`触发器将触发）

我不知道您的 ajax 调用是如何构建的，因为我在您的问题中没有看到任何片段，但这是您应该如何维护您想要的“加载、写入、然后动画”结构的粗略草图：

```
$.ajax({

    url: "http://my.url.com",

    type: 'get', //I assume. It could be 'post' dependent on what the code behind does.

    cache: false, //for good measure. IE will never execute the same request twice, unless you put this in.

    success: function(data_in_json_form) {

        var data_in_html_form = .... //Do something with the received data_in_json_form. You need to end up with a string of valid html code.

        $(mainTransitionContainer).append(data_in_html_form);

        //Now you can do the animation.
        $(mainTransitionContainer).animate({ right: transitionWidth }, 2000,'easeInOutQuart'});

    }

}); 
```

要记住的重要事项是：

*   任何不在“成功”函数中的代码都将被执行，而无需完成 ajaxt 调用。Ajax 是异步工作的，因此浏览器会启动 ajax 请求，然后继续进行而不等待响应。
*   附加确实同步工作。但是，当与 Ajax 调用结合使用时，请确保仅在“成功”函数中执行代码。
*   触发器实际上`.ready()`应该只用于. `$(document).ready()`它可能适用于其他场景，但它几乎永远不是问题的正确解决方案。

这就是我对您所描述的问题的看法。如果我遗漏了什么，请发布更多代码，特别是您的 JSON 检索方法及其后面的任何代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:35:46.790

我意识到我在其他地方犯了一个错误。问题已解决。内容是同步添加的，因此在内容添加完成时不需要触发任何事件。

# objective-c - ios如何在特定时间更改图像

> ID：12002534
> 
> 赞同：1
> 
> 时间：2012-08-17T08:40:31.323
> 
> 标签：objective-c, xcode4

我有一张图像，我想在白天显示为太阳，即从早上 6 点到下午 6 点，以及从下午 6 点到早上 6 点的月亮。

我已经成功实现了这一点，但问题是图像在达到指定时间时不会改变，除非在图像改变之前重新运行应用程序。

我不想使用 NSTimer 来检查时间，就像每秒一样。我想到的唯一可能的解决方案是使用 NSLocalNotification 但我是新手。有什么帮助吗？=)

```
-(void) dayOrNight
{

NSDate* date                = [NSDate date];

NSDateFormatter* dateFormat = [[NSDateFormatter alloc]init];
[dateFormat setDateFormat:@"HHmm"];
NSString* dateString        = [dateFormat stringFromDate:date];
NSNumber* currentTime       = [NSNumber numberWithInt:[dateString intValue]];
NSNumber* daytime           = [NSNumber numberWithInt:600];
NSNumber* nightime          = [NSNumber numberWithInt:1800];
NSLog(@"current time: %@",dateString);

dayNight = [[UIImageView alloc] initWithFrame:CGRectMake(265, 10, 50, 50)];

    if ( [currentTime doubleValue] >= [daytime doubleValue] && [currentTime doubleValue] <= [nightime doubleValue] ) 
    {
    dayNight.image = [UIImage imageNamed:@"Sun.png"];
    }

    else 
    {
    dayNight.image = [UIImage imageNamed:@"moon.png"];
    }

[self.view addSubview:dayNight];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:15:33.223

您无需每秒钟检查时间。

这是*可能的解决方案之一*。它仅**在真实设备上进行了测试**。

* * *

你的**UIYourViewController.m**

```
- (void)viewWillAppear:(BOOL)animated {
    NSDate *_currentDate = [NSDate date];
    NSDateFormatter *_dateFormatter = [[NSDateFormatter alloc] init];
    [_dateFormatter setDateFormat:@"yyyy-MM-dd' 06:00AM +0000'"]; // set the morning date here
    NSString *_morningDateString = [_dateFormatter stringFromDate:_currentDate];
    [_dateFormatter setDateFormat:@"yyyy-MM-dd' 06:00PM +0000'"]; // set the evening date here
    NSString *_eveningDateString = [_dateFormatter stringFromDate:_currentDate];

    [_dateFormatter setDateFormat:@"yyyy-MM-dd hh:mma zzz"];
    NSDate *_morningDate = [_dateFormatter dateFromString:_morningDateString];
    NSDate *_eveningDate = [_dateFormatter dateFromString:_eveningDateString];

    NSTimeInterval _intervalToMorningDate = [_morningDate timeIntervalSinceDate:_currentDate];
    NSTimeInterval _intervalToEveningDate = [_eveningDate timeIntervalSinceDate:_currentDate];

    if (_intervalToMorningDate > 0) {
        // now it is night
        dayNight.image = [UIImage imageNamed:@"moon.png"];
        [self performSelector:@selector(replaceTheBackgoundForMorning) withObject:nil afterDelay:_intervalToMorningDate];
    } else {
        // now it is daytime
        dayNight.image = [UIImage imageNamed:@"Sun.png"];
        [self performSelector:@selector(replaceTheBackgoundForEvening) withObject:nil afterDelay:_intervalToEveningDate];
    }

}

- (void)viewDidDisappear:(BOOL)animated {
    [NSObject cancelPreviousPerformRequestsWithTarget:self];
} 
```

最后你应该将它们添加到同一个**.m**文件中：

```
-(void)replaceTheBackgoundForMorning {
    // reaplce the backgound here
    dayNight.image = [UIImage imageNamed:@"Sun.png"];
}

- (void)replaceTheBackgoundForEvening {
    // reaplce the backgoung here
    dayNight.image = [UIImage imageNamed:@"moon.png"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:59:37.883

我认为没有 NSTimer 是不可能的。您可以自己设置 refreshTime（例如 1 分钟/如果您不想每秒都这样做）））或者您可以在其他方法中调用此方法，这些方法每次都在您的班级中工作......

也许你有一些东西，你在课堂上使用的东西正在工作......

```
-(IBAction)myButtonWhichIPressDuringIworkHere {
///some actions
[self dayOrNight];
} 
```

在其他情况下，您应该使用 NSTimer

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T09:03:09.447

我猜本地通知应该没问题。 [在这里](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW1)，您可以获得所有需要的代码片段以在需要的时间执行`dayOrNight`方法。此外，您不应该在每次更改图片时添加新视图。

# objective-c - 如何在地图上设置带有日历的 Pin 标题？

> ID：12002537
> 
> 赞同：0
> 
> 时间：2012-08-17T08:40:37.047
> 
> 标签：objective-c, map, annotations, mkannotation

我是 iPhone 开发的新手。我有一个困惑了一周的问题。现在我的视图上已经有一个日历，我正在尝试添加一个带有地图和注释图钉的新视图，所以我希望将日历中的事件标题传递给注释图钉的标题，我该怎么做这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:39:29.613

也许[本教程](http://www.raywenderlich.com/2847/introduction-to-mapkit-on-ios-tutorial)会对您有所帮助，它涵盖了自定义注释和标题。

# javascript - Firefox 插件忽略 iframe

> ID：12002542
> 
> 赞同：1
> 
> 时间：2012-08-17T08:41:09.170
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

我正在尝试为 LinkedIn 构建一个插件，但内容脚本在每一帧中都输出......

我的 main.js：

```
exports.main = function() {

  var pageMod = require("page-mod");

  pageMod.PageMod({
    include: "http://www.linkedin.com/*",
    contentScriptWhen: 'ready',
    contentScript: 'alert("test")'
  });
}; 
```

通过检查框架元素，如果它是顶部框架，我可以做一个动作

```
if(window.frameElement === null){ alert("YEAH this is the right place!); } 
```

但是我的内容srcipt很复杂并且使用jquery，而且这个脚本仍然将脚本放在每一帧中......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T21:32:27.843

更新，SDK 的 page-mod api 现在支持“attachTo”，所以你可以这样做：

```
var data = require("sdk/self").data;
var page = require('sdk/page-mod');

page.PageMod({
     match:['*'],
     contentScriptOptions: {},
     contentScriptFile: [data.url('myScript.js')],
     attachTo: 'top',
     onAttach: function(worker) {
         //set up hooks or other background behavior
     },
}); 
```

[有关更多信息，](https://stackoverflow.com/questions/26149431/how-do-i-prevent-firefox-sdk-content-scripts-from-loading-multiple-times)请参阅此更新的问题。

~~您可以研究两种方法：~~

~~1\. 使用标签模块附加您的内容脚本。这是因为 tabs 模块只处理顶级文档。这是一个简单的例子：~~

~~[https://builder.addons.mozilla.org/package/22176/latest/](https://builder.addons.mozilla.org/package/22176/latest/)~~

~~2\. 通过 page-mod 初始加载一个非常小的内容脚本，然后如果该页面是您真正想要修改的内容，则通过 port.emit 消息发送脚本来注入脚本。dotjs 插件中有一个此类方案的示例：~~

~~[https://github.com/rlr/dotjs-addon](https://github.com/rlr/dotjs-addon)~~

# python - 无法在 Python 中更新字典

> ID：12002549
> 
> 赞同：1
> 
> 时间：2012-08-17T08:41:33.913
> 
> 标签：python

我正在尝试将一些记录添加到字典中。

最初我是这样做的

```
licenses = [dict(licenseid=row[0], client=row[1], macaddress=row[2], void=row[18]) for row in db] 
```

但我已经意识到我需要做一些处理来过滤数据库中的记录，所以我尝试将代码更改为：

```
for rec in db:
    if rec['deleted'] == False:
       licenses.update(dict(licenseid=row[0], client=row[1], macaddress=row[2], void=row[18]) 
```

该代码毫无例外地运行，但我只得到许可证中的最后一个 db 记录，这让我感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:49:49.487

我认为`licenses`是一个列表：

```
licenses = []
... 
```

你应该追加新的字典：

```
licenses.append(dict(...)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T09:10:03.243

如果我理解正确，您想在一个字典中添加多条记录，对吗？你为什么不制作一个字典列表，而不是制作一个列表字典呢？

*   首先构建您需要的密钥列表（以便您始终以相同的顺序访问它们）。

    ```
    keys = ["licenses", "client", "macaddress", "void"] 
    ```

*   构造一个空字典：

    ```
    licences = dict((k,[]) for k in keys] 
    ```

*   递归地将条目添加到您的字典中：

    ```
    for (k,item) in row:
        dict[k].append(item) 
    ```

当然，首先构建所有记录的列表，然后在最后构建字典可能更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T09:17:27.163

引用[dict.update()](http://docs.python.org/library/stdtypes.html#dict.update)文档：

> **update([other])**使用其他键/值对更新字典，覆盖现有键。返回无。

这就解释了为什么最后一次更新“获胜”。`licences`不能是列表，因为列表没有更新方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T08:47:20.890

如果您帖子中的代码是您的真实代码，那么您可能会考虑在最后一行（带有更新的行）中将 row 替换为 rec ，因为您有可能使用始终相同的值更新您的字典！

编辑：这段代码显然有一些非常错误的地方，从另一个答案我看到我忽略了许可证被声明为列表的事实：所以没有例外的唯一解释是你显示的片段不是真正的片段或您的所有记录都使 rec['deleted'] 为 True （因此永远不会调用更新方法）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T10:16:29.003

回复后，我修改了我的代码：

```
licenses = []

for row in db:
        if row.deleted == False:
            licenses.append(dict(licenseid=row[0], client=row[1], macaddress=row[2], void=row[18])) 
```

现在可以完美运行。谢谢你发现我的愚蠢！;)

# java - org.json.jsonexception 字符 1 处的输入结束

> ID：12002551
> 
> 赞同：0
> 
> 时间：2012-08-17T08:41:36.020
> 
> 标签：java, php, android, json

嗨，我正在尝试从 mysql 数据库中检查用户名和密码，我在其中使用 md5() 散列插入了我的密码，现在我想访问这个用户名和密码。我正进入（状态

> “org.json.jsonexception 在字符 1 处输入结束”

错误。

这是我的 php 代码。

```
 <?php
error_reporting(E_ALL^E_NOTICE^E_WARNING);
$dbhost="localhost";
$dbuser="dev";
$dbpass="dev";
$dbdb="myandroid";
$connect =mysql_connect($dbhost,$dbuser,$dbpass) or die("connection error");
mysql_select_db($dbdb) or die("database selection error");
$username=$_POST["username"];
$password=$_POST["password"];
$pass=md5('$password');
$query=mysql_query("SELECT * FROM androidtable WHERE username='$username' AND password='$pass'")or die(mysql_error());

$num=mysql_num_rows($query);
if($num==1){
while($list=mysql_fetch_assoc($query)){
$output=$list;
echo json_encode($output);
}
mysql_close();
}
?> 
```

安卓代码

```
public class DBActivity extends Activity implements OnClickListener{
EditText eduser, edpass;
Button logbutton;

String username, password;

HttpClient httpclient;

HttpPost httppost;

ArrayList<NameValuePair> nameValuePair;

HttpResponse httpresponse;
HttpEntity httpentity;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_db);
    initialise();

}

private void initialise() {
    eduser=(EditText) findViewById(R.id.eduser);
    edpass=(EditText) findViewById(R.id.edpass);
    logbutton=(Button) findViewById(R.id.login);
    logbutton.setOnClickListener(this); 

}

public void onClick(View v) {
    httpclient=new DefaultHttpClient();

    httppost=new HttpPost("http://192.168.1.2/androidtut/check.php");
    username=eduser.getText().toString();
    password=edpass.getText().toString();

    try{
        nameValuePair=new ArrayList<NameValuePair>();

        nameValuePair.add(new BasicNameValuePair("username", username));
        nameValuePair.add(new BasicNameValuePair("password", password));

        httppost.setEntity(new UrlEncodedFormEntity(nameValuePair));
        httpresponse=httpclient.execute(httppost);
        if(httpresponse.getStatusLine().getStatusCode()==200){
            httpentity=httpresponse.getEntity();
            if(httpentity != null){
                InputStream is=httpentity.getContent();
                JSONObject jresp=new JSONObject(convertStreamToString(is));

                String retUser=jresp.getString("username");
                String retPass=jresp.getString("password");

                if(username.equals(retUser) && password.equals(retPass)){

                    SharedPreferences sp=getSharedPreferences("tableandroid",0);
                    SharedPreferences.Editor spedit=sp.edit();
                    spedit.putString("username", username);
                    spedit.putString("password", password);
                    spedit.commit();

                    Toast.makeText(getBaseContext(), "loggin success",Toast.LENGTH_LONG).show();
                }else{
                    Toast.makeText(getBaseContext(), "user invalid",Toast.LENGTH_LONG).show();
                }

            }
        }

    }catch(Exception e){
        String error=e.toString();
        Toast.makeText(getBaseContext(), error,Toast.LENGTH_LONG).show();
    }

}

private static String convertStreamToString(InputStream is) {
    /*
     * To convert the InputStream to String we use the BufferedReader.readLine()
     * method. We iterate until the BufferedReader return null which means
     * there's no more data to read. Each line will appended to a StringBuilder
     * and returned as String.
     */
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:40:52.273

您的服务器没有返回任何内容。因此，您的 Android 客户端无需编组。

```
$pass=md5('$password'); 
```

不是散列密码，而是`$password`字符串文字（单引号不扩展变量）。请改用以下内容：

```
$pass=md5($password); 
```

# github - 类似“Creative Commons BY-NC-SA”的许可，但适用于 Github 上的软件

> ID：12002553
> 
> 赞同：15
> 
> 时间：2012-08-17T08:42:00.820
> 
> 标签：github, licensing

我正在 GitHub 上为我的软件项目寻找正确的许可证。我只使用免费的 GitHub-Repository，所以它必须是 OpenSource-License（这对我来说没问题）。我真的很喜欢知识共享许可证，因为它们很容易理解——但它们不适合软件......

因此，在知识共享条款中，我使用以下命令搜索许可证：

> **署名**——您必须以作者或许可人指定的方式对作品进行署名（但不得以任何方式表明他们认可您或您对作品的使用）。
> 
> **非商业**- 您不得将本作品用于商业目的。
> 
> **以相同方式共享**— 如果您更改、转换或构建本作品，您只能在与本作品相同或相似的许可下分发生成的作品。
> 
> > 资料来源：[http ://creativecommons.org/licenses/by-nc-sa/3.0/](http://creativecommons.org/licenses/by-nc-sa/3.0/)

对于我自己，我想保留在商业上使用我的软件的权利（即使我目前不打算这样做）。

另外我想给我的软件项目中的图形一个自己的许可证——在这里我可以使用 CC BY-NC-SA，对吗？我如何在 GitHub 中正确管理它？我也可以使用该特殊文件夹中的许可证上传（免费）github存储库中的图像，还是我必须为其获取外部资源？（因为它不符合 GitHub 对免费存储库的要求）

我的问题的简短**摘要**：

*   *我可以在我的免费 G​​itHub 存储库中使用哪个类似于“CC BY-NC-SA”的开源许可证？*
*   *我可以在我的存储库中为我的图形/图像使用“CC BY-NC-SA”许可证吗？*
*   *在免费的 GitHub 存储库中结合这两件事的最佳方式是什么？*

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-20T17:50:58.163

我不知道 github 对您的代码如何获得许可有任何要求，除了声明“您同意允许其他人查看和分叉您的存储库”（[https://help.github.com/articles/github-terms-服务](https://help.github.com/articles/github-terms-of-service)）。

因此，您*几乎*可以使用任何您想要的许可条件。如果您在存储库中放置一个名为“LICENSE.txt”的文件，大多数人都会收到该消息。如果人们忽略该消息，请忽略他们，或咨询您的律师并准备向他/她付款。

但是，如果您偏离“标准”许可，您的代码对其他人的用处就会减少。

软件的经典“BY-SA”许可是 GPL。它*不是*BY-NC-SA 许可证，但在流行的自由软件许可证中，它可能是最“限制性”的许可证之一。

当您将您的软件置于自由/开源许可下时，您并没有放弃任何权利。您（在大多数情况下不可撤销地）授予他人某些权利。这是一个重要的区别，因为您*始终*保留将自己的软件用于商业用途的权利。

如果您想稍后将您的软件作为专有软件出售*，除了*您决定的自由软件许可之外，您可以简单地根据不同的（专有许可）许可它。您无法“召回”已发布的免费版本，但您无需将未来的任何改进作为免费软件提供。

其他人可以通过几种不同的方式从您的软件中赚钱：

*   他们可能会开发您的软件的新改进版本并将其作为专有软件出售（您不付费就无法看到或使用他们的改进！）。GPL 禁止这样做（如果您想允许这样做，您将使用“非 copyleft”许可证，如 BSD 或 X11 许可证）

*   他们可能会出售您的软件，原封不动，将其与书籍捆绑在一起或以其他方式重新分发以赚钱。GPL 允许这样做，但这在很多方面都是一件好事，因为您可能会获得一个免费的分发网络。现在已经没有很多钱了，因为人们只会下载软件（免费）。可能有一些晦涩难懂的自由软件许可证禁止这样做。

*   有人可能会提出改进软件，但要求为他的工作花钱。这没关系，因为付费工作的结果随后将免费提供给所有人。我看不出许可协议是如何阻止这种情况的。

*   有人可能会为您的软件提供支持合同。再说一次，我看不出你怎么能（或者你为什么会）禁止这个。如果您允许我使用您的软件，我可以付钱给其他人帮助我使用它。

*   当您决定出售您的软件的新的和改进的专有版本时，有人可能会改进该软件的免费版本并与您竞争，从而降低您的价格。他们并没有真正从中赚钱，但你可能不喜欢它。自由/开源许可证是不可撤销的（根据定义，我认为），因此您无能为力（可撤销的自由根本不是自由）。

*   有人可能会使用您的软件，并且可能会通过它赚钱。禁止这一点与开源定义（[http://opensource.org/osd.html/](http://opensource.org/osd.html/)第 6 点）和自由软件定义（[http://www.gnu.org/philosophy/free-sw.html](http://www.gnu.org/philosophy/free-sw.html) “自由 0 ”）。一个免费的软件程序没有附加小字，告诉您如何使用和不可以使用它。

摘要：考虑 GPL。它是 ShareAlike 方面最强大的流行许可证。如果您想更严格，您的代码将不再那么免费，人们将无法将您的代码与其他（例如 GPL 许可的）代码结合起来。

# wpf - 如何在 wpf 中获取 ShaderEffect 的 SamplerProperties？

> ID：12002554
> 
> 赞同：0
> 
> 时间：2012-08-17T08:42:02.320
> 
> 标签：wpf, effect, pixel-shader

在 WPF 中，在定义 ShaderEffects 时，我们使用

```
ShaderEffect.RegisterPixelShaderSamplerProperty() 
```

引入像素着色器采样器属性（馈送到实际像素着色器的属性，并且属于画笔类型）；但是如何从 ShaderEffect 类中检索这些属性呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:22:53.237

RegisterPixelShaderSamplerProperty 创建一个新的 DependencyProperty，它在您从 ShaderEffect 派生的类上可用。

您可以创建一个 CLR 包装器来访问它。

```
public static readonly DependencyProperty InputProperty =
    ShaderEffect.RegisterPixelShaderSamplerProperty("Input", typeof(MyShaderEffect), 0);

public Brush Input
{
    get
    {
        return (Brush)GetValue(InputProperty);
    }
    set
    {
        SetValue(InputProperty, value);
    }
} 
```

这是为 XAML/WPF 编写着色器时有用的书的链接。

*   [http://shop.oreilly.com/product/0636920023869.do](http://shop.oreilly.com/product/0636920023869.do)

# angularjs - AngularJS：ngResource 和对象数组作为 URL 的参数

> ID：12002560
> 
> 赞同：10
> 
> 时间：2012-08-17T08:42:12.673
> 
> 标签：angularjs

我有变量`$scope.data= [{column:"age", operator: ">", value: "50"}, {column:"name", operator: "=", value: "Tonda"}]`。以及向服务器提交数据的服务：

```
angular.module('myServices', ['ngResource']).
  factory('serverApp', function($resource, $scope){
    return $resource('myurl/', {}, {
        saveData: {method:'POST', params: $scope.data}
    });
}); 
```

为什么调用 `serverApp.saveData() 后 URL 包含“废话”？- .../myurl? **0=%5Bobject+Object%5D&1=%5Bobject+Object%5D** - 看来，参数只能是简单的（1D）对象。

如何正确地将对象序列`$scope.cfgcondition`化为服务参数`serverApp`（例如，到 URL）？谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-17T19:35:58.247

'params' 属性定义了 URL 查询参数，我认为这是预期的行为。如果它只是一个简单的对象，而不是一个数组，那么你可以使用 $save 之类的东西

```
var MyRequest = $resource('/notreally'); 
$scope.data = new MyRequest;
// get stuff into $scope.data
$scope.doSubmit = function() { $scope.data.$save(); } 
```

要发布一个数组，您需要定义自己的操作并将数据作为第二个参数传递。

```
$scope.data= [{column:"age", operator: ">", value: "50"}, 
              {column:"name", operator: "=", value: "Tonda"}]; 
var MyRequest = $resource('/notreally', {}, {saveData: {method:'POST', isArray: true}}); 
$scope.doSubmit = function() { MyRequest.saveData({}, $scope.data); 
```

[http://docs.angularjs.org/api/ngResource](http://docs.angularjs.org/api/ngResource) .$resource [https://docs.angularjs.org/api/ngResource/service/$resource](https://docs.angularjs.org/api/ngResource/service/$resource)

*已编辑以修复有关数组的错误陈述 - 我认为 $resource 无法发布数组，但发现我错了！

# playframework - “游戏测试”不会开始

> ID：12002563
> 
> 赞同：0
> 
> 时间：2012-08-17T08:43:17.457
> 
> 标签：playframework, playframework-1.x

我正在尝试使用测试模式启动 Play 1.2.3，`play test`但出现此错误：

```
Exception in thread "main" java.lang.IllegalArgumentException: No enum const class play.Play$Mode.TEST
    at java.lang.Enum.valueOf(Enum.java:196)
    at play.Play$Mode.valueOf(Play.java:35)
    at play.Play.init(Play.java:236)
    at play.server.Server.main(Server.java:158) 
```

任何想法是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:35:54.060

这是使用*测试*作为应用程序模式的配置文件的问题。与`%test.application.mode=dev`而不是一起使用`%test.application.mode=test`。

# eclipse - 删除 Eclipse/JUnit 调用堆栈中断

> ID：12002564
> 
> 赞同：2
> 
> 时间：2012-08-17T08:43:21.310
> 
> 标签：eclipse, junit, callstack

当我在 Eclipse 中运行失败的 JUnit 时，有时会得到类似于以下的调用堆栈：

```
java.lang.NullPointerException
    at com.a.b.c.d.e.MyTest.method(MyTest.java:73)
    at com.a.b.c.d.e.MyTest.testConvertRawInternalAtomAllowCompound(MyTest.java:65)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    .... 57 more 
```

我怎样才能去除截断？我想看看整个调用堆栈。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T09:50:02.220

我希望这至少有点用处。

从**[这里](http://www.coderanch.com/t/426029/vc/Eclipse-showing-incomplete-stack-trace)**：

> 当存在嵌套异常时，通常会出现“... xx more”消息。发生这种情况时，将为第一个异常堆栈跟踪打印完整的堆栈跟踪，但对于每个“由”异常堆栈跟踪，仅打印不与第一个（或先前）堆栈跟踪重复的堆栈跟踪部分。查看“... xx more”之前的行-您应该能够转到第一个堆栈跟踪并在该堆栈跟踪中找到同一行-并且在第一个堆栈跟踪中应该还有 xx 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:16:57.450

可能是您在公司相关软件包中添加了“类型过滤器”吗？

# git - 我怎样才能使 git 或 pip bootstrap 没有错误？

> ID：12002567
> 
> 赞同：1
> 
> 时间：2012-08-17T08:43:23.180
> 
> 标签：git, pip, bootstrapper

当我尝试从 bootstrapper.txt 安装时

```
$ pip install -r bootstrapper.txt 
```

然后我有以下错误的回溯：

```
Downloading/unpacking python-keystoneclient==0.1.1 (from -r http://git.ged.ru/ged-thrift-server.git/blob_plain/HEAD:/requirements.txt (line 49))
    Downloading python-keystoneclient-0.1.1.tar.gz (54Kb): 54Kb downloaded
    Running setup.py egg_info for package python-keystoneclient

    warning: no files found matching 'python-keystoneclient'
Downloading/unpacking kazoo==0.2 (from -r http://git.ged.ru/ged-thrift-server.git/blob_plain/HEAD:/requirements.txt (line 50))
    Downloading kazoo-0.2.tar.gz (46Kb): 46Kb downloaded
    Running setup.py egg_info for package kazoo

    warning: no previously-included files matching '*pyc' found anywhere in distribution
    warning: no previously-included files matching '*pyo' found anywhere in distribution
Downloading/unpacking Sphinx==1.1.3 (from -r http://git.ged.ru/ged-thrift-server.git/blob_plain/HEAD:/requirements.txt (line 53))
    Downloading Sphinx-1.1.3.tar.gz (2.6Mb): 2.6Mb downloaded
    Running setup.py egg_info for package Sphinx

    no previously-included directories found matching 'doc/_build'
Obtaining pylib from git+ssh://git@git.ged.ru/pylib.git@a1f66e8dc124165e89fc76dd6f2bf86ccd0527e7#egg=pylib-dev (from -r http://git.ged.ru/ged-thrift-server.git/blob_plain/HEAD:/requirements.txt (line 56))
    Cloning ssh://git@git.ged.ru/pylib.git (to a1f66e8dc124165e89fc76dd6f2bf86ccd0527e7) to ./src/pylib
    Complete output from command /usr/bin/git rev-parse origin/HEAD:
fatal: ambiguous argument 'origin/HEAD': unknown revision or path not in the working tree.

Use '--' to separate paths from revisions

origin/HEAD

----------------------------------------
Command /usr/bin/git rev-parse origin/HEAD failed with error code 128
Storing complete log in /home/ks/.pip/pip.log 
```

[http://dumpz.org/246888/](http://dumpz.org/246888/) - 这是回溯（来自/home/ks/.pip/pip.log）。

我的点子版本是：

```
pip 1.0.2 from /home/ks/python/ged/converters/prosto/lib/python2.7/site-packages/pip-1.0.2-py2.7.egg (python 2.7) 
```

升级版：

所以，但是在我将它更新到 1.1 之后 - 它犯了同样的错误..

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T20:34:28.447

color.ui 的 git config 设置是什么？

> git config --get color.ui

我的设置为“始终”，我得到了同样的错误。

当我将其更改为“真实”时，

> git config --global color.ui true

在我的情况下解决了这个错误。

[http://git-scm.com/book/en/Customizing-Git-Git-Configuration#Colors-in-Git](http://git-scm.com/book/en/Customizing-Git-Git-Configuration#Colors-in-Git)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-19T20:35:48.803

听起来您已经解决了这个问题，但是对于可能遇到此错误的其他任何人，当我尝试在特定提交头处安装远程 git 包时，我遇到了同样的 rev-parse 问题。

我正在运行 pip 1.2.1。

当我将 pip 更新到最新版本（此时为 1.5.6）时，该 git rev-parse 错误消失了。

# cordova - 为不同平台使用 PhoneGap Build

> ID：12002571
> 
> 赞同：0
> 
> 时间：2012-08-17T08:43:33.700
> 
> 标签：cordova, build, multiplatform

据我了解，我们使用我们的 Html、Css 和 JS（**尤其是 cordova.js**）为 PhoneGap Build 'www' 文件夹提供了必要的平台包。

但据我所知，不同平台有不同的 cordova.js 文件。那么PhoneGap Build是如何准备这些包的呢？它是否取代了每个平台的cordova.js？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T23:18:50.743

是的，构建过程注入了正确的 *.js。事实上，出于这个原因，您被警告不要包含任何 phonegap.js 文件。

# jquery - JQuery 发布到 iframe 回调

> ID：12002578
> 
> 赞同：0
> 
> 时间：2012-08-17T08:43:41.167
> 
> 标签：jquery, html, iframe, callback

我在页面上使用表单将数据发布到 iFrame（这可能发生与用户请求一样多次）如此处所示：

[使用带有 jQ​​uery 的 HTML 帖子定位 iframe](https://stackoverflow.com/questions/1003973/target-an-iframe-with-a-html-post-with-jquery)

当收到响应并填充 iframe 时，我希望能够在父页面中执行某些操作（调整 iframe 的大小，如果它以前隐藏则显示它等）。有没有办法做到这一点？

我只想在页面加载到 iframe 时执行此操作，而不是在父页面首次加载时执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:01:32.973

将以下 javascript 也发布到 iframe。

```
$('#theId', window.parent.document).html(); 
```

从那里您可以控制父级及其所有组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:36:10.327

我最终使用 ("#frameID").load() 添加了一个回调，这似乎奏效了。

# wpf - 为什么我的 WPF 数据网格背景颜色没有绑定？

> ID：12002580
> 
> 赞同：0
> 
> 时间：2012-08-17T08:43:51.163
> 
> 标签：wpf, data-binding

我正在使用 MVVM 方法。我有一个数据网格，其中包含一周中的几天的列。我需要用阴影背景突出显示当天。视图模型中的其他所有内容都正确显示，因此它通常是绑定的。但是，永远不会应用阴影，如果我在我的属性中放置断点，则永远不会命中断点。我正在做一些愚蠢的事情，但无法发现什么。

这是我在视图模型中的颜色代码：

```
 public Brush SundayColor { get { return GetBrushColorForWeekday(DayOfWeek.Sunday); } }

    public Brush MondayColor { get { return GetBrushColorForWeekday(DayOfWeek.Monday); } }

    public Brush TuesdayColor { get { return GetBrushColorForWeekday(DayOfWeek.Tuesday); } }

    public Brush WednesdayColor { get { return GetBrushColorForWeekday(DayOfWeek.Wednesday); } }

    public Brush ThursdayColor { get { return GetBrushColorForWeekday(DayOfWeek.Thursday); } }

    public Brush FridayColor { get { return GetBrushColorForWeekday(DayOfWeek.Friday); } }

    public Brush SaturdayColor { get { return GetBrushColorForWeekday(DayOfWeek.Saturday); } }

    private Brush GetBrushColorForWeekday(DayOfWeek dayOfWeek)
    {
        return dayOfWeek == CurrentDate.DayOfWeek ? Brushes.AliceBlue : Brushes.White;
    } 
```

对于网格 XAML，我使用以下内容。为了简单起见，我只展示了一个列定义，但其他六个类似：

```
 <DataGridTextColumn Header="Mon" Width="33" Binding="{Binding MondayQuantity,NotifyOnTargetUpdated=True}">
        <DataGridTextColumn.CellStyle>
            <Style TargetType="DataGridCell">
                <Setter Property="Background" Value="{Binding MondayColor}"/>
                <Setter Property="Foreground" Value="Black"/>
            </Style>
        </DataGridTextColumn.CellStyle>
    </DataGridTextColumn> 
```

我知道样式就像我将绑定更改为固定颜色一样工作，我看到了选择的颜色。那么为什么我的绑定不起作用？

## 编辑

我是愚蠢的！颜色属性直接在我的视图模型中，而不是在网格绑定的项目中。

是否可以将网格样式绑定到视图模型中位于网格绑定到的 observablecolleciton 之外的项目？我想，“上一级”是我所追求的：

视图模型

*   mondaycolor 等 <-- 将样式绑定到此

*   items observablecollection <--网格中的数据来自这个

    *   数量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:05:21.177

我习惯于使用转换器，所以......我正在考虑类似的事情（伪代码）

xml:

```
<Setter Property="Background" Value="{Binding Parameter="Monday",
                                      Converter={StaticResource currentDayToColorCOnverter}}"/> 
```

转换器：

```
class CurrentyDayToColorConverter : IValueConverter
{
    public object Convert(blablabla, .., object parameter)
    {
        if (CurrentDate.DayOfWeek == parameter) // may not be exactly that but you get the idea
        {
             return Brushes.AliceBlue;
        }
        else
        { 
              return Brushes.White
        }
    }
} 
```

# git - 如何删除 Windows Azure Git 存储库？

> ID：12002582
> 
> 赞同：9
> 
> 时间：2012-08-17T08:43:57.690
> 
> 标签：git, azure

我有一个与 Git 存储库链接的 Azure 网站（在部署选项卡中）。如何删除存储库和链接？（我想设置 TFS 部署）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T09:49:57.227

我认为没有办法删除 Git Repository 链接并再次设置 TFS。为此，您需要删除该网站并重新创建它，然后您可以设置 TFS 部署。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-22T18:58:47.260

### 更新答案（2013 年 4 月 9 日）

Azure 门户现在直接支持这样做：

*   转到 Azure 门户上站点的仪表板
*   在快速浏览下，单击“删除 git 存储库”。或者，如果您已连接到 GitHub（或 Bitbucket、Codeplex，...），请单击“断开与 Github 的连接”按钮。

### 原始答案

现在实际上有一种方法可以做到这一点，尽管它是一个小手册。请参阅此[页面中](https://github.com/projectkudu/kudu/wiki/Continuous-deployment)*的部署发生后从门户设置持续部署*部分。

基本上，从命令行运行它，使用与 git 部署相同的用户名/密码：

```
curl --user yourusername -X DELETE https://yoursitename.scm.azurewebsites.net/live/scm 
```

将来，我们将通过 Azure 门户进行简单操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-24T20:11:17.940

我刚刚找到了一个优雅的解决方案......并且能够删除几 GB 的数据

1) 登录到新的 Azure 门户

2）打开所需的应用服务仪表板

3）在左栏中有一个控制台（在开发工具中）

4) 打开命令提示符后的屏幕

5) 类型：

**rm -rf .git**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-28T12:08:33.287

是的，我们可以使用从本地 git 中删除 azure 存储库

```
git remote -v
git remote rm azure 
```

就是这样，它将从本地 git 中删除 azure git repo。

# php - 在 Cakephp 中安装 Logable Behavior 时未定义的变量

> ID：12002583
> 
> 赞同：0
> 
> 时间：2012-08-17T08:44:07.847
> 
> 标签：php, cakephp

**我正在尝试做的事情：**

我想在 Cakephp 中安装[Alkemann](http://bakerycakephp.org/articles/alkemann/2008/10/21/logablebehavior)的 LogableBehavior。

**我得到的错误：**

当我要进行编辑时，会返回错误：

错误：

> 注意（8）：未定义变量：logData [APP\Model\Behavior\LogableBehavior.php，第 431 行]

标准 cakephp 错误中给出的上下文：

> LogableBehavior::afterSave() - APP\Model\Behavior\LogableBehavior.php，第 431 行 ObjectCollection::trigger() - CORE\Cake\Utility\ObjectCollection.php，第 130 行 call_user_func - [内部]，行 ?? CakeEventManager::dispatch() - CORE\Cake\Event\CakeEventManager.php，第 246 行 Model::save() - CORE\Cake\Model\Model.php，第 1755 行 Model::saveField() - CORE\Cake\Model \Model.php，第 1582 行 ChantiersController::inPlaceDateUpdate() - APP\Controller\ChantiersController.php，第 370 行 ReflectionMethod::invokeArgs() - [内部]，行 ?? Controller::invokeAction() - CORE\Cake\Controller\Controller.php，第 485 行 Dispatcher::_invoke() - CORE\Cake\Routing\Dispatcher.php，第 186 行 Dispatcher::dispatch() - CORE\Cake\Routing \Dispatcher.php，第 161 行 [主] - APP\webroot\index.php，第 92 行

标准 cakephp 错误中给出的代码：

```
$Model = object(Chantier) {}
$created = false
  $keys = array(
      (int) 0 => 'id',
      (int) 1 => 'Date_de_debut_MOA',
      (int) 2 => 'modified'
)
$diff = array(
    (int) 1 => 'Date_de_debut_MOA',
    (int) 2 => 'modified'
)
$id = '126' 
```

**我试图做的事情：**

我检查了所有正确完成的安装步骤，根据文档有三个：

```
 Requires the following to work as intended :
 * 
 * - "Log" model ( empty but for a order variable [created DESC]
 * - "logs" table with these fields required :
 *     - id         [int]           : 
 *     - title      [string]        : automagically filled with the display field of the model that was modified.
 *     - created    [date/datetime] : filled by cake in normal way
 * 
 * - actsAs = array("Logable"); on models that should be logged 
```

在我看来，我做的一切都很好：

我的日志表

```
 CREATE TABLE IF NOT EXISTS `logs` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(100) NOT NULL,
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `description` varchar(400) NOT NULL,
  PRIMARY KEY (`id`)
  ) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=45 ; 
```

我的日志模型：

```
 <?php
App::uses('AppModel', 'Model');
class Log extends AppModel {
var $order=array("Log.created"=>"DESC");

} 
```

在 App/Model/Chantier 中：

```
var $actsAs = array('Containable','Logable'); 
```

然后我搜索有类似问题的人：

*   [Github](https://github.com/alkemann/CakePHP-Assets/issues)
*   [谷歌代码](http://code.google.com/p/alkemann/issues/list?can=1&q=&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary&cells=tiles)
*   [面包店](http://bakery.cakephp.org/articles/alkemann/2008/10/21/logablebehavior)
*   堆栈溢出

什么也没找到。

**让我们深入研究代码：**

这是[代码](https://github.com/alkemann/CakePHP-Assets/blob/master/models/behaviors/logable.php)。

该错误涉及错误行 431：

```
 $this->_saveLog($Model, $logData); //line 431 
```

似乎 $logData 尚未声明。

这一行在一个函数中，`afterSave(&$Model,$created)`：

该函数是一系列测试，其中第 431 行称为最后。$logData 有许多声明，但总是嵌套在 if 语句中。

```
function afterSave(&$Model,$created) {

        if (isset($this->settings[$Model->alias]['skip']['add']) && $this->settings[$Model->alias]['skip']['add'] && $created) {
            return true;
        } elseif (isset($this->settings[$Model->alias]['skip']['edit']) && $this->settings[$Model->alias]['skip']['edit'] && !$created) {
            return true;
        }
        $keys = array_keys($Model->data[$Model->alias]);
        $diff = array_diff($keys,$this->settings[$Model->alias]['ignore']);
        if (sizeof($diff) == 0 && empty($Model->logableAction)) {
            return false;
        }
        if ($Model->id) {
            $id = $Model->id;
        } elseif ($Model->insertId) {
            $id = $Model->insertId;
        }       
        if (isset($this->Log->_schema[$this->settings[$Model->alias]['foreignKey']])) {
            $logData['Log'][$this->settings[$Model->alias]['foreignKey']] = $id;
        }
        if (isset($this->Log->_schema['description'])) {        
            $logData['Log']['description'] = $Model->alias.' ';
            if (isset($Model->data[$Model->alias][$Model->displayField]) && $Model->displayField != $Model->primaryKey) {
                $logData['Log']['description'] .= '"'.$Model->data[$Model->alias][$Model->displayField].'" ';
            }

            if ($this->settings[$Model->alias]['description_ids']) {
                $logData['Log']['description'] .= '('.$id.') ';
            }

            if ($created) {
                $logData['Log']['description'] .= __('added',TRUE);
            } else {
                $logData['Log']['description'] .= __('updated',TRUE);   
            }  
        }     
        if (isset($this->Log->_schema['action'])) {                 
            if ($created) {
                $logData['Log']['action'] = 'add';
            } else { 
                $logData['Log']['action'] = 'edit';         
            }  

        }
        if (isset($this->Log->_schema['change'])) {
            $logData['Log']['change'] = '';
            $db_fields = array_keys($Model->_schema);
            $changed_fields = array();
            foreach ($Model->data[$Model->alias] as $key => $value) {
                if (isset($Model->data[$Model->alias][$Model->primaryKey]) && !empty($this->old) && isset($this->old[$Model->alias][$key])) {
                    $old = $this->old[$Model->alias][$key];
                } else {
                    $old = '';
                }
                if ($key != 'modified' 
                    && !in_array($key, $this->settings[$Model->alias]['ignore'])
                    && $value != $old && in_array($key,$db_fields) ) 
                    {
                        if ($this->settings[$Model->alias]['change'] == 'full') {
                            $changed_fields[] = $key . ' ('.$old.') => ('.$value.')';
                        } else if ($this->settings[$Model->alias]['change'] == 'serialize') {
                            $changed_fields[$key] =  array('old'=>$old, 'value'=>$value);
                        } else {
                            $changed_fields[] = $key;   
                        }                   
                    }
            }
            $changes = sizeof($changed_fields);
            if ($changes == 0) {
                return true;
            } 
            if ($this->settings[$Model->alias]['change'] == 'serialize') {
                $logData['Log']['change'] = serialize($changed_fields);
            } else {
                $logData['Log']['change'] = implode(', ',$changed_fields);
            }
            $logData['Log']['changes'] = $changes;      
        }  
        $this->_saveLog($Model, $logData);//line 431
    } 
```

**我的问题：**

理想情况下，我希望知道此行为的人就如何修复错误提供一些建议，但任何有关如何调试它的通用方法都将被欣然接受。

编辑：我使用 Cakephp 2.2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:06:37.113

你似乎使用了一个非常非常旧的版本。从那时起，它得到了很大的改进。如果您使用的是 cake2.x，这是一个应该是最新的（并且所有测试用例都通过）： [https ://github.com/dereuromark/tools/blob/2.0/Model/Behavior/LogableBehavior.php](https://github.com/dereuromark/tools/blob/2.0/Model/Behavior/LogableBehavior.php)

它使用自己的日志表/模型。但除此之外，它应该非常简单。日志表的 sql 在`Config / sql / log.sql`但可能与您的相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:56:09.300

好吧，这是一个小缺陷，您可以向脚本的制作者解决。

防止通知的快速解决方法是在第 431 行之前添加以下内容：

```
<?php     
     $logData = (!isset($logData) ? array() : $logData );
     $this->_saveLog($Model, $logData);
?> 
```

或者像这样在函数声明之后添加 $logData ：

```
<?php
    function afterSave(&$Model,$created) {
        $logData = array(); 
```

请记住，通知通常在实时网站上不可见，但修复它们是一种很好的做法：[Stackoverflow answer](https://stackoverflow.com/a/5073696/648913)

# android - notifyDataSetChanged() - IndexOutOfBoundException

> ID：12002588
> 
> 赞同：5
> 
> 时间：2012-08-17T08:44:41.900
> 
> 标签：android, listview, baseadapter, indexoutofboundsexception

我不明白出了什么问题

我正在使用

```
 public class UrlArrayAdapter extends BaseAdapter {...      
         ArrayList<UrlItem> objects;

        UrlArrayAdapter(Context context, ListView urlListView,
                ArrayList<UrlItem> urlLists) {
objects = urlLists; ...

    //method
    public void deleteItem(int numberToDelete) {        
            objects.remove(numberToDelete);      
             notifyDataSetChanged();
        } 
```

AND（最有趣的）

我得到 numberToDelete = 1

然后删除该行

![在此处输入图像描述](../Images/c574894411cc906fbcb2ea47b5695a9d.png)

但是对象 ![在此处输入图像描述](../Images/926c9902f344a0c40b2c79aa69a1b958.png)

当 numberToDelete = 0

然后删除该行

![在此处输入图像描述](../Images/7c31494aba621ed16baf7fcc08cf0c23.png)

但是对象 ![在此处输入图像描述](../Images/85b88548a45dc295b7a590284af0e47b.png)

并且当 numberToDelete = 2

对象

![在此处输入图像描述](../Images/8a913bdf64a8d5484cc61b668f46cbea.png)

**但在 notifyDataSetChanged() 之后；IndexOutOfBoundException**

我已经有帖子了……但我无法解决这个问题

[当我使用 notifyDataSetChanged 时出现 IndexOutOfBoundException](https://stackoverflow.com/questions/11990399/indexoutofboundexception-when-i-use-notifydatasetchanged)

stackoverflow.com/a/9260757/1568164 我感觉情况是这样的，我用但是不行

然后我得到一个进一步删除的位置

```
public View getView(int position, View convertView, ViewGroup parent) {

        // Planet to display
        UrlItem urlItem = (UrlItem) this.getItem(position);
        ViewHolder viewHolder = null;

        if (convertView == null) {

            convertView = lInflater.inflate(R.layout.database_table_item, null);
            viewHolder = new ViewHolder();
            viewHolder.checkbox = (CheckBox) convertView
                    .findViewById(R.id.checkBox1);

            viewHolder.checkbox.setOnCheckedChangeListener(listener1);

            viewHolder.text = (EditText) convertView
                    .findViewById(R.id.editText1);

            viewHolder.text
                    .setOnFocusChangeListener(new OnFocusChangeListener() {
                        public void onFocusChange(View v, boolean hasFocus) {
                            int getPosition = (Integer) v.getTag();
                            if (!hasFocus) {

                                final EditText Caption = (EditText) v;
                                // urlLists
                                objects.get(getPosition).setUrl(
                                        Caption.getText().toString());
                            } else {

                                DatabaseTable.setPosition(getPosition); // This is a future for "numberToDelete"
                            }
                        }
                    });

            convertView.setTag(viewHolder);
            convertView.setTag(R.id.checkBox1, viewHolder.checkbox);
            convertView.setTag(R.id.editText1, viewHolder.text);

        } else {
            viewHolder = (ViewHolder) convertView.getTag();

        }
        viewHolder.text.setTag(position);
        viewHolder.text.setText(urlItem.getUrl());
        viewHolder.checkbox.setTag(position);
        viewHolder.checkbox.setChecked(urlItem.getUse());

        return convertView;

    } 
```

我调用删除线的基础活动

```
public class DatabaseTable extends Activity {
    private Settings setting;
    private ArrayList<UrlItem> urlLists;
    private ListAdapter uAdapter;
    private ListView urlListView;
    static int position;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.database_table_list);
        LBD conection = new LBD(this);
        conection.open();
        setting = conection.tblSettings();
        setting.create();
        urlLists = setting.selectRssTable();
        urlListView = (ListView) findViewById(R.id.listView1);
        uAdapter = new UrlArrayAdapter(DatabaseTable.this, urlListView,
                urlLists);
        urlListView.setAdapter(uAdapter);
        urlListView.setItemsCanFocus(true);
}
    public static void setPosition(int pos) {
        position = pos;
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        menu.add(Menu.NONE, 2, 2, "Delete URL");
        return super.onCreateOptionsMenu(menu);
    }
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case 2:
        ((UrlArrayAdapter) uAdapter).deleteItem(position); 
break;

        }
        return super.onOptionsItemSelected(item);
    }

} 
```

继续我实验的主题并得出结论，适配器列表中的字符串与输出到屏幕的事实几乎没有关系，因此挑战正在改变。需要了解如何从屏幕上删除行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T06:22:42.403

解决方案很简单。

```
viewHolder.text
                    .setOnFocusChangeListener(new OnFocusChangeListener() {
                        public void onFocusChange(View v, boolean hasFocus) { 
```

没有正常工作，重绘列表焦点已更改，删除行混乱..苦恼了一周决定很简单，留待修复

# php - 致命错误：第 13 行的 E:\Server\wwwroot\PHPWebAdmin\initialize.php 中找不到类“COM”

> ID：12002591
> 
> 赞同：2
> 
> 时间：2012-08-17T08:44:51.670
> 
> 标签：php, windows-server-2008, dcom, hmail-server

我正在尝试在“Windows Server 2008 Enterprise Edition Service Pack 1”中设置**hMailServer**。我已经成功设置了 hMailServer、Apache、PHP 和 webmail 接口“AfterLogic webMail”。一切正常。但是我遇到了一个问题我尝试安装“ **PHPWebAdmin** ”。错误信息如下：

```
Fatal error: Class 'COM' not found in E:\Server\wwwroot\PHPWebAdmin\initialize.php on line 13 
```

此信息在访问“http://192.168.2.66:8088/PHPWebadmin/”时出现。

我已经配置了 PHP 配置文件**php.ini**选项如下：

```
[PHP]
register_globals = Off
display_errors = Off

doc_root = "E:/Server/wwwroot"
extension_dir = "E:/Server/php5_4_5/ext"

[Session]
session.save_path = "E:/Server/php5_4_5/tmp"

[COM]
com.allow_dcom = true 
```

我还按照 hMailServer 手册的建议完成了这些事情：

```
DCOM permissions
Overview
By default, IIS6 is not allowed to connect to hMailServer because of the Distributed COM permissions that Windows uses. Also, Apache run as a user account with restricted permissions is not allowed to connect by default.

Steps
Follow these steps to give IIS or Apache the required permissions to connect to hMailServer using DCOM.

1.Start DCOM config by selecting Start, Run, enter dcomcnfg.exe and press OK. 
2.In the Component Services program, expand the Component Services folder 
3.Expand down to Computers | My Computer | DCOM Config 
4.Right-click on hMailServer and select properties 
5.Select the Security tab 
6.Under "Launch and Activation Permissions", select Customize and click on Edit 
7.Under "Group or user names", click Add 
8.For IIS6: add the built-in anonymous IIS user account 
9.For Apache: add the Apache user account 
10.Set the Local Launch and Local Activation permissions for this user to Allow 
```

实际上，我什至尝试在 DCOM 配置中授予 EveryOne 权限。

安装 PHPWebAdmin 是为了给用户一个地方来更改他们的电子邮件密码。

这里的环境：Windows Server 2008,Apache2.2,PHP5.4.5。

**为什么会出现这个问题？以及如何处理？**

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T09:09:37.457

[从windows.php.net](http://windows.php.net)构建的 php 5.4.5将 com/dotnet 模块作为扩展 dll 提供。如果您的 php 版本也是这种情况，您可以通过

```
extension=php_com_dotnet.dll 
```

在你的 php.ini

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T23:28:16.343

如果您使用的是 Windows 8 和 apache 服务器并且 `extension=php_com_dotnet.dll`不适合您，那么：

复制 并写入`php_com_dotnet.dll file`文件：`c:/windows/system32``php.ini`

```
extension = c:/windows/system32/php_com_dotnet.dll 
```

我正在为 windows 使用 windows8 和 apache 服务器。为我工作。

我希望这对你有帮助:))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-03T08:49:38.740

对于解决此问题的其他线索，我注意到在 IIS 10 / Windows Server 2016 下，我无法使用 32 位版本的 PHP 7.2 (FastCGI) 使该界面正常工作。

解决方案对我来说非常明显：使用 64 位版本的 PHP 7.2 运行它（在我的情况下，通过为子目录“PHPWebadmin”创建一个新应用程序并更改处理程序映射，因为主应用程序需要使用 32 位版本运行php 由于一些特定的 32 位开发扩展）。

希望它可以帮助，

问候

# python - python中的R-liked表实现

> ID：12002592
> 
> 赞同：0
> 
> 时间：2012-08-17T08:44:56.503
> 
> 标签：python, r, implementation

我正在寻找一种类似于数据库表或电子表格的表的实现。我需要的实现必须包含按行获取、按列获取等功能......

例子：

```
table = [('id', 'name'), (1, 'a'), (2, 'b')]
table.labels = ('id', 'name')
table.column('id') = (1, 2)
table.row(id=1) = (1, 'a') 
```

我一直在环顾四周，但没有，我正在考虑为自己写一个，但只是想在做之前确定一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T08:53:31.677

蟒蛇熊猫？

[http://pandas.pydata.org/](http://pandas.pydata.org/)

# iis - Azure 项目中静态文件的 IIS 错误 500.19

> ID：12002595
> 
> 赞同：9
> 
> 时间：2012-08-17T08:45:04.257
> 
> 标签：iis, azure

我有一个带有单个 webrole 的 Azure 项目，我试图在升级到 Windows 8 和 Visual Studio 2012 后正常运行。

问题在于任何静态内容，它返回 HTTP 500 内部服务器错误，并带有以下文本：“由于发生内部服务器错误，无法显示页面。” 任何静态内容（图像和 javascript）都会出现此错误，而动态内容可以正常提供（所有控制器操作都可以正常工作）。

我们无法让 IIS 显示详细的错误消息。我们可以找到该错误的唯一参考是在访问日志中，该日志将其显示为 500 子类型 19 错误。

我们尝试在 IIS 和 IISExpress 之间切换，出现同样的错误。我们已经尝试将所有“显示详细错误消息”选项添加到我们的 web.config 和 IIS 管理器。HTTP 和 HTTPS 端点都会发生相同的错误。

我的下一步应该是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T10:08:03.000

罪魁祸首已经被发现。通过将默认值`web.config`与我们的比较，我们`web.config`在我们的`web.config`：

```
<system.webServer>
  <staticContent>
    <mimeMap fileExtension=".woff" mimeType="application/x-font-woff" />
  </staticContent>
</system.webServer> 
```

IIS8 支持内置的 WOFF，而 IIS 7 没有。只需将这条线移动到转换中即可解决问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-28T15:33:45.493

我很久以前就遇到过这个问题，Vegard Larsen 的回答效果很好。但是，我已经升级到 osFamily 3 (Windows Server 2012) 并发现在部署到 Azure 时我再次收到子类型 19 的 500 错误。解决方法是在转换中使用以下内容。

```
<system.webServer>
  <staticContent xdt:Transform="Insert">
    <remove fileExtension=".woff" />
    <mimeMap fileExtension=".woff" mimeType="application/x-woff" />
  </staticContent>
</system.webServer> 
```

重要的部分是删除任何现有的 .woff 配置。这样您就可以确定它可以在任何 IIS 平台/配置上运行。

# ant - exec 可执行 sed

> ID：12002596
> 
> 赞同：2
> 
> 时间：2012-08-17T08:45:06.790
> 
> 标签：ant, sed, exec

想用 ant 在 macOS 上替换 txt 文件中的值。我使用了以下代码，但它给出了错误：“该类型不支持嵌套文本数据（”“）”。

```
<exec executable="sed">
   <arg value="s/old/new/g" />
   <arg value="$MY_FILE" />
 </exec>. 
```

如何替换变量的值，我在windows上用replace替换了一个文件，它可以工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-17T11:34:23.123

也许有点晚了，但我刚刚发现了这个问题。希望我的解决方案至少可以帮助其他人。

缺少一个参数。命令行上的 sed 需要 -e "your expression" 或 -f "/path/to/your scriptfile"。在使用 ant 的情况下，您希望直接更改文件（sed 的语音中的“内部”），而不是不同的输入/输出文件。所以你需要添加 -i （或者更简单，将 -e 更改为 -ie）。因此，正确的调用将是：

```
<exec executable="sed">
   <arg value="-ie" />
   <arg value="s/old/new/g" />
   <arg value="$MY_FILE" />
</exec> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T09:00:25.127

也许这可以帮助

ant-contrib PropertyRegex

对输入字符串执行正则表达式操作，并将结果设置为属性

[http://ant-contrib.sourceforge.net/tasks/tasks/propertyregex.html](http://ant-contrib.sourceforge.net/tasks/tasks/propertyregex.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-26T10:07:43.093

在我的情况下，我不需要更改我的源文件，我需要将一些路径更改为我的 log4j.properties。所以这是我的解决方案

```
<exec executable="sed">
        <arg value="s-/path/to/change/in/log4j_file-/new/path-g"/> 
        <arg line="./src/log4j.properties"/>
        <redirector output="./output/path/conf/log4j.properties" ></redirector>
</exec> 
```

就像这个命令：

```
sed 's-/path/to/change/in/log4j_file-/new/path/log-g' ./src/log4j.properties > ./output/path/conf/log4j.properties 
```

# qt - 在 Qt 中处理网络超时

> ID：12002605
> 
> 赞同：4
> 
> 时间：2012-08-17T08:45:49.520
> 
> 标签：qt, qnetworkaccessmanager

在处理 时`QNetworkReply`，[规定](http://qt-project.org/forums/viewthread/11763)使用计时器来中止连接。

这是我当前的代码：

```
void ImageDownloader::download(QString imgUrl){    
  this->timeoutTimer = new QTimer(this);
  this->timeoutTimer->setSingleShot(true);
  this->timeoutTimer->setInterval(15000);
  connect(this->timeoutTimer, SIGNAL(timeout()), this, SLOT(timeout()));

  QUrl requestUrl(imgUrl);
  QNetworkRequest nwRequest(requestUrl);
  this->imageNwReply = this->nam->get(nwRequest);
  connect(imageNwReply,SIGNAL(finished()),this,SLOT(imgDownloaded()));
  connect(imageNwReply, SIGNAL(downloadProgress(qint64,qint64)), this->timeoutTimer, SLOT(start()));
  this->timeoutTimer->start();
}

void ImageDownloader::timeout(){
  qDebug()<<__FUNCTION__<<" Forced timeout!";    
  this->imageNwReply->abort();
} 
```

我面临的困惑是我应该什么时候启动计时器？有时我必须发出大约 50 个并发*Get*请求，`QNetworkAccessManager`但由于[限制了最大并发连接数](http://www.qtcentre.org/threads/37530-QNetworkAccessManager-only-6-requests-are-executed-in-parallel-for-one-host)，有时甚至在处理它们之前，某些请求就会超时。

是否有信号可以准确知道何时开始处理请求，`QNeworkAccessManager`以便我只能在那时启动相应的计时器？

一种可能的解决方案可能是实现一个请求队列，并且只有最大可能的连接来处理，但我正在寻找一个*更清洁*的解决方案

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T08:52:56.940

该问题有一个未解决的[错误/增强请求](https://bugreports.qt.io/browse/QTBUG-3443)。[我从Qt 论坛](http://forum.qt.io/topic/19182/handling-network-timeout-in-qt)了解了这个错误

# objective-c - Xcode 认为我的项目不再是 ARC

> ID：12002607
> 
> 赞同：1
> 
> 时间：2012-08-17T08:46:00.150
> 
> 标签：objective-c, ios, automatic-ref-counting

好的，所以在我尝试向我的项目中添加一些第三方代码之前，我一直很高兴在我的项目中使用 ARC。我将文件夹拖入（不是项目文件，只是一些视图控制器源文件）。3rd 方代码不是 ARC，所以我做了**Edit->Refactor->Convert To Objective-C ARC**并仅选择 3rd 方应用程序中的文件转换为 ARC。一切都很顺利，但我开始在我之前工作的代码中收到以下警告：

```
TTKSoundGenerator.m:94:10: warning: '__bridge' casts have no effect when not using ARC [-Warc-bridge-casts-disallowed-in-nonarc]
        (__bridge CFStringRef)soundFile,
         ^~~~~~~~
1 warning generated. 
```

这是出现问题的第一个线索。我继续构建并运行，果然应用程序崩溃了，在东西被释放的地方仍然被引用。**因此，尽管Objective-C 自动引用计数**在项目文件中设置为**YES** ，但 ARC 根本不起作用。

我回去对项目中的所有文件进行了**Edit->Refactor->Convert To Objective-C ARC**，希望能纠正这个问题，但没有骰子。所以现在这个项目陷入了 ARC 的困境。似乎在进行重构时取消选择文件以某种方式告诉 Xcode 向这些文件添加“无 ARC”的特殊情况。关于如何解决或进一步诊断此问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T09:02:11.033

无需将您的第 3 部分库转换为 ARC，同一项目中可以同时拥有 ARC 代码和非 ARC 代码。由于您的第 3 部分库未编写为 ARC，因此如果您按原样使用它，您可以节省大量额外的工作。（特别是如果您需要更新它）

如果您决定在项目中使用它，我认为可以公平地假设在没有 ARC 的情况下正确编写了第 3 部分库。

看到这个：

[是否可以结合非 ARC 和 ARC 项目代码？](https://stackoverflow.com/questions/9865847/is-it-possible-to-combine-non-arc-and-arc-project-code)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:06:15.267

好吧，很明显，如果您在项目上执行**Edit->Refactor->Convert To Objective-C ARC**并且只选择一些要转换的文件，那么 Xcode 会将其余文件标记为 No ARC。设置该选项后，再次对所有文件运行**Edit->Refactor->Convert To Objective-C ARC没有进一步的效果。**修复方法是转到您的项目设置，在**Build Phases->Compile Sources**下，选择要重新启用 ARC 的文件并删除重构添加的 -fno-objc-arc 编译器标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T11:48:41.343

ACR 转换工具非常强大且非常方便，但您通常应该以与您的想法完全相反的方式使用它。

如果您有一个 ARC 项目并且您添加了一个不符合 ARC 的类。你有两个选择：

```
1) mark the file as not using ARC (recommended for 3rd party classes)
2) convert the file to use ARC 
```

ARC 转换工具可以执行这些任务中的任何一个，让您不必记住 f-no-whatsit 的语法以及手动设置标志的位置：

对于案例 1) 运行该工具并勾选*除非*ARC 类之外的每个文件。ARC 转换工具不会对已经符合 ARC 的文件执行任何操作，并且任何未选中的文件都将添加 -fno-objc-arc 标志。

对于案例 2) 运行该工具并勾选每个文件，包括新类。ARC 转换工具现在只会将此文件转换为 ARC，而不会影响其他文件。

直觉上你会期望如果一个文件已经是 ARC，你应该不选中它，但实际上这样做会导致 ARC 转换工具用 -fno-objc-arc 标志标记这些文件。

# file-io - 将数据按列写入文件（Fortran）

> ID：12002620
> 
> 赞同：7
> 
> 时间：2012-08-17T08:47:11.967
> 
> 标签：file-io, formatting, fortran, fortran90

我需要在 Fortran 90 中将一些数据写入文件。我应该如何使用`WRITE (*,*) input`将值分组到**列**中？每次通话后`WRITE`总是放一个，这就是问题所在。`new line`

代码示例：

```
open (unit = 4, file = 'generated_trajectories1.dat', form='formatted')

do time_nr=0, N
   write (4,*) dble(time_nr)*dt, initial_traj(time_nr)
end do 
```

现在的重点是将它写在单独的列中。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-17T11:04:18.540

您可以使用隐含的 DO 循环将值写入单个记录。比较以下两个示例：

```
integer :: i

do i=1,10
   write(*,'(2I4)') i, 2*i
end do 
```

它产生：

```
1   2
2   4
3   6
... 
```

使用隐含的 DO 循环，它可以重写为：

```
integer :: i

write(*, '(10(2I4))') (i, 2*i, i=1,10) 
```

这个产生：

```
1   2   2   4   3   6   ... 
```

如果元素的数量在编译时不固定，您可以使用`<n>`扩展名（不支持`gfortran`）：

```
write(*, '(<n>(2I4))') (i, 2*i, i=1,n) 
```

它`(2I4)`从变量的值中获取编辑描述符的重复次数`n`。在 GNU Fortran 中，您可以首先使用内部文件创建适当的编辑描述符：

```
character(len=20) :: myfmt

write(myfmt, '("(",I0,"(2I4))")') n
write(*, fmt=myfmt) (i, 2*i, i=1,n) 
```

当然，它也适用于列表定向输出（即格式为 的输出`*`）：

```
write(*, *) (i, 2*i, i=1,10) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T09:09:18.500

这实际上取决于您尝试写入文件的数据（即您是否在循环或数组中有标量......）。你可以在你的问题中包含这个描述吗？

如果您尝试将标量多次写入同一行，请尝试使用*非高级 I/O*，将关键字参数传递`advance="no"`给 write 语句，例如

```
integer :: x

do x = 1,10
  write(*, fmt='(i4,1x)', advance="no") x
end do 
```

但是，请注意[非高级 I/O](http://www.cs.rpi.edu/~szymansk/OOF90/bugs.html#3)的惊喜。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T15:18:44.743

答案取决于您对 Chris 问题的回答。如果您想要单行，那么您将不得不使用 Chris 描述的非高级 IO。没有这个，使用多个格式化的 write 语句，你总是会得到多行。

此外，您可能需要使用格式化 IO 而不是列表导向 (*) IO。对于列表导向的 IO，规则是宽松的。不同的编译器可能会产生不同的输出。对于许多输出项，换行符可能会防止输出行过长。

如果您的所有变量都是实数，这里应该可以使用一种格式：

```
write (4, '( *(2X, ES14.6) )', advance="no" ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T13:56:18.110

旧的 $ 编辑描述符怎么样：

```
write(*, fmt='(i4,$)') x 
```

记得在你的循环之后做一个 write(*,*) ......

# objective-c - CGRect和CGrectmake Objective C的疑惑

> ID：12002627
> 
> 赞同：0
> 
> 时间：2012-08-17T08:47:27.223
> 
> 标签：objective-c, ios, cocoa-touch, orientation, cgrect

我在 willrotatetointerfaceorientation 方法中使用以下代码。

```
if(UIDeviceOrientationIsLandscape(toInterfaceOrientation))
{
    NSLog(@"willRotateToInterfaceOrientation landscape"); 
    self.textFieldResult.frame = CGRectMake(146, 210, 97, 31);
    self.operationLabel.frame = CGRectMake(73, 210, 120, 21);
}
else if (UIDeviceOrientationIsPortrait(toInterfaceOrientation))
{
    NSLog(@"willRotateToInterfaceOrientation Portrait");   

    self.textFieldResult.frame = CGRectMake(305, 134, 97, 31);
    self.operationLabel.frame = CGRectMake(82, 138, 120, 21);
} 
```

如果我旋转一次，这很好用，即横向到纵向，反之亦然。但是，如果我从纵向变为倒置，视图的方向就会受到干扰！控件正在进入 else 块，但方向不是应有的方向。

我假设对于 CGRect，视图的原点是相对于父视图的左上角指定的。这是窗口本身。

此外，我在这里指定的坐标与我在故事板上看到的完全不同，我的意思是几乎是两倍或一半！如果我想在我的 viewWillAppear 方法中使用相同的代码（如上），那么我必须为相同的视图放置使用一组不同的坐标，这些坐标类似于我在情节提要上看到的坐标。

我想我可能不清楚 CGRect 的工作原理和相应的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:13:39.943

您可以在该视图上使用 CGAffineTransform 来解决该问题。欲了解更多信息，请访问：[这个](http://iphonedevelopment.blogspot.in/2008/10/demystifying-cgaffinetransform.html)和[这个](https://stackoverflow.com/questions/8064089/applying-scaling-and-rotation-on-a-view-using-cgaffinetransform)

# jquery - jQuery给特定标签CSS

> ID：12002628
> 
> 赞同：0
> 
> 时间：2012-08-17T08:47:33.433
> 
> 标签：jquery, this, attr

我正在尝试阅读一对链接的href，并且根据href是什么，我想为特定链接提供一些CSS。这是我尝试过的代码：

```
$('.pane-menu-block-2 .menu li a').each(function(){
if($('a[href="node/3"]')){ $(this).attr('style','background-image:url(/sites/all/themes/zen/zen-internals/images/fraga_lararen.png)'); }
}) 
```

但它不会工作。它为该 div 中的每个链接提供相同的背景。链接如下所示：

```
<div class="pane-menu-block-2">
    <ul class="menu">
        <li><a href="/">Våra program</a></li>
        <li><a href="node/3">Fråga läraren</a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:49:26.960

`if($('a[href="node/3"]'))`总是会进入 if 块，因为在 javascript 中，一个对象总是被认为是`true`.

你应该检查如下的href：

```
$('.pane-menu-block-2 .menu li a').each(function(){
    if($(this).attr('href') === 'node/3') { 
        $(this).attr('style','background-image:url(/sites/all/themes/zen/zen-internals/images/fraga_lararen.png)'); 
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T08:49:48.020

```
$('.pane-menu-block-2 .menu li a').each(function(){
    if ( $(this).attr('href')==='node/3' ) { 
        $(this).css('background-image', 'url(/sites/all/themes/zen/zen-internals/images/fraga_lararen.png)'); 
    }
})​;​ 
```

或者干脆用选择器来做，不需要任何`each()`功能：

```
$('.pane-menu-block-2 .menu li a[href="node/3"]').css('background-image', 'url(/sites/all/themes/zen/zen-internals/images/spank_the_teacher.png)'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:49:59.453

使用[`.is()`](http://api.jquery.com/is/)，您可以将当前元素与选择器进行匹配。您在代码中犯的一个大错误是您选择`<a>`了文档中的 each，而不是在循环`$(this)`的每次迭代中使用 which 引用当前元素`.each()`。

```
$('.pane-menu-block-2 .menu li a').each(function() {
    if($(this).is('a[href="node/3"]')) { 
        $(this).attr('style','background-image:url(/sites/all/themes/zen/zen-internals/images/fraga_lararen.png)'); 
    }
}); 
```

您也可以更简单并使用标准相等（`===`严格键入它）：

```
if($(this).attr('href') === "node/3") { 
    $(this).attr('style','background-image:url(/sites/all/themes/zen/zen-internals/images/fraga_lararen.png)'); 
} 
```

# java - 使用 SOAPHandler 时 MTOM 不工作

> ID：12002632
> 
> 赞同：1
> 
> 时间：2012-08-17T08:47:42.217
> 
> 标签：java, out-of-memory, mtom, soaphandler

我尝试使用 Mtom 传输文件，在我使用 SoapHandler 验证客户端签名之前它运行良好。SoapHandler 保留所有消息并将其更改为 base64 编码。因此，当我尝试获取大文件时，Jvm 会引发堆大小异常。你们知道有什么方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:34:41.877

Java JRE 带有一个 JAX-WS Provider。该提供商有我认为的错误。如果通过直接获取 HandlerChain 或使用 HandlerResolver 添加了 SoapHandler，则使用 MTOM 正确创建的消息将被解构，并且附件被内联放置在 SOAP 消息中。如果附件很大，这可能会导致性能非常差或内存不足错误。

我发现的唯一解决方案是使用另一个 JAX-WS 提供程序。从测试来看，Axis2 似乎运行良好（尽管它有大量依赖项）。只需在类路径上放置另一个提供程序即可使用它。Java 在 META-INF/services 中查找名为 javax.xml.ws.spi.Provider 的文件。如果找到此文件，它将使用指定的 Provider。主 Axis2 jar 将包含此文件以确保使用 Axis2 提供程序。其他提供商也可能会解决此问题。

由于这种自动提供程序检测，您可能会发现您的应用程序存在或不存在此问题，具体取决于它运行的位置。例如，如果您将应用程序部署到 IBM WebSphere，它已经覆盖了默认提供程序，您将不会遇到此问题。可能其他应用程序服务器也覆盖了默认提供程序。如果您能获得一份副本，IBM 还提供了一个非常不错的 jar，com.ibm.jaxws.thinclient_7.0.0.jar，其中封装了 Axis2。这只能用于独立应用程序（那些不在 WebSphere 中运行的应用程序），但它非常方便并解决了这个问题。

# java - org.hibernate.MappingException：实体映射中的重复列

> ID：12002638
> 
> 赞同：5
> 
> 时间：2012-08-17T08:48:11.297
> 
> 标签：java, hibernate, database-design, domain-driven-design

我正在做一个简单的投票系统。我有 2 张桌子：

`Person`：身份证，姓名，姓氏

`Vote`: ID, Vote (Boolean), VoterID (This is 实际上`FK_PersonID`), PersonID (This is 实际上`FK_PersonID`也是)。

我需要能够确定**谁**投票以及**投票给谁**——使用存储在`Person`表格中的人员来**满足这两个**需求。该表`Person`包含可以“投票”和“投票给”的人的用户详细信息。人们可以决定是否要为自己投票。

`domain`我已经在我的对象中绘制了我的表格，如下所示：

**人**

```
 private Integer ID;
    private String name;
    private String surname;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "ID")
    public Integer getID() {
        return ID;
    }

    public void setID(Integer ID) {
        this.ID = ID;
    }

    @Column(name = "name")
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @Column(name = "surname")
    public String getSurname() {
        return surname;
    }

    public void setSurname(String surname) {
        this.surname = surname;
    } 
```

**投票**

```
private Integer ID;
private Person voter;
private Person person;
private Boolean vote;

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name = "ID")
public Integer getID() {
    return ID;
}

public void setID(Integer ID) {
    this.ID = ID;
}

@Column(name = "vote")
   public Boolean getVote() {
    return vote;
}

public void setVote(Boolean vote) {
    this.vote = vote;
}

@ManyToOne
@JoinColumn(name = "personID")
public Person getVoter() {
    return voter;
}

public void setVoter(Person voter) {
    this.voter = voter;
}

@ManyToOne
@JoinColumn(name = "personID")
public Person getPerson() {
    return person;
}

public void setPerson(Person person) {
    this.person = person;
} 
```

**错误信息**

> 原因：org.hibernate.MappingException：实体映射中的重复列：web.poll.domain.Vote 列：personID（应使用 insert="false" update="false" 映射）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T09:03:11.753

您`@JoinColumn`对选民和个人使用相同的。更改`@JoinColumn("personID")`为关联人和`@JoinColumn("voterID")`关联选民，一切都应该没问题。

作为旁注，因为您将其标记为`domain-driven-design`... 如果像这样实现，您的投票类将更具 DDD 风格：

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name = "ID")
private Integer ID;

@ManyToOne
@JoinColumn(name = "voterID")
private Person voter;

@ManyToOne
@JoinColumn(name = "votedForID")
private Person votedFor;

@Column(name = "vote")
private Boolean vote;

public void cast(Person voter, Person votedFor, boolean vote) {
    // Maybe assert that this vote has not already been casted
    this.voter = voter;
    this.votedFor = votedFor;
    this.vote = vote;
}

public Integer getID() {
    return ID;
}

public Boolean isUpVote() {
    return vote;
}

public Boolean isDownVote() {
    return !vote;
}

public Person getVoter() {
    return voter;
}

public Person getVotedFor() {
    return votedFor;
} 
```

只是一个例子，不知道我是否理解了你的`vote`布尔权的含义来表示赞成/反对票。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T09:03:42.677

异常的原因是下面的代码，并且您从 Vote 实体与 Person 实体有两次关系。为什么你需要有两次关系？

```
 @ManyToOne 
@JoinColumn(name = "personID") 
public Person getVoter() {     
    return voter; 
}  
public void setVoter(Person voter) {     
    this.voter = voter; 
}  
@ManyToOne 
@JoinColumn(name = "personID") 
public Person getPerson() {     
    return person;
}  
public void setPerson(Person person) {     
    this.person = person; 
} 
```

# perl - 如何读取文件并保存内容，直到我们遇到 perl 脚本中的第一个空行

> ID：12002643
> 
> 赞同：0
> 
> 时间：2012-08-17T08:48:46.147
> 
> 标签：perl, foreach

我正在尝试读取文件并保存以 $path 开头的行，直到它遇到数组中的第一个 balnk 行。我有下面的代码，它只打印路径名而不是行。有人可以看看。

```
Below are the contents of the $file:

\sbd\archieve\date\form
-rwxrwxrwx 1 etd maadm 4354270 Aug 16 21:56 COMAHCUT.dat.20120816.ftpd.201208162156*
-rw-r--r-- 1 etd maadm       0 Aug 16 21:56 COMAHCUT.DONE.20120816.ftpd.201208162156

\sbd\single\archieve\date\form
-rwxr-xr-x 1 etd maadm 1362780 Aug 15 22:02 COMAINS.dat.ftpd.201208152203*
-rwxr-xr-x 1 etd maadm       0 Aug 15 22:02 COMAINS.DONE.ftpd.201208152203*

Below is the code i tried:
#!/usr/bin/perl

my $file = "/home/pauler/practice/DataIt/line.txt";
open (INFO, $file) or die "Cannot open the file $file :$! \n";
my $path = "\sbd\archieve\date\form";

foreach $line (<INFO>) {
        if ($line =~ m/$path/) {
        push (@array1, $line);
        last if ($line =~ m/^$/);
        print @array1;
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:56:15.170

触发器操作员`..`可以挽救生命……我们的代码。在左边的表达式返回 true 之前，它保持为 false，并且在右边的表达式变为 true 之前保持为 true ......然后它再次为 false，直到左边的表达式再次计算为 true。

```
# read lines into $_ for cleaner code
while (<INFO>) {
    if (/$path/ .. /^$/) {
       push @array1, $_;
    }
}
print @array1; 
```

哦，还有关于路径的说明……我知道没有一个操作系统真的需要反斜杠，甚至 Windows 也没有……使用普通的斜杠`/`可以让你免于奇怪的转义序列和其他潜伏在黑暗中的魔法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T09:02:31.863

您可以利用文件句柄记住它们在文件中的位置这一事实。

```
use strict;
use warnings;

my @array;
my $path = '\sbd\archieve\date\form';

while ( my $line = <DATA> ) {
    next unless $line =~ /\Q$path\E/;
    push @array, $line;
    while ( my $line = <DATA> ) {
        last if $line =~ /^\s*$/;
        push @array, $line;
    }
}

print @array;

__DATA__
\sbd\archieve\date\form
-rwxrwxrwx 1 etd maadm 4354270 Aug 16 21:56 COMAHCUT.dat.20120816.ftpd.201208162156*
-rw-r--r-- 1 etd maadm       0 Aug 16 21:56 COMAHCUT.DONE.20120816.ftpd.201208162156

\sbd\single\archieve\date\form
-rwxr-xr-x 1 etd maadm 1362780 Aug 15 22:02 COMAINS.dat.ftpd.201208152203*
-rwxr-xr-x 1 etd maadm       0 Aug 15 22:02 COMAINS.DONE.ftpd.201208152203* 
```

# openlayers - 从openlayers中的集群中拖动一个特征

> ID：12002647
> 
> 赞同：2
> 
> 时间：2012-08-17T08:48:54.553
> 
> 标签：openlayers

如何在图层中拖动簇？从群集中拖动特定功能后，我想从群集中删除该功能。

```
var strategy = new OpenLayers.Strategy.Cluster({distance:10,threshold:2});
poiLayer = new OpenLayers.Layer.Vector("poiLayer",{strategies:[strategy],styleMap:stylemap});
map.addLayer(poiLayer); 
strategy.activate();
drag = new OpenLayers.Control.DragFeature(poiLayer);
map.addControl(drag);
drag.activate(); 
```

是否可以从集群中拖动单个特征？

# html - Html 布局问题面板全高

> ID：12002650
> 
> 赞同：0
> 
> 时间：2012-08-17T08:49:06.470
> 
> 标签：html, layout, css

我正在寻找有关 HTML 布局的帮助。这是小提琴> [http://jsfiddle.net/jSUNt/](http://jsfiddle.net/jSUNt/) 基本上我想做的是让左边的“灰色”栏变成窗口的全高，右边的蓝色栏保持相对大小. 例如，随着内容变大，它会变大。

有人可以调整我的代码以实现这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:26:45.880

试试这个：

```
#body{ width: 100%; }

#menu {
width: 30%;
background-color: lightGray;
height:100%;
float: left;
display:block;
position:fixed;    
}

#content {
width: 70%;
min-height: 50px;
background-color: lightBlue;
float:right;
display:block;
} 
```

# java - 有最新数据时更新属性文件

> ID：12002657
> 
> 赞同：0
> 
> 时间：2012-08-17T08:49:36.533
> 
> 标签：java, design-patterns

我有一个包含不同属性文件中属性的键：值数据的 Map。我得出以下解决方案：

```
//firstProp - properties file
//FIRST_PROPERTIES_FILE - path to a properties file
public void changeProps(Map<String, String> props) {
    boolean isFirstPropsChanged = false;
    boolean isSecondPropsChanged = false;
    boolean isThirdPropsChanged = false;

    Set<String> keys = props.keySet();
    for(String key : keys) {
        if(firstProp.containsKey(key) && !firstProp.getProperty(key).equals(props.get(key))) {
            firstProp.setProperty(key, props.get(key));
            if(!isDirstPropsChanged) {
                isFirstPropsChanged = true;
            }
        }

        if(secondProp.containsKey(key) && !secondProp.getProperty(key).equals(props.get(key))) {
            secondProp.setProperty(key, props.get(key));
            if(!isSecondPropsChanged) {
                isSecondPropsChanged = true;
            }
        }

        if(thirdProp.containsKey(key) && !thirdProp.getProperty(key).equals(props.get(key))) {
            thirdProp.setProperty(key, props.get(key));
            if(!isThirdPropsChanged) {
                isThirdPropsChanged = true;
            }
        }
    }
    try {
        if(isFirstPropsChanged){
            firstProp.store(new FileOutputStream(FIRST_PROPERTIES_FILE), null);
        }
        if(isSecondPropsChanged) {
            secondProp.store(new FileOutputStream(SECOND_PROPERTIES_FILE), null);
        }
        if(isThirdPropsChanged) {
            thirdProp.store(new FileOutputStream(THIRD_PROPERTIES_FILE), null);
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

这个解决方案效果很好，但它看起来像轮椅。我查看了不同的DP，策略在这里似乎很好，但似乎……我什至认为不应该应用任何DP，并且有很多微妙和简单的解决方案。但实际上它是什么？

**根据 Brian Agnew 的建议或 smth**更新重构。**一样。**

 **```
//Map<Properties, File> propertiesFileMap - Properties files with File they are located at.
public void changePropsArray(Map<String, String> props) {
    Set<String> keys = props.keySet();
    for(String key : keys) {
        for(Properties prop : propertiesFileMap.keySet()) {
            if(prop.containsKey(key) && !prop.getProperty(key).equals(props.get(key))) {
                prop.setProperty(key, props.get(key));
            }
        }
    }

    try {
        for(Map.Entry<Properties, File> entry : propertiesFileMap.entrySet()) {
            entry.getKey().store(new FileOutputStream(entry.getValue()), null);
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T08:53:08.883

维护一组 Properties + 它们相应的文件名有什么问题？如果你将这些封装在一个对象中，那么你只需要循环，那个对象就会知道如何更新和写出自己。**

# android - onProgressUpdate 中的 ProgressDialog 更新，在 Android 中下载大文件时重新计算

> ID：12002661
> 
> 赞同：3
> 
> 时间：2012-08-17T08:49:50.623
> 
> 标签：android, android-asynctask, download, progressdialog

我正在编写程序以从远程服务器下载大文件（~ 280 MB）。下载过程虽然需要很多时间，但运行良好。然后我用 a`ProgressDialog`来显示下载过程的当前状态。它也非常适合小尺寸文件下载。从某种意义上说“完美”，将下载量显示为百分比和 100% 下载。但这不适用于大文件大小的下载。

问题是，它显示进度直到 7%，然后再次开始计算进度。但在后台，下载正常进行。

我无法弄清楚错误在哪里/在哪里。因为相同的代码适用于小文件。有人可以给我一个线索吗？

谢谢

# sql - 如何从 PostgreSQL 触发器发送电子邮件？

> ID：12002662
> 
> 赞同：19
> 
> 时间：2012-08-17T08:49:51.807
> 
> 标签：sql, database, postgresql, pgadmin

我使用 pgsql 设置触发器，当更新表数据集（将状态更改为已完成）时，它将使用数据集电子邮件值自动向电子邮件帐户发送电子邮件并将此电子邮件保存在服务器中

但我不知道如何编写触发器函数来发送电子邮件，并在服务器中发送电子邮件。先感谢您

pg版本为9.1，CentOS 5.8

```
CREATE OR REPLACE FUNCTION sss()
RETURNS trigger AS
$BODY$begin
if(NEW.publisher== 'aaaa')
then
//send email and save to server 192.168.171.64
end if;
return NEW;
end

$BODY$
LANGUAGE plpgsql VOLATILE
COST 100;
ALTER FUNCTION sss()
OWNER TO postgres;
GRANT EXECUTE ON FUNCTION sss() TO postgres; 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-17T09:51:04.027

请参阅[优秀的常规 depesz 文章](http://www.depesz.com/2012/06/13/how-to-send-mail-from-database/)和[pg-message-queue](http://code.google.com/p/pg-message-queue/)。

直接从数据库发送电子邮件可能不是一个好主意。如果 DNS 解析很慢并且一切都挂起 30 秒然后超时怎么办？如果您的邮件服务器出现问题并需要 5*分钟*才能接收邮件怎么办？您将在触发器中挂起数据库会话，直到您`max_connections`突然间您什么也做不了，只能等待或开始手动取消事务。

我建议让您的触发器保持永久运行并连接到数据库（但不在事务中）[`NOTIFY`](http://www.postgresql.org/docs/current/static/sql-notify.html)的[`LISTEN`ing帮助程序脚本。](http://www.postgresql.org/docs/current/static/sql-listen.html)

您的触发器所要做的就是`INSERT`将一行放入队列表并发送一个`NOTIFY`. 您的脚本会收到该`NOTIFY`消息，因为它已为其注册`LISTEN`，检查队列表，然后完成其余的工作。

您可以用任何方便的语言编写帮助程序；我通常将 Python 与`psycopg2`.

该脚本可以根据它在数据库中找到的信息发送电子邮件。您不必在 PL/PgSQL 中进行所有丑陋的文本格式化，您可以用更强大的脚本语言将内容替换为模板，并在出现时从数据库`NOTIFY`中获取可变数据。

使用这种方法，您的助手可以发送每条消息，然后才从队列表中删除信息。这样，如果您的邮件系统出现导致发送失败的暂时性问题，您就不会丢失信息，并且可以继续尝试发送，直到成功为止。

如果您确实必须在数据库中执行此操作，请参阅[PgMail](http://brandolabs.com/pgmail)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-17T01:42:05.813

1.  使用本地 MTA（这为您提供了多个应用程序的集中式 SMTP 配置）
2.  让本地 MTA 中继到您的真实 MTA（这本质上为您提供异步支持）
3.  如果是 windows，请使用 blat SMTP 命令行客户端。确保 blat 的路径在 PATH 中
4.  您可能应该使用 Apache Camel 或 pgAgent 来执行此操作，而不是直接在触发器中

如果 postgres 超级用户，这将在 Windows 上运行。触发函数应该是 SECURITY DEFINER。Linux 上的 sendmail 类似：

```
...

copy 
  ( select 'my email body' ) 
to program 
  'blat -to to@example.com -from from@example.com -subject "My Subject" -server localhost:25' 
with (
  format text
);

... 
```

~ 60 毫秒

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T08:55:06.813

您可以使用 plperlu 发送邮件。

[此](http://evilrouters.net/2008/02/01/send-email-from-postgresql/)链接显示了如何在触发器上使用它的示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T09:00:03.927

您可以使用 pgMail（如果您被允许安装它）：

如果您按照[brandolabs.com](http://brandolabs.com/pgmail)上的说明进行操作，可以归结为

```
pgmail('Send From ','Send To ','Subject goes here','Message body here.') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-05T12:07:45.313

我同意@Craig Ringer。你可以用 Python 编写不到 100 行代码的东西。我建议使用以下 Python 库：psycopg2、smtplib。根据您希望收到更改通知的频率，您可以运行 cronjob（取决于您的工作环境）。这样，您可以将数据库的多项更改汇总到一封电子邮件中，而不是每次发生更改时都发送通知。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-04T18:51:45.477

如果你使用 TypeScript/Node，那么使用久经考验[的 graphile-worker 代码库](https://github.com/graphile/worker)从 Postgres 到 Node 进行通信。然后，您可以轻松地使用 Node 中的标准电子邮件逻辑来发送电子邮件。

# java - 如何避免 LDAP SEARCH 中的字段名称？

> ID：12002664
> 
> 赞同：0
> 
> 时间：2012-08-17T08:49:55.423
> 
> 标签：java, ldap

我正在制作一个 LDAP 搜索应用程序。它工作正常，但在搜索结果中，它也给了我字段名称

前任：

```
**sn:** YYYY
**department:** xxxx
....etc 
```

如何避免打印字段名称？

谢谢

```
public LdapContext getLdapContext() {

LdapContext ctx = null;
try {
        Hashtable<String, String> env = new Hashtable<String, String>();
        env.put(Context.INITIAL_CONTEXT_FACTORY,
                "com.sun.jndi.ldap.LdapCtxFactory");
        env.put(Context.SECURITY_AUTHENTICATION, "XXX");
        env.put(Context.SECURITY_PRINCIPAL, "XXXX");
        env.put(Context.SECURITY_CREDENTIALS, "XXXX");
        env.put(Context.PROVIDER_URL, "XXXXX");
        ctx = new InitialLdapContext(env, null);
        System.out.println("Connection Successful.");
    } catch (NamingException nex) {
        System.out.println("LDAP Connection: FAILED");
        nex.printStackTrace();
    }
    return ctx;
}

SearchControls constraints = new SearchControls();

constraints.setSearchScope(SearchControls.SUBTREE_SCOPE);
String[] attrIDs = { lastName, firstName, location,
                     telephoneNumber, jobTitle, division };
constraints.setReturningAttributes(attrIDs);

// First input parameter is search base, it can be
// "CN=Users,DC=Domain,DC=com"
// Second Attribute can be uid=username
NamingEnumeration<SearchResult> answer = ctx.search("OU= Users,DC=Domain,DC=com",
                "sn=" + lastname, constraints); 
```

一些代码来显示我在做什么,,,请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:51:46.127

我只能假设您按照以下方式做某事：

```
static void printAttrs(Attributes attrs) {
   if (attrs == null) {
     System.out.println("No attributes");
   } else {
    /* Print each attribute */
    try {
     for (NamingEnumeration<?> ae = attrs.getAll(); ae.hasMore();) {
      Attribute attr = (Attribute) ae.next();
      System.out.println("attribute: " + attr.getID());

      // print each value
      for (NamingEnumeration<?> e = attr.getAll(); e.hasMore(); System.out.println("value: " + e.next()));
     }

    } catch (NamingException e) {
    e.printStackTrace();
    }
  }
} 
```

如果您想获取其中的一部分，可以使用以下内容解析内容：

** 注意：此代码取自某处，我丢失了链接...

```
/*
 * Prepares and returns CN that can be used for AD query
 * e.g. Converts "CN=**Dev - Test Group" to "**Dev - Test Group"
 * Converts CN=**Dev - Test Group,OU=Distribution Lists,DC=DOMAIN,DC=com to "**Dev - Test Group"
 */
public static String getCN(String cnName) {
    if (cnName != null && cnName.toUpperCase().startsWith("CN=")) {
        cnName = cnName.substring(3);
    }
    int position = cnName.indexOf(',');
    if (position == -1) {
        return cnName;
    } else {
        return cnName.substring(0, position);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:30:46.163

LDAP 没有字段，它具有`attribute descriptions`属性值。属性描述是 OID 的别名，例如`cn`和`department`。

在显示属性的代码中，调用仅返回属性值的方法。

此外，请考虑使用[UnboundID LDAP SDK](https://www.unboundid.com/products/ldap-sdk/)而不是 JNDI。JNDI 不应该用于新代码。

### 也可以看看

*   [LDAP：编程实践](http://www.ldapguru.info/ldap/ldap-programming-practices.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-04T13:15:18.213

您可以只使用该`get`方法获取没有字段名称的对象。

例如：

```
System.err.println(attribs.get("cn")**.get()**); 
```

谢谢

# sql - SQL - 在不使用游标的情况下需要一些帮助

> ID：12002674
> 
> 赞同：0
> 
> 时间：2012-08-17T08:50:49.627
> 
> 标签：sql, cursor

目前，在我的存储过程中，我将光标用于以下情况。我所知道的是我们需要尽可能避免使用游标。

所以，我在这里发布情况给你可以帮助我解决它。

1.  在表 A 中，我使用 Cursor 获取一一对应的 UserID
2.  对于每个 UserID，我调用 2 个函数来处理业务。结果是 2 个字符串。
3.  这 2 个字符串将保存到表 B。
4.  如果成功，请执行 2 个操作：更新表 A 中的 Status = 1。并返回一条消息。
5.  如果失败，请执行 1 个操作：返回一条消息。
6.  循环光标

对于第 2 - 5 步的业务，我们如何使用光标创建存储过程？

我希望你能给我建议来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:08:36.453

谁说你需要避免使用游标？
提供游标是有原因的，在某些情况下，您必须使用游标或求助于获取记录并以某种编程语言处理逻辑。

如果您希望每条记录成功或失败，在数据库中甚至在存储过程中，您都需要一个游标。（是的，触发器后有插入，但这只会使您的逻辑复杂化）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T09:10:11.587

在高层次上你可以做这样的事情（我在你的表 B 中添加了一个 insertDate 因为我认为更新是必要的）

首先，将tableA中的数据插入到tableB中：

```
insert into tableB (ID, column1, column2, insertDate)
select ID, callFunction1(userID), callFunction2(userID), getdate() 
```

然后对于插入的记录，设置 status=1

```
update tableA
set status=1 
where ID in (select ID from tableB where insertDate=today) 
```

现在，返回消息的种类有点复杂，你不能每行返回一条消息，如果其中任何一个“失败”，整个批次都会失败。

究竟什么会导致您的案例失败？

# c# - 网格数据源更新后 C# 过滤器不恢复

> ID：12002677
> 
> 赞同：0
> 
> 时间：2012-08-17T08:51:00.950
> 
> 标签：c#, gridview, filter

我的代码有一部分：

```
 if (OnSave())
                    {
                        saveFilter();
                        ReInitDataSource();
                        loadFilter();
                    } 
```

保存过滤器功能：

```
 ViewFilter filter = new ViewFilter();
    private void saveFilter()
    {
        foreach (object filt in GetGridView.ActiveFilter)
        {
            filter.Add((ViewColumnFilterInfo)filt);
        }
        GetGridView.ActiveFilter.Clear();
    } 
```

负载过滤功能：

```
 private void loadFilter()
    {
        GetGridView.ActiveFilter.BeginUpdate();
        GetGridView.ActiveFilter.Clear();
        foreach (object filt in filter)
        {
            GetGridView.ActiveFilter.Add((ViewColumnFilterInfo)filt);
        }
        GetGridView.ActiveFilter.EndUpdate();
    } 
```

ReInitDataSource() 确实提交了对数据库的更改并升级了 XpoObject 列产品：

```
 GridColumn cColProductGroup = cColInfo.ColumnByFieldName(EVNT_BugzillaComponent.Fields.fkProductGroup_this.PropertyName);
                ControlsUtils.InitLookupControlData(cSession, typeof(LIC_ProductGroup), cColProductGroup.ColumnEdit as RepositoryItemLookUpEdit); 
```

所以有我的问题：当我恢复布局时，gridView1.FilterPanelText 变成“[product]=”我不知道为什么？有人可以提出任何解决方案。

PS，如果我不是按 XpOobjects 过滤，而是按字符串过滤 - 没有任何变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:07:26.693

您是否尝试过使用数据块来更轻松地识别过滤器？！

这样您就可以定义要初始化的数据块。

[http://www.centerspace.net/doc/NMath/user/data-2.html](http://www.centerspace.net/doc/NMath/user/data-2.html)

# oracle - 将 Oracle 数据库字符集更改为 UTF-8 (AL32UTF8) 后，某些表中的几条记录被拒绝（在运行导入时）

> ID：12002680
> 
> 赞同：0
> 
> 时间：2012-08-17T08:51:06.040
> 
> 标签：oracle, character-encoding, oracle10g

将 Oracle 数据库字符集更改为 UTF-8 (AL32UTF8) 后，某些表中的几条记录被拒绝（在运行导入时）

将字符集更改为 UTF-8，然后重新加载相同的数据转储以确保可以支持阿拉伯语言字符。

导入日志抛出的错误如下图所示：

> ORA-12899: 列 "DATABASE"."TABLE"."ATTRIBUTE" 的值太大（实际值：73，最大值：64）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:38:22.917

本的评论很可能是正确的。如果您最初有一个 60 个字符的字符串，它在单字节编码中需要 60 个字节的空间，并且适合 VARCHAR2(64)。

使用多字节编码 UTF-8，相同的字符串现在使用 73 个字节，并且不适合 VARCHAR2(64)，因为 VARCHAR2 声明的默认单位是字节，而不是字符。

您将需要从以下位置更改所有字符列：

```
VARCHAR2(64) 
```

至：

```
VARCHAR2(64 CHAR) 
```

我强烈建议不要以字节为单位使用任何长度声明，因为要进行验证，几乎不可能预测字符串是否适合。例如，很容易定义一个将条目限制为 40 个字符的 HTML 文本字段，因为它具有用于此目的的属性。但是很难创建相同的条目以将条目限制为以 UTF-8 编码测量的 40 个字节。无论如何，您希望如何将其传达给用户？（*以 UTF-8 编码衡量时，您输入的名称不得超过 40 个字节。*）

# javascript - JavaScript 解析布尔值

> ID：12002682
> 
> 赞同：3
> 
> 时间：2012-08-17T08:51:13.603
> 
> 标签：javascript

在我的服务器的响应中，我得到一个 JSON 对象。它有一个布尔标志。

```
if(file.showInTable == 'true') {

} 
```

但是，即使`showInTable`设置为`false`，我也会进入该代码块。如何应对？

我试过了：

```
if(file.showInTable == 'true')
if(file.showInTable)
if(Boolean(file.showInTable)) 
```

## 编辑

正如 Ghommey 所提到的，我使用第二个选项来检查该值。即使比较语句返回`false`，它也会进入代码内部。见下图

![在此处输入图像描述](../Images/07f8894273b06a58931696c2ca4f6767.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T09:01:34.327

> 它设置为假或真（如布尔） - 托尼

为什么将布尔值作为字符串进行比较？

只需将其作为布尔值进行比较：

```
if(file.showInTable === true) {

} 
```

或者

```
if(file.showInTable !== false) {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T09:03:48.903

这很丑陋，但为什么不呢？

```
if (file.showInTable === "false") file.showInTable = false; 
```

# javascript - 当用户到达页面右侧时加载新内容

> ID：12002686
> 
> 赞同：2
> 
> 时间：2012-08-17T08:51:32.653
> 
> 标签：javascript, jquery, ajax, scroll

有很多插件允许在用户到达页面底部时加载内容，但是我找不到允许您在用户到达文档右侧时加载内容的 jquery 插件。

有没有一个好的策略来做到这一点？

有没有一个很好的插件可以做到这一点？

谢谢，彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:14:52.407

```
$('div').scroll(function (){
  var padder = 50;
  if( $(this).scrollLeft() >= $(this).scrollWidth -padder){
     //load more content as the user has scrolled 50px less than, the end, 
  }
}) 
```

我认为这样的事情会做到....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:41:20.913

这很好地完成了这项工作：

```
//Scroll
  var padder = 150;
  $(document).live('scroll',function (){
     if($(this).scrollLeft() > padder){
    $.post("data.txt", { bla: "1", blu: "ax" },
        function(data) {
         //TODO add a check when reach the end
         padder = padder +200;
         $("#events_list").width($("#events_list").width()+200);
         $("#events_list").append(data);
        },"text");
     }
  }); 
```

# c# - 除查询部分外，如何检查 Uris 是否相等？

> ID：12002687
> 
> 赞同：3
> 
> 时间：2012-08-17T08:51:42.147
> 
> 标签：c#, uri

默认[`Uri.Equals()`](http://msdn.microsoft.com/en-us/library/f83xtf15.aspx)方法仅忽略用户信息 ( `UserInfo`) 和片段 ( `Fragment`)。

是否有任何方法可以比较相等并忽略`Query`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T08:52:56.833

[`Uri.Compare`](http://msdn.microsoft.com/en-us/library/system.uri.compare)[`UriComponents`](http://msdn.microsoft.com/en-us/library/7767559y)允许您通过传入一个值来指定哪些部分应参与比较。

# android - 如何在android的片段中刷新listview中的数据？

> ID：12002690
> 
> 赞同：0
> 
> 时间：2012-08-17T08:52:10.937
> 
> 标签：android, listview, view, fragment, listadapter

我在片段类中有一个 Listview，每次添加新数据时都需要更新它。新数据未反映在列表中

我的片段类：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.messagelist, null);
        listView = (ListView) view.findViewById(R.id.listOfMessages);

    messageList();
    return view;

} 
```

私人无效消息列表（）{

```
 msgRecordList.addAll((AppService.getInstance()).getMsgId());
    if (!(msgRecordList.equals(""))) {

        msgListAdapter = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, addMessage());  //addMessage adds data to the list

         listView.setAdapter(msgListAdapter);
         ((BaseAdapter) msgListAdapter).notifyDataSetChanged();

        listView.setVisibility(View.VISIBLE);
    } else {
        System.out.println(" i am in else");
    }
    return listView;

}

protected List<String> addMessage() {

    List<String> msgList = new ArrayList<String>();
    int size = AppService.getInstance().getMsgId().size();
    System.out.println("sizeee:::" + size);
    for (int i = 0; i < size; i++) {
        msgList.add(AppService.getInstance().getMsgTimeStamp().get(i) + " : "
                + AppService.getInstance().getMsgDescription().get(i));
    }

    return msgList;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:22:29.720

使用此代码，您要在其中刷新数据。

```
myListAdapter.notifyDataSetChanged();

List<object> list= addMesage();
listview.setAdaptor("**", "***", list); 
```

然后使用 notifydatasetChanged();

# cocoa - 可可：可可中的哪个方法与 animateWithDuration:animations:completion: 相同？

> ID：12002697
> 
> 赞同：1
> 
> 时间：2012-08-17T08:52:51.637
> 
> 标签：cocoa

我可以在 mac os cocoa 中使用 animator 实现动画，比如

```
[[view animator] setFrame:newFrame]; 
```

但我的问题是我必须对一些作为视图属性的点进行动画处理。我可以像下面的 iPhone 代码那样做：

```
[UIView animateWithDuration:0.3 animations:^{
                                for (Point point in self.points) {
                                    point.x += 10;
                                }
                           } completion:^(BOOL finished) {

                                }];
                            }]; 
```

我想知道如何在 mac ox cocoa 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T10:37:44.060

通常对于 NSView 动画，您必须覆盖动画师使用的标准动画。

```
CABasicAnimation* animation = [CABasicAnimation animation];
animation.delegate = yourDelegate;
NSDictionary *animations = [NSDictionary dictionaryWithObjectsAndKeys:animation,@"frameSize",nil];
[view setAnimations:animations]; 
```

动画的关键是您要设置动画的属性。

如果你不需要委托，你可以使用这样的代码：

```
[CATransaction begin];
[CATransaction setAnimationDuration:0.5];
[CATransaction setAnimationTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut]];
[[view animator] setFrameOrigin:origin];
[CATransaction commit]; 
```

如果您需要更复杂的动画，您可以创建一个覆盖窗口，其中包含托管 contentview 的图层，并在其中包含视图屏幕截图的动画图层。

# samsung-smart-tv - 在三星智能电视应用程序中检查网络连接

> ID：12002699
> 
> 赞同：2
> 
> 时间：2012-08-17T08:52:54.553
> 
> 标签：samsung-smart-tv

我在 2011 电视上运行 2.5 SDK。

我无法使用此处找到的网络 API 检查网络连接：http: [//www.samsungdforum.com/upload_files/files/guide/data/html/html_2/api_reference/javascript_apis/deviceapi/deviceapi_network.html](http://www.samsungdforum.com/upload_files/files/guide/data/html/html_2/api_reference/javascript_apis/deviceapi/deviceapi_network.html)

这些值应该返回 1 或 0，但我得到的只是 -1。

这是我的代码：

索引.html

```
<object id='pluginNetwork' classid='clsid:SAMSUNG-INFOLINK-NETWORK'></object>
<object id='pluginObjectTV' classid='clsid:SAMSUNG-INFOLINK-TV'></object> 
```

附上js：

```
var network = document.getElementById('pluginNetwork');
var tvPlugin = document.getEelementById('pluginObjectTV'); 
var ProductType = tvPlugin.GetProductType();
var phyConnection = network.CheckPhysicalConnection(ProductType); //returns -1
var http = network.CheckHTTP(ProductType); //returns -1
var gateway = network.CheckGateway(ProductType); //returns -1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:34:09.913

首先，据我所知，没有像对象这样`GetProductType`的功能。`SAMSUNG-INFOLINK-NETWORK`

替换`GetProductType`为`GetActiveType`它应该可以工作。

# r - 在ggplot2中使用geom_ribbon反转X和Y轴

> ID：12002704
> 
> 赞同：9
> 
> 时间：2012-08-17T08:53:05.913
> 
> 标签：r, ggplot2

是否可以使用 ggplot2 包中的 geom_ribbon，但范围是水平而不是垂直绘制的。如果“geom_ribbon”提出选项 xmin/xmax，这将是微不足道的，但事实并非如此。

这是我的数据，用于测试的简化绘图功能和我获得的数字。所以在这个例子中，我想让“深度”轴垂直显示。

```
prof <- read.table(text = " depth prop mean error
1 5 FALSE 2.12 0.035
2 15 FALSE 2.06 0.035
3 25 FALSE 1.54 0.035
4 35 FALSE 0.92 0.033
5 45 FALSE 0.71 0.028
6 55 FALSE 0.60 0.026
7 65 FALSE 0.54 0.024
8 75 FALSE 0.49 0.023
9 85 FALSE 0.46 0.022
10 95 FALSE 0.43 0.022
11 105 FALSE 0.41 0.022
12 115 FALSE 0.39 0.021
13 5 TRUE 2.18 0.061
14 15 TRUE 2.11 0.061
15 25 TRUE 1.58 0.054
16 35 TRUE 0.97 0.047
17 45 TRUE 0.76 0.042
18 55 TRUE 0.67 0.043
19 65 TRUE 0.61 0.040
20 75 TRUE 0.54 0.033
21 85 TRUE 0.48 0.028
22 95 TRUE 0.45 0.027
23 105 TRUE 0.43 0.025
24 115 TRUE 0.40 0.022", header=TRUE)

ggplot(prof, aes(colour = prop, fill = prop)) + 
  geom_ribbon(aes(x = depth, ymin = mean-error, ymax = mean+error), 
  alpha = 0.6, colour = NA) 
```

![在此处输入图像描述](../Images/052e7bb954c13d49ce189d654012c149.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T09:11:25.313

看看 coord_flip() 这是未经测试的，因为您没有以简单的格式提供数据。发布 dput(your.data.frame) 的输出以提供数据。

```
ggplot(prof, aes(x = depth, ymin = mean - error, ymax = mean + error, 
    fill = prop)) + geom_ribbon() + coord_flip() 
```

并且请在键入代码时使用键盘底部的大条空白使文本更具可读性代码也是文本

# opencv - 帧间单应性错误

> ID：12002706
> 
> 赞同：1
> 
> 时间：2012-08-17T08:53:13.200
> 
> 标签：opencv, homography, projection-matrix

我正在使用帧间单应性来计算场景单应性并将图形可视化为由纯旋转和缩放相机捕获的视频。最终场景单应性（Hscene）计算为：Hscene = Hinterframe * Hscene；通过使用 OpenCV。我知道部分帧间单应性错误会导致累积错误。但是我有一些视频序列，其中出现了另一个错误。此错误还表现为可视化图形的漂移。当图形投影到图像边框时，漂移更加明显。第一个想法是镜头失真，但视频不包含任何失真。当我计算从初始帧到目标帧的直接单应性时，投影也没有漂移。

您知道是什么原因导致这种漂移以及如何消除它吗？

[EDITED 5.9.2012] 原因是镜头失真。可以从帧间特征点对应关系中估计它吗？

# java - Vaadin：调用 setVisibleColumns() 后，“Ids 必须存在于容器中”

> ID：12002707
> 
> 赞同：2
> 
> 时间：2012-08-17T08:53:21.557
> 
> 标签：java, vaadin

我正在基于 Vaadin Tutorial 中的 SimpleAddressBook 构建小型应用程序。

就像在教程中一样，我有一个扩展 BeanItemContainer 的容器，用于填充表格。

为什么我得到：

```
 java.lang.IllegalArgumentException: Ids must exist in the Container or as a generated column , missing id: title 

```

尽管我的 bean 类中有一个“title”字段？

豆项容器：

```
package com.example.library.content;

import java.io.Serializable;
import com.vaadin.data.util.BeanItemContainer;

@SuppressWarnings("serial")
public class BooksContainer extends BeanItemContainer<Book> implements
        Serializable {

    public static final Object[] NATURAL_COL_ORDER = new Object[] {
            "title", "author", "year", "ISBN"};

    public static final String[] COL_HEADERS_POLISH = new String[] {
            "Tytul", "Autor", "Rok", "ISBN"};

    public BooksContainer() throws InstantiationException,
            IllegalAccessException {
        super(Book.class);
    }

    public static BooksContainer createWithTestData() {
        final String[] titles = { "Peter", "Alice", "Joshua", "Mike", "Olivia"};
        final String[] authors = { "Smith", "Gordon", "Simpson", "Brown",
                "Clavel"};
        final int[] years = { 1594, 1834, 1922, 1983, 1984};
        final String isbns[] = { "4215 Blandit Av.", "452-8121 Sem Ave",
                "279-4475 Tellus Road", "4062 Libero. Av.", "7081 Pede. Ave",};

        BooksContainer booksContainer = null;
        try {
            booksContainer = new BooksContainer();

            for (int i = 0; i < titles.length; i++) {
                Book book = new Book();
                book.setTitle(titles[i]);
                book.setAuthor(authors[i]);
                book.setYear(years[i]);
                book.setISBN(isbns[i]);

                booksContainer.addItem(book);
            }
        } catch (InstantiationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return booksContainer;
    }

} 
```

书：

```
package com.example.library.content;

public class Book {
    private String title;
    private String author;
    private int year;
    private String ISBN;

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getAuthor() {
        return author;
    }

    public void setAuthor(String author) {
        this.author = author;
    }

    public int getYear() {
        return year;
    }

    public String getISBN() {
        return ISBN;
    }

    public void setYear(int year) {
        this.year = year;
    }

    public void setISBN(String isbn) {
        this.ISBN = isbn;
    }

} 
```

书籍表视图

```
public class BooksTableView extends Table {

  public BooksTableView(LibraryApplication libraryApp) {
     setSizeFull();

     setContainerDataSource(BooksContainer.createWithTestData());

     setVisibleColumns(BooksContainer.NATURAL_COL_ORDER);
     setColumnHeaders(BooksContainer.COL_HEADERS_POLISH);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:39:43.760

我用 Vaadin 6.8.2 测试了你的代码，它可以工作。

# java - 在 Eclipse 中添加关键字

> ID：12002714
> 
> 赞同：3
> 
> 时间：2012-08-17T08:54:24.733
> 
> 标签：java, eclipse, eclipse-plugin

我想在 eclipse 中为我在程序中键入的一些常见语句添加一个关键字。例如，我不想在我的代码中一次又一次地键入 System.out.println。所以我想要一些可以快速完成工作的关键字。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T08:56:01.547

窗口 > 首选项 > Java > 编辑器 > 模板

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T09:05:47.163

键入“SYSO”（任何情况下）然后按 Ctrl + Space，它会自动完成为 Sysout。Tyoe SYSE 用于错误，SYS 用于所有 System.* 选项

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T09:03:39.990

默认情况下，在 Eclipse 中，您可以键入 sysout 并使用 ctrl + 空格来自动完成 System.out.println()。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T09:13:42.753

这是来自 Google Code 的 Eclipse[中当前可用快捷方式的备忘单。](http://code.google.com/p/eclipse-cheatsheet/downloads/list)

此外，您可能还想阅读有关创建快捷方式的[Eclipse Wiki 常见问题解答](http://wiki.eclipse.org/FAQ_How_do_I_provide_a_keyboard_shortcut_for_my_action?)，以获取有关如何创建键盘快捷方式的更多信息。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-17T09:23:20.683

在您的情况下，您可以使用 type

> system.pur.println() 的 sysout

并输入

> System.err.println() 的 syserr，

然后点击

> ctrl + 空格

. 它会自动完成。

如果您想编辑任何键绑定，请转到，

> 窗口 -> 首选项 -> 常规 -> 键。

将有一个包含所有键及其绑定的 UI。单击要编辑密钥的命令。您已经拥有大量命令，但没有键绑定。也许您想使用其中一个命令。或者，您可以使用 when 条件根据您的上下文复制命令并修改键绑定。打开并播放任何你想要的东西。如果您觉得自己搞砸了，请单击恢复默认值。然后用这些键再次演奏。

如果您想列出所有捷径，请单击

> ctrl + shift + l

# ios - iOS 从应用程序内转到设置应用程序

> ID：12002717
> 
> 赞同：1
> 
> 时间：2012-08-17T08:54:32.897
> 
> 标签：ios, cocoa-touch, settings.bundle

指南规定您可以在应用程序或内置设置应用程序中进行设置。但是是否有任何选项可以从应用程序中转到设置应用程序中的特定页面？（即按下按钮并启动设置应用程序）。你可以在 iOS 中启动另一个应用程序吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T01:18:56.753

从 5.0 开始，您可以做到这一点……但后来 Apple 在 5.1 中删除了它，并表示不再支持它:(。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-12-13T10:32:52.203

我刚刚发现你可以让 Siri 去设置，她会带你去当前应用程序的设置。当然，从编程的角度来看这没有用，但有用的提示

# zend-framework - 在扩展的zend表单类中使用注释构建器

> ID：12002722
> 
> 赞同：2
> 
> 时间：2012-08-17T08:55:03.310
> 
> 标签：zend-framework, zend-form, zend-framework2

我正在阅读[http://mwop.net/blog/2012-07-02-zf2-beta5-forms.html](http://mwop.net/blog/2012-07-02-zf2-beta5-forms.html)并在 zf2 和教义中使用该注释构建器没有任何问题

我想知道我是否有一个 zend 表单类......例如类 bookForm ......我如何在类中使用这个注释生成器

例如从学说实体注释加载基本字段，然后在 bookForm 类中添加一些额外的东西（如提交按钮）......

在 mwop.net 示例中，它在控制器中使用......如果我在该控制器中添加额外的表单字段将太难看..

```
use MyVendor\Model\User;
use Zend\Form\Annotation\AnnotationBuilder;

$user    = new User();
$builder = new AnnotationBuilder();
$form    = $builder->createForm($user);

$form->bind($user);
$form->setData($dataFromSomewhere);
if ($form->isValid()) {
    // $user is now populated!
    echo $form->username;
    return;
} else {
    // probably need to render the form now.
} 
```

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-25T09:43:33.683

我在尝试找到使用 AnnotationBuilder 添加字段集的方法时发现了这个问题。添加字段集的正确方法是像这样在您的实体中设置 Annotation\Type

```
namespace Application\Entity;
/** 
 * 
 * My Entity.
 * 
 * @ORM\Entity
 * @ORM\Table(name="my_table")
 * 
 * @Annotation\Name("my_name")
 * @Annotation\Type("fieldset")
 * 
 */
class SomeEntity ... 
```

然后在您的表单中，您可以像这样将带注释的表单添加为字段集

```
namespace Application\Form;

use Zend\Form\Form,
    Doctrine\Common\Persistence\ObjectManager,
    DoctrineModule\Stdlib\Hydrator\DoctrineObject as DoctrineHydrator,
    Zend\Form\Annotation\AnnotationBuilder;

class SomeForm extends Form
{
    public function __construct(ObjectManager $objectManager)
    {
        // we want to ignore the name passed
        parent::__construct('entity-create-form');
        $this->setAttribute('method', 'post')
             ->setHydrator(new DoctrineHydrator($objectManager));

        $builder    = new AnnotationBuilder();

        $entity = new Application\Entity\SomeEntity;
        //Add the fieldset, and set it as the base fieldset
        $fieldset = $builder->createForm( $entity ) ;
        $fieldset->setUseAsBaseFieldset(true);
        //var_dump($fieldset);
        $this->add( $fieldset );

        $this->add(array(
            'type' => 'Zend\Form\Element\Csrf',
            'name' => 'csrf'
        ));

        $this->add(array(
            'name' => 'submit',
            'attributes' => array(
                'type' => 'submit',
                'value' => 'Save'
            )
        ));
    }
} 
```

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-04T12:39:23.217

您可以在实体类中设置基本表单类，例如

```
/**
 * @Annotation\Type("App\Form\BookForm")
 */
class Model
{
} 
```

完整的工作示例：[https ://gist.github.com/nepda/d572f9ad787c48c8555d](https://gist.github.com/nepda/d572f9ad787c48c8555d)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T07:41:45.277

实际上，对于我的问题，您必须使用 zend_form 2.0 创建自己的基本表单，然后将您使用 AnnotationBuilder 构建的辅助表单作为字段集添加到第一个表单

代码示例：

```
$newform = new BaseForm();

        $user = new Entity\Material;
        $builder = new AnnotationBuilder();
        $form = $builder->createForm($user);
        $fld = $form->getElements();
        foreach ($fld as $fldone) {
            $newform->add($fldone);
        } 
```

# c# - 将链接发布到 Facebook，在 Facebook 墙上显示为 TEXT。为什么？

> ID：12002728
> 
> 赞同：1
> 
> 时间：2012-08-17T08:55:08.507
> 
> 标签：c#, asp.net, .net, facebook, facebook-c#-sdk

我可以将消息发布到 FB 墙上。但是当消息中有链接时。它仅显示为整个文本，而不是链接。

我首先尝试使用普通的锚标签和 facebook 元标签。它仍然是一样的。我该如何解决这个问题？

```
 protected void btnPostToWall_Click(object sender, EventArgs e)
    {
        var fb = new FacebookWebClient();

        dynamic parameters = new ExpandoObject(); 
        string strLink = "<meta property=\"og:url\" content=\"" + Request.Url.ToString()  + "\"/>";

        strMessage = strName + " read the article " + strLink;
        parameters.message = strMessage;

        try
        {
            dynamic id = fb.Post("me/feed", parameters);
            lblPostMessageResult.Text = "Message posted successfully";
            txtMessage.Text = string.Empty;
        }
        catch (FacebookApiException ex)
        {
            lblPostMessageResult.Text = ex.Message;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:29:46.517

在末尾附加链接`parameters.message`不是使用 Graph API 将链接发布到 Facebook 墙的方式。理想情况下，您需要`parameters.properties`像这样传递它。

```
var url = Request.Url.ToString();
parameters.properties = new
{
    URL = new
    {
        text = url,
        href = url
    }
}; 
```

这将显示在消息下方

> 网址： http: [//mysite.com/](http://mysite.com/)

# ios - iPhone在后台线程中将图像保存到文档文件夹任务

> ID：12002731
> 
> 赞同：1
> 
> 时间：2012-08-17T08:55:23.423
> 
> 标签：ios, background, camera, xcode4.4, background-thread

我对 iOS 编程很陌生。我一直在开发一个非常简单的相机应用程序，但我需要完成的一个主要功能是不仅要显示使用内置相机拍摄的图像或使用 UIImageView 从 iPhone 画廊中挑选的图像，还要将其保存到文档文件夹，以便稍后在第二个视图控制器中调用它。我已经设法使用以下代码完成了这一点：

```
 //Save taken image to Camera Roll and display on UIImageView
    -(void)imagePickerController:(UIImagePickerController *)pickerdidFinishPickingMediaWithInfo:(NSDictionary *)info{

NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];

[self dismissModalViewControllerAnimated:YES];

if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {

    UIImage *image = [info 
                      objectForKey:UIImagePickerControllerOriginalImage];

    imageView.image = image;
    imageView.hidden = NO;

    if (newMedia)
        UIImageWriteToSavedPhotosAlbum(image, 
                                       self,
                                       @selector(image:finishedSavingWithError:contextInfo:),
                                       nil);
}
    //Save photo to documents folder
{
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *savedImagePath = [documentsDirectory stringByAppendingPathComponent:@"savedImage.png"];
UIImage *image = imageView.image; // imageView is my image from camera
NSData *imageData = UIImagePNGRepresentation(image);
[imageData writeToFile:savedImagePath atomically:NO];
}} 
```

我遇到的问题是将图像保存到文档文件夹的过程需要很长时间（> 5 秒！），以至于用户会认为应用程序挂起。当然我想显示一个活动指示器，但现在知道这是不可能的，因为保存到文档文件夹任务占用了我的主线程，因此阻止任何其他 UIView 任务执行，直到保存完成。

似乎解决方案正在将保存到文档任务转移到后台线程，但目前我无法完全理解如何做到这一点。有谁知道我可以添加到上述代码中以将此任务移至后台的一些简单代码？或者也许有人可以向我推荐一个很好的教程？

编辑：

这是我尝试过的其他东西。我已经设置了 @jake_hetfield 的 saveImage 方法，并将保存到文档的代码放在里面，如下所示：

```
 - (void)saveImage:(UIImage*)image {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,        
    NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *savedImagePath = [documentsDirectory       
    stringByAppendingPathComponent:@"savedImage.png"];
    UIImage *image = imageView.image; // imageView is my image from camera
    NSData *imageData = UIImagePNGRepresentation(image);
    [imageData writeToFile:savedImagePath atomically:NO];

    [self performSelectorInBackground:@selector(saveImage:) withObject:image]; } 
```

但是这行 UIImage *image = imageView.image; 突然返回构建错误“重新定义图像”。这令人困惑，因为当我在 PickerDidFinish... 方法中运行保存到文档代码时，同一行有效。关于如何解决此错误的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:29:51.400

创建一个保存图像的方法，然后使用 performSelectorInBackground 调用它，它将在后台运行。

例子：

```
- (void)saveImage:(UIImage*)image{
    NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init];

    // Code for saving image here    

    [pool release];
} 
```

像这样称呼它：

```
/* ... */

[self performSelectorInBackground:@selector(saveImage:) withObject:imageView.image];

/* ...*/ 
```

# iis - 如何创建基于IIS的视频点播解决方案？

> ID：12002734
> 
> 赞同：3
> 
> 时间：2012-08-17T08:55:44.390
> 
> 标签：iis, iis-7, smooth-streaming

我访问了[IIS 媒体服务网站](http://www.iis.net/media)，却迷失了那里拥有的所有优秀功能。我需要的是提供具有以下功能的视频点播（流式传输）：

*   自适应流
*   支持桌面、iOS 和安卓设备。
*   在实际内容之前插入一个随机短视频（广告）。
*   必要时能够创建播放列表。

在阅读材料时，我对一些事情感到困惑：

*   我注意到播放列表扩展不支持流畅的流式传输，并且我找不到在那里使用播放列表的方法。
*   Live Smooth Streaming 有一些设置使其与移动设备兼容，但我找不到存档内容的这些选项（我认为他们称之为演示文稿）。
*   Windows Media Services 有“发布点”的概念来分离“点播内容渠道”，我是否必须在 IIS 上创建多个网站才能获得这种“分离”？
*   Windows Media Services 控制台及其 API 提供实时统计信息，让我知道谁在给定时间播放我的内容。我无法在 IIS 上看到它。

但是，尽管我有多么困惑以及我脑海中的所有这些问题，但我很感激在将点播视频频道与其需要的基本功能，特别是移动支持放在一起的主要主题上的任何帮助。

# wix - 使用 light.exe 可以在创建 .msi 包期间将配置变量写入日志文件或文本文件

> ID：12002735
> 
> 赞同：1
> 
> 时间：2012-08-17T08:55:45.243
> 
> 标签：wix, wix3.5

我们目前有 ConfigVariables.wxi 文件，我们将其包含在我们的 product.wxs 文件中。其中一个变量是 ProductCode，它是自动生成的 GUID

```
 <!-- Auto-generate GUID for ProductCode for each build -->
  <?define ProductCode = "*" ?> 
```

我们使用命令行创建 .msi 文件，在此过程中，我想检索 ProductCode GUID 以供以后使用。

命令行：

```
light.exe Product.wixobj ThirdPartyFile.wixobj CompressFile.wixobj -out 1.0.0\My_Test_Installer2.msi 
```

因此有没有办法可以将配置变量写入日志文件或文本，即：`$(var.ProductCode)`

# java - org.hibernate.HibernateException：没有活动事务，保存无效

> ID：12002737
> 
> 赞同：8
> 
> 时间：2012-08-17T08:55:50.173
> 
> 标签：java, mysql, hibernate, persistence

我正在创建`JSF`应用程序并在其中使用一些休眠的东西。我想做的就是将实体保存到数据库中，但我不断收到此异常：

```
org.hibernate.HibernateException: save is not valid without active transaction 
```

起初我得到了这个例外：

```
org.hibernate.HibernateException: No CurrentSessionContext configured! 
```

然后我发现我需要将它添加到我的休眠配置中：

```
<property name="hibernate.current_session_context_class">thread</property> 
```

这解决了这个问题，但现在出现了上述问题。我将实体保存到数据库中，如下所示：

```
public void create(T entity) {
    getSessionFactory().getCurrentSession().save(entity);
} 
```

我的 hibernate.cfg.xml 文件如下所示：

```
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
        <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/online_tests_management</property>
        <property name="hibernate.connection.username">root</property>
        <property name="hibernate.connection.password">root</property>
        <property name="hibernate.show_sql">true</property>
        <property name="hibernate.hbm2ddl.auto">update</property>
        <property name="hibernate.current_session_context_class">thread</property>

        <mapping class="com.groupgti.onlinetests.management.db.Service"/>
    </session-factory>
</hibernate-configuration> 
```

我在用：

*   Hibernate-4.1.4.Final
*   JDK 1.6
*   雄猫 6
*   JSF 2.0
*   PrimeFaces 3.3.1
*   mysql

有人知道问题出在哪里吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-17T09:02:00.860

你必须打电话`session.beginTransaction()`

```
public void create(T entity) {
   Session session=getSessionFactory().getCurrentSession();
   Transaction trans=session.beginTransaction();
   session.save(entity);
   trans.commit();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T09:02:19.803

尝试将您的方法更改为如下：

```
public void create(T entity) {
    getSessionFactory().getCurrentSession().beginTransaction();
    getSessionFactory().getCurrentSession().save(entity);
    getSessionFactory().getCurrentSession().endTransaction();
} 
```

应该能解决你的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T09:03:18.133

像这样做：

```
 public void create(T entity) {
       org.hibernate.Session ss= getSessionFactory().getCurrentSession();
       Transaction tx=ss.beginTransaction();
       ss.save(entity);
       tx.commit();    
  } 
```

自己做异常处理部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T09:19:25.640

我想你会发现这样的东西更健壮和合适：

```
Session session = factory.openSession();
Transaction tx = null;
try {
   tx = session.beginTransaction();

   // Do some work like:
   //session.load(...);
   //session.persist(...);
   //session.save(...);

   tx.commit(); // Flush happens automatically
}
catch (RuntimeException e) {
   tx.rollback();
   throw e; // or display error message
}
finally {
    session.close();
} 
```

如您所见，您不能“关闭”事务，您可以关闭会话。在这里阅读[这篇](https://community.jboss.org/wiki/SessionsAndTransactions)文章，它可能对你有用。

# jquery - 使用 JQuery 更改事件函数参数

> ID：12002740
> 
> 赞同：0
> 
> 时间：2012-08-17T08:56:05.267
> 
> 标签：jquery

我有一个包含某些“区域”的图像映射，其中包含鼠标悬停事件。这些事件中的大多数会触发一个传入某些坐标的函数。我希望能够操纵函数 SFX_ShowIconOver 中的坐标。

Image Map 是由第三方应用程序创建的，因此我只能操作渲染的内容。

```
<AREA onmouseover="SFX_ShowIconOver('Chart2','29456',368,10,22,22,false,this)" title="Legend Box" onclick="SFX_SendCommand('29456',false)" shape=rect coords=368,10,390,32> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:05:12.850

我最终实现了我想要的。这是代码：

```
 $("area").filter(function () { return this.outerHTML.match('SFX_ShowIconOver') })
        .each(function () {
            var pairs = $(this).attr("outerHTML").split(', ');

            for (var i = 0; i < pairs.length; i++) {
                var nums = pairs[i].split(',');
                nums[3] = 40;
                pairs[i] = nums.join(',');
            }

            $(this).attr("outerHTML", pairs.join(', '));
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:02:14.253

不要使用内联javascript，改为jQuery样式，然后更改变量`a,b,c,d,e`。

```
var a,b,c,d,e;
$('#area_id').mouseover(function() {
   SFX_ShowIconOver('Chart2', a, b, c, d, e, false,this);
}).click(function() {
   SFX_SendCommand(a, false);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T09:27:12.910

您可以使用 JQuery`onmouseover`从 DOM 中删除属性，然后使用 JQuery 添加您自己的鼠标悬停。

**编辑**
看看[这里](https://stackoverflow.com/questions/5409428/how-to-override-a-javascript-function)。那么您需要做的就是确保在加载第 3 方项目后声明您的“覆盖”函数。

# android - 在三星 Galaxy y (s5360) 上加载纹理

> ID：12002741
> 
> 赞同：1
> 
> 时间：2012-08-17T08:56:07.577
> 
> 标签：android, libgdx

我对三星 s5360 和使用 textureatlas 有疑问。

我的项目使用的是 libgdx 框架，我通过 textureatlas 加载纹理：

```
atlas = new TextureAtlas( Gdx.files.internal( "res-atlases/pages-info" ) ); 
```

当我在 htc mytouch、htc one v 和 huawei 中运行它时，一切正常。但是当我在三星 s5360 中运行它时，我收到一个错误：

```
E/(2288): RTOS COMMON MEM zero linear buffer allocated 5603328 0 205

E/(2288): BIG MEM OUT OF HANDLES

08-17 15:02:36.867: E/AndroidRuntime(2288): java.lang.RuntimeException: OpenGL error code while loading texture: 1285 - textureFileHandle

08-17 15:02:36.867: E/AndroidRuntime(2288):     at com.p666.services.AtlasManager.newTextureAtlas(AtlasManager.java:50)

08-17 15:02:36.867: E/AndroidRuntime(2288):     at com.p666.screens.AbstractScreen.<init>(AbstractScreen.java:100)

08-17 15:02:36.867: E/AndroidRuntime(2288):     at com.p666.gamelogic.GameControl.create(GameControl.java:135)
08-17 15:02:36.867: E/AndroidRuntime(2288):     at com.badlogic.gdx.backends.android.AndroidGraphics.onSurfaceChanged(AndroidGraphics.java:292)
08-17 15:02:36.867: E/AndroidRuntime(2288):     at com.badlogic.gdx.backends.android.surfaceview.GLSurfaceViewCupcake$GLThread.guardedRun(GLSurfaceViewCupcake.java:708)

08-17 15:02:36.867: E/AndroidRuntime(2288):     at com.badlogic.gdx.backends.android.surfaceview.GLSurfaceViewCupcake$GLThread.run(GLSurfaceViewCupcake.java:646) 
```

纹理和字体以白色显示。我该如何解决？谢谢 ：）

*   [屏幕HTC](http://i641.photobucket.com/albums/uu134/hpit/android/device-2012-08-17-154407.png)
*   [屏幕三星s5360](http://i641.photobucket.com/albums/uu134/hpit/android/device-2012-08-17-154624.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:36:52.357

这个：

> 加载纹理时的 OpenGL 错误代码：1285

表示您[的 OpenGL 视频内存已用完](http://developer.android.com/reference/javax/microedition/khronos/opengles/GL10.html#GL_OUT_OF_MEMORY)。

您正在加载的文件的大小、文件格式和图像格式（RGB8888？）是多少。在此之前您还加载了多少其他纹理？

[您可能会发现有关有效显示位图](http://developer.android.com/training/displaying-bitmaps/index.html)的 Android 文档很有用。

对于 libGDX，您还可能受益于在旧/较小的手机上使用不同的（较小的）纹理格式。`ResolutionFileResolver`与 an 一起使用（`AssetManager`参见[LibGDX 中的 AssetManager](https://stackoverflow.com/questions/9603907/assetmanager-in-libgdx)）。

# c++ - failbit 会影响 cin 上的调用忽略吗？

> ID：12002747
> 
> 赞同：2
> 
> 时间：2012-08-17T08:56:23.293
> 
> 标签：c++, ios, cin

设置失败位后：当我首先调用 cin.clear() 然后调用 cin.ignore() 时，程序是正确的。当我第一次调用 cin.ignore() 然后 cin.clear() 时，忽略似乎不起作用，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T09:04:06.187

`cin.clear()`清除故障位，但`cin.ignore()`没有。

这意味着，如果流处于无效状态，`clear()`随后调用`ignore()`会将状态重置为良好，然后忽略下一个字符。

另一方面，调用`ignore()`后面的`clear()`方法`ignore()`将失败，然后`clear()`将继续重置流状态。因此，在这种情况下，不会忽略下一个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T09:12:35.330

`cin.ignore()`仅当`cin.good()`is时才使用流中的数据`true`。如果`failbit`设置了 ，那么`cin.good()`将是`false`。

# c# - Gridview Header Freeze 在母版页中不起作用

> ID：12002748
> 
> 赞同：5
> 
> 时间：2012-08-17T08:56:31.900
> 
> 标签：c#, javascript, asp.net, gridview

我需要在滚动时冻结 gridview 标题。所以我得到了一个在普通页面中工作的脚本。但是在使用母版页时，它就像一个带有滚动条的普通网格。我应该在脚本中进行哪些更改以使其在母版页中工作。？

```
<script type="text/javascript" language="javascript">

            var GridId = "<%= GridView1.ClientID %>";
            var ScrollHeight = 300;
            window.onload = function () {
                var grid = document.getElementById(GridId);
                var gridWidth = grid.offsetWidth;
                var gridHeight = grid.offsetHeight;
                var headerCellWidths = new Array();
                for (var i = 0; i < grid.getElementsByTagName("TH").length; i++) {
                    headerCellWidths[i] = grid.getElementsByTagName("TH")[i].offsetWidth;
                }
                grid.parentNode.appendChild(document.createElement("div"));
                var parentDiv = grid.parentNode;

                var table = document.createElement("table");
                for (i = 0; i < grid.attributes.length; i++) {
                    if (grid.attributes[i].specified && grid.attributes[i].name != "id") {
                        table.setAttribute(grid.attributes[i].name, grid.attributes[i].value);
                    }
                }
                table.style.cssText = grid.style.cssText;
                table.style.width = gridWidth + "px";
                table.appendChild(document.createElement("tbody"));
                table.getElementsByTagName("tbody")[0].appendChild(grid.getElementsByTagName("TR")[0]);
                var cells = table.getElementsByTagName("TH");

                var gridRow = grid.getElementsByTagName("TR")[0];
                for (var i = 0; i < cells.length; i++) {
                    var width;
                    if (headerCellWidths[i] > gridRow.getElementsByTagName("TD")[i].offsetWidth) {
                        width = headerCellWidths[i];
                    }
                    else {
                        width = gridRow.getElementsByTagName("TD")[i].offsetWidth;
                    }
                    cells[i].style.width = parseInt(width - 3) + "px";
                    gridRow.getElementsByTagName("TD")[i].style.width = parseInt(width - 3) + "px";
                }
                parentDiv.removeChild(grid);

                var dummyHeader = document.createElement("div");
                dummyHeader.appendChild(table);
                parentDiv.appendChild(dummyHeader);
                var scrollableDiv = document.createElement("div");
                if (parseInt(gridHeight) > ScrollHeight) {
                    gridWidth = parseInt(gridWidth) + 17;
                }
                scrollableDiv.style.cssText = "overflow:auto;height:" + ScrollHeight + "px;width:" + gridWidth + "px";
                scrollableDiv.appendChild(grid);
                parentDiv.appendChild(scrollableDiv);
            }

    </script>

 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" >
            <Columns
                <asp:BoundField DataField="ContactName" HeaderText="Contact Name" />
                <asp:BoundField DataField="City" HeaderText="City" />
                <asp:BoundField DataField="Country" HeaderText="Country" />
            </Columns>
        </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T10:22:40.847

这可以使用 JQuery 来实现。上述脚本中的一些更改完成了这一点。得到了输出。

// 将以下代码放入 .js 文件中

```
 (function ($) {
        $.fn.Scrollable = function (options) {
            var defaults = {
                ScrollHeight: 300,
                Width: 0
            };
            var options = $.extend(defaults, options);
            return this.each(function () {
                var grid = $(this).get(0);
                var gridWidth = grid.offsetWidth;
                var headerCellWidths = new Array();
                for (var i = 0; i < grid.getElementsByTagName("TH").length; i++) {
                    headerCellWidths[i] = grid.getElementsByTagName("TH")[i].offsetWidth;
                }
                grid.parentNode.appendChild(document.createElement("div"));
                var parentDiv = grid.parentNode;

                var table = document.createElement("table");
                for (i = 0; i < grid.attributes.length; i++) {
                    if (grid.attributes[i].specified && grid.attributes[i].name != "id") {
                        table.setAttribute(grid.attributes[i].name, grid.attributes[i].value);
                    }
                }
                table.style.cssText = grid.style.cssText;
                table.style.width = gridWidth + "px";
                table.appendChild(document.createElement("tbody"));
                table.getElementsByTagName("tbody")[0].appendChild(grid.getElementsByTagName("TR")[0]);
                var cells = table.getElementsByTagName("TH");

                var gridRow = grid.getElementsByTagName("TR")[0];
                for (var i = 0; i < cells.length; i++) {
                    var width;
                    if (headerCellWidths[i] > gridRow.getElementsByTagName("TD")[i].offsetWidth) {
                        width = headerCellWidths[i];
                    }
                    else {
                        width = gridRow.getElementsByTagName("TD")[i].offsetWidth;
                    }
                    cells[i].style.width = parseInt(width - 3) + "px";
                    gridRow.getElementsByTagName("TD")[i].style.width = parseInt(width - 3) + "px";
                }
                parentDiv.removeChild(grid);

                var dummyHeader = document.createElement("div");
                dummyHeader.appendChild(table);
                parentDiv.appendChild(dummyHeader);
                if (options.Width > 0) {
                    gridWidth = options.Width;
                }
                var scrollableDiv = document.createElement("div");
                gridWidth = parseInt(gridWidth) + 17;
                scrollableDiv.style.cssText = "overflow:auto;height:" + options.ScrollHeight + "px;width:" + gridWidth + "px";            
                scrollableDiv.appendChild(grid);
                parentDiv.appendChild(scrollableDiv);
            });
        };
    })(jQuery); 
```

// 在页面中添加这小段代码。

```
 <script type="text/javascript" language="javascript">
        $(document).ready(function () {
            $('#<%=this.grdDisplay.ClientID %>').Scrollable();
        }
            )
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T13:04:40.843

我已经修改了上面的代码以支持多个网格视图。

```
(function ($) {
$.fn.Scrollable = function (options) {
    var defaults = {
        ScrollHeight: 300,
        Width: 0
    };
    var options = $.extend(defaults, options);

    return this.each(function (index) {
        var grid = $(this).get(index);
        var gridWidth = grid.offsetWidth;
        var gridHeight = grid.offsetHeight;
        var headerCellWidths = new Array();
        for (var i = 0; i < grid.getElementsByTagName("TH").length; i++) {
            headerCellWidths[i] = grid.getElementsByTagName("TH")[i].offsetWidth;
        }
        grid.parentNode.appendChild(document.createElement("div"));
        var parentDiv = grid.parentNode;

        var table = document.createElement("table");
        for (i = 0; i < grid.attributes.length; i++) {
            if (grid.attributes[i].specified && grid.attributes[i].name != "id") {
                table.setAttribute(grid.attributes[i].name, grid.attributes[i].value);
            }
        }
        table.style.cssText = grid.style.cssText;
        table.style.width = gridWidth + "px";
        table.appendChild(document.createElement("tbody"));
        table.getElementsByTagName("tbody")[0].appendChild(grid.getElementsByTagName("TR")[0]);
        var cells = table.getElementsByTagName("TH");

        var gridRow = grid.getElementsByTagName("TR")[0];
        for (var i = 0; i < cells.length; i++) {
            var width;
            if (headerCellWidths[i] > gridRow.getElementsByTagName("TD")[i].offsetWidth) {
                width = headerCellWidths[i];
            }
            else {
                width = gridRow.getElementsByTagName("TD")[i].offsetWidth;
            }
            cells[i].style.width = parseInt(width - 3) + "px";
            gridRow.getElementsByTagName("TD")[i].style.width = parseInt(width - 3) + "px";
        }
        parentDiv.removeChild(grid);

        var dummyHeader = document.createElement("div");
        dummyHeader.appendChild(table);
        parentDiv.appendChild(dummyHeader);
        if (options.Width > 0) {
            gridWidth = options.Width;
        }
        var scrollableDiv = document.createElement("div");
        if (parseInt(gridHeight) > options.ScrollHeight) {
            gridWidth = parseInt(gridWidth) + 17;
        }
        scrollableDiv.style.cssText = "overflow:auto;height:" + options.ScrollHeight + "px;width:" + gridWidth + "px";
        scrollableDiv.appendChild(grid);
        parentDiv.appendChild(scrollableDiv);
    });
};
})(jQuery); 
```

在页面中添加此代码。

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#<%=GridView1.ClientID %>, #<%=GridView2.ClientID %>, #<%=GridView3.ClientID %>').Scrollable({
            ScrollHeight: 200
        });
    });
</script> 
```

# spring - 如何在单元测试中使用 in-mem HSQLDB 序列？

> ID：12002753
> 
> 赞同：3
> 
> 时间：2012-08-17T08:57:04.130
> 
> 标签：spring, junit, hsqldb

我的应用程序使用序列，我正在尝试使用具有类似设置的 HSQLDB in-mem 数据库设置 junit 测试环境。这就是我配置序列及其创建的方式：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd">
    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" lazy-init="true"
      destroy-method="close">
        <property name="driverClassName" value="org.hsqldb.jdbcDriver" />
        <property name="url" value="jdbc:hsqldb:mem:test"/>
        <property name="username" value="sa" />
        <property name="password" value="" />
    </bean>
    <bean id="logSeqIncrementer" class="org.springframework.jdbc.support.incrementer.HsqlSequenceMaxValueIncrementer">
        <property name="dataSource" ref="dataSource" />
        <property name="incrementerName" value="public.agent_logs_seq" />
    </bean>

    <bean id="offerSeqIncrementer" class="org.springframework.jdbc.support.incrementer.HsqlSequenceMaxValueIncrementer">
        <property name="dataSource" ref="dataSource" />
        <property name="incrementerName" value="public.offers_seq" />
    </bean>
    <jdbc:embedded-database
        id="test"
        type="HSQL">
        <jdbc:script
            location="classpath:/create-ddl.sql" />
    </jdbc:embedded-database>   
</beans> 
```

以及create-ddl.sql的内容：

```
CREATE SEQUENCE public.agent_logs_seq; 
```

结果是

```
java.sql.SQLException: Sequence already exists in statement 
```

但如果我把它评论出来，我会得到

```
java.lang.AssertionError: Unexpected exception:
org.springframework.dao.DataAccessResourceFailureException:
    Could not obtain sequence value; nested exception is
java.sql.SQLException: Sequence not found:
    AGENT_LOGS_SEQ in statement [call next value for public.agent_logs_seq] 
```

我尝试使用序列的方式：

```
DataFieldMaxValueIncrementer incrementer =
    (DataFieldMaxValueIncrementer) context.getBean("logSeqIncrementer");
Integer logId = Integer.valueOf(incrementer.nextIntValue()); 
```

编辑：更改了上面的细节，以便使用正确的序列类。然而，它并没有解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T21:41:35.043

您已指定`org.springframework.jdbc.support.incrementer.HsqlMaxValueIncrementer`为类，但是，似乎 Spring 正在使用`HsqlSequenceMaxValueIncrementer`（在同一个包中）并创建一个 SEQUENCE，而不是一个 TABLE。

这`HsqlMaxValueIncrementer`是一个较旧的实现，适用于不支持 SEQUENCE 对象的数据库平台。这`HsqlSequenceMaxValueIncrementer`是更新的（Spring v. 2.5），是 HSQLDB 更有效的选择。这应该创建您指定的 SEQUENCE 对象，然后`NEXT VALUE FOR public.agents_logs_seq`在内部使用来检索下一个序列值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T08:54:05.230

我有一个类似的问题在[这里](https://stackoverflow.com/questions/11780493/missing-sequences-in-hsql-for-testing)提出。

提供了各种解决方案。H2 数据库似乎很有趣。最后我手动删除然后在脚本中创建序列。

# google-plus - google plus API 显示的活动少于站点

> ID：12002757
> 
> 赞同：1
> 
> 时间：2012-08-17T08:57:21.523
> 
> 标签：google-plus

我使用 maxResults=8 的 API 调用仅返回 6 个项目，而在 googleplus 站点搜索中显然有更多结果。
此外，当将最大结果设置为 20 时，我会得到更多结果。

那么为什么我只收到六件物品，而可能有八件？

我的电话：
[https://www.googleapis.com/plus/v1/activities?query=gamescon&key=mykey&orderBy=recent&maxResults=8&fields=items(actor(displayName),kind,object(attachments(content,image(type,url) ,url),content,objectType),published,title,url,verb](https://www.googleapis.com/plus/v1/activities?query=gamescon&key=mykey&orderBy=recent&maxResults=8&fields=items(actor(displayName),kind,object(attachments(content,image(type,url),url),content,objectType),published,title,url,verb) )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:30:09.813

Google+ API 保证响应中的项目数不会超过请求的数量`maxResults`，但不保证响应中有许多结果。如果某个`nextPageToken`字段在结果的第一页中可用，则将其用于另一页结果。

您需要`nextPageToken`在 JSON 响应中捕获该字段。获取此页面令牌，并使用它发出另一个请求`pageToken`。

例如，请求：

`https://www.googleapis.com/plus/v1/activities?query=gamescon&key=mykey&orderBy=recent&maxResults=8&fields=nextPageToken,items`

回复：

```
{
 "nextPageToken": "xyz",
 "items": [
   ...
 ]
} 
```

接受该`nextPageToken`响应并将其作为`pageToken`查询参数包含在您的下一个请求中。

`https://www.googleapis.com/plus/v1/activities?query=gamescon&key=mykey&orderBy=recent&maxResults=8&pageToken=xyz&fields=nextPageToken,items`

# c# - 在 WinForms 中刷新 GUI 更快

> ID：12002763
> 
> 赞同：1
> 
> 时间：2012-08-17T08:57:43.513
> 
> 标签：c#, winforms

当我移动滚动条时，我的应用程序会触发一个刷新屏幕上某些控件的事件。问题是刷新很慢。我`DoEvents`为此事件添加了方法，效果确实更好，但有时对于处理音频（延迟小于 100 毫秒，全屏重绘）是不够的。

我可以以某种方式加快刷新 UI 的速度吗？我发现了这样的东西：[http ://www.vbforums.com/showthread.php?315416-Ok-noobies-DoEvents-is-slow!!!-Here-s-are-faster-methods](http://www.vbforums.com/showthread.php?315416-Ok-noobies-DoEvents-is-slow!!!-Here-s-are-faster-methods)

但是看起来很复杂。有没有更简单的方法来实现这一点？

# android - Google Chrome for Android 远程网页调试

> ID：12002770
> 
> 赞同：8
> 
> 时间：2012-08-17T08:58:20.150
> 
> 标签：android, google-chrome, google-chrome-devtools

Gooday，我正在使用*三星 Galaxy S3* Android 手机尝试调试我正在开发的移动网站。我正在尝试利用谷歌已经开始通过 Chrome for Android 提供的远程调试。

我已经成功完成了这个演练： [https ://developers.google.com/chrome-developer-tools/docs/remote-debugging](https://developers.google.com/chrome-developer-tools/docs/remote-debugging)

当我单击检查时，弹出窗口类似于没有内容的 Chrome 开发工具窗口。我已经在多个站点上尝试过。我没有防火墙。没有激活防病毒软件，我已经重新启动，再次运行上述链接中的命令，甚至在朋友的*Galaxy S2*上尝试过。我仍然在多个站点上得到相同的东西；空的开发工具窗口。

有没有人经历过这个？有没有人有可能的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T18:27:30.237

请务必遵循[https://developers.google.com/chrome-developer-tools/docs/remote-debugging](https://developers.google.com/chrome-developer-tools/docs/remote-debugging)，包括故障排除提示：

*   确保您使用现代 Chrome 版本作为您的客户端浏览器。它应该与您正在调试的 Android Chrome 版本相同或更高。
*   在您的设备上，确认您有可用的开发人员选项，并打开 USB 调试。如果它正常工作且已连接，它将在您的设备上设置通知。
*   如果 USB 调试已打开，但未`about:inspect`显示您的设备，请检查是否已检查发现 USB 设备。如果是这样，请拔下设备并尝试在开发人员选项中撤销所有 USB 授权以重试。
*   如果这些没有帮助，您可以在加载不佳的页面上打开 Chrome 的开发工具并点击重新加载。控制台可能会显示错误，网络选项卡可能会显示与设备的 WebSocket 连接不成功。[两者都可能有助于调查您在http://new.crbug.com](http://new.crbug.com)提交的问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-27T13:28:54.063

1.  前往设备上的 App Store。
2.  搜索 Chrome
3.  单击更新按钮（假设它不是最​​新的）

这对我来说就是这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-24T12:50:01.433

对我来说非常相似的问题，似乎 adb 实际上并没有在命令行选项上检查你的拼写，很高兴接受：

```
adb forward tcp:9222 localbastract:chrome_devtools_remote 
```

当它真的想要时：

```
adb forward tcp:9222 localabstract:chrome_devtools_remote 
```

如果我能弄清楚在哪里报告这个错误，我会的，但他们似乎没有一个容易找到的错误跟踪器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-21T13:41:54.097

不要在手机上使用 chrome beta。这对我有用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-28T11:17:42.037

只需确保移动设备上的版本与桌面设备上的版本相同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-04T06:51:27.667

将 android chrome google 更新到更新版本。为我固定。连结 4

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-20T18:41:34.847

Chrome 仅在“adb devices”之后找到了我的手机，它启动了守护进程并在列表中显示了我的设备。没有更多的帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-01T08:31:11.133

我尝试了许多解决方案，但对我不起作用，所以这是我目前的解决方法......

在空白/空的开发工具窗口上按“ **Ctr+Shift+i** ”。这将打开**第二个**开发工具窗口。您将在控制台“Uncaught TypeError: Cannot read property 'addExtensions'”和这两个链接之一的右侧看到错误：

A) "VM45:72" => 运气不好。关闭第二个窗口，然后重试。

B）“ **（程序）：72** ”=>就是这样。单击链接“（程序）：72”，第一个调试窗口将再次工作！

可能需要 1 到 10 次才会出现“(program):72”

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-03T08:02:31.393

尝试不同的 USB 端口。这可能是 Chrome 的问题，但在某些情况下，它与驱动程序\计算机配置或硬件故障有关。不同的USB端口解决了我的问题

# java - 如何签署包含另一个 jar 文件的 jar

> ID：12002772
> 
> 赞同：2
> 
> 时间：2012-08-17T08:58:35.107
> 
> 标签：java, jakarta-ee, applet, cryptography

我想签署一个包含另一个 jar 文件和一些类文件的 jar 文件。实际上我知道如何签署一个 jar 文件并且我做到了，但是在这里我有一个小程序文件，其中我使用了 apache 的 HttpClient，但是当我从浏览器运行它时，它给出了一个错误 org.apache.commons.httpclient 方法没有找到。所以我该怎么做？当我在小程序查看器上运行此小程序时，它会运行，但从浏览器无法运行。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T09:19:50.243

如果您只需要执行已签名的代码，则不应将 JAR 文件包含到您的小程序中 - 相反，您应该仅将要包含的 Jar 中的类文件包含到您的小程序中。

如果您之后对代码进行签名，jar 中的类文件也会被签名，因此应该可以在您的 applet 中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:18:53.067

我认为以下步骤应该会有所帮助：

*   签署您在项目中使用的所有 jar 文件

*   确保所有库 jar 文件都包含在最终的应用程序 jar 文件中

    主 jar 清单文件应包含`Class-Path`带有 jar 文件相对路径的键，包含在主 jar 文件中。

*   构建主应用程序后，对主应用程序 jar 文件进行签名

# c# - 使用 Abort() 停止多线程时冻结 GUI？

> ID：12002773
> 
> 赞同：1
> 
> 时间：2012-08-17T08:58:35.463
> 
> 标签：c#, multithreading

我有一些代码如下：

在**表格**上：

```
 List<WebRequestUri> lwebrequest = new List<WebRequestUri>();

    public Form1()
    {
        InitializeComponent();
    }

    private void Start_Click(object sender, EventArgs e)
    {
        Thread thread = new Thread(new ParameterizedThreadStart((object context) =>
            {
                DoWork();
            }));
        thread.IsBackground = true;
        thread.Start();            
    }

    void DoWork()
    {
        lwebrequest = new List<WebRequestUri>();
        for (int i = 0; i < 100; i++)
        {
            WebRequestUri wp = new WebRequestUri();
            wp.Start();
            lwebrequest.Add(wp);
        }
    }

    private void Stop_Click(object sender, EventArgs e)
    {                  
        for (int i = 0; i < lwebrequest.Count; i++)
        {               
            lwebrequest[i].Abort();
        }
    } 
```

工人阶级：

```
class WebRequestUri
{
    Thread thread = null;
    WebRequest webRequest = null;
    WebResponse webResponse = null;
    StreamReader sr = null;

    public void Start()
    {
        thread = new Thread(new ParameterizedThreadStart((object context) =>
            {
                SendRequest();
            }));
        thread.IsBackground = true;
        thread.Start();
    }

    public void Abort()
    {            
        if (webResponse != null) webResponse.Close();
        if (webRequest != null) webRequest.Abort();
        if (thread != null) thread.Abort();            
    }

    public void SendRequest()
    {
        webRequest = WebRequest.Create("http://google.com");

        webRequest.ContentType = "application/x-www-form-urlencoded";
        webRequest.Method = "GET";         
       try
        {
            webRequest.BeginGetResponse(new AsyncCallback(GetResponseCallback), webRequest);
        }
        catch (WebException)
        {
        }
    }

    private void GetResponseCallback(IAsyncResult asynchronousResult)
    {
        try
        {
            webRequest = (HttpWebRequest)asynchronousResult.AsyncState;
            webResponse = (HttpWebResponse)webRequest.EndGetResponse(asynchronousResult);
            sr = new StreamReader(webResponse.GetResponseStream());
            string response = sr.ReadToEnd();
            Console.Write(response);
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
        }
    }
} 
```

当我尝试单击停止按钮时，我遇到了一个问题。我看到我的表格被阻止了。我不确定我的停止功能是对还是错。你能给我一些建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:13:22.830

看起来您正在尝试同步中止可能已经启动的 Web 请求。这些请求的处理可能正在进行中，所以我怀疑此时中止调用可能会挂起。如果您只想调用中止，我会考虑在另一个工作线程上执行此操作，以便 GUI 至少可以返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:48:05.680

其他人已经提出了挂起的可能原因。然而，更重要的是 Thread.Abort 的实际使用。

这被认为[是一件非常糟糕的事情](http://msmvps.com/blogs/peterritchie/archive/2007/08/22/thead-abort-is-a-sign-of-a-poorly-designed-program.aspx)，你不会相信它会导致大量的问题和细微的错误。

好消息是您通常并不需要它，异步任务的过早完成可以而且应该由应用程序本身处理。考虑您的用例，例如：

你想通过调用 abort 来完成什么？您是否要中止请求？你不能，因为它已经在进行中。不管对方是否有人在等它，它都会到达目的地并被处理。但是，如果您试图避免不必要的计算 - 您可以完全控制。您可以在名为“abortRequested”的类中保留一个布尔成员，Abort 方法只需将其设置为“true”。您要中止的方法需要不时检查该成员，以决定它是否应该继续执行。

如果您愿意，我们可以进一步分析您的用例。

**编辑**：它看起来像这样：

```
bool stopped = false; // can make this thread safe if you want.

// Assuming you have a computation in a loop.
compouteAsynch(){

   for(var workItme in workItems){
     if(!stopped){
      dostuff(workItem)
     }
   }
}

void stop(){
   stopped = true; // work will not stop immediately. Only in the next iteration.
} 
```

您可以根据需要控制“停止”采样的粒度。但是，您必须知道不可能在任何地方对其进行采样。例如-当线程对数据库执行查询时，您无法检查它。不过，这应该足够好了。

# linq-to-entities - 如何将常量对象与实体查询联合起来？

> ID：12002776
> 
> 赞同：1
> 
> 时间：2012-08-17T08:58:45.300
> 
> 标签：linq-to-entities

我正在寻找与以下 SQL 等效的 linq to entity 查询。

```
select null, '<None>'
union select CustomerId, Customer from Customers 
```

然后，我会将生成的对象列表（可以是显式类或匿名类的实例）绑定为组合框的列表源。我不需要 Customer 实体类的所有字段，但如果生成的对象列表是此类的实例，而不是“存根”类，这不会是一个大问题，但显然会有一些内存浪费。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:14:39.470

在内存中执行：

```
Ext.ToEnumerable(new {CustomerId = 0, Name = "<none>"})
    .Concat(db.Customers
        .Select(c => new {CustomerId = c.CustomerId, Name = c.Name}).ToList()); 
```

`ToEnumerable`一个不错的小实用功能在哪里：

```
public static class Ext
{
    public static IEnumerable<T> ToEnumerable<T>(params T[] items)
    {
        return items;
    }
} 
```

请注意，我使用`CustomerId = 0`(not `null`) 来确保匿名类型匹配。`CustomerId`将命名类型与两个字段 (和)一起使用会更好`Name`。

# android - 超时后CPP调用函数

> ID：12002778
> 
> 赞同：0
> 
> 时间：2012-08-17T08:58:59.387
> 
> 标签：android, c++, c, java-native-interface

我正在使用 CPP，我想实现超时机制。
表单示例，名为“foo()”的函数，它只会在超时后触发一个函数执行并返回。

为什么我需要这个？

我有一个 Android 应用程序，它在该库中使用一个 CPP 库（使用 JNI 接口），有一些函数需要时间来处理。我不能在单独的线程中调用这些函数（从 java 或 CPP 作为 lib 限制），因此我在 android 应用程序中得到 ANR。

所以我将做什么，我将使用 JNI 调用 CPP 层中的一个函数，该函数将启动一个计时器并返回，以便 android 中的 UI 线程不会给出 ANR，当这个计时器超时时，它会调用该计时函数以及何时处理完成后会通知java层。

我应该如何实现这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:17:56.407

在您的本机 C++ 代码中，您也可以使用 POSIX 计时器和任何其他 POSIX 函数：

[http://www.kernel.org/doc/man-pages/online/pages/man2/timer_create.2.html](http://www.kernel.org/doc/man-pages/online/pages/man2/timer_create.2.html)

为了促进许多标准任务（定时器、线程、套接字等），您可能需要考虑使用[boost](http://www.boost.org/)库。不过，这需要一点研究。没有官方的 Android 端口的 boost。但是有说明如何构建提升，例如本书[http://www.wowebook.be/book/android-ndk-beginners-guide/#](http://www.wowebook.be/book/android-ndk-beginners-guide/#)

# javascript - jQuery 未来元素选择器

> ID：12002783
> 
> 赞同：2
> 
> 时间：2012-08-17T08:59:47.110
> 
> 标签：javascript, jquery, jquery-selectors

我做了一个简单的选择器，例如：

```
$('div').eq(0).selector;// returns     "div.slice(0,1)"
$($('div').eq(0).selector);// would not work... 
```

如果`eq(0)`不在那里，它会起作用，因为它没有切片，但有一个适当的可用选择器。

我的问题是，我想知道使用`.selector`, 不是很有帮助，而且我还没有尝试过其他过滤器等...

```
$('div').children().selector// returns "div.children()" 
```

我正在使用 jQuery 1.7.1，`.selector`当它返回甚至不起作用的东西时，我真的不明白它的用途是什么。

我正在尝试制作一个插件，但我想使用`.selector`来获取将来添加的元素（即时）。

**更新**

```
$.fn.myplugin(function (){
  $(this.selector)//select future elements...
}) 
```

或者有另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:05:28.213

Use selector expressions

```
$('div:eq(0)').selector; // returns 'div:eq(0)' 
```

More [here](http://api.jquery.com/eq-selector/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:10:56.840

您必须监听 DOM 更改，为此请参阅[此答案](https://stackoverflow.com/questions/2844565/is-there-a-jquery-dom-change-listener)。

或者

您可以使用每 n 秒检查一次匹配的根元素的更改`setInterval`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T09:03:17.883

如果您正在制作一个插件，您通常会做的是为选择器提供一个选项，用于刷新您的元素列表。此选项也可以向最终用户公开，因此可以对其进行自定义。

```
$('div').myPlugin({
    elements: 'ul > li'
}); 
```

* * *

如果需要*检测*未来元素以**绑定事件，请使用**[.on()](http://api.jquery.com/on/)使用事件委托。

长话短说，您实际上在容器上定义了一个事件处理程序。如果最初接收事件的元素与指定的选择器匹配，则该事件将冒泡到容器并被执行。

```
<div id="container">
    <span>Some text</span>
    <button>Click me</button>
</div>

$('#container').on('click', 'button', function() { ... }); 
```

这将在元素上绑定一个处理程序，如果单击`#container`一个元素，将执行事件处理程序......但也适用于之后添加到 DOM 的任何元素。`<button>``<button>`

# javascript - iframe：从 iframe 内的子元素访问父级

> ID：12002784
> 
> 赞同：1
> 
> 时间：2012-08-17T08:59:47.547
> 
> 标签：javascript

我在一个页面中有一个 iframe，它的 src 设置为同一本地机器上的一个文件（不是跨域）。

所以我有一个看起来像这样的页面：

```
<html>
 <head/>
 <body><iframe id="something" src="somepage.html"/></body>
</html> 
```

iframe里面有一些内容

```
 <html>
    <head/>
     <body>
      <li>
        <ul>stuff</ul>
      </li>
     </body>
    </html> 
```

我的问题是，我有一个变量（在我的索引页面中）当前指向`var element = <ul>stuff</ul>`iframe 内部的元素。

从这个变量中，我希望能够访问父 iframe 并获取 id 'something'。

我一直在尝试一些 jquery 使用 find 没有运气

```
$(element).find('iframe') 
```

而且我想知道我哪里出错了......我已经用谷歌搜索了其他解决方案，但它们都与在 iframe 之外寻找有关，我想我在里面寻找！还有其他人可以帮助阐明一些问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:07:14.707

At first, it's a good practice to set name for iframe if you want to access some data in it. After that to access iframe's DOM you can use:

```
$('ul', window.frames['iframe_name'].document); 
```

To access global variables

```
alert(window.frames['iframe_name'].some_global_var_or_function_of_iframe) 
```

If you want to get some parent data inside iframe:

```
$('selector', parent.document) // for DOM
alert(parent.some_global_var_or_function_of_parent_window) 
```

**EDIT** So in your case just use:

```
$('iframe', parent.document).filter(function(iframe){
    // you can compare iframes like this
    return iframe.getAttribute('src') == location.href
}).attr('id') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T09:18:17.997

如果没有类似名称的内容，似乎很难找到 iframe 元素的 id。

但是假设您知道 iframe 中的 html 文件的名称（“somepage.html”），这看起来很自然，您可以这样做来获取父文档中包含 iframe 的元素：

```
var $matching = $(parent.document).find('iframe').filter(function(){
    var srcTokens = this.src.split('/');
    return srcTokens[srcTokens.length-1]=='somepage.html';
}); 
```

这是我用来测试的“somepage.html”文件，将 id 记录在控制台中：

```
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        </head>
     <body>
      <li>
        <ul>stuff</ul>
      </li>
      <script>
          var $matching = $(parent.document).find('iframe').filter(function(){
              var srcTokens = this.src.split('/');
              return srcTokens[srcTokens.length-1]=='somepage.html';
          });
          console.log($matching.attr('id'));
          </script>
     </body>
    </html> 
```

编辑：正如 Serjio 所见，`location.href`如果您不知道 html 文件的名称，则可以使用。

# android - 订阅示例缺少对 purchaseToken 的 JSON 解析

> ID：12002788
> 
> 赞同：4
> 
> 时间：2012-08-17T09:00:07.700
> 
> 标签：android, in-app-billing, subscription

我最近一直在研究 In-App-Billing v2 的代码。并发现了一些问题。我之前已经实施了应用内计费，但​​希望升级到订阅。在我的研究中，我发现[购买令牌](http://developer.android.com/guide/google/play/billing/billing_subscriptions.html#token)与成功购买订阅的 JSON（签名数据）一起收到。

演示成功验证签名的**Security.java**解析 Json，但是这里缺少对元素 Purchase-token 的解析。

```
 JSONObject jElement = jTransactionsArray.getJSONObject(i);
            int response = jElement.getInt("purchaseState");
            PurchaseState purchaseState = PurchaseState.valueOf(response);
            String productId = jElement.getString("productId");
            String packageName = jElement.getString("packageName");
            long purchaseTime = jElement.getLong("purchaseTime");
            String orderId = jElement.optString("orderId", "");
            String notifyId = null;
//          purchaseToken part that I have added
            String purchaseToken = jElement.optString("purchaseToken", ""); 
```

我还没有运行代码，因为订阅没有测试产品 ID 并且需要实际购买。我想知道的是这里解析这个令牌，或者提供的示例代码是否正确实现了这部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T17:01:58.377

文森特，这是正确的。如果需要验证 purhcaseToken，则必须修改 Security.java 以及 BillingService.java 和 ResponseHandler.java。

这里是：

安全.java：

```
public PurchaseState    purchaseState;
public String           notificationId;
public String           productId;
public String           orderId;
public long             purchaseTime;
public String           developerPayload;
public String           purchaseToken;
public String           packageName;

public VerifiedPurchase(PurchaseState purchaseState, String notificationId, String productId, String orderId, long purchaseTime,
        String developerPayload, String purchaseToken, String packageName) {
    this.purchaseState = purchaseState;
    this.notificationId = notificationId;
    this.productId = productId;
    this.orderId = orderId;
    this.purchaseTime = purchaseTime;
    this.developerPayload = developerPayload;
    this.purchaseToken = purchaseToken;
    this.packageName = packageName;
    }
} 
```

现在在 VerifyPurchase：

```
String developerPayload = jElement.optString("developerPayload", null);
// VK: Changes to parse the purchaseToken
String purchaseToken = jElement.optString("purchaseToken", null); 
```

计费服务.java：

在 purchaseStateChanged 中，修改：

```
ResponseHandler.purchaseResponse(this, vp.purchaseState, vp.productId, vp.orderId, vp.purchaseTime, vp.developerPayload, vp.purchaseToken, vp.packageName); 
```

ResponseHandler.java：

最后，将 purchaseResponse 的定义更改为：

```
public static void purchaseResponse(final Context context, final PurchaseState purchaseState, final String productId, final String orderId, final long purchaseTime, final String developerPayload, final String purchaseToken,final String packageName) 
```

在这里您可以进行与应用相关的逻辑更改，因为您在这里将拥有 purchaseToken。

如果一切正常，请接受！

# c# - Silverlight Componentone flex grid -- 合并一行中的所有列

> ID：12002790
> 
> 赞同：0
> 
> 时间：2012-08-17T09:00:11.503
> 
> 标签：c#, silverlight, c#-4.0, componentone, c1flexgrid

我在使用 silverlight5.0 Component-One flex 网格时有一个要求。我的要求是，对于单行，我需要合并所有列。

我附上了需求图片。请帮助我.. 谢谢。

![在此处输入图像描述](../Images/1b925927cb86d92e4de4bef199c2b673.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:21:14.267

请在官方支持论坛中提出这个问题：http: [//our.componentone.com/groups/silverlight/flexgrid-for-silverlight/forum/](http://our.componentone.com/groups/silverlight/flexgrid-for-silverlight/forum/) 它是免费的

# javascript - 将网络摄像头快照直接发送到 amazon s3

> ID：12002794
> 
> 赞同：2
> 
> 时间：2012-08-17T09:00:22.577
> 
> 标签：javascript, amazon-s3, webcam

我正在编写一个 javascript 代码，该代码记录来自网络摄像头的图像并通过 REST API 将它们直接发送到亚马逊存储。我检查了一些 JS 网络摄像头插件，例如 JQuery 网络摄像头插件 ( [http://www.xarg.org/project/jquery-webcam-plugin/](http://www.xarg.org/project/jquery-webcam-plugin/) ) 和 JPEGCam ( [http://code.google.com/p/jpegcam/](http://code.google.com/p/jpegcam/) ) ，但我无法让他们将压缩数据作为自定义格式的 REST 查询发送。有谁知道如何：

*   从 javascript 从网络摄像头捕获图像
*   压缩它
*   直接从javascript发送到亚马逊s3？

我知道可以获取原始图像数据并在 javascript 中手动压缩它，但我希望有一种更高效且更易于使用的本地方法......

# iphone - iPhone - 出现键盘时工具栏向上移动

> ID：12002796
> 
> 赞同：1
> 
> 时间：2012-08-17T09:00:38.887
> 
> 标签：iphone, ios, keyboard, toolbar

我在 NavigationController 中添加了一个带有 TextField 的工具栏

```
- (void)viewDidLoad
{
    // ...

    [self.navigationController setToolbarHidden:NO animated:YES];

    UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(0, 2, 240, 36)];
    textField.placeholder = @"Leave your comment here...";
    textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;

    UIBarButtonItem *commentTextFieldBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:textField];

    self.toolbarItems = [NSArray arrayWithObject:commentTextFieldBarButtonItem];
} 
```

当用户单击 TextField 时，我希望工具栏随键盘向上移动。我试过[这个方法](https://stackoverflow.com/a/2422116/928315)。工具栏向上移动，但变成了空的。难道我做错了什么？请帮帮我，谢谢！！

![屏幕截图 1 - 之前](../Images/7c25546bd2e4a22f08b516fb4867ab13.png)

![屏幕截图 2 - 之后](../Images/4d8e143b64a56f54e508b7aded3aaa37.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T09:17:39.480

## 最好的解决方案是设置`inputAccessoryView`为`UITextField`这样：

```
#pragma mark - UITextFieldDelegate

-(void)textFieldDidBeginEditing:(UITextField *)textField{
   // Call the createInputAccessoryView method we created earlier.
   // By doing that we will prepare the inputAccView.

   UIView *inputAccView = [self createInputAccessoryView];
      // Now add the view as an input accessory view to the selected textfield.
   [textField setInputAccessoryView:inputAccView];  
} 
```

* * *

```
-(UIView *)createInputAccessoryView{
  // Create the view that will play the part of the input accessory view.
  // Note that the frame width (third value in the CGRectMake method)
  // should change accordingly in landscape orientation. But we don’t care
  // about that now.
  UIView *inputAccView = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, 320.0, 40.0)];
  // Set the view’s background color. We’ ll set it here to gray. Use any color you want.
  [inputAccView setBackgroundColor:[[UIColor blackColor] colorWithAlphaComponent:0.20f]];
  // We can play a little with transparency as well using the Alpha property. Normally
  // you can leave it unchanged.
  [inputAccView setAlpha: 0.8];

  UIButton *btnDone = [UIButton buttonWithType:UIButtonTypeCustom];
  [btnDone setFrame:CGRectMake(240.0, 6.0f, 70.0f, 28.0f)];
  [btnDone setTitle:@"Done" forState:UIControlStateNormal];
  [btnDone setBackgroundColor:[UIColor blackColor]];
  [btnDone.layer setCornerRadius:6.0f];
  [btnDone setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
  [btnDone addTarget:self action:@selector(btnDoneForKeyboardAction:) forControlEvents:UIControlEventTouchUpInside];
  // Now that our buttons are ready we just have to add them to our view.
  [inputAccView addSubview:btnDone];

  return inputAccView;
} 
```

* * *

### 另一种解决方案：

当视图控制器出现时，我们希望收到键盘事件的通知，以便我们可以显示工具栏以响应键盘的出现和消失：

```
- (void)viewWillAppear:(BOOL)animated {
[super viewWillAppear:animated];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil];
}

- (void)viewWillDisappear:(BOOL)animated {
[super viewWillDisappear:animated];

[[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillShowNotification object:nil];
[[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillHideNotification object:nil];
} 
```

为了响应键盘的出现，我们可以从屏幕底部向上移动工具栏：

```
- (void)keyboardWillShow:(NSNotification *)notification {
   //set your toolbar frame here for upper side
} 
```

当键盘关闭时，我们做相反的事情：

```
- (void)keyboardWillHide:(NSNotification *)notification {
   //set your toolbar frame here for down side
} 
```

# integer - 十进制数的整数值

> ID：12002798
> 
> 赞同：-2
> 
> 时间：2012-08-17T09:01:03.300
> 
> 标签：integer, decimal

需要将 8 位数字转换为

(d7 d6 d5 d4 d3 d2 d1 d0) 其中 di : i = 0, 1, 2, 3, 4, 5, 6, 7 是 10i 的乘数 : i = 0, 1, 2, 3, 4, 5, 6、7。

我对如何使用这种格式进行转换感到困惑

(d7 d6 d5 d4 d3 d2 + 100) = 整数值。

数字是 8 位数字 = 10192517

我不确定是否需要将所有数字分别乘以 10 的幂？所以 10^1 + 10^0 等等……

任何帮助将不胜感激和接受。我只需要了解它，不需要答案。

编辑：出于上下文目的，它要求我计算 8 位学生编号的整数值 (uID)。一旦我完成了，我就必须转换成一个 32 位补码序列，很抱歉造成混淆......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:16:02.983

根本不清楚你想问什么。我已经在评论中提出了几个澄清要求，但你不会回答我的问题。相反，你不断重复同样的公式，但不是很清楚。据我所知，这可能是您问题的解决方案？

```
>>> n = 10192517
>>> n/100 + 100
102025 
```

即 101925 + 100 = 102025。

# c# - Linq-to-SQL 数据库文件为空

> ID：12002802
> 
> 赞同：0
> 
> 时间：2012-08-17T09:01:09.760
> 
> 标签：c#, linq-to-sql, sql-server-ce

我是 stackoverflow 的新手，我搜索了整个网站和 msdn，但一无所获。我希望你能帮帮我！

我想在一个`.sdf`文件中有一个 Linq-to-SQL 数据库。于是我在ORM设计器中为Linq-to-SQL设计了数据库sheme，并编写了如下代码：

```
DataShemeDataContext context = new DataShemeDataContext("Data Source=database.sdf");
if (!context.DatabaseExists())
  context.CreateDatabase();
Console.ReadLine(); 
```

我的问题如下：

*   当我运行程序并通过按键退出时`Enter`，一切都很好
*   但是如果我单击控制台窗口顶部的“X”按钮，数据库文件只有 20kb 大小（而不是 84kb）并且它是空的。

使用这条线：

```
context.SubmitChanges(); 
```

没什么区别。

我希望你能帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:08:49.117

用 using 包围您的代码：

```
using(DataShemeDataContext context = new DataShemeDataContext("Data Source=database.sdf"))
{
    if (!context.DatabaseExists())
        context.CreateDatabase();
}
Console.ReadLine(); 
```

这样，您可以确定您的上下文已正确处理。

# sql - 使用 VBA/ADO 更新 Excel 工作表

> ID：12002805
> 
> 赞同：4
> 
> 时间：2012-08-17T09:01:27.417
> 
> 标签：sql, vba, excel, ado

当我执行这个函数时，我得到一个运行时错误，“操作必须使用可更新的查询”。是什么原因造成的？

```
Function updateConfigFile(strQuery As String)

Dim cnn As ADODB.Connection         
Dim objMyCmd As ADODB.Command

Set cnn = New ADODB.Connection
Set objMyCmd = New ADODB.Command

constConfigFile = "MyWorkbookName"

With cnn

    .Provider = "Microsoft.Jet.OLEDB.4.0"
    .ConnectionString = "Data Source=" & ActiveWorkbook.Path & constConfigFile & ";" & _
        "Extended Properties=""Excel 8.0;HDR=Yes;IMEX=1"";"
    .Open

End With

strQuery = "update [test$] Set [test]='Hello' WHERE [Test]='h'"

objMyCmd.CommandType = adCmdText
objMyCmd.CommandText = strQuery
objMyCmd.ActiveConnection = cnn

objMyCmd.Execute

Set objMyCmd = Nothing
Set cnn = Nothing

End Function 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T09:53:01.943

从连接字符串中删除 IMEX=1。这对我行得通。

```
.ConnectionString = "Data Source=" & ActiveWorkbook.Path & constConfigFile & ";" & _
    "Extended Properties=""Excel 8.0;HDR=Yes;"";" 
```

# c# - 返回错误并抛出异常

> ID：12002811
> 
> 赞同：7
> 
> 时间：2012-08-17T09:01:42.523
> 
> 标签：c#, exception

如果遇到特定错误并在这种情况下返回对象，我需要抛出异常。

所以我想做这样的事情：

```
if(error)
return obj;
throw new FaultException(string.Format("Error found with ID={0}", ID)) 
```

这显然不起作用，因为 return 会阻止抛出异常。

谁能建议实现这一目标的最佳方法。我可以以某种方式在异常中传递对象吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T09:03:32.770

通常，您会创建自己的异常类，其中包含您的所有数据。但我看到`FaultException`这意味着 WCF，并且已经有`FaultException<T>`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-17T09:03:15.123

在某些方法的上下文中，抛出异常和返回结果是互斥的。

因此，如果您想为客户端代码提供附加信息，您可以**使用自定义属性实现****自定义异常**（从`Exception`类派生）。

 **```
[Serializable]
public class MyException : Exception
{
    public MyCustomObject CustomObject { get; private set; }

    public MyException(MyCustomObject customObject)
    {
        CustomObject = customObject;
    }

    public MyException(string message, MyCustomObject customObject)
        : base(message)
    {
        CustomObject = customObject;
    }

    public MyException(string message, Exception inner, MyCustomObject customObject)
        : base(message, inner)
    {
        CustomObject = customObject;
    }

    protected MyException(
        SerializationInfo info,
        StreamingContext context)
        : base(info, context)
    {
        // TODO: Implement serializable stuff.
    }

    #region Overrides of Exception

    public override void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        // TODO: Implement serializable stuff.
        base.GetObjectData(info, context);
    }

    #endregion
} 
```

现在你可以扔了！

```
throw new MyException(obj); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-17T09:03:26.203

你是正确的，你不能既返回一个对象又抛出一个异常。如果这是您的要求，我建议您尝试修改它。

但我会说你走在正确的轨道上，提出一个包含返回对象的例外。捕获异常并从中获取“返回”值。

**编辑：不久前**我发现了一个关于[throwing exception 与 return error code](https://stackoverflow.com/questions/1110069/throw-exception-vs-return-error-within-a-try-catch-finally)的非常有趣的讨论。看看这个。我仍然认为您最好选择其中一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T09:05:31.393

如果你想从扩展中获取上下文，把它放在里面[`Exception.Data`](http://msdn.microsoft.com/en-us/library/system.exception.data.aspx)或者创建你自己的异常类并添加一个成员（如果需要序列化异常，这会更好）。

但是，如果您重构代码和/或重新考虑要求以便您根本不需要这样做，它可能会更好（但不能在没有上下文的情况下判断）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T09:06:57.203

您可以将**异常属性**添加到任何类型`obj`并返回`obj`关联的异常（如果抛出异常），然后检查此方法的调用代码中是否存在异常，或者您要返回的任何位置`obj`。

有点凌乱，但可能适合您描述的设置。**

# silverlight - Silverlight 按钮背景 ImageBrush

> ID：12002813
> 
> 赞同：0
> 
> 时间：2012-08-17T09:01:53.467
> 
> 标签：silverlight, xaml, background-image, onmouseover, imagebrush

我有一张图片

[http://savepic.su/2317454.htm](http://savepic.su/2317454.htm)

但是我尝试将按钮的背景设置为

```
<UserControl x:Class="System.Windows.Controls.UserControl" xmlns="http://schemas.microsoft.com/client/2007" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
<Button x:Name="plus_button" Width="30" Height="25">
    <Button.Background>
        <ImageBrush AlignmentY="Top" Stretch="None" ImageSource="plus_unhover.jpg"></ImageBrush>
    </Button.Background>
</Button>
</UserControl> 
```

我在所有浏览器中都有
[http://savepic.su/2309262.htm](http://savepic.su/2309262.htm)
那些图像...
如何将普通图像设置为按钮的背景？

以及如何将另一个图像设置为 xaml 中此按钮的背景 onmouseover 事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T07:44:53.310

我使用按钮样式，如下所示：

```
<Style x:Key="minusButtonStyle" TargetType="Button">
 <Setter Property="ToolTipService.ToolTip" Value="Уменьшить масштаб графика, Ctrl + вниз" />
 <Setter Property="Width" Value="35"/>
 <Setter Property="Template">
  <Setter.Value>
   <ControlTemplate TargetType="Button">
    <Grid>
     <vsm:VisualStateManager.VisualStateGroups>
      <vsm:VisualStateGroup x:Name="CommonStates">
       <vsm:VisualState x:Name="Normal"/>
       <vsm:VisualState x:Name="MouseOver">
        <Storyboard>
         <DoubleAnimation Duration="0" Storyboard.TargetName="hoverImage" Storyboard.TargetProperty="Opacity" To="1"/>
        </Storyboard>
       </vsm:VisualState>
       <vsm:VisualState x:Name="Pressed">
        <Storyboard>
         <DoubleAnimation Duration="0" Storyboard.TargetName="pressedImage" Storyboard.TargetProperty="Opacity" To="1"/>
        </Storyboard>
       </vsm:VisualState>
       <vsm:VisualState x:Name="Disabled">
        <Storyboard>
         <DoubleAnimation Duration="0" Storyboard.TargetName="unactiveImage" Storyboard.TargetProperty="Opacity" To="1"/>
        </Storyboard>
       </vsm:VisualState>
      </vsm:VisualStateGroup>
      <vsm:VisualStateGroup x:Name="FocusStates">
       <vsm:VisualState x:Name="Focused"/>
       <vsm:VisualState x:Name="Unfocused" />
      </vsm:VisualStateGroup>
     </vsm:VisualStateManager.VisualStateGroups>
     <Border x:Name="normalImage" Opacity="1">
      <Border.Background>
       <ImageBrush AlignmentY="Top" Stretch="None" ImageSource="Images/minus_unhover.png" Opacity="1.0"></ImageBrush>
      </Border.Background>
     </Border>
     <Border x:Name="hoverImage" Opacity="0">
      <Border.Background>
       <ImageBrush AlignmentY="Top" Stretch="None" ImageSource="Images/minus_hover.png" Opacity="1.0"></ImageBrush>
      </Border.Background>
     </Border>
     <Border x:Name="pressedImage" Opacity="0">
      <Border.Background>
       <ImageBrush AlignmentY="Top" Stretch="None" ImageSource="Images/minus_pressed.png" Opacity="1.0"></ImageBrush>
      </Border.Background>
     </Border>
     <Border x:Name="unactiveImage" Opacity="0">
      <Border.Background>
       <ImageBrush AlignmentY="Top" Stretch="None" ImageSource="Images/minus_unactive.png" Opacity="1.0"></ImageBrush>
      </Border.Background>
     </Border>
     <ContentPresenter x:Name="contentPresenter" Content="{TemplateBinding Content}"/>
    </Grid>
   </ControlTemplate>
  </Setter.Value>
 </Setter>
</Style> 
```

并将此样式应用于按钮：

```
<Button x:Name="minus_button" Style="{StaticResource minusButtonStyle}" ClickMode="Release"></Button> 
```

我认为这是最好的解决方案，因为您可以在其他状态下显示您想要的内容并控制可见效果。

# haskell - 如何处理 Gtk2Hs 中的应用程序状态

> ID：12002814
> 
> 赞同：11
> 
> 时间：2012-08-17T09:01:52.983
> 
> 标签：haskell, state-monad, gtk2hs

尝试学习使用 Gtk2Hs 编写应用程序时，我在弥合事件驱动的 Gtk2HS 和我的模型的持久状态之间的差距时遇到了困难。所以为了简化，假设我有这个简单的应用程序

```
module Main where

import Graphics.UI.Gtk
import Control.Monad.State

main = do
    initGUI
    window <- windowNew
    button <- buttonNew
    set button [buttonLabel := "Press me"]
    containerAdd window button

    -- Events
    onDestroy window mainQuit
    onClicked button (putStrLn ---PUT MEANINGFUL CODE HERE---)

    widgetShowAll window
    mainGUI 
```

我的应用程序的状态是按钮被按下了多少次。看到其他类似[这样](https://stackoverflow.com/questions/5293898/how-to-pass-state-between-event-handlers-in-gtk2hs)的帖子，他们依赖于 MVar 或 IORef，这对我来说似乎并不令人满意，因为将来我可能会想要重构代码，以便状态存在于自己的上下文中。

我认为解决方案应该使用 State monad 使用 step 函数，例如：

```
State $ \s -> ((),s+1) 
```

但我不确定其中的含义，如何在上面的代码中做到这一点，或者即使那个 monad 是我问题的正确解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T09:45:24.280

基本上有两种方法：

1.  使用某种指针。这是您的`IORef`方法`MVar`。如果您愿意，可以将其隐藏在类似`MonadState`- 的界面后面：

    ```
    newtype GtkT s m a = GtkT { unGtkT :: ReaderT (IORef s) m a } deriving (Functor, Applicative, Monad, MonadIO)
    runGtkT = runReaderT . unGtkT

    instance MonadIO m => MonadState s (GtkT s m) where
        get   = GtkT (ask >>= liftIO . readIORef)
        put s = GtkT (ask >>= liftIO . flip writeIORef s) 
    ```

2.  拉一个“[控制反转](http://blog.sigfpe.com/2011/10/quick-and-dirty-reinversion-of-control.html)”风格的把戏。编写一个打印数字的回调，然后用打印更高数字的新回调替换自身。

如果您尝试使用`State`或`StateT`直接使用，您将度过一段糟糕的时光。

# ajax - Ajax 表单在页面上有效，但在块上无效

> ID：12002819
> 
> 赞同：1
> 
> 时间：2012-08-17T09:02:04.030
> 
> 标签：ajax, drupal

我有一个构建使用 ajax 的表单的模块。

如果我使用 hook_menu() 创建一个页面来显示表单，那么一切都很好.. ajax 正在工作，等等。

```
function models_quicksearch_menu() {
$items = array();

  // Repopulate a dropdown based on form state.
  $items['examplex_dropdown'] = array(
    'title' => 'Dependent dropdown',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('quicksearch_form'),
    'access callback' => TRUE,
    'weight' => 4,
  );

  return $items;
} 
```

如果我创建一个块来显示表单，则表单的 ajax 部分不起作用：

```
function models_quicksearch_block_view($delta = '') {
  $block = array();
  switch ($delta) {
    case 'quicksearch_form':
  $block['content'] = drupal_get_form('quicksearch_form');
  break;
}
return $block;
} 
```

当我使用 block 方法时，ajax.js 一开始没有加载，所以我加载了 js：

```
function models_quicksearch_process(&$variables, $hook) {
    drupal_add_library('system', 'drupal.ajax');
    drupal_add_library('system', 'jquery.form');
} 
```

但是，如果我使用块方法，则 ajax 部分不起作用。似乎块版本的表单元素中缺少“ajax-processed”类。在“页面”版本中，有“ajax-processed”。

我正在使用 Drupal 7。

关于如何解决这个问题的任何想法？谢谢你。

编辑：看来问题是我直接在 html.tpl.php 中打印块。如果我在 page.tpl.php 中打印它就可以了。

# c# - 从另一个视图更新视图

> ID：12002820
> 
> 赞同：0
> 
> 时间：2012-08-17T09:02:08.730
> 
> 标签：c#, .net, .net-4.0, richtextbox

我想通过事件从另一个视图更新一个视图。目前我不知道该怎么做？

我的案例：我有一个计算引擎，当我执行计算时，我想通知用户执行的步骤。所以我打开一个带有`RichTextBox`控件的新窗口来显示所需的信息。当执行一个新步骤时，我想引发一个事件以便在另一个窗口 ( `RichTextBox`) 中显示文本。

有没有可以帮助我做到这一点的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:18:10.627

基本上，最好不要直接更改视图，而是对模型或“ViewModel”进行操作。所以这是我的建议：

为计算定义一个 ViewModel：

```
public class CalculationViewModel
{
    public event Action ResultChanged;
    private string _result = string.Empty;

    public string Result
    {
        get { return _result; }
        set { _result = value; Notify(); }
    }

    private void Notify()
    {
        if (ResultChanged!= null)
        {
            ResultChanged();
        }
    }
} 
```

您的视图（您提到的显示结果的表单）订阅了该视图。它将具有可用于设置模型的属性。

```
private CalculationViewModel _model;
public CalculationViewModel Model
{
    get { return _model; };
    set
    {
        if (_model != null) _model.ResultChanged -= Refresh;
        _model = value;
        _model.ResultChanged += Refresh;
    };
}

public void Refresh()
{
    // display the result
} 
```

您将有一段代码将这些东西粘在一起（如果您愿意，可以将其称为控制器）：

```
var calculationModel = new CalculationViewModel();
var theForm = new MyForm(); // this is the form you mentioned which displays the result.
theForm.Model = calculationModel;

var engine = new CalculationEngine();

engine.Model = calculationModel; 
```

此代码创建模型、引擎和视图。模型被注入到视图和引擎中。到那时，视图订阅模型的任何更改。现在，当引擎运行时，它会将结果保存到其模型中。该模型将通知其订阅者。视图将收到通知并调用它自己的 Refresh() 方法来更新文本框。

这是一个简化的例子。以此为起点。特别是，WinForms 提供了自己的数据绑定机制，您可以利用它，因此您可以使用其 DataSource 属性将文本框绑定到模型，*而不是创建一段名为“刷新”的代码。*这要求您也使用 WinForm 自己的更改通知机制。但我认为你需要先了解这个概念，然后再继续让这在幕后完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:19:05.517

只是在没有编译检查的情况下添加它，当心拼写错误。

```
public partial class Form1: Form {
    protected void btnCalculation_Click(object sender, EventArgs e) {
        var form2 = new Form2();
        form2.RegisterEvent(this);
        form2.Show();
        OnCalculationEventArgs("Start");
        // calculation step 1...
        // TODO
        OnCalculationEventArgs("Step 1 done");
        // calculation step 2...
        // TODO
        OnCalculationEventArgs("Step 2 done");
    }

    public event EventHandler<CalculationEventArgs> CalculationStep;
    private void OnCalculationStep(string text) {
        var calculationStep = CalculationStep;
        if (calculationStep != null)
            calculationStep(this, new CalculationEventArgs(text));
    }
}

public class CalculationEventArgs: EventArgs {
    public string Text {get; set;}
    public CalculationEventArgs(string text) {
        Text = text;
    }
}

public partial class Form2: Form {
    public void RegisterEvent(Form1 form) {
        form1.CalculationStep += form1_CalculationStep;
    }

    private void form1_CalculationStep(object sender, CalculationEventArgs e) {
        // Handle event.
        // Suppose there is a richTextBox1 control;
        richTextBox1.Text += e.Text;
    }
} 
```

# ios - 如何将 UIView 复制到另一个

> ID：12002826
> 
> 赞同：2
> 
> 时间：2012-08-17T09:02:24.793
> 
> 标签：ios, uiviewcontroller

我的意图是创建一个新的视图控制器，其中包含当前控制器视图的一些控件（按钮、标签等）。

```
//Get all the controls
NSArray* array =[[NSArray alloc]init];
   array=[self.view subviews];

for(int i =0 ;i<array.count ;i++)
{
// UIView *subview = (UIView *)[array objectAtIndex:i];
   UIView *subview =  (UIView *)[array objectAtIndex:i] ;
    ..
   [nextview.view insertSubview:subview  atIndex:i];
} 
```

但是我发现当新的 viewcontroller 视图关闭父控件的所有控件时也会消失。如何将 UIView * 对象复制到另一个对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T09:11:13.770

你不能复制 UIView，它没有实现复制协议。但是您可以轻松地创建一个创建新视图的方法，然后创建所有子视图的新实例并将它们设置为旧视图。

就像是：

```
@interface UIView (Copy)
- (UIView*)newDuplicate;
@end

@implementation UIView (Copy)
- (UIView*)newDuplicate {
    UIView *v = [[[self class] alloc] initWithFrame:self.frame];
    v.autoresizingMask = self.autoresizingMask;

    for (UIView *v1 in self.subviews) {
        UIView *v2 = [[[v1 class] alloc] initWithFrame:v1.frame];
        v2.autoresizingMask = v1.autoresizingMask;
        [v addSubview:v2];
    }

    return v;
}         
@end 
```

但这不会复制视图的所有属性，也不是一个完美的解决方案。您应该在要复制的视图上实现类似的东西。

# haskell - GADT，TypeFamilies 实现“mixins”时类型推断失败

> ID：12002830
> 
> 赞同：4
> 
> 时间：2012-08-17T09:02:37.663
> 
> 标签：haskell, type-inference, gadt

我正在尝试使用可组合的逻辑创建复杂的数据结构。也就是说，数据结构具有通用格式（本质上是具有某些类型可以更改的字段的记录）和一些通用功能。特定结构具有通用功能的特定实现。

我尝试了两种方法。一种是使用类型系统（使用类型类、类型族、功能依赖等）。另一个是创建我自己的“vtable”并使用 GADT。两种方法都以类似的方式失败 - 我在这里似乎缺少一些基本的东西。或者，也许，有更好的 Haskell-ish 方式来做到这一点？

这是失败的“键入”代码：

```
{-# LANGUAGE FlexibleInstances #-}
{-# LANGUAGE FunctionalDependencies #-}
{-# LANGUAGE MultiParamTypeClasses #-}
{-# LANGUAGE ScopedTypeVariables #-}
{-# LANGUAGE TemplateHaskell #-}
{-# LANGUAGE TypeFamilies #-}
{-# LANGUAGE TypeSynonymInstances #-}

module Typed where

import Control.Monad.State
import Data.Lens.Lazy
import Data.Lens.Template

-- Generic Block.
data Block state ports = Block { _blockState :: state, _blockPorts :: ports }

-- For the logic we want to use, we need some state and ports.
data LogicState = LogicState { _field :: Bool }
data LogicPorts incoming outgoing =
  LogicPorts { _input :: incoming, _output :: outgoing }

makeLenses [ ''Block, ''LogicState, ''LogicPorts ]

-- We need to describe how to reach the needed state and ports,
-- and provide a piece of the logic.
class LogicBlock block incoming outgoing | block -> incoming, block -> outgoing where
  logicState :: block ~ Block state ports => Lens state LogicState
  logicPorts :: block ~ Block state ports => Lens ports (LogicPorts incoming outgoing)
  convert :: block ~ Block state ports => incoming -> State block outgoing
  runLogic :: State block outgoing
  runLogic = do
    state <- access $ blockState
    let myField = state ^. logicState ^. field
    if myField
    then do
      ports <- access blockPorts
      let inputMessage = ports ^. logicPorts ^. input
      convert inputMessage
    else
      error "Sorry"

-- My block uses the generic logic, and also maintains additional state
-- and ports.
data MyState = MyState { _myLogicState :: LogicState, _myMoreState :: Bool }
data MyPorts = MyPorts { _myLogicPorts :: LogicPorts Int Bool, _myMorePorts :: Int }

makeLenses [ ''MyState, ''MyPorts ]

type MyBlock = Block MyState MyPorts

instance LogicBlock MyBlock Int Bool where
  logicState = myLogicState
  logicPorts = myLogicPorts
  convert x = return $ x > 0

-- All this work to write:
testMyBlock :: State MyBlock Bool
testMyBlock = runLogic 
```

它会导致以下错误：

```
Typed.hs:39:7:
    Could not deduce (block ~ Block state1 ports1)
    from the context (LogicBlock block incoming outgoing)
      bound by the class declaration for `LogicBlock'
      at Typed.hs:(27,1)-(41,19)
      `block' is a rigid type variable bound by
              the class declaration for `LogicBlock' at Typed.hs:26:18
    Expected type: StateT block Data.Functor.Identity.Identity outgoing
      Actual type: State (Block state1 ports1) outgoing
    In the return type of a call of `convert'
    In a stmt of a 'do' block: convert inputMessage 
```

这是失败的“vtable”代码：

```
{-# LANGUAGE GADTs #-}
{-# LANGUAGE RankNTypes #-}
{-# LANGUAGE RecordWildCards #-}
{-# LANGUAGE ScopedTypeVariables #-}
{-# LANGUAGE TemplateHaskell #-}

module VTable where

import Control.Monad.State
import Data.Lens.Lazy
import Data.Lens.Template

-- Generic Block.
data Block state ports = Block { _blockState :: state, _blockPorts :: ports }

-- For the logic we want to use, we need some state and ports.
data LogicState = LogicState { _field :: Bool }
data LogicPorts incoming outgoing =
  LogicPorts { _input :: incoming, _output :: outgoing }

makeLenses [ ''Block, ''LogicState, ''LogicPorts ]

-- We need to describe how to reach the needed state and ports,
-- and provide a piece of the logic.
data BlockLogic block incoming outgoing where
  BlockLogic :: { logicState :: Lens state LogicState
                , logicPorts :: Lens ports (LogicPorts incoming outgoing)
                , convert :: incoming -> State block outgoing
                }
             -> BlockLogic (Block state ports) incoming outgoing

-- | The generic piece of logic.
runLogic :: forall block state ports incoming outgoing
          . block ~ Block state ports
         => BlockLogic block incoming outgoing
         -> State block outgoing
runLogic BlockLogic { .. } = do
  state <- access $ blockState
  let myField = state ^. logicState ^. field
  if myField
  then do
    ports <- access blockPorts
    let inputMessage = ports ^. logicPorts ^. input
    convert inputMessage
  else
    error "Sorry"

-- My block uses the generic logic, and also maintains additional state and ports.
data MyState = MyState { _myLogicState :: LogicState, _myMoreState :: Bool }
data MyPorts = MyPorts { _myLogicPorts :: LogicPorts Int Bool, _myMorePorts :: Int }

makeLenses [ ''MyState, ''MyPorts ]

type MyBlock = Block MyState MyPorts

-- All this work to write:
testMyBlock :: State MyBlock Bool
testMyBlock = runLogic $ BlockLogic
                         { logicState = myLogicState
                         , logicPorts = myLogicPorts
                         , convert = \x -> return $ x > 0
                         } 
```

它会导致以下错误：

```
VTable.hs:44:5:
    Could not deduce (block1 ~ Block state1 ports1)
    from the context (block ~ Block state ports)
      bound by the type signature for
                 runLogic :: block ~ Block state ports =>
                             BlockLogic block incoming outgoing -> State block outgoing
      at VTable.hs:(37,1)-(46,17)
    or from (block ~ Block state1 ports1)
      bound by a pattern with constructor
                 BlockLogic :: forall incoming outgoing state ports block.
                               Lens state LogicState
                               -> Lens ports (LogicPorts incoming outgoing)
                               -> (incoming -> State block outgoing)
                               -> BlockLogic (Block state ports) incoming outgoing,
               in an equation for `runLogic'
      at VTable.hs:37:10-26
      `block1' is a rigid type variable bound by
               a pattern with constructor
                 BlockLogic :: forall incoming outgoing state ports block.
                               Lens state LogicState
                               -> Lens ports (LogicPorts incoming outgoing)
                               -> (incoming -> State block outgoing)
                               -> BlockLogic (Block state ports) incoming outgoing,
               in an equation for `runLogic'
               at VTable.hs:37:10
    Expected type: block1
      Actual type: block
    Expected type: StateT
                     block1 Data.Functor.Identity.Identity outgoing
      Actual type: State block outgoing
    In the return type of a call of `convert'
    In a stmt of a 'do' block: convert inputMessage 
```

当整个事情明确地在 ScopedTypeVariables 和“forall 块”下时，我不明白为什么 GHC 会选择“block1”。

编辑 #1：添加功能依赖项，感谢 Chris Kuklewicz 指出这一点。但问题仍然存在。

编辑#2：正如克里斯指出的那样，在 VTable 解决方案中，摆脱所有“块〜块状态端口”，而不是在任何地方写“块状态端口”可以解决问题。

编辑#3：好的，所以问题似乎是对于每个单独的函数，GHC 需要参数中有足够的类型信息来推断*所有*类型，即使对于根本不使用的类型也是如此。所以在（例如）上面的 logicState 的情况下，参数只给我们状态，这不足以知道端口和传入和传出类型是什么。没关系，这对 logicState 函数并不重要；GHC 想知道，不能，所以编译失败。如果这确实是核心原因，那么如果 GHC 在编译 logicState 声明时直接抱怨会更好——它似乎有足够的信息来检测那里的问题；如果我在该位置看到“未使用/确定端口类型”的问题，那会更清楚。

编辑#4：我仍然不清楚为什么 (block ~ Block state ports) 不起作用；我想我将它用于意外目的？似乎它应该起作用了。我同意 Chris 的观点，即使用 CPP 来解决它是可憎的。但是写“B trp e”（在我有更多参数的真实代码中）也不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T12:10:43.863

我对您的 VTable 代码进行了一行修复：

```
 , convert :: incoming -> State block outgoing 
```

变成

```
 , convert :: incoming -> State (Block state ports) outgoing 
```

然后你应该简化`runLogic`to

```
runLogic :: BlockLogic (Block state ports) incoming outgoing
         -> State (Block state ports) outgoing 
```

PS：更详细的回答下面的评论。

消除“块〜”不是修复的一部分。通常只有在某些情况下才需要“~” `instance a~b => ... where`。

以前如果我给一个函数 a`xxx :: BlockLogic (Block state ports) incoming outgoing`那么它可以 unpack `convert xxx :: State block outgoing`。但是新`block`的与 完全没有关系`(Block state ports)`，它是一个新的不可知类型。编译器在要生成的名称末尾附加一个数字`block1`，然后出现在错误消息中。

原始代码（两个版本）都存在编译器可以从给定上下文推断出哪些类型的问题。

至于冗长，请尝试`type`. 不要使用 CPP 和 DEFINE。

```
type B s p = BlockLogic (Block s p)

runLogic :: B s p i o -> State (Block s p) o 
```

PPS：对类版本问题的进一步解释。如果我将 (Block sp) 替换为 block 并添加您提到的功能依赖项：

```
class LogicBlock state ports incoming outgoing | state ports -> incoming outgoing where
  logicState :: Lens state LogicState
  logicPorts :: Lens ports (LogicPorts incoming outgoing)
  convert :: incoming -> State (Block state ports) outgoing 
```

使用 logicState 确定`state`但留下`ports`未知数，使得`ports#`

使用 logicPorts 确定`ports`但留下`state`未知数，使`ports#`

编译`runLogic`会在端口、ports0、ports1 和 state、state0、state1 之间遇到很多类型不匹配错误。

这些操作似乎不适合放在同一个类型类中。您可以将它们分解为单独的类型类，或者在类声明中添加“、state->ports、ports->state”功能依赖项。

# php - 使用 PHP 支持多种数据库类型

> ID：12002831
> 
> 赞同：1
> 
> 时间：2012-08-17T09:02:40.833
> 
> 标签：php, mysql, sqlite, class

我一直想构建多数据库应用程序，但我仍然找不到任何关于如何去做的事情。

我想知道的是处理 SQLite 和 MySQL 查询的最佳方式。对于要运行的每个查询，我是否需要一个带有两个不同查询的 IF 语句？

或者有没有一种简单的方法可以将 MySQL 语句转换为 SQLite？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:03:24.297

使用[PHP 的 PDO](http://php.net/manual/en/book.pdo.php)。

您需要做的就是更改连接字符串，您可以连接到不同的数据库。只要您的 SQL 不是使用特定于特定数据库的函数编写的，它就可以与这些数据库一起使用：

```
CUBRID (PDO) — CUBRID Functions (PDO_CUBRID)
MS SQL Server (PDO) — Microsoft SQL Server and Sybase Functions (PDO_DBLIB)
Firebird/Interbase (PDO) — Firebird/Interbase Functions (PDO_FIREBIRD)
IBM (PDO) — IBM Functions (PDO_IBM)
Informix (PDO) — Informix Functions (PDO_INFORMIX)
MySQL (PDO) — MySQL Functions (PDO_MYSQL)
MS SQL Server (PDO) — Microsoft SQL Server Functions (PDO_SQLSRV)
Oracle (PDO) — Oracle Functions (PDO_OCI)
ODBC and DB2 (PDO) — ODBC and DB2 Functions (PDO_ODBC)
PostgreSQL (PDO) — PostgreSQL Functions (PDO_PGSQL)
SQLite (PDO) — SQLite Functions (PDO_SQLITE)
4D (PDO) — 4D Functions (PDO_4D) 
```

它支持您想要的所有功能以及许多防止注入攻击的内置好东西等等。

编辑：[eldbiz建议的一些不错的链接供进一步阅读](https://stackoverflow.com/users/758766/eldblz)

[http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php) [http://www.php.net/manual/en/ref.pdo-sqlite.php](http://www.php.net/manual/en/ref.pdo-sqlite.php) [http://www.php.net/manual/ zh/ref.pdo-mysql.php](http://www.php.net/manual/en/ref.pdo-mysql.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:11:27.853

听起来您可能正在寻找类似[Doctrine](http://www.doctrine-project.org/) ... PHP 的 ORM。

许多简单的查询在 SQLite 和 Mysql 中都可以正常运行，但是 PDO 不会修改您的查询，只是提供一种机制来连接到每个 DB 并发送这些查询。ORM 是一种将对象类型映射到数据库表并直接访问它们的方法。

在某些地方你仍然需要“if”语句，ORM 不会自动决定在哪里保存什么或自动知道在哪个数据库中找到你的数据。

# version-control - 将提交链接到问题 - 最佳实践

> ID：12002834
> 
> 赞同：2
> 
> 时间：2012-08-17T09:03:03.637
> 
> 标签：version-control, mercurial, project-management, dvcs, redmine

我们正在尝试引入我们希望是一种良好的开发实践：每次提交都必须与问题跟踪系统中的问题相关联。（为了满足这个要求，创建一个新问题是完全可以接受的。）

我们的问题跟踪器 (Redmine) 和 DVCS (Mercurial) 集成得很好，但我们有一个问题：如果开发人员需要在离线时提交某事会发生什么？目前Redmine是在线访问的，Mercurial是通过TortoiseHG（Windows）或shell（Linux）访问的。

我不知道有任何工具（例如，Windows 桌面客户端，商业或免费）允许离线使用 Redmine（创建问题，而不仅仅是查看它们）。我们甚至不介意将 Redmine 数据库复制到每个开发人员的机器上，但是同步数据库并不容易。

我们应该做什么？我可以看到以下选项：

1.  从 Redmine 切换到具有离线支持的问题跟踪器。[我不认为 Trac 更好]

2.  拼凑一些解决方案以在 Redmine 中离线创建问题。[不知道如何，而不是导致而不是解决问题]

3.  放弃提交必须始终引用现有问题的想法。[但这似乎是个好主意]

4.  追溯链接提交与问题。[这要求开发者将每个问题的描述写在一个临时位置，稍后将它们复制到Redmine，然后手动将新问题与提交链接；低效且容易出错]

5.  禁止离线提交（因此，禁止离线工作）。[看起来很傻，考虑到如何选择 DVCS 主要是为了允许离线工作]

你的建议是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:58:29.033

离线处理问题并在本地提交是一回事，而将其推送到上游（例如到指定的服务器）是另一回事。

前者可以在没有访问 redmine 的情况下完成。可能存在现有的 redmine 问题，或者需要创建新问题并将其与提交相关联。

在将更改推送到上游之前，可以通过[编辑最后一次提交](https://stackoverflow.com/questions/623052/how-to-edit-incorrect-commit-message-in-mercurial)或[将多个提交折叠到一个](https://stackoverflow.com/questions/1200691/with-mercurial-how-can-i-compress-a-series-of-changesets-into-one-before-push)来更新问题 ID 。后者可能是更好的选择，因为您将在每个问题上游进行一次提交 - 如果需要，可以轻松回滚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:14:55.610

在我这里，我们有与特定问题相关的提交（在错误修复提交的情况下）。系统很简单：

1.  在提交消息中，您在方括号内键入错误编号。
2.  当我们进行发布时，我们会收集自上次发布以来所做的所有提交。
3.  通过正则表达式，我们提取已修复错误的 id。
4.  我们使用此列表来更新错误数据库并创建更改日志。

我认为这里的重要教训是错误数据库和版本控制系统不必那么明确地链接。通过语法约定，它易于聚合并获得概览，这使得手动更新错误数据库变得容易（足够）。

**编辑：**关于“离线工作”部分。Mercurial 是一个 DVCS，并不意味着要经常连接。接受这一点，允许本地提交并在您重新上线和/或推送时处理错误数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T16:29:06.260

Redmine 有效地具有创建问题的离线能力：它可以配置为通过电子邮件接受新问题和问题更新。大多数电子邮件客户端都离线工作（将邮件暂时存储在发件箱中，直到用户上线）。

电子邮件还可以提供（非常有限的）离线查看模式。如果我通过电子邮件收到每个新问题和更新的通知，并自动将这些电子邮件移动到单独的文件夹中，我可以找到相应的问题编号。

这并不理想，但可以作为临时解决方案，直到 redmine 添加离线模式。当然，如果由太多人完成，则存在 redmine 无法很好解决的冲突风险（例如，两个人试图改变问题状态）。

DVCS 与（集中式）问题跟踪器的集成还有一个普遍且不可避免的问题。假设两个开发人员解决了某个问题，并将他们的提交链接到它。当他们都将他们的提交推送到与 redmine 相关的存储库时，在冲突解决过程中只会保留一个解决方案。该问题仍将与单个提交相关联，而没有明确表明其中一个提交实质上已被另一个提交弃用。

# javascript - HTML5 音频 IE9 错误：意外调用方法或属性访问

> ID：12002836
> 
> 赞同：7
> 
> 时间：2012-08-17T09:03:07.717
> 
> 标签：javascript, jquery, html, internet-explorer, audio

我在 IE9 中的部分 javascript 代码有问题。

当我启动页面时出现错误：**Unexpected call to method or property access**。

这是我在 html 文件中的音频标签：

```
<audio controls loop preload id="musicGame">
  <source src="mp3/ambient.ogg" type="audio/ogg" />
  <source src="mp3/ambient.mp3" type="audio/mpeg" />
</audio> 
```

我在 javascript 中调用我的音频标签，如下所示：

```
musicGame = $('#musicGame')[0]; 
```

然后我暂停它，因为我有一个静音按钮，我需要暂停页面上的所有歌曲才能静音工作。

```
musicGame.pause(); 
```

这是 IE9 抛出错误的地方。

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-24T15:53:11.917

`oog`IE 不支持 ..`mp3`但是 IE9+ 支持 ..

尝试设置您的`preload`属性，因为 IE9 可能存在该`preload`属性的问题，因此请尝试将其设置为`preload="metadata"`

```
<audio controls loop preload="metadata" id="musicGame">
   <source src="mp3/ambient.ogg" type="audio/ogg" />
   <source src="mp3/ambient.mp3" type="audio/mpeg" />
</audio> 
```

*   **metadata**：表示只获取音频元数据（例如长度）；它还允许浏览器只下载足够的文件来获取大小、尺寸和持续时间等元数据。

有时`preload="auto"`可能会起作用，但您必须进行测试！？

您可能必须在`audio`elements`src`属性中指定您的音频源，而不需要子`source`元素

```
<audio src="mp3/ambient.mp3" controls autoplay loop  id="musicGame"> 
    HTML5 audio not supported
</audio> 
```

也正在使用`DOCTYPE`HTML5 的权利？

```
<!DOCTYPE html> 
```

并且正在`meta tag`像这样使用 IE9 的权限？

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

而不是使用`$('#musicGame')[0]`，您是否也尝试过使用？

```
document.getElementById("musicGame"); 
```

一些有用的资源链接：

*   [https://developer.mozilla.org/en-US/docs/Web/HTML/Element/audio](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/audio)
*   [https://msdn.microsoft.com/en-us/library/gg589529%28v=vs.85%29.aspx](https://msdn.microsoft.com/en-us/library/gg589529%28v=vs.85%29.aspx)
*   [https://msdn.microsoft.com/en-us/library/hh772923%28v=vs.85%29.aspx](https://msdn.microsoft.com/en-us/library/hh772923%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:14:17.187

Mp3 工作，IE 的问题是播放 .wav 和 .ogg

适用于 IE9 - Chrome - Safari 和 firefox

```
var sound = new Audio("/pop.mp3");
sound.play(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-02T11:09:49.993

将 DOCTYPE 声明添加`<!DOCTYPE html>`到 html 代码的开头。它告诉浏览器如何以标准兼容模式呈现页面。现在`HTML5`音频将在 IE9 中工作。

# php - 如何获取链接（相关）到给定节点（Neo4J + PHP）的所有节点的数组？

> ID：12002838
> 
> 赞同：0
> 
> 时间：2012-08-17T09:03:10.397
> 
> 标签：php, neo4j

我在 ne04j 中有一个图形数据库，其中节点基于有向关系（知道）相互连接。A->B A->C A->E 等等。

节点根据用户 ID 编制索引，因此我可以找到任何节点。没问题。

问题是如何找到链接到节点 A 的所有节点。我猜这与传出关系有关，但我不知道如何实际实现它。尽管我了解所涉及的图形概念，但我是 neo4j 的新手。我正在使用 Everyman neo4j php graph api。

我是否还需要索引关系以实现我想要做的事情，或者是否可以通过一个函数来获取所有连接的节点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T20:01:28.010

在 Neo4jPHP 中，您可以执行以下操作：

```
$node = $client->getNode($nodeId);
$relationships = $node->getRelationships(array('KNOWS'), 'out');
$outgoingNodes = array_map(function ($rel) {
    return $rel->getEndNode();
}, $relationships); 
```

如果您只想检索节点，这比 Cypher 的性能更高。如果您需要进行更复杂的路径匹配，请使用 Cypher。

此处的更多信息：[https](https://github.com/jadell/neo4jphp/wiki/Nodes-and-Relationships) ://github.com/jadell/neo4jphp/wiki/Nodes-and-Relationships在“从节点检索关系”部分下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:12:31.523

问题与您的图形设计无关。实际上，完全没有问题。密码示例：

> start n=node(123) 匹配 n->nodes 返回节点；

将返回与节点 n 有传入关系的所有节点

# eclipse - 如何创建 MyEclipse 快捷方式以打开多个工作区？

> ID：12002841
> 
> 赞同：7
> 
> 时间：2012-08-17T09:03:14.097
> 
> 标签：eclipse, workspace, myeclipse, desktop-shortcut

我有两个不同的 MyEclipse 工作区，其中包含一组不同的项目。我希望通过创建直接打开工作区的快捷方式来避免在两者之间切换。

这可能吗 ？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-17T09:25:40.213

从**[这里](http://help.eclipse.org/help21/topic/org.eclipse.platform.doc.user/tasks/running_eclipse.htm)**和**[这里](https://stackoverflow.com/questions/209789/starting-eclipse-w-specific-workspace)**：

使用以下命令行参数：

```
-data your_workspace_location 
```

例如，

```
-data c:\users\Soumyaansh\myworkspace 
```

尝试将上述参数添加到`Target`MyEclipse 快捷方式的字段中，如下所示：

![在此处输入图像描述](../Images/295f3eb7e2f87505973467182a292afd.png)

现在创建了此快捷方式的第二个副本，并将路径更改`-data`为第二个工作区的路径。如果路径中有空格，则用双引号将路径括起来。

例如，我的快捷方式的目标字段如下所示：

`C:\dev\springsource\sts\STS.exe -data "C:\dev\workspace-matm-STS-1.6.0_30-64Bit"`

你的应该看起来像：

`"C:\Program Files\MyEclipse\MyEclipse.exe" -data "C:\dev\workspace-matm-STS-1.6.0_30-64Bit"`

这可以用于任何基于 Eclipse 的发行版，如 STS、MyEclipse 等。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T09:09:00.637

使用工作区 A 在办公室工具栏上创建一个快捷方式，在任务栏和工作区 B 上创建另一个快捷方式，然后您可以一次访问两个工作表

# css - “CSS 256 类覆盖一个 ID”背后的规则是什么？

> ID：12002845
> 
> 赞同：7
> 
> 时间：2012-08-17T09:03:20.470
> 
> 标签：css

我最近遇到过这种情况，但找不到“为什么”？谁能解释一下？

请参阅以下示例：[http ://codepen.io/chriscoyier/pen/lzjqh](http://codepen.io/chriscoyier/pen/lzjqh)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-17T09:18:23.310

这是由于浏览器的限制而发生的，而不是规范中的错误或浏览器如何实现它。

[规范](http://www.w3.org/TR/selectors/#specificity)说：

> 选择器的特异性计算如下：
> 
> *   计算选择器中 ID 选择器的数量 (= a)
> *   统计选择器中的类选择器、属性选择器和伪类的数量（= b）
> *   计算选择器中类型选择器和伪元素的数量 (= c)
> *   忽略通用选择器
> 
> 否定伪类中的选择器与其他选择器一样计算，但否定本身不计为伪类。
> 
> 连接三个数字 abc（在具有大基数的数字系统中）给出了特异性。

为了计算的目的，浏览器必须将特异性值存储为整数，并且不知何故，256 的值会导致溢出，具体取决于浏览器。这通常发生在 8 位无符号整数，最大值为 255；再添加一个会导致类级别的特异性以某种方式“升级”为 ID 级别的值，使其等于级联中的 ID，从而覆盖它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T09:14:17.620

这一切都在一篇文章中进行了解释：

[极端特异性](http://www.thecssninja.com/css/extreme-specificity)

# java - 如何在不显示的情况下运行活动？

> ID：12002850
> 
> 赞同：0
> 
> 时间：2012-08-17T09:03:41.440
> 
> 标签：java, android, android-activity, background

我有一个活动（A）和活动（B）。A负责加载信息，B是主要活动。在 B 中，还有与 UI 相关的加载操作（例如，侦听器）。我想显示活动 A，并运行活动 B，但我希望仅在（B）加载完成时才显示 B（我在 A 中有一个 ProgressDialog）。我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T10:26:52.197

在我看来，A 的任务比 Activity 更适合线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:59:08.367

这似乎更像是一个架构问题。您可能需要重新考虑使用两个活动。您可以在单个活动中使用 AsyncTask 来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T01:37:06.880

您可以使用 Fragments 来实现您想要的！
[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)
引用：“但是，片段不需要成为活动布局的一部分；您也可以将没有自己的 UI 的片段用作隐形工作者为活动。”
如果您使用支持库，则不必担心您的 SDK 目标。

# r - apply(x, 2, FUN) 和 apply(x[,-1], 2, FUN) 的区别

> ID：12002852
> 
> 赞同：2
> 
> 时间：2012-08-17T09:03:43.450
> 
> 标签：r, apply

我已阅读 CSV 并希望找到“空”行和列，将类似 的内容`isempty = function(x) all(is.na(x) | x == 0 | x == "")` 应用于所有列。第一列是模式字符，所有其他都是数字。

但是，当我执行`emptycols = apply(mydf, 2, isempty)`返回的逻辑向量时 all `FALSE`。

当我尝试`emptycols = apply(mydf[ , -1], 2, isempty)`它完美地工作时，返回一个对于所有“空”列都为 TRUE 的逻辑向量。

我知道我可以只使用 sapply，它仍然可以正常工作，但我仍然想知道：是什么导致了这种行为？第一个（字符）列如何影响我的函数对所有其他列的应用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:47:49.807

@Backlin 是对的。如果您像这样更改 isemtpy：

```
isempty = function(x) c(typeof(x), all(x == 0 | is.na(x) | x == "")) 
```

以下结果显示了会发生什么：

```
> apply(mydata, 2, isempty)
     one         two         three      
[1,] "character" "character" "character"
[2,] "FALSE"     "FALSE"     "FALSE" 

> apply(mydata[,-1], 2, isempty)
     two       three    
[1,] "integer" "integer"
[2,] "TRUE"    "TRUE" 
```

引用@Backlin：“*第一列导致将您的数据框转换为字符矩阵，其中“0”与0不匹配。但是，当您将 [,-1] 转换为数字矩阵时，它可以正常工作。* ”

sapply 表现得更好：

```
> sapply(mydata, isempty)
     one         two       three    
[1,] "character" "integer" "integer"
[2,] "FALSE"     "TRUE"    "TRUE" 
```

# objective-c - 分页时如何确定UIScrollView是否轻弹到下一页

> ID：12002853
> 
> 赞同：0
> 
> 时间：2012-08-17T09:03:44.840
> 
> 标签：objective-c, ios, cocoa-touch, uiscrollview

我使用 UIScrollView 来显示很多图像。对于内存问题，我一次只加载三个图像。当用户轻弹到下一个（或上一个）时，我将移动两个图像并加载一个新图像。

首先，我使用 scrollViewDidEndDecelerating 方法来确定 UIScrollView 是更改为下一页、上一页还是当前页。但是当你快速连续轻弹时，scrollViewDidEndDecelerating 方法不会收到任何消息，也就是说没有被调用，而 scrollViewDidEndDragging:willDecelerate 仍然会收到消息。因为拖动是如此之快，以至于之前的减速被忽略了。

所以我想知道我在哪里可以知道视图是否会改变，以及当我快速轻弹时如何判断变化？在 scrollViewDidEndDragging:willDecelerate 方法或其他一些方式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T09:37:31.060

我不会依赖该`scrollViewDidEndDecelerating`方法，但会 `scrollViewDidScroll`在超过 50% 的上一页/下一页可见时实现协议并更新页面：

```
CGFloat pageWidth = self.scrollView.bounds.size.width;
int page = floor((self.scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1; 
self.pageControl.currentPage = page; 
```

**编辑**

页面控件与滚动视图相结合在本[教程中得到了很好的解释](http://www.iosdevnotes.com/2011/03/uiscrollview-paging/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:53:09.977

```
-(void) scrollViewDidScroll:(UIScrollView *)scrollViewl
{
  tempPageNO=PageNo;
  CGFloat pageWidth = scrollViewl.frame.size.width;
  int f=((scrollViewl.contentOffset.x-pageWidth/2)/pageWidth)+1;

  //----------newPageNo----------------
  PageNo=f;

  if (tempPageNO!=PageNo) {
    NSLog(@"it's true when page is changed.");
    NSLog(@"page NO %i",PageNo);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-22T18:36:19.280

Swift 4 版本的 tiguero 的答案。希望它能为某人节省 0.5 分钟。

```
let pageWidth = scrollView.bounds.size.width
let page = floor((scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1
self.pageControl.currentPage = Int(page) 
```

# java - Weblogic 集群

> ID：12002855
> 
> 赞同：0
> 
> 时间：2012-08-17T09:03:49.507
> 
> 标签：java, weblogic, load-balancing

我们在生产中的应用程序在 weblogic 上运行。它是一个基于 Spring 和 struts 的 Web 应用程序。需要对查询进行 db 加载，并能够通过 GUI 句柄即时重新加载。一些现有的实用程序文件未在 spring 中配置为 bean（此时不能），并且具有静态方法，这些方法使用静态变量/常量来在每个静态方法中运行查询。如果我必须在应用程序启动并运行时从数据库重新加载查询，我不明白 Weblogic 集群的行为方式。换句话说，我们如何确保在所有 JVM 上重新加载对静态变量的查询，以便下一次点击任何节点上的方法都会获取新加载的查询的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:14:36.400

让我们看看这是否回答了您的查询。

如果您有 3 个托管服务器并且您已经在所有 3 个托管服务器上部署了 Spring 应用程序，那么 spring 将显示 3 个应用程序上下文。（每个托管服务器一个）。

他们不互相交谈，他们将在自己的服务器中运行。他们将拥有自己的一组 bean 和自己的静态变量。

因此，一台服务器上的重新加载将针对该服务器。您将不得不在所有三台服务器上重新加载静态内容，以使其反映在整个应用程序中。

如果您希望一次重新加载对所有人都可以，然后使用属性文件（或所有 3 个托管服务器可以从同一位置共享的任何其他资源，例如用于管理服务器的 JNDI，存储在文件系统上的属性文件，将您的查询存储在一些数据库表并从那里加载它 - 前提是所有应用程序都指向同一个数据库）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T15:27:02.233

每个 WebLogic 托管服务器都有自己的 Spring 应用程序上下文（如 Vivek 所述）。

确保每个 JVM 具有一组刷新的“db 查询”的一种方法是使用共享的分布式缓存（例如 ehcache），这样无论哪个节点进行了刷新，您的数据都会被刷新。分布式缓存和缓存复制是您的问题的复杂解决方案。

# android - android：如何将视图引用传递给服务

> ID：12002858
> 
> 赞同：1
> 
> 时间：2012-08-17T09:04:00.177
> 
> 标签：android, service, view, reference

我有一个录音机应用程序。我有一个记录发生的服务。我想在记录期间显示波形，我有一个自定义视图，但它需要记录器写入的字节数组。我的活动和我的服务与消息和消息处理程序进行通信。我不想每次更新波形时都通过消息将整个数据发送到视图。是否有可能以某种方式将视图引用发送到服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:12:51.340

对于在 UI 中触发某些内容的服务，您无需向其发送视图。但是，Android 确实有几种方法可以完成 Service-Activity 通信。[该文档在此处](http://developer.android.com/guide/components/bound-services.html)进行了概述。选择您最喜欢的方法并找到教程；除了使用 AIDL 之外，它们并不是很棘手。

# javascript - 在javascript中格式化字符串

> ID：12002861
> 
> 赞同：3
> 
> 时间：2012-08-17T09:04:07.513
> 
> 标签：javascript, jquery, html, backbone.js

是否有可能在javascript中实现这一点？

这是格式：

```
1 ITEM1      9.00   0%  9.00
1 ITEM-GET01 8.00   12% 5.00 
```

我想创建一个类似布局的收据。我正在使用backbone.js，所以会有模型和集合涉及。

另外，如果它在表上，我可以使用 jquery 从表中获取数据，`tr`然后得到与上面发布的结果一样的结果吗？

我能够阅读有关 sprintf 的信息，但我认为它不是我需要的。有任何想法吗？

**更新**

我正在尝试 sprintf 这是我到目前为止所做的

```
var result = sprintf("%d %-s %.2f %d%% %.2f", model.get("Qty"), model.get("Itemname"), model.get("Price"), model.get("Discount"), model.get("ExtPrice")); 
```

结果是：

```
1 Item1 1.49 0% 1.49 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:33:47.403

阅读本文以在 C 中使用类似 javascript 的 sprintf ...

[http://www.webtoolkit.info/javascript-sprintf.html](http://www.webtoolkit.info/javascript-sprintf.html)

或更好的阅读：[JavaScript 等价于 printf/string.format](https://stackoverflow.com/questions/610406/javascript-equivalent-to-printf-string-format)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:43:37.527

你可以用不同的方式做到这一点。通常采用的方法是在数据数组中循环，并在设置了每列宽度的表中添加行。请参阅 jQuery 中的示例

```
var data = [
    {
    no: 1,
    name: "ITEM1",
    price1: "9.00",
    perc: "0%",
    price2: "9.00"},
{
    no: 2,
    name: "ITEM-GET01",
    price1: "9.00",
    perc: "12%",
    price2: "5.00"}
];

//$("#list tr").remove();    
$(data).each(function(index, item) {
    $("#list").append('<tr><td width="50">' + item.no + '</td><td width="100">' + item.name + '</td><td width="100">' + item.price1 + '</td>' + item.perc + '<td width="100">' + item.price2 + '</td></tr>');
}) 
```

演示：http: [//jsfiddle.net/diode/E8a6V/](http://jsfiddle.net/diode/E8a6V/)

# html - 以后有没有可能给

> ID：12002862
> 
> 赞同：-4
> 
> 时间：2012-08-17T09:04:11.703
> 
> 标签：html, css

我想把整个句子分成几行。所以我在后面放了换行符

*   . 这显示警告。我怎样才能解决这个问题？

    ```
    <ul>
      <br />
      <li>Details of available candidates will be sent to you</li>
      <br />
      <li>Cost of Service is as per Vacancy Check with Dial4jobz for the same.</li>
    </ul>
    <br />
    <div id="Div8" style="display:none">Hot Resume</div>
    </th> 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T09:05:36.297

No. Only list items may be children of a list.

If you want space between each list item - use a margin (applied with CSS).

```
li {
    margin-top: 1em;
} 
```

If you want space between specific list items - reconsider your data structure. You might have a list of lists, or just a collection of lists.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:07:50.770

If you can't use a margin, you could add a break inside your list item, ie.

```
<li>Details of available candidates will be sent to you<br /><br /></li> 
```

# php - 根据服务器请求将 PHP 标头发送到 html 文件？

> ID：12002863
> 
> 赞同：0
> 
> 时间：2012-08-17T09:04:12.513
> 
> 标签：php, javascript, jquery, html, css

为了遵循新的 cookie 法规，我们需要向客户网站添加一个 JS 插件。然而，事实证明是困难的：带有大量页面的纯 HTML。

是否有可能以任何方式、形式或形式说：

```
server request {
    send a php file to inject into a html file sent from the server
} 
```

或者有什么模糊的相似之处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T09:21:29.043

我认为将自定义代码注入 HTML 文件而不修改它们的最简单方法是添加额外的处理层。它会稍微（可能不明显）减慢每个请求，但肯定会减少您的工作量。

假设您使用的是 Apache，请使用`.htaccess`类似于以下的重写规则创建一个文件（未经测试）。

```
RewriteEngine On
RewriteRule \.html$ /injector.php 
```

这将导致对 html 文件的每个请求都传递给`injector.php`

在此文件中，您可以看到最初使用`$_SERVER['REQUEST_URI']`. 使用 a 从磁盘获取此文件[`DOMDocument`](http://php.net/DOMDocument)并使用内置方法找到要注入的区域（如果您想将 a`<script>`放入`<head>`您可能只需要[`getElementById`](http://php.net/manual/en/domdocument.getelementbyid.php)）。注入您的代码，并吐出修改后的文档。

仅供参考，法律完全允许使用*操作所需的*cookie ，这包括 PHP 会话 ID 之类的内容，以及用于存储与 cookie 使用相关的任何首选项的 cookie。我再说一遍，可以使用 cookie 来存储用户不想使用 cookie 的偏好。

在您的`injector.php`系统中，您可以检测到此类偏好 cookie 的存在，并根据您的需要决定**不**注入您的 javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T09:20:18.777

您还可以在运行 jquery 插件的地方使用 js 和包装 php 文件，然后从文件中提取 html 页面并将它们反馈回正文：

`$(body).empty().html(body-html-from-static-html-file);`

不管你怎么做，它都会很老套！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T09:06:41.437

您将无法将 php 注入纯 html。但是，您可以用另一种方式来做...编写一个包装您的html并修改它的php脚本...返回您想要的html...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T09:27:54.397

您可以使用 auto_prepend_file 和 auto_append_file php ini 指令，但必须将 php 设置为解析 .html 文件才能处理 .html 文件。使用输出缓冲，您可以捕获内容，然后修改 html。使用 auto_prepend_file php ini 指令，引用一个调用函数 ob_start() 的 .php 文件；开始捕捉输出。简单地：

```
<?php ob_start(); ?> 
```

然后你可以用 auto_append_file php ini 指令引用一个文件来修改输出。要获得输出，您将使用 ob_get_contents(); 像这样：

```
<?php $output = ob_get_contents(); ?> 
```

在 php 中使用一些字符串函数，您可以随意修改存储在 $output 中的 html。然后，当您准备好发送 $output 时，在您附加的同一个文件中使用：

```
<?php ob_end_clean(); echo $output; ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T09:30:03.130

我的建议：使用`.htaccess`

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^([^.]+).html$ /index.php?file=$1 [QSA,L]
</IfModule> 
```

并创建`index.php`- 假设您在每个文件中都有。

```
<?php
    if(file_exists($_GET['file'].'.html')){
        $file = file_get_contents($_GET['file'].'.html');
        $plugin = "<script> (function(){ /* your script */ }); </script>";
        echo str_replace('</body>', $plugin."</body>", $file);
    } else {
        echo "not found";    
    }
?> 
```

# asp.net-mvc-3 - Some Folder isn't created when publishing mvc 3 application

> ID：12002864
> 
> 赞同：3
> 
> 时间：2012-08-17T09:04:18.607
> 
> 标签：asp.net-mvc-3, visual-studio-2010, iis-7.5

When I published the asp.net mvc 3 application from visual studio 2010 to IIS 7, Some of the folder is not published to the localhost. I have folder under the Content folder in the asp.net mvc 3 application named profileimage folder which is not created to the localhost directory under wwwroot folder. But other folder like css, img, js inside content folder is created. I have used filesystem to publish the application to localhost. I have searched looking for problem and found that the Build Action of properties should be content but profileimage folder properties doesn't show BuildAction properties. What might be problem that some folder is not created in the localhost.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T09:07:15.737

If the folder is empty it won't be published. One possibility is to put an empty file within this folder and set the Build Action to Content for this file.

A ticket [has been opened](http://connect.microsoft.com/VisualStudio/feedback/details/546356/publish-deploy-does-not-deploy-empty-folders) on MSConnect and the workaround is to add a dummy file to the folder.

# javascript - 用 javascript 打开链接（在 php 中使用 echo）

> ID：12002879
> 
> 赞同：0
> 
> 时间：2012-08-17T09:05:57.350
> 
> 标签：javascript, php, hyperlink, echo

我正在用 PHP 生成我的页面。我正在尝试打开一个磁力链接，并在更新下载计数的新选项卡中打开另一个页面。

我的代码在 Firefox 中完美运行，但在 Google Chrome 中却不行。

如何在 Google Chrome 中进行这项工作：

```
<a href='' onClick='window.open(\"$Magnet\",\"_self\");window.open(\"http://website.me/download.php?download=$ID\");'> Download</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:42:22.050

只需在 onclick 调用结束时添加 return false 即可。

```
<a href='' onClick='window.open(\"$Magnet\",\"_self\");window.open(\"http://website.me/download.php?download=$ID\");return false;'> Download</a> 
```

希望这可以帮助。

# asp.net - ASP.NET web forms Server Side Validation

> ID：12002880
> 
> 赞同：0
> 
> 时间：2012-08-17T09:05:58.790
> 
> 标签：asp.net, validation

I am looking for the best practice for validating a form.

I have worked with the asp.net validation controls in the past, but I cant say I'm too fond of them. I personally feel they complicate the aspx page itself and are not that flexible in terms of coloring or displaying certain notifications for the user. I like full control in case changes need to be made in the future.

I have worked with custom validation in the past. Wrote my own methods and returned the page with the appropriate error message/coloring if needed. But I'm not sure it was the best design. Should I write my methods in the page code file itself and acces the controls and the page directly, should I make a business object and give the values as parameters to a function and return errormessages?

I cant seem to find a good design for my validation.

What do you use? The asp.net controls? A custom way of validation? And if custom how do you implement it?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:13:37.103

如果您真的在寻找灵活性，那么显然 MVC 就是答案。

但是，您的问题是关于 Web 表单的，我对验证控件没有任何问题。

使用[CustomValidator](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.aspx)是使控件更灵活的好方法。

我当然会把实际的验证逻辑放在你的域模型中。

您可以使用 CSS 更改错误文本的颜色，这是此类样式的正确位置。

# pci-dss - Pci-Dss Policies And Procedures

> ID：12002887
> 
> 赞同：0
> 
> 时间：2012-08-17T09:06:40.363
> 
> 标签：pci-dss, pci-compliance

I have bought PCI Compliant Security Policies and Procedures document from pcipolicy. Their written policies are ok.However, document does not help me on procedures. They just give the same suggestions with the [https://www.pcisecuritystandards.org/](https://www.pcisecuritystandards.org/)

My question is anyone ever purchase them and how good are they? I am interested in purchasing documents from pcipolicyportal, do you suggest?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:23:44.280

由从未见过您拥有的系统并且不知道您如何管理系统的人编写的程序除了打勾外不太可能非常有用。此外，虽然该框可能会询问您是否有程序，但如果程序不能反映您如何运行系统，那么可能会被有兴趣的 QSA 拒绝。

您可以考虑在几个月内创建程序文档的方法 - 每次执行任务时，记录您执行的步骤。

PCI 的程序不必采用给定的格式或样式，它们只需要显示足够的信息以使程序（例如，您如何进行系统修补）可以被理解。

# visual-studio-2010 - Qt application can't find QtGui4.dll and QtCore4.dll

> ID：12002892
> 
> 赞同：1
> 
> 时间：2012-08-17T09:07:03.017
> 
> 标签：visual-studio-2010, qt, dll

This Qt application was complied by VS 2010 for the end users, but the executing application doesn't find Qt's dll. In the folder, there are QtGui4.dll and QtCore4.dll How can I solve this problem?

![enter image description here](../Images/7647788984f5a1afe77d187a40adf244.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:16:27.810

欢迎来到 Dll 地狱！

每次使用 Qt 进行部署时，都必须确保

1）您正在编译的库是相同的版本和相同的编译器 2）与系统路径中的其他库没有冲突 3）如果您编译 Debug 您必须使用 *d.dll 版本的库

例如，请确保如果您的程序是用 VC9 编译的，那么您的 dll 也是用 VC9 编译的。

您可以通过一个名为 Dependency Walker 的非常有用的程序了解您要链接的库。[http://www.dependencywalker.com/](http://www.dependencywalker.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T10:02:01.037

这是您的应用程序使用与 dll 不同的版本编译。如果你从VS运行它会起作用吗？

# php - Push value to multidimensional array within a foreach loop

> ID：12002893
> 
> 赞同：1
> 
> 时间：2012-08-17T09:07:08.813
> 
> 标签：php, multidimensional-array, foreach, array-push

I have an array built from a database query. Based on the values posuition with the array I need to assign another string to it.

I thought an if statement within a foreach loop would be the way forward but I'm having some trouble.

Below is my code......

```
$test = array(
            array("test", 1),
            array("test2", 2),
            array("test4", 4),
            array("test5", 5),
            array("test3", 3),
            array("test6", 6)
            );

foreach($test as $t) {
if($t[1]==1){
    array_push($t, "hello World");
    }
}
print_r$test); 
```

Everything seams to work other than the array_push. If i print_r($test) after the loop nothing has been added.

Am I doing something monumentally stupid here?...

This is what I get if i print_r($test)

```
Array
(
[0] => Array
    (
        [0] => test
        [1] => 1
    )

[1] => Array
    (
        [0] => test2
        [1] => 2
    )

[2] => Array
    (
        [0] => test4
        [1] => 4
    )

[3] => Array
    (
        [0] => test5
        [1] => 5
    )

[4] => Array
    (
        [0] => test3
        [1] => 3
    )

[5] => Array
    (
        [0] => test6
        [1] => 6
    )

) 
```

I would be expecting test 1 to have a 3rd value in there called "hello world"

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T09:10:21.660

Foreach 循环使用数组的副本。这就是为什么如果你想改变原始数组，你应该使用引用。

```
foreach($test as &$t) {
   if($t[1]==1){
      array_push($t, "hello World"); // or just $t[] = "hello World";
   }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T09:11:04.627

不，你没有做任何非常愚蠢的事情。但是，如果您想`$test`从 foreach 循环中更改数组，则必须将其作为参考传递。

```
foreach($test as &$t) // Pass by reference
{
    if( $t[1] == 1 )
    {
        array_push($t, "hello World"); // Now pushing to $t pushes to $test also
    }
} 
```

# c - Error With building CEF in Windows

> ID：12002898
> 
> 赞同：0
> 
> 时间：2012-08-17T09:07:28.603
> 
> 标签：c, chromium, chromium-embedded

I'm trying to build CEF branch 1180 on windows with Visual Studio 2010, but i get this problem when building for the first time.

```
Error   12  error MSB6006: "cmd.exe" exited with code 2\.    C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets   151 6 generate_supplemental_dependency
Error   17  error MSB6006: "cmd.exe" exited with code 1\.    C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets   151 6 webcore_bindings_sources
Error   1763    error LNK1104: cannot open file 'C:\Chromium\home\src\cef\Debug\lib\webkit.lib' C:\Chromium\home\src\cef\LINK   libcef
Error   1766    error LNK1104: cannot open file 'C:\Chromium\home\src\cef\Debug\lib\libcef.lib' C:\Chromium\home\src\cef\LINK   cef_unittests
Error   1767    error LNK1104: cannot open file 'C:\Chromium\home\src\cef\Debug\lib\libcef.lib' C:\Chromium\home\src\cef\LINK   cefclient
Error   151 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\XPathGrammar.cpp': No such file or directory   C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   154 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\XMLNSNames.cpp': No such file or directory C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   163 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\XMLNames.cpp': No such file or directory C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx   webcore_bindings
Error   142 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\XLinkNames.cpp': No such file or directory C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   155 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\WebKitFontFamilyNames.cpp': No such file or directory  C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   147 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\V8SVGElementWrapperFactory.cpp': No such file or directory C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   140 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\V8HTMLElementWrapperFactory.cpp': No such file or directory    C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   156 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\UserAgentStyleSheetsData.cpp': No such file or directory   C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   146 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\SVGNames.cpp': No such file or directory C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx   webcore_bindings
Error   148 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\SVGElementFactory.cpp': No such file or directory  C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   143 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\MathMLNames.cpp': No such file or directory    C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   153 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\MathMLElementFactory.cpp': No such file or directory   C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   144 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\HTMLNames.cpp': No such file or directory  C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   157 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\HTMLEntityTable.cpp': No such file or directory    C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   150 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\HTMLElementFactory.cpp': No such file or directory C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   141 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\ExceptionCodeDescription.cpp': No such file or directory   C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   152 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\EventFactory.cpp': No such file or directory   C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   139 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\CSSValueKeywords.cpp': No such file or directory   C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   145 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\CSSPropertyNames.cpp': No such file or directory   C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   162 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\CSSGrammar.cpp': No such file or directory C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   149 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\ColorData.cpp': No such file or directory C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx  webcore_bindings
Error   164 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\CalendarPicker.cpp': No such file or directory C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   175 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\bindings\V8DerivedSources19.cpp': No such file or directory    C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   174 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\bindings\V8DerivedSources18.cpp': No such file or directory    C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   160 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\bindings\V8DerivedSources17.cpp': No such file or directory    C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   176 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\bindings\V8DerivedSources16.cpp': No such file or directory    C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   170 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\bindings\V8DerivedSources15.cpp': No such file or directory    C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   172 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\bindings\V8DerivedSources14.cpp': No such file or directory    C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   171 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\bindings\V8DerivedSources13.cpp': No such file or directory    C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   167 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\bindings\V8DerivedSources12.cpp': No such file or directory    C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   165 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\bindings\V8DerivedSources11.cpp': No such file or directory    C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   179 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\bindings\V8DerivedSources10.cpp': No such file or directory    C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   166 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\bindings\V8DerivedSources09.cpp': No such file or directory    C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   177 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\bindings\V8DerivedSources08.cpp': No such file or directory    C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   168 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\bindings\V8DerivedSources07.cpp': No such file or directory    C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   158 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\bindings\V8DerivedSources06.cpp': No such file or directory    C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   161 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\bindings\V8DerivedSources05.cpp': No such file or directory    C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   178 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\bindings\V8DerivedSources04.cpp': No such file or directory    C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   169 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\bindings\V8DerivedSources03.cpp': No such file or directory    C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   159 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\bindings\V8DerivedSources02.cpp': No such file or directory    C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings
Error   173 error C1083: Cannot open source file: '../../../../..\build\..\cef\Debug\\obj\global_intermediate\webkit\bindings\V8DerivedSources01.cpp': No such file or directory    C:\Chromium\home\src\third_party\WebKit\Source\WebCore\WebCore.gyp\c1xx webcore_bindings 
```

i dont know how to solve this, my directory structure is as follow:

i have Chromium version 21.0.1180.18 in C:\Chromium\home\src and i have CEF1 branch 1180 in C:\Chromium\home\src\cef and i have set the environment variable GYP_MSVS_VERSION to 2010 as was explained in the build guide of CEF.

Building the project in the command line went without problems, but when i build i VS2010 i get the problem above.

Can i someone help resolve this issue ?

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T16:09:57.840

这似乎是环境变量的问题。检出cef代码的文件夹中可能有一些空间。尝试保留在文件夹名称中没有空格的文件夹中。

# objective-c - Getting Error when scrolling the tableviewcontroller

> ID：12002901
> 
> 赞同：0
> 
> 时间：2012-08-17T09:07:49.100
> 
> 标签：objective-c, ios

UITableViewController crashes with a exc bad accesses error. This is my code:

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    NSString *cellText ;
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] ;
    }
    if (indexPath.row == 0) 
    {
        cellText = @"Mail1";
    }
    else if (indexPath.row == 1) 
    {
        cellText = @"Mail2";
    }
    else if (indexPath.row == 2)
    {
        cellText = @"Mail3";
    }
    else if(indexPath.row == 3)
    {
        cellText = @"Mail4";
    }
    else
    {
        cellText = @"Mail5";
    }
    cell.textLabel.text = cellText;
    return cell;
} 
```

this is the log message xcode gave

> XXXXProject[1366:f803] *** -[XXXXViewController tableView:cellForRowAtIndexPath:]: message sent to deallocated instance 0x6a793f0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:49:39.940

我认为您不必初始化单元格。也许故事板初始化单元格。

![ss](../Images/6a4c46383f67b6390679ea7f88baafc3.png)

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    NSString *cellText;
    if (indexPath.row == 0) 
    {
        cellText = @"Mail1";
    }
    else if (indexPath.row == 1) 
    {
        cellText = @"Mail2";
    }
    else if (indexPath.row == 2)
    {
        cellText = @"Mail3";
    }
    else if(indexPath.row == 3)
    {
        cellText = @"Mail4";
    }
    else
    {
        cellText = @"Mail5";
    }
    cell.textLabel.text = cellText;
    return cell;
} 
```

您可以从 GitHub 下载此示例项目，然后运行它。

[https://github.com/weed/p120817_TableTest](https://github.com/weed/p120817_TableTest)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:54:55.583

几个小时前刚刚在 StackOverflow 上发布了完全相同的问题。（没有一个表视图称为它的委托，而是一个 UIButton 它的动作）。问题可能是您没有对表视图控制器的强引用，因此它在创建后立即被释放。[请参阅我对上一个问题的回答。](https://stackoverflow.com/questions/12000730/ios-memory-management-error-message-sent-to-deallocated-instance/12000767#12000767)

# c# - Exception thrown by a thread in a third party library

> ID：12002903
> 
> 赞同：2
> 
> 时间：2012-08-17T09:07:52.863
> 
> 标签：c#, exception-handling

I am using a third party library in my code. One of the methods on the third party library is getting a thread from the thread pool and doing some work on it. Unfortunately it is throwing an exception from its thread which I am unable to catch and handle because it is from a different thread.

I know that this exception is not going to cause the application any harm (it is not an out of memory exception or anything similar), so I'd like to log it and try the operation again later when it might succeed.

I am currently logging the exception by using the AppDomain UnhandledException event, but my application is still terminating. Is there any way I can catch this exception and handle it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T09:10:43.243

跨线程捕获异常真的很难，事实上我认为这是不可能的。

唯一的解决方法是查看他们的第三方库是否有一个可以通知您异常的回调例程。

检查库的 docs/api。

# objective-c - iOS - 构建失败，CocoaPods 找不到头文件

> ID：12002905
> 
> 赞同：204
> 
> 时间：2012-08-17T09:08:02.723
> 
> 标签：objective-c, ios, cocoa, build, cocoapods

我有一个使用 CocoaPods 的 iOS 项目。一切都很顺利，直到另一个开发人员开始从事同一个项目。他做了一些更改（据我所知仅对代码进行了更改）并在 repo 中创建了一个新分支。我检查了他的分支并尝试构建它，但我收到一个错误：找不到 ASLogger/ASLogger.h 文件。

即使我删除整个项目并制作新副本并使用“pods install”。构建失败仍然存在。你知道问题出在哪里吗？如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：207
> 
> 时间：2013-05-22T23:54:22.663

*更新*

确保您的目标`Podfile`包含`link_with`缺少配置文件。Cocoapods[默认只设置第一个目标，](http://guides.cocoapods.org/using/the-podfile.html)否则。例如

```
platform :osx, '10.7'
pod 'JSONKit',       '~> 1.4'

link_with 'Pomo', 'Pomo Dev', 'Pomo Tests' 
```

*------ 结束更新*

* * *

**注意：请注意，您必须查看 Project->Info->Configurations 以了解以下步骤。**

* * *

我有类似的症状，发现该`pods.xcconfig`文件未包含在`target`我尝试构建的特定文件中。其他一些建议的解决方案对我有用，但这个似乎解决了部分潜在问题。

![Pods.xcconfig 不工作](../Images/eb7621098a70cae9df584a9addb8d5b1.png)

简单的解决方案是为没有设置的目标更改设置配置文件。

![Pods.xcconfig 工作](../Images/6f4374659de0c5f0be0d5eddec16db0a.png)

* * *

## 回答 #2

> 赞同：96
> 
> 时间：2012-08-27T13:19:54.377

*更新*

自从我的原始答案被否决以来，我已经更新了这个，所以我希望这会有所帮助。如果确实如此，希望它会收回我的投票。

如果标题没有被导入，你可能在`HEADER_SEARCH_PATHS`. 尝试添加`$(inherited)`到构建设置中的标题搜索路径，以确保它从 CocoaPods 中提取 .xcconfig 文件中包含的任何搜索路径。

这应该有助于解决任何冲突并正确导入您的源代码。

* * *

## 回答 #3

> 赞同：83
> 
> 时间：2015-07-05T08:03:21.950

1.检查

> 构建设置 -> 搜索路径 -> 用户标题搜索路径 ->

*   **"${PODS_ROOT}/" 递归**

[![在此处输入图像描述](../Images/7b259ba1b8c4e520464c04f1714b193b.png)](https://i.stack.imgur.com/H8n1n.png)

[![在此处输入图像描述](../Images/9bb557e28ec9d19d2878434f5f8e36fd.png)](https://i.stack.imgur.com/0UhnA.png)

[![在此处输入图像描述](../Images/2f71a3f636264b3dbf3c22e646ac9af7.png)](https://i.stack.imgur.com/gxHV5.png) [![在此处输入图像描述](../Images/23dca69ea607c9153198c72aade0ede3.png)](https://i.stack.imgur.com/CoOt0.png)

2.检查导入样式（关键点），如果你的`podfile`设置

**`use_frameworks!`**

在你`File-Bridging-Header.h`的，格式化程序应该是这样的

**`#import "MBProgressHUD.h"`**

否则应该在下面

**`#import <MBProgressHUD.h>`**

3.那一定是工作！相信我

* * *

## 回答 #4

> 赞同：62
> 
> 时间：2013-03-14T03:31:57.027

头文件，你会是我的死...

最后通过添加（包括引号）让它工作

```
"${PODS_ROOT}/BuildHeaders" 
```

到用户标题搜索路径条目，并检查“递归”。

* * *

## 回答 #5

> 赞同：53
> 
> 时间：2013-05-15T08:32:40.343

我发现`${PODS_HEADERS_SEARCH_PATHS}`它丢失了，它没有在我的开发 git 分支中定义，所以我添加 `"$(SRCROOT)/Pods/Headers/"`了带有递归的 Header Search Paths

这对我来说没问题

* * *

## 回答 #6

> 赞同：35
> 
> 时间：2013-01-07T19:11:17.130

这对我有用：

转到目标>“构建设置”选项卡并找到“用户标题搜索路径”设置。

将此设置为“$(BUILT_PRODUCTS_DIR)”并选中“递归”复选框。

现在构建的目标将搜索工作区的共享构建目录以找到可链接的头文件。

====

更新

我最近遇到了类似（尽管略有不同）的问题。事实证明 Xcode 找不到 Pod，因为我打开的是`.xcodeproj`文件而不是`.xcworkspace`文件。将来可能会帮助其他人。

* * *

## 回答 #7

> 赞同：35
> 
> 时间：2012-12-27T13:05:21.397

其他两个答案在这里都没有帮助。我发现了另外两个可以解决的问题：

*   Xcode 项目（您的项目）中的 Project->Info->Configurations 应设置为“Pods”以进行调试、发布（以及您拥有的其他东西）。请参阅[“未找到标题 - 不包括搜索路径”](https://github.com/CocoaPods/CocoaPods/issues/670)

*   也许您必须使用 link_with 命令链接目标。请参阅[“无法在静态库项目中找到标头”](https://github.com/CocoaPods/CocoaPods/issues/701)

**编辑** 您可以通过这种方式检查符号链接：创建一个名为“check”的文本文件，不带扩展名。将这些行复制到其中：

```
file=/Users/youUserName/XcodeProjectName/Pods/BuildHeaders/SVProgressHUD/SVProgressHUD.h
if [[ ! -e $file &&  -L $file ]]; then
  echo "$file symlink is  broken!"
else
  echo "symlink works"
fi 
```

然后转到终端，更改为您的检查文件所在的文件夹并键入

```
bash check 
```

* * *

## 回答 #8

> 赞同：19
> 
> 时间：2016-05-18T03:33:33.573

如果上述方法都不适合您，并且您发现此错误是因为您刚刚切换到`use_frameworks!`Podfile，请继续阅读：

在得知在我的特定情况下根本与搜索标题路径无关之前，我尝试了上述所有解决方案以及更多解决方案；那是当您切换到`use_frameworks!`Podfile 时，您不再需要在桥接头中包含框架，实际上 Xcode 会抛出非常无用的“无法找到标头”错误。

您需要做的是从您的桥接头文件中删除所有导入，而是`import Module`根据需要在您的各个 Swift 文件中使用 Swift，就像您对 Swift 框架所做的那样。

如果您在 Obj-C 类中使用任何框架头文件（在我的情况下，我们有一个使用 FBSDK 的便利类），您需要将其从本地导入更改为全局导入（这意味着更改`#import "Module.h"`为`#import <Module/Module.h>`，这应该自动完成当您开始输入框架名称时为您服务。在我的情况下是`<AFNetworking/AFHTTPRequestOperationManager.h>`)。

编辑：从那以后，我了解到做一个`@import Module`使用更安全的保护伞文件。

* * *

## 回答 #9

> 赞同：18
> 
> 时间：2013-04-17T13:53:16.570

您是否尝试过导入 Cocoapods 样式？

```
#import <ASLogger.h> 
```

网站上的信息不是很清楚，我提交了一个拉取请求：

[https://github.com/CocoaPods/cocoapods.org/pull/34](https://github.com/CocoaPods/cocoapods.org/pull/34)

**更新：**他们撤回了我的请求 :)

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2012-08-20T12:39:50.447

[wiki](https://github.com/CocoaPods/CocoaPods/wiki/Creating-a-project-that-uses-CocoaPods/2c6eb4b8b3a169d350891ce7005f9715f6a6ec4d)提供了有关如何解决此问题的建议：

> 如果 Xcode 找不到依赖项的头文件：
> 
> 检查 pod 头文件是否在 Pods/Headers 中正确符号链接，并且您没有覆盖 HEADER_SEARCH_PATHS（参见 #1）。如果 Xcode 仍然找不到它们，作为最后的手段，您可以在导入之前添加，例如 #import "Pods/SSZipArchive.h"。

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2016-06-10T00:57:45.183

我是团队中唯一遇到同样问题的开发人员，它对每个人都很有效，所以我意识到它必须是我的环境。我在另一个目录中尝试了`git clone`同一个项目，它编译得很好，然后我意识到它必须是 Xcode 为我的项目路径缓存的东西，“某处”是 DerivedData 文件夹，只需将其删除并干净构建你的项目，它对我有用。

您可以通过以下方式获取路径，甚至可以在 finder 中打开文件夹：

**Xcode** ->**首选项**->**位置 -> **DerivedData**

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2015-10-13T06:23:09.960

我将在我的构建设置中更新以下内容，并且没有收到任何错误。在更新你的 cocoapods 时检查这些东西。

**构建设置**

> 启用位码 - 是（如果您使用的是位码）
> 
> 宏预处理器 - $(inherited)
> 
> 其他链接器标志 - objc、-lc++、$(inherited)

**仅构建架构**

> 调试 - 是
> 
> 释放 - 否

**搜索路径**

> 框架搜索路径 - $(inherited) $(PROJECT_DIR)
> 
> 库搜索路径 - $(inherited)
> 
> 标头搜索路径 - $(inherited)

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-04-09T18:41:57.823

**如果您在“ pod install** ”或“ **pod update** ”之后出现构建错误，则可能是您的一个 pod 是使用**XCode 6.3**构建的，而您仍在使用以前的版本。

就我而言，我必须将我的 OSX 从 Mavericks 更新到 Yosemite 才能拥有 Xcode 6.3 并解决问题

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-10-17T16:07:28.603

对我来说，问题出在其他链接器标志值中。出于某种原因，我在诸如`-l"xml2"` `-l"Pods-MBProgressHUD"`.

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-11-20T20:40:49.027

我必须从 git hub 下载 zip 并将丢失的文件拖到 Pod/... 中相应路径的 Finder 中

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-09-05T03:57:44.863

我也遇到了同样的问题，但是上面的解决方法都行不通。我通过这样做修复了它：

1.  删除整个项目
2.  运行 git clone 项目并运行 bundle exec pod install
3.  cd peoject 并运行 remote add upstream your-remote-rep-add
4.  git 获取上游
5.  git结账大师
6.  git 合并上游/主

然后它就起作用了。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-08-02T23:06:12.497

对我来说，解决问题的是我的 Pods 项目的 iOS 部署目标低于我的项目本身。一旦我将它与我的项目相同，它就能够找到头文件。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-06-04T19:48:18.617

对我有用的是选择 Pods 项目，在 Pod 项目的目标目录中查找并选择缺少标头的目标框架，并在目标的构建设置中的“架构”下将“仅构建活动架构”设置为“否”。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-05-02T03:02:46.937

This was the answer for me, I updated cocoapods and I think that made the PODS_HEADERS_SEARCH_PATHS go away. My solution was similar to this but I used "$(PODS_ROOT)/Headers" – Andrew Aitken

Thank you so much for this answer. I had a hard time looking for ways to fix my problem. Thank you very much.

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2015-03-09T07:16:21.400

没有一个答案对我有帮助（我将我的 pod 与所有目标链接，正确构建配置设置，正确设置搜索路径“$（继承）”等...）。

在我使用标准安装/更新命令将 cocoapods 更新到最新的调试版本后，问题自行消失了：

```
 gem install cocoapods --pre 
```

或者：

```
 sudo gem install cocoapods --pre 
```

（如果在安装过程中使用了 sudo）。

一定是cocoapods bug。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2013-09-30T20:03:49.977

我在 Xcode 5.0 的 GM 种子上，我无法得到任何这些答案。我在关于带有 cocoapods 的标头导入的多个不同问题上尝试了关于 SO 的每一个答案。

**最后，我找到了一个对我有用的解决方案**：我通过 Mac AppStore（安装在 GM 种子之上）升级到 Xcode 5.0，现在标题导入按预期工作。

我的系统上还有一个 Xcode 5 的测试版，我也删除了它。也许这是两者的结合，但希望这对其他人有所帮助。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-03-22T16:57:35.927

这是另一个原因：所有头文件路径看起来都很好，但我们在尝试读取 pod 头文件的预编译 (.pch) 文件中仍然有错误

（即#import <CocoaLumberjack/CocoaLumberjack.h>）。

查看原始构建输出，我终于注意到错误是破坏了我们的 Watch OS 扩展目标，而不是我们正在构建的主要目标，因为我们还将 .pch 预编译的头文件导入到 Watch OS 目标中，但它失败了那里。确保您随附的 Watch OS 目标设置不要尝试导入 .pch 文件（特别是如果您像我一样从主目标设置设置导入！）

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2017-02-15T06:46:16.807

一种简单的解决方法是： 1\. 删除 Pods 文件夹和 Podfile.lock 文件。但不要删除 Podfile 2\. 在项目根文件夹中运行以下命令：

```
pod install 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-10-29T10:04:38.380

我发现将库作为 pod install 直接有助于动态库。例如，对于 Firebase：

```
pod 'RNFirebase', :path => 'path/to/node_modules/react-native-firebase/ios' 
```

或者对于 ASLogger：

```
pod 'ASLogger', :path => 'path/to/node_modules/aslogger/ios' // path to header files 
```

更改或硬编码`HEADER_SEARCH_PATHS`对我没有帮助。如果错误再次发生，也不需要`rm -rf node_modules`删除 pod 文件等，我发现清除缓存很有用。

对于本机反应，我运行

```
 rm -rf $TMPDIR/react-native-packager-cache-*
    rm -rf $TMPDIR/metro-bundler-cache-*
    rm -rf $TMPDIR/metro-* 
    rm -rf $TMPDIR/react-* 
    rm -rf $TMPDIR/haste-*
    rm -rf "$(getconf DARWIN_USER_CACHE_DIR)/org.llvm.clang/ModuleCache"
    npm start -- --reset-cache 
```

对于 Xcode 我删除文件夹`~/Library/Developer/Xcode/DerivedData`

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2022-01-08T21:54:51.693

如果您使用的是 Xcode 12 或更高版本，**请确保您的 Pod 正在针对正确的架构（Intel vs. ARM）进行编译**。检查您是否在任何地方有`VALID_ARCHS`或`EXCLUDED_ARCHS`设置。

我`config.build_settings['EXCLUDED_ARCHS[sdk=iphonesimulator*]'] = 'arm64'`的 Podfile 中有，这阻止了编译器找到 Pod 头文件。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2020-05-26T16:20:08.267

我认为最终的解决方案是去`Build settings -> Search Path -> User Header Search Paths`，找到你的图书馆路径并在 Finder 中浏览它。确保所有路径都存在，包括您的导入路径。

对我来说，我的路径比教程中的要短。在教程中它有点像`#import <SDK/path/to/sdk/File.h>`，但事实证明它只是`#import <SDK/File.h>`

* * *

## 回答 #27

> 赞同：-2
> 
> 时间：2016-12-27T12:25:51.777

我通过我想使用的拖放框架解决了 Xcode 8.2.1 的这个问题。

* * *

## 回答 #28

> 赞同：-2
> 
> 时间：2016-07-19T12:58:03.040

尝试为您的目标评论此行

```
#  use_frameworks! 
```

或者您可以参考我的另一个答案， [将单元测试目标添加到 xcode - 导入桥接头失败不会消失](https://stackoverflow.com/questions/28343493/added-unit-testing-target-to-xcode-failed-to-import-bridging-header-wont-go-a/38630679#38630679)

* * *

## 回答 #29

> 赞同：-2
> 
> 时间：2018-10-04T05:38:38.443

我在这里有其他可行的解决方案，

1.  退出 Xcode
2.  打开 Xcode 并清理项目
3.  首先构建 Pods 项目
4.  构建项目

# java - 将字符串 If 语句转换为 Java IF 语句

> ID：12002906
> 
> 赞同：0
> 
> 时间：2012-08-17T09:08:07.010
> 
> 标签：java, string, escaping

我需要转动一个字符串，例如

```
class freud IF : 0.010<=cst0.1<=0.02 ^ 0.012<=cst0.2<=0.014 ^ 0.01<=cst0.3<=0.011 ^ 0.009<=cst0.4<=0.01 ^ cst0.5=0.009 ^ 0.008<=cst0.6<=0.009 ^ 0.008<=cst0.7<=0.009 ^ 0.007<=cst0.8<=0.009 ^ 0.007<=cst0.9<=0.009 ^ 0.008<=cst1.0<=0.012 
```

进入实际的 Java if 语句：即

```
if(0.010 <= cst0.1 && cst0.1 <= 0.02 .....) 
```

其中 cst0.1 成为浮点数等的名称。

有任何想法吗？我尝试将字符串拆分为其组件，但我需要的所有字符串都不同！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:08:51.367

我想我有一个答案。这是我的步骤，然后是代码：

1.  确定行中是否有 IF
2.  如果是这样，则使用 split(" ^ ") 将行拆分为相等组件-这将因结构而异。
3.  现在检查每个组件，检查是否有相等“<=”，“=”
4.  根据结构独立处理。
5.  将每个“0.025”（例如）转换为浮点数
6.  根据 3,5 和要比较的数据创建 JAVA if 语句。
7.  如果所有等式在整条线上都成立，则记录为进行。如果一个失败，脱离，得到新的线。如果全部保持函数返回初始值，即艺术家字符串。

无论如何这里是代码：

```
while(line != null ){
            boolean equality = false;

            String[] split_line;
            String[] first_part;
            String[] statements;
            String[] components;

            if(line.contains("IF")){
                split_line = line.split(":");
                statements = split_line[1].split(" ^ ");
                int attrib_pos = 0;

                for(int pos = 0; pos < statements.length; pos++){
                    if(statements[pos].contains("<=")){
                        components = statements[pos].split("<=");
                        float component_1 = new Float(components[0]);
                        // middle component is attribute
                        float component_2 = new Float(components[2]);

                        if(!(( component_1 <= data[attrib_pos]) && (data[attrib_pos] <= component_1))){
                            break;
                        }
                    }
                    else if(statements[pos].contains("=") ){
                        components = statements[pos].split("=");
                        float component_1 = new Float(components[1]);
                        if(!(component_1 == data[attrib_pos])){
                            break;
                    }
                        // if we have not found a false statement, increase no of attributes which hold
                        attrib_pos++;
                }
                }
                // if we have run through all attributes as holding then return, as we have found a true rule
                if(attrib_pos-1 == statements.length){
                    _return = (split_line[0].split("\\s+"))[2];
                    return _return;
                }
            }
            // once we have read the line, read another 
        line = read.readLine();

        }               
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:14:32.033

从您所展示的内容来看，将点替换为有效的标识符字符就足够了，例如，在X 和 Y 是数字`_`形式的字符串中，并替换为.`cstX.Y``^``&&`

为了使结果 if 语句有效，您还应该声明`cstX_Y`您引入的所有变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T09:59:52.847

您可以尝试创建评估方法`boolean evaluate(String stringToEvaluate)` ，它将您的字符串分割成段并评估每一位

```
public class MyClass {
    public boolean evaluate(String stringToEvaluate)
    {
    boolean exprvalue = true;
    for (String string : stringToEvaluate.split("^"))
            {
            exprvalue = exprvalue && evaluateLE(string);
            }
    return exprvalue;
    }

    private boolean evaluateLE(String string) {
        String[] values = string.split("<=");
        if (values.length==2)
        {
            return evaluateVal(values[0]) <= evaluateVal(values[1]); 
        }

        return evaluateOtherLogicalExpr(string);
    }

    private float evaluateVal(String string) {
        if (isExpresion(string)) return evaluateArthmeticalExpr(string);
        if (isVariable(string)) return evaluateVariable(string);

        return Float.parseFloat(string);
    }
} 
```

# objective-c - 构建具有多个可拉伸图像的 UIImage

> ID：12002908
> 
> 赞同：4
> 
> 时间：2012-08-17T09:08:21.240
> 
> 标签：objective-c, ios, uiimage, drawing, core-graphics

我有 3 张图像，左帽、右帽和中心。也许使用`CGImageRefs`（？），是否有一种方法可以基于 a 构建位图，该位图`CGRect`将在某个容器中居中，拉伸左帽直到它到达中心部分，右侧同样产生一个`UIImage`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T12:46:38.113

好的，我按照承诺进行了查找。这是一个解决方案：

### 基本理念

*   拿左边的帽子，把`UIImage`右边拉长
*   用箭头“粘合”它`UIImage`
*   现在用右边的盖子把它粘起来，左边拉伸

这是一个小图形，我认为它可以用什么词

```
 ______ ........    ________      .........___________
 {______|........|  | arrow  |    |.........|__________)
left cap|lc flex     --------      rc flex  | right cap 
```

### 编码

```
// get the images from disk
UIImage *leftCap = [UIImage imageNamed:@"leftCap.png"];
UIImage *arrow = [UIImage imageNamed:@"arrow.png"];
UIImage *rightCap = [UIImage imageNamed:@"rightCap"];

// stretch left and right cap
// calculate the edge insets beforehand !

UIImage *leftCapStretched = [leftCap resizableImageWithCapInsets:UIEdgeInsetsMake(topInset, leftInset, bottomInset, rightInset)];
UIImage *rightCapStretched = [rightCap resizableImageWithCapInsets:UIEdgeInsetsMake(topInset, leftInset, bottomInset, rightInset)];

CGFloat widthOfAllImages = leftCapStretched.size.width + arrow.size.width + rightCapStretched.size.width;

// build the actual glued image

UIGraphicsBeginImageContextWithOptions(CGSizeMake(widthOfAllImages, arrow.size.height), NO, 0);
[leftCapStretched drawAtPoint:CGPointMake(0, 0)];
[arrow drawAtPoint:CGPointMake(leftCap.size.width, 0)];
[rightCapStretched drawAtPoint:CGPointMake(leftCap.size.width + arrow.size.width, 0)];
UIImage* im = UIGraphicsGetImageFromCurrentImageContext(); 
UIGraphicsEndImageContext();

// now you should have a ready to use UIImage ;) 
```

### 替代方案

受 Jonathan Plaketts 的启发，如上所示仅`UIImageViews`拉伸 UIImages 应该是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T10:38:13.097

我说只是以编程方式进行，是的，它可能会浪费一些 CPU 周期，但它会更有趣。

好的，我们开始...

让我们在标题中定义 3 个 UIImageViews

```
UIImageView *left;
UIImageView *center;
UIImageView *right; 
```

在 viewDidLoad 我们将创建它们

```
left = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"left.jpg"]];
center = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"center.jpg"]];
right = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"right.jpg"]];

[self.view addSubview:left];
[self.view addSubview:center];
[self.view addSubview:right];

//set the position of the center piece wherever you like, whatever size is right for your arrow
[self setCenterFrame:CGRectMake(100,100,100,100)]; //we'll make this function below 
```

然后让我们创建一个方法，您可以使用它来设置中心图像的位置，并让其他图像在适当的位置晃动，将它们自己拉伸到左右边缘。

```
-(void)setCenterFrame:(CGRect)rect
{
    center.frame = rect; // this is your arrow

    //set size of left
    left.frame = CGRectMake(0,rect.origin.y, rect.origin.x, rect.size.height);

    //work out how much space there is to the right
    float sizeToTheRight = (self.view.bounds.size.width - rect.size.width) - rect.origin.x ;

    //set size of right
    right.frame = CGRectMake(rect.size.width + rect.origin.x,rect.origin.y, sizeToTheRight, rect.size.height);

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-17T09:23:59.570

你的方法很奇怪:)

您有三个不同的图像组成一个可拉伸的图像，但您希望在每次必须以某种方式使用它时以编程方式构建它。这浪费cpu循环。iOS 框架允许您随意拉伸图像。在图像编辑器（Photoshop 或类似软件）中打开文件。合成一个包含被左右帽包围的中心图像的单个图像。

现在您可以将此图像用作所有其他图像，也可以像使用 UIImage 方法一样拉伸它

```
- (UIImage *)resizableImageWithCapInsets:(UIEdgeInsets)capInsets 
```

UIEdgeInsets 是一个简单的结构，用于标识您的上限。所以假设你必须向左拉伸 15pt 和向右拉伸 20pt，你的插图将是：顶部：0 按钮：0 左：15 右：20

而已。

[在这里](http://idevrecipes.com/2010/12/08/stretchable-images-and-buttons/)了解详情。这篇文章讨论了从 iOS 5.0 及更高版本开始弃用的方法，但背后的理论是相同的。

# c# - 使用 onserverClick 发送参数

> ID：12002915
> 
> 赞同：0
> 
> 时间：2012-08-17T09:08:54.393
> 
> 标签：c#, asp.net

如何使用 onserverclick 事件发送参数

这是我的代码：

```
<a href="javascript:void(0)"  ID="platformHyperLink" runat="server" class="platformElementHL" onserverclick='<%# platformHyperLink_Click("+Eval("PLATFORM_ID").ToString()+")"%>' />click</a> 
```

服务器代码：

```
protected void platformHyperLink_Click(object sender, EventArgs e)
{
    findDevice.Visible = true;
    LinkButton lk = sender as LinkButton;

    ClearAndHide(false);
    findDevice.Visible = true;
    DeviceSelectedValueHiddenField.Value = null;
    ModelSelectedValueHiddenField.Value = null;
    OsSelectedValueHiddenField.Value = null;

    Label PlatformNameLabel = lk.NamingContainer.FindControl("PlatformNameLabel") as Label;
    platformName = PlatformNameLabel.Text;
    SelectYourDeviceLabel.Visible = true;
    platformID = Convert.ToInt32(lk.CommandArgument.ToString());
    DataTable DT = WebsiteDataHelper.GetPlatformDevice(platformID);

    if (DT.Rows.Count == 0)
    {
        DeviceListBox.Visible = false;
       // DeviceNoDataFound.Visible = true;
        SelectYourDeviceLabel.Visible = false;

    }
    else
    {
        SelectYourDeviceLabel.Visible = true;
        DeviceListBox.Visible = true;
       // DeviceNoDataFound.Visible = false;
        for (int i = 0; i < DT.Rows.Count; i++)
        {
            string text = DT.Rows[i]["DEVICE_NAME"].ToString();
            string val = DT.Rows[i]["DEVICE_ID"].ToString();
            RadListBoxItem item = new RadListBoxItem(text, val);
            DeviceListBox.Items.Add(item);
        }

    }

} 
```

问题是我无法访问platformHyperlink，我不知道为什么请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:36:24.110

要在不回发的情况下调用服务器端方法，您需要使用 Ajax。

您可以查看 UpdatePanels 或 PageMethods。

我认为您正在寻找的是 PageMethods。

这个[博客](http://blogs.microsoft.co.il/blogs/gilf/archive/2008/10/04/asp-net-ajax-pagemethods.aspx)应该让你开始

```
[ScriptMethod, WebMethod]
public static string GetLabelText()
{
    return "Hello";
}

<script type="text/javascript">    
      function InsertLabelData() {    
          PageMethods.GetLabelText(onSuccess, onFailure);    
      }   

      function onSuccess(result) {    
          var lbl = document.getElementById('lbl');    
          lbl.innerHTML = result;    
      }

      function onFailure(error) {    
          alert(error);    
      }    
      InsertLabelData();    
    </script> 
```

# mysql - sqlquery 到 mysql 查询

> ID：12002916
> 
> 赞同：1
> 
> 时间：2012-08-17T09:08:56.963
> 
> 标签：mysql

我在 sqlserver 中使用这个查询并且在 mysql 中需要相同的查询 .. 我是 mysql 的新手 .. 请帮我解决这个查询。

```
 DECLARE @sql AS nvarchar(max)
    set @sql=''
    set @sql='Select * From('
    SELECT @sql = @sql + N'
    SELECT name  FROM ['+ SCHEMA_NAME(schema_id) +'].[' + name + ']
    UNION ALL '
    FROM information_schema.`TABLES` T where table_name like 'Custom%'
    SELECT @sql = SUBSTRING(@sql, 0, len(@sql)-9)
    print @sql 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:13:42.067

尝试

```
set @sql = '';
set @sql='Select * From(';
SELECT @sql = @sql + N'
    SELECT name  FROM ['+ TABLE_SCHEMA +'].[' + TABLE_NAME + ']
    UNION ALL '
    FROM information_schema.`TABLES` T where table_name like 'Custom%';

SELECT @sql = SUBSTRING(@sql, 0, length(@sql)-9);
select @sql 
```

# visual-studio-2010 - 安装 VS 2012 Express 时从 VS 2010 Ultimate 创建团队项目时出错

> ID：12002918
> 
> 赞同：0
> 
> 时间：2012-08-17T09:09:02.237
> 
> 标签：visual-studio-2010, visual-studio-2012

今天，我在运行 Windows 7 的笔记本电脑上安装了 RTM 版本的 Visual Studio 2012 Web Express。在笔记本电脑上，我安装了 Visual Studio 2010 Ultimate SP1 和 Team Foundation Server 2010 SP1。安装 VS2012 后，我无法再从 VS2010 中创建新的团队项目。我收到错误消息未找到字段：

'Microsoft.TeamFoundation.FrameworkServiceIdentifiers.NewTeamProjectWeb'

当我尝试从 VS2012 中创建一个新的团队项目时，它按预期工作。当我返回 VS2010 时，我可以毫无问题地连接到我在 VS2012 中创建的团队项目。这是一个错误吗？有人知道这种行为的原因或任何解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:10:11.873

这是设计使然。在 Team Foundation Server 的每个版本中，流程模板中都有很多新内容（例如在这一轮中，以支持产品积压工作），而老客户并不知道这些内容。

由于创建团队项目是由客户执行的，我们阻止老客户创建新的团队项目。我们有一个关于在服务器上创建项目的待办事项的故事（就像您今天在 tfspreview.com 上一样），但是有一些依赖项（例如 SharePoint 集成）会导致技术问题。

埃瓦尔德霍夫曼

TFS 项目经理

# jquery - 如何使我的选择元素的标题等于所选选项的标题？

> ID：12002919
> 
> 赞同：0
> 
> 时间：2012-08-17T09:09:09.593
> 
> 标签：jquery

我有一个看起来像这样的选择：

```
<select id="select-site" title="????">
   <optgroup label="City">
      <option title="ee" value="1">123</option>
      <option title="cc" value="2">456</option>
      <option title="dd " value="3">789</option>
      <option title="xx" selected="selected" value="4">aa</option>
   </optgroup>
</select> 
```

我怎样才能使它在文档加载后选择的标题是???? 更改为所选选项的标题。另外，我怎样才能做到这一点，以便当我更改所选选项时，标题`<select>`会再次更新。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T09:16:10.243

试试这个 ：

```
<script type="text/javascript">
$(document).ready(function(){
$('#select-site').change(function() {
var selectedVal = $('#select-site option:selected').attr('title');
$('#select-site').attr("title",selectedVal) ;
});
});

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T09:17:48.263

这会将 的`title`属性设置`#select-site`为`title`选定的`option`

```
$('#select-site').change(function() {
  $(this).prop('title', $('option:selected', this).prop('title'));
}); 
```

要设置属性的初始值，`title`您需要`trigger`更改事件：-

`$('#select-site').trigger('change');`

或者

`$('#select-site').change();`

`$(document).ready()`正如下面的评论中所指出的那样，所有这些都需要包含在内。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T09:39:03.760

试试这个以获得完整的解决方案

```
$(document).ready(function() {
    $('#select-site').change(function() {
        $(this).attr('title', $(this).find('option:selected').attr('title'));
    });
    $('#select-site').trigger('change');
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T09:18:32.530

试试这个：

```
$('#select-site').change(function(){
     value = $(this + ' option:selected').val();
     $(this).attr('title',value);
}); 
```

它会起作用的。

# mysql - 比较mysql中的时间

> ID：12002925
> 
> 赞同：0
> 
> 时间：2012-08-17T09:09:37.307
> 
> 标签：mysql

我在 mysql 中创建了名为 schedule 的表，有 3 列

```
CREATE TABLE SCHEDULE
ID int(11),
FromDate TIMESTAMP,
TODATE TimeSTAMP);

insert into schedule(id,fromdate,todate) values (1,'2012-08-12 10:30:00','2012-08-15  18:17:00'); 
```

我正在尝试找出在给定时间之间出现的记录

```
Select Count(*) from Schedule where fromdate>='2012-08-12 10:30:00' and todate<='2012-08-15 19:17:00'; 
```

上面的查询假设返回零，但它返回一个，这意味着我做错了找出给定时间之间的记录数

请帮我解决这个问题。期待您的友好回应问候 MABamboat

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:24:00.493

该查询应返回 1 行，因为您将条件用作

```
fromdate >= '2012-08-12 10:30:00' and todate <= '2012-08-15 19:17:00' 
```

并且一条记录满足该条件

# javascript - 如何从 URL 中提取字符串值？

> ID：12002926
> 
> 赞同：0
> 
> 时间：2012-08-17T09:09:52.457
> 
> 标签：javascript, jquery

我想从下面提到的 url 中提取以下值？

*   布局2
*   水色

**代码：**

```
var url = "http://localhost:8080/dflyers/edit.html?layout2&aqua"
var dataLayout = // I need url string (layout2) here
var dataTheme = // I need url string (aqua) here 
```

有人可以帮助使用 jQuery/Javascript 获得提到的值吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T09:21:23.870

好吧，如果您只想从提到的 url 中获取这些值，而不是任何复杂的 url 解析器，最简单的解决方案是：

```
var url = "http://localhost:8080/dflyers/edit.html?layout2&aqua";
var query = url.split('?')[1].split('&');
var dataLayout = query[0];
var dataTheme = query[1];

alert('layout '+dataLayout);
alert('theme '+dataTheme);​ 
```

[在 jsfiddle 中运行的](http://jsfiddle.net/VqJtf/1/)示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T09:21:36.373

```
var url = "http://localhost:8080/dflyers/edit.html?layout2&aqua",
    qs = url.split('?')[1],
    dataLayout = qs.split('&')[0],
    dataTheme = qs.split('&')[1]; 
```

如果您从 location.href 获取 url，则可以使用 location.search 来仅获取查询字符串并跳过`split()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T09:13:53.843

如果您使用的是 jQuery，那么 BBQ 插件（由 Ben Alman 编写）具有您正在寻找的功能：

[http://benalman.com/projects/jquery-bbq-plugin/](http://benalman.com/projects/jquery-bbq-plugin/)

# asp.net-mvc-3 - 如何接受通过ajax传递的值

> ID：12002930
> 
> 赞同：0
> 
> 时间：2012-08-17T09:10:15.563
> 
> 标签：asp.net-mvc-3, jquery

我编写了一个代码来传递用户通过单击复选框选择的那些记录的 id

点击 bttn 提交下面的代码被调用

```
 $("#button").click(function () {

 var selected = $(".a:checked").map(function() {
    return this.id;
}).get();

var urlDistricts = '@Url.Action("selectedId")';
$.ajax({
    type: "POST",

    url: urlDistricts,
    data: { listofid:selected },
    success: function () {

    }
});
}); 
```

为了抓住这一点，我在我的控制器中写了以下内容

```
 [HttpPost]
    public ActionResult selectedId(List<int> listofid)
    {
        return View();
    } 
```

但是**listofid**是空的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T09:17:20.727

设置`traditional: true`参数：

```
$.ajax({
    type: "POST",
    url: urlDistricts,
    traditional: true,
    data: { listofid: selected },
    success: function (result) {

    }
}); 
```

您的代码似乎也有问题。您正在检索选定复选框的 ID。所以我可以假设你的标记看起来像这样：

```
<input class="a" type="checkbox" id="1" name="id1" />
<input class="a" type="checkbox" id="2" name="id2" />
<input class="a" type="checkbox" id="3" name="id3" />
... 
```

我假设您的 id 是数字，因为您正试图将它们绑定到`List<int>`控制器操作中的 a 。除了这是无效的 HTML。ID 不能以数字开头。因此，一种可能性是`data-*`在您的复选框上使用 HTML5 属性来存储这些额外的元数据：

```
<input class="a" type="checkbox" data-id="1" name="id1" />
<input class="a" type="checkbox" data-id="2" name="id2" />
<input class="a" type="checkbox" data-id="3" name="id3" />
... 
```

进而：

```
var selected = $(".a:checked").map(function() {
    return $(this).data('id');
}).get(); 
```

# c# - 返回主 C# 时无法将类型“string[,]”隐式转换为“string”

> ID：12002931
> 
> 赞同：0
> 
> 时间：2012-08-17T09:10:20.977
> 
> 标签：c#, arrays, class, 2d, return

哟。我是游戏开发的初学者，我正在制作一个控制台tictactoe游戏，我试图将棋盘网格从我的游戏的棋盘类传递到主类，因为我想把棋盘放在它自己的类中。我制作了一个二维数组来保存棋盘的字符，但我无法返回它，错误是“无法将类型'string [，]'隐式转换为'string'。

```
private int maxRow = 3;
private int maxColumn = 3;
private string[,] boardGrid = new string[3, 3]; //create the game board grid

//Initialise board method
public string InitBoard () //make an object of the board class, returns a 2d array because the board is essentially a grid
{
     //initialise board
     for (int row = 0; row < maxRow; row++)
     {
          for (int column = 0; column < maxColumn; column++)
          {
               boardGrid [row, column] = ".";
          }
     }
     return boardGrid; //<---[The problem happens here!]
} 
```

这是主类的代码。

```
public static void Main (string[] args)
{
    Board ticTacToeBoard = new Board ();
    ticTacToeBoard = ticTacToeBoard.InitBoard ();
    ticTacToeBoard.DisplayBoard (ticTacToeBoard);
} 
```

我在这方面找不到任何其他问题，但如果有任何问题，请随时指出我。干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T09:14:48.993

你在这里有几个问题：

*   您通常不需要在构造后调用单独的方法来初始化对象。将初始化放在构造函数中
*   您正在尝试`string[,]`从声明为 return 的方法返回 a `string`。那是行不通的
*   您正在尝试将 的值分配给`string`type 的变量`Board`。那是行不通的
*   您将对象内的状态传递回在同一对象上调用的方法。那是没有意义的。

您的主要方法*应该*很简单：

```
Board ticTacToeBoard = new Board();
ticTacToeBoard.DisplayBoard(); 
```

将所有初始化逻辑放入您的构造函数中，并使您的`DisplayBoard`方法使用对象本身中的变量。

我也很想制作`maxRow`和`maxColumn`常量，*或者*在构造函数中将它们作为参数。

# css - 如何强制分页前在表格内工作？

> ID：12002933
> 
> 赞同：0
> 
> 时间：2012-08-17T09:10:28.360
> 
> 标签：css, html-table, page-break

有没有办法在表格中的行之前强制分页？我发现可以通过用 DIV 替换表格元素来完成，但我不想这样做，因为这意味着要重写很多很多文件，可能需要一周时间。我发现的所有其他解决方案都不适合我。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:38:37.870

```
<div style="border:2px solid black; border-radius:10px; width:100%; margin-left:auto; margin-right:auto">
<table width="100%" align="center" style="table-layout: fixed; border:1px solid transparent;">
<?
 while($row = $result->fetch_assoc()){?>
<tr style="background:#FFFFFF">';

    <td style='padding-left:5px; padding-right:5px;' width=100><? echo $row['znacka'];?></td>
    <td style='padding-left:5px; padding-right:5px;'><? echo $row['nazev'];?></td>
    <td style='padding-left:5px; padding-right:5px;' width=90 align=center><? echo $row['zn_zatrideni'];?></td>
    <td style='padding-left:5px; padding-right:5px;' width=90 align=right><? echo number_format($row['mnozstvi'],2,'.',' ');?></td>
    <td style='padding-left:5px; padding-right:5px;' width=40 align=center><? echo $row['mj'];?></td>
    <td style='padding-left:5px; padding-right:5px;' width=100 align=right><? if($row['mnozstvi']!=0) echo number_format($row['cena']/$row['mnozstvi'],0,'.',' '); else echo '0';?></td>
<?  if($odd==true){?>
        <td class="stred_b"  width=100 align=right><? echo number_format(($row['cena_min']/1000) ,0 ,'.' ,$oddelovac_tisicu);?></td>
        <td class="stred_g"  width=100 align=right><? echo number_format(($row['cena']/1000) ,0 ,'.' ,$oddelovac_tisicu);?></td>
        <td class="stred_r"  width=100 align=right><? echo number_format(($row['cena_max']/1000) ,0 ,'.' ,$oddelovac_tisicu);?></td>
<?  } else{?>
        <td class="svetle_b"  width=100 align=right><? echo number_format(($row['cena_min']/1000) ,0 ,'.' ,$oddelovac_tisicu);?></td>
        <td class="svetle_g"  width=100 align=right><? echo number_format(($row['cena']/1000) ,0 ,'.' ,$oddelovac_tisicu);?></td>
        <td class="svetle_r"  width=100  align=right><? echo number_format(($row['cena_max']/1000) ,0 ,'.' ,$oddelovac_tisicu);?></td>          
    <?} $odd=!$odd; ?>
</tr>
<?}?>
<tr>
<th colspan=3></th><th colspan=3 align=right style="background:black; color:white" >Celková cena stupně IZ:</th>
<th class="svetle_b"  align=right><? echo number_format(($celkovaCenaMin/1000) ,0 ,'.' ,$oddelovac_tisicu);?></th>
<th class="svetle_g"  align=right><? echo number_format(($celkovaCena/1000) ,0 ,'.' ,$oddelovac_tisicu);?></th>
<th class="svetle_r"  align=right><? echo number_format(($celkovaCenaMax/1000) ,0 ,'.' ,$oddelovac_tisicu);?></th>
</tr>
</table>
</div>
<?}?> 
```

# android - 在 Unity Android 中创建新的 Sphere

> ID：12002934
> 
> 赞同：0
> 
> 时间：2012-08-17T09:10:28.993
> 
> 标签：android, unity3d

我正在为 Android 手机创建 Unity 3D 游戏。目前我使用球体作为我的主要对象。我只是想问一下，一旦第一个球被抛出并消失，我是否可以在场景中创建另一个球体。它就像篮球比赛中的另一个球一样。它将继续有一个球体/球，直到时间已经为零。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T11:25:56.083

看看[预制件](http://docs.unity3d.com/Documentation/Manual/Prefabs.html)。您只需要从您的 GameObject 中创建一个预制件，然后就可以使用[Instantiate创建新实例](http://docs.unity3d.com/Documentation/ScriptReference/Object.Instantiate.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T00:44:00.527

`var sphere : GameObject = GameObject.CreatePrimitive(PrimitiveType.Sphere);` [创建原始文档](http://docs.unity3d.com/Documentation/ScriptReference/PrimitiveType.Sphere.html)

如果您不想要基本球体，则必须像 Kay 在他的答案中所说的那样实例化预制件。

```
var prefab : Transform;
function OnTriggerEnter () {
    Instantiate (prefab);
} 
```

[实例化文档](http://docs.unity3d.com/Documentation/ScriptReference/Object.Instantiate.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-08T08:06:29.170

当你需要一个新球时，你需要实例化球。以下示例代码可能会对您有所帮助：

```
public GameObject ball;
bool isBallThrown;         //trigger that to true when ball is to be thrown 
void Update(){
     if(isBallThrown){
     Instantiate(ball,new Vector3(2,3,0),Quaternion.identity));
          isBallThrown=false;
     }
} 
```

将球体附加到球 GameObject..

# php - mysql删除datetime最接近系统时间的数据

> ID：12002939
> 
> 赞同：0
> 
> 时间：2012-08-17T09:10:58.983
> 
> 标签：php, mysql

在我的数据库表中：

`id_client`（主键和自动增量）

`name_client`(varchar)

`time_insert`（约会时间）

例如表中的数据：

```
---------------------------------------
| id_client  name_client  time_insert
| 1            tintin     2012-08-17 11:04:04
| 2            tata       2012-08-17 11:06:15
| 3            toto       2012-08-17 11:10:05 
```

如果我想删除`time_insert`最接近（最接近）系统时间的行，我该如何编写命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:12:29.227

`ORDER BY`AND`LIMIT`也适用于删除语句。

```
DELETE FROM your_table ORDER BY time_insert desc LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T09:17:19.387

您还可以使用以下内容 - 如果您想将删除更改为`now()`您想要返回的日期，这将起作用：

```
delete from tableName order by abs(now()-insert_time) asc limit 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T09:29:44.380

我建议使用服务器端时间，并让用户能够选择他们的时区。通过使用服务器时间，您可以这样做

```
$curtime=date('Y-m-d\TH:i:s\Z');//get cureent time of surver
$curtime=date('Y-m-d\TH:i:s\Z', round(strtotime($curtime)/60)*60);

$tim1=strtotime("+2 minutes",strtotime($curtime));
$t1=date('Y-m-d\TH:i:s\Z',$tim1);
$tim2=strtotime("-2 minutes",strtotime($curtime));
$t2=date('Y-m-d\TH:i:s\Z',$tim2);

$sql="DELETE FROM tbl_name WHERE time_insert BETWEEN '$t2' AND '$t1'"; 
```

通过使用它，您可以删除时间已接近当前时间的行。例如，我使用的是 2 分钟间隔。

# scheme - 第九章PLAI第一个程序中程序的执行包括哪些步骤

> ID：12002940
> 
> 赞同：1
> 
> 时间：2012-08-17T09:11:02.173
> 
> 标签：scheme, interpreter, racket, plai

在[PLAI](http://www.cs.brown.edu/~sk/Publications/Books/ProgLangs/2007-04-26/plai-2007-04-26.pdf)的第 9 章“理解递归”中，一开始有一个阶乘示例：

```
 (with (fac (fun (n)
                (if0 n 
                     1
                     (* n (fac (+ n -1)))))) 
```

在第 90 页，作者说“在继续阅读之前，请暂停片刻，仔细研究程序，写下每个阶段的环境，逐步通过解释器，甚至可以运行程序，以说服自己“这个错误将会发生。彻底理解错误对于遵循本节的其余部分至关重要。”
但是我不确定我是否可以完整地写下这些步骤，有人愿意帮我写下这些步骤吗？提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T09:25:37.447

让您的口译员为您打印出这些步骤。

```
(define (interp expr env)
  (displayln (list 'expr expr 'env env))
  (type-case CFAE/L expr 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T04:22:12.307

阅读并运行第 10 章的代码后，独立执行上述程序的中间步骤，如

```
 (interp  (if0 (id 'n) (num 1) (mult (id 'n) (app (id 'fac) (sub (id 'n) (num 1)))))
           (aSub 'n
                 (numV 2)
                 (closureV-env (lookup 'fac new-env)))) 
```

我可以手写步骤！感谢每一个人！

# c++ - GDB bt 错误：“没有足够的寄存器或内存可用于进一步展开”

> ID：12002944
> 
> 赞同：9
> 
> 时间：2012-08-17T09:11:21.770
> 
> 标签：c++, gdb, backtrace, debug-backtrace

由于以下原因，核心文件的回溯切断了有用的信息：

> 回溯停止：没有足够的寄存器或内存可用于进一步展开。

为什么会出现此消息，我可以对此做些什么吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-19T15:06:17.530

尝试使用 -O0 标志构建

例如。CFLAGS="-g -O0"

# c++ - 使用 QNetworkAccessManager 期间可能的堆栈损坏

> ID：12002947
> 
> 赞同：0
> 
> 时间：2012-08-17T09:11:28.150
> 
> 标签：c++, qt

我正在处理我怀疑是在使用`QNetworkAccessManager`. 完整的源代码可[在此处](https://github.com/pieterdd/AptNotifier)获得。

从日志输出来看，我猜这个 bug 是在[calendar.cpp](https://github.com/pieterdd/AptNotifier/blob/master/src/model/calendar.cpp)第 44 行的异步请求之后触发的。我没有确凿的证据。我只注意到第 45 行的消息大部分时间是最后一条日志消息。

这是第 39-46 行：

```
void Calendar::update()
{
    // Start calendar download asynchronously. After retrieving the
    // file, parseNetworkResponse will take over.
    Logger::instance()->add(CLASSNAME, "Fetching update for 0x" + QString::number((unsigned)this, 16) + "...");
    _naMgr.get(QNetworkRequest(_url));
    Logger::instance()->add(CLASSNAME, "Update request for 0x" + QString::number((unsigned)this, 16) + " was filed.");
} 
```

这个 HTTP GET 请求由`Calendar::parseNetworkResponse`连接到`_naMgr`'`finished`信号的插槽处理。这是第 170-174 行：

```
void Calendar::parseNetworkResponse(QNetworkReply* reply) {
    // TODO: we suspect that sometimes a SIGSEGV occurs within the bounds
    // of this function. We'll remove the excessive log calls when we've
    // successfully tracked down the problem.
    Logger::instance()->add(CLASSNAME, "Got update response for 0x" + QString::number((unsigned)this, 16) + "."); 
```

即使第 45 行的日志消息不是崩溃后出现在日志中的最后一条消息，日志中总是有一个更新请求，而第 174 行的日志消息从未跟进过。这让我相信HTTP GET 请求可能会破坏这里的东西。提交 GET 请求的 URL 似乎是正确的。

我认为涉及内存损坏的原因之一是即使输入日历列表和我的互联网连接状态保持不变，该错误也不会始终弹出。（我可以用至少 2 个日历触发错误。）此外，当我试图了解有关故障点的更多信息时，我看到了[这个 GCC 输出。](http://pastebin.com/Bt3FGywD)我会从`valgrind`的内存检查器收集输出以收集其他信息，但目前我附近没有可用的 Linux 安装。

Can this bug be related to incorrect use of Qt's network libraries from my side? Have you got any other theories as to what might be causing the issue? This is my first time dealing with possible stack corruption and since I'm doing this solo hobby project in my spare time I don't have anyone to train me in dealing with these issues.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:16:15.830

Are you sending off two requests at once?

I had an issue with threading and QNetworkAccessManager, i had to write a wrapper for it.

Ok, I read some of your code, check out the QT doco for QNetworkAccessManager, aside from the finished signal, there are a couple of other signals that get emitted on failure - its always good practice to catch these.

Is there any chance that you are sending another get request before you finish processing the response, this would explain why it is intermittent.

I will keep looking though and see if I can help.

~ Dan

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:55:12.607

In your finished slot, when you are processing the response set a global flag (bool) to "processing"

That way, if you get another response, you can either queue it up, or you can ignore it. The problem is probably more due to the fact that QNetworkAccessManager forks a thread to do its processing somewhere behind the scenes, which causes your code to perform access violations.

If you want I will jump on your project and have a closer look :)

~ Dan

My class for sending and receiving:

.h file

```
class sendRec : public QObject
{
    Q_OBJECT
public:
    sendRec(QObject *parent = 0);
    sendRec(QUrl);
    QString lastError;
    QUrl thisURL;
    //QNetworkAccessManager manager;
    //FUNCTIONS
    void doGet();
    void doPost(QByteArray*);
    void doPut(QString, QString);
    void doConnects(QNetworkReply *reply, QNetworkAccessManager *manager);

signals:
    void sendResponse(bool, QString*);
public slots:

    /** NETWORK_ACCESS_MANAGER_SLOT **/
    //SUCCESS SLOTS FOR BOTH
    void requestReturned(QNetworkReply * reply );
    //FAILURE SLOTS
    void proxyAuthFail(const QNetworkProxy & proxy, QAuthenticator * authenticator);
    void sslErrorFail(QNetworkReply * reply, const QList<QSslError> & errors);
    /** QNETWORK_REPLY_SLOTS **/
    //FAILURE SLOTS
    void reqError ( QNetworkReply::NetworkError code );
    void sslError ( const QList<QSslError> & errors );

}; 
```

.cpp:

```
#include "sendrec.h"

sendRec::sendRec(QObject *parent) :
    QObject(parent)
{
}

sendRec::sendRec(QUrl url) {
    thisURL = url;
}

void sendRec::doGet() {
    QNetworkRequest request(thisURL);
    QNetworkAccessManager *manager = new QNetworkAccessManager(this);
    QNetworkReply *reply = manager->get(request);
    doConnects(reply, manager);
}

void sendRec::doPost(QByteArray *message) {
    QNetworkRequest request(thisURL);
    QNetworkAccessManager *manager = new QNetworkAccessManager(this);
    QNetworkReply *reply = manager->post(request, *message);
    doConnects(reply, manager);
}

void sendRec::doConnects(QNetworkReply *reply, QNetworkAccessManager* manager){
    //Reply Connects
    QObject::connect(reply, SIGNAL(error(QNetworkReply::NetworkError)),
                     this, SLOT(reqError(QNetworkReply::NetworkError)));
    QObject::connect(reply, SIGNAL(sslErrors(QList<QSslError>)),
                     this, SLOT(sslError(QList<QSslError>)));
    //manager connects
    QObject::connect(manager, SIGNAL(finished(QNetworkReply*)),
               this, SLOT(requestReturned(QNetworkReply*)));
    QObject::connect(manager, SIGNAL(sslErrors(QNetworkReply*,QList<QSslError>)),
            this, SLOT(sslErrorFail(QNetworkReply*,QList<QSslError>)));
    QObject::connect(manager, SIGNAL(proxyAuthenticationRequired(QNetworkProxy,QAuthenticator*)),
               this, SLOT(proxyAuthFail(QNetworkProxy,QAuthenticator*)));

}

void sendRec::requestReturned(QNetworkReply * rep ){
    qDebug() << "Request Returned";
    QVariant status = rep->attribute(QNetworkRequest::HttpStatusCodeAttribute);
    if(status != 200 || status == NULL) {
        QString *lastError = new QString("ERROR: " + status.toString()
                                         + " " + rep->readAll());
        emit sendResponse(false, lastError);
    } else {
        QString *retString = new QString(rep->readAll());
        *retString = retString->trimmed();
        emit sendResponse(true, retString);
    }
    rep->manager()->deleteResource(rep->request());
    rep->manager()->deleteLater();
    rep->deleteLater();
    sender()->deleteLater();

} 
```

# java - 如何为独立客户端的 Glassfish 3.1.2 设置 JNDI？

> ID：12002948
> 
> 赞同：3
> 
> 时间：2012-08-17T09:11:28.313
> 
> 标签：java, glassfish, java-ee-6, initial-context

我尝试从独立的 swing 客户端（在客户端机器上的单独 JVM 中运行）连接到 Glassfish 服务器。

我目前使用 Netbeans 的以下设置，一切正常：

```
System.setProperty("java.naming.factory.initial", "com.sun.enterprise.naming.SerialInitContextFactory");
System.setProperty("java.naming.factory.url.pkgs", "com.sun.enterprise.naming");
System.setProperty("java.naming.factory.state", "com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl");
System.setProperty("org.omg.CORBA.ORBInitialHost", "192.168.1.3");
System.setProperty("org.omg.CORBA.ORBInitialPort", "3700");
InitialContext context = new InitialContext(); 
```

但是当我尝试通过键入“java -jar client.jar”从控制台启动编译的客户端时，我收到以下错误：

```
D:\workspace\gf-client\dist>java -jar gf-client.jar
17.08.2012 11:07:38 ch.client.core.ServerContext getInitialContext SCHWERWIEGEND: Cannot instantiate class: com.sun.enterprise.naming.SerialInitContextFactory javax.naming.NoInitialContextException: Cannot instantiate class: com.sun.enterprise.naming.SerialInitContextFactory [Root exception is java.lang.ClassNotFoundException: com.sun.enterprise.naming.SerialInitContextFactory]
        at javax.naming.spi.NamingManager.getInitialContext(Unknown Source)
        at javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)
        at javax.naming.InitialContext.init(Unknown Source)
        at javax.naming.InitialContext.<init>(Unknown Source)
        at ch.lawsuite.core.ServerContext.getInitialContext(ServerContext.java:2 7)
        at ch.client.core.remote.Facades.initialize(Facades.java:68)
        at ch.client.core.Client.main(Client.java:57) Caused by: java.lang.ClassNotFoundException: com.sun.enterprise.naming.SerialIni tContextFactory
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Unknown Source)
        at com.sun.naming.internal.VersionHelper12.loadClass(Unknown Source)
        ... 7 more Exception in thread "main" java.lang.NullPointerException
        at ch.client.core.remote.Facades.initialize(Facades.java:69)
        at ch.client.core.Client.main(Client.java:57) 
```

有人有什么有用的想法吗？

*   JVM 是否遗漏了任何库？哪个？（它从 netbeans 工作，所有依赖的库都打包到编译的 jar 文件中（至少我这么认为..））
*   Glassfish 是否有替代的串行上下文工厂？

非常感谢您提前提供的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-27T16:14:22.487

### 关于远程 EJB 接口的要点

当您的客户端应用程序位于一个不同于托管 EJB 模块的 JVM 上时，您需要一个远程 EJB 接口。换句话说：

*   客户端应用程序位于一个 JVM 上，而 EJB 模块部署在同一台机器上的另一个 JVM 上

或者

*   客户端应用程序位于一个 JVM 上，而 EJB 模块部署在远程机器上的另一个 JVM 上。

### 为简单起见

让我们考虑第一个场景，客户端应用程序和 EJB 模块都存在于同一台机器上的不同 JVM 上。

1.  确保您的机器上安装了 2 个 JDK。
2.  在指向一个 JDK (JVM) 的 Glassfish 安装中部署 EJB 模块。我们可以同意在“C:/glassfish3/”中安装 Glassfish
3.  根据此[链接](https://glassfish.java.net/javaee5/ejb/EJB_FAQ.html#StandaloneRemoteEJB)中的文档。从安装目录（即 C:/glassfish3/glassfish/lib/gf-client.jar）中将文件“gf-client.jar”作为外部库添加到您的客户端应用程序类路径，而不是复制它。
4.  还将文件remote_interface.jar 添加到您的客户端应用程序类路径中，该文件包含您的EJB 的远程业务接口。
5.  在第二个 JDK (JVM) 上运行 SE（独立）客户端应用程序

### 关于客户的重要提示

根据文档，独立 java 客户端必须显式使用全局 JNDI 名称来查找远程 EJB。此外，Glassfish 不需要任何属性初始化来调用 InitialContext() 构造函数。因此，客户端应用程序可以使用以下代码片段调用 EJB：

```
InitialContext context = new InitialContext();
_RemoteEjbInterface ejbBean = (_RemoteEjbInterface) context.lookup("java:global/DeployedEJBAppName/EjbImplClass!com.sam._RemoteEjbInterface"); 
```

### 如果您的 SE 独立客户端应用程序是 maven 应用程序，那么您需要

1.  通过将此条目添加到您的客户端应用程序 POM 来解决上述步骤 (3)：

    ```
    <dependency>
        <groupId>org.glassfish.main.appclient.client</groupId>
        <artifactId>gf-client</artifactId>
        <version>3.1.2</version>
        <scope>system</scope>
        <systemPath>C:/glassfish3/glassfish/lib/gf-client.jar</systemPath>
    </dependency> 
    ```

2.  假设您安装了本地 maven 存储库中的一个指向您 remote_interface.jar 的 POM 依赖项，说明上述步骤 (4)。[按照这个来了解如何。](http://www.mkyong.com/maven/how-to-include-library-manully-into-maven-local-repository/)

另一个要参考的文档[是here](http://docs.oracle.com/cd/E18930_01/html/821-2418/gkusn.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:30:41.520

通过查看 gf-client.jar 库的 MANIFEST.MF 文件，我注意到从那里引用了十几个其他 jar-lib。为了在 netbeans 平台之外运行客户端，我必须将所有这些库复制到我自己的应用程序的最终构建中。然后它工作得很好...... :-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T09:45:27.617

您在类路径中缺少包含 com.sun.enterprise.naming.SerialInitialContextFactory 类的 jar。将其添加到客户端 jar 的清单中。

# c++ - C++，解析二进制注册表文件（regf）

> ID：12002949
> 
> 赞同：0
> 
> 时间：2012-08-17T09:11:30.257
> 
> 标签：c++, windows, winapi, registry

我有个问题。有一个 WinApi 函数 RegSaveKey，它将注册表项保存到二进制文件中。我知道这个文件可以通过 RegLoadKey 加载。

但是，如果没有该功能，我如何解析这个二进制文件？实际上，我不是在寻找完整的代码，而是在寻找该文件格式的描述。

同样，无需解析 TEXT *.reg 文件，我想解析 %system32%\config\ 目录中的 NTUSER.DAT 等 BINARY 文件。

UPD：不需要以这种方式写入注册表，只需读取

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:00:40.550

我认为[这里的这个 libregf 项目](http://sourceforge.net/projects/libregf/)可以提供帮助。我没有研究它，但假设他们在没有将文件推回注册表然后从那里读取或类似的东西的情况下实现了它。

# xml - XSLT 选择中的嵌套选择器是否合法

> ID：12002951
> 
> 赞同：0
> 
> 时间：2012-08-17T09:11:39.650
> 
> 标签：xml, xslt

这是我正在使用的 XML 文件的表示：

```
<root>
  <header>
  ...
  </header>
  <pupils>
    <pupil>
      <name>Chris</name>
      <assessments>
        <stage>
          <level>1</level>
          <assessment>
            <year>2012</year>
            <result>55</result>
          </assessment>
          ...
        </stage>
      </assessments>
    </pupil>
    ...
  </pupils>
</root> 
```

注意：学生可以在 2012 年以外的一年进行 1 级的评估。

我希望从 2012 年开始选择具有 1 级评估的学生。

**因此，我想问一下以下“嵌套选择器”方法是否适合选择这些学生：**

```
select="root/pupils/pupil[assessments/stage/level[../assessment/year = '2012'] = '1']" 
```

（[XsltCake](http://www.xsltcake.com/)没有返回我所期望的）

我最初的尝试导致了这个：

```
select="root/pupils/pupil[assessments/stage/level = '1' and assessments/stage/assessment/year = '2012']" 
```

但是，由于学生有可能在 2012 年以外的一年内进行 1 级的评估，同时在 2012 年进行不同级别的评估，因此也会选择这些学生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:30:27.517

假设 XPATH 表达式的焦点项目是文档节点，那么 2012 年有 1 级评估的所有瞳孔节点的集合可以通过这个 XPATH 表达式选择...

```
root/pupils/pupil[assessments/stage[level='1'][assessment/year='2012']] 
```

## 警告

这假设您的数据模型大致与示例文档所暗示的一样。如果您在级别和评估之间存在某种关联，例如基于相邻节点而不是共同瞳孔节点，则表达式需要有所不同。

另请注意，如果您不想假设当前焦点项是什么，并且 <root> 元素是文档根元素，则表达式前面带有斜杠，如下所示...

```
/root/pupils/pupil[assessments/stage[level='1'][assessment/year='2012']] 
```

## 例子

例如，这个 XSLT 1.0 样式表...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text"/>

<xsl:template match="/">
Set of all pupil nodes what had a level 1 assessment in 2012
------------------------------------------------------------- 
  <xsl:apply-templates select="root/pupils/pupil[assessments/stage[level='1'][assessment/year='2012']]"/>
</xsl:template>

<xsl:template match="pupil">
  <xsl:value-of select="concat(' ',name,'&#x0A;')" />
</xsl:template>

</xsl:stylesheet> 
```

...当应用于您的示例文档时产生...

```
Set of all pupil nodes what had a level 1 assessment in 2012
------------------------------------------------------------- 
   Chris 
```

* * *

# 原则

是的，为了回答您的一般问题，**可以**嵌套 XPATH 表达式中的谓词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:32:57.250

**使用**：

```
/*/*/pupil[2012 = assessments/stage[level = 1]/assessment/year] 
```

这里的主要假设是 an`assessment`只有一个`stage`孩子。如果不是这样，您需要编辑问题并包含有关如何在 XML 文档中表示an`assessment`及其对应项之间的关系的更多信息。`stage`

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "/*/*/pupil[2012 = assessments/stage[level = 1]/assessment/year]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<root>
      <header>
      ...
      </header>
      <pupils>
        <pupil>
          <name>Chris</name>
          <assessments>
            <stage>
              <level>1</level>
              <assessment>
                <year>2012</year>
                <result>55</result>
              </assessment>
              ...
            </stage>
          </assessments>
        </pupil>
        ...
      </pupils>
</root> 
```

**对 Xpath 表达式进行求值，并将该求值中选定的节点（本例中只有一个）复制到输出**：

```
<pupil>
   <name>Chris</name>
   <assessments>
      <stage>
         <level>1</level>
         <assessment>
            <year>2012</year>
            <result>55</result>
         </assessment>
              ...
            </stage>
   </assessments>
</pupil> 
```

# reporting-services - 有没有办法获取当前页码。在 Reporting Services 2005 的正文中？

> ID：12002952
> 
> 赞同：0
> 
> 时间：2012-08-17T09:11:40.087
> 
> 标签：reporting-services, reportingservices-2005

我需要计算当前页码。在 Reporting Services 2005 中的正文中确定该页面是否为双面打印的第一页。我知道我们可以在标题中检索这个数字，但是有可能在正文中计算这个数字吗？

干杯，史蒂芬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:40:00.483

这个问题可能与这个问题[重复](https://stackoverflow.com/q/11322001/419956)。

不幸的是，答案似乎是您[无法访问报告正文中的页码](http://connect.microsoft.com/SQLServer/feedback/details/425893/global-page-number-value-to-be-accessed-from-body-section-in-ssrs-2008)，因此您想要的是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:39:40.070

据我所知，您无法访问正文中的全局页码。也许 SQL Server 论坛中的这个帖子可以帮助解决这个问题：[SSRS-Pagination on report body](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/ab9c18bc-ee37-45a2-a52d-628c12d08b33/)

# shell - Bourne shell：将参数 $2 到 $N 发送到可变参数函数？

> ID：12002954
> 
> 赞同：9
> 
> 时间：2012-08-17T09:11:51.980
> 
> 标签：shell, variadic-functions, sh

谷歌终于让我失望了。我似乎无法在 Bourne shell 脚本中找到如何做到这一点：

我正在编写一个 shell 脚本来处理我对一个项目的所有测试。我已经为该脚本可以执行的每个任务（构建、运行、清理等）设置了函数，并且希望将任何其他命令行参数（除了命令本身）传递给所需的函数。

例子：

`./test.sh build -j`应该传入`-j`函数`build`。

此逻辑的伪代码版本如下所示：

```
function build() {
   make $*
}

if [ $1 == 'build' ]; then
   build $2 -> $N
fi 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-17T09:33:13.407

`shift`我认为您可以使用该命令来实现此效果。它将所有位置参数向下移动一个位置并降低 的值`$1`（因此 的值`$3`被移动到`$2`， 的值`$2`被移动到`$1`并且 的值`$1`丢失）。完成后，您可以使用它`$@`来获取您真正感兴趣的参数列表，例如

```
function build() {
    echo "build with $@"
}

echo "Starting args are $@"
cmd=$1
shift

if [ "$cmd" = 'build' ]; then
    build "$@"
fi 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T09:33:23.447

```
function build() {
   make "$@"
}

if [ "$1" == 'build' ]
then shift        # Lose $1
     build "$@"   # Pass what was $2 .. $N
fi 
```

注意`"$@"`在函数本身和函数调用中的使用。我认为使用`$*`或`$@`不使用双引号或`"$*"`;很少是正确的。仅`"$@"`保留原始参数列表的间距，如果您有包含空格的参数，这很重要。如果您要回应这些论点，那`echo "The arguments: $*"`是合理的。否则，超过 90% 的情况下，您最好使用`"$@"`. `"$1"`我对在测试算子中的引用也采取了极其保守的态度；小心省略引号。

也可以看看：

*   [bash — 保存在变量中时空间安全](https://stackoverflow.com/questions/5851877/bash-being-space-safe-when-saving-in-a-variable/)
*   [/bin/sh 中的 ${1:+"$@"}](https://stackoverflow.com/questions/154625/1-in-bin-sh/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T21:11:01.413

除非您想发出更详细的错误消息，否则无需`$1`显式测试。做就是了：

```
#!/bin/sh -e
function build() {
   make "$@"
}

"$@" 
```

如果`$1`命名一个有效的函数，它将根据需要被调用。如果没有，您将收到一条错误消息，该消息可能还不错，具体取决于您的 shell。

# c# - 如何为水晶报表设置数据库登录信息（连接信息）？

> ID：12002957
> 
> 赞同：3
> 
> 时间：2012-08-17T09:12:07.840
> 
> 标签：c#, crystal-reports

我有一个应用程序（不是我的编码），它有很多水晶报告。我面临的问题是，每次我打开水晶报告时，它都会询问登录用户名和密码。

经过一番搜索后，我发现我必须在运行时为报告设置连接信息，并且我找到了一些解决方案，但是当我查看应用程序的代码时，并没有像我预期的那样找到它。

frmviewrpt（具有水晶报表查看器的表单）有这样的东西：

```
RptProBalance rptProductBalance = new RptProBalance();
rptProductBalance.RecordSelectionFormula = getBalanceRptSelection();
rptProductBalance.Refresh();
allReportViewer.ReportSource = rptProductBalance; 
```

RptProBalance()（从 RptProBalance.rpt 文件扩展的 cs 文件）：

```
//------------------------------------------------------------------------------
 // <auto-generated>
 //     This code was generated by a tool.
 //     Runtime Version:2.0.50727.42
 //
 //     Changes to this file may cause incorrect behavior and will be lost if
 //     the code is regenerated.
 // </auto-generated>
 //------------------------------------------------------------------------------

 namespace minfatora {
using System;
using System.ComponentModel;
using CrystalDecisions.Shared;
using CrystalDecisions.ReportSource;
using CrystalDecisions.CrystalReports.Engine;

public class RptProBalance : ReportClass {

    public RptProBalance() {
    }

    public override string ResourceName {
        get {
            return "RptProBalance.rpt";
        }
        set {
            // Do nothing
        }
    }

    [Browsable(false)]
    [DesignerSerializationVisibilityAttribute(System.ComponentModel.DesignerSerializationVisibility.Hidden)]
    public CrystalDecisions.CrystalReports.Engine.Section ReportHeaderSection1 {
        get {
            return this.ReportDefinition.Sections[0];
        }
    }

    [Browsable(false)]
    [DesignerSerializationVisibilityAttribute(System.ComponentModel.DesignerSerializationVisibility.Hidden)]
    public CrystalDecisions.CrystalReports.Engine.Section PageHeaderSection1 {
        get {
            return this.ReportDefinition.Sections[1];
        }
    }

    [Browsable(false)]
    [DesignerSerializationVisibilityAttribute(System.ComponentModel.DesignerSerializationVisibility.Hidden)]
    public CrystalDecisions.CrystalReports.Engine.Section GroupHeaderSection1 {
        get {
            return this.ReportDefinition.Sections[2];
        }
    }

    [Browsable(false)]
    [DesignerSerializationVisibilityAttribute(System.ComponentModel.DesignerSerializationVisibility.Hidden)]
    public CrystalDecisions.CrystalReports.Engine.Section DetailSection1 {
        get {
            return this.ReportDefinition.Sections[3];
        }
    }

    [Browsable(false)]
    [DesignerSerializationVisibilityAttribute(System.ComponentModel.DesignerSerializationVisibility.Hidden)]
    public CrystalDecisions.CrystalReports.Engine.Section GroupFooterSection1 {
        get {
            return this.ReportDefinition.Sections[4];
        }
    }

    [Browsable(false)]
    [DesignerSerializationVisibilityAttribute(System.ComponentModel.DesignerSerializationVisibility.Hidden)]
    public CrystalDecisions.CrystalReports.Engine.Section ReportFooterSection1 {
        get {
            return this.ReportDefinition.Sections[5];
        }
    }

    [Browsable(false)]
    [DesignerSerializationVisibilityAttribute(System.ComponentModel.DesignerSerializationVisibility.Hidden)]
    public CrystalDecisions.CrystalReports.Engine.Section PageFooterSection1 {
        get {
            return this.ReportDefinition.Sections[6];
        }
    }
}

[System.Drawing.ToolboxBitmapAttribute(typeof(CrystalDecisions.Shared.ExportOptions), "report.bmp")]
public class CachedRptProBalance : Component, ICachedReport {

    public CachedRptProBalance() {
    }

    [Browsable(false)]
    [DesignerSerializationVisibilityAttribute(System.ComponentModel.DesignerSerializationVisibility.Hidden)]
    public virtual bool IsCacheable {
        get {
            return true;
        }
        set {
            // 
        }
    }

    [Browsable(false)]
    [DesignerSerializationVisibilityAttribute(System.ComponentModel.DesignerSerializationVisibility.Hidden)]
    public virtual bool ShareDBLogonInfo {
        get {
            return false;
        }
        set {
            // 
        }
    }

    [Browsable(false)]
    [DesignerSerializationVisibilityAttribute(System.ComponentModel.DesignerSerializationVisibility.Hidden)]
    public virtual System.TimeSpan CacheTimeOut {
        get {
            return CachedReportConstants.DEFAULT_TIMEOUT;
        }
        set {
            // 
        }
    }

    public virtual CrystalDecisions.CrystalReports.Engine.ReportDocument CreateReport()      {
        RptProBalance rpt = new RptProBalance();
        rpt.Site = this.Site;
        return rpt;
    }

    public virtual string GetCustomizedCacheKey(RequestContext request) {
        String key = null;
        // // The following is the code used to generate the default
        // // cache key for caching report jobs in the ASP.NET Cache.
        // // Feel free to modify this code to suit your needs.
        // // Returning key == null causes the default cache key to
        // // be generated.
        // 
        // key = RequestContext.BuildCompleteCacheKey(
        //     request,
        //     null,       // sReportFilename
        //     this.GetType(),
        //     this.ShareDBLogonInfo );
        return key;
    }
}
 } 
```

我不知道我应该在哪里建立连接信息并将其传递给报告。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T09:16:56.467

```
ConnectionInfo crconnectioninfo = new ConnectionInfo();
    ReportDocument cryrpt = new ReportDocument();
    TableLogOnInfos crtablelogoninfos = new TableLogOnInfos();
    TableLogOnInfo crtablelogoninfo = new TableLogOnInfo();

    Tables CrTables;

    crconnectioninfo.ServerName = "localhost";
    crconnectioninfo.DatabaseName = "dbclients";
    crconnectioninfo.UserID = "ssssssss";
    crconnectioninfo.Password = "xxxxxxx";  

  cryrpt.Load(Application.StartupPath + "\\rpts\\" + dealerInfo.ResourceName);

        CrTables = cryrpt.Database.Tables;

        foreach (CrystalDecisions.CrystalReports.Engine.Table CrTable in CrTables)
        {
            crtablelogoninfo = CrTable.LogOnInfo;
            crtablelogoninfo.ConnectionInfo = crconnectioninfo;
            CrTable.ApplyLogOnInfo(crtablelogoninfo);
        }

        cryrpt.RecordSelectionFormula = getCustInfoRptSelection();
        cryrpt.Refresh();

        allReportViewer.ReportSource = cryrpt; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T17:10:38.457

如果您想通过代码提供它，那么在您的情况下，您似乎会进入调用您的 .rpt 文件的数据源并将其设置在那里。这是我在 VB.Net 中的博客中的一个示例。此代码将遍历所有子报表和主报表并更新连接字符串（假设所有报表/子报表都连接到同一个数据库，如果没有，您可以使用此代码片段来更新各个子报表）。

它将像这样使用（尽管您可能绑定到查看器而不是导出，因此您可以忽略它，这只是示例）。

```
 Using rd As New ReportDocument
        rd.Load("C:\Temp\CrystalReports\InternalAccountReport.rpt")
        rd.ApplyNewServer("serverName or DSN", "databaseUsername", "databasePassword")
        rd.ApplyParameters("AccountNumber=038PQRX922;", True)
        rd.ExportToDisk(ExportFormatType.PortableDocFormat, "c:\temp\test.pdf")
        rd.Close()
    End Using

    System.Diagnostics.Process.Start("c:\temp\test.pdf") 
```

这是扩展方法模块：

```
Imports System.Runtime.CompilerServices
Imports CrystalDecisions.CrystalReports.Engine
Imports CrystalDecisions.Shared
Imports CrystalDecisions.CrystalReports

Namespace Extensions

''' <summary>
''' A set of extension methods to make manually working with Crystal Reports easier.
''' </summary>
''' <remarks>
''' Pieces of this code started in March of 2004 and have evolved over the last 8 years.
''' </remarks>
Public Module CrystalReportExtensions

    '*********************************************************************************************************************
    '
    '            Module:  CrystalReportExtensions
    '      Initial Date:  03/26/2004
    '      Last Updated:  05/22/2012
    '     Programmer(s):  Blake Pell
    '
    '*********************************************************************************************************************

    ''' <summary>
    ''' Applies a new server name, SQL username and password to a ReportDocument.  This method can be used with any number
    ''' of database providers.
    ''' </summary>
    ''' <remarks></remarks>
    <Extension()> _
    Public Sub ApplyNewServer(ByVal report As ReportDocument, serverName As String, username As String, password As String)

        For Each subReport As ReportDocument In report.Subreports
            For Each crTable As Table In subReport.Database.Tables
                Dim loi As TableLogOnInfo = crTable.LogOnInfo
                loi.ConnectionInfo.ServerName = serverName
                loi.ConnectionInfo.UserID = username
                loi.ConnectionInfo.Password = password
                crTable.ApplyLogOnInfo(loi)
            Next
        Next

        'Loop through each table in the report and apply the new login information (in our case, a DSN)
        For Each crTable As Table In report.Database.Tables
            Dim loi As TableLogOnInfo = crTable.LogOnInfo
            loi.ConnectionInfo.ServerName = serverName
            loi.ConnectionInfo.UserID = username
            loi.ConnectionInfo.Password = password

            crTable.ApplyLogOnInfo(loi)
            'If your DatabaseName is changing at runtime, specify the table location. 
            'crTable.Location = ci.DatabaseName & ".dbo." & crTable.Location.Substring(crTable.Location.LastIndexOf(".") + 1)
        Next

    End Sub

    ''' <summary>
    ''' Applies a new server name to the ReportDocument.  This method is SQL Server specific if integratedSecurity is True.
    ''' </summary>
    ''' <param name="report"></param>
    ''' <param name="serverName">The name of the new server.</param>
    ''' <param name="integratedSecurity">Whether or not to apply integrated security to the ReportDocument.</param>
    ''' <remarks></remarks>
    <Extension()> _
    Public Sub ApplyNewServer(report As ReportDocument, serverName As String, integratedSecurity As Boolean)

        For Each subReport As ReportDocument In report.Subreports
            For Each crTable As Table In subReport.Database.Tables
                Dim loi As TableLogOnInfo = crTable.LogOnInfo
                loi.ConnectionInfo.ServerName = serverName

                If integratedSecurity = True Then
                    loi.ConnectionInfo.IntegratedSecurity = True
                End If

                crTable.ApplyLogOnInfo(loi)
            Next
        Next

        'Loop through each table in the report and apply the new login information (in our case, a DSN)
        For Each crTable As Table In report.Database.Tables
            Dim loi As TableLogOnInfo = crTable.LogOnInfo
            loi.ConnectionInfo.ServerName = serverName

            If integratedSecurity = True Then
                loi.ConnectionInfo.IntegratedSecurity = True
            End If

            crTable.ApplyLogOnInfo(loi)
            'If your DatabaseName is changing at runtime, specify the table location. 
            'crTable.Location = ci.DatabaseName & ".dbo." & crTable.Location.Substring(crTable.Location.LastIndexOf(".") + 1)
        Next

    End Sub

    ''' <summary>
    ''' Applies a new database name to all of the tables in the Crystal Report.  If you do not wish to use a schemaName, pass
    ''' a blank string in for it.
    ''' </summary>
    ''' <param name="report">The Crystal Report document.</param>
    ''' <param name="databaseName">The name of the database.</param>
    ''' <param name="schemaName">The schema name if necessary.  If this is not needed, pass a blank in.</param>
    ''' <remarks>Depending on your database server, this may require a schema also.  For instance, in SQL Server
    ''' you may need NorthWind.dbo. </remarks>
    <Extension()> _
    Public Sub ApplyNewDatabaseName(ByVal report As ReportDocument, databaseName As String, schemaName As String)
        Dim prefix As String = ""

        If schemaName <> "" Then
            prefix = String.Format("{0}.{1}.", databaseName, schemaName)
        Else
            prefix = String.Format("{0}.", databaseName)
        End If

        'Loop through each table in the report and apply the new database name
        For Each crTable As Table In report.Database.Tables
            'If your DatabaseName is changing at runtime, specify the table location. 
            crTable.Location = String.Format("{0}{1}", prefix, crTable.Location.Substring(crTable.Location.LastIndexOf(".") + 1))
        Next
    End Sub

    ''' <summary>
    ''' Sets the Username, Password and ServerName property and/or the UseTrustedConnection property with the values listed in the
    ''' provided connection string.  Currently, only Sql Server is supported for automatically loading values from a connection
    ''' string.
    ''' </summary>
    ''' <param name="sqlConnectionString"></param>
    ''' <remarks></remarks>
    <Extension()> _
    Public Sub ApplyCredentialsFromConnectionString(report As ReportDocument, ByVal sqlConnectionString As String)
        ' Apply the connection information from the web.config file.
        Dim cb As New System.Data.SqlClient.SqlConnectionStringBuilder(sqlConnectionString)

        If cb.IntegratedSecurity = False Then
            ApplyNewServer(report, cb.DataSource, cb.UserID, cb.Password)
        Else
            ApplyNewServer(report, cb.DataSource, True)
        End If
    End Sub

    ''' <summary>
    ''' Checks to see if a parameter name exists in the reports parameter fields.  This only checks the top level of
    ''' the report.  The top level should propagate down any parameters that need to be passed down.
    ''' </summary>
    ''' <param name="paramName"></param>
    ''' <param name="report"></param>
    ''' <returns></returns>
    ''' <remarks></remarks>
    <Extension()> _
    Public Function DoesParameterExist(ByVal report As ReportDocument, ByVal paramName As String) As Boolean

        If report Is Nothing Or report.ParameterFields Is Nothing Then
            Return False
        End If

        For Each param As ParameterField In report.ParameterFields
            If paramName = param.Name Then
                Return True
            End If
        Next

        Return False
    End Function

    ''' <summary>
    ''' Takes a parameter string and places them in the corresponding parameters for the report.  The parameter string must 
    ''' be semi-colon delimited with the parameter inside of that delimited with an equal sign.  E.g.<br /><br />
    ''' 
    ''' <code>
    ''' lastName=Pell;startDate=1/1/2012;endDate=1/7/2012
    ''' </code>
    ''' 
    ''' </summary>
    ''' <param name="report">The Crystal Reports ReportDocument object.</param>
    ''' <param name="parameters">A parameter string representing name/values.  See the summary for usage.</param>
    ''' <remarks></remarks>
    <Extension()> _
    Public Sub ApplyParameters(report As ReportDocument, parameters As String)
        ApplyParameters(report, parameters, False)
    End Sub

    ''' <summary>
    ''' Takes a parameter string and places them in the corresponding parameters for the report.  The parameter string must 
    ''' be semi-colon delimited with the parameter inside of that delimited with an equal sign.  E.g.<br /><br />
    ''' 
    ''' <code>
    ''' lastName=Pell;startDate=1/1/2012;endDate=1/7/2012
    ''' </code>
    ''' 
    ''' </summary>
    ''' <param name="report">The Crystal Reports ReportDocument object.</param>
    ''' <param name="parameters">A parameter string representing name/values.  See the summary for usage.</param>
    ''' <param name="removeInvalidParameters">If True, parameters that don't exist in the Crystal Report will
    ''' be removed.  If False, these parameters will be left in and an exception will be thrown listing
    ''' the offending parameter name.</param>
    ''' <remarks></remarks>
    <Extension()> _
    Public Sub ApplyParameters(report As ReportDocument, parameters As String, removeInvalidParameters As Boolean)

        ' No parameters (or valid parameters) were provided.
        If String.IsNullOrEmpty(parameters) = True Or parameters.Contains("=") = False Then
            Exit Sub
        End If

        ' Get rid of any trailing or leading semi-colons that would mess up the splitting.
        parameters = parameters.Trim(";")

        ' The list of parameters split out by the semi-colon delimiter
        Dim parameterList As String() = parameters.Split(Chr(Asc(";")))

        For Each parameter As String In parameterList
            ' nameValue(0) = Parameter Name, nameValue(0) = Value
            Dim nameValue As String() = parameter.Split(Chr(Asc("=")))

            ' Validate that the parameter exists and throw a legit exception that describes it as opposed to the
            ' Crystal Report COM Exception that gives you little detail.  
            If report.DoesParameterExist(nameValue(0)) = False And removeInvalidParameters = False Then
                Throw New Exception(String.Format("The parameter '{0}' does not exist in the Crystal Report.", nameValue(0)))
            ElseIf report.DoesParameterExist(nameValue(0)) = False And removeInvalidParameters = True Then
                Continue For
            End If

            ' The ParameterFieldDefinition MUST be disposed of otherwise memory issues will occur, that's why
            ' we're going the "using" route.  Using should Dispose of it even if an Exception occurs.
            Using pfd As ParameterFieldDefinition = report.DataDefinition.ParameterFields.Item(nameValue(0))
                Dim pValues As ParameterValues
                Dim parm As ParameterDiscreteValue
                pValues = New ParameterValues

                parm = New ParameterDiscreteValue
                parm.Value = nameValue(1)

                pValues.Add(parm)
                pfd.ApplyCurrentValues(pValues)
            End Using
        Next

    End Sub

End Module

End Namespace 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T19:51:29.873

听起来数据源是在 .rpt 文件中设置的。在水晶报表设计器中打开 .rpt 文件（如果您有插件，则打开 VS）并选择“验证数据库”。一旦你提供了这些信息并保存了，它就不应该再这样做了。自原始设置以来，密码可能已更改。

# c# - 将相对日期时间字符串转换为 DateTime 对象

> ID：12002965
> 
> 赞同：5
> 
> 时间：2012-08-17T09:12:42.193
> 
> 标签：c#, datetime, datetime-format

我有`datetime`像这样的相对字符串：

*   “5 分钟前”
*   “10 小时前”
*   “3 天前”等

我如何将其转换为确切的，与[这个问题](https://stackoverflow.com/questions/8701224/how-i-can-convert-date-to-string-formate)`datetime`完全相反

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T09:18:31.453

你需要编写自己的例程来这样做，就像做相反的人必须做的那样。

本质上，您将需要解析文本以查找时间间隔（即分钟、小时、天等...）、数量以及它是过去还是将来（使用`ago`或`from`）。

此时，您将有足够的数据来构建适当的`TimeSpan`实例并使用它`DateTime.Now`来获取该时间。

为了上述工作，您需要确保要解析的字符串值是标准化的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-17T09:26:50.447

此代码应该可以工作：

```
 string input = "10 days ago";

        DateTime result = DateTime.MinValue;
        int minutesMultiplier = 0;

        if (input.Contains("minute"))
            minutesMultiplier = 1;
        else
            if (input.Contains("hour"))
                minutesMultiplier = 60;
            else
                if (input.Contains("day"))
                    minutesMultiplier = 1440;
                else
                    throw new Exception("Couldn't parse time format");

        string numberStr = input.Split(' ')[0];
        int number;
        if (int.TryParse(numberStr, out number))
            result = DateTime.Now.AddMinutes(-number * minutesMultiplier); 
```

它解析间隔名称（例如分钟、小时、天）并将它们相乘以获得分钟数，因为稍后它使用`DateTime.Now.AddMinutes`方法，可以使用`TimeSpan`和调用来完成同样的事情`DateTime.Now.Add`。

这是另一个处理包含多个间隔名称的字符串大小写的示例，例如“10 hours and 15 minutes ago”：

```
 // If there are mixed interval types in an input string
        string input = "10 days and 10 hours ago";

        // Parse out the intervals and numbers
        var matches = Regex.Matches(input, 
                       @"(?<number>\d+)\s(?<interval>(day)|(minute)|(hour))");

        // Convert them to dictionary
        var dic = matches
            .Cast<Match>()
            .ToDictionary(
                key => key.Groups["interval"].Value, 
                o => int.Parse(o.Groups["number"].Value));

        // Calculate the total number of minutes for each interval
        DateTime result = DateTime.MinValue;
        int totalMinutes = 0;

        foreach (var keyValue in dic)
        {
             if (keyValue.Key.Contains("minute"))
                 totalMinutes += keyValue.Value;
            else
                 if (keyValue.Key.Contains("hour"))
                    totalMinutes += keyValue.Value * 60;
                else
                     if (keyValue.Key.Contains("day"))
                        totalMinutes += keyValue.Value * 1440;
                    else
                        throw new Exception("Unparsable time format");
        }

        result = DateTime.Now.AddMinutes(-totalMinutes); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T09:17:41.173

正确的方法是将您的相对值存储为一个值并从（或从您想用作基础的任何内容中）[`TimeSpan`](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)减去该值。`DateTime.Now``DateTime`

您可以使用诸如[`int.Parse`](http://msdn.microsoft.com/en-us/library/b3h1hf19.aspx)将数字（分钟数、小时数等）转换为整数值并将其复制到您的`TimeSpan`值中的方法。确切的解析算法取决于字符串的实际格式，即其中允许使用哪些单词，以及数字出现的顺序。

如果字符串已经被隔离，如您的问题所示，您可以尝试使用正则表达式（使用[`Regex`class](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)）反汇编它们：

```
^(\d+)\s+([a-z]+)\s+ago$ 
```

# url-rewriting - IIS 7.5 Wcf 路由服务。http标头消失

> ID：12002966
> 
> 赞同：0
> 
> 时间：2012-08-17T09:12:47.403
> 
> 标签：url-rewriting, http-headers, iis-7.5, wcf-routing, http-accept-language

我已经设置了一个 wcf 路由服务 (IIS 7.5) 位于我的 winforms 客户端和后端服务器之间。

我正在尝试解决一个错误，该错误显然是由 http 标头“Accept-Language”的消失引起的。客户端在请求中发送此标头，但根据提琴手（以及我正在观察的行为），从 iis 发出的请求没有“Accept-Language”标头。这会导致服务器发回以 en-US 区域设置而不是客户端指定的区域设置格式的数据。

在[这个 url](http://learn.iis.net/page.aspx/665/url-rewrite-module-20-configuration-reference/#Setting_Server_Variables)上，他们举例说明了如何做我想做的事。这是我基于此所做的配置（我已经在进行 url 重写）。serverVariables 部分应该解决我的问题：

```
<system.webServer>
 <!-- These url rewrite rules require the presence of the URL Rewrite 2.0 iis extension -->
 <rewrite>
  <rules>
   <!-- Accept connections to service1.asmx by rewriting that part of the url to WcfRouter.svc/service1 -->
  <rule name="service1Rule" stopProcessing="true">
   <match url="^(.*)svc/service1.asmx" />
   <serverVariables>
    <set name="HTTP_ACCEPT_LANGUAGE" value="da-DK" />
   </serverVariables>
   <action type="Rewrite" url="{R:1}WcfRouter.svc/service1" />
  </rule>
  <!-- Ditto for service2.asmx -->
  <rule name="service2Rule" stopProcessing="true">
   <match url="^(.*)svc/service2.asmx" />
    <serverVariables>
     <set name="HTTP_ACCEPT_LANGUAGE" value="da-DK" />
    </serverVariables>
    <action type="Rewrite" url="{R:1}WcfRouter.svc/service2" />
   </rule>
  </rules>
 </rewrite>
</system.webServer> 
```

url重写工作正常。我唯一剩下的问题是 http 标头修改。在 IIS 管理器中，我已将 HTTP_ACCEPT_LANGUAGE 设置为 url 重写模块中允许的服务器变量。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:00:58.820

原来 url 重写不是罪魁祸首。url 重写后发生的 Wcf 路由破坏了我的 http 标头。

要修复它，我只需要改变

```
<routing filterTableName="filterTable" /> 
```

至

```
<routing filterTableName="filterTable" soapProcessingEnabled="false" /> 
```

在服务行为中

和presto - 问题消失了！这也意味着我可以在我添加到配置中的 url 重写期间删除对 http 标头的处理。

我的 CS 教授说：“如果你找不到问题，那是因为它在其他地方。”

# c++ - 从基类派生多个类的设计困境

> ID：12002971
> 
> 赞同：-1
> 
> 时间：2012-08-17T09:13:16.580
> 
> 标签：c++, oop, inheritance

我正在做一些项目，需要一些简单的建议。

我有一个基类，以及从该基类派生的 6 个类。

这 6 个派生类中的 5 个应该有两个 private `int`，但第 6 个只需要一个 private `int`。当然，成员函数`get()`和`set()`两个整数（第 6 个仅`get()`适用`set()`于第 1 个`int`）。

我的问题是：我应该有一个带有两个`int`s 和`set()`and`get()`函数的基类，还是应该有一个带有一个`int`and`set()`和`get()`的基类`int`，而所有其他派生类（除了第 6 个）还有一个`int`和两个以上的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T09:52:31.863

> 我的问题是：我应该有一个带有两个`int`s 和`set()`and`get()`函数的基类，还是应该有一个带有一个`int`and`set()`和`get()`的基类`int`，而所有其他派生类（除了第 6 个）还有一个`int`和两个以上的方法？

假设公共继承，这完全取决于您的设计要求。问问自己：***我是否需要`int`通过基类引用来访问第二个？***如果答案是*yes*，那么它需要在那个基类中。如果答案是*否定*的，那么它不应该在那个基类中。

我理解不多次实现其他数据的动机，但这是一个实现工件，应该在实现中解决（你可以从另一个实现它的基础*私下*继承），而不是在你的设计中。

* * *

也就是说，请注意，***如果您需要 setter 和 getter，[那么您做错了](http://www.idinews.com/quasiClass.pdf)***。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T09:23:47.143

您的问题的答案取决于不同类的模型以及`int`数据成员的含义。让我们假设您的派生类确实应该从基类继承（这是一个很大的假设）。我还假设我们在这里讨论的是公共继承。

当然，基类不能同时包含两个`int`数据成员。如果您的层次结构正确，则第二个成员仅对此类的某些对象有意义（特别是对您的第 6 类对象没有意义）。请记住，公共继承对 IS-A 关系建模：基类的所有部分也必须适用于所有派生类。

现在是第一个数据成员。它在所有派生类中是否意味着相同？对于您可能拥有的任何其他派生类，这是否也意味着相同？你的基类的所有对象都应该有这个成员吗？如果是这样，它应该出现在基类中。

这里最重要的是要有一个具有正确继承的良好设计。如果你有这个，那么你的问题的答案是微不足道的。如果你不这样做，答案就无关紧要，因为你必须先修复你的设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T09:20:24.473

你当然不应该在你的类中有多余的方法。我建议创建*第 7*类，作为其他 5 类的基础：

```
class BaseLevelOne { protected: int X; };
class BaseLevelTwo : public BaseLevelOne { protected: int Y; };

class One : public BaseLevelOne { /* get & set */ };
class Two /* Three, Four, etc. */ : public BaseLevelTwo { }; 
```

这样你：

*   不必写第二`int`五遍
*   不必在第一类中有多余的成员

但是，如果您确实说明了您想对这些类做什么，那么我的回答可能会更精确，更适合实际用例。

# php - .htaccess RewriteRule 中的瑞典语字符

> ID：12002973
> 
> 赞同：1
> 
> 时间：2012-08-17T09:13:19.023
> 
> 标签：php, .htaccess, mod-rewrite, query-string

我在使用瑞典语字符 (ä,ö.å) 时遇到 .htaccess RewriteRule 问题

我在我的 .htaccess 文件中写了规则是..

```
Options +FollowSymLinks
RewriteEngine on 
```

工作正常。当我输入`Http://www.mydomain.se/Läga-till`

```
RewriteRule ^(.*)-&-(.*)/$ index.php [NC,L] 
```

但是当我写这个规则时它不起作用..

```
RewriteRule ^Läga-till/$ index.php [NC,L] 
```

谁能帮我解决这个问题？？？

已经一个多星期了，但还可以找到合适的解决方案.. :('

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:27:07.327

不知道为什么第一条规则适用于您提供的 URL，但 URI 如下所示：

```
Läga-till 
```

与 URI 匹配的正则表达式如下所示：

```
^Läga-till/$ 
```

所以有一个不匹配的斜线。尝试将正则表达式更改为：

```
^Läga-till/?$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:29:36.980

尝试这个

```
RewriteRule ^Läga-till/([^/]+)/?$ index.asp?page=om-mig&subpage=$1 [NC,L,NU] 
```

# haskell - Haskell 中的亚型多态性

> ID：12002979
> 
> 赞同：34
> 
> 时间：2012-08-17T09:13:30.117
> 
> 标签：haskell, polymorphism

构建 GUI 小部件类的层次结构几乎是面向对象编程中的标准练习。您有某种抽象`Widget`类，具有可以包含其他小部件的小部件的抽象子类，然后您有大量支持文本显示的小部件的进一步抽象类，支持作为输入焦点的小部件，具有布尔值的小部件状态，一直到实际的具体类，例如按钮、滑块、滚动条、复选框等。

我的问题是：在 Haskell 中执行此操作的最佳方法是什么？

有很多事情使构建 Haskell GUI 变得困难，但这*不是*我的问题的一部分。在 Haskell 中进行交互式 I/O 有点棘手。实现 GUI 几乎总是意味着为极低级别的 C 或 C++ 库编写包装器。编写此类包装器的人倾向于逐字复制现有的 API（大概是这样任何了解包装库的人都会有宾至如归的感觉）。目前我对这些问题不感兴趣。我完全感兴趣的是如何最好地在 Haskell 中建模子类型多态性。

我们希望从假设的 GUI 库中获得什么样的属性？好吧，我们希望可以随时添加新的小部件类型。（换句话说，封闭的一组可能的小部件是不好的。）我们希望最大限度地减少代码重复。（有*很多*小部件类型！）理想情况下，我们希望能够在必要时规定一种特定的小部件类型，而且还能够在需要时处理*任何*小部件类型的集合。

在任何自尊的 OO 语言中，上述所有内容当然都是微不足道的。但是在 Haskell 中最好的方法是什么？我可以想到几种方法，但我不确定哪一种是“最好的”。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-17T10:44:45.327

拥有实际的小部件对象是非常面向对象的。函数世界中常用的技术是使用函数响应式编程 (FRP)。我将简要概述纯 Haskell 中的小部件库在使用 FRP 时的外观。

* * *

**tl/dr：**您不处理“小部件对象”，而是处理“事件流”的集合，而不关心来自哪些小部件或这些流来自何处。

* * *

在 FRP 中，有一个基本概念`Event a`，可以看作是一个无限列表`[(Time, a)]`。所以，如果你想为一个向上计数的计数器建模，你可以把它写成`[(00:01, 1), (00:02, 4), (00.03, 7), ...]`，它将一个特定的计数器值与给定的时间相关联。如果你想模拟一个被按下的按钮，你可以生成一个`[(00:01, ButtonPressed), (00:02, ButtonReleased), ...]`

通常还有一种叫做 a 的东西`Signal a`，它类似于 a `Event a`，只是模型值是连续的。您在特定时间没有一组离散的值，但是您可以询问`Signal`它的值，比如说，`00:02:231`它会给您这个值`4.754`或其他东西。将信号视为模拟信号，例如医院的心脏电荷计（心电图设备/Holter 监视器）上的信号：它是一条上下跳跃但从不产生“间隙”的连续线。例如，一个窗口总是有一个标题（但也许它是空字符串），所以你总是可以询问它的值。

* * *

在 GUI 库中，在低级别上，会有一个`mouseMovement :: Event (Int, Int)`和`mouseAction :: Event (MouseButton, MouseAction)`或一些东西。这`mouseMovement`是实际的 USB/PS2 鼠标输出，因此您只能将位置差异作为事件获得（例如，当用户向上移动鼠标时，您会收到事件`(12:35:235, (0, -5))`。然后您就可以“整合”或更确切地说“累积”获得`mousePosition :: Signal (Int, Int)`绝对鼠标坐标的移动事件。`mousePosition`还可以考虑绝对指针设备，例如触摸屏，或重新定位鼠标光标的操作系统事件等。

类似地，对于键盘，会有`keyboardAction :: Event (Key, Action)`, 并且还可以将该事件流“集成”到 a`keyboardState :: Signal (Key -> KeyState)`中，让您可以在任何时间点读取键的状态。

* * *

当您想在屏幕上绘制内容并与小部件交互时，事情会变得更加复杂。

要只创建一个窗口，可以使用一个名为“魔术函数”：

```
window :: Event DrawCommand -> Signal WindowIcon -> Signal WindowTitle -> ...
       -> FRP (Event (Int, Int) {- mouse events -},
               Event (Key, Action) {- key events -},
               ...) 
```

该函数会很神奇，因为它必须调用特定于操作系统的函数并创建一个窗口（除非操作系统本身是 FRP，但我对此表示怀疑）。这也是它在monad 中的原因，因为它会在幕后`FRP`调用monad 中的`createWindow`and`setTitle`等。`registerKeyCallback``IO`

当然可以将所有这些值分组到数据结构中，以便：

```
window :: WindowProperties -> ReactiveWidget
       -> FRP (ReactiveWindow, ReactiveWidget) 
```

它们是决定窗口外观和行为的`WindowProperties`信号和事件（例如，是否应该有关闭按钮、标题应该是什么等）。

代表键盘和鼠标事件的`ReactiveWidget`S&E，以防您想在应用程序中模拟鼠标单击，以及`Event DrawCommand`代表您想在窗口上绘制的内容流。这种数据结构对所有小部件都是通用的。

`ReactiveWindow`表示窗口最小化等事件，输出表示`ReactiveWidget`来自外部/用户的鼠标和键盘事件。

然后创建一个实际的小部件，比如说一个按钮。它将具有以下签名：

```
button :: ButtonProperties -> ReactiveWidget -> (ReactiveButton, ReactiveWidget) 
```

将`ButtonProperties`确定按钮的颜色/文本/等，并且`ReactiveButton`将包含例如`Event ButtonAction`和`Signal ButtonState`读取按钮的状态。

请注意，该`button`函数是纯函数，因为它仅依赖于纯 FRP 值，例如事件和信号。

如果想要对小部件进行分组（例如水平堆叠它们），则必须创建例如：

```
horizontalLayout :: HLayoutProperties -> ReactiveWidget
                 -> (ReactiveLayout, ReactiveWidget) 
```

将`HLayoutProperties`包含有关边框大小和`ReactiveWidget`所包含小部件的 s 的信息。然后将为每个子小部件`ReactiveLayout`包含一个带有一个元素的元素。`[ReactiveWidget]`

布局会做的是它有一个内部`Signal [Int]`来确定布局中每个小部件的高度。然后它将接收来自输入的所有事件`ReactiveWidget`，然后根据分区布局选择一个输出`ReactiveWidget`以将事件发送到，同时还将例如鼠标事件的来源转换为分区偏移量。

* * *

为了演示这个 API 是如何工作的，考虑这个程序：

```
main = runFRP $ do rec -- Recursive do, lets us use winInp lazily before it is defined

  -- Create window:
  (win, winOut) <- window winProps winInp

      -- Create some arbitrary layout with our 2 widgets:
  let (lay, layOut) = layout (def { widgets = [butOut, labOut] }) layInp
      -- Create a button:
      (but, butOut) = button butProps butInp
      -- Create a label:
      (lab, labOut) = label labProps labInp
      -- Connect the layout input to the window output
      layInp = winOut
      -- Connect the layout output to the window input
      winInp = layOut
      -- Get the spliced input from the layout
      [butInp, layInp] = layoutWidgets lay
      -- "pure" is of course from Applicative Functors and indicates a constant Signal
      winProps = def { title = pure "Hello, World!", size = pure (800, 600) }
      butProps = def { title = pure "Click me!" }
      labProps = def { text = reactiveIf
                              (buttonPressed but)
                              (pure "Button pressed") (pure "Button not pressed") }
  return () 
```

（`def`来自`Data.Default`于`data-default`）

这将创建一个事件图，如下所示：

```
 Input events ->            Input events ->
win ---------------------- lay ---------------------- but \
     <- Draw commands etc.  \   <- Draw commands etc.      | | Button press ev.
                             \  Input events ->            | V
                              \---------------------- lab /
                                <- Draw commands etc. 
```

请注意，任何地方都不必有任何“小部件对象”。布局只是一个根据分区系统转换输入和输出事件的函数，因此您可以将获得访问权限的事件流用于小部件，或者您可以让另一个子系统完全生成流。按钮和标签也是如此：它们只是将点击事件转换为绘制命令或类似内容的函数。它是完全解耦的代表，并且本质上非常灵活。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-23T12:13:35.523

wxHaskell GUI 库出色[地](http://www.haskell.org/haskellwiki/WxHaskell)使用**幻像类型**来建模小部件层次结构。

想法如下：所有小部件共享相同的实现，即它们是指向 C++ 对象的外部指针。但是，这并不意味着所有小部件都需要具有相同的类型。相反，我们可以像这样构建一个层次结构：

```
type Object a = ForeignPtr a

data CWindow a
data CControl a
data CButton a

type Window  a = Object  (CWindow a)
type Control a = Window  (CControl a)
type Button  a = Control (CButton a) 
```

这样， type 的值`Control A`也与type 匹配`Window b`，因此您可以将控件用作窗口，但反之则不行。如您所见，子类型化是通过嵌套类型参数实现的。

有关此技术的更多信息，请参阅[Dan Leijen 关于 wxHaskell 的论文中的](http://legacy.cs.uu.nl/daan/download/papers/wxhaskell.pdf)第 5 节。

* * *

请注意，这种技术似乎仅限于小部件的实际表示是统一的，即始终相同的情况。但是，我相信通过一些想法，它可以扩展到小部件具有不同表示的情况。

特别是，观察到面向对象可以通过在数据类型中包含方法来建模，就像这样

```
data CWindow a = CWindow
    { close   :: IO ()
    , ...
    }
data CButton a = CButton
    { onClick :: (Mouse -> IO ()) -> IO ()
    , ...
    } 
```

子类型化可能会在这里节省一些样板，但这不是必需的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-17T11:24:39.123

要了解可以在 Haskell 中完成的 OOP，例如子类型多态性，您可以查看[OOHaskell](https://web.archive.org/web/20100117105118/http://homepages.cwi.nl/~ralf/OOHaskell/)。这再现了各种强大的 OOP 类型系统的语义，保留了大多数类型推断。实际的数据编码并没有得到优化，但我怀疑类型系列可能允许更好的演示。

可以使用类型类对接口层次结构（例如 Widget）进行建模。添加新实例是可能的，因此一组具体的小部件是打开的。如果您想要一个可能的小部件的特定列表，那么 GADT 可以是一个简洁的解决方案。

子类的特殊操作是向上转换和向下转换。

这首先需要有一个 Widget 集合，通常的结果是使用存在类型。[如果您阅读HList 库](http://hackage.haskell.org/package/HList-0.2.3)的所有内容，还有其他有趣的解决方案。向上转换相当容易，编译器可以确定所有转换在编译时都是有效的。向下转换本质上是动态的，需要一些运行时类型信息支持，通常是 Data.Typeable。给定类似 Typeable 的东西，向下转换只是另一个类型类，结果包装在 Maybe 中以指示失败。

其中大部分都有样板文件，但 QuasiQuoting 和 Templating 可以减少这种情况。类型推断仍然可以在很大程度上起作用。

我没有探索新的约束种类和类型，但它们可能会增加向上转换和向下转换的存在解决方案。

# django - 带有 nginx + uwsgi 的 django 不显示模板

> ID：12002981
> 
> 赞同：0
> 
> 时间：2012-08-17T09:13:36.533
> 
> 标签：django, nginx, uwsgi, fapws3

在 Django 开发服务器上，django app 运行良好。但是一旦我设置了生产测试运行，我只得到文本内容，其中模板视图没有按预期显示。我怎么了？

我有最新的 django 1.5。Nginx - 0.8.54 uWSGI - 1.2.5

# 用于 uWSGI 的 cmd：

```
 sudo uwsgi --ini test.ini 
```

# test.ini 内容：

```
[uwsgi]
# set the http port
http = :8080
python_path = /home/test/Desktop/IT_mgmt/IT_mgmt/settings.py/
# change to django project directory
chdir = /home/test/Desktop/IT_mgmt
# load django
module = IT_mgmt.wsgi 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T21:33:24.403

Nginx 应该管理你的静态文件，尝试访问你的 CSS 或 JS ...

nginx.conf 例如：

```
location ^~ /static/ {
    } 
```

# c++ - 确定 C/C++ (Linux)、LGPL 或 BSD 中的 CPU 速度/内存是一项要求

> ID：12002984
> 
> 赞同：0
> 
> 时间：2012-08-17T09:13:40.367
> 
> 标签：c++, c, linux, linux-kernel, lgpl

我正在为我的大学课程编写一个分布式、**嵌入式**、多主/从应用程序，作为其中的一部分，我需要一种方法来**实时**确定每个系统的 CPU 速度、CPU 使用率和可用内存，而无需分别使用大量内存cpu消耗，为了自动调整网络和设备的配置。

定期触发系统调用或读取文件（open-read-close ....）并不真正构成对资源友好的选项。我确定必须有一些符合**POSIX**的解决方案来解决这个问题？

这些系统都将使用**Linux**作为操作系统，我应该**专门使用 LGPL 或 BSD**库来发布。

到目前为止，我还没有找到任何符合标准的解决方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T10:13:25.617

您可以使用[`libprocps`](http://gitorious.org/procps). 尽管许多网页都说它是 GPL，但它是 LGPL。查看[提交日志](http://gitorious.org/procps/procps/commit/ce61089)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T09:42:45.567

以下是一些可以引导您找到解决方案的提示：

1-[内核信息](http://linux.die.net/man/2/uname)

2-您可以在`/proc/cpuinfo`. 谷歌的“Proc 文件系统”。

3-[提取系统信息](http://www.daniweb.com/software-development/c/threads/33551/c-program-to-extract-system-info)

[4- 另一个在这里](https://stackoverflow.com/questions/448811/calculate-total-cpu-usage)可能有帮助的 StackOverflow 主题

从那我认为你可以引导自己找到解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T11:22:54.427

[hwloc](http://www.open-mpi.org/projects/hwloc/)可能是您正在搜索的内容。它是开源的，看起来它甚至支持多个平台。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T11:00:33.667

您需要执行三个步骤：

1) 使用 system() 或 popen() 从您的程序调用 shell 命令或实用程序。（参考：[这个](http://www.cs.uleth.ca/~holzmann/C/system/shell_commands.html)）

[2) 从此列表中](http://www.cyberciti.biz/tips/how-do-i-find-out-linux-cpu-utilization.html)决定一个实用程序，以生成利用率数据。

3）从程序中捕获这些数据并解析它以收集相关信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T09:47:22.753

我以前必须做这样的事情，我的解决方案是为系统文件 /proc/cpuinfo 和 /proc/meminfo 编写一个文件解析器，但我不知道它的可移植性如何（适用于 Ubuntu 和 Scientific Linux我）。

# apache - 写入 .htaccess 文件以防止在文件夹和子文件夹中缓存

> ID：12002987
> 
> 赞同：0
> 
> 时间：2012-08-17T09:13:43.657
> 
> 标签：apache, .htaccess, caching, header

我想编辑我的 .htaccess 以防止当前文件夹加上所有子文件夹来缓存内容。该站点包含 html、图像、swf、xml 文件。

我试过这个，但服务器不喜欢那样。

```
<FilesMatch ".(js|css|pdf|swf)$">
Header set Cache-Control no-cache
</FilesMatch> 
```

> 内部服务器错误
> 
> 服务器遇到内部错误或配置错误，无法完成您的请求。
> 
> 请联系服务器管理员 xxx@xxx.com 并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。
> 
> 服务器错误日志中可能提供有关此错误的更多信息。
> 
> 此外，在尝试使用 ErrorDocument 处理请求时遇到 500 Internal Server Error 错误。
> 
> Apache/2.2.14 (Ubuntu) 服务器位于 www.xxx.com 端口 80

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:25:55.473

语法是正确的，所以我的直接问题是：你启用了 mod_headers 吗？

```
ls /etc/apache2/mods-enabled/headers.* -l 
```

它通常被启用，但并非总是如此。如果没有，请让您的管理员添加符号链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:27:47.357

'尝试使用 ErrorDocument 处理请求时遇到 500 内部服务器错误错误'

看起来它与上面的代码片段无关。查看您的 VirtualHosts 配置。如果您在 DocumentRoot 指令中定义对不存在的位置的引用，则 Apache 将抛出错误。

# jsf-2 - 刷新 JSF 页面

> ID：12002988
> 
> 赞同：1
> 
> 时间：2012-08-17T09:13:44.240
> 
> 标签：jsf-2, primefaces

我有一个 JSF 页面，我需要允许用户在该页面上动态创建表单并提交从同一页面输入到此表单中的数据。

我采用了两种设计方法来实现它，但它们都不能完全发挥作用。

方法一：我将 ap:panel 组件放在 JSF 页面上，作为动态表单的容器，并将其绑定到我的 backing bean。此外，我放置了 commandButtons 以在页面上添加表单元素，并且在这些按钮的操作处理程序中，我放置了将特定 UIComponents 添加到面板 UI 组件的逻辑。这些动作处理程序的结果，我设置为与 faces-redirect=true 相同的页面。结果：动态显示正确，但此动态表单的提交按钮始终仅在第二次单击时有效。

方法二：我把 ap:panel 组件放在 JSF 页面上，作为动态表单的容器。在这个面板中，我使用 ui:include 包含了一个生成的 JSF 页面。与之前的方法类似，在添加表单元素的命令按钮的操作处理程序中，我生成要包含的 JSF 页面。这些动作处理程序的结果，我设置为与 faces-redirect=true 相同的页面。结果：在动作处理程序执行和页面渲染完成后，生成的 JSF 页面没有立即显示。刷新 2 或 3 次手册页后，将显示生成的 JSF 页面。

我想，我没有采用正确的设计来满足我的要求。您能否建议我在这两种方法或任何替代方法中出了什么问题。

我正在使用 PrimeFaces 和 Tomcat 7.0.27。

最好的问候，阿南德。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:05:02.757

我一直在 JSF 2.2 中使用 Glassfish 上的 PrimeFaces 3.3 开发单页管理应用程序。您应该能够使用托管 bean 和 ajax 处理所有动态表单需求。确保您的提交表单 bean 是 ViewScoped。我的大部分 JSF 问题都与范围有关。每个表单标签都应该有一个单一的用途。这是我用于 FORM 页面的结构。

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui"      
  xmlns:f="http://java.sun.com/jsf/core">
<h:head>
</h:head>
<h:body>
    <h2>
       FORM ONE
    </h2>        
    <h:form>
       <p:panel> or <p:panelGrid>
    </h:form>
    <h2>
       FORM TWO
    </h2>        
    <h:form>
       <p:panel> or <p:panelGrid>
    </h:form>
</h:body> 
```

BalusC 是 JSF 之王，这里是他关于这个主题的相关条目。

[http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ManagedBeanScopes](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ManagedBeanScopes)

[http://balusc.blogspot.com/2010/06/benefits-and-pitfalls-of-viewscoped.html](http://balusc.blogspot.com/2010/06/benefits-and-pitfalls-of-viewscoped.html)

您使用的是 JSF 1.2 还是 2.x？

[http://balusc.blogspot.com/2006/06/communication-in-jsf.html](http://balusc.blogspot.com/2006/06/communication-in-jsf.html)

# php - 将mysql where子句列名和运算符传递给PHP ajax脚本是否安全

> ID：12002989
> 
> 赞同：0
> 
> 时间：2012-08-17T09:13:52.190
> 
> 标签：php, javascript, jquery, mysql, ajax

我正在尝试构建一种强大、简单、安全、包罗万象的方法来通过 ajax 将动态 SQL 查询传递给 php 脚本。我认为我还没有想出获胜者，但我现在所拥有的似乎对我的应用程序有用。我希望我的 Web 服务器上只有一个 php 脚本，它接受输入变量来构建 SQL 查询、执行查询并将结果返回到网站。执行查询并返回结果不是问题。问题是将这些输入变量传递给脚本的正确且安全的方法。

我遇到的最大困惑是**如何生成 WHERE 子句**仍然能够解释所有可能的不同 WHERE 子句。

假设服务器上的 PHP 文件名为`master.php`.

从 Javascirpt 我有这个：

```
$.ajax({
  type: "POST",
  url: "master.php",
  dataType: "xml",
  data: { 
      schema: "the_schema", 
      table: "the_table",
      select: JSON.stringify(['col_name_1','col_name_2','...']),
      where: JSON.stringify(["status","!=","Some Status","and","STR_TO_DATE(date,","%m/%d/%Y",")",">","(date(now())","-","INTERVAL","30","day)"])
  },
  success: function (data){
      alert(data);
      // of course here I will actually do something with the data, this is just for illustration of how the data is returned to the web page.
  }
}); 
```

该`data`变量将是来自数据库的 XML 数据，字符串为：“failure: error msg”。

在`master.php`服务器上的脚本中，我有这个：

```
<?php
    include '/config_file.php'; //checks user permissions and establishes mysqli connection

    /*
     * Table and schema are required 
     */
    $table = $mysqli->real_escape_string($_POST['table']);
    $schema = $mysqli->real_escape_string($_POST['schema']);

    /*
     * Select section
     * if there is no select then just use *
     */
    if (isset($_POST['select'])){
        $select_string = 'select ';
        $select = json_decode($_POST['select']);
        foreach($select as $key => $value){
            $select_string .= '`'.$mysqli->real_escape_string($value).'`, ';
        }
    }else{
        $select_string = 'select * ';
    }

    /*
     * Where section
     */
    if (isset($_POST['where'])){
        $where = json_decode($_POST['where']);
    }

    if (isset($where)){
        $where_string = ' where ';
        foreach ($where as $key => $value){
            if (strpos($value, ' ') !== false or strpos($value, '%') !== false){
                // if there is a space or % in the value, it must be a string so enclose it in quotes
                $where_string .= '"'.$mysqli->real_escape_string($value).'" ';
            }else{
                $where_string .= $mysqli->real_escape_string($value).' ';
            }
        }
        $where_string = rtrim($where_string);
    }

    if(!isset($where_string)) $where_string = '';

    /*
     * End of Where Section
     */

    /*
     * Build SQL
     */
    $SQL = $select_string.'from '.$schema.'.'.$table.$where_string;

    //...continue to execute query and echo results
?> 
```

如您所见，`where`数组的每个部分都被转义并添加到查询中，甚至列名和运算符（=、!=、>、< 等）。

另外，正如您所看到的，它们似乎有点疯狂，我为 where 子句的这一部分的每个部分传递了单独的字符串->`and STR_TO_DATE(date, "%m/%d/%Y" ) > (date(now()) - INTERVAL 30 day)`

如果你们都有

1.  将动态 where 子句传递给 ajax 脚本的经验
2.  如果你有更好的主意
3.  查看脚本中的安全漏洞

请告诉我。希望我们能得到一个很好的、通用的数据基础脚本。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:30:05.877

我个人不推荐这种在 javascript 中公开数据库列名的方法，这是完全危险的。

简单的例子是您可以在浏览器级别操作 ajax 参数并针对您的数据库执行它。您只是使黑客能够获取有关您的数据的更多信息。

例如，我可以停止 where close 以便我可以通过执行不带 where 参数的调用来查看数据库中的所有数据。如果您想开发这样的动态查询，请确保您在 ajax 传递的参数和真实表列之间使用了一些映射，以便这些列不会直接暴露给黑客。

这就是我可以在这个脚本中看到的基本安全问题。

希望这可以帮助。

谢谢。

# android - 如何在android中将源设置为目标路径

> ID：12002993
> 
> 赞同：0
> 
> 时间：2012-08-17T09:14:01.463
> 
> 标签：android, google-maps, gps

如何在android中将源设置为目标路径..当用户离开路径时，它应该通知用户......请帮助我这样做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:18:38.667

检查以下链接，你会找到你要找的

[在android中查找从源到目的地的路线方向](https://stackoverflow.com/questions/4836468/finding-route-directions-from-source-to-destinaton-in-android)

[显示具有多个航点的两点之间的路线](https://stackoverflow.com/questions/11039647/showing-a-route-between-two-points-with-multiple-waypoints)

[http://www.vogella.com/articles/AndroidLocationAPI/article.html](http://www.vogella.com/articles/AndroidLocationAPI/article.html)

[http://dhavaltshah2012.blogspot.in/2012/04/source-to-destination-path-in-map.html](http://dhavaltshah2012.blogspot.in/2012/04/source-to-destination-path-in-map.html)

[如何在android中的源和目的地之间绘制火车路线图](https://stackoverflow.com/questions/8500051/how-to-draw-train-route-map-between-source-and-destination-in-android)

# ruby - ruby192：具体方法调用

> ID：12002994
> 
> 赞同：1
> 
> 时间：2012-08-17T09:14:04.720
> 
> 标签：ruby

```
module B
  def stub
    extend()
  end

  def extend
    puts "B:extend"
  end
end

class A
  include B
  def extend
    puts "A:extend"
  end
end

a = A.new

a.stub 
# output: A:extend
# would like to have: B:extend 
```

问题是：
如何在不修改代码和不重命名方法的情况下从模块`a.stub`调用方法？`extend``B``B``A``extend`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T09:48:34.263

`include B`添加`B`的方法，`A`因此您的方法定义将覆盖`B`的实现。

您可以使用该`alias`方法保存对`B`'s 方法的引用并在以下位置实现您自己的`stub`方法`A`：

```
class A
  include B
  alias :b_extend :extend

  def stub
    b_extend
  end

  def extend
    puts "A:extend"
  end
end

A.new.stub
# B:extend 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T09:42:38.520

也许猴子补丁可以解决这个问题。

```
module B
  alias original_stub stub
  alias b_extend extend
  def stub
    b_extend
  end
end 
```

但是如果你的项目确实有很多对原始存根的调用......每个调用都应该被修改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T09:54:03.793

```
def a.extend
  self.class.ancestors[1].instance_method(:extend).bind(self).call
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T10:39:11.553

我只是又一次尝试。

```
A.class_eval do
 if self.include? B
   def extend
     super
   end
  end
end

A.new.stub
#=> B:extend 
```

如果这是错误的方法，请纠正我。

# php - symfony 2 找不到错误类

> ID：12002997
> 
> 赞同：0
> 
> 时间：2012-08-17T09:14:16.763
> 
> 标签：php, symfony

我正在使用 swiftmailer 在 symfony 中创建一个邮件类。我写了如下邮件类：

```
<?php
namespace Ens\NewBundle\Controller\Services;

class MyMailers
{

 public $setTovar='';

 public function setToloc($name)
 {
    $this->setTovar=$name;
 }

 public function mail()
 {
        date_default_timezone_set('Asia/Kolkata');

        $transport = \Swift_SmtpTransport::newInstance('smtp.gmail.com', 465, 'ssl')
        ->setUsername('smtptest.hi@gmail.com')
        ->setPassword('scientech');
        $mailer = \Swift_Mailer::newInstance($transport);
        $message = \Swift_Message::newInstance('Wonderful Subject');
        $message->setFrom('ucerturohit@gmai.com');
        $message->setTo($this->setTovar);
        $message->setBody('Here is the message itself');
        $numSent = $mailer->send($message);
        return $numSent;
    }
} 
```

在`Notification.php`我编写的代码如下：

```
//require_once('MyMailers.php');
use Ens\NewBundle\contrller\Services\MyMailers;
    function NotificationOnSignUp($z)
    {
    // echo $z;die;
         // $y=unserialize($z);
      echo $z;
      echo "<pre>";
      print_r($z);
      echo "</pre>";
          $x=new MyMailers;
      $x->setToloc($z['to']);

          $z=$x->mail();
      if($z==1)
   $name='success';
  else
   $name='failed'; 
```

当我运行此代码时，我收到错误：

`Fatal error: Class 'Ens\NewBundle\contrller\Services\MyMailers' not found in /var/www/Symfony/src/Ens/NewBundle/Controller/Services/Notification.php on line 13`我应该怎么办 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:17:58.677

`$x=new \MyMailers;`将在全局命名空间中找到。

你应该做的是：

```
use Ens\NewBundle\Controller\Services\MyMailers as MyMailers;

$x = new MyMailers; 
```

# azure - REST API 创建虚拟机部署：如何使用 AD DC 创建 VM？

> ID：12002999
> 
> 赞同：0
> 
> 时间：2012-08-17T09:14:22.413
> 
> 标签：azure, dns, virtual-machine

API在这里：http: [//msdn.microsoft.com/en-us/library/windowsazure/jj157194](http://msdn.microsoft.com/en-us/library/windowsazure/jj157194)

在请求正文中，我可以看到如何加入现有域，但如何创建域？

由于我需要编写代码来配置 VM，我想知道是否可以定义一个新的域林？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:50:58.647

您不能直接将 VM 创建为 AD DC。此外，我看到的所有教程都建议您将云用于 Replica AD 或 Forest AD，而不是用于主 DC。

查看这些教程：

*   [https://www.windowsazure.com/en-us/manage/services/networking/replica-domain-controller/](https://www.windowsazure.com/en-us/manage/services/networking/replica-domain-controller/)
*   [https://www.windowsazure.com/en-us/manage/services/networking/active-directory-forest/](https://www.windowsazure.com/en-us/manage/services/networking/active-directory-forest/)