# StackOverflow 问答 12458000-12458999

# ruby-on-rails - 支持 Rails 的 PayPal 隐式支付（自适应支付）的良好替代方案？

> ID：12458007
> 
> 赞同：0
> 
> 时间：2012-09-17T11:11:25.777
> 
> 标签：ruby-on-rails, system, payment

由于使用隐式付款的商业模式，我的应用被 PayPal 拒绝了。我有哪些替代方法可以自动从我的应用程序向用户汇款？我的公司在澳大利亚，否则我会看看 Stripe...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:32:15.587

我有过积极的经验： [Ogone](http://www.ogone.de/en)

他们也支持澳大利亚，我认为付款将通过美元完成。

希望能帮助到你。

# c# - 在图像中查找方格板，并识别角度和距离

> ID：12458011
> 
> 赞同：3
> 
> 时间：2012-09-17T11:11:35.777
> 
> 标签：c#, image-processing, computer-vision

我想要做的是获取一个源图像，其中将包含一个已知物理尺寸和已知正方形数量的黑白方格板，并识别所述板的边界，以及它的角度被观察（假设它完全平坦）以及从什么距离观察。

如果我能可靠地识别棋盘的 4 个角，那么我就知道如何计算角度和距离，所以任务更多是关于识别棋盘。

到目前为止，我尝试的是对图像进行灰度化并增加对比度，因此我最终得到了一张鲜明的黑白图像（在眼睛看来，只有白色方块包含黑色） - 虽然我可以识别边界通过测量从黑色->白色->黑色的变化频率，从自上而下的角度来看，电路板很好，我不知道如何从任何角度进行此操作。

名义上我是用 C# 来做这件事的，但就实际答案而言，我很高兴看到任何具有类似 c 语法的代码示例——不过，我对这个的数学和方法更感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T18:56:00.773

在 3d 世界中寻找一般的 2d 对象通常使用 SIFT 或 SURF。

有2个步骤：

*   在图像中找到可管理数量的局部特征（例如强角）
*   找到图像中的这些点与搜索模式之间的相关性

OpenCV 有一个实现： [Features2D + Homography to find a known object](http://www.chrisevansdev.com/computer-vision-opensurf.html) The [Wikipedia article](http://en.wikipedia.org/wiki/SURF) on surf 还指出了另一个[c# 实现](http://www.chrisevansdev.com/computer-vision-opensurf.html)。另请参阅[此 Stackoverflow 答案](https://stackoverflow.com/a/10169025/145999)：

* * *

现在这是一种非常通用的方法，我不知道它与您的棋盘格配合得如何。

但是棋盘模式有特定的方法：例如[openCV函数cvFindChessboardCorners](http://opencv.willowgarage.com/documentation/camera_calibration_and_3d_reconstruction.html#findchessboardcorners)（[教程](http://dasl.mem.drexel.edu/~noahKuntz/openCVTut10.html)）

我从未使用过它，但我发现了[这个算法的描述](http://graphicon.ru/oldgr/en/research/calibration/opencv.html)：（[来源在文件 cvcalibinit.cpp 中](http://ros.informatik.uni-freiburg.de/roswiki/doc/api/outlet_detection/html/cvcalibinit_8cpp_source.html)）

*   通过阈值化来分割黑白方块的图像二值化
*   找到黑色方块的角：
    *   找到黑色区域边界的轮廓
    *   选择合适形状的轮廓
    *   用 4 顶点多边形逼近这些轮廓
*   在这些中选择类似于校准图案正方形的四边形
*   提取选定四边形的角，附近至少有一个角
*   根据校准对象的大小将选定四边形的角按线分组

# c# - 如何压缩 FTP 服务器目录中的文件

> ID：12458015
> 
> 赞同：2
> 
> 时间：2012-09-17T11:11:49.660
> 
> 标签：c#, ftp, zip

在我的应用程序中，我需要从 FTP 服务器下载一些文件。我通过 for 循环进行编码以逐个下载，它工作正常。我的问题是它的每个文件的处理速度都很慢，因为它会提供凭据。因此，如果我可以将这些文件压缩到 FTP 服务器中，则可以快速下载。如果有办法请指导我。这里我的代码：

> 块引用

```
 private void button1_Click(object sender, EventArgs e)
    {
        string[] list = GetFileList();
        DownloadFile(list, "e:\\sample\\");
    }

    private String[] GetFileList()
    {
        FtpWebRequest request = (FtpWebRequest)WebRequest.Create(new Uri(_remoteHost));
        request.Credentials = new NetworkCredential(_remoteUser, _remotePass);
        request.Method = WebRequestMethods.Ftp.ListDirectory;

        FtpWebResponse response = (FtpWebResponse)request.GetResponse();
        Stream responseStream = response.GetResponseStream();
        StreamReader reader = new StreamReader(responseStream);

        string FileNames = reader.ReadToEnd();
        string[] Files = Regex.Split(FileNames, "\r\n");
        return Files;
    }

    private void DownloadFile(string[] fileList, string destination)
    {
        for (int i = 2; i <= fileList.Length - 1; i++)
        {
            FtpWebRequest request = (FtpWebRequest)WebRequest.Create(_remoteHost + fileList[i]);
            request.Method = WebRequestMethods.Ftp.DownloadFile;
            request.Credentials = new NetworkCredential(_remoteUser, _remotePass);
            FtpWebResponse response = (FtpWebResponse)request.GetResponse();
            Stream responseStream = response.GetResponseStream();
            StreamReader reader = new StreamReader(responseStream);

            StreamWriter writer = new StreamWriter(destination + fileList[i]);
            writer.Write(reader.ReadToEnd());

            writer.Close();
            reader.Close();
            response.Close();
    }
} 
```

> 块引用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:39:55.490

您可以重复使用凭据，这可能会加快您的速度...

```
private void DownloadFile(string[] fileList, string destination)
{

    var myCred = new NetworkCredential(_remoteUser, _remotePass);

    for (int i = 2; i <= fileList.Length - 1; i++)
    {
        FtpWebRequest request = (FtpWebRequest)WebRequest.Create(_remoteHost + fileList[i]);
        request.Method = WebRequestMethods.Ftp.DownloadFile;
        request.Credentials = myCred;
        FtpWebResponse response = (FtpWebResponse)request.GetResponse();
        Stream responseStream = response.GetResponseStream();
        StreamReader reader = new StreamReader(responseStream);

        StreamWriter writer = new StreamWriter(destination + fileList[i]);
        writer.Write(reader.ReadToEnd());

        writer.Close();
        reader.Close();
        response.Close();
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:57:42.530

如果您使用的是 .NET 3.0 或更高版本，则可以使用 System.IO.Packaging 命名空间中的[ZipPackage 类](http://msdn.microsoft.com/en-us/library/system.io.packaging.zippackage%28v=vs.85%29.aspx)。我还没有尝试压缩远程计算机上存在的文件，但您可以尝试一下，否则您可能需要编写一个小作业来压缩文件并将其部署到远程（ftp）服务器上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T11:35:28.550

为什么不使用用户名和密码启动一次 FtpWebRequest，然后在 foreach 循环中为所有文件使用它，而不是每轮创建一个新文件？

另一种方法是使用 3rd 方工具（例如：[http](http://www.rebex.net/ftp-ssl.net/) ://www.rebex.net/ftp-ssl.net/ ），它可能更快，但您必须对其进行测试，看看这个：[https://stackoverflow.com/a/2343689/395659](https://stackoverflow.com/a/2343689/395659)

第三种方法可能是让一个作业在服务器上运行，该作业在一段时间内创建一次 ZIP 文件，然后您将其作为 Zip 文件下载，如您的问题中所述。

# java - 如何在构建时使用带有 YUI 压缩器的 maven-minify-plugin 在 Java 中压缩 JS 和 css

> ID：12458017
> 
> 赞同：2
> 
> 时间：2012-09-17T11:12:14.070
> 
> 标签：java, javascript, maven-2, yui, minify

我想在构建时使用带有 YUI 压缩器的**maven-minify插件来压缩 JS 和 css。**我的 JS 和 CSS 保存在不同的文件夹中。例如。'X' JS 文件存在于一个文件夹中，其余的存在于不同的文件夹中。CSS 文件也是如此。

另外我想知道，如果文件名从**jsFileName.js**更改为**jsFileName-min.js**

请让我知道如何使用这个插件，因为我对此完全陌生。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-17T11:26:04.223

使用[Samaxes 插件](http://code.google.com/p/maven-samaxes-plugin/)，配置如下：

```
<plugin>
    <groupId>com.samaxes.maven</groupId>
    <artifactId>maven-minify-plugin</artifactId>
    <version>1.3.5</version>
    <executions>
        <execution>
            <id>min-js</id>
            <phase>process-resources</phase>
            <configuration>
                <cssSourceDir>relative/path/to/css/dir</cssSourceDir>
                <cssSourceFiles>
                    <cssSourceFile>subfolder1/1.css</cssSourceFile>
                    <cssSourceFile>subfolder1/3.css</cssSourceFile>
                    <cssSourceFile>subfolder2/2.css</cssSourceFile>
                </cssSourceFiles>
                <cssTargetDir>relative/path/to/final/location</cssTargetDir>
                <cssFinalFile>minified.css</cssFinalFile>

                <jsSourceDir>relative/path/to/js/dir</jsSourceDir>
                <jsSourceFiles>
                    <jsSourceFile>subfolder3/1.js</jsSourceFile>
                    <jsSourceFile>subfolder4/2.js</jsSourceFile>
                </jsSourceFiles>
                <jsFinalFile>minifiedname.js</jsFinalFile>
                <jsTargetDir>rel/path/to/final/location</jsTargetDir>
            </configuration>
            <goals>
                <goal>minify</goal>
            </goals>
        </execution>
        <!-- more execution statements -->
    </executions>                               
</plugin> 
```

# python - 正确关闭套接字

> ID：12458019
> 
> 赞同：2
> 
> 时间：2012-09-17T11:12:17.480
> 
> 标签：python, sockets

我正在尝试使用套接字建立服务器/客户端连接。但是它们不会正确关闭，我无法理解为什么。

### 更新 1

我已经纠正了我在下面没有实际调用问题中的 s.close 函数的愚蠢错误。但事实证明这不是我的问题。

### 更新结束

这是我的服务器代码：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import socket
import sys

if __name__ == '__main__':
    # Server connection
    s = socket.socket()          # Create a socket object
    host = socket.gethostname()  # Get local machine name
    port = 12345                 # Reserve a port for your service.

    print 'Server started!'
    print 'Waiting for clients...'

    s.bind((host, port))        # Bind to the port
    s.listen(5)                 # Now wait for client connection.
    c, addr = s.accept()     # Establish connection with client.
    print 'Got connection from', addr
    msg = c.recv(1024)

    print addr, ' >> ', msg

    if msg == 'close':
        print 'Closing down'
        c.send('SENT: Closing down')

    c.shutdown(socket.SHUT_RDWR)
    c.close() 
```

这是我的客户代码：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import socket

if __name__ == '__main__':
    # Server
    s = socket.socket()          # Create a socket object
    host = socket.gethostname()  # Get local machine name
    port = 12345                 # Reserve a port for your service.

    print 'Connecting to ', host, port
    s.connect((host, port))

    msg = raw_input('CLIENT >> ')
    s.send(msg)
    msg = s.recv(1024)
    print 'SERVER >> ', msg

    s.close()                     # Close the socket when done 
```

这是它产生的错误消息：

```
In [13]: %run cjboxd.py
Server started!
Waiting for clients...
---------------------------------------------------------------------------
error                                     Traceback (most recent call last)
/usr/lib/python2.7/dist-packages/IPython/utils/py3compat.pyc in execfile(fname, *where)
    173             else:
    174                 filename = fname
--> 175             __builtin__.execfile(filename, *where)

/home/nine/slask/cjboxd.py in <module>()
     19     print 'Waiting for clients...'
     20 
---> 21     s.bind((host, port))        # Bind to the port
     22     s.listen(5)                 # Now wait for client connection.
     23     c, addr = s.accept()     # Establish connection with client.

/usr/lib/python2.7/socket.pyc in meth(name, self, *args)
    222 
    223 def meth(name,self,*args):
--> 224     return getattr(self._sock,name)(*args)
    225 
    226 for _m in _socketmethods:

error: [Errno 98] Address already in use 
```

它会在一分钟后工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T11:16:12.173

你需要`socket.socket.setsockopt`，.ie`s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)`

虽然套接字会在进程结束时被操作系统关闭，但显式调用 close() 是一种很好的行为。但是，在那之后，本地 addr(local_ip, local_port) 直到 2`MSL(maximum segment lifetime)`过去后才可用。为什么？我们能做什么？你可以阅读这些：

[http://www.tcpipguide.com/free/t_TCPConnectionTermination-3.htm](http://www.tcpipguide.com/free/t_TCPConnectionTermination-3.htm) 和[http://www.unixguide.net/network/socketfaq/4.5.shtml](http://www.unixguide.net/network/socketfaq/4.5.shtml)

我很难比他们更清楚地发布它:)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-17T11:15:28.403

```
s.close                     # Close the socket when done 
```

突出我的眼睛，因为你实际上什么都不叫，你应该试试`s.close()`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-17T11:15:42.397

你打电话`s.close`，而不是`s.close()`。

如果您希望客户端终止连接，则需要调用 socket.close() 方法。`

# php - PHP：如何从输入字段中获取变量类型

> ID：12458020
> 
> 赞同：1
> 
> 时间：2012-09-17T11:12:34.220
> 
> 标签：php, variables, types

我需要回答这类问题。请我需要从 HTML 输入字段中获取变量类型并回显该类型的 $var。

从这个表格中，我需要检查输入的数据类型。是字符串还是整数等。

```
<form>
<input type="text" name="podatak" value="podatak" />
<input type="Submit" name="Submit">
</form> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T11:15:01.773

所有表单提交都是以字符串开头的。但是，您可以使用诸如[is_numeric](http://php.net/manual/en/function.is-numeric.php)之类的函数来查看项目是否为数字，并使用[is_array](http://au2.php.net/manual/en/function.is-array.php)来查看所传递的表单元素是否为数组（即，复选框，可能是文件等）。

根据您的评论，我会执行以下操作：

```
function whatTypeAmI($var)
{
    if(is_array($var)
    {
        // Request is likely a checkbox or multiple files.
        echo "I am an Array! Yeeehaaa!";
    }
    else if(is_numeric($var))
    {
        // I look like a number, or someone 
        // typed in a number into a text field.
        echo "I am a Fluffeh number!";
    }
    else
    {
        echo "Goodness, who knows what on earth happened?";
    }
}

foreach($_POST as $val)
{
    whatTypeAmI($val);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T11:14:25.533

它总是一个字符串或数组。如果`is_array($_POST['value'])`返回真；这是一个数组。在任何其他情况下，它都是一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-14T10:55:48.937

您可以使用`var_dump($variable)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T11:47:31.757

我猜您正在尝试查找表单字段类型而不是数据类型...例如文本，提交，按钮等...如果这是您的情况，那么恐怕没有这样的功能。据我所知，表单发布不会将任何表单类型信息发送到服务器......您可以使用关联数组以任何方式做到这一点。例如：在你的 php 方面做一些事情。

```
<?php 
     function getType($elementName){
         $formType = array('elementName1' => 'elementType1', 'elementName2' => 'elementType2'......); 
         if(array_key_exists($elementName, $formType))
             return $formType[$elementName];
         return 'Unknown';
     }

     foreach($_POST AS $elementName => $elementVal){
          echo 'name = '.$elementName.' type = '. getType($elementName).' value ='.$elementVal;
     } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-17T11:13:49.353

您可以使用以下功能： `is_int`、`is_array`、`is_null`、`is_float`、`is_double`、`is_bool`等。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-17T11:16:21.723

```
function gettype_custom($var){
    if(is_array($var)){
        return 'array';
    }elseif(is_numeric($var)){
        return 'numeric';
    }elseif(is_string($var)){
        return 'string';
    }else{
        return 'unknown';
    }
} 
```

# sockets - 用于 WinRT 网络合理性的 Berkeley Socket 外观？

> ID：12458026
> 
> 赞同：35
> 
> 时间：2012-09-17T11:12:46.423
> 
> 标签：sockets, windows-8, microsoft-metro, windows-runtime, zeromq

这是我发送到 ZeroMQ 邮件列表的帖子的副本。然而，问题是它不是特定于 ZeroMQ 的，而是更普遍地涉及在 WinRT 中提供的网络功能上需要一个“映射”层，以便在针对 WinRT 编译时为 C++ 代码提供更正常的“伯克利套接字外观”：

大家好，我之前在 iPhone 和 Android 版本的移动应用程序中使用过 ZeroMQ（参见[http://www.ibuzzedfirst.com](http://www.ibuzzedfirst.com)），因为这些平台支持原生/C++/Socket 开发，因此支持 ZeroMQ。

对于 WindowsPhone 7.5 (OS 7.1) 版本，我必须从头开始重新实现任何所需的 ZeroMQ 功能，因为 WinPhone 7.5 只支持 C#，而不支持 C++（它实际上是一个 C# Silverlight 应用程序）。此外，WinPhone 7.5 仅提供其自己的 Socket 支持“版本”（[http://msdn.microsoft.com/en-us/library/sb27wehh%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/sb27wehh%28v=vs.95%29.aspx)），仅支持异步版本的功能，例如 ConnectAsync、SendAync、ReceiveAsync 等。然而，缺乏 C++ 使这成为一个争论点。

因此，对于 WindowsPhone 7.5 版本，我仅将应用程序限制为“客户端”（参赛者）功能，并没有实现“服务器”（测验大师）部分。这是因为应用程序的客户端部分只向服务器发送和接收请求、回复和订阅，而服务器利用 ZeroMQ 固有的多线程多用户功能。重新创建 ZeroMQ 传输协议/标头以供客户端使用并使用 WindowsPhone Socket 支持来提供通信是（相对）简单的。

好的，现在我正在考虑将应用程序移植到 Windows 8 上的 WinRT。（首先是桌面/平板电脑版本 - Windows Phone 8 RT SDK 尚未推出，但会类似）。好消息是 WinRT 支持 C++，是的！（实际上，仍然没有那么简单，当只编写 C# 的 WinRT 应用程序时，您可以针对“AnyCPU”进行编译，只要包含 C++ 部分，您就必须构建 3 个不同的版本 - x86/Win32、x64 和ARM 版本，但这是一个不同的问题）。

不幸的是，像 Windows 7/8 Phone 一样，WinRT 不支持“普通”Berkeley Socket 访问，而是提供了自己的“版本”的 Socket 编程，具有用于不同套接字场景的离散类，例如用于连接 TCP 客户端的 StreamSocket（[http ://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.sockets.streamsocket.aspx#methods](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.sockets.streamsocket.aspx#methods)），用于可绑定 TCP 服务器的 StreamSocketListener（[http://msdn.microsoft.com/en -us/library/windows/apps/windows.networking.sockets.streamsocketlistener.aspx#methods](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.sockets.streamsocketlistener.aspx#methods) )，以及 UDP 版本的 DatagramSocket / DatagramSocketListener。此外，仅提供所有方法的异步版本。

所以看起来，为了让 ZeroMQ 在 WinRT 上成功编译，我将不得不编写一个 Facade 层来提供类似 Berkeley Socket 的 C++ 接口，并在下面执行必要的映射到 WinRT 提供的 Socket 编程版本.

有没有其他人开始这个旅程或写过类似的门面？有兴趣听听大家的想法，尤其是 WinRT 看起来相当“大事”！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T08:40:02.203

虽然它远非完整或正确并且有很多错误，但我已经在[https://winrtsock.codeplex.com](https://winrtsock.codeplex.com)开始了这个项目。到目前为止还没有实现任何监听/接受

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:32:46.783

您可能会考虑类似[ACE](http://www.cs.wustl.edu/~schmidt/ACE-overview.html)的东西。它在套接字上提供了更高级别的抽象，并支持较旧的 Windows 嵌入式操作系统，例如 WinCE 等。它是开源的，因此您可以尝试、修改以使其工作并回馈。或者，您可以联系几个提供支持和承包工作的商业组织或人员之一。

# django - SQLAlchemy 查询未在备用会话中检索已提交的数据

> ID：12458030
> 
> 赞同：0
> 
> 时间：2012-09-17T11:12:55.283
> 
> 标签：django, sqlalchemy, mod-wsgi, tastypie

**我有一个问题，我使用SQLAlchemy / Tastypie REST**接口插入数据库项目，但随后获取项目列表时该项目丢失。**它仅在我第二次**获得项目列表后才会显示。

我正在使用 SQLAlchemy 和通过 mod_wsgi 在 Apache 上运行的 Tastypie/Django。我使用单例数据库管理器类来保存我的引擎和 declarative_base，并使用 Tastypie，一个单独的类来获取会话并确保在提交出现问题时回滚。在下面的更新中，当我在插入后没有关闭会话时会出现问题。 **为什么这是必要的？**

我的原始代码是这样的：

```
Session = scoped_session(sessionmaker(autoflush=True))

# Singleton Database Manager class for managing session
class DatabaseManager():
    engine = None
    base = None

    def ready(self):
       host='mysql+mysqldb://etc...'
       if self.engine and self.base:
            return True
        else:
            try:
                self.engine = create_engine(host, pool_recycle=3600)
                self.base = declarative_base(bind=self.engine)
                return True
            except:
                return False

    def getSession(self):
        if self.ready():
            session = Session()
            session.configure(bind=self.engine)
            return session
        else:
            return None

DM = DatabaseManager()

# A session class I use with Tastypie to ensure the session is destroyed at the
# end of the transaction, because Tastypie creates singleton Resources used for
# all threads
class MySession:
    def __init__(self):
        self.s = DM.getSession()

    def safeCommit(self):
        try:
            self.s.commit()
        except:
            self.s.rollback()
            raise

    def __del__(self):
        try:
            self.s.commit()
        except:
            self.s.rollback()
            raise

# ... Then ... when I get requests through Apache/mod_wsgi/Django/Tastypie
# First Request
obj_create():
    db = MySession()
    print db.s.query(DBClass).count() # returns 4
    newItem = DBClass()
    db.s.add(newItem)
    db.s.safeCommit()
    print db.s.query(DBClass).count() # returns 5

# Second Request after First Request returns
obj_get_list():
    db = MySession()
    print db.s.query(DBClass).count() # returns 4 ... should be 5

# Third Request is okay
obj_get_list():
    db = MySession()
    print db.s.query(DBClass).count() # returns 5 
```

**更新**

经过进一步挖掘，问题似乎是我的会话需要在创建后**关闭。**也许是因为 Tastypie 的 object_create() 将 SQLAlchemy 对象添加到它的包中，而我不知道它离开函数范围后会发生什么：

```
obj_create():
    db = MySession()
    newItem = DBClass()
    db.s.add(newItem)
    db.s.safeCommit()
    copiedObj = copyObj(newItem) # copy SQLAlchemy record into non-sa object (see below)
    db.s.close()
    return copiedObj 
```

如果有人愿意在答案中解释这一点，我可以关闭这个问题。另外，对于那些好奇的人，我将我的对象从 SQLAlchemy 中复制出来，如下所示：

```
class Struct:
    def __init__(self, **entries):
        self.__dict__.update(entries)

class MyTastypieResource(Resource):
    ...
    def copyObject(self, object):
        base = {}
        # self._meta is part of my tastypie resource
        for p in class_mapper(self._meta.object_class).iterate_properties:
            if p.key not in base and p.key not in self._meta.excludes:
                base[p.key] = getattr(object,p.key)
        return Struct(**base) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:27:30.617

通过关闭我的会话解决了这个问题。答案中的更新并没有完全解决问题 - 我最终添加了一个中间件类以在事务结束时关闭会话。这确保了所有内容都写入数据库。中间件看起来有点像这样：

```
class SQLAlchemySessionMiddleWare(object):
    def process_response(self, request, response):
        try:
            session = MyDatabaseManger.getSession()
            session.commit()
            session.close()
        except Exception, err:
            pass
        return response

    def process_exception(self, request, exception):
        try:
            session = MyDatabaseManger.getSession()
            session.rollback()
            session.close()
        except Exception, err:
            pass 
```

# android - 仅更改标题背景颜色而不影响其他控件的任何属性（android）

> ID：12458032
> 
> 赞同：0
> 
> 时间：2012-09-17T11:13:00.710
> 
> 标签：android, background, themes, custom-titlebar

我设计了一个自定义主题，因为我想更改标题背景颜色。但是在设计主题时，我设置了 android:parent="android:Theme.Light"

这样做之后，我发现进度条控件、alertdialog、tabhost 的属性发生了变化，例如背景颜色、高度、宽度等。

当我不使用自定义主题时，它工作正常。

所以我的问题是如何在只更改标题背景颜色的同时使用android默认主题的属性。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:42:28.627

一旦你为你构建了主题，`Title` 你就可以`Custom Theme`在`AndroidManifest.xml`ypur Activity Tag中使用它

喜欢

```
android:theme="@style/customTheme" 
```

# mysql - MySQL - 在加入之前或加入往返之后更好地进行 LIKE 搜索？

> ID：12458037
> 
> 赞同：1
> 
> 时间：2012-09-17T11:13:20.540
> 
> 标签：mysql, join, indexing

例子：

表 1 有 100k 条记录，并且有一个带有唯一索引的 varchar 字段。表2有100万条记录，通过table1_id字段多对一关联到表1，有3个varchar字段，只有1个是唯一的。有问题的引擎是 InnoDB，所以没有全文索引。

为了论证的缘故，假设这些表将分别增长到最多 100 万和 1000 万条记录。

当我在表单中输入搜索词时，我希望它使用 LIKE 在所有四个（总计）可用 varchar 字段中搜索两个表，并仅返回 Table1 中的记录 - 所以我在这里按 table1.id 分组。我想知道的是，首先搜索百万记录表是否更有效，因为它只有一个需要搜索的字段并且该字段是唯一的，然后使用 table1.id IN ({IDS }) 查询，还是直接加入它们并立即搜索它们而不需要往返数据库会更好？

也就是说，在做join时，MySQL是按照搜索词加入，还是先加入后搜索？也就是说，如果我在一个查询中对两个表进行连接和 LIKE，它会首先连接它们，然后在它们中查找匹配的记录，还是只连接它发现匹配的记录？

编辑：我制作了两个样本表并伪造了一些数据。此示例查询是跨所有字段的连接和 LIKE 搜索。出于演示目的，我使用了 LIKE '%q%' 但实际上 q 可能是任何东西。MySQL 表示，对虚假 100k/1mil 记录的实际搜索耗时 0.03 秒。这是解释：[http ://bit.ly/PsFBxK](http://bit.ly/PsFBxK)

这是在其一个唯一字段上仅搜索 table2 的解释查询：http: [//bit.ly/S06Hug](http://bit.ly/S06Hug)并且为了实际发生这个查询，MySQL 说它花了 0.0135 秒。

# html - On 和 Live 在动态添加元素时表现不同

> ID：12458046
> 
> 赞同：0
> 
> 时间：2012-09-17T11:13:56.517
> 
> 标签：html, jquery-plugins, jquery, jquery-on

我有以下代码，我尝试使用 jQuery live 和插件，在尝试使用 live 时，我能够将已经存在于具有类“按钮”的元素的事件处理程序添加到新添加的元素（动态添加页面加载后）使用类“按钮”但在尝试使用插件上的 jQuery 时，我无法将已经存在的事件处理程序添加到新添加的元素中。

实时示例

```
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<!--START: Adding of javaScript library -->
<script type="text/javascript" src="script/jquery.min.js"></script>
<!--END:   Adding of javaScript library-->
<!--START: Adding of javaScript library need internet Connection-->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<!--END: Adding of javaScript library need internet Connection-->
</head>
<script>
        jQuery(document).ready(function(){
            jQuery(".button").live("click", test);
        });
        var i=0;
        function test(event){
            var elem=jQuery(this).parent().html();
            jQuery("body").append("<div class=DivClass" + i++ +   ">"+elem+"</div>" );
        }
</script>
<body>
    <div id="Container"><input value="click me" class="button" type="button"/></div>
</body>
</html> 
```

开的例子

```
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<!--START: Adding of javaScript library -->
<script type="text/javascript" src="script/jquery.min.js"></script>
<!--END:   Adding of javaScript library-->
<!--START: Adding of javaScript library need internet Connection-->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<!--END: Adding of javaScript library need internet Connection-->
</head>
<script>
        jQuery(document).ready(function(){
            jQuery(".button").on("click", test);
        });
        var i=0;
        function test(event){
            var elem=jQuery(this).parent().html();
            jQuery("body").append("<div class=DivClass" + i++ +   ">"+elem+"</div>" );
        }
</script>
<body>
    <div id="Container"><input value="click me" class="button" type="button"/></div>
</body>
</html> 
```

此外，我可以在 jquery 就绪之外使用 live 放置事件处理程序绑定代码，这工作正常，但是如果我在 jquery 就绪之外使用事件处理程序绑定，则事件处理程序不起作用。提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:21:39.567

```
jQuery('body').on('click', '.button', test); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:15:18.290

如果你想让你的选择器被动态测试，你必须将它作为参数传递，就像在你的代码中你在一个常量空集合上调用一个函数一样：

```
jQuery(document).ready(function(){
   var i=0;
   function test(event){
      var elem=jQuery(this).parent().html();
      jQuery("body").append("<div class=DivClass" + i++ +   ">"+elem+"</div>" );
    } 
   $(document).on("click", ".button", test);
}); 
```

`test`（在将其传递给函数之前，您会看到我在这里定义，您的代码伤害了我的眼睛）

# c# - 从 Active Directory 检索安全组的安全权限

> ID：12458048
> 
> 赞同：2
> 
> 时间：2012-09-17T11:14:00.730
> 
> 标签：c#, permissions, active-directory

我正在尝试创建一个函数，在其中输入*安全组*名称并返回安全权限列表。

如何使用 C# 从 Active Directory获取*安全组*（例如`read`、等）的安全权限列表（例如`write`、等） ？`full control`*`Domain Controllers``Domain Guests`*

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:03:00.657

您需要检查要与 Active Directory 服务器通信的 LDAP 连接的路径。

例如：

```
 DirectoryEntry rootDSE = null;
  rootDSE = new DirectoryEntry("LDAP://OU=" + department + ",OU=Users,OU=" + ou + ",dc=corp,dc=local", username, password); 
```

现在在这种情况下，我只需要**Department → Users → OU → DC中存在的组**

和你的情况一样。您可以定义您的安全组存在于哪个 OU。

之后，我可以获取这样的组：

```
DirectorySearcher ouSearch = new DirectorySearcher(rootDSE);
ouSearch.PageSize = 1001;
ouSearch.Filter = "(objectClass=group)";
ouSearch.SearchScope = SearchScope.Subtree;
ouSearch.PropertiesToLoad.Add("name");
SearchResultCollection allOUS = ouSearch.FindAll();
foreach (SearchResult oneResult in allOUS)
{
     dt.Rows.Add(oneResult.Properties["name"][0].ToString());
}
rootDSE.Dispose(); 
```

**现在在权限的情况下**

权限存储在单独的文件系统项目上，例如文件和/或目录 - 或其他对象（如注册表项等）。当您拥有 AD 组或用户帐户时，您可以读取其 SID（安全标识符）属性 - 该 SID 将显示在整个 Windows 的 ACL（访问控制列表）中 - 但从用户或组中，没有获取所有信息的机制它可能在机器/服务器的任何地方拥有权限。

例如，可以使用 FileInfo 和 DirectoryInfo 类上的 .GetAccessControl() 方法检索文件和目录的权限：

```
FileInfo info = new FileInfo(@"D:\test.txt");
FileSecurity fs = info.GetAccessControl();

DirectoryInfo dir = new DirectoryInfo(@"D:\test\");
DirectorySecurity ds = dir.GetAccessControl(); 
```

我希望这就是你要找的！*

# java - JSP中的空白

> ID：12458049
> 
> 赞同：1
> 
> 时间：2012-09-17T11:14:21.657
> 
> 标签：java, jsp

我想知道如何检查 JSP 中字符串中是否有空格。

前任 ：

字符串名称 = "理查德海尔斯";

我想知道上面的字符串中是否有空格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:18:15.253

```
<c:if test="${fn:contains(name, ' ')}">
  It contains a space
</c:if> 
```

有关 JSTL 的信息，请参阅[https://stackoverflow.com/tags/jstl/info](https://stackoverflow.com/tags/jstl/info)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:18:44.020

使用`indexOf`功能。

```
if(name.indexOf(' ') >= 0){
   // name have space
} 
```

见[indexOf](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#indexOf%28int%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T11:21:43.410

公共静态布尔 isBlank(String str) { int strLen; if (str == null || (strLen = str.length()) == 0) { return true;} for (int i = 0; i < strLen; i++) { if ((Character.isWhitespace(str.charAt (i)) == false)) {return false;}}return true;}}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T11:28:58.883

使用正则表达式。请参阅此示例；

```
 String patternStr = "\\s+";
    String inputStr = "Richard hailes";
    Pattern pattern = Pattern.compile(patternStr);
    Matcher matcher = pattern.matcher(inputStr);
    if(matcher.find()) {
       System.out.println("Found");
     } else {
       System.out.println("Not Found");
     } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T11:18:07.657

您可以查看[此页面](http://www.hscripts.com/tutorials/jsp/functiontaglist/fn-contains-tag.php)，该页面描述了如何在 JSP 中使用 contains 函数。您可以使用它来查看字符串是否包含“”。

# sql-server - 链接服务器插入选择性能

> ID：12458052
> 
> 赞同：7
> 
> 时间：2012-09-17T11:14:25.660
> 
> 标签：sql-server, sql-server-2008, linked-server

假设我在本地有一个表，`Local_Table`并且我有另一台服务器和另一个数据库和表，即`Remote_Table`（表结构相同）。

`Local_Table`有数据，`Remote_Table`没有。`Local_Table`我想`Remote_Table`用这个查询来传输数据：

```
Insert into RemoteServer.RemoteDb..Remote_Table
select * from Local_Table (nolock) 
```

但性能相当缓慢。

但是，当我使用 SQL Server 导入导出向导时，传输速度非常快。

我究竟做错了什么？为什么 Import-Export 向导速度快而 insert-select 语句速度慢？有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-04-23T00:55:18.900

最快的方法是拉数据而不是推数据。推送表时，每一行都需要连接、插入和断开连接。

如果由于服务器之间存在单向信任关系而无法提取数据，则解决方法是将整个表构建为一个巨大的 T-SQL 语句并一次运行。

```
DECLARE @xml XML

SET @xml = (
        SELECT 'insert Remote_Table values (' + '''' + isnull(first_col, 'NULL') + ''',' +
            -- repeat for each col
            '''' + isnull(last_col, 'NULL') + '''' + ');'
        FROM Local_Table
        FOR XML path('')
        ) --This concatenates all the rows into a single xml object, the empty path keeps it from having <colname> </colname> wrapped arround each value

DECLARE @sql AS VARCHAR(max)

SET @sql = 'set nocount on;' + cast(@xml AS VARCHAR(max)) + 'set nocount off;' --Converts XML back to a long string

EXEC ('use RemoteDb;' + @sql) AT RemoteServer 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-20T11:24:09.353

从链接服务器中提取数据似乎比将数据推送到链接服务器要快得多：[哪个更有效：从链接服务器中选择还是插入链接服务器？](https://dba.stackexchange.com/questions/46289/which-one-is-more-efficient-select-from-linked-server-or-insert-into-linked-ser)

**更新：**我自己最近的经验证实了这一点。如果可能的话，拉——它会快得多。

在另一台服务器上试试这个：

```
INSERT INTO Local_Table
SELECT * FROM RemoteServer.RemoteDb.Remote_Table 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T12:23:13.100

导入/导出向导本质上将作为批量插入执行此操作，而您的代码则不是。

假设您在远程表上有一个聚集索引，请确保您在本地表上有相同的聚集索引，在远程服务器上全局设置跟踪标志 610，并确保远程处于简单或批量日志恢复模式。

如果您的远程表是一个堆（无论如何都会加快速度），请确保您的远程数据库处于简单或批量记录模式，将您的代码更改为如下所示：

```
INSERT INTO RemoteServer.RemoteDb..Remote_Table WITH(TABLOCK)
SELECT * FROM Local_Table WITH (nolock) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-29T15:04:30.457

从本地表插入远程表这么慢的原因是因为它插入一行，检查它是否插入，然后插入下一行，检查它是否插入等。

不知道你是否明白这一点，但这是我使用链接服务器解决这个问题的方法。

首先，我有一个包含几列的 LocalDB.dbo.Table：

```
IDColumn (int, PK, Auto Increment)
TextColumn (varchar(30))
IntColumn (int) 
```

而且我有一个几乎相同的 RemoteDB.dbo.Table：

```
IDColumn (int)
TextColumn (varchar(30))
IntColumn (int) 
```

主要区别在于远程 IDColumn 未设置为 ID 列，因此我可以插入其中。

然后我在远程表上设置了一个触发器，该触发器发生在 Delete 上

```
Create Trigger Table_Del
    On Table
    After Delete
AS
Begin
    Set NOCOUNT ON;

    Insert Into Table (IDColumn, TextColumn, IntColumn)
     Select IDColumn, TextColumn, IntColumn from MainServer.LocalDB.dbo.table L 
      Where not exists (Select * from Table R WHere L.IDColumn = R.IDColumn)

END 
```

然后当我想做一个插入时，我从本地服务器这样做：

```
Insert Into LocalDB.dbo.Table (TextColumn, IntColumn) Values ('textvalue', 123);
Delete From RemoteServer.RemoteDB.dbo.Table Where IDColumn = 0;

--And if I want to clean the table out and make sure it has all the most up to date data:
Delete From RemoteServer.RemoteDB.dbo.Table 
```

通过触发远程服务器从本地服务器提取数据然后进行插入，我能够将需要 30 分钟插入 1258 行的作业变成需要 8 秒才能完成相同插入的作业。

这确实需要双方的链接服务器连接，但是在设置之后它工作得很好。

**更新：**
所以在过去的几年里，我做了一些改变，并远离了删除触发器作为同步远程表的一种方式。

相反，我在远程服务器上有一个存储过程，其中包含从本地服务器提取数据的所有步骤：

```
CREATE PROCEDURE [dbo].[UpdateTable]
    -- Add the parameters for the stored procedure here
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here

    --Fill Temp table
    Insert Into WebFileNamesTemp Select * From MAINSERVER.LocalDB.dbo.WebFileNames

    --Fill normal table from temp table
    Delete From WebFileNames
    Insert Into WebFileNames Select * From WebFileNamesTemp

    --empty temp table
    Delete From WebFileNamesTemp
END 
```

在本地服务器上，我有一个计划作业，对本地表进行一些处理，然后通过存储过程触发更新：

```
EXEC sp_serveroption @server='REMOTESERVER', @optname='rpc', @optvalue='true'
EXEC sp_serveroption @server='REMOTESERVER', @optname='rpc out', @optvalue='true'
EXEC REMOTESERVER.RemoteDB.dbo.UpdateTable
EXEC sp_serveroption @server='REMOTESERVER', @optname='rpc', @optvalue='false'
EXEC sp_serveroption @server='REMOTESERVER', @optname='rpc out', @optvalue='false' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-12T21:38:10.073

如果您必须将数据从源推送到目标（例如，出于防火墙或其他权限原因），您可以执行以下操作：

在源数据库中，将记录集转换为单个 XML 字符串（即，多行和多列组合成单个 XML 字符串）。然后将该 XML 作为单行推送（作为 varchar(max)，因为 SQL Server 中的链接数据库不允许使用 XML）。

```
 DECLARE @xml XML

    SET @xml = (select * from SourceTable FOR XML path('row'))

    Insert into TempTargetTable values (cast(@xml AS VARCHAR(max))) 
```

在目标数据库中，将 varchar(max) 转换为 XML，然后使用 XML 解析将该单行和列转换回普通记录集。

```
DECLARE @X XML = (select '<toplevel>' + ImportString + '</toplevel>' from TempTargetTable)

DECLARE @iX INT
EXEC sp_xml_preparedocument @ix output, @x

insert into TargetTable
SELECT [col1],
       [col2]
FROM OPENXML(@iX, '//row', 2) 
WITH ([col1] [int],
       [col2] [varchar](128)
)

EXEC sp_xml_removedocument @iX 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-14T21:06:39.297

我找到了解决方法。由于我不喜欢 SSIS 等 GUI 工具，因此我重用了 bcp 脚本将表加载到 csv 中，反之亦然。是的，有对文件的批量操作支持是一个奇怪的情况，但是表。随意编辑以下脚本以满足您的需求：

```
exec xp_cmdshell 'bcp "select * from YourLocalTable" queryout C:\CSVFolder\Load.csv -w -T -S .' 
exec xp_cmdshell 'bcp YourAzureDBName.dbo.YourAzureTable in C:\CSVFolder\Load.csv -S yourdb.database.windows.net -U youruser@yourdb.database.windows.net -P yourpass -q -w' 
```

优点：

*   无需每次都定义表结构。
*   我已经测试过，它比直接通过 LinkedServer 插入要快得多。
*   它比 XML 更容易管理（无论如何它都限制为 varchar(max) 长度）。
*   不需要额外的抽象布局（SSIS 等工具）。

缺点：

*   通过 xp_cmdshell 接口使用外部工具 bcp。
*   导出/导入 csv 后，表属性将丢失（即数据类型、空值、长度、值内的分隔符等）。

# iphone - 如何使用导航控制器加载标签栏控制器 xib

> ID：12458055
> 
> 赞同：0
> 
> 时间：2012-09-17T11:14:46.187
> 
> 标签：iphone, objective-c, ios

我是 ios 新手，标签栏控制器有问题。我在我的项目中使用了两个标签栏控制器。一个在应用程序午餐时加载，它运行良好。我想在 didselect 行加载另一个。如何做到这一点。我做了很多实验，但没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:30:54.033

```
-(void) hidetabbar {
    [UIView  animateWithDuration:0.5
                      animations:^{
                          for(UIView *view in tabBarController.view.subviews)
                          {
                              if([view isKindOfClass:[UITabBar class]])
                              {
                                  if (hiddenTabBar) {
                                      [view setFrame:CGRectMake(view.frame.origin.x, 431, view.frame.size.width, view.frame.size.height)];
                                  } else {
                                      [view setFrame:CGRectMake(view.frame.origin.x, 480, view.frame.size.width, view.frame.size.height)];
                                  }
                              } else {
                                  if (hiddenTabBar) {
                                      [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 431)];
                                  } else {
                                      [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 480)];
                                  }
                              }
                          }
                      }];
    hiddenTabBar = !hiddenTabBar;
}   

when u r clicking on the table view did select row hide the tabbar in the viewcontroller that u r sending

-(void)viewDidAppear:(BOOL)animated{
    [super viewDidAppear:YES];
    [((AppDelegate*)[[UIApplication sharedApplication]delegate]) hidetabbar];
}

-(void)tabBarControllerView
{
    tabBarController = [[UITabBarController alloc] init];
    tabBarController.view.backgroundColor = [UIColor blackColor];
    tabBarController.delegate = self;
    //Add some tabs to the controller...

    //----First tab----//
    //-----second Tab   -----//

    //------3rd tab--//

    //-----4th tab bar--------//

    //-----5th tab bar--------//

    [self.view addSubview:tabBarController.view];

    [navigationController pushViewController:tabBarController animated:YES];
    tabBarController.tabBar.tag=100;

    tabBarController.view.hidden = NO;
}

- (void)tabBarController:(UITabBarController *)tabBarControllers didSelectViewController:(UIViewController *)viewController  
{
    if (tabBarControllers.selectedIndex == 0)
    {
    }
    else if (tabBarControllers.selectedIndex == 1)
    {

    }
    else if (tabBarControllers.selectedIndex == 2)
    {

    }
    else if (tabBarControllers.selectedIndex == 3)
    {
    }
    else if (tabBarControllers.selectedIndex == 4)
    {

    }
} 
```

在该视图控制器中隐藏主标签栏，您在其中执行选择表并添加另一个标签栏..尝试这样的事情它可能对您有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:33:22.600

在 didSelect 事件中添加以下代码

```
 UITabBarController *tabBarController = [[UITabBarController alloc]init];

    NSArray*tabBarimageArray=[NSArray arrayWithObjects:@"firstTabImage.png",@"secondTabImage.png", nil];

    YourFirstTabRootViewController *firstVc = [[YourFirstTabRootViewController alloc]initWithNibName:@"YourFirstTabRootViewController" bundle:nil];

    UINavigationController *firstNavigationController=[[UINavigationController alloc]initWithRootViewController:firstVc];

    YourSecondTabRootViewController *secondVc = [[YourSecondTabRootViewController alloc]initWithNibName:@"YourFirstTabRootViewController" bundle:nil];

    UINavigationController *secondNavigationController=[[UINavigationController alloc]initWithRootViewController:secondVc];

    NSArray *VCs = [[NSArray alloc] initWithObjects:firstNavigationController,secondNavigationController nil];
    NSArray *names = [NSArray arrayWithObjects:
                      NSLocalizedString(@"Tab1", @""), 
                      NSLocalizedString(@"Tab2", @""),

                      nil];

    NSMutableArray *tabBarViewControllers = [[NSMutableArray alloc] initWithCapacity:[VCs count]];
    NSInteger index = 0;

    for (id controller in VCs) {

        UINavigationController * navController = controller ;
                // THIS SETS UP THE TAB BAR ITEMS/IMAGES AND SET THE TAG FOR TABBAR_ITEM_TAGS
                NSString *tabName = [names objectAtIndex:index];
                UIImage *tabImage = [UIImage imageNamed:[NSString stringWithFormat:[tabBarimageArray objectAtIndex:index]]];
                navController.title = tabName;
                UITabBarItem *tempTab = [[UITabBarItem alloc] initWithTitle:tabName 
                                                                      image:tabImage 
                                                                        tag:index];
                navController.tabBarItem = tempTab;

                [tabBarViewControllers addObject:navController];
        index ++;

        }

    [ tabBarController setViewControllers:tabBarViewControllers];

    [self presentModalViewController:tabBarController animated:YES]; 
```

# couchdb - CloudFoundry 中的 CouchDB？

> ID：12458058
> 
> 赞同：0
> 
> 时间：2012-09-17T11:15:02.320
> 
> 标签：couchdb, cloud-foundry

我查看了 Cloud Foundry 项目并尝试将其安装在服务器上

我将使用 Couchdb 作为数据库服务。

**我的主要问题是：如何在 Cloud Foundry 中使用 CouchDB？**

我安装了一个 CF 实例： vcap_dev_setup -c devbox_all.yml -D mydomain.com

devbox.yml 包含：

```
$  install : 
      - all. 
```

在此安装中，couchdb_node 和 couchdb_gateway 默认存在。但这似乎是一般的错误。当我删除一个应用程序并出现此错误时，例如：

```
$ vmc delete notes2   
  Provisioned service [mongodb-d216a] detected, would you like to delete it? [yN]: y  
  Provisioned service [redis-8fcdc] detected, would you like to delete it? [yN]: y   
  Deleting application [notes2]: OK   
  Deleting service [mongodb-d216a]: Error 503: Unexpected response from service gateway 
```

所以我尝试用这个配置安装一个 CF 实例。（带有redis、couch和mongo的标准单节点）

conf.yml：

```
$ jobs:
  install:
     - nats_server
    - router
    - stager
    - ccdb
    - cloud_controller:
        builtin_services:
         - redis
         - mongodb
         - couchdb
    - health_manager
    - dea
    - uaa
    - uaadb
    - redis_node:
        index: "0"
    - couchdb_node:
        index: "0"
    - mongodb_node:
        index: "0"
    - coudb_gateway
    - redis_gateway
    - mongodb_gateway 
```

首先，这个配置不起作用，因为选项 'couchdb' 不是一个有效的关键字（在部分内置服务中）

那么，我做错了什么？集成沙发的方式有问题而且上周还没有完成？

为了继续，我成功地安装了没有 couchdb 内置服务选项但带有 couchdb_node 和 couchdb_gateway 的 CF 实例。他们开始了。我想该服务是可运行的。

但我不能在我的应用 manifest.yml 中使用 'couchdb' 或选择此服务进行绑定。（这似乎很正常，因为它不是作为服务安装的）

所以，它似乎接近工作，但事实并非如此。

我在这里请求关于这个主题的想法和建议，因为我没有发现人们在网上谈论。

谢谢你读我。卢卡斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:17:58.847

我决定自己尝试一下，它似乎工作正常。我使用 vcap_dev_setup 和以下配置创建了一个新的 VCAP 实例。

```
---
deployment:
  name: "cloudfoundry"
jobs:
  install:
    - nats_server
    - cloud_controller:
        builtin_services:
          - mysql
          - postgresql
          - couchdb
    - stager
    - router
    - health_manager
    - uaa
    - uaadb
    - ccdb
    - dea
    - couchdb_gateway
    - couchdb_node:
        index: "0"
    - postgresql_gateway
    - postgresql_node:
        index: "0"
    - mysql_gateway
    - mysql_node:
        index: "0" 
```

我能够将 CouchDB 实例绑定到节点应用程序并从 VCAP_SERVICES 读取服务信息，如下所示；

```
'{"couchdb-1.2":[{"name":"couchdb-c7eb","label":"couchdb-1.2","plan":"free","tags":["key-value","cache","couchdb-1.2","couchdb"],"credentials":{"hostname":"127.0.0.1","host":"127.0.0.1","port":5984,"username":"7f3c0567-89cc-4240-b249-40d1f4586035","password":"8fef9e88-3df2-46a8-a22c-db02b2917251","name":"dde98c69f-01e9-4e97-b0d6-43bed946da95"}}]}' 
```

我还能够将服务隧道传输到本地端口并连接到它，您可以在此图像中看到

![CouchDB 隧道](../Images/d7a1383bbf9daf27464c994c120f78ff.png)

你用什么版本的 Ubuntu 安装 VCAP？

# c# - 在多线程服务中收听的更好方法是什么？

> ID：12458065
> 
> 赞同：4
> 
> 时间：2012-09-17T11:15:20.320
> 
> 标签：c#, .net, multithreading, thread-safety, msmq

我对 MSMQ 和 .NET 中的线程都比较陌生。我必须创建一个在不同线程中侦听的服务，通过 TCP 和 SNMP、多个网络设备和所有这些东西在专用线程中运行，但这里还需要从其他应用程序侦听 MSMQ 队列。我正在分析另一个类似的项目，并且使用了下一个逻辑：

```
private void MSMQRetrievalProc()
{
    try
    {
        Message mes;
        WaitHandle[] handles = new WaitHandle[1] { exitEvent };
        while (!exitEvent.WaitOne(0, false))
        {
            try
            {
                mes = MyQueue.Receive(new TimeSpan(0, 0, 1));
                HandleMessage(mes);
            }
            catch (MessageQueueException)
            {
            }
        }
    }
    catch (Exception Ex)
    {
        //Handle Ex
    }
}

MSMQRetrievalThread = new Thread(MSMQRetrievalProc);
MSMQRetrievalThread.Start(); 
```

但是在另一个服务（消息调度程序）中，我使用了基于[MSDN 示例](http://msdn.microsoft.com/en-us/library/system.messaging.messagequeue.receivecompleted.aspx)的异步消息读取：

```
public RootClass() //constructor of Main Class
{
    MyQ = CreateQ(@".\Private$\MyQ"); //Get or create MSMQ Queue

    // Add an event handler for the ReceiveCompleted event.
    MyQ.ReceiveCompleted += new
ReceiveCompletedEventHandler(MsgReceiveCompleted);
    // Begin the asynchronous receive operation.
    MyQ.BeginReceive();
}

private void MsgReceiveCompleted(Object source, ReceiveCompletedEventArgs asyncResult)
{

    try
    {
        // Connect to the queue.
        MessageQueue mq = (MessageQueue)source;
        // End the asynchronous Receive operation.
        Message m = mq.EndReceive(asyncResult.AsyncResult);

        // Process received message

        // Restart the asynchronous Receive operation.
        mq.BeginReceive();
    }
    catch (MessageQueueException Ex)
    {
        // Handle sources of MessageQueueException.
    }
    return;
} 
```

异步处理是否假设每条消息都将在主线程之外处理？可以并且需要将这种（第二种）方法放在单独的线程中吗？

请建议更好的方法或一些简单的替代方案。

到达队列的消息没有一些规则定义的行为。可能很长一段时间内没有任何消息会到达，或者在一秒钟内我会到达许多（最多 10 条甚至更多）消息。根据某些消息中定义的操作，它需要删除/更改一些具有正在运行的线程的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T00:20:52.647

我强烈建议将 WCF 用于 MSMQ。

[http://msdn.microsoft.com/en-us/library/ms789048.aspx](http://msdn.microsoft.com/en-us/library/ms789048.aspx)

这允许您使用 WCF 线程模型异步处理传入调用，该模型允许限制、封顶、重试等......

# android - LocationManager.removeUpdates(listener) 不删除位置监听器

> ID：12458070
> 
> 赞同：5
> 
> 时间：2012-09-17T11:15:30.443
> 
> 标签：android, locationlistener

我的应用场景是我想跟踪员工的位置。我有一个广播接收器，它监听设备启动广播并注册一个警报管理器。当警报管理器滴答作响时，它会注册两个位置侦听器，一个用于侦听 gps，另一个用于网络。我希望当我在 onLocationChange() 方法中获得第一次位置更新时，保存位置并取消注册该位置侦听器，以便当警报管理器再次滴答作响时，它不会重复。要取消注册，我将位置侦听器作为静态对象在 onLocationChange() 中访问它们。但我发现它并没有删除位置监听器。这是我的代码示例：

```
 public class BootTimeServiceActivator extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        Calendar calendar = Calendar.getInstance();
        AlarmManager am = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
        Intent mIntent = new Intent(context, MyBroadCastReceiver.class);
        PendingIntent mPendingIntent = PendingIntent.getBroadcast(context, 0, mIntent, PendingIntent.FLAG_CANCEL_CURRENT);
        am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), 20 * 60 * 1000, mPendingIntent);

    }

    }

//..........

    public class MyBroadCastReceiver extends BroadcastReceiver{

    public static LocationManager locationManager;
    public static MyLocationListener networkLocationListener;
    public static MyLocationListener gpsLocationListener;

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        Toast.makeText(context, "Alarm has been called...", Toast.LENGTH_SHORT).show();
        initLocationListeners(context);
        registerLocationListeners();

    }

    public void initLocationListeners(Context context) {
        locationManager = (LocationManager)context.getSystemService(Context.LOCATION_SERVICE);
        networkLocationListener = new MyLocationListener(context);
        gpsLocationListener = new MyLocationListener(context);

    }

    public void registerLocationListeners() {
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 100, 0, gpsLocationListener);
        locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 100, 0, gpsLocationListener);

    }

}

\\.....

    public class MyLocationListener implements LocationListener {

    Context context;

    public MyLocationListener(Context context) {
        this.context = context;
    }

    @Override
    public void onLocationChanged(Location location) {
        if(location != null) {
            SDCardService sdService = new SDCardService(context);
            try {
                sdService.logToDB(location);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Log.d("provider",location.getProvider());
            if(location.getProvider().equals(LocationManager.GPS_PROVIDER)) {
                MyBroadCastReceiver.locationManager.removeUpdates(MyBroadCastReceiver.gpsLocationListener);
            }
            else if(location.getProvider().equals(LocationManager.NETWORK_PROVIDER)) {
                MyBroadCastReceiver.locationManager.removeUpdates(MyBroadCastReceiver.networkLocationListener);
            }

        }

    } 
```

谁能指导我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:51:29.490

试试这个..

```
lmNetwork.removeUpdates(networkLocationListener);
lmGps.removeUpdates(gpsLocationListener); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:20:51.740

啊...我有一个拼写错误。实际上，在 MyBroadCastREciever 类中，我将 gpsListener 注册为两次：

```
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 
    100, 0, 
    gpsLocationListener);

locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 
    100, 0, 
    networkLocationListener); //previously was gpsLocationListener again. Wrong. 
```

那就是网络监听器没有被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-02T21:07:37.050

您可以使用内部类来执行此操作并删除侦听器 onPause() ：

```
 @Override
        protected void onPause() {
                super.onPause();
                GPSlocationManager.removeUpdates(GPSLocationListener);
                CellLOcationManager.removeUpdates(NetworkLocationListener);
        }

        private void SetLocationManager() {
                GPSlocationManager =(LocationManager)getSystemService(Context.LOCATION_SERVICE);
                CellLOcationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
                NetworkLocationListener = new MyNetworkLocationListener();
                GPSLocationListener = new MyGPSLocationListener();
                GPSlocationManager.requestLocationUpdates("gps", 5000, 1, GPSLocationListener);
                CellLOcationManager.requestLocationUpdates("network", 10000, 1, NetworkLocationListener);
        }

        private class MyNetworkLocationListener implements LocationListener {

                @Override
                public void onLocationChanged(Location location) {

                }

                @Override
                public void onStatusChanged(String s, int i, Bundle bundle) {
                }

                @Override
                public void onProviderEnabled(String s) {
                }

                @Override
                public void onProviderDisabled(String s) {
                }

        } 
```

# facebook - 如何使用 Facebook Api 获取 Facebook 帖子的总点赞数

> ID：12458078
> 
> 赞同：1
> 
> 时间：2012-09-17T11:15:48.057
> 
> 标签：facebook, facebook-graph-api

我正在尝试获得 Facebook 帖子的总点赞数。如果您使用[https://graph.facebook.com/POST_ID/likes?limit=10000000](https://graph.facebook.com/POST_ID/likes?limit=10000000)发布 12332 个赞的帖子，它将返回不超过 5000 个对象的 json。即使有分页，它也不会计算所有喜欢。

# java - 将数据写入字符串

> ID：12458081
> 
> 赞同：3
> 
> 时间：2012-09-17T11:16:02.447
> 
> 标签：java, string, object

这可能很容易解决，但我现在坚持了一段时间。我有一个用于写入数据的 while 循环。我想将 while 循环中的数据写入字符串。

```
public void dumpPart(Part p) throws Exception {
    InputStream is = p.getInputStream();
    if (!(is instanceof BufferedInputStream)) {
        is = new BufferedInputStream(is);
    }
    int c;
    System.out.println("Message: ");
    while ((c = is.read()) != -1) {
        System.out.write(c);  //I want to write this data to a String.

    }
    sendmail.VerstuurEmail(mpMessage, kenmerk);
} 
```

解决了：

```
public void dumpPart(Part p) throws Exception {
    InputStream is = p.getInputStream();
    if (!(is instanceof BufferedInputStream)) {
        is = new BufferedInputStream(is);
    }
    int c;
     final StringWriter sw = new StringWriter();
    System.out.println("Message: ");
    while ((c = is.read()) != -1) {
        sw.write(c);
    }
    mpMessage = sw.toString();;
    sendmail.VerstuurEmail(mpMessage, kenmerk);
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T11:20:03.047

您可以考虑一个`java.io.StringWriter`（从 JDK 1.4+ 开始）：

```
 System.out.println("Message: ");

 final StringWriter sw = new StringWriter();

 int c;
 while ((c = is.read()) != -1) {
    sw.write(c);
 }

 String data = sw.toString(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T11:19:21.720

我会使用[IOUtils.toString(inputStream)](http://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html#toString%28java.io.InputStream%29)或类似的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T11:18:39.387

而不是 System.out 调用只是在循环之前初始化一个 StringBuffer 并附加到它：

```
StringBuffer s = new StringBuffer();
while ((c = is.read()) != -1) {
  s.append((char) c);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T11:20:55.983

最好使用 StringBuilder 对象而不是 StringBuffer （[StringBuilder 和 StringBuffer 之间的区别](https://stackoverflow.com/questions/355089/stringbuilder-and-stringbuffer-in-java)）

```
public void dumpPart(Part p) throws Exception {
    InputStream is = p.getInputStream();
    if (!(is instanceof BufferedInputStream)) {
        is = new BufferedInputStream(is);
    }
    int c;
    StringBuilder sb = new StringBuilder();
    System.out.println("Message: ");
    while ((c = is.read()) != -1) {
        sb.append(c);

    }
    String result= sb.toString();
    sendmail.VerstuurEmail(mpMessage, kenmerk);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-17T11:24:57.923

一种可能性是：

```
 int c;
    System.out.println("Message: ");
    StringWriter sw = new StringWriter();
    while ((c = is.read()) != -1) {
        sw.write(c);
    }
    System.out.println(sw.toString()); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-17T11:28:52.443

另一种方法：

```
StringBuffer buffer = new StringBuffer();
byte[] b = new byte[4096];
for (int n; (n = is.read(b)) != -1;) {
  buffer.append(new String(b, 0, n));
}
String str = buffer.toString(); 
```

# json - 以 Grails 格式渲染 Json

> ID：12458087
> 
> 赞同：2
> 
> 时间：2012-09-17T11:16:22.493
> 
> 标签：json, grails

我正在做这样的事情：

```
def prods = Product.executeQuery("select category.id,category.name, avg(competition1Price), avg(competition2Price), avg(onlineCompetitionPrice) from Product group by category.id")
            def output = [[:]]
            prods.each { result ->
                def prod = ['category_id':result[0],'category_name':result[1],'Competition1Price':result[2],'competition2Price':result[3],'onlineCompetitionPrice':result[4]]
                output << prod
                }
            render output as JSON 
```

我得到的输出是这样的：

```
 [{},{"category_id":1,"category_name":"Colchones y","Competition1Price":1657.4784,"competition2Price":2071.5,"onlineCompetitionPrice":1242.5}] 
```

我想要的是：像这样的东西..

```
 {collection:[{"category_id":"1","category_name":"Colchones y",so on...]} 
```

有人可以帮忙..如何操作json数据的格式..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:23:58.887

如果这是您想要的格式，您需要执行以下操作：

```
def prods = Product.executeQuery("select category.id,category.name, avg(competition1Price), avg(competition2Price), avg(onlineCompetitionPrice) from Product group by category.id")
def output = [collection:[]]
prods.each { result ->
    def prod = ['category_id':result[0],'category_name':result[1],'Competition1Price':result[2],'competition2Price':result[3],'onlineCompetitionPrice':result[4]]
    output.collection << prod
}
render output as JSON 
```

或者（可以说更整洁）：

```
def prods = Product.executeQuery("select category.id,category.name, avg(competition1Price), avg(competition2Price), avg(onlineCompetitionPrice) from Product group by category.id")
def prodlist = prods.collect { result ->
    [ 'category_id': result[0],
      'category_name': result[1],
      'Competition1Price':result[2],
      'competition2Price':result[3],
      'onlineCompetitionPrice':result[4] ]
}
render [ collection: prodlist ] as JSON 
```

# google-chrome - 镀铬框架 - 在本地机器上不起作用

> ID：12458088
> 
> 赞同：1
> 
> 时间：2012-09-17T11:16:26.517
> 
> 标签：google-chrome, frame

我已经在 IE 8 中安装了 chrome 框架。然后在 HTML 页面中我添加了以下元标记

当我在线上传 HTML 页面并进行测试时，这可以正常工作。但是当我在本地测试它时它不起作用。

请告知如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T11:44:31.493

What you have to do is create a new registry entry that will allow you to prefix any URL with "gcf:".

You can find the instructions here: [http://www.chromium.org/developers/how-tos/chrome-frame-getting-started#TOC-Testing-Your-Sites](http://www.chromium.org/developers/how-tos/chrome-frame-getting-started#TOC-Testing-Your-Sites)

Once you have created the registry entry, you can now force IE to use Chrome Frame by prefixing the URL like so:

```
gcf:http://www.google.com 
```

or

```
gcf:C:\tests\chromeFrameTest.html 
```

# javascript - 单页应用程序和 ASP.NET MVC

> ID：12458089
> 
> 赞同：2
> 
> 时间：2012-09-17T11:16:28.013
> 
> 标签：javascript, jquery, asp.net-mvc, singlepage

这两个是不是很合适呢？是否有任何参考/截屏/书籍解释我是如何做到的：

*   在 ASP.NET MVC 3/4 之上构建一个原始 SPA（只要满足接下来的两个要求，任何其他语言/框架都可以；
*   `History API`与`History.js`后备一起使用；
*   配置路由。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T12:43:10.043

有一些非常好的完整教程，包括来自pluralsight的视频

[http://www.pluralsight.com/training/Courses/TableOfContents/spa](http://www.pluralsight.com/training/Courses/TableOfContents/spa)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:31:46.653

也看看这里：

[http://tarkus.me/post/32121691785/angularjs-with-asp-net-mvc-4](http://tarkus.me/post/32121691785/angularjs-with-asp-net-mvc-4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T06:46:43.150

最后，我选择使用以下堆栈：

*   `ASP.NET MVC 3/4`;
*   `require.js`;
*   `backbone.js`;
*   `Twitter Bootstrap / Zurb Foundation 3`

# javascript - 使用 jQuery 将 SPAN 标记包裹在表中已存在的文本周围

> ID：12458090
> 
> 赞同：-2
> 
> 时间：2012-09-17T11:16:32.160
> 
> 标签：javascript, jquery

我想`span`在我的表格中已经存在的文本（如下所示）周围包裹一个标签。

`span`包含在标签中的文本：

```
Build Muscle and Train Harder<br> &nbsp; Boost Energy without the
Calories<br> &nbsp;  Promote Nitric Oxide Production 
```

我的 HTML：

```
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr> 
            <td>Build Muscle and Train Harder<br> &nbsp;Boost Energy without the Calories<br> &nbsp; Promote Nitric Oxide Production<br><br>
                <table cellspacing="0" cellpadding="0" border="0" id="tttt">
                    <tbody>
                        <tr>
                            <td><b><font class="pricecolor colors_productprice"><span class="PageText_L483n"><h3><b style="font-size:13px"><span class="saleprice"><font class="text colors_text"><b><span class="PageText_L335n">Sale Price</span>: </b></font></span> <b class="prodPrOr">$34.05 </b></b></h3></span></font></b><br><a class="pricecolor colors_productprice" href="/ShoppingCart.asp?ProductCode=amino%2Dchewables"><b><span class="PageText_L655n"><img class="AddRight" src="/v/vspfiles/assets/images/addtocartsmall.gif"></span></b></a>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <br><br>
                <a onclick="window.open('/help_FreeShipping.asp', 'FreeShipping', 'scrollbars,status,resizable,width=300,height=300');" href="javascript:void(0);">
                <img border="0" alt="" src="/v/vspfiles/templates/2007New/images/Icon_FreeShipping.gif" class="vCSS_img_icon_free_shipping"></a>
            </td>
            <td valign="top" align="right" id="v65-productdetail-action-wrapper" class="v65-productdetail-options">
                <div id="contact">
                    <img src="/v/vspfiles/assets/images/osw0001_talk_button.jpg">
                </div>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <ul></ul>
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T23:54:48.037

您应该向您尝试选择的 td 添加一个类或 id 以使其更简单。例如，如果你做到了：

```
<td class="myText">Build ... </td> 
```

现在您可以轻松地选择它（尽管如果由于某种原因您无法添加该类，则有一些方法可以解决这个问题 - 这只是最简单的方法），恕我直言。

```
 $('.myText').html().replace($('.myText').html().match(/^.*/), '<span class="myClass">'+$('.myText').html().match(/^.*/)+'</span>'); 
```

# database - for循环中的if else语句

> ID：12458093
> 
> 赞同：0
> 
> 时间：2012-09-17T11:16:51.790
> 
> 标签：database, oracle, plsql, oracle10g

是否有可能使用 for 循环设置 if else 条件

例如

```
 IF (emp_no IS NULL) then
 for i in (select * from employees where emp_no= p_retval)
else
 for i in (select * from employees where emp_no= p_retval_withcond)
end if; 
```

当我尝试上述方法时，我遇到了编译错误。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:21:14.617

结构如下

```
IF (emp_no IS NULL) then
  for i in (select * from employees where emp_no= p_retval)
  loop
    -- loop actions
  end loop;
else
  for i in (select * from employees where emp_no= p_retval_withcond)
  loop
    -- second loop actions
  end loop;
end if; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:19:53.300

for 循环是不可能的，但如果你在循环中的操作在这两种情况下是相似的，我会通过游标来做到这一点。

```
declare
cursor c1 is select * from employees where emp_no= p_retval;
cursor c2 is select * from employees where emp_no= p_retval_withcond;
ligne employees%rowtype;
.....
begin
   IF (emp_no IS NULL) then
      open c1;
   ELSE
      open C2;
   END IF;
   loop
      IF (emp_no IS NULL) then
         fetch C1 into ligne;
         exit when c1%notfound;
      ELSE
         fetch C2 into ligne;
         exit when c2%notfound;
      END IF;
      -- loop actions
      ....  
   end loop;
   IF (emp_no IS NULL) then
      close c1;
   ELSE
      close C2;
   END IF;
end; 
```

# jquery - 不要在点击时隐藏 OverlayPanel

> ID：12458100
> 
> 赞同：2
> 
> 时间：2012-09-17T11:17:11.893
> 
> 标签：jquery, jsf, primefaces

即使用户单击了工具提示之外的区域，我也想让 PrimeFaces[覆盖面板保持可见。](http://www.primefaces.org/showcase-labs/ui/overlayPanel.jsf)关闭工具提示的唯一方法是关闭按钮。

如何做呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-12T12:32:43.817

如果您使用 Primefaces 4-SNAPSHOT，则有一个称为可解雇的属性。当您将其设置为 false 时，只能通过再次单击该按钮来关闭叠加层。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T22:07:31.037

我不是 jquery/javascript 专家，有更优雅的解决方案。

```
<p:commandButton id="chartBtn" value="Basic" type="button" /> 
<p:overlayPanel id="chartPanel" widgetVar="chartPanelWidget" for="chartBtn" hideEffect="fade"
                                    onShow="$(document.body).unbind('mousedown.ui-overlay')">  
   <p:commandButton value="close" onclick="chartPanelWidhget.hide();return false;"/>
</p:overlayPanel> 
```

# android - 比较android服务中的变量值

> ID：12458103
> 
> 赞同：2
> 
> 时间：2012-09-17T11:17:37.603
> 
> 标签：android

我正在运行一项服务，该服务检查当前在前台运行的应用程序。以下代码提供了当前前台应用名称。

```
ActivityManager activityManager = (ActivityManager)
getSystemService(Context.ACTIVITY_SERVICE);
ListappProcesses=activityManager.getRunningTasks(1);

//get foreground App name 
 foregroundApp=appProcesses.get(0).topActivity.getPackageName(); 
```

现在我把这段代码放在一个服务里面。该服务每 15 秒检查一次前台应用程序是否已更改。如果前台应用程序更改，则前台变量会更新。当foregroundApp变量的值发生变化时如何比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:21:30.493

```
 boolean isChanged = false;
  String packageName = appProcesses.get(0).topActivity.getPackageName();
  if(!packageName.equals(foregroundApp)) {
      foregroundApp = packageName;
      isChanged = true;
  }

  if(isChanged) {
        // do your implementation if another app comes to foreground
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:19:41.940

您可以将最后一个包名称保存在静态字符串中，也可以使用 SharedPreferences 保存...在下一次检查中，您只需比较字符串（使用 String.compare）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T11:20:27.047

您可以将 appname 存储在另一个字符串中并使用 foregroundApp 字符串进行检查

# asp.net-mvc-3 - 如何在 MVC3 中使用 aspx 页面？

> ID：12458104
> 
> 赞同：0
> 
> 时间：2012-09-17T11:17:39.557
> 
> 标签：asp.net-mvc-3

我有 aspx 页面，我想在 MVC3 中使用这些页面，但是如何使用？

我已经完成了这些步骤，但我无法调试它

1.  创建一个文件夹，其中包含我在 View 中的 aspx 页面
2.  我调用部分助手在我的 cshtml 文件中对其进行调试：

    ```
    @Html.Partial("~/Views/Payment/3DPay.aspx") 
    ```

那么如何在 MVC 3 中使用 aspx 页面呢？

# facebook - 如何验证我的帐户？

> ID：12458107
> 
> 赞同：1
> 
> 时间：2012-09-17T11:17:50.510
> 
> 标签：facebook, verification, account

我有一个通过电话验证的 fbk 帐户（带有短信代码）。我正在尝试创建一个新应用程序，但我总是得到这个对话框

![应用创建失败](../Images/6b96c1ed4f70be30b4c7cb8c14c719c3.png)

我点击底部的链接（[https://www.facebook.com/help/contact_us.php?id=140703502680919](https://www.facebook.com/help/contact_us.php?id=140703502680919)）并上传了我的身份证照片，但我仍然得到这个并且无法创建应用程序。

我在我的个人资料中使用了我的真实姓名。

任何想法有什么问题以及如何验证我的帐户？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:30:48.993

上传我的照片 ID 一周后，我的帐户得到了验证，我现在可以创建应用程序并使用 Graph API

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:19:42.390

重新检查您的电子邮件地址并确认

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:16:46.647

那是因为您不是经过验证的 facebook 用户。要在 facebook 中创建应用程序，用户必须通过电话或电子邮件进行验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T12:36:56.927

Facebook 要求您使用手机或信用卡验证自己，然后才能让您成为开发人员。即，创建新的应用程序。如果您已经通过手机验证，则在输入确认码后等待 24 小时。

# xml - 在 FLEX 中通过 HTTPService 将 XML 数据检索到 ArrayCollection 时出错

> ID：12458118
> 
> 赞同：1
> 
> 时间：2012-09-17T11:18:29.803
> 
> 标签：xml, apache-flex, flex4, flash-builder

我是 FLEX 4 的新手和新手开发人员。

我正在尝试通过 usint HTTPService 将 XML 数据检索到 ArrayCollection 类中。但我收到一条错误消息“Http Request Error”

我想优雅地解决它。有什么推荐吗？？？

这是 XML 代码。

```
<?xml version="1.0" encoding="utf-8"?>
<products>
    <product id="p1">
        <name>1100</name>
        <manufacturer>Nokia</manufacturer>
        <price>2000</price>
        <imageURL>1100.jpg</imageURL>
        <description>Nokia 1100</description>
    </product>

    <product id="p2">
        <name>1110</name>
        <manufacturer>Nokia</manufacturer>
        <price>2100</price>
        <imageURL>1110.jpg</imageURL>
        <description>Nokia 1110</description>
    </product>
</products> 
```

这是一个源文件：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               creationComplete="httpService.send();">

    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->

        <mx:HTTPService id="httpService"
                        url="assets/products.xml"
                        resultFormat="object"
                        fault="httpService_fault(event)"
                        result="httpService_result(event)" />

    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.controls.Alert;
            import mx.rpc.events.FaultEvent;
            import mx.rpc.events.ResultEvent;

            public var dataObj:ArrayCollection;
            public var alert:Alert;

            private function httpService_result(event:ResultEvent):void 
            {
                dataObj = new ArrayCollection(event.result.products.product);       
            }

            private function httpService_fault(event:FaultEvent):void 
            {

                Alert.show(event.fault.faultString, event.fault.faultCode);
            }
        ]]>
    </fx:Script>
</s:Application> 
```

# mysql - MySQL：根据多个列查找重复项并删除每个列的第二次出现

> ID：12458125
> 
> 赞同：1
> 
> 时间：2012-09-17T11:18:50.457
> 
> 标签：mysql, duplicates

早上好。

我目前有以下 MySQL 查询，可在表中查找“tutor”、“startTime”、“endTime”和“date”值相同的行：

```
select 
tutor, 
date, 
startTime, 
endTime, 
count(*) cnt 
from reservations 
group by 
date, 
tutor,
startTime, 
endTime 
having cnt>1 
order by cnt asc; 
```

我想扩展此查询以删除每个重复项的第一次出现以外的所有重复项。

在表中，两行之间的唯一区别是一个名为“appointmentID”的字段。因此，查询的最终结果应该是保留第一个约会ID 行，而删除任何后续重复行。

这可能吗？我在这里和许多其他网站上进行了搜索，虽然我找到了许多查找和删除重复项的示例，但没有人根据几列中的值来处理这样做。

非常感谢！

理查德

# android - 如何在列和行之间留出空间？

> ID：12458126
> 
> 赞同：1
> 
> 时间：2012-09-17T11:18:58.150
> 
> 标签：android, row, space, android-tablelayout

我创建了一个简单的表格设计，我试图在列和行之间留出空间仍然不起作用？

这是我的 xml 代码和屏幕截图：

```
<?xml version="1.0" encoding="utf-8"?>  
<TableLayout  
    xmlns:android="http://schemas.android.com/apk/res/android"  
    android:id="@+id/tableLayout1"  
    android:layout_width="match_parent"  
    android:layout_height="match_parent"  
    android:shrinkColumns="*"  
    android:stretchColumns="*"
    >

    <TableRow
        android:id="@+id/tableRow4"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/TextView04"
            android:background="#800000"
            android:text="Today"
            android:textStyle="bold"
            android:typeface="serif" />

        <TextView
            android:id="@+id/TextView05"
            android:background="#2E8B57"
            android:layout_alignParentRight="true" 
            android:text="6:00"
            android:textStyle="bold"
            android:typeface="serif" />
    </TableRow>

    <TableRow  
        android:id="@+id/tableRow1"  
        android:layout_height="wrap_content"  
        android:layout_width="match_parent">  
        <TextView  
            android:id="@+id/TextView04"  
            android:text="Today"
             android:textStyle="bold"  
android:background="#800000"
                        android:typeface="serif"></TextView>  
        <TextView  
            android:id="@+id/TextView05"  
            android:text="6:00"  
            android:textStyle="bold"  
         android:background="#00FF7F"

            android:typeface="serif"></TextView>  
        <TextView  
            android:id="@+id/TextView03"  
            android:text="6:30"  
            android:background="#800000"

            android:textStyle="bold"  
            android:typeface="serif"></TextView>  
        <TextView  
            android:id="@+id/TextView02"  
            android:text="7:00"  
            android:background="#008000"

            android:textStyle="bold"  
            android:typeface="serif"></TextView>  
        <TextView  
            android:id="@+id/TextView01"  
            android:text="7:30"  
            android:background="#FF00FF"

            android:textStyle="bold"  
            android:typeface="serif"></TextView>  
        <TextView  
            android:text="8:00"  
            android:id="@+id/textView1"  
            android:background="#9400D3"

            android:textStyle="bold"  
            android:typeface="serif"></TextView>  
    </TableRow>  
    <TableRow  
        android:layout_height="wrap_content"  
        android:id="@+id/tableRow2"  

        android:layout_width="match_parent">  
        <TextView  
            android:text="Star Sports"  
            android:id="@+id/textView2"  
            android:background="#00FF7F"

            android:textStyle="bold"></TextView>  
        <TextView  
            android:id="@+id/textView3"  
            android:text="cricket1"  
            android:background="#FF00FF"

            android:gravity="center_horizontal"></TextView>  
        <TextView  
            android:text="cricket2"  
            android:id="@+id/textView4"  
            android:background="#FFD700"

            android:gravity="center_horizontal"></TextView>  
        <TextView  
            android:text="cricket3"  
            android:id="@+id/textView5"  
            android:background="#800000"

            android:gravity="center_horizontal"></TextView>  
        <TextView  
            android:text="cricket4"  
            android:id="@+id/textView6"  
            android:background="#9400D3"

            android:gravity="center_horizontal"></TextView>  
        <TextView  
            android:text="cricket5"  
            android:id="@+id/textView7"  
            android:background="#008000"

            android:gravity="center_horizontal"></TextView>  
    </TableRow>  
    <TableRow  
        android:layout_height="wrap_content"  
        android:id="@+id/tableRow2"  

        android:layout_width="match_parent">  
        <TextView  
            android:text="Ten Sports"  
            android:background="#9400D3"

            android:id="@+id/textView21"  
            android:textStyle="bold"></TextView>  
        <TextView  
            android:text="Foot Ball1"  
            android:background="#800000"

            android:id="@+id/textView32"  
            android:gravity="center_horizontal"></TextView>  
        <TextView  
            android:text="Foot Ball2"  
            android:id="@+id/textView43"  
            android:background="#FF00FF"

            android:gravity="center_horizontal"></TextView>  
        <TextView  
            android:text="Foot Ball3"  
            android:id="@+id/textView54"  
            android:background="#008000"

            android:gravity="center_horizontal"></TextView>  
        <TextView  
            android:text="Foot Ball4"  
            android:background="#FFD700"

            android:id="@+id/textView65"  
            android:gravity="center_horizontal"></TextView>  
        <TextView  
            android:text="Foot Ball5"  
            android:id="@+id/textView76"  
            android:background="#00FF7F"

            android:gravity="center_horizontal"></TextView>  
    </TableRow>  

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:21:41.130

你试过 android:layout_margin(Left|Right|Top|Bottom) 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:55:11.250

在你的单元格之间试试这个，无论是列还是行

```
 <View android:layout_width="fill_parent" android:layout_height="1dip" android:background="#716f6f" /> 
```

# linux - 删除目录中的所有文件，但列出的匹配特定条件的文件除外

> ID：12458131
> 
> 赞同：-1
> 
> 时间：2012-09-17T11:19:15.527
> 
> 标签：linux, bash, delete-file, rm

我需要自动清理仅保存备份文件的基于 Linux 的 FTP 服务器。

在我们的“\var\DATA”目录中是一个目录集合。此处用于备份的任何目录都以“DEV”开头。每个“DEVxxx*”目录中都有实际的备份文件，以及在这些设备的维护过程中可能需要的任何用户文件。

我们只想保留以下文件 - 在这些“DEVxxx*”目录中找到的任何其他内容都将被删除：

```
The newest two backups:  ls -t1 | grep -m2 ^[[:digit:]{6}_Config]  
The newest backup done on the first of the month:  ls -t1 | grep -m1 ^[[:digit:]{4}01_Config] 
Any file that was modified less than 30 days ago:  find -mtime -30  
Our good configuration file:  ls verification_cfg 
```

任何与上述不符的都应删除。

我们如何编写这个脚本？

我猜 BASH 脚本可以做到这一点，并且我们可以创建一个每天运行的 cron 作业来执行任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:57:47.857

大概是这样的？

```
{ ls -t1 | grep -m2 ^[[:digit:]{6}_Config] ;
  ls -t1 | grep -m1 ^[[:digit:]{4}01_Config] ;
  find -mtime -30 ;
  ls -1 verification_cfg ;
} | rsync -a --exclude=* --include-from=- /var/DATA/ /var/DATA.bak/
rm -rf /var/DATA
mv /var/DATA.bak /var/DATA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:25:45.313

值得一提的是，这是我为完成任务而创建的 bash 脚本。欢迎评论。

```
#!/bin/bash

# This script follows these rules:
#
#  - Only process directories beginning with "DEV"
#  - Do not process directories within the device directory
#  - Keep files that match the following criteria:
#     - Keep the two newest automated backups
#     - Keep the six newest automated backups generated on the first of the month
#     - Keep any file that is less than 30 days old
#     - Keep the file "verification_cfg"
#
#  - An automated backup file is identified as six digits, followed by "_Config"
#    e.g.  20120329_Config

# Remember the current directory
CurDir=`pwd`

# FTP home directory
DatDir='/var/DATA/'
cd $DatDir

# Only process directories beginning with "DEV"
for i in `find . -type d -maxdepth 1 | egrep '\.\/DEV' | sort` ; do
 cd $DatDir

 echo Doing "$i"
 cd $i

 # Set the GROUP EXECUTE bit on all files
 find . -type f -exec chmod g+x {} \;

 # Find the two newest automated config backups
 for j in `ls -t1 | egrep -m2 ^[0-9]{8}_Config$` ; do
  chmod g-x $j
 done

 # Find the six newest automated config backups generated on the first of the month
 for j in `ls -t1 | egrep -m6 ^[0-9]{6}01_Config$` ; do
  chmod g-x $j
 done

 # Find all files that are less than 30 days old
 for j in `find -mtime -30 -type f` ; do
  chmod g-x $j
 done

 # Find the "verification_cfg" file
 for j in `find -name verification_cfg` ; do
  chmod g-x $j
 done

 # Remove any files that still have the GROUP EXECUTE bit set
 find . -type f -perm -g=x -exec rm -f {} \;

done

# Back to the users current directory
cd $CurDir 
```

# android - Android 自定义日历和提醒

> ID：12458139
> 
> 赞同：3
> 
> 时间：2012-09-17T11:19:46.997
> 
> 标签：android, android-sqlite, android-calendar

我的应用程序将包含一个自定义日历，用户可以根据这个日历创建事件和提醒。

问题是，是否可以在 android 中创建自定义日历？

（我的意思是我想在我的日历中创建事件，这些事件不会出现在 Android 的主日历中。最好用户也可以将这些事件添加到 Android 的日历中。）

所以我的第一个问题是，是否可以创建这种应用程序？

2-) 我需要为这个项目使用 SQL lite 吗？或Android存储这些信息？因为我想让用户能够编辑和删除事件和提醒。

任何教程或开源项目都会有所帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T11:36:18.323

@osayilgan

检查此链接：

安卓：[安卓简单日历](http://w2davids.wordpress.com/android-simple-calendar/)

[android中的自定义日历日视图](https://stackoverflow.com/questions/6858162/custom-calendar-dayview-in-android)

[如何在 Android 应用程序中显示日历 UI？](https://stackoverflow.com/questions/6080307/how-to-display-a-calendar-ui-in-an-android-application)

[如何在 Android 中实现 CalendarView](http://caughtinthemobileweb.wordpress.com/2011/06/20/how-to-implement-calendarview-in-android/)

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:38:29.403

使用 4.0 中的日历提供程序，您可以很容易地阅读、编辑事件并将其添加到设备上的日历中。

[日历提供者](http://developer.android.com/guide/topics/providers/calendar-provider.html)

关于这个主题有多个帖子，Simon 也在这里总结了一遍

[西门说 ：）](https://stackoverflow.com/a/11157587/1165581)

# mongodb - 使用 pymongo 将 MongoDB 导出为 CSV

> ID：12458141
> 
> 赞同：9
> 
> 时间：2012-09-17T11:19:53.657
> 
> 标签：mongodb, pymongo

我想编写一个脚本来从我的 mongoDB 数据库生成一个 CSV 文件，我想知道最方便的版本！

首先让我从集合的结构开始。

```
MyDataBase -> setting
              users
              fruits 
```

在设置中我有类似的东西

```
setting -> _id
           data
           _tenant 
```

而我所追求的，是从*数据* 中的配置文件中制作一个 CSV 文件，这些配置文件具有一些字段/属性，例如“姓名”、“地址”、“邮政编码”、“电子邮件”、年龄等，而不是全部这些配置文件具有所有文件/属性，甚至其中一些看起来像我根本不感兴趣的集合（有子分支）！

所以，我的代码是 python 到目前为止看起来像这些

```
myquery = db.settings.find() # I am getting everything !
output = csv.writer(open('some.csv', 'wt')) # writng in this file

for items in myquery[0:10]: # first 11 entries
    a = list(items['data']['Profile'].values()) # collections are importent as dictionary and I am making them as list
    tt = list()
    for chiz in a:
        if chiz is not None:
            tt.append(chiz.encode('ascii', 'ignore')) #encoding
        else:
            tt.append("none")
    output.writerow(tt) 
```

这些字段/属性没有必要的所有字段，甚至其中一些是集合（带有子分支）并将作为字典导入！所以，我必须将它们转换为列表和所有，在这样的过程中需要注意的事情很少，而且看起来并不那么简单！

我的问题可能听起来很笼统，但这是制作此类报告的典型方式吗？如果没有，你能说清楚吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-21T10:23:08.900

是的，我正在使用相同的方式。它清晰而快速，并且无需任何其他库即可工作。

# php - Zend 表单中文本字段的自动完成 - Zend Framework 2

> ID：12458142
> 
> 赞同：0
> 
> 时间：2012-09-17T11:19:59.403
> 
> 标签：php, zend-form, zend-framework2

在 Zend Framework 2 官方网站的专辑模块之后，我打算添加自动完成功能，例如在 Artist 文本字段中，我想包括自动完成功能，这样当用户输入时，我想显示一个下拉列表，其中填充了与用户键入的数据相似的数据，那么解决此问题的最佳方法是什么。在搜索 Zend Frame 2 站点时，我已登陆此[页面](http://packages.zendframework.com/docs/latest/manual/en/modules/zend.form.view.helpers.html#formelement)。

我不确定我的方法是否正确，任何以正确方式进行的指导将不胜感激。有关此的任何示例也将有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:53:47.790

如果你不知道 ajax 是什么，你应该开始学习 ajax。一旦你弄清楚如何做 ajax，那么如果你发现一些问题，那么你可以来这里寻求一些代码建议，但先试试自己

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:41:40.520

今天使用 Auto-Suggest 时，您应该问自己一个问题：

**自动建议的最大数据量是多少**

推理：

如果数据很少，即如果您有汽车供应商列表或类似的东西。或者，如果您的条目数量非常有限，那么您应该考虑使用[DATALIST采用 HTML5 方式](http://www.w3schools.com/html5/tag_datalist.asp "数据列表")

但是，如果数据经常变化，并且非常大，那么预先加载所有内容并不是最理想的方式，而使用 AJAX 是正确的做法。这里没有 ZF2-Specific :)

# configuration - JBossAS-5.x 中的 Quartz 默认配置

> ID：12458151
> 
> 赞同：0
> 
> 时间：2012-09-17T11:20:29.980
> 
> 标签：configuration, jboss, default, quartz-scheduler

我正在使用 JBossAS-5.x 中提供的 Quartz Scheduler。我想更改 Quartz 的默认配置。例如线程和所有东西。但我无法在 JBoss 中找到默认配置文件。请提出一些相同的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:48:06.233

您可以在石英源代码存储库中找到它：http: [//svn.terracotta.org/svn/quartz/trunk/quartz-jboss/src/main/java/org/quartz/ee/jmx/jboss/doc-files /石英服务.xml](http://svn.terracotta.org/svn/quartz/trunk/quartz-jboss/src/main/java/org/quartz/ee/jmx/jboss/doc-files/quartz-service.xml)

HIH

# wcf - 具有多个客户端的 WCF

> ID：12458153
> 
> 赞同：0
> 
> 时间：2012-09-17T11:20:51.607
> 
> 标签：wcf

我正在尝试通过此示例学习 WCF [http://www.codeproject.com/Articles/39143/C-WCF-Client-Server-without-HTTP-with-Callbacks-Ma](http://www.codeproject.com/Articles/39143/C-WCF-Client-Server-without-HTTP-with-Callbacks-Ma)

还尝试通过添加与多个客户端的互斥来扩展服务器上的功能。我基本上是在尝试拥有一个全局数字数组和一个可以访问该数组的函数（已通过 Operationcontract 公开）。但一次只允许一个客户端访问该数组。

有人可以通过添加一个带有互斥锁的简单功能来为我指明正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:34:30.767

根据您到底想要做什么，如何在访问您的数组的函数周围加锁（也许事件将您的数组放入单例中）。

那么你可以有

```
class SingletonClassForYourArray {
   object aLock = new object();
   int yourArray;
   private SingletonClassForYourArray instance;

   public SingletonClassForYourArray GetInstance()
   {
   // normal singleton init of instance on demand
   }

   int [] YourArray 
   {
       get 
       {
           lock(aLock)
           {
               return yourArray;
           }          
       }
   }
} 
```

这将是只有一个客户端访问阵列的最简单方法。所有没有锁的客户端都必须轮流等待（不能保证公平）。请小心，因为如果客户端必须等待很长时间，这可能会导致超时。

# eclipse - Eclipse PropertyPage 启用

> ID：12458157
> 
> 赞同：1
> 
> 时间：2012-09-17T11:21:19.190
> 
> 标签：eclipse, eclipse-pde, eclipse-plugin, pde

我想通过我的插件在 eclipse 中添加一个属性页。此属性页面必须仅针对我的性质的项目启用。我在 plugin.xml 中编写了以下代码

```
<extension
   point="org.eclipse.ui.propertyPages">
 <page
      class="com.test.me.ME"
      id="com.test.me.ME"
      name="ME">
     <and>
        <instanceof 
              value="org.eclipse.core.resources.IProject">
        </instanceof>
        <adapt
              type="org.eclipse.core.resources.IResource">
               <test
                    property="org.eclipse.core.resources.projectNature"
                    value="com.test.me.meprojectnature">
               </test>
    </adapt>
</and> 
 </page> 
```

上面的代码适用于项目资源管理器和导航器视图中的项目。但同样在包资源管理器视图中不起作用。

那么，如何实现特定于包资源管理器视图的相同功能呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T15:07:10.157

您应该将您的 instanceof 检查移到适应中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:37:52.403

我没有尝试过，但我的观点是在你的包资源管理器中没有`org.eclipse.core.resources.IProject`元素，你应该尝试你有任何输入（例如`org.eclipse.jdt.core.IJavaProject`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T02:49:08.550

@nitind 是对的，您指定了太多约束。You want to say "Enabled when the selection is adaptable to an IProject and it's "projectNaure" property includes "my nature."

这应该这样做：

```
 <extension point="org.eclipse.ui.propertyPages">
  <page
        name="My Property Page"
        class="some.package.MyPropertyPage"
        id="some.package.MyPropertyPage">
     <enabledWhen>
         <adapt type="org.eclipse.core.resources.IProject">
              <test
                 property="org.eclipse.core.resources.projectNature"
                 value="some.package.MyNatureID"/>
         </adapt>         
     </enabledWhen>
  </page> 
```

# javascript - How do I deal with JSLint errors and warnings?

> ID：12458163
> 
> 赞同：3
> 
> 时间：2012-09-17T11:21:30.143
> 
> 标签：javascript, jquery, jslint

I have the following code:

```
var $form = $modal.find('#main-form');
var $submitBt = $modal.find('.block-footer button:contains("Submit")');
var oSubmit = {
    $form: $form,
    $modal: $modal,
    action: $form.attr('data-action'),
    entity: $form.attr('data-entity'),
    href: $form.attr('data-href'),
    row: $link.attr('data-row'),
    $row: $('#row_' + $link.attr('data-row')),
    $submitBt: $submitBt
}; 
```

When I used jslint it told me three things:

1.  Missing `'use strict'` statement.
2.  Combine this with the previous 'var' statement. `<-` many of these
3.  `$row: $('#row_' + $link.attr('data-row'))` - error: '$' was used before it was defined.

Can someone give me some advice on what's normal practice with these messages.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T11:25:44.763

1.  关于`use strict`，看看[严格模式](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode)。这是一个选择加入的功能，所以它不是错误。

2.  这只是口味问题。JSLint 建议您编写：

    ```
    var foo, bar, baz; 
    ```

    代替

    ```
    var foo;
    var bar;
    var baz; 
    ```

3.  这是因为 JSLint 不了解 jQuery（及其“$”变量），因此它认为您正在使用未定义的变量。您可以`/* global $ */`在 JS 文件的顶部放置 a，或者在此处输入`$`预定**义全局变量**的文本（感谢 Fabrício Matté）

* * *

此外，关于 JSLint 的一般情况：

> JSLint 测试一个特定的人（Douglas Crockford）关于什么是好的 JavaScript 代码的意见。Crockford 非常好，但他的一些观点充其量只是保留性，比如下划线规则，或者使用递增/递减运算符。
> 
> JSLint 在上述输出中标记的许多问题是 Crockford 认为导致难以维护代码的问题，或者是他认为过去导致他做出难以维护的“聪明”事情的事情。
> 
> [来源（狐步）](https://stackoverflow.com/questions/505251/what-good-is-jslint-if-jquery-fails-the-validation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T11:23:59.293

They are just messages, not errors. You can easily switch them off and/or ignore them.

1) is more a tip than a "missing statement".

2) is a code style hint. You may write:

```
var $form = …,
    $submitBt = …,
    oSubmit = …; 
```

3) seems like a unusual inclusion of jQuery (did you redeclare it?), or that jslint missed the global variable.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T11:28:38.167

1) `use strict`：这基本上可以让你写出更好的 JavaScript。它可以防止您使用 JavaScript 中的一些“坏”功能。

2）组合`var`：不要担心这个，这只是一种风格偏好。

3)`$`在定义之前使用：它只是通知您`$`不存在。您必须将其添加到 jsLint 全局变量中。

您可以通过将选项放在 JS 文件的开头来禁用 jsLint 中的任何这些选项：

```
/*jslint options */ 
```

更多信息请访问[http://www.jslint.com/lint.html](http://www.jslint.com/lint.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T11:25:01.307

1.  Add `"use strict";` to the start to the function.
2.  Declare the variables using one `var` statement: `var foo = b, bar = d`, etc.
3.  Add `/*global $: false */` to the start of the file. This will tell JSLint that there exists a global variable called $ which the script can use.

# android - Android中的大型复杂项目列表

> ID：12458167
> 
> 赞同：0
> 
> 时间：2012-09-17T11:21:40.947
> 
> 标签：android, android-listview, listitem

采取以下示例屏幕：

![包含多个复杂项目的示例屏幕](../Images/4f2b0cff401355c54a6e3ec9d44c6837.png)

此屏幕显示所有当前报价，这些报价是动态的。

实施“报价”项目的最佳方式是什么？我应该使用带有自定义 ListItem 的 ListView 还是有更好的解决方案来处理这样的复杂项目列表？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:28:10.360

使用包含单元格布局的列表创建适配器。

```
public class ListObject {
    public int layout;
    ... other fields;
}

public class MyAdapter extends ArrayAdapter<ListObject> 
```

并在 getview 方法中，对商品所需的视图进行膨胀。

```
public View getView(...) {
    ListObject lo = getItem(position);
    convertview = inflater.inflate(lo.layout, null);
} 
```

这是你想做的吗？如果不解释你的问题多一点。

# python - Python 服务器的实时分析

> ID：12458170
> 
> 赞同：2
> 
> 时间：2012-09-17T11:21:55.903
> 
> 标签：python, django, profiling, live

我想知道python解释器在哪里花费的时间最多。我在实时 django 应用程序上使用它，但它应该适用于所有长时间运行的 python 进程。

我回答我自己的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:21:55.903

```
import os, re, sys, time, datetime, collections, thread, threading, atexit, traceback 

u'''

debug_live.start(seconds_float) starts a monitor thread which print 
the stacktrace of all threads into a logfile.
You can report which lines are executed the most with this script:

app_foo_d@server:~$ python djangotools/utils/debug_live.py -h
usage: debug_live.py [-h] [--most-common N] {sum-all-frames,sum-last-frame}

Read stacktrace log

positional arguments:
  {sum-all-frames,sum-last-frame}

optional arguments:
  -h, --help            show this help message and exit
  --most-common N       Display the N most common lines in the stacktraces

---------------------------------

You can start the watching thread your django middleware like this:

class FOOMiddleware:
    def __init__(self):
        u'This code gets executed once after the start of the wsgi worker process. Not for every request!'
        seconds=getattr(settings, 'debug_live_interval', None)
        if seconds:
            seconds=float(seconds)
            from djangotools.utils import debug_live
            debug_live.start(seconds)

# settings.py
debug_live_interval=0.3 # ever 0.3 second

# Inspired by http://code.google.com/p/modwsgi/wiki/DebuggingTechniques

You can get a simple report of the log file of stacktraces like below. The lines
which are not from django are marked with "<====". That's most likely your code
and this could be a bottle neck.

python ..../debug_live.py read
 1971 File: "/home/foo_bar_p/django/core/handlers/wsgi.py", line 272, in __call__
      response = self.get_response(request)
 1812 File: "/home/foo_bar_p/django/core/handlers/base.py", line 111, in get_response
      response = callback(request, *callback_args, **callback_kwargs)
 1725 File: "/home/foo_bar_p/django/db/backends/postgresql_psycopg2/base.py", line 44, in execute
      return self.cursor.execute(query, args)
 1724 File: "/home/foo_bar_p/django/db/models/sql/compiler.py", line 735, in execute_sql
      cursor.execute(sql, params)
 1007 File: "/home/foo_bar_p/django/db/models/sql/compiler.py", line 680, in results_iter
      for rows in self.execute_sql(MULTI):
  796 File: "/home/foo_bar_p/django/db/models/query.py", line 273, in iterator
      for row in compiler.results_iter():
  763 File: "/home/foo_bar_p/foo/utils/ticketutils.py", line 135, in __init__      <====
      filter=type_filter(root_node=self.root_node)
  684 File: "/home/foo_bar_p/django/db/models/query.py", line 334, in count
      return self.query.get_count(using=self.db)
  679 File: "/home/foo_bar_p/django/db/models/sql/query.py", line 367, in get_aggregation
      result = query.get_compiler(using).execute_sql(SINGLE)
  677 File: "/home/foo_bar_p/django/db/models/sql/query.py", line 401, in get_count
      number = obj.get_aggregation(using=using)[None]

'''

from django.conf import settings

outfile = os.path.expanduser('~/tmp/debug_live.log')

other_code=re.compile(r'/(django|python...)/')

def stacktraces():
    code=[]
    now=datetime.datetime.now()
    pid=os.getpid()
    my_thread_id=thread.get_ident()
    for thread_id, stack in sys._current_frames().items(): 
        if thread_id==my_thread_id:
            continue # Don't print this monitor thread
        code.append("\n\n#START date: %s\n# ProcessId: %s\n# ThreadID: %s" % (now, pid, thread_id))
        for filename, lineno, name, line in traceback.extract_stack(stack): 
            code.append('File: "%s", line %d, in %s' % (filename, lineno, name)) 
            if line: 
                code.append("  %s" % (line.strip()))
        code.append('#END')
    if not code:
        return
    fd=open(outfile, 'at')
    fd.write('\n'.join(code))
    fd.close()

def monitor(interval):
    while monitor_thread:
        stacktraces()
        time.sleep(interval)

monitor_thread=None

def exiting():
    global monitor_thread
    monitor_thread=None

def start(interval):
    global monitor_thread
    if monitor_thread:
        return
    assert not os.path.islink(outfile), outfile # well known temporary name.... symlink attack...
    monitor_thread = threading.Thread(target=monitor, args=[interval])
    monitor_thread.setDaemon(True)
    atexit.register(exiting)
    monitor_thread.start()

def read_logs(args):
    # The outfile can be huge, don't read the whole file into memory.
    counter=collections.Counter()
    cur_stack=[]
    py_line=''
    code_line=''
    if args.action=='sum-all-frames':
        sum_all_frames=True
    else:
        sum_all_frames=False
    for line in open(outfile):
        if line.startswith('#END'):
            if sum_all_frames:
                frames=cur_stack
            else:
                frames=cur_stack[-1:]
            counter.update(frames)
            cur_stack=[]
            continue
        if line[0] in '\n#':
            continue
        if line.startswith('File:'):
            py_line=line.rstrip()
            continue
        if line.startswith(' '):
            code_line=line.rstrip()
            if not (py_line, code_line) in cur_stack:
                # If there is a recursion, count the line only once per stacktrace
                cur_stack.append((py_line, code_line))
            continue
        print 'ERROR unparsed', line
    for (py, code), c in counter.most_common(args.most_common):
        if not other_code.search(py):
            py='%s      <====' % py
        print '% 5d %s\n    %s' % (c, py, code)

def main():
    import argparse
    parser=argparse.ArgumentParser(description='Read stacktrace log')
    parser.add_argument('action', choices=['sum-all-frames', 'sum-last-frame'])
    parser.add_argument('--most-common', metavar='N', default=30, type=int, help='Display the N most common lines in the stacktraces')
    args=parser.parse_args()
    return read_logs(args)

if __name__=='__main__':
    main() 
```

# bash - 带大括号的 Bash 变量扩展语法

> ID：12458171
> 
> 赞同：0
> 
> 时间：2012-09-17T11:21:56.813
> 
> 标签：bash, syntax, expansion

以下 bash 语法是什么意思？

```
MY_VAR=${MY_VAR:-"mystring"} 
```

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:27:37.047

请参阅中的*参数扩展*`man bash`：

> ${参数：-字}
> 
> 使用默认值。如果`parameter`未设置或为空，`word` 则替换 的扩展。否则，`parameter`替换 的值。

# python - Full control over HTTP headers in Python?

> ID：12458173
> 
> 赞同：1
> 
> 时间：2012-09-17T11:22:11.967
> 
> 标签：python, http, http-headers

Is there any Python HTTP library that helps to imitate one of popular web-browser and has HTTPS support? I would like to define the order of HTTP headers, the presence of each exact header, the order of cookies values - everything that relates to "fingerprint" of a browser. We need that to test specific web server.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:38:58.853

`httplib.request`将需要一个`OrderedDict`for 标题。某些标头将自动添加以符合协议，如果您在提供的标头中指定它们，这些标头将被忽略。

查看`putheader`and`_send_request`方法，如果它们的行为不符合您的目的，您可以覆盖它们。

```
>>> import httplib
>>> from collections import OrderedDict
>>> h = OrderedDict(('X-A','a'),('X-B','b'),('X-C','c'))
>>> c = httplib.HTTPConnection('localhost')
>>> c.set_debuglevel(1)
>>> r = c.request('GET','/','',h)
send: 'GET / HTTP/1.1\r\nHost: localhost\r\nAccept-Encoding: identity\r\nX-A: a\r\nX-B: b\r\nX-C: c\r\n\r\n' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:43:56.257

查看[Requests](http://docs.python-requests.org/en/latest/index.html)，它非常易于使用并且拥有您所需要的一切。或者，您可以使用[Selenium](http://seleniumhq.org/)从 Python*驱动Web 浏览器本身*

# rabbitmq - MassTransit 丢失消息 - Rabbit MQ - 当发布者和消费者端点名称相同时，

> ID：12458175
> 
> 赞同：4
> 
> 时间：2012-09-17T11:22:13.633
> 
> 标签：rabbitmq, masstransit

如果您使用相同的端点名称创建发布者和消费者，我们遇到了 MassTransit 丢失消息的情况。

注意下面的代码；如果我为消费者或发布者使用不同的端点名称（例如，发布者为“rabbitmq://localhost/mtlossPublised”），那么消息将同时计算发布和消费匹配；如果我使用相同的端点名称（如示例中），那么我收到的消息比发布的消息少。

这是预期的行为吗？还是我做错了什么，下面的工作示例代码。

```
using MassTransit;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace MTMessageLoss
{
    class Program
    {
        static void Main(string[] args)
        {
            var consumerBus = ServiceBusFactory.New(b =>
            {
                b.UseRabbitMq();
                b.UseRabbitMqRouting();
                b.ReceiveFrom("rabbitmq://localhost/mtloss");
            });
            var publisherBus = ServiceBusFactory.New(b =>
            {
                b.UseRabbitMq();
                b.UseRabbitMqRouting();
                b.ReceiveFrom("rabbitmq://localhost/mtloss");
            });
            consumerBus.SubscribeConsumer(() => new MessageConsumer());
            for (int i = 0; i < 10; i++)
                publisherBus.Publish(new SimpleMessage() { CorrelationId = Guid.NewGuid(), Message = string.Format("This is message {0}", i) });
            Console.WriteLine("Press ENTER Key to see how many you consumed");
            Console.ReadLine();
            Console.WriteLine("We consumed {0} simple messages. Press Enter to terminate the applicaion.", MessageConsumer.Count);
            Console.ReadLine();
            consumerBus.Dispose();
            publisherBus.Dispose();
        }
    }
    public interface ISimpleMessage : CorrelatedBy<Guid>
    {
        string Message { get; }
    }
    public class SimpleMessage : ISimpleMessage
    {
        public Guid CorrelationId { get; set; }
        public string Message { get; set; }
    }
    public class MessageConsumer : Consumes<ISimpleMessage>.All
    {
        public static int Count = 0;
        public void Consume(ISimpleMessage message)
        {
            System.Threading.Interlocked.Increment(ref Count);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T23:24:46.750

最重要的是，总线的每个实例都需要它自己的队列来读取。即使总线只是为了发布消息而存在。这只是 MassTransit 工作方式的一个要求。

[http://masstransit.readthedocs.org/en/master/configuration/config_api.html#basic-options](http://masstransit.readthedocs.org/en/master/configuration/config_api.html#basic-options) - 查看警告。

当两个总线实例共享同一个队列时，我们将行为保留为未定义。无论如何，这不是我们支持的条件。每个总线实例都可以将元数据发送到其他总线实例，并且需要它自己的端点。这对 MSMQ 来说是一个更大的交易，所以也许我们可以让这个案例在 RabbitMQ 上工作——但这​​不是我们在这一点上花太多心思的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:05:50.720

发生的情况是，在提供相同的 Receiver Uri 时，您是在告诉 MT 在两条总线上对消耗进行负载平衡，但是您只有一条总线在收听消息。

如果你让它跟踪收到了*哪些*消息，你会看到它（几乎）每秒都有一个。

调整了您的示例代码后，我得到了

```
We consumed 6 simple messages. Press Enter to terminate the applicaion.
Received 0
Received 3
Received 5
Received 6
Received 7
Received 8 
```

在另一辆公共汽车上启动消费者，您将获得所有消费者

```
We consumed 10 simple messages. Press Enter to terminate the applicaion.
Received 0
Received 1
Received 2
Received 3
Received 4
Received 5
Received 6
Received 7
Received 8
Received 9 
```

**所以是的，我会说这是预期的行为。**

这是两个订阅者的调整示例代码

```
using MassTransit;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace MTMessageLoss
{
    class Program
    {
        internal static bool[] msgReceived = new bool[10];
        static void Main(string[] args)
        {
            var consumerBus = ServiceBusFactory.New(b =>
                {
                    b.UseRabbitMq();
                    b.UseRabbitMqRouting();
                    b.ReceiveFrom("rabbitmq://localhost/mtloss");
                });
            var publisherBus = ServiceBusFactory.New(b =>
                {
                    b.UseRabbitMq();
                    b.UseRabbitMqRouting();
                    b.ReceiveFrom("rabbitmq://localhost/mtloss");
                });
            publisherBus.SubscribeConsumer(() => new MessageConsumer());
            consumerBus.SubscribeConsumer(() => new MessageConsumer());
            for (int i = 0; i < 10; i++)
                consumerBus.Publish(new SimpleMessage()
                    {CorrelationId = Guid.NewGuid(), MsgId = i});
            Console.WriteLine("Press ENTER Key to see how many you consumed");
            Console.ReadLine();
            Console.WriteLine("We consumed {0} simple messages. Press Enter to terminate the applicaion.",
                              MessageConsumer.Count);
            for (int i = 0; i < 10; i++)
                if (msgReceived[i])
                    Console.WriteLine("Received {0}", i);
            Console.ReadLine();
            consumerBus.Dispose();
            publisherBus.Dispose();

        }
    }
    public interface ISimpleMessage : CorrelatedBy<Guid>
    {
        int MsgId { get; }
    }
    public class SimpleMessage : ISimpleMessage
    {
        public Guid CorrelationId { get; set; }
        public int MsgId { get; set; }
    }
    public class MessageConsumer : Consumes<ISimpleMessage>.All
    {
        public static int Count = 0;
        public void Consume(ISimpleMessage message)
        {
            Program.msgReceived[message.MsgId] = true;
            System.Threading.Interlocked.Increment(ref Count);
        }
    }
} 
```

# php - 如何在 Xampp 下安装 SmallFry MVC 框架

> ID：12458177
> 
> 赞同：0
> 
> 时间：2012-09-17T11:22:15.620
> 
> 标签：php

如何安装和使用 SmallFry 框架。

1.  我从[https://github.com/maniator/SmallFry下载了它](https://github.com/maniator/SmallFry)
2.  将其提取到 htdocs 下并将所有内容放在文件夹中：smallfry (C:\xampp\htdocs\smallfry)。
3.  将文档根设置为 define('DOCROOT', 'C:/xampp/htdocs'); 在 Autoloader.php 中。
4.  将数据库信息更改为以下设置---

> ```
> $CONFIG->set('DB_INFO', array(
>     'host' => 'localhost',
>     'login' => 'root',
>     'password' => '',
>     'database' => 'smallfry',
> )); 
> ```

仍然收到以下错误-

![错误](../Images/fc1cff537c5bd517c5760303407ae321.png)

让我知道还有什么需要改变的，因为我对这个框架很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:25:14.437

显然，该框架有点过时了，因为确实不推荐使用通过引用分配 new 的返回值。您应该查找`$x =& new Obj;`呼叫并删除`&`.

修复其他问题后，应修复致命错误。根据文档，该方法应该存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:29:59.590

由于前两个错误而发生致命错误。

由于不推荐使用的警告`Config`类未正确加载。

# serialization - BinaryFormatter 对 Option / None 的序列化使用 F# 抛出 ArgumentNullException

> ID：12458181
> 
> 赞同：0
> 
> 时间：2012-09-17T11:22:34.063
> 
> 标签：serialization, f#, option

如何在 F# 中序列化 None？以下代码引发`System.ArgumentNullException: Object Graph cannot be null.`错误：

```
let f = System.Runtime.Serialization.Formatters.Binary.BinaryFormatter()
let m = System.IO.MemoryStream()
f.Serialize (m, None) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:14:58.873

出于某些性能原因，编译器通常会将`None = null`. 我认为最好的解决方案是将整个东西包裹在一个额外的选项层中

像这样

```
let f = System.Runtime.Serialization.Formatters.Binary.BinaryFormatter()
let m = System.IO.MemoryStream()
f.Serialize (m,Some( None)) 
```

`Some`然后在反序列化时删除多余的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T11:20:29.077

尝试使用不同的`serializer`，例如`NetDataContractSerializer`. 据我所知`BinaryFormatter`，这被认为是遗留问题，并且还有其他一些问题，例如[this](http://fpish.net/topic/Some/0/59723)。

# nginx - start-stop-daemon does not write to nginx.pid file even though the file is present

> ID：12458182
> 
> 赞同：6
> 
> 时间：2012-09-17T11:22:36.883
> 
> 标签：nginx, start-stop-daemon

This may seem to be a repeated question but it is not. I found some articles on it where `start-stop-daemon` doesn't create a PID file. But in my case, I have already created the PID file. I execute this command on my server to start Nginx:

```
/mnt/nginx/logs/nginx.pid
start-stop-daemon --start --quiet --pidfile /mnt/nginx/logs/nginx.pid --exec /usr/local/sbin/nginx 
```

The PID file is already present but still the `start-stop-daemon` doesn't write to the file. I even tried to use the `--make-pidfile` option but then the `start-stop-daemon` writes wrong pid to the file.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T03:15:02.337

该`--make-pidfile`选项是必需的。写“错误的pid”的原因`start-stop-daemon`是`nginx`分叉。这在`start-stop-daemon`手册页中有说明：

```
 -m, --make-pidfile
          Used when starting a program that does not create  its  own  pid
          file.  This  option  will make start-stop-daemon create the file
          referenced with --pidfile and place the pid into it just  before
          executing  the  process. Note, the file will not be removed when
          stopping the program.  NOTE: This feature may not  work  in  all
          cases.  Most  notably when the program being executed forks from
          its main process. Because of this, it  is  usually  only  useful
          when combined with the --background option. 
```

（参见重新分叉的部分。）

您需要使用不同的解决方案，例如`nginx`创建自己的 pid 文件。

# mysql - 如何将值随机分配给集合中的字段？

> ID：12458185
> 
> 赞同：0
> 
> 时间：2012-09-17T11:23:14.690
> 
> 标签：mysql, sql-update

我的表格配置文件中有两列，它们是`id`和`education`。现在我想随机分配可以在这个集合中的教育字段值`('HA','BA,'CA' and 'DA')`。我怎样才能在一个命令中做到这一点。`id`是该表的主键。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T11:38:03.387

如下所述：[`ELT(*N*,*str1*,*str2*,*str3*,…)`](http://dev.mysql.com/doc/en/string-functions.html#function_elt)

> 返回`str1`if `N = 1`、`str2`if`N = 2`等。

如下所述[`RAND()`](http://dev.mysql.com/doc/en/mathematical-functions.html#function_rand)：

> 要获得*`R`*范围内的随机整数*`i <= R < j`*，请使用表达式`FLOOR(i + RAND() * (j – i))`。

所以：

```
UPDATE my_table SET education = ELT(FLOOR(1 + RAND() * 4), 'HA', 'BA', 'CA', 'DA') 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/39b12/1/0)上查看。

# c++ - What is the rationale behind not having a writesome function for basic_ostream in the STL?

> ID：12458187
> 
> 赞同：2
> 
> 时间：2012-09-17T11:23:23.920
> 
> 标签：c++, stl, network-programming, iostream

While working on a network library I recently noticed that having a pendant to basic_streambuf::in_avail in conjunction with a writesome function would be pretty handy for asynchronous I/O.

I have searched the web and checked several C++ references if there is any function which meets these demands, but it seems I had no luck. The only source which mentions similar functionality is [Boost's Asio](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/basic_stream_socket/write_some.html) library, however the description clearly states that the function call will block until at least one byte has been sent which does not reflect my desired behaviour.

To elaborate on my question, I created a rough draft based on the C++ N3337 publication.

> **27.6.3.2.5 Put area [streambuf.pub.put]**
> 
> `streamsize in_depart();`
> 
> *Returns:* If a write position is available, returns `epptr() - pptr()`. Otherwise returns `showmanycp()`.
> 
> **27.6.3.4.5 Put area [streambuf.virt.put]**
> 
> `streamsize showmanycp();`
> 
> *Returns:* An estimate of the number of characters which can be written to the sequence, or `-1`. If it returns a positive value, then successive calls to `overflow()` will not return `traits::eof()` until at least that number of characters have been written to the stream. If `showmanycp()` returns `-1`, then calls to `overflow()`will fail.
> 
> *Default behavior:* Returns zero.
> 
> *Remarks:* Uses `traits::eof()`.
> 
> **27.7.3.7 Unformatted output functions [ostream.unformatted]**
> 
> `streamsize writesome(char_type* s, streamsize n);`
> 
> *Effects:* Behaves as an unformatted output function (as described in 27.7.3.7, paragraph 1). After constructing a sentry object, if `!good()` calls`setstate(failbit)` which may throw an exception, and return. Otherwise writes `n` characters designated by `s`. If `rdbuf()->in_depart() == -1`, calls `setstate(badbit)` (which may throw `ios_base::failure` (27.5.5.4)), and writes no characters;
> 
> — If `rdbuf()->in_depart() == 0`, writes no characters.
> 
> — If `rdbuf()->in_depart() > 0`, writes `min(rdbuf()->in_depart(), n))` characters.
> 
> *Returns:* The number of characters written.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:40:06.933

我猜你误解了`in_avail()`and的含义`readsome()`：所有这些都说流已经读取了一个数据块并且缓冲区中仍然有字符。是的，理论上它可以做一些不同的事情，但特别是当从网络读取时，您不知道有多少数据可用，直到您尝试读取它。

同样，没有办法保证能够摆脱任何特定数量的字符：这`out.writesome(buf, n)`意味着什么？如果您希望它意味着您将`n`字符转储到`out`的缓冲区中，您可以创建一个合适的流缓冲区并使用`write()`. `n`但是，不能保证字节是通过阻塞发送的（至少对于`1 < n`）。不过，我猜你想要后者。

# constants - 在方法级别检测字节码

> ID：12458190
> 
> 赞同：0
> 
> 时间：2012-09-17T11:23:47.277
> 
> 标签：constants, code-coverage, bytecode, bytecode-manipulation

```
if(iHandles[f].getInstruction() instanceof IFEQ  ) {
            getFieldInstruction = iHandles[f+1].getInstruction();
            System.out.println("found IF");
            InstructionList iprint = iFactory.createPrintln("The control is in IF");
            iList.setPositions();
            main.setMaxStack();
            main.setMaxLocals();
            main.removeLineNumbers();
            iList.insert(getFieldInstruction, iprint);
            main.setInstructionList(iList);

        } 
```

在上面的代码中，我在*if*语句中检测字节码。我正在使用**IFEQ**或**IF_ICMPNE**等常量来搜索字节码中的*if*语句。我想在每种方法中检测字节码。我可以使用哪些常量来执行此操作？或者怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:09:30.967

上面的代码适用于*if* ...**`getFieldInstruction = iHandles[0].getInstruction();`** 来检测方法。

# jsf - 如何获取行索引 在每一行？

> ID：12458191
> 
> 赞同：0
> 
> 时间：2012-09-17T11:23:49.500
> 
> 标签：jsf, jsf-2, icefaces, icefaces-3

在搜索中，我发现我们可以使用`rowStateVar`或`rowIndex`的属性来做一些事情`<ace:datatable>`，但是怎么做呢？

我尝试使用`<h:outputText value="#{myDataTableVar.rowIndex}">`，但它显示`myDataTableVar`没有属性的错误消息`rowIndex`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:05:34.167

对于独立于组件库的方式，只需使用[`UIData#getRowIndex()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIData.html#getRowIndex%28%29)每个组件库特定的数据表都从这个基础组件扩展。

在下面的示例中，`x:`可以是任何东西：标准 JSF `h:`、 ICEfaces`ice:`或`ace:`、 PrimeFaces `p:`、 RichFaces`rich:`等。

```
<x:dataTable binding="#{table}" ...>
    <x:column>#{table.rowIndex}</x:column>
</x:dataTable> 
```

注意：`binding="#{table}"`原样！您不需要将其绑定到某些托管 bean 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:45:04.980

首先，设置 varStatus：

```
<ice:dataTable varStatus="status"> 
```

然后，在该数据表中，使用：

```
#{status.index} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T11:00:43.083

我找到了解决方案`<ace:datatable id='tbl' rowIndexVar="row">`，然后就这样打印`<h:outputtext value="#{row}">`
非常简单

# sharepoint - Sharepoint：如何通过 Web 服务上传带有元数据的文件，包括分类字段

> ID：12458192
> 
> 赞同：2
> 
> 时间：2012-09-17T11:23:55.877
> 
> 标签：sharepoint, upload, lookup, taxonomy

作为 SharePoint 编码的新手，我被分配了创建原型代码以上传文件并设置该文件的字段值的任务，这些字段值将在打开带有文件的共享点页面时显示。

这必须从远程计算机而不是 Sharepoint 服务器本身完成，因此使用 .Net 对象进行 Sharepoint 是不可能的。

我很快发现了如何通过 Sharepoint Web Service Copy.asmx 上传文件：

```
void UploadTestFile() {
        var file = @"C:\Temp\TestFile.doc";
        string destinationUrl = "http://mysharepointserver/Documents/"
                                 + Path.GetFileName(file);
        string[] destinationUrls = { destinationUrl };

        var CopyWS = new Copy.Copy();
        CopyWS.UseDefaultCredentials = true;
        CopyWS.Url = "http://mysharepointserver/_vti_bin/copy.asmx";

        CopyResult[] result;
        byte[] data = File.ReadAllBytes(file);

        FieldInformation mf1 = new FieldInformation {
            DisplayName = "title",
            InternalName = "title",
            Type = FieldType.Text,
            Value = "Dummy text"
        };

        FieldInformation mf2 = new FieldInformation {
            DisplayName = "MyTermSet",
            InternalName = "MyTermSet",
            Type = FieldType.Note,
            Value = "Test; Unit;"
        };

        CopyWS.CopyIntoItems(
                "+", 
                destinationUrls, 
                new FieldInformation[] { mf1, mf2 }, 
                data,
                out result);
} 
```

此代码可以轻松地将任何文件上传到目标站点，但仅在“标题”字段中填充信息。我已经添加了 3 个术语的字段 MyTermSet - 测试、单元和页面 - 不会使用值“测试”更新；和“单位；”。
对 Sharepoint 非常陌生，而我没有掌握所有基本知识，谷歌搜索告诉我更新“文件”、“计算”或“查找”字段不适用于 CopyIntoItems 方法，并且 MyTermSet 作为分类字段是 - 如果我是正确的- 查找字段。

那么如何使用值“Test;”更新 MyTermSet 和“单位”；?

如果有人对此有示例代码，我真的更喜欢。我遵循了几个提示链接，但我并不聪明。我根本没有找到任何示例代码。

有没有人制作了一种包装所有内容的方法？或者从文件上传中获取destinationUrl 并更新术语集/分类字段的另一种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:48:48.090

将我迄今为止的发现拼凑起来，我现在可以做我想做的事了。但我真的希望能够动态获取分类字段 GUID，而不必自己显式设置它们：

```
void UploadTestFile(string FileName, string DocLib, Dictionary<string, string> Fields = null) {

    //Upload the file to the target Sharepoint doc lib 
    string destinationUrl = DocLib + Path.GetFileName(FileName);
    string[] destinationUrls = { destinationUrl };

    var CopyWS = new Copy.Copy();
    CopyWS.UseDefaultCredentials = true;
    CopyWS.Url = new Uri(new Uri(DocLib), "/_vti_bin/copy.asmx").ToString();

    CopyResult[] result;
    var data = File.ReadAllBytes(FileName);
    CopyWS.CopyIntoItems(
            "+",
            destinationUrls,
            new FieldInformation[0],
            data,
            out result);

    if (Fields == null) return; //Done uploading 

    //Get the ID and metadata information of the fields 
    var list = new ListsWS.Lists();
    list.UseDefaultCredentials = true;
    var localpath = new Uri(DocLib).LocalPath.TrimEnd('/');
    var site = localpath.Substring(0, localpath.LastIndexOf("/")); //Get the site of the URL
    list.Url = new Uri(new Uri(DocLib), site + "/_vti_bin/lists.asmx").ToString(); //Lists on the right site

    FieldInformation[] fiOut;
    byte[] filedata;

    var get = CopyWS.GetItem(destinationUrl, out fiOut, out filedata);
    if (data.Length != filedata.Length) throw new Exception("Failed on uploading the document.");

    //Dictionary on name and display name
    var fieldInfos = fiOut.ToDictionary(x => x.InternalName, x => x);
    var fieldInfosByName = new Dictionary<string, FieldInformation>();
    foreach (var item in fiOut) {
        if (!fieldInfosByName.ContainsKey(item.DisplayName)) {
            fieldInfosByName.Add(item.DisplayName, item);
        }
    }

    //Update the document with fielddata - this one can be extended for more than Text and Note fields.  
    if (!fieldInfos.ContainsKey("ID")) throw new Exception("Could not get the ID of the upload.");

    var ID = fieldInfos["ID"].Value; //The ID of the document we just uploaded 

    XDocument doc = new XDocument(); //Creating XML with updates we need 
    doc.Add(XElement.Parse("<Batch OnError='Continue' ListVersion='1' ViewName=''/>"));
    doc.Element("Batch").Add(XElement.Parse("<Method ID='1' Cmd='Update'/>"));
    var methNode = doc.Element("Batch").Element("Method");

    //Add ID 
    var fNode = new XElement("Field");
    fNode.SetAttributeValue("Name", "ID");
    fNode.Value = ID;
    methNode.Add(fNode);

    //Loop each field and add each Field 
    foreach (var field in Fields) {

        //Get the field object from name or display name
        FieldInformation fi = null;
        if (fieldInfos.ContainsKey(field.Key)) {
            fi = fieldInfos[field.Key];
        }
        else if (fieldInfosByName.ContainsKey(field.Key)) {
            fi = fieldInfosByName[field.Key];
        }

        if (fi != null) {

            //Fix for taxonomy fields - find the correct field to update
            if (fi.Type == FieldType.Invalid && fieldInfos.ContainsKey(field.Key + "TaxHTField0")) {
                fi = fieldInfos[field.Key + "TaxHTField0"];
            }
            else if (fi.Type == FieldType.Invalid && fieldInfosByName.ContainsKey(field.Key + "_0")) {
                fi = fieldInfosByName[field.Key + "_0"];
            }

            fNode = new XElement("Field");
            fNode.SetAttributeValue("Name", fi.InternalName);
            switch (fi.Type) {
                case FieldType.Lookup:
                    fNode.Value = "-1;#" + field.Value;
                    break;
                case FieldType.Choice:
                case FieldType.Text:
                    fNode.Value = field.Value;
                    break;
                case FieldType.Note: //TermSet's  
                    var termsetval = "";

                    var terms = field.Value.Split(';');
                    foreach (var term in terms) {
                        termsetval += "-1;#" + term + ";";
                    }
                    fNode.Value = termsetval.TrimEnd(';');
                    break;
                default:
                    //..Unhandled type. Implement if needed.
                    break;
            }
            methNode.Add(fNode); //Adds the field to the XML 
        }
        else {
            //Field does not exist. No use in uploading. 
        }
    }

    //Gets the listname (not sure if it is the full path or just the folder name) 
    var listname = new Uri(DocLib).LocalPath;
    var listcol = list.GetListCollection(); //Get the lists of the site

    listname = (from XmlNode x 
                in listcol.ChildNodes 
                where x.Attributes["DefaultViewUrl"].InnerText.StartsWith(listname, StringComparison.InvariantCultureIgnoreCase) 
                select x.Attributes["ID"].InnerText).DefaultIfEmpty(listname).First();

    //Convert the XML to XmlNode and upload the data 
    var xmldoc = new XmlDocument();
    xmldoc.LoadXml(doc.ToString());
    list.UpdateListItems(listname, xmldoc.DocumentElement);
} 
```

然后我这样称呼它：

```
var fields = new Dictionary<string, string>();
fields.Add("Test", "Dummy Text");
fields.Add("MrTermSet", "Page|a4ba29c1-3ed5-47e9-b43f-36bc59c0ea5c;Unit|4237dfbe-22a2-4d90-bd08-09f4a8dd0ada");
UploadTestFile(@"C:\Temp\TestFile2.doc", @"http://mysharepointserver/Documents/", fields); 
```

然而，我更愿意这样称呼它：

```
var fields = new Dictionary<string, string>();
fields.Add("Test", "Dummy Text");
fields.Add("MrTermSet", "Page;Unit");
UploadTestFile(@"C:\Temp\TestFile2.doc", @"http://mysharepointserver/Documents/", fields); 
```

# iphone - CATransform3D not working properly

> ID：12458196
> 
> 赞同：2
> 
> 时间：2012-09-17T11:24:12.767
> 
> 标签：iphone, ios, catransform3d

CATransform3D not working properly, I am using the below code. My problem is If I change the transform Its working fine. Once I release my finger and then make more transform the image goes to the Initial image. How to set the last transform? I am using PanGesture for the transform. Please give some Idea. Thanks in advance.

```
if ([recognizer respondsToSelector:@selector(translationInView:)]) {
    CGPoint translation = [(UIPanGestureRecognizer *)recognizer translationInView:recognizer.view.superview];
    CALayer *layer = self.layer;
    CATransform3D rotationAndPerspectiveTransform = CATransform3DIdentity;
    rotationAndPerspectiveTransform.m34 = 1.0 / -500;
    rotationAndPerspectiveTransform = CATransform3DRotate(rotationAndPerspectiveTransform, translation.x * M_PI / 180.0f, 0.0f, 1.0f, 0.0f);
    layer.transform = rotationAndPerspectiveTransform;
    rotationAndPerspectiveTransform.m34 = 1.0 / -500;
    rotationAndPerspectiveTransform = CATransform3DRotate(rotationAndPerspectiveTransform, -translation.y * M_PI / 180.0f, 1.0f, 0.0f, 0.0f);
    layer.transform = rotationAndPerspectiveTransform;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:30:34.243

`CATransform3DIdentity`意味着每次您的视图收到触摸时都会重置转换。改为使用`CATransform3D rotationAndPerspectiveTransform = layer.transform;`。

# python - merging selenium rc and webdriver

> ID：12458198
> 
> 赞同：0
> 
> 时间：2012-09-17T11:24:17.283
> 
> 标签：python, webdriver, selenium-rc, selenium-webdriver, browser-automation

I have made most of my automation code using Selenium RC with Python. But, I feel that with the evolution in my product (what I'm testing through selenium RC), my automation needs are changed. I tried Wedriver with python and it works a treat with my product. But, as many features of my new product versions are inherited from the previous versions, I feel that I can make use of my existing Selenium RC code. But, for new features, I want to use Webdriver.

Moreover, there are also some things w.r.t the selenium profile that I 'm maintaining. Examples:

1.  For ssl certificates, using selenium RC, I have 2 methods: Selenium profile (where I have saved the acceptance of ssl certificate) and `'trustallsslcertificates'` parameter while starting selenium rc. Using `trustallsslcertificates` slows down the automation speed like hell.
    But, using webdriver, I dont need all such ssl certificates.
2.  Using Selenium RC, whenever I need to download a file using my web page, I have used the save option as default and saved it in the same selenium profile. But, using webdriver, I have other options to download a file, rather than maintaining the selenium profile.

I also checked in the existing question: [Selenium Web driver and selenium RC](https://stackoverflow.com/questions/4342088/selenium-web-driver-and-selenium-rc), but, the answer seems to old, many things must have updated by then.

Crux of my question is: Can I integrate my existing python code, that I use using selenium RC (Python bindings - selenium.py ), with Webdriver using python ?

PS: Currently I am using selenium 2.3.0.jar file

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-24T09:18:46.980

```
import com.thoughtworks.selenium.DefaultSelenium;

public class Facebook {

public static void main (String [] args)
{
    DefaultSelenium ds= new DefaultSelenium("localhost",1223,"*firefox","https://");
    ds.start();
    ds.windowMaximize();
    ds.open("www.facebook.com");

}
} 
```

# jquery - index 似乎在 eq 期间发生了变化

> ID：12458202
> 
> 赞同：1
> 
> 时间：2012-09-17T11:24:42.503
> 
> 标签：jquery

我正在尝试添加一个类并在单击链接时删除该链接的单击事件，然后在单击另一个链接时撤消此事件，我在这里有一个示例[http://jsfiddle.net/bdjohnson/zXyb9/4/](http://jsfiddle.net/bdjohnson/zXyb9/4/)

但是点击几下它就死了，我将索引输出到控制台并且它一直在变化，这是错误的方法吗？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:11:58.393

I'm not sure why you need the `active` class and why you need to remove the click event, but here is my solution.

```
$(document).ready(function() {
    $("a.pic_link").on("click", function() {
        var i = $(this).index(); //get the index of the clicked link (I assume that the clicked link length is always the same as the #pic div length)
        var d = $("#pic div"); //get the divs for the #pic element
        d.removeClass("active"); //remove the active class on all of the child divs
        if (d.filter(":visible").length > 0 && d.filter(":visible").index() != i) { //if there is a #pic div visible and it is different from the link that is clicked, then hide it and then show the proper one and add the class
            d.filter(":visible").slideUp(300, function() {
                d.eq(i).addClass("active").slideDown(300, function() {});
            });
        }
        else {
            d.eq(i).addClass("active").slideDown(300, function() {});//just add the class and show the proper element
        }
    });
});​ 
```

[jsFiddle](http://jsfiddle.net/zXyb9/25/)

In addition, I would suggest that you use CSS to initially hide the `#pic div`'s, otherwise there may be a flicker of the `#pic div`'s showing up. It is in the jsFiddle.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:45:53.273

首先，您不需要任何`each`循环来附加点击处理程序。只需`click`在 jQuery 对象上使用即可将事件处理程序附加到集合的任何元素。

然后你可以更简单地编写代码：

```
$(function() {
    var previews = $("#pic div"); // Caching selector
    previews.hide();

    $("a.pic_link").click(function(event) {
        var $this = $(this);
        if (!$this.hasClass("active")) {
            previews.slideUp(300).delay(300).eq($this.index()).slideDown(300);
            $this.addClass("active");
            $this.siblings().removeClass("active");
        }
    });
});​ 
```

请注意，您应该使用`complete`callback 而不是 using `delay`，如下所示：

```
previews.slideUp(300, function() {
   previews.eq($this.index()).slideDown(300);
}); 
```

# c# - Scalar Variable @AssetNumber

> ID：12458204
> 
> 赞同：0
> 
> 时间：2012-09-17T11:24:52.613
> 
> 标签：c#, sql, parameters

When i step through the code the parameter is being added, its just when the sql command is executed, it throws this error up

```
 public static DataTable GetPostings2(string AssetNumberV, string PeriodFromV, string PeriodToV)
    {
        DataTable dtGetPostings2;
        try
        {
            dtGetPostings2 = new DataTable("GetPostings");

            SqlParameter AssetNumber = new SqlParameter("@AssetNumber", SqlDbType.VarChar, 6);
            AssetNumber.Value = AssetNumberV;

            SqlParameter PeriodFrom = new SqlParameter("@PeriodFrom", SqlDbType.VarChar, 6);
            PeriodFrom.Value = PeriodFromV; 

            SqlParameter PeriodTo = new SqlParameter("@PeriodTo", SqlDbType.VarChar, 6);
            PeriodTo.Value = PeriodToV; 

            SqlCommand scGetPostings2 = new SqlCommand("SELECT * FROM [POSTING] WHERE [ASSET_NO] = @AssetNumber And PERIOD >= @PeriodFrom AND PERIOD <= @PeriodTo ORDER by PERIOD, JOUR_REF, JOUR_LINE", DataAccess.AssetConnection);

            SqlDataAdapter sdaGetPostings2 = new SqlDataAdapter();
            sdaGetPostings2.SelectCommand = scGetPostings2;
            sdaGetPostings2.Fill(dtGetPostings2);

            return dtGetPostings2;

        }
        catch (Exception ex)
        {
            MessageBox.Show("Error Retriving Posting Details: Processed with this error:" + ex.Message);
            return null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:28:38.777

列出的代码不会将参数添加到[SqlCommand.Parameters 集合](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)中。例如：

```
SqlCommand scGetPostings2 = new SqlCommand("SELECT * FROM [POSTING] WHERE [ASSET_NO] = @AssetNumber And PERIOD >= @PeriodFrom AND PERIOD <= @PeriodTo ORDER by PERIOD, JOUR_REF, JOUR_LINE", DataAccess.AssetConnection);
scGetPostings2.Parameters.Add(AssetNumber);
scGetPostings2.Parameters.Add(PeriodFrom );
scGetPostings2.Parameters.Add(PeriodTo );

// Code continues as above
SqlDataAdapter sdaGetPostings2 = new SqlDataAdapter();
// And so on 
```

# javascript - how to access child element in jquery?

> ID：12458207
> 
> 赞同：0
> 
> 时间：2012-09-17T11:24:57.937
> 
> 标签：javascript, jquery

I want to access all the subelelements of a given element . For ex :

```
<div id="main">
  <div id="1">
   <span></span>
   <span></span>
  </div>
  <span></span>
  <div></div>      
 </div> 
```

Like in abover structure `#main` contains 5 elements ( 2 div and 3 span ). How can i access it all in a single query ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:26:48.973

您可以使用通用选择器。

```
$('#main *') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T11:27:04.157

您只需要一个通配符选择器，如下所示：

```
$("#main *") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T11:27:26.087

用这个：

```
$('#main').find('*'); 
```

# c# - 正则表达式前瞻 - 单独的部分

> ID：12458210
> 
> 赞同：0
> 
> 时间：2012-09-17T11:25:16.517
> 
> 标签：c#, regex, regex-lookarounds

假设我有一个包含以下（两个）部分的文本：

```
Section1
,111,
,222,
,333,
Section2
,444,
,555,
,666, 
```

我只想匹配第 1 节中的项目，例如 111、222 和 333。我尝试过类似的方法：`,\d+,.*(?=Section2)`但是，这当然匹配第 2 节之前的所有内容，我不知道如何告诉它匹配不同的组。请注意，Section1 可以包含比上例中更多的项目。

编辑：我现在得到我想要的 ,\d+,(?=.*Section2)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:30:03.877

使用此正则表达式`(?is)(?<=Section\d+)(.+?)(?=((Section)|($)))`将值分隔为部分

使用此正则表达式`\d+`解析部分

# node.js - Socket.io not working on some machines

> ID：12458212
> 
> 赞同：1
> 
> 时间：2012-09-17T11:25:36.210
> 
> 标签：node.js, websocket, socket.io, long-polling

I'm starting out with Socket.io, I made a quick example app and most things seemed to be working. However, when I tested it on a different PC in the office, it doesn't work. I've not been able to identify the problem or a common element. It works on an iMac in chrome and firefox, and a Windows machine running Firefox 15.0.1.

However on 2 other machines it does not work, they run Firefox 15.0.1 and the latest chrome. They can connect and receive broadcasts, but they won't send any broadcasts.

The example app provided with socket.io faces the same issues, so I know that my code isn't the issue.

The server is a rackspace virtual machine. The computers all share the same IP address, would this be the problem?

Thanks.

```
Connection I5m-GX0YxKk-fsqkaDYr accepted.
debug - emitting heartbeat for client I5m-GX0YxKk-fsqkaDYr
debug - websocket writing 2::
debug - set heartbeat timeout for client I5m-GX0YxKk-fsqkaDYr
debug - got heartbeat packet
debug - cleared heartbeat timeout for client I5m-GX0YxKk-fsqkaDYr
debug - set heartbeat interval for client I5m-GX0YxKk-fsqkaDYr
debug - client authorized
info  - handshake authorized 2_OfnBCUPoO1TuWUaDYs
debug - setting request GET /socket.io/1/websocket/2_OfnBCUPoO1TuWUaDYs
debug - set heartbeat interval for client 2_OfnBCUPoO1TuWUaDYs
debug - client authorized for 
debug - websocket writing 1::
Connection 2_OfnBCUPoO1TuWUaDYs accepted.
debug - setting request GET /socket.io/1/xhr-polling/2_OfnBCUPoO1TuWUaDYs?t=1347888419067
debug - setting poll timeout
debug - discarding transport
debug - cleared heartbeat interval for client 2_OfnBCUPoO1TuWUaDYs
debug - emitting heartbeat for client I5m-GX0YxKk-fsqkaDYr
debug - websocket writing 2::
debug - set heartbeat timeout for client I5m-GX0YxKk-fsqkaDYr
debug - got heartbeat packet
debug - cleared heartbeat timeout for client I5m-GX0YxKk-fsqkaDYr
debug - set heartbeat interval for client I5m-GX0YxKk-fsqkaDYr
debug - setting request GET /socket.io/1/jsonp-polling/2_OfnBCUPoO1TuWUaDYs?   t=1347888429074&i=0
debug - setting poll timeout
debug - discarding transport
debug - clearing poll timeout
debug - clearing poll timeout
debug - jsonppolling writing io.j[0]("8::");
debug - set close timeout for client 2_OfnBCUPoO1TuWUaDYs
debug - jsonppolling closed due to exceeded duration
debug - emitting heartbeat for client I5m-GX0YxKk-fsqkaDYr
debug - websocket writing 2::
debug - set heartbeat timeout for client I5m-GX0YxKk-fsqkaDYr
debug - got heartbeat packet
debug - cleared heartbeat timeout for client I5m-GX0YxKk-fsqkaDYr
debug - set heartbeat interval for client I5m-GX0YxKk-fsqkaDYr
debug - setting request GET /socket.io/1/jsonp-polling/2_OfnBCUPoO1TuWUaDYs?t=1347888449506&i=0
debug - setting poll timeout
debug - discarding transport
debug - cleared close timeout for client 2_OfnBCUPoO1TuWUaDYs
^Croot@nodejs:~# node socket
info  - socket.io started
debug - client authorized
info  - handshake authorized R840LL5ZZes1YFB_aZS8
debug - discarding transport
debug - jsonppolling received data packet �17�3:::Hello Server!�17�3:::Hello Server!
debug - client authorized
info  - handshake authorized ycWCnVfgTTLAdi0maZS9
debug - client authorized
info  - handshake authorized av8ttHujRRMUNdZWaZS-
debug - setting request GET /socket.io/1/websocket/av8ttHujRRMUNdZWaZS-
debug - set heartbeat interval for client av8ttHujRRMUNdZWaZS-
debug - client authorized for 
debug - websocket writing 1::
Connection av8ttHujRRMUNdZWaZS- accepted.
^Croot@nodejs:~# node socket
info  - socket.io started
debug - client authorized
info  - handshake authorized tod2RUk4cC6njt7_ab1d
debug - setting request GET /socket.io/1/websocket/tod2RUk4cC6njt7_ab1d
debug - set heartbeat interval for client tod2RUk4cC6njt7_ab1d
debug - client authorized for 
debug - websocket writing 1::
Connection tod2RUk4cC6njt7_ab1d accepted.
debug - client authorized
info  - handshake authorized Bm2b5koW4OhwMN0Uab1e
debug - setting request GET /socket.io/1/websocket/Bm2b5koW4OhwMN0Uab1e
debug - set heartbeat interval for client Bm2b5koW4OhwMN0Uab1e
debug - client authorized for 
debug - websocket writing 1::
Connection Bm2b5koW4OhwMN0Uab1e accepted.
debug - setting request GET /socket.io/1/xhr-polling/Bm2b5koW4OhwMN0Uab1e?t=1347888478540
debug - setting poll timeout
debug - discarding transport
debug - cleared heartbeat interval for client Bm2b5koW4OhwMN0Uab1e
debug - emitting heartbeat for client tod2RUk4cC6njt7_ab1d
debug - websocket writing 2::
debug - set heartbeat timeout for client tod2RUk4cC6njt7_ab1d
debug - got heartbeat packet
debug - cleared heartbeat timeout for client tod2RUk4cC6njt7_ab1d
debug - set heartbeat interval for client tod2RUk4cC6njt7_ab1d
debug - setting request GET /socket.io/1/jsonp-polling/Bm2b5koW4OhwMN0Uab1e?t=1347888488546&i=0
debug - setting poll timeout
debug - discarding transport
debug - clearing poll timeout 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:40:45.133

我部分解决了这个问题。一个防病毒程序阻止了一些机器上的 Web 套接字连接。我花了一段时间才发现这个问题，因为[http://websocketstest.com/](http://websocketstest.com/)显示所有端口都是打开的，并且软件显示没有防火墙处于活动状态。但是，当退出防病毒程序时，一切又开始工作了。

不知道为什么[http://websocketstest.com/](http://websocketstest.com/)显示所有端口都是打开的。暂时切换到 843 端口。

谢谢

# javascript - 通过检查条件从xml中获取属性值

> ID：12458215
> 
> 赞同：1
> 
> 时间：2012-09-17T11:25:47.433
> 
> 标签：javascript

以下是我必须从中获取属性值的 xml：

```
 <R a="1" b="2">
<I attribute1="" attribute2="some text"/>
<I attribute1="" attribute2="some text"/>
<I attribute1="0" attribute2="some text"/>
<I attribute1="0" attribute2="some text"/>
</R> 
```

在这里我要检查是否`attribute1`不为空，然后我必须`attribute2`从`I`标签中获取值。如何做到这一点？？？请帮忙...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T11:44:05.957

**更新：**

这是一个完整的 X 浏览器工作脚本，应该可以解决问题。同样，用`getAttribute('attribute1')`任一参数替换 DOM 或返回 DOM 并处理其余部分。这段代码可能看起来有点复杂（它使用闭包尽可能轻量级）但它应该非常坚固且使用安全......只要你不声明另一个调用的函数`parseXML`并且你不`parseXML`事先调用它到它被宣布。

```
var parseXML = (function(w,undefined)
{
    'use strict';
    var parser,i,ie,parsed;
    ie = false;
    switch (true)
    {
        case w.DOMParser !== undefined:
            parser = new w.DOMParser();
        break;
        case new w.ActiveXObject("Microsoft.XMLDOM") !== undefined:
            parser = new w.ActiveXObject("Microsoft.XMLDOM");
            parser.async = false;
            ie = true;
        break;
        default :
            throw new Error('No parser found');
    }
    return function(xmlString,getTags)
    {
        var tags,keep = [];
        if (ie === true)
        {
            parser.loadXML(xmlString);
            parsed = parser;
        }
        else
        {
            parsed = parser.parseFromString(xmlString,'text/xml');
        }
        tags = parsed.getElementsByTagName(getTags);
        for(i=0;i<tags.length;i++)
        {
            if (tags[i].getAttribute('attribute1') && tags[i].getAttribute('attribute2'))
            {
                keep.push(tags[i].getAttribute('attribute2'));
            }
        }
        //optional:
        keep.push(parsed);//last element of array is the full DOM
        return keep;
    }
})(this);
var parseResult = parseXML('<r><i attribute1="" attribute2="Ignore This"/><i attribute1="foo" attribute2="got this"/></r>','i');
alert(parseResult[0] || 'nothing');//alerts 'got this' in IE and others 
```

* * *

您可以[解析 XML](https://stackoverflow.com/questions/7949752/cross-browser-javascript-xml-parsing)：

```
var parser = new DOMParser();
var parsed = parser.parseFromString('<r a="1" b="2"><i v="" x="some text"/><i v="0" x="some important text"/></r>','text/xml');
var iTag = parsed.getElementsByTagName('i');
for (var i=0;i<iTag.length;i++)
{
    if (iTag[i].getAttribute('v'))
    {
        console.log(iTag[i].getAttribute('x'));//do whatever
    }
} 
```

此代码段将记录`some important text`，而不是`some text`。这里的所有都是它的。如果您需要存储`x`值或返回它们，只需声明另一个变量：

```
var keep = [];//an array
//change console.log line by:
keep.push(iTag[i].getAttribute('x')); 
```

这是假设`x`将设置一个属性，如果情况并非总是如此，那么额外的检查可以很容易地解决这个问题。完整的代码将如下所示：

```
function parseXML(xml)
{
    'use strict';
    var parser,keep,parsed,i,iTag;
    parser = new DOMParser();
    keep = [];
    parsed = parser.parseFromString(xml,'text/xml');//xml is the string
    iTag = parsed.getElementsByTagName('i');
    for (i=0;i<iTag.length;i++)
    {
        if (iTag[i].getAttribute('v') && iTag[i].getAttribute('x'))
        {
            keep.push(iTag[i].getAttribute('x'));
        }
    }
    return keep;//return array
} 
```

# jquery - Jplayer 2.2.0：无法使用 javascript 获取当前歌曲信息

> ID：12458216
> 
> 赞同：2
> 
> 时间：2012-09-17T11:25:50.303
> 
> 标签：jquery, jplayer, playlist

我不是 js 编码员，所以这可能只是因为我的无知而无法正常工作：正如在 jplayer 用户组中的一篇最近的帖子中发现的那样，您可以通过这种方式获取当前歌曲信息以收听 jplayer 播放事件：

```
 $("#jquery_jplayer_1").bind($.jPlayer.event.play, function(event) { 
    updateCurrentTrackInfo(myPlaylist.playlist[myPlaylist.current]);   // send out the media info object for the current track in the playlist
});

// custom function to update the external current track div
function updateCurrentTrackInfo(obj) {
            document.getElementById('currentTrackInfo').innerHTML = '<em>Now Playing&#8230;</em><span>'+obj.title+'</span> by <span>'+obj.artist+'</span>';
} 
```

`<script type="text/javascript"></script>`我在 jplayer javascript 之后插入了这段代码。然后在页面的正文中我做了一个`<div id="currentTrackInfo"></div>`标签。

事实是这段代码对我不起作用，div 保持空白。也许我的错误是我必须以某种方式调用该函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T11:14:07.387

在这里检查这个

```
jQuery("#jquery_jplayer_1").bind(jQuery.jPlayer.event.play, 函数(事件)
    {   

        var current = myPlaylist.current,
        播放列表 = myPlaylist.playlist;
        jQuery.each（播放列表，函数（索引，obj）{
            如果（索引 == 当前）{
                    警报（obj.title）；

            } // 如果条件结束
        });
    });

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T08:10:57.360

请检查一下

```
function add_song(){
    var current = myPlaylist.current,
        playlist = myPlaylist.playlist;
    jQuery.each(playlist, function (index, obj) {
       if (index == current) {
          alert(obj.title);
        } // if condition end
    });
 } 
```

# opencv - OpenCV：来自网络摄像头的阅读帧挂起

> ID：12458217
> 
> 赞同：2
> 
> 时间：2012-09-17T11:25:55.220
> 
> 标签：opencv

我最近遇到了 OpenCV 的问题，我无法通过谷歌搜索解决方案。现在我解决了它并想分享解决方案。
所以我使用 OpenCV 在 Linux 中使用网络摄像头。我构建并安装了 OpenCV 2.4.2 并运行我的程序。它打开了相机（上面的 LED 灯亮了），但它从来没有读取任何帧。它在线上冻结

```
capture.grab(); 
```

它永远不会从该方法返回。也适用于在`>>`内部使用 grab() 的运算符。
仅当我将所需的框架宽度/高度设置为某些非默认值时，才会发生这种情况。
我发现一些人有类似的问题，但他们的解决方案对我没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:25:55.220

解决方案是安装`libjpeg-dev`和重建（并重新安装）OpenCV。

```
sudo apt-get install libjpeg-dev 
```

# jsf-2 - 附加到复合组件的 Ajax 更新模型但不触发侦听器

> ID：12458221
> 
> 赞同：0
> 
> 时间：2012-09-17T11:26:27.177
> 
> 标签：jsf-2, composite-component

我有一个自定义组件`location`。我希望，当更改完成时，模型会更新，因此另一个组件（自动完成）将仅显示与该`location`值相关的结果。此外，该组件被重新渲染以重置它。

我有一个包含以下代码的页面（简化）：

```
<h:form id="ticketForm">
  ...
  <loc:location id="locationId"                         <-- CUSTOM COMPONENT
    hiddenFieldValue="#{ticketCtrl.ticket.location}"
    visibleFieldValue="#{ticketCtrl.ticket.locationDescription}"
    rendered="#{ticketCtrl.ticketModifiable}">

    <f:ajax event="changeLocation" render=":ticketForm:gfhId"       <-- AJAX CALL.
      execute=":ticketForm:locationId" listener="#{ticketCtrl.locationListener}"/>
  </loc:location>
  ...
</h:form> 
```

当组件中的值发生更改时，模型会`:ticketForm:gfhId`根据需要更新并渲染，但不会执行侦听器（执行额外的重置）。

将 ajax 附加到更简单的控件会导致执行侦听器；vg

```
<h:inputText id="contactId"
  value="#{ticketCtrl.ticket.contactPerson}"
  disabled="#{not ticketCtrl.ticketModifiable}">
  <f:ajax event="change" render=":ticketForm:gfhId"
    execute=":ticketForm:locationId" listener="#{ticketCtrl.locationListener}"/>
</h:inputText> 
```

完美运行。

我不知道它是否可能与`changeLocation`事件的触发方式有关；在我的组件中，我将其定义为

```
<composite:interface>
   ...
   <composite:clientBehavior name="changeLocation" event="change" targets="visibleId"/>
</composite:interface> 
```

`visibleId`作为只读文本；当它被 javascript 更改时，我`change`用 JS 在它上面触发事件。

```
function launchEvent(fieldName) {
  if ("fireEvent" in fieldName) {
    fieldName.fireEvent("onchange");
  } else {
    var evt = document.createEvent("HTMLEvents");
    evt.initEvent("change", false, true);
    fieldName.dispatchEvent(evt);
  }
} 
```

我在其他问题中找到的信息是关于使 ajax 成为复合组件的内部部分，这里我希望 ajax 分离，因为我可能在组件的其他用途中不需要它。

我正在使用 JBoss 6.1 和 Mojarra 2.1.9 和 Richfaces 4。

提前致谢。

更新：

即使在找到 jarek.jpa 的答案正确之后，如果有人想检查代码，它也在这里：

复合组件 [http://pastebin.com/9wqMVfR5](http://pastebin.com/9wqMVfR5)

主窗体 [http://pastebin.com/i39ys2D9](http://pastebin.com/i39ys2D9)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:49:58.147

这可能与设置为 true 的“readonly”属性有关。尽管您设法手动（JS）发送更改事件，但由于只读状态，侦听器的服务器端处理可能会被丢弃。参见例如[jsf (richfaces) 只读输入文本验证](https://stackoverflow.com/questions/9614706/jsf-richfaces-readonly-input-text-validation)。

# cakephp - CakePHP - 安全 - 图像和链接助手

> ID：12458223
> 
> 赞同：0
> 
> 时间：2012-09-17T11:26:33.473
> 
> 标签：cakephp

我刚刚阅读了这篇关于 CakePHP 安全性的非常有趣的文章：[Cakephp Security](https://stackoverflow.com/questions/3870427/cakephp-security)

它说每当使用助手时，CakePHP 基本上都会注意安全风险，除非我转身逃跑。我相信只有在我希望我的链接是图像时才关闭转义，因此将图像辅助线嵌套在链接辅助线中。例如：

```
echo $this->Html->link($this->Html->image('logo.png'), "/" , array('id'=>'logo', 'escape' => false)); 
```

这是不好的做法吗？这会让我变得脆弱吗？我应该以其他方式做吗？

另外，每当我在动态页面上输出数据库数据时，是否需要将其包含在 htmlspecialchars($myvariable) 中是否正确？如果我知道我的数据库没有“坏东西”并且我输入到数据库的所有表单都使用 FormHelper，我不明白为什么我需要这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:00:28.447

在显示的示例代码中，您拥有所有静态值，没有来自用户的内容，因此没有风险。

同样，对于来自数据库的内容，例如。所有内容均由站点管理员管理，用户的任何内容都不会保存到数据库中，因此可以安全地回显内容而无需转义。

# jquery - 如何在每个页面上启动 Javascript (jQuery Mobile)

> ID：12458224
> 
> 赞同：1
> 
> 时间：2012-09-17T11:26:37.323
> 
> 标签：jquery, jquery-mobile

我是这个地方的新手，但已经在谷歌和这里搜索过答案，但我没有找到一个对我有帮助的答案（尽管这个问题被问了很多次！）。

所以我的问题是，我一直在制作一个 jquery 移动页面，我想稍后将其用作应用程序。我使用 3 个不同的页面（index.html、page2.html、page3.html），每次在导航中单击这些页面时，我都想触发一些 javascript。

我发现了很多关于这个问题的帖子，但其中大多数都有点旧（~2011）而且我发现的解决方案不起作用。

这是我已经尝试过的：

```
 <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="js/js.js"></script>
<script src="js/moment.js"></script>
<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script> 
```

是我使用的每一页的头部。在 jquery mobile 的文档中，您必须在要执行的 jquery 和 jquery mobile 之间插入脚本（js.js 是我的自定义 js）。这个脚本只适用于第一页，但我需要它在每一页上运行，因为当某些事件发生时我会在每一页上交换文本。

之后，我尝试将我的代码放在 div data-role="page" 中，以便每次都会执行它，但这也不起作用。当我只是在其中放入一些 console.log() 时（在 $(document).bind("pageinit", function(){ 之间），帖子不会在每次 pagechange 时触发，但是当我返回时会以²方式触发到原始页面（5 次页面更改后，日志消息将在控制台中放置 60 次）。

```
function packungSpeichern() {

var formPackung = new Object;

formPackung.inhalt = document.getElementById("inhalt").value;
formPackung.date  = moment().format("DD-MM-YYYY");

localStorage.setItem( "formPackung", JSON.stringify(formPackung) ); 
```

}

这是我的自定义 js 文件中的一个示例。我只能在我启动的第一页上使用这个脚本，但不能在所有页面上使用：/

我希望你明白我想要什么，我的英语根本不是最好的:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:01:26.327

在JQM**第一页**的HEAD 中：

```
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script> 
```

在**每个 JQM 页面的**BODY（页面 DIV）中（底部的任何位置，如页脚等）：

```
<div data-role="page"> 
    <div data-role="content">
        <script src="js/js.js"></script>
        <script src="js/moment.js"></script>
     </div>
</div> 
```

或者，如果你把它放到你的 HEAD 中，你会告诉 jQuery 在**每次页面更改时执行一次**这个脚本：

```
$(document).bind("pageshow", function( event, ui ){
    console.log('A page has changed!');
} 
```

# javascript - D3 中的 Javascript 模块模式

> ID：12458227
> 
> 赞同：2
> 
> 时间：2012-09-17T11:26:50.713
> 
> 标签：javascript, design-patterns, layout, d3.js, hierarchy

最近我一直在阅读有关 javascript 模式的内容，以及如何使用模块模式来避免全局变量。当我查看 d3.js[层次结构布局](https://github.com/mbostock/d3/blob/master/src/layout/hierarchy.js)源代码时，我不确定以下是否是故意的。

`d3.layout.hierarchy`正在使用模块模式，但到最后，我看到了它之外的许多方法，我猜这些方法仅适用于布局及其派生对象（分区、树..）。

```
d3_layout_hierarchyRebind
d3_layout_hierarchyChildren
d3_layout_hierarchyValue
.. 
```

这是故意的，还是应该在模块中捕获？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T17:07:29.723

当通过[makefile](https://github.com/mbostock/d3/blob/master/Makefile)构建库时，这些方法都包含在包装代码的匿名函数中（参见[start.js](https://github.com/mbostock/d3/blob/master/src/start.js)和[end.js](https://github.com/mbostock/d3/blob/master/src/end.js)）。所以它们在最终的内置库中都不是全局的。这是一种设计选择，允许将库轻松拆分为多个文件，而无需为每个文件使用匿名函数包装器（就像[require.js](http://requirejs.org/)样式的模块一样）。

# python - ubuntu（virtualbox）上的emacs flymake错误

> ID：12458228
> 
> 赞同：0
> 
> 时间：2012-09-17T11:27:01.490
> 
> 标签：python, ubuntu, emacs, virtualbox, flymake

我在 Windows 7 上的 ubuntu 12.04(virtualbox) 上使用 emacs 23。我收到这样的错误：

> Flymake：无法使用 args (views_flymake.py) 启动语法检查过程“pyflakes”：搜索程序：没有这样的文件或目录，pyflakes。Flymake 将关闭

我找不到解决方案。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:55:55.323

安装`pyflakes`. 错误说它丢失了。

# jquery - 文本框上的 DatePicker

> ID：12458230
> 
> 赞同：0
> 
> 时间：2012-09-17T11:27:05.273
> 
> 标签：jquery, asp.net

我正在尝试`datepicker`使用 Jquery 实现控件，

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <link href="jquery-ui.css" rel="stylesheet" type="text/css" />
    <script src="js/jquery-ui.min.js" type="text/javascript"></script>
    <script src="js/jquery.min.js" type="text/javascript"></script>
    <script src="js/jqueryrelese.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#<%= TextBox1.ClientID %>").datepicker();

        });

    </script>

</head>
<body>
    <form id="form1" runat="server">
    <div>

        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    </div>
    </form>
</body>
</html> 
```

但它不工作，因为`datepicker`不弹出。我缺少什么代码或此代码中是否有任何错误。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T11:33:51.317

## 将 jquery 脚本引用放在 jquery-ui 之前。

顺便说一句，由于这是 asp.net 代码，请使用此 id 选择器：`$("#<%= Textbox1.ClientID %>").datepicker();`对于服务器控件，因为客户端 id 可能会被 asp.net 基础设施更改

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T12:07:57.007

尝试使用

```
<script type="text/javascript">
    $(document).ready(function () {
        $(function () {

            $("#"+'<%=TextBox1.ClientID%>').datepicker();
        });
    });
</script> 
```

并确保您已在页面上包含所有必需的 .js 文件。例如：如果您使用[此](http://jqueryui.com/demos/datepicker/)Jquery Datepicker，则必须包括：

```
<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="js/ui/jquery.ui.core.js"></script>  
<script type="text/javascript" src="js/ui/jquery.ui.datepicker.js"></script> 
```

**注意：**
您将[在此处](http://jqueryui.com/download)获得这些 .js 文件以及演示。

# text - 如何将字符串与文本文件的行连接起来

> ID：12458234
> 
> 赞同：0
> 
> 时间：2012-09-17T11:27:14.813
> 
> 标签：text, cmd, concatenation

我一直在尝试将字符串与文本文件的行连接起来，但我的代码出了点问题，我相信我在 For 循环中使用的 agruments。如果有人可以帮助我，我将不胜感激。

我的代码是：

```
@echo off
set "input=C:\Users\123\Desktop\List.txt"
for /f "usebackq tokens=*" %%F in ("%input%") do (
        set "str1=C:\some directory\"
    set "str2=%%~F"
    set "str3=.pdf"
    set "str4=%str1%%str2%%str3%"
    echo.%str4%
) 
```

文本文件类似于：

```
121122
122233
123344
124455 
```

但我只得到一个错误的答案，我必须运行它 3 次才能获得真正的结果，这是错误的，前两个是空格，第三个返回文本文件中的最后一行，但重复 n 次, n 是文本文件的行数。

结果：

```
C:\Users\123\Desktop>concatenate.bat

C:\Users\123\Desktop>concatenate.bat

C:\Users\123\Desktop>concatenate.bat
C:\some directory\124455.pdf
C:\some directory\124455.pdf
C:\some directory\124455.pdf
C:\some directory\124455.pdf
C:\some directory\124455.pdf

C:\Users\123\Desktop> 
```

所以，如果有人知道出了什么问题，请告诉我。

问候

-胜利者-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:54:15.980

您将需要*启用延迟扩展*功能。这是必需的，因为在`FOR`命令块中，您需要引用已修改的变量。

```
@echo off
setlocal enabledelayedexpansion
set "input=C:\Users\123\Desktop\List.txt"
for /f "usebackq tokens=*" %%F in ("%input%") do (
    set "str1=C:\some directory\"
    set "str2=%%~F"
    set "str3=.pdf"
    set "str4=!str1!!str2!!str3!!"
    echo. !str4!
) 
```

# cakephp - 如何从 CakePhp 向 Jquery 发送 ajax 响应？

> ID：12458235
> 
> 赞同：4
> 
> 时间：2012-09-17T11:27:18.760
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我在视图中有这个脚本：

```
<script type="text/javascript">
$(document).ready(function() {
    $("#addbrand").click(function() {
        $.ajax({
            url : '../brands/add',
            data : {
                name : "test",
                shortname : "tst"
            },
            dataType : 'json',
            success : function(html, textStatus) {
                alert('Success ' + textStatus + html);
            },
            error : function(xhr, textStatus, errorThrown) {
                alert('An error occurred! ' + errorThrown);
            }
        });
    });
});</script> 
```

在添加控制器中，我有以下几行：

```
... else if($this->request->is('ajax')){
        if ($this->Brand->save($this->request->query)) {
            // How to send feedback!?
        }else{
            // How to send feedback!?
        }
        $this->autoRender = false;
        exit();
    } 
```

当我单击 addbrand 时，Ajax 操作成功运行，并且我可以在数据库中看到添加的行，但我不知道如何向用户发送错误或成功消息。我已经阅读了几篇教程，但没有一篇是关于 cakephp2.0 的，而一切都在 2.x 中发生了变化。我也读过[JSON 和 XML 视图](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html)，但不幸的是我什么都不懂！！！我需要发送一个状态码。如果状态正常，那么我应该发送一个字符串数组（实际上是品牌名称），如果状态不正常，我应该发送一个字符串来解释操作未成功完成的原因。如果有人可以帮助我，我将不胜感激。谢谢

* * *

**更新：**

我更改了代码。我使用了 CakeResponse()，现在我的操作是这样的：

```
if($this->RequestHandler->isAjax()){
        if ($this->Brand->save($this->request->query)) {
            return new CakeResponse(array('body'=> json_encode(array('val'=>'test ok')),'status'=>200));
        }else{
            return new CakeResponse(array('body'=> json_encode(array('val'=>'test not ok')),'status'=>500));
        }
    } 
```

使用 CakeResponse 我可以很好地处理 Jquery 中可能出现的响应。

```
$("#addbrand").click(function() {
        $.ajax({
            url : '../brands/add',
            data : {
                name : "test",
                shortname : "tst"
            },
            dataType : 'json',
            success : function(data) {
              alert("The brand has been saved");
            },
            error : function(data) {
              alert("Eorror occured");
            },
            complete : function(data) {
                alert($.parseJSON(data.responseText).val);
            }
        });
    }); 
```

尽管在我看来现在一切正常，并且我可以通过 Ajax 在客户端和服务器之间以 JSON 格式发送多个变量，但我需要知道它是否是在 CakePHP 中发送 Ajax 响应的标准方式？有没有其他更简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T12:11:56.060

以下代码行完全`return new CakeResponse(array('body'=> json_encode(array('val'=>'test ok')),'status'=>200));`符合我的问题：

```
$this->set('val','test ok');
$this->set('_serialize',array('val'));
$this->response->statusCode(200); 
```

请记住，您需要做两件重要的事情：

1.  添加`Router::parseExtensions('json');`到 App/Config/routs.php。
2.  添加`var $components = array("RequestHandler");`到您的控制器。

我认为这种方式更好，因为您不需要返回任何东西。在以前的解决方案中，我们必须返回 cakeresponse 对象，而这对动作的性质感到不安。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T07:14:55.247

您应该使用带有[路由扩展的](http://book.cakephp.org/2.0/en/development/routing.html#Router%3a%3aparseExtensions)[JSON 视图](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html)：首先您需要设置路由扩展。这通常通过以下方式完成：

```
Router::parseExtensions('json'); // In App/Config/routes.php 
```

这将使路由器能够处理“json”扩展并知道如何处理请求，例如：www.example.com/people/index.json

```
if($this->RequestHandler->isAjax()){
    if ($this->Brand->save($this->request->query)) {
        //Logic for success
    } else {
       //Logic for save failure
    }
} 
```

此时，您可以选择使用[带有序列化键](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html#using-data-views-with-the-serialize-key)的数据视图或使用[带有视图文件](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html#using-a-data-view-with-view-files)的数据视图（从 CakeBook 复制）：

```
<?php
// Controller code
class PostsController extends AppController {
    public function index() {
        $this->set(compact('posts', 'comments'));
    }
}

// View code - app/View/Posts/json/index.ctp
foreach ($posts as &$post) {
    unset($post['Post']['generated_html']);
}
echo json_encode(compact('posts', 'comments')); 
```

请注意，视图位于 .../Views/Posts/ **json** /... 您可以在路由器中有多个扩展，因此您可以返回和处理各种内容 - 毕竟这只是数据表示。

干杯!

# javascript - 如何平滑jquery动画

> ID：12458237
> 
> 赞同：3
> 
> 时间：2012-09-17T11:27:23.423
> 
> 标签：javascript, jquery, jquery-animate

我想平滑一些 jquery.animate 函数的链接。

这是我描述问题的jsfiddle：http: [//jsfiddle.net/xavier_seignard/KTxbb/4/](http://jsfiddle.net/xavier_seignard/KTxbb/4/)

如您所见，每个动画之间都有一个停止点，即使使用线性属性也是如此。

你知道如何平滑它吗？或者其他任何可以解决问题的方法？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:31:13.297

您可以更改速度以获得更“精细”的动画，您会看到停止，因为它的速度太快且大小不同而无法覆盖：

```
function initPage() {
    $.each(json, function() {
        $("#point").animate({
            left: this.x,
            top: this.y
        },
        1000, 'linear');
    });
}​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T11:30:48.090

我认为你应该试试 jQuery Easing 插件 - [http://gsgd.co.uk/sandbox/jquery/easing/](http://gsgd.co.uk/sandbox/jquery/easing/)

包括文件，而不是“衬垫”添加一些其他缓动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T11:31:59.610

是你描述的速度变化吗？

那是因为动画的时间相同，但方块覆盖的距离不同。您可能需要根据行进的距离更改每个动画的时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T11:46:04.083

这就是 jsfiddle 的问题。我测试了你的 jsfiddle 链接，但它看起来并不像你在问题中提到的那样好。

但是后来我在我的电脑上创建了新页面并从你的小提琴中复制了所有内容并检查了它。看起来不错。

复制并粘贴它并将其保存为 html 并测试它：

```
<html>
<head>
  <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
  <link rel="stylesheet" type="text/css" href="http://fiddle.jshell.net/css/normalize.css">
    <style type="text/css">
    #point {
    position: absolute;
    background-color: black;
    width: 15px;
    height: 15px
}
    </style>
</head>
<body onload="initPage()">
    <div class="start" id="point"></div>
<script type="text/javascript">
    var json = [
                {'x' : '300' , 'y' : '200'},
                {'x' : '250' , 'y' : '150'},
                {'x' : '209' , 'y' : '387'},
                {'x' : '217' , 'y' : '323'},
                {'x' : '261' , 'y' : '278'},
                {'x' : '329' , 'y' : '269'},
                {'x' : '406' , 'y' : '295'}
            ];

function initPage() {
    $.each(json, function() {
        $("#point").animate({
            left: this.x,
            top: this.y
        },
        "linear");
    });
}
</script>
    </body>

</html> 
```

# django - Django模板标签：在满足条件的forloop的第一个元素上设置.active

> ID：12458239
> 
> 赞同：1
> 
> 时间：2012-09-17T11:27:32.577
> 
> 标签：django, for-loop, django-templates

我有以下问题：用户正在我的网站上学习课程。一门课程由几个章节组成，每章包含几个步骤。如果用户已登录并完成一个步骤，则后端会保存进度。当用户回到站点时，我希望他从他离开的地方继续。为此，我必须将 css 类“活动”添加到相应的导航步骤和每章的内容选项卡中。我的出发点是使用 if 语句测试用户是否已经完成了该步骤。效果很好，但是将 .active 添加到**所有**尚未完成的步骤中。我只想将它添加到尚未完成的第一步。我实际上已经解决了这个问题，但这是一个相当粗暴的黑客攻击，我必须包括一个[允许我在模板中设置变量的自定义模板标签](http://www.soyoucode.com/2011/set-variable-django-template)：

```
{% load custom_tags %}

{% for chapter in chapters %}
<div>
    <ul class="unstyled wizard clearfix">
        {% set active_wizard_steps = 0 %}
        {% for step in chapter.steps.all %}
        <li class="{% if not step.read and active_wizard_steps == 0 %}active{% set active_wizard_steps = 1 %}{% endif %}{% if step.read %} finished{% endif %}"></li>
        {% endfor %}
    </ul>
</div>
{% endfor %} 
```

我知道这也可以通过将列表或字典传递给包含所有活动步骤的模板来完成，然后在模板中测试是否有步骤在该列表中。但这意味着要重写很多视图代码，所以我决定完全在模板中完成。

所以我的问题是：解决这个问题的最佳实践方法是什么？我只是出于好奇而问，因为这个问题实际上很有趣。非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:18:54.290

向 Step 添加方法：

```
class Step(models.Model):
    # ...
    def is_active(self):
        # do your sauce 
```

在模板中：

```
class="{% if step.is_active %}active{% endif %}" 
```

我们在模型中已经有了像 get_absolute_url 这样方便的助手，为什么不添加这个呢？

如果你不喜欢它，你可以做一个模板过滤器并像这样使用它：

```
class="{% if step|is_active %}active{% endif %}" 
```

## 更新

这是另一种方法，像这样制作模板过滤器：

```
@register.filter
def set_active_steps(steps):
    active_wizard_steps = 0

    for step in steps:
        if not step.read and active_wizard_steps == 0:
            step.is_active = True

    return steps 
```

然后，在您的模板中：

```
{% for step in chapter.steps.all|set_active_steps %}
    ... {% if step.is_active %}...{% endif %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-08T13:47:02.210

我知道您已经解决了您的问题，为了完成，我发布了另一个答案。

如果您需要在 a`{% for %}{% endfor %}`中通过将当前向导步骤与循环中的当前项进行匹配来设置类，则可以使用以下代码：

```
{% for step in wizard.steps.all %}
    <li class="{% if wizard.steps.step1 == forloop.counter %}active{% elif wizard.steps.step1 > forloop.counter %} complete{% endif %}">
          <span class="step">{{ forloop.counter }}</span>
    </li>
 {% endfor %} 
```

# php - PHP GZip 和服务器发送事件流

> ID：12458244
> 
> 赞同：3
> 
> 时间：2012-09-17T11:27:39.633
> 
> 标签：php, gzip, server-sent-events

我正在用 PHP 编写[服务器发送的事件](http://www.w3.org/TR/eventsource/)流，但收到错误消息：

> “未能刷新缓冲区 zlib 输出压缩”

我相信这是由于试图刷新 gzipped 输出。

这是我的 PHP 代码：

```
header ("Content-Type: text/event-stream\n\n");
header ("Cache-Control: no-cache");

echo "data: {$json}";
echo "\n\n";

ob_flush(); // ERROR HERE
flush(); 
```

我的问题是让这个工作的最佳方法是什么 - 理想情况下不禁用 apache 中的 gzip - 可以在 PHP 中关闭它吗？

我试过了，但没有用：

```
if(ini_get('zlib.output_compression')){
    ini_set('zlib.output_compression', 'Off');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:51:02.980

您不能在 ob_ 输出处理程序中使用 zlib 输出压缩。请参阅 zlib.output_compression 上的 php 文档，它多次声明。

如果发现在 php 中启用输出压缩的最简单方法就是这样做：

```
ini_set("zlib.output_compression", 1);
ini_set("zlib.output_compression_level", 9); 
```

并松开所有 ob_* 东西。现在，当客户端请求带有以下标头的页面时：

```
Accept-Encoding: gzip, deflate 
```

zlib 将为您压缩您的响应正文，并在响应中为您设置：

```
Content-Encoding: gzip 
```

在意识到这两条线是多么简单之前，我花了我生命中的几个小时。并且不要隐含地使用任何冲洗

# html - 对齐表格顶部

> ID：12458245
> 
> 赞同：1
> 
> 时间：2012-09-17T11:27:42.047
> 
> 标签：html, css, html-table

我有三张桌子。当它们都充满数据（10 行）时，它们看起来很好。见图片 ![在此处输入图像描述](../Images/d50369a9043d4701cbc567c7dad13e0f.png)

但是，当尚未达到最大容量（即 10 行）时，表格将居中。 ![在此处输入图像描述](../Images/d6f11fd23daf87dcd84d3b61fa861337.png)

我想将对齐保持在第一张图片的顶部以及底部的按钮。有没有简单的风格来做到这一点？我的 HTML 看起来像这样

```
<table width="100%">
    <tr>
        <td>
            <table id="SomeTableContainer">
                <tr>
                    <th>Name</th>
                </tr>
            </table>
            <button id="prev1"><<</button>
            <button id="next1">>></button>
            <button id="create1">Create</button>
        </td>
        <td>
            <table id="SomeOtherTableContainer">
                <tr>
                    <th>Name</th>
                </tr>
            </table>
            <button id="prev2"><<</button>
            <button id="next2">>></button>
            <button id="create2">Create</button>
        </td>
        <td>
            <table id="OtherTableContainer">
                <tr>
                    <th>Name</th>
                </tr>
            </table>
            <button id="prev3"><<</button>
            <button id="next3">>></button>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:29:47.920

嗨，现在添加**td** `valign="top"`

像这样

```
<td valign="top"> 
```

或用于

**css**

```
td{
vertical-align:top;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:30:39.993

只需将其添加到您的第一个 TR：

```
<tr valign="top"></tr> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T11:31:22.677

添加样式

```
td { vertical-align: top;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T11:32:30.953

尝试这个

```
<td valign="top">
                <table id="SomeOtherTableContainer">
                    <tr>
                        <th>Name</th>
                    </tr>
                </table>
                <button id="prev2"><<</button>
                <button id="next2">>></button>
                <button id="create2">Create</button>
            </td> 
```

# objective-c - 当“找不到 libproc.h 文件”时如何让 DTPerformanceSession 工作

> ID：12458246
> 
> 赞同：15
> 
> 时间：2012-09-17T11:27:52.333
> 
> 标签：objective-c, instruments, performance-testing

添加行后

```
#import <DTPerformanceSession/DTSignalFlag.h> 
```

我得到“找不到 libproc.h 文件”。这个文件不在我的mac上。我试过用谷歌搜索它，它似乎应该包含在 Xcode 中。我尝试将 xcode 从 4.3 升级到 4.4，但仍然出现相同的错误。

我正在尝试在我的游戏循环中使用以下行。

```
DTSendSignalFlag("com.mycompany.mytracepoints.app.point", DT_POINT_SIGNAL, TRUE); 
```

我已经包含了 DTPerformanceSession.framework 我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:28:53.143

如果您使用的是 iOS，请注释掉该行“libproc.h”。标志将出现但仅在模拟器上而不是在设备上。:)

# javascript - 使用具有 POST 方法的表单处理刷新

> ID：12458248
> 
> 赞同：0
> 
> 时间：2012-09-17T11:27:58.623
> 
> 标签：javascript, html

我有一个 html 页面包含带有`POST`方法的表单。
当我提交表单时，它会显示一些详细信息。
但是当我使用刷新功能时，它说文档有问题。
刷新例程是这样处理的：`document.location = window.location`

`POST`我知道当我使用方法时它不起作用，`window.location`只会有没有参数的表单动作值。

那么有没有办法处理刷新或保留从抛出的参数？

所以基本上我想检索 POST 方法抛出的查询字符串

# c - 动态分配并返回一个局部变量

> ID：12458251
> 
> 赞同：0
> 
> 时间：2012-09-17T11:28:06.280
> 
> 标签：c, variables, dynamic

在这段代码中，我试图创建一个列表，其中包含输入文件中的所有字符，我的主要问题是句子“你不能返回函数的局部变量”我被告知哪个让我很困惑。我动态分配了一个 List 并返回它，**我可以在`List list`**没有动态分配的情况下定义并返回它吗？我相信这是错误的，因为所有信息都会被自动删除，我只会留下我创建的原始列表的地址。

以下是更多信息的代码：

```
typedef struct Item {
    char tav;
    struct Item* next;
} Item;

typedef struct List {
    Item* head;
} List;

List* create(char* path) {
    FILE* file;
    List* list;
    Item* trav;
    Item* curr;
    char c;

    file=fopen(path, "r");
    if (file==NULL) {
        printf("The file's not found");
        assert(0);
    }

    if (fscanf(file, "%c", &c)!=1) {
        printf("The file is empty");
        assert(0);
    }
    trav=(Item *)calloc(1, sizeof(Item));
    trav->tav=c;
    list=(List *)calloc(1, sizeof(List)); /* allocating dynamiclly the list so it won't be lost at the end of the function*/
    list->head=trav;

    while (fscanf(file, "%c", &c)==1) {
        curr=(Item*)calloc(1, sizeof(Item));
        curr->tav=c;
        trav->next=curr;
        trav=curr;
    }
    trav->next=NULL;

    fclose(file);

    return list;

} 
```

我对么？这是必要的吗？我可以定义 List 而不是一个指向一个返回它的指针吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:29:57.403

您不能返回指向函数本地变量的指针。局部变量不会超出函数的作用域（`{`, `}`）。
返回函数局部变量的地址将为您提供所谓的**未定义行为**。

您可以很好地返回：

*   按值或局部变量
*   指向动态分配内存的指针

首选第一个，除非您真的因为返回副本而对内存过多感到困扰。

> **我可以只定义没有动态分配的列表列表并返回它吗？**

是的，
只要您有：

```
List create(char* path); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:30:38.770

> 您不能返回函数的局部变量

这句话是完全**错误**的。例如在这个函数中：

```
int f(void)
{
    int x = 5;
    return x;
} 
```

是一个完全有效的函数，您将在其中返回一个局部变量。

您应该知道的是，您不能（或者说不*应该*）返回函数的局部变量的*地址*。这是因为函数返回后，地址指向垃圾，不再可用。

在您的示例中，您可以非常安全地定义一个本地`List`并返回它。

请注意，您仍然需要动态分配，即出于与上述相同的原因，`trav`您不能获取类型的局部变量`Item`并指向它。`list->head`

# c# - 使用C#代码删除所有浏览器的浏览历史？

> ID：12458264
> 
> 赞同：0
> 
> 时间：2012-09-17T11:28:53.323
> 
> 标签：c#, windows, winforms, browser-cache, browser-history

最近我对 Windows 应用程序产生了一些兴趣，我目前正在做一些基于 Windows 应用程序的编程。

现在我正在考虑创建一个 Windows（桌面）应用程序，使用它我可以删除所有主要浏览器的历史记录（即 chrome、firefox、safari、opera、ie）。其中我强调 chrome 和 firefox。我已经使用以下代码实现了删除 IE 浏览器历史记录的过程，因为它在 windows os 中具有内置功能

```
var p = new Process();
p.StartInfo.CreateNoWindow = true;
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardError = true;
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.FileName = "rundll32.exe";
p.StartInfo.Arguments = "InetCpl.cpl,ClearMyTracksByProcess 1";
p.Start();
p.WaitForExit(); 
```

它工作正常。现在转到其他浏览器。

经过大量研究，我发现了各种各样的东西。

1.  Chrome 将数据保存在 SqlLite 数据库中。因此，通过访问数据库，可以删除详细信息。我已经根据此链接的想法进行了研究

[以编程方式访问 Google chrome 历史记录](https://stackoverflow.com/questions/8608200/programmatically-acess-google-chrome-history)

我还了解到存储浏览器详细信息的各个地方是：

对于 Chrome：C:\Users\\AppData\Local\Google\Chrome\User Data

对于 FireFox：C:\Users\\AppData\Local\Mozilla\Firefox\Profiles 和 C:\Users\\AppData\Roaming\Mozilla\Firefox\Profiles

对于 Opera：C:\Users\\AppData\Local\Opera\Opera 和 C:\Users\\AppData\Roaming\Opera\Opera

对于 Safari：C:\Users\\AppData\Local\Apple Computer\Safari 和 C:\Users\\AppData\Roaming\Apple Computer\Safari。

现在我已经完成了一个简单的代码，我可以通过删除上述特定文件夹的内容来删除所有浏览器的所有历史记录。

在全球思考的同时，我遇到了很少的问题。

1.  在所有 PC 的文件夹位置都不在同一个地方。例如：在另一台 PC 中，缺少 Appdata 文件夹。所以我无法让我的应用程序在其他系统上运行。

2.  如果管理员登录了 PC，那么也很难找到 Appdata 文件夹。

3.  如果用户使用 Opera 或 Safari 等便携式浏览器，历史记录会保存在哪里？

所以克服这些问题，我正在考虑一种不同的方式。但我不确定我应该遵循什么。？

我发现 CC Cleaner 会删除所有浏览历史记录，无论它们保存在什么位置。CC Cleaner 是如何做到的？是否可以使用系统注册表找到存储历史记录的位置？

或者有没有更好的方法来清除所有的浏览历史？

总而言之，我不想访问 appdata 文件夹来删除浏览历史记录。还有其他选择吗？

任何示例代码/链接都会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:40:42.787

有一些方法可以阻止用户返回一个页面，但是完全清除你的整个浏览历史是不可能的。更不用说删除任何内容了。如果要删除，则应访问 AppData 并删除包含历史记录的文件夹。

# string - Groovy 字符串到 HashMap 转换

> ID：12458267
> 
> 赞同：3
> 
> 时间：2012-09-17T11:29:04.233
> 
> 标签：string, groovy, hashmap

如您所知，我们可以使用 toString() 方法简单地从哈希中获取字符串。所以我们得到类似这样的字符串：

```
[first:[one:1.1], second:2] 
```

问题是，我们如何将这个字符串再次转换为散列？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T11:31:07.403

您可以使用`Eval.me` [静态方法](http://groovy.codehaus.org/api/groovy/util/Eval.html#me%28java.lang.String%29)：

```
def map = Eval.me( '[first:[one:1.1], second:2]' )
assert map == [first:[one:1.1], second:2] 
```

# c++ - 在托管 C++ 项目中使用 wchar_t 时未解析的外部符号

> ID：12458269
> 
> 赞同：1
> 
> 时间：2012-09-17T11:29:13.937
> 
> 标签：c++, mfc, c++-cli, wchar-t

我有一个 C++ 项目，其中 Unicode 设置为字符集，/clr 选项用于公共语言运行时支持。我正在调用 MFC dll 的某些函数（设置多字节字符集），并且在使用 wchar_t 的那些函数上遇到了一些喜欢的错误。相同的 dll 是那些未设置 /clr 选项（即没有公共语言运行时支持）的 unicode c++ 项目的工作文件。我已经完成了谷歌并尝试了一些类似的东西： -

1.  用 std:string 替换 Cstring 但两者都给出相同的错误。

标准示例：字符串：--

> 错误 LNK2001：未解析的外部符号“公共：__thiscall CEventLog::CEventLog(wchar_t const *)”(??0CEventLog@@QAE@PB_W@Z)

对于 Cstring:--

> error LNK2019: unresolved external symbol "public: bool __thiscall CIITAdoField::GetValue(class ATL::CStringT > > &)" (?GetValue@CIITAdoField@@QAE_NAAV?$CStringT@_WV?$StrTraitMFC_DLL@_WV?$ChTraitsCRT@_W@ATL@@@@@ATL@@@Z) referenced in function "public: bool __thiscall Iit::DataFeedSvr::SpeedCache::CacheLoader > >,class Iit::DataFeedSvr::SpeedCache::HolidayScheduleInfo,struct Iit::DataFeedSvr::SpeedCache::HolidayScheduleSpeedCacheParam>
> 
> > ::Reload(class Iit::DataFeedSvr::SpeedCache::DoubleKeyCacheInstance > >,class Iit::DataFeedSvr::SpeedCache::HolidayScheduleInfo,struct Iit::DataFeedSvr::SpeedCache::HolidayScheduleSpeedCacheParam> &,class CIITAdoRecordset &,enum Iit ::DataFeedSvr::SpeedCache::ERefreshType,class Iit::DataFeedSvr::SpeedCache::CacheObserver const *)"(?Reload@?$CacheLoader@V?$DoubleKeyCacheInstance@JV?$CStringT@_WV?$StrTraitMFC_DLL@_WV?$ChTraitsCRT@_W@ATL@@@@@ATL@@VHolidayScheduleInfo@SpeedCache@DataFeedSvr@Iit@@UHolidayScheduleSpeedCacheParam@ 456@@SpeedCache@DataFeedSvr@Iit@@@SpeedCache@DataFeedSvr@Iit@@QAE_NAAV?$DoubleKeyCacheInstance@JV?$CStringT@_WV?$StrTraitMFC_DLL@_WV?$ChTraitsCRT@_W@ATL@@@@@ATL@@VHolidayScheduleInfo @SpeedCache@DataFeedSvr@Iit@@UHolidayScheduleSpeedCacheParam@456@@234@AAVCIITAdoRecordset@@W4ERefreshType@234@PBVCacheObserver@234@@Z)

1.  我已经检查了“将 Wchar_t 视为内置类型”之类的设置，它是文件。
2.  我曾尝试使用显式导出函数和类，`__declspec(dllexport)`但没有运气。
3.  我无法将我的项目从 unicode 更改为多字节，或者无法更改 /clr 选项的设置，因为它开始出现其他错误。

请提出解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-17T12:12:28.950

对外部 DLL 执行“转储”以查看导出的内容。如果您的 CEventLog::CEventLog 没有导出基于 char 的构造函数，您将无法导入它，就这么简单。

从您的示例中看， /clr 开关不会导致问题。尝试创建一个全新的 Unicode 项目（没有 CLR）只是为了检查您是否真的可以链接到外部 DLL。

# certificate - 在访问 https url 之前是否必须安装证书？

> ID：12458275
> 
> 赞同：1
> 
> 时间：2012-09-17T11:29:35.063
> 
> 标签：certificate, ca

我不清楚证书的授权：一个网站已经与证书相关联，比如[https://test.mysite.com](https://test.mysite.com)。在访问此 URL 之前，我是否必须在我的计算机上安装证书？

另一个问题是：每个证书都是由 CA 颁发的。如果我之前通过“安装”证书来信任 CA，我会信任同一 CA 颁发的以下所有证书吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:36:25.797

这取决于您用于访问 URL 的库或浏览器，但是，如果证书由受信任的 CA（您的库或浏览器已经信任的 CA）颁发，则无需在访问之前安装网站的证书地点。

如果 CA 不受信任，则有两种选择。一是信任证书。例如，浏览该页面通常会打开一个对话框，用户可以在其中选择信任证书。第二种是将 CA 添加到受信任的 CA 列表中。在 Windows 上，这是通过将 CA 的证书添加到“受信任的根授权”证书存储中来完成的。后一种情况意味着 CA 颁发的任何其他证书也将受到信任。

# sql - 使用 SQL 从电子病历中提取研究信息

> ID：12458277
> 
> 赞同：-1
> 
> 时间：2012-09-17T11:29:40.140
> 
> 标签：sql

我正在尝试从我们的电子病历系统`sql`中存储在 ' `comments`' 列中的数千个患者记录中获取信息。`Progress Note table`

由于请求的敏感性和患者身份信息的问题，我只想从此“ `comments`”列中提取必要的数据，而不会提取可能违反患者数据的额外和不必要的信息。

在“ `comments`”列（这是一个自由文本列）中包含大量文本，这些文本是在每位患者看到他们的顾问时写的，`diagnosis`例如`medication`和`general notes`。

对于我的研究，我只需要提取那些“评论”列包含以下词语的患者：

> 米氮平、精神分裂症和双极

这三个词必须出现在每位患者的每个评论栏中，才能被认为对研究目的有效。所以，如果其中一个患者的评论包含三个关键词中的两个，我不会使用它（我不希望看到它，因为它会被视为不必要的提取）-我只想看到任何`comments`具有这 3 个关键词的“”。

有人可以帮忙吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:37:25.167

你可以使用这样的东西：

```
select *
from yourtable t1
where exists (select *
              from yourtable t2
              where comments like '%Mirtazapine%'
                and t1.id = t2.id)
  and exists (select *
              from yourtable t2
              where comments like '%Shcizophrenia%'
                and t1.id = t2.id)
  and exists (select *
              from yourtable t2
              where comments like '%bi-polar%'
                and t1.id = t2.id) 
```

或者：

```
select *
from yourtable t1
where comments like '%Mirtazapine%'
  and exists (select *
              from yourtable t2
              where comments like '%Shcizophrenia%'
                and t1.id = t2.id)
  and exists (select *
              from yourtable t2
              where comments like '%bi-polar%'
                and t1.id = t2.id) 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/eb1bf/4)

# xml - 从 VBA 中导航 IE XML 文档？

> ID：12458278
> 
> 赞同：0
> 
> 时间：2012-09-17T11:29:40.623
> 
> 标签：xml, vba, excel

我正在尝试从 Google 的 Map API 获取纬度/经度值。我在 Excel 中创建 IE 对象并打开浏览器没有任何问题，但我在导航返回的 XML 文档以获取我需要的值时遇到了麻烦。

我已经创建了 HTMLDocument，并且该引用似乎是有效的，但我不知道如何导航它。有没有办法获取整个 HTML 输出的字符串？从中我可以得到我需要的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:27:02.323

使用 MSXML - 您需要在 Excel VBA IDE 的工具/参考中引用 Microsoft XML。

您可以从文件 ( `Load`) 或字符串 ( `LoadXML`) 加载 XML。在我的示例中，我从文件加载：

```
<?xml version="1.0" encoding="utf-8"?>
<testxml>
    <tests>
        <test nr="1">Number 1</test>
        <test nr="2">Number 2</test>
        <test nr="3">Number 3</test>
        <test nr="4">Number 4</test>
    </tests>
</testxml> 
```

VBA 加载文件：

```
Option Explicit

Sub TestXML()
    '***** Declare document
    Dim oXmlDoc As DOMDocument
    Dim bRet As Boolean

    '***** Create empty document
    Set oXmlDoc = New DOMDocument

    '***** Load XML from file
    bRet = oXmlDoc.Load("c:\temp\test.xml")

    '***** Manipulate XML
    MsgBox oXmlDoc.Text
    MsgBox oXmlDoc.XML
    MsgBox oXmlDoc.SelectSingleNode("//testxml/tests/test[@nr='3']").Text

    '***** Clean up
    Set oXmlDoc = Nothing
End Sub 
```

# forms - 嵌入式视图（子表单）和表单 - LOTUS NOTES

> ID：12458281
> 
> 赞同：-1
> 
> 时间：2012-09-17T11:29:45.227
> 
> 标签：forms, view, lotus-notes

我有一个名为 fm_Main 的主窗体。此 fm_Main 包含一个嵌入式视图，该视图具有 2 个操作：添加和删除。当我单击“添加”时，将打开另一个名为 fm_Second 的表单，在这里我可以添加一些字段，这些字段将显示在 fm_Main 的 embedded_view 上。

问题是：假设我有 3 个文件。它们都包含一个空的嵌入视图。如果我将一个文档中的一些值字段添加到嵌入视图中，然后保存该文档，则所有 3 个文档都包含该值到嵌入视图中。应该是：其中只有一个应该包含，因为我只修改了一个，其中 2 个不应该在嵌入视图中显示该值。谢谢！

PS：另外，如果我保存了一个包含嵌入视图条目的文档。当我想创建另一个新文档时，在嵌入视图中存在最后一个文档的最后一个条目。我要空着！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T00:51:37.883

Expanding on Karl-Henry's suggestion, you should make into a categorized view and use the [Show Single Category](http://www-12.lotus.com/ldd/doc/domino_notes/Rnext/help6_designer.nsf/855dc7fcfd5fec9a85256b870069c0ab/cf07de2aede754a485256c54004b795e?OpenDocument) feature of the embedded view. I might suggest using the @Unique function instead of the UNID to relate the Main and Second documents, but that's a matter of preference. In either case, you have to make sure that the value inherits down into a field in the Second docs, and you can use that field as the category for the view.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T15:01:11.647

您必须过滤嵌入视图以仅显示与当前打开的主文档相关的条目。大多数程序员会使用主文档的 UniversalID，它可以自动填充到您创建的条目中。要考虑的一件事是，您可能希望将通用 ID 存储在主文档上的计算时组合字段中。如果将来出现复制错误，Universal ID 可能会更改，您将无法访问嵌入视图中的条目。

我在几个大型 Notes 数据库中一直在这样做，效果很好。

# java - StringBuffer 和 String 的区别

> ID：12458290
> 
> 赞同：0
> 
> 时间：2012-09-17T11:30:15.043
> 
> 标签：java, string, stringbuffer

> **可能重复：**
> [java中的String和StringBuffer有什么区别？](https://stackoverflow.com/questions/2439243/what-is-the-difference-between-string-and-stringbuffer-in-java)

当我使用 StringBuffer 和 String 测试一个函数时。当我使用 StringBuffer 时，我在 2 或 3 秒内得到 java.lang.OutOfMemoryError。但是，当我使用 String 时，直到一分钟我才得到 java.lang.OutOfMemoryError 错误。它们有什么不同，我不太清楚。

```
public void print() {
    StringBuffer buffer = new StringBuffer();
    double result = 1.0 / 7.0;
    buffer.append(result);
    while (result != 0) {
        result = result % 7.0;
        buffer.append(result);
    }
    System.out.println(buffer.toString());
}

public void print() {
    String st = "";
    double result = 1.0 / 7.0;
    st = st + result;
    while (result != 0) {
        result = result % 7.0;
        st = st + result;
    }
    System.out.println(st);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:36:26.263

这可能是因为当您使用时`StringBuffer`，您的`while`循环执行速度比在每次迭代中创建新时快 20 到 30 倍`String`：因此，您更快地耗尽了内存。

顺便说一句，永远不要在带有 String 对象的循环中执行连接操作。改为使用`StringBuilder`（不是因为它比它的方法`StringBuffer`稍微慢一点）。`StringBuilder``synchronized`

# android - 用于构建 Android 应用程序的 Gwt

> ID：12458291
> 
> 赞同：4
> 
> 时间：2012-09-17T11:30:25.310
> 
> 标签：android, gwt, cordova, mgwt

我正在考虑构建我的第一个 Android 应用程序，并且想知道对于经验丰富的 GWT 开发人员来说最好的方法是什么。

在我的研究过程中，我发现 phone gap 可以帮助您使用 Html CSS 和 javascript 为多个平台进行开发，当我继续搜索时，我发现了 mgwt 和 gwt-phonegap，我想这对于 GWT 开发人员来说会很棒。在我开始真正研究它之前，我想问问这里有经验的手机开发人员我的方向是否正确。也许使用普通的 SDK 对我来说会更容易，毕竟我只希望它在基于 Android 的手机上运行。也许有人可以提供其他选择？我的应用程序非常简单，但需要使用手机的一些 API，例如位置和通知。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:21:04.260

您可能会对这个解释 mgwt 和 phonegap 基本概念的视频感兴趣：[http ://www.youtube.com/watch?v=0V0CdhMFiao&feature=plcp](http://www.youtube.com/watch?v=0V0CdhMFiao&feature=plcp)

当然，开发移动应用程序有很多不同的方法，GWT 和 Phonegap 就是其中之一。

# sql-server - 您如何评论 SQL Azure 数据库项目中的数据库架构对象？

> ID：12458292
> 
> 赞同：1
> 
> 时间：2012-09-17T11:30:24.920
> 
> 标签：sql-server, tsql, coding-style, azure-sql-database

据我了解`sp_addextendedproperty`，目前在 SQL Azure 数据库中不可用。所以..你如何评论你的数据库项目中的表、列、存储过程和其他对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:12:13.603

下面是一个带有注释的数据库表声明示例：

![在此处输入图像描述](../Images/64c41fabd6fa5856fa86bc8eba625417.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-18T05:36:16.193

对于现在遇到此问题的任何人，截至 2018 年 4 月， （`sp_addextendedproperty` **现在**）可用并且可以工作（至少用于将描述附加到列！）

# c# - 使用 LINQ 查询 JSON

> ID：12458302
> 
> 赞同：8
> 
> 时间：2012-09-17T11:31:16.473
> 
> 标签：c#, .net, json, linq

我有一个从 API 调用收到的 Json 响应。它有几个嵌套级别，如下所示（这是一个片段）：

```
"Items": [
  {
    "Result": {
      "Id": "191e24b8-887d-e111-96ec-000c29128cee",
      "Name": "Name",
      "StartDate": "2012-04-03T00:00:00+01:00",
      "EndDate": null,
      "Status": {
        "Name": "Active",
        "Value": 5
      },
      "Client": {
        "Id": "35ea10da-b8d5-4ef8-bf23-c829ae90fe60",
        "Name": "client Name",
        "AdditionalItems": {}
      },
      "ServiceAgreement": {
        "Id": "65216699-a409-44b0-8294-0e995eb05d9d",
        "Name": "Name",
        "AdditionalItems": {
          "ScheduleBased": true,
          "PayFrequency": {
            "Id": "981acb72-8291-de11-98fa-005056c00008",
            "Name": "Weekly",
            "AdditionalItems": {}
          },
          "PayCycle": [
            {
              "Name": "Schedule Based",
              "ScheduleBased": true,
              "SelfBilling": false,
              "Id": "a8a2ecc4-ff79-46da-a135-743b57808ec3",
              "CreatedOn": "2011-09-16T23:32:19+01:00",
              "CreatedBy": "System Administrator",
              "ModifiedOn": "2011-09-16T23:32:19+01:00",
              "ModifiedBy": "System Administrator",
              "Archived": false
            }
          ]
        }
      },
}
]
... 
```

我想要做的是使用 Linq 从 PayCycle 节点检索数据。例如，我可以使用控制器中的以下 Linq 使用 Result.ServiceAgreement.AdditionalItems.SchedultedBased 获取值为 true 的项目：

```
var result = from p in data["Data"]["Items"].Children()
             where (bool)p["Result"]["ServiceAgreement"]["AdditionalItems"]["ScheduleBased"] == true
             select new
             {
                 Name = (string)p["Result"]["Client"]["Name"],
                 Id = (string)p["Result"]["Client"]["Id"]
             }; 
```

现在我需要获取`Result.ServiceAgreement.AdditionalItems.Paycycle.ScheduleBased`和`SelfBilling`属性。如果 PayCycle 也是一个数组，我该怎么做，我如何像上面 Linq 中的 Data.Items 一样获取孩子，以便我可以对这两个项目进行 where 子句过滤？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-17T12:18:11.320

您可以将 JSON 反序列化为`dynamic`对象，然后使用 Linq to Objects：

```
 [TestMethod]
    public void TestMethod1()
    {
        const string json = @"""Items"": [
{
""Result"": {
  ""Id"": ""191e24b8-887d-e111-96ec-000c29128cee"",
  ""Name"": ""Name"",
  ""StartDate"": ""2012-04-03T00:00:00+01:00"",
  ""EndDate"": null,
  ""Status"": {
    ""Name"": ""Active"",
    ""Value"": 5
  },
  ""Client"": {
    ""Id"": ""35ea10da-b8d5-4ef8-bf23-c829ae90fe60"",
    ""Name"": ""client Name"",
    ""AdditionalItems"": {}
  },
  ""ServiceAgreement"": {
    ""Id"": ""65216699-a409-44b0-8294-0e995eb05d9d"",
    ""Name"": ""Name"",
    ""AdditionalItems"": {
      ""ScheduleBased"": true,
      ""PayFrequency"": {
        ""Id"": ""981acb72-8291-de11-98fa-005056c00008"",
        ""Name"": ""Weekly"",
        ""AdditionalItems"": {}
      },
      ""PayCycle"": [
        {
          ""Name"": ""Schedule Based"",
          ""ScheduleBased"": true,
          ""SelfBilling"": false,
          ""Id"": ""a8a2ecc4-ff79-46da-a135-743b57808ec3"",
          ""CreatedOn"": ""2011-09-16T23:32:19+01:00"",
          ""CreatedBy"": ""System Administrator"",
          ""ModifiedOn"": ""2011-09-16T23:32:19+01:00"",
          ""ModifiedBy"": ""System Administrator"",
          ""Archived"": false
        }
      ]
    }
  }
}
}
]";
        dynamic data = System.Web.Helpers.Json.Decode("{" + json + "}");

        var result = from i in (IEnumerable<dynamic>)data.Items
                     where i.Result.ServiceAgreement.AdditionalItems.ScheduleBased == true
                     select new
                            {
                                i.Result.Client.Name,
                                i.Result.Client.Id
                            };

        Assert.AreEqual(1, result.Count());
        Assert.AreEqual("client Name", result.First().Name);
        Assert.AreEqual("35ea10da-b8d5-4ef8-bf23-c829ae90fe60", result.First().Id);
    } 
```

请注意，我必须在示例 json 字符串周围添加方括号 { 和 }，否则 .NET json 解析器不喜欢它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:45:29.113

首先，我不熟悉使用这种格式 ["some"]["thing"] 编写 LINQ/LAMBDA。我的第一步是创建一些类/对象来存放数据，以便之后创建任何代码。

例如

```
public class Result
{
    public Guid Id { get; set; } 
    public string Name { get; set; },
    public DateTime StartDate  { get; set; }
    //you get the idea
} 
```

但可能尝试以下？

```
 var result = from p in data["Data"]["Items"].Children()
                 where (bool)p["Result"]["ServiceAgreement"]["AdditionalItems"]["ScheduleBased"] == true
                    && (p["Result"]["ServiceAgreement"]["AdditionalItems"]["PayCycle"]).Where(o => o.["ScheduleBased"] == true)
                 select new
                 {
                     Name = (string)p["Result"]["Client"]["Name"],
                     Id = (string)p["Result"]["Client"]["Id"]
                 }; 
```

# c#-4.0 - 在类型初始化程序中分配与其父值相同的子值

> ID：12458303
> 
> 赞同：0
> 
> 时间：2012-09-17T11:31:18.230
> 
> 标签：c#-4.0, c#-3.0, typeinitializer

我有一堂课

```
public class Person
{
    public string Name{ get; set; }
    public string Address{ get; set; }
    public List<Person> Children{ get; set; }
} 
```

在这里，我有一个属性儿童列表。

现在我正在使用类型初始化器创建此类实例的数组

```
var persons = new []{
    new Person{ Name="Some Name", Address = "Some Address" },
    new Person{ Name="Some Name 2", Address = "Some Address 2", Children = new List<Person>{
          new Person { Name = "Some Name 3",
                ** Address = <here I want its parent Address>  "Some Address 2" **}
       }
    }
}; 
```

所以，我的问题是我正在创建一个 Person 的对象，我在其中分配了它的 Address 属性，现在我希望这个属性值分配它的子级，但是我没有找到一种方法来获取它的父级，就像我们通过这个关键字所做的那样在其定义中获取类成员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:54:37.887

C# 没有提供简单的方法来做到这一点。`Person`上述对象与其子对象之间的父子关系不是由语言强制或提供的。解决上述问题的最简单方法是将地址存储在变量中并引用它。

```
string address = "Some Address 2";
var persons = new []{
    new Person{ Name="Some Name", Address = "Some Address" },
    new Person{ Name="Some Name 2", Address = address, 
        Children = new List<Person>{
              new Person { Name = "Some Name 3", address }
       }
    }
}; 
```

Alternatively, a `Person` object could set the address of any children to itself in a data-binding like arrangement.

# c# - UserPrincipal SamAccountName 抛出未处理的 DirectoryServicesCOMException “发生本地错误”

> ID：12458304
> 
> 赞同：1
> 
> 时间：2012-09-17T11:31:20.167
> 
> 标签：c#, .net, directoryservices

我正在编写一段代码，该代码应该根据他们的 SamAccountName 作为搜索参数在活动目录中搜索特定用户 GivenName (forename) 和 Surname，然后返回一个包含他们的名字和姓氏的字符串。

到目前为止我写的代码如下：

```
public static string GetName(string uName)
    {
        StringBuilder builder = new StringBuilder();
        using (PrincipalContext context = new PrincipalContext(ContextType.Domain, "serverName"))
        {
            UserPrincipal user = new UserPrincipal(context);

            user.SamAccountName = uName;

            PrincipalSearcher srch = new PrincipalSearcher(user);
            srch.QueryFilter = user;
            PrincipalSearchResult<Principal> res = srch.FindAll();
            foreach (UserPrincipal u in res)
            {
                builder.Append(u.GivenName);
                builder.Append(" ");
                builder.Append(u.Surname);
            }
            return builder.ToString();
        }
    } 
```

我在上面的代码中遇到的问题是在运行时该行

```
user.SamAccountName = uName; 
```

引发以下错误： DirectoryServicesCOMException unhandled "A local error has occurred"

主体上下文对象创建得很好，就像用户主体对象一样，它只在执行上述行时抛出错误。更奇怪的是，这段代码似乎在几天前就起作用了。如果有人阅读本文对我为什么会收到此错误有任何想法，我将不胜感激！

PS我求助于这个问题，因为该死的错误信息有点太神秘而无法真正弄清楚，或者至少对我来说（发生了本地错误）真的吗？任何认为这是有用的错误消息的开发人员都是白痴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:06:12.783

可能的原因：

1.  计算机的域成员身份或身份验证存在问题。例如，运行代码的计算机上的时钟是否与目标域中的 DC 同步（在 5 分钟内）？
2.  用户名无效。例如，它包含无效字符。

# android - AsyncTask 有什么问题吗？

> ID：12458306
> 
> 赞同：0
> 
> 时间：2012-09-17T11:31:24.527
> 
> 标签：android

```
@Override 
protected InputStream doInBackground(String... url){                
    try {
        InputStream stream = downloadXml(url[0]);
        new ParseXml(stream); //for testing porpuses: outputs ok to logcat
        return stream;
    } catch (IOException e) {
        Log.d("dbg","exception");   
        e.printStackTrace();
        return null;
    }   
}

@Override 
protected void onPostExecute(InputStream result) {
    if (result != null) {    
       new ParseXml(result); //crashes the app                  
    }
    Log.d("dbg","postexecute triggered ok");        
} 
```

我认为代码很容易解释，我尝试将传递类型更改为 Object 并在需要的地方进行类型转换，但它也没有工作。

我应该知道 sdk 中是否有任何未记录的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:35:10.060

**显然，Crash ..您正在MainUI Thread**中进行冗长的（也可能与网络相关的）操作。从**AsyncTask**开始，仅在 In MainUI Thread 上运行`onPostExecute()`。所以总是把它放在. **`doInBackground()`**

 **此代码行`new ParseXml(result);` 应位于`doInBackground()`AsyncTask**中**。

**更新：**

因此，如果您只想在应用程序 UI 上反映更新，请完成 XML 的解析`doInBackground()`并仅将结果传入。`onPostExecute()`**

# applet - 在没有 Java 的情况下运行小程序

> ID：12458308
> 
> 赞同：3
> 
> 时间：2012-09-17T11:31:32.433
> 
> 标签：applet, java

有没有办法在没有`JRE`或`JDK`在机器上的浏览器中运行小程序？如果没有，有没有办法在带有轻插件的浏览器中运行小程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:32:13.633

不，没有解决方案：applet 需要 JVM 才能运行。

当您在浏览器中[安装 Java 插件时，它会安装 JRE。](http://www.oracle.com/technetwork/java/index-jsp-141438.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:10:57.893

您可以在另一台机器上运行小程序（可能是另一个常识中的虚拟机），然后使用远程桌面。这类似于 Opera for mobiles 的工作方式。

# django - Django AttributeError：“str”对象没有属性“_default_manager”

> ID：12458309
> 
> 赞同：6
> 
> 时间：2012-09-17T11:31:45.047
> 
> 标签：django, circular-reference, attributeerror

以下错误似乎在我的实时服务器上随机发生（即通过 apache mod_wsgi），但从未在开发中发生（即 localhost python manage.py runserver）。

请注意，这种情况很少发生，并且不是可以轻松复制或每次访问特定网址时都可以复制的内容。

我已经在 SO 和 google 上看到了各种答案，但似乎没有任何明确的原因说明为什么会发生此错误。也许这是因为错误相当普遍，但最常见的答案似乎是由于循环导入错误。我看到的另一个答案是模型 FK 字段引用不是正确的情况（例如 applabel.model 而不是 applabel.Model），但我所有的模型 FK 字段都是正确的。

错误的原因似乎指向我的 admin.py 文件之一。该文件最初确实从 forms.py 文件中导入了自定义表单类。admin.py 文件和 forms.py 文件都从 models.py 文件中导入了相同的模型。因此，我将表单类移动到 admin.py 文件中，以防此处发生循环引用，但我仍然偶尔会遇到这些错误。

谁能解释为什么会发生此错误以及为什么会如此随机？我始终确保在代码更新后重新启动相关服务。

追溯是：

```
Traceback (most recent call last):

File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 101, in get_response
request.path_info)

File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py", line 250, in resolve
for pattern in self.url_patterns:

File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py", line 279, in _get_url_patterns
patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)

File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py", line 274, in _get_urlconf_module
self._urlconf_module = import_module(self.urlconf_name)

File "/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py", line 35, in import_module
__import__(name)

File "/myproject/urls.py", line 6, in <module>
admin.autodiscover()

File "/usr/local/lib/python2.7/dist-packages/django/contrib/admin/__init__.py", line 26, in autodiscover
import_module('%s.admin' % app)

File "/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py", line 35, in import_module
__import__(name)

File "/myproject/myapps/app/admin.py", line 61, in <module>
class CardAdminForm(forms.ModelForm):

File "/usr/local/lib/python2.7/dist-packages/django/forms/models.py", line 205, in __new__
opts.exclude, opts.widgets, formfield_callback)

File "/usr/local/lib/python2.7/dist-packages/django/forms/models.py", line 159, in fields_for_model
formfield = f.formfield(**kwargs)

File "/usr/local/lib/python2.7/dist-packages/django/db/models/fields/related.py", line 913, in formfield
'queryset': self.rel.to._default_manager.using(db).complex_filter(self.rel.limit_choices_to),

AttributeError: 'str' object has no attribute '_default_manager' 
```

包和版本

*   警告：找不到 pymssql==2.0.0b1-dev-20111019 的 svn 位置
*   警告：找不到分发的 svn 位置==0.6.24dev-r0
*   Django==1.3.3
*   GnuPGInterface==0.3.2
*   景观客户端==12.05
*   PAM==0.4.2
*   太平==1.1.7
*   扭曲核心==11.1.0
*   apt-xapian-index==0.44
*   argparse==1.2.1
*   chardet==2.0.1
*   命令未找到==0.2.44
*   ## FIXME：在此包的依赖链接中找不到 svn URL：distribute==0.6.24dev-r0
*   django-debug-toolbar==0.9.4
*   django-rosetta==0.6.8
*   httplib2==0.7.2
*   iotop==0.4.4
*   钥匙圈==0.7.1
*   语言选择器==0.1
*   启动板库==1.9.12
*   lazr.restfulclient==0.12.0
*   lazr.uri==1.0.3
*   水银==2.0.2
*   oauth==1.0.1
*   psycopg2==2.4.5
*   pyOpenSSL==0.12
*   pycrypto==2.4.1
*   ## FIXME：在此包的依赖链接中找不到 svn URL：pymssql==2.0.0b1-dev-20111019
*   pyserial==2.5
*   python-apt==0.8.3ubuntu7
*   python-debian==0.1.21ubuntu1
*   报告实验室==2.5
*   simplejson==2.3.2
*   ufw==0.31.1-1
*   wadlib==1.3.0
*   wsgiref==0.1.2
*   xlwt==0.7.4
*   zope.interface==3.6.1

数据库：PostgreSQL 9.1.5

CardAdmin 和 CardAdminForm：

```
class CardAdmin(admin.ModelAdmin):
    form = CardAdminForm
    raw_id_fields = ('cust', 'acc', 'vehicle', 'driver')
    list_display = ('id', 'pan', 'name', 'expiry', 'created', 'modified')
    list_filter = ('status', )
    search_fields = ['id', 'pan']
admin.site.register(Card, CardAdmin)

class CardAdminForm(forms.ModelForm):
    """
    A Form for Cards (Admin console)
    """

    def __init__(self, *args, **kwargs):
        super(CardAdminForm, self).__init__(*args, **kwargs)
        self.fields['cust'].required = True
        self.fields['acc'].required = True
        self.fields['name'].required = True
        self.fields['code'].widget = forms.PasswordInput()
        self.fields['code'].max_length = 6

    class Meta:
        model = Card
        fields = (
            'cust',
            'name',
            'acc',
            'no',
            'code',
            'type',
            'status',
            'address_1',
            'address_2',
            'zip',
            'city',
            'country',
            'phone_no',
            'expiry',
            'vehicle',
            'driver'
        )

    def save(self, commit=True):
        # Save some additional data.
        form_instance = super(CardAdminForm, self).save(commit=False)

        cleaned_data = self.cleaned_data
        form_instance.pan = '%s%s%s'\
        % (
            cleaned_data['acc'].iso.number,
            cleaned_data['acc'].number,
            cleaned_data['no']
        )

        if commit:
            form_instance.save()
        return form_instance 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2016-01-08T15:09:43.040

对于仍然发现这个旧问题的人们的快速说明：这种情况也可能是由使用无效字符串作为引用的 ForeignKey/ManyToMany/OnetoOne 引起的（例如：未正确指向模型）。

我正在更新/重构一个项目并遇到了这个问题。原来这只是一个错字。

有点奇怪的 django 没有明确通知它无法解析字符串，可能是因为其他应用程序混淆了它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-17T14:30:17.780

`_default_manager`是模型上的属性，它包含该模型的（惊喜，惊喜）默认管理器。Django 到处使用它，尤其是在管理员中，为 ModelAdmins 返回查询集。

所以错误告诉你在某个地方，你已经传递了一个字符串，其中需要模型类或实例。它试图调用`_default_manager`字符串，但显然失败了。

但是，由于错误出现在 Django 代码中，特别是在引用`self.rel.to`实例时，我只能假设您或您正在使用其代码的第三方已经对某些东西进行了一些非常完整和巨大的更改。这不是股票代码的行为方式。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-20T14:54:52.407

通过查看以下链接，我的问题的解决方案似乎已得到解决：

[在启动时获取“str”在 Django 应用程序上没有属性“_default_manager”](https://stackoverflow.com/questions/5775178/getting-the-str-has-no-property-default-manager-on-a-django-app-just-on-sta)

和：

[Django Ticket 10405 评论 11](https://code.djangoproject.com/ticket/10405#comment:11)

从技术上讲，Chris Pratt 的回答是绝对正确的，也是一个很好的解释，但在我的代码中，我找不到会导致此错误的实例。

该错误是随机发生的，但此错误的来源主要是由服务器监控系统为我的网站请求基本 url (/) 触发的（即完整的 HTTP 页面请求）。我只能假设监控系统使用类似 wget 命令的东西来进行检查，所以我使用这个命令来测试我网站的基本 url。

有时，此命令会返回 200 OK 响应，但在大多数情况下，这将返回 500 Internal Server Error 响应，即使我可以从浏览器正常访问该网站。似乎在重新启动 Apache 后**总是会立即出现 500 Internal Server Error 响应。**

对于这个错误的确切原因和随机性，我仍然有点困惑，我所看到的讨论指出了 Django 框架中可能存在的错误，但这在使用我在这里实现的相同设置的其他网站中不会发生. 阅读上面第二个链接中的评论，似乎使用了与我上面的问题类似的代码布局（仅在使用 Apache/mod_wsgi 的生产中发生，用于管理部分的 ModelForms，在模型中使用引用的 FK 引用）。

如上述链接中所述，解决方案是插入：

```
from django.db.models.loading import cache as model_cache
if not model_cache.loaded:
    model_cache.get_models() 
```

前：

```
admin.autodiscover() 
```

在基本 urls.py 文件中。

希望这可以帮助其他可能偶然发现这个奇怪问题的人。自添加上述代码以来，我没有任何错误。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-25T10:42:09.917

我遇到了这个错误消息，因为我没有在工厂的元类中正确指定模型

```
class FooBarFactory(factory.django.DjangoModelFactory):
    class Meta:
        model = 'foobar'  # <-- must be 'myapp.foobar' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-24T01:53:25.940

当我这样做时，我遇到了类似的错误：

```
from people.models import Quote

    quote = models.ManyToManyField(
            "Quote",
            blank=True,
            verbose_name=_("Quotes"),
            help_text=_("Select quotes"),
            default=None,
            related_name="people_quotes"
        ) 
```

但是当我删除引用模型“Quote”周围的引号时，错误就消失了。

```
from people.models import Quote

    quote = models.ManyToManyField(
            Quote,
            blank=True,
            verbose_name=_("Quotes"),
            help_text=_("Select quotes"),
            default=None,
            related_name="people_quotes"
        ) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-29T17:33:04.030

```
File "/home/lb/.local/lib/python3.6/site-packages/django/db/models/fields/related.py", line 1673, in formfield
    'queryset': self.remote_field.model._default_manager.using(using),
AttributeError: 'str' object has no attribute '_default_manager' 
```

在我的模块中有一个错误的字符串代码：

错误：

```
tags = models.ManyToManyField('Tag', blank=True) 
```

正确的：

```
tags = models.ManyToManyField(Tag, blank=True) 
```

我还没有创建类标签

# php - 在 Codeigniter 中放在哪里以及如何加载结果对象类？

> ID：12458310
> 
> 赞同：6
> 
> 时间：2012-09-17T11:31:48.770
> 
> 标签：php, codeigniter, code-organization

我正在寻找在 CodeIgniter 中组织“结果对象类”的正确方法。这些类通常用于模型中，如[文档](http://codeigniter.com/user_guide/database/results.html)中所述：

> 您还可以将字符串传递给 result() ，它表示要为每个结果对象实例化的类（注意：必须加载此类）

```
$query = $this->db->query("SELECT * FROM users;");

foreach ($query->result('User') as $row)
{
   echo $row->name; // call attributes
   echo $row->reverse_name(); // or methods defined on the 'User' class
} 
```

那么，在哪里放置“用户”类，是否有任何“官方”方式来加载它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:46:03.473

尝试使用库。

将您的类放在 application/libraries 文件夹中，然后使用加载器加载它：

```
$this->load->library('user'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T08:46:37.860

不完全符合您的要求，但我经常使用 MY_Model ：

```
public function merge_object(&$object, $data){

    if (is_object($data)) {
        $data = get_object_vars($data);
    }
    if (!empty($data)) {
        foreach ($data as $property => $value) {
            if (!property_exists($object, $property)) {
                $object->$property = $value;
            }
        }
    }
    return $object;
} 
```

然后调用 $this->merge_object($this, $data); 从 __construct($data = array())

当您现在调用模型函数时，它也会返回模型类的一个实例，因此您可以访问它的任何方法。它基本上完成了您正在尝试做的事情。

# web - 如何检查 colmmande 返回是真还是假 selenium-ide

> ID：12458311
> 
> 赞同：0
> 
> 时间：2012-09-17T11:31:56.867
> 
> 标签：web, selenium-ide

我正在尝试通过这样做来获得带有 selenium ide 的命令返回：

```
storeTextPresent|myText|title
gotoIf|storedVars.tite|true
echo|${"true"} 
```

但它不起作用......我有：[错误]意外异常：文件名-> chrome://flowcontrol/content/extensions/goto-sel-ide.js?1347871647495，lineNumber -> 120。

有谁知道如何获得回报？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T21:11:39.790

我没有检查 gotoIf 上的布尔支持，但是如果 gotoIf 想要转到标签，我看不到上面脚本中定义的标签。此外，“storedVars.tite”参考似乎拼写错误。

# regex - Perl 和正则表达式：如何清空包含多个空格的文本行？（空格数可能不同）

> ID：12458313
> 
> 赞同：1
> 
> 时间：2012-09-17T11:32:00.453
> 
> 标签：regex, perl

使用 Perl，我需要清空一个**包含多个空格的字符串**

我无法得出正确的正则表达式

**这是我的文字：**

```
<sentence="I am walking on the street and it is raining" >
</sentence> 
```

我想清空这个字符串以获得：

```
<sentence="" >
</sentence> 
```

**这是我的代码（它只是替换一个没有空格的字符串）：**

```
sub empty_it {

    print "\nSTART replacing WO info !!!\n";
    my $find    = "\<sentence\=\"\\S*\"";
    my $replace = "\<sentence\=\"\"";
    {  
        local @ARGV = ("$_[0]");
        local $^I = '.baz';
        while ( <> ) {
            if (s/$find/$replace/ig) {
                print;
            }
            else {
                print;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T11:43:21.323

您正在寻找的可能是一种匹配两个引号之间所有内容的方法。这可以通过使用负字符类来完成（即 /"[^"]*"/）

所以这可能会起作用：

```
my $find = '<sentence="[^"]*"'; 
```

但总的来说，我不建议使用正则表达式来处理 xml。它通常很脆弱，如果您的输入变化最少，它通常会损坏。例如，如果它开始使用单引号，因为它突然必须在内容中包含双引号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T12:02:59.230

您的直接问题是`"\S*"`不匹配`"I am walking on the street and it is raining"`，因为`\S`不会匹配单词之间的空格。更好的选择是`[^"]+`，这将匹配任何不是双引号的内容；但是，如果字符串中允许使用双引号（如果它们被转义），它仍然存在问题。当然，我们需要知道转义机制来解决这个问题。

您在代码中还有其他几个问题：

1.  在你的字符串中过度转义
2.  未能使用`qr//`创建正则表达式（避免完全转义）
3.  `/i`和选项看起来像是在`/g`不了解它们的作用的情况下被粘贴了
4.  an`if`和`else`具有相同内容的
5.  缩进不一致
6.  标量值的不必要引用
7.  `empty_it`不是一个很好的函数名

我已经修复了我可以在这里修复的部分：

```
sub empty_it {
    print "\nSTART replacing WO info !!!\n";
    my $find    = qr/<sentence="[^"]+"/;
    my $replace = q/<sentence=""/;
    local $^I   = '.baz';
    local @ARGV = ($_[0]);
    while( <> ) {
        s/$find/$replace/ig;
        print;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T13:45:43.433

使用久经考验的 XML 模块来处理 XML 数据确实更好。该程序用于[`XML::Twig`](https://metacpan.org/module/XML%3a%3aTwig)进行您要求的更改

据我所知，您想检查元素的所有`singing`属性，`sentence`如果它们包含空格，则将它们设置为空字符串

该`$twig`对象是在`keep_spaces`启用该选项的情况下创建的。这会保留所有空白 PCDATA，从而保留原始文件的格式和缩进

解析数据后，调用`get_xpath`查找具有包含至少一个空白字符`sentence`的属性的所有元素。`singing`（请注意，这是一种非标准的 XPath 语言特有的`XML::Twig`）

循环只是将`singing`所有这些元素的属性设置为空字符串，并`$twig->print`输出修改后的数据

请注意，属性为的其他`sentence`元素输出不变，因为它与搜索不匹配`singing``NOSPACES``get_xpath`

```
use strict;
use warnings;

use XML::Twig;
my $twig = XML::Twig->new(keep_spaces => 1);

$twig->parse(*DATA);

for my $sentence ( $twig->get_xpath('//sentence[@singing =~ /\s/]') ) {
  $sentence->set_att(singing => '');
}
$twig->print;

__DATA__
<root>
  <sentence singing="I am walking on the street and it is raining" >
  </sentence>
  <sentence singing="NOSPACES" >
  </sentence>
</root> 
```

**输出**

```
<root>
  <sentence singing="">
  </sentence>
  <sentence singing="NOSPACES">
  </sentence>
</root> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T11:46:17.747

您可以指定 char 的反义词。

```
my $find = '<sentence="[^"]*"';
my $replace = '<sentence=""';
s/$find/$replace/g; 
```

# php - php simplexml-load-file 解析 php

> ID：12458314
> 
> 赞同：1
> 
> 时间：2012-09-17T11:32:02.943
> 
> 标签：php, xml

我在我的脚本中使用它：

```
$xml = file_get_contents('gapi.account.php');
print_r($xml); 
```

容易，对吧？

但是现在... gapi.account.php 没有被解析，怎么办？解析文件的输出是 xml。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:35:31.933

您需要从外部获取文件，让它运行：

```
$xml = file_get_contents('http://www.example.org/gapi.account.php');
print_r($xml); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:35:35.417

`file_get_contents`不执行您获取的任何内容。服务器实际上是这样做的，所以你必须像服务器上的文件一样调用`file_get_contents('http://mydomain.com/gapi.account.php');`

# android - com.sec.android.app.camera.CamcorderEngine.renameTempFile 处的 NullPointerException（CamcorderEngine.java:1467）

> ID：12458318
> 
> 赞同：0
> 
> 时间：2012-09-17T11:32:27.310
> 
> 标签：android, camera

我想从我的活动中捕捉视频

这是我的源代码

```
mTempVideoPath = Environment.getExternalStorageDirectory().getName() + File.separatorChar + "Android/data/" + this.getPackageName() + "/files/" + System.currentTimeMillis() + ".mp4";

File videoFile = new File(mTempVideoPath);
                            try {
                                if(videoFile.exists() == false) {
                                    videoFile.getParentFile().mkdirs();
                                    videoFile.createNewFile();
                                }

                            } catch (IOException e) {
                                Log.e(getCallingPackage(), "Could not create file.", e);
                            }
                            mCurrentVideoURI = Uri.fromFile(videoFile);

                            Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE );
                            intent.putExtra( MediaStore.EXTRA_OUTPUT, mCurrentVideoURI);
                            // preventing it from listing items that aren't on the SD card
                            intent.putExtra(Intent.EXTRA_LOCAL_ONLY, true);
                            intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);
                            startActivityForResult(intent, CAPTURE_VIDEO); 
```

但我得到这个错误：

```
09-17 18:25:28.945: E/AndroidRuntime(30253): FATAL EXCEPTION: main
09-17 18:25:28.945: E/AndroidRuntime(30253): java.lang.NullPointerException
09-17 18:25:28.945: E/AndroidRuntime(30253):    at java.io.File.fixSlashes(File.java:185)
09-17 18:25:28.945: E/AndroidRuntime(30253):    at java.io.File.<init>(File.java:134)
09-17 18:25:28.945: E/AndroidRuntime(30253):    at com.sec.android.app.camera.CamcorderEngine.renameTempFile(CamcorderEngine.java:1467)
09-17 18:25:28.945: E/AndroidRuntime(30253):    at com.sec.android.app.camera.CamcorderEngine.doStopVideoRecordingSync(CamcorderEngine.java:965)
09-17 18:25:28.945: E/AndroidRuntime(30253):    at com.sec.android.app.camera.CeStateRecording.handleRequest(CeStateRecording.java:69)
09-17 18:25:28.945: E/AndroidRuntime(30253):    at com.sec.android.app.camera.CeRequestQueue.startFirstRequest(CeRequestQueue.java:123)
09-17 18:25:28.945: E/AndroidRuntime(30253):    at com.sec.android.app.camera.CeRequestQueue.access$200(CeRequestQueue.java:32)
09-17 18:25:28.945: E/AndroidRuntime(30253):    at com.sec.android.app.camera.CeRequestQueue$MainHandler.handleMessage(CeRequestQueue.java:60)
09-17 18:25:28.945: E/AndroidRuntime(30253):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-17 18:25:28.945: E/AndroidRuntime(30253):    at android.os.Looper.loop(Looper.java:137)
09-17 18:25:28.945: E/AndroidRuntime(30253):    at android.app.ActivityThread.main(ActivityThread.java:4507)
09-17 18:25:28.945: E/AndroidRuntime(30253):    at java.lang.reflect.Method.invokeNative(Native Method)
09-17 18:25:28.945: E/AndroidRuntime(30253):    at java.lang.reflect.Method.invoke(Method.java:511)
09-17 18:25:28.945: E/AndroidRuntime(30253):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
09-17 18:25:28.945: E/AndroidRuntime(30253):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
09-17 18:25:28.945: E/AndroidRuntime(30253):    at dalvik.system.NativeStart.main(Native Method) 
```

我在 Galaxy S2、ICS 上运行！

请帮帮我！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T02:48:23.480

我在这里找到了很好的解决方案：[尝试录制视频时出现 VerifiyAndSetParameter 错误](https://stackoverflow.com/questions/10494839/verifiyandsetparameter-error-when-trying-to-record-video)

**MediaStore.EXTRA_OUTPUT**不能正常工作并且有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T21:38:43.133

早期版本的 Android（如 2.3）有一个错误，会导致媒体播放器在拍摄电影后崩溃。重命名文件时引发 NullPointer 异常。解决方法是在启动记录器时不提供文件 Uri 并选择默认文件。我不确定该错误何时得到修复，但重命名的 hack 适用于最新版本。

感谢所有帮助，这就是我所做的：

```
 private static final int VIDEO_REQUEST = 43;    // some action code
    File videoFile = new File(dirName, fileName);
    Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
        intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(videoFile));
    startActivityForResult(intent, VIDEO_REQUEST);

// Then later...

protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
    super.onActivityResult(requestCode, resultCode, intent);
    if (resultCode == RESULT_OK) {
        if (requestCode == VIDEO_REQUEST  &&
                Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB) {
            try {  // cloodge
                // first get filename used by media recorder
                String[] projection = { MediaStore.Images.Media.DATA }; // columns
                Cursor cursor = managedQuery(intent.getData(), projection, null, null, null);
                int iColumn= cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
                cursor.moveToFirst();
                String tempFileName = cursor.getString(iColumn);
                File tempFile = new File(tempFileName);
                File videoFile = new File(dirName, fileName);
                if (!tempFile.renameTo(videoFile)) { // try to rename it
                    // rename did not work.  Copy and delete
                    FileInputStream in = new FileInputStream(tempFile);
                    FileOutputStream out = new FileOutputStream(videoFile);

                    byte[] buffer = new byte[1024]; // copy file to where we want it
                    int length;
                    while ((length = in.read(buffer)) > 0)
                        out.write(buffer, 0, length);
                    in.close();
                    out.close();

                    // now try to delete file created by the media recorder
                    tempFile.delete(); 
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        } // end of painful cloodge
        // video file is in videoFile, like it should be
        ...
    }
} 
```

# java - ProcessBuilder的实现设计

> ID：12458321
> 
> 赞同：2
> 
> 时间：2012-09-17T11:32:41.303
> 
> 标签：java, shell, runtime.exec, processbuilder

我想做以下事情：

将文件写入磁盘。然后运行一个shell命令。shell 命令读取/操作此文件通过网络发送请求，将响应写入另一个文件并返回和退出值。

为了运行 shell 命令，我阅读了有关 ProcessBuilder 和 Runtime.exec() 的信息。

究竟如何实现上述功能。负责的 webapp (struts) 将托管在 Jbossas 7.1 中。

我需要像 JCA 这样的东西吗，因为不推荐使用 io 和 EJB（尽管在我的情况下只使用一台服务器）。我可以简单地使用 POJO（Struts 动作）吗？我不确定如何处理多个线程，尽管 Struts 动作是“线程安全的”。

提前致谢，

如果我要使用线程池来并行处理多个请求，这将是使用 JCA 的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:40:52.233

You should take a look at the Apache Camel framework: http: //camel.apache.org/index.html. It is a very useful and easy to learn/use integration framework. It has all the components that you need:

*   File - [http://camel.apache.org/file2.html](http://camel.apache.org/file2.html) - producing/consuming files, also notifications e.g. file was created
*   Exec - [http://camel.apache.org/exec.html](http://camel.apache.org/exec.html) - execute system commands.
*   Parallel Processing - http: //camel.apache.org/parallel-processing-and-ordering.html - you can handle multiple requests.

I used it in a Java EE environment in one project (JBoss AS 7.1 + JSF2/Richfaces) and like it very much.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:42:51.383

我确认没有必要为 JCA 和 EJB 烦恼，因为在这种情况下两阶段提交事务传播听起来并不相关，而且绝对难以实现。

我建议您在 Java 中创建请求和响应（第一个为空）文件，`File.createTempFile`以避免线程之间的文件名冲突并使用`ProcessBuilder`.

从技术上讲，这种实现最困难的一点是释放资源的错误处理：临时文件、卡住的进程：

*   使用`try/finally`后用于删除文件
*   由于`File.deleteOnExit`与长时间运行的服务器无关，您必须执行常规作业来清理意外故障后留下的临时文件
*   计时器看门狗应该杀死脚本进程而不是延迟响应，有些可能由于任何原因而被卡住

顺便说一句，为了避免临时文件的麻烦并提高性能，如果您的代码在 Unix 系统上运行，我建议您使用`stdin/stdout`在进程之间传递请求和响应，并将您的脚本设计为尽可能少的文件访问。

但是您的系统可能会提出一些限制：创建新进程所需的资源和脚本的处理时间会导致您的操作系统中存在数千个进程，此外还有等待进程返回的 JBoss 线程（因此可用于处理简短的网络请求）。为了避免崩溃，看门狗应该在任何时候限制创建的进程的数量——并且这个阈值必须通过基准来定义。

# c# - 将 IDataErrorInfo 与嵌套对象一起使用

> ID：12458323
> 
> 赞同：5
> 
> 时间：2012-09-17T11:32:56.953
> 
> 标签：c#, mvvm, idataerrorinfo

我正在使用 MVVM，我想使用 IDataErrorInfo 来验证我的视图。

我当前的实现包括嵌套对象和不同的视图模型。例如，业务实体“客户”包含业务实体“地址”。我在我的视图中直接访问地址，例如“Customer.Address”。要验证地址中的更改，我必须在地址中实现 IDataErrorInfo。

我在不同的视图/视图模型中使用客户或地址。在不同的视图/视图模型中使用会导致不同的验证行为。因此，在实体本身中实现验证是不够的。

在 ViewModel 中公开我想直接更改的属性（创建直接设置/获取实体的新属性）似乎使 ViewModel 过于僵化。而且太大了。

我不能从基类继承，因为某些业务实体已经从其他对象派生（这是我无法改变的事实）。我目前看到的唯一选择是将 ViewModel 的接口添加到业务实体，并将业务实体中的 this[] 调用转发到该 ViewModel 接口。

是否有关于如何在 ViewModel 中验证这些嵌套对象的最佳实践？

**编辑：**验证我不认为业务对象中的验证是一个可用的想法的另一个原因是，我需要在我的 ViewModel 中使用不同的业务对象来验证视图和数据条目。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T13:56:46.480

我过去这样做的一种方法是[在 Model 上公开一个 ValidationDelegate](http://rachel53461.wordpress.com/2012/01/22/validating-business-rules-in-mvvm/)，它允许 ViewModel 将自己的验证代码附加到模型。

通常我这样做是因为我将`Model`层用作普通数据对象，所以我的模型只验证基本的东西，例如最大长度或非空值，而任何不特定于数据模型的高级验证都在 ViewModel 中完成。这通常包括诸如确保项目是唯一的，或者用户有权将值设置为特定范围的事情，甚至像您的情况一样，验证仅针对特定操作存在。

```
public class CustomerViewModel
{
    // Keeping these generic to reduce code here, but it
    // should include PropertyChange notification
    public AddressModel Address { get; set; }

    public CustomerViewModel()
    {
        Address = new AddressModel();
        Address.AddValidationDelegate(ValidateAddress);
    }

    // Validation Delegate to validate Adderess
    private string ValidateAddress(object sender, string propertyName)
    {
        // Do your ViewModel-specific validation here.
        // sender is your AddressModel and propertyName 
        // is the property on the address getting validated

        // For example:
        if (propertyName == "Street1" && string.IsNullOrEmpty(Address.Street1))
            return "Street1 cannot be empty";

        return null;
    }
} 
```

这是我通常用于验证委托的代码：

```
#region IDataErrorInfo & Validation Members

#region Validation Delegate

public delegate string ValidationDelegate(
    object sender, string propertyName);

private List<ValidationDelegate> _validationDelegates = 
    new List<ValidationDelegate>();

public void AddValidationDelegate(ValidationDelegate func)
{
    _validationDelegates.Add(func);
}

public void RemoveValidationDelegate(ValidationDelegate func)
{
    if (_validationDelegates.Contains(func))
        _validationDelegates.Remove(func);
}

#endregion // Validation Delegate

#region IDataErrorInfo for binding errors

string IDataErrorInfo.Error { get { return null; } }

string IDataErrorInfo.this[string propertyName]
{
    get { return this.GetValidationError(propertyName); }
}

public string GetValidationError(string propertyName)
{
    string s = null;

    foreach (var func in _validationDelegates)
    {
        s = func(this, propertyName);
        if (s != null)
            return s;
    }

    return s;
}

#endregion // IDataErrorInfo for binding errors

#endregion // IDataErrorInfo & Validation Members 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:40:59.323

> 在不同的视图/视图模型中使用会导致不同的验证行为。

因此，您有不同的视图模型。如果您不能从某些基本视图模型继承这些视图模型，请使用聚合：

```
public class Address {}

public class AddressViewModel1 : IDataErrorInfo
{
  private readonly Address address;
  // other stuff here
}

public class AddressViewModel2 : IDataErrorInfo
{
  private readonly Address address;
  // other stuff here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:50:30.483

对于每个不同的视图模型，使用依赖注入并向客户对象注入验证服务怎么样？

但我认为在你的视图模型中实现 idataerrorinfo 和所有需要的属性会更干净，但当然要多工作一次。

# spring - 如何从弹簧安全中排除控制器？

> ID：12458333
> 
> 赞同：2
> 
> 时间：2012-09-17T11:33:36.223
> 
> 标签：spring, spring-mvc, spring-security

我已经设置了运行良好的弹簧安全性，但是在我的一个控制器中，我不想将请求包含在 securityContextHolderAwareRequestWrapper 中......

如何将控制器从 Spring Security 中排除？

我尝试添加以下内容：

```
<security:intercept-url pattern="/nonsecureMenu**" filters="none" /> 
```

但它仍然不起作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T12:36:04.233

评论太长了，所以我在这里写下你应该怎么做。

正如@reagten 建议的那样，使用它（并`/`在路径的开头添加）：

```
<http pattern="/nonsecureMenu**" security="none" /> 
```

仅为此路径声明**单独** `<http>`的元素，即您将拥有多个`<http>`元素：

```
<http pattern="/resources/**" security="none" />
<http pattern="/nonsecureMenu**" security="none" />
<!-- plus for your actual config, for example: -->
<http auto-config='true'>
  <intercept-url pattern="/**" access="ROLE_USER" />
  <form-login login-page='/login'/>
</http> 
```

# php - Codeigniter - 会话似乎消失了？v2

> ID：12458339
> 
> 赞同：0
> 
> 时间：2012-09-17T11:34:02.507
> 
> 标签：php, codeigniter, session, frameworks

谁能从这个简单的登录脚本中解释为什么会话似乎会自行删除？不会在任何地方破坏会话，所以我不明白为什么会这样？

[http://pastebin.com/sunXhSEE](http://pastebin.com/sunXhSEE)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:10:11.513

CodeIgniter 默认不使用 $_SESSION PHP 变量，它实现了它自己的。这就是为什么 $this->session->all_userdata() 会正确返回所有数据，但 $_SESSION 不会返回任何相关的原因。

请参阅此处：[http](http://codeigniter.com/user_guide/libraries/sessions.html) ://codeigniter.com/user_guide/libraries/sessions.html注意：

> 注意：Session 类不使用原生 PHP 会话。它生成自己的会话数据，为开发人员提供更大的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:37:17.223

*   首先检查是否启用了会话；
*   检查 session_start();
*   通过直接回显 $_SESSION 来检查会话是否正确设置，而不是使用框架访问器。

# html - 特定项目（选项）HTML 中的列表框样式

> ID：12458341
> 
> 赞同：1
> 
> 时间：2012-09-17T11:34:18.637
> 
> 标签：html, css, combobox, listbox

我正在尝试做出这种行为。

当一个有一个列表框（或组合框）时，我的第一个元素（比如“选择一个”）应该有一个特定的样式。

使用此（测试）代码：

```
<style type="text/css">
 .testX {font-style: italic;}
</style>

(...)

<select name="name" id="id">

<option class="testeX" selected="selected" value="#">
    <p class="testX">Choose One</p>
</option>
<option value="TestValue">
    TestValue
</option> 
```

当我展开我的列表框时，我可以在 Firefox（但在 Chrome 中看不到）上看到这种行为，但是当我选择“选择一个”时，我的字段没有（斜体）样式。

我怎样才能做到这一点？是否可以仅使用 HTML、CSS 或我需要更多（如 jQuery）来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:39:23.013

尝试使用伪元素'first-child'

```
 <style type="text/css">
       select#id option:first-child {font-style: italic;}
 </style> 
```

并且段落标签不属于`<option>`标签内部，它们应该包含纯文本。

**但是标签的样式`<option>`是有限**的，并不是所有的浏览器都支持它。您可能对其他类型的样式（例如背景颜色）有更多的运气。`<select>`或者使用 javascript 和自定义 HTML 来模拟与常规框相同的行为

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T11:40:04.400

表单元素的样式是出了名的难，而且很多元素几乎不可能在浏览器和操作系统之间保持一致。我的方法一直是使用 javascript（通常是 jQuery）隐藏表单元素，并使用 div 和 spans 构造类似的东西。这样，就造型而言，天空是极限。

您需要问自己是否有100％的必要拥有这种不同的风格；偏离标准表单元素并不是很好的可用性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T11:46:15.203

从 HTML4 开始，an`OPTION`只能包含 PCDATA，即没有任何子元素的纯字符数据。字符将被解析（例如实体）。

[http://www.w3.org/TR/html401/interact/forms.html#edef-OPTION](http://www.w3.org/TR/html401/interact/forms.html#edef-OPTION)

从 HTML5 开始，在`OPTION`.

[http://dev.w3.org/html5/spec/the-option-element.html](http://dev.w3.org/html5/spec/the-option-element.html)

换句话说，您使用的是无效的 HTML，任何浏览器都很难解析。事实上，我不知道有哪个浏览器能够在`OPTION`-tag 中显示 HTML 元素。（……直到我读到这个问题……）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T11:41:11.980

使用这个 CSS

```
select { font-style: italic;   }

select option  {
  font-style: normal;  
}

select option:first-child {
  font-style: italic;  
} 
```

Example [jsFiddle](http://jsfiddle.net/DjxT2/)
但不幸的是，这种风格只适用于 Firefox

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-17T11:52:06.000

正如其他人已经指出的那样，标记是无效的，并且在浏览器之间获得一致的*原生*表单控件的规模介于非常困难和不可能之间。

在我看来，如果您不介意包含一个或多个库和/或插件的页面重量开销*并且*对非 JS 回退感到满意，那么您认为 JavaScript 解决方案可能是最省力和最安全的方法是正确的`<select>`看起来不那么漂亮。

在众多`<select>`可用的替代 jQuery 插件中，我强烈推荐[**Select 2 plugin**](http://ivaynberg.github.com/select2/)。它具有丰富的功能集，已经支持向控件添加*占位符文本*，您可以相应地设置样式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-17T12:07:44.890

斜体不适用于chrome和opera。请检查[http://www.electrictoolbox.com/style-select-optgroup-options-css/](http://www.electrictoolbox.com/style-select-optgroup-options-css/)

我们可以为选项提供任何设计。

```
<select name="name" id="id">
    <option style='font-style: italic; font-weight:bold;' selected="selected" value="#">
        <span>Choose One</span>
    </option>
    <optgroup label="Option group 1">
        <option value="TestValue">    TestValue</option>
        <option value="TestValue">    TestValue</option>
        <option value="TestValue">    TestValue</option>
    </optgroup>
</select> 
```

CSS：

```
select option {
    background: none repeat scroll 0 0 #E5E3E3;
    border: 1px dotted #CCCCCC;
    height: 15px;
    line-height: 15px;
    text-indent: 3px;
    text-transform: capitalize;
    z-index: -9999; 
}
optgroup { /* Change font style and text alignment */
    font-style:italic;
    text-align:right;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-17T11:36:32.570

并非所有浏览器都支持标签内的 HTML`<option>`标签。

# sql - 触发以停止将特定字段设置为 NULL（单行和多行更新）

> ID：12458348
> 
> 赞同：1
> 
> 时间：2012-09-17T11:34:48.857
> 
> 标签：sql, sql-server-2008, triggers, project-server

是否可以创建一个触发器来检查特定字段是否设置为 NULL（从单行或多行更新），如果是，则将该字段恢复为其初始值？

我在网站上搜索过，但没有找到符合我确切要求的任何内容。

一点背景：

我们有两个应用程序（一个时间管理 Web 应用程序和 microsoft 项目服务器）相互发送有关我们组织中资源的更新。当任一系统发生更改时，它会将更新发送到另一个系统。但是，某些字段仅存在于时间管理 Web 应用程序（表名`resource`）中，并且 MSP 服务器强制这些字段之一（字段名`GLMaskingValue`）进行`NULL`一些更新（据我所知，并非全部） .

我无法访问代码，只能访问 Web 应用程序数据库，而且我不想让整个更新语句失败（我认为我可以使用表约束来做到这一点） - 我只想在何时和如果有人试图将其更改为`NULL`.

我正在沿着触发器的路线前进，但可能有更好的方法来做到这一点 - 如果是这样，请赐教！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T11:40:03.317

像这样的东西：

```
CREATE TRIGGER trig_test
ON dbo.t
AFTER update
AS
update t
set t.x = d.x
from t as t
join deleted d 
on t.id = d.id -- use the primary key of the table instead of id
where t.x is null 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T12:04:21.537

如果只有更新是问题，是的，您可以使用“而不是更新”触发器强制执行此操作，需要注意的是您必须编写更新语句来应用更改：

```
create table data (id int not null, name varchar(50), postcode varchar(50), sex bit, primary key(id))
go
create trigger tg_data_before on data instead of update as 
begin
  set nocount on
  update data 
    set name = coalesce(c.name, b.name),
      postcode = coalesce(c.postcode, b.postcode),
      sex = coalesce(c.sex, b.sex)
  from data a
  join deleted b on a.id = b.id
  join inserted c on a.id = c.id
end
go

insert data values (1, 'sven', '1234', 0)
insert data values (2, 'lars', '2345', 0)
insert data values (3, 'foo', '3456', 1)

update data set name = null
update data set postcode = null where id = 1
update data set postcode = 'zoink' where id in (2,3)
update data set sex = 1-sex

select * from data

drop table data 
```

但我认为最好只使用“not null”并修复客户端代码，这显然是在做错事（明确地将一个你不想为空的字段清空，或者做一个无保护的插入/合并）：

```
create table data (id int not null, name varchar(50) not null, postcode varchar(50) not null, sex bit not null, primary key(id)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:05:03.150

在可以更正代码之前，这听起来是个不错的计划。这是一个多行多列触发器。这样做的好处是它只会在两列中的一列或两列发生更改时才执行更新。另请注意，它仅作用于先前值不为空的行/列。

```
CREATE TRIGGER tr_resource_nullcheck ON resource
FOR UPDATE
AS
SET NOCOUNT ON
IF (UPDATE(GLMaskingValue) OR UPDATE(Column2))
BEGIN
  update r
    set r.GLMaskingValue = isnull(r.GLMaskingValue, d.GLMaskingValue)
        r.column2 = isnull(r.column2, d.column2)

  from resource r
  join deleted d on d.resourceId = r.resourceId
  where (r.GLMaskingValue is null and d.GLMaskingValue is not null) 
  or (r.column2 is null and d.column2 is not null)
END 
```

# clojure - 尝试删除所有节点+rels 会抛出“预期在事务中但不是”

> ID：12458349
> 
> 赞同：2
> 
> 时间：2012-09-17T11:34:52.537
> 
> 标签：clojure, neo4j

我在 Clojure 中工作，针对使用 neocons 库的 neo4j 数据库。

我有一个测试夹具，它使用以下 Cypher 查询拆除每个单元测试后创建的节点和关系：

```
START n=node(*) MATCH n-[r?]-() DELETE n,r 
```

这在我的工作站上运行良好，但是我的 Travis CI 构建失败并显示“预期在事务中但不是” - 请参阅[http://travis-ci.org/#!/warrenseymour/workflow/jobs/2477506](http://travis-ci.org/#!/warrenseymour/workflow/jobs/2477506)

我在两个地方都使用相同版本的 neo4j，为什么一个抱怨（缺乏）交易而另一个却没有？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T08:40:22.253

沃伦，

我是 Neocons 的作者，也是 travis-ci.org 的核心团队成员之一。我尝试在作为我们生产映像的子集的本地 VM 中重现您的问题。使用 Neo4J Server 1.8.RC1，lein test 仅报告 1 次失败（在测试查找中）并且 Neo4j 没有 5xx 响应。

我尝试了 1 核和 4 核虚拟机以及 8 核物理机。

您可以使用我们用于开发 CI 环境的项目[Sous Chef以及我们](https://github.com/michaelklishin/sous-chef)[用于 JVM 语言的生产映像](http://files.travis-ci.org/boxes/provisioned/travis-jvm.box)（约 3 GB）进行调查。

请注意，Neo4J 不会在启动时启动。

为 Neo4J 提交一个问题，我们可以继续进行更详细的调查，这也是一个好主意。

希望这可以帮助。

# ios - 在 iOS 应用程序中处理主题标签的点击

> ID：12458354
> 
> 赞同：0
> 
> 时间：2012-09-17T11:35:11.717
> 
> 标签：ios, twitter, hashtag

我有一个关于在 iOS 中检测推特标签上的点击的问题。有人知道如何在IOS中处理它吗？

为了显示来自 twitter 的消息，我使用 uitextview。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-14T11:37:14.500

RayWenderlich 论坛上的人也推荐了 STTweetLabel。看看[http://www.raywenderlich.com/forums/viewtopic.php?t=8208](http://www.raywenderlich.com/forums/viewtopic.php?t=8208)

# mysql - 如何从具有字符串列的表中获取记录，其中字符串列的值以给定的子字符串开头？

> ID：12458355
> 
> 赞同：1
> 
> 时间：2012-09-17T11:35:21.807
> 
> 标签：mysql, select

示例 - 子字符串是`"ab"`And 如果内容是

```
abhi
babu
abdullah 
```

然后在运行查询后我应该只得到值

```
abhi 
abdullah 
```

即使值 ' `babu`' 包含子字符串`ab`

假设表名是`person`，列名是`name`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:36:48.487

您可以[`LIKE`](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html)像这样使用运算符：

```
SELECT * FROM person
WHERE name LIKE 'ab%' 
```

如果你`%`提前添加`ab`then`babu`也会出现结果，所以只添加`%`after `ab`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:37:31.193

使用 sql [LIKE](http://www.w3schools.com/sql/sql_like.asp)运算符

```
SELECT name FROM person WHERE name LIKE 'ab%' 
```

上面的查询返回所有以 开头的名称`ab`，如果您想获得像这样`hiabhi`使用 的名称

```
SELECT name FROM person WHERE name LIKE '%ab%' 
```

# iphone - 处理超高分辨率图像的最佳方法是什么？

> ID：12458356
> 
> 赞同：5
> 
> 时间：2012-09-17T11:35:24.787
> 
> 标签：iphone, ios, ios5, iphone-4, iphone-3gs

我正在开发一个应用程序，它需要使用分辨率高于 (2000 x 2000) 的图像来实现文本清晰度。

我有一个背景图像，我需要在其上显示具有相同分辨率的叠加图像。覆盖的数量是可变的，从 2 到 30。

使用 UIImage 加载图像时，每个像素需要 4 个字节，因此如果一张图像的分辨率为 3000x3000，则最多需要 34 MB 内存，2000 x 2000 需要 15 MB。

这就是问题出现的地方，应用程序在 3GS 上加载 4-5 张图片后崩溃，在 iPhone 4 上加载 11-13 张图片后崩溃。

叠加层需要准确地放置在背景图像上。它们就像我们在 Google 地图交通叠加中所拥有的一样。这并不排除平铺，但会使任务相对复杂。

我应该如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:55:35.040

当然，您不能一次将整个图像集加载到内存中。您只需要加载图像数据的可见部分，并应尽快卸载不可见部分。

如果您想在 QuartzCore 级别解决此问题，则有[`CATiledLayer`](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CATiledLayer_class/Introduction/Introduction.html)专门用于此目的的课程。

苹果参考：[https ://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CATiledLayer_class/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CATiledLayer_class/Introduction/Introduction.html)

苹果示例代码：[https ://developer.apple.com/library/mac/#samplecode/CALayerEssentials/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008029](https://developer.apple.com/library/mac/#samplecode/CALayerEssentials/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008029)

附加信息：[http ://red-glasses.com/index.php/tutorials/catiledlayer-how-to-use-it-how-it-works-what-it-does/](http://red-glasses.com/index.php/tutorials/catiledlayer-how-to-use-it-how-it-works-what-it-does/)

要使用该层，您需要将源图像拆分为多个图块。并在层需要时提供它们。（`drawLayer:inContext:`方法。）该方法将在非主线程上调用，因此不会阻塞用户界面。不要忘记释放不可见磁贴的图像以节省内存。

此外，您可以通过使用后台线程的动态资源加载的低级 OpenGL 代码来实现这一点。在这种情况下，您可以使用 PVRTC 有损内存压缩，这可以节省大量视频内存使用量，但这确实是一项痛苦且耗时的工作。我建议使用`CATiledLayer`. 这对于大多数情况来说已经足够了。

# jboss - jboss as 7 模块依赖浏览器工具

> ID：12458362
> 
> 赞同：2
> 
> 时间：2012-09-17T11:35:53.417
> 
> 标签：jboss, dependencies

有人知道一个工具，它支持将 jboss 浏览为 7 模块依赖图吗？

最好的问候哈迪亨内伯格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-10T23:23:49.640

jboss-modules 有内置的。

去 JBOSS_HOME 做

```
java -jar jboss-modules.jar -mp modules -deptree <name-of-the-module-you-are-interested-in> 
```

# byte - 将“空白字节”附加到二进制文件？

> ID：12458364
> 
> 赞同：-1
> 
> 时间：2012-09-17T11:36:10.930
> 
> 标签：byte, filesize

我想增加二进制文件的大小而不破坏它的工作方式。如果我正确阅读它，就会有诸如“空白字节”之类的东西，它们什么都不做，但仍然会增加文件大小。谁能告诉我它是如何完成的或我需要什么工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T22:10:13.873

我尝试使用十六进制编辑器编辑可执行文件，现在最常见的十六进制编辑器似乎可以选择插入所述空白字节。所以，是的，这解决了我的问题。

# c# - MVC 控制器未绑定 ViewModel

> ID：12458372
> 
> 赞同：3
> 
> 时间：2012-09-17T11:36:33.507
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-4

我希望你能帮助我，我对 MVC 和实体框架很陌生，并试图理解它。我正在使用 MVC4 和 EF5。

这是我正在尝试做的事情的概述......

我有两个实体，Site 和 SiteType。每个站点可以有多个站点类型，因此它们具有多对多关系。我通过创建 3 个表、Site、SiteType 和 SiteSiteType 来设置具有典型多对多关系的数据库。SiteSiteType 仅包含 2 列，即 SiteId 和 SiteType Id。

我更新了实体模型，它完美地为站点创建了这样的实体......

```
public partial class Site
{
    public Site()
    {
        this.SiteTypes = new HashSet<SiteType>();
    }

    public int Id { get; set; }
    public string Name { get; set; }
    public string Address { get; set; }

    public virtual ICollection<SiteType> SiteTypes { get; set; }
} 
```

这对于 SiteType

> ```
> public partial class SiteType
> {
>     public SiteType()
>     {
>         this.Sites = new HashSet<Site>();
>     }    
>     public int Id { get; set; }
>     public string Name { get; set; }    
>     public virtual ICollection<Site> Sites { get; set; }
> } 
> ```

现在我使用的是强类型视图，但是我没有使用 Site 作为类型，而是使用我创建的名为 SiteViewModel 的自定义 ViewModel，它看起来像这样......

> ```
> public class SiteViewModel
> {
>     public Site Site { get; set; }
>     public bool WasPosted { get; set; }
>     public IEnumerable<SiteType> AvailableSiteTypes { get; set; }
>     public IEnumerable<SiteType> SelectedSiteTypes { get; set; }
> } 
> ```

原因是我想使用 MVC 的 CheckBoxList 扩展，如此[处所述](http://www.codeproject.com/Articles/292050/CheckBoxList-For-a-missing-MVC-extension "这里")

现在，当我创建一个新站点并向其添加 SiteTypes 时，一切正常，但是当我尝试编辑现有记录时，我开始遇到问题。

这是我在控制器中的编辑 GET 方法....

```
 public ActionResult Edit(int id = 0)
    {
        Site site = _repository.GetSiteByID(id);
        if (site == null)
        {
            return HttpNotFound();
        }

        var model = new SiteViewModel();
        model.AvailableSiteTypes = _repository.GetSiteTypes();
        model.SelectedSiteTypes = site.SiteTypes;
        model.Site = site;

        return View(model);
    } 
```

而 post 方法最初看起来是这样的......

```
 [HttpPost]
    public ActionResult Edit(SiteViewModel siteViewModel, int[] siteTypes)
    {

        if (ModelState.IsValid)
        {
            _repository.UpdateSite(siteViewModel.Site, siteTypes);
            _repository.Save();
            return RedirectToAction("Index");
        }

        siteViewModel.AvailableSiteTypes = _repository.GetSiteTypes();
        List<SiteType> selectedSiteTypes = _repository.GetSiteTypes(siteTypes).ToList();
        if (selectedSiteTypes.Count > 0)
        {
            siteViewModel.SelectedSiteTypes = selectedSiteTypes;
        }
        return View(siteViewModel);

    } 
```

现在我遇到的问题是 siteViewModel.Site 从表单中正确填充了更新的数据，但是 Id 列被设置为“0”，即使它是现有记录而不是新记录。我已经尝试了一切，但我不知道为什么。我可以让它工作的唯一方法是接受一个“id”参数并手动将它设置为这样的站点对象......

```
HttpPost]
    public ActionResult Edit(int id, SiteViewModel siteViewModel, int[] siteTypes)
    {
        siteViewModel.Site.Id = id;
        ...... 
```

但与其他一切结合在一起的程度相比，它感觉真的很混乱。

这是唯一的方法吗？我错过了什么吗？

非常感谢您花时间阅读我的帖子。对不起，太长了，我不知道该怎么解释...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:53:13.220

将实际实体发送到您的视图从来都不是一个好主意，您的视图模型应该只获取向用户呈现视图所需的数据。如果您需要将有关每个视图的信息传递`Site`给视图，则创建一个单独的视图模型或 DTO 并传递它，例如

```
siteViewModel.Site = new SiteDto()
{
    Id = site.Id,
    Name = site.Name,
    ...
} 
```

实体具有隐藏的属性，用于将其映射回数据库中的记录，当您将实体传递到视图或从视图传递实体时，此信息通常会丢失。正确的方法是向视图发送它需要的所有数据，仅此而已。然后在您的`POST`方法中，重新拉出您的实体并应用视图模型中的更改。

如果您发现自己到处都在这样做，您可以使用[AutoMapper 。](https://github.com/AutoMapper/AutoMapper)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:43:57.253

您可能需要在编辑页面中添加 SiteId，看起来像

```
@Html.HiddenFor(model => model.Site.Id) 
```

然后整个模型绑定/MVC 框架应该工作并确保 id 被保留。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-27T06:24:43.087

遇到同样的问题，最终以 Model 的 ViewModel 引用名称结束，对于您的情况：

```
[HttpPost]
    public ActionResult Edit(SiteViewModel siteViewModel, int[] siteTypes)
{
...you controller code.
} 
```

将其更改为：

```
[HttpPost]
    public ActionResult Edit(SiteViewModel model, int[] siteTypes)
{
...you controller code.
} 
```

# php - 普通 PHP 中的单元测试

> ID：12458381
> 
> 赞同：3
> 
> 时间：2012-09-17T11:37:03.637
> 
> 标签：php, unit-testing

我很想知道我们如何在纯 PHP 中使用单元测试来测试我们的代码。

这是他们的任何指导方针。

以及当我们使用 MVC 架构创建网站时如何进行单元测试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T11:38:07.193

这个问题基本上只有一个答案：[PHPUnit](https://github.com/sebastianbergmann/phpunit)。

它是 PHP 中最大的测试框架。最佳文档、最多用户、最多功能、行业标准。您正在寻找的一切。手册在[这里](http://www.phpunit.de/manual/current/en/index.html)。

至于 MVC：编写可测试的代码与您正在编程的设计模式没有任何关系。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T11:41:07.143

您可以在没有任何框架的情况下编写单元测试，但是您会发现您自己编写了很多可以从[PHPUnit](https://github.com/sebastianbergmann/phpunit)或[EnhancePHP](http://www.enhance-php.com/)免费获得的概念。

特别是，该框架将具有允许您断言测试的助手，为您提供在测试中使用的假冒的助手（如果您使用 MVC 模式，则在您的情况下特别有用）以及运行和显示结果的方法。

如果您查看单元测试框架的源代码，您会看到所有这些帮助程序是如何工作的，并且最终学习框架比编写框架要快。

这是一个手动测试的示例 - 如果结果不正确或出现异常，我们将无法通过测试：

```
$passed = true;
try {
    $result = $target->addTwoNumbers(5, 2);
    $passed = 7 === $result;
} catch (Exception $e) { 
    $passed = false;
}

return $passed; 
```

当您使用框架时，这变得更具可读性：

```
$result = $target->addTwoNumbers(5, 2);
Assert::areIdentical(7, $result); 
```

在这两个示例中，我都省略了设置测试的代码，即创建`$target`，因为它不会为比较添加任何意义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T11:46:19.260

还有 SimpleTest ( [http://www.simpletest.org/](http://www.simpletest.org/) ) - 这是一个非常轻的。没有许多其他测试套件的包袱。

您还可以使用自动化工具，例如 Selenium，它本质上也模仿了用户坐着用鼠标浏览 - 显然您必须训练它并分配测试等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T11:50:53.317

当然，您可以使用 PHPUnit 或其他单元测试框架。我不喜欢在我的项目中添加大量额外代码的想法，所以我自己编写了一个单元测试器。

对于基本单元测试，您只需要 2 个 PHP 文件/类。一个执行实际测试，一个是单元测试的基类。

我写了一个带有代码的[博客](http://www.ganymedes.be/index/blog/3)来演示如何做到这一点。[可以在这里](http://unittester-online.example.ganymedes.be/)看到单元测试器的运行情况。

我的看法是，当 SO 出现这样的问题时，大多数答案是：不要自己使用 xxx。然而，这是有代价的：它会使你的代码膨胀，并使完成的项目变得更大、更难维护并且依赖于第三方代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-18T04:39:29.230

试试这个教程

[http://pear.php.net/manual/en/package.php.phpunit.intro.php](http://pear.php.net/manual/en/package.php.phpunit.intro.php)

最好是使用 PHPUnit 进行单元测试。

# java - 使用种子的 Java 随机数

> ID：12458383
> 
> 赞同：52
> 
> 时间：2012-09-17T11:37:15.390
> 
> 标签：java, random, seed

这是我使用种子作为参数生成随机数的代码：

```
double randomGenerator(long seed) {
    Random generator = new Random(seed);
    double num = generator.nextDouble() * (0.5);

    return num;
} 
```

每次我给一个种子并尝试生成 100 个数字时，它们都是一样的。
我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-09-17T11:38:56.580

如果你给的是相同的种子，那是正常的。这是允许测试的重要功能。

检查此项以了解伪随机生成和种子：

*[伪随机数发生器](http://en.wikipedia.org/wiki/Pseudorandom_number_generator)*

> 伪随机数生成器 (PRNG)，也称为确定性随机位生成器 DRBG，是一种用于生成近似随机数属性的数字序列的算法。该序列不是真正随机的，因为它**完全由一组相对较小的初始值决定，称为 PRNG 的状态，其中包括一个真正的随机种子。**

如果你想有不同的序列（不调整或调试算法时的常见情况），你应该调用零参数构造函数，它使用 nanoTime 来尝试每次获取不同的种子。这个`Random`实例当然应该保留在您的方法之外。

你的代码应该是这样的：

```
private Random generator = new Random();
double randomGenerator() {
    return generator.nextDouble()*0.5;
} 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-03-29T09:55:40.473

简单的方法是使用：

```
Random rand = new Random(System.currentTimeMillis()); 
```

`Random`这是生成数字的最佳方式。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-17T11:44:25.480

您不应该在方法范围内创建新的 Random 。使其成为类成员：

```
public class Foo {
   private Random random 

   public Foo() {
       this(System.currentTimeMillis());
   }

   public Foo(long seed) {
       this.random = new Random(seed);
   }

   public synchronized double getNext() {
        return generator.nextDouble();
   }
} 
```

这只是一个例子。我不认为`Random`以这种方式包装会增加任何价值。把它放在你正在使用它的班级中。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-17T11:38:47.513

这就是**Pseudo** -RNG 的原理。这些数字并不是真正随机的。它们是使用确定性算法生成的，但根据种子的不同，生成数字的顺序会有所不同。因为你总是使用相同的种子，所以你总是得到相同的序列。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-17T11:38:56.343

问题是您再次播种随机生成器。每次播种时，随机数生成器的初始状态都会被重置，并且您生成的第一个随机数将是初始状态之后的第一个随机数

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-23T10:02:24.373

如果您想使用一个种子生成多个数字，您可以执行以下操作：

```
public double[] GenerateNumbers(long seed, int amount) {
    double[] randomList = new double[amount];
    for (int i=0;i<amount;i++) {
        Random generator = new Random(seed);
        randomList[i] = Math.abs((double) (generator.nextLong() % 0.001) * 10000);
        seed--;
    }
    return randomList;
} 
```

如果您使用相同的种子，它将显示相同的列表。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-25T15:06:32.160

这里的几个示例创建了一个新`Random`实例，但这是不必要的。也没有理由`synchronized`像一种解决方案那样使用。相反，利用[`ThreadLocalRandom`](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadLocalRandom.html)类上的方法：

```
double randomGenerator() {
    return ThreadLocalRandom.current().nextDouble(0.5);
} 
```

# cocos2d-iphone - cocos2D xcode中如何提高sprite的速度？

> ID：12458386
> 
> 赞同：0
> 
> 时间：2012-09-17T11:37:18.050
> 
> 标签：cocos2d-iphone

我正在研究 cocos2D。我使用 CCSpeed 来提高精灵的速度，但它不起作用。如何动态改变精灵的速度？谁能提供一些有关此的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:47:11.400

这取决于你想做什么。CCSpeed 类似于“掩护”其他动作。您可以更改移动、旋转、缩放等的速度。如果您想移动某个节点（在您的情况下为精灵），请使用 CCMoveTo 或 CCMoveBy 动作。

# java - 通过 URL 数据嵌入 Java 小程序

> ID：12458390
> 
> 赞同：11
> 
> 时间：2012-09-17T11:37:29.760
> 
> 标签：java, html, applet, base64

我正在尝试探索嵌入 HTML Java 小程序的 URL 数据功能。

[用于实例化 java 小程序1](http://www.w3.org/TR/1999/REC-html401-19991224/struct/objects.html)的 HTML 标记的文档不排除此选项，但我似乎无法做到这一点。

我使用（对象和小程序）有不同的 HTML 标记值变体，我认为接近我的目标的是：

```
<object type="application/x-java-applet" width="100" height="100">
  <param name="archive" value="data:application/java-archive;base64,BASE64_OF_JAR"/>
  <param name="code" value="test.class"/>
  <h1>not working</h1>
</object> 
```

这种变化会导致带有文本“名称”的 IlegalArgumentException。我点击浏览器上的错误图标来检查这个。在 Java 控制台上，整个堆栈跟踪是：

```
java.net.MalformedURLException: unknown protocol: data
        at java.net.URL.<init>(Unknown Source)
        at java.net.URL.<init>(Unknown Source)
        at sun.plugin.util.ProgressMonitorAdapter.setProgressFilter(Unknown Source)
        at sun.plugin2.applet.Plugin2Manager.setupProgress(Unknown Source)
        at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source) 
```

**有没有人知道如何做到这一点，或者如果它不可能？**

[PS：这里](http://docs.oracle.com/javase/tutorial/deployment/deploymentInDepth/embeddingJNLPFileInWebPage.html)有一个 Oracle 如何在 HTML 中嵌入 JNLP 的示例

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T18:30:31.267

OBJECT 元素的[HTML4 规范](http://www.w3.org/TR/html4/struct/objects.html#h-13.3.1)允许通过[URL DATA](http://en.wikipedia.org/wiki/Data_URI_scheme)嵌入内联数据，Oracle的 Applet 实例化[文档也允许这样做。](http://docs.oracle.com/javase/6/docs/technotes/guides/deployment/deployment-guide/applet.html)执行的测试显示了 Java 浏览器插件（来自 Oracle），以及来自[Java SE 6](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/)的可用源代码，表明实现不支持它。

在这种情况下，浏览器是否支持似乎并不重要，因为 Object/Applet HTML 元素中资源引用的资源处理是由浏览器插件执行的。

另一种方法是使用applet 反序列化，通过URL DATA 序列化，使用[APPLET 元素](http://www.w3.org/TR/html4/struct/objects.html#h-13.4)的OBJECT 属性。正如 HTML4 规范中提到的，没有对 APPLET 和 OBJECT 属性的积极支持，而且 JRE 似乎也不支持从 URL DATA 反序列化对象。

简而言之，JRE 不支持 CODE、OBJECT 和 ARCHIVE HTML 属性中的 base64 反序列化。

还有一个关于 JRE1.4.1 中的 URL DATA 支持的 BUG 未实现[Bug ID: 4756961](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4756961)。

我在 64 位 Windows 机器上使用 JRE7 的测试结果如下：

*   通过 URL DATA 将 JAR 传递给 ARCHIVE 属性会导致 Applet2Manager.loadJarFiles() 中的 IllegalArgumentException；
*   通过 URL DATA 向 CODE 属性传递一个类会导致 Applet2ClassLoader.findClass() 中的 ClassNotFoundException；
*   通过 URL DATA 将序列化小程序传递给 OBJECT 属性会导致 Plugin2ClassLoader.getResourceAsResource() 中的 FileNotFoundException。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T01:38:42.423

即使 HTML 标准允许，JRE 通常也不理解 base64 编码数据。

# c - 如何使用“\\”或“\”拆分字符串？

> ID：12458399
> 
> 赞同：0
> 
> 时间：2012-09-17T11:38:15.787
> 
> 标签：c, string

我有这个字符串： `char *path = " one\\\two\\\five\\\six";`

当每个单元格都是字符串时，我想将它分成一个数组。我正在使用`strtok`，购买我的问题是计算为数组分配多少空间。

我正在这样做：

```
for ( i = 0 ; i < strlen(path) ; i++)
{
   if (path[i] == '\'  && path[i+1] == '\') /*doesn't work! :( */
      counter++
} 
```

比较器行不工作......我也试过写：“\”但它也不起作用。怎么了？

编辑我正在尝试使用 strtok 并且它变得凌乱:(

```
 char           seps[]      =   "\\";
     char           *elemName   =   NULL;

 elemName = strtok( path, seps );

 while( elemName != NULL )
     {
          /* While there are tokens in "string" */
         /*copy the elemName*/
         stringArr[runner] = strdup(elemName);
         /* Get next token: */
          elemName = strtok( NULL, seps );
     }
 printf("printing the strings!!!!\n");
 for ( i = 0 ; i < arr_size ; i++)
 {
     printf (" %s \n " , stringArr[i]);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:40:22.707

你需要写`'\\'`（或数字 92，因为它是`\`ASCII 值）。`\`是一个转义字符，如果你想让它包含在字符串中，你需要自己转义它。

解释：`\(whatever)`在编译阶段被翻译成一个字符。（例如，`\n`-> ASCII 值为 0x0A 的字符）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:48:48.200

请记住，`\`字符串或字符文字中的字符是*转义*字符（如 Yossarian 的回答中所述），这意味着即使您有一个包含编译器的字符串文字，也会将其转换为实际字符串中`\\`的单个字符。`\`

因此，如果您在代码中具有：

```
char *path = " one\\two\\five\\six" 
```

如果您将其打印出来（使用 eg `printf`），您将看到它：

```
一\二\五\六

```

这意味着您的逻辑是错误的，并且您不必检查*两个*反斜杠，这也意味着您不必担心超出字符串结尾的阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T11:41:11.090

您必须转义斜杠：`'\\'`代表反斜杠字符`\`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T11:42:24.953

像这样声明的字符串：

```
char * path = "one\\two" 
```

有 7(+1) 个字符，'o' 'n' 'e' '\' 't' 'w' 'o' ('\0')。那是因为您必须转义单个反斜杠。所以只使用这个：

```
if ( path[i] == '\\' ) {
  counter++;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T11:52:00.960

使用 '\' 在 "\" 上拆分拆分，因为使用单个 "\" 将不起作用，因为 "\" 是转义字符。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T12:07:40.473

对于您的分配问题：您应该只为以 NULL 结尾的指向字符串的指针数组分配内存。

因此，遍历字符串，并计算分隔符。您需要分配 2 + 计数。还有一个字符串，然后是分隔符，另外还有一个终止 NULL 指针。

```
char **strv = malloc( (2 + count) * sizeof( char*) ); 
```

下一步是再次遍历字符串，并在刚刚分配的数组中设置指针。就像是：

```
strv[ i++ ] = string;

for ( pstr = string; *pstr != '\0'; pstr++ ){
    if( *pstr == delimiter ) {
        *pstr = '\0';
        strv[ i++ ] = pstr + 1;
    }
}
strv[ i ] = NULL; 
```

（代码修改原始字符串。）记住释放字符串和分配的指针数组。

我假设 '\\' 是一个转义字符，后跟反斜杠。'\\' 因此只是一个字符。确保代码的计数部分不会计算两次。

-Øystein

# java - 在java swing中找到下一个出现的树节点

> ID：12458403
> 
> 赞同：1
> 
> 时间：2012-09-17T11:38:21.760
> 
> 标签：java, swing, jtree

我有一个jtree。我已经编写了代码以在单击搜索按钮时搜索树中的给定节点，现在我必须通过再次单击该按钮来搜索下一个出现是否存在？你能帮我吗？搜索按钮的代码是

```
 m_searchButton.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent e) {
    DefaultMutableTreeNode node = searchNode(m_searchText.getText());
    if (node != null) {
      TreeNode[] nodes = m_model.getPathToRoot(node);
      TreePath path = new TreePath(nodes);
      m_tree.scrollPathToVisible(path);
      m_tree.setSelectionPath(path);
    } else {
      System.out.println("Node with string " + m_searchText.getText() + " not found");
    }
} 
```

});

搜索方法的代码是

```
public DefaultMutableTreeNode searchNode(String nodeStr) {
DefaultMutableTreeNode node = null;
Enumeration e = m_rootNode.breadthFirstEnumeration();
while (e.hasMoreElements()) {
  node = (DefaultMutableTreeNode) e.nextElement();
  if (nodeStr.equals(node.getUserObject().toString())) {
    return node;
  }
}
return null; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:51:44.813

不是只返回一个节点，而是返回一个找到的节点列表。

```
public List<DefaultMutableTreeNode> searchNode(String nodeStr) {
DefaultMutableTreeNode node = null;
Enumeration e = m_rootNode.breadthFirstEnumeration();
List<DefaultMutableTreeNode> list = new ArrayList<DefaultMutableTreeNode>();
while (e.hasMoreElements()) {
  node = (DefaultMutableTreeNode) e.nextElement();
  if (nodeStr.equals(node.getUserObject().toString())) {
    list.add(node);
  }
}
return list;
} 
```

自己做按钮的逻辑`ActionListener`，这并不难。

添加节点列表作为您的类成员，当您单击按钮时检查它是否为空，如果是，则检索列表，获取第一个节点；用它做任何你想做的事情并将其从列表中删除。当您到达最后一个元素时，将列表再次设置为空。

# ios - MapKit 注释覆盖顺序

> ID：12458405
> 
> 赞同：2
> 
> 时间：2012-09-17T11:38:25.097
> 
> 标签：ios, mapkit, mkannotation

我正在尝试以特定顺序显示我使用 MapKit 加载的注释。基本上我有一个大约 50 个引脚中的一个稍微覆盖另一个引脚，我想把那个被遮住的引脚带到前面。

据我所见，更改注释的顺序没有任何作用，如果有意义的话，它似乎从左到右显示注释，最远的屏幕右侧显示在前景中。关闭放置动画也没有什么区别。

任何人都知道一种方法来重新定义注释出现的方式？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:02:48.237

我使用这种方法修复了它，并指定了哪些引脚要带到前台：

```
- (void) mapView:(MKMapView *)aMapView didAddAnnotationViews:(NSArray *)views
{
for (MKPinAnnotationView *view in views)
    {
        //Bring red and purple pins to front (Foreground)
        if (view.annotation == myAnnotation31 || view.annotation == myAnnotation5 || view.annotation == myAnnotation17)
        {
            [view bringSubviewToFront:view];
        }
        else
        {
            [[view superview] sendSubviewToBack:view];
        }
    }
} 
```

# c# - Nhibernate 无法将新项目保存到 postgresql 数据库

> ID：12458410
> 
> 赞同：-1
> 
> 时间：2012-09-17T11:38:46.513
> 
> 标签：c#, linq, nhibernate, postgresql, linq-to-nhibernate

我有一个类问题，应该：发出几张发票，显示/更新进度条并将一些值保存到休眠类。下面的代码显示了调用 WyemitujFakture 并显示进度条窗口的函数。

```
 private void BtOK_Click(object sender, EventArgs e)
              {
                lista.Add(2);
                lista.Add(8);
                liczbaWygenerowach = 0;
                ilosc_zrobionych = 0;
                fpb = new FrmProgressBar("Emisja faktur potwierdzonych, proszę czekać...");
                fpb.Show();
                Application.DoEvents();
                WyemitujFakture(lista);
                fpb.Close();
              } 
```

Windows 窗体显示进度条并生成发票，但无法保存 nHibernate 类的值。它看起来像线条： fs.Save(); 和 Session.Flush(); 不工作。你知道如何解决这个问题吗？

```
private void WyemitujFakture(List<int> lista)
 {
 foreach (int knh_id in lista)
  {
try
{
    if (luk.Count > 0)
    {
        FakturySprzedazy fs = new FakturySprzedazy();
        fs.FKS_AKCYZA = false;
        fs.FKS_CZY_KLON = false;
        fs.FKS_DATA_DOW_KS = Convert.ToDateTime(MTBDataZapisuDoFK.Text);
        fs.FKS_DATA_FAKTURY = Convert.ToDateTime(MTBDataFaktury.Text);
        fs.FKS_DATA_SPRZEDAZY = Convert.ToDateTime(MTBDataSprzedazy.Text);
        fs.Save();
        Session.Flush();
        liczbaWygenerowach++;
    }

}
catch (Exception ex)
{
    MessageBox.Show("Nie mozna wyemitowac faktury dla kontrahenta o id = " + knh_id.ToString() + " " + ex.Message);
}
ilosc_zrobionych++;

fpb.PBStan.Value = (int)((100 * ilosc_zrobionych) / liczbaKontrahentow);
Application.DoEvents();
 }
 } 
```

非常感谢您提前提供帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:32:46.493

亲爱的克雷格·林格，

感谢您的快速反应。我没有收到任何错误消息，并且我有 9,1 版的 postgresql。

我找到了解决方案:)

函数“WyemitujFakture”在线程中，因此它无法访问在主线程中创建的 SessionScope 对象。我在函数 WyemitujFakture 中添加了 4 行：

```
SessionScope session2 = new SessionScope(FlushAction.Never);
                    fs.Save();
                    session2.Flush();
if (session2 != null) session2.Dispose(); 
```

以上4行已解决问题。下面我附上了正常工作的整个功能：

```
private void WyemitujFakture(List<int> lista)
{
foreach (int knh_id in lista)
{
 try
{
if (luk.Count > 0)
{
    FakturySprzedazy fs = new FakturySprzedazy();
    fs.FKS_AKCYZA = false;
    fs.FKS_CZY_KLON = false;
    fs.FKS_DATA_DOW_KS = Convert.ToDateTime(MTBDataZapisuDoFK.Text);
    fs.FKS_DATA_FAKTURY = Convert.ToDateTime(MTBDataFaktury.Text);
    fs.FKS_DATA_SPRZEDAZY = Convert.ToDateTime(MTBDataSprzedazy.Text);
    SessionScope session2 = new SessionScope(FlushAction.Never);
                    fs.Save();
                    session2.Flush();
   session2.Flush();

   if (session2 != null) session2.Dispose();
   Session.Flush();
    liczbaWygenerowach++;
}

}
catch (Exception ex)
{
MessageBox.Show("Nie mozna wyemitowac faktury dla kontrahenta o id = " + knh_id.ToString() + " " + ex.Message);
}
ilosc_zrobionych++;

fpb.PBStan.Value = (int)((100 * ilosc_zrobionych) / liczbaKontrahentow);
Application.DoEvents();
}
} 
```

感谢您的参与！！！！

最好的祝福！！！！

# delphi - 可编辑的 DBGrid？

> ID：12458412
> 
> 赞同：0
> 
> 时间：2012-09-17T11:38:54.130
> 
> 标签：delphi, dbgrid

我是 Delphi 的初学者，我需要帮助解决以下问题。我必须在我的表单上实现一个可编辑的 DBGrid。DBGrid 显示连接 3 个表的查询的结果。我设法使 DBGrid 可编辑，但编辑对数据库没有影响。我可以在 DBGrid 中插入、编辑或删除行，但这些更改不会保存到数据库中。我有以下设置：

```
Query2.DatabaseName=Test
Query2.SQL=SELECT cd.hourstart, cd.hourfinish, o.objname, cd."work", cd.worktime  
           FROM Card c JOIN CardDetail cd ON c.N=cd.card  
           JOIN objects o ON cd.project=o.N  
           WHERE c.worker=5 AND c.data=CONVERT(DATE, GETDATE())
Query2.UpdateObject=UpdateSQL2  
Query2.CachedUpdates=True  
Query2.RequestLive=True

UpdateSQL2.DeleteSQL=delete from CardDetail  
                     where hourstart = :OLD_houerstart and  
                     hourfinish = :OLD_houerfinish and  
                     work = :OLD_work and  
                     worktime = :OLD_worktime
UpdateSQL2.InsertSQL=...  
UpdateSQL2.ModifySQL=...  

DataSource2.DataSet=Query2  
DBGrid2.DataSource=DataSource2 
```

我可能错过了一些东西，但我不知道是什么。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:30:55.420

```
// Have a look at the below code, it uses an AdoCommand
procedure DoSomething(DataSet: TDataSet);
var
  ADOCommand : TADOCommand;
begin
  ADOCommand:=TADOCommand.Create(nil);
  try
  try
    ADOCommand.Connection:=Conn;
    ADOCommand.Parameters.Clear;
    Conn.BeginTrans;
    if dataset.State = dsinsert then
    begin
      ADOCommand.CommandText := //Your insert statement
      ADOCommand.ParamCheck:=False;
      ADOCommand.Execute;
    end
    else
    if DataSet.State = dsEdit then
    begin
      ADOCommand.CommandText := //Your edit statement
      ADOCommand.ParamCheck:=False;
      ADOCommand.Execute;
    end
    else
    Begin
      ADOCommand.CommandText := //Your delete statement
      ADOCommand.ParamCheck:=False;
      ADOCommand.Execute;
    End;
    Conn.CommitTrans;
  except
    on E : Exception do
    begin
      Conn.RollbackTrans;
      MessageDlg('An exception occured, Error Class: ' + E.ClassName         +#13+                      'ErrorMessage: '+ E.Message , mtError, [mbOK], 0);
      Abort;
    end;
  end;
  finally
    ADOCommand.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:01:06.553

据称您需要几个 UpdateSQL 对象，每个表一个 [http://docwiki.embarcadero.com/RADStudio/XE3/en/Using_Multiple_Update_Objects_Index](http://docwiki.embarcadero.com/RADStudio/XE3/en/Using_Multiple_Update_Objects_Index)

这些对象中的每一个都应该具有绑定到它们的基本 TDataSet 以引用 vanilla 数据。 [http://docwiki.embarcadero.com/Libraries/en/Bde.DBTables.TDataSetUpdateObject.DataSet](http://docwiki.embarcadero.com/Libraries/en/Bde.DBTables.TDataSetUpdateObject.DataSet)

据称，应以正确的顺序在不同的对象上调用 ApplyUpdates/Commit/CommitUpdates。 [http://docwiki.embarcadero.com/RADStudio/en/Applying_Cached_Updates_with_Dataset_Component_Methods](http://docwiki.embarcadero.com/RADStudio/en/Applying_Cached_Updates_with_Dataset_Component_Methods)

PS。BDE 已被弃用，并且与最近的 Windows 和最近的数据库服务器不兼容。

# jquery - 如何通过 id 选择 td

> ID：12458425
> 
> 赞同：0
> 
> 时间：2012-09-17T11:39:33.067
> 
> 标签：jquery, html, jquery-selectors, html-table

我正在尝试运行以下代码，但似乎没有正确选择 td by id：

```
var table = $('<table/>').attr('cellspacing', '2px');
for (var r = 0; r < length; r++) {
    var trow = $("<tr/>");
    for (var c = 0; c < length; c++) {
        var cellText = $('<div/>').html(texts[r][c]).text();
        $("<td/>").addClass("cell").attr('id', 'td' + r + c).text(cellText).appendTo(trow);
    }
    trow.appendTo(table);
}
$('body').append(table);
alert($("#td00").text()); 
```

尽管 texts 数组包含数据，但最终的警报是空的。选择 td / 提取文本的正确方法是什么？我需要它，因为我不想将 2 的行跨度添加到某些 td 但似乎无法正确选择它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:51:39.307

```
1.check that texts[r][c] is having the data and length is define before going to use
2\. If you run the below code then it will work  
var length = 2;
        var table = $('<table/>').attr('cellspacing', '2px');
        for (var r = 0; r < length; r++) {
            var trow = $("<tr/>");
            for (var c = 0; c < length; c++) {
                var cellText = $('<div/>').html("asd").text();
                $("<td/>").addClass("cell").attr('id', 'td' + r + c).text(cellText).appendTo(trow);
            }
            trow.appendTo(table);
        }
        $('body').append(table);
        alert($("#td00").text());
        }); 
```

# php - 从崩溃xampp备份mysql？

> ID：12458434
> 
> 赞同：0
> 
> 时间：2012-09-17T11:40:09.047
> 
> 标签：php, mysql

我有一个问题。在我的本地我安装了 xampp。突然它崩溃了，我需要我本地mysql的所有数据库。

那么有什么方法可以获取所有数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:58:19.703

您可以从数据文件夹中复制数据库文件夹并删除 xampp 然后再次安装然后对于您的 innodb 数据库，您需要通过从数据文件夹中删除 ib_logfile0、ib_logfile1 文件来重建 mysql 日志文件并将 innodb_log_file_size = 170M 在 my.ini 文件中然后启动mysql，它将重建日志文件

[你可以在这里](https://dba.stackexchange.com/questions/3437/lost-tables-in-drupal-site-database)看到我关于同样问题的问题

**注意：**请记住在卸载 xampp 之前备份 htdocs 文件夹中的所有文件和文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:43:31.743

您应该能够直接复制包含数据库的文件夹并尝试在另一个 XAMPP 实例中打开它们

# java - 使用 ObjectInputStream 等待来自套接字的数据

> ID：12458436
> 
> 赞同：0
> 
> 时间：2012-09-17T11:40:18.550
> 
> 标签：java, sockets, casting, streaming

我正在以一种奇怪的方式等待流上的数据......因为我认为每次流尝试时抛出异常`readObject()`并不是一个好主意。这就是为什么我每 10 毫秒使用`PushBackInputStream`并从该流中读取一个。`byte`

```
@Override
public void run() {
try {
    ObjectOutputStream oos = new ObjectOutputStream(new BufferedOutputStream(
        clientSocket.getOutputStream()));
    oos.flush();
    ObjectInputStream ois = new ObjectInputStream(clientSocket.getInputStream());
    PushbackInputStream pis = new PushbackInputStream(clientSocket.getInputStream());
    while (true) {
    int tempByte = -1;
    if ((tempByte = pis.read()) == -1) {
        sleep(10);
    } else {
        pis.unread(tempByte);
        ArrayList<Object> arrList = (ArrayList<Object>) ois.readObject();
        int command = (Integer) arrList.get(0);
        if (command == CommandDescriptor.ADD_STRING.getCode()) {
        String tempStr = (String) arrList.get(1);
        boolean result = Server.colleciton.add(tempStr);
        if (result) {
            oos.writeInt(1);
            oos.flush();
        } else {
            oos.writeInt(0);
            oos.flush();
        }
        } else if (command == CommandDescriptor.REMOVE_STRING.getCode()) {
        ... 
```

我对流做错了什么......我得到了一个例外：

```
Exception in thread "Thread-0" java.lang.ClassCastException: java.io.ObjectStreamClass cannot be cast to java.util.ArrayList
at com.rizhov.main.ClientHandler.run(ClientHandler.java:39) 
```

在代码的那部分：

```
ArrayList<Object> arrList = (ArrayList<Object>) ois.readObject(); 
```

我究竟做错了什么？有没有更好的解决方案来等待数据。

更新：

```
ArrayList<Object> arrList = null;
    for (;;) {
        try {
        arrList = ((ArrayList<Object>) ois.readObject());
        break;
        } catch (Exception e) {

        }
    }
    int command = (Integer) arrList.get(0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T23:02:35.970

没有必要偷看和睡觉。这完全浪费了您的时间和精力以及 CPU 的时间和空间。

没有数据时，所有 Java 流都会阻塞。它们也阻塞了完全正确的时间，而不是一次 10 毫秒或其他任何时间，并且不会像你正在做的那样在旋转中浪费 CPU 周期。

你不必以任何形式或形式自己做任何事情。只要打电话`readObject()`。

并且永远不要忽略`IOException`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:45:34.190

您只能包装一次 Stream。如果你多次包装它，你更有可能感到困惑而不是它有用。

一旦流关闭，它将不会重新打开，因此读取字符以检查流是否已完成并丢弃它不是很有用。当操作无论如何都会阻塞时休眠也不是很有用。

我不会使用代码，而是`Integer`使用枚举值。这将更干净，您将能够使用 switch 语句。

# android - 如何更新传入消息的自定义列表视图..？

> ID：12458439
> 
> 赞同：0
> 
> 时间：2012-09-17T11:40:28.653
> 
> 标签：android, listview, broadcastreceiver

目前正在开展一个项目，其中存储和显示来自特定人的短信。我正在使用自定义列表视图来显示存储的消息。直到这部分我的代码都很好。但是当活动在前台时，当有新消息到达时，我需要更新我的列表视图。不幸的是，列表视图仅在活动再次进入 onCreate() 方法时更新新消息。如果它在前台，我需要更新列表视图。有任何想法吗.....？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:43:25.390

将刷新代码保存在 onResume() 中，而不是将其放入 onCreate()。每次收到新消息时调用 adapter.notifyDataSetChanged() 方法来更新布局

# python - 我可以在 y 系列中输入一个值以防止 matplotlib 为该 x 值绘制一个值吗？

> ID：12458442
> 
> 赞同：1
> 
> 时间：2012-09-17T11:40:44.330
> 
> 标签：python, matplotlib

我有大约 15 个系列，我希望针对一系列 X 值散点图。

但是，对于我系列中的某些值，我不希望绘制任何内容。是否有一个值可以用作虚拟对象，以便系列长度相同，但 matplotlib 不会绘制该点？

例如，如果我有`[1,2,3,4,5,6,7,8,9]`作为我的 x 轴，并且我在 Y 轴上有一个系列`['a', 'b', 'c', 'd', 'e', foo, 'g','h','i']`并且我不想针对 6 绘制 foo，我想将 foo 替换为一些不会被绘制的值。

我应该指出我的 x 和 y 值是日期时间。我没想到这是必要的信息，但似乎 NaN 可用于绘制浮点数，但不适用于日期时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:26:02.853

`scatter`将忽略该值`numpy.nan`（“不是数字”）。

```
>>> import matplotlib.pyplot as plt
>>> from numpy import nan
>>> x = range(5)
>>> y = [10, nan, 15, 14, 12]
>>> plt.scatter(x, y)
>>> plt.show() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:45:37.983

您可以使用`None`：

```
>>> import matplotlib.pyplot as plt
>>> plt.plot( [1,2,None,4,5],[1.1,2.2,3.3,4.4,5.5],'ro' )
[<matplotlib.lines.Line2D object at 0x29f6d50>]
>>> plt.show()
>>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:22:37.223

所以为了解决这个问题，我使用 Nones 作为虚拟值，并创建

```
def find_indices(haystack, needle):
  return [i for i,x in enumerate(haystack) if needle == x]

def remove_at(xs, indices):
  return [x for i,x in enumerate(xs) if i not in indices] 
```

进而

```
nones_at = find_indices(y_values, None)
x_values = remove_at(x_axis, nones_at)
y_values = remove_at(y_values, nones_at)
pyplot.plot(x_values, y_values) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T02:57:23.783

如果您调用`plot_date`并传入`visible=False`，它将设置轴，就像绘制了系列一样，但会隐藏绘图，因此数据点不会显示。

如果有兴趣，您可以在`multi_plot_data_with_dates` [此处](https://github.com/cperler/trading/blob/master/plot.py)查看该方法 ——我相信我遇到了与解释相同的问题，并且此实现似乎可以解决问题。

# javascript - 在 IIS7 上启用跨域资源共享

> ID：12458444
> 
> 赞同：97
> 
> 时间：2012-09-17T11:40:53.940
> 
> 标签：javascript, iis-7, xmlhttprequest, cors

我最近遇到了将 Javascript 请求发布到另一个域。默认情况下，不允许将 XHR 发布到其他域。

按照[http://enable-cors.org/](http://enable-cors.org/)的说明，我在另一个域上启用了此功能。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
 <system.webServer>
  <httpProtocol>
    <customHeaders>
      <add name="Access-Control-Allow-Origin" value="*" />
      <add name="Access-Control-Allow-Methods" value="GET,PUT,POST,DELETE,OPTIONS" />
      <add name="Access-Control-Allow-Headers" value="Content-Type" />
    </customHeaders>
  </httpProtocol>
 </system.webServer>
</configuration> 
```

![在此处输入图像描述](../Images/f7cd485d7fd646c18fde69f258b9f8e5.png)

现在一切正常，但是在发回正常工作的 200 响应之前，它仍然返回 405 响应。

```
Request URL:http://testapi.nottherealsite.com/api/Reporting/RunReport
Request Method:OPTIONS
Status Code:405 Method Not Allowed
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-GB,en-US;q=0.8,en;q=0.6
Access-Control-Request-Headers:origin, content-type, accept
Access-Control-Request-Method:POST
Connection:keep-alive
Host:testapi.nottherealsite.com
Origin:http://test.nottherealsite.com
Referer:http://test.nottherealsite.com/Reporting
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1
Response Headersview source
Access-Control-Allow-Headers:Content-Type
Access-Control-Allow-Methods:GET,PUT,POST,DELETE,OPTIONS
Access-Control-Allow-Origin:*
Allow:POST
Cache-Control:private
Content-Length:1565
Content-Type:text/html; charset=utf-8
Date:Tue, 18 Sep 2012 14:26:06 GMT
Server:Microsoft-IIS/7.5
X-AspNet-Version:4.0.30319
X-Powered-By:ASP.NET 
```

更新：2014 年 3 月 2 日

MSDN 杂志上有一篇最近更新的文章。详细介绍 ASP.NET Web API 2 中的 CORS 支持。

[http://msdn.microsoft.com/en-us/magazine/dn532203.aspx](http://msdn.microsoft.com/en-us/magazine/dn532203.aspx)

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-01-31T16:55:50.763

这很可能是 IIS 7“处理”HTTP OPTIONS 响应而不是您的应用程序指定它的情况。为了确定这一点，在 IIS7 中，

1.  转到您站点的处理程序映射。

2.  向下滚动到“OPTIONSVerbHandler”。

3.  将“协议支持模块”更改为“IsapiHandler”

4.  设置可执行文件：%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll

现在，当发送 HTTP OPTIONS 动词时，上面的配置条目应该会启动。

或者，您可以在 BeginRequest 方法中响应 HTTP OPTIONS 动词。

```
 protected void Application_BeginRequest(object sender,EventArgs e)
    {
        HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*");

        if(HttpContext.Current.Request.HttpMethod == "OPTIONS")
        {
            //These headers are handling the "pre-flight" OPTIONS call sent by the browser
            HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods", "GET, POST, PUT, DELETE");
            HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers", "Content-Type, Accept");
            HttpContext.Current.Response.AddHeader("Access-Control-Max-Age", "1728000" );
            HttpContext.Current.Response.End();
        }

    } 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-06-28T06:05:59.147

我不能发表评论，所以我必须把它放在一个单独的答案中，但这与 Shah 接受的答案有关。

我最初通过在 IIS 中重新配置 OPTIONSVerbHandler 来遵循 Shahs 的回答（谢谢！），但是当我重新部署我的应用程序时，我的设置被恢复了。

我最终在我的 Web.config 中删除了 OPTIONSVerbHandler 。

```
<handlers>
    <remove name="OPTIONSVerbHandler"/>
</handlers> 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-04-26T05:28:34.450

我发现在[http://help.infragistics.com/Help/NetAdvantage/jQuery/2013.1/CLR4.0/html/igOlapXmlaDataSource_Configuring_IIS_for_Cross_Domain_OLAP_Data.html](http://help.infragistics.com/Help/NetAdvantage/jQuery/2013.1/CLR4.0/html/igOlapXmlaDataSource_Configuring_IIS_for_Cross_Domain_OLAP_Data.html)找到的信息对于在 IIS 7 中为 WCF 服务设置 HTTP OPTIONS 非常有帮助。

我将以下内容添加到我的 web.config 中，然后将 IIS 7“hander mappings”列表中的 OPTIONSVerbHandler 移动到列表顶部。我还通过双击处理程序映射部分中的处理程序，然后单击“请求限制”，然后单击访问选项卡来授予 OPTIONSVerbHander 读取访问权限。

不幸的是，我很快发现 IE 似乎不支持向其[XDomainRequest](http://msdn.microsoft.com/en-us/library/ie/cc288060%28v=vs.85%29.aspx)对象添加标头（将 Content-Type 设置为 text/xml 并添加 SOAPAction 标头）。

只是想分享这个，因为我花了一天的大部分时间寻找如何处理它。

```
<system.webServer>
    <httpProtocol>
        <customHeaders>
            <add name="Access-Control-Allow-Origin" value="*" />
            <add name="Access-Control-Allow-Methods" value="GET,POST,OPTIONS" />
            <add name="Access-Control-Allow-Headers" value="Content-Type, soapaction" />
        </customHeaders>
    </httpProtocol>
</system.webServer> 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-11-21T14:01:42.507

从[DavidG 的回答](/a/16229340/1178314)中详细说明，这确实接近基本解决方案所需的内容：

*   首先，将 OPTIONSVerbHandler 配置为在 .Net 处理程序之前执行。

    1.  在 IIS 控制台中，选择“处理程序映射”（在服务器级别或站点级别；请注意，在站点级别它将重新定义您站点的所有处理程序，并忽略之后在服务器级别所做的任何更改；当然在服务器级别，如果他们需要自己处理选项动词，这可能会破坏其他网站）。
    2.  在操作窗格中，选择“查看有序列表...” 寻找 OPTIONSVerbHandler，然后将其向上移动（大量点击...）。

    您也可以在 web.config 中通过重新定义所有处理程序来执行此操作`<system.webServer><handlers>`（`<clear>`然后将`<add ...>`它们返回，这就是 IIS 控制台为您做的事情）（顺便说一下，无需请求对此处理程序的“读取”权限。）

*   其次，根据您的 cors 需求配置自定义 http 标头，例如：

    ```
    <system.webServer>
      <httpProtocol>
        <customHeaders>
          <add name="Access-Control-Allow-Origin" value="*"/>
          <add name="Access-Control-Allow-Headers" value="Content-Type"/>
          <add name="Access-Control-Allow-Methods" value="POST,GET,OPTIONS"/>
        </customHeaders>
      </httpProtocol>
    </system.webServer> 
    ```

    您也可以在 IIS 控制台中执行此操作。

这是一个基本的解决方案，因为即使在不需要它的请求时它也会发送 cors 标头。但是对于 WCF，它看起来是最简单的一个。

使用 MVC 或 webapi，我们可以改为通过代码处理 OPTIONS 动词和 cors 标头（“手动”或在最新版本的 webapi 中提供内置支持）。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-09-17T13:10:08.740

405 响应是“不允许的方法”响应。听起来您的服务器未正确配置为处理 CORS 预检请求。你需要做两件事：

1) 启用 IIS7 以响应 HTTP OPTIONS 请求。您收到 405 是因为 IIS7 拒绝了 OPTIONS 请求。我不知道该怎么做，因为我不熟悉 IIS7，但 Stack Overflow 上可能还有其他人这样做。

2) 配置您的应用程序以响应 CORS 预检请求。您可以通过`Access-Control-Allow-Origin`在该`<customHeaders>`部分的行下方添加以下两行来执行此操作：

```
<add name="Access-Control-Allow-Methods" value="GET,PUT,POST,DELETE" />
<add name="Access-Control-Allow-Headers" value="Content-Type" /> 
```

`Access-Control-Allow-Headers`您可能必须根据您的请求要求的标头向该部分添加其他值。你有发出请求的示例代码吗？

您可以在此处了解有关 CORS 和 CORS 预检的更多信息：http: [//www.html5rocks.com/en/tutorials/cors/](http://www.html5rocks.com/en/tutorials/cors/)

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2020-03-24T01:57:27.233

Microsoft 花了数年时间来确定差距并发布带外 CORS 模块来解决此问题。

1.  [从Microsoft](https://www.iis.net/downloads/microsoft/iis-cors-module)安装模块
2.  用片段[配置它](https://docs.microsoft.com/en-us/iis/extensions/cors-module/cors-module-configuration-reference)

如下

```
<configuration>
    <system.webServer>
        <cors enabled="true" failUnlistedOrigins="true">            
            <add origin="http://*" allowed="true" />
        </cors>
    </system.webServer>
</configuration> 
```

一般来说，它比您的自定义标头要容易得多，并且还可以更好地处理预检请求。

> 如果您对 IIS Express 需要相同的内容，请使用[我编写的一些 PowerShell 脚本](https://github.com/lextm/iisexpress-cors)。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-02-03T22:15:14.107

使用 ASP.net Web API 2 通过 nuget 安装 Microsoft ASP.NET Cross Origin 支持。

[http://enable-cors.org/server_aspnet.html](http://enable-cors.org/server_aspnet.html)

```
public static void Register(HttpConfiguration config)
{
 var enableCorsAttribute = new EnableCorsAttribute("http://mydomain.com",
                                                   "Origin, Content-Type, Accept",
                                                   "GET, PUT, POST, DELETE, OPTIONS");
        config.EnableCors(enableCorsAttribute);
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-04-05T20:55:58.673

我的解决方案是添加：

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
      <remove name="WebDAVModule"/>
    </modules>
</system.webServer> 
```

到我的 web.config

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-09-08T20:36:41.670

阿萨拉姆阿雷库姆。

第一种方法是按照此链接中的说明进行操作：

[http://help.infragistics.com/Help/NetAdvantage/jQuery/2013.1/CLR4.0/html/igOlapXmlaDataSource_Configuring_IIS_for_Cross_Domain_OLAP_Data.html](http://help.infragistics.com/Help/NetAdvantage/jQuery/2013.1/CLR4.0/html/igOlapXmlaDataSource_Configuring_IIS_for_Cross_Domain_OLAP_Data.html)

对应于这些配置：

```
<handlers>
  <clear />
  <add name="OPTIONSVerbHandler" path="*" verb="OPTIONS" type="" modules="ProtocolSupportModule" scriptProcessor="" resourceType="Unspecified" requireAccess="Read" allowPathInfo="false" preCondition="" responseBufferLimit="4194304" />
  <add name="xamlx-ISAPI-4.0_64bit" path="*.xamlx" verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false"
  preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="4194304" />
  <add name="xamlx-ISAPI-4.0_32bit" path="*.xamlx" verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false"
  preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="4194304" />
  <add name="xamlx-Integrated-4.0" path="*.xamlx" verb="GET,HEAD,POST,DEBUG" type="System.Xaml.Hosting.XamlHttpHandlerFactory, System.Xaml.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" modules="ManagedPipelineHandler" scriptProcessor=""
  resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="integratedMode,runtimeVersionv4.0" responseBufferLimit="4194304" />
  <add name="rules-ISAPI-4.0_64bit" path="*.rules" verb="*" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="classicMode,runtimeVersionv4.0,bitness64"
  responseBufferLimit="4194304" />
  <add name="rules-ISAPI-4.0_32bit" path="*.rules" verb="*" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="classicMode,runtimeVersionv4.0,bitness32"
  responseBufferLimit="4194304" />
  <add name="rules-Integrated-4.0" path="*.rules" verb="*" type="System.ServiceModel.Activation.ServiceHttpHandlerFactory, System.ServiceModel.Activation, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" modules="ManagedPipelineHandler"
  scriptProcessor="" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="integratedMode,runtimeVersionv4.0" responseBufferLimit="4194304" />
  <add name="xoml-ISAPI-4.0_64bit" path="*.xoml" verb="*" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="classicMode,runtimeVersionv4.0,bitness64"
  responseBufferLimit="4194304" />
  <add name="xoml-ISAPI-4.0_32bit" path="*.xoml" verb="*" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="classicMode,runtimeVersionv4.0,bitness32"
  responseBufferLimit="4194304" />
  <add name="xoml-Integrated-4.0" path="*.xoml" verb="*" type="System.ServiceModel.Activation.ServiceHttpHandlerFactory, System.ServiceModel.Activation, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" modules="ManagedPipelineHandler"
  scriptProcessor="" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="integratedMode,runtimeVersionv4.0" responseBufferLimit="4194304" />
  <add name="svc-ISAPI-4.0_64bit" path="*.svc" verb="*" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="classicMode,runtimeVersionv4.0,bitness64"
  responseBufferLimit="4194304" />
  <add name="svc-ISAPI-4.0_32bit" path="*.svc" verb="*" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="classicMode,runtimeVersionv4.0,bitness32"
  responseBufferLimit="4194304" />
  <add name="svc-Integrated-4.0" path="*.svc" verb="*" type="System.ServiceModel.Activation.ServiceHttpHandlerFactory, System.ServiceModel.Activation, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" modules="ManagedPipelineHandler" scriptProcessor=""
  resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="integratedMode,runtimeVersionv4.0" responseBufferLimit="4194304" />
  <add name="ISAPI-dll" path="*.dll" verb="*" type="" modules="IsapiModule" scriptProcessor="" resourceType="File" requireAccess="Execute" allowPathInfo="true" preCondition="" responseBufferLimit="4194304" />
  <add name="AXD-ISAPI-4.0_64bit" path="*.axd" verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false"
  preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="PageHandlerFactory-ISAPI-4.0_64bit" path="*.aspx" verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false"
  preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="SimpleHandlerFactory-ISAPI-4.0_64bit" path="*.ashx" verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script"
  allowPathInfo="false" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="WebServiceHandlerFactory-ISAPI-4.0_64bit" path="*.asmx" verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script"
  allowPathInfo="false" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="HttpRemotingHandlerFactory-rem-ISAPI-4.0_64bit" path="*.rem" verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script"
  allowPathInfo="false" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="HttpRemotingHandlerFactory-soap-ISAPI-4.0_64bit" path="*.soap" verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script"
  allowPathInfo="false" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="aspq-ISAPI-4.0_64bit" path="*.aspq" verb="*" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="classicMode,runtimeVersionv4.0,bitness64"
  responseBufferLimit="0" />
  <add name="cshtm-ISAPI-4.0_64bit" path="*.cshtm" verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false"
  preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="cshtml-ISAPI-4.0_64bit" path="*.cshtml" verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false"
  preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="vbhtm-ISAPI-4.0_64bit" path="*.vbhtm" verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false"
  preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="vbhtml-ISAPI-4.0_64bit" path="*.vbhtml" verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false"
  preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="TraceHandler-Integrated-4.0" path="trace.axd" verb="GET,HEAD,POST,DEBUG" type="System.Web.Handlers.TraceHandler" modules="ManagedPipelineHandler" scriptProcessor="" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="integratedMode,runtimeVersionv4.0"
  responseBufferLimit="4194304" />
  <add name="WebAdminHandler-Integrated-4.0" path="WebAdmin.axd" verb="GET,DEBUG" type="System.Web.Handlers.WebAdminHandler" modules="ManagedPipelineHandler" scriptProcessor="" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="integratedMode,runtimeVersionv4.0"
  responseBufferLimit="4194304" />
  <add name="AssemblyResourceLoader-Integrated-4.0" path="WebResource.axd" verb="GET,DEBUG" type="System.Web.Handlers.AssemblyResourceLoader" modules="ManagedPipelineHandler" scriptProcessor="" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false"
  preCondition="integratedMode,runtimeVersionv4.0" responseBufferLimit="4194304" />
  <add name="PageHandlerFactory-Integrated-4.0" path="*.aspx" verb="GET,HEAD,POST,DEBUG" type="System.Web.UI.PageHandlerFactory" modules="ManagedPipelineHandler" scriptProcessor="" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false"
  preCondition="integratedMode,runtimeVersionv4.0" responseBufferLimit="4194304" />
  <add name="SimpleHandlerFactory-Integrated-4.0" path="*.ashx" verb="GET,HEAD,POST,DEBUG" type="System.Web.UI.SimpleHandlerFactory" modules="ManagedPipelineHandler" scriptProcessor="" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false"
  preCondition="integratedMode,runtimeVersionv4.0" responseBufferLimit="4194304" />
  <add name="WebServiceHandlerFactory-Integrated-4.0" path="*.asmx" verb="GET,HEAD,POST,DEBUG" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" modules="ManagedPipelineHandler"
  scriptProcessor="" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="integratedMode,runtimeVersionv4.0" responseBufferLimit="4194304" />
  <add name="HttpRemotingHandlerFactory-rem-Integrated-4.0" path="*.rem" verb="GET,HEAD,POST,DEBUG" type="System.Runtime.Remoting.Channels.Http.HttpRemotingHandlerFactory, System.Runtime.Remoting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
  modules="ManagedPipelineHandler" scriptProcessor="" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="integratedMode,runtimeVersionv4.0" responseBufferLimit="4194304" />
  <add name="HttpRemotingHandlerFactory-soap-Integrated-4.0" path="*.soap" verb="GET,HEAD,POST,DEBUG" type="System.Runtime.Remoting.Channels.Http.HttpRemotingHandlerFactory, System.Runtime.Remoting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
  modules="ManagedPipelineHandler" scriptProcessor="" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="integratedMode,runtimeVersionv4.0" responseBufferLimit="4194304" />
  <add name="aspq-Integrated-4.0" path="*.aspq" verb="GET,HEAD,POST,DEBUG" type="System.Web.HttpForbiddenHandler" modules="ManagedPipelineHandler" scriptProcessor="" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="integratedMode,runtimeVersionv4.0"
  responseBufferLimit="4194304" />
  <add name="cshtm-Integrated-4.0" path="*.cshtm" verb="GET,HEAD,POST,DEBUG" type="System.Web.HttpForbiddenHandler" modules="ManagedPipelineHandler" scriptProcessor="" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="integratedMode,runtimeVersionv4.0"
  responseBufferLimit="4194304" />
  <add name="cshtml-Integrated-4.0" path="*.cshtml" verb="GET,HEAD,POST,DEBUG" type="System.Web.HttpForbiddenHandler" modules="ManagedPipelineHandler" scriptProcessor="" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="integratedMode,runtimeVersionv4.0"
  responseBufferLimit="4194304" />
  <add name="vbhtm-Integrated-4.0" path="*.vbhtm" verb="GET,HEAD,POST,DEBUG" type="System.Web.HttpForbiddenHandler" modules="ManagedPipelineHandler" scriptProcessor="" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="integratedMode,runtimeVersionv4.0"
  responseBufferLimit="4194304" />
  <add name="vbhtml-Integrated-4.0" path="*.vbhtml" verb="GET,HEAD,POST,DEBUG" type="System.Web.HttpForbiddenHandler" modules="ManagedPipelineHandler" scriptProcessor="" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="integratedMode,runtimeVersionv4.0"
  responseBufferLimit="4194304" />
  <add name="ScriptHandlerFactoryAppServices-Integrated-4.0" path="*_AppService.axd" verb="*" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" modules="ManagedPipelineHandler"
  scriptProcessor="" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="integratedMode,runtimeVersionv4.0" responseBufferLimit="4194304" />
  <add name="ScriptResourceIntegrated-4.0" path="*ScriptResource.axd" verb="GET,HEAD" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" modules="ManagedPipelineHandler"
  scriptProcessor="" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="integratedMode,runtimeVersionv4.0" responseBufferLimit="4194304" />
  <add name="AXD-ISAPI-4.0_32bit" path="*.axd" verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false"
  preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="PageHandlerFactory-ISAPI-4.0_32bit" path="*.aspx" verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false"
  preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="SimpleHandlerFactory-ISAPI-4.0_32bit" path="*.ashx" verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false"
  preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="WebServiceHandlerFactory-ISAPI-4.0_32bit" path="*.asmx" verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script"
  allowPathInfo="false" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="HttpRemotingHandlerFactory-rem-ISAPI-4.0_32bit" path="*.rem" verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script"
  allowPathInfo="false" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="HttpRemotingHandlerFactory-soap-ISAPI-4.0_32bit" path="*.soap" verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script"
  allowPathInfo="false" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="aspq-ISAPI-4.0_32bit" path="*.aspq" verb="*" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="classicMode,runtimeVersionv4.0,bitness32"
  responseBufferLimit="0" />
  <add name="cshtm-ISAPI-4.0_32bit" path="*.cshtm" verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false"
  preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="cshtml-ISAPI-4.0_32bit" path="*.cshtml" verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false"
  preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="vbhtm-ISAPI-4.0_32bit" path="*.vbhtm" verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false"
  preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="vbhtml-ISAPI-4.0_32bit" path="*.vbhtml" verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false"
  preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="TRACEVerbHandler" path="*" verb="TRACE" type="" modules="ProtocolSupportModule" scriptProcessor="" resourceType="Unspecified" requireAccess="None" allowPathInfo="false" preCondition="" responseBufferLimit="4194304" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false"
  preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG" type="" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false"
  preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG" type="System.Web.Handlers.TransferRequestHandler" modules="ManagedPipelineHandler" scriptProcessor="" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false"
  preCondition="integratedMode,runtimeVersionv4.0" responseBufferLimit="0" />
  <add name="StaticFile" path="*" verb="*" type="" modules="StaticFileModule,DefaultDocumentModule,DirectoryListingModule" scriptProcessor="" resourceType="Either" requireAccess="Read" allowPathInfo="false" preCondition="" responseBufferLimit="4194304"
  />
</handlers>
```

第二种方法是响应 BeginRequest 方法中的 HTTP OPTIONS 动词。

```
 protected void Application_BeginRequest(object sender, EventArgs e)
{
    HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*");
    if (HttpContext.Current.Request.HttpMethod == "OPTIONS")
    {
        HttpContext.Current.Response.AddHeader("Access-Control-Request-Method", "GET ,POST, PUT, DELETE");

        HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers", "Origin,Content-Type, Accept");
        HttpContext.Current.Response.AddHeader("Access-Control-Max-Age", "86400"); // 24 hours
        HttpContext.Current.Response.End();
    }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-07-12T17:00:57.887

这些答案中没有提到的一件事是，如果您使用的是 IIS，并且子应用程序具有自己的单独 web.config，则可能需要在包含以下代码的父目录中有一个 web.config。

```
<httpProtocol>
  <customHeaders>
    <add name="Access-Control-Allow-Origin" value="*"/>
    <add name="Access-Control-Allow-Headers" value="Content-Type"/>
    <add name="Access-Control-Allow-Methods" value="POST,GET,OPTIONS"/>
  </customHeaders>
</httpProtocol> 
```

# javascript - 如何以编程方式更改谷歌地图的缩放级别？

> ID：12458456
> 
> 赞同：32
> 
> 时间：2012-09-17T11:41:36.140
> 
> 标签：javascript, google-maps, google-maps-api-3

```
function displayMapAndClick ()
    {
        var latlng    = new google.maps.LatLng (29.0167, 77.3833);
        var myOptions = 
        {
            zoom:zm,
            center:latlng,
            mapTypeId:google.maps.MapTypeId.ROADMAP
        };

        map = new google.maps.Map (document.getElementById ("map"), myOptions);
        directionsDisplay.setMap (map); 
    } 
```

全局变量在哪里`zm` 设置为 default `7`。

现在，我希望通过该程序更改此地图的缩放级别。

没有重新初始化地图的方法是什么，或者重新初始化地图是强制性的？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-09-17T11:44:17.850

使用类中的`setZoom()`方法[`google.maps.Map`](https://developers.google.com/maps/documentation/javascript/reference#Map)。

```
var mapOptions = {
  /* Initial zoom level */
  zoom: 8
  ...
};
map = new google.maps.Map(..., mapOptions);
/* Change zoom level to 12  */
map.setZoom(12); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-03T10:51:20.977

除了 Alexanders 的解决方案：我遇到了同样的问题，但上述方法在所有浏览器中都不适用于我，因为有时 map.setZoom() 在地图加载完成之前执行。

像这样包装函数将使其始终工作：

```
...
map = new google.maps.Map(..., mapOptions);
/* Change zoom level to 12  */
google.maps.event.addListenerOnce(map, 'bounds_changed', function() {
  map.setZoom(12);
}); 
```

# jquery - ToDo 应用程序无法正常工作

> ID：12458462
> 
> 赞同：3
> 
> 时间：2012-09-17T11:42:06.483
> 
> 标签：jquery, ember.js, handlebars.js

我试图编写一个 ToDo-App，但我的复选框一开始就有问题......

[http://jsfiddle.net/LRQyv/](http://jsfiddle.net/LRQyv/)

模板：

```
<script type="text/x-handlebars">
  {{view Todos.CreateTodoView id="new-todo" placeholder="What has to be done?"}}
  {{#collection contentBinding="Todos.todosController" tagName="ul"}}
      {{view Em.Checkbox titleBinding="content.title" valueBinding="content.isDone"}}
  {{/collection}}
</script>​ 
```

编码：

```
window.Todos = Ember.Application.create();
Todos.initialize();

Todos.Todo = Ember.Object.extend({
    title: null,
    isDone: false
});

Todos.todosController = Ember.ArrayController.create({
    content: [],
    createTodo: function(title) {
        var todo = Todos.Todo.create({title: title});
        this.pushObject(todo);
    }
});

Todos.CreateTodoView = Ember.TextField.extend({
    insertNewline: function() {
        var value = this.get('value');
        if (value) {
            Todos.todosController.createTodo(value);
            this.set('value', '');
        }
    }
});​ 
```

..添加ToDo-Item时为什么没有添加标签的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:43:01.453

您的代码中有两个问题，首先，您期望`Ember.Checkbox`允许`title`绑定。这是不可能的，如文档中所述：

> 您可以`label`在使用 Ember.Checkbox 的模板中自己添加标签。

其次，您必须查看[Ember.js View Context changes](https://gist.github.com/2494968)。您的绑定必须使用`{{view.content.title}}`and `{{view.content.isDone}}`。

这是修改后的模板：

```
<script type="text/x-handlebars">
  {{view Todos.CreateTodoView id="new-todo" placeholder="What has to be done?"}}
  {{#collection contentBinding="Todos.todosController" tagName="ul"}}
      <label>
        {{view Em.Checkbox labelBinding="content.title" valueBinding="view.content.isDone"}}
        {{view.content.title}}
      </label>
  {{/collection}}
</script>​ 
```

以及[相关的 JSFiddle](http://jsfiddle.net/p5ddA/)。

# java - 我需要做的就是发布 3 个值！Android 到 PHP 服务器脚本

> ID：12458463
> 
> 赞同：0
> 
> 时间：2012-09-17T11:42:09.110
> 
> 标签：java, php, android, mysql

android设备上的代码是：

```
public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "n");
        }
        is.close();
        json = sb.toString();
        Log.e("JSON", json);
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;
    } 
```

PHP服务器上的代码是：

```
 $name = $_POST['name'];
    $email= $_POST['email'];
    $password = $_POST['password'];

    $user = $db->storeUser($name, $email, $password);

    if($user){
            echo json_encode($response). "User Stored Successfully";
        } 
        else{
            echo json_encode($response). "Error Occured in Registration";
        } 
```

其中 storeUser 是：

```
 public function storeUser($name, $email, $password) {

    $result = mysql_query("INSERT INTO users(unique_id, name, email, encrypted_password, salt, created_at) VALUES('$uuid', '$name', '$email','$encrypted_password', '$salt', NOW())");

    } 
```

该过程有效，将消息发送回android设备，但详细信息未插入MySQL数据库？

我想要的只是从安卓设备发布详细信息并将它们插入到我服务器上的 MySQL 数据库中。

任何人都知道为什么会这样，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:43:25.333

```
$name = $_POST['name'];
$name = $_POST['email'];
$name = $_POST['password']; 
```

这显然是错误的。将变量更改为`$email`和`$password`。

另外，请停止使用 mysql_query，因为它已被[弃用](http://php.net/mysql_query)。请改用[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T23:40:26.740

我从上面找出了我的代码有什么问题。

在 java/android 代码中传递给 httppost 的 url 不能作为我正在使用的 api 的简单地址，我试过 www.domain.com/index.php? 与“？”。添加这个使代码工作。

我只是回到基础，看看是什么让一个帖子

这是对 wikipedia [http://en.wikipedia.org/wiki/POST_(HTTP)](http://en.wikipedia.org/wiki/POST_(HTTP))中 POST 文章的引用，它帮助我弄清楚了 http 帖子的组成部分

# java - SLF4J：无法加载类“org.slf4j.impl.StaticLoggerBinder”。在一个 Maven 项目中

> ID：12458469
> 
> 赞同：49
> 
> 时间：2012-09-17T11:42:40.290
> 
> 标签：java, maven, log4j, slf4j

我对 SLF4J 有依赖。我收到此错误：

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. 
```

这是我的 Maven 条目：

```
 <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.6.6</version>
    </dependency>

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.6.6</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
    </dependency> 
```

哪里有问题？

* * *

**编辑：** 没有 log4j 依赖我得到以下异常

```
Failed to instantiate SLF4J LoggerFactory
Reported exception:
java.lang.NoClassDefFoundError: org.slf4j.impl.StaticLoggerBinder
    at org.slf4j.LoggerFactory.bind(LoggerFactory.java:121)
    at org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:111)
    at org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:268)
    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:241)
    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:254)
    at org.apache.bval.jsr303.ConfigurationImpl.<clinit>(ConfigurationImpl.java:50)
    at java.lang.J9VMInternals.initializeImpl(Native Method)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:228)
    at org.apache.bval.jsr303.ApacheValidationProvider.createGenericConfiguration(ApacheValidationProvider.java:66)
    at javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:173)
    at javax.validation.Validation.buildDefaultValidatorFactory(Validation.java:50)
    at com.daimler.zv9.basic.entity.AbstractEntity.<clinit>(AbstractEntity.java:73)
    at java.lang.J9VMInternals.initializeImpl(Native Method)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:228)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:195)
    at java.lang.Class.forNameImpl(Native Method)
    at java.lang.Class.forName(Class.java:168) 
```

* * *

**EDIT2**：这是我得到的一个示例 MAVEN 树

```
[INFO] com.myCompany.abc:ABC_Document:ejb:0.0.1-SNAPSHOT
[INFO] +- com.myCompany.abc:ABC_Basic:jar:0.0.1-SNAPSHOT:compile
[INFO] +- com.myCompany.iap:javax.j2ee:jar:5.0.0:provided
[INFO] +- com.myCompany.iap:logging:jar:5.0.0:provided
[INFO] +- com.myCompany.iap:util:jar:5.0.0:provided
[INFO] +- junit:junit:jar:4.8.2:test
[INFO] +- javax.servlet:jstl:jar:1.2:provided
[INFO] +- org.slf4j:slf4j-api:jar:1.6.6:compile
[INFO] +- org.slf4j:slf4j-simple:jar:1.6.6:compile
[INFO] \- org.mockito:mockito-all:jar:1.9.0:test 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-07T11:01:27.513

我假设您使用 Eclipse 作为您的开发环境。

Eclipse Juno、Indigo 和 Kepler 在使用捆绑的 maven 版本 (m2e) 时不会抑制消息 SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder"。此行为从 m2e 版本 1.1.0.20120530-0009 及更高版本开始存在。

虽然，这被指示为错误，您的日志将正常保存。在修复此错误之前，突出显示的错误仍将存在。[在m2e 支持站点](https://bugs.eclipse.org/bugs/show_bug.cgi?id=387064)中了解更多信息。

当前可用的解决方案是使用外部 maven 版本而不是 Eclipse 的捆绑版本。您可以在下面的问题中找到有关此解决方案以及有关此错误的更多详细信息，我相信该问题描述了您面临的相同问题。

[SLF4J：无法加载类“org.slf4j.impl.StaticLoggerBinder”。错误](https://stackoverflow.com/questions/11916706/slf4j-failed-to-load-class-org-slf4j-impl-staticloggerbinder-error)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-09-17T11:45:19.130

消除

```
<dependency>
    <groupId>log4j</groupId>
    <artifactId>log4j</artifactId>
    <version>1.2.16</version>
</dependency> 
```

`slf4j-log4j12`是 log4j 绑定，`slf4j`您不需要添加另一个 log4j 依赖项。

**添加**
提供 log4j 配置`log4j.properties`并将其添加到您的类路径。[这里](http://logging.apache.org/log4j/1.2/manual.html)有示例配置

或者您可以将绑定更改为

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-simple</artifactId>
    <version>1.6.1</version>
</dependency> 
```

如果由于某些依赖项需要它而配置 slf4j。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-02-21T22:48:51.853

我在 IntelliJ 中遇到了这个问题，并通过在我的 pom 中添加以下内容来修复它：

```
<!-- logging dependencies -->
    <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-classic</artifactId>
        <version>${logback.version}</version>
        <exclusions>
            <exclusion>
                <!-- Defined below -->
                <artifactId>slf4j-api</artifactId>
                <groupId>org.slf4j</groupId>
            </exclusion>
        </exclusions>
    </dependency>

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${slf4j.version}</version>
    </dependency> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-17T17:45:03.267

你提到的信息很清楚：

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. 
```

SLF4J API 找不到绑定，并决定默认为 NOP 实现。在您的情况下，当 LoggerFactory 类加载到内存中时，slf4j-log4j12.jar 不知何故不可见，这无疑*很*奇怪。“mvn依赖：树”告诉你什么？

各种依赖声明甚至可能不是这里的直接原因。我强烈怀疑在`slf4j-api.jar`您不知情的情况下正在部署 1.6 之前的版本。

# javascript - IE 问题：子窗口的标题在哈希更改时被设置为“#”

> ID：12458472
> 
> 赞同：1
> 
> 时间：2012-09-17T11:42:52.817
> 
> 标签：javascript, internet-explorer, location

在我的应用程序中，我们`location.hash`用于导航。我们还在页面加载时动态设置文档标题。但是当我们改变位置标题的哈希值时，就会被重置为“#”。

注意：一旦我们从哈希中获取信息，我们将从位置中删除哈希字符串，只留下 url + "#"。

# java - 在本地服务器上部署可运行的 jar

> ID：12458473
> 
> 赞同：1
> 
> 时间：2012-09-17T11:42:59.263
> 
> 标签：java, html, jar, applet

我有一个可运行的 jar，它在一个包中包含多个类。我试图让这个小程序使用 html 在我的本地 apache 服务器上运行。

```
<html>
<body>
<head>
<p>Something</p>
</head>
<applet code="LoginGUI.class" archive="html.jar" width="640" height="480">
</applet>
</body>
</html> 
```

程序在Eclipse中运行正常，但是通过上面的html代码调用时没有加载。我认为这可能是由于 jar 文件中 package1 文件夹中的类，但我不确定如何纠正这个问题，如果这确实是问题。我已经测试过通过 html 调用单个类，所以这不是问题，因为它们工作正常。请告知如何解决此问题，或者是否有我不知道的更合乎逻辑的方法。第一次尝试做这种事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:51:06.840

如果所有类都在`package1`包中，那么你应该有：

```
<applet code="package1.LoginGUI.class" archive="html.jar" width="640" height="480">
</applet> 
```

# android - 如何创建类似于指示器的圆形进度条（饼图） - Android

> ID：12458476
> 
> 赞同：17
> 
> 时间：2012-09-17T11:43:16.370
> 
> 标签：android, android-progressbar

现在我有一个水平进度条，它通过`ProgressBar` `setProgress`以下方法以编程方式更新：

```
<ProgressBar
            style="@android:style/Widget.ProgressBar.Horizontal"
            android:layout_width="0dip"
            android:layout_weight="1"
            android:layout_height="20dip"
            android:id="@+id/progressbar"
            >
    </ProgressBar> 
```

有没有办法将此进度条转换为圆形（饼图）并能够以编程方式更新进度？

我想要的示例：

![](../Images/f4c9bedcd8a1a7dd219e114bbfb21c61.png)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-08-12T22:39:56.563

您可以制作自定义视图（例如*PieProgressView*）或自定义 Drawable （例如*PieProgressDrawable*）。我采用了自定义视图方法，但两者都是完全可行的。

快速浏览一下 Android 的[ProgressView](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/widget/ProgressBar.java)的源代码会产生一个非常复杂的实现。显然，它们涵盖了所有基础，但您不必编写那么复杂的东西。我们真的只需要两件事：

1.  跟踪当前进度的成员。
2.  根据当前进度绘制饼图的方法。

第一个很简单，只需保留一个成员字段来跟踪要绘制的饼图的当前百分比。数字 2 有点复杂，但幸运的是，我们可以使用标准的 Canvas 绘制方法来完成。

方便的是，Android 的[Canvas](http://developer.android.com/reference/android/graphics/Canvas.html)类提供了一个[drawArc()](http://developer.android.com/reference/android/graphics/Canvas.html#drawArc%28android.graphics.RectF,%20float,%20float,%20boolean,%20android.graphics.Paint%29)方法。您可以使用它来获得*饼图*效果。假设我们将百分比作为 0 到 1 之间的浮点数存储在名为*mPercent*`onDraw()`的成员字段中，则方法可能如下所示：

```
@Override
protected void onDraw(Canvas canvas) {

    final float startAngle = 0f;
    final float drawTo = startAngle + (mPercent * 360);

    // Rotate the canvas around the center of the pie by 90 degrees
    // counter clockwise so the pie stars at 12 o'clock.
    canvas.rotate(-90f, mArea.centerX(), mArea.centerY());
    canvas.drawArc(mArea, startAngle, drawTo, true, mPaint);

    // Draw inner oval and text on top of the pie (or add any other
    // decorations such as a stroke) here..
    // Don't forget to rotate the canvas back if you plan to add text!
    ...
} 
```

以下是示例应用程序中完整视图的外观：

![PieProgressView 在行动！](../Images/e5cf83211776b2a6c358192fa6d684aa.png)

**编辑**

自发布以来，我认为您确实没有理由需要实现自定义视图。您可以简单地使用 drawable 和它的 level 属性来完成所需的操作。我用[完整的 drawable 做了一个要点](https://gist.github.com/dcow/9493477)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-07T20:39:26.613

节省一些时间，在重新发明轮子（或进度指示器）之前，检查[http://github.com/Sage42/AndroidViewUtils](http://github.com/Sage42/AndroidViewUtils)上的那个是否适合你。只需将其添加到您的项目中并玩得开心。它是可定制的，并提供向上计数或向下计数的选项。

我忘了补充一点，视觉效果看起来几乎与您问题中的示例图像一模一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-30T12:53:10.853

试试这段代码来创建圆形进度条（饼图）。传递它整数值以绘制填充区域的百分比。:)

```
private void circularImageBar(ImageView iv2, int i) {

    Bitmap b = Bitmap.createBitmap(300, 300,Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(b); 
    Paint paint = new Paint();

        paint.setColor(Color.parseColor("#c4c4c4"));
        paint.setStrokeWidth(10);
        paint.setStyle(Paint.Style.STROKE);
        canvas.drawCircle(150, 150, 140, paint);
        paint.setColor(Color.parseColor("#FFDB4C"));
        paint.setStrokeWidth(10);   
        paint.setStyle(Paint.Style.FILL);
        final RectF oval = new RectF();
        paint.setStyle(Paint.Style.STROKE);
        oval.set(10,10,290,290);
        canvas.drawArc(oval, 270, ((i*360)/100), false, paint);
        paint.setStrokeWidth(0);    
        paint.setTextAlign(Align.CENTER);
        paint.setColor(Color.parseColor("#8E8E93")); 
        paint.setTextSize(140);
        canvas.drawText(""+i, 150, 150+(paint.getTextSize()/3), paint); 
        iv2.setImageBitmap(b);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T11:50:40.883

对于圆形进度条，请使用：

```
style="?android:attr/progressBarStyle" 
```

可以在这里找到更多详细信息[：ProgressBar 中 android:progressBarStyle 属性的含义是什么？](https://stackoverflow.com/questions/4288807/whats-the-meaning-of-androidprogressbarstyle-attribute-in-progressbar)

至于设置进度：圆形进度条会一直旋转。不再需要后将其隐藏即可。

**或者**你可以实现一些自定义：在它旁边显示一个 TextView 并更新它，而不是使用 Progressbar.setProgress。

```
Step 0: setText("0%");
Step 1 (2 seconds later): setText("3%");
Step 2 (4 seconds later): setText("9%"); etc. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-27T11:52:27.947

尽管这是一个老问题，但我希望这个答案可以帮助未来的观众。

查看这个库 - [https://github.com/lzyzsd/CircleProgress](https://github.com/lzyzsd/CircleProgress)

对于简单的动态或静态循环进度，这个库非常简单，并且具有许多易于定制的属性（如笔划宽度、起始角度、内部背景、文本颜色等）。对于 OP 想要实现的 UI，这个库将是完美的。

[![圆形进度示例图片](../Images/32bf97d0842452129993dcbd16e6fae1.png)](https://i.stack.imgur.com/kFIdm.gif)

# jquery - 为什么我不能选择整个表？

> ID：12458483
> 
> 赞同：1
> 
> 时间：2012-09-17T11:43:27.403
> 
> 标签：jquery, html, css

我正在研究一种使用名为 DocRaptor 的程序将一些表格数据从 HTML 页面导出到 Excel 的方法。我正在使用 PHP 使用他们的 API 传递数据，然后将数据转换为 Excel 电子表格。

但是，我似乎无法通过整个表格（包括开始`<table>`和结束`</table>`标签。

例如，如果我在 HTML 中有下表：

```
<table id="placement-table">
    <tr id="row">
    <td id="cell">Text1</td>
    </tr>
<tr id="row1">
    <td id="cell">Text2</td>
    </tr>
<tr id="row2">
    <td id="cell">Text3</td>
    </tr>
<tr id="row3">
    <td id="cell">Text4</td>
    </tr>
</table> 
```

现在例如，如果我使用`console.log($('#placement-table').html());`我只会得到以下输出：

```
<tbody><tr id="row">
    <td id="cell">Text1</td>
    </tr>
    <tr id="row1">
    <td id="cell">Text2</td>
    </tr><tr id="row2">
    <td id="cell">Text3</td>
    </tr><tr id="row3">
    <td id="cell">Text4</td>
    </tr>
</tbody> 
```

为什么我错过了实际的开始和结束`<table></table>`标签？是因为`.html()`只给你给定元素内部的内容吗？我意识到我只是将信息记录到控制台，但我只是这样做，所以我可以看到正在传递的内容，因此我注意到它缺少这些标签。

希望这是有道理的，如果没有，我可以更新问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:46:45.047

您可以使用`outerHTML`：

```
$('#placement-table')[0].outerHTML 
```

或者：

```
var table = document.getElementById('placement-table').outerHTML 
```

[http://jsfiddle.net/eQRL3/](http://jsfiddle.net/eQRL3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:49:48.903

从[获取选定元素的外部 HTML](https://stackoverflow.com/questions/2419749/get-selected-elements-outer-html)

```
(function($) {
  $.fn.outerHTML = function() {
    return $(this).clone().wrap('<div></div>').parent().html();
  }
})(jQuery);

console.log($('#placement-table').outerHTML());    // <table>...</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T11:45:27.907

正确的; html() 获取您提供的元素的内容，而不是容器本身。最简单的解决方案是添加一个包装器 div ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T11:45:45.033

方法`html`获取元素的 innerHTML。您应该使用类似的东西`outerHTML`，在 jQuery 中可以按如下方式完成：

```
var table = $("#placement-table").clone().wrap("<div />").parent().html();
console.log(table); 
```

# php - PHP MySQL - 通过数字循环直到找到结果

> ID：12458485
> 
> 赞同：1
> 
> 时间：2012-09-17T11:43:45.740
> 
> 标签：php, mysql

我有一些 sql 从表单输入中搜索数据库表中的数字。

一个很好的例子是以下行：

```
124
1240
12400
124000 
```

我的 sql 是一个简单的 like 语句：

```
SELECT NUMBER FROM TABLE WHERE NUMBER LIKE '$number%' 
```

如果使用搜索 124，我会找到 4 行，这很好。

我的问题是，如果用户输入 12400000，我如何返回 124000 的行？我假设我需要循环返回数字直到找到一行？

在运行 sql 之前，我的输入至少需要 3 个数字，所以我想在 3 个数字处停止循环。

使用 php 和/或 SQL，是否有一种方法可以让我将字符串倒数到定义的点；字符串回到第三个字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:49:04.503

如果找不到任何内容，您可以使用 str_replcace 并删除最新的。更多信息： http: [//php.net/manual/de/function.str-replace.php](http://php.net/manual/de/function.str-replace.php)

更好的方法是使用此搜索字符串显示未找到任何内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:55:02.330

只需从该输入创建一个数组并使用`IN`：

```
$_POST['number'] = '124000';

$number = (string)(int)$_POST['number'];

$numbers = array();
$inNumber = '';
if(strlen($number) > 2){
    $baseNumber = substr($number, 0, 3);
    $numbers[] = $baseNumber;
    for($i=3; $i<=strlen($number)-1; $i++){
        $inNumber.= $number[$i];
        $numbers[] = $baseNumber.$inNumber;
    }

    $tosearch = implode("','", array_reverse($numbers));
    $query = "SELECT * FROM `TABLE` WHERE `NUMBER` IN ('".$tosearch."') ORDER BY FIELD(`id`, '".$tosearch."')";
    echo $query; // SELECT * FROM `TABLE` WHERE `NUMBER` IN ('124000','12400','1240','124') ORDER BY FIELD(`NUMBER`, '124000','12400','1240','124')
} 
```

# c# - 无法删除通过 C# 中的 Assembly.LoadFrom 加载的文件

> ID：12458486
> 
> 赞同：2
> 
> 时间：2012-09-17T11:43:48.653
> 
> 标签：c#

我正在 C# 中创建一个卸载实用程序。该实用程序将注销通过 Regasm 注册的文件，然后删除这些文件。

```
Assembly asm = Assembly.LoadFrom("c:\\Test.dll")
int count = files.Length;
RegistrationServices regAsm = new RegistrationServices();
if (regAsm.UnregisterAssembly(asm))
MessageBox.Show("Unregistered Successfully"); 
```

上面的代码工作正常，但是当我尝试删除 Test.dll 时，出现错误并且无法删除它。据我所知，Assembly.LoadFrom("c:\Test.dll") 已经保存了对该文件的引用并且没有丢失它。有没有办法解决这个问题？

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T12:44:31.713

您需要在另一个 appdomain 中加载该类型。通常这是通过将派生自 MarshalByRefObject 的类型加载到另一个域中，将实例编组到原始域并通过代理执行方法来完成的。这听起来更难，所以这里是例子：

```
public class Helper : MarshalByRefObject // must inherit MBRO, so it can be "remoted"
{
    public void RegisterAssembly()
    {
      // load your assembly here and do what you need to do
      var asm = Assembly.LoadFrom("c:\\test.dll", null);
      // do whatever...
    }
}

static class Program
{
    static void Main()
    {
      // setup and create a new appdomain with shadowcopying
      AppDomainSetup setup = new AppDomainSetup();
      setup.ShadowCopyFiles = "true";
      var domain = AppDomain.CreateDomain("loader", null, setup);

      // instantiate a helper object derived from MarshalByRefObject in other domain
      var handle = domain.CreateInstanceFrom(Assembly.GetExecutingAssembly().Location, typeof (Helper).FullName);

      // unwrap it - this creates a proxy to Helper instance in another domain
      var h = (Helper)handle.Unwrap();
      // and run your method
      h.RegisterAssembly();
      AppDomain.Unload(domain); // strictly speaking, this is not required, but...
      ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:47:19.587

您不能卸载任何已加载的程序集。[影子复制](http://msdn.microsoft.com/en-us/library/ms404279.aspx)或将程序集加载到另一个域对您有帮助。

# javascript - 自定义 JS 提示弹窗

> ID：12458488
> 
> 赞同：1
> 
> 时间：2012-09-17T11:43:53.567
> 
> 标签：javascript, jquery, prompt

我正在寻找一种方法来自定义 JS 提示弹出窗口，以便我可以为用户提供我希望他们拥有的选项 -

1.  更改 - 从提示框中获取值并更改选中的值以首先启动提示。
2.  继续 - 不关心，继续原始值。
3.  取消 - 忘记这个，只是摆脱盒子。

默认情况下可以使用选项 1 和 3（尽管选项 1 被称为“Ok”），但我不知道有一种方法可以操纵提示以提供第三个选项。

我猜这不能通过 JS 完成，那么有没有 jQuery 插件可以帮助我？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:46:58.470

你是对的，你不能自定义浏览器的提示框：这是一个jquery ui插件，可以帮助你制作模态窗口：

[http://docs.jquery.com/UI/Dialog/dialog#options](http://docs.jquery.com/UI/Dialog/dialog#options)

您还可以使用和自定义（扩展）它：

[http://labs.abeautifulsite.net/archived/jquery-alerts/demo/](http://labs.abeautifulsite.net/archived/jquery-alerts/demo/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T11:47:03.397

jQuery UI 有一个可以用于此的[对话框组件。](http://jqueryui.com/demos/dialog/)

如果您正在寻找一个不那么臃肿的解决方案，[Google 搜索](https://www.google.com/search?q=jquery+dialog+plugin)会提供许多可重复使用的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T11:48:02.583

检查这个插件，我想你可以改变你需要的一切：[jAlert](http://labs.abeautifulsite.net/archived/jquery-alerts/demo/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T00:09:05.267

[https://github.com/bmmage/customAlert](https://github.com/bmmage/customAlert)

jquery 插件，允许自定义警报窗口和向下滑动警报框。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-10T12:09:22.043

尝试，

```
 $( function() {
    $( "#dialog" ).dialog();
  } );
```

```
.but{
    width: 33%;
    float: left;
    text-align:center;
}
input{width: 100%;}
```

```
 <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="/resources/demos/style.css">
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<div id="dialog" title="Basic dialog">
  <p>Enter any text</p>
  <input type="text" /><br><br>
  <div>
    <div class="but butt1"><button>Change</button></div>
    <div class="but butt2"><button>Continue </button></div>
    <div class="but butt3"><button>Cancel </button></div>
  </div>
</div> 
```

# c - 避免在 ansi C 中损坏 SD 卡

> ID：12458495
> 
> 赞同：5
> 
> 时间：2012-09-17T11:44:22.240
> 
> 标签：c, file-io, sd-card, embedded-linux, can-bus

我目前正在开发用于数据记录的嵌入式 Linux 设备。Linux 设备插入 CANbus 并将流量写入 SD 卡。

SD卡有时会损坏并以只读方式安装。需要避免这种行为。

文件系统为 FAT（SD 卡应保持可被 Windows 系统读取）。

嵌入式设备随时可能断电，因此我需要一种安全的方式从我的 C 程序写入 SD 卡。

因为我不是很喜欢 C，所以我依赖一个名为“candump”的程序，它基本上以这种格式将 canmessages 打印到标准输出：

```
<0x006> [8] 77 00 00 00 00 00 00 00 
```

我的 C 程序基本上打开 candump 程序，从标准输出读取，添加时间戳并删除不必要的字符：

```
1345836055.520 6 7700000000000000

while(running)
{
    if (filename != NULL)
    {
        fp_log = fopen(filename, "a");
        if (!fp_log) 
        {
            perror("fopen");
            exit (EXIT_FAILURE);
        }  
    }  

    fgets(line, sizeof(line)-1, fp);

    /* reset the row_values so they are always correctly initialized */
    row_identifier = 0;

    if (strchr(line,'<') != NULL)
    {
        /* creating a buffer char to store values for casting char to int*/
        buffer_ident[0] = line[4];
        buffer_ident[1] = line[5];

        /* cast buffer e.g. {'1','0','\0'} to int: 10 */
        row_identifier = strtol(buffer_ident,NULL,10);

        /* heartbeat of the CANBUS PLC */
        if(row_identifier == 80)
        {
            /* return pong on identifier 81 to the PLC */
            //system("cansend can0 -i 81 1 > /dev/null");
        }
        else
        {
            gettimeofday(&tv,NULL);
            fprintf(fp_log,"%d.%03d ", tv.tv_sec, tv.tv_usec/1000);
            fprintf(fp_log,"%d ",row_identifier);

            /* rowlenght > 11 = data part is not empty */
            row_lenght = strlen(line);
            if (row_lenght>11)
            {
                int i=0;
                for (i=11;i<row_lenght;i++)
                    /* remove spaces between the data to save space and copy data into new array */
                    if (isspace(line[i]) == 0)
                        fprintf(fp_log,"%c",line[i]);
            fprintf(fp_log,"\n");   
            }
        }
    }
    fclose(fp_log);

} 
```

上面的代码片段工作正常，只是我得到了 SD 卡损坏。

**解决方案**

我最终使用 ext3 作为具有标准挂载选项的文件系统。没有问题了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:03:35.610

损坏可能是因为操作系统没有完成对 FAT 文件系统的写操作。[正如J-16 SDiZ](https://stackoverflow.com/users/88442/j-16-sdiz)正确指出的那样，您可以尝试缓解`sync`不时强制操作系统在文件系统上写入更改的问题。

但是，您会遇到此类问题，因为您没有使用日志文件系统（例如 Ext3 或 NTFS。另一件要做的事情是`fsck`每次启动文件系统，然后显式强制`rw`重新挂载以保持挂载点清洁和可写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:57:25.560

即使您*不*移除电源，也会发生腐败吗？上面的代码只是用户级的，做简单的`FILE *`操作；它不应该损坏设备。

如果是，则设备驱动程序本身有问题，或者发生了其他事情。

您能否检查是否存在可能导致重置的电源问题？

# java - Tomcat 7 部署阻止我进行细微更改

> ID：12458496
> 
> 赞同：2
> 
> 时间：2012-09-17T11:44:24.130
> 
> 标签：java, tomcat, tomcat7, war

刚从 Tomcat 5 迁移到 Tomcat 7 并遇到部署问题。

我最初通过复制到 webapps 来部署我的应用程序小部件`widget.war`，这很有效，Tomcat 部署并引发了战争。

**当我想进行*更改*时，问题就出现了。**

如果我重新部署战争一切正常，但因为我将战争上传到远程服务器，这可能会很慢。因此，如果我只是更改一个类，我只需将新类直接复制到展开的文件夹结构中，然后关闭并重新启动 Tomcat，但它没有任何效果。

我想我已经解决了，因为 widget.war 被重新部署，所以我的新类被 widget.war 中的旧版本类取代。因此，我手动删除了 widget.war，因此它不会被覆盖，但是在关机/启动时我根本没有小部件文件夹。它消失了！

为什么会这样，这在 Tomcat 5 中没有发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T07:20:00.620

以这种方式部署单文件修复是一种确​​保无法重建服务器上正在运行的内容的可靠方法，这是一种痛苦但需要维护的情况。

干净的解决方案是*只部署完整的战争文件*。

现在你说复制到远程服务器很慢？有一个简单的解决方案：

在远程服务器的某个地方（Tomcat webapps 目录之外）保留一份最新的 war 文件的副本，并`rsync`在上面保存新版本：这应该会快得多，因为只需要传输更改的数据。然后从该目录部署。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T07:12:39.470

如果您在 tomcat 运行时删除 .war 文件，它也会删除展开的目录。您可以先关闭 tomcat，删除 .war 文件然后重新启动，或者更好，为什么不直接将 .war 文件手动解压缩到 webapps 文件夹中（但不要将 .war 文件放在 webapps 中）。

# scala - 使用 scala 2.10 反射的类型参数的运行时解析

> ID：12458502
> 
> 赞同：7
> 
> 时间：2012-09-17T11:44:53.597
> 
> 标签：scala, reflection, type-erasure, scala-2.10

给定类型声明，我能够解析类型参数。

```
scala> reflect.runtime.universe.typeOf[List[Int]] match {case x:TypeRef => x.args}
res10: List[reflect.runtime.universe.Type] = List(Int) 
```

对于运行时值，相同的方法不起作用。

```
scala> reflect.runtime.currentMirror.reflect(List(42)).symbol.toType match {case x:TypeRef => x.args}
res11: List[reflect.runtime.universe.Type] = List(B) 
```

有没有办法克服反射值的类型擦除？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T13:07:47.210

基于阅读 [Scala 获得的 TypeTag 知识的示例：什么是 TypeTag 以及如何使用它？](https://stackoverflow.com/questions/12218641/scala-2-10-what-is-a-typetag-and-how-do-i-use-it)[Eugene Burmako](https://stackoverflow.com/users/131615/eugene-burmako)在对您的问题的评论中 发布 ：

```
import scala.reflect.runtime.universe._

object ScalaApplication {
  def main(args: Array[String]) {
    printType(List(42))
    printType(List("42"))
    printType(List("42", 42))
  }    

  def printType[T : TypeTag](t: T) {
    println(typeOf[T])
  }
} 
```

这应该给出输出：

```
$ scala ScalaApplication.scala 
List[Int]
List[String]
List[Any] 
```

**[更新1：]**

但是，如果您想知道分配给类型引用的类型`Any`，您可能必须选择某种类型感知包装器：

```
import scala.reflect.runtime.universe._

object ScalaApplication {
  def main(args: Array[String]) {
    val anyWrapper = new AnyWrapper

    List(1,2,3).foreach { i =>
      i match {
        case 1 => anyWrapper.any = 42
        case 2 => anyWrapper.any = "a string"
        case 3 => anyWrapper.any = true
      }
      print(anyWrapper.any)
      print(" has type ")
      println(anyWrapper.typeOfAny)
    }
  }

  class AnyWrapper {
    private var _any: Any = null
    private var _typeOfAny: Type = null

    def any = _any
    def typeOfAny = _typeOfAny
    def any_=[T: TypeTag](a: T) = {
      _typeOfAny = typeOf[T]
      _any = a
    }

  }
} 
```

这应该给出输出：

```
$ scala ScalaApplication.scala 
42 has type Int
a string has type String
true has type Boolean 
```

但是这个解决方案仍然没有涵盖在编译时引用类型未知的情况。

**[更新 2：]**

如果将类型显式转换为 type 的引用`Any`，则可能必须在 match 语句中枚举所有可能的类型才能恢复类型：

```
import scala.reflect.runtime.universe._

object ScalaApplication {
  def main(args: Array[String]) {

    List(1,2,3).foreach { i =>
      val any: Any = i match {
        case 1 => 42.asInstanceOf[Any]
        case 2 => "a string".asInstanceOf[Any]
        case 3 => true.asInstanceOf[Any]
      }
      print(any)
      print(" has type ")
      println(matchType(any))
    }
  }

  def matchType(any: Any) = {
    any match {
      case a: Int => typeOf[Int]
      case a: String => typeOf[String]
      case a: Boolean => typeOf[Boolean]
    }
  }
} 
```

这应该给出输出：

```
$ scala ScalaApplication.scala
42 has type Int
a string has type String
true has type Boolean 
```

但是此解决方案要求您了解（并列出）您可以在`any`值中收到的所有可能类型。

# matlab - 估计算法/代码/程序中算术运算的数量

> ID：12458508
> 
> 赞同：1
> 
> 时间：2012-09-17T11:45:16.233
> 
> 标签：matlab

这听起来可能有点奇怪，但我想知道是否有一种方便的方法或程序可以估计代码中算术运算（例如加法、乘法等）的数量？我考虑过使用 if 语句和计数器，但代码有点大，可能有点麻烦。因此，如果有人能提出更方便的方法，我将不胜感激。谢谢。

# swing - 动态 GUI 上的自定义按钮

> ID：12458514
> 
> 赞同：0
> 
> 时间：2012-09-17T11:45:43.840
> 
> 标签：swing, jbutton, custom-component

我的 Swing-Application 通过 设置 JFrame 的大小`GraphicsEnvironment.getLocalGraphicsEnvironment().getMaximumWindowBounds()`，所有元素都与这个值相关，所以基本上应用程序会适应屏幕分辨率。

现在我的自定义按钮有问题。现在，我创建了三个不同的 ImageIcon（正常、翻转和按下）并将它们添加到按钮中。但很自然，如果我以不同于 1920x1080（这是我的默认设置）的分辨率运行应用程序，按钮就会太大。

我发现了这个问题（http://stackoverflow.com/questions/8234726/auto-resizing-jbutton-icon）并通过创建一个图标尝试了解决方案，将其放在Jlabel上并将标签添加到按钮，但什么都没有显示。另外，我不需要调整窗口大小。

这个主题的最快和解决方案是什么？一个选项是为每个分辨率单独创建所有自定义图像，在图像名称的末尾添加分辨率的 x 值，并让我们说一个 switch case 来检查应该加载哪个图像，但我认为这是一个非常昂贵且耗时的解决方案。是否有一种有效的方法可以将加载的图像自动调整为相对于屏幕分辨率的特定大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:03:33.233

如果您有[`Image`](http://docs.oracle.com/javase/7/docs/api/index.html?java/awt/Image.html)，您可以调用[`getScaledInstance`](http://docs.oracle.com/javase/7/docs/api/java/awt/Image.html#getScaledInstance%28int,%20int,%20int%29)来检索调整大小的图像。

如果你有一个[`ImageIcon`](http://docs.oracle.com/javase/7/docs/api/index.html?javax/swing/ImageIcon.html)，你可以调用`getImage()`它，检索一个`Image`，然后使用上面建议的解决方案。

`getScaledInstance`返回 an `Image`，您可以将其包装回 an`ImageIcon`并设置在 a`JButton`或 a上`JLabel`。

所以，我会创建尽可能高分辨率的图像，然后将它们缩小到适当的分辨率。

这是一个小片段（灵感来自您开始的@mKorbel 解决方案）：

```
import java.awt.BorderLayout;
import java.awt.Image;
import java.net.MalformedURLException;
import java.net.URL;

import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;

public class ResizeIconInButton extends JFrame {

    private static final long serialVersionUID = 1L;
    private static final String IMAGE_PATH = "http://duke.kenai.com/misc/Bullfight.jpg";
    private JButton myButton = new JButton();

    public ResizeIconInButton() throws MalformedURLException {
        myButton.setIcon(new ImageIcon(new ImageIcon(new URL(IMAGE_PATH)).getImage().getScaledInstance(600, 400, Image.SCALE_SMOOTH)));
        add(myButton, BorderLayout.CENTER);
        setTitle("Resize Icon In Button");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pack();
        setVisible(true);
    }

    public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    ResizeIconInButton main = new ResizeIconInButton();
                } catch (MalformedURLException e) {
                    e.printStackTrace();
                }
            }
        });
    }
} 
```

小提示：不建议扩展 JFrame，但我尝试尽可能接近原始代码。

# html - 引导下拉菜单不起作用

> ID：12458522
> 
> 赞同：102
> 
> 时间：2012-09-17T11:46:11.070
> 
> 标签：html, drop-down-menu, twitter-bootstrap

我无法让引导下拉菜单工作。这是我的导航html：

```
<ul class='nav'>
  <li class='active'>Home</li>
  <li class='dropdown'>
    <a class="dropdown-toggle" data-toggle="dropdown" href='#'>Personal asset loans</a>
    <ul class="dropdown-menu" role="menu">
      <li><a href="#">asds</a></li>
      <li class="divider"></li>
    </ul>
  </li>
  <li>Payday loans</li>
  <li>About</li>
  <li>Contact</li>
</ul> 
```

这里是脚本：

```
<script type="text/javascript" src="js/bootstrap/bootstrap-dropdown.js"></script>
<script>
     $(document).ready(function(){
        $('.dropdown-toggle').dropdown()
    });
</script> 
```

我究竟做错了什么？感谢您的回答！

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2014-06-01T22:08:03.140

我有同样的问题。经过几个小时的故障排除发现，

我有

```
<script type="text/javascript" src="Scripts/bootstrap.min.js"></script>
<script type="text/javascript" src="Scripts/jquery-2.1.1.min.js"></script> 
```

代替，

```
<script type="text/javascript" src="Scripts/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="Scripts/bootstrap.min.js"></script> 
```

希望这可以帮助某人

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2014-07-10T10:27:53.213

当我包含`bootstrap.min.js`两次时，我遇到了同样的问题。删除其中一个，它开始工作。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-01-22T01:37:49.940

仅供参考：如果您有 bootstrap.js，则不应*添加*bootstrap-dropdown.js。

我不确定 bootstrap.min.js 的结果。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-09-17T12:06:53.277

工作演示：[http ://codebins.com/bin/4ldqp73](http://codebins.com/bin/4ldqp73)

试试这个

```
<ul class='nav'>
  <li class='active'>Home</li>
  <li>
    <div class="dropdown">
      <a class="dropdown-toggle" data-toggle="dropdown" href="#">Personal asset loans</a>
      <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">            
        <li><a href="#">asds</a></li>
        <li class="divider"></li>
      </ul>
    </div>   
    </li>
    <li>Payday loans</li>
  <li>About</li>
  <li>Contact</li>
</ul> 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2013-03-15T19:36:37.097

对于您的样式，您需要包含引导程序的 css 文件，通常在`</head>`元素之前

```
<link href="css/bootstrap.css" rel="stylesheet"> 
```

接下来您需要包含 js 文件，建议将它们包含在文档的末尾，通常在`</body>`so 页面加载更快之前。

```
<script src="js/jquery.js"></script>        
<script src="js/bootstrap.js"></script> 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2020-12-01T18:37:48.240

我刚刚在我的索引页面中 添加了`JS`一部分，然后它工作了**粘贴这个，如果你使用的是最新版本的引导程序 (01.12.2020)**`bootstrap`

 **```
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script> 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2014-08-05T20:00:34.090

在正文标签中添加以下行。

```
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://code.jquery.com/jquery.js"></script>
  <!-- Include all compiled plugins (below), or include individual files 
        as needed -->
  <script src="js/bootstrap.min.js"></script> 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2014-06-27T03:22:35.467

您必须将此文件导入到`<head></head>`您的 html 中。

```
<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script> 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2012-09-17T12:05:29.593

你包括了 `jquery.js`吗？

另外，将此行代码与您的代码进行比较：

```
<a class="dropdown-toggle" data-toggle="dropdown" href="#">Personal asset loans<b class="caret"></b></a> 
```

看到这个版本可以正常工作。

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Bootstrap dropdown</title>
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css" />

</head>
<body>
    <div class="navbar">
        <div class="navbar-inner">
            <div class="container">
                <ul class="nav">
                    <a class="brand" href="#">w3resource</a>
                    <li class="active"><a href="#">Home</a></li>
                    <li><a href="#">Blog</a></li>
                    <li><a href="#">About</a></li>
                    <li><a href="#">Contact</a></li>
                    <li class="dropdown" id="accountmenu">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Tutorials<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">PHP</a></li>
                            <li><a href="#">MySQL</a></li>
                            <li class="divider"></li>
                            <li><a href="#">JavaScript</a></li>
                            <li><a href="#">HTML5</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="container-fluid">
     <h1>Dropdown Example</h1>
    </div>
    <script type="text/javascript" src="js/jquery-latest.js"></script>
    <script type="text/javascript" src="js/bootstrap.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('.dropdown-toggle').dropdown();
        });
   </script>
</body>
</html> 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-07-19T18:42:04.973

bootstrap 和 jquery 都必须包含：

```
<link type="text/css" href="/{ProjectName}/css/ui-lightness/jquery-ui-1.8.18.custom.css" rel="stylesheet" />
<script type="text/javascript" src="/{ProjectName}/js/jquery-x.x.x.custom.min.js"></script>

<link type="text/css" href="/{ProjectName}/css/bootstrap.css" rel="stylesheet" />
<script type="text/javascript" src="/{ProjectName}/js/bootstrap.js"></script> 
```

注意：jquery-xxxmin.js 版本**必须是 2.xx 版本**！！！

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2016-11-15T20:54:35.753

我想通了，最简单的方法就是复制并通过可以在[https://www.bootstrapcdn.com/](https://www.bootstrapcdn.com/)中找到的引导链接的 CDN和可以在此处找到的 Jquery CDN 脚本[https:// code.jquery.com/](https://code.jquery.com/)复制链接后，引导链接粘贴在 HTML 的头部，而 Jquery 脚本粘贴在 HTML 的正文中，如下例所示：

```
 <!DOCTYPE html>
    <html>
      <head>

        <title>Purrfect Match Landing Page</title>
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <!--<link rel="stylesheet" href="griddemo.css">

        <!-- Optional theme -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css">
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

      </head>

      <body>

        <!-- Latest compiled and minified JavaScript -->
        <script src="https://code.jquery.com/jquery-3.1.1.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js">      </script>    
      </body>
    </html> 
```

对我来说完美，希望它也适合你:)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-02-17T22:06:17.193

在头部试试这个

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"> 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-06-08T12:34:37.677

我在这里所做的是......

刚刚从我的项目中删除了 bootstrap.min.js 并将 bootstrap.js 添加到它，它开始工作......

```
bundles.Add(new ScriptBundle("~/bundles/bootstrap").Include(
                  "~/Scripts/bootstrap.js"
                  //"~/Scripts/bootstrap.min.js")); 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-08-20T06:26:48.027

试试这个代码：

```
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Bootstrap Tutorial</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
</head>
<body>
    <h1>Welcome to Bootstrap</h1>
    <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Dropdown button
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <a class="dropdown-item" href="#">Action</a>
            <a class="dropdown-item" href="#">Another action</a>
            <a class="dropdown-item" href="#">Something else here</a>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</body>
</html> 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2020-05-27T20:45:57.543

将 jQuery`<script>`和样式表下方的复制粘贴`<link>`到您的`<head>`文件中，以确保您正在加载所有必要的文件。

> 重要的是您的 JQuery`.js`文件位于`.css`样式表之上

**只需粘贴以下行进行测试**

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"> 
```

> 问题主要发生在加载 jQuery 脚本时，请确保正确添加引用。

**现在测试**

如果它不起作用，请检查引导网站，他们有一个示例实现。

[https://getbootstrap.com/docs/4.3/components/navbar/#supported-content](https://getbootstrap.com/docs/4.3/components/navbar/#supported-content)

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-04-18T22:18:53.320

您必须检查冲突的 css 文件/属性，例如，您可能在其他地方有“.nav”自定义样式内容尝试禁用您自己的 css 文件并检查是否有效，然后检查导致冲突的文件或自定义样式也确保您在代码中包含 bootstrap.min.js

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-05-03T10:14:40.793

我有一个类似的问题只是观察到我已经添加了**两次**引导脚本，第二个引导脚本在 jquery 脚本**之上。**

解决方案：

*   确保 bootstrap.min.js 和 jquery.min.js 在您的文件中只包含一次。
*   bootstrap.min.js 脚本应该包含在 jquery.min.js 之后

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-02-29T21:21:03.003

[检查 popper.js 库，因为我有同样的问题，您可以在https://getbootstrap.com/](https://getbootstrap.com/)上找到 bootstrap、jquery 和 popper CDN 的下拉菜单， 或者复制以下脚本标签

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2020-03-30T15:29:12.237

对于最新的 Bootstrap，您将需要**Popper.js**

```
<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script> 
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script> 
```

`<body>`在Tag 内部的 Tag之前复制 Body 的 End of the Body 部分的链接`<Head>`。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2021-05-07T14:22:28.283

在我的情况下，原来的问题原来是答案。在[引导程序文档页面](https://getbootstrap.com/docs/4.0/components/navbar/)上，没有提到使用脚本来启用下拉菜单，但至少在我的情况下，它似乎是必要的。

一旦我从原始问题中添加了这个脚本，它就会神奇地开始工作。

```
<script>
 $(document).ready(function(){
    $('.dropdown-toggle').dropdown()
});
</script> 
```

--编辑：根本原因与我的父导航容器的格式有关，我吹走了我的整个导航部分并用引导示例替换它，它开始在没有脚本的情况下工作。因此，这两种解决方案都有效，但对我来说，把它吹走似乎是“正确”的方式，因为脚本感觉像是作弊。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-02-06T17:11:50.453

我遇到了同样的问题，导致我来到这里。

我的问题：我使用推荐的 jquery 1.12.0 版本作为我的 jquery 脚本文件。

解决方案：将 jquery 脚本替换为 jquery 2.2.0 版本。

这为我解决了它。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-07-17T20:45:20.093

对我来说，这是一个 CORS 问题。我`crossorigin="anonymous"`从脚本中删除了导入标签，它又开始工作了。

顺便说一句，最新的脚本标签，按正确的顺序，总是可以在这里找到：[https ://getbootstrap.com/](https://getbootstrap.com/)

编辑：显然添加`defer`到`script`标签也会破坏所有引导程序的好东西。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-05-02T21:19:20.520

复制/粘贴 CSS 链接，后跟来自 bootstrap 站点的 JS[链接](https://getbootstrap.com/docs/4.3/getting-started/introduction/)。然后下拉应该工作。

我的页面看起来像：

```
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <title>Website Title</title>
  </head>
  <body>
    <div id="content" />
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="#">Navbar</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Link</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Dropdown
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="#">Action</a>
              <a class="dropdown-item" href="#">Another action</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="#">Something else here</a>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link disabled" href="#">Disabled</a>
          </li>
        </ul>
        <form class="form-inline my-2 my-lg-0">
          <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
          <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
        </form>
      </div>
    </nav>
  </body>
</html> 
```

（从[这里](https://getbootstrap.com/docs/4.1/components/navbar/)导航栏）

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2020-11-23T00:22:58.387

当我混合 css 和 bootstrap 版本时，我的（同样的）问题出现了。我正在使用版本 3 bootstrap.min.js 和版本 4.5 bootstrap.min.css

如果您最近在静态文件夹中加载或覆盖了一堆 css 和 js 文件，那么这将是一个不错的起点。

祝你好运。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-09-09T14:43:18.087

我在使用 Angular 12 和 Bootstrap 5 时遇到了这个问题。我的问题是我错误地将 CSS 文件放入了脚本部分：

```
 "styles": [
          "node_modules/angular-calendar/css/angular-calendar.css",
          "node_modules/bootstrap/dist/css/bootstrap.min.css",
          "node_modules/bootstrap-icons/font/bootstrap-icons.css",
          "node_modules/sweetalert2/src/sweetalert2.scss",
          "src/styles.css"
        ],
        "scripts": [
          "node_modules/bootstrap/dist/js/bootstrap.bundle.min.js",
          "node_modules/sweetalert2/src/sweetalert2.scss"  <===== in wrong section
        ] 
```

该应用程序构建正常并且在浏览器控制台中没有显示任何错误，但下拉切换没有任何作用。

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2019-09-15T19:47:50.157

我已经使用 Angular 7、jQuery 3.4.1、Popper 1.12.9 和 Bootstrap 4.3.1 进行了设置，没有什么对我有用，我在样式上做了这个小技巧：

```
.dropdown.show .dropdown-menu {
    opacity: 1 !important;
} 
```

Html 看起来像这样：

```
<nav class="navbar navbar-expand-lg navbar-dark fixed-top py-1">
 <div class="container-fluid">
    <ul class="navbar-nav">
        <li class="nav-item dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" id="dropdown-id"
                aria-expanded="false">Menu</button>
            <div class="dropdown-menu" aria-labelledby="dropdown-id">
                <a class="dropdown-item" [routerLink]='["/"]'>Main page</a>
                <a class="dropdown-item" [routerLink]='["/about"]'>About</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" [routerLink]='["/about/terms"]'>Terms</a>
                <a class="dropdown-item" [routerLink]='["/about/privacy"]'>Privacy</a>
            </div>
        </li>
     </ul>
  </div>
</nav> 
```**

# java - 如何设置 Intellij 以在程序上运行 javap 命令？

> ID：12458525
> 
> 赞同：9
> 
> 时间：2012-09-17T11:46:14.347
> 
> 标签：java, intellij-idea

我使用 Intellij Idea 进行开发，我想将 Intellij 配置为可选地使用 javap -c feature 。有没有插件？我怎么做 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T11:57:20.410

您可以[配置一个外部工具](http://www.jetbrains.com/idea/webhelp/configuring-third-party-tools.html)来运行`javap`.

# java - 匿名侦听器会增加堆大小吗？

> ID：12458528
> 
> 赞同：3
> 
> 时间：2012-09-17T11:46:23.087
> 
> 标签：java, android, listener

我想知道使用匿名听众是否是一种好习惯？

例如，我有一个包含 50 个项目的列表。他们每个人都有一个`onClickListener`使用匿名侦听器实现的。这是否意味着我要在堆中创建 50 个新项目？

```
for (x;x;x) {
   item.setOnClickListener(new OnClikListener() {
      ...
    });
} 
```

如果我只创建 1 个侦听器对象，然后将这 50 个列表项分配给该单个侦听器。会不会更有效率？

```
OnClickListener listener = new OnClickListener() {
   ...
};

for (x;x;x) {
   item.setOnClickListener(listener);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:50:48.993

它是匿名的这一事实是无关紧要的。您创建的每个对象实例都在堆上。如果您可以为许多按钮重用相同的侦听器，那么一定要这样做：它将需要更少的内存，并且会产生更少的垃圾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T11:49:17.890

是的，有一个简单的规则：每次执行时`new`都会创建一个新对象。您实例化的类是匿名类并不重要。

如果创建的对象都是相同的（即您没有关闭某些变化的变量），那么用单个共享实例替换它们是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T11:50:15.670

1）是的，这需要时间。实际上，您不仅将侦听器创建为对象，而且创建为类（但那些已经编译）。

2）是的，它会更有效率。也就是说，除非您的听众需要大量资源，否则它不会大大提高性能。确定增加的代码复杂性是否值得。

# ios - iOS：使用 CGContextAddLineToPoint 绘制多条线

> ID：12458531
> 
> 赞同：2
> 
> 时间：2012-09-17T11:46:28.263
> 
> 标签：ios, xcode, cgcontext

我正在用drawrect写这段代码

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetLineWidth(context, 10);
CGContextSetStrokeColorWithColor(context, [UIColor yellowColor].CGColor);

CGContextMoveToPoint(context, 502,530);
CGContextAddLineToPoint(context, x2, y2);

CGContextMoveToPoint(context, 502, 530);
CGContextAddLineToPoint(context, x3, y3);

CGContextMoveToPoint(context, 502, 530);
CGContextAddLineToPoint(context, x4, y4);

NSLog(@"%d,%d--%d,%d--%d,%d",x2,y2,x3,y3,x4,y4);

CGContextStrokePath(context); 
```

但是这段代码总是只画两条不正确的线它从不画第三条线当我给出静态值而不是 x 和 y 代码在三行时工作正常当我 NSLOG x 和 y 我得到正确的所需值但没有根据线绘制为此，我想用不断变化的坐标绘制 4-5 条线

请告诉我哪里出了问题或解决此问题的任何其他替代方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:54:31.173

![在此处输入图像描述](../Images/755195f5327789adca757ddc73e1a0dc.png)

上面的代码运行良好，它们制作了三行单独的行（所有（502、530）的起点相同）。我认为你给两个点的结束位置（如 x3，y3 或 x4，y4）是相同的方向，这就是为什么你只得到两条线，如果你想区分这些线，你可以用不同颜色的线像...

```
int x2, y2, x3, y3,x4, y4;
x2 = 100;
y2 = 100;
x3 = 200;
y3 = 200;
x4 = 200;
y4 = 50;

CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetLineWidth(context, 10);

// line 1
CGContextSetStrokeColorWithColor(context, [UIColor yellowColor].CGColor);    
CGContextMoveToPoint(context, 502,530);
CGContextAddLineToPoint(context, x2, y2);
CGContextStrokePath(context);

// line 2
CGContextSetStrokeColorWithColor(context, [UIColor blueColor].CGColor);    
CGContextMoveToPoint(context, 502, 530);
CGContextAddLineToPoint(context, x3, y3);
CGContextStrokePath(context);

// line 3
CGContextSetStrokeColorWithColor(context, [UIColor redColor].CGColor);    
CGContextMoveToPoint(context, 502, 530);
CGContextAddLineToPoint(context, x4, y4);
CGContextStrokePath(context);

NSLog(@"%d,%d--%d,%d--%d,%d",x2,y2,x3,y3,x4,y4); 
```

# c# - 禁止对 ASP.NET Web API 中的 JsonMediaTypeFormatter 进行RequiredAttribute 验证

> ID：12458532
> 
> 赞同：3
> 
> 时间：2012-09-17T11:46:29.727
> 
> 标签：c#, asp.net-web-api, data-annotations, json.net

假设我向我的 API 发送了以下请求：

```
POST http://localhost:4940/api/cars HTTP/1.1
User-Agent: Fiddler
Host: localhost:4940
Content-Type: application/json
Content-Length: 44

{"Make":"Make1","Year":2010,"Price":10732.2} 
```

我有以下 Car 类定义：

```
public class Car {

    public int Id { get; set; }

    [Required]
    [StringLength(20)]
    public string Make { get; set; }

    [Required]
    [StringLength(20)]
    public string Model { get; set; }

    public int Year { get; set; }

    [Range(0, 500000)]
    public float Price { get; set; }
} 
```

我得到的回复如下：

```
HTTP/1.1 400 Bad Request
Cache-Control: no-cache
Pragma: no-cache
Content-Type: application/json; charset=utf-8
Expires: -1
Server: Microsoft-IIS/8.0
X-AspNet-Version: 4.0.30319
X-SourceFiles: =?UTF-8?B?RTpcRHJvcGJveFxCb29rc1xQcm9XZWJBUEkuU2FtcGxlc1xDaGFwdGVyMTNcRGF0YUFubm90YXRpb25WYWxpZGF0aW9uQXR0cmlidXRlc1NhbXBsZVxEYXRhQW5ub3RhdGlvblZhbGlkYXRpb25BdHRyaWJ1dGVzU2FtcGxlXGFwaVxjYXJz?=
X-Powered-By: ASP.NET
Date: Mon, 17 Sep 2012 11:38:58 GMT
Content-Length: 182

{"Message":"The request is invalid.","ModelState":{"car":["Required property 'Model' not found in JSON. Path '', line 1, position 44."],"car.Model":["The Model field is required."]}} 
```

以下是更易读的消息正文形式：

```
{
    "Message": "The request is invalid.",
    "ModelState": {
        "car": [
            "Required property 'Model' not found in JSON. Path '', line 1, position 44."
        ],
        "car.Model":[
            "The Model field is required."
        ]
    }
} 
```

正如您所看到的，我还有一条关于汽车的附加错误消息，我猜测`JsonMediaTypeFormatter`执行验证也是如此，但它无法执行读取操作。

这是这里的问题吗？有什么方法可以抑制 JsonMediaTypeFormatter 级别的验证？我不希望格式化程序执行验证，因为验证也是由`IBodyModelValidator`格式化程序读取消息正文后执行的。

**编辑：**

我调试了源代码，`JsonMediaTypeFormatter`如果属性标记为必需但未提供，它会抛出错误。以下代码是以下代码的一部分`JsonMediaTypeFormatter`：

```
// Error must always be marked as handled
// Failure to do so can cause the exception to be rethrown at every recursive level and overflow the stack for x64 CLR processes
jsonSerializer.Error += (sender, e) =>
{
    Exception exception = e.ErrorContext.Error;
    formatterLogger.LogError(e.ErrorContext.Path, exception);
    e.ErrorContext.Handled = true;
} 
```

这会触发`ModelStateFormatterLogger.LogError`将错误放入的方法`ModelState`：

```
public void LogError(string errorPath, Exception exception)
{
    if (errorPath == null)
    {
        throw Error.ArgumentNull("errorPath");
    }
    if (exception == null)
    {
        throw Error.ArgumentNull("exception");
    }

    string key = ModelBindingHelper.ConcatenateKeys(_prefix, errorPath);
    _modelState.AddModelError(key, exception);
} 
```

我仍然无法抑制这种行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T12:57:09.677

对不起，我最初误解了你的问题。好的，这是您需要做的：

创建从原始类派生的类`JsonMediaTypeFormatter`并设置自定义`IRequiredMemberSelector`

```
public class MyJsonMediaTypeFormatter : JsonMediaTypeFormatter
    {
        public MyJsonMediaTypeFormatter() : base()
        {
            RequiredMemberSelector = new MyRequiredMemberSelector();
        }
    } 
```

在此自定义`IRequiredMemberSelector`中，只需定义所有不需要的属性。

```
public class MyRequiredMemberSelector : IRequiredMemberSelector
{
    public bool IsRequiredMember(System.Reflection.MemberInfo member)
    {
        return false;
    }
} 
```

现在用自定义的替换默认值`JsonMediaTypeFormatter`，然后就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-16T12:28:27.893

我知道这是一个老问题，但如果其他人有兴趣，我设法通过创建一个 [IsNotEmpty] 注释来解决这个问题。

这使用反射来确定属性上是否有 Empty 的实现，如果有，则对其进行比较。然后在模型验证时获取，而不是在解析 JSON 时。

```
public class IsNotEmptyAttribute : ValidationAttribute
{

    public override bool IsValid(object value)
    {

        if (value == null) return false;

        var valueType = value.GetType();
        var emptyField = valueType.GetField("Empty");

        if (emptyField == null) return true;

        var emptyValue = emptyField.GetValue(null);

        return !value.Equals(emptyValue);

    }
} 
```

# microsoft-metro - 如何在 Metro 应用程序中检测休眠

> ID：12458533
> 
> 赞同：1
> 
> 时间：2012-09-17T11:46:29.780
> 
> 标签：microsoft-metro, windows-runtime, power-management

当设备进入休眠状态以关闭现有服务器连接时，是否有任何方法可以在 Metro 应用程序中获得通知？

再次醒来时可能会造成麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:12:47.090

Metro Style 应用程序中有用于暂停和恢复的事件。

请注意，当您在 Visual Studio 中调试时，这些将不起作用 - 使用调试工具栏上的暂停和恢复按钮

# android - 为什么我的 EditText 不保存它的状态（主要是它的文本）？

> ID：12458534
> 
> 赞同：0
> 
> 时间：2012-09-17T11:46:33.660
> 
> 标签：android, android-edittext, fragment, android-lifecycle, android-orientation

所以 EditTexts 应该在改变方向时保存它们的文本。在这个特定的片段中，他们没有。这是为什么？

我的片段：

```
 public class LoginFragment extends Fragment {

    /**
     * @param inflater
     * @param container
     * @param savedInstanceState
     * @return
     * @see android.support.v4.app.Fragment#onCreateView(android.view.LayoutInflater,
     *      android.view.ViewGroup, android.os.Bundle)
     */
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    return inflater.inflate(R.layout.login, container, false);

    }

    /**
     * 
     * @see android.support.v4.app.Fragment#onStart()
     */
    @Override
    public void onStart() {
    super.onStart();

    getView().findViewById(R.id.login_ok).setOnClickListener(
        new OnClickListener() {

            public void onClick(View v) {
            startActivity(new Intent(getActivity(),
                StartActivity.class));
            }
        });
    }
} 
```

我在 xml 中的编辑文本：

```
 <EditText
        android:id="@+id/login_user"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="8dp"
        android:background="@drawable/roundedcorner"
        android:ems="10"

        android:hint="@string/email"
        android:inputType="textEmailAddress"
        android:padding="8dp" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/login_pw"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="8dp"
        android:background="@drawable/roundedcorner"
        android:ems="10"

        android:hint="@string/password"
        android:inputType="textPassword"
        android:padding="8dp" /> 
```

这是我的活动的 onCreate 方法：

```
super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_login);
    FragmentManager fm = getSupportFragmentManager();
    FragmentTransaction ft = fm.beginTransaction();
    ft.add(R.id.login_frame, new LoginFragment());
ft.commit();` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:36:23.633

当方向改变时，Activity 会被重新创建，这是正确的。但是，不需要处理 UI 元素的状态：

> 几乎 Android 框架中的每个小部件都适当地实现了此方法，以便在重新创建活动时自动保存和恢复对 UI 的任何可见更改。例如，EditText 小部件保存用户输入的任何文本，而 CheckBox 小部件保存它是否被选中。您需要做的唯一工作是为每个要保存其状态的小部件提供唯一 ID（带有 android:id 属性）。如果小部件没有 ID，则系统无法保存其状态。

来自：http: [//developer.android.com/guide/components/activities.html#SavingActivityState](http://developer.android.com/guide/components/activities.html#SavingActivityState)

**注意：**如果您想保留 EditText 值，即使用户使用 BACK 按钮，您也需要一个持久网存储。onSaveInstanceState 不会被调用。

这是一个简单的示例（保留 EditText 值）：

```
public class MainActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.acitivty_main); 
    }
}

public class EditFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        return inflater.inflate(R.layout.fragment_edit, container);
    }
} 
```

.XML 文件

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/fragment_id"
    android:name="com.example.fragementtest.EditFragment"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <EditText
        android:id="@+id/editText1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:ems="10" >
    </EditText>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T15:31:44.937

好的，所以我遇到了这个问题，因为我将带有 FragmentTransaction 的 Fragment 添加到 FrameLayout（具有唯一 ID）中。

现在，我再次在 XML 中使用唯一 ID 声明了我的 Fragment，它可以工作了。

如果容器具有唯一 ID，我无法真正解释为什么在使用 FragmentTransaction 添加它时它不起作用，但至少它现在起作用了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-25T01:16:17.467

确保 TextEdit 和 TextView 字段保留其内容的一种简单方法是设置它们的 freezesText 属性。

# svn - SVN MERGE：非祖先分支到主干

> ID：12458537
> 
> 赞同：1
> 
> 时间：2012-09-17T11:46:43.907
> 
> 标签：svn, svn-merge

我想将刚刚提交给分支文件夹（实际上并未分支）的分支合并到主干。这是细节。

```
repo/
    /trunk
         /mymagento     // at rivision 500

    /branch
        /magento
        /magento1.6
        /magento1.7     //at rivision 480 
```

Magento1.7 实际上并不是从主干 mymagento 分支出来的。想法是将 Magento1.7 的更改合并到 mymagento 中，以便升级。

到目前为止，我已经尝试过这些 svn Merge 表单：

```
merge sourceURL1[@N] sourceURL2[@M] [WCPATH]

merge sourceWCPATH1@N sourceWCPATH2@M [WCPATH]

Where WCPATH = /var/www/magento/ 
```

我尝试了很多类似的参数`--accept theirs-full` `--reintegrate` `--ignore-ancestry`（当然有正确的语法）

但是它们都没有正常工作。最多我将 svn 属性更改标记为已合并。但不是 Magento1.7 文件的实际更改

取diff的合并命令后，SVN报告如下信息

```
Property changes on: dropdown.js
 ___________________________________________________________________
 Modified: svn:mergeinfo
 Merged /branches/magento1.7/js/lib/dropdown.js:r5154 
```

请建议我在这种情况下应该怎么做？非常感谢您的时间和精力。

# jquery - 通过 Ajax 调用 web 服务

> ID：12458539
> 
> 赞同：0
> 
> 时间：2012-09-17T11:46:48.060
> 
> 标签：jquery, ajax, web-services, rest

*我哪里错了？*我需要在单击其“OnClientClick”属性的按钮上进行服务调用，我为Ajax 调用了xyz()。但这是行不通的。

这是我的 JS：

```
function xyz() {
            $.ajax({
                type: 'POST',
                url: 'http://localhost:9210/xyzmodule/xyzmethod',
                data: "{ field1: '" + $("#txtfield1").val() + "' field2: '" + $("#txtfield2").val() + "' field3: '" + $("#dattimefield3").val() + "'}",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                error: function () {
                    alert('Data null');
                },
                success: function () {
                    alert('Success');
                }
            });
        } 
```

这是我的服务没有被 Ajax 调用调用——应该调用 Web 服务。但事实并非如此。

```
[HttpPost()]
    public String xyzmethod(string json)
    ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:51:24.020

你有没有尝试过：

```
function xyz() {
            $.ajax({
                type: 'POST',
                url: 'http://localhost:9210/xyzmodule/xyzmethod',
                data: {field1: $("#txtfield1").val(), field2: $("#txtfield2").val(), field3: $("#dattimefield3").val()},
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                error: function (jqXHR, textStatus, errorThrown) {
                    console.log(textStatus + ' - ' + errorThrown);
                    for (var i in jqXHR) {
                        console.log(i + ' = ' + jqXHR[i]);
                    }
                },
                success: function () {
                    alert('Success');
                }
            });
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:18:35.003

语法应该是：

```
 $.ajax({
            type: 'POST',
            url: 'http://localhost:9210/xyzmodule/xyzmethod',
            data: { field1: $("#txtfield1").val(), field2: $("#txtfield2").val(), field3: $("#dattimefield3").val() },               
            error: function () {
                alert('Data null');
            },
            success: function () {
                alert('Success');
            }
        }); 
```

或者您可以在调用之前构建数据对象以便于阅读

```
var pars = {};
pars["textField1"] = $('#txtField1').val(); 
```

您也可以这样做：（例如，如果您使用动态变量）

```
var myfield = "myfield2";
pars[myfield] = $('#'+myfield).val(); 
```

然后：

```
 $.ajax({
            type: 'POST',
            url: 'http://localhost:9210/xyzmodule/xyzmethod',
            data: pars,
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            error: function () {
                alert('Data null');
            },
            success: function () {
                alert('Success');
            }
        }); 
```

希望有帮助

# javascript - 如何在使用 Spring MVC 时重新加载 HTML 表格而不刷新整个页面

> ID：12458540
> 
> 赞同：4
> 
> 时间：2012-09-17T11:46:47.250
> 
> 标签：javascript, html, spring-mvc, jsp-tags

我正在使用带有 Javascript 的 Spring MVC、example.jsp 文件。
我已经坚持了很长时间。

是否可以使用 Javascript 将新数据从 DB 加载到 HTML 表中而不刷新整个页面？

我只是不希望在带有某些事件的新数据加载到表中时替换整个页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T12:31:25.510

如果您想使用 JavaScript 重新加载页面的一部分，基本上是 AJAX。
这就是你应该这样做的方式。

## 客户端

假设您使用[jQuery](http://jquery.com/)作为 JavaScript 框架。
您需要在客户端使用[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)。

```
var successHandler = function( data, textStatus, jqXHR ) {
  // After success reload table with JavaScript
  // based on data...
};

var errorHandler = function( jqXHR, textStatus, errorThrown ) {
  // Error handler. AJAX request failed.
  // 404 or KO from server...
  alert('Something bad happened while reloading the table.');
};

var reloadData = function() { 
  // Process your request
  var request = new Object();
  request.id = 'some id'; // some data

  // Make the AJAX call
  jQuery.ajax({
    type       : 'POST',
    url        : 'http://domain/context/reload-data-url',
    contentType: 'application/json',
    data       : JSON.stringify(request)
    success    : successHandler,
    error      : errorHandler
  });
}; 
```

`reloadData()`当您需要重新加载表时调用该函数。

## 服务器端

您正在使用 Spring MVC。然后你的控制器应该看起来像：

```
 // Spring MVC Controller
 @Controller
 public class ReloadDataController {

   // Request Mapping
   @RequestMapping(value = '/reload-data-url', method = RequestMethod.POST)
   @ResponseBody
   public ResponseEntity<String> processReloadData(@RequestBody String body) {

     // Get your request
     JSONObject request = new JSONObject(body);
     String id = request.getString("id"); // Here the value is 'some id'

     // Get the new data in a JSONObject
     JSONObject response = new JSONObject();
     // build the response...

     // Send the response back to your client
     HttpHeaders headers = new HttpHeaders();
     headers.add("Content-Type", "application/json; charset=utf-8");
     return new ResponseEntity<String>(response.toString(),
                headers, HttpStatus.OK);
   }

 } 
```

您不必使用 JSON，但我认为这是最好的方法。希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-15T15:12:59.137

我也被困住了，然后我终于找到了这个使用的解决方案`ModelAndView` See this solution it may work [Thymeleaf table update without page reload](https://stackoverflow.com/questions/54723711/thymeleaf-table-update-without-page-reload)

我的回答会迟到，但有人可能会帮助......

# click - 如何禁用 ctrl+click 在 IE 10 中选择文本？

> ID：12458542
> 
> 赞同：6
> 
> 时间：2012-09-17T11:46:48.387
> 
> 标签：click, textselection, internet-explorer-10, ctrl

在 IE 10 中，当您在按住键的同时单击任何文本时`CTRL`，浏览器会选择文本（这意味着文本获得焦点，我想避免这种情况，因为我有一些多选场景，其中`CTRL`+click 表示添加/删除选择） .

如何禁用此“功能”？

顺便说一句，我仍然希望能够使用通常的鼠标操作来选择文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T08:42:36.767

可以通过完全禁用选择来禁用此功能。

这可以通过使用IE10 中引入的**-ms-user-select来完成。**（另见：http: [//ie.microsoft.com/testdrive/HTML5/msUserSelect/Default.html](http://ie.microsoft.com/testdrive/HTML5/msUserSelect/Default.html)）

**示例：**要禁用选择，请将以下 css 类添加到包含文本或其父元素之一的元素：

```
.notselectable
{
    -ms-user-select: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T22:34:19.500

要防止 IE 8`CTRL`并`SHIFT`单击单个元素上的文本选择，请使用以下命令：

```
var obj = document.createElement("DIV");
obj.onselectstart = function(){
  return false;
} 
```

要防止在文档上选择文本，请使用以下命令：

```
window.onload = function(){
  document.onselectstart = function(){
    return false;
  }
} 
```

# php - 如何在 Zend 1.11 中渲染不同控制器的不同动作的 2 个视图

> ID：12458550
> 
> 赞同：2
> 
> 时间：2012-09-17T11:47:11.150
> 
> 标签：php, zend-framework

我有2个控制器。

1.  类别控制器

    ```
    public function readAction()
    {
       $id = $this->_request->getParam('id');
       $categoryModel = new Model_Category();
       if(!$categoryModel)
       {
           throw new \Exception(__METHOD__.', could not create category model');
       }
       $category = $categoryModel->getCategory($id);
       $parent = $category->findParentRow(new Model_Category());
       if(!$parent)
       {
           $this->view->parent = 'no parent';
       }
       else
       {
           $this->view->parent = $parent->name;
       }

       // I need to pass category object to read.phtml of controller category
       // so that each attributes of the category could be displayed.
       $this->view->category = $category;

       // Below the category section, I also need to list all 
       // the business entities which are the child rows of that category. 
       // So I forward to controller business, action list.
       // Normally I use list.phtml in controller business to do that.
       $this->_forward('list', 'business');
     } 
    ```

2.  业务控制器

但是在我调用_forward之后，read.phtml没有显示出来，我只能看到controller业务的list.phtml。我的问题是，如果我想同时调用控制器类别的read.phtml和控制器业务的list.phtml怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:54:53.407

转发前渲染当前动作：

```
public function readAction()
{
    // ...
    $this->render();
    $this->_forward('list', 'business');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:55:03.230

在您的 read.phtml 视图中，您可以使用：

echo $this->render('business/list.phtml');

显示另一个视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:35:11.767

您可以`$viewRenderer->setResponseSegment('someOtherThanContent')`在最近的布局中使用和渲染它

```
$this->layout()->someOtherThanContent; 
```

# reporting-services - 如何验证 SSRS Reporting Services 安装

> ID：12458551
> 
> 赞同：1
> 
> 时间：2012-09-17T11:47:13.270
> 
> 标签：reporting-services, ssrs-2008

**ETA2：已**解决，请参阅下面的答案。

**ETA：**以下内容特定于 SQL Server 2008 R2 Express。从那以后，我卸载了 express 并安装了 SQL Server 2008 R2 企业版。问题仍然存在，唯一的区别是虚拟服务器目录现在称为**ReportServer**，而不是**ReportServer_SQLEXPRESS2**。

* * *

我已经在本机模式下为 SQL Server 2008 R2 Express 安装了 SSRS。在安装过程中，我将所有内容都保留为默认值。

如果我打开“Reporting Services 配置管理器”并单击“Web 服务 URL”，我会看到：

虚拟目录：ReportServer_SQLEXPRESS2
IP 地址：全部分配（推荐）
TCP 端口：80 SSL 证书：（未选择）
SSL 端口：...

网址：`http://225-PC:80/ReportServer_SQLEXPRESS2`

此网址不起作用（HTTP 404）。
我已验证报告服务正在运行。

在上述网址起作用之前，我还需要执行一些其他操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T22:33:21.313

我认为您还想继续并设置数据库连接。那么事情应该会奏效。如果不是，则可能存在网络或配置问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T07:48:36.803

我不得不在防火墙上打开端口 80。

见[这里](http://msdn.microsoft.com/en-us/library/bb934283.aspx)。

# actionscript-3 - 在 as3/flex 中移动图像时会引发 #2025 错误

> ID：12458558
> 
> 赞同：0
> 
> 时间：2012-09-17T11:48:05.873
> 
> 标签：actionscript-3, apache-flex

当我尝试运行代码时，它会引发错误：

> TypeError：错误 #1034：类型强制失败：无法将 mx.controls::Image@a9030b1 转换为 mx.containers.Canvas。

当我只是尝试更换

```
var num1:int = Canvas(event.currentTarget).mouseX; 
```

和

```
var num1:int = Image(event.currentTarget).mouseX; 
```

它抛出以下错误：

> ArgumentError：错误 #2025：提供的 DisplayObject 必须是调用者的子对象。

下面是代码，

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" creationComplete="carcan();">
<mx:Script>
    <![CDATA[

            import mx.containers.Canvas;
            import mx.controls.Image;

            private var images:Array;
            private var dragInitiator:Image = new Image();
            private const IMAGE_COUNT:uint = 5;
            private var img:Image;

            private var dragInitiator:Image = new Image();

            private var points:flash.geom.Point;
            private var offset_x:int;
            private var offset_y:int;
            private var canal:Canvas;
            private var doDrag:Boolean;

            [Embed(source='cards/2C.png')]
            private var Image0:Class;

            [Embed(source='cards/2D.png')]
            private var Image1:Class;

            [Embed(source='cards/2H.png')]
            private var Image2:Class;

            [Embed(source='cards/2S.png')]
            private var Image3:Class;

            [Embed(source='cards/3C.png')]
             private var Image4:Class;

             public function carcan():void
             {
                canal = new Canvas();
                canal.setStyle("backgroundColor","blue");
                canal.x=100;
                canal.y=50;
                canal.width=500;
                canal.height=400;
                this.addChild(canal);
                init();
             }

             public function init():void
             {
              images = new Array(IMAGE_COUNT);

                 for (var i:int = 0; i < IMAGE_COUNT; i++)
                    {
                         img= new Image();
                            images[i] = this["Image" + i];
                            trace(images[i]);

                    img.x=(i*30)+50;
                    img.source=images[i];
                    img.id="Image"+i;
                    canal.addChild(img);

                     img.addEventListener(MouseEvent.MOUSE_DOWN, md);
                    img.addEventListener(MouseEvent.MOUSE_MOVE, mm);
                    img.addEventListener(MouseEvent.MOUSE_UP, mu); 

                    }

             }

                public function md(event:MouseEvent):void
            {
                img = new Image();
                doDrag=true;

                canal.setChildIndex(Image(event.target), images.length-1);
                img.addEventListener(MouseEvent.MOUSE_MOVE, mm);

            }
            public function mm(event:MouseEvent):void
            {

                 if(doDrag==true)
                 {
                    points = new Point();
                images = new Array(IMAGE_COUNT);

                img = new Image();
                img = Image(event.target);

                points.x=event.target.x;
                points.y=event.target.y;
                points = localToGlobal(points);
                img.x=points.x;
                img.y=points.y;

                var boundar:flash.geom.Rectangle=new Rectangle(this.x, this.y, this.width/ 2 + 3 * offset_x, this.height / 2 + 3 * offset_x);
                img.startDrag(false, boundar);
                 }
            }

            public function onmove(event:MouseEvent):void
            {

                img = new Image();

            }

            public function mu(event:MouseEvent):void
            {
                canal = new Canvas();
                canal.stopDrag();
                doDrag=false;

                this.stopDrag();
                doDrag=false;
                var num1:int = Canvas(event.currentTarget).mouseX;

        if(num1 > 50 && num1 < 80){
             canal.setChildIndex(dragInitiator, 0);
             setCards();                
            }
        if(num1 > 80 && num1 < 110){
             canal.setChildIndex(dragInitiator, 1);
            setCards(); 
            }
        if(num1 > 110 && num1 < 140){
             canal.setChildIndex(dragInitiator, 2);
            setCards(); 
            }
        if(num1 > 140 && num1 < 170){
             canal.setChildIndex(dragInitiator, 3);
            setCards(); 
            }
        if(num1 > 170 && num1 < 200){
            canal.setChildIndex(dragInitiator, 3);
            setCards(); 
            }

            }

             private function setCards():void{
            var b:int = 0;
            var a:int;
            var cardsArray:Array = this.getChildren();
            for(a = 0;a < cardsArray.length; a++)
            {
                canal.getChildAt(a).x = 90+b;
                b=b+20;
            }
             }

    ]]>
</mx:Script>    
</mx:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:13:25.350

而不是将 Image 转换为 CAnvas（第一个错误），您需要将其转换为...作为 Image。

```
import spark.components.Image;

public function mu(event:MouseEvent):void {
    var current:Image = event.currentTarget as Image; //this is the correct way to cast event.currentTarget
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:19:27.517

这两个错误源于不同的陈述： `#1034`源于 `var num1:int = Canvas(event.currentTarget).mouseX;` 因为 an `img`is not a Canvas

`#2025`源于其中之一， 因为`canal.setChildIndex(dragInitiator, ...);` 不是`img`运河的孩子，你必须`addChild(...)`在你可以之前`setChildIndex(...)`

你可以使用它`addChildAt`来代替`setChildIndex`它，如果不是效率低一点的话，它的工作方式也是一样的。

# objective-c - IOS中的应用单元测试

> ID：12458559
> 
> 赞同：3
> 
> 时间：2012-09-17T11:48:07.357
> 
> 标签：objective-c, ios, ios5

我正在使用 OCUnit 在 IOS5 中测试应用程序。在发布我的问题之前，我尽可能多地阅读了所有相关的帖子。它真的很有帮助。我现在面临以下问题，我试图尽可能清楚地叙述。

1.  我的应用程序有一个登录屏幕，它只不过是一个视图控制器说：initialController。我的应用程序委托的根控制器是导航控制器。Navigation 控制器的属性 initWithRootViewController 是用这个 initialController 设置的。

2.  现在登录后，应用程序加载了另一个控制器，我想在该控制器中进行单元测试，而不必经历这个登录过程。

3.  登录后，另一个控制器说 PostloginController 被加载，这个控制器的导航项是用 2 个按钮自定义的：button1 和 button2。这些按钮被添加为 UIBarButtonItem 的子视图，并且这个 UIBarButtonItem 被设置为 PostloginController.navigationItem.rightBarButtonItem 的 rightBarButtonItem。（伪代码）

4.  最后 PostLoginController 被推入 Navigation 控制器 navigationcontroller pushviewcontroller:postLoginController.(伪代码)

5.  我必须编写在 button1 的 UIControlEventTouchUpInside 上的单元测试代码应该启动另一个控制器说：Newcontroller。在 button1 的事件上加载这个新控制器完成了一个测试用例。

我的问题是我没有得到应该是 2 个按钮的 UIBarButtonItem 的子视图。日志显示导航控制器中有一个控制器，只有一个子视图。我的代码如下：

```
- (void)setUp
{
    [super setUp];    
    // Set-up code here.

    self.appDelegate = (MYAppDelegate*)[[UIApplication sharedApplication] delegate ];
    self.navigationController = (UINavigationController *)self.appDelegate.window.rootViewController;
}

- (void)testAppDelegate
{
    STAssertNotNil(self.appDelegate, @"Cannot find the application delegate");

    NSArray *tempArray = [self.navigationController viewControllers];
    NSLog(@"Number of controllers in navigationController = %i", [tempArray count]);
}

- (void) testButton1
{
    //self.myController = (PostLoginController*)self.navigationController.topViewController;

    UIBarButtonItem *barButtonItem = self.navigationController.topViewController.navigationItem.rightBarButtonItem;

    UIView *customView = barButtonItem.customView;       
    NSArray *subviews1 = customView.subviews;

    NSLog (@ "Got subviews");
    NSLog(@"Number of subviews = %i", [subviews1 count]);

    if ([subviews1 count] == 0)
    {
        NSLog (@ "no subviews");
    }

    for (UIView* view in subviews1)
    {
        NSLog(@"%@", view);

        if([view isKindOfClass:[UIButton class]])
        {
            UIButton *btn = (UIButton*)view;
            NSLog (@ " UIButton parsed");

            // Check if Button1 clicked.
            NSData *data1=UIImagePNGRepresentation([btn backgroundImageForState:UIControlStateNormal]);
            NSData *data2=UIImagePNGRepresentation([UIImage imageNamed:@"BUTTON1.png"]);

            if([data1 isEqualToData:data2])   // CHECKING IF BUTTON1 OR BUTTON2 PRESSED BY IMAGE SINCE THEY DONT HAVE ANY TAGS SET.
            {
                [btn sendActionsForControlEvents:(UIControlEventTouchUpInside)];
                STAssertTrue([self.navigationController.visibleViewController isMemberOfClass: [NewController class]], @" NewController failed to load!"); //BUTTON1 CLICK SHOULD LAUNCH NEWCONTROLLER - COMPLETES ONE TEST CASE.
            }
        }
    }
} 
```

# java - SQL 客户端中的 HSQLDB 数据库

> ID：12458560
> 
> 赞同：1
> 
> 时间：2012-09-17T11:48:08.137
> 
> 标签：java, sql, hsqldb

我有一个带有此连接 URL 的内存 HSQLDB 数据库：

```
jdbc:hsqldb:mem:test_database 
```

它在我的应用程序中运行良好，但我需要在 SQL 客户端中配置此数据库。

我不能，因为每个客户都抱怨没有找到主机或没有数据库。

我不确定我是否在“主机”和“数据库”字段中正确填写了所有信息，或者它是否是 HSQLDB 内存限制。

有没有人遇到同样的错误？？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:01:34.793

随着`:mem:`您定义一个只能在正在运行的 java vm 中访问的数据库。此数据库驻留在内存中，无法通过主机/端口 jdbc 访问外部访问。

请阅读：

*   [运行和使用 Hsqldb](http://hsqldb.org/doc/guide/ch01.html#N10148)
*   [高级主题](http://hsqldb.org/doc/guide/ch04.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:57:46.117

可以使用 HSQLDB 提供的[数据库管理器](http://hsqldb.org/doc/2.0/guide/running-chapt.html#rgc_access_tools)，在控制台中运行即可

`java -cp hsqldb.jar org.hsqldb.util.DatabaseManagerSwing`

并连接到 jdbc:hsqldb:mem:test_database

# ruby-on-rails - 使用 have_field 检查表单字段是否存在

> ID：12458561
> 
> 赞同：0
> 
> 时间：2012-09-17T11:48:08.993
> 
> 标签：ruby-on-rails, rspec, capybara

我有简单的用户表单（form_for @user）注册密码字段：

```
<div class="control-group"> 
  <%= f.label :password, :class => 'control-label' %>
  <div class="controls"> 
    <%= f.password_field :password, :class => 'password_field' %>
  </div>
</div> 
```

在我的 rspec/capybara 测试中，我想检查此密码字段是否存在，我尝试：

```
it {should have_field("password")} 
```

但它不起作用。与“user_password”（因为这是此密码字段 id）或“user[password]”（这是此字段名称）相同

不确定 have_field 是否是正确的匹配器，因为 capybara 文档没有解释它是什么。测试表单字段是否存在的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T06:43:13.427

您的代码不起作用，因为相反：

`it { page.should have_field("password") }`

你应该使用

`specify { page.should have_field("password") }`

或者

`it { should have_field("password") }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T21:53:55.420

在这里，[作为对我自己的回复，](https://stackoverflow.com/questions/14095628/rspec-have-field-raises-an-error-while-have-selector-return-success/14106310#14106310)我已经解决了这个问题，在规范中明确使用 :type => :password 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T22:37:48.520

尝试替换`have_field`为`have_selector`.

# android - 如何使用大约 10 个变量在 Android 中保存项目？

> ID：12458563
> 
> 赞同：1
> 
> 时间：2012-09-17T11:48:21.100
> 
> 标签：android, database, sqlite, listview, sharedpreferences

我是 Android 开发的新手。我有两个活动**A**和**B**。在活动**A 中**，我使用 xml 解析器来获取包含大约 10 个字符串的对象。我想将这些对象传递给活动**B**，并且应该有一个显示所有对象的列表视图。单击列表视图中的对象应显示 10 个字符串。

我不确定我是否必须使用 SQLite 数据库，或者我是否只能使用 SharedPreferences？或者我什至可以将它存储在内部存储器中吗？

即使我杀死了应用程序，也应该保存对象。

希望有人能给我一些提示，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:01:55.990

这可能会帮助你

您可以随意传递字符串数据 [1] 使用 Intent [2] 使用共享偏好

喜欢 [1]在您的第一个 ActivityA 中的意图

```
 Intent myintent= new Intent(FirstActivity.this,SecondActivity.class);
            myintent.putExtra("Name1", "your String");
            myintent.putExtra("Name2", "your String");
            myintent.putExtra("Name3", "your String");
            myintent.putExtra("Name4", "your String");
            startActivity(myintent); 
```

在第二个活动B

```
 Intent myintent = getIntent();
    if(null!=myintent.getExtras()){
    String Name1 = myintent.getExtras().getString("Name1");        
    String Name2 = myintent.getExtras().getString("Name2");        
    String Name3 = myintent.getExtras().getString("Name3");        
    String Name4 = myintent.getExtras().getString("Name4");        
    Toast.makeText(getApplicationContext(),""+Name,12).show();                              

    }
    else
    {
        Toast.makeText(getApplicationContext(),"No Recor Here..",12).show();

    } 
```

像您的第一个 ActivityA 中的 SharedPreferences[2]

```
 Intent myintent= new Intent(FirstActivity.this,SecondActivity.class);
            SharedPreferences spref = this.getSharedPreferences("mynotifyid", MODE_WORLD_WRITEABLE);
            SharedPreferences.Editor spreedit = spref.edit();
            spreedit.putString("Name1", str1.toString());   
            spreedit.putString("Name2", str2.toString());   
            spreedit.putString("Name3", str3.toString());   
            spreedit.putString("Name4", str4.toString());   
            spreedit.commit();
            startActivity(myintent); 
```

在你的第二个活动B

```
 SharedPreferences spref = context.getSharedPreferences("mynotifyid", Context.MODE_WORLD_WRITEABLE);
        String str1 = spref.getString("Name1","");
        String str2 = spref.getString("Name2","");
        String str3 = spref.getString("Name3","");
        String str4 = spref.getString("Name4",""); 
```

为了您的对象保存目的，使用 SharedPreferences

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:57:49.383

让这些对象实现接口`Serializable`，这样您就可以使用一个可能的这个小（！）示例将对象传递给另一个 Activity`Intent` 可以帮助您：

```
public class MyModel implements Serializable {

    ...

}

public A extends Activity {

   public void onCreate(Bundle savedInstanceBundle) {
      ...
      //fetchData
      ...
      MyModel data = new MyModel(fetchedData);
      Intent intent = new Intent(this, B.class);
      intent.putExtra("KEY", data);
      startActivity(intent);
    }
}

public B extends Activity {

   public void onCreate(Bundle savedInstanceBundle) {
      Bundle extras = getIntent().getExtas();
      MyModel data = (MyModel) extras.getSerializable("KEY");

      ...
      //handle data
      ...
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T11:54:10.910

对于这 10 个字符串，我不会使用数据库。SharedPreferences 易于使用，有很多示例，可以满足您的需求。如果稍后需要无字符串，则可以使用内部存储器（二进制模式），但现在没有理由，恕我直言。

# c# - 以窗口形式更新长时间运行方法的进度条

> ID：12458564
> 
> 赞同：-1
> 
> 时间：2012-09-17T11:48:30.247
> 
> 标签：c#, winforms, multithreading

我有一个 MDI 表单，一旦我单击任何菜单项，就会显示相关的表单。有时，表单需要一些时间来加载，所以我想为长时间运行的调用显示一个进度条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:17:53.890

由于很少有表单需要时间打开，您应该将表单加载代码移动到一个单独的线程中`background worker`（这将避免 UI 冻结）。您可以将`WorkerReportsProgress`属性设置为`true`，以便`ProgressChanged`在加载时使用它在事件处理程序的进度栏中显示进度。

如果您对如何使用 Background worker 不太了解，我建议您学习如何使用它们 --- 请参阅[此](http://www.codeproject.com/Articles/20627/BackgroundWorker-Threads-and-Supporting-Cancel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:51:35.033

虽然这是一个 VB.NET 示例，但重要的部分是了解这个想法，所以我会推荐这篇回答您问题的优秀文章：

[http://www.dreamincode.net/forums/topic/58239-progress-bar-while-loading-a-child-form/](http://www.dreamincode.net/forums/topic/58239-progress-bar-while-loading-a-child-form/)

PS：先google一下也无妨。

# rest - Ember-data：最佳 Json 相关资源

> ID：12458568
> 
> 赞同：0
> 
> 时间：2012-09-17T11:48:48.653
> 
> 标签：rest, ember.js, ember-data, hateoas

嗨，我想知道哪个是使用 ember-data 中相关资源的最佳解决方案。为了构建 REST 后端。

1) 嵌入式资源

```
user: {
id: "foo",
albums: [
 album: {
  id: "foo",
  name: "bar",
  description: "foobar",
 },
 album: {
  id: "foobar"
  name: "foobarfoo",
  description: "fumanchu",
 },
 ],
} 
```

2) 资源的嵌入 id

```
user: {
 id: "foo",
 albums: [
   album: {
    id: "foo",
   },
   album: {
    id: "foobar"
   },
  ],
} 
```

3) 链接资源

```
user: {
 id: "blabla",
 links: {
   "self": { "href": "/users/blabla" },
   "albums": { "href": "/albums/blabla" }
 },
} 
```

您认为可以像在 HATEOAS 中那样使用 hipermedia 吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:09:30.053

你看过[ActiveModelSerializers](https://github.com/josevalim/active_model_serializers) gem 吗？

在服务器端使用 Rails 时，这是完成工作的更简单方法。

对于关系，它可以嵌入或使用对子资源的引用。参考文献（*我会推荐*）以这种方式序列化：

```
{
  users: [{
    id: 42,
    firstName: "John",
    albums: [ 1, 2, 3 ]
  }]
} 
```

```
{
  albums: [{
    id: 1,
    name: "Foo"
  }, {
    id: 2,
    name: "Bar"
  }, {
    id: 3,
    name: "Buzz"
  }]
} 
```

在这里，专辑也可以作为旁加载数据包含在第一个哈希中：

```
{
  users: [{
    id: 42,
    firstName: "John",
    albums: [ 1, 2, 3 ]
  }],
  albums: [{
    id: 1,
    name: "Foo"
  ...
  }]
} 
```

# asp.net-mvc-3 - 区域中的 ASP.NET MVC 3 路由问题

> ID：12458570
> 
> 赞同：2
> 
> 时间：2012-09-17T11:48:56.313
> 
> 标签：asp.net-mvc-3, routing, asp.net-mvc-routing, asp.net-mvc-3-areas

我有一个非常奇怪的路由问题。

我有一个使用区域的 ASP.NET MVC 3 站点。我在资产区域设置了以下路线：

```
public override void RegisterArea(AreaRegistrationContext context)
{
    context.MapRoute(
        null,
        "Assets/{controller}/{action}/{code}",
        null,
        new { code = @"(\w{2,3}$)" }
    );

    context.MapRoute(
        "Assets_default",
        "Assets/{controller}/{action}/{id}",
        new { action = "Index", id = UrlParameter.Optional }
    );
} 
```

当我请求以下 URL 时，它可以完美运行

```
http://site.com/Assets/Gallery/GetByCode/AEP
http://site.com/Assets/Gallery/GetByCode/MEC
http://site.com/Assets/Gallery/GetByCode/GP
http://site.com/Assets/Gallery/GetByCode/BR2 
http://site.com/Assets/Gallery/GetByCode/ZZZ 
http://site.com/Assets/Gallery/GetByCode/123 
```

但是当我请求此 URL 时，我收到“404 - 找不到资源”错误

```
http://site.com/Assets/Gallery/GetByCode/PRN
http://site.com/Assets/Gallery/GetByCode/prn 
```

我尝试过的所有其他 URL 都有效 - 似乎只是 PRN 有问题。

我在 GalleriesController > GetByCode 操作的开头设置了一个断点，并且 PRN 路由甚至没有尝试进入该操作（正如 404 错误所暗示的那样）。

有谁知道为什么 PRN 在路线中不起作用？或者我还能尝试调查什么？

感谢您的帮助萨恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:19:07.527

This may be related to the fact that you can't create the folder "prn" on the Windows file system. My guess is IIS uses the windows file system in such a way that this issue resonates to the described problem above.

In fact, this post may help you: [ASP.NET MVC Routing vs. Reserved Filenames in Windows](https://stackoverflow.com/questions/987105/asp-net-mvc-routing-vs-reserved-filenames-in-windows)

# javascript - Javascript返回值未定义

> ID：12458572
> 
> 赞同：1
> 
> 时间：2012-09-17T11:49:04.040
> 
> 标签：javascript, jquery, function, return-value

我想问一下如何从函数“save_value”返回变量“get_cookies”。然后在 mouseleave 事件中写入它的值。

函数“get_cookies”将保存输入的更改。我认为错误是作为回报。

对不起，我的英语不好。

这是代码：

```
<html>
<head>
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script src="jquery.cookie.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            function save_value(value) {
                var get_cookie = value;
                return get_cookie;
            };

            $('#submit_value').live('click', function() {
                var get_value = $('#get_value').val();
                save_value(get_value);
            });

            $(document).mouseleave(function() {
                var create_cookie = save_value();
                console.log('save: ' + create_cookie);
            });
        });
    </script>
</head>
<body>
    <input type="text" id="get_value" />
    <input type="button" id="submit_value" value="Click" />
    <div></div>
</body> 
```

控制台日志：

```
save: undefined 
```

谢谢回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T11:51:20.603

该函数`save_value()`需要一个参数。从这里开始

```
var create_cookie = save_value(); 
```

你没有将值传递给函数，它会返回`undefined`，因此变量`create_cookie`值`undefined`也是

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:52:22.987

您的 save_value() 函数需要一个输入参数，因此 save_value() 本身是未定义的。

你的意思是这样做吗？

```
$(document).mouseleave(function() {
    var get_value = $('#get_value').val();
    var create_cookie = save_value(get_value);
    console.log('save: ' + create_cookie);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T11:52:51.847

这很简单：您的函数`function save_value(value)`接受`value`参数，将其分配给变量，然后返回该变量。当你在没有参数的情况下调用它时，就像你在这里做的：`var create_cookie = save_value();`，`value`参数将是未定义的。因此，该函数返回未定义。

另外：使用调用的变量`cookie`不会设置 cookie。为此，您必须使用`localStorage.setItem('cookieName','cookieValue');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T11:52:47.013

由于您使用的是最新的 jQuery 版本，因此不应使用[`live()`](http://api.jquery.com/live/)函数，因为它在 jQuery 1.7 中已被弃用。

无论如何，你的问题是不同的。你的`save_value`函数什么都不做。只需创建一个变量并返回其值。但是您不传递任何参数，因此它返回默认值：`undefined`。

# c# - 基类未反序列化

> ID：12458573
> 
> 赞同：2
> 
> 时间：2012-09-17T11:49:10.273
> 
> 标签：c#, json

我在这个项目中使用[Newtonsoft.Json .Net for 4.0](http://james.newtonking.com/pages/json-net.aspx)

父类：

```
public class CLiveThing
{
    private object lawk = new object();

    public Action<double> hp_cur_changed;
    public Action<double> hp_max_changed;

    public double hp_max { get; private set; }
    public double hp_cur { get; private set; }

    public void change_hp_max(double val)
    {
        lock (lawk)
        {
            hp_max += val;
            if (hp_max_changed != null)
                hp_max_changed(hp_max);
        }
    }

    public void change_hp_cur(double val)
    {
        lock (lawk)
        {
            hp_cur += val;
            if (hp_cur_changed != null)
                hp_cur_changed(hp_cur);
        }
    }
} 
```

儿童班：

```
public class CPlayer : CLiveThing
{
    public int id { get; private set; }

    public CPlayer(int id)
    {
        this.id = id;
    }

    /*
     * Network
    */

    public string Serialize()
    {
        return Newtonsoft.Json.JsonConvert.SerializeObject(this);
    }
    public static CPlayer Deserialize(string val)
    {
        return Newtonsoft.Json.JsonConvert.DeserializeObject<CPlayer>(val);
    }
} 
```

**服务器**（使用 Players.CPlayers 管理具有通用集合的所有玩家）

```
Players.CPlayers.Serialize() 
```

*Players.CPlayers.Serialize 序列化服务器内存中的所有播放器，每行一个*

像这样：

```
public static string Serialize()
{
    players_lock.AcquireReaderLock(Timeout.Infinite);
    string str = "";
    foreach (CPlayer player in players.Values)
    {
        str += player.Serialize();
        str += Environment.NewLine;
    }

    players_lock.ReleaseReaderLock();
    return str;
} 
```

**客户**

我在 Players.CPlayers.Deserialize 循环中放置了一个断线，这与服务器所做的相反。

```
foreach (string line in split)
{
    if (line.Length > 0)
    {
        CPlayer player = CPlayer.Deserialize(line);
        addOrReplace(player.id, player);
    }
} 
```

这是一行的示例：

内容：

```
"{\"hp_cur_changed\":null,\"hp_max_changed\":null,\"id\":1,\"hp_max\":100.0,\"hp_cur\":100.0}" 
```

CPlayer.Deserialize() 的结果：

![出去](../Images/d21c60c89e9e1ecf242500820bd7b327.png)

它只反序列化了 ID，忽略了父类中的属性。这很奇怪，因为服务器端正确地对其进行了序列化。谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:01:48.440

我无法找到官方参考为什么它会这样工作，但至少有两种方法可以解决您的问题：

将您的基类属性设置器声明为公共

```
 public double hp_cur { get; set; }

 public double hp_max { get; set; } 
```

或者用`JsonProperty`属性注释它们：

```
 [JsonProperty]
 public double hp_max { get; private set; }

 [JsonProperty]
 public double hp_cur { get; private set; } 
```

# java - 使用 jxl 将数据添加到现有的 excel 文件

> ID：12458576
> 
> 赞同：1
> 
> 时间：2012-09-17T11:49:19.243
> 
> 标签：java, jxl, saving-data

所以我有一个程序在后台运行一个计时器，计算我使用某些应用程序的时间。我现在的目标是将总时间保存到 excel 文件中（在每天结束时或第二天）。我已经创建了一个模板，其中月份为列，行为日期（1-31）。所以我的问题是：有没有办法在不先复制现有文件并创建新文件的情况下将单个单元格写入现有工作表？

# php - 用文件替换错误信息

> ID：12458578
> 
> 赞同：0
> 
> 时间：2012-09-17T11:49:32.567
> 
> 标签：php, foreach

我有这段代码：

```
private function grabCurrentUser() {

    $this->id = parent::secure($_GET['cid']);

    $params = array( ':user_id' => $this->id );
    $stmt   = parent::query("SELECT * FROM users WHERE user_id = :user_id;", $params);

    if( $stmt->rowCount() < 1 ) parent::displayMessage("<div class='alert alert-error'>"._('No such user!')."</div>");

    foreach ($stmt->fetch(PDO::FETCH_ASSOC) as $field => $value)
        $this->options[$field] = $value;

} 
```

我想替换它上面的错误消息，所以不要有这个错误消息：

```
parent::displayMessage("<div class='alert alert-error'>"._('No such user!')."</div> 
```

我想像这样包含 index.php：

```
include_once(cINC . 'index.php'); 
```

那么如何将它从显示错误消息替换为仅包含 index.php？

我试过这个：

```
private function grabCurrentUser() {

    $this->id = parent::secure($_GET['cid']);

    $params = array( ':user_id' => $this->id );
    $stmt   = parent::query("SELECT * FROM users WHERE user_id = :user_id;", $params);

    if( $stmt->rowCount() < 1 ) include_once(cINC . 'index.php');

    foreach ($stmt->fetch(PDO::FETCH_ASSOC) as $field => $value)
        $this->options[$field] = $value;

} 
```

但是得到了这个错误：

```
Warning: Invalid argument supplied for foreach() 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:55:39.353

您在应用程序逻辑中犯了错误，如果您没有任何记录并且想要包含一些文件，那么您不会遍历空记录列表。

```
private function grabCurrentUser() {

    $this->id = parent::secure($_GET['cid']);

    $params = array( ':user_id' => $this->id );
    $stmt   = parent::query("SELECT * FROM users WHERE user_id = :user_id;", $params);

    if( $stmt->rowCount() < 1 ){
        include_once(cINC . 'index.php');
    } else {
        foreach ($stmt->fetch(PDO::FETCH_ASSOC) as $field => $value)
            $this->options[$field] = $value;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:53:19.447

而不是使用包含，做你想做的事，使用重定向，如：

```
header(index.php); 
```

对，除此之外，重定向 on 错误是一件非常糟糕的*事情*。您为什么不将其错误捕获，了解代码发生了什么，并以某种方式编写它，使其一开始*就不会*产生该错误？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T11:53:56.307

当用户 ID 未知时，您必须尝试捕获错误，因此您可以执行以下操作

```
if( $stmt->rowCount() < 1 ) 
{
include_once(cINC . 'index.php');
exit();
}
else {
foreach ($stmt->fetch(PDO::FETCH_ASSOC) as $field => $value)
$this->options[$field] = $value;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T11:54:15.467

我只是猜测这会`parent::displayMessage`终止当前的脚本执行，因此`foreach`不会使用无效参数执行以下操作。您`include_once`不会终止脚本并且`foreach`正在运行...

`return`从函数中，`die()`或者做一些其他的事情来阻止`foreach`运行。

# xslt - xslt中有trim之类的操作吗？

> ID：12458583
> 
> 赞同：12
> 
> 时间：2012-09-17T11:49:50.350
> 
> 标签：xslt

我编写了一个 xslt 代码，它将 xml 文件转换为包含很多表的 html 文件，其中一个列包含消息（非常长的消息），但该行以“验证通过”或“验证失败”这两个词中的任何一个开头"

我的要求是，如果验证失败，则将整个表格行变为红色，如果验证通过，则将整个表格行变为绿色

```
 <xsl:choose>
  <xsl:when test="contains(@message,'Verification failed:')"><td bgcolor="#FF0000">   <xsl:value-of select="@Message"/></td></xsl:when>
  <xsl:when test="contains(@message,'Verification passed:')"><td bgcolor="#00FF00"><xsl:value-of select="@Message"/></td></xsl:when>   
  <xsl:otherwise><td> <xsl:value-of select="@Message"/></td></xsl:otherwise>
</xsl:choose> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-17T14:31:54.937

不幸的是，你没有说出你期望你的“trim()”函数做什么。但是根据您对要求的描述，我猜 normalize-space() 已经足够接近了：

```
starts-with(normalize-space(message), 'Verification passed')) 
```

XPath normalize-space() 函数与 Java trim() 方法的不同之处在于 (a) 它用单个空格替换内部空白字符序列，以及 (b) 它对空白的定义略有不同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T12:04:25.113

> xslt中有trim之类的操作吗？

**一、XSLT 1.0**

**不，在 XSLT 1.0 中执行“修剪”相当困难。**

这是**[FXSL](http://fxsl.sf.net)**`trim`的函数/模板：

```
<xsl:stylesheet version="1.0" 
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:import href="trim.xsl"/>

  <!-- to be applied on trim.xml -->

  <xsl:output method="text"/>
  <xsl:template match="/">
    '<xsl:call-template name="trim">
        <xsl:with-param name="pStr" select="string(/*)"/>
    </xsl:call-template>'
  </xsl:template>
</xsl:stylesheet> 
```

****在此 XML 文档上****执行此转换时**（您必须至少下载一些其他样式表模块，它们构成完整的导入树）：**

 **```
<someText>

   This is    some text   

</someText> 
```

**产生了想要的正确结果**：

```
'This is    some text' 
```

* * *

**II 在 XSLT 2.0 / XPath 2.0**

仍然有点棘手，但很短：

```
 if (string(.))
       then replace(., '^\s*(.+?)\s*$', '$1')
       else () 
```

**这是完整的相应转换**：

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
     "<xsl:sequence select=
         "if (string(.))
           then replace(., '^\s*(.+?)\s*$', '$1')
           else ()
           "/>"
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于同一个 XML 文档（上图）时，会产生相同的正确结果：**

```
"This is    some text" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-24T20:35:20.797

## 将 XSLT1 与 registerLangFunctions 一起使用

今天，在（复杂的）*XSLT2 标准*发布大约 10 年后，许多项目仍然使用（更快的）*XSLT1*。也许问题不仅在于“简单*与*复杂”，而且 XSLT1 是 Perl、PHP、Python、PostgreSQL 和许多其他社区的事实。

因此，一个针对 Perl、PHP 和 Python 的解决方案：使用您的主要语言来执行`trim`另一个 XSLT1 中不存在的常用函数。

这里是 PHP 的一个例子： [https ://en.wikibooks.org/wiki/PHP_Programming/XSL/registerPHPFunctions](https://en.wikibooks.org/wiki/PHP_Programming/XSL/registerPHPFunctions)

* * *

## 回答 #4

> 赞同：-16
> 
> 时间：2012-09-19T11:15:26.193

```
 <xsl:variable name="Colour">
 <xsl:choose>
 <xsl:when test="contains(@Message,'Verification failed:')">background-color:red;       </xsl:when>
 <xsl:when test="contains(@Message,'Verification passed:')">background-color:green</xsl:when>
 <xsl:otherwise> </xsl:otherwise>
 </xsl:choose>
 </xsl:variable>

 <tr style="{$Colour}">
 <td> <xsl:value-of select="@Time"/></td>
 <td>Line <xsl:value-of select="@Line"/></td>
 <td> <xsl:value-of select="@Type"/></td>
 <td> <xsl:value-of select="@Message"/></td>
 </tr> 
```**

# c# - 如何在表单上使用 KeyPress 事件，然后将其重新传递给标签？

> ID：12458584
> 
> 赞同：0
> 
> 时间：2012-09-17T11:49:50.293
> 
> 标签：c#, winforms, label, user-input

**已编辑：** 我想知道如何在表单上使用 KeyPress 事件，我想编写一个程序，用户只能通过按键（仅限数字）从键盘输入值（浮点值），并且该值必须保存在 label.Text 中。我已经尝试从 MSDN 阅读文档[Control.KeyPress Event](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keypress.aspx)我没有帮助，我是编程新手，因此请解释您编写的代码（如果您用代码回答问题），以便我可以学习它。

**我知道可以在 TextBox 中使用 KeyPress 事件，但这不是我的目标。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:56:23.420

您无法从标签中获取事件。因为标签没有关注表单。

在从键盘接收输入之前，您应该在表单的 Control.KeyPress 事件上编写代码，并将表单的 keyPreview 属性更改为 true。所以你总能得到键盘输入。

第一组

```
yourform.KeyPreview = true; 
```

并在 KeyPress 事件上编写代码后，例如：

```
private void yourform_KeyPress(object sender, KeyPressEventArgs e)
{
    //write your code here
} 
```

现在您可以获得表单上的所有键盘输入。

# php - 从 REST 调用中获取方法

> ID：12458587
> 
> 赞同：0
> 
> 时间：2012-09-17T11:50:03.833
> 
> 标签：php, xml, rest, simplexml

我想通过 PHP 从 REST XML 文件中获取方法。我有本地 REST 文件，格式如下：

```
SimpleXMLElement Object
(
    [doc] => SimpleXMLElement Object
        (
        )

    [resources] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [base] => https://**url**
                )

            [resource] => Array
                (
                    [0] => SimpleXMLElement Object
                        (
                            [@attributes] => Array
                                (
                                    [path] => xml/{accesskey}/project
                                )

                            [param] => SimpleXMLElement Object
                                (
                                    [@attributes] => Array
                                        (
                                            [name] => accesskey
                                            [style] => template
                                            [type] => xs:string
                                        )

                                )

                            [method] => SimpleXMLElement Object
                                (
                                    [@attributes] => Array
                                        (
                                            [id] => getAllProjects
                                            [name] => GET
                                        )

                                    [response] => SimpleXMLElement Object
                                        (
                                            [representation] => SimpleXMLElement Object
                                                (
                                                    [@attributes] => Array
                                                        (
                                                            [mediaType] => application/xml; charset=utf-8
                                                        )

                                                )

                                        )

                                )
... and so on 
```

我有以下代码，但它只返回第一个方法名称：

```
$file="application.wadl";
$xml = simplexml_load_file($file);

foreach($xml->resources[0]->resource->method->attributes() as $a => $b) {
    echo $b,"\n";
} 
```

我想提取所有这些，而不仅仅是第一个。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:01:13.967

您需要遍历所有具有相同名称的元素，而不是遍历一个元素的属性。由于 SimpleXML 的魔力，这很简单：

```
foreach($xml->resources->resource->method as $method) {
    echo $method['id'],"\n";
} 
```

当紧跟另一个运算符时，与 一样`->resources`，SimpleXML 假定您只需要具有该名称的第一个元素。但是，如果您循环，它将为您提供它们中的每一个，作为一个 SimpleXML 对象。

**编辑：**看起来您的 XML 的嵌套意味着您需要某种形式的递归（您需要查看`$xml->resources->resource->resource->resource->method`等）。

可能是这样的（未经测试的例子）？

```
function get_methods($base_url, $node)
{
    $all_methods = array();     

    // Child resources: build up the path, and recursively fetch all methods
    foreach ( $node->resource as $child_resource )
    {
        $child_url = $base_url . '/' . (string)$child_resource['path'];

        $all_methods = array_merge(
            $all_methods, 
            get_methods($child_url, $child_resource)
        );
    }

    // Methods in this resource: add to array directly
    foreach ( $node->method as $method )
    {
        $method_url = $base_url . '/' .(string)$method['id'];
        $all_methods[$method_url] = (string)$method['id'];
    }

    return $all_methods;
}

print_r( get_methods('/', $xml->resources) ); 
```

* * *

顺便说一句，`print_r`并不总是为您提供 SimpleXML 对象的最佳视图，因为它们实际上是非 PHP 代码的包装器。试试[这个`simplexml_dump()`功能](https://github.com/IMSoP/simplexml_debug)。

# security - 网上商店、安全和 CakePHP

> ID：12458591
> 
> 赞同：0
> 
> 时间：2012-09-17T11:50:29.913
> 
> 标签：security, cakephp

我正在建立一个网上商店，我想确保安全性很好，因为我们正在处理金钱和其他敏感的东西。总的来说，我对 CakePHP 和 Web 编程也比较陌生，并不完全了解网站安全的美妙世界。我想知道是否有人愿意为使用 CakePHP 构建的网上商店提供安全提示和最佳实践？这些帖子，[Cakephp 安全性](https://stackoverflow.com/questions/3870427/cakephp-security)，[是什么让 CakePHP 安全，我们如何提高它的安全性？](https://stackoverflow.com/questions/3282408/what-makes-cakephp-secure-and-how-can-we-increase-its-security)，涵盖所有相关的安全风险，还是我应该针对网店考虑更多的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:44:36.970

我不认为这篇文章涵盖了你的蛋糕的所有可能的安全问题，但你可能想谷歌“Cake Exploits”。如果我是你，我不会使用 CakePHP 来构建强大的安全 Web 应用程序，实际上我不会使用任何开源框架或应用程序。我会自己建造的！还要考虑框架的可扩展性和功能。CakePHP 并不是目前表现最好的之一！我建议看一下 Yii 框架。再次谈到安全性时，首先要考虑应用程序的安全性，您是否愿意使用您不能 100% 确定代码功能的其他人的代码？我不会！关于 CakePHP 的一些更详细的信息，你可能想看看这个详细的评论：[PHP Framework or not (Cake PHP)](https://stackoverflow.com/questions/12476057/php-framework-or-not-cake-php/12482342#12482342)

祝你好运！

# collections - 骨干收集 Fetch() 不起作用

> ID：12458592
> 
> 赞同：2
> 
> 时间：2012-09-17T11:50:31.240
> 
> 标签：collections, backbone.js, fetch

我有一个基于 jquery mobile 的移动网站实现，现在学习backbone.js 并重新考虑应用程序以更好地组织它。

```
var membership = Backbone.Model.extend();

var memberships = Backbone.Collection.extend({
    model: membership,
    parse: function (resp, xhr) {
        },
    url: "/groups.svc/memberships/azxcv01"
    });

    var col1 = new memberships();
    col1.fetch({ success: function () {
        console.log(col1);
    }
}); 
```

在 chrome 中，我看到 URL 的格式很好，并返回了有效的 JSON。*parse()*事件也得到一个有效的*resp*。但是上面的*console.log()*显示和空数组“[]”。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:54:25.227

试试这个，这里链接到小提琴[http://jsfiddle.net/w7xeb/](http://jsfiddle.net/w7xeb/) （更新）

```
var membership = Backbone.Model.extend();

var memberships = Backbone.Collection.extend({
    model: membership,
     parse: function (resp, xhr) {
           return resp;
       },
    });

    var col1 = new memberships();
    col1.fetch({ 
        url : "/restful/fortune",                 
        success: function () {
            console.log(col1);
    }
});
​ 
```

回复

```
$.mockjax({
    url: "/restful/fortune",
    responseTime: 750,
    contentType: "text/json",
    responseText: [{
          a:'a'
      },{
          a:'b'
      },{
          a:'c'
      }]
}); 
```

# python - 将自纪元以来的时间戳转换为 datetime.datetime

> ID：12458595
> 
> 赞同：58
> 
> 时间：2012-09-17T11:50:41.207
> 
> 标签：python

自纪元以来，我有以下时间戳：

```
Timestamp
1346114717972
1354087827000 
```

如何将这些时间戳转换为某些特定的输出格式，例如`mm/dd/yyyy hr:min:sec`？

我试图将它们转换为`datetime.datetime`但失败了：

```
 >>> datetime.datetime.fromtimestamp(1346114717972)
 Traceback (most recent call last):
 File "<stdin>", line 1, in <module>
 ValueError: timestamp out of range for platform time_t 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-09-17T11:58:25.320

我会使用该`time`模块

```
>>> import time
>>> time.gmtime(1346114717972/1000.)
time.struct_time(tm_year=2012, tm_mon=8, tm_mday=28, tm_hour=0, tm_min=45, tm_sec=17, tm_wday=1, tm_yday=241, tm_isdst=0) 
```

这以 UTC/GMT 时间显示时间戳。

时间戳除以 1000，因为您提供的时间戳是自纪元以来的**毫秒数，而不是秒数。**

然后使用`strftime`格式如下：

```
>>> time.strftime('%m/%d/%Y %H:%M:%S',  time.gmtime(1346114717972/1000.))
'08/28/2012 00:45:17' 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2012-09-17T12:03:12.133

假设毫秒分辨率：

```
import datetime

s = '1346114717972'
fmt = "%Y-%m-%d %H:%M:%S"

# local time
t = datetime.datetime.fromtimestamp(float(s)/1000.)
print t.strftime(fmt) # prints 2012-08-28 02:45:17

# utc time
t_utc = datetime.datetime.utcfromtimestamp(float(s)/1000.)
print t_utc.strftime(fmt) # prints 2012-08-28 00:45:17 
```

查看[`strftime()`and`strptime()`行为](http://docs.python.org/library/datetime.html#strftime-strptime-behavior)的文档。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-05-02T07:57:13.337

这是我见过的最简单的方法-

```
$ python
Python 2.7.5 (default, Nov  6 2016, 00:28:07) 
[GCC 4.8.5 20150623 (Red Hat 4.8.5-11)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import time
>>> print(time.strftime('%Y-%m-%dT%H:%M:%S %Z',time.localtime(time.time())))
2018-05-02T13:21:44 IST 
```

# asp.net-mvc - 如何通过在 MVC 中单击按钮将参数传递给控制器 ？

> ID：12458597
> 
> 赞同：0
> 
> 时间：2012-09-17T11:50:48.123
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, devexpress

有人可以帮助我如何将我的参数从组合框绑定到我的控制器中我的一个动作的参数。我正在使用 DevExpress 控制套件，这是我的代码：

```
 [HttpPost]
 public ActionResult Filter(string filterCriteria)
 {
     ViewData.Model = Repository.GetReports(filterCriteria);
     return RedirectToAction("Index");
 } 
```

这是我的观点：

```
<div style="float:right;padding-bottom:20px;" >
@using (Html.BeginForm())
{
<table><tr><td>
Filter by Keyword:</td>
<td>
@Html.DevExpress().DropDownEdit(
    settings =>
    {
        settings.Name = "checkComboBox";
        settings.Width = 210;
        settings.Theme = Utils.CurrentTheme;
        settings.Properties.DropDownWindowStyle.BackColor = System.Drawing.Color.FromArgb(0xEDEDED);
        settings.Properties.ClientSideEvents.ValueChanged = "function(s, e) {e.customArgs[\"filterCriteria\"] = checkComboBox.Name.toString();}";

        settings.SetDropDownWindowTemplateContent(c =>
        {
            @Html.DevExpress().ListBox(
                listBoxSettings =>
                {
                    listBoxSettings.Name = "checkListBox";
                    listBoxSettings.SkinID = "CheckComboBoxListBox";
                    listBoxSettings.CallbackRouteValues = new { Controller = "Report", Action = "Filter" };
                    listBoxSettings.Theme = Utils.CurrentTheme;
                    listBoxSettings.ControlStyle.Border.BorderWidth = 2;
                    listBoxSettings.ControlStyle.BorderBottom.BorderWidth = 1;
                    listBoxSettings.ControlStyle.BorderBottom.BorderColor = System.Drawing.Color.FromArgb(0xDCDCDC);
                    listBoxSettings.Width = System.Web.UI.WebControls.Unit.Percentage(100);
                    listBoxSettings.Height = 100;

                    listBoxSettings.Properties.SelectionMode = ListEditSelectionMode.CheckColumn;

                    listBoxSettings.Properties.ClientSideEvents.SelectedIndexChanged = "OnListBoxSelectionChanged";
                }
            ).BindList(Repository.GetKeywords())
            .Render();
            ViewContext.Writer.Write("<table style=\"width:100%\"><tr><td align=\"right\">");
            @Html.DevExpress().Button(
                buttonSettings =>
                {
                    buttonSettings.Name = "buttonClose";
                    buttonSettings.Text = "Close";
                    buttonSettings.Style.Add("float", "right");
                    buttonSettings.Theme = Utils.CurrentTheme;
                    buttonSettings.ClientSideEvents.Click = "function(s, e){ checkComboBox.HideDropDown(); }";
                }
            )
            .Render();
            ViewContext.Writer.Write("</td></tr></table>");
        });
        settings.Properties.EnableAnimation = true;
        settings.Properties.ClientSideEvents.TextChanged = "SynchronizeListBoxValues";
        settings.Properties.ClientSideEvents.DropDown = "SynchronizeListBoxValues";
    }
).GetHtml()
</td><td>
@Html.DevExpress().Button(
    settings =>
    {
        settings.Name = "btnApply";
        settings.ControlStyle.CssClass = "button";
        settings.Text = "Apply";
        settings.UseSubmitBehavior = true;
        settings.Theme = Utils.CurrentTheme;
        settings.Width = 80;
        settings.RouteValues = new { Controller = "Report", Action = "Filter" };
    }
).GetHtml()
</td><td>
@Html.DevExpress().Button(
    settings =>
    {
        settings.Name = "btnClear";
        settings.ControlStyle.CssClass = "button";
        settings.Text = "Clear";
        settings.ClientSideEvents.Click = "function(s, e){ ASPxClientEdit.ClearEditorsInContainer(); }";
        settings.Theme = Utils.CurrentTheme;
        settings.Width = 80;
    }
).GetHtml()
</td></tr></table>
}
</div> 
```

我基本上在底部有一个网格视图，我想用它上面的下拉列表进行过滤。我通过使用一个按钮来调用该操作来过滤我的收藏。在这个例子中，我只是试图传回控件的名称，即

```
settings.Properties.ClientSideEvents.ValueChanged = "function(s, e) {e.customArgs[\"filterCriteria\"] = checkComboBox.Name.toString();}"; 
```

只是想看看我是否能够传回任何值，但这失败了。有人可以详细说明一下这样做的方法吗？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T16:48:11.963

根据我收集的信息，您想要检索在控制器端的“checkListBox”列表框中选择的多个项目。如果是这样，请按以下方式使用[ListBoxExtension.GetSelectedValues](http://documentation.devexpress.com/#AspNet/DevExpressWebMvcListBoxExtension_GetSelectedValues%5BT%5Dtopic)方法：

```
[HttpPost]
public ActionResult Filter(string filterCriteria)
{
    //listBoxSettings.Name = "checkListBox";

    string[] values = ListBoxExtension.GetSelectedValues<string>("checkListBox");
    filterCriteria = values...

    ViewData.Model = Repository.GetReports(filterCriteria);
    return RedirectToAction("Index");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-23T09:57:08.477

我知道这是一个较老的问题，但我想我可能只是添加使用`viewbag`which 允许您将数据从控制器发送到视图，反之亦然。这是[mdsn](http://msdn.microsoft.com/en-us/library/system.web.mvc.controllerbase.viewbag(v=vs.118).aspx)的一个示例。

**控制器**

```
public ActionResult Index()
{
    ViewBag.MyMessageToUsers = "Hello from me.";
    ViewBag.AnswerText = "Your answer goes here.";

    return View();
} 
```

**看法**

```
@ViewBag.MyMessageToUsers
@Html.TextBox("AnswerText") 
```

# maven - 使用 maven 工具构建现有的 eclipse 项目

> ID：12458601
> 
> 赞同：0
> 
> 时间：2012-09-17T11:51:23.220
> 
> 标签：maven, maven-2, maven-plugin

我是 Maven 工具的新手。我在 RAD 7.0 上有一个 java 项目。编译项目并使用 RAD 7.0 构建 jar 需要花费大量时间。因此，为了消除时间浪费，我们计划使用 maven 2。

我们不允许更改应用程序结构和包结构。请帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:02:39.970

您可以保持应用程序结构，您只需正确参数化描述项目的 pom.xml。

在您的 pom.xml 中，您必须通过插件添加类路径和项目结构（sourceDirectory、testDirectory）中包含的所有依赖项

您可以在较早的帖子中找到一些示例： [如何使用 Eclipse 为 java 项目创建 pom.xml？](https://stackoverflow.com/questions/8817885/how-to-create-pom-xml-for-java-projec-using-eclipse)

# ios - 更改 UITabBarController 中的选项卡顺序

> ID：12458603
> 
> 赞同：2
> 
> 时间：2012-09-17T11:51:25.247
> 
> 标签：ios, xcode4, uitabbarcontroller

目前我正在开发一个包含 3 个选项卡的选项卡式应用程序，我想知道是否有可能更改选项卡的顺序，即将第三个选项卡放在第一个选项卡的位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-24T04:51:38.363

只需在情节提要中更改它。为这样的小东西修改 XML 很容易。在您选择的编辑器中打开 Storyboard 文件并搜索“tabBarController”。你会发现这样的东西：

`<connections> <segue destination="XmF-SX-cO9" kind="relationship" relationship="viewControllers" id="CZB-Ec-d55"/> <segue destination="mCx-nD-74Q" kind="relationship" relationship="viewControllers" id="3PE-EG-9Vs"/> <segue destination="bxy-1d-KHG" kind="relationship" relationship="viewControllers" id="OP9-xt-ZMo"/> <segue destination="JqF-xj-sCJ" kind="relationship" relationship="viewControllers" id="cHB-MZ-3bs"/> </connections>`

这代表标签的当前顺序。如果要切换第一个和第二个选项卡，只需切换它们在此列表中的位置即可。就这么简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T11:55:46.717

试试这个：

```
UITabBarController *tabController;
NSArray *controllers = tabController.viewControllers;
NSArray *reorderedControllers = [controllers sortedArrayUsingComparator:yourComparator];
[tabController setViewControllers:reorderedControllers]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T11:57:21.313

通过属性将当前 viewControllers 从 tabbar 中取出

```
NSArray *viewControllers = myTabBarController.viewControllers; 
```

并且手动重新排序数组中的viewController：

```
NSArray *newOrderedViewController = [NSArray arrayWithObjects:viewControllers[2],viewControllers[0],viewControllers[1],viewControllers[3], nil]; 
```

最后设置新的有序视图控制器。

```
myTabBarController.viewControllers = newOrderedViewController; 
```

# android - 闹钟在android中不是每5分钟重复一次

> ID：12458605
> 
> 赞同：0
> 
> 时间：2012-09-17T11:51:29.370
> 
> 标签：android, service, alarmmanager

我想每 5 分钟重复一次警报，但不工作。我的代码是

```
 hour = timePicker.getCurrentHour();
            minuts = timePicker.getCurrentMinute();
            Log.i("hour" + hour, "minits" + minuts);

            calSet.set(Calendar.HOUR_OF_DAY, hour);
            calSet.set(Calendar.MINUTE, minuts);
            calSet.set(Calendar.SECOND, 0);
            calSet.set(Calendar.MILLISECOND,0);

            Intent intent = new Intent(getBaseContext(),
                    AlarmBroadcastReceiver.class);
            final int _id = (int) System.currentTimeMillis();

            PendingIntent pendingIntent = PendingIntent.getBroadcast(
                    getBaseContext(), _id, intent,
                    PendingIntent.FLAG_UPDATE_CURRENT);
            AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);

            if (snooze.isChecked()) {
                alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,
                        calSet.getTimeInMillis(), 5*60*1000, pendingIntent);
            } else {

                 alarmManager.set(AlarmManager.RTC_WAKEUP,
                         calSet.getTimeInMillis(),pendingIntent);
            } 
```

alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,calSet.getTimeInMillis(), 5*1000,pendingIntent);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:53:01.943

尝试这个。

```
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calSet.getTimeInMillis(), 5*60*1000, pendingIntent); 
```

# tridion - 尝试将二进制文件部署到已存储不同二进制文件的位置

> ID：12458609
> 
> 赞同：3
> 
> 时间：2012-09-17T11:51:37.217
> 
> 标签：tridion, tridion2009, tridion-content-delivery

当我从 tridio 2009 发布我的页面时，我收到以下错误：

```
Destination with name 'FTP=[Host=servername, Location=\RET, Password=******, Port=21, UserName=retftp]' reported the following failure:
A processing error occurred processing a transport package Attempting to deploy a binary [Binary id=tcm:553-974947-16 variantId= sg= path=/Images/image_thumbnail01.jpg] to a location where a different binary is already stored Existing binary: tcd:pub[553]/binarymeta[974950] 
```

下面是我的代码片段

```
Component bigImageComp = th.GetComponentValue("bigimage", imageMetaFields);
string bigImagefileName = string.Empty;
string bigImagePath = string.Empty;
bigImagefileName = bigImageComp.BinaryContent.Filename;
bigImagePath = m_Engine.AddBinary(bigImageComp.Id, TcmUri.UriNull, null, bigImageComp.BinaryContent.GetByteArray(), Path.GetFileName(bigImagefileName));
imageBigNode.InnerText = bigImagePath; 
```

请建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T14:33:38.097

Chris Summers 在他的博客上谈到了这个问题。阅读文章 - [http://www.urbancherry.net/blogengine/post/2010/02/09/Unique-binary-filenames-for-SDL-Tridion-Multimedia-Components.aspx](http://www.urbancherry.net/blogengine/post/2010/02/09/Unique-binary-filenames-for-SDL-Tridion-Multimedia-Components.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T15:20:47.277

通常在 Tridion Content Delivery 中，我们只能保留一个组件的一个版本。要获得 MMC 的多个“版本”，我们必须将 MMC 作为变体发布。通过这种方式，我们可以通过模板生成尽可能多的变体。

您可以参考以下文章了解更多详情：

[http://yatb.mitza.net/2012/03/publishing-images-as-variants.html#!/2012/03/publishing-images-as-variants.html](http://yatb.mitza.net/2012/03/publishing-images-as-variants.html#!/2012/03/publishing-images-as-variants.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T16:39:08.743

添加二进制文件时，您必须确保文件及其元数据是唯一的。如果其中一个值（例如文件名）看起来相同但元数据的其余部分不匹配，则部署将失败。

在给定的示例中（正如 Nuno 指出的那样），二进制文件 910 正在尝试在二进制文件 703 上部署。文件名相同，但二进制文件被标识为不相同（如果同一出版物的 ID 不同）。对于此示例，您将需要重命名其中一个二进制文件（文件本身或更改路径），一切都会好起来的。

其他情况可能是使用来自两个不同模板的相同图像，并且模板 id 用作变体 ID。如果是这种情况，则它是相同的图像，但变体 ID 检查失败，以避免覆盖相同的图像，部署程序失败。

通常取消发布会有所帮助，但是，只有在删除所有对它的引用时才会删除该图像。因此，如果它在多个地方使用，就会有更多的开放参考。

这是对部署者的逻辑保护。您不希望错误的图像替换另一个图像并破坏布局或可能将内容更改为另一个会议（想想广告横幅）。

这是上述问题的实际原因和原因（来自论坛的东西）

# magento - 在 magento 事件观察器中以编程方式更新布局

> ID：12458611
> 
> 赞同：9
> 
> 时间：2012-09-17T11:51:39.557
> 
> 标签：magento

我正在尝试更改`product.info`产品详细信息页面的块（）的模板（view.phtml），为此，我正在观察一个事件（`controller_action_layout_generate_blocks_before`），在进行必要的检查后，我正在尝试更改块的模板( `product.info`) 方式如下：

```
$layout = $observer->getEvent()->getLayout();
$layout->getUpdate()->addUpdate('
        <reference name="product.info">
            <action method="setTemplate">
                <template>customlayout/product/view.phtml</template>
            </action>                                                          
        </reference>');
$layout->getUpdate()->load();
$layout->generateXml(); 
```

如果我放`"<remove name='product.info'/>"`，它将被删除，但是在尝试执行上述操作时，它不起作用。
**编辑：**
要求是针对当前产品将模板（产品详细信息）动态切换到选定的模板（在 CustomModule 中）。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-17T14:03:29.813

正如本所说，我不知道你为什么要把它放在观察者身上，但你的问题是`loadLayout`.

您可以使用以下方法检查加载的布局 xml：

`Mage::log(Mage::getSingleton('core/layout')->getUpdate()->asString());`

很确定您`<action method="setTemplate"><template>customelayout/product/view.phtml</template>`已被其他人覆盖，`setTemplate`这就是您的模板未显示的原因。

```
Mage_Core_Controller_Varien_Action

public function loadLayout($handles=null, $generateBlocks=true, $generateXml=true)
{
    // if handles were specified in arguments load them first
    if (false!==$handles && ''!==$handles) {
        $this->getLayout()->getUpdate()->addHandle($handles ? $handles : 'default');
    }

    // add default layout handles for this action
    $this->addActionLayoutHandles();

    $this->loadLayoutUpdates(); //in here: $this->getLayout()->getUpdate()->load();

    if (!$generateXml) {
        return $this;
    }
    //event: controller_action_layout_generate_xml_before
    $this->generateLayoutXml(); //in here: $this->getLayout()->generateXml();

    if (!$generateBlocks) {
        return $this;
    }
    //event: controller_action_layout_generate_blocks_before, your observer is located here
    $this->generateLayoutBlocks(); //in here: $this->getLayout()->generateBlocks();
    $this->_isLayoutLoaded = true;

    return $this;
} 
```

因此，您将使用 event: 修改 xml `controller_action_layout_generate_blocks_before`。

这意味着您需要做的是：

```
//add the update
$layout->getUpdate()->addUpdate('<reference name="product.info"><action method="setTemplate"><template>customelayout/product/view.phtml</template></action></reference>');
//then generate the xml
$layout->generateXml(); 
```

导致您的问题的原因是：

`$layout->getUpdate()->load();`

之后又被叫了

```
$layout->getUpdate()->addUpdate('<reference name="product.info"><action method="setTemplate"><template>customelayout/product/view.phtml</template></action></reference>'); 
```

虽然最好使用 event: `controller_action_layout_generate_xml_before`。这样你就不需要生成你的 xml 两次。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-17T19:22:17.400

如果你想从观察者那里改变一个块的模板，你应该

1.  监听`controller_action_layout_generate_blocks_after`事件

2.  使用**PHP**操作布局

通过监听 generate after 事件，您可以确保首先调用基于文件的布局更新 XML 字符串指定的每个操作方法，并且您的模板更改将“获胜”。

我推荐使用 PHP 代码，因为布局更新 XML 系统是一种特定领域的语言，其目的是为布局更新提供一组有限的功能，而无需编写一行 PHP。如果您已经在使用 PHP 观察者，那么通过 PHP 操作布局就很有意义。

像这样的代码应该可以得到你想要的（同样，来自**after**观察者方法）

```
$controller   = $observer->getAction();

//limit to the product view page 
if($controller->getFullActionName() != 'catalog_product_view')
{
    return;
}

$layout       = $controller->getLayout();
$product_info = $layout->getBlock('product.info');
if(!$product_info)
{
    Mage::log('Could not find product.info block');
    return;
}

$product_info->setTemplate('customelayout/product/view.phtml'); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-09-17T13:01:34.687

你到底为什么要这样做？

最好使用*local.xml*布局文件或为自定义模块声明的布局文件来执行此操作：

```
<?xml version="1.0" encoding="UTF-8"?>
<layout>
    <catalog_product_view>
        <reference name="product.info">
            <action method="setTemplate">
                <tpl>customelayout/product/view.phtml</tpl>
            </action>
        </reference>
    </catalog_product_view>
</layout> 
```

仅供参考，当一个块名称被`<remove/>`编辑时，不会为任何包含该删除指令的渲染范围实例化具有该名称的块。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-01-09T13:18:55.433

另一种解决方案，也就是在我看来，Magento's Spirit 中更多的是声明我们自己的句柄。

## 1\. 声明一个观察者`controller_action_layout_load_before`

在您的模块 config.xml 中，在节点下`config>frontend>events`放置以下代码：

```
<controller_action_layout_load_before>
  <observers>
     <stackoverflow_set_handle>
        <class>stackoverflow_module/observer</class>
        <method>setHandle</method>
     </stackoverflow_set_handle>
  </observers>
</controller_action_layout_load_before> 
```

## 2\. 定义你的观察者

```
class Stackoverflow_Module_Model_Observer
{
    public function setHandle(Varien_Event_Observer $observer)
    {
        $fullActionName = $observer->getEvent()->getAction()->getFullActionName();
        if (/* Any condition you may want to modify the layout */) {
            Mage::app()->getLayout()->getUpdate()->addHandle('MY_HANDLE_' . $fullActionName);
        }
    } 
```

## 3.创建布局xml文件

完成后，您可以将任何 fullActionName 用作布局更新文件中以 MY_HANDLE_ 为前缀的二级节点。

这些指令只有在句柄存在时才会被触发，所以基本上对于你在观察者中设置的任何条件。

```
<?xml version="1.0"?>
<layout version="0.1.0">

    <MY_HANDLE_catalogsearch_result_index>
        <reference name="left">
            <remove name="catalogsearch.leftnav" />
        </reference>
    </MY_HANDLE_catalogsearch_result_index>

    <MY_HANDLE_catalog_product_view>
        <!-- Do anything you want -->
    </MY_HANDLE_catalog_product_view>

</layout> 
```

## 最后的话

您当然可以`$fullActionName`在观察者中测试以更具体地添加句柄，并且您可以构建一个不基于 fullActionName 动态的句柄。

有关信息，这是 Magento 管理许多布局变化的方式：

*   **STORE_default** > 使用当前商店动态构建
*   **THEME_frontend_enterprise_enterprise** > 使用当前主题动态构建
*   **PRODUCT_TYPE_simple** > 使用当前产品类型动态构建
*   **PRODUCT_16** > 使用当前产品 ID 动态构建
*   **customer_logged_out** > 仅在客户登录时出现
*   和别的...

要查看它们，您可以暂时将其放在 index.php 的末尾：

```
var_dump(Mage::app()->getLayout()->getUpdate()->getHandles()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-24T18:40:01.660

我打算对 JBreton 的精彩回答发表评论，但是将我带到这个线程的特定用例略有不同。（而且我是一个潜伏者，还没有足够的声誉发表评论。）

即使在尝试观察各种事件之后，接受的答案和修改 PHP 代码布局的其他建议对我也不起作用，所以我想我会在 JBreton 方面发布一个窃取/支持/示例答案。我的用例是根据某些条件以编程方式从 checkout_cart_index 布局中删除块（核心和自定义模块块）。使用自定义布局句柄的方法也适用于 ADDING 块，因为它只是“激活”Magento 将从主题中的标准布局 XML 文件处理的新句柄。

JBreton 的方法是我尝试过的所有方法中最好的。就当前和未来的需求而言，它更有意义。尤其是在设计师和模板构建者不是应该在 PHP 代码中四处寻找的人的情况下。模板人知道 XML 并且无论如何都应该非常熟悉 Magento 的布局 XML 系统。因此，使用自定义句柄来修改特定编程条件下的布局是比在 PHP 中通过字符串添加 XML 更好的方法。

***再次......这不是我自己想出的解决方案......我从上面 JBreton 的回答中偷了这个，并提供了我的分身可以在他们的情况下使用的示例代码作为额外的起点。请注意，此处并未包含我的所有模块代码（尤其是 app/modules XML 文件、模型类等）。***

我的模块的配置文件：

`app/code/local/Blahblah/GroupCode/etc/config.xml`

```
<config>
  ... other config XML too ...

  <frontend>
    <events>
        <controller_action_layout_load_before>
            <observers>
                <blahblah_groupcode_checkout_cart_index>
                    <type>singleton</type>
                    <class>Blahblah_Groupcode_Model_Ghost</class>
                    <method>checkout_cart_prepare</method>
                </blahblah_groupcode_checkout_cart_index>
            </observers>
        </controller_action_layout_load_before>
    </events>
  </frontend>
</config> 
```

类中观察者的方法：

`app/code/local/Blahblah/GroupCode/Model/Observer.php`

```
<?php

    public function checkout_cart_prepare(Varien_Event_Observer $observer)
    {
        // this is the only action this function cares to work on
        $fullActionName = 'checkout_cart_index';

        ... some boring prerequiste code ...

        // find out if checkout is permitted
        $checkoutPermitted = $this->_ghost_checkoutPermitted();

        if(!$checkoutPermitted)
        {
            // add a custom handle used in our layout update xml file
            Mage::app()->getLayout()->getUpdate()->addHandle($fullActionName . '_disable_checkout');
        }

        return $this;
    } 
```

主题文件中包含的布局更新：

`app/design/PACKAGE/THEME/etc/theme.xml`

```
<?xml version="1.0"?>
<theme>
    <parent>...</parent>

    <layout>
        <updates>
            <!-- Adding references to updates in separate layout XML files. -->
            <blahblah_checkout_cart_index>
                <file>blahblah--checkout_cart_index.xml</file>
            </blahblah_checkout_cart_index>

            ... other update references too ...
        </updates>
    </layout>
</theme> 
```

布局更新定义文件：

`app/design/PACKAGE/THEME/layout/blahblah--checkout_cart_index.xml`

```
<layouts>
    <checkout_cart_index_disable_checkout>
        <reference name="content">
            <block type="core/template" name="checkout.disabled" as="checkout.disabled" before="-" template="checkout/disabled-message.phtml" />
            <remove name="checkout.cart.top_methods" />
            <remove name="checkout.cart.methods" />
        </reference>
    </checkout_cart_index_disable_checkout>

    ... other layout updates too ...
</layouts> 
```

（是的，我的模块中还有其他代码可以监视结帐过程事件，以确保不会有人通过手动 URL 路径潜入。并且其他检查已到位以真正“禁用”结帐。我只是展示我如何通过观察者以编程方式修改布局的示例。）

# asp.net - 此页面缺少要添加的 CSS 样式表链接所需的 HtmlHead 控件。请加

> ID：12458614
> 
> 赞同：-1
> 
> 时间：2012-09-17T11:51:54.223
> 
> 标签：asp.net, master-pages

此页面缺少`HtmlHead`正在添加的 CSS 样式表链接所需的控件。请添加`<head runat="server" />`. 我已经给出了`runat="server"`但问题没有解决什么是问题如何解决。

providinf 后出现此错误`runat=server`

```
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.NotSupportedException: This page is missing a HtmlHead control which is required for the CSS stylesheet link that is being added. Please add "server">.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[NotSupportedException: This page is missing a HtmlHead control which is required for the CSS stylesheet link that is being added. Please add "server">.]
   AjaxControlToolkit.ScriptObjectBuilder.RegisterCssReferences(Control control) +249
   AjaxControlToolkit.ExtenderControlBase.OnPreRender(EventArgs e) +135
   System.Web.UI.Control.PreRenderRecursiveInternal() +77 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:44:07.987

我从内容页面中删除了 head 标签并解决了问题

# vb.net - 如何避免在 vb.net 的组合框中出现重复

> ID：12458615
> 
> 赞同：1
> 
> 时间：2012-09-17T11:51:58.263
> 
> 标签：vb.net

如何避免在组合框中重复？

我有 3 个组合框，我希望用户可以添加或从现有值中选择，但是当我选择现有项目之一时，它会复制该项目

```
With something
   .DataSource = empBindingsource 
   .DisplayMember = "Employer_Name" 
   .ValueMember = "Employer_ID" 
   .DataBindings.Add("selectedValue", job_VacanciesBindingsource, "Employer_ID", False, DataSourceUpdateMode.OnValidation) 
End With 

With cboDesc 
   .DataSource = descDataset.Tables("Job_Vacancies").Copy 
   .DisplayMember = "Job_Description" ' 
   .ValueMember = "Job_ID" 
   .DataBindings.Add("text", job_VacanciesBindingsource, "Job_Description", False, DataSourceUpdateMode.OnValidation) 
End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:28:51.790

你的问题不是很清楚，但你可以试试：

```
.DataSource = descDataset.Tables("Job_Vacancies").Copy.Distinct() 
```

# iphone - xcode 自定义单元格不透明度在 iOS 4 上不起作用

> ID：12458616
> 
> 赞同：1
> 
> 时间：2012-09-17T11:51:59.257
> 
> 标签：iphone, objective-c, ios, xcode

我正在处理自定义单元格，当我在 iOS 5 模拟器上测试时一切正常，但是当我在 iOS 4 模拟器上检查时出现问题。单元格背景图像的不透明度不起作用

这是在 iOS 4 上

![http://i45.tinypic.com/fa0xl5.png](../Images/b24d8c77d34669e95047c8b696a275cb.png) ![在此处输入图像描述](../Images/91e46c71041344f8e0d04b5cdc308cc0.png)

这是在 iOS 5 上，我希望它看起来像在 iOS 4 上

![在此处输入图像描述](../Images/6b2cce7fed94b2d7828e1f1f2f4c5735.png)

我正在使用的方法是

```
-(void) tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
cell.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"TabelCellEb.png"]];
cell.selectedBackgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"TabelCell.png"]];} 
```

在`viewDidLoad`表格背景中是

```
self.tableView.backgroundColor = [UIColor clearColor];
self.parentViewController.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"TableBackground.png"]]; 
```

知道如何解决这个问题吗？

更新：这是我正在使用的单元格 BG 图像

![在此处输入图像描述](../Images/851f301784252d9a248a5f44dedb2edb.png)

它对它有影响，不透明度为 %30

更新2：

新图像

![在此处输入图像描述](../Images/43afb81be736d014ec4613547fea7042.png) ![在此处输入图像描述](../Images/1d1a15df517c567de30bdbdd75fa16b9.png)

现在背景图像在替换为该代码后随着表格上下移动

```
self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"TableBackground.png"]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:14:09.483

我解决了问题，

我删除了该`tableView willDisplayCell`方法并将此代码添加到`tableView cellForRowAtIndexPath`

```
UIImage *cellImage = [UIImage imageNamed:@"TabelCellMu.png"];
UIImageView *cellBackgroundImage = [[UIImageView alloc]initWithImage:cellImage];
cell.backgroundView = cellBackgroundImage;
cell.selectedBackgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"TabelCell.png"]]; 
```

并且在 iOS 4 和 5 中一切正常 :)

# c - 在信号量初始化期间解决竞争条件

> ID：12458620
> 
> 赞同：1
> 
> 时间：2012-09-17T11:52:07.277
> 
> 标签：c, concurrency, semaphore

我有一个必须在线程之间共享的数组，受信号量保护。我把初始化代码放在一个可以多次调用的函数中，一个“构造函数”，如下：

```
#include <stdbool.h> //for bool
#include <semaphore.h>

sem_t global_mutex;
char global_array[N]; // Protected with global_mutex

struct my_struct *new_my_struct(){
    static bool is_init = false; // This will be initialized only once, right?
    if (!is_init){                         // 1
        sem_init(&global_mutex, 0, 1);     // 2
        sem_wait(&global_mutex);           // 3
        if (!is_init){                     // 4
           is_init = true;                 // 5
           ... initialize global_array ... // 6
        }
        sem_post(&global_mutex);           // 7
    }

    ... proceed on the create and return a my_struct pointer ...
} 
```

在理想情况下，线程将从 1 运行到 7，初始化数组并退出临界区。即使另一个线程在 2 中停止，在 4 中的测试也会是错误的，并且不会覆盖数组。我没有想过如果线程卡在 1 并重新初始化信号量会发生什么，但我相信*只要`is_init`由第一个运行的线程设置为 true 就不用担心了！*

现在，如果一个线程在 4 处停止，而另一个线程从开始运行到完成，初始化并填充`global_array`. 当线程停止在 4 运行时，它会重新初始化数组并删除第一个线程存储的状态。

我想知道是否有任何方法可以避免这种竞争条件（也许巧妙地使用`static`？），或者我是否应该将初始化代码与构造函数分开并在没有并发的情况下在主线程中使用它。

这段代码正在使用中，我还没有遇到竞争状况。但是，据我所知，这是可能的，我希望纠正它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:57:43.330

如果信号量的真正用途是作为互斥体，那么就使用`pthread_mutex_t`. 这些可以静态初始化，这样你的问题就会消失。

语法是

```
pthread_mutex_t global_mutex = PTHREAD_MUTEX_INITIALIZER; 
```

如果您确实需要全局对象的动态初始化，请查看`pthread_once`. `pthread_once_t`这是POSIX 为此类任务预见的类型 ( ) 和功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:06:50.307

有几种方法可以进行线程安全的延迟初始化，但这不是其中之一。

`pthread_once`是一种方式，而使用实际上是互斥体（静态初始化）的全局互斥体来同步初始化是另一种方式。实现可以保证局部变量的线程安全初始化`static`，但不是必须的（至少，它们在 C11 之前没有，我还没有检查过）。

但是，您可以同步实际的初始化，但*不能保证双重检查锁定在 C 或 Posix 中有效*。*检查一个线程中的标志是一场数据竞赛，该标志是在另一个线程中设置的，而两个*线程中没有某种同步。`pthread_once`在初始化已经完成的常见情况下，应该尽可能快地实现。*如果*您的实现保证函数范围的静态变量的线程安全初始化，那么这也将尽力而为。除非您真的知道自己在做什么（例如，您正在`pthread_once`为某个新系统实现自己），否则请使用其中之一，而不是自己尝试避免在常见情况下代价高昂的锁定。

# javascript - 在 Play Framework 2 中使用 javascript 路由

> ID：12458622
> 
> 赞同：8
> 
> 时间：2012-09-17T11:52:14.533
> 
> 标签：javascript, ajax, playframework-2.0

我正在尝试在播放框架中使用 jsRoutes 进行 ajax 调用。它适用于不带任何参数的请求，但是当我尝试调用一个将 Long 作为参数的控制器方法时，它会失败并且没有错误消息。这里有一些代码可以更好地解释它。

控制器类Users.java：

```
public static Result addToShortList(long id) {
 return whatever
} 
```

配置/路由

```
POST    /shortList/:userId  controllers.Users.addToShortList(userId: Long) 
```

在 Application.java 控制器文件中，我像这样返回 jsRoutes：

```
public static Result javascriptRoutes() {
    response().setContentType("text/javascript");
    return ok(Routes.javascriptRouter("jsRoutes",
        controllers.routes.javascript.Application.frontpage(),
        ...
        controllers.routes.javascript.Users.addToShortList(),
        controllers.routes.javascript.Users.removeFromShortList()));
} 
```

现在在我的 javascript 中，我可以通过执行以下操作来使用 jsRoutes：

```
jsRoutes.controllers.Users.addToShortList(id).ajax({
            success : function(data) {

                alert(data);
            },
            error : function(err) {
                //code always ends up here, with the err giving no eerror message at all!
                alert(err);             
            }
        }); 
```

似乎播放框架的这个功能没有得到很好的记录，或者我只是盲目地没有在任何地方找到它......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T11:59:38.407

好的，我自己解决了问题。问题似乎是我在控制器方法中使用了 long(primitive)。为什么这是一个我不知道的问题。

# java - Java 之类的“C++：const return type” - 或如何允许读取和阻止写入非原始成员

> ID：12458623
> 
> 赞同：3
> 
> 时间：2012-09-17T11:52:21.163
> 
> 标签：java, constants

也许我仍然错过了一个重要的概念。

为了允许读取和防止写入非原始成员，相应的 getter 总是创建成员对象的新副本。出于性能原因，我想防止这种情况发生。我正在尝试编写一个基于四叉树的带有碰撞检测的简单 2D 模拟器，这将是生计。

我认为在 C++ 中我可以通过返回一个 const 来做到这一点。（我知道我可以用强制转换覆盖它）但我不确定这是如何在 JAVA 中完成的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T12:03:03.723

有几种方法可以归档您想做的事情。

`const`首先，对于C++ 中的功能没有语言支持。

无论如何，我建议您使用 Getter 和 Setter，因为它们不会造成任何开销。Java 即时优化处理了这一点。

对于非原始类型，您仍然会遇到返回的对象本身可能会被更改的问题。有三种方法可以防止这种情况。

1.  您根本不返回对象。您通过父对象中的多个 getter 提供存储在对象内部的数据。
2.  您使用不可变对象或不可变视图。因此，通常无法更改的对象或仅提供对象视图但会阻止 setter 对象的对象。
3.  您使用克隆或复制构造函数返回原始对象的副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T11:55:49.893

您可以自由地使任何自定义引用类型不可变。

你是说你克隆每个对象？您可能有堆问题。我更喜欢不可变的解决方案。它是线程安全的，内存占用更少。

Java 中没有对 C++ return const 的语言支持。您可以返回返回不可修改的集合，但您的类必须进行适当的编码才能获得您想要的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T11:56:33.483

> 相应的 getter 总是创建成员对象的新副本

理论上是的，实际上这并不能保证，通常会被优化掉。

> 出于性能原因，我想防止这种情况发生。

如果您来自 C++，您可能会发现您在 C++ 中担心的许多问题在 Java 中都不是问题（反之亦然；）

* * *

如果您认为 JIT 将优化掉所有简单的 getter，因此没有性能开销，您可能会发现以下简单形式就是您所需要的。

```
private int x; // non-final so it can be changed
// or better
private final int x; // makes it clear the field will not be changed.

public int getX() { return x; } 
```

`final`使用与否的区别不在于性能，而在于清晰度。

# iphone - 多用户的 NSUserdefaults

> ID：12458627
> 
> 赞同：-1
> 
> 时间：2012-09-17T11:52:45.107
> 
> 标签：iphone, objective-c, ios, ipad

在我的应用程序中，我使用登录表单进入应用程序，也`NSUserDefaults`用于存储用户首选项，例如：

```
[storeData setObject:self.loginField.text forKey:@"USEREMAIL"]; 
[storeData setObject:self.PasswordField.text forKey:@"PASSWORD"]; 
```

就像我存储的一样，如果新用户登录 NSUserDefaults 存储的值将被更改。但我想要两个首选项（例如：新用户 ID 和旧用户 ID 以及密码）。那么请解释如何为同一个键存储多个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:56:38.597

解决这个问题的一种方法是存储一个 NSDictionary，其中 UserID 作为键，密码作为值。

* * *

另一种选择是使用[Keychain](https://developer.apple.com/library/mac/#documentation/Security/Conceptual/keychainServConcepts/01introduction/introduction.html)，因为它是专门为这种事情设计的，而且更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:58:08.167

创建一个全局`NSMutableArray`并在对象中添加上述详细信息`NSDictionary`并将所有对象存储在数组中。这样您将拥有所有用户对象。您可以随时获取它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:01:54.477

首先使用 AppDelegate 类创建全局数组，例如..

```
userDefaults = [NSUserDefaults standardUserDefaults];
NSData *dataRepresentingtblArrayForSearch = [userDefaults objectForKey:@"arrScheduleDates"];
if (dataRepresentingtblArrayForSearch != nil) {
    NSArray *oldSavedArray = [NSKeyedUnarchiver unarchiveObjectWithData:dataRepresentingtblArrayForSearch];
    if (oldSavedArray != nil)
        arrScheduleDates = [[NSMutableArray alloc] initWithArray:oldSavedArray];
    else
        arrScheduleDates = [[NSMutableArray alloc] init];
} else {
    arrScheduleDates = [[NSMutableArray alloc] init];
}
[arrScheduleDates retain]; 
```

之后，当您要存储新记录时，然后从`arrScheduleDates`数组中获取所有记录，然后添加新记录，然后像上面的整个数组一样存储..

我希望你能理解并且它对你有帮助......

:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T12:10:45.933

满足您要求的最简单方法是使用用户的电子邮件地址（假设它们都是唯一的）作为字典的存储键，并使用密码作为值。

如果您需要存储的不仅仅是密码，那么键的值将是另一个包含用户键和值的字典。

简单案例的示例类似于：

```
NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
NSDictionary *storedUsers = [userDefaults objectForKey:@"userData"];
if (nil == storedUsers) storedUsers = [NSDictionary dictionary];

NSMutableDictionary *mutableStoredUsers = [NSMutableDictionary dictionaryWithDictionary:storedUsers];
NSString *userPassword = [self.PasswordField.text copy]; //add autorelease if you aren't using ARC
NSString *userEmail = [self.loginField.text copy]; //add autorelease if you aren't using ARC
if (nil != userEmail)
{
  [mutableStoredUsers setObject:userPassword forKey:userEmail];
}

[userDefaults setObject:[NSDictionary dictionaryWithDictionary:mutableStoredUsers] forKey:@"userData"];
[userDefaults synchronize]; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-26T06:30:36.430

首先下载和导入给定链接的文件

[https://github.com/ldandersen/scifihifi-iphone/tree/master/security](https://github.com/ldandersen/scifihifi-iphone/tree/master/security)

然后在你想存储用户偏好的地方写下这段代码

[SFHFKeychainUtils storeUsername:loginField.text andPassword:PasswordField.text forServiceName:@"dhaya" updateExisting:YES error:&error];

你想要密码的地方写下这段代码

NSString *password = [SFHFKeychainUtils getPasswordForUsername:loginField.text andServiceName:@"dhaya" error:&error]; NSLog(@"密码密码%@",密码);

这会很好用....

# html - 在小浏览器窗口中隐藏网站的顶部

> ID：12458633
> 
> 赞同：1
> 
> 时间：2012-09-17T11:53:07.307
> 
> 标签：html, css, hide, margin, center

几周以来，我正在建立一个新网站。这个网站开始看起来不错，但有一个问题。

当我在比实际网页小的浏览器窗口中查看我的网站时，页面顶部的菜单栏会被切断。我无法上下滚动页面，但顶部无法翻页。

这个问题可能与我用于垂直居中的“中心”代码有关。有没有一种解决方案可以让我的网页居中，但在使用小窗口后仍然可以到达洞页？

我已经准备好通过使用“视口”元标记来解决 Chrome 移动设备中的问题。遗憾的是，IE、safari、Chrome 等桌面浏览器在窗口较小时仍然拒绝显示我网页的顶部栏。

这是我网站的链接： [test.themissingsticks.com](http://test.themissingsticks.com)

尝试在全屏窗口（分辨率高于 800px 高度）中查看，并在低于 600px 高度的窗口中查看。您会注意到我网站顶部的灰色菜单栏不会显示，即使您尝试向上滚动也是如此。

该网站以以下css行为中心：

```
top: 50%;
margin-top: -340px;
left: 50%;
margin-left: -513px; 
```

页面宽度为 1026 像素，高度为 680 像素。

请帮忙。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:22:37.357

转到 style.csss
更改“menutms”的 css
替换**margin-top: -340px;** 按**边距顶部：-300px；**
它适用于所有浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T20:16:35.930

找到了答案！我为垂直和水平中心对齐制作了 2 个 div。这两个是绝对定位的。孔网页的其余部分相对位于这些 div 内部。

唯一的缺点是 IE9 不能很好地显示该站点。

这是该方法的说明： [http ://www.search-this.com/2008/05/15/easy-vertical-centering-with-css/](http://www.search-this.com/2008/05/15/easy-vertical-centering-with-css/)

# algorithm - 最长递增子序列的应用

> ID：12458641
> 
> 赞同：9
> 
> 时间：2012-09-17T11:53:42.080
> 
> 标签：algorithm, language-agnostic

[LIS（最长递增子序列](http://www.geeksforgeeks.org/archives/9591)）问题在解决其他 CS 问题方面有多大用处？有一些算法，使用耐心排序、动态规划或决策树。这些在现实生活中是如何使用的——也许是数据流或其他东西？

为了提醒你，我用粗体表示最长的递增序列

{ **0、8、4、12、2、10、6、14、1、9、5、13、3、11、7、15** **}**。_ **_** _ **_** _ **_** _ **_** _

 **作为奖励，有没有办法使用[长度为 mn + 1 的序列将具有长度为 m 的递增子序列或长度为 n 的递减子序列的](http://mathworld.wolfram.com/Erdos-SzekeresTheorem.html)结果？例如，我们的列表长度为 16，因此应该有长度为 5 的递增序列或长度为 5 的递减序列。在我们的例子*中为 0,2,6,9,11,15*。

还有一个长度为 8 的递增序列或长度为 3 的递减序列：在我们的例子中*为 12,10,1*。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T13:55:49.650

LIS 的一个有趣的实际应用是 Patience Diff，这是[Bram Cohen （BitTorrent 的创建者）的一种](http://en.wikipedia.org/wiki/Bram_Cohen)[差异](http://en.wikipedia.org/wiki/Diff)算法，用于[Bazaar](http://bazaar.canonical.com/en/)版本控制系统。

常规差异算法涉及计算两个文档之间的 LCS（[最长公共子序列）。](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)虽然效率很高，但这种方法有一个问题，那就是——结果经常碰巧对人类不太友好。

常规差异如何失败的简单示例：

```
 void func1() {
     x += 1
+}
+
+void functhreehalves() {
+    x += 1.5
 }

 void func2() {
     x += 2
 } 
```

Patience Diff 算法的优势在于它可以更准确地计算差异，以更接近于人类行为方式的方式计算。

在前面的案例中，耐心差异更好地发现了差异：

```
 void func1() {
     x += 1
 }

+void functhreehalves() {
+    x += 1.5
+}
+
 void func2() {
     x += 2
 } 
```

简而言之，算法是：

1.  查找两个文档共有的唯一行。
2.  从第一个文档中取出所有这些行，并根据它们在第二个文档中的外观对它们进行排序。
3.  计算结果序列的 LIS（通过[耐心排序](http://en.wikipedia.org/wiki/Patience_sorting)），得到最长的匹配行序列，即两个文档的行之间的对应关系。
4.  在已经匹配的行之间的每个行范围内递归算法。

看看[代码](http://bazaar.launchpad.net/~bzr-pqm/bzr/bzr.dev/view/head:/bzrlib/_patiencediff_py.py)。**

# paypal-sandbox - Paypal Payments Pro 的问题

> ID：12458642
> 
> 赞同：4
> 
> 时间：2012-09-17T11:53:44.280
> 
> 标签：paypal-sandbox

在过去的几个月里，我正在实施一个在线商店，并将其成功连接到贝宝的沙盒，用于贝宝支付专业网关。它从一开始就完美无缺。

因为在周末它不再工作了。商店给我以下错误：

```
    调用支付网关时出错

    跟踪给了我这个错误：

    无法创建 SSL/TLS 安全通道

    页面 URL：/checkoutreview.aspx 来源：System.Web.Services 消息：请求被中止：无法创建 SSL/TLS 安全通道。
  堆栈跟踪：
     在 System.Web.Services.Protocols.WebClientProtocol.GetWebResponse（WebRequest 请求）
     在 System.Web.Services.Protocols.HttpWebClientProtocol.GetWebResponse（WebRequest 请求）
     在 System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke（字符串方法名，对象 [] 参数）
     在 C:\Development\Natrol\AspDotNetStorefront\ASPDNSFGateways\PayPalSvcAPIv30.cs:line 956 中的 AspDotNetStorefrontGateways.Processors.PayPalAPIAASoapBinding.DoDirectPayment(DoDirectPaymentReq DoDirectPaymentReq)
     在 AspDotNetStorefrontGateways.Processors.PayPal.ProcessCard（Int32 OrderNumber、Int32 CustomerID、十进制 OrderTotal、布尔 useLiveTransactions、TransactionModeEnum TransactionMode、地址 UseBillingAddress、String CardExtraCode、地址 UseShippingAddress、String CAVV、String ECI、String XID、String& AVSResult、String& AuthorizationResult、String& AuthorizationCode , String& AuthorizationTransID, String& TransactionCommandOut, String& TransactionResponse) 在 C:\Development\Natrol\AspDotNetStorefront\ASPDNSFGatewayProcessors\GatewayPayPal\PayPal.cs:line 415
     在 C:\Development\Natrol\AspDotNetStorefront\ASPDNSFGateways\GatewayTransaction.cs:line 205 中的 AspDotNetStorefrontGateways.GatewayTransaction.CallGateway(String gateway)
     在 C:\Development\Natrol\AspDotNetStorefront\ASPDNSFGateways\GatewayTransaction.cs:line 176 中的 AspDotNetStorefrontGateways.GatewayTransaction.Process()

```

这里发生了什么 ？知道发生了什么以及如何解决它？为什么会突然坏掉？

谢谢，迈克尔

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T02:42:13.443

如果您使用的是 paypal_base.dll，那么您需要更改的 url 将嵌入其中，并且 PayPal 尚未发布新的（目前）。要覆盖设置，您需要将以下内容添加到您的 web.config 文件中。将以下内容添加到 < configSections >。

```
<section name="paypal" type="com.paypal.sdk.core.ConfigSectionHandler, paypal_base"/> 
```

然后添加以下 <paypal> 部分。

```
<paypal>
    <endpoints>
      <wsdl>
        <environment name="live">
          <port name="PayPalAPI">https://api.paypal.com/2.0/</port>
          <port name="PayPalAPIAA">https://api-aa.paypal.com/2.0/</port>
          <port name="PayPalAPI" threetoken="true">https://api-3t.paypal.com/2.0/</port>
          <port name="PayPalAPIAA" threetoken="true">https://api-aa-3t.paypal.com/2.0/</port>
        </environment>
        <environment name="sandbox">
          <port name="PayPalAPI">https://api.sandbox.paypal.com/2.0/</port>
          <port name="PayPalAPIAA">https://api-aa.sandbox.paypal.com/2.0/</port>
          <port name="PayPalAPI" threetoken="true">https://api-3t.sandbox.paypal.com/2.0/</port>
          <port name="PayPalAPIAA" threetoken="true">https://api-3t.sandbox.paypal.com/2.0/</port>
        </environment>
      </wsdl>
    </endpoints>
  </paypal> 
```

（见 [https://www.x.com/developers/paypal/forums/paypal-sandbox/c-sdk-sandbox-three-token-endpoint](https://www.x.com/developers/paypal/forums/paypal-sandbox/c-sdk-sandbox-three-token-endpoint)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T22:51:42.177

如果您使用“签名”身份验证，则以下情况为真：

关键是几周前端点[https://api.sandbox.paypal.com/2.0/](https://api.sandbox.paypal.com/2.0/)停止工作。现在应该改用这个：[https ://api-3t.sandbox.paypal.com/2.0/](https://api-3t.sandbox.paypal.com/2.0/)

为此，我更改了 PayPal SDK 中的“paypal-endpoint.xml”中沙盒的端点。下载SDK，找到“paypal-endpoint.xml”，找到Sandbox部分并将地址更改为上面提到的一个。然后重新编译paypal_base.dll并使用

这里发布了非常相似的解决方案，但 XML 发布在 web.config: www 中。X 。com/developers/paypal/forums/paypal-sandbox/c-sdk-sandbox-three-token-endpoint

谷歌“贝宝端点”以获取有关当前贝宝端点的更多信息

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T15:24:49.220

我猜您使用的是“签名”而不是“证书：身份验证？并且可能在测试时从本地 IP 运行？

贝宝沙盒环境变得混乱:)（贝宝的官方回应）并希望在某些呼叫中看到“证书”。

我们有一个实例，我们正在使用带有 APISignature auth 的 .NET paypal API SDK - 这意味着我们无法更改端点（.NET sdk 版本 51），并且我们没有安装证书（签名身份验证不需要）。创建配置文件的功能在沙盒 (CreateRecurringPaymentsProfile) 上运行良好，但进行事务查找 (TransactionSearch) 会导致“无法创建 SSL/TLS 安全通道”。当我们转移到“实时”环境时，两者都可以正常工作。

我们发现的唯一解决方法是更改​​为“cert: auth，安装证书，它似乎工作正常。这是皇家 PITA。

# iphone - iphone 5 上的 UIStoryBoard 是如何变化的

> ID：12458652
> 
> 赞同：2
> 
> 时间：2012-09-17T11:54:30.733
> 
> 标签：iphone, objective-c, uistoryboard

我已经在 App Store 上发布了一个使用 Storyboard 的应用程序。

我从主题演讲中看到，与之前的机型相比，iPhone 5 的屏幕更高。

我想知道这将如何影响我现有的故事板，因为从我的“应用程序角度”来看，只有一个区别是 background.png。其余的只是可以容纳更多行的普通 UITableView。

我在 Apple 网站上找不到任何文件（我一直很菜鸟在 Apple 开发者网站上寻找东西）。有没有人对他已经开发和发布的应用程序进行调整以匹配新的布局？如果是，我是否必须开发一个全新的故事板，或者是否需要对代码进行调整？

[更新]

我正在报告我的经验，现在 Xcode 4.5 已长期交付用于开发。正如一些人建议的那样，Xcode 本身询问我是否想通过创建默认 png 来启用最高屏幕支持。同意后，我必须在情节提要中输入每个 segue 进行一些调整，将 png 背景（设计上无法拉伸）更改为最高的，更改拉伸设置并重新部署。

这是一项令人讨厌的工作，因为我有很多 segues，而且 Xcode 不允许在 Interface Builder 中重用模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:11:46.040

不支持 1136x640 分辨率的旧应用程序将在信箱模式下运行，顶部和底部有黑色区域。

您只需提供新的`Default-568h@2x.png`加载屏幕即可为现有项目启用新的布局支持。不过请注意，您必须在旧分辨率和新分辨率上测试旧界面（通过 iOS 模拟器），以确保一切看起来都很好并且按设计工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:07:24.250

据说当 iphone 5 启动时，如果不考虑增加尺寸（不是为 iphone5 屏幕设计的），您的应用程序视图将在顶部和底部填充黑色，因此您的应用程序可以正常工作但会有黑色两个和顶部的边框以填充额外的空间..

# jquery - 对话框内的Jquery事件

> ID：12458654
> 
> 赞同：1
> 
> 时间：2012-09-17T11:54:39.363
> 
> 标签：jquery, user-interface

我有一个 jquery 对话框，如果被触发会显示几个要完成和要提交的输入字段，在里面我有一个选择下拉列表，我想将所选值的函数链接到文本区域，意思是taxtarea 应填写自定义文本。我的问题`how to declare a .change event inside of dialog?` `how to declare <textarea>$variable_text</textarea>`

我试过的

```
// Init Dialog
    $('a.open_dialog').click(function() {
        $('<div />').appendTo('body').load($(this).attr('href')).dialog({
            title: $(this).attr('title'),
            modal: true,
            draggable: false,
            width: 800,
            position: 'top'            
        });
        $('select#state').change(function() {
           // assign the value to a variable, so you can test to see if it is working
            var selectVal = $('select#state :selected').val();
            var emailMessage = 'lorem Ipsume dolores macus nacus';
            $("textarea#EmailMessage").val(emailMessage);
            alert( $("textarea#EmailMessage").val(emailMessage));
        });

        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:58:14.073

你还没有真正说明什么不起作用。我可以建议的一件事是修改如何提取下拉元素的“选定”值。

```
var selectVal = $('select#state').val(); 
```

无需指定“选定”选项，因为一个`<select>`元素只能有一个值。这当然是假设它不是多选。

您可能还想尝试的另一件事是使用`on()`函数而不是`change()`函数。如果您将这些元素动态添加到文档中，则该`change()`函数可能不会触发，因为在解析代码时，该元素尚未出现在页面上。

```
$('select#state').on('change',function() {
  ...
}); 
```

# c# - 如何覆盖 Control.Invalidate() 方法？

> ID：12458656
> 
> 赞同：1
> 
> 时间：2012-09-17T11:54:48.710
> 
> 标签：c#, .net, winforms, drawing, controls

我为我的控件使用`OwnerDrawAll`属性：

```
this.customTreeView.DrawMode =System.Windows.Forms.TreeViewDrawMode.OwnerDrawAll;
this.customTreeView.DrawNode += 
    new System.Windows.Forms.DrawTreeNodeEventHandler(customTreeView_DrawNode);

private void customTreeView_DrawNode(object sender, DrawTreeNodeEventArgs e) {
   if(!myComboBoxChanged) {              // Draw the whole control(tree and info)
        drawNode(e);
        drawInfo(e);
   } else {                              // Draw only info
        drawInfo(e);
   }
} 
```

然后我使用文本更改事件：

```
private void cBox_TextChanged(object sender, EventArgs e)
        {
            text = cBox.Text;                 // I need this in drawInfo()
            myComboBoxChanged = true;
            this.customTreeView.Invalidate();  // It doesn't do what I want
            myComboBoxChanged = false;
    } 
```

这里`Invalidate()`方法重绘整个树，我该如何解决这个问题，所以只会`drawInfo()`被调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:08:44.737

更好的方法是创建自己的 TreeView 类并封装所有方法和属性：

```
public class MyTreeView : TreeView
{
    public bool TextBoxChanged { get; set; }
    public MyTreeView()
    {
        DrawMode = TreeViewDrawMode.OwnerDrawAll;
        DrawNode += new System.Windows.Forms.DrawTreeNodeEventHandler(customTreeView_DrawNode);

    }
    protected override void OnInvalidated(InvalidateEventArgs e)
    {
        //comment  the below line to create your own Invalidate
        //base.OnInvalidated(e);
    }

    private void customTreeView_DrawNode(object sender, DrawTreeNodeEventArgs e)
    {
        if (!TextBoxChanged)
        {              // Draw the whole control(tree and info)
            drawNode(e);
            drawInfo(e);
        }
        else
        {                              // Draw only info
            drawInfo(e);
        }
    }

    private void drawNode(DrawTreeNodeEventArgs e)
    {
        //...........
    }

    private void drawInfo(DrawTreeNodeEventArgs e)
    {
        //...........
    }
} 
```

# ruby-on-rails - :dependent => :delete on belongs_to 不会删除所有者对象

> ID：12458662
> 
> 赞同：17
> 
> 时间：2012-09-17T11:55:17.837
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我一直在检查[belongs_to](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to)方法的选项并测试 Rails 3.2.7 中的以下行为

根据上面的链接，该`:dependent`选项指出

> 如果设置为 :destroy，则关联对象在该对象被销毁时被销毁。如果设置为 :delete，则删除关联对象而不调用其 destroy 方法。

据我了解，如果在以下情况下删除帖子，则应删除作者：

```
class Post < ActiveRecord::Base
  belongs_to :author, :dependent => :delete
end

class Author < ActiveRecord::Base
  attr_accessible :name
  has_one :post

  before_destroy :log_author_removal

  private
    def log_author_removal
      logger.error('Author is getting removed')
    end

end 
```

在控制台中：

```
> Post.first
  Post Load (0.4ms)  SELECT "posts".* FROM "posts" LIMIT 1
 => #<Post id: 5, title: "Post 5", author_id: 3>
> p.delete
  SQL (197.7ms)  DELETE FROM "posts" WHERE "posts"."id" = 5
 => #<Post id: 5, title: "Post 5", author_id: 3> 
> Author.find(3)
  Author Load (0.5ms)  SELECT "authors".* FROM "authors" WHERE "authors"."id" = ? LIMIT 1  [["id", 3]]
 => #<Author id: 3, name: "Author 3"> 
```

但是调用`p.destroy`会删除关联作者。

我是否误解了上面引用的陈述？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-17T12:05:21.740

是的，调用`delete`通常会跳过您或 rails 在销毁记录时设置的所有回调。这些包括回调`before_destroy`，也包括销毁相关记录。

因此，如果您调用`p.delete`它，它将不会对关联的记录做任何事情。

当您调用`p.destroy`它时，它将：

1.  如果设置，则调用`before_destroy`回调。
2.  删除对象。
3.  如果您设置`:dependent => :delete`，它将简单地删除 Author 对象。如果将其设置为`:destroy`它将为作者对象重复整个过程（如果适用，则回调和销毁其相关记录）。
4.  如果设置，则调用`after_destroy`回调。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-17T12:24:22.677

据我了解：

`:dependent => :destroy``association.destroy`如果您调用对象，将触发`destroy`。

`:dependent => :delete``association.delete`如果您调用对象，将触发`destroy`。

在这两种情况下，您都必须调用`destroy`父对象。不同之处在于子对象上调用的方法。如果您不想在子对象上触发销毁过滤器，请使用`:dependent => :delete`. 如果您确实需要它们，请使用`:dependent => :destroy`.

通过快速查看这里的源代码：[https ://github.com/rails/rails/blob/357e288f4470f484ecd500954fd17fba2512c416/activerecord/lib/active_record/associations/builder/belongs_to.rb#L68](https://github.com/rails/rails/blob/357e288f4470f484ecd500954fd17fba2512c416/activerecord/lib/active_record/associations/builder/belongs_to.rb#L68)

我们看到调用dependent 只会在父模型上创建一个after_destroy，调用其中一个`delete`或`destroy`子对象。但在这两种情况下，它都会创建一个`after_destroy`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-30T13:56:32.660

belongs_to 关联同时支持**:delete**和**:destroy**用于**:dependent**。您可以参考以下链接 [http://apidock.com/rails/v4.0.2/ActiveRecord/Associations/ClassMethods/belongs_to](http://apidock.com/rails/v4.0.2/ActiveRecord/Associations/ClassMethods/belongs_to)

调用 delete 会跳过所有回调，如 before_destroy 并且也不会删除关联对象的关联记录。

例子

```
class Order < ActiveRecord::Base
has_one :project, :dependent => :delete
has_many :resources, :dependent => :delete
end

class Project < ActiveRecord::Base
belongs_to :order, :dependent => :delete
end 
```

在上面的代码中，如果项目已被销毁，那么订单也会被删除，但订单中的资源不会被删除，但如果我们使用

```
belongs_to :order, :dependent => :destroy 
```

然后附加订单的资源以及项目销毁时删除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T12:01:26.160

```
 belongs_to :author, :dependent => :delete 
```

应该是：belongs_to :author, :dependent => :destroy

:destroy 和 :delete 在 ActiveRecord 中的行为不同，删除绕过验证和 AR 关联，因此关联的对象不会被删除。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-17T12:06:00.540

belongs_to 关联不支持: **depedent的****:delete**。它仅支持**:destroy**。请参考此链接[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)。

# scalability - 非 Azure Web 场上的 SignalR

> ID：12458663
> 
> 赞同：3
> 
> 时间：2012-09-17T11:55:19.993
> 
> 标签：scalability, signalr, web-farm

我已经为 Web 应用程序实现了 SignalR 支持。它工作得很好。我现在处理的问题是让它在非 Azure 网络场环境中工作。SignalR 支持开箱即用的 Windows Azure 服务总线和 Redis。GitHub 上还有 RabbitMQ 实现。所有这些解决方案都实现了 IMessageBus 接口。

根据我们目前的情况，我们不能使用 Redis 或 RabbitMQ。所以我有几个问题：

1) 有没有使用 SQL Server 或 MSMQ 的替代解决方案？

2) 为 SQL Server 或 MSMQ 实施自己的解决方案是否困难（可能）？David 在 SignalR 0.5 (http://weblogs.asp.net/davidfowler/archive/2012/05/02/signalr-0-5.aspx) 上的帖子说他们将支持 SQL Server QNS 或 Service Broker（不是 SQL Server DB本身）所以也许这根本是错误的方式？

3) 在实施此支持之前，有没有办法解决？例如，听起来我们需要处理服务器之间的连接列表的状态。如果我们知道节点的数量和它们的 IP，我们可以通过 Web 服务调用在服务器之间共享这些信息。这有什么意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:48:25.197

Damian Edwards 似乎刚刚开始研究 SQL 横向扩展实现。[您可以在 GitHub 上](https://github.com/SignalR/SignalR/tree/master/src/Microsoft.AspNet.SignalR.SqlServer)找到该实现的详细信息，并且[可以在此处跟踪跟踪这项工作](https://github.com/SignalR/SignalR/issues/232)的问题。

# jquery - Google 如何在页面转换时捕获按键？

> ID：12458664
> 
> 赞同：1
> 
> 时间：2012-09-17T11:55:27.240
> 
> 标签：jquery

如果您访问 Google.com 并在搜索栏中输入一个字母，它似乎会立即将您带到另一个页面。在此期间，您可以尽可能快地输入，而且 Google 不会丢失一个字符。

我已经尝试使用 keyup() 事件和 setinterval() 来模拟它，但在加载页面时我仍然会丢失一两个字符。

```
$(document).ready(function(){
var timer;$("input#q").keyup(
  function(e){
  var str = $("input#q").val();
  if(str.length > 1){
    clearInterval(timer);timer = setTimeout(
      function(){var url = "/search/?q="+encodeURI($("input#q").val());
      location.href = url;}, 210);
   }
}); 
```

这是我目前正在使用的代码，它可以工作，但在将您转移到下一页时可能会丢失按键/按键。

有谁知道谷歌是怎么做的或有什么建议？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T11:58:09.257

你以为你*被传*送到另一个页面，但实际上不是。它使用`pop`/`push`在历史堆栈中，使用新的（酷！）[HTML5 功能](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)。

该页面永远不会重新加载，因此您不会丢失任何字符。

当您浏览存储库时，Github 也会使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:12:36.807

输入的*捕获*实际上是在同一个`<input>`控件中完成的，它只是通过更改 CSS 定位来移动。没有页面转换，只有 JavaScript 对按键做出反应，然后相应地操纵样式。

在后台触发了 AJAX 事件以执行增量搜索（如果您为 Google 启用了该选项），您可以查看是否使用可以显示网络流量的浏览器，例如 Chrome。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T11:58:58.583

从我在使用 google.com 时看到的情况来看，在您离开搜索框之前，它们实际上并没有改变栏中的位置。此时，它会快速更改页内锚点（# 之后），这不会触发页面的完全重新加载。

# docbook - 使用 dblatex 的 ulink 的相对 url？

> ID：12458674
> 
> 赞同：1
> 
> 时间：2012-09-17T11:56:21.080
> 
> 标签：docbook, dblatex

我想在 docbook 中定义一个指向外部 html 文件的链接。输出将是使用 dblatex 生成的 pdf。外部 html 文件位于同一组文档中，所以我知道在 html 文件中`<a href="../doxyout/class_foo.html#method123">here</a>`可以工作。但是，如果我`<ulink url="../doxyout/class_foo.html#method123">here</ulink>`在 docbook 中使用，那么当我在

*   evince：它说它无法打开`/whatever/directory/the/pdf/file/was/file:../doxyout/class_foo.html#method123`

*   acroread：浏览器从 开始`file:///doxyout/class_foo.html#method123`，显然也失败了

我应该在 url 属性中写什么以使其工作？

# localization - 使用 Enterprise Library Exception Management 时如何本地化错误消息？

> ID：12458679
> 
> 赞同：0
> 
> 时间：2012-09-17T11:56:46.997
> 
> 标签：localization, enterprise-library

我一般对本地化不是很熟悉，而且我对 Microsoft Enterprise Library 是全新的。如何创建本地化资源并在异常管理中使用它？

我设置了一个替换处理程序，以便在我的策略处理异常时抛出友好的错误消息，并且那里有用于指定消息资源名称和消息资源类型的字段。我不知道这些领域发生了什么。我找不到任何例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:41:46.680

您不必手动编辑 Designer 文件；事实上，你不应该。

我使用的是 VS 2010 和 C#，但 VS 2012 和 VB 的概念应该相同。

除了您的回答之外，以下链接对我非常有帮助，可以解决这个问题：

[http://odetocode.com/blogs/scott/archive/2009/07/16/resource-files-and-asp-net-mvc-projects.aspx](http://odetocode.com/blogs/scott/archive/2009/07/16/resource-files-and-asp-net-mvc-projects.aspx)

（你可以忽略他关于 App_GlobalResources 的警告——这就是我的 Exceptions.resx 文件，这对我有用。）

1.  确保企业库配置工具已关闭。
2.  打开 Designer.vb（或 Designer.cs）文件，以便观察发生的变化。
3.  右键单击您的 .resx 文件并选择属性。
4.  **将Build Action**更改为**Embedded Resource**。
5.  **将自定义工具**更改为**PublicResXFileCodeGenerator**。这确保了该类生成为公共的，而不是内部的（或 VB 中的 Friend）。在您单击离开此属性后，您应该会看到您的资源类现在在 Designer 文件中定义为公共。
6.  将**自定义工具命名空间**设置为有意义的东西，即**<ApplicationName>.Resources**。观察 Designer 文件中的命名空间已更改。
7.  构建您的项目以获得新版本的程序集。
8.  在配置工具中编辑您的 EntLib 配置文件，展开异常处理设置，然后展开您要配置的 Wrap 或 Replace Handler。
9.  **单击消息资源类型**字段末尾的省略号 (...) 。这将打开类型浏览器。单击从文件中添加，浏览到项目的 bin 文件夹，然后选择项目的主程序集。该类型现在应该出现在 Loaded 程序集中。
10.  Expand the assembly to find the namespace you entered above, expand that, select the type that has been created for your exception messages, and click OK.
11.  Set the **Message Resource Name** to the key in the resource file that holds the message for this exception.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:54:02.997

我想通了。

您可以像任何其他本地化一样在 .resx 文件中添加标准资源。我的问题是，当我在企业库的配置界面中将资源类型和资源名称添加到我的替换处理程序时，程序集没有包​​含任何要添加的类型。

问题是两件事。当您使用 VB.Net 在 Visual Studio 2012 中创建 .resx 时，它使用 My.Resources 作为命名空间。可能是 My.[FolderName]，我不知道。另一个问题是它将类创建为 Friend，而不是 Public。

我不得不更改属性中的命名空间，并在 .vb 文件中手动将 Friend 更改为 Public。每当我添加新资源时它就会变回来，因为它会重新生成代码，但至少现在我可以让它工作。

# asp.net - 浏览器未正确显示编码内容。ASP.NET 中的 HTML 编码

> ID：12458681
> 
> 赞同：0
> 
> 时间：2012-09-17T11:56:52.737
> 
> 标签：asp.net, asp.net-4.0, html-encode

我正在使用 Server.HtmlEncode 但由于某种未知原因，浏览器没有解码编码，它只是按原样显示。这是网址[https://www.eduheap.com/channel/ucberkeley](https://www.eduheap.com/channel/ucberkeley)

查看描述，您会看到 ( ' ) 显示为`&#39;`

相关守则是

```
ChannelDescription.InnerText = Server.HtmlEncode(query2.Description);//Input is string, query2 is nothing but EntityModel object 
```

# asp.net-mvc - ASP.NET MVC 如何使用 ASP.NET Membership Provider 管理用户内容

> ID：12458683
> 
> 赞同：6
> 
> 时间：2012-09-17T11:57:14.823
> 
> 标签：asp.net-mvc, asp.net-membership, authorization, user-management, user-generated-content

我有 5 年的 ASP.NET Web 窗体经验，而且我是 ASP.NET MVC 的新手。我现在正在尝试通过一些教程、视频教程和书籍来学习 MVC。
我正在使用 Visual Studio 2012 和全新的 ASP.NET MVC 4 构建一个小的 Web 应用程序来管理我的共同基金投资组合。这应该让我进入新模式并学习很多新东西......
我的应用程序也应该让其他一些朋友也这样做。所以它必须**管理不同用户的投资组合**。
我首先使用实体​​框架代码构建了一个小数据库，所以我有一些基本模型：基金、投资组合、共享、存款、来源和用户。一个用户可以拥有许多投资组合，其中包含许多资金。每个用户都有自己的存款清单。每个基金都有许多股票价值（一天）。
Source 模型只是一个表格，我在其中为每个网站来源放置了一个 URL，用于特定基金的份额数据。所以，一只基金有很多来源。然后，我每天使用一次爬虫类从这些网站获取数据。
这是应用程序的主要结构。现在，我需要知道什么是最好的方法：

**1）管理用户的帐户**。
我应该在我的数据库上集成 ASP.NET 成员数据库结构并使用它而不是我的自定义用户表来管理用户吗？

**2) 管理用户内容**：投资组合、资金等。 在 MVC 模式中，实现身份验证和所有授权验证以使用户获得自己的数据
的**最简单**和**最优雅的方式是什么？**我是否需要在每个控制器的每个操作中检查这一点？

那么，换句话说，我必须如何实现我的控制器？例如：

```
[Authorize]
public class PortfolioController : Controller
{
    private FundMonitorContext db = new FundMonitorContext();

    public ActionResult Index()
    {
        // Check user ID and give back to the view only his portfolios...

        var portfolio = db.Portfolios.List();
        return View(portfolio.ToList());
    }

    ...

    public ActionResult Details(int id = 0)
    {
        ...
    }

    //Other actions...
} 
```

我真的很感激每一个建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:27:36.147

1.  这是您必须自己做出的选择，但我喜欢创建自己的 Membership Provider，这并不难。使用您自己的提供商，您可以按照自己的方式进行制作，不像 10 年前微软认为的很酷。示例： http: [//www.codeproject.com/Articles/165159/Custom-Membership-Providers](http://www.codeproject.com/Articles/165159/Custom-Membership-Providers)。
    在 .NET 4.5 中，使用 SimpleMembershipProvider 创建您自己的提供程序更加容易。

2.  使用 [Authorize] 属性，您告诉控制器只接受授权用户。当用户登录时，您可以将用户名/用户 ID 放在 FormsAuthentication cookie 中，这样您就可以很容易地获取用户的用户名/用户 ID。如果您想在其中放入更多数据，您还可以在 cookie 中创建 Authtication ticktes。

    为了更容易测试，我几乎不建议在 HttpContext.User 和 IPrincipal 之间创建绑定，[http://www.hanselman.com/blog/IPrincipalUserModelBinderInASPNETMVCForEasierTesting.aspx](http://www.hanselman.com/blog/IPrincipalUserModelBinderInASPNETMVCForEasierTesting.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-19T04:07:30.157

使用 Identity 2.0 进行身份验证和授权。我发现这个博客[http://typecastexception.com/post/2014/04/20/ASPNET-MVC-and-Identity-20-Understanding-the-Basics.aspx](http://typecastexception.com/post/2014/04/20/ASPNET-MVC-and-Identity-20-Understanding-the-Basics.aspx)很有帮助。基本上，您将获得基于声明的身份验证，然后可以使用 AuthorizeAttribute 装饰您的操作，例如

```
[Authorize(Roles="Admin, Moderators")]
public ActionResult MyAction(...) 
```

您可以通过控制器中的 User.Identity 属性查看声明。

# maven - ImageJ Maven 依赖项是否位于 Maven 中心？

> ID：12458688
> 
> 赞同：4
> 
> 时间：2012-09-17T11:57:30.880
> 
> 标签：maven, dependencies, imagej

我打算将 ImageJ 用于 webapp，但似乎 ImageJ maven 依赖项不在中央 maven 存储库中。

*   我对吗？
*   当 ImageJ 2.x 发布时，这会改变吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T17:49:37.833

*编辑：2014 年 7 月 4 日更新以反映最新状态。*

使用 groupId 在 Maven Central 上的构建`gov.nih.imagej`是由第三方完成的，但官方 ImageJ 1.x 构建*可*从 Maven Central 获得， groupId`net.imagej`和 artifactId`ij`从 version 开始`1.48r`；例如：

```
<dependency>
  <groupId>net.imagej</groupId>
  <artifactId>ij</artifactId>
  <version>1.48r</version>
</dependency> 
```

[ImageJ Maven 存储库](http://maven.imagej.net/)中提供了[较早的 ImageJ 1.x 官方版本](http://maven.imagej.net/content/groups/public/net/imagej/ij/)。它还具有[ImageJ2](http://imagej.net/ImageJ2)构建，其中包含多个以`imagej-`. 您可以通过以下配置使用它：

```
<repositories>
  <repository>
    <id>imagej.public</id>
    <url>http://maven.imagej.net/content/groups/public</url>
  </repository>
</repositories> 
```

[建议在ImageJ 教程](https://github.com/imagej/imagej-tutorials)之后为您的 POM 建模。这些项目从[ImageJ 父 POM](https://github.com/imagej/pom-imagej)继承，从而避免了重复的样板配置部分。

我们计划很快开始向 Maven Central 提交 ImageJ2 的构建。

有关将 Maven 与 ImageJ 结合使用的更多信息，请参阅：http: [//imagej.net/Maven](http://imagej.net/Maven)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T12:11:58.920

[您可以在mvnrepository.com](http://mvnrepository.com/artifact/gov.nih.imagej/imagej)找到 ImageJ maven 依赖项。

列出的版本是`1.40 - 1.46`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T12:04:55.607

您可能正在搜索此代码段？

```
<dependency>  
    <groupId>net.imagej</groupId>  
    <artifactId>ij</artifactId>  
    <version>[1.45s,)</version>  
</dependency> 
```

[在这里](http://imagej.1557.n6.nabble.com/ImageJ-2-0-0-alpha5-maven-repo-td3682689.html)找到它。可能还有其他有用的 maven 片段也适合您。

# objective-c - 多个搜索选项，核心数据 fetchrequest xcode

> ID：12458689
> 
> 赞同：0
> 
> 时间：2012-09-17T11:57:31.177
> 
> 标签：objective-c, xcode, search, core-data, predicate

好的，所以基本上我有一个包含客户信息的核心数据数据库。我也有一个搜索栏。我想要它，所以我可以选择是否搜索姓名、地址等。等等。

这是我目前拥有的代码：

```
 [sosdRequest setPredicate:[NSPredicate predicateWithFormat:@"(AccountCode contains[cd] %@           
AND %d>0) AND (CompanyName contains[cd] %@ AND %d>0) AND (Address1 contains[cd] %@ AND %d>0) 
AND (Address2 contains[cd] %@ AND %d>0) AND (Town contains[cd] %@ AND %d>0)  AND (County 
contains[cd] %@ AND %d>0) AND (Postcode contains[cd] %@ AND %d>0) AND (UserField01 
contains[cd] %@ AND %d>0) AND (UserField02 contains[cd] %@ AND %d>0) AND (UserField03 
contains[cd] %@ AND %d>0) AND (UserField04 contains[cd] %@  AND %d>0) AND (UserField05 
contains[cd] %@ AND %d>0)",searchBar.text, _searchAccountCodeOnly, searchBar.text, 
_searchNameOnly, searchBar.text, _searchAddress, searchBar.text, _searchAddress, 
searchBar.text, _searchTown, searchBar.text, _searchCounty, searchBar.text, _searchAddress, 
searchBar.text, _searchUser1, searchBar.text, _searchUser2, searchBar.text, _searchUser3, 
searchBar.text, _searchUser4, searchBar.text, _searchUser5]]; 
```

所以有了这个，'_searchAddress''_searchNameOnly'等等。是整数。如果我说

```
_searchAccountCodeOnly = 0;
_searchNameOnly = 0;
_searchNumbers = 0;
_searchTown =  0;
_searchCounty = 0;
_searchAddress = 2;
_searchContact = 0;
_searchUser1 = 0;
_searchUser2 = 0;
_searchUser3 = 0;
_searchUser4 = 0;
_searchUser5 = 0; 
```

我的搜索仍将根据 CompanyName 返回。这让我发疯了，我正要在午休时间跑步以理清头绪，但如果有人有任何想法，将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:14:16.020

我不知道这是否真的有效（以及 Core Data/sqlite 在优化此类查询方面的效果如何），但要忽略查询中的一个属性，您可能是指

```
(CompanyName contains[cd] %@ OR %d == 0) 
```

因此如果相应的标志为零，则子表达式的计算结果为 TRUE。

A better way would be to build an array of predicates with the queries that you actually need and then use

```
[NSCompoundPredicate andPredicateWithSubpredicates:arrayOfPredicates]; 
```

# gdcm - gdcm 库 - 传输语法

> ID：12458690
> 
> 赞同：0
> 
> 时间：2012-09-17T11:57:34.947
> 
> 标签：gdcm

GDCM 库是否支持以下 DICOM 传输语法：

1.2.840.10008.1.2.4.53 JPEG 光谱选择，非分层（过程 6 和 8） 1.2.840.10008.1.2.4.55 JPEG 全渐进，非分层（过程 10 和 12）

如果是，任何人都可以链接我用这些传输语法编码的示例图片吗？我一直在到处寻找，但我什么也没找到...

* * *

感谢您的回复。我已经看到您提供的链接，但是没有传输语法 UID 列表，所以我不确定 GDCM 是否完全支持我在问题中提到的传输语法。

尽管如此，我仍然需要在实践中对其进行测试，所以仍然在寻找用这些传输语法编码的文件......搜索了超过 20k 的图片并没有找到它们，但我知道一定有某个地方的示例文件......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:32:37.080

是的，GDCM 确实支持这两者，请参阅[简短介绍](https://sourceforge.net/apps/mediawiki/gdcm/index.php?title=Main_Page#Short_Presentation)

# c# - Facebook Like 按钮在 GeckoFX 浏览器中不起作用

> ID：12458693
> 
> 赞同：3
> 
> 时间：2012-09-17T11:57:47.883
> 
> 标签：c#, .net, facebook-like, webbrowser-control, geckofx

我想使用 Web 浏览器控件在我的 C# 应用程序中实现 Facebook Like 按钮，但我遇到了 Internet Explorer 的问题（单击like 按钮后，出现 facebook 登录弹出窗口）但 iexplore 阻止并询问我是否恢复页面。

因此，我下载了 geckoFx 以在我的应用程序中嵌入 Mozilla，而不是内置的 Web 浏览器控件！但是现在当我点击 Gecko 浏览器上的 Like 按钮时，我得到一个空白页面。当我右键单击页面查看源代码时，我什么也看不到（空白页）

也许问题是 GeckoFX 浏览器不支持 Popups 或不支持 Javascript

如何在 C# Windows 窗体中的 GeckoFX 浏览器中实现 Facebook Like 按钮？

我正在使用 XUL 跑步者 1.9.1.19

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-16T15:55:33.493

新窗口和选项卡不会自动处理。您需要为这些创建事件：

```
private void webBrowser_CreateWindow(object sender, GeckoCreateWindowEventArgs e) {
    e.WebBrowser = NewWindow();
}

private void webBrowser_CreateTab(object sender, GeckoCreateTabEventArgs e) {
    e.WebBrowser = NewWindow();
}

private GeckoWebBrowser NewWindow() {
    BrowserForm frm = new BrowserForm();
    frm.Show();
    return frm.WebBrowser;
} 
```

此处 BrowserForm 必须包含一个指向 GeckoWebBrowser 控件的公共属性。

# javascript - 如何在 ipad phonegap android eclipse 中关闭水合作用

> ID：12458695
> 
> 赞同：1
> 
> 时间：2012-09-17T11:57:56.433
> 
> 标签：javascript, android, eclipse, ipad, cordova

我使用 android 成功创建了一个应用程序，但是当我使用 build.phonegap.com 为 ipad 构建它时。键盘在 ipad 中不起作用我发现下面给出的一篇文章关闭了水合，但没有人告诉我如何在 ipad 设置或代码中关闭水合。我是移动应用程序新手 [http://community.phonegap.com/nitobi/topics/grey_screen_when_launching_android_package](http://community.phonegap.com/nitobi/topics/grey_screen_when_launching_android_package)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:21:19.513

经过一番搜索，我发现[https://build.phonegap.com/apps/206892#pane=app-details](https://build.phonegap.com/apps/206892#pane=app-details) 除了rebuildall 之外，设置选项卡中还有一个复选框。这可能对不熟悉phonegap的人有所帮助。只需使用[github在](https://github.com/)[build.phonegap.com](http://build.phonegap.com)中注册 并上传您的 www.zip 代码，然后取消选中（使用 hydration）就可以了

# android - Android中的相对“res/values”文件夹根据屏幕尺寸和分辨率缩放样式？

> ID：12458696
> 
> 赞同：2
> 
> 时间：2012-09-17T11:58:03.280
> 
> 标签：android, android-resources

我想知道是否有可能有一个文件夹，例如`res/values-small`或`res/values-hdpi`以与文件夹相同的方式`layout`？我正在考虑应该根据屏幕分辨率和大小自动缩放的样式。

还是我只是为同一`values/style.xml`文件中的其他分辨率创建单独的样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:09:28.000

是的，你是对的，你提到的所有名字都是有效的。要对不同的文件名进行更多试验，请使用 ADT。 ![带有限定符的 ADT 屏幕](../Images/5f41095ec54aa16bc263dc3ef5ac6f03.png)

# android - 在 Android 中重用布局 ( )

> ID：12458697
> 
> 赞同：1
> 
> 时间：2012-09-17T11:58:06.320
> 
> 标签：android, android-layout

我对 android 比较陌生。在我的项目中，我有一个所有活动通用的布局。我正在尝试在 Android 中重用我的布局。以下是我的代码

主要活动

```
public class MainActivity extends Activity implements OnClickListener {

    EditText emailEdit, passwordEdit;
    Button loginButton;

    TitleBarLayout titlebarLayout;
    String r;
    String rr;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login_activity);

        emailEdit = (EditText) findViewById(R.id.etEmail);
        passwordEdit = (EditText) findViewById(R.id.etPassword);

        loginButton = (Button) findViewById(R.id.loginButton);
        loginButton.setOnClickListener(this);

        //titlebarLayout=(TitleBarLayout) findViewById(R.id.titlebar);
        titlebarLayout=new TitleBarLayout(MainActivity.this);
        titlebarLayout.setLeftButtonText("Refresh");
        titlebarLayout.setRightButtonText("Logout");
        titlebarLayout.setTitle("iProtect");

        OnClickListener listener=new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                if(v.getId()==R.id.left_button)
                {}
                else if(v.getId()==R.id.right_button)
                {}

            }
        };
        titlebarLayout.setLeftButtonOnClickListener(listener);
        titlebarLayout.setRightButtonOnClickListener(listener);
    }
} 
```

login_activity.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/layout_bg_color">

    <include layout="@layout/titlebar_layout" 
        android:id="@+id/titlebar"/>

    <EditText
        android:id="@+id/etEmail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@layout/titlebar_layout"
        android:layout_marginLeft="20dip"
        android:layout_marginRight="20dp"
        android:layout_marginTop="100dip"
        android:background="@drawable/emailedit"
        android:inputType="textEmailAddress"
        android:maxEms="20"
        android:paddingLeft="70dip"
        android:singleLine="true"
        android:text="user@gmail.com" />

    <EditText
        android:id="@+id/etPassword"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/etEmail"
        android:layout_marginLeft="20dip"
        android:layout_marginRight="20dp"
        android:layout_marginTop="0dip"
        android:background="@drawable/passwordedit"
        android:inputType="textPassword"
        android:maxEms="20"
        android:paddingLeft="70dip"
        android:singleLine="true"
        android:text="123456" />

     <Button
        android:id="@+id/loginButton"
        android:layout_width="@dimen/login_button_width"
        android:layout_height="@dimen/login_button_height"
        android:layout_below="@+id/etPassword"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="50dip"
        android:text="Login" 
        android:textStyle="bold"
        android:background="@android:color/white"/>

    <ImageView
        android:id="@+id/ivFooter"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_below="@+id/loginButton"
        android:layout_marginTop="360dip"
        android:adjustViewBounds="true"
        android:baselineAlignBottom="false"
        android:cropToPadding="false"
        android:src="@drawable/footer" />

</RelativeLayout> 
```

标题栏布局.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="@dimen/titlebar_height"
    android:background="@color/title_bg_color"
    android:gravity="center_vertical"
    android:orientation="horizontal">

    <Button
        android:id="@+id/left_button"
        android:layout_width="@dimen/titlebar_button_width"
        android:layout_height="@dimen/titlebar_button_height"
        android:background="#000000"/>

    <TextView
        android:id="@+id/title_textview"
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:gravity="center"
        android:text="@string/app_name"
        android:textColor="@android:color/white"
        android:textStyle="bold" />

    <Button
        android:id="@+id/right_button"
        android:layout_width="@dimen/titlebar_button_width"
        android:layout_height="@dimen/titlebar_button_height" />

</LinearLayout> 
```

和 TitleBarLayout.java

```
public class TitleBarLayout extends LinearLayout {

    private WeakReference<Activity> activityRef;
    //Button leftButton, rightButton;
    private View contentView;
    Button leftButton,rightButton;
    TextView titletext;

    public TitleBarLayout(Activity a) {
        super(a);
        Log.i("TitleBar Layout", "Inside constructor");
        activityRef = new WeakReference<Activity>(a);
        inflateViewsFromXml();
        setListenersOnViews();
        setValuesOnViews();
    }

    private void setValuesOnViews() {
        // TODO Auto-generated method stub
    }

    private void setListenersOnViews() {
        // TODO Auto-generated method stub

    }

    private void inflateViewsFromXml() {
        Activity a = activityRef.get();
        LayoutInflater inflater = (LayoutInflater) a.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        contentView = inflater.inflate(R.layout.titlebar_layout, null);
    }

    public void setLeftButtonText(int resID) {

    }

    public void setLeftButtonText(String resID) {

        Log.v("Button", "Button Text="+resID);
        if (contentView != null) {
            leftButton = (Button)contentView.findViewById(R.id.left_button);
            Log.i("ERROR", "Inside setLeftButtonText");
            leftButton.setText(""+resID);
            leftButton.setTextColor(Color.WHITE);
        }
    }

    public void setLeftButtonOnClickListener(View.OnClickListener listener) {
        leftButton.setOnClickListener(listener);
    }

    public void setRightButtonText(int resID) {

    }

    public void setRightButtonText(String resID) {

        Log.v("Button", "Button Text="+resID);
        if (contentView != null) {
            Log.i("ERROR", "Inside setRightButtonText");
            rightButton = (Button)contentView.findViewById(R.id.right_button);
            rightButton.setTextColor(Color.BLACK);
            rightButton.setText(""+resID);

        }
    }

    public void setRightButtonOnClickListener(View.OnClickListener listener) {

        rightButton.setOnClickListener(listener);

    }

    public void setTitle(int resID) {

    }

    public void setTitle(String resID) {

        //@string/app_name
        Log.v("TextView", "Text="+resID);
        if (contentView == null) {
            Log.i("ERROR", "Inside setTitle");
            titletext = (TextView)contentView.findViewById(R.id.title_textview);
            titletext.setText(""+resID);
        }
    }
} 
```

我想在运行时在按钮上添加文本。但我不明白吗？我可以在 Logcat 上看到文本，但在按钮上看不到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:07:18.860

您正在将布局膨胀到变量视图“contentView”中。但是因为你的类是你在 xml 文件中膨胀的视图。你应该充气如下：

```
 inflater.inflate(R.layout.titlebar_layout, this); 
```

然后布局将在屏幕上可见。

这样，膨胀会将膨胀的视图添加到`LinearLayout`您的类扩展的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:56:33.423

这是不正确的。Android 已经在给标题栏充气了，所以你不必再给它充气了。相反，您可以只使用 findViewById 来获取标题栏的 XML 信息。我认为您可以使用 @+id 来使用您提供给标签的内容

更新：因为我误读了代码，所以为了正确性进行了编辑

# c# - 使用 TwainDotNET 时如何检测棱镜和非棱镜 64 位应用程序之间的差异

> ID：12458705
> 
> 赞同：2
> 
> 时间：2012-09-17T11:58:43.907
> 
> 标签：c#, mvvm, prism, twaindotnet

我正在尝试将[https://code.google.com/p/twaindotnet/](https://code.google.com/p/twaindotnet/)用于我们在 Windows 2008 终端服务器（64 位）上运行的内部应用程序。我发现很少有人评论这个库不能在 64 位机器上本地使用，并且它（以及所有使用它的应用程序）应该针对 x86 平台进行编译。（我正在使用 VS2010）但是，问题是：

*   示例应用程序 - TestAppWpf（来自 TwainDotNET 包） - 在（我们的）服务器上正常工作时，针对任何 CPU 进行编译（因此在服务器上以 64 位模式运行）。
*   我的（即使是最简单的示例）使用 Prism 和 Unity/MEF 的应用程序总是崩溃，异常是“尝试加载格式不正确的程序（HRESULT 的异常：0x8007000B）”

[使用的代码总是相同的：

```
Loaded += delegate
            {
                try
                {
                    Twain _twain;
                    var hook = new WpfWindowMessageHook(App.Current.MainWindow);
                    _twain = new Twain(hook);
                }
                catch (Exception ex)
                {
                    MessageBox.Show(GetText(ex, true), "twain", MessageBoxButton.OK, MessageBoxImage.Error);
                };
            }; 
```

catch 部分目前只是愚蠢的“转储”......当即将调用 twain_32.dll（DsmParent 函数）库时，首先发生异常

```
[DllImport("twain_32.dll", EntryPoint = "#1")]
        public static extern TwainResult DsmParent([In, Out] Identity origin, IntPtr zeroPtr, DataGroup dg, DataArgumentType dat, Message msg, ref IntPtr windowHandle); 
```

]

*   我也尝试重新编译整个项目和库以针对 x86，但仍然有类似的结果 - TestAppWpf 有效而我的应用程序无效。
*   无需提及，在我的开发机器（32 位）上，一切都像魅力一样。

**我完全迷失了试图找到示例应用程序和我自己的应用程序（都在 64 位环境中运行）之间的差异。**

任何建议/提示/或技巧将不胜感激。

马丁·F。

# iphone - UITextView 不会响应另一个 UITextView 附件视图 iPhone？

> ID：12458706
> 
> 赞同：1
> 
> 时间：2012-09-17T11:58:46.193
> 
> 标签：iphone, ios, uitextview, becomefirstresponder

我正在开发基于消息的 iPhone 应用程序。我有一个屏幕来回复收到的消息。此屏幕包含两个 UITextView，例如 bottomTextView 和 topTextView。

**topTextView 被添加为 bottomTextView 的 InputAccessory 视图**。

当用户进入屏幕时**`topTextView`必须成为FirstResponder**。它正在显示，但光标未放在 topTextView 中。光标位于 textview 中`bottomTextView`。如何使 topTextView 成为有光标的第一响应者？

这是我尝试过的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];            
    bottomBarView = [[UIView alloc] initWithFrame:CGRectMake(0, 380, 320, 40)];
    bottomBarViewImage.image = [UIImage imageNamed: @"toolbarbg~iphone.png"];
    [bottomBarView addSubview: bottomBarViewImage];
    [self.view addSubview: bottomBarView];

    bottomTextView = [[UITextView alloc] initWithFrame:CGRectMake(35, 7.5, 210, 25)];
    bottomTextView.delegate = self;
    bottomTextView.backgroundColor = [UIColor clearColor];
    bottomTextView.font = [UIFont fontWithName:@"Helvetica" size:14];
    bottomTextView.scrollEnabled = NO;
    [bottomBarView addSubview: bottomTextView];

    topBarView = [[UIView alloc] initWithFrame:CGRectMake(0, 380, 320, 40)];
    topBarViewImage.image = [UIImage imageNamed: @"toolbarbg~iphone.png"];
    [topBarView addSubview: topBarViewImage];

    topTextView = [[UITextView alloc] initWithFrame:CGRectMake(35, 7.5, 210, 25)];
    topTextView.delegate = self;
    topTextView.backgroundColor = [UIColor clearColor];
    topTextView.font = [UIFont fontWithName:@"Helvetica" size:14];
    topTextView.scrollEnabled = NO;
    [topBarView addSubview: topTextView];

    [bottomTextView becomeFirstResponder];
    [bottomTextView setInputAccessoryView: topBarView];
}

-(void) textViewDidBeginEditing:(UITextView *)textView
{
    if(textView == bottomTextView)  
    {
        bottomTextView.scrollEnabled = NO;

        [topTextView becomeFirstResponder];
    }
} 
```

`topTextView`with正在显示，`topBarView`但光标未放在 topTextView 中。你能帮我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:08:04.710

我认为这可能是因为您调用`[topTextView becomeFirstResponder];`了 UITextView 的 delegate `textViewDidBeginEditing:`。所以 topTextView 只有在您开始编辑时才会成为第一响应者`bottomTextView`。尝试调用`[topTextView becomeFirstResponder];`而不是`[bottomTextView becomeFirstResponder];`在 viewDidLoad 中调用。看看情况如何。我不确定，但`becomeFirstResponder`可能不会打电话`textViewDidBeginEditing:`。不确定它会起作用，但值得一试......

**编辑 ：**

我在[这里](https://stackoverflow.com/questions/7334563/how-to-add-text-field-to-inputaccessoryview-and-make-the-textview-first-responde)发现了一个相关的问题。可能是因为 textView 没有立即出现，所以它不能成为第一响应者。这是@Tom接受的答案：

> 我的解决方案：检查键盘（以及附件视图）何时出现！
> 
> 第 1 步）收听通知（确保在您想要接收通知之前阅读此代码）。

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(changeFirstResponder)
                                             name:UIKeyboardDidShowNotification 
                                           object:nil]; 
```

> 第 2 步）当键盘出现时，您可以将 inputaccessoryview 中的文本字段设置为第一响应者：

```
-(void)changeFirstResponder
{
    [textField becomeFirstResponder]; //will return TRUE;
} 
```

# c - zlib、c 和 gzread

> ID：12458711
> 
> 赞同：0
> 
> 时间：2012-09-17T11:59:24.203
> 
> 标签：c, zlib

所以我在 Ubuntu 上使用 zlib 包。我正在尝试弄清楚如何正确使用 gzopen 和 gzread，这就是我目前所拥有的

```
#include <stdio.h>
#include <string.h>
#include <assert.h>
#include <zlib.h>

#define NUM_BUFFERS 8
#define BUFFER_LENGTH 1024

char buf[BUFFER_LENGTH];
int main(int argc, const char* argv[])
{
    int status;
    gzFile file;
    file = gzopen("beowulf.txt", "w");
    int counter = 0; /*when the counter reachers BUFFERS_FULL, stop*/
    if(file == NULL)
    {
        printf("COULD NOT OPEN FILE\n");
        return 1;
    }
    while(counter < NUM_BUFFERS)
    {
        status = gzread(file, buf, BUFFER_LENGTH - 2);
        printf("STATUS: %d\n", status);
        buf[BUFFER_LENGTH - 1] = "\0";
        printf("%s\n", buf);
        counter++;
    }
    gzclose(file);
    printf("STATUS: %d\n", status);
    return 0;
} 
```

返回-2 ，`gzread("STATUS: %d\n",status);`我不知道为什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T12:08:36.007

模式`"w"`表示您正在准备**创建**新存档：

```
file = gzopen("beowulf.txt", "w"); 
```

您刚刚将文件截断为零长度。

此外，您应该使用二进制模式标志：`"wb"`或`"rb"`.

此外，您假定的 .gz-archive 具有扩展名有点奇怪`.txt`。

阅读[文档](http://www.zlib.net/manual.html#Gzip)，文档规则。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:05:51.270

使用函数记录错误类型`gzerror()`。由于它是-2，它不会是文件结束错误。可能出现以下任何错误。

```
Z_DATA_ERROR 
```

读取数据时发生CRC错误；该文件已损坏。

```
Z_STREAM_ERROR 
```

流无效，或处于无效状态。

```
Z_NEED_DICT 
```

需要字典（参见 inflateSetDictionary()）。

```
Z_MEM_ERROR 
```

可用于解压缩的内存不足。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T12:15:22.823

来自[http://refspecs.linuxbase.org/LSB_3.0.0/LSB-Core-generic/LSB-Core-generic/zlib-gzread-1.html](http://refspecs.linuxbase.org/LSB_3.0.0/LSB-Core-generic/LSB-Core-generic/zlib-gzread-1.html)：

1.  如果返回为正，则为读取的字节数，您可以使用它来将 NULL 终止符放在正确的位置。
2.  `gzerror`如果返回代码是`<0`为了找出错误是什么，您可以使用。

# javascript - Node.js 模块代码解释？Path.js 修剪（arr）{}

> ID：12458714
> 
> 赞同：0
> 
> 时间：2012-09-17T11:59:36.693
> 
> 标签：javascript, node.js

我正在尝试更好地学习 JavaScript，在查看 Node.js 模块源代码时，我在 Path.js 模块中遇到了这个嵌套函数。

我基本上已经确定它用于对数组路径进行某种“清理”，但仍然无法“掌握”它真正在做什么......谁能解释一下？

这是模块的链接：[https ://github.com/joyent/node/blob/master/lib/path.js](https://github.com/joyent/node/blob/master/lib/path.js)

```
function trim(arr) {
      var start = 0;
      for (; start < arr.length; start++) {
        if (arr[start] !== '') break;
      }

      var end = arr.length - 1;
      for (; end >= 0; end--) {
        if (arr[end] !== '') break;
      }

      if (start > end) return [];
      return arr.slice(start, end - start + 1);
    } 
```

这嵌入在 posix 版本的“export.relative”函数中。

如果有人能帮助我理解这一点，它可能会让我的心情放松一点......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:10:04.587

该函数的作用是从给定数组的开头和结尾删除空字符串值。如果你打电话`trim(['', '', 1, 2, ''])`，你会得到`[1, 2]`。

它首先从头开始检查空字符串值（从索引 0 开始）。然后它执行相同的检查，但从末尾开始（从`arr.length-1`数组中的最后一个索引开始）并向后移动。

当遇到非空字符串值时，检查停止。

如果`start > end`没有非空字符串值，则返回空数组是安全的。

如果应该保留一些数组元素（如我的示例中的 1 和 2），则数组只是通过其`slice`方法进行修剪。该`slice`方法对应于`String::substr`例如该方法。

我希望你现在明白了。

# algorithm - 距离矢量算法 - 具有 4 个点的最大路径

> ID：12458716
> 
> 赞同：0
> 
> 时间：2012-09-17T11:59:40.803
> 
> 标签：algorithm, graph, bellman-ford

在编写 bellman-ford 算法时，我遇到了一个问题，这个问题更多的是理论而不是技术，但这里是：

我有 4 个点 A、B、C、D，从 A 到 B 的成本等于 3 等。这是图表：

```
B--3--C
|     |
3     9
|     |
A--1--D 
```

假设我想知道从 A 到 C 通过 D 的成本是多少，会是：`10`？或者它会从 A 到 D（成本为 1）然后从 D 回到 A（总成本为 1+1=2）然后从 A 到 B（1+1+3=5）和从 B 到 C（ 1+1+3+3=8) 所以`8`不会`10`？

我到处搜索，但找不到任何合理的答案。

**编辑：**
假设对于 A->D 和 D->C 路径计数将为 2，对于 A->D 然后 D->A 然后 A->B 然后 B->C 总路径计数等于 4 所以它会选择路径数最短的方式（路径数 = 2）还是较长的方式（路径数 = 4）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:06:24.443

对于*via*问题，我不会使用单向算法；我会叫它两次。首先，对于`A -> D`，然后对于`D -> C`，因为这实际上是问题所在；那么，最终路径是这两者的总和。

*注意：我不熟悉 Bellman-Ford 算法；这个答案只是关于寻路的一般性评论。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:10:03.073

如果没有负权循环，那么每条最短路径最多访问每个顶点一次。

# javascript - jquery ajax 字符限制

> ID：12458717
> 
> 赞同：1
> 
> 时间：2012-09-17T12:00:00.117
> 
> 标签：javascript, url, jquery

执行 from 时对 URL-Length 或 Parameter-Length 是否有限制`$.ajax`？

下面是我的代码，其中`var extract`可能是 5000 个字符的长度，其中两个可能是 128 个字符的长度。

```
 $.ajax({
        url:  "addObligationDraft?account.id="+aId+"&extract="+extract+"&groupForId="+groupForId+"&groupFor="+groupFor+"&TAndD="+TAndD+"&fg="+fg+
        "&frequency="+frequency+"&subType="+subType+"&startDate="+startDate+"&completionDate="+completionDate+"&ownerUserId="+ownerUserId+
        "&ownerManagerUserIdValue="+ownerManagerUserIdValue+"&financial="+financial+"&trigger="+trigger+"&actionType="+actionType+"&financialPenalty="+financialPenalty+
        "&approvalRequiredMessage="+approvalRequiredMessage+"&transitionMilestoneMessage="+transitionMilestoneMessage+"&responsibilityListId="+responsibilityListId+
        "&contractName="+contractName+"&phaseListId="+phaseListId+"&referenceSectionMessage="+referenceSectionMessage+"&obId="+obId+
        "&otCrossReference="+otCrossReference+"&otTransition="+otTransition+"&otCustOO="+otCustOO+"&otComments="+otComments,
        dataType: "stream",
        beforeSend: function(){
            showBusy();
        },
        complete: function(xmlHttp){
            hideBusy();
        },      
        error: function(XMLHttpRequest, textStatus, errorThrown) {
            hideBusy();
            showDialogMessage('Obligation not Saved. Please re-try.');
        },
        cache: false,
        success: function(data) {   
            if(data.indexOf('Error') == -1) {
                $("#obDraft").empty();                  
                $("#obDraft").append(data);                                     
                document.getElementById("noObInDraft").style.display = "none";
                resetPage();
                var chk = data.split("javascript:showDraftOb");
                chksize = data;
                if(chk.length == 2)
                    document.getElementById("addObligationAjax").style.display = "block";
                showDialogMessage('Obligation Added Successfully');
            }
            else
            showDialogMessage('Obligation not Saved. Please re-try.');
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:03:50.903

是否通过 Ajax 查询无关紧要，对 URL 长度有一般限制。请参阅[此问题](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url)以获取解释。

问问自己，您是否真的需要这么长的 URL，或者您是否可以以其他方式存储一些信息（例如 cookie、在数据库中......）。

# iphone - 在应用程序卸载时保留 SQLite 数据

> ID：12458720
> 
> 赞同：1
> 
> 时间：2012-09-17T12:00:12.843
> 
> 标签：iphone, ios, sqlite, ios5

我们将移动设备的唯一标识符存储在 SQLite 数据库中，用于许可目的。问题是如果用户删除应用程序然后重新安装它，SQLite 数据库将与我们存储的变量一起消失。

如何防止在应用程序安装时删除数据库，以便在重新安装应用程序时我们可以重用数据库

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:03:58.260

您可以通过将信息发送到服务器端来解决此问题，您不能将任何数据存储在应用程序沙箱之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:06:05.310

你可以：

*   将密钥存储在您自己的服务器上
*   将密钥存储在设备的钥匙串中。请注意，从用户的设备中删除应用程序后，您将无法从用户的钥匙串中删除密钥。有关钥匙串的更多信息：[https ://developer.apple.com/library/ios/#documentation/Security/Reference/keychainservices/Reference/reference.html](https://developer.apple.com/library/ios/#documentation/Security/Reference/keychainservices/Reference/reference.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:06:14.500

在程序中，您可以创建 SQLite 数据库的副本。只需将数据库拖放到程序资源中即可。

# java - 我可以在我的 Java webapp 中同时使用 FORM 和 BASIC 身份验证吗？

> ID：12458722
> 
> 赞同：0
> 
> 时间：2012-09-17T12:00:39.070
> 
> 标签：java, authentication

有没有办法在我的 web 应用程序中同时使用 FORM 和 BASIC 身份验证？我有一个 RESTful 接口，我想允许脚本通过简单的 BASIC auth 方法使用它，但我也想为 Web 客户端提供基于 FORM 的身份验证。我希望 webapp 通过`302 Moved Temporarily`重定向到登录页面来响应未经授权的请求，但是如果它发现客户端正在发送带有用户名和密码的 BASIC 身份验证的 HTTP 标头，那么就像在 BASIC 身份验证中一样接受它们。

我看到这对于单个 web.xml 配置是不可能的，但想知道是否有其他人对此有一些解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T15:03:31.290

可以用过滤器吗？

检查您的标头的请求。如果存在，则执行登录过程并将会话数据等添加到请求中。如果失败，则忽略它或重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:18:59.337

如果我配置了容器身份验证，那么我的代码在没有身份验证的情况下永远不会被调用。所以答案是否定的。Jenkins CI 和类似软件对一组受限的 Web 资源使用基于 FORM 的身份验证，并在更灵活的地方使用 Spring Security。

# android - 如何让 dispatchTouchEvent 更灵活？（我不能移动地图）

> ID：12458724
> 
> 赞同：0
> 
> 时间：2012-09-17T12:00:40.340
> 
> 标签：android, google-maps, android-maps

我正在使用此代码来协调我在 android 中使用谷歌地图视图点击的点。

```
@Override
public boolean dispatchTouchEvent(MotionEvent event) 
{   
    if (event.getAction() == 1) {                
        GeoPoint p = mapView.getProjection().fromPixels(
            (int) event.getX(),
            (int) event.getY());
            // send the intent from here to your next activity with the GeoPoint coords.
            Toast.makeText(getBaseContext(), 
                p.getLatitudeE6() / 1E6 + "," + 
                p.getLongitudeE6() /1E6 , 
                Toast.LENGTH_SHORT).show();
    }                      
    return false;
} 
```

它工作正常，每次我触摸地图时它都会向我显示确切的坐标 - 但现在我无法滚动浏览我的地图，因为当我尝试“捕捉”地图并滚动到一侧时，我得到的一切都是坐标。

如何解决？

我有想法，也许当我点击两次它会得到我的坐标，但我希望能够“捕捉”地图并将其滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:11:02.630

也许最简单的方法是在您的地图视图中添加一个在两种不同行为之间切换的按钮。按下按钮时会显示坐标，释放时地图会移动。

您只需要在“dispatchTouchEvent”方法中测试按钮状态。

祝你好运。

# windows-runtime - 在 WINRT 中将多个 PushPin 添加到 Bing 地图控件（XAML 和 C#）

> ID：12458727
> 
> 赞同：0
> 
> 时间：2012-09-17T12:00:48.057
> 
> 标签：windows-runtime, bing-maps, winrt-xaml

我如何将多个图钉添加到 bing 地图控件。在我的应用程序中，我尝试添加一些用户控件（图钉）作为该地图控件的子项。但问题是，当我执行放大和缩小操作时，图钉在地图上移动并错过了位置。这是我用于向地图添加多个图钉的代码：

```
 foreach (var item in PushPinCollection)
            {
                    var pin = new CustomMapPin(Convert.ToInt32(item.BackgroundColorID)) { Name = item.ID.ToString() };
                    pin.DoubleTapped += PushpinTapped1;
                     pin.Tapped += PinTapped;
                     var loc = new Location(Convert.ToDouble(item.Latitude, System.Globalization.CultureInfo.InvariantCulture), Convert.ToDouble(item.Longitude, System.Globalization.CultureInfo.InvariantCulture));
                     pin.SetValue(MapLayer.PositionProperty, loc);
                     NoteMap.Children.Add(pin);
                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T01:49:51.890

尝试这个：

```
 Bing.Maps.Location loc = new Bing.Maps.Location
            {
                Latitude = latitude,
                Longitude = longitude
            };

            myMap.SetView(loc, 13);

            Pushpin pushpin = new Pushpin();
            pushpin.Tapped +=pushpin_Tapped;

            pushpin.Text = address;
            MapLayer.SetPosition(pushpin, loc);
            myMap.Children.Add(pushpin); 
```

# bash - awk 在 linux 终端中输出类似表格或类似 excel 的列？

> ID：12458729
> 
> 赞同：10
> 
> 时间：2012-09-17T12:00:52.990
> 
> 标签：bash, awk, terminal, multiple-columns

我做了一个很长的管道，以`...| awk '{print $5"\t\t" $3"\t"$4}'`Linux 终端结束。列填充有选项卡。第一列条目具有不同数量的字符，因此第二列结果不是完全垂直的。如何让餐桌看起来完美？

![在此处输入图像描述](../Images/0dde642f1b621e9dd018dfc37b4d6df1.png)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-17T12:07:45.950

尝试将结果通过管道传输到 -t 列：

```
...| awk '{print $5"\t\t" $3"\t"$4}'|column -t 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-02T14:02:49.207

如果您的字段是制表符分隔的，则以下一行脚本可以打印带有单元格边框的表格

```
sed -e 's/\t/_|/g' table.txt |  column -t -s '_' | awk '1;!(NR%1){print "-----------------------------------------------------------------------";}'

Description            |value                 |Comment
-----------------------------------------------------------------------
Internal               |322                   |
-----------------------------------------------------------------------
External               |42515                 |
----------------------------------------------------------------------- 
```

# css - 如何在动态生成的表格的顶部和底部单元格中添加填充？

> ID：12458734
> 
> 赞同：0
> 
> 时间：2012-09-17T12:01:06.533
> 
> 标签：css, html-table, cellpadding

我有一个动态生成的表，即它的单元格的内容是从数据库中提取的，每一行的创建取决于数据库中有多少行。

每个单元格都有一个圆形边框和填充，比如 2px。

我想要的效果是所有单元格看起来均匀分布并垂直填充。

问题是，我无法通过 Google 搜索或查看 Stack Exchange 来解决，顶部和底部的单元格似乎分别具有较少的“顶部”和“底部”填充。比其他单元格，因为它们没有添加“相邻”单元格的填充。

有没有办法只在顶部单元格中添加额外的“padding-top”，而在底部单元格中添加“padding-bottom”，或者我是不是走错了路？

ps：另一个考虑是表格是用边框包围的，所以解决方案需要以可以保持现有边框（或应用它们）的方式添加空间。

pps：表的代码结构为：

```
<table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
    <thead>
        <tr>
            <th width="268px">column one</th>
            <th width="156px">column two</th>
            <th width="188px">column three</th>
            <th width="70px">column four</th>
            <th width="62px">column five</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td colspan="5" class="Tables_empty">loading data</td>
        </tr>
    </tbody>
    <!--<tfoot>
        <tr>
            <th>column one</th>
            <th>column two</th>
            <th>column three</th>
            <th>column four</th>
            <th>column five</th>
        </tr>
    </tfoot>-->
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:28:24.950

究竟是哪些细胞？

对于第一行和最后一行中的所有单元格：

```
table#example tbody tr:first-child td, table#example tbody tr:last-child td { padding: 10px 5px } /* moar padding */ 
```

对于每一行的第一个和最后一个单元格：

```
table#example tbody tr td:first-child, table#example tbody tr td:last-child { padding: 10px 5px } /* moar padding */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:03:26.730

嗨，现在在你的 css 中已经习惯了

```
td{
padding:xxpx xxpx xxpx xxpx; // acording to your design 
} 
```

# c# - MonoTouch iOS 应用程序在设备目录中找不到文件 - 在模拟器上工作

> ID：12458735
> 
> 赞同：1
> 
> 时间：2012-09-17T12:01:06.880
> 
> 标签：c#, ios, xamarin.ios

如果我在设备上运行此代码，它会返回“得到它”：

```
if (Directory.Exists (NSBundle.MainBundle.BundlePath + "/ARCSDev")) {
                Console.WriteLine ("got it");
            } else {
                Console.WriteLine ("can't find it");
            } 
```

这意味着该目录位于主包中。

我需要在此方法调用中使用该文件：

```
private void generateChart (int chartNumber, string palette)
        {
            string filePath = NSBundle.MainBundle.BundlePath + "/ARCSDev";

            Console.WriteLine("Filepath - " + filePath);

            Loader loader = new Loader (filePath);
            loader.LoadChart (Convert.ToString (chartNumber)); 
```

上面的代码在模拟器上工作正常，但在设备上不行。

当设备上发生错误时，我得到以下堆栈跟踪：

```
System.InvalidOperationException: Operation is not valid due to the current state of the object
  at System.Linq.Enumerable.Max[TileIndexRecord] (IEnumerable`1 source, System.Func`2 selector) [0x00000] in <filename unknown>:0
  at MyCompany.Data.Arcs.Loader.ExtractWriteableBitmap (MyCompany.Data.Arcs.Records.RGBPaletteRecord rgbPalette, Double dpi, MyCompany.Data.Arcs.Raschts.ChartIndexFile indexFile, MyCompany.Data.Arcs.Raschts.RasterChartFile chartFile) [0x00000] in /Users/me/Desktop/ARCSViewer/ARCSViewer/Loader.cs:571
  at MyCompany.Data.Arcs.Loader.GetHiResImage (MyCompany.Data.Arcs.Records.RGBPaletteRecord rgbPalette) [0x00000] in /Users/me/Desktop/ARCSViewer/ARCSViewer/Loader.cs:362
  at ARCSViewer.SecondViewController.generateChart (Int32 chartNumber, System.String palette) [0x0004e] in /Users/me/Desktop/ARCSViewer/ARCSViewer/SecondViewController.cs:118
  at ARCSViewer.SecondViewController.ViewDidAppear (Boolean animated) [0x00007] in /Users/me/Desktop/ARCSViewer/ARCSViewer/SecondViewController.cs:84
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38
  at ARCSViewer.Application.Main (System.String[] args) [0x00000] in /Users/me/Desktop/ARCSViewer/ARCSViewer/Main.cs:17 
```

该目录包含 unix 可执行文件和 radiance 文件。

谁能解释发生了什么？该文件绝对位于正确的位置（捆绑包），因为我已经测试了检查是否存在与我知道也存在的其他文件的代码..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T12:37:39.593

设备上的权限与模拟器非常不同（受到更多限制）。由于各种原因，您无法访问很多地方（例如，更改某些文件会破坏应用程序的数字签名，从而使您的应用程序无法再运行）。

此外，如果您的应用程序不遵循 Apple 关于在何处（以及何时）存储数据的指南，您的应用程序将被拒绝（如果您以应用商店为目标）。

Xamarin 有一篇关于如何使用 iOS 文件系统的好[文章。](http://docs.xamarin.com/ios/tutorials/Working_with_the_File_System)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T12:31:26.180

这可能是区分大小写的问题，模拟器不区分大小写，而设备区分大小写。检查您的文件以查看您是否以正确的大小写访问所有文件（即不仅是目录）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T09:47:30.510

我解决了这个问题，我的应用程序的几个部分使用如下代码：

```
fs = new FileStream(fileName, FileMode.Open); 
```

我需要将每次出现的 FileStream() 更改为以下内容：

```
fs = new FileStream(fileName, FileMode.Open, FileAccess.Read); 
```

由于我的文件在包中并且不需要使用写入操作，这将文件流限制为仅读取操作并允许正确读取文件。

# jquery - 使用 JQuery 突出显示元素时出现 CSS 框阴影问题

> ID：12458747
> 
> 赞同：1
> 
> 时间：2012-09-17T12:01:55.497
> 
> 标签：jquery, css, jquery-selectors

我有一个简单的 JQuery 元素选择器——正如您所料，移入和移出元素会突出显示。它有效，但我遇到了 2 个问题，我希望得到一些帮助（我相信 CSS 高手会在几秒钟内解决这个问题！！）：

1）相邻元素有时会掩盖其邻居的突出显示（请参见此[小提琴](http://jsfiddle.net/FusrG/2/)`DIV`中的 1 - 我希望红色阴影出现在1 的所有四个边上，而不仅仅是那些不接触相邻元素的边上- 我也尝试添加一个但它没有解决它）`DIV``DIV``z-index`

2）当一个元素包含一个锚链接，该链接的文本包含多行文字时，每行文本都会被突出显示 - 理想情况下，我希望整个链接都被突出显示（例如，参见`DIV`同一个[小提琴](http://jsfiddle.net/FusrG/2/)中的 4 - 将鼠标悬停在包裹超过 3 行的链接 - 不是有 3 个红色阴影框，我可以在整个链接周围放置 1 个阴影框吗？

**注意：** 我在各种第 3 方网页上使用此代码，因此我无法以可扩展的方式更改/编辑 HTML

**编辑：**

感谢那些在下面回答的人-您的解决方案在我的小提琴演示中有效-我现在已经将这些应用到我的实际代码中，但是当我将鼠标悬停在它们上方时，我无法让图像“来到前面”-仍然有很多图像只有他们的悬停阴影出现在少于 4 面 - 我的代码是这样的（但需要 php）：

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <style>
        img:hover{
            -webkit-box-shadow: 0 0 17px 10px green;
            -moz-box-shadow: 0 0 17px 10px green;
            box-shadow: 0 0 17px 10px green;
            z-index:5555555555;
            position:relative;
        }
</style>
</head>

<body>
<?php 
    echo'<div>';
             $url = 'http://www.guardian.co.uk';
             $data = file_get_contents($url);
             echo $data;
    echo'</div>';
    ?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:13:44.717

问题 1 - 您只看到三个边的边框，因为底边位于第二个框下方。像这样将它弹出到前面 - 这实际上在悬停时将您的任何兄弟 div 带到前面

```
div:hover {z-index:5; position:relative;} 
```

问题 2 - 将链接设置为

```
display:block; 
```

看看我对你的小提琴的更新

[http://jsfiddle.net/FusrG/9/](http://jsfiddle.net/FusrG/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:10:01.357

好的，首先，为什么不在`:hover`CSS 中使用伪选择器呢？

```
div:hover, a:hover
{
    -webkit-box-shadow: 0 0 17px 10px #f51f4c;
  -moz-box-shadow: 0 0 17px 10px #f51f4c;
  box-shadow: 0 0 17px 10px #f51f4c !important;
}​ 
```

而不是使用 JS 来做 CSS 内置的东西？

您必须为`.top`div 提供一个位置和 z-index 以使其按您的意愿显示，并添加`display: inline-block;`到锚点以使其按您的预期环绕链接。

```
.sky a
{
    display: inline-block;
} 
```

[http://jsfiddle.net/Kyle_Sevenoaks/FusrG/7/](http://jsfiddle.net/Kyle_Sevenoaks/FusrG/7/)

使用 CSS 悬停来修复阴影：http: [//jsfiddle.net/Kyle_Sevenoaks/FusrG/11/](http://jsfiddle.net/Kyle_Sevenoaks/FusrG/11/)

# java - Java对象数组好奇心

> ID：12458753
> 
> 赞同：4
> 
> 时间：2012-09-17T12:02:18.447
> 
> 标签：java

为什么，如果你有，比方说，这些功能：

```
void func1(Object o){
      //some code
}
void func1(Object[] o){
      //some code
} 
```

例如，您可以调用：

```
func1("ABC"); 
```

但**不是**：

```
func1({"ABC", "DEF"}); // instead having to write:
func1(new Object[]{"ABC", "DEF"}); 
```

*问题：有什么特殊原因需要在数组上调用构造函数吗？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T12:07:27.697

“[数组初始化器”](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.6)仅可用于声明/赋值：

```
Object[] o = { 1, 2 }; 
```

或者对于[“数组创建表达式”](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.10)：

```
new Object[] { 1, 2 }; 
```

不适用于方法调用：

```
// Doesn't work:
func1({1, 2}); 
```

[就是这样……您可以在JLS 的第 10.6 章](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.6)中了解它。[数组初始化器](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.6)。提取物：

> 数组初始值设定项可以在声明中指定（[§8.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3)、[§9.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.3)、[§14.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.4)），或作为数组创建表达式的一部分（[§15.10](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.10)）来创建数组并提供一些初始值。

除了现在没有在 JLS 中定义之外，似乎没有理由说明未来的 Java 版本不允许在其他上下文中使用数组初始化器/数组文字。数组类型可以从使用数组字面量的上下文中推断出来，或者从包含的变量初始化器中推断出来

当然，您可以声明`func1`具有可变参数参数。但是你应该小心重载它，因为这可能会在调用站点引起一些混乱

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T12:08:43.900

有人建议 Java SE 5.0 将使用数组文字表示法。不幸的是，我们得到了可变参数，随之而来的是所有的乐趣。

所以要回答为什么的问题，语言就是这样。您可能会在更高版本的 Java 中看到列表文字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T12:15:15.310

您正在尝试执行 Java 尚不支持的内联数组初始化。

我想如果你愿意的话，你可以使用可变参数来实现所需的结果，但是如果你需要将一个数组传递给一个方法，你必须按照 Java 喜欢初始化数组的方式来初始化它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T12:06:09.620

当你调用一个带值`func1("ABC")`类型的对象时，java会自动创建。要创建类型以外的任何其他对象，您需要使用运算符。`String``"ABC"`

`String``new`

# ruby-on-rails - 如何从 iPhone 应用程序更改设计中的密码

> ID：12458754
> 
> 赞同：0
> 
> 时间：2012-09-17T12:02:25.460
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我正在开发一个将由 iphone 应用程序使用的网络应用程序。我使用设计作为身份验证，我可以创建一个新用户，以用户身份登录，登录完成后它会发出

```
{"user":{"authentication_token":"xxxxxxxxxxxxxxxxxx","email":"sample@example.com"}} 
```

但是如何使用 json 更改密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:07:16.700

您很可能需要为此构建一个 API，利用 Devises JSON (Warden) 来响应 JSON 等

参考以帮助您指出正确的方向[使用设计创建会话](http://jessehowarth.com/devise)

搜索 SO 也会产生 [带有设计的 Ajax 登录](https://stackoverflow.com/questions/4857855/extending-devise-sessionscontroller-to-authenticate-using-json)

# iphone - 格式错误的多部分身体 youtube 视频上传

> ID：12458755
> 
> 赞同：3
> 
> 时间：2012-09-17T12:02:33.733
> 
> 标签：iphone, objective-c, ios, youtube-api, gdata

我正在尝试从 iPhone 应用程序将视频上​​传到 youtube。但我得到“**畸形的多部分身体**”。

这是我的请求格式：-

标题：

```
Authorization: Bearer ya29.AHES6ZRfVWRgOe78g4eHz8v85yFztU-ea3jEy6d_4mbEkAMVD33_1w
GData-Version: 2
Host: uploads.gdata.youtube.com
X-GData-Key: key=AI39si5TXQBExBk3eT3cn4eCOSKr1GEOJd5_HJ-RjUGPErby1Qn4aOL-HlecdrxZ3Ur7QocO8Di9wHxUdV2fSYTM3mtFCyzl_A
Slug: summer_vacation.mp4
Content-Type: multipart/related; boundary="f93dcbA3" 
```

请求正文：

```
--f93dcbA3
Content-Type: application/atom+xml; charset=UTF-8

<?xml version="1.0"?>
<entry xmlns="http://www.w3.org/2005/Atom"
  xmlns:media="http://search.yahoo.com/mrss/"
  xmlns:yt="http://gdata.youtube.com/schemas/2007">
  <media:group>
    <yt:incomplete/>
    <media:category
      scheme="http://gdata.youtube.com/schemas/2007/categories.cat">Travel
    </media:category>
  </media:group>
</entry>
--f93dcbA3

Content-Type: video/mp4
Content-Transfer-Encoding: binary 
```

```
--f93dcbA3-- 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T13:22:28.207

我认为这是因为您的第二个边界之后（就在`Content-Type: video/mp4`标题之前）的额外行。此外，请务必在`Content-Transfer-Encoding: binary`标题和二进制数据之间添加一行。

采取[Google 示例](https://developers.google.com/youtube/2.0/developers_guide_protocol_direct_uploading?hl=fr)为模型：

```
POST /feeds/api/users/default/uploads HTTP/1.1
Host: uploads.gdata.youtube.com
Authorization: Bearer ACCESS_TOKEN
GData-Version: 2
X-GData-Key: key=adf15ee97731bca89da876c...a8dc
Slug: video-test.mp4
Content-Type: multipart/related; boundary="f93dcbA3"
Content-Length: 1941255
Connection: close

--f93dcbA3
Content-Type: application/atom+xml; charset=UTF-8

<?xml version="1.0"?>
<entry xmlns="http://www.w3.org/2005/Atom"
  xmlns:media="http://search.yahoo.com/mrss/"
  xmlns:yt="http://gdata.youtube.com/schemas/2007">
  <media:group>
    <media:title type="plain">Bad Wedding Toast</media:title>
    <media:description type="plain">
      I gave a bad toast at my friend's wedding.
    </media:description>
    <media:category
      scheme="http://gdata.youtube.com/schemas/2007/categories.cat">People
    </media:category>
    <media:keywords>toast, wedding</media:keywords>
  </media:group>
</entry>
--f93dcbA3
Content-Type: video/mp4
Content-Transfer-Encoding: binary

<Binary File Data>
--f93dcbA3-- 
```

# c# - 编码实践 - 使用抽象或私有构造函数

> ID：12458757
> 
> 赞同：2
> 
> 时间：2012-09-17T12:02:40.790
> 
> 标签：c#, access-modifiers

我有一个关于编码练习的问题。我想创建一个无法初始化的类。我相信我有 3 个选择：

*   抽象修饰符
*   静态修饰符
*   私有构造函数

我不想仅仅因为必须将我所有的属性和方法命名为“静态”而创建一个静态类——它看起来很乱（而且我不能使用“this”关键字）。

根据 MSDN：

> 在类声明中使用 abstract 修饰符来指示一个类仅作为其他类的基类。

**编辑**没有任何东西会从这个类继承。

但是，这将是一个解决方案（但在这种情况下使用它对我来说似乎是错误的）。

或者，我可以创建一个私有构造函数，这样类就不能被初始化。

如果有帮助，原因是：该类负责启动工作流程。它不需要初始化，因为没有返回任何内容 - 它只需要“启动”。

演示代码

```
class Program
{
    static void Main(string[] args)
    {
        WorkFlow wf = new WorkFlow(); // this will error which is fine!
        ComplexObject co = new ComplexObject();
        WorkFlow.Begin(co);
        Console.ReadKey();
    }
}

public class WorkFlow 
{
    private WorkFlow()
    {
        //private to prevent initialization but this feels wrong! 
    }

    public static void Begin(ComplexObject co)
    {
        //code to begin the workflow
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T12:04:40.647

> 我想创建一个无法初始化的类。

这留下了可能的用法：仅静态或基类。

如果您的类将派生自，请使用`abstract`. 在这种情况下，私有/受保护的构造函数将是一种黑客攻击。

您的示例代码看起来更像一个`static`类。以 Singleton 作为替代方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T12:04:57.983

[良好实践：私有构造函数（例如，在使用工厂](http://en.wikipedia.org/wiki/Factory_method_pattern)模式时，至少是[GOF](http://en.wikipedia.org/wiki/Design_Patterns)书中推荐的）。如果它是一个基类，我会建议你使用 abstract （这就是它的名字所暗示的）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-17T12:08:36.943

只做你已经做过的事情，但使用你的 Begin 方法作为工厂来创建你的工作流怎么样。

```
var workflow = Workflow.Begin(complexObject); 

public class WorkFlow  
{ 
    private WorkFlow() 
    { 
        //private to prevent initialization but this feels wrong!  
    } 

    public static WorkFlow Begin(ComplexObject co) 
    { 
        return new Workflow(co);
    } 
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-17T12:04:22.130

如果该类被严格用作基类，那么它必须`abstract`适合我。

根据您的更新，我会选择静态类和方法，例如

```
WorkFlow.Begin(co); 
```

但是，由于您不想这样做，我认为它只会给您留下一个选择......私有构造函数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-17T12:05:29.523

好像你需要一个单身人士。

更多参考：

[http://msdn.microsoft.com/en-us/library/ff650849.aspx](http://msdn.microsoft.com/en-us/library/ff650849.aspx)

如果您不喜欢这个想法，那么抽象类将最适合，因为正如您所说，您不想实例化它，并且不要忘记抽象类就是这样做的，那么为什么要尝试使用私有构造函数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-17T12:08:55.713

> 我不想仅仅因为必须将我所有的属性和方法命名为“静态”而创建一个静态类——它看起来很乱（而且我不能使用“this”关键字）。

好吧，无论是创建 ctor`private`还是创建类`static`，调用者访问类的方法和属性（如果调用者不是派生类）的唯一方法是通过`public static`成员。

在`private ctor`继承链中为您提供了更大的灵活性，但在“避免静态成员”场景中没有多大帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-17T12:09:07.760

我会更喜欢私有构造函数，即它与单例模式相同

[信息](http://en.wikipedia.org/wiki/Singleton_pattern)

[编码](http://msdn.microsoft.com/en-us/library/ff650316.aspx)

私有构造函数似乎是满足您要求的好方法。抽象也很好，但私有构造函数比抽象更方便。但是如果你想扩展它的信息，那么使用抽象可能是个好主意。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-17T12:14:11.017

如果需要“启动”该类，则需要对其进行初始化（除非您要使用的只是静态方法）。
抽象类用于将部分（或全部）实现留给子类，并且由您的描述 - 不适合您。
“静态课程” - 我猜这里没有特别的收获（在你的情况下）。
私有构造函数 - 用于限制谁可以实例化该类。
不确定这些是否符合你的设计，但我猜你真的想要一个单例 - 查一下，这是最常见和基本的设计模式。
顺便说一句 - 我只将单例作为最后的手段，通常是当类控制某种非共享资源时。

# c - 为什么这段代码不退出？

> ID：12458774
> 
> 赞同：0
> 
> 时间：2012-09-17T12:03:59.977
> 
> 标签：c

> **可能重复：**
> [C 中的 EndOfFile - EOF](https://stackoverflow.com/questions/1437241/endoffile-in-c-eof)

我正在尝试来自 K&R 的示例。我无法理解为什么除非`ctrl+c`按下此代码才会退出。

```
int main ( )
{
    int c; 
    c = getchar(); 
    while(c!=EOF)
        {
            putchar(c);   
            c=getchar();
        }
} 
```

任何帮助表示赞赏。谢谢！

**编辑**：使用 Windows (Visual Studio 2010)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T12:07:23.913

在 Windows 中，您可以通过按`Ctrl`+从标准输入流生成文件结尾`Z`。根据缓冲行为，您可能还需要按`Return`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T12:06:03.063

EOF 是文件结束。如果您从“键盘”读取，则应与等于按回车键的行尾符号进行比较

```
int main ( )
{
    int c; 
    c = getchar(); 
    while(c!= '\n')
    {
        putchar(c);   
        c=getchar();
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-17T12:14:45.003

```
On Windows machine ctrl+c acts as delimiter of character scanning same as EOF 
on this loop gets broken otherwise it will keep looking for characters 
```

# sql-server - SQL Server 100% CPU 使用率 - 一个数据库的 CPU 使用率高于其他数据库

> ID：12458776
> 
> 赞同：11
> 
> 时间：2012-09-17T12:04:09.510
> 
> 标签：sql-server, sql-server-2005, cpu-usage, sql-server-performance

我们有一个包含大约 40 个不同（每个大约 1-5GB）数据库的 SQL 服务器。服务器是一个 8 核 2.3G CPU 和 32G 内存。27Gig 固定到 SQL Server。CPU 利用率几乎总是接近 100%，内存消耗约为 95%。这里的问题是 CPU 一直接近 100% 并试图了解原因。

我已经运行了一个初始检查，以查看哪个数据库通过使用[这个](https://stackoverflow.com/questions/10319575/sql-server-2008-high-cpu-usage)脚本导致了高 CPU，但我无法详细证实真正消耗 CPU 的内容。顶部查询（来自所有数据库）只需大约 4 秒即可完成。IO 也不是瓶颈。

记忆会是这里的罪魁祸首吗？我检查了内存拆分，并且 OBJECT CACHE 占用了分配给 SQL Server 的大约 80% 的内存 (27G)。我希望这是正常的，只要涉及到很多 SP。运行分析器，我确实看到了很多重新编译，但主要是由于“临时表更改”、“延迟编译”等，并且不清楚这些重新编译是否是由于内存压力导致计划被抛出缓存的结果

欣赏任何想法。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-17T21:30:53.300

您可以在 SSMS 中看到一些报告：

右键单击实例名称/报告/标准/顶级会话

您可以看到 CPU 消耗最高的会话。这可能有助于了解哪些 SQL 进程正在使用资源。如果您环顾四周，还有其他一些与 CPU 相关的报告。我打算指出更多的 DMV，但如果你已经研究过，我会跳过它。

您可以使用[sp_BlitzCache](http://www.brentozar.com/archive/2014/05/introducing-sp_blitzcache/)查找 CPU 消耗最高的查询。您还可以按 IO 和其他内容进行排序。这是使用在重新启动之间累积的 DMV 信息。

[这篇文章](http://www.mssqltips.com/sqlservertip/2454/how-to-find-out-how-much-cpu-a-sql-server-process-is-really-using/)看起来很有希望。

来自 Ozar 先生的一些[stackoverflow优点。](https://stackoverflow.com/questions/28952/cpu-utilization-by-database)

编辑：多一点建议...运行“仅”5 秒的查询可能是个问题。它可能会使用你所有的核心，真正运行 8 个核心乘以 5 秒 - 40 秒的“虚拟”时间。我喜欢使用一些 DMV 来查看该代码执行了多少次，以查看 5 秒加起来的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-31T10:20:44.193

根据[这篇](http://sqlserverstudymaterials.blogspot.in/2016/03/troubleshooting-high-cpu-utilization.html)关于 sqlserverstudymaterial 的文章；

> 请记住，“%Privileged time”不是基于 100%。它基于处理器数量。如果您看到 sqlserver.exe 为 200，并且系统有 8 个 CPU，那么 sqlserver.exe 消耗的 CPU 是 800 中的 200（仅25%）。
> 
> 如果“% Privileged Time”值超过 30% 则一般是驱动程序或杀毒软件有问题造成的。在这种情况下，请确保 BIOS 和过滤驱动器是最新的，然后尝试暂时禁用防病毒软件以查看更改。
> 
> 如果“% User Time”很高，则说明 SQL Server 有一些消耗。有几种已知模式可能会导致 SQL Server 中运行的进程的 CPU 过高，包括

# jquery - 使用 jquery 删除 asp.net 按钮处理程序

> ID：12458777
> 
> 赞同：0
> 
> 时间：2012-09-17T12:04:10.983
> 
> 标签：jquery, asp.net

我正在使用 Jquery 隐藏和显示不安全的按钮（添加、编辑、删除）。我可以在隐藏按钮时删除处理程序并在显示时添加它。可以使用 Jquery 实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:12:28.803

我不知道我是否很好地理解了你的问题。如果这是一个安全问题，实现逻辑服务器端不是更好吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:14:19.223

您可以使用 javascript 防止按钮单击时的回发。但是您不能从客户端代码影响服务器端事件订阅。一路上你需要有服务器端的安全检查。

# java - 如何在chrome浏览器中取消选中复选框

> ID：12458779
> 
> 赞同：0
> 
> 时间：2012-09-17T12:04:15.760
> 
> 标签：java, google-chrome, wicket

在我的检票口应用程序中，我有 3 个复选框：

```
 add(new CheckBox("1").setOutputMarkupId(true));
        add(new CheckBox("2").setOutputMarkupId(true));
        add(new CheckBox("3").setOutputMarkupId(true)); 
```

表单还包含取消选择复选框的行为

```
 add(new AjaxEventBehavior("onclick") {

            private static final long serialVersionUID = 1L;

            @Override
            protected void onEvent(AjaxRequestTarget target) {

                List<Component> components = new ArrayList<Component>();

                if (target.getLastFocusedElementId() != null) {
                    if (target.getLastFocusedElementId().equals("1")) {
                        components.add(get("2"));
                        components.add(get("3"));
                    } else if (target.getLastFocusedElementId().equals("2")) {
                        components.add(get("1"));
                    } else if (target.getLastFocusedElementId().equals("3")) {
                        components.add(get("1"));
                    }
                    for (Component component : components) {
                        component.setDefaultModelObject(null);
                        target.add(component);
                    }
                }
            }
        }); 
```

这在 mozilla 浏览器上运行良好，但在 chrome 中这不起作用。我怎样才能改进在 chrome 上工作呢？

* * *

**更新**

问题出在：

```
target.getLastFocusedElementId() 
```

在 Mozilla 这返回我想要的，但在 chrome 中它总是返回 null 但我不知道

* * *

**更新 2**

谷歌浏览器在焦点元素中有错误：

[http://code.google.com/p/chromium/issues/detail?id=1383&can=1&q=window.focus%20type%3aBug&colspec=ID%20Stars%20Pri%20Area%20Type%20Status%20Summary%20Modified%20Owner](http://code.google.com/p/chromium/issues/detail?id=1383&can=1&q=window.focus%20type%3aBug&colspec=ID%20Stars%20Pri%20Area%20Type%20Status%20Summary%20Modified%20Owner)

所以我需要以其他方式做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:21:01.227

## 客户端解决方案（Javascript）

您可以通过在客户端对该行为进行编码来保存 Ajax 调用并获得响应能力。在最简单的场景中，如果您可以给这些复选框一个固定的“id”属性，您可以使用它`Component.setMarkupId()`来强制`id`检查的值（确保它在 DOM 中是唯一的）：

**爪哇**

```
add(new CheckBox("1").setOutputMarkupId(true).setMarkupId("check1");
add(new CheckBox("2").setOutputMarkupId(true).setMarkupId("check2");
add(new CheckBox("3").setOutputMarkupId(true).setMarkupId("check3"); 
```

**HTML**

```
<input type="checkbox" wicket:id="1" onclick="uncheck(this,1)"/>
<input type="checkbox" wicket:id="2" onclick="uncheck(this,2)"/>
<input type="checkbox" wicket:id="3" onclick="uncheck(this,3)"/> 
```

**Javascript**

```
function uncheck(comp, idx){
   if (comp.checked) { 
       if (idx == 1){
           document.getElementById("check2").checked = false;
           document.getElementById("check3").checked = false;
       }
       else if (idx == 2 || idx == 3){
           document.getElementById("check1").checked = false;             
       } 
   }
}     ​ 
```

* * *

## 仅限 Java 的解决方案 (Ajax)

如果您真的想在服务器端执行此操作，那么也可以在服务器端传播值（而不是依赖于上次关注的组件），例如使用`AjaxFormComponentUpdatingBehavior`.

```
 final CheckBox c1 = new CheckBox("on");
        final CheckBox c2 = new CheckBox("off");
        c1.setOutputMarkupId(true);
        c2.setOutputMarkupId(true);

        c1.add(new AjaxFormComponentUpdatingBehavior("onclick") {

            private static final long serialVersionUID = 1L;

            protected void onUpdate(final AjaxRequestTarget target) {
                if (Boolean.TRUE.equals(c1.getModelObject())) {
                    c2.setModelObject(Boolean.FALSE);
                    target.add(c2);
                }
            }
        });

        c2.add(new AjaxFormComponentUpdatingBehavior("onclick") {

            private static final long serialVersionUID = 1L;

            protected void onUpdate(final AjaxRequestTarget target) {
                if (Boolean.TRUE.equals(c2.getModelObject())) {
                    c1.setModelObject(Boolean.FALSE);
                    target.add(c1);
                }
            }
        });

        add(c1);
        add(c2); 
```

如果此约束对数据模型的完整性很重要，您还应该在 a 中实现它，`FormValidator`以便无效输入永远不会到达`Form`s `Model`。没有启用 JS 或只是摆弄 DOM 的用户可以绕过它（如果使用 Ajax 行为，同样适用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:35:53.907

好的，当我将此行为添加到复选框时，我会重点修复 chrome 错误：

```
public class DefaultFocusBehavior extends AjaxEventBehavior {

public DefaultFocusBehavior(String event) {
    super(event);
}

private static final long serialVersionUID = 1;

private Component component;

@Override
protected void onEvent(AjaxRequestTarget target) {
    target.appendJavaScript(("document.getElementById('" + component.getMarkupId() + "').blur();"
            + "document.getElementById('" + component.getMarkupId() + "').focus();"));

}

protected void onBind() {
    this.component = getComponent();
    component.setOutputMarkupId(true);
} 
```

}

所以现在我的代码也在 chrome 上工作

# php - PHP & Mysql : PHP 过滤来自数据库的列表查询

> ID：12458785
> 
> 赞同：0
> 
> 时间：2012-09-17T12:04:24.690
> 
> 标签：php, mysql

我有一个 jQuery 列表，它在 php 页面上返回一个 user_name 列表，例如

**罗希特，巴鲁，拉姆**

现在我想从数据库中过滤掉不属于上述列表的用户名

到目前为止，我正在尝试 mysql 的基本查询，例如

```
 select * from table_name where user_name NOTIN('rohit','Bhalu','Ram'); 
```

但上述查询的问题是，这不是包含 1000 个用户名的更大列表的特定解决方案，所以我想在 php 中使用一些查询过滤器

请建议我在这个阶段应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:08:00.273

首先使用字段 user_name 的索引。

第二次使用此查询（在 $array - 用户名中）

```
$array = array('Rohit', 'Bhalu');
$comma_separated = implode("','", $array);
$comma_separated = "'".$comma_separated."'";
$query = "select * from table_name where user_name NOT IN($comma_separated)"; 
```

# apache-flex - Flex：在 zip 文件中创建新文件夹

> ID：12458786
> 
> 赞同：1
> 
> 时间：2012-09-17T12:04:34.527
> 
> 标签：apache-flex, flex4

我正在使用 Flex、Flash Builder 4.5 和 Extension Builder 2.0.0，并且我使用“ [nochump ziplib](http://nochump.com/blog/archives/15) ”库来生成 ZIP 文件。我想在创建的 ZIP 文件中创建一个新文件夹，但在“nochump”库中找不到这样的函数。谁能告诉我是否有在 ZIP 文件或库中添加新文件夹的功能可以帮助我做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:39:45.007

**目录不是 ZIP 格式的一等公民。**

存档是从“条目”构建的 - 纯**文件**及其相对位置到“中央目录”（存档的“根”）。这意味着 ZIP 文件由“pictures/1.jpg”、“doc/old/1.txt”等条目组成。“pictures”、“doc”或“doc/”没有单独的条目旧”目录。

**您不能直接创建新目录。**与其先创建一个新目录（例如“newDir”），不如在其中创建一个文件（条目）（例如“newDir/1.txt”），当您打开结果时，“newDir”将显示为目录压缩文件。

**如果您坚持在存档中有一个空目录，您可以尝试使用 hacky 方法**- 添加“newDir/”之类的条目。长度为零。但这可能不适用于您的图书馆。

[ZIP 格式的维基百科文章](http://en.wikipedia.org/wiki/Zip_%28file_format%29)很好地解释了所有理论。

# php - 如何将内部标签放置在不同的位置？

> ID：12458787
> 
> 赞同：1
> 
> 时间：2012-09-17T12:04:39.250
> 
> 标签：php, html, css, menu

我有这个菜单结构：（内部`<ul>`标签可以被一个 custom 包围`<div>`，所有其他结构更改都更加困难，因为代码是从动态模块系统生成的，用 PHP 编写）

```
<div id="menu">
    <div class="body-menu">
        <ul>
            <li class="current"><div class="body-menu">
                <a href="bla">Item1</a>
                <ul>
                    <li class="current"><div class="body-menu">
                        <a href="bla">Sub-Item 1</a>
                    </div></li>
                    <li class=""><div class="body-menu">
                        <a href="bla">Sub-Item 2</a>
                    </div></li>
                </ul>
            </div></li>
            <li class=""><div class="body-menu">
                <a href="bla">Item 2</a>
            </div></li>

        </ul>
    </div>
    <div class="menu-background"></div>
</div> 
```

`<ul>`目标是在左侧将第 1 项之后的内部显示为子菜单，而不是与其他顶级项目一起显示在顶部。

有没有办法在不修改结构的情况下做到这一点？只是用CSS左右？

* * *

# **更新：**

感谢所有的答案！

特别是对于 besluitloos 和 Caelea，这正是我正在寻找的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:20:17.873

`<li>`包含第二个的父级`<ul>`应该是相对定位的，而包含的`<ul>`应该是绝对定位的。

有点像：

```
ul li { position: relative ;}
ul li ul {position: absolute; top: 0; left: 145px;} 
```

我写了`left: 145px`，但你可以给它任何你想要的价值，这取决于你想要你的菜单有多大。

PS：提示：不要在那些 div 上使用相同的“body-menu”类，对于大容器应该不同，不仅如此。而且我真的认为没有必要在这些`< li >`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:24:11.373

```
.body-menu > ul > li {
 position:relative;
 float:left;
 padding-bottom: 1em;
}
.body-menu ul ul {
 position:absolute;
 left:0;
 top:1.3em;
 display:none;
}
.body-menu > ul > li:hover > ul {
 display:block;
} 
```

那是你要找的吗？

编辑：对不起，IE 不能很好地使用 inline-block。因此，您必须将其更改为“内联”。然后您可以省略底部填充，因为这不适用于内联元素。除非你浮动元素。编辑上面的代码以使用浮点数。

编辑2：错字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:25:45.100

可能你想做一些事情，比如隐藏子菜单，让它在鼠标悬停时弹出或显示。以[http://cssmenumaker.com/builder/42231](http://cssmenumaker.com/builder/42231)为例。

# iphone - 应用程序在内存不足后关闭。仪器截图里面

> ID：12458794
> 
> 赞同：0
> 
> 时间：2012-09-17T12:05:02.380
> 
> 标签：iphone, objective-c, ios, core-data, core-data-migration

![在此处输入图像描述](../Images/072a608d638d4a8c9ca8eb41c899eb54.png)

这就是我通过仪器运行我的应用程序时得到的。它正在处理大量核心数据。我可以看到这显然是不对的，但我真的不知道这个屏幕截图告诉我什么。似乎是什么问题？如果您有兴趣，浓缩后的代码是这样的：

```
 NSFetchRequest *oldFetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *oldEntryEntity = [NSEntityDescription entityForName:@"Entry"
                                                      inManagedObjectContext:oldContext];

    [oldFetchRequest setEntity:oldEntryEntity];

    int numberOfEntries = [oldContext countForFetchRequest:oldFetchRequest error:nil];

    int batchSize = 4;
    [oldFetchRequest setFetchLimit:batchSize];
    int offset = 0;

    while (numberOfEntries - offset > 0) {
        @autoreleasepool {
        [oldFetchRequest setFetchOffset:offset];
        NSError *error;
        NSArray *entries = [oldContext executeFetchRequest:oldFetchRequest error:&error];

        for (NSManagedObject *entry in entries) {
        @autoreleasepool {
            Entry *newEntry = [NSEntityDescription insertNewObjectForEntityForName:@"Entry"
                                                            inManagedObjectContext:newContext];

            newEntry.entryID = [entry valueForKey:@"entryID"];

            NSMutableOrderedSet *newMediaSet = [[NSMutableOrderedSet alloc] init];

            NSOrderedSet *mediaSet = [entry valueForKey:@"media"];

            int i = 0;

            for (NSManagedObject *media in mediaSet) {

                Media *newMedia = [NSEntityDescription insertNewObjectForEntityForName:@"Media"
                                                                inManagedObjectContext:newContext];

                newMedia.isInPhotoLibrary = [media valueForKey:@"isInPhotoLibrary"];
                newMedia.positionInEntry = [NSNumber numberWithDouble:i + 1];

                MediaImageData *imageData = [NSEntityDescription insertNewObjectForEntityForName:@"MediaImageData"
                                                                          inManagedObjectContext:newContext];

                imageData.data = [media valueForKey:@"originalImage"];

                newMedia.imageData = imageData;

                newMedia.entry = newEntry;
                [newMediaSet addObject:newMedia];

                i++;
            }

            newEntry.media = newMediaSet;

        }
        }

        [newContext save:&error];

        offset = offset + batchSize;
   }
} 
```

编辑：我按照这里给出的建议，将它包装在@autoreleasepools（我已经在上面编辑过）中，发生这种情况后它仍然崩溃：

![http://cl.ly/image/1U2T2p3w1X2Z](../Images/d8e86bda30a45683b869ce7da5043ca0.png)

它显然比第一次更深入代码，但它仍然崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:25:18.493

不讨论代码的效率：将代码
包装在`@autoreleasepool {}`外部（while）和内部（for）循环中。
否则，您只是分配大量内存并仅在外部事件循环到达循环结束时释放它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T15:42:19.283

首先，关于发布 Core Data 相关问题的一些建议。几乎没有太多的信息。当你省略细节时，人们很难帮助你，因为可能的互动太多了。

只看你发布的代码，它留下了很多问题。

我想查看按总体大小排序的信息，而不是按分配数量排序的信息。这将更容易地告诉您内存在哪里使用。事实上，我看不到那张照片中的记忆在哪里使用（然后再次 - 老眼睛 - 当我放大它时，它变得太模糊了）。

如果您认为它与核心数据有关，为什么不运行核心数据工具？

获得一些诊断帮助。

您的新 MOC 是直接连接到 PSC 还是有父 MOC。如果它有一个父 MOC，那么保存只是被推到父 MOC 中，并且将保留在内存中，直到保存被持久化到数据库中。

您的 mediaSet 中有多少项目？可能有很多这些，这可能会占用内存。

您对 FetchRequest 和 MOC 应用了哪些参数？基于这些选项，MOC 可以保留对象。检查这一点的一种方法是记录每个 MOC 的保留/插入/删除/等集的计数。通过记录这些，您可以查看任何一个 MOC 是否持有您认为不应该持有的东西。

然后你可以知道你是否需要刷新/重置你的 MOC。

您可以作弊，并`[moc reset]`在保存后调用，但最好在这样做之前/之后查看数字，这样您就可以说服自己内存在哪里。

做更多的调试。给自己更多的信息，这样你就可以做出正确的决定……它也会给我们更好的信息来帮助你。

**编辑**

哎呀。我删除了关于可能没有太多内存的评论。看着那张照片上的小字，我的老眼睛对我毫无帮助。

**编辑**

> 谢谢。如何记录每个 MOC 的保留/插入/删除集的计数？- 安德鲁

MOC 有几个属性（`registeredObjects`、`insertedObjects`、`deletedObjects`、`updatedObjects`），它们提供了一组与这些类别匹配的对象。只需`NSLog`计算每个类别中的对象数。您可以看到，对于每个 MOC，随着时间的推移 MOC 正在跟踪多少对象。

此外，启用核心数据工具。他们真的很翔实。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T12:24:49.570

尝试将快速枚举（`for`循环）的内部包装在 中`@autoreleasepool`，这应该会有所帮助。当更改达到危险的内存消耗时，您还可以运行某种计数器以将上下文保存在循环中。

不过，您确实有很多对象，请考虑优化您的数据结构。

# asp.net - JQuery AJAX Call 在除 Chrome 之外的所有浏览器中都报告成功

> ID：12458797
> 
> 赞同：0
> 
> 时间：2012-09-17T12:05:05.173
> 
> 标签：asp.net, google-chrome, jquery

我正在处理一些遗留代码，这些代码用于通过用户名/密码检查对 Web 应用程序的用户进行身份验证。该代码包含在标准 ASPX 页面中（是的，我知道），并且当请求该页面时，它要么返回状态 404 以指示身份验证失败，要么在 ASPX 页面上填充文字（如果一切正常）。

它是一个标准的 JQuery`ajax`调用：

```
 $("#btnSWSignInPin").click(function () {
    $.ajax({
        url: "/Security/Validate.aspx",
        type: "GET",
        data: "Rnd=" + Math.random() + "&Identifier=" + $(".inpIdentifier").val() + "&Pin=" + $("#inpSWPin").val(),
        success: function () {
            $("#divSessionLogin").jqmHide();
            WarnInFuture();
            DoChecks = true;
        },
        error: function () {
            ShowLogin("The password you entered was incorrect. Please try again.");
        }
    });
    $("#inpSWPin").val("");

    return false;
}); 
```

这个调用的 .NET 代码运行良好，我可以成功地单步执行它而在 VS 中没有问题。我在 Safari、Firefox 和 IE9 中进行了广泛的测试，除了后者在 OSX 和 Windows 上进行了广泛测试，并且它按预期执行。然而，在 Chrome（最新版本）中，成功函数从未执行，javascript 似乎认为从浏览器返回状态 200 以外的内容，尽管`Fiddler`在响应标头中显示它肯定是 200。

谁能建议我可以检查什么以尝试理解和纠正这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:39:25.230

放

异步：假

当 async 设置为 true 时，Google Chrome 似乎存在触发成功的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:16:22.350

我认为这可能是一个 url 解析问题，请尝试以这种方式提供参数：

```
data = {
    "key_1": "value_1",
    "key_2": false,
    "key_4": 123
}; 
```

# mongodb - 拉推原子操作？

> ID：12458798
> 
> 赞同：3
> 
> 时间：2012-09-17T12:05:09.883
> 
> 标签：mongodb, atomic

我有一个包含 2 个数组的文档，我想将一个元素从一个数组移动到另一个数组，我在控制台上尝试了这个，它可以工作：

```
db.examplecol.update({_id: ObjectId("5056b4b2b9f53a21385076c5")} , {'$pull':{setA:3}, '$push':   {setB:3}}) 
```

但是我还没有看到在单个命令中进行 2 次更新的示例。我的问题是这是否是原子操作？如果在此操作过程中出现问题，我是否有可能因为它被拉而不被推而“丢失”我的元素？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T13:48:36.803

基于[MongoDB 的 Atomic Operations](http://www.mongodb.org/display/DOCS/Atomic+Operations)文档，并且由于您的操作是在单个文档上，因此该操作应该是原子的。您应该确保您正在使用日志，因此如果在更新的中途断电，那么 MongoDB 将恢复到更新之前的已知良好状态。

# java - Android 应用程序的发布调试版本

> ID：12458818
> 
> 赞同：9
> 
> 时间：2012-09-17T12:06:33.283
> 
> 标签：java, android, build, release

在 C++ 中，我通常会设置 2 个构建 - 分别具有`DEBUG`和`RELEASE`预定义的调试和发布。然后，我将使用这些定义来确定常量值，例如启用/禁用日志记录、服务器 URL 等。

现在，在 Java/Android 中，我在构建发布之前注释掉了一些东西。这不是一个好方法，我可以说。我可能会忘记一些事情。

在构建发布版本（已签名）或调试版本（未签名）时，确保不会忘记任何内容的常见做法是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-17T12:12:19.310

如果您从 Eclipse 运行应用程序，它将始终是一个调试程序。

当您导出应用程序时（Android 工具 -> 导出（未）签名的应用程序包）

如果你想动态知道它是发布还是调试，你可以使用 BuildConfig.DEBUG （它位于 gen 文件夹中，我不知道是否所有 API 级别都支持）

如下所示：

```
if (BuildConfig.DEBUG) {
    Log.d(TAG, "Text");
} 
```

如果您查看生成的字节码，您将看到以下内容（在调试模式下）：

```
public class Sample{

    private static final boolean LOG_ENABLED = true;

    public static void main(String args[]){
        if (BuildConfig.DEBUG){
            System.out.println("Hello World");
        }
    }
} 
```

产生以下字节码：

```
public class Sample extends java.lang.Object{
    public Sample();
      Code:
       0:   aload_0
       1:   invokespecial   #1; //Method java/lang/Object."<init>":()V
       4:   return

    public static void main(java.lang.String[]);
      Code:
       0:   getstatic   #2; //Field java/lang/System.out:Ljava/io/PrintStream;
       3:   ldc #3; //String Hello World
       5:   invokevirtual   #4; //Method Java/io/PrintStream.println(Ljava/lang/String;)V
       8:   return

} 
```

如果 BuildConfig.DEBUG 为假

```
public class Sample extends java.lang.Object{
    public Sample();
      Code:
       0:   aload_0
       1:   invokespecial   #1; //Method java/lang/Object."<init>":()V
       4:   return

    public static void main(java.lang.String[]);
      Code:
       0:   return
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-17T12:17:18.603

Java 没有（默认情况下）任何预处理器，因此`#ifdef`在编译时没有任何东西。但是，如果您不介意将调试代码留在应用程序中，则可以使用以下代码检查应用程序是否在运行时发布或调试：

```
Boolean release = (getApplicationInfo().flags & ApplicationInfo.FLAG_DEBUGGABLE); 
```

检查`debuggable`标志值。并且所说的 flad 自动设置为`false`用于发布版本和`true`调试版本。

如果你想摆脱一些调试代码，你可以尝试使用 ProGuard 去除某些类或方法。默认情况下，ProGuard 仅参与发布构建的构建过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:14:15.127

我通常创建一个单独的日志类，在其中设置一个静态 DEBUG 变量。现在，在获得生产版本之前，我需要做的就是将该 DEBUG 变量设置为 false。

```
public class Log {
     public final static String LOGTAG = "APP NAME";

      public static final boolean DEBUG = true;

      public static void v(String msg) {
        android.util.Log.v(LOGTAG, msg);
      }

      public static void e(String msg) {
        android.util.Log.e(LOGTAG, msg);
      }

      public static void d(String msg) {
          android.util.Log.d(LOGTAG, msg);
      }
} 
```

对于日志记录 -

```
if(Log.DEBUG) Log.v("In some function x. Doing y."); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-05T10:47:51.033

每次我将项目作为 android 应用程序运行时，我都面临同样的问题，它曾经在调试器模式下打开，但后来问题解决了。

- 如果您在 Eclipse 中工作，则必须使用 Java EE 透视图 - 而只是选择 Java 透视图。

- 清理你的应用程序。- 从设备上卸载应用程序。- 重新启动您的设备（就像这样，以便不存储缓存） - 运行您的应用程序。

这次不会显示调试器模式。复制 bin 文件夹中生成的 apk 并在其他设备上试用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-04T11:25:25.413

我找到了一种体面地模拟预处理指令的方法：

在我的 Gradle 中`buildTypes`，我定义：

```
release {
    buildConfigField "boolean", "isDebug", "false"
    ...
}

debug {
    buildConfigField "boolean", "isDebug", "true"
    ...
} 
```

然后，在我的代码中，我执行以下操作：

```
if (BuildConfig.isDebug) {
    ... do debug stuff ...
} 
```

如果需要，当然：

```
else {
    ... do release stuff ...
} 
```

这两个块都存在于`debug`APK 中，但是在构建`release`版本时，**Proguard 足够聪明地确定`debug`可以删除该块**，因为它依赖于 a `if (false)`（它也从生成的代码中删除）。

**如果您从块中调用一些特定于调试的类`debug`并且仅从那里调用，它们将从生成的 APK 中删除，因为它们被认为是未使用**的，这也是一个有趣的点：您的代码不能以它会使用的方式进行调整代码。

我可以通过检查我的`dump`,`mapping`和`usage`Proguard 输出文件来确定所有这些。

# java - 更改区域设置并重新启动后如何强制更新视图标题？

> ID：12458819
> 
> 赞同：2
> 
> 时间：2012-09-17T12:06:39.250
> 
> 标签：java, internationalization, osgi, eclipse-rcp

在 RCP 应用程序中，我通过以编程方式将其设置在`.ini`文件中并重新启动应用程序来更改语言环境。

`OSGI-INF/l10n`问题是在 plugin.xml 文件引用的文件中定义的视图标题在我关注它们之前不会更新。

例如，从切换`EN`到后`FR`，我有这个：

![在此处输入图像描述](../Images/2365f8768bd616bec8c88c9db4422f0c.png)

只有在我单击第二个选项卡后，我才会得到这个：

![在此处输入图像描述](../Images/4e3ae7ddce4b572e55bb49829f1447c3.png)

我无法重置视角，因为它们可能已被用户更改（视图调整大小、删除或添加）。我`configurer.setSaveAndRestore(true);`在我的`WorkbenchAdvisor.initialize`方法中设置了确保视图布局在启动时恢复。

有没有办法以编程方式强制更新视图标题而不会丢失透视配置？

我准确地说我不能使用新的 Eclipse 4 (Juno) API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:01:32.123

当您从上一个会话中恢复视角时，它可能会记住部分标题。默认情况下，ViewPart 在`saveMemento()`方法中不做任何事情。覆盖以下方法是为了调试问题

```
 public void init(IViewSite site, IMemento memento) throws PartInitException 

   String getPartName() 
```

# transactions - 使用事务处理骆驼异常

> ID：12458820
> 
> 赞同：2
> 
> 时间：2012-09-17T12:06:43.690
> 
> 标签：transactions, apache-camel, osgi, apache-servicemix

我正在编写一个 Camel 应用程序（在 ServiceMix v4.4.2 中运行），它需要能够处理异常（使用死信队列来存储消息以供稍后重试）并且能够在硬件死机时从中断的地方开始. 我认为我需要混合使用事务和错误处理程序，但不确定如何开始。

任何有关相关教程的建议或指示都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:25:53.533

你可以看看我的教程： [http ://www.liquid-reality.de/x/JgBz](http://www.liquid-reality.de/x/JgBz)

它不完全是您正在寻找的东西，但类似。它展示了如何创建事务路由以及如何为其设置 jms。不同之处在于教程路线以 jpa 组件开头。所以我将解释如何用 jms 来做。

对于带有死信队列的 jms，您将执行一个发送到死信队列的 onException 子句。这涵盖了骆驼能够处理问题的情况。如果发生硬件故障，jms 事务将回滚，消息将保留在原始队列中，并在路由再次出现时重试。理想情况下，您还将设置您的 jms 提供程序以在 n 次重试后发送到死信队列。这将捕获由于某种原因消息总是回滚的情况。

# javascript - 在同一个容器中同时保持边框和调整两个或多个 DIV 的大小

> ID：12458823
> 
> 赞同：1
> 
> 时间：2012-09-17T12:06:52.567
> 
> 标签：javascript, jquery, html, jquery-ui, widget

代码 ：

```
<div id="widget1">
  <div class="part blue">this is the part</div>
  <div class="part white">of the genial</div>
  <div class="part red">and good widget</div>
</div> 
```

假设`div#widget1`宽度`div.part`为 99px，默认为 33px。

如何`div.blue`通过按比例增加其宽度和减小其他 div.part 的宽度来轻松调整大小？

[http://jqueryui.com/demos/resizable/#synchronous-resize](http://jqueryui.com/demos/resizable/#synchronous-resize)：举一个同时显示元素增加的例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T09:34:07.063

[调整 div 面板大小](https://stackoverflow.com/questions/12403095/resizing-div-panel)的可能重复项

在这里测试我的解决方案：http: [//jsfiddle.net/lnplnp/MxKLH/](http://jsfiddle.net/lnplnp/MxKLH/)

但这完全符合我的需要：

JAVASCRIPT：

```
$(document).ready(function() {

  // init
  var containerWidth = $("#container").width();
  var nbpanels = $(".panel").size();
  var padding = 2.5;

  $(".panel").width( (containerWidth / nbpanels) - (nbpanels * padding - 2 * padding));

  $(".panel").resizable({
    handles: 'e',
    maxWidth: 450,
    minWidth: 120,
    resize: function(event, ui){
      var currentWidth = ui.size.width;
      // set the content panel width
      $(".panel").width( ( (containerWidth - currentWidth + padding ) / (nbpanels - 1) ) - ((nbpanels - 1) * padding) );
      $(this).width(currentWidth);
    }
  });

}); 
```

HTML：

```
<div id="container">
  <div id="panel1" class="panel" >
    some text, lorem ipsum. some text, lorem ipsum. some text, lorem ipsum.
  </div>
  <div id="panel2" class="panel" >
    some more text, lorem ipsum. some text, lorem ipsum. some text, lorem ipsum.
  </div>
  <div id="panel3" class="panel" >
    some text, lorem ipsum. some text, lorem ipsum. some text, lorem ipsum.
  </div>
  <div id="panel4" class="panel" >
    some text, lorem ipsum. some text, lorem ipsum. some text, lorem ipsum.
  </div>
  <div class="clear"></div>
</div> 
```

CSS：

```
.clear{
  clear:both;
}

#container{
  border: 1px red solid;
  margin: 0 auto;
  width: 900px;
}

.panel{
  background-color: #9999FF;
  float: left;
  height: 200px;
  padding: 2.5px;
}

#panel1{
  background-color: #FF0000;
} 
```

我认为 JS 可以改进......但它正在工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T09:35:21.657

```
$('.part').attr('width',10);
$('.blue').attr('width',50); 
```

使用这个，所有名为 part 的 div 的宽度都会减小，只有蓝色的宽度会增加。

# javascript - Firefox onchange 不调用函数

> ID：12458824
> 
> 赞同：0
> 
> 时间：2012-09-17T12:06:52.977
> 
> 标签：javascript, javascript-events

我有一个包含输入的表单：

`<input onchange="checkDomain(true); return false;" type="text" id="dsearch" value="" name="domain" maxlength="30"/>`

这在 Opera、Chrome 和 IE 中运行良好 - 但 Firefox 和 Safari 在调用该函数时遇到问题`checkDomain()`。我在函数中添加了一行用于调试：

```
function checkDomain(check) 
{
console.log('checkDomain() called!'); 
// do rest of the stuff...
} 
```

因此，Chrome/Opera/IE 在您输入文本并单击其他位置后调用该函数没有问题 - 但 Firefox/Safari 没有。有人有线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:09:04.403

也许`onblur`最适合这个：

```
<input onblur="checkDomain(true); return false;" type="text" id="dsearch" value="" name="domain" maxlength="30"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:15:29.733

我不记得我在哪里读到它了，但你应该使用`.keydown()`/ `.keyup()`/ `.keypress()`（任何适合你的需要）而不是 onchange。至少对于`input[type=text]`.

您也可以将`.blur()`and`.focus`用于各自的目的。

在您的问题中看到这一点：“在您输入文本并单击其他位置后”，让我得出结论，您需要 .blur() 函数。

```
 $("input[type=text]").blur(function(){
       console.log('checkDomain() called!')
   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T08:26:21.180

当您更改输入按键和按键的行为时，会发生此问题。

您需要手动调用`onchange`触发器来触发它。

作为一个例子，考虑你的输入有一个 jQuery 函数，当用户点击键盘时它会做一些事情。

您需要致电`input.trigger("onchange");`以确保 onchange 在之后`keypress`触发`keydown`

```
/**
 * Keyboard Manager
 */
(function($) {
    $.fn.inputManager = function(options) {
        };
        options = $.extend(defaults, options);

        // The key down event only use to manage key board language changes
        var keyDown = function(e) {
           //Do something
        };

        var keyPress = function(e) {
            //Do something
        };

        return this.each(function() {
            var input = $(this);

            //The Firefox dose not trigger the input onchange when you change keypress and key down
            //functions. So manually call it!
            input.keypress(function(e) {
                keyPress(e);
                input.trigger("onchange");
            });
            input.keydown(function(e) {
                keyDown(e);
                input.trigger("onchange");
            });
        });
    };
})(jQuery); 
```

# sql - 与交集中的 SQL

> ID：12458826
> 
> 赞同：1
> 
> 时间：2012-09-17T12:06:53.253
> 
> 标签：sql, oracle

我想从表格中选择结果

```
USER HOBBY
John Sport
Ann  Piano
Lee  Reading
Ann  Sport
Lee  Piano 
```

我想寻找有不止一个共同爱好的人。哪个查询有更好的性能，

```
select user from table where hobby = "sport"
intersect 
select user from table where hobby = "piano" 
```

或者

```
select user from table where user in (select user from table where hobby = "piano") and where hobby = "sport"? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:24:20.820

最佳性能来自从表中选择用户，其中爱好 =“运动”或爱好 =“钢琴”

但如果这只是一个理论例子，那么已经做了很多测试，这里有一些： [http ://www.execsql.com/post/intersectexcept-versus-innot-in](http://www.execsql.com/post/intersectexcept-versus-innot-in)

顺便说一句，没有比自己尝试查询的执行时间更好的解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:28:16.620

在 Oracle 中，假设`(USER, HOBBY)`是唯一的，您可以使用`GROUP BY`查询：

```
SELECT user
  FROM user_hobby
 WHERE hobby IN ('piano', 'sport')
 GROUP BY user
HAVING COUNT(*) = 2 
```

这将使 Oracle 最多对数据执行一次传递，而 INTERSECT 将分别处理每个查询，因此需要两次传递。

# javascript - Javascript 修剪 s 的换行符

> ID：12458837
> 
> 赞同：1
> 
> 时间：2012-09-17T12:07:30.860
> 
> 标签：javascript, jquery, html

假设我在标签中有以下代码`<div>`：

```
<div id="something"><br /> <br />Hello<br />World<br><br />   </div> 
```

我怎么能`trim`在 JS 端修剪掉所有的空白和 HTML 换行符，所以我得到如下内容：

```
<div id="something">Hello<br />World</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T12:24:29.017

您可以删除`<br />`字符串开头和结尾的空格和节点

```
x = x.replace(/^( |<br \/>)*(.*?)( |<br \/>)*$/,"$2"); 
```

但是您必须将其应用于`innerHTML`div 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:11:46.323

使用正则表达式替换，它将是

```
return html.replace(/\s*(<br ?\/>\s*)+/g, "<br />").replace(/^<br \/>|<br \/>$/g, ""); 
```

在 DOM 中，您需要遍历 div 的所有子元素并删除空空格和背靠背`br`元素：

```
var el = document.getElementById("something");
for (var i=0, remove=true; i<el.childNodes.length; ) {
    var child = el.childNodes[i];
    if (child.nodeType == 3 && child.isElementContentWhitespace)
        el.removeChild(child);
    else if (child.nodeType == 1) {
        if (child.nodeName.toLowercase() == "br" && remove)
            el.removeChild(child);
        else
            // run DOM tree recursively?
        remove = true;
    } else {
       remove = false;
       i++;
    }
}
if (el.lastChild.nodeType == 1 && el.lastChild.nodeName.toLowercase() == "br")
    el.removeChild(el.lastChild); 
```

# android - 使用 android api 创建新的同步日历

> ID：12458838
> 
> 赞同：10
> 
> 时间：2012-09-17T12:07:35.050
> 
> 标签：android, api, calendar

我正在尝试在我的帐户上创建一个日历来填充我从某些网站获得的事件。我搜索并找到了一些新的 android 4.0 日历示例，我已对其进行了修改以获得我需要的内容。问题是日历已创建，充满事件但未与谷歌日历同步，因此在下一次同步时它被删除。我使用的功能是：

如果不存在，这是添加新日历的方法：

```
public static Uri createCalendarWithName(Context ctx, String name,String accountName) {

            Uri target = Uri.parse(CalendarContract.Calendars.CONTENT_URI.toString());
            target = target.buildUpon().appendQueryParameter(CalendarContract.CALLER_IS_SYNCADAPTER, "true")
            .appendQueryParameter(CalendarContract.Calendars.ACCOUNT_NAME, accountName)
            .appendQueryParameter(CalendarContract.Calendars.ACCOUNT_TYPE, "com.google").build();

            ContentValues values = new ContentValues();
            values.put(Calendars.ACCOUNT_NAME, accountName);
            values.put(Calendars.ACCOUNT_TYPE, "com.google");
            values.put(Calendars.NAME, name);
            values.put(Calendars.CALENDAR_DISPLAY_NAME, name);
            values.put(Calendars.CALENDAR_COLOR, 0x00FF00);
            values.put(Calendars.CALENDAR_ACCESS_LEVEL, CalendarContract.Calendars.CAL_ACCESS_ROOT);
            values.put(Calendars.OWNER_ACCOUNT, accountName);
            values.put(Calendars.VISIBLE, 1);
            values.put(Calendars.SYNC_EVENTS, 1);
            values.put(Calendars.CALENDAR_TIME_ZONE, "Europe/Rome");
            values.put(Calendars.CAN_PARTIALLY_UPDATE, 1);
            values.put(Calendars.CAL_SYNC1, "https://www.google.com/calendar/feeds/" + accountName + "/private/full");
            values.put(Calendars.CAL_SYNC2, "https://www.google.com/calendar/feeds/default/allcalendars/full/" + accountName);
            values.put(Calendars.CAL_SYNC3, "https://www.google.com/calendar/feeds/default/allcalendars/full/" + accountName);
            values.put(Calendars.CAL_SYNC4, 1);
            values.put(Calendars.CAL_SYNC5, 0);
            values.put(Calendars.CAL_SYNC8, System.currentTimeMillis());

            Uri newCalendar = ctx.getContentResolver().insert(target, values);

            return newCalendar;
    } 
```

并且那个人在没有交互的情况下创建了新事件：

```
public static Uri createEventWithName(Context ctx, long id, String name, String data) {
        long startMillis = 0; 
        long endMillis = 0;     
        int id2=(int)id;
        String[] divisi = data.split("/");
        Calendar beginTime = Calendar.getInstance();
        beginTime.set(2012,Integer.parseInt(divisi[0])-1, Integer.parseInt(divisi[1]));
        startMillis = beginTime.getTimeInMillis();
        Calendar endTime = Calendar.getInstance();
        endTime.set(2012,Integer.parseInt(divisi[0])-1, Integer.parseInt(divisi[1]));
        endMillis = endTime.getTimeInMillis();

        ContentValues cv = new ContentValues();
        cv.put(Events.TITLE, name);
        cv.put(Events.DTSTART, startMillis);
        cv.put(Events.DTEND, endMillis);
        cv.put(Events.CALENDAR_ID, id2);
        Log.d("aggiungo a calendario",Integer.toString(id2));
        cv.put(Events.EVENT_TIMEZONE, TimeZone.getDefault().toString());
        //cv.put(Events.RRULE, "FREQ=DAILY;INTERVAL=2");

        Uri newEvent = ctx.getContentResolver().insert(CalendarContract.Events.CONTENT_URI, cv);
        return newEvent;
} 
```

我在 Android 编程方面不是很有经验，所以我认为这是一个愚蠢的问题 =) 我读过 accountName 和 Account Type 必须与存储在 android 设备上的相同，否则事件将被取消。我从 android api 获得 accountName，我认为它们是正确的。帐户类型似乎适用于其他......

感谢任何帮助我的人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-01T19:46:06.117

暂时不可能。

经过大量谷歌搜索后，我找不到在 Gmail 帐户（帐户类型“com.google”）中创建新的可同步日历的方法。我已经尝试过这些场景：
1\. 没有 SyncAdapter，我得到了相同的行为 - 日历出现在外部 Google 日历应用程序中，所有事件都是我添加的，但不久之后（例如几秒钟后）所有事件和日历都消失了。
2\. 使用 SyncAdapter 和 com.google 身份验证器 - 在此过程中出现错误
3\. 使用 SyncAdapter 和 com.example 身份验证器 - 可以创建日历但不能在 Gmail 帐户中

请注意，您可以创建新帐户并为该帐户创建新日历（使用 SyncAdapter，方案 3），但它不是 Gmail 帐户，因此日历不能与 Gmail 日历同步（例如，如果您在网络浏览器中登录到 Gmail 帐户并打开 Google 日历您刚刚创建的日历不会显示）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-19T15:29:20.697

我面临同样的问题。现在进行以下更改后，我看到这些事件永久地保留在我的日历上。

在`addEvent`方法中添加以下行

```
Uri uri =  getContentResolver().insert(asSyncAdapter(Events.CONTENT_URI,"abc@gmail.com","com.gmail"), cv); 
```

asSyncAdapter 的代码如下

```
 static Uri asSyncAdapter(Uri uri, String account, String accountType) {
        return uri.buildUpon()
            .appendQueryParameter(android.provider.CalendarContract.CALLER_IS_SYNCADAPTER,"true")
            .appendQueryParameter(Calendars.ACCOUNT_NAME, account)
            .appendQueryParameter(Calendars.ACCOUNT_TYPE, accountType).build();
     } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-15T18:40:31.350

来自[http://developer.android.com/reference/android/provider/CalendarContract.html](http://developer.android.com/reference/android/provider/CalendarContract.html)

> 公共静态最终字符串 ACCOUNT_TYPE_LOCAL
> 
> 在 API 级别 14 中添加 与任何帐户无关的日历的特殊帐户类型。通常，与设备上的帐户不匹配的日历将被删除。将日历上的 account_type 设置为此将防止它在与现有帐户不匹配时被擦除。
> 
> 另请参见 ACCOUNT_TYPE 常量值：“LOCAL”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T18:13:10.180

根据 CalendarContract.Calendars 的 Javadoc：

“日历设计主要由同步适配器管理，插入新日历应作为同步适配器完成。”

如果你不是同步适配器（如果你只是一个任意的应用程序，你就不是同步适配器），这可以解释为什么你的新日历没有像你期望的那样同步。

# facebook - 为什么 facebook 为某些事件返回错误的 start_time？

> ID：12458843
> 
> 赞同：0
> 
> 时间：2012-09-17T12:07:44.833
> 
> 标签：facebook, api, facebook-graph-api

我正在使用 FB api 来获取有关特定事件的信息。它工作得很好，但对于某些事件，它返回 start_time 而没有时区偏移。

例如：（`"start_time": "2012-09-20T16:00:00+0000"`时区为空）。但应该是`"2012-09-20T19:00:00+0300"`
[https://www.facebook.com/events/416982425024750](https://www.facebook.com/events/416982425024750)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T12:13:02.650

是的，你是对的，**应该**返回时区。然而[，Facebook 在](https://developers.facebook.com/blog/post/2012/08/01/platform-migration--events-timezone-support/)事件时间管理方面做了一些改变（正如他们所做的那样）。查看[活动文档的内容](https://developers.facebook.com/docs/reference/api/event/)-

> ### 事件时区迁移说明
> 
> 从“Events Timezone”迁移开始，所有事件时间始终是 ISO-8601 格式的字符串；'date_format' 查询字符串修饰符不再有任何效果。现在返回以下格式，具体取决于事件的类型：
> 
> *   仅日期（例如，'2012-07-04'）：有日期但还没有具体时间的事件。
> *   精确时间（例如，'2012-07-04T19:00:00-0700'）：在特定时间点开始的事件，在与 UTC 的特定偏移量中。这是新的 Facebook 事件跟踪时间的方式，并允许用户查看不同时区的事件。
> *   本地时间（已弃用，例如“2012-07-04T19:00:00”）：没有任何时区信息的遗留事件。此格式已弃用，但由于仍在系统中的遗留事件而继续返回。

我相信您正在谈论的特定事件根本无法计算时区偏移 - 可能是因为没有给出位置。

# java - 为不同的黑莓应用程序添加通用类

> ID：12458845
> 
> 赞同：1
> 
> 时间：2012-09-17T12:07:45.957
> 
> 标签：java, blackberry

我编写了一个公共类，我想在单独的 Blackberry 应用程序中使用它。这个类不在一个单独的项目中，而只是在一个公共位置，我已经在 J​​ava Build Path 中链接了公共类的路径。我为我的两个 BB 应用程序添加了相同的公共路径，它们可以毫无问题地构建和安装。当我运行一个应用程序时，它开始运行，但是当我运行另一个应用程序时，它给出错误消息“class xxx multiply defined”错误并退出。

知道这里出了什么问题。提前致谢

问候，布拉杰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:38:39.950

BlackBerry 不能像其他 Java 平台那样工作。在 BB Java 中，不能有两个具有相同全名的类，即使它们位于不同的项目中。

您必须重命名其中一个（更改类名或包名）才能使其正常工作。

事实上，我看到这个限制的唯一平台是BB。这是一个真正的痛苦，因为你不能在不同的项目中重用一个 jar 库而不重命名它。

更新：
这是有关该主题的官方文章：http:
[//supportforums.blackberry.com/t5/Java-Development/Application-throws-quot-multiply-defined-quot-error-at-start-up/ta-p /501498](http://supportforums.blackberry.com/t5/Java-Development/Application-throws-quot-multiply-defined-quot-error-at-start-up/ta-p/501498)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:15:31.257

RIM OS 中的所有应用程序都在一个 Java 虚拟机实例下运行。因此，只允许一个具有特定全限定名的类。添加另一个具有相同名称的类将导致运行这两个类时失败。

RIM OS 支持库的东西，但我不建议在您的项目中使用库，除非非常必要。

这是因为如果您有多个具有相同库的应用程序，但使用不同版本的库，您可能会遇到您在问题中报告的相同错误。当您有许多使用这些库的应用程序时，很难管理这些库。

我建议将您的库的源代码复制到您正在处理的项目中。通过重构复制，以更改该库中包含的所有类的完整限定名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:45:53.117

谢谢各位回复。我创建了一个通用库并将通用代码放入其中。现在我可以在不同的应用程序中使用这个库，没有任何问题。但是，当我使用 BB 桌面管理器安装我的应用程序时，该库显示为第一个应用程序的一部分，但不在第二个应用程序中。我认为这是因为，第二个应用程序意识到该库已被包含，因此不需要再次包含它。

# mysql - 两个连续行中的日期之间的差异

> ID：12458847
> 
> 赞同：7
> 
> 时间：2012-09-17T12:07:52.463
> 
> 标签：mysql, sql, postgresql

```
+----------+--------------+-------------------------+
| ticketid | ticketpostid |           date          |
+----------+--------------+-------------------------+
|  1387935 |      3147808 | 2012-09-17 13:33:01     |
|  1387935 |      3147812 | 2012-09-17 13:33:41     |
|  1387938 |      3147818 | 2012-09-17 13:35:01     |
|  1387938 |      3148068 | 2012-09-17 13:37:01     |
|  1387938 |      3148323 | 2012-09-17 14:47:01     |
|  1387939 |      3147820 | 2012-09-17 13:36:01     |
|  1387939 |      3147834 | 2012-09-17 13:36:25     |
|  1387939 |      3147851 | 2012-09-17 13:41:01     |
|  1387939 |      3147968 | 2012-09-17 13:59:06     |
|  1387939 |      3147996 | 2012-09-17 14:03:01     | 
```

这是我写的查询的结果。有两行和两行以上具有相同的ticketid。我需要在每个ticketid中找到前两个日期之间的时差

前任。

```
+----------+--------------+-------------------------+
| ticketid | ticketpostid |           date          |
+----------+--------------+-------------------------+
|  1387935 |      3147808 | 2012-09-17 13:33:01     |
|  1387935 |      3147812 | 2012-09-17 13:33:41     |
|  1387938 |      3147818 | 2012-09-17 13:35:01     |
|  1387938 |      3148068 | 2012-09-17 13:37:01     |
|  1387939 |      3147820 | 2012-09-17 13:36:01     |
|  1387939 |      3147834 | 2012-09-17 13:36:25     | 
```

因此;

```
+----------+--------------+
| ticketid |time diff(sec)|
+----------+--------------+
|  1387935 |      40      |
|  1387938 |      120     |
|  1387939 |      24      | 
```

你能告诉我我该怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-17T12:14:07.847

对于 PostgreSQL，我认为您希望[`lag`窗口函数](http://www.postgresql.org/docs/current/static/functions-window.html)来比较行；它会比自加入和过滤器更有效。这不适用于 MySQL，因为它似乎仍然不支持标准 SQL:2003 窗口函数；见下文。

要仅找到两个最低的，您可以在 上使用`dense_rank`窗口函数`ticketid`，然后过滤结果以仅返回 where 的行`dense_rank() = 2`，即具有倒数第二个时间戳的行，其中`lag()`将产生具有最低时间戳的行。

请参阅[此 SQLFiddle](http://sqlfiddle.com/#!1/0e213/1) ，它显示了示例 DDL 和输出。

```
SELECT ticketid, extract(epoch from tdiff) FROM (
  SELECT
      ticketid,
      ticketdate - lag(ticketdate) OVER (PARTITION BY ticketid ORDER BY ticketdate) AS tdiff,
      dense_rank() OVER (PARTITION BY ticketid ORDER BY ticketdate) AS rank
  FROM Table1
  ORDER BY ticketid) x
WHERE rank = 2; 
```

我已将其用作`ticketdate`日期列的名称，因为`date`它是一个糟糕的列名称（它是一个数据类型名称）并且永远不应该使用；在许多情况下必须双引号才能工作。

便携式方法可能是其他人发布的自我加入。上面的窗口函数方法可能也适用于 Oracle，但似乎不适用于 MySQL。据我所知，它不支持 SQL:2003 窗口函数。

如果您`SET sql_mode = 'ANSI'`使用`timestamp`而不是`timestamp with time zone`. 似乎窗口函数不会；MySQL 在该`OVER`子句上窒息。请参阅[此 SQLFiddle](http://sqlfiddle.com/#!9/846e8/1)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T12:45:26.200

试试这个查询 -

```
INSERT INTO ticket_post(ticketid, ticketpostid, date) VALUES
(1387935, 3147808, '2012-09-17 13:33:01'),
(1387935, 3147812, '2012-09-17 13:33:41'),
(1387938, 3147818, '2012-09-17 13:35:01'),
(1387938, 3148068, '2012-09-17 13:37:01'),
(1387938, 3148323, '2012-09-17 14:47:01'),
(1387939, 3147820, '2012-09-17 13:36:01'),
(1387939, 3147834, '2012-09-17 13:36:25'),
(1387939, 3147851, '2012-09-17 13:41:01'),
(1387939, 3147968, '2012-09-17 13:59:06'),
(1387939, 3147996, '2012-09-17 14:03:01');

SELECT
  ticketid,
  TIME_TO_SEC(TIMEDIFF((
    SELECT t.date FROM ticket_post t WHERE t.ticketid = t1.ticketid AND t.date > t1.date ORDER BY t.date LIMIT 1),
    MIN(date)
  )) diff FROM ticket_post t1
GROUP BY ticketid;

+----------+------+
| ticketid | diff |
+----------+------+
|  1387935 |   40 |
|  1387938 |  120 |
|  1387939 |   24 |
+----------+------+ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T12:12:52.323

```
select 
  ticketid
  ,time_to_sec(timediff(t2.date, t1.date))  as timediff
from table t1
join table t2 on t1.ticketid=t2.ticketid and t1.ticketpostid<t2.ticketpostid 
```

# crystal-reports - 如何在水晶报表中添加欧元作为货币符号

> ID：12458848
> 
> 赞同：0
> 
> 时间：2012-09-17T12:07:51.840
> 
> 标签：crystal-reports, crystal-reports-2008

我想创建一个报告，在值前面显示欧元/英镑/印度卢比符号。但根据我目前的水晶报表设置，我只能添加美元符号作为货币符号。

我想创建报告，我将在其中将货币从美元转换为欧元/英镑/印度卢比/...所以我想要动态添加货币符号的代码。

那么有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:12:34.553

*   右键单击，选择格式字段...
*   选择数字选项卡，单击自定义...按钮
*   选择货币符号选项卡
*   选中启用货币符号复选框
*   在货币符号框中键入欧元符号 (€)

** 编辑 **

如果您需要更大的灵活性，可以向货币符号添加自定义公式：

```
Select {table.currency_code}
Case "USD","CAD": "$"
Case "EUR": "€"
Case "GBP": "£"
// todo: add more symbols
Default : "$" 
```

# xmi - 在 XTend 中加载 EMF 模型实例

> ID：12458852
> 
> 赞同：10
> 
> 时间：2012-09-17T12:08:02.627
> 
> 标签：xmi, metamodel, emf, xtend

我正在 XTend 中构建一个代码生成器，其中我已经有一个输入模型和元模型。也就是说，我使用 ATL 为我的 XTend 代码生成器生成输入模型（作为转换序列的一部分，以逐渐降低抽象级别，而不是一次；这就是我不使用 xtext 创建语法的原因） .

所以要非常清楚，我的代码生成器输入模型是 XMI 格式的文件，而不是 xtext 项目的语法（甚至不使用它）！我认为这给我带来了问题/困惑。

我使用现有模型创建了一个新的 XText 项目，右键单击 .text 文件，运行为，生成人工制品，然后我对 mwe2 文件做了同样的事情。

下一步是什么，我做得对吗？如何启动我的代码生成器？所有示例都来自您使用 XText 创建 DSL 的 POV。我有一个 EMF 元模型和一个基于 XMI 的实例。如何使用 XTend 进一步处理？

任何指向教程的提示或指针都是有帮助的。

**解决方案：**

该解决方案正如 Sven 在我接受的答案中所建议的那样，但我还想指出，您需要使用 genmodel 从您的元模型生成 Java 工件。此链接显示如何：[http](http://www.vogella.com/articles/EclipseEMF/article.html) ://www.vogella.com/articles/EclipseEMF/article.html ，请参阅第 4 节。这可能看起来太合乎逻辑了，但我认为无论如何都值得注意。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-18T06:54:34.180

如果您有一个 XMI 并且只想从中生成代码，那么您根本不需要 Xtext。只需从一个 Java 项目开始（我会使用一个插件项目，以重用依赖项管理）并开始编码：

```
import org.eclipse.emf.common.util.URI
import org.eclipse.emf.ecore.EPackage
import org.eclipse.emf.ecore.resource.Resource$Factory$Registry
import org.eclipse.emf.ecore.resource.impl.ResourceSetImpl
import org.eclipse.emf.ecore.xmi.impl.XMIResourceFactoryImpl

class MyCodeGenerator {

  def static void main(String[] args) {
    new MyCodeGenerator().generate("mymodel.xmi")
  }

  def generate(String file) {
    doEMFSetup
    val resourceSet = new ResourceSetImpl
    val resource = resourceSet.getResource(URI.createURI(file), true)
    for (content : resource.contents) {
      generateCode(content)
    }
  }

  def dispatch generateCode(MySpecialType it) '''
    public class «name» {
      «FOR member : members»
      «ENDFOR»
    }
  '''

  def dispatch generateCode(MyMember it) '''
    private «type» «name»;
    ...
  '''

  def doEMFSetup() {
//    EPackage$Registry.INSTANCE.put(MyPackage.eINSTANCE.nsURI, MyPackage.eINSTANCE)
    Resource$Factory.Registry.INSTANCE.extensionToFactoryMap.put("xmi", new XMIResourceFactoryImpl);
  }

} 
```

您需要添加到 Manifest 的依赖项：

```
Require-Bundle: org.eclipse.xtend.lib,
 com.google.guava,
 org.eclipse.xtext.xbase.lib,
 org.eclipse.emf.common,
 org.eclipse.emf.ecore,
 org.eclipse.emf.ecore.xmi 
```

# jquery - 用于混合应用程序的 JQuery Mobile 和 SQL Server

> ID：12458855
> 
> 赞同：0
> 
> 时间：2012-09-17T12:08:08.040
> 
> 标签：jquery, sql-server, ajax, mobile, asp-classic

我很想知道是否有人用经典的 ASP 在 JQuery Mobile 中做过任何工作。似乎 PHP 是一种广泛使用的带有 JQM 的服务器端语言，但我似乎找不到任何具有良好 ol' CLASP 的东西（我知道它是旧技术，但它与 PHP 的相似之处非常有趣）。我在经典 asp 方面有着悠久的历史，并且希望使用它而不是学习 PHP（如果我避免的话）。

以下是详细信息...

我有一个现有的 SQL 数据库（在我的服务器上），其中包含我想在 JQM 中简单列出的客户信息。这将是一个三页应用程序： Page1 - 登录（用户身份验证） Page2 - 基于与用户凭据关联的客户（在数据库中）的客户列表 Page3 - 客户详细信息 - 从 Page2 中选择的客户的详细信息

当用户提交登录表单时，应用程序会转到服务器并获取凭据。然后在 Page2 上使用这些凭据来列出具有该用户 ID 作为客户经理的客户。然后用户点击一个客户，customerID 被传递到客户详细信息页面，该页面用于从数据库中提取特定的客户数据。

我遇到的主要困难是 - 。连接 SQL server 数据库。javascript如何连接到服务器端并检索数据？AJAX、JSON、网络服务？. 如何在页面之间传递数据？从登录表单、客户 ID 到客户详细信息页面的凭据。

我的偏好是使用 ASP，通过 AJAX/JSON 调用来填充服务器端数据，但我不知道从哪里开始。任何帮助将不胜感激。我很乐意在我的博客上给任何能给出详细解释的人提供一些广告空间。

谢谢史蒂文w： http: [//www.stevenwoolston.com](http://www.stevenwoolston.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:28:25.730

If the list of customers available to the logged-in user is not too large to make the download of a complete list unbearable, you may wish to generate a complete list server side and serve them all to the client as a UL LI list, wrapped within a JQM Search Form.

JQM will then provide the end user with a nice scrollable list with a simple search form at the top that will allow them to filter the list, without any client-server interaction, negating the need for you to provide JSON data.

The code for your "page 2" would therefor be something like this:

```
<html>
 <head>
  <title>Customers</title>
 </head>
 <body>
  <div data-role="page" id="home" data-add-back-btn="true">
   <div data-role="header" data-theme="">
    <h1>Customers</h1>
   </div>
   <div data-role="content">    
    <form role="search"></form>
    <ul data-filter-theme="b" data-filter-placeholder="Search Customers..." data-filter="true" data-role="listview">
     <li><a href="customerDetail.asp?CustomerID=1">Customer 1</a></li>
     <li><a href="customerDetail.asp?CustomerID=2">Customer 2</a></li>
     <li><a href="customerDetail.asp?CustomerID=3">Customer 3</a></li>
    </ul>
   </div>
  </div>
 </body>
</html> 
```

Your "page 3", in the above example is the "customerDetail.asp" page, being provided with the CustomerID in the querystring, which you can access via

```
request.queryString("customerID") 
```

# jsp - 为什么没有得到 bean 对象的一些值？

> ID：12458856
> 
> 赞同：0
> 
> 时间：2012-09-17T12:08:10.677
> 
> 标签：jsp, struts2

在struts2 中实现了编辑功能。单击提交按钮后，我在 JSP 中显示的 bean 值在动作类中正确获取。

但是我在 JSP 中没有提到的其他 bean 值正在返回 null。

如果我在 JSP 中显示 bean 的所有值，那么我可以在 Action 中获取所有值。

这是解决此问题的方法。否则，还有其他方法。

Action 类的代码是

```
 UserForm userForm = new UserForm();

public String edit(){
    String result = ActionSupport.ERROR;
    HttpServletRequest request = (HttpServletRequest) ActionContext.getContext().get( ServletActionContext.HTTP_REQUEST);
        HttpSession session = request.getSession(false);
        if (null != session
                && null != (UserAccount) session.getAttribute(USER)) {
            String editUser = (String) request
            .getParameter(RequestAttributes.EDIT_USER);
            UserAccount userAccount = userForm.getUserAccount();
        if (null != editUser) {
                    //invoked when edit user page is submitted
            userUtils.updateUserAccount(userAccount);

        } else {
                    // invoked when edit user page gets loaded
            String userAccSID = (String) request
                    .getParameter(USER_ACC_SID);
            String roleSID = (String) request.getParameter(ROLE_SID);
            if (null != userAccSID && null != roleSID) {
                Long userAccSIDVal = Long.valueOf(userAccSID);
                Long roleSIDVal = Long.valueOf(roleSID);
                userAccount = userUtils
                        .loadUserAccount(userAccSIDVal);
                userForm.setUserAccount(userAccount);
            }
        }
    } 

    return result;
}

public UserForm getUserForm() {
    return userForm;
}

public void setUserForm(UserForm userForm) {
    this.userForm = userForm;
} 
```

JSP页面的代码是

```
<s:form action="edit?editUser=edit">
<table align="center">
                    <s:hidden name="userForm.userAccount.createdBy"/>
        <tr align="center">
            <th>Edit User</th>
        </tr>
        <tr>
            <td><s:textfield name="userForm.userAccount.firstName" label="First Name"/></td>
        </tr>
        <tr>
            <td><s:textfield name="userForm.userAccount.lastName" label="Last Name"/></td>
        </tr>

        <tr>
            <td><s:submit value="Save" /><s:reset value="Cancel" /></td>
        </tr>
</table> 
```

现在，如果我将 createdBy 隐藏，那么我可以在 Action 中获取 createdBy 的值。它的值已经由动作类设置。那么，为什么还要在jsp页面中设置呢？

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:25:42.287

如果您没有从 JSP 返回值，那么它们如何在表单提交时可用于 Action 类。一种解决方案是创建隐藏字段并设置您不想在 JSP 页面上向用户显示的值，这样当您点击提交按钮时，这些值将被提交给操作。

其他选择是将数据存储在 Session 中或在您的操作类中获取值，但在我们没有其他选择之前，它们不是可取的解决方案。

# windows-phone-7 - 处理应用启动时来电崩溃

> ID：12458857
> 
> 赞同：0
> 
> 时间：2012-09-17T12:08:13.970
> 
> 标签：windows-phone-7, crash, windows-phone-7.1, lockscreen

我遇到了一个有趣的场景。它也由 msdn 论坛上的某个人呈现[在这里](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/8499e91f-e34a-43ca-9062-182387c97a6e)

当我启动我的应用程序时，如果我锁定了屏幕，或者如果当时有一个呼叫来电，并且在各自的场景中解锁或断开呼叫后恢复，则应用程序崩溃并抛出 0x8000ffff 错误。`emailcomposetask`当从我的应用程序打开an 时，我观察到这种情况也会发生。

以前我以为是因为我没有处理 Obscured 和 Unobscured。但现在我正在处理它们，我仍然收到同样的情况。我观察到许多其他应用程序也会崩溃，但有一些应用程序（如 Facebook 和 Twitter）能够处理它。有没有人遇到过同样的情况？你能帮我解决这个问题吗？

我做错什么了吗？

另请注意，我更改了默认加载页面。它不是 mainPage.xaml 而是 xyz.xaml，我在其中检查令牌并将用户自动重定向到 mainPage，而无需单击任何按钮。

编辑：添加 StackTrace

```
at Microsoft.Phone.Execution.NativeEmInterop.NotifyFullObscurityChanged(Boolean isObscured)
at Microsoft.Phone.Shell.PhoneApplicationService.OnFullObscurityChanged(Object sender, LockStateChangeEventArgs e)
at Microsoft.Phone.Shell.Interop.ShellPageManager.ShellPageCallback_OnLockStateChange(Object source, LockStateChangeEventArgs e)
at Microsoft.Phone.Shell.Interop.ShellPageCallback.FireOnLockStateChange(Boolean fLocked)` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:08:52.317

这主要是因为代码`OnNavigatedTo()`和`Page_Loaded()`事件处理程序。放置断点并检查这两种方法中的问题。

在您提到的情况下恢复应用程序时，这两个方法会以相同的顺序调用。

希望这能解决您的问题。

**根据您的评论更新：**

你在这。您正在清除整个导航历史记录，因此它现在不知道去哪里（即使当前页面已被删除）。

我的建议是，将您的回溯历史删除代码从 OnNavigated 移至 Page_Loaded 事件。

# matlab - 循环速度升级

> ID：12458858
> 
> 赞同：1
> 
> 时间：2012-09-17T12:08:15.130
> 
> 标签：matlab, for-loop

我正在分析股票的日内交易量概况。我已经构建了一段（粗略的）代码，它可以很好地完成两件事，但速度很慢。一只股票在给定时期内可以进行超过 20 万次交易，我想分析大约 200 只股票。

我的代码查看了超过 3 个月的交易数据，每天将数据分成 10 分钟的存储桶。我这样做是为了确保一只股票每桶至少交易 x 值。然后，我将日内存储桶聚合为时间存储桶，以了解平均交易量分布。

下面的代码示例仅显示了我如何对数据进行 bin 分类，然后按 bin 进行聚合：

```
% Totals by time bucket

for i = 1:size(VALUE,1)
    MyDay = day(datenum(sprintf('%d',VALUE(i,1)),'yyyymmdd'));
    MyMonth = month(datenum(sprintf('%d',VALUE(i,1)),'yyyymmdd'));
    MyYear = year(datenum(sprintf('%d',VALUE(i,1)),'yyyymmdd'));
    StartHour = hour(VALUE(i,2));
    StartMinute = minute(VALUE(i,2));
    EndHour = hour(VALUE(i,3));
    EndMinute = minute(VALUE(i,3));
    if StartMinute ~= 50
        t = (day(MyTrades(:,1)) == MyDay & month(MyTrades(:,1)) == MyMonth & year(MyTrades(:,1)) == MyYear & hour(MyTrades(:,1)) == StartHour & minute(MyTrades(:,1)) >= StartMinute & minute(MyTrades(:,1)) <= EndMinute);
    else
        t = (day(MyTrades(:,1)) == MyDay & month(MyTrades(:,1)) == MyMonth & year(MyTrades(:,1)) == MyYear & hour(MyTrades(:,1)) == StartHour & hour(MyTrades(:,1)) < EndHour & minute(MyTrades(:,1)) >= StartMinute);
    end    
    tt = MyTrades(t,:);
    MyVALUE(i,1) = sum(tt(:,5));
end  

% Aggregate totals

for ii = 1:50
    VWAP(ii,1) = datenum(0,0,0,9,0,0)+datenum(0,0,0,0,10,0)*ii-datenum(0,0,0,0,10,0) ;
    VWAP(ii,2) = datenum(0,0,0,9,0,0)+datenum(0,0,0,0,10,0)*ii;
    StartTime = VWAP(ii,1);
    temp = (VALUE(:,2) == StartTime);
    temp2 = VALUE(temp,:);
    VWAP(ii,3) = sum(temp2(:,4))/100;
end 
```

有没有更优雅和（更重要的是）更快的方法来计算这些类型的“蛮力”分析？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:13:38.957

而不是使用像 DateNumber 这样的复杂数据，而是使用时间戳并使 dateenum 仅值一次。

你必须完全重写你的代码，但是用时间戳来思考对计算（和数据库）更友好

这里有一些帮助从 DateNumber 中的时间戳转换：http: [//www.mathworks.it/matlabcentral/newsreader/view_thread/119237](http://www.mathworks.it/matlabcentral/newsreader/view_thread/119237)

# php - 在 html 中使用 php 不起作用，为什么？

> ID：12458863
> 
> 赞同：-3
> 
> 时间：2012-09-17T12:08:42.270
> 
> 标签：php, mysql, html

我正在尝试连接到本地数据库，但我遇到了大问题。我正在使用记事本++

它不明白`<?php`它似乎.. 甚至没有打印出 Hello world。我不明白为什么？有人请帮忙！？

```
<HTML>
<HEAD>
</HEAD> 
<BODY>

    <?php

        echo 'Hello World';
        $con = mysql_connect("localhost:3306","user","password");
        if(!$con){
            die("Cant connect: " . mysql_error());
        }

        mysql_select_db("mysql_projekt",$con);
        $sql = "SELECT * FROM artiklar";
        $myData = mysql_query($sql,$con);

        while($record = mysql_fetch_array($myData)){

            echo $record['titel'];
        }

        mysql_close($con);
    ?>

</BODY> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:17:23.430

要使 PHP 工作，您需要从服务器运行它 - 您不能像使用 HTML 文件那样在浏览器中打开它。您的文件需要一个 .php 扩展名，并且您需要确保您的服务器设置为使用 PHP。Windows 没有预装 Apache、PHP 或 MySQL。

PHP 是一个预处理器：服务器解析 PHP 代码并使用它来输出 HTML，然后由您的浏览器解释。如果没有服务器，PHP 就无法被解析，而是作为无效的 HTML 提供给浏览器。

如果您在 PC 上，请尝试使用[AppServ](http://www.appservnetwork.com/)进行本地 PHP/Apache/MySQL 安装。如果您使用的是 Mac，请尝试[MAMP](http://www.mamp.info/en/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:31:28.477

如果您的计算机上有本地服务器，则必须修改 /etc/httpd.conf 或更好地制作包含以下命令的 .htaccess （我认为）

您必须添加该行`AddType application/x-httpd-php .html`。这是为了让 apache 解析 .html 文件并查看它们是否包含 php。否则，如果您使用 .html 扩展名保存文件，则 php 解析器不会检查它的 php 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:20:47.290

一个好的 Windows PHP 测试环境是[WAMP](http://www.wampserver.com)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T12:23:05.643

1 安装一个web服务器，比如windows下的wamp或者lamp undex unix

2 打开 Web 服务器并访问 phpmyadmin 以创建数据库：`http://localhost/phpmyadmin`

用户应该是root，被问到

现在，只需创建数据库

3 进去`c:\wamp\www\`创建一个文件夹；现在创建一个文件 index.php，并在那里编写代码并保存文件

4访问网页喜欢`http://localhost/the_path_used_by_you/index.php`

index.php 可能会丢失，因为 apache Web 服务器会搜索 index.php 或 index.html 或 index.htm 文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T12:23:39.593

回覆：`It just display Hello. Not world`

让正文显示在正文后查看源代码`Hello <?PHP echo 'world'; ?>!`。

如果它在那里显示您的 PHP 代码，那么您正在查看确保服务器正确解析 .php 扩展名，和/或设置您的服务器以解析所有 .htm/.html 文件。请参阅其他评论，因为他们也指出了这一点。

# javascript - 使用 javascript 问题更新 span 标记值

> ID：12458870
> 
> 赞同：0
> 
> 时间：2012-09-17T12:09:20.137
> 
> 标签：javascript

我正在尝试使用以下方法简单地更新跨度标签...

```
<script type="text/javascript">

document.getElementById("myspan").innerHTML="newtext";  

</script>

<span id="myspan"> hereismytext </span> 
```

但我收到以下错误：

**document.getElementById("myspan") 为空**

关于造成这种情况的任何想法？

干杯

富有的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:11:09.220

那是因为您需要在元素之后添加该 javascript（必须首先在 DOM 中创建该元素才能让 javascript 看到它）：

```
<span id="myspan"> hereismytext </span>
<script type="text/javascript">
    document.getElementById("myspan").innerHTML="newtext";  
</script> 
```

或使用`window.onload`：

```
<script type="text/javascript">
    window.onload = function(){
        document.getElementById("myspan").innerHTML="newtext";  
    }
</script>
<span id="myspan"> hereismytext </span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:11:53.400

尝试将您的 JavaScript 代码放入一个函数中，并在页面加载处理程序中调用它 - 就目前情况而言，如果您的脚本标签位于页面顶部，那么 DOM（因此您的跨度）将不存在时间你的代码被执行：

```
<script type="text/javascript">
funcion loaded(){
    document.getElementById("myspan").innerHTML="newtext";  
}
</script>

<body onload="loaded()">
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:13:14.693

当你与 DOM 通信时，你需要确保它存在/准备好被修改。在您的示例中，您正在更改具有 id 的元素`myspan`在它存在之前（javascript 在 html 之前运行），因此浏览器找不到它。你要么需要把它放在：

```
<!-- HTML -->
<script type="text/javascript">
//change html
</script> 
```

或检查等到它准备好。

```
window.onload = function() {
    //change html
} 
```

# c# - 如何以易于理解的通用格式表示 SQL 查询？

> ID：12458871
> 
> 赞同：1
> 
> 时间：2012-09-17T12:09:25.073
> 
> 标签：c#, sql, sql-server, database

我正在计划一个 C# 查询工具，它有助于创建查询，供完全不了解 SQL 的个人使用。

我想以易于理解的格式显示用户的查询。我想到的两个选项是维恩图或自然语言。后一种情况的一个例子（进一步阐述这个问题）可能是：

用户使用该工具，该工具生成的 SQL 语句类似于`SELECT SALARY FROM EMPLOYEES`.

该工具可以将查询显示为易于理解的格式，例如：“报表将显示所有员工的工资”。

这可能是一种方法——通过使用自然语言技术。另一个可能是通过呈现维恩图，因为很多人都可以理解这个符号。

有没有其他可以很容易理解的表示查询的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:16:19.527

自然语言可能是最好的选择，维恩图可能会让人们感到困惑。最简单的方法是给几个人一些 SQL 培训，这样他们就可以制作自己的报告，并充当他们无法自己制作的其他类型报告的看门人。我们使用这种方法并且效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:16:58.970

你对查询树有什么看法？

![在此处输入图像描述](../Images/38c56e7cbbef03ebde7f6166147a0e8e.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:33:39.833

正如其他人已经评论过的那样，维恩图对于每个人来说都不容易理解，对于非技术用户来说更是如此。从以前与要求类似功能的客户合作的经验来看，我建议带几个他们最*高级*的用户，并努力教他们如何使用一些报告工具。配置工具，让他们玩**很多**，给他们一些反馈和帮助。最后一段时间后，如果正确完成，您可以将它们*留在野外*，让那些高级用户来完成这项工作。

# red5 - Red5：安装演示

> ID：12458873
> 
> 赞同：0
> 
> 时间：2012-09-17T12:09:30.367
> 
> 标签：red5

我已经安装了 red5 并启动了它。但是当我尝试安装演示（http://localhost:5080/installer/）时，它显示`connecting...`并且永远不会结束。

我有良好的互联网连接。问题是什么？

我已经安装了最新的：`Red5-1.0.0-RC2.exe`和 jdk 版本 7：`jdk-7u7-windows-i586.exe`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:33:29.740

您可以检查加载演示的存储库是否在线。您是否检查了演示存储库的 URL？

# sql-server-2008 - xml 解析第 1 行字符 4000 输入意外结束

> ID：12458874
> 
> 赞同：0
> 
> 时间：2012-09-17T12:09:31.930
> 
> 标签：sql-server-2008, fluent-nhibernate

我的 sql server 2008 数据库中有一个类型为“xml”的列（名为 MetaData）。我的映射如下：

```
Table("AuditLogs");
Id(x => x.Id, "AuditLogRecId").GeneratedBy.Identity();
Map(x => x.MetaData) 
```

当我尝试插入大量数据时，有时（插入大量记录时），我得到错误：xml parsing line 1 character 4000 unexpected end of input。

我现在将 MetaData 列的映射更改如下： Map(x => x.MetaData).Length(1000000000);

现在我没有收到任何错误，但我不确定这是否是解决此问题的正确方法。我想得到一些关于这个的好建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:31:53.433

我实际上会改变它如下：

```
Map(x => x.MetaData).Length(Int32.MaxValue); 
```

原因是 2gb 是 xml 列类型的最大长度。如果您不指定，我相信 NHibernate 默认为 4000 字节。

# c# - 使用公共变量将值从静态 void 返回到静态 void - 请提供一些指导

> ID：12458875
> 
> 赞同：1
> 
> 时间：2012-09-17T12:09:34.093
> 
> 标签：c#, int, return

就这样每个人都知道我刚刚开始编写 C#，这是练习。

我在互联网上找到了一个 GuessTheNumberGame 代码，并一直在尝试改进基本游戏以便给出反馈，并且用户可以更改数字。我让程序正常工作，但想将“NumberChange”模块与“代码”方法分开。

我在“GuessTheNumberGame”中创建了一个 Main() 方法，并执行“代码”方法。问题是当我去更改数字范围时，“NumberChange”模块不会更改“Public Static int from”或“Public static int to”的值；因此，数字的范围保持不变。

下面的代码：

```
using System;

namespace GuessThatNumber
{
    class GuessTheNumberGame
    {
        static void Main()
        {
            Code(from, to, new_range);
        }

        public static int new_range = 0;
        public static int from = 1;
        public static int to = 10;

         static void Code(int from, int to, int new_range)
        {
            //int from = 1;   // The range the user will guess from.
            //int to = 10;    //The range the user will guess to.

            int guessedNumber;  //This will hold the value that the user guessed.
            int Counter = 0;    //Counter is used to count the number of guesses the user makes.
            int selection = 0;  //This value is for the selection at the start of the program
           //int new_range = 0;
            bool exit = false;

            while (exit == false)
            {
                Console.WriteLine("What would you like to do?");
                Console.WriteLine("1: Alter the range of guessed numbers? The range is currently from {0} to {1}.", from, to);
                Console.WriteLine("2: Try to guess the number?");
                Console.WriteLine("3: Exit the program?");
                Console.WriteLine("Please enter a number:");
                if (int.TryParse(Console.ReadLine(), out selection))
                {
                    if (selection == 2)
                    {
                        int randomNumber = new Random().Next(from, to);   //Generates a random number between the (from, to) variables.
                        Console.Write("The number is between {0} and {1}. ", from, to);
                        while (true)
                        {
                            Console.Write("Make a guess: ");
                            if (int.TryParse(Console.ReadLine(), out guessedNumber))
                            {
                                if (guessedNumber == randomNumber)
                                {
                                    Console.WriteLine("You guessed the right number!");
                                    if (Counter < 2)
                                    {
                                        Console.WriteLine("You guessed the number in only 1 turn! Amazing!");
                                        Console.WriteLine(" ");
                                    }
                                    else
                                    {
                                        Console.WriteLine("You guessed " + Counter + " times.");
                                        Console.WriteLine(" ");
                                    }
                                    break;
                                }
                                else
                                {
                                    Console.WriteLine("Your guess was too {0}.", (guessedNumber > randomNumber) ? "high" : "low");
                                    Counter = Counter + 1;
                                }
                            }
                            else
                            {
                                Console.WriteLine("Input was not an integer.");
                            }
                        }
                        //Console.WriteLine();
                        //Console.WriteLine("Press any key to exit.");
                        //Console.ReadKey();
                    }
                    else if (selection == 1)
                    {
                        NumberChange(from, to, new_range);
                    }

                    else
                    {
                        exit = true;
                    }
                }
            }
        }

        static int NumberChange(int from, int to, int new_range)
        {
            Console.WriteLine("Please enter the number that the guess will start from.");
            int.TryParse(Console.ReadLine(), out new_range);
            from = new_range;
            Console.WriteLine("Now enter the number that the guess will go to.");
            int.TryParse(Console.ReadLine(), out new_range);
            to = new_range;
            return new_range;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:16:55.287

请阅读有关[在 C# 中通过引用传递参数的信息](http://msdn.microsoft.com/en-us/library/14akc2c7.aspx)。

到目前为止，您的参数是按值传递的。这意味着在程序开始调用时，和`Code()`的当前值被*复制*到参数和中。`public static int from``public static int to`*`from``to`*

 *调用 时也会发生同样的情况`NumberChange()`：参数（局部变量）的值`from`被`to`复制*到*具有`NumberChange()`相同名称的方法的参数中，但是如果在 内部修改了这些值`NumberChange`，则新值永远不会从那里返回；您刚刚修改了局部变量`from`，`to`并且仅存在于相应的方法中。

相反，您可以使用`ref`关键字声明参数：

```
static int NumberChange(ref int from, ref int to, int new_range) 
```

这意味着您也必须使用`ref`相应参数的关键字来调用您的方法：

```
NumberChange(ref from, ref to, new_range); 
```

另外，请注意有关您的`NumberChange()`方法的两个问题：

*   你传入一个`new_range`参数，但你不使用它。实际上，它在您对`TryParse()`. 因此，您可以简单地声明`int new_range`为局部变量，而不是将其作为参数传递。
*   您从该方法返回一个值，但您不使用该值。因此，您可以将您的方法声明为`void`并删除该`return`语句。

最后，如果您希望您的`public static int from`和`public static int to`变量由 更改，请与 类似地`Code()`添加关键字。但是，这对您当前的代码并没有真正有用，因为程序在离开后立即结束，并且根本不会使用新值。`ref``NumberChange()``Code()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:27:28.333

您正在使用静态变量，然后将它们传递给已经可以访问它们的方法。将它们传入本质上会用本地版本覆盖静态版本。

将您的方法更改为：

```
 private static void NumberChange() 
    { 
        int new_range;

        Console.WriteLine("Please enter the number that the guess will start from."); 
        int.TryParse(Console.ReadLine(), out new_range); 
        from = new_range; 
        Console.WriteLine("Now enter the number that the guess will go to."); 
        int.TryParse(Console.ReadLine(), out new_range); 
        to = new_range; 
    } 

    static void Code()
    {

    } 
```

并删除这一行：

```
public static int new_range = 0; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-17T12:15:11.977

如果您通过引用传递变量。然后您传递它们的功能可以更改它们。

像这样的东西

```
static int NumberChange(ref int from, ref int to, ref int new_range)
{
    //Your code here
} 
```

为您的 Code 方法添加相同的内容*

# windows-phone-7.1 - 显示 chrome 的 windows phone 模拟器

> ID：12458877
> 
> 赞同：1
> 
> 时间：2012-09-17T12:09:51.013
> 
> 标签：windows-phone-7.1, windows-phone-7-emulator

如何删除 Windows phone Emulator chrome？我的 windows phone 模拟器在模拟器的右上角显示 chrome。我想删除它。我怎样才能删除？

![在此处输入图像描述](../Images/87d11bb1b7877761409f0373d95ad1ca.png)

我想从右上角删除数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T14:16:07.927

这些数字用于调试时的诊断。在您的 App.xaml.cs 中会有一个块（在构造函数中）：

```
// Show graphics profiling information while debugging.
if (System.Diagnostics.Debugger.IsAttached)
{
    // Display the current frame rate counters.
    Application.Current.Host.Settings.EnableFrameRateCounter = true; 
```

评论留置权或将其设置为 false 将在调试时删除计数器。在任何一种情况下，在调试器之外调用应用程序时都不会显示这些内容。

# javascript - 允许使用 Amazon S3 的 OPTIONS HTTP 方法

> ID：12458879
> 
> 赞同：4
> 
> 时间：2012-09-17T12:09:57.083
> 
> 标签：javascript, amazon-s3, amazon

我在 HTML5 CORS 文件上传器上使用 Amazon S3。它运行良好，但我仍然有一件非常奇怪的事情正在发生。

在**PUT**请求发送文件之前，浏览器总是发送一个**OPTIONS**请求，该请求失败并返回**403 FORBIDDEN**错误代码。

但是文件已正确传输到 S3，所以发生了什么？

请注意，我试图通过启用所有 HTTP 方法来解决我的问题，但它没有奏效..

这是我用于**PUT**请求的标头：

```
AWSAccessKeyId:XXXXXXXXXXXXXXXXXXXXXX
Expires:1347882643
Signature:YYYYYYYYYYYYYYYYYYYYY 
```

还有一些代码：

```
var xhr = new XMLHttpRequest();
// bind the event listener
xhr.upload.addEventListener("progress", progress_listener, false);
// open the XMLHttpRequest 
xhr.open('PUT', signed_url, true);

// when the upload is completed call the callback function if supplied
xhr.onload = function(e) {
    if(typeof callback == "function") {
        callback(this.status == 200, file.name, file_id);
        confirm_upload_success(file_id);
    }
};

// start sending
xhr.send(file); 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T08:22:49.610

**编辑：**亚马逊已修复此错误:-)

**卡尔@AWS / 2012 年 9 月 28 日下午 2:56：**

> 全部，
> 
> 现在应该修复此错误，并且使用带有 CORS 的预签名 url 将成功。
> 
> 谢谢，

* * *

您描述的问题是一个亚马逊错误：事实证明，S3 当前正在验证在 CORS 的“预检”中进行的 OPTION 调用并且失败（可能是因为已为 PUT 请求而不是 OPTION 请求签署了身份验证） .

正如您在此处看到的那样，它已经在他们的雷达上：[CORS 可以处理公共数据，但无法处理预签名的请求](https://forums.aws.amazon.com/thread.jspa?messageID=378235)

**卡尔@AWS / 2012 年 9 月 5 日下午 1:00：**

> 感谢您和其他所有人的报告。您是正确的，预签名请求在初始 OPTIONS 请求中返回错误。我们正在解决这个问题，并希望尽快添加此支持。我没有更改可用性的时间表，但当我有更多信息时，我会更新此线程。如果您有任何后续问题，请告诉我。

所以忽略它，他们会修复它。

# c# - Entity Framework Fluent API 映射简单的一对多关系

> ID：12458887
> 
> 赞同：4
> 
> 时间：2012-09-17T12:10:05.740
> 
> 标签：c#, .net, entity-framework

我有两张桌子：

*   文档（Id、DocumentTypeId、标题、详细信息）
*   文档类型（ID、名称、描述）。

DocumentTypeId 是引用 DocumentTypes 表的外键。即所有文档都应该有一个分配给它们的类型。

我有两个课程：

```
public class Document
{
    public string Id { get; set; }
    public string Title { get; set; }
    public DocumentType DocumentType { get; set; }
} 
```

和

```
public class DocumentType
{
    public string Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
} 
```

我有一个配置

```
internal class DocumentsConfiguration : EntityTypeConfiguration<Document>
{
    public DocumentsConfiguration()
    {
        ToTable("Documents");
        HasKey(document => document.Id);
        Property(document => document.Id).HasColumnName("Id");

        HasRequired(document => document.DocumentType);//????????

        Property(document => document.Title).HasColumnName("Title").IsRequired();
    }
} 
```

这是行不通的。我收到此错误消息：

```
Invalid column name 'DocumentType_Id' 
```

如果我将 fk 列重命名为 DocumentType_Id，那么我会收到以下错误消息：

```
Invalid column name 'DocumentTypeId' 
```

我的问题是如何设置这种一对多的关系？即我想拥有许多具有不同文档类型的文档。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T12:13:44.667

首先进行此更改。导航属性必须是`virtual`：

```
public class Document
{
    public string Id { get; set; }
    public string Title { get; set; }
    public virtual DocumentType DocumentType { get; set; }
} 
```

然后将您的配置更改为：

```
internal class DocumentsConfiguration : EntityTypeConfiguration<Document>
{
    public DocumentsConfiguration()
    {
        HasRequired(document => document.DocumentType)
            .WithMany()
            .Map(e => e.MapKey("DocumentTypeId"));
        Property(document => document.Title).HasColumnName("Title").IsRequired();
        ToTable("Documents");
    }
} 
```

您不需要该字段的`HasKey`or`Property`调用，`Id`因为它们已经按惯例假定。`DocumentId`在此配置中，您的表必须有一列。

# mysql - 如何在 mysql 中使用字符串 \40 进行正确查询

> ID：12458893
> 
> 赞同：1
> 
> 时间：2012-09-17T12:10:30.280
> 
> 标签：mysql, phpmyadmin

我有这个字符串：`alexandre.aba\40gmail.com@gtalk.ofelia.dcc.fc.up.pt`存储在我的数据库`JabberID`中的表中。`USER`

问题是当我执行这个查询时：

```
SELECT * FROM `USER` WHERE JabberID='alexandre.aba\40gmail.com@gtalk.ofelia.dcc.fc.up.pt' 
```

它返回：

> MySQL 返回一个空的结果集（即零行）。

我认为是 \40 导致了问题，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:22:03.317

您应该考虑使用准备好的语句，因为它更安全，但要更正当前字符串，请查看链接[http://dev.mysql.com/doc/refman/5.1/en/string-literals.html](http://dev.mysql.com/doc/refman/5.1/en/string-literals.html)以获取特殊字符列表. 我认为`\`应该替换为`\\`

# java - Java - 从 HashMap 中检索对象

> ID：12458894
> 
> 赞同：1
> 
> 时间：2012-09-17T12:10:40.467
> 
> 标签：java, hashmap

从哈希图中检索值时出现问题。hashmap 声明如下：

```
HashMap<TRpair,A> aTable = new HashMap<TRpair,A>(); 
```

然后我将 112 个值放入映射中，如下所示：

```
aTable.put(new TRpair(new T(<value>),new Integer(<value>)),new Ai()); 
```

其中 Ai 是扩展 A 的 4 个子类中的任何一个。

然后我继续检查地图中的值，如下所示：

```
int i = 0;
for (Map.Entry<TRpair,A> entry : aTable.entrySet()) {
    System.out.println(entry.getKey().toString() + " " + entry.getValue().toString());
    System.out.println(entry.getKey().equals(new TRpair(new T("!"),new Integer(10))));
    i++;
} 
```

正如人们所期望的那样，i 最后保留了值 112，并且正如预期的那样，相等性测试仅对一个条目打印为 true。

但是，当我这样做时

```
System.out.println(aTable.get(new TRpair(new T("!"), new Integer(10)))); 
```

尽管上面的代码片段确认映射中确实有一个条目恰好具有此键，但仍会输出 null 。

如果有帮助，TRpair 类声明如下：

```
public class TRpair {
    private final T t;
    private final Integer r;

    protected TRpair(Integer r1, T t1) {
        terminal = t1;
        row = r1;
    }

    protected TRpair(T t1, Integer r1) {
        t = t1;
        r = r1;
    }

    @Override
    public boolean equals(Object o) {
        TRpair p = (TRpair)o;
        return (p.t.equals(t)) && (p.r.equals(r));
    }

    @Override
    public String toString() {
        StringBuilder sbldr = new StringBuilder();
        sbldr.append("(");
        sbldr.append(t.toString());
        sbldr.append(",");
        sbldr.append(r.toString());
        sbldr.append(")");
        return sbldr.toString();
    }
} 
```

每个 Ai（扩展 A）和 T 类中的 equals() 和 toString() 方法都被类似地覆盖，并且看起来像预期的那样运行。

为什么hashmap aTable输出的值是null，而之前已经确认对应键的值确实在map中？

非常感谢，

弗罗斯科伊。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T12:13:42.630

Hash 集合的键/元素，但如果 euqals 被覆盖，则覆盖 hashCode()。

你可以用。

```
public int hashCode() {
    return t.hashCode() * 31 ^ r.hashCode();
} 
```

顺便说一句：从您的代码看来，在这种`Integer r`情况`null`下使用`int r`更有意义。

从[Object.equals()](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)

> 请注意，每当重写该方法时，通常都需要重写 hashCode 方法，以维护 hashCode 方法的一般约定，即相等的对象必须具有相等的哈希码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:16:39.167

IIRC hashmap 通过相等而不是通过相等查找`hashCode()`，并且由于您没有实现 hashcode，因此您使用与对象指针相等一致的默认实现 - 您需要实现适当的 hashcode 函数，该函数考虑“T”参数以及整数（或不是）

hashCode() 和 equals() 是一致的，但如果您知道自己在做什么，则不是结构上必要的。

# c# - WCF 中的静态集合字典

> ID：12458895
> 
> 赞同：0
> 
> 时间：2012-09-17T12:10:43.433
> 
> 标签：c#, multithreading, wcf, static

我正在编写跟踪类来查找模块/方法的执行时间。我有这样的课

```
public class Trace
    {
        static Dictionary<string, Stopwatch> watches = null;

        static Trace()
        {
            Dictionary<string, Stopwatch> watches = new Dictionary<string, Stopwatch>();
        }

        public static void Start(string key, string losgMessage)
        {
            try
            {
                if (!watches.Keys.Contains(key))
                {
                    Stopwatch watch = new Stopwatch();
                    watch.Start();
                    watches.Add(key, watch);
                }
            }
            catch
            {
            }
        }

        public static void Stop(string key, Object logMessage, string sessionId)
        {
            try
            {

                if (!watches.Keys.Contains(key))
                {
                    Stopwatch watch = watches[key];
                    watch.Stop();
                    //log goes here
                }
            }
            catch
            {
            }
        }
    } 
```

由于 wcf 是多线程环境并且“watches”静态变量范围是应用程序级别，如果有人（来自不同客户端的新 rqst）尝试使用相同的键执行相同的方法，我不会考虑它并跟踪它。那么在这种情况下，最好的选择是什么。任何建议都会有所帮助。

编辑：我目前正在使用密钥附加 sessionId。我不能在没有会话 ID 的情况下解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:34:51.487

> 如果没有会话 ID，我无法解决此问题

从提供的信息来看，我会说不。如果您有并发请求执行相同的函数调用，那么您将获得重复的条目。避免这种情况的唯一方法是确保*所有*键都是唯一的。我实际上认为无论如何都需要使用会话 ID，否则如何将函数映射到请求？

此外，[Dictionary](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)不是线程安全的（至少对于写入而言），我建议使用[ConcurrentDictionary](http://msdn.microsoft.com/en-us/library/dd287191.aspx)。

# android - 安卓、人脸检测、LibC

> ID：12458897
> 
> 赞同：1
> 
> 时间：2012-09-17T12:10:48.017
> 
> 标签：android, face-detection

```
09-17 14:06:18.128: A/libc(27454): Fatal signal 11 (SIGSEGV) at 0x00000010 (code=1) 
```

每当我的应用程序似乎识别出一张脸时，就会弹出这个可爱的错误。

代码：

```
private void startFaceDetection() {
    // Try starting Face Detection
    Camera.Parameters params = mCamera.getParameters();

    // start face detection only *after* preview has started
    if (params.getMaxNumDetectedFaces() > 0) {
        // camera supports face detection, so can start it:
        mCamera.startFaceDetection();
    }
}

@Override
public void onResume() {
    super.onResume();
    mCamera = Camera.open();
    mCamera.setFaceDetectionListener(this);
    mCamera.setDisplayOrientation(90);
} 
```

在surfaceCreated、surfaceChanged中我开始人脸检测。

有谁知道为什么会这样？难道我做错了什么？

打开相机，设置检测侦听器，将相机旋转 90°，使我处于纵向，然后创建用于预览的表面视图后开始检测。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:48:48.063

这里的链接可能会对您有所帮助，这是我找到的关于人脸检测的最佳教程。 [http://www.edumobile.org/android/android-programming-tutorials/face-detection-example-tutorials-in-android/](http://www.edumobile.org/android/android-programming-tutorials/face-detection-example-tutorials-in-android/)和 [http://trivedihardik.wordpress.com/2011/09/13/android-face -检测示例/](http://trivedihardik.wordpress.com/2011/09/13/android-face-detection-example/)

# javascript - 显示不同性质的 JavaScript cookie

> ID：12458898
> 
> 赞同：1
> 
> 时间：2012-09-17T12:10:56.503
> 
> 标签：javascript, cookies

我正在尝试建立一个小型购物车模型。当我将一些物品添加到我的购物车并显示结帐时间的物品时，它将完美运行。但是当我在清除所有浏览器历史记录和 cookie 后尝试时，它会在一段时间内不起作用。但有一段时间我会突然工作。我无法找出原因。

请看一下网址[http://synergiadigital.com/restaurant2/orderFood.php](http://synergiadigital.com/restaurant2/orderFood.php)

提前致谢，

苏尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:14:17.067

也许您在删除所有浏览器数据时打开了最后一个选项卡，然后如果您单击提交按钮，例如您再次创建已删除的 cookie，这可以解释为什么它有时会在删除浏览器数据后工作。

# php - LAMP 站点的奇怪性能测试结果

> ID：12458903
> 
> 赞同：0
> 
> 时间：2012-09-17T12:11:20.457
> 
> 标签：php, mysql, performance

我们在表格中有大量数据的在线应用程序，每个表格通常在 10+ 百万之间。

我面临的性能问题是在显示某些图表和表格的报告模块中加载速度非常慢。

假设总时间=PHP执行时间+MYSQL查询时间+http响应时间

当我再次打开另一个 Web 应用程序的 phpmyadmin 时验证这一点。

如果我单击具有 3 条记录的表（SELECT * from table_name）= 显示的总时间为 1 - 1.5 秒。我可以看到 mysql 查询时间 0.0001 秒

当我单击具有 1000 万条记录的表时 = 总时间为 7 -8 秒，mysql 查询时间再次接近 0.0001 秒

页面加载时间不应该是 mysql 和脚本运行时间的总和吗？为什么当 mysql 行有更大的数据时加载速度很慢，即使 mysql 说它花了同样的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:18:40.463

PHPMyAdmin 使用 LIMIT，所以这是一个无关紧要的比较。

您应该使用 EXPLAIN 来查看为什么您的查询如此缓慢。1000 万是一个小数据集（假设平均行大小），不应该花费接近 7 秒的时间。

此外，您计算执行时间的方法存在缺陷。您应该通过计时各个部分或脚本来衡量。如果 SQL 是您的瓶颈，请开始优化您的表或查询。

# expressionengine - 使用 CE_Image 的 HTTP 错误 500

> ID：12458906
> 
> 赞同：0
> 
> 时间：2012-09-17T12:11:23.807
> 
> 标签：expressionengine

我最近将我的工作站点移至暂存环境，现在，一些频道显示内部服务器错误 (500)，而另一些则完美无缺。似乎什么都没有改变。

是否有一些我错过的设置，或者这可能与登台服务器上的不同 PHP 版本有关？还有什么？

编辑 9/21：

**我想我已经把它缩小到 CE_Image 问题......它发生在每个使用 CE_Image 的模板上**

这是一些模板代码的示例，如果将其删除，则会导致错误消失：

```
 {cf_home_slideshow limit="5"}
        <li data-slide="slide_{row_count}" style="background-image: url({exp:ce_img:pair allow_scale_larger="yes" src="{cf_image}" max_width="956" max_height="429" create_tag="no" crop="yes"}{made}{/exp:ce_img:pair})"> 
            <a href="{cf_link}"><img src="{exp:ce_img:pair allow_scale_larger="yes" src="{cf_image}" max_width="956" max_height="429" create_tag="no" crop="yes"}{made}{/exp:ce_img:pair}" width="956" height="429" /></a>
            <div class="slide">
                {if cf_link}
                <div class="view_project">
                <a href="{cf_link}" class="button">View Project <img src="/assets/imgs/arrow_btn.png"></a>
                </div>
                {/if}
            </div>
        </li>
    {/cf_home_slideshow} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:29:36.030

哦！解决。

未安装 GD 库。当我安装它时，一切都很好！

# java - 如何在 Java 中裁剪具有负裁剪边界的图像？

> ID：12458907
> 
> 赞同：1
> 
> 时间：2012-09-17T12:11:25.537
> 
> 标签：java, image, image-processing, crop

我有一个任意大小的图像，我需要用负边界值裁剪它。

所以，基本上我有图像（1），我想把它裁剪成（2）的尺寸。

```
         (1)
          +---------------+
 (2) | |
  +------------------------------+ |
  | | | |
  | | | |
  | | | |
  | | | |
  +------------------------------+ |
          | |
          +---------------+
```

关于如何在 Java 中解决这个问题的任何想法？

我试过[Scalr](http://www.thebuzzmedia.com/software/imgscalr-java-image-scaling-library/)库，但它不支持负裁剪边界。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T12:25:48.307

此任务不需要库。

您可以通过以下方式创建新图像：

```
BufferedImage newImage = new BufferedImage(width, height, imageType); 
```

然后你可以通过这种方式从旧图像中裁剪出你需要的部分：

```
BufferedImage tempImage = oldImage.getSubimage(0, y, otherWidth, height); 
```

然后，您将 放置`tempImage`在`newImage`：

```
Graphics2D g2 = newImage.createGraphics();
g2.drawImage(tempImage, x, 0, otherWidth, height, null);
g2.dispose(); 
```

*   `width`是 image1 的宽度
*   `height`是 image1 的宽度
*   `x`是 x 轴上 2 个图像之间的顶部交点
*   `y`是 y 轴上 2 个图像之间的顶部交点
*   `otherWidth`是`width - x`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-17T12:14:49.950

您不能将图像放在一个 div 集中以显示为具有设定高度和宽度的块，然后将图像放置在包含 div 的右侧吗？

# java - FTP 连接驱动器

> ID：12458925
> 
> 赞同：0
> 
> 时间：2012-09-17T12:12:36.813
> 
> 标签：java, android

我创建了一个具有 FTP 连接的 Android 应用程序，但是当我启动该应用程序时，它说“不幸的是，您的应用程序必须停止”，但我找不到问题所在。
我试图进入本地被动模式，但它对我没有帮助，我也尝试在我的手机上运行该应用程序，但它给了我同样的信息。

```
import java.io.IOException;
import org.apache.commons.net.ftp.FTPClient;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity implements OnClickListener {
    Button scan;
    String contents;
    String format;
    TextView contentstext;
    TextView formattext;
    FTPClient  ftpclient;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //----------------------FTP-------------
        new FtpTask().execute();
        //ftpclient.enterLocalPassiveMode();
        try {
        ftpclient.changeToParentDirectory();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

        scan=(Button)findViewById(R.id.scanbutton);
        contentstext=(TextView)findViewById(R.id.contentstext);
        formattext=(TextView)findViewById(R.id.formattext);
        scan.setOnClickListener(this);

    }

    private class FtpTask extends AsyncTask<Void, Void, FTPClient> {
        protected FTPClient doInBackground(Void... args) {
            FTPClient  ftp = new FTPClient ();
            try {
                ftp.connect("ftp.drivehq.com");
                ftp.login("zule","****");
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
           return ftp;
        }

        protected void onPostExecute(FTPClient result) {
            Log.v("FTPTask","FTP connection complete");
            ftpclient = result;
        }

    } 
```

这是日志猫：

```
09-17 12:11:30.319: E/AndroidRuntime(1113): FATAL EXCEPTION: main
09-17 12:11:30.319: E/AndroidRuntime(1113): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.market/com.example.market.MainActivity}: java.lang.NullPointerException
09-17 12:11:30.319: E/AndroidRuntime(1113):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
09-17 12:11:30.319: E/AndroidRuntime(1113):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-17 12:11:30.319: E/AndroidRuntime(1113):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-17 12:11:30.319: E/AndroidRuntime(1113):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-17 12:11:30.319: E/AndroidRuntime(1113):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-17 12:11:30.319: E/AndroidRuntime(1113):     at android.os.Looper.loop(Looper.java:137)
09-17 12:11:30.319: E/AndroidRuntime(1113):     at android.app.ActivityThread.main(ActivityThread.java:4424)
09-17 12:11:30.319: E/AndroidRuntime(1113):     at java.lang.reflect.Method.invokeNative(Native Method)
09-17 12:11:30.319: E/AndroidRuntime(1113):     at java.lang.reflect.Method.invoke(Method.java:511)
09-17 12:11:30.319: E/AndroidRuntime(1113):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-17 12:11:30.319: E/AndroidRuntime(1113):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-17 12:11:30.319: E/AndroidRuntime(1113):     at dalvik.system.NativeStart.main(Native Method)
09-17 12:11:30.319: E/AndroidRuntime(1113): Caused by: java.lang.NullPointerException
09-17 12:11:30.319: E/AndroidRuntime(1113):     at com.example.market.MainActivity.onCreate(MainActivity.java:32)
09-17 12:11:30.319: E/AndroidRuntime(1113):     at android.app.Activity.performCreate(Activity.java:4465)
09-17 12:11:30.319: E/AndroidRuntime(1113):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-17 12:11:30.319: E/AndroidRuntime(1113):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
09-17 12:11:30.319: E/AndroidRuntime(1113):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:16:26.507

查看堆栈跟踪。它说你在第 32 行有一个 NullPointerException。
如果我数对了，那就是这一行：

```
ftpclient.changeToParentDirectory(); 
```

请注意，您的班级成员`ftpClient`没有被实例化；所以它仍然是`null`当你尝试调用`changeToParentDirectory()`它时。

在此调用之前添加`ftpClient = new FtpClient( ... )`某处应该可以解决您的问题。为点添加正确的参数。

# javascript - jQuery匿名函数

> ID：12458932
> 
> 赞同：1
> 
> 时间：2012-09-17T12:13:12.030
> 
> 标签：javascript, jquery, function, anonymous

我有一些代码（如下），我为一小段文本编写了一些代码，以便在大约 4 段的循环中淡出。它可以工作，但每当我打开 Web Inspector 时，它只会告诉我这是一个“匿名函数”。这真的很烦人。有谁知道如何修理它？

顺便说一句，它作为匿名函数突出显示的一点是：

```
slides[current].fadeOut("slow");
slides[target].fadeIn("slow"); 
```

代码的完整摘录在这里：

```
$(document).ready(function() {

var About = {
    init: function() {
        var slide_images = $('#widget p')
            slides = new Array(),
            delay = 5,
            current = 0;

        slide_images.each(function(index) {
            current = index;
            slides.push($(this));
        });

        var interval = setInterval(function() {
            target = (current < (slides.length - 1)) ? current + 1 : 0;

            slides[current].fadeOut("slow");
            slides[target].fadeIn("slow");

            current = target;
        }, delay * 750);

    }
} 
About.init();
}); 
```

[我在这里](http://jsfiddle.net/HmRym/)做了一个jsfiddle 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:15:20.130

因为它*是*一个[匿名函数，而不是命名函数](http://docs.jquery.com/Types#Function)。

一种可能的解决方案是将代码滚动到命名函数中，并通过命名`init`选项引用该函数。

# python - 对于频繁搜索，以下哪个数据结构是最好的？

> ID：12458934
> 
> 赞同：0
> 
> 时间：2012-09-17T12:13:25.130
> 
> 标签：python, performance, list, optimization, dictionary

我有一个包含一些内容的文本文件。我需要经常搜索这个内容。我有以下两种选择，哪一种是最好的（通过更快的执行）？

**方法一：**

```
def search_list(search_string):
    if search_word in li:
        print "found at line ",li.indexOf(search_word)+1

if __name__="__main__":
    f=open("input.txt","r")
    li=[]
    for i in f.readlines():
        li.append(i.rstrip("\n"))
    search_list("appendix") 
```

**方法二：**

```
def search_dict(search_string):
    if d.has_key(search_word):
        print "found at line ",d[search_word]

if __name__="__main__":
    f=open("input.txt","r")
    d={}
    for i,j in zip(range(1,len(f.readlines())),f.readlines()):
        d[j.rstrip("\n")]=i
    search_dict("appendix") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:14:28.960

如果你真的经常这样做，那么第二种方法会更快（你已经构建了类似索引的东西）。

稍微调整一下：

```
def search_dict(d, search_string):
    line = d.get(search_string)
    if line:
        print "found at line {}".format(line)
    else:
        print "string not found"

d = {}
with open("input.txt", "r") as f:
    for i, word in enumerate(f.readlines(), 1):
        d[word.rstrip()] = i
search_dict(d, "appendix") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T12:16:56.613

对于频繁搜索，字典肯定更好（前提是你有足够的内存来存储行号），因为键是散列并在 O(1) 操作中查找。但是，您的实现将不起作用。第一个`f.readlines()`将耗尽文件对象，第二个将不会读取任何内容`f.readlines()`。

您正在寻找的是[`enumerate`](http://docs.python.org/library/functions.html#enumerate)：

```
with open('data') as f:
    d = dict((j[:-1],i) for i,j in enumerate(f,1)) 
```

* * *

还应该指出的是，在这两种情况下，如果您使用的函数搜索速度会更快，`try/except`前提是您要查找的索引通常可以找到。（在第一种情况下，它可能会更快，因为`in`它是订单`N`操作，`.index`列表也是如此）。

例如：

```
def search_dict(d, search_string):
    try:
        print "found at line {0}".format(d[search_string])
    except KeyError:
        print "string not found" 
```

或列表：

```
def search_list(search_string):
    try:
        print "found at line {0}".format(li.indexOf(search_word)+1)
    except ValueError:
        print "string not found" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T12:31:16.853

在阅读了 eumiro 和 mgilson 的答案后，我发布了这个。

如果您在命令行上比较您的两种方法，我想您会发现*第一种*方法更快。说第二种方法更快的其他答案，但它们的前提是您将在建立索引后对文件进行多次搜索。如果您从命令行按原样使用它们，则不会。

建立索引比直接搜索字符串*要慢*，但是一旦建立了索引，搜索就可以很快完成，弥补了构建它所花费的时间。如果你只使用一次，这额外的时间就被浪费了，因为当程序完成时，索引被丢弃并且必须在下一次运行时重建。您需要在查询之间将创建的索引保留在内存中才能获得回报。

有几种方法可以做到这一点，一种是制作一个守护程序来保存索引并使用前端脚本来查询它。在谷歌上搜索类似的东西`python daemon client communication`会给你实现这一点的指导——[这是一种方法](https://stackoverflow.com/a/3806342/566644)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T12:17:22.167

第一个是 O(n); 第二个是 O(1)，但它需要搜索键。我会选择第二个。

如果您在文档中进行临时搜索，那么这两种方法都不起作用。为此，您需要使用 Lucene 之类的东西进行解析和索引。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T12:51:04.567

另一个选择是使用 SQLite3 提供的 FTS ...（未经测试并假设您正在寻找全词，而不是单词的子字符串或其他类似的东西）

```
import sqlite3

# create db and table
db = sqlite3.connect(':memory:') # replace with file on-disk?
db.execute('create virtual table somedata using fts4(line)')

# insert the data
with open('yourfile.txt') as fin:
    for lineno, line in enumerate(fin):
        # You could put in a check here I guess...
        if somestring in line:
            print lineo # or whatever....
        # put row into FTS table
        db.execute('insert into somedata (line) values (?)', (line,))
    # or possibly more efficient
    db.executemany('insert into somedata (line) values (?)', fin)
db.commit()

look_for = 'somestring'
matches = db.execute('select rowid from somedata where line match ?', (look_for,) )
print '{} is on lines: {}'.format(look_for, ', '.join(match[0] for match in matches)) 
```

如果您只想要第一行，请添加`limit 1`到查询的末尾。

您还可以查看 using`mmap`映射文件，然后使用该`.find`方法获取字符串的最早偏移量，然后假设它不是`-1`（即未找到 - 比如说 123456），然后执行 mapped_file[:123456].count(' \n') + 1 获取行号。

# c# - 程序后端是Oracle，如何部署

> ID：12458935
> 
> 赞同：0
> 
> 时间：2012-09-17T12:13:34.943
> 
> 标签：c#, oracle11g

运行ac#.net程序的计算机是否有必要连接到开发机器以部署该程序，因为该程序使用oracle数据库保存用户的数据项

如果是：那么请解释在每台目标机器上安装 oracle 数据库的最小占用空间

如果不是：那么目标如何通过这 5-7 个 dll 文件创建和访问 oracle 数据库。

任何回应都将是非常可观的，因为我在这种混乱中感到非常不舒服。谢谢大家....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:22:28.107

我认为你混合了两种不同的东西。应用程序部署与 IT 要求。对于您的应用部署 NO，您不需要与您的客户建立联系，而是使用 ClickOnce 之类的东西。现在，对于您的 IT 要求，如果您的客户需要 Oracle，那么他们需要提供数据库。

他们愿意为每个许可证付费吗？如果没有，为什么不使用云数据库服务？或者像 Oracle Express（免费）这样的轻量级工具。

# click - Kinetic JS - 检测形状边框的点击

> ID：12458943
> 
> 赞同：0
> 
> 时间：2012-09-17T12:14:09.463
> 
> 标签：click, border, shape, kineticjs

我有一个有趣的任务。我需要在 Kinetic JS 中检测对形状边框的点击。在这种情况下，形状是多边形，但如果它适用于任何形状，则可以加分。

我的第一个想法是在形状的边界周围画线，可能不透明度为 1，然后使用他们的点击事件来获取点击。虽然这有点 PT，所以我想我会在这里运行它，看看是否有任何其他想法。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:15:01.913

您可以通过将两个形状组合在一起并将它们放在一组中来做到这一点。第一个形状有边框，第二个没有边框。

```
 var first_poly = new Kinetic.Polygon({
            points: [73, 192, 73, 160, 340, 23, 500, 109, 499, 139, 342, 93],
            fill: '#00D2FF',
            stroke: 'black',
            strokeWidth: 5
        });
        var second_poly = new Kinetic.Polygon({
            points: [73, 192, 73, 160, 340, 23, 500, 109, 499, 139, 342, 93],
            fill: '#00D2FF',
            stroke: 'black',
            strokeWidth: 0
        });

        first_poly.on("click",function(){
            alert("border clicked");
        })
        // add the shape to the layer
        layer.add(first_poly);
        layer.add(second_poly);
        stage.add(layer); 
```

# installation - WixEdit - 自定义 UI 序列

> ID：12458950
> 
> 赞同：2
> 
> 时间：2012-09-17T12:14:20.997
> 
> 标签：installation, wix

我正在使用[WixEdit](http://wixedit.sourceforge.net/)为我们的应用程序创建安装。我正在考虑创建一个自定义对话框以放入 UI 序列中，该序列允许安装程序输入一些配置，这些配置进入`.config`与可执行文件一起安装的文件中。

但是，我在定义 UI 序列时遇到了一些麻烦。我创建了一个带有文本和编辑字段的简单对话框。我想在`ProgressDlg`.

我在 WXS 文件中有以下 XML：

```
<UI>
    <Dialog Id="ProductConfigurationDialog" Width="370" Height="270" Title="[ProductName] Setup">
        <Control Type="Text" Id="TextServerName" Width="60" Height="17" X="8" Y="15" Text="OPC Server:" />
        <Control Type="Edit" Id="EditServerName" Width="151" Height="15" X="79" Y="15" Text="[SERVERNAME]" />
    </Dialog>
    <InstallUISequence>
        <Show Dialog="FatalError" OnExit="error" />
        <Show Dialog="UserExit" OnExit="cancel" />
        <Show Dialog="ExitDialog" OnExit="success" />
        <Show Dialog="PrepareDlg" After="LaunchConditions" />
        <Show Dialog="WelcomeDlg" After="MigrateFeatureStates"><![CDATA[NOT Installed]]></Show>
        <Show Dialog="ResumeDlg" After="WelcomeDlg"><![CDATA[Installed AND (RESUME OR Preselected)]]></Show>
        <Show Dialog="MaintenanceWelcomeDlg" After="ResumeDlg"><![CDATA[Installed AND NOT RESUME AND NOT Preselected]]></Show>
        <Show Dialog="ProductConfigurationDialog" After="MaintenanceWelcomeDlg" />
        <Show Dialog="ProgressDlg" After="ProductConfigurationDialog" />
    </InstallUISequence>
</UI> 
```

所以我的自定义对话框叫做 ProductConfigurationDialog。我已经从 UISample.wxs 复制了 InstallUISequence，但我收到以下错误。

```
C:\delivery\Dev\wix30_public\src\ext\UIExtension\wixlib\FatalError.wxs(29) : error LGHT0170 : The InstallUISequence table contains an action 'FatalError' that is declared in two different locations.  Please remove one of the actions or set the Overridable='yes' attribute on one of their elements.
D:\Sandbox\OPS Wix Install\SetupOPC\SetupOPC\QuorumOPCSetup.wxs(122) : error LGHT0171 : The location of the action related to previous error.
C:\delivery\Dev\wix30_public\src\ext\UIExtension\wixlib\UserExit.wxs(29) : error LGHT0170 : The InstallUISequence table contains an action 'UserExit' that is declared in two different locations.  Please remove one of the actions or set the Overridable='yes' attribute on one of their elements.
D:\Sandbox\OPS Wix Install\SetupOPC\SetupOPC\QuorumOPCSetup.wxs(123) : error LGHT0171 : The location of the action related to previous error.
C:\delivery\Dev\wix30_public\src\ext\UIExtension\wixlib\ExitDialog.wxs(33) : error LGHT0170 : The InstallUISequence table contains an action 'ExitDialog' that is declared in two different locations.  Please remove one of the actions or set the Overridable='yes' attribute on one of their elements.
D:\Sandbox\OPS Wix Install\SetupOPC\SetupOPC\QuorumOPCSetup.wxs(124) : error LGHT0171 : The location of the action related to previous error.
C:\delivery\Dev\wix30_public\src\ext\UIExtension\wixlib\PrepareDlg.wxs(35) : error LGHT0170 : The InstallUISequence table contains an action 'PrepareDlg' that is declared in two different locations.  Please remove one of the actions or set the Overridable='yes' attribute on one of their elements.
D:\Sandbox\OPS Wix Install\SetupOPC\SetupOPC\QuorumOPCSetup.wxs(125) : error LGHT0171 : The location of the action related to previous error.
C:\delivery\Dev\wix30_public\src\ext\UIExtension\wixlib\WelcomeDlg.wxs(29) : error LGHT0170 : The InstallUISequence table contains an action 'WelcomeDlg' that is declared in two different locations.  Please remove one of the actions or set the Overridable='yes' attribute on one of their elements.
D:\Sandbox\OPS Wix Install\SetupOPC\SetupOPC\QuorumOPCSetup.wxs(126) : error LGHT0171 : The location of the action related to previous error.
C:\delivery\Dev\wix30_public\src\ext\UIExtension\wixlib\ProgressDlg.wxs(60) : error LGHT0170 : The InstallUISequence table contains an action 'ProgressDlg' that is declared in two different locations.  Please remove one of the actions or set the Overridable='yes' attribute on one of their elements.
D:\Sandbox\OPS Wix Install\SetupOPC\SetupOPC\QuorumOPCSetup.wxs(130) : error LGHT0171 : The location of the action related to previous error.
C:\delivery\Dev\wix30_public\src\ext\UIExtension\wixlib\ResumeDlg.wxs(46) : error LGHT0170 : The InstallUISequence table contains an action 'ResumeDlg' that is declared in two different locations.  Please remove one of the actions or set the Overridable='yes' attribute on one of their elements.
D:\Sandbox\OPS Wix Install\SetupOPC\SetupOPC\QuorumOPCSetup.wxs(127) : error LGHT0171 : The location of the action related to previous error.
C:\delivery\Dev\wix30_public\src\ext\UIExtension\wixlib\MaintenanceWelcomeDlg.wxs(31) : error LGHT0170 : The InstallUISequence table contains an action 'MaintenanceWelcomeDlg' that is declared in two different locations.  Please remove one of the actions or set the Overridable='yes' attribute on one of their elements.
D:\Sandbox\OPS Wix Install\SetupOPC\SetupOPC\QuorumOPCSetup.wxs(128) : error LGHT0171 : The location of the action related to previous error. 
```

如何在我的 UI 序列中包含额外的自定义对话框？

我刚刚开始使用 WiX，因此欢迎提供任何信息或解决方案。我正在使用最新版本的 WiX 3.6 和 WixEdit 0.7.5.0 来执行此操作。

# javascript - Javascript - 获取键盘输入详细信息

> ID：12458957
> 
> 赞同：-2
> 
> 时间：2012-09-17T12:15:06.590
> 
> 标签：javascript, javascript-events

我有一个文本框，`keyup`上面附加了一个事件监听器，它是一个 javascript 函数，比如说`exec()`。现在，`exec()`如果按下某些键，则不应调用该方法，例如：

```
ctrl+ anything,
shift+anything,
alt+ anything. 
```

有人可以指导我怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:20:39.590

您想检查事件的一些属性。

```
textbox.onkeyup = function (e) {
  if (e.ctrlKey || e.altKey || e.shiftKey || e.metaKey) return;
  exec();
} 
```

# android - 如何从 Facebook 获取有关好友列表的所有详细信息

> ID：12458958
> 
> 赞同：0
> 
> 时间：2012-09-17T12:15:07.100
> 
> 标签：android, facebook, facebook-graph-api

我有这个片段

```
 AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(mFacebook);
                    Bundle bundle = new Bundle();
                    bundle.putString("fields", "birthday");
                    mAsyncRunner.request("me/friends", bundle, new FriendListRequestListener()); 
```

它以某种方式起作用，我的意思是我可以读取所有朋友的 ID。但是在我想阅读所有内容时，我该怎么做？

```
 String _error = null;

        JSONObject json = Util.parseJson(response);
        final JSONArray friends = json.getJSONArray("data");

        for (int i = 0; i < friends.length(); i++) {
            Log.v("id:", "id= "+friends.get(i).toString());
         } 
```

我应该怎么做才能获取有关我朋友的信息并阅读该信息

我想这是关键，这是我找到的示例，它工作正常

```
bundle.putString("fields", "birthday"); 
```

但是当我举个例子时，它不起作用

```
bundle.putString("fields", "friends_relationships"); 
```

----------------- 编辑 1-------------------------

权限代码

```
 mFacebook.authorize(Example.this, new String[] {"offline_access", "user_interests", "friends_interests","friends_relationships","friends_relationship_details"},new DialogListener() {
        @Override
        public void onComplete(Bundle values) {}

        @Override
        public void onFacebookError(FacebookError error) {}

        @Override
        public void onError(DialogError e) {}

        @Override
        public void onCancel() {}
   }); 
```

-------------- 编辑 2 --------------

{"error":{"message":"必须使用活动访问令牌来查询当前用户的信息。","type":"OAuthException","code":2500}}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:19:49.227

在大多数情况下，Graph API 是明智的选择。要检索您的朋友信息，您需要先从用户那里收集一些扩展权限。然后，您可以检索除基本信息之外的更多信息。

以下是与朋友不同类型信息相关的扩展权限列表

```
friends_about_me        
friends_activities      
friends_birthday
friends_checkins        
friends_education_history       
friends_events
friends_games_activity      
friends_groups      
friends_hometown
friends_interests       
friends_likes       
friends_location
friends_notes       
friends_online_presence     
friends_photo_video_tags 
friends_photos      
friends_relationship_details        
friends_relationships
friends_religion_politics       
friends_status      
friends_subscriptions
friends_videos      
friends_website     
friends_work_history 
```

`facebook.authorize(this, new String[] {"offline_access", "user_interests", "friends_interests"},`

**编辑 ：-**

> 如果您的应用需要的不仅仅是这些基本信息才能运行，您必须向用户请求特定权限。这是通过将 String[] 权限传递给 authorize 方法来完成的。以下示例显示了如何请求访问用户的电子邮件地址、获取扩展访问令牌和在一个地方签入用户：

```
facebook.authorize(this, new String[] { "email", "publish_checkins" },

      new DialogListener() {
           @Override
           public void onComplete(Bundle values) {}

           @Override
           public void onFacebookError(FacebookError error) {}

           @Override
           public void onError(DialogError e) {}

           @Override
           public void onCancel() {}
      }
); 
```

[在这里](http://developers.facebook.com/docs/mobile/android/build/#perms)查看更多详细信息。

**编辑 ：-**

```
 mAsyncRunner.request("me/friends?fields=id,name,birthday,relationship_status", new FriendListRequestListener());

JSONObject json = Util.parseJson(response);
final JSONArray friends = json.getJSONArray("data");

for(int i=0;i<friends.length();i++)
{
    JSONObject object = friends.getJSONObject(i);
    Log.i("------------------ Id",object.getString("id"));
    Log.i("------------------ Name",object.getString("name"));
    Log.i("------------------ RelationShip",object.getString("relationship_status"));
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:19:30.287

您的朋友关系有单独的权限。查看[权限文档](https://developers.facebook.com/docs/authentication/permissions/)。

你会想要请求 -

*   `friends_relationships`
*   `friends_relationship_details`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-14T16:19:34.667

到 2015 年 5 月，当 v1.0 facebook Graph API 被弃用时，这已经不再可能了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-17T12:21:55.137

试试这个 ：

```
 Bundle params = new Bundle();
 params.putString("fields", "name, picture, location");
    mAsyncFacebook.request("me/friends",params, new RequestListener(){
        @Override
        public void onComplete(String response, Object object) {
            JSONObject jsonObject = null;
            try {
                jsonObject = new JSONObject(response);
            } catch (JSONException e) {
                Log.d(TAG,"Exception :"+e);
            }

        }
   } 
```

要了解密钥，请参阅此链接：[https ://developers.facebook.com/docs/authentication/permissions/](https://developers.facebook.com/docs/authentication/permissions/)

# objective-c - 过滤从 NSURL 获得的数据

> ID：12458965
> 
> 赞同：0
> 
> 时间：2012-09-17T12:15:36.253
> 
> 标签：objective-c, ios

我知道如何从 NSSURL 获取数据，但我想问我如何过滤数据，例如页面包含文本、图像、视频等，我如何指定仅提取图像。让我们说如果所有数据都一起下载，我该如何过滤它。

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{

    NSLog(@"%@",str);
    [receivedData appendData:data];
} 
```

像这样我如何过滤所有数据是否一起下载。或在下载前指定数据类型。提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:19:23.577

从`NSURLResponse`你可以检查 MIMEType

```
NSURLResponse * httpResponse = (NSURLResponse *) response;
NSString *fileMIMEType = [[httpResponse MIMEType] lowercaseString]; 
```

您可以考虑使用此委托方法`NSURLConnection`

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {

   NSString *mime = [response MIMEType];
   //do something with mime
} 
```

# browser - 如何：Confluence 覆盖浏览器快捷方式（例如 ⌘F）？

> ID：12458966
> 
> 赞同：0
> 
> 时间：2012-09-17T12:15:41.437
> 
> 标签：browser, shortcut, confluence

我刚刚注意到，如果你按 ⌘F，confluence 会打开它自己的搜索框。这怎么可能？我以为你不能覆盖浏览器特定的快捷方式，比如⌘F？有谁知道他们是怎么做到的？（在 Chrome 中测试。）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:25:16.100

我认为唯一可能的方法是调用 a ：

```
event.preventDefault(); 
```

# django - django 身份验证错误

> ID：12458968
> 
> 赞同：0
> 
> 时间：2012-09-17T12:15:50.400
> 
> 标签：django

如何解决这个问题

> 错误：一个或多个模型未验证：auth.permission：'content_type' 与模型类 'django.contrib.contenttypes.models.ContentType' 有关系，它要么未安装，要么是抽象的。

# wcf - System.ServiceModel.Description.WsdlContractConversionContext 类的实例化

> ID：12458970
> 
> 赞同：0
> 
> 时间：2012-09-17T12:16:11.340
> 
> 标签：wcf, c#-4.0, wsdl

对于项目需求，我需要实例化`WsdlContractConversionContext`没有构造函数的实例。

有什么办法可以实现这一目标吗？

`WsdlContractConversionContext`是`System.ServiceModel.Description`命名空间的成员。

**注意：** 确切的要求是，我正在执行`IWsdlExportExtension.ExportContract`and `IWsdlImportExtension.ImportContract`，并且要对这个实现进行单元测试，我需要`WsdlContractConversionContext`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T04:51:10.717

基本上有两种方法可以做到这一点：您可以使用反射来调用类的非公共构造函数（确保向它传递适当的参数）；或者您可以让 WCF 为您创建它，并在您需要的任何地方使用它。被`WsdlContractConversionContext`作为参数之一传递给`IWsdlExportExtension.ExportContract`or 或 an `IWsdlImportExtension.ImportContract`，因此您需要实现两个接口之一（导出通常更容易，因为您不需要使用 WSDL 消费工具），并强制接口被调用（您可能需要为此点击服务元数据端点）。

[http://blogs.msdn.com/b/carlosfigueira/archive/2011/10/06/wcf-extensibility-wsdl-export-extension.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/10/06/wcf-extensibility-wsdl-export-extension.aspx)上的帖子有一个实现 WSDL 导出扩展的示例。

*更新问题中的以下编辑*：WCF 的许多部分都很难进行单元测试。如果您不能使用 WCF 本身来创建实例，那么您唯一的选择就是使用反射。要创建转换上下文类的实例，您需要一个[ContractDescription](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.contractdescription.aspx)实例（您可以为您的合约创建它，但并不容易）和一个[PortType](http://msdn.microsoft.com/en-us/library/system.web.services.description.porttype.aspx)，这更难。恐怕对 WSDL 导出/导入扩展的实现进行单元测试可能不值得。

# java - 带有可选属性的注解

> ID：12458973
> 
> 赞同：5
> 
> 时间：2012-09-17T12:16:24.850
> 
> 标签：java, annotations

我有这样的注释：

```
@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.FIELD, ElementType.METHOD, ElementType.TYPE})
public @interface MyAnnotation {
  String  name();

  Class<InstanceConverter> converter(); 
```

我正在尝试做的是使 name 为必需，转换器为可选。默认情况下，注释的所有属性似乎都是必需的。如何使转换器成为可选？

我已经阅读了两篇关于注释的文章，似乎都没有提到可选属性。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T12:18:23.743

您应该`default`在注解@interface 定义中的字段声明语句的右侧添加一个子句：

```
@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.FIELD, ElementType.METHOD, ElementType.TYPE})
public @interface MyAnnotation {

  String  name(); // mandatory

  Class<InstanceConverter> converter() default InstanceConverter.class; // optional
} 
```

# python - 如何将字符串附加到django中的数据库对象

> ID：12458978
> 
> 赞同：0
> 
> 时间：2012-09-17T12:16:41.913
> 
> 标签：python, django, django-models

嗨，我有以下代码，我在 feature_list = 中有不同的元素`['spa','castle','country_house','coast','golf','boutique','civil','private_hire','city','gay']`。在数据库中，值为 1 或 0。所以我试图检查它们是否为 1 并将它们附加到新数组中。

```
try:
        hotel_main = models.Hotel.objects.get(slug=slug)
    except models.Hotel.DoesNotExist:
        try:
            hotel_main = models.Hotel.objects.get(id=id)
        except models.Hotel.DoesNotExist:
            raise Http404
    feature_list = ['spa','castle','country_house','coast','golf','boutique','civil','private_hire','city','gay']
    hotel_features = []
    for feature in feature_list: 
        if hotel_main.feature == 1: 
            hotel_features.append(feature) 
```

它给了我以下错误：**“酒店”对象没有属性“特征”**

但在我的理解中，特征应该代表数组的字符串......请纠正我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:27:04.743

你在做什么是错误的。试试这个 -

```
hotel_main = models.Hotel.objects.get(slug=slug)
feature_list = ['spa','castle','country_house','coast','golf','boutique','civil','private_hire','city','gay']
hotel_features = []
for feature in feature_list: 
    if getattr(hotel_main, feature, 1):
        hotel_features.append(feature) 
```

您正在执行的操作将给出异常的原因是因为您正在使用 hotel_main 对象动态检查列字段。`.`我认为该功能不适用于字符串文字。因此引入`getattr`.

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:00:43.123

> 但在我的理解中，特征应该代表数组的字符串......请纠正我

您正确地将数组中的字符串分配给`feature`，但是您的问题在于调用`hotel_main.feature`. Python 认为您在 hotel_main 对象上寻找一个名为 'feature' 的属性。要使用当前分配给变量的属性查找属性，您应该使用[Python 的内置 getattr 函数](http://docs.python.org/library/functions.html#getattr)。

```
feature_value = getattr(hotel_main, feature, 0) //default to not having the feature
if feature_value == 1:
    // the rest of your code 
```

# iphone - 在iOS中流畅播放声音

> ID：12458979
> 
> 赞同：0
> 
> 时间：2012-09-17T12:16:44.460
> 
> 标签：iphone, objective-c, xcode, audio

我有一个物体在屏幕上移动，一旦它到达边缘它就会改变方向并播放声音这一切都很好，除了当它播放声音时我冻结了大约半秒钟有什么方法可以让它顺利运行声音和物体的运动？

```
-(void)viewDidLoader
{
NSString *path1 = [[NSBundle mainBundle] pathForResource:@"ballbounce" ofType:@"mp3"];
ballbounce = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path1] error: NULL];
[ballbounce prepareToPlay];
}

-(void) ballcollition 
{
[self ballplaysound]
enemy.center = CGPointMake(enemy.center.x+pos.x,enemy.center.y+pos.y);

    if (enemy.center.x > 328 || enemy.center.x < 0)

    {
        pos.x = -pos.x;

    }
}
-(void)ballplaysound
{
if (enemy.center.x > 328 || enemy.center.x < 0 ||enemy.center.y < 0||enemy.center.y < 300)
[ballbounce play];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:33:22.330

使用系统声音以获得流畅播放的声音。

原始非弧答案：

```
#import <AudioToolbox/AudioToolbox.h>

- (IBAction)soundButton:(id)sender {

NSString *soundPath = [[NSBundle mainBundle] pathForResource:@"alert" ofType:@"wav"];

SystemSoundID soundID;

AudioServicesCreateSystemSoundID((CFURLRef)[NSURL fileURLWithPath: soundPath], &soundID);

AudioServicesPlaySystemSound (soundID);

[soundPath release];

} 
```

针对 ARC 进行了更新，并变成了一个实用函数：

```
- (void)soundPlay:(NSString*)waveName {
    // wavName = @"alert" without any file extension (not alert.wav)

    NSString *soundPath = [[NSBundle mainBundle] pathForResource:waveName ofType: @"wav"];

    SystemSoundID soundID;

    AudioServicesCreateSystemSoundID((__bridge CFURLRef)[NSURL fileURLWithPath: soundPath], &soundID);

    AudioServicesPlaySystemSound (soundID);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:18:35.433

使用 AudioServicesPlaySystemSound()：[https ://developer.apple.com/library/ios/#documentation/AudioToolbox/Reference/SystemSoundServicesReference/Reference/reference.html](https://developer.apple.com/library/ios/#documentation/AudioToolbox/Reference/SystemSoundServicesReference/Reference/reference.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:20:56.063

`AVPlayer`您可以通过简单地将您`mp3`的`caf`格式转换为[此处](http://forums.macrumors.com/showthread.php?t=335683)解释的格式来获得声音“平滑度” 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T14:41:40.243

1）创建 AVAudioPLayer 并将其缓存在您的应用程序初始化代码中，不再调用它也调用准备。

2）所以你包含的方法应该只需要调用 play；

3）如果您仍然可以跳过使用

```
[ballbounce performSelectorOnMainThread:@selector(play) withObject:nil]; 
```

由于您没有包含所有代码并且您显然在进行绘图 - 将播放方法放在队列中可以让绘图代码完成而不会中断。

正确执行此操作可能会解决您的问题。使用 AudioSystemSound 的开销要低得多，但您应该遵循相同的原则，即在应用初始化中准备任何常用声音，而不是在需要它们的确切时间生成它们以避免性能问题。

# javascript - 掌握事件冒泡

> ID：12458980
> 
> 赞同：22
> 
> 时间：2012-09-17T12:16:48.403
> 
> 标签：javascript, jquery, events, event-bubbling

假设我们有一个这样的 HTML 结构

```
<div id="container">
    <div id="nested">
        <span id="someElement"></span>
    </div>
</div> 
```

...我们的目标是`#container` **唯一**的事件监听器！所以，我们绑定一个监听器（jQuery 代码）

```
$("#container").on('click', function(event) {
    alert("container was clicked");
}); 
```

这当然可行，但我对这种方法的问题是，由于事件通常会冒泡，如果我们实际单击`#nested`或，该侦听器也会触发`#someElement`。我目前**仅**在单击时处理单击的解决方案`#container`是`this`与`event.target`

```
$("#container").on('click', function(event) {
    if(this === event.target) {
        alert("container was clicked");
    }
}); 
```

我的问题：这被认为是“最佳实践”吗？jQuery 有没有更好的方法来实现“开箱即用”的相同结果？

实例：http: [//jsfiddle.net/FKX7p/](http://jsfiddle.net/FKX7p/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T01:16:30.153

防止事件冒泡的另一种方法是使用 event.stopPropagation();

```
$("#container").on('click', function(event) {
    alert("container was clicked");
})
.children().on('click', function(event) {
    event.stopPropagation();
}); 
```

我认为使用这种方法的好处是，如果你想将另一个事件附加到嵌套的 div，你可以使用

```
$("#nested").on('click', function(event) {
    event.stopPropagation();
    // some action
});

$("#container").on('click', function(event) {
    alert("container was clicked");
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:55:33.917

我不确定哪个工作更快，但下一个代码会更好是有道理的：

```
$("#container").click(function (e) {
    if (e.target.id && e.target.id !== "container") return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:40:57.070

替代解决方案：

```
$("#container").click(function(){
    alert("container was clicked");
}).children().click(function(e) {
    return false;
}); 
```

但你的解决方案更好。[jsfiddle.net/FKX7p/2/](http://jsfiddle.net/FKX7p/2/)（返回 false）或[jsfiddle.net/FKX7p/3/](http://jsfiddle.net/FKX7p/3/)（使用 stopPropagation）

我更喜欢在您的示例中使用 return （代码变得更易于阅读）：

```
if(this !== event.target) return; 
```

# c# - 从 ListView 控件获取索引项

> ID：12458989
> 
> 赞同：2
> 
> 时间：2012-09-17T12:17:18.247
> 
> 标签：c#, asp.net, listview

**ASPX**

```
<asp:SqlDataSource ID="SqlDataSource5" runat="server" 
       ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
       SelectCommand="SELECT * FROM [Themes] WHERE ([Theme] = @Theme) ORDER BY [Price]">
       <SelectParameters>
            <asp:Parameter DefaultValue="Dubai-and-Beyond" Name="Theme" Type="String" />
       </SelectParameters>                                   
</asp:SqlDataSource>
<asp:ListView ID="theme5" runat="server" DataSourceID="SqlDataSource5">
      <LayoutTemplate>
             <div id="itemPlaceHolderContainer" runat="server">
                 <span id="itemPlaceHolder" runat="server"></span>
             </div>
       </LayoutTemplate>
<ItemTemplate>
    <div>
       <asp:Image ID="Destinationimage" runat="server"
        ImageUrl='<%# Eval("ID", "~/CMS/ThemesHandler.ashx?ID={0}")+"&img=1"%>'  
        AlternateText="Destination_Image"  Height="140px" Width="179px" />
       <asp:Label ID="lblcountry" runat="server" Text='<%#Eval("Country") %>' />
   </div>                                                                                           
   <div class="hotel_name">                                                            
       <asp:Label ID="lblcountry" runat="server" Text='<%#Eval("Country") %>' /></div>
       <asp:ImageButton ID="imgbtn5" runat="server" ImageUrl="images/book_nw.png"  
            OnClick="imgbtn5_Click" AlternateText="get_quote"/></div>
    </ItemTemplate>
    </asp:ListView> 
```

**背后的代码**

```
protected void imgbtn5_Click(object sender, EventArgs e)
{        
    ListViewItem item = theme5.Items[0];
    Label country = (Label)item.FindControl("lblcountry");
    string con = country.Text.ToString();
    Session["country"] = con.ToString();
    Response.Redirect("Get_Quote.aspx");
} 
```

在这里，Theme5 是 Listview。每个列表视图项中都有一个标签和 imgbutton。我想在 imgbutton 点击​​事件上传输标签值。这里的问题是我无法识别列表视图项的行索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:25:33.483

You can make use of [**CommandName**](http://msdn.microsoft.com/de-de/library/system.web.ui.webcontrols.imagebutton.commandname.aspx) and [CommandArgument](http://msdn.microsoft.com/de-de/library/system.web.ui.webcontrols.imagebutton.commandargument.aspx) of your ImageButton within your ListView. You may than access the according item from within your [**ItemCommand**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemcommand.aspx) event.

```
<asp:ImageButton ID="imgbtn5" runat="server" ImageUrl="images/book_nw.png"  
        OnClick="imgbtn5_Click" AlternateText="get_quote"
        CommandName="YOUR_COMMAND_NAME" 
        CommandArgument='<%#Eval("ANY_COLUMN_OF_SOURCE") %>' /> 
```

And within your codeBehind file

```
protected void theme5_OnItemCommand(object sender, ListViewCommandEventArgs e)
{
  if (String.Equals(e.CommandName, "YOUR_COMMAND_NAME"))
  {
   string arg = e.CommandArgument; // do whatever you want
   ListViewDataItem dataItem = (ListViewDataItem)e.Item;

 }
} 
```

# android - Mono For Android 应用内计费

> ID：12458995
> 
> 赞同：1
> 
> 时间：2012-09-17T12:17:33.207
> 
> 标签：android, for-loop, mono, in-app-billing

有没有人有一个在 mandroid 中设置应用程序计费的工作示例我正在使用 JNI 访问 java 类，但我似乎一直坚持在我的一个活动中声明事务处理程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T15:29:37.197

[Github 上](https://github.com/MarkEaton1/Monodroid-InApp-Billing)有一个存储库，声称有你需要的东西，它与[mono 邮件列表上的这些评论](http://mono-for-android.1047100.n5.nabble.com/Code-for-people-to-download-for-in-app-billing-td5711735.html)一起发布：

> 仅对托管的应用内产品进行了真钱测试。所有代码都用于非托管产品和订阅，只需要进行测试。

祝你好运 ：-）

# c# - 如何使用 C# 在 Excel 中选择现有图表

> ID：12458998
> 
> 赞同：4
> 
> 时间：2012-09-17T12:17:42.393
> 
> 标签：c#, visual-studio, excel

我想使用 C# 在 Excel 中选择现有图表。我的 excel 文件中有一个图表对象，我想阅读它并编辑它。我只知道通过做这样的事情来添加新图表

```
ChartObjects ChartObjs = null;
ChartObject ChartObj = null;

 ChartObj = ChartObjs.Add(0, 10, 250, 170); 
```

我正在使用 VS 2005 和 C#

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T10:58:03.713

要在 excel 中选择一个活动图表，可以使用此代码

```
Excel.ChartObject chartObject11 = (Excel.ChartObject)Ws.ChartObjects(1);
chartObject11.Activate(); 
```

基于此可以编辑图表并对其进行格式化。例如更改其数据范围或格式化其颜色或高度或宽度等。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:20:49.053

因此，您已经定义了一个名为 ChartObj 的对象。图表对象容器内的图表是 ChartObj.Chart，图表的元素是 ChartObj.Chart.Element。

您应该打开 Excel 的 VB 编辑器，以便可以在 VB 对象浏览器中检查语法。