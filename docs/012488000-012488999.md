# StackOverflow 问答 12488000-12488999

# ruby-on-rails - Ruby on Rails 教程：第 9.2 章测试失败

> ID：12488000
> 
> 赞同：2
> 
> 时间：2012-09-19T03:03:13.167
> 
> 标签：ruby-on-rails, rspec, rspec-rails, railstutorial.org

我正在阅读最新版本的 Michael Hartl 教程，但我无法通过第 9.2 章中的几个测试：

[http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#sec-authorization](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#sec-authorization)

我已经验证了我的 gem 版本，重新启动了 Rails 服务器，运行了包更新，并重建了测试数据库，但无济于事。我已经从 git 存储库中重新复制，并检查了我认为相关的每一行。在第 9 章之前我没有遇到任何问题，但我正在努力做到彻底，尤其是像这样的网络安全部分，因为我想在完成教程后使用这个模型创建一个新站点。任何帮助都深表感谢。

作为旁注，编辑重定向似乎工作正常，但使用 PUT 的测试失败，即使它们在控制器中使用相同的重定向功能，我不明白为什么它们会表现不同。再次感谢您的帮助。

约翰

失败消息：

> 1) 用户控制器中未登录用户的身份验证授权提交更新操作失败/错误：指定 { response.should redirect_to(signin_path) } 预期响应是重定向到 >http://www.example。 com/signin 但重定向到 >https://www.example.com/users/45 # ./spec/requests/authentication_pages_spec.rb:60:in `block (6 levels) in top (required)'
> 
> 2) 身份验证授权错误用户向 Users#update 操作提交 PUT 请求失败/错误：指定 { response.should redirect_to(root_path) } 预期响应是重定向到 >http://www.example.com/ 但是是重定向到 >https://www.example.com/users/49 # ./spec/requests/authentication_pages_spec.rb:77:in 'top (required)' 中的 `block (5 levels)'

这是身份验证规范，其中 2 个失败的测试来自：require 'spec_helper'

```
describe "Authentication" do

  subject { page }

  describe "signin page" do [...]

  describe "signin" do [...]

  describe "authorization" do

    describe "for non-signed-in users" do
      let(:user) { FactoryGirl.create(:user) }

      describe "in the Users controller" do

        describe "visiting the edit page" do
                          before { visit edit_user_path(user) }
              it { should have_selector('title', text: 'Sign in') }
        end

        describe "submitting to the update action" do
          before { put user_path(user) }
          specify { response.should redirect_to(signin_path) } #<---Failure 1
        end
      end
    end

    describe "as wrong user" do
      let(:user) { FactoryGirl.create(:user) }
      let(:wrong_user) { FactoryGirl.create(:user, email: "wrong@example.com") }
      before { sign_in user }

      describe "visiting Users#edit page" do
        before { visit edit_user_path(wrong_user) }
        it { should_not have_selector('title', text: full_title('Edit user')) }
      end

      describe "submitting a PUT request to the Users#update action" do
        before { put user_path(wrong_user) }
        specify { response.should redirect_to(root_path) } #<--- Failure 2
      end
    end
  end
end 
```

实用程序中的 sign_in 函数：

```
def sign_in(user)
  visit signin_path
  fill_in "Email",    with: user.email
  fill_in "Password", with: user.password
  click_button "Sign in"
  # Sign in when not using Capybara as well.
  cookies[:remember_token] = user.remember_token
end 
```

这是用户控制器：

```
class UsersController < ApplicationController
  before_filter :signed_in_user, only: [:edit, :update]
  before_filter :correct_user,   only: [:edit, :update]

  def show
    @user = User.find(params[:id])
  end

  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      render 'new'
    end
  end

  def edit
  end

  def update
    if @user.update_attributes(params[:user])
      flash[:success] = "Profile updated"
      sign_in @user
      redirect_to @user
    else
      render 'edit'
    end
  end

   private

    def signed_in_user
      redirect_to signin_url, notice: "Please sign in." unless signed_in?
    end

    def correct_user
      @user = User.find(params[:id])
      redirect_to(root_path) unless current_user?(@user)
        end
end 
```

还有我的路线，以防万一：

```
Railstut::Application.routes.draw do
  resources :users
  resources :sessions, only: [:new, :create, :destroy]

  root to: 'static_pages#home'

  match '/signup', to: 'users#new'
  match '/signin',  to: 'sessions#new'
  match '/signout', to: 'sessions#destroy', via: :delete

  match '/help',    to: "static_pages#help"
  match '/about',   to: "static_pages#about"
  match '/contact', to: "static_pages#contact"
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:43:39.760

我想到了。发生这种情况是因为我在应用程序控制器中打开了 SSL。我添加了一个环境测试，现在一切都通过了。

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  include SessionsHelper

  if Rails.env.production? 
    force_ssl
  end
end 
```

# python - Python StructuredProperty 到字典

> ID：12488001
> 
> 赞同：1
> 
> 时间：2012-09-19T03:03:15.277
> 
> 标签：python, google-app-engine

我的模型都有一个将模型转换为字典的方法：

```
def to_dict(model):
    output = {}
    SIMPLE_TYPES = (int, long, float, bool, dict, basestring, list)
    for key, prop in model._properties.iteritems():
        value = getattr(model, key)

        if value is None:
            continue
        if isinstance(value, SIMPLE_TYPES):
            output[key] = value
        elif isinstance(value, datetime.date):
            dateString = value.strftime('%Y-%m-%d %H:%M:%S.%f')[:-3]
            output[key] = dateString
        elif isinstance(value, ndb.Model):
            output[key] = to_dict(value)
        else:
            raise ValueError('cannot encode ' + repr(prop))
    return output 
```

现在，我的一个模型，`X`，有一个`LocalStructuredProperty`：

```
metaData = ndb.LocalStructuredProperty(MetaData, repeated=True) 
```

所以，repeat=True 意味着这将是一个 MetaData 对象的列表。`MetaData`是另一个模型，它也有相同的`to_dict`方法。

但是，当我打电话时`json.dumps(xInstance.to_dict())`，我得到一个例外：

```
raise TypeError(repr(o) + &quot; is not JSON serializable&quot;)
TypeError: MetaData(count=0, date=datetime.datetime(2012, 9, 19, 2, 46, 56, 660000), unique_id=u'8E2C3B07A06547C78AB00DD73B574B8C') is not JSON serializable 
```

我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:48:53.557

如果您想在`to_dict()`序列化为 JSON 之前和之前处理此问题，您只需要在`to_dict()`. 首先，您说`to_dict`上面的定义是一种方法。我会让它委托给一个函数或静态方法，这样你就可以调用一些东西，`ints`而无需先检查类型。这样代码会更好。

```
def coerce(value):
    SIMPLE_TYPES = (int, long, float, bool, basestring)
    if value is None or isinstance(value, SIMPLE_TYPES):
        return value
    elif isinstance(value, datetime.date):
        return value.strftime('%Y-%m-%d %H:%M:%S.%f')[:-3]
    elif hasattr(value, 'to_dict'):    # hooray for duck typing!
        return value.to_dict()
    elif isinstance(value, dict):
        return dict((coerce(k), coerce(v)) for (k, v) in value.items())
    elif hasattr(value, '__iter__'):    # iterable, not string
        return map(coerce, value)
    else:
        raise ValueError('cannot encode %r' % value) 
```

然后只需将其插入您的`to_dict`方法本身：

```
def to_dict(model):
    output = {}
    for key, prop in model._properties.iteritems():
        value = coerce(getattr(model, key))
        if value is not None:
            output[key] = value
    return output 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T03:43:10.880

序列化所需要做的就是实现一个函数

```
def default_encode(obj):
    return obj.to_dict() 
```

然后用

```
json.dumps(X.to_dict(), default=default_encode) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:37:47.347

我想出了如何解决这个问题：在 X 类中，将其添加到 to_dict() 方法中：

```
 ...         
            if value is None:
                continue
            if key == 'metaData':
                array = list()
                for data in value:
                    array.append(data.to_dict())
                output[key] = array
            elif isinstance(value, SIMPLE_TYPES):
                output[key] = value
            ... 
```

虽然我不确定如何自动化这种不基于非键的情况，而是每当遇到自定义对象列表时，它首先将列表中的每个对象转换为 to_dict()。

# deployment - symfony2 应用程序和 capifony 错误

> ID：12488002
> 
> 赞同：1
> 
> 时间：2012-09-19T03:03:16.867
> 
> 标签：deployment, symfony, capifony

我一直在尝试通过 capifony 部署 symfony2 应用程序，但我在 assets:install 步骤中不断收到错误消息。这是我运行 cap deploy 时的输出：

```
--> Updating code base with checkout strategy
--> Creating cache directory...........................✔
--> Creating symlinks for shared directories...........✔
--> Creating symlinks for shared files.................✔
--> Normalizing asset timestamps.......................✔
--> Reinstalling vendors...............................✔
--> Building bootstrap file............................✔
--> Installing bundle's assets.........................✘
*** [deploy:update_code] rolling back
failed: "sh -c 'sudo -p '\\''sudo password: '\\'' sh -c '\\''cd /var/www/example.com/releases/20120919025653 && php app/console assets:install web  --env=prod'\\'''" on stage.example.com 
```

安装包的资产时失败。有人遇到这种情况吗？谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T08:21:22.203

将以下行添加到您的 app/config/deploy.rb 以增加详细程度：

```
logger.level = Logger::MAX_LEVEL 
```

您应该能够看到出了什么问题。

我可以看到你正在使用 sudo。安装了吗？您是否将使用它的权限授予与您一起部署的用户？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:58:08.243

我知道这已经晚了几个月，但这只是让我发现了一个新的服务器设置。

原因是`date.timezone`没有设置设置，这在运行时`php.ini`抛出了`ErrorException``php app/console assets:install web --env=prod`

# linq - Linq To Entities - 获取所有角色的用户信息

> ID：12488003
> 
> 赞同：2
> 
> 时间：2012-09-19T03:03:27.130
> 
> 标签：linq, entity-framework-4, linq-to-entities, asp.net-membership, entity-relationship

我是 Linq 的新手，正在使用新的 MVC 站点对其进行测试。我仍在研究语法和功能，但遇到了一个我无法解决的问题。任何援助将不胜感激。

**情况：**

1 - 我有一个 SQL 数据库设置来使用默认的 ASPNET 成员资格提供程序。保留标准命名约定（aspnet_Users、aspnet_Roles、aspnet_UsersInRole 等）

2 - 我添加了一个名为 Users 的表，它提供了扩展的用户信息。FK 是 aspnet_User UserId（一对一）。

3 - 我有一个名为“客户”的添加表，它提供客户（订购）信息。FK 是用户表中的用户 ID（一对一）。

4 - 我添加了一个名为 CustomerAddress 的表格，它提供客户地址信息。FK 是 Customers 表中的 CustomerId（一对多）。

5 - 我已经建立了一个模型来处理向管理员展示这些信息

**问题：**

1 - 我想在此演示模型中包含应用程序中所有可用角色的列表，以及用户当前是否被分配到该角色。

2 - 我想在此演示模型中包含与用户关联的所有地址的列表

3 - 我不知道如何使用 Linq 查询将此信息返回到我的演示模型

这是我的演示模型（请注意，我目前有角色的属性，但我无法弄清楚如何获取此信息。并且......我不确定类型应该是什么？

```
namespace Lambuth.PresentationModels.ManageUsers
{
public class UserDetail
{
[Editable(false)]
[Key, ScaffoldColumn(false)]
[Display(Name="User ID")]
public Guid UserId { get; set; }

[Required]
[Editable(false)]
[StringLength(16)]
[Display(Name="User Name")]
public string UserName { get; set; }

[Editable(false)]
[ScaffoldColumn(false)]
[StringLength(16)]
[Display(Name = "Lowered User Name")]
public string LoweredUserName { get; set; }

[Required]
[Editable(false)]
[StringLength(256)]
[Display(Name = "Email")]
public string Email { get; set; }

[Editable(false)]
[ScaffoldColumn(false)]
[StringLength(256)]
[Display(Name = "Lowered Email")]
public string LoweredEmail { get; set; }

[Editable(false)]
[StringLength(16)]
[Display(Name = "Site Alias")]
public string SiteAlias { get; set; }

[Required]
[Editable(false)]
[Display(Name = "Is Approved")]
public bool IsApproved { get; set; }

[Required]
[Editable(false)]
[Display(Name = "Is Locked Out")]
public bool IsLockedOut { get; set; }

[Editable(false)]
[Display(Name = "Join Date")]
public DateTime JoinDate { get; set; }

[Editable(false)]
[Display(Name = "Full Name")]
public string FullName
{
  get
  {
    AccountInfoHelpers help = new AccountInfoHelpers();
    return help.GetFullName(this.Salutation, this.FirstName, this.LastName);
  }
  set {/*no implmentation*/}
}

[Editable(false)]
[StringLength(20)]
[Display(Name = "Salutation")]
public string Salutation { get; set; }

[Editable(false)]
[StringLength(50)]
[Display(Name = "First Name")]
public string FirstName { get; set; }

[Editable(false)]
[StringLength(50)]
[Display(Name = "Last Name")]
public string LastName { get; set; }

[Editable(false)]
[Display(Name = "Last Login Date")]
public DateTime LastLoginDate { get; set; }

[Editable(false)]
[Display(Name = "Assigned Roles")]
public virtual ICollection<UserRole> AssignedRoles { get; set; } 
```

} }

这是我目前拥有的 Linq 查询：

```
using (LambuthEntities context = new LambuthEntities())
  {
    var user = (from u in context.aspnet_Users
                join p in context.aspnet_Membership on u.UserId equals p.UserId
                join ux in context.Users on u.UserId equals ux.user_id
                join c in context.Customers on ux.user_id equals c.user_id
                where (ux.user_id == userId)  //userId passed in as param

                select new UserDetail
                {
                  UserId = ux.user_id,
                  UserName = u.UserName,
                  SiteAlias = ux.site_alias,
                  Email = p.Email,
                  Salutation = c.salutation,
                  FirstName = c.first_name,
                  LastName = c.last_name,
                  LastLoginDate = p.LastLoginDate,
                  IsApproved = p.IsApproved,
                  IsLockedOut = p.IsLockedOut
                }).Single();

    return user;
  } 
```

我在正确的轨道上吗？任何意见，将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:45:05.113

我会做一些不同的 Linq 语句。虽然 LinqToSql 可用于生成 SQL 语句并且能够看起来像 SQL 语句（如您在示例中看到的那样），但我倾向于从生成的对象的角度使用它们。

我的意思是，我不是自己处理表之间的连接，而是利用 LinqToSql 生成器已经完成的工作并使用它们的对象。业务对象已经具有链接到相关对象的属性。

这是我将如何执行您的 linq 语句：

```
var user = (from u in context.aspnet_Users
            where (ux.user_id == userId)  //userId passed in as param
            select new UserDetail
            {
              UserId = u.user_id,
              UserName = u.UserName,
              SiteAlias = u.User.site_alias,
              Email = u.aspnet_Membership.Email,
              Salutation = u.User.Customer.salutation,
              FirstName = u.User.Customer.first_name,
              LastName = u.User.Customer.last_name,
              LastLoginDate = u.aspnet_Membership.LastLoginDate,
              IsApproved = u.aspnet_Membership.IsApproved,
              IsLockedOut = u.aspnet_Membership.IsLockedOut,
              AssignedRoles = u.aspnet_Roles.Select(r => r.RoleName).ToList()
            }).Single(); 
```

我不确定 UserRole 类是什么样的，所以我现在只有一个字符串集合。此外，没有您拥有的特定 SQL 方案（您已设置的属性），我偏离了您对对象关系的描述。

此外，在处理从多个表中提取数据的 LinqToSQL 语句时，您要确保进行尽可能少的数据库调用。如果不这样做，您可能会遇到[SELECT n+1 问题](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem)。帮助解决此问题的一种方法是LinqToSql 中的[DataLoadOptions](http://msdn.microsoft.com/en-us/library/system.data.linq.dataloadoptions.aspx)。

# matlab - 只更新一个矩阵元素以进行迭代计算

> ID：12488005
> 
> 赞同：2
> 
> 时间：2012-09-19T03:04:01.153
> 
> 标签：matlab, for-loop, matrix

我有一个 3x3 矩阵 A。我还计算了一个值*g*作为 A 的最大特征值。我试图以 0.10 的增量将所有值的元素 A(3,3) = 0 从零更改为一，并且然后为每个值更新*g 。*我希望所有其他矩阵元素保持不变。

我认为*for 循环*将是执行此操作的方法，但我不知道如何仅更新矩阵中的一个元素而不将此更新存储为一个越来越大的矩阵。如果我在 A(3,3) = *p*处调用元素（从而创建一个新矩阵 Atry），我能够（如下）获得我想要的从 0 到 1 的所有值。我不知道如何更新 Atry 以获得我想要的所有*g*值。正如预期的那样，现在代码的状态将为所有迭代提供相同的*g*值，因为我不知道如何用不同的*p*值更新 Atry 以计算*g*的值。

任何有关如何执行此操作的建议或对我进行网络搜索的行话或短语的建议将不胜感激。

```
A = [1 1 1; 2 2 2; 3 3 0];  
g = max(eig(A));

% This below is what I attempted to achieve my solution
clear all  
p(1) = 0;
Atry = [1 1 1; 2 2 2; 3 3 p];  
g(1) = max(eig(Atry));  

for i=1:100;  
    p(i+1) = p(i)+ 0.01;
    % this makes a one giant matrix, not many  
    %Atry(:,i+1) = Atry(:,i); 
    g(i+1) = max(eig(Atry));  
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T04:16:14.403

这也将完成您想要做的事情：

```
A = @(x) [1 1 1; 2 2 2; 3 3 x];
p = 0:0.01:1;
g = arrayfun(@(x) eigs(A(x),1), p); 
```

分解：

*   定义`A`为匿名函数。这意味着该命令`A(x)`将返回元素等于`A`的矩阵。`(3,3)``x`
*   在向量中定义您要采取的所有步骤`p`
*   `p`然后通过使用`arrayfun`而不是实际循环来“循环”所有元素。

被循环的函数`arrayfun`不是`max(eig(A))`but `eigs(A,1)`，即`1`最大特征值。结果将是相同的，但使用的算法`eigs`更适合您的问题类型——而不是计算*所有*特征值，然后只使用最大值，您*只*计算最大值。不用说，这要快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T03:58:07.397

首先，您在问题文本中说 0.1 增量，但您的代码表明您实际上对 0.01 增量感兴趣？我将在您的意思是 0.01 增量的假设下进行操作。

现在，除此之外，在我对您的问题的解释之后，让我陈述一下我认为您是什么。您想迭代矩阵 A，每次迭代将 A(3, 3) 增加 0.01。鉴于您想要从 0 到 1 的所有值，这意味着 101 次迭代。对于每次迭代，您要计算 A 的最大特征值，并将所有这些特征值存储在某个向量中（我将其称为 gVec）。如果这是正确的，那么我相信您只需要以下内容：

```
% Specify the "Current" A
CurA = [1 1 1; 2 2 2; 3 3 0];  
% Pre-allocate the values we want to iterate over for element (3, 3)
A33Vec = (0:0.01:1)';
% Pre-allocate a vector to store the maximum eigenvalues
gVec = NaN * ones(length(A33Vec), 1);
% Loop over A33Vec
for i = 1:1:length(A33Vec)
    % Obtain the version of A that we want for the current i
    CurA(3, 3) = A33Vec(i);
    % Obtain the maximum eigen value of the current A, and store in gVec
    gVec(i, 1) = max(eig(CurA));
end 
```

**编辑**：最好将此代码粘贴到您的 matlab 编辑器中。堆栈溢出自动文本突出显示并没有带来任何好处:-)

**编辑**：使用罗迪的解决方案（+1） - 它好多了！

# c - C-String的字节大小之间的差异

> ID：12488006
> 
> 赞同：0
> 
> 时间：2012-09-19T03:04:15.213
> 
> 标签：c, char, byte, sizeof

我一直在为我的数据网络课程工作，他们要求我连接这样的标题：

```
struct ip
{
    unsigned long a;
    unsigned long b;
    unsigned int l;
} IP; 
```

还有一条消息，它是一个 char*，让我们说“你好”。

因此，我使用这种方法将这两个连接到一个 char* 中：

```
memcpy(sendBuf, (void*)&sendHeader, sizeof(sendHeader));
memcpy(&sendBuf[sizeof(sendHeader)], readMessage, lengthMessage); 
```

lengthMessage 是消息 +1 的字符数，它是空终止字符。

所以， sendBuf 是这样定义的：

```
char sendBuf[BUFLEN + 1]   // BUF_LEN = 128 
```

然后我把这个 char* 放在一个这样定义的队列中：

```
concurrency::concurrent_queue<char*> IP_in_queue; 
```

所以，我想检查信息是否正确，所以我只检查所有内容：

```
char* s;
IP_in_queue.try_pop(s);
numbytes = sizeof(s);
// Copy from buf to the header
memcpy( (void*)&readHeader, s, sizeof( IP_PACKET_HEADER_T));
// Copy message part
memcpy( sendedString, &s[sizeof(IP_PACKET_HEADER_T)], numbytes - sizeof(IP_PACKET_HEADER_T));
// Append \0 to the end
sendedString[numbytes - sizeof(IP_PACKET_HEADER_T)] = '\0'; 
```

所以，在我排队我的 char* 之前，我们知道 sendBuf 的大小是 129，但是当我检查出队后的字节数时，它的差异太大了，字节数的值是 4，但即使这样我得到正确的信息，所以我不明白，也许我错过了一些重要的事情，但变量 numbytes 至少不应该更多？

我希望我说清楚了，也许有人可以更好地向我解释一下。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:09:30.120

[`sizeof`](http://en.wikipedia.org/wiki/Sizeof)不会告诉你字符串的长度——它会告诉你类型的大小，`char*`在 32 位机器上是 4 个字节。你想要[`strlen`](http://www.manpagez.com/man/3/strlen/)，字符串中的字节数。

但即使这样也不是你想要的。您的结构`IP`中可能包含空值，因此甚至`strlen`不会给您正确的答案。如果你把你的字符串放在第一位而不是最后一个，你可以解决这个问题，但我会考虑这种黑客行为。您应该将大小显式添加到消息的开头。

# c++ - 在eclipse中调试时如何找到向量的大小

> ID：12488008
> 
> 赞同：2
> 
> 时间：2012-09-19T03:05:11.947
> 
> 标签：c++, eclipse, debugging

我想标题是不言自明的。我想在各种情况下监控向量的大小，比如当它被传递给函数时……等等。我只能找到不使用 eclipse 的[这个。](https://stackoverflow.com/questions/8249048/how-to-watch-the-size-of-a-c-stdvector-in-gdb)向量可以是类的成员（如果有帮助）谢谢

# c - 为什么我的可执行文件中的入口点地址是 0x8048330？（0x330 是 .text 部分的偏移量）

> ID：12488010
> 
> 赞同：22
> 
> 时间：2012-09-19T03:05:32.247
> 
> 标签：c, linux, assembly, x86, elf

我编写了一个小程序来添加两个整数，并在使用`readelf -a executable_name`它时将 elf 标头中的入口点地址显示为：

```
Entry point address: 0x8048330 
```

即使在加载程序将其加载到内存中之前，我的可执行文件如何事先知道该地址？ `elf_format.pdf`说这个成员给出了系统首先将控制权转移到的虚拟地址，从而启动了进程。谁能解释一下这个语句的含义以及这里的虚拟地址是什么意思？

还让我知道，可执行文件从哪里获取`0x8048330`作为入口点地址的值。只是为了交叉检查，我编译了另一个程序，为此，入口点地址保持相同的值（在这两种情况下，节的`0x8048330`偏移量）。`.text``0x330`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-21T05:49:44.870

## 对于第一个问题：

您看到的入口点`0x8048330`是一个虚拟内存地址（相反，是物理内存）。这意味着您的主管不必知道要映射的物理地址。（使用加载器加载后）它甚至无法访问物理内存。对于您的程序进程，您的 .text 部分始终从 开始`0x8048330`，然后您的系统（操作系统和硬件）将在运行时将其（虚拟地址）映射到物理内存。

映射和管理物理内存是很多事情，您可以在 Google 上查看更多信息。

## 对于第二个问题

我不确定哪个部分让您感到困惑，所以我会尝试将它们全部覆盖：

*   多个程序可以有相同的入口点吗？

是的，可能有另一个程序具有相同的入口点`0x8048330`。因为这个地址是虚拟的，当你试图同时运行它们时，程序会在运行时映射到不同的物理内存。

*   条目总是`0x8048330`吗？

嗯，Linux 执行者是从 开始的`0x8048000`，但是 .text 节的偏移量与其他节的长度有关。所以不，它可能是`0x8048034`或其他任何东西。

*   为什么总是从 开始`0x8048000`？

我认为这是一种历史，Linux 的设计者出于某种未知甚至随机的原因选择了这个。您可以参考[此线程](https://stackoverflow.com/questions/7187981/whats-the-memory-before-0x08048000-used-for-in-32-bit-machine)以查看该区域下的内容。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-19T19:16:22.167

入口地址由链接编辑器在创建可执行文件时设置。加载程序在将控制权转移到入口地址之前，将程序文件映射到 ELF 标头指定的地址。

要使用具体示例，请考虑以下内容：

```
% file a.out
a.out: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), statically linked, \
    for GNU/Linux 2.6.15, not stripped
% readelf -e a.out
... snip ...
Elf file type is EXEC (Executable file)
Entry point 0x8048170
There are 6 program headers, starting at offset 52

Program Headers:
  Type           Offset   VirtAddr   PhysAddr   FileSiz MemSiz  Flg Align
  LOAD           0x000000 0x08048000 0x08048000 0x7cca6 0x7cca6 R E 0x1000
  LOAD           0x07cf98 0x080c5f98 0x080c5f98 0x00788 0x022fc RW  0x1000
... snip ... 
```

第一个程序头指定文件偏移量 0 处的文件内容应映射到虚拟地址 0x08048000。该段的文件和内存大小为 0x7cca6 字节。该段将被映射为可读和可执行但不可写（它包含程序的代码）。

在 ELF 头中指定的入口点地址是 0x8048170，它位于包含程序代码的区域内。

John Levine所著的“ [Linkers and Loaders](http://linker.iecc.com/) ”一书是一个很好的参考链接编辑器和加载器相关问题的资源。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T08:54:25.677

关于*虚拟地址*问题：

普通用户态应用程序使用*虚拟地址*，这意味着它们不直接访问内存空间。操作系统（借助一些微处理器的特殊功能）将此虚拟地址映射到*物理地址*。

这样，操作系统可以防止应用程序读取/写入其他应用程序内存或操作系统保留内存。此外，这允许以透明的方式为应用程序*分页内存*（使用硬盘作为内存）。

# c++ - 类中带有静态字符串的 C++ 奇怪的编译器错误

> ID：12488013
> 
> 赞同：1
> 
> 时间：2012-09-19T03:06:10.170
> 
> 标签：c++, string, class, static, compiler-errors

我有一个程序在构建失败后在编译器控制台中输出以下内容：

```
1>------ Build started: Project: BlackjackAttack, Configuration: Debug Win32 ------
1>Build started 9/18/2012 10:59:28 PM.
1>InitializeBuildStatus:
1>  Touching "Debug\BlackjackAttack.unsuccessfulbuild".
1>ClCompile:
1>  main.cpp
1>c:\bja\blackjackattack\config.h(5): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\bja\blackjackattack\config.h(5): error C2146: syntax error : missing ';' before identifier 'GAME_NAME'
1>c:\bja\blackjackattack\config.h(5): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>  Display.cpp
1>c:\bja\blackjackattack\config.h(5): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\bja\blackjackattack\config.h(5): error C2146: syntax error : missing ';' before identifier 'GAME_NAME'
1>c:\bja\blackjackattack\config.h(5): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>  Config.cpp
1>c:\bja\blackjackattack\config.h(5): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\bja\blackjackattack\config.h(5): error C2146: syntax error : missing ';' before identifier 'GAME_NAME'
1>c:\bja\blackjackattack\config.h(5): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\bja\blackjackattack\config.cpp(7): error C2039: 'GAME_NAME' : is not a member of 'Config'
1>          c:\bja\blackjackattack\config.h(1) : see declaration of 'Config'
1>  Generating Code...
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:01.32
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

**配置.h：**

```
class Config {
public:
  static const int DEFAULT_CONSOLE_COLOR = 7;

  static const string GAME_NAME;
}; 
```

**配置.cpp：**

```
#include <string>

#include "Config.h"

using std::string;

const string Config::GAME_NAME = "Name"; 
```

**主.cpp：**

```
#include <iostream>

#include "Config.h"
#include "Display.h"

int main(int argc, char *argv[]) {
  return 0;
} 
```

有人可以解释为什么我的程序输出上述错误吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T03:18:34.810

这是由您在整个项目中包含 Config.h 文件的方式引起的。

由于您的 Config 类引用 std::string ，因此您必须在声明类之前包含 std::string 。

在您的 Config.cpp 文件中，您已经解决了冲突，但是您在 main.cpp 文件中没有做同样的事情。

您有两种选择来解决您的问题。

1.  每次包含“Config.h”时，都会包含 string.h 并在其正上方的行上写下“using std::string”。

2.  您在 Config.h 文件的顶部包含 string.h 以及“使用 std::string;” 指示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T03:23:11.287

以上所有内容都不正确，尽管此处看到的#include 模式并不“好”。

问题是在使用 std::string 之前不包括在内。最好包含在 config.cpp 中，然后是 'using namespace std'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T03:23:37.340

*真正的*问题是您正在使用`string`而不是`std::string`在您的 config.h 中。移动东西只会掩盖问题。

您可以将`using std::string`config.h 放在里面，但这是不受欢迎的 - 它会在包含它的任何源中引入不必要的符号。

# sql-server-2008-r2 - sql server 2008 中的数字文字

> ID：12488015
> 
> 赞同：2
> 
> 时间：2012-09-19T03:06:22.947
> 
> 标签：sql-server-2008-r2

sql server 分配给数字文字的类型是什么： 2\. ，即 2 后跟一个点？

我很好奇，因为：

```
select convert(varchar(50), 2.)
union all
select convert(varchar(50), 2.0) 
```

返回：

```
2
2.0 
```

这让我问 2\. 和 2.0 类型之间有什么区别？

Sql server 似乎通过找到可以容纳数字的最小存储类型来根据数字本身为数字文字分配类型。值 1222333 存储为 int，而 1152921504606846975 存储为 big int。

谢谢

编辑：我还想补充一下为什么这很重要。在 sql server 2008 r2 中，select 2/5 返回 0 而 select 2./5 返回 0.4，这是由于 sql server 处理这些类型的方式。在 oracle 和 Access 中选择 2/5（oracle: select 2/5 from dummy）返回 0.4。这就是它应该的方式。我想知道他们是否在 sql server 2012 中修复了这种行为。如果他们这样做了，我会感到惊讶。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T03:35:11.533

这个脚本可能会回答我的问题。2\. 的类型是 numeric(1, 0)。

```
create table dbo.test_type (field sql_variant)
go

delete from dbo.test_type
go

INSERT INTO dbo.test_type
VALUES (2.);

INSERT INTO dbo.test_type
VALUES (2.0);

SELECT field
     , sql_variant_property (field
                           , 'BaseType')
         AS BaseType
     , sql_variant_property (field
                           , 'Precision')
         AS Precision
     , sql_variant_property (field
                           , 'Scale')
         AS Scale
  FROM dbo.test_type 
```

它返回：

```
2     numeric   1   0
2.0   numeric   2   1 
```

这就是为什么当 2.0 转换为 varchar 时结果是 2.0。sql server 似乎记录了精度。

# xcode - asp.net vs. xcode 按钮点击

> ID：12488023
> 
> 赞同：2
> 
> 时间：2012-09-19T03:07:27.673
> 
> 标签：xcode, ibaction

我刚开始学习objective c和iphone开发。来自 asp.net 和 web 开发，我对 xcode 迷失了方向。

在 asp.net 中，您创建一个按钮，然后您只需单击它，它就会将您带到按钮事件。比。Xcode，你创建一个按钮，然后你将不得不在头文件，属性，IBaction 中创建一个出口。然后在实现 (.m) 文件中，为该按钮创建单击事件方法。之后，您必须通过拖动来创建该按钮触摸到该事件的插座引用...

只是出于好奇，有没有像asp.net这样的捷径或更简单的方法？无需创建插座、属性等。如果有任何方法可以消除某些步骤会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:58:26.937

如果您只想执行操作单击按钮，则无需声明 UIButton IBOutlet。

只需简单地将 UIButton 对象拖到您的视图上，然后在您的类中声明并实现 IBAction 方法。然后在动作和按钮之间建立联系。

如果您想与控制器类中的接口对象进行交互，则 xcode 中没有快捷方式，您需要将它们声明为属性并使用 @synthesize 实现

# asp.net-mvc-4 - 删除后 MVC 重新加载页面

> ID：12488025
> 
> 赞同：0
> 
> 时间：2012-09-19T03:08:27.433
> 
> 标签：asp.net-mvc-4

我的删除方法有效，但您必须手动刷新浏览器才能看到它已被删除。我只是想重新加载页面，但我无法让它工作。有人可以告诉我这样做的正确方法吗？

```
public virtual ActionResult Index()
{
    var recipientOrchestrator = new RecipientsOrchestrator();
    RecipientsViewModel model = recipientOrchestrator.GetRecipientsPageData();
    return View(model);
}

[HttpPost]
public virtual ActionResult Delete(int id, int applicationId) 
{
    var recipientOrchestrator = new RecipientsOrchestrator();
    recipientOrchestrator.DeleteRecipient(id, applicationId);

    return Index();

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T03:19:35.717

尝试

```
return RedirectToAction("Index"); 
```

# maven - Jenkins Build 在使用 Maven 编译 java 代码时失败

> ID：12488027
> 
> 赞同：0
> 
> 时间：2012-09-19T03:08:46.690
> 
> 标签：maven, deployment, jenkins

我有一个 Java 应用程序，我可以在 CLI 上使用 maven 编译它，我有几个构建脚本可以将 Java 代码部署到远程服务器并使用 Maven 编译代码，但不幸的是，使用我的构建编译它时构建失败詹金斯的脚本。当我尝试在远程服务器上编译代码时，构建成功。错误日志如下：

```
[WARNING] The POM for org.im4java:im4java:jar:1.3.2 is missing, no dependency information available
[WARNING] The POM for com.aliyun:aliyun-openservices:jar:1.0.0-20120705 is missing, no dependency information available
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] GuestPath Project ................................. SUCCESS [5.183s]
[INFO] guestchat biz module .............................. FAILURE [4.001s]
[INFO] GuestChat Web Common .............................. SKIPPED
[INFO] GuestChat Portal Webapp ........................... SKIPPED
[INFO] guestchat openapi Webapp .......................... SKIPPED
[INFO] guestchat chat server ............................. SKIPPED
[INFO] guestchat service dashboard Webapp ................ SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 10.518s
[INFO] Finished at: Wed Sep 19 10:49:39 CST 2012
[INFO] Final Memory: 9M/23M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project guestchat-biz:
Could not resolve dependencies for project com.guestops.guestchat:guestchat-biz:jar:1.0.0-SNAPSHOT:
The following artifacts could not be resolved:
org.im4java:im4java:jar:1.3.2, com.aliyun:aliyun-openservices:jar:1.0.0-20120705:
Failure to find org.im4java:im4java:jar:1.3.2 in http://repo.maven.apache.org/maven2
was cached in the local repository, resolution will not be reattempted until
the update interval of central has elapsed or updates are forced -> [Help 1] 
```

我希望我足够清楚，非常感谢任何帮助。如果需要，我可以提供更多详细信息..提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T05:02:02.803

我认为您应该尝试执行以下操作：

1.  尝试在本地编译项目，但确保从 maven 存储库下载工件。从根本上你可以通过重命名你的 ~user/.m2/repository 并运行''mvn clean install''来做到这一点

2.  如果它编译 - 您的本地 maven 配置正确，它不是 pom.xml 问题。远程存储库也是在 maven 中配置的。在这种情况下，它是一个 jenkins 问题，或者更确切地说是与 jenkins 安装在同一台机器上的 maven 问题，或者可能是一些与网络/安全相关的问题（比如与远程存储库的连接被防火墙，并且无法从 jenkins 机器访问等等）。

我建议检查该 maven 上的存储库配置，或者如果您想在 jenkins 机器上检查项目的源代码并从该机器手动运行上述第一步。您应该看到代码无法编译并得到与现在相同的错误。

现在，如果在步骤 1 中无法编译项目 - 这只是因为您依赖于缺少的模块并且它们以某种方式呈现在您的本地存储库中（我假设以前它可以在本地编译）并且因为我们'重新运行一个干净的安装本地存储库“被清除”。在这种情况下，您应该找出您的依赖项来自哪里。像

mvn 依赖：失败模块上的树

可以在这里有所帮助。

希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T03:52:44.777

2 种可能的快速解决方案：

1.  如果它在本地编译，则转到 Jenkins 上的构建配置并检查“轮询 SCM”选项以对每个构建进行轮询。

2.  从 Jenkins 服务器上的命令行运行，`mvn clean install`并确保构建后工件在 maven 存储库中可用。如果不是，请下载相关版本的 jar 并将它们放入本地 maven 存储库（在 Jenkins 服务器上）。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T05:14:33.307

这是错误消息告诉您的内容：

> 无法解析以下工件：org.im4java:im4java:jar:1.3.2, com.aliyun:aliyun-openservices:jar:1.0.0-20120705: Failure to find org.im4java:im4java:jar:1.3.2在[http://repo.maven.apache.org/maven2](http://repo.maven.apache.org/maven2)

因此，您的 pom 中有 im4java 1.3.2 和 aliyun-openservices 1.0.0-20120705 的引用，但在一般 maven 存储库中找不到这些。如果您[在 mvnrepository.com 中搜索 im4java](http://mvnrepository.com/search.html?query=im4java)，您会看到[它只有 1.2 版本](http://mvnrepository.com/artifact/org.im4java/im4java)，因此它会失败是合理的。aliyun-openservices 包根本不存在。

那么，这些应该在哪里找到呢？也许您只将它们安装在本地而不是 Jenkins 机器上？

那你可以做的是

1.  （推荐）设置一个 Intranet maven repo，您​​将在其中部署所需的库并引用它或
2.  在运行 Jenkins 的机器上本地安装它们

这两个都应该解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T05:19:44.747

快速浏览一下[maven 存储库](http://mvnrepository.com/artifact/org.im4java/im4java)，只有 1.2.0 版可用，而 1.3.2 版（您正在使用的）不可用。

您的代码是否使用 Maven 构建编译？

我建议您尝试查看 jenkins 实例上的存储库设置

# mysql - 我的触发器语句中的错误

> ID：12488029
> 
> 赞同：2
> 
> 时间：2012-09-19T03:08:58.613
> 
> 标签：mysql, sql, triggers

请帮我找出触发器语句中的错误。

```
CREATE TRIGGER textmain_insert BEFORE INSERT ON textmain
FOR EACH ROW 
BEGIN
    IF NEW.text_create_datetime = '0000-00-00 00:00:00' THEN
        SET NEW.text_create_datetime = NOW();
    END IF
    IF NEW.text_update_datetime = '0000-00-00 00:00:00' THEN
        SET NEW.text_update_datetime = NOW();
    END IF
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:10:20.383

*   更改`delimiter`
*   每次后终止`end if`

尝试，

```
DELIMITER $$
CREATE TRIGGER textmain_insert BEFORE INSERT ON textmain
FOR EACH ROW 
BEGIN
    IF NEW.text_create_datetime = '0000-00-00 00:00:00' THEN
        SET NEW.text_create_datetime = NOW();
    END IF;
    IF NEW.text_update_datetime = '0000-00-00 00:00:00' THEN
        SET NEW.text_update_datetime = NOW();
    END IF;
END $$
DELIMITER ; 
```

# powershell - 获得免费驱动器号

> ID：12488030
> 
> 赞同：13
> 
> 时间：2012-09-19T03:09:01.543
> 
> 标签：powershell

[我在这个答案](https://stackoverflow.com/questions/8799643/map-the-share-to-unassigned-drive-letter-in-powershell/8799797#8799797)中看到了这个`Get-NextFreeDrive`函数，我想知道是否有更有效的方法来做到这一点。似乎链接答案中的函数会继续遍历所有字母，即使它已经找到了一个空闲的驱动器号。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-19T04:23:46.407

在 PowerShell 杂志，我们举办了一场脑筋急转弯比赛，以找出您问题的最短答案。检查这个：

[http://www.powershellmagazine.com/2012/01/12/find-an-unused-drive-letter/](http://www.powershellmagazine.com/2012/01/12/find-an-unused-drive-letter/)

有几个答案，但这是我最喜欢的一个：

```
ls function:[d-z]: -n | ?{ !(test-path $_) } | random 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T07:18:12.370

我的两分钱：

```
get-wmiobject win32_logicaldisk | select -expand DeviceID -Last 1 | 
% { [char]([int][char]$_[0]  + 1) + $_[1] } 
```

有效范围`[CHAR]`为，如果避免意外结果，则`68..90`添加检查。`[char]$_[0] -gt 90`如果某个单元是映射的网络驱动器，它总是返回主要的连续驱动器，例如：

```
c: system drive
d: cd/dvd
r: network mapped drive 
```

命令返回`s:`而不是`e:`[string]

这给出了第一个免费驱动器号（有点难看..有人可以做得更好IMO）：

```
$l = get-wmiobject win32_logicaldisk | select -expand DeviceID  | % { $_[0] }
$s = [int][char]$l[0]
foreach ( $let in $l )
{
    if ([int][char]$let -ne $s)
    {
        $ret = [char]$s +":"
        break
    }

    $s+=1    
}
$ret 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-14T11:52:16.757

我喜欢这种方式，原因如下：

1.  它不需要 WMI，只需要常规的 powershell cmdlet
2.  它非常清晰易读
3.  它可以轻松地让您排除特定的驱动器号
4.  它可以轻松地让您以您想要的任何顺序订购驱动器字母
5.  它找到第一个未使用的驱动器号并对其进行映射，然后完成。

    ```
    $share="\\Server\Share"
    $drvlist=(Get-PSDrive -PSProvider filesystem).Name
    Foreach ($drvletter in "DEFGHIJKLMNOPQRSTUVWXYZ".ToCharArray()) {
        If ($drvlist -notcontains $drvletter) {
            $drv=New-PSDrive -PSProvider filesystem -Name $drvletter -Root $share
            break
        }
    } 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-21T14:41:01.783

```
$taken = Get-WmiObject Win32_LogicalDisk | Select -expand DeviceID
$letter = 65..90 | ForEach-Object{ [char]$_ + ":" }
(Compare-Object -ReferenceObject $letter -DifferenceObject $taken)[1].InputObject 
```

Just for fun to shave an extra line of code (lol). If you wanted to be cloppy as heck you could skip instantiating variables and just pipe those directly into -Ref and -Diff directly, probably ought to be slapped for doing that though. :)

Selects [1] to avoid getting the A: drive just in case that might complicate matters.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-31T16:09:05.753

我必须编写一个适用于 Powershell V2.0 的函数。以下函数将返回下一个可用字母，它也可以获得一个排除字母作为参数：

```
Function AvailableDriveLetter ()
{
param ([char]$ExcludedLetter)
$Letter = [int][char]'C'
$i = @()
#getting all the used Drive letters reported by the Operating System
$(Get-PSDrive -PSProvider filesystem) | %{$i += $_.name}
#Adding the excluded letter
$i+=$ExcludedLetter
while($i -contains $([char]$Letter)){$Letter++}
Return $([char]$Letter)
} 
```

假设您的操作系统报告驱动器号 C:,E:,F: 和 G: 正在使用。

运行：*$First = AvailableDriveLetter*，将导致 $First 包含 'D'

运行：*$Sec = AvailableDriveLetter -ExcludedLetter $First*，将导致 $Sec 包含 'H'

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-02T20:40:01.923

这就是我想出的。我需要从 A 到 Z 的最后一个可用驱动器号。

```
$AllLetters = 65..90 | ForEach-Object {[char]$_ + ":"}
$UsedLetters = get-wmiobject win32_logicaldisk | select -expand deviceid
$FreeLetters = $AllLetters | Where-Object {$UsedLetters -notcontains $_}
$FreeLetters | select-object -last 1 
```

*   这得到一个字母数组 A..Z
*   然后从 WMI 获取已在使用的字母数组
*   接下来使用比较运算符 -notcontains 生成一个未使用的字母数组
*   最后输出一个字母。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-02-09T18:10:51.140

另一种方式...

```
$DriveList = Get-PSDrive -PSProvider filesystem | foreach({($_.Root).Replace(":\","")})
$AllDrives = [char[]]([int][char]'E'..[int][char]'Z')
$NextDriveLetter = ($AllDrives | Where-Object { $DriveList -notcontains $_ } | Select-Object -First 1) + ":" 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-08-09T08:39:26.233

我发现当前接受的答案*(ls function:[dz]: -n | ?{ !(test-path $_) } | random)*确实可以返回诸如 CD 驱动器之类的东西。

我做了这个来排除阵列中的任何本地驱动器：

```
"$([char[]]([char]'D'..[char]'Z')|Where-Object {((Get-WmiObject -Class Win32_LogicalDisk).DeviceID).replace(':','') -notcontains $_ }|Select-Object -first 1):" 
```

它将返回第一个可用的字母。如果您更喜欢最后一个可用的字母，只需更改`Select-Object -first 1`为`Select-Object -last 1`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-03-05T21:46:35.477

I found out that Test-Path evaluates my empty CD-Drive as False, here is another alternative that will compare every letter in the alphabeth until it finds one that doesn't exist in filesystem, then returns that drive as output.

```
$DriveLetter = [int][char]'C'
WHILE((Get-PSDrive -PSProvider filesystem).Name -contains [char]$DriveLetter){$DriveLetter++}
Write-Host "$([char]$Driveletter):" 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-08T11:36:14.167

只需添加一个适用于远程驱动器号的驱动器 $computer 将是输入，$driveletter 将包含远程计算机上的下一个可用驱动器

```
67..90 | foreach {if(((GWmi win32_logicaldisk -computer $computer -Property DeviceID).deviceID).Substring(0,1) -notcontains [char]$_){$driveLetter = [char]$_; break}} 
```

也许可以缩短它，但在那个长度上，它清楚地看到发生了什么

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-06-02T18:29:53.030

这似乎有点像“我也是”的答案，但我注意到所有其他答案都使用`-contains`or`-notcontains`而我只是不喜欢这些解决方案。所以这可能不是非常有效，但我更喜欢它。这段代码（对我来说）的目的是找到我可以用来创建驱动器映射的第一个驱动器。

```
$FreeDrive=Get-PSDrive -PSProvider FileSystem | Select-Object -ExpandProperty Name | Where-Object { ($_ -ne "A") -and ($_ -ne "B") -and ($_ -ne "C") } | ForEach-Object { [System.Convert]::ToByte([System.Convert]::ToChar($_)) }
$FreeDrive=@($FreeDrive)
if (($FreeDrive.Count -eq 1) -and ($FreeDrive[0] -ne "Z")) { $FreeDrive=[System.Convert]::ToChar($FreeDrive[0]+1) }
$j=0
while ((($FreeDrive[$j]+1) -eq $FreeDrive[$j+1]) -and ($j -lt ($FreeDrive.Count-1))) { $j++ }
$FreeDrive=[System.Convert]::ToChar($FreeDrive[$j]+1)
$FreeDrive 
```

# linux - 如何在 Linux 中使用 `find` 命令删除非空目录？

> ID：12488035
> 
> 赞同：9
> 
> 时间：2012-09-19T03:09:57.243
> 
> 标签：linux, bash, find

我有一个充满垃圾的临时目录，它们都以`__temp__`（例如`__temp__user_uploads`）开头，我想用清理功能将其删除。我的功能尝试是运行：

```
find . -name __temp__* -exec rm -rf '{}' \; 
```

如果我运行命令并且有多个`__temp__`目录（`__temp__foo`和`__temp__bar`），我会得到输出：

```
find: __temp__foo: unknown option 
```

如果我运行命令并且只有 1 个`__temp__`目录 ( `__temp__foo`)，它将被删除并得到输出：

```
find: ./__temp__foo: No such file or directory 
```

为什么命令不起作用，为什么这样不一致，我该如何解决？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-19T03:14:20.117

使用深度优先搜索并引用（或转义）shell 元字符`*`：

```
find . -depth -name '__temp__*' -exec rm -rf '{}' \; 
```

**解释**

如果没有该`-depth`标志，您的`find`命令将删除匹配的文件名，然后尝试进入（现在未链接的）目录。`__temp__`这就是单目录案例中“没有这样的文件或目录”的由来。

如果不引用或转义`*`，shell 将扩展该模式，匹配`__temp__whatever`当前工作目录中的多个文件名。这种扩展会混淆`find`，它在其参数列表中的那个点期望选项而不是文件名。

# java - JavaScript 错误：对方法或属性访问的意外调用

> ID：12488039
> 
> 赞同：1
> 
> 时间：2012-09-19T03:10:29.720
> 
> 标签：java, javascript, dojo

调用函数时出错

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T03:28:27.387

可能是因为您使用的是Ajax 调用，请检查您的Ajax 实现API 是否也为IE 处理。他们在 IE 中调用 Ajax 请求的方式完全不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T03:38:21.423

我的大脑可能要融化了……

这已经是很长的几个星期了，但是在你的`newEntry`字符串中，你最后有一个逗号。

如果您正在做任何事情将该组字符串转换为一个对象，在该程序内部的任何位置，并且最后一个条目有一个尾随逗号，那么您的程序可能会在旧 IE 中死掉。

除此之外，请确保您在 IE 中处理“MSXML2.XMLHTTP”ActiveXObject。

# mysql - 在 Rails 2.3 中缓存所有数据库查询

> ID：12488040
> 
> 赞同：0
> 
> 时间：2012-09-19T03:10:48.857
> 
> 标签：mysql, ruby-on-rails, caching, memcached

如何缓存我的所有查询。

第一个请求：

```
@user = User.all 
```

第二个请求

```
@user = User.all # Cached 
```

有什么有用的插件可以做到这一点吗？

我在生产模式。我似乎看不到任何缓存的短语来确认我的 Rails 应用程序正在缓存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:31:13.027

in your config/environments/production.rb

> ```
> config.action_controller.perform_caching = true 
> ```

caching is disabled by default for development and test, and enabled for production.

Query caching is a Rails feature that caches the result set returned by each query so that if Rails encounters the same query again for that request, it will use the cached result set as opposed to running the query against the database again.

For example:

> ```
>  class UsersController < ActionController
> 
>  def index
>    # Run a find query
>    @users = User.all
> 
>    ...
> 
>    # Run the same query again
>   @users = User.all
> 
>    end
> 
>  end 
> ```

The second time the same query is run against the database, it’s not actually going to hit the database. The first time the result is returned from the query it is stored in the query cache (in memory) and the second time it’s pulled from memory.

Check it at your console

> User Load (?ms) SELECT `User`.* FROM `User`
> 
> Completed 200 OK in ?ms (Views: ?ms | ActiveRecord: ?ms)

You can compare it with first time load and second time load.

You can use Dalli gem from [https://github.com/mperham/dalli](https://github.com/mperham/dalli) for store your cache to memcached server.

# android - 从 listView 中选择项目时程序崩溃

> ID：12488041
> 
> 赞同：0
> 
> 时间：2012-09-19T03:11:04.183
> 
> 标签：android, android-listview, android-cursoradapter

每次我尝试从列表中单击时，应用程序都会崩溃。

**ListMovingNames.java**

```
public class ListMovingNames extends Activity {
    ListView MoveList;
    SQLHandler SQLHandlerview;
    Cursor cursor;
    Button addMove;
    EditText etAddMove;
    TextView temp;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.selectorcreatemove);

        addMove = (Button) findViewById(R.id.bAddMove);
        etAddMove = (EditText) findViewById(R.id.etMoveName);
        temp = (TextView) findViewById(R.id.tvTemp);

        MoveList = (ListView) findViewById(R.id.lvMoveItems);
        SQLHandlerview = new SQLHandler(this);

        SQLHandlerview = new SQLHandler(ListMovingNames.this);
        SQLHandlerview.open();

        cursor = SQLHandlerview.getMove();
        startManagingCursor(cursor);

        String[] from = new String[]{SQLHandler.KEY_MOVENAME};
        int[] to = new int[]{R.id.text};

        SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this, R.layout.row, cursor, from, to);
        MoveList.setAdapter(cursorAdapter);
        SQLHandlerview.close();

        addMove.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                    try {
                        String ssmoveName = etAddMove.getText().toString();
                        SQLHandler entry = new SQLHandler(ListMovingNames.this);
                        entry.open();
                        entry.createMove(ssmoveName);
                        entry.close();
                    } catch (SQLException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
            }
        });

        MoveList.setOnItemClickListener(new OnItemClickListener() {

            @SuppressLint("ShowToast")
            public void onItemClick(AdapterView<?> arg0, View view, int position,
                    long id) {
                // TODO Auto-generated method stub
//              String moveset = cursor.getString(position);
//              temp.setText(moveset);
                Toast.makeText(ListMovingNames.this, position, Toast.LENGTH_SHORT);
            }
        });
    }

} 
```

这是我的数据库处理程序。但我确定它没有任何问题，它可能是光标适配器。

**SQLHandler.java**

```
public class SQLHandler {
    public static final String KEY_ROOMMOVEHOLDER = "roommoveholder";
    public static final String KEY_ROOM = "room";

    public static final String KEY_ITEMMOVEHOLDER = "itemmoveholder";
    public static final String KEY_ITEMNAME = "itemname";
    public static final String KEY_ITEMVALUE = "itemvalue";
    public static final String KEY_ROOMHOLDER = "roomholder";

    public static final String KEY_MOVENAME = "movename";
    public static final String KEY_ID1 = "_id";
    public static final String KEY_ID2 = "_id";
    public static final String KEY_ID3 = "_id";
    public static final String KEY_ID4 = "_id";
    public static final String KEY_MOVEDATE = "movedate";

    private static final String DATABASE_NAME = "mymovingfriend";
    private static final int DATABASE_VERSION = 1;

    public static final String KEY_SORTANDPURGE = "sortandpurge";
    public static final String KEY_RESEARCH = "research";
    public static final String KEY_CREATEMOVINGBINDER = "createmovingbinder";
    public static final String KEY_ORDERSUPPLIES = "ordersupplies";
    public static final String KEY_USEITORLOSEIT = "useitorloseit";
    public static final String KEY_TAKEMEASUREMENTS = "takemeasurements";
    public static final String KEY_CHOOSEMOVER = "choosemover";
    public static final String KEY_BEGINPACKING = "beginpacking";
    public static final String KEY_LABEL = "label";
    public static final String KEY_SEPARATEVALUES = "separatevalues";
    public static final String KEY_DOACHANGEOFADDRESS = "doachangeofaddress";
    public static final String KEY_NOTIFYIMPORTANTPARTIES = "notifyimportantparties";

    private static final String DATABASE_TABLE1 = "movingname";
    private static final String DATABASE_TABLE2 = "movingrooms";
    private static final String DATABASE_TABLE3 = "movingitems";
    private static final String DATABASE_TABLE4 = "todolist";

    public static final String CREATE_TABLE_1 = "CREATE TABLE " + DATABASE_TABLE1 + " (" + 
            KEY_ID1 + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
            KEY_MOVEDATE + " TEXT NOT NULL, " + 
            KEY_MOVENAME + " TEXT NOT NULL);";

    public static final String CREATE_TABLE_2 = "CREATE TABLE " + DATABASE_TABLE2 + " (" + 
            KEY_ID2 + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
            KEY_ROOMMOVEHOLDER + " TEXT NOT NULL, " + 
            KEY_ROOM + " TEXT NOT NULL);";

    public static final String CREATE_TABLE_3 = "CREATE TABLE " + DATABASE_TABLE3 + " (" + 
            KEY_ID3 + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
            KEY_ITEMNAME + " TEXT NOT NULL, " + 
            KEY_ITEMVALUE + " TEXT NOT NULL, " +
            KEY_ROOMHOLDER + " TEXT NOT NULL, " +   
            KEY_ITEMMOVEHOLDER + " TEXT NOT NULL);";

    public static final String CREATE_TABLE_4 = "CREATE TABLE " + DATABASE_TABLE4 + " (" + 
            KEY_ID4 + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
            KEY_SORTANDPURGE + " TEXT NOT NULL, " + 
            KEY_RESEARCH + " INTEGER NOT NULL, " +
            KEY_CREATEMOVINGBINDER + " TEXT NOT NULL, " + 
            KEY_ORDERSUPPLIES + " TEXT NOT NULL, " +
            KEY_USEITORLOSEIT + " TEXT NOT NULL, " + 
            KEY_TAKEMEASUREMENTS + " TEXT NOT NULL, " +
            KEY_CHOOSEMOVER + " TEXT NOT NULL, " + 
            KEY_BEGINPACKING + " TEXT NOT NULL, " +
            KEY_LABEL + " TEXT NOT NULL, " + 
            KEY_SEPARATEVALUES + " TEXT NOT NULL, " +
            KEY_DOACHANGEOFADDRESS + " TEXT NOT NULL, " + 
            KEY_NOTIFYIMPORTANTPARTIES + " TEXT NOT NULL);";

    private DbHelper ourHelper;
    private final Context ourContext;
    private SQLiteDatabase ourDatabase;

    private static class DbHelper extends SQLiteOpenHelper{

        public DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            db.execSQL(CREATE_TABLE_1);
            db.execSQL(CREATE_TABLE_2);
            db.execSQL(CREATE_TABLE_3);
            db.execSQL(CREATE_TABLE_4);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldversion, int newversion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE1);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE2);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE3);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE4);
            onCreate(db);
        }
    }

    public SQLHandler(Context c){
        ourContext = c;
    }

    public SQLHandler open() throws SQLException{
        ourHelper = new DbHelper(ourContext);
        ourDatabase = ourHelper.getWritableDatabase();
        return this;
    }

    public void close(){
        ourHelper.close();
    }

    public long createMove(String smovename){
        ContentValues cv = new ContentValues();
        cv.put(KEY_MOVENAME, smovename);
        cv.put(KEY_MOVEDATE, "Not yet set");
        return ourDatabase.insert(DATABASE_TABLE1, null, cv);
    }

    public long addRooms(String sroommoveholder, String sroom){
        ContentValues cv = new ContentValues();
        cv.put(KEY_ROOMMOVEHOLDER, sroommoveholder);
        cv.put(KEY_ROOM, sroom);
        return ourDatabase.insert(DATABASE_TABLE2, null, cv);
    }

    public long addItems(String sitemmoveholder, String sroomholder, String sitemname, String sitemvalue){
        ContentValues cv = new ContentValues();
        cv.put(KEY_ITEMMOVEHOLDER, sitemmoveholder);
        cv.put(KEY_ROOMHOLDER, sroomholder);
        cv.put(KEY_ITEMNAME, sitemname);
        cv.put(KEY_ITEMVALUE, sitemvalue);
        return ourDatabase.insert(DATABASE_TABLE3, null, cv);
    }

    public long todoList(String todoitem){
        ContentValues cv = new ContentValues();
        cv.put(todoitem, "Done");
        return ourDatabase.insert(DATABASE_TABLE4, null, cv);
    }

    public Cursor getMove(){
        String[] columns = new String[]{KEY_ID1, KEY_MOVENAME};
        Cursor cursor = ourDatabase.query(DATABASE_TABLE1, columns, null, null, null, null, null);
        return cursor;
    }

} 
```

谁能指出我做错了什么？

这是日志

```
09-19 03:22:36.596: E/AndroidRuntime(679): FATAL EXCEPTION: main
09-19 03:22:36.596: E/AndroidRuntime(679): android.content.res.Resources$NotFoundException: String resource ID #0x0
09-19 03:22:36.596: E/AndroidRuntime(679):  at android.content.res.Resources.getText(Resources.java:201)
09-19 03:22:36.596: E/AndroidRuntime(679):  at android.widget.Toast.makeText(Toast.java:258)
09-19 03:22:36.596: E/AndroidRuntime(679):  at standard.internet.marketing.mymovingfriend.ListMovingNames$2.onItemClick(ListMovingNames.java:78)
09-19 03:22:36.596: E/AndroidRuntime(679):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
09-19 03:22:36.596: E/AndroidRuntime(679):  at android.widget.ListView.performItemClick(ListView.java:3382)
09-19 03:22:36.596: E/AndroidRuntime(679):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
09-19 03:22:36.596: E/AndroidRuntime(679):  at android.os.Handler.handleCallback(Handler.java:587)
09-19 03:22:36.596: E/AndroidRuntime(679):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-19 03:22:36.596: E/AndroidRuntime(679):  at android.os.Looper.loop(Looper.java:123)
09-19 03:22:36.596: E/AndroidRuntime(679):  at android.app.ActivityThread.main(ActivityThread.java:4627)
09-19 03:22:36.596: E/AndroidRuntime(679):  at java.lang.reflect.Method.invokeNative(Native Method)
09-19 03:22:36.596: E/AndroidRuntime(679):  at java.lang.reflect.Method.invoke(Method.java:521)
09-19 03:22:36.596: E/AndroidRuntime(679):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-19 03:22:36.596: E/AndroidRuntime(679):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-19 03:22:36.596: E/AndroidRuntime(679):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T03:33:41.413

```
Toast.makeText(ListMovingNames.this, position, Toast.LENGTH_SHORT); 
```

第二个参数是资源ID。

```
Toast.makeText(ListMovingNames.this, String.valueOf(position), Toast.LENGTH_SHORT); 
```

用这个方法替换起来。

# iphone - 在 viewDidLoad 中触发旋转

> ID：12488043
> 
> 赞同：0
> 
> 时间：2012-09-19T03:11:26.307
> 
> 标签：iphone, ios, ipad, landscape, portrait

我遇到了一些布局问题，当我以纵向模式启动我的应用程序然后将其转换为横向模式时，之后打开的视图会返回错误的旋转值。

例如，我在从纵向模式旋转后以横向模式打开一个视图，当我记录旋转时它仍然返回纵向模式：

```
NSLog(@"%u", [[UIDevice currentDevice] orientation]); // 4
NSLog(@"%f / %f", self.view.frame.size.width, self.view.frame.size.height); // 748.000000 / 1024.000000 
```

当我将 iPad 旋转到纵向模式并返回横向模式时，它会返回正确的尺寸

```
NSLog(@"%u", [[UIDevice currentDevice] orientation]); // 1
NSLog(@"%f / %f", self.view.frame.size.width, self.view.frame.size.height); // 1024.000000 / 704.000000 
```

我需要做些什么来使新添加的视图适应旋转？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:31:53.540

在 viewWillAppear 方法中设置视图的新框架。这会将所有项目设置为正确的大小，如果您使用导航控制器，这将在推送和弹出视图时起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:02:01.503

这是因为您的视图第一次以纵向模式显示。所以你必须在 viewDidLoad 中手动检查和旋转视图。

```
if (UIInterfaceOrientationIsLandscape(orientation)) 
{

    [self.view setFrame:VIEW_LANDSCAPE_FRAME];

    //do more stuff

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T16:34:35.367

试试[这个链接](https://stackoverflow.com/questions/7263985/manually-set-interface-orientation/7264053#7264053)。它对我有用。最好在 中的链接中执行而`willAppear`不是在`viewDidLoad`. 还要确保您已在`shouldAutorotateToInterfaceOrientation`方法中返回所需的方向，并`UIInterfaceOrientation`在`info.plist`.

# java - 类构造中的奇怪引用传递

> ID：12488044
> 
> 赞同：9
> 
> 时间：2012-09-19T03:11:27.843
> 
> 标签：java, design-patterns

我是一名网络开发人员（游戏开发作为一种爱好），我已经看到自己多次使用以下范例。（无论是在开发服务器架构还是在视频游戏开发工作中。）它看起来真的很丑，但我不知道有什么解决方法。我将在游戏开发中举一个例子，因为这是我最近注意到的地方。这是我一直在制作的RPG。每次发起战斗时，CombatEngine 都会创建两个战斗方。每个 Combatant 都会设置一个与给定 Combatant 相关联的人工智能对象，该对象负责为未收到明确命令的玩家指示动作：

```
public class Combatant {

    ArtificialIntelligence ai = null;

    public Combatant()
    {
        // Set other fields here.

        this.ai = new ArtificialIntelligence(this);
    }

} 
```

这是我不喜欢的：内部字段（ArtificialIntelligence）在构建过程中需要一个 Combatant，因为它需要一些 Combatant 字段来指示适当的操作。因此，为方便起见，我保留了对作为 arg 传递给ArtificialIntelligence 对象的战斗员的引用，但该对象包含对ai 对象本身的引用！它创建了这种奇怪的递归，但我不知道如何解决它。AI 对象需要大量特定于战斗人员的字段，这就是为什么我传入整个对象的原因，但我不喜欢对象如何包含对包含在上层战斗人员中的 ai 字段的引用字段，包含在上层 ai 类中。这是不好的做法，还是我只是想多了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T03:18:15.187

虽然这里没有“设计”问题——它只是你传递的一个参考——一个重要的考虑因素是你应该在传递给另一个类*之前初始化你的所有字段。*`this`否则，其他类将可以访问`this`可能不一致的状态。这有时被称为让`this`构造函数“逃脱”。

不要这样做...

```
public class BadCombatant {

    ArtificialIntelligence ai = null;
    String someField;

    public BadCombatant() {
        this.ai = new ArtificialIntelligence(this);
        // Don't do this - ArtificialIntelligence constructor saw someField as null
        someField = "something"; 
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T07:31:20.300

我肯定会避免循环依赖。在救援中引入了单一责任原则。您可以通过让人工智能在战斗员上运行，从而消除在战斗员中引用人工智能的需要。将依赖于人工智能的 Combatant 中的所有代码移至人工智能。CombatEngine 将执行以下操作：

1.  创建一个与人工智能无关的独立战斗实例。

2.  创建适当的 Artificalintelligence 实例并将之前创建的 Combatant 传递给它。

或者，您可以创建一个名为 CombatController 的新类，该类传递一个 Combatant 和一个人工智能。CombatEngine 将执行以下操作：

1.  创建一个不依赖于任何其他类的 Combatant

2.  创建不依赖于任何其他类的人工智能

3.  创建一个 CombatController 并将 Combatant 和 ArtificialIntelligence 对象传递给它以使用。CombatController 应该公开控制 Combatant 以及处理 AI 行为的方法。

无论您使用上述哪种方法，您都可以消除困扰您的循环依赖。

很抱歉，我无法提供代码示例，因为我正在用手机输入此答案并且格式化很痛苦。

# kdb - kdb 更新语句

> ID：12488046
> 
> 赞同：4
> 
> 时间：2012-09-19T03:11:33.430
> 
> 标签：kdb

看了所有的文档。为什么这不起作用？加载了与 KDB 分发一起提供的 sp.q 示例文件。我无法弄清楚这句话有什么问题。

```
q) \l sp.q
q)trade
date       sym time         price    size
-----------------------------------------
2007.07.23 a   04:48:52.665 73.53941 1000
2007.07.23 a   04:48:52.675 81.73358 600
2007.07.23 a   04:48:52.725 78.79526 900
2007.07.23 a   04:48:52.735 79.59502 600
2007.07.23 b   04:48:52.655 84.59765 200
2007.07.23 b   04:48:52.685 98.36199 500
2007.07.23 b   04:48:52.705 97.49875 700
2007.07.23 c   04:48:52.645 61.48308 900
2007.07.23 c   04:48:52.695 61.53192 700
2007.07.23 c   04:48:52.715 71.95405 200

q)trade:update size:300 from trade where sym=`c,price>71
'par
q)trade
date       sym time         price    size
-----------------------------------------
2007.07.23 a   04:48:52.665 73.53941 1000
2007.07.23 a   04:48:52.675 81.73358 600
2007.07.23 a   04:48:52.725 78.79526 900
2007.07.23 a   04:48:52.735 79.59502 600
2007.07.23 b   04:48:52.655 84.59765 200
2007.07.23 b   04:48:52.685 98.36199 500
2007.07.23 b   04:48:52.705 97.49875 700
2007.07.23 c   04:48:52.645 61.48308 900
2007.07.23 c   04:48:52.695 61.53192 700
2007.07.23 c   04:48:52.715 71.95405 200 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-27T20:59:12.743

`trade`是一个分区表，这就是失败的原因。你到底想做什么？如果要在内存中创建数据的编辑副本，则需要类似

```
q)t:update size:300 from(select from trade)where sym=`c,price>71
q)t
date       sym time         price    size
-----------------------------------------
2007.07.23 a   04:48:52.665 73.53941 1000
2007.07.23 a   04:48:52.675 81.73358 600
2007.07.23 a   04:48:52.725 78.79526 900
2007.07.23 a   04:48:52.735 79.59502 600
2007.07.23 b   04:48:52.655 84.59765 200
2007.07.23 b   04:48:52.685 98.36199 500
2007.07.23 b   04:48:52.705 97.49875 700
2007.07.23 c   04:48:52.645 61.48308 900
2007.07.23 c   04:48:52.695 61.53192 700
2007.07.23 c   04:48:52.715 71.95405 300
q) 
```

如果要更改磁盘上的数据，通常情况下很难。在这种特定情况下，您可以这样做：

```
q){.Q.dd[.Q.par[`:.;x;`trade];`]set update size:300 from(select from trade where date=x)where sym=`c,price>71}2007.07.23
`:./2007.07.23/trade/
q)\l .
q)trade
date       sym time         price    size
-----------------------------------------
2007.07.23 a   04:48:52.665 73.53941 1000
2007.07.23 a   04:48:52.675 81.73358 600
2007.07.23 a   04:48:52.725 78.79526 900
2007.07.23 a   04:48:52.735 79.59502 600
2007.07.23 b   04:48:52.655 84.59765 200
2007.07.23 b   04:48:52.685 98.36199 500
2007.07.23 b   04:48:52.705 97.49875 700
2007.07.23 c   04:48:52.645 61.48308 900
2007.07.23 c   04:48:52.695 61.53192 700
2007.07.23 c   04:48:52.715 71.95405 300
q) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T16:18:40.923

该表按日期分区。您需要指定执行查询的日期，例如

```
trade:update size:300 from trade where sym=`c,price>71, date within (<d1>;<d2>) 
```

# xcode - 有没有大写单词跳转的关键命令

> ID：12488047
> 
> 赞同：0
> 
> 时间：2012-09-19T03:11:39.460
> 
> 标签：xcode

如果我有类似的东西

```
aBigLongVariableThatIWantToChangeASpecificWordIn 
```

有没有一个键命令可以让我从一个单词跳到另一个单词，这样我就可以快速进入并替换一个特定的单词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:19:41.593

在 Xcode 中，Control+Left/Right 将在单个变量名中的大写字母之间跳转。Control+Shift+Left/Right 将选择下一个大写字母。

Option+Left/Right 在完整的单词之间跳转。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-19T03:17:30.320

在 xcode 中，单击 Apple CMD + F ... 然后单击替换 .. 输入您拥有的任何函数并将所有函数替换为新函数名称

# objective-c - GLSL - 如何访问纹理的像素数据是 GLSL 着色器？

> ID：12488049
> 
> 赞同：1
> 
> 时间：2012-09-19T03:12:01.230
> 
> 标签：objective-c, opengl-es, glsl, gpuimage

我想要做的是，在 OpenGL 着色器中访问纹理的像素数据。之后，比较它们的红色分量，以便我可以得到具有最大红色分量的像素的坐标。我可以用 Objective C 和 CPU 处理能力来做到这一点。代码如下所示。

```
- (void)processNewPixelBuffer:(CVPixelBufferRef)pixelBuffer
{
    short maxR = 0;
    NSInteger x = -1, y = -1;

    CVPixelBufferLockBaseAddress(pixelBuffer, 0);    
    height = CVPixelBufferGetHeight(pixelBuffer);
    width = CVPixelBufferGetWidth(pixelBuffer);

    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(pixelBuffer);
    uint8_t *src_buff = CVPixelBufferGetBaseAddress(pixelBuffer);

    short** rawData = malloc(sizeof(short*) * height);
    for (int i = 0; i < height; i++){
        rawData[i] = malloc((sizeof(short) * width));
        for (int j = 0; j < width; j++)
            rawData[i][j] = (short)src_buff[(i + width * j) * 4];
    }

    for (int j = 0; j < height; j++)
    for (int i = 0; i < width; i++)
        if (rawData[i][j] >= maxR) {
            maxR = rawData[i][j];
            x = i;
            y = j;
        }

    free(rawData);
} 
```

所以，我的问题是，我如何使用 GPU 来完成这个过程？我可以在 OpenGL 着色器中将 pixelBuffer 作为纹理。

顶点着色器

```
attribute vec4 position;
attribute vec4 inputTextureCoordinate;

varying vec2 textureCoordinate;

void main()
{
    gl_Position = position;
    textureCoordinate = inputTextureCoordinate.xy;
} 
```

片段着色器

```
varying highp vec2 textureCoordinate;
uniform sampler2D inputImageTexture; //The input sample, in RGBA format

void main()
{
    // Code here
} 
```

如何修改着色器以便找出具有最大红色分量的像素？然后，我想把那个像素变成红色，把其他像素变成白色。那可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T08:20:20.057

你可以做的是使用经典的减少着色器。您将屏幕大小的四边形渲染到输入纹理尺寸一半的纹理/屏幕（最好使用 FBO 完成），然后在片段着色器中计算每个像素的 2x2 纹素块的最大值，输出最大值和其对应的纹理坐标：

```
//no need for any textrue coords, we render screen-aligned anyway
uniform sampler2D inputImageTexture; //The input sample, in RGBA format
uniform vec2 invImageSize; // (1/width, 1/height)

void main()
{
    vec2 coord = (2.0 * floor(gl_FragCoord.xy) + 0.5) * invImageSize;
    float ll = texture2D(inputImageTexture, coord).r;
    float lr = texture2D(inputImageTexture, coord+vec2(invImageSize, 0.0)).r;
    float ul = texture2D(inputImageTexture, coord+vec2(0.0, invImageSize)).r;
    float ur = texture2D(inputImageTexture, coord+vec2(invImageSize, invImageSize)).r;

    vec4 color = vec4(ll, coord, 1.0);
    if(lr > color.r)
        color.xyz = vec3(lr, coord+vec2(invImageSize, 0.0));
    if(ul > color.r)
        color.xyz = vec3(ul, coord+vec2(0.0, invImageSize));
    if(ur > color.r)
        color.xyz = vec3(ur, coord+vec2(invImageSize, invImageSize));
    gl_FragColor = color;
} 
```

然后在下一步中使用此输出纹理作为输入纹理，并再次渲染为一半大小的纹理，直到获得 1x1 纹理（或者更确切地说是可以在 CPU 上处理的小纹理）。但当然，在第二遍和所有后续遍中，您必须输出存储的纹理坐标而不是计算出的坐标。

```
vec2 coord = (2.0 * floor(gl_FragCoord.xy) + 0.5) * invImageSize;
vec4 ll = texture2D(inputImageTexture, coord);
vec4 lr = texture2D(inputImageTexture, coord+vec2(invImageSize, 0.0));
vec4 ul = texture2D(inputImageTexture, coord+vec2(0.0, invImageSize));
vec4 ur = texture2D(inputImageTexture, coord+vec2(invImageSize, invImageSize));

ll = (lr.r > ll.r) ? lr : ll;
ll = (ul.r > ll.r) ? ul : ll;
ll = (ur.r > ll.r) ? ur : ll;
gl_FragColor = ll; 
```

当您最终获得具有最大红色部分的纹理坐标（作为 [0,1] 中的归一化纹理坐标）时，您只需要在此位置绘制一个完全白色的屏幕/纹理大小的四边形和一个红色点。但我不能向您保证，与纯 CPU 解决方案相比，这种多通道算法（与任务的简单性相比相当麻烦）真的会给您带来任何好处。您不能只通过一次就神奇地读取每个输出像素的所有图像像素并确定其颜色，这不是（或应该）使用片段着色器的方式。

**编辑：**顺便说一句。可能不需要将所有数据复制到 CPU 解决方案中的额外临时缓冲区中，至少不需要使用奇怪的数组数组将其分散在内存中，因为应该是单个内存块（或没有直接处理输入时），更不用说大容量内存分配了。因此，在考虑将任何东西转移到 GPU 上之前，首先要修复您的 CPU 解决方案。

# ruby-on-rails - 如何在 Rails 表单中将复选框和标签保持在同一行？

> ID：12488051
> 
> 赞同：48
> 
> 时间：2012-09-19T03:12:14.263
> 
> 标签：ruby-on-rails, forms, twitter-bootstrap, ruby-on-rails-3

我应该怎么做才能将复选框的标签与包含表单的 rails 视图中的复选框保持在同一行？

目前标签在下一行：

```
<div class="span6 offset3">
<%= form_for(@user) do |f| %>
<%= render 'shared/error_messages', object: f.object %>

  <%= f.label :name %>
  <%= f.text_field :name %>

  <br>
  <%= f.check_box :terms_of_service %>
  <%= f.label :terms_of_service, "I agree to the #{link_to 'Terms of Service', policies_path}.".html_safe %>
  <br><br>

  <%= f.submit "Create my account", :class => "btn btn-large btn-primary" %>
<% end %> 
```

谢谢你，亚历山德拉

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-05-14T08:55:51.877

根据[引导维基](https://getbootstrap.com/2.3.2/base-css.html#forms)，它必须是

```
<label class="checkbox">
  <input type="checkbox"> Check me out
</label> 
```

在 Ruby on Rails 中是

```
<%= f.label :terms_of_service do %>
  <%= f.check_box :terms_of_service %>
  I agree to the <%= link_to 'Terms of Service', policies_path %>.
<% end %> 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-19T03:22:08.480

看起来您正在使用 Bootstrap，因此我建议调整您的视图代码以使用 Bootstrap 文档的本节中描述的水平表单布局：[https ://getbootstrap.com/docs/4.3/components/forms/#horizo​​ntal-形式](https://getbootstrap.com/docs/4.3/components/forms/#horizontal-form)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-19T04:23:08.293

```
 <br>
  <%= f.check_box :terms_of_service, :style => "float:left;" %>
  <%= f.label :terms_of_service, "I agree to the #{link_to 'Terms of Service', policies_path}.".html_safe, :style => "float:left;" %>
  <br> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-08-02T22:20:03.913

对答案的评论是正确的，但它假设对元素顺序的理解有一些细微差别。

正确答案如下：

```
<%= f.check_box :terms_of_service %>
<%= f.label :terms_of_service, "I agree to the #{link_to 'Terms of Service', policies_path}.".html_safe
                             , {class: "checkbox inline"} %> 
```

有两件事是必要的：

1.  标签元素上的类
2.  复选框元素必须在标签元素之前。

一旦您看到它工作，这很明显，但是 form_for 的所有其他示例总是在标签之后有输入，您需要将其更改为复选框。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-15T00:31:15.567

```
 <div class="form-inline">
    <%= f.check_box :subscribed, class: 'form-control' %>
    <%= f.label :subscribed, "Subscribe" %>
  </div> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-19T03:26:35.010

前几天我遇到了类似的问题，我使用的是 twitter bootsrap，但我也使用了 simple_form gem。我必须通过 css 修复该细节，这是我的代码：

```
<%=f.input :status, :label => "Disponible?",  :as => :boolean, :label_html => { :class => "pull-left dispo" }%> 
```

CSS：

```
.dispo{
    margin-right:10%;
}
pull-left{
    float:left;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-02-10T14:15:52.947

要保持 i18n 使用 of `label`，您可以使用`t`：

```
<%= f.label :my_field do %>
  <%= f.check_box :my_field %> <%= t 'activerecord.attributes.my_model.my_field' %>
<% end %> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-12-06T16:50:18.957

我会将复选框包裹在标签内。

```
 <%= f.label :terms_of_service do %>
    <%= f.check_box :terms_of_service %>
    I agree to the <%= link_to 'Terms of Service', policies_path %>
  <% end %> 
```

当输入字段被它的标签包裹时，您实际上不需要标签上的 for 属性。标签将在单击时激活复选框而不激活它。所以更简单：

```
 <label>
    <%= f.check_box :terms_of_service %>
    I agree to the <%= link_to 'Terms of Service', policies_path %>
  </label> 
```

通常对于 Rails，这可能是一种解决方法（human_attribute_name 与 i18n 一起使用）：

```
<label>
  <%= f.check_box :terms_of_service %>
  <%= User.human_attribute_name(:terms_of_service) %>
</label> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-11-16T04:33:19.813

对于基本的rails标签：

```
<%= label_tag('retry-all') do %>
  Retry All
  <= check_box_tag("retry-all",false) %>
<% end %> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-19T10:35:32.103

你用`bootstrap`吗？简单的方法是添加`:class => "span1"`f.submit。我确定它成功了！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-04-14T05:47:42.463

对于引导程序 4，在 HAML 中

```
 .form-check
    =f.label :decision_maker, class: 'form-check-label' do
      =f.check_box :decision_maker, class: 'form-check-input'
      Decision Maker 
```

或者

```
 .form-group
    =f.check_box :decision_maker
    =f.label :decision_maker 
```

[https://getbootstrap.com/docs/4.3/components/forms/#default-stacked](https://getbootstrap.com/docs/4.3/components/forms/#default-stacked)

> `<div class="form-check"> <label class="form-check-label"> <input class="form-check-input" type="checkbox" value=""> Option one is this and that&mdash;be sure to include why it's great </label> </div>`

第一种方式是更正确的方式，但第二种方式看起来几乎和 DRYer 相同。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-08-02T20:17:05.870

```
<div class="row"> 
  <div class="col-sm-1">
    <%= f.label :paid? %>
  </div>
  <div class="col-sm-1">
    <%= f.check_box :paid, value: 'false'  %>
  </div>
</div> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-07-22T19:11:32.263

在 Rails 5.2、ruby 2.4 和 bootstrap 4.1.1 上：

```
<%= form.check_box :terms_of_service, label: "your custom label...."%> 
```

为我工作而无需指示内联复选框。

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2016-08-09T07:54:09.270

我使用纯 css/html，这个 css 对我很有用。

```
 input {
    float:left;
    width:auto;
}
label{
    display:inline;
} 
```

# c - 基础教程？Eclipse CDT 中的 Makefile

> ID：12488053
> 
> 赞同：5
> 
> 时间：2012-09-19T03:12:24.083
> 
> 标签：c, eclipse, linker, makefile, eclipse-cdt

有谁知道哪里有制作 Eclipse CDT C 项目的**好教程？**我在 C++ 上见过几个，但没有一个描述我作为插件和 C 编程的绝对初学者需要知道的内容：

1.  当我构建项目时，什么都没有发生。为什么？
2.  当我通过右键单击文件并添加文件名和输出文件名来添加“制作目标”时，它将编译这些文件，但存在未定义的参考错误（在你告诉我之前，是的，我已经在许多 SO问题和许多其他网站，但我还没有找到解决 CDT 上下文中问题的任何解决方案）。为什么会出现链接器错误，我需要做什么才能使 makefile 按正确的顺序简单地编译我的代码（例如“gcc -Wall source1.c source2.c -o client”），以免产生链接器错误？

任何帮助都感激不尽。我觉得 Eclipse CDT 是某种神秘的潘多拉魔盒，每当我打开它时，我的编程世界就会陷入混乱，因为它明显缺乏直接的初学者教程。提前感谢您提供的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:52:36.533

这可能对您有一些帮助：

www.cs.umanitoba.ca/~eclipse/7-EclipseCDT.pdf

# ruby-on-rails - 无法将 gem therubyracer 安装到 twitter-bootstrap-rails

> ID：12488056
> 
> 赞同：1
> 
> 时间：2012-09-19T03:12:59.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem, therubyracer

我正在尝试安装：

```
gem "twitter-bootstrap-rails", :group => :assets 
```

但是当我使用**bundle install**时，它发生了：

```
$ bundle install
Fetching gem metadata from https://rubygems.org/.......
Using rake (0.9.2.2)
Using i18n (0.6.1)
Using multi_json (1.3.6)
Using activesupport (3.2.8)
Using builder (3.0.2)
Using activemodel (3.2.8)
Using erubis (2.7.0)
Using journey (1.0.4)
Using rack (1.4.1)
Using rack-cache (1.2)
Using rack-test (0.6.1)
Using hike (1.2.1)
Using tilt (1.3.3)
Using sprockets (2.1.3)
Using actionpack (3.2.8)
Using mime-types (1.19)
Using polyglot (0.3.3)
Using treetop (1.4.10)
Using mail (2.4.4)
Using actionmailer (3.2.8)
Using arel (3.0.2)
Using tzinfo (0.3.33)
Using activerecord (3.2.8)
Using activeresource (3.2.8)
Using authlogic (3.1.3)
Using coffee-script-source (1.3.3)
Using execjs (1.4.0)
Using coffee-script (2.2.0)
Using rack-ssl (1.3.2)
Using json (1.7.5)
Using rdoc (3.12)
Using thor (0.16.0)
Using railties (3.2.8)
Using coffee-rails (3.2.2)
Using commonjs (0.2.6)
Using jquery-rails (2.1.2)
Using less (2.2.2)
Using less-rails (2.2.3)
Using libv8 (3.3.10.4)
Using metaclass (0.0.1)
Using mocha (0.12.3)
Using mysql2 (0.3.11)
Using nifty-generators (0.4.6)
Using bundler (1.2.0.rc.2)
Using rails (3.2.8)
Using sass (3.2.1)
Using sass-rails (3.2.5)
Installing therubyracer (0.10.2) with native extensions
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        c:/Ruby193/bin/ruby.exe extconf.rb
creating Makefile

make
generating v8-i386-mingw32.def
compiling rr.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo
r C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid
for C/ObjC but not for C++
rr.cpp: In function 'VALUE rr_define_finalizer(VALUE, void*, VALUE)':
rr.cpp:48:1: warning: no return statement in function returning non-void
In file included from rr.cpp:3:0:
v8_handle.h: In function 'v8::Persistent<T>& rr_v8_handle(VALUE) [with T = v8::Value,
 VALUE = long unsigned int]':
rr.cpp:159:37:   instantiated from here
v8_handle.h:43:71: warning: dereferencing type-punned pointer will break strict-alias
ing rules
g++.exe: unrecognized option '-rdynamic'
compiling v8.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo
r C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid
for C/ObjC but not for C++
g++.exe: unrecognized option '-rdynamic'
compiling v8_array.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo
r C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid
for C/ObjC but not for C++
In file included from v8_array.cpp:1:0:
v8_handle.h: In function 'v8::Persistent<T>& rr_v8_handle(VALUE) [with T = v8::Array,
 VALUE = long unsigned int]':
v8_array.cpp:13:36:   instantiated from here
v8_handle.h:43:71: warning: dereferencing type-punned pointer will break strict-alias
ing rules
g++.exe: unrecognized option '-rdynamic'
compiling v8_callbacks.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo
r C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid
for C/ObjC but not for C++
g++.exe: unrecognized option '-rdynamic'
compiling v8_context.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo
r C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid
for C/ObjC but not for C++
In file included from v8_context.cpp:2:0:
v8_handle.h: In function 'v8::Persistent<T>& rr_v8_handle(VALUE) [with T = v8::Contex
t, VALUE = long unsigned int]':
v8_context.cpp:15:39:   instantiated from here
v8_handle.h:43:71: warning: dereferencing type-punned pointer will break strict-alias
ing rules
v8_handle.h: In function 'v8::Persistent<T>& rr_v8_handle(VALUE) [with T = v8::Object
Template, VALUE = long unsigned int]':
v8_context.cpp:22:143:   instantiated from here
v8_handle.h:43:71: warning: dereferencing type-punned pointer will break strict-alias
ing rules
v8_handle.h: In function 'v8::Persistent<T>& rr_v8_handle(VALUE) [with T = v8::Value,
 VALUE = long unsigned int]':
v8_context.cpp:23:110:   instantiated from here
v8_handle.h:43:71: warning: dereferencing type-punned pointer will break strict-alias
ing rules
g++.exe: unrecognized option '-rdynamic'
compiling v8_date.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo
r C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid
for C/ObjC but not for C++
In file included from v8_date.cpp:4:0:
v8_handle.h: In function 'v8::Persistent<T>& rr_v8_handle(VALUE) [with T = v8::Date,
VALUE = long unsigned int]':
v8_date.cpp:21:52:   instantiated from here
v8_handle.h:43:71: warning: dereferencing type-punned pointer will break strict-alias
ing rules
g++.exe: unrecognized option '-rdynamic'
compiling v8_debug.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo
r C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid
for C/ObjC but not for C++
g++.exe: unrecognized option '-rdynamic'
compiling v8_exception.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo
r C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid
for C/ObjC but not for C++
In file included from v8_exception.cpp:3:0:
v8_handle.h: In function 'v8::Persistent<T>& rr_v8_handle(VALUE) [with T = v8::StackT
race, VALUE = long unsigned int]':
v8_exception.cpp:48:44:   instantiated from here
v8_handle.h:43:71: warning: dereferencing type-punned pointer will break strict-alias
ing rules
v8_handle.h: In function 'v8::Persistent<T>& rr_v8_handle(VALUE) [with T = v8::StackF
rame, VALUE = long unsigned int]':
v8_exception.cpp:68:43:   instantiated from here
v8_handle.h:43:71: warning: dereferencing type-punned pointer will break strict-alias
ing rules
v8_exception.cpp: At global scope:
v8_exception.cpp:10:24: warning: '<unnamed>::stack' defined but not used
g++.exe: unrecognized option '-rdynamic'
compiling v8_external.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo
r C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid
for C/ObjC but not for C++
In file included from v8_external.cpp:4:0:
v8_handle.h: In function 'v8::Persistent<T>& rr_v8_handle(VALUE) [with T = v8::Extern
al, VALUE = long unsigned int]':
v8_external.cpp:51:60:   instantiated from here
v8_handle.h:43:71: warning: dereferencing type-punned pointer will break strict-alias
ing rules
v8_external.cpp: At global scope:
v8_external.cpp:10:9: warning: '<unnamed>::references' defined but not used
g++.exe: unrecognized option '-rdynamic'
compiling v8_function.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo
r C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid
for C/ObjC but not for C++
In file included from v8_function.cpp:5:0:
v8_handle.h: In function 'v8::Persistent<T>& rr_v8_handle(VALUE) [with T = v8::Functi
on, VALUE = long unsigned int]':
v8_function.cpp:13:40:   instantiated from here
v8_handle.h:43:71: warning: dereferencing type-punned pointer will break strict-alias
ing rules
v8_handle.h: In function 'v8::Persistent<T>& rr_v8_handle(VALUE) [with T = v8::Array,
 VALUE = long unsigned int]':
v8_function.cpp:23:55:   instantiated from here
v8_handle.h:43:71: warning: dereferencing type-punned pointer will break strict-alias
ing rules
v8_handle.h: In function 'v8::Persistent<T>& rr_v8_handle(VALUE) [with T = v8::String
, VALUE = long unsigned int]':
v8_function.cpp:49:51:   instantiated from here
v8_handle.h:43:71: warning: dereferencing type-punned pointer will break strict-alias
ing rules
g++.exe: unrecognized option '-rdynamic'
compiling v8_handle.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo
r C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid
for C/ObjC but not for C++
g++.exe: unrecognized option '-rdynamic'
compiling v8_locker.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo
r C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid
for C/ObjC but not for C++
v8_locker.cpp: In function 'VALUE<unnamed>::Lock::Delete(VALUE)':
v8_locker.cpp:45:5: warning: no return statement in function returning non-void
v8_locker.cpp: In function 'VALUE<unnamed>::Unlock::Delete(VALUE)':
v8_locker.cpp:85:5: warning: no return statement in function returning non-void
g++.exe: unrecognized option '-rdynamic'
compiling v8_message.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo
r C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid
for C/ObjC but not for C++
In file included from v8_message.cpp:2:0:
v8_handle.h: In function 'v8::Persistent<T>& rr_v8_handle(VALUE) [with T = v8::Messag
e, VALUE = long unsigned int]':
v8_message.cpp:10:38:   instantiated from here
v8_handle.h:43:71: warning: dereferencing type-punned pointer will break strict-alias
ing rules
g++.exe: unrecognized option '-rdynamic'
compiling v8_object.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo
r C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid
for C/ObjC but not for C++
In file included from v8_object.cpp:1:0:
v8_handle.h: In function 'v8::Persistent<T>& rr_v8_handle(VALUE) [with T = v8::Object
, VALUE = long unsigned int]':
v8_object.cpp:17:39:   instantiated from here
v8_handle.h:43:71: warning: dereferencing type-punned pointer will break strict-alias
ing rules
g++.exe: unrecognized option '-rdynamic'
compiling v8_script.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo
r C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid
for C/ObjC but not for C++
In file included from v8_script.cpp:2:0:
v8_handle.h: In function 'v8::Persistent<T>& rr_v8_handle(VALUE) [with T = v8::Script
, VALUE = long unsigned int]':
v8_script.cpp:25:56:   instantiated from here
v8_handle.h:43:71: warning: dereferencing type-punned pointer will break strict-alias
ing rules
g++.exe: unrecognized option '-rdynamic'
compiling v8_string.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo
r C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid
for C/ObjC but not for C++
In file included from v8_string.cpp:3:0:
v8_handle.h: In function 'v8::Persistent<T>& rr_v8_handle(VALUE) [with T = v8::String
, VALUE = long unsigned int]':
v8_string.cpp:13:38:   instantiated from here
v8_handle.h:43:71: warning: dereferencing type-punned pointer will break strict-alias
ing rules
g++.exe: unrecognized option '-rdynamic'
compiling v8_template.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo
r C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid
for C/ObjC but not for C++
In file included from v8_template.cpp:2:0:
v8_handle.h: In function 'v8::Persistent<T>& rr_v8_handle(VALUE) [with T = v8::Templa
te, VALUE = long unsigned int]':
v8_template.cpp:42:39:   instantiated from here
v8_handle.h:43:71: warning: dereferencing type-punned pointer will break strict-alias
ing rules
v8_handle.h: In function 'v8::Persistent<T>& rr_v8_handle(VALUE) [with T = v8::Object
Template, VALUE = long unsigned int]':
v8_template.cpp:45:45:   instantiated from here
v8_handle.h:43:71: warning: dereferencing type-punned pointer will break strict-alias
ing rules
v8_handle.h: In function 'v8::Persistent<T>& rr_v8_handle(VALUE) [with T = v8::Functi
onTemplate, VALUE = long unsigned int]':
v8_template.cpp:48:47:   instantiated from here
v8_handle.h:43:71: warning: dereferencing type-punned pointer will break strict-alias
ing rules
v8_handle.h: In function 'v8::Persistent<T>& rr_v8_handle(VALUE) [with T = v8::Data,
VALUE = long unsigned int]':
v8_template.cpp:54:53:   instantiated from here
v8_handle.h:43:71: warning: dereferencing type-punned pointer will break strict-alias
ing rules
g++.exe: unrecognized option '-rdynamic'
compiling v8_try_catch.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo
r C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid
for C/ObjC but not for C++
g++.exe: unrecognized option '-rdynamic'
compiling v8_v8.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo
r C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid
for C/ObjC but not for C++
g++.exe: unrecognized option '-rdynamic'
compiling v8_value.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo
r C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid
for C/ObjC but not for C++
In file included from v8_value.cpp:1:0:
v8_handle.h: In function 'v8::Persistent<T>& rr_v8_handle(VALUE) [with T = v8::Value,
 VALUE = long unsigned int]':
v8_value.cpp:10:37:   instantiated from here
v8_handle.h:43:71: warning: dereferencing type-punned pointer will break strict-alias
ing rules
g++.exe: unrecognized option '-rdynamic'
compiling v8_weakref.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo
r C/ObjC but not for C++
compiling v8_try_catch.cpp                                                                                                                                           cc1plus.exe: warning: command line optcc1
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo                                                                                                                   r C/Ob
r C/ObjC but not for C++                                                                                                                                          valid                              cc1plus.e
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid                                                                                                              for C/ObjC b
for C/ObjC but not for C++                                                                                                                                            compiling v8_v8.cpp      g++.exe: unreco
g++.exe: unrecognized option '-rdynamic'                                                                                                                          tion "-Wdeclaration-after-compiling v8_v8.cp
compiling v8_v8.cpp                                                                                                                                                                      cc1plus.exe: warning:
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo                                                                                                 r C/ObjC but not for C++
r C/ObjC but not for C++                                                                                                                                               g++.exe: unrcc1plus.exe: warning: comma
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid                                                                                            for C/ObjC but not for C++
for C/ObjC but not for C++                                                                                                                                        valid fo   g++.exe: unrecognized option '-rd
g++.exe: unrecognized option '-rdynamic'                                                                                                                                  compiling v8_value.cpp
compiling v8_value.cpp                                                                                                                                                 cc1plus.exe: warning: command line opti
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo                                                                             1:r C/ObjC but not for C++
r C/ObjC but not for C++                                                                                                                                          c1plus.exe: warning: command line option "-W
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid                                                                              C/ObjC but not for C++
for C/ObjC but not for C++                                                                                                                                         included from v8_value.cpp:1:0:
In file included from v8_value.cpp:1:0:                                                                                                                           h: In function 'v8::Persistent<T>& rr_v8_han
v8_handle.h: In function 'v8::Persistent<T>& rr_v8_handle(VALUE) [with T = v8::Value,                                                                              unsigned int]':
 VALUE = long unsigned int]':                                                                                                                                     37:   instantiated from here
v8_value.cpp:10:37:   instantiated from here                                                                                                                      warning: dereferencing type-punned pointer w
v8_handle.h:43:71: warning: dereferencing type-punned pointer will break strict-alias
ing rules                                                                                                                                                         ion '-rdynamic'
g++.exe: unrecognized option '-rdynamic'
compiling v8_weakref.cpp                                                                                                                                          ine option "-Wdeclaration-after-statement" i
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is valid fo
r C/ObjC but not for C++                                                                                                                                          tion "-Wimplicit-function-declaration" is va
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is valid
for C/ObjC but not for C++
g++.exe: unrecognized option '-rdynamic'
linking shared-object v8.so
g++.exe: c:/Ruby193/lib/ruby/gems/1.9.1/gems/libv8-3.3.10.4/lib/libv8/build/v8/libv8.
a: No such file or directory
make: *** [v8.so] Error 1

Gem files will remain installed in c:/Ruby193/lib/ruby/gems/1.9.1/gems/therubyracer-0
.10.2 for inspection.
Results logged to c:/Ruby193/lib/ruby/gems/1.9.1/gems/therubyracer-0.10.2/ext/v8/gem_
make.out
An error occurred while installing therubyracer (0.10.2), and Bundler cannot continue
.
Make sure that `gem install therubyracer -v '0.10.2'` succeeds before bundling. 
```

以下是我在错误之前运行的一些值得注意的步骤。他们工作得很好：

```
gem install libv8 
```

**我正在使用 Windows 和 ruby​​ 1.9.3p194**

请问有人可以救我吗？*-*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:18:04.143

Windows 不是 therubyracer 支持的平台：[https ://github.com/cowboyd/therubyracer/issues/194](https://github.com/cowboyd/therubyracer/issues/194)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:30:32.463

之前遇到过这个错误，尝试使用Cygwin（在window中模拟Linux的非常强大的工具）或者安装Ubuntu、Mac代替，或者安装Wubi，都不错！

# xquery - 在类型安全之上命名安全

> ID：12488068
> 
> 赞同：0
> 
> 时间：2012-09-19T03:14:34.380
> 
> 标签：xquery, eclipse-jdt, type-safety

有没有人和我一样需要“名称安全”——请定义——在“类型安全”之上——请定义？我对类型保险箱没有任何疑问。我只是在寻找一个安全的名字。

示例问题：您已经构建了一个 xpath/xquery 来针对 xml 运行。有没有一种方法/工具可以在设计和/或编译时根据模式检查“xml元素/属性名称”？如果将 XMl 映射到 POJO，就不会出现这种需求。我正在寻找类似于 eclipse 插件的东西，它可以通过使用[内容辅助](http://en.wikipedia.org/wiki/Content_assist)和实时 java 分析来做到这一点。

实际上，我希望找到一个像这样的工具来解析一些 JSON 文档，而不是 XML。我认为 XML 社区可能拥有源自 XQuery 的最成熟的工具，而我最有可能通过该标签发现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:56:02.890

An XML Schema validator will check that an XML document conforms to a set of rules; I believe there are XSD (XML Schema Document) tools available for eclipse.

For JSON there's a thing called JSON Schema, although I think it is not as mature.

# php - 检查是否在子数组中并删除子数组数组

> ID：12488070
> 
> 赞同：1
> 
> 时间：2012-09-19T03:14:53.127
> 
> 标签：php, mongodb, multidimensional-array, collections

我已经阅读了 mongoDB 文档，但是在哪里可以找到概述我正在尝试做的事情的示例。

我来的关闭是：

```
 > t.insert({x: [1,2,3,4,3,2,3,4]})
    > t.find()
    { "_id" : ObjectId("4bde2ad3755d00000000710e"), "x" : [ 1, 2, 3, 4, 3, 2, 3, 4 ] }
    > t.update({x:3}, {$unset:{"x.$":1}})
    > t.find()
    { "_id" : ObjectId("4bde2ad3755d00000000710e"), "x" : [ 1, 2, null, 4, 3, 2, 3, 4 ] } 
```

但是，这不适用于我想做的事情，因为我的收藏看起来像

```
array (
  'offers' => 
  array (
    0 => 
    array (
      'validto' => 'Thurs',
      'validfrom' => 'Mon',
      'percentage' => '0.05',
      'cashback' => '2',
      'minspend' => '40',
      'status' => 'pending',
      '_id' => '1347940686722',
    ),
    1 => 
    array (
      'validto' => 'Thurs',
      'validfrom' => 'Mon',
      'percentage' => '0.06',
      'cashback' => '3',
      'minspend' => '50',
      'status' => 'pending',
      '_id' => '1347940705277',
    ),
    2 => 
    array (
      'validto' => 'Sun',
      'validfrom' => 'Fri',
      'percentage' => '0.04',
      'cashback' => '2',
      'minspend' => '50',
      'status' => 'pending',
      '_id' => '1347940730663',
    ),
    3 => 
    array (
      'validto' => 'Sun',
      'validfrom' => 'Fri',
      'percentage' => '0.05',
      'cashback' => '3',
      'minspend' => '60',
      'status' => 'pending',
      '_id' => '1347940743513',
    ),
    4 => 
    array (
      'validto' => 'Sun',
      'validfrom' => 'Fri',
      'percentage' => '0.05',
      'cashback' => '5',
      'minspend' => '100',
      'status' => 'pending',
      '_id' => '1347940755230',
    ),
  ),
  'store_id' => new MongoId("5046cd963cd202c49d3140e7"),
) 
```

如果我想删除 3 数组（但这里的关键是我不知道我所拥有的 0-4 数组是否只是该子数组中的数据和集合行的 _id）。

这就是我的想法。然而我被卡住了。

```
$collection->update(array("store_id"=>$this->data['_id'], array("offers._id"=>1347940686722)), array('$unset'=>array("offers.$"=>1))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:53:24.790

这是我解决它的方法

```
$collection->update(array("store_id"=>new MongoId("5046cd963cd202c49d3140e7")), array('$pull'=>array("offers" =>array("id"=>"1347940755230"),false,false))); 
```

# mysql - 选择条件匹配单行的行？

> ID：12488073
> 
> 赞同：3
> 
> 时间：2012-09-19T03:15:20.410
> 
> 标签：mysql, sql, foreign-keys, inner-join

我有两个通过外键连接的表。在表 A 中，我试图获取时间列中的数据大于或等于表 B 开始列以及时间列中的数据小于或等于表 b 结束列的所有行。我在想内部连接可能适用于此，但是，结果不是我所期望的。它正在返回一些数据，但它们正在重复自己。

这是我所拥有的：

```
SELECT * FROM columnA
INNER JOIN columnB
ON columnA.time >= columnB.start
OR columnA.time <= columnB.stop 
```

我看错了吗？内部连接是否是收集这些数据的正确方法？

**更新：**

实际上 tableA 的外键是连接到 tableB 上的主键。无论如何，我这样做了：

```
SELECT * FROM tableA
INNER JOIN tableB
ON tableA.time >= tableB.start
AND tableA.time <= tableB.stop 
```

我没有做你所做的事情的原因是因为数据已经在数据库中存在几年了，而我最近刚刚添加了带有外键的列。所以该列中还没有任何数据。这就是我查询它的原因，以便我可以知道要使用信息更新哪些列。它将数据返回给我，但也返回了其他不符合要求的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:18:07.330

您必须使用定义它们关系的 columnName 加入它们，并将条件放在`WHERE`子句中。（*不在`ON`条款*上）

```
SELECT a.*, b.*
FROM    tableA a
        INNER JOIN tableB b
            ON a.colName = b.colName  -- colName is the column that links 
WHERE   a.`time` >= b.`start` OR      -- both tables.
        a.`time` <= b.`stop` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T03:22:32.580

您需要使用外键进行加入，然后过滤掉与您的条件不匹配的结果。

```
Select * from TableA
Inner join TableB on TableA.Key = TableB.Key
Where TableA.time >= TableB.Start
Or TableA.time <= TableB.Stop 
```

作为一项规则，我总是将 W3Schools 的 sql 页面放在手边。这是我可能忘记并需要快速复习的 SQL 函数的最佳快速参考。也是学习的好地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T03:24:49.743

```
SELECT a.* 
FROM columnA a 
INNER JOIN columnB b ON a.joiningColumn = b.joiningColumn
WHERE a.time >= b.start
OR a.time <= b.stop 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T03:33:04.010

从你的问题...

```
where the data in the time column is greater than or equal to the table B start column  
  AND  
where the data in the time column is less than or equal to the table b end column 
```

然而你的查询...

```
columnA.time >= columnB.start  
  OR  
columnA.time <= columnB.stop 
```

结合其他人的笔记，关于使用外键加入...

```
SELECT
  *
FROM
  TableA
INNER JOIN
  TableB
    ON  TableA.PK    = TableB.FK
    AND TableA.time >= TableB.start
    AND TableA.time <= TableB.stop 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T03:20:42.277

我设法通过添加一个 WHERE 来匹配我正在寻找的确切行中的数据来找出解决方案。这是我的解决方案：

```
SELECT * FROM tableA
INNER JOIN tableB
ON tableA.timetag >= tableB.start
AND tableA.timetag <= tableB.stop
WHERE tableB.id = "1" 
```

# github - 法律允许将 Codeplex 项目分叉到 Github 帐户吗？

> ID：12488075
> 
> 赞同：4
> 
> 时间：2012-09-19T03:15:31.493
> 
> 标签：github, licensing, codeplex

我一直在考虑在[HtmlAgilityPack](http://html-agility-pack.net/?z=codeplex)项目（托管在 Codeplex 上）的 GitHub 上创建一个 fork，但我不知道我是否侵犯了某些合法权利。

可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T10:08:52.080

# DISCLAIMER

## I am no lawyer, this is more of a guess just based on observations from the license text.

They seem to use Microsoft Public License.

You are allowed to fork, host and change the code if you want.

You need to keep the same license.

You must keep the copyright. That means you can't just say that you wrote that software originally, you need to keep credit where credit is due.

Check the license for more information:

*   [http://htmlagilitypack.codeplex.com/license](http://htmlagilitypack.codeplex.com/license)
*   [http://www.tldrlegal.com/license/microsoft-public-license-%28ms-pl%29](http://www.tldrlegal.com/license/microsoft-public-license-%28ms-pl%29)

# python-2.7 - Python字符串到日期的转换

> ID：12488076
> 
> 赞同：0
> 
> 时间：2012-09-19T03:15:33.193
> 
> 标签：python-2.7, string-to-datetime

我正在使用 Python 2.7.3 并尝试使用 csv 阅读器解析 CSV 文件：

```
 date_format = '%m/%d/%Y %H:%M%'
   with open(data_base+data_file_short, 'rb') as f:
    reader = csv.reader(f)
    for row in reader:
     #use row here to convert string to date
     dateObj1 = datetime.strptime(row[1],date_format) 
```

但我不断收到此错误：

> ValueError：时间数据“PostCreationDate”与格式“%m/%d/%Y %H:%M”不匹配

如果我打印日期，它会显示`8/3/2012 21:46`哪个似乎适合我的 date_format 字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:28:11.243

您正在尝试将 CSV 的标题行解释为数据行，这（如您所见）将不起作用。

考虑使用 a`csv.DictReader`代替，这样您就可以自动处理标题行，而不必对行索引进行硬编码。

# playframework - CentOS 5 上的 Play(2.0.3-java) 应用程序在生产模式下自行关闭

> ID：12488078
> 
> 赞同：0
> 
> 时间：2012-09-19T03:16:00.570
> 
> 标签：playframework, centos, playframework-2.0

我有一个简单的游戏！部署在 CentOS 5 上的应用程序。

我使用'./target/start'脚本启动服务器，启动后什么也没做，甚至没有请求。

但是几个小时后我启动应用程序后，它只是关闭而没有任何消息，日志是：

```
# tail -f application.log 
2012-09-18 11:02:18,907 - [INFO] - from play in main 
Listening for HTTP on port 9797...

2012-09-18 13:21:10,792 - [INFO] - from application in Thread-6 
Application shutdown... 
```

java环境是：

```
# java -version
java version "1.6.0_29"
Java(TM) SE Runtime Environment (build 1.6.0_29-b11)
Java HotSpot(TM) Server VM (build 20.4-b02, mixed mode) 
```

我还在 Google-Group 上发布了一个主题，但我没有对此进行回复。

谢谢。

# hibernate - 仅休眠特定注释

> ID：12488084
> 
> 赞同：0
> 
> 时间：2012-09-19T03:16:38.493
> 
> 标签：hibernate, jakarta-ee, annotations

我在hibernate上读了很多书。

Hibernate Annotations 实现了 JPA 注释，另外还有针对 Hibernate 特定功能的附加注释。

搜索了很多，但找不到任何提及 Hibernate 特定注释的内容。有人告诉我，除了 JPA 2.0 的注释之外，Hibernate 特定的注释是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:58:01.797

好吧，我可以想到 [Hibernate Named Queries](http://www.mkyong.com/hibernate/hibernate-named-query-examples/)

这里还有[Hibernate Extensions](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-hibspec)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-18T13:10:38.190

您可以在中找到有关 Hibernate 特定注释的大量信息

开始休眠：从新手到专业（Beginning: from Novice to Professional）一书。

# php - PHP 的 PDO 执行（）与 fetch（）？

> ID：12488086
> 
> 赞同：3
> 
> 时间：2012-09-19T03:17:00.120
> 
> 标签：php, pdo

我有一个快速的问题，我希望有一个快速而明确的答案。

在 php.com 的手册中，它指出在将值绑定到准备好的查询之后执行（）将在成功时返回 true，在失败时返回 false。很简单。

我只是想确保我清楚这一点。execute() 返回的值对应于直接错误。例如，如果数据库在成功连接后以某种方式关闭，并且无法执行查询 - 或其他一些特殊问题。

考虑一些代码：

```
 protected function territoryCheck($numberOut)
    {
        $this->numberOut = $numberOut;

        //Execute test
        $this->checkConnect();
        $stmt = $this->dbh->prepare("SELECT t_id FROM Territory WHERE t_id = :param1")
        $stmt->bindParam(':param1', $this->numberOut);
        $stmt->execute();

        //Determine value of test
        if($stmt == FALSE)
        {
            return FALSE;
        }   
    } 
```

我很确定这不会按我的意愿运行。重点是根据参数是否有对应的值，看数据库中是否存在t_id。在这种情况下，我需要使用 $stmt->fetch()。我这样说对吗？

任何帮助表示赞赏。

编辑：按照同样的思路，是否谨慎 - 或者我应该说最佳实践 - 把

```
//Execute test
        $this->checkConnect();
        $stmt = $this->dbh->prepare("SELECT t_id FROM Territory WHERE t_id = :param1")
        $stmt->bindParam(':param1', $this->numberOut);
        $stmt->execute(); 
```

由于 PDO 返回异常，在 try-catch 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T03:29:03.760

是的你是对的。仅在未能执行查询时`$stmt->execute()`返回。`false`它不会返回`false`空结果集。所以你需要使用`fetch()`检查结果，`fetch()`返回`false`空结果集。

而对于异常，PDO只有在为方法`execute()`等设置了异常模式时`new PDO(...)`才会抛出异常。但无论是否设置异常模式都会抛出异常。

# google-plus - 为什么 Google+ API 不返回性别？

> ID：12488087
> 
> 赞同：0
> 
> 时间：2012-09-19T03:17:17.303
> 
> 标签：google-plus, social-networking, google-api-client

我正在使用测试：

[https://developers.google.com/+/api/latest/people/get](https://developers.google.com/+/api/latest/people/get)

[https://developers.google.com/apis-explorer/#p/plus/v1/plus.people.get](https://developers.google.com/apis-explorer/#p/plus/v1/plus.people.get)

他们都没有返回用户的性别，即使它是公开可见的。

我也尝试过启用 OAuth 2.0，但仍然没有任何运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T04:04:03.787

此信息可从[/oauth2/v1/userinfo API](https://developers.google.com/apis-explorer/#p/oauth2/v2/oauth2.userinfo.get)获得。

您将需要包含 OAuth 2.0 范围：`https://www.googleapis.com/auth/userinfo.profile`.

可以从端点获取信息： `https://www.googleapis.com/oauth2/v1/userinfo?access_token={accessToken}`

官方文档： [https ://developers.google.com/accounts/docs/OAuth2Login#userinfocall](https://developers.google.com/accounts/docs/OAuth2Login#userinfocall)

API 资源管理器： [https ://developers.google.com/apis-explorer/#p/oauth2/v2/oauth2.userinfo.get](https://developers.google.com/apis-explorer/#p/oauth2/v2/oauth2.userinfo.get)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T06:53:03.780

如果你看看：[https](https://developers.google.com/apis-explorer/#p/plus/v1/plus.people.get?userId=114452557602978803926&_h=1&) ://developers.google.com/apis-explorer/#p/plus/v1/plus.people.get?userId=114452557602978803926&_h=1&你会发现你可以使用 people.get () 检索已公开该信息的任何用户的性别。

# javascript - 切换 CSS3 淡入淡出？

> ID：12488099
> 
> 赞同：3
> 
> 时间：2012-09-19T03:18:39.927
> 
> 标签：javascript, jquery, css, webkit

是否可以使用 jQuery来`-webkit-transition:opacity .5s linear;`切换元素的不透明度（以便您可以通过`display``display:block``display:none`

例如：您单击一个`<a>`标签，该标签通过将其不透明度设置为 1 并设置来显示一个 div `display:block`。然后再次单击`<a>`标签，它将不透明度设置为 0，然后将显示设置为`none`。

我的尝试如下：

```
.visible{
    opacity: 1;
    -webkit-transition:opacity .5s linear;
    display: block;
}

.close{
    display: none;
    opacity:0;
    width:20px;
    height:20px;
    background-color:red;   
    -webkit-transition:opacity .5s linear;
}

$(".toggle").click(function(){
if ($(".close").css("display") === "none") {
    $(".close").addClass("visible").delay(500).promise().done(function () {
        $(this).css("display", "block");
    });
};
if ($(".close").css("display") === "block") {
    $(".close").removeClass("visible").delay(500).promise().done(function () {
        $(this).css("display", "none");
    });
};
}); 
```

[http://jsfiddle.net/charlescarver/zzP6g/](http://jsfiddle.net/charlescarver/zzP6g/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T03:26:22.480

这似乎是重复的：[显示器上的转换：属性](https://stackoverflow.com/questions/3331353/transitions-on-the-display-property)
这个问题非常相似，应该会导致您得出相同的结论。

最好的祝愿，
科尔文

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T05:56:06.383

文档的这个特定[页面](http://www.webkit.org/blog/138/css-animation/)很有帮助：

> **transition-property** – 应该为什么属性设置动画，例如不透明度。
> 
> **transition-duration** – 过渡应该持续多长时间。
> 
> **transition-timing-function** – 过渡的计时函数（例如，线性与缓入与自定义三次贝塞尔函数）。
> 
> **过渡**——所有三个属性的简写。

因此，您可以调用特定属性，例如`opacity`，也可以`all`在类名中使用。我认为后者可能更有用，即使您只有一个属性要应用。

基本上，您可以将 a`class`与`all`转换属性一起使用并切换类名。我发现有趣的一件事是，您实际上可以在`class`add 上执行多个版本（不过，在删除类时会出现不完全相同的效果）。此外，据我所知，`opacity`与`width`and结合`height`使用会比使用更好。`display: none`

下面演示了如何`-webkit-transition`在图层中使用该属性。这是一个简化版本，后面是更复杂的演示：

`#block.transition`让我区分一下我的过渡属性：

```
<div id="block" class="transition"></div> 
```

基本属性，非动画：

```
#block {
    margin: 25px auto;
    background: red;
} 
```

最初的“看不见”状态：

```
#block.transition {
    opacity: 0;  
    width: 0;
    height: 0;
    padding: 0;
    -webkit-transition: all 2s ease-in-out; 
} 
```

和动画步骤：

```
#block.transition.show {
    opacity: .3;
    width: 50px;
    height: 50px;
    background: orange;
    -webkit-transition: all .5s ease-in-out; 
}
#block.transition.show {
    opacity: .4;
    width: 150px;
    height: 150px;
    background: black;
    -webkit-transition: all 1s ease-in-out; 
}
#block.transition.show {
    opacity: 1;  
    padding: 100px;
    background: blue;
    -webkit-transition: all 3s ease-in-out; 
}​ 
```

请注意，我在这里所做的只是切换`.show`课程：

```
$(document).ready(function load(){
    var $block = $("#block");

    $('.toggle').click(function c(){
        $block.toggleClass('show');
    });
});​ 
```

[演示](http://jsfiddle.net/userdude/zzP6g/8/embedded/result/)（[来源](http://jsfiddle.net/userdude/zzP6g/8/)）

* * *

**标记**

```
<p><button class="toggle">Toggle Blocks</button></p>

<div id="block" class="transition">
    <div class="blocks transition"></div>
    <div class="blocks transition"></div>
    <div class="blocks transition"></div>
</div> 
```

​<strong>CSS

*包含`#block`*：

```
#block {
    margin: 25px auto;
    background: #333;
    -webkit-transition: opacity, display, width 1.5s ease-in-out; 
}
#block.transition {
    opacity: 0;  
    width: 0;
    padding: 0;
    border: 1px solid yellow;
    -webkit-transition: all 1.9s ease-in-out; 
}
#block.transition.show {
    opacity: .3;  
    border-color: blue;
    -webkit-transition: all .5s ease-in-out; 
}
#block.transition.show {
    opacity: 1;  
    width: 550px;
    padding: 25px;
    border-width: 15px;
    -webkit-transition: all 3s ease-in-out; 
} 
```

*三人组`.blocks`*：

```
.blocks {
    display: inline-block;
    background-color: red;
}
.blocks.transition {
    opacity: .1; 
    width: 0;
    height: 0;
    margin: 0; 
    -webkit-transition: all 1.7s ease-in-out; 
}
.blocks.transition.show {
    opacity: 1;
    width: 150px;
    height: 150px;
    margin: 10px;
    -webkit-transition: all 4.5s ease-in-out;
}​ 
```

**jQuery**

```
$(document).ready(function load(){
    var $block = $("#block"),
        $blocks = $block.find(".blocks.transition");

    $('.toggle').click(function c(){
        $block.toggleClass('show');

        $blocks.delay(1500).toggleClass('show');
    });
});​ 
```

[演示](http://jsfiddle.net/userdude/zzP6g/6/embedded/result/)（[来源](http://jsfiddle.net/userdude/zzP6g/6/)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T03:33:14.483

为什么不向 CSS3 过渡结束事件添加事件侦听器，当事件触发时，您可以隐藏或显示元素。

```
$('.close').on('transitionend webkitAnimationEnd MozTransition OTransitionEnd MSTransitionEnd', function () {
    $(this).show();
}); 
```

使用此解决方案，您可以删除单击事件中将 css 属性显示设置为阻塞或无的设置，并在 transitionend 事件处理程序中进行处理。

如果您需要更详细的示例，我很乐意提供。这显然只是让您朝着正确方向前进的起点。

完整示例：

```
$('.close').on('transitionend webkitAnimationEnd MozTransition OTransitionEnd MSTransitionEnd', function () {
    if (!$(this).hasClass('visible')) {
        $(this).css('display', 'none');
    } else {
        $(this).css('display', 'block');
    }
});

$(".toggle").click(function(){
    if ($(".close").is(':hidden')) {
        $(this).css('display', 'block');
        $(".close").addClass("visible");
    } else {           
        $(".close").removeClass("visible");
    }
});​ 
```

# joomla - 在 joomla 中为表单应用按钮

> ID：12488100
> 
> 赞同：0
> 
> 时间：2012-09-19T03:18:43.197
> 
> 标签：joomla

我的表单目前有一个保存按钮，但没有应用按钮。我试图插入一个，但它的作用与保存相同。有任何想法吗？这是代码：

```
 <div class="formelm-buttons">
        <button type="button" onclick="Joomla.submitbutton('propform.save')">
            <?php echo JText::_('JSAVE') ?>
        </button>
        <button type="button" onclick="Joomla.submitbutton('propform.cancel')">
            <?php echo JText::_('JCANCEL') ?>
        </button>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:01:08.377

**简而言之：**

`$this->setRedirect($this->getReturnPage());`从您的保存功能中删除。

**它中断的原因适用：**

所以这是您评论中的功能：

```
public function save($key = null, $urlVar = 'id')
{
    $result = parent::save($key, $urlVar); // If ok, redirect to the return page.
    if ($result) {
        $this->setRedirect($this->getReturnPage());
    }
    return $result;
} 
```

我知道这个函数被放置在一个扩展 JControllerForm 的控制器中。现在，这是非常糟糕的文档，但是：**JControllerForm::save($key, $urlVar) 将为您设置重定向。**

这意味着当您运行时，`$this->setRedirect($this->getReturnPage());`您将覆盖 JControllerForm 已经为您完成的工作。*保存*和*应用*之间的区别在于成功保存后重定向到哪里。

因此，如果您删除该*setRedirect*，则应用程序应该开始工作（如果其他一切正常）。此外，如果您为此保存正确构建了表，将为您设置 $urlVar 参数。因此，如果是这种情况，您根本不需要覆盖*save*。

# varnish - Varnish 后端运行状况轮询

> ID：12488103
> 
> 赞同：1
> 
> 时间：2012-09-19T03:18:59.650
> 
> 标签：varnish

我们使用 varnish 3.02 和缓存服务器，并且有 6 个或更多的服务器作为不同权重的后端，所以循环可能不适合我们，

我们使用具有以下健康检查的随机导向器，但它似乎不起作用

```
probe apachehealthcheck {
        .url = "/test/test.php";
        .interval = 3s;
        .timeout = 3 s;
        .window = 5;
        .threshold = 3;
        .initial = 3;
        .expected_response = 200; }

 backend passport backend passport1 {
        .host = "192.168.2.192";
        .port = "80";
        .connect_timeout = 10s;
        .first_byte_timeout = 50s;
        .between_bytes_timeout = 30s;
        .probe = apachehealthcheck; }

director passport_cluster random {
        {.backend = flpassport1;.weight = 1;}
        {.backend = flpassport2;.weight = 2;}   
                ...    } 
```

[我在https://www.varnish-cache.org/trac/wiki/BackendPolling](https://www.varnish-cache.org/trac/wiki/BackendPolling)看到了以下几行

> 随机导向器不会考虑池中不健康的后端。

这是否意味着当我在清漆中使用随机导向器时，当某些后端损坏时，它仍会将请求转发到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:34:43.850

对我来说，您的后端配置部分似乎有误。
拆分或缩短“后端护照后端护照1”部分。是双倍的。

# objective-c - CTFrameGetLineOrigin 令人难以置信的奇怪错误

> ID：12488106
> 
> 赞同：0
> 
> 时间：2012-09-19T03:19:39.597
> 
> 标签：objective-c, ios, core-text

我正在使用核心文本进行文本选择。选择机制本身正在工作，除了一件非常奇怪的事情。**我只能**在文本视图的最后一行选择罚款。所有先前的行都捕捉到全部选定或根本不选定。这是逻辑（取自Apple的示例代码）：

```
 NSArray *lines = (NSArray *) CTFrameGetLines(_frame);
for (int i = 0; i < [lines count]; i++) {
    CTLineRef line = (CTLineRef) [lines objectAtIndex:i];
    CFRange lineRange = CTLineGetStringRange(line);
    NSRange range = NSMakeRange(lineRange.location, lineRange.length);
    NSRange intersection = [self RangeIntersection:range withSecond:selectionRange];
    if (intersection.location != NSNotFound && intersection.length > 0) {
        // The text range for this line intersects our selection range
        CGFloat xStart = CTLineGetOffsetForStringIndex(line, intersection.location, NULL);
        CGFloat xEnd = CTLineGetOffsetForStringIndex(line, intersection.location + intersection.length, NULL);
        CGPoint origin;
        // Get coordinate and bounds information for the intersection text range
        CTFrameGetLineOrigins(_frame, CFRangeMake(i, 0), &origin);
        CGFloat ascent, descent;
        CTLineGetTypographicBounds(line, &ascent, &descent, NULL);
        // Create a rect for the intersection and draw it with selection color
        CGRect selectionRect = CGRectMake(xStart, origin.y - descent, xEnd - xStart, ascent + descent);
        UIRectFill(selectionRect);
    }
} 
```

我注意到一件非常奇怪的事情。调用`CTFrameGetLineOrigin`似乎破坏了 xStart 和 xEnd 内部的值。我插入日志如下：

```
NSLog(@"BEFORE: xStart (%p) = %f, xEnd (%p) = %f, origin (%p) = %@", &xStart, xStart, &xEnd, xEnd, &origin, NSStringFromCGPoint(origin));
CTFrameGetLineOrigins(_frame, CFRangeMake(i, 0), &origin);
NSLog(@"AFTER: xStart (%p) = %f, xEnd (%p) = %f, origin (%p) = %@", &xStart, xStart, &xEnd, xEnd, &origin, NSStringFromCGPoint(origin)); 
```

不起作用的行的输出如下

> 2012-09-19 12:08:39.831 SimpleTextInput[1172:11603] 之前：xStart (0xbfffcefc) = 18.000000, xEnd (0xbfffcef8) = 306.540009, 原点 (0xbfffcef0) = {0, -0}
> 
> 2012-09-19 12:08:39.831 SimpleTextInput[1172:11603] 之后：xStart (0xbfffcefc) = 370.000000，xEnd (0xbfffcef8) = 0.000000，原点 (0xbfffcef0) = {0, 397}

如果我执行以下操作，它会自行修复......但我不知道为什么：

```
CGFloat xStart = CTLineGetOffsetForStringIndex(line, intersection.location, NULL);
CGFloat xEnd = CTLineGetOffsetForStringIndex(line, intersection.location + intersection.length, NULL);
CGFloat xStart2 = 0.f; //HACK, not used at all except to pad memory
CGPoint origin; 
```

似乎`CTFrameGetLineOrigin`不尊重`origin`（记录`xStart2`显示其值以相同方式损坏）的内存边界，但如果是这种情况，那么为什么最后一行文本会按预期工作？谁可以给我解释一下这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T05:37:05.293

CTFrameGetLineOrigins 中没有奇怪的错误。

在 CTFrameGetLineOrigins 中，第二个参数： `CFRange`是您希望复制的线原点范围。如果范围的范围长度为 0，则复制操作从范围的起始索引继续到最后一行原点。

你正在路过`CFRangeMake(i, 0)`。在第一次循环迭代 (i=0) 中，它将尝试用所有行起点（0 到终点行）填充 &origin 并覆盖其他一些内存。

尝试以下代码，这将解决问题。

```
NSArray *lines = (NSArray *) CTFrameGetLines(_frame);
CGPoint origins[lines.count]; //allocate enough space for buffer.
// Get all line origins...
CTFrameGetLineOrigins(_frame, CFRangeMake(0, 0), origins);

for (int i = 0; i < [lines count]; i++) {
    CTLineRef line = (CTLineRef) [lines objectAtIndex:i];
    CFRange lineRange = CTLineGetStringRange(line);
    NSRange range = NSMakeRange(lineRange.location, lineRange.length);
    NSRange intersection = [self RangeIntersection:range withSecond:selectionRange];
    if (intersection.location != NSNotFound && intersection.length > 0) {
        // The text range for this line intersects our selection range
        CGFloat xStart = CTLineGetOffsetForStringIndex(line, intersection.location, NULL);
        CGFloat xEnd = CTLineGetOffsetForStringIndex(line, intersection.location + intersection.length, NULL);

        CGFloat ascent, descent;
        CTLineGetTypographicBounds(line, &ascent, &descent, NULL);
        // Create a rect for the intersection and draw it with selection color
        CGRect selectionRect = CGRectMake(xStart + origins[i].x, origins[i].y - descent, xEnd - xStart, ascent + descent);
        UIRectFill(selectionRect);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-23T21:36:06.407

这看起来像是`drawRangeAsSelection`来自`SimpleTextInput`示例。如果是这种情况，您可以这样做：

```
CTFrameGetLineOrigins(_frame, CFRangeMake(i, 1), &origin); 
```

它将仅检索您需要的一行的原点（这是此方法的目的）。我还注意到他们在:`cursorRectForIndex`和`firstRectForNSRange`. 感谢@RobNapier 帮助我解决了这个问题。

# php - PHP Curl - 返回的 html 都搞砸了

> ID：12488111
> 
> 赞同：5
> 
> 时间：2012-09-19T03:20:49.407
> 
> 标签：php, html, curl

我正在尝试通过 Curl 获取有关网站中文章的一些内容，我正在执行以下操作：

```
 $url = 'http://lisboacity.olx.pt/oportunidade-pastor-alemao-7-meses-com-lop-iid-432402267';

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 10);
    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; .NET CLR 1.1.4322');
    curl_setopt($ch, CURLOPT_FAILONERROR, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_AUTOREFERER, true);
    curl_setopt($ch, CURLOPT_TIMEOUT, 10);
    $data = curl_exec($ch);
    curl_close($ch);
    echo $data; 
```

但是，如您所见，结果与此类似：

```
‹ÜW_oÛ6N€~F{hD’å?±“ØÜÄm‚&amp;qZ;-Ö¢0h‰–™R¢JR¶ÓapcèÃ°}*ö²§)%Vœ&YÚ·†eêî~¿;òx<6×ö{{ƒ_N»èp|„NÏžî!ËvÝ×•=×Ýìg‚ªSòÐ@àXREyŒ™ëvO,dM”Jv\w6›9³ŠÃEè^º±ªË8—Ä TµW›ú•~À#" #mj“)¶¬=++{p‘ùÙ¨e)2Wmù,$Q­Ã~Ïn4jÛ¶g!÷.¨#‡)‹p‰26«>Í–M·.ƒTŽ8ö©ºp8›;‰r-¤°ÕJÂÆ£¢Š‘v/áB¥1 p@ÖN±T\ #Ñ'Žê("’H ŽÐQïÔ…#ƒ:10•(à £¨Ï%¼D]øá??ñ¦›d‘Å8"-+ Ò4Ñ3_ç:åÓÏÁ†ð’\[‘8]ÿÑëÎà zÕ;AOûý½ƒÞÓþA÷ðxíÑê£Uã»ôvS_pB“M ’aÙq€AŠX"øNa¦bx’;hŸÊäoCÃ0þjB3C@ Rå"™0Ãz€cž&ü{æäjúô '&äö'¤åUªõZ½î5êÀd2Ñø=„µ,Ç<†bÛìž3èGöØj±Ð{9Ø; Ã½ÞÉ«,Æ]©.‘îO!Åb~–Á2 !°'uåÊj_Êÿ„œ=†žç;Æ$"Ó-3–­ 
```

我还尝试使用 PHP 的`DomDocument`类加载 url 内容，结果相同。

这可能是什么原因造成的？提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T03:30:30.780

输出是 gzip 编码的。试试这个选项来解压内容：

> curl_setopt($ch, CURLOPT_ENCODING, '');
> 
> CURLOPT_ENCODING：“Accept-Encoding:”标头的内容。这使得能够对响应进行解码。支持的编码是“identity”、“deflate”和“gzip”。如果设置了空字符串“”，则会发送包含所有支持的编码类型的标头。

来自[http://us2.php.net/curl_setopt](http://us2.php.net/curl_setopt)

# linux - 如何从Linux上的单个目录中删除十亿个文件？

> ID：12488114
> 
> 赞同：1
> 
> 时间：2012-09-19T03:22:01.297
> 
> 标签：linux, filesystems, debian

我正在尝试使用以下命令删除 linux 下单个目录中的大约十亿个文件：

```
# rm /test/*.mp3 
```

但是这条消息的执行是错误的：

```
-bash: /bin/rm: Argument list too long 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T03:27:43.420

我经常使用某种形式的东西

```
find /test/ -name '*.mp3' -delete 
```

这允许依次处理每个文件，而不是试图将所有文件作为 rm 命令的参数列出的 glob。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T03:29:47.263

`xargs`通常很聪明地生成合理大小的参数列表；尝试

```
ls -1 /test/*.mp3 | xargs rm 
```

这将参数批处理在一起，但避免创建太长而无法处理的命令调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T03:31:48.697

试试这个（我在 iPad 上但经常使用 Linux）

从 /，执行

```
# rm -rf test 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T03:38:50.957

另一个流行的最爱是“ `find temp -name "*.mp3" -exec rm {} \;`”

# css - CSS“封面” - 没有滚动条？

> ID：12488119
> 
> 赞同：0
> 
> 时间：2012-09-19T03:22:25.400
> 
> 标签：css

我正在使用 cover 属性创建一个背景图像，该图像填充背景并使用浏览器调整大小。但是我遇到了一个问题，页面有很多内容并且没有滚动条出现让我向下滚动！这是我正在使用的代码：

```
body{ 
    background: url(path.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    /* Cover for IE 7/8 */
    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='path.jpg', sizingMethod='scale');
    -ms-filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='path.jpg', sizingMethod='scale');
    /* End Cover for IE 7/8 */
    background-size: cover;
    background-color: transparent !important;
    position:fixed;
    top: 0;
    left: 0;
    width: 100%;
    height:100%;
    max-width:2500px;
    max-height:1500px;
    z-index:1;
} 
```

如果我删除`position:fixed;`，我会恢复滚动条，但背景图像会消失。解决此问题并同时拥有滚动条和背景封面图像的最佳方法是什么？

注意：我使用的是 jQuery，如果可行，我会使用 JS 答案（尽管我更喜欢仅 CSS 的答案。）

***更新***

我`fixed`从：

> 背景：url（path.jpg）无重复中心中心固定；

并且再次显示滚动条，但是当我滚动时，图像在滚动时被黑色背景覆盖。我希望图像保持固定并显示滚动条。

[这是一个小提琴。](http://jsfiddle.net/Lynda333/3BTSx/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T03:36:31.940

根据您的页面，主体可能无法调整为 100% 宽度/高度，具体取决于 HTML/CSS 的其余部分。你有浮动/绝对定位的元素吗？

您可以尝试删除`position:fixed`、和属性，并将其添加到您提供的 CSS`top`之上：`bottom``height``width`

```
html, body {
    min-height: 100%;
    min-width: 100%;
    max-width: 2500px;
    max-height: 1500px;
} 
```

查看布局 HTML/CSS 的片段会很有帮助，因为这可能会影响正文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:32:15.250

我最终更改了背景图像的方法并使用了[此处](http://paulmason.name/item/full-screen-background-image-pure-css-code)找到的方法。

这是代码：

```
html, body {
 height: 100%;
 width: 100%;
 padding: 0;
 margin: 0;
}

#full-screen-background-image {
 z-index: -999;
 min-height: 100%;
 min-width: 1024px;
 width: 100%;
 height: auto;
 position: fixed;
 top: 0;
 left: 0;
}

#wrapper {
 position: relative;
 width: 800px;
 min-height: 400px;
 margin: 100px auto;
 color: #333;
}

<body>
  <img alt="full screen background image" src="/background.jpg" id="full-screen-background-image" /> 
  <div id="wrapper">
      <p>Content goes here...</p>
  </div>
</body> 
```

我发现我的背景显示在图像上，所以我将这个类添加到正文中：

```
.transparent{
background-color: transparent !important;
} 
```

出现的另一个问题是我的背景是黑色的，在加载图像之前显示透明的背景色白色。为了解决这个问题，我创建了一个加载 div 并加载页面，然后将类添加到正文中。

***代码：***

*HTML*

```
<body>
   <div id="loading">
  <h2 class="textcenter">Loading...</h2>
  <img id="loading-image" class="center" src="ajax-loader.gif" />
</div> 
 <div style="display:none;" id="content-wrap">
  <img alt="full screen background image" src="/background.jpg" id="full-screen-background-image" /> 
  <div id="wrapper">
      <p>Content goes here...</p>
  </div>
 </div>
</body> 
```

*JS*

```
$(window).load(function() {
  $('#loading').fadeOut('slow', function() {
    $("#content-wrap").fadeIn("slow", function() {
      $("body").addClass("transparent");
   });    
 });   
}); 
```

我们以我测试了 IE 8+、Firefox、Chrome、Safari、Opera 的解决方案结束，并且确实有效！=>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T06:46:44.397

尝试将样式附加到 html，而不是正文...

```
html{ 
    background: url(path.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T07:27:22.313

只需在背景尺寸中添加**100% 而不是覆盖，****在叠加层中添加 height:100%，**然后背景图像应该包含任何尺寸的内容。

```
body{ 
    background: url(path.jpg) no-repeat center center fixed; 
    -webkit-background-size: 100%;
    -moz-background-size: 100%;
    -o-background-size: 100%;
    /* Cover for IE 7/8 */
    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='path.jpg', sizingMethod='scale');
    -ms-filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='path.jpg', sizingMethod='scale');
    /* End Cover for IE 7/8 */
    background-size: 100%;
    background-color: transparent !important;
    position:fixed;
    top: 0;
    left: 0;
    width: 100%;
    height:100%;
    max-width:2500px;
    max-height:1500px;
    z-index:1;
} 
.overlay{
    background: rgb(0, 0, 0); /*Fallback */
    background: rgba(0, 0, 0, 0.5);
    padding: 5px 5px;
    position:relative;height:100%;
} 
```

# apache - 在 apache 访问日志中获取 PROPFIND

> ID：12488121
> 
> 赞同：1
> 
> 时间：2012-09-19T03:22:50.673
> 
> 标签：apache, .htaccess

我在我的 apache 访问日志文件中收到很多请求，如下所示：

```
50.80.29.105 - - [19/Sep/2012:07:32:31] "PROPFIND /images/logos/puzzles.gif HTTP/1.1" 501 5014 
```

因为这个错误是在我的服务器上生成的；并且日志文件被异常填满。有没有办法避免这种情况？可能放在 robots.txt 中！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:27:08.683

block `Microsoft-WebDAV-MiniRedir`，并为 添加一个通用块`any UA using: WebDAV`，因为这是 WebDAV 使用的一种方法，主要由试图提高其排名的组织使用。

将这些行添加到 httpd.conf 的 [Directory] ​​部分，保存并重新启动 Apache：

```
SetEnvIf User-Agent ^Microsoft-WebDAV-MiniRedir BegoneWebDAV
Order Allow,Deny
Deny from env=BegoneWebDAV 
```

# java - 如何在 Android 中初始化 Drive 对象以执行对 Google Drive 的请求？

> ID：12488122
> 
> 赞同：1
> 
> 时间：2012-09-19T03:23:07.810
> 
> 标签：java, android, google-drive-api

> **可能重复：**
> [Android 打开和保存文件到/从 Google Drive SDK](https://stackoverflow.com/questions/12164024/android-open-and-save-files-to-from-google-drive-sdk)

我正在尝试在我的 android 应用程序中从 Google Drive 上传和下载文件。

我能够使用`AccountManager.getAuthToken()`.

现在，我不知道如何使用该令牌来初始化 Drive 对象以开始向 Google Drive 发送请求。我使用了 Google Drive 稀缺文档中的示例中的以下代码，但它不起作用。显然，调用成功了，但是当我尝试上传文件时，它只是挂断，直到 Android 告诉我应用程序没有响应。

```
GoogleCredential credential = new GoogleCredential().setAccessToken(authToken);
HttpTransport httpTransport = new NetHttpTransport();
JsonFactory jsonFactory = new JacksonFactory();
Drive drive = null;

drive = Drive.builder(httpTransport, jsonFactory)
    .setApplicationName(APP_NAME)
    .setHttpRequestInitializer(credential)
    .setJsonHttpRequestInitializer(new GoogleKeyInitializer(API_KEY))
    .build(); 
```

要上传某个文件，我执行以下操作：

```
try
{
    // local file
    java.io.File fileLocal = new java.io.File(FILE_NAME);

    // remote file

    File remoteFile = new File();
    remoteFile.setTitle(fileLocal.getName());
    remoteFile.setDescription("Text File");
    remoteFile.setMimeType("text/plain");

    // load the content of the local file into the remote content
    FileContent remoteFileContent = new FileContent("text/plain", fileLocal);

    // upload the file into Google Drive
    File resultFile = drive.files().insert(remoteFile, remoteFileContent).execute();

    lblStatus.setText("Upload successful with file ID: " + resultFile.getId());
}
catch (Exception e)
{
    // error handling
    ...
} 
```

我已经阅读了 Google API 文档，它们一团糟，而且这些类没有适当的文档。他们提供的样品非常混乱。

知道为什么应用程序没有响应吗？我究竟做错了什么？任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:42:28.807

几周前我遇到了这个问题。看看这里，我在那里写了一篇关于如何使 Google Drive 主要在 Android 上运行的相当广泛的解释。（我说主要是因为文件下载似乎没有得到适当的授权......）

[Android 打开和保存文件到/从 Google Drive SDK](https://stackoverflow.com/questions/12164024/android-open-and-save-files-to-from-google-drive-sdk)

# javascript - 每次单击链接时都会出现脚本错误

> ID：12488124
> 
> 赞同：2
> 
> 时间：2012-09-19T03:23:21.787
> 
> 标签：javascript, jquery, html, navigation, anchor

我的网站上一切正常，但由于某种原因，每当我单击网站上任何位置的链接时，我都会在控制台中收到一条错误消息。该错误与此处的这行编码有关：

```
jQuery(function($){
  $('.navbar a, .scroll a, .smoothscroll a').bind('click',function(event){
    var $anchor = $(this);

    $('html, body').stop().animate({
        scrollTop: $($anchor.attr('href')).offset().top
    }, 850,'easeInOutExpo');

    event.preventDefault();
  });
}); 
```

我得到的错误是：

“SCRIPT5007：无法获取属性 'top' 的值：对象为 null 或未定义 custom.min.js，第 6 行字符 197”

它突出显示的确切代码是上述代码的这一部分：

```
$('html, body').stop().animate({
  scrollTop: $($anchor.attr('href')).offset().top
}, 850,'easeInOutExpo') 
```

我所知道的是，当我删除上述代码时，我的滚动到链接停止在以下页面上工作：

[http://www.northtownsremodeling.com/things-to-know.php](http://www.northtownsremodeling.com/things-to-know.php)

您可以通过转到带有如下过滤器的页面来查看弹出错误并轻松地留在控制台中：

[http://www.northtownsremodeling.com/bathroom/](http://www.northtownsremodeling.com/bathroom/)

并单击其中一个过滤器按钮。

最终，我试图做到这一点，以便我的滚动到设置仍然有效，但不再出现该错误。我很久以前制作了这个脚本，当一切正常运行时，我真的很困惑是什么导致了这个错误？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T03:34:34.343

您遇到的问题是给出错误的代码是用于滚动到预定义的 div，并且您在 url 的标签（单击链接的 href 属性）中有它的 id（目标 div）。

当您单击“普通”链接时，这是问题，因为它不包含标签，它是页面上存在的元素的 id，所以`$($anchor.attr('href'))`给出空数组，因为没有可以用 ie 选择的元素`$("http://www.northtownsremodeling.com/alliances.php")`，所以在这种情况下偏移() 未定义并给您一个错误。

要解决此问题，请替换：

```
$('html, body').stop().animate({
    scrollTop: $($anchor.attr('href')).offset().top
}, 850,'easeInOutExpo'); 
```

和：

```
// get target div to scroll to
var target = $($anchor.attr('href'));
// if target is valid, scroll to
if(target && target.offset()){
    $('html, body').stop().animate({
        scrollTop: target.offset().top
    }, 850,'easeInOutExpo');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T03:33:04.050

演示：http: [//jsfiddle.net/SWgYD/](http://jsfiddle.net/SWgYD/)

我认为这是因为`href`属性不包含正确的选择器。如果链接符合 id 的块`nav`，则链接的`href`属性应该是`#nav`。

您应该只将事件处理程序绑定到导航链接。

# websphere - 会话的 LiveCount 是否包括 websphere 中从内存到内存复制的会话？

> ID：12488134
> 
> 赞同：2
> 
> 时间：2012-09-19T03:25:42.953
> 
> 标签：websphere, websphere-7, websphere-6.1

我可以从 Websphere TPV 中看到会话的**LiveCount**和**ActiveCount**。至于启用了内存到内存复制的 websphere 集群环境，这里的 session 的 LiveCount 是否包括来自其他应用程序服务器的备份副本的会话？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-31T09:13:31.553

我相信相关的 mbean 会在不关心会话如何进入本地商店的情况下查询商店。但是，您可能必须启用对服务器的推送策略才能拥有所有可用会话的副本。否则，您将只有访问会话的计数（使用拉取策略的访问要求另一台服务器提供副本）。

# c# - Linq 到 XElement 的 xml 部分

> ID：12488140
> 
> 赞同：2
> 
> 时间：2012-09-19T03:27:16.743
> 
> 标签：c#, xml, linq

我正在使用 Linq to XML 将列表保存到 XML 字符串中。

我试图获取的 xml 字符串：

```
<people>
<name>xxx</name>
<age>23</age>
</people>
<people>
<name>yyy</name>
<age>25</age>
</people> 
```

C#代码：

```
List<Peoples> peopleList = new List<Peoples>(); 
peopleList.Add(new Peoples() { Name = "xxx", Age = 23 });
peopleList.Add(new Peoples() { Name = "yyy", Age = 25 });
var people (from item in peopleList
select new XElement("people",
                                new XAttribute("name", item.Name),
                                new XAttribute("age", item.Age)
                            )); 
```

我怎样才能转换`var people`成`XML string`？

谢谢你。

* * *

编辑：

我能想到的是在xml中添加一个根元素，并用空字符串替换和。

* * *

Jignesh Thakker 解决方案有效：

```
string str = people.Select(x => x.ToString()).Aggregate(String.Concat); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T05:47:30.723

您可以通过两种解决方案获取 XML 字符串。

**解决方案 1：**要获取 XML 字符串，您需要将 XmlElement 放在 XDocument 对象中。尝试，

```
 List<Peoples> peopleList = new List<Peoples>(); 
  peopleList.Add(new Peoples() { Name = "xxx", Age = 23 });
  peopleList.Add(new Peoples() { Name = "yyy", Age = 25 });
  var people =  (from item in peopleList
  select new XElement("people",
                            new XElement("name", item.Name),
                            new XElement("age", item.Age)
                        ));

  XElement root = new XElement("Peoples");
  root.Add(people);
  XDocument xDoc = new XDocument(
                         new XDeclaration("1.0", "utf-8", "yes"),
                         root);
  string str = xDoc.ToString(); 
```

您需要根元素来获取 Xml 字符串。

**输出：**

```
<Peoples>
  <people>
    <name>xxx</name>
    <age>23</age>
  </people>
  <people>
    <name>yyy</name>
    <age>25</age>
  </people>
</Peoples> 
```

这里将姓名和年龄视为 XElement。正如您提到的有问题的代码`XAttribute`。如果您想将姓名和年龄视为`XAttribute`.

```
 List<Peoples> peopleList = new List<Peoples>(); 
   peopleList.Add(new Peoples() { Name = "xxx", Age = 23 });
   peopleList.Add(new Peoples() { Name = "yyy", Age = 25 });
   var people =  (from item in peopleList
                           select new XElement("people",
                            new XAttribute("name", item.Name),
                            new XAttribute("age", item.Age)
                        ));

    XElement root = new XElement("Peoples");
    root.Add(people);
    XDocument xDoc = new XDocument(
                         new XDeclaration("1.0", "utf-8", "yes"),
                         root);

    string str = xDoc.ToString(); 
```

**输出：**

```
<Peoples>
  <people name="xxx" age="23" />
  <people name="yyy" age="25" />
</Peoples> 
```

**解决方案 2：**如果您想要来自以下的 Xml 字符串，请尝试以下操作`List<XElement>`：

```
string str = people.Select(x => x.ToString()).Aggregate(String.Concat); 
```

如果 XElement 用于姓名和年龄，则**输出：**

```
 <people>
    <name>xxx</name>
    <age>23</age>
  </people>
  <people>
    <name>yyy</name>
    <age>25</age>
  </people> 
```

如果 XAttribute 用于姓名和年龄，则**输出：**

```
 <people name="xxx" age="23" />
  <people name="yyy" age="25" /> 
```

希望它应该工作。解决方案 2 最适合您的需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T03:50:52.807

您希望“姓名”和“年龄”成为元素，而不是属性。由于您所需的输出中没有顶部元素。它是两个元素的顺序输出。

```
void Main()
{
    List<Peoples> peopleList = new List<Peoples>(); 
    peopleList.Add(new Peoples() { Name = "xxx", Age = 23 });
    peopleList.Add(new Peoples() { Name = "yyy", Age = 25 });
    var people =(from item in peopleList
    select new XElement("people",
                                    new XElement("name", item.Name),
                                    new XElement("age", item.Age)
                                ));
    Console.WriteLine (people.First());
    Console.WriteLine (people.Last());
}

class Peoples
{
    public string Name {get;set;}
    public int Age {get;set;}
} 
```

编辑#1：我想强调的是，您想要的输出不是单个 xml 输出。如果我添加一个根对象，你会非常接近。试试这个：

```
XElement root = new XElement("root");
foreach (var item in peopleList)
{
    root.Add(new XElement("people",
                                new XElement("name", item.Name),
                                new XElement("age", item.Age)
                            ));         
}
Console.WriteLine (root.ToString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T03:55:53.373

也许这会给你你所需要的

```
List<Peoples> peopleList = new List<Peoples>();
            peopleList.Add(new Peoples() { Name = "xxx", Age = 23 });
            peopleList.Add(new Peoples() { Name = "yyy", Age = 25 });

            var people = new XElement("Peoples", peopleList.Select(p => 
                                                             new XElement("people",
                                                                          new XAttribute("name", p.Name),
                                                                          new XAttribute("age", p.Age)
                                                                 ))).ToString(); 
```

这将产生以下 XML

```
<Peoples>
  <people name="xxx" age="23" />
  <people name="yyy" age="25" />
</Peoples> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T04:09:21.290

```
class Program
{
    static void Main(string[] args)
    {
        List<Person> peopleList = new List<Person>(); 
        peopleList.Add(new Person() { Name = "xxx", Age = 23 });
        peopleList.Add(new Person() { Name = "yyy", Age = 25 });

        XElement xmlDoc = new XElement("people", from p in peopleList
                                                 select new XElement("person",
                                                                     new XElement("name", p.Name),
                                                                     new XElement("age", p.Age)));

        Console.WriteLine(xmlDoc.ToString());
        Console.ReadKey();
    }
}

public class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
} 
```

将产生：

```
<people>
  <person>
    <name>xxx</name>
    <age>23</age>
  </person>
  <person>
    <name>yyy</name>
    <age>25</age>
  </person>
</people> 
```

# java - 两种形式但只有1个jsp文件

> ID：12488141
> 
> 赞同：4
> 
> 时间：2012-09-19T03:27:26.783
> 
> 标签：java, html, jsp, forms

这就是我正在做的事情。我有一个 .jsp 文件。但是，我有两个表单，这些表单中有多个输入。

检测一个表单已提交但另一个表单未提交的最佳方法是什么？这是一个例子：我有这个表格：

```
<form  name = "login" action="index.jsp" method="get">
Username: <input id="username" name="username" type="text"/><br/>
Password: <input id="password" name="password" type="password"/>
<input type="submit" Value="Login" ></input>
</form> 
```

如果单击该按钮，我想运行此代码：

```
String username = request.getParameter("username");
String password = request.getParameter("password");
if((username!= null && !username.trim().equals("")) && (password != null && !username.trim().equals(""))) {
    DBentry DBentry=new DBentry();
    boolean flag = DBentry.isTaken(username);
    if(flag) {%><script type="text/javascript">alert("Login Successful!");</script><%
        }
    else { %><script type="text/javascript">alert("Unrecognized username.  Please register!");</script><% }
    }
else { %><script type="text/javascript">alert("Please enter both a username and password!");</script><% } 
```

再往下，我会得到完全一样的东西，但提交不同的表格。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T03:33:45.163

给提交按钮一个唯一的名称。它成为请求参数名称。这样你就可以检查 if `HttpServletRequest#getParameter()`doesn't return `null`。

例如

```
<input type="submit" name="login" Value="Login" />

...

<input type="submit" name="somethingelse" Value="Something else" /> 
```

和

```
if (request.getParameter("login") != null) {
    // Login form submitted.
}
else if (request.getParameter("somethingelse") != null) {
    // Something else submitted.
} 
```

* * *

**与具体问题无关**，业务逻辑[不](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/)属于 JSP，而是属于[Servlet](https://stackoverflow.com/tags/servlets/info)。我也将开始努力。这使您能够将表单提交到不同的 URL。此外，您应该为此使用 POST 方法，而不是 GET 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T03:29:42.220

您可以在操作上传递不同的参数，例如 action="index.jsp?form=userlogin" 和其他参数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T03:31:42.670

```
<input type='hidden' name='formNumber' value='form2' /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T03:32:42.427

您在其中一个表单的表单字段变量列表中添加一个具有某些值的隐藏变量。在 JSP 中，检查该值是否已填充。如果填充表示 ，则提交第一个表单，否则提交第二个表单。例如：

```
<form  name = "login" action="index.jsp" method="get">
Username: <input id="username" name="username" type="text"/><br/>
Password: <input id="password" name="password" type="password"/>
<input type= "hidden" name="myform" value="form1"/>
<input type="submit" Value="Login" ></input>
</form> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-19T03:44:44.630

从另一个问题复制过来，希望对你有帮助

例如，您可以简单地通过 javascript 调用您的 servlet 方法

在提交按钮中，我只使用名称属性

```
 <li class="button-row">
  <input type="submit" value="ADD" id="add"class="btn-submit img-  swap" name="add" />
    <input type="submit" value="Delete"  class="btn-delete img-swap" name="delete" />
   <input type="submit" value="Update" class="btn-update img-swap" name="update" />
 <input type="submit" value="Search" class="btn-search img-swap" name="search" />
 </li> 
```

您可以通过提交标记名称在javascript中调用具有多种方法的单个servlet，如下所示

```
 <script type="text/javascript">
var frm = document.forms[0];

if (request.getParameter("add") != null) {

    var pageName = "/DepartmentServlet?method=add"
    frm.action = pageName;
    frm.submit();

 }
 else if (request.getParameter("delete") != null) {
//likewise you can call your other method from DepartmentServlet
//Even you can pass parameter by onClick event
// Invoke action 2.
  }
 else if (request.getParameter("update") != null) {
// Invoke action 3\.  }

 </script> 
```

# facebook - 在 Facebook 中，当有人喜欢我的帖子时知道电子邮件吗？

> ID：12488146
> 
> 赞同：-1
> 
> 时间：2012-09-19T03:28:05.363
> 
> 标签：facebook, email, facebook-like

当有人喜欢我的帖子时，我可以知道电子邮件吗？示例“A”喜欢我的帖子，我现在可以发送 A 的电子邮件吗？我怎么知道？

谢谢

安迪约诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:30:08.233

你不能

（没有什么可添加的，只是一些满足 SO 答案长度要求的虚拟文本）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T03:32:27.210

如果用户的个人资料是公开的，那么您将在他/她的个人资料信息中看到该电子邮件。但是，您无法仅通过喜欢您的帖子来查看电子邮件。希望有帮助。

# c# - 使用Javascript检查radiobuttonlist是否具有一定的价值

> ID：12488149
> 
> 赞同：-3
> 
> 时间：2012-09-19T03:28:32.150
> 
> 标签：c#, javascript, asp.net, radiobuttonlist

这可能是一个非常愚蠢的问题 - 但是..

我有一个带有 2 个项目的单选按钮列表，我需要检查其中哪一个是使用 Javascript 检查的。

到目前为止，我所拥有的是：

```
var AspRadio = document.getElementsByName('<%= RadioButtonList1.ClientID %>');
for (var i = 0; i < AspRadio.length; i++) {
    if (AspRadio[i].checked) {
        if (AspRadio[i].value == "item1") {
          //do stuff here
         }
        else if if (AspRadio[i].value == "item2") {
        //do stuff
         } 
```

我怀疑我检查单选按钮值的方式不正确？！

请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:33:12.950

My gosh, finally found the problem why my codes wasnt working..

Here is the solution I've got:

```
 var RB1 = document.getElementById('<%= RadioButtonList1.ClientID %>');
                var radio = RB1.getElementsByTagName("input");

                if (radio[0].checked)
                 {
                 //do something
                 }

                if (radio[1].checked)
                {
                //do something
                 } 
```

i was missing the line: var radio = RB1.getElementsByTagName("input");

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T03:47:17.580

有了这个，您将能够获得单选按钮的选定值

```
var myValue = $('input[name=<%= RadioButtonList1.ClientID %>]:checked').val(); 
```

**更新**

要检查选定的收音机，您可以使用它

```
if ($('input:radio[name=<%= RadioButtonList1.ClientID %>]')[0].checked)
{
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T04:00:48.550

这是[jsFiddle](http://jsfiddle.net/LTTBZ/)上的一个示例。

```
function checkSelectedRadio() {

    var selectRadio = $('input[name=<%= RadioButtonList1.ClientID %>]:checked', '#myForm').val();

    alert(selectRadio);
} 
```

# iphone - 从代码中的任何位置弹出模态视图

> ID：12488151
> 
> 赞同：6
> 
> 时间：2012-09-19T03:29:29.307
> 
> 标签：iphone, ios, xcode

是否可以从 iOS 应用程序中的任何位置“弹出”视图。

例如，我想要一个事件来触发视图滑入（模态），并且该事件可以在任何时间、在应用程序的任何屏幕上发生。

此外，我们希望这可以包含在其他项目中，并且希望他们不必对这些项目做任何特殊的事情（除了引用项目中的电线）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T04:34:16.623

在这种情况下，您最好使用 appdelegate，但这取决于您使用的应用程序类型。

在 appdelegate 中创建一个可以从任何视图控制器调用的方法

```
- (void)myMethod {
    MyController *myController = [[MyController alloc] init];
    [self.window.rootViewController presentModalViewController:myController animated:YES];
} 
```

并且要解除此控制器，您必须在视图控制器本身上创建操作。

**注意：**您一次只能拥有 1 个模型视图控制器，因此请确保您的模型视图控制器本身就是一个导航控制器，以便将所有视图堆叠在其中。

像这样的东西，

```
- (void)myMethod {
     MyController *myController = [[MyController alloc] init];
     if([self.window.rootViewController modalViewController]) {
          [(UINavigationController *)self.window.rootViewController.modalViewController pushViewController:myController animated:YES];
     } else {
          UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:myController];
           [self.window.rootViewController presentModalViewController:navController animated:YES];
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-12T13:46:36.523

我创建了这个小递归方法来处理这个问题：[https ://gist.github.com/MartinMoizard/6537467](https://gist.github.com/MartinMoizard/6537467)

这是 UIViewController 上的一个类别。您基本上可以从 window.rootViewController 调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T03:43:57.563

如果您希望模式自行关闭（也许有一个按钮？）只需调用：

```
[self dismissViewControllerAnimated:YES completion:NULL]; 
```

这将自动将其转发到显示它的视图控制器并关闭模态视图控制器。

# c# - Entity Framework 5 不更新两个实体中的导航属性

> ID：12488152
> 
> 赞同：0
> 
> 时间：2012-09-19T03:29:34.413
> 
> 标签：c#, .net, entity-framework

我已经更新了一个项目以使用新`Entity Framework`的`VS2012`. 但是，我遇到了一些问题，因为我的代码引发了异常。

在 的`VS2010`版本中`Entity Framework`，我能够`Entity`在调用之前创建或修改并使用它的导航属性`SaveChanges()`

例如：具有发票集合的客户端的导航属性。

```
Client c = new Client();
Invoice I = new Invoice();
c.Invoices.Add(I); 
```

然后我就可以`Invoice.Client`在我的代码中的某个地方使用它，然后再实际保存它而不会出现问题。现在`Invoice.Client == null`。

同样在设置中`I.Client = C`，`I`不显示在下`C.Invoices`

我在这里缺少什么，或者这只是怎么回事`Entity Framework 5`？

**编辑**

在`VS2010`中，我创建了一个新项目，添加了相同的项目，`DataSource`并且以下代码按预期工作：

```
Client C = new Client();
C.Name = "Test";
Invoice I = new Invoice();
C.Invoices.Add(I);
MessageBox.Show(I.Client.Name); 
```

做了完全相同的事情`VS2012`，没有骰子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T03:58:38.203

在您上面的示例中，您实际上并没有附加到上下文中。

EF 的反向引用仅通过名为 fixups 的进程填充，该进程作为 DetectChanges 的结果运行，而 DetectChanges 又由（在您的情况下） IDbSet<>.Add()

如果您在向其添加发票之前修改代码以将客户端附加到上下文，您应该会看到预期的行为

**编辑：**

我还没有真正在 DB First (.edmx) 中使用此功能，但您可以在 2010 年使用以下模型类型启用它。

[由于STE 已被弃用](http://msdn.microsoft.com/en-US/data/jj613668)，此模型类型已于 2012 年删除。（虽然我的理解是它们仍然适用于向后兼容，所以如果您要从 2010-2012 升级项目，您仍然可以使用该模型）

![自我追踪实体](../Images/45a25933bc3f1a8d2bc150b77123232d.png)

# php - JSON.stringify 数据在 url 中是什么样的

> ID：12488156
> 
> 赞同：1
> 
> 时间：2012-09-19T03:30:02.727
> 
> 标签：php, ajax, json, jquery, stringify

我使用通过调用`JSON.stringify`将 jQuery 数组`$_POST`数据发送到 PHP 文件`.ajax()`。调用工作正常并返回所需的数据，但是：

**如果我要手动调试和输入变量，这些数据在 url 格式中是什么样的？**

`http://domain.com/ajax.php?foo=1,2&bar=3,4`或者是其他东西？

**我的解决方案：** 网址是`http://domain.com/ajax.php?foo=[1,2]&bar=[3,4]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:52:32.167

我建议使用 fiddler 并使用 Composer，因此您不必使用单独的代码进行调试。您还可以使用 IE 中的控制台来测试结果的外观。通常 json.stringy 将您的 json 转换为字符串，因此它看起来像

[1,2,3,4,5,6,7]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:04:18.427

您将无法将 JSON 数据作为 URL 发布。你正在混合苹果和梨。但是你可以做一些方法。

1）如果 JSON 非常简单，您实际上可以像这样 http://urdomain/ajax.php?data=[4,5,7] 并使用 $_REQUEST['data']而不是 $_POST['data'] 。但这可能会产生比其价值更多的问题。

2）最好的选择是使用这样的浏览器[插件](https://chrome.google.com/webstore/detail/cokgbflfommojglbmbpenpphppikmonn?utm_source=chrome-ntp-icon)。您可以做适当的 json 帖子并获得反馈。

3) 或者如果你只是想看看发生了什么，你可以在其开发面板中查看浏览器 NET 日志。

# java - Google App Engine 未启动的留言簿示例

> ID：12488162
> 
> 赞同：0
> 
> 时间：2012-09-19T03:30:50.150
> 
> 标签：java, google-app-engine

不知道发生了什么。我在 Google 的 App 引擎中运行了第一个应用程序，然后发生了一些变化。我终于跳到另一台电脑上重新安装了所有东西，完成了教程，但它仍然没有用。显然，我忘记了第一个应用程序中的许多失误之一的解决方法。

在控制台中它说

```
<terminated> Guestbook [Web Application] C:\Program Files (x86)\Java\JDK1.0.6_35\bin\javaw.exe 
```

然后下面是以下内容：

```
Options:
 --help, -h                 Show this help message and exit.
 --server=SERVER            The server to use to determine the latest
  -s SERVER                   SDK version.
 --address=ADDRESS          The address of the interface on the local machine
  -a ADDRESS                  to bind to (or 0.0.0.0 for all interfaces).
 --port=PORT                The port number to bind to on the local machine.
  -p PORT
 --sdk_root=DIR             Overrides where the SDK is located.
 --disable_update_check     Disable the check for newer SDK versions.
 --generated_dir=DIR        Set the directory where generated files are created. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:57:45.723

从工作区中删除 .metadata 文件夹。重新创建和导入相同的项目将解决问题。

# django - 为静态站点设置密码保护的最简单方法？

> ID：12488163
> 
> 赞同：3
> 
> 时间：2012-09-19T03:31:11.587
> 
> 标签：django, authentication, mod-auth, static-site

我有一个静态网站。

我想要最简单的密码保护目录的方法，带有用于添加/删除用户的基本管理 UI。我将拥有如此少的用户，以至于我不关心性能。

我不在乎它是 PHP 还是 Django 或其他什么，我只想要一个完整的软件包。

*   Apache 基本身份验证不好，因为您无法注销。也没有用于添加用户的 UI。

*   我尝试将所有内容都抛在 Django auth 后面并通过 Django 提供文件。但是，Chrome 将我所有的 text/css 标头都视为 text/plain，因此我没有显示任何样式表。

*   我无法在我的服务器上使用 mod_xsendfile，因为我无法重新配置 Apache 来添加新模块。无论如何，我认为这种方法是矫枉过正的。

是否有一个代码包可以为静态站点实现基本管理员身份验证？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T04:04:12.407

我使用 nginx，这通常是我的解决方案。也许类似的东西可用于 Apache。不知道。

在 nginx 中，代理可以返回带有标头的响应，`X-Accel-Redirect`其中包含 nginx 应该重定向的位置。例如，使用以下 nginx 配置：

```
server {
   ...
   location / {
       proxy_pass: ...;
   }
   location /media/secure/ {
       internal;
       alias ...;
   }
} 
```

如果代理通行证将返回：

```
X-Accel-Redirect: /media/secure/somefile; 
```

然后 nginx 会将请求从代理重定向到该`/media/secure/`位置，从而提供静态文件。

所以我通常在 Django 中对用户进行身份验证，然后将带有位置的标头返回到 nginx 服务的文件中。这很好，因为 Django 不必提供静态文件，用户不能只访问该安全位置（因为该`internal`指令），还因为如果所有 mime 类型都在 nginx 中配置，那么所有文件都可以正确提供。 .

同样，这是针对 nginx，而不是针对 Apache，但也许 Apache 也有类似的东西。

**编辑**

这是一个简单的 Django 代码片段，假设您使用与上面相同的 nginx 设置。如果在 GET 中提供了路径，则此视图提供安全文件：

```
@login_required()
def serve_secure_static(request, file_root=os.path.join(settings.MEDIA_ROOT, 'secure')):
    if not request.method == 'GET':
        return HttpResponseBadRequest('Only GET allowed')

    if not 'file' in request.GET:
        return HttpResponseBadRequest('File query must be provided')

    # make sire loggen user is allowed to see the file
    # maybe check some custom permission

    file_path = request.GET['file']

    # if in DEBUG, make Django serve static file
    # because nginx might not be configured
    if settings.DEBUG:
        abs_file_path = os.path.join(file_root, file_path)
        file_data = open(abs_file_path, 'rb').read()
        return HttpResponse(file_data, mimetype=mimetypes.guess_type(file_path))

    # else make nginx serve static file
    else:
        redirect_url = '/%s' % file_path
        response = HttpResponse()
        response['X-Accel-Redirect'] = redirect_url
        return response 
```

因此，如果您将此视图添加到 urlconfig：

```
url(r'^serve_secure_static/$', 'server_secure_static') 
```

您可以通过以下方式请求安全文件：

```
http://domain.com/serve_secure_static/?file=path/to/file/here/relative/to/media/secure.css 
```

这将从

```
/media/secure/path/to/file/here/relative/to/media/secure.css 
```

# android - 设置图像视图的权重和参数

> ID：12488165
> 
> 赞同：1
> 
> 时间：2012-09-19T03:31:18.527
> 
> 标签：android, xml, layout, view

我正在尝试动态创建布局，但遇到了一个小问题。出于某种原因，我无法弄清楚如何设置 ImageViews 的权重。我在教程网站上查找了这个，但是当我尝试使用它时出现错误：

LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT, 1);

我想要完成的是（从大纲的角度来看）：

--LinearLayout（水平）（LL1）

------图像视图（IV1）

------线性布局（垂直）（LL2）

我试图在 XML 中完成的代码：

```
 <LinearLayout
        android:id="@+id/skillOneAbility"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/skillOneImage"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"/>

        <LinearLayout
            android:id="@+id/skillOneAbilityInfo"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="5"
            android:orientation="vertical" > 
```

这是我到目前为止的代码，但我不确定如何设置 ImageView 的权重：

```
 private LinearLayout createInnerHorizontalLayout1() {
    LinearLayout mainLayout = new LinearLayout(getActivity());
    mainLayout.setOrientation(LinearLayout.HORIZONTAL);
    mainLayout.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));

    //Create the image view and the linear layout with text views
    ImageView iView = new ImageView(getActivity());
    iView.setLayoutParams(new LayoutParams(0, LayoutParams.WRAP_CONTENT));

    LinearLayout myInnerVerticalLayout = createInnerVerticalLayout();
} 
```

我将如何完成我链接到顶部的那个 XML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T03:39:33.857

```
LinearLayout.LayoutParams layout = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT, .60f); 
```

最后一个参数是权重（一个浮点数），拥有 LinearLayout.LayoutParams 将修复您在导入错误的 layoutparams 时遇到的错误

# objective-c - 使用 objc_msgSend 调用实例方法

> ID：12488166
> 
> 赞同：7
> 
> 时间：2012-09-19T03:31:31.133
> 
> 标签：objective-c, cocoa, objective-c-runtime

我正在尝试使用该`objc_msgSend`方法动态调用某些方法。假设我想从 A 类调用 B 类中的某个方法，而 B 类中有两种方法，例如：

```
- (void) instanceTestWithStr1:(NSString *)str1 str2:(NSString *)str1;
+ (void) methodTestWithStr1:(NSString *)str1 str2:(NSString *)str1; 
```

我可以在A类中成功调用这样的类方法：

```
objc_msgSend(objc_getClass("ClassB"), sel_registerName("methodTestWithStr1:str2:"), @"111", @"222"); 
```

我也可以在 A 类中成功调用这样的实例方法：

```
objc_msgSend([[objc_getClass("ClassB") alloc] init], sel_registerName("instanceTestWithStr1:str2:"), @"111", @"222"); 
```

但问题是要获得 BI 类的实例，必须调用“initWithXXXXXX:XXXXXX:XXXXXX”而不是“init”，以便将一些必要的参数传递给 B 类来执行初始化操作。所以我在 A 类中存储了一个 ClassB 的实例作为变量： self.classBInstance = [[ClassB alloc] initWithXXXXX:XXXXXX:XXXXXX];

然后我调用这样的方法（成功）：

问题是，我想通过简单地应用类名和方法 sel 来调用方法，例如“ClassName”和“SEL”，然后动态调用它：

1.  如果是类方法。然后调用它： objc_msgSend(objc_getClass("ClassName"), sel_registerName("SEL"));

2.  如果是实例方法，则在调用类中找到已有的类实例变量：objc_msgSend([self.classInstance, sel_registerName("SEL"));

所以我想知道是否有任何方法：

1.  检查一个类是否有给定的方法（我发现“responseToSelector”就是那个）

2.  检查类方法或实例方法中的给定方法（也许也可以使用`responseToSelector`）

3.  检查一个类是否具有给定类的实例变量所以我可以调用一个实例方法，如：objc_msgSend(objc_getClassInstance(self, "ClassB"), sel_registerName("SEL"));

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T05:54:32.487

你可能想[读这个](http://www.friday.com/bbum/2009/12/18/objc_msgsend-part-1-the-road-map/)。您实际上要问的是“我想制作一个新的调度程序”，要回答*这个*问题，您应该对现有调度程序的工作方式有一个透彻的了解。

请告诉遇到你在做什么？在语言之间架起一座桥梁？因为如果不是这样，那么您将陷入一个非常有趣的兔子洞，但可能不是一个非常有效或优雅的解决方案。

现在：

> 问题是，我想通过简单地应用类名和方法 sel 来调用方法，例如“ClassName”和“SEL”，然后动态调用它：
> 
> 1.  如果是类方法。然后调用它： objc_msgSend(objc_getClass("ClassName"), sel_registerName("SEL"));

```
Class klass = objc_getClass("ClassName"); // NSClassFromString(@"ClassName")
SEL sel = sel_getUID("selector"); // NSSelectorFromString(@"selector");
if ( [klass respondsToSelector:sel] )
    objc_msgSend(klass, sel); 
```

如果您有要传递的参数，请参见下文。 `NSInvocation`理查德的回答是一种高级方法，但是是间接使用`objc_msgSend()`（并且 NSInvocation 有限制）。

> “2”。如果是实例方法，则在调用类中找到已有的类实例变量：objc_msgSend([self.classInstance, sel_registerName("SEL"));

那没有意义。类没有实例变量。一个类的实例有一个实例变量，但是你可能需要一个特定的实例，而不是你在这个地方创建的一些随机实例。实例携带状态并随着时间的推移增加该状态。

在任何情况下，您都可以`classInstance`使用上面的机制轻松地调用类上的方法（这完全没有意义——只需编写`[self classInstance]`并完成它），然后从那里：

```
id classInstance = [self classInstance];
SEL sel = ... get yer SEL here ...;
if ([classInstance respondsToSelector:sel])
   objc_msgSend(classInstance, sel); 
```

显然，如果您需要参数，请参见下文。

> 所以我想知道是否有任何方法：
> 
> 1.  检查一个类是否有给定的方法（我发现“responseToSelector”就是那个）

看上面。类响应`respondsToSeletor:`。如果要检查*类的实例*是否响应选择器，可以调用`instancesRespondToSelector:`.

```
Class klass = ... get yer class on...;
SEL someSelector = ... get that SEL ...;
if ([klass instancesRespondToSelector:someSelector])
    objc_msgSend(instanceOfKlassObtainedFromSomewhere, someSelector); 
```

再次，争论？见下文。

> “2”。检查类方法或实例方法中的给定方法（也许也可以使用`responseToSelector`）

看上面。给定一个类，您检查该类或实例是否响应任何给定的选择器。请注意，对于 NSObject 协议中的许多选择器，类将响应许多 NSObject 实例方法，因为*元类*——类是其实例的类——实现了相当多的上述方法。

> “3”。检查一个类是否具有给定类的实例变量所以我可以调用一个实例方法，如：objc_msgSend(objc_getClassInstance(self, "ClassB"), sel_registerName("SEL"));

setter/getter 方法和实例变量之间的关系完全是巧合。不需要 ivar，也不需要任何给定的 ivar 的 setter 和/或 getter。因此，这个问题没有意义，因为任意调用基于 ivar 名称的方法通常会失败。

正如 Richard 建议的那样，您可以使用键值编码，但这意味着手动装箱传递给 setter 的值以及手动取消装箱从非对象类型的 getter 检索的值。

在幕后，KVC 实现了一种启发式方法，以在类中搜索名称与请求名称大部分匹配的方法或 ivar。主要是因为它会做一些事情，比如搜索 _ 前缀等。 NSKeyValueCoding.h 标题是一个有趣的阅读。

在任何情况下，都不需要选择器。给定一个名称，只需执行以下操作：

```
id foo = [myInstance valueForKey:@"iVarName"]; 
```

和：

[myInstance setValue:[NSNumber numberWithInt:42] forKey:@"ivarName"];

显然，打字是一个主要问题。如果你有非对象类型，那么你将不得不处理让它们进出 NSValue 容器并且不是所有东西都适合，这让你对 KVC 方法/ivar 搜索算法进行逆向工程（不太硬——只是一堆字符串操作和查找），然后传递任意参数，如下所示。

* * *

请注意，您的两次调用`objc_msgSend()`在技术上都是错误的，因为两者都没有转换`objc_msgSend()`为具有显式参数类型的非可变参数形式。你需要类似的东西：

```
// - (void) instanceTestWithStr1:(NSString *)str1 str2:(NSString *)str1;
void (*msgSendVoidStrStr(id, SEL, NSString*, NSString*) = (void*)objc_msgSend;
msgSendVoidStrStr(...obj..., @selector(instanceTestWithStr1:str2:), str1, str2); 
```

这是因为可变参数 ABI 和显式参数类型的 ABI 不一定在所有架构上都兼容。ARC，IIRC，明确地执行了这一点。

* * *

还要注意，任意调用类或实例方法的概念，其中调用实例方法会即时实例化类的实例，这实际上没有多大意义。但是，嘿......你的代码。

* * *

请注意，您也不想以`sel_registerName()`这种方式打电话；如果你要调用一个选择器，它最好已经存在。该函数显式存在用于在运行时定义类。最好使用`NSSelectorFromString()`or （不幸的是，由于多年来没有纪律的程序员`sel_getUid()`，它实际上最终被调用）。`sel_registerName()`至少你的意图是正确的。

* * *

现在，要`objc_msgSend()`按照您的意愿使用，您需要回答一个问题，而结果的答案将截然不同。一个答案是“哦，做X”的简单路线，另一个答案是“哦，天哪，你正走在一条痛苦的道路上”。

问题：**您是否有一组固定的方法签名，或者您是否必须传递任意一组多种类型的参数？**

*最终，有多少和多少不同类型的参数将决定代码的复杂程度。* 如果您只有 0,1 或 2 个参数并且它们始终是对象，请坚持使用`invokeSelector:`和。`invokeSelector:withObject:``invokeSelector:withObject:withObject:`

如果答案是“固定的方法签名集”，那么答案就在上面；只需声明一个函数指针，其中包含您要使用的所有不同可能的方法签名，并在运行时选择正确的函数指针，然后按照上述方法将其作为函数调用调用。

现在，如果答案是“具有许多不同参数组合的任意选择器集”，那么答案就困难得多。您需要使用[libffi](http://sourceware.org/libffi/)（或类似的东西）以编程方式执行编译器在 compile 时所做的事情`msgSendVoidStrStr(...obj..., @selector(instanceTestWithStr1:str2:), str1, str2);`。 `libffi`提供使用几乎任意参数和返回类型对调用进行编码所需的一切。

它不容易使用。事实上，使用 libffi 构建自己的堆栈帧已经够难了，编写一个脚本来转储所有可能的调用组合并为每个组合创建一个覆盖函数可能会更容易，可能会将参数作为`NSArray*`容器并在内部解码它们. 类似（自动生成）：

```
void msgSendVoidStrStr(id obj, SEL _cmd, NSArray*args) {
    objc_msgSend(obj, _cmd, [args objectAtIndex:0], [args objectAtIndex:1]);
} 
```

事实证明，这比编写一堆技巧运行时代码更容易调试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T04:13:19.480

好的，这是我的基本实现。它假设了很多：

*   所有对象都必须是子类`NSObject`。时期。如果你不这样做，那么你将遇到问题`-methodSignatureForSelector`。
*   所有方法都必须具有有效的签名。这意味着像我这样的运行时黑客在动态添加方法时有点搞砸了，必须先做我们的研究。
*   它假定向原语发送消息是可以的（使用 KVC 提供的自动装箱，例如`double`提升为`NSNumber`）
*   它不支持传递给函数的原始参数（所以这里只有对象，或者如果你想对桥接感到疯狂，可以使用指针）
*   它也不支持可变长度函数（的限制`NSInvocation`）。如果您想这样做，请尝试查找采用 a 的函数的版本`va_list`并改为使用它们。
*   它只检查 iVars，而不是属性，但是`@synthesize`'d 属性应该已经在列表中。

以下是一些编译说明：

*   必须启用 ARC。我不再为非 ARC 编码，所以如果有人想尝试反向移植这个，他们可以成为我的客人。
*   还需要 C99 VLA。任何编译 ARC Objective-C 的编译器都应该已经有这个（事实上，我认为 clang 是唯一支持 ARC 的编译器，它确实支持 C99 VLA），但如果没有，那么你可以尝试和`malloc`朋友们搞砸.
*   在为 iOS 架构编译时，这是未经测试的。我只使用 Mac OS 进行了测试，但我在这里使用的方法**应该**可以在 iOS 上使用，如果不是，请告诉我，我会修复它。

废话不多说，代码如下（我在其中添加了一些`NSNumber`和`NSString`类别进行测试，但它们与此代码的目的无关）：

```
#import <objc/runtime.h>

@interface NSObject(dynamicSELlookup)

-(void) performSelectorOnClassOrIvar:(Class) cls selector:(SEL) selector arguments:(NSArray *) args;

@end

@implementation NSObject (dynamicSELlookup)

-(void) performSelectorOnClassOrIvar:(Class) cls selector:(SEL) selector arguments:(NSArray *) args
{
    // we must copy to a C-array so we can take adresses. here we use C99's VLAs, so we don't have to free anything
    __unsafe_unretained id argsArray[args.count];
    [args getObjects:argsArray];

    // if its a static method, then our job is simple. create a NSInvocation from our arguments, and send it on it's way
    if ([cls respondsToSelector:selector])
    {
        NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:[cls methodSignatureForSelector:selector]];

        for (int i = 0; i < args.count; i++)
        {
            // notice the '+ 2' here. this is because there are two 'hidden' arguments to an objective-c message call - '_cmd' & 'self'.
            [invocation setArgument:&argsArray[i] atIndex:i + 2];
        }

        // set the selector of the invocation, and fire it off!
        [invocation setSelector:selector];
        [invocation invokeWithTarget:cls];
        return;
    }

    // otherwise loop through all the iVars.
    unsigned iVarCount = 0;
    Ivar *iVars = class_copyIvarList([self class], &iVarCount);

    for (int i = 0; i < iVarCount; i++)
    {
        // We are going to use KVC here, so we can auto-box our return values (thus it works for primitives too)
        id value = [self valueForKey:@(ivar_getName(iVars[i]))];

        // make sure the target class is OK, and that we respond to the selector
        if ([value isKindOfClass:cls] && [value respondsToSelector:selector])
        {
            // just like before, we create our invocation
            NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:[value methodSignatureForSelector:selector]];

            for (int i = 0; i < args.count; i++)
            {
                // notice the '+ 2' here. this is because there are two 'hidden' arguments to an objective-c message call - '_cmd' & 'self'. 
                [invocation setArgument:&argsArray[i] atIndex:i + 2];
            }

            // set the selector of the invocation, and fire it off!
            [invocation setSelector:selector];
            [invocation invokeWithTarget:value];
            // uncomment the below line if you only want to execute on the first target found
            // break;
        }
    }

    free(iVars);
}

@end

@interface MyObject : NSObject
{
    @public
    int someIntegerVar;
    double someDoubleVar;

    NSObject *someObjectVar;
}

@end

@implementation MyObject
@end

@implementation NSNumber(print)

+(void) classMethod
{
    NSLog(@"Hey, I'm a class method!");
}

// simple category for showing ivars off
-(void) printValue
{
    NSLog(@"%@", self);
}

-(void) printValueWithArg:(id) argument
{
    NSLog(@"%@ - %@", self, argument);
}

@end

@implementation NSString (print)

-(void) print
{
    NSLog(@"%@", self);
}

-(void) printFormat:(id) arg
{
    NSLog(self, arg);
}

@end

// Sample Usage
int main()
{
    @autoreleasepool
    {
        MyObject *obj = [MyObject new];
        obj->someDoubleVar = M_PI;
        obj->someIntegerVar = 5;
        obj->someObjectVar = @"hello there, %@";

        [obj performSelectorOnClassOrIvar:[NSNumber class] selector:@selector(printValue) arguments:nil];
        [obj performSelectorOnClassOrIvar:[NSNumber class] selector:@selector(classMethod) arguments:nil];
        [obj performSelectorOnClassOrIvar:[NSNumber class] selector:@selector(printValueWithArg:) arguments:@[ @"Hello" ]];
        [obj performSelectorOnClassOrIvar:[NSString class] selector:@selector(print) arguments:nil];
        [obj performSelectorOnClassOrIvar:[NSString class] selector:@selector(printFormat:) arguments:@[ @"Richard J Ross III"]];
    }
} 
```

输出：

```
2012-09-19 00:05:07.150 测试项目 [8592:303] 5
2012-09-19 00:05:07.152 TestProj[8592:303] 3.141592653589793
2012-09-19 00:05:07.152 TestProj[8592:303] 嘿，我是类方法！
2012-09-19 00:05:07.153 TestProj[8592:303] 5 - 你好
2012-09-19 00:05:07.153 TestProj[8592:303] 3.141592653589793 - 你好
2012-09-19 00:05:07.154 TestProj[8592:303] 你好，%@
2012-09-19 00:05:07.154 TestProj[8592:303] 你好，理查德 J 罗斯三世

```

# android - 使用 XML 文件作为 webview android

> ID：12488169
> 
> 赞同：1
> 
> 时间：2012-09-19T03:31:48.767
> 
> 标签：android, webview, xml-parsing

嗨，是否可以使用下面的这个 xml 文件在 android 上显示为 webview？不太确定是否有可能，或者我是否需要一个 html 文件。对不起，我不知道..

```
<?xml version="1.0" encoding="UTF-8" ?> 
  - <Recipes>
  - <recipe>
<category-name>Burritos</category-name> 
 <recipe-name>Pork and Bean</recipe-name> 
<recipe-description>Prepare this delicious and tasty recipe topped with protein rich ingredients. You can even use leftover meat while preparing this.</recipe-description> 
  <image>PorkAndBeanBurritos</image> 
 - <recipe-ingredients>
 - <![CDATA[ 
<li> 1 tbs olive oil </li>
<li> 500g pork loin steaks, thinly sliced </li>
<li> 1 red onion, halved, thinly sliced </li>
<li> 2 tsp sweet paprika </li>
<li> 2 tsp ground coriander </li>
<li> 1 x 400g can chopped tomatoes </li>
<li> 1 x 400g can red kidney beans, rinsed, drained </li>
<li> 2 tbs chopped fresh coriander </li>
<li> 8 flour tortillas </li>
<li> Shredded iceberg lettuce, to serve </li>
<li> Natural yoghurt, to serve</li>

]]> 
</recipe-ingredients>
- <recipe-steps>
- <![CDATA[ 
<li>Heat half the oil in a large non-stick frying pan over high heat. Add half the pork and cook, stirring, for 3 minutes or until golden. Transfer to a plate. Repeat with the remaining pork, reheating the pan between batches. </li>
<li>Heat the remaining oil in the pan. Add the onion and cook, stirring, for 2 minutes or until light golden. Add the paprika and coriander and cook, stirring, for 1 minute. Add the tomato and beans. Bring to the boil. Reduce heat to medium-high. Simmer for 3 minutes. </li>
<li>Return the pork to the pan. Simmer for 1 minute or until heated through. Remove from heat. Stir in the coriander. </li>
<li>Spoon a little of the pork mixture along the centre of each tortilla. Top with the lettuce and a dollop of yoghurt. Roll up to enclose the filling. Serve.</li>

 ]]> 
</recipe-steps>
 </recipe> 
```

编辑：

```
 public class Instructions extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.webview);

    WebView webview = (WebView) findViewById(R.id.myWebView);
    webview.setWebViewClient(new Instructions(this));
    webview.getSettings().setJavaScriptEnabled(true);
    webview.loadUrl("recipelistlite.xml");
} 
```

}

# android - android，提供导航服务

> ID：12488175
> 
> 赞同：2
> 
> 时间：2012-09-19T03:32:25.603
> 
> 标签：android, navigation, android-service

我在我的 Android 手机上使用了一些类似 Siri 的助手应用程序。每当我想让助手引导我到某个地方时，它都会自动调出内置的谷歌（或安卓）导航应用程序。现在我创建了自己的应用程序（做的事情略有不同）。我应该提供什么服务，以便当导航命令被触发时，它会弹出并与谷歌应用程序竞争，并且用户可以选择下次使用它作为默认应用程序？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T05:07:00.300

更新以回应 Tung Mai Le 的评论。

为了让您的应用程序列出来处理 google.navigation 意图，我创建了一个小程序来测试我之前的答案。它工作得很好，所以我不确定问题出在哪里。

在装有 Android 4.0 的 HTC 手机上运行，​​我不确定您使用的是哪个版本的 Android，或者您的设备是否已植根等。

完整清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.navigation.com"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

            <intent-filter>
                <action android:name="android.intent.action.VIEW" /> 
                <category android:name="android.intent.category.DEFAULT" /> 
                <data android:scheme="google.navigation" /> 
            </intent-filter>
        </activity>
    </application>

    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

</manifest> 
```

完整代码（不尝试解析）

```
package com.navigation.com;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;

public class MainActivity extends Activity {

 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mIntent = getIntent(); 
        if (parseNavigationIntent(mIntent)) {

        {
    }

    private Intent mIntent = null; 

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);

        return true;
    }
}

private boolean parseNavigationIntent(Intent intent) {

   if (null == intent)
      return false; 

   String scheme = intent.getScheme();

   if (null==scheme || (!scheme.equals("google.navigation") && !scheme.equals("geo")))
       return false; 

   String data; 

   if (null == (data = intent.getData().getSchemeSpecificPart()))
       return false; 

    // parse data to get longitude, latitude, and possible address dependent on callers
    // formatting

    return true; 

} 
```

I activated navigation from google maps, and from robin, both produced a list with my app in it, and when selected it recognized the intent etc.

如果您之前选中了使用 google navigator（或除您的之外的任何其他程序）作为 Robin 默认的复选框，那么您的应用程序将无法启动。

您必须清除 robin 的数据，使其不再具有关联的默认首选项（一种核选项，但这是我发现取消关联的唯一方法）

当我将它设置为默认使用我的应用程序时，它总是刚刚启动它并给了我正确的方案和数据包。

显示 robin 的屏幕截图，其中包含可以启动意图的应用程序列表（我的是 Navigation Test）

![罗宾](../Images/7a782626756d71259b64f068df756dac.png)

![推送导航时列出了我的应用程序](../Images/f5baf95f48c83e1e14f155f407592014.png)

# c - Select() 使用相同的套接字描述符发送和接收

> ID：12488177
> 
> 赞同：1
> 
> 时间：2012-09-19T03:32:31.933
> 
> 标签：c, unix, select, client, recv

我想使用 select 在同一套接字描述符（服务器端）上的客户端/服务器上接收和发送。

```
timestruct* myTime;
sockfd = accept(listeningFd, 0, 0);

while(1)
    FD_ZERO(&my_fd_set)
    maxFd = sockfd
    FD_ZERO(&my_fd_set);
    FD_SET(sockfd, &my_fd_set);
    select(maxFd+1, &my_fd_set, &my_fd_set, NULL, myTime);

    for (j=0; j<=maxFd; j++)

    if(FD_ISSET(j, &temp_fd_set))
        if(j==sockfd)
            send()
        if(j==sockfd)
            recv() 
```

这基本上就是我想要做的。显然这不起作用，因为 sockfd 将是发送和接收的相同值。有没有办法在不使用 fork() 的情况下做到这一点？目前我有一个阻塞的接收和发送，但服务器可能需要接收多个命令，同时正在处理另一个命令以发送回客户端。我对c和'select（）'非常了解。因为 select 具有三个 fd_set 选项（读取、写入、执行），所以我想也许我可以做到这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T03:34:22.177

`rfds`对和`wfds`参数使用不同的集合`select`，以便您可以区分何时`sockfd`在一个集合中而不是另一个集合。

```
fd_set rfds;
fd_set wfds;
FD_ZERO(&rfds);
FD_ZERO(&wfds);

FD_SET(sockfd, &rfds);
FD_SET(sockfd, &wfds);
if(select(sockfd + 1, &rfds, &wfds, NULL, myTime) < 0) {
    perror("select");
    return -1;
}

if(FD_ISSET(sockfd, &rfds))
    recv();
if(FD_ISSET(sockfd, &wfds))
    send(); 
```

# r - 在 R-package `vars` 中向 fanchart 图中添加日期

> ID：12488179
> 
> 赞同：2
> 
> 时间：2012-09-19T03:32:43.710
> 
> 标签：r, plot

R 包`vars`有一些很好的类型建模的固定例程`VAR`，包括一个非常简洁的 fanchart 绘图方法。

这些图不包括日期 - x 轴仅标有数字。

例如：

```
require(vars)
data(Canada)
var.2c <- VAR(Canada, p = 2, type = "const")
var.2c.prd <- predict(var.2c, n.ahead = 8, ci = 0.95)
fanchart(var.2c.prd) 
```

我查看了代码，`fanchart`但无法理解如何实现我的目标。

有没有其他人解决过这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T03:56:24.277

它是基本图形，因此`xaxt="n"`将抑制默认轴`axis`并可用于制作新标签。这是一个时间序列对象，所以它确实没有我们可以识别为日期的东西，但可以提取时间

```
 times <- as.vector(time(Canada) ) 
```

这是 fanchart 中设置用户坐标的代码：

```
plot.ts(c(endog[, names[i]], rep(NA, n.ahead)), main = main[i], 
          ylim = c(ymin, ymax), ylab = ylab, xlab = xlab, col = col.y,  
         ...) 
```

我正在尝试添加一个 xy.labels 参数，以便 plot.ts 尊重它，但到目前为止没有成功。

~~我要把它还给你。这是我认为应该给出一个适当的位置，但它比绘制的点更宽。如果这在与这些模型相关的磨合和跳动问题方面有意义，那就太好了。如果不是，也许你可以改进这一点~~

```
axis(1, at=seq_along( c( times, rep(NA,8) )), labels=c( times, rep(NA,8)) ,
        las=3, line=2, cex.axis=0.6) 
```

额外的 NA 旨在说明具有预测的区域。长度来自`nrow(var.2c.prd$fcst[[1]]) [1] 8`

哈......我明白了：试试这个

```
fanchart(var.2c.prd, xaxt="n")
 par(new=TRUE)
 axis(1, at=seq_along( c( times, rep(NA,8) )), labels=c( times, rep(NA,8)) ,
       las=3, line=-26, cex.axis=0.6)
 axis(1, at=seq_along( c( times, rep(NA,8) )), labels=c( times, rep(NA,8)) ,
       las=3, line=0.5, cex.axis=0.6) 
```

![在此处输入图像描述](../Images/820bdd334dab0fad1dcbdc0c87efa7a6.png)

没有`par(new=TRUE)`. 您应该能够将其他轴放置在您想要的位置。

# cocos2d-iphone - 在 cocos2d/cocos2d-x 中触及优先级

> ID：12488180
> 
> 赞同：3
> 
> 时间：2012-09-19T03:32:56.377
> 
> 标签：cocos2d-x, cocos2d-iphone, cocos2d-x

我正在尝试在[cocos2d-x](/questions/tagged/cocos2d-x "显示标记为“cocos2d-x”的问题")中进行触摸。我对触摸的优先级有疑问，例如，当我使用`CCMenuItemSprite`或`CCControlButton`添加到具有`setTouchEnabled(true)`

或者即使我放了一个 What I found is touch is not first given to `ccTouchesBegan`(...I mean Layer) 而是由`CCMenuItemSprite`or `CCCOntrolButton`call backs 获取。

此外，如果我在所有图层上添加一个额外的图层顶部，并且`setTouchEnable`（真）相同的结果，我首先将触摸到 menuitem 和控制按钮，触摸后会吞下触摸。

有什么方法可以改变触摸的优先级吗？或者有什么方法可以覆盖`CCControlButton`或`CCMEnuItemSprite`...ccTouchesBegan 或在我想要触摸位置之后移动，`CCMenuItem`否则`CControlButton` 我必须重新考虑`CCSprite`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T06:23:25.927

覆盖你的 CCLayer 的方法

```
YOUR_LAYER::registerWithTouchDispatcher{
    CCTouchDispatcher::sharedDispatcher()->addTargetedDelegate(this, INT_MIN, true);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T08:59:38.187

您可以在 CCMenu.h 中找到它

```
enum {
    //* priority used by the menu for the event handler
    kCCMenuHandlerPriority = -128,
}; 
```

所以菜单的默认优先级设置为-128，如果你想让某些层在CCMenu之前检测到触摸，请尝试将它们的优先级设置为小于-128

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-29T05:39:56.247

哪个首先检测到触摸仅取决于 Widget 的优先级，我认为您为什么感到困惑是您可能认为它取决于 Widget 的 Zorder。因此，您可以更改添加的图层的优先级，并且确保优先级小于菜单项的优先级，在 Cococs2d-x 中为 -128。

CCLayer.h

```
/** priority of the touch events. Default is 0 */
virtual void setTouchPriority(int priority); 
```

CCMenu.h

```
enum {
    //* priority used by the menu for the event handler
    kCCMenuHandlerPriority = -128,
}; 
```

# jquery - JQuery 验证动态表

> ID：12488190
> 
> 赞同：1
> 
> 时间：2012-09-19T03:34:29.080
> 
> 标签：jquery, html, validation, jquery-validate, dynamic-tables

我正在使用 JQuery 验证插件来验证我的整个表单。我的注册页面上还有一个动态表格，用户可以在其中注册更多人。我可以很好地验证表格的其余部分，但我的目标是验证表格输入是否相同。这是我的 jfiddle 代码：[表](http://jsfiddle.net/T3MgX/)

我不知道为什么添加行在那里不起作用，但它肯定在我的页面上起作用。无论如何，该代码最终只验证我表的第一行，但我希望它验证每一行。任何人都可以看到代码有任何问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T03:40:53.933

缺少末端刹车，只需`});`在末尾添加即可。[在这里](http://jsfiddle.net/T3MgX/1/)检查

# android - OpenGL ES 透视投影

> ID：12488195
> 
> 赞同：2
> 
> 时间：2012-09-19T03:35:34.267
> 
> 标签：android, animation, opengl-es, android-animation

我很难理解如何工作`glFrustum`。`gluPerspective`我了解透视投影的概念，但这些功能的表现并不符合我的预期。例如，如果我这样设置截锥体

```
glFrustumf(0, 10, 0, 10, 1, 100) 
```

并在点处有一个矩形

```
 0,   0,  1,
 0,  10,  1,
10,  10,  1,
10,   0,  1 
```

然后绘制矩形，它的左半部分在屏幕外。如果左半部分在屏幕外，我希望垂直半部分也在外面。但这也不会发生。

在我看到的任何示例中，投影矩阵的坐标都被视为

```
glFrustumf(-10, 10, -10, 10, 1, 100) 
```

但无论哪种方式，显示的任何部分都应该取决于矩形的坐标，对吧？

**更新：**这是我正在使用的代码

```
fb1.put(new float [] {
    0,   0, -1,
    0,  10, -1,
    10, 10, -1,
    10,  0, -1
});

fb2.put(new float [] {
    0, 1,
    0, 0,
    1, 0,
    1, 1
});

indices.put(new short[] {
     0, 1, 2, 2, 3, 0
});

public void onDrawFrame(GL10 gl) {
    gl.glViewport(0, 0, this.width, this.height);
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
    gl.glFrustumf(0, 10, 0, 10, 1, 100);
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT);

    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
    gl.glEnable(GL10.GL_TEXTURE_2D);
    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, fb1);
    gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, fb2);
    gl.glDrawElements(GL10.GL_TRIANGLES, indices.limit(),
                    GL10.GL_UNSIGNED_SHORT, indices);
} 
```

第一个是我得到的，后者是我想要得到的。我还注意到，图像的一点点也被垂直剪裁了。

![实际结果](../Images/1c6c4f7ff13ffb276bef6bb1673e039d.png) ![预期结果](../Images/ac1d663f141446097b32c60082e222a6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:36:03.413

使用不对称坐标定义视锥体`glFrustumf(0, 10, 0, 10, 1, 100)`并不意味着您在世界中的对象定位会有所不同。因此，您可能应该坚持对称`glFrustumf(-1.0, 1.0, -1.0, 1.0, 1, 100)`并通过修改矩阵来**移动您的矩形。**`MODELVIEW`

# php - 表单登录错误

> ID：12488198
> 
> 赞同：1
> 
> 时间：2012-09-19T03:36:28.023
> 
> 标签：php, session, authentication, login

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我的网站登录表单有问题。在`login.php`表格的顶部我有这个

```
<?php 
if (isset($_SESSION['username'])){
header("Location: http://myurl/"); die;}?>
<?php require 'includes/dbconnect.php' ; 
?> 
<?php require 'includes/header.php';  ?> 
```

当登录成功时，我将它们重定向到

```
header('Location: http://myrul/'); 
```

`header.php`拥有

```
<?php session_start(); ?> 
```

在顶部。

当我尝试登录时，我收到以下错误消息：

> 警告：无法修改标头信息 - 标头已由第 39 行 /path/to/file/login.php 中的（输出开始于 /path/to/file/login.php:7）发送。

login.php:7 ==>`<?php require 'includes/header.php'; ?>`

尽管

login.php 中的第 39 行是 ==>`header('Location: http://myrul/');`

请问问题出在哪里

**更新**我移到`require 'includes/header.php`文件的顶部。

```
<?php require 'includes/header.php';?>
if (isset($_SESSION['username'])){
header("Location: http://murl"); die;}?>
<?php require 'includes/dbconnect.php' ; ?> 
```

**更新 2**

```
<?php require 'includes/header.php';?>
<?php if (isset($_SESSION['username'])){
header("Location: http://myurl/"); die;}?>
<?php require 'includes/dbconnect.php' ; ?> 
```

```
 $username = trim ($_POST['username']); 
```

指向`$username = trim ($_POST['username']);`为 `output started at /path/to/file/header.php:11`

**更新**

头文件.php

```
<?php session_start(); ?>
<!DOCTYPE html>
<html>
<head>
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="description" content="Your description goes here" />
<meta name="keywords" content="your,keywords,goes,here" />
<meta name="author" content="Your Name" />
<link rel='stylesheet' type='text/css' href='css/theme.css' />
<link rel='stylesheet' type='text/css' href='css/fullcalendar.css' />
<link rel='stylesheet' type='text/css' href='css/fullcalendar.print.css' media='print' />
<link rel="stylesheet" href="css/jquery.tagbox.css" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T03:44:34.863

如果 header.php 有 session_start() 调用，它需要位于文件的顶部。实际上，我希望您收到“标头已发送”消息，因为在 dbconnect 包含之后，您的代码中有一个换行符。

当你使用 session_start 时，最好把它放在每个要使用它的文件的顶部；这有助于确保在会话开始之前没有发送任何标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:06:06.197

尝试将其放在页面顶部：

```
<? ob_start(); ?> 
```

然后在页面底部放置这行代码：

```
<? ob_flush(); ?> 
```

# unix - 当我制作 irssi 时，无法以 root 身份登录 - 如何运行 irssi？

> ID：12488200
> 
> 赞同：0
> 
> 时间：2012-09-19T03:37:16.457
> 
> 标签：unix, terminal, makefile, archlinux

问题是没有 sudo 或 root 权限，而我仍然可以使用命令：make 和 ./configure。我无法运行 make install 但想找到二进制可执行文件。任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:39:44.087

将安装路径更改为您具有写入权限的位置。尝试以下操作：

```
./configure --prefix=$HOME
make
make install 
```

那应该将它安装到 ~/bin/

# c# - 功能区选项卡错误

> ID：12488201
> 
> 赞同：0
> 
> 时间：2012-09-19T03:37:19.797
> 
> 标签：c#, wpf

我是新手 C# (WPF)，我学习如何使用 Ribbon Control。

这是错误消息在类型“RibbonTab”中找不到属性“标签”，这是代码：

```
<r:RibbonWindow x:Class="WpfApplication2.Editor"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:r="clr-namespace:Microsoft.Windows.Controls.Ribbon;assembly=RibbonControlsLibrary"
         mc:Ignorable="d" >
<Grid x:Name="LayoutRoot">
    <r:Ribbon Title="WPF Ribbon - Document 1" x:Name="ribbon" />
    <r:RibbonTab Label="Home"/>
    <r:RibbonTab Label="Insert"/>
    <r:RibbonTab Label="Help"/>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:50:27.917

问题是没有`Label`财产。您正在寻找`Header`设置 Header 的属性。

从[API](http://msdn.microsoft.com/en-us/library/system.windows.controls.ribbon.ribbontab.aspx)

> Header：获取或设置标记控件的项。（继承自 HeaderedItemsControl。）

# html - html代码弹出图像并链接到另一个站点

> ID：12488202
> 
> 赞同：0
> 
> 时间：2012-09-19T03:37:34.960
> 
> 标签：html, onclick

我有一个任务，我认为我几乎完成了，但我的头脑不会付出太多，也许我可以得到帮助；我的任务是创建一个收集用户数据并验证用户信息的 html 表单；我认为我做得对。现在我有这个我不理解的说明，但认为它是在验证过程之后“*商品应该包含指向 amazon.com 或其他零售商网站上相同或相似商品的链接，以便潜在买家可以更好地了解新品的商品和价格*；" 那么我必须在用户单击提交按钮后弹出一个竖起大拇指的图像，但我已经在 onclick 中有我的验证表单。

这是我的代码：

```
 <script language="JavaScript" type="text/javascript">

 //Function to validate form

 function validateForm() {

     //Variables are declared

     var s=document.forms["craigslistSalesForm"]["itemName"].value;
     var t=document.forms["craigslistSalesForm"]["itemPrice"].value;
     var u=document.forms["craigslistSalesForm"]["location"].value;
     var v=document.forms["craigslistSalesForm"]["itemCondition"].value;
     var w=document.forms["craigslistSalesForm"]["itemDescription"].value;

     //If itemName is entered continue but if left blank show alert
     if (s==null || s=="") {
     alert("Please enter a title for your posting");
     return false;
     }

     //If itemPrice is entered continue but if left blank show alert
     if (t==null || t=="") {
     alert("Please enter the price of your item");
     return false;
     }

     //If location is entered continue but if left blank show alert
     if (u==null || u=="") {
     alert("Please enter your location");
     return false;
     }

     //If itemCondition is entered continue but if left blank show alert
     if (v==null || v=="Select a condition option") {
     alert("Please choose the condition of your item from the list");
     return false;
     }

     //Variables are declared

     var x=document.forms["craigslistSalesForm"]["email"].value;
     var atpos=x.indexOf("@");
     var dotpos=x.lastIndexOf(".");
     var y=document.forms["craigslistSalesForm"]["email2"].value;

     //If email address doesn't contain symbol @ or . and a minimum 2 characters
     //after dot then alert to correct email address
     if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length) {
     alert("Your email address must be in the format of name@domain.com");
     return false;
     }

     //If second email address does not match first email then alert mis-match
     if (y!=x) {
     alert("Ooops! Your email does not match, please try again.");
     return false;
     }

     //If itemDescription is entered continue but if left blank show alert
     if (w==null || w=="") {
     alert("You must describe your Item for Sale");
     return false;
     }

     }

 </script>

 <html>
 <head>
 <title>Project Task #1 - AGV</title>
 </head>
 <body onload="document.getElementById('itemName').focus()" bgcolor="E1E1E1">
 <form id="craigslistSalesForm">
 <h2>PA Craigslist - Items for sale</h2>
 <div>
 <span>Posting Title:&#160; </span><input tabindex="1" type="text" name="itemName"
 id="itemName" size="35" maxlength="64" value>
 &#160; &#160; <span>Price:&#160; </span>$<input type="text" name="itemPrice"
 id="itemPrice" size="6" maxlength="9" value>
 </div>
 <br>
 <div>
 <span>Location:&#160; &#160; </span><input type="text" name="location"
 id="location" size="35" maxlength="64" value>
 &#160; &#160; &#160; <span>Item condition:&#160; </span>
                 <select id="itemCondition" value>
                 <option>Select a condition option</option>
                 <option>New</option>
                 <option>Like new (in original packaging)</option>
                 <option>Like new (without original packaging
 </option>
                 <option>Fairly used</option>
                 <option>Used</option>
                 <option>Rough condition</option>
                 <option>Working</option>
                 <option>Not working</option>
                 <option>I don't know</option>
                 </select>
 </div>
 <div>
 &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;
 &#160;
 <input type="radio" value="Residential" name="typeOfLocation" CHECKED>Residential
 &#160; &#160; <input type="radio" value="Business" name="typeOfLocation">Business
 </div>
 <br>
 <div>
 <span>Your email:&#160; </span><input type="text" name="email" id="email"
 size="35" maxlength="64" value>
 &#160; &#160; <span><i>Retype your email:&#160; </i></span><input type="text"
 name="email2" id="email2" size="35" maxlength="64" value>
 </div>
 <br>
 <div>
 <span><b>Item Description:</b></span>
 <br>
 <textarea cols="80" name="itemDescription" id="itemDescription" style="width: 70%;
 border: 3px solid black; font-family: Calibri; font-size: 24px;" rows="10"></textarea>
 </div>
 <button type="button" value="callTwoFunctions" onclick="validateForm()">
 <b>Submit</b></button>
 </form>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:25:16.810

在您的脚本中，您可以在您执行的所有验证的下方添加其他条目，这将被视为成功的验证结果：

```
function validateForm() {

 //Variables are declared

 var s=document.forms["craigslistSalesForm"]["itemName"].value;
 var t=document.forms["craigslistSalesForm"]["itemPrice"].value;
 var u=document.forms["craigslistSalesForm"]["location"].value;
 var v=document.forms["craigslistSalesForm"]["itemCondition"].value;
 var w=document.forms["craigslistSalesForm"]["itemDescription"].value;

 //If itemName is entered continue but if left blank show alert
 if (s==null || s=="") {
 alert("Please enter a title for your posting");
 return false;
 }

 //If itemPrice is entered continue but if left blank show alert
 if (t==null || t=="") {
 alert("Please enter the price of your item");
 return false;
 }

 //If location is entered continue but if left blank show alert
 if (u==null || u=="") {
 alert("Please enter your location");
 return false;
 }

 //If itemCondition is entered continue but if left blank show alert
 if (v==null || v=="Select a condition option") {
 alert("Please choose the condition of your item from the list");
 return false;
 }

 //Variables are declared

 var x=document.forms["craigslistSalesForm"]["email"].value;
 var atpos=x.indexOf("@");
 var dotpos=x.lastIndexOf(".");
 var y=document.forms["craigslistSalesForm"]["email2"].value;

 //If email address doesn't contain symbol @ or . and a minimum 2 characters
 //after dot then alert to correct email address
 if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length) {
 alert("Your email address must be in the format of name@domain.com");
 return false;
 }

 //If second email address does not match first email then alert mis-match
 if (y!=x) {
 alert("Ooops! Your email does not match, please try again.");
 return false;
 }

 //If itemDescription is entered continue but if left blank show alert
 if (w==null || w=="") {
 alert("You must describe your Item for Sale");
 return false;
 }

 // A place to do additional thing after successful validation
 // you can have another function call
 // i.e. popupImageContainer();

 alert("Yahoo validation is successful lets put another function calls instead this alert code");

 } 
```

...您还可以通过在按钮标记中的事件中附加其调用后`validateForm()`的函数来让您的其他函数弹出一些东西：`onclick`

```
`<button type="button" value="callTwoFunctions" onclick="validateForm();popupDialog();">` 
```

# mysql - 远程访问 Amazon EC2 Windows 实例上的 MySQL

> ID：12488205
> 
> 赞同：0
> 
> 时间：2012-09-19T03:38:43.040
> 
> 标签：mysql, windows, amazon-ec2, remote-access

[我在这里](https://stackoverflow.com/questions/9766014/connect-to-mysql-on-amazon-ec2-from-a-remote-server)找到了一些适用于 Linux 的解决方案。

但没有找到任何适用于 Windows 的解决方案。我在 Windows 上没有 my.cnf。我只有我的.ini。其中没有绑定地址。

我已经为 MySQL 添加了一个入站规则。

有人可以给我一些建议吗？非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:49:43.277

如果您使用带有实体框架的 Asp.Net 应用程序，则需要在 EC2 实例上安装 MySQL 连接器（我建议运行`iisreset`以确保加载 dll）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:51:42.540

这是我要检查的内容：

1.  通过远程桌面连接到实例并尝试在实例上连接到它，验证 MySQL 服务是否已启动并运行。
2.  如果检查成功，请尝试修改或禁用 Windows 防火墙，以确保外部机器可以连接到相关端口。根据 Windows 版本的不同，您可能需要处理几个地方（即 Windows 防火墙和具有高级安全性的 Windows 防火墙）。

# jquery - 浏览器选项卡动画

> ID：12488207
> 
> 赞同：0
> 
> 时间：2012-09-19T03:38:57.850
> 
> 标签：jquery, html, google-chrome

![在此处输入图像描述](../Images/5e901e939bf4634798fa3d8957d2c8b5.png)

我想问一下 - 对于几个网站 - 想到 fb 和 gmail - 他们会显示一个轻微的云/白色动画，它会通过选项卡。

我假设这个动作是由 Jquery/javascript 控制的。

有没有人有任何关于如何实现这一点的信息。

注意：如果需要，我可以更好地解释这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T03:43:24.320

favicon 可以使用 HTML5 进行动画处理`<canvas>`，将画布导出为图像。请参阅[此处](http://remysharp.com/2010/08/24/dynamic-favicons/)以获取有关如何执行此操作的非常有趣的文章。

# delphi - 事后使用 Delphi 压缩 PDF

> ID：12488208
> 
> 赞同：3
> 
> 时间：2012-09-19T03:39:07.007
> 
> 标签：delphi, pdf, compression, delphi-2006, lossless-compression

我有一些应用程序使用例程来生成 PDF，这些应用程序使用了一种叫做 PDF-in-the-box 的东西。PDF 没有被压缩，而且似乎没有办法通过这个组件来实现。Rave 组件实现了一个压缩事件处理程序，我已经在使用 Rave 从头开始​​设计的其他应用程序中成功地使用了它。我宁愿不重新编码 PDF-in-the-box 的东西。Delphi 有什么方法可以在生成 PDF 后对其进行压缩。

（这不是图像压缩 - 这是 PDF 内容的无损压缩。通常会导致 PDF 大小减小 3 倍）。

我可以通过在 Adob​​e Reader 中打开使用 PDF-in-the-box 生成的 PDF 并再次保存来模拟我想要的效果。重新保存的 PDF 文件要小得多。我只想在代码中做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:32:20.910

如果从命令行使用外部工具没有问题，您可以尝试：

*   [Ghostscript](http://www.ghostscript.com/) -dPDFSETTINGS 选项（不幸的是没有很好的[记录](https://superuser.com/questions/435410/where-are-ghostscript-options-switches-documented)）
*   [QPDF](http://qpdf.sourceforge.net/) --stream-data=compress 选项。

QPDF 对我来说似乎工作得更快。

# xml - XMLSchemaSet 的 XML 验证错误

> ID：12488209
> 
> 赞同：1
> 
> 时间：2012-09-19T03:39:19.530
> 
> 标签：xml, xsd, xml-parsing, xml-serialization, xsd-validation

我有一个架构如下：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="MyDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
<xs:element name="Leaf" />
  <xs:complexType name = "Leaf" mixed="true">
         <xs:attribute name="ID" type="xs:string" />
  </xs:complexType>

  <xs:element name="Frame" />
  <xs:complexType name="Frame" mixed="true">
    <xs:sequence>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="Leaf" type ="Leaf" nillable="true"/>
      <xs:element minOccurs="0" maxOccurs="unbounded" name="Frame" type="Frame" nillable="true"/>
    </xs:sequence>
       <xs:attribute name="ID" type="xs:string" />
  </xs:complexType>

  <xs:element name="Document">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="1" maxOccurs="1" name="Version" type="xs:string" />
        <xs:element minOccurs="0" maxOccurs="1" name="MetaData1" type="xs:string" />
        <xs:element minOccurs="0" maxOccurs="1" name="MetaData2" type="xs:string" />

        <xs:element minOccurs="1" maxOccurs="unbounded" name="Page" nillable="false">
          <xs:complexType mixed="true">
            <xs:sequence>
              <xs:element minOccurs="0" maxOccurs="unbounded" name="Frame" type="Frame" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

基本上它是一个递归结构。一个文档可以有一个页面列表。它必须包含至少 1 页。页面由框架列表组成。Frame 可以有子帧或叶子（即不能包含子帧）。MetaData1 和 MetaData2 是可选的，可以出现在任何地方。

示例 XML 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<Document>
  <Version>1.1</Version>
  <MetaData1>Somemetadata</MetaData1>
  <Page>Page1
       <Frame ID="1">Frame1
          <Frame ID="2">SubFrame1
                <Frame ID="3">SubFrame2
                      <Leaf ID="1">Alone</Leaf>
                </Frame>
               <Leaf ID="2">Alone2</Leaf>
          </Frame>
        </Frame>
        <Frame ID="3">SubFrame3
        </Frame>
 </Page>
 <MetaData2 />
</Document> 
```

我正在使用 XmlReaderSettings 和 XmlSchemaSet 对架构进行 XML 验证。出于某种原因，我收到以下 2 个错误：

1）{“元素'文档'具有无效的子元素'Metadata2'。预期的可能元素列表：'Page'。”}

我认为这是因为它是按顺序阅读的，而在我的情况下，这些元素可以按任何顺序出现。我尝试使用 xs:all 属性，但它不适用于 maxoccurs=unbounded。还有什么办法吗？

2) {“元素‘框架’的子元素‘叶子’无效。预期的可能元素列表：‘框架’。”}

这可能与 (1) 相同吗？Leaf ID=2 发生错误

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T05:03:14.533

您使用的是 Microsoft .NET，这意味着您受限于 XSD 1.0 所能提供的功能。`xs:all`合成器仅支持带有`maxOccurs="1"`. 那是你的第一个问题。

您的架构绝对没有捕捉到`MetaData1`并且`MetaData2`可以在任何地方发生的事实。`Leaf`，`Frame`并且`Page`根本没有这些元素。所以你必须为此做点什么。

无论如何，如前所述，您无法完全实现您想要的；必须付出一些东西。您可以选择规定某些元素的位置，允许某些粒子之间的某些可变性，或者将您的重复元素“隐藏”在“集合”项下。页面为页面，框架为框架，叶子为叶子。

考虑到您为元数据元素和版本提供的定义，并且不会影响“等效”ADO.NET 数据集（假设在 XSD 1.0 中可能），我强烈考虑的另一个选择是使用属性。我将说明这种方法。如果您不确定其他选项，请告诉我，我将添加更多示例。

修改后的 XSD：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="MyDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
    <xs:complexType name = "Leaf" mixed="true">
        <xs:attribute name="ID" type="xs:string"/>
        <xs:attributeGroup ref="metadata"/>
    </xs:complexType>

    <xs:complexType name="Frame" mixed="true">
        <xs:choice minOccurs="0" maxOccurs="unbounded">
            <xs:element name="Leaf" type ="Leaf" nillable="true"/>
            <xs:element name="Frame" type="Frame" nillable="true"/>
        </xs:choice>
        <xs:attribute name="ID" type="xs:string"/>
        <xs:attributeGroup ref="metadata"/>
    </xs:complexType>

    <xs:element name="Document">
        <xs:complexType>
            <xs:sequence>
                <xs:element minOccurs="1" maxOccurs="unbounded" name="Page" nillable="false">
                    <xs:complexType mixed="true">
                        <xs:sequence>
                            <xs:element minOccurs="0" maxOccurs="unbounded" name="Frame" type="Frame"/>
                        </xs:sequence>
                        <xs:attributeGroup ref="metadata"/>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
            <xs:attribute name="version" type="xs:string" use="required"/>
            <xs:attributeGroup ref="metadata"/>
        </xs:complexType>
    </xs:element>

    <xs:attributeGroup name="metadata">
        <xs:attribute name="metadata1" type="xs:string"/>
        <xs:attribute name="metadata2" type="xs:string"/>
    </xs:attributeGroup>
</xs:schema> 
```

上图的可视化：

![QTAsistant 显示 XSD 图](../Images/07de15ff46af366012a526d6515abbbb.png)

和等效的 ADO.NET DataSet（这个最容易用来确认你对模型的描述）：

![QTAssistant 将 XSD 显示为 ADO.NET 数据集](../Images/b4c33349d30a8036fb3a022ee384b502.png)

可以验证上述内容的语义等效 XML（更改最少，很容易看到使用属性的影响）：

```
<?xml version="1.0" encoding="UTF-8"?>
<Document version="1.1" metadata1="Somemetadata" metadata2="">
    <Page>Page1
        <Frame ID="1">Frame1
            <Frame ID="2">SubFrame1
                <Frame ID="3">SubFrame2
                    <Leaf ID="1">Alone</Leaf>
                </Frame>
            </Frame>
        </Frame>
        <Frame ID="3">SubFrame3
        </Frame>
    </Page>
</Document> 
```

上述 XML 示意图：

![示例 XML](../Images/dc72ef69b519eb84d4835c417cf34561.png)

显示有效实例的更复杂的示例 XML：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!-- Sample XML generated by QTAssistant (http://www.paschidev.com) -->
<Document xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" version="version1" metadata1="metadata11" metadata2="metadata21">
    <Page metadata1="metadata11" metadata2="metadata21">text<Frame ID="ID1" metadata1="metadata11" metadata2="metadata21">text<Leaf ID="ID1" metadata1="metadata11" metadata2="metadata21">text</Leaf>
            <Leaf ID="ID1" metadata1="metadata11" metadata2="metadata21">text</Leaf>
            <Frame ID="ID1" metadata1="metadata11" metadata2="metadata21">text<Leaf ID="ID1" metadata1="metadata11" metadata2="metadata21">text</Leaf>
                <Leaf ID="ID1" metadata1="metadata11" metadata2="metadata21">text</Leaf>
                <Frame ID="ID1" metadata1="metadata11" metadata2="metadata21">text<Leaf ID="ID1" metadata1="metadata11" metadata2="metadata21">text</Leaf>
                    <Leaf ID="ID1" metadata1="metadata11" metadata2="metadata21">text</Leaf>
                </Frame>
                <Frame ID="ID1" metadata1="metadata11" metadata2="metadata21">text<Leaf ID="ID1" metadata1="metadata11" metadata2="metadata21">text</Leaf>
                    <Leaf ID="ID1" metadata1="metadata11" metadata2="metadata21">text</Leaf>
                </Frame>
            </Frame>
            <Frame ID="ID1" metadata1="metadata11" metadata2="metadata21">text<Leaf ID="ID1" metadata1="metadata11" metadata2="metadata21">text</Leaf>
                <Leaf ID="ID1" metadata1="metadata11" metadata2="metadata21">text</Leaf>
                <Frame ID="ID1" metadata1="metadata11" metadata2="metadata21">text<Leaf ID="ID1" metadata1="metadata11" metadata2="metadata21">text</Leaf>
                    <Leaf ID="ID1" metadata1="metadata11" metadata2="metadata21">text</Leaf>
                </Frame>
                <Frame ID="ID1" metadata1="metadata11" metadata2="metadata21">text<Leaf ID="ID1" metadata1="metadata11" metadata2="metadata21">text</Leaf>
                    <Leaf ID="ID1" metadata1="metadata11" metadata2="metadata21">text</Leaf>
                </Frame>
            </Frame>
        </Frame>
    </Page>
    <Page metadata1="metadata11" metadata2="metadata21">text<Frame ID="ID1" metadata1="metadata11" metadata2="metadata21">text<Leaf ID="ID1" metadata1="metadata11" metadata2="metadata21">text</Leaf>
            <Leaf ID="ID1" metadata1="metadata11" metadata2="metadata21">text</Leaf>
        </Frame>
    </Page>
</Document> 
```

# iphone - 将 NSDate 值保存到 plist

> ID：12488210
> 
> 赞同：1
> 
> 时间：2012-09-19T03:39:23.477
> 
> 标签：iphone, ios, plist, nsdate

我试图弄清楚如何将 NSDate 值保存到我的应用程序中的 plist 文件中。

我目前正在这样做，但被困在我必须保存它的实际部分。

```
NSString *datePlistPath = [[NSBundle mainBundle] pathForResource: @"my-Date" ofType: @"plist"];
        NSMutableDictionary *dict = [NSDictionary dictionaryWithContentsOfFile: datePlistPath];

        // to be saved to plist
        NSDate *date = [NSDate date];

// this is where I start to get abit lost, I want to set the date to the right plist value then commit the changes
        [dict setObject:date forKey:@"my-Date"];
        [dict writeToFile:datePlistPath atomically:YES]; // error happening here. 
```

任何帮助，将不胜感激

更新：一旦它到达最后一行代码，这就是生成的错误......

***** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“-[__NSCFDictionary setObject:forKey:]: mutating method sent to immutable object”****

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T04:02:08.123

使用**NSMutableDictionary dictionaryWithContentsOfFile**

```
NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithContentsOfFile: datePlistPath]; 
```

**如果你使用NSDictionary dictionaryWithContentsOfFile**它**提供你 NSDictionary**不是 NSMutableDictionary

 **此外，您不能更新应用程序包中的 plist，而是存储在文档目录中。

请参阅plist 链接[中的 dit-objects-in-array-from-plist](https://stackoverflow.com/questions/12476968/iphone-dev-edit-objects-in-array-from-plist/12477466#12477466)链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T03:55:27.033

我认为您的解决方案很简单，例如

代替

```
NSMutableDictionary *dict = [NSDictionary dictionaryWithContentsOfFile: datePlistPath]; 
```

和

```
NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithContentsOfFile: datePlistPath]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T04:20:15.617

```
NSMutableDictionary *dict = [NSDictionary dictionaryWithContentsOfFile: datePlistPath]; 
```

替换`NSDictionary`为`NSMutableDictionary`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T04:14:03.260

您不能将文件写入

> NSBundle

. 文件只能存储在 Documents 目录、temp 目录和一些预定义的位置。你可以试试下面的代码。它对我来说很好。

> NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
> 
> NSString *filePath = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"file.plist"];
> 
> ```
> NSDate *currentDate = [NSDate date];
> NSMutableDictionary *d = [NSMutableDictionary new];
> [d setObject:currentDate forKey:@"my-date"];
> 
> [d writeToFile:filePath atomically:YES]; 
> ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-21T21:07:35.437

您不能写入自己包中的文件。您没有确切说明您使用日期的目的，但如果您只想`NSDate`在发布期间保留此日期，您可能希望将此日期写入`NSUserDefaults`.

此处的文档： [https ://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/)

您编写它的代码如下所示：

```
[[NSUserDefaults standardUserDefaults] setObject:date forKey:@"my-Date"]; 
```

并阅读它，你会做

```
NSDate* myDate = (NSDate*)[[NSUserDefaults standardUserDefaults] objectForKey:@"my-Date"];
// Be prepared for a nil value if this has never been set. 
```****

# hook - Liferay - Dockbar 中的链接依赖于使用钩子的用户组

> ID：12488211
> 
> 赞同：1
> 
> 时间：2012-09-19T03:39:27.710
> 
> 标签：hook, liferay

我对新的 liferay 平台和使用钩子相当陌生。我正在将当前登录用户的电子邮件添加到`Dockbar portlet`. 我希望这封电子邮件在单击时链接到不同的链接，具体取决于用户是否属于两个组中的任何一个。

这是我到目前为止在钩子中写的...

```
//if user is in "group1" show this link

<aui:a cssClass='<%= "user-email"  %>' href="link1" title="Gmail">
    <%= "(" + HtmlUtil.escape(user.getDisplayEmailAddress() + ")") %>
</aui:a>

//if user is in "group2" show this link

<aui:a cssClass='<%= "user-email"  %>' href="link2" title="Outlook">
    <%= "(" + HtmlUtil.escape(user.getDisplayEmailAddress() + ")") %>
</aui:a> 
```

我应该如何使用`<c:if>`标签来实现这一点？或者有人可以举例说明吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:22:42.843

您可以`scopeGroupId`在停靠栏的 jsp 中检索可用的，并从中检索`Group`实例。

然后检查用户当前在哪个组的页面上并进行`href`相应的更改。

或者您也可以在您的 JSP 中使用以下代码：

```
Group group = null;
if(themeDisplay.getLayout().getGroup().isSite()) { // this will tell if the Group is a site or not
    group = themeDisplay.getLayout().getGroup(); // fetching the site group instance
}

String href;
if (themeDisplay.getLayout().getGroup().getName().equalsIgnoreCase("group1")) {
    href = "group1_link";
} else {
    href = "group2_link";
} 
```

注意：`themeDisplay`在 Liferay 的 JSP 中可用，并且要在您的自定义 portlet 中使用，您可以使用`<liferay-theme:defineObjects />`tag。

希望我已经正确理解了您的问题并做出了相应的回答。

# xpath - 如何在 XPath 中使用 like？

> ID：12488213
> 
> 赞同：15
> 
> 时间：2012-09-19T03:39:39.807
> 
> 标签：xpath, operator-keyword

我有一个使用过滤器搜索的页面。例如，我有这个代码，

```
xmlTempResultSearch = xmlResidentListDisplay.selectNodes("//PeopleList/Row[@LastName != '"+txtSearch.value+"']");
xmlTempResultSearch.removeAll(); 
```

这将选择不等于在`txtSearch`文本框中输入的姓氏的数据，然后将它们从结果集中删除，以便将其过滤为等于文本框中的姓氏`txtSearch`。

我对这段代码的问题是它应该等于 (=) 到`txtSearch`.value，我想要的是我想要结果集**LIKE**`txtSearch.value`。在我的页面上发生的情况是，当我`santos`在 txtSearch 文本框上键入“”时，其结果集是所有带有“”的姓氏`santos`。但是当我输入' `sant`'时，什么都没有出现。我想要与 ' `santos`' 相同的结果集，因为它都包含 'sant'

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-19T04:59:56.107

**您可以使用所有 XPath (1.0) 字符串函数。如果您有可用的 XPath 2.0，那么您甚至可以使用 RegEx**。

**[`contains()`](http://www.w3.org/TR/xpath/#function-contains)**

**[`starts-with()`](http://www.w3.org/TR/xpath/#function-starts-with)**

**[`substring()`](http://www.w3.org/TR/xpath/#function-substring)**

**[`substring-before()`](http://www.w3.org/TR/xpath/#function-substring-before)**

**[`substring-after()`](http://www.w3.org/TR/xpath/#function-substring-after)**

**[`concat()`](http://www.w3.org/TR/xpath/#function-concat)**

**[`translate()`](http://www.w3.org/TR/xpath/#function-translate)**

**[`string-length()`](http://www.w3.org/TR/xpath/#function-string-length)**

**XPath 1.0中没有 **[`ends-with()`](http://www.w3.org/TR/xpath-functions/#func-ends-with)**，但可以很容易地用这个 XPath 1.0 表达式表示**：

```
substring($s, string-length($s) - string-length($t) +1) = $t 
```

**正是`true()`字符串以字符串`$s`结尾的时候`$t`。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T03:45:51.617

您可以使用 start-with 函数而不是函数。参考：

[http://www.w3schools.com/xpath/xpath_functions.asp](http://www.w3schools.com/xpath/xpath_functions.asp)

```
xmlTempResultSearch = xmlResidentListDisplay.selectNodes("//PeopleList/Row[not(starts-with(@LastName,'"+ txtSearch.value +"'))]"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T04:32:38.587

您可以使用 XPath 的 contains() 函数：

```
xmlTempResultSearch = xmlResidentListDisplay.selectNodes("//PeopleList/Row[not(contains(@LastName,'"+txtSearch.value+"'))]"); 
```

# php - 替换枚举值

> ID：12488217
> 
> 赞同：0
> 
> 时间：2012-09-19T03:40:01.933
> 
> 标签：php, mysql, sql

嗨，伙计们，这可能是一件非常简单的事情，但我束手无策！我有一个带有将值输入 mysql 数据库的表单的网站，所以在我的表中我有枚举字段'1'，'2'，'3'，'4'，它们是先生，小姐，夫人，女士的值， Dr 和另一个用于性别的枚举值 'm'、'f' 分别是男性和女性。

现在的问题是，当我在我的其他页面上呼应它们时，如何将“1”替换为 Mr 和“m”替换为 Male！

这里有一些代码可以提供帮助！

```
 $sql = mysql_query("SELECT * FROM myMembers WHERE id='$id' LIMIT 1");

    while($row = mysql_fetch_array($sql)){

        $title = $row["title"];
        $firstname = $row["firstname"];
        $lastname = $row["lastname"];
        $gender = $row["gender"];
    } 
```

我在这里呼应：

```
 if ($myvar == "yes") 
        {
        $myvar = "http://www.somesite.com/public/postlead.php?field1=' . $title . '&field14=' . $gender . '&field2=' . $firstname . '&field3=' . $lastname . '';
        } else {
          $myvar = '';
        } 
```

非常感谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T03:43:08.500

你可以使用 SELECT...CASE

```
 SELECT CASE gender 
  WHEN 'F' THEN 'Female'
  WHEN 'M' THEN 'Male'
 END as gender_word , other_fields_here 
from myMembers WHERE id='$id' LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T03:43:27.190

尝试使用`case`，

```
SELECT (CASE gender WHEN 'Male' THEN 'M' END) as `Gender`,
       (CASE title WHEN 'Mr' THEN 1 END) as `Title`
FROM .... 
```

# titanium - 使用tidesdk为其他平台构建桌面应用程序

> ID：12488222
> 
> 赞同：2
> 
> 时间：2012-09-19T03:41:17.290
> 
> 标签：titanium, desktop, tidesdk

当我尝试为其他平台构建 Tidesdk 桌面项目时遇到问题。我使用 linux，为 linux 构建工作完美。

我这样做：

```
./tibuild.py -d /home/rooter/theapp/ -p --type=bundle /home/rooter/Titanium_Studio_Workspace/TestApp/ 
```

一切正常，但是当我尝试为 win32 构建时问题就来了

```
./tibuild.py --os=win32 -d /home/rooter/theapp/ -p --type=bundle /home/rooter/Titanium_Studio_Workspace/TestApp/ 
```

我收到此错误：

```
Traceback (most recent call last):
  File "./tibuild.py", line 118, in <module>
    environment = env.PackagingEnvironment(options.platform, packager, options.appstore)
  File "/home/rooter/.titanium/sdk/linux/1.3.0-beta/env.py", line 32, in __init__
    self.init_normal_dirs(script_dir)
  File "/home/rooter/.titanium/sdk/linux/1.3.0-beta/env.py", line 52, in init_normal_dirs
    p.join(os.environ['APPDATA'], 'Titanium'),
  File "/usr/lib/python2.7/UserDict.py", line 23, in __getitem__
    raise KeyError(key)
KeyError: 'APPDATA' 
```

如果我尝试为 osx 构建，我会遇到一些不同的错误。甚至可以从linux为win32构建吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T16:32:16.707

对于 TideSDK，您可以为多个平台构建。也就是说，您必须在每个平台上构建每个发行版。例如，您必须在 Mac OSX 上安装 SDK 才能构建 OSX 发行版等。

Appcelerator 曾经提供了一项基于云的服务，可以帮助您为所有平台（除了您正在开发的平台）构建和打包。TideSDK 团队正在考虑替换此服务的可能性。目前有几种选择。当前正在开发的 Tide Builder 应用程序中可能会出现一个选项。

在此期间，作为开发设置的一部分，您将需要访问机器或虚拟机，以便在您希望应用程序支持的每个操作系统和架构上构建每个发行版。

顺便说一句，我在您尝试使用测试版的回溯中看到。目前我们还没有发布，还有两个分支需要合并，代码库中还没有。我们建议您在 Beta 版发布时从 1.2.0.RC4 开始开发。我们将在我们的邮件列表和推特上发布测试版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T11:04:48.880

正如大卫所发布的，您不能为其他操作系统打包，尽管它在那里并且看起来不错。

当您的应用程序运行良好且流畅时，请在您的 Mac 或免费的虚拟机上安装 vmware fusion，然后安装 Windows 或您不使用的目标操作系统。Windows 7 x86 home ISO 从微软下载：http: [//msft.digitalrivercontent.net/win/X17-24208.iso](http://msft.digitalrivercontent.net/win/X17-24208.iso)

为了更轻松、更快地完成它，您在这里获得了快速安装和 sdk 放置说明：

[http://tidesdk.multipart.net/docs/user-dev/generated/#!/guide/getting_started](http://tidesdk.multipart.net/docs/user-dev/generated/#!/guide/getting_started)

# mysql - 除了 auto_increment 列之外，任何 MySQL 命令都可以复制行？

> ID：12488223
> 
> 赞同：2
> 
> 时间：2012-09-19T03:41:18.550
> 
> 标签：mysql, duplicates, row

我一直在寻找一种方法来复制一行，并将其插入表中，但使用不同的 id 值（其类型是自动增量）。

我可以通过手动指定每一列来做到这一点，但是由于有很多列，并且将来可以添加或删除这些列，我想使用一些简单的查询来执行此操作，而不必指定每个列名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T04:26:06.093

试试这个：

```
CREATE TEMPORARY TABLE temp_table SELECT * FROM source_table WHERE ...; 
ALTER TABLE temp_table DROP COLUMN column_with_auto_increment;
INSERT INTO source_table SELECT * from temp_table; DROP TABLE temp_table; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T03:46:00.197

尝试

```
INSERT INTO new_table (attr1, attr2, attr3) SELECT oldatr1, oldatr2, oldatr3 FROM old_table WHERE <the filter you want> 
```

如果 new_table 和 old_table 相同，它也可以工作。

# php - 为 50,000 行表优化代码/数据库

> ID：12488225
> 
> 赞同：1
> 
> 时间：2012-09-19T03:41:45.867
> 
> 标签：php, mysql

我有一个存储在数据库中的 300 条新闻文章的 RSS 提要列表，每隔几分钟我就会抓取每个提要的内容。每个提要包含大约 10 篇文章，我想将每篇文章存储在数据库中。

问题：我的数据库表超过 50,000 行并且增长迅速；每次我运行脚本以获取新提要时，它都会添加至少 100 多行。到了我的数据库达到 100% CPU 利用率的地步。

问题：如何优化我的代码/数据库？

注意：我不关心服务器的 CPU（运行时小于 15%）。我非常关心我的数据库的 CPU。

我看到的可能解决方案：

*   目前，每次脚本运行时，它都会转到 $this->set_content_source_cache ，从表中的所有行返回一个数组数组（'link'、'link'、'link'等）。这用于以后的交叉引用，以确保没有重复的链接。不会这样做并简单地更改数据库以便链接列是独特的加快速度吗？可能将这个数组扔到 memcached 中，所以它必须每小时/每天只创建一次这个数组？
*   如果设置了链接以使其移动到下一个源，则 break 语句？
*   只检查不到一周的链接？

这就是我正在做的事情：

```
//$this->set_content_source_cache goes through all 50,000 rows and adds each link to an array so that it's array('link', 'link', 'link', etc.)
    $cache_source_array = $this->set_content_source_cache();

    $qry = "select source, source_id, source_name, geography_id, industry_id from content_source";
    foreach($this->sql->result($qry) as $row_source) {

        $feed = simplexml_load_file($row_source['source']);

        if(!empty($feed)) {

            for ($i=0; $i < 10 ; $i++) { 
                // most often there are only 10 feeds per rss.  Since we check every 2 minutes, if there are 
                    // a few more, then meh, we probably got it last time around
                if(!empty($feed->channel->item[$i])) {
                    // make sure that the item is not blank
                    $title = $feed->channel->item[$i]->title;
                    $content = $feed->channel->item[$i]->description;
                    $link = $feed->channel->item[$i]->link;
                    $pubdate = $feed->channel->item[$i]->pubdate;
                    $source_id = $row_source['source_id'];
                    $source_name = $row_source['source_name'];
                    $geography_id = $row_source['geography_id'];
                    $industry_id = $row_source['industry_id'];

                    // random stuff in here to each link / article to make it data-worthy
                    if(!isset($cache_source_array[$link])) {

                        // start the transaction
                        $this->db->trans_start();

                        $qry = "insert into content (headline, content, link, article_date, status, source_id, source_name, ".
                            "industry_id, geography_id) VALUES ".
                            "(?, ?, ?, ?, 2, ?, ?, ?, ?)";
                        $this->db->query($qry, array($title, $content, $link, $pubdate, $source_id, $source_name, $industry_id, $geography_id));

                        // this is my framework's version of mysqli_insert_id()
                        $content_id = $this->db->insert_id();

                        $qry = "insert into content_ratings (content_id, comment_count, company_count, contact_count, report_count, read_count) VALUES ".
                            "($content_id, '0', '0', 0, '0', '0')";
                        $result2 = $this->db->query($qry);

                        $this->db->trans_complete();

                        if($this->db->trans_status() == TRUE) {
                            $cache_source_array[$link] = $content_id;
                            echo "Good!<br />";
                        } else {
                            echo "Bad!<br />";
                        }
                    } else {
                        // link alread exists
                        echo "link exists!";
                    }
                }
            }
        } else {
            // feed is empty
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:55:19.177

我想你回答了你自己的问题：

> 目前，每次脚本运行时，它都会转到 $this->set_content_source_cache ，从表中的所有行返回一个数组数组（'link'、'link'、'link'等）。这用于以后的交叉引用，以确保没有重复的链接。不会这样做并简单地更改数据库以便链接列是独特的加快速度吗？

是的，创建主键或唯一索引并允许数据库在存在重复项时抛出错误是一种更好的做法，并且应该更有效。

参考编辑：

[mysql 5.0 索引 - 唯一与非唯一](https://stackoverflow.com/questions/388982/mysql-5-0-indexes-unique-vs-non-unique)

[http://dev.mysql.com/doc/refman/5.0/en/create-index.html](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)

# php - 如何像浏览器一样使用 php/jquery 显示递归 xml 树（可扩展）？

> ID：12488226
> 
> 赞同：1
> 
> 时间：2012-09-19T03:41:58.640
> 
> 标签：php, jquery, xml, recursion, expandable

我有以下复杂的 xml 源（例如：[http](http://www.fluffyduck.com.au/sampleXML.xml) ://www.fluffyduck.com.au/sampleXML.xml ）如果在浏览器中查看，则显示的父/子方法 = 完美

这正是我所追求的。但是，我需要使用 php 在网页中递归地显示它，并且能够以可扩展的表/树格式检索每个属性。

我试过jstree没有成功，jquery.treetable没有成功，转换为xslt没有成功。我确信这是我对这些工具缺乏经验，但是必须有一种方法来操作数据并在查看上述链接时像 chrome 那样以可工作的可扩展树方法显示它。

谢谢大家的帮助

- 编辑以包含一些示例代码：经过多次测试但没有运气，我已经使用 jstree 页面中的示例回到基础知识，利用上面链接中的 xml 示例，我不得不删除第一个标记上方的所有代码。

然后重命名所有标签以符合 jstree 要求，这样做似乎显示正确的树，但没有数据。所以我只是在前 3 条记录 test1 等 test2 / test3 之后插入，但只显示箭头旁边的名字。

```
$(function () {
    $("#demo2").jstree({
        "xml_data" : {
            "ajax" : {
                "url" : "../moo.xml"
            },
            "xsl" : "nest"
        },
        "plugins" : [ "themes", "xml_data" ]
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T02:58:16.700

这里的问题导致向我提供 XML 的源。我无法修改它。

但是当我手动编辑文件时，标题是

并且主节点后面是每个记录节点

它开始起作用了，我现在只需要弄清楚如何自动做到这一点。

# dependencies - 激活捆绑包时如何自动激活捆绑包的依赖项？

> ID：12488228
> 
> 赞同：2
> 
> 时间：2012-09-19T03:42:00.537
> 
> 标签：dependencies, osgi, bundles

在看到 Robert Dunne 的[*OSGi Dependencies: Heaven and Hell*](https://nimbleblog.paremus.com/2010/02/osgi-dependencies-heaven-and-hell/)之后，我对以下内容特别感兴趣：

> 如果您使用的解析器不知道`ACTIVE`包依赖关系，那么您必须自己管理所有这些。使用 Nimble，您只需询问您需要什么，其余的交给解析器。这加快了开发生命周期并避免了多余的杂乱脚本。

正如理查德所说，使用 obr 可以解决解析时间依赖关系。但是，我认为如果不扫描包的源，很难解决活动时依赖（活动包的依赖自动）。

例如，如果一个 bundle A 使用了一个在 bundle B 上注册的服务 using`BundleContext.register`方法，那么，当激活 bundle A 时，我们怎么知道我们必须激活 bundle B 的事实呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:19:12.490

整个方法背后的假设是捆绑包将提供指示其要求和功能的元数据。可以从包中的其他工件（例如 web.xml 文件或声明性服务组件文件）推断出一些额外的信息。

即使有代码级依赖，也无法检测任意动态类加载——元数据是必不可少的。

编写一个可以确定捆绑软件的所有可能功能和要求的程序将是一个困难的静态分析问题，这些问题[往往等同于停机问题](http://en.wikipedia.org/wiki/Static_program_analysis)，即不可能。

# c++ - 如何设置 Xcode 框架搜索路径？

> ID：12488230
> 
> 赞同：1
> 
> 时间：2012-09-19T03:42:18.423
> 
> 标签：c++, xcode, sdl

我正在尝试打开一个带有打招呼图像的屏幕。它在 Xcode 上显示没有错误，但是当我运行程序时，屏幕弹出黑色。它只是一个黑屏，并没有显示打招呼的图像。听说解决办法是把图片放到同一个目录下，所以我把它拖到了Xcode上。尽管如此，它仍然显示为黑色。

```
 #include "SDL/SDL.h"

   int main( int argc, char* args[] )
 {
//The images
SDL_Surface* hello = NULL;
SDL_Surface* screen = NULL;

//Start SDL
SDL_Init( SDL_INIT_EVERYTHING );

//Set up screen
screen = SDL_SetVideoMode( 640, 480, 32, SDL_SWSURFACE );

//Load image
hello = SDL_LoadBMP( "hello.bmp" );

//Apply image to screen
SDL_BlitSurface( hello, NULL, screen, NULL );

//Update Screen
SDL_Flip( screen );

//Pause
SDL_Delay( 2000 );

//Free the loaded image
SDL_FreeSurface( hello );

//Quit SDL
SDL_Quit();

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:48:59.967

问题是一旦可执行文件开始运行，图像就不在同一个地方。

您可以通过更改“自定义工作目录”在短期内解决此问题 [（来源：][[nathdal​​y at www-personal.umich.edu](http://www-personal.umich.edu/%7Enathdaly/XcodeEditor.png)][）][![自定义工作目录](../Images/6ee770861e1d39808367f951803b8fa3.png)](https://i.stack.imgur.com/9vox6.png)

在“产品->编辑方案...”的顶部菜单下找到

这是一个很好的快速修复，看看您是否可以让程序正常工作。但这不适用于您真正想要发布的应用程序。

为此，您需要将图像嵌入到您的游戏中，以便它们与包一起“发布”。像您所做的那样将图像添加到您的 Xcode 项目中，然后当您单击目标时，确保它们包含在“构建阶段”选项卡下的“复制捆绑资源”构建阶段中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:56:53.790

转到您的项目设置，然后单击“构建设置”。从那里，您可以在构建设置顶部的过滤器字段中键入“框架”，它将显示与框架相关的几个设置。在标记为“搜索路径”的部分中是“框架搜索路径”。您可以在那里添加新路径。

要了解更多信息，请转到“帮助”菜单，选择“Xcode 帮助”并在“帮助”窗口的搜索框中键入“框架搜索路径”。

# asp.net - Applicationhost.config - 由于权限不足，无法写入配置

> ID：12488231
> 
> 赞同：2
> 
> 时间：2012-09-19T03:42:28.273
> 
> 标签：asp.net, web-services, iis-7

我正在将 ac# webservice 应用程序部署到一台机器上：Windows 2008 R2、IIS 7.5、framework 4，但在将其转换为应用程序时遇到此错误

“执行此操作时出错详细信息：文件名：\?c:\WIndows\system32\inetsrv\config\applicationhost.config 错误：由于权限不足，无法写入配置文件”

我之前已经在同一台机器上部署了几个 web 服务应用程序，没有这个错误。我已经添加了 iis 以获得对我正在部署的应用程序的权限。你能指导我出了什么问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-04T06:51:28.893

我已经看到当安装应用程序的硬盘驱动器 c:\ 有 0 个字节时发生此错误。释放一些空间可以解决问题。我希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:55:17.213

当 IIS 在群集 IIS 上设置“共享配置”时，我收到此错误。

在执行解决方案之前，请获取共享配置的密码和加密密钥。

为了解决这个问题，我取消选中“启用共享配置”进行更改并再次检查，添加用户名、密码和加密密钥。

问候马丁

# python - 与实时解释器一起运行 python 应用程序

> ID：12488232
> 
> 赞同：2
> 
> 时间：2012-09-19T03:42:31.933
> 
> 标签：python, multithreading, pygame

我正在用python和pygame制作一个绘图程序。我正在尝试合并一个脚本功能，其中程序在启动时打开一个 python 实时解释器，并允许用户在图形界面旁边的解释器中执行命令。

我目前的策略是在自己的线程中运行主循环，然后使用执行“python -i main.py”的 bash 脚本打开应用程序

这是一种安全/有效/理想的方式吗？如何使用锁来确保来自解释器的命令在主循环迭代之间执行？

这是我第一次使用线程，所以请像我 7 岁一样向我解释。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T03:46:59.917

解释器不会与您设置的锁合作（因为它不知道它们）。因此，您无法保证用户输入的代码何时会执行。

考虑使用该[`code`模块](http://docs.python.org/library/code.html)来构建您自己的交互式控制台（这真的很容易！）。然后，您可以在每次执行用户输入时进行锁定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:43:03.940

为什么要使用第三方现场口译员？您是否意识到 pygame 内置了一个？文档在[这里](http://www.pygame.org/docs/ref/event.html)。这将很容易地消除您的所有问题。

# ravendb - 如何使用 Raven.Client.Lightweight 删除 RavenDB 数据库

> ID：12488234
> 
> 赞同：6
> 
> 时间：2012-09-19T03:42:49.640
> 
> 标签：ravendb

我已经实现了我认为删除数据库（作为服务运行的乌鸦）的正确方法，基于 1.2 Raven Studio 的执行方式并将代码移植到 Windows 控制台。

```
static class Program
{    
    static void Main(string[] args)
    {
        try
        {
            using (var store = new DocumentStore { ConnectionStringName = "RavenDB" }.Initialize())
            {

                var metadata = new RavenJObject();

                var factory = store.JsonRequestFactory;

                const string url = "http://localhost:8080/admin/databases/raven-products?hard-delete=true";

                var credentials = CredentialCache.DefaultCredentials;

                var convention = new DocumentConvention();

                var requestParams = new CreateHttpJsonRequestParams(store.DatabaseCommands, url, "DELETE", metadata, credentials, convention);

                var request = factory.CreateHttpJsonRequest(requestParams);

                request.ExecuteRequest();

            }

        }
        catch (Exception exception)
        {
            Console.WriteLine(exception);
        }

        Console.WriteLine("Press any key..");
        Console.ReadKey();

    }

} 
```

执行此代码时，会引发以下异常。

> System.Net.WebException：远程服务器返回错误：（401）未经授权。在 System.Net.HttpWebRequest.GetResponse() 在 Raven.Client.Connection.HttpJsonRequest.ReadJsonInternal(Func`1 getResponse) 在 c:\Builds\RavenDB-Unstable-v1.2\Raven.Client.Lightweight\Connection\HttpJsonRequest。 c:\Builds\RavenDB-Unstable-v1.2\Raven.Client.Lightweight\Connection\HttpJsonRequest.cs：Raven.Client.Connection.HttpJsonRequest.ReadResponseJson() 的第 297 行：Raven.Client.Connection 的第 218 行.HttpJsonRequest.ExecuteRequest() 在 c:\Builds\RavenDB-Unstable-v1.2\Raven.Client.Lightweight\Connection\HttpJsonRequest.cs:com.BuyEfficient.Raven.Service.Program.Main(String[] 的第 161 行args) 在 c:\code\buyefficient_mvc\Com.BuyEfficient\Com.BuyEfficient.Raven .Service\Program.cs:line 39

我的问题是“如何正确设置凭据以对控制台应用程序进行身份验证”？

谢谢你，斯蒂芬

**UPDATE1** 代码已更新以反映已接受的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T07:59:54.413

尝试使用`CredentialCache.DefaultCredentials`，或提供机器上管理员用户的凭据。

# html - 是否有现代的网络安全字体列表？

> ID：12488240
> 
> 赞同：22
> 
> 时间：2012-09-19T03:43:08.890
> 
> 标签：html, css

如果他们在一个古老的浏览器上，让他们烧掉。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-19T03:51:43.697

你可以从这里[http://cssfontstack.com/](http://cssfontstack.com/)找到 包含不同系统的匹配。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T03:57:31.090

只需使用您想要的并逐渐退回到平台默认值，最后是通用默认值：

```
font-family: 'Open Sans', 'Droid Sans', Arial, sans-serif; 
```

如果用户的浏览器不支持外部字体，他们将不得不忍受浏览器选择的默认字体。这些应该始终存在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T03:47:00.123

[http://www.w3schools.com/cssref/css_websafe_fonts.asp](http://www.w3schools.com/cssref/css_websafe_fonts.asp)

这应该涵盖基础知识

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-19T03:53:01.510

...并不真地。

有*非常*古老的网络安全字体。

现在，有网络安全的字体堆栈。不同的操作系统和不同的程序（如 Photoshop/InDesign/等等）有自己的字体集。

因此，学习选择相似/适当的字体堆栈，以便 Windows 7/8、MacOS X.[whatever] 和更新的 Linux 用户可以有类似的体验，然后为旧系统上的人提供备用字体。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-20T03:54:08.197

我注意到[http://cssfontstack.com/](http://cssfontstack.com/)列出了很多非网络安全字体，如 Copperplate，例如仅与 ms office 一起提供，所以要小心！我想我会在某个时候为主要的操作系统 windows、苹果、android 和 linux 列出一个列表，可能是 ubuntu。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T03:51:13.650

[http://www.wpdfd.com/issues/87/knowing_about_web_safe_fonts/](http://www.wpdfd.com/issues/87/knowing_about_web_safe_fonts/) http://www.w3schools.com/cssref/css_websafe_fonts.asp

我想以上两个链接会对你有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-20T08:24:59.233

网络安全字体一直是一个谎言，大多数网站提出网络安全字体，除了当前的 windows 和 osx（提示：还有很多其他网络客户端，从 android 到 linux 都通过 chromebooks...），发明关于其他人的数据，或忽略 unicode 覆盖（因此他们的网络安全字体仅适用于英文文本，有时甚至不包括现在很常见的欧元符号）。

唯一实际的网络安全字体是标准别名，例如 css 规范中定义的 monospace。

# matlab - 带有 nojvm 或优化标志的 mcc -B 选项

> ID：12488247
> 
> 赞同：0
> 
> 时间：2012-09-19T03:44:09.437
> 
> 标签：matlab, matlab-deployment, matlab-compiler

我正在使用`mcc`编译器生成 C 共享库，如下所示。我想使用该`O3`选项，但不能直接使用它。

我尝试了以下所有这些选项：

1.  `mcc -O3 -B csharedlib:libmyc foo.m`
2.  `mcc -R -nojvm -B csharedlib:libmyc foo.m`

但我没有成功。

我没有使用 JVM，所以想到了不使用 JVM。它会提高性能吗？有没有其他简单的方法可以提高 cshared lib 的性能？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:55:28.553

mcc 使用 mbuild 编译 C 代码。因此，您可以更改 matlabroot /bin/mbuildopts.sh 文件中的编译器选项。如果您无权访问此文件，则可以制作自己的个人副本并进行更改。在matlab中，运行

```
mbuild -setup 
```

从选项列表中选择 mbuildopts.sh 文件。它将被复制到您的主目录。MATLAB 会告诉你路径。您现在可以根据自己的喜好修改 gcc 选项。

# windows-phone-7 - Windows Phone 7 MVVM 数据绑定表单

> ID：12488248
> 
> 赞同：0
> 
> 时间：2012-09-19T03:44:11.290
> 
> 标签：windows-phone-7, xaml, mvvm, mvvm-light

我是 Windows Phone 开发的新手，目前有一个简单的表单。我正在使用 MVVM 模式和 MvvmLight 来运行命令。“申请人”实体始终为空，看起来 2 方式数据绑定不起作用。这是我的代码，我希望有人能指出我正确的方向。

**看法**

```
 <Grid x:Name="LayoutRoot" Background="Transparent" DataContext="{Binding Applicant}">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!--TitlePanel contains the name of the application and page title-->
    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
        <TextBlock x:Name="ApplicationTitle" Text="MY APPLICATION" Style="{StaticResource PhoneTextNormalStyle}"/>
        <TextBlock x:Name="PageTitle" Text="create account" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
    </StackPanel>

    <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <StackPanel>
            <StackPanel>
                <TextBlock FontSize="15" TextWrapping="Wrap" Margin="0,0,0,10" Text="Please register to create your applicant account. No information will be passed to third parties for any reason."></TextBlock>
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <TextBlock VerticalAlignment="Center" Text="Forename" Width="100"></TextBlock>
                <TextBox Width="350" BorderBrush="Red" DataContext="{Binding Forename, Mode=TwoWay}"></TextBox>
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <TextBlock VerticalAlignment="Center" Text="Surname" Width="100"></TextBlock>
                <TextBox Width="350" x:Name="Surname" BorderBrush="Red" DataContext="{Binding Surname, Mode=TwoWay}"></TextBox>
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <TextBlock VerticalAlignment="Center" Text="Email" Width="100"></TextBlock>
                <TextBox Width="350" x:Name="EmailAddress" BorderBrush="Red"  DataContext="{Binding EmailAddress, Mode=TwoWay}"></TextBox>
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <TextBlock VerticalAlignment="Center" Text="Password" Width="100"></TextBlock>
                <PasswordBox Width="350" x:Name="PassPhrase" BorderBrush="Red" DataContext="{Binding PassPhrase, Mode=TwoWay}"></PasswordBox>
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <TextBlock VerticalAlignment="Center" Text="City" Width="100"></TextBlock>
                <TextBox Width="350" x:Name="City" DataContext="{Binding City, Mode=TwoWay}"></TextBox>
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <TextBlock VerticalAlignment="Center" Text="State" Width="100"></TextBlock>
                <TextBox Width="350" x:Name="County" DataContext="{Binding County, Mode=TwoWay}"></TextBox>
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <TextBlock VerticalAlignment="Center" Text="Country" Width="100"></TextBlock>
                <TextBox Width="350" x:Name="Country" DataContext="{Binding Country, Mode=TwoWay}"></TextBox>
            </StackPanel>
            <StackPanel>
                <Button Name="btnContact"
                        Content="Register"
                        DataContext="{Binding ElementName=this, Path=DataContext}"
                        Command="{Binding SaveApplicantCommand}"
                        Width="300"/>
            </StackPanel>
        </StackPanel>
    </Grid>
</Grid> 
```

**查看后面的代码**

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);

        ApplicantViewModel vm = new ApplicantViewModel();
        DataContext = vm;
    } 
```

**视图模型**（视图模型继承自实现 INotifyPropertyChanged 的​​ ViewModelBase）

```
public class ApplicantViewModel : ViewModelBase
{
    public ApplicantViewModel()
    {
        SaveApplicantCommand = new RelayCommand(SaveApplicant);
        Applicant = new Applicant();
    }

    public ICommand SaveApplicantCommand {get; set;}

    void SaveApplicant()
    {
        if (string.IsNullOrEmpty(Applicant.Forename))
        {
            MessageBox.Show("Please enter a forename", "Oops...", MessageBoxButton.OK);
            return;
        }

        db.AddObject("Applicants", Applicant);
        db.BeginSaveChanges(OnChangesSaved, db);
    }

    void OnChangesSaved(IAsyncResult result)
    {

    }

    private Applicant _applicant;
    public Applicant Applicant
    {
        get
        {
            return _applicant;
        }
        set
        {
            if (_applicant != value)
            {
                _applicant = value;
                RaisePropertyChanged("Applicant");
            }
        }
    }
} 
```

无论在 Forename 文本框中输入什么，我总是收到错误消息，因为 Forename 为空。

****** *** ****更新***** ** *** ** *** ******

 **这是模型中的 Forename 属性

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Data.Services.Design", "1.0.0")]
    public string Forename
    {
        get
        {
            return this._Forename;
        }
        set
        {
            this.OnForenameChanging(value);
            this._Forename = value;
            this.OnForenameChanged();
            this.OnPropertyChanged("Forename");
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:22:47.623

ApplicationViewModel 没有 Forename 属性。只有申请人有。因此，请执行以下操作：

```
<TextBox Width="350" BorderBrush="Red" 
         DataContext="{Binding Applicant.Forename, Mode=TwoWay}"/> 
```

对其他文本框执行相同操作。**

# c# - 日历背后的数据结构

> ID：12488250
> 
> 赞同：2
> 
> 时间：2012-09-19T03:44:34.880
> 
> 标签：c#, java, data-structures, calendar, schedule

我正在进行一个项目，我必须创建一个程序，以便人们可以生成课程表。

我打算创建我的日历类，我想知道我应该使用哪种数据结构来存储事件。

我听说过几次生成时间表可以用图表来处理。如果是这样，我会寻找有关它的一些信息。否则，我应该如何存储事件？

我认为我可以存储事件的方式将基于一天中的时间范围。这样做的最终目标是生成时间表......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T03:59:41.310

您始终可以实现**日历队列**。这个名字是一个隐喻，暗指个人约会日历，每天一页，每一页都列出了当天的约会。

它们的**O(1)**时间复杂度令人惊叹。

[您可以在本文](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=2&ved=0CC0QFjAB&url=http%3A%2F%2Fciteseerx.ist.psu.edu%2Fviewdoc%2Fdownload%3Fdoi%3D10.1.1.69.3472%26rep%3Drep1%26type%3Dpdf&ei=TENZUNqxNIXc9ASEioG4Ag&usg=AFQjCNEeKNAKyApOgGMp6KcHSgg-m1ncsA&sig2=WJITQzR6OyMWfboJcV7cIg)中查看详细的实施信息。

# c# - 如何将附加文件大小值设置为progressBar1.Maximum

> ID：12488252
> 
> 赞同：-1
> 
> 时间：2012-09-19T03:45:01.857
> 
> 标签：c#, .net, progress-bar

我正在创建附件电子邮件发送应用程序，在我的应用程序中，我想将 progressbar1.maximum 值设置为文件大小值。请告诉我如何将附件大小值设置为progressBar1.Maximum c#/.net

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:44:48.710

正如 Dayan 告诉我们的，你可以创造，它会起作用。但是为什么要设置进度条的文件长度，以字节为单位，这将是一个非常大的数字，如果您将进度条最大值设置为 100，然后您将检查需要更改的百分比：

```
int uploadedBytes =  getUploadedBytes();
progressBar1.value = (uploadedBytes/fileSize) * 100; 
```

这已经足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:37:41.600

根据您的问题，您希望将附件大小设置为进度条的最大属性。

**尝试以下方法：** 确保包括`System.IO`

```
const string fileName = "myFile.dat";

FileInfo file = new FileInfo(fileName);
long holdFileSize = file.Length;

progressBar1.Maximun = holdFileSize; 
```

**请参阅以下链接以了解如何使用进度条控件。**

[http://msdn.microsoft.com/en-us/library/system.windows.forms.progressbar.maximum.aspx#Y700](http://msdn.microsoft.com/en-us/library/system.windows.forms.progressbar.maximum.aspx#Y700)

**此链接将向您介绍该`FileInfo`课程：**

[http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)

# xslt - cdata 的 xsl 转换 (xslt) 问题

> ID：12488262
> 
> 赞同：0
> 
> 时间：2012-09-19T03:46:02.870
> 
> 标签：xslt, cdata

我对 XSLT 转换有疑问。

我有一个 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<parser xmlns="http://www.dabgps.nxp">
  <bash>
    <![CDATA[
      # MAIN VARIABLES
     bash
    ]]>
  </bash>

  <bbb>
    <![CDATA[
      # MAIN VARIABLES
      bbb
    ]]>
  </bbb>

  <bash>
    <![CDATA[
      # MAIN VARIABLES
      bash
    ]]>
  </bash>
</parser> 
```

我有一个 XSD：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text" indent="yes"/>

<xsl:template match="parser">

  <xsl:value-of select="bbb"/>

</xsl:template>

</xsl:stylesheet> 
```

每次结果我都会遇到的问题：

```
 # MAIN VARIABLES
  bash

  # MAIN VARIABLES
  bbb

  # MAIN VARIABLES
  bash 
```

我期望的当然只是：

```
 # MAIN VARIABLES
  bbb 
```

不管是哪个或它是。XSLT 处理器打印出我在 CDATA 标记中的所有内容，即使它不在匹配的模板中（似乎只是将 CDATA 从文档中取出）这里可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:11:13.093

我认为这里的问题与XML 文件中定义的命名空间[http://www.dabgps.nxp有关。](http://www.dabgps.nxp)有一个类似的线程正在解释这个here。

[xsl:template match 找不到匹配项](https://stackoverflow.com/questions/273199/xsltemplate-match-doesnt-find-matches)

# html - 是否可以使用 XML 文件中的数据制作可选择的下拉菜单？

> ID：12488266
> 
> 赞同：0
> 
> 时间：2012-09-19T03:46:59.917
> 
> 标签：html, xml, xslt

我正在尝试为地址簿创建一个目录，我想知道是否可以创建一个可选择的下拉菜单来从 XML 文件中提取联系人数据。The ideal way I would want it is to have all of the names of the contacts in the drop down menu, and when one is selected the rest of the information would pop up above the drop down, such as Address, Phone Number, and Email .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:51:12.383

要么使用 PHP 等服务器端语言从 XML 中提取数据并将其插入 HTML 文档，要么使用 AJAX 将 XML 文件拉到客户端，然后使用 JavaScript 对其进行处理并将其插入 DOM。

如果您知道如何将内容插入 HTML 文档（在 PHP 的情况下）或 DOM（在 JavaScript 的情况下），则应该有库/框架/插件/任何可用于解析 XML 的工具，你可以很容易地做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:19:52.340

据我了解，您有一个 XML 文档。使用 XSLT，您可以从 XML 创建一个 XHTML 文件，并且可以在浏览器中显示该文件（XHTML 是符合 XML 规则的 HTML）。

如果是这样的话，是的，您可以使用 XSLT 创建链接。但是数据需要在您的 XML 源文件中，而不是在某些数据库中。

有一篇文章对其进行了描述：[http ://www.ibm.com/developerworks/xml/library/x-tipxslt/index.html](http://www.ibm.com/developerworks/xml/library/x-tipxslt/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T08:16:36.520

您可以使用以下方式将 XSL 附加到 XML：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="cdcatalog.xsl"?>
... actual XML content... 
```

如果在 XML 上应用 XSL 输出带有 JavaScript 的 HTML 页面，您可以获得实际结果。由于字符转义，输出 JavaScript 有点痛苦，但可以做到。

# c++ - system() C++ 中的空格

> ID：12488267
> 
> 赞同：0
> 
> 时间：2012-09-19T03:47:05.023
> 
> 标签：c++, cmd, system, spaces

我已经尝试使用 Stackoverflow 中的一些解决方案，但我无法让它工作，我想从 C++ 启动一个 .LOG（.txt 文件），但包含它的路径文件夹可能有空格，所以当我尝试要启动它，我收到一条错误消息，说它找不到文件，因为 pah（包含空格）是错误的，这是我的代码的样子：

```
void Log (unsigned int Code,...)
{
char currdate[11] = {0};
SYSTEMTIME t;
GetLocalTime(&t);
sprintf(currdate, "%02d:%02d:%02d", t.wHour, t.wMinute, t.wSecond);

PROCESSENTRY32 pe32;
FILE* FileHwnd1;

FileHwnd1 = fopen("TEST.log","a+");
fprintf(FileHwnd1,"[%s] Code: %X\n",currdate,Code);
fclose(FileHwnd1);
char buffer[MAX_PATH];
GetModuleFileName( NULL, buffer, MAX_PATH);
char Path[50];

wsprintf(Path,"start %s\\AntiHack.log",buffer);
system(Path);//Here is where i get the containing spaces path error
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T04:18:41.030

我建议您完全避免系统调用并自己启动进程。

1.  使用[AssocQueryString](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773471%28v=vs.85%29.aspx) () 查找扩展的关联进程（在本例中为 .log）
2.  设置并启动[CreateProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx) () 调用以调用，传递适当的命令行。

还有其他方法可以做到这一点，但正如您现在注意到的那样，绕道而行总会有陷阱。以上是 Explorer.exe 如何为扩展启动相关进程的现场。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T03:48:51.637

你可以试试：

```
wsprintf(Path,"start \"\" \"%s\"\\\AntiHack.log",buffer); 
```

# quartz-scheduler - 带有石英属性的弹簧

> ID：12488272
> 
> 赞同：2
> 
> 时间：2012-09-19T03:47:20.560
> 
> 标签：quartz-scheduler

我正在尝试使用 postgreSQL 将石英计划作业存储在数据库中。

数据库名称是“testdb”，架构是“testschema”。我有以下quartz.properties。我有一个以下quartz.properties，但我收到此错误消息“org.postgresql.util.PSQLException：错误：关系“quartz_triggers”不存在”。

```
org.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool
org.quartz.threadPool.threadCount = 10
org.quartz.threadPool.threadPriority = 5
org.quartz.threadPool.threadsInheritContextClassLoaderOfInitializingThread = true

org.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreTX
org.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.StdJDBCDelegate
org.quartz.jobStore.dataSource = myDS
org.quartz.jobStore.tablePrefix = quartz_

org.quartz.dataSource.myDS.driver = org.postgresql.Driver
org.quartz.dataSource.myDS.URL = jdbc:postgresql://localhost:5432/postgres
org.quartz.dataSource.myDS.user = postgres
org.quartz.dataSource.myDS.password = welcome123
org.quartz.dataSource.myDS.maxConnections  10 
```

谁能告诉我出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:35:51.633

首先，您必须运行在数据库中创建石英表的安装脚本。

这些文件在完整的石英 jar 文件 (/docs/dbTables) 中可用

这是文档：http: [//quartz-scheduler.org/documentation/quartz-2.x/tutorials/tutorial-lesson-09](http://quartz-scheduler.org/documentation/quartz-2.x/tutorials/tutorial-lesson-09)

M。

# javascript - javascript原型继承再次

> ID：12488273
> 
> 赞同：-2
> 
> 时间：2012-09-19T03:47:21.070
> 
> 标签：javascript, inheritance, prototype

我对 Javascript 编程并不陌生，但我无法理解它是原型对象，不管是继承。当我试图通过这些东西工作时，我需要问代码什么问题才能解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:14:23.873

在 JavaScript 中使用“基于类”的对象创建：

```
var Wallet = function (pin, starting_balance, overdraft) {
    this.amount = starting_balance;
    this.pin = pin;
    this.overdraft = overdraft;
};

Wallet.prototype.addFunds = function (amount) {
    this.amound += amount;
};

Wallet.prototype.withdrawFunds = function (amount) {
    if (this.amount + this.overdraft >= amount) {
        this.amount -= amount;
        return new Wallet(this.pin, amount, this.overdraft);
    }
};

Wallet.prototype.displayBalance = function () {
    var cents = this.amount % 100,
        dollars = (this.amount - cents) / 100,
        total = dollars + "." + (cents > 9 ? cents : ("0" + cents));

    var output = "Current Balance: $" + total;
};

var myWallet = new Wallet(1234, 2000, 100000);
myWallet.displayBalance(); // "Current Balance: $20.00" 
```

通过在返回的函数`new`上使用运算符，我可以修改构造函数的 。`constructor``this``prototype`

即：修改`Wallet.prototype`.

然后，所有`Wallet`s 都具有相同的功能。

当然，这不是一个非常安全的钱包。世界上任何人都可能出现并改变`myWallet.amount`或`myWallet.pin`。

但如果我让钱包更安全：

```
var Wallet = function (pin, amount, overdraft) {
    var balance = amount,
        keyCode = pin,
        padding = overdraft;
};

Wallet.prototype.depositFunds = function (amount) { balance += amount; }; // does NOT work 
```

这行不通。原型***只能访问构造函数返回的对象的公共属性***

这意味着`Obj.prototype.<whatever>`只能通过`this.<whatever> = <x>;`在构造函数中或事后手动添加某些东西来访问添加到对象中的内容`myObj.property = <x>;`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:11:28.070

这篇博文，[Understanding JavaScript Prototypes](http://javascriptweblog.wordpress.com/2010/06/07/understanding-javascript-prototypes/)，真的帮助我理解了这一切。

对象原型定义的方法可以直接在对象上调用。例如，如果 obj 有一个原型，它有一个名为 'doSomething' 的方法，那么我们可以调用`obj.doSomething()`.

# objective-c - 使用蓝牙 4.0 交换黑白 iOS 设备数据

> ID：12488274
> 
> 赞同：2
> 
> 时间：2012-09-19T03:47:41.337
> 
> 标签：objective-c, bluetooth, gamekit, core-bluetooth

我正在研究如何使用蓝牙 4.0 在多个 iOS 设备之间交换数据（信息/文件/等）。使用哪些框架更好地做到这一点？Core Bluetooth 或 GameKit 能胜任吗？

任何帮助、提示、建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T00:13:54.460

CoreBluetooth 框架将适用于具有蓝牙 4.0 的 iOS 6+ 设备（iPhone 4s 和 5、iPod Touch Gen 5、iPad Gen 3 和 4、iPad Mini）上的信息/文件交换。它的范围约为 50 米，数据速率约为每秒 2 KB。

如果您想尝试将 2 个 iOS 6 设备连接在一起，我建议您查看应用程序[LightBlue 。](https://itunes.apple.com/us/app/lightblue/id557428110?mt=8&ign-mpt=uo=4)它将让您在设备之间进行读写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T22:54:22.100

Core Bluetooth 可以工作，但只能在 iOS 6 下工作。iOS 5 下的 Core Bluetooth 只允许 iOS 设备作为主设备（检测广播 BLE 设备并连接到它们的设备），而不是作为从设备（广播其存在并连接到需要其服务的主设备）。

WWDC 2012 的视频中有一些关于差异和技术的很好的概述。寻找：

   会话 703 - 核心蓝牙 101

   会话 705 - 高级核心蓝牙

在来自 WWDC 的视频会议中，可以在 Apple 网站的开发人员部分找到。

# postgresql - Postgres CTE：在非递归术语中键入字符变化（255）[]，但总体键入字符变化[]

> ID：12488282
> 
> 赞同：12
> 
> 时间：2012-09-19T03:50:57.220
> 
> 标签：postgresql, graph-theory, common-table-expression

我是 SO 和 postgres 的新手，所以请原谅我的无知。尝试使用类似于本文中的解决方案在 postgres 中获取图形的集群[Find cluster given node in PostgreSQL](https://stackoverflow.com/questions/12242672/find-cluster-given-node-in-postgresql)

唯一的区别是我的 id 是一个 UUID，我使用 varchar(255) 来存储这个 id

当我尝试运行查询时，出现以下错误（但不确定如何转换）：

```
ERROR: recursive query "search_graph" column 1 has type character varying(255)[] in non-recursive term but type character varying[] overall 
```

SQL 状态：42804 提示：将非递归项的输出转换为正确的类型。人物：81

我的代码（与之前的帖子基本相同）：

```
WITH RECURSIVE search_graph(path, last_profile1, last_profile2) AS (
SELECT ARRAY[id], id, id
FROM node WHERE id = '408d6b12-d03e-42c2-a2a7-066b3c060a0b'
UNION ALL
SELECT sg.path || m.toid || m.fromid, m.fromid, m.toid
FROM search_graph sg
JOIN rel m
ON (m.fromid = sg.last_profile2 AND NOT sg.path @> ARRAY[m.toid]) 
   OR (m.toid = sg.last_profile1 AND NOT sg.path @> ARRAY[m.fromid])
)

 SELECT DISTINCT unnest(path) FROM search_graph; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-19T04:13:05.693

尝试`SELECT`将递归和非递归术语中的列表转换为`varchar`.

```
WITH RECURSIVE search_graph(path, last_profile1, last_profile2) AS (
    SELECT ARRAY[id]::varchar[], id::varchar, id::varchar
    FROM node WHERE id = '408d6b12-d03e-42c2-a2a7-066b3c060a0b'
  UNION ALL
    SELECT (sg.path || m.toid || m.fromid)::varchar[], m.fromid::varchar, m.toid::varchar
    FROM search_graph sg
    JOIN rel m
    ON (m.fromid = sg.last_profile2 AND NOT sg.path @> ARRAY[m.toid]) 
       OR (m.toid = sg.last_profile1 AND NOT sg.path @> ARRAY[m.fromid])
)
SELECT DISTINCT unnest(path) FROM search_graph; 
```

# django - Tastypie POST 位置 HTTPS 与 HTTP

> ID：12488285
> 
> 赞同：6
> 
> 时间：2012-09-19T03:51:15.260
> 
> 标签：django, http, heroku, https, tastypie

当我向我的 RESTful Tastypie API 发布一个新资源时，我创建了一个资源并得到一个 201 响应，如下所示：

```
HTTP/1.1 201 CREATED
Content-Type: text/html; charset=utf-8
Date: Wed, 19 Sep 2012 01:02:48 GMT
Location: http://example.com/api/v1/resource/12/
Server: gunicorn/0.14.6
Content-Length: 0
Connection: keep-alive 
```

伟大的！除了我发布到一个 HTTPS URL 并希望`Location`返回一个 HTTPS 标头。我怎样才能配置tastepie来做到这一点？

**添加**

我正在使用一些中间件来强制使用 SSL，但我认为这不是导致此问题的原因。无论如何，这里是：

```
class SSLifyMiddleware(object):
    # Derived from https://github.com/rdegges/django-sslify
    def process_request(self, request):
        if not any((not settings.FORCE_SSL, request.is_secure(), request.META.get('HTTP_X_FORWARDED_PROTO', '') == 'https')):
            url = request.build_absolute_uri(request.get_full_path())
            secure_url = url.replace('http://', 'https://')
            return HttpResponseRedirect(secure_url) 
```

**添加**

这是一个 Heroku 应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T17:30:33.063

`http`正如我们已经确定的那样，以代替开头的 URL 的原因`https`是.`request.is_secure()``False`

导致存在的可能原因有多种`request.is_secure()`，`False`例如在使用 HTTP 连接到服务器的负载均衡器或反向代理之后，而客户端和负载均衡器/反向代理之间的连接是使用 SSL 进行的。

[`SECURE_PROXY_SSL_HEADER`](https://docs.djangoproject.com/en/dev/ref/settings/#secure-proxy-ssl-header)如果您在代理或负载均衡器后面，请查看文档，这是一些解决方案：

> 但是，如果您的 Django 应用程序位于代理后面，则代理可能会“吞下”请求是 HTTPS 的事实，使用代理和 Django 之间的非 HTTPS 连接。在这种情况下，is_secure() 将始终返回 False——即使对于最终用户通过 HTTPS 发出的请求也是如此。
> 
> 在这种情况下，您需要配置代理以设置自定义 HTTP 标头，告诉 Django 请求是否通过 HTTPS 传入，并且您需要设置 SECURE_PROXY_SSL_HEADER 以便 Django 知道要查找的标头。

# jquery - 如何使用 keydown 事件设置变量？

> ID：12488286
> 
> 赞同：1
> 
> 时间：2012-09-19T03:51:16.327
> 
> 标签：jquery

我创建了一个虚拟键盘作为一个项目来学习，除其他外，jQuery：[http ://brianfryer.1.ai/virtual-keyboard/index.html](http://brianfryer.1.ai/virtual-keyboard/index.html)

单击屏幕上的键时，其相关字符将添加到文本区域。

但是，当按下键盘键时，什么也没有发生——相关的字符应该被添加到文本区域。

我遇到的问题是`clickedKey`变量。设置`clickedKey`为静态字符（即'm'）将产生所需的结果（字符被添加到文本区域），但我认为为每个键创建一大块代码并不是一个好主意。

```
$(document).ready(function() {

    // Find the textarea, and save it to var screen
    var screen = $("#screen > textarea");

    $('li').not('.modifier, .short-key').click(function() {
        // Find the first <span>, get the contents, trim away the whitespace, and save it to var txt
        var txt = $(this).find(':first-child').text().trim();
        // Add the trimmed txt to the textarea
        screen.val(screen.val() + txt);
    });

    var clickedKey = $(document).keydown( function(event){ String.fromCharCode(event.keyCode); });

    KeyboardJS.bind.key(
        // Physical keyboard input
        clickedKey,
        // onDownCallback
        function() {
            // Make the on-screen key flash
            $('#' + clickedKey).addClass('hover');
            // If the textarea has focus...
            if ($('#screen > textarea').is(':focus')) {
                // ...do nothing
            } else {
                // Add the trimmed txt from the first span to the textarea
                var txt = $('.keys').find('#' + clickedKey).children(':first').text().trim();
                screen.val(screen.val() + txt);
            }
        },
        function() {
            // After a key is clicked, remove the .hover class
            setTimeout(function() {
                $('.keys').find('#' + clickedKey).removeClass('hover');
            }, 100);
        }
    );

}); 
```

我正在使用[keyboard.js](http://robertwhurst.github.com/KeyboardJS/)进行键绑定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:27:33.747

我是 KeyboardJS 的作者。

`activeKeys`通过该方法按下键可能会有所帮助。这样您就可以获得我用于特定键的确切名称，并且您的绑定将起作用。

```
clickedKey = KeyboardJS.activeKeys()[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T05:35:24.153

Keyboard.js 旨在直接与 js 一起使用。您正在尝试将 jQuery 事件对象传递给它，这就是它返回错误的原因：

```
Object [object Object] has no method 'toLowerCase' - Keyboard.js 
```

解决方案是仅使用 javascript 来获取按键。我将此添加到您的脑海中：[http ://robertwhurst.github.com/KeyboardJS/demo.js](http://robertwhurst.github.com/KeyboardJS/demo.js)

将此添加到您的身体中： `<div class="demoReadout"></div>`

这对我有用。现在你只需要从那里将事件挂钩到你的 jQuery。希望那些对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T23:22:55.647

使用我在这里找到的答案（http://stackoverflow.com/a/2819568/1681875），我能够汇总以下内容（有效）：

```
// "press" = you used your physical keyboard
// "clicked" = you used your mouse to click the on-screen keyboard

$(document).ready(function() {

// Find the textarea, save it to var screen, and focus the cursor on it
var screen = $("#screen > textarea");
screen.focus();

// Listen for when a (non-modifier, or non-function) key is clicked
$('li').not('.modifier, .short-key').click(function() {

    // Find the first <span>, get the contents, trim away the whitespace, and save it to var txt
    var character = $(this).find(':first-child').text().trim();

    // Extend jQuery to insert characters at the caret
    jQuery.fn.extend({
        insertAtCaret: function(character){
            return this.each(function(i) {
                if (document.selection) {
                    //For browsers like Internet Explorer
                    this.focus();
                    sel = document.selection.createRange();
                    sel.text = character;
                    this.focus();
                }
                else if (this.selectionStart || this.selectionStart == '0') {
                    //For browsers like Firefox and Webkit based
                    var startPos = this.selectionStart;
                    var endPos = this.selectionEnd;
                    var scrollTop = this.scrollTop;
                    this.value = this.value.substring(0, startPos)+character+this.value.substring(endPos,this.value.length);
                    this.focus();
                    this.selectionStart = startPos + character.length;
                    this.selectionEnd = startPos + character.length;
                    this.scrollTop = scrollTop;
                } else {
                    this.value += character;
                    this.focus();
                }
            })
        }
    });

    // Insert characters in the textarea at the current caret
    screen.insertAtCaret(character);
});

$(document).on({
    // Do this when a key is pressed
    'keydown': function(event){
        // Get the value of the key being pressed and make sure it's lower case
        key = (String.fromCharCode(event.keyCode)).toLowerCase();
        // Make the on-screen key flash for 100ms
        $('#' + key).addClass('hover');
        // Focus on the textarea
        $('#screen > textarea').focus();
    },
    // Do this when a key is let go
    'keyup': function(event) {
        // Get the value of the key being pressed
        key = String.fromCharCode(event.keyCode).toLowerCase();
        // After a key is clicked, remove the .hover class
        $('#' + key).removeClass('hover').delay(100);
     }
}); 
```

});

# c++ - C++ 对象不能与点运算符一起使用

> ID：12488287
> 
> 赞同：0
> 
> 时间：2012-09-19T03:51:17.757
> 
> 标签：c++, object, dot-operator

您好，我正在开发一个 C++ 程序，我刚开始从我创建的类中创建一些示例对象。我正在创建对象，但由于某种原因，点运算符无法使用该对象

这是对象调用

```
Card testcard(Suit hearts, Value six); 
```

这是构造函数

```
Card::Card(Suit suit, Value facevalue)
{
Card::suit=suit;
Card::faceValue=facevalue;
}; 
```

但是点运算符不起作用，就好像对象实际上并不存在一样

我在单独的部分中控制大部分程序，因此有许多头文件实例是卡类所在的位置，我不确定这是否是问题的一部分

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T03:56:10.270

在实例方法中，您不能使用点来访问实例。

请尝试`this->`：

```
Card::Card(Suit suit, Value facevalue)
{
    this->suit=suit;
    this->faceValue=facevalue;
}; 
```

或者，您可以使用初始化列表：

```
Card::Card(Suit suit, Value facevalue) : suit(suit), faceValue(facevalue)
    { } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T04:06:15.977

假设这个类看起来像：

```
class Card {
public:
    Card (Suit argSuit, Value argFaceValue);

private:
    Suit   m_Suit;
    Value  m_FaceValue;
}; 
```

构造函数看起来像这样。由于类的成员可用于从类创建的对象，因此您无需执行任何特殊操作即可访问它们。类的成员在范围内并且是可见的。您只需要确保函数的参数列表使用与类/对象成员不同的符号或名称。

```
Card::Card(Suit argSuit, Value argFaceValue)
{
    m_Suit = argSuit;
    m_FaceValue = argFaceValue;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T04:11:27.353

> 这是对象调用
> 
> ```
> Card testcard(Suit hearts, Value six); 
> ```

不，这是一个函数声明。自然地`.`，在函数名称上使用成员访问运算符 ( ) 是行不通的，函数有自己的类型，没有成员。

要声明一个自动变量（创建一个新的对象实例），不要重复参数类型。说啊：

```
Card testcard(hearts, six); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T04:22:42.677

我认为您的一些命名约定给您带来了一些混乱。如上所述，您遇到了传递给构造函数的*suit*和*facevalue参数的上下文问题。*这意味着在构造方法的上下文中，西装实际上意味着作为参数传入的西装，而不是作为类 Card 的成员变量的西装。人们通常使用命名约定来帮助避免这种混淆，例如在类的每个数据成员前面放置一个*m_*，这样*suit*就会变成 m_suit。你可以使用任何你喜欢的东西，但是这样其他人的代码会马上知道 m_suit 是一个数据成员。

另一点是您可以并且可能应该在执行构造函数的代码之前初始化类的数据成员。这称为“*初始化列表*”，将按如下方式完成（假设您更改为上面的命名约定）。

```
Card::Card (Suit suit, Value facevalue)
 : m_suit (suit), m_facevalue (facevalue)
{
    // no code needs to go here
} 
```

出于效率原因，养成这种习惯是个好主意。此外，在构造函数中使用***this***指针通常不是一个好主意。这并不违法，但会给你带来麻烦。

至于点运算符不起作用，从您的问题中不清楚您在哪里使用点运算符。如果您指的是上面的*::*语法，那并不是真正的运算符，它是 C++ 语法的一部分，表明您正在取消引用该类。*如果您已将suit*和*facevalue*数据成员声明为***static*** ，该语法将起作用，但这不是您想要做的。

您提到您在多个头文件中声明 Card 类 - 这也很糟糕。

# c++ - 解析和重新排列主机名

> ID：12488289
> 
> 赞同：8
> 
> 时间：2012-09-19T03:51:31.487
> 
> 标签：c++, python, perl, awk

下面是存储在文本文件中的主机名列表。

```
web1.maxi.com
web3.maxi.com
web4.maxi.com
web5.maxi.com
web6.maxi.com
web7.maxi.com
web8.maxi.com
web9.maxi.com
web11.maxi.com 
```

为了尽快显示它，需要对其进行解析和重写/显示为

```
web[1,3-9,11].maxi.com 
```

你们能帮我解决这个问题吗，任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T10:23:57.893

使用 perl，您可以使用该[`Set::IntSpan`](https://metacpan.org/module/Set%3a%3aIntSpan)模块来压缩数字序列。

以下解决方案可以处理混合和无序的站点列表。

*文件*

```
web3.maxi.com
web4.maxi.com
web5.maxi.com
mail1.mexi.com
web6.maxi.com
web9.maxi.com
web9.maxi.com

web11.maxi.com
mail3.mexi.com
web7.maxi.com
mail4.mexi.com
mail25.mexi.com      
  mail26.mexi.com
mail27.mexi.com
mail28.mexi.com
  web8.maxi.com
mail29.mexi.com
mail110.mexi.com
web1.maxi.com 
```

*解析.pl*

```
#!/usr/bin/perl -l

use Set::IntSpan;
use File::Slurp qw/slurp/;

$str = slurp(\*STDIN);

# Remove redundant whitespace
chop $str;
$str =~ s/^[\t ]+|[\t ]+$//gm;
$str =~ s/\R+/\n/g;

# Copy $str so we can match numbers in it without disturbing the loop
$nums = $str;

# Parse lines in $str in sequence
while($str =~ /^(.*)$/gm) {
  $line = $1;

  # Extract bits before and after number
  ($pre, $post) = $line =~ /([^\d]+)\d+(.*)$/m;

  # Check if its been printed already
  next if $seen{$pre . $post};

  # If not, extract numbers
  @numbers = $nums =~ /$pre(\d+)$post/g;

  print $pre . "[" 
        . Set::IntSpan->new(@numbers)->run_list()
        . "]" . $post;

  $seen{$pre . $post} = 1;
} 
```

像这样运行它：

```
perl parse.pl < infile 
```

输出：

```
web[1,3-9,11].maxi.com
mail[1,3-4,25-29,110].mexi.com 
```

可能神秘`@numbers = $nums =~ /$pre(\d+)$post/g`的扩展为由正则表达式匹配的项目数组并将其保存在`@numbers`.

请注意，此解决方案将整个文件加载到内存中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T04:07:51.160

```
with open("data.txt") as f:
    sites=[x.strip() for x in f]
    ranges=[]
    for x in sites:
        x=x.split(".")
        num=int(x[0][x[0].index("web")+3:])
        if ranges:
            if num-ranges[-1][-1]==1:
                ranges[-1].append(num)
            else:
                ranges.append([num])    
        else:
            ranges.append([num])        
    print ranges
    print "web["+",".join(str(x[0]) if len(x)==1 else str(x[0])+"-"+str(x[-1]) for x in ranges)+"].maxi.com" 
```

**输出：**

```
[[1], [3, 4, 5, 6, 7, 8, 9], [11]]
web[1,3-9,11].maxi.com 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T05:36:13.933

我的看法：

```
#print hosts
lines = open("log.txt").readlines()
numbers = [int(line.split(".")[0][3:]) for line in lines]
out = [[]]
index = 0
for i in xrange(len(numbers) - 1):
    out[index].append(numbers[i])
    if (numbers[i + 1] - numbers[i] != 1):
        out.append( [] )
        index += 1
out[-1].append(numbers[-1])
strings = [str(number[0]) if len(number) == 1 else str(number[0]) + "-" + str(number[-1]) for number in out]
print ",".join(strings) 
```

将循环更改为更具pythonic/功能的东西会很好。

# sql - 如何求和小时、分钟和秒？

> ID：12488290
> 
> 赞同：0
> 
> 时间：2012-09-19T03:51:38.593
> 
> 标签：sql, sql-server, sql-server-2008

我需要使用 Sql Server 2008 对小时、分钟和秒求和

该字段仅包含时间值。

**输入**

```
ID       HORA_S  
--  ----------------------
1   1899-12-30 18:22:50.000
2   1899-12-30 18:22:50.000
3   1899-12-30 18:30:50.000 
```

**输出**

```
HOURS  MINUTES SECONDS
----   ---     --------
55     16      30 
```

在玩弄了这段代码之后，我解决了！！！

```
SELECT  SUM(DATEPART(hh, CAST(HORA_S AS DATETIME))) 
        + ( SUM(DATEPART(MINUTE, CAST(HORA_S AS DATETIME))) / 60 )
        + ( SUM(DATEPART(MINUTE, CAST(HORA_S AS DATETIME))) % 60
        + ( SUM(DATEPART(SECOND, CAST(HORA_S AS DATETIME))) / 60 ) ) / 60 AS HORAS,
    ( SUM(DATEPART(MINUTE, CAST(HORA_S AS DATETIME))) % 60
        + ( SUM(DATEPART(SECOND, CAST(HORA_S AS DATETIME))) / 60 ) ) % 60 AS MINUTOS,
    SUM(DATEPART(SECOND, CAST(HORA_S AS DATETIME))) % 60 AS SEGUNDOS FROM Table 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T04:47:23.310

这是一个代码更少的工作示例

样品表

```
DECLARE @T TABLE (ID int, HORA_S datetime)
insert @T values
(1, '1899-12-30 18:22:50.000'),
(2, '1899-12-30 18:22:50.000'),
(3, '1899-12-30 18:30:50.000') 
```

* * *

```
;WITH T(V) AS (
    SELECT convert(datetime,SUM(convert(float, 2+hora_s)))
    FROM @T
)
SELECT
    [HOURS]   = floor(convert(float,V)*24),
    [MINUTES] = DATEPART(MI,V),
    [SECONDS] = DATEPART(SS,V)
FROM T 
```

注意：查询中的 2+ 假定 by `storing time only`，日期部分将始终为`1899-12-30`。我知道 Delphi 使用该日期作为 day `0`。

# linq-to-dataset - Linq to sql 查询失败

> ID：12488299
> 
> 赞同：-1
> 
> 时间：2012-09-19T03:53:27.990
> 
> 标签：linq-to-dataset

我在执行 linq to sql 查询时遇到问题。请看一看。

这是我的代码：

```
 SELECT c.client_name,
       n.instrument_group_id,
       n.trade_date,
       sum(n.buy_qty) AS TotBuyQty,
       sum(convert(float,n.buy_value) + convert(float,n.buy_brokerage)) AS TotBuyVal,
       sum(n.sell_qty) AS TotSellQty,
       sum(convert(float,n.sell_value) - convert(float,n.sell_brokerage)) AS TotSellVal,
       sum(convert(float,n.sell_value) - convert(float,n.sell_brokerage))- sum(convert(float,n.buy_value) + convert(float,n.buy_brokerage)) AS ProfitLoss
FROM nse_fo_transaction AS n
LEFT JOIN client_master AS c ON n.client_id = c.client_id
WHERE n.client_id = 5
  AND n.trade_date BETWEEN '09/01/2012' AND '09/19/2012'
GROUP BY c.client_name,
         n.instrument_group_id,
         n.trade_date
ORDER BY n.trade_date 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:06:11.437

这个怎么样？

```
from d in dps_admin_user
join c in dps_admin_role on d.user_id equals c.user_id into gcs
from c2 in gcs.DefaultIfEmpty()
group d.firstname by c2.parent_id into gfns
where gfns.Any()
orderby gfns.Count()
select gfns 
```

我只是把它放在 LINQPad 中。我必须说不是很有意义，但它包含您所需的运算符。

为什么需要这样的例子？

* * *

这大致是您想要的查询。我无法测试它，但它应该相当接近。

```
var query =
    from n in nse_fo_transaction
    where n.client_id == 5
    where n.trade_date >= d0 && n.trade_date < d1
    join c0 in client_master on n.client_id equals c.client_id into cs
    from c in cs.DefaultIfEmpty()
    group new { n, c } by new
    {
        c.client_name,
        n.instrument_group_id,
        n.trade_date,
    } into gs
    orderby gs.Key.trade_date
    select new
    {
        gs.Key.client_name,
        gs.Key.instrument_group_id,
        gs.Key.trade_date,
        TotBuyQty = gs.Sum(x =>
            (float)x.n.buy_qty),
        TotBuyVal = gs.Sum(x => 
            (float)x.n.buy_value
            + (float)x.n.buy_brokerage),
        TotSellQty = gs.Sum(x => 
            (float)x.n.sell_qty),
        TotSellVal = gs.Sum(x =>
            (float)x.n.sell_value
            - (float)x.n.sell_brokerage),
        ProfitLoss = gs.Sum(x =>
            (float)x.n.sell_value
            - (float)x.n.sell_brokerage
            - (float)x.n.buy_value 
            + (float)x.n.buy_brokerage)
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T11:59:20.103

```
Dim query = (From n In tblNseFo.AsEnumerable _
                            Where n!client_id = intClientID _
                            Group Join c In tblClient _
                            On n!client_id Equals c!client_id Into cs = Group _
                            From c In cs.DefaultIfEmpty _
                            Group n, c By _
                            c!client_name, n!instrument_group_id, n!trade_date Into gs = Group _
                            Order By trade_date _
                            Select New With { _
                                .client_name = client_name, _
                                .instrument_group_id = instrument_group_id, _
                                .trade_date = trade_date, _
                                .TotBuyQty = gs.Sum(Function(x) x.n!buy_qty), _
                                .TotSellQty = gs.Sum(Function(x) x.n!sell_qty), _
                                .TotBuyVal = gs.Sum(Function(x) x.n!buy_value) + gs.Sum(Function(x) x.n!buy_brokerage), _
                                .TotSellVal = gs.Sum(Function(x) x.n!sell_value) - gs.Sum(Function(x) x.n!sell_brokerage), _
                                .ProfitLoss = (gs.Sum(Function(x) x.n!sell_value) - gs.Sum(Function(x) x.n!sell_brokerage)) - _
                                              (gs.Sum(Function(x) x.n!buy_value) + gs.Sum(Function(x) x.n!buy_brokerage))}) 
```

# mysql - SQL 计数/查询帮助

> ID：12488300
> 
> 赞同：2
> 
> 时间：2012-09-19T03:53:38.890
> 
> 标签：mysql, sql, count

所以我正在学习 MySQL，我正在尝试执行以下操作：

对于每位讲师，请列出他/她的姓名和他/她指导的学生人数。

架构的相关部分是：

```
Person(ID, Name)
Student(StudentID, MentorID)
Instructor(InstructorID) 
```

`InstructorID`和`StudentID`映射到`Person.ID`和`MentorID`映射到（每个学生都有`InstructorID`一个导师导师，导师和学生都是人）。

我尝试了以下方法无济于事：

```
select p.Name, count(select s.StudentID
                     from Student s
                     where s.MentorID = i.InstructorID)
from Person p, Instructor i
where p.ID = i.InstructorID; 
```

在阅读 StackOverflow 上的一些内容后，这也是：

```
select InstructorDetails.Name, count(Mentees)
from Instructor i
inner join Person as InstructorDetails
    on InstructorDetails.ID = i.InstructorID
inner join Student as Mentees
    on Mentees.MentorID = i.InstructorID; 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T03:55:34.693

你缺乏`GROUP BY`你的查询，

```
SELECT InstructorDetails.Name, count(*) totalCount
FROM   Instructor i
       INNER JOIN Person as InstructorDetails
           ON InstructorDetails.ID = i.InstructorID
       INNER JOIN Student as Mentees
           ON Mentees.MentorID = i.InstructorID
GROUP BY InstructorDetails.Name 
```

# ios - 打开和关闭警报 ios

> ID：12488301
> 
> 赞同：5
> 
> 时间：2012-09-19T03:53:45.430
> 
> 标签：ios, xcode, uilocalnotification, alarm

我准备了一个闹钟应用程序，`UILocalnotification`用于安排闹钟。现在设置闹钟后，我想做一个开关，以便我可以使用它打开和关闭它`UISwitch`。我只是想不出我该怎么做？什么我现在的想法是，当您关闭警报时，我将在取消之前存储 DATE 和 TIME 值，`UILocalnotification`以便当用户再次打开警报时，我会使用存储的 DATE 和 TIME 值重新安排它。这是正确的方法还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T04:16:47.477

只需创建具有“日期”、“isCanceled”字段和唯一 id“alarmId”列的数据库表（随意使用 rest）。所以当用户想要取消警报时，试试这个，

```
 NSString *alarmId = @"some_id_to_cancel"; 
    UILocalNotification *notificationToCancel=nil;            
    for(UILocalNotification *aNotif in [[UIApplication sharedApplication] scheduledLocalNotifications]) {
        if([aNotif.userInfo objectForKey:@"ID"] isEqualToString:alarmId]) { 
            notificationToCancel = aNotif; 
            break; 
        } 
    } 
    [[UIApplication sharedApplication] cancelLocalNotification:notificationToCancel]; 
```

为了更好地使用它，您可以通过以下方式创建警报，

```
UILocalNotification *localNotif = [[UILocalNotification alloc] init]; 

 if (localNotif == nil)  
  return;

 localNotif.fireDate = itemDate; 
 localNotif.timeZone = [NSTimeZone defaultTimeZone];
 localNotif.alertAction = NSLocalizedString(@"View Details", nil); 
 localNotif.alertBody = title;
 localNotif.soundName = UILocalNotificationDefaultSoundName; 

 NSDictionary *infoDict = [NSDictionary dictionaryWithObject:stringID forKey:@"ID"]; 
 localNotif.userInfo = infoDict; 

 [[UIApplication sharedApplication] scheduleLocalNotification:localNotif]; 
 [localNotif release]; 
```

# text - cairo：按中心对齐显示文本

> ID：12488303
> 
> 赞同：2
> 
> 时间：2012-09-19T03:53:51.750
> 
> 标签：text, gtk, alignment, cairo

我正在使用 C 语言的 gtk 中的 cairo 绘制图表。我曾经`cairo_show_text`显示文字。为中心对齐定义中心点很容易。但我不知道如何使文本居中对齐。

问题是我不知道如何计算文本长度（我认为这也与字体大小有关）。如果我可以获得文本长度，我可以通过使用移动到适当的点`cairo_move_to`，然后通过显示文本`cairo_show_text`。

有什么建议或任何其他方法吗？

根据随后的liberforce的评论，解决方案是

```
/* howto_move: 0 -- cairo_move_to, 1 -- cairo_rel_move_to
 * x, y is the coordinate of the point for center-align. Whether it is absolute
 * or relative coordinate depends on `howto_move'
 */
void cairo_text_align_horizontal_center (cairo_t *cr, char *text, int if_vertical, int howto_move, double x, double y)
{
  cairo_text_extents_t te;
  double new_x, new_y;

  cairo_text_extents(cr, text, &te);
  if(!if_vertical)
  {
    new_x = x - (te.x_bearing + te.width / 2);
    new_y = y;
  }
  else
  {
    new_x = x;
    new_y = y + (te.x_bearing + te.width / 2);
  }
  if(howto_move == 0)
    cairo_move_to(cr, new_x, new_y);
  else
    cairo_rel_move_to(cr, new_x, new_y);
  cairo_save(cr);
  if(!if_vertical)
    cairo_rotate(cr, 0);
  else
    cairo_rotate(cr, - PI / 2.0);
  cairo_show_text(cr, text);
  cairo_restore(cr);
  cairo_stroke(cr);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:26:53.460

查看[cairo 教程文本对齐部分](http://cairographics.org/tutorial/#L2textalign)。

请记住，对于文本，Cairo API 有点受限。对于更高级的东西，你需要[pangocairo](http://developer.gnome.org/pango/stable/pango-Cairo-Rendering.html)。

# c# - 带有 ajax 自动完成功能的 asp 文本框可以工作，但不能真正选择

> ID：12488305
> 
> 赞同：1
> 
> 时间：2012-09-19T03:54:28.953
> 
> 标签：c#, asp.net, ajax, autocomplete

因为我使用这种方法自动完成这是我的第一次，经过几个小时的研究我确实设法“让它工作”我还不明白为什么但该方法的行为很奇怪，我得到了自动完成的选项列表，尽管它没有在正确的可能匹配上“主页”，而是停留在文本框下的第一行。

声明

```
<%@ Register assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" tagprefix="ac" %> 
```

这是我使用的标签我 aspx

```
<form id="form1" runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server" EnablePageMethods="true"  EnablePartialRendering="true">
</asp:ScriptManager>

                    <asp:TextBox ID="TBX_theMonthInsert" runat="server" Width="60" /> 
```

ajax部分

```
<ac:AutoCompleteExtender ID="AutoCompleteExtender1" EnableCaching="true" 
BehaviorID="AutoCompleteCities" TargetControlID="TBX_theMonthInsert" 
        ServiceMethod="GenerateMonthNames" MinimumPrefixLength="2"
        ContextKey="GenerateMonthNames"  CompletionSetCount="2" runat="server" 

        FirstRowSelected="true" CompletionInterval="350" ShowOnlyCurrentWordInCompletionListItem="true">
                   </ac:AutoCompleteExtender> 
```

背后的代码

```
 [ScriptMethod()]
        [WebMethod]
        public static string[] GenerateMonthNames(string prefixText, int count, string contextKey)
        {
            List<string> items = new List<string>();
            items.Add("Oliver");
            items.Add("Olsen");
            items.Add("learns");
            items.Add("how");
            items.Add("change");
            items.Add("world");
            items.Add("engaging");

            return items.ToArray();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:57:45.620

问题在于在`GenerateMonthNames` for`prefixText`参数中搜索 /query

```
 public static List<string> GenerateMonthNames(string prefixText)
    {
      List<string> items = new List<string>();
         items.Add("Oliver");
         items.Add("Olsen");
         items.Add("learns");
         items.Add("how");
         items.Add("change");
         items.Add("world");
         items.Add("engaging");  

         var returnList = items.Where(item=>item.Contains(prefixTest)).ToList();
         returnList.Sort();
         return returnList; 
     } 
```

这就是我在自动完成代码后面部分中缺少的内容。

当您在目标 TextBox 内输入时，您正在激活“文本更改”触发器以执行 ajax 自动完成功能。

它是触发 Ajax 的文本框文本更改事件 - 自动完成“命令”背后的代码

然后它将 prefixText 作为参数发送到目标 TextBox 内的每个击键，

方法背后的代码（在本例中为“GenerateMonthNames”）在列表的每个元素中搜索部分文本（prefixText 参数），然后过滤掉（即我丢失的部分，例如“它不工作”）不包含您在目标 TextBox 中输入的文本。我希望它能澄清其他一些对使用 ajax autoComplete 也有同样问题的新手。

# c# - 在c#中加入多个表

> ID：12488306
> 
> 赞同：0
> 
> 时间：2012-09-19T03:54:37.463
> 
> 标签：c#, asp.net

```
 var z = from x in resp1.table1
                    join y in resp2.table2 on x.fields equals y.fields
                    select
                    new {y.fields, y.fields1, x.fields2, x.fields3, x.fields4}; 
```

而且我想要一张新桌子，所以基本上我想加入三个或更多桌子，但我不知道如何

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:10:40.990

```
var z = from x in resp1.table1
        join y in resp2.table2 on x.fields equals y.fields
        join z in resp3.table3 on x.fields equals z.fields
        select
        new {y.fields, y.fields1, x.fields2, x.fields3, x.fields4, z.fields5, z.fields6}; 
```

依此类推...但首先检查您是否[真的需要](https://stackoverflow.com/questions/4355502/help-with-a-three-table-linq-query)三重连接！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:14:11.033

```
var z = from x in resp1.table1
        join y in resp2.table2 on x.fields equals y.fields
        join z in resp3.table3 on x.fields equals z.fields
        select
        new {y.fields, y.fields1, x.fields2, x.fields3, x.fields4, z.fields5}; 
```

# javascript - jQuery 验证 - 显示每个字段的错误消息

> ID：12488308
> 
> 赞同：0
> 
> 时间：2012-09-19T03:55:06.183
> 
> 标签：javascript, jquery, html, jquery-validate

[http://jsfiddle.net/nXqd/qC2Ya/6/](http://jsfiddle.net/nXqd/qC2Ya/6/)

看看jsfiddle。当我在两个输入中输入错误数据并单击提交时，我只收到第一个的错误消息。现在我想要其中两个也`name`显示表单中的属性。

在此示例中，我故意使用相同的名称以更轻松地在后端获取这些值。我只是遍历列表并获取所有信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T04:01:33.360

你这样做是不对的。您为两个字段添加了相同的名称。同名属性用于组合组中的字段。您必须使用基于类的验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T04:00:46.980

**工作演示** [http://jsfiddle.net/xr5g6/1/](http://jsfiddle.net/xr5g6/1/)

希望它符合您的需求。`:)`

**代码**

```
$("form").validate({
    rules: {
        number: {required: true, range: [1,2]},
        number2: {required: true, range: [1,2]}
    }
}); 
```

​<strong>html

```
<form name="myForm">
<fieldset>
<legend>My Form</legend>
    <label for='number'>Number</label>
    <input name='number'class='required'/> <br />
    <label for='number'>Number</label>
    <input name='number2' class='required'/>
    <label for='change-range'>Max range</label>
    <input name='change-range' class='required'/>
</fieldset>
<input type="submit">
</form>
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T04:00:50.507

您应该`name`为不同的输入使用不同的属性。

演示：http: [//jsfiddle.net/xYTNw/](http://jsfiddle.net/xYTNw/)

# java - 如何从命令提示符获取输出并使用 Java 语言从中生成文本文件

> ID：12488312
> 
> 赞同：0
> 
> 时间：2012-09-19T03:55:27.603
> 
> 标签：java

这就是我发现的，但在这段代码中，它读取的是你输入的内容，我不希望这样

我正在做一个名为 Knight's Tour 的程序，并在命令提示符下获得输出。我要做的就是从命令提示符中读取这些行并将其存储为一个名为 knight.txt 的输出文件。谁能帮我吗。谢谢。

```
try
{
    //create a buffered reader that connects to the console, we use it so we can read lines
    BufferedReader in = new BufferedReader(new InputStreamReader(System.in));

    //read a line from the console
    String lineFromInput = in.readLine();

    //create an print writer for writing to a file
    PrintWriter out = new PrintWriter(new FileWriter("output.txt"));

    //output to the file a line
    out.println(lineFromInput);

    //close the file (VERY IMPORTANT!)
    out.close();
}

catch(IOException e)
{
    System.out.println("Error during reading/writing");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T03:57:48.737

你不需要Java。只需将游戏的输出重定向到一个文件：

```
game > knight.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:25:07.297

在您发布的代码中，只需更改`lineFromInput`为您想要输出到文本文件的任何字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T04:16:37.053

你可以看看这个例子，它展示了如何将数据写入文件，如果文件存在，它展示了如何追加到文件中，

```
public class FileUtil {

  public void writeLinesToFile(String filename,
                               String[] linesToWrite,
                               boolean appendToFile) {

    PrintWriter pw = null;

    try {

      if (appendToFile) {

        //If the file already exists, start writing at the end of it.
        pw = new PrintWriter(new FileWriter(filename, true));

      }
      else {

        pw = new PrintWriter(new FileWriter(filename));
        //this is equal to:
        //pw = new PrintWriter(new FileWriter(filename, false));

      }

      for (int i = 0; i < linesToWrite.length; i++) {

        pw.println(linesToWrite[i]);

      }
      pw.flush();

    }
    catch (IOException e) {
      e.printStackTrace();
    }
    finally {

      //Close the PrintWriter
      if (pw != null)
        pw.close();

    }

  }

  public static void main(String[] args) {
    FileUtil util = new FileUtil();
    util.writeLinesToFile("myfile.txt", new String[] {"Line 1", 
                                                      "Line 2",
                                                      "Line 3"}, true);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T04:38:24.080

我猜你正在做的是使用 java 中的文件操作将输出写入文件，但你想要的可以更简单的方式完成，如下所示 - 不需要代码。输出可以通过以下方式重定向

```
file > outputfile 
```

这与java无关。

# eclipse - 如何从 JavaElement 转换为其声明的 ASTNode？

> ID：12488318
> 
> 赞同：4
> 
> 时间：2012-09-19T03:56:30.137
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, eclipse-jdt

我从 Eclipse wiki (http://wiki.eclipse.org/JDT/FAQ#From_an_IJavaElement_to_its_declaring_ASTNode) 阅读了这篇文章，但我仍然无法从 IMethod 转换为其相应的 MethodDeclaration。

我有一个扩展点，它向 IMethod 对象添加了一个弹出菜单。拥有这个 IMethod 对象，我想用 ASTVisitor 访问它。

这是我尝试从 IMethod 转换为 MethodDeclaration 的方式

```
public static MethodDeclaration convertToAstNode(final IMethod method) throws JavaModelException
{
    final ICompilationUnit compilationUnit = method.getCompilationUnit();

    final ASTParser astParser = ASTParser.newParser( AST.JLS4 );
    astParser.setSource( compilationUnit );
    astParser.setKind( ASTParser.K_COMPILATION_UNIT );
    astParser.setResolveBindings( true );
    astParser.setBindingsRecovery( true );

    final ASTNode rootNode = astParser.createAST( null );

    final CompilationUnit compilationUnitNode = (CompilationUnit) rootNode;

    final String key = method.getKey();

    final ASTNode javaElement = compilationUnitNode.findDeclaringNode( key );

    final MethodDeclaration methodDeclarationNode = (MethodDeclaration) javaElement;

    return methodDeclarationNode;
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-22T04:34:07.517

我意识到这个问题现在已经很老了，但我想发布这个解决方案，以防未来的谷歌人偶然发现它:)

EijiAdachi 在评论中发布的[解决方法](http://www.eclipse.org/forums/index.php/t/378956/)*应该可以*工作，但是我在寻找解决方案时发现了一种更“正确”的方法来做到这一点。

为了让 ASTNode 正确解析绑定，首先需要完全*解析*页面的内容。这是通过（有点奇怪的名字恕我直言）`ASTNode.accept(ASTVisitor)`方法完成的。因此，如果您将 ASTVisitor 子类化，您可以覆盖您关心的所有 ASTNode 类型的访问方法，并将它们添加到 AST 完全解析后可获得的数据结构中。

此示例将使您的 CompilationUnit 根节点中的所有 MethodDeclaration 节点都可以访问（请参阅 OP 了解如何通过 ASTParser 类获取它）：

```
public class MethodVisitor extends ASTVisitor {
  private final List <MethodDeclaration> methods = new ArrayList <> ();

  @Override
  public boolean visit (final MethodDeclaration method) {
    methods.add (method);
    return super.visit (method);
  }

  /**
   * @return an immutable list view of the methods discovered by this visitor
   */
  public List <MethodDeclaration> getMethods () {
    return Collections.unmodifiableList (methods);
  }
} 
```

任何其他 ASTNode 子类型都可以使用完全相同的过程进行四舍五入（您可以创建单独的访问者类型或将它们全部放在一个中）。

[如果有人有兴趣，您可以在本教程文章](http://www.vogella.com/tutorials/EclipseJDT/article.html)中寻找更完整的示例。

# java - 字符串索引超出范围异常

> ID：12488321
> 
> 赞同：2
> 
> 时间：2012-09-19T03:56:38.767
> 
> 标签：java, string, exception

我正在寻求帮助，以纠正“字符串索引超出范围”的异常错误。我的代码应该将两个字符串作为用户的输入（字符串 1 和字符串 2），并创建作为原始字符串一部分的新字符串。

到目前为止，我有以下内容：

```
modString1 = string1.substring(string1.length() -3, string1.length());

modString2 = string2.substring(0,3); 
```

上面的代码应该取 string1 的最后 3 个字符和 string2 的前 3 个字符。当用户输入一个短于 3 个字符的字符串时，我遇到的问题就出现了。

我想知道如果字符串太短，是否有办法检查输入并添加一个字符（例如 x）？

例如，如果用户为第一个字符串输入“A”，它将将该字符串更改为“xxA”，如果为第二个字符串输入“A”，它会将其更改为“Axx”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:00:59.670

在您的代码之前放置一个 if 语句，在处理它之前检查字符串的长度。

例如：

```
if(string1.length() < 3) {
    // Add characters to the string
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T04:01:30.430

> 我想知道如果字符串太短，是否有办法检查输入并添加一个字符（例如 x）？

您正在寻找的是所谓的**padding**。

它可以通过多种方式完成。最简单的可能是使用外部库，例如 Apache 的[StringUtils](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#rightPad(java.lang.String,%20int,%20char))。您也可以使用`StringBuilder`.

有关的：

*   [如何在 Java 中填充字符串？](https://stackoverflow.com/questions/388461/how-can-i-pad-a-string-in-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T04:06:02.560

像下面这样进行验证并添加字符串。例如。

```
if(string1.length()<3){     
      String op = 'xx'; 
      string1 += op;
} 
```

# asp.net - 在 webgrid 中格式化 html

> ID：12488322
> 
> 赞同：0
> 
> 时间：2012-09-19T03:56:44.263
> 
> 标签：asp.net, razor

我有一个如下的 webgrid 表，

```
 @grid.GetHtml(
        columns: grid.Columns(
          grid.Column("thumb", 
format: @<img src="~/@item.thumb" alt="@item.name"/>),
          grid.Column(format: @<a href="~/Page/@item.name/?id=@item.ID"> <h3 class="blog-page-title">@item.name</h3></a>)

        )
      ) 
```

我想将列的名称放在第二列中，我还想在相同的列中添加来自 db 的描述

我在下面的代码中做了但不起作用

@grid.GetHtml(

```
 columns: grid.Columns(
      grid.Column("thumb", format: @<img src="~/@item.thumb" alt="@item.name"/>),
      grid.Column("Items list" format: @<a href="~/Page/@item.name/?id=@item.ID">
 <h3 class="blog-page-title">@item.name</h3></a>
<br/>@item.description
<br/>@item.price)

    )
  ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T03:59:24.700

为了将多个顶级标签放在一个内联帮助器 ( `@<...>`) 中，您需要将它们包装在`<text>`.

# javascript - WinJS 数据绑定到属性获取/设置

> ID：12488323
> 
> 赞同：3
> 
> 时间：2012-09-19T03:56:53.420
> 
> 标签：javascript, windows-8, winjs

在 WinJS 中，我可以在 listView 中绑定属性获取器吗？假设我有一个这样定义的对象：

```
var MyLib = MyLib || {};

MyLib.ToDoItem = function() {
  this.name = '';
  this.description = '';
  Object.defineProperty(this, "completed", {
    get : function() {
      return false;
    }
  });
}

MyLib.ToDoList = []; 
//MyLib.ToDoList.push....add todo items 
```

我声明了一个 WinJS.Binding.Template，其中所有属性都绑定，除了使用属性 getter 定义的属性：

```
<div id="myItemTemplate" data-win-control="WinJS.Binding.Template">
  <div class="titleTile">
    <h4 class="item-title" data-win-bind="textContent: name"></h4>

    <p data-win-bind="textContent: description"></p>

    <div data-win-bind="textContent: completed"></div> <-- Renders as undefined
    </div>
</div> 
```

“完成”属性呈现为未定义。如果我在加载数据的 javascript 控制台中放置一个断点，我可以访问完成的属性，但数据绑定似乎不喜欢它......有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T05:32:35.897

在你的吸气剂之后你错过了一行。

```
get : function() {
  return false;
}
, enumerable: true 
```

通过将 enumerable 设置为 true，您可以使数据绑定在此属性上起作用。

# ajax - f:ajax 不更新 t:dataTable 完成

> ID：12488330
> 
> 赞同：0
> 
> 时间：2012-09-19T03:58:09.567
> 
> 标签：ajax, jsf, facelets, myfaces, tomahawk

我有一个 JSF 搜索命令按钮和一个显示搜索结果的战斧数据表。单击命令按钮时，数据表应输出搜索结果。无论如何，因为我使用 JSF Ajax，所以 dataTable 没有显示。我只是想知道 JSF Ajax 是否会导致问题？

这是导致表格现在呈现的有问题的代码：

```
<h:commandButton id="search" value="#{msg.Label_Search}" action="#{theBean.doSearch}">
  <f:ajax render="searchStatus" execute="@form" />
</h:commandButton>
<h:outputText id="searchStatus" value="Loading data now..." rendered="#{theBean.searchingNow}" />

<h:panelGroup id="searchResultTable">
  <t:dataTable ... />
</h:panelGroup> 
```

*注意这一点。如果 ajax 代码被删除。它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:32:06.117

您只是在更新ajax 请求完成时`searchStatus`，而不是更新。`searchResultTable`所以最终用户确实永远不会看到`searchResultTable`.

相应地修复`<f:ajax render>`，以便`searchResultTable`也真正更新：

```
<f:ajax render="searchStatus searchResultTable" execute="@form" /> 
```

# c# - 传入字典的模型项为空，但此字典需要“System.DateTime”类型的非空模型项

> ID：12488333
> 
> 赞同：2
> 
> 时间：2012-09-19T03:58:29.740
> 
> 标签：c#, asp.net-mvc, nopcommerce

我正在使用 nopcommerce 开源。所以我想添加另一个表，我想在 Product Variant 中添加另一个选项卡。

所以我创建了一个模型。

```
 public partial class ProductVariantPriceRangeModel : BaseNopEntityModel
        {
            public int ProductVariantId { get; set; }

             [NopResourceDisplayName("Admin.Catalog.Products.Variants.ProductVariantPriceRange.Fields.SpecialPriceStartDate")]
           [DisplayFormat(NullDisplayText = "", DataFormatString = "{0:yyyy-MM-dd}")]

            public DateTime? SpecialPriceStartDate { get; set; }

             [NopResourceDisplayName("Admin.Catalog.Products.Variants.ProductVariantPriceRange.Fields.SpecialPriceEndtDate")]
            [DisplayFormat(NullDisplayText = "", DataFormatString = "{0:yyyy-MM-dd}")]

            public DateTime? SpecialPriceEndtDate { get; set; }

            [NopResourceDisplayName("Admin.Catalog.Products.Variants.ProductVariantPriceRange.Fields.Price")]

            public decimal Price1 { get; set; }
        } 
```

这是我的控制器。

```
[HttpPost, GridAction(EnableCustomBinding = true)]
        public ActionResult ProductVariantPriceRangeList(GridCommand command, int productVariantId)
        {
            if (!_permissionService.Authorize(StandardPermissionProvider.ManageCatalog))
                return AccessDeniedView();

            var productVariant = _productService.GetProductVariantById(productVariantId);
            if (productVariant == null)
                throw new ArgumentException("No product variant found with the specified id");

            var productVariantPriceRange = productVariant.ProductVariantPriceRange;
            var productVariantPriceRangeModel = productVariantPriceRange
                .Select(x =>
                {
                    return new ProductVariantModel.ProductVariantPriceRangeModel()
                    {                      

                        Id = x.Id,                       
                        ProductVariantId = x.ProductVariantId,
                        SpecialPriceStartDate = x.SpecialPriceStartDate,
                        SpecialPriceEndtDate=x.SpecialPriceEndtDate,                       
                        Price1 = x.SpecialPrice
                    };
                })
                .ToList();

            var model = new GridModel<ProductVariantModel.ProductVariantPriceRangeModel>
            {
                Data = productVariantPriceRangeModel,
                Total = productVariantPriceRangeModel.Count
            };

            return new JsonResult
            {
                Data = model
            };
        } 
```

这是我的看法。

```
@model ProductVariantModel
@using Telerik.Web.Mvc.UI;
@using Nop.Core.Domain.Catalog;
@using Nop.Admin;
@Html.ValidationSummary(false)
@Html.HiddenFor(model => model.Id)
@Html.HiddenFor(model => model.ProductId)

@Html.Telerik().TabStrip().Name("productvariant-edit").Items(x =>
{
    x.Add().Text(T("Admin.Catalog.Products.Variants.Info").Text).Content(TabInfo().ToHtmlString()).Selected(true);
    x.Add().Text(T("Admin.Catalog.Products.Variants.TierPrices").Text).Content(TabTierPrices().ToHtmlString());
     x.Add().Text(T("Admin.Catalog.Products.Variants.ProductVariantAttributes").Text).Content(TabProductVariantAttributes().ToHtmlString());
    x.Add().Text(T("Admin.Catalog.Products.Variants.Discounts").Text).Content(TabDiscounts().ToHtmlString());

    x.Add().Text(T("Admin.Catalog.Products.Variants.ProductVariantPriceRange").Text).Content(TabProductVariantPriceRange().ToHtmlString());

    //generate an event
    EngineContext.Current.Resolve<IEventPublisher>().Publish(new AdminTabStripCreated(x, "productvariant-edit"));
})

@helper TabProductVariantPriceRange()
    {
      if (Model.Id > 0)
        {
   @(Html.Telerik().Grid<ProductVariantModel.ProductVariantPriceRangeModel>()
                        .Name("productVariantPriceRange-grid")
                .DataKeys(keys =>
                {
                    keys.Add(x => x.Id);
                })
                .DataBinding(dataBinding =>
                {
                    dataBinding.Ajax()
                        .Select("ProductVariantPriceRangeList", "ProductVariant", new { productVariantId = Model.Id })
                        .Insert("ProductVariantPriceRangeInsert", "ProductVariant", new { productVariantId = Model.Id })
                        .Update("ProductVariantPriceRangeUpdate", "ProductVariant")
                       .Delete("ProductVariantPriceRangeDelete", "ProductVariant");
                })
                .Columns(columns =>
                {
                    columns.Bound(x => x.ProductVariantId)
                        .Width(100).ReadOnly()
                        .Centered();                    

                    columns.Bound(x => x.SpecialPriceStartDate)
                       .Width(200)
                        .Centered();
                    //columns.Bound(x => x.SpecialPriceEndtDate)
                    //    .Width(200)
                    //    .Centered();

                    columns.Bound(x => x.Price1)
                        .Width(100);
                    columns.Command(commands =>
                    {
                        commands.Edit();
                        commands.Delete();
                    })
                    .Width(180);

                })
                .ToolBar(commands => commands.Insert())
                .ClientEvents(events => events.OnEdit("onTierPriceEdit"))
                .EnableCustomBinding(true))

        }
        else
        {
    @T("Admin.Catalog.Products.Variants.ProductVariantPriceRange.SaveBeforeEdit")
        }

} 
```

当我运行程序员有一个错误..

```
The model item passed into the dictionary is null, but this dictionary requires a non-null model item of type 'System.DateTime'.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.InvalidOperationException: The model item passed into the dictionary is null, but this dictionary requires a non-null model item of type 'System.DateTime'.

Source Error:

Line 83:       if (Model.Id > 0)
Line 84:         {
Line 85:    @(Html.Telerik().Grid<ProductVariantModel.ProductVariantPriceRangeModel>()
Line 86:                         .Name("productVariantPriceRange-grid")
Line 87:                 .DataKeys(keys => 
```

我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T05:22:29.297

我发现了这个相关的帖子：

[Telerik MVC Grid - 可以为空的 DateTime 属性的问题](https://stackoverflow.com/questions/4207654/telerik-mvc-grid-problem-with-nullable-datetime-property)

您需要修改 Views/Shared 中的编辑器模板以支持可为空的日期时间。

# android - android崩溃屏幕旋转

> ID：12488334
> 
> 赞同：1
> 
> 时间：2012-09-19T03:58:31.930
> 
> 标签：android, image-processing, user-interface, memory-leaks

我一直在为客户开发这个应用程序。我们已经准备好发布它，但在测试中我意识到它几乎在任何时候都会崩溃 onPause(), onResume() 被调用。特别是获取文本或旋转屏幕。或者在某些情况下只是在屏幕之间切换。每次它给我一个内存不足的错误。所以很明显，背景、按钮等的图像是罪魁祸首，因为它们是唯一使用任何实际内存量的元素。所以我把它精简为一个完全平淡无奇的应用程序，只有 2 个按钮，上面有图像。

这些按钮是 60k PNG，已通过 Photoshop 针对移动设备进行了优化。

我做了很多研究，并花时间在 freenode 上的#android-dev 上。我没有看到任何可以解决此问题的方法。

我根据android dev上的文档处理背景。这部分不在此代码中，否则一旦我可以让它与带有 2 个按钮的空白 ap 一起工作，它就会被立即添加到 onCreate() 方法中。（有适当的观点）

目前不在应用程序中，但将被添加回来

```
private void setNewPoolBackground() {
    setContentView(<FOO>);
    Bitmap image = getImage(R.drawable.background);
    Drawable d = new BitmapDrawable(image);
    rLayout = (RelativeLayout) findViewById (<FOO>);
    rLayout.setBackgroundDrawable(d);
}
private Bitmap getImage(int img) {
    BitmapFactory.Options o = new BitmapFactory.Options();
    o.inJustDecodeBounds = true;
    // The new size we want to scale to
    final int REQUIRED_SIZE = 70;
    // Find the correct scale value. It should be the power of 2.
    int width_tmp = o.outWidth, height_tmp = o.outHeight;
    int scale = 1;
    BitmapFactory.Options o2 = new BitmapFactory.Options();
    o2.inSampleSize = scale;
    while (true) {
        if (width_tmp / 2 < REQUIRED_SIZE || height_tmp / 2 < REQUIRED_SIZE)
            break;
        width_tmp /= 2;
        height_tmp /= 2;
        scale *= 2;
    }
    Bitmap image = BitmapFactory.decodeStream(this.getResources()
            .openRawResource(img), null, o2);
    return image;
} 
```

代码：TestRotation.java

```
package test.t;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;

public class TestRotateActivity extends Activity {

    Bitmap image;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //setNewPoolBackground();
    }

    @Override
    protected void onPause() {
        super.onPause();
        // saveState();
    }

    @Override
    protected void onStop() {
        // TODO Auto-generated method stub
        //View v 
        super.onStop();
    }

    @Override
    protected void onResume() {
        super.onResume();

    }
    @Override
    protected void onDestroy() {
        super.onDestroy();
        // TODO Auto-generated method stub

    }

} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/group_edit"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="5pt"
        android:layout_marginLeft="8pt"
        android:layout_marginRight="7pt"
        android:layout_marginTop="50pt"
        android:orientation="vertical"
        android:paddingLeft="20dp"
        android:paddingRight="20dp" 
        android:isScrollContainer="false"
        >

        <LinearLayout
            android:id="@+id/linlayGN"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1" >

            <TextView
                android:id="@+id/tvGroupTitle"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="group_title" />

            <EditText
                android:id="@+id/group_title"
                android:layout_width="200dp"
                android:layout_height="wrap_content"
                android:layout_weight="1" />

            <requestFocus />
        </LinearLayout>

        <ScrollView
            android:id="@+id/ScrollView01"
            android:layout_width="match_parent"
            android:layout_height="200dp"
            android:isScrollContainer="false"
         >

            <LinearLayout
                android:id="@+id/newUserList"
                android:layout_width="233dp"
                android:layout_height="wrap_content"
                android:layout_below="@id/group_title"
                android:layout_weight="2.44"
                android:orientation="vertical" >

            </LinearLayout>
        </ScrollView>
    </LinearLayout>

    <Button
        android:id="@+id/addgbutton"
        android:layout_width="40pt"
        android:layout_height="25pt"
        android:layout_alignLeft="@+id/moremembutton"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="28dp"
        android:layout_marginLeft="64dp"
        android:background="@drawable/finish"
        android:onClick="myClickHandler" >
    </Button>

    <Button
        android:id="@+id/moremembutton"
        android:layout_width="40pt"
        android:layout_height="25pt"
        android:layout_alignBottom="@+id/addgbutton"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="22dp"
        android:layout_marginLeft="81dp"
        android:background="@drawable/addmember"
        android:onClick="myClickHandler" >
    </Button>

</RelativeLayout> 
```

日志

```
09-19 03:17:57.546: D/dalvikvm(278): GC_EXTERNAL_ALLOC freed 806 objects / 56864 bytes in 45ms
09-19 03:17:57.876: D/dalvikvm(278): GC_EXTERNAL_ALLOC freed 206 objects / 9736 bytes in 37ms
09-19 03:19:00.135: D/dalvikvm(278): GC_EXTERNAL_ALLOC freed 707 objects / 25800 bytes in 94ms
09-19 03:19:00.545: D/dalvikvm(278): GC_EXTERNAL_ALLOC freed 28 objects / 1624 bytes in 33ms
09-19 03:19:06.885: D/dalvikvm(278): GC_EXTERNAL_ALLOC freed 597 objects / 24008 bytes in 37ms
09-19 03:19:07.605: D/dalvikvm(278): GC_EXTERNAL_ALLOC freed 523 objects / 31384 bytes in 32ms
09-19 03:19:07.916: D/dalvikvm(278): GC_EXTERNAL_ALLOC freed 84 objects / 3816 bytes in 32ms
09-19 03:19:19.346: E/dalvikvm-heap(278): 3122676-byte external allocation too large for this process.
09-19 03:19:19.355: E/GraphicsJNI(278): VM won't let us allocate 3122676 bytes
09-19 03:19:19.375: D/AndroidRuntime(278): Shutting down VM
09-19 03:19:19.375: W/dalvikvm(278): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
09-19 03:19:19.455: E/AndroidRuntime(278): FATAL EXCEPTION: main
09-19 03:19:19.455: E/AndroidRuntime(278): java.lang.RuntimeException: Unable to start activity ComponentInfo{test.t/test.t.TestRotateActivity}: android.view.InflateException: Binary XML file line #70: Error inflating class <unknown>
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3815)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.app.ActivityThread.access$2400(ActivityThread.java:125)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2037)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.os.Looper.loop(Looper.java:123)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.app.ActivityThread.main(ActivityThread.java:4627)
09-19 03:19:19.455: E/AndroidRuntime(278):  at java.lang.reflect.Method.invokeNative(Native Method)
09-19 03:19:19.455: E/AndroidRuntime(278):  at java.lang.reflect.Method.invoke(Method.java:521)
09-19 03:19:19.455: E/AndroidRuntime(278):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-19 03:19:19.455: E/AndroidRuntime(278):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-19 03:19:19.455: E/AndroidRuntime(278):  at dalvik.system.NativeStart.main(Native Method)
09-19 03:19:19.455: E/AndroidRuntime(278): Caused by: android.view.InflateException: Binary XML file line #70: Error inflating class <unknown>
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.view.LayoutInflater.createView(LayoutInflater.java:513)
09-19 03:19:19.455: E/AndroidRuntime(278):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
09-19 03:19:19.455: E/AndroidRuntime(278):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.app.Activity.setContentView(Activity.java:1647)
09-19 03:19:19.455: E/AndroidRuntime(278):  at test.t.TestRotateActivity.onCreate(TestRotateActivity.java:21)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
09-19 03:19:19.455: E/AndroidRuntime(278):  ... 12 more
09-19 03:19:19.455: E/AndroidRuntime(278): Caused by: java.lang.reflect.InvocationTargetException
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.widget.Button.<init>(Button.java:65)
09-19 03:19:19.455: E/AndroidRuntime(278):  at java.lang.reflect.Constructor.constructNative(Native Method)
09-19 03:19:19.455: E/AndroidRuntime(278):  at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.view.LayoutInflater.createView(LayoutInflater.java:500)
09-19 03:19:19.455: E/AndroidRuntime(278):  ... 23 more
09-19 03:19:19.455: E/AndroidRuntime(278): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.graphics.Bitmap.nativeCreate(Native Method)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.graphics.Bitmap.createBitmap(Bitmap.java:468)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.graphics.Bitmap.createBitmap(Bitmap.java:435)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:340)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:488)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:462)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:323)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.content.res.Resources.loadDrawable(Resources.java:1709)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.view.View.<init>(View.java:1885)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.widget.TextView.<init>(TextView.java:327)
09-19 03:19:19.455: E/AndroidRuntime(278):  at android.widget.Button.<init>(Button.java:69)
09-19 03:19:19.455: E/AndroidRuntime(278):  ... 27 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T04:22:32.887

如果我们正在处理大量位图和大图像，OOM 错误在 android 中并不是一个意外的异常。由于 android 手机和选项卡有许多堆大小，因此很难使其与所有设备兼容。大多数 android 设备的低堆内存。通过代码我们可以分配它，因为我们只有有限的访问权限来清除内存。在每个进程调用`System.gc()`并使用垃圾收集器分配未使用的内存。仍然不确定所有未使用的内存都被清除了。之后回收所有位图你的使用`bitmap.recycle()`。也不要在应用程序中使用很多位图。构建一个位图数量非常少的应用程序，当你使用它时回收它并一次又一次地使用它。离开活动时，您可以从视图中取消绑定所有可绘制对象。

```
private void unbindDrawables(View view) {
        if (view.getBackground() != null) {
            try {
                view.getBackground().setCallback(null);
                ((BitmapDrawable) view.getBackground()).getBitmap().recycle();
                view.destroyDrawingCache();
                view.notifyAll();
            } catch (Exception e) {
            }

        }
        if (view instanceof ViewGroup) {
            for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
                unbindDrawables(((ViewGroup) view).getChildAt(i));
            }
            ((ViewGroup) view).removeAllViews();
        }
    } 
```

您还可以通过代码释放所有未使用的内存..

```
public void clearAllocatedMemory() {
        try {
            List.removeAllViews();
            adapter.releaseAllMemory();
        } catch (Exception e) {
        }
        adapter = null;
    } 
```

我认为做所有这些都会最大限度地分配你的内存，你可以减少这个异常的机会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T04:08:55.587

```
 if your android:targetSdkVersion="12" or less
   add this in you each Activitiy declaration in manitest.xml
      android:configChanges="orientation|keyboardHidden">

      if your  android:targetSdkVersion="13" or more
     add this in you each Activitiy declaration in manitest.xml
       android:configChanges="orientation|keyboardHidden|screenSize"> 
```

# c++ - 使用 C++ 中的 DeviceIoControl 函数识别系统保留驱动器

> ID：12488337
> 
> 赞同：1
> 
> 时间：2012-09-19T03:58:52.103
> 
> 标签：c++, deviceiocontrol

我正在尝试使用功能确定驱动器是否是系统保留驱动器（`PhysicalDrive0`或`C-Drive`）`DeviceIoControl`。但是，对于所有驱动器，我的代码始终返回 true。

```
HANDLE hDevice;               // handle to the drive to be examined
BOOL bResult;                 // results flag
DWORD junk;                   // discard results

PARTITION_INFORMATION_MBR *pdg

hDevice = CreateFile(TEXT("\\\\.\\C:"), GENERIC_READ | GENERIC_WRITE, FILE_SHARE_READ |
        FILE_SHARE_WRITE, NULL, OPEN_EXISTING, 0, NULL);

bResult = DeviceIoControl(
            hDevice,                        // device to be queried
            IOCTL_DISK_GET_PARTITION_INFO_EX,  // operation to perform
            NULL, 0,                        // no input buffer
            pdg, sizeof(*pdg),              // output buffer
            &junk,                          // # bytes returned
            (LPOVERLAPPED) NULL             // synchronous I/O
        ); 
```

*   `bResult`is始终返回0，表示函数成功。
*   甚至`pdg->PartitionType`有垃圾信息也不回`true`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-25T08:13:13.660

> bResult 始终返回 0，表示函数成功。

完全错误，[文档状态](https://msdn.microsoft.com/de-de/library/windows/desktop/aa363216(v=vs.85).aspx)如果操作成功完成，则返回值非零。许多事情可能是错误的，至少您的参数不正确并且`GetLastError`会返回`ERROR_INSUFFICIENT_BUFFER`：

* * *

你给出`DeviceIoControl`了一个未初始化的指针，但它期望`pdg`指向一个缓冲区，在这种情况下，指针大小指向`PARTITION_INFORMATION_MBR`. 取消引用野指针会调用未定义的行为。另外，根据具有等待结构[的文档，因此](https://msdn.microsoft.com/de-de/library/windows/desktop/aa365179(v=vs.85).aspx) `DeviceIoControl``OCTL_DISK_GET_PARTITION_INFO``PARTITION_INFORMATION_EX`

* * *

改变

```
PARTITION_INFORMATION_MBR *pdg(;) 
```

至

```
PARTITION_INFORMATION_EX pdg; 
```

所以你得到了一个带有自动存储的结构，你可以`DeviceIoControl`用操作符给它一个临时指针`&`。

```
bResult = DeviceIoControl(
        hDevice,                        // device to be queried
        IOCTL_DISK_GET_PARTITION_INFO_EX,  // operation to perform
        NULL, 0,                        // no input buffer
        &pdg, sizeof(pdg),              // output buffer
        &junk,                          // # bytes returned
        (LPOVERLAPPED) NULL             // synchronous I/O
    ); 
```

# jquery - Raty Rattings 验证

> ID：12488338
> 
> 赞同：2
> 
> 时间：2012-09-19T03:59:10.530
> 
> 标签：jquery, html, raty

我有一个小问题。我如何使比率评级在表格中得到验证？

因为当我使用这段代码时

```
$('#rating-webratting').raty({
                    hints       : ['1 Star', '2 Stars', '3 Stars', '4 Stars', '5 Stars'],
                    scoreName   : 'rating-webratting',
                    path        : 'img/',
                    starOn      : 'star_on.png',
                    starOff     : 'star_off.png'
                }); 
```

在这个 div 上

```
<div id="rating-webratting"></div> 
```

当页面加载时，它将在 div 中创建此 html 代码

```
<img title="1 Star" alt="1" src="img/star_off.png">&nbsp;
<img title="2 Stars" alt="2" src="img/star_off.png">&nbsp;
<img title="3 Stars" alt="3" src="img/star_off.png">&nbsp;
<img title="4 Stars" alt="4" src="img/star_off.png">&nbsp;
<img title="5 Stars" alt="5" src="img/star_off.png">
<input name="rating-webratting" type="hidden"> 
```

但我无法将 class="required" 添加到输入字段中，因为它是由脚本本身生成的。

任何人都可以建议如何为 jquery 验证执行此操作吗？

我已经尝试过 addMethod 但我无法将类添加到其中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T11:56:15.130

您不应该添加所需的类，而是添加属性：

```
$('input[name="rating-webrating"]').attr('required', true); 
```

由于默认情况下 validate 也会忽略隐藏字段，因此您还应该将忽略选项设置为空数组，如下所示：

```
$('form').validate({
  ignore: []
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T04:02:23.317

生成输入字段后，您可以使用属性选择器选择它，然后添加类

```
$('input[name="rating-webratting"]').addClass('required'); 
```

# javascript - HTML Javascript - 防止从 dom 树的子节点执行脚本

> ID：12488339
> 
> 赞同：2
> 
> 时间：2012-09-19T03:59:10.770
> 
> 标签：javascript, html, execution

我从一个不可靠的来源下载了一些 html 树，并使用它在我的页面中将内容显示为某个 HTML div 的子项。但是，此下载的代码存在运行脚本/或在事件处理程序中执行脚本的危险。是否有可能在 HTML 中就像使用标签来定义脚本一样，做一个

```
<noscriptex>
    <script>
        ...
    </script>
</noscriptex> 
```

那么浏览器不会在这个标签内执行任何代码？

如果没有这样的东西，我如何清理下载的 HTML 以显示带有 CSS 的 DOM 元素而不涉及任何脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:54:35.623

您可以使用函数从标记中删除脚本，例如

```
function stripScripts(markup) {

    var div = document.createElement('div');
    var frag = document.createDocumentFragment();

    div.innerHTML = markup;

    var scripts = div.getElementsByTagName('script');
    var i = scripts.length;

    while (i--) {
      scripts[i].parentNode.removeChild(scripts[i]);
    }

    while (div.firstChild) {
      frag.appendChild(div.firstChild);
    }
    return frag;
} 
```

使用 innerHTML 插入的任何脚本元素都不会执行，因此它们是安全的。它们也不在 DOM 中，因此功能有限。

注意[createDocumentFragment](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-35CB04B5)返回的对象可以直接插入到DOM中，函数返回的fragment没有脚本元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T04:03:19.320

不; 没有这样的功能。

相反，您需要解析 HTML 并使用严格的白名单删除任何无法识别的标签和属性。

您还需要验证属性值；特别是网址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T05:52:55.300

这就是 iframe 的用途。如果内容来自与主机页面不同的域，则不允许与任何其他内容进行通信。你可以让它运行脚本到它的核心内容，它们不会影响你的页面部分。

# android - 向视图添加可绘制对象，但布局不正确

> ID：12488340
> 
> 赞同：0
> 
> 时间：2012-09-19T03:59:14.493
> 
> 标签：android, layout, background, styles

我在xml中定义了一个drawable：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <padding
        android:bottom="1dp"
        android:left="0dp"
        android:right="0dp"
        android:top="5dp" />

    <corners
        android:bottomLeftRadius="0.1dp"
        android:bottomRightRadius="0.1dp"
        android:topLeftRadius="15dp"
        android:topRightRadius="15dp" />

</shape> 
```

并在布局 xml 中使用它：

```
<RelativeLayout
    style="@style/TabHeader"
    android:background="@drawable/_moremsg_tab_back" >

    <TextView
        android:id="@+id/text"
        style="@style/TabText"
        android:text="TODO" />

</RelativeLayout> 
```

效果是（第一个选项卡）：

![在此处输入图像描述](../Images/1a3f0492285d8db96e9375e53b16ef65.png)

单击其他选项卡时，我通过代码将可绘制对象添加为背景：

```
v.setBackgroundDrawable(getResources().getDrawable(R.drawable._moremsg_tab_back)); 
```

但它与第一​​个显示不同：

![在此处输入图像描述](../Images/d5c2aa374e7dd18c9a1f2883a999f1ce.png)

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T04:10:25.170

我相信当您在代码中设置可绘制对象时会删除填充。

我知道这不是您想听到的，但这是一个 android 错误。有办法绕过它，但没有什么干净的。

看到这个问题： [当设置背景可绘制时，填充去了哪里？](https://stackoverflow.com/questions/10095196/whered-padding-go-when-setting-background-drawable)

# c# - 获取 ASP.NET 未选中复选框列表或单选按钮列表中的项目的通用方法？

> ID：12488342
> 
> 赞同：2
> 
> 时间：2012-09-19T03:59:35.430
> 
> 标签：c#, asp.net

我有一种方法可以获取未在复选框列表中选中的项目，如下所示：

```
public static string[] GetNotSelectedCheckboxes(CheckBoxList list)
{
    ArrayList values = new ArrayList();
    for (int counter = 0; counter < list.Items.Count; counter++)
    {
        if (!list.Items[counter].Selected)
        {
            values.Add(list.Items[counter].Value);
        }
    }
    return (String[])values.ToArray(typeof(string));
} 
```

我现在需要在单选按钮列表中获取未选中的项目，我复制了相同的方法，而不是`CheckBoxList`作为参数，我有一个`RadioButtonList`.

```
public static string[] GetNotSelectedRadioButtons(RadioButtonList list)
{
    ArrayList values = new ArrayList();
    for (int counter = 0; counter < list.Items.Count; counter++)
    {
        if (!list.Items[counter].Selected)
        {
            values.Add(list.Items[counter].Value);
        }
    }
    return (String[])values.ToArray(typeof(string));
} 
```

现在代码做了完全相同的事情，我读了一些关于泛型方法的文章，这是我应该使用的地方吗？我查看了它，但语法不正确，如果我没有明确将其指定为单选或复选框列表，我不确定如何使用**list.Items 。**

我应该在这里使用通用方法以及关于我应该如何继续进行的任何输入吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:05:30.107

您可以使用泛型......但在这种情况下，使用简单数据列表控件的基类使用多态性似乎更容易

```
public static string[] GetNotSelectedRadioButtons(ListControl list) 
```

如果要实现泛型：

```
public static string[] GetNonSelectedItems<T>(T list) where T : ListControl
{
    ... do your stuff
} 
```

# c# - linq 组数据

> ID：12488347
> 
> 赞同：0
> 
> 时间：2012-09-19T04:00:08.503
> 
> 标签：c#, .net, linq, entity-framework

原始数据：

```
StrDateTime ServerName 
9/15/2012 3:01:19 PM 'srvr1'
9/15/2012 3:01:19 PM 'srvr2'
9/15/2012 3:01:19 PM 'srvr33'
9/15/2012 3:02:15 PM 'srvr1'
9/15/2012 3:02:15 PM 'srvr5' 
```

我的代码（`not work`）：

```
(from data in dataInToday
group data by data.StrDateTime into grp
let srvrs = (from i in grp select i.ServerName).ToString()
select new
{ 
    grp.Key,
    srvrs
}).Take(20).Dump(); 
```

预期输出：

```
Key srvrs 
9/15/2012 3:01:19 PM 'srvr1, srvr2, srvr33'
9/15/2012 3:02:15 PM 'srvr1, srvr5'
9/15/2012 3:02:43 PM 'srvr1, srvr2'
9/15/2012 3:03:19 PM 'srvr9, srvr2'
9/15/2012 3:04:19 PM 'srvr5, srvr11'
9/15/2012 3:05:19 PM 'srvr1, srvr2' 
```

是否有 linq 函数可以实现它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T04:11:50.757

这行得通吗？

```
(from data in dataInToday
group data by data.StrDateTime into grp
let srvrs = string.Join(", ", (from i in grp select i.ServerName))
select new
    { 
       grp.Key,
       srvrs
    }).Take(20).Dump(); 
```

# vim - 在 Vim 中移动到当前单词的末尾

> ID：12488348
> 
> 赞同：47
> 
> 时间：2012-09-19T04:00:13.177
> 
> 标签：vim

通常我使用**ea**在单词后面附加一些东西；但是，如果光标已经在单词的最后一个位置，这将不起作用。

**ea**将使光标移动到**下一个**单词的末尾。

我很想知道是否有任何热键可以移动到**当前**单词的末尾，即使光标已经在单词的最后位置。

谢谢。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2015-09-30T19:07:30.590

*   `w`将您移至下一个单词的开头
*   `e`将您移动到单词的最后一个字母
*   `i`让您从光标所在的位置开始编辑
*   `a`让您提前开始编辑一个字符

在您的情况下，您似乎想要一种一致的方式来附加到一个单词，即使您在最后一个字母上。我会改用使用`w``i`而不是`e``a`

我建议不要重新映射基本的 vim 移动控件，它们是有原因的。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-19T05:05:35.807

`e`如果您愿意，您可以更改 的功能。例如，你可以把

```
nnoremap e he 
```

在你的 ~/.vimrc 中。这映射`e`到，`he`以便它以您想要的方式工作。但是，您可能会发现`e`它很有用，并且不想完全改写它。您可以使用您的`<leader>`密钥添加备用映射。

```
nnoremap <leader>e he 
```

这样您就可以使用`\e`or `,e`（取决于您的 mapleader 设置）来达到预期的效果。我倾向于同意其他人的观点，不过最好习惯 vim 的标准单键。通常，将映射用于您经常使用的较长命令。

没有像您建议的那样的内置命令，但是`\>`单词结尾有正则表达式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-09-11T04:32:23.677

*   移到词尾：`e`
*   移动到单词的开头：`b`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-03-23T22:35:23.060

试试“ **bea** ”。无论光标在单词中的哪个位置，这都将起作用。

# mysql - Mysql 查询在 5.5 版中无限期运行并在 5.1 版中给出输出

> ID：12488361
> 
> 赞同：0
> 
> 时间：2012-09-19T04:01:36.573
> 
> 标签：mysql, database, phpmyadmin

我正在使用带有`CONCAT` `function`in的简单 MySQL 查询`mysql`。

MySQL 查询：

```
SELECT 
(
    SELECT 
        CONCAT
        (
            '/', 
            LOWER
            (
                REPLACE
                (
                    loc_name,
                    ' ',
                    '-'
                )
            )
        ) AS l1_url 
    FROM 
        lmap 
    WHERE 
        lvl = 1
) l1_url 
```

上面的查询在 MySQL 5.1 版中运行并给出输出，但是当我尝试在 MySQL 5.5 版中运行相同的查询时，它会无限期地用完并且没有给出任何输出。MySQL 5.5 版是否有任何重大变化。

**更新：表结构**

```
CREATE TABLE lmap 
(
    id int(10), 
    loc_name varchar(32), 
    parent int(10), 
    lvl int(10) 
); 

INSERT INTO lmap VALUES(1, 'abc', 0, 1); 
INSERT INTO lmap VALUES(2, 'av', 0, 2); 
```

# jsp - 如何使用 JSTL 打印嵌套对象？

> ID：12488363
> 
> 赞同：1
> 
> 时间：2012-09-19T04:01:57.040
> 
> 标签：jsp, jstl, nested-object

如何使用 JSTL 在 JSP 页面上的地图中打印嵌套对象/属性的值？

```
<c:foreach items="${survey}" var="survey">
    <c:out value="${survey.value}" />
</c:foreach> 
```

`Survey`有一个名为 的属性`Questions`，它是另一个 bean，我想打印这些问题`survey.questions.getId()`或`survey.questions.getTitle()`)，该`<c:forEach>`语句看起来如何？

就我而言，`${survey}`is a `Map`not a `Collection`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T04:11:51.520

如果您的嵌套属性是单个对象实例，您只需直接引用它，例如：

```
<c:forEach var="surveyItem" items="${surveys}">
    ${surveyItem.title} <!-- You can use the c:out if you really want to -->
</c:forEach> 
```

这假设您有一组`Survey`绑定到该`surveys`属性的对象，并且每个对象`Survey`都有一个标题。它将打印每个调查的标题。

如果您的嵌套属性是对象的集合，那么您可以使用`forEach`循环来迭代它们，就像在您的示例中一样。

```
<c:forEach var="question" items="${survey.questions}">
    ${question.title} 
</c:forEach> 
```

这将打印每个 的标题`Question`，假设您有一个`Survey`绑定到`survey`属性的对象，并且该`Survey`对象具有`Question`作为字段的对象集合（使用适当的 getter 方法，即`getQuestions()`）。

您还可以使用嵌套循环，例如：

```
<c:forEach var="surveyItem" items="${surveys}">
    ${surveyItem.title}
    <c:forEach var="question" items="${surveyItem.questions}">
        ${question.title} 
    </c:forEach>
</c:forEach> 
```

这将打印 every`Survey`的标题以及 each`Question`中的 each的标题`Survey`。

如果由于某种原因你决定通过 a `Map`，你可以这样做：

```
<c:forEach var="entry" items="${surveyMap}">
    Map Key:  ${entry.key}
    Map Value:  ${entry.value}
    Nested Property:  ${entry.value.title}
    Nested Collection:
    <c:forEach var="question" items="${entry.value.questions}">
        ${question.title}
    </c:forEach>
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:18:15.510

如果您的 Survey.Question 是另一个集合对象，基本上您需要在循环中迭代两次。例如，

```
<c:foreach items="${survey}" var="survey">

    <c:out value="${survey.value}" />

    <c:foreach items="${survey.Question" var="question">
      $<c:question.item> or $<c:question.title>
     </c:foreach>
</c:foreach> 
```

# jquery - 比较 jquery val VS 数组值

> ID：12488365
> 
> 赞同：0
> 
> 时间：2012-09-19T04:02:07.827
> 
> 标签：jquery

我需要比较 2 个值。一个值来自输入框，另一个值在数组中。

```
 var caja = $("#txtRespuesta").val();
    alert("Comprueba respuesta: " + caja);
    $("#puntos").text(puntos); 
    var obj2String = (arregloDePhp[indiceArregloPhp]).toString();
    // if (res2.equals(obj2String.toString())){ //complains that object has no method .equals
     if (caja==obj2String){ 
    puntos+=1; 
    };
    console.log ("comparing: "+caja+" y "+obj2String);//actually this shows both words are the same
    indiceArregloPhp+=1; 
```

找不到是什么，请指出正确的方向。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:20:05.210

您可以使用`$.inArray()` [http://api.jquery.com/jQuery.inArray/](http://api.jquery.com/jQuery.inArray/)

```
$.inArray(valueFromInput, yourArray) // returns the index or -1 if not found 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:05:26.870

您可以`caja===obj2String` 额外使用，如果您在使用 $.trim() 进行比较之前修剪该值会更好。

# javascript - 自动滚动不会停止滚动 .js/jquery/ajax 问题

> ID：12488367
> 
> 赞同：2
> 
> 时间：2012-09-19T04:02:12.183
> 
> 标签：javascript, jquery, ajax, livechat

我的聊天框不会停止自动滚动（它不会让我向上滚动），我知道问题出在哪里......但是我不知道如何解决它。我需要聊天框自动滚动，但我希望能够同时向上滚动。

这是这个问题的[一个活生生的例子](http://goawaymom.com/)。

```
//Load the file containing the chat log
function loadLog(){     
    $("#chatbox").animate({ scrollTop: 99999 }, 'normal');
    $.ajax({
        url: "log.html",
        cache: false,
        success: function(html){        $("#chatbox").animate({ scrollTop: 99999 }, 'normal');
        $("#chatbox").html(html);
        $("#chatbox").animate({ scrollTop: 99999 }, 'normal');

        }               

    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:18:11.290

您可以检查 scoll 位置的时间。如果它作为底部然后滚动到底部

```
//Load the file containing the chat log
function loadLog(){     
  // remove  $("#chatbox").animate({ scrollTop: 99999 }, 'normal');
    $.ajax({
        url: "log.html",
        cache: false,
        success: function(html){     
        var chatbox= $("#chatbox");
        var atBottom = (chatbox[0].scrollHeight - chatbox.scrollTop() == chatbox.outerHeight());
        chatbox.html(html);

        if (atBottom )
         chatbox.animate({ scrollTop: 99999 }, 'normal');

        }               

    });
} 
```

# c - 如何在 C 中实现 printf 的缓冲区管理

> ID：12488368
> 
> 赞同：0
> 
> 时间：2012-09-19T04:02:17.703
> 
> 标签：c, printf

我相信我的问题源于`printf`打印缓冲区，但我对 C 或缓冲区知之甚少，不知道如何处理这个问题。我编写了一个简单的程序，它只是根据输入的文件根据一些`if`/语句打印一堆文本（字符/字符串） 。`else`如果我像这样从 Unix shell 调用它：

```
gcc -o myProgram myProgram.c
./myProgram fileName 
```

它将仅在第一次运行时正确打印。如果我重复这些步骤并再次运行程序，它会在 output 之间打印出一堆“bash”命令`printf`。有没有简单的方法来调试或修复这个问题？我对 C 很陌生，如果你不知道的话，我把它作为学校作业的一部分，所以我试图真正弄清楚这一点并理解这个概念，这样我就可以将它应用回我的实际计划任务。

编辑：这是一个尝试演示我的问题的临时示例
注意：输入的文件只包含文本。

```
#include <stdio.h>
#include <stdlib.h>

struct S{
    char word[30];
}s;

int main(int argc, char ** argv)
{
    void print(struct S *s);
    int i; 
    FILE *f = fopen(argv[1], "rb");
    fseek(f, 0, SEEK_SET);
    fread(&s, sizeof(s), 1, f);
    print(&s);
    fclose(f);
}

void print(struct S *s)
{
    int i = 0;
    printf("Word: ");
    for(i = 0; i < 30; i++)
    {
        if(s->word[i] != '\0')
        {
            printf("%c", s->word[i]);
        }       
        else
        {
            break;
        }
    }
    printf("\n");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T04:18:59.173

你可以测试一下：

在 main() 的第一行添加以下行：

```
setbuf( stdout , NULL ); 
```

程序的输出存储在缓冲区中，当您调用 printf 时，它们会被提取。setbuf() 方法用于处理该缓冲区。当您添加 setbuf(stdout , NULL) 时，这会告诉缓冲区不存储输出并将程序的输出直接发送到标准输出。

# java - 是否有类型良好的 Scala（或 Java）库来使用 JSON Web API？

> ID：12488369
> 
> 赞同：6
> 
> 时间：2012-09-19T04:02:16.980
> 
> 标签：java, json, scala, rest-client, sitebricks

我想要一个简单的 Java（或 Scala）REST 客户端库，让我可以轻松地在 JSON REST API 上执行 GET/PUT/POST/DELETE 等操作，并以类型安全的方式将 JSON 响应反序列化为 Java 对象，例如

```
RestClient client = new RestClient("http://api.mycompany.com").withAuth(Auth.Basic, username, password);
// This basically deserializes the JSON response into a POJO    
MyDocument[] result = client.get("/document?limit=10", MyDocument[].class);
MyFriend friend = client.post("/friend/Joe", body, MyFriend.class); 
```

基本上我希望通用签名是这样的，`get()`例如 `public <T> T get(String path, Class<T> responseClass)`，它将执行 GET 请求并将 JSON 响应反序列化为类型的 POJO`responseClass`

我确实找到了一个与我想要的称为[sitebricks](http://sitebricks.org/#webclient)的库非常接近，但它的范围受到严重限制，例如它不允许我执行更多不常见的 HTTP 动词，如 PUT/PATCH/DELETE 并且它无法设置标题或甚至是请求的正文。

[我发现的另一个库](https://github.com/foursquare/foursquare-fhttp)有相反的问题——它无法进行基本身份验证，也不会为您将 JSON 序列化回对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:26:41.833

你检查过[这个](http://aloiscochard.blogspot.com/2011/05/simple-rest-web-service-client-in-scala.html)吗？[您可以使用Salat](https://github.com/novus/salat)代替 SJSON进行序列化

# javascript - Javascript表子未显示为未定义？

> ID：12488371
> 
> 赞同：0
> 
> 时间：2012-09-19T04:02:33.950
> 
> 标签：javascript

我们在下面有一个脚本，它动态添加行。在 addRow 函数中，我们有这个代码 alert(newcell.childNodes[0].type); 捕获子节点类型。它仅将第一列显示为复选框，但其余所有列均显示为未定义。除了第 4 列，我们有多个子节点，一个按钮，还有一个表？那么如何知道它们的类型呢？

```
<html>
<head>
    <script language="javascript">
        function addRow(tableID) {

            var table = document.getElementById(tableID);

            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);

            var colCount = table.rows[0].cells.length;

            for(var i=0; i<colCount; i++) {

                var newcell = row.insertCell(i);

                newcell.innerHTML = table.rows[1].cells[i].innerHTML;
                newcell.innerHTML = newcell.innerHTML;
                alert(newcell.childNodes[0].type);

        }
     }

        function addSubRow2(subtbl){
            var table = document.getElementById(subtbl);
            var rowCount = table.rows.length;
      var a=document.getElementById(subtbl).insertRow(rowCount); 
          var b=a.insertCell(0); 
          var c=a.insertCell(1); 
          b.innerHTML="TEST"; 
          c.innerHTML="<p class=error id='slaveIDError'>"; 

      /* var dropdown="<SELECT class=\"select\" name=\"country\">\n" +
                "<OPTION value=\"1\">Serial 1<\/OPTION>\n" +
                "<OPTION value=\"2\">Serial 2<\/OPTION>\n" +
                "<OPTION value=\"3\">Serial 3<\/OPTION>\n" + 
                "<OPTION value=\"4\">Serial 4<\/OPTION>" +
                "<OPTION value=\"5\">Serial 5<\/OPTION>" + 
                "<\/SELECT>";
       */

        //cell.innerHTML += "<br\/ >" + dropdown;
    }

        function deleteRow(tableID) {
            try {
            var table = document.getElementById(tableID);
            var rowCount = table.rows.length;

            for(var i=0; i<rowCount; i++) {
                var row = table.rows[i];
                var chkbox = row.cells[0].childNodes[0];
                if(null != chkbox && true == chkbox.checked) {
                    if(rowCount <= 1) {
                        alert("Cannot delete all the rows.");
                        break;
                    }
                    table.deleteRow(i);
                    rowCount--;
                    i--;
                }

            }
            var table = document.getElementById(tableID);
            for (var i = 0, row; row = table.rows[i]; i++) {
                  row.id="row"+i;
               //iterate through rows
               //rows would be accessed using the "row" variable assigned in the for loop
               for (var j = 0, col; col = row.cells[j]; j++) {
                 //iterate through columns
                 //columns would be accessed using the "col" variable assigned in the for loop
                 //alert("J : "+j);
                 col.id="col"+i;
                 if(j==0)
                 {

                 }
                 else if(j==1)
                 {

                }
               }  
            }

            }catch(e) {
                alert(e);
            }
        }

    </script>
</head>
<body>
  Begin Location : <select class='select' id="beginLocation" name="beginLocation">
                    <option value="1">Loc 1</option>
                    <option value="2">Loc 2</option>
                    <option value="3">Loc 3</option>
                    <option value="4">Loc 4</option>
                    <option value="5">Loc 5</option>
                </select>
                <p type="text" class=error id='beginLocation_Error'>
    <br\>
    <input type="button" value="Add Row" onclick="addRow('dataTable')" />

    <input type="button" value="Delete Row" onclick="deleteRow('dataTable')" />

    <table id="dataTable" width="350px" border="1">
        <tr>
            <th></th>
            <th>Client</th>
          <th>Location</th>
          <th>Serial</th>
        </tr>

        <tr>
            <td id="col_0_0"><input type="checkbox" name="chk"/></td>
            <td id="col_0_1">
                <select class='select' id="client1" name="client1">
                    <option value="1">Client 1</option>
                    <option value="2">Client 2</option>
                    <option value="3">Client 3</option>
                    <option value="4">Client 4</option>
                    <option value="5">Client 5</option>
                </select><p type="text" class=error id='client_0_Error'>                
            </td>

            <td id="col_0_1">
                <select class='select' id="location1" name="location1">
                  <option value="1">Loc 1</option>
                    <option value="2">Loc 2</option>
                    <option value="3">Loc 3</option>
                    <option value="4">Loc 4</option>
                    <option value="5">Loc 5</option>
                </select>
                <p type="text" class=error id='beginLocation_Error'>                
            </td>

            <td id="col_0_3">
                <input type="button" value="Add Serial" onclick="addSubRow2('sub0');" />
                <br\>
                <table id="sub0">
                    <tr>
                        <td>
                            <select class='select' id="serial_0_1" name="serial_0_1">
                                <option value="1">Serial 1</option>
                                <option value="2">Serial 2</option>
                                <option value="3">Serial 3</option>
                                <option value="4">Serial 4</option>
                                <option value="5">Serial 5</option>
                            </select>
                       </td>
                       <td>
                         <input type="text" id="txt_0_1" name="txt_0_1">                        
                       </td>
                       <td>
                         <input type="button" value="Remove" onclick="removeSubRow2(this.parentNode);" />                       
                       </td>
                  </tr>
                  <tr>
                     <td>
                     <p  class=error id="selecterror_0_1">
                    </td>
                     <td>
                     <p class=error id="inputerror_0_1">
                    </td>   
                    <td>

                    </td>
                  </tr>
                </table>

            </td>
        </tr>
    </table>

</body>
</html> 
```

更新行和列 id 的代码

```
var rows = table.querySelectorAll('[id^=row]');
          for (var i = 0, row; row = table.rows[i]; i++) {
                  row.id="row"+i;
                  row.name="row"+i;
                  var rowName = "row"+i;
                  for (var j = 0, col; col = row.cells[j]; j++) {
                     col.id="col_"+i+"_"+j;
                     col.name="col_"+i+"_"+j;

                     if(j==3)
                     {
                        alert(col.childNodes[0].getElementsByTagName('button')[0]);

                     }
              } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T04:17:40.277

`childNodes`属性包括文本节点，因此您指的是元素`newcell.childNodes[0]`之前的空白。`select`

相反，您应该这样做：

```
newcell.childNodes[0].getElementsByTagName('select')[0] 
```

或者

```
newcell.childNodes[0].getElementsByTagName('input')[0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T04:38:44.737

请注意，脚本元素的语言属性在 HTML 4 中已被弃用，并在 HTML5 中被删除。type 属性是必需的。

在您的代码中：

```
 function addRow(tableID) {

        var table = document.getElementById(tableID);

        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount); 
```

无需添加参数，没有参数会将行添加到表的末尾。如果在所有修改完成后将节点附加到 DOM，这样的操作通常会更快。

```
 var colCount = table.rows[0].cells.length;

        for(var i=0; i<colCount; i++) {

            var newcell = row.insertCell(i);

            newcell.innerHTML = table.rows[1].cells[i].innerHTML;
            newcell.innerHTML = newcell.innerHTML;
            alert(newcell.childNodes[0].type);

    }
 } 
```

如果您只是创建现有行的克隆，则上述所有内容都可以替换为以下内容：

```
// Get the first tbody
var tbody = table.tbodies[0];

// Clone the second row
var newRow = tbody.rows[1].cloneNode(true);

/*
   Do whatever with newRow, like change element names and IDs to 
   suitble values
*/

tbody.appendChild(newRow); 
```

请注意，如果您将标题行放在表头部分，则可以克隆 tbody 的第一行（即 table.tbody[0].rows[0]），但始终向 tBody 添加行，因为旧版本的 IE如果您附加到表格，将会呕吐。 `insertRow`避免了这种情况，但速度很慢。

删除行时，您可以执行以下操作：

```
 var i = table.rows.length;
        var chkbox;

        while (i--) { 
            chkbox = table.rows[i].getElementsByTagName('input')[0];

            if (chkbox && chkbox.checked) {
                if (table.rows.length < 1) { 

                    /* error */

                } else {
                    table.deleteRow(i);
                }
            }
        } 
```

# winforms - 是否有任何支持 Mono 的 WinForms 控件库？

> ID：12488379
> 
> 赞同：0
> 
> 时间：2012-09-19T04:03:19.827
> 
> 标签：winforms, mono, grid, controls, libraries

我们正在将现有的 WinForms 应用程序迁移到 Mono，以便我们可以在 Linux 和 iOS 上运行，并且我们正在更新过程中的 UI。

我一直在查看 WinForms 控件库以加快开发速度，到目前为止，他们似乎都说他们不支持 Mono。是否有支持 Mono 的（商业或免费）？

我们正在寻找的关键功能是具有单元格合并和停靠/标签窗口管理的灵活数据网格。

谢谢，

伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:51:21.283

GTK# 中的 TreeView 非常灵活，因此根据您的需要（以及对外观和感觉的要求），可以选择将 UI 切换到 GTK#。

这是一些链接：

*   [GTK# TreeView 教程](http://www.mono-project.com/GtkSharp_TreeView_Tutorial)
*   [GTK# 初学者指南](http://www.mono-project.com/GtkSharpBeginnersGuide)
*   [GTK#你好世界](http://www.mono-project.com/GtkSharp%3a_Hello_World)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:08:07.317

到目前为止，这是我所知道的从 Windows/.NET 迁移到 Mono 的最大产品，

[http://codebetter.com/patricksmacchia/2011/11/07/real-world-feedback-on-a-net-to-mono-migration/](http://codebetter.com/patricksmacchia/2011/11/07/real-world-feedback-on-a-net-to-mono-migration/)

你可能会从这次尝试中学到东西。

大多数 .NET 控件严重依赖于 Windows 原生 API，因此如果您计划迁移到 Mono，您将失去它们。

通过最近的努力，DockPanel Suite 已升级为支持 Mono（尽管必须牺牲拖放），这是唯一支持 Mono 的停靠/选项卡 WinForms 控件，

[http://dockpanelsuite.com](http://dockpanelsuite.com)

我不知道您对数据网格有什么选择。

# wpf - WPF 对象引用未设置为对象实例

> ID：12488380
> 
> 赞同：0
> 
> 时间：2012-09-19T04:03:23.860
> 
> 标签：wpf, nullreferenceexception

在 Windows Presentation Foundation 中，我在此行的设计器中遇到错误：

```
<WindowsPresentation:GMapControl x:Name="MainMap" Zoom="13" MaxZoom="24" MinZoom="1" Margin="0,145,0,0" Height="Auto" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Width="Auto" /> 
```

但是，程序运行得很好。我完全被难住了。设计师也完美渲染。这只是错误列表中的一个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T04:12:18.683

嗯，已经找到解决方案了。

事实证明，令人惊叹的[GMaps 控件](http://greatmaps.codeplex.com/)存在一个错误，即在 WPF XAML 语法中声明 Zoom 会引发 NullReferenceException。删除此标签已解决问题：

```
<WindowsPresentation:GMapControl x:Name="MainMap" CanDragMap="True"  MaxZoom="24" MinZoom="1"  Margin="0,145,0,0" Height="Auto" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Width="Auto" /> 
```

我希望这可以帮助有同样问题的人。

# postgresql - 将 PostgreSQL mod log 转换为语句

> ID：12488381
> 
> 赞同：1
> 
> 时间：2012-09-19T04:03:49.807
> 
> 标签：postgresql, postgresql-8.4

我最近刚刚从 MySQL 切换到 PostgreSQL，用于本地计算机上的数据库。当我在无法访问 Internet 的情况下进行现场研究时，我会将整个数据库导出到另一台机器（笔记本电脑）。以前，我使用二进制日志来更新对数据库主版本的更改，并且我试图使用 PostgreSQL 的 mod log 作为二进制日志的替代品。我直接使用 PgAdmin 输入的查询成功了；但是，对于我使用前端（Wavemaker）处理的查询，日志在两列中显示语句，例如：

```
execute <unnamed>: insert into schema.table (col1, col2, col3) values ($1,$2,$3)
parameters: $1 = 'value1', $2 = 'value2', $3 = 'value3' 
```

或者：

```
execute &lt;unnamed&gt;: delete from schema.table where key=$1
parameters: $1 = 'keyvalue' 
```

我在 PostgreSQL 中查看了有关[PREPARE的信息；](http://www.postgresql.org/docs/8.4/static/sql-prepare.html)但是，看起来我必须定义数据类型才能执行此操作（CSV 报告未列出）。

在上述情况下，有什么方法可以转换日志内容以使 PostgreSQL 可以处理查询？

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:07:00.233

你有两个基本的选择。第一个是逻辑复制解决方案，例如 Slony-I 和复制元组，或者 Craig 建议只进行基于磁盘的复制。后者当然更简单。前者为您提供更多实时数据。

但是，如果您尝试进行基于日志的复制，Slony、Bucardo 或 Londiste 可能是您的最佳选择。

# eclipse - Eclipse Juno 和 Neon 中的错误 - 无法再次打开控制台视图

> ID：12488386
> 
> 赞同：7
> 
> 时间：2012-09-19T04:04:24.350
> 
> 标签：eclipse, eclipse-juno, eclipse-neon

当我最小化控制台视图时，它会消失，并且我无法使用`Windows > Show View > Console`菜单再次显示它。

如何在不重新安装 Eclipse 的情况下使该视图可见？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-05T07:13:19.793

我也有同样的问题。在 Juno 中最小化控制台后无法恢复控制台，并且它没有出现在工具栏中。

在“窗口”菜单中有一个“重置透视图”链接。它将 Eclipse 透视图恢复到全新安装后的透视图。

如果此操作后控制台仍未显示，请单击“窗口”>“显示视图”>“控制台”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T16:17:48.457

我遇到了同样的问题，只是除了控制台之外，我还有其他视图。我不断地重新调整我的观点。我发现卸载 Astyle 插件为我解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T18:12:26.850

如果您在 Eclipse 中最小化视图部分，那么它们不会变得完全不可见。最小化视图的图标仍显示在工具栏上，该工具栏可能位于 Eclipse 大窗口的任何一侧。该工具栏有一个标有“恢复”的按钮，这是您想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T04:40:15.373

为控制台添加一个 Eclipse 快捷方式怎么样？这样，您只需使用/按下组合键即可获取控制台。

[http://www.google.co.in/search?q=add+keyboard+shortcut+in+eclipse](http://www.google.co.in/search?q=add+keyboard+shortcut+in+eclipse)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-11T05:20:49.757

只需转到 Windows 菜单并单击重置透视图。它解决了这个问题。

# javascript - 为什么 AngularJS 建议将服务、指令和过滤器放在单独的模块中？

> ID：12488387
> 
> 赞同：3
> 
> 时间：2012-09-19T04:04:24.817
> 
> 标签：javascript, angularjs

在[angular-seed-project](https://github.com/angular/angular-seed/)中，过滤器、服务和指令被放置在不同的模块中。为什么？为什么不把它们都粘在`myApp`模块下面呢？

```
angular.module('myApp', ['myApp.filters', 'myApp.services', 'myApp.directives']) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T08:41:35.657

引自 [1]

* * *

“...我们建议您将应用程序分解为多个模块，如下所示：

*   一个服务模块，用于服务声明
*   指令模块，用于指令声明
*   过滤器模块，用于过滤器声明
*   以及一个依赖于上述模块的应用级模块，并具有初始化代码。

这种分解的原因是在您的测试中，通常需要忽略初始化代码，这往往难以测试。通过将其放入单独的模块中，它可以很容易地在测试中被忽略。通过仅加载与测试相关的模块，测试也可以更加集中。

以上只是一个建议，请随时根据您的需要进行调整。”

* * *

[1] [http://docs.angularjs.org/guide/module](http://docs.angularjs.org/guide/module)

# sql - SQL - 在成本变化之前获取最短日期的记录

> ID：12488388
> 
> 赞同：1
> 
> 时间：2012-09-19T04:04:30.597
> 
> 标签：sql, sql-server, sql-server-2012

有一个记录集，我希望根据 PO 获取最短日期的记录，直到成本发生变化。任何帮助，将不胜感激。大约有 700 万条记录，而当前光标并没有切断它。

样本：

```
PO       log_Ts                         cost
123      2012-06-26-10.37.44.035385     2.5896
123      2012-06-27-02.16.14.706817     2.5896
123      2012-06-26-10.28.57.540731     2.591
123      2012-06-26-10.37.43.948940     2.5896
123      2012-06-26-10.37.43.421713     2.5896
123      2012-06-26-18.34.37.191917     2.5896
123      2012-06-27-02.16.14.705622     2.5896
123      2012-06-27-04.33.18.264742     2.5896
123      2012-06-26-10.37.44.007667     2.5896
123      2012-06-26-10.37.43.706207     2.5896
123      2012-06-26-10.26.56.767121     2.5896
123      2012-06-26-10.37.43.919248     2.5896

Looking to grab:
PO       log_Ts                         cost
123      2012-06-26-10.26.56.767121     2.5896
123      2012-06-26-10.28.57.540731     2.591
123      2012-06-26-10.37.43.421713     2.5896 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:10:18.403

您可以尝试以下方法：

1.  `SELECT`按 log_ts 顺序排列的行，并将行号与每一行相关联。
2.  `SELF JOIN`#1 中 firstTable.rownum = secondTable.rownum -1 的结果。工作表中的每一行都将包含当前记录和下一条记录。
3.  应用该`WHERE`子句，使成本值不同，并且您对`SELF JOIN`.

例如

```
RowNum  PO       log_Ts                         cost    RowNum  PO       log_Ts                         cost
1       123      2012-06-26-10.37.44.035385     2.5896  2       123      2012-06-27-02.16.14.706817     2.5896
2       123      2012-06-27-02.16.14.706817     2.5896  3       123      2012-06-26 10.28.57.540731     2.591
3       123      2012-06-26-10.28.57.540731     2.591   4       123      2012-06-26-10.37.43.948940     2.5896 
```

询问：

```
WITH T (PO, Log_Ts, Cost, RowNum) 
AS 
(
SELECT PO, Log_Ts, Cost, Row_Number() OVER(ORDER BY Log_Ts) FROM PO_INFO
) 

SELECT T2.* 
FROM 
    T t1
    JOIN T t2
    ON t1.rownum = t2.rownum - 1 AND t1.cost != t2.cost 
```

结果：

```
123      2012-06-26 10.28.57.540731     2.591    2
123      2012-06-26-10.37.43.948940     2.5896   3 
```

HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T05:20:21.910

如果您的 DBMS 支持 LAG() 函数，则可以在 t-clausen.dk 和 Vikdor 的答案中使用 CTE 方法，但不需要自连接。

```
WITH t 
AS 
(
    SELECT PO, log_Ts, Cost, 
    LAG( Cost ) OVER( PARTITION BY PO ORDER BY log_Ts) AS prevcost
    FROM po_log_events
) 
SELECT PO, log_Ts, Cost
FROM t
WHERE prevcost IS NULL 
OR prevcost <> cost       
ORDER BY PO, log_Ts 
```

如果 ROW_NUMBER() 和公用表表达式不适用于您的数据库（即您的数据库是 MySQL），则可以通过相关子查询实现相同的结果：

```
SELECT DISTINCT p.PO, p.log_Ts, p.Cost
FROM po_log_events p
WHERE NOT EXISTS 
    ( SELECT 1 FROM po_log_events p2 
      WHERE p2.PO = p.PO AND p2.log_Ts < p.log_Ts )
OR NOT EXISTS 
    ( SELECT 1 FROM po_log_events p3 
      WHERE p3.PO = p.PO 
      AND p3.log_Ts = 
          (SELECT MAX(p4.log_ts) 
           FROM po_log_events p4
           WHERE p4.PO = p.PO
           AND p4.log_Ts < p.log_Ts
           )
      AND p3.Cost = p.Cost
     ) 
```

如果表在 (PO, log_Ts) 上有唯一索引，`DISTINCT`则可以删除

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T05:35:42.573

```
;with a as
(
  select po, log_ts, cost, row_number() over (partition by po order by log_ts) rn
  from <table>
), b as
(
  select po, log_ts, cost, 1 grp, rn from a where rn = 1
  union all
  select a.po, a.log_ts, a.cost, case when a.cost = b.cost then b.grp else b.grp+1 end, a.rn
  from a
  join b on a.rn = b.rn+1 and a.po = b.po
)
select po, min(log_ts) log_ts, cost 
from b
group by po, cost, grp 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T04:09:18.587

这是真正适用于过程逻辑（代码）而不是基于集合的逻辑（sql）的东西。因此，如果可能的话，我建议在代码中执行此操作，您可以简单地对数据集进行排序并循环遍历它。

如果代码不是一个选项，您可以使用游标和循环在存储过程中执行相同的操作。

# extjs - 具有用户定义 ID 的 ExtJs4 模型

> ID：12488396
> 
> 赞同：7
> 
> 时间：2012-09-19T04:05:53.443
> 
> 标签：extjs, extjs4, extjs4.1

我有以下模型：

```
Ext.define('Gst.model.Order', {
    extend: 'Ext.data.Model',
    idProperty: 'id',
    fields: [
        { name: 'id', type: 'string' } 
    ]
}); 
```

我的问题是订单模型的 ID 是用户定义的。因此，创建新订单实例并将其插入订单存储的代码将是：

```
order = Ext.create('Gst.model.Order', {'id': 'someuserdefinedvalue'}); 
store.insert(0, order); 
```

发生的情况是因为 idProperty 是由用户提供的，所以订单没有被标记为幻像，因此不被认为是脏的。因此，不会向服务器发出 POST。如果我手动将订单设置为幻像和脏，那么当我将订单插入商店时，我可以触发 POST，例如：

```
order = Ext.create('Gst.model.Order', {'id': 'someuserdefinedID'});
order.phantom = true;
order.setDirty(); 
store.insert(0, order); 
```

这很好，但我的服务器端代码使用 REST 控制器，并希望 POST 在 url 中没有和 id。所以虽然请求 extJS 问题是

```
POST http://app.local/api/order/someuserdefinedID.json 
```

虽然我的服务器要寻找的格式是

```
POST http://app.local/api/order.json 
```

所以我解决这个问题的唯一方法是创建一个订单并设置 phantom = true 并调用 setDirty()。这将导致发出 POST，然后在我的 RestProxy 中覆盖 buildUrl: 并使用逻辑测试 POST 请求并从 url 中删除 idProperty。

这对我来说似乎是一个丑陋的工作，想知道是否有更好的方法？

我想我的问题是：处理此类事情的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:43:41.650

可能的解决方案是向模型添加一个`order_id`属性并将 保留`id`为自然键吗？在我看来，*与*框架想要处理`idProperty`. 只是我的2c。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T10:20:13.447

正如 John Hall 所说，您应该使用另一个`idproperty`或重命名您的 id，以便框架使用隐式 id（内部 id）。

然后脏/幻象将起作用，并且发布将在数据中包含用户 ID，但不作为记录的键。

# python - python中的变量打印

> ID：12488403
> 
> 赞同：1
> 
> 时间：2012-09-19T04:06:28.050
> 
> 标签：python

我是 Python 新手，我正在尝试声明一个变量并打印它的值。

这是我的代码：

```
#!C:\Python32\python.exe
import sys
import os
import cgi
import cgitb
cgitb.enable()
a = 5
print(a)-------------------------> My doubt is in this line 
```

但是我的一个朋友把那行写成`print a`. 在他的 Python 中，它正在打印该值，但在我的情况下，它显示为“无效语法”。为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T04:08:29.747

在 Python 2 中，`print`不是函数，而是关键字。因此括号无关紧要并且`print 'foo'`与`print('foo')`.

Python 3`print`变成了一个函数，*必须*用参数调用它：`print('foo')`. 将其称为`print 'foo'`将不再起作用。

由于在使用`print`as 关键字时遇到错误，因此您使用的是 Python 3。您必须`print`像以前一样使用 as 函数。你的朋友正在使用 Python 2，它可以双向工作。

Python 3 和 Python 2 相似，但如果您计划与使用不同版本 Python 的人合作，您应该阅读一些主要差异：http: [//docs.python.org/py3k/whatsnew /3.0.html](http://docs.python.org/py3k/whatsnew/3.0.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T04:07:57.377

由于您在 Python 3 中，[`print`is a function](http://docs.python.org/release/3.0.1/whatsnew/3.0.html#print-is-a-function)，所以您将其称为：`print(a)`。在 Python 2（你的朋友正在使用的）中，你可以去掉括号，将其命名为：`print a`，但这*在未来将不起作用*，所以**你的方式是正确的**。

此外，您的版本 ( `print(a)`) 将适用于 Python 3 和 Python 2，因为只要它们匹配，就会忽略额外的括号。我建议始终以 Python 3 风格编写它，因为它适用于两者。您可以通过使用（有点神奇的）[`__future__`模块](http://docs.python.org/library/__future__.html)来明确和要求：

```
from __future__ import print_function 
```

将其作为函数会导致其他一些差异，因为在`print`Python 3 中，您可以将变量设置为指向`print`，或将其作为参数传递给函数：

```
a = print
a('magic') # prints 'magic'

def add_and_call(func, num):
    num += 1
    func(num)

add_and_call(print, 1) # prints 2 
```

# xmpp - 将 openfire 等 xmpp 服务器集成到我自己的 java web 应用程序中

> ID：12488404
> 
> 赞同：5
> 
> 时间：2012-09-19T04:06:36.023
> 
> 标签：xmpp, integration

我想做一个有聊天室的 iphone 应用程序。我搜索了很多，认为 xmpp 可以做到这一点。但是如果我使用 openfire 作为 xmpp 服务器，如何将 openfire 集成到我自己的 java web 应用程序服务器中？我认为 openfire 是一个独立的应用程序，它如何与我的 java web 服务器通信？我在这里搜索了一些类似的问题，但仍然无法理解。谢谢你的帮助。

# android - 取出sd卡时强制关闭

> ID：12488410
> 
> 赞同：0
> 
> 时间：2012-09-19T04:07:53.317
> 
> 标签：android, sd-card, android-sdcard

我的应用程序将图像存储在 SD 卡上。移除 SD 卡后，我的应用程序将被强制关闭。我想改变这一点，而不是强制关闭，我想在移除 SD 卡时将这些图像放在内部存储中。有什么建议么？

编辑1：日志中没有异常。卸载媒体时，我可以看到我的应用程序被杀死，但我不知道为什么。

```
09-19 12:14:33.128: W/ActivityManager(27117): Killing processes unmount media at adjustment 7
09-19 12:14:33.128: W/ActivityManager(27117): Killing ProcessRecord{408f6700 17535:com.google.android.apps.maps/10074} (adj 11): unmount media
09-19 12:14:33.128: W/ActivityManager(27117): Killing ProcessRecord{40a99fd8 28691:cn.wps.livespace/10049} (adj 9): unmount media 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:21:15.053

您可以在应用启动时检查 sd 卡是否已经卸载。请使用此处的代码片段并在 android 开发者网站上阅读更多信息。 [使用外部存储](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)

如果要显示内部存储中的图像，则应将这些图像打包到 .apk 文件中。只需将它们放入 /asset 文件夹，然后使用[AssetManager](http://developer.android.com/reference/android/content/res/AssetManager.html)读取它们，甚至将它们复制到内部存储中以供将来使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:00:36.367

```
File temp;
if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
temp =new File(android.os.Environment.getExternalStorageDirectory(),"ImageFile");
else
temp=ctx.getCacheDir(); 
```

每次读写数据时调用...

# android - 关闭弹出窗口后屏幕变得无响应

> ID：12488411
> 
> 赞同：0
> 
> 时间：2012-09-19T04:07:54.110
> 
> 标签：android, alert

我正在上一门用于显示警报弹出窗口的课程。我从同一个包中的一个类启动该警报。当我收到来自同一个班级的事件时，我也会关闭该弹出窗口。现在，当我收到弹出窗口被关闭的事件时，我正在关闭弹出窗口，但屏幕变得无响应。然后我们需要按返回按钮或主页键才能退出。请提出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:17:17.547

我的东西屏幕变得无响应，因为在弹出窗口被关闭后显示弹出窗口的活动没有关闭。所以你应该调用活动完成（）；完成活动的方法。

# java - 2类之间有什么关系？

> ID：12488420
> 
> 赞同：0
> 
> 时间：2012-09-19T04:09:07.107
> 
> 标签：java, oop

如果我有 A 类和 B 类，如果没有其他说明（没有 HAS-A）关系说明它们之间的关系是什么，是关联吗？

```
class A{}
class B{} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T04:10:24.187

这些类之间没有关系。

我能看到的唯一关系是它们都隐式继承自`Object`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T04:13:03.180

它们是名为 的父类的子类`java.lang.Object`，除此之外，没有可见的关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T05:10:48.047

根据您提供的信息。不，没有关系。在java中，两者都继承自java.lang.Object。但是从OO的角度来看，没有关系。

类可以通过以下方式关联：

聚合 - 这是一个 has-a 关系，其中类 A 至少有一个类型为 classB 的字段。继承 - 这是一个 is-a 关系，其中类 B 是另一个类 A 的特化。在这种关系中， classB 继承了 class A 的所有行为。

# html - 使用 Perl 从 HTML 文件中删除内联 CSS

> ID：12488422
> 
> 赞同：1
> 
> 时间：2012-09-19T04:09:09.233
> 
> 标签：html, css, perl, cpan

我们有大约 100 多个多年前编写的 HTML 文件，所有这些文件都包含内联 CSS。现在我们尝试从这些文件中提取 CSS 并为 CSS（样式表）创建单独的文件。所以在这个过程中，我们首先要清理我们所有的 HTML 文件（从它们中删除 CSS）。

我想知道是否有任何 perl 模块可以完成这项工作？我在 CPAN 上搜索，但没有得到任何信息。也许我的搜索查询与所需的模块不匹配。让我知道是否存在这样的模块。如果没有，那么我将为此编写一个模块。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T04:23:55.237

对于任何体面的 HTML 解析器，这应该是非常简单的（我是 的粉丝[`HTML::TokeParser`](http://search.cpan.org/perldoc?HTML%3a%3aTokeParser)，但还有其他的）。您将遍历 HTML 文档中的所有标记。当您找到一个具有`style`属性的 HTML 标记时（是否还有其他定义内联 CSS 的属性？我不是这里的专家），您将在输出标记之前删除该属性。您将不加修改地输出其他标记。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T03:25:35.763

一个非常简单的方法是使用[HTML::Restrict](https://metacpan.org/module/HTML%3a%3aRestrict)。只需告诉它您要保留哪些标签和属性，其他所有内容都将被删除。从文档：

```
use HTML::Restrict;

my $hr = HTML::Restrict->new();
$hr->set_rules({
    b   => [],
    img => [qw( src alt / )]
});

my $html = q[<body><b>hello</b> <img src="pic.jpg" alt="me" id="test" /></body>];
my $processed = $hr->process( $html );

# $processed now equals: <b>hello</b> <img src="pic.jpg" alt="me" /> 
```

# ios - 设置/创建 CLLocationManager 的最佳位置是什么？

> ID：12488431
> 
> 赞同：1
> 
> 时间：2012-09-19T04:10:07.503
> 
> 标签：ios, cllocationmanager

我一直在阅读有关区域监控问题的大量信息——搜索“区域监控不起作用”会返回 117 个问题。

我对它了解得越多，我就越认为 CLLocationManager 的设置和创建是关键。并且可能是我遇到麻烦的地方 - 我似乎随机（并且很少）触发了 didEnterRegion。

那么对于那些在区域监控方面有丰富经验的人来说，您如何处理您的 CLLocationManager？它是在哪里创建的？是单例吗？

# c# - 当参数是数组时，参数的大小是多少？

> ID：12488435
> 
> 赞同：0
> 
> 时间：2012-09-19T04:10:34.377
> 
> 标签：c#

> **可能重复：**
> [数组或列表是否在 C# 中默认通过引用传递？](https://stackoverflow.com/questions/967402/are-arrays-or-lists-passed-by-default-by-reference-in-c)

在我的机器上，指针是 32 位的，因此传递类对象的函数将传递 32 位（指向类对象的指针）。我不断听到关于 c 语言中数组的矛盾之处，即它们是引用类型，并且它们是按值传递的。那么有人可以告诉我传递5个浮点数组的函数在传递该数组时将使用多少位？它是指针的大小，还是 5 * 32 的大小为 5 个浮点数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T04:16:28.403

数组是引用类型，因此它只传递引用，而不是所有值。

[将数组作为参数传递（C# 编程指南）](http://msdn.microsoft.com/en-us/library/hyfeyz71%28v=vs.110%29.aspx)

> 数组可以作为参数传递给方法参数。因为数组是引用类型，所以该方法可以改变元素的值

您可能会看到 Jon Skeet 的这篇文章：[C# 中的参数传递](http://www.yoda.arachsys.com/csharp/parameters.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T04:17:08.467

所有数组都是引用类型：

引用[MSDN](http://msdn.microsoft.com/en-us/library/9b9dty7d.aspx)：

> 数组类型是从抽象基类型 Array 派生的引用类型。由于此类型实现了 IEnumerable 和 IEnumerable，因此您可以在 C# 中的所有数组上使用 foreach 迭代。

因此，将数组传递给函数会传递一个引用，无论数组中有多少元素，它的大小都是相同的。在您的示例中，这将是 32 位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T04:17:19.533

数组是引用类型，每个引用是 4 字节（在 32 位系统上）或 8 字节（在 64 位系统上）大。作为参考，对于大小，只需将其长度乘以参考大小并添加类定义开销（变量少字节，内存管理少字节）。

# c# - 使用 HtmlAgilityPack 获取嵌套表格单元格

> ID：12488442
> 
> 赞同：2
> 
> 时间：2012-09-19T04:11:11.253
> 
> 标签：c#, html-parsing, html-agility-pack

我有以下html页面：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>

<head>
</head>

<body>
<div style="LEFT: 135; WIDTH: 450; POSITION: absolute; TOP: 70">
  <a name="content_begins"></a>
  <table cellSpacing="0" cellPadding="0" width="100%" border="0">
    <tr>
      <td vAlign="top">
      <table class="PortalGadget" cellSpacing="0" cellPadding="0" width="100%" border="0">
        <tr>
          <td>
          <table cellSpacing="6" cellPadding="0" border="0">
            <form name="authenticator" ACTION="auth-cup" METHOD="POST" ENCTYPE="application/x-www-form-urlencoded">
              <tr bgColor="#6c8899">
                <td><font face="Trebuchet MS" color="#ffffff">&nbsp;*** You Have Already Logged In ***</font></td>
              </tr>

              <tr height="20">
                <td vAlign="bottom" height="20">
                <font face="Trebuchet MS" size="-1">Context:</font></td>
              </tr>
              <tr>
                <td></td>
              </tr>
              <tr>
                <td vAlign="bottom" height="20">
                <font face="Trebuchet MS" size="-1">Username:</font></td>
              </tr>
              <tr>
                <td><input size="40" name="username"></td>
              </tr>
              <tr>
                <td><font face="Trebuchet MS" size="-1">Password:</font></td>
              </tr>
              <tr>
                <td><input type="password" size="40" name="password"></td>
              </tr>
              <tr>
                <td vAlign="bottom" height="20">
                <font face="Trebuchet MS" size="-1">Destination:</font></td>
              </tr>
              <tr>
                <td>
                <input size="40" name="url" value="http://ya.ru/"></td>
              </tr>
              <tr>
                <!---- Hidden field to identify forward/reverse proxy path ------>
                <input TYPE="hidden" NAME="proxypath" VALUE="forward">
              </tr>
              <tr>
                <td vAlign="bottom" align="left">
                <input type="submit" alt="Login" value="Login" border="0" name="loginButton">&nbsp;&nbsp;
                <input type="reset" alt="Reset" value="Reset"></td>
              </tr>
              <tr height="5">
                <td height="5"><hr SIZE="2"></td>
              </tr>
              <tr>
                <td><font face="Trebuchet MS" size="-1">
                <p>Copyright 1999-2003 Novell, Inc. All rights reserved.</p>
                </font></td>
              </tr>
            </form>
            </tbody>
          </table>
          </td>
        </tr>
      </table>
      </td>
    </tr>
  </table>
</div>
</body>
</html> 
```

我想从 td 获取文本“您已经登录”。我有这个代码：

```
Stream str = SendData().GetResponseStream();
            HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
            doc.Load(str);
            foreach (HtmlAgilityPack.HtmlNode table in doc.DocumentNode.SelectNodes("//table[@class='PortalGadget']"))
            {
                MessageBox.Show("Found: " + table.Id);
                foreach (HtmlAgilityPack.HtmlNode row in table.SelectNodes("//table"))
                {

                    HtmlAgilityPack.HtmlNodeCollection cells = row.SelectNodes("tr");

                    if (cells == null)
                    {
                        continue;
                    }

                    foreach (HtmlAgilityPack.HtmlNode cell in cells)
                    {
                        MessageBox.Show("cell: " + cell.InnerText);
                    }
                }
            } 
```

但我无法在代码中获取文本“您已经登录”。在这种情况下如何获取嵌套表格单元格的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T05:18:44.367

嗯，我发现解决方案在我看来：

```
string value = doc.DocumentNode.SelectNodes("//table[@class='PortalGadget']/tr/td/table/tr/td")[0].InnerText; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:09:40.077

要从另一个节点中选择节点，您必须输入一个“。” 在 XPath 的开头。

所以`table.SelectNodes("//table")`变成`table.SelectNodes(".//table")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T16:17:55.173

这实际上取决于您认为该数据的判别性，但是当我查看 HTML 时，似乎 BGCOLOR 设置为 #ffffff 的 FONT 元素是，所以这是相应的 Html Agility Pack 代码：

```
HtmlDocument doc = new HtmlDocument();
doc.Load(yourHtmlFile);
HtmlNode node = doc.DocumentNode.SelectSingleNode("//font[@color='#ffffff']");
Console.WriteLine(node.InnerText.Trim()); 
```

将输出：

```
&nbsp;*** You Have Already Logged In *** 
```

# java - 尝试打印并获取：“无法解析为变量”错误

> ID：12488449
> 
> 赞同：0
> 
> 时间：2012-09-19T04:12:09.617
> 
> 标签：java

我无法理解以下代码中的原因：

```
System.out.println("Enter start time");
String startTime = console.nextLine();
String [] tokens = startTime.split(":");
double starttimeHours = Double.parseDouble(tokens[0]);
double pickupMinutes = Double.parseDouble(tokens[1]);{
 if (starttimeHours >=6 && starttimeHours <=9 ){
 int peaktimeWage = 4;}
 else if  (starttimeHours >=1 && starttimeHours <=5 ){
  int peaktimeWage = 2;}

else {int peaktimeFare = 3;}{
  System.out.println(peaktimeWage); 
```

我不断收到错误“peaktimeWage 无法解析为变量”。在最后一行代码是：

```
 System.out.println(peaktimeWage); 
```

因为它是之前定义的变量，甚至在上面的变量旁边说该变量没有被使用。打印出来时，我检查了我是否用与以前的代码相同的方式编写了它。所以我不知道问题是什么。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:14:53.427

的范围`peaktimeWage`仅限于您的`if`和`else`。把它贴在你的外面`if else`

```
int peaktimeWage = -1;
if (starttimeHours >=6 && starttimeHours <=9 ){
    peaktimeWage = 4;
} else if  (starttimeHours >=1 && starttimeHours <=5 ){
    peaktimeWage = 2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:18:18.373

peaktimeWage 在 if 块内声明。这意味着它将在 if 块结束时超出范围并被垃圾收集器清理。对于 peaktimeFare 变量，您也会遇到同样的问题

而是尝试

```
System.out.println("Enter start time");
String startTime = console.nextLine();
String [] tokens = startTime.split(":");
double starttimeHours = Double.parseDouble(tokens[0]);
double pickupMinutes = Double.parseDouble(tokens[1]);
{    
int peaktimeWage = 0;
int peaktimeFare = 0;
 if (starttimeHours >=6 && starttimeHours <=9 ){
 peaktimeWage = 4;}
 else if  (starttimeHours >=1 && starttimeHours <=5 ){
  peaktimeWage = 2;}

else {peaktimeFare = 3;}{
  System.out.println(peaktimeWage); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T04:16:15.293

变量范围不正确。

改变你的

```
if (starttimeHours >=6 && starttimeHours <=9 ){
     int peaktimeWage = 4;
} else if  (starttimeHours >=1 && starttimeHours <=5 ){
      int peaktimeWage = 2;
} 
```

至

```
int peaktimeWage = -1;
int peaktimeWage = -1;

if (starttimeHours >=6 && starttimeHours <=9 ){
  peaktimeWage = 4;
} else if  (starttimeHours >=1 && starttimeHours <=5 ){
  peaktimeWage = 2;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T04:16:28.857

这与相关变量的范围有关。这是你写的：

```
if (starttimeHours >=6 && starttimeHours <=9 ){
 int peaktimeWage = 4;
} 
```

上面的语句意味着变量`peaktimeWage`的范围只在`if`语句内。外面的任何语句都不会看到变量的存在。

**解决方案：**在块外定义变量，`if`并可能修改该块内的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T04:13:59.200

您的问题是您没有定义`peaktimeWage`编译器可以肯定看到的任何地方。在编译时，编译器并不知道这些 if 语句中的任何一个都会被确定评估。

```
System.out.println("Enter start time");
String startTime = console.nextLine();
String [] tokens = startTime.split(":");
double starttimeHours = Double.parseDouble(tokens[0]);
double pickupMinutes = Double.parseDouble(tokens[1]);
int peaktimeWage = 0; // Have a default value in case it doesn't get set
if (starttimeHours >=6 && starttimeHours <=9 )
{
     peaktimeWage = 4;
}
else if (starttimeHours >=1 && starttimeHours <=5 )
{
     peaktimeWage = 2;
}
else
{
     int peaktimeFare = 3;
}
System.out.println(peaktimeWage); 
```

`peaktimeFare`考虑到仅在其他 if 语句为假时才定义它，您也会遇到问题。（除非`peaktimeFare`= `peaktimeWage`）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T04:14:28.823

它不是在环境中定义的，它是在`if`子句中定义的（所以这个变量的范围只在内部`if`或内部`else if`），所以一旦你完成了执行`if`- 它就不存在了......

顺便说一句-您缺少两个右括号`}`

将您的代码更改为：

```
int peaktimeWage = 0;
System.out.println("Enter start time");
String startTime = console.nextLine();
String [] tokens = startTime.split(":");
double starttimeHours = Double.parseDouble(tokens[0]);
double pickupMinutes = Double.parseDouble(tokens[1]);
{
 if (starttimeHours >=6 && starttimeHours <=9 ){
 peaktimeWage = 4;}
 else if  (starttimeHours >=1 && starttimeHours <=5 ){
  peaktimeWage = 2;}

 else {int peaktimeFare = 3;}
{
  System.out.println(peaktimeWage);
} 
```

# applescript - 单击未知的 UI 元素

> ID：12488453
> 
> 赞同：0
> 
> 时间：2012-09-19T04:13:00.893
> 
> 标签：applescript

我找到了一个 UI 元素，它实际上是一个按钮，但显示为 AXUnknown。

该窗口显示在以下链接中： [http ://s8.postimage.org/p7123rw85/screen.png](http://s8.postimage.org/p7123rw85/screen.png)

使用命令 click 不起作用，所以我想我会尝试一些不同的东西。

**我试过的：**

从这个元素中，我可以通过执行以下操作来获取元素的位置： `get value of attribute "AXPosition"`

然后我可以使用从中获得的坐标通过`click at`命令单击未知的 UI 元素。

**更新**

我现在也尝试过使用该`perform action "AXPress" of`命令。

```
tell application "System Events"

    tell process "SomeProcess"

        if (exists window "SomeWindow") then

            perform action "AXPress" of UI element 3 of UI element 6 of window "SomeWindow"

        end if
    end tell
end tell 
```

这无济于事，我没有想法了。有没有人对这个问题有任何经验或知道这是否根本不可能完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:04:04.043

如果普通的 gui 脚本技术不起作用，那么作为最后的手段，您可以尝试击键。首先，您需要设置系统首选项以启用此技术。在此处检查窗口底部的“所有控件”按钮...系统首选项->键盘->键盘快捷键选项卡。启用此功能后，您可以使用选项卡按钮循环浏览窗口的各种 ui 元素。当您选择按钮时，请按空格键。因此，计算您需要按下才能到达按钮的选项卡数量，然后这样的事情可能会起作用。

```
set numberOfTabs to 3
set shortDelay to 0.2

tell application "Whatever" to activate
delay shortDelay
tell application "System Events"
    repeat numberOfTabs times
        keystroke tab
        delay shortDelay
    end repeat
    keystroke space
end tell 
```

请注意，这不是很可靠，因为选项卡的数量可能并不总是一致的。你必须检查一下。

# cufon - 搜索输入占位符的字体替换

> ID：12488460
> 
> 赞同：2
> 
> 时间：2012-09-19T04:13:35.660
> 
> 标签：cufon, font-replacement

All-One-Cufon 目前，将更换为其他 ttf 字体替换..

使用 All-One-Cufon 插件时，我发现 cufon 代码无法用通常用于更改颜色的相同 html5 代码替换占位符：

```
#rightHalf input::-webkit-input-placeholder {
    color: #f9a11b;
}
#rightHalf input:-moz-placeholder {
    color: #f9a11b;
}
#rightHalf input:-ms-input-placeholder {
    color: #f9a11b;
} 
```

库方代码：

```
Cufon.replace('#rightHalf input::-webkit-input-placeholder');
Cufon.replace('#rightHalf input:-moz-placeholder');
Cufon.replace('#rightHalf input:-ms-input-placeholder'); 
```

这没有用。也没有尝试针对输入：

HTML：

```
<input type="text" class="field" name="s" id="s" placeholder="Search for Products, Services & Supplier "> 
```

库方代码：

```
Cufon.replace('#s'); 
```

导致：

```
 <input type="text" class="field" name="s" id="s" placeholder="Search for Products, Services &amp; Supplier ">    
<cufon class="cufon cufon-canvas" alt=" " style="width: 3px; height: 12px; ">
<canvas width="15" height="14" style="width: 15px; height: 14px; top: -1px; left: -2px; "></canvas><cufontext></cufontext></cufon>
<input type="submit" class="submit" name="submit" id="searchsubmit" value="Search"></form> 
```

失败和混乱的间距......

CSS（cufon JS 上的 fontFamily 设置为“arialnarrow”）：

```
font-family: 'arialnarrow'; 
```

和

```
font: arialnarrow; 
```

和

```
font-family: 'arialnarrow' !important; 
```

和

```
font: arialnarrow !important; 
```

什么也没做...正如我所料，看到 cufon 添加了 html 来更改文本外观，并且占位符在输入中，可以通过 css 而不是 html 定位。

*   有谁知道我怎么能做到这一点？**ttf字体占位符的字体替换？**

*   **Arial Narrow** for **[Gonzit.com](http://gonzit.com/)** <-- 顶部搜索栏占位符文本需要替换..

*   **任何帮助表示赞赏，需要尽快关闭！**

泰德

# ios - iOS 目录结构 - 什么是快照文件？

> ID：12488462
> 
> 赞同：1
> 
> 时间：2012-09-19T04:13:42.633
> 
> 标签：ios, xcode, directory-structure

我正在深入研究 iOS /Library/Caches/ 文件夹的目录结构，在上面的文件夹中发现了一个名为“com.BlueChips.MyApp”的文件和另一个名为“Snapshots”的文件。

我的应用程序包的名称与我找到的第一个文件相同 - “com.BlueChips.MyApp”。

我已经在这个应用程序上工作了很长时间 - 超过 6 个月，我不记得创建这些文件，尤其是 /Library/Caches/ 文件夹中的“快照”。所以我想知道这些是系统生成的文件还是它们实际上是由我创建的？

我对它们很好奇，因为这样我就可以在我的应用程序提交之前删除它们——不希望 Apple 仅仅因为他们在启动我的应用程序时在我的 /Library/Cache 文件夹中发现了一些杂散文件而拒绝我的应用程序。

在 XCode 或 Instruments 上，是否可以获得启动我的应用程序时已经存在或创建的所有文件的列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T05:06:52.227

它用于状态维护。在大多数情况下，当您进入后台模式时，应用程序将被终止。因此，当您在应用程序之间切换时，ios 给出的动画会使用这些图像，只是为了显示应用程序的最后状态以使其看起来不错。

在某些情况下，当您的应用程序崩溃时，还会出现屏幕截图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T04:22:20.603

好的，我发现 /Library/Caches/Snapshots 文件夹保存了您的应用程序的快照。特别是当您在应用程序之间切换或按下主页按钮然后重新启动您的应用程序时，它会尝试从该特定文件夹中调出屏幕截图。

# continuous-integration - Jenkins 主/从网络 I/O

> ID：12488469
> 
> 赞同：0
> 
> 时间：2012-09-19T04:14:30.600
> 
> 标签：continuous-integration, jenkins, master-slave

我们在单台机器上使用 Jenkins——随着构建速度越来越慢——我四处寻找选项（将它安装在较新的硬件上/添加从属服务器）。由于许多论坛都建议采用主/从架构以实现可扩展性——我决定采用这种方式。

我们的代码存储库是 Mercurial。这就是问题所在 - 每次我构建一个项目时 - 从站上的现有存储库都会被删除，并且项目文件会再次复制到其中 - 从而丢失了增量网络 I/O。通过网络传输文件正在消除更快编译的所有好处！有没有办法防止这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:01:23.203

这里的 I/O 与 Master-Slave 配置无关，
而与 Slave（或 Master）与 Source-Control 系统交互的方式有关。

您正在使用**[Mercurial 插件](https://wiki.jenkins-ci.org/display/JENKINS/Mercurial+Plugin)**吗？
我不熟悉 Mercurial，但那里的文档提到轮询源代码更改
，并且 UI 看起来非常全面。

在最坏的情况下，您可以编写自己的脚本，将所有修改后的文件检出到共享位置
（不要使用默认位置，它位于您工作的工作区中）。

祝你好运！

# android - 如何在 onPause() 中保存对象？

> ID：12488473
> 
> 赞同：3
> 
> 时间：2012-09-19T04:15:08.770
> 
> 标签：android, multithreading

我正在构建的应用程序有两个工作线程，一个用于网络，一个仅用于接收网络数据。我遇到的问题是，在关闭网络线程之前，我不确定如何从网络线程中保存`Socket`、`BufferedReader`和对象。我不需要对象持久保存，我只需要一种方法来保存它们，如果 Android 杀死. 有没有办法将这些对象保存到 Bundle 中，或者是否有另一种方法（例如，但不仅仅是用于配置更改）？此外，如果 Android 终止 Activity，它会自动关闭应用程序的所有线程吗？那也可以解决我的问题。谢谢你。`PrintWriter``onPause()``onPause()``onSaveInstanceState()``onRetainNonConfigurationInstance()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T05:21:13.437

你有几个问题。我会尝试回答几个。

`Threads`, `Sockets`, `BufferedReader`s 和`PrintWriter`s 不能被包裹。您可以打包文件描述符，但遗憾的是不能打包这些复杂类型。这些复杂类型有很多状态，如果不知道每个状态的实现，很难将它们打包成一个包。

`onPause()`不等于杀。`onPause`仅仅意味着您的进程不会在前台运行。所以你基本上不会有任何看法。但是，除非您对它们执行某些操作，否则您的线程仍将存在并运行。如果您要管理自己的线程，我建议您保留对它们的引用，以便`interrupt()`在需要它们停止时调用它们。（或者如果你扩展了线程，在它的运行方法中有某种退出条件，可以由它上面的一些自定义方法触发）

如果您的应用程序真的被杀死了，那么是的，您的线程也被杀死了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:06:04.323

您可以在代码上覆盖 onPause() 方法，并在触发 onPause() 事件时将数据保存在共享首选项中。

# javascript - 如果已添加到主屏幕，则隐藏工具提示

> ID：12488475
> 
> 赞同：0
> 
> 时间：2012-09-19T04:15:20.860
> 
> 标签：javascript, jquery, iphone, ios

我正在使用[这个插件](http://cubiq.org/add-to-home-screen)来显示将网站添加到主屏幕的工具提示，但是一旦添加，我不希望工具提示再次出现。文档说我应该只添加一个元标记：

```
<meta name="apple-mobile-web-app-capable" content="yes"> 
```

我做到了，但我仍然每次都看到工具提示。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T15:14:55.137

您可以通过设置`addToHomeConfig`之前包含插件的 JS 文件来禁用插件的自动启动。

```
var addToHomeConfig = {
    autostart : false
    //add your other options here
};
//use script tag to include the plugin. 
```

然后，通过插入下面的代码来检测应用程序是否在“Web App Mode”下运行

```
if (("standalone" in window.navigator) && !window.navigator.standalone){
    //show fullscreen tooltip
    addToHome.show();  //this shows the tooltip
} 
```

# c++ - int数组的最大大小？

> ID：12488477
> 
> 赞同：4
> 
> 时间：2012-09-19T04:15:21.963
> 
> 标签：c++, c

> **可能重复：**
> [C 编程，为什么这个大数组声明会产生分段错误？](https://stackoverflow.com/questions/3049934/c-programming-why-does-this-large-array-declaration-produce-a-segmentation-faul)

我写了一个简单的程序。

```
#include <iostream>

using namespace std;

int main(int argc, char* argv[])
{
    int genotype[150000000];
} 
```

但我得到一个奇怪的错误：

> RUN FAILED（退出值1，总时间：131ms）

我怎样才能节省这笔钱`int`？

（我有足够的内存来保存这么多的`int`s而且我的电脑是64位的）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T04:17:54.660

你的堆栈太小了。把它放在堆上，使用新的：

```
int* genotype = new int[150000000]; 
```

我希望以下内容会有所帮助。

*   签名字符：-127 到 127（注意，不是 -128 到 127；这适用于 1 的补码平台）
*   无符号字符：0 到 255
*   “plain” char：-127 到 127 或 0 到 255（取决于默认的 char 符号）
*   签名短：-32767 到 32767
*   无符号短：0 到 65535
*   有符号整数：-32767 到 32767
*   无符号整数：0 到 65535
*   长签名：-2147483647 到 2147483647
*   无符号长：0 到 4294967295
*   签名长长：-9223372036854775807 至 9223372036854775807
*   unsigned long long: 0 到 18446744073709551615

或者您可以使用 limit.h 来了解您的程序所依赖的内容。例如，您将通过以下方式找到 int 的最大范围：

C：

```
#include <limits.h>
const int min_int = INT_MIN;
const int max_int = INT_MAX; 
```

C++

```
#include <limits>
const int min_int = std::numeric_limits<int>::min();
const int max_int = std::numeric_limits<int>::max(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T04:24:14.893

作为链接器选项...

```
/STACK 601048576 //  150000000 * 4 (assume size of int), and 1Mb for general. 
```

但是，嘿..**不要这样做**。我什至不确定会发生什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T04:17:32.133

您在堆栈上分配它，这比堆或静态存储更受限制。

对于 C++，a`std::vector`将是更好的选择。

```
#include <iostream>
#include <vector>

using namespace std;

int main(int argc, char* argv[])
{
    vector<int> genotype(150000000);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T04:30:10.213

如果您想使用动态内存，只需声明一个指向您要在这种情况下分配的类型 int 的指针，然后调用 malloc() 函数，参数是您希望“数组”成为的字节数。在这种情况下，您需要获取单个整数的大小并将其乘以您想要的大小（即单元格的数量）：

确保释放任何你 malloc 的东西，否则你会得到内存泄漏。

# c# - 使用 C# 自动将图像上传到谷歌“按图像搜索”

> ID：12488478
> 
> 赞同：0
> 
> 时间：2012-09-19T04:15:21.290
> 
> 标签：c#, image, search

我想看看如何使用 C# 代码自动将图像上传到谷歌“按图像搜索”。假设我有一张照片“C:\photo.jpg”，我想通过图片上传到谷歌搜索以获取结果页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:33:04.517

由于 Google 尚未发布“按图像搜索”的 API，因此无法以编程方式按图像搜索。

[看这里](https://stackoverflow.com/questions/10141800/google-search-by-image-api)

# clojure - fn 和 fn* 有什么区别？

> ID：12488479
> 
> 赞同：9
> 
> 时间：2012-09-19T04:15:33.737
> 
> 标签：clojure

在 Clojure 中，fn 和 fn* 有什么区别？当我对使用 # 宏创建的函数进行语法引用时，我看到了 fn*。例如，在 REPL 中：

```
user=> `#(inc %)   
(fn* [p1__342__343__auto__] (clojure.core/inc p1__342__343__auto__)) 
```

这是否只是用于调试目的，以识别该函数是由 # 而不是 fn 直接创建的？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-19T04:35:30.920

根据[google groups](https://groups.google.com/forum/?fromgroups=#!msg/clojure/f8iovY57J4k/gO8lhZVq8PEJ) `fn*`上的这篇文章，它是创建函数的原始形式，`fn`是建立在其之上的宏，用于实现更高级别的功能，如解构。

# ios - 获取iOS系统正常运行时间，睡着时不会暂停

> ID：12488481
> 
> 赞同：47
> 
> 时间：2012-09-19T04:15:47.740
> 
> 标签：ios, kernel, clock, uptime

我正在寻找一种在 iOS 上获得绝对、始终增加的系统正常运行时间的方法。

它应该返回自设备上次重新启动以来的时间，并且不受系统日期更改的影响。

我能找到的所有方法要么在设备睡眠时暂停（`CACurrentMediaTime`, `[NSProcessInfo systemUptime]`, `mach_absolute_time`），要么在系统日期更改时更改（`sysctl/KERN_BOOTTIME`）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-19T07:41:02.900

我想我解决了。

`time()`在设备休眠时继续递增，但当然可以由操作系统或用户操作。但是，内核启动时间（系统上次启动时间的时间戳）也会随着系统时钟的变化而变化，因此即使这两个值都不是固定的，它们之间的偏移量也是如此。

```
#include <sys/sysctl.h>

- (time_t)uptime
{
    struct timeval boottime;
    int mib[2] = {CTL_KERN, KERN_BOOTTIME};
    size_t size = sizeof(boottime);
    time_t now;
    time_t uptime = -1;

    (void)time(&now);

    if (sysctl(mib, 2, &boottime, &size, NULL, 0) != -1 && boottime.tv_sec != 0) {
        uptime = now - boottime.tv_sec;
    }

    return uptime;
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2017-07-12T21:47:27.403

正如其中一条评论所说，[POSIX](http://pubs.opengroup.org/onlinepubs/9699919799/functions/clock_gettime.html) `clock_gettime()`是在 iOS 10 和 macOS 10.12 中实现的。当与`CLOCK_MONOTONIC`参数一起使用时，它似乎确实返回了正常运行时间值。但是，文档不能保证这一点：

> 对于此时钟，clock_gettime() 返回的值表示自过去某个未指定时间点（例如，系统启动时间或 Epoch）以来的时间量（以秒和纳秒为单位）。该点在系统启动时间后不会改变。

以及相应 macOS 手册页的摘录：

> **CLOCK_MONOTONIC**单调递增的时钟，跟踪从任意点开始的时间，并在系统休眠时继续递增。
> 
> **CLOCK_MONOTONIC_RAW**单调递增的时钟，跟踪从任意点（如 CLOCK_MONOTONIC）开始的时间。但是，此时钟不受频率或时间调整的影响。不应将其与其他系统时间源进行比较。
> 
> **CLOCK_MONOTONIC_RAW_APPROX**与 CLOCK_MONOTONIC_RAW 类似，但在上下文切换时读取系统缓存的值。这可以更快地读取，但会损失准确性，因为它可能会返回毫秒前的值。
> 
> **CLOCK_UPTIME_RAW**单调递增的时钟，其方式与 CLOCK_MONOTONIC_RAW 相同，但在系统休眠时**不会递增。**在应用适当的 mach_timebase 转换后，返回的值与 mach_absolute_time() 的结果相同。

请注意，`CLOCK_MONOTONIC`以微秒精度返回，而`CLOCK_MONOTONIC_RAW`以纳秒精度返回。

SWIFT代码：

```
func uptime() -> timespec {

    var uptime = timespec()
    if 0 != clock_gettime(CLOCK_MONOTONIC_RAW, &uptime) {
        fatalError("Could not execute clock_gettime, errno: \(errno)")
    }

    return uptime
}

print(uptime()) // timespec(tv_sec: 636705, tv_nsec: 750700397) 
```

对于那些仍然对在 Swift 中获取内核启动时间感兴趣的人：

```
func kernelBootTime() -> timeval {

    var mib = [ CTL_KERN, KERN_BOOTTIME ]
    var bootTime = timeval()
    var bootTimeSize = MemoryLayout<timeval>.size

    if 0 != sysctl(&mib, UInt32(mib.count), &bootTime, &bootTimeSize, nil, 0) {
        fatalError("Could not get boot time, errno: \(errno)")
    }

    return bootTime
}

print(kernelBootTime()) // timeval(tv_sec: 1499259206, tv_usec: 122778) 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-11-08T22:54:16.890

在列出的所有示例中都有一个竞争条件：如果有时间变化（NTP 或用户修改），代码将竞争并且时钟不再是单调的。

正确的实现是：

```
#include <sys/sysctl.h>

static int64_t us_since_boot() {
    struct timeval boottime;
    int mib[2] = {CTL_KERN, KERN_BOOTTIME};
    size_t size = sizeof(boottime);
    int rc = sysctl(mib, 2, &boottime, &size, NULL, 0);
    if (rc != 0) {
      return 0;
    }
    return (int64_t)boottime.tv_sec * 1000000 + (int64_t)boottime.tv_usec;
}

- (int64_t)us_uptime
{
    int64_t before_now;
    int64_t after_now;
    struct timeval now;

    after_now = us_since_boot();
    do {
        before_now = after_now;
        gettimeofday(&now, NULL);
        after_now = us_since_boot();
    } while (after_now != before_now);

    return (int64_t)now.tv_sec * 1000000 + (int64_t)now.tv_usec - before_now;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-03-18T17:50:38.077

如果需要更高的精度，那么下面是接受答案的修改版本。

```
#include <sys/sysctl.h>

- (NSTimeInterval)uptime
{
    struct timeval boottime;
    int mib[2] = {CTL_KERN, KERN_BOOTTIME};
    size_t size = sizeof(boottime);

    struct timeval now;
    struct timezone tz;
    gettimeofday(&now, &tz);

    double uptime = -1;

    if (sysctl(mib, 2, &boottime, &size, NULL, 0) != -1 && boottime.tv_sec != 0)
    {
        uptime = now.tv_sec - boottime.tv_sec;
        uptime += (double)(now.tv_usec - boottime.tv_usec) / 1000000.0;
    }
    return uptime;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-01-30T15:10:34.873

我会评论 Leszek 的回答，但没有足够的代表...... Leszek 的解决方案返回秒。

如果有人需要毫秒精度，以下是 Leszek 答案的修改版本。

```
#include <sys/sysctl.h>

+ (long long int)uptime 
{
    struct timeval boottime;
    int mib[2] = {CTL_KERN, KERN_BOOTTIME};
    size_t size = sizeof(boottime);

    struct timeval now;
    struct timezone tz;
    gettimeofday(&now, &tz);

    long long int uptime = -1;

    if (sysctl(mib, 2, &boottime, &size, NULL, 0) != -1 && boottime.tv_sec != 0)
    {
        uptime = ((long long int)(now.tv_sec - boottime.tv_sec)) * 1000;
        uptime += (now.tv_usec - boottime.tv_usec) / 1000;
    }
    return uptime;
} 
```

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2014-05-07T04:19:00.603

为什么不使用[systemUptime](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSProcessInfo_Class/Reference/Reference.html#//apple_ref/occ/instm/NSProcessInfo/systemUptime)？

systemUptime 返回计算机重新启动后的时间。

*   (NSTimeInterval)systemUptime 返回值 一个 NSTimeInterval，指示计算机重新启动后的时间。

可用性 适用于 iOS 4.0 及更高版本。在 NSProcessInfo.h 中声明

**我已经测试并证明，至少在带有 iOS 7.1.1 的 iPhone 5 上，当您的手机被锁定时，systemUptime 不会停止。所以任何人都不相信这可以自己测试。**

# android - 如何动态获取编辑文本的值，其值应与表中已有的值匹配？

> ID：12488483
> 
> 赞同：0
> 
> 时间：2012-09-19T04:16:07.877
> 
> 标签：android, android-edittext, android-sqlite

例如，假设它：

在试卷中，我必须写出给定问题的答案，但没有选择。所以总的来说，我正在回答所有问题。我的答案可能是错误的或正确的。它应该能够与另一个表中已经存在的已知答案相匹配。

然后结果将是这样的，我的答案和已经存在的正确已知答案将显示在页面中。

因此，对于这样的特定问题，我可能知道其中一个是正确的答案，而我选择了错误的答案，以便能够检查我的能力。

所以问题是TextView，答案是EditText。如果我在 EditText 上写答案，它应该能够用表格中现有的正确答案检查我的答案。

我怎么能在Android上以编程方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:20:38.253

您可以通过在 Button onclick 事件中使用以下内容来获取用户输入的 EditText 值。

```
 String value=edittext.gettext().toString();
if(value.equals(sqlitevalue))
{
  Toast.makeText(getApplicationContext(), "Match !",
                    Toast.LENGTH_LONG).show();
} 
```

**或者**

您还可以检查文本更改事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:25:08.183

用于`editText.getText().toString()`获取答案字段中的文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T05:09:41.117

```
if(edittext.getText().toString().trim().equals(correctanswer))
{
   Toast.makeText(this,"Answer is Correct",20).show();
} 
```

# sql - 使用 powershell 在单个事务中为多个文件调用 sqlcmd

> ID：12488490
> 
> 赞同：3
> 
> 时间：2012-09-19T04:16:39.567
> 
> 标签：sql, powershell, transactions

在网上找到大量示例如何在 powershell 中执行以下操作：

```
Get-ChildItem $databaseFolder -Filter *.sql -Recurse | ForEach-Object { sqlcmd -S  $databaseServer -d $databaseName -E -i $_.FullName } 
```

但是，我想把它归为一个事务，所以如果其中一个 sql 文件失败，那么一切都会回滚。

我也在尝试的一种替代方法是将所有文件内容放在一个完整的脚本变量中：

```
foreach( $file in Get-ChildItem -path $databaseFolder -Filter *.sql | sort-object )
{
    Get-Content $file.fullName | Foreach-Object { $fullSqlScript = $fullSqlScript + $_ + "`n" } ;
} 
```

然后最后像这样执行：

```
 invoke-sqlcmd -ServerInstance $databaseServer -Database $databaseName -Query $fullSqlScript | format-table | out-file -filePath $outFile 
```

$fullSqlScript 还会在顶部插入以下内容：

```
:On Error Exit
 SET XACT_ABORT ON
 GO
 Begin Transaction 
```

并结束：

```
IF XACT_STATE() = 1
BEGIN
    PRINT 'Committing Transaction...'
    COMMIT TRANSACTION
END
ELSE IF XACT_STATE() = -1
BEGIN
    PRINT 'Scripts Failed... Rolling back'
    ROLLBACK TRAN
END 
```

但是，一旦我故意使 sql 脚本失败，整个数据库就会被锁定，就像事务无法回滚一样。我假设这与在 powershell 脚本环境中使用的 invoke-sqlcmd 而不是 Windows 命令提示符中的 sqlcmd 有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T23:27:44.117

我相信它已经解决了。在阅读了以下关于只有使用 sqlcmd 才能执行 On Error Exit 的文章后，我肯定对 powershell invoke-sqlcmd 有疑问[。](http://www.sql-server-performance.com/2012/implementing-transactions-sql-server/)

这是我在这里找到的一些文档，我认为可能与它有关： [http ://technet.microsoft.com/en-us/library/cc281720.aspx](http://technet.microsoft.com/en-us/library/cc281720.aspx)

特别是以下内容：*

> 并非所有 sqlcmd 命令都在 Invoke-Sqlcmd 中实现。未实现的命令包括：​​:!!、:connect、:error、:out、:ed、:list、:listvar、:reset、:perftrace 和 :serverlist。

*

最后，我仍然使用必须读取每个文件的内容然后拥有的策略：

```
:On Error Exit 
```

在脚本的顶部，最终写入包含来自其他文件的所有其他 sql 的输出文件。

然后，我执行以下操作来调用实际的 sqlcmd：

```
$command = "sqlcmd.exe -S " + $databaseServer + " -d " + $databaseName + " -i " + $outFile
Invoke-Expression $command 
```

这似乎工作得很好，一切都会回滚:)如果有人能想到更好的解决方案，请告诉我！

# android - 如何使用 webview 和意图获取字符串？

> ID：12488493
> 
> 赞同：0
> 
> 时间：2012-09-19T04:16:45.340
> 
> 标签：android, android-intent, webview

我正在尝试使用意图和 webview 获取字符串，但该字符串只显示一个字符串，`xc_info`但我想显示所有字符串。

这是我的字符串：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="xc_info">Dirancang untuk lintas alam ringan hingga sedang. Didesain agar efisien dan optimal pada saat mengayuh dan menanjak di jalan aspal hingga jalan tanah pedesaan. Sangat disarankan bagi pemula yang ingin memulai bermain MTB.</string>
    <string name="am_info">Dirancang untuk lintas alam berat seperti naik turun bukit, masuk hutan, melintasi medan berbatu, dan menjelajah medan offroad jarak jauh. Keunggulan all mountain ada pada ketahanan dan kenyamanannya untuk dikendarai. Namun kurang efisien dipakai pada medan tanjakan yang panjang dan curam. Hampir semua sepeda AM bertipe full-suspension.</string>
    <string name="fr_info">Dirancang untuk mampu bertahan menghadapi drop off (lompatan) tinggi dan kondisi ekstrim sejenisnya. Bodinya kuat namun tidak secepat dan selincah all mountain karena bobotnya yang lebih berat. Kurang cocok untuk dipakai jarak jauh dan sangat tidak cocok untuk tanjakan.</string>
    <string name="dh_info">Dirancang agar dapat melaju cepat, aman dan nyaman dalam menuruni bukit dan gunung. Mampu menikung dengan stabil pada kecepatan tinggi dan selalu dilengkapi suspensi belakang untuk meredam benturan yang sering terjadi. Sepeda DH tidak mengutamakan kenyaman mengayuh karena hanya dipakai untuk turun gunung. Sepeda downhill juga lebih mengacu pada lomba, sehingga yang menjadi titik tekan dalam perancangannya adalah bagaimana agar kuat namun dapat melaju dengan cepat. Untuk menuju ke lokasi, para downhiller tidak mengayuh sepeda mereka namun diangkut dengan mobil. Tidak efisien dipergunakan di dalam kota maupun di jalur cross country.</string>
    <string name="dj_info">Nama lainnya adalah trial atau urban MTB. Sepeda jenis ini awalnya didesain untuk anak muda perkotaan yang menggunakan sepeda gunung selain sebagai alat transportasi, ngebut di jalanan kota, juga digunakan untuk melakukan atraksi lompatan tinggi dan ekstrim. Fungsinya mirip BMX namun dengan bentuk yang diperbesar.</string>
    <string name="rb_info">Road Bike lebih akrab dikenal dengan sepeda balap, dengan bentuknya yang khas dan fungsinya lebih untuk medan jalan aspal (road). Road Bike merupakan tipe sepeda yang dikhususkan untuk balapan dijalanan dan dirancang sedemikian mungkin untuk cepat. Dengan ban yang tipis Road Bike melaju cepat dan dengan bantuan pengaturan gigi, Road Bike bisa melaju dengan sangat cepat.</string>

</resources> 
```

这是我使用意图调用 vebview 的活动：

```
public void onClick(DialogInterface dialog, int item) {
    // TODO Auto-generated method stub
    Intent intent = new Intent(Tab_Brand_ListView_Activity.this, Tab_Bike_Information_Activity.class);
    switch (item) {
        case 0:
            intent.putExtra("text", items);
            startActivity(intent);
            break;
        case 1:
            intent.putExtra("text", items);
            startActivity(intent);
            break;
        case 2:
            intent.putExtra("text", items);
            startActivity(intent);
            break;
        case 3:
            intent.putExtra("text", items);
            startActivity(intent);
            break;
        case 4:
            intent.putExtra("text", items);
            startActivity(intent);
            break;
        case 5:
            intent.putExtra("text", items);
            startActivity(intent);
            break;
    }
} 
```

我想要的是显示所有字符串，但实际上字符串只显示一个字符串。当我单击我想要的列表时，如何获得适当的字符串？多谢。

这是日志猫：

```
09-19 12:15:59.889: E/AndroidRuntime(2611): FATAL EXCEPTION: main
09-19 12:15:59.889: E/AndroidRuntime(2611): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.wilis.hellotabwidget/com.wilis.hellotabwidget.Tab_Bike_Information_Activity}: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
09-19 12:15:59.889: E/AndroidRuntime(2611):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
09-19 12:15:59.889: E/AndroidRuntime(2611):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
09-19 12:15:59.889: E/AndroidRuntime(2611):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
09-19 12:15:59.889: E/AndroidRuntime(2611):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
09-19 12:15:59.889: E/AndroidRuntime(2611):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-19 12:15:59.889: E/AndroidRuntime(2611):     at android.os.Looper.loop(Looper.java:130)
09-19 12:15:59.889: E/AndroidRuntime(2611):     at android.app.ActivityThread.main(ActivityThread.java:3687)
09-19 12:15:59.889: E/AndroidRuntime(2611):     at java.lang.reflect.Method.invokeNative(Native Method)
09-19 12:15:59.889: E/AndroidRuntime(2611):     at java.lang.reflect.Method.invoke(Method.java:507)
09-19 12:15:59.889: E/AndroidRuntime(2611):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
09-19 12:15:59.889: E/AndroidRuntime(2611):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
09-19 12:15:59.889: E/AndroidRuntime(2611):     at dalvik.system.NativeStart.main(Native Method)
09-19 12:15:59.889: E/AndroidRuntime(2611): Caused by: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
09-19 12:15:59.889: E/AndroidRuntime(2611):     at android.view.ViewGroup.addViewInner(ViewGroup.java:1976)
09-19 12:15:59.889: E/AndroidRuntime(2611):     at android.view.ViewGroup.addView(ViewGroup.java:1871)
09-19 12:15:59.889: E/AndroidRuntime(2611):     at android.view.ViewGroup.addView(ViewGroup.java:1828)
09-19 12:15:59.889: E/AndroidRuntime(2611):     at android.view.ViewGroup.addView(ViewGroup.java:1808)
09-19 12:15:59.889: E/AndroidRuntime(2611):     at com.wilis.hellotabwidget.Tab_Bike_Information_Activity.onCreate(Tab_Bike_Information_Activity.java:32)
09-19 12:15:59.889: E/AndroidRuntime(2611):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-19 12:15:59.889: E/AndroidRuntime(2611):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
09-19 12:15:59.889: E/AndroidRuntime(2611):     ... 11 more 
```

这是我的活动：

```
public class Tab_Bike_Information_Activity extends Activity {
WebView mWebView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tab_bike_information);

    final ActionBar actionBar = (ActionBar) findViewById(R.id.actionbar);
    actionBar.setTitle(getString(R.string.app_name));

    int index = getIntent().getIntExtra("text", 0);

    mWebView = (WebView) findViewById(R.id.webview);

    String temp = "<html><body>" + "<p align=\"justify\">"
            + getString(R.string.xc_info + index) + "</p> " + "</body></html>";
    mWebView.loadData(temp, "text/html", "utf-8"); 
        mWebView.addView(mWebView);

} 
```

这是我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.wilis.hellotabwidget"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="11" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".SplashScreen_Activity"
        android:label="@string/app_name"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Home_Activity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <activity
        android:name=".Home"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <activity
        android:name=".Tab_Bike_Activity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <activity
        android:name=".Tab_Bike_Information_Activity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <activity
        android:name=".Tab_Shop_Repair_ListView_Activity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <activity
        android:name=".ListViewActivity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <activity
        android:name=".Tab_Brand_ListView_Activity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <activity
        android:name=".BikeType_ListView_Activity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <activity
        android:name=".search_activity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <activity
        android:name=".Tab_Information_Activity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <activity
        android:name=".coba_activity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <activity
        android:name=".Home_Gridview"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:05:15.153

在您的 onClick 方法中，您将一个整数放入意图中，但您尝试获取一个字符串，这是不正确的。

```
intent.putExtra("text", items);
String temp = getIntent().getExtras().getString("text"); 
```

我认为您希望在用户单击每个项目时从意图中获得不同的字符串。你可以这样做

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tab_bike_information);

    final ActionBar actionBar = (ActionBar) findViewById(R.id.actionbar);
    actionBar.setTitle(getString(R.string.app_name));

    Int index = getIntent().getIntExtra("text", 0);

    mWebView = (WebView) findViewById(R.id.webview);

    String temp = "<html><body>" + "<p align=\"justify\">"
        + getString(R.string.xc_info + index) + "</p> " + "</body></html>";
    mWebView.loadData(temp, "text/html", "utf-8"); 
    //mWebView.addView(mWebView);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:35:32.293

在所有 case 语句中写在代码行下方，并且只在`R.string.xc_info`.

```
intent.putExtra("text", getResources().getString(R.string.xc_info)); 
```

代替

```
intent.putExtra("text", items); 
```

# matlab - 删除重复条目——matlab中的变体

> ID：12488497
> 
> 赞同：3
> 
> 时间：2012-09-19T04:17:01.537
> 
> 标签：matlab, duplicate-removal, duplicate-data

我有一个矩阵部分，如下所示：

```
4080530 92 -- rid of this 
4085908 92 -- keep this
4086589 93 -- rid
4091453 93 -- rid
4104393 93 -- rid
4112841 93 -- rid
4122958 93 -- rid
4130815 93 -- rid
4142617 93 -- rid
4152386 93 -- keep this
4230963 94
4242541 94
4243222 95
4253979 95 
```

在 col 2 中可以看到一些条目是重复的。我想摆脱其中一些重复的条目。在每种情况下，我只想保留最后一个值。重复值的次数不需要固定，因此问题。关于我如何解决这个问题的任何想法。

我目前正在使用这里的一些想法来修复[这个链接](http://www.mathworks.ch/matlabcentral/answers/19042-finding-duplicate-values-per-column)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T04:20:02.010

这将做到这一点：

```
[~, I] = unique(A(:,2)),     
B = A(I,:); 
```

分解：

*   该`unique`命令将输出 的第二列的唯一排序版本`A`及其索引 ( `I`)
*   这些索引可用于从`A`您想要的行中提取行。

# javascript - 使用 WSH 脚本获取临时文件夹

> ID：12488503
> 
> 赞同：1
> 
> 时间：2012-09-19T04:17:28.357
> 
> 标签：javascript, wsh

如何使用 WSH 脚本获取临时文件夹路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:43:17.487

将此脚本另存为 tempFolder.js 并双击执行。

```
var WshShell = WScript.CreateObject("WScript.Shell");
var temp = WshShell.ExpandEnvironmentStrings("%TEMP%");
WScript.Echo(temp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T16:43:06.210

```
Set WshShell = CreateObject("WScript.Shell")
Set WshEnv = WshShell.Environment

strVar1="TEMP"
strVar2="TMP"

WScript.Echo ".... System   ............................. Environment " & strVar1 & "," & strVar2
WScript.Echo WshShell.Environment("System").Item(strVar1)
WScript.Echo WshShell.Environment("System").Item(strVar2)

WScript.Echo ".... User     ............................. Environment " & strVar1 & "," & strVar2
WScript.Echo WshShell.Environment("User").Item(strVar1)
WScript.Echo WshShell.Environment("User").Item(strVar2)

WScript.Echo ".... Volatile ............................. Environment " & strVar1 & "," & strVar2
WScript.Echo WshShell.Environment("Volatile").Item(strVar1)
WScript.Echo WshShell.Environment("Volatile").Item(strVar2)

WScript.Echo ".... Process  ............................. Environment " & strVar1 & "," & strVar2
WScript.Echo WshShell.Environment("Process").Item(strVar1)
WScript.Echo WshShell.Environment("Process").Item(strVar2)

WScript.Echo "....          ............................. Environment " & strVar1 & "," & strVar2
WScript.Echo WshShell.Environment.Item(strVar1)
WScript.Echo WshShell.Environment.Item(strVar2)

WScript.Echo "....          ................ ExpandEnvironmentStrings " & strVar1 & "," & strVar2
WScript.Echo WshShell.ExpandEnvironmentStrings("%"& strVar1 &"%")
WScript.Echo WshShell.ExpandEnvironmentStrings("%"& strVar2 &"%") 
```

# arrays - 将链表作为数组传递给 CUDA

> ID：12488505
> 
> 赞同：0
> 
> 时间：2012-09-19T04:17:36.453
> 
> 标签：arrays, cuda, linked-list

我正在尝试将一些以链表形式的数据传输到我的 GPGPU。我是否需要进行与节点数量一样多的转移，还是有更好更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T13:48:07.273

使用 Thrust 库时，您可以从迭代器范围生成设备向量。在以下站点，他们为此案例提供了一个示例

```
#include <thrust/device_vector.h>
#include <thrust/copy.h>
#include <list>
#include <vector>

int main(void)
{
    // create an STL list with 4 values
    std::list<int> stl_list;

    stl_list.push_back(10);
    stl_list.push_back(20);
    stl_list.push_back(30);
    stl_list.push_back(40);

    // initialize a device_vector with the list
    thrust::device_vector<int> D(stl_list.begin(), stl_list.end());

    // copy a device_vector into an STL vector
    std::vector<int> stl_vector(D.size());
    thrust::copy(D.begin(), D.end(), stl_vector.begin());

    return 0;
} 
```

[https://github.com/thrust/thrust/wiki/Quick-Start-Guide](https://github.com/thrust/thrust/wiki/Quick-Start-Guide)

查看标题为“迭代器和静态调度”的部分。

您可以使用 STL 的算法库执行类似的操作。

```
std::list<int> stl_list;
stl_list.push_back(10);
...
float *myarray = new float[stl_list.size()];
float *mydevicearray;
CUDA_SAFE_CALL(cudaMalloc(&mydevicearray, sizeof(float)*stl_list.size()));
std::copy(stl_list.begin(), stl_list.end(), myarray);
CUDA_SAFE_CALL(cudaMemcpy(myarray, mydevicearray, sizeof(float)*stl_list.size(), cudaMemcpyHostToDevice)); 
```

这两个示例应该只进行一次 memcopy 操作，因为将内存复制到 CUDA 设备的成本很高，而且对列表中的每个元素都这样做是不合逻辑的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:31:16.387

如果要将数据从链表传输到数组（到 GPU），您只需将节点中的值发送到数组 (GPU)。这是一个简单的。您可以使用`cudaMalloc()`节点数的大小。

如果您尝试将数据从链表传输到链表（到 GPU），那么创建节点和传输数据是一个忙碌的过程。您可以调用不同的函数来创建节点、链接节点等。（不推荐，因为链表比并行更串行）。

建议选择第一种情况。它很简单，您想要的只是数据传输。

尝试数据结构的[推力](http://code.google.com/p/thrust)库。

# java - 以空格作为输入读取字符串的不同方法？

> ID：12488507
> 
> 赞同：-5
> 
> 时间：2012-09-19T04:17:42.233
> 
> 标签：java, string

我有一个字符串

> 01 01 01 02 01 01 20 00 40 0b 00 01 ef cc 45 4e 47 00 1a 02

我怎样才能把它读作输入？我知道声明

```
String s = "01 01 01 02 01 01  20 00 40 0b 00 01 ef cc 45 4e  47 00 1a 02" 
```

显然会抛出错误，那么我可以使用 Java 读取此输入（作为参数传递）的不同可能方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T04:22:37.843

我假设您想将其作为十六进制数据读取，而不是作为字符串读取。

首先删除字符串中的空格，所以它应该看起来像“0101010201012000400b0001efcc454e47001a02”

然后，创建一个 BigInteger 来保存它，如下所示：

```
BigInteger hex = new BigInteger(s, 16); 
```

现在您应该将十六进制值存储在变量 hex 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T04:22:29.527

如果您将它们作为变量参数传递，那么您可以像这样得到它：

```
public static void main(String[] args) {
    if(args.length() > 0) {
        String myInput = args[0]; //Here is where you get them...
        //Process myInput
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T04:34:01.517

这是你的神秘号码

```
import java.math.BigInteger;
class Main {
  public static void main(String[] args) {
    System.out.println(new BigInteger("01 01 01 02 01 01 20 00 40 0b 00 01 ef cc 45 4e 47 00 1a 02".replaceAll("\\s+", ""), 16));
  }
} 
```

它是

```
5731379310208105099069359549013101637718252034 
```

[请参阅http://ideone.com/uGh17](http://ideone.com/uGh17)上的现场演示

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T04:20:41.840

```
String s = "01 01 01 02 01 01 20 00 40 0b 00 01 ef cc 45 4e 47 00 1a 02"; 
```

应该管用...

# c# - 格式化多行文本框中显示的数据

> ID：12488514
> 
> 赞同：2
> 
> 时间：2012-09-19T04:18:25.663
> 
> 标签：c#, winforms

我是 C# 的新手编码员，目前正在使用报告生成器。我正在从文本文件中读取数据并在多行文本框中显示结果。我目前在格式化数据时遇到问题，因此它看起来既整洁又专业。我正在添加带有空格的字符串以进行分隔，但它使数据看起来不均匀。

如下图所示，是否可以在多行文本框中显示数据？另外，当表单启动时，是否可以用标题填充多行文本框？

![在此处输入图像描述](../Images/ba0e271420afdd26b047fad6a053a7a8.png)

**代码**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private static string newLine = Environment.NewLine;

        private void Form1_Load(object sender, EventArgs e)
        {

        }

     private void button1_Click(object sender, EventArgs e)
        {
            {

        double grandtotal = 0.0;
        int totalcount = 0;

        string space2 = "          ";
        string space3 = "                    ";

        for( int i = 0; i < 100; i++ ) {
        grandtotal += totalSales[i];
            totalcount += count[i];
         }
        StringBuilder sb = new StringBuilder();

        textBox1.AppendText( "Product Name" + space2 + "Total Sales" + space3 + "Average" + newLine );

        for( int i = 0; i < 100; i++ ) {
            if( productName[i] != null ) {
            if( totalSales[i] != 0 ) {
                textBox1.AppendText( productName[i] + space3 
                + totalSales[i] + space3 
                + ( totalSales[i] / count[i] ).ToString( "#.##" ) + newLine );
                }
         }
    }

        textBox1.AppendText( "Grand Total" + space3 + grandtotal 
        + space3 + ( grandtotal / totalcount ).ToString( "#.##" ) + newLine );

        }
    }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:35:12.707

您可以使用 String.Format 方法。

这是可以指导您的链接[http://www.dotnetperls.com/string-format](http://www.dotnetperls.com/string-format)。

# ios - [[CCDirector sharedDirector]winSize] 错误

> ID：12488515
> 
> 赞同：7
> 
> 时间：2012-09-19T04:18:26.677
> 
> 标签：ios, cocos2d-iphone

当我`CGSize winSize = [[CCDirector sharedDirector]winSize];`从根视图控制器的 init 方法调用 cocos2d 并在它报告屏幕为纵向时 nslog "winSize" 时，实际上它是横向的。当您从 -(void)onEnter 或从根视图加载的视图中调用它时，不会发生此错误。我看到其他一些人在谷歌搜索问题后遇到了这个问题，但没有人真正知道如何解决它，或者答案不适用于我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-19T05:11:18.707

是的，这是 cocos2D 2.0 中的严重问题之一。当我尝试第一个场景的 init 方法时。

而不是 init 尝试 onEnter。

```
-(void)onEnter
{
  [super onEnter];
  CGSize winSize = [[CCDirector sharedDirector]winSize];

  //Place all your init functions here.
} 
```

注意：在 iphone5 中，缺少 Default-568h@2x.png 也会导致尺寸错误！！！Cocos2d 3.0：

> CGSize s = [[CCDirector sharedDirector] viewSize];

# c++ - 如果表达式的中间结果溢出，它是未定义的行为吗？

> ID：12488522
> 
> 赞同：5
> 
> 时间：2012-09-19T04:19:28.763
> 
> 标签：c++, integer-overflow

这个问题是另一个[SO question](https://stackoverflow.com/questions/12487923/why-overflow-happens-on-calculation-depending-on-the-data-type-when-the-type-whe)的结果。

**示例代码**

```
#include <iostream>

int main()
{
    unsigned long b = 35000000;
    int i = 100;
    int j = 30000000;
    unsigned long n = ( i * j ) / b; // #1
    unsigned long m = ( 100 * 30000000 ) / b; // #2
    std::cout << n << std::endl;
    std::cout << m << std::endl;
} 
```

**输出**

> 85
> 85

编译此代码`g++ -std=c++11 -Wall -pedantic -O0 -Wextra`会给出以下警告：

`9:28: warning: integer overflow in expression [-Woverflow]`

**问题**

1.  我是否正确地认为`#1`并`#2`调用未定义的行为，因为中间结果`100 * 30000000`不适合`int`？还是我看到的输出定义明确？

2.  为什么我只收到警告`#2`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T04:22:26.843

是的，这是未定义的行为，如果`unsigned long`是 64 位类型，您得到的结果通常会有所不同。

¹ 它是 UB，因此无法保证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T04:24:58.010

1）是的，这是未定义的行为。

2）因为#1涉及变量（不是常量），所以编译器一般不知道它是否会溢出（虽然在这种情况下它会溢出，我不知道为什么它没有警告）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T04:26:31.100

## 中间结果

是的，这是未定义的行为。如果你只是停在那里`return m`怎么办？编译器需要从 A 点到 B 点，并且您已经告诉它通过进行计算来做到这一点（这是不可能的）。编译器可能会选择以不会溢出的方式优化此语句，但据我所知，该标准不需要优化器做任何事情。

## 为什么当它们是变量时没有错误？

您明确告诉 gcc 根本不要优化 ( `-O0`)，所以我的假设是它不知道那个时候`i`and的值`j`。通常你会因为[不断的折叠](http://en.wikipedia.org/wiki/Constant_folding)而学习这些值，但就像我说的，你告诉它不要优化。

如果你重新运行它并且它仍然没有提到它，那么这个警告也有可能在优化器运行之前生成，所以它只是不够聪明，无法在这一步进行持续折叠。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T05:13:58.420

您会收到两个警告，因为编译器知道操作数中的值。输出是正确的，因为两者都使用`/b`无符号长。要被除的临时值`b`必须保持更大或相等的数据类型范围，`( i * j )`或者`( 100 * 30000000 )`存储在与要被除的值具有相同数据类型范围的 CPU 寄存器中，如果`b`是，`int`则临时结果将是 a `int`，因为`b`是 ulong , int 不能除以 ulong，临时值存储到一个 ulong 中。

如果它溢出是未定义的行为，但在这些情况下它不会溢出

具有相同结构的程序，仅更改`b`为`int`.s 代码将只有两行。

```
cltd 
idivl   (%ecx) 
```

到 b = int

```
movl    $0, 
%edx divl   (%ecx) 
```

到 b = 无符号长，

idivl 执行有符号除法，将值存储为有符号
divl 执行无符号除法，将值存储为无符号

所以你是对的，操作确实溢出，输出是正确的，因为除法操作。

[idivl 和 divl 有什么区别？](https://stackoverflow.com/questions/12489098/what-is-the-difference-of-idivl-and-divl)

[https://stackoverflow.com/a/12488534/1513286](https://stackoverflow.com/a/12488534/1513286)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T05:38:50.470

至于 5/4，结果是未定义的行为。

但是请注意，如果您将类型更改为无符号（对于常量只需添加`u`后缀），则不仅值适合，而且根据 3.9.1/4，算术变为模算术，即使对于较大的中间值，结果也可以完美定义**不**符合类型的值。

# google-analytics - 网站在 Google Analytics（分析）报告中显示为其自己域的引荐来源。为什么？

> ID：12488523
> 
> 赞同：4
> 
> 时间：2012-09-19T04:19:29.907
> 
> 标签：google-analytics

我管理的一个网站遇到了两个 GA 报告问题，但我不确定如何解决：

1.  该网站在 GA 报告中**显示为其自己的域的引荐来源。**
2.  我的目标完成（第 3 方域外电子商务购物车上的销售转化）都**将网站的域显示为“来源”**，而我显然希望看到真正的“推荐人”发送导致目标完成的流量。

我对可能发生这种情况的潜在原因的看法：

我正在使用内部链接的绝对路径，如下所示：

```
<a href="http://example.com/contact.html"> 
```

与

```
<a href="/contact.html"> 
```

会是这样吗？用户在购买之前经常会在内部点击。

此外，在几个高流量页面上，我正在使用 javascript 历史反向链接，如下所示::

```
<a href="javascript: history.go(-1)">go back</a> 
```

最后，我正在对“添加到购物车”流量点击进行 301 重定向，以便

```
http://example.com/add_to_cart 
```

重定向到：

```
http://paymentprocessor.com/ugly_url/cart_page.html 
```

（虽然这是一个外部 3rd 方域，但我的 GA 代码仍然在那里触发）

任何猜测为什么我会遇到这里顶部所述的问题？...感谢所有 GA 向导。

* * *

**更新更新更新**

感谢爱德华多的出色回答。

想我现在可以分享到 3rd 方 ecomm 站点的 href 文本链接我正在通过类使用 jquery 跟踪事件，所以我的 _gaq.push 跟踪点击事件并将 cookie 数据从我的站点复制到第三方站点看起来像这样：

```
$('a.index_addtocart_smallest').click(function(){
    _gaq.push(['_trackEvent', 'Outbound Links', 'index_addtocart_smallest', 'buy_click'],['_link', 'ssl.thirdpartyecom.net/order/']);           
    }); 
```

当我在 HTML 中使用表单操作“添加到购物车”提交时，如下所示：

```
<form action="http://example.com/add_to_cart" method="post" onsubmit="that=this;_gaq.push(['_trackEvent','Outbound Links','index_big_buy_button', 'buy_click'],['_linkByPost', this]);setTimeout(function() { that.submit() }, 100);return false;"> 
```

... 跟踪事件，并将现有 cookie 发布到第三方服务器，同时为点击添加延迟以确保它被 GA 捕获。

在我的情况下，我使用异步语法在域和另一个域上的子目录之间进行跟踪：[https ://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#domainAndSubDirectory](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#domainAndSubDirectory)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T09:49:41.077

在您的情况下，很明显问题出在购物车上。当您将用户重定向到您的购物车域时，他会登陆一个新域并且无法访问他在您网站上使用的 cookie。因为 GA 需要在购物车站点上创建一组新的 cookie，所以它还创建了一个新的访问者 ID 和一个新的访问，该访问将是一个自我推荐，因为从 GA 的角度来看，访问者来自此。

谷歌分析保持 cookie 的状态，__utm*。因此，在更改域时，我们需要将 cookie 从您当前所在的域复制到您要移动到的域中。谷歌分析 API 提供了一些方法来实现这一点。这通常称为“跨域跟踪”或“多域跟踪”。Google Analytics 文档[很好地解释了如何实现它](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#multipleDomains)。您还可以在 Stack Overflow 上搜索与跨域跟踪相关的几个问题，人们似乎很难做到正确。

您可以自由使用绝对或相对链接，这对 Google Analytics 没有任何影响。

Javascript 重定向通常是可以的。即使在某些情况下它们确实会使事情变得更加困难，但您使用后退按钮的用例很好，根本不会引起任何问题。当然，如果 javascript 重定向更改了您所在的域，那么您又回到了同样的问题并且需要实现跨域跟踪。

有时内部推荐人是合法的。合法自我推荐的一个例子：当用户访问您网站上的一个页面并在那里停留超过 30 分钟时，然后导航到第二个页面。在这种情况下，在 30 分钟后访问到期，当他导航到第二个页面时，将创建一个新访问。此新访问将是自我推荐，第二页将被视为登录页面。起初这可能看起来很奇怪，但这是自我推荐，通常没问题。

# php - 如何在 phpBB3 中阻止垃圾邮件发送者？

> ID：12488527
> 
> 赞同：4
> 
> 时间：2012-09-19T04:20:02.807
> 
> 标签：php, spam, spam-prevention, phpbb3

我有一个 phpBB3 网站，该网站被垃圾邮件发送过一次或两次。用户会将胡言乱语发布到一些论坛中......我注意到，进去删除它，没什么大不了的。

在很大程度上让我们保持清洁的是 - 该网站要求用户在被允许发布之前注册并确认他们的电子邮件。这阻止了机器人，但这似乎是一个真实的人，正在经历激活他们的帐户、导航到特定主题以及发布他们无用的烦人消息的动作。

我不希望我的真实用户被要求做任何额外的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T16:57:46.123

垃圾邮件预防是一个多层次的过程。我在下面列出的 MOD 和设置对我有用，但不要以任何方式阻止所有垃圾邮件。正如您所提到的，似乎有人在幕后注册了一些帐户。这是真的。后来，该人返回或让自动机器人使用他的凭据发布垃圾邮件。在这些情况下，您唯一的选择是做出反应。你将无法阻止一切。

正如评论中提到的，第一步是为第一个帖子设置批准队列。在 PHPBB 3.0.3 中，添加了此选项。

*   浏览到您的管理控制面板
*   选择常规选项卡
*   在左侧，在 Board Configuration 下，选择 Post Settings
*   找到`Enable Queued Posts`选项并将其设置为 1

您（或您的版主）必须批准这些帖子才能显示。一旦第一个帖子被批准，用户将能够正常发布。

下一个选项涉及对电路板本身的修改。一种这样的修改是[反垃圾邮件 ACP](http://www.lithiumstudios.org/phpBB3/viewtopic.php?f=31&t=941)。在其发布页面上，列出了以下功能：

*   Akismet 集成
*   一键禁止
*   停止论坛垃圾邮件集成
*   垃圾邮件单词捕捉器（如单词审查器，如果帖子包含列表中的任何单词，则使少于 X 个帖子的作者的帖子需要批准）
*   禁用某些个人资料字段，直到发布 X 个帖子（或要求或始终禁用）
*   用户标记（允许您标记用户（并在他们被标记后取消标记）。标记后，该用户对其个人资料执行的操作，或编辑帖子或添加帖子将列在 ACP 的日志中。）
*   垃圾邮件日志
*   知识产权搜索

它还列出了它“它有能力完全阻止 phpBB3 垃圾邮件”。把它和一大块盐一起吃。我已经在我的板上使用它几年了。它确实*减少*了我每天收到的垃圾邮件数量，但并不能完全阻止它。

第三个选项是[高级块 MOD](https://www.phpbb.com/customise/db/mod/advanced_block_mod/)。这会将多个黑名单添加到您的论坛。它允许您向特定的黑名单添加某些权重（您可以选择最喜欢的），但确实有一组不错的默认值，我建议您使用一段时间。它`Block Log`也为您的 ACP 添加了一个。你会很快看到有很多机器人被这个模组阻止了。我在写这篇文章时注意到很快就会有一个新版本发布，但还没有通过 PHPBB 的验证过程。更多信息，包括*这些*功能的屏幕截图，请[点击此处](https://www.phpbb.com/customise/db/mod/advanced_block_mod/faq/f_614)。

使用组合（或全部 3 个）将显着降低垃圾邮件出现在您的板上的比率。正如我之前所说，它不会消除它，但它会使它更易于管理。您的现有用户无需对这 3 项更改执行任何其他操作。新用户将有一个额外的步骤 - 他们将不得不等待他们的第一个帖子被批准。在安装和配置之后，管理员也不需要做任何事情，除了监控日志以查看是否需要修改任何配置选项。

# iphone - 适用于 iPhone 5- 1136 x 640 分辨率的 iOS 模拟器

> ID：12488532
> 
> 赞同：4
> 
> 时间：2012-09-19T04:20:33.603
> 
> 标签：iphone, ios, xcode

> **可能重复：**
> [如何为 iPhone 5 测试应用程序](https://stackoverflow.com/questions/12434011/how-to-test-apps-for-iphone-5)

在 xcode 4.2 及更高版本中，我们可以找到用于视网膜显示和非视网膜显示的设备。这意味着“960 x 640 像素分辨率，326 ppi”和“480 x 320 像素分辨率，163 ppi”作为 iOS 模拟器。
（在 iOS 模拟器菜单栏中，`Hardware > Device > iPad/iPhone/iPhone(Retina)`）。

如何从模拟器中为新 iPhone 5 选择设备（1136 x 640 像素分辨率，326 ppi）..？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T17:16:24.407

Richard 和 NSPostWhenIdle 都是正确的。您需要更新到 Xcode 4.5 GM，然后您会看到“iPhone (Retina 4-inch)”的选项，即 iPhone 5 显示屏。

# mysql - 从 Infobright 上的脚本运行时加载 DATA INFILE 错误

> ID：12488533
> 
> 赞同：0
> 
> 时间：2012-09-19T04:20:34.537
> 
> 标签：mysql, shell

在 infobright 提示符下运行时，查询执行得非常好：

```
mysql> LOAD DATA INFILE '/tmp/test.agg' IGNORE INTO TABLE tb_message_content FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\"' ESCAPED BY '\\'LINES TERMINATED BY '\n';
Query OK, 2 rows affected 
```

但是，从 shell 脚本运行时，相同的查询会出错：这就是脚本解释查询的方式

```
mysql -u amr_ts_scripts -pamr_ts_scripts MVR4_ETL_DB -S /tmp/mysql-ib.sock -N -e 
$'LOAD DATA INFILE \'/tmp/test.agg\'
 IGNORE INTO TABLE tb_message_content \n      
 FIELDS TERMINATED BY \',\' \n             
 OPTIONALLY ENCLOSED BY \'"\' \n             
 ESCAPED BY \'\\\'\n      
 LINES TERMINATED BY \'\\n\';' 
```

引用的错误是：

```
ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''\'
      LINES TERMINATED BY ''' at line 4
PAGER set to stdout 
```

谁能指出我面临的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:44:31.810

```
stmt="LOAD DATA INFILE '$1' IGNORE INTO TABLE $2 FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\"' ESCAPED BY '\\\\' LINES TERMINATED BY '\n'; 
```

脚本中的上述语句有效，因为需要 ESCAPED BY '\\' 来转义每个 '\'。

# ssis - SSIS - 仅在没有锁定文件时复制文件

> ID：12488545
> 
> 赞同：0
> 
> 时间：2012-09-19T04:22:10.453
> 
> 标签：ssis, file-copying

我有一个 SSIS 作业，它将输入文件从 FTP 服务器复制到本地服务器并进行大量处理。这些输入文件非常大，当外部供应商将它们推送到我们的 FTP 服务器时，大约需要 5 分钟才能接收到文件的全部内容。

当我的包复制文件时；我想确保不复制部分文件；即，当文件仍被推送到 FTP 服务器时，我不想复制文件。我想我可以通过在复制文件之前检查文件锁定来实现这一点，如果有任何锁定等待 10 分钟再试一次。谁能告诉我如何检查文件锁？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:41:19.217

**编辑**

在下面的解决方案中，我正在检查本地文件锁。在所述情况下的解决方案是要求供应商在完整文件加载并准备好下载后在 FTP 服务器上发布一个小标志文件。在开始下载完整文件之前检查标志文件是否存在。

**结束编辑**

我在脚本任务中使用了以下内容来检查文件锁：

```
 public void Main()
    {
        // TODO: Add your code here
        string strTracePath = Dts.Variables["uv_TraceFilePath"].Value.ToString();
        FileInfo fInfo = new FileInfo(strTracePath);
        try
        {
            Dts.Variables["uv_TraceFileSize"].Value = fInfo.Length;
            fInfo.MoveTo(strTracePath + "_old");
            FileInfo fInfoOld = new FileInfo(strTracePath + "_old");
            fInfoOld.MoveTo(strTracePath);

            Dts.Variables["uv_ProcessTraceFile"].Value = true;
        }
        catch
        {
            Dts.Variables["uv_ProcessTraceFile"].Value = false;
        }
        Dts.TaskResult = (int)ScriptResults.Success;
    } 
```

该任务在重命名文件时尝试移动文件（到同一文件夹）。如果成功，则将其移回原始名称。成功时，它将变量设置为 true。失败时，它将变量设置为 false。完成这项任务后，我使用条件优先约束来决定下一步该做什么。为了完成这项工作，我`Using System.IO;`在脚本顶部添加了一个声明。

# web-services - 使用 Axis2 和类创建 Java Web 服务

> ID：12488554
> 
> 赞同：1
> 
> 时间：2012-09-19T04:23:01.417
> 
> 标签：web-services, axis2

这周我正在学习“Web 服务”，并找到了很好的教程和示例代码。

[IBM developerWorks](http://www.ibm.com/developerworks/webservices/library/ws-devaxis2part1/index.html)

在3的页面，你可以看到CheckCard.java文件，它提供了服务器端的Web Service。

该文件包含一些方法，例如

```
public static boolean validCC(String number)
public static boolean validCCNumber(String n)
public static int getCardID(String number)
public static boolean isNumber(String n)
public static String getCardName(int id)
public String doCheck(String aCard) 
```

和`'doCheck()'`方法是我可以从客户端调用的方法。我想问你的是为什么其他方法都是静态的？这是一个规则还是应该是静态的？

Web 服务对于初学者来说非常复杂，我只是想知道每一件小事.. 有人能给我一个线索吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:31:52.490

在这种情况下，WebMethod`doCheck(String Card)`用于远程方法调用，不能是静态的。这样做违背了依赖代理类的 Web 服务模型，从本质上讲，代理类需要实例化为真正的对象才能调用 Web 服务。

这就是为什么其他方法都是静态的，不能作为服务公开。

# bash - bash循环跳过注释行

> ID：12488556
> 
> 赞同：14
> 
> 时间：2012-09-19T04:23:11.137
> 
> 标签：bash, shell

我正在循环文件中的行。我只需要跳过以“#”开头的行。我怎么做？

```
 #!/bin/sh 

 while read line; do
    if ["$line doesn't start with #"];then
     echo "line";
    fi
 done < /tmp/myfile 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-19T04:27:27.610

```
while read line; do
  case "$line" in \#*) continue ;; esac
  ...
done < /tmp/my/input 
```

然而，坦率地说，转向`grep`：

```
grep -v '^#' < /tmp/myfile | { while read line; ...; done; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-16T16:29:20.277

这是一个老问题，但我最近偶然发现了这个问题，所以我也想分享我的解决方案。

如果你不反对使用一些 python 技巧，这里是：

让它成为我们的名为“my_file.txt”的文件：

```
this line will print
this will also print # but this will not
# this wont print either
      # this may or may not be printed, depending on the script used, see below 
```

让它成为我们的 bash 脚本，名为“my_script.sh”：

```
#!/bin/sh

line_sanitizer="""import sys
with open(sys.argv[1], 'r') as f:
    for l in f.read().splitlines():
        line = l.split('#')[0].strip()
        if line:
            print(line)
"""
echo $(python -c "$line_sanitizer" ./my_file.txt) 
```

调用脚本将产生类似于：

```
$ ./my_script.sh
this line will print
this will also print 
```

**注意：**空白行没有打印

如果您想要空行，您可以将脚本更改为：

```
#!/bin/sh

line_sanitizer="""import sys
with open(sys.argv[1], 'r') as f:
    for l in f.read().splitlines():
        line = l.split('#')[0]
        if line:
            print(line)
"""
echo $(python -c "$line_sanitizer" ./my_file.txt) 
```

调用此脚本将产生类似于：

```
$ ./my_script.sh
this line will print
this will also print 
```

# java-ee-6 - Hazelcast 地图商店类的 CDI Bean 注入失败

> ID：12488557
> 
> 赞同：0
> 
> 时间：2012-09-19T04:23:22.007
> 
> 标签：java-ee-6, cdi, hazelcast

我正在使用 JBoss AS 7.1 并利用上下文和依赖注入。这里没有弹簧。

我的问题是如何将依赖项注入到 hazelcast MapStore 实现中？可能有一种程序化的方式吗？任何帮助表示赞赏。

例如

```
public class ClientRepositoryCache implements MapStore<Integer, ClientItem> {

    @Inject
    ClientRepository repository;

    @Override
    public ClientItem load(Integer clientNumber) {
        return repository.getClientById(clientNumber);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T05:39:03.153

目前 Hazelcast 仅使用 Spring 支持依赖注入。相反，您可以使用`MapStoreFactory`which 来创建您自己的 MapStore 实例。

查看相关的 Hazelcast 组帖子；

> **[MapStore/MapLoader 配置](https://groups.google.com/forum/#!msg/hazelcast/RqdIRuzG8iI/G1pF2RFI3v0J)**
> 
> ...例如，要与 Guice 集成，您可以提供单例 MapStoreFactory 实现的名称，该实现静态注入了足够的信息来实现具有注入器感知逻辑的 newMapStore(String name, Properties properties)。
> 
> 如果您像我一样使用编程配置，则可以通过将已注入的工厂传递给 MapStoreConfig.setFactoryImplementation 来避免静态注入。
> 
> -蒂姆·佩尔斯-

另请参阅[MapStoreFactory](http://www.hazelcast.com/docs/latest/javadoc/com/hazelcast/core/MapStoreFactory.html)和[MapStoreConfig](http://www.hazelcast.com/docs/latest/javadoc/com/hazelcast/config/MapStoreConfig.html#setFactoryImplementation%28java.lang.Object%29) javadocs。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T12:40:37.280

[https://github.com/hazelcast/hazelcast/issues/440](https://github.com/hazelcast/hazelcast/issues/440)

这很好用！通过 CDI 扩展完成与 CDI 的集成。

# javascript - 如何使用 Ruby 和 JavaScript 计算多语言文本中的单词

> ID：12488565
> 
> 赞同：3
> 
> 时间：2012-09-19T04:24:40.167
> 
> 标签：javascript, ruby

我想要实现的是在多语言文本中获得字数。

就像我有一个文本同时有英文和中文：`The last Olympics was held in 北京`，计数应该是 8，因为有六个英文单词和两个汉字，就像 Microsoft Word 中的字数一样。

在 Ruby 和 JavaScript 中最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T04:46:09.867

我有一个基于“[如何在 ruby​​ 中检测字符串中的 cjk 字符](https://stackoverflow.com/questions/4681055/how-can-i-detect-cjk-characters-in-a-string-in-ruby)”的解决方案。

```
s = 'The last Olympics was held in 北京'
class String
  def contains_cjk?
    !!(self =~ /\p{Han}|\p{Katakana}|\p{Hiragana}|\p{Hangul}/)
  end
end
s.split.inject(0) do |sum, word|
  if word.contains_cjk?
    sum += word.length   # => ONLY work in Ruby 1.9\. 
                         #    Search for other methods to do this for 1.8
  else
    sum += 1
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T05:05:22.863

你可以在 JavaScript 中试试这个。它基本上通过排除英语中可能的每个字符来获取符号。我可能忘记了一些字符，它可能不适用于具有额外特殊字符的其他语言，但请尝试一下。为简洁起见，我使用 jQuery 的`$.trim`函数，但您也可以使用“[如何在 javascript 中修剪字符串？](https://stackoverflow.com/questions/498970/how-do-i-trim-a-string-in-javascript) ”。

演示：http: [//jsbin.com/otusuv/7/edit](http://jsbin.com/otusuv/7/edit)

```
var str = 'The last Olympics 隶草 was held in 北京';
var words = '', symbols = '';
str.replace(/([\w\s]*)([^\w;,.'"{}\[\]+_)(*&\^%$#@!~\/?]*)/g, function(a,b,c) {
    words += b;
    symbols += c;
});
words = $.trim(words).split(' ');
symbols = symbols.replace(' ', '').split('');

var total_words = words.length + symbols.length 
```

您可能还想尝试[XRegExp](http://xregexp.com/)。它是一个 JavaScript 库，可增强正则表达式并具有一些不错的功能。

# iphone - NSPredicate 使用核心数据实体的属性

> ID：12488568
> 
> 赞同：0
> 
> 时间：2012-09-19T04:24:44.383
> 
> 标签：iphone, ios, ipad, core-data, nspredicate

我有个人和团队实体，其中很多人可以属于一个团队。我正在尝试使用人的号码和团队的名称创建一个 NSPredicate 。因此，此请求将检查 Core Data 中是否已经存在一个编号为 N 并且属于 T 团队的人。但是，我无法使谓词工作，以便我可以获取 TEAM 的属性进行比较.

我目前的谓词如下：

```
request.predicate = [NSPredicate predicateWithFormat:@"(team.name LIKE %@) AND (number == %@)", [[personInfo objectForKey:PLAYS_FOR] name], [personInfo objectForKey:PERSON_NUMBER]]; 
```

在我看来，谓词的第一部分（team.name LIKE %@）是问题所在。任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:01:31.680

您需要团队实体和玩家实体之间的关系。

1人1队，1队多人。

这就是为什么在玩家实体中添加一个关系并检查**player.team == %@ AND player.number == %d**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:35:03.433

尝试：

```
[NSPredicate predicateWithFormat:@"(name ==[c] %@) AND (number == %@)", [[personInfo objectForKey:PLAYS_FOR] name], [personInfo objectForKey:PERSON_NUMBER]]; 
```

# javascript - 使用 tablesorter 对行进行排序

> ID：12488569
> 
> 赞同：5
> 
> 时间：2012-09-19T04:24:46.327
> 
> 标签：javascript, jquery, tablesorter

[http://jsfiddle.net/9sKwJ/66/](http://jsfiddle.net/9sKwJ/66/)

```
tr.spacer { height: 40px; } 
```

```
$.tablesorter.addWidget({
    id: 'spacer',
    format: function(table) {
        var c = table.config,
        $t = $(table),
        $r = $t.find('tbody').find('tr'),
        i, l, last, col, rows, spacers = [];
        if (c.sortList && c.sortList[0]) {
            $t.find('tr.spacer').removeClass('spacer');
            col = c.sortList[0][0]; // first sorted column
            rows = table.config.cache.normalized;
            last = rows[0][col]; // text from first row
            l = rows.length;
            for (i=0; i < l; i++) {
                // if text from row doesn't match last row,
                // save it to add a spacer
                if (rows[i][col] !== last) {
                    spacers.push(i-1);
                    last = rows[i][col];
                }
            }
            // add spacer class to the appropriate rows
            for (i=0; i<spacers.length; i++){
                $r.eq(spacers[i]).addClass('spacer');
            }
        }
    }
});

$('table').tablesorter({
    widgets : ['spacer']
}); 
```

```
<table id="test">
  <thead>
    <tr>
      <th>Name</th>
      <th>Number</th>
      <th>Another Example</th>
    </tr>
  </thead>
<tbody>

    <tr>
  <td>Test4</td>
  <td>4</td>
  <td>Hello4</td>
  </tr>          

  <tr>
  <td colspan="3">Test4</td>
  </tr>

    <tr>
  <td>Test3</td>
  <td>3</td>
  <td>Hello3</td>
  </tr>          

  <tr>
  <td colspan="3">Test3</td>
  </tr>

    <tr>
  <td>Test2</td>
  <td>2</td>
  <td>Hello2</td>
  </tr>          

  <tr>
  <td colspan="3">Test2</td>
  </tr>

  <tr>
  <td>Test1</td>
  <td>1</td>
  <td>Hello1</td>
  </tr>          

  <tr>
  <td colspan="3">Test1</td>
  </tr>
</tbody>
</table> 
```

如果您按第一列对其进行排序，这将按照我想要的方式进行排序，但其他两列不会保持我正在寻找的相同配对“tr”排序。

对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T02:07:16.237

`expand-child`在每个重复的行上使用类名：

```
<tr>
  <td>Test3</td>
  <td>3</td>
  <td>Hello3</td>
</tr>          

<tr class="expand-child">
  <td colspan="3">Test3</td>
</tr> 
```

它由`cssChildRow`选项定义：

```
$('table').tablesorter({
    cssChildRow: "expand-child"
});​ 
```

这是它的实际[演示](http://jsfiddle.net/Mottie/9sKwJ/82/)。

# django - 从 Django 1.3 升级到 1.4（或任何其他版本）的过程是什么？

> ID：12488575
> 
> 赞同：2
> 
> 时间：2012-09-19T04:25:14.800
> 
> 标签：django

从 Django 1.3 升级到 1.4（或任何其他版本）的过程是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:25:14.800

我认为将 django 从 1.3.1 升级到 1.4.1（最新）可能很困难。

这很简单，你应该`pip`让它变得容易 备份你的资源

如果你没有`pip`

```
$ sudo apt-get install python-pip
$ pip install -U django  # it will install/upgrade to latest version 
```

或者您需要升级到特定版本

```
pip install --upgrade django==1.4.1 
```

安装后只需像这样确认

```
$ python
>>> import django
>>> django.get_version()
'1.4.1' 
```

# ruby - 减少总回报为零

> ID：12488579
> 
> 赞同：1
> 
> 时间：2012-09-19T04:26:06.737
> 
> 标签：ruby, reduce

我正在计算一个项目在枚举中出现的次数。

```
irb(main):003:0> (1..3).reduce(0) {|sum, p| sum += 1 if p == 1}
=> nil
irb(main):004:0> (1..3).find_all{|p| p == 1}.length
=> 1 
```

reduce 方法似乎应该与 find_all 方法具有相同的行为。为什么它返回`nil`而不是返回`1`？

```
irb(main):023:0> (1..3).reduce(0) {|sum, p| sum += 1 if p == 2}
NoMethodError: undefined method `+' for nil:NilClass
    from (irb):23:in `block in irb_binding'
    from (irb):23:in `each'
    from (irb):23:in `reduce'
    from (irb):23
    from /usr/bin/irb:12:in `<main>' 
```

在第一次迭代中出现了问题。可以减少只是不使用这种方式吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T04:30:03.403

在reduce中，块中代码的值被分配给累加器。在您的情况下，您将第一个分配覆盖为与后来的 nil 相加。

您可以通过以下方式解决此问题：

```
(1..3).reduce(0) {|sum, p| sum += 1 if p == 1; sum} 
```

或者

```
(1..3).reduce(0) {|sum, p| sum += p == 1 ? 1 : 0} 
```

对于您的第二个示例， sum 在第一次迭代中被分配为 nil，而您试图在第二次迭代中将 1 添加到 nil 中。

请记住，reduce/inject 可能不是最好的计数工具 - 试试

```
(1..3).count(1) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T04:57:13.477

给[`Enumerable#reduce`方法](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-reduce)的块的返回值（或最后一个值）*总是*在每次调用时存储为累加器的新值，因此就地递增总和 ( `sum+=1`) 会产生误导。`p==1`如果否则，您的块将返回预期值`nil`，因此累加器将被覆盖。

尝试修改您的块以始终返回累加器的预期值（总和），例如：

```
(1..3).reduce(0) { |sum,p| (p==1) ? sum+1 : sum } 
```

reduce 方法实现中的调用顺序如下所示：

```
acc = 0
acc = yield(acc, 1) # (sum=0, p=1) => sum+1 => 1
acc = yield(acc, 2) # (sum=1, p=2) => sum => 1
acc = yield(acc, 3) # (sum=1, p=3) => sum => 1
acc # => 1 
```

# excel - 编写 csv 以在 Excel 中作为不同的选项卡打开

> ID：12488580
> 
> 赞同：1
> 
> 时间：2012-09-19T04:26:22.600
> 
> 标签：excel, csv

有没有办法编写一个 csv 文件，以便在 MS Excel 中打开时，它将在工作区的不同选项卡中打开？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T04:27:59.850

最简洁的答案是不。

就此而言，长答案也是“否”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:41:42.553

csv 是由逗号分隔的连续值行。每行甚至不必具有相同数量的值等。在 csv 中没有工作簿或不同“区域”的概念。不能诱使 Excel 将 csv 打开到多个工作簿中……至少在不编写 VBA 自己解析 csv 文件的情况下不会。oxml 或他们最终为办公室调用 xml 文件规范的任何东西，允许工作簿，并且仍然很容易处理基于文本的问题。您必须使用 csv 还是可以（至少部分地）切换到 xml？

# c - 标题中的结构问题

> ID：12488584
> 
> 赞同：0
> 
> 时间：2012-09-19T04:26:51.247
> 
> 标签：c, header, struct

大家好，我在将 ac struct 放在头文件中以便可以共享时遇到问题。我还没有找到一个实际编译没有错误的解决方案，所以我无法弄清楚我做错了什么。

头文件 awget.h

```
#ifdef awget_H
#define awget_H

typdef struct List{
char IPs;
}List;

#endif 
```

源文件 awget.c

```
#include "awget.h"
int main(int argc, char *argv[]) 
{
 List receiveHere;
 struct List sendHere;

 return 0;
} 
```

源文件中的第一个声明返回“错误：未知类型名称'List'”。第二个声明返回，“错误：'sendHere' 的存储大小未知”。

从我所能收集到的第一个应该是法律声明，但我显然做错了。我已经尝试过 extern 和 typedefs 并阅读了标题文章中的每个 c 结构，我可以找到尝试正确理解如何将结构放入标题中无济于事，更不用说正确编译的东西了。

有人可以为我指出正确资源的方向，或者对我设置不正确的内容有所了解吗？感谢您的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T04:28:24.813

1) 它是`#ifndef`，如*“如果未定义”*，您应该使用。

改变

> #ifdef awget_H

和

> #ifndef awget_H

2) 它`typedef`不是`typdef`。

3) 如果不是 C++，那一定`List sendHere`不是`struct List sendHere`.

# c# - 在堆栈或堆上使用 c# 是数学向量更快吗？

> ID：12488585
> 
> 赞同：2
> 
> 时间：2012-09-19T04:27:04.220
> 
> 标签：c#, heap-memory

我的理解是 CPU 与 CPU 缓存（L1 等）一起进行数学运算，如果操作所需的值尚未在缓存中，则需要从 RAM 中获取页面，然后才能执行计算. 因此，似乎有理由认为，托管堆 RAM 比操作系统设法在广阔的非托管堆栈 RAM 中的某个地方找到的任何旧漏洞更适合存放 Vector 数据。我这样说是因为我假设托管内存比非托管内存更紧密地结合在一起，因此数学运算的向量 (x, y, z) 更有可能存储在加载到缓存中的相同页面中；而作为堆栈上的结构的向量可能是分开的页面。任何人都可以从这个角度解释基于类而不是基于结构的向量类的优缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T05:19:25.340

CPU缓存完全由CPU管理。最近访问的内存由相对较大的块（即访问位置周围的 128 个字节）缓存。

操作系统管理进出物理内存的分页。如果您的应用程序经常访问该进程（即您的数据大小比物理 RAM 大得多），那么您还有其他问题需要担心外部 CPU 缓存行命中和未命中。

从这个角度来看，堆栈和堆之间基本上没有区别。唯一有意义的区别是下一条要使用的数据与最近使用过的数据的接近程度。

在大多数情况下，数学类（向量/矩阵/点）存储在连续的内存块中，用于托管和本机实现。因此，缓存行为可能是可比较的，除非明确地进行一些奇怪的分配以使各个元素在内存中相距很远。

总结：如果性能非常重要，请确保分析您的代码并保持数据紧凑。

尝试并测量跨数组的不同迭代顺序。即，如果每次迭代都会越过缓存线，它可能会变慢 - 当必须在大多数数组访问中重新填充缓存时，在 2d 数组中首先按行或按列遍历可能会显示足够大的数据集的可测量差异......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:46:20.673

这里的堆栈更快[，这](http://www.atalasoft.com/cs/blogs/rickm/archive/2008/04/15/improving-performance-through-stack-allocation-net-memory-management-part-2.aspx)是一个更详细地介绍它的站点。

# android - 移动到 android 中的下一个 EditText

> ID：12488588
> 
> 赞同：32
> 
> 时间：2012-09-19T04:27:16.970
> 
> 标签：android

根据发布的问题和答案[How to automatically move to next edit text in android](https://stackoverflow.com/questions/12470067/how-to-automatically-move-to-the-next-edit-text-in-android)，我使用代码移动到下一个编辑框。

```
et1.addTextChangedListener(new TextWatcher() {

    public void onTextChanged(CharSequence s, int start,int before, int count) 
    {
        // TODO Auto-generated method stub
        if(et1.getText().toString().length()==size)     //size as per your requirement
        {
            et2.requestFocus();
        }
    }
    public void beforeTextChanged(CharSequence s, int start,
                    int count, int after) {
                // TODO Auto-generated method stub

    }

    public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub
    }

}); 
```

我面临的问题是，如果我输入错误，那么即使用户明确请求 focus ，由于文本观察器中的代码，文本框也会移动到下一个。我能做些什么来防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-10-31T09:15:20.913

可能为时已晚，但我有一个更容易应用的解决方案。只需*将此代码添加到 layout.xml 文件中的 edittext 字段即可*。将此添加到要**显示下一步按钮而不是完成按钮的**edittext 。所以***它将指向下一个 Edittext 字段。***

```
android:imeOptions="actionNext" 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-05-20T08:18:20.740

如果您想将下一个 EditText 聚焦在按下回车键上，您可以在 XML 代码中使用这些选项来聚焦下一个 EditText：

选项1：

```
<EditText
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:imeOptions="actionNext"
    android:singleLine="true"/> 
```

选项 2：

```
<EditText
    android:id="@+id/et1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:singleLine="true"
    android:nextFocusForward="@+id/et2"/>

<EditText
    android:id="@+id/et2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:singleLine="true"/> 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-09-19T04:39:05.180

您可以检查为第一个 EditText 按下的键，如果它是“Enter”键，则将焦点移到下一个 EditText。

这可能会对您有所帮助：[KeyCode_Enter to next edittext](https://stackoverflow.com/questions/3019965/keycode-enter-to-next-edittext)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-19T04:41:43.453

您需要验证用户输入以满足您的期望。如果满足，那么只调用`et2.requestFocus()`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-10-25T18:51:40.817

它对我有用：

```
final EditText code1=((EditText)view.findViewById(R.id.code1));
    final EditText code2=((EditText)view.findViewById(R.id.code2));
    final EditText code3=((EditText)view.findViewById(R.id.code3));
    final EditText code4=((EditText)view.findViewById(R.id.code4));

    OnKeyListener key=new OnKeyListener() {

        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if(!((EditText) v).toString().isEmpty())
            v.focusSearch(View.FOCUS_RIGHT).requestFocus();

            return false;
        }
    };

    code1.setOnKeyListener(key);
    code2.setOnKeyListener(key);
    code3.setOnKeyListener(key); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-19T04:31:33.490

您还可以检查您的 if 条件是否正确。

```
if(et1.getText().toString().length()==size)     //size as per your requirement
    {
        if(et1.gettext.toString().equals(somethingwhichyouhavecheck))
        {

                   et2.requestFocus();
        }
        else
         {
         }
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-19T06:28:05.677

此代码按预期工作。

```
etFName.setOnKeyListener(new OnKeyListener() {
            public boolean onKey(View v, int keyCode, KeyEvent event) {
                if(etFName.getText().toString().length()==4 && keyCode == KeyEvent.KEYCODE_BACK)
                {
                    typinget1 = true;
                }
                else if(etFName.getText().toString().length()==4 && typinget1==true)     //size as per your requirement
                {
                    typinget1 = false;
                    etLName.requestFocus();

                }
                else if(etFName.getText().toString().length()<=4 && typinget1==false)
                {
                    typinget1 = true;

                }

                return false;
            }
        }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-14T07:18:41.440

这段代码对我有用

```
 private void managePinView(final ArrayList<MaterialEditText> editTexts) {
    last = editTexts.size();
    last--;
    editTexts.get(0).requestFocus();
    for (int i = 0; i < editTexts.size(); i++) {
      final int finalI = i;

      editTexts.get(finalI).addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence s, int start, int before,
                                  int count) {
          convertText(editTexts.get(finalI), s, this); // i can use this function to change english number to persian number if do not use comment this
          int textLength = editTexts.get(finalI).getText().length();
          next = finalI + 1;
          previous = finalI - 1;
          if (textLength >= 1) {
            if (next <= last)
              editTexts.get(next).requestFocus();
          } else {
            if (previous >= 0) {
              editTexts.get(previous).requestFocus();
            }
          }
        }

        @Override
        public void afterTextChanged(Editable s) {

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                                      int after) {
        }
      });
    }
  }

  private void convertText(MaterialEditText editText, CharSequence charSequence, TextWatcher watcher) {
    String updatedString = G.convertEnNumberToFi("" + editText.getText().toString().substring(0, editText.length()));
    editText.removeTextChangedListener(watcher);
    editText.setText(updatedString);
    editText.setSelection(charSequence.length());
    editText.addTextChangedListener(watcher);
  } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-12-08T08:38:49.297

这是我在 recyclerview 或 listview 中编辑文本的方法。

```
edittext.setOnEditorActionListener { textView, actionId, _ ->
     if (actionId == EditorInfo.IME_ACTION_NEXT) {
        var view = textView.focusSearch(View.FOCUS_DOWN)
        while (view != null) {
          if (view is EditText) {
             view.isCursorVisible = true
             return@setOnEditorActionListener view.requestFocus()
          }
          view = view.focusSearch(View.FOCUS_DOWN)
        }
     }
     false
} 
```

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2015-01-31T20:36:03.897

我对此有非常简单的解决方案，只需将以下属性放在 xml edittext 控件中

**android:inputType="textPersonName"**

# jquery - jqGrid：如何向jqGrid添加取消图标并捕获取消事件？

> ID：12488591
> 
> 赞同：1
> 
> 时间：2012-09-19T04:27:39.677
> 
> 标签：jquery, jqgrid

我正在使用 jqGrid 4.4.0 版。

1.  如何在 jqGrid 右上角的标题区域添加取消图标？

2.  完成上述 #1 后，当用户单击此按钮时，如何捕获取消事件。

标准网格带有一个折叠图标。我可以使用属性 hidegrid:true 隐藏它，这似乎隐藏了作为开始的折叠按钮，但我不确定如何连接其余部分。

任何帮助表示赞赏。

# vb.net - 从 DataGridView 删除后无法从 .sdf 数据库中删除行

> ID：12488593
> 
> 赞同：0
> 
> 时间：2012-09-19T04:27:48.140
> 
> 标签：vb.net, winforms, datagridview, sql-server-ce

我在我的 winforms 项目中添加了一个 .sdf 文件（sqlceserver v3.5）。然后我添加了一个 .sdf 数据库并为其选择数据集模型。我还为此添加了一个 datagridview，并从滚动窗格中选择了它的数据源作为“LogBindingSource1”。休息代码是自动生成的。我选择了 datagridview 的列。现在，当我运行项目并从网格中删除行时，更改根本不会反映到数据库中。我尝试执行以下操作：

```
Private Sub DataGridView1_UserDeletedRow(ByVal sender As System.Object, ByVal e As System.Windows.Forms.DataGridViewRowEventArgs) Handles DataGridView1.UserDeletedRow  

    For i As Integer = 0 To DataGridView1.SelectedRows.Count - 1
        'Me.Database1DataSet3.log.Rows.RemoveAt(Convert.ToUInt16(DataGridView1.Rows(DataGridView1.SelectedRows(i).Index).Cells(0).Value))
        'Me.LogTableAdapter1.Delete(Convert.ToUInt16(DataGridView1.Rows(DataGridView1.SelectedRows(i).Index).Cells(0).Value))
        'Me.DataGridView1.Rows.RemoveAt(Me.DataGridView1.SelectedRows(i).Index)
        'Dim ind As Integer = DataGridView1.SelectedRows(i).Index
        Me.LogBindingSource1.RemoveAt(e.Row.Index)
        DataGridView1.Refresh()
        DataGridView1.Update()
        'Me.LogTableAdapter1.Update(Me.Database1DataSet3.Tables(0))
    Next

End Sub 
```

我正在显示评论以显示我尝试过的所有排列。需要注意的是，Log是已经绑定到网格的表名，是数据库中的单个表。

在询问之前，我访问了以下资源：1）[https://stackoverflow.com/questions/10575169/inserting-data-from-a-datagridview-to-a-sdf-sql-database](https://stackoverflow.com/questions/10575169/inserting-data-from-a-datagridview-to-a-sdf-sql-database) 2）[https://stackoverflow。 com/questions/10575169/inserting-data-from-a-datagridview-to-a-sdf-sql-database](https://stackoverflow.com/questions/10575169/inserting-data-from-a-datagridview-to-a-sdf-sql-database)（不使用表适配器）3）[http://www.codeproject.com/Articles/24656/A-详细的数据绑定教程](http://www.codeproject.com/Articles/24656/A-Detailed-Data-Binding-Tutorial)（太冗长）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:23:47.783

我刚刚注意到这个未回答的问题。这是一种简单的方法来浏览突出显示的行并从`datagridview`数据库中删除。您需要提供自己的连接字符串和数据库名称。在这里，我称之为`Ranchconn`。

```
Private Sub btnDelete_Click(sender As Object, e As EventArgs) Handles btnDelete.Click
    Ranchconn.Open()
    cmdRanch.Connection = Ranchconn
    For Each row As DataGridViewRow In cdgvRanchEntry.SelectedRows
        cmdRanch.CommandText = "Delete * FROM Entries where ID = " & row.Cells("ID").Value
        cmdRanch.ExecuteNonQuery()
        cdgvRanchEntry.Rows.Remove(row)
    Next row
    Ranchconn.Close()
End Sub 
```

# c# - WCF Config to fix 已超出最大字符串内容长度配额 (8192)

> ID：12488594
> 
> 赞同：0
> 
> 时间：2012-09-19T04:27:57.627
> 
> 标签：c#, wcf

我收到一个错误

> 已超过最大字符串内容长度配额 (8192)

我知道我需要修改我的 WCF 配置，但我无法让它工作。到目前为止，这是我所拥有的：我尝试使用内置的 WCF 编辑器。

```
 <system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding>
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
            maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
        </binding>
      </wsHttpBinding>
    </bindings>

    <client>
      <remove contract="IMetadataExchange" name="sb" />
      <endpoint address="" binding="netTcpRelayBinding" contract="IMetadataExchange"
        name="sb" />
    </client>
    <services>
      <service name="SvcLibrary.Service1">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8732/Design_Time_Addresses/SvcLibrary/Service1/"/>
          </baseAddresses>
        </host>
        <!-- Service Endpoints -->
        <!-- Unless fully qualified, address is relative to base address supplied above -->
        <endpoint address="" binding="wsHttpBinding" contract="SvcLibrary.IService1">
          <!-- 
              Upon deployment, the following identity element should be removed or replaced to reflect the 
              identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity 
              automatically.
          -->
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <!-- Metadata Endpoints -->
        <!-- The Metadata Exchange endpoint is used by the service to describe itself to clients. -->
        <!-- This endpoint does not use a secure binding and should be secured or removed before deployment -->
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="True"/>
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T05:18:08.617

关于绑定，SCB 是正确的，这又是：

```
<bindings>
      <wsHttpBinding>
        <binding>
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
            maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
        </binding>
      </wsHttpBinding>
    </bindings> 
```

但我也收到错误“已超出最大字符串内容长度配额（8192）”，因为我需要修改客户端应用程序，如下所示：

```
 <basicHttpBinding>
        <binding name="BasicHttpBinding_IXRMService" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="65536" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding> 
```

**默认 maxStringContentLength 设置为 8192** 我将它增加到 65536 并且问题解决了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T04:38:47.453

您需要按如下方式更改绑定部分：

```
<bindings>
      <wsHttpBinding>
        <binding maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
            maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
        </binding>
      </wsHttpBinding>
    </bindings> 
```

您的端点指定它正在使用 wsHttpBinding，但您只配置了 basicHttpBinding。

这意味着您的服务将仅使用默认值

顺便说一下，您指定的那些值很大，您可能需要查看那些

- 更新

向绑定添加了 maxReceivedMessageSize 属性。

您还可以确认您是否在客户端进行了任何更改。基本上客户端和服务器配置都应该匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T04:38:56.070

您正在设置正确的属性 ( `maxStringContentLength`) 但绑定错误。问题是您正在定义配置，`basicHttpBinding`但`wsHttpBinding`在您的服务端点上使用。将您的绑定配置更改为`wsHttpBinding`，它应该可以正常工作（您可能想要验证是否需要通过 提供的 WS-* 功能`wsHttpBinding`，您也可以将端点的绑定更改`basicHttpBinding`为，只要您不需要支持，这也可以工作用于分布式事务等）

# java - 如何从字段访问父方法？

> ID：12488605
> 
> 赞同：1
> 
> 时间：2012-09-19T04:28:51.883
> 
> 标签：java

我有树类。

```
class MyObject{
    public void DoSomething()
    {
        here I need to call method add from class base.
    }
}

class base
{
    protected final void add(){}      
}

class extended extends base {
    private MyObject pObject = new MyObject();
    ...
    {
        pObject.DoSomething();
    }
} 
```

我可以为扩展类扩展的每个变体创建类，但是我需要使用的类型只有在扩展类已经启动后才可用。

如何`base.add()`从*MyObject*内部方法调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:44:24.597

您可以通过以下几种方式做到这一点：

*   `extended`在课堂上参考你的`MyObject`班级。在类中实例化`MyObject`变量时`extended`，将`extended`.

像这样的东西：

```
class MyObject{
    private base baseObj;

    public MyObject(base baseObj){
        this.baseObj = baseObj;
    }

    public void DoSomething()
    {
        //here I need to call method add from class base.
            //use baseObj to call the methods
    }
}

class base
{
    protected final void add(){}      
}

class extended extends base {
    private MyObject pObject;
    ...

    public extended(){
        pObject = new MyObject(this);
    }

    {
        pObject.DoSomething();
    }
} 
```

*   声明`base`类中的方法`static`。这样你就可以调用方法而不需要`base`类的实例。

像这样的东西：

```
class MyObject{

    public void DoSomething()
    {
        //here I need to call method add from class base.
        //call like this
        base.add();
    }
}

class base
{
    protected static final void add(){}      
}

class extended extends base {
    private MyObject pObject;
    ...

    public extended(){
        pObject = new MyObject(this);
    }

    {
        pObject.DoSomething();
    }
} 
```

*还有一件事：*这是题外话，但您可能想阅读[Java Naming Conventions](http://www.cwu.edu/~gellenbe/javastyle/naming.html)。类名以小写开头是您在命名约定中找不到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:49:52.040

像这样的虚拟代码：

```
class MyObject{
    public void DoSomething(Base base)
    {
        base.add();
    }
}

class extended extends base {
    private MyObject pObject = new MyObject();
    ...
    {
        pObject.DoSomething(this);
    }
} 
```

# android - 推特分享安卓

> ID：12488609
> 
> 赞同：0
> 
> 时间：2012-09-19T04:29:30.007
> 
> 标签：android, twitter, webview

我遵循了一些教程并为 android 实现了 twitter 共享，我能够在对话框中的 webview 中打开 Twitter auth URL。
但是，在提供有效凭据和密码后，点击“验证”按钮没有任何动作。“不，谢谢”按钮也会发生同样的情况......

我在三星/Moto 设备中面临这个问题，同时能够顺利进行 HTC。任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:02:00.403

您在这些设备上使用哪种浏览器？

在使用 Opera Mobile 时，我在使用开放式身份验证程序时遇到了困难。

您需要一个能够告诉系统刚刚调用了哪个 Internet 页面的浏览器。（每次点击链接时都必须发送一个 Intent，以便系统中的其他程序可以检查该链接是否最好由它们而不是浏览器打开）。
我知道我的三星 Galaxy SII 股票浏览器做得对。

编辑：
我假设，当你用 标记你的帖子时`webview`，你没有按照我的意思使用任何浏览器。无论如何，我会为其他可能通过浏览器尝试的人保留这篇文章。

[在我心中投票给自己]

# python - 普遍设置 tweepy 用户代理？

> ID：12488613
> 
> 赞同：1
> 
> 时间：2012-09-19T04:29:59.263
> 
> 标签：python, twitter, tweepy

我一直在玩 tweepy，但我一直遇到速率限制问题，出现 429 错误。我知道您可以在单个呼叫中设置标头，例如

```
api.get_user('twitter', headers={'User-Agent': 'MyUserAgent'}) 
```

但是有没有办法将标头设置在一个地方，而不必在每次 api 调用时都这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T04:40:23.507

哈克方式：

```
import functools
class NewAPI(object):
    def __init__(self, api):
        self.api = api
    def __getattr__(self, key):
        call = getattr(self.api, key)
        @functools.wraps(call)
        def wrapped_call(*args, **kwargs):
            headers = kwargs.pop('headers', {})
            headers['User-Agent'] = 'MyUserAgent' # or make this a class variable/instance variable
            kwargs['headers'] = headers
            return call(*args, **kwargs)
        return wrapped_call

api = NewAPI(api)
print(api.get_user('twitter')) 
```

免责声明：未经测试，因为我没有 tweepy。

# scala - 在scala中修改/重写ErrorToken字符串

> ID：12488619
> 
> 赞同：2
> 
> 时间：2012-09-19T04:30:18.977
> 
> 标签：scala

我是斯卡拉的新手。我的字符串文字有问题。这是我的代码：

```
import scala.util.matching.Regex
import scala.util.parsing.combinator.lexical.StdLexical
import scala.util.parsing.combinator.token.StdTokens
import scala.util.parsing.input.CharArrayReader.EofCh

trait SimpleTokens extends StdTokens {
  // Adapted from StdTokens
  case class FloatLit(chars: String) extends Token {
    override def toString = "FloatLit "+chars
  }
  case class IntLit(chars: String) extends Token {
    override def toString = "IntLit "+chars
  }  
  case class BooleanLit(chars: String) extends Token {
    override def toString = "BooleanLit " + chars
  }
  case class StrLit(chars: String) extends Token {

    override def toString = "\"" + chars.slice(1,chars.length-1) + "\""
  }

}

class SimpleLexer extends StdLexical with SimpleTokens {
  import scala.util.parsing.input.CharArrayReader.EofCh

  reserved ++= List( "mod", "div", "array","if","then")

  delimiters ++= List( ";", "(", ")", "+", "-", "*", "/",".")

  def regex(r: Regex): Parser[String] = new Parser[String] {
    def apply(in: Input) = {
      val source = in.source
      val offset = in.offset
      (r findPrefixMatchOf (source.subSequence(offset, source.length))) match {
        case Some(matched) =>
          Success(source.subSequence(offset, offset + matched.end).toString,
            in.drop(matched.end))
        case None =>
          Failure("string matching regex `" + r + "' expected but `" + in.first + "' found", in.drop(0))
      }
    }
  }

  override def token: Parser[Token] = {
    // Adapted from StdLexical
    (
    regex("true|false".r)                   ^^ { BooleanLit(_)}
    |regex("[a-z][a-z]*".r)                 ^^ { processIdent(_) }                  
    |regex("""([0-9]*)(((\.)?[0-9]+(e|E)(\+|-)?[0-9]+)|(\.[0-9]+))""".r)                ^^ { FloatLit(_) }
    |regex("\\d+".r)                        ^^ { IntLit(_) }
    |regex("""'([^'\"]|'')*'""".r)          ^^ {StrLit(_) }
    |EofCh ^^^ EOF
    |delim
    )
  }

  override def whitespace: Parser[Any] = rep(
    whitespaceChar
      | '/' ~ '*' ~ comment
      | '/' ~ '*' ~> failure("unclosed comment"))

  override protected def comment: Parser[Any] = (
    '*' ~ '/' ^^ { case _ => ' ' }
    | chrExcept(EofCh) ~ comment)

} 
```

输入是：'这是字符串

输出应该是：ErrorToken(Unclosed string: 'This is string)

但是当我跑步时，我收到了这个：

```
ErrorToken '

identifier this

identifier is

identifier string 
```

我该怎么做才能获得正确的输出？请帮我！！！感谢您考虑我的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T05:02:24.150

您可以在正则表达式上进行修改：

```
|regex("""(')[^']*(\t)""".r) ^^ ("Illegal tab in string:"+_) ^^ ErrorToken
|regex("""(')[^']*""".r) ^^ ("Unclosed string:"+_) ^^ ErrorToken 
```

PPL-2012？

# java - 如何访问变量的原始值

> ID：12488628
> 
> 赞同：-2
> 
> 时间：2012-09-19T04:31:45.580
> 
> 标签：java

假设我有这个代码

```
public static long number;
public static void main(String args[]) {
    String str1 = args[0];
    System.out.println("str1 is = " + str1);
    long number = Long.parseLong(str1);
    System.out.println("number value is = " + number);
}

public static void test1(){
    System.out.println("number value inside test1 is = " + number);
} 
```

假设我将 12345 作为参数传递，所以我的 o/p 将是

```
 str1 is  12345
 number value is  12345
 number value inside test1 is  0 
```

我想要的是能够在 test1 方法中访问 arg[0] （用户参数）或数字（12345）的原始值。请帮我做。谢谢。！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T04:35:57.577

将您的类级别设置`number`为`str1`. 当前，您设置了一个本地字段，该字段没有超出 main 方法的范围。

利用：

```
number = Long.parseLong(str1); 
```

代替：

```
long number = Long.parseLong(str1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:48:10.830

`long number = Long.parseLong(str1);`

执行上述操作是在**声明另一个名为** `number`.

这样做以访问`Class variable`（即静态字段）

`number = Long.parseLong(str1);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T04:38:10.697

为此，您要么需要使用全局变量，要么需要将值传递给`test1`函数。

您尝试使用全局变量，但是在初始化它时不需要在它前面有类型，因为这样它就变成了本地变量。所以只需使用：

```
number = Long.parseLong(str1); 
```

这是您将值传递给时的代码`test1`：

```
public static void main(String args[]) {
    String str1 = args[0];
    System.out.println("str1 is = "+str1);
    long number = Long.parseLong(str1);
    System.out.println("number value is = "+number);
}

public static void test1(long number){
     System.out.println("number value inside test1 is = "+number);
} 
```

然后你只需要使用

```
test1(number); 
```

在你的`main()`方法中的某个地方。

# android - Android life cycle: Explanation for state transitions

> ID：12488629
> 
> 赞同：2
> 
> 时间：2012-09-19T04:31:47.017
> 
> 标签：android, android-lifecycle

I want to discuss the Android life cycle. I know the basics of how the Android life cycle works but there are some questions I want to ask.

1.  Why don't Android apps move from running to stop directly why it first goes through the pause phase ?

2.  Why don't Android apps move from Running to Destroy directly like IPhone apps? Why does it move from Pause->Stopped->Destroy why not Running->Destroy ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T04:38:06.943

Apps are not immediately destroyed mainly for performance reasons. From the [Android Developer Activity Reference](http://developer.android.com/reference/android/app/Activity.html):

> The Android system attempts to keep application process around for as long as possible, but eventually will need to remove old processes when memory runs low.

If the screen is still powered on and there's no pressing need for your device to free up memory, for example, it's obviously faster for the user if the activity is simply paused instead of completely destroyed. Multiple end lifecycle stages make this possible.

The various callbacks indicate different things. This allows you to separate your cleanup functions into the quick, critical items (disconnecting from system resources like a database or network connection) vs. the longer term tasks (persisting user data across launches of your application, for instance). Because your activity is kept around as long as possible, you can avoid the expensive operations when the user is just pausing the activity momentarily.

`onPause()` is the first callback, indicating your activity is no longer in the foreground. An app will be paused if a dialog appears or if the user pushes the Home button, for instance. If the app is paused for a dialog, for example, you wouldn't want it to be destroyed because it's still visible.

If you also receive `onStop()`, it indicates your activity is no longer visible. At this point the user no longer sees what you are displaying. This could mean the user opened another application, for example. Even at this point, however, the system may still keep your activity around to make it quicker for the user to return to it later. (If you/the user ended the activity, however, then it will not be kept and will proceed with the end lifecycle callbacks.)

`onDestroy()` is the final callback before the activity is destroyed. Note that in extreme cases, the system may destroy your activity without calling this method.

# c++ - 为什么 __builtin_prefetch 在这里没有任何作用？

> ID：12488632
> 
> 赞同：7
> 
> 时间：2012-09-19T04:32:27.633
> 
> 标签：c++, performance, optimization, gcc

我正在编写一个程序来解析文件。它由一个主循环组成，该循环逐个字符地解析并处理它们。这是主循环：

```
char c;
char * ptr;

for( size_t i = 0; i < size ; ++i )
{
    ptr = ( static_cast<char*>(sentenceMap) + i );
    c = *ptr;

    __builtin_prefetch( ptr + i + 1 );

   // some treatment on ptr and c   
} 
```

如您所见，我添加了一条`builtin_prefetch`指令，希望在循环的下一次迭代中放入缓存。我尝试了不同的值 : `ptr+i+1`, `ptr+i+2`，`ptr+i+10`但似乎没有任何改变。

为了测量性能，我使用了 valgrind 的工具 cachegrind，它可以指示缓存未命中的数量。在线`c = *ptr`时，cachegrind 记录 632,378 DLmr (L3 cache miss) 时`__builtin_prefetch`未设置。不过奇怪的是，无论我设置的参数如何，这个值都不会改变`__builtin_prefetch`。

对此有何解释？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-19T04:36:54.930

那是因为硬件比你早几年。:)

有一些硬件预取器旨在识别简单的模式并为您进行预取。在这种情况下，您有一个简单的顺序访问模式，这对于硬件预取器来说是微不足道的。

只有当您拥有硬件无法预测的访问模式时，手动预取才会派上用场。

这是一个这样的例子：[预取示例？](https://stackoverflow.com/q/7327994/922184)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T06:19:41.920

首先，调用缓存处理的最小单元`cache line`，缓存行可以是例如 64 字节长，但永远不会像 1 字节那么小。因此，当您要求预取时，您需要在您当前感兴趣的位置之前提出很多问题。您需要知道缓存线的大小，因此您不应该询问位于同一缓存线中的地址。您还需要不要调用 prefetch 太多次，因为这也可能很快驱逐使用的缓存行，并在执行指令时造成性能损失。

现代架构也有硬件预取器的概念，它可以根据您的访问模式提前为您预取数据。在大多数情况下，这应该是创建与简单预取一样好的数据访问时间。如今，软件预取只能帮助您，前提是您可以找到一个如此明显的地方来预取数据——而不是通过在代码中随机传播。例如在开始处理一条数据之前，但是如果您只是调用 prefetch 并立即访问数据，这对您没有帮助。您需要尽早执行此操作并在访问数据之前完成其他设置工作。

我建议任何对此类主题感兴趣的人阅读[The Software Optimization Cookbook](http://www.intel.com/intelpress/sum_swcb2.htm)。我通常处理 ARM 架构，但我发现这本书非常宝贵。网上也有一些与此问题相关的摘录；见[#1](ftp://download.intel.com/intelpress/excerpts/excerpt_swcb1.pdf)和[#2](ftp://download.intel.com/intelpress/excerpts/excerpt_swcb2.pdf)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-07T16:44:52.207

正确的答案是：预取不能改变缓存未命中的数量，它只是迫使它们更早发生:)

# php - 在 PHP imagecopyresampled 中裁剪图像 - 挤压而不是裁剪

> ID：12488635
> 
> 赞同：0
> 
> 时间：2012-09-19T04:32:48.477
> 
> 标签：php, jquery, image, jcrop

我正在使用 jCrop 来裁剪图像。这段代码之前在另一个页面上工作，但是当我为另一个页面实现它时，它似乎正在播放。

当我运行它时，代码会拍摄原始图像，将其压扁，然后将整个图像放入我打算裁剪的框中。

这些值在 $_POST 值中正确地从 jCrop 返回。

```
$origURL=$_POST['CelebrityPicURL'];
$x = $_POST['x'];
$y = $_POST['y'];
$w = $_POST['w'];
$h = $_POST['h'];

$targ_w = $targ_h = 300;
$jpeg_quality = 90;

$img_r = imagecreatefromjpeg($origURL);
$dst_r = ImageCreateTrueColor( $targ_w, $targ_h );

imagecopyresampled($dst_r,$img_r,0,0,$_POST['x'],$_POST['y'],
$targ_w,$targ_h,$_POST['w'],$_POST['h']);

imagejpeg($dst_r,$origURL,$jpeg_quality); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:41:34.073

您可以简单地使用[`imagecopy()`](http://php.net/manual/en/function.imagecopy.php). 就像是...

```
$dst_r = imagecreatetruecolor((int) $w, (int) $h);
imagecopy($dst_r, $img_r, 0, 0, (int) $x, (int) $y, (int) $w, (int) $h); 
```

当然，您还需要检查越界条件并适当地处理它们。不确定您为什么要设置和/或使用`$targ_w`以及`$targ_h`是否从`$_POST`数组中获取裁剪数据。

# iphone - NSString 编码。如何获取与从 Xcode 控制台复制后具有相同编码的字符串？

> ID：12488637
> 
> 赞同：0
> 
> 时间：2012-09-19T04:33:04.957
> 
> 标签：iphone, xcode, nsstring, asihttprequest, nsstringencoding

**简而言之：**我的 xml 字符串编码错误。但是在使用 NSLog 并从 Xcode 控制台复制字符串之后，字符串得到了正确的编码。

**完整解释：**

我使用 ASIFormDataRequest 和编码将 xml 字符串发送到服务器：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

我收到错误 500“服务器无法解析您的 xml”。我想，这是我的 xml 中的一个错误。我试图分析，我从 NSArray 和 NSDictionary 的字符串中构建了 xml。这些字符串取自先前的服务器响应和文本字段。

但后来我用了`NSLog("%@", myXmlString)`. 我在 Xcode 控制台中看到了我的 xml 字符串。我从控制台复制了字符串并直接粘贴到代码中，然后将此处理后的字符串发送到服务器。并且没有错误。

**问题：**如何以与 Xcode 控制台更改字符串相同的方式更改字符串（字符串编码）？

**更新**

来自 NSLog 控制台的字符串：

```
<?xml version="1.0" encoding="UTF-8"?><env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:enc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns0="http://com.test/types/AstoriaObjectProperties" xmlns:ns1="http://com.test/wsdl/AstoriaObjectProperties" xmlns:ns2="http://java.sun.com/jax-rpc-ri/internal"><env:Body><ns1:setObjectProperties env:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"><HashMap_1 xsi:type="ns2:hashMap" enc:arrayType="ns2:mapEntry[2]"><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">id</key><value xsi:type="xsd:string">0000001aWGA2070GYZ</value></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">annotations</key><value href="#ID1"/></item></HashMap_1><HashMap_2 xsi:type="ns2:hashMap" enc:arrayType="ns2:mapEntry[2]"><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">id</key><value xsi:type="xsd:string">0000001aWGA2070GYZ</value></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">annotations</key><value href="#ID2"/></item></HashMap_2></ns1:setObjectProperties><ns0:ArrayOfhashMap id="ID1" env:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="enc:Array" enc:arrayType="ns2:hashMap[1]"><item xsi:type="ns2:hashMap" enc:arrayType="ns2:mapEntry[7]">￼&lt;item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationUser$$$</key><value xsi:type="xsd:string">AstoriaAdmin</value></item>￼&lt;item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">Annotation Status</key><value xsi:type="xsd:string">waiting for decision</value></item>￼&lt;item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationID$$$</key><value xsi:type="xsd:string">00000043X951EE3073607F44F7D00000000000000951FF3076D000000590000003C647C7668696D696B2D6163733A433A5C50726F6772616D2046696C65735C4173746F72696120536F6674776172655C434D535C64617461626173655C63616231303030302E64627C31347C367C3263307C31303030303E00704B585000000000YZ</value></item>￼&lt;item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">Annotation Comment</key><value xsi:type="xsd:string">comment</value></item>￼&lt;item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationDate$$$</key><value xsi:type="enc:dateTime">2012-09-18T10:22:40.000Z</value></item>￼&lt;item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">Annotation Status Comment</key><value xsi:type="xsd:string">status comment</value></item>￼&lt;item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationName$$$</key><value xsi:type="xsd:string">Legal Review</value></item></item></ns0:ArrayOfhashMap><ns0:ArrayOfhashMap id="ID2" env:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="enc:Array" enc:arrayType="ns2:hashMap[1]"><item xsi:type="ns2:hashMap" enc:arrayType="ns2:mapEntry[7]">￼&lt;item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationUser$$$</key><value xsi:type="xsd:string">AstoriaAdmin</value></item>￼&lt;item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">Annotation Status</key><value xsi:type="xsd:string">waiting for decision</value></item>￼&lt;item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationID$$$</key><value xsi:type="xsd:string">00000043X951EE3073607F44F7D00000000000000951FF3076D000000590000003C647C7668696D696B2D6163733A433A5C50726F6772616D2046696C65735C4173746F72696120536F6674776172655C434D535C64617461626173655C63616231303030302E64627C31347C367C3263307C31303030303E00704B585000000000YZ</value></item>￼&lt;item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">Annotation Comment</key><value xsi:type="xsd:string">comment</value></item>￼&lt;item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationDate$$$</key><value xsi:type="enc:dateTime">2012-09-18T10:22:40.000Z</value></item>￼&lt;item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">Annotation Status Comment</key><value xsi:type="xsd:string">status comment</value></item>￼&lt;item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationName$$$</key><value xsi:type="xsd:string">Legal Review</value></item></item></ns0:ArrayOfhashMap></env:Body></env:Envelope> 
```

我使用wireshark来获取字符串服务器。这里是：

```
<?xml version="1.0" encoding="UTF-8"?><env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:enc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns0="http://com.test/types/AstoriaObjectProperties" xmlns:ns1="http://com.test/wsdl/AstoriaObjectProperties" xmlns:ns2="http://java.sun.com/jax-rpc-ri/internal"><env:Body><ns1:setObjectProperties env:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"><HashMap_1 xsi:type="ns2:hashMap" enc:arrayType="ns2:mapEntry[2]"><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">id</key><value xsi:type="xsd:string">0000001aWGA2070GYZ</value></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">annotations</key><value href="#ID1"/></item></HashMap_1><HashMap_2 xsi:type="ns2:hashMap" enc:arrayType="ns2:mapEntry[2]"><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">id</key><value xsi:type="xsd:string">0000001aWGA2070GYZ</value></item><item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">annotations</key><value href="#ID2"/></item></HashMap_2></ns1:setObjectProperties><ns0:ArrayOfhashMap id="ID1" env:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="enc:Array" enc:arrayType="ns2:hashMap[1]"><item xsi:type="ns2:hashMap" enc:arrayType="ns2:mapEntry[7]">...<item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationUser$$$</key><value xsi:type="xsd:string">AstoriaAdmin</value></item>...<item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">Annotation Status</key><value xsi:type="xsd:string">waiting for decision</value></item>...<item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationID$$$</key><value xsi:type="xsd:string">00000043X951EE3073607F44F7D00000000000000951FF3076D000000590000003C647C7668696D696B2D6163733A433A5C50726F6772616D2046696C65735C4173746F72696120536F6674776172655C434D535C64617461626173655C63616231303030302E64627C31347C367C3263307C31303030303E00704B585000000000YZ</value></item>...<item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">Annotation Comment</key><value xsi:type="xsd:string">comment</value></item>...<item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationDate$$$</key><value xsi:type="enc:dateTime">2012-09-18T10:22:40.000Z</value></item>...<item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">Annotation Status Comment</key><value xsi:type="xsd:string">status comment</value></item>...<item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationName$$$</key><value xsi:type="xsd:string">Legal Review</value></item></item></ns0:ArrayOfhashMap><ns0:ArrayOfhashMap id="ID2" env:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="enc:Array" enc:arrayType="ns2:hashMap[1]"><item xsi:type="ns2:hashMap" enc:arrayType="ns2:mapEntry[7]">...<item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationUser$$$</key><value xsi:type="xsd:string">AstoriaAdmin</value></item>...<item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">Annotation Status</key><value xsi:type="xsd:string">waiting for decision</value></item>...<item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationID$$$</key><value xsi:type="xsd:string">00000043X951EE3073607F44F7D00000000000000951FF3076D000000590000003C647C7668696D696B2D6163733A433A5C50726F6772616D2046696C65735C4173746F72696120536F6674776172655C434D535C64617461626173655C63616231303030302E64627C31347C367C3263307C31303030303E00704B585000000000YZ</value></item>...<item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">Annotation Comment</key><value xsi:type="xsd:string">comment</value></item>...<item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationDate$$$</key><value xsi:type="enc:dateTime">2012-09-18T10:22:40.000Z</value></item>...<item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">Annotation Status Comment</key><value xsi:type="xsd:string">status comment</value></item>...<item xsi:type="ns2:mapEntry"><key xsi:type="xsd:string">$$$XD_AnnotationName$$$</key><value xsi:type="xsd:string">Legal Review</value></item></item></ns0:ArrayOfhashMap></env:Body></env:Envelope> 
```

所以，我在这个 xml 中看到了额外的点。

# javascript - 使用jquery从html表中选择第二行

> ID：12488645
> 
> 赞同：0
> 
> 时间：2012-09-19T04:34:36.697
> 
> 标签：javascript, jquery, html, dom, jquery-selectors

我使用以下 jquery 函数突出显示 Html 表中的行（使用 bg 颜色）。它工作正常。我的问题是如何从表中选择第二行。'highlight' 是一个类

```
.highlight td {
  background: #E7EFFA;
}

$('#Tabnameabcd tr').mouseover(function() {
  if ($.trim($(this).text()) != '')
    $(this).addClass('highlight');
}).mouseout(function() {
  $(this).removeClass('highlight');
});

which means:

name    age    depart

test    12     test
test1   13     tested 
```

这里的**名字，年龄，**作为第一行离开。这是标题。下一个**测试，test1**是 tabe 的元素。如果我使用该 jquery 函数，则标题（名称，年龄，出发）适用。**我需要将该 jquery 函数仅应用于表的元素而不是标题**？如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T04:35:54.240

要获得第二行：`$('#Tabnameabcd tr').eq(1)`或`$('#Tabnameabcd tr:eq(1)')`.

要从第二个获取所有行（演示：http: [//jsfiddle.net/pXj5F/](http://jsfiddle.net/pXj5F/)）：

```
$('#Tabnameabcd :nth-child(n+2)') 
```

你也应该考虑`thead`和`tbody`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T04:43:17.967

像这样试试

```
$('#mytable_id tr').eq(1).(your function here); 
```

并且您想申请行而不是倾斜，那么您也可以使用

```
$("#mytable_id td").function({
      //Play here
}); 
```

它将适用于除标题之外的所有表中的 td。您也可以使用“.not()”函数代替此

# iphone - UITextField 键盘返回按钮应更改为完成按钮

> ID：12488647
> 
> 赞同：2
> 
> 时间：2012-09-19T04:34:55.860
> 
> 标签：iphone, ios, ipad, uitextfield, ipod

我有五个文本字段，例如 textField1、textField2、textField3、textField4、textField5。

我想要做的是`UITextField`当所有文本字段都包含一些文本时，键盘返回按钮应该更改为完成按钮。我试过了，

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    if([textField1.text doubleValue]!=0)
        if([textField2.text doubleValue]!=0)
            if([textField3 doubleValue]!=0)
                if([textField4 doubleValue]!=0)
                    if([textField5 doubleValue]!=0)
                    {
                        [textField setReturnKeyType:UIReturnKeyDone];
                    }
                    else
                        [textField setReturnKeyType:UIReturnKeyDefault];
                    else
                        [textField setReturnKeyType:UIReturnKeyDefault];
                    else
                        [textField setReturnKeyType:UIReturnKeyDefault];
                    else
                        [textField setReturnKeyType:UIReturnKeyDefault];
                    else
                        [textField setReturnKeyType:UIReturnKeyDefault];
} 
```

我也试过

```
- (void)textFieldDidEndEditing:(UITextField *)textField
{
} 
```

两者都不起作用...请任何人帮助我...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T04:52:09.813

您最好使用 textFieldShouldBeginEditing，这里只需检查所有文本字段是否包含非空值，

所以代码应该是这样的

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
    if([[tf1.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]] length] > 0 && [[tf2.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]] length] > 0 [[tf3.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]] length] > 0) {
        [textField setReturnKeyType:UIReturnKeyDone];
    }
    return TRUE;
} 
```

////**编辑**

我检查了这段代码。它工作正常。所以试试这个，让我知道。

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
    if ([self areAllFieldsNonEmpty]) {
        [textField setReturnKeyType:UIReturnKeyDone];
        [textField reloadInputViews];
    } else {
        [textField setReturnKeyType:UIReturnKeyDefault];
        [textField reloadInputViews];
    }
    return TRUE;
}

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    if ([self areOtherFiledsNonEmptyThan:textField]) {
        if (range.location == 0 && range.length == 0) {
            [textField setReturnKeyType:UIReturnKeyDone];
            [textField reloadInputViews];
        } else if (range.location == 0 && range.length == 1) {
            [textField setReturnKeyType:UIReturnKeyDefault];
            [textField reloadInputViews];
        }
    }
    return TRUE;
}

- (NSInteger)lengthOf:(UITextField *)tf {
    return [[tf.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]] length];
}

- (BOOL)areOtherFiledsNonEmptyThan:(UITextField *)tf {
    BOOL isEmpty = TRUE;
    for (UITextField *textField in self.view.subviews) {
        if ([textField isKindOfClass:[UITextField class]] && tf != textField) {
            if ([self lengthOf:textField] == 0) {
                isEmpty = FALSE;
                break;
            }
        }
    }
    return isEmpty;
}

- (BOOL)areAllFieldsNonEmpty {
    BOOL isEmpty = TRUE;
    for (UITextField *textField in self.view.subviews) {
        if ([textField isKindOfClass:[UITextField class]]) {
            if ([self lengthOf:textField] == 0) {
                isEmpty = FALSE;
                break;
            }
        }
    }
    return isEmpty;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T05:15:57.383

试试这个

```
if([your_textField.text length]>0)

your_textField.returnKeyType = UIReturnKeyDone; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T08:24:53.227

您必须通过两种方法检查您的状况：

```
-(void)textFieldDidBeginEditing:(UITextField *)textField;
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string; 
```

因此，为代码的可重用性创建一个条件函数 -

```
-(void)checkCondition; 
```

然后在你的`ViewController.m`课堂上这样做 -

```
-(void)checkCondition
{
    if([txtField1.text length]>0 && [txtField2.text length]>0 && [txtField3.text length]>0 && [txtField4.text length]>0 && [txtField5.text length]>0)
    {
        txtField1.returnKeyType = UIReturnKeyDone;
        txtField2.returnKeyType = UIReturnKeyDone;
        txtField3.returnKeyType = UIReturnKeyDone;
        txtField4.returnKeyType = UIReturnKeyDone;
        txtField5.returnKeyType = UIReturnKeyDone;
    }

    else
    {
        txtField1.returnKeyType = UIReturnKeyDefault;
        txtField2.returnKeyType = UIReturnKeyDefault;
        txtField3.returnKeyType = UIReturnKeyDefault;
        txtField4.returnKeyType = UIReturnKeyDefault;
        txtField5.returnKeyType = UIReturnKeyDefault;
    }

}

-(void)textFieldDidBeginEditing:(UITextField *)textField
{
     [self checkCondition];
     [textField reloadInputViews];
}

-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string;
{
     [self checkCondition];
     [textField reloadInputViews];
} 
```

Remember `space` is count as a `character`, So if you dont want to count `spaces` then first remove them from `textField.text` and then compare.

# php - Easy APNS 消息状态设置为已发送，但未在设备上接收

> ID：12488655
> 
> 赞同：0
> 
> 时间：2012-09-19T04:35:46.843
> 
> 标签：php, iphone, apple-push-notifications, apns-php

Easy APNS 消息状态设置为已发送，但在设备上未收到使用 EasyAPNS 时，每条消息都可以正常通过系统。发送消息时，状态设置为已传递，但设备实际上从未收到消息。

该代码在开发人员代码中完美运行。但是自从切换到发布模式（应用程序在应用程序商店中运行）后，没有任何设备真正接收到发出的消息。

# python - 在不同文件夹中生成的 .pyc 文件

> ID：12488658
> 
> 赞同：1
> 
> 时间：2012-09-19T04:36:12.793
> 
> 标签：python, module, compilation, installation, distribution

朋友们，

我试图创建一个 python 发行版。我执行了命令：python setup.py sdist 后跟 python setup.py install 但创建的分发显示文件夹 build 和 dist 没有 .pyc 文件。然后我尝试使用 windows find 找到该文件并将其存在于 C:\Python27\Lib\site-packages

谁能告诉我我在设置中犯的错误或错过了什么。

提前致谢， Saurabh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:18:55.353

在您第一次运行模块之前，您不会得到任何 pyc 文件。源分发就是这样。无论如何，分发 pyc 文件通常没有用，它们不可移植。如果您打算*只*分发 pyc 文件，那么当使用不同的 python 版本和不同的操作系统时，您会遇到一系列可爱的问题。始终分发源代码。

对于大多数模块，第一次使用它们生成它们所花费的时间是微不足道的 - 不值得担心。

顺便说一句，当您迁移到 Python 3 时，pyc 文件现在存储在一个名为`__pycache__`(3.2) 的目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T05:49:33.903

`sdist`命令创建不应也不包含 pyc 文件的源分发。

`install`命令安装在您的本地环境中。创建 Python 发行版不是它的目的。

如果您的包是纯 Python，那么源代码分发足以将其安装在您喜欢的任何地方；您不需要依赖 Python 版本的 pyc 文件，因此不太通用。`bdist`或`bdist_egg`(setuptools) 生成 pyc 文件等。

# ruby-on-rails - Twitter 引导图标不显示 - 我做错了什么？

> ID：12488659
> 
> 赞同：2
> 
> 时间：2012-09-19T04:36:14.877
> 
> 标签：ruby-on-rails, twitter-bootstrap, icons

我是新手，所以请帮忙;-)

我在其中尝试使用 twitter bootstrap.js 框架构建了一个小型 RoR Web 应用程序。

我几乎可以完成所有工作，但显示的图标应该是 glyphicons-halflings-white.png 或 glyphicons-halflings.png 。

我的文件夹结构非常简单，是标准的 RoR 项目，我将 png 文件放在 /app/assets/images/ 下，当我查看 bootstrap.css 文件时，我看到：

```
background-image: url("../images/glyphicons-halflings-white.png"); 
```

和

```
background-image: url("../images/glyphicons-halflings.png"); 
```

根据我的文件夹结构，这应该是正确的。

在我的 html 代码中，我有类似的东西：

```
<div class="btn-group">
    <button class="btn" id="addTagButton"><i class="icon-tag"></i>Add Tag</button>
    <button class="btn dropdown-toggle" data-toggle="dropdown">
        <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
        <li><a href="#">Another action</a></li>
        <li><a href="#">Something else here</a></li>
        <li class="divider"></li>
        <li><a href="#">Separated link</a></li>
    </ul>
</div> 
```

我使用`<i class="icon-tag"></i>`来显示标签图标（或希望看到它）

**虽然，没有任何工作**

不知什么原因，我的文件夹上看不到任何图标。我试图查看是否可以看到 png 文件，如果我简单地将其复制`../images/glyphicons-halflings.png`到浏览器地址 url，但是，当 url 指向：本地主机：3000/images/glyphicons-halflings.png

我的 html 响应如下所示：

```
<!DOCTYPE html>
<html>
<head>
  <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrap-responsive.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrap.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/chosen.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/jquery-ui.css?body=1" media="all" rel="stylesheet" type="text/css" />
  <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.min.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-ui.1.8.20.min.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.extentions.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>
<script src="/assets/select2.js?body=1" type="text/javascript"></script>
<link href="/assets/select2.css?body=1" media="screen" rel="stylesheet" type="text/css" />
  <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js" type="text/javascript"></script>

  <meta content="authenticity_token" name="csrf-param" />
<meta content="c+czIHCNmepmx674gKldijipFRD9348Gw+R2SAlrpow=" name="csrf-token" />
  <link rel="SHORTCUT ICON" href="/images/favicon.ico">
</head>
<body>
<script src="/assets/jquery.validate.js?body=1" type="text/javascript"></script>
<script src="/assets/jit-yc.js?body=1" type="text/javascript"></script>
<script src="/assets/graphcontrol.js?body=1" type="text/javascript"></script>
<script src="/assets/excanvas.js?body=1" type="text/javascript"></script>

<!--[if IE]><script language="javascript" type="text/javascript" src="/assets/excanvas.js"></script><![endif]-->

<h1>Sandbox#hello</h1>

<div class="btn-group">
    <button class="btn" id="addTagButton"><i class="icon-tag"></i>Add Tag</button>
    <button class="btn dropdown-toggle" data-toggle="dropdown">
        <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
        <li><a href="#">Another action</a></li>
        <li><a href="#">Something else here</a></li>
        <li class="divider"></li>
        <li><a href="#">Separated link</a></li>
    </ul>
</div>

<script src="/assets/bootstrap-dropdown.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-button.js?body=1" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $('.dropdown-toggle').dropdown();
    });

</script>
</body>
</html> 
```

我做错什么了吗？我需要强制 ruby​​ 正确部署这些 *.png 文件吗？

任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T04:59:06.987

我有一个类似的问题，所以我这样做了：

```
<i class="icon-shopping-cart glyphw" id="cart"></i> 
```

css

```
.glyphw{
    background-image: url(/assets/glyphicons-halflings-white.png);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T05:15:44.380

只需使用密切维护的**bootstrap-sass** gem ( [https://github.com/thomas-mcdonald/bootstrap-sass](https://github.com/thomas-mcdonald/bootstrap-sass) ) 即可省去所有麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T18:21:56.993

```
 @font-face {
  font-family: 'FontAwesome';
  src: url('fontawesome-webfont.eot?v=3.0.1');
  src: url('fontawesome-webfont.eot?#iefix&v=3.0.1') format('embedded-opentype'),
    url('fontawesome-webfont.woff?v=3.0.1') format('woff'),
    url('fontawesome-webfont.ttf?v=3.0.1') format('truetype');
  font-weight: normal;
  font-style: normal;
} 
```

只需在 font-awesome.css 中正确设置您的字体目录

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-21T14:26:15.107

我用于此类问题的解决方案（供应商脚本尝试在其中查找资产`/img`， `/images`是将这些请求重定向到`assets`文件夹。`routes.rb`添加：

```
 get '/img/:name', to: redirect {|params, req| "/assets/#{params[:name]}.#{params[:format]}" } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-19T04:46:50.627

我在我的项目中使用 Twitter 引导程序，它很棒。获取图标的语法是：

```
<i class="icon icon-tag"></i> 
```

第一个 CSS 类“ `icon`”是制作图标的标签，第二个类“ `icon-tag`”是显示图标图像。

# php - 是否可以列出 PHP 中的所有全局变量？

> ID：12488661
> 
> 赞同：31
> 
> 时间：2012-09-19T04:36:50.220
> 
> 标签：php, global-variables

是否可以列出所有全局变量。例如，`print_r($_SESSION);`如果我想知道在我的站点中定义了多少全局变量，我们可以以同样的方式打印所有会话变量。是否可以？请帮忙。

我需要一个可以显示 PHP 中所有全局变量列表的列表。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-19T04:40:06.067

是的，PHP`$GLOBALS`数组会告诉你。

```
<?php

echo "<pre>";
print_r($GLOBALS);
echo "</pre>"; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-19T04:40:34.510

要获取所有全局变量的名称，请执行以下操作：

```
array_keys($GLOBALS) 
```

更多文档：

*   在 array_keys() 上：http: [//php.net/manual/en/function.array-keys.php](http://php.net/manual/en/function.array-keys.php)
*   在 $GLOBALS 上：http: [//php.net/manual/en/reserved.variables.globals.php](http://php.net/manual/en/reserved.variables.globals.php)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T04:38:37.387

[`$GLOBALS`](http://php.net/manual/en/reserved.variables.globals.php)— 引用全局范围内可用的所有变量也检查这个[PHP 全局或 $GLOBALS](https://stackoverflow.com/questions/3573847/php-global-or-globals)在这里你会发现许多重要和有用的东西`$GLOBALS`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-19T04:38:34.673

保留[`$GLOBALS`](http://php.net/manual/en/reserved.variables.globals.php)变量是一个包含所有全局变量的数组。

在数组中，键是变量名，值是变量值。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-19T04:40:02.953

嗯，PHP 中确实存在一个[`$GLOBALS`](http://php.net/manual/en/reserved.variables.globals.php)变量。

但是你不能`var_export()`对它做一个。它会导致如下错误：**嵌套级别太深 - 递归依赖？**

# php - 将我们域中的页面发布到另一个域，而不显示我们服务器的 URL

> ID：12488663
> 
> 赞同：0
> 
> 时间：2012-09-19T04:37:15.900
> 
> 标签：php, javascript, saas

我正在用 PHP 开发一个基于 SaaS 的应用程序，我的客户（网站所有者）可以在其中创建和自定义一些联系表格。然后我想将该页面发布到我的客户网站而不显示 url（我的意思是它需要看起来像来自我的客户域的页面）。我们可以在surey monkey和其他在线聊天应用程序中看到同样的情况。请帮我解决这个问题。

提前致谢，

苏尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:51:24.203

4 解决方案：

**iframe** - 缺点是，很多人不喜欢它们。有些人对此有安全问题。除此之外，它们都很好。

**外部 Javascript 文件**- 将其包含在您的标题中，让它在页面中填充特定内容。像魅力一样工作，您甚至可以使用远程文件：`<script src="http://external.com/form.php" type="text/javascript"></script>`. 不利的一面是，如果用户想在页面上包含自己的内容，页面中可能会发生冲突。我个人更喜欢这种方法，并将其用于跨多个服务器（一些 apache、一些 tomcat）同步网站菜单。

**JSONP** - 与外部 Javascript 文件非常相似，通过 JSONP 请求加载外部页面。缺点，很多配置，不止包括上面那一行。

**curl** - 很棒的工具，任何人都无法意识到内容来自另一面。需要后端配置，而不仅仅是纯 HTML。更多编码。更专业。

# authentication - Google 身份验证返回无效授权

> ID：12488669
> 
> 赞同：1
> 
> 时间：2012-09-19T04:38:09.043
> 
> 标签：authentication, access-token

我知道这个问题之前已经发布过。但他们都没有答案。所以我重新发布这个问题。我正在尝试获取分析数据。但在验证后，我收到访问令牌的“invalid_grant”错误。现在我有相同的代码工作了大约 3 个月，现在突然之间我遇到了这个问题。我已将刷新令牌保存在数据库中，并使用它来获取访问令牌。请求令牌是否有可能过期？请帮忙！

```
$oauth2token_url    =   "https://accounts.google.com/o/oauth2/token";
$clienttoken_post   =   array(
                        "client_id" => $client_id,
                        "client_secret" => $client_secret,
                        "refresh_token" => $refreshToken,
                        "grant_type"    => 'refresh_token'
                    );

$authObj        =   getAccessToken($oauth2token_url, $clienttoken_post);

function getAccessToken($oauth2token_url, $clienttoken_post){

    $curl = curl_init($oauth2token_url);

    curl_setopt($curl, CURLOPT_POST, true);
    curl_setopt($curl, CURLOPT_POSTFIELDS, $clienttoken_post);
    curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);

    $json_response = curl_exec($curl);
    curl_close($curl);

    $authObj = json_decode($json_response);

    return $authObj;
} 
```

令牌响应：`****************** is - stdClass Object ( [error] => invalid_grant )`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T05:50:28.573

行。我想通了。问题是当用户授予应用程序权限时，刷新令牌会被刷新。因此，如果用户授予权限（第 2 次），则第一次刷新令牌（您已保存在数据库或任何地方）将被刷新。您所要做的就是在每次获得许可时更新刷新令牌。

# validation - 添加验证器类时找不到类异常

> ID：12488671
> 
> 赞同：0
> 
> 时间：2012-09-19T04:38:12.770
> 
> 标签：validation, jsf, exception

0 与 eclipse 和 glassfish，事实上我已经添加了一个自定义验证器来验证 emai 地址，并且我得到了 class not found 异常。虽然我也已经在 faces.config 中注册了。

这是我的验证器代码

```
public static final String EmailPattern= "^[_A-Za-z0-9-]+(\\." +
            "[_A-Za-z0-9-]+)*@[A-Za-z0-9]+(\\.[A-Za-z0-9]+)*" +
            "(\\.[A-Za-z]{2,})$";
   public void validate(FacesContext context, UIComponent component,
            Object value) throws ValidatorException {

        matcher = pattern.matcher(value.toString());
        if(!matcher.matches())
        {
            FacesMessage message = new FacesMessage("Please enter a valid email address");
            message.setSeverity(FacesMessage.SEVERITY_ERROR);
            throw new ValidatorException(message);
        }
    } 
```

我在 faces.config 中注册

```
<validator>

<validator-id>emailvalidator</validator-id>
<validator-class>com.jsf.validators.EmailValidator</validator-class>
</validator> 
```

有人知道其中有什么问题吗？

# iphone - 如何在ios5中使用dispatch方法处理上传记录到服务器

> ID：12488676
> 
> 赞同：2
> 
> 时间：2012-09-19T04:38:28.910
> 
> 标签：iphone, ios, upload, grand-central-dispatch

我的本地文件中有 500 条记录。我想使用 NSURLConnection 中的调度方法将文件上传到服务器。我的想法是记录数达到 50，然后使用 dispatch_queue 作为先到先出的方法上传。我该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:45:44.247

由于您有大量文件，因此在线程上工作是一个好习惯，您可以使用 performSelectorInBackground 或 dispatch_async。

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);
dispatch_async(queue, ^{
    // code to post on server
}); 
```

这是关于 dispatch_async 的好帖子[http://blog.slaunchaman.com/2011/02/28/cocoa-touch-tutorial-using-grand-central-dispatch-for-asynchronous-table-view-cells/](http://blog.slaunchaman.com/2011/02/28/cocoa-touch-tutorial-using-grand-central-dispatch-for-asynchronous-table-view-cells/)

# facebook - Facebook：检测用户应用

> ID：12488684
> 
> 赞同：1
> 
> 时间：2012-09-19T04:39:04.777
> 
> 标签：facebook, detect

您好，我已阅读文档，但无法获得以下问题的明确答案：

1.  我们的应用程序是否可以检测给定用户是否使用了另一个应用程序。如果我们是两个应用程序的管理员或拥有这两个应用程序的 id 呢？

2.  如果从 FB 中删除了其中一个应用程序，是否有办法判断用户是否在删除之前安装了它？我猜是过去应用程序的一种历史。

在这里： [FB Connect：有没有办法查看已登录用户的 Facebook 应用程序？](https://stackoverflow.com/questions/3234107/fb-connect-is-there-a-way-to-see-the-logged-in-users-facebook-apps)

最佳答案是“**我认为**你能做的最多......”但我想确定。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:40:28.297

如果您请求权限**user_actions:APP_NAMESPACE**您可以看到用户在该应用程序中执行的打开图形操作。 [http://developers.facebook.com/docs/authentication/permissions/#open_graph_perms](http://developers.facebook.com/docs/authentication/permissions/#open_graph_perms)

在我的应用程序中，我通常将所有授权用户的用户 ID 存储在数据库中，当我通过“取消授权回调 URL”接到电话时，我不会从数据库中删除用户，而只是将用户标记为已取消授权。

通过这种方式，我可以轻松了解正在使用（或曾经使用过）我的任何应用程序的用户。这使我可以为使用我的多个应用程序的用户展示特殊功能。

例如，假设我制作了一个照片应用程序（如 Instagram）和一个 GPS 跑步应用程序（如 Endomondo）。如果用户在使用 Endomondo 运行时使用 Instagram 拍照，我可以提供对照片进行 GPS 标记的选项，或者将照片添加到 Endomondo。

这是我认为我们开发人员应该更多使用的东西。也许为其他应用程序提供一个开放的 API，让这些应用程序协同工作。

# sql - 将来自 JSP、Servlet 中的两个表的数据组合起来的 ResultSet

> ID：12488687
> 
> 赞同：0
> 
> 时间：2012-09-19T04:40:02.533
> 
> 标签：sql, jsp, join

我有那些桌子

```
 table product(id,name)
   table component(id,name,quantity)
   table_product_component(p_id,C_id) 
```

一个产品可以有多个组件，一个组件可以属于多个产品。

如何执行 JOIN 查询并获取显示产品名称、组件名称和数量的 ResultSet？

当我执行 sql 查询以返回这些查询时，我通常将其存储在 ArrayList 中，因此在这种情况下，我创建了一个新的 itemline 对象，该对象将存储 Product、Component 类型。然后我可以将查询结果存储在 ArrayList 中。那么我可以简单地编写逻辑以在数量为 0 时显示通知等？

问题是我从未使用过像 table_product_component(p_id,C_id) 这样的视图或关系表，所以我不确定如何查询数据集以获得我想要的结果

欢迎任何想法，方法，代码，理论来帮助我解决这个问题。

我实际上也需要 servlet/JSP 逻辑

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:21:17.197

所以我以某种方式解决了这个问题。我用jsp中的java做了

```
 <%
            Cart cart = (Cart) session.getAttribute("cart");
            List<LineItem> items = cart.getItems();
            for (LineItem item : items) {
            Product product = item.getProduct();

        %> 

        <tr> 
            <td> 
                <form action="<%=response.encodeURL("DisplayCart")%>"> 
                    <input type="hidden" name="productId"  
                           value="<%=product.getId()%>"> 
                    <input type="text" size=2 name="quantity"  
                           value="<%=item.getQuantity()%>"> 
                    <input type="submit" value="Update"> 
                </form> 
            </td> 
            <td> 
                <%=product.getDescription()%> 
            </td>
            <td><%=product.getPrice()%></td>
            <td> 
                <form action="<%= response.encodeURL("DisplayCart")%>"> 
                    <input type="hidden" name="productId"  
                           value="<%=product.getId()%>"> 
                    <input type="hidden" name="quantity"  
                           value="0"> 
                    <input type="submit" value="RemoveButton"> 
                </form> 
            </td>
        <td>           
       <%
        String p = product.getId();        
        List<String> pcs = PcDb.selectCidFromPc(p);
        for (String temp : pcs) {

        Component component = ComponentDb.selectComponent(temp);
        int c = component.getQuantity(); 
        if(c==0){
        out.println("Product is not in stock at the moment, expect delays");
        }
        }
        %>  
        </td>
        </tr> 

        <% }%> 
```

# eclipse-plugin - 如何将 Eclipse RCP 3.6 项目升级到 4

> ID：12488694
> 
> 赞同：2
> 
> 时间：2012-09-19T04:40:28.167
> 
> 标签：eclipse-plugin, eclipse-rcp

我想升级我昨天上线的 Eclipse RCP 项目，使用 Eclipse RCP 3.6 版本开发（代码就像紧耦合，因为我没有使用 Spring DI），作为未来的路线图考虑，我想升级我的项目到 Eclipse 4。升级的主要原因是在我的 RCP 应用程序中使用 spring DI & CSS。我可以在我的 Eclipse RCP 3.6 项目中进行 spring 集成和 CSS，还是应该从创建 RCP 4 Scratch 项目开始。实际上，为想法集思广益。任何方向和建议都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:42:25.697

要回答您的第一个问题……当然可以在 Eclipse 3.6 中使用 Spring DI，但 Eclipse RCP UI 的当前 CSS 样式直到 Eclipse 4 才引入。

我无法解决您是否应该创建 RCP 4 Scratch 项目。这是一个艰难的决定，应该由对您的项目及其未来目标有深入了解的人做出。

至于方向和建议……我有两个信息来源给你。

1.  拉斯·沃杰拉。他的教程站点很好地组合在一起，我认为对于任何想要学习 Eclipse RCP 开发基础知识的人来说，它们都是必不可少的。不幸的是，这些教程可能不够详细，无法帮助您。这取决于您当前的 Eclipse RCP 知识水平。 [http://www.vogella.com/tutorials.html](http://www.vogella.com/tutorials.html)

2.  日食源。这是一项付费服务​​。我从未与这些人合作过，但他们一直在向我发送一些电子邮件，为不同级别的支持提供几种不同的定价水平。那里的网站很好地组合在一起，它提供了一些很好的信息。[http://eclipsesource.com/en/eclipse/](http://eclipsesource.com/en/eclipse/)

# primefaces - 在liferay 6.1中使用primefaces

> ID：12488700
> 
> 赞同：1
> 
> 时间：2012-09-19T04:41:32.973
> 
> 标签：primefaces, liferay

我在 lifeary 中使用 primefaces 桥创建了一个示例 portlet。主要功能是在某些表中创建/编辑/删除。如何将页面上的代码拆分为更多。更具体地说，当我单击一条记录以转到另一个 xthml 页面时，我希望从该页面中加载所选记录中的数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:09:49.557

您可以使用以下代码获取 portlet 上下文和例如用户信息

```
System.out.println("Getting user info");
FacesContext facesContext = FacesContext.getCurrentInstance();
ExternalContext externalContext = facesContext.getExternalContext();
PortletRequest portletRequest = (PortletRequest) externalContext.getRequest();
User user = PortalUtil.getUser(portletRequest); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:10:25.350

这样做的非常简洁的方法是

```
PortalRequest request = LiferayFacesContext.getPortalRequest();
User user = PoralUtil.getUser(portletRequest); 
```

或者要获取当前登录的用户，请使用以下代码

```
LiferayFacesContext.getInstance().getUser(); 
```

应该给你当前登录用户的 Liferay 用户对象。

# ios5 - iOS 5.0 检查 NSString 是否包含 Emoji 字符

> ID：12488702
> 
> 赞同：5
> 
> 时间：2012-09-19T04:41:36.213
> 
> 标签：ios5, nsstring, emoji

我有一个 iOS 5 应用程序，允许用户使用国际键盘输入用户名。我想检查输入（NSString *）是否包含表情符号字符。

禁用表情符号键盘不是一个选项（使用 UIKeyboardTypeASCIICapable 因为它禁用了一些国际键盘）。

我试过 [这个](https://gist.github.com/2946536)。但它并没有检测到一些像[这样](http://i.stack.imgur.com/DY2Im.jpg)的字符。

有没有解决这个问题的好方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T00:56:09.193

我能够使用以下方法检测 iOS 5 和 iOS 6 表情符号键盘中的所有表情符号 [https://gist.github.com/4146056](https://gist.github.com/4146056)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-04T18:10:40.047

使用[https://github.com/woxtu/NSString-RemoveEmoji](https://github.com/woxtu/NSString-RemoveEmoji)类别，但请注意 iOS 9.1 添加了更多上述方法无法识别的表情符号（尤其是这些：）。

FIX：
`return (0x1d000 <= codepoint && codepoint <= 0x1f77f);`在`isEmoji`方法中替换为
`return (0x1d000 <= codepoint && codepoint <= 0x1f77f) || (0x1F900 <= codepoint && codepoint <=0x1f9ff);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-08T10:08:43.877

对于 iOS 10 及更低版本，您应该检查 unicode 是否在以下值之间。

```
if ((0x1d000 <= uc && uc <= 0x1f77f) || (0x1f900 <= 0x1f9ff)) {
     //is emoji
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-31T09:47:56.083

```
NSData *data = [yourstringofemo dataUsingEncoding:NSNonLossyASCIIStringEncoding];

NSString *goodValue = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

if ([goodValue rangeOfString:@"\u"].location == NSNotFound) 
{
      goodvalue string contains emoji characters
} 
else
{
      goodvalue string does not contain emoji characters
} 
```

# ruby-on-rails - Rails 中模型的不正确复数

> ID：12488705
> 
> 赞同：11
> 
> 时间：2012-09-19T04:41:48.947
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller, migration, inflection

我环顾了 Stack Overflow 和使用 Rails 进行敏捷开发，但找不到任何可以回答我需要的所有部分的东西。

我刚刚在 rails 中生成了一个 Cow 模型。显然，Rails 使用了牛（“kine”）的过时复数形式，所以当我创建该模型时，它构建了一个 Kine 迁移：

```
class CreateKine < ActiveRecord::Migration
  def change
    create_table :kine do |t|
      t.string :name
      t.string :farm
      t.string :breed

      t.timestamps
    end
  end
end 
```

我知道我可以进入模型的 .rb 文件并将 set_table_name 返回到 cow，但我担心相关的控制器。如果我创建一个 Cows 控制器，它不会同步吗？

我如何让一切都成为牛/牛？谢谢。这是我的第一个应用程序之一，我已经对管理控制器模型关联感到困惑，所以这个变形问题没有帮助。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-19T04:55:13.950

这里创建一个变形是一个例子：

配置>初始化程序>inflections.rb

```
ActiveSupport::Inflector.inflections do |inflect|
  inflect.irregular 'cow', 'cows'
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T06:09:22.043

尝试重命名表：

> ```
> class RenameKineToCows< ActiveRecord:Migration
> 
>   def up
>     rename_table :kine, :cows
>   end 
>   def down
>     rename_table :cows, :kine
>   end
> end 
> ```

将你的 app/models/kine.rb 重命名为 cow.rb 并编辑文件

> ```
> class Cow < ActiveRecord::Base
> 
>   self.table_name = 'Cow'
> end 
> ```

将你的 app/controllers/kine_controller.rb 重命名为 cows_controller.rb 并编辑文件

> ```
> class KineController < ApplicationController 
> ```

至

> ```
> class CowsController < ApplicationController 
> ```

并编辑 config/routes.rb

> ```
> resources :kine 
> ```

至

> ```
> resources :cows 
> ```

# sql - 等待在同一事务中获取先前更新的行的读锁

> ID：12488706
> 
> 赞同：0
> 
> 时间：2012-09-19T04:41:53.370
> 
> 标签：sql, sql-server-2008-r2, database-deadlocks, locks

在具有读提交隔离级别的事务中，如果您对一组行进行更新，然后对同一组行进行选择，则 sql server 在执行更新时不会重用它在索引上获取的 x 锁以执行下一个select 还是会尝试在索引上获取一组新的锁。我遇到了一个死锁场景，其中两个进程正在争夺一个索引键锁——被锁定的两个资源之一。当其中一个进程已经完成更新然后对相同的行进行选择时，就会发生这种情况。我的问题是，当该进程在上一步中已经获得同一行的 x 锁时，它如何等待获取索引上的键锁。

# c# - 使用 HttpHandler 重定向子文件夹

> ID：12488709
> 
> 赞同：2
> 
> 时间：2012-09-19T04:42:16.023
> 
> 标签：c#, asp.net, httphandler

我在 www.mydomain.com 有我的网站 asp 网页，而博客位于 www.mydomain.com/blog 内。我不得不将博客移动到一个子域，所以我需要编写一个模块来将博客内任何页面的任何调用重定向到新的子域。

它在我的机器上工作，但当我上传到共享主机时却不行。有什么想法有什么问题吗？

我写了以下代码

```
 public void ProcessRequest(HttpContext context)
{
    string sourceUrl =  @"www.mydomain.com/blog";// @"localhost:51393/blog"
    string destinationUrl = @"blog.mydomain.com/blog"; 
    string currentLocation = context.Request.Url.AbsoluteUri;
   if(currentLocation.ToLower().Contains(sourceUrl))
   {
       System.Web.HttpContext.Current.Response.Clear();
       System.Web.HttpContext.Current.Response.StatusCode = 301;
       System.Web.HttpContext.Current.Response.AddHeader("Location", currentLocation.Replace(sourceUrl, destinationUrl));
       System.Web.HttpContext.Current.Response.End();           
   }
} 
```

并添加了这些处理程序

```
 <httpHandlers>
  <add verb="*" path="*.aspx" type="System.Web.UI.PageHandlerFactory" />
  <add verb="*" path="*" type="MyHandler,App_Code.dll"/> 
```

任何帮助都深表感谢。

[我知道它与这个httpHandler - 子文件夹问题](https://stackoverflow.com/questions/2715352/httphandler-subfolder-issue)非常相似，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:40:14.487

只需使用 IIS 重写

这是一个将 1 个 URL 重定向到另一个 URL 的类似代码。稍微调整一下就可以了。我用我的 smarterasp.net 托管帐户得到了这个。

```
<configuration>
  <system.webServer>
    <rewrite>
      <rules>
        <rule name="Redirect to WWW" stopProcessing="true">
          <match url=".*" />
          <conditions>
            <add input="{HTTP_HOST}" pattern="^domain.com$" />
          </conditions>
          <action type="Redirect" url="http://www.domain.com/{R:0}"
               redirectType="Permanent" />
        </rule>
      </rules>
    </rewrite>
  </system.webServer>
</configuration> 
```

# php - 如何在 PHP 中获取此函数 socket_recv() 的最大长度

> ID：12488710
> 
> 赞同：5
> 
> 时间：2012-09-19T04:42:35.897
> 
> 标签：php, sockets

```
if(socket_recv ( $sock , $buf , 2045, MSG_WAITALL ) === FALSE)
{
    $errorcode = socket_last_error();
    $errormsg = socket_strerror($errorcode);        
    die("Could not receive data: [$errorcode] $errormsg <br>");
}
echo $buf; 
```

从上面的函数它没有显示完整的消息，所以我试图像这样获得变量 $buf 的最大长度

> socket_recv ( $sock , $buf , strlen($buf), MSG_WAITALL )

但不工作。请帮帮我

thx 和问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T10:16:18.240

您应该收到带有循环的响应

```
$received;
while(socket_recv($sock, $buf, 1024, 0) >= 1)
{
    $received .= $buf;
} 
```

# assembly - 指数函数英特尔汇编

> ID：12488716
> 
> 赞同：0
> 
> 时间：2012-09-19T04:43:20.057
> 
> 标签：assembly, bison, yacc, exponentiation

使用野牛为一个简单的计算器生成汇编代码，但我无法弄清楚我的错误到底是什么，所有的答案似乎都是一个乘法......

```
global intpow
intpow:
    push    ebp
    mov     ebp,esp
    mov     ecx,[ebp+8]
    mov     eax,[ebp+12]

loop:
    cmp     eax,1
    jle     finish
    dec     eax
    imul    ecx,ecx
    jmp     loop

finish:
    mov     eax,ecx
    mov     esp,ebp
    pop     ebp
    ret 
```

当我识别指数调用时，这是我的 .y 文件中的代码：

```
exp '^' exp        { $$ = pow ($1, $3);
          printf("call\tintpow\n");
          printf("push\tDWORD eax\n");
} 
```

组装错了吗？他们？两个都？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-13T17:03:37.687

（[评论转换为答案](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

@DCoder 写道：

> `imul ecx, ecx`将用相乘的结果覆盖原始值。循环的第二次迭代将计算`(y * y) * (y * y)`而不是`(y * y) * y`，依此类推。

@nrz 写道：

> 您编写的不是幂函数而是四分函数，它与 Knuth 的双箭头函数相同。这是有效的代码，仅用于不同的目的。

@hirschhornsalz 写道：

> 您正在计算的是 x^(2^y)。

# instagram - Instagram：在指定照片之后从标签中获取照片

> ID：12488717
> 
> 赞同：0
> 
> 时间：2012-09-19T04:43:35.897
> 
> 标签：instagram

我正在为某个东西开发一个 instagram 刮刀，我试图弄清楚是否有可能获取一个标签的所有照片，这些照片的 id 或时间戳晚于我拥有的最后一张。

instagram API 文档毫无用处，因为它们没有任何关于分页的真实信息（我认为我将不得不滥用）。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:09:38.030

在过去的几天里，我一直在通过 Instagram API 苦苦挣扎，所以这是我的 2 美分：据我所知，如果你用 /tags/tag-name/media/recent 调用 api，它只会返回一个列表如果项目。如果数量超过大约 25，您必须使用上一个请求中返回的分页值发出另一个请求。

为了获得一些控制，我最初会遍历所有图像并将结果（只是 URL，而不是实际图像）存储到数据库中。现在我可以随心所欲地操纵。当我想更新时（我现在手动进行，但可能是一项 cron 工作或使用[实时 api](http://instagram.com/developer/realtime/)）我重新读取所有图像，与我的数据库中的内容进行比较并添加可能的新图像。然后我的应用程序从我的数据库中读取 url 和信息（顺便说一句，这比通过 instagram api 快得多，每个请求只会返回大约 25 张图像 - 无论您输入的任何“计数”参数值如何请求 url) 并显示它。

我正在为一个害怕人们使用他们的专用主题标签（用于比赛）发布 nsfw 或任何图片的客户开发这个 - 通过上述设置，我可以为他们提供一个界面，他们可以检查和标记然后显示的图像应用程序。

需要注意的一件事是当用户删除他的图片时；您将不得不找到一种方法来检查这一点。目前（因为我很懒）我加载所有图像并使用 jquery 检查加载图像的错误。如果有，我会从数据库中删除图像（通过 ajax）。

我不确定分页是否会对您有所帮助：据我所知，分页响应与每页上实际图像对象的 id 无关 - 所以理论上跳到某个页面的分页 id（即如果同时删除了足够多的图像，则明天可能无法使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T09:56:57.327

要获取所有图像而不是最新的 20 张，只需将 &count=-1 附加到您的 api 调用 - 就这么简单。在任何一种情况下，每个 json 对象都有一个时间戳 - 或者如果您愿意，您可以使用 max_tag_id

在这里查看我的帖子：[有什么方法可以显示 20 多张 instagram API 的照片？](https://stackoverflow.com/questions/12521081/there-any-way-to-show-more-than-20-photos-of-the-instagram-api/12531284#12531284)

*** 2014 年 4 月更新**：`count=-1`不再可用。

# android - android.database.sqlite.SQLiteException：靠近“”：语法错误

> ID：12488718
> 
> 赞同：2
> 
> 时间：2012-09-19T04:43:36.410
> 
> 标签：android, sqlite, syntax, save

在 SQLite 中添加记录时遇到问题。

**这是错误**：

```
09-18 17:47:47.586: E/AndroidRuntime(1039):
   java.lang.RuntimeException: Unable to start activity ComponentInfo{com.capstone.pinoygoodies/com.capstone.pinoygoodies.GroceryView}:
   android.database.sqlite.SQLiteException: near " ":
   syntax error:
   CREATE TABLE tblItem 
                 (_id INTEGER PRIMARY KEY AUTOINCREMENT,
                  grocery_item TEXT NOT NULL,
                  grocery_qty TEXT NOT NULL 
```

**我的创建表**

```
db.execSQL("CREATE TABLE " + DATABASE_TABLE + "(" +
KEY_ITEMID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
KEY_ITEM + " TEXT NOT NULL, " + 
KEY_QTY + " TEXT NOT NULL "); 
```

每当我点击添加按钮时，都会触发此错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T05:11:44.143

```
db.execSQL("
    CREATE TABLE " + DATABASE_TABLE + "(" +
    KEY_ITEMID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
    KEY_ITEM + " TEXT NOT NULL, " + 
    KEY_QTY + " TEXT NOT NULL );"
); 
```

有容易混淆的。你只需要右括号。

*建议：*

```
String createStatement = 
    String.format("CREATE TABLE %s ( %s INTEGER PRIMARY KEY
                   AUTOINCREMENT, %s TEXT NOT NULL, 
                   %s TEXT NOT NULL);",
                        DATABASE_TABLE,
                        KEY_ITEMID,
                        KEY_ITEM,
                        KEY_QTY); 
```

如果你像这样构建你的表，我个人认为它使语句更容易阅读，比如 SQL 语法，然后你可以稍后绑定数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T04:56:57.987

在创建表查询末尾附加“)”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T04:52:08.113

错误是由创建表引发的，而不是获取数据。

检查您的创建表 sql 语句

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T05:11:55.843

您缺少 Create Table Syntax 的右括号，将其更正如下，

```
CREATE TABLE tblItem 
                 (_id INTEGER PRIMARY KEY AUTOINCREMENT,
                  grocery_item TEXT NOT NULL,
                  grocery_qty TEXT NOT NULL ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T05:12:09.063

```
db.execSQL("CREATE TABLE " + DATABASE_TABLE + "(" +
KEY_ITEMID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
KEY_ITEM + " TEXT NOT NULL, " + 
KEY_QTY + " TEXT NOT NULL )"); 
```

您需要最后在创建表中添加“）”。

插入查询

```
 String qty = "QTY";
    String item = "ITEM";
    String sql = "INSERT or replace INTO "+ DATABASE_TABLE +" (qty, item) VALUES('"+ qty +"','"+ item + "')";
    db.execSQL(sql); 
```

# mongodb - 电子商务的 NoSQL 数据库

> ID：12488720
> 
> 赞同：14
> 
> 时间：2012-09-19T04:44:22.573
> 
> 标签：mongodb, couchdb, e-commerce, orientdb, nosql

我将构建一个电子商务网站，并想使用一个 no-sql 数据库，这将非常适合该应用程序的计划。但是当谈到哪个数据库适合这项工作时，我不确定。在比较了各种 DB 之后，看起来最好的可能是 mongo、couch 甚至 orientdb。与 MySQL 之类的东西相比，我已经看到了使用或不使用它们的论点。但是在它们之间（nosql 数据库），哪一个更适合电子商务解决方案？

请注意，对于用例，我不会每秒处理数千笔交易。或类似的高写入率。他们肯定会适度，但在任何已建立的数据库都可以处理的水平上。

CouchDB：有主对主复制，我真的可以使用。如果没有，我仍然必须在代码中实现相同的功能。我需要能够拥有一个用户数据库，与母舰同步。（用户将拥有自己的，可能是本地主机数据库，可以与主域服务器同步）。一旦您的查询存储在数据库中，Couch 也很快。因为我可能对读取性能有更高的需求。虽然不是很多。

MongoDB：查询非常简单且用户友好。此外，由于最终用户可能需要在给定时间查询某些我可能无法提前考虑的事情，这似乎更合适。我不必将我的查询预先存储在数据库中。支持原子事务，但仅在一次写入单个文档时。

OrientDB：图形数据库。与大多数人习惯的大不相同，但根据需要，它也可以很好地适应。Orient 具有无模式以及支持 ACID 事务的优点。图形数据库可以很好地处理大量客户和产品关系。Orient 也支持 master 到 master 的复制，类似于 couchdb。

不要误会我的意思，我可以看到传统上如何使用 MySQL 之类的东西来构建它，但是 nosql 解决方案的易用性和简单性非常有吸引力。虽然在我的情况下，需要一个无模式的解决方案，在 nosql 而不是 mysql 中会容易得多。一个给定的产品可能比另一个产品有更多或更少的项目。并且避免在添加新字段时重新创建表，这是可取的。

因此，在这 3 个（甚至您认为可能更好的其他）之间，在处理客户交易时，对于基于电子商务的网站，每个功能中的哪些功能可能对我有用或对我不利？

编辑：我不使用现有解决方案的原因是因为有了我需要的集成功能，那里没有可用的解决方案。我们还打算将其用作我们公司的完整产品。除了销售之外，还会有一些其他的集成。它还将与商店的 POS 系统一起使用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-19T11:42:24.343

由于*电子商务*可以涵盖从购物车到会员资格和定期订阅的所有内容，因此很难准确猜测您所设想的要求和复杂性。

在构建电子商务网站时，早期的考虑之一应该是调查是否已经存在可以满足您要求的电子商务产品或工具包。即使您的用例看起来很简单，订单、发票、付款、产品和客户关系等流程也有许多微妙之处。也可以将您的应用程序分为目录管理方面（可能更自定义）与计费（可能是第三方，甚至可能通过托管的计费/支付 API）。

Another consideration should be who you are developing the e-commerce site for: is this to scratch your own itch, or for a client? Time, budget, and features for a custom build can be difficult to estimate and schedule .. and a niche choice of technology may make it difficult to find/hire additional development expertise.

A third consideration is what your language(s) of choice are for developing your application. Some languages will have more complete/mature/documented drivers and/or framework abstractions for the different databases.

That said, writing an e-commerce system appears to be a rite of passage for many developers ;-).

Edit: a lot has changed since this answer was originally posted in 2012 and you should definitely refer to current product information. For example, MongoDB has had support for [Decimal128 values](https://www.mongodb.com/developer/quickstart/bson-data-types-decimal128/) since MongoDB 3.4 (2016) and [multi-document transactions](https://www.mongodb.com/transactions) since MongoDB 3.6 (2017).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T10:10:36.630

Check the comparison of different available NoSql databases [here](http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis). Suit your requirement as per that.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-23T23:02:38.960

MongoDB 4 now multi-document ACID transactions! That makes it suitable for e-Commerce!

Check out: [https://www.mongodb.com/transactions](https://www.mongodb.com/transactions)

# python - 使用 Python 计算文件中的二元组（两个单词对）

> ID：12488722
> 
> 赞同：29
> 
> 时间：2012-09-19T04:44:40.803
> 
> 标签：python, regex, n-gram

我想使用 python 计算文件中所有二元组（相邻单词对）的出现次数。在这里，我正在处理非常大的文件，因此我正在寻找一种有效的方法。我尝试在文件内容上使用带有正则表达式 "\w+\s\w+" 的计数方法，但它并没有被证明是有效的。

例如，假设我想计算文件 a.txt 中的二元组数，该文件具有以下内容：

```
"the quick person did not realize his speed and the quick person bumped " 
```

对于上述文件，二元组及其计数将是：

```
(the,quick) = 2
(quick,person) = 2
(person,did) = 1
(did, not) = 1
(not, realize) = 1
(realize,his) = 1
(his,speed) = 1
(speed,and) = 1
(and,the) = 1
(person, bumped) = 1 
```

我在 Python 中遇到了一个 Counter 对象的示例，它用于计算 unigrams（单个单词）。它还使用正则表达式方法。

这个例子是这样的：

```
>>> # Find the ten most common words in Hamlet
>>> import re
>>> from collections import Counter
>>> words = re.findall('\w+', open('a.txt').read())
>>> print Counter(words) 
```

上面代码的输出是：

```
[('the', 2), ('quick', 2), ('person', 2), ('did', 1), ('not', 1),
 ('realize', 1),  ('his', 1), ('speed', 1), ('bumped', 1)] 
```

我想知道是否可以使用 Counter 对象来获取二元数。除了 Counter 对象或正则表达式之外的任何方法也将受到赞赏。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-09-19T04:54:53.743

一些`itertools`魔法：

```
>>> import re
>>> from itertools import islice, izip
>>> words = re.findall("\w+", 
   "the quick person did not realize his speed and the quick person bumped")
>>> print Counter(izip(words, islice(words, 1, None))) 
```

输出：

```
Counter({('the', 'quick'): 2, ('quick', 'person'): 2, ('person', 'did'): 1, 
  ('did', 'not'): 1, ('not', 'realize'): 1, ('and', 'the'): 1, 
  ('speed', 'and'): 1, ('person', 'bumped'): 1, ('his', 'speed'): 1, 
  ('realize', 'his'): 1}) 
```

**奖金**

获取任何 n-gram 的频率：

```
from itertools import tee, islice

def ngrams(lst, n):
  tlst = lst
  while True:
    a, b = tee(tlst)
    l = tuple(islice(a, n))
    if len(l) == n:
      yield l
      next(b)
      tlst = b
    else:
      break

>>> Counter(ngrams(words, 3)) 
```

输出：

```
Counter({('the', 'quick', 'person'): 2, ('and', 'the', 'quick'): 1, 
  ('realize', 'his', 'speed'): 1, ('his', 'speed', 'and'): 1, 
  ('person', 'did', 'not'): 1, ('quick', 'person', 'did'): 1, 
  ('quick', 'person', 'bumped'): 1, ('did', 'not', 'realize'): 1, 
  ('speed', 'and', 'the'): 1, ('not', 'realize', 'his'): 1}) 
```

这也适用于惰性迭代和生成器。因此，您可以编写一个生成器，它逐行读取文件，生成单词，然后将其传递`ngarms`给惰性消耗，而无需读取内存中的整个文件。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-19T04:59:24.367

怎么样`zip()`？

```
import re
from collections import Counter
words = re.findall('\w+', open('a.txt').read())
print(Counter(zip(words,words[1:]))) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-01-16T02:18:40.973

您可以`Counter`像这样简单地使用任何 n_gram：

```
from collections import Counter
from nltk.util import ngrams 

text = "the quick person did not realize his speed and the quick person bumped "
n_gram = 2
Counter(ngrams(text.split(), n_gram))
>>>
Counter({('and', 'the'): 1,
         ('did', 'not'): 1,
         ('his', 'speed'): 1,
         ('not', 'realize'): 1,
         ('person', 'bumped'): 1,
         ('person', 'did'): 1,
         ('quick', 'person'): 2,
         ('realize', 'his'): 1,
         ('speed', 'and'): 1,
         ('the', 'quick'): 2}) 
```

对于 3 克，只需将 更改`n_gram`为 3：

```
n_gram = 3
Counter(ngrams(text.split(), n_gram))
>>>
Counter({('and', 'the', 'quick'): 1,
         ('did', 'not', 'realize'): 1,
         ('his', 'speed', 'and'): 1,
         ('not', 'realize', 'his'): 1,
         ('person', 'did', 'not'): 1,
         ('quick', 'person', 'bumped'): 1,
         ('quick', 'person', 'did'): 1,
         ('realize', 'his', 'speed'): 1,
         ('speed', 'and', 'the'): 1,
         ('the', 'quick', 'person'): 2}) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-12-08T17:32:37.673

从 开始`Python 3.10`，新[`pairwise`](https://docs.python.org/3.10/library/itertools.html?highlight=pairwise#itertools.pairwise)函数提供了一种在连续元素对之间滑动的方法，这样您的用例就变成了：

```
from itertools import pairwise
import re
from collections import Counter

# text = "the quick person did not realize his speed and the quick person bumped "
Counter(pairwise(re.findall('\w+', text)))
# Counter({('the', 'quick'): 2, ('quick', 'person'): 2, ('person', 'did'): 1, ('did', 'not'): 1, ('not', 'realize'): 1, ('realize', 'his'): 1, ('his', 'speed'): 1, ('speed', 'and'): 1, ('and', 'the'): 1, ('person', 'bumped'): 1}) 
```

* * *

中间结果的详细信息：

```
re.findall('\w+', text)
# ['the', 'quick', 'person', 'did', 'not', 'realize', 'his', ...]
pairwise(re.findall('\w+', text))
# [('the', 'quick'), ('quick', 'person'), ('person', 'did'), ...] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-28T00:12:53.267

自从提出这个问题并成功回答以来，已经有很长时间了。我受益于创建自己的解决方案的响应。我想分享它：

```
 import regex
    bigrams_tst = regex.findall(r"\b\w+\s\w+", open(myfile).read(), overlapped=True) 
```

这将提供不被标点符号打断的所有二元组。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-15T17:23:31.273

可以使用[scikit-learn](http://scikit-learn.org/) ( ) 中的[CountVectorizer](http://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.CountVectorizer.html)来生成二元组（或更一般地说，任何 ngram）。`pip install sklearn`

示例（使用 Python 3.6.7 和 scikit-learn 0.24.2 测试）。

```
import sklearn.feature_extraction.text

ngram_size = 2
train_set = ['the quick person did not realize his speed and the quick person bumped']

vectorizer = sklearn.feature_extraction.text.CountVectorizer(ngram_range=(ngram_size,ngram_size))
vectorizer.fit(train_set) # build ngram dictionary
ngram = vectorizer.transform(train_set) # get ngram
print('ngram: {0}\n'.format(ngram))
print('ngram.shape: {0}'.format(ngram.shape))
print('vectorizer.vocabulary_: {0}'.format(vectorizer.vocabulary_)) 
```

输出：

```
>>> print('ngram: {0}\n'.format(ngram)) # Shows the bi-gram count
ngram:   (0, 0) 1
  (0, 1)        1
  (0, 2)        1
  (0, 3)        1
  (0, 4)        1
  (0, 5)        1
  (0, 6)        2
  (0, 7)        1
  (0, 8)        1
  (0, 9)        2

>>> print('ngram.shape: {0}'.format(ngram.shape))
ngram.shape: (1, 10)
>>> print('vectorizer.vocabulary_: {0}'.format(vectorizer.vocabulary_))
vectorizer.vocabulary_: {'the quick': 9, 'quick person': 6, 'person did': 5, 'did not': 1, 
'not realize': 3, 'realize his': 7, 'his speed': 2, 'speed and': 8, 'and the': 0, 
'person bumped': 4} 
```

# qt - 形状改变对话框

> ID：12488725
> 
> 赞同：1
> 
> 时间：2012-09-19T04:44:58.377
> 
> 标签：qt, qtgui, qt-signals

我试图使用形状更改对话框，即，当我单击按钮时，对话框的大小应该变大，并带有额外的细节。为此，我在按钮上编写了以下代码：

```
QObject::connect(ui->moreButton, SIGNAL(toggled(bool)), 
    ui->sgroupBox, SLOT(setVisible(bool))); 
```

但我的对话框没有发生任何变化。在这种情况下我该怎么办。

我通过使用 hide() 函数将它们放置在网格中来隐藏额外的细节。额外的细节被隐藏了，但小部件的大小没有改变。

请帮我解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:20:05.840

如果我正确理解您的问题，您是否在单击用户界面中的按钮后尝试调整 QDialog 框的大小？

由于 QDialog 继承自 QWidget，因此您可以调用 QWidget::resize(int width, int height) 方法。

所以现在，要让 QDialog 在您按下按钮时增长，您只需将 toggled(bool) 信号连接到一个插槽，然后调用调整大小。

IE。

```
QObject::connect(ui->moreButton, SIGNAL(toggled(bool)), whateverClassManagesYourQDialog, onButtonToggled(bool)); 
```

然后在管理 QDialog 的类中实现这个插槽：即。

```
// This is a slot in your class which implements QDialog 
whateverClassManagesYourQDialog::onButtonToggled(bool toggledState){
    ui->sGroupBox.setVisible(toggledState); // This will show or hide sGroupBox
    resize(someIncrement,someIncrement); // This will grow your QDialog
} 
```

# mysql - mysql程序不会让我声明变量

> ID：12488726
> 
> 赞同：0
> 
> 时间：2012-09-19T04:45:28.813
> 
> 标签：mysql, procedure, typeconverter, declare

我对这个过程的目标是使用星期几来确定服务的调整价格。例如，在周末，价格上涨 10%。周一和周五，价格是一样的。周二至周四减少 5%。最后的信息应该是新的调整价格。

我以为我这样做是正确的。但是我在声明值方面遇到了重大错误。

任何帮助将不胜感激。谢谢你。

```
Create procedure DayOfWeek( inout p_price decimal(7,2), inout p_date date, out v_msg varchar(10))
begin
    declare increase10 double;
    set increase10 = p_price * (1.1);

    declare decrease5 double;   
    set decrease5 = p_price * (0.95);

    declare increase10cast varchar(10); 
    set increase10cast := cast(increase10 as char);

    declare decrease5cast varchar(10); 
    set decrease5cast := cast(decrease10 as char);

    declare regular varchar(10);
    set regular := cast(p_price as char );

    case 
    when p_price is null then
        set v_msg := 'null';
    when p_date is null then
        set v_msg := 'null';
    when weekday(p_date) in (0, 6) then
        set v_msg := increase10cast;
    when weekday(p_date) in (1, 5) then
        set v_msg := regular;   
    when weekday(p_date) in (2, 2, 4) then
        set v_msg := decrease5cast;
    end case;   

end;
# 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:52:28.757

首先声明所有变量，然后执行 set 语句 -

```
Create procedure a05_AdjustPrice_ByDayOfWeek( in p_price decimal(7,2), in p_date date, out v_msg varchar(10))
begin
    declare increase10 double;
    declare decrease5 double;   
    declare increase10cast varchar(10); 
    declare decrease5cast varchar(10); 
    declare regular varchar(10);

    set increase10 = p_price * (1.1);    
    set decrease5 = p_price * (0.95);    
    set increase10cast := cast(increase10 as char);    
    set decrease5cast := cast(decrease5 as char);    
    set regular := cast(p_price as char );

    case 
    when p_price is null then
        set v_msg := 'null';
    when p_date is null then
        set v_msg := 'null';
    when weekday(p_date) in (0, 6) then
        set v_msg := increase10cast;
    when weekday(p_date) in (1, 5) then
        set v_msg := regular;   
    when weekday(p_date) in (2, 2, 4) then
        set v_msg := decrease5cast;
    end case;   

end; 
```

Declare 语句必须位于 Begin...End 块的开头。参考[文档](http://dev.mysql.com/doc/refman/5.0/en/declare.html)

将 INOUT 参数更改为 IN 参数。你可以像这样执行它 -

```
call a05_AdjustPrice_ByDayOfWeek(100, '2012-09-09', @msg);
select @msg; 
```

# c++ - 在多线程 C++ 服务器应用程序中处理非常量全局配置

> ID：12488733
> 
> 赞同：2
> 
> 时间：2012-09-19T04:46:22.640
> 
> 标签：c++, multithreading, configuration, thread-safety, global-variables

我正在设计一个多线程 c++ 服务器应用程序，它在自己的线程中为客户端提供服务，并且还有各种其他工作线程来执行其他任务。

所有这些线程都将依赖于一个文本配置文件，该文件需要能够在不退出并重新启动进程的情况下重新散列。

我目前正在考虑让每个客户端和工作线程都有自己的配置对象副本，然后在每次重新散列时进行此更新。

我发现的一件事是，将配置传递给我更喜欢的所有其他实用程序函数，并且不认为应该是上述类的一部分似乎变得非常乏味。

除了需要大量同步的痛苦之外，拥有一个全局配置会容易得多。

对如何解决在线程应用程序中具有非恒定全局配置的任何想法持开放态度！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T05:49:37.947

我喜欢这样做的方式是始终将配置作为 shared_ptr 携带到 const 对象。每当您需要配置时（请记住一致性；通常最好使用相同的配置处理整个请求，即使该配置在请求处理代码结束时在技术上已经过时），您会得到一个 shared_ptr 。后台工作任务可以在工作周期的方便点重置其 shared_ptr 的值，试图避免保持配置太久（因为它可能会过时）。

如果只有一项任务可以更改配置，则效果很好；它构造了一个全新的配置对象，然后重置它的 shared_ptr，[edit] 它用锁保护它，见下文[/edit]。一旦没有其他任务使用旧配置对象，旧配置对象就会消失。

一个细节：您不能传递指向配置对象部分的指针，除非您确定只要指针持续存在，您就会保留指向该配置对象的 shared_ptr。如果配置包括例如名称到子配置的映射，这可能会很烦人。

虽然共享指针有一些开销，但它可能比保持配置的整个副本同步要少（当然，除非配置很小，如果是这样，我们可能不会进行这种对话）。在大多数应用程序中，配置更改相对较少，因此在任何给定时间您都不太可能拥有两个以上的配置对象。您通常可以安排将 shared_ptr 创建为每个请求一个，因此 shared_ptr 同步是微不足道的。

YMMV，但我发现效果很好。

[编辑] 正如几位评论者所指出的，我应该明确说明锁定要求。配置更新程序保留一个主 shared_ptr，它受到读写锁的保护。它在更新指针时需要持有写锁。它还导出一个接口，该接口将 shared_ptr 返回到当前配置；该接口在持有读锁的同时复制 shared_ptr。由于配置更改很少且 shared_ptr 很小，因此锁争用非常少。 [1]

除了配置任务本身，没有人需要担心锁，因为其他 shared_ptr 不应该被多个任务共享：每个任务都应该有自己的。

[1] 在我写这篇文章的时候，我意识到我一直这样做的方式，包括在主 shared_ptr 上调用 .reset，如果配置的析构函数很慢（如果例如，配置包含大量的 std::string)。最好扩展 reset 的实现（这只是一个带有临时 NULL shared_ptr 的交换），将交换放在锁守卫内并让（临时的）析构函数解锁运行。但是，考虑到配置更改非常罕见（至少在我与之关联的任何服务器中），我怀疑它是否会产生任何明显的差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T05:03:31.283

我不明白这部分：

*我发现的一件事是，将配置传递给我更喜欢的所有其他实用程序函数，并且不认为应该是上述类的一部分似乎变得非常乏味。*

无论如何，请查看**thread-local storage**。您可以创建一个线程本地的单例配置对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T05:38:18.920

这可以通过所有线程共享的单个配置对象来处理。这个配置类应该有 2 个部分：

1.  读取和解析配置文件
2.  所有线程访问配置数据

配置文件的读取和解析应该只从一个线程处理，最好是主线程。这部分将与其余线程隔离。进行更新后，其余线程访问的配置数据可以通过使用写锁的 pthread_rwlock 进行更新。当线程访问配置数据时，它们应该使用读锁。

如果您不熟悉 rw（读/写）锁，则可能存在多个不会阻塞的同时读锁，除非正在执行写锁。一次只能有一个写锁。因此，在这种情况下，所有线程都可以同时读取配置数据，而不会发生任何锁定争用。只有在 rehash 后主线程更新配置数据时，读取时才会锁定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T05:08:12.053

根据定义，如果线程正在访问和改变对象，在多线程应用程序中拥有可变全局对象将需要同步。您可以保留全局配置，但有一些注意事项，如果您在访问配置时添加额外的层，仍然不必担心同步。每个线程都可以有一个指向全局配置的指针，如果每个线程都只是从配置中读取，那么这很好。但是，当您需要更改配置时，请为您正在访问的成员设置一个标志并将其存储在线程本地的某个位置。每次访问配置时，都必须检查此标志，然后返回适当的数据。这在代码设计中具有相当大的优势，并且它迫使您充实配置接口，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T09:58:37.190

除了已经发布的解决方案之外，另一个好的解决方案是数据库表。数据库可以通过配置提供更好的事务控制，从而提供更好的数据完整性。它可以在对现有配置进行不适当更改的情况下提供保护，因为更改是基于旧的、过时的配置。

是的，它对于 OP 的使用来说速度较慢并且可能会过度杀伤，（特别是如果还没有 DB 的话！），但为了完整起见，应该提到它。

# ios - 引导错误和图像未在 ios 设备上加载

> ID：12488734
> 
> 赞同：0
> 
> 时间：2012-09-19T04:46:31.483
> 
> 标签：ios, iphone, xcode, bootstrapping

在我的 iOS 设备上测试我的项目时，出现了一个引导错误，在重新启动设备和删除应用程序时得到了解决。但是现在当我尝试在设备上加载应用程序时，图像不会加载！我尝试了有关无法加载图像的所有方法，但没有任何效果！为了解决这个问题，我不得不将整个项目移植到一个新的 xcode 项目中，然后它就起作用了！我想知道是否有更简单的解决方案！

提前谢谢！

**解决方案**这是一个 XCODE 问题！它开始向我展示一些有趣的错误，比如 UIKIT 、 FOUNDATION FRAMEWORK not found！我将我的 lion 更新为 10.7.4，将 Xcode 更新为 4.4，它现在可以正常工作了！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:57:09.593

确保您的图像已添加到项目目标中。有时您会看到资源，但这并不意味着它们已附加到目标。要更好地检查这一点，请在单击项目后转到**摘要选项卡。**在**copyBundleResources**下的**buildPhases**检查是否列出了图像。

当您将任何图像添加到 xCode 项目时，请确保选中**addToTarget**。

快乐编码..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T08:04:56.813

解决方案 这是一个 XCODE 问题！它开始向我展示一些有趣的错误，比如 UIKIT 、 FOUNDATION FRAMEWORK not found！我将我的 lion 更新为 10.7.4，将 Xcode 更新为 4.4，它现在可以正常工作了！:)

# php - 在 if 语句（PHP）中结合赋值和相等时的奇怪结果

> ID：12488736
> 
> 赞同：0
> 
> 时间：2012-09-19T04:46:56.667
> 
> 标签：php, debugging

在 CentOS 上的 PHP 5.3.10 中测试。

在脚本中运行：

```
$test = "62 3/4";

if($pos = strpos($test,' ') !== false) {
  $test= substr($test,0,$pos); // use $pos
}
// $test is "6" 
```

在另一个独立的脚本中，我运行：

```
if($pos = strpos($test,' ') !== false) {
  $test = substr($test,0,strpos($test,' ')); // redo substr calculation
}
// $test is "62" 
```

$pos 应该是 2（第三个字符是空格，从零开始，0,1,2），所以 $test 都应该是“62”，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T04:51:33.433

运算符优先！`!==`出现在前面`=`，所以测试有效地变成了

```
if($pos = (strpos($test,' ') !== false)) 
```

这将评估为真或假，而不是字符串位置。

始终使用显式括号：

```
if(($pos = strpos($test,' ') !== false) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T04:53:04.113

你要

```
if( ($pos = substr($test, ' ')) !== false ) {
    // ...
} 
```

请参阅[PHP 运算符优先级](http://php.net/manual/en/language.operators.precedence.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T05:00:20.073

还要考虑在第二个 if 中，变量 $test 的值已经被第一个更改了： $test= substr($test,0,$pos);

# c - C在Tokenizer程序getNextToken函数中动态分配的内存

> ID：12488746
> 
> 赞同：0
> 
> 时间：2012-09-19T04:48:11.050
> 
> 标签：c, memory-management, tokenize

下面是一个用于在执行标记化的程序中获取下一个标记的函数。它目前正在运行，但我仍然不确定它是否符合我教授的要求。如果您查看顶部评论部分，他说“应该动态分配返回令牌的空间”。

每当我听说我希望我必须使用*malloc*时，但我没有使用*malloc*就做到了。我这样想对吗？

```
/*
 * TKGetNextToken returns the next token from the token stream as a
 * character string.  Space for the returned token should be dynamically
 * allocated.  The caller is responsible for freeing the space once it is
 * no longer needed.
 *
 * If the function succeeds, it returns a C string (delimited by '\0')
 * containing the token.  Else it returns 0.
 *
 * You need to fill in this function as part of your implementation.
 */
char *TKGetNextToken(TokenizerT *tk) {
char *sPtr, *tPtr, *delim, *temp = NULL, *ret = NULL;

sPtr = tk->sepr; //pointer to the separators

tPtr = tk->ts;
temp = tPtr;

while (tPtr[0] != '\0') //Scan tokenstream
{
    delim = tk->sepr;
    while (delim[0] != '\0') //scan separator stream 
    {
        if (*tPtr == *delim) //Matched with a separator
        {
            if (tPtr == temp) //Check if beginning of the tokenstream
            {
                //then skip over this character.
                temp++;
                break; //Break loop because it may skip checking a char with a prev delim.
            }
            else
            {
                //Cut off current position with null character and pass over it.
                *tPtr = '\0';
                tPtr++;

                if((ret = malloc(sizeof temp) + 1 * sizeof(char)) != NULL) //add 1 for null character '\0'
                    strcpy(ret, temp);

                tk->ts = tPtr; //In position for next token.

                return ret;
            }
        }
        else
        {
            delim++; //Go to next separator.
        }

    }

    tPtr++; //Go to next character.
    count++;
}

if((ret = malloc(sizeof temp) + 1 * sizeof(char)) != NULL) //add 1 for null character '\0'
    strcpy(ret, temp);

tk->ts = tPtr;
return ret;
} 
```

编辑：所以我想我修复了它，但很好奇，像我一样使用 malloc ，这不是只为指针地址而不是整个令牌分配空间吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T04:56:02.863

这是一种可能的实施方式，但不是您的教授要求的实施方式。您的教授希望您分配内存并将令牌复制到其中，然后返回指向该分配内存的指针。

# regex - Perl 中多“START”模式期间的触发器使用

> ID：12488748
> 
> 赞同：0
> 
> 时间：2012-09-19T04:48:23.750
> 
> 标签：regex, perl

我有一个 Test.txt 文件，如下所示：

```
some data1 func-name1 SECTION.
data to be extracted
data to be extracted
some data2 func-name2 SECTION.
data to be extracted
data to be extracted
func-name2-EXIT. EXIT. 
```

现在，我正在使用触发器运算符来提取范围，其中我的 START= *SECTION。*和 END= *- 退出。出口。*如下：

```
open FILE1, "<Test.txt" 
    or die "Cannot open File1.txt!";

open FINAL, ">Final.txt" 
    or die "Cannot open Finall.txt!";

my $START = 'SECTION.';
my $END   = '-EXIT EXIT.';

while (<FILE1>) {
    if (/$START/ .. /$END|$START/) {

        if ($_ =~ m/$END|$START/) {
            $flag = 1;
        }

        print FINAL $_;

        if ($flag == 1) {          
            print FINAL "\n\n";
            $flag = 0;
        }
    }
}
close FINAL;
close FILE1; 
```

我想要做的是，我需要两个下一行作为*SECTION 之间的分隔符。*范围也和我的 Final.txt 应该如下所示：

```
some data1 func-name1 SECTION.
data to be extracted
data to be extracted

some data2 func-name2 SECTION.
data to be extracted
data to be extracted
func-name2-EXIT. EXIT. 
```

请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T05:27:38.467

你不需要触发器：

```
#!/usr/bin/env perl
use strict;
use warnings;

my $first = 0;

while (<DATA>) {
    print /SECTION/ && $first++ ? "\n\n$_" : $_;
}

__DATA__
some data1 func-name1 SECTION.
data to be extracted
data to be extracted
some data2 func-name2 SECTION.
data to be extracted
data to be extracted
func-name2-EXIT. EXIT. 
```

我计算节`$first`以确保在第一节之前没有插入换行符，但如果第一节从第一行开始，您可以只使用特殊变量`$.`并替换`$first++`为`$. > 1`.

表达式的第一部分`/SECTION/ && $first++`对每一行进行评估。`/SECTION/`是简写，`$_ =~ /SECTION/`这意味着如果`SECTION`找不到字符串，则按原样打印该行 ( `$_`)。

如果`SECTION`找到`$first++`被评估。请注意，使用后缀递增是因为我们希望`$first`对第一部分求值`0`( `false`) 以便它按原样 ( `$_`) 打印，并且两个换行符仅添加到后续部分 ( `"\n\n$_"`) 之前。

# html - 记事本（微软免费版）创建的 HTML 文件不会在 IE 中显示图像

> ID：12488753
> 
> 赞同：0
> 
> 时间：2012-09-19T04:49:11.140
> 
> 标签：html, internet-explorer, notepad

我正在通过开始 HTML 帮助同学。她在记事本（操作系统中的微软免费版本）中创建的 html 文件，在 IE 中查看时不显示图像（本地文件、本地图像）。代码已经在 w3 验证器中成功验证，我们多次检查图像和文件路径，图像名称，扩展名，一切都正确。

其他浏览器会显示图像（Safari、Opera、Firefox），但 IE 不会。我和他们都无法从她创建的文件中将图像显示在 IE 中。当我将*相同的确切代码*复制到新文档中时，删除旧文档 rename new with old name，包括 IE 在内的所有浏览器都显示图像，但没有代码更改。同样，我的相同结构的页面（这部分都是直接从教科书作为练习复制的）我的文件工作得很好。

我开始认为她的记事本安装可能有问题或已损坏。有人用记事本经历过类似的事情吗？任何人都知道帮助比新手重新安装记事本的好资源 - 或者您对文本编辑器有其他建议吗？谢谢！

对于那些不相信我的人，这是无效的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="keywords" content="CIW, XHTML 1.0, Habitat for Humanity"/>
<meta name="Description" content="Simple XHTML page for Habitat site"/>

<link rel="stylesheet" type="text/css" href="syb/syb.css" title="stylesheet"/>

<title>Habitat for Humanity International Summer Youth Blitz Program</title>
</head>

<body bgcolor="white">
<blockquote>
<img src="syb/SYBcollage2.png" alt="Join a summer build!"/>
</blockquote>

<h1>Join a Summer Build for Teen-agers</h1>

<blockquote>
<p>
The <em>Summer Youth Blitz</em> is a unique service experience for a diverse group of youth,
<br/>ages 16 to 18, from high schools and youth organizations around the United States. <br/>
During this program, 15 to 20 youth participants and adult leaders <br/>"blitz build" an entire
Habitat house in two weeks.
</p>
</blockquote>

<hr width="800" size="5" align="center"/>

<blockquote>
<div align="center">For more information, contact us at (800) 422-4828, ext.
2220.</div>
</blockquote>

</body>
</html> 
```

这是工作代码...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="keywords" content="CIW, XHTML 1.0, Habitat for Humanity"/>
<meta name="Description" content="Simple XHTML page for Habitat site"/>

<link rel="stylesheet" type="text/css" href="syb/syb.css" title="stylesheet"/>

<title>Habitat for Humanity International Summer Youth Blitz Program</title>
</head>

<body bgcolor="white">
<blockquote>
<img src="syb/SYBcollage2.png" alt="Join a summer build!"/>
</blockquote>

<h1>Join a Summer Build for Teen-agers</h1>

<blockquote>
<p>
The <em>Summer Youth Blitz</em> is a unique service experience for a diverse group of youth,
<br/>ages 16 to 18, from high schools and youth organizations around the United States. <br/>
During this program, 15 to 20 youth participants and adult leaders <br/>"blitz build" an entire
Habitat house in two weeks.
</p>
</blockquote>

<hr width="800" size="5" align="center"/>

<blockquote>
<div align="center">For more information, contact us at (800) 422-4828, ext.
2220.</div>
</blockquote>

</body>
</html> 
```

不知道如何说服不满意的人它是相同的代码。我只是再次尝试以确保我没有发疯。将她的 CODE 复制/粘贴到一个新文档中 - 每个字符都相同。她创建并压缩给我的文档不显示图像。我使用完全重复的代码创建的文档确实可以正常显示图像，但问题仅出现在 IE 中。我很感激你们都比我知道的多，这就是我在这里的原因，但是因为你不相信而投票否决，是什么给出的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T05:00:39.040

确保您的文件保存为 htm 或 HTML 扩展名，有时在 Windows 中扩展名是隐藏的，因此您可能还需要检查文件夹选项，您正在保存的文件有 some_page.htm 或 some_page.html 而不是 some_page.htm.txt ……

就html而言。

HTML应该写得很好，并且图像应该像这样在body标签中

```
<html>
<head>
<title>Title of the page
</title>
</head>
<body>

<img height="175" align="center"src="images/Picture_5.png" border="0">
</body>
</html> 
```

确保路径正确写入，如上例所示，路径是相对的，图像存储在图像文件夹中，该文件夹与 html 文件所在的位置相同。

# html - 从自定义位置添加 CSS？

> ID：12488764
> 
> 赞同：2
> 
> 时间：2012-09-19T04:51:24.860
> 
> 标签：html, css

如果我将 div 元素添加到另一个网站，有没有办法将 CSS 应用到 div 元素而不将 CSS 添加到标签上方？CSS 文件太大，不适合 div 元素的样式。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:53:00.617

你可以在里面添加另一个网站css的`href`链接`link`

```
<link rel="stylesheet" type="text/css" href="here the link of external website css " /> 
```

但不要因为设计可能受版权保护，请仔细阅读条款和条件以及版权政策

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:55:34.347

你想要达到的目标还不够清楚。好像每个人的理解都不一样。您需要提供一些示例代码以使其更清晰。您可能需要一个外部 .css 文件，您可能需要一些 jquery 脚本，您可能需要注册用户建议的样式表链接等。

# r - 为什么 R 舍入函数不舍入大数字

> ID：12488771
> 
> 赞同：16
> 
> 时间：2012-09-19T04:52:19.677
> 
> 标签：r, math, statistics, rounding

我需要一个 R 函数，无论参数有多大，它总是在小数点后返回相同的位数。我试过 round() 但它不能这样工作。这是我的例子：

```
Rweb:> round(111234.678912,4) # expect 111234.6789
[1] 111234.7 
Rweb:> round(111234.678912/10,4) # expect 11123.4679    
[1] 11123.47 
Rweb:> round(111234.678912/100,4) # expect 1112.3468      
[1] 1112.347 
Rweb:> round(111234.678912/1000,4)     
[1] 111.2347 
Rweb:> round(111234.678912/10000,4)     
[1] 11.1235 
```

如果参数是指数格式，它确实有效，但我需要使用浮点格式的数字。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-19T04:54:33.583

它*确实*将数字四舍五入到正确的位数。但是，R 对它显示的非常大的数字的位数有限制。那就是-那些数字在那里，只是没有显示出来。

你可以这样看：

```
> round(111234.678912,4)
[1] 111234.7
> round(111234.678912,4) - 111234
[1] 0.6789 
```

您可以使用`formatC`任何所需的位数显示它：

```
> n = round(111234.678912,4)
> formatC(n, format="f")
[1] "111234.6789"
> formatC(n, format="f", digits=2)
[1] "111234.68" 
```

正如@mnel 有用地指出的那样，您还可以使用以下方法设置显示的位数（包括小数点左侧的位数）`options`：

```
> options(digits=6)
> round(111234.678912,4)
[1] 111235
> options(digits=10)
> round(111234.678912,4)
[1] 111234.6789 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T13:21:04.797

对于像我一样认为问题将是关于 bignums 的其他任何人 :-)，有这个需要思考 :-)

```
 Rgames> bfoo<-mpfr("1.234545678909887665453421")
 Rgames> bfoo
 1 'mpfr' number of precision  84   bits 
  [1] 1.234545678909887665453421
 Rgames> round(bfoo,10)
 1 'mpfr' number of precision  84   bits 
 [1] 1.23454567889999999999999999` 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-16T11:47:20.127

```
let x is a number with big decimal places.
x<-1111111234.6547389758965789345 
```

这里 x 是一个小数位大的数字，您可以根据需要格式化小数位。这样我们希望这个数字最多保留 8 位小数。

```
 x<-c(1111111234.6547389758965789345)
y<-formatC(x,digits=8,format="f")
 [1] "1111111234.65473890" 
```

这里 format="f" 给出通常小数位的数字，比如 xxx.xxx。但是如果你想从这个对象 x 中获取一个整数，你可以使用 format="d"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-23T18:55:26.643

关于“bignums”，@Carl Witthoft：谢谢，Carl。...当我读到它时，我确实想到了 bignums。你确定四舍五入有问题吗？看到这个：

```
> mpfr("1.2345456789", prec=84)
1 'mpfr' number of precision  84   bits
[1] 1.23454567889999999999999999 
```

并注意 Rmpfr（我是维护者）确实靠近底层 MPFR 库。对于`round()`，我应用了 f(x) 的逻辑/原理，返回与 x 具有相同形式精度的结果。如果您想以降低形式精度进行舍入，您可以方便地使用`roundMpfr()`：

```
> roundMpfr(bfoo, 32)
1 'mpfr' number of precision  32   bits 
[1] 1.2345456788 
```

# jquery - fullCalendar.js - 无法拖过下午 4:30

> ID：12488781
> 
> 赞同：-1
> 
> 时间：2012-09-19T04:53:34.000
> 
> 标签：jquery, fullcalendar

在议程模式下，我完全无法将事件拖过一天中的某个时间。有没有人经历过类似的事情？我从上到下查看了每一个文档，但无济于事。我正在使用 Google 加载的 jQuery 和 jQuery UI 以及 FullCalendar v1.5.4。

当我将事件拖动到任何其他部分时 - eventDrop 函数注册并且一切正常，但是一旦我经过下午 4:30（可能是下午 5:00），拖动函数就会恢复并且事件被移回它开始的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:40:43.560

`line-height`就我而言，问题在于 CSS 类中的覆盖`.ui-widget-header`。

如果你有它，请尝试删除它，看看是否可以修复它。

# c# - 在运行时编译代码时添加额外的引用

> ID：12488782
> 
> 赞同：2
> 
> 时间：2012-09-19T04:53:35.690
> 
> 标签：c#, asp.net, codedom, system.diagnostics, json.net

我找到了这个程序（[http://support.microsoft.com/kb/304655](http://support.microsoft.com/kb/304655)），我在运行时编译代码，它适用于使用引用的代码，

```
using System; 
```

以下是在运行时编译代码的程序的代码，

```
 CSharpCodeProvider codeProvider = new CSharpCodeProvider();
        ICodeCompiler icc = codeProvider.CreateCompiler();

        string Output = "Out.exe";
        Button ButtonObject = (Button)sender;

        textBox2.Text = "";
        System.CodeDom.Compiler.CompilerParameters parameters = new CompilerParameters();
        //Make sure we generate an EXE, not a DLL
        parameters.GenerateExecutable = true;
        parameters.OutputAssembly = Output;
        CompilerResults results = icc.CompileAssemblyFromSource(parameters, textBox1.Text);

        if (results.Errors.Count > 0)
        {
            textBox2.ForeColor = Color.Red;
            foreach (CompilerError CompErr in results.Errors)
            {
                textBox2.Text = textBox2.Text +
                            "Line number " + CompErr.Line +
                            ", Error Number: " + CompErr.ErrorNumber +
                            ", '" + CompErr.ErrorText + ";" +
                            Environment.NewLine + Environment.NewLine;
            }
        }
        else
        {
            //Successful Compile
            textBox2.ForeColor = Color.Blue;
            textBox2.Text = "Success!";
            //If we clicked run then launch our EXE
            if (ButtonObject.Text == "Run") Process.Start(Output);
        } 
```

以下是我需要在运行时编译的代码，

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Net;
    using System.Text.RegularExpressions;
    using Newtonsoft.Json.Linq;

    namespace Tsubame
    {
        class Program
        {
            static void Main(string[] args)
            {
                HttpWebRequest req = (HttpWebRequest)WebRequest.Create(@"url");

                // Create Client
                WebClient client = new WebClient();

                // Assign Credentials
                client.Credentials = new NetworkCredential("user", "pass");

                //Grab Data
                var data = client.DownloadString(@"url");

                JObject o = JObject.Parse(data);
                string getFristRow = Convert.ToString(o["Body"][0]["RowId"]);

                string encaplulateStart = "\\\"";
                string encaplulateEnd = "\\\":";

                List<string> _matches = new List<string>();
                _matches = Regex.Matches(getFristRow, @"(?<=" + encaplulateStart + ").*(?=" + encaplulateEnd + ")")
                                    .Cast<Match>()
                                    .Select(m => m.Value)
                                    .ToList();

                foreach (string head in _matches)
                {
                    Console.WriteLine(head);

                }
                Console.ReadLine();
            }
        }
    } 
```

但是当我输入这给出错误代码时，

```
 Error Number: CS0234 
```

对于系统以外的参考。请问我可以知道如何在运行时添加额外的引用，以便它可以成功编译:) 非常感谢:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T05:52:19.280

您需要在`CompilerParameters`using中添加引用[`CompilerParameters.ReferencedAssemblies`](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.compilerparameters.referencedassemblies.aspx)：

```
var parameters = CompilerParameters
{
    GenerateExecutable = true,
    OutputAssembly = Output,
    ReferencedAssemblies = {
        "System.dll",
        "System.Core.dll",
        // etc
    }
}; 
```

（当然，您不必使用对象初始化器语法来设置它，但它使 IMO 更整洁。）

# php - 如何在 json 中包含一个 php 变量并传递给 ajax

> ID：12488784
> 
> 赞同：5
> 
> 时间：2012-09-19T04:53:41.083
> 
> 标签：php, javascript, ajax, json

*我的代码*

```
var json = xmlhttp.responseText; //ajax response from my php file
obj = JSON.parse(json);
alert(obj.result); 
```

*在我的 php 代码中*

```
 $result = 'Hello';

 echo '{
        "result":"$result",
        "count":3
       }'; 
```

问题是：当我提醒时`obj.result`，它显示`"$result"`，而不是显示`Hello`。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-19T04:58:55.623

您的示例的基本问题`$result`是包含在单引号中。所以第一个解决方案是打开它，例如：

```
$result = 'Hello';
echo '{
    "result":"'.$result.'",
    "count":3
}'; 
```

但这仍然不是“足够好”，因为它总是可能`$result`包含一个`"`字符本身，导致例如 ，`{"result":""","count":3}`它仍然是无效的 json。`$result`解决方案是在将其插入 json 之前对其进行转义。

这实际上非常简单，使用[`json_encode()`](http://php.net/manual/en/function.json-encode.php)函数：

```
$result = 'Hello';
echo '{
    "result":'.json_encode($result).',
    "count":3
}'; 
```

或者，更好的是，我们可以让 PHP 自己完成整个 json 编码，方法是传入整个数组而不是仅仅`$result`：

```
$result = 'Hello';
echo json_encode(array(
    'result' => $result,
    'count' => 3
)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-19T04:58:28.413

您应该使用[`json_encode`](http://php.net/json_encode)正确编码数据：

```
$data = array(
    "result" => $result,
    "count"  => 3
);
echo json_encode($data); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T04:56:03.800

您在回声中使用单引号，因此没有发生字符串插值

使用[json_encode()](http://php.net/manual/en/function.json-encode.php)

```
$arr = array(
    "result" => $result,
    "count" => 3
);
echo json_encode($arr); 
```

作为奖励，`json_encode`将正确编码您的响应！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T04:57:09.773

尝试：

```
$result = 'Hello';
echo '{
   "result":"'.$result.'",
   "count":3
}'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T05:01:07.510

```
$result = 'Hello';

$json_array=array(
  "result"=>$result,
  "count"=>3
)
echo json_encode($json_array); 
```

就这样。

# ssis - 检查ssis中条件拆分转换中的日期格式

> ID：12488793
> 
> 赞同：0
> 
> 时间：2012-09-19T04:54:40.323
> 
> 标签：ssis

我有一个包含错误日期的平面文件，例如 [02/02/0200]。我想将数据导出到 sql 表中。我正在对日期列使用条件拆分或派生列转换。

我希望正确的日期进入主表，错误行进入错误表。

您能否让我知道我必须对日期列使用什么表达式。

谢谢，吉特什·加格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:46:53.693

当您转换日期 [02/02/0200] 时，它将是 200 年 02 月 02 日。所以你需要消除无意义的日期。这将消除低于 2000 年的日期。

```
(DT_DATE)([YourDate]) > (DT_DATE)(2000 - 01 - 01) 
```

好的，所以新的派生列语句（bccPostDate - 数据类型是“unicode string”）：

```
((DT_I4)(SUBSTRING(bccPostDate,1,2))) > 12 || ((DT_I4)(SUBSTRING(bccPostDate,4,2))) > 31 || ((DT_I4)(SUBSTRING(bccPostDate,7,4))) < 1900 ? "" : bccPostDate 
```

正在工作我已经尝试过使用 Years 并且此语句返回具有“Unicode 字符串”数据类型的列。

# c# - 如何在 Visual c# 2010 中添加自动编号？使用 ms 访问？

> ID：12488796
> 
> 赞同：0
> 
> 时间：2012-09-19T04:55:03.763
> 
> 标签：c#, ms-access

我正在使用自动编号，但它对我不起作用。我想在我的 StudentID 号码中自动编号。

```
OleDbCommand system = new OleDbCommand();
system.CommandType = CommandType.Text;
system.CommandText = 
"insert into Student(ID, Lastname, Middlename, Firstname, Address, DateofBirth, Birthplace, Contact_number, emailaddress, guardian_name, Guardian_contact) values ('" + txtStudentIDnumber.Text + "','" + txtlastname.Text + "','" + txtfirstname.Text + "','" + 
txtmiddlename.Text + "','" + txtaddress.Text + "','" + txtdateofbirth.Text + "','" + txtbirthplace.Text + "','" + txtcontactnumber.Text + "','" + txtemailaddress.Text + "','" + txtGuardianname.Text + "','" + txtguardiancontact.Text + "')";
system.Connection = mydatabase;

if (MessageBox.Show("Save data?", "Confirm Save", MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:05:09.293

首先，您应该像这样指定身份列：

![在此处输入图像描述](../Images/3a07bd8ff56ea07e6ba653adac2c5511.png)

然后你的代码：

```
 OleDbConnection con = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\db.accdb");
            OleDbCommand cmd = new OleDbCommand();
            cmd.CommandType = CommandType.Text;
            cmd.CommandText = string.Format("insert into Student(LastName,...) values('{0}',...)",txtLastName.Text.Trim(),...);
            cmd.Connection = con;
            con.Open();
            cmd.ExecuteNonQuery();
            con.Close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T06:39:25.240

如果没有数据库架构或错误消息，很难确定问题。但是，问题可能是因为您尝试在列中插入一个值，而该`ID`列可能启用了自动编号（也称为计数器）。改变：

```
system.CommandText = "insert into Student(ID, Lastname, ..."; // And so on 
```

至

```
system.CommandText = "insert into Student(Lastname, ..."; // And so on 
```

还要考虑将查询更改为参数化查询（例如在['s' 附近的不正确语法中提到的查询。字符串 ')' 后的非闭合引号](https://stackoverflow.com/questions/12244540/incorrect-syntax-near-s-unclosed-quotation-mark-after-the-character-string/12244623#12244623)）而不是使用连接来避免 SQL 注入和转义问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T06:41:18.607

您的 ID 列应该设置为一个身份（在数据库中），然后您应该从插入中省略它。

[http://forums.asp.net/t/1492834.aspx/1](http://forums.asp.net/t/1492834.aspx/1)

**更新**

我怀疑您的 StudentIdNumber 是一个实际的州颁发的 ID 号，而您正在寻找的是一个身份字段。

您需要使用用于创建表的表设计器或使用脚本向表中添加标识列

```
CREATE TABLE Student(
   ID int identity, 
   StudentIdNo varchar(10), 
   Lastname varchar(10), 
   Firstname varchar(10), 
   Middlename varchar(10), 
   CONSTRAINT AutoIncrementTest_PrimaryKey PRIMARY KEY (ID)
) 
```

*这将是您的插入语句的格式，请注意没有 ID 字段*

```
"INSERT INTO Student (StudentIdNo, Lastname, Firstname, Middlename) VALUES (?)" 
```

***...在您的情况下，添加身份字段后***

```
 OleDbCommand comm = new OleDbCommand();
   comm.CommandType = CommandType.Text;

   comm.CommandText = 
       @"insert into Student(StudentIdNo, Lastname, Firstname, Middlename) 
                     values (@StudentIdNo, @Lastname, @Firstname, @Middlename)"; 

   comm.Parameters.AddWithValue("@StudentIdNo", txtStudentIdNo.Text);
   comm.Parameters.AddWithValue("@Lastname", txtlastname.Text);
   comm.Parameters.AddWithValue("@Firstname", txtfirstname.Text);
   comm.Parameters.AddWithValue("@Middlename", txtmiddlename.Text);

   comm.Connection = mydatabase; 
```

# javascript - 使用 javascript 为 body 标签创建类

> ID：12488797
> 
> 赞同：0
> 
> 时间：2012-09-19T04:55:07.607
> 
> 标签：javascript, class, dynamic

我有多个页面需要一致`<body>`的类，以及每页一个唯一的类。我想动态设置这些值以消除在页面级别管理常量类。

理想的解决方案将从一个空`<body>`标签开始，创建的 javascript 将允许我在需要时注入类。潜在的属性是

```
tabClass, catClass, secClass, pageClass 
```

这些的任何组合都可以存在，包括根本不存在。谁能帮我这个？我正处于学习 Javascript 的初级阶段，所以我现在为我的无知道歉。谢谢。

理想的输出是：

```
bodyClasses = (tabClass, catClass, secClass)
pageClass = (pageClass) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T05:29:31.063

在开始`<body>`标记后某处的脚本元素中：

```
var commonClasses = "tabClass catClass secClass",
    currentPageClasses;

/* Your own logic here to determine what classes apply to the
   current page, add them to currentPageClasses variable */

document.getElementsByTagName("body")[0].className += " "
                                                   + commonClasses
                                                   + " "
                                                   + currentPageClasses; 
```

演示：http: [//jsfiddle.net/nnnnnn/FhMP8/](http://jsfiddle.net/nnnnnn/FhMP8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T05:42:01.767

似乎您需要一些功能，例如：

```
var util = util || {};

util.trim = function(s) {
  return s.replace(/(^\s+)|(\s+$)/g,'').replace(/\s+/g,' ');
}

util.dom = util.dom || {};

util.dom.hasClassName = function(el, cName) {
    if (typeof el == 'string') el = document.getElementById(el);

    var re = new RegExp('(^|\\s+)' + cName + '(\\s+|$)');
    return el && re.test(el.className);
}

util.dom.addClassName = function(el, cName) {

    if (typeof el == 'string') el = document.getElementById(el);

    if (!util.dom.hasClassName(el, cName)) {
        el.className = util.trim(el.className + ' ' + cName);
    }
}

util.dom.addClassNames = function(el) {

    if (typeof el == 'string') el = document.getElementById(el);

    for (var i=1, iLen=arguments.length; i<iLen; i++) {
      util.dom.addClassName(el, arguments[i]);
    }
}

util.dom.removeClassName = function(el, cName) {

    if (typeof el == 'string') el = document.getElementById(el);

    if (util.dom.hasClassName(el, cName)) {
        var re = new RegExp('(^|\\s+)' + cName + '(\\s+|$)','g');
        el.className = util.trim(el.className.replace(re, ''));
    }
} 
```

并像这样使用它们：

```
var body = document.body;
util.dom.addClassName(body, 'tabClass'); 
```

addClassNames 函数接受多个参数：

```
util.dom.addClassNames(body, 'tabClass', 'catClass', 'secClass'); 
```

请注意，如果元素已经具有该类，则不会再次添加它。

# asp.net-mvc - 如何在 mvc 中创建自己的 WebViewPage？

> ID：12488800
> 
> 赞同：0
> 
> 时间：2012-09-19T04:55:25.780
> 
> 标签：asp.net-mvc

我想创建自己的 WebViewPage 类，以便我创建了如下所示的类

```
public abstract class iBlueWebViewPage<TModel>:WebViewPage
{
    protected iBlueWebViewPage()
    {
    }
    public HtmlHelper<TModel> iBlue { get; set; }

} 
```

例如，如果我们想要 mvc 中的文本框，我们可以像这样编写 @html.TextBox("Name") 我需要 @iBlue.TextBox("Name") 而不是 @html 我该如何实现？

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:54:49.070

您应该从 Web 配置（**pages**元素）更改页面的基本类型

```
<system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, 
    System.Web.Mvc, Version=3.0.0.0, 
    Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  <pages pageBaseType="MyNamespace.iBlueWebViewPage">
    <namespaces>
      <add namespace="System.Web.Mvc" />
      <add namespace="System.Web.Mvc.Ajax" />
      <add namespace="System.Web.Mvc.Html" />
      <add namespace="System.Web.Routing" />
    </namespaces>
  </pages>
</system.web.webPages.razor> 
```

更详细的阅读[Phil Haack 的文章](http://haacked.com/archive/2011/02/21/changing-base-type-of-a-razor-view.aspx)（示例取自那里）

# mysql - mysql：将两条记录合并为一条

> ID：12488801
> 
> 赞同：2
> 
> 时间：2012-09-19T04:55:33.743
> 
> 标签：mysql, sql, union

我的查询有以下结果集（有两个 SELECT 查询的 UNION）

```
app_id  transaction_id  mobile_no   user_input1                          user_input3                           user_input17                     user_input110                     user_input61            user_input62
104     731           918087318987  Welcome To Onida~Home Appliances    Home Appliances~Washing Machine Washing Machine~Fully Automatic Fully Automatic~SPARKLE 65S                NULL                  NULL
104     731           918087318987      NULL                               NULL                                     NULL                            NULL                           Quantity ~2                Amount~2 
```

我想将这两条记录合并为 1 行

```
app_id  transaction_id  mobile_no   user_input1                          user_input3                           user_input17                     user_input110                     user_input61            user_input62
104     731           918087318987  Welcome To Onida~Home Appliances    Home Appliances~Washing Machine Washing Machine~Fully Automatic Fully Automatic~SPARKLE 65S           Quantity ~2                Amount~2 
```

我可以提供我的 SQL 查询，但它太长了。如有需要会提供。

**SQL架构：**

```
create table `trn_user_log` (
`app_id` int (11),
`transaction_id` int (11),
`mobile_no` varchar (45),
`node_id` bigint (20),
`customer_attribute` varchar (150),
`entered_value` varchar (150)
); 

insert into `trn_user_log` (`app_id`, `transaction_id`, `mobile_no`, `node_id`, `customer_attribute`, `entered_value`) values('104','731','918087318987','103','Welcome To Onida','2');
insert into `trn_user_log` (`app_id`, `transaction_id`, `mobile_no`, `node_id`, `customer_attribute`, `entered_value`) values('104','731','918087318987','105','Home Appliances','1');
insert into `trn_user_log` (`app_id`, `transaction_id`, `mobile_no`, `node_id`, `customer_attribute`, `entered_value`) values('104','731','918087318987','119','Washing Machine','1');
insert into `trn_user_log` (`app_id`, `transaction_id`, `mobile_no`, `node_id`, `customer_attribute`, `entered_value`) values('104','731','918087318987','121','Fully Automatic','2');
insert into `trn_user_log` (`app_id`, `transaction_id`, `mobile_no`, `node_id`, `customer_attribute`, `entered_value`) values('104','731','918087318987','169','Quantity ','2');
insert into `trn_user_log` (`app_id`, `transaction_id`, `mobile_no`, `node_id`, `customer_attribute`, `entered_value`) values('104','731','918087318987','170','Amount','2');

create table `mst_node` (
`app_id` int (11),
`node_id` bigint (20),
`parent_node_id` bigint (20),
`display_seq` tinyint (4),
`display_text` varchar (540),
`customer_attribute` varchar (150)
);

insert into `mst_node` (`app_id`, `node_id`, `parent_node_id`,  `display_seq`, `display_text`,  `customer_attribute`) values('104','103',NULL,'1','Welcome To Onida','Welcome To Onida');
insert into `mst_node` (`app_id`, `node_id`, `parent_node_id`,  `display_seq`, `display_text`,  `customer_attribute`) values('104','105','103','2','Home Appliances','Home Appliances');
insert into `mst_node` (`app_id`, `node_id`, `parent_node_id`,  `display_seq`, `display_text`,  `customer_attribute`) values('104','119','105','1','Washing Machine','Washing Machine');
insert into `mst_node` (`app_id`, `node_id`, `parent_node_id`,  `display_seq`, `display_text`,  `customer_attribute`) values('104','121','119','1','Fully Automatic','Fully Automatic');
insert into `mst_node` (`app_id`, `node_id`, `parent_node_id`,  `display_seq`, `display_text`,  `customer_attribute`) values('104','124','121','2','SPARKLE 65S ','SPARKLE 65S ');
insert into `mst_node` (`app_id`, `node_id`, `parent_node_id`,  `display_seq`, `display_text`,  `customer_attribute`) values('104','125','121','3','Sparkle 65X','Sparkle 65X');
insert into `mst_node` (`app_id`, `node_id`, `parent_node_id`,  `display_seq`, `display_text`,  `customer_attribute`) values('104','126','121','4','Sparkle 62P','Sparkle 62P');
insert into `mst_node` (`app_id`, `node_id`, `parent_node_id`,  `display_seq`, `display_text`,  `customer_attribute`) values('104','169','124','1','Quantity ','Quantity ');
insert into `mst_node` (`app_id`, `node_id`, `parent_node_id`,  `display_seq`, `display_text`,  `customer_attribute`) values('104','170','124','2','Amount','Amount'); 
```

**我的 SQL 查询：**

```
SELECT *
FROM
(
SELECT T1.app_id,
   T1.transaction_id,
   T1.mobile_no,
   CONVERT(
      GROUP_CONCAT(
         (CASE T1.node_id
             WHEN 103 THEN CONCAT(T1.customer_attribute, '~', T2.display_text)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input1,
      CONVERT(
      GROUP_CONCAT(
         (CASE T1.node_id
             WHEN 105 THEN CONCAT(T1.customer_attribute, '~', T2.display_text)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input3,
      CONVERT(
      GROUP_CONCAT(
         (CASE T1.node_id
             WHEN 119 THEN CONCAT(T1.customer_attribute, '~', T2.display_text)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input17,
      CONVERT(
      GROUP_CONCAT(
         (CASE T1.node_id
             WHEN 121 THEN CONCAT(T1.customer_attribute, '~', T2.display_text)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input110,
   CONVERT(
      GROUP_CONCAT(
         (CASE T1.node_id
             WHEN 169 THEN CONCAT(T1.customer_attribute, '~', T2.display_text)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input61,
   CONVERT(
      GROUP_CONCAT(
         (CASE T1.node_id
             WHEN 170 THEN CONCAT(T1.customer_attribute, '~', T2.display_text)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input62
FROM trn_user_log T1 INNER JOIN mst_node T2 ON T1.APP_ID = T2.APP_ID
 WHERE     T1.app_id = 104
   AND T1.transaction_id = 731
   AND T1.node_id = T2.parent_node_id
   AND T2.`display_seq` = T1.entered_value
--   GROUP BY T1.app_id, T1.transaction_id, T1.mobile_no
--  ORDER BY T1.node_id

UNION 

SELECT T3.app_id,
   T3.transaction_id,
   T3.mobile_no,
   CONVERT(
      GROUP_CONCAT(
         (CASE T3.node_id
             WHEN 103 THEN CONCAT(T3.customer_attribute, '~', T3.entered_value)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input1,
      CONVERT(
      GROUP_CONCAT(
         (CASE T3.node_id
             WHEN 105 THEN CONCAT(T3.customer_attribute, '~', T3.entered_value)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input3,
      CONVERT(
      GROUP_CONCAT(
         (CASE T3.node_id
             WHEN 119 THEN CONCAT(T3.customer_attribute, '~', T3.entered_value)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input17,
      CONVERT(
      GROUP_CONCAT(
         (CASE T3.node_id
             WHEN 121 THEN CONCAT(T3.customer_attribute, '~', T3.entered_value)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input110,
   CONVERT(
      GROUP_CONCAT(
         (CASE T3.node_id
             WHEN 169 THEN CONCAT(T3.customer_attribute, '~', T3.entered_value)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input61,
   CONVERT(
      GROUP_CONCAT(
         (CASE T3.node_id
             WHEN 170 THEN CONCAT(T3.customer_attribute, '~', T3.entered_value)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input62
FROM trn_user_log T3 INNER JOIN mst_node T4 ON T3.APP_ID = T4.APP_ID
WHERE  T3.app_id = 104
   AND T3.transaction_id = 731
   AND T3.node_id = T4.node_id
   AND  not exists (select 1 from mst_node b where b.parent_node_id = t4.node_id)

--        GROUP BY T3.app_id, T3.transaction_id, T3.mobile_no
-- ORDER BY T3.node_id
)T 
GROUP BY T.app_id, T.transaction_id, T.mobile_no 
```

[SQLFiddle 演示模式和查询](http://www.sqlfiddle.com/#!2/bfcd8/1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:01:17.110

您可以`JOIN`相互选择两个，然后`COALESCE`在列上执行。

[http://www.sqlfiddle.com/#!2/bfcd8/15](http://www.sqlfiddle.com/#!2/bfcd8/15)

```
SELECT app_id,transaction_id,mobile_no,
coalesce(tt1.USER_INPUT1,tt2.USER_INPUT1) AS USER_INPUT1,
coalesce(tt1.USER_INPUT3,tt2.USER_INPUT3) AS USER_INPUT3,
coalesce(tt1.USER_INPUT17,tt2.USER_INPUT17) AS USER_INPUT17,
coalesce(tt1.USER_INPUT110,tt2.USER_INPUT110) AS USER_INPUT110,
coalesce(tt1.USER_INPUT61,tt2.USER_INPUT61) AS USER_INPUT61,
coalesce(tt1.USER_INPUT62,tt2.USER_INPUT62) AS USER_INPUT62
 FROM (SELECT T1.app_id,
       T1.transaction_id,
       T1.mobile_no,
       CONVERT(
          GROUP_CONCAT(
             (CASE T1.node_id
                 WHEN 103 THEN CONCAT(T1.customer_attribute, '~', T2.display_text)
                 ELSE NULL
              END)) USING LATIN1)
          AS user_input1,
          CONVERT(
          GROUP_CONCAT(
             (CASE T1.node_id
                 WHEN 105 THEN CONCAT(T1.customer_attribute, '~', T2.display_text)
                 ELSE NULL
              END)) USING LATIN1)
          AS user_input3,
          CONVERT(
          GROUP_CONCAT(
             (CASE T1.node_id
                 WHEN 119 THEN CONCAT(T1.customer_attribute, '~', T2.display_text)
                 ELSE NULL
              END)) USING LATIN1)
          AS user_input17,
          CONVERT(
          GROUP_CONCAT(
             (CASE T1.node_id
                 WHEN 121 THEN CONCAT(T1.customer_attribute, '~', T2.display_text)
                 ELSE NULL
              END)) USING LATIN1)
          AS user_input110,
       CONVERT(
          GROUP_CONCAT(
             (CASE T1.node_id
                 WHEN 169 THEN CONCAT(T1.customer_attribute, '~', T2.display_text)
                 ELSE NULL
              END)) USING LATIN1)
          AS user_input61,
       CONVERT(
          GROUP_CONCAT(
             (CASE T1.node_id
                 WHEN 170 THEN CONCAT(T1.customer_attribute, '~', T2.display_text)
                 ELSE NULL
              END)) USING LATIN1)
          AS user_input62
  FROM trn_user_log T1 INNER JOIN mst_node T2 ON T1.APP_ID = T2.APP_ID
 WHERE     T1.app_id = 104
       AND T1.transaction_id = 731
       AND T1.node_id = T2.parent_node_id
       AND T2.`display_seq` = T1.entered_value
--   GROUP BY T1.app_id, T1.transaction_id, T1.mobile_no
--  ORDER BY T1.node_id
) AS tt1

LEFT JOIN

(SELECT T3.app_id,
       T3.transaction_id,
       T3.mobile_no,
       CONVERT(
          GROUP_CONCAT(
             (CASE T3.node_id
                 WHEN 103 THEN CONCAT(T3.customer_attribute, '~', T3.entered_value)
                 ELSE NULL
              END)) USING LATIN1)
          AS user_input1,
          CONVERT(
          GROUP_CONCAT(
             (CASE T3.node_id
                 WHEN 105 THEN CONCAT(T3.customer_attribute, '~', T3.entered_value)
                 ELSE NULL
              END)) USING LATIN1)
          AS user_input3,
          CONVERT(
          GROUP_CONCAT(
             (CASE T3.node_id
                 WHEN 119 THEN CONCAT(T3.customer_attribute, '~', T3.entered_value)
                 ELSE NULL
              END)) USING LATIN1)
          AS user_input17,
          CONVERT(
          GROUP_CONCAT(
             (CASE T3.node_id
                 WHEN 121 THEN CONCAT(T3.customer_attribute, '~', T3.entered_value)
                 ELSE NULL
              END)) USING LATIN1)
          AS user_input110,
       CONVERT(
          GROUP_CONCAT(
             (CASE T3.node_id
                 WHEN 169 THEN CONCAT(T3.customer_attribute, '~', T3.entered_value)
                 ELSE NULL
              END)) USING LATIN1)
          AS user_input61,
       CONVERT(
          GROUP_CONCAT(
             (CASE T3.node_id
                 WHEN 170 THEN CONCAT(T3.customer_attribute, '~', T3.entered_value)
                 ELSE NULL
              END)) USING LATIN1)
          AS user_input62
FROM trn_user_log T3 INNER JOIN mst_node T4 ON T3.APP_ID = T4.APP_ID
WHERE  T3.app_id = 104
       AND T3.transaction_id = 731
       AND T3.node_id = T4.node_id
       AND  NOT EXISTS (SELECT 1 FROM mst_node b WHERE b.parent_node_id = t4.node_id)

--        GROUP BY T3.app_id, T3.transaction_id, T3.mobile_no
-- ORDER BY T3.node_id
  ) AS tt2 USING (app_id, transaction_id, mobile_no) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:57:23.900

包裹你`union`然后`subquery`加入它。

```
SELECT *
FROM
(
  -- place your unioned query 
) a
GROUP BY a.app_id, a.transaction_id, a.mobile_no 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T07:05:44.647

```
SELECT app_id, transaction_id, mobile_no,
       MAX(user_input1) user_input1, MAX(user_input3) user_input3,
       MAX(user_input17) user_input17, MAX(user_input110) user_input110,
       MAX(user_input61) user_input61, MAX(user_input62) user_input62
FROM (
SELECT T1.app_id,
   T1.transaction_id,
   T1.mobile_no,
   CONVERT(
      GROUP_CONCAT(
         (CASE T1.node_id
             WHEN 103 THEN CONCAT(T1.customer_attribute, '~', T2.display_text)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input1,
      CONVERT(
      GROUP_CONCAT(
         (CASE T1.node_id
             WHEN 105 THEN CONCAT(T1.customer_attribute, '~', T2.display_text)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input3,
      CONVERT(
      GROUP_CONCAT(
         (CASE T1.node_id
             WHEN 119 THEN CONCAT(T1.customer_attribute, '~', T2.display_text)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input17,
      CONVERT(
      GROUP_CONCAT(
         (CASE T1.node_id
             WHEN 121 THEN CONCAT(T1.customer_attribute, '~', T2.display_text)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input110,
   CONVERT(
      GROUP_CONCAT(
         (CASE T1.node_id
             WHEN 169 THEN CONCAT(T1.customer_attribute, '~', T2.display_text)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input61,
   CONVERT(
      GROUP_CONCAT(
         (CASE T1.node_id
             WHEN 170 THEN CONCAT(T1.customer_attribute, '~', T2.display_text)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input62
FROM trn_user_log T1 INNER JOIN mst_node T2 ON T1.APP_ID = T2.APP_ID
 WHERE     T1.app_id = 104
   AND T1.transaction_id = 731
   AND T1.node_id = T2.parent_node_id
   AND T2.`display_seq` = T1.entered_value
--   GROUP BY T1.app_id, T1.transaction_id, T1.mobile_no
--  ORDER BY T1.node_id

UNION 

SELECT T3.app_id,
   T3.transaction_id,
   T3.mobile_no,
   CONVERT(
      GROUP_CONCAT(
         (CASE T3.node_id
             WHEN 103 THEN CONCAT(T3.customer_attribute, '~', T3.entered_value)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input1,
      CONVERT(
      GROUP_CONCAT(
         (CASE T3.node_id
             WHEN 105 THEN CONCAT(T3.customer_attribute, '~', T3.entered_value)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input3,
      CONVERT(
      GROUP_CONCAT(
         (CASE T3.node_id
             WHEN 119 THEN CONCAT(T3.customer_attribute, '~', T3.entered_value)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input17,
      CONVERT(
      GROUP_CONCAT(
         (CASE T3.node_id
             WHEN 121 THEN CONCAT(T3.customer_attribute, '~', T3.entered_value)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input110,
   CONVERT(
      GROUP_CONCAT(
         (CASE T3.node_id
             WHEN 169 THEN CONCAT(T3.customer_attribute, '~', T3.entered_value)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input61,
   CONVERT(
      GROUP_CONCAT(
         (CASE T3.node_id
             WHEN 170 THEN CONCAT(T3.customer_attribute, '~', T3.entered_value)
             ELSE NULL
          END)) USING LATIN1)
      AS user_input62
FROM trn_user_log T3 INNER JOIN mst_node T4 ON T3.APP_ID = T4.APP_ID
WHERE  T3.app_id = 104
   AND T3.transaction_id = 731
   AND T3.node_id = T4.node_id
   AND  not exists (select 1 from mst_node b where b.parent_node_id = t4.node_id)

--        GROUP BY T3.app_id, T3.transaction_id, T3.mobile_no
-- ORDER BY T3.node_id
)T 
GROUP BY T.app_id, T.transaction_id, T.mobile_no 
```

# php - 表映射mysql

> ID：12488802
> 
> 赞同：1
> 
> 时间：2012-09-19T04:55:34.930
> 
> 标签：php, mysql, mysql-workbench

我有一个问题，我的朋友说我必须使用表映射......但我不知道什么是表映射，我不知道我要做的是否正确

我有这张桌子：*员工*

```
+-------+------------+------+-------------------------+
| ac_no | department | rank | email                   |
+-------+------------+------+-------------------------+
| 12ac  |  01        | 08   | bla@vla.com             |
| 1an4  |  02        | 08   | jla@jla.com             |
| dr17  |  01        | 08   | dre@dre.com             |
| 13IN  |  01        | 05   | adjre@jre.com           |
| TE12  |  02        | 05   | drew@dre.com            |
| GR45  |  01        | 05   | noide@idea.com          |
+-------+------------+------+-------------------------+ 
```

从表*员工*的数据中，我必须插入表映射

目标是获取所有排名为 08 的数据

```
+-------+------------+------+-------------------------+
| 12ac  |  01        | 08   | bla@vla.com             |
| 1an4  |  02        | 08   | jla@jla.com             |
| dr17  |  01        | 08   | dre@dre.com             |
+-------+------------+------+-------------------------+ 
```

并查找排名为05且属于同一部门的数据，然后获取电子邮件...如果数据超过一个，电子邮件将与之拆分；

```
+-------+---------------+------------+------------------------------+
| ac_no |email          | department |               email          |
+-------+---------------+------------+------------------------------+
| 12ac  | bla@vla.com   |   01       | adjre@jre.com;noide@idea.com |
| 1an4  | jla@jla.com   |   02       | drew@dre.com                 |
| dr17  | dre@dre.com   |   01       | adjre@jre.com;noide@idea.com |
+-------+---------------+------------+------------------------------+ 
```

我想使用过程将表*employee*中的数据处理成表*映射*，但我不知道如何得到它。我在工作台上创建了一个程序并运行它，将数据插入到表映射中。

```
select ac_no,department,rank,email,(select department,email from employee where rank=05)head from employee where rank=08; 
```

但是如果我运行这个查询结果`subquery returns more than 1 row`

对不起，如果我问基本问题，但我真的不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:04:49.023

像这样试试

```
select ac_no,department,rank,email from employee where rank = 08 and where department =  all(select department from employee group by department) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T06:13:55.250

```
(select ac_no,department,rank,email from employee where rank=8) UNION (select ac_no,department,rank,email from employee where (rank,department) in (select rank,department from employee where rank=5 group by department having count(*)>1)) 
```

返回所有员工的数据：

1) 排名第 8，与部门无关

2) 等级 5 至少有一名等级 5 的员工属于同一部门

# java - 获取 HSSFWorkbook 的长度

> ID：12488804
> 
> 赞同：3
> 
> 时间：2012-09-19T04:55:53.223
> 
> 标签：java, servlets, apache-poi

如何获取 Apache POI 的文件大小`HSSFWorkbook`？

我有类似的代码

```
// inside Servlet
OutputStream out = response.getOutputStream();
hSSFWorkbook.write(out); 
```

我想在`Content-Length`响应中添加标题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T13:39:30.320

最好的办法是在某处缓冲它，例如

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
workbook.write(baos);

int length = baos.size();
// Send length...

// Send data
OutputStream out = response.getOutputStream();
out.write( baos.toByteArray() );
out.close(); 
```

如果您想避免使用内存来缓冲，您可以使用临时文件

POI 只会在需要写出所有内容时计算大小，因为计算出大小几乎是写出工作的一半！所以，你最好一次性获得大小和序列化

# java - 如何比较两个集合并获取它们之间的匹配数？集合还包含重复项

> ID：12488820
> 
> 赞同：-3
> 
> 时间：2012-09-19T04:57:51.357
> 
> 标签：java, .net

收藏一：

```
{ "tom", "dick", "harry", "john", "smith", "dick" }; 
```

收藏2：

```
{ "Rachel", "dick", "tom", "dick", "smith","harry","Orion"} 
```

重复项应计算两次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T05:19:45.953

您可以只做一个集合交集并获得结果集的大小：

```
Set<String> s1 = new HashSet<String>(Arrays.asList(new String[] {"tom", "dick", "harry", "john", "smith", "dick"}));
Set<String> s2 = new HashSet<String>(Arrays.asList(new String[] {"Rachel", "dick", "tom", "dick", "smith", "harry", "Orion"}));

s1.retainAll(s2);  // s1 becomes the intersection of s1 & s2

System.out.println("Number of common elements: " + s1.size()); 
```

[编辑] 应该更仔细地阅读这个问题。将`Set`上面的替换为 Apache Commons 的[Bag](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/Bag.html "包")实现，它也适用于重复项。

该实现在调用`Set`后为 s1 提供了 4 的大小，而版本的大小为 5，我相信这是您想要的。`retainAll``Bag`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T05:22:32.300

**1.**使用`Collections.frequency()`方法检查特定String对象在Collection中出现的次数。

**2.**现在你可以**检查每个Object在另一个Collection**中的频率，如果任何一个Object在另一个Collection中的频率计数为零，很明显这个Collection没有那个对象，所以这些Collection不相等。

**3.**如果第一个集合的所有对象都存在于第二个集合中，请尝试按照我在第 2 点中提到的相同方式检查第二个集合的对象。

# python - 当套接字错误发生时，如何从异常中获取其错误码？

> ID：12488822
> 
> 赞同：0
> 
> 时间：2012-09-19T04:58:12.893
> 
> 标签：python, sockets, exception, error-handling, error-code

像这样的代码：

```
import socket, sys

try:
    address = ('127.0.0.1', 31500)  
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)  
    s.connect(address)  
except Exception:
    errType, errValue, errTraceback = sys.exc_info()
    # or
    # handle the Exception it throw out ? 
```

我想要得到的是 errcode `10060`，这意味着`connection time out`，感谢您的帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T05:02:00.523

采用

```
except EnvironmentError as e:
    print e.errno 
```

# objective-c - 使用 ARC，我是否需要手动管理内存？

> ID：12488826
> 
> 赞同：1
> 
> 时间：2012-09-19T04:58:34.640
> 
> 标签：objective-c, xcode, automatic-ref-counting

我的问题基本上是标题。在启用了自动引用计数的 XCode 中，我是否需要手动管理内存？比如调用release、retain等？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T05:05:04.983

ARC 只处理 Objective-C 对象。因此，您需要继续手动管理 Core Foundation 和纯 C 内存。

尽管您不需要手动保留或释放，但您仍然负责防止保留周期 - 确保将适当的属性标记为强和弱。因此，您至少需要继续考虑所有权的这一方面。

除此之外，至少还有一个非常具体的怪癖——如果堆栈要在它们下面展开，你需要记住复制块。这是为了确保它们最终位于堆而不是堆栈上，因此与内存管理相关。

# oracle - SQL Loader 类似于表中的错误

> ID：12488827
> 
> 赞同：0
> 
> 时间：2012-09-19T04:58:53.673
> 
> 标签：oracle, plsql, oracle11g, plsqldeveloper

我有外部表。我想从这些表中提取数据并将该数据插入/合并到其他表中。

现在，当 select from => insert into query 或 merge query 运行时，数据可能（并且很可能）质量很差，这将导致查询中断。假设外部表中有 000000 作为日期，如果我正在合并数据，这将导致查询中断。

如何将这些错误记录在一个表（例如）错误表中，该表将记录错误、错误原因、行号和列名？就像您在 SQL Loader 日志中看到的一样。例如：

```
Record 2324: Rejected - Error on table AA_STAG_VR_01, column KS1.
ORA-01843: not a valid month 
```

并且查询不应该中断。而是记录错误并继续前进，就像它在 SQL 加载器中发生的那样。

可能吗？我试图在网上四处寻找，但我什么也找不到，或者我根本不知道神奇的词

提前致谢 ：-）

编辑：好的，我能够使用以下方法解决问题（嗯，部分）。

```
CREATE TABLE error_table  (
   ora_err_number$ NUMBER, 
   ora_err_mesg$   VARCHAR2(2000),
   ora_err_rowid$  ROWID,   
   ora_err_optyp$  VARCHAR2(2),
   ora_err_tag$    VARCHAR2(2000) 
)

INSERT INTO destination_table (column)
SELECT column FROM external_table
LOG ERRORS INTO error_table REJECT LIMIT UNLIMITED 
```

这给了我：

选择 * FROM 错误表；

```
----------------------------------------------------------------------------------------------------------------------------------------------------------
ORA_ERR_NUMBER$   |   ORA_ERR_MESG$                                                              |    ORA_ERR_ROWID$    | ORA_ERR_OPTYP$   | ORA_ERR_TAG$  |
----------------------------------------------------------------------------------------------------------------------------------------------------------

12899             |ORA-12899: value too large for column "SYSTEM"."destination_table"."column" 
```

到目前为止，一切都很好。但是，我想知道哪个记录号（external_table 中的行号）有此错误。因为有可能第 10 条记录没问题，但第 11 条记录很差。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T05:02:43.283

~~查看[FORALL + SAVE EXCEPTIONS](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/forall_statement.htm)子句。它可能会帮助你。~~

```
15:57:02 @> conn hr/hr@vm_xe                                                                  
Connected.                                                                                    
15:57:15 HR@vm_xe> create table err_test(unique_column number primary key);                   

Table created.                                                                                

Elapsed: 00:00:01.51                                                                          
15:57:46 HR@vm_xe> EXECUTE DBMS_ERRLOG.CREATE_ERROR_LOG('err_test', 'errlog');                

PL/SQL procedure successfully completed.                                                      

Elapsed: 00:00:00.46                                                                          
15:59:22 HR@vm_xe> insert into err_test select mod(rownum, 2) from dual connect by rownum < 10
16:00:00   2  log errors into errlog ('test') reject limit unlimited;                         

2 rows created.                                                                               

Elapsed: 00:00:00.87                                                                          
16:00:27 HR@vm_xe> commit;                                                                    

Commit complete.                                                                              

Elapsed: 00:00:00.00                                                                          
16:02:37 HR@vm_xe> col ora_err_mesg$ for a75                                          
16:02:43 HR@vm_xe> col unique_column for a10                                          
16:02:47 HR@vm_xe> select unique_column, ora_err_mesg$ from errlog;                   

UNIQUE_COL ORA_ERR_MESG$                                                              
---------- ---------------------------------------------------------------------------
1          ORA-00001: unique constraint (HR.SYS_C007056) violated                     
0          ORA-00001: unique constraint (HR.SYS_C007056) violated                     
1          ORA-00001: unique constraint (HR.SYS_C007056) violated                     
0          ORA-00001: unique constraint (HR.SYS_C007056) violated                     
1          ORA-00001: unique constraint (HR.SYS_C007056) violated                     
0          ORA-00001: unique constraint (HR.SYS_C007056) violated                     
1          ORA-00001: unique constraint (HR.SYS_C007056) violated                     

7 rows selected.                                                                      

Elapsed: 00:00:00.03 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T05:45:13.153

在某些语法下面，您有拒绝限制，如 sqlloader，您有日志文件、坏文件等。

```
CREATE TABLE <table_name> (
<column_definitions>)

ORGANIZATION EXTERNAL
(TYPE oracle_loader
DEFAULT DIRECTORY <oracle_directory_object_name>
ACCESS PARAMETERS (
RECORDS DELIMITED BY newline
BADFILE <file_name>
DISCARDFILE <file_name>
LOGFILE <file_name>
[READSIZE <bytes>]
[SKIP <number_of_rows>
FIELDS TERMINATED BY '<terminator>'
REJECT ROWS WITH ALL NULL FIELDS
MISSING FIELD VALUES ARE NULL
(<column_name_list>))\
LOCATION ('<file_name>'))
[PARALLEL]
REJECT LIMIT <UNLIMITED | integer>; 
```

请参阅[此处](http://psoug.org/reference/externaltab.html)的一些示例，以及[此处](http://docs.oracle.com/cd/B28359_01/server.111/b28319/et_concepts.htm)的文档

# angularjs - 如何在不使用 Jasmine 特定的 inject() 的情况下将依赖项注入 AngularJS 控制器测试

> ID：12488828
> 
> 赞同：8
> 
> 时间：2012-09-19T04:58:54.283
> 
> 标签：angularjs

我试图将我的大脑包裹在 AngularJS 中的依赖注入上。假设这是我非常激动人心的应用程序代码：

```
function PrideRockCtrl($scope, King) {
  $scope.king = King;
}

angular.module('Characters', ['ngResource'])
  .factory('King', function() {
    return "Mufasa";
  }); 
```

我想测试`PrideRockCtrl`。如果我按照文档和教程中的示例进行操作，我可以使用`module('Characters')`来配置注入器并使用`inject()`来获取一些依赖项。IE：

```
describe('Pride Rock', function() {
  beforeEach(module('Characters'));
  it('should be ruled by Simba', inject(function($rootScope, $controller) {
    var scope = $rootScope.$new();
    var ctrl = $controller(PrideRockCtrl, {$scope: scope});
    expect(scope.king).toEqual("Mufasa");
  }));
}); 
```

这很好用，但这不是一个跨测试框架的解决方案。和测试助手只与 Jasmine 兼容`module()`。`inject()`

### `module()`在不使用or的情况下手动完成相同的依赖注入的最佳方法是什么`inject()`？

我想出了这个：

```
describe('Pride Rock', function() {
  it('should be ruled by Mufasa', function() {
    var $injector = angular.injector(['Characters']);
    var $controller = $injector.get('$controller');
    var scope = $injector.get('$rootScope').$new();
    var king = $injector.get('King');
    var ctrl = $controller(PrideRockCtrl, {$scope: scope, King: king});
    expect(scope.king).toEqual("Mufasa");
  });
}); 
```

这似乎很冗长。有没有更好的办法？

jsFiddle：http: [//jsfiddle.net/johnlindquist/d63Y3/](http://jsfiddle.net/johnlindquist/d63Y3/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T06:54:23.750

不使用模块的最简单版本如下所示：

```
describe('Pride Rock', function() {

    it('should be ruled by Simba', inject(function($rootScope, $controller) {
        var scope = $rootScope.$new();
        var ctrl = $controller(PrideRockCtrl, {
            $scope: scope,
            King:"Mufasa"
        });
        expect(scope.king).toEqual("Mufasa");
    }));
}); 
```

事实上，您的尝试非常接近，唯一缺少的是控制器中的本地依赖项 ( `King:"Mufasa"`)。

在像这样的测试中，我们只关注一个选定的类，没有必要使用 $injector，因为我们可以手动模拟/存根我们的依赖项。归根结底，$injector 只是提供对象的实例，因此我们也可以创建自己的对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T02:23:37.080

Angular 控制器只是 JS 函数。如果你不想注入任何东西，就打电话给他们。

```
describe('king should be set', function() {
  var scope = {};
  var lion = "Simba";
  PrideController(scope, lion);
  expect(scope.king).toEqual(lion)
}); 
```

# mysql - 在 JOIN 查询上使用 ORDER BY 进行排序

> ID：12488830
> 
> 赞同：0
> 
> 时间：2012-09-19T04:59:05.967
> 
> 标签：mysql, sql, join, sql-order-by

我正在尝试使用`ORDER BY`对查询进行排序，但它声称存在语法错误。在尝试排序之前，我的查询如下所示：

```
SELECT u.*, s.*
FROM bands u
inner join statuses s on u.status_id = s.id
WHERE u.status_id = 1
LIMIT {$startpoint}, {$limit} 
```

我试过`ORDER BY`这样添加，但似乎不正确：

```
SELECT u.*, s.*
FROM bands u
inner join statuses s on u.status_id = s.id
WHERE u.status_id = 1
LIMIT {$startpoint}, {$limit} ORDER BY u.status_id 
```

如何`ORDER BY`在此查询中正确使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T05:00:14.987

`ORDER BY`子句在前`LIMIT`

```
SELECT u.*, s.*
FROM bands u
inner join statuses s on u.status_id = s.id
WHERE u.status_id = 1
ORDER BY u.status_id
LIMIT {$startpoint}, {$limit} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T05:02:02.117

你几乎就在那里 - 你只是把 ORDER 和 LIMIT 弄错了：

```
SELECT 
    u.*, s.* 
FROM 
    bands u inner join statuses s on u.status_id = s.id 
WHERE 
    u.status_id = 1 
ORDER BY u.status_id
LIMIT {$startpoint}, {$limit} 
```

# authentication - 信箱不可用。服务器响应是：需要身份验证

> ID：12488835
> 
> 赞同：2
> 
> 时间：2012-09-19T04:59:29.997
> 
> 标签：authentication, smtp

我想向我的 Web 应用程序的 1000 多个用户发送邮件。我正在购买新的 smtp 服务计划。我正在使用以下代码发送电子邮件。

```
System.Net.Mail.MailMessage message = new System.Net.Mail.MailMessage();
  message.From = new MailAddress("info@mydomain.com", "Web Administration Team");
  message.To.Add(new MailAddress("user1@gmail.com"));
  message.Subject = "test";
  message.Body = "Email Content";
  message.IsBodyHtml = true;
SmtpClient smtp = new SmtpClient("domain.smtp.com", 2525);           
  smtp.UseDefaultCredentials = false;
  smtp.DeliveryMethod = SmtpDeliveryMethod.Network;            
  smtp.EnableSsl = false;
  smtp.Credentials = new System.Net.NetworkCredential("info@domain.com","password");           
  smtp.Send(message); 
```

但我收到以下错误消息。

**信箱不可用。服务器响应是：需要身份验证。如果您无法成功进行身份验证，请联系支持 (support@smtp.com)**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T06:50:04.157

SMTP 服务器需要用户名和密码进行身份验证，以确保只有客户通过它发送垃圾邮件。

有关使用 System.Net.Mail 时如何进行身份验证的信息，请参阅[http://www.systemnetmail.com/faq/4.2.aspx](http://www.systemnetmail.com/faq/4.2.aspx)。

# java - 包含带有可执行 jar 的图像

> ID：12488836
> 
> 赞同：5
> 
> 时间：2012-09-19T04:59:39.653
> 
> 标签：java, image, jar, embedded-resource, javax.imageio

我整天都在浏览 Stackoverflow 寻找如何做到这一点，但我还没有成功

我正在将我制作的快速游戏打包成可执行 jar，但我没有正确引用图像我只是引用了文件

```
background = ImageIO.read(new File("wood.jpeg")); 
```

我在 src 默认包中有类

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-19T05:05:29.040

Jar 中的文件不是磁盘上文件意义上的文件。它们只是（可能）压缩的字节流。

Java 通过使用`ClassLoader`

```
background = ImageIO.read(getClass().getResource("/wood.jpeg")); 
```

应该管用...

这将返回一个`URL`可以`ImageIO`用来加载资源的。

您还可以阅读

*   [jar 中的类路径资源](https://stackoverflow.com/questions/1900154/classpath-resource-within-jar)
*   [jar 获取图像作为资源](https://stackoverflow.com/questions/10163012/jar-get-image-as-resource)
*   [在 Jar 中加载资源](https://stackoverflow.com/questions/5408981/load-a-resource-in-jar)

我可以列出更多。所以，是的，它被问了很多；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T05:08:24.683

尝试使用`Constructing Runnable Jar`Eclipse。

```
R_Click on the Project in the Package Explorer ---> 
Export ---> Runnable JAR file ---> 
Select the option of Package required libraries into generated JAR 
```

# iphone - 游戏中心登录锁定仅在 i OS 6 中

> ID：12488838
> 
> 赞同：20
> 
> 时间：2012-09-19T04:59:51.113
> 
> 标签：iphone, game-center, uiinterfaceorientation, ios6

加载游戏中心时，其默认方向是纵向。为了将其锁定为横向模式，添加了一个类别。

```
@implementation GKMatchmakerViewController (LandscapeOnly)

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
{ 
    return ( interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight);
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
}

- (BOOL)shouldAutorotate {
    return NO;
}
@end 
```

它在 iOS 6 以下运行良好。但在 iOS6 中它显示错误。

由于未捕获的异常“UIApplicationInvalidInterfaceOrientation”而终止应用程序，原因：“支持的方向与应用程序没有共同的方向，并且 shouldAutorotate 返回 YES”

请解释一个解决方案。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-24T06:45:07.263

[最后，我按照 Apple 的 iOS 6发行说明](https://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html)中提到的解决方法避免了崩溃。

解决方法：

**`1.Apps should provide the delegate method`** **`application:supportedIntefaceOrientationsForWindow and ensure that portrait is one of the returned mask values.`**

```
- (NSUInteger)application:(UIApplication*)application supportedInterfaceOrientationsForWindow:(UIWindow*)window
{

    return UIInterfaceOrientationMaskAllButUpsideDown;
} 
```

**2\. 当涉及到 UIBNavigationController（或 UIViewController）时，继承 UINavigationController/UIViewController 并覆盖supportedInterfaceOrientations。**

```
 - (NSUInteger)supportedInterfaceOrientations
    {
        return UIInterfaceOrientationMaskLandscape;
    } 
```

和

**`In buid summary supported orientations selected landscape right and landscape left.`**

现在游戏中心工作正常，没有崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:02:10.130

必须添加1个小东西。在大约 2 天的时间里为那个愚蠢的问题而苦苦挣扎。如果上面没有帮助，并且你有 UINavigationController invovled（并且你已经做了子类）你需要以下内容（在 appDelegate 中）：

```
[window setRootViewController:navigationController]; // use this
// instead of [self.window addSubview:navigationController.view]; 
```

thanx 2 [http://grembe.wordpress.com/2012/09/19/here-is-what-i/](http://grembe.wordpress.com/2012/09/19/here-is-what-i/)

# python - CSV Python 定界下划线

> ID：12488843
> 
> 赞同：-3
> 
> 时间：2012-09-19T05:00:35.920
> 
> 标签：python, csv

我有一个要写入 CSV 文件的 python 脚本。组数组中的每个字符串都包含下划线（例如：） `apple_group`。当我写入 CSV 文件时，文件如下所示：

```
apple, _ ,group  
pear, _ ,group, _ ,sample 
```

我需要将下划线保留为一个字符串，例如上面的示例。我该怎么做呢？

```
f = open("output.csv", 'wt')
writer = csv.writer(f)
for item in group:
    writer.writerow((item))
f.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:34:24.243

```
f = open("output.csv", 'wt')
for item in group:
    custom_serialization = ', _ ,'.join(item.split('_')) 
    f.write(custom_serialization + '\n')
f.close() 
```

或者

```
f = open('output.csv', 'w'):
    f.write('\n'.join([' _ '.join(x.split('_')) for x in group]))
f.close() 
```

然而，在 Python 中，可读性是首选，所以我会选择第一个选项。

# asp.net - 报告查看器 Web 控制 HTTP 处理程序尚未在应用程序的 web.config 文件中注册

> ID：12488845
> 
> 赞同：23
> 
> 时间：2012-09-19T05:01:00.450
> 
> 标签：asp.net, visual-studio-2008, httphandler, rdlc

```
 The Report Viewer Web Control HTTP Handler has not been registered in the application's 
web.config file.  Add <add verb="*" path="Reserved.ReportViewerWebControl.axd" type = 
"Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=9.0.0.0, 
Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" /> to the system.web/httpHandlers section of the web.config file 
```

这个错误来了。我已经在 http 处理程序中提到了这一行，但仍然收到此错误

```
<add path="Reserved.ReportViewerWebControl.axd" verb="*"   type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=8.0.0.0,    Culture=neutral, PublicKeyToken=0000000000000000" validate="false" /> 
```

我的 html 页面标记如下

```
<%@ Register Assembly="Microsoft.ReportViewer.WebForms, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
    Namespace="Microsoft.Reporting.WebForms" TagPrefix="rsweb" %>

<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
<asp:Button ID="btnsubmit" runat="server" OnClick="GenerateReportButton_Click" />
    <rsweb:ReportViewer ID="ReportViewer1" runat="server">
    </rsweb:ReportViewer>
</asp:Content> 
```

Web 配置程序集部分如下：

```
<assemblies>
    <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.Web.DataVisualization, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add assembly="System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="Microsoft.ReportViewer.WebForms, Version=9.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
    <add assembly="Microsoft.ReportViewer.Common, Version=9.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
</assemblies> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T13:21:52.453

我遇到了同样的问题。发生的事情是我将报告加载例程放在 Page_Load 上，并没有将其包装在`if (!IsPostBack)`. ReportViewer 对页面进行 POST，这会触发 Page_Load 并重新加载报告，以某种方式将其搞砸。把所有东西都放进去后`if (!IsPostBack)`，它就像一个魅力。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-19T05:15:39.490

您能否检查您`web.config`的处理程序是否已注册`ReportViewer`。它应该是这样的

**处理程序**

```
<handlers>
<add name="ReportViewerWebControlHandler" preCondition="integratedMode" verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
</handlers> 
```

`web.config`还要检查for中的组装部分`ReportViewer`，它应该如下所示。

```
<assemblies>
<add assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
   <add assembly="Microsoft.ReportViewer.Common, Version=10.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" /> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-12-11T16:18:09.547

当我将应用程序池从集成更改为经典时，这个问题也消失了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-19T16:12:10.277

在我更改了我的查询调用的存储过程的参数后，我出现了这个问题，而没有在 SSRS 设计器中刷新数据集，所以你可以试试这个。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-04T16:26:30.143

最近两天我遇到了同样的问题。这并不是对原始问题的真正答案 - 只是为有同样问题的人提供的一些额外信息。

我遇到问题的应用程序已于 2005 年开发，目前仍在开发中。

因此，它已从 VS 2005 移植到 VS 2008 到 VS 2010，最近又移植到 VS 2013。看来这是错误发生的时候。.NET 框架之间的某个地方已从 .NET 3.5 切换到 .NET 4。

我认为（我没有验证）在 .NET 4 中，报表查看器 *.dlls 作为系统库提供。无论如何，这向我展示了我的 GAC：

![在此处输入图像描述](../Images/0f8adc9a8cf0a151950a33b415ce87b2.png)

只有第一个版本 8 是我自己手动安装的（使用 Reporting Viewer 2005 可再发行二进制文件）。

所以在 VS 2013 中，Resharper 正在考虑版本 11 并自动更改 web.config 中的这些行

```
<httpHandlers>
  <!-- this is the correct one (if using Report Viewer 2005 / 8.0.0.0 -->
  <add path="Reserved.ReportViewerWebControl.axd" verb="*" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" validate="false"/>
</httpHandlers>

<httpHandlers>
  <!-- this is the wrong one inserted during the update (or maybe Resharper) -->

  <add path="Reserved.ReportViewerWebControl.axd" verb="*" type="System.ServiceModel.Activation.HttpHandler, System.ServiceModel.Activation, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" validate="false"/>
</httpHandlers> 
```

长话短说：似乎 - 至少在我的情况下 - 这个错误指向与 Visual Studio 使用的库和使用运行时的库的版本冲突。微软给出的错误有点误导。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-20T09:51:23.660

我没有足够的代表来评论现有的答案，但是可能需要将您的应用程序池从集成更改为经典的原因是因为[这个 MSDN 条目](https://docs.microsoft.com/en-us/previous-versions/46c5ddfy(v=vs.140))

使用集成应用程序池，您只需要处理程序部分，使用经典应用程序池，您需要处理程序和 httpHandlers。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-03-09T07:41:36.120

对我来说同样的问题。这个问题对我来说也消失了 1）当我将应用程序池从集成更改为经典时。2）像这样更改HTTP处理程序

```
<httpHandlers>
 <add verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"   validate="false" />
    </httpHandlers> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-07T14:02:29.720

我没有更改应用程序池中的任何内容，只是添加了这一行：

```
<Add name = "Reserved-ReportViewerWebControl-axd" path = "Reserved.ReportViewerWebControl.axd" verb = "*" type = "Microsoft.Reporting.WebForms.HttpHandler" resourceType = "Unspecified" /> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-26T13:26:15.760

当我们升级到 SSRS 2016 时，我们从 Report Viewer Web 控件中收到了完全相同的错误。但我们也无法访问 SSRS Web 门户 - 我们收到了一个 503 错误，导致我们来到这里： https: [//support.microsoft。 com/en-gb/help/3171040/-http-503-service-unavailable-error-when-you-open-the-ssrs-web-portal-after-you-upgrade-to-ssrs-2016](https://support.microsoft.com/en-gb/help/3171040/-http-503-service-unavailable-error-when-you-open-the-ssrs-web-portal-after-you-upgrade-to-ssrs-2016)

一旦我们安装了 SQL Server 2016 Service Pack 1，一切正常。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-03-21T10:35:58.637

如果您使用 WCF 服务从数据库中检索数据，即使您已将 HTTP 处理程序添加到 web.config 文件，您也可能会遇到此问题。

在这种情况下，您还必须将服务端点、行为和绑定添加到 web.config 以使事情正常进行。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-03-01T12:10:21.333

就我而言，以下行为我解决了问题：

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <add name="ReportViewerWebControlHandler" preCondition="integratedMode" verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=14.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" />
    </handlers>
</system.webServer> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-04-01T06:32:59.157

对于 IIS 7 或更高版本

```
 <system.webServer>
    <handlers>
      <add name="ReportViewerWebControlHandler" preCondition="integratedMode" verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" />
    </handlers>
  </system.webServer> 
```

# delphi - alt+tab 上的 activeX 控件崩溃

> ID：12488848
> 
> 赞同：0
> 
> 时间：2012-09-19T05:01:25.783
> 
> 标签：delphi, mfc, activex

我已经实现了一个 Delphi acitveX 控件。一切在 html 上运行良好。之后，我将该 activeX 嵌入到 MFC 应用程序中。这很好，除了当我测试它时，如果我 alt+tab 到另一个窗口（例如 Chrome ......）然后 alt+tab 返回我的应用程序，它就会崩溃。我知道这是一个不明确的问题，但我没有任何线索。有什么线索可以解决这种情况吗？可能出了什么问题或我应该看看哪些事件？谢谢。编辑 1：这是我在使用 spy++ 时得到的。

```
<04518> 00100B7C S WM_ACTIVATE fActive:WA_INACTIVE fMinimized:False hwndPrevious:(null)
<04519> 00100B7C S WM_ACTIVATETOPLEVEL fActive:False dwThreadID:0025F40C
<04520> 00100B7C R WM_ACTIVATETOPLEVEL 
```

编辑2：这是我在挂起时全部中断时从调用堆栈中得到的

```
mfc100d.dll!CThreadSlotData::GetThreadValue(int nSlot)  Line 248    C++
    mfc100d.dll!CThreadLocalObject::GetData(CNoTrackObject * (void)* pfnCreateObject)  Line 420 + 0x11 bytes    C++
    mfc100d.dll!CThreadLocal<AFX_MODULE_THREAD_STATE>::GetData()  Line 179 + 0xd bytes  C++
    mfc100d.dll!AfxGetModuleThreadState()  Line 477 + 0x11 bytes    C++
    mfc100d.dll!afxMapHWND(int bCreate)  Line 289 + 0x5 bytes   C++
    mfc100d.dll!CWnd::FromHandlePermanent(HWND__ * hWnd)  Line 324 + 0x7 bytes  C++
    mfc100d.dll!AfxWndProc(HWND__ * hWnd, unsigned int nMsg, unsigned int wParam, long lParam)  Line 405 + 0x9 bytes    C++
    mfc100d.dll!AfxWndProcBase(HWND__ * hWnd, unsigned int nMsg, unsigned int wParam, long lParam)  Line 420 + 0x15 bytes   C++ 
```

编辑 3：我正在使用 Visual Studio 2010，调用堆栈告诉应用程序挂在此函数中，第 2 行，来自 afxtls.cpp。请任何人阐明如何解决这个问题。

```
inline void* CThreadSlotData::GetThreadValue(int nSlot)
{
    EnterCriticalSection(&m_sect);
    ASSERT(nSlot != 0 && nSlot < m_nMax);
    ASSERT(m_pSlotData != NULL);
    ASSERT(m_pSlotData[nSlot].dwFlags & SLOT_USED);
    ASSERT(m_tlsIndex != (DWORD)-1);
    if( nSlot <= 0 || nSlot >= m_nMax ) // check for retail builds.
    {
        LeaveCriticalSection(&m_sect);
        return NULL;
    }

    CThreadData* pData = (CThreadData*)TlsGetValue(m_tlsIndex); 
```

# ruby - JQuery 移动选择菜单无法正常工作

> ID：12488851
> 
> 赞同：1
> 
> 时间：2012-09-19T05:01:33.813
> 
> 标签：ruby, jquery-mobile, knockout.js, haml

我正在开发一个 Ruby 和 Sinatra 项目，对于一个特定的页面，我使用 jQuery mobile 来创建页面的移动版本。我也在项目中使用了 knockout.js。

我有一个正确显示的选择框，但是当我进行选择时，尽管值发生了变化，但它的文本并没有改变。

这是我的 HAML 代码：

```
#subscriptions-content-div{'data-role' => 'content'}
  %ol{'data-role' => 'listview', 'data-inset' => 'true', 'data-bind' => 'foreach: misspelt'}
    %li
      %h3{ 'data-bind' => 'text: show_name'}
      - if shows.empty?
        No Shows in Database
      - else
        %select#show
          %option{'value' => 'no_choice', 'data-placeholder' => 'true'} Select a Show
          - shows.each do |show|
            %option{'value' => show.id}
              = show.name
      %button.btn{ 'data-bind' => 'click: $root.resolveSubscription', 'data-inline' => 'true', 'data-icon' => 'check', 'data-theme' => 'a'}
        Save 
```

这是我查看页面源代码时得到的 HTML：

```
<div data-role='content' id='subscriptions-content-div'>
      <ol data-bind='foreach: misspelt' data-inset='true' data-role='listview'>

        <li>
          <h3 data-bind='text: show_name'></h3>
          <select id='show'>
            <option data-placeholder='true' value='no_choice'>Select a Show</option>
            <option value='50594de40ea69713630000de'>
              The Night Show
            </option>
            <option value='50594de40ea69713630000df'>
              Another Show
            </option>

            <option value='50594de40ea69713630000e0'>
              Yet Another Show
            </option>
          </select>
          <button class='btn' data-bind='click: $root.resolveSubscription' data-icon='check' data-inline='true' data-theme='a'>
            Save
          </button>
        </li>
      </ol>
    </div> 
```

菜单以“选择节目”为标题。当我选择其他东西时，这不会改变，但值会改变。当我获得所选选项的值时，我可以告诉它发生了变化。为什么文本不会改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:24:46.627

解决方案是将选择的初始化推迟到应用 KO 绑定之后。我向`data-role="none"`选择元素添加了属性并在`$.selectmenu()`之后手动调用`ko.applyBindings()`- 如下所示：http: [//jsfiddle.net/aib42/xtz5B/](http://jsfiddle.net/aib42/xtz5B/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T05:05:16.187

如果您正在向选择菜单动态添加选项，那么刷新选择菜单可能会有所帮助。

```
$('#show').selectmenu();
$('#show').selectmenu('refresh'); 
```

# iphone - 使用 dispatch 方法根据 Iphone 中的按钮操作上传数据

> ID：12488855
> 
> 赞同：2
> 
> 时间：2012-09-19T05:01:45.233
> 
> 标签：iphone, ios5, upload, uibutton, grand-central-dispatch

我是使用 Grand Central 调度的新手。我阅读了有关使用 GCD 的 Apple 文档，但我仍然不知道如何使用此方法。我的想法是我的视图中有三种类型的上传按钮，我同时单击了按钮我想上传基于按钮操作的数据，使用 NSURLCOnnection 上传数据调度队列方法的内容。我该怎么做。请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T05:33:15.160

尝试阅读 Mike Ash 的关于 Grand Central Dispatch 的博客——它会让你很好地了解如何在你自己的代码中使用它的 API。如果他的博客和 Apple 的文档仍然不够，那么我怀疑 stackoverflow 上的任何人都能够帮助您，因为您的问题尚不清楚一些概念障碍。

前三篇文章应该有所帮助：

[GCD 介绍第 1 部分](http://www.mikeash.com/pyblog/friday-qa-2009-08-28-intro-to-grand-central-dispatch-part-i-basics-and-dispatch-queues.html) [GCD 介绍第 2 部分](http://www.mikeash.com/pyblog/friday-qa-2009-09-04-intro-to-grand-central-dispatch-part-ii-multi-core-performance.html) [GCD 介绍第 3 部分](http://www.mikeash.com/pyblog/friday-qa-2009-09-11-intro-to-grand-central-dispatch-part-iii-dispatch-sources.html)

# c# - Emgu.CV.CvInvoke' 抛出异常

> ID：12488857
> 
> 赞同：3
> 
> 时间：2012-09-19T05:01:53.317
> 
> 标签：c#, computer-vision, emgucv

我正在尝试将 EMGUCV 用于 C#。目前我已经安装了 Visual Studio 2010 express Edition。当尝试执行一些简单的命令时`Emgu.CV.CvInvoke`抛出异常，所以我将非托管代码放在 exe 文件夹中。但它仍然继续给我错误。所以我尝试将非托管代码添加到解决方案资源管理器中，但它仍然给我这个错误。还有什么我可以做的，以便我最终可以使用 emguCV 吗？

例外是

```
System.TypeInitializationException was unhandled 
   Message=The type initializer for 'Emgu.CV.CvInvoke' threw an exception. 
```

有堆栈跟踪：

```
 at Emgu.CV.CvInvoke.cvCreateCameraCapture(Int32 index)
   at Emgu.CV.Capture..ctor(Int32 camIndex) in C:\Program Files (x86)\Emgu\libemgucv-windows-x64-2.2.1.1150\Emgu.CV\Capture\Capture.cs:line 105
   at Emgu.CV.Capture..ctor() in C:\Program Files (x86)\Emgu\libemgucv-windows-x64-2.2.1.1150\Emgu.CV\Capture\Capture.cs:line 93
   at cameraWorks.Form1.camButton_Click(Object sender, EventArgs e) in C:\Users\Adrian\documents\visual studio 2010\Projects\cameraWorks\cameraWorks\Form1.cs:line 38
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ButtonBase.WndProc(Message& m)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
   at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
   at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
   at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
   at System.Windows.Forms.Application.Run(Form mainForm)
   at cameraWorks.Program.Main() in C:\Users\Adrian\documents\visual studio 2010\Projects\cameraWorks\cameraWorks\Program.cs:line 18
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

内部异常：

> InnerException: System.BadImageFormatException Message=试图加载格式不正确的程序。（HRESULT 异常：0x8007000B） Source=Emgu.CV StackTrace：在 Emgu.CV.CvInvoke.cvRedirectError(CvErrorCallback errorHandler, IntPtr userdata, IntPtr prevUserdata) 在 Emgu.CV.CvInvoke..cctor() 在 C:\Program Files ( x86)\Emgu\libemgucv-windows-x64-2.2.1.1150\Emgu.CV\PInvoke\CvInvoke.cs：第 50 行

我只执行一些简单的代码：

```
public partial class Form1 : Form
{
    private Capture capture;
    private bool captureInProgress;

    public Form1()
    {
        InitializeComponent();
    }

    private void ProcessFrame(Object sender, EventArgs args )
    {
        Image<Bgr, Byte> ImageFrame = capture.QueryFrame();
        CamImageBox1.Image = ImageFrame;
    }

    private void camButton_Click(object sender, EventArgs e)
    {
        if (capture == null)
        {
            try
            {
                capture = new Capture();
            }
            catch (NullReferenceException excpt)
            {
                MessageBox.Show(excpt.Message);
            }
        }

        if (capture != null)
        {
            if (captureInProgress)
            {
                camButton.Text = "start";
            }
            else
            {
                camButton.Text = "stop";
                Application.Idle += ProcessFrame;
            }
            captureInProgress = !captureInProgress;
        }
    }

    private void ReleaseData()
    {
        if (capture != null)
        {
            capture.Dispose();
        }
    } 
```

emguCV 的示例可以在我的计算机上运行。非常感谢阿德里安

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-04T07:37:47.760

以下错误：“试图加载格式不正确的程序。” 如果非托管程序集是针对与当前执行的 .NET 代码不同的平台编译的，则会显示。

例如：取一些为 x86 编译的 dll，将一些函数调用导入 C# 并运行。如果您有 64 位 Windows，这将失败，因为 .NET 代码被编译为 x64。

要克服这个问题，您有两种可能性：1）使用与您的平台匹配的非托管 dll 版本 2）项目 -> 属性 -> 构建 -> 勾选与编译非托管 dll 的平台匹配的平台（x86，x64）（它可能设置为任何 CPU）。

* * *

将您的非托管 dll 复制到 \bin\Debug 和/或 \bin\Release 项目中，而不是复制到某个子文件夹中！！如果您真的想使用某个子文件夹中的 dll，请像这样编辑进程环境变量：

Environment.SetEnvironmentVariable(path, Environment.GetEnvironmentVariable(path) + Path.PathSeparator + );

这会将您的子文件夹添加到搜索路径中。此变量是流程变量，这意味着当流程停止执行时，所有更改都将被撤消。

# mysql - MySQL 计数和连接表

> ID：12488863
> 
> 赞同：0
> 
> 时间：2012-09-19T05:02:25.530
> 
> 标签：mysql, join, count

表论坛

```
|id_forum|name_forum|
|   1    |forum 1   |
|   2    |forum 2   | 
```

表螺纹

```
|id_thread|name_thread|id_forum|
|   1     |thread 1   |   1    |
|   2     |thread 2   |   1    | 
```

我需要一个返回的查询

```
|name_forum|thread|
| forum 1  |  2   |
| forum 2  |  0   | 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:29:40.860

如果他们是两张桌子，我想试试这样

```
select table_forum.name_forum,count(table_thread.id_forum) from table_thread join table_forum where table_form.id_forum = table_thread.id_forum group by table_thread.id_forum 
```

# c# - 如何将csv文件数据保存到数据库？

> ID：12488865
> 
> 赞同：1
> 
> 时间：2012-09-19T05:02:50.340
> 
> 标签：c#, asp.net, visual-studio-2008

我在我的窗口应用程序的数据网格视图中导入了一个 csv 文件。它有 40 列数据，包含 100 多条记录。现在我想要的是将网格视图数据保存到数据库中。我已经尝试过 bulkinsert 但它给出的错误：无法访问目标表我不确定在这种情况下如何创建表。我的意思是我需要定义所有 40 列吗？如果每次我导入 csv 文件时，列名都不同怎么办？

以下是我一直在尝试的代码：

```
string rowValue="";
string[] cellValue;
DataTable dt = new DataTable();
if (System.IO.File.Exists(csvPath.Text))
{
    System.IO.StreamReader streamReader = new StreamReader(csvPath.Text);
    // Reading header
    rowValue = streamReader.ReadLine();
    cellValue = rowValue.Split(',');
    for (int i = 0; i < cellValue.Count(); i++)
    {
        DataGridViewTextBoxColumn column = new DataGridViewTextBoxColumn();
        column.Name = cellValue[i];
        dataGridView1.Columns.Add(column);
     }
     // Reading content
     while (streamReader.Peek() != -1)
     {
        rowValue = streamReader.ReadLine();
        cellValue = rowValue.Split(',');
        dataGridView1.Rows.Add(cellValue);
      }
      streamReader.Close();
 }
 else
 {
      MessageBox.Show("Please Select a File!");
 }
 dataGridView1.DataSource = dt; 
```

保存到数据库表：

```
 con = new System.Data.SqlClient.SqlConnection();
        con.ConnectionString="Data Source=.\\SQLEXPRESS;AttachDbFilename=E:\\tushar\\dbLws.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";
        con.Open();

        if (string.IsNullOrEmpty(tbName.Text.Trim()))
        {

            MessageBox.Show("Please supply Table Name");
        }
        SqlBulkCopy sqlBulkCopy = new SqlBulkCopy(con.ConnectionString, SqlBulkCopyOptions.Default);
        sqlBulkCopy.DestinationTableName = tbName.Text.Trim();

        for (int i = 0; i < dataGridView1.ColumnCount; i++)
        {
            sqlBulkCopy.ColumnMappings.Add(dataGridView1.Columns[i].Name, dataGridView1.Columns[i].Name);
        }

        DataTable dt = new DataTable();
        dt = (DataTable)dataGridView1.DataSource;
        sqlBulkCopy.WriteToServer(dt);

        sqlBulkCopy.Close();

        MessageBox.Show("Saved successfully");

        con.Close();

    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-02-21T10:50:42.730

[http://raffidotnetlearner.blogspot.in/2014/02/how-to-upload-csv-file-data-into.html](http://raffidotnetlearner.blogspot.in/2014/02/how-to-upload-csv-file-data-into.html)

它的工作完美请完成步骤真棒

# android - 摇动不能超过一定的价值

> ID：12488873
> 
> 赞同：0
> 
> 时间：2012-09-19T05:04:18.390
> 
> 标签：android, accelerometer, android-sensors, shake

我想测量一次大震动（例如：测量自行车或汽车发生事故时的情况。我想测量手机震动）。当我的手机摇晃时，我有播放音频的代码。但是当我将 SHAKE_THRESHOLD 值更改为高水平时，它不起作用。是否可以测量大震动。

我的代码：

```
public class ShakeActivity extends Activity implements SensorListener{

     // For shake motion detection.
    private MediaPlayer mPlayer1;
    private SensorManager sensorMgr;
    private long lastUpdate = -1;
    private float x, y, z;
    private float last_x, last_y, last_z;
    private static final int SHAKE_THRESHOLD = 8000;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

         // other initializations
        // start motion detection
        sensorMgr = (SensorManager) getSystemService(SENSOR_SERVICE);
        boolean accelSupported = sensorMgr.registerListener(this,
            SensorManager.SENSOR_ACCELEROMETER,
            SensorManager.SENSOR_DELAY_GAME);

        if (!accelSupported) {
            // on accelerometer on this device
            sensorMgr.unregisterListener(this,
                    SensorManager.SENSOR_ACCELEROMETER);
        }
    }

    protected void onPause() {
        if (sensorMgr != null) {
            sensorMgr.unregisterListener(this,
                    SensorManager.SENSOR_ACCELEROMETER);
            sensorMgr = null;
            }
        super.onPause();
        }

    @Override
    public void onAccuracyChanged(int arg0, int arg1) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onSensorChanged(int sensor, float[] values) {
        // TODO Auto-generated method stub

        if (sensor == SensorManager.SENSOR_ACCELEROMETER) {
            long curTime = System.currentTimeMillis();
            // only allow one update every 100ms.
            if ((curTime - lastUpdate)> 100) {
            long diffTime = (curTime - lastUpdate);
            lastUpdate = curTime;

            x = values[SensorManager.DATA_X];
            y = values[SensorManager.DATA_Y];
            z = values[SensorManager.DATA_Z];

            float speed = Math.abs(x+y+z - last_x - last_y - last_z)
                                  / diffTime * 10000;
            if (speed > SHAKE_THRESHOLD) {
                // yes, this is a shake action! Do something about it!

                MediaPlayer mPlayer1 = MediaPlayer.create(this, R.raw.hello);

                try {
                    mPlayer1.prepare();
                } catch (IllegalStateException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                mPlayer1.start();

            }
            last_x = x;
            last_y = y;
            last_z = z;
            }
        }
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T05:24:16.067

转到**API Demos** application -> OS -> Sensors 那里有一个图表。摇动您的设备，看看哪个传感器显示您的设备变化更好并满足您的需求。

# c# - 布尔变量的所有可能组合

> ID：12488876
> 
> 赞同：2
> 
> 时间：2012-09-19T05:04:57.073
> 
> 标签：c#, algorithm, boolean

我正在尝试找到一种允许我执行以下操作的算法：假设我有 10 个布尔变量，并且我想尝试每个组合，因为我的目标是找到任何组合作为结果给我的一个methods true （这种方法有很多限制，这就是为什么我要测试所有可能的组合，如果没有可以解决问题的组合，那么我想通知用户）。我希望这是可以理解的！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T05:08:11.863

试试这个：

```
for (int i = 0; i < (1 << 10); i++)
{
    bool b1 = (i & (1 << 0)) != 0;
    bool b2 = (i & (1 << 1)) != 0;
    bool b3 = (i & (1 << 2)) != 0;
    bool b4 = (i & (1 << 3)) != 0;
    ...

    if (MyMethod(b1, b2, b3, b4, ...))
    {
        // Found a combination for which MyMethod returns true
    }
} 
```

当然，您也可以使用 LINQ：

```
var result = from b1 in new[] { false, true }
             from b2 in new[] { false, true }
             from b3 in new[] { false, true }
             from b4 in new[] { false, true }
             ...
             where MyMethod(b1, b2, b3, b4, ...)
             select new { b1, b2, b3, b4, ... }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T14:42:11.347

我终于想出了一个更有效的方法：使用二进制数：假设我想测试 8 个变量中所有可能的布尔组合：如果我选择执行以下操作，我将测试每个组合：

```
public string CombinationFinder()
{
    for (int i = 0; i < 2 ^ 8; i++)
    {
        String ans = Convert.ToInt32(i, 2).ToString();
        if (myMethod(ans))
        {
            return ans;
        }
    }
    return null;
} 
```

这将从 0 变为 255，二进制表示从 00000000 变为 11111111，其中每个数字取值 0 或 1，可以表示为布尔值。在此示例中，如果未找到组合，则该方法将返回 null。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-29T03:52:31.520

我知道这是一个老问题，但 waclock 的答案无法编译（C# 中没有指数运算符）。dtb 的答案达到了 99%，但不处理未知数量的布尔值，这就是这个答案提供的：

```
var props = typeof(TypeWithBooleans).GetProperties().Where(prop => prop.PropertyType == typeof(bool)).ToArray();

for (var i = 0; i < (1 << props.Length); ++i)
{
    var combination = Enumerable.Range(0, props.Length).Select(j => (i & (1 << j)) != 0).ToArray();
    if (MyMethod(combination)) {
        // handle match
    };
} 
```

这假设您关心的所有布尔值都局限于单个类/结构，并且`MyMethod`使用 params 数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T05:13:07.583

定义一个这样的类：

```
class Bint
{
  int num;
  public bool this[int num]
  {
    get {return num << n & 0x1 == 1;}
  }
  public int Num
  {
    get {return num;}
    set {num = value;}
  }
} 
```

并遍历数字：

```
Bint n = new Bint();
for (int i = 0; i < Math.pow(2,10); i++)
{
 n.Num = i;
 f(n[0],n[1]...);
} 
```

# php - Symfony 2.1 Vagrant 与亚马逊

> ID：12488877
> 
> 赞同：1
> 
> 时间：2012-09-19T05:04:59.943
> 
> 标签：php, symfony, amazon-ec2, amazon-web-services, symfony-2.1

我有一个通过 vagrant 机器运行的 Symfony 2.0 站点，然后也部署到 Amazon EC2 实例。最近我决定升级到 Symfony 2.1。这在 vagrant 机器上运行良好，但是当我将代码部署到 Amazon 服务器时无法正常工作。显示主站点，然后当我登录到站点的“用户”部分时，屏幕变为白色。我在日志中没有错误，也没有任何错误迹象。请注意，这在 vagrant 中非常有效。

我确实遇到了 Amazon 服务器上的 prePersist 和 preUpdate 注释以及无法加载 @ORM/注释的 Symfony 2.1 的问题，但我将它们更改为 PrePersist 和 PreUpdate 并解决了这个问题。现在我登录后有一个白屏，我很好奇 Symfony 2.1 可能不会像它应该的那样自动加载类？

任何想法将不胜感激？

谢谢

# haskell - 为什么此代码会产生“非详尽模式以防万一”错误？

> ID：12488878
> 
> 赞同：1
> 
> 时间：2012-09-19T05:05:01.567
> 
> 标签：haskell, case, guard

[我正在尝试本教程](http://www.haskell.org/haskellwiki/State_Monad#Complete_and_Concrete_Example_1)中给出的以下示例。

我无法理解的是案件如何保护案件`'c'`并且`_`根本不使用`on`？

我修改了[这里](http://hpaste.org/74941#line30)给出的代码，但是当我运行它时，我得到了错误“Non-exhaustive patterns in case”：

```
*StateGame> main "accaaaa"
*** Exception: state1.hs:(27,5)-(31,36): Non-exhaustive patterns in case 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T05:27:01.303

案例保护是一个布尔表达式，在成功匹配相应的模式后进行检查。如果计算结果为`True`，则选择该分支。否则，Haskell 将继续从上到下尝试每个案例。

在您的示例中，所有案例都有警卫表达式`on`：

```
case x of
   'a' | on -> ...
   'b' | on -> ...
   'c' | on -> ...
   _   | on -> ... 
```

因此，当`on`is时`False`，不能选择任何分支，因此您会得到“非详尽模式以防万一”异常。

# datetime - PowerShell 中的日期时间解析

> ID：12488879
> 
> 赞同：2
> 
> 时间：2012-09-19T05:05:02.220
> 
> 标签：datetime, powershell

我正在尝试编写一个 PowerShell 脚本，它将生成一个包含两列的信息表：名称和日期（将从第三方应用程序中检索 - 在本例中为 svn.exe）。

整个脚本运行良好，但我正在努力获取服务器发送回 DataTable 的日期。这是我的脚本的简化版本：

```
# Set up a DataTable and initialise columns
$table = New-Object system.Data.DataTable “Test Table”
$col1 = New-Object system.Data.DataColumn Name,([string])
$col2 = New-Object system.Data.DataColumn DateFromServer,([DateTime])
$table.columns.add($col1)
$table.columns.add($col2)

# Create a new row and add the data
$row = $table.NewRow()
$row.Name = "Test"
$lastCommit = GetDateFromExternalApp
$lastCommit.GetType() # this returns DateTime as I would expect
$row.DateFromServer = $lastCommit # this throws up an error
$table.Rows.Add($row)

# Output the table
$table | Format-Table -AutoSize

# This function simulates what the actual function does
# (the real one goes to SVN and pulls down data, but it
# ends up with the same resulting date)
Function GetDateFromExternalApp
{   
    $externalAppDate = "2012-09-17T16:33:57.177516Z"

    return [DateTime]($externalAppDate)
} 
```

问题（在上面脚本的注释中指出）是，虽然该函数似乎很高兴返回一个 DateTime 实例，但当我尝试将其添加到表行的 DateFromServer 列中时，它会抛出一个错误：

```
Exception setting "DateFromServer": "Unable to cast object of type 'System.Management.Automation.PSObject' to type 'System.IConvertible'.Couldn't store <18/09/2012 2:33:57 AM> in DateFromServer  Column.  Expected type is DateTime." At line:13 char:6
+ $row. <<<< DateFromServer = $lastCommit
    + CategoryInfo          : InvalidOperation: (:) [], RuntimeException
    + FullyQualifiedErrorId : PropertyAssignmentException 
```

但是，对 $lastCommit.GetType() 的调用表明这确实是一个 DateTime - 事实上，如果我在脚本中的某处添加这一行：

```
$lastCommit 
```

然后我可以看到一个格式很好的日期时间，表明它确实在解析它并正确转换它：

```
Date        : 18/09/2012 12:00:00 AM
Day         : 18
DayOfWeek   : Tuesday
DayOfYear   : 262
Hour        : 2
Kind        : Local
Millisecond : 177
Minute      : 33
Month       : 9
Second      : 57
Ticks       : 634835324371775160
TimeOfDay   : 02:33:57.1775160
Year        : 2012
DateTime    : Tuesday, 18 September 2012 2:33:57 AM 
```

因此，我对为什么会出现上述异常感到非常困惑。我意识到 PowerShell 的函数返回值与 C# 不同，但在我看来，函数返回的是正确的类型！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T00:22:32.163

这里的问题是由于 PowerShell 的类型适配系统中的一个错误（如果您还没有这样做，我建议您[向 Microsoft 报告此问题）。](http://connect.microsoft.com/PowerShell)

在 PowerShell 中处理对象时，实际上是在使用[`PSObject`](http://msdn.microsoft.com/en-us/library/system.management.automation.psobject.aspx)包装器。大多数调用（如[`GetType`](http://msdn.microsoft.com/en-us/library/system.object.gettype.aspx)）被转发到底层对象，但您可以添加不与对象本身交互的其他成员：

```
PS> Get-Date | Add-Member NoteProperty Yowza 'for example' -PassThru | Format-List y*
Yowza : for example
Year  : 2012 
```

通常这不是问题，因为 PowerShell 具有广泛的类型强制功能。但是，在这种情况下，用于支持属性访问语法[`DataRow`](http://msdn.microsoft.com/en-us/library/system.data.datarow.aspx)的类型似乎存在错误。`DataRowAdapter`如果您直接使用[索引器](http://msdn.microsoft.com/en-us/library/146h6tk5.aspx)`$row['DateFromServer'] = $lastCommit`而不是`$row.DateFromServer`，则在将值发送到 .NET 类型之前会正确解包该值。

您也可以通过自己解开值来解决这个问题，或者使用强制转换（如[vonPryz 已经展示](https://stackoverflow.com/a/12489275/2495)的那样：）`[DateTime]$lastCommit`，或者通过检索[`BaseObject`](http://msdn.microsoft.com/en-us/library/system.management.automation.psobject.baseobject.aspx)( `$lastCommit.PSObject.BaseObject`)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T05:56:52.187

我也想知道这种行为的原因。

无论如何，您可以通过将日期变量强制转换为 DateTime 或明确将其声明为 1 来解决此问题。像这样，

```
...
$row.DateFromServer = [DateTime]$lastCommit # Doesn't throw exception
... 
```

或者

```
...
[DateTime]$lastCommit = GetDateFromExternalApp
$row.DateFromServer = $lastCommit # Doesn't throw exception
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:43:29.033

我怀疑原因如错误消息中所述：

“无法将'System.Management.Automation.PSObject'类型的对象转换为'System.IConvertible'类型......预期类型是DateTime。” 在行：13 字符：6

这就是说 PowerShell 尝试将 $lastCommit 转换为日期和时间但失败了。最好的方法是，正如 vonPryz 建议的那样 - 将其转换为 [datetime]

要更清楚地看到问题，请尝试同时查看：$lastcommit.gettype() 和 $row.DateFromServer.gettype()

我没有要检查的 GetDateFromExternalApp

# javascript - jQuery Div 隐藏

> ID：12488883
> 
> 赞同：3
> 
> 时间：2012-09-19T05:05:06.653
> 
> 标签：javascript, jquery, html, dom, popup

我有一个`div`包含输入控件的标签。`div`当用户单击菜单项时，它会打开。`div`当点击在该区域之外时，我想隐藏此标签。

目前我可以`div`在单击外部时隐藏它，但是`div`当我单击`div`. 我该如何解决这个问题？

我的代码是：

```
$(document).click(function (e) {
  var elem = $(e.target).attr('id');
  console.log(e.target);

  if (elem !== 'btnLogin') {
    // if (elem != 'TxtUserName' && elem != 'TxtPassword')
    HideLoginDetails();
  }

  if (elem !== 'hpUseFul') {
    // if(elem !== 'y')
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T05:10:33.837

演示：http: [//jsfiddle.net/3fbpA/](http://jsfiddle.net/3fbpA/)

```
var aboveDiv = false;

$('#yourDiv').click(function () { 
  aboveDiv = true;
});

$(document).click(function () { 
  if (!aboveDiv) $('#yourDiv').hide();
  aboveDiv = false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T05:07:30.973

```
jQuery(document).ready(function()
{
    $('the div you want').hover(function(){ 
        mouse_inside=true; 
    }, function(){ 
        mouse_inside=false; 
    });

    $("body").mouseup(function(){ 
        if(! mouse_inside) $('the div you want').hide();
    });
}); 
```

还要检查“[当用户在 DIV 外部单击时使用 jQuery 隐藏 DIV](https://stackoverflow.com/questions/1403615/use-jquery-to-hide-a-div-when-the-user-clicks-outside-of-it) ”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T07:53:15.967

我已经为上述问题完成了完整的垃圾箱。你可以在这里查看演示链接...

**演示** [http://codebins.com/bin/4ldqp71](http://codebins.com/bin/4ldqp71)

**HTML**

```
<div id="loginDialog">
  <div class="field">
    <label>
      User Name: 
    </label>

    <span class="input">
      <input type="text" value="" id="txtuser" size="15"/>

    </span>
  </div>
  <div class="field">
    <label>
      Password: 
    </label>

    <span class="input">
      <input type="password" value="" id="txtpassword" size="15"/>

    </span>
  </div>
  <div class="field">
    <input type="button" id="btn_ok" value="Login" />
  </div>
</div>
<div>
  <a href="javascript:void(0);" id="btnLogin">
    Login
  </a>
  <a href="javascript:void(0);" id="btnMenu1">
    Menu1
  </a>
  <a href="javascript:void(0);" id="btnMenu2">
    Menu2
  </a>
</div> 
```

**jQuery**

```
$(function() {
    $("#btnLogin").click(function() {
        $("#loginDialog").show(500);
    });
    $(document).click(function(e) {
        e.preventDefault();
        var elem = $(e.target).attr('id');
        if ($(e.target).parents("#loginDialog").length) {
            $("#loginDialog").show();
        } else {
            if ($(e.target).attr('id') !== "btnLogin") {
                $("#loginDialog").hide(300);
            }
        }
    });
}); 
```

**CSS**

```
#loginDialog{
  border:1px solid #333;
  padding:4px;
  background:#2A2A2A;
  width:250px;
  color:#dfdfdf;
  display:none;
}
#loginDialog input{
  border:1px solid #efefef;
}
#loginDialog input[type=button]{
  background:#ababab;
}
#loginDialog input[type=button]:hover{
  background:#cfcfcf;
}
#loginDialog .field{
  text-align:center;
  margin-bottom:5px;
}
#loginDialog label{
  display:inline-block;
  width:100px;
}
a{
  display:inline-block;
  margin-left:8px;
} 
```

**演示** [http://codebins.com/bin/4ldqp71](http://codebins.com/bin/4ldqp71)

# msdeploy - Msdeploy 替换属性

> ID：12488886
> 
> 赞同：3
> 
> 时间：2012-09-19T05:05:20.647
> 
> 标签：msdeploy

我正在尝试 msdeploy 从我在源 IIS 7 站点上创建的包恢复目标计算机上的站点。目标服务器 IIS 也是 IIS7。但是，目标服务器没有驱动器 D: 作为物理驱动器。D: 与 CD Row 驱动器相关联。我在使用 msdeploy 时使用了 replace 属性，但该规则不起作用。下面是我的命令 msdeploy -verb:sync -source:package=d:\site.zip -dest:apphostconfig="Default Web Site" -replace:objectName="metaProperty",scopeAttributeName="name",scopeAttributeValue="Path" ,targetAttributeName="value",match="d:",replace="c:" -verbose -whatif > msdeploysync.log

但是，-whatif 没有显示更改为 C: 的路径，而且如果我运行命令，我会收到消息说“设备未准备好”，这意味着 D: 替换不起作用。

我被卡住了..有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T23:00:45.820

提供的用于更改路径的机制（请注意，以非 IIS 版本特定的方式）是设置 kind 参数`DestinationVirtualDirectory`：

```
-setParam:kind=DestinationVirtualDirectory,scope="Default Web Site",value="c:\full\path\to\website" 
```

如果您想简单地更换驱动器，请尝试将您的替换指令更改为：

```
-replace:objectName=virtualDirectory,scopeAttributeName=physicalPath,match=^C:,replace=D: 
```

以下是有关各种参数类型的一些官方文档：[使用 declareParam 和 setParam](http://technet.microsoft.com/en-us/library/dd569084%28v=ws.10%29.aspx)

# email - 将电子邮件发送到“收件人：”的备用地址

> ID：12488893
> 
> 赞同：2
> 
> 时间：2012-09-19T05:06:13.517
> 
> 标签：email, ruby-on-rails-3.2, actionmailer

我正在 Rails 中实现一种动态邮件列表系统。我希望基本上发送一封电子邮件并让收件人以这种形式接收它：

```
From: person@whosentthis.com
To: mailing-list@mysite.com

<body> 
```

基本上，挑战是如何在定义不同`To:`标头的同时向地址发送电子邮件，以便他们可以轻松回复邮件列表或仅回复原始发件人？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T13:35:10.647

## 邮件与信封

在电子邮件和物理邮件中一样（纸信封中的纸张），信封上的收件人可能与信纸上的收件人不同。

由于邮递员只会考虑信封的收件人，所以邮件服务器也是如此。

这意味着，实际上可以告诉 smtp 服务向与`To:`电子邮件标头字段中列出的收件人不同的收件人发送电子邮件。

### 手动尝试

您可以手动尝试一下，例如使用`sendmail`postfix 命令。

```
# bash
sendmail really_send_to_this_address@example.com < mail.txt 
```

在哪里

```
# mail.txt
From: foo@example.com
To: this_will_be_seen_in_the_to_field_in_email_clients@example.com
Subject: Testmail

This is a test mail. 
```

这会将电子邮件发送到`really_send_to_this_address@example.com`，而不是`this_will_be_seen_in_the_to_field_in_email_clients@example.com`，但后者将显示在邮件客户端的收件人字段中。

## 在 Rails 中指定 Envelope_to 字段

内部`ActionMailer::Base`使用[邮件 gem](https://github.com/mikel/mail)。目前，2013 年 4 月，有一个[拉取请求](https://github.com/mikel/mail/pull/477)，允许`envelope_to`在传递之前在消息上指定字段。

在此被拉出之前，您可以在`Gemfile`.

```
# Gemfile 
# ...
gem 'mail', git: 'git://github.com/jeremy/mail.git' 
```

您需要在`bundle update mail`此之后运行，并且根据您当前的 rails 版本，也许还`bundle update rails`需要解决一些依赖问题。

之后，您可以像这样设置邮件的信封收件人：

```
# rails
message # => <Mail::Message ...>
message.to = [ "this_will_be_seen_in_the_to_field_in_email_clients@example.com" ]
message.smtp_envelope_to = [ "really_send_to_this_address@example.com" ]
message.from = ...
message.subject = ...
message.body = ...
message.deliver 
```

## 文档

*   [https://github.com/mikel/mail/pull/477](https://github.com/mikel/mail/pull/477)
*   [http://rubydoc.info/github/jeremy/mail/master/Mail/Message#smtp_envelope_to%3D-instance_method](http://rubydoc.info/github/jeremy/mail/master/Mail/Message#smtp_envelope_to%3D-instance_method)
*   [https://github.com/mikel/mail](https://github.com/mikel/mail)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T05:41:57.647

为什么不为此使用密件抄送标头？放入`person@whoshouldreceivethis.com`密件抄送和`mailing-list@mysite.com`收件人。

澄清：

对此没有技术解决方案。电子邮件标题做他们所做的事情，一旦电子邮件在路上，你就无法影响他们。

不过，我敢肯定，您可以找到 TO、CC、BCC 和 REPLY-TO 的组合使用，从而满足您的需求。

# opencv - opencv中的骨架化

> ID：12488894
> 
> 赞同：6
> 
> 时间：2012-09-19T05:06:20.227
> 
> 标签：opencv

是否有任何特定功能可以在 opencv 中用于骨架化？此外，我搜索了一段时间，想知道opencv是否实现了voronoi-skeleton（似乎有但真的有）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T05:43:23.857

看起来 Voronoi-Skeleton 是在[opencv/src/cvaux/cvlee.cpp](https://code.ros.org/trac/opencv/browser/trunk/opencv/src/cvaux/cvlee.cpp?rev=27)`_cvConstructSkeleton()`的and`_cvLee()`函数中实现的。

我还没有看到任何有关如何在 OpenCV 中使用此功能的官方文档。由于`cvlee.cpp`在`cvaux`文件夹中，我认为这些可能是实验性 OpenCV 功能。

# asp.net - 如何在没有办公室介绍的情况下读取受密码保护的 excel 文件

> ID：12488900
> 
> 赞同：1
> 
> 时间：2012-09-19T05:07:52.413
> 
> 标签：asp.net, excel, c#-4.0, linq-to-objects

我需要阅读受密码保护的 excel 文件，但我的网络服务器没有安装 microsoft excel 应用程序。那么如何读取受密码保护的 excel 文件....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:04:08.187

[这](http://blogs.msdn.com/mshneer/archive/2009/12/07/interop-type-xxx-cannot-be-embedded-use-the-applicable-interface-instead.aspx)是一个处理该问题的博客文章。看起来你需要改变

```
Microsoft.Office.Interop.Excel.ApplicationClass(); 
```

至

```
Microsoft.Office.Interop.Excel.Application(); 
```

# java - Http 流式传输（使用 CSV 模拟实时数据流）

> ID：12488901
> 
> 赞同：0
> 
> 时间：2012-09-19T05:07:56.780
> 
> 标签：java, http, streaming, http-live-streaming

我是 Java 新手。有人可以帮忙提供一些代码片段或提示，我可以使用它们从 Web 服务器到客户端应用程序的实时流数据。我的 Web 服务器中的一个 java Op 正在读取一个 CSV，每 20 毫秒读取一行（每行有 15 个整数值），我希望客户端应用程序每 20 毫秒获取一次此数据。

直播是正确的方式吗？有两种方法（根据我搜索的任何内容） - 推/拉。我并没有真正理解它们以及它们之间的区别以及哪个更适合该目的。以及这种推/拉事物与实时数据流的不同之处。

Http Live 流媒体可以完全用于数据还是仅用于音频/视频。请高手帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:51:57.787

Http Live Streaming 指定流是 MPEG2 传输流、mp3 或 AAC 流。

你在“找错树了”。您可能希望在 java 中使用计时器进行简单循环，并忽略任何 HLS 库。

# android - 如何从数据库中获取数据并在android的应用程序中更新它？

> ID：12488903
> 
> 赞同：0
> 
> 时间：2012-09-19T05:07:59.380
> 
> 标签：android, database, web-services, parsing

好的，我需要我的应用程序从数据库中检索数据并将其显示在我的应用程序中，我知道这可以使用 XML/JSON 解析来完成，但数据几乎每天都会更新，因此不可能更新 XML 文件。服务器使用 SQL DB，除了从中解析数据之外，还有其他方法吗？我听说过网络服务获取数据并将其返回到应用程序，但在我的情况下它会起作用吗？我能从服务器检索我需要的特定数据吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T05:19:20.637

是的，您可以参考此链接 [Android (Java) Simple Send and receive with Server - Fast Setup Challenge](https://stackoverflow.com/questions/983761/android-java-simple-send-and-recieve-with-server-fast-setup-challenge)

[使用android从Web服务发送和接收数据](https://stackoverflow.com/questions/2854600/sending-and-receiving-data-from-a-web-service-using-android?lq=1)

[android中的简单客户端服务器通信](http://osamashabrez.com/simple-client-server-communication-in-android/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T05:20:10.997

是的。您需要创建一个 Web 服务并将其部署在您的服务器上，该服务器查询数据库并以 JSON/XML 格式返回响应，然后解析该响应并更新您的应用程序的数据。这是直接简单的方法。

* * *

正如您所说，您需要每天执行此操作，您可以考虑为该任务创建一个[服务](http://developer.android.com/reference/android/app/Service.html)，并且您也可以使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)。

# java - 在 Swing 中创建等距菜单

> ID：12488904
> 
> 赞同：2
> 
> 时间：2012-09-19T05:08:08.537
> 
> 标签：java, swing, user-interface

我正在尝试在 JFrame 中创建一个等距的菜单。通过不等间距的菜单，我的意思是菜单项的宽度随我们放入该菜单的文本而变化。现在，我的菜单看起来像这样：

* * *

![](../Images/400df33efab1b684bbc96088e0a090f5.png)

* * *

我希望我的菜单看起来像这样

* * *

![在此处输入图像描述](../Images/5e0fa664d28c63fdad8ae449c083ff57.png)

* * *

我可以这样做吗？我需要使用布局管理器来做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:54:04.353

> 我需要使用布局管理器来做到这一点吗？

简短的回答：是的:-)

更长的答案：menu/-bar 有点特别，因为某些 layoutManagers 不像一个（阅读：我）所期望的那样。想到的最简单的是单行 GridLayout：

```
// sanity check: does grid respect component alignment?
// manager does, but menu internal layout doesn't
JComponent content = new JPanel(new GridLayout(3, 3));
for (int i = 0; i < 9; i++) {
    if (i % 2 == 0) {
        JMenu menu = new JMenu("menu: " + i);
        menu.setBorderPainted(true);
        menu.setBorder(BorderFactory.createLineBorder(Color.GREEN));
        menu.setHorizontalAlignment(JMenu.CENTER);
        content.add(menu);
    } else {
        JLabel menu = new JLabel("label: " + i);
        menu.setBorder(BorderFactory.createLineBorder(Color.GREEN));
        menu.setHorizontalAlignment(JMenu.CENTER);
        content.add(menu);
    }
}
JXFrame frame = wrapInFrame(content, "menuBar with GridLayout");
JMenuBar bar = getMenuBar(frame);
// not surprisingly (after sanity check), 
// horizontal align isn't respected in the menubar as well
bar.setLayout(new GridLayout(1, 0));
JMenu menu = new JMenu("some dummy");
menu.setBorderPainted(true);
menu.setBorder(BorderFactory.createLineBorder(Color.GREEN));
menu.setHorizontalAlignment(JMenu.CENTER);
bar.add(menu);
bar.add(new JMenu("other"));
show(frame, 500, 500); 
```

完整性检查表明 JMenu 对它们的布局方式有自己的想法：内容始终是前导对齐的（确切的距离是 LAF 和 is- or not-topLevelMenu）。这是在 BasicMenuItem.paintMenuItem 中硬编码的，内部使用 MenuItemLayoutHelper。

因此，最简单的管理器会按预期对它们进行大小调整和定位，但在将单个项目居中时无能为力。

如果需要居中，您可以使用一个技巧（虽然 [1] 不推荐）：基于实现细节

*   默认的 layoutManger 是一个 BoxLayout 和
*   一个 topLevelMenu 有一个 maxSize == prefSize

您可以在每个项目之前/之后添加胶水：

```
JMenu menu = new JMenu("some dummy");
menu.setBorderPainted(true);
menu.setBorder(BorderFactory.createLineBorder(Color.GREEN));
menu.setHorizontalAlignment(JMenu.CENTER);
bar.add(Box.createHorizontalGlue());
bar.add(menu);
bar.add(Box.createHorizontalGlue());
bar.add(new JMenu("other"));
bar.add(Box.createHorizontalGlue()); 
```

这样一来，它们就显得居中并均匀分布在菜单栏宽度上：（可能，取决于要求）缺点是菜单的大小是按其偏好设置的，即不会填满整个栏。

[1] 相同的效果是干净的，不依赖于实现细节，具有足够强大的管理器，如 fi MigLayout

```
bar.setLayout(new MigLayout("fill, insets 0", "[center]")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T12:48:30.033

您也可以使用 a[`JToolBar`](http://docs.oracle.com/javase/tutorial/uiswing/components/toolbar.html)和 a`GridLayout(1, 0)`来获得均匀的间距。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-19T05:17:03.220

将每个菜单项上的首选大小设置为相同。

```
jMenu1.setPreferredSize(new java.awt.Dimension(80, 21));
jMenu2.setPreferredSize(new java.awt.Dimension(80, 21));
jMenu3.setPreferredSize(new java.awt.Dimension(80, 21)); 
```

# r - 为什么 ggplot2 图例不结合手动填充和缩放值？

> ID：12488905
> 
> 赞同：13
> 
> 时间：2012-09-19T05:08:10.143
> 
> 标签：r, ggplot2

## 预期行为

如果我用 ggplot2 创建一个绘图并使用单独的形状和填充比例来描绘数据，我希望图例会在“白色”填充点（看起来是空心的）和“黑色”填充点（看起来不空洞的）。

在下面的示例代码中，Windows 的图例项应为白色空心点，Linux 的图例项应为黑色填充点

## 实际行为

“操作系统”下的图例项描绘了两个视觉上相同的点，它们是明显不同的操作系统，其点在图表上用不同的填充清楚地绘制。在下面的示例代码中，Windows 和 Linux 在图例中都显示为无法区分的黑色空心点，即使它们在绘图本身上以不同的方式正确绘制。

## 样本图

[![图例中填充行为损坏的示例图](../Images/56618aa8086cd838b1a2bef4f0f531fd.png)](https://i.stack.imgur.com/ndviW.png)

## 示例代码

```
library(ggplot2)

x <- rnorm(n = 30)
y <- rnorm(n = 30)
treatment <- rep(c("red", "green", "blue"), times = 20)
operatingSystem <- rep(c("Windows", "Linux"), times = 30)

dd <- data.frame(x, y, treatment, operatingSystem)

fillScaleValues <- c(
  "Windows" = "white",
  "Linux" = "black"
)

shapeScaleValues <- c(
  "red" = 21,
  "green" = 22,
  "blue" = 23
)

p <- ggplot(
      aes(x = x, 
          y = y,
          shape = factor(treatment),
          fill = factor(operatingSystem)
      ), data = dd
     )

p <- p + geom_point()
p <- p + scale_fill_manual(values = fillScaleValues, name = "Operating System")
p <- p + scale_shape_manual(values = shapeScaleValues, name = "Treatment")

p 
```

## 会话信息

```
R version 2.15.1 (2012-06-22)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] C/en_US.UTF-8/C/C/C/C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] ggplot2_0.9.2.1       reshape2_1.2.1        plyr_1.7.1            ProjectTemplate_0.4-2
[5] testthat_0.7         

loaded via a namespace (and not attached):
 [1] MASS_7.3-21        RColorBrewer_1.0-5 colorspace_1.1-1   dichromat_1.2-4   
 [5] digest_0.5.2       evaluate_0.4.2     grid_2.15.1        gtable_0.1.1      
 [9] labeling_0.1       memoise_0.1        munsell_0.4        proto_0.3-9.2     
[13] scales_0.2.2       stringr_0.6.1      tools_2.15.1 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-19T06:30:44.447

You have to override the shape that's being used in the legend, as seen in [this question](https://stackoverflow.com/questions/11417517/removing-dot-element-from-ggplot2-legend).

So using your example code (thanks for the clear, reproducible question, by the way), all you need to do is:

```
p + guides(fill = guide_legend(override.aes = list(shape = 21))) 
```

Which gives you what you wanted:

![Proper legend](../Images/9ef7b7a93b6bf77797a9f6c754aafce4.png)

# python - 通过 ModelForm 传递自定义保存参数

> ID：12488909
> 
> 赞同：1
> 
> 时间：2012-09-19T05:08:17.150
> 
> 标签：python, django, django-forms

我有一个模型，在 save 方法中有一些自定义。

```
def SomeModel(models.Model):
    def save(self, *args, **kwargs):
        if not kwargs.pop('skip_expensive_processing', False):
            do_expensice_processing()
        return super(SomeModel, self).save(*args, **kwargs) 
```

基本上，每当调用 save 方法时，我都希望执行一些昂贵的过程

但是当一起做一堆保存（大量导入）时，我不想对每次保存都进行昂贵的处理。在保存所有对象后，我想执行一次昂贵的过程。

在批量保存的情况下，对象是通过`ModelForm`. 我需要找到一些方法来修改表单，以便当表单调用 save 方法时`SomeModel`，它会传递该`skip_expensive_processing`关键字 arg。我该怎么做呢？

我浏览了该`ModelForm.save()`方法的源代码，但它似乎并没有以一种过于直接的方式调用模型保存方法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:06:26.103

您可能不需要覆盖模型表单的`save`方法。您应该能够通过`commit=True`，然后根本不会调用模型保存。

# clojure - :repl-options 不会反映在 emacs 的 ritz nrepl 客户端中

> ID：12488915
> 
> 赞同：2
> 
> 时间：2012-09-19T05:09:24.387
> 
> 标签：clojure

当我使用 lein2 repl 开始 repl 时，我正在使用 project.clj 中的 :repl-options 键来加载默认选项。

我已将 ritz 插件添加到我的 project.clj 和 ~/.lein 中，一旦我开始使用 -

a) lein2 repl

然后使用连接到它

b) Mx nrepl RET Host: localhost RET Port: 5332（第一步启动nrepl的端口号）

我使用 :repl-options 加载的 ns 在使用 lein2 repl 开始的 repl 中可用，但在使用 Mx nrepl 开始的客户端中不可用。

关于如何在 Mx nrepl 开始的客户端中获取它们的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:49:54.430

坦率地说，我认为最好在[其邮件列表](https://groups.google.com/forum/?fromgroups#!forum/leiningen)中询问 Leiningen 相关的问题。我最近遇到了 Leiningen 的问题，该工具的开发者 Phil Hagelberg 几乎立即做出了回应。

您还可以询问[https://stackoverflow.com/questions/12493003/unmateched-delimiter-exception-but-still-able-to-run-code](https://stackoverflow.com/questions/12493003/unmateched-delimiter-exception-but-still-able-to-run-code)。我与 Lein2 有类似的问题（仅在 Cygwin 中），所以可能会导致错误报告。

# c# - 封装何时胜过 SOLID - public vs private c# 类？

> ID：12488920
> 
> 赞同：0
> 
> 时间：2012-09-19T05:10:02.640
> 
> 标签：c#, oop

我正在处理一些从其中一个示例派生的 MonoTouch 代码（这不是 MonoTouch 特定的问题），并且示例代码在另一个类中声明了一个私有类。我还没有看到在 c# 中大量使用私有类，我不知道它什么时候才有意义。我可以看到一个只在另一个类中引用的类是如何被声明为私有的，但这不会导致比它的价值更多的悲痛吗？这不会破坏一些 SOLID 原则吗？

*   单一责任 - 坏了？
*   打开/关闭 - 坏了？
*   Liskoff 换人 - 也许可以？
*   接口隔离 - 坏了？
*   依赖倒置 - 坏了？

现在，由于私有类定义，我发现仅仅试图导航源代码就令人困惑。我想这可以通过声明一个包含私有类的部分类并将它们分成单独的文件来缓解，但这真的是一个好方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T05:21:05.723

通常，嵌套类型（类或结构，包括枚举）用于某种上下文数据和/或行为，没有上下文就没有任何意义。

例如，当您不想从外部代码提供对该 API 的访问时，您可以为某些互操作 API 创建嵌套类型，或者您正在使用某种帮助数据容器，它提供了仅对周围类有用的功能。

因此，即使制作这些类型`internal`也会给其他开发人员带来混乱（尤其是在由几个人编辑单个项目的情况下）。

我没有看到，这里的 SOLID 是如何被破坏的——嵌套类型只是类型范围的限制。它不是周围类功能的扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T05:19:50.637

在 API 说“当我们要求您提供此接口的实现并向我们提供该接口的实现”的情况下，我使用了私有类，并且除了使用 API 之外，该类没有其他用途或消费者界面。

在这种情况下，接口提供公共或跨功能访问，因此无需访问实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T05:16:13.173

为什么 SRP 会被破坏？您将只能在类内部访问的职责分离到嵌套类中。

大多数其他原则不适用于私有成员或私有嵌套类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-26T23:06:20.477

我不确定，但我认为 Single Resposibilty 可以被嵌套类打破，因为一个类现在可以有更多的理由来改变。Single Resposibilty 的定义不是很清楚......无论如何，我认为 ms 确实在 .net 中也使用了嵌套类，所以也许 c# 在封装方面缺少一些特性。我认为嵌套类可以通过不做嵌套类和编写分析器来修复。嵌套类通常用于访问包装类的私有成员。

# javascript - 从 express3.x 视图中转储 ejs 模板中的对象？

> ID：12488930
> 
> 赞同：1
> 
> 时间：2012-09-19T05:11:49.067
> 
> 标签：javascript, node.js, express, ejs

我正在使用带有 node.js 和 express 3.x 的 ejs 模板...是否可以转储传递给视图的数据对象？

在 index.ejs 中是这样的：

```
<%= dump(session) %> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T06:50:23.167

您可以定义`dump`和任何其他在视图中使用的函数[`app.locals`](http://expressjs.com/api.html#app.locals)：

```
app.locals.dump = function () {
    // ...
}; 
```

一种选择可能是公开[`util.format()`](http://nodejs.org/api/util.html#util_util_format_format)或[`util.inspect()`](http://nodejs.org/api/util.html#util_util_inspect_object_showhidden_depth_colors)：

```
app.locals.inspect = require('util').inspect; 
```

然后：

```
<pre><%= inspect(session) %></pre> 
```

# objective-c - 目标c：如何根据主键从sqlite表中获取数据？

> ID：12488949
> 
> 赞同：1
> 
> 时间：2012-09-19T05:14:42.170
> 
> 标签：objective-c, ios, sqlite

假设我有 1 个名为 ABC 的表，其中包含 ABCid、ABCname、ABCImagePath、ABCSequence 字段。现在这个表在同一个里面包含了 40 多行。

现在我有一个数字数组，比如 1、4、5、7、8，我想将这些数字与 ABCid 进行比较，并根据这些 ID 从表 ABC 中获取所有数据。

```
 + (void) getSelectedData : (int)ABCId
        {   
        NSString *dbPath = [self getDBPath];    
        AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];     

                if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK)
                {
                    NSString *query =[NSString stringWithFormat:@"select * from [ABC] where ABCId=%d",ABCId];
                    const char *sql = [query cStringUsingEncoding:NSUTF8StringEncoding];
                            sqlite3_stmt *selectstmt;       

    if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK)
                    {
                        [self getInitialDataToDisplay:dbPath]; 
                        ABC *DataObj = [[ABC alloc] initWithPrimaryKey:ABCId];

                        DataObj.ABCName =    [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 1)];
                        ABCImagePath =   [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 2)];
                        DataObj.ABCSequence = sqlite3_column_int(selectstmt,8);
                        [appDelegate.arrGetData addObject:DataObj];         }
                    else
                    {
                        NSAssert1(0,@"Error: failed to prepare statement with message '%s'.", sqlite3_errmsg(database));
                    }
                    NSLog(@"%d",[appDelegate.DataArrayTrans count]);
                        }
                else
                    sqlite3_close(database); //Even though the open call failed, close the database connection to release all the memory. 
} 
```

但是应用程序在 if 条件下崩溃了。另请注意，我使用 pageController 中的以下行从 ABC 对象文件中调用上述函数。

```
for(int i=0;i<[arrRId count];i++)
{
    [ABC getSelectedData:[[arrRId objectAtIndex:i]integerValue]];
    [arr576576 addObject:[appDelegate.arrGetData valueForKey:@"ABCId"]];
} 
```

请指导我在哪里犯错。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:19:42.687

您的查询应该是这样的**select * from ABC where ABCId IN (1,4,5,7,8)** 就是这样。

# json - 将文件的数据存储在其他文件中

> ID：12488952
> 
> 赞同：0
> 
> 时间：2012-09-19T05:14:56.193
> 
> 标签：json, xml, file

我想将目录的文件数据存储在文件中。即，文件名，文件大小等，以便我可以减少搜索时间。我现在的问题是找到一种有效的方法来做到这一点。我已经考虑过 json 和 xml 但无法在这两者之间做出决定。另外，如果有更好的方法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:33:46.817

我想说这取决于您喜欢使用什么样的数据以及您拥有什么样的数据结构（非常简单的单词列表，不太简单的单词列表以及每个单词被搜索的次数,...)

对于单词列表，您可以使用每行一个单词或逗号分隔 (csv) 的简单文本文件，对于不太简单的结构，json 或 xml 可以正常工作。

我喜欢使用 json，因为它比 xml 更轻巧且不那么冗长。如果您不打算共享此数据和/或它并不复杂，则不需要 xml 提供的验证（xsd，...）。即使您打算共享这些数据，也可以使用 json。

您需要一些服务器端代码来将数据写入文件，例如 php、java、python、ruby、...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:50:49.590

如果您像属性文件一样使用 alomst，我会推荐 Json 文件。如果您打算将文件中的数据存储到数据库中，那么您可以选择 XML，您必须选择在 Java 环境中使用 JAXB/JPA

# php - PHP fputcsv 编码

> ID：12488954
> 
> 赞同：7
> 
> 时间：2012-09-19T05:15:16.640
> 
> 标签：php, csv, encoding, export-to-csv

我用 fputcsv 创建 csv 文件。我希望 csv 文件位于 windows1251 ecnding 中。但是找不到解决办法。我怎样才能做到这一点？干杯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-19T05:21:05.113

excel 文件的默认编码是机器特定的 ANSI，主要是`windows1252`. 但是由于您正在创建该文件并且可能插入 UTF-8 字符，因此该文件将无法正常处理。

您可以`iconv()`在创建文件时使用。例如：

```
function encodeCSV(&$value, $key){
    $value = iconv('UTF-8', 'Windows-1252', $value);
}
array_walk($values, 'encodeCSV'); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-12-12T10:10:05.220

它正在工作：
在 fputcsv 之前享受使用它：

```
$line = array_map("utf8_decode", $line); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-19T05:27:12.673

该文件将采用您的字符串所在的任何编码。PHP 字符串是原始字节数组，它们的编码取决于字节的来源。如果你只是从源代码文件中读取它们，它们就在你保存源代码的任何地方。如果它们来自数据库，则它们采用数据库连接设置的任何编码。

如果您需要从一种编码转换为另一种编码，请使用[`iconv`](http://php.net/iconv). 如果您需要更深入的信息，请参阅此处：

*   [每个程序员绝对，肯定需要了解编码和字符集以使用文本](http://kunststube.net/encoding/)
*   [在 Web 应用程序中从前到后处理 Unicode](http://kunststube.net/frontback/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-06-08T07:00:22.960

```
fputs( $fp, $bom = chr(0xEF) . chr(0xBB) . chr(0xBF) ); 
```

试试这个对我有用！！！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-19T05:19:27.880

试试 iconv 函数：

[http://php.net/manual/en/function.iconv.php](http://php.net/manual/en/function.iconv.php)

要将您传递给 fputcsv 函数的数组成员转换为您想要的编码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-14T15:56:07.417

```
$string = iconv(mb_detect_encoding($string), 'Windows-1252//TRANSLIT', $string); 
```

# excel - 检查某个字段是否为空

> ID：12488957
> 
> 赞同：-1
> 
> 时间：2012-09-19T05:15:23.330
> 
> 标签：excel, excel-formula, excel-2003

在我的 Excel 文档中，我有 51 个字段需要检查这些字段是否为空/我使用的是 Excel 2003，并且函数的最大参数为 30 `OR`：

```
=IF(OR(ISBLANK(A3)=TRUE;ISBLANK(B3)=TRUE...);"Some empty field";"") 
```

这是我的例子，但我需要检查更多字段，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T05:38:41.507

你可以用一个简单的方法来做到这一点`COUNTA`，即 51 个单元格从`A3`到`AY3`

```
=IF(COUNTA(A3:AY3)=51,"ok",51-COUNTA(A3:AY3) & "fields are empty") 
```

*脚注：`=ISBLANK(A3)`相同`=ISBLANK(A3)=TRUE`但更简单*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-19T05:22:41.813

最有可能的是，最好的是下面的选项 4

几个选项：

1.  VBA
2.  插入第 4 行（之后您将隐藏它）并将这些公式放在那里：

    A4: =IsBlank(A3) B4: =OR(A4, IsBlank(B3)) 并进一步复制此公式，例如 C4: =OR(B4, IsBlank(C3)), ... 然后，在最后一个单元格中会有答案

3.  如果您知道单元格应该包含数字，如果这对您有用，公式将是 =(A3+0)*(B3+0) .. 并且您测试结果是否为 0。空白加 0 为 0

4.  **您最好使用 this:=NOT(ISBLANK(A1))+0 然后将结果相乘。ISBLANK + 0 将true转换为1，即=IF(NOT((ISBLANK(A3))+0) * (NOT(ISBLANK(b3))+0) ... =0, xxxxx**

# python - Wamp 服务器和 Python

> ID：12488962
> 
> 赞同：1
> 
> 时间：2012-09-19T05:16:12.893
> 
> 标签：python, database, wampserver

嗨，我已经安装了 WAMP 服务器（Mysql，apache，php）并且还单独安装了“Python”。现在我正在尝试使用 python 代码连接到该数据库。

这是我的python代码：

```
#!C:\Python32\python.exe
import sys
import os
import cgi
import MySQLdb
import cgitb
import SecureDb
cgitb.enable()
print ("Content-type: text/plain\n\n");
conn= MySQLdb.connect(host = SecureDb.host ,user =SecureDb.user ,passwd=SecureDb.password ,db=SecureDb.database)
cursor=conn.cursor()
cursor.execute("select * from register where Name='Subburaj'")
result=cursor.fetchall()
cursor.close()
conn.close() 
```

但这显示了一个错误：

```
 Traceback (most recent call last):
  File "C:\Users\Ponmani\Desktop\test.cgi", line 5, in <module>
    import MySQLdb
  File "C:\Python32\lib\site-packages\MySQLdb\__init__.py", line 17, in <module>
    from release import __version__, version_info, __author__
ImportError: No module named release 
```

如果有人遇到这个问题，请帮我解决这个问题。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T05:32:35.303

MYSQLdb 不附带 python。看来您必须先从[这里](http://sourceforge.net/projects/mysql-python/)安装它。如果您使用的是 Windows 32，[这里](http://sourceforge.net/projects/mysql-python/files/latest/download)有一个可执行文件。但它适用于 python 2.7。如果您使用的是 python 3.2，它会变得更加困难。[这是](http://www.lfd.uci.edu/~gohlke/pythonlibs/)一个适用于 3.2 的非官方软件包。

编辑：发布模块应该是 mysqldb 的一部分，我唯一的猜测是安装仍然有问题。可能没有正确提取子文件夹。您应该尝试重新安装。

编辑：您还可以检查 mysqldb 目录中是否有 release.py 。如果您不这样做，那肯定是安装问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T05:31:59.130

您需要安装 MySQLdb 模块

```
easy_install MySQL-python 
```

# c# - WaveIn API 在工作期间在移动平台上失败

> ID：12488965
> 
> 赞同：0
> 
> 时间：2012-09-19T05:16:26.127
> 
> 标签：c#, winapi, windows-mobile

我正在使用 WaveIn P/Invoke 示例在 C#/.NET 中的 Pocket PC 设备上捕获实时音频。我正在`WAVEHDR` 通过执行`waveInUnprepareHeader`, `waveInPrepareHeader`, `waveInAddBuffer`序列来回收缓冲区。这一切都可以正常工作大约 2 - 60 秒，但在 、`waveInUnprepareHeader`、`waveInPrepareHeader`和`waveInAddBuffer`（全部）之后返回`INVALPARAM`错误并且音频输入停止。

我怎样才能避免这个错误并解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:02:51.620

我最好的猜测（基于无代码）是您的设备没有足够的内部 RAM 来录制此音频。

# css - 段落的最后一行仅包含一个单词

> ID：12488966
> 
> 赞同：1
> 
> 时间：2012-09-19T05:16:50.123
> 
> 标签：css, paragraph, orphan

> **可能的重复：**
> [JavaScript 避免寡妇](https://stackoverflow.com/questions/7444656/javascript-to-avoid-widows)

在 CSS 或 JS 中是否有办法防止最后一行仅包含一个单词的段落？

# asp.net-mvc-4 - 删除数据库会导致异常，直到我在 Web.config 中重命名目录

> ID：12488971
> 
> 赞同：2
> 
> 时间：2012-09-19T05:17:34.420
> 
> 标签：asp.net-mvc-4, visual-studio-2012

如果我删除我的`aspet-*.mdf`文件然后尝试重新运行我的项目，我会收到此异常

> 初始化数据库时发生异常。有关详细信息，请参阅 InnerException。

它第一次尝试访问数据库。如果我然后进入我的主`Web.config`文件并将“初始目录”位更改为不同的名称并重新运行项目，它运行良好。

为什么？我猜它在某个地方缓存了一些东西，它认为目录仍然存在，但它找不到它？

但我不必更改`AttachDBFilename`-- 文件名可以完全相同，只要我更改目录，它就会重新创建它。

**究竟什么是“目录”，我该如何解决这个问题，这样我就不必不断修改我的连接字符串？**

我正在使用的完整字符串是

```
<connectionStrings>
  <add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-Sharpix-20120918b;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-Sharpix-20120907.mdf" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

仅对 MVC4 应用程序附带的版本稍作修改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T03:26:30.700

假设您的连接字符串类似于下面

```
connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-123123;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-123123.mdf" 
```

1）使用SQL management studio登录数据源服务器类型：数据库引擎服务器名称：（LocalDb）\v11.0 身份验证：Windows身份验证

2）一旦打开，您将看到所有看似神秘创建的数据库。

3) 右键单击​​要删除的数据库，然后按照对话框窗口操作。

localDB 引擎，新的 vof VS 2012，存储了所有这些开发数据库。如果您物理删除 .mdf，请右键单击数据库名称并删除数据库。忽略警告消息，然后刷新数据库。数据库引用应该消失了。

您可以通过 VS 2012 执行类似的操作，方法是选择视图、服务器资源管理器，然后从服务器资源管理器窗格中选择 SQL Server 对象资源管理器选项。

# pylucene - 只有部分 pylucene 可用？

> ID：12488975
> 
> 赞同：1
> 
> 时间：2012-09-19T05:18:42.480
> 
> 标签：pylucene

我正在尝试将一些 Java Lucene 代码移植到 pylucene (v 2.3.1) 中。我正在使用 [http://svn.apache.org/viewcvs.cgi/lucene/pylucene/trunk/samples/](http://svn.apache.org/viewcvs.cgi/lucene/pylucene/trunk/samples/)中的示例，并且大部分 pylucene 似乎都进入了我的 python (ubuntu 12.04、pydev 2.6.0、eclipse 3.7.2）环境就好了。例如，我可以执行 lucene.initVM() （显示 JCC 已就位）并按照从 .../samples/PorterStemmerAnalyzer.py 中获取的示例定义一个 Porter 词干分析器：

```
self.analyzer = PorterStemmerAnalyzer() 
```

但是当我尝试创建一个新的 IndexWriter 时，它偶然发现了它的构造函数的最后一个参数：

```
self.writer = lucene.IndexWriter(self.store, self.analyzer, True, lucene.IndexWriter.MaxFieldLength.LIMITED) 
```

我收到此错误：

```
AttributeError: type object 'IndexWriter' has no attribute 'MaxFieldLength'. 
```

这是目前让我难过的错误，但我也做过其他几个黑客（来自他们的版本.../samples）（但也担心）：

*   用 lucene.LucenePackage 替换 lucene.Version.LUCENE_CURRENT

*   lucene.SimpleFSDirectory 和 lucene.MMapDirectory

为了能走到这一步。

[http://lucene.apache.org/pylucene/features.html](http://lucene.apache.org/pylucene/features.html)说“PyLucene API 在 PyLucene 模块的平面命名空间中公开所有 Java Lucene 类。” 这似乎并不完全正确， lucene.StopAnalyzer.ENGLISH_STOP_WORDS_SET 是 pydev 已知的，而 lucene.ENGLISH_STOP_WORDS_SET 不是。

所以看来我正在成为/的一部分/旧版本/...？pylucene 正确接合，但不是全部！？为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:33:53.090

几乎可以肯定，问题与作为 .deb 的 pylucene 的最新版本有关，它是 2.3.1，而 pylucene 现在是 v. 3.6.1！

从源代码分发中进行制作需要一些接触。JohnW 在 [http://john.wesorick.com/2011/11/installing-pylucene-on-ubuntu-1110.html](http://john.wesorick.com/2011/11/installing-pylucene-on-ubuntu-1110.html)的说明很有帮助。对于它的价值，这是我最终做出的改变，首先是 linux2 的 JDK 规范`jcc/setup.py`：

```
JDK = {
    'darwin': JAVAHOME,
    'ipod': '/usr/include/gcc',
    'linux2': '/usr/lib/jvm/java-7-openjdk-amd64',
    'sunos5': '/usr/jdk/instances/jdk1.6.0',
    'win32': JAVAHOME,
    'mingw32': JAVAHOME,
    'freebsd7': '/usr/local/diablo-jdk1.6.0'
} 
```

然后到 Makefile：

```
PREFIX_PYTHON=/usr
ANT=JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64 /usr/bin/ant
PYTHON=$(PREFIX_PYTHON)/bin/python
JCC=$(PYTHON) -m jcc --shared
NUM_FILES=4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:22:07.033

我使用了 rikb 的答案，它奏效了，但我不得不改变

> 'linux2': '/usr/lib/jvm/java-7-openjdk-amd64',

至...

> 'linux2': '/usr/lib/jvm/java-6-openjdk-amd64',

由于我使用的是 Java 6。看来他也是，所以也许他没有在 Linux 上使用该配置。

另请注意，如果您为 Makefile 复制和粘贴全部或部分 rikb 的内容块，则每行可能会有尾随空格。然后'sudo make'步骤将失败，相当神秘，并显示类似“make: execvp: /usr: Permission denied”的消息。这是因为“PREFIX_PYTHON=/usr”后面的空格导致make尝试执行目录/usr。

# objective-c - Objective C - 字典和数组之间的区别？

> ID：12488985
> 
> 赞同：1
> 
> 时间：2012-09-19T05:19:49.460
> 
> 标签：objective-c

在Objective C中-字典和数组有什么区别？字典是否与 key : value 一起使用（其中 Key 可以是任何对象），而数组是 id : value （其中 id 是整数）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T05:28:20.073

**大批**

在 Objective-C 中，数组是一种可以存储对象类型的集合。它可以存储任何类型的对象。存储在数组中的对象链接到它们的索引号。

例如。如果您创建一个数组并插入第一个对象，它将存储在“索引 0”中，并且索引号将从 0,1,2....n 继续增加

使用“NSMutableArray”创建一个可以修改的数组。

例子，

```
NSMutableArray *array = [NSMutableArray alloc] init];
[array addObject:@"Tom"];
[array addObject:@"Cat"]; 
```

因此，在索引 0 处，您将拥有“Tom”。而且，在索引 1 处，您将拥有“猫”。

**字典**

在 Objective-C 中，字典是一种存储“键值”对的集合。“键”是 ID 类型，因此您可以输入任何对象作为值的键。

使用“NSMutableDictionary”创建可以修改的字典。

例子，

```
NSMutableDictionary *dictionary = [NSMutableDictionary alloc] init];
[dictionary setObject:@"Tom" forkey:@"name"];
[dictionary setObject:@"Cat" forKey:@"animal"]; 
```

数组和字典之间的主要区别在于字典中对象的顺序发生了变化，而在数组中存储的对象的顺序是连续的。

**[编辑]**

由于关于这个答案已经进行了相当多的讨论，我会明确指出，数组不会像一些评论所说的那样重新创建。

数组/字典的大小会动态增加以适应集合中的新元素。

# php - 打印 $GLOBALS 时“*RECURSION*”是什么意思？

> ID：12488986
> 
> 赞同：8
> 
> 时间：2012-09-19T05:19:49.857
> 
> 标签：php, arrays, recursion

`$GLOBALS`当我使用此代码打印时：

```
<?php print_r($GLOBALS); ?> 
```

我得到这个输出：

`Array ( [_GET] => Array ( ) [_POST] => Array ( ) [_COOKIE] => Array ( ) [_FILES] => Array ( ) [GLOBALS] => Array *RECURSION* )`

`*RECURSION*`在这种情况下，“”是什么意思，为什么不打印`$_SERVER`,`$_REQUEST`等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T05:26:10.887

请参阅[PHP 手册的这一部分](http://www.php.net/manual/en/reserved.variables.globals.php#85048)：

> 请记住，$GLOBALS 本身就是一个全局变量。所以这样的代码不起作用：
> 
> ```
> <?php
>     print '$GLOBALS = ' . var_export($GLOBALS, true) . "\n";
> ?> 
> ```
> 
> 这会导致错误消息：“嵌套级别太深 - 递归依赖？”

您已经检索了整个列表 - 您只是无法显示其中的一部分（包含递归的列表，因为您将有超时而不是任何有意义的东西）。

说到，它是,和`$_REQUEST`的派生词，所以它的内容是多余的。`$_GET``$_POST``$_COOKIE`

**编辑**：有[一个旧的错误/功能](https://bugs.php.net/bug.php?id=29176)，似乎是填充`$GLOBALS`和`$_SERVER`访问`$_REQUEST`它们的时间。所以尝试访问`$_REQUEST`并希望它有所帮助。无论如何，它可以在`$GLOBALS`之后找到：ideone.com/CGetH

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T05:46:12.683

`$GLOBALS`包含自己作为一个数组。在[PHP 参考中](http://php.net/manual/en/reserved.variables.globals.php)，您可以找到以下定义`$GLOBALS`：

> 一个关联数组，包含对当前在脚本全局范围内定义的所有变量的引用。变量名是数组的键。

**因此，它还必须包含自身，这会导致递归。**

其他数组可能只是空的，因为您的脚本中没有发生任何其他事情。

关于递归有一个古老的笑话：“要理解递归，你必须理解递归”。

顺便说一句：它在我的计算机上输出 _SERVER。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T05:22:30.677

当您有一个指向自身的对象时……即，它只会绕圈子。

# jquery - jquery validate插件无法在成功回调中访问标签

> ID：12488988
> 
> 赞同：1
> 
> 时间：2012-09-19T05:20:01.340
> 
> 标签：jquery, jquery-validate

我有一个表单，我正在尝试使用 jquery validate 插件。我的问题是我无法访问成功回调中的标签。我可以得到`label.attr('for')`，但是当我尝试时`label.attr('id')`，或者`label.html()`，我得到未定义。

这是我的验证电话：

```
 <script type="text/javascript">
        $(document).ready(function() {
            $('#personal_info').validate({
                rules: {
                    LastName: "required",
                    Age: "required"
                },
                messages: {
                    LastName: "",
                    Age: ""
                },
                errorPlacement: function(error, element) {
                    console.log('element.attr = '+element.attr('name'));
                    if(element.attr('name') == 'Age') {
                            console.log('element = '+element.parents().siblings('label').html());
                            element.parents().siblings('label').removeClass('highlight').addClass('warning');
                    }                                       
                    //error.insertBefore(element.parent().children("br"));
                },

                // specifying a submitHandler prevents the default submit, good for the demo
                submitHandler: function() {
                    document.personal_info.submit();
                },
                validClass: "checkmark",
                // set this class to error-labels to indicate valid fields
                success: function(label) {
                    console.log('the label for = '+label.attr('for'));
                    console.log('the label id = '+label.attr('id'));
                }   
            });
        });
</script> 
```

这是我的一段html：

```
<label for="Age" id="age18" class="highlight">&nbsp;&nbsp;&nbsp;&nbsp;Are you at least 18 years of age?</label>
       <table id="OnlineAppWizard_InputAge18" border="0">
             <tr>
                 <td>
                     <input id="Age18_yes" type="radio" name="Age" value="Yes"  <?
                         if ($Age18 == "Yes") {
                               print "checked";
                         }
                      ?>/>
                     <label for="Age18_yes">Yes</label>
                 </td>
                 <td>
                     <input id="Age18_no" type="radio" name="Age" value="No" <?
                         if ($Age18 == "No") {
                                print "checked";
                         } ?>/>
                     <label for="Age18_no">No</label>
                 </td>
             </tr>
         </table> 
```

当我单击其中一个单选按钮时，萤火虫控制台中会出现以下内容：

```
the label for = Age
the label id = undefined 
```

您可以从 html 片段中看到带有“Age”的“for”属性的标签标签，也有一个“age18”的“id”属性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:30:49.613

`label`传递给回调的参数`success`不是你认为的标签。jQuery Validation 插件为每个元素生成错误标签以显示错误消息。正是这个生成的标签被传递给`success`回调。您可以通过添加`console.log(label);`为回调的第一行来看到这一点。它将返回以下内容：

```
[<label for=​"Age" generated=​"true" class=​"error" style=​"display:​ inline;​ ">​&lt;/label>​] 
```

仅供参考，该标签是在`showLabel`验证器的方法中创建的。它也是作为方法的`error`参数传递的相同元素`errorPlacement`。通常，该`error`元素将被附加到导致错误（即验证失败）的表单元素中。

要从`success`回调中访问原始标签，您将需要更直接的方法。

一个解决方案，非常特定于这个特定的标签，是简单地通过它的 ID 访问它，例如

```
if(label.attr('for') === 'Age') {
    $('#age18')...    // do something to the label
} 
```

更通用的解决方案是：

```
$('#personal_info').children('[for="' + label.attr('for') + '"]')...  // do something to label 
```

我在下面链接的现场演示中包含了这两种解决方案。

[现场演示](http://jsfiddle.net/Lhjet/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T12:17:05.630

我就是这样做的。能够在输入框旁边放置自定义图像并将其删除并更改输入框的边框颜色。

```
<html>
<head>

    <meta charset="utf-8">
    <title>error handling</title>
    <link rel="stylesheet" media="screen" href="css/screen.css">
    <script src="js/jquery-validation-1.13.1/lib/jquery.js"></script>
    <script src="js/jquery-validation-1.13.1/dist/jquery.validate.js"></script>

<script>
$(document).ready(function() 
{
$("#someForm").validate({
        rules: 
        {
            param1: {required: true, minlength: 3, maxlength: 15},
            param2: {required: true, minlength: 3, maxlength: 15}
        },
    errorPlacement: function(error, element) 
    {
            element.attr("style","border-color: red");
            element.parent('div').append( '<div id="'+element.attr('id')+"img"+'" class="errorValidationIcon"><a href="#" class="errorValidationTooltip"><img src="img/redError.png" class="errorValidationIcon"/><span><img class="callout" src="img/callout.gif" /><strong></strong><br /></span> </a></div> '); 
            error.appendTo('strong'); 
    },
    success: function(label) 
        {
            if (label.attr('for') === 'param1') 
            {
                $('#param1img').remove();
                $('#param1').attr("style", "border-color: rgb(83,103,141)");
            }
            if (label.attr('for') === 'param2') 
            {
                $('#param2img').remove();
                $('#param2').attr("style", "border-color: rgb(83,103,141)");
            }
        }
    }); 
});

</script>
</head>

<body>
<div id="layoutCenter">
<form id="someForm" action="#">
    <div>
    <div>Register</div>

    <div>
        <div>Blah</div>  
        <div ><div >Parameter<div>*</div></div><div ><input name="param1" id="param1" type="text" /></div></div>
        <div ><div >OID<div>*</div></div><div ><input name="param2" id="param2" type="text" /></div></div>
    </div>

    </div>
</form>
</div>
</body>

</html> 
```

# java - 如何缩短 Java 中的字符串连接？

> ID：12488990
> 
> 赞同：2
> 
> 时间：2012-09-19T05:20:08.647
> 
> 标签：java, string, string-concatenation

下面的代码是否可以用更短的形式重写（可能是一个语句？）例如 `ab = something.join(a,b,"-");`这可以通过 Java 扩展、动态语言等来实现。

```
 String a=....
                String b=.....
                String ab = "";
                if(a!=null && a.length()>0) {
                        ab = a;
                }
                if(b!=null && b.length()>0) {
                        if(ab.length()>0) {
                            ab =ab + "-" + b;
                        } else {
                            ab = b;
                        }
                } 
```

更新：

有没有内置的方法？我不想写一个方法或复杂的句子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T05:27:02.350

你可能想试试[番石榴木匠](http://code.google.com/p/guava-libraries/wiki/StringsExplained)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T06:46:30.523

只为这个功能引入外部库可能有点矫枉过正，但看看[Apache Commons StringUtils](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#join%28java.util.Collection,%20char%29)。但是您可以创建一个实用方法，例如：

```
private static String join(String delimiter, String...parts) {
    StringBuilder builder = new StringBuilder();
    for (String part: parts) {
        if (!isEmpty(part)) {
            if (builder.length() > 0) {
                builder.append(delimiter);
            }
            builder.append(part);
        }
    }
    return builder.toString();
}

private static boolean isEmpty(String part) {
    return part != null && part.length() > 0;   
} 
```

我将分隔符放在首位以允许可变数量的参数，例如*join("-", null, "b", null, "d", "e", null)*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T05:25:39.887

```
String ab = (a != null && !a.isEmpty() ? a : "")
          + (a != null && b != null && !a.isEmpty() && !b.isEmpty() ? "-" : "")
          + (b != null && !b.isEmpty() ? b : ""); 
```

我很确定如果一个字符串为 null 并且您没有明确检查它，那么输出将与字符串包含 string 相同`"null"`。

此外，使用 + 附加字符串通常等同于使用 StringBuilder，但不那么冗长。您可以通过编写一个简单的示例，将其编译为类文件并反编译来验证这一点（大多数反编译器不会费心用 + 语法替换 StringBuilders）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T05:59:49.173

这只是我的 2 美分：

```
public boolean isEmpty(String string) {
    return string != null && !"".equals(string);
}

public String join(String a, String b, String separator) {
    if (!isEmpty(a) && !isEmpty(b)) {
        return a + separator + b;
    }
    if (!isEmpty(a)) {
        return a;
    }
    if (!isEmpty(b)) {
        return b;
    }
    return "";
}

public String joinLessObvious(String a, String b, String separator) {
    return !isEmpty(a) && !isEmpty(b) ? a + separator + b : !isEmpty(a) ? a : !isEmpty(b) ? b : "";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T05:27:42.563

你可以试试`StringBuilder`这个：

```
StringBuilder builder = new StringBuilder("");
builder.append((a != null ? a : ""))
       .append(((a != null && b != null) ? "-" : ""))
       .append((b != null ? b : "")); 
```

您可以创建一个方法以在一行中使用它：

```
public String join(String a, String b, String separator) {
    StringBuilder builder = new StringBuilder("");
    builder.append((a != null ? a : ""))
           .append(((a != null && b != null) ? "-" : ""))
           .append((b != null ? b : ""));
    return builder.toString();
} 
```

然后像这样称呼它：

```
System.out.println(join("Another", "Test", "-")); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T05:54:36.180

这是更少的代码：

```
String ta = (a == null ? "" : a);
String tb = (b == null ? "" : b);
ab = (ta.length() > 0 && tb.length() > 0) ? (ta + "-" + tb) : (ta + tb); 
```

...但我不一定称其为改进。