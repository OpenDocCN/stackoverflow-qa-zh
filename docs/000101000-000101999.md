# StackOverflow 问答 101000-101999

# .net - 为 .net IIS 应用程序选择 XPath 版本

> ID：101004
> 
> 赞同：3
> 
> 时间：2008-09-19T10:35:32.840
> 
> 标签：.net, iis, xpath, installation, xpath-2.0

我们有一个在 IIS 6 上运行的 .net CMS，它使用 XSLT 模板。它似乎正在运行 XPath 1.0（因为我们不能使用任何 2.0 功能）。

我们如何安装或指定 IIS 应该使用 XPath 2.0？它是按服务器安装的，还是我们可以指定在每个应用程序池或每个站点上使用哪个版本？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T10:50:34.987

据我所知（我还没有看到任何明确的来源），.NET 不支持 XPath 2.0。我读过一些建议它的东西，但是如果不提供自定义函数定义，我就无法运行任何 2.0 XPath 函数。

[但是，您可以使用外部库来获得 2.0 兼容性。](http://saxon.sourceforge.net/)

# ruby-on-rails - 自定义通用 Rails 错误消息

> ID：101012
> 
> 赞同：3
> 
> 时间：2008-09-19T10:39:02.033
> 
> 标签：ruby-on-rails

我们的 rails 应用程序设计为链接到多个客户端数据库的单个代码库。根据子域，应用程序确定要连接到哪个数据库。

我们使用液体模板为每个客户定制演示文稿。我们无法为每个客户定制通用的“我们很抱歉，出了点问题..”消息。

任何人都可以推荐一种允许我们这样做的方法。

谢谢

DOM

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-19T10:44:03.113

对于在 Rails 2 中捕获异常，`rescue_from`控制器方法是指定处理各种情况的操作的好方法。

```
class ApplicationController < ActionController::Base
  rescue_from MyAppError, :with => :show_errors

  def show_errors
    render :action => "..."
  end
end 
```

这样您就可以制作动态错误页面来替换静态“public/500.html”页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-20T17:02:46.557

目前尚不清楚您是尝试执行内联错误消息还是新页面错误消息，但如果您想改进内联错误消息周围的文本，[这篇文章](http://www.softiesonrails.com/2008/4/23/better-messages-for-activerecord-validation-errors)提供了很好的信息。

# windows - 如何获得 Windows 进程最大化 CPU 的通知？

> ID：101021
> 
> 赞同：0
> 
> 时间：2008-09-19T10:43:24.787
> 
> 标签：windows, performance, utilities

是否有适用于 Windows XP 和 Vista（内置或其他理想的免费软件/ [OSS](http://en.wikipedia.org/wiki/Open_source_software)）的工具可以在 CPU 在某些（可配置的）持续时间内高于（可配置的）阈值时通知用户？

我对符合以下要求并按重要性排序的*极简*工具特别感兴趣（许多内置的 Windows 工具，如[性能/资源监视器](http://technet.microsoft.com/en-us/library/cc749249.aspx)不这样做）：

1.  不需要管理权限
2.  具有*较低的工作集*，因此如果永远运行它就没有可观察到的成本
3.  在系统托盘中静默监控
4.  使用一种微妙的（不是面对面的）通知方法，例如显示一个气球提示，其中包含已最大化 CPU 的违规进程的名称
5.  可以配置为在用户交互登录时自动启动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T11:31:06.870

也许[ProcessTamer](http://www.donationcoder.com/Software/Mouser/proctamer/index.html)可能会有所帮助。它并不完全符合您的要求。但这可能是一个快速而肮脏的解决方案。

> Process Tamer 是一个用于 Microsoft Windows XP/2K/NT 的小型 (140k) 且超级高效的实用程序，它在您的系统托盘中运行并持续监控其他进程的 cpu 使用情况。当它看到一个进程使你的 cpu 过载时，它会暂时降低该进程的优先级，直到它的 cpu 使用率恢复到合理的水平。
> 
> [![截屏](../Images/a144b1dadd443e7e060acb7052089301.png)](https://i.stack.imgur.com/YlwLp.png)
> [（来源：[donationcoder.com](https://www.donationcoder.com/Software/Mouser/proctamer/screenshots/pt.png)）]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-19T21:05:59.163

您可以编写自己的实用程序。

这里有一个示例作为启动器：http: [//gist.github.com/11658](http://gist.github.com/11658)

1.  创建一个 CpuMeter 实例
2.  重置计数器
3.  等待一个间隔
4.  检查 CPU 利用率
5.  重新开始

# java - 如何为 HTTP servlet 容器选择最大线程数？

> ID：101024
> 
> 赞同：7
> 
> 时间：2008-09-19T10:43:34.893
> 
> 标签：java, http, optimization, servlets, concurrency

我正在开发一个安静的 Web 服务，它在 Jetty 中作为 servlet（使用阻塞 IO）运行。找出最大线程的最佳设置似乎很难。

是否有研究公式可以从其余设置的一些易于测量的特征中确定最大线程数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-19T13:59:48.830

非常简单和原始的一个：

max_number_of_threads = number_of_CPUs * C

其中 C 取决于您的应用程序的其他因素:-)

问自己以下问题：

*   您的应用程序是 CPU 密集型（较低 C）还是花费大部分时间等待第三个系统（较高 C）？
*   您是否需要更快的响应时间（较低的 C）或者即使每个请求需要更长的时间（较高的 C）也能够同时为多个用户提供服务。

通常我将 C 设置得相当低，例如 2 - 10。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T10:50:54.237

不，那里没有。保持线程数量受到限制和控制，以免超出系统资源，Java 的限制通常约为 100-200 个活动线程。

这样做的好方法是使用**java.util.concurrent 中**的 Executors 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T22:11:05.860

我知道在提出这个问题时，Servlet 3.0 还没有推出。但我认为我应该在这个问题中记录使用 Servlet 3.0 在 Servlet 容器中进行异步处理的可能性。这可能会帮助遇到这个问题的人。不用说，Servlet 3.0 有足够的资源表明主 servlet 线程现在压力较小！并且 Jetty 有 Async 对应物，以防万一不想使用 Servlet 3.0 API 本身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T13:23:17.840

答案取决于您希望处理的最大同时连接数。您应该允许与您期望的连接一样多的线程。

andreasmk2 关于线程数不正确。我已经运行了 1000 个线程的应用程序并且系统资源没有问题；当然，这取决于您系统的具体情况。您会遇到*系统*限制，而不是*Java*限制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T13:42:01.960

我的问题是我不知道如何对同时连接的数量形成合理的期望。大概在*某些*时候，拒绝新连接比让一切慢下来要好，因为有太多的请求正在被服务。

现实的工作负载很难模拟，这就是为什么我要寻找其他人已经研究过的公式。

（明显的上限是最大堆大小除以服务请求所需的最小内存量，但即使在具有垃圾收集器的环境中也很难测量。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-21T12:12:23.533

谢谢。我读了这篇文章，因为没有任何简单的公式。:-(

（我的应用程序是一个 HTML5 验证器。有时它显然在等待外部服务器。但是，很难确定它本身或通过垃圾收集器实际上何时受 CPU 限制。）

# windows - 一键式编译器

> ID：101029
> 
> 赞同：-1
> 
> 时间：2008-09-19T10:44:42.380
> 
> 标签：windows, user-interface, compiler-construction

你知道有哪些编译器只需要点击源代码一两次就可以编译吗？必须对其进行配置才能做到这一点不算数，也不必去终端写一两个词。

如果您可以就为什么很少有编译器包含 gui 给出自己的看法，或者只是发送到资源管理器中的编译器列表，则会给出额外的分数！

原因是我希望能够将源代码发送给我的非编程朋友。有些有 sparc 计算机，有些有 x64 多核等。

然后他们将能够编译代码然后删除它，只保存为他们的计算机优化的二进制文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T10:47:03.793

我们有 CMake、Makefile 和其他构建系统 (MSBuild)。为什么编译器应该有一个 gui？

在使用 cmake 生成构建或编写 makefile 后，发出“make”通常就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T10:53:22.297

很少有编译器包含 GUI，因为它不是编译器的基本功能。编译器应该可以从命令行使用，很容易集成到脚本/自动化工具中，同样，应该很容易让 GUI 工具与之通信。

换句话说，它可以从 GUI 中使用，但它不是 GUI 类型的工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-19T11:16:40.353

顺便说一句，可能不是您正在寻找，但来自 qt-lib 的**qmake**实用程序是“一键式”工具的完美示例：) 它根据您在当前目录中的文件创建项目和 makefile。它检测 .ui（用户界面）、资源、标题等...然后您只需**make**、**make**、**make** ...

除了我的意思是配置之外，所有编译器和 IDE 都使用一键或按键来开始编译。

另一个问题是 - 你如何处理编译错误。错误突出显示，源导航 - 这是所有 IDE 功能。编译器可以是 IDE 的一部分，但不能相反。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T10:50:42.833

我曾经使用“jikes”，IBM 的 java 编译器。它有一个增量模式，你只需要按回车键，它就会编译所有改变的东西。因此，您将在 vi 中进行一些编码，保存文件，然后将 alt-tab 转到带有 jikes 的窗口，然后按回车键，然后 alt-tab 回到 vi 窗口。

现在我使用即时编译的 Eclipse。有时这很好，有时它会在你没有写完的代码上加上难看的红线，所以你知道它不应该编译。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T11:18:09.523

我假设使用 C++。

我觉得您真正在寻找的是使编译更简单的 IDE。我知道 Dev-C++ 在这方面做得很好。许多生产级应用程序可能至少需要一些编译器配置。话虽如此，我经常发现对“g++ *.cpp -o output.exe”的调用是一种快速而肮脏的编译……尽管它在很多很多情况下都不起作用。尽管如此，当我刚开始编程时，我的大多数项目都可以使用该命令进行编译。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T11:21:47.673

它被称为`make`。

如需其他选择，请查看[此列表](http://en.wikipedia.org/wiki/List_of_build_automation_software)。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-09-19T11:03:35.440

> 必须对其进行配置才能做到这一点不算数，

那里有一个逻辑缺陷。要么您配置它，要么安装程序配置它。它*不会*自动自动发生；）

# sql - 如何从存储过程中返回多行？（甲骨文 PL/SQL）

> ID：101033
> 
> 赞同：47
> 
> 时间：2008-09-19T10:46:48.460
> 
> 标签：sql, oracle, plsql

我想创建一个带有一个参数的存储过程，该参数将根据参数返回不同的记录集。这样做的方法是什么？我可以从普通 SQL 调用它吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2008-09-19T11:23:29.073

以下是如何构建一个函数，该函数返回一个可以像查询表一样查询的结果集：

```
SQL> create type emp_obj is object (empno number, ename varchar2(10));
  2  /

Type created.

SQL> create type emp_tab is table of emp_obj;
  2  /

Type created.

SQL> create or replace function all_emps return emp_tab
  2  is
  3     l_emp_tab emp_tab := emp_tab();
  4     n integer := 0;
  5  begin
  6     for r in (select empno, ename from emp)
  7     loop
  8        l_emp_tab.extend;
  9        n := n + 1;
 10       l_emp_tab(n) := emp_obj(r.empno, r.ename);
 11     end loop;
 12     return l_emp_tab;
 13  end;
 14  /

Function created.

SQL> select * from table (all_emps);

     EMPNO ENAME
---------- ----------
      7369 SMITH
      7499 ALLEN
      7521 WARD
      7566 JONES
      7654 MARTIN
      7698 BLAKE
      7782 CLARK
      7788 SCOTT
      7839 KING
      7844 TURNER
      7902 FORD
      7934 MILLER 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2008-09-19T10:54:32.263

我想你想返回一个 REFCURSOR：

```
create function test_cursor 
            return sys_refcursor
            is
                    c_result sys_refcursor;
            begin
                    open c_result for
                    select * from dual;
                    return c_result;
            end; 
```

**更新**：如果您需要从 SQL 调用它，请使用@Tony Andrews 建议的表函数。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-07T20:35:56.053

您可以使用 Oracle 流水线函数

> 基本上，当您希望将 PLSQL（或 java 或 c）例程作为数据的“源”而不是表时，您将使用流水线函数。

简单示例 - 生成一些随机数据
*如何根据输入参数创建 N 个唯一随机数？*

```
create type array
as table of number;

create function  gen_numbers(n in number default null)
return array
PIPELINED
as
begin
  for i in 1 .. nvl(n,999999999)
  loop
     pipe row(i);
 end loop;
 return;
end; 
```

假设我们需要三行来做某事。我们现在可以通过以下两种方式之一做到这一点：

```
select * from TABLE(gen_numbers(3)); 
```

COLUMN_VALUE

* * *

```
 1
       2
       3 
```

或者

```
select * from TABLE(gen_numbers)
 where rownum <= 3; 
```

COLUMN_VALUE

* * *

```
 1
       2
       3 
```

[管道函数](http://www.oracle-base.com/articles/misc/pipelined-table-functions.php) [1 管道函数2](http://www.akadia.com/services/ora_pipe_functions.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-19T21:40:43.057

如果您想在纯 SQL 中使用它，我会让存储过程用结果行填充一个表或临时表（或使用@Tony Andrews 方法）。
如果要使用@Thilo 的解决方案，则必须使用 PL/SQL 循环游标。这里有一个例子：（我使用了一个过程而不是一个函数，就像@Thilo 所做的那样）

```
create or replace procedure myprocedure(retval in out sys_refcursor) is
begin
  open retval for
    select TABLE_NAME from user_tables;
end myprocedure;

 declare 
   myrefcur sys_refcursor;
   tablename user_tables.TABLE_NAME%type;
 begin
   myprocedure(myrefcur);
   loop
     fetch myrefcur into tablename;
     exit when myrefcur%notfound;
     dbms_output.put_line(tablename);
   end loop;
   close myrefcur;
 end; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-14T13:33:56.787

```
create procedure <procedure_name>(p_cur out sys_refcursor) as begin open p_cur for select * from <table_name> end; 
```

# winapi - Win32 TreeCtrl TVN_ENDLABELEDIT 内存分配

> ID：101038
> 
> 赞同：1
> 
> 时间：2008-09-19T10:47:32.670
> 
> 标签：winapi, treecontrol

我有一个 Win32 TreeCtrl，用户可以在其中重命名树标签。我处理 TVN_ENDLABELEDIT 消息来执行此操作。

在某些情况下，我需要更改用户输入的文本。基本上用户可以在编辑过程中输入一个短名称，我想用更长的文本替换它。

为此，我更改了在 TVN_ENDLABELEDIT 期间收到的 TVITEM 结构的 pszText 成员。我在这里做了一个指针替换，因为原始内存可能太小而无法进行简单的类似 strcpy 的操作。

但是我不知道如何释放原始 pszText 成员。基本上是因为不知道它是用 malloc() 还是 new 创建的……所以我不能调用适当的释放器。显然 Win32 不会为旧的 pszText 调用释放器，因为指针已被替换。所以如果我不解除分配，就会有内存泄漏。

知道 Win32 如何分配这些结构以及处理上述情况的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-19T10:57:40.163

除非您使用`LPSTR_TEXTCALLBACK`，否则树视图控件负责分配内存，而不是您的代码，因此您不应更改`pszText`指针的值。

要在处理程序中更改项目的文本`TVN_ENDLABELEDIT`，您可以使用`TreeView_SetItem`，然后从处理程序返回 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-19T20:27:31.237

您不想直接编辑 TVITEM 结构中的文本，结果未定义。而是使用 TVM_SETITEM 消息，或者等效地使用 windowsx.h 中定义的 TreeView_SetItem() 宏。

# c++ - Oracle OCI 数组获取简单数据类型？

> ID：101046
> 
> 赞同：1
> 
> 时间：2008-09-19T10:49:41.057
> 
> 标签：c++, c, database, oracle, oracle-call-interface

我无法理解 Oracle 文档。:-(

有人知道如何通过 OCI 从 Oracle 获取多行简单数据吗？

我目前使用`OCIDefineByPos`定义单个变量（我只需要对简单的整数执行此操作 - /4 字节整数），然后使用/`SQLT_INT`一次获取一行。`OCIStmtExecute``OCIStmtFetch2`

这对于少量数据是可以的，但每行大约需要 0.5ms，所以当读取几万行时，这太慢了。

我只是不明白`OCIBindArrayOfStruct`. 如何一次获取几千行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-19T14:09:23.080

您是否查看过 $ORACLE_HOME/oci/samples 中的示例代码（如果您没有安装它们，则运行 Oracle 安装程序并告诉它安装示例代码）。有几个使用批量接口。

您可能需要认真考虑改用库。我编写了 Pro*C（讨厌它）、直接 OCI，并使用了 3rd 方库。最后一个是最好的，在很大程度上。OCI 语法非常繁琐，并且有一些您可能永远不会使用的选项。同时，它非常、非常僵化，如果你做的事情哪怕是一点点错误都会让你的代码崩溃。

如果您使用的是 C++，那么我可以推荐[OTL](http://otl.sourceforge.net/)；我已经进行了一些严格的性能测试，OTL 与一般情况下的手动编码一样快（如果您确定您的数据中没有 NULL，因此不需要指标，您可以将其击败 5-10%数组）。注意——不要试图理解 OTL 代码。这很可怕。但它真的很好用。

还有许多 C 库封装了 OCI 并使其更可用且不太可能咬你，但我没有测试过它们中的任何一个。

如果不出意外，请帮自己一个忙，为 OCI 代码编写包装函数以使事情变得更容易。我在我的高性能场景中做到了这一点，它大大减少了我遇到的问题的数量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-28T21:31:17.503

您可以使用它`OCIDefineArrayOfStruct`来支持获取记录数组。您可以通过将数组的基数传递给 来做到这一点`OCIDefineByPos`，并使用它`OCIDefineArrayOfStruct`来告诉 Oracle 记录的大小（跳过大小）。我相信你然后打电话`OCIFetch`告诉它获取数组大小。

`OCI_ATTR_PREFETCH_ROWS`另一种方法是在执行之前设置语句属性 , 。这告诉 Oracle 一次要获取多少行，默认为 1。使用这种方法，Oracle 可以减少往返次数并为您缓冲行。

`OCIBindArrayOfStruct`与 DML 语句一起使用。它的工作方式与绑定变量类似`OCIDefineArrayOfStruct`。

您可以在 Oracle 网站上找到示例代码。

# programming-languages - 什么时候将一种语言视为脚本语言？

> ID：101055
> 
> 赞同：107
> 
> 时间：2008-09-19T10:51:26.717
> 
> 标签：programming-languages, scripting, terminology, semantics

是什么让语言成为脚本语言？我听说有些人说“当它被解释而不是编译时”。这将使 PHP（例如）成为一种脚本语言。这是唯一的标准吗？还是有其他标准？

### 也可以看看：

*   [“脚本”和“应用程序”有什么区别？](https://stackoverflow.com/questions/98268/whats-the-difference-between-a-script-and-an-application)

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2008-09-21T04:56:56.293

简单的。当我使用它时，它是一种现代动态语言，当您使用它时，它只是一种脚本语言！

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2008-09-19T10:56:16.143

脚本语言是一种“脚本化”其他事情来做事情的语言。主要重点不是构建您自己的应用程序，而是让现有应用程序以您想要的方式运行，例如用于浏览器的 JavaScript，用于 MS Office 的 VBA。

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2010-05-20T13:33:57.853

传统上，当谈论脚本与编程的区别时，脚本被解释并且程序被编译。一种语言可以以不同的方式执行——解释或编译（字节码或机器码）。这不会使一种*语言*成为一种或另一种。

在某些人眼中，您*使用*语言的方式使其成为一种脚本语言（例如，主要使用 C++ 开发的游戏开发人员将使用 Lua 编写对象*脚本*）。同样，界限是模糊的——一个人可以将一种语言用于编程，而另一种人可以将相同的语言用于脚本语言。

这是来自关于脚本语言的[维基百科](http://en.wikipedia.org/wiki/Scripting_language)文章：

> 脚本语言、脚本语言或扩展语言是一种允许控制一个或多个软件应用程序的编程语言。“脚本”与应用程序的核心代码不同，因为它们通常用不同的语言编写，并且通常由最终用户创建或至少修改。脚本通常从源代码或字节码解释，而它们控制的应用程序传统上被编译为本机机器代码。脚本语言几乎总是嵌入在它们控制的应用程序中。

您会注意到“通常”、“经常”、“传统”和“几乎总是”的使用 - 这些都告诉您**没有**一组不同的属性可以使特定语言成为“脚本语言”。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2010-05-20T13:39:11.103

> “剧本就是你给演员的东西。节目就是你给观众的东西。” ——拉里·沃尔

我真的不认为有太大的区别了。所谓的“脚本”语言通常是编译的——只是非常快，而且是在运行时。一些“编程”语言也在运行时进一步编译（想想 JIT），“编译”的第一阶段是语法检查和资源解析。

不要挂断电话，这真的不重要。

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2008-09-19T11:09:00.903

我的定义是一种通常作为源而不是二进制文件分发的语言。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2009-08-15T13:40:42.467

就像色情片，你看到它就知道了。脚本语言的唯一可能定义是：

```
A language which is described as a scripting language. 
```

有点圆，不是吗？（顺便说一句，我不是在开玩笑）。

基本上，没有什么可以使一种语言成为脚本语言，除非它被称为脚本语言，尤其是它的创建者。现代脚本语言的主要集合是 PHP、Perl、JavaScript、Python、Ruby 和 Lua。Tcl 是第一个主要的现代脚本语言（虽然它不是第一个脚本语言，我忘记了它是什么，但得知它早于 Tcl 时我很惊讶）。

[我在论文](https://www.cs.tcd.ie/~pbiggar/sac-2009.pdf)中描述了主要脚本语言的特性：

```
 A Practical Solution for Scripting Language Compilers
 Paul Biggar, Edsko de Vries and David Gregg
 SAC '09: ACM Symposium on Applied Computing (2009), (March 2009) 
```

大多数是动态类型和解释的，并且大多数在其参考实现之外没有定义的语义。然而，即使它们的主要实现被编译或 JITed，也不会改变语言的“性质”。

他们唯一剩下的问题是如何判断一种新语言是否是脚本语言。好吧，如果它被称为脚本语言，它就是一种。所以[Factor](https://factor.dev.java.net/)是一种脚本语言（或者至少在编写它的时候是这样），但是，比如说，Java 不是。

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2010-05-20T15:17:45.207

对此有很多可能的答案。

首先：这并不是脚本语言和编程语言之间*区别*的问题，因为脚本语言*是*一种编程语言。更多的问题是什么特性使某些编程语言成为脚本语言，而另一种编程语言*不是*脚本语言。

第二：真的很难说 XYZ 语言是什么，无论 XYZ 是“脚本”、“函数式编程”、“面向对象编程”还是你有什么。“函数式编程”的定义非常清楚，但没有人知道“函数式编程语言”是什么。

函数式编程或面向对象编程是编程*风格*；您可以用几乎任何语言以函数式风格或面向对象风格进行编写。例如，Linux 虚拟文件系统切换和 Linux 驱动程序模型虽然是用 C 编写的，但在很大程度上是面向对象的，而您在 Web 上看到的许多 Java 或 C# 代码都是非常程序化的，根本不是面向对象*的*。OTOH，我见过一些功能强大的 Java 代码。

那么，如果函数式编程和面向对象编程仅仅是可以用*任何*语言完成的风格，那么如何定义“面向对象编程语言”呢？您可以说面向对象的编程语言是一种允许面向对象编程的语言。但这并不是一个定义：*所有*语言都允许面向对象编程，因此*所有*语言都是面向对象的吗？所以，你说，如果一门语言*迫使*你以面向对象的风格进行编程，那么它就是面向对象的。但这也不是什么定义：*所有*语言都允许函数式编程，因此*没有*语言是面向对象的吗？

所以，对我来说，我找到了以下定义：

> 一种语言是脚本语言（面向对象语言/功能语言），如果它*同时*
> 
> *   *促进*脚本编写（面向对象编程/函数式编程），即它不仅*允许*它，而且使它变得*简单**自然*，并包含*有助于*它的功能，*并且*
> *   *鼓励*并*引导*您编写脚本（面向对象编程/函数式编程）。

所以，在五段之后，我得出了：“脚本语言是一种用于脚本的语言”。多么棒的定义。不是。

显然，我们现在需要看一下“脚本”的定义。

这是第三个问题出现的地方：虽然术语“函数式编程”是明确定义的，只有术语“函数式编程语言”是有问题的，不幸的是对于脚本，*术语*“脚本”和术语“脚本语言” "定义不明确。

好吧，首先脚本*是*编程。这只是一种特殊的编程方式。IOW：每个脚本都是程序，但不是每个程序都是脚本；所有脚本的集合是所有程序集合的真子集。

在我个人看来，编写脚本并将其与其他类型的编程区分开来的是……

> 脚本主要操纵对象
> 
> *   不是由脚本创建的，
> *   拥有独立于脚本的生命周期，并且
> *   生活在脚本的域之外。
> 
> 此外，使用的数据类型和算法通常不是由脚本定义的，而是由外部环境定义的。

想想一个 shell 脚本：shell 脚本通常操作文件、目录和进程。您系统上的大多数文件、目录和进程可能不是由当前运行的脚本创建的。当脚本退出时它们不会消失：它们的生命周期完全独立于脚本。它们也不是脚本的一部分，它们是系统的一部分。您没有通过编写`File`和`Directory`类来开始您的脚本，这些数据类型与您无关：您只是假设它们在那里，您甚至不知道（也不*需要*知道）它们是如何工作的。而且您也不会实现自己的算法，例如，对于您只使用`find`而不是实现自己的广度优先搜索的目录遍历。

简而言之：脚本将自身附加到独立于脚本而存在的更大系统上，操纵系统的一小部分，然后退出。

这个更大的系统可以是操作系统（如果是 shell 脚本）、浏览器 DOM（如果是浏览器脚本）、游戏（例如使用 Lua 的魔兽世界或使用 Linden 脚本语言的第二人生）、应用程序（例如 AutoLisp AutoCAD 或 Excel/Word/Office 宏的语言）、Web 服务器、机器人包或其他东西。

请注意，脚本方面与编程语言的所有其他方面完全正交：脚本语言可以是强类型或弱类型、严格类型或松散类型、静态或动态类型、名义上、结构上或鸭子类型，甚至可以是无类型的. 它可以是命令式的或函数式的、面向对象的、过程式的或函数式的、严格的或惰性的。它的实现可以被解释、编译或混合。

例如，Mondrian 是一种严格的强静态类型惰性函数式脚本语言，具有编译实现。

然而，所有这些都没有实际意义，因为*脚本语言*这个术语在现实世界中的*实际*使用方式与上述任何内容都无关。它最常被简单地用作侮辱，定义相当简单，甚至简单化：

> *   *真正的*编程语言：我的编程语言
> *   脚本语言：你的编程语言

这似乎是该术语最常用的方式。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2008-09-19T10:56:06.847

“脚本语言”是那些可能意味着很多事情的模糊概念之一。通常它指的是存在一个从源代码到执行的一步过程。

例如在 Perl 你做：`perl my_source.pl`

鉴于上述标准，PHP 是一种脚本语言（即使您可以进行“编译”过程，例如在使用 Zend 编码器“保护”源代码时）。

PS。通常（但不总是）脚本语言会被解释。也经常（但同样，并非总是）脚本语言是动态类型的。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2010-05-20T13:54:04.450

所有脚本语言都是编程语言。所以严格来说，没有区别。

该术语不是指该语言的任何基本属性，而是指该语言的典型*用法*。如果典型的用途是写短程序，主要是调用已有的代码，并对结果进行一些简单的处理，（即如果典型的用途是写*脚本*），那么它就是一种脚本语言。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2008-11-21T21:27:22.203

我认为 Roberto Ierusalimschy 先生有一个很好的答案或“Lua 编程”中的问题：

> 然而，解释性语言的显着特点不是它们不被编译，而是任何编译器都是语言运行时的一部分，因此可以（并且很容易）执行动态生成的代码

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2010-05-20T13:34:07.013

一个部门是

*   脚本 = 动态解释
*   正常 = 编译

动态解释语言在运行时解释，而编译语言在执行前编译。

我应该补充一点，正如 Jörg 所指出的，解释/编译的区别不是语言的特征，而是执行引擎的特征。

您可能还对[Type system](http://en.wikipedia.org/wiki/Type_system)的这个解释感兴趣，它是相关的，并且更多地关注语言方面，而不是执行引擎。大多数脚本语言是动态类型的，而“普通”语言大多是静态类型的。

一般来说，静态类型语言与动态类型语言的划分更好定义，并且对语言的可用性有更多影响。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2009-03-20T15:42:48.137

我将脚本语言视为不需要明显重量级的“编译”步骤的任何东西。从程序员的角度来看，主要特点是：您编辑代码并立即运行它。

因此，我会将 JavaScript 和 PHP 视为脚本语言，而[ActionScript 3](http://en.wikipedia.org/wiki/ActionScript) / [Flex](http://en.wikipedia.org/wiki/Adobe_Flex)则不是。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2010-05-20T13:46:42.153

脚本语言*通常是*：

1.  动态类型
2.  口译，很少强调性能，但可移植性好
3.  需要少得多的[样板代码](http://en.wikipedia.org/wiki/Boilerplate_(text)#Boilerplate_code)，从而实现非常快速的原型设计
4.  用于小任务，适合编写单个文件来运行一些有用的“脚本”。

而非脚本语言*通常是*： 1\. 静态类型 2\. 编译，强调性能 3\. 需要更多样板代码，导致原型制作速度较慢但更具可读性和长期可维护性 4\. 用于大型项目，适应许多设计模式

**但**在我看来，这更像是一个历史差异。Javascript 和 Perl 在编写时考虑到了小而简单的脚本，而 C++ 在编写时考虑到了复杂的应用程序；但两者都可以使用。许多编程语言，无论是现代的还是古老的，都模糊了界限（而且一开始就很模糊！）。

可悲的是，我认识一些开发人员讨厌他们认为的“脚本语言”，认为它们更简单且功能不强。我的观点是陈词滥调——为工作使用正确的工具。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2010-05-20T14:02:24.700

脚本语言最初被认为是用硬编程语言编写的应用程序的控制机制。编译后的程序不能在运行时修改，所以脚本给了人们灵活性。

最值得注意的是，shell 脚本正在自动化操作系统内核中的进程（传统上，Mac 上的 AppleScript）；这个角色越来越多地进入 Perl 的手中，然后最近又离开了 Python。我见过用于声明光线追踪场景的 Scheme（尤其是在其 Guile 实现中）；最近，Lua 作为编写游戏脚本的编程语言非常流行——以至于许多新游戏中唯一硬编码的东西是图形/物理引擎，而整个游戏逻辑都是用 Lua 编码的。同样，人们认为 JavaScript 可以为 Web 浏览器的行为编写脚本。

语言解放了；现在没有人将操作系统视为一个应用程序（或根本没有考虑太多），许多以前的脚本语言开始用于编写自己的完整应用程序。该名称本身变得毫无意义，并传播到当今使用的许多解释语言中，无论它们是否旨在从另一个系统中进行解释。

然而，“脚本语言”绝对不是“解释性语言”的同义词——例如，BASIC 在其生命的大部分时间里都是解释性的（即在它失去缩写词并成为 Visual Basic 之前），但没有人真正认为它是脚本。

**更新：像往常一样**[在 Wikipedia](http://en.wikipedia.org/wiki/Scripting_language)上提供阅读材料。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2010-05-20T14:29:09.890

首先，编程语言不是“脚本语言”或其他东西。它可以是“脚本语言”或其他东西。

第二点，语言的实现者会告诉你它是否是一种脚本语言。

您的问题应该阅读“在哪些实现中编程语言会被视为脚本语言？”，而不是“脚本语言和编程语言之间有什么区别？”。之间没有。

但是，如果一种语言用于提供某种类型的中间件，我会将其视为脚本语言。例如，我认为 JavaScript 的大多数实现都是一种脚本语言。如果 JavaScript 在操作系统而不是浏览器中运行，那么它就不是脚本语言。如果 PHP 在 Apache 内部运行，它就是一种脚本语言。如果它是从命令行运行的，则不是。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2014-02-27T11:54:11.453

我和我的朋友刚刚争论过：编程语言和脚本语言有什么区别。

一个流行的论点是编程语言是编译的，脚本语言是解释的——但是我认为这个论点是完全错误的……为什么？

1.  Chakra & V8（微软和谷歌的 JavaScript 引擎）在执行前编译代码
2.  QBasic 是解释型的——这是否使 Qbasic 成为一种“脚本”语言？

在此基础上，这是我对编程语言和脚本语言之间区别的论点：

编程语言在机器级别运行并且可以访问机器本身（内存、图形、声音等）。

脚本语言是沙盒的，只能访问暴露在沙盒中的对象。它不能直接访问底层机器。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2008-09-19T11:10:21.803

我是否可以建议脚本语言已经成为很多人正在远离的术语。我想说它现在主要归结为编译语言和动态语言。

我的意思是你不能说像 Python 这样的东西，或者 Ruby 在这个时代是“脚本”语言（你甚至有[IronPython](http://en.wikipedia.org/wiki/IronPython)和*JIT-your-favorite-language*之类的东西，区别更加模糊了）。

老实说，我个人觉得 PHP 不再是一种脚本语言了。我不希望人们喜欢在简历上对 PHP 进行不同于 Java 的分类。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2010-05-20T13:42:03.033

在我的观点中，我会说动态解释语言，如 PHP、Ruby 等......仍然是“正常”的语言。我想说“脚本”语言的例子是 bash（或 ksh 或 tcsh 或其他）或 sqlplus。这些语言通常用于将系统上的现有程序串在一起，形成一系列连贯且相关的命令，例如：

1.  将 A.txt 复制到 /tmp/work/
2.  在数据库服务器上运行夜间清理过程
3.  记录结果并将它们发送到 sysdamin

所以我想说的区别（对我来说，无论如何）更多的是你如何*使用*语言。PHP、Perl、Ruby 等语言可以用作“脚本语言”，但我通常将它们视为“普通语言”（Perl 除外，它似乎是双向的。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2010-06-19T09:58:29.617

我将继续从重复的问题中迁移我的答案

* * *

“脚本语言”这个名称适用于一个非常具体的角色：您编写命令以发送到现有软件应用程序的语言。（如传统的电视或电影“剧本”）

例如，曾几何时，HTML 网页很无聊。它们总是静止的。然后有一天，Netscape 想，“嘿，如果我们让浏览器读取页面中的小命令并对其执行操作会怎样？” 就这样，Javascript 就形成了。

一个简单的 javascript 命令是`alert()`命令，它指示/命令正在读取网页的浏览器（软件应用程序）以显示警报。

现在，是否`alert()`与 C++ 或浏览器实际*用于*显示警报的任何代码语言相关？当然不是。在 .html 页面上编写“alert()”的人不了解浏览器实际显示警报的方式。他只是在编写一个浏览器将解释的命令。

让我们看看简单的javascript代码

```
<script>
var x = 4
alert(x)
</script> 
```

这些是发送到浏览器的指令，供浏览器自行解释。浏览器实际将变量设置为 4 并将其置于警报中的编程语言......它与 javascript 完全无关。

我们将最后一系列命令称为“脚本”（这就是它包含在`<script>`标签中的原因）。仅仅按照“脚本”的定义，传统意义上的：**发送给演员的一系列指令和命令**。大家都知道，比如剧本（电影剧本）就是剧本。

剧本（剧本）*不是*演员，也不是摄影机，也不是特效。剧本只是告诉他们该做什么。

现在，究竟什么是脚本**语言**？

有很多编程语言就像工具箱中的不同工具；有些语言是**专门**为用作脚本而设计的。

Javasript 就是一个明显的例子。很少有不属于脚本领域的 Javascript 应用程序。

ActionScript（Flash 动画的语言）及其衍生语言是脚本语言，因为它们只是向 Flash 播放器/解释器发出命令。当然，存在诸如面向对象编程之类的抽象，但所有这些都只是达到目的的一种手段：向 Flash 播放器发送命令。

Python 和 Ruby 通常也用作脚本语言。例如，我曾经在一家公司工作，该公司使用 Ruby 编写脚本命令以发送到浏览器，这些命令类似于“转到此站点，单击此链接...”以进行一些基本的自动化测试。在那份工作中，我无论如何*都不*是“软件开发人员”。我只是编写了向计算机发送命令以向浏览器发送命令的脚本。

由于它们的性质，脚本语言很少被“编译”——也就是说，被翻译成机器代码，并由计算机直接读取。

即使是从 Python 和 Ruby 创建的 GUI 应用程序也是发送到用 C++ 或 C 编写的 API 的脚本。它告诉 C 应用程序该做什么。

当然，有一条模糊的线。为什么不能说机器语言/C 是脚本语言，因为它们是计算机用来连接基本主板/显卡/芯片的脚本？

我们可以画一些线来澄清：

1.  当您可以编写脚本语言并在不“编译”的情况下运行它时，它更像是一种直接脚本类型的东西。例如，你不需要对剧本做任何事情来告诉演员如何处理它。它已经在那里，按原样使用。出于这个原因，我们将**排除编译语言**被称为脚本语言，即使它们在某些情况下可以用于脚本目的。

2.  脚本语言意味着发送到*复杂*软件应用程序的命令；这就是我们首先编写脚本的全部原因——因此您无需了解软件如何向其发送命令的复杂性。因此，脚本语言往往是**向复杂软件应用程序发送（相对）简单命令的**语言……在这种情况下，机器语言和汇编代码并不能解决问题。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2008-09-21T05:38:04.213

脚本语言是每次运行脚本时都会被解释的语言，它意味着有一个解释器，并且大多数都是非常易于阅读的，有用的脚本语言很容易学习和使用。

每种可编译语言都可以制成脚本语言，反之亦然，这一切都取决于实现解释器或编译器，例如 C++ 有一个解释器，因此如果使用它可以称为脚本语言（通常不像 C++ 那样实用是一种非常复杂的语言），目前最有用的脚本语言之一是 Python...

因此，要回答您的问题，定义是关于使用解释器来运行快速简便的脚本程序，以解决简单的任务或原型应用程序，脚本语言最强大的用途是包括每种用途的可能性来扩展编译的应用程序。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2008-09-22T03:01:57.963

我更喜欢人们不要使用“脚本语言”这个词，因为我认为它会减少工作量。以 Perl 之类的语言为例，通常称为“脚本语言”。

*   Perl 是一种编程语言！
*   Perl 像 Java 和 C++ 一样编译。它只是编译得更快！
*   Perl 有对象、命名空间和闭包。
*   Perl 有 IDE、调试器和分析器。
*   Perl 有培训、支持和社区。
*   Perl 不仅仅是网络。Perl 不仅仅是系统管理员。Perl 不仅仅是 Internet 的胶带。

为什么我们甚至需要区分像 Java 这样已编译的语言和未编译的 Ruby？标签的价值是什么？

有关这方面的更多信息，请参阅[http://xoa.petdance.com/Stop_saying_script](http://xoa.petdance.com/Stop_saying_script)。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2009-09-23T10:44:30.803

一个重要的区别是[强类型](http://en.wikipedia.org/wiki/Strongly_typed_programming_language)（相对于[弱类型](http://en.wikipedia.org/wiki/Weak_typing)）。**脚本语言通常是弱类型**的，因此可以更快地编写小程序。对于大型程序，这是一个缺点，因为它禁止编译器/解释器自主查找某些错误，使得重构代码非常困难。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2010-05-20T14:13:42.253

脚本语言是一种编程语言，其中程序通常以可读的文本形式交付给最终用户，并且有一个程序*显然*可以直接执行该程序。（程序很可能会在内部编译脚本；这里不相关，因为它对用户不可见。）

脚本语言能够支持交互式会话是相对常见的，用户只需键入他们的程序并让它立即执行。这是因为这是对第一段基本要求的微不足道的扩展；主要的额外要求是添加一种机制来确定输入语句何时完成，以便可以将其发送到执行引擎。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2010-05-20T14:22:11.810

对于这个问题略有不同的看法。脚本语言是一种编程语言，但编程语言不一定是脚本语言。脚本语言用于控制或编写系统脚本。该系统可以是脚本语言为 bash 的操作系统。该系统可以是一个使用 PHP 脚本语言的 Web 服务器。脚本语言旨在填补特定的利基；它们是特定领域的语言。交互式系统已经解释了脚本语言，从而产生了脚本语言被解释的概念。然而，这是系统的结果，而不是脚本语言本身。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2010-05-20T14:39:41.203

脚本语言是一种配置或扩展现有程序的语言。
脚本语言是一种编程语言。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2010-06-15T21:34:53.790

“脚本语言”的定义相当模糊。我会基于以下考虑：

1.  脚本语言通常没有用户可见的编译步骤。通常，用户可以通过一个简单的命令运行程序。

2.  脚本语言的程序通常以源代码形式传递。

3.  脚本语言通常具有存在于大量系统上的运行时，并且运行时可以很容易地安装在大多数系统上。

4.  脚本语言往往是跨平台的，而不是特定于机器的。

5.  脚本语言使调用其他程序和与操作系统交互变得容易。

6.  脚本语言通常很容易嵌入到用更传统的编程语言编写的更大的系统中。

7.  脚本语言通常是为了便于编程而设计的，而对执行速度的考虑要少得多。（如果您想要快速执行，通常的建议是用 C 之类的语言编写耗时的部分，然后将该语言嵌入到 C 中或从该语言中调用 C 位。）

我上面列出的一些特性对于实现来说是正确的，在这种情况下，我指的是更常见的实现。有 C 解释器，（AFAIK）没有明显的编译步骤，但大多数 C 实现并非如此。您当然可以将 Perl 程序编译为本机代码，但这不是通常使用的方式。其他一些特征本质上是社会性的。上述某些标准有些重叠。正如我所说，定义是模糊的。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2008-09-19T10:54:02.170

脚本语言倾向于在作为更大应用程序一部分的脚本引擎中运行。例如，JavaScript 在您的浏览器脚本引擎中运行。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2008-09-19T10:54:34.620

我会说脚本语言是一种它本身并没有定义的大量操纵实体。例如，JavaScript 操作浏览器提供的 DOM 对象，PHP 操作大量基于 C 的函数库，等等。当然不是一个精确的定义，更多的是一种思考方式。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2008-09-19T10:56:49.730

您的标准听起来不错，但总是有点模糊。例如，Java 既被编译（为字节码），又被解释（由 JVM）。然而，它通常不被归类为脚本语言。

这可能是因为 Java 是静态类型的。而 JavaScript、Ruby、Python、Perl 等则不是（所有这些通常都称为脚本语言）。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2008-11-22T00:51:21.357

如果它不/*不会*在 CPU 上运行，那对我来说就是一个脚本。如果解释器需要在程序下方的 CPU 上运行，那么它就是脚本和脚本语言。

没有理由让它比这更复杂吗？

当然，在大多数情况下（99%），一种语言是否是脚本语言是很清楚的。但是考虑到 VM 可以模拟 x86 指令集，例如。在 VM 上运行时，这不会使 x86 字节码成为一种脚本语言吗？如果有人要编写一个编译器来将 perl 代码转换为本机可执行文件怎么办？在这种情况下，我不知道如何称呼语言本身了。重要的是输出，而不是语言。

再说一次，我不知道有这样的事情发生过，所以现在我仍然很乐意将解释语言称为脚本语言。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2009-03-20T15:35:18.777

*脚本*是一个相对*较小*的程序。一个*系统*是一个比较*大*的程序，或者是比较大的程序的*集合*。

一些编程语言的设计具有语言设计者和编程社区认为在编写相对较小的程序时有用的特性。这些编程语言被称为*脚本语言*，例如 PHP。

类似地，其他编程语言的设计具有语言设计者和编程社区认为在编写相对较大的程序时有用的特性。这些编程语言被称为*系统语言*，例如 Java。

现在，可以用任何语言编写小型和大型程序。一个小的 Java 程序是一个脚本。例如，Java“Hello World”程序是一个脚本，而不是一个系统。用 PHP 编写的大型程序或程序集合是一个系统。例如，用 PHP 编写的 Facebook 是一个系统，而不是脚本。

将单一语言特性视为决定该语言是否最适合脚本或系统编程的“试金石”是有问题的。例如，脚本*可以*编译为字节码或机器码，或者它们*可以*通过直接抽象语法树 (AST) 解释来执行。

因此，**如果一种语言通常用于编写脚本，那么它就是一种脚本语言**。脚本语言可能用于编写系统，但这样的应用程序可能被认为是可疑的。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2009-05-22T11:58:40.383

此外，您可能想查看[这个关于脚本语言的播客](http://www.se-radio.net/podcast/2006-02/episode-4-scripting-languages)。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2009-06-22T05:10:37.593

[在《编程语言概念》中](http://www.aw-bc.com/sebesta/)解释 Robert Sebesta ：

> 通过将称为脚本的命令列表放入要执行的文件中来使用脚本语言。这些语言中的第一个，命名为*sh*（代表 shell），开始是一个小的命令集合，这些命令被解释为对执行实用程序功能（例如文件管理和简单文件过滤）的系统子程序的调用。在此基础上添加了变量、控制流语句、函数和各种其他功能，结果是一门完整的编程语言。

然后你有像*[AWK](http://en.wikipedia.org/wiki/AWK)*、*[Tcl/Tk](http://en.wikipedia.org/wiki/Tcl)*、*Perl*这样的例子（它说最初是*sh*和*AWK*的组合，但它变得如此强大，以至于他认为它是一种“奇怪但成熟的编程语言”）。其他示例包括 CGI 和 JavaScript。

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2010-05-20T14:20:50.767

简而言之

脚本语言在另一个程序中运行。不编译脚本语言。脚本语言易于使用且易于编写。但是……</p>

非常流行的编程语言（Java、C#）在“父”程序中运行——比如脚本语言。今天的脚本语言用于构建复杂的软件。如今，计算机速度如此之快，脚本语言如此高效，以至于对于大多数业务操作而言，编译型编程语言没有实际的速度优势（曾经有过）。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2010-05-20T14:24:57.283

正如其他人指出的那样，没有编译或解释语言这样的东西，因为任何语言都可以编译或解释。但是传统上被解释而不是编译的语言（Python、Perl、Ruby、PHP、JavaScript、Lua）也是人们倾向于称之为脚本语言的语言。所以说脚本语言是一种通常解释而不是编译的语言是相对合理的。脚本语言的其他共同特征与它们被解释的事实有关。

脚本语言实际上是编程语言的一个子集。我认为大多数人不会声称我之前提到的任何语言都不是编程语言。

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2013-08-23T18:26:10.433

我一直将脚本语言视为与某种应用程序或程序进行通信的一种方式。相反，经过编译的语言实际上会创建程序本身。

现在请记住，脚本语言通常会添加或修改最初使用已编译语言创建的程序。因此，它当然可以成为更大图景的一部分，但最初的二进制文件首先是用一种已编译的语言创建的。

所以我可以创建一种脚本语言，让用户执行各种操作或自定义我的程序。我的程序会解释脚本代码，然后调用某种函数。这只是一个基本的例子。它只是为您提供了一种在程序中动态调用例程的方法。

我的程序必须解析脚本代码（您可以将它们称为命令）并实时执行任何预期的操作。

我看到这个问题已经被回答了好几次，但我想我会把我看待事物的方式加入其中。当然，有些人可能不同意这个答案，但这种思维方式一直对我有所帮助。

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2013-10-10T05:45:55.170

脚本语言是一种编程语言，用于操作、定制和自动化现有系统的设施。在这样的系统中，有用的功能已经通过用户界面可用，并且脚本语言是一种用于将该功能暴露给程序控制的机制。这样，可以说现有系统提供了对象和设施的宿主环境，从而完成了脚本语言的能力。脚本语言旨在供专业和非专业程序员使用。

参考

[http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2014-03-21T19:56:42.597

简而言之，脚本语言具有以下属性：

1.  基于解释器。
2.  简单的语法。与 java 相比，python 中的目录访问文件非常容易。
3.  一般用于编写较少行的代码。
4.  方便编写自动化代码。
5.  非常高级的语言。

例如：Javascript，python，VBA。

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2014-03-24T23:16:36.510

我所知道的一个值得注意的来源就该主题撰写的最常见的文章被称为[Ousterhout 的二分法](https://en.wikipedia.org/wiki/Ousterhout%27s_dichotomy)。它被高度批评为相当武断，并经常被开玩笑地称为 Ousterhout 的错误二分法。在关于该主题的讨论中说，它值得引用。

我个人同意这是一种错误的二分法，我不相信任何人回答这个建议对脚本语言的定义具有坚定属性的人。诸如“必须动态键入脚本语言”之类的评论是错误的，并且诸如“必须解释脚本语言”之类的评论甚至没有意义，因为与流行的看法相反，编译与解释根本不是该语言的属性。

There are lots of properties that people have mentioned above as roughly matching scripting languages, thankfully most of them properly explaining that this term has no rigorous definition. So I won't duplicate my ideas of what they are here. For my experience people consider a language a scripting language if they can easily write some quick throwaway programs in them without writing much boiler plate. I'm mostly answering to give you the citation to Ousterhout which I don't see here.

* * *

## 回答 #40

> 赞同：-1
> 
> 时间：2009-11-07T04:16:04.733

### 甚至 Java 也是“一种脚本语言”，因为它是用 C 实现的

尽管我不愿尝试改进[mgb](https://stackoverflow.com/users/10897/mgb)近乎完美的答案，但事实是，没有什么比 C 更好的实现了，但该语言相当低级且接近硬件。当然，纯粹的天才，但要开发现代软件，我们需要一种站在 C 肩膀上的更高级别的语言，可以这么说。

所以，你有 Python、Ruby、Perl，是的，甚至 Java，都是用 C 实现的。人们不会侮辱 Java，称它为脚本语言，但它确实如此。如果你想要一种强大的、现代的、动态的、反射性的、等等等等的语言，你可能正在运行像 Ruby 这样的东西，它要么直接用 C 解释，要么被一些 C 程序编译成解释/JIT 编译的东西。

人们所做的另一个区别是将动态类型语言称为“脚本语言”。

# python - 为 Windows 构建 Python C 扩展模块

> ID：101061
> 
> 赞同：12
> 
> 时间：2008-09-19T10:53:12.920
> 
> 标签：python, windows

我有一个 C 扩展模块，分发构建的二进制文件会很好。Setuptools 可以很容易地在 OS X 和 GNU/Linux 上构建扩展模块，因为这些操作系统带有 GCC，但我不知道如何在 Windows 中进行。

我需要购买 Visual Studio 的副本，还是 Visual Studio Express 可以工作？我可以只使用 Cygwin 或 MinGW 吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-09-19T10:57:36.950

您可以同时使用 MinGW 和 VC++ Express（免费，无需购买）。

看：

2.  [http://eli.thegreenplace.net/2008/06/28/compiling-python-extensions-with-distutils-and-mingw/](http://eli.thegreenplace.net/2008/06/28/compiling-python-extensions-with-distutils-and-mingw/)
3.  [http://eli.thegreenplace.net/2008/06/27/creating-python-extension-modules-in-c/](http://eli.thegreenplace.net/2008/06/27/creating-python-extension-modules-in-c/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-19T10:57:53.860

Setuptools 和 distutils 不随 gcc 一起提供，但它们使用构建 Python 时使用的相同编译器。区别主要在于在典型的 UNIX 系统上，编译器是“gcc”并且您已经安装了它。

为了在 Windows 上编译扩展模块，您需要一个适用于 Windows 的编译器。MSVS 可以，即使是我相信的 Express 版本，但它必须与构建 Python 时使用的 MSVC++ 版本相同。或者你可以使用 Cygwin 或 MinGW；[请参阅安装 Python 模块](http://docs.python.org/install/index.html#gnu-c-cygwin-mingw)的相应部分。

# ruby-on-rails - 在部署 Rails 应用程序之前我需要做哪些小事

> ID：101066
> 
> 赞同：6
> 
> 时间：2008-09-19T10:54:35.837
> 
> 标签：ruby-on-rails, deployment, config

**编辑**

在部署 Rails 应用程序之前，我需要做哪些容易被忽视的小事？

我已经为任何需要一两分钟以上的任务设置了[另一个问题，因此应该安排到部署过程中。](https://stackoverflow.com/questions/101275/what-do-i-need-to-do-on-deployment-of-a-rails-application)在这个问题中，我主要关心在线配置选项和类似的选项，这些可以完成，但在开发周期中经常被忽略，因为它们在部署之前没有任何区别

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-19T12:01:31.470

*   冻结你正在使用的宝石`rake gems:unpack`
*   更改密码`config/environment.rb`
*   过滤密码等敏感信息：在`app/controllers/application.rb` `filter_parameter_logging :password, :password_confirmation`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-19T10:58:28.587

*   确保在生产服务器上设置数据库
*   设置 capistrano 以正确部署您的应用程序
    *   运行 capistrano 空运行
*   确保 Rails 被打包到你的 vendor/rails 文件夹中
*   确保所有 gem 都冻结在您的应用程序中或安装在您的产品服务器上
*   在生产机器上运行测试

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-19T11:39:42.683

*   包括谷歌分析片段（或其他分析）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T11:28:12.743

*   检查[慢查询日志](http://dev.mysql.com/doc/refman/5.0/en/slow-query-log.html)，并将任何索引添加到导致全表遍历的模型中。

*   还

    grep -ril FIXME

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-19T11:48:19.380

设置要在应用程序的部署副本之间共享的文件和文件夹，包括（但不限于）视图缓存、数据库配置、维护页面......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T13:55:03.927

这些并不是真正特定于 Rails 的部署任务，但我已经看到它们在部署系统中被忽视了太多次：

*   备份；诚然，这最终可能是一项艰巨的任务，但不一定如此。简单地安排数据库和软件的夜间备份通常就足够了。
*   测试恢复程序
*   日志轮换和归档
*   异常通知

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-19T19:36:43.043

*   确保您要部署的位置正确设置了 RAILS_ENV 变量。通过环境，或通过 capistrano 回调。
*   通过运行 rake spec、shouda、单元测试或任何你用来测试的东西来确保你的测试都通过了。
*   使用 rake gems 解压你的 gem：unpack
*   决定是否需要冻结 Rails。耙轨：冻结：宝石
*   如果您需要的不仅仅是 gem（memcached、邮件服务器等），请仔细检查服务器上是否安装了依赖项
*   如果您使用 MySQL，请在服务器上编译并安装基于 C 的 MySQL 库（这可能需要几分钟以上的时间，但如果所有依赖项都得到满足，通常会​​相当快）。
*   如果您使用的是 git，请将您的代码推送到 master 分支。如有必要，请标记它。
*   如果您使用的是 SVN，请标记发布。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-10-12T14:46:29.533

我找到了一篇[非常好的文章，用于使用 ubuntu 部署 rails 应用程序](http://blog.dhavalparikh.co.in/2009/09/deploy-or-configure-rails-on-a-ubuntu-server/)。

# language-agnostic - 循环变量的理想变量命名约定是什么？

> ID：101070
> 
> 赞同：49
> 
> 时间：2008-09-19T10:55:32.340
> 
> 标签：language-agnostic, naming-conventions

如果你正在编写一个*简单*的小循环，你*应该*给计数器起什么名字？

*提供示例循环！*

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2008-09-19T11:38:33.513

我总是使用一个**有意义的名称**，除非它是一个单级循环并且变量除了“我已经通过这个循环的次数”之外没有任何意义，在这种情况下我使用`i`.

使用有意义的名称时：

*   该代码对于阅读您的代码的同事来说更容易理解，
*   更容易在循环逻辑中找到错误，并且
*   文本搜索变量名称以返回对相同数据进行操作的相关代码段更可靠。

## 示例 - 发现错误

使用单个字母在此嵌套循环中查找错误可能很棘手：

```
int values[MAX_ROWS][MAX_COLS];

int sum_of_all_values()
{
    int i, j, total;

    total = 0;
    for (i = 0; i < MAX_COLS; i++)
        for (j = 0; j < MAX_ROWS; j++)
             total += values[i][j];
    return total;
} 
```

而使用有意义的名称时更容易：

```
int values[MAX_ROWS][MAX_COLS];

int sum_of_all_values()
{
    int row_num, col_num, total;

    total = 0;
    for (row_num = 0; row_num < MAX_COLS; row_num++)
        for (col_num = 0; col_num < MAX_ROWS; col_num++)
             total += values[row_num][col_num];
    return total;
} 
```

### 为什么`row_num`？- 被拒绝的替代品

针对其他一些答案和评论，这些是使用的一些替代建议`row_num`以及`col_num`我选择不使用它们的原因：

*   **`r`**and **`c`**：这比`i`and略好`j`。如果我的组织的标准是单字母变量是整数，并且始终是等效描述性名称的第一个字母，我只会考虑使用它们。如果函数中有两个名称以“r”开头的变量，系统就会崩溃，即使代码中的任何位置出现其他以“r”开头的对象，可读性也会受到影响。
*   **`rr`**and **`cc`**：这对我来说看起来很奇怪，但我不习惯双字母循环变量样式。`r`如果它是我组织中的标准，那么我想它会比和稍好一些`c`。
*   **`row`**and **`col`**：乍一看，这似乎比`row_num`and更简洁`col_num`，并且具有描述性。但是，我希望像“行”和“列”这样的裸名词指代结构、对象或指向这些的指针。如果`row`可能表示行结构本身*或行号**，*则会导致混淆。
*   **`iRow`**and **`iCol`**：这传达了额外的信息，因为`i`它可能意味着它是一个循环计数器 while`Row`并`Col`告诉你它在计数什么。但是，我更喜欢能够几乎用英文阅读代码：
    *   `row_num < MAX_COLS`读**作**“**行**号**小于****最大**列数” **；**
    ***   `iRow < MAX_COLS`充其量读作“该行**的**整数**循环****计数器****小于**最大（数量）**列**” **。***********   这可能是个人的事情，但我更喜欢第一次阅读。**********

 **********`row_num`我会接受的另一种选择是`row_idx`：“索引”一词唯一地指的是数组位置，除非应用程序的域在数据库引擎设计、金融市场或类似领域。

我上面的示例尽可能小，因此有些人可能看不到描述性命名变量的意义，因为他们可以一次将整个函数放在脑海中。然而，在实际代码中，函数会更大，逻辑也更复杂，因此体面的名称对于提高可读性和避免错误变得更加重要。

总之，我对所有变量命名（不仅仅是循环）的目标是**完全明确**。如果*有人*阅读了我的代码的任何部分并且无法立即计算出变量的用途，那么我就失败了。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2008-09-19T11:06:08.880

1) 对于普通的旧式小循环 - i, j, k - 如果您需要 3 级以上的嵌套循环，这意味着要么算法非常具体和复杂，要么您应该考虑重构代码。

Java 示例：

```
for(int i = 0; i < ElementsList.size(); i++) {
  Element element = ElementsList.get(i);
  someProcessing(element);
  ....
} 
```

2）对于新风格的java循环`for(Element element: ElementsList)`，最好使用普通的有意义的名字

Java 示例：

```
for(Element element: ElementsList) {
  someProcessing(element);
  ....
} 
```

3）如果可以使用您使用的语言，请将循环转换为使用迭代器

Java 迭代器示例：[单击此处](http://www.javadeveloper.co.in/java-example/java-iterator-example.html)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-09-19T10:55:41.747

我的经验是大多数人使用单个字母，例如： `i`, `j`, `k`, ... or `x`, `y`, or `r`, `c`(for row/column) or `w`, `h`(for width/height) 等。

但是我很久以前就学会了一个很好的替代方法，并且从那时起就一直在使用它：双字母变量。

```
// recommended style              ●    // "typical" single-letter style
                                  ●
for (ii=0; ii<10; ++ii) {         ●    for (i=0; i<10; ++i) {
    for (jj=0; jj<10; ++jj) {     ●        for (j=0; j<10; ++j) {
        mm[ii][jj] = ii * jj;     ●             m[i][j] = i * j;
    }                             ●        }
}                                 ●    }
```

如果好处不是立即显而易见：通过代码搜索任何单个字母会发现许多*不是*您想要的东西。该字母`i`经常出现在不是您要查找的变量的代码中。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2008-09-19T13:00:13.590

# 例子：*。. . 在 Java 中*

## 非迭代循环：

**非嵌套循环：** . . . 索引是一个值。

> . . . *就像在代数中一样，使用 是最常见*的*做法* 。. .`i`

 *```
for (int i = 0; i < LOOP_LENGTH; i++) {

    // LOOP_BODY
} 
```

**嵌套循环：** . . . 区分指数有助于理解。

> . . . *使用描述性后缀*. . .

```
for (int iRow = 0; iRow < ROWS; iRow++) {

    for (int iColumn = 0; iColumn < COLUMNS; iColumn++) {

        // LOOP_BODY
    }
} 
```

**`foreach`循环：**。. . 需要一个`Object`名字。

> *. . . 使用描述性名称。. .*

```
for (Object something : somethings) {

    // LOOP_BODY
} 
```

## 迭代循环：

**`for`循环：**。. . 迭代器引用对象。Iterator 两者都不是；一个索引，也不是一个索引。

> . . . `iter` *缩写 Iterators 目的*。. .

```
for (Iterator iter = collection.iterator(); iter.hasNext(); /* N/A */) {

    Object object = iter.next();

    // LOOP_BODY
} 
```

**`while`循环：**。. . 限制迭代器的范围。

> . . . *评论循环的目的*。. .

```
/* LOOP_DESCRIPTION */ {

    Iterator iter = collection.iterator();

    while (iter.hasNext()) {

        // LOOP_BODY
    }
} 
```

> *最后一个例子读起来很糟糕，没有评论，从而鼓励他们。* *它可能很冗长，但在 C 中的范围限制循环中很有用。*

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2008-09-19T10:59:51.110

始终尝试将变量命名为有意义且符合上下文的名称。

如果你不能决定，那么使用“索引”，如果只是为了让其他人（也许是你！）可以更容易地点击它以便以后重构。

[Paul Stephenson](https://stackoverflow.com/questions/101070/what-is-an-ideal-variable-naming-convention-for-loop-variables#101239)请参阅此答案以获取示例。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-09-20T17:22:34.980

我使用**i**、**j**、**k**（或**r** & **c**用于行列循环）。如果您**在一个方法中需要三个以上的循环变量**，则该方法可能太长且太复杂，您的代码可能会**受益于将方法拆分**为更多方法并**正确****命名**它们。

 *** * *

## 回答 #7

> 赞同：6
> 
> 时间：2008-09-19T11:05:12.097

`i`

如果我有一个嵌套循环，那么也是`j`。

这种约定非常普遍，以至于如果您设法`i`在一段代码中遇到一个看不到开头的变量，您仍然可以立即识别出它是什么。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2008-09-19T23:19:46.580

I use i, ii, iii, iv, v ... Never got higher than iii, though.

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2008-09-19T11:00:31.763

仅当循环计数器是索引时，我才使用单个字母。我喜欢双字母背后的想法，但它使代码非常难以阅读。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-09-19T11:34:25.367

如果要将计数器用作容器的索引，我使用`i`, `j`, `k`。

如果要使用它来迭代一个范围（或执行一定数量的迭代），我经常使用`n`. 不过，如果需要嵌套，我通常会恢复为`i`, `j`, `k`.

在提供`foreach`-style 结构的语言中，我通常这样写：

```
foreach widget in widgets do
  foo(widget)
end 
```

我想有些人会因为与 的命名`widget`如此相似而拒绝`widgets`我，但我觉得它很可读。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-09-19T11:25:01.380

和之前的海报一样，我也使用 ii、jj、.. 主要是因为在许多字体中，单个 i 看起来与 1 非常相似。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-09-19T13:00:05.697

我长期使用 i/j/k 命名方案。但最近我开始采用一种更随性的命名方法。

我已经按其含义命名了所有变量，那么为什么不以相同的确定性方式命名循环变量。

根据要求举几个例子：

如果您需要循环遍历项目集合。

```
for (int currentItemIndex = 0; currentItemIndex < list.Length; currentItemIndex++)
{
    ...
} 
```

但我尽量避免正常的 for 循环，因为我倾向于想要列表中的真实项目并使用它，而不是列表中的实际位置。所以不要用 a 开始 for 块：

```
Item currentItem = list[currentItemIndex]; 
```

我尝试使用该语言的 foreach 结构。这改变了。

```
for (int currentItemIndex = 0; currentItemIndex < list.Length; currentItemIndex++)
{
    Item currentItem = list[currentItemIndex];
    ...
} 
```

进入

```
foreach (Item currentItem in list)
{
   ...
} 
```

这使得它更容易阅读，因为只表达了代码的真正含义（处理列表中的项目）而不是我们想要处理项目的方式（保持当前项目的索引并增加它直到它达到长度列表的结束，因此意味着项目集合的结束）。

我仍然使用一个字母变量的唯一一次是当我循环槽尺寸时。但随后我会使用 x、y，有时还会使用 z。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-27T01:55:25.497

我也使用双字母约定。二、jj、kk。您可以 grep 那些而不想出一堆不需要的匹配项。

我认为使用这些字母，即使它们加倍，是最好的方法。这是一个熟悉的约定，即使是加倍。

坚持惯例有很多话要说。它使事情更具可读性。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-19T19:13:11.790

# Perl 标准

在 Perl 中，内部循环的标准变量名是**$_**。**for**、**foreach**和**while**语句默认使用此变量，因此您无需声明它。通常，**$_**可以像中性通用代词“它”一样阅读。所以一个相当标准的循环可能看起来像：

```
foreach (@item){
    $item_count{$_}++;
} 
```

在英语中，这翻译为：

> 对于每个项目，增加它的 item_count。

然而，更常见的是根本不使用变量。许多 Perl 函数和运算符默认为**$_**：

```
for (@item){
    print;
} 
```

用英语讲：

> 对于 [每个] 项目，打印 [it]。

这也是计数器的标准。（但计数器在 Perl 中的使用频率远低于在其他语言中，例如 C）。所以要打印从 1 到 100 的整数的平方：

```
for (1..100){
    print "$_*$_\n";
} 
```

由于只有一个循环可以使用**$_**变量，因此通常在最内层循环中使用它。这种用法与英语通常的工作方式相匹配：

> 对于每辆车，查看每个轮胎并检查其压力。

在 Perl 中：

```
foreach $car (@cars){
    for (@{$car->{tires}}){
        check_pressure($_);
    }
} 
```

如上所述，最好在外部循环中使用更长的描述性名称，因为在很长的代码块中很难记住通用循环变量名称的真正含义。

有时，使用较短的、非描述性的通用名称（例如**$i**、**$j**和**$k**）而不是**$_**或描述性名称是有意义的。例如，匹配已发布算法中使用的变量（例如[叉积](http://en.wikipedia.org/wiki/Cross_product)）很有用。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-09-19T22:14:18.390

@JustMike。. . **几个例子：** . . . 陪伴 Java 的。

**非嵌套循环：**。. . 尽可能限制范围

```
/*LOOP_DESCRIPTION*/ {

    int i;

    for (i = 0; i < LOOP_LENGTH; i++) {

        // loop body
    }  
} 
```

**嵌套循环：**。. . 同上

```
/*LOOP_DESCRIPTION*/ {

    int row, column;

    for (row = 0; row < ROWS; row++) {

        for (column = 0; column < COLUMNS; column++) {

            // loop body
        }
    }  
} 
```

这种布局的一个好处是它在没有评论的情况下读起来很糟糕，从而鼓励他们。
这可能很冗长，但就我个人而言，这就是我在 C 中执行循环的方式。

另外：*我开始时确实使用了“index”和“idx”，但这通常被我的同龄人改为“i”。*

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-09-20T00:21:15.183

第一条规则是变量名的长度应该与变量的范围相匹配。第二条规则是有意义的名称使错误更浅。第三条规则是，如果您想为变量名添加注释，那么您选择了错误的变量名。最后的规则是像你的队友那样做，只要它不抵消之前的规则。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-09-19T11:37:30.507

我使用“counter”或“loop”作为变量名。现代 IDE 通常使用完成这个词，因此较长的变量名使用起来不会那么乏味。此外，将变量命名为它的功能可以让将要维护您的代码的程序员清楚地了解您的意图。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-09-22T14:22:03.027

无论您选择什么，在您的代码中始终使用相同的索引，只要它具有相同的含义。例如，要遍历一个数组，您可以使用`i`, `jj`, `kappa`, 等等，但始终在任何地方都以相同的方式进行：

```
for (i = 0; i < count; i++) ... 
```

最佳实践是使循环的这一部分在整个代码中看起来相同（包括始终`count`用作限制），这样它就成为一种习惯用法，您可以在精神上跳过它以便专注于代码的实质，循环体。

同样，例如，如果您正在遍历一个二维像素数组，您可能会写

```
for (y = 0; y < height; y++)
  for (x = 0; x < width; x++)
    ... 
```

只需在您编写此类循环的每个地方都以相同的方式进行。

您希望您的读者能够忽略无聊的设置并看到您在实际循环中所做的事情的精彩。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2008-09-24T13:26:25.263

像往常一样， Steve McConnell 的*[Code Complete](http://www.cc2e.com/)*在这方面有一些很好的建议。相关页面（无论如何在第一版中）是 340 和 341。绝对建议任何有兴趣改进循环编码的人看看这个。McConnell 建议使用有意义的循环计数器名称，但人们应该阅读他自己要说的内容，而不是依赖我的薄弱总结。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-11-26T14:04:53.403

在 Python 中，如果我只计算次数，我会使用 i、j 和 k。如果将迭代计数用作索引，我将使用 x、y 和 z。但是，如果我实际上是在生成一系列参数，我将使用一个有意义的名称。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-09-19T12:33:34.527

如果它是一个简单的计数器，我坚持使用“i”，否则，使用表示上下文的名称。我倾向于将可变长度保持为 4。这主要是从代码阅读的角度来看，写入不算数，因为我们有自动完成功能。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-09-20T21:12:37.533

我最喜欢在类矩阵集合上循环的约定是使用 x+y，因为它们在笛卡尔坐标中使用：

```
for x in width:
    for y in height:
        do_something_interesting(x,y) 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2008-09-27T02:08:01.257

对于整数，我使用 int index，除非它是嵌套的，否则我会在迭代的内容上使用 Index 后缀，例如 int groupIndex 和 int userIndex。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2008-09-20T17:59:45.827

我已经开始使用与上下文相关的循环变量名称与[匈牙利语](http://c2.com/cgi/wiki?HungarianNotation)混合。

循环遍历行时，我将使用`iRow`. 循环遍历列时，我将使用`iCol`. 当循环通过汽车时，我会使用`iCar`. 你明白了。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2008-09-25T02:55:55.597

我通常使用：

```
for(lcObject = 0; lcObject < Collection.length(); lcObject++)
{
   //do stuff
} 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2008-09-20T18:14:02.673

对于数值计算、matlab 等，不要使用 i, j

这些是保留常量，但 matlab 不会抱怨。

我个人的最爱是

索引第一，第二计数器计数

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2008-09-19T11:00:50.093

我已经开始在 php 中使用 perlisms。

如果它是一个单一的迭代，`$_`对于那些知道它的用途的人来说是一个好名字。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2008-09-19T11:04:56.293

我的习惯是使用 't' - 接近 'r' 所以在输入 'for' 后很容易理解*************

# java - Java：为什么不将 NullPointerExceptions 称为 NullReferenceExceptions？

> ID：101072
> 
> 赞同：34
> 
> 时间：2008-09-19T10:55:42.167
> 
> 标签：java

这是疏忽吗？还是与JVM有关？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-03-28T02:49:19.257

Java 确实有指针——您不能在其上执行指针运算的指针。

来自可敬的[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.1)：

> Java 编程语言中有两种类型：原始类型（第 4.2 节）和引用类型（第 4.3 节）。相应地，有两种数据值可以存储在变量中、作为参数传递、由方法返回并对其进行操作：原始值（第 4.2 节）和参考值（第 4.3 节）。

[后来](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.3.1)：_

> *对象*是*类*实例或*数组*。
> 
> 引用值（通常只是*引用*）是*指向*这些对象的指针，以及一个特殊的空引用，它不引用任何对象。

（强调他们的）

所以，解释一下，如果你写：

```
Object myObj = new Object(); 
```

then`myObj`是一个*引用类型*，它包含一个*引用值*，它本身就是一个*指向*新创建的指针`Object`。

因此，如果您设置`myObj`为`null`，则将*参考值*（又名*指针*）设置为`null`. 因此，当变量被取消引用时，会合理地抛出 NullPointerException。

别担心：这个话题之前已经被[热烈讨论](http://groups.google.com/group/comp.lang.java.programmer/browse_thread/thread/65bf7e9d6bffb1b9/)过了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-01-11T13:18:53.137

在 Java 中，他们使用命名法 REFERENCE 来引用动态创建的对象。在以前的语言中，它被命名为 POINTER。正如面向对象语言中方法的命名已经取代了早期（面向对象和非面向对象）语言中的前功能和过程一样。这个命名或新标准并没有特别的好坏之分，它只是对能够创建以前的动态对象、悬空（堆空间）并被固定对象引用引用的现象的另一种命名方式（或动态参考也悬在空中）。新标准的作者（使用方法和参考）特别提到新标准的实施是为了使其符合即将到来的规划系统——如 UML 和 UP，

现在，您现在可能会认为，这只是一个重命名，但这将简化对过程的描述，而不仅仅是语言以发展的名义走的漫长道路。方法在本质上与过程不同，因为它在类的范围内运行，而过程本质上在全局范围内运行。同样，属性不仅仅是变量的新名称，因为属性是类的属性（及其实例 - 对象）。类似地，引用，也就是这篇小文章背后的问题，不同之处在于它是有类型的，因此它不具有指针的典型属性，是对内存单元的原始引用，因此，引用也是对内存单元的结构化引用基于内存的对象。

现在，在 Java 内部，即在 Java 的内部，在底层 C 代码和 Java 代码（虚拟机）之间有一个仲裁层。在该仲裁层中，抽象发生在引用的底层（裸机）实现中，正如虚拟机所做的那样，保护引用免受引用裸机（没有结构的内存单元）的影响。因此，原始事实是，NullPointerException 确实是空指针异常，而不仅仅是空引用异常。但是，对于 Java 环境中的程序员来说，这个事实可能完全无关紧要，因为他/她在任何时候都不会与裸机 JVM 接触。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-06-03T13:12:57.240

我认为答案是我们永远不会真正知道真正的答案。

我怀疑在 Java 1.0 发布之前的一段时间，有人定义了一个名为`NullPointerException`. 要么那个人的名字弄错了，要么术语没有稳定下来；即尚未决定使用术语“参考”而不是“指针”。

无论哪种方式，很可能当不一致¹被发现时，如果不破坏向后兼容性，就无法修复它。

但这只是猜测。

* * *

^(1 - 如果您真的很努力，您可以在标准 Java SE 库中找到类似的其他细微不一致。还有一些更严重的问题由于同样的原因无法解决。)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T10:56:53.973

我想这与 JVM 是用 C++ 编码的事实有关。除此之外，指针和引用几乎相似。您可以说 Java 中的引用机制是使用 C++ 指针实现的，并且名称“NullPointerException”允许该实现细节闪耀。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T10:57:28.323

这是因为 Java 在设计时考虑到了 C 程序员。在 C 术语中，使用“指针”一词而不是“参考”

# sql-server - SQL Server Management Studio – 改进 TSQL 编码过程的技巧

> ID：101079
> 
> 赞同：42
> 
> 时间：2008-09-19T10:56:32.413
> 
> 标签：sql-server, tsql, optimization, keyboard-shortcuts

我曾经在一个常见的做法是使用结对编程的地方工作。我记得当我们一起编写代码时，我们可以互相学习多少小东西。随着时间的推移，使用新的快捷方式、代码片段等显着提高了我们编写代码的效率。

自从我开始使用 SQL Server 以来，我一直独自一人。我通常会从与我现在无法做到的其他人一起工作中挑选出最好的习惯。

所以这是一个问题：

*   对于使用 SQL Server Management Studio 高效编写 TSQL 代码，您有哪些提示？
*   请将提示保留在您认为可以提高编码速度的 2 到 3 件事情/捷径上
*   请保持在 TSQL 和 SQL Server Management Studio 2005/2008 的范围内 如果该功能特定于 Management Studio 的版本，请说明：例如“仅适用于 SQL Server 2008”

**编辑：**

恐怕我会被你们中的一些人误解。我不是在寻找编写高效 TSQL 代码的技巧，而是寻找有关如何有效使用 Management Studio 来加速编码过程本身的建议。

我正在寻找的答案类型是：

*   模板的使用，
*   键盘快捷键，
*   使用 IntelliSense 插件等。

基本上是那些使编码体验更加高效和愉快的小事情。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-09-19T10:58:24.470

看看[Red Gate 的 SQL Prompt](http://www.red-gate.com/Products/SQL_Prompt/index.htm) - 这是一个很棒的产品（Red Gate 的大部分贡献也是如此）

[SQL Inform](http://www.sqlinform.com/)也是一个很棒的免费（在线）工具，用于格式化有时会失控的长过程。

除此之外，我从痛苦的经历中学到，**在任何** `DELETE` **声明之前加上** `BEGIN TRANSACTION`. 一旦您确定您的语句只删除了它应该删除的内容，您就可以`COMMIT`.

在很多场合救了我;-)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2008-09-19T15:15:38.677

社区拥有的 wiki 答案 - 随时编辑或添加评论：

**键盘快捷键**

*   `F5`, `CTRL`+`E`或`ALT`+ `X`- 执行当前选择的 TSQL 代码
*   `CTRL`+ `R`– 显示/隐藏结果窗格
*   `CTRL`+ `N`– 打开新的查询窗口
*   `CTRL`+ `L`– 显示查询执行计划

**编辑快捷方式**

*   `CTRL`+ `K`+`C`和`CTRL`+ `K`+ `U`- 注释/取消注释选定的代码块（由 Unsliced 建议）
*   `CTRL`+ `SHIFT`+`U`和`CTRL`+ `SHIFT`+ `L`- 将所选文本更改为大写/小写
*   `SHIFT`+ `ALT`+ 选择文本 - 选择/剪切/复制/粘贴矩形文本块

**插件**

*   [Red Gate 的 SQL 提示](http://www.red-gate.com/Products/SQL_Prompt/index.htm)- IntelliSense（Galwegian 建议）
*   [SQLinForm](http://www.sqlinform.com/) - TSQL 的格式（Galwegian 建议）
*   [穷人的 T-SQL 格式化程序](http://poorsql.com)- 开源格式化插件

**其他提示**

*   使用逗号前缀样式（Cade Roux 建议）
*   使用键盘加速器（kcrumley 建议）

**有用的链接**

*   [SQL Server Management Studio 键盘快捷键（完整列表）](http://msdn.microsoft.com/en-us/library/ms174205.aspx)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2008-09-19T22:08:27.470

+1 用于 SQL 提示。

我想我从未见过的真正简单的东西 - 几乎可以在任何 SQL 环境（甚至其他语言）中使用：

经过 12 年的 SQL 编码，我最近在一些 SSMS 生成的代码中看到了逗号前缀样式，我发现它非常有效。我很惊讶我以前从未见过这种风格，特别是因为它极大地提高了我的工作效率。

```
SELECT
t.a
,t.b
,t.c
,t.d
FROM t 
```

它使编辑选择列表、参数列表、按列表排序、按列表分组等变得非常容易。我发现在剪切后在列表末尾添加和删除逗号上花费的时间要少得多-和粘贴操作 - 我想它更容易，因为你几乎总是在最后添加东西，并且使用后缀逗号，这需要你更多地移动光标。

试试看，你会感到惊讶——我知道我是。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2008-09-19T14:16:28.837

我最喜欢的快速提示是，当您在对象资源管理器中展开表名时，只需将单词 colums 拖到查询屏幕即可将表中所有列的列表放入查询中。删除你不想要的比键入你想要的要容易得多，而且它非常简单，它可以防止人们使用真正糟糕的 select * 语法。它可以防止拼写错误。当然，您也可以单独拖动列。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2008-09-23T07:57:23.800

突出显示查询中的实体并按`ALT`+`F1`将为它运行 sp_help，为您提供任何列、索引、参数等的细分。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2008-09-19T11:47:52.717

尽量使用最小的数据类型，并索引查询中最常用的所有字段。

尽量避免使用服务器端游标。始终坚持使用“基于集合的方法”而不是“程序方法”来访问和操作数据。通常可以通过使用 SELECT 语句来避免游标。

始终使用查询分析器中的图形执行计划或 SHOWPLAN_TEXT 或 SHOWPLAN_ALL 命令来分析您的查询。确保您的查询执行“索引搜索”而不是“索引扫描”或“表扫描”。表扫描或索引扫描是一件非常糟糕的事情，应尽可能避免。在正确的列上选择正确的索引。使用更易读的 ANSI 标准连接子句代替旧式连接。对于 ANSI 连接，WHERE 子句仅用于过滤数据。与旧式连接一样，WHERE 子句同时处理连接条件和过滤数据。

不要让您的前端应用程序直接使用 SELECT 或 INSERT/UPDATE/DELETE 语句查询/操作数据。相反，创建存储过程，并让您的应用程序访问这些存储过程。这使您的应用程序的所有模块的数据访问保持干净和一致，同时将业务逻辑集中在数据库中。

谈到存储过程，不要在存储过程名称前加上“sp_”。前缀 sp_ 保留用于 SQL Server 附带的系统存储过程。每当 SQL Server 遇到以 sp_ 开头的过程名称时，它首先尝试在 master 数据库中定位该过程，然后查找提供的任何限定符（数据库、所有者），然后尝试将 dbo 作为所有者。因此，您可以通过避免使用“sp_”前缀来真正节省定位存储过程的时间。

尽可能避免使用动态 SQL 语句。动态 SQL 往往比静态 SQL 慢，因为 SQL Server 每次都必须在运行时生成一个执行计划。

如果可能，请尝试使用集成身份验证。这意味着，忘记 sa 和其他 SQL 用户，使用 microsoft 用户配置基础结构，并始终保持您的 SQL 服务器与所有必需的补丁保持最新。微软在开发、测试和发布补丁方面做得很好，但应用它是你的工作。

在 amazon.com 上搜索有好评的书籍并购买！

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2010-03-24T02:29:18.240

`CTRL`+`I`用于[增量搜索](http://thehobt.blogspot.com/2009/01/lesser-known-features-of-sql-server_08.html)。点击`F3`或`CTRL`+`I` 循环显示结果。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2008-09-22T07:03:33.173

键盘加速器。一旦你弄清楚你写了很多什么样的查询，编写实用程序存储过程来自动执行任务，并将它们映射到键盘快捷键。例如，[本文](http://blogs.msdn.com/irenak/archive/2006/10/27/sysk-228-get-table-columns-or-rows-with-single-key-press.aspx)讨论了如何避免在您每次只想快速查看该表中的示例数据时输入“select top 10 * from SomeBigTable”。我有这个过程的一个大大扩展的版本，映射到`CTRL`+ `5`。
我还有几个：

1.  `CTRL`+ `0`: 快速编写表格数据、过程、UDF 或视图定义的脚本
2.  `CTRL`+ `9`：查找名称中包含给定字符串的任何对象（因为当您知道名称中有一个带有“Option”的过程，但您不知道它的名称以什么开头时）
3.  `CTRL`+ `7`：查找在其代码中包含给定字符串的任何 proc、UDF 或视图
4.  `CTRL`+ `4`：查找具有给定名称的列的所有表

……还有一些现在还没有想到的。其中一些事情可以通过 SSMS 中的现有界面完成，但是 SSMS 的窗口和小部件的加载速度可能会有点慢，尤其是当您通过 Internet 查询服务器时，我宁愿不必举手反正键盘。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2009-04-24T11:00:55.730

只是一个很小的-矩形选择`ALT`+`DRAG`非常方便复制+粘贴垂直对齐的列列表（例如，当手动编写大量更新时）。编写 TSQL 是我唯一一次使用它！

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2012-01-25T18:11:24.673

如果您从对象资源管理器的列节点拖动表，它会在查询窗口中为您放置一个列的 CSV 列表

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2008-09-19T14:33:49.667

有助于提高我所做工作准确性的另一件事并不是真正的管理工作室技巧，而是使用 t-sql 本身的技巧。

每当我第一次编写更新或删除语句时，我都会在其中加入一个选择，这样我就可以看到哪些记录会受到影响。

例子：

```
select t1.field1,t2.field2
--update t
--set field1 = t2.field2 
from  mytable t1
join myothertable t2 on t1.idfield =t2.idfield
where t2.field1 >10

select t1.* 
--delete t1
from mytable t1
join myothertable t2 on t1.idfield =t2.idfield
where t2.field1 = 'test' 
```

（注意我在这里使用 select * 只是为了说明，我通常只会选择我需要查看查询是否正确的几个字段。有时我可能需要查看连接中其他表的字段以及我计划的记录删除以确保加入按我想象的方式工作）

运行此代码时，首先运行选择以确保其正确，然后将选择行注释掉并取消注释删除或更新部分。通过这种方式，您不会在检查之前意外运行删除或更新。此外，您还避免了忘记注释选择导致更新更新数据库表中的所有记录的问题，如果您使用此语法并取消注释选择以运行它：

```
select t1.field1,t2.field2
update t
set field1 = t2.field2 
--select t1.field1,t2.field2
from  mytable t1
join myothertable t2 on t1.idfield =t2.idfield
where t2.field1 >10 
```

正如您从上面的示例中看到的那样，如果您取消注释选择并忘记重新注释它，哎呀，您刚刚更新了整个表，然后在您认为只运行更新时运行了一个选择。本周有人在我的办公室里这样做了，所以所有客户中只有一个人可以登录客户网站。所以避免这样做。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2008-10-03T06:41:28.443

## 对于子查询

对象资源管理器 > 右键单击​​表 > 将表编写为 > 选择到 > 剪贴板

然后，您可以将其粘贴到您想要的部分作为子查询。

## 模板/片段

仅使用代码片段创建您自己的模板。然后将模板作为新文档打开，只需将其拖到您当前的查询中即可插入片段。

片段可以只是一组带有注释的标题，也可以只是一些简单的代码。

## 隐式事务

如果您不记得在删除语句之前启动事务，您可以转到选项并在所有查询中默认设置隐式事务。他们总是需要一个明确的提交/回滚。

## 隔离级别

转到选项并将隔离级别默认设置为 READ_UNCOMMITED。这样您就不需要在所有临时查询中键入 NOLOCK。只是不要忘记在编写新视图或存储过程时放置表格提示。

## 默认数据库

您的登录有一个由 DBA 设置的默认数据库（对我来说，几乎每次都是不想要的）。

如果您因为当前正在进行的项目而希望它是不同的。

在“已注册服务器窗格”> 右键单击​​ > 属性 > 连接属性选项卡 > 连接到数据库。

## 多次登录

（这些你可能已经做过了）

多次注册服务器，每次使用不同的登录名。然后，您可以在对象浏览器中多次打开同一服务器（每次使用不同的登录名）。

要使用不同的登录名执行您已经编写的相同查询，而不是复制查询，只需右键单击查询窗格 > 连接 > 更改连接。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2012-11-29T18:19:36.383

使用对象资源管理器中的过滤器按钮从名称中的部分文本中快速查找特定对象（表、存储过程等）或查找属于特定模式的对象。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2009-03-12T04:48:00.493

我喜欢将`CTRL`+的键盘快捷键设置`F1`为**sp_helptext**，因为这允许您突出显示存储过程并快速查看它的代码。`ALT`我发现它是对默认+ `F1` **sp_help**快捷方式的一个很好的补充。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2009-08-12T20:45:24.483

我有一个计划任务，每天晚上将每个对象（表、存储过程等）写入文件。我在输出目录上设置了全文搜索索引，所以当我在寻找某个隐藏在数据库中的某个字符串（例如，一个常量）时，我可以很快找到它。

在 Management Studio 中，您可以使用 Tasks > Generate Scrips... 命令查看如何执行此操作。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2008-09-19T11:03:04.350

我建议你为你的 SQL 脚本创建标准并坚持下去。还可以使用模板快速创建不同类型的存储过程和函数。这是关于 SQL Server 2005 Management Studio 中的模板的问题

[如何在 SQL Server 2005 Management Studio 中创建 SQL Server 2005 存储过程模板？](https://stackoverflow.com/questions/64977/how-do-you-create-sql-server-2005-stored-procedure-templates-in-sql-server-2005)

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2009-03-12T04:37:06.243

使用++显示**查询设计**器`CTRL``SHIFT``Q`

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2012-03-09T10:13:06.303

我是最近为 SSMS2008/R2 发布的 SSMSBoost 插件的开发人员，其目的是添加加速日常任务的附加功能：

快捷方式：-（ `F2`在 SQL 编辑器中）：位于未绑定光标的脚本对象

`CTRL`+ `F2`- （在 SQL 编辑器中）：在对象资源管理器中找到位于光标下的对象并将其聚焦 +它包括 SSMS2008 中缺少的快捷方式编辑器（即将在 SSMS2012 中出现）

SSMSBoost 还添加了带有按钮的工具栏：

*   将 SQL 编辑器连接同步到对象资源管理器（在对象资源管理器中关注当前数据库）
*   管理您自己的首选连接并通过组合框在它们之间切换（包括服务器之间的跳转）
*   自动替换：键入“ **sel** ”将替换它`select * from`，您还可以添加自己的令牌替换对
*   和一些更有用的功能

![SSMSBoost 工具栏](../Images/fed7492bad8ea5cff6e7f4861432c04e.png)

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2008-09-19T12:42:00.107

利用 TRY/CATCH 功能捕获错误。

Adam Machanic 的 Expert SQL Server 2005 Programming 是可靠技术和实践的重要资源。

对存储过程使用所有权链接。

利用模式来实施数据安全和角色。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2008-09-23T07:48:17.097

F5运行当前查询很容易获胜，之后，++的通用MS编辑器命令`CTRL`将所选文本注释掉，然后`K`++取消注释。 `C``CTRL``K``U`

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2009-05-15T17:50:22.907

使用对象资源管理器详细信息而不是对象资源管理器来查看您的表格，这样您可以按一个字母并让它转到具有该字母前缀的第一个表格。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2009-07-31T06:53:44.937

如果您与开发人员一起工作，通常会得到一小段代码被格式化为一长行代码，那么用于 SQL Server management Studio 的 sql pretty printer add-on 可能会对超过 60 多个格式化程序选项有很大帮助。 [http://www.dpriver.com/sqlpp/ssmsaddin.html](http://www.dpriver.com/sqlpp/ssmsaddin.html)

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2009-09-24T00:48:48.297

在突出显示的文本上使用`TAB`会缩进它。非常适合以可读的格式轻松安排您的代码。此外，`SHIFT`+`TAB`将取消缩进。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2011-03-30T17:24:00.567

如果您正在处理或解决一个非常长的过程，使用书签是保持理智的好方法。假设您正在使用外部查询中的派生字段，它的定义是内部查询中的另外 200 行。您可以为这两个位置添加书签，然后快速在两者之间来回切换。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2011-12-08T10:02:33.340

Devart 的 SQL Complete express edition 是一个 SSMS 插件，是一个免费且有用的插件。它提供了急需的代码格式化和智能感知功能。

我也使用`SSMSToolsPack`插件，它非常好。我爱;

1.  它是 SQL 片段，您可以在其中为代码片段创建短键，并在您键入这些键并按 Enter 时自动附加它们。
2.  搜索历史记录以检索您几个月前运行并忘记的查询，节省了我很多时间。
3.  恢复上次会话。现在，如果我必须重新启动我的 Windows，我永远不会保存我的查询。我只需单击恢复最后一个会话，我的最后一个会话就会自动恢复并自动创建连接。
4.  从查询结果创建插入语句（非常有用）。只是喜欢这个插件。

最近推出了一个小渔获物。SSMSToolsPack 对于 SSMS 2012 不再免费。它对于 SSMS 2005 和 SSMS 2008 仍然是免费的，**直到现在**。仅当您想在迁移到 SSMS 2012 时购买它时才使用它。否则，放弃它可能是个好主意。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2012-03-12T19:18:40.843

*   `ALT+SHIFT`+ 选择

这是我最近发现的一个很棒的方法——它可以让你选择一个矩形的文本部分，而不管换行符如何。对于快速裁剪子查询或列表非常方便。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2012-05-31T05:49:47.833

如果您需要为某种 API 编写大量存储过程。你可能喜欢我当程序员时写的这个工具。假设您有一个 200 列的表，需要编写一个存储过程来插入/更新和另一个存储过程来删除。因为您不希望您的应用程序直接访问这些表。仅声明部分将是一项繁琐的任务，但如果部分代码是为您编写的，则不会。这是一个例子......

```
CREATE PROC upsert_Table1(@col1 int, @col2 varchar(200), @col3 float, etc.)
AS
BEGIN
  UPDATE table1 SET col1 = @col1, col2 = @col2, col3 = @col3, etc.
  IF @@error <> 0
    INSERT Table1 (col1, col2, col3, etc.)
    VALUES(@col1, @col2, @col3, etc.)
END
GO
CREATE PROC delete_Table1(@col1)
AS DELETE FROM Table1 WHERE col1 = @col1 
```

[http://snipplr.com/view/13451/spcoldefinition-or-writing-upsert-sp-in-a-snap/](http://snipplr.com/view/13451/spcoldefinition-or-writing-upsert-sp-in-a-snap/)

注意：你也可以查看2002年写的原始代码和文章（我现在感觉老了！）
[http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=549&lngWId=5](http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=549&lngWId=5)

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2008-09-23T10:22:57.583

我热烈推荐 Red Gate 的 SQL Prompt。自动发现（表、存储过程、函数和本机函数的智能感知）简直太棒了！:)

不过，它是有代价的。没有免费版本的东西。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2009-09-24T00:50:43.820

了解 SQL Server Management Studio 中可用的两种（？）不同类型的窗口。

如果您右键单击表格并选择`Open`它将使用可编辑的网格，您可以在其中修改单元格。如果您右键单击数据库并选择`New Query`它将创建一个稍微不同类型的窗口，您无法在其中修改网格但它为您提供了一些其他不错的功能，例如允许不同的代码片段并让您通过选择单独执行它们。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2009-09-24T00:55:02.163

使用`SELECT INTO`查询快速/轻松地制作备份表以进行工作和试验。

# ms-access - 如何在 MS Access 中将邮件从一个链接的 Exchange 邮箱移动到另一个邮箱

> ID：101096
> 
> 赞同：0
> 
> 时间：2008-09-19T10:59:52.483
> 
> 标签：ms-access, vba, exchange-server

我在 MS Access 应用程序中有一个作为表格链接的 Exchange 邮箱。这主要用于阅读，但我也希望能够将消息“移动”到另一个文件夹。

不幸的是，这并不像在第二个链接邮箱中写入那么简单，因为显然我无法编辑某些字段。一些关键字段，如 To: 字段不可用，因为我收到以下错误

*“字段 'To' 基于表达式，无法编辑”。*

在这里使用*CreateObject("Outlook.Application")*不是一个选项，因为据我所知，这会在从 Access 调用时提供一个安全对话框。

任何解决方案？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T14:44:42.777

这是两个问题吗？可以使用 Move 方法移动邮件。这是一个片段：

```
 Set oApp = CreateObject("Outlook.Application")

Set oNS = oApp.GetNamespace("MAPI")

Set oMailItems = oNS.GetDefaultFolder(olFolderInbox)
Set itm = oMailItems.Items(6)
itm.Move oNS.GetDefaultFolder(olFolderDeletedItems) 
```

但是，收件人（收件人）是只读的，我相信，即使是 Outlook Redemtion。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-07T13:20:17.213

我不认为 Access 是适合这项工作的工具。您将无法使用 Outlook.Application 对象或 MAPI 包装器（如 CDO）。CDO 将是更优雅、更高效的方式，但它必须通过 Office 安装程序显式安装在客户端上。

如果您想避免脚本安全对话框（以及一些一般的 CDO 功能），您应该尝试使用[Outlook Redemption](http://www.dimastr.com/redemption/)。

Redemption 是 CDO 的直接替代品，当您之前进行任何 CDO/Outlook VBA 编码时，您会立即熟悉它。

# build-process - 你如何设置一个新建项目

> ID：101099
> 
> 赞同：2
> 
> 时间：2008-09-19T11:00:51.420
> 
> 标签：build-process, build-automation, build, continuous-integration

我正在设置一个 Greenfield (yeeea!) Web 应用程序，刚才我想知道其他人如何首先设置他们的项目以进行自动化/CI 构建？

我一般遵循这个：

1.  创建具有基本布局（主干、分支、库等）的 SVN 存储库
2.  创建基本解决方案结构（核心、用户界面、测试）
3.  创建一个失败的基本测试
4.  复制 NAnt 脚本，更新和调整，确保失败的测试在本地中断构建
5.  犯罪
6.  在 CI 服务器 (TeamCity) 上设置默认调试构建，确保构建失败
7.  修复文本
8.  提交 9 确保构建通过 CI
9.  完毕....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T15:00:56.060

问题文本的转贴：

1.  创建具有基本布局（主干、分支、库等）的 SVN 存储库
2.  创建基本解决方案结构（核心、用户界面、测试）
3.  创建一个失败的基本测试
4.  复制 NAnt 脚本，更新和调整，确保失败的测试在本地中断构建
5.  犯罪
6.  在 CI 服务器 (TeamCity) 上设置默认调试构建，确保构建失败
7.  修复测试
8.  犯罪
9.  确保构建通过 CI
10.  完毕....

# java - 用于 Java 的 CSV API

> ID：101100
> 
> 赞同：167
> 
> 时间：2008-09-19T11:01:12.793
> 
> 标签：java, csv

谁能推荐一个简单的 API，让我可以使用读取 CSV 输入文件，进行一些简单的转换，然后编写它。

一个快速的谷歌发现[http://flatpack.sourceforge.net/](http://flatpack.sourceforge.net/)看起来很有希望。

在我将自己耦合到这个 API 之前，我只是想检查一下其他人正在使用什么。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2008-09-19T21:10:31.540

我过去使用过[OpenCSV](http://opencsv.sourceforge.net/)。

```
import au.com.bytecode.opencsv.CSVReader;
```

```
字符串文件名 = "data.csv";
CSVReader reader = new CSVReader(new FileReader(fileName));// 如果第一行是标题
String[] header = reader.readNext();

// 遍历 reader.readNext 直到它返回 null
String[] line = reader.readNext();

```

[在另一个问题](https://stackoverflow.com/questions/123/csv-file-to-xml#53547)的答案中还有一些其他的选择。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2008-09-19T11:58:32.350

# Apache Commons CSV

查看[*Apache Common CSV*](http://commons.apache.org/proper/commons-csv/)。

该库读取和写入[CSV 的几种变体](http://commons.apache.org/proper/commons-csv/archives/1.6/apidocs/index.html)，包括标准的[RFC 4180](https://www.rfc-editor.org/rfc/rfc4180)。还读取/写入[制表符分隔的](https://en.wikipedia.org/wiki/Tab-separated_values)文件。

*   Excel
*   Informix 卸载
*   InformixUnloadCsv
*   MySQL
*   甲骨文
*   PostgreSQLCSV
*   PostgreSQL文本
*   RFC4180
*   TDF

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2010-01-27T10:33:36.103

**更新：**此答案中的代码适用于 Super CSV 1.52。Super CSV 2.4.0 的更新代码示例可以在项目网站上找到： http: [//super-csv.github.io/super-csv/index.html](http://super-csv.github.io/super-csv/index.html)

* * *

SuperCSV 项目直接支持 CSV 单元格的解析和结构化操作。从[http://super-csv.github.io/super-csv/examples_reading.html](http://super-csv.github.io/super-csv/examples_reading.html)你会发现例如

给了一个班级

```
public class UserBean {
    String username, password, street, town;
    int zip;

    public String getPassword() { return password; }
    public String getStreet() { return street; }
    public String getTown() { return town; }
    public String getUsername() { return username; }
    public int getZip() { return zip; }
    public void setPassword(String password) { this.password = password; }
    public void setStreet(String street) { this.street = street; }
    public void setTown(String town) { this.town = town; }
    public void setUsername(String username) { this.username = username; }
    public void setZip(int zip) { this.zip = zip; }
} 
```

并且您有一个带有标题的 CSV 文件。我们假设以下内容

```
username, password,   date,        zip,  town
Klaus,    qwexyKiks,  17/1/2007,   1111, New York
Oufu,     bobilop,    10/10/2007,  4555, New York 
```

然后，您可以创建 UserBean 的实例并使用文件第二行中的值填充它，代码如下

```
class ReadingObjects {
  public static void main(String[] args) throws Exception{
    ICsvBeanReader inFile = new CsvBeanReader(new FileReader("foo.csv"), CsvPreference.EXCEL_PREFERENCE);
    try {
      final String[] header = inFile.getCSVHeader(true);
      UserBean user;
      while( (user = inFile.read(UserBean.class, header, processors)) != null) {
        System.out.println(user.getZip());
      }
    } finally {
      inFile.close();
    }
  }
} 
```

使用以下“操作规范”

```
final CellProcessor[] processors = new CellProcessor[] {
    new Unique(new StrMinMax(5, 20)),
    new StrMinMax(8, 35),
    new ParseDate("dd/MM/yyyy"),
    new Optional(new ParseInt()),
    null
}; 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2011-07-11T22:36:48.270

阅读 CSV 格式描述让我觉得使用 3rd 方库比自己编写更容易：

*   [http://en.wikipedia.org/wiki/Comma-separated_values](http://en.wikipedia.org/wiki/Comma-separated_values)

维基百科列出了 10 个或一些已知的库：

*   [http://en.wikipedia.org/wiki/CSV_application_support](http://en.wikipedia.org/wiki/CSV_application_support)

我使用某种检查列表比较了列出的库。*OpenCSV*对我来说是赢家（YMMV），结果如下：

```
+ maven

+ maven - release version   // had some cryptic issues at _Hudson_ with snapshot references => prefer to be on a safe side

+ code examples

+ open source   // as in "can hack myself if needed"

+ understandable javadoc   // as opposed to eg javadocs of _genjava gj-csv_

+ compact API   // YAGNI (note *flatpack* seems to have much richer API than OpenCSV)

- reference to specification used   // I really like it when people can explain what they're doing

- reference to _RFC 4180_ support   // would qualify as simplest form of specification to me

- releases changelog   // absence is quite a pity, given how simple it'd be to get with maven-changes-plugin   // _flatpack_, for comparison, has quite helpful changelog

+ bug tracking

+ active   // as in "can submit a bug and expect a fixed release soon"

+ positive feedback   // Recommended By 51 users at sourceforge (as of now) 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-09-19T11:06:56.243

我们使用[JavaCSV](http://sourceforge.net/projects/javacsv/)，它工作得很好

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-09-19T11:21:08.330

对于我处理的最后一个需要处理大量 CSV 的企业应用程序——几个月前——我在 sourceforge 使用[SuperCSV](http://supercsv.sourceforge.net/)，发现它简单、健壮且没有问题。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2011-06-22T09:11:32.810

您可以使用 csvreader api 并从以下位置下载：

[http://sourceforge.net/projects/javacsv/files/JavaCsv/JavaCsv%202.1/javacsv2.1.zip/download](http://sourceforge.net/projects/javacsv/files/JavaCsv/JavaCsv%202.1/javacsv2.1.zip/download)

或者

[http://sourceforge.net/projects/javacsv/](http://sourceforge.net/projects/javacsv/)

使用以下代码：

```
/ ************ For Reading ***************/

import java.io.FileNotFoundException;
import java.io.IOException;

import com.csvreader.CsvReader;

public class CsvReaderExample {

    public static void main(String[] args) {
        try {

            CsvReader products = new CsvReader("products.csv");

            products.readHeaders();

            while (products.readRecord())
            {
                String productID = products.get("ProductID");
                String productName = products.get("ProductName");
                String supplierID = products.get("SupplierID");
                String categoryID = products.get("CategoryID");
                String quantityPerUnit = products.get("QuantityPerUnit");
                String unitPrice = products.get("UnitPrice");
                String unitsInStock = products.get("UnitsInStock");
                String unitsOnOrder = products.get("UnitsOnOrder");
                String reorderLevel = products.get("ReorderLevel");
                String discontinued = products.get("Discontinued");

                // perform program logic here
                System.out.println(productID + ":" + productName);
            }

            products.close();

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

} 
```

写入/附加到 CSV 文件

代码：

```
/************* For Writing ***************************/

import java.io.File;
import java.io.FileWriter;
import java.io.IOException;

import com.csvreader.CsvWriter;

public class CsvWriterAppendExample {

    public static void main(String[] args) {

        String outputFile = "users.csv";

        // before we open the file check to see if it already exists
        boolean alreadyExists = new File(outputFile).exists();

        try {
            // use FileWriter constructor that specifies open for appending
            CsvWriter csvOutput = new CsvWriter(new FileWriter(outputFile, true), ',');

            // if the file didn't already exist then we need to write out the header line
            if (!alreadyExists)
            {
                csvOutput.write("id");
                csvOutput.write("name");
                csvOutput.endRecord();
            }
            // else assume that the file already has the correct header line

            // write out a few records
            csvOutput.write("1");
            csvOutput.write("Bruce");
            csvOutput.endRecord();

            csvOutput.write("2");
            csvOutput.write("John");
            csvOutput.endRecord();

            csvOutput.close();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2010-10-06T07:47:30.773

还有[CSV/Excel 实用程序](http://techblog.ralph-schuster.eu/csv-utility-package-for-java/)。它假设所有这些数据都是表状的，并从迭代器中传递数据。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-19T11:17:36.357

CSV 格式对于 StringTokenizer 来说听起来很简单，但它可能会变得更加复杂。在德国，分号用作分隔符，包含分隔符的单元格需要转义。您不会使用 StringTokenizer 轻松处理这个问题。

我会去[http://sourceforge.net/projects/javacsv](http://sourceforge.net/projects/javacsv)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-19T11:37:05.220

如果您打算从 excel 中读取 csv，那么有一些有趣的极端情况。我不记得所有这些，但是 apache commons csv 无法正确处理它（例如，使用 url）。

请务必使用引号、逗号和斜杠测试 excel 输出。

# c# - 强制浏览器使用新的 CSS

> ID：101125
> 
> 赞同：10
> 
> 时间：2008-09-19T11:08:45.303
> 
> 标签：c#, asp.net, css, master-pages

有没有办法检查用户的浏览器是否缓存了不同版本的 CSS，如果是，则强制他们的浏览器拉取新版本？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-02-05T13:33:57.517

我不知道它是否正确使用，但我认为您可以使用查询字符串强制重新加载 css 文件：

```
<link href="mystyle.css?SOME_UNIQUE_TEXT" type="text/css" rel="stylesheet" /> 
```

我记得几年前我使用这种方法来强制重新加载网络摄像头图像，但时间可能已经过去了......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-19T11:20:24.307

在不使用 js 的情况下，您可以将 css 文件名保存在会话变量中。当向主页发出请求时，您只需将 css 链接标签与会话变量名称组合在一起。

由于 ccs 文件名不同，您可以强制浏览器下载它，而无需检查浏览器中先前加载的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-12T11:12:48.003

正如[jeroen 建议](https://stackoverflow.com/questions/101125/dynamically-choose-change-css-at-run-time/515904#515904)的那样，您可以拥有以下内容：

```
<link href="StyleSelector.aspx?foo=bar&baz=foz" type="text/css" rel="stylesheet" /> 
```

那么你的 StyleSelector.aspx 文件应该是这样的：

```
<%@ Page Language="cs" AutoEventWireup="false" Inherits="Demo.StyleSelector" Codebehind="StyleSelector.aspx.cs" %> 
```

你的 StyleSelector.aspx.cs 像这样：

```
using System.IO;

namespace Demo
{
    public partial class StyleSelector : System.Web.UI.Page
    {
        public StyleSelector()
        {
            Me.Load += New EventHandler(doLoad);
        }

        protected void doLoad(object sender, System.EventArgs e)
        {
            // Make sure you add this line
            Response.ContentType = "text/css";

            string cssFileName = Request.QueryString("foo");

            // I'm assuming you have your CSS in a css/ folder
            Response.WriteFile("css/" + cssFileName + ".css");
        }
    }
} 
```

这将根据查询字符串参数向用户发送 CSS 文件（实际上是任何文件，请参阅安全说明）的内容。现在棘手的部分是执行 Conditional GET，这是检查用户是否在缓存中的页面的花哨名称。

首先，我强烈建议您阅读[面向 RSS 黑客的 HTTP Conditional GET](http://fishbowl.pastiche.org/2002/10/21/http_conditional_get_for_rss_hackers/)，这是一篇很好的文章，它解释了 HTTP Conditional GET 机制的基础知识。这是**必读**的，相信我。

我已经发布了[类似的答案](https://stackoverflow.com/questions/204886/can-i-use-http-header-to-check-if-a-dynamic-page-has-been-changed/236380#236380)（但使用 PHP 代码，对不起）到 SO 问题[我可以使用“http 标头”来检查动态页面是否已更改](https://stackoverflow.com/questions/204886/can-i-use-http-header-to-check-if-a-dynamic-page-has-been-changed)。将代码从 PHP 移植到 C# 应该很容易（如果以后有时间我会这样做。）

安全注意事项：执行 ("css/" + cssFileName + ".css") 之类的操作非常不安全，因为您可能会发送相对路径字符串，因此您可能会向用户发送不同文件的内容。您将想出一个更好的方法来找出要发送的 CSS 文件。

设计说明：您可能希望使用[`IHttpModule`](http://msdn.microsoft.com/en-us/library/system.web.ihttpmodule.aspx)or而不是 .aspx 页面[`IHttpHandler`](http://msdn.microsoft.com/en-us/library/system.web.ihttphandler.aspx)，但这种方式工作得很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T11:30:20.150

**回答问题 1**

您可以编写一个继承自 System.Web.UI.Control 并覆盖**Render**方法的**服务器控件：**

 **```
public class CSSLink : System.Web.UI.Control
{

    protected override void Render(System.Web.UI.HtmlTextWriter writer)
    {

        if ( ... querystring params == ... )
            writer.WriteLine("<link href=\"/styles/css1.css\" type=\"text/css\" rel=\"stylesheet\" />")
        else
            writer.WriteLine("<link href=\"/styles/css2.css\" type=\"text/css\" rel=\"stylesheet\" />")

    }

} 
```

并在您的 MasterPage 中插入此类的一个实例：

```
<%@ Register TagPrefix="mycontrols" Namespace="MyNamespace" Assembly="MyAssembly" %>
...
<head runat="server">
    ...
    <mycontrols:CSSLink id="masterCSSLink" runat="server" />
</head>
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T11:10:48.277

您可能应该只共享一个共同的祖先类，然后如果需要，您可以使用单个 js 命令轻弹它。

```
<body class="style2">

<body class="style1"> 
```

等等

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T11:27:56.723

我知道这个问题是专门关于 C# 的，我从那个 Windows Server 中假设有一些味道。由于我对这两种技术都不太了解，所以我将给出一个适用于 PHP 和 Apache 的答案，您可能会从中有所收获。

如前所述，只需在页面主体上设置一个 ID 或一个类，具体取决于特定查询，例如（在 PHP 中）

```
<?php
if($_GET['admin_page']) {
  $body_id = 'admin';
} else {
  $body_id = 'normal';
}
?>
...
<body id="<?php echo $body_id; ?>">
...
</body> 
```

你的 CSS 可以针对这个：

```
body#admin h1 {
   color: red;
}

body#normal h1 {
   color: blue;
} 
```

ETC

至于强制下载 CSS，您可以在 Apache 中使用 mod_expires 或 mod_headers 模块执行此操作 - 对于 mod_headers，.htaccess 中的这将停止 css 文件被缓存：

```
<FilesMatch "\.(css)$">
Header set Cache-Control "max-age=0, private, no-store, no-cache, must-revalidate"
</FilesMatch> 
```

但是由于您可能没有使用 apache，所以这对您没有多大帮助:(

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-06-30T21:23:32.597

我喜欢 jeroen 向样式表 URL 添加查询字符串的建议。您可以在样式表文件最后一次修改时添加时间戳。在我看来，它是为您生成 LINK 标记的辅助函数或自定义控件的理想选择。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-17T16:17:15.890

就像在正确答案中一样，我使用了一些类似的方法，但有一些不同

```
<link href="mystyle.css?v=DIGIT" type="text/css" rel="stylesheet" /> 
```

作为 DIGIT，您可以使用实数，在模板中手动或自动设置。例如，在我的项目中，我在管理面板中使用缓存清除模块，每次使用此缓存清理器时，它都会自动增加 DIGIT。**

# python - 如何从剪贴板读取文本？

> ID：101128
> 
> 赞同：126
> 
> 时间：2008-09-19T11:09:27.390
> 
> 标签：python, windows, interop, clipboard

如何使用 python 从（windows）剪贴板中读取文本？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2008-09-19T11:20:29.610

您可以使用名为[win32clipboard](http://docs.activestate.com/activepython/2.5/pywin32/win32clipboard.html)的模块，它是[pywin32](https://github.com/mhammond/pywin32)的一部分。

这是一个首先设置剪贴板数据然后获取它的示例：

```
import win32clipboard

# set clipboard data
win32clipboard.OpenClipboard()
win32clipboard.EmptyClipboard()
win32clipboard.SetClipboardText('testing 123')
win32clipboard.CloseClipboard()

# get clipboard data
win32clipboard.OpenClipboard()
data = win32clipboard.GetClipboardData()
win32clipboard.CloseClipboard()
print data 
```

文档中的一个重要提醒：

> 当窗口完成检查或更改剪贴板时，通过调用 CloseClipboard 关闭剪贴板。这使其他窗口能够访问剪贴板。调用 CloseClipboard 后不要在剪贴板上放置对象。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2014-05-24T11:58:36.800

您可以通过内置模块[Tkinter](https://docs.python.org/2/library/tkinter.html)轻松完成此操作，该模块基本上是一个 GUI 库。此代码创建一个空白小部件以从操作系统获取剪贴板内容。

```
from tkinter import Tk  # Python 3
#from Tkinter import Tk # for Python 2.x
Tk().clipboard_get() 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2016-07-03T15:54:43.620

我发现[pyperclip](https://github.com/asweigart/pyperclip)是从 python 访问剪贴板的最简单方法：

1.  安装 pyperclip： `pip install pyperclip`

2.  用法：

```
import pyperclip

s = pyperclip.paste()
pyperclip.copy(s)

# the type of s is string 
```

支持 Windows、Linux 和 Mac，并且似乎也可以处理非 ASCII 字符。测试字符包括±°©©αβγθΔΨΦåäö

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2011-11-07T16:27:31.317

我已经看到了很多使用 win32 模块的建议，但是 Tkinter 提供了我见过的最短和最简单的方法，如这篇文章中所示：[如何使用 Python 在 Windows 上将字符串复制到剪贴板？](https://stackoverflow.com/questions/579687/how-do-i-copy-a-string-to-the-clipboard-on-windows-using-python/4203897#4203897)

另外，Tkinter 在 python 标准库中。

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2014-04-25T05:54:12.243

如果您不想安装额外的软件包，`ctypes`也可以完成工作。

```
import ctypes

CF_TEXT = 1

kernel32 = ctypes.windll.kernel32
kernel32.GlobalLock.argtypes = [ctypes.c_void_p]
kernel32.GlobalLock.restype = ctypes.c_void_p
kernel32.GlobalUnlock.argtypes = [ctypes.c_void_p]
user32 = ctypes.windll.user32
user32.GetClipboardData.restype = ctypes.c_void_p

def get_clipboard_text():
    user32.OpenClipboard(0)
    try:
        if user32.IsClipboardFormatAvailable(CF_TEXT):
            data = user32.GetClipboardData(CF_TEXT)
            data_locked = kernel32.GlobalLock(data)
            text = ctypes.c_char_p(data_locked)
            value = text.value
            kernel32.GlobalUnlock(data_locked)
            return value
    finally:
        user32.CloseClipboard()

print(get_clipboard_text()) 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2012-06-19T08:00:02.703

上面最受好评的答案很奇怪，它只是清除剪贴板然后获取内容（然后是空的）。可以清除剪贴板以确保某些剪贴板内容类型（例如“格式化文本”）不会“覆盖”您要保存在剪贴板中的纯文本内容。

以下代码将剪贴板中的所有换行符替换为空格，然后删除所有双空格，最后将内容保存回剪贴板：

```
import win32clipboard

win32clipboard.OpenClipboard()
c = win32clipboard.GetClipboardData()
win32clipboard.EmptyClipboard()
c = c.replace('\n', ' ')
c = c.replace('\r', ' ')
while c.find('  ') != -1:
    c = c.replace('  ', ' ')
win32clipboard.SetClipboardText(c)
win32clipboard.CloseClipboard() 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2018-04-04T08:42:51.753

python标准库做到了...

```
try:
    # Python3
    import tkinter as tk
except ImportError:
    # Python2
    import Tkinter as tk

def getClipboardText():
    root = tk.Tk()
    # keep the window from showing
    root.withdraw()
    return root.clipboard_get() 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-04-27T10:19:44.400

使用 Pythons 库[剪贴板](https://pypi.python.org/pypi/clipboard/0.0.4)

它简单地像这样使用：

```
import clipboard
clipboard.copy("this text is now in the clipboard")
print clipboard.paste() 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-09-19T11:15:07.907

尝试使用 win32all 包中的 win32clipboard（如果您使用的是 ActiveState Python，则可能已安装）。

请参阅此处的示例：http: [//code.activestate.com/recipes/474121/](http://code.activestate.com/recipes/474121/)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-01-17T01:08:26.063

对于我的**控制台程序**，上面 tkinter 的答案对我来说不太有效，因为 .destroy() 总是给出错误：

> 无法调用“事件”命令：应用程序在执行时已被销毁...

或者在使用 .withdraw() 时，控制台窗口没有重新获得焦点。

要解决这个问题，您还必须在 .destroy() 之前调用 .update()。例子：

```
# Python 3
import tkinter

r = tkinter.Tk()
text = r.clipboard_get()
r.withdraw()
r.update()
r.destroy() 
```

r.withdraw() 阻止帧显示一毫秒，然后它将被销毁，将焦点返回给控制台。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-07-09T07:06:42.617

一个不是很直接的技巧：

使用 pyautogui 热键：

```
Import pyautogui
pyautogui.hotkey('ctrl', 'v') 
```

因此，您可以随意粘贴剪贴板数据。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-04-29T19:17:06.127

整整 12 年后，我有了一个解决方案，您无需安装任何软件包即可使用它。

```
from tkinter import Tk, TclError
from time import sleep

while True:
    try:
        clipboard = Tk().clipboard_get()
        print(clipboard)
        sleep(5)
    except TclError:
        print("Clipboard is empty.")
        sleep(5) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-12-06T16:14:31.760

对于 Anaconda 的用户：发行版不附带 pyperclip，但它们确实带有重新分发 pyperclip 的 pandas：

```
>>> from pandas.io.clipboard import clipboard_get, clipboard_set
>>> clipboard_get()
'from pandas.io.clipboard import clipboard_get, clipboard_set'
>>> clipboard_set("Hello clipboard!")
>>> clipboard_get()
'Hello clipboard!' 
```

我发现这比 pywin32（也包含在发行版中）更易于使用。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-02-18T05:36:05.433

为什么不尝试调用powershell？

```
import subprocess

def getClipboard():
    ret = subprocess.getoutput("powershell.exe -Command Get-Clipboard")
    return ret 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2021-12-07T04:21:57.837

```
import pandas as pd
df = pd.read_clipboard() 
```

# c# - 检查 XML 元素是否存在

> ID：101145
> 
> 赞同：41
> 
> 时间：2008-09-19T11:15:59.357
> 
> 标签：c#, xml

有人如何验证 XML 文件中是否存在特定元素？假设我有一个不断变化的 XML 文件，我需要在读取/解析它之前验证每个元素是否存在。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2008-09-19T11:19:40.813

```
if(doc.SelectSingleNode("//mynode")==null).... 
```

应该这样做（其中 doc 显然是您的 XmlDocument 对象）

或者，您可以使用 XSD 并针对它进行验证

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-16T20:01:42.893

//如果问题是“只是”在你之前验证元素是否存在于xml文件中 //提取你可以这样做的值

```
XmlNodeList YOURTEMPVARIABLE = doc.GetElementsByTagName("YOUR_ELEMENTNAME");

        if (YOURTEMPVARIABLE.Count > 0 )
        {
            doctype = YOURTEMPVARIABLE[0].InnerXml;

        }
        else
        {
            doctype = "";
        } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2011-07-11T11:12:35.513

您可以遍历每个节点并查看节点是否存在。

```
doc.Load(xmlPath);
        XmlNodeList node = doc.SelectNodes("//Nodes/Node");
        foreach (XmlNode chNode in node)
        {
            try{
            if (chNode["innerNode"]==null)
                return true; //node exists
            //if ... check for any other nodes you need to
            }catch(Exception e){return false; //some node doesn't exists.}
        } 
```

您遍历节点下的每个节点元素（比如说这是根）并检查是否存在名为“innerNode”的节点（如果需要，添加其他节点）。try..catch 是因为我怀疑如果节点不存在，这会引发流行的“未设置对象引用”错误。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-19T11:20:18.067

不确定您想要做什么，但使用 DTD 或模式可能是您**验证**xml 所需要的全部。

否则，如果要**查找**元素，可以使用 xpath 查询来搜索特定元素。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-10T09:15:06.667

试试这个怎么样：

```
using (XmlTextReader reader = new XmlTextReader(xmlPath))
{
    while (reader.Read())
    {
        if (reader.NodeType == XmlNodeType.Element)
        { 
            //do your code here
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-26T12:41:09.340

除了`sangam`编码

```
if (chNode["innerNode"]["innermostNode"]==null)
            return true; //node    *parentNode*/innerNode/innermostNode exists 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-19T11:20:31.170

[您可以通过使用 XML 模式语言（如XSD](http://www.w3schools.com/Schema/default.asp)）来验证这一点以及更多内容。

如果您的意思是有条件地在代码中，那么[XPath](http://www.w3schools.com/XPath/default.asp)也值得一看。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-14T13:50:03.660

以下是检查 xml 文件中是否存在特定节点的简单函数。

```
public boolean envParamExists(String xmlFilePath, String paramName){
    try{
        Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new File(xmlFilePath));
        doc.getDocumentElement().normalize();
        if(doc.getElementsByTagName(paramName).getLength()>0)
            return true;
        else
            return false;
    }catch (Exception e) {
        //error handling
    }
    return false;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-28T01:54:47.423

//使用XmlReader检查xml元素值是否存在

```
 using (XmlReader xmlReader = XmlReader.Create(new StringReader("XMLSTRING")))
           {

               if (xmlReader.ReadToFollowing("XMLNODE")) 

                {
                    string nodeValue = xmlReader.ReadElementString("XMLNODE");                
                }
            } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-06-04T20:19:50.883

有点晚了，但如果有帮助，这对我有用......

```
XmlNodeList NodoEstudios = DocumentoXML.SelectNodes("//ALUMNOS/ALUMNO[@id=\"" + Id + "\"]/estudios");

string Proyecto = "";

foreach(XmlElement ElementoProyecto in NodoEstudios)
{
    XmlNodeList EleProyecto = ElementoProyecto.GetElementsByTagName("proyecto");
    Proyecto = (EleProyecto[0] == null)?"": EleProyecto[0].InnerText;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-07-27T09:28:54.123

```
 string name = "some node name";
    var xDoc = XDocument.Load("yourFile");
    var docRoot = xDoc.Element("your docs root name");

     var aNode = docRoot.Elements().Where(x => x.Name == name).FirstOrDefault();
                if (aNode == null)
                {
                    return $"file has no {name}";
                } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-09-28T15:30:55.553

刚刚遇到了同样的问题，并且使用**SelectSingleNode的****null-coalescing 运算符**工作得很好，用 string.Empty 分配 null

 **```
 foreach (XmlNode txElement in txElements)
 {
     var txStatus = txElement.SelectSingleNode(".//ns:TxSts", nsmgr).InnerText ?? string.Empty;
     var endToEndId = txElement.SelectSingleNode(".//ns:OrgnlEndToEndId", nsmgr).InnerText ?? string.Empty;
     var paymentAmount = txElement.SelectSingleNode(".//ns:InstdAmt", nsmgr).InnerText ?? string.Empty;
     var paymentAmountCcy = txElement.SelectSingleNode(".//ns:InstdAmt", nsmgr).Attributes["Ccy"].Value ?? string.Empty;
     var clientId = txElement.SelectSingleNode(".//ns:OrgnlEndToEndId", nsmgr).InnerText ?? string.Empty;
     var bankSortCode = txElement.SelectSingleNode(".//ns:OrgnlEndToEndId", nsmgr).InnerText ?? string.Empty; 

     //TODO finish Object creation and Upsert DB
  } 
```

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2019-02-21T08:06:46.960

//我在第二个但最后一个位置找到子节点 ERNO

```
If StrComp(xmlnode(i).ChildNodes.Item(xmlnode(i).ChildNodes.Count - 1).Name.ToString(), "ERNO", CompareMethod.Text) = 0 Then
                xmlnode(i).ChildNodes.Item(xmlnode(i).ChildNodes.Count - 1).InnerText = c
            Else
                elem = xmldoc.CreateElement("ERNo")
                elem.InnerText = c.ToString
                root.ChildNodes(i).AppendChild(elem)
            End If 
```**

# php - 有什么比 PHPDoc 更好的吗？

> ID：101146
> 
> 赞同：23
> 
> 时间：2008-09-19T11:16:12.523
> 
> 标签：php, documentation, documentation-generation, phpdoc

有没有人使用其他任何东西来记录他们的`PHP`代码`PHPDoc?` 是否有任何工具可以读取相同的文档语法但提供更丰富的输出？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-09-20T08:29:29.473

我也会去吃doxygen。

这里有几个原因：

*   与 phpdoc 标签和其他流行标签兼容：它是可互操作的
*   与各种编程语言一起工作：更好的时间投资
*   有替代语法：可以选择适合您的评论风格
*   使用高级格式化/标记/元数据非常有效
*   有一个未链接到任何 IDE 的 GUI 和一个 Eclipse 插件

而且仍然是免费的、多平台的和开源的:-)

它很容易学习，但比 phpdoc 更难，因为它更丰富。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2011-05-11T19:36:01.733

你可以试试 DocBlox；它旨在成为 phpDocumentor 的替代方案，但支持附加功能，其中完整的 PHP 5.3 支持是其中之一。另一个好处是它非常快并且使用的内存相对较少。

[您可以在http://www.docblox-project.org](http://www.docblox-project.org)上阅读更多内容，或在[http://demo.docblox-project.org/default](http://demo.docblox-project.org/default)上查看演示

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2010-01-21T20:39:13.750

phpDocumentor 之外的另一个选择是支持[PHP的](https://stackoverflow.com/questions/101146/anything-better-than-phpdoc-out-there)[Doxygen](http://www.doxygen.nl/)文档。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-19T11:18:18.167

Doxygen ( [www.doxygen.org](http://www.doxygen.org) )。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-12-31T19:52:42.620

## ApiGen

[http://apigen.org/](http://apigen.org/)

ApiGen 支持 PHP 5.3 命名空间、包、文档之间的链接、对 PHP 标准类和通用文档的交叉引用、突出显示的源代码的创建以及对 PHP 5.4 特征的实验性支持。

## DocBlox

[http://www.docblox-project.org/](http://www.docblox-project.org/)

PHP 5.3 兼容 API 文档生成器，针对各种规模和持续集成的项目。

能够完全解析和转换 Zend Framework 2

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-20T08:45:23.693

我也在使用[Doxygen——](http://www.doxygen.org)你很快就习惯了各种关键词——它们是不言自明的。;)

[RubyDoc](http://www.ruby-doc.org/) 也很好，我特别喜欢他们的 rdocs 布局。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2010-01-21T20:39:35.937

我没有将它与 PHP 一起使用，但[doxygen](http://www.doxygen.nl/)声称支持该语言。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2011-02-25T03:45:07.780

Doctrine 使用 PHPDoctor，在我的测试中它似乎与 5.3 配合得很好。

[http://peej.github.com/phpdoctor/#download](http://peej.github.com/phpdoctor/#download)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-10-25T13:38:40.013

如果您需要记录 PHP 5.3+ 的代码，例如。如果它使用命名空间 Ted Kulp 的[PHPDoctor 分支](https://github.com/tedkulp/phpdoctor)可能是您的答案。

# unit-testing - 方法调用转发的单元测试策略是什么？

> ID：101151
> 
> 赞同：2
> 
> 时间：2008-09-19T11:17:13.627
> 
> 标签：unit-testing

我有以下情况：

```
公共类 CarManager
{
  ..

  公长AddCar(汽车车)
  {
      尝试
      {
         字符串用户名 = _authorizationManager.GetUsername();
         ...
         long id = _carAccessor.AddCar(username, car.Id, car.Name, ....);
         如果（id == 0）
         {
             throw new Exception("未添加汽车");
         }
         返回标识；
      } 捕捉（异常前）{
         抛出新的 AddCarException(ex);
      }
  }

  公共列表 AddCars（列出汽车）
  {
     列表 ids = new List();
     foreach(车中车)
     {
         ids.Add(AddCar(car));
     }
     返回ID；
  }
}

```

我正在嘲笑 _reportAccessor、_authorizationManager 等。

现在我想对 CarManager 类进行单元测试。我是否应该对 AddCar() 进行多项测试，例如

```
添加汽车测试（）
AddCarTestAuthorizationManagerException()
AddCarTestCarAccessorNoId()
AddCarTestCarAccessorException()

```

对于 AddCars()，我是否应该重复所有以前的测试，因为 AddCars() 调用 AddCar() - 似乎在重复自己？我不应该从 AddCars() 调用 AddCar() 吗？<p/>

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-19T11:58:35.297

这里有两个问题：

*   单元测试不应该一次只做一个测试方法。它们的设计应旨在证明您的班级在与系统的其余部分集成时可以完成其设计的工作。所以你应该模拟出依赖关系，然后为你的类实际使用的每种方式编写一个测试。对于您编写的每个（非平凡）类，都会有涉及特定模式中客户端代码调用方法的场景。
*   AddCars 调用 AddCar 没有任何问题。您应该重复测试以进行错误处理，但前提是它服务于目的。单元测试的非官方规则之一是“测试到无聊的程度”或（我喜欢这样想）“测试到恐惧消失”。否则，您将永远编写测试。因此，如果您确信测试不会增加任何价值，他们就不要编写它。当然，您可能错了，在这种情况下，您可以稍后再回来添加它。您不必在第一轮就做出完美的测试，只需一个坚实的基础，您可以在此基础上更好地了解您的课程需要做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T12:30:26.000

编写测试以探索方法中的每个可能场景是一种很好的做法。这就是我在项目中进行单元测试的方式。像`AddCarTestAuthorizationManagerException()`,`AddCarTestCarAccessorNoId()`或之类的测试`AddCarTestCarAccessorException()`让你思考你的代码可能失败的所有不同方式，这让我发现了我可能错过的方法的新类型失败，并改进了类的整体设计。

在像`AddCars()`调用这样的情况下，`AddCar()`我会模拟该`AddCar()`方法并计算它被调用的次数`AddCars()`。我使用的模拟库允许我创建 CarManager 的模拟并仅模拟`AddCar()`方法而不模拟`AddCars()`. 然后你的单元测试可以设置它期望`AddCar()`被调用的次数，你可以从传入的汽车列表的大小中知道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-19T11:28:13.103

单元测试应该只关注其对应的被测类。类的所有不属于同一类型的属性都应该被模拟。

假设您有一个使用某种数据访问对象（例如 CarPlatesDAO）的类 (CarRegistry)，该对象从关系数据库加载/存储车牌号。

当您测试 CarRegistry 时，您不应该关心 CarPlateDAO 是否正确执行；因为我们的 DAO 有它自己的单元测试。

您只需创建行为类似于 DAO 并根据预期行为返回正确或错误值的模拟。您将此模拟 DAO 插入您的 CarRegistry 并仅测试目标类，而不关心所有聚合类是否为“绿色”。

模拟允许分离可测试的类并更好地关注特定功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T12:03:17.940

在对 AddCar 类进行单元测试时，创建将运行每个代码路径的测试。如果 _authorizationManager.GetUsername() 可以抛出异常，请创建一个测试，该对象的模拟将在其中抛出。顺便说一句：不要抛出或捕获 Exception 的实例，而是派生一个有意义的 Exception 类。

对于 AddCars 方法，您绝对应该调用 AddCar。但是您可能会考虑将 AddCar 设为虚拟并覆盖它只是为了测试它是否被列表中的所有汽车调用。

有时您必须更改类设计以实现可测试性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-29T14:22:23.710

> 我是否应该对 AddCar() 进行多项测试，例如
> 
> AddCarTest() AddCarTestAuthorizationManagerException() AddCarTestCarAccessorNoId() AddCarTestCarAccessorException()

绝对地！这告诉你有价值的信息

> 对于 AddCars()，我是否应该重复所有以前的测试，因为 AddCars() 调用 AddCar() - 似乎在重复自己？我不应该从 AddCars() 调用 AddCar() 吗？

从 AddCars 调用 AddCar 是个好主意，它避免了违反 DRY 原则。同样，您应该重复测试。这样想 -*您已经为 AddCar 编写了测试*，因此在测试 AddCards 时，您可以*假设 AddCar 执行它在锡上所说的那样*。

让我们这样说吧——想象一下 AddCar 属于不同的类。您将不了解授权管理器。**在不**知道 AddCar 必须做什么的情况下测试 AddCars 。

对于 AddCars，您需要测试所有正常的边界条件（空列表是否有效等）。您可能不需要测试 AddCar 引发异常的情况，因为您没有尝试在 AddCars 中捕获它。

# asp.net - 计算 WEB 服务器 (ASP.NET) 上某个文件夹中的图像

> ID：101156
> 
> 赞同：0
> 
> 时间：2008-09-19T11:18:32.110
> 
> 标签：asp.net

我需要计算并检查在文件夹 od Web 服务器中放置了多少图像。示例-图像从 中获取名称`user_id`，例如我有`user_id 27`，我的图像是：

```
27_1.jpg, 27_2.jpg, 27_3.jpg, ... 
```

如何检查并写入数据库这个东西？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-19T11:36:03.660

一旦你知道你的路径，你就可以使用 IO.Directory.GetFiles() 方法。

```
IO.Directory.GetFiles("\translated\path","27_*.jpg").Count() 
```

会给你你正在寻找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-19T11:38:15.183

使用 System.IO 命名空间，你可以做这样的事情

```
public File[] GetUserFiles(int userId)
{
   List<File> files = new List<File>();

   DirectoryInfo di = new DirectoryInfo(@"c:\folderyoulookingfor");
   foreach(File f in di.GetFiles())
   {
      if(f.ToString().StartsWith(userId.ToString()))
         files.Add(f);
   }
   return file.ToArray();
} 
```

# c# - JSON 和 ASP.NET MVC

> ID：101162
> 
> 赞同：15
> 
> 时间：2008-09-19T11:20:08.363
> 
> 标签：c#, asp.net-mvc, ajax, json

如何通过 AJAX 调用使用 ASP.NET MVC 将序列化的 JSON 对象返回到客户端？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-09-19T11:47:35.793

从控制器你可以只返回一个 JsonResult：

```
public ActionResult MyAction()
{
    ... // Populate myObject
    return new JsonResult{ Data = myObject };
} 
```

当然，Ajax 调用的形式取决于您使用的库。使用 jQuery 会是这样的：

```
$.getJSON("/controllerName/MyAction", callbackFunction); 
```

其中`callbackFunction`接受一个参数，该参数是来自 XHR 请求的数据。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-19T15:16:59.253

根据您的语法偏好，以下内容也适用：

```
public ActionResult MyAction()
{
    return Json(new {Data = myObject});
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-08T09:22:14.677

这是用于了解我们如何在 MVC 控制器中使用 JsonResults 的小代码块。

```
 public JsonResult ASD()
    {
    string aaa = "Hi There is a sample Json";
    return Json(aaa);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-23T03:22:47.440

也可以 System.Web.Script.Serialization；如下

```
using System.Web.Script.Serialization;

public ActionResult MyAction(string myParam)
{

    return  new JavaScriptSerializer().Serialize(myObject);
} 
```

阿贾克斯

```
$.ajax({
    type: 'POST',
    url: '@Url.Action("MyAction","MyMethod")',
    dataType: 'json',
    contentType: "application/json; charset=utf-8",
    data: JSON.stringify({ "myParam": "your data" }),
    success: function(data)
    {
        console.log(data)
    },
    error: function (request, status, error) {

    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-04T06:05:15.580

如果您需要发送 JSON 以响应 GET，则需要使用 JsonRequestBehavior.AllowGet 明确允许该行为。

```
public JsonResult Foo()
{
    return Json("Secrets", JsonRequestBehavior.AllowGet);
} 
```

# sql-server - SQL Server 2005 全文索引阻止备份

> ID：101168
> 
> 赞同：0
> 
> 时间：2008-09-19T11:20:31.030
> 
> 标签：sql-server, backup, full-text-search

每当我尝试备份数据库时，它会一直运行到 90% 并卡在那里，直到我手动杀死（因为如果我尝试停止它不会停止）msftesql 进程。

这显然意味着在全文索引和备份过程之间产生了冲突。

那么，你见过这样的事情吗？如果没有，您将如何调试此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-19T12:25:54.313

第一个也是明显的调试点是禁用全文索引并尝试再次备份数据库。如果它确实进行了备份，那么您就知道 FTS 是问题所在。如果没有，那么您还有另一个问题要查找。

我还会检查 SQL 日志和事件查看器，看看是否有任何有用的信息。

最后，如果您在备份期间对服务器有实际的物理访问权限，请听并查看磁盘在备份过程中是否发出任何有趣的噪音，以表明某种磁盘故障。

我可以说我从来没有让 FTS 阻止备份的发生，但这并不意味着它不会发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T21:51:23.403

刷新全文索引的作业什么时候运行？也许它正在尝试在备份运行的同时重新填充这些索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-07-18T23:17:15.203

我也有同样的问题。活动监视器显示备份作业具有等待类型 MSSEARCH

运行时手动填充索引，它会连续几天挂起，直到我强制停止它或重新启动服务。过去需要几分钟才能填充。

# .net - .Net 中有类似 zip 的方法吗？

> ID：101174
> 
> 赞同：13
> 
> 时间：2008-09-19T11:21:57.657
> 
> 标签：.net, python, list, iteration

在 Python 中有一个非常简洁的函数被调用`zip`，它可以用来同时遍历两个列表：

```
list1 = [1, 2, 3]
list2 = ["a", "b", "c"]
for v1, v2 in zip(list1, list2):
    print v1 + " " + v2 
```

上面的代码应该产生以下内容：

```
1个
2 乙
3℃
```

我想知道.Net中是否有类似的方法？我正在考虑自己编写它，但如果它已经可用，那就没有意义了。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-09-19T11:34:43.540

[更新：它在 C# 4 中作为System.Linq.Enumerable.Zip 方法](https://msdn.microsoft.com/en-us/library/vstudio/dd267698(v=vs.110).aspx)内置

这是一个 C# 3 版本：

```
IEnumerable<TResult> Zip<TResult,T1,T2>
    (IEnumerable<T1> a,
     IEnumerable<T2> b,
     Func<T1,T2,TResult> combine)
{
    using (var f = a.GetEnumerator())
    using (var s = b.GetEnumerator())
    {
        while (f.MoveNext() && s.MoveNext())
            yield return combine(f.Current, s.Current);
    }
} 
```

放弃了 C# 2 版本，因为它显示了它的年龄。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-19T11:35:28.233

据我所知没有。我为自己写了一个（以及一些其他有用的扩展，并将它们放在 Codeplex 上的一个名为[NExtension的项目中。](http://www.codeplex.com/nextension)

显然 .NET 的并行扩展具有 Zip 功能。

这是 NExtension 的简化版本（但请查看更多有用的扩展方法）：

```
public static IEnumerable<TResult> Zip<T1, T2, TResult>(this IEnumerable<T1> source1, IEnumerable<T2> source2, Func<T1, T2, TResult> combine)
{
    using (IEnumerator<T1> data1 = source1.GetEnumerator())
    using (IEnumerator<T2> data2 = source2.GetEnumerator())
        while (data1.MoveNext() && data2.MoveNext())
        {
            yield return combine(data1.Current, data2.Current);
        }
} 
```

用法：

```
int[] list1 = new int[] {1, 2, 3};
string[] list2 = new string[] {"a", "b", "c"};

foreach (var result in list1.Zip(list2, (i, s) => i.ToString() + " " + s))
    Console.WriteLine(result); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-19T11:31:17.883

不，.NET 中没有这样的功能。你已经推出了自己的。请注意，C# 不支持元组，因此也缺少类似 python 的语法糖。

你可以使用这样的东西：

```
class Pair<T1, T2>
{
    public T1 First { get; set;}
    public T2 Second { get; set;}
}

static IEnumerable<Pair<T1, T2>> Zip<T1, T2>(IEnumerable<T1> first, IEnumerable<T2> second)
{
    if (first.Count() != second.Count())
        throw new ArgumentException("Blah blah");

    using (IEnumerator<T1> e1 = first.GetEnumerator())
    using (IEnumerator<T2> e2 = second.GetEnumerator())
    {
        while (e1.MoveNext() && e2.MoveNext())
        {
            yield return new Pair<T1, T2>() {First = e1.Current, Second = e2.Current};
        }
    }
}

...

var ints = new int[] {1, 2, 3};
var strings = new string[] {"A", "B", "C"};

foreach (var pair in Zip(ints, strings))
{
    Console.WriteLine(pair.First + ":" + pair.Second);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-19T11:55:09.847

F# 中也有一个：

让 zipped = Seq.zip firstEnumeration secondEnumation

# .net - 哪个是最好的 .Net XML-RPC 库？

> ID：101180
> 
> 赞同：9
> 
> 时间：2008-09-19T11:24:36.323
> 
> 标签：.net, xml-rpc

我需要从 .NET 2.0 客户端与 XML-RPC 服务器通信。你能推荐任何图书馆吗？

编辑：尝试过 XML-RPC.Net，我喜欢它生成动态代理的方式，它非常简洁。不幸的是，与往常一样，事情并非如此简单。我正在访问一个 XML-RPC 服务，该服务使用在方法名称中包含对象名称的非正统技术，如下所示：

```
object1.object2.someMethod(string1) 
```

这意味着我不能使用属性来设置我的方法的名称，因为它们直到运行时才知道。如果您开始尝试更接近原始调用，XML-RPC.Net 开始变得非常混乱。

所以，任何人都知道一个简单直接的 XML-RPC 库，它会让我做（伪代码）：

```
x = new xmlrpc(host, port)
x.makeCall("methodName", "arg1"); 
```

我在 Codeproject 上看过 Michael 的一个东西，但是没有单元测试，代码看起来很糟糕。

除非有人有更好的主意，否则我将不得不自己开始一个开源项目！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-17T16:01:48.780

如果方法名称发生了变化（即方法签名是静态的），XML-RPC.NET 可以为您处理。这[在常见问题解答中](http://xml-rpc.net/faq/xmlrpcnetfaq.html#2.23)得到解决，并指出“但是，有一些 XML-RPC API 需要在运行时动态生成方法名称......”来自常见问题解答：

```
ISumAndDiff proxy = (ISumAndDiff)XmlRpcProxyGen.Create(typeof(ISumAndDiff));
proxy.XmlRpcMethod = "Id1234_SumAndDifference"
proxy.SumAndDifference(3, 4); 
```

这会生成一个实现指定接口的 XmlRpcProxy。设置 XmlRpcMethod 属性会导致 methodCalls 使用新的方法名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-19T11:30:58.603

我前段时间使用了来自[www.xml-rpc.net](http://www.xml-rpc.net/)的库并取得了一些成功，并且可以推荐它——它确实感觉设计和功能都很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-11-28T19:38:45.550

I had also tried to run [www.xml-rpc.net](http://www.xml-rpc.net/) with [Mono](http://www.mono-project.com/Main_Page) on Windows XP and it worked in Mono .NET Runtime also properly. Just for information for everybody.

# sharepoint - 苔藓 2007 爬行

> ID：101182
> 
> 赞同：3
> 
> 时间：2008-09-19T11:25:07.260
> 
> 标签：sharepoint, search

我试图让爬行在我拥有的两个独立农场上工作，但不能让它在任何一个上工作。它们都有两个 WFE，另外还有一个配置为索引服务器的 WFE。还有一台专用于查询的服务器和两台用于数据库的群集 SQL 2005 后端服务器。我使用搜索引擎的解决方案找到了至少 50 个不同的网站，但均未成功。我已将我的 Web 应用程序配置（扩展）为使用[http://servername:12345](http://servername:12345)作为默认区域，并使用[http://abc.companyname.com](http://abc.companyname.com)作为自定义区域和 Intranet 区域。当我将其中的每一个都输入到内容源中然后尝试运行爬网时，我在爬网日志中收到了几个错误：

[http://servername:12345](http://servername:12345)返回：
“无法连接到服务器。请确保该站点可访问。”

[http://abc.companyname.com](http://abc.companyname.com)返回：
“已被收集者删除。（包含此项目的起始地址或内容源已被删除，因此该项目已被删除。）”

但是，我可以单击两个 URL，并且可以访问该页面。

有任何想法吗？

* * *

更多信息：

可以这么说，我把石板擦干净了，然后又跑了一次以提供更新的样本。

我的内容来源是这样的：

[http://servername:33333](http://servername:33333)
[http://sharepoint.portal.fake.com](http://sharepoint.portal.fake.com)
sps3://servername:33333

我当前的爬网日志错误是：

sps3://servername:33333
PortalCrawl Web 服务中的错误。

[http://servername:33333/mysites](http://servername:33333/mysites)
该 URL 的内容被服务器排除，因为它是无索引属性。

[http://servername:33333/mysites 已](http://servername:33333/mysites)
爬取

sts3://servername:33333/contentdbid={62a647a... 已
爬取

sts3://servername:33333 已
爬取

[http://servername:33333 已](http://servername:33333)
爬取

[http://sharepoint.portal.fake.com](http://sharepoint.portal.fake.com)
爬虫无法与服务器通信。检查服务器是否可用以及防火墙访问配置是否正确。

我仔细检查了上面的错别字，我没有看到任何错别字，所以这应该是一个准确的反映。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-06T13:05:29.847

要记住的一件事是爬网 SharePoint 网站不同于爬网文件共享或非 SharePoint 网站。

其他一些快速指示：

*   sps3: 协议用于为人物搜索抓取用户配置文件。在您准备好使用用户配置文件之前，您可以忽略爬虫所说的任何内容。
*   您的爬网帐户应该可以访问您的整个农场。如果您看到权限错误，请查找告诉您如何重置爬网帐户的知识库文章（这是一个特定的 stsadm.exe 命令）。如果您尝试爬取另一个场的内容，那么您将不得不采取其他措施来授予您的爬取帐户访问权限。我认为这是你目前最大的问题。
*   爬虫（从索引服务器运行）将尝试访问公共 URL。我以前遇到过服务器间通信问题；确保所有三台服务器都可以相互ping通，并确保索引服务器可以访问公共URL（在索引服务器上打开IE并查看）。如果遇到问题，是时候清理索引服务器的主机文件了。无论如何，这都是 SharePoint 为您所做的事情，所以不要觉得这样做太糟糕了。如果您设置了除集成 Windows 身份验证之外的任何内容，则必须更加努力地让您的爬虫工作。

无论如何，回复中有很多来回，所以我只是在外面提出一堆建议，也许其中一个是目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-02T18:43:32.023

我对你的农场拓扑有点困惑。仅作为 WFE 安装的机器不能作为索引器。安装为“完整”的机器可以是索引器、查询器和/或 wfe...

此外，您可能不想更改默认内容访问帐户，而是添加爬网规则（一旦一切正常运行）

您能否查看索引器上的 %commonprogramfiles%/microsoft shared/web server extensions/12/logs 中是否有任何有用的信息？

日志文件可能有点冗长，您可以搜索“started”或“full”，这通常会让您找到日志中开始爬网的行。

此外，在您的 sql 机器上，您可能能够从 MSScrawlurlhistory 表中获取更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-03T17:54:52.013

能否为[http://www.cnn.com](http://www.cnn.com)创建内容源并开始全爬？你有同样的错误吗？

此外，我们可能希望将此离线，如果您想这样做，请告诉我。

我不确定是否有办法通过 stackoverflow 发送私人消息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-19T16:35:52.650

听起来，您的大多数问题都与 Kerberos 有关。如果您没有应用基础架构更新，那么 Sharepoint 将无法使用 kerberos 身份验证访问具有非默认 (80/443) 端口的网站。这也是为什么（我敢打赌）当服务器 5 位于服务器 4 上时，您无法从服务器 5 访问 CA。如果您没有正确设置 SPN，则只能从安装它的计算机访问 CA。如果您使用端口 80 作为默认 url 安装了 Sharepoint，您就可以毫无障碍地进行本地 sharepoint 爬网。但是根据设计，本地共享点站点抓取使用默认 url 来访问共享点站点。查看[http://codefrob.spaces.live.com/blog/cns!7C69E7B2271B08F6!363.entry](http://codefrob.spaces.live.com/blog/cns!7C69E7B2271B08F6!363.entry)了解更多关于如何获取 Kerberos &

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T03:59:23.130

在“服务器上的服务”部分检查搜索爬网帐户的属性，以确保它已设置，并且它有权访问这些站点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-08T07:48:34.823

感谢您的新输入！

所以我从周末回来，我想仔细阅读你的建议并尝试每一个，然后报告它们是如何不起作用的，然后发布我得到的结果。不过，有趣的事情发生了。

我去了我的索引器 (servername5) 并尝试从 Internet Explorer 连接到 Central Admin 和主门户。都没有奏效。所以我在索引器上进入 IIS，尝试从 IIS 中浏览到主门户。那也不起作用，我收到一个错误，告诉我其他东西正在使用该端口。所以我从以前的版本中看到了我的旧网站，我从 IIS 中删除了它以及相应的应用程序池。然后我从新版本启动了网站的应用程序池并浏览到该网站。成功。然后我在自己的 PC 上从浏览器浏览到该网站。又成功了。然后我通过完整的 URL 而不是服务器名进行了爬网，如下所示：

[http://sharepoint.portal.fake.com](http://sharepoint.portal.fake.com)

又成功了。它爬取了整个门户，包括我想要的子站点。“索引中的项目”快速填充，我可以说我正在滚动。

我仍然无法从 servername5 访问托管在 servername4 上的 Central Admin 站点。我不知道为什么不，但我不知道这在这一点上很重要。

这让我何去何从？解决方法是什么？

我仍然不确定。也许是重建。也许一旦我重建了服务器场，我就拥有了让它工作所需的一切，但它只是无法工作，因为以前的网站仍在 IIS 中。（有趣的是，卸载 SharePoint 有多么草率。手动删除内容数据库、网站和应用程序池似乎是必要的，而且可能不应该是这种情况。）

无论如何，它现在正在我的“测试”农场上工作，所以关键是让它在生产农场上工作。我希望在这次经历之后它不会那么困难。

感谢大家的帮助！

# sql - 如何确认数据库是 Oracle 以及它使用 SQL 的版本？

> ID：101184
> 
> 赞同：172
> 
> 时间：2008-09-19T11:27:01.467
> 
> 标签：sql, oracle

我正在为应用程序构建安装程序。用户可以选择他们配置的数据源并指定它是什么类型的数据库。我想确认数据库类型确实是 Oracle，如果可能，通过向数据源发送 SQL 语句来确认它们正在运行的 Oracle 版本。

* * *

## 回答 #1

> 赞同：295
> 
> 时间：2008-09-19T11:29:06.907

运行此 SQL：

```
select * from v$version; 
```

你会得到如下结果：

```
BANNER
----------------------------------------------------------------
Oracle Database 10g Release 10.2.0.3.0 - 64bit Production
PL/SQL Release 10.2.0.3.0 - Production
CORE    10.2.0.3.0      Production
TNS for Solaris: Version 10.2.0.3.0 - Production
NLSRTL Version 10.2.0.3.0 - Production 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2008-09-19T11:41:21.830

两种方法：

```
select * from v$version; 
```

会给你：

```
Oracle Database 11g Enterprise Edition Release 11.1.0.6.0 - 64bit Production
PL/SQL Release 11.1.0.6.0 - Production
CORE 11.1.0.6.0 Production
TNS for Solaris: Version 11.1.0.6.0 - Production
NLSRTL Version 11.1.0.6.0 - Production 
```

或[确定您的 Oracle 数据库软件版本](https://docs.oracle.com/database/121/ADMIN/dba.htm#ADMIN11032)：

```
select * from product_component_version; 
```

会给你：

```
PRODUCT VERSION STATUS
NLSRTL  11.1.0.6.0  Production
Oracle Database 11g Enterprise Edition  11.1.0.6.0  64bit Production
PL/SQL  11.1.0.6.0  Production
TNS for Solaris:    11.1.0.6.0  Production 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2011-11-15T11:35:42.180

```
SQL> SELECT version FROM v$instance;
VERSION
-----------------
11.2.0.3.0 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-09-19T11:38:44.637

您可以使用

```
SELECT * FROM v$version; 
```

或者

```
SET SERVEROUTPUT ON
EXEC dbms_output.put_line( dbms_db_version.version ); 
```

如果你不想解析 v$version 的输出。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-04-11T01:33:54.977

如果您的实例已关闭，您将在 alert.log 中查找版本信息

或者另一种粗略的方法是查看 Oracle 二进制文件，如果 DB 托管在 Linux 上，请尝试使用 Oracle 二进制文件上的字符串。

```
strings -a $ORACLE_HOME/bin/oracle |grep RDBMS | grep RELEASE 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-05-03T07:23:32.013

对于 Oracle 使用：

```
Select * from v$version; 
```

对于 SQL 服务器使用：

```
Select @@VERSION as Version 
```

对于 MySQL 使用：

```
Show variables LIKE "%version%"; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-10-13T08:42:45.790

检查 Oracle 数据库版本的方法有多种。最简单的方法是运行以下 SQL 查询来检查[Oracle 版本](https://orahow.com/oracle-plsql-checking-oracle-version-information/)。

```
SQL> 选择 * FROM PRODUCT_COMPONENT_VERSION;
```

```
SQL> SELECT * FROM v$version; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-04T18:15:38.450

以下 SQL 语句：

```
select edition,version from v$instance 
```

返回：

*   数据库版本，例如。“XE”
*   数据库版本，例如。“12.1.0.2.0”

（当然需要在 v$instance 视图上选择权限）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-16T15:08:18.817

我们可以使用以下方法来获取 Oracle 的版本号。

方法编号：1

```
set serveroutput on;
BEGIN 
DBMS_OUTPUT.PUT_LINE(DBMS_DB_VERSION.VERSION || '.' || DBMS_DB_VERSION.RELEASE); 
END; 
```

方法编号：2

```
SQL> select *
  2  from v$version; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-09-15T16:01:21.517

这将从 Oracle 10 开始工作

```
select version
      , regexp_substr(banner, '[^[:space:]]+', 1, 4) as edition 
from    v$instance
     ,  v$version where regexp_like(banner, 'edition', 'i'); 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-06-06T15:38:18.447

这是一个简单的函数：

```
CREATE FUNCTION fn_which_edition
        RETURN VARCHAR2
    IS

    /*

        Purpose: determine which database edition

        MODIFICATION HISTORY
        Person      Date        Comments
        ---------   ------      -------------------------------------------
        dcox        6/6/2013    Initial Build

    */

    -- Banner
    CURSOR c_get_banner
    IS
        SELECT banner
          FROM v$version
         WHERE UPPER(banner) LIKE UPPER('Oracle Database%');

    vrec_banner c_get_banner%ROWTYPE; -- row record
    v_database VARCHAR2(32767); --

BEGIN
    -- Get banner to get edition
    OPEN c_get_banner;
    FETCH c_get_banner INTO vrec_banner;
    CLOSE c_get_banner;

    -- Check for Database type
    IF INSTR( UPPER(vrec_banner.banner), 'EXPRESS') > 0
    THEN
        v_database := 'EXPRESS';
    ELSIF INSTR( UPPER(vrec_banner.banner), 'STANDARD') > 0
    THEN
        v_database := 'STANDARD';
    ELSIF INSTR( UPPER(vrec_banner.banner), 'PERSONAL') > 0
    THEN
        v_database := 'PERSONAL';
    ELSIF INSTR( UPPER(vrec_banner.banner), 'ENTERPRISE') > 0
    THEN
        v_database := 'ENTERPRISE';
    ELSE
        v_database := 'UNKNOWN';
    END IF;

    RETURN v_database;
EXCEPTION
    WHEN OTHERS
    THEN
        RETURN 'ERROR:' || SQLERRM(SQLCODE);
END fn_which_edition; -- function fn_which_edition
/ 
```

完毕。

# continuous-integration - Hudson FindBugs 插件：如果有问题，如何使工作失败？

> ID：101195
> 
> 赞同：2
> 
> 时间：2008-09-19T11:29:01.900
> 
> 标签：continuous-integration, hudson

我正在玩[Hudson](http://hudson-ci.org/)的精彩[FindBugs 插件](http://hudson.gotdns.com/wiki/display/HUDSON/FindBugs+Plugin)。理想情况下，如果 FindBugs 发现任何问题，我希望构建失败。这可能吗？

请不要试图告诉我“0 个警告”对于 FindBugs 是不现实的。我们已经使用 Ant 的 FindBugs 有一段时间了，我们通常会保持 0 个警告。我们通过使用一般排除过滤器和特定/目标注释来实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-26T21:59:10.277

哈德森的方式是使用不稳定的并且不会因为这样的事情而失败。但是，如果您确实希望构建失败，则应在 ant 中处理此问题。

`<findbugs ... warningsProperty="findbugsFailure"/>` `<fail if="findbugsFailure">`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-24T19:38:42.670

也许你已经看过这个选项，但是当你有超过 X 的警告时，它至少可以将你的构建设置为不稳定。在您的作业配置页面上，在您指定 findbugs 文件模式的 Findbugs 结果输入字段的正下方，应该是一个“高级”按钮。这将扩展并为您提供“不稳定阈值”以及根据警告数量更改工作的 Hudson 天气指标的健康报告。

我不希望我的构建失败，但是如果您保持 0 个警告（并且可能是 0 个测试失败），则不稳定似乎是合理的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-10T15:43:06.307

正如 Tom 所指出的，提供的方法是使用 FindBugs ant 任务的 warningsProperty。

然而，我们不喜欢粗略的控制让我们避免构建失败。所以我们编写了一个自定义 Ant 任务来解析 FindBugs 的 XML 输出。如果发现任何高优先级警告，它将设置一个 Ant 属性，如果发现任何正确性警告，它将设置一个不同的属性，如果发现任何安全警告，它将设置第三个属性，等等。这让我们无法构建 FindBugs 警告的目标子集，同时仍然生成涵盖更广泛问题的 HTML 报告。这在将 FindBugs 分析添加到现有代码库时特别有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T11:36:24.767

您不能太依赖查找错误，它只是一个专家系统，它会告诉您在运行时您的程序**可能有问题。**就我个人而言，我看到了很多由 findbugs 生成的警告，因为它无法弄清楚代码的正确性（事实上）。

例如，当您在一种方法中打开流或 jdbc 连接并在另一种方法中关闭它时，在这种情况下 findbugs 期望在同一方法中看到 close() 调用，这有时是不可能的。

# .net - 从外部触发 .NET 垃圾回收

> ID：101196
> 
> 赞同：27
> 
> 时间：2008-09-19T11:29:03.943
> 
> 标签：.net, debugging, garbage-collection, windbg

有没有办法从另一个进程或 WinDBG 内部触发 .NET 进程中的垃圾收集？

当您跨过本机/托管边界时，有托管调试助手会强制收集，并且[AQTime](http://en.wikipedia.org/wiki/AQtime)似乎有按钮建议它这样做，但我找不到任何有关如何执行此操作的文档。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-02-02T16:44:23.757

在[另一个问题](https://stackoverflow.com/a/26033289/249742)中回答：

基本上，使用[PerfView](https://github.com/Microsoft/perfview/blob/master/documentation/Downloading.md)：

```
PerfView.exe ForceGC [ProcessName | Process ID] /AcceptEULA 
```

它不适用于生产用途。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-19T12:57:38.760

嗯...有即时窗口。如果您有幸附加到该过程，我想您可以在即时窗口中手动 GC.Collect。

更大的问题：为什么要手动诱导 GC.Collect？这是一个令人讨厌的习惯，并且表明了更大的设计问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-08-28T21:47:37.430

John Cocktoastan 在 Visual Studio 中使用 GC.Collect 的答案是最好的选择。

我仍然找不到在 WinDBG 下实际进行收集的替代方法，但退后一步回到“可回收多少内存？”的问题。（请参阅我对约翰的回答的评论）我认为有一种替代方法是通过 !DumpHeap 和 !GCRoot 的某种组合使用脚本（ [PowerDBG](http://www.codeplex.com/powerdbg) ？）搜索来查找无根句柄并总计使用的空间（基本上模拟算法GC 会使用调试器）。但是自从想到这一点以来，我还没有遇到这些错误之一，因此没有尝试编写代码来做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T11:30:26.577

如果您通过远程处理公开一个函数/对象，那可以很容易地完成。

# sql - 如何确认数据库是 Postgres 以及它使用 SQL 的版本？

> ID：101198
> 
> 赞同：5
> 
> 时间：2008-09-19T11:29:11.650
> 
> 标签：sql, postgresql

我正在为应用程序构建安装程序。用户可以选择他们配置的数据源并指定它是什么类型的数据库。我想确认数据库类型确实是 Postgres，如果可能，通过向数据源发送 SQL 语句来确认它们正在运行的 Postgres 版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-19T11:33:30.157

试试这个：

```
mk=# SELECT version();
                                            version                                            
-----------------------------------------------------------------------------------------------
 PostgreSQL 8.3.3 on i486-pc-linux-gnu, compiled by GCC cc (GCC) 4.2.3 (Ubuntu 4.2.3-2ubuntu7)
(1 row) 
```

该命令也适用于 MySQL：

```
mysql> select version();
+--------------------------------+
| version()                      |
+--------------------------------+
| 5.0.32-Debian_7etch1~bpo.1-log | 
+--------------------------------+
1 row in set (0.01 sec) 
```

据我所知，sqlite 中没有版本命令。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-19T11:45:24.643

`SHOW server_version;`

（为了完整性）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-19T11:32:28.257

```
SELECT version(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-19T11:33:41.763

PostgreSQL 有一个你可以调用的 version() 函数。

```
SELECT version(); 
```

它将返回如下内容：

```
 version
-----------------------------------------------------------------------------------------------
PostgreSQL 8.3.3 on i486-pc-linux-gnu, compiled by GCC cc (GCC) 4.2.3 (Ubuntu 4.2.3-2ubuntu7) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-19T11:34:10.250

这取决于数据库，如果此函数存在于另一个 dbms 中，则在输出中表示 PostgreSQL

```
select version() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T11:50:38.343

有趣... version() 是一个函数！我想知道为什么？在不同的输入/情况下，版本不会改变或返回不同的值。

很好奇，因为我记得过去在 Sybase 中它曾经是一个全局变量，并且可以通过执行“select @@version”来找到版本

# ruby - 是否有比 Net::HTTP 更用户友好的替代方案来与 REST API 交互？

> ID：101212
> 
> 赞同：19
> 
> 时间：2008-09-19T11:32:44.747
> 
> 标签：ruby, http, rest

Net::HTTP 对于标准用例可能相当麻烦！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-09-19T13:06:31.033

如果您只需要处理 REST，那么[rest-client](https://github.com/rest-client/rest-client)库非常棒。

如果您使用的 API 不是完全 RESTful——或者即使它们是[——HTTParty](http://railstips.org/2008/7/29/it-s-an-httparty-and-everyone-is-invited)真的值得一试。它简化了 REST API 以及非 RESTful Web API 的使用。查看此代码（从上面的链接复制）：

```
require 'rubygems'
require 'httparty'

class Representative
  include HTTParty
  format :xml

  def self.find_by_zip(zip)
    get('http://whoismyrepresentative.com/whoismyrep.php', :query => {:zip => zip})
  end
end

puts Representative.find_by_zip(46544).inspect
# {"result"=>{"n"=>"1", "rep"=>{"name"=>"Joe Donnelly", "district"=>"2", "office"=>"1218 Longworth", "phone"=>"(202) 225-3915", "link"=>"http://donnelly.house.gov/", "state"=>"IN"}}} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-19T12:45:10.537

[rest-open-uri](http://rubyforge.org/projects/rest-open-uri/)是在[RESTful Web 服务](http://oreilly.com/catalog/9780596529260/)一书中大量使用的一种。

```
gem install rest-open-uri 
```

示例用法：

```
response = open('https://wherever/foo',
                :method => :put,
                :http_basic_authentication => ['my-user', 'my-passwd'],
                :body => 'payload')

puts response.read 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-14T11:04:55.067

[我是rest-client](https://github.com/rest-client/rest-client)的忠实粉丝，它在不妨碍您的实施的情况下足够有用。它智能地处理异常，并支持开箱即用的日志记录和身份验证。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T22:47:07.393

[HyperactiveResource](http://github.com/lukegalea/hyperactiveresource/wikis)还处于起步阶段，但看起来还不错。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T11:55:53.637

这就是我使用的：[http](http://rubyforge.org/projects/restful-rails/) ://rubyforge.org/projects/restful-rails/ 。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-03T20:50:25.567

看看 github 上 asplake 的（即我的）describe_routes 和 path-to projects/gems（我似乎无法从这里链接到。Path-to 使用 HTTParty，而不是像其他的一些硬编码 URL这个问题的答案, 它使用 describe_routes 提供的元数据. 在 positiveincline.com 上有几篇描述这些宝石的文章, 其中与您的问题最相关的是[Nested path-to/ describe_routes 和 HTTParty](http://positiveincline.com/?p=173) .

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-07-02T17:56:13.987

好吧，只要你在 Rails 上，总会有 ActiveResource :)

# excel - 以编程方式排除 olap pivot 中的页面项目

> ID：101223
> 
> 赞同：0
> 
> 时间：2008-09-19T11:34:44.350
> 
> 标签：excel, pivot-table, olap, vba

我在 olap 多维数据集上有一个数据透视表。我可以进入页面字段并手动取消选择多个项目。如何根据需要排除的项目列表在 VBA 中执行此操作？（注意我没有相应的我需要的物品清单）

我知道如何以其他方式排除这些项目，例如通过更改基础查询。我特别想复制取消选择数据透视中项目的用户操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-14T12:43:23.417

您不必运行 MDX 查询来列出维度的成员，您可以在 VBA 中查看多维数据集对象的属性。从这个开始，看看它会把你带到哪里！

设置 oCat = 新 ADOMD.Catalog

例如循环遍历：oCat.CubeDefs(sCube).Dimensions(3).Hierarchies(0).Levels(2).Members(i)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-19T12:34:09.643

我很抱歉这个例子是用 C# 编写的，但我真的不知道足够的 VBA 来翻译它（也许有人可以编辑这个条目并在下面添加它）。

你指的是这样的事情吗？

```
((MOE.PivotField)pivotTableObject.PivotFields("[NAME]")).Delete(); 
```

其中 MOE 是 Microsoft.Office.Interop.Excel 命名空间，[NAME] 是您要删除的字段的名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T15:20:02.147

我找到了一个不完全令人满意的解决方案。在单独的 MDX 查询中，我检索了与页面字段对应的维度的所有成员。我还建立了要排除的项目的字典。然后我像这样遍历成员：

```
PivotField.CubeField.EnableMultiplePageItems = True
firstTime = True
For Each member In dimensionMembers
    If Not HiddenMembers.Exists(member) Then
        'firstTime = true is the equivalent of unchecking 
        ' the root node of the items treeview
        PivotField.CubeField.AddPageItem "[Dimension].[" & member & "]", firstTime
        firstTime = False
    End If
Next 
```

我说不满意是因为每次调用 AddPageItem 都会触发对 Analysis Server 的查询，使其速度慢得不切实际。它只是感觉不对。

# c# - 让多个程序集访问同一个文本文件

> ID：101238
> 
> 赞同：0
> 
> 时间：2008-09-19T11:38:23.717
> 
> 标签：c#, .net, file, file-io, filesystems

我在同一个 c#/.net 解决方案中有许多程序集/项目。使用 Web 应用程序 gui 的人需要保存设置，然后控制台应用程序和一些测试项目需要访问同一个文件。我应该把文件放在哪里以及如何访问它？

我尝试过使用“AppDomain.CurrentDomain.BaseDirectory”，但最终对于我的程序集有所不同。“System.Reflection.Assembly.Get*Assembly.Location”也无法满足我的需求。

也许这不是我应该在文件中而是在数据库中的东西？但是对于几行配置来说，这样做感觉太复杂了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-19T11:55:22.047

把文件放进去

```
 Path.Combine(
        Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData),
        "[Company Name]\[Application Suite]"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T14:28:01.197

就个人而言，我会利用数据库，因为替代方案要么是配置问题，要么是比它的价值更麻烦。

您*可以*将每个应用程序配置为指向同一个文件，但如果您想移动文件，这将成为问题。或者您可以编写一个服务来管理文件并将其公开给客户端，但此时您也可以只使用数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T11:41:18.833

是否考虑将其存储在注册表或隔离存储中？不过，不确定多个应用程序是否可以共享隔离存储。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T14:05:38.410

项目可以有构建事件——为什么不添加一个构建后事件来将文件复制到所有需要的位置？

# linux - 什么命令控制 /etc/rc*.d 在 Redhat/CentOS 上的行为？

> ID：101244
> 
> 赞同：0
> 
> 时间：2008-09-19T11:38:58.957
> 
> 标签：linux, system, centos, redhat, init

```
/etc/init.d/*

/etc/rc{1-5}.d/* 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-19T11:40:36.853

`/sbin/chkconfig`— 该`/sbin/chkconfig`实用程序是用于维护`/etc/rc.d/init.d/`目录层次结构的简单命令行工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-09T08:06:47.390

正如 px 所提到的，管理从 /etc/init.d 到 /etc/rc?.d 的脚本链接的正确方法是 /sbin/chkconfig 命令。

脚本应该在顶部附近有注释，指定 chkconfig 如何处理它们。例如，/etc/init.d/httpd：

```
# chkconfig: - 85 15
# description: Apache is a World Wide Web server.  It is used to serve \
#          HTML files and CGI.
# processname: httpd
# config: /etc/httpd/conf/httpd.conf
# config: /etc/sysconfig/httpd
# pidfile: /var/run/httpd.pid 
```

此外，使用 /sbin/service 命令在从 shell 运行时启动和停止服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T11:53:34.640

一言以蔽之：`init`。

此进程的 pid 始终为 1，并根据`/etc/init.d`.

init 通常用一个数字作为参数调用，例如`init 3`这将使它运行`rc3.d`文件夹的内容。

有关更多信息：[init 的 Wikipedia 文章](http://en.wikipedia.org/wiki/Init)。

编辑：忘了提，真正控制你开始的 rc 级别是你的引导加载程序。

# vim - 在 Vim 中，有没有办法在搜索行中粘贴文本？

> ID：101258
> 
> 赞同：118
> 
> 时间：2008-09-19T11:47:54.980
> 
> 标签：vim

我想搜索`$maximumTotalAllowedAfterFinish`并将其替换为`$minimumTotalAllowedAfterFinish`. 而不是输入长文本：

```
:%s/$maximumTotalAllowedAfterFinish/$minimumTotalAllowedAfterFinish/g 
```

有没有办法将这些长变量名复制到搜索行中，因为在命令行上我不能输入“ `p`”来粘贴？

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2008-09-19T11:56:42.213

您可以通过键入 来插入编号或命名寄存器的内容`CTRL``R` ``{0-9a-z"%#:-=.}``。通过键入`CTRL-R` `CTRL-W`，您可以将当前单词粘贴到光标下。看：

```
:he cmdline-editing 
```

了解更多信息。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2008-09-19T12:00:34.980

照常复制，然后`Ctrl``R``"`粘贴。还有许多其他`Ctrl``R`快捷方式（例如，计算器、当前文件名、剪贴板内容）。键入`:help c_<C-R>`以查看完整列表。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2017-04-20T18:33:24.467

复制：
1）`v`（或用鼠标突出显示，在视觉模式下）
2）`y`（猛拉）

粘贴：
1）`/`（搜索模式）
2）`Ctrl + R + 0`（从抽出的寄存器中粘贴）

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2008-09-19T11:54:00.333

键入`q:`以在新缓冲区中进入历史编辑模式。然后编辑缓冲区的最后一行并按`Enter`执行它。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-19T13:06:45.540

或者在 vim 缓冲区中创建命令，例如在缓冲区中键入它：

```
s/foo/bar/gci 
```

并将其复制到一个命名寄存器，使用`"ayy`（如果光标在该行上！）。

现在你可以`a`从 Vim 的 Ex 命令行执行 " " 寄存器的内容了：

```
:[OPTIONAL_RANGE]@a 
```

我用它所有的时间。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-19T11:55:11.827

通常，您可以通过鼠标选择（可能`Ctrl``Ins`或`Ctrl``C`在选择之后）然后在命令/搜索行中单击中键（或`Shift``Ins`或`Ctrl``V`）来执行此操作。

另一种方法是在文本缓冲区中写入命令/搜索行，并在文本缓冲区中进行所有可用的编辑，从`:`and all 开始，然后在行上执行以下操作：

```
"add@a 
```

它将整个命令行存储在 buffer`a`中，然后执行它。但是，它不会存储在命令历史记录中。

尝试在文本缓冲区中创建以下行作为上述按键的示例：

```
:%s/$maximumTotalAllowedAfterFinish/$minimumTotalAllowedAfterFinish/g 
```

最后，您可以`q:`在文本缓冲区中输入进入历史编辑。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-02-09T09:21:21.947

您可以将光标放在要添加到模式中的单词上，然后按`/`或`:`进入搜索或命令模式，然后按`Ctrl``R``Ctrl``W`复制该单词。[来源](http://www.commandlinefu.com/commands/view/1870/bring-the-word-under-the-cursor-on-the-ex-line-in-vim)

# c# - 为什么 IEnumerable 上没有 ForEach 扩展方法？

> ID：101265
> 
> 赞同：436
> 
> 时间：2008-09-19T11:49:53.773
> 
> 标签：c#, .net, vb.net, extension-methods

受到另一个询问缺失`Zip`功能的问题的启发：

为什么界面上没有`ForEach`扩展方法？`IEnumerable`还是在任何地方？唯一获得`ForEach`方法的类是`List<>`. 是否有它丢失的原因，也许是性能？

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2008-09-19T12:00:44.577

语言中已经`foreach`包含一个语句，大部分时间都可以完成这项工作。

我不想看到以下内容：

```
list.ForEach( item =>
{
    item.DoSomething();
} ); 
```

代替：

```
foreach(Item item in list)
{
     item.DoSomething();
} 
```

**后者在大多数情况下**更清晰、更容易阅读，尽管打字时间可能会更长一些。

但是，我必须承认我在这个问题上改变了立场；在`ForEach()`某些情况下，扩展方法确实很有用。

以下是语句和方法之间的主要区别：

*   类型检查：foreach 在运行时完成，`ForEach()`在编译时完成（Big Plus！）
*   调用委托的语法确实简单得多：objects.ForEach(DoSomething);
*   ForEach() 可以被链接：尽管这种功能的邪恶/有用性有待讨论。

这些都是这里很多人提出的重要观点，我可以理解为什么人们缺少这个功能。我不介意微软在下一次框架迭代中添加标准的 ForEach 方法。

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2008-09-19T11:53:52.033

ForEach 方法是在 LINQ 之前添加的。如果您添加 ForEach 扩展，由于扩展方法的限制，它将永远不会为 List 实例调用。我认为没有添加它的原因是不干扰现有的。

但是，如果您真的错过了这个小功能，您可以推出自己的版本

```
public static void ForEach<T>(
    this IEnumerable<T> source,
    Action<T> action)
{
    foreach (T element in source) 
        action(element);
} 
```

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2008-10-19T17:00:08.747

您可以编写此扩展方法：

```
// Possibly call this "Do"
IEnumerable<T> Apply<T> (this IEnumerable<T> source, Action<T> action)
{
    foreach (var e in source)
    {
        action(e);
        yield return e;
    }
} 
```

**优点**

允许链接：

```
MySequence
    .Apply(...)
    .Apply(...)
    .Apply(...); 
```

**缺点**

它实际上不会做任何事情，直到你做一些事情来强制迭代。出于这个原因，它不应该被称为`.ForEach()`. 你可以写`.ToList()`在最后，或者你也可以写这个扩展方法：

```
// possibly call this "Realize"
IEnumerable<T> Done<T> (this IEnumerable<T> source)
{
    foreach (var e in source)
    {
        // do nothing
        ;
    }

    return source;
} 
```

这可能与交付的 C# 库相差太大；不熟悉您的扩展方法的读者将不知道如何处理您的代码。

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2008-10-12T10:47:42.683

[这里的讨论](http://social.msdn.microsoft.com/forums/en-US/linqprojectgeneral/thread/2dddb3b1-5ea3-41a6-880a-f994acf0a68b/)给出了答案：

> 实际上，我目睹的具体讨论确实取决于功能纯度。在表达式中，经常会假设没有副作用。拥有 ForEach 会特别引起副作用，而不仅仅是忍受它们。——基思·法默（合伙人）

基本上决定保持扩展方法在功能上“纯”。ForEach 在使用 Enumerable 扩展方法时会鼓励副作用，这不是本意。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2008-09-19T14:55:52.593

虽然我同意在大多数情况下使用内置`foreach`构造更好，但我发现在 ForEach<> 扩展上使用这种变体比`foreach`我自己在常规中管理索引要好一些：

```
public static int ForEach<T>(this IEnumerable<T> list, Action<int, T> action)
{
    if (action == null) throw new ArgumentNullException("action");

    var index = 0;

    foreach (var elem in list)
        action(index++, elem);

    return index;
} 
```

例子

```
var people = new[] { "Moe", "Curly", "Larry" };
people.ForEach((i, p) => Console.WriteLine("Person #{0} is {1}", i, p)); 
```

会给你：

```
Person #0 is Moe
Person #1 is Curly
Person #2 is Larry 
```

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2008-10-19T16:51:12.510

一种解决方法是编写`.ToList().ForEach(x => ...)`.

**优点**

易于理解 - 读者只需要知道 C# 附带的内容，而不需要任何其他扩展方法。

句法噪音非常温和（仅添加了一些无关代码）。

通常不会花费额外的内存，因为`.ForEach()`无论如何，本地人都必须实现整个集合。

**缺点**

操作顺序并不理想。我宁愿意识到一个元素，然后采取行动，然后重复。该代码首先实现所有元素，然后依次作用于它们。

如果意识到列表引发异常，您将永远无法对单个元素采取行动。

如果枚举是无限的（如自然数），那么你就不走运了。

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2008-09-19T11:58:11.353

我一直想知道自己，这就是为什么我总是随身携带这个：

```
public static void ForEach<T>(this IEnumerable<T> col, Action<T> action)
{
    if (action == null)
    {
        throw new ArgumentNullException("action");
    }
    foreach (var item in col)
    {
        action(item);
    }
} 
```

不错的小扩展方法。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2008-09-19T14:07:48.810

因此，有很多关于 ForEach 扩展方法不合适的评论，因为它不像 LINQ 扩展方法那样返回值。虽然这是一个事实陈述，但并不完全正确。

LINQ 扩展方法都返回一个值，因此它们可以链接在一起：

```
collection.Where(i => i.Name = "hello").Select(i => i.FullName); 
```

但是，仅仅因为 LINQ 是使用扩展方法实现的，并不意味着扩展方法**必须**以相同的方式使用并返回值。编写扩展方法来公开不返回值的常见功能是一种完全有效的用途。

关于 ForEach 的具体争论是，基于对扩展方法的约束（即扩展方法**永远不会**覆盖具有**相同签名**的继承方法），可能存在自定义扩展方法在所有 impelement 类上都可用的情况IEnumerable `<T`> 除了列表`<T`>。当方法开始表现不同时，这可能会导致混淆，具体取决于是否调用了扩展方法或继承方法。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2013-02-21T08:25:16.763

您可以使用 (chainable, but lazily evaluation) `Select`，首先执行您的操作，然后返回身份（或其他内容，如果您愿意）

```
IEnumerable<string> people = new List<string>(){"alica", "bob", "john", "pete"};
people.Select(p => { Console.WriteLine(p); return p; }); 
```

您需要确保它仍然被评估，无论是使用`Count()`（枚举 afaik 的最便宜操作）还是您需要的其他操作。

不过，我希望看到它被引入标准库：

```
static IEnumerable<T> WithLazySideEffect(this IEnumerable<T> src, Action<T> action) {
  return src.Select(i => { action(i); return i; } );
} 
```

然后上面的代码就变成`people.WithLazySideEffect(p => Console.WriteLine(p))`了它实际上等效于 foreach，但是惰性和可链接。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2014-01-01T20:47:15.143

请注意，**MoreLINQ** NuGet 提供了`ForEach`您正在寻找的扩展方法（以及`Pipe`执行委托并产生其结果的方法）。看：

*   [https://www.nuget.org/packages/morelinq](https://www.nuget.org/packages/morelinq)
*   [https://code.google.com/p/morelinq/wiki/OperatorsOverview](https://code.google.com/p/morelinq/wiki/OperatorsOverview)

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2008-11-01T03:48:04.943

@币币

foreach 扩展方法的真正强大之处在于`Action<>`无需在代码中添加不必要的方法即可重用。假设您有 10 个列表，并且您想对它们执行相同的逻辑，并且相应的函数不适合您的类并且没有被重用。而不是有十个 for 循环，或者一个显然是不属于的助手的通用函数，您可以将所有逻辑保存在一个地方（`Action<>`. 所以，几十行被替换为

```
Action<blah,blah> f = { foo };

List1.ForEach(p => f(p))
List2.ForEach(p => f(p)) 
```

ETC...

逻辑在一个地方，你没有污染你的班级。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2008-09-19T11:52:34.563

大多数 LINQ 扩展方法都返回结果。ForEach 不适合此模式，因为它不返回任何内容。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2008-09-19T12:06:11.067

如果你有 F#（将在 .NET 的下一个版本中），你可以使用

`Seq.iter doSomething myIEnumerable`

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2018-10-14T06:46:59.797

部分原因是语言设计者从哲学的角度不同意它。

*   没有（和测试......）一个功能比拥有一个功能要少。
*   它并不是真的更短（有一些传递函数的情况，但这不是主要用途）。
*   它的目的是产生副作用，这不是 linq 的意义所在。
*   为什么要用另一种方法来做与我们已经拥有的功能相同的事情？（foreach 关键字）

[https://blogs.msdn.microsoft.com/ericlippert/2009/05/18/foreach-vs-foreach/](https://blogs.msdn.microsoft.com/ericlippert/2009/05/18/foreach-vs-foreach/)

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-09-19T13:26:13.760

是我还是 List<T>.Foreach 几乎已经被 Linq 淘汰了。原来有

```
foreach(X x in Y) 
```

其中 Y 必须是 IEnumerable (Pre 2.0)，并实现 GetEnumerator()。如果您查看生成的 MSIL，您会发现它与

```
IEnumerator<int> enumerator = list.GetEnumerator();
while (enumerator.MoveNext())
{
    int i = enumerator.Current;

    Console.WriteLine(i);
} 
```

（有关MSIL，请参阅[http://alski.net/post/0a-for-foreach-forFirst-forLast0a-0a-.aspx ）](http://alski.net/post/0a-for-foreach-forFirst-forLast0a-0a-.aspx)

然后在 DotNet2.0 中出现了泛型和列表。在我看来，Foreach 一直是 Vistor 模式的实现，（请参阅 Gamma、Helm、Johnson、Vlissides 的设计模式）。

现在当然在 3.5 中我们可以使用 Lambda 来实现相同的效果，例如尝试 [http://dotnet-developments.blogs.techtarget.com/2008/09/02/iterators-lambda-and-linq-oh-我的/](http://dotnet-developments.blogs.techtarget.com/2008/09/02/iterators-lambda-and-linq-oh-my/)

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2008-09-19T14:12:08.877

当你想返回某些东西时，你可以使用 select 。如果不这样做，您可以先使用 ToList，因为您可能不想修改集合中的任何内容。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2009-02-01T21:02:11.483

我写了一篇关于它的博客文章：http: [//blogs.msdn.com/kirillosenkov/archive/2009/01/31/foreach.aspx](http://blogs.msdn.com/kirillosenkov/archive/2009/01/31/foreach.aspx)

如果您想在 .NET 4.0 中看到此方法，可以在这里投票： [http ://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=279093](http://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=279093)

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2009-11-11T17:04:54.820

在 3.5 中，添加到 IEnumerable 的所有扩展方法都用于 LINQ 支持（注意它们是在 System.Linq.Enumerable 类中定义的）。在这篇文章中，我解释了为什么 foreach 不属于 LINQ： [Existing LINQ extension method similar to Parallel.For?](https://stackoverflow.com/questions/317874/existing-linq-extension-method-similar-to-parallel-for/318493#318493)

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2016-02-17T12:11:38.900

我想扩展[Aku 的回答](https://stackoverflow.com/a/216668/1021134)。

如果你想调用一个方法只是为了它的副作用而不首先迭代整个可枚举，你可以使用这个：

```
private static IEnumerable<T> ForEach<T>(IEnumerable<T> xs, Action<T> f) {
    foreach (var x in xs) {
        f(x); yield return x;
    }
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-05-18T14:57:01.007

我的版本是一种扩展方法，允许您在 T 的 IEnumerable 上使用 ForEach

```
public static class EnumerableExtension
{
        public static void ForEach<T>(this IEnumerable<T> source, Action<T> action)
    {
        source.All(x =>
        {
            action.Invoke(x);
            return true;
        });
    }
} 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2008-11-11T10:45:55.363

还没有人指出 ForEach<T> 会导致编译时类型检查，其中 foreach 关键字是运行时检查的。

在代码中使用了这两种方法的地方进行了一些重构之后，我更喜欢 .ForEach，因为我必须寻找测试失败/运行时失败才能找到 foreach 问题。

# java - 有没有办法在编译时为Java定义一个常量值

> ID：101267
> 
> 赞同：13
> 
> 时间：2008-09-19T11:50:35.490
> 
> 标签：java, c++, c

当我以前用 C/C++ 编写库时，我养成了使用一种方法来返回编译日期/时间的习惯。这始终是编译到库中的，因此可以区分库的构建。我通过在代码中返回 #define 得到了这个：

C++：

```
#ifdef _BuildDateTime_
   char* SomeClass::getBuildDateTime() {
      return _BuildDateTime_;
   }
#else
   char* SomeClass::getBuildDateTime() {
      return "Undefined";
   }
#endif 
```

然后在编译时，我`Date`在构建脚本中有一个'-D_BuildDateTime_='。

有没有什么方法可以在 Java 中实现此功能或类似功能，而无需记住手动编辑任何文件或分发任何单独的文件。

我从一位同事那里得到的一个建议是让 ant 文件在类路径上创建一个文件，并将其打包到 JAR 中并由该方法读取。

类似于（假设创建的文件名为“DateTime.dat”）：

```
// I know Exceptions and proper open/closing 
// of the file are not done. This is just 
// to explain the point!
String getBuildDateTime() {
    return new BufferedReader(getClass()
            .getResourceAsStream("DateTime.dat")).readLine();
} 
```

*在我看来，这是一个 hack，并且可以被在 JAR之外*但在类路径上具有类似名称的文件的人规避/破坏。

无论如何，我的问题是是否有任何方法可以在编译时将常量注入到类中

编辑

我考虑在 JAR 中使用外部生成的文件的原因是因为这*是*一个库，并将嵌入到客户端应用程序中。这些客户端应用程序可能会定义自己的类加载器，这意味着我不能依赖标准的 JVM 类加载规则。

我个人的偏好是按照 serg10 的建议使用 JAR 文件中的日期。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-09-19T15:21:11.520

**我赞成基于标准的方法。** 将您的版本信息（以及其他有用的发布者资料，例如内部版本号、颠覆修订号、作者、公司详细信息等）放在 jar 的[Manifest File](http://java.sun.com/developer/Books/javaprogramming/JAR/basics/manifest.html)中。

**这是一个有据可查且易于理解的 Java 规范。** 强大的工具支持用于创建清单文件（例如[核心 Ant 任务](http://ant.apache.org/manual/Tasks/manifest.html)，或[maven jar 插件](http://maven.apache.org/plugins/maven-jar-plugin/)）。这些可以帮助自动设置一些属性——我已将 maven 配置为在构建时将 jar 的 maven 版本号、Subversion 修订版和时间戳放入清单中。

您可以使用标准的 java api 调用在运行时读取清单的内容 - 例如：

```
import java.util.jar.*;

...

JarFile myJar = new JarFile("nameOfJar.jar");    // various constructors available
Manifest manifest = myJar.getManifest();
Map<String,Attributes> manifestContents = manifest.getAttributes(); 
```

对我来说，这感觉像是一种更标准的 Java 方法，因此后续代码维护人员可能更容易遵循。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-09-19T12:16:40.183

我记得在一个开源项目中看到过类似的东西：

```
class Version... {
  public static String tstamp() {
    return "@BUILDTIME@";
  }
} 
```

在模板文件中。使用 Ant 的过滤副本，您可以给这个宏一个值：

```
<copy src="templatefile" dst="Version.java" filtering="true">
    <filter token="BUILDTIME" value="${build.tstamp}" />
</copy> 
```

在编译步骤之前，使用它在构建过程中创建一个 Version.java 源文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-19T12:02:38.643

AFAIK 没有办法用 javac 做到这一点。这可以使用 Ant 轻松完成——我将创建一个名为 BuildTimestamp.java 的第一类对象，并在编译时通过 Ant 目标生成该文件。

[这是一个很有帮助的 Ant 类型](http://ant.apache.org/manual/Types/filterchain.html#replacetokens)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T11:56:57.360

除非你想通过 C/C++ 预处理器运行你的 Java 源代码（这是一个 BIG NO-NO），否则使用 jar 方法。还有其他方法可以从 jar 中获取正确的资源，以确保没有人在类路径中放置重复的资源。您也可以考虑为此使用 Jar 清单。我的项目使用清单完全符合您的要求（包括构建日期、修订版本、作者等）。

你会想用这个：

```
Enumeration<URL> resources = Thread.currentThread().getContextClassLoader().getResources("META-INF/MANIFEST.MF"); 
```

这将为您提供类路径上的所有清单。您可以通过解析 URL 找出他们可以从哪个 jar 中提取。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-19T12:06:33.343

就个人而言，我会在你的 jar 中找到一个单独的属性文件，你会在运行时加载它......类加载器有一个定义的搜索文件的顺序 - 我不记得它是如何工作的，但我不记得不要认为类路径中某处具有相同名称的另一个文件可能会导致问题。

但是另一种方法是在编译之前使用 Ant 将 .java 文件复制到不同的目录中，并在适当的情况下过滤字符串常量。你可以使用类似的东西：

```
public String getBuildDateTime() {
    return "@BUILD_DATE_TIME@";
} 
```

并在您的 Ant 文件中编写一个过滤器以将其替换为构建属性。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-19T12:11:35.827

[如清单文档](http://java.sun.com/developer/Books/javaprogramming/JAR/basics/manifest.html)中所述，也许一种更符合 Java 风格的指示库版本的方法是将版本号添加到 JAR 清单中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-19T12:10:51.120

> 我从一位同事那里得到的一个建议是让 ant 文件在类路径上创建一个文件，并将其打包到 JAR 中并由该方法读取。...在我看来，这是一种黑客行为，可能会被在 JAR 之外但在类路径上具有类似名称的文件的人规避/破坏。

我不确定让 Ant 生成文件是一个非常令人震惊的 hack，如果它是一个 hack。为什么不生成一个属性文件并使用[java.util.Properties](http://java.sun.com/j2se/1.5.0/docs/api/java/util/Properties.html)来处理呢？

# python - Python的隐藏特性

> ID：101268
> 
> 赞同：1417
> 
> 时间：2008-09-19T11:50:36.317
> 
> 标签：python, hidden-features

Python 编程语言有哪些鲜为人知但有用的特性？

*   尝试将答案限制在 Python 核心。
*   每个答案一个功能。
*   给出该功能的示例和简短描述，而不仅仅是文档链接。
*   使用标题作为第一行标记要素。

## 答案的快速链接：

*   [参数拆包](https://stackoverflow.com/questions/101268/hidden-features-of-python#111176)
*   [大括号](https://stackoverflow.com/questions/101268/hidden-features-of-python#112303)
*   [链接比较运算符](https://stackoverflow.com/questions/101268/hidden-features-of-python#101945)
*   [装饰器](https://stackoverflow.com/questions/101268/hidden-features-of-python#101447)
*   [默认参数陷阱/可变默认参数的危险](https://stackoverflow.com/questions/101268/hidden-features-of-python#113198)
*   [描述符](https://stackoverflow.com/questions/101268/hidden-features-of-python#102062)
*   [字典默认`.get`值](https://stackoverflow.com/questions/101268/hidden-features-of-python#111970)
*   [文档字符串测试](https://stackoverflow.com/questions/101268/hidden-features-of-python#102065)
*   [省略号切片语法](https://stackoverflow.com/questions/101268/hidden-features-of-python/112316#112316)
*   [枚举](https://stackoverflow.com/questions/101268/hidden-features-of-python#117116)
*   [为/其他](https://stackoverflow.com/questions/101268/hidden-features-of-python#114420)
*   [作为 iter() 参数的函数](https://stackoverflow.com/questions/101268/hidden-features-of-python#102202)
*   [生成器表达式](https://stackoverflow.com/questions/101268/hidden-features-of-python#101310)
*   [`import this`](https://stackoverflow.com/questions/101268/hidden-features-of-python#101276)
*   [就地价值交换](https://stackoverflow.com/questions/101268/hidden-features-of-python#102037)
*   [列表步进](https://stackoverflow.com/questions/101268/hidden-features-of-python#101840)
*   [`__missing__`项目](https://stackoverflow.com/questions/101268/hidden-features-of-python#112286)
*   [多行正则表达式](https://stackoverflow.com/questions/101268/hidden-features-of-python#101537)
*   [命名字符串格式](https://stackoverflow.com/questions/101268/hidden-features-of-python#113164)
*   [嵌套列表/生成器推导](https://stackoverflow.com/questions/101268/hidden-features-of-python#101549)
*   [运行时的新类型](https://stackoverflow.com/questions/101268/hidden-features-of-python#108297)
*   [`.pth`文件](https://stackoverflow.com/questions/101268/hidden-features-of-python#113833)
*   [ROT13 编码](https://stackoverflow.com/questions/101268/hidden-features-of-python#1024693)
*   [正则表达式调试](https://stackoverflow.com/questions/101268/hidden-features-of-python#143636)
*   [发送到发电机](https://stackoverflow.com/questions/101268/hidden-features-of-python#101739)
*   [交互式解释器中的制表符完成](https://stackoverflow.com/questions/101268/hidden-features-of-python#168270)
*   [三元表达式](https://stackoverflow.com/questions/101268/hidden-features-of-python#116480)
*   [`try/except/else`](https://stackoverflow.com/questions/101268/hidden-features-of-python#114157)
*   [拆包+`print()`功能](https://stackoverflow.com/questions/101268/hidden-features-of-python#3267903)
*   [`with`陈述](https://stackoverflow.com/questions/101268/hidden-features-of-python#109182)

* * *

## 回答 #1

> 赞同：740
> 
> 时间：2008-09-19T13:47:15.427

## Chaining comparison operators:

```
>>> x = 5
>>> 1 < x < 10
True
>>> 10 < x < 20 
False
>>> x < 10 < x*10 < 100
True
>>> 10 > x <= 9
True
>>> 5 == x > 4
True 
```

In case you're thinking it's doing `1 < x`, which comes out as `True`, and then comparing `True < 10`, which is also `True`, then no, that's really not what happens (see the last example.) It's really translating into `1 < x and x < 10`, and `x < 10 and 10 < x * 10 and x*10 < 100`, but with less typing and each term is only evaluated once.

* * *

## 回答 #2

> 赞同：512
> 
> 时间：2008-09-27T13:18:09.647

**获取 python 正则表达式解析树来调试您的正则表达式。**

正则表达式是 python 的一个很棒的特性，但是调试它们可能会很痛苦，而且很容易弄错正则表达式。

幸运的是，python 可以通过将未记录的、实验性的、隐藏的标志`re.DEBUG`（实际上是 128）传递给`re.compile`.

```
>>> re.compile("^\[font(?:=(?P<size>[-+][0-9]{1,2}))?\](.*?)[/font]",
    re.DEBUG)
at at_beginning
literal 91
literal 102
literal 111
literal 110
literal 116
max_repeat 0 1
  subpattern None
    literal 61
    subpattern 1
      in
        literal 45
        literal 43
      max_repeat 1 2
        in
          range (48, 57)
literal 93
subpattern 2
  min_repeat 0 65535
    any None
in
  literal 47
  literal 102
  literal 111
  literal 110
  literal 116 
```

一旦你理解了语法，你就可以发现你的错误。在那里我们可以看到我忘记逃跑`[]`了`[/font]`。

当然，你可以将它与你想要的任何标志结合起来，比如注释的正则表达式：

```
>>> re.compile("""
 ^              # start of a line
 \[font         # the font tag
 (?:=(?P<size>  # optional [font=+size]
 [-+][0-9]{1,2} # size specification
 ))?
 \]             # end of tag
 (.*?)          # text between the tags
 \[/font\]      # end of the tag
 """, re.DEBUG|re.VERBOSE|re.DOTALL) 
```

* * *

## 回答 #3

> 赞同：460
> 
> 时间：2008-09-22T19:51:20.160

**枚举**

用 enumerate 包装一个迭代，它将产生项目及其索引。

例如：

```
 >>> a = ['a', 'b', 'c', 'd', 'e']
>>> for index, item in enumerate(a): print index, item
...
0 a
1 b
2 c
3 d
4 e
>>> 
```

参考：

*   [Python 教程——循环技术](http://docs.python.org/tutorial/datastructures.html#looping-techniques)
*   [Python 文档——内置函数——<code>enumerate](http://docs.python.org/library/functions.html#enumerate)
*   [政治人物 279](http://www.python.org/dev/peps/pep-0279/)

* * *

## 回答 #4

> 赞同：419
> 
> 时间：2008-09-19T11:59:28.867

**创建生成器对象**

如果你写

```
x=(n for n in foo if bar(n)) 
```

您可以取出生成器并将其分配给 x。现在这意味着你可以做到

```
for n in x: 
```

这样做的好处是您不需要中间存储，如果您这样做了，您将需要它

```
x = [n for n in foo if bar(n)] 
```

在某些情况下，这可能会导致显着加速。

您可以将许多 if 语句附加到生成器的末尾，基本上是复制嵌套的 for 循环：

```
>>> n = ((a,b) for a in range(0,2) for b in range(4,6))
>>> for i in n:
...   print i 

(0, 4)
(0, 5)
(1, 4)
(1, 5) 
```

* * *

## 回答 #5

> 赞同：353
> 
> 时间：2008-09-19T14:20:38.203

**iter() 可以接受一个可调用的参数**

例如：

```
def seek_next_line(f):
    for c in iter(lambda: f.read(1),'\n'):
        pass 
```

该`iter(callable, until_value)`函数重复调用`callable`并产生其结果，直到`until_value`返回。

* * *

## 回答 #6

> 赞同：339
> 
> 时间：2008-09-22T04:34:39.677

**小心可变的默认参数**

```
>>> def foo(x=[]):
...     x.append(1)
...     print x
... 
>>> foo()
[1]
>>> foo()
[1, 1]
>>> foo()
[1, 1, 1] 
```

相反，您应该使用表示“未给出”的标记值并替换为您想要的默认值：

```
>>> def foo(x=None):
...     if x is None:
...         x = []
...     x.append(1)
...     print x
>>> foo()
[1]
>>> foo()
[1] 
```

* * *

## 回答 #7

> 赞同：317
> 
> 时间：2008-09-19T13:18:19.257

[将值发送到生成器函数](http://www.python.org/dev/peps/pep-0342/)中。例如具有此功能：

```
def mygen():
    """Yield 5 until something else is passed back via send()"""
    a = 5
    while True:
        f = (yield a) #yield a and possibly get f in return
        if f is not None: 
            a = f  #store the new value 
```

你可以：

```
>>> g = mygen()
>>> g.next()
5
>>> g.next()
5
>>> g.send(7)  #we send this back to the generator
7
>>> g.next() #now it will yield 7 until we send something else
7 
```

* * *

## 回答 #8

> 赞同：312
> 
> 时间：2008-09-21T22:01:53.427

如果您不喜欢使用空格来表示范围，您可以通过发出以下命令来使用 C 风格的 {}：

```
from __future__ import braces 
```

* * *

## 回答 #9

> 赞同：305
> 
> 时间：2008-09-19T13:33:42.730

切片运算符中的 step 参数。例如：

```
a = [1,2,3,4,5]
>>> a[::2]  # iterate over the whole list in 2-increments
[1,3,5] 
```

特殊情况`x[::-1]`是“x reversed”的有用习语。

```
>>> a[::-1]
[5,4,3,2,1] 
```

* * *

## 回答 #10

> 赞同：289
> 
> 时间：2008-09-19T12:32:26.637

**装饰器**

[装饰器](http://docs.python.org/ref/function.html#tok-decorators)允许将一个函数或方法包装在另一个可以添加功能、修改参数或结果等的函数中。您可以在函数定义上方一行编写装饰器，以“at”符号 (@) 开头。

示例显示了一个`print_args`装饰器，它在调用装饰函数之前打印它的参数：

```
>>> def print_args(function):
>>>     def wrapper(*args, **kwargs):
>>>         print 'Arguments:', args, kwargs
>>>         return function(*args, **kwargs)
>>>     return wrapper

>>> @print_args
>>> def write(text):
>>>     print text

>>> write('foo')
Arguments: ('foo',) {}
foo 
```

* * *

## 回答 #11

> 赞同：288
> 
> 时间：2008-09-22T11:55:40.677

for...else 语法（参见[http://docs.python.org/ref/for.html](http://docs.python.org/ref/for.html)）

```
for i in foo:
    if i == 0:
        break
else:
    print("i was never 0") 
```

"else" 块通常会在 for 循环结束时执行，除非调用了 break。

上面的代码可以模拟如下：

```
found = False
for i in foo:
    if i == 0:
        found = True
        break
if not found: 
    print("i was never 0") 
```

* * *

## 回答 #12

> 赞同：258
> 
> 时间：2008-09-21T21:54:12.447

从 2.5 开始，dicts 有一个特殊的方法`__missing__`，可以为丢失的项目调用：

```
>>> class MyDict(dict):
...  def __missing__(self, key):
...   self[key] = rv = []
...   return rv
... 
>>> m = MyDict()
>>> m["foo"].append(1)
>>> m["foo"].append(2)
>>> dict(m)
{'foo': [1, 2]} 
```

`collections`在调用中还有一个 dict 子类，`defaultdict`它的作用几乎相同，但调用一个没有参数的函数，用于不存在的项目：

```
>>> from collections import defaultdict
>>> m = defaultdict(list)
>>> m["foo"].append(1)
>>> m["foo"].append(2)
>>> dict(m)
{'foo': [1, 2]} 
```

我建议将此类字典转换为常规字典，然后再将它们传递给不需要此类子类的函数。许多代码使用`d[a_key]`并捕获 KeyErrors 来检查是否存在将向字典添加新项目的项目。

* * *

## 回答 #13

> 赞同：247
> 
> 时间：2008-09-19T14:00:11.607

**就地价值交换**

```
>>> a = 10
>>> b = 5
>>> a, b
(10, 5)

>>> a, b = b, a
>>> a, b
(5, 10) 
```

赋值的右侧是一个创建新元组的表达式。赋值的左侧立即将那个（未引用的）元组解包到名称`a`和`b`.

分配后，新元组未引用并标记为垃圾回收，并且绑定到`a`并`b`已交换的值。

如[关于数据结构的 Python 教程部分](http://docs.python.org/tutorial/datastructures.html#tuples-and-sequences)所述，

> 请注意，多重赋值实际上只是元组打包和序列解包的组合。

* * *

## 回答 #14

> 赞同：235
> 
> 时间：2008-09-19T12:44:42.630

**可读的正则表达式**

在 Python 中，您可以将正则表达式拆分为多行、命名匹配项并插入注释。

详细语法示例（来自[Dive into Python](http://diveintopython.net/regular_expressions/index.html)）：

```
>>> pattern = """
... ^                   # beginning of string
... M{0,4}              # thousands - 0 to 4 M's
... (CM|CD|D?C{0,3})    # hundreds - 900 (CM), 400 (CD), 0-300 (0 to 3 C's),
...                     #            or 500-800 (D, followed by 0 to 3 C's)
... (XC|XL|L?X{0,3})    # tens - 90 (XC), 40 (XL), 0-30 (0 to 3 X's),
...                     #        or 50-80 (L, followed by 0 to 3 X's)
... (IX|IV|V?I{0,3})    # ones - 9 (IX), 4 (IV), 0-3 (0 to 3 I's),
...                     #        or 5-8 (V, followed by 0 to 3 I's)
... $                   # end of string
... """
>>> re.search(pattern, 'M', re.VERBOSE) 
```

示例命名匹配（来自[正则表达式 HOWTO](http://www.amk.ca/python/howto/regex/)）

```
>>> p = re.compile(r'(?P<word>\b\w+\b)')
>>> m = p.search( '(((( Lots of punctuation )))' )
>>> m.group('word')
'Lots' 
```

`re.VERBOSE`由于字符串文字连接，您还可以在不使用的情况下详细编写正则表达式。

```
>>> pattern = (
...     "^"                 # beginning of string
...     "M{0,4}"            # thousands - 0 to 4 M's
...     "(CM|CD|D?C{0,3})"  # hundreds - 900 (CM), 400 (CD), 0-300 (0 to 3 C's),
...                         #            or 500-800 (D, followed by 0 to 3 C's)
...     "(XC|XL|L?X{0,3})"  # tens - 90 (XC), 40 (XL), 0-30 (0 to 3 X's),
...                         #        or 50-80 (L, followed by 0 to 3 X's)
...     "(IX|IV|V?I{0,3})"  # ones - 9 (IX), 4 (IV), 0-3 (0 to 3 I's),
...                         #        or 5-8 (V, followed by 0 to 3 I's)
...     "$"                 # end of string
... )
>>> print pattern
"^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$" 
```

* * *

## 回答 #15

> 赞同：222
> 
> 时间：2008-09-21T15:00:37.807

**Function argument unpacking**

You can unpack a list or a dictionary as function arguments using `*` and `**`.

For example:

```
def draw_point(x, y):
    # do some magic

point_foo = (3, 4)
point_bar = {'y': 3, 'x': 2}

draw_point(*point_foo)
draw_point(**point_bar) 
```

Very useful shortcut since lists, tuples and dicts are widely used as containers.

* * *

## 回答 #16

> 赞同：205
> 
> 时间：2009-06-21T20:32:22.790

当您在代码文件的顶部使用正确的编码声明时，ROT13 是源代码的有效编码：

```
#!/usr/bin/env python
# -*- coding: rot13 -*-

cevag "Uryyb fgnpxbiresybj!".rapbqr("rot13") 
```

* * *

## 回答 #17

> 赞同：183
> 
> 时间：2008-09-20T14:25:58.803

## 以完全动态的方式创建新类型

```
>>> NewType = type("NewType", (object,), {"x": "hello"})
>>> n = NewType()
>>> n.x
"hello" 
```

这与

```
>>> class NewType(object):
>>>     x = "hello"
>>> n = NewType()
>>> n.x
"hello" 
```

可能不是最有用的东西，但很高兴知道。

**编辑**：新类型的固定名称，应该与 with语句`NewType`完全相同。`class`

**编辑**：调整标题以更准确地描述该功能。

* * *

## 回答 #18

> 赞同：179
> 
> 时间：2008-09-20T20:06:16.693

**上下文管理器和“ `with`”语句**

[在PEP 343](http://www.python.org/dev/peps/pep-0343/)中引入的[上下文管理器](http://docs.python.org/library/stdtypes.html#context-manager-types)是一个对象，它充当一组语句的运行时上下文。

由于该功能使用了新的关键字，因此逐渐引入：它在 Python 2.5 中通过[`__future__`](http://docs.python.org/lib/module-future.html)指令可用。Python 2.6 及更高版本（包括 Python 3）默认情况下可用。

我经常使用[“with”语句](http://www.python.org/dev/peps/pep-0343/)，因为我认为它是一个非常有用的构造，这里有一个快速演示：

```
from __future__ import with_statement

with open('foo.txt', 'w') as f:
    f.write('hello!') 
```

幕后发生的事情是[“with”语句](http://www.python.org/dev/peps/pep-0343/)调用文件对象上的特殊`__enter__`和方法。如果从 with 语句体中引发任何异常，`__exit__`也会传递异常详细信息，从而允许在那里进行异常处理。`__exit__`

在这种特殊情况下，它对您的作用是保证在执行超出套件范围时关闭文件`with`，无论是否正常发生或是否引发异常。它基本上是一种抽象出常见异常处理代码的方法。

其他常见的用例包括线程锁定和数据库事务。

* * *

## 回答 #19

> 赞同：168
> 
> 时间：2008-09-21T20:18:19.153

## 字典有一个 get() 方法

字典有一个 'get()' 方法。如果您执行 d['key'] 并且 key 不存在，则会出现异常。如果你执行 d.get('key')，如果 'key' 不存在，你会返回 None。您可以添加第二个参数来取回该项目而不是 None，例如：d.get('key', 0)。

它非常适合添加数字之类的事情：

`sum[value] = sum.get(value, 0) + 1`

* * *

## 回答 #20

> 赞同：152
> 
> 时间：2008-09-19T14:04:38.163

## 描述符

它们是一大堆核心 Python 功能背后的魔力。

当您使用点访问来查找成员（例如，xy）时，Python 首先在实例字典中查找该成员。如果没有找到，它会在类字典中查找。如果它在类字典中找到它，并且对象实现了描述符协议，而不是仅仅返回它，Python 就会执行它。描述符是任何实现`__get__`、`__set__`或`__delete__`方法的类。

以下是您如何使用描述符实现您自己的（只读）属性版本：

```
class Property(object):
    def __init__(self, fget):
        self.fget = fget

    def __get__(self, obj, type):
        if obj is None:
            return self
        return self.fget(obj) 
```

你可以像使用内置的 property() 一样使用它：

```
class MyClass(object):
    @Property
    def foo(self):
        return "Foo!" 
```

描述符在 Python 中用于实现属性、绑定方法、静态方法、类方法和插槽等。理解它们可以很容易地理解为什么很多以前看起来像 Python 的“怪癖”的东西现在就是这样。

Raymond Hettinger 有[一个很好的教程](http://users.rcn.com/python/download/Descriptor.htm)，它比我更好地描述了它们。

* * *

## 回答 #21

> 赞同：142
> 
> 时间：2008-09-22T18:08:54.930

**条件赋值**

```
x = 3 if (y == 1) else 2 
```

它完全符合听起来的样子：“如果 y 为 1，则将 3 分配给 x，否则将 2 分配给 x”。请注意，括号不是必需的，但我喜欢它们的可读性。如果你有更复杂的东西，你也可以链接它：

```
x = 3 if (y == 1) else 2 if (y == -1) else 1 
```

虽然在某一点上，它走得太远了。

请注意，您可以在任何表达式中使用 if ... else。例如：

```
(func1 if y == 1 else func2)(arg1, arg2) 
```

如果 y 为 1，则调用 func1，否则调用 func2。在这两种情况下，都将使用参数 arg1 和 arg2 调用相应的函数。

类似地，以下内容也是有效的：

```
x = (class1 if y == 1 else class2)(arg1, arg2) 
```

其中 class1 和 class2 是两个类。

* * *

## 回答 #22

> 赞同：141
> 
> 时间：2008-09-19T14:04:50.940

## [Doctest](http://docs.python.org/lib/module-doctest.html)：同时进行文档和单元测试。

从 Python 文档中提取的示例：

```
def factorial(n):
    """Return the factorial of n, an exact integer >= 0.

    If the result is small enough to fit in an int, return an int.
    Else return a long.

    >>> [factorial(n) for n in range(6)]
    [1, 1, 2, 6, 24, 120]
    >>> factorial(-1)
    Traceback (most recent call last):
        ...
    ValueError: n must be >= 0

    Factorials of floats are OK, but the float must be an exact integer:
    """

    import math
    if not n >= 0:
        raise ValueError("n must be >= 0")
    if math.floor(n) != n:
        raise ValueError("n must be exact integer")
    if n+1 == n:  # catch a value like 1e300
        raise OverflowError("n too large")
    result = 1
    factor = 2
    while factor <= n:
        result *= factor
        factor += 1
    return result

def _test():
    import doctest
    doctest.testmod()    

if __name__ == "__main__":
    _test() 
```

* * *

## 回答 #23

> 赞同：138
> 
> 时间：2008-09-22T04:23:22.340

## 命名格式

% -formatting 需要一个字典（也应用 %i/%s 等验证）。

```
>>> print "The %(foo)s is %(bar)i." % {'foo': 'answer', 'bar':42}
The answer is 42.

>>> foo, bar = 'question', 123

>>> print "The %(foo)s is %(bar)i." % locals()
The question is 123. 
```

而且由于 locals() 也是一个字典，你可以简单地将它作为一个字典传递，并从你的局部变量中获得 % -substitions。我认为这是不赞成的，但简化了事情..

**新样式格式**

```
>>> print("The {foo} is {bar}".format(foo='answer', bar=42)) 
```

* * *

## 回答 #24

> 赞同：132
> 
> 时间：2008-09-22T08:43:11.357

要添加更多 python 模块（尤其是第 3 方模块），大多数人似乎使用 PYTHONPATH 环境变量，或者他们在他们的站点包目录中添加符号链接或目录。另一种方法是使用 *.pth 文件。这是官方python文档的解释：

> “[修改python的搜索路径]最方便的方法是将路径配置文件添加到Python路径上已经存在的目录中，通常是.../site-packages/目录。路径配置文件的扩展名为.pth ，并且每一行必须包含一个将附加到 sys.path 的路径。（因为新路径附加到 sys.path，所以添加的目录中的模块不会覆盖标准模块。这意味着您不能使用此机制用于安装标准模块的固定版本。）"

* * *

## 回答 #25

> 赞同：122
> 
> 时间：2008-09-22T10:31:50.287

例外**条款**：

```
try:
  put_4000000000_volts_through_it(parrot)
except Voom:
  print "'E's pining!"
else:
  print "This parrot is no more!"
finally:
  end_sketch() 
```

使用 else 子句比在 try 子句中添加额外的代码要好，因为它可以避免意外捕获不是由 try ... except 语句保护的代码引发的异常。

见[http://docs.python.org/tut/node10.html](http://docs.python.org/tut/node10.html)

* * *

## 回答 #26

> 赞同：114
> 
> 时间：2008-09-19T13:56:27.387

**重新提出异常**：

```
# Python 2 syntax
try:
    some_operation()
except SomeError, e:
    if is_fatal(e):
        raise
    handle_nonfatal(e)

# Python 3 syntax
try:
    some_operation()
except SomeError as e:
    if is_fatal(e):
        raise
    handle_nonfatal(e) 
```

*错误处理程序中没有参数的“raise”语句告诉 Python在原始回溯完好*的情况下重新引发异常，允许您说“哦，对不起，对不起，我不是故意要抓住那个，对不起，对不起。 "

如果您想打印、存储或修改原始回溯，您可以使用 sys.exc_info() 获取它，并且像 Python 一样使用“回溯”模块完成打印。

* * *

## 回答 #27

> 赞同：106
> 
> 时间：2008-09-19T11:53:19.460

**主要信息:)**

```
import this
# btw look at this module's source :) 
```

* * *

[解密](http://svn.python.org/view/python/trunk/Lib/this.py?view=markup)：

> Python 之禅，蒂姆·彼得斯 (Tim Peters)
> 
> 美丽总比丑陋好。
> 显式优于隐式。
> 简单胜于复杂。
> 复杂胜于复杂。
> 平面优于嵌套。
> 稀疏比密集好。
> 可读性很重要。
> 特殊情况不足以打破规则。
> 虽然实用胜过纯洁。
> 错误永远不应该悄无声息地过去。
> 除非明确沉默。
> 面对模棱两可，拒绝猜测的诱惑。应该有一种——最好只有一种——明显的方法来做到这一点。
> 虽然这种方式一开始可能并不明显，除非你是荷兰人。
> 现在总比没有好。
> 虽然从不经常比*现在*。
> 如果实现很难解释，那是个坏主意。
> 如果实现很容易解释，那可能是个好主意。
> 命名空间是一个很棒的想法——让我们做更多的事情！

* * *

## 回答 #28

> 赞同：105
> 
> 时间：2008-10-03T18:38:15.933

**交互式解释器选项卡完成**

```
try:
    import readline
except ImportError:
    print "Unable to load readline module."
else:
    import rlcompleter
    readline.parse_and_bind("tab: complete")

>>> class myclass:
...    def function(self):
...       print "my function"
... 
>>> class_instance = myclass()
>>> class_instance.<TAB>
class_instance.__class__   class_instance.__module__
class_instance.__doc__     class_instance.function
>>> class_instance.f<TAB>unction() 
```

您还必须设置 PYTHONSTARTUP 环境变量。

* * *

## 回答 #29

> 赞同：91
> 
> 时间：2009-01-01T16:05:42.767

**`set`内置运算符重载：**

```
>>> a = set([1,2,3,4])
>>> b = set([3,4,5,6])
>>> a | b # Union
{1, 2, 3, 4, 5, 6}
>>> a & b # Intersection
{3, 4}
>>> a < b # Subset
False
>>> a - b # Difference
{1, 2}
>>> a ^ b # Symmetric Difference
{1, 2, 5, 6} 
```

标准库参考中的更多详细信息：[Set Types](http://docs.python.org/py3k/library/stdtypes.html#set-types-set-frozenset)

* * *

## 回答 #30

> 赞同：91
> 
> 时间：2008-09-19T12:45:44.810

嵌套列表推导和生成器表达式：

```
[(i,j) for i in range(3) for j in range(i) ]    
((i,j) for i in range(4) for j in range(i) ) 
```

这些可以替换大量的嵌套循环代码。

* * *

## 回答 #31

> 赞同：85
> 
> 时间：2008-12-17T08:09:01.993

**负轮**

该`round()`函数将浮点数四舍五入到十进制数字中的给定精度，但精度可以为负数：

```
>>> str(round(1234.5678, -2))
'1200.0'
>>> str(round(1234.5678, 2))
'1234.57' 
```

*注意：* `round()`总是返回一个浮点数，`str()`在上面的例子中使用，因为浮点数学是不精确的，在 2.x 下第二个例子可以打印为`1234.5700000000001`. 另请参阅[`decimal`](http://docs.python.org/library/decimal.html#module-decimal)模块。

* * *

## 回答 #32

> 赞同：81
> 
> 时间：2009-12-05T21:50:27.317

**乘以一个布尔值**

我在 Web 开发中经常做的一件事是选择性地打印 HTML 参数。我们都在其他语言中看到过这样的代码：

```
class='<% isSelected ? "selected" : "" %>' 
```

在 Python 中，您可以乘以一个布尔值，它完全符合您的预期：

```
class='<% "selected" * isSelected %>' 
```

这是因为乘法将布尔值强制为整数（0 表示 False，1 表示 True），并且在 python 中，将字符串乘以 int会*重复*字符串 N 次。

* * *

## 回答 #33

> 赞同：74
> 
> 时间：2008-09-21T22:07:44.630

Python 的高级切片操作有一个鲜为人知的语法元素，即省略号：

```
>>> class C(object):
...  def __getitem__(self, item):
...   return item
... 
>>> C()[1:2, ..., 3]
(slice(1, 2, None), Ellipsis, 3) 
```

不幸的是，它几乎没有用，因为只有在涉及元组时才支持省略号。

* * *

## 回答 #34

> 赞同：72
> 
> 时间：2009-04-29T20:56:59.390

# re 可以调用函数！

每次匹配正则表达式时都可以调用函数这一事实非常方便。在这里，我将每个“Hello”替换为“Hi”，将“there”替换为“Fred”等。

```
import re

def Main(haystack):
  # List of from replacements, can be a regex
  finds = ('Hello', 'there', 'Bob')
  replaces = ('Hi,', 'Fred,', 'how are you?')

  def ReplaceFunction(matchobj):
    for found, rep in zip(matchobj.groups(), replaces):
      if found != None:
        return rep

    # log error
    return matchobj.group(0)

  named_groups = [ '(%s)' % find for find in finds ]
  ret = re.sub('|'.join(named_groups), ReplaceFunction, haystack)
  print ret

if __name__ == '__main__':
  str = 'Hello there Bob'
  Main(str)
  # Prints 'Hi, Fred, how are you?' 
```

* * *

## 回答 #35

> 赞同：70
> 
> 时间：2011-01-05T09:29:54.123

**python 3中的元组解包**

在 python 3 中，您可以使用与函数定义中的可选参数相同的语法进行元组解包：

```
>>> first,second,*rest = (1,2,3,4,5,6,7,8)
>>> first
1
>>> second
2
>>> rest
[3, 4, 5, 6, 7, 8] 
```

但是一个鲜为人知但更强大的功能允许您**在列表中间**拥有未知数量的元素：

```
>>> first,*rest,last = (1,2,3,4,5,6,7,8)
>>> first
1
>>> rest
[2, 3, 4, 5, 6, 7]
>>> last
8 
```

* * *

## 回答 #36

> 赞同：67
> 
> 时间：2010-07-27T11:07:33.830

**多行字符串**

一种方法是使用反斜杠：

```
>>> sql = "select * from some_table \
where id > 10"
>>> print sql
select * from some_table where id > 10 
```

另一种是使用三引号：

```
>>> sql = """select * from some_table 
where id > 10"""
>>> print sql
select * from some_table where id > 10 
```

这些问题是它们没有缩进（在您的代码中看起来很糟糕）。如果您尝试缩进，它只会打印您放置的空格。

我最近发现的第三种解决方案是将字符串分成几行并用括号括起来：

```
>>> sql = ("select * from some_table " # <-- no comma, whitespace at end
           "where id > 10 "
           "order by name") 
>>> print sql
select * from some_table where id > 10 order by name 
```

请注意行之间没有逗号（这不是元组），并且您必须考虑字符串需要具有的任何尾随/前导空格。顺便说一下，所有这些都与占位符一起使用（例如`"my name is %s" % name`）。

* * *

## 回答 #37

> 赞同：63
> 
> 时间：2010-07-16T19:18:42.487

根据许多人的要求，此答案已移至问题本身。

* * *

## 回答 #38

> 赞同：59
> 
> 时间：2008-09-22T18:22:29.390

*   下划线，它包含解释器显示的最新输出值（在交互式会话中）：

```
>>> (a 代表 xrange(10000) 中的 a)
<0x81a8fcc 处的生成器对象>
>>> b = '废话'
>>> _
<0x81a8fcc 处的生成器对象>

```

*   一个方便的网络浏览器控制器：

```
>>> 导入浏览器
>>> webbrowser.open_new_tab('http://www.stackoverflow.com')
```

*   一个内置的http服务器。提供当前目录中的文件：

```
python -m SimpleHTTPServer 8000
```

*   出口处

```
>>> 进口 atexit
```

* * *

## 回答 #39

> 赞同：56
> 
> 时间：2010-07-30T12:36:40.947

### pow() 还可以有效地计算 (x ** y) % z。

内置`pow()`函数有一个鲜为人知的第三个参数，它允许您比简单地计算 x ^y模 z 更有效`(x ** y) % z`：

```
>>> x, y, z = 1234567890, 2345678901, 17
>>> pow(x, y, z)            # almost instantaneous
6 
```

相比之下，`(x ** y) % z`在我的机器上一分钟内没有给出相同值的结果。

* * *

## 回答 #40

> 赞同：52
> 
> 时间：2008-11-28T23:27:59.713

您可以使用 zip 轻松转置数组。

```
a = [(1,2), (3,4), (5,6)]
zip(*a)
# [(1, 3, 5), (2, 4, 6)] 
```

* * *

## 回答 #41

> 赞同：52
> 
> 时间：2010-10-19T09:53:40.527

### enumerate with different starting index

`enumerate` has partly been covered in [this answer](https://stackoverflow.com/questions/101268/hidden-features-of-python/117116#117116), but recently I've found an even more hidden feature of `enumerate` that I think deserves its own post instead of just a comment.

Since Python 2.6, you can specify a starting index to `enumerate` in its second argument:

```
>>> l = ["spam", "ham", "eggs"]
>>> list(enumerate(l))
>>> [(0, "spam"), (1, "ham"), (2, "eggs")]
>>> list(enumerate(l, 1))
>>> [(1, "spam"), (2, "ham"), (3, "eggs")] 
```

One place where I've found it utterly useful is when I am enumerating over entries of a symmetric matrix. Since the matrix is symmetric, I can save time by iterating over the upper triangle only, but in that case, I have to use `enumerate` with a different starting index in the inner `for` loop to keep track of the row and column indices properly:

```
for ri, row in enumerate(matrix):
    for ci, column in enumerate(matrix[ri:], ri):
        # ci now refers to the proper column index 
```

Strangely enough, this behaviour of `enumerate` is not documented in `help(enumerate)`, only in the [online documentation](http://docs.python.org/library/functions.html#enumerate).

* * *

## 回答 #42

> 赞同：50
> 
> 时间：2008-09-19T13:43:46.527

You can use [property](http://docs.python.org/library/functions.html#property) to make your class interfaces more strict.

```
class C(object):
    def __init__(self, foo, bar):
        self.foo = foo # read-write property
        self.bar = bar # simple attribute

    def _set_foo(self, value):
        self._foo = value

    def _get_foo(self):
        return self._foo

    def _del_foo(self):
        del self._foo

    # any of fget, fset, fdel and doc are optional,
    # so you can make a write-only and/or delete-only property.
    foo = property(fget = _get_foo, fset = _set_foo,
                   fdel = _del_foo, doc = 'Hello, I am foo!')

class D(C):
    def _get_foo(self):
        return self._foo * 2

    def _set_foo(self, value):
        self._foo = value / 2

    foo = property(fget = _get_foo, fset = _set_foo,
                   fdel = C.foo.fdel, doc = C.foo.__doc__) 
```

In Python [2.6 and 3.0](http://docs.python.org/dev/whatsnew/2.6.html):

```
class C(object):
    def __init__(self, foo, bar):
        self.foo = foo # read-write property
        self.bar = bar # simple attribute

    @property
    def foo(self):
        '''Hello, I am foo!'''

        return self._foo

    @foo.setter
    def foo(self, value):
        self._foo = value

    @foo.deleter
    def foo(self):
        del self._foo

class D(C):
    @C.foo.getter
    def foo(self):
        return self._foo * 2

    @foo.setter
    def foo(self, value):
        self._foo = value / 2 
```

To learn more about how property works refer to [descriptors](http://docs.python.org/howto/descriptor.html).

* * *

## 回答 #43

> 赞同：48
> 
> 时间：2008-09-22T17:32:50.197

很多人不知道“dir”函数。这是从解释器中找出对象可以做什么的好方法。例如，如果您想查看所有字符串方法的列表：

```
>>> dir("foo")
['__add__', '__class__', '__contains__', (snipped a bunch), 'title',
 'translate', 'upper', 'zfill'] 
```

然后，如果您想了解有关特定方法的更多信息，可以对其调用“帮助”。

```
>>> help("foo".upper)
    Help on built-in function upper:

upper(...)
    S.upper() -> string

    Return a copy of the string S converted to uppercase. 
```

* * *

## 回答 #44

> 赞同：47
> 
> 时间：2008-10-22T07:24:30.310

[**设置/冻结设置**](http://docs.python.org/library/stdtypes.html#set)

可能一个容易被忽视的 python 内置函数是“set/frozenset”。

当你有这样的列表时很有用，[1,2,1,1,2,3,4] 并且只想要这样的唯一值 [1,2,3,4]。

使用 set() 这正是你得到的：

```
>>> x = [1,2,1,1,2,3,4] 
>>> 
>>> set(x) 
set([1, 2, 3, 4]) 
>>>
>>> for i in set(x):
...     print i
...
1
2
3
4 
```

当然，要获取列表中唯一的数量：

```
>>> len(set([1,2,1,1,2,3,4]))
4 
```

您还可以使用 set().issubset() 查找列表是否是另一个列表的子集：

```
>>> set([1,2,3,4]).issubset([0,1,2,3,4,5])
True 
```

从 Python 2.7 和 3.0 开始，您可以使用花括号来创建一个集合：

```
myset = {1,2,3,4} 
```

以及集合推导：

```
{x for x in stuff} 
```

更多详情： [http ://docs.python.org/library/stdtypes.html#set](http://docs.python.org/library/stdtypes.html#set)

* * *

## 回答 #45

> 赞同：46
> 
> 时间：2008-09-27T13:37:41.380

**内置 base64、zlib 和 rot13 编解码器**

字符串有`encode`和`decode`方法。通常这用于转换`str`为`unicode`，反之亦然，例如使用`u = s.encode('utf8')`. 但是还有一些其他方便的内置编解码器。无需显式导入即可使用 zlib（和 bz2）进行压缩和解压缩：

```
>>> s = 'a' * 100
>>> s.encode('zlib')
'x\x9cKL\xa4=\x00\x00zG%\xe5' 
```

同样，您可以对 base64 进行编码和解码：

```
>>> 'Hello world'.encode('base64')
'SGVsbG8gd29ybGQ=\n'
>>> 'SGVsbG8gd29ybGQ=\n'.decode('base64')
'Hello world' 
```

而且，当然，你可以 rot13：

```
>>> 'Secret message'.encode('rot13')
'Frperg zrffntr' 
```

* * *

## 回答 #46

> 赞同：43
> 
> 时间：2008-12-26T16:05:39.697

**口译员中的口译员**

标准库的[代码](http://docs.python.org/library/code.html)模块让您可以在程序中包含自己的 read-eval-print 循环，或者运行整个嵌套的解释器。例如（从[这里](https://stackoverflow.com/questions/393871/scripting-inside-a-python-application#393921)复制我的例子）

```
$ python
Python 2.5.1 (r251:54863, Jan 17 2008, 19:35:17) 
[GCC 4.0.1 (Apple Inc. build 5465)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> shared_var = "Set in main console"
>>> import code
>>> ic = code.InteractiveConsole({ 'shared_var': shared_var })
>>> try:
...     ic.interact("My custom console banner!")
... except SystemExit, e:
...     print "Got SystemExit!"
... 
My custom console banner!
>>> shared_var
'Set in main console'
>>> shared_var = "Set in sub-console"
>>> import sys
>>> sys.exit()
Got SystemExit!
>>> shared_var
'Set in main console' 
```

这对于您希望接受用户的脚本输入或实时查询 VM 状态的情况非常有用。

[TurboGears](http://turbogears.com/)通过一个 WebConsole 来使用它，您可以从中查询您的实时 Web 应用程序的状态。

* * *

## 回答 #47

> 赞同：40
> 
> 时间：2008-11-18T19:06:36.747

```
>>> from functools import partial
>>> bound_func = partial(range, 0, 10)
>>> bound_func()
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> bound_func(2)
[0, 2, 4, 6, 8] 
```

不是真正的隐藏功能，但部分功能对于后期评估功能非常有用。

您可以根据需要在初始调用中绑定尽可能多或尽可能少的参数，然后使用任何剩余参数调用它（在此示例中，我将开始/结束参数绑定到范围，但第二次调用它一个步骤 arg)

请参阅[文档](http://www.python.org/doc//current/library/functools.html)。

* * *

## 回答 #48

> 赞同：36
> 
> 时间：2008-11-04T13:09:28.180

在调试复杂的数据结构*时，pprint*模块会派上用场。

从文档中引用..

```
>>> import pprint    
>>> stuff = sys.path[:]
>>> stuff.insert(0, stuff)
>>> pprint.pprint(stuff)
[<Recursion on list with id=869440>,
 '',
 '/usr/local/lib/python1.5',
 '/usr/local/lib/python1.5/test',
 '/usr/local/lib/python1.5/sunos5',
 '/usr/local/lib/python1.5/sharedmodules',
 '/usr/local/lib/python1.5/tkinter'] 
```

* * *

## 回答 #49

> 赞同：34
> 
> 时间：2008-10-05T09:51:09.600

**Python 有 GOTO**

...它是由[外部纯 Python 模块](http://entrian.com/goto/)实现的:)

```
from goto import goto, label
for i in range(1, 10):
    for j in range(1, 20):
        for k in range(1, 30):
            print i, j, k
            if k == 3:
                goto .end # breaking out from a deeply nested loop
label .end
print "Finished" 
```

* * *

## 回答 #50

> 赞同：32
> 
> 时间：2008-09-26T20:51:53.543

dict's constructor accepts keyword arguments:

```
>>> dict(foo=1, bar=2)
{'foo': 1, 'bar': 2} 
```

* * *

## 回答 #51

> 赞同：29
> 
> 时间：2010-09-12T05:11:28.477

**序列乘法和反射操作数**

```
>>> 'xyz' * 3
'xyzxyzxyz'

>>> [1, 2] * 3
[1, 2, 1, 2, 1, 2]

>>> (1, 2) * 3
(1, 2, 1, 2, 1, 2) 
```

我们使用反射（交换）操作数得到相同的结果

```
>>> 3 * 'xyz'
'xyzxyzxyz' 
```

它是这样工作的：

```
>>> s = 'xyz'
>>> num = 3 
```

评估表达式**s * num**解释器调用**s.___mul___(num)**

```
>>> s * num
'xyzxyzxyz'

>>> s.__mul__(num)
'xyzxyzxyz' 
```

要评估表达式**num * s**解释器调用**num.___mul___(s)**

```
>>> num * s
'xyzxyzxyz'

>>> num.__mul__(s)
NotImplemented 
```

如果调用返回***NotImplemented***则解释器调用反射操作**s.___rmul___(num)**如果操作数具有不同的类型

```
>>> s.__rmul__(num)
'xyzxyzxyz' 
```

请参阅[http://docs.python.org/reference/datamodel.html#object。**rmul**](http://docs.python.org/reference/datamodel.html#object.__rmul__)

* * *

## 回答 #52

> 赞同：28
> 
> 时间：2008-09-20T14:31:17.887

**交错`if`和`for`列表推导**

```
>>> [(x, y) for x in range(4) if x % 2 == 1 for y in range(4)]
[(1, 0), (1, 1), (1, 2), (1, 3), (3, 0), (3, 1), (3, 2), (3, 3)] 
```

直到我学习了 Haskell，我才意识到这一点。

* * *

## 回答 #53

> 赞同：28
> 
> 时间：2008-09-19T13:16:49.993

**模块运算符中的 getter 函数**

函数`attrgetter()`和`itemgetter()`in 模块`operator`可用于生成快速访问函数，用于排序和搜索对象和字典

Python 库文档中的[第 6.7 章](http://docs.python.org/lib/module-operator.html)

* * *

## 回答 #54

> 赞同：27
> 
> 时间：2008-09-22T05:33:15.043

Tuple unpacking:

```
>>> (a, (b, c), d) = [(1, 2), (3, 4), (5, 6)]
>>> a
(1, 2)
>>> b
3
>>> c, d
(4, (5, 6)) 
```

More obscurely, you can do this in function arguments (in Python 2.x; Python 3.x will not allow this anymore):

```
>>> def addpoints((x1, y1), (x2, y2)):
...     return (x1+x2, y1+y2)
>>> addpoints((5, 0), (3, 5))
(8, 5) 
```

* * *

## 回答 #55

> 赞同：27
> 
> 时间：2008-09-29T10:36:12.670

Obviously, the antigravity module. [xkcd #353](http://xkcd.com/353/)

* * *

## 回答 #56

> 赞同：26
> 
> 时间：2008-09-19T20:30:28.670

**Python 解释器**

```
>>> 
```

也许不是鲜为人知，但肯定是我最喜欢的 Python 特性之一。

* * *

## 回答 #57

> 赞同：25
> 
> 时间：2009-12-01T02:09:50.417

如示例中所示，最近版本中的解包语法已升级。

```
>>> a, *b = range(5)
>>> a, b
(0, [1, 2, 3, 4])
>>> *a, b = range(5)
>>> a, b
([0, 1, 2, 3], 4)
>>> a, *b, c = range(5)
>>> a, b, c
(0, [1, 2, 3], 4) 
```

* * *

## 回答 #58

> 赞同：25
> 
> 时间：2008-10-21T13:26:46.057

### 在构建列表时引用它...

您可以引用一个列表推导，因为它是由符号“_[1]”构建的。例如，以下函数通过引用其列表推导来唯一化一个元素列表而不改变它们的顺序。

```
def unique(my_list):
    return [x for x in my_list if x not in locals()['_[1]']] 
```

* * *

## 回答 #59

> 赞同：25
> 
> 时间：2008-09-22T18:03:00.263

Python sort 函数对元组进行正确排序（即使用熟悉的字典顺序）：

```
a = [(2, "b"), (1, "a"), (2, "a"), (3, "c")]
print sorted(a)
#[(1, 'a'), (2, 'a'), (2, 'b'), (3, 'c')] 
```

如果您想在年龄之后对人员列表进行排序然后命名，这很有用。

* * *

## 回答 #60

> 赞同：25
> 
> 时间：2011-01-23T18:24:40.910

的简单性：

```
>>> 'str' in 'string'
True
>>> 'no' in 'yes'
False
>>> 
```

是我喜欢 Python 的地方，我见过很多这样的不是很 Python 的成语：

```
if 'yes'.find("no") == -1:
    pass 
```

* * *

## 回答 #61

> 赞同：24
> 
> 时间：2008-09-19T11:55:12.420

**元类**

当然 :-) [Python 中的元类是什么？](https://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python)

* * *

## 回答 #62

> 赞同：24
> 
> 时间：2009-06-02T09:12:21.533

我个人喜欢这**3个不同的报价**

```
str = "I'm a string 'but still I can use quotes' inside myself!"
str = """ For some messy multi line strings.
Such as
<html>
<head> ... </head>""" 
```

也很酷：不必逃避正则表达式，通过使用**原始字符串**避免可怕的反斜杠沙拉：

```
str2 = r"\n" 
print str2
>> \n 
```

* * *

## 回答 #63

> 赞同：23
> 
> 时间：2008-10-03T00:01:22.150

**发电机**

我认为很多 Python 新手开发者都忽略了生成器，但并没有真正掌握它们的用途，也没有意识到它们的强大功能。直到我阅读了 David M. Beazley 关于生成器的 PyCon 演示文稿（可[在此处](http://www.dabeaz.com/generators/)获得），我才意识到它们是多么有用（真的很重要）。该演示文稿阐明了对我来说是一种全新的编程方式，我向所有对生成器没有深入了解的人推荐它。

* * *

## 回答 #64

> 赞同：22
> 
> 时间：2010-07-22T14:47:37.797

python 中的[`textwrap.dedent`](http://docs.python.org/library/textwrap.html#textwrap.dedent)实用函数可以非常方便地测试返回的多行字符串是否等于预期输出，而不会破坏单元测试的缩进：

```
import unittest, textwrap

class XMLTests(unittest.TestCase):
    def test_returned_xml_value(self):
        returned_xml = call_to_function_that_returns_xml()
        expected_value = textwrap.dedent("""\
        <?xml version="1.0" encoding="utf-8"?>
        <root_node>
            <my_node>my_content</my_node>
        </root_node>
        """)

        self.assertEqual(expected_value, returned_xml) 
```

* * *

## 回答 #65

> 赞同：22
> 
> 时间：2008-09-19T13:39:43.743

Implicit concatenation:

```
>>> print "Hello " "World"
Hello World 
```

Useful when you want to make a long text fit on several lines in a script:

```
hello = "Greaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa Hello " \
        "Word" 
```

or

```
hello = ("Greaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa Hello " 
         "Word") 
```

* * *

## 回答 #66

> 赞同：22
> 
> 时间：2010-07-15T09:03:42.773

使用交互式 shell 时，“_”包含最后打印项的值：

```
>>> range(10)
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> _
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> 
```

* * *

## 回答 #67

> 赞同：22
> 
> 时间：2010-07-24T20:25:47.553

## 零参数和可变参数 lambda

Lambda 函数通常用于将一个值快速转换为另一个值，但它们也可用于将值包装在函数中：

```
>>> f = lambda: 'foo'
>>> f()
'foo' 
```

他们也可以接受通常的`*args`和`**kwargs`语法：

```
>>> g = lambda *args, **kwargs: args[0], kwargs['thing']
>>> g(1, 2, 3, thing='stuff')
(1, 'stuff') 
```

* * *

## 回答 #68

> 赞同：21
> 
> 时间：2008-10-18T17:44:47.890

**使用关键字参数作为赋值**

有时，人们想根据一个或多个参数构建一系列函数。然而，这可能很容易导致所有闭包都引用相同的对象和值：

```
funcs = [] 
for k in range(10):
     funcs.append( lambda: k)

>>> funcs[0]()
9
>>> funcs[7]()
9 
```

可以通过将 lambda 表达式转换为仅取决于其参数的函数来避免这种行为。关键字参数存储绑定到它的当前值。函数调用不必更改：

```
funcs = [] 
for k in range(10):
     funcs.append( lambda k = k: k)

>>> funcs[0]()
0
>>> funcs[7]()
7 
```

* * *

## 回答 #69

> 赞同：20
> 
> 时间：2009-12-05T22:10:16.403

**Mod 与负数一起正常工作**

-1 % 5 应该是***4***，而不是像 JavaScript 这样的其他语言中的 -1 。这使得 Python 中的“环绕窗口”更干净，你只需这样做：

```
index = (index + increment) % WINDOW_SIZE 
```

* * *

## 回答 #70

> 赞同：19
> 
> 时间：2009-06-18T15:40:54.187

不是很隐蔽，但函数有属性：

```
def doNothing():
    pass

doNothing.monkeys = 4
print doNothing.monkeys
4 
```

* * *

## 回答 #71

> 赞同：19
> 
> 时间：2008-09-25T18:22:24.483

分配和删除切片：

```
>>> a = range(10)
>>> a
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> a[:5] = [42]
>>> a
[42, 5, 6, 7, 8, 9]
>>> a[:1] = range(5)
>>> a
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> del a[::2]
>>> a
[1, 3, 5, 7, 9]
>>> a[::2] = a[::-2]
>>> a
[9, 3, 5, 7, 1] 
```

*注意*：分配给扩展切片（`s[start:stop:step]`）时，分配的迭代必须与切片具有相同的长度。

* * *

## 回答 #72

> 赞同：19
> 
> 时间：2008-09-20T02:55:10.993

**一流的功能**

这并不是一个真正的隐藏功能，但函数是一流对象这一事实简直太棒了。您可以像传递任何其他变量一样传递它们。

```
>>> def jim(phrase):
...   return 'Jim says, "%s".' % phrase
>>> def say_something(person, phrase):
...   print person(phrase)

>>> say_something(jim, 'hey guys')
'Jim says, "hey guys".' 
```

* * *

## 回答 #73

> 赞同：19
> 
> 时间：2008-09-22T23:22:54.287

**三元运算符**

```
>>> 'ham' if True else 'spam'
'ham'
>>> 'ham' if False else 'spam'
'spam' 
```

这是在 2.5 中添加的，在此之前您可以使用：

```
>>> True and 'ham' or 'spam'
'ham'
>>> False and 'ham' or 'spam'
'spam' 
```

但是，如果您要使用的值被认为是错误的，则存在差异：

```
>>> [] if True else 'spam'
[]
>>> True and [] or 'spam'
'spam' 
```

* * *

## 回答 #74

> 赞同：19
> 
> 时间：2010-03-20T08:58:42.910

## 将元组传递给内置函数

许多 Python 函数都接受元组，但它似乎也不接受。例如你想测试你的变量是否是一个数字，你可以这样做：

```
if isinstance (number, float) or isinstance (number, int):  
   print "yaay" 
```

但是如果你把元组传递给我们，这看起来更干净：

```
if isinstance (number, (float, int)):  
   print "yaay" 
```

* * *

## 回答 #75

> 赞同：19
> 
> 时间：2010-05-26T20:25:02.880

字典中无限递归的好处理：

```
>>> a = {}
>>> b = {}
>>> a['b'] = b
>>> b['a'] = a
>>> print a
{'b': {'a': {...}}} 
```

* * *

## 回答 #76

> 赞同：18
> 
> 时间：2011-03-09T19:37:41.783

可以说，这本身并不是一个*编程*功能，但它非常有用，所以我还是会发布它。

```
$ python -m http.server 
```

...其次是`$ wget http://<ipnumber>:8000/filename`其他地方。

如果您仍在运行较旧 (2.x) 版本的 Python：

```
$ python -m SimpleHTTPServer 
```

您还可以指定一个端口，例如`python -m http.server 80`（如果您在服务器端有根，则可以省略 url 中的端口）

* * *

## 回答 #77

> 赞同：18
> 
> 时间：2010-12-21T16:24:18.847

不是“隐藏”但非常有用且不常用

像这样快速创建字符串连接函数

```
 comma_join = ",".join
 semi_join  = ";".join

 print comma_join(["foo","bar","baz"])
 'foo,bar,baz 
```

和

能够比引号、逗号更优雅地创建字符串列表。

```
l = ["item1", "item2", "item3"] 
```

取而代之

```
l = "item1 item2 item3".split() 
```

* * *

## 回答 #78

> 赞同：18
> 
> 时间：2010-07-14T08:14:12.193

使用负步骤反转可迭代

```
>>> s = "Hello World"
>>> s[::-1]
'dlroW olleH'
>>> a = (1,2,3,4,5,6)
>>> a[::-1]
(6, 5, 4, 3, 2, 1)
>>> a = [5,4,3,2,1]
>>> a[::-1]
[1, 2, 3, 4, 5] 
```

* * *

## 回答 #79

> 赞同：17
> 
> 时间：2010-06-29T18:25:14.747

**对迭代器的多次引用**

您可以使用列表乘法创建对同一迭代器的多个引用：

```
>>> i = (1,2,3,4,5,6,7,8,9,10) # or any iterable object
>>> iterators = [iter(i)] * 2
>>> iterators[0].next()
1
>>> iterators[1].next()
2
>>> iterators[0].next()
3 
```

这可用于将可迭代对象分组为块，例如，如[`itertools`文档中的此示例所示](http://docs.python.org/library/itertools.html)

```
def grouper(n, iterable, fillvalue=None):
    "grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx"
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args) 
```

* * *

## 回答 #80

> 赞同：17
> 
> 时间：2010-07-18T20:59:08.007

从 python 3.1 ( 2.7 ) 开始支持字典和集合理解：

```
{ a:a for a in range(10) }
{ a for a in range(10) } 
```

* * *

## 回答 #81

> 赞同：15
> 
> 时间：2009-11-06T13:18:00.683

Python[可以理解任何类型的 unicode 数字](http://bugs.python.org/issue6595)，而不仅仅是 ASCII 类型：

```
>>> s = u'１０５８５'
>>> s
u'\uff11\uff10\uff15\uff18\uff15'
>>> print s
１０５８５
>>> int(s)
10585
>>> float(s)
10585.0 
```

* * *

## 回答 #82

> 赞同：14
> 
> 时间：2008-09-21T22:02:39.433

`__slots__`是一种节省内存的好方法，但很难获得对象值的字典。想象以下对象：

```
class Point(object):
    __slots__ = ('x', 'y') 
```

现在该对象显然有两个属性。现在我们可以创建它的一个实例并以这种方式构建它的字典：

```
>>> p = Point()
>>> p.x = 3
>>> p.y = 5
>>> dict((k, getattr(p, k)) for k in p.__slots__)
{'y': 5, 'x': 3} 
```

但是，如果点被子类化并添加了新插槽，这将不起作用。但是 Python 会自动实现`__reduce_ex__`以帮助该`copy`模块。这可以被滥用来获取值的字典：

```
>>> p.__reduce_ex__(2)[2][1]
{'y': 5, 'x': 3} 
```

* * *

## 回答 #83

> 赞同：14
> 
> 时间：2010-02-13T21:12:21.357

## 操作 sys.modules

您可以直接操作模块缓存，根据需要使模块可用或不可用：

```
>>> import sys
>>> import ham
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named ham

# Make the 'ham' module available -- as a non-module object even!
>>> sys.modules['ham'] = 'ham, eggs, saussages and spam.'
>>> import ham
>>> ham
'ham, eggs, saussages and spam.'

# Now remove it again.
>>> sys.modules['ham'] = None
>>> import ham
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named ham 
```

这甚至适用于可用的模块，*并且*在某种程度上适用于*已经导入*的模块：

```
>>> import os
# Stop future imports of 'os'.
>>> sys.modules['os'] = None
>>> import os
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named os
# Our old imported module is still available.
>>> os
<module 'os' from '/usr/lib/python2.5/os.pyc'> 
```

正如最后一行所示，更改 sys.modules 只会影响未来`import`的语句，而不是过去的语句，所以如果你想影响其他模块，在你给他们机会尝试导入模块*之前*进行这些更改很重要——所以在你之前通常导入它们。`None`是 中的一个特殊值`sys.modules`，用于负缓存（表示第一次没有找到模块，所以再找也没用。）任何其他值都将是`import`操作的结果——即使它不是模块对象. 您可以使用它来用行为与您想要的完全一样的对象替换模块。完全删除条目`sys.modules`会导致 next`import`对模块进行正常搜索，即使它之前已经导入。

* * *

## 回答 #84

> 赞同：14
> 
> 时间：2009-12-30T23:35:24.570

**迭代工具**

这个模块经常被忽视。以下示例用于`itertools.chain()` 展平列表：

```
>>> from itertools import *
>>> l = [[1, 2], [3, 4]]
>>> list(chain(*l))
[1, 2, 3, 4] 
```

有关更多应用程序，请参阅[http://docs.python.org/library/itertools.html#recipes](http://docs.python.org/library/itertools.html#recipes)。

* * *

## 回答 #85

> 赞同：14
> 
> 时间：2010-07-14T02:06:20.900

您可以通过查看其 __ module__ 属性来询问任何对象它来自哪个模块。这很有用，例如，如果您在命令行上进行试验并导入了很多东西。

同样，您可以通过查看模块的 __file__ 属性来询问模块的来源。这在调试路径问题时很有用。

* * *

## 回答 #86

> 赞同：13
> 
> 时间：2008-09-20T20:09:34.393

一些**内置**的收藏夹，map()、reduce() 和 filter()。所有这些都非常快速和强大。

* * *

## 回答 #87

> 赞同：13
> 
> 时间：2009-06-09T03:14:25.843

一个词：[IPython](http://ipython.scipy.org/moin/)

标签内省，漂亮的打印，，`%debug`历史管理，`pylab`......非常值得花时间好好学习。

* * *

## 回答 #88

> 赞同：13
> 
> 时间：2009-12-30T23:29:34.937

**猜测整数基数**

```
>>> int('10', 0)
10
>>> int('0x10', 0)
16
>>> int('010', 0)  # does not work on Python 3.x
8
>>> int('0o10', 0)  # Python >=2.6 and Python 3.x
8
>>> int('0b10', 0)  # Python >=2.6 and Python 3.x
2 
```

* * *

## 回答 #89

> 赞同：12
> 
> 时间：2008-09-22T23:56:40.773

您可以从一组长度为 2 的序列中构建字典。当你有一个值列表和一个数组列表时非常方便。

```
>>> dict([ ('foo','bar'),('a',1),('b',2) ])
{'a': 1, 'b': 2, 'foo': 'bar'}

>>> names = ['Bob', 'Marie', 'Alice']
>>> ages = [23, 27, 36]
>>> dict(zip(names, ages))
{'Alice': 36, 'Bob': 23, 'Marie': 27} 
```

* * *

## 回答 #90

> 赞同：12
> 
> 时间：2009-10-27T15:49:21.697

## 在子类中扩展属性（定义为描述符）

有时，扩展（修改）子类中描述符“返回”的值很有用。可以通过以下方式轻松完成`super()`：

```
class A(object):
    @property
    def prop(self):
        return {'a': 1}

class B(A):
    @property
    def prop(self):
        return dict(super(B, self).prop, b=2) 
```

将其存储`test.py`并运行`python -i test.py`（**另一个隐藏功能：`-i`选项执行脚本并允许您以交互模式继续**）：

```
>>> B().prop
{'a': 1, 'b': 2} 
```

* * *

## 回答 #91

> 赞同：11
> 
> 时间：2010-01-13T22:58:01.217

**创建枚举**

在 Python 中，您可以这样做来快速创建枚举：

```
>>> FOO, BAR, BAZ = range(3)
>>> FOO
0 
```

但是“枚举”不必具有整数值。你甚至可以这样做：

```
class Colors(object):
    RED, GREEN, BLUE, YELLOW = (255,0,0), (0,255,0), (0,0,255), (0,255,255)

#now Colors.RED is a 3-tuple that returns the 24-bit 8bpp RGB 
#value for saturated red 
```

* * *

## 回答 #92

> 赞同：11
> 
> 时间：2008-10-15T18:37:26.417

python的一个轻微的错误特征。将字符串列表连接在一起的正常快速方法是，

```
''.join(list_of_strings) 
```

* * *

## 回答 #93

> 赞同：11
> 
> 时间：2010-12-28T06:18:56.610

* * *

## 回答 #94

> 赞同：11
> 
> 时间：2011-03-05T08:26:14.027

`re.Scanner`班级。[http://code.activestate.com/recipes/457664-hidden-scanner-functionality-in-re-module/](http://code.activestate.com/recipes/457664-hidden-scanner-functionality-in-re-module/)

* * *

## 回答 #95

> 赞同：10
> 
> 时间：2008-09-23T10:34:35.263

**“解包”到函数参数**

```
def foo(a, b, c):
        print a, b, c

bar = (3, 14, 15)
foo(*bar) 
```

执行时打印：

```
3 14 15 
```

* * *

## 回答 #96

> 赞同：10
> 
> 时间：2009-01-02T18:48:52.363

`reversed()`内置的。在许多情况下，它使迭代更加清晰。

快速示例：

```
for i in reversed([1, 2, 3]):
    print(i) 
```

产生：

```
3
2
1 
```

但是，`reversed()`也适用于任意迭代器，例如文件中的行或生成器表达式。

* * *

## 回答 #97

> 赞同：10
> 
> 时间：2009-01-02T19:10:54.440

**Python之禅**

```
>>> import this
The Zen of Python, by Tim Peters

Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.
Flat is better than nested.
Sparse is better than dense.
Readability counts.
Special cases aren't special enough to break the rules.
Although practicality beats purity.
Errors should never pass silently.
Unless explicitly silenced.
In the face of ambiguity, refuse the temptation to guess.
There should be one-- and preferably only one --obvious way to do it.
Although that way may not be obvious at first unless you're Dutch.
Now is better than never.
Although never is often better than *right* now.
If the implementation is hard to explain, it's a bad idea.
If the implementation is easy to explain, it may be a good idea.
Namespaces are one honking great idea -- let's do more of those! 
```

* * *

## 回答 #98

> 赞同：10
> 
> 时间：2011-07-04T18:11:57.327

**`string-escape`和`unicode-escape`编码**

假设您有一个来自外部源的字符串，其中包含`\n`，`\t`依此类推。如何将它们转换为换行符或制表符？只需使用`string-escape`编码解码字符串！

```
>>> print s
Hello\nStack\toverflow
>>> print s.decode('string-escape')
Hello
Stack   overflow 
```

另一个问题。您有带有 unicode 文字的普通字符串，例如`\u01245`. 如何让它发挥作用？只需使用`unicode-escape`编码解码字符串！

```
>>> s = '\u041f\u0440\u0438\u0432\u0456\u0442, \u0441\u0432\u0456\u0442!'
>>> print s
\u041f\u0440\u0438\u0432\u0456\u0442, \u0441\u0432\u0456\u0442!
>>> print unicode(s)
\u041f\u0440\u0438\u0432\u0456\u0442, \u0441\u0432\u0456\u0442!
>>> print unicode(s, 'unicode-escape')
Привіт, світ! 
```

* * *

## 回答 #99

> 赞同：10
> 
> 时间：2011-02-10T15:14:31.327

在运行时更改函数标签：

```
>>> class foo:
...   def normal_call(self): print "normal_call"
...   def call(self): 
...     print "first_call"
...     self.call = self.normal_call

>>> y = foo()
>>> y.call()
first_call
>>> y.call()
normal_call
>>> y.call()
normal_call
... 
```

* * *

## 回答 #100

> 赞同：9
> 
> 时间：2008-09-22T06:32:00.020

[在 Python 中解压缩不需要](http://paddy3118.blogspot.com/2007/02/unzip-un-needed-in-python.html)

有人在博客中提到 Python 没有与 zip() 一起使用的解压缩函数。unzip 计算起来很简单，因为：

```
>>> t1 = (0,1,2,3)
>>> t2 = (7,6,5,4)
>>> [t1,t2] == zip(*zip(t1,t2))
True 
```

不过经过反思，我宁愿有一个明确的 unzip()。

* * *

## 回答 #101

> 赞同：9
> 
> 时间：2010-05-24T16:38:10.283

**Top Secret 属性**

```
>>> class A(object): pass
>>> a = A()
>>> setattr(a, "can't touch this", 123)
>>> dir(a)
['__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', "can't touch this"]
>>> a.can't touch this # duh
  File "<stdin>", line 1
    a.can't touch this
                     ^
SyntaxError: EOL while scanning string literal
>>> getattr(a, "can't touch this")
123
>>> setattr(a, "__class__.__name__", ":O")
>>> a.__class__.__name__
'A'
>>> getattr(a, "__class__.__name__")
':O' 
```

* * *

## 回答 #102

> 赞同：9
> 
> 时间：2009-03-02T18:16:53.783

创建具有相关数据的两个序列的字典

```
In [15]: t1 = (1, 2, 3)

In [16]: t2 = (4, 5, 6)

In [17]: dict (zip(t1,t2))
Out[17]: {1: 4, 2: 5, 3: 6} 
```

* * *

## 回答 #103

> 赞同：9
> 
> 时间：2011-01-24T06:13:14.223

**动态添加的属性**

如果您考虑通过调用它们来为您的类添加一些属性，这可能会很有用。这可以通过覆盖[`__getattribute__`](http://docs.python.org/reference/datamodel.html#object.__getattribute__)使用点操作数时调用的成员函数来完成。因此，让我们看一个虚拟类，例如：

```
class Dummy(object):
    def __getattribute__(self, name):
        f = lambda: 'Hello with %s'%name
        return f 
```

当您实例化一个 Dummy 对象并进行方法调用时，您将获得以下信息：

```
>>> d = Dummy()
>>> d.b()
'Hello with b' 
```

最后，您甚至可以将属性设置为您的类，以便可以动态定义它。如果您使用 Python Web 框架并希望通过解析属性名称来进行查询，这可能会很有用。

我在 github 上有一个[要点，其中包含这个简单的代码以及一个朋友在 Ruby 上的等效代码。](https://gist.github.com/792865)

小心！

* * *

## 回答 #104

> 赞同：9
> 
> 时间：2011-07-09T02:09:45.827

## [`list`](http://www.python.org/doc//current/library/stdtypes.html#sequence-types-str-unicode-list-tuple-buffer-xrange)用[`sum()`](http://www.python.org/doc/current/library/functions.html#sum)展平 a

[`sum()`](http://www.python.org/doc/current/library/functions.html#sum)内置函数可用于s一起，提供了一种方便的方法来展平 a的s：[`__add__`](http://www.python.org/doc//current/reference/datamodel.html#object.__add__) [`list`](http://www.python.org/doc//current/library/stdtypes.html#sequence-types-str-unicode-list-tuple-buffer-xrange)[`list`](http://www.python.org/doc//current/library/stdtypes.html#sequence-types-str-unicode-list-tuple-buffer-xrange)[`list`](http://www.python.org/doc//current/library/stdtypes.html#sequence-types-str-unicode-list-tuple-buffer-xrange)

```
Python 2.7.1 (r271:86832, May 27 2011, 21:41:45) 
[GCC 4.2.1 (Apple Inc. build 5664)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> l = [[1, 2, 3], [4, 5], [6], [7, 8, 9]]
>>> sum(l, [])
[1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #105

> 赞同：9
> 
> 时间：2011-07-18T15:39:56.307

## 博格模式

这是来自[Alex Martelli](https://stackoverflow.com/users/95810/alex-martelli)的杀手。`Borg`共享状态的所有实例。这消除了使用单例模式的需要（实例在状态共享时无关紧要）并且相当优雅（但对于新类来说更复杂）。

的值`foo`可以在任何情况下重新分配，并且所有内容都会更新，您甚至可以重新分配整个字典。博格是一个完美的名字，[在这里](http://code.activestate.com/recipes/66531/)阅读更多。

```
class Borg:
    __shared_state = {'foo': 'bar'}
    def __init__(self):
        self.__dict__ = self.__shared_state
    # rest of your class here 
```

这非常适合共享 eventlet.GreenPool 来控制并发。

* * *

## 回答 #106

> 赞同：9
> 
> 时间：2011-01-07T22:00:46.373

## namedtuple 是一个元组

```
>>> node = namedtuple('node', "a b")
>>> node(1,2) + node(5,6)
(1, 2, 5, 6)
>>> (node(1,2), node(5,6))
(node(a=1, b=2), node(a=5, b=6))
>>> 
```

一些更多的实验来回应评论：

```
>>> from collections import namedtuple
>>> from operator import *
>>> mytuple = namedtuple('A', "a b")
>>> yourtuple = namedtuple('Z', "x y")
>>> mytuple(1,2) + yourtuple(5,6)
(1, 2, 5, 6)
>>> q = [mytuple(1,2), yourtuple(5,6)]
>>> q
[A(a=1, b=2), Z(x=5, y=6)]
>>> reduce(operator.__add__, q)
(1, 2, 5, 6) 
```

所以，`namedtuple`是 的一个*有趣*的子类型`tuple`。

* * *

## 回答 #107

> 赞同：8
> 
> 时间：2010-04-06T00:58:22.990

threading.enumerate() 可以访问系统中的所有 Thread 对象，而 sys._current_frames() 返回系统中所有线程的当前堆栈帧，因此将这两者结合起来，您将获得 Java 风格的堆栈转储：

```
def dumpstacks(signal, frame):
    id2name = dict([(th.ident, th.name) for th in threading.enumerate()])
    code = []
    for threadId, stack in sys._current_frames().items():
        code.append("\n# Thread: %s(%d)" % (id2name[threadId], threadId))
        for filename, lineno, name, line in traceback.extract_stack(stack):
            code.append('File: "%s", line %d, in %s' % (filename, lineno, name))
            if line:
                code.append("  %s" % (line.strip()))
    print "\n".join(code)

import signal
signal.signal(signal.SIGQUIT, dumpstacks) 
```

在多线程 python 程序的开头执行此操作，您可以随时通过发送 SIGQUIT 访问线程的当前状态。您也可以选择 signal.SIGUSR1 或 signal.SIGUSR2。

[看](https://stackoverflow.com/questions/132058/getting-stack-trace-from-a-running-python-application/2569696#2569696)

* * *

## 回答 #108

> 赞同：8
> 
> 时间：2009-01-12T11:38:56.197

**pdb — Python 调试器**

作为程序员，您需要进行认真的程序开发的第一件事就是调试器。Python 有一个内置模块，它可以作为一个名为 pdb 的模块使用（自然是“Python 调试器”！）。

[http://docs.python.org/library/pdb.html](http://docs.python.org/library/pdb.html)

* * *

## 回答 #109

> 赞同：7
> 
> 时间：2009-03-10T22:47:20.587

[检查](http://docs.python.org/library/inspect.html?highlight=inspect#retrieving-source-code)模块也是一个很酷的功能。

* * *

## 回答 #110

> 赞同：7
> 
> 时间：2010-08-20T21:38:24.087

原始字符串中的反斜杠仍然可以转义引号。看到这个：

```
>>> print repr(r"aaa\"bbb")
'aaa\\"bbb' 
```

请注意，反斜杠和双引号都出现在最终字符串中。

因此，您不能以反斜杠结束原始字符串：

```
>>> print repr(r"C:\")
SyntaxError: EOL while scanning string literal
>>> print repr(r"C:\"")
'C:\\"' 
```

发生这种情况是因为实现了原始字符串以帮助编写正则表达式，而不是编写 Windows 路径。在 Gotcha 阅读有关此问题的长篇讨论[— Windows 文件名中的反斜杠](http://pythonconquerstheuniverse.wordpress.com/2008/06/04/gotcha-%E2%80%94-backslashes-in-windows-filenames/)。

* * *

## 回答 #111

> 赞同：7
> 
> 时间：2008-11-28T20:34:37.037

...[默认值为](http://docs.python.org/library/stdtypes.html#dict.get)`dict.get()`None，从而避免 KeyErrors：

```
In [1]: test = { 1 : 'a' }

In [2]: test[2]
---------------------------------------------------------------------------
<type 'exceptions.KeyError'>              Traceback (most recent call last)

&lt;ipython console&gt; in <module>()

<type 'exceptions.KeyError'>: 2

In [3]: test.get( 2 )

In [4]: test.get( 1 )
Out[4]: 'a'

In [5]: test.get( 2 ) == None
Out[5]: True 
```

甚至在“现场”指定这个：

```
In [6]: test.get( 2, 'Some' ) == 'Some'
Out[6]: True 
```

您可以使用`setdefault(`) 设置一个值，如果它不存在则返回：

```
>>> a = {}
>>> b = a.setdefault('foo', 'bar')
>>> a
{'foo': 'bar'}
>>> b
'bar 
```

* * *

## 回答 #112

> 赞同：7
> 
> 时间：2009-06-09T03:27:08.563

重新加载模块启用“实时编码”风格。但是类实例不会更新。这就是为什么，以及如何解决它。记住，一切，是的，*一切*都是对象。

```
>>> from a_package import a_module
>>> cls = a_module.SomeClass
>>> obj = cls()
>>> obj.method()
(old method output) 
```

现在您更改 a_module.py 中的方法并想要更新您的对象。

```
>>> reload(a_module)
>>> a_module.SomeClass is cls
False # Because it just got freshly created by reload.
>>> obj.method()
(old method output) 
```

这是更新它的一种方法（但考虑使用剪刀运行）：

```
>>> obj.__class__ is cls
True # it's the old class object
>>> obj.__class__ = a_module.SomeClass # pick up the new class
>>> obj.method()
(new method output) 
```

这是“用剪刀运行”，因为对象的内部状态可能与新类所期望的不同。这适用于非常简单的情况，但除此之外，`pickle`是你的朋友。不过，理解它为什么会起作用仍然很有帮助。

* * *

## 回答 #113

> 赞同：7
> 
> 时间：2011-06-26T20:04:13.070

列表中的无限递归

```
>>> a = [1,2]
>>> a.append(a)
>>> a
[1, 2, [...]]
>>> a[2]
[1, 2, [...]]
>>> a[2][2][2][2][2][2][2][2][2] == a
True 
```

* * *

## 回答 #114

> 赞同：7
> 
> 时间：2011-01-23T17:37:30.453

运算符可以称为函数：

```
from operator import add
print reduce(add, [1,2,3,4,5,6]) 
```

* * *

## 回答 #115

> 赞同：6
> 
> 时间：2009-01-01T16:14:19.923

您可以使用元类覆盖类的 mro

```
>>> class A(object):
...     def a_method(self):
...         print("A")
... 
>>> class B(object):
...     def b_method(self):
...         print("B")
... 
>>> class MROMagicMeta(type):
...     def mro(cls):
...         return (cls, B, object)
... 
>>> class C(A, metaclass=MROMagicMeta):
...     def c_method(self):
...         print("C")
... 
>>> cls = C()
>>> cls.c_method()
C
>>> cls.a_method()
Traceback (most recent call last):
 File "<stdin>", line 1, in <module>
AttributeError: 'C' object has no attribute 'a_method'
>>> cls.b_method()
B
>>> type(cls).__bases__
(<class '__main__.A'>,)
>>> type(cls).__mro__
(<class '__main__.C'>, <class '__main__.B'>, <class 'object'>) 
```

它可能是有充分理由的。:)

* * *

## 回答 #116

> 赞同：6
> 
> 时间：2008-09-21T22:12:38.613

内置方法或函数没有实现描述符协议，这使得不可能做这样的事情：

```
>>> class C(object):
...  id = id
... 
>>> C().id()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: id() takes exactly one argument (0 given) 
```

但是，您可以创建一个小的绑定描述符来实现这一点：

```
>>> from types import MethodType
>>> class bind(object):
...  def __init__(self, callable):
...   self.callable = callable
...  def __get__(self, obj, type=None):
...   if obj is None:
...    return self
...   return MethodType(self.callable, obj, type)
... 
>>> class C(object):
...  id = bind(id)
... 
>>> C().id()
7414064 
```

* * *

## 回答 #117

> 赞同：6
> 
> 时间：2009-06-18T15:45:23.943

您可以用类装饰函数 - 用类实例替换函数：

```
class countCalls(object):
    """ decorator replaces a function with a "countCalls" instance
    which behaves like the original function, but keeps track of calls

    >>> @countCalls
    ... def doNothing():
    ...     pass
    >>> doNothing()
    >>> doNothing()
    >>> print doNothing.timesCalled
    2
    """
    def __init__ (self, functionToTrack):
        self.functionToTrack = functionToTrack
        self.timesCalled = 0
    def __call__ (self, *args, **kwargs):
        self.timesCalled += 1
        return self.functionToTrack(*args, **kwargs) 
```

* * *

## 回答 #118

> 赞同：6
> 
> 时间：2009-02-25T10:29:19.520

小整数对象（-5 .. 256）从未创建过两次：

```
 >>> a1 = -5; b1 = 256
>>> a2 = -5; b2 = 256
>>> id(a1) == id(a2), id(b1) == id(b2)
(True, True)
>>>
>>> c1 = -6; d1 = 257
>>> c2 = -6; d2 = 257
>>> id(c1) == id(c2), id(d1) == id(d2)
(False, False)
>>> 

```

编辑：列表对象永远不会被破坏（仅列表中的对象）。Python 有一个数组，其中最多可以保存 80 个空列表。当您销毁列表对象时-python 将其放入该数组，当您创建新列表时-python 从该数组中获取最后放置的列表：

```
 >>> a = [1,2,3]; a_id = id(a)
>>> b = [1,2,3]; b_id = id(b)
>>> del a; del b
>>> c = [1,2,3]; id(c) == b_id
True
>>> d = [1,2,3]; id(d) == a_id
True
>>> 

```

* * *

## 回答 #119

> 赞同：6
> 
> 时间：2008-10-12T23:19:49.157

**嵌套函数参数重新绑定**

```
def create_printers(n):
    for i in xrange(n):
        def printer(i=i): # Doesn't work without the i=i
            print i
        yield printer 
```

* * *

## 回答 #120

> 赞同：6
> 
> 时间：2008-09-19T13:19:13.437

甚至可以替代文件删除、文件打开等内容 - 直接操作语言库。这是测试时的巨大优势**。**您不必将所有东西都包装在复杂的容器中。只需替换一个函数/方法即可。这也称为**猴子修补。**

* * *

## 回答 #121

> 赞同：6
> 
> 时间：2009-12-03T04:23:14.430

**操纵递归限制**

使用 sys.getrecursionlimit() 和 sys.setrecursionlimit() 获取或设置最大递归深度。

我们可以限制它以防止无限递归导致的堆栈溢出。

* * *

## 回答 #122

> 赞同：6
> 
> 时间：2010-07-19T12:01:21.573

如果在序列的最后一个元素之后找到逗号，Python 2.x 会忽略逗号：

```
>>> a_tuple_for_instance = (0,1,2,3,)
>>> another_tuple = (0,1,2,3)
>>> a_tuple_for_instance == another_tuple
True 
```

尾随逗号导致单个带括号的元素被视为一个序列：

```
>>> a_tuple_with_one_element = (8,) 
```

* * *

## 回答 #123

> 赞同：6
> 
> 时间：2010-07-22T20:03:20.650

切片作为左值。这个 Eratosthenes 筛产生一个具有质数或 0 的列表。元素在循环中的切片分配中被 0 淘汰。

```
def eras(n):
    last = n + 1
    sieve = [0,0] + list(range(2, last))
    sqn = int(round(n ** 0.5))
    it = (i for i in xrange(2, sqn + 1) if sieve[i])
    for i in it:
        sieve[i*i:last:i] = [0] * (n//i - i + 1)
    return filter(None, sieve) 
```

要工作，左边的切片必须在右边分配一个相同长度的列表。

* * *

## 回答 #124

> 赞同：6
> 
> 时间：2010-07-16T13:46:10.837

**切片和可变性**

复制列表

```
>>> x = [1,2,3]
>>> y = x[:]
>>> y.pop()
3
>>> y
[1, 2]
>>> x
[1, 2, 3] 
```

替换列表

```
>>> x = [1,2,3]
>>> y = x
>>> y[:] = [4,5,6]
>>> x
[4, 5, 6] 
```

* * *

## 回答 #125

> 赞同：6
> 
> 时间：2011-12-29T16:55:14.810

整数舍入：Python 有函数 round，它返回 double 类型的数字：

```
 >>> print round(1123.456789, 4)
1123.4568
 >>> print round(1123.456789, 2)
1123.46
 >>> print round(1123.456789, 0)
1123.0 
```

这个函数有一个奇妙的神奇属性：

```
 >>> print round(1123.456789, -1)
1120.0
 >>> print round(1123.456789, -2)
1100.0 
```

如果您需要整数作为结果，请使用 int 转换类型：

```
 >>> print int(round(1123.456789, -2))
1100
 >>> print int(round(8359980, -2))
8360000 
```

谢谢格雷戈尔。[_](http://mail.python.org/pipermail/tutor/2003-August/024395.html)

* * *

## 回答 #126

> 赞同：5
> 
> 时间：2008-09-19T15:55:40.173

懒得初始化字典中的每个字段？没问题：

在 Python > 2.3 中：

```
from collections import defaultdict 
```

在 Python <= 2.3 中：

```
def defaultdict(type_):
    class Dict(dict):
        def __getitem__(self, key):
            return self.setdefault(key, type_())
    return Dict() 
```

在任何版本中：

```
d = defaultdict(list)
for stuff in lots_of_stuff:
     d[stuff.name].append(stuff) 
```

**更新：**

谢谢[肯·阿诺德](https://stackoverflow.com/users/69707/ken-arnold)。我重新实现了一个更复杂的 defaultdict 版本。它的行为应该[与标准库中的](http://docs.python.org/library/collections.html#collections.defaultdict)完全一样。

```
def defaultdict(default_factory, *args, **kw):                              

    class defaultdict(dict):

        def __missing__(self, key):
            if default_factory is None:
                raise KeyError(key)
            return self.setdefault(key, default_factory())

        def __getitem__(self, key):
            try:
                return dict.__getitem__(self, key)
            except KeyError:
                return self.__missing__(key)

    return defaultdict(*args, **kw) 
```

* * *

## 回答 #127

> 赞同：5
> 
> 时间：2008-09-21T21:57:37.790

如果您在类上使用描述符，Python 会完全绕过`__dict__`该键，这使得它成为存储此类值的好地方：

```
>>> class User(object):
...  def _get_username(self):
...   return self.__dict__['username']
...  def _set_username(self, value):
...   print 'username set'
...   self.__dict__['username'] = value
...  username = property(_get_username, _set_username)
...  del _get_username, _set_username
... 
>>> u = User()
>>> u.username = "foo"
username set
>>> u.__dict__
{'username': 'foo'} 
```

这有助于保持`dir()`清洁。

* * *

## 回答 #128

> 赞同：5
> 
> 时间：2008-09-19T11:53:55.917

**列表推导**

[列表推导](http://www.secnetix.de/olli/Python/list_comprehensions.hawk)

比较更传统的（没有列表理解）：

```
foo = []
for x in xrange(10):
  if x % 2 == 0:
     foo.append(x) 
```

至：

```
foo = [x for x in xrange(10) if x % 2 == 0] 
```

* * *

## 回答 #129

> 赞同：5
> 
> 时间：2008-09-22T18:48:03.743

**__getattr__()**

`getattr`是创建泛型类的一种非常好的方法，如果您正在编写 API，这尤其有用。例如，在[FogBugz Python API](http://support.fogcreek.com/default.asp?W1048)中，`getattr`用于将方法调用无缝地传递给 Web 服务：

```
class FogBugz:
    ...

    def __getattr__(self, name):
        # Let's leave the private stuff to Python
        if name.startswith("__"):
            raise AttributeError("No such attribute '%s'" % name)

        if not self.__handlerCache.has_key(name):
            def handler(**kwargs):
                return self.__makerequest(name, **kwargs)
            self.__handlerCache[name] = handler
        return self.__handlerCache[name]
    ... 
```

当有人调用`FogBugz.search(q='bug')`时，他们实际上并没有调用`search`方法。相反，`getattr`通过创建一个包装该方法的新函数来处理调用，该`makerequest`方法为 Web API 制作适当的 HTTP 请求。任何错误都将由 Web 服务分派并传回给用户。

* * *

## 回答 #130

> 赞同：5
> 
> 时间：2008-10-16T10:52:13.827

[进口反重力](http://xkcd.com/353/)

* * *

## 回答 #131

> 赞同：5
> 
> 时间：2011-06-20T14:54:56.223

**简单的内置基准测试工具**

Python 标准库带有一个非常易于使用的基准测试模块，称为“timeit”。您甚至可以从命令行使用它来查看几种语言结构中哪一种是最快的。

例如，

```
% python -m timeit 'r = range(0, 1000)' 'for i in r: pass'
10000 loops, best of 3: 48.4 usec per loop

% python -m timeit 'r = xrange(0, 1000)' 'for i in r: pass'
10000 loops, best of 3: 37.4 usec per loop 
```

* * *

## 回答 #132

> 赞同：5
> 
> 时间：2011-08-16T10:03:29.270

这是2个复活节彩蛋：

* * *

python本身的一个：

```
>>> import __hello__
Hello world... 
```

* * *

模块中的另一个`Werkzeug`，显示起来有点复杂，这里是：

通过查看`Werkzeug`的源代码，在 中`werkzeug/__init__.py`，有一行应该引起您的注意：

```
'werkzeug._internal':   ['_easteregg'] 
```

如果你有点好奇，这应该会引导你看一下，在`werkzeug/_internal.py`那里，你会发现一个`_easteregg()`函数，它在参数中接受一个 wsgi 应用程序，它还包含一些 base64 编码数据和 2 个嵌套函数，这似乎如果`macgybarchakku`在查询字符串中找到名为的参数，请执行一些特殊操作。

所以，为了展示这个彩蛋，似乎你需要在`_easteregg()`函数中包装一个应用程序，让我们开始吧：

```
from werkzeug import Request, Response, run_simple
from werkzeug import _easteregg

@Request.application
def application(request):
    return Response('Hello World!')

run_simple('localhost', 8080, _easteregg(application)) 
```

现在，如果您运行应用程序并访问[http://localhost:8080/?macgybarchakku](http://localhost:8080/?macgybarchakku)，您应该会看到复活节彩蛋。

* * *

## 回答 #133

> 赞同：5
> 
> 时间：2011-02-17T01:44:42.777

I'm not sure where (or whether) this is in the Python docs, but for python 2.x (at least 2.5 and 2.6, which I just tried), the `print` statement can be called with parenthenses. This can be useful if you want to be able to easily port some Python 2.x code to Python 3.x.

Example: `print('We want Moshiach Now')` should print `We want Moshiach Now` work in python 2.5, 2.6, and 3.x.

Also, the `not` operator can be called with parenthenses in Python 2 and 3: `not False` and `not(False)` should both return `True`.

Parenthenses might also work with other statements and operators.

**EDIT**: NOT a good idea to put parenthenses around `not` operators (and probably any other operators), since it can make for surprising situations, like so (this happens because the parenthenses are just really around the `1`):

```
>>> (not 1) == 9
False

>>> not(1) == 9
True 
```

This also can work, for some values (I think where it is not a valid identifier name), like this: `not'val'` should return `False`, and `print'We want Moshiach Now'` should return `We want Moshiach Now`. (but `not552` would raise a NameError since it is a valid identifier name).

* * *

## 回答 #134

> 赞同：5
> 
> 时间：2011-06-14T01:49:41.833

## `getattr`接受第三个参数

`getattr(obj, attribute_name, default)`就好像：

```
try:
    return obj.attribute
except AttributeError:
    return default 
```

除了`attribute_name`可以是任何字符串。

这对于[鸭子打字](http://en.wikipedia.org/wiki/Duck_typing)非常有用。也许你有类似的东西：

```
class MyThing:
    pass
class MyOtherThing:
    pass
if isinstance(obj, (MyThing, MyOtherThing)):
    process(obj) 
```

（顺便说一句，`isinstance(obj, (a,b))`意思是`isinstance(obj, a) or isinstance(obj, b)`。）

当你制作一种新的东西时，你需要将它添加到它出现的任何地方的元组中。（这种结构在重新加载模块或以两个名称导入同一个文件时也会导致问题。这种情况比人们愿意承认的要多。）但是你可以说：

```
class MyThing:
    processable = True
class MyOtherThing:
    processable = True
if getattr(obj, 'processable', False):
    process(obj) 
```

添加继承，它会变得更好：所有可处理对象的示例都可以继承自

```
class Processable:
    processable = True 
```

但是您不必说服所有人从您的基类继承，只需设置一个属性。

* * *

## 回答 #135

> 赞同：5
> 
> 时间：2009-11-03T13:10:07.427

pythonic 成语`x = ... if ... else ...`远远优于，`x = ... and ... or ...`原因如下：

虽然声明

```
x = 3 if (y == 1) else 2 
```

相当于

```
x = y == 1 and 3 or 2 
```

如果你使用这个`x = ... and ... or ...`成语，有一天你可能会被这个棘手的情况所困扰：

```
x = 0 if True else 1    # sets x equal to 0 
```

因此不等于

```
x = True and 0 or 1   # sets x equal to 1 
```

有关执行此操作的正确方法的更多信息，请参阅[Python 的隐藏功能](https://stackoverflow.com/questions/101268/hidden-features-of-python/116480#116480)。

* * *

## 回答 #136

> 赞同：5
> 
> 时间：2012-01-18T16:12:29.537

字典理解

```
>>> {i: i**2 for i in range(5)}
{0: 0, 1: 1, 2: 4, 3: 9, 4: 16} 
```

[Python 文档](http://docs.python.org/dev/reference/expressions.html?highlight=comprehensions#dictionary-displays)

[维基百科条目](http://en.wikipedia.org/wiki/List_comprehension#Dictionary_comprehension)

* * *

## 回答 #137

> 赞同：5
> 
> 时间：2009-10-21T18:44:16.857

***暴露可变缓冲区***

使用 Python[缓冲区协议](http://docs.python.org/c-api/buffer.html)在 Python (2.5/2.6) 中公开*可变的面向字节的缓冲区。*

（抱歉，这里没有代码。需要使用低级 C API 或现有的适配器模块）。

* * *

## 回答 #138

> 赞同：5
> 
> 时间：2010-01-13T22:46:27.760

**猴子修补对象**

Python 中的每个对象都有一个`__dict__`成员，用于存储对象的属性。因此，您可以执行以下操作：

```
class Foo(object):
    def __init__(self, arg1, arg2, **kwargs):
        #do stuff with arg1 and arg2
        self.__dict__.update(kwargs)

f = Foo('arg1', 'arg2', bar=20, baz=10)
#now f is a Foo object with two extra attributes 
```

这可以被用来向对象任意添加属性和功能。这也可以被利用来创建一个快速和肮脏的`struct`类型。

```
class struct(object):
    def __init__(**kwargs):
       self.__dict__.update(kwargs)

s = struct(foo=10, bar=11, baz="i'm a string!') 
```

* * *

## 回答 #139

> 赞同：5
> 
> 时间：2012-01-18T16:17:28.890

设置理解

```
>>> {i**2 for i in range(5)}                                                       
set([0, 1, 4, 16, 9]) 
```

[Python 文档](http://docs.python.org/dev/reference/expressions.html?highlight=comprehensions#set-displays)

[维基百科条目](http://en.wikipedia.org/wiki/List_comprehension#Set_comprehension)

* * *

## 回答 #140

> 赞同：5
> 
> 时间：2011-03-05T08:06:59.980

除了前面提到的[haridsv](https://stackoverflow.com/questions/101268/hidden-features-of-python/2582013#2582013)：

```
>>> foo = bar = baz = 1
>>> foo, bar, baz
(1, 1, 1) 
```

也可以这样做：

```
>>> foo, bar, baz = 1, 2, 3
>>> foo, bar, baz
(1, 2, 3) 
```

* * *

## 回答 #141

> 赞同：4
> 
> 时间：2008-09-24T03:03:20.940

一切的第一类（“一切都是对象”），以及这可能造成的混乱。

```
>>> x = 5
>>> y = 10
>>> 
>>> def sq(x):
...   return x * x
... 
>>> def plus(x):
...   return x + x
... 
>>> (sq,plus)[y>x](y)
20 
```

最后一行创建一个包含两个函数的元组，然后计算 y>x (True) 并将其用作元组的索引（通过将其转换为 int, 1），然后使用参数 y 调用该函数并显示结果。

为了进一步滥用，如果您返回一个带有索引的对象（例如列表），您可以在末尾添加更多方括号；如果内容是可调用的，更多的括号，等等。对于额外的变态，使用这样的代码的结果作为另一个示例中的表达式（即用此代码替换 y>x）：

```
(sq,plus)[y>x](y)[4](x) 
```

这展示了 Python 的两个方面 - 将“一切都是对象”的哲学发挥到了极致，以及对语言语法的不当或构思不当使用可能导致完全不可读、不可维护的意大利面条代码的方法，这些代码适合单个表达式.

* * *

## 回答 #142

> 赞同：4
> 
> 时间：2011-03-27T02:29:50.763

Python3 中的 Unicode 标识符：

```
>>> 'Unicode字符_تكوين_Variable'.isidentifier()
True
>>> Unicode字符_تكوين_Variable='Python3 rules!'
>>> Unicode字符_تكوين_Variable
'Python3 rules!' 
```

* * *

## 回答 #143

> 赞同：4
> 
> 时间：2010-04-06T00:47:03.003

您可以将多个变量分配给相同的值

```
>>> foo = bar = baz = 1
>>> foo, bar, baz
(1, 1, 1) 
```

以紧凑的方式将多个变量初始化为 None 很有用。

* * *

## 回答 #144

> 赞同：4
> 
> 时间：2008-10-12T22:40:18.767

利用 python 的动态特性，在 python 语法中拥有一个应用程序配置文件。例如，如果您在配置文件中有以下内容：

```
{
  "name1": "value1",
  "name2": "value2"
} 
```

然后你可以像这样简单地阅读它：

```
config = eval(open("filename").read()) 
```

* * *

## 回答 #145

> 赞同：4
> 
> 时间：2008-09-23T09:41:41.367

for 循环、列表推导和生成器表达式中的元组解包：

```
>>> l=[(1,2),(3,4)]
>>> [a+b for a,b in l ] 
[3,7] 
```

在这个习惯用法中用于迭代字典中的（键，数据）对：

```
d = { 'x':'y', 'f':'e'}
for name, value in d.items():  # one can also use iteritems()
   print "name:%s, value:%s" % (name,value) 
```

印刷：

```
name:x, value:y
name:f, value:e 
```

* * *

## 回答 #146

> 赞同：4
> 
> 时间：2008-09-19T11:55:26.117

**特殊方法**

[绝对力量！](http://docs.python.org/ref/specialnames.html)

* * *

## 回答 #147

> 赞同：4
> 
> 时间：2008-10-20T11:59:39.307

**对象实例的方法替换**

您可以替换已创建的对象实例的方法。它允许您创建具有不同（异常）功能的对象实例：

```
>>> class C(object):
...     def fun(self):
...         print "C.a", self
...
>>> inst = C()
>>> inst.fun()  # C.a method is executed
C.a <__main__.C object at 0x00AE74D0>
>>> instancemethod = type(C.fun)
>>>
>>> def fun2(self):
...     print "fun2", self
...
>>> inst.fun = instancemethod(fun2, inst, C)  # Now we are replace C.a by fun2
>>> inst.fun()  # ... and fun2 is executed
fun2 <__main__.C object at 0x00AE74D0> 
```

我们可以`C.a`被替换为`fun2()`实例`inst`（`self`没有改变）。

或者，我们可以使用`new`模块，但它自 Python 2.6 起就贬值了：

```
>>> def fun3(self):
...     print "fun3", self
...
>>> import new
>>> inst.fun = new.instancemethod(fun3, inst, C)
>>> inst.fun()
fun3 <__main__.C object at 0x00AE74D0> 
```

**节点：**这个解决方案不应该作为继承机制的通用替代！但在某些特定情况下（调试、模拟）可能非常方便。

**警告：**此解决方案不适用于内置类型和使用插槽的新样式类。

* * *

## 回答 #148

> 赞同：4
> 
> 时间：2009-06-18T15:54:00.943

通过少量的工作，线程模块变得非常容易使用。这个装饰器改变了一个函数，使它在自己的线程中运行，返回一个占位符类实例而不是它的常规结果。您可以通过检查 placeolder.result 来寻找答案，或者通过调用 placeholder.awaitResult() 等待它

```
def threadify(function):
    """
    exceptionally simple threading decorator. Just:
    >>> @threadify
    ... def longOperation(result):
    ...     time.sleep(3)
    ...     return result
    >>> A= longOperation("A has finished")
    >>> B= longOperation("B has finished")

    A doesn't have a result yet:
    >>> print A.result
    None

    until we wait for it:
    >>> print A.awaitResult()
    A has finished

    we could also wait manually - half a second more should be enough for B:
    >>> time.sleep(0.5); print B.result
    B has finished
    """
    class thr (threading.Thread,object):
        def __init__(self, *args, **kwargs):
            threading.Thread.__init__ ( self )  
            self.args, self.kwargs = args, kwargs
            self.result = None
            self.start()
        def awaitResult(self):
            self.join()
            return self.result        
        def run(self):
            self.result=function(*self.args, **self.kwargs)
    return thr 
```

* * *

## 回答 #149

> 赞同：4
> 
> 时间：2008-09-22T17:54:25.947

> 访问字典元素作为属性（属性）。因此，如果 a1=AttrDict() 具有键 'name' -> 而不是 a1['name'] 我们可以使用 -> a1.name 轻松访问 a1 的 name 属性

* * *

```
class AttrDict(dict):

    def __getattr__(self, name):
        if name in self:
            return self[name]
        raise AttributeError('%s not found' % name)

    def __setattr__(self, name, value):
        self[name] = value

    def __delattr__(self, name):
        del self[name]

person = AttrDict({'name': 'John Doe', 'age': 66})
print person['name']
print person.name

person.name = 'Frodo G'
print person.name

del person.age

print person 
```

* * *

## 回答 #150

> 赞同：4
> 
> 时间：2011-01-07T16:00:50.943

**插入与追加**

不是功能，但可能很有趣

假设您想在列表中插入一些数据，然后将其反转。最简单的事情是

```
count = 10 ** 5
nums = []
for x in range(count):
    nums.append(x)
nums.reverse() 
```

然后你会想：不如从头开始插入数字呢？所以：

```
count = 10 ** 5 
nums = [] 
for x in range(count):
    nums.insert(0, x) 
```

但它变慢了 100 倍！如果我们设置 count = 10 ** 6，它会慢 1000 倍；这是因为插入是 O(n^2)，而追加是 O(n)。

造成这种差异的原因是每次调用 insert 时都必须移动列表中的每个元素；append 只需在列表末尾添加元素（有时它必须重新分配所有内容，但它仍然更快）

* * *

## 回答 #151

> 赞同：4
> 
> 时间：2011-12-24T15:49:25.887

Python 对于非常意想不到的事情有例外：

**进口**

如果缺少库，这使您可以导入替代方案

```
try:
    import json
except ImportError:
    import simplejson as json 
```

**迭代**

For 循环在内部执行此操作，并捕获 StopIteration：

```
iter([]).next()
Traceback (most recent call last):
  File "<pyshell#4>", line 1, in <module>
    iter(a).next()
StopIteration 
```

**断言**

```
>>> try:
...     assert []
... except AssertionError:
...     print "This list should not be empty"
This list should not be empty 
```

虽然这对于一次检查来说更加冗长，但可以通过这种方式缩短混合异常和布尔运算符与相同错误消息的多个检查。

* * *

## 回答 #152

> 赞同：4
> 
> 时间：2010-07-16T18:42:51.403

结合拆包和打印功能：

```
# in 2.6 <= python < 3.0, 3.0 + the print function is native
from __future__ import print_function 

mylist = ['foo', 'bar', 'some other value', 1,2,3,4]  
print(*mylist) 
```

* * *

## 回答 #153

> 赞同：4
> 
> 时间：2010-02-13T22:09:00.667

Python 中没有秘密 ;)

* * *

## 回答 #154

> 赞同：4
> 
> 时间：2011-01-13T00:18:43.397

***模块*在其命名空间中导出所有内容**

包括从其他模块导入的名称！

```
# this is "answer42.py"
from operator import *
from inspect  import * 
```

现在测试可以从模块中导入的内容。

```
>>> import answer42
>>> answer42.__dict__.keys()
['gt', 'imul', 'ge', 'setslice', 'ArgInfo', 'getfile', 'isCallable', 'getsourcelines', 'CO_OPTIMIZED', 'le', 're', 'isgenerator', 'ArgSpec', 'imp', 'lt', 'delslice', 'BlockFinder', 'getargspec', 'currentframe', 'CO_NOFREE', 'namedtuple', 'rshift', 'string', 'getframeinfo', '__file__', 'strseq', 'iconcat', 'getmro', 'mod', 'getcallargs', 'isub', 'getouterframes', 'isdatadescriptor', 'modulesbyfile', 'setitem', 'truth', 'Attribute', 'div', 'CO_NESTED', 'ixor', 'getargvalues', 'ismemberdescriptor', 'getsource', 'isMappingType', 'eq', 'index', 'xor', 'sub', 'getcomments', 'neg', 'getslice', 'isframe', '__builtins__', 'abs', 'getmembers', 'mul', 'getclasstree', 'irepeat', 'is_', 'getitem', 'indexOf', 'Traceback', 'findsource', 'ModuleInfo', 'ipow', 'TPFLAGS_IS_ABSTRACT', 'or_', 'joinseq', 'is_not', 'itruediv', 'getsourcefile', 'dis', 'os', 'iand', 'countOf', 'getinnerframes', 'pow', 'pos', 'and_', 'lshift', '__name__', 'sequenceIncludes', 'isabstract', 'isbuiltin', 'invert', 'contains', 'add', 'isSequenceType', 'irshift', 'types', 'tokenize', 'isfunction', 'not_', 'istraceback', 'getmoduleinfo', 'isgeneratorfunction', 'getargs', 'CO_GENERATOR', 'cleandoc', 'classify_class_attrs', 'EndOfBlock', 'walktree', '__doc__', 'getmodule', 'isNumberType', 'ilshift', 'ismethod', 'ifloordiv', 'formatargvalues', 'indentsize', 'getmodulename', 'inv', 'Arguments', 'iscode', 'CO_NEWLOCALS', 'formatargspec', 'iadd', 'getlineno', 'imod', 'CO_VARKEYWORDS', 'ne', 'idiv', '__package__', 'CO_VARARGS', 'attrgetter', 'methodcaller', 'truediv', 'repeat', 'trace', 'isclass', 'ior', 'ismethoddescriptor', 'sys', 'isroutine', 'delitem', 'stack', 'concat', 'getdoc', 'getabsfile', 'ismodule', 'linecache', 'floordiv', 'isgetsetdescriptor', 'itemgetter', 'getblock']
>>> from answer42 import getmembers
>>> getmembers
<function getmembers at 0xb74b2924>
>>> 
```

这是一个很好的理由不去`from x import *`定义`__all__ =`。

* * *

## 回答 #155

> 赞同：3
> 
> 时间：2008-09-19T13:51:54.153

**Everything is dynamic**

"There is no compile-time". Everything in Python is runtime. A module is 'defined' by executing the module's source top-to-bottom, just like a script, and the resulting namespace is the module's attribute-space. Likewise, a class is 'defined' by executing the class body top-to-bottom, and the resulting namespace is the class's attribute-space. A class body can contain completely arbitrary code -- including import statements, loops and other class statements. Creating a class, function or even module 'dynamically', as is sometimes asked for, isn't hard; in fact, it's impossible to avoid, since everything is 'dynamic'.

* * *

## 回答 #156

> 赞同：3
> 
> 时间：2008-09-23T17:48:20.650

**布尔上下文中的对象**

空元组、列表、字典、字符串和许多其他对象在布尔上下文中等效于 False（非空等效于 True）。

```
empty_tuple = ()
empty_list = []
empty_dict = {}
empty_string = ''
empty_set = set()
if empty_tuple or empty_list or empty_dict or empty_string or empty_set:
  print 'Never happens!' 
```

这允许逻辑操作返回其操作数之一而不是 True/False，这在某些情况下很有用：

```
s = t or "Default value" # s will be assigned "Default value"
                         # if t is false/empty/none 
```

* * *

## 回答 #157

> 赞同：3
> 
> 时间：2009-07-06T17:28:20.297

如果您在通过 Pickle 加载用户保存的文件的应用程序中重命名了一个类，并且其中一个重命名的类存储在用户的旧保存中，您将无法加载该 pickle 文件。

但是，只需添加对您的类定义的引用，一切都很好：

例如，之前：

```
class Bleh:
    pass 
```

现在，

```
class Blah:
    pass 
```

因此，您用户的腌制保存文件包含对 Bleh 的引用，由于重命名，该引用不存在。修复？

```
Bleh = Blah 
```

简单的！

* * *

## 回答 #158

> 赞同：3
> 
> 时间：2011-10-12T15:27:35.000

**一次一屏打印多行字符串**

隐藏在`site._Printer`类中的不是真正有用的功能，其`license`对象是一个实例。后者在调用时会打印 Python 许可证。可以创建另一个相同类型的对象，传递一个字符串——例如文件的内容——作为第二个参数，然后调用它：

```
type(license)(0,open('textfile.txt').read(),0)() 
```

这将打印一次由一定数量的行分割的文件内容：

```
...
file row 21
file row 22
file row 23

Hit Return for more, or q (and Return) to quit: 
```

* * *

## 回答 #159

> 赞同：3
> 
> 时间：2010-07-19T15:51:01.023

```
** Using sets to reference contents in sets of frozensets** 
```

您可能知道，集合是可变的，因此不可散列，因此如果您想创建一组集合（或使用集合作为字典键），则有必要使用 freezesets：

```
>>> fabc = frozenset('abc')
>>> fxyz = frozenset('xyz')
>>> mset = set((fabc, fxyz))
>>> mset
{frozenset({'a', 'c', 'b'}), frozenset({'y', 'x', 'z'})} 
```

但是，可以仅使用普通集合来测试成员资格并删除/丢弃成员：

```
>>> abc = set('abc')
>>> abc in mset
True
>>> mset.remove(abc)
>>> mset
{frozenset({'y', 'x', 'z'})} 
```

引用 Python 标准库文档：

> 请注意， 、 和 方法的参数可能`elem`是 一个集合。为了支持搜索等效的frozenset，该 set 在搜索过程中临时变异，然后恢复。在搜索过程中，不应读取或更改该集合，因为它没有有意义的值。`__contains__()``remove()``discard()``elem``elem`

不幸的是，也许令人惊讶的是，字典并非如此：

```
>>> mdict = {fabc:1, fxyz:2}
>>> fabc in mdict
True
>>> abc in mdict
Traceback (most recent call last):
File "<interactive input>", line 1, in <module>
TypeError: unhashable type: 'set' 
```

* * *

## 回答 #160

> 赞同：3
> 
> 时间：2009-03-02T18:23:19.150

使用 and 和 or 模拟三次运算符。

python 中的 and 和 or 运算符返回对象本身而不是布尔值。因此：

```
In [18]: a = True

In [19]: a and 3 or 4
Out[19]: 3

In [20]: a = False

In [21]: a and 3 or 4
Out[21]: 4 
```

但是，Py 2.5 似乎添加了一个显式的三级运算符

```
 In [22]: a = 5 if True else '6'

    In [23]: a
    Out[23]: 5 
```

好吧，如果您确定您的 true 子句不会评估为 False，则此方法有效。例子：

```
>>> def foo(): 
...     print "foo"
...     return 0
...
>>> def bar(): 
...     print "bar"
...     return 1
...
>>> 1 and foo() or bar()
foo
bar
1 
```

为了让它正确，你只需要多做一点：

```
>>> (1 and [foo()] or [bar()])[0]
foo
0 
```

然而，这并不那么漂亮。如果您的 python 版本支持它，请使用条件运算符。

```
>>> foo() if True or bar()
foo
0 
```

* * *

## 回答 #161

> 赞同：3
> 
> 时间：2008-10-24T22:36:56.773

**功能支持。**

特别是生成器和生成器表达式。

Ruby 再次成为主流，但 Python 也可以做到这一点。在库中不像在 Ruby 中那样无处不在，这太糟糕了，但我更喜欢语法，它更简单。

因为它们并不普遍，所以我没有看到太多关于它们为什么有用的例子，但它们让我能够编写更清晰、更高效的代码。

* * *

## 回答 #162

> 赞同：3
> 
> 时间：2008-10-17T02:19:19.853

### 私有方法和数据隐藏（封装）

Python 中有一个常见的习惯用法，即通过为方法和其他类成员指定以下划线开头的名称来表示它们不打算成为类的外部 API 的一部分。这很方便并且在实践中工作得很好，但它给人一种错误的印象，即 Python 不支持对私有代码和/或数据的真正封装。事实上，Python 会自动为您提供[词法闭包](http://en.wikipedia.org/wiki/Lexical_closure)，这使得在情况确实需要时以更加防弹的方式封装数据变得非常容易。这是一个使用这种技术的类的人为示例：

```
class MyClass(object):
  def __init__(self):

    privateData = {}

    self.publicData = 123

    def privateMethod(k):
      print privateData[k] + self.publicData

    def privilegedMethod():
      privateData['foo'] = "hello "
      privateMethod('foo')

    self.privilegedMethod = privilegedMethod

  def publicMethod(self):
    print self.publicData 
```

这是一个人为的使用示例：

```
>>> obj = MyClass()
>>> obj.publicMethod()
123
>>> obj.publicData = 'World'
>>> obj.publicMethod()
World
>>> obj.privilegedMethod()
hello World
>>> obj.privateMethod()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'MyClass' object has no attribute 'privateMethod'
>>> obj.privateData
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'MyClass' object has no attribute 'privateData' 
```

关键是它根本不是 obj 的真正属性`privateMethod`，`privateData`所以它们不能从外部访问，也不能出现在`dir()`或类似的地方。它们是构造函数中的局部变量，在`__init__`. 但是，由于闭包的魔力，它们实际上是每个实例变量，与它们关联的对象具有相同的生命周期，即使除了（在此示例中）通过调用之外无法从外部访问它们`privilegedMethod`。通常这种非常严格的封装是矫枉过正的，但有时它确实可以非常方便地保持 API 或命名空间的干净。

在 Python 2.x 中，拥有可变私有状态的唯一方法是使用可变对象（例如本例中的 dict）。许多人评论说这有多烦人。Python 3.x 将通过引入[PEP 3104](http://www.python.org/dev/peps/pep-3104/)`nonlocal`中描述的关键字来消除此限制。

* * *

## 回答 #163

> 赞同：3
> 
> 时间：2011-06-30T01:04:25.500

虽然不是很pythonic，但您可以使用写入文件[`print`](http://docs.python.org/reference/simple_stmts.html#the-print-statement)

`print>>outFile, 'I am Being Written'`

[说明](http://docs.python.org/reference/simple_stmts.html#the-print-statement)：

> 这种形式有时被称为“<code>print chevron”。在这种形式中，>> 之后的第一个表达式必须计算为“类文件”对象，特别是具有上述 `write()`方法的对象。使用此扩展形式，后续表达式将打印到此文件对象。**如果第一个表达式的计算结果为`None`，则将 `sys.stdout`其用作输出文件。**

* * *

## 回答 #164

> 赞同：3
> 
> 时间：2009-10-20T06:35:25.390

测试键是否在字典中的简单方法：

```
>>> 'key' in { 'key' : 1 }
True

>>> d = dict(key=1, key2=2)
>>> if 'key' in d:
...     print 'Yup'
... 
Yup 
```

* * *

## 回答 #165

> 赞同：3
> 
> 时间：2011-02-22T21:34:21.140

### Python 有“私有”变量

以双下划线开头但不以双下划线结尾的变量成为私有变量，而不仅仅是按照惯例。实际上 __var 变成了 _Classname__var，其中 Classname 是创建变量的类。它们不是继承的，也不能被覆盖。

```
 >>> class A:
...     def __init__(self):
...             self.__var = 5
...     def getvar(self):
...             return self.__var
... 
>>> a = A()
>>> a.__var
Traceback (most recent call last):
  File "", line 1, in 
AttributeError: A instance has no attribute '__var'
>>> a.getvar()
5
>>> dir(a)
['_A__var', '__doc__', '__init__', '__module__', 'getvar']
>>> 
```

* * *

## 回答 #166

> 赞同：3
> 
> 时间：2009-08-27T02:14:14.043

事实上，一切都是对象，因此是可扩展的。我可以将成员变量作为元数据添加到我定义的函数中：

```
>>> def addInts(x,y): 
...    return x + y
>>> addInts.params = ['integer','integer']
>>> addInts.returnType = 'integer' 
```

这对于编写动态单元测试非常有用，例如

* * *

## 回答 #167

> 赞同：2
> 
> 时间：2009-09-09T13:01:23.597

getattr 内置函数：

```
>>> class C():
    def getMontys(self):
        self.montys = ['Cleese','Palin','Idle','Gilliam','Jones','Chapman']
        return self.montys

>>> c = C()
>>> getattr(c,'getMontys')()
['Cleese', 'Palin', 'Idle', 'Gilliam', 'Jones', 'Chapman']
>>> 
```

如果您想根据上下文调度函数，这很有用。请参阅 Dive Into Python ([这里](http://diveintopython.net/power_of_introspection/getattr.html))中的示例

* * *

## 回答 #168

> 赞同：2
> 
> 时间：2008-09-21T21:49:26.937

如果`exec`在函数中使用，变量查找规则会发生巨大变化。闭包不再可能，但 Python 允许在函数中使用任意标识符。这为您提供了一个“可修改的 locals()”，并可用于星号导入标识符。不利的一面是，它使每次查找都变慢了，因为变量最终出现在 dict 而不是帧中的插槽中：

```
>>> def f():
...  exec "a = 42"
...  return a
... 
>>> def g():
...  a = 42
...  return a
... 
>>> import dis
>>> dis.dis(f)
  2           0 LOAD_CONST               1 ('a = 42')
              3 LOAD_CONST               0 (None)
              6 DUP_TOP             
              7 EXEC_STMT           

  3           8 LOAD_NAME                0 (a)
             11 RETURN_VALUE        
>>> dis.dis(g)
  2           0 LOAD_CONST               1 (42)
              3 STORE_FAST               0 (a)

  3           6 LOAD_FAST                0 (a)
              9 RETURN_VALUE 
```

* * *

## 回答 #169

> 赞同：2
> 
> 时间：2009-11-14T13:05:23.777

关于 Nick Johnson 的[Property 类](https://stackoverflow.com/questions/101268/hidden-features-of-python/102062#102062)的实现（只是描述符的演示，当然，不是内置的替代品），我会包含一个引发 AttributeError 的 setter：

```
类属性（对象）：
    def __init__(self, fget):
        自我.fget = fget

    def __get__(self, obj, type):
        如果 obj 为无：
            回归自我
        返回 self.fget(obj)

    def __set__(self, obj, value):
       raise AttributeError, '只读属性'

```

包含 setter 使其成为数据描述符，而不是方法/非数据描述符。数据描述符优先于实例字典。现在一个实例不能有一个不同的对象分配给属性名称，并且尝试分配给该属性将引发属性错误。

* * *

## 回答 #170

> 赞同：2
> 
> 时间：2009-03-17T00:56:53.640

### `spam`标准 Python 中的模块

它用于测试目的。

我从[`ctypes`教程](http://starship.python.net/crew/theller/ctypes/tutorial.html)中选择了它。自己试试：

```
>>> import __hello__
Hello world...
>>> type(__hello__)
<type 'module'>
>>> from __phello__ import spam
Hello world...
Hello world...
>>> type(spam)
<type 'module'>
>>> help(spam)
Help on module __phello__.spam in __phello__:

NAME
    __phello__.spam

FILE
    c:\python26\<frozen> 
```

* * *

## 回答 #171

> 赞同：2
> 
> 时间：2011-05-27T14:08:33.090

曾经使用过 xrange(INT) 而不是 range(INT) .... 它的内存使用量更少，并且并不真正取决于整数的大小。耶！！那不是很好吗？

* * *

## 回答 #172

> 赞同：2
> 
> 时间：2012-02-02T17:16:36.410

```
>>> float('infinity')
inf
>>> float('NaN')
nan 
```

更多信息：

*   [http://docs.python.org/library/functions.html#float](http://docs.python.org/library/functions.html#float)
*   [http://www.python.org/dev/peps/pep-0754/](http://www.python.org/dev/peps/pep-0754/)
*   [python nan 和 inf 值](https://stackoverflow.com/questions/5438745/python-nan-and-inf-values)

* * *

## 回答 #173

> 赞同：2
> 
> 时间：2011-03-09T19:24:07.270

根本不是隐藏的功能，但仍然很好：

```
import os.path as op

root_dir = op.abspath(op.join(op.dirname(__file__), "..")) 
```

操作路径时节省大量字符！

* * *

## 回答 #174

> 赞同：2
> 
> 时间：2009-04-23T14:26:17.207

**内存管理**

Python 动态分配内存并使用垃圾回收来恢复未使用的空间。一旦对象超出范围，并且没有其他变量引用它，它将被恢复。我不必担心缓冲区溢出和缓慢增长的服务器进程。内存管理也是其他动态语言的一个特性，但 Python 做得很好。

当然，我们必须注意循环引用并保留对不再需要的对象的引用，但弱引用在这里有很大帮助。

* * *

## 回答 #175

> 赞同：2
> 
> 时间：2009-10-21T18:39:29.457

**类作为第一类对象（通过动态类定义显示）**

还要注意闭包的使用。如果这个特定示例看起来像是解决问题的“正确”方法，请仔细重新考虑......几次:)

```
def makeMeANewClass(parent, value):
  class IAmAnObjectToo(parent):
    def theValue(self):
      return value
  return IAmAnObjectToo

Klass = makeMeANewClass(str, "fred")
o = Klass()
print isinstance(o, str)  # => True
print o.theValue()        # => fred 
```

* * *

## 回答 #176

> 赞同：2
> 
> 时间：2012-01-21T06:22:09.187

不是真正的隐藏功能，但可能会派上用场。

用于成对循环列表中的项目

```
for x, y in zip(s, s[1:]): 
```

* * *

## 回答 #177

> 赞同：1
> 
> 时间：2011-06-19T15:35:02.193

mapreduce 使用 map 和 reduce 函数

以这种方式创建一个简单的 sumproduct ：

```
def sumprod(x,y):
    return reduce(lambda a,b:a+b, map(lambda a, b: a*b,x,y)) 
```

例子：

```
In [2]: sumprod([1,2,3],[4,5,6])
Out[2]: 32 
```

* * *

## 回答 #178

> 赞同：1
> 
> 时间：2011-12-09T07:18:25.953

`bash`不是编程功能，但在将 Python 与或一起使用时很有用`shell scripts`。

```
python -c"import os; print(os.getcwd());" 
```

请参阅[此处的 python 文档](http://docs.python.org/using/cmdline.html#cmdoption-unittest-discover-c)。[在此讨论](https://stackoverflow.com/questions/3637020/long-programs-using-python-c-switch)中可以看到编写**较长 Python 脚本**时需要注意的其他事项。

* * *

## 回答 #179

> 赞同：1
> 
> 时间：2008-09-19T13:25:43.763

```
>>> x=[1,1,2,'a','a',3]
>>> y = [ _x for _x in x if not _x in locals()['_[1]'] ]
>>> y
[1, 2, 'a', 3] 
```

“locals()['_[1]']”是正在创建的列表的“秘密名称”。当正在构建的列表状态影响后续构建决策时非常有用。

* * *

## 回答 #180

> 赞同：1
> 
> 时间：2012-01-13T21:35:06.707

Python 的位置和关键字扩展可以即时使用，而不仅仅是来自存储列表。

```
l=lambda x,y,z:x+y+z
a=1,2,3
print l(*a)
print l(*[a[0],2,3]) 
```

它通常对这样的事情更有用：

```
a=[2,3]
l(*(a+[3])) 
```

* * *

## 回答 #181

> 赞同：0
> 
> 时间：2012-01-09T08:57:08.433

reduce 和 operator 的一些很酷的功能。

```
>>> from operator import add,mul
>>> reduce(add,[1,2,3,4])
10
>>> reduce(mul,[1,2,3,4])
24
>>> reduce(add,[[1,2,3,4],[1,2,3,4]])
[1, 2, 3, 4, 1, 2, 3, 4]
>>> reduce(add,(1,2,3,4))
10
>>> reduce(mul,(1,2,3,4))
24 
```

* * *

## 回答 #182

> 赞同：0
> 
> 时间：2011-10-21T16:43:06.463

**脚本的交互式调试（和 doctest 字符串）**

我不认为这是众所周知的，但将此行添加到任何 python 脚本中：

`import pdb; pdb.set_trace()`

将导致 PDB 调试器在代码中的该点弹出运行光标。我认为，更鲜为人知的是，您可以在 doctest 中使用同一行：

```
"""
>>> 1 in (1,2,3)   
Becomes
>>> import pdb; pdb.set_trace(); 1 in (1,2,3)
""" 
```

然后，您可以使用调试器检查 doctest 环境。您不能真正单步执行 doctest，因为这些行都是自主运行的，但它是调试 doctest glob 和环境的好工具。

* * *

## 回答 #183

> 赞同：0
> 
> 时间：2011-09-05T07:46:47.897

这是我在调试类型错误时使用的一个有用的功能

```
def typePrint(object):
    print(str(object) + " - (" + str(type(object)) + ")") 
```

它只是打印输入，然后是类型，例如

```
>>> a = 101
>>> typePrint(a)
    101 - (<type 'int'>) 
```

* * *

## 回答 #184

> 赞同：0
> 
> 时间：2009-12-24T13:30:18.803

您可以根据需要构造函数 kwargs：

```
kwargs = {}
kwargs[str("%s__icontains" % field)] = some_value
some_function(**kwargs) 
```

不知何故需要 str() 调用，因为 python 抱怨它不是字符串。不知道为什么；）我将它用于 Django 对象模型中的动态过滤器：

```
result = model_class.objects.filter(**kwargs) 
```

* * *

## 回答 #185

> 赞同：0
> 
> 时间：2011-05-25T10:47:42.427

**将字符串相乘以使其重复**

```
print "SO"*5 
```

给

```
SOSOSOSOSO 
```

* * *

## 回答 #186

> 赞同：0
> 
> 时间：2011-12-07T18:49:03.793

在 Python 2 中，您可以通过用反引号括起来来生成表达式的字符串表示：

```
 >>> `sorted`
'<built-in function sorted>' 
```

这在 python 3.X 中消失了。

* * *

## 回答 #187

> 赞同：0
> 
> 时间：2011-05-26T18:01:29.837

**commands.getoutput**

如果您想获得一个函数的输出，该函数直接输出到`stdout`或`stderr`与 一样`os.system`，[`commands.getoutput`](http://docs.python.org/library/commands.html)来救援。整个模块是由真棒组成的。

```
>>> print commands.getoutput('ls')
myFile1.txt    myFile2.txt    myFile3.txt    myFile4.txt    myFile5.txt
myFile6.txt    myFile7.txt    myFile8.txt    myFile9.txt    myFile10.txt
myFile11.txt   myFile12.txt   myFile13.txt   myFile14.txt   module.py 
```

* * *

## 回答 #188

> 赞同：-2
> 
> 时间：2008-11-27T03:24:04.943

```
is_ok() and "Yes" or "No" 
```

* * *

## 回答 #189

> 赞同：-2
> 
> 时间：2011-09-26T19:55:45.050

```
for line in open('foo'):
    print(line) 
```

which is equivalent (but better) to:

```
f = open('foo', 'r')
for line in f.readlines():
   print(line)
f.close() 
```

* * *

## 回答 #190

> 赞同：-5
> 
> 时间：2011-07-27T22:52:20.193

在接受它的 IDE 中激活自动完成功能（如 IDLE、Editra、IEP），而不是制作：“hi”。（然后你点击TAB），你可以在IDE中作弊，只需打个招呼“。（然后你加热TAB）（如你所见，开头没有单引号）因为它只会跟随最新的标点符号，就像当你添加 : 并回车时，它直接添加一个缩进，不知道它是否会改变，但它不再是一个提示:)

* * *

## 回答 #191

> 赞同：-9
> 
> 时间：2010-05-13T20:23:55.223

**大括号**

```
def g():
    print 'hi!'

def f(): (
    g()
)

>>> f()
hi! 
```

# visual-studio - Visual Studio 的 Vim 错误格式

> ID：101270
> 
> 赞同：33
> 
> 时间：2008-09-19T11:50:59.670
> 
> 标签：visual-studio, vim, errorformat

我想将 Vim 的快速修复功能与 Visual Studio 的 devenv 构建过程或 msbuild 的输出一起使用。

我创建了一个名为 build.bat 的批处理文件，它执行 devenv 构建，如下所示：

```
devenv MySln.sln /Build Debug 
```

在 vim 中，我将 :make 命令指向该批处理文件：

```
:set makeprg=build.bat 
```

当我现在运行 :make 时，构建成功执行，但是错误不会被解析出来。因此，如果我运行 :cl 或 :cn，我最终会看到 devenv /Build 的所有输出。我应该只看到错误。

我已经尝试了许多不同的错误格式设置，这些设置在网络上的各个站点上都找到了，但没有一个能够正确解析出错误。这是我尝试过的一些：

```
set errorformat=%*\\d>%f(%l)\ :\ %t%[A-z]%#\ %m
set errorformat=\ %#%f(%l)\ :\ %#%t%[A-z]%#\ %m
set errorformat=%f(%l,%c):\ error\ %n:\ %f 
```

当然，我已经尝试过 Vim 的默认设置。

下面是 build.bat 的一些示例输出：

```
C:\TFS\KwB Projects\Thingy>devenv Thingy.sln /Build Debug 

Microsoft (R) Visual Studio Version 9.0.30729.1.
Copyright (C) Microsoft Corp. All rights reserved.
------ Build started: Project: Thingy, Configuration: Debug Any CPU ------
c:\WINDOWS\Microsoft.NET\Framework\v3.5\Csc.exe /noconfig /nowarn:1701,1702 /errorreport:prompt /warn:4 /define:DEBUG;TRACE /reference:"C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.0\PresentationCore.dll" /reference:"C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.0\PresentationFramework.dll" /reference:"C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.5\System.Core.dll" /reference:"C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.5\System.Data.DataSetExtensions.dll" /reference:c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\System.Data.dll /reference:"C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.5\System.Data.Linq.dll" /reference:c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\System.dll /reference:c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\System.Xml.dll /reference:"C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.5\System.Xml.Linq.dll" /reference:"C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.0\UIAutomationProvider.dll" /reference:"C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.0\WindowsBase.dll" /debug+ /debug:full /filealign:512 /optimize- /out:obj\Debug\Thingy.exe /resource:obj\Debug\Thingy.g.resources /resource:obj\Debug\Thingy.Properties.Resources.resources /target:winexe App.xaml.cs Controller\FieldFactory.cs Controller\UserInfo.cs Data\ThingGatewaySqlDirect.cs Data\ThingListFetcher.cs Data\UserListFetcher.cs Gui\FieldList.xaml.cs Interfaces\IList.cs Interfaces\IListFetcher.cs Model\ComboBoxField.cs Model\ListValue.cs Model\ThingType.cs Interfaces\IThingGateway.cs Model\Field.cs Model\TextBoxField.cs Model\Thing.cs Gui\MainWindow.xaml.cs Gui\ThingWindow.xaml.cs Interfaces\IField.cs Properties\AssemblyInfo.cs Properties\Resources.Designer.cs Properties\Settings.Designer.cs RequiredValidation.cs "C:\TFS\KwB Projects\Thingy\Thingy\obj\Debug\Gui\FieldList.g.cs" "C:\TFS\KwB Projects\Thingy\Thingy\obj\Debug\Gui\MainWindow.g.cs" "C:\TFS\KwB Projects\Thingy\Thingy\obj\Debug\Gui\ThingWindow.g.cs" "C:\TFS\KwB Projects\Thingy\Thingy\obj\Debug\App.g.cs" "C:\TFS\KwB Projects\Thingy\Thingy\obj\Debug\GeneratedInternalTypeHelper.g.cs"
C:\TFS\KwB Projects\Thingy\Thingy\Controller\FieldFactory.cs(14,19): error CS0246: The type or namespace name 'IFieldNothing' could not be found (are you missing a using directive or an assembly reference?)

Compile complete -- 1 errors, 0 warnings
========== Build: 0 succeeded or up-to-date, 1 failed, 0 skipped ========== 
```

**更新：** 看起来使用 msbuild 而不是 devenv 可能是正确的方法（根据 Jay 的评论）。

使用 msbuild，makeprg 将是：

```
:set makeprg=msbuild\ /nologo\ /v:q 
```

样本输出应该是：

```
Controller\FieldFactory.cs(14,19): error CS0246: The type or namespace name 'IFieldNothing' could not be found (are you missing a using directive or an assembly reference?) 
```

看起来这里的棘手部分可能在于路径是相对于 .csproj 文件，而不是 .sln 文件，它是 Vim 中的当前目录，位于 .csproj 文件上方的一个目录。

**回答：** 我想通了...

```
set errorformat=\ %#%f(%l\\\,%c):\ %m 
```

这将捕获 devenv /Build 和 msbuild 的输出。但是，msbuild 有一个问题。默认情况下，它的输出不包括完整路径。要解决此问题，您必须将以下行添加到您的 csproj 文件的主 PropertyGroup：

```
<GenerateFullPaths>True</GenerateFullPaths> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2010-09-01T20:07:04.063

我有一篇博文介绍了在 Vim 中构建 C# 项目的所有细节，包括错误格式。你可以在这里找到它：http: [//kevin-berridge.blogspot.com/2008/09/vim-c-compiling.html](http://kevin-berridge.blogspot.com/2008/09/vim-c-compiling.html)

简而言之，您需要以下内容：

```
:set errorformat=\ %#%f(%l\\\,%c):\ %m
:set makeprg=msbuild\ /nologo\ /v:q\ /property:GenerateFullPaths=true 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-10-02T06:28:01.917

*从问题中复制以从“未回答”列表中删除*

```
set errorformat=\ %#%f(%l\\\,%c):\ %m 
```

这将捕获两者`devenv /Build`和 msbuild 的输出。但是，msbuild 有一个问题。默认情况下，它的输出不包括完整路径。要解决此问题，您必须将以下行添加到您的 csproj 文件的主 PropertyGroup：

```
<GenerateFullPaths>True</GenerateFullPaths> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2010-06-26T00:23:55.783

我找到了一个更好的答案：`:compiler`使用内置`efm`设置。

```
" Microsoft C#
compiler cs
" Microsoft Visual C++
compiler msvc
" mono
compiler mcs
" gcc
compiler gcc 
```

注意：它还设置了默认的`makeprg`. 见 $VIMRUNTIME/compiler/

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T14:50:08.850

尝试运行 msbuild 而不是 devenv。这将为构建的运行方式提供大量动力。

打开 Visual Studio 命令提示符以设置您的路径。然后做`msbuild MySln.sln /Configuration:Debug`。

见`msbuild /?`寻求帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-06-25T02:09:10.853

我在寻找在 Visual Studio 中编译 c++ 的错误格式时发现了这个问题。上面的答案对我不起作用（我也没有使用 MSBuild）。

我从[这个 Vim Tip](http://vim.wikia.com/wiki/Integrate_gvim_with_Visual_Studio)中发现了这一点，并且`:help errorformat`：

```
" filename(line) : error|warning|fatal error C0000: message
set errorformat=\ %#%f(%l)\ :\ %#%t%[A-z]%#\ %[A-Z\ ]%#%n:\ %m 
```

这将为您提供如下所示的快速修复：

```
stats.cpp|604 error 2039| 'getMedian' : is not a member of 'Stats' 
```

（突出显示错误）来自

```
c:\p4\main\stats.cpp(604) : error C2039: 'getMedian' : is not a member of 'Stats' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-09-01T12:55:44.780

正如 Simon Buchan 提到的，您可以在项目中使用它来生成输出中的完整路径：

```
<GenerateFullPaths>True</GenerateFullPaths> 
```

`/property:GenerateFullPaths=true` 但是您可以通过添加而`makeprg`不是将上述内容添加到项目文件中来使其更具可移植性。

```
:set makeprg=msbuild\ /nologo\ /v:q\ /property:GenerateFullPaths=true\ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-06-29T22:45:16.193

这些错误格式均不适用于 Visual Studio 2009 v9.0.21022.8 专业版。使用 cygwin，必须从 bash 调用 devenv，这使得设置 makeprg 有点棘手（拧批处理文件）。当 devenv 拆分为多个进程并使用“1>”或“2>”等进行错误消息时，还必须调整我的错误格式：

```
set autowrite
"2>c:\cygwin\home\user\proj/blah.cpp(1657) : error C2065: 'blah' : undeclared identifier

set errorformat=%.%#>\ %#%f(%l)\ :\ %#%t%[A-z]%#\ %[A-Z\ ]%#%n:\ %m
let prg="devenv"
let makepath=$MAKEPATH
let &makeprg='cmd /c "'.prg.' '.makepath.'"' 
```

我的 .bashrc 使用 cygpath 设置 MAKEPATH 环境变量以转换为 DOS 兼容路径：

```
export MAKEPATH="$(cygpath -d "proj/VC9/some.sln") /build \"Debug\"" 
```

如果你有 vim 6.x，你可以使用[:cw](http://vim.wikia.com/wiki/Use_the_quickfix_window_to_list_all_errors)这比 clist 好得多（尝试在数百个警告中搜索错误，你就会明白我的意思）。看着 vim 的调整让我想呕吐，但我在 vim 天堂！！！再见视觉工作室！感谢调整 pydave +1 的基础。

# ruby-on-rails - 部署 Rails 应用程序时要做的大事

> ID：101275
> 
> 赞同：9
> 
> 时间：2008-09-19T11:53:13.953
> 
> 标签：ruby-on-rails, deployment

[在部署 Rails 应用程序之前我需要做哪些小事情](https://stackoverflow.com/questions/101066/what-little-things-do-i-need-to-do-before-deploying-a-rails-application)这个问题中，我得到了很多比“小事情”更大的答案。所以这个问题略有不同。

在部署 Rails 应用程序之前，我需要采取哪些合理的主要步骤。在这种情况下，我的意思是需要 5 分钟以上的时间，因此需要安排。对于小的在线配置更改，请使用小问题问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-19T19:51:01.543

**设置 Capistrano 以进行部署**如果您还不了解 Capistrano，您会想学习它，并使用它以自动化的方式部署您的代码。这将涉及设置您的共享目录和共享资源，如 database.yml。

**安装基于 C 的 MySQL gem**如果您没有所有必需的库，这可能需要一些时间，但不到 20 分钟。

**确保您不会受到常见的 Web 应用程序攻击**会话固定、会话劫持、跨站点脚本、SQL 注入（可能您不必太担心 SQL 注入）。在视图屏幕中输出用户输入的数据时，请确保使用 h()。网上有很多关于这个的好材料。

**选择服务器架构**Nginx、Mongrel、FastCGI、CGI、Apache、Passenger：有很多选择。考虑如何使用您的应用程序并决定最佳架构，然后进行设置。

**设置异常通知器或异常记录器**您会希望您的应用程序在中断时向您发出警告。设置这些工具之一来跟踪生产异常。注意：异常通知器会在发生路由错误时向您发出警告（即，当人们使用胖手指 URL 或脚本小子攻击您时）：因此请考虑在发生这种情况时您希望框架做什么并相应地进行调整。

**Make sure all of your passwords are out of source control** If you have database.yml, mail.yml (if you use yaml_mail_config) or other sensitive files in source control, get them out of there, replace them with database.yml.example, and put them in the shared/ folder on your server.

**Ensure that your DB is locked down.** A lot of people forget to secure MySQL when setting up their new production Rails box. Don't be like them.

**确保所有的小网络文件都在适当的位置**如果您打算在 Google 中列出，请生成一个*sitemap.xml*文件。如果您打算使用 . *htaccess*文件，确保它在那里。如果您需要*robots.txt*文件来防止站点的某些区域被索引，请创建一个。如果您想要一个好看的*404 页面*，请确保其设置正确。如果您希望在部署时出现“立即返回”页面，请确保您指定了 Capistrano 维护文件，并且 Nginx 或 Apache 知道如何以及何时重定向到它。

**准备好您的 SSL 证书**如果您要使用 SSL，请确保您获得在您的生产域上有效的证书，并进行设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-19T12:02:36.600

## 使用一些过程监控

有时你的进程（在很多情况下是杂种）会死掉，或者其他不好的事情会发生在它们身上。例如，内存泄漏可能导致内存消耗无限增加，或者进程可能开始使用所有 CPU。

[monit](http://www.tildeslash.com/monit/)和[god](http://god.rubyforge.org/)都是让你摆脱这种命运的好选择。它们也可以设置为点击您网站上的 url 以检查 200 响应代码。

## 设置服务器监控

这个空间的一些建议：[fiveruns](http://www.fiveruns.com/products/manage) , [newrelic](http://www.newrelic.com/) , [scout](http://scoutapp.com/)

这些工具将在您的服务器上记录详细的指标，并且在出现问题并且您需要查看实际发生的情况时非常宝贵。它们还为您提供有关服务器负载的实时信息。

如果你有一个集群，这种报告就更加关键了。

## 备份

编写一个脚本来定期备份您的数据库和您的用户可以上传的任何其他资产。S3 可能是一个不错的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-19T13:53:48.983

## 选择 Web 服务器/负载均衡器

我首选的服务器是 nginx，但常见的模式是以 apache + mod_proxy_http 开头。

# binary - 一个半字节有多少位？

> ID：101290
> 
> 赞同：2
> 
> 时间：2008-09-19T11:56:19.500
> 
> 标签：binary

二进制问题:)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-09-19T12:37:49.867

答案是 4 位。2 个半字节组成一个字节。

[看到这里](http://www.geneziegler.com/clocktower/DrSeuss.html)有一首可爱的诗。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-09-19T11:57:40.230

四

[http://en.wikipedia.org/wiki/Nibble](http://en.wikipedia.org/wiki/Nibble)

> 在计算中，一个半字节（通常是 nybble 或 nyble 以匹配字节的元音）是一个四位聚合，或半个八位字节。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-19T12:06:53.780

实际上是 0b100 位。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-19T11:57:23.367

我一直认为 nybble 是 4 位。故意拼写为 nybble 是半字节。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-19T11:57:58.123

[半字节（通常是 nybble）是四位聚合或半个八位字节（八位字节是 8 位字节）的计算术语。](http://en.wikipedia.org/wiki/Nibble)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-19T11:58:32.397

4 位。但我记得它被称为 nybble 而不是 nibble，就像字节与咬一样。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-19T11:57:14.100

4 位 = 1 个半字节

8 位 = 1 个字节

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-19T12:09:13.917

半字节通常是位，但可以指 2-7 位，其中 1 位为位，8 位为字节。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-19T12:17:27.983

一个半字节有 4 位（尽管不是必须的）。

这也意味着当您以十六进制表示法查看一个字节的值时，一个十六进制数字对应一个半字节。这就是为什么从十六进制到二进制比从十进制到二进制要容易得多的原因之一。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-24T15:48:10.437

一个 Nybble 或 nibble 是 4 位。早期的计算机图形使用 4 位颜色数据。由于内存很宝贵，两个像素存储在一个字节中，一个高半字节和一个低半字节。

# operating-system - 如果我要构建一个新的操作系统，它会有什么样的功能？

> ID：101294
> 
> 赞同：30
> 
> 时间：2008-09-19T11:57:05.473
> 
> 标签：operating-system

我正在玩弄创建一个全新操作系统的想法，想听听这个论坛上的每个人对此有何看法？首先是太晚了，大男孩在我们的生活中如此根深蒂固，以至于我们永远无法改变（哇——多么可怕的想法……）。但如果不是这样，操作系统应该为你做什么？最重要的特点是什么？所有组件是否应该单独安装（换句话说 - 基本操作系统是否真的没有用户功能，并且通过创建类似于良好灵活工具的“插件”来添加？）

我为什么要这样做......我更好奇是否有需求，我想知道，因为我们今天使用最多的操作系统（Linux、Windows、Mac OS X（免费 BSD））实际上编写的不止20 年前（我很慷慨——我的意思是当时不存在双核和四核，公共汽车要慢得多，硬件要贵得多，等等……），我只是对新技术感到好奇，如果我们会做不同的事情吗？

我急于阅读您的评论。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-09-19T12:02:07.880

回答第一个问题：永远不会太晚。尤其是在涉及利基细分市场和类似的东西时。

其次，在您开始创建新操作系统之前，您应该了解它的任务类型：这将是一个庞大的项目。

它只是一个普通的程序员“抓痒”之类的项目吗？如果是这样，那么一定要继续 - 你可能会通过这样做学到很多东西。但是，如果您正在为最终产品做这件事，那么在您查看所有当前正在开发的操作系统（比您一开始想的要多得多）并弄清楚什么之前，您不应该沿着这条路走下去你想改变它们。

很可能这些努力会更好地用于改进/更改现有的开源系统。即使对于您自己的实验，如果您从已经在开发中的东西开始，可能会更容易获得您想要的结果。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2008-09-19T13:39:20.580

首先，一个小故事。1992 年，在第一次 Win32（后来的 MS 专业开发者大会）会议期间，我有机会与 Dave Cutler 先生（现在大多数人称为 Windows NT 的首席架构师， Windows 2000、XP 等）。

我当时在 IBM Boca Raton 的多媒体小组工作，研究你们中有些人可能记得的 OS/2。我在 OS/2 上工作了几年，并认识到 OS 的发展方向“写在墙上”，我问他，“Dave，Windows NT 是否将把我们带入下一个世纪，或者你有其他想法吗？头脑 ？”。他给我的答复如下：

“M....，Windows NT 是任何人从零开始开发的最后一个操作系统！”。然后他看着我，啜了一口他的啤酒，然后说，“再说一次，你可以在和你的女孩度过一个特别美好的夜晚之后，下周六醒来，然后有一个全新的操作系统方法，那就是”会让这件事蒙羞。”

把这次谈话放到上下文中，考虑到我回到大学攻读硕士学位（专攻操作系统设计），我想说新操作系统有很多空间。问题是把事情放在眼里。您对该操作系统的目标是什么？它试图解决什么问题？

把这一切放在眼里会让你知道你是否真的把目光投向了一个可实现的目标。

综上所述，我支持之前的评论者关于研究“奇点”（我去年春天在我的一个课程中发表的演讲的重点......）之类的东西，或者如果你真的想“沉没你的进入“处于起步阶段的操作系统”......看看“ReactOS”。

再说一次，像 gOS 等 WebOS 可能是我们未来十年左右的发展方向。或者再一次，特别聪明的人可能会在与他们的女士或男士朋友度过一个特别富有成果的夜晚后醒来，并在操作系统中产生“下一个大创意”。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2008-09-19T12:11:02.820

为什么直接在物理机上构建操作系统？你只会在汇编语言中胡闹；）。当然，这很有趣，但为什么不为 VM 处理操作系统呢？

假设一个在 Java/.NET/Parrot（你可以命名）VM 上运行的操作系统，它可以很容易地通过网络传递并且可以运行一堆软件。

它会包括什么？

*   某种存储数据的方法（传统的 FS 不会削减它）
*   进程/线程的模型（或者只是劫持 VM 提供的东西？）
*   与这些进程交互的工具等。

因此，构建一个可以在广泛使用的虚拟机上执行的简单平台。为特定的利基（云计算？）添加一些很酷的功能。去！

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-09-19T11:58:33.317

有关微内核与单体内核的更多信息，请查阅 Linus 与 Andrew Tanenbaum 的“讨论”。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-09-19T12:01:55.977

我强烈建议您查看 linux(0.01) 上的早期版本，以至少让您的脚湿透。你甚至要开始使用汇编和非常模糊的低级东西（尤其是进入保护模式、多任务处理等）。是的，“大男孩”可能已经垄断了市场。我不是告诉你不要这样做，但也许在 linux 内核上做一些工作会是一个更好的垫脚石。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-09-19T12:02:46.770

查看[Cosmos](http://www.gocosmos.org/index.en.aspx)和[Singularity](http://research.microsoft.com/os/Singularity/)，这些代表了我想要的未来操作系统 ;-) 编辑： [SharpOS](http://www.sharpos.org/)是另一个托管操作系统工作。由[yshuditelu推荐](https://stackoverflow.com/users/4660/yshuditelu)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-09-19T12:02:00.033

操作系统根本不应该有用户功能。用户功能应该由单独的项目添加，这并不意味着项目不应该一起工作！

如果您对用户功能感兴趣，也许您应该考虑参与现有的桌面环境项目，例如 GNOME、KDE ​​或其他东西。

如果您对内核级功能感兴趣，可以尝试在 BSD 衍生版本或 Linux 上进行黑客攻击，或者尝试创建自己的系统——但不要过多考虑用户功能。正确获取操作系统的核心是困难的，并且需要很长时间——想要重新发明一切没有多大意义，而且会让你一事无成。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-19T12:28:24.617

底线...专注于您的目标，更重要的是其他人的目标...帮助满足这些需求。永远不要只从技术开始。

我建议不要创建自己的操作系统。（我自己的令人讨厌的中断......看看[云计算](http://en.wikipedia.org/wiki/Cloud_computing)和[Amazon EC2](http://www.amazon.com/gp/browse.html?node=201590011)）

我完全同意它首先有助于定义你的目标是什么。我是用户体验的忠实粉丝，不仅考虑您自己的目标，还考虑您的受众/用户/其他人的目标。一旦你有了这些目标，那么就进入下一步如何实现它。

现在什么是操作系统？内核、操作系统、虚拟服务器实例、Linux、Windows Server、Windows Home、Ubuntu、AIX、zSeries OS/390 等。我想这是对操作系统的一个很好的定义......[维基百科](http://en.wikipedia.org/wiki/Operating_system)

我也喜欢 Sun 的口号[“网络就是计算机”](http://www.sun.com/aboutsun/company/index.jsp) ……但他们的公司在过去十年中确实衰落了。

关于网络的注意事项是计算机……我再次强烈建议您查看[Amazon EC2](http://www.amazon.com/gp/browse.html?node=201590011)和更普遍的[云计算](http://en.wikipedia.org/wiki/Cloud_computing)。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-19T12:29:56.503

您可能想先加入现有的操作系​​统实施项目，或者至少看看其他人实施了什么。

例如，AROS 作为一个爱好操作系统已经开发了大约 10 年或更长时间，现在在许多方面都非常有用。

或者更小众的东西怎么样？查看 Symbios，这是一个完全多任务桌面（Windows 风格）操作系统 - 适用于 4MHz Z80 CPU（Amstrad CPC、MSX）。也许你会想写这样的东西，它比完整的下一代操作系统要简单得多。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-01-29T16:29:34.080

我认为从头开始构建一个类似于市场上当前操作系统的新操作系统是浪费时间。相反，您应该考虑 10 到 20 年后操作系统会是什么样子。我的直觉是，它们将如此不同，以至于按照今天的标准，它们几乎无法识别。想想未来操作系统如何运行的模型，例如 Facebook（喘气！）。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-01-29T15:59:55.560

我一直想要一个基本上只是一个全新的操作系统的操作系统。它会内置插件支持，允许您构建用户界面、应用程序，无论您想要什么。

这个系统的工作原理很像游戏的 Lua 沙盒，但没有限制。您可以构建一个插件或模块系统，该系统可以访问您将使用的各种子系统。例如，如果您要编写 Web 浏览器应用程序，则需要加载网络库并在插件脚本中使用它。需要“安全”吗？加载库。

这与 Linux 之间的区别在于，Linux 是一个操作系统，但有一个在其之上运行的 Windows 管理器。在这个理论上的操作系统中，您将能够在插件系统中实现各种窗口的通用“外观”和“感觉”，或者您可以创建自定义界面。

这和 Windows 之间的区别在于它是完全可定制的，我的意思是如果你根本不想实现任何加密，你可以这样做，或者如果你想自定义一个已经存在的窗口，你可以这样做。没有什么对你关闭。

在这个理论上的操作系统中，有一个带有插件系统的操作系统。插件系统使用简单而强大的语言。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2011-05-16T20:46:08.513

如果你问我想在操作系统中看到什么，我可以给你一个清单。我刚刚开始编程，所以我不确定这是否可能，但我可以给你我的想法。

1.  我希望看到一个开发的操作系统（除了主要的），让无线网卡工作并不痛苦。那是我对大多数我尝试过的最不满的第一件事。

2.  看到一个程序员为其他程序员设计的操作系统会很酷。拥有它，您就可以运行适用于所有不同操作系统的程序。如果没有 Windows 和 OSX 的副本，我不知道这是否可能，但如果我可以检查我编写的程序与所有操作系统的兼容性，那将是非常酷的。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-19T13:40:14.553

checkout singularity project, do something revolutionary

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-19T13:17:41.597

我认为您对我们当前的操作系统已经过时是正确的。有人说**所有操作系统都很烂。**是的，我们对他们没有问题吗？称之为 BSOD、Sad Mac 或内核恐慌。我们的文件系统出现故障，存在**安全性和可靠性**问题。

微软通过其 Singularity 内核采用了有趣的方法。它使用类似于 .NET 的虚拟机和**形式验证**方法隔离软件中的进程。基本上所有的 IPC 似乎都被正式指定和验证，甚至在程序运行之前。

但它还有另一个问题——Singularity**只是一个内核。**您不能在其上运行不是为它设计的应用程序。这是一个巨大的惩罚，使最终的过渡（奇点不公开）变得非常困难。如果您设法产生具有类似技术优势的东西，但有一个真正的过渡计划（想想 IPv4->IPv6 问题，或者 Windows 如何在桌面上获得如此多的市场份额），那可能是巨大的！

但**从小**处着手也不是一个坏选择。Linux 就是这样开始的，在很多情况下它会带来更好的设计。小就是美。更容易改变。更容易成长。无论如何，祝你好运！

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-07-29T21:36:07.857

对于本论坛的发起人，先生，我向您致敬，因为您敢于以更大胆和更理想主义的方式思考 IT 行业。首先，鉴于全球计算机科学的蓬勃发展以及革命性 Linux 操作系统向我们传授的开放性，您的问题正是您认为应该吸引更广泛受众的类型，而革命性 Linux 操作系统才刚刚开始赢得人心通过加强其用户友好的界面，有这么多。所以推信封的荣誉。

如果我的理解正确，您会认为鉴于我们迄今为止的劳动成果，进一步的硬件和软件组合的开发可能或至少应该不那么传统。当然，这意味着任何新的发展都将比典型的更快地达到其目标。然而，这一次全新的操作系统系统的前景将具有挑战性 - 至少可以说 - 只是因为 Linux 和 Windows 之间已经存在如此多的摩擦。这确实是开源和专有意识形态之间的一场战斗。Bart Roozendaal 在上面的评论中很好地证明了我的观点。忘记创新的想法和任何可能来自更现代的操作系统的可能性，因为这些都是次要的。他本质上要问的是，你会站在利润一边吗？他在这里很容易让出自己的位置。如您所知，Windows 因其在新市场、软件和其他技术方面的垄断做法而臭名昭著。自从它存在以来，它就一直牢牢抓住它的霸权地位，可悲的是，Windows 操作系统充满了无穷无尽的错误和后门。

再次，我为你走上一条人迹罕至的道路而鼓掌，并希望你能勇往直前，不要灰心丧气。就个人而言，我希望看到另一个操作系统......一个更现代的操作系统。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-06-02T07:20:47.543

您也可以考虑使用 MINIX，这是一个很好的起点。

# python - Jython 的 IronClad 等效项

> ID：101301
> 
> 赞同：3
> 
> 时间：2008-09-19T11:58:00.260
> 
> 标签：python, c, ironpython, jython, ironclad

IronPython 有一个项目 - [IronClad](http://www.resolversystems.com/documentation/index.php/Ironclad)，旨在透明地在其中运行 C 扩展。Jython 有类似的项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T12:44:51.473

您可能可以使用 Java 的 loadLibrary 来做到这一点（前提是它可以在您平台的 java 中工作）。它在 java 库中：[java.System.loadLibrary()](http://java.sun.com/javase/6/docs/api/java/lang/System.html#loadLibrary(java.lang.String) "sun.com loadLibrary 文档")。

请注意，有时您必须根据要使用的库和目标系统用 C 和/或 Java 编写包装器，因为细节取决于平台。有关更多详细信息，请参阅文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-02T22:23:15.590

密切关注 JyNI ( [http://www.jyni.org](http://www.jyni.org) )，它对 Jython 来说就是 Ironclad 对 IronPython。在撰写本文时，JyNI 仍处于 alpha 状态。

如果您只想使用 Jython 的一些 C 库，只需像使用 Java 一样使用 Jython 的 JNA。如果您需要更好的控制，请查看 JNI 或 SWIG。

此外，您可能想看看 JEP ( [https://github.com/mrj0/jep](https://github.com/mrj0/jep) ) 或 JPY ( [https://github.com/bcdev/jpy](https://github.com/bcdev/jpy) )。

# xml - 如何使用 Delphi 从多个 EXE 实例管理对 XML 文件的并发输入/输出访问。

> ID：101316
> 
> 赞同：5
> 
> 时间：2008-09-19T12:01:40.767
> 
> 标签：xml, delphi, mutex

我有一个用 Delphi 编写的命令行工具，它的工作是在 XML 文件中插入一个节点，然后立即退出。我需要使该工具的多个实例能够同时执行并将节点插入到同一个 XML 中。

为了达到这个目的，我引入了一个简单的文件“mutex”——该工具在写入 XML 之前创建一个临时文件，然后在完成写入后删除临时文件。因此，如果另一个实例被执行，它会检查这个临时文件的存在并等待它被删除。然后它再次创建临时文件，写入 XML 并删除临时文件。

问题是只有当 2-3 个实例尝试同时写入 XML 文件时，它才能正常工作。当有更多实例时 - 其中一些只是永远等待并且永远不会将节点附加到 XML 中。

有没有更好的方法让它与同时运行和写入 XML 的大量实例一起工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-19T14:28:23.050

命名信号量或互斥量可以在单台机器上为您完成此任务。使用例如来自 SyncObjs 的 TMutex，并使用带有名称参数的构造函数之一。如果您在所有应用程序中使用相同的名称，它们将通过相同的内核互斥锁进行同步。使用 TMutex.Acquire 进行访问，完成后使用 TMutex.Release，在 try/finally 块中进行保护。

使用具有 InitialOwner 参数的 TMutex.Create 重载，但为此指定 False（当然，除非您想立即获取互斥锁）。此重载在幕后调用 CreateMutex。查看 SyncObjs 的源代码和[CreateMutex](http://msdn.microsoft.com/en-us/library/ms682411(VS.85).aspx)的文档以获取更多详细信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-19T12:19:09.163

1 - 设置一个记录挂起更改的文件（它将像队列一样工作）

2 - 编写一个简单的应用程序来监视该文件，并将更改应用到 XML 文件

3 - 修改当前的命令行工具，将他们的变更请求附加到“Pending changes”文件中

现在只有一个应用程序必须接触最终的 XML 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-19T12:24:34.813

TXMLDocument 已经防止多个实例同时写入同一个文件。所以我猜你的问题的真正意思是，“我怎样才能打开一个 XML 文档进行阅读，**防止其他实例在我阅读它**时写入该文档，然后在允许其他实例之前写入该文档做同样的事？”

在这种情况下，您应该自己处理打开和关闭文件，而不是让 TXMLDocument 为您完成。使用 TFileStream 打开具有独占读写锁和 XMLDocument.LoadFromStream 而不是 LoadFromFile 的文件。将 stream.Position 重置为 0 后使用 SaveToStream 保存文档。使用 try/finally 以确保在完成后关闭流。由于您专门锁定文件，因此您不再需要临时文件或任何其他类型的互斥锁。

显然，如果另一个实例当前正在读取/写入文件，则打开文件可能会失败。所以你需要处理这个并稍后重试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T14:18:08.630

请记住，每次需要添加节点时，都必须重新加载并重新解析整个文档。根据 XML 文档的大小和要保存的数据，它可能不是最有效的数据传输方法。

写入单独文件的方法是一种有趣的解决方案，要考虑的一种方法是让您的“多实例”应用程序编写唯一的 XML 文件，然后使用 FindFirst 循环将它们加载到带有单独程序的主文档中。这样，您就可以保持您的 xml 结构几乎完好无损，而无需对现有程序进行任何重大更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-12-18T13:06:40.983

从[这个答案](https://stackoverflow.com/a/4406823/80901)：

> 在 Windows 上，如果您可以控制这两个程序，这是可能的。LockFileEx。对于读取，请在锁定文件上打开共享锁。对于写入，请在锁定文件上打开排他锁。Windows 中的锁定很奇怪，因此我建议为此使用单独的锁定文件。

（“两个程序”不适用于您的情况，因为它是同一个程序，只是在多个实例中运行。）

旁注/我是如何找到这个答案的：Java 日志库[logback](http://logback.qos.ch/)使用平台特定的文件锁定 API（通过 NIO）来实现“[谨慎模式](http://logback.qos.ch/manual/appenders.html#prudent)”，其中多个进程可以登录到同一个文件而不会损坏它——iiuc 不是可以使用 Delphi RTL 文件操作。

# asp.net - IIS 通配符映射不适用于 ASP.NET

> ID：101326
> 
> 赞同：4
> 
> 时间：2008-09-19T12:02:53.557
> 
> 标签：asp.net, iis

我通过添加“C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll”在 IIS 6 上设置了通配符映射，并确保未选中“验证该文件是否存在”：

*   在 IIS 的“网站”目录上
*   在网站上

但是，在 iisreset 之后，当我转到[http://myserver/something.gif](http://myserver/something.gif)时，我仍然收到 IIS 404 错误，而不是 asp.net 错误。

有什么我错过的吗？

精度：

*   这不适用于使用 ASP.NET MVC
*   我宁愿不使用 iis 404 自定义错误页面，因为我有一个用于记录错误的 httpmodule（这是一个低流量的内部站点，所以通配符映射性能损失不是问题；））

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-19T16:53:39.253

您需要在 Web 配置中为 gif 文件添加 HTTP 处理程序：

```
 <system.web>
    <httpHandlers>
      <add path="*.gif" verb="GET,HEAD" type="System.Web.StaticFileHandler" validate="true"/>
    </httpHandlers>
  </system.web> 
```

这会强制 .Net 处理文件，然后你会得到 .Net 错误。

## “/”应用程序中的服务器错误。

无法找到该资源。说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。

请求的网址：/test.gif

* * *

版本信息：Microsoft .NET Framework 版本：2.0.50727.1433；ASP.NET 版本：2.0.50727.1433

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-19T12:23:52.927

您可以尝试使用自定义错误来执行此操作。进入您网站属性中的自定义错误并将 404 设置为指向您网站中的 URL。像 /404.aspx 是存在的。

使用 aspnet_isapi，您希望使用 HttpModule 来处理您的通配符。像[http://urlrewriter.net/](http://urlrewriter.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T13:07:55.210

如果不使用 ASP.net Routing 或 URLrewriting 或某些 url 映射机制，则不能使用通配符映射。

如果你想做 404，你必须在 web.config -> 自定义错误中配置它。
然后，您可以根据需要重定向到其他页面。

3.5 SP1 中的新增功能，您将 RedirectMode 设置为“responseRewrite”以避免重定向到自定义错误页面，并使浏览器中的 URL 保持不变。

其他方法是捕获 global.aspx 中的错误并重定向。如果您需要进一步的说明，请对答案发表评论。

# c++ - 如果有虚函数的类是用vtables实现的，那么没有虚函数的类是如何实现的呢？

> ID：101329
> 
> 赞同：6
> 
> 时间：2008-09-19T12:03:25.240
> 
> 标签：c++, virtual-functions

特别是，无论如何都不需要某种函数指针吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-09-19T13:01:04.697

我认为“*具有虚函数的类是用 vtables 实现的*”这句话会误导你。

这句话听起来像是具有虚函数的类是“*以 A 方式*”实现的，而没有虚函数的类是“*以 B 方式*”实现的。

实际上，具有虚函数的类，***除了***作为类来实现之外，还有一个虚表。另一种看待它的方式是“'vtables' 实现了类的 'virtual function' 部分”。

## 有关它们如何工作的更多详细信息：

所有类（具有虚拟或非虚拟方法）都是结构。在 C++ 中，结构和类之间的**唯一**区别是，默认情况下，成员在结构中是公共的，而在类中是私有的。因此，我将在这里使用术语类来指代结构和类。请记住，它们几乎是同义词！

### 数据成员

类（和结构一样）只是连续内存块，其中每个成员按顺序存储。请注意，由于 CPU 架构的原因，成员之间有时会存在间隙，因此块可能大于其部分的总和。

### 方法

方法或“成员函数”是一种错觉。实际上，没有“成员函数”之类的东西。函数始终只是存储在内存某处的一系列机器代码指令。为了进行调用，处理器跳转到内存的那个位置并开始执行。您可以说所有方法和函数都是“全局的”，任何相反的指示都是编译器强制执行的一种方便的错觉。

显然，一个方法的行为就像它属于一个特定的对象，所以显然还有更多的事情要做。为了将方法（函数）的特定调用绑定到特定对象，每个成员方法都有一个隐藏参数，该参数是指向相关对象的指针。该成员是*隐藏*的，因为您不会自己将其添加到您的 C++ 代码中，但它并没有什么神奇之处——它非常真实。当你这样说时：

```
void CMyThingy::DoSomething(int arg);
{
    // do something
} 
```

编译器*确实*这样做：

```
void CMyThingy_DoSomething(CMyThingy* this, int arg)
{
    /do something
} 
```

最后，当你写这个时：

```
myObj.doSomething(aValue); 
```

编译器说：

```
CMyThingy_DoSomething(&myObj, aValue); 
```

任何地方都不需要函数指针！编译器已经知道您正在调用哪个方法，因此它直接调用它。

静态方法更简单。它们没有*this*指针，因此它们完全按照您编写它们的方式实现。

那是！其余的只是方便的语法糖化：编译器知道一个方法属于哪个类，因此它确保它不会让您在没有指定哪个类的情况下调用该函数。它还使用该知识来转换`myItem`为`this->myItem`明确的情况。

*（是的，没错：方法中的成员访问**总是**通过指针间接完成，即使你没有看到）*

（**编辑**：删除最后一句话并单独发布，以便单独批评）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-09-19T12:49:14.100

非虚成员函数实际上只是一种语法糖，因为它们几乎就像一个普通函数，但具有访问检查和隐式对象参数。

```
struct A 
{
  void foo ();
  void bar () const;
}; 
```

基本上是一样的：

```
struct A 
{
};

void foo (A * this);
void bar (A const * this); 
```

需要 vtable 以便我们为特定对象实例调用正确的函数。例如，如果我们有：

```
struct A 
{
  virtual void foo ();
}; 
```

'foo' 的实现可能类似于：

```
void foo (A * this) {
  void (*realFoo)(A *) = lookupVtable (this->vtable, "foo");
  (realFoo)(this);   // Make the call to the most derived version of 'foo'
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-19T12:09:54.913

当您想使用多态性时，需要虚拟方法。修饰符将`virtual`方法放入 VMT 以进行后期绑定，然后在运行时决定从哪个类执行哪个方法。

如果方法不是虚拟的 - 它在编译时决定从哪个类实例执行。

函数指针主要用于回调。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T12:10:56.047

如果一个有虚函数的类是用一个虚表来实现的，那么一个没有虚函数的类是不用虚表来实现的。

vtable 包含调用适当方法所需的函数指针。如果该方法不是虚拟的，则调用将转到该类的已知类型，并且不需要间接。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-19T12:36:22.557

对于非虚拟方法，编译器可以生成正常的函数调用（例如，使用作为参数传递的此指针调用特定地址）甚至内联它。对于虚函数，编译器通常在编译时不知道在哪个地址调用代码，因此它生成的代码在运行时在 vtable 中查找地址，然后调用该方法。的确，即使对于虚函数，编译器有时也可以在编译时正确解析正确的代码（例如，在没有指针/引用的情况下调用局部变量的方法）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-19T13:12:17.913

*（我从我的原始答案中提取了这一部分，以便可以单独批评它。它更简洁，更符合你的问题，所以在某种程度上它是一个更好的答案）*

不，没有函数指针；相反，编译器将问题*从内到外*。

编译器使用*指向对象的指针*调用全局函数，而不是调用*对象内部的某些指向函数*

为什么？因为这种方式通常效率更高。间接调用是昂贵的指令。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-19T12:07:44.807

不需要函数指针，因为它在运行时无法更改。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-19T12:07:46.757

分支直接生成到方法的编译代码；就像如果您有根本不在类中的函数一样，分支会直接生成给它们。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-19T12:10:12.463

编译器/链接器直接链接将调用哪些方法。不需要 vtable 间接。顺便说一句，这与“堆栈与堆”有什么关系？

# mysql - 终极 MySQL 遗留数据库噩梦

> ID：101333
> 
> 赞同：10
> 
> 时间：2008-09-19T12:06:30.943
> 
> 标签：mysql, database, refactoring, binary-log

表 1：包括厨房水槽在内的所有物品。日期格式错误（最后一年，因此您无法对该列进行排序），数字存储为 VARCHAR，“街道”列中的完整地址，名字列中的名字和姓氏，姓氏列中的城市，不完整的地址，行根据多年来发生变化的一组规则，重复记录，不完整记录，垃圾记录...通过将数据从一个字段移动到另一个字段来更新前面的行...您可以命名它...哦，当然不是 TIMESTAMP 或 PRIMARY KEY 列在眼前。

表 2：打开这个婴儿后，任何正常化的希望都破灭了。我们在表一中的每个条目和行的更新都有一行。所以重复像没有明天（价值800MB）和像Phone1 Phone2 Phone3 Phone4 ... Phone15这样的列（它们不被称为电话。我用这个来说明）外键是......好吧猜猜。根据表 1 中的行中的数据类型，有 3 个候选项

表 3：它会变得更糟吗？哦是的。“外键是破折号、点、数字和字母的 VARCHAR 列组合！如果不提供匹配项（通常不提供匹配项），则应使用第二列类似的产品代码。具有名称的列与其中的数据没有相关性，以及强制性的 Phone1 Phone2 Phone3 Phone4...Phone15。有从 Table1 复制的列，而不是 TIMESTAMP 或 PRIMARY KEY 列。

表 4：被描述为正在进行中的工作，随时可能发生变化。它与其他人本质上是相似的。

在接近 1m 行时，这是一个大混乱。幸运的是，这不是我的大麻烦。不幸的是，我必须从中提取每个“客户”的复合记录。

最初，我设计了 Table1 的四步翻译，添加了 PRIMARY KEY 并将所有日期转换为可排序格式。然后再执行几个查询步骤，这些查询返回过滤后的数据，直到我有 Table1 到可以使用它从其他表中提取以形成合成的地​​方。经过数周的工作，我使用一些技巧将其归结为一个步骤。所以现在我可以将我的应用程序指向混乱并拉出一个漂亮干净的复合数据表。幸运的是，我只需要其中一个电话号码就可以了，因此标准化我的桌子不是问题。

然而，这是真正的任务开始的地方，因为每天都有数百名员工以您不想想象的方式添加/更新/删除这个数据库，而且每天晚上我都必须检索新行。

由于可以更改任何表中的现有行，并且由于没有 TIMESTAMP ON UPDATE 列，因此我将不得不求助于日志来了解发生了什么。当然，这假设有一个二进制日志，但实际上没有！

引入这个概念就像铅气球一样下降。我还不如告诉他们，他们的孩子将不得不接受实验性手术。它们并不完全是高科技……万一你没有聚集……

情况有点微妙，因为他们有一些我公司急需的有价值的信息。我被一家大公司的高级管理层（你知道他们是怎么做的）派来“让它发生”。

除了用另一个应用程序解析 bin 日志文件，我想不出任何其他方法来处理夜间更新，以弄清楚他们在白天对该数据库做了什么，然后相应地组合我的表。我真的只需要看看他们的 table1 就可以知道如何处理我的桌子。其他表只提供字段来清除记录。（使用 MASTER SLAVE 将无济于事，因为我会复制一份混乱。）

另一种方法是为其 table1 的每一行创建一个唯一的哈希并构建一个哈希表。然后我会每晚检查整个数据库以查看哈希是否匹配。如果他们不这样做，那么我将读取该记录并检查它是否存在于我的数据库中，如果存在，那么我将在我的数据库中更新它，如果它不存在，那么它是一条新记录，我将插入它。这很难看而且速度不快，但是解析二进制日志文件也不是很漂亮。

我写这篇文章是为了帮助弄清楚这个问题。经常将其告诉其他人有助于澄清问题，从而使解决方案更加明显。在这种情况下，我只是更头疼！

您的想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-20T04:07:02.240

我不是 MySQL 人，所以这是从左领域出来的。

但我认为日志文件可能是答案。

谢天谢地，你真的只需要从日志中知道两件事。

你需要记录/rowid，你需要操作。

在大多数数据库中，我假设是 MySQL，每一行都有一个隐式列，比如 rowid 或 recordid 或其他。它是数据库使用的内部行号。这是您的“免费”主键。

接下来，您需要操作。尤其是对行的插入、更新或删除操作。

您按时间顺序整合所有这些信息，然后遍历它。

对于每个插入/更新，您从原始数据库中选择行，然后在目标数据库中插入/更新该行。如果是删除，则删除该行。

您不关心字段值，它们并不重要。做整排。

希望您不必“解析”二进制日志文件，MySQL 已经必须有例程来执行此操作，您只需要找到并弄清楚如何使用它们（甚至可能有一些方便的“转储日志”实用程序可以使用） ）。

这使您可以使系统保持非常简单，并且它应该只取决于您白天的实际活动，而不是总数据库大小。最后，您可以稍后通过使其“更智能”来优化它。例如，也许他们插入一行，然后更新它，然后删除它。您会知道您可以在回放中完全忽略该行。

显然，这需要一些神秘的知识才能真正读取日志文件，但其余的应该很简单。我想认为日志文件也带有时间戳，因此您可以知道“从今天开始”处理行，或者您想要的任何日期范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T12:11:34.830

您不能使用访问该数据库的现有代码并使其适应您的需要吗？当然，代码一定很糟糕，但它**可能会**为你处理数据库结构，不是吗？你可以希望专注于完成你的工作，而不是扮演考古学家。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-22T16:10:47.647

日志文件（二进制日志）也是我的第一个想法。如果你知道他们是怎么做的，你会不寒而栗。随着片段的添加和更改，日志中的每一行都有许多条目。它只是巨大的！现在我选择了 Hash 方法。通过一些巧妙的文件内存分页，这是非常快的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T12:25:49.773

您也许可以使用 maatkit 的 mk-table-sync 工具来同步暂存数据库（毕竟您的数据库非常小）。这将“复制混乱”

然后，您可以编写一些东西，在同步之后执行各种查询以生成一组更健全的表，然后您可以报告这些表。

我想这可以在没有性能问题的情况下每天完成。

在不同的服务器上完成这一切将避免影响原始数据库。

我能看到的唯一问题是某些表是否没有主键。

# random - 非安全随机数生成器和安全随机数生成器有什么区别？

> ID：101337
> 
> 赞同：26
> 
> 时间：2008-09-19T12:07:12.673
> 
> 标签：random, cryptography

正如标题所说：非安全随机数生成器和安全随机数生成器有什么区别？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2008-09-19T12:08:59.547

没有计算上可行的算法应该：

*   恢复种子，或
*   预测“下一位”

用于安全的随机数生成器。

示例：线性反馈移位寄存器会产生大量随机数，但如果有足够的输出，就可以发现种子并预测所有后续数字。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-19T12:38:35.530

即使给定先前生成的随机数列表，安全随机数也不应该是可预测的。您通常会将它用作加密例程的密钥，因此您不希望它可猜测或可预测。当然，可猜测性取决于上下文，但您应该假设攻击者知道您知道的所有事情，并且可能会使用这些事情来产生您的随机数。

有各种网站可以生成安全随机数，其中一个受信任的网站是[hotbits](http://www.fourmilab.ch/hotbits/)。如果您只是将随机数生成作为一次性活动进行，为什么不使用彩票抽奖结果，因为它可以证明是随机的。当然，不要告诉任何人哪张彩票和哪张开奖，然后将这些数字放入合适的号码中以获得您想要的范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-19T12:09:46.987

只有一个“随机数”通常意味着一个伪随机数。因为它是一个伪随机数，所以攻击者可以（很容易）预测到它。

安全随机数是来自真正随机数据源的随机数，即。涉及某种熵池。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T12:14:05.790

同意 Purfiedeas。还有一篇很好的文章，叫做[Cheat Online Poker](http://www.cigital.com/papers/download/developer_gambling.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-24T11:11:12.563

A random number would probably mean a pseudo random number returned by an algorithm using a 'seed'.

A secure random number would be a true random number returned from a device such as a caesium based random number generator (which uses the decay rate of the caesium to return numbers). This is naturally occurring and can't be predicted.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T12:10:25.287

这可能取决于上下文，但是当您像这样比较它们时，我会说“随机数”是[伪随机数](http://en.wikipedia.org/wiki/Pseudorandomness)，而“安全随机数”是真正随机的。前者给你一个基于种子和算法的数字，另一个给你一些固有的随机函数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-19T12:12:41.893

这就像 AES 和 ROT13 之间的区别。

为了不那么轻率，在生成随机数时通常会在它的难易程度和序列中下一个随机数的可预测性之间进行权衡，一旦你看到了一些。由您的语言的内置 rand() 返回的随机数通常是廉价的、可预测的种类。

# xml - 在定义 XML 模式 (XSD) 时“选择”“组”元素是否有效

> ID：101338
> 
> 赞同：9
> 
> 时间：2008-09-19T12:07:21.017
> 
> 标签：xml, xsd, schema, choice

定义 XML 模式 (XSD) 时是否有“选择”或“组”元素

即以下是否有效

```
<xs:complexType name="HeaderType">
  <xs:sequence>
    <xs:element name="reservation-number" type="ReservationNumberType" minOccurs="1" maxOccurs="1" nillable="false" />
    <xs:choice minOccurs="1" maxOccurs="1">
      <xs:group ref="ReservationGroup" />
      <xs:group ref="CancellationGroup"/>
    </xs:choice>
  </xs:sequence>
</xs:complexType> 
```

例如，XML 消息可以表示新的预订或现有预订的取消。

如果消息用于预订，则它必须包括在 ReservationGroup 组中定义的所有元素。

如果是取消，那么它必须包括在 CancellationGroup 组中定义的所有元素。

出于某种原因，我的 XML 编辑器 (Eclipse) 不喜欢这样，但没有说明原因。它显示 <xs:complexType name="HeaderType"> 行有错误，但没有说明错误是什么

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-19T13:24:21.287

我不是 XML 专家，尽管我经常使用它。这不是我通常会做这种结构的方式。我更喜欢单独的复杂类型，而不是选择两组（请参阅此答案的最后）。

我怀疑问题在于 ReservationGroup 和 CancellationGroup 以相同的元素开头，在这种情况下，您将违反 Schema Component Constraint: Unique Particle Attribution（下）。

[http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/#cos-nonambig](http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/#cos-nonambig "http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/#cos-nonambig")

> **Schema 组件约束：唯一的粒子属性**
> 
> 必须形成一个内容模型，使得在元素信息项序列的“验证”期间，可以唯一地确定其中直接、间接或“隐含”包含的粒子组件，用来依次验证序列中的每个项目没有检查该项目的内容或属性，也没有关于序列其余部分的项目的任何信息。
> 
> **注意：**此约束为 XML Schema 重构了 [XML 1.0（第二版）] 和 SGML 的等效约束。鉴于元素替换组和通配符的存在，此约束的简明表达是困难的，请参阅对唯一粒子属性约束（非规范）（§H）的进一步讨论。

例如，下面的两个组在同一个选择中是非法的，因为它们的每个第一个元素都是“名称”，这意味着您无法识别您正在查看的组。但是，如果 ReservationGroup 的第一个元素与 Cancellation 组不同（可能是 resDate 和 cancDate），那么它是有效的。

**编辑：**我以前从未遇到过此类问题，我认为组的定义完全合法是令人着迷的，但是如果您将它们放在一起选择，则由于每个组的定义，该选择将变得非法.

**不能形成合法选择的群体**

```
<xs:group name="ReservationGroup">
    <xs:sequence>
        <xs:element name="date"/>
        <xs:element name="name"/>
        <xs:element name="address"/>
    </xs:sequence>
</xs:group>

<xs:group name="CancellationGroup">
    <xs:sequence>
        <xs:element name="date"/>
        <xs:element name="name"/>
        <xs:element name="address"/>
    </xs:sequence>
</xs:group> 
```

**可以形成合法选择的群体**

```
<xs:group name="ReservationGroup">
    <xs:sequence>
        <xs:element name="resDate"/>
        <xs:element name="name"/>
        <xs:element name="address"/>
    </xs:sequence>
</xs:group>

<xs:group name="CancellationGroup">
    <xs:sequence>
        <xs:element name="cancDate"/>
        <xs:element name="name"/>
        <xs:element name="address"/>
    </xs:sequence>
</xs:group> 
```

正如我上面提到的，我会对复杂类型做这种事情。是的，它增加了另一个元素，但它似乎是显而易见的方式，我喜欢显而易见。

```
<xs:complexType name="HeaderType">
  <xs:sequence>
    <xs:element name="reservation-number" type="ReservationNumberType" minOccurs="1" maxOccurs="1" nillable="false" />
    <xs:choice minOccurs="1" maxOccurs="1">
      <xs:element name="reservation" type="ReservationType" />
      <xs:element name="cancellation" type="CancellationType" />
    </xs:choice>
  </xs:sequence>
</xs:complexType> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-19T14:07:33.943

是的。这是因为 ReservationGroup 和 CancellationGroup 都有相同的第一个元素 - 一个“reservation-type”元素，在 ReservationGroup 中分别具有固定值“Reservation”和 CancellationGroup 中的“Cancellation”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-19T12:24:18.043

这是否有效取决于组的内容：如果它们是“序列”或“选择”模型组，则完全合法；“所有”模型组更有问题，在这种情况下通常不允许。

# flash - 将应用程序从 ActionScript2 移植到 ActionScript3 的最佳方式是什么？

> ID：101347
> 
> 赞同：3
> 
> 时间：2008-09-19T12:09:15.553
> 
> 标签：flash, actionscript-3, actionscript-2, port

我们的应用程序是用 ActionScript2 编写的，有大约 50.000 多行代码。我们想将它移植到 ActionScript3 并试图找出我们的选择。我们必须手动完成还是可以使用转换器，我们会遇到什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T13:36:03.677

不久前我问了一个类似的问题，您可能会发现它很有用：

[将预先存在的项目从 Flash 7/AS2 迁移到 Flex/AS3 的最佳方法是什么？](https://stackoverflow.com/questions/46136/what-is-the-best-approach-to-moving-a-preexisting-project-from-flash-7as2-to-fl)

一些小任务可能是自动化的（主要是修复包声明），但除此之外我怀疑它是否可以自动化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T15:04:55.647

从 AS2 转换到 AS3 时，我总是遇到一些糟糕的事情，主要是因为整个过程没有好的自动化脚本，坦率地说，这很无聊。从长远来看，在仍然处于活动状态并自行更新的项目上更新旧的 AS2 代码是一个好主意，AS3 只是一种更好的语言，而 AVM2 直接比 AVM1 快。

您可以使用脚本删除许多属性中的下划线，添加包信息，执行一些基本导入，但我发现对我来说最好的方法可能是转储您的主类或管理器类进入 FLA 中的文档类行，注释除构造函数之外的所有内容，然后开始转换和取消注释。它可能看起来很慢，但我觉得尝试一次找出 40 个不同的编译器错误可能最终会变慢。

祝你好运，这是必要的工作，但不是有趣的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T13:28:54.393

我认为您永远无法使用自动转换器来完成此任务。转换器可能会为您节省一些步骤或指出必须进行更改的地方，但您必须手动检查代码。

例如，在 AS2 中引用 _level0.variableName 可以指向 _root 级别的影片剪辑、从 HTML 容器发送的 FlashVar 或由代码本身创建的对象。没有真正的知道的方法。（您不能在代码中查找 varname，因为它也可以在外部计算或读取。

您需要有充分的理由进行此类转换。如果 AS2 由于某种原因不再适用，也许您应该尝试解决问题而不是仅仅因为它具有您需要的一个不错的小功能而转换为 AS3。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-11-28T05:14:09.170

一些在线站点可用于将 AS2 转换为 AS3 代码。但根据我过去的经验，这并不好，而且是 100% 的结果。AS3 中的许多东西都发生了变化。所以有些部分你可以自动化，而你们中的大多数人都是手动完成的。如果您在 AS2 中使用了 _global，您可以声明一个名为“_global”的类，其中包含在 AS2 中使用 _global.XXXX 变量的静态变量。

只需想出多种方法来轻松使用 OOP 功能。我给你一个 _global 变量的例子......

# random - 你如何生成密码？

> ID：101362
> 
> 赞同：34
> 
> 时间：2008-09-19T12:13:08.663
> 
> 标签：random, passwords, ascii, character, passphrase

你如何生成密码？

*   随机字符？
*   密码？
*   高ASCII？

像这样的东西？

```
cat /dev/urandom | strings 
```

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2008-09-19T14:23:52.563

Mac OS X 的“钥匙串访问”应用程序让您可以访问漂亮的 OS X 密码生成器。点击 command-N 并单击钥匙图标。您可以选择密码样式（可记忆、数字、字母数字、随机、FIPS-181）并选择长度。它还会警告您有关弱密码的信息。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-30T07:48:37.960

使用这个并重击:)

```
cat /dev/urandom | tr -dc 'a-zA-Z0-9-!@#$%^&*()_+~' | fold -w 10 | head -n 1 
```

更改人数以生成密码数量。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-09-19T12:15:07.303

用于生成密码的简短 python 脚本，最初来自 python 食谱。

```
#!/usr/bin/env python

from random import choice
import getopt
import string
import sys

def GenPasswd():
    chars = string.letters + string.digits
    for i in range(8):
        newpasswd = newpasswd + choice(chars)
    return newpasswd

def GenPasswd2(length=8, chars=string.letters + string.digits):
    return ''.join([choice(chars) for i in range(length)])

class Options(object):
    pass

def main(argv):
    (optionList,args) = getopt.getopt(argv[1:],"r:l:",["repeat=","length="])

    options = Options()
    options.repeat = 1
    options.length = 8
    for (key,value) in optionList:
        if key == "-r" or key == "--repeat":
            options.repeat = int(value)
        elif key == "-l" or key == "--length":
            options.length = int(value)

    for i in xrange(options.repeat):
        print GenPasswd2(options.length)

if __name__ == "__main__":
    sys.exit(main(sys.argv)) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-09-19T12:19:17.540

开源的[Keepass](http://keepass.info/)工具具有一些出色的密码生成功能，包括增强的随机化。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-09-19T12:47:56.257

我使用[密码保险箱](http://passwordsafe.sourceforge.net/)来生成和存储我所有的密码，这样您就不必记住超强密码（除了可以解锁您的保险箱的密码）。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-11-20T12:59:21.950

您的建议略有不同：

```
head -c 32 /dev/random | base64 
```

或者，您可以修剪尾随`=`并使用`echo`来获取换行符：

```
echo $(head -c 32 /dev/random | base64 | head -c 32) 
```

这为您提供了更可预测的输出长度密码，同时仍确保仅可打印字符。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-09-19T12:15:16.757

[apg](http://www.adel.nursat.kz/apg/)中的算法非常酷。但我主要使用我自己定义的列表中的随机字符。它主要是数字、大小写字母和一些标点符号。我已经消除了容易被误认为是“1”、“l”、“I”、“O”、“0”等其他字符的字符。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-09-19T12:21:05.510

我不喜欢随机字符密码。它们很难记住。

通常，我的密码根据信息对我的重要性分为几层。

我最安全的密码倾向于使用旧的 BBS 随机生成密码的组合，我太年轻太笨了，不知道如何更改和记住。将其中的一些与自由使用的 shift 键一起添加效果很好。如果我不使用那些，我会发现密码短语更好。也许是我喜欢的某本书中的一句话，再次用一些混合大小写和特殊符号表示。通常我会使用超过 1 个短语，或者一个短语中的几个单词，与另一个短语中的几个单词连接。

在低优先级网站上，我的密码很短，通常是几个熟悉的令牌的组合。

我最大的问题是工作，我们需要每 30 天更改一次密码，并且不能重复密码。我只是像其他人一样，想出一个密码并在末尾附加一个不断增加的索引。像这样的密码规则是荒谬的。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2008-09-19T12:29:24.583

对于网站，我使用[SuperGenPass](http://supergenpass.com/)，它使用哈希函数（基于 MD5）从主密码和域名中派生出特定于站点的密码。无需将该密码存储在任何地方（SuperGenPass 本身就是一个小书签，完全是客户端），只需记住您的主密码即可。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2008-09-19T13:13:19.707

我认为这在很大程度上取决于您要使用密码的目的以及数据的敏感程度。如果我们需要为客户生成一个稍微安全的密码，我们通常会使用一个易于记忆的句子，并使用每个单词的第一个字母并添加一个数字。类似于“在 stackoverflow 上使用的最高机密密码”=>“tspfuos8”。

然而，大多数时候，我使用 Linux 上的“pwgen”实用程序来创建密码，您可以指定复杂性和长度，因此它非常灵活。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2008-09-19T14:02:05.593

称为 pwgen 的标准 UNIX 实用程序。几乎可以在任何 Unix 发行版中使用。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2008-09-19T12:15:39.203

我使用[KeePass](http://keepass.info/)生成复杂的密码。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2008-09-19T12:25:25.047

我使用[https://www.grc.com/passwords.htm](https://www.grc.com/passwords.htm)为 WPA 密钥之类的东西生成长密码字符串。如果您必须实现某种注册站点，您也可以使用它（通过屏幕截图）创建用于身份验证密码哈希的盐。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2008-09-19T12:41:31.980

在某些情况下，我使用 Perl 的 Crypt::PassGen 模块，它使用马尔可夫链分析词库（例如 /usr/share/dict/words 在任何合理的 Unix 系统上）。这允许它生成密码，这些密码被证明是合理发音的，因此可以记住。

也就是说，在 $work 中，我们正在转向硬件质询/响应令牌机制。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2008-09-19T13:09:50.603

选择一个您喜欢的强主密码，然后使用 cryptohash(masterpasword+sitename) 为每个站点生成一个密码。如果站点 B 的密码落入坏人之手（例如由于恶意管理员、wlan 嗅探或站点泄露），您不会丢失站点 A 的密码，但您只需要记住一个密码。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2008-09-19T12:45:32.267

我最近使用了一种不寻常的方法来生成密码。它们不需要非常强大，而且随机密码太难记住了。我的应用程序有一个巨大的北美城市表。为了生成密码，我生成了一个随机数，抓取了一个随机城市，然后添加了另一个随机数。

波士顿9934

数字的长度是随机的（就像它们是附加的、前置的或两者兼而有之），因此蛮力并不容易。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2008-09-19T13:27:33.367

嗯，我的技巧是使用我最喜欢的歌曲的首字母。举个例子：每晚在我的梦里，我看到你，我感觉到你……

给我吗：

> 恩尼迪化

...以及一些插入数字，例如 i=1、o=0 等...

> en1md1sy1fy

……大写？永远重视自己:)

最后的密码是...

> en1Md1sy1fy

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2008-09-19T14:18:55.053

[Joel Spolsky](https://stackoverflow.com/users/4/joel-spolsky)写了一篇短文：[密码管理终于成为可能](http://joelonsoftware.com/items/2008/09/11b.html)

> …终于有一种管理所有密码的好方法了。无论您经常使用多少台计算机，该系统都能正常工作；它适用于 Mac、Windows 和 Linux；它是安全的；它不会将您的密码暴露给任何互联网站点（无论您是否信任它）；它为每个站点生成高度安全的随机密码，一旦设置完毕，它就相当容易使用，它会在线维护您的密码文件的自动备份，而且它是免费的。

他建议使用[DropBox](http://www.getdropbox.com/)和[PasswordSafe](http://passwordsafe.sourceforge.net/)或[Password Gorilla](http://www.fpx.de/fp/Software/Gorilla/)。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2008-09-19T15:11:55.613

密码：

```
$ gpg --gen-random 1 20 | gpg --enarmor | sed -n 5p 
```

密码：

[http://en.wikipedia.org/wiki/Diceware](http://en.wikipedia.org/wiki/Diceware)

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2008-11-14T11:59:05.270

大多数情况下，我键入`dd if=/dev/urandom bs=6 count=1 | mimencode`并将结果保存在密码保险箱中。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2009-01-11T01:14:53.260

```
import random

length = 12
charset = "abcdefghijklmnopqrstuvwxyz0123456789"

password = ""
for i in range(0, length):
    token += random.choice(charset)

print password 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2010-12-09T08:55:32.243

在这里阅读并尝试了一些很棒的答案后，我仍在寻找一种易于调整并使用非常常见的 Linux 实用程序和资源的生成技术。

我真的很喜欢这个`gpg --gen-random`答案，但感觉有点笨拙？

经过进一步搜索，我找到了这颗宝石

```
echo $(</dev/urandom tr -dc A-Za-z0-9 | head -c8) 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2008-09-19T12:17:36.250

在 Mac 上，我使用[RPG](http://www.net-security.org/software.php?id=612)。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2008-09-19T12:18:00.603

在 PHP 中，通过从 ASCII 表中生成随机字符串。请参阅[生成（伪）随机字母数字字符串](https://stackoverflow.com/questions/48124/generating-pseudorandom-alpha-numeric-strings#48285)

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2008-09-19T12:21:05.417

我从外语句子的首字母开始，并有一些大写的约定。然后，我在句子的特定部分插入源自应用程序或网站名称的数字和符号的组合。

这个方案为每个应用程序生成一个唯一的密码，我每次都可以在我的脑海中毫无困难地重新导出（所以没有记忆），并且它的任何部分出现在字典中的可能性为零。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2008-09-19T12:25:37.370

您将不得不编写额外的规则来检查您的密码对于您正在编写的系统是否可以接受。一些系统有诸如“最少两个数字和两个大写字母”之类的策略。当您逐个字符生成密码时，请根据需要保留数字/字母/大写的计数，并将密码生成包装在 do..while 将重复密码生成直到 (digitCount>1 && alphaCount>4 && upperCount >1），或其他。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2008-09-19T12:28:25.927

[http://www.wohmart.com/ircd/pub/irc_tools/mkpasswd/mkpasswd+vms.c](http://www.wohmart.com/ircd/pub/irc_tools/mkpasswd/mkpasswd+vms.c)

[http://www.obviex.com/Samples/Password.aspx](http://www.obviex.com/Samples/Password.aspx)

[https://www.uwo.ca/its/network/security/passwd-suite/sample.c](https://www.uwo.ca/its/network/security/passwd-suite/sample.c)

即使在 Excel 中！ [https://web.archive.org/web/1/http://articles.techrepublic%2ecom%2ecom/5100-10878_11-1032050.html](https://web.archive.org/web/1/http://articles.techrepublic%2ecom%2ecom/5100-10878_11-1032050.html)

[http://webnet77.com/cgi-bin/helpers/crypthelp.pl](http://webnet77.com/cgi-bin/helpers/crypthelp.pl)

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2008-09-19T12:43:29.933

密码猴子，iGoogle 小部件！

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2008-09-19T13:19:54.883

Firefox-addon Password Hasher 非常适合生成密码：[Password Hasher](http://wijjo.com/project/?c=passhash "密码哈希")

该网站还提供了一个在线替代插件： [在线密码哈希](http://wijjo.com/passhash/passhash.html "在线密码哈希")

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2008-09-19T13:26:41.280

我使用 Perl 程序生成随机可打印的 ASCII 字符，然后在有额外规则帮助我生成更“安全”的密码时调整脚本。我可以将密码保存在便利贴上，然后在一两天后将其销毁；我的手指会记住它，我的密码将完全无法猜测。

这是我的主要登录密码，我每天都使用它，事实上，当我坐下来解锁屏幕时，我每天都会使用很多次。这样便于快速记忆。显然，其他情况下的密码必须使用不同的机制。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2008-09-19T13:35:23.270

我使用[Crypt::GeneratePassword](http://search.cpan.org/perldoc?Crypt::GeneratePassword)模块。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2008-09-19T13:51:56.307

对于网站来说，它是一个“秘密”词，结合了我注册的网站的一些令人难忘的东西。

对于其他一切，我使用随机生成的密码。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2008-09-19T14:24:48.770

我手动生成了非常难记的符号、数字和大小写字母字符串，它们通常看起来像[leetspeak](http://en.wikipedia.org/wiki/Leet)。

例子：

```
&p0pul4rw3b$ite! 
```

然后我将它们存储为电子邮件草稿，我可以通过网络邮件从任何地方访问。

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2008-09-19T14:36:05.777

[Jeff Atwood](https://stackoverflow.com/users/1/jeff-atwood)建议我们都改用密码短语而不是密码：

*   [密码与密码短语](http://www.codinghorror.com/blog/archives/000342.html)
*   [密码布道](http://www.codinghorror.com/blog/archives/000360.html)

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2008-09-19T15:00:36.920

**makepasswd**使用 Linux 的 /dev/random 功能生成真正的随机密码，强调安全性而不是发音。它还可以加密在命令行上给出的明文密码。

最值得注意的选项是

```
--crypt-md5 使用 MD5 摘要算法生成加密密码
--string STRING 使用 STRING 中的字符生成随机密码

```

前者可用于自动生成/etc/passwd、/etc/cvspasswd 等条目。后者可用于在密码中添加标点字符（默认情况下，生成的密码仅包含字母数字字符）。

makepasswd 最初是 mkircconf 程序的一部分，用于集中管理 Linux Internet Support Cooperative IRC 网络。

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2008-09-19T15:13:50.227

如果您想生成用户更容易记住的密码，请查看马尔可夫链。[http://en.wikipedia.org/wiki/Markov_chain](http://en.wikipedia.org/wiki/Markov_chain)

该算法可以产生可以发音的无意义单词，因此它们也变得更容易记住和通过电话传递。一点 Google-fu 可以为您提供几乎任何语言的代码示例。

您还需要获得一个好的字典来过滤掉任何作为实际单词出现的密码。

当然，这些不会是高强度密码，但是当您需要对某些东西进行一些基本的访问控制并且您不想让用户承受难以记住的密码的负担时，它们会非常有用。

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2008-09-19T15:17:04.773

我通常使用密码保险箱来生成随机密码。对于我实际上希望能够在没有密码保险箱的情况下记住的密码，我通常使用一个单词和一个数字，然后将字符交错

所以你说一句话。

棒球

和一个数字

24681357

你得到一个密码

b2a4s6e8b1a3l5l7

它看起来很随机，并且可能很难蛮力。而且大多数时候打字也很容易。您只需键入单词，然后将光标移回第二个字符，然后键入数字，然后在每个字符之间按右光标键。这不仅使键入更容易，而且还使键盘记录器更难记录您实际键入的内容。

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2009-01-11T01:03:03.297

这种 Perl 单线有时会有所帮助（`rand`不安全，但通常没关系）：

```
$ perl -E"say map { chr(33 + rand(126-33)) } 1..31 
```

示例输出：

```
ET<2:k|D:!z)nBPMv+yitM8x`r.(WwO 
```

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2010-10-21T21:15:18.427

对于相当重要的东西，我喜欢使用字母和数字的组合，比如“xme7UpOK”。这些可以用这个单行生成：

```
perl -le 'print map { (a..z,A..Z,0..9)[rand 62] } 1..8' 
```

对于不太重要的东西，我喜欢使用易于输入、发音和记忆的密码，例如“loskubov”或“gobdafol”。这些可以像这样生成：

```
perl -le '@l=("aeiou", "bdfgjklmnprstv");
          print map {(split "",$l[$_])[rand length $l[$_]]} split "", "10110101"' 
```

其中“10110101”是元音和辅音的模式。

* * *

## 回答 #40

> 赞同：0
> 
> 时间：2011-11-28T15:27:24.413

```
$ echo `cat /etc/dictionaries-common/words | sort --random-sort | head -n 4`
consented upsurges whitewall balderdash 
```

相当低效，但它有效。

* * *

## 回答 #41

> 赞同：0
> 
> 时间：2013-01-23T16:15:34.047

我使用了几个我自己编写的 Perl 脚本，[可以在 Github 上找到](https://github.com/Keith-S-Thompson/random-passwords)。

`gen-password`生成密码，例如`7bp4ssi02d4i`，带有指定长度和字符集的选项。（据我的银行所知，这是我母亲的娘家姓。）

`gen-passphrase`[受此 XKCD 卡通](http://xkcd.com/936/)`porcine volume smiled insert`的启发，使用字典单词生成随机密码，例如。

两者都从默认情况下获取随机数据`/dev/urandom`，但可以被告知使用`/dev/random`。

我将密码保存在一个加密的数据库中，并且我从不在多个站点上使用相同的密码。我实际上记得很少。

* * *

## 回答 #42

> 赞同：-1
> 
> 时间：2008-09-19T12:37:26.517

从中挑选一个序列

```
md5 random_file 
```

* * *

## 回答 #43

> 赞同：-2
> 
> 时间：2008-09-19T12:16:56.643

```
<?php
    print md5(rand(0, 99999));
?> 
```

# .net - 如何使用 Castle 在测试项目（TFS 2008）中进行依赖注入

> ID：101363
> 
> 赞同：1
> 
> 时间：2008-09-19T12:13:34.403
> 
> 标签：.net, tfs, dependency-injection, castle-windsor, automated-tests

我在我的测试项目中使用 Castle Windsor 进行依赖注入。我正在尝试创建我的“存储库”类之一的实例。“它在我的机器上运行良好”，但是当我在 TFS 中运行每晚构建时，我的测试无法加载所述类。

```
private static readonly WindsorContainer _container = new WindsorContainer(new XmlInterpreter());

    public void MyTestInitialize()
    {
        var testRepository = (IBogusRepository)_container[typeof(IBogusRepository)];

    } 
```

xml配置：

```
<castle>
    <components>
      <component id="primaryBogusRepository" type="Example2008.Repository.LALALALALA, Example2008.Repository" service="Example2008.Domain.Repository.IBogusRepository, Example2008.Domain" />
      <component id="primaryProductRepository" type="Example2008.Repository.ProductRepository, Example2008.Repository" service="Example2008.Domain.Repository.IProductRepository, Example2008.Domain" />
    </components>
  </castle> 
```

当我对新构建进行排队时，它会产生以下消息：

> 无法创建类 Example2008.Test.ActiveProductRepositoryTest 的实例。错误：System.Configuration.ConfigurationException：找不到类型名称 Example2008.Repository.LALALALALA，Example2008.Repository。
> 
> Castle.Windsor.Installer.DefaultComponentInstaller.ObtainType(String typeName) Castle.Windsor.Installer.DefaultComponentInstaller.SetUpComponents(IConfiguration[] 配置，IWindsorContainer 容器) Castle.Windsor.Installer.DefaultComponentInstaller.SetUp(IWindsorContainer 容器，IConfigurationStore 存储) Castle.Windsor .WindsorContainer.RunInstaller() Castle.Windsor.WindsorContainer..ctor(IConfigurationInterpreter 解释器) Example2008.Test.ActiveProductRepositoryTest..cctor() in d:\Code_Temp\Example Project Nightly\Sources\Example2008.Test\ProductRepositoryTest.cs：第 19 行

从这条消息看来，我的配置是正确的（可以看出我要实例化具体类'LALALALALA'，所以xml配置明显已经正确的红色了）

我认为我的依赖项设置也正确（因为它在本地工作，即使我清理解决方案并重建）。

有什么想法吗？

（顺便说一句，使用 VS2008、TFS 2008.Net 3.5、Castle 1.03）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-09-19T12:31:17.480

听起来 bin 目录（或您的执行目录用于构建的任何位置）中缺少包含存储库实现的程序集。

我会首先检查程序集是否存在于构建服务器的执行目录中。

如果它确实存在，那么我会检查以确保程序集的版本是正确的，即在同一名称空间中具有存储库实现等。

可能是您的构建服务器在 VS 执行/构建的其他地方执行/构建对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-25T12:45:33.310

这太有趣了。我发现[这篇博文可能对您的问题有所帮助。](http://www.ademiller.com/blogs/tech/2008/01/gotchas-mstest-appdomain-changes-in-vs-2008/) 看起来 MSTest 正在使用它作为其工作目录，至少可以说这很烦人。博客文章展示了如何更改目录，以便获得一致的结果。我还会做一些谷歌搜索，看看是否存在更优雅的解决方案。

# php - 动态类变量

> ID：101386
> 
> 赞同：6
> 
> 时间：2008-09-19T12:18:11.430
> 
> 标签：php, oop

PHP 有自动生成类变量的方法吗？我*想*我以前见过这样的东西，但我不确定。

```
public class TestClass {
    private $data = array();

    public function TestClass() {
        $this->data['firstValue'] = "cheese";
    }
} 
```

该`$this->data`数组始终是一个关联数组，但它们的键因类而异。是否有任何可行的方式来访问 `$this->data['firstValue']`而`$this->firstValue`无需定义链接？

如果是的话，它有什么缺点吗？

或者是否有一种静态方法来定义链接，如果`$this->data`数组不包含该键，则不会爆炸？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-19T12:22:59.140

见这里：[http ://www.php.net/manual/en/language.oop5.overloading.php](http://www.php.net/manual/en/language.oop5.overloading.php)

你想要的是“__get”方法。链接上有一个您需要的示例。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-25T04:19:37.520

使用 PHP5 的“魔术”`__get()`方法。它会像这样工作：

```
public class TestClass {
    private $data = array();

    // Since you're using PHP5, you should be using PHP5 style constructors.
    public function __construct() {
        $this->data['firstValue'] = "cheese";
    }

    /**
     * This is the magic get function.  Any class variable you try to access from 
     * outside the class that is not public will go through this method.  The variable
     * name will be passed in to the $param parameter.  For this example, all 
     * will be retrieved from the private $data array.  If the variable doesn't exist
     * in the array, then the method will return null.
     *
     * @param string $param Class variable name
     *
     * @return mixed
     */
    public function __get($param) {
        if (isset($this->data[$param])) {
            return $this->data[$param];
        } else {
            return null;
        }
    }

    /**
     * This is the "magic" isset method.  It is very important to implement this 
     * method when using __get to change or retrieve data members from private or 
     * protected members.  If it is not implemented, code that checks to see if a
     * particular variable has been set will fail even though you'll be able to 
     * retrieve a value for that variable.
     *
     * @param string $param Variable name to check
     * 
     * @return boolean
     */
    public function __isset($param) {
        return isset($this->data[$param]);
    }

    /**
     * This method is required if you want to be able to set variables from outside
     * your class without providing explicit setter options.  Similar to accessing
     * a variable using $foo = $object->firstValue, this method allows you to set 
     * the value of a variable (any variable in this case, but it can be limited 
     * by modifying this method) by doing something like:
     * $this->secondValue = 'foo';
     * 
     * @param string $param Class variable name to set
     * @param mixed  $value Value to set
     * 
     * @return null
     */
    public function __set($param, $value) {
        $this->data[$param] = $value;
    }
} 
```

使用魔法`__get`、`__set`和`__isset`构造函数将允许您控制希望如何在类上设置变量，同时仍将所有值存储在单个数组中。

希望这可以帮助 ：）

# user-interface - 是否有任何免费工具可以远程监控 BizTalk 应用程序？

> ID：101394
> 
> 赞同：2
> 
> 时间：2008-09-19T12:19:25.140
> 
> 标签：user-interface, command-line, monitoring, biztalk

无论是命令行还是 GUI，我都有兴趣测试它们中的每一个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-08-11T08:51:14.507

您的问题非常笼统，上面的所有答案都假设了各种情况。当谈到 BizTalk 监控时，它对不同的人意味着不同的事情。您的 BizTalk 管理员可能会通过打开 BizTalk 管理控制台来监控 BizTalk 环境的整体运行状况。BizTalk 管理控制台允许管理员部署和管理 BizTalk 应用程序，此外它还允许监控正在运行的系统的运行状况。他/她可以查询诸如正在运行的实例（编排、消息）、暂停的实例（可恢复/不可恢复）、失败的路由消息、失败的订阅消息等。如果您还可以从不同的机器远程访问 BizTalk 管理控制台通过 MMC 管理单元安装时已安装 BizTalk 管理位。

除此之外，您还有 HAT（2006 年的健康和活动跟踪，而不是 2009 年以后的），它允许您进行某些监控。但是要访问 HAT，您需要在任何一台 BizTalk 机器上。

接下来是 BAM，这将需要一些自定义配置，或者在某些情况下根据您的要求进行一些自定义编码，以捕获一些运行时监控数据。

接下来，您将获得各种性能计数器，它们将为您提供大量统计信息，例如在主机实例中运行的编排数量、假脱机大小、接收/发送的消息数量等。

我没有发现任何必要去为我的任何监控要求使用第三方软件。

HTP Saravana Kumar BizTalk Server MVP。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-08T00:14:21.337

如果要监视 BizTalk 应用程序正在做什么，则应使用业务活动监视器 (BAM)。BAM 允许您跟踪消息或上下文中的字段，并跟踪业务流程中的里程碑形状。这里有一个 BAM 培训工具包：http: [//msdn.microsoft.com/en-us/library/cc963995.aspx](http://msdn.microsoft.com/en-us/library/cc963995.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-26T19:46:21.180

您始终可以使用 smtp 适配器向自己发送失败的消息。性能计数器也是监控 biztalk 的好方法——那里有很多非常有用的数据。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-08-10T20:42:06.687

**商务门**

有一个名为 BizMon 的新 BizTalk 监控工具。你可以在[这里查看](http://bizmontool.com/)。我认为它做你喜欢的事。

我们将它用于我们的三个中型 BizTalk 环境（每个环境约 50 个 BizTalk 应用程序），它对我们很有用。但是你可以自己[试试](http://bizmontool.com/buy)。该工具最多可*免费*使用 5 个应用程序（但是，如果您监控的应用程序数量超过了您需要许可证的数量）。

**FRENDS 氦气**

另一个可能值得一试的工具是[FRENDS Helium](http://www.frends.com/product/monitoring-technologies/)。我自己没有尝试过，但他们有一个可以请求和试用的测试版。不过，对定价或类似的事情一无所知。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-19T12:33:11.737

你的意思是监控每个应用程序的状态？我知道的唯一监控工具是[这里的微软](http://msdn.microsoft.com/en-us/library/aa577454.aspx)

如果您想监控 Biztalk 应用程序正在做什么，您需要将日志代码放入应用程序本身，然后监控日志（数据库表、事件查看器等）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-08T00:15:52.927

如果要监视应用程序每秒执行的编排数量，或通过端口的消息数量，可以使用性能监视器 (perfmon)。当您安装 BizTalk Server 时，会安装大量新的性能计数器。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-08T00:17:21.300

如果您希望在 BizTalk 应用程序启动和停止时收到通知，您可以使用 WMI。查看文档中包含的示例 WMI 脚本以获取更多信息。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-11-20T09:10:22.800

对于性能监控，您可以使用 PAL ( [http://www.codeplex.com/PAL](http://www.codeplex.com/PAL) )。您还可以使用 Message Box Viewer 来分析系统的运行状况。我最近发现的另一个工具似乎很酷，是 BizTalk Documenter ( [http://www.codeplex.com/BizTalkDocumenter](http://www.codeplex.com/BizTalkDocumenter) )。它是任何 BizTalk 开发人员工具箱中的必备工具。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-01-25T14:11:38.483

在过去的一年里，Minotaur 作为一种有效的 BizTalk 监控工具已经取得了很大的进展。它易于安装和设置且价格低廉。访问 Raging Bull Tech 的网站，研究[Minotaur](http://www.ragingbulltech.com/products)作为当今市场上某些产品的新替代品。

Minotaur V2.0 定于 2011 年 1 月下旬发布，如果 BETA 测试的反馈有任何依据，它将席卷市场。

如果您希望结束您的监控问题，请使用最好的 BizTalk 监控，Minotaur。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-02-14T19:01:02.263

您可以查看[http://sourceforge.com/projects/biztalkmonitord](http://sourceforge.com/projects/biztalkmonitord) <- 开源免费 biztalk 监视器！包括 SMS 警告和实时提要监视器，对我们来说非常有用！

我不是最容易设置的（但是当它关​​闭时，没有什么可以比较的！）

最好的是它的多环境友好

监视器包括： 特定文件共享 环境中的挂起和活动消息 应用程序中的挂起和活动消息 接收端口、发送端口和主机 + 内置 powershell 命令以重新启动它们！文件共享上的可用空间！

干杯，祝你好运！

# open-source - 什么是最好的开源 Nagios 接口？

> ID：101414
> 
> 赞同：2
> 
> 时间：2008-09-19T12:24:54.500
> 
> 标签：open-source, networking, monitoring, daemon, nagios

（你自己眼中最好的）大多数功能？最酷的功能？最巧妙的设计？

[中通](http://www.centreon.com/)？

[纳威](http://www.nagvis.org/)？

其他？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-09-07T12:14:07.540

[Icinga](http://www.icinga.org)（分叉的 Nagios）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-08-07T05:04:10.003

中通是最棒的！我们在公司使用它。看看 FAN（全自动 Nagios）！最好的最好的.. 如果您在公司和 google talk 中使用 Jabber 和 linux 服务器，请不要忘记使用 lm_sensors for linux 和 Notify By Jabber 插件；-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-19T13:20:53.587

即使仅从纯粹的审美角度来看，NagVis 似乎也更好。但对我来说，这是关键要素之一。也许如果您要问更具体的问题（您使用什么标准来定义*最佳*），回答您的问题可能会更容易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T12:29:51.977

[Thruk](http://thruk.org)是 nagios、icinga 和 shinken 的强大接口。功能范围从 excel 导出到发送大量命令，插件范围从配置编辑器到报告和仪表板。

# ffmpeg - .3gp 文件中的缩略图

> ID：101415
> 
> 赞同：3
> 
> 时间：2008-09-19T12:24:59.743
> 
> 标签：ffmpeg, 3gp

有人知道如何从 3gb 视频文件中获取缩略图（静止图像）吗？第一帧或类似的东西。我正在使用 .net，但解决方案可以是任何语言（托管或本地）或第三方产品。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-19T12:30:18.997

这是在 Linux 上使用 ffmpeg 并从 PHP 调用，但如果您可以使用 ffmpeg，那么这并不重要：

```
ffmpeg -i path/to/your/video.3gp -an -ss 00:00:00 -t 00:00:01 -y -s 400x300 path/to/your/image%d.jpg 
```

注意“%d”；您只生成一帧，但 ffmpeg 仍然需要它，因此它知道在生成图像时将数字放在哪里。所以你最终会得到一个像“image1.jpg”这样的名字

# flash - 闪存中的多个本地连接 - 更好的架构是什么？

> ID：101416
> 
> 赞同：0
> 
> 时间：2008-09-19T12:25:24.377
> 
> 标签：flash, actionscript-3, actionscript-2, localconnection

我在 AS3 中使用 localConnection 来允许多个 Flash 应用程序与中央应用程序进行交互。（有些是 AS2，有些是 AS3）。

中央应用程序必须为每个接收连接使用单独的 localConnection 变量（否则尝试连接的第二个应用程序将被拒绝）。

但是发回消息呢？

让主应用程序使用单个 localConnection 向所有其他应用程序发送消息会更好，还是应该为每个目标分配一个 LC 变量？（因为我在 .send 命令中指定了目标）

1 个用于所有消息退出的门还是每个消息目标 1 个门？哪个更好？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T15:01:33.487

单独与每个 Flash 应用程序进行通信似乎更有条理，尽管我认为这两种方式都可以。

# javascript - 使用 javascript encodeURIComponent 函数对空格进行编码

> ID：101422
> 
> 赞同：2
> 
> 时间：2008-09-19T12:26:11.800
> 
> 标签：javascript

为什么 JavaScript 函数将`encodeURIComponent`空格编码为十六进制 Unicode 值`%20`而不是`+`. URI 参数不应该是空格`+`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-19T12:28:45.287

空格编码为 %20，我相信这是他们的 ASCII 字符代码。

但是，开发人员对将空格编码为 + 大有裨益，因为它生成的 URL 可供人类阅读和输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-19T12:31:14.533

在 URI 的所有使用中，+ 不被识别为空格，例如尝试使用此链接：-

mailto:bloke@somewhere?subject=Hello+World

主题行仍然有 + 而：-

mailto:bloke@somewhere?subject=Hello%20World

作品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T12:30:33.537

作为一般规则，文件路径应包含编码为 %20 的空格。查询字符串参数应包含编码为 + 的空格。

例如：[http ://www.example.com/a%20file.ext?name=John+Doe](http://www.example.com/a%20file.ext?name=John+Doe)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-19T20:20:49.050

使用 + 号作为空格是出于历史原因。当时的 CGI 使网络服务器能够使用普通的命令行程序作为“网络应用程序”。在命令行程序的脚本世界中，大多数解释器/shell 语言都有空格分隔的值列表，例如

```
items = (A beautiful world)
foreach( item in $items ) echo "* $item" 
```

从命令行调用这样的“列表渲染应用程序”：

```
render-list A beautiful world 
```

通过 http 和网络服务器调用相同的“列表渲染应用程序”：

```
http://testhost/cgi-bin/render-list?A+beautiful+world 
```

对于大多数用例，+ 号的含义是参数**值**中的一种项或术语分隔符。这正是我今天推荐使用它的领域。

# sql-server - 您如何继续提高您的 SQL 技能？

> ID：101423
> 
> 赞同：15
> 
> 时间：2008-09-19T12:26:33.640
> 
> 标签：sql-server

SQL 开发人员如何跟上 SQL 世界的当前技术和趋势？是否有任何博客、书籍、文章、技术等被用来保持最新和了解情况？

OO、过程和功能程序员有很多机会参与各种开源项目，但在我看来，FOSS 途径对 SQL 开发人员来说更加封闭。

想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-19T12:33:28.130

找到可以测试您的 TRANSACT-SQL 知识的具有挑战性的问题……我个人很喜欢[Joe Celko 的 SQL 谜题和答案](https://rads.stackoverflow.com/amzn/click/com/0123735963)。

[Joe Celko 的 SQL 谜题和答案 http://ecx.images-amazon.com/images/I/51DTJ099P7L._SL500_BO2,204,203,200_PIsitb-dp-500-arrow,TopRight,45,-64_OU01_AA240_SH20_.jpg](http://ecx.images-amazon.com/images/I/51DTJ099P7L._SL500_BO2,204,203,200_PIsitb-dp-500-arrow,TopRight,45,-64_OU01_AA240_SH20_.jpg)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-19T12:32:43.733

SQL 语言的特点是它几乎是一个静态目标。很快你就会着眼于增加对集合论和问题域本身的理解，而不是语言的细节。

真正的肉在语言的任何一边，在数据库本身（如何存储、检索和组织大型数据集）或应用程序中（使用 ORM 等）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-02-09T14:05:39.777

我浏览了答案，显然没有人提到 Stephane Faroult 的工作。

我强烈建议您考虑“SQL 的艺术”（[http://www.amazon.com/Art-SQL-Stephane-Faroult/dp/0596008945](https://rads.stackoverflow.com/amzn/click/com/0596008945)），我发现它真的很有趣，而且 - 令人惊讶的是，阅读起来甚至很有趣.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-19T12:32:14.500

[http://sqlblog.com/](http://sqlblog.com/)怎么样

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-19T12:38:11.757

我通过分析缓慢而复杂的查询并寻找改进它们的方法来改进。这可以在 SQL Server 中通过分析查询计划工具并寻找瓶颈来完成。我还发现[Visual Quickstart Guide](https://rads.stackoverflow.com/amzn/click/com/0321118030)指南非常适合快速参考。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-19T14:01:43.130

Joe Celko 的[SQL Puzzles and Answers](https://rads.stackoverflow.com/amzn/click/com/1558604537)和[SQL for Smarties](https://rads.stackoverflow.com/amzn/click/com/0123693799)是目前最好的两本通用 SQL 书籍。两者都是很好的资源，可以为您提供有关您曾经认为需要光标或某些客户端库来完成的棘手问题的想法。对于任何真正感兴趣的 SQL 极客来说，这本书也非常适合休闲阅读，而不仅仅是作为桌面参考。太棒了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-19T12:30:55.610

虽然不是 SQL Server 专家，但总的来说，我发现基于社区的活动是跟上当前模式的好方法。在这里参与开发人员/DBA/营销专家/*插入专业*社区的潜在结果是，您正在学习新的思维模式并锻炼批判性思维。无论您是什么专业人士，这都是一种成长的好方法。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-19T12:47:17.070

SQL中没有*当前的技术和趋势*。只有*那些你应该已经知道但不知道*的东西。学习*这些东西*的正确方法是痛苦……太痛苦了。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-19T13:54:30.900

加入您使用的 DB 风格的邮件列表...或潜伏在 stackoverflow 上；）

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-19T16:52:56.947

大多数“当前”的东西不是 SQL 本身，而是数据库如何存储信息以及如何更快地检索信息。查看其他线程： [SQL 优化培训有哪些参考资料、课程和/或最佳实践](https://stackoverflow.com/questions/23927/what-are-some-references-lessons-and-or-best-practices-for-sql-optimization-tra)

唯一真正的前沿是查询计划、索引结构、排序算法等，而不是 SQL 本身。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-10-08T22:17:05.460

您提出这个问题的事实已经是一个好兆头。避免自满是“建议#1”。编写和优化 SQL 是无可替代的。实际使用是保持敏锐度的最佳方式，但存在“以林还林”场景的风险，我们倾向于使用舒适和熟悉的东西。尝试新策略，检查新方法，寻找新方法来训练我们的大脑思考集合、SQL、关系理论，以及掌握我们使用的特定方言的新发展，这些都是优秀 SQL 开发人员的标志。

这些天有很多很好的博客。我主要在 Microsoft 领域工作，所以我喜欢[SQLTeam.com](http://www.sqlteam.com/)。

Usenet 是一个闲逛和做出贡献的好地方。有许多与 SQL 相关的新闻组。通常，您会发现解决别人的问题可以帮助您学习新策略，或者迫使您研究语言中尘土飞扬的角落，而这是您每天都不会遇到的。不过，由于恶意使用，ISP 似乎注定要关闭所有的 Usenet，所以这个可能会走渡渡鸟的道路。

此外，一些 IRC 服务器有一个充满活力的 sql 通道，您可以在其中做出同样的改变（只需厚脸皮）。

最后，这个网站可能是另一个可以挂的地方，在那里你可以阅读困难问题的答案，看看它如何适用于你自己的世界，练习这些技术，并将它们内化。也做出贡献，因为看到其他人如何对您的解决方案投赞成票或反对票是 100% 纯正的反馈。

当然，那里也有很多很棒的书。Celko 的任何作品都是赢家，在 SQL Server 方面，Kalen Delaney 和 Ron Soukup 写了一些赢家。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-19T12:41:11.950

我遇到的最好的事情是处理其他人的 SQL 代码。尤其是遗留业务代码。您想针对某些东西测试您的技能，开始更改一些其他人无法理解的“巫毒代码”。:)

除此之外，我只是尝试关注新版本 SQL 的变化，看看是否有什么可以利用的。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-19T12:43:16.983

使用 phpmyadmin 时的闪光提示很好而且很详细

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-19T14:12:17.287

这里有一些有趣的 SSIS 信息。 [http://blogs.conchango.com/jamiethomson/default.aspx](http://blogs.conchango.com/jamiethomson/default.aspx)

这里的 Wiki 中也有一些很好的信息： [http ://wiki.lessthandot.com/index.php/Main_Page](http://wiki.lessthandot.com/index.php/Main_Page)

对于那些说 SQL 永远不会改变的人来说，SQL Server 2005 和 2008 在 T-SQl 中有一些巨大的变化，这将有助于解决一些在 SQL Server 2000 中难以解决的难题，并且一旦你学习了新语法，就会变得容易得多，所以是的，有一些东西要跟上。

此外，性能调优和 SSIS 是非常复杂的主题，需要学习很多东西。

我确实发现选择不学习高级 SQL 技能的开发人员往往会编写性能不佳的 SQL 代码，并且一旦他们的数据库中的记录数量增加，他们编写的应用程序往往会变得非常缓慢并且很难修复。现在，我正在与开发人员一起修复他们编写的一些错误代码，这些代码实际上导致网站上的每个查询都超时。显然，现在这是一个紧急情况，如果开发人员有更好的 SQL 技能，一开始就很容易以更有效的方式编写代码。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-19T14:12:26.600

我从未听说过“SQL 开发人员”这个词。SQL 应该是您工具箱中的一项技能，例如排序、您喜欢的任何框架、JavaScript 等等。继续提高您的 SQL 技能以继续使用它的最佳方法。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-19T14:54:34.143

作为一名开发人员，而不是 DBA，我密切关注各种开发人员资源，这通常与 DB 相关，但我并没有专门“尝试跟上”。

我知道很多，但我也知道还有很多要知道的。在每个项目中，我都必须学习新的东西。每个项目还涉及我对过去遇到的类似任务采取不同的方法。

如果我到了我认为我一直在做同样的事情的阶段，也许我会有意识地努力采取具体的步骤。但目前，以及在可预见的未来，我正在有机地、在职地学习，并按照我的项目要求进行学习。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-19T16:20:37.057

阅读：

书籍 - Celko（也阅读了一些偏向 Oracle 的书籍）博客 - 上面提到的，加上 SSWUG

网络研讨会和会议 - 了解 SSIS/SSRS/SSAS 等供应商特定内容的最佳方式

实践：

改进代码（我的和其他的）

重构

指导/培训其他开发人员

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-09-19T16:24:56.827

老实说，这是随着时间的推移你会变得更好的事情之一。尽可能多地阅读以了解可能发生的事情。有些事情需要一段时间才能真正理解。很长一段时间我都被子查询吓到了，直到我几乎别无选择，只能使用它们。

当您获得更多经验并需要做更复杂的事情时，您将学习自己的方式。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-09-19T16:34:45.837

[SqlServerCentral](http://www.sqlservercentral.com/) - 文章、脚本、建议的重要来源

不幸的是，要访问您需要注册的文章（虽然它是免费的）
，我想他们可以从 StackOverflow 中学到的一件事是消除[登录障碍](http://www.codinghorror.com/blog/archives/000881.html)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2013-08-09T18:36:10.567

We've written a [full tutorial](http://www.wiseowl.co.uk/blog/s217/sql_server_tutorial.htm), and you can test your SQL skills at a [separate site](http://www.skills-assessment.net/sql-test-skills.htm) (also created by our me, in the interests of full declaration).

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2008-09-19T12:34:19.893

SQL 开发人员，还是 DBA？

除了在日常工作中学习不同的 SQL 方言（Oracle、SQL Server 等）之外，SQL 实际上并没有太大的变化。当然，您可以在开发技能、确定在何处实现存储过程等时引入更高级的概念，但最终它只是 SQL。最重要的是让您的架构正确且可维护。

现在管理数据库是完全不同的事情，有一系列工具，而且数据库软件本身每隔几年就会更新一次。Oracle 至少有新闻通讯、网站和杂志，其中可能包含大量信息、示例和最佳实践方案。

* * *

## 回答 #22

> 赞同：-5
> 
> 时间：2008-09-19T12:33:44.387

老实说，我认为不需要极端的 SQL 技能。一旦我可以创建事务（用于数据库一致性）和基本触发器（用于跨表一致性），我通常可以很好地将程序逻辑......保留在程序中，而不是将其放入我正在使用的任何数据库中。与不断深入扩展的一般编程不同，我没有发现值得终生研究的 SQL 深度。

# apache-flex - Flex 和 crossdomain.xml

> ID：101427
> 
> 赞同：7
> 
> 时间：2008-09-19T12:27:58.487
> 
> 标签：apache-flex, security, crossdomain.xml

我想知道将 crossdomain.xml 添加到应用程序服务器的根目录是否存在任何安全问题？可以将它添加到服务器的任何其他部分吗？您是否知道不需要服务器有此文件的任何变通方法？

谢谢达米安

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-19T12:46:36.510

通过添加 crossdomain.xml，主要的安全问题是闪存应用程序现在可以连接到您的服务器。因此，如果有人登录您的网站，然后使用恶意 Flash 应用程序浏览到另一个网站，则该 Flash 应用程序可以连接回您的网站。由于它在浏览器中，因此 cookie 被共享给 flash 应用程序。这允许 Flash 应用程序劫持用户的会话，以在用户不知情的情况下执行您的网站所做的任何事情。

如果您的 flex 应用程序由同一台服务器提供，则不需要 crossdomain.xml

您可以将其放在站点的子目录中并使用 System.security.loadSecurityPolicy()

[http://livedocs.adobe.com/flex/2/langref/flash/system/Security.html](http://livedocs.adobe.com/flex/2/langref/flash/system/Security.html)

然后，应用程序将被限制在您的目录结构的树中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-20T06:32:17.937

跨域文件没有解决方法，需要支持跨域数据访问或跨域脚本。如果有任何跨域请求，Flash 将在域的根目录中查找 crossdomain.xml 文件。例如，如果您从以下位置请求 XML 文件：

`http://mysubdomain.mydomain.com/fu/bar/`

Flash 将检查 crossdomain.xml 文件是否存在于：

`http://mysubdomin.mydomain.com/crossdomain.xml`

您可以将 crossdomain.xml 文件放在其他位置。但是，当您需要从其他位置加载 crossdomain.xml 文件时，您必须通过[Security.loadPolicyFile](http://help.adobe.com/en_US/AS3LCR/Flash_10.0/flash/system/Security.html#loadPolicyFile())来完成。请记住，此跨域的位置对您拥有的安全访问有任何影响。Flash 将仅授予对包含跨域及其子文件夹的文件夹的访问权限。

您可能还想了解[Flash Player 10 中的安全更改](http://www.adobe.com/devnet/flashplayer/articles/fplayer9-10_security.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T12:46:47.320

您可以为您的应用程序配置一个虚拟主机。这样，文件 crossdomain.xml 可以位于应用程序的根目录，但不一定位于服务器的根目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-06-23T12:39:57.503

是的。小心使用跨域策略文件：
[http ://www.jamesward.com/2009/11/08/how-bad-crossdomain-policies-expose-protected-data-to-malicious-applications/](http://www.jamesward.com/2009/11/08/how-bad-crossdomain-policies-expose-protected-data-to-malicious-applications/)

我的两条一般经验法则是：

*   不要将跨域策略文件放在使用 cookie 的服务器上
*   不要将跨域策略文件放在内部服务器上

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-10-19T19:03:10.043

crossdomain.xml 只是一个对 Flash 运行时有意义的文件；你可以限制什么 HTTP 请求可以看到它。您可以使用 Web 服务器（例如 Apache）配置控制来允许从“根”目录（参见前面的答案）读取它（并且只允许它）。

您可以按请求中的其他标头进行过滤，等等。

干杯

# c - 实现基于整数的幂函数 pow(int, int) 的最有效方法

> ID：101439
> 
> 赞同：279
> 
> 时间：2008-09-19T12:30:30.620
> 
> 标签：c, algorithm, math, exponentiation

在 C 中将一个整数提高到另一个整数的幂的最有效方法是什么？

```
// 2^3
pow(2,3) == 8

// 5^5
pow(5,5) == 3125 
```

* * *

## 回答 #1

> 赞同：428
> 
> 时间：2008-09-19T12:54:36.193

通过平方取幂。

```
int ipow(int base, int exp)
{
    int result = 1;
    for (;;)
    {
        if (exp & 1)
            result *= base;
        exp >>= 1;
        if (!exp)
            break;
        base *= base;
    }

    return result;
} 
```

这是在非对称密码学中对大量数字进行模幂运算的标准方法。

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2008-09-20T18:43:33.227

请注意，[通过平方取幂](https://en.wikipedia.org/wiki/Exponentiation_by_squaring)不是最佳方法。作为适用于所有指数值的通用方法，这可能是您可以做的最好的事情，但对于特定的指数值，可能会有一个更好的序列，需要更少的乘法。

例如，如果你想计算 x^15，通过平方取幂的方法会给你：

```
x^15 = (x^7)*(x^7)*x 
x^7 = (x^3)*(x^3)*x 
x^3 = x*x*x 
```

这总共是 6 次乘法。

事实证明，这可以通过[加法链求幂](https://en.wikipedia.org/wiki/Addition-chain_exponentiation)使用“仅”5 次乘法来完成。

```
n*n = n^2
n^2*n = n^3
n^3*n^3 = n^6
n^6*n^6 = n^12
n^12*n^3 = n^15 
```

没有有效的算法来找到这个最佳的乘法序列。来自[维基百科](https://en.wikipedia.org/wiki/Addition-chain_exponentiation)：

> 寻找最短加法链的问题不能通过动态规划来解决，因为它不满足最优子结构的假设。也就是说，将功率分解为较小的功率是不够的，每个较小的功率计算最少，因为较小功率的加法链可能是相关的（以共享计算）。例如，在上面 a¹⁵ 的最短加法链中，a⁶ 的子问题必须计算为 (a³)²，因为 a³ 被重复使用（与 a⁶ = a²(a²)² 相反，它也需要三个乘法）。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2011-03-17T21:17:42.417

如果您需要将 2 提高到一个幂。最快的方法是按功率移位。

```
2 ** 3 == 1 << 3 == 8
2 ** 30 == 1 << 30 == 1073741824 (A Gigabyte) 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-05-09T13:55:18.637

这是Java中的方法

```
private int ipow(int base, int exp)
{
    int result = 1;
    while (exp != 0)
    {
        if ((exp & 1) == 1)
            result *= base;
        exp >>= 1;
        base *= base;
    }

    return result;
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-09-19T12:35:15.927

一个非常特殊的情况是，当您需要说 2^(-x 到 y) 时，其中 x 当然是负数，并且 y 太大而无法在 int 上进行移位。您仍然可以通过使用浮点数在恒定时间内完成 2^x。

```
struct IeeeFloat
{

    unsigned int base : 23;
    unsigned int exponent : 8;
    unsigned int signBit : 1;
};

union IeeeFloatUnion
{
    IeeeFloat brokenOut;
    float f;
};

inline float twoToThe(char exponent)
{
    // notice how the range checking is already done on the exponent var 
    static IeeeFloatUnion u;
    u.f = 2.0;
    // Change the exponent part of the float
    u.brokenOut.exponent += (exponent - 1);
    return (u.f);
} 
```

通过使用 double 作为基本类型，您可以获得更多 2 的幂。（非常感谢评论者帮助整理这篇文章）。

还有可能更多地了解[IEEE 浮点数](https://www.wikiwand.com/en/IEEE_754)，其他特殊的求幂情况可能会出现。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2008-09-19T14:34:02.023

```
int pow( int base, int exponent)

{   // Does not work for negative exponents. (But that would be leaving the range of int) 
    if (exponent == 0) return 1;  // base case;
    int temp = pow(base, exponent/2);
    if (exponent % 2 == 0)
        return temp * temp; 
    else
        return (base * temp * temp);
} 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2016-01-07T16:25:17.887

`power()`仅适用于**整数的函数**

```
int power(int base, unsigned int exp){

    if (exp == 0)
        return 1;
    int temp = power(base, exp/2);
    if (exp%2 == 0)
        return temp*temp;
    else
        return base*temp*temp;

} 
```

**复杂度 = O(log(exp))**

`power()`函数适用于**负 exp 和 float base**。

```
float power(float base, int exp) {

    if( exp == 0)
       return 1;
    float temp = power(base, exp/2);       
    if (exp%2 == 0)
        return temp*temp;
    else {
        if(exp > 0)
            return base*temp*temp;
        else
            return (temp*temp)/base; //negative exponent computation 
    }

} 
```

**复杂度 = O(log(exp))**

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-05-14T07:03:27.027

如果您想将 2 的整数值提高到某个值的幂，最好使用 shift 选项：

`pow(2,5)`可以替换为`1<<5`

这效率更高。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2008-10-02T17:39:02.740

就像对平方求幂效率的评论的跟进一样。

这种方法的优点是它在 log(n) 时间内运行。例如，如果你要计算一些巨大的东西，例如 x^1048575 (2^20 - 1)，你只需要通过循环 20 次，而不是使用幼稚的方法超过 100 万次。

此外，就代码复杂性而言，它比尝试找到最佳乘法序列更简单，这是 la Pramod 的建议。

编辑：

我想我应该在有人为我标记溢出的可能性之前澄清一下。这种方法假设您有某种 hugeint 库。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-04-01T17:11:11.153

晚会迟到：

下面是一个解决方案，它也`y < 0`尽可能地处理。

1.  它使用`intmax_t`最大范围的结果。没有规定不适合的答案`intmax_t`。
2.  `powjii(0, 0) --> 1`这是这种情况下的[常见结果](https://stackoverflow.com/questions/19955968/why-is-math-pow0-0-1)。
3.  `pow(0,negative)`，另一个未定义的结果，返回`INTMAX_MAX`

    ```
    intmax_t powjii(int x, int y) {
      if (y < 0) {
        switch (x) {
          case 0:
            return INTMAX_MAX;
          case 1:
            return 1;
          case -1:
            return y % 2 ? -1 : 1;
        }
        return 0;
      }
      intmax_t z = 1;
      intmax_t base = x;
      for (;;) {
        if (y % 2) {
          z *= base;
        }
        y /= 2;
        if (y == 0) {
          break; 
        }
        base *= base;
      }
      return z;
    } 
    ```

此代码使用永久循环`for(;;)`来避免`base *= base`其他循环解决方案中的最终共同点。该乘法是1）不需要并且2）可能`int*int`是UB溢出。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-06-19T05:30:19.703

考虑负指数的更通用的解决方案

```
private static int pow(int base, int exponent) {

    int result = 1;
    if (exponent == 0)
        return result; // base case;

    if (exponent < 0)
        return 1 / pow(base, -exponent);
    int temp = pow(base, exponent / 2);
    if (exponent % 2 == 0)
        return temp * temp;
    else
        return (base * temp * temp);
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-05-04T00:30:21.160

Swift 中的 O(log N) 解决方案...

```
// Time complexity is O(log N)
func power(_ base: Int, _ exp: Int) -> Int { 

    // 1\. If the exponent is 1 then return the number (e.g a^1 == a)
    //Time complexity O(1)
    if exp == 1 { 
        return base
    }

    // 2\. Calculate the value of the number raised to half of the exponent. This will be used to calculate the final answer by squaring the result (e.g a^2n == (a^n)^2 == a^n * a^n). The idea is that we can do half the amount of work by obtaining a^n and multiplying the result by itself to get a^2n
    //Time complexity O(log N)
    let tempVal = power(base, exp/2) 

    // 3\. If the exponent was odd then decompose the result in such a way that it allows you to divide the exponent in two (e.g. a^(2n+1) == a^1 * a^2n == a^1 * a^n * a^n). If the eponent is even then the result must be the base raised to half the exponent squared (e.g. a^2n == a^n * a^n = (a^n)^2).
    //Time complexity O(1)
    return (exp % 2 == 1 ? base : 1) * tempVal * tempVal 

} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-05-05T23:54:17.970

```
int pow(int const x, unsigned const e) noexcept
{
  return !e ? 1 : 1 == e ? x : (e % 2 ? x : 1) * pow(x * x, e / 2);
  //return !e ? 1 : 1 == e ? x : (((x ^ 1) & -(e % 2)) ^ 1) * pow(x * x, e / 2);
} 
```

是的，它是递归的，但是一个好的优化编译器会优化递归。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-12-27T21:24:43.070

另一种实现（在 Java 中）。可能不是最有效的解决方案，但迭代次数与指数解决方案相同。

```
public static long pow(long base, long exp){        
    if(exp ==0){
        return 1;
    }
    if(exp ==1){
        return base;
    }

    if(exp % 2 == 0){
        long half = pow(base, exp/2);
        return half * half;
    }else{
        long half = pow(base, (exp -1)/2);
        return base * half * half;
    }       
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-02-03T14:36:00.173

我使用递归，如果 exp 是偶数，5^10 =25^5。

```
int pow(float base,float exp){
   if (exp==0)return 1;
   else if(exp>0&&exp%2==0){
      return pow(base*base,exp/2);
   }else if (exp>0&&exp%2!=0){
      return base*pow(base,exp-1);
   }
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-08-12T21:16:27.137

我已经实现了记住所有计算能力然后在需要时使用它们的算法。因此，例如 x^13 等于 (x^2)^2^2 * x^2^2 * x 其中 x^2^2 它是从表中获取的，而不是再次计算它。这基本上是@Pramod 答案的实现（但在 C# 中）。需要的乘法数是 Ceil(Log n)

```
public static int Power(int base, int exp)
{
    int tab[] = new int[exp + 1];
    tab[0] = 1;
    tab[1] = base;
    return Power(base, exp, tab);
}

public static int Power(int base, int exp, int tab[])
    {
         if(exp == 0) return 1;
         if(exp == 1) return base;
         int i = 1;
         while(i < exp/2)
         {  
            if(tab[2 * i] <= 0)
                tab[2 * i] = tab[i] * tab[i];
            i = i << 1;
          }
    if(exp <=  i)
        return tab[i];
     else return tab[i] * Power(base, exp - i, tab);
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-03-17T19:17:44.153

除了 Elias 的回答，它在使用有符号整数实现时会导致未定义行为，以及在使用无符号整数实现时导致高输入的错误值，

这是平方指数的修改版本，它也适用于有符号整数类型，并且不会给出不正确的值：

```
#include <stdint.h>

#define SQRT_INT64_MAX (INT64_C(0xB504F333))

int64_t alx_pow_s64 (int64_t base, uint8_t exp)
{
    int_fast64_t    base_;
    int_fast64_t    result;

    base_   = base;

    if (base_ == 1)
        return  1;
    if (!exp)
        return  1;
    if (!base_)
        return  0;

    result  = 1;
    if (exp & 1)
        result *= base_;
    exp >>= 1;
    while (exp) {
        if (base_ > SQRT_INT64_MAX)
            return  0;
        base_ *= base_;
        if (exp & 1)
            result *= base_;
        exp >>= 1;
    }

    return  result;
} 
```

此功能的注意事项：

```
(1 ** N) == 1
(N ** 0) == 1
(0 ** 0) == 1
(0 ** N) == 0 
```

如果要发生任何溢出或包装，`return 0;`

我用过`int64_t`，但任何宽度（有符号或无符号）都可以使用，只需稍加修改。但是，如果您需要使用非固定宽度的整数类型，则需要更改`SQRT_INT64_MAX`by `(int)sqrt(INT_MAX)`（在 using 的情况下`int`）或类似的东西，这应该进行优化，但它更丑陋，而不是 C 常量表达式。由于浮点精度在完美正方形的情况下，也将结果转换`sqrt()`为 an也不是很好，但我不知道任何实现- 或任何类型的最大值 - 是完美正方形，你可以生活接着就，随即。`int``INT_MAX`

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2016-08-16T20:55:32.453

我的情况有点不同，我正在尝试从力量中创建一个面具，但我想我还是会分享我找到的解决方案。

显然，它只适用于 2 的幂。

```
Mask1 = 1 << (Exponent - 1);
Mask2 = Mask1 - 1;
return Mask1 + Mask2; 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2018-04-07T23:29:26.827

如果您在编译时知道指数（并且它是一个整数），您可以使用模板来展开循环。这可以提高效率，但我想在这里演示基本原理：

```
#include <iostream>

template<unsigned long N>
unsigned long inline exp_unroll(unsigned base) {
    return base * exp_unroll<N-1>(base);
} 
```

我们使用模板特化终止递归：

```
template<>
unsigned long inline exp_unroll<1>(unsigned base) {
    return base;
} 
```

指数需要在运行时知道，

```
int main(int argc, char * argv[]) {
    std::cout << argv[1] <<"**5= " << exp_unroll<5>(atoi(argv[1])) << ;std::endl;
} 
```

# asp.net-mvc - 有没有人让 NVelocity 与 ASP.NET MVC Preview 5 一起工作？

> ID：101449
> 
> 赞同：0
> 
> 时间：2008-09-19T12:32:37.400
> 
> 标签：asp.net-mvc, nvelocity

我猜我需要实现一个`NVelocityViewEngine`和`NVelocityView`- 但在我这样做之前，我想检查一下是否有人已经这样做了。

我在[MVCContrib的](http://www.codeplex.com/MVCContrib)[后备箱](http://mvccontrib.googlecode.com/svn/trunk/)中看不到任何东西。

我已经看过下面的帖子 - 我正在寻找适用于 Preview 5 的东西：

*   [测试 ScottGu：使用 ASP.NET MVC (NVelocity) 的替代视图引擎](http://www.chadmyers.com/Blog/archive/2007/11/28/testing-scottgu-alternate-view-engines-with-asp.net-mvc-nvelocity.aspx)

否则我会开始写一个:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-09-19T13:05:45.403

就我个人而言，我对 NVelocity 一无所知，但[这里](http://weblogs.asp.net/stephenwalther/archive/2008/07/14/asp-net-mvc-tip-19-use-the-nvelocity-view-engine.aspx)有一个可能对您有所帮助的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-19T14:07:15.800

[在MvcContrib](http://mvccontrib.org)中有一个 NVelocity 实现。您需要引用 MvcContrib.Castle dll。

# .net - 可以将 Phoenix 编译器用作更强大的 NGEN 吗？

> ID：101452
> 
> 赞同：2
> 
> 时间：2008-09-19T12:32:54.280
> 
> 标签：.net, compiler-construction, native, ngen

如果您不了解 Phoenix，它是 Microsoft 的一个编译器框架，显然它将成为他们所有新编译器的基础。它可以读取来自 CIL、x86、x64 和 IA64 的代码；并以 x86、x64、IA64 或 CIL 发出代码。

我可以使用它来将纯 .Net 应用程序转换为纯本机应用程序吗？我的意思是，它不必加载任何 .Net .dll（甚至不是 mscoree），并且具有相同的语义？当然，这不包括反射。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-19T12:38:47.837

在不了解 Phoenix 的情况下，为了让 .NET 应用程序在本地运行，您还需要框架的本地版本，除非您不使用框架（这几乎是不可能的）。

CLR 还包括垃圾收集、程序集加载等，因此转储 CLR 的解释部分可能不会对 .NET 应用程序的性能产生太大影响。

此外，来自凤凰[常见问题解答](https://connect.microsoft.com/Phoenix/content/content.aspx?ContentID=4547)：

> 问：如何从本机图像重定向到 MSIL 图像（反之亦然）？
> 
> A. 不是很容易。这不是一个受支持的场景，虽然理论上可能是可行的，但我们不知道有谁实际做过。

# google-search - 有没有办法防止谷歌搜索词匹配网址？

> ID：101460
> 
> 赞同：0
> 
> 时间：2008-09-19T12:33:45.713
> 
> 标签：google-search

目前，我正在做一些搜索，其中包括“html”，例如“html rerange”。不幸的是，我在 .html 页面上包含“重新排列”但在页面本身中没有提及 html 的网站获得了很多点击。

有没有办法防止搜索词匹配 url？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-19T12:36:35.877

尝试类似的东西

“html 重新排列 -inurl:html”

inurl 表示“匹配 URL 中的以下模式”，- 表示排除这些页面

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T14:42:52.527

您应该实际使用`rearrange intext:html`，否则您会忽略所有以 .html 结尾的页面。

例如，matt 的方式将包括 www.somesite.com/rearrange.php 但不包括 www.somesite.org/better_result.html。

如果 www.somesite.org/better_result.html 是更好的结果，那么您可能会错过一些重要信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T12:38:01.850

-inurl:(htm|html) "搜索词"

祝你好运！

# ruby - 您如何在 ruby 中编写二进制文字？

> ID：101461
> 
> 赞同：27
> 
> 时间：2008-09-19T12:33:52.000
> 
> 标签：ruby, binary

大多数语言（包括 Ruby）允许以至少三种基数编写数字文字：十进制、八进制和十六进制。以十进制为基数的数字是通常的事情，并且写成（大多数）人自然写数字，96 写成`96`。以零为前缀的数字通常被解释为基于八进制：96 将被写为`0140`. 基于十六进制的数字通常带有前缀`0x`： 96 将被写为`0x60`.

问题是：我可以在 Ruby 中将数字写成二进制文字吗？如何？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2008-09-19T12:36:28.513

使用 0b 前缀

```
>> 0b100
=> 4 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-08-12T18:25:25.373

你可以这样做：

```
>> easy_to_read_binary = 0b1110_0000_0000_0000
=> 57344
>> easy_to_read_binary.to_s(10)
=> "57344" 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-09-19T14:38:08.427

对于文字，前缀是 0b。所以

```
0b100 #=> 4 
```

请注意，格式化字符串也是如此：

```
"%b" % 4 #=> "100" 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-09-19T12:35:56.270

从[本手册](http://docs.huihoo.com/ruby/ruby-man-1.4/syntax.html#numeric)

```
0b01011 
```

二进制整数

# sql-server - 如何在所有存储过程中更改表的模式名称

> ID：101463
> 
> 赞同：5
> 
> 时间：2008-09-19T12:34:05.867
> 
> 标签：sql-server, stored-procedures

我知道如何在 SQL Server 2005 中更改表的架构：

```
ALTER SCHEMA NewSchama TRANSFER dbo.Table1 
```

但是我如何检查和/或更改使用旧模式名称的存储过程？

抱歉：我的意思是：在存储过程的 sql 中有存储过程具有表的旧模式名称......我如何编辑在过程主体中具有 dbo.Table1 的所有存储过程...... .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T14:46:41.260

*   使用 SSMS 中的 Tasks>Generate Scripts 提供一系列 Create Proc 脚本。
*   使用查找和替换 ( `Alt`- `H`) 将“创建”更改为“更改”
*   使用`F`&`R`将 'dbo.Table1' 更改为 'dbo.Table2'
*   然后执行 ( `F5`) 修改所有受影响的 SP。

简单但有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-19T12:40:08.817

通过在更改架构之前右键单击表来获取依赖对象的列表，然后查看依赖于表的内容，制作列表然后更改它们。然而，总是有可能你会错过一些东西，因为它可能会破坏 SQL 服务器跟踪的依赖关系。

但最好的方法是将数据库编写成一个文件，然后搜索表名，列出所有需要更改的存储过程，然后将它们添加到脚本中以更改桌子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-03-05T16:16:39.480

声明 @SearchObject VARCHAR(100)

SET @SearchObject = 'searchable_table_name' -- 将 'searchable_table_name' 更改为要搜索的表名

SELECT sc.name [Search Object], so.name [Container Object],
CASE so.xtype WHEN 'U' THEN 'Table' WHEN 'P' THEN 'Stored Procedure' WHEN 'F' THEN '用户定义函数' ELSE '其他' END 作为 [容器对象类型]

FROM sysobjects 所以

INNER JOIN syscolumns sc ON so.id = sc.id

WHERE sc.name LIKE '%' + @SearchObject + '%' AND so.xtype IN ('U','P','F') -- U：表，P：存储过程，F：用户定义函数（ udf)

ORDER BY [容器对象] ASC

-- 显示包含请求的表名的存储过程。

从 syscomments 中选择文本 where text like '%from ' + @SearchObject + '%'

（从 sysobjects 中选择 id，其中 type='P' 和 name = ''）

-- 显示特定存储过程的内容（从上面找到）

--Exec sp_helptext 'DeleteAssetByID'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-09T11:04:30.417

例如，我创建了一个表 Reports，默认情况下会为其分配 dbo 架构，现在如果我想更改 Reports 表的架构，首先，我将创建一个名为 Reporting 的新架构：

```
CREATE SCHEMA Reporting 
```

然后我将执行以下脚本以将 Reports 表的架构从 dbo 更改为 Reporting：

```
ALTER SCHEMA Reporting TRANSFER dbo.Reports 
```

或者为了更好地理解：

```
ALTER SCHEMA 'newSchema' TRANSFER 'oldSchema'.'table' 
```

# windows - 从控制台登录时限制对单个应用程序的访问而不替换 GINA

> ID：101470
> 
> 赞同：2
> 
> 时间：2008-09-19T12:35:00.547
> 
> 标签：windows, login

有谁知道在 Windows XP 上是否有可行的方法以编程方式创建和配置用户帐户，以便在从控制台（无终端服务）登录后启动特定应用程序并且用户被“锁定”到该应用程序？

应该阻止用户对系统进行任何其他操作（例如：没有 ctrl+alt+canc、没有 ctrl+shift+esc、没有 win+e、没有任何内容）。

作为一个额外的可选奖励，当启动的应用程序关闭和/或崩溃时，用户应该被注销。

任何现有的免费工具、语言或它们的任何组合都可以完成工作（批处理、VB 脚本、C、C++ 等）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-27T14:19:53.020

SOFTWARE\Microsoft\Windows NT\CurrentVersion\WinLogon 有两个值 UserInit 指向成功登录时执行的应用程序。那里的默认应用程序 userinit.exe 处理域登录脚本（如果有），然后启动指定的 Shell= 应用程序。

通过在 HKEY_CURRENT_USER 或 HKEY_USERS 配置单元中创建或替换这些条目，您可以替换特定用户的外壳。

一旦你有了自己的 shell，你就不用担心了，除非“kiosk 用户”可以使用键盘并且可以按 ctrl-alt-del。这似乎是硬编码以启动 taskmgr.exe - 而不是替换 exe，您可以设置以下注册表项

```
[SOFTWARE\Microsoft\Windows NT\CurrentVersion\Image File Execution Options\taskmgr.exe]
Debugger="A path to an exe file that will be run instead of taskmgr.exe" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-19T18:16:41.723

我猜你正在建造一个windows kiosk？

这是替换 Windows 登录 shell 的一些背景 - [http://blogs.msdn.com/embedded/archive/2005/03/30/403999.aspx](http://blogs.msdn.com/embedded/archive/2005/03/30/403999.aspx)

上面的链接谈到使用 IE 作为替代，但任何程序都可以使用。

另请查看 Windows 稳定状态 - [http://www.microsoft.com/windows/products/winfamily/sharedaccess/default.mspx](http://www.microsoft.com/windows/products/winfamily/sharedaccess/default.mspx)

# lisp - 在（循环...）中使用反引号/逗号成语是否正确？

> ID：101487
> 
> 赞同：1
> 
> 时间：2008-09-19T12:37:05.143
> 
> 标签：lisp, iteration

我有一些代码从一个看起来像这样的循环中收集点（consed 整数）：

```
(loop
    for x from 1   to     100
    for y from 100 downto 1
        collect `(,x . ,y)) 
```

我的问题是，``(,x . ,y)`在这种情况下使用是否正确？

编辑：这个示例不是关于生成一个 100x100 项目的表，这里的代码只是说明了两个循环变量的使用和它们的值的组合。我已经编辑了循环以明确这一点。我使用的实际循环取决于其他几个函数（并且是其自身的一部分），因此用文字整数替换调用并将循环从函数中拉出更有意义。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-19T12:39:30.473

这样做会更好（缺点 xy）。

但是要**回答这个问题**，这样做没有错:)（除了让它慢一点）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-19T13:00:00.003

我认为这里的答案是资源利用（来自[这篇文章](https://stackoverflow.com/questions/101487/is-it-correct-to-use-the-backtick-comma-idiom-inside-a-loop#101504)）

例如在剪辑中：

```
[1]> (time
         (progn
             (loop
                 for x from 1 to 100000
                 for y from 1 to 100000 do
                     collect (cons x y))
         ()))
WARNING: LOOP: missing forms after DO: permitted by CLtL2, forbidden by ANSI
         CL.
Real time: 0.469 sec.
Run time: 0.468 sec.
Space: 1609084 Bytes
GC: 1, GC time: 0.015 sec.
NIL
[2]> (time
         (progn
             (loop
                 for x from 1 to 100000
                 for y from 1 to 100000 do
                     collect `(,x . ,y)) ;`
         ()))
WARNING: LOOP: missing forms after DO: permitted by CLtL2, forbidden by ANSI
         CL.
Real time: 0.969 sec.
Run time: 0.969 sec.
Space: 10409084 Bytes
GC: 15, GC time: 0.172 sec.
NIL
[3]> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-19T15:56:26.740

[dsm：这里](https://stackoverflow.com/questions/101487/is-it-correct-to-use-the-backtick-comma-idiom-inside-a-loop#101641)的代码有一些奇怪的地方。注意

```
(loop for x from 1 to 100000
  for y from 1 to 100000 do
  collect `(,x . ,y)) 
```

相当于：

```
(loop for x from 1 to 100
   collecting (cons x x)) 
```

这可能不是你想要的。请注意三件事：首先，您编写它的方式，x 和 y 具有相同的作用。您可能打算嵌套循环。其次，你在 y 之后做的事情是不正确的，因为它后面没有 lisp 形式。第三，你是对的，你可以在这里使用反引号方法，但它会使你的代码更难阅读，而且不是惯用的，所以最好避免。

猜测你的实际意图，你可能会做这样的事情（使用循环）：

```
(loop for x from 1 to 100 appending 
  (loop for y from 1 to 100 collecting (cons x y))) 
```

如果你不喜欢循环宏（比如 Kyle），你可以使用另一个迭代结构，比如

```
(let ((list nil)) 
   (dotimes (n 100) ;; 0 based count, you will have to add 1 to get 1 .. 100
     (dotimes (m 100) 
       (push (cons n m) list)))
   (nreverse list)) 
```

如果您发现自己经常做这种事情，您可能应该编写一个更通用的交叉列表函数，然后将这些整数列表传递给它

如果你真的对迭代有问题，而不仅仅是循环，你可以递归地做这种事情（但请注意，这不是方案，你的实现可能无法保证 TCO）。[Kyle在这里](https://stackoverflow.com/questions/101487/is-it-correct-to-use-the-backtick-comma-idiom-inside-a-loop#101503)展示的函数“genint”是一个普通（但不是标准）函数 iota 的变体。但是，附加到列表是一个坏主意。像这样的等效实现：

```
(defun iota (n &optional (start 0))
  (let ((end (+ n start)))
    (labels ((next (n)
               (when (< n end) 
                 (cons n (next (1+ n))))))
      (next start)))) 
```

应该更有效率，但仍然不是尾声。请注意，我已将其设置为更常见的基于 0 的设置，但为您提供了一个从 1 或任何其他整数开始的可选参数。当然上面可以写成这样：

```
(defun iota (n &optional (start 0))
  (loop repeat n 
     for i from start collecting i)) 
```

其优点是不会因为大的争论而炸毁堆栈。如果您的实现支持尾调用消除，您还可以通过执行以下操作来避免递归运行不当：

```
(defun iota (n &optional (start 0))
  (labels ((next (i list)
             (if (>= i (+ n start))
                 nil
                 (next (1+ i) (cons i list)))))
    (next start nil))) 
```

希望有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T12:39:22.127

为什么不只是

```
(cons x y) 
```

顺便说一句，我尝试在 CLISP 中运行您的代码，但它没有按预期工作。由于我不是循环宏的忠实拥护者，因此您可以递归地完成相同的事情：

```
(defun genint (stop)
  (if (= stop 1) '(1)
      (append (genint (- stop 1)) (list stop))))

(defun genpairs (x y)
  (let ((row (mapcar #'(lambda (y)
                        (cons x y))
                        (genint y))))
    (if (= x 0) row
        (append (genpairs (- x 1) y)
                row))))

(genpairs 100 100) 
```

# apache-flex - Flex Builder 3 设计视图，未应用 css

> ID：101497
> 
> 赞同：0
> 
> 时间：2008-09-19T12:38:26.560
> 
> 标签：apache-flex, actionscript-3, flexbuilder

我在两台 Windows 机器上安装了 Flex Builder 3，并且两台机器上都安装了同一个项目。在一台计算机上，我定义的 CSS 样式显示在设计视图中；在另一台计算机上，它们未应用。有什么理由让它不能在一个上工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-23T12:18:52.747

编译器可能默认使用“使用服务器的 SDK”（Coldfusion??）右键单击项目并选择“属性”，选择“Flex 编译器”，然后选择正确的 SDK 版本。它必须是 3.x 才能使用 CSS 文件的设计视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T18:21:27.763

您是否检查过 Flex/Editors/Design Mode 下的首选项？那有一个皮肤渲染选项，可以吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-02T22:13:09.377

有时当我第一次切换到设计视图时，直到我点击刷新按钮才会应用 CSS。

# apache-flex - 如何捕获 Flex 中的所有异常？

> ID：101532
> 
> 赞同：43
> 
> 时间：2008-09-19T12:43:59.137
> 
> 标签：apache-flex, exception, error-handling

当我在调试 Flash 播放器中运行 Flex 应用程序时，一旦发生意外情况，就会弹出异常。但是，当客户使用该应用程序时，他不会使用调试 Flash 播放器。在这种情况下，他没有弹出异常，但他的 UI 无法正常工作。

因此，出于可支持性的原因，我想捕获任何可能发生在 Flex UI 中的任何异常，并在 Flex 内部弹出窗口中显示错误消息。通过使用 Java，我只需将整个 UI 代码封装在一个 try/catch 块中，但是对于 Flex 中的 MXML 应用程序，我不知道在哪里可以执行这样一个通用的 try/catch。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2008-09-19T13:49:01.197

在 Flex 3 中无法收到有关未捕获异常的通知。Adobe 意识到了这个问题，但我不知道他们是否计划创建一个解决方法。

目前唯一的解决方案是将 try/catch 放在合乎逻辑的位置，并确保您正在侦听 ERROR（或 Web 服务的 FAULT）事件以获取任何调度它们的事件。

**编辑：**此外，实际上不可能捕获事件处理程序引发的错误。我在 Adob​​e Bug System 上记录了一个[错误。](http://bugs.adobe.com/jira/browse/FP-1619)

**2010 年 1 月 12 日更新：**[Flash 10.1](http://labs.adobe.com/technologies/flashplayer10/)和[AIR 2.0](http://labs.adobe.com/technologies/air2) （均处于测试版）现在支持全局错误处理，并且通过订阅[LoaderInfo.uncaughtErrorEvents的](http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/flash/display/LoaderInfo.html#uncaughtErrorEvents)[UNCAUGHT_ERROR](http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/flash/events/UncaughtErrorEvent.html)事件来实现。以下代码取自[livedocs 上的代码示例](http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/flash/display/LoaderInfo.html#uncaughtErrorEvents)：

```
public class UncaughtErrorEventExample extends Sprite
{
    public function UncaughtErrorEventExample()
    {
        loaderInfo.uncaughtErrorEvents.addEventListener(
            UncaughtErrorEvent.UNCAUGHT_ERROR, uncaughtErrorHandler);
    }

    private function uncaughtErrorHandler(event:UncaughtErrorEvent):void
    {
        if (event.error is Error)
        {
            var error:Error = event.error as Error;
            // do something with the error
        }
        else if (event.error is ErrorEvent)
        {
            var errorEvent:ErrorEvent = event.error as ErrorEvent;
            // do something with the error
        }
        else
        {
            // a non-Error, non-ErrorEvent type was thrown and uncaught
        }
    } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-11-04T15:28:15.543

Adobe 错误管理系统中有一个错误/功能请求。如果它对您很重要，请投票给它。

[http://bugs.adobe.com/jira/browse/FP-444](http://bugs.adobe.com/jira/browse/FP-444)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-03-23T13:48:20.910

它适用于 Flex 3.3。

```
 if(loaderInfo.hasOwnProperty("uncaughtErrorEvents")){
    IEventDispatcher(loaderInfo["uncaughtErrorEvents"]).addEventListener("uncaughtError", uncaughtErrorHandler);
 } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-10-28T12:09:34.493

请注意，错误 FP-444（上图）链接到[http://labs.adobe.com/technologies/flashplayer10/features.html#developer](http://labs.adobe.com/technologies/flashplayer10/features.html#developer)，自 2009 年 10 月以来表明这将在 10.1 时成为可能，目前是 10 月 28 日， 2009 仍未发布 - 所以我想我们会在它发布时看看这是否属实

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2010-06-11T04:29:54.283

替代接受的答案，使用 try-catch。我认为更慢，但更容易阅读。

```
try {
    loaderInfo.uncaughtErrorEvents.addEventListener("uncaughtError", onUncaughtError);
} catch (e:ReferenceError) {
    var spl:Array = Capabilities.version.split(" ");
    var verSpl:Array = spl[1].split(",");

    if (int(verSpl[0]) >= 10 &&
        int(verSpl[1]) >= 1) {
        // This version is 10.1 or greater - we should have been able to listen for uncaught errors...
        d.warn("Unable to listen for uncaught error events, despite flash version: " + Capabilities.version);
    }
} 
```

当然，您需要使用最新的 10.1 playerglobal.swc 才能成功编译此代码：http: [//labs.adobe.com/downloads/flashplayer10.html](http://labs.adobe.com/downloads/flashplayer10.html)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2011-05-05T14:11:48.720

我正在使用 flex 4。我试过`loaderInfo.UncaughtErrorEvents,`但 loaderInfo 没有初始化，所以它给了我空引用错误。然后我尝试`root.loaderInfo.UncaughtErrorEvents`了同样的故事。我试过`sprite.root.UncaughtErrorEvents`了，但是没有精灵对象，我创建了一个，但是没有用。最后我尝试了

systemManager.loaderInfo.uncaughtErrorEvents.addEventListener(UncaughtErrorEvent.UNCAUGHT_ERROR,globalUnCaughtErrorHandler.hanleUnCaughtError);

猜猜看，它就像魔术一样工作。检查[这个](http://guya.net/blogstuff/geh/projects/GlobalErrFlex4.fxp)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2011-07-06T13:18:27.323

它适用于 Flex 3.5 和 flash player 10：

```
 <?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" addedToStage="application1_addedToStageHandler(event)">
    <mx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

            protected function application1_addedToStageHandler(event:Event):void{              
                if(loaderInfo.hasOwnProperty("uncaughtErrorEvents")){
                    IEventDispatcher(loaderInfo["uncaughtErrorEvents"]).addEventListener("uncaughtError", uncaughtErrorHandler);
                }

                sdk.text = "Flex " + mx_internal::VERSION;
            }

            private function uncaughtErrorHandler(e:*):void{
                e.preventDefault();

                var s:String;

                if (e.error is Error)
                {
                    var error:Error = e.error as Error;
                    s = "Uncaught Error: " + error.errorID + ", " + error.name + ", " + error.message;
                }
                else
                {
                    var errorEvent:ErrorEvent = e.error as ErrorEvent;
                    s = "Uncaught ErrorEvent: " + errorEvent.text;
                }

                msg.text = s;
            }

            private function unCaught():void
            {
                var foo:String = null;
                trace(foo.length);
            }
        ]]>
    </mx:Script>
    <mx:VBox>
        <mx:Label id="sdk" fontSize="18"/>
        <mx:Button y="50" label="UnCaught Error" click="unCaught();" />
        <mx:TextArea id="msg" width="180" height="70"/>
    </mx:VBox>
</mx:Application> 
```

谢谢

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2011-02-14T17:06:08.947

我将事件侦听器附加到“根”，这对我有用：

```
sprite.root.loaderInfo.uncaughtErrorEvents.addEventListener(UncaughtErrorEvent.UNCAUGHT_ERROR, onUncaughtError); 
```

在调试 Flash Player 中，这仍然会出错，但在非调试版本中，错误将出现在 Flash Player 的对话框中 - 然后处理程序将做出响应。要停止出现对话框，请添加：

```
event.preventDefault(); 
```

所以：

```
 private function onUncaughtError(event:UncaughtErrorEvent):void
    {
        event.preventDefault();
        // do something with this error
    } 
```

我在 AIR 中使用它，但我认为它也适用于标准 AS3 项目。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-03-04T19:21:29.717

现在您可以使用加载器信息：

[http://www.adobe.com/devnet/flex/articles/global-exception-handling.html](http://www.adobe.com/devnet/flex/articles/global-exception-handling.html)

查看：

```
loaderInfo.uncaughtErrorEvents.addEventListener(UncaughtErrorEvent.UNCAUGHT_ERROR, onUncaughtError);

private function onUncaughtError(e:UncaughtErrorEvent):void
{
    // Do something with your error.
} 
```

# .net - 在没有毫秒和 gmt 的情况下将 DateTime 序列化为时间

> ID：101533
> 
> 赞同：12
> 
> 时间：2008-09-19T12:44:18.887
> 
> 标签：.net, time, xml-serialization, attributes

我使用 XSD 文件作为输入创建了一个 C# 类文件。我的一个属性如下所示：

```
 private System.DateTime timeField;

 [System.Xml.Serialization.XmlElementAttribute(DataType="time")]
 public System.DateTime Time {
     get {
         return this.timeField;
     }
     set {
         this.timeField = value;
     }
 } 
```

序列化后，文件的内容现在如下所示：

```
<Time>14:04:02.1661975+02:00</Time> 
```

是否有可能，在属性上使用 XmlAttributes，让它在没有毫秒和 GMT 值的情况下呈现？

```
<Time>14:04:02</Time> 
```

这是可能的，还是在类被序列化后我需要将某种 xsl/xpath-replace-magic 组合在一起？

这不是将对象更改为 String 的解决方案，因为它在应用程序的其余部分中用作 DateTime，并允许我们使用 XmlSerializer.Serialize() 方法从对象创建 xml 表示。

我需要从字段中删除额外信息的原因是接收系统不符合时间数据类型的 w3c 标准。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-09-19T13:04:45.357

将 [XmlIgnore] 放在 Time 属性上。

然后添加一个新属性：

```
[XmlElement(DataType="string",ElementName="Time")]
public String TimeString
{
    get { return this.timeField.ToString("yyyy-MM-dd"); }
    set { this.timeField = DateTime.ParseExact(value, "yyyy-MM-dd", CultureInfo.InvariantCulture); }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-09-19T12:52:10.130

您可以创建一个字符串属性来执行与 timeField 字段之间的转换，并将序列化属性放在该属性上，而不是应用程序其余部分使用的真实 DateTime 属性。

# javascript - 最好的 Javascript 下拉菜单？

> ID：101536
> 
> 赞同：16
> 
> 时间：2008-09-19T12:44:39.353
> 
> 标签：javascript, menu, dhtml

我正在寻找一个下拉 JavaScript 菜单。

它应该是 IE6 和 Firefox 2 中最简单、最优雅的可访问菜单。如果它在无编号列表 ( `ul`) 上工作会很好，这样用户就可以在没有 JavaScript 支持的情况下使用该页面。

你推荐哪一个？我在哪里可以找到这样一个菜单的代码？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-19T12:46:19.503

我认为 jquery superfish 菜单非常棒且易于使用：

[http://users.tpg.com.au/j_birch/plugins/superfish/](http://users.tpg.com.au/j_birch/plugins/superfish/)

Javascript**不是必需**的，它基于简单的有效 ul 无序列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-19T12:47:33.200

[A List Apart - 下拉列表](http://http://www.alistapart.com/articles/dropdowns)

我会使用像上面这样的纯 CSS 解决方案，所以即使禁用了 javascript，用户仍然可以获得下拉菜单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-19T12:54:34.710

这是我使用 jQuery 的答案：

```
 jQuery.fn.ddnav = function() {
        this.wrap("");
        this.each(function() {
                var sel = document.createElement('select');
                jQuery(this).find("li.label, li a").each(function() {
                        jQuery("<option>").val(this.href ? this.href : '').html(jQuery(this).html()).appendTo(sel);
                });
                jQuery(this).hide().after(sel);
        });
        this.parent().find("select").after("<input type=\"button\" value=\"Go\">");
        var callback = function(button) {
                var url = jQuery(button.target).parent("div").find("select").val();
                if(url.length)
                        window.open(url, "_self")
        };
        this.parent().find("input[type='button']").click(callback);
        this.parent().find("select").change(callback);
        return this;
}; 
```

然后在你准备好的处理程序中：

```
 $("ul.dropdown_nav").ddnav(); 
```

但我要指出，这些对可用性来说很糟糕。最好使用列表并一次向人们显示所有选项，最好不要在选择后导航和/或需要按下不同的按钮才能到达他们想要的位置。

我认为你最好不要使用上面的（我写了代码！）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-19T12:58:59.317

对于纯粹主义者：http: [//www.grc.com/menudemo.htm](http://www.grc.com/menudemo.htm) 绝对没有 JavaScript，只有纯 CSS - 并且几乎适用于所有浏览器。

稍加调整就可以使它们看起来和精美的菜单（jQuery 等）一样好

但我们也使用了 jQuery、YUI！和别的。优！如果这是 JavaScript 驱动的菜单的要求，则内置了很好的可访问性选项。

- 安德鲁

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-19T13:06:19.783

我用这个：

[http://www.tanfa.co.uk/css/examples/menu/vs7.asp](http://www.tanfa.co.uk/css/examples/menu/vs7.asp)

有垂直和水平两种口味。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-19T12:52:46.667

我喜欢火柴人的[手风琴](http://www.stickmanlabs.com/accordion/)，这取决于您希望它的行为方式可能会产生很好的效果。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-19T17:18:10.787

我一直是雅虎的（毫不掩饰的）粉丝！用户界面库。[他们有一个很好的菜单栏系统](http://developer.yahoo.com/yui/menu/)，很容易实现。出色的跨浏览器支持。

您也可以从其他流行的 Javascript 框架（例如 jQuery）中获得类似的东西。

# sql - SQL Server 2005 上的“警告：未看到 LOP_CKPT_END”消息是什么意思？

> ID：101538
> 
> 赞同：2
> 
> 时间：2008-09-19T12:44:42.660
> 
> 标签：sql, sql-server, database

上述错误消息出现在 SQL Server 将数据库标记为“可疑”并拒绝打开它之前。有谁知道该消息的含义以及如何解决？我认为这是获取备份的问题，但如果可以恢复数据会很好。

我查看了[kb 文章](http://support.microsoft.com/kb/306366)，但没有要解决的事务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T12:48:09.407

这似乎意味着您的分布式事务协调器在使 SQL Server 联机时无法正确启动。

请参阅此[ASP.NET 论坛帖子](http://forums.asp.net/p/1122541/1756522.aspx)和[知识库文章](http://support.microsoft.com/kb/306366)

根据日志记录的级别，您应该能够进行最后一次已知备份，并使用时间点恢复技术慢慢恢复日志，从而将数据库慢慢恢复到故障开始之前的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-19T15:55:26.960

运行 checkdb 以找出它被标记为可疑的原因，并查看它是否可以在没有任何数据丢失的情况下恢复 (win)

# javascript - 通过标签函数获取原型

> ID：101540
> 
> 赞同：1
> 
> 时间：2008-09-19T12:45:02.427
> 
> 标签：javascript, prototypejs

如何通过标签名称获取元素或元素列表。以我想要所有元素为例`<h1></h1>`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-19T12:47:08.550

document.getElementsByTagName('a') 返回一个数组。在这里查看更多信息：[http ://web.archive.org/web/20120511135043/https://developer.mozilla.org/en/DOM/element.getElementsByTagName](http://web.archive.org/web/20120511135043/https://developer.mozilla.org/en/DOM/element.getElementsByTagName)

修正：如果你想要一个真正的数组，你应该使用类似的东西`Array.from(document.getElementsByTagName('a'))`，或者这些天你可能想要`Array.from(document.querySelectorAll('a'))`。`Array.from()`如果您的浏览器还不支持它，也许可以使用 polyfill 。我可以推荐[https://polyfill.io/v2/docs/](https://polyfill.io/v2/docs/)非常（不以任何方式附属）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-02T08:23:30.530

使用`$$()`并传入 CSS 选择器。

阅读[原型 API 文档`$$()`](http://www.prototypejs.org/api/utility/dollar-dollar)

除了标签名称之外，这为您提供了更多功能。您可以按类、父/子关系等进行选择。它支持的 CSS 选择器比普通浏览器预期的要多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-06T06:42:43.897

马蒂亚斯·凯斯滕霍尔兹：

getElementsByTagName 返回一个 NodeList 对象，它类似于数组但不是数组，它是一个活动列表。

```
var test = document.getElementsByTagName('a');
alert(test.length); // n
document.body.appendChild(document.createElement('a'));
alert(test.length); // n + 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T21:42:05.170

您还可以使用`$$(tag-name)[n]`从集合中获取特定元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-10T16:59:47.287

如果使用 getElementsByTagName，则需要将其包装在 $A() 中以返回一个数组。但是，您可以像 nertzy 建议的那样简单地做 $$('a') 。

# java - 比较 Hibernate 中日期时间字段的时间部分

> ID：101541
> 
> 赞同：5
> 
> 时间：2008-09-19T12:45:08.867
> 
> 标签：java, mysql, hibernate

我有一个为 ORM 使用休眠（注释）/mysql 组合的应用程序。在那个应用程序中，我得到了一个带有日期字段的实体。我正在寻找一种在时间范围内选择该日期的方法（因此`hh:mm:ss`没有日期部分）。

在 MySQL 中有一个函数`TIME(expression)`可以提取时间部分并在 where 子句中使用它，但是如果不切换到本机查询，在 Hibernate 中似乎不可用。hibernate 中是否有一个选项可以执行此操作，或者我应该遍历 java 中的结果并在那里进行比较？这会比 MySQL 解决方案慢得多，因为它不会使用索引吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-19T12:54:50.437

HQL 中提供了以下功能，也许您可​​以使用它们：

`second(...), minute(...), hour(...), day(...), month(...), year(...)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T12:59:28.880

将表达式添加为 SQL 限制，而不是使用完整的本机查询。我不具体了解 MySQL，但想象一下这样的事情：

```
Criteria criteria = session.createCriteria(MyTable.class);
criteria.add( 
  Expression.sql(
    "TIME( {alias}.my_date, 'hh:mm:ss') >= :1", 
    dateRangeMin, 
    new StringType()
  )
); 
```

# email - 将 ical 电子邮件附件导入 Google 日历的最快方法

> ID：101556
> 
> 赞同：2
> 
> 时间：2008-09-19T12:46:29.707
> 
> 标签：email, google-calendar-api, icalendar

我在 Windows 上运行 Thunderbird。我经常收到 .ics (iCal) 附件 - 会议邀请。目前我将附件保存到我的桌面，打开 Google 日历，选择“添加>导入日历”，浏览到 .ics 文件，然后返回日历。

是否有任何工具可以加快速度...例如，我将电子邮件转发到一个特殊的电子邮件地址，它会自动解析并将事件添加到我的谷歌日历中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-19T12:55:13.930

**[Lightning](http://bfish.xaedalus.net/?p=239)**为您提供了一种插件方式，让 Thunderbird 与 Google 日历同步，双向工作。我已经使用它没有任何问题，希望它会做你所追求的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-01T19:17:36.810

[Calify](http://www.califyapp.com)就是这样做的。
它可以在各种网络日历中打开 *.ics 文件，包括 Google 日历。

# python - 在python脚本中检测相似文档的算法

> ID：101569
> 
> 赞同：10
> 
> 时间：2008-09-19T12:47:32.310
> 
> 标签：python, algorithm, diff

我需要编写一个模块来检测类似的文档。我已经阅读了很多文档指纹技术和其他论文，但我不知道如何编写代码或实现这样的解决方案。该算法应适用于中文、日文、英文和德文或独立于语言。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-09-20T18:46:25.027

贝叶斯过滤器正是有这个目的。这是您在大多数识别垃圾邮件的工具中都能找到的技术。

例如，检测一种语言（来自[http://sebsauvage.net/python/snyppets/#bayesian](http://sebsauvage.net/python/snyppets/#bayesian)）：

```
from reverend.thomas import Bayes
guesser = Bayes()
guesser.train('french','La souris est rentrée dans son trou.')
guesser.train('english','my tailor is rich.')
guesser.train('french','Je ne sais pas si je viendrai demain.')
guesser.train('english','I do not plan to update my website soon.')

>>> print guesser.guess('Jumping out of cliffs it not a good idea.')
[('english', 0.99990000000000001), ('french', 9.9999999999988987e-005)]

>>> print guesser.guess('Demain il fera très probablement chaud.')
[('french', 0.99990000000000001), ('english', 9.9999999999988987e-005)] 
```

但它可以检测你将训练它的任何类型：技术文本、歌曲、笑话等。只要你能提供足够的材料让工具了解你记录的内容是什么样的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-19T13:01:56.970

如果这些是纯文本文档，或者您有从文档中提取文本的方法，则可以使用一种称为 shingling 的技术。

您首先为每个文档计算一个唯一的哈希值。如果这些是相同的，你就完成了。

如果没有，您将每个文档分解成更小的块。这些是你的“带状疱疹”。

一旦你有了带状疱疹，你就可以计算每个带状疱疹的身份散列，并比较带状疱疹的散列以确定文档是否实际上相同。

您可以使用的另一种技术是生成整个文档的 n-gram，并计算每个文档中相似 n-gram 的数量，并为每个文档生成加权分数。基本上，n-gram 是将一个单词分成更小的块。'apple' 会变成 'a'、'ap'、'app'、'ppl'、'ple'、'le'。（这在技术上是 3-gram）对于大量文档或两个非常大的文档，这种方法可能会变得非常昂贵。当然，常见的 n-gram 'the'、'th、'th' 等需要加权以降低它们的得分。

我已经在我的博客上发布了这个帖子，并且帖子中有一些链接指向关于“ [Singling”主题的其他几篇文章 - 这不仅仅是针对屋顶工的](http://facility9.com/2008/09/13/shingling-its-not-just-for-roofers/)。

祝你好运！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-01-15T21:37:08.843

无需分类即可轻松找到相似性。试试这个 O(n2) 但工作正常。

```
def jaccard_similarity(doc1, doc2):
    a = sets(doc1.split())
    b = sets(doc2.split())
    similarity = float(len(a.intersection(b))*1.0/len(a.union(b))) #similarity belongs to [0,1] 1 means its exact replica.
    return similarity 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-09-19T12:53:05.637

您可以使用或最后学习Python 标准库中的[difflib](http://docs.python.org/lib/module-difflib.html "difflib 文档")来编写代码。

它非常灵活，并且具有查找字符串列表之间差异并指出这些差异的算法。然后你可以使用`get_close_matches()`来查找相似词：

```
>>> get_close_matches('appel', ['ape', 'apple', 'peach', 'puppy'])
['apple', 'ape'] 
```

这不是解决方案，但也许是一个开始。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-19T12:56:56.670

你需要让你的问题更具体。如果您已经阅读过指纹识别论文，那么您已经知道工作原理，因此在这里描述常用方法将无益。如果你还没有，你还应该看看斯坦福、谷歌、雅虎和 MS 近年来发表的关于“重复检测”的论文和各种网络垃圾邮件检测相关的论文。

您在对所描述的算法进行编码时遇到具体问题吗？

入门有问题？

我可能要做的第一件事是将标记化（提取“单词”或其他合理序列的过程）与重复检测逻辑分开，以便为不同语言插入不同的解析器并保留重复检测片段相同。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-19T15:24:41.450

[Google Techtalks 上有一个关于神经网络](http://video.google.com/videoplay?docid=228784531481853811&ei=c73TSP-XF6bU2gKO2aSAAQ&q=techtalks+neuralnetworks&vt=lf)的很好的演讲，其中谈到了使用分层玻尔兹曼机为文档生成特征向量，然后可以用来测量文档距离。主要问题是需要有大量样本文档集来训练网络以发现相关特征。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-19T12:57:05.750

如果您准备索引要在其中搜索的文件，Xapian 是一个出色的引擎，并提供 Python 绑定：

[http://xapian.org/](http://xapian.org/)

[http://xapian.org/docs/bindings/python/](http://xapian.org/docs/bindings/python/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-20T16:32:32.120

我认为 Jeremy 已经一针见血了——如果你只是想检测文件是否不同，像 MD5 或 SHA1 这样的哈希算法是一个不错的选择。

Linus Torvalds 的 Git 源代码控制软件正是以这种方式使用 SHA1 散列 - 检查文件何时被修改。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-19T14:23:56.103

如果您正在尝试检测正在谈论同一主题的文档，您可以尝试收集最常用的单词，丢弃[停用词](http://en.wikipedia.org/wiki/Stop_words)。具有相似分布的最常用词的文档可能在谈论相似的事情。如果您想要更高的准确度，您可能需要做一些[词干提取](http://en.wikipedia.org/wiki/Stemming)并将概念扩展到[n-gram 。](http://en.wikipedia.org/wiki/N-gram)有关更高级的技术，请查看机器学习。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-02-03T06:01:58.947

您可能想研究[本文](http://portal.acm.org/citation.cfm?id=1135992)中概述的 DustBuster 算法。

从论文中，他们甚至无需检查页面内容就能够检测到重复的页面。当然检查内容会提高效率，但使用原始服务器日志足以检测重复页面的方法。

与使用 MD5 或 SHA1 哈希的建议类似，DustBuster 方法很大程度上依赖于比较文件大小作为主要信号。听起来很简单，但对于最初的第一次通过来说是相当有效的。

# html - 如何从 HTML 打开外部文件

> ID：101574
> 
> 赞同：20
> 
> 时间：2008-09-19T12:47:52.263
> 
> 标签：vbscript, html

我想要一个基本 html 页面上的超链接列表，它指向我们公司内部网上的文件。

当用户单击链接时，我希望打开文件。它们是 excel 电子表格，这是一个 Intranet 环境，所以我可以指望每个安装了 Excel 的人。

我尝试了两件事：

1.  显而易见且简单的事情：

```
<a href="file://server/directory/file.xlsx">Click me!</a> 
```

2.  我在 Google 搜索中找到的一个[vbscript](/questions/tagged/vbscript "显示标记为“vbscript”的问题")选项：

```
<HTML>
<HEAD>
    <SCRIPT LANGUAGE=VBScript>
    Dim objExcel

    Sub Btn1_onclick()
    call OpenWorkbook("\\server\directory\file.xlsx")
    End Sub

    Sub OpenWorkbook(strLocation)

    Set objExcel = CreateObject("Excel.Application")
    objExcel.Visible = true
    objExcel.Workbooks.Open strLocation
    objExcel.UserControl = true
    End Sub

    </SCRIPT>
    <TITLE>Launch Excel</Title>
</HEAD>
<BODY>
    <INPUT TYPE=BUTTON NAME=Btn1 VALUE="Open Excel File">
</BODY>
</HTML> 
```

我知道这是一个非常基本的问题，但如果我能得到任何帮助，我将不胜感激。

***编辑：有任何适用于 IE 和 Firefox 的建议吗？***

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-09-19T13:03:03.363

尝试像这样格式化链接（看起来很糟糕，但它适用于我的 Vista 下的 Firefox 3）：

```
<a href="file://///SERVER/directory/file.ext">file.ext</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-19T12:49:31.883

`<a href="file://server/directory/file.xlsx" target="_blank">`如果我没记错的话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-19T12:53:30.783

如果文件共享未对所有人开放，您将需要通过 Web 服务器从文件系统在后台提供它。

您可以使用类似[“ASP.Net Serve File For Download”示例](https://web.archive.org/web/20081224053449/http://snippets.dzone.com/posts/show/3510)（[2](http://snippets.dzone.com/posts/show/3510)的存档副本）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T12:53:45.180

您可能需要一个额外的“/”

```
<a href="file:///server/directory/file.xlsx">Click me!</a> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-19T12:53:48.253

如果您的 Web 服务器是 IIS，则需要确保将新的 Office 2007（我看到 xlsx 后缀）mime 类型添加到 IIS 中的 mime 类型列表中，否则它将拒绝为未知文件类型提供服务。

这是一个告诉您如何操作的链接：

[为 Office 2007 配置 IIS 6](http://www.jameskovacs.com/blog/ConfiguringIIS6ToServeOffice2007FileFormats.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T12:50:45.687

一个简单的文件链接是显而易见的解决方案。你只需要确保链接有效并且它确实指向一个文件......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-19T13:13:06.413

您将不得不依赖每个人的机器具有正确的文件关联。如果您尝试在网页中从 JavaScript/VBScript 打开应用程序，则生成的应用程序要么自身被沙箱化（意味着权限减少），要么会出现大量安全提示。

我的建议是查看 SharePoint 服务器。这是我们知道他们所做的事情，您可以就地编辑，但问题是他们如何设法实现这一目标。我的猜测是直接与 Office 集成。无论哪种方式，这都不是 Internet 旨在做的事情，因为我假设您希望他们编辑原始文档而不是简单地创建自己的副本（这是默认行为`file://`。

因此，根据您的选择，可能会创建一个客户端应用程序，该应用程序安装在您的所有客户端计算机上，然后响应特定的文件处理程序，即在文件服务器上打开此应用程序。那么谁在做这件事并不重要，因为所有浏览器都会简单地将请求交给你。您必须创建自己的处理程序，例如`fileserver://`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-04T23:53:05.000

这适用于 macOS 12 的 Firefox 96，也应该适用于其他浏览器和 Windows：

```
<a href="smb://server/location">open file</a> 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2008-09-19T12:50:37.513

您的第一个想法曾经是这种方式，但我也注意到使用 Firefox 执行此操作的问题，尝试直接 http:// 到文件 - href=' [http://server/directory/file.xlsx](http://server/directory/file.xlsx) '

# flash - Actionscript 2：MovieClipLoader.onLoadProgress 未在生产中触发

> ID：101578
> 
> 赞同：1
> 
> 时间：2008-09-19T12:48:28.797
> 
> 标签：flash, actionscript-2, moviecliploader

我在 Flash CS3 中工作，目标是 Actionscript 2，我正在编写一个图像预加载器。当我打开下载模拟测试电影时，一切正常，我的预加载器成功更新了我制作的下载进度条。但是，当我将电影上传到我的网络服务器时，它几乎表现得好像 MovieClipLoader.onLoadProgress 事件直到上传结束才触发，因为电影在没有通知的情况下在那里下载了几秒钟，然后有一个突然爆发的活动，我的预加载器非常迅速地从 0 变为 100%。以前有没有人遇到过这种行为，如果是这样，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T12:58:13.843

我建议使用像 Charles ( [http://www.charlesproxy.com/](http://www.charlesproxy.com/) ) 这样的调试代理来查看文件是如何从您的服务器下载的（例如，在下载开始之前是否存在高延迟，需要多少秒实际采取传输数据）。这样您就可以更好地查看预加载器是否准确地反映了从服务器传输的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T13:31:44.340

您是否在不同的浏览器中尝试过？我相信 Flash 至少在某些情况下会使用浏览器下载文件。Firefox 可能正在下载文件而不通知 Flash，然后将其全部发送到 Flash。我还没有看到 FF 自己这样做，但扩展程序可能会拦截下载。

我相信我唯一一次看到像以前那样突然发生的进展是当我得到一个缓存副本而不是重新下载它时。但是，由于您看到的是实际下载，我猜这不是您得到的。

在 IE 中尝试一下，看看是否有相同的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T13:19:28.863

感谢您的快速回复马特。我以前从未听说过 Charles，但它似乎是一个非常强大的工具。出于我的目的，我还可以在 Firefox 中使用 Firebug 的 Net 工具查看文件获取请求和进度。Charles 和 Firebug 都显示正在请求并成功下载图像，并且在 flash 电影出现响应并更新加载栏/fire onLoadProgress 之前的几秒钟内，所有图像都已完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-24T18:31:23.673

经过大量测试，我最终完全重组/重写了预加载器的工作方式，这解决了我的问题。我认为最终图像的加载和事件触发之间的一些滞后实际上是（由于我仍然不完全理解的原因）更新我的预加载器剪辑的代码没有在事件发生时运行被解雇，而是等到系列中的最后一张图像开始加载才能开始工作。我将更新加载进度的代码从预加载器影片剪辑（它正在查看一些 _root 级别的进度变量并在输入帧上更新自身）移动到 onLoadProgress 事件本身。评论的每个人都非常感谢您的快速回复，一旦我达到 15 岁，我会投票赞成您的两个答案，因为它们很有帮助，

# java - 什么时候使用 JSP，什么时候使用 Servlet？

> ID：101579
> 
> 赞同：40
> 
> 时间：2008-09-19T12:48:30.857
> 
> 标签：java, jsp, servlets

我有一个应用程序将客户发送到另一个站点来处理付款。客户之外的另一个站点调用我们服务器上的一个页面，让我们知道付款的状态。被调用的页面检查支付应用程序提供的参数，并检查我们是否知道该交易。然后它更新数据库以反映状态。这一切都是在没有与客户进行任何互动的情况下完成的。

我个人选择将这个功能作为 JSP 来实现，因为将文件拖放到文件系统中比编译和打包文件然后在配置文件中添加条目更容易。

考虑到页面的功能，我认为 servlet 将是首选选项。问题是：

*   我的假设正确吗？*   是否有真正的理由在 JSP 上使用 servlet？*   这些原因是什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-09-19T13:26:56.317

JSP 在第一次运行时被编译为 servlet。这意味着它们之间没有真正的运行时差异。

然而，大多数人都有将 servlet 用于控制器和将 JSP 用于视图的传统。由于控制器只是 java 类，您可以从所有 IDE 获得完整的工具支持（代码完成等）。与 JSP 相比，这提供了更好的质量和更快的开发时间。一些更高级的 IDE（突然想到 IntelliJ IDEA）具有出色的 JSP 支持，从而使该论点过时。

如果您正在制作自己的框架或只是使用简单的 JSP 来制作，那么您应该可以继续使用 JSP。没有性能差异，如果您觉得 JSP 更容易编写，那么请继续。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2008-09-19T12:58:42.487

JSP：向用户展示数据。这里不应该有任何业务逻辑，当然也不能访问数据库。

Servlet：处理来自表单或特定 URL 的输入。通常人们会在 Servlet 之上使用像 Struts/Spring 这样的库来清理编程。无论如何，servlet 应该只验证传入的数据，然后将其传递给后端业务层实现（您可以针对它编写测试用例）。然后它应该将结果值放在请求或会话上，并调用 JSP 来显示它们。

模型：保存网站处理的结构化数据的数据模型。servlet 可以获取参数，将它们放入模型中，然后调用业务层。然后，该模型可以与后端 DAO（或 Hibernate）交互以访问数据库。

任何重要的项目都应该实现 MVC 结构。当然，对于琐碎的功能来说，它是矫枉过正的。在您的情况下，我将实现一个调用 DAO 的 servlet 来更新状态等，或者任何需要的东西。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-09-19T12:51:07.277

JSP 应该用在表示层、业务逻辑的 servlet 和后端（通常是数据库层）代码中。

我不知道为什么你不能使用你所描述的 JSP（无论如何它都会被容器编译成一个 servlet），但你是对的，首选的方法是首先使它成为一个 servlet .

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2010-08-03T13:43:33.840

有两个非常简单的规则：

1.  每当您想编写 Java 代码（业务逻辑）时，请在 Java 类（即 Servlet）中进行。
2.  每当您想编写 HTML/CSS/JS 代码（视图/模板逻辑）时，请在 JSP 中进行。

### 相关问题：

*   [JSP中如何避免Java代码](https://stackoverflow.com/questions/3177733/howto-avoid-java-code-in-jsp-files)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-19T13:10:44.127

JSP 是编写 servlet 的捷径。事实上，它们在编译之前被翻译成 servlet java 代码。（你可以在一些我不记得名字的tomcat子目录下检查它）。

要在 servlet 和 JSP 之间进行选择，我使用一个简单的规则：如果页面包含的 html 代码多于 java 代码，则选择 JSP，否则只需编写一个 servlet。一般来说，这大致翻译为：使用 JSP 进行内容表示，使用 servlet 进行控制、验证等。

此外，它更容易在 servlet 中组织和构造代码，因为它使用普通的 java 类语法。JSP 往往更加单一，尽管它可以在内部创建方法。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-19T12:52:49.550

JSP 本质上是由 servlet 容器自动编译为 servlet 的标记，因此编译步骤将在两个实例中发生。这就是为什么支持 JSP 的 servlet 容器必须有完整的 JDK 而不是只需要 JRE。

因此，JSP 的主要原因是减少渲染页面所需的代码量。如果您不必呈现页面，则 servlet 会更好。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2010-03-19T06:03:59.603

我知道这不是今天流行的答案，但是：当我从头开始设计应用程序时，我总是使用 JSP。当逻辑很重要时，我创建普通的 Java 类来完成我从 JSP 调用的繁重工作。我从来不理解应该使用 servlet 的论点，因为作为纯 Java 类，它们更易于维护。JSP 可以轻松调用纯Java 类，当然普通Java 类与任何servlet 一样可维护。在 JSP 中格式化页面更容易，因为您可以将所有标记内联，而不必编写一堆 println。但是 JSP 的最大优点是您可以将它们放在一个目录中，并且可以直接访问它们：您不需要在 URL 和类文件之间设置关系。

我可以看到使用 servlet 的唯一原因是如果您需要在 URL 和生成的执行类之间进行复杂的映射。就像，如果您想检查 URL，然后根据会话状态或类似情况调用许多类之一。就我个人而言，我从来没有想过这样做，而且我见过的应用程序往往很难维护，因为在你开始进行更改之前，你必须弄清楚真正正在执行的代码。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-19T12:54:10.780

如今，大多数 Java 应用程序都是基于 MVC 模式构建的......在控制器端（servlet）中，您实现业务逻辑。servlet 控制器通常将请求转发到将生成实际 html 响应（MVC 中的视图）的 jsp。目标是分离关注点……关于这个主题已经写了数千本书。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-19T13:36:59.010

在 MVC 架构中，servlet 用作控制器，而 JSP 用作视图。但两者在技术上是相同的。JSP 将在编译时（如在 JDeveloper 中）或在第一次访问时（如在 Tomcat 中）被翻译成 servlet。所以真正的区别在于易用性。我很确定您将很难使用 servlet 呈现 HTML 页面。但与常识相反，您实际上会发现在 JSP 中编写甚至相当复杂的逻辑非常容易（可能借助一些准备好的帮助类）。PHP 的人一直都在这样做。因此他们陷入了创建意大利面条代码的陷阱。所以我对您的问题的解决方案：如果您发现在 JSP 中编写代码更容易并且不会涉及太多代码，请随意在 JSP 中编写代码。否则，使用 servlet。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-19T15:52:55.343

同意以上关于 JSP 和 Servlet 之间差异的所有观点，但这里有一些额外的考虑。你写：

> 我有一个应用程序将客户发送到另一个站点来处理付款。客户之外的另一个站点调用我们服务器上的一个页面，让我们知道付款的状态。被调用的页面检查支付应用程序提供的参数，并检查我们是否知道该交易。然后它更新数据库以反映状态。这一切都是在没有与客户进行任何互动的情况下完成的。

您的应用程序正在使用另一个应用程序的支付服务。您的解决方案很脆弱，因为如果其他应用程序中的支付服务发生更改，则会破坏您的 JSP 页面。或者，如果您想更改应用程序的付款政策，那么您的页面将不得不更改。简短的回答是您的应用程序应该通过 Web 服务使用应用程序的支付服务。servlet 和 JSP 页面都不适合放置您的消费逻辑。

其次，按照这些思路，过去几年中 servlet/JSP 页面的大多数使用都放在了 Spring 或 Struts 等框架的上下文中。我会推荐 Spring，因为它为您提供了从服务器页面到 Web 服务网关逻辑再到 DAO 所需的完整堆栈。如果您想了解 Spring 的具体细节，我会推荐*Spring in Action*。如果您需要更好地了解如何对用 Java（或 C#）等语言编写的企业架构进行分层，我会推荐 Fowler 的*企业应用程序架构模式*。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-19T12:51:49.897

是的，这应该是一个servlet。JSP 可能更容易开发，但 servlet 更容易维护。试想一下，必须在 6 个月内修复一些随机错误并尝试记住它是如何工作的。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2010-12-13T11:10:51.730

在 java servlet 中，HTML 标记嵌入在 java 编码中。在 JSP 中，Java 编码嵌入在 HTML 标记中。

对于大问题的大型应用程序，由于在java编码中嵌入更多html标签的不可读性，servlet的阅读、理解、调试等很复杂。所以我们使用jsp。在jsp中很容易理解、调试等。

谢谢和问候， Sivakumar.j

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-06-24T09:16:49.217

我认为这取决于你？因为 JSP 是 HTML 中的 Java，而 Servlet 是可以在 HTML 中执行的 Java

嗯... servlet 比 jsp 更安全，因为如果您提交到 Servlet 并转发到另一个 JSP，则不会出现文件扩展名，而且您也看不到它是什么 Page。

但是 JSP 的优点是您可以轻松地在那里编写代码。

# javascript - 如何在具有特定 ID 的表中选择类“sortasc”的所有元素？

> ID：101597
> 
> 赞同：3
> 
> 时间：2008-09-19T12:52:02.737
> 
> 标签：javascript, prototypejs

假设我有以下 HTML：

```
<table id="foo">
  <th class="sortasc">Header</th>
</table>

<table id="bar">
  <th class="sortasc">Header</th>
</table> 
```

我知道我可以执行以下操作来获取所有具有 class=" **sortasc** " 的元素

```
$$('th.sortasc').each() 
```

然而，这给了我来自 table *foo*和 table *bar的***第 th 个**元素。

 **我怎样才能告诉它只给我表*foo*中的第 th 个元素？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-19T12:54:27.037

表#foo th.sortasc

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-19T13:22:11.807

这就是你使用直接 JS 的方式：

```
var table = document.getElementById('tableId');
var headers = table.getElementsByTagName('th');
var headersIWant = [];
for (var i = 0; i < headers.length; i++) {
  if ((' ' + headers[i].className + ' ').indexOf(' sortasc ') >= 0) {
    headersIWant.push(headers[i]);
  }
}
return headersIWant; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T12:55:07.800

CSS 选择器类似于“#foo th.sortasc”。在 jQuery 中，这将是 $('#foo th.sortasc')。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T15:13:16.080

使用嵌套表，例如：

```
<table id="foo">
  <th class="sortasc">Header</th>
  <tr><td>
    <table id="nestedFoo">
      <th class="sortasc">Nested Header</th>
    </table>
  </td></tr>
</table> 
```

$('table#foo th.sortasc') 会给你*所有*的 th，因为你使用的是[后代选择器](http://www.w3.org/TR/CSS2/selector.html#descendant-selectors)。如果你只想要 foo 的 th，那么你应该使用[子选择器](http://www.w3.org/TR/CSS2/selector.html#child-selectors)- $('table#foo > th.sortasc')。

请注意， IE6 的 CSS[不支持](http://kimblim.dk/csstest/#ex1)子选择器，尽管 JQuery 仍然可以从 JavaScript 中正确执行此操作。**

# c++ - 将 C++ 代码转换为安全的 HTML

> ID：101604
> 
> 赞同：1
> 
> 时间：2008-09-19T12:53:01.097
> 
> 标签：c++, wiki

我决定尝试将[http://www.screwturn.eu/wiki](http://www.screwturn.eu/)作为代码片段存储实用程序。到目前为止，我印象非常深刻，但令我恼火的是，当我复制粘贴我想要保存的代码时，'<'s 和 '[' ( [http://en.wikipedia.org/wiki/Character_encodings_in_HTML#Character_references](http://en.wikipedia.org/wiki/Character_encodings_in_HTML#Character_references) )当 wiki 将它们解释为 wiki 或 HTML 标记时，总是会搞砸输出。

有谁知道解决这个问题的方法？或者失败了，知道一个简单的实用程序可以将 C++ 代码转换为 HTML 安全代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-19T12:59:25.323

您可以使用**@@...@@**标记来转义代码并自动将其包装在**PRE**标记中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T12:59:54.917

在 <nowiki> .. </nowiki> 标签中包围你的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T13:01:16.800

我不知道实用程序，但我相信您可以编写一个非常简单的应用程序来执行查找/替换。要显示尖括号，您只需将它们分别替换为`&gt;`和`&lt;`。至于方括号，这是markdown methinks的wiki特定问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T13:01:30.980

您是否尝试在粘贴之前将代码包装在 html pre 或 code 标签中？两者都允许使用任何特殊字符（例如“<”）而不被解释为 html。pre 也尊重内容的格式。

例子

```
<pre>
    if (foo <= bar) {
        do_something();
    }
</pre> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T13:01:38.843

Dario Solera 写道：“您可以使用@@...@@ 标签来转义代码并自动将其包装在 PRE 标签中。”

如果您不想将其包装，请使用：`<esc></esc>`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T13:19:26.850

需要转义的字符列表：

*   <（小于号）
*   &（和号）
*   [（左方括号）

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-09-20T07:58:16.647

要在网页上发布 C++ 代码，您应该首先将其转换为有效的 HTML，这通常需要使用[HTML 字符实体](http://en.wikipedia.org/wiki/Html_entities#HTML_character_entity_references)，正如其他人所指出的那样。这不限于用`<`and`>`替换`&lt;`and `&gt;`。考虑以下代码：

```
unsigned int maskedValue = value&mask; 
```

哦，HTML DTD 是否包含一个名为 的实体`&mask;`？最好也替换`&`为`&amp;`。

换个方向，你可以去掉`[`和`]`用[三元组](http://www.glenmccl.com/charset.htm) `??(`和替换它们`??)`。在 C++ 中，三合字母和二合字母是字符序列，可用于表示并非在所有字符集中都可用的特定字符。但是，大多数 C++ 程序员不太可能识别它们。

# windows - 如何安排任务在关闭 Windows 时运行

> ID：101647
> 
> 赞同：92
> 
> 时间：2008-09-19T13:00:41.497
> 
> 标签：windows, windows-xp

如何在 Windows XP 中安排任务在关闭 Windows 时运行。这样我就想在每次关闭 Windows 时运行一个我用 c# 编写的简单命令行程序。当我的计算机关闭时，计划任务中似乎没有执行此任务的选项。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2008-09-19T13:05:54.963

执行 gpedit.msc（本地策略）

计算机配置 -> Windows 设置 -> 脚本 -> 关机 -> 属性 -> 添加

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-09-11T17:25:52.597

除了 Dan Williams 的回答，如果你想添加一个**启动/关机脚本，你需要在****Computer Configuration**下寻找 Windows Settings 。如果要添加**登录/注销**脚本，则需要在**用户配置**下查找 Windows 设置。

因此，重申丹在包含这些信息的情况下所说的话，

**对于启动/关闭：**

1.  运行 gpedit.msc（本地策略）
2.  **计算机**配置 -> Windows 设置 -> 脚本 ->**启动**或**关机**-> 属性 -> 添加

**对于登录/注销：**

1.  运行 gpedit.msc（本地策略）
2.  **用户**配置 -> Windows 设置 -> 脚本 ->**登录**或**注销**-> 属性 -> 添加

* * *

来源：[http ://technet.microsoft.com/en-us/library/cc739591(WS.10).aspx](http://technet.microsoft.com/en-us/library/cc739591(WS.10).aspx)

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2014-12-06T01:59:33.917

对于那些喜欢使用任务计划程序的人，可以通过将任务设置为在事件查看器的系统日志中的事件 1074 已记录后运行来安排任务在启动/关闭启动后运行。但是，它只适用于非常短的任务，只要系统重新启动/关闭，它就会运行，这通常只有几秒钟。

*   从任务计划程序：

    > 开始任务：关于事件
    > 日志：系统
    > 源：USER32
    > EventID：1074

*   从命令提示符：

    > > schtasks /create /tn "taskname" /tr "task file" /sc onevent /ec system /mo *[system/eventid=1074]

注释：/ec 选项在 Windows Vista 及更高版本中可用。（谢谢@t2d）

请注意，任务状态可以是：

> > > 由于用户尚未登录到网络，因此未执行所请求的操作。指定的服务不存在。(0x800704DD)

但是，这并不意味着它没有运行。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-19T13:06:23.403

一种解决方法可能是编写一个简单的批处理文件来运行程序，然后关闭计算机。

您可以从命令行关闭——因此您的脚本可能相当简单：

```
c:\directory\myProgram.exe
C:\WINDOWS\system32\shutdown.exe -s -f -t 0 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-09-19T13:07:47.830

如果您运行 GPEdit.MSC，您可以转到计算机配置 -> Windows 设置 -> 脚本，然后添加启动/关闭脚本。这些可以是简单的批处理文件，甚至是完整的 EXE。您还可以在同一工具中调整登录和注销脚本的用户配置。此工具在 Windows XP Home 中不可用。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-09-19T13:09:41.210

上面的帖子中没有提到组策略编辑器。我已经多次使用 GPedit 在启动或关闭时执行任务。以下是 Microsoft 关于如何访问和操作 GPedit 的说明。

[如何使用组策略编辑器管理 Windows XP 中的本地计算机策略](http://support.microsoft.com/kb/307882)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-08-19T11:00:58.797

我可以建议做的是创建 .bat 文件的快捷方式（例如在您的桌面上），当您想要关闭计算机（并运行 .bat 文件）时，单击您创建的快捷方式。完成此操作后，编辑 .bat 文件并将这行代码添加到末尾或需要的地方：

```
c:\windows\system32\shutdown -s -f -t 00 
```

这是做什么的

1.  运行关机进程
2.  显示警报
3.  强制所有正在运行的进程停止
4.  立即执行

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-01-31T21:23:59.583

我在[superuser](https://superuser.com/a/1622363/947770)上也发布了这个答案。

* * *

为此，您需要在任务计划程序中设置自定义事件过滤器。

**触发器 > 新建 > 自定义 > 编辑事件 > XML**

并粘贴以下内容：

```
<QueryList>
  <Query Id="0" Path="System">
    <Select Path="System">
    *[System[Provider[@Name='User32'] and (Level=4 or Level=0) and (EventID=1074)]]
   and 
     *[EventData[Data[@Name='param5'] and (Data='power off')]]
    </Select>
  </Query>
</QueryList> 
```

这将仅过滤掉*电源关闭*事件。

如果您查看事件查看器，您可以在**Windows 日志 > 系统** 下的**详细信息选项卡 > XML 视图**下看到有这个。

```
- <Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
- <System>
  <Provider Name="User32" Guid="{xxxxx-xxxxxxxxxxx-xxxxxxxxxxxxxx-x-x}" EventSourceName="User32" /> 
  <EventID Qualifiers="32768">1074</EventID> 
  <Version>0</Version> 
  <Level>4</Level> 
  <Task>0</Task> 
  <Opcode>0</Opcode> 
  <Keywords>0x8080000000000000</Keywords> 
  <TimeCreated SystemTime="2021-01-19T18:23:32.6133523Z" /> 
  <EventRecordID>26696</EventRecordID> 
  <Correlation /> 
  <Execution ProcessID="1056" ThreadID="11288" /> 
  <Channel>System</Channel> 
  <Computer>DESKTOP-REDACTED</Computer> 
  <Security UserID="x-x-x-xx-xxxxxxxxxx-xxxxxxxxxx-xxxxxxxxxx-xxxx" /> 
  </System>
- <EventData>
  <Data Name="param1">Explorer.EXE</Data> 
  <Data Name="param2">DESKTOP-REDACTED</Data> 
  <Data Name="param3">Other (Unplanned)</Data> 
  <Data Name="param4">0x0</Data> 
  <Data Name="param5">power off</Data> 
  <Data Name="param6" /> 
  <Data Name="param7">DESKTOP-REDACTED\username</Data> 
  </EventData>
  </Event> 
```

您可以通过单击在事件查看器中使用上面的查询列表代码测试查询

**创建自定义视图... > XML > 手动编辑查询**

并粘贴代码，在您在任务计划程序中尝试之前将其命名为**仅关闭事件。**

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-19T13:04:13.627

您可以运行一个批处理文件来调用您的程序，查看这里的讨论以了解如何操作： [http ://www.pcworld.com/article/115628/windows_tips_make_windows_start_and_stop_the_way_you_want.html](http://www.pcworld.com/article/115628/windows_tips_make_windows_start_and_stop_the_way_you_want.html)

（来自谷歌搜索：windows schedule task run at shutdown）

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-11-05T03:54:00.283

在Windows 10 Pro上，可以注册批处理文件；不需要注册 cmd.exe 并将 bat 文件指定为参数的解决方法。我只是这样做了，注册了一个关闭脚本和一个启动（引导）脚本，并且它起作用了。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-08-13T06:25:33.577

我还必须启用“指定组策略脚本的最大等待时间”和“在运行时在关闭脚本中显示指令”，以使其对我有用，正如我[在此处](https://stackoverflow.com/a/57472148/6329629)解释的那样。

# php - 用于设置表单字段名称的 HTTP 标头（multipart/form-data）

> ID：101662
> 
> 赞同：1
> 
> 时间：2008-09-19T13:03:26.483
> 
> 标签：php, http, multipartform-data

我将原始 HTTP 请求传递给 apache 服务器（由 PHP 接收）。请求的类型为 multipart/form-data，即与提交 HTML 表单时使用的 MIME 类型相同。但是，我不确定使用什么 HTTP 标头来设置表单字段名称（我只是假设它是一个定义这个的标头，不知道它可能是什么），然后可以在 PHP 中使用它来访问$_GET 或 $_FILES 中的字段。

HTTP 请求可能如下所示：

```
Content-type: multipart/form-data;boundary=main_boundary

--main_boundary
Content-type: text/xml
<?xml version='1.0'?>
<content>
Some content goes here
</content>

--main_boundary
Content-type: multipart/mixed;boundary=sub_boundary

  --sub_boundary
  Content-type: application/octet-stream

  File A contents

  --sub_boundary
  Content-type: application/octet-stream

  File B contents

  --sub_boundary

--main_boundary-- 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-19T13:06:59.783

Content-Disposition 标头有一个带有控件名称的名称参数。每个 --sub_boundary 后面应该有一个

```
--sub_boundary
Content-Disposition: form-data; name="mycontrol" 
```

我差点忘了：如果字段是文件控件，还有一个文件名字段和一个 Content-Type 标头

```
--sub_boundary
Content-Disposition: form-data; name="mycontrol"; filename="file1.xml"
Content-Type: application/xml; 
```

如果文件不是文本，您还需要

```
Content-Transfer-Encoding: binary 
```

# c# - 如果 IDisposable 未正确处理，是否可以将 Resharper 设置为警告？

> ID：101664
> 
> 赞同：36
> 
> 时间：2008-09-19T13:04:09.150
> 
> 标签：c#, .net, resharper, static-analysis

`using`如果我忘记将代码包装在一个块中，或者在一个块中省略正确的 Dispose 调用，Resharper 4（甚至是 Visual Studio 本身......）中是否有一个设置会强制发出警告`finally`？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-09-19T13:27:00.500

正确的自动 Dispose 分析需要以全局方式进行 DFA（数据流分析）。您不太可能创建 IDisposable 对象并且不对它调用任何方法并且不将其作为参数传递。如果一次性对象被传递给其他方法（包括调用其成员，当“this”被隐式传递时），该工具应分析是否未在其中调用 Dispose，或者该对象未存储在某处以供以后处理。

也就是说，检查一次性对象是否实际上以“使用”构造或以任何其他方式处置的天真实现会产生过多的误报，并使分析无用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2011-05-22T12:40:50.563

对当前方法不满，我创建了自己的方法：[EyeDisposable](https://github.com/kizzx2/EyeDisposable)。它是一个 IL 仪器，因此它应该捕获许多静态分析未捕获的泄漏。还处于早期阶段，欢迎提出意见。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-19T15:03:10.393

有关测试in的一些技巧，请参阅[此博客文章](http://www.interact-sw.co.uk/iangblog/2004/03/23/locking)。基本上，编写一个仅调试的析构函数，断言您已被处置。`Dispose()``DEBUG`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-19T14:44:24.667

您可以为 R# 设计一个小型插件，您可以在代码编辑器中运行它来扫描代码并更新代码分析，以反映您是一个缺少刚才描述的结构的对象。

如果你决定走那条路，我会研究 R# 插件架构。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-09-22T10:37:52.353

您可能想为此查看 FXCop：http: [//msdn.microsoft.com/en-us/library/ms182328 (VS.80).aspx](http://msdn.microsoft.com/en-us/library/ms182328(VS.80).aspx)

遗憾的是 R# 没有处理它，即使只是对类中的字段和/或您创建的变量的警告。

# excel - 可在 VBA 之外使用的 Excel RefEdit 控件的替代方案

> ID：101673
> 
> 赞同：4
> 
> 时间：2008-09-19T13:05:42.470
> 
> 标签：excel, delphi

作为 VBA 的一部分提供的 RefEdit 控件有一点问题，但是当您希望人们指定一个或多个单元格范围（即`Excel.Range`对象）时，它非常适合放置在表单上。

主要问题是您只能在 VBA 用户窗体上使用 RefEdit 控件（[Microsoft 声明了这一点](http://support.microsoft.com/kb/q281542/)，我的测试也证实了这一点）。**我正在使用Delphi**制作 Excel 插件，并且正在寻找**RefEdit control 的替代品**。

`Excel.Application.InputBox Type:=8`是选择单元格范围的另一种方法，但是当您需要人们在单个表单上选择*多个单元格范围时，它不是非常用户友好。*我目前最好的真正替代方法是从我的 Delphi 插件中调用 VBA 表单，但这远非理想。

因此，理想情况下，我可以直接*替换 RefEdit* - 我可以在 Delphi 表单上使用它。如果有，那就不容易找到（我一直在努力寻找，但我一直无法找到 Delphi、VB6 或 .NET 的直接 RefEdit 替代品）。

如果临时替换失败，我可能会尝试拼凑我自己的替代方案，但我怀疑即使不是不可能，也很难做出与 RefEdit 一样好用的替代方案。RefEdit 允许您“选择”单元格而不实际选择它们：它使用行军蚂蚁围绕您选择的单元格，而不是突出显示它们并更改`Excel.Application.Selection`. 我不知道如何通过 VBA、Delphi 或其他方式操作 Excel 对象模型来做到这一点。

任何提示、技巧、技巧，或者，如果我真的很幸运，将非常欢迎指向插入式 RefEdit 替代品的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T18:39:37.517

在寻找 RefEdit 错误的解决方法时，我遇到了[这个 RefEdit 控件替换。](http://www.oraxcel.com/cgi-bin/yabb2/YaBB.pl?num=1208162527)第三方控件当时不是我的选择，但它可能会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-20T07:16:24.407

不确定您的问题：您是否尝试将 RefEdit 导入 Delphi？

您可以从 RefEdit.dll 将其作为 ActiveX 控件导入，然后将 TRefEdit 控件放入任何 Delphi 窗体中。并且您拥有与 VBA 应用程序中相同的 RefEdit。

或者它是你尝试过的，但它不起作用，因为 RefEdit 需要一些 VBA woodoo ...？

# apache-flex - 使用来自 Flex 客户端的 ActiveMQ 消息时出现问题

> ID：101689
> 
> 赞同：1
> 
> 时间：2008-09-19T13:07:39.547
> 
> 标签：apache-flex, activemq

我无法使用 Flex 客户端通过 ActiveMQ 发送的消息。通过 Producer 发送消息似乎可行，我还可以看到 Flex 客户端已通过 Consumer 对象上的属性连接和订阅，但是 Consumer 上的“消息”事件从未被触发，因此似乎没有收到消息.

当我查看 ActiveMQ 控制台时，我可以看到订阅者的数量、发送的消息数量和接收的消息数量。奇怪的是，收到的消息计数器似乎在增加，而且我还可以在 Tomcat 控制台中跟踪日志语句，但在 Flex 客户端中再次没有收到任何消息。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T15:10:32.527

使用全新安装的 Tomcat 从头开始​​重建我的应用程序后，一切似乎都正常。这可能是因为我使用的是 BlazeDS Turnkey 版本，其中包含预配置的 Tomcat 实例。

顺便说一句：这是一个很棒的教程： http: [//mmartinsoftware.blogspot.com/2008/05/simplified-blazeds-and-jms.html](http://mmartinsoftware.blogspot.com/2008/05/simplified-blazeds-and-jms.html)

# asp.net - 自定义错误模式=“关闭”

> ID：101693
> 
> 赞同：274
> 
> 时间：2008-09-19T13:08:10.420
> 
> 标签：asp.net

每次我将我的 web 应用程序上传到提供商时都会收到错误消息。由于 customErrors 模式，我看到的只是默认的“运行时错误”消息，指示我关闭 customErrors 以查看有关错误的更多信息。

恼怒的是，我将我的 web.config 设置为如下所示：

```
<?xml version="1.0"?>
<configuration>
    <system.web>
        <customErrors mode="Off"/>
    </system.web>
</configuration> 
```

尽管如此，我得到的只是愚蠢的远程错误页面，上面没有任何有用的信息。我还能做些什么来关闭 customErrors ？！

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2008-12-09T12:55:07.953

在过去的几天里，这一直让我发疯，无法绕过它，但终于弄清楚了：

在我的 machine.config 文件中，我在下面有一个条目`<system.web>`：

```
<deployment retail="true" /> 
```

这似乎覆盖了您在 web.config 文件中指定的任何其他 customError 设置，因此将上述条目设置为：

```
<deployment retail="false" /> 
```

现在意味着我可以再次看到我需要的详细错误消息。

`machine.config`位于_

**32 位**

```
%windir%\Microsoft.NET\Framework\[version]\config\machine.config 
```

**64 位**

```
%windir%\Microsoft.NET\Framework64\[version]\config\machine.config 
```

希望这可以帮助那里的人并节省几个小时的拉头发。

* * *

## 回答 #2

> 赞同：148
> 
> 时间：2008-09-19T18:01:35.707

“关闭”区分大小写。

检查您的 web.config 文件中的“O”是否为大写，我已经经历过几次（听起来很简单）

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2009-05-21T04:53:41.277

为了给这个问题添加更多情况（因为这是我看到的地方，因为我遇到了完全相同的问题），这是我的答案：

就我而言，我从通用错误中剪切/粘贴了文本，如果您想查看问题所在，请输入

```
<system.web>
   <customErrors mode="Off"/>
</system.web> 
```

所以这应该已经解决了，但当然不是！我的问题是上面几行有一个 <system.web> 节点（在编译和身份验证节点之前），下面几行有一个结束标记 </system.web>。一旦我纠正了这个，好的，问题就解决了。我应该做的只是复制/粘贴这一行：

```
<customErrors mode="Off"/> 
```

这是我不断重复做的愚蠢事情的编年史，在标题为“复制和粘贴你的毁灭之路”一章中。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2011-11-01T23:24:27.060

对于 Sharepoint 2010 应用程序，您还应该编辑`C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\TEMPLATE\LAYOUTS\web.config`和定义`<customErrors mode="Off" />`

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-09-19T23:24:56.460

如果您有权访问，您通常可以在事件查看器中找到有关错误的更多信息。您的提供商还可能通过在他们的 machine.config 中覆盖它或将零售属性设置为 true ( [http://msdn.microsoft.com/en-us/library/ms228298( VS.80).aspx](http://msdn.microsoft.com/en-us/library/ms228298(VS.80).aspx) )。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-01-08T10:58:50.827

我尝试了这里描述的大部分内容。我使用的是 VWD，默认的 web.config 文件包含：

```
 <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
        <error statusCode="403" redirect="NoAccess.htm" />
        <error statusCode="404" redirect="FileNotFound.htm" />
    </customErrors> 
```

我将 mode="RemoteOnly" 更改为 mode="Off"。仍然没有喜悦。然后我使用了 IIS 管理器、属性、ASP.Net 选项卡、编辑配置，然后选择了 CustomeErrors 选项卡。这仍然显示 RemoteOnly。我将其更改为关闭，最后我可以看到详细的错误消息。

当我检查 web.config 时，我看到 system.web 中有两个 CustomErrors 节点；我刚刚注意到第二个条目（我正在更改的那个在评论中）。所以尽量不要使用记事本检查远程服务器上的 web.config。

但是，如果您使用 IIS 编辑配置的东西，它会抱怨 web.config 中的错误。然后，您可以排除所有“web.config 中是否存在 XML 语法错误”的答案

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2015-05-20T09:16:42.810

我在这里找到了一个真正解决这个问题的答案：[https ://stackoverflow.com/a/18938991/550975](https://stackoverflow.com/a/18938991/550975)

只需将其添加到您的`web.config`：

```
<configuration>  
  <system.webServer>  
    <httpErrors existingResponse="PassThrough"/>  
  </system.webServer>  
<configuration> 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-03-07T11:59:47.237

我的问题是我在 web.config 中定义了这个

```
<httpErrors errorMode="Custom" existingResponse="Replace">
  <remove statusCode="404" />
  <remove statusCode="500" />
  <error statusCode="404" responseMode="ExecuteURL" path="/Error/NotFound" />
  <error statusCode="500" responseMode="ExecuteURL" path="/Error/Internal" />
</httpErrors> 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2008-09-19T13:11:41.783

如果你仍然得到那个页面，它很可能在通过 Web.Config 之前就已经爆炸了

确保 ASP.Net 具有访问 .Net Framework 文件夹、IIS 元数据库等所需的权限。您有什么方法可以检查 ASP.Net 是否正确安装并在 IIS 中正确关联？

编辑：在格雷格发表评论后，我想到你发布的是整个非常小的 web.config，还有更多内容吗？如果是这样，您可以发布整个 web.config 吗？

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2011-01-17T01:44:29.583

我也有这个问题，但是在使用 Apache 和 mod_mono 时。对于处于这种情况的其他人，您需要在更改 web.config 后重新启动 Apache 以强制读取新版本。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2010-09-19T02:38:51.140

实际上，我在托管我的网络应用程序时发现的是，您在本地机器上开发的代码比托管公司提供给您的版本更高。如果您有管理员权限，您可以在虚拟主机设置下更改 Microsoft ASP.NET 版本支持

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2011-01-06T14:51:39.940

我们遇到了这个问题，这是由于 IIS 用户无法访问 Web 服务器上的机器配置。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2011-10-03T12:56:30.997

我们也遇到了这个错误，在我们的例子中，这是因为应用程序池用户不再拥有对 web.config 文件的权限。它失去权限的原因（之前一切都很好）是因为我们在 rar 文件中备份了站点，我将 web.config 的备份版本从 rar 拖到站点中。这似乎已经删除了对 web.config 文件的所有权限，除了我，登录用户。

我们花了一段时间才弄清楚这一点，因为我反复检查了文件夹级别的权限，但从未检查过文件级别的权限。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2013-08-09T11:14:17.150

我遇到了同样的问题，但以不同的方式找到了解决方案。

-

我所做的是，我在**IIS Manager**中打开了**应用程序池的****高级设置**。

 ****在那里，我将**Enable 32-Bit Applications**设置为**True**。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-09-19T13:18:17.057

尝试重新启动应用程序（创建一个 app_offline.htm 而不是删除它），如果您仍然收到相同的错误消息，请确保您只在 web.config 中声明了一次 customErrors，或类似的任何内容。web.config 中的错误可能会对应用程序产生一些奇怪的影响。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-09-19T15:40:28.837

你的 web.config 中是否有像æøå 这样的特殊字符？如果是这样，请确保将编码设置为 utf-8。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-09-19T15:52:41.913

此 Web 应用程序是否设置在网站目录树中的任何其他应用程序下方？检查任何父 web.config 文件的其他设置（如果有）。此外，将您的目录设置为 IIS 中的应用程序目录。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-09-19T17:07:17.023

如果您使用的是 MVC 预览版 4，您可能会遇到这种情况，因为您使用的是 HandleErrorAttribute。该行为在 5 中发生了更改，因此如果您关闭自定义错误，它不会处理异常。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2008-12-09T13:03:49.967

您也可以尝试在服务器机器上的浏览器中打开该网站。我没有做很多 ASP.NET 开发，但我记得自定义错误有一个设置，只在服务器上显示完整的错误文本，作为一种安全措施。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2011-09-02T18:15:50.487

我刚刚处理过类似的问题。在我的情况下，默认站点 asp.net 版本是 1.1，而我正在尝试启动 2.0 Web 应用程序。该错误非常微不足道，但尚不清楚为什么自定义错误不会消失，并且运行时从未写入事件日志。明显的修复是匹配 IIS 的 Asp.Net 选项卡中的版本。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2015-10-21T23:09:02.530

还要确保您正在编辑 web.config 而不是 website.config，就像我正在做的那样。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2012-01-04T10:36:37.157

我遇到了同样的问题，原因是 IIS 运行的是 ASP.NET 1.1，而站点需要 .NET 2.0。

错误消息什么也没做，只是让我偏离了轨道几个小时。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2015-09-08T12:06:46.103

确保在 system.web 之后添加

我把它放在节点的末尾并没有工作。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2016-09-12T13:21:34.123

如果您正在进行配置转换，您可能还需要从相关的 web.config 文件中删除以下行。

```
<compilation xdt:Transform="RemoveAttributes(debug)" /> 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2016-10-17T14:38:29.637

在这里尝试了所有答案后，结果发现我的`Application_Error`方法是这样的：

```
Server.ClearError();
Response.Redirect("/Home/Error"); 
```

删除这些行并设置解决了问题。（客户端仍然被重定向到错误页面`customErrors="On"`）。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2017-04-13T04:55:33.910

我遇到了同样的问题，我浏览了事件查看器应用程序日志，其中清楚地提到了发生这种异常的原因。在我的情况下，例外如下......

异常信息：

```
Exception type: HttpException 
Exception message: The target principal name is incorrect.  Cannot generate SSPI context.
at System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app)
at System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers)
at System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context)
at System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context)
at System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext)

The target principal name is incorrect.  Cannot generate SSPI context. 
```

我刚刚在应用程序池中更新了我的密码，它对我有用。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2017-05-16T12:53:04.780

在某些情况下，web.config 的格式也可能不正确。在这种情况下，您必须逐行通过它才能工作。通常，重写规则是这里的罪魁祸首。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2018-09-20T10:52:08.257

这真的很奇怪。我收到此错误，重新启动服务器后它消失了。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2018-09-28T06:28:37.857

对我来说，这是 system.web 上方 web.config 中的一个错误。

文件 blah 不存在，所以它当时抛出了一个错误。因为它还没有到达 System.Web 部分，但它正在使用 CUstomErrors (On) 的服务器默认设置

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2021-09-01T04:22:35.780

以上这些解决方案都不适合我。我的情况是

我的 web.config 中有这个

```
<log4net debug="true"> 
```

要么删除所有这些，要么去阅读您的应用程序文件夹\日志中的错误日志，例如.. C:\Users\YourName\source\repos\YourProjectFolder\logs

* * *

## 回答 #31

> 赞同：-1
> 
> 时间：2020-10-17T17:41:18.250

它可能不是IIS！

我浏览了此页面上的所有答案，以及更多答案。他们都没有解决我们的问题，但它们是值得检查的好东西，会引起问题。所以先检查一下。如果您仍然不放心，并且正在使用 PHP，请检查您的 PHP 设置。

为我解决的问题是编辑我们的 php.ini 文件并指定：

```
display_errors: On 
```

我还设置：

```
display_startup_errors: On 
```

只是为了很好的衡量。

这解决了问题，我们真正的问题原来是在开发阶段迁移期间遗漏了一个逗号。

我意识到这个页面链接到我们也在使用的 asp.net，这不是一个 asp.net 问题，但是当你搜索这些错误时，这个页面会出现并且有一些很好的信息可以解决最常见的问题；只是不是我们的具体问题。配置更改确实修复了它，然后我们可以专注于我们的 asp.net 文件！****

# sharepoint - 在 SharePoint-NavigationNode 中设置“受众”？

> ID：101704
> 
> 赞同：1
> 
> 时间：2008-09-19T13:11:18.773
> 
> 标签：sharepoint

你好，我正在使用 WSS 3.0，我需要仅向指定组显示网站导航（“快速启动”）的某些条目。根据[这篇博](http://www.mtelligent.com/journal/2007/10/7/customizing-the-quick-launch-menu-with-spnavigationnode-spna.html)文，这可以使用 SPNavigationNode 的属性来完成 - 但似乎问题的解决方案是“仅限 MOSS”。有没有办法在 WSS 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T16:20:39.240

QuickLaunch (QL) 将对菜单上的默认项目进行安全修整。换句话说，如果用户无权访问 QL 导航项指向的内容，则不会向她显示。但是，不幸的是，QL 不会**对**您通过 GUI 手动添加的导航项目进行安全修整。如果您通过对象模型添加项目并指示它们应该进行安全修剪，那么它将起作用。

[我能够使用此博客文章](http://www.sharepointblogs.com/tbaginski/archive/2007/12/26/how-to-programmatically-customize-site-navigation-in-wss-3-0-and-moss-2007.aspx)中的代码向 WSS 添加和删除经过安全调整的 QL 导航项。（实际上，我是通过 PowerShell 完成的，但仍然使用相同的对象模型代码。）我希望这会有所帮助。

# c# - TcpClient.Connected 返回 true 但客户端未连接，我可以使用什么来代替？

> ID：101708
> 
> 赞同：5
> 
> 时间：2008-09-19T13:12:00.347
> 
> 标签：c#, .net, vb.net, sockets

在 VB.net 中，我使用 TcpClient 来检索数据字符串。我不断检查 .Connected 属性以验证客户端是否已连接，但即使客户端断开连接，它仍然返回 true。我可以使用什么作为解决方法？

这是我当前代码的精简版：

```
Dim client as TcpClient = Nothing
client = listener.AcceptTcpClient
do while client.connected = true
   dim stream as networkStream = client.GetStream()
   dim bytes(1024) as byte
   dim numCharRead as integer = stream.Read(bytes,0,bytes.length)
   dim strRead as string = System.Text.Encoding.ASCII.GetString(bytes,0,i)
loop 
```

如果客户端断开连接但我已经关闭了另一个应用程序并且它仍然没有，我会认为至少 GetStream() 调用会引发异常...

谢谢。

**建议编辑** 轮询 Client.Available 但这并不能解决问题。如果客户端没有“实际”连接可用，则返回 0。

关键是我试图让连接保持打开状态并允许我通过同一个套接字连接多次接收数据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-19T15:04:15.163

当 NetworkStream.Read 返回 0 时，连接已关闭。[参考](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.read(VS.71).aspx)：

> 如果没有数据可供读取，NetworkStream.Read 方法将阻塞，直到数据可用。为避免阻塞，您可以使用 DataAvailable 属性来确定数据是否在传入网络缓冲区中排队等待读取。如果 DataAvailable 返回 true，则读取操作将立即完成。Read 操作将读取尽可能多的数据，最多为 size 参数指定的字节数。**如果远程主机关闭连接，并且已接收到所有可用数据，则 Read 方法将立即完成并返回零字节。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-09-23T22:41:28.497

更好的答案：

```
if (client.Client.Poll(0, SelectMode.SelectRead))
{
    byte[] checkConn = new byte[1];

    if (client.Client.Receive(checkConn, SocketFlags.Peek) == 0)
        throw new IOException();
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2008-09-19T13:22:02.727

而不是轮询 client.connected，也许使用 NetworkStream 的属性来查看是否没有更多可用数据？

无论如何，有一篇[ONDotnet.com](http://www.ondotnet.com/pub/a/dotnet/2003/07/07/netstreams.html)文章，其中包含有关听众的大量信息等等。应该可以帮助您解决问题...

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2019-02-02T21:22:59.933

[https://i.stack.imgur.com/Jb0X2.png](https://i.stack.imgur.com/Jb0X2.png)

链接= [https://docs.microsoft.com/en-us/dotnet/api/system.net.sockets.socket.poll?view=netframework-4.0](https://docs.microsoft.com/en-us/dotnet/api/system.net.sockets.socket.poll?view=netframework-4.0)

您需要设置一个计时器，不时向另一个套接字发送消息。

将 TC 调暗为新的 TimerCallback(AddressOf Ping)

Tick = New Threading.Timer(TC, Nothing, 0, 30000)

```
Sub Ping()
    Send("Stil here?")
End Sub 
```

# html - 格式化 HTML 电子邮件的最佳方式？

> ID：101709
> 
> 赞同：5
> 
> 时间：2008-09-19T13:12:07.757
> 
> 标签：html, email, format

我正在实施一个评论控制，允许人们选择评论并将它们发送到指定的部门。电子邮件需要以特定方式格式化，我想知道最好的方法是什么。

我应该将所有样式信息硬编码到一个庞大的方法中，还是应该尝试创建一个单独的文件并将其读入，然后用相关信息替换某些标签？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-19T13:14:02.947

如果可能，查找并使用某种模板库。这将使每封电子邮件成为一个模板，然后比硬编码的表单更容易维护。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-19T13:55:19.980

Campaign monitor 有一些很棒的、经过充分测试的免费模板：

[http://www.campaignmonitor.com/templates/](http://www.campaignmonitor.com/templates/)

确保您使用的任何内容都能在所有客户端中正常显示。

一个很棒的指南：

[http://www.campaignmonitor.com/blog/archives/2008/05/2008_email_design_guidelines.html](http://www.campaignmonitor.com/blog/archives/2008/05/2008_email_design_guidelines.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-19T13:15:31.917

除了使用某种模板，尽管它很乏味，内联样式是样式化 HTML 电子邮件最跨客户端兼容的方式。并非每个电子邮件客户端都会获取外部样式表，而且许多电子邮件客户端在嵌入样式部分的情况下做得并不好。

在这种情况下，我会为电子邮件选择一组相当简单的样式规则，以确保它在不同的电子邮件客户端中看起来相同，并尽量不要过于依赖图像，因为许多客户端需要额外的点击才能显示内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T13:14:18.313

我会使用模板方法。创建一个简单的正则表达式模板系统并不难，用'somevar'的值替换#somevar#之类的东西。您还可以使用预制模板系统，例如 PHP 的 Smarty。我认为这将是最干净的方法。

亚历克斯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T13:18:46.463

我过去曾使用 XLST 模板来格式化电子邮件。通常，最好使用表格和内联 CSS 构建电子邮件。请注意，outlook 2007 不支持背景图片 :(

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T13:22:04.130

绝对使用模板。我已经使用自定义标签使用文本模板完成了它，如下所示：

```
<p>Dear |FIRST_NAME|, 
```

但我真的不能推荐这个；这是一个痛苦的世界。我第二次这样做（log4net 的 html 电子邮件附加程序）时，我使用 xslt 将对象（在本例中为 log4net 消息）转换为 html 电子邮件。整洁多了。

请注意，某些客户端（例如 Lotus Notes）不支持 XHTML，因此请使用纯旧的 HTML 1.0，没有 css，您应该没问题。

# opengl - 在openGL中绘制可变宽度线（无glLineWidth）

> ID：101718
> 
> 赞同：9
> 
> 时间：2008-09-19T13:13:31.857
> 
> 标签：opengl

不使用 glLineWidth 绘制可变宽度线的最佳方法是什么？只画一个矩形？各种平行线？以上都不是？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-09-19T14:16:09.740

您可以绘制两个三角形：

```
// Draws a line between (x1,y1) - (x2,y2) with a start thickness of t1 and
// end thickness t2.
void DrawLine(float x1, float y1, float x2, float y2, float t1, float t2)
{
    float angle = atan2(y2 - y1, x2 - x1);
    float t2sina1 = t1 / 2 * sin(angle);
    float t2cosa1 = t1 / 2 * cos(angle);
    float t2sina2 = t2 / 2 * sin(angle);
    float t2cosa2 = t2 / 2 * cos(angle);

    glBegin(GL_TRIANGLES);
    glVertex2f(x1 + t2sina1, y1 - t2cosa1);
    glVertex2f(x2 + t2sina2, y2 - t2cosa2);
    glVertex2f(x2 - t2sina2, y2 + t2cosa2);
    glVertex2f(x2 - t2sina2, y2 + t2cosa2);
    glVertex2f(x1 - t2sina1, y1 + t2cosa1);
    glVertex2f(x1 + t2sina1, y1 - t2cosa1);
    glEnd();
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2010-07-22T23:42:31.450

好的，这个怎么样：（Ozgar）

```
       一种
      / \
     / \
    . p1 \
   / \
  / D
 B - .p2
      - - - C

```

所以 AB 是`width1`，CD 是`width2`。

然后，

```
// find line between p1 and p2
Vector p1p2 = p2 - p1 ;

// find a perpendicular
Vector perp = p1p2.perpendicular().normalize()

// Walk from p1 to A
Vector A = p1 + perp*(width1/2)
Vector B = p1 - perp*(width1/2)

Vector C = p2 - perp*(width2/2)
Vector D = p2 - perp*(width2/2)

// wind triangles
Triangle( A, B, D )
Triangle( B, D, C ) 
```

请注意，此算法可能存在 CW/CCW 绕组问题 - 如果 perp 在上图中计算为 (-y, x) 则它将是 CCW 绕组，如果 (y, -x) 则它将是 CW 绕组.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-11-08T04:36:32.810

我今天早些时候不得不做同样的事情。

为了创建一条跨越`(x1,y1) -> (x2,y2)`给定的线`width`，一个非常简单的方法是使用以下方法转换一个简单的单位大小的正方形跨越`(0., -0.5) -> (1., 0.5)`：

1.  `glTranslatef(...)`将其移动到您想要的`(x1,y1)`位置；
2.  `glScalef(...)``length`将其缩放到所需的右侧`width`：使用`length = sqrt( (x2-x1)^2 + (y2-y1)^2 )`或任何其他低复杂度的近似值；
3.  `glRotatef(...)`到`angle`正确的方向：使用`angle = atan2(y2-y1, x2-x1)`.

单位正方形非常简单地由两个三角形条创建`GL_TRIANGLE_STRIP`，经过上述转换后变成您的实线。

这里的负担主要放在 OpenGL（和您的图形硬件）而不是您的应用程序代码上。`glPushMatrix()`通过环绕和`glPopMatrix()`调用，上面的过程很容易变成一个通用函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-05-04T01:12:08.177

对于那些正在寻找一个好的解决方案的人来说，这段代码是使用 LWJGL 编写的，但可以很容易地适应任何 OpenGL 的实现。

```
import java.awt.Color;
import org.lwjgl.opengl.GL11;
import org.lwjgl.util.vector.Vector2f;
public static void DrawThickLine(int startScreenX, int startScreenY, int endScreenX, int endScreenY, Color color, float alpha, float width) {

    Vector2f start = new Vector2f(startScreenX, startScreenY);
    Vector2f end = new Vector2f(endScreenX, endScreenY);

    float dx = startScreenX - endScreenX;
    float dy = startScreenY - endScreenY;

    Vector2f rightSide = new Vector2f(dy, -dx);
    if (rightSide.length() > 0) {
        rightSide.normalise();
        rightSide.scale(width / 2);
    }
    Vector2f leftSide = new Vector2f(-dy, dx);
    if (leftSide.length() > 0) {
        leftSide.normalise();
        leftSide.scale(width / 2);
    }

    Vector2f one = new Vector2f();
    Vector2f.add(leftSide, start, one);

    Vector2f two = new Vector2f();
    Vector2f.add(rightSide, start, two);

    Vector2f three = new Vector2f();
    Vector2f.add(rightSide, end, three);

    Vector2f four = new Vector2f();
    Vector2f.add(leftSide, end, four);

    GL11.glBegin(GL11.GL_QUADS);
    GL11.glColor4f(color.getRed(), color.getGreen(), color.getBlue(), alpha);
    GL11.glVertex3f(one.x, one.y, 0);
    GL11.glVertex3f(two.x, two.y, 0);
    GL11.glVertex3f(three.x, three.y, 0);
    GL11.glVertex3f(four.x, four.y, 0);
    GL11.glColor4f(1, 1, 1, 1);
    GL11.glEnd();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-19T14:16:14.047

一个矩形（即 GL_QUAD 或两个 GL_TRIANGLES）听起来像是你最好的选择，我不确定我能想到任何其他方式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-19T19:49:04.980

假设您的原始点是 (x1,y1) -> (x2,y2)。使用以下点 (x1-width/2, y1), (x1+width/2,y1), (x2-width/2, y2), (x2+width/2,y2) 构造一个矩形，然后使用quads/tris 来绘制它。这是简单天真的方式。请注意，对于大线宽，您会得到奇怪的端点行为。那么你真正想做的是使用向量数学进行一些智能的平行线计算（应该不会那么糟糕）。出于某种原因，我想到了点/叉积和矢量投影。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-07-22T23:49:36.190

如果您偶然编写软件光栅器，另一种方法是在像素着色阶段使用重心坐标，并*在其中一个重心坐标接近 0 时为*像素着色。你做的余量越多，线条就越粗。

# .net - Crystal Reports 2008 的合并模块 - 需要键码？

> ID：101728
> 
> 赞同：1
> 
> 时间：2008-09-19T13:16:21.117
> 
> 标签：.net, crystal-reports, merge

我无法找到有关此的任何信息，但是是否需要将键码嵌入到 .NET 分发的 CR2008 合并模块中？他们曾经要求这样做（必须使用 ORCA 完成），但我没有找到任何关于 CR2008 的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-20T03:29:43.017

我会通过电子邮件发送 Crystal Reports（业务对象）。他们过去曾帮助我解决 KeyCode 问题。

# algorithm - 如何从 N 个纹理生成一个纹理？

> ID：101735
> 
> 赞同：0
> 
> 时间：2008-09-19T13:17:45.153
> 
> 标签：algorithm, 3d, textures

假设我有 N 张从 N 个已知位置拍摄的物体的照片。我还拥有物体的 3D 几何形状，并且我知道相机和镜头的所有特性。

我想从我拥有的 N 张图片中生成一张独特的巨型图片，以便可以将其映射/投影到对象表面上。

有人知道从哪里开始吗？文章、参考资料、书籍？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T13:21:47.813

不确定它是否直接对您有帮助，但这些人有一些相关技术的惊人演示：http: [//grail.cs.washington.edu/projects/videoenhancement/videoEnhancement.htm](http://grail.cs.washington.edu/projects/videoenhancement/videoEnhancement.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T14:31:17.723

*   为您的几何体生成纹理映射坐标
*   生成一个大的空白纹理
*   对于每个像素
    *   找出它映射到的几何图形上的点
    *   找出每个图像中投射到该点的像素
    *   使用所有这些像素的加权混合为像素着色，根据表面法线朝向相应相机的程度加权，并忽略那些在点和相机之间存在另一块几何图形的图像
*   将完成的纹理应用到几何体

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T13:21:13.040

我怀疑这可以使用与图像重建混合的投影图的一些变化来完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T13:21:43.243

看看[立方体贴图](http://developer.nvidia.com/object/cube_map_ogl_tutorial.html)。它可能有用。您可能希望将另一个凸面形状投影到立方体，并将生成的纹理用作传统的立方体贴图纹理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T13:23:35.687

谷歌搜索“阴影映射”，因为在该过程中解决了同样的问题（从一些已知点看到的场景图像被投影到场景中的 3D 几何图形上）。这个问题很好理解，并且有很多代码。

# python - 如何从（非网络）python 客户端访问经过身份验证的 Google App Engine 服务？

> ID：101742
> 
> 赞同：52
> 
> 时间：2008-09-19T13:19:09.333
> 
> 标签：python, web-services, google-app-engine, authentication

我有一个 Google App Engine 应用程序 - [http://mylovelyapp.appspot.com/](http://mylovelyapp.appspot.com/) 它有一个页面 - mylovelypage

目前，页面只是`self.response.out.write('OK')`

如果我在我的计算机上运行以下 Python：

```
import urllib2
f = urllib2.urlopen("http://mylovelyapp.appspot.com/mylovelypage")
s = f.read()
print s
f.close() 
```

它打印“确定”

问题是如果我`login:required`在应用程序的 yaml 中添加到此页面

然后这会打印出 Google 帐户登录页面的 HTML

我已经尝试过“正常”的身份验证方法。例如

```
passman = urllib2.HTTPPasswordMgrWithDefaultRealm()

auth_handler = urllib2.HTTPBasicAuthHandler()
auth_handler.add_password(None,
                          uri='http://mylovelyapp.appspot.com/mylovelypage',
                          user='billy.bob@gmail.com',
                          passwd='billybobspasswd')
opener = urllib2.build_opener(auth_handler)
urllib2.install_opener(opener) 
```

但这没有什么区别——我仍然得到了登录页面的 HTML。

我已经尝试过[Google 的 ClientLogin auth API](http://code.google.com/apis/accounts/docs/AuthForInstalledApps.html)，但我无法让它工作。

```
h = httplib2.Http()

auth_uri = 'https://www.google.com/accounts/ClientLogin'
headers = {'Content-Type': 'application/x-www-form-urlencoded'}
myrequest = "Email=%s&Passwd=%s&service=ah&source=DALELANE-0.0" % ("billy.bob@gmail.com", "billybobspassword")
response, content = h.request(auth_uri, 'POST', body=myrequest, headers=headers)

if response['status'] == '200':
    authtok = re.search('Auth=(\S*)', content).group(1)

    headers = {}
    headers['Authorization'] = 'GoogleLogin auth=%s' % authtok.strip()
    headers['Content-Length'] = '0'

    response, content = h.request("http://mylovelyapp.appspot.com/mylovelypage", 
                                  'POST', 
                                  body="", 
                                  headers=headers)

    while response['status'] == "302":        
        response, content = h.request(response['location'], 'POST', body="", headers=headers) 

    print content 
```

我似乎确实能够正确获取一些令牌，但是当我调用“mylovelypage”时尝试在标题中使用它仍然只是返回登录页面的 HTML。:-(

有人可以帮忙吗？

我可以使用[GData 客户端库](http://code.google.com/p/gdata-python-client/)来做这种事情吗？从我读到的内容来看，我认为它应该能够访问 App Engine 应用程序，但我也没有更成功地让 App Engine 的身份验证工作在那里

任何指向样本、文章，甚至只是我应该搜索以帮助我开始的关键字的指针，都将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2008-09-19T14:55:24.780

appcfg.py，将数据上传到 App Engine 的工具必须执行此操作才能通过 App Engine 服务器对自身进行身份验证。相关功能被抽象到 appengine_rpc.py 中。简而言之，解决方案是：

1.  使用[Google ClientLogin API](http://code.google.com/apis/accounts/docs/AuthForInstalledApps.html)获取身份验证令牌。appengine_rpc.py 在[_GetAuthToken中执行此操作](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/tools/appengine_rpc.py#180)
2.  将身份验证令牌发送到 App Engine 应用上的特殊 URL。然后该页面返回一个 cookie 和一个 302 重定向。忽略重定向并存储 cookie。appcfg.py 在[_GetAuthCookie中执行此操作](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/tools/appengine_rpc.py#228)
3.  在以后的所有请求中使用返回的 cookie。

您可能还想查看[_Authenticate](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/tools/appengine_rpc.py#253)以了解 appcfg 如何处理来自 ClientLogin 的各种返回码，以及[_GetOpener](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/tools/appengine_rpc.py#397)以了解 appcfg 如何创建不遵循 HTTP 重定向的 urllib2 OpenerDirector。或者，实际上，您可以直接使用 AbstractRpcServer 和 HttpRpcServer 类，因为它们几乎可以满足您的所有需求。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2008-09-19T16:22:06.287

感谢 Arachnid 的回答 - 它按建议工作

这是代码的简化副本，以防对下一个人尝试有所帮助！

```
import os
import urllib
import urllib2
import cookielib

users_email_address = "billy.bob@gmail.com"
users_password      = "billybobspassword"

target_authenticated_google_app_engine_uri = 'http://mylovelyapp.appspot.com/mylovelypage'
my_app_name = "yay-1.0"

# we use a cookie to authenticate with Google App Engine
#  by registering a cookie handler here, this will automatically store the 
#  cookie returned when we use urllib2 to open http://currentcost.appspot.com/_ah/login
cookiejar = cookielib.LWPCookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cookiejar))
urllib2.install_opener(opener)

#
# get an AuthToken from Google accounts
#
auth_uri = 'https://www.google.com/accounts/ClientLogin'
authreq_data = urllib.urlencode({ "Email":   users_email_address,
                                  "Passwd":  users_password,
                                  "service": "ah",
                                  "source":  my_app_name,
                                  "accountType": "HOSTED_OR_GOOGLE" })
auth_req = urllib2.Request(auth_uri, data=authreq_data)
auth_resp = urllib2.urlopen(auth_req)
auth_resp_body = auth_resp.read()
# auth response includes several fields - we're interested in 
#  the bit after Auth= 
auth_resp_dict = dict(x.split("=")
                      for x in auth_resp_body.split("\n") if x)
authtoken = auth_resp_dict["Auth"]

#
# get a cookie
# 
#  the call to request a cookie will also automatically redirect us to the page
#   that we want to go to
#  the cookie jar will automatically provide the cookie when we reach the 
#   redirected location

# this is where I actually want to go to
serv_uri = target_authenticated_google_app_engine_uri

serv_args = {}
serv_args['continue'] = serv_uri
serv_args['auth']     = authtoken

full_serv_uri = "http://mylovelyapp.appspot.com/_ah/login?%s" % (urllib.urlencode(serv_args))

serv_req = urllib2.Request(full_serv_uri)
serv_resp = urllib2.urlopen(serv_req)
serv_resp_body = serv_resp.read()

# serv_resp_body should contain the contents of the 
#  target_authenticated_google_app_engine_uri page - as we will have been 
#  redirected to that page automatically 
#
# to prove this, I'm just gonna print it out
print serv_resp_body 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-01-27T06:59:18.943

对于那些无法让 ClientLogin 工作的人，请尝试应用引擎的[OAuth 支持](http://code.google.com/appengine/docs/python/oauth/overview.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T14:16:24.217

我对 AppEngine 或 Google 的 Web api 不太熟悉，但对于蛮力方法，您可以编写一个带有 mechanize ( [http://wwwsearch.sourceforge.net/mechanize/](http://wwwsearch.sourceforge.net/mechanize/) ) 之类的脚本，以便在您之前简单地完成登录过程开始做客户的实际工作。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-09-19T14:16:12.377

我不是 python 专家或应用程序引擎专家。但是您是否尝试遵循[http://code.google.com/appengine/docs/gettingstarted/usingusers.html](http://code.google.com/appengine/docs/gettingstarted/usingusers.html)上的示例应用程序。我在[http://quizengine.appspot.com](http://quizengine.appspot.com)上创建了一个，它似乎与 Google 身份验证和所有内容都可以正常工作。只是一个建议，但请查看入门指南。如果这个建议听起来很幼稚，请放轻松。：） 谢谢。

# visual-studio - 使用 Visual Studio 2008 的多个监视器

> ID：101745
> 
> 赞同：23
> 
> 时间：2008-09-19T13:19:17.337
> 
> 标签：visual-studio, multiple-monitors

我有 2 台显示器，大部分时间我在一个屏幕上打开了一些参考资料，而在另一个屏幕上打开了 Visual Studio。但是，要真正进入该区域，我需要我的代码是我唯一看到的东西。有谁知道在 Visual Studio 中是否可以有多个代码窗口？到目前为止，我能做的最好的事情就是将调试器输出和解决方案资源管理器放在我的左侧显示器上，而 VS 的其余部分放在右侧。但是，我希望在两个窗口上都有代码。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2008-09-19T13:21:08.407

如果您右键单击文件选项卡，则有一个“新建垂直选项卡组”选项只需在两个显示器上最大化并将分隔线放在显示器分隔线上，我认为这就是您所追求的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-23T13:37:43.013

另请参阅[“Visual Studio 和双/多显示器：如何优化使用我的显示器？”](https://stackoverflow.com/questions/6937/visual-studio-and-dualmultiple-monitors-how-do-i-get-optimized-use-out-of-my-mo) 问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-02-16T21:11:28.827

尽管我将[StudioTools](http://www.exactmagic.com/products/studiotools/index.html)用于其他目的，但它有一个“Tear off Editor”选项，您可以使用该选项将文件“tear off”到一个窗口并调整窗口大小。觉得很有帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-09-09T12:14:39.497

您可以在另一台显示器上显示“代码定义窗口”，而不是扩大 VS2008 窗口以跨越两个显示器：只需将其拖到主窗口之外！我发现这对于避免在代码窗口之间切换非常方便：人们通常对光标下符号的定义感兴趣......

对于“类视图”、“调用浏览器”等其他窗口也是如此。您可以选择将它们与选项卡分组在同一组中，或者单独拖动它们（单击选项卡的标签开始拖动）。

# git - 我遇到了合并冲突。如何中止合并？

> ID：101752
> 
> 赞同：2957
> 
> 时间：2008-09-19T13:21:00.217
> 
> 标签：git, version-control, git-merge, git-merge-conflict

我使用`git pull`并遇到了合并冲突：

```
unmerged:   _widget.html.erb

You are in the middle of a conflicted merge. 
```

我知道该文件的其他版本是好的，而我的是坏的，所以我的所有更改都应该被放弃。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2556
> 
> 时间：2008-09-19T14:33:20.870

由于您`pull`不成功，因此`HEAD`(not `HEAD^`) 是您分支上的最后一个“有效”提交：

```
git reset --hard HEAD 
```

您想要的另一部分是让他们的更改覆盖您的更改。

旧版本的 git 允许您使用“他们的”合并策略：

```
git pull --strategy=theirs remote_branch 
```

但这已被删除，正如[Junio Hamano](http://marc.info/?l=git&m=121637513604413&w=2)（Git 维护者）在此消息中所解释的那样。如[链接中所述](http://marc.info/?l=git&m=121637513604413&w=2)，您可以这样做：

```
git fetch origin
git reset --hard origin 
```

* * *

## 回答 #2

> 赞同：2235
> 
> 时间：2010-03-28T23:16:48.167

如果您的 git 版本 >= 1.6.1，则可以使用`git reset --merge`.

此外，正如@Michael Johnson 所提到的，如果您的 git 版本 >= 1.7.4，您也可以使用`git merge --abort`.

与往常一样，请确保在开始合并之前没有未提交的更改。

从[git merge 手册页](https://www.kernel.org/pub/software/scm/git/docs/git-merge.html)

`git merge --abort`相当于`git reset --merge`何时`MERGE_HEAD`出现。

`MERGE_HEAD`正在进行合并时出现。

此外，关于开始合并时未提交的更改：

如果您有不想在开始合并之前提交的更改，只需`git stash`在合并之前和`git stash pop`完成合并或中止之后提交。

* * *

## 回答 #3

> 赞同：612
> 
> 时间：2012-11-12T21:40:24.550

```
git merge --abort 
```

> 中止当前的冲突解决过程，并尝试重建预合并状态。
> 
> 如果在合并开始时存在未提交的工作树更改，`git merge --abort`则在某些情况下将无法重建这些更改。因此，建议在运行 git merge 之前始终提交或存储您的更改。
> 
> `git merge --abort`相当于`git reset --merge`何时 `MERGE_HEAD`出现。

[http://www.git-scm.com/docs/git-merge](http://www.git-scm.com/docs/git-merge)

* * *

## 回答 #4

> 赞同：113
> 
> 时间：2008-09-19T13:25:09.910

我想这是`git reset`你需要的。

请注意，这`git revert`意味着一些非常不同的东西，例如，`svn revert`在 Subversion 中，revert 将丢弃您的（未提交的）更改，将文件从存储库返回到当前版本，而`git revert`“撤消”提交。

`git reset`应该做相当于`svn revert`，即丢弃不需要的更改。

* * *

## 回答 #5

> 赞同：78
> 
> 时间：2008-09-20T10:41:32.293

在这个特定的用例中，您并不想中止合并，只需以特定方式解决冲突。

也没有特别需要重置和执行不同策略的合并。git 已正确突出显示冲突，并且接受另一方更改的要求仅适用于这个文件。

对于冲突中未合并的文件，git 会在索引中提供文件的通用基础、本地和远程版本。（这是在 3-way diff 工具中读取它们的地方`git mergetool`。）您可以使用`git show`来查看它们。

```
# common base:
git show :1:_widget.html.erb

# 'ours'
git show :2:_widget.html.erb

# 'theirs'
git show :3:_widget.html.erb 
```

解决冲突以逐字使用远程版本的最简单方法是：

```
git show :3:_widget.html.erb >_widget.html.erb
git add _widget.html.erb 
```

或者，使用 git >= 1.6.1：

```
git checkout --theirs _widget.html.erb 
```

* * *

## 回答 #6

> 赞同：75
> 
> 时间：2020-06-26T05:36:45.607

对于 git >= 1.6.1：

```
git merge --abort 
```

对于旧版本的 git，这将完成这项工作：

```
git reset --merge 
```

或者

```
git reset --hard 
```

* * *

## 回答 #7

> 赞同：66
> 
> 时间：2020-11-26T09:20:26.373

您可以中止合并步骤：

```
git merge --abort 
```

否则你可以保留你的更改（你在哪个分支上）

```
git checkout --ours file1 file2 ... 
```

否则您可以保留其他分支更改

```
git checkout --theirs file1 file2 ... 
```

* * *

## 回答 #8

> 赞同：59
> 
> 时间：2015-04-02T12:16:45.667

评论表明这`git reset --merge`是`git merge --abort`. 值得注意的是，这`git merge --abort`仅相当于`git reset --merge`假设 a`MERGE_HEAD`存在。这可以在 git help for merge 命令中阅读。

> 当 MERGE_HEAD 存在时， git merge --abort 等效于 git reset --merge。

合并失败后，如果没有`MERGE_HEAD`，则可以使用 撤消失败的合并`git reset --merge`，但不一定使用`git merge --abort`。**它们不仅是同一事物的新旧语法**。

就我个人而言，我发现`git reset --merge`对于类似于所描述的场景的场景更强大，并且通常合并失败。

* * *

## 回答 #9

> 赞同：30
> 
> 时间：2018-04-10T21:26:02.707

如果您最终遇到合并冲突并且没有任何要提交的内容，但仍然显示合并错误。应用所有下面提到的命令后，

```
git reset --hard HEAD
git pull --strategy=theirs remote_branch
git fetch origin
git reset --hard origin 
```

请删除

> ***.git\index.lock***

文件[在恢复的情况下剪切粘贴到其他位置]，然后根据您想要的版本输入以下任何命令。

```
git reset --hard HEAD
git reset --hard origin 
```

希望有帮助！！！

* * *

## 回答 #10

> 赞同：20
> 
> 时间：2010-07-13T18:57:42.047

另一种保留工作副本状态的方法是：

```
git stash
git merge --abort
git stash pop 
```

我通常不建议这样做，因为它实际上就像在 Subversion 中合并，因为它在以下提交中丢弃了分支关系。

* * *

## 回答 #11

> 赞同：18
> 
> 时间：2010-07-17T01:29:33.400

由于 Git 1.6.1.3[`git checkout`](http://git-scm.com/docs/git-checkout)已经能够从合并的任一侧检出：

```
git checkout --theirs _widget.html.erb 
```

* * *

## 回答 #12

> 赞同：11
> 
> 时间：2021-07-29T12:56:48.560

可能不是 OP 想要的，但对我来说，我试图将一个稳定的分支合并到一个特性分支，并且有太多的冲突。我没有设法重置更改，因为 HEAD 被许多提交更改，所以简单的解决方案是强制签出到一个稳定的分支。然后您可以结帐到另一个分支，它将与合并前一样。

`git checkout -f master`

`git checkout side-branch`

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2021-06-10T07:27:32.153

为了*避免*陷入这种麻烦，可以扩展该方法并在**合并*****之前***`git merge --abort`创建一个**单独的测试分支***。*

 ***案例**：您有一个主题分支，它没有被合并，因为您分心/出现了一些事情/您知道，但它*已经*（或已经）准备好了。

现在**可以将它**合并到master中吗？

在***测试***分支中工作以估计/找到解决方案，然后放弃测试分支并在主题分支中应用解决方案。

```
# Checkout the topic branch
git checkout topic-branch-1

# Create a _test_ branch on top of this
git checkout -b test

# Attempt to merge master
git merge master

# If it fails you can abandon the merge
git merge --abort
git checkout -
git branch -D test  # we don't care about this branch really... 
```

努力解决冲突。

```
# Checkout the topic branch
git checkout topic-branch-1

# Create a _test_ branch on top of this
git checkout -b test

# Attempt to merge master
git merge master

# resolve conflicts, run it through tests, etc
# then
git commit <conflict-resolving>

# You *could* now even create a separate test branch on top of master
# and see if you are able to merge
git checkout master
git checkout -b master-test
git merge test 
```

最后再次检查主题分支，从测试分支应用修复并继续 PR。最后删除测试和主测试。

涉及？是的，但在我做好准备之前，它不会影响我的主题或主分支。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-10-31T00:56:24.403

我发现以下内容对我有用（将单个文件恢复为预合并状态）：

```
git reset *currentBranchIntoWhichYouMerged* -- *fileToBeReset* 
```

* * *

## 回答 #15

> 赞同：-10
> 
> 时间：2020-02-21T16:19:32.997

**源树**

因为您没有提交合并，所以只需双击另一个分支（这意味着签出它），当 sourcetree 询问您是否放弃所有更改时，请同意。

**笔记**

这个答案是针对那些使用 SourceTree 作为 git 客户端的人。*

# android - 有没有办法在 Android 上运行 Python？

> ID：101754
> 
> 赞同：2088
> 
> 时间：2008-09-19T13:21:12.417
> 
> 标签：android, python, jython, ase, android-scripting

我们正在开发[S60](http://en.wikipedia.org/wiki/S60_%28software_platform%29)版本，这个平台有一个很好的 Python API。

不过，Android 上的 Python 官方并没有什么说法，但是既然[Jython](http://en.wikipedia.org/wiki/Jython)存在，有没有办法让蛇和机器人协同工作呢？？

* * *

## 回答 #1

> 赞同：1153
> 
> 时间：2011-11-18T21:49:45.343

一种方法是使用[Kivy](http://kivy.org/)：

> 开源 Python 库，用于快速开发利用创新用户界面的应用程序，例如多点触控应用程序。

> Kivy 在 Linux、Windows、OS X、Android 和 iOS 上运行。您可以在所有支持的平台上运行相同的 [python] 代码。

[Kivy 展示应用程序](https://play.google.com/store/apps/details?id=org.kivy.showcase)

* * *

## 回答 #2

> 赞同：363
> 
> 时间：2009-06-10T05:24:29.237

还有新的[Android 脚本环境](http://www.talkandroid.com/1225-android-scripting-environment/)(ASE/SL4A) 项目。它看起来很棒，并且与原生 Android 组件有一些集成。

注意：不再处于“积极开发”之下，但一些分叉可能是。

* * *

## 回答 #3

> 赞同：229
> 
> 时间：2009-06-10T05:13:13.870

是的！: [Android 脚本环境](http://google-opensource.blogspot.com/2009/06/introducing-android-scripting.html)

[Matt Cutts](http://www.mattcutts.com/blog/android-barcode-scanner/)通过 SL4A提供的一个示例——“这是一个用六行 Python 代码编写的条形码扫描仪：

```
import android
droid = android.Android()
code = droid.scanBarcode()
isbn = int(code['result']['SCAN_RESULT'])
url = "http://books.google.com?q=%d" % isbn
droid.startActivity('android.intent.action.VIEW', url) 
```

* * *

## 回答 #4

> 赞同：95
> 
> 时间：2011-01-28T12:18:47.870

# 适用于 Android 的 Pygame 子集

[Pygame](https://www.pygame.org/news)是 Python 的 2D 游戏引擎（在桌面上），很受新程序员欢迎。[Android](https://www.renpy.org)的Pygame 子集将自己描述为...

> ...将 Pygame 功能子集移植到 Android 平台。该项目的目标是允许创建特定于 Android 的游戏，并简化游戏从类似 PC 的平台到 Android 的移植。

这些示例包括一个打包为 APK 的完整游戏，非常有趣。

* * *

## 回答 #5

> 赞同：91
> 
> 时间：2008-11-01T20:29:44.703

作为[Python](http://en.wikipedia.org/wiki/Python_%28programming_language%29)爱好者和 Android 程序员，我很遗憾地说这不是一个好方法。有两个问题：

一个问题是，Android 开发工具不仅仅是一种编程语言。许多 Android 图形都涉及 XML 文件来配置显示，类似于 HTML。内置的 java 对象与这种 XML 布局集成在一起，这比编写代码从逻辑到位图要容易得多。

另一个问题是 G1（以及在不久的将来可能还有其他 Android 设备）没有那么快。200 MHz 处理器和 RAM 非常有限。即使在 Java 中，如果您想让您的应用程序完美流畅，您也必须进行大量的重写以避免创建更多对象。Python 在移动设备上的运行速度会持续一段时间。

* * *

## 回答 #6

> 赞同：84
> 
> 时间：2011-10-12T13:49:09.380

# 交叉编译 & Ignifuga

我的博客有用于交叉编译适用于 Android 的 Python 2.7.2 的[说明和补丁。](http://mdqinc.com/blog/2011/09/cross-compiling-python-for-android)

我还开源了我的 2D 游戏引擎[Ignifuga](http://ignifuga.org)。它基于 Python/SDL，可针对 Android 进行交叉编译。即使您不将它用于游戏，您也可能从代码或构建器实用程序（命名为*Schafer*，以 Tim ......你知道谁）获得有用的想法。

* * *

## 回答 #7

> 赞同：83
> 
> 时间：2012-03-19T15:45:27.680

# Android 脚本层

[SL4A](https://github.com/damonkohler/sl4a)做你想做的事。您可以轻松地将其从他们的站点直接安装到您的设备上，并且不需要 root。

它支持多种语言。Python是最成熟的。默认情况下，它使用 Python 2.6，但您可以使用[3.2 端口。](https://code.google.com/p/python-for-android/wiki/Python3)我已经将该端口用于 Galaxy S2 上的各种事情，并且运行良好。

## API

SL4A`android`为每种支持的语言提供了其库的一个端口。该库通过单个`Android`对象为底层 Android API 提供接口。

```
from android import Android

droid = Android()
droid.ttsSpeak('hello world') # example using the text to speech facade 
```

每种语言都有几乎相同的 API。你甚至可以在 webviews 中使用 JavaScript API。

```
let droid = new Android();
droid.ttsSpeak("hello from js"); 
```

## 用户界面

对于用户界面，您有三个选项：

*   您可以通过 API 轻松使用通用的原生对话和菜单。这对于确认对话和其他基本用户输入很有用。
*   您还可以从 Python 脚本中打开 web 视图，然后使用 HTML5 作为用户界面。当您使用 Python 中的 webviews 时，您可以在 webview 和生成它的 Python 进程之间来回传递消息。UI 不会是原生的，但它仍然是一个不错的选择。
*   对原生 Android 用户界面有*一些*支持，但我不确定它的效果如何；我只是从来没有使用过它。

您可以混合选项，这样您就可以拥有一个主界面的 web 视图，并且仍然使用本机对话。

## QPython

[有一个名为QPython](http://qpython.com)的第三方项目。它建立在 SL4A 之上，并添加了一些其他有用的东西。

QPython 为您提供了一个更好的 UI 来管理您的安装，并且包括一个小的触摸屏代码编辑器、一个 Python 外壳和一个用于包管理的 PIP 外壳。他们还有一个 Python 3 端口。这两个版本都可以从 Play 商店免费获得。QPython 还在 Android 项目（包括 Kivy）上捆绑了一堆 Python 的库，因此它不仅仅是 SL4A。

请注意，QPython 仍在开发他们的 SL4A 分支（不过，说实话并不多）。主要的 SL4A 项目本身几乎已经死了。

## 有用的链接

*   SL4A 项目（现在在 GitHub 上）：[https ://github.com/damonkohler/sl4a](https://github.com/damonkohler/sl4a)
*   SL4A Python 3 端口：[https ://code.google.com/p/python-for-android/wiki/Python3](https://code.google.com/p/python-for-android/wiki/Python3)
*   QPython 项目：http: [//qpython.com](http://qpython.com)
*   学习 SL4A（教程点）：[https ://www.tutorialspoint.com/sl4a/index.htm](https://www.tutorialspoint.com/sl4a/index.htm)

* * *

## 回答 #8

> 赞同：60
> 
> 时间：2017-01-20T11:36:47.937

# Termux

您可以使用为 Android 提供 POSIX 环境的[Termux应用程序来安装 Python。](https://play.google.com/store/apps/details?id=com.termux&hl=ro)

*请注意，这`apt install python`将在 Termux 上安装 Python3。对于 Python2，您需要使用`apt install python2`.*

*   一些演示：[https ://www.youtube.com/watch?v=fqqsl72mASE](https://www.youtube.com/watch?v=fqqsl72mASE)
*   GitHub 项目：[https ://github.com/termux](https://github.com/termux)

* * *

## 回答 #9

> 赞同：55
> 
> 时间：2015-01-13T02:08:57.633

# 基维

我想补充一下@JohnMudd 写的关于 Kivy 的内容。自从他描述的情况以来已经有好几年了，基维已经有了很大的发展。

在我看来，Kivy 最大的卖点是它的跨平台兼容性。您可以使用任何桌面环境（Windows/*nix 等）对所有内容进行编码和测试，然后为一系列不同平台打包您的应用程序，包括 Android、iOS、MacOS 和 Windows（尽管应用程序通常缺乏原生外观）。

使用 Kivy 自己的[KV](http://kivy.org/docs/guide/lang.html#kv-language)语言，您可以轻松地编写和构建 GUI 界面（它就像 Java XML，但不是 TextView 等，KV 有自己`ui.widgets`的类似翻译），在我看来这很容易采用。

目前[Buildozer](https://github.com/kivy/buildozer)和[python-for-android](http://python-for-android.readthedocs.org/en/latest/prerequisites/)是最推荐的构建和打包应用程序的工具。我已经尝试了它们，并且可以坚定地说它们使使用 Python 构建 Android 应用程序变得轻而易举。他们的指南也有据可查。

iOS 是 Kivy 的另一大卖点。您可以使用相同的代码库，只需通过[kivy-ios](http://kivy.org/docs/guide/packaging-ios.html#create-a-package-for-ios) Homebrew 工具进行少量更改，尽管构建需要 Xcode，然后在其设备上运行（AFAIK Xcode 中的 iOS 模拟器目前不适用于 x86 架构构建） . 还有一些依赖问题必须在 Xcode 中手动编译和摆弄才能成功构建，但它们不会太难解决，而且[Kivy Google Group](https://groups.google.com/forum/#!forum/kivy-users)中的人们也非常乐于助人。

话虽如此，具有良好 Python 知识的用户应该可以快速掌握基础知识。

如果您将 Kivy 用于更严肃的项目，您可能会发现现有模块不能令人满意。虽然有一些可行的解决方案。借助（正在进行的） Android [pyjnius](https://github.com/kivy/pyjnius)和[pyobjus](https://github.com/kivy/pyobjus)，用户现在可以访问 Java/Objective-C 类来控制一些本机 API。

* * *

## 回答 #10

> 赞同：42
> 
> 时间：2008-09-19T13:26:53.043

目前还没有，如果您能尽快让 Jython 工作，您会很幸运。如果您打算现在开始您的开发，那么现在最好还是坚持使用 Java。

* * *

## 回答 #11

> 赞同：42
> 
> 时间：2012-01-06T14:34:25.123

使用 SL4A（在其他答案中已经单独提到过），您可以[运行](http://groups.google.com/group/web2py/browse_thread/thread/f227e93fe802a902)一个成熟的[web2py](http://web2py.com/)实例（其他[python web 框架](http://wiki.python.org/moin/WebFrameworks)也可能是候选者）。SL4A 不允许您做原生 UI 组件（按钮、滚动条等），但它确实支持[WebViews](http://code.google.com/p/android-scripting/wiki/UsingWebView)。WebView 基本上只不过是指向固定地址的条带化 Web 浏览器。我相信本机 Gmail 应用程序使用 WebView 而不是常规的小部件路线。

这条路线会有一些有趣的特点：

*   对于大多数 python web 框架，您实际上可以在不使用 android 设备或 android 模拟器的情况下进行开发和测试。
*   无论您最终为手机编写的任何 Python 代码都可以放在公共网络服务器上，只需很少（如果有的话）修改。
*   你可以利用所有疯狂的网络资源：查询、HTML5、CSS3 等。

* * *

## 回答 #12

> 赞同：39
> 
> 时间：2013-06-12T19:46:35.943

# QPython

我使用[QPython 应用程序](http://qpython.com)。它是免费的，包括代码编辑器、交互式解释器和包管理器，允许您直接在设备上创建和执行 Python 程序。

* * *

## 回答 #13

> 赞同：31
> 
> 时间：2017-04-15T14:09:33.330

[**以下**](https://wiki.python.org/moin/Android)是python官方网站中列出的一些工具

* * *

在 playstore 中有一个名为**QPython3**的应用程序，可用于编辑和运行 python 脚本。

[商店链接](https://play.google.com/store/apps/details?id=org.qpython.qpy3)

* * *

另一个名为**Termux**的应用程序，您可以在其中使用命令安装 python

```
pkg install python 
```

[游戏商店链接](https://play.google.com/store/apps/details?id=com.termux&hl=en)

* * *

如果你想开发应用程序，有[Python Android Scripting Layer ( **SL4A** )](https://www.pythoncentral.io/python-for-android-the-scripting-layer-sl4a/)。

`The Scripting Layer for Android, SL4A, is an open source application that allows programs written in a range of interpreted languages to run on Android. It also provides a high level API that allows these programs to interact with the Android device, making it easy to do stuff like accessing sensor data, sending an SMS, rendering user interfaces and so on.`

* * *

您还可以查看[**PySide for Android**](https://wiki.qt.io/PySide_for_Android_guide)，它实际上是 Qt 4 的 Python 绑定。

* * *

有一个名为[**PyMob**](http://www.pyzia.com/technology.html)的平台，应用程序可以纯粹用 Python 编写，编译器工具流 (PyMob) 将它们转换为各种平台的本机源代码。

* * *

还要检查[**python-for-android**](https://python-for-android.readthedocs.io/en/latest/)

`python-for-android is an open source build tool to let you package Python code into standalone android APKs. These can be passed around, installed, or uploaded to marketplaces such as the Play Store just like any other Android app. This tool was originally developed for the Kivy cross-platform graphical framework, but now supports multiple bootstraps and can be easily extended to package other types of Python apps for Android.`

* * *

试用**[Chaquopy](https://chaquo.com/chaquopy/)** 适用于 Android 的 Python SDK

* * *

还有... [**BeeWare**](https://beeware.org/)

`BeeWare allows you to write your app in Python and release it on multiple platforms. No need to rewrite the app in multiple programming languages. It means no issues with build tools, environments, compatibility, etc.`

* * *

## 回答 #14

> 赞同：30
> 
> 时间：2012-01-09T04:46:53.783

来自[Python for android](https://github.com/kivy/python-for-android)网站：

> Python for android 是一个项目，用于创建您自己的 Python 发行版，包括您想要的模块，并创建一个包含 python、libs 和您的应用程序的 apk。

* * *

## 回答 #15

> 赞同：25
> 
> 时间：2018-02-16T17:12:15.033

## 查库皮

[Chaquopy](https://chaquo.com/chaquopy)是 Android Studio 的基于 Gradle 的构建系统的插件。它专注于与标准 Android 开发工具的[紧密集成。](https://chaquo.com/chaquopy/doc/current/android.html)

*   它提供了完整的 API 以[从 Python 调用 Java](https://chaquo.com/chaquopy/doc/current/python.html)或[从 Java](https://chaquo.com/chaquopy/doc/current/java.html)调用 Python ，从而允许开发人员使用最适合其应用程序的每个组件的语言。

*   它可以自动下载[PyPI 包](https://chaquo.com/chaquopy/doc/current/android.html#requirements)并将它们构建到应用程序中，包括选定的本机包，例如 NumPy。

*   它支持从 Python 完全访问所有 Android API，包括本机用户界面工具包（[例如纯 Python 活动](https://github.com/chaquo/chaquopy/blob/master/app/src/main/python/chaquopy/demo/ui_demo.py)）。

这是一个商业产品，但它是免费的开源使用，并且将永远保持这种状态。

（我是这个产品的创造者。）

* * *

## 回答 #16

> 赞同：22
> 
> 时间：2012-05-09T15:44:49.157

又一次尝试：[https ://code.google.com/p/android-python27/](https://code.google.com/p/android-python27/)

这个直接将 Python 解释器嵌入到您的应用程序 apk 中。

* * *

## 回答 #17

> 赞同：18
> 
> 时间：2013-03-11T09:36:58.517

您可以使用[sl4a](http://code.google.com/p/android-scripting/)运行 Python 代码。sl4a 支持 Python、[Perl](http://en.wikipedia.org/wiki/Perl)、[JRuby](http://en.wikipedia.org/wiki/JRuby)、[Lua](http://en.wikipedia.org/wiki/Lua_%28programming_language%29)、BeanShell、JavaScript、[Tcl](http://en.wikipedia.org/wiki/Tcl)和 shell 脚本。

您可以学习 sl4a [Python 示例](http://code.google.com/p/android-scripting/wiki/Tutorials)。

* * *

## 回答 #18

> 赞同：14
> 
> 时间：2015-02-25T13:04:47.927

如果您正在寻找 3.4.2 或更新版本（撰写本文时为 3.9.6），另一个选择是 GitHub 上的此存档。

[Python3-Android 3.4.2](https://github.com/rave-engine/python3-android)或[Python3-Android 3.9.6](https://github.com/GRRedWings/python3-android)

我相信原始存档支持 Python 3.4.2，最新的 GRRedwings 分支支持 3.9.6 和 NDK 的 22b 版本。较旧的分支支持其他版本，但使用 docker 编译并不容易。

旧版本您只需克隆存档，运行 make 并获得 .so 或 .a

较新的版本遵循自述文件，但它使用 docker 进行一致的构建。

我目前使用它在 android 设备上运行原始 Python。通过对构建文件进行一些修改，您还可以制作 x86 和 armeabi 64 位

* * *

## 回答 #19

> 赞同：14
> 
> 时间：2016-09-16T02:41:18.097

您可以使用**QPython**：

它有一个 Python 控制台、编辑器以及包管理/安装程序

[http://qpython.com/](http://qpython.com/)

这是一个具有 Python 2 和 Python 3 实现的开源项目。您可以直接从 github 下载源代码和 Android .apk 文件。

QPython 2：[https ://github.com/qpython-android/qpython/releases](https://github.com/qpython-android/qpython/releases)

QPython 3：[https ://github.com/qpython-android/qpython3/releases](https://github.com/qpython-android/qpython3/releases)

* * *

## 回答 #20

> 赞同：12
> 
> 时间：2014-10-06T14:59:14.867

没有看到这里发布的内容，但是由于 Necessitas，Qt 可以在 Android 上运行，因此您可以使用 Pyside 和 Qt 来做到这一点。

目前这似乎是一个相当大的组合，但最终可能是一条可行的路线......

[http://qt-project.org/wiki/PySide_for_Android_guide](http://qt-project.org/wiki/PySide_for_Android_guide)

* * *

## 回答 #21

> 赞同：12
> 
> 时间：2018-01-12T18:56:16.643

看看[BeeWare](https://beeware.org/)。它已经显着增长。它获得了 PSF（Python 软件基金会）教育补助金。

Beeware 的目标是能够使用 Python 为所有受支持的操作系统（包括 Android）创建本机应用程序。

官网：[蜂器](https://beeware.org/)

Github 仓库：[https ://github.com/beeware](https://github.com/beeware)

* * *

## 回答 #22

> 赞同：9
> 
> 时间：2015-05-18T01:56:41.157

另一种选择似乎是[pyqtdeploy](http://pyqt.sourceforge.net/Docs/pyqtdeploy/index.html)引用文档是：

> 一种工具，与 Qt 提供的其他工具结合使用，可以部署使用 Python v2.7 或 Python v3.3 或更高版本编写的 PyQt4 和 PyQt5 应用程序。它支持部署到桌面平台（Linux、Windows 和 OS X）和移动平台（iOS 和 Android）。

根据[通过 pyqtdeploy 和 Qt5 将 PyQt5 应用程序部署到 Android，](https://stackoverflow.com/questions/24239684/deploying-pyqt5-application-to-android-via-pyqtdeploy-and-qt5)它正在积极开发中，尽管很难找到工作 Android 应用程序的示例或有关如何将所有必需的库交叉编译到 Android 的教程。这是一个有趣的项目，但要记住！

* * *

## 回答 #23

> 赞同：5
> 
> 时间：2018-01-16T16:01:11.380

查看采用 react-native 概念并将其应用于 python 的[enaml-native 。](https://github.com/codelv/enaml-native)

它允许用户使用原生 Android 小部件构建应用程序，并提供 API 以使用来自 python 的 android 和 java 库。

它还与 android-studio 集成，并共享一些 react 不错的开发功能，例如代码重新加载和远程调试。

# windows - 在 cygwin/msys bash 下使用 `pkg-config` 作为命令行参数

> ID：101767
> 
> 赞同：4
> 
> 时间：2008-09-19T13:23:24.813
> 
> 标签：windows, bash, cygwin, makefile, pkg-config

我正在尝试使用 cygwin 作为 Windows 下的构建环境。我对 3rd 方包有一些依赖关系，例如 GTK+。

通常，当我在 Linux 下构建时，在我的 Makefile 中，我可以添加对 pkg-config 的调用作为 gcc 的参数，所以结果如下：

```
gcc example.c `pkg-config --libs --cflags gtk+-2.0` 

```

这在 Linux 下运行良好，但在 cygwin 中我得到：

```
：无效的论点
make: *** [示例] 错误 1

```

现在，我只是手动运行 pkg-config 并将输出粘贴到 Makefile 中，这真的很糟糕。有没有解决或解决此问题的好方法？

Make不是罪魁祸首。我可以复制并粘贴 make 用来调用 gcc 的命令行，它本身将运行 gcc，它会因“：无效参数”而停止。

我写了一个小测试程序来打印命令行参数：

```
for (i = 0; i < argc; i++)
    printf("'%s'\n", argv[i]); 
```

注意单引号。

```
$ pkg-config --libs gtk+-2.0
-Lc:/mingw/lib -lgtk-win32-2.0 -lgdk-win32-2.0 -latk-1.0 -lgdk_pixbuf-2.0 -lpang
owin32-1.0 -lgdi32 -lpangocairo-1.0 -lpango-1.0 -lcairo -lgobject-2.0 -lgmodule-
2.0 -lglib-2.0 -lintl

```

运行测试程序：

```
$ ./t `pkg-config --libs gtk+-2.0`
'C:\cygwin\home\smo\pvm\src\t.exe'
'-Lc:/mingw/lib'
'-lgtk-win32-2.0'
'-lgdk-win32-2.0'
'-latk-1.0'
'-lgdk_pixbuf-2.0'
'-lpangowin32-1.0'
'-lgdi32'
'-lpangocairo-1.0'
'-lpango-1.0'
'-lcairo'
'-lgobject-2.0'
'-lgmodule-2.0'
'-lglib-2.0'
'-lint'
'

```

注意最后一行的单引号。看起来 argc 比它应该的大一，并且 argv[argc - 1] 为空。在 Linux 上运行相同的测试没有这个结果。

也就是说，是否有某种方式可以让 Makefile 将 pkg-config 的结果存储到一个变量中，然后使用该变量，而不是使用反引号运算符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-19T23:38:58.717

> 也就是说，是否有某种方式可以让 Makefile 将 pkg-config 的结果存储到一个变量中，然后使用该变量，而不是使用反引号运算符？

GTK_LIBS = $(shell pkg-config --libs gtk+-2.0)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-19T14:13:16.067

你确定你使用的是 Cygwin 提供的 make 吗？采用

```
which make
make --version 
```

检查 - 这应该返回“/usr/bin/make”和“GNU Make 3.8 [...]”或类似的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-19T14:59:32.103

嗯……你试过了吗

```
make -d 
```

这会给你一些（很多）调试输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T23:58:03.087

我的猜测是 cygwin 的 gcc 无法处理 -Lc:/mingw/lib。尝试将其转换为 cygwin 路径。

```
GTK_LIBS = $(patsubst -Lc:/%,-L/cygdrive/c/%,$(shell pkg-config --libs gtk+-2.0)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-20T00:06:38.183

“t”输出末尾的单引号可能是 CRLF 翻译的产物。您的 pkg-config 是 cygwin 应用程序吗？我之前发布的 $(shell) 解决方案可能对此有所帮助，因为 GNU make 似乎相当容忍不同的行尾样式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-06-27T20:57:29.723

我有一个类似的问题，我在这里找到了一个修复：http: [//www.demexp.org/dokuwiki/en :demexp_build_on_windows](http://www.demexp.org/dokuwiki/en:demexp_build_on_windows)

> 注意将 /usr/bin 放在 PATH 中的 /cygwin/c/GTK/bin 之前，以便使用 /usr/bin/pkg-config。这是必需的，因为 GTK 的 pkg-config 后处理路径，通常将它们转换为它们的 Windows 绝对路径等效项。因此，cygwin 下的工具可能无法理解这些路径。

# php - PHP：返回 if () { } 的一部分

> ID：101777
> 
> 赞同：0
> 
> 时间：2008-09-19T13:25:41.283
> 
> 标签：php

假设我有这个代码：

```
if (md5($_POST[$foo['bar']]) == $somemd5) {
  doSomethingWith(md5($_POST[$foo['bar']]);
} 
```

我可以通过这样做来缩短它：

```
$value = md5($_POST[$foo['bar']];
if ($value == $somemd5) {
  doSomethingWith($value);
} 
```

但是是否有任何预设变量包含当前 if 的第一个或第二个条件？比如：

```
if (md5($_POST[$foo['bar']]) == $somemd5) {
  doSomethingWith($if1);
} 
```

可能是一种不必要的方式，但我只是想知道。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-19T13:28:58.280

不，但是由于赋值本身是一个表达式，您可以将赋值用作 if 语句的条件表达式。

```
if (($value = md5(..)) == $somemd5) { ... }

```

不过，一般来说，您会希望避免将赋值嵌入到条件表达式中：

*   代码更密集，因此更难阅读，嵌套的括号更多。
*   在同一个表达式中混合 = 和 == 只是要求它们混淆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T13:30:20.960

由于 if 只是使用表达式的结果，因此您无法访问其中的一部分。只需将函数的结果存储在变量中，就像您在第二个片段中所写的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-19T13:36:26.967

恕我直言，您的第二个示例（如果有人编辑问题，请在下面引用）就可以了。你可以用一些技巧来掩盖代码，但对我来说这是最好的。在更复杂的情况下，此建议可能不适用。

> $value = md5($_POST[foo['bar']];
> 
> if ($value) == $somemd5) {
> 
> ```
>  doSomethingWith($value); 
> ```
> 
> }

# ms-access - 操作或事件已被禁用模式阻止

> ID：101779
> 
> 赞同：13
> 
> 时间：2008-09-19T13:25:58.817
> 
> 标签：ms-access, ms-access-2007

我正在使用 Microsoft Access 2007 在两个 SQL Server 之间移动和处理一些数据。昨天一切正常，我能够运行查询、更新数据和删除数据。

今天我打开了 Access 数据库以完成我的数据迁移，现在当我尝试运行一些更新查询时收到以下消息：

> 操作或事件已被禁用模式阻止。

任何想法这是在说什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-19T13:32:57.507

试试看这是否有效：

1.  单击“外部数据”选项卡
2.  应该有一个安全警告，指出“数据库中的某些内容已被禁用”
3.  单击“选项”按钮
4.  选择“启用此内容”并单击“确定”按钮

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-11-06T17:25:19.707

否。转到数据库工具（适用于 2007）并单击消息栏上的复选标记。然后，在消息栏出现后，单击选项，然后单击启用。希望这可以帮助。

迪米特里

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2010-04-28T19:02:05.993

我用访问选项解决了这个问题。

转到 Office 按钮 --> 访问选项 --> 信任中心 --> 信任中心设置按钮 --> 消息栏

在右侧窗格中，我选择了单选按钮“当内容被阻止时在所有应用程序中显示消息栏”。

关闭访问，重新打开数据库并再次收到阻止内容的警告。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-11-22T13:10:20.497

从访问帮助：

**停止禁用模式阻止查询** 如果您尝试运行附加查询并且似乎没有任何反应，请检查访问状态栏以获取以下消息：

此操作或事件已被禁用模式阻止。

要阻止禁用模式阻止查询，您必须启用数据库内容。您可以使用消息栏中的选项按钮来启用查询。

启用追加查询 在消息栏中，单击选项。在 Microsoft Office 安全选项对话框中，单击启用此内容，然后单击确定。如果您没有看到消息栏，它可能是隐藏的。您可以显示它，除非它也被禁用。如果消息栏已被禁用，您可以启用它。

显示消息栏 如果消息栏已经可见，您可以跳过此步骤。

在“数据库工具”选项卡的“显示/隐藏”组中，选中“消息栏”复选框。如果消息栏复选框被禁用，您必须启用它。

启用消息栏 如果启用了消息栏复选框，则可以跳过此步骤。

单击 Microsoft Office 按钮 ，然后单击访问选项。在访问选项对话框的左窗格中，单击信任中心。在右窗格中的 Microsoft Office Access 信任中心下，单击信任中心设置。在信任中心对话框的左窗格中，单击消息栏。在右窗格中，单击在内容被阻止时在所有应用程序中显示消息栏，然后单击确定。关闭并重新打开数据库以应用更改的设置。注意当您启用附加查询时，您还启用了所有其他数据库内容。

有关 Access 安全性的详细信息，请参阅帮助保护 Access 2007 数据库一文。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-12-11T16:38:44.350

在功能区上，转到“显示/隐藏”下的数据库工具，确保选中消息栏（打开）然后单击灰色消息栏，单击数据库选项。从那里您可以修改您的安全选项。只需启用这些类型的内容。

你应该很好去追求这个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-10-02T11:59:58.590

您可能希望考虑对您的项目进行自我认证：

[自我认证、数字证书、数字签名](http://office.microsoft.com/en-us/access/HP010397921033.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-19T15:46:44.850

另一个问题是您的数据库可能位于“不受信任”的位置。转到信任中心设置并将您的数据库位置添加到受信任的位置列表。

# powershell - 使用 Powershell 递归文件系统

> ID：101783
> 
> 赞同：2
> 
> 时间：2008-09-19T13:26:31.420
> 
> 标签：powershell, nsis

任何人碰巧有一个示例脚本，用于使用 Powershell 在文件系统中递归给定目录？最终我想要做的是创建一个脚本，它会在给定目录的情况下为我生成 NSIS 文件列表。[与这里](http://blogs.oracle.com/duffblog/2006/12/dynamic_file_list_with_nsis.html)使用 BASH 脚本所做的非常相似。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-19T23:36:38.117

这是该 bash 脚本的“释义”端口。

```
$path = "c:\path\to\program"
$installFiles = "installfiles_list.txt"
$uninstFiles = "uninstfiles_list.txt"
$files = get-childitem -path $path -recurse | where-object { ! $_.psIsContainer } # won't include dirs
$filepath = $files | foreach-object { $_.FullName }
$filepath | set-content $installFiles -encoding ASCII
$filepath[($filepath.length-1)..0] | set-content $uninstFiles -encoding ASCII 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-30T01:15:41.433

正如[halr9000](https://stackoverflow.com/questions/101783/recursing-the-file-system-with-powershell#106413)演示的那样，您可以使用 cmdlet 的`-recurse`switch 参数`Get-ChildItem`来检索指定路径下的所有文件和目录。

看起来您在问题中链接到的 bash 脚本也保存了目录，所以这是一个简单的函数，可以在单个结果对象中返回文件和目录：

```
function Get-InstallFiles {
  param( [string]$path )

  $allItems = Get-ChildItem -path $path -recurse
  $directories = $allItems | ? { $_.PSIsContainer } | % { $_.FullName }
  $installFiles = $allItems | ? { -not $_.PSIsContainer } | % { $_.FullName }
  $uninstallFiles = $installFiles[-1..-$installFiles.Length]

  $result = New-Object PSObject
  $result | Add-Member NoteProperty Directories $directories
  $result | Add-Member NoteProperty InstallFiles $installFiles
  $result | Add-Member NoteProperty UninstallFiles $uninstallFiles
  return $result
} 
```

以下是如何使用它从 halr9000 的示例中创建相同的安装/卸载文本文件，包括卸载目录：

```
$files = Get-InstallFiles 'C:\some\directory'
$files.InstallFiles | Set-Content 'installfiles.txt'
$files.UninstallFiles + $files.Directories | Set-Content 'uninstallfiles.txt' 
```

# perl - 哪个 Perl 的持续集成框架？

> ID：101786
> 
> 赞同：21
> 
> 时间：2008-09-19T13:26:51.607
> 
> 标签：perl, testing, continuous-integration

Perl 最好的持续集成框架/项目是什么？为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-19T13:33:27.147

我在行动中看到的唯一一个是[Smolder](http://sourceforge.net/projects/smolder)（它用于[parrot](http://smolder.plusthree.com/app/public_projects/report_details/5562)）。它是基于 TAP 的，因此可以很好地与标准 perl 测试结构集成。另请参阅此[演示文稿](http://www.slideshare.net/mpeters/smolder-introduction)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-20T23:56:56.983

我已经研究了各种建议，但它们似乎都有些繁琐。

从那以后我找到了[Hudson](http://hudson-ci.org/)，从玩弄它，它看起来非常好，再加上[tap-to-junit-xml](http://jmason.org/software/scripts/tap-to-junit-xml.txt)，我花了大约 30 分钟来完成一个基本的构建。非常好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-19T13:39:42.327

查看[Test-AutoBuild](http://www.autobuild.org/)！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-19T14:28:00.447

可以进行[Cruise Control](http://cruisecontrol.sourceforge.net/)检出并运行您的 Perl 源代码。需要一点谷歌搜索才能拼凑出如何做到这一点，但我以前看过它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-19T14:26:42.417

我还没有测试过，但是[TAP::Harness::JUnit](http://search.cpan.org/~lkundrak/TAP-Harness-JUnit-0.23/lib/TAP/Harness/JUnit.pm)应该可以为您提供几乎所有的 CIS。我喜欢 Bamboo，因为它集成到我的其他 (Atlassian) 工具中。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-11-10T12:30:08.943

最近我对[BuildBot](http://buildbot.net)印象深刻——它支持很多源代码控制系统，有一个很好的 Web 界面和 IRC 机器人，开箱即用，非常容易配置，并且非常可扩展（在 Python 中）。

为我当前的项目配置/扩展它需要一些时间，我不得不跳过一些圈子才能让它与[TAP::Formatter::HTML](http://search.cpan.org/dist/TAP-Formatter-HTML)很好地配合使用。但现在它已经启动并运行了，我很高兴我花时间在它上面——它运行得很好。

我的愿望清单项目是统计收集和显示，以及 TAP 的集成。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-12T16:32:46.400

Pjam - 是一个新的基于[pinto](https://github.com/thaljef/Pinto)的 perl 应用程序构建服务器。这是 perl 特定的构建服务器，因为在后台使用**pinto**，它可以让您对构建进行非常控制：

*   比较构建
*   将项目回滚到给定的构建
*   查看下一个版本的更改
*   等等

它是 ruby​​ on rails 应用程序 - 在[https://github.com/melezhik/pjam-on-rails](https://github.com/melezhik/pjam-on-rails)上查看更多信息。作者。

# visual-studio-2008 - Visual Studio 2008，多监视器，“查找”窗口放置问题

> ID：101797
> 
> 赞同：4
> 
> 时间：2008-09-19T13:27:42.977
> 
> 标签：visual-studio-2008, multiple-monitors

（这里的另一个帖子让我想起了这个烦恼！这不是一个骗局！）

我将 VS2008 与多个显示器一起使用。我在一个上打开了 VS，在另一个上打开了我正在调试的应用程序、参考页面等。

问题是当我打开一个查找窗口（Ctrl-F 或单击“在文件中查找”图标）时，该窗口会在两个屏幕的中间打开 smack-dab：一半在一个屏幕上，一半在另一个屏幕上。每次。在那个位置它相当没用，所以我必须将它拖到其他地方。如何说服 Visual Studio 将窗口放在一个屏幕或另一个屏幕上？

我不在乎哪个，只是不要分开两者。

**跟进**

1.  移动窗口没有帮助。位置不记得了
2.  是的，它每次都会发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-02-04T18:52:48.183

对于 Visual Studio 2010，现在有一个补丁可以解决这个问题以及查找窗口大小和位置的其他问题：

VS10-KB2268081-x86

[http://code.msdn.microsoft.com/KB2268081/Release/ProjectReleases.aspx?ReleaseId=4766](http://code.msdn.microsoft.com/KB2268081/Release/ProjectReleases.aspx?ReleaseId=4766)

补丁说它将解决大小问题，但它似乎也解决了放置问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T13:37:15.670

如果每个显卡都有一个显示器，那么查找框应该出现在一个或另一个上。另一方面，如果您使用其中一个 Matrox 多头盒从一个视频输出驱动 2 个监视器，那么您的 PC 对这两个监视器一无所知，将它们视为一个并将对话居中（正如您已经描述）

要检查一下，最大化一个窗口 - 如果它最大化到一个监视器，那么我错了。如果它最大化跨越两个显示器，那么我是对的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T13:30:52.033

每次都这样打开吗？我的记得上次关闭位置的位置。（可能是 UltraMon 跳过它，不排除）

如果适合您的喜好，您还可以选择将其停靠在某个地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T13:35:17.577

Visual Studio 2008 应该记住您上次打开“查找和替换”窗口的位置，除非您的系统出现异常行为。我只是检查了我的行为，它似乎一直出现在我上次打开它的地方。

所以尝试移动它，然后关闭并重新打开，它是否仍然出现在错误的位置？

此外，您是否在一台显示器上最大化了视觉工作室，或者只是在两台显示器上都处于未最大化状态？您是否正在运行任何可能改变此行为的多显示器实用程序？

或者，您可以尝试内联搜索（在 VS2008 中默认为`Ctrl`+ `i`）...对于搜索一个文件，无论如何它通常会更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-06T13:35:56.050

我通常做的只是将查找对话框停靠在右侧，使用我的解决方案资源管理器 - 问题已修复 - 不是优雅但已修复。:-) 您必须右键单击“查找”对话框的标题栏以使其可停靠。

# visual-studio - 检查应用程序是否从 Visual Studio 调试会话中启动

> ID：101806
> 
> 赞同：36
> 
> 时间：2008-09-19T13:29:07.233
> 
> 标签：visual-studio, debugging

我正在开发一个安装系统范围键盘挂钩的应用程序。当我从 Visual Studio 内部运行调试构建时，我不想安装这个钩子（否则它会挂起工作室并最终挂起系统），我可以通过检查是否定义了 DEBUG 符号来避免这种情况。

但是，当我调试应用程序的*发布*版本时，有没有办法检测它已经从 Visual Studio 内部启动以避免同样的问题？不得不重新启动工作室/计算机非常烦人，只是因为我一直在处理发布版本，并且想要使用调试器修复一些错误，而忘记切换回调试版本。

目前我使用这样的东西来检查这种情况：

```
System.Diagnostics.Process currentProcess = System.Diagnostics.Process.GetCurrentProcess();
string moduleName = currentProcess.MainModule.ModuleName;
bool launchedFromStudio = moduleName.Contains(".vshost"); 
```

我将其称为“蛮力方式”，它适用于我的设置，但我想知道是否有另一种（更好的）方式来检测这种情况。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2008-09-19T13:29:53.800

尝试：[`System.Diagnostics.Debugger.IsAttached`](http://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.isattached.aspx)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-09-19T13:43:15.313

对于那些使用 Windows API 的人，有一个函数可以让您查看是否存在任何调试器，使用：

```
if( IsDebuggerPresent() )
{
    ...
} 
```

参考：http: [//msdn.microsoft.com/en-us/library/ms680345.aspx](http://msdn.microsoft.com/en-us/library/ms680345.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-24T03:47:49.833

测试当前进程的模块名称是否包含字符串“.vshost”是我发现确定应用程序是否在 VS IDE 中运行的最佳方法。

使用**System.Diagnostics.Debugger.IsAttached**属性也可以，但它不允许您区分是通过 VS IDE 的***运行***命令运行 EXE 还是直接运行调试版本（例如，使用 Windows 资源管理器或快捷方式) 然后使用 VS IDE 附加到它。

您会看到我曾经遇到过（COM 相关）*数据执行保护*错误的问题，该错误要求我运行一个*构建后事件*，该事件将在 VS 生成的 EXE 上使用**/NXCOMPAT:NO**参数执行**editbin.exe 。**

 *****由于某种原因，如果您只是按F5***并运行程序，则 EXE 没有被修改，因此如果从 VS IDE 中运行违反 DEP 的代码，则会发生**AccessViolationExceptions - 这使得调试变得非常困难。**但是，我发现如果我通过快捷方式运行生成的 EXE，然后附加 VS IDE 调试器，我就可以在不发生 AccessViolationExceptions 的情况下测试我的代码。

所以现在我创建了一个使用“vshost”方法的函数，如果我只是在 VS IDE 中进行日常编程，我可以使用它来警告或阻止某些代码运行。

这可以防止那些讨厌的 AccessViolationExceptions 被引发，从而在我无意中尝试运行我知道会导致我悲伤的东西时致命地使我的应用程序崩溃。**

# pretty-print - 寻找比 GNU indent 更灵活的工具

> ID：101818
> 
> 赞同：9
> 
> 时间：2008-09-19T13:30:21.707
> 
> 标签：pretty-print, indentation

当我对我的源代码使用各种我想要的选项运行缩进时，它会做我想要的，但也会混淆 *s 在指针类型中的位置：

```
 -int send_pkt(tpkt_t* pkt, void* opt_data);
  -void dump(tpkt_t* bp);
  +int send_pkt(tpkt_t * pkt, void *opt_data);
  +void dump(tpkt * bp); 
```

我知道我将 *s 放置在类型而不是变量旁边是非常规的，但我怎样才能缩进让它们不理会？还是有其他工具可以满足我的要求？我查看了手册页、信息页，并访问了谷歌建议的六个页面，但我找不到执行此操作的选项。

我尝试了艺术风格（又名 AStyle），但似乎无法弄清楚如何使其缩进为 4 的倍数，但每 8 为一个制表符。那是：

```
if ( ... ) {
<4spaces>if ( ... ) {
<tab>...some code here...
<4spaces>}
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-09-19T13:32:49.627

**去壳**

Uncrustify 有几个关于如何缩进文件的选项。

从配置文件：

```
indent_with_tabs                           
  缩进代码时如何使用制表符  
  0=只有空格  
  1=缩进制表符，对齐空格  
  2=缩进并与制表符对齐
```

你可以在[这里](http://uncrustify.sourceforge.net/)找到它。

**BCPP**
来自网站：*“bcpp 缩进 C/C++ 源程序，用空格替换制表符或反之。与缩进不同，它（设计上）不尝试包装长语句。”* [在这里](http://invisible-island.net/bcpp/)
找到它。

**UniversalIndentGUI**
这是一个支持多种美化器/格式化器的工具。它可能会引导您找到更多选择。[在这里](http://universalindent.sourceforge.net/)
找到它。

**艺术风格**
您可以尝试[使用艺术风格（即 AStyle）](http://astyle.sourceforge.net/)代替（即使它不能满足您的需求，我会将它留在这里以防其他人发现它有用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-19T13:39:14.120

修改代码并更改其行为。毕竟是 GNU。;-)

由于这可能不是您想要的答案，这里有另一个链接：[http](http://www.fnal.gov/docs/working-groups/c++wg/indenting.html) ://www.fnal.gov/docs/working-groups/c++wg/indenting.html 。

# html - XHTML 合规性毫无意义吗？

> ID：101822
> 
> 赞同：20
> 
> 时间：2008-09-19T13:30:43.890
> 
> 标签：html, xhtml, standards-compliance

我现在正在构建一个站点，到目前为止，我已经痛苦地强迫所有内容都符合要求，并且它在浏览器中看起来几乎相同。但是，我开始实现一些第三方/免费的 javascript，它们执行诸如添加属性之类的操作（例如 order=2）。我可以解决这个问题，但这很痛苦，而且我开始失去确保一切都有效的原则。真的，解决这样的事情有什么意义吗？我得到了 Firefox 的 HTMLValidator 插件，并且查看了大多数主要网站（包括这个、谷歌等），它们不是有效的 XHTML 或 HTML。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-19T13:35:45.207

验证有助于确定事情何时未能达到您可能同意的标准。如果您有意使用专门添加验证标准之外的内容的工具，显然这不会违反您的个人标准协议。

如果您的老板或客户认为一切都应该重新开绿灯，那么这种讨论会变得更加困难，因为您必须向他们解释上述内容并说服他们不仅仅是您懒惰。

也就是说，请确保这不仅仅是您懒惰的情况。虽然验证器可能会烦人地不断提出第三方属性的每个实例，但这并不会使他们提到的其他验证错误无效（ha）。通常值得仔细检查一下您的工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-19T13:41:24.457

标准合规性是关于增加您的页面在您未测试的浏览器中工作的机会。这包括屏幕阅读器、您测试的浏览器的下一次更新，以及您测试的浏览器，但用户以意想不到的方式配置了这些浏览器。

验证并不能保证任何事情，因为您的页面可能会验证但仍然足够模糊，以至于有一天它在某些浏览器上的行为方式不会像您希望的那样。

但是，如果您的页面确实通过了验证，那么您至少有 XHTML 规范的力量来说明它应该如何表现。如果它没有通过验证，那么你所拥有的只是浏览器编写者之间的一堆非正式约定。

编写有效的 HTML 3 可能比编写无效的 XHTML 更好，如果您想做的事情在一个中允许但在另一个中不允许。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-19T13:38:34.323

如果您打算将 XHTML 用作 XML，那么让您的页面有效且格式良好是值得的。否则，您可能想要普通的旧语义 HTML。无论哪种方式，您的受众的需求都超过了验证者的需求。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-19T13:33:50.093

请记住，XHTML 标记在大多数浏览器中的呈现方式与没有它时不同。DOCTYPE 属性确定浏览器呈现的模式，并规定什么是允许的，什么是不允许的。如果您偏离 XHTML 合规性，请务必在所有浏览器中重新测试。

就个人而言，我尽可能坚持最新标准，但你必须权衡时间/金钱与合规性，这取决于大多数人的个人喜好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-19T14:19:27.800

我还没有遇到过添加非标准属性导致任何浏览器出现渲染问题的情况。

不要试图绕过那些非标准属性。验证器作为工具可以方便地仔细检查您的代码是否存在意外错误，但众所周知，即使是完全有效的 xhtml 也不会总是在浏览器中一致地呈现。很多时候，设计决策要求我们使用特定于浏览器的（和非标准的）hack 来实现效果。这就是 Web 开发人员的生活，许多技术驱动的网站（谷歌、雅虎等）无法验证。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-11-11T10:26:54.310

就浏览器而言，XHTML 合规性毫无意义：

1.  浏览器没有 XHTML 解析器。它们具有非特定于版本的、与 Web 兼容的 HTML 解析器，围绕[http://www.w3.org/1999/xhtml](http://www.w3.org/1999/xhtml)命名空间构建 DOM。

2.  一些具有 XML 解析器的浏览器可以将作为 application/xhtml+xml 的 XHTML 标记视为 XML。这将采用 XML 并为[http://www.w3.org/1999/xhtml](http://www.w3.org/1999/xhtml)命名空间中的元素提供默认的 HTML 样式和行为。但是，就解析而言，它与 XHTML 无关。遵循 XML 解析规则，而不是某些 XHTML DTD 的规则。

因此，当您使用 XHTML 标记时，您是在向浏览器提供一些陌生的东西，并查看它是否如您所愿。问题是，您可以使用任何标记来执行此操作。如果它按预期呈现并生成正确的 DOM，那么你做得很好。您只需要确保记住 DOCTYPE 切换并确保您不依赖浏览器错误（因此在没有错误的浏览器中事情不会崩溃）。

XHTML 合规性的好处是语法检查（通过验证）以查看标记是否格式正确。这有助于避免解析错误。当然，这也可以用 HTML 完成，所以在这种情况下 XHTML 没有什么特别之处。无论哪种方式，您仍然需要在浏览器中进行测试，并希望浏览器供应商能够制作出能够接受各种废话的出色 HTML 解析器。

试图符合浏览器的期望并不是没有意义的。HTML5 帮助了这个大时代。而且，说到 HTML5，您可以随心所欲地定义自定义属性。只需在它们前面加上 data-，就像在 <p data-order="This is a valid, custom attribute.">test</p> 中一样。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-19T13:35:51.243

成为 HTML Valid 通常对您和浏览器渲染引擎都有帮助。浏览器必须处理的怪癖越少，它们就越能专注于添加新功能。你越严格，你花时间思考为什么这个 f@#cking 专有标签在其他浏览器中不起作用的时间就越少。

另一方面，恕我直言，XHTML 更没有意义，除非您打算将它集成到某个 XML 文档中。由于 IE 仍然无法识别它，因此坚持使用它是毫无用处的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-19T13:53:41.997

我认为编写“有效代码”很重要，仅仅是因为您正在通过遵循规则来树立榜样。如果每个开发人员都为 Fx、Safari 和 Opera 编写过代码，我认为 IE 必须比版本 8 更早地“开始遵循规则”。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-19T13:51:59.283

我大部分时间都在尝试编写兼容的代码，在所有情况下权衡时间/成本与观众的需求，除了一种。如果您的代码需要符合 503 标准，那么编写符合标准的代码符合您的最大利益和受众的利益。我遇到了一堆屏幕阅读器，当代码稍微偏离时它们就会爆炸。

就像大多数海报所说的那样，这真的是关于你的观众需要什么。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-19T14:26:40.870

无论如何，这并不是毫无意义的，但是有很多理由可以打破它。在 CSS 开发的初始阶段，如果您的标记有效，它对于诊断浏览器问题非常有用。除此之外，如果你想做某事并且你觉得最合适的方法是打破验证，那通常是可以的。

使用自定义属性的另一种方法是使用 'rel' 属性，例如，请参阅[Litebox](http://www.doknowevil.net/litebox/)（及其亲属）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-11-20T15:04:13.647

当然，您总是可以继续以您想要的方式编写它，并确保它至少可以工作。当然，我们已经经历过这种心态，也见证了它的输出，**Internet Explorer 6**。

我非常喜欢[Mike Davidson 的面向标准的开发方法](http://www.mikeindustries.com/blog/archive/2004/06/march-to-your-own-standard)。

> 仅仅因为您可以验证您的代码并不意味着您比其他任何人都好。哎呀，这甚至不一定意味着您编写的代码比其他任何人都好。可以完全在 Flash 中编写银行应用程序的人是比您更好的编码器。可以将第三方代码集成到复杂的发布环境中的人是比你更好的程序员。将验证视为使用图片完美语法；它可以帮助您传达您的想法，并且是良好教育的标志，但它并不像您想到并随后交流的想法和概念那么重要。我曾经为之工作过的最有魅力也可能是最聪明的人来自南方，并且经常使用“不是”这个词。这并没有让他变得更聪明，事实上，这让他更令人难忘。

很多人误解这篇文章的意思是我们不应该按照标准进行编码。显然，我们应该，但这甚至不应该被真正考​​虑。*验证大军*总是会谴责那些不验证的，但验证的意义远不止有效代码。

所以，不要失去你的原则，但请记住，如果你遵循标准，你在未来陷入深层次问题的可能性就会大大降低。您尝试提供的内容远比其显示方式重要得多。

# c# - 在 C# 中使用一对（三重等）值作为一个值的最佳方法是什么？

> ID：101825
> 
> 赞同：20
> 
> 时间：2008-09-19T13:31:14.343
> 
> 标签：c#, generics, data-structures, tuples

也就是说，我想要一个值的元组。

我心目中的用例：

```
Dictionary<Pair<string, int>, object> 
```

或者

```
Dictionary<Triple<string, int, int>, object> 
```

是否有内置类型，如 Pair 或 Triple？或者实现它的最佳方式是什么？

**更新**答案中描述了一些通用的元组实现，但是对于用作字典中的键的元组，您应该额外验证哈希码的正确计算。在另一个[问题](https://stackoverflow.com/questions/102690/how-does-c-figure-out-the-hash-code-for-an-object)中对此有更多信息。

**更新 2**我想还值得提醒的是，当您使用某个值作为字典中的键时，它应该是不可变的。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-09-19T15:20:48.790

## **内置类**

在某些特定情况下，.net 框架已经提供了您可以利用的类似元组的类。

***对子和三人组***

通用 **[System.Collections.Generic.KeyValuePair](http://msdn.microsoft.com/en-us/library/5tbh8a42.aspx)** 类可用作临时对实现。这是通用 Dictionary 内部使用的类。

或者，您可以使用 **[System.Collections.DictionaryEntry](http://msdn.microsoft.com/en-us/library/system.collections.dictionaryentry.aspx)** 结构，该结构充当基本对并且具有在 mscorlib 中可用的优势。然而，不利的一面是这种结构不是强类型的。

Pairs 和 Triples 也以 **[System.Web.UI.Pair](http://msdn.microsoft.com/en-us/library/system.web.ui.pair.aspx)**和 **[System.Web.UI.Triplet](http://msdn.microsoft.com/en-us/library/system.web.ui.triplet.aspx)**类的形式提供。尽管这些类存在于*System.Web*程序集中，但它们可能非常适合 winforms 开发。但是，这些类也不是强类型的，并且可能不适合某些场景，例如通用框架或库。

***高阶元组***

对于高阶元组，除了滚动您自己的类之外，可能没有简单的解决方案。

如果您已安装 [F# 语言](http://research.microsoft.com/fsharp/fsharp.aspx)，则*可以引用 FSharp.Core.dll*，其中包含一组通用不可变 **[Microsoft.Fsharp.Core.Tuple](http://research.microsoft.com/fsharp/manual/export-interop.aspx?0sr=a#Tuples)**类，直至通用六元组。但是，即使可以重新分发未修改的*FSharp.Code.dll* ，F# 也是一种研究语言，并且还在进行中，因此该解决方案可能仅在学术界感兴趣。

如果您不想创建自己的类并且不喜欢引用 F# 库，那么一个巧妙的技巧可能是扩展通用 KeyValuePair 类，以便 Value 成员本身就是一个嵌套的 KeyValuePair。

例如，以下代码说明了如何利用 KeyValuePair 来创建三元组：

```
int id = 33;
string description = "This is a custom solution";
DateTime created = DateTime.Now;

KeyValuePair<int, KeyValuePair<string, DateTime>> triple =
   new KeyValuePair<int, KeyValuePair<string, DateTime>>();
triple.Key = id;
triple.Value.Key = description;
triple.Value.Value = created; 
```

这允许根据需要将类扩展到任意级别。

```
KeyValuePair<KeyValuePair<KeyValuePair<string, string>, string>, string> quadruple =
    new KeyValuePair<KeyValuePair<KeyValuePair<string, string>, string>, string>();
KeyValuePair<KeyValuePair<KeyValuePair<KeyValuePair<string, string>, string>, string>, string> quintuple =
    new KeyValuePair<KeyValuePair<KeyValuePair<KeyValuePair<string, string>, string>, string>, string>(); 
```

## **自己动手**

在其他情况下，您可能需要求助于滚动您自己的元组类，这并不难。

您可以像这样创建简单的结构：

```
struct Pair<T, R>
{
    private T first_;
    private R second_;

    public T First
    {
        get { return first_; }
        set { first_ = value; }
    }

    public R Second
    {
        get { return second_; }
        set { second_ = value; }
    }
} 
```

## **框架和库**

这个问题之前已经解决过，并且确实存在通用框架。下面是一个这样的框架的链接：

*   [Michael L Perry](https://stackoverflow.com/users/7668/michael-l-perry)的 [元组库](http://www.adventuresinsoftware.com/generics/)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-09-19T13:35:41.227

```
public struct Pair<T1, T2>
{
    public T1 First;
    public T2 Second;
}

public struct Triple<T1, T2, T3>
{
    public T1 First;
    public T2 Second;
    public T3 Third;
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2010-08-15T00:49:31.157

快进到 2010 年，.NET 4.0 现在支持[任意 n 的 n 元组](http://msdn.microsoft.com/en-us/library/dd383325.aspx)。这些元组按预期实现了结构相等和比较。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-09-19T13:35:18.047

Pair 和 Triplet 是 .net 中的现有类，请参阅 msdn：

[三胞胎](http://msdn.microsoft.com/en-us/library/system.web.ui.triplet.aspx)

[一对](http://msdn.microsoft.com/en-us/library/system.web.ui.pair.aspx)

我最近在玩视图状态解码时遇到了它们

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-09-19T13:38:26.557

我在 C# 中实现了一个元组库。访问[http://www.adventuresinsoftware.com/generics/](http://www.adventuresinsoftware.com/generics/)并单击“元组”链接。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-19T13:33:45.427

我通常只是创建自己的结构，包含值。它通常更具可读性；）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-19T13:44:17.773

**如果您不想创建自己的类，**KeyValuePair是最好的扩展类。****

 **```
int id = 33;
string description = "This is a custom solution";
DateTime created = DateTime.Now;

KeyValuePair<int, KeyValuePair<string, DateTime>> triple =
   new KeyValuePair<int, KeyValuePair<string, DateTime>>();
triple.Key = id;
triple.Value.Key = description;
triple.Value.Value = created; 
```

您可以将其扩展到任意多个级别。

```
KeyValuePair<KeyValuePair<KeyValuePair<string, string>, string, string> quadruple =
   new KeyValuePair<KeyValuePair<KeyValuePair<string, string>, string, string>(); 
```

**注意**：类**Triplet**和**Pair**存在于**System.Web** -dll 中，因此它不太适合 ASP.NET 以外的其他解决方案。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-19T16:14:22.250

您可以相对轻松地创建自己的元组类，唯一可能会变得混乱的是您的相等性和哈希码覆盖（如果您要在字典中使用它们，这是必不可少的）。

需要注意的是，.Net 自己的`KeyValuePair<TKey,TValue>`struct 具有[相对较慢的相等和 hashcode 方法](http://bizvprog.blogspot.com/2008/06/c-value-types-and-equality.html)。

假设这不是您关心的问题，仍然存在代码最终难以弄清楚的问题：

```
public Tuple<int, string, int> GetSomething() 
{
    //do stuff to get your multi-value return
}

//then call it:
var retVal = GetSomething();

//problem is what does this mean?
retVal.Item1 / retVal.Item3; 
//what are item 1 and 3? 
```

在大多数情况下，我发现创建特定的记录类更容易（至少在 C#4 使这个编译器具有魔力之前）

```
class CustomRetVal {
    int CurrentIndex { get; set; }
    string Message { get; set; }
    int CurrentTotal { get; set; }
}

var retVal = GetSomething();

//get % progress
retVal.CurrentIndex / retVal.CurrentTotal; 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2010-04-01T17:59:14.310

尚未提及一种简单的解决方案。您也可以只使用`List<T>`. 它是内置的，高效且易于使用。诚然，起初它看起来有点奇怪，但它完美地完成了它的工作，尤其是对于更多的元素。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-11-02T16:50:11.303

NGenerics - 流行的 .Net 算法和数据结构库，最近在集合中引入了**不可变**数据结构。

第一个实现的不可变类是**对**和**元组**类。代码很好地覆盖了测试并且非常优雅。你可以[在这里查看](http://code.google.com/p/ngenerics/source/browse/branches/immutable/Source/NGenerics/DataStructures/Immutable/)。他们目前正在研究其他不可变的替代方案，他们应该很快就会准备好。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-19T13:34:45.333

没有内置插件，但创建 Pair<T,R> 类很简单。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-19T13:35:47.857

是的，有 System.Web.UI.Pair 和 System.Web.UI.Triplet （它有一个重载的创建者来处理对类型的行为！）

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-19T13:35:49.590

对于第一种情况，我通常使用

```
Dictionary<KeyValuePair<string, int>, object> 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-19T13:35:55.003

没有内置的类。您可以使用[KeyValuePair](http://msdn.microsoft.com/en-us/library/5tbh8a42.aspx)或推出自己的实现。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-19T13:36:22.207

您可以使用 System.Collections.Generic.KeyValuePair 作为您的 Pair 实现。

或者你可以自己实现，它们并不难：

```
public class Triple<T, U, V>
{
  public T First {get;set;}
  public U Second {get;set;}
  public V Third {get;set;}
} 
```

当然，你可能有一天会遇到 Triple(string, int, int) 与 Triple(int, int, string) 不兼容的问题。也许改用 System.Xml.Linq.XElement 。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-19T13:42:58.887

F# 中还有 Tuple<> 类型；您只需要引用 FSharp.Core.dll。**

# mysql - Oracle RDBMS 是否比 MySQL RDBMS 更稳定、更安全、更健壮等？

> ID：101834
> 
> 赞同：8
> 
> 时间：2008-09-19T13:32:30.937
> 
> 标签：mysql, database, oracle, comparison, rdbms

作为程序员，我曾在各种系统上工作过，有些使用 Oracle，有些使用 MySQL。我经常听到人们说 Oracle 更稳定、更健壮、更安全。是这样吗？

如果是这样，以什么方式，为什么？

出于这个问题的目的，考虑一个中小型生产数据库，可能有 500,000 条左右的记录。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-09-19T13:43:58.180

是的。Oracle 是企业级软件。

我不确定它是否真的比 mysql 更稳定，我没有太多使用 mysql，但我不记得我有 mysql 崩溃。我遇到过 oracle 崩溃，但是当它发生时，它给了我比我可能想要的更多关于它为什么崩溃的信息，并且 Oracle 支持总是在那里提供帮助（收费）。

它非常非常健壮，Oracle DB 在破坏您的数据之前几乎会尽其所能，我让 mysql 服务器在磁盘空间不足时会做一些非常奇怪的事情，Oracle 只会暂停所有事务，如果可以的话，最终会关闭t 写它需要的文件。我从来没有在 oracle 中丢失过数据，即使我做了一些愚蠢的事情，比如忘记 where 子句并更新每一行而不是单行，很容易让数据库恢复到搞砸之前的状态。

不确定安全性，当然 Oracle 为您提供了很多关于如何连接到数据库和进行身份验证的选项。它提供了很多关于哪些用户可以访问什么等的选项。但与大多数事情一样，如果你想认真对待安全性，那么你需要专家来做。如果甲骨文没有获得正确的安全性，他们肯定会失去更多。但是，与所有事物一样，也存在漏洞。

如果不出意外，请考虑一下...当 Oracle 搞砸时，他们的客户为每个 CPU 支付 4 万美元（如果他们是傻瓜并支付标价）许可证 + 年度维护费。这给了他们一个非常强大的密集度确保客户对产品感到满意。

对于小型数据库，我会在 mysql 之前认真推荐 Oracle XE。它具有 mysql（免费）的重要特性，它非常易于安装，带有漂亮的 Web 界面和应用程序框架（Application Express），如果您的 DB 愿意在单个 cpu、1gb ram 和 4gb 数据上运行，那么 XE恕我直言，这是要走的路。

Mysql 有它的用途，很多人已经证明你可以用它构建伟大的东西，但它在功能方面远远落后于 oracle（以及 SQL Server 和 DB2）......但是，它也是免费且非常容易学习的，这对很多人来说是最重要的功能。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-19T20:08:48.787

当磁盘空间不足时，我让 Oracle 创建了一个损坏的数据库。如果没有熟练的 DBA 握着你的手，它很难调试、使用大量资源并且很难使用。当我在某个场合安装时，Oracle 甚至替换了 /usr/bin/ 中的系统二进制文件（例如 gcc）。

另一方面，与 PostgreSQL 一起工作要愉快得多。如果您习惯使用开源 *nix 系统，它会提供可读的错误消息并以更易于理解的方式运行。设置复制非常容易，从而使您的数据相当安全。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-10-04T09:25:23.850

一个 500K 的记录数据库可能可以在您的手机上运行。说真的，它是如此之小，以至于 Oracle XE 和 MySQL 都足以管理它。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-29T16:33:45.107

*   对于小型数据库（几百万条记录），Oracle 是矫枉过正
*   您需要有经验的 DBA 来正确安装和管理 Oracle 系统
*   Oracle 有更大的“基本开销”，即您需要更强大的机器来运行 Oracle
*   Oracle 的“开箱即用”体验曾经很糟糕（我已经很多年没有安装过 oracle 系统；不知道它目前的行为如何），而 mysql 非常好

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-10-06T19:35:22.527

Oracle 是一头真正需要 DBA 知识的野兽。我同意那些说 50 万条记录不算什么的人的观点。如果它是简单的数字/文本数据，那么它不值得 Oracle 的复杂性。

另一方面，Oracle 在处理 blob 时非常高效。如果您的每条记录都是一个 100MB 的二进制文件，那么您需要一大笔钱才能在 Oracle 上运行它（我建议使用具有良好 SAN 的 3 节点 RAC 集群）。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-19T13:46:02.090

我有一个项目将数据（约 1000 万行，1.2GB 数据）发送到三个不同的数据库，2 个 Oracle 和 1 个 MySQL。我在使用这两个系统时都没有遇到任何问题，也没有看到任何一方的任何主要优势。如果您所在的地方已经将 Oracle 用于其他项目，那么添加一个新数据库应该不是什么大问题，但是如果您正在考虑设置一个新的数据库服务器并且没有任何内容已经到位，MySQL 将为您省钱。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-19T19:57:57.157

Oracle Enterprise 假定有一个 Enterprise 支持它，即真正的 Oracle DBA。一个新手（但有能力）的 DBA 应该能够比 Oracle 更容易地保护 MySQL，因为 Oracle 本质上更复杂。当然，Oracle 拥有 MySQL 当前功能之外的企业监控工具（据我所知），但 DBA 需要能够使用它们才能有效。

您所描述的这么小的数据库可以由大多数任何东西处理，所以我看不到甲骨文会得到保证，除非基础设施已经到位。两者都有复制、事务和热备份，因此两者都可以很好地发挥作用。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-19T13:49:25.453

答案**完全**取决于您如何配置每个 DBMS。两者都能够多次处理 500,000 条记录。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-19T13:44:21.127

甲骨文要强大得多。它的许多功能只能在更大的企业或高性能环境中寻找。它们主要是与扩展、复制和负载平衡有关的功能。

对于小型数据库，请考虑 SQLite。对于中小型，请查看 MySQL 或 PostgreSQL。对于最大的，请查看 MSSQL、Oracle、DB2 等。

编辑：在阅读了另一个答案后，我会补充一点，如果您的数据真的*非常*重要，您将需要一个复制的设置，并且您可能希望向大型数据库提供商之一寻求类似的东西。

如果您可以牺牲潜在的（**极其罕见的**）数据丢失并希望提高性能，请查看一些更轻量级的选项。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-02-12T00:56:31.477

甲骨文确实是一头野兽。

Oracle 被广泛认为是最安全的主要数据库也是事实。

问题是甲骨文的开发人员似乎没有掌握关键的安全概念。Oracle 是市场上最不安全的数据库服务器（根据独立安全研究人员的说法）

[http://itic-corp.com/blog/2010/09/sql-server-most-secure-database-oracle-least-secure-database-since-2002/](http://itic-corp.com/blog/2010/09/sql-server-most-secure-database-oracle-least-secure-database-since-2002/)

根据这些研究人员的说法，MySQL 实际上是相当安全的。我对可用的工具了解不多。这项研究最有趣的是，那些将 Microsoft SQL 服务器称为玩具的人，他们的数据会被 MSSQL 阻止的攻击者窃取，因为他们使用的是具有糟糕安全模型的野兽，而不是“玩具”。安全的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-24T13:36:44.757

我将 Oracle/SQL Server/MySql 用于不同的应用程序和站点

在许多不同的领域，没有数据库能击败 Oracle，但它是最需要管理知识的数据库。

如果你发现了 oracle 的问题，即使是优秀的 DBA 人员，也可能会花几次时间来解决它。

您可以使用 MySql 处理 500K 或数百万条记录，它比其他数据库更轻巧，并且需要零管理工作，并且不会占用您大量的计算机资源，我一直在我的开发 PC 中使用它，从来没有遇到过严重的问题。

如果您不需要 Oracle 的高级功能，我会要求您使用 MySql 或 PostgreSQL。

# java - 在eclipse中，如何在大纲视图中显示继承的成员？

> ID：101849
> 
> 赞同：30
> 
> 时间：2008-09-19T13:34:52.227
> 
> 标签：java, eclipse, ide

选择 java 类型时在编辑器中键入 Ctrl+O 两次会弹出一个大纲上下文对话框，其中显示成员 && 继承的成员。我怎样才能在主大纲视图中有这个？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-09-19T13:44:07.633

右键单击-> 打开类型层次结构？

它没有在同一窗格中显示它，但我认为您可以看到您要查找的内容。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2011-09-28T07:16:16.967

目前（Eclipse 3.6 Helios）在大纲视图中是不可能的，但您可以通过“类型层次结构”视图实现类似的功能：

1.  假设您已经开设了一个要检查的课程
2.  按 F4 - 这将打开该类的“类型层次结构”视图
3.  “类型层次结构”视图分为两部分 - 上一层包含层次结构本身，下一层包含所选类的成员
4.  在下部视图中，您可以将过滤器设置为还显示所有继承的成员（带有提示“显示所有继承的成员”的按钮）

我个人认为即使在大纲视图中也应该可以使用相同的过滤器，但至少它在某个地方；）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2011-05-06T19:47:12.057

已经有一个功能请求，但是没有足够的票数......

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=8625](https://bugs.eclipse.org/bugs/show_bug.cgi?id=8625)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-09-19T13:42:39.167

看起来你做不到。

也许您应该将其作为改进请求提交。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-07-08T09:22:27.830

你应该试试**Type Hierarchy**。
右键单击类并打开类型层次结构。**显示所有继承的成员**
有很多选项。 它可以在**Type Hierarchy Widget 的情人部分**找到。

# php - PHP：GET-data 自动被声明为变量

> ID：101850
> 
> 赞同：9
> 
> 时间：2008-09-19T13:34:53.757
> 
> 标签：php, url, get

拿这个代码：

```
<?php
if (isset($_POST['action']) && !empty($_POST['action'])) {
    $action = $_POST['action'];
}

if ($action) {
    echo $action;
}
else { 
    echo 'No variable';
}
?> 
```

然后使用 ?action=test 访问文件有什么方法可以防止 $action 被 GET 自动声明？当然除了添加

```
&& !isset($_GET['action']) 
```

为什么要为我声明变量？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-09-19T13:38:08.460

检查您的 php.ini 中的`register_globals`设置。它可能已打开，您想要关闭它。

> 为什么要为我声明变量？

[你没有。](http://us3.php.net/manual/en/security.globals.php)这是一个可怕的安全风险。它使环境、GET、POST、Cookie 和服务器变量成为全局变量[（PHP 手册）](http://us3.php.net/manual/en/ini.core.php#ini.register-globals)。这些是 PHP 中的少数[保留变量](http://us.php.net/manual/en/reserved.variables.php)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-19T13:41:13.553

看起来`register_globals`你的 php.ini 是罪魁祸首。你应该把它关掉。安装它也是一个巨大的安全风险。

如果您在共享主机上并且无法修改 php.ini，您可以使用[ini_set()](http://php.net/ini_set)关闭 register_globals。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-19T13:41:43.380

如果我理解您的问题，请将 register_globals 设置为关闭。见[http://us2.php.net/manual/en/language.variables.predefined.php](http://us2.php.net/manual/en/language.variables.predefined.php)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-19T18:34:36.360

如果您无权访问*php.ini*，`ini_set('register_globals', false)`则 php 脚本中的 a 将不起作用（已声明变量） An *.htacces*具有：

```
php_flag register_globals Off 
```

有时可以提供帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-19T13:42:29.447

您可以通过将 PHP.INI 中的 PHP 日志级别更改为来测试是否所有变量都已正确声明

```
error_reporting  =  E_ALL 
```

您的代码片段现在应该生成一个通知。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-19T18:25:21.950

在 php 历史的某个时刻，他们做出了有争议的决定，即默认关闭 register_globals，因为这是一个巨大的安全隐患。它使任何人都有可能在您的代码中注入变量，从而产生不可想象的后果！这个“特性”甚至在 php6 中被删除了

如果您发现它已开启，请联系您的管理员将其关闭。

# ruby-on-rails - 类似 Rails 的数据库迁移？

> ID：101868
> 
> 赞同：18
> 
> 时间：2008-09-19T13:36:28.807
> 
> 标签：ruby-on-rails, ruby, database, refactoring, migration

是否有任何易于安装/使用（在 unix 上）的数据库迁移工具，例如 Rails Migrations？我真的很喜欢这个想法，但是纯粹为了管理我的数据库迁移而安装 ruby​​/rails 似乎有点过头了。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-09-19T19:41:57.757

只需使用 ActiveRecord 和一个简单的 Rakefile。例如，如果您将迁移放在一个`db/migrate`目录中并且有一个`database.yml`包含您的 db 配置的文件，那么这个简单的 Rakefile 应该可以工作：

**耙文件：**

```
require 'active_record'
require 'yaml'

desc "Migrate the database through scripts in db/migrate. Target specific version with VERSION=x"
task :migrate => :environment do
  ActiveRecord::Migrator.migrate('db/migrate', ENV["VERSION"] ? ENV["VERSION"].to_i : nil)
end

task :environment do
  ActiveRecord::Base.establish_connection(YAML::load(File.open('database.yml')))
  ActiveRecord::Base.logger = Logger.new(STDOUT)
end 
```

**数据库.yml**：

```
adapter: mysql
encoding: utf8
database: test_database
username: root
password:
host: localhost 
```

之后，您将能够在`rake migrate`没有周围的 rails 应用程序的情况下运行并获得所有迁移优势。

或者，我有一组 bash 脚本，它们执行与 ActiveRecord 迁移非常相似的功能，但它们仅适用于 Oracle。在切换到 Ruby 和 Rails 之前，我曾经使用过它们。它们有些复杂，我不为它们提供支持，但如果您有兴趣，请随时与我联系。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-20T02:35:05.440

还有一个名为[Java Database Migrations](http://blog.carbonfive.com/2008/09/java/java-database-migrations)的项目。要获取代码，请查看[项目的 Google 代码页面](http://code.google.com/p/c5-db-migration/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-12-27T15:11:11.830

我看到这个话题真的很老了，但我会为未来的谷歌人提供帮助。

如果您不想走 ActiveRecord::Migrate 路线，我真的很喜欢使用 Python 的 SQLAlchemy 和[SQLAlchemy-Migrate来管理我需要进行版本控制的数据库。](http://code.google.com/p/sqlalchemy-migrate/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T14:38:34.680

我没有亲自做过，但应该可以使用 ActiveRecord::Migration 而不需要任何其他 Rails 东西。正确设置加载路径将是困难的部分，但实际上您需要的只是`rake`任务和`db/migrate`目录以及它们所依赖的任何 Rails gem，`activerecord`可能`actviesupport`是`railties`. 我会尝试一下，看看缺少哪些类并添加它们。

在之前的一家公司，我们构建了一个工具，它基本上完成了 ActiveRecord::Migration 的工作，只是它是用 Java 编写的一个 Maven 插件。它所做的只是组装 SQL 脚本的文本块。它只需要对按顺序排列的文件名很聪明，并且知道如何更新版本控制表。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-05-04T08:55:33.913

该项目旨在允许在不安装 Rails 的情况下运行活动记录迁移：

[https://github.com/bretweinraub/rails-free-DB-Migrate](https://github.com/bretweinraub/rails-free-DB-Migrate)

安装它（git clone it）并将其用作项目的基础。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-12-07T15:45:23.483

这是一个用 Haskell 编写的工具：

[http://hackage.haskell.org/package/dbmigrations](http://hackage.haskell.org/package/dbmigrations)

# safari - Safari中的页面转换效果？

> ID：101877
> 
> 赞同：4
> 
> 时间：2008-09-19T13:37:34.280
> 
> 标签：safari

如何在 Safari 中为网页添加 IE 等页面转换效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-19T13:50:22.317

你可以看看这个例子：[http](http://sachiniscool.blogspot.com/2006/01/implementing-page-transitions-in.html) ://sachiniscool.blogspot.com/2006/01/implementing-page-transitions-in.html 。它描述了如何使用 AJAX 和 CSS 在 Firefox 中模拟页面转换。同样的方法也适用于 Safari。下面的代码取自该页面并略微格式化：

```
var xmlhttp;
var timerId = 0;
var op = 1;

function getPageFx() {
  url = "/transpage2.html";
  if (window.XMLHttpRequest) {
    xmlhttp = new XMLHttpRequest()
    xmlhttp.onreadystatechange=xmlhttpChange
    xmlhttp.open("GET",url,true)
    xmlhttp.send(null)
  } else getPageIE();
}

function xmlhttpChange() {
// if xmlhttp shows "loaded"
  if (xmlhttp.readyState == 4) {
  // if "OK"
    if (xmlhttp.status == 200) {
      if (timerId != 0)
        window.clearTimeout(timerId);
        timerId = window.setTimeout("trans();",100);
    } else {
       alert(xmlhttp.status)
    }
  }
}

function trans() {
  op -= .1;
  document.body.style.opacity = op;
  if(op < .4) {
    window.clearTimeout(timerId);
    timerId = 0; document.body.style.opacity = 1;
    document.open();
    document.write(xmlhttp.responseText);
    document.close();
    return;
  }
  timerId = window.setTimeout("trans();",100);
}

function getPageIE() {
  window.location.href = "transpage2.html";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T13:51:07.213

查看[Scriptaculous](http://github.com/madrobby/scriptaculous/wikis)。如果这就是您所指的，请避免使用 IE-Only JS（不知道您的意思是什么效果）。

# java - 如果 netstat 说别的，为什么我会得到“java.net.BindException：每个套接字地址只能使用一次”？

> ID：101880
> 
> 赞同：2
> 
> 时间：2008-09-19T13:38:14.043
> 
> 标签：java, sockets, jetty

*   我使用端口 9000 启动使用 Jetty 服务器的应用程序。
*   然后我用 Ctrl-C 关闭我的应用程序
*   我用“netstat -a”检查，发现端口 9000 不再被使用。
*   我重新启动我的应用程序并获得：

> ```
> [ERROR,9/19 15:31:08] java.net.BindException: Only one usage of each socket address (protocol/network address/port) is normally permitted
> [TRACE,9/19 15:31:08] java.net.BindException: Only one usage of each socket address (protocol/network address/port) is normally permitted
> [TRACE,9/19 15:31:08]        at java.net.PlainSocketImpl.convertSocketExceptionToIOException(PlainSocketImpl.java:75)
> 
> [TRACE,9/19 15:31:08]        at sun.nio.ch.Net.bind(Net.java:101)
> [TRACE,9/19 15:31:08]        at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:126)
> [TRACE,9/19 15:31:08]        at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:77)
> [TRACE,9/19 15:31:08]        at org.mortbay.jetty.nio.BlockingChannelConnector.open(BlockingChannelConnector.java:73)
> 
> [TRACE,9/19 15:31:08]        at org.mortbay.jetty.AbstractConnector.doStart(AbstractConnector.java:285)
> [TRACE,9/19 15:31:08]        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)
> [TRACE,9/19 15:31:08]        at org.mortbay.jetty.Server.doStart(Server.java:233)
> [TRACE,9/19 15:31:08]        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)
> [TRACE,9/19 15:31:08]        at ... 
> ```

这是一个Java错误吗？我可以在启动 Jetty 服务器之前以某种方式避免它吗？

**编辑 #1**这是我们创建 BlockingChannelConnector 的代码，注意“setReuseAddress(true)”：

> ```
>  connector.setReuseAddress( true );
>     connector.setPort( port );
>     connector.setStatsOn( true );
>     connector.setMaxIdleTime( 30000 );
>     connector.setLowResourceMaxIdleTime( 30000 );
>     connector.setAcceptQueueSize( maxRequests );
>     connector.setName( "Blocking-IO Connector, bound to host " + connector.getHost() ); 
> ```

会不会和空闲时间有关？

**编辑#2**下一个可能有帮助也可能没有帮助的难题：在调试模式 (Eclipse) 下运行应用程序时，服务器启动时没有问题！！！但是在运行模式下运行应用程序或作为构建的 jar 文件时，上述问题会重复出现。威士忌探戈狐步舞？

**编辑＃3（4天后）** -仍然有问题。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-19T13:48:14.520

During your first invocation of your program, did it accept at least one incoming connection? If so then what you are most likely seeing is the socket linger in effect.

For the best explanation dig up a copy of TCP/IP Illustrated by Stevens

[![alt text](../Images/32154773c27dd5c2b6cb643170100018.png)](https://i.stack.imgur.com/DNDVu.gif)
[(source: [kohala.com](http://www.kohala.com/start/gifs/tcpipiv1.gif))]

But, as I understand it, because the application did not properly close the connection (that is BOTH client and server sent their FIN/ACK sequences) the socket you were listening on cannot be reused until the connection is considered dead, the so called 2MSL timeout. The value of 1 MSL can vary by operating system, but its usually a least a minute, and usually more like 5\.

The best advice I have heard to avoid this condition (apart from always closing all sockets properly on exit) is to set the SO_LINGER tcp option to 0 on your server socket during the listen() phase. As freespace pointed out, in java this is the setReuseAddress(true) method.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T13:42:24.363

You might want call `setReuseAddress(true)` before calling `bind()` on your socket object. This is caused by a TCP connection persisting even after the socket is closed.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T20:11:57.267

我必须说我也认为这是 setReuseAddress(true) 解决的常见问题。但是，这种情况下的错误消息通常是 JVM 无法绑定到端口的内容。我以前从未见过发布的错误消息。谷歌搜索似乎表明另一个进程正在侦听一个或多个（但不是全部）网络接口，并且您请求您的进程绑定到所有接口，而它可以绑定到一些（其他进程未侦听的接口） to) 但不是全部。只是在这里猜测......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T13:47:00.840

I'm not sure about Jetty, but I have noticed that sometimes Tomcat will not shut down cleanly on some of our Linux servers. In cases like that, Tomcat will restart but not be able to use the port in question because the previous instance is still bound to it. In such cases, we have to find the rogue process and explicitly kill -9 it before we restart Tomcat. I'm not sure if this is a java bug or specific to Tomcat or the JVM we're using.

# php - 如何将多个 javascript 文件的请求合并为一个 http 请求？

> ID：101893
> 
> 赞同：8
> 
> 时间：2008-09-19T13:39:55.413
> 
> 标签：php, javascript, apache, http

这个概念对我来说是一个新概念——我第一次遇到它是在[YUI 依赖项配置](http://developer.yahoo.com/yui/articles/hosting/#configure)器中。基本上，不是对多个文件进行多个请求，而是将文件链接到一个 http 请求中以减少页面加载时间。

有人知道如何在 LAMP 堆栈上实现这一点吗？（我看到已经问过一个类似的问题，但它[似乎是 ASP 特定](https://stackoverflow.com/questions/47937/combining-and-caching-multiple-javascript-files-in-aspnet)的。

谢谢！

更新：这两个答案都很有帮助......（我的代表还不够高，无法发表评论，所以我在这里添加一些离别想法）。我还[看到了另一篇博客文章](http://www.artzstudio.com/2008/08/using-modconcat-to-speed-up-render-start/)，其中包含可能有用的特定于 PHP 的示例。不过，大卫的构建答案让我考虑采用不同的方法。谢谢，大卫！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-19T13:46:40.297

有多种方法，最明显的两种是：

1.  构建一个像 YUI 这样的工具，它会根据您根据需要勾选的组件构建一个定制的、独特的版本，这样您仍然可以将文件作为静态文件提供。MooTools 和 jQuery UI 在你下载他们的包时都提供了这样的包构建器，为你提供最精简和最有效的库。我确信那里存在通用的通用工具。
2.  创建一个简单的 Perl/PHP/Python/Ruby 脚本，根据请求提供一堆 JavaScript 文件。因此，“onerequest.js?load=ui&load=effects”将转到一个 PHP 脚本，该脚本加载文件并为它们提供正确的内容类型。有很多这样的例子，但我个人不是粉丝。

我不喜欢通过任何类型的脚本来提供静态文件，但我也喜欢用大约 10 个单独的小类文件来开发我的代码，而不需要 10 个 HTTP 请求的成本。所以我想出了一个自定义构建过程，它结合了所有最常见的类和函数，然后将它们缩小到像 project.min.js 这样的单个文件中，并且在我的所有视图/模板中都有一个条件，包括生产中的这个文件。

编辑——“自定义构建过程”实际上是一个极其简单的 perl 脚本。它读入我作为参数传递的每个文件，并将它们写入一个新文件，可选地通过[JSMIN](http://www.crockford.com/javascript/jsmin.html)自动传递整个文件（可用于所有您喜欢的语言）。

在命令看起来像这样：

```
perl build-project-master.pl core.js class1.js etc.js /path/to/live/js/file.js 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-19T13:49:38.090

@http://www.hunlock.com/blogs/Supercharged_Javascript 上有一篇很好的博客[文章](http://www.hunlock.com/blogs/Supercharged_Javascript)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-21T03:39:38.070

你想要的是[Minify](http://code.google.com/p/minify/)。我刚刚写了一个设置它的[演练。](http://mrclay.org/index.php/2008/09/19/minify-21-on-mrclayorg/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T11:56:23.183

Capistrano 是一个相当流行的基于 Ruby 的 Web 部署工具。如果您正在考虑或已经在使用它，那么有一个很棒的 gem 可以找出 CSS 和 Javascript 依赖项、合并和缩小文件。

`gem install juicer`

从[Juicer GitHub 页面](https://github.com/cjohansen/juicer)，它可以找出哪些文件相互依赖并将它们合并在一起，从而减少每次页面查看的 http 请求数，从而提高性能。

# asp.net-mvc - ASP.NET MVC Preview 5 & Resharper 怪异

> ID：101903
> 
> 赞同：1
> 
> 时间：2008-09-19T13:41:41.180
> 
> 标签：asp.net-mvc, resharper

我刚刚创建了我的第一个 Preview 5 错误，并且它似乎与 Resharper 不太相配。视图中的所有 C# 都出现错误，诸如 <%= Html.Password("currentPassword") %> 的“currentPassword”突出显示以下错误：参数类型“System.String”不是可分配的参数类型“细绳”。

IList 错误 = ViewData["errors"] as IList; 将 IList 突出显示为“无法解析符号‘字符串’”

有人见过这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-19T13:52:09.957

您是否尝试过 ReSharper 4.1 的[最新夜间版本？](http://www.jetbrains.net/confluence/display/ReSharper/ReSharper+4.0+Nightly+Builds)在某些情况下，4.1 中的错误会表现出许多歧义错误，并且已在后续构建中修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-14T00:42:40.420

如果有人找到这个博客，上面建议的修复对我有用 - 我下载了最新的 4.1 版本，并且不明确的参考问题已经消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-19T18:50:54.047

有时，当您没有完全限定 @Page 指令的 Inherits 属性时，可能会发生这种情况。即使它在您的 web.config 中，也请确保并完全限定您的 R# 的 Inherits 指令。（至少从构建 4.1.943 开始）。

此错误已在此处报告：http: [//www.jetbrains.net/jira/browse/RSRP-96241](http://www.jetbrains.net/jira/browse/RSRP-96241)

# compiler-construction - 构建有效的外部 DSL

> ID：101914
> 
> 赞同：11
> 
> 时间：2008-09-19T13:43:11.397
> 
> 标签：compiler-construction, dsl

我有什么工具可以构建一个真实的、诚实的外部 DSL。不，我不是在谈论滥用 Ruby、Boo、XML 或其他现有语言或语法，我的意思是一种真正的外部 DSL——我自己的语言用于我自己的目的。

我知道有一些语言工作台正在开发中，而且我听说过诸如 .NET 的“讽刺”之类的东西。当然，还有 ANTLR、Lex/Yaac 等，但恐怕这些对于我想要做的事情来说太复杂了。

请谈谈您可能使用或听说过的 DSL 构建器工具，以及您对它的帮助和缺点的印象。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-03T06:59:40.707

我用 Boo、Irony.NET 和一个名为 Grammatica 的工具包编写了 DSL。你说解析器生成器太复杂了，但你的判断可能太仓促了，事实上，一旦你克服了一个小的学习曲线，它们就很容易使用，并打开了一个可以轻松覆盖的广阔可能性世界努力。我发现学习为大多数解析器生成器编写语法所需的符号有点类似于学习正则表达式 - 你必须稍微弯曲一下才能让它们进入，但回报是显着的。

我的观点是：如果您的目标语言足够简单，可以由一个愚蠢的视觉设计师处理，那么使用解析器生成器为其编写语法应该很容易。

如果您的目标 DSL 足够复杂，以至于您需要费力地编写语法，那么愚蠢的可视化工具无论如何都不会减少芥末，您最终将不得不学习编写语法。

不过，从长远来看，我同意内部与外部 DSL。我在 Boo 中编写了一个内部 DSL，并且不得不修改我的 DSL 语法以使其工作，而且它总是感觉像是一个 hack。使用 Irony.NET 或 ANTLR 的相同语法同样容易以更大的灵活性完成。

我有一篇[博客文章](http://www.thefreakparade.com/2008/07/evaluating-expressions-at-runtime-in-net-c/)讨论了一些选项。这篇文章的重点是为运行时表达式评估编写 DSL，但工具都是一样的。

我对 Irony.NET 的体验都是积极的，并且有几种使用它实现的参考语言，这是一个很好的起点。如果您的语言很简单，那么启动和运行绝对不复杂。CodeProject 上还有一个名为 TinyParser 的库——这个库非常有趣，因为它将解析器生成为纯源代码，这意味着您的最终产品完全没有任何第三方引用。不过我自己没用过。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-19T14:46:25.410

如果您正在研究编写独立的 DSL，那么您正在研究构建编译器——没有办法绕过它。编译器的构建*是*必不可少的编程知识，其实并没有大家想象的那么难。Steve Yegge 的[Righ Programmer Food](http://steve-yegge.blogspot.com/2007/06/rich-programmer-food.html)总结了知道如何很好地构建编译器的价值。

有很多方法可以开始。我建议查看文章中提到的 2 篇论文：[想要编写编译器吗？只需阅读这两篇论文](http://prog21.dadgum.com/30.html)。第一个，[让我们构建一个编译器](http://compilers.iecc.com/crenshaw/)，非常易于访问。它使用 Turbo Pascal 作为实现语言，但您可以轻松地用任何其他语言实现它——源代码非常清晰。帕斯卡是一门简单的语言。

一旦您对事物的工作方式和所涉及的术语有了很好的了解，我建议您深入研究[ANTLR](http://www.antlr.org)之类的东西。ANTLR 有一个不错的 IDE，[ANTLRWorks](http://www.antlr.org/works/index.html)，它带有解释器和调试器。它还可以即时生成非常好的语法可视化。我发现它在学习中非常宝贵。

ANTLR 有几个很好的教程，虽然一开始它们可能有点压倒性。[这个](http://javadude.com/articles/antlrtut/)很好，虽然它反对 ANTLR 2.0，所以你可能会遇到与更新版本不兼容的问题（目前最新的是 3.1）。

最后，还有另一种 DSL 方法：Lisp 方法。鉴于 Lisp 的无语法特性（您的代码基本上是抽象语法树），只要您习惯括号 :)，您就可以从中塑造出无穷无尽的语言。

如果您确实采用这种方法，那么您希望使用可嵌入的 Lisp。在 Java 下，你有[Clojure](http://clojure.org/)，这是一种 Lisp 方言，可以与 JVM 及其库完美地互操作。我个人没用过，但看起来不错。对于 Scheme，有 GNU [Guile](http://www.gnu.org/software/guile/)，它[在 LGPL 下获得许可](http://www.gnu.org/software/guile/docs/docs-1.8/guile-ref/Guile-License.html)。对于 Common Lisp，有[ECL](http://ecls.sourceforge.net/)，也在 LGPL 下。两者都使用 C 接口来实现互操作性，因此您几乎可以将它们嵌入到任何其他语言中。ECL 在 Lisp 中是独一无二的，因为每个 Lisp 函数都是作为 C 函数实现的，所以如果你愿意，你可以用 C 编写 Lisp 代码（比如，在你自己的扩展方法中——你可以创建对 Lisp 对象进行操作的 C 函数，然后从 Lisp 调用它们）。我已经将 ECL 用于我的一个副项目有一段时间了，我喜欢它。维护者非常活跃且反应迅速。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-19T13:58:01.953

你真的应该看看[Ragel](http://research.cs.queensu.ca/~thurston/ragel/)。这是一个将状态机嵌入到常规源代码中的框架。Ragel 支持 C、C++、Objective-C、D、Java 和 Ruby。

Ragel 非常适合编写文件和协议解析器以及单步执行外部 DSL 内容。主要是因为它允许您在状态转换等方面执行任何类型的代码。

使用 Ragel 的几个值得注意的项目是[Mongrel](http://mongrel.rubyforge.org/)，一个很棒的 ruby​​ Web 服务器。还有[Hpricot](http://code.whytheluckystiff.net/hpricot/)，一个基于 ruby​​ 的 html 解析器，有点受 jQuery 的启发。

Ragel 的另一个重要功能是它如何生成基于[graphviz](http://graphviz.org/)的图表，以可视化您的状态机。下面是取自[Zed Shaw](http://www.zedshaw.com/) [关于 ragel state charts 的文章](http://www.zedshaw.com/tips/ragel_state_charts.html)的示例。

![拉格尔状态图](../Images/e3a310a2877248a5a219c3acc2cc64b1.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-02T07:45:09.350

[Xtext](http://xtext.org)就是为此而构建的。

从网站：

> Xtext 是一个用于开发编程语言和领域特定语言的框架。
> 
> 它涵盖了完整语言基础架构的所有方面，从解析器、链接器、编译器或解释器到成熟的顶级 Eclipse IDE 集成。它为所有这些方面提供了良好的默认设置，同时每个方面都可以根据您的需求进行定制。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-30T12:09:02.850

我一直在使用 Irony，效果很好。具有讽刺意味的是，您可以轻松地将其包含在您将使用 DSL 的任何运行时中。我正在创建一个外部 DSL，我将其填充到用 C# 编写的语义模型中，因此具有讽刺意味的是。然后我使用语义模型生成带有 StringTemplate 的代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-11-25T17:46:16.983

如果您计划实现外部 DSL，Spoofax ( [http://strategoxt.org/Spoofax](http://strategoxt.org/Spoofax) ) 是一个很好的语言工作台来执行此操作。它是一个基于解析器的文本语言工作台，它利用了多种最先进的技术，例如 SDF、Stratego。除了 DSL 实现之外，您还可以获得非常丰富的编辑器服务，例如代码完成、大纲视图、智能感知等。它已被用于构建多种语言，例如[http://mobl-lang.org/](http://mobl-lang.org/)。查看此内容以了解有关所提供支持的想法。

Spoofax 项目带有一个开箱即用的好示例 DSL 实现和一个 java 代码生成器。它可以作为开始使用这些工具的起点。

以下有关此语言工作台用法的教程详细信息：http: [//strategoxt.org/Spoofax/Tour](http://strategoxt.org/Spoofax/Tour)。

希望能帮助到你！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-16T13:08:28.963

对于严重的外部DSL，无法避免解析问题；ANTLR 是您最不需要的。您要检查的是程序转换系统，它可用于将任意 DSL 语法映射到 Java 等目标语言。

请参阅[http://en.wikipedia.org/wiki/Program_transformation](http://en.wikipedia.org/wiki/Program_transformation)

# image-processing - SO上的用户ID图像是如何生成的？

> ID：101918
> 
> 赞同：9
> 
> 时间：2008-09-19T13:43:31.800
> 
> 标签：image-processing, image-manipulation, identicon

我对这个网站上与每个用户相关的可爱的小万花筒图像有点好奇。那些是如何产生的？可能性是：

1.  图像列表已经存在于某个文件夹中，并且是随机选择的。
2.  每当用户注册时都会生成图像。

无论如何，我更感兴趣的是使用什么样的算法来生成这样的图像。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-19T13:46:08.347

它被称为[Identicon](https://en.wikipedia.org/wiki/Identicon)。如果您输入并发送电子邮件，则它基于您的电子邮件地址的哈希值。如果您没有输入电子邮件，则它基于您的 IP 地址。

Jeff[发布了一些 .NET 代码](https://blog.codinghorror.com/identicons-for-net/)来生成基于 IP 的 Identicons。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-19T13:45:54.480

它通常由用户名、电子邮件地址或 IP 地址的哈希生成。

Stackoverflow 使用[Gravatar](http://en.gravatar.com/)进行图像生成。

据我所知，这个想法来自[Don Parks](http://www.docuverse.com/blog/donpark/2004/05/03/secure-ui-9-block-phishmarks)，他写了关于他使用的技术的文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-19T13:45:05.823

IIRC，它是从 IP 地址生成的。

“IP Hashing”我相信它被称为。

我记得在博客上读过它；他使代码可供下载。然而，我不知道它是从哪里来的。:(

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T13:46:24.867

这些图像是由 Gravatar 制作的，它们的详细信息在[此处进行了概述](http://blog.gravatar.com/2008/04/22/identicons-monsterids-and-wavatars-oh-my/)，但是，它们并没有透露它们是如何做到的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T13:47:23.837

我相信图像是一个 4×4 网格，上面的 2×2 网格顺时针重复 4 次，每次旋转 90 度，再次顺时针。似乎这两种颜色是随机选择的，每个 1×1 块都是从预定义的集合中选择的。

编辑：显然我的回答是临时的。很高兴知道标识。

试试这个：[http](http://www.docuverse.com/blog/9block?code=(32-bit) ://www.docuverse.com/blog/9block?code=(32-bit integer)8&size=(16|32|64)

用适当的数字代替括号中的项目。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T13:48:13.897

我敢打赌，每个微小的平铺图像都会被赋予一组看起来不错的其他平铺图像。将图块视为节点的图形。您为角落选择一个随机节点并用伙伴填充它的相邻点，然后旋转它并应用相同的图案四次。然后选择一种颜色。

除了图形，它也可以是一个方阵，其中每一行代表一个图像，每列代表一个图像，单元格值是权重。

# php - 在 PHP 中使用自定义 DTD 验证 XML

> ID：101935
> 
> 赞同：11
> 
> 时间：2008-09-19T13:46:04.727
> 
> 标签：php, xml, validation, dtd

有没有办法（不安装任何库）在 PHP 中使用自定义 DTD 验证 XML？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-19T13:50:23.767

看看[PHP 的 DOM](http://us3.php.net/dom)，尤其是[DOMDocument::schemaValidate](http://us3.php.net/manual/en/domdocument.schemavalidate.php)和[DOMDocument::validate](http://us3.php.net/manual/en/domdocument.validate.php)。

DOMDocument::validate 的示例相当简单：

```
<?php
$dom = new DOMDocument;
$dom->Load('book.xml');
if ($dom->validate()) {
    echo "This document is valid!\n";
}
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-06-30T09:48:18.943

如果字符串中有 dtd，则可以使用 dtd 的[数据包装器](http://php.net/manual/en/wrappers.data.php)对其进行验证：

```
$xml = '<?xml version="1.0"?>
        <!DOCTYPE note SYSTEM "note.dtd">
        <note>
            <to>Tove</to>
            <from>Jani</from>
            <heading>Reminder</heading>
            <body>Don\'t forget me this weekend!</body>
        </note>';

$dtd = '<!ELEMENT note (to,from,heading,body)>
        <!ELEMENT to (#PCDATA)>
        <!ELEMENT from (#PCDATA)>
        <!ELEMENT heading (#PCDATA)>
        <!ELEMENT body (#PCDATA)>';

$root = 'note';

$systemId = 'data://text/plain;base64,'.base64_encode($dtd);

$old = new DOMDocument;
$old->loadXML($xml);

$creator = new DOMImplementation;
$doctype = $creator->createDocumentType($root, null, $systemId);
$new = $creator->createDocument(null, null, $doctype);
$new->encoding = "utf-8";

$oldNode = $old->getElementsByTagName($root)->item(0);
$newNode = $new->importNode($oldNode, true);
$new->appendChild($newNode);

if (@$new->validate()) {
    echo "Valid";
} else {
    echo "Not valid";
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-09-12T14:15:15.847

我对原始问题的解释是，我们有一个“板载”XML 文件，我们想根据“板载”DTD 文件对其进行验证。Soren 和 PayamRWD 在评论中表达了我将如何实现“在 DOCTYPE 元素中插入本地 DTD”的想法：

```
公共功能验证（$xml_realpath，$dtd_realpath=null）{
    $xml_lines = 文件（$xml_realpath）；
    $doc = 新的 DOMDocument；
    如果（$dtd_realpath）{
        // 在 DOCTYPE 行中注入 DTD：
        $dtd_lines = 文件（$dtd_realpath）；
        $new_lines = 数组（）；
        foreach ($xml_lines as $x) {
            // 假设 DOCTYPE SYSTEM "blah blah" 格式：
            if (preg_match('/DOCTYPE/', $x)) {
                $y = preg_replace('/SYSTEM "(.*)"/', " [\n" . implode("\n", $dtd_lines) . "\n]", $x);
                $new_lines[] = $y;
            } 别的 {
                $new_lines[] = $x;
            }
        }
        $doc->loadXML(implode("\n", $new_lines));
    } 别的 {
        $doc->loadXML(implode("\n", $xml_lines));
    }
    // 启用用户错误处理
    libxml_use_internal_errors(true);
    if (@$doc->validate()) {
        echo "有效！\n";
    } 别的 {
        echo "无效：\n";
        $errors = libxml_get_errors();
        foreach ($errors as $error) {
            print_r($error, true);
        }
    }
}

```

请注意，为简洁起见，已禁止错误处理，并且可能有更好/更通用的方法来处理插值。但我*实际上*已经将此代码与真实数据一起使用，并且它适用于 PHP 版本 5.2.17。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-03-03T16:11:08.457

## 尝试完成“owenmarshall”答案：

**在 xml-validator.php 中：**

添加html，标题，正文，...

```
<?php

$dom = new DOMDocument; <br/>
$dom->Load('template-format.xml');<br/>
if ($dom->validate()) { <br/>
    echo "This document is valid!\n"; <br/>
}

?> 
```

**模板格式.xml：**

```
<?xml version="1.0" encoding="utf-8"?>

<!-- DTD to Validate against (format example) -->

<!DOCTYPE template-format [  <br/>
  <!ELEMENT template-format (template)>  <br/>
  <!ELEMENT template (background-color, color, font-size, header-image)>  <br/>
  <!ELEMENT background-color   (#PCDATA)>  <br/>
  <!ELEMENT color (#PCDATA)>  <br/>
  <!ELEMENT font-size (#PCDATA)>  <br/>
  <!ELEMENT header-image (#PCDATA)>  <br/>
]>

<!-- XML example -->

<template-format>

<template>

<background-color>&lt;/background-color>  <br/>
<color>&lt;/color>  <br/>
<font-size>&lt;/font-size>  <br/>
<header-image>&lt;/header-image>  <br/>

</template> 

</template-format> 
```

# visual-studio-2008 - VS vstest调试错误

> ID：101938
> 
> 赞同：3
> 
> 时间：2008-09-19T13:46:20.640
> 
> 标签：visual-studio-2008, mstest

我最近安装了VS2008。我正在从事的项目使用 vstest，我有一个令人抓狂的问题。当我选择运行/调试我的测试/测试时，我经常收到以下错误（伴随着对测试的感叹号 - 测试错误）：

警告：测试运行部署问题：未找到测试容器“”直接或间接引用的程序集或模块“Cassini”。无法将测试运行“pendi@UK00329 2008-09-19 14:37:39”排队：无法启动程序“C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\vstesthost.exe”。

未正确安装 Visual Studio DLL coloader80.dll。请通过控制面板中的“添加或删除程序”修复您的 Visual Studio 安装。

如果问题仍然存在，您可以在命令提示符下使用 'regsvr32 "%CommonProgramFiles%\Microsoft Shared\VS7Debug\coloader80.dll"' 手动注册 coloader80.dll。

现在它是一个 ASP.Net 站点，并且有一些 Web 服务等。所有这一切都很奇怪，因为重新注册 dll 永远不会起作用。有时干净+运行有效。有时运行（而不是调试）有时是调试（而不是先前的运行）。

令人抓狂。谷歌告诉我注册以下 dll：

这工作，再次偶尔。我也尝试过 VS Repair 安装选项。

如果有人破解了这个/知道问题，请告诉我

谢谢伊恩

* * *

来自微软……那些丢失的 dll。我发现解决方案（也）是零星的。还有其他想法吗？？

> 1.  用 Visual Studio .NET 中的等效文件替换以下文件

安装介质：

> Program Files\Common Files\Microsoft Shared\VS7Debug\coloader.dll Program Files\Common Files\Microsoft Shared\VS7Debug\csm.dll Program Files\Common Files\Microsoft Shared\VS7Debug\msdbg2.dll Program Files\Common Files\Microsoft Shared \VS7Debug\pdm.dll Program Files\Common Files\Microsoft Shared\VS7Debug\vs7jit.exe Program Files\Common Files\Microsoft Shared\VS7Debug\mdm.exe

```
2\. Register each DLL above with regsvr32.EXE, e.g:
regsvr32 "ProgramFiles\Common Files\Microsoft Shared\VS7Debug\coloader.dll" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-13T11:51:49.997

顺便说一句 - 我找到了答案。或者一个答案。

使用 Process Explorer，我跟踪了 coloader80.dll。这被 VS 使用（因为它被调试使用，所以它不够不可理解），但也被 SSMS 使用。

所以...似乎 SqlServerManagementStudio 与 VS 调试 dll 挂钩，从而创建了锁。现在我一次只打开一个，但我对此感到非常震惊....希望修复即将到来。

# wpf - WPF - find actual top and left of an image after rotating it

> ID：101949
> 
> 赞同：1
> 
> 时间：2008-09-19T13:47:40.513
> 
> 标签：wpf, rotatetransform

I am using WPF and I have an image of an 8.5" * 11" piece of paper on a Canvas. I am then rotating the image using a RotateTransform, with the axis being in the middle of the page (that is, RotateTransformOrigin="0.5,0.5"). How can I find the actual location on the canvas of the corners of the image?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T14:04:48.800

[http://au.answers.yahoo.com/question/index?qid=20080607033505AAF75UC](http://au.answers.yahoo.com/question/index?qid=20080607033505AAF75UC)

（这是几何方式）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-20T00:39:03.097

```
_image.TranslatePoint(new Point(0, 0), _canvas); 
```

这会吗？

# formatting - Code formatting: is lining up similar lines ok?

> ID：101958
> 
> 赞同：24
> 
> 时间：2008-09-19T13:49:51.660
> 
> 标签：formatting, coding-style, alignment, code-readability, human-readable

I recently discovered that our company has a set of coding guidelines (hidden away in a document management system where no one can find it). It generally seems pretty sensible, and keeps away from the usual religious wars about where to put '{'s and whether to use hard tabs. However, it does suggest that "lines SHOULD NOT contain embedded multiple spaces". By which it means don't do this sort of thing:

```
foo    = 1;
foobar = 2;
bar    = 3; 
```

Or this:

```
if      ( test_one    ) return 1;
else if ( longer_test ) return 2;
else if ( shorter     ) return 3;
else                    return 4; 
```

Or this:

```
thing foo_table[] =
{
  { "aaaaa", 0 },
  { "aa",    1 },
  // ...
} 
```

The justification for this is that changes to one line often require every line to be edited. That makes it more effort to change, and harder to understand diffs.

I'm torn. On the one hand, lining up like this can make repetitive code much easier to read. On the other hand, it does make diffs harder to read.

What's your view on this?

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-09-19T13:53:04.697

2008: Since I supervise daily merges of source code,... I can only recommend against it.

It is pretty, but if you do merges on a regular basis, the benefit of 'easier to read' is quickly far less than the effort involved in merging that code.

Since that format can not be automated in a easy way, the first developer who does not follow it will trigger non-trivial merges.

Do not forget that **in source code merge, one can not ask the diff tool to ignore spaces** :
Otherwise, "" and " " will look the same during the diff, meaning no merge necessary... the compiler (and the coder who added the space between the String double quotes) would not agree with that!

2020: as noted in [the comments](https://stackoverflow.com/questions/101958/code-formatting-is-lining-up-similar-lines-ok/101984#comment111213382_101984) by [Marco](https://stackoverflow.com/users/10529638/marco)

> most code mergers should be able to handle ignoring whitespace and aligning equals is now an auto format option in most IDE.

I still prefer languages which come with their own formatting options, like [Go](https://golang.org/) and its [`gofmt` command](https://golang.org/cmd/gofmt/).
Even [Rust](https://www.rust-lang.org/) has its [`rustfmt`](https://github.com/rust-lang/rustfmt) now.

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2008-09-19T13:52:56.303

> I'm torn. On the one hand, lining up like this can make repetitive code much easier to read. On the other hand, it does make diffs harder to read.

Well, since making code understandable is more important than making diffs understandable, you should not be torn.

IMHO lining up similar lines does greatly improve readability. Moreover, it allows easier cut-n-pasting with editors that permit vertical selection.

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2008-09-19T15:58:56.140

我从不这样做，我总是建议不要这样做。我不在乎差异更难阅读。我确实很在意首先要花时间来做这件事，而且每当需要重新对齐线条时，都需要额外的时间。编辑具有这种格式风格的代码令人恼火，因为它经常变成一个巨大的时间槽，我最终花费更多的时间格式化而不是进行真正的更改。

我也质疑可读性的好处。此格式样式在文件中创建列。但是，我们不按列样式从上到下*阅读。*我们从左到右阅读。这些列分散了标准阅读风格的注意力，并将视线拉向下方。如果它们没有完全对齐，这些列也会变得非常难看。这适用于无关的空白，也适用于多个（可能不相关的）列组，这些列组具有不同的间距，但在文件中一个接一个地落下。

顺便说一句，我发现您的编码标准没有指定制表符或大括号的位置真的很奇怪。与使用（或不使用）列式格式相比，混合使用不同的制表符样式和大括号位置会损害可读性。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2008-09-19T13:54:33.757

我从不这样做。正如您所说，有时需要修改每一行以调整间距。在某些情况下（例如上面的条件句），如果您取消间距并将块放在与条件句不同的行上，它将是完全可读的并且更容易维护。

此外，如果您的编辑器中有不错的语法高亮显示，那么这种间距实际上是不必要的。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2008-09-19T14:01:58.323

在史蒂夫·麦康奈尔（Steve McConnell ）的永远有用的*[代码完成](http://cc2e.com/)*中对此进行了一些讨论。如果您没有这本开创性书籍的副本，请帮自己一个忙，买一本。无论如何，讨论在第一版的第 426 和 427 页上，这是我手头的版本。

* * *

编辑：

McConnell 建议在一组赋值语句中对齐等号，以表明它们是相关的。他还告诫不要在一组作业中对齐所有等号，因为它可以在视觉上暗示没有关系的地方。例如，这将是适当的：

```
Employee.Name  = "Andrew Nelson"
Employee.Bdate = "1/1/56"
Employee.Rank  = "Senator"
CurrentEmployeeRecord = 0

For CurrentEmployeeRecord From LBound(EmployeeArray) To UBound(EmployeeArray) 
. . . 
```

虽然这不会

```
Employee.Name         = "Andrew Nelson"
Employee.Bdate        = "1/1/56"
Employee.Rank         = "Senator"
CurrentEmployeeRecord = 0

For CurrentEmployeeRecord From LBound(EmployeeArray) To UBound(EmployeeArray) 
. . . 
```

我相信差异是显而易见的。还有一些关于对齐延续线的讨论。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2008-09-19T13:55:31.430

就我个人而言，我更喜欢以稍微难以阅读的差异为代价来获得更高的代码可读性。在我看来，从长远来看，对代码可维护性的改进——尤其是在开发人员来来去去的时候——是值得权衡的。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-19T13:51:46.757

With a good editor their point is just not true. :)

(See "visual block" mode for vim.)

P.S.: Ok, you still have to change every line but it's fast and simple.

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-10-31T04:38:53.240

我尝试遵循两个准则：

1.  尽可能使用制表符代替空格，以尽量减少重新格式化的需要。

2.  如果您担心对修订控制的影响，请先进行*功能*更改，将其签入，然后*仅进行外观*更改。

如果在“外观”更改中引入了错误，则允许公开鞭打。:-)

* * *

**2020-04-19 更新：天啊**，这十几年的变化！如果我今天要回答这个问题，可能会是这样的：“请您的编辑器为您格式化代码和/或告诉您的差异工具在您进行外观更改时忽略空格。

今天，当我审查代码的可读性并认为通过不同的格式来提高清晰度时，我总是以“......除非编辑器自动这样做。不要与你的工具对抗。他们总是赢。”

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-02-11T14:11:12.563

我的立场是这是一个编辑器问题：虽然我们使用花哨的工具来查看网页并在文字处理器中编写文本，但我们的代码编辑器仍然停留在 ASCII 时代。它们尽可能地笨拙，然后，我们尝试通过编写花哨的代码格式化程序来克服编辑器的限制。

根本原因是您的编译器不能忽略代码中的格式化语句“嘿，这是一个表”，并且 IDE 不能动态创建源代码的视觉上令人愉悦的表示（即*，没有*实际更改一个字节码）。

一种解决方案是使用制表符，但我们的编辑器无法自动对齐连续行中的制表符（这会使很多事情变得容易得多）。为了增加侮辱性，如果您弄乱了标签宽度（基本上是任何东西！= 8），您可以阅读*您的*源代码，但没有其他任何人的代码，例如您使用的库附带的示例代码。最后，我们的差异工具没有选项“忽略空格，除非它很重要”，编译器也不能产生差异。

Eclipse 至少可以以表格方式格式化分配，这将使大量的全局常量更具可读性。但这只是沙漠中的一滴水。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-19T14:28:49.947

您可以将差异工具设置为忽略空格（GNU 差异：-w）。这样，您的差异将跳过这些行，只显示真正的变化。非常便利！

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-19T14:00:03.650

如果您打算使用自动代码标准验证（即 CheckStyle、ReShaper 或类似的东西），那么这些额外的空间将使编写和执行规则变得非常困难

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-19T13:53:37.080

We had a similar issue with diffs at multiple contracts... We found that tabs worked best for everyone. Set your editor to maintain tabs and every developer can choose his own tab length as well.

Example: I like 2 space tabs to code is very compact on the left, but the default is 4, so although it looks very different as far as indents, etc. go on our various screens, the diffs are identical and doesn't cause issues with source control.

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-19T13:57:47.447

我喜欢第一个和最后一个，但不太喜欢中间。

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2008-09-19T13:55:35.780

这正是善良的上帝作为制表符给出的原因——在行中间添加一个字符不会搞砸对齐。

# sql-server - How do you resolve Linked server references in SQL Database project in VS?

> ID：101964
> 
> 赞同：9
> 
> 时间：2008-09-19T13:50:54.653
> 
> 标签：sql-server, visual-studio, tfs, database-project

In a Visual Studio SQL Server Database project, how can you resolve the errors associated with linked server references within the project?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-19T19:03:48.240

尝试使用链接数据库的[同义词](http://msdn.microsoft.com/en-us/library/ms177544.aspx)。

# .net - 解决 Spring.NET 和 NHibernate 程序集之间的不兼容问题

> ID：101974
> 
> 赞同：1
> 
> 时间：2008-09-19T13:52:02.437
> 
> 标签：.net, nhibernate, assemblies, spring.net

我正在尝试使用 NHibernate 和 Spring.NET 开发一个 .NET Web 项目，但我被卡住了。Spring.NET 似乎依赖于不同版本的 NHibernate 程序集（也许它需要 1.2.1.4000 而我的 NHibernate 版本是 1.2.0.4000）。

我最初使用“bindingRedirect”标签解决了类似的问题，但现在即使这样也停止了工作。

**有没有简单的解决方案来解决这些图书馆间的关系？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-19T13:55:16.703

我也遇到了这个问题，很沮丧，我只是抓住了 Spring 源代码并将其与最新的 NHibernate 进行了编译以使其永远消失。不确定这是否适合您，但 10 分钟的时间似乎总体上为我节省了很多时间。

这是所有版本的 Spring Source 的 SourceForge 链接：**[Spring Source](http://sourceforge.net/project/showfiles.php?group_id=106751&package_id=115147)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-19T13:55:17.607

Spring.Net 是开源的，不是吗？您为什么不直接下载源代码，将引用更新到您正在使用的同一版本的 NHibernate 并重新编译？

# makefile - “make”命令的其他用途是什么？

> ID：101986
> 
> 赞同：2
> 
> 时间：2008-09-19T13:53:13.760
> 
> 标签：makefile, compilation

有一天，一位系统管理员老师告诉我，我应该学习使用“make”，因为我可以将它用于许多其他只会触发编译的事情。

我再也没有机会谈论它了。你有什么好的例子吗？

作为奖励，这个工具是否已被弃用，以及现代替代品是什么（用于编译目的和其他）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-19T13:57:59.817

除了编译之外，make 还可以用来做一件很棒的事情，那就是 LaTeX。如果您正在使用 LaTeX 进行任何认真的工作，您会发现 make 非常方便，因为在使用 BibTex 或目录时需要多次重新解释 .tex 文件。

Make 绝对不会被弃用。尽管有不同的方法可以做同样的事情（Windows 上的批处理文件，Linux 上的 shell 脚本），但恕我直言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T13:57:43.890

> 是不是这个工具被弃用了

什么？！不，甚至一点也不。我在 Linux 上，所以我意识到我不是一个普通人，但我几乎每天都在使用它。我敢肯定每天都有成千上万的 Linux 开发人员*使用*它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-19T13:58:30.547

Make 可用于执行您想要执行的任何命令。它最适合用于需要检查依赖关系的活动，但没有理由不能使用 make 检查电子邮件、重新启动服务器、进行备份或其他任何事情。

Ant、NAnt 和 msbuild 被认为是现代替代方案，但 plain-old-make 仍然广泛用于不使用 Java 或 .NET 的环境中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-19T14:10:35.870

我记得几年前在[Slashdot](http://slashdot.org/)上看到一篇文章，描述了一种使用 make 优化 Linux 启动顺序的技术。

编辑：

[这是 IBM 的一篇文章，](http://www.ibm.com/developerworks/linux/library/l-boot.html)解释了这个原理。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-30T19:35:47.750

Make 执行[拓扑排序](http://en.wikipedia.org/wiki/Topological_sort)，也就是说，给定一堆东西，以及一个东西在另一个东西之前的一组要求，它会找到一种方法来对所有的东西进行排序，以便满足所有的要求。构建事物（程序、文档、分发 tarball 等）是拓扑排序的一种常见用途，但还有其他用途。您可以为数据中心中的每台服务器创建一个包含一个条目的 Makefile，包括服务器之间的依赖关系（NFS、NIS、DNS 等），并且 make 可以告诉您在断电后打开计算机的顺序，或者在停电之前关闭它们的顺序是什么。您可以使用它来确定在单个服务器上启动服务的顺序。您可以使用它来确定早上穿衣服的顺序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T13:57:37.447

我见过的最随意的使用是 make 代替 bash 用于[BCCD](http://bccd.cs.uni.edu/)上的 init 脚本。一旦你克服了wtf时刻，它实际上工作得很好......

将 make 视为具有附加功能的 shell 脚本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-19T14:00:56.457

好吧，我确信 UNIX 工具“make”仍然被大量使用，即使它在 .Net 世界中正在减弱。虽然现在可能有更多的人在使用 MSBUILD、Ant、nAnt 和其他工具，但它们本质上只是具有不同文件语法的“make”。基本概念是一样的。

对于任何将输入文件处理成输出文件的情况，制作工具都很方便。在 MSWord 中编写报告，但将它们作为 PDF 分发？-- 使用 make 生成 PDF。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-19T14:02:45.047

*如果*需要，通过 crontab 更改配置文件。

我有`postfix`地图和`squid`外部表的示例。

/etc/postfix/Makefile 的示例：

```
POSTMAP=/usr/sbin/postmap
POSTFIX=/usr/sbin/postfix

HASHES=transport access virtual canonical relocated annoying_senders
BTREES=clients_welcome

HASHES_DB=${HASHES:=.db}
BTREES_DB=${BTREES:=.db}

all: ${BTREES_DB} ${HASHES_DB} aliases.db
    echo \= Done

${HASHES_DB}: %.db: %
    echo . Rebuilding $< hash...
    ${POSTMAP} $<

${BTREES_DB}: %.db: %
    echo . Rebuilding $< btree...
    ${POSTMAP} $<

aliases.db: aliases
    echo . Rebuilding aliases...
    /usr/bin/newaliases 
```

ETC

# xml - 连接 EJB - 使用 JAXB 接口的 XML

> ID：101989
> 
> 赞同：5
> 
> 时间：2008-09-19T13:53:44.117
> 
> 标签：xml, jaxb, ejb

我试图将 XML 模式添加到现有的 EJB 项目中。JAXB 用于将 XML-Schema 绑定到 Java 类。因为我们将在 EJB 处于会话状态时使用搜索引擎通过 DTO 进行爬网。

我找不到将实体类文件映射到 XML-Schema 的任何直接方法。

到目前为止，我们可以实现的唯一方法是创建 Web 服务，生成生成 xml-schema (XSD) 的 WSDL，然后通过 JAXB（xjc 命令）解析 XSD 文件以创建 java 类文件。现在使用 mapping-binding.xml 文件，我们可以映射 XML 和 Java 类文件。

但现在的问题又是如何将其映射到实体类。

这就是我们想要实现的目标：

*   带有 XML 模式的 XML 数据对象，（这已经存在于 JAXB 规范中）。
*   实体 Bean 然后扩展或具有此 JAXB 对象的接口。
*   所有持久性功能都由实体 Bean 管理...
*   然后，实体 Bean 将包含 JAXB 中的 XML Marshalling 和 UnMarshalling 功能。
*   可以从实体 Bean 对象中以二进制或 XML 形式检索值对象。
*   JSP 可以轻松地从值对象中提取 XML 模式和 XML 数据，并对它执行诸如 XSL 转换之类的操作。

我的论点是实体 Bean 没有与 JAXB 对象交互的标准方法。

Castor 可能是解决方案，但是我们必须再次实现 Web 服务或使用 Castor JDO。

我发现 XStream 非常有用，因为它使用转换器类，您可以在其中调用实体 bean 类对象并生成 xml 文件。但我不喜欢使用另一个类，而是将这些功能合并到现有的 bean 类中。

你能在这方面帮助我吗？

* * *

我会告诉你我真正想要达到的目标。我正在创建一个搜索引擎，它将在会话中的 EJB 期间被调用，并将通过 DTO 使用爬虫并获取 XML 格式的快照。搜索将根据不同的标准。

Lucene 是搜索引擎工具之一，但它使用自己的属性和文件（将更像是独立的）

我已经有 DTO，Web 服务使用它在 PHP 和 Java 应用程序（EJB 层）之间进行通信。我想重新使用 jaxb 中的那些 DTO 作为爬虫来从 XML 中的表中获取输出，这是我无法做到的，因为 JAXB 通过 xml-schema 使用它自己生成的类。就像你说的那样，我还没有找到一种方法来指示 JAXB 到 bean 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-19T15:33:16.827

将数据模型（实体 bean）与 XML 接口紧密耦合可能不是世界上最好的主意。它会阻止您更改一个而不更改另一个。

我不是 100% 确定我了解您要做什么，但我认为有一种方法可以指示 JAXB 扩展类而不是创建新类。您可以像往常一样创建实体 Bean，并让 JAXB 生成的 bean 使用额外信息扩展这些实体 Bean。

我可以说从持久层以外的地方获取实体 bean 实例*（*例如从 XML 反序列化它们）对您来说将是一个*大*问题。

另请注意，使用 XML 在 Java 应用程序之间进行通信（例如在 JSP/Servlet 和 EJB 层之间）是一个坏主意；XML 的编组和增加的冗长对您的影响很小；通过 RMI 序列化对象（这是 EJB 将为您做的）将更容易实现、测试和维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-07-07T16:52:11.887

[EclipseLink JAXB (MOXy)](http://www.eclipse.org/eclipselink/moxy.php)可用于将 JPA 实体映射到 XML。

有关更多信息，请参阅：

*   [http://wiki.eclipse.org/EclipseLink/Examples/MOXy/JPA](http://wiki.eclipse.org/EclipseLink/Examples/MOXy/JPA)