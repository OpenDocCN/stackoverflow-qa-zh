# StackOverflow 问答 11904000-11904999

# c++ - C++ boost::shared_ptr 作为类的成员并重复设置其值

> ID：11904003
> 
> 赞同：2
> 
> 时间：2012-08-10T14:41:32.857
> 
> 标签：c++, boost, shared-ptr

我试图找出最干净的方法来实现使用 boost::shared_ptr 作为类的成员。假设我有一个 A 类，其中包含一个 B 类成员的 boost::shared_ptr。B 类可以是基本类型 (B) 或派生类型（比如 C 或 D）。该成员将在 A 类的整个生命周期中连续获取/设置（使用访问器/修饰符）。B 必须是多态的，所以我不能将它存储为 B，而是作为 B 的引用/指针。我还想避免自己管理内存。假设这一切看起来像：

```
class A
{
public:
    const B& GetB() const { const B* b = m_pB.get(); return *b; } // Is the correct way to do this?
    void SetB(const B& b) { B* b = m_pB.get(); *b = b; } // Is the correct way to do this?

private:
    boost::shared_ptr<B> m_pB;
}; 
```

我知道我可能做错了什么，但我想提供一个我正在努力完成的例子。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:48:33.130

我认为这个程序的设计需要重新思考。

共享指针的目的是您将动态分配的资源留在其中，以便它管理该资源的生命周期。如果您要更改其中的内容，则在替换其中的指针后，您有责任管理该资源的生命周期，这将导致混乱。

您可能应该只使用新的共享指针分配 m_pB 变量，以便原始指针超出范围并释放最初持有的资源。因此，分配共享指针，而不是它持有的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:52:29.920

在您的设置器中，您将新数据分配给现有元素，而不是更新指针。

正确的方法是：

```
void SetB(shared_ptr<B> ptr)
{
     m_pB = ptr;
} 
```

所以这样做你会将对象的所有权转移给类。对于使用，您将编写如下代码：

```
A a;

shared_ptr<B> ptrB(new C()); //or new D, whatever
a.SetB(ptrB); 
```

另一种选择，如果创建 B 的代码根本不使用 shared_ptr 并且 shared_ptr 将被封装在您的类中，则更改设置器以获取指向 B 的指针，例如：

```
void SetB(B *pB)
{
     m_pB.reset(pB);
} 
```

最后，如果最后一个示例是您需要的，并且 shared_ptr 将仅限于 A 类，我建议使用 scoped_ptr 而不是 shared_ptr。

# sql - 如何将平面文件从 URL 加载到 SQL 表

> ID：11904007
> 
> 赞同：1
> 
> 时间：2012-08-10T14:41:48.353
> 
> 标签：sql

我需要将 CSV 文件从 URL 下载到 SQL 表。在这种情况下，URL 如下所示：[http://mysource.com/mypage.aspx?text=All](http://mysource.com/mypage.aspx?text=All)。这指向一个 Excel CSV 文件。我需要定期将此文件中的数据加载到 SQL 表中，例如每 5 分钟一次。

我正在尝试从 SSIS 环境中创建一个包，但似乎应该首先使用脚本下载该文件？或者这可以在 SSIS 中完成。文件系统任务或平面文件源不喜欢 url 输入字符串，FTP 也不喜欢。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T16:15:35.183

这里有几个示例可以满足您的需求：

[http://www.sqlis.com/sqlis/post/Downloading-a-file-over-HTTP-the-SSIS-way.aspx](http://www.sqlis.com/sqlis/post/Downloading-a-file-over-HTTP-the-SSIS-way.aspx)

[http://microsoft-ssis.blogspot.com/2011/05/download-source-file-from-website-with.html](http://microsoft-ssis.blogspot.com/2011/05/download-source-file-from-website-with.html)

-t。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T16:03:31.020

我认为最好的方法是创建一个脚本任务并编写一些 c# 来完成它。据我所知，您只能通过 SSIS 进行 FTP。

先决条件你需要知道c#

# c# - 按 url 的性质控制内容的显示 - MVC/HTML/ASP/JS

> ID：11904009
> 
> 赞同：0
> 
> 时间：2012-08-10T14:42:04.547
> 
> 标签：c#, javascript, asp.net, html, asp.net-mvc

我有两个网站..（MVC 应用程序）

www.WebsiteA.com（其中有两个选项卡）就像这样......在其“.master”页面中。

```
 <ul id="module" class="module">       

        <li id="home"><%=Html.ActionLink("Home", "ActionHome", "Home")%></li>
        <li id="Pay"><%=Html.ActionLink("Payment", "ActionPay", "Payment")%></li>

    </ul> 
```

如果有人直接访问 www.websiteA.com 的网站，他们应该会看到这两个选项卡，主页和付款。

还有另一个网站可以说 www.WebsiteB.com 在它的一个页面中有这个 iframe。iframe 基本上指向第一个网站 A。

这是网站 B www.websiteB.com/linktoWebsiteA

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

    <iframe src="http://www.websiteA.com"</iframe>

</asp:Content> 
```

我的问题是：当有人直接访问网址（www.websiteA.com）时，如何让网站 A 显示两个选项卡，以及当他们通过网站中的 iframe B. Iframe 内的网站 A 应仅显示主页选项卡。感谢您的想法/帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T14:45:05.937

从 iframe 调用时，您可以传递查询字符串参数：

```
<iframe src="http://www.websiteA.com/?iframe=true"</iframe> 
```

然后使用`iframe`查询字符串参数显示您想要的选项卡：

```
<ul id="module" class="module">       
    <li id="home"><%=Html.ActionLink("Home", "ActionHome", "Home")%></li>
    <% if (!string.IsNullOrEmpty(Request["iframe"])) { %>    
        <li id="Pay"><%=Html.ActionLink("Payment", "ActionPay", "Payment")%></li>
    <% } %>
</ul> 
```

另一种可能性是使用 javascript，因为如果您不想传递一些额外的指示（例如查询字符串参数），这是了解网站是否在 iframe 内运行的唯一方法。

```
<script type="text/javascript">
    if (top !== self) { 
        // running inside an iframe => hide the tabs you don't want
    }
</script> 
```

# php - 需要一种方法来运行 mysqldump，而不是使用 system() 函数进行备份

> ID：11904011
> 
> 赞同：0
> 
> 时间：2012-08-10T14:42:05.420
> 
> 标签：php, mysqldump, shared-hosting

我将使用 php 脚本备份我的数据库，该脚本使用该`system()`函数执行命令。不幸的是，我的共享主机已禁用它。当我运行它时，我收到了这个警告：

> 警告：出于安全原因，system() 在第 162 行的 /path-to-my-file 中被禁用

这是我的一段代码：

```
$filename = 'backup/mybackupfile.sql';
$command = "mysqldump -u myuser -pmypass mydatabase > ". $filename ."";
system($command); 
```

它在我的本地计算机上运行良好`xampp`，但它恰好是我的共享主机上的问题。

所以，我需要另一种方式来运行`mysqldump`命令，而不是使用`system()`. 我尽量避免使用**cron**或其他`SELECT * OUTFILE`东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:49:05.633

正如哈克拉夫人已经说过的，如果您的主机禁用了系统命令的执行，您将根本无法运行`mysqldump`。

您必须要求他们启用系统命令，或使用 PHP 脚本进行转储。但是，对周围的 PHP 转储脚本要非常小心：我的经验表明，许多转储文件都创建了损坏或不完整的转储。

一些谷歌搜索揭示了像[这个](http://davidwalsh.name/backup-mysql-database-php)这样的小工具。但如前所述，要小心并进行一些测试以验证准确性。

我所知道的能够正常工作的最好的基于 PHP 的导出工具是[PhpMyAdmin](http://www.phpmyadmin.net/home_page/index.php)。也许这会有所帮助。从理论上讲，它甚至应该可以隔离它的导出库，但据我所知，它并没有以任何简单的方式公开它以便在其他脚本中使用。

# sencha-touch - Sencha Touch 应用程序在浏览器中显示为空白

> ID：11904012
> 
> 赞同：0
> 
> 时间：2012-08-10T14:42:08.353
> 
> 标签：sencha-touch, sencha-touch-2, sencha-architect

我有一个使用 Sencha Architect 2.0.0 制作的非常简单的 Sencha Touch 2.0.1 应用程序：从本地 json 文件加载的项目列表。如果我将它导出到 APK 并将其安装在我的机器人上，它会完美显示。但是，当我尝试在浏览器中预览它时，它显示为一个空白屏幕。

我在 Chrome 和 Safari 中都试过了。Safari 在我第一次加载页面时完美地显示了它，但我再也没有让它工作了。我尝试清除互联网数据，但没有效果。

因为我不知道是什么导致了这个问题，所以我将发布一个指向我的代码的链接，而不是在这里列出所有内容。谢谢。

.xda 存档：[http](http://www.mediafire.com/?9k2341dtblyq4e1)
://www.mediafire.com/?9k2341dtblyq4e1 .zip 文件：[http ://www.mediafire.com/?07s6pfa734l3ewi](http://www.mediafire.com/?07s6pfa734l3ewi)

也许另一条相关信息是我正在使用带有默认配置的 WAMPSERVER 2.2，而且我的大多数其他应用程序（使用列表视图）也遇到了这个问题。

Sencha 的 CityBars 教程完全在 Chrome 中运行，并在 Safari 中加载标题栏，但不加载任何要单击的项目。[http://docs.sencha.com/architect/2-0/#!/guide/first_mobile_app](http://docs.sencha.com/architect/2-0/#!/guide/first_mobile_app)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:10:02.467

几件事：

将这些添加到列表的配置中：

```
 fullscreen:true,
  layout:'fit', 
```

将此添加到应用程序的配置 (app.js) 中：

```
launch: function() {
  Ext.Viewport.add({
    xclass: 'MyApp.view.MyNavigationView'
  });
} 
```

然后，您商店中的网址可能应该是：

```
url: 'data/data.json', 
```

我使它与这些配置一起工作。希望这有帮助

[[下载]](http://d.pr/f/USyG)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:39:07.067

可能有点晚了，但我的回答可能对其他人有所帮助：确保您在 DataView 中使用的商店的“autoLoad”属性已“勾选”（如果您使用的是 Sencha Architect）。

希望能帮助到你。

# c# - NHibernate：如何保持对集合中最后添加的元素的引用？

> ID：11904014
> 
> 赞同：1
> 
> 时间：2012-08-10T14:42:11.817
> 
> 标签：c#, nhibernate, fluent-nhibernate

我在一个对象中有一组项目，我需要保留对集合中最后添加的项目的引用，所以我这样做：

```
public class VehicleMap : BaseUniqueNamedEntityMap<Vehicle>
    {
        public VehicleMap():
            base("vehicle_id", 40)
        {
            Not.LazyLoad();                

            //The main collection of items
            HasMany(x => x.mVehicleModels)                                        
                .OrderBy("date asc")
                .Cascade.AllDeleteOrphan()                    
                .LazyLoad()
                .KeyColumn("vehicle_id");

            //Always updated to the last added item
            References(x => x.mCurrentModel)
                .Column("current_vehicle_model_relation_id")
                .Cascade.None()
                .Not.Nullable();
        }
    } 
```

Vehicle 类如下所示：

```
 public class Vehicle : BaseUniqueNamedEntity
{        
    private IList<VehicleModelItem> mVehicleModels = new List<VehicleModelItem>();

    [NotNull()]
    private VehicleModelItem mCurrentModel;

    public VehicleModel Model
    {
        get { return mCurrentModel.VehicleModel; }

        set 
        {
            //Check null before checking if values change, so we catch exceptions on constructor also
            if (value == null)
                throw new ArgumentNullException("Vehicle model cannot be null");                

                //When model is set, we update current model and insert it on list
                mCurrentModel = new VehicleModelItem(this, value);
                mVehicleModels.Add(mCurrentModel);
                value.AddVehicleModelItem(mCurrentModel);                    
        }
    }          
} 
```

VehicleModelItem 映射：

```
public VehicleModelItemMap() :
            base("vehicle_model_relation_id")
        {
            Not.LazyLoad();                

            References(x => x.mVehicleModel)
                .Column("vehicle_model_id")
                .Cascade.None()
                .LazyLoad(Laziness.Proxy)
                .Not.Nullable();

            Map(x => x.mDate)
                .Column("date")
                .Not.Nullable();
        } 
```

问题是，如果我创建一辆新车，例如：

```
Vehicle vehicle = new Vehicle();
vehicle.Model = anyExitingVehicleModel;

session.save(vehicle); 
```

我得到一个“空或瞬态对象设置为非空属性”，在本例中是 VehicleModelItem 中的属性 Vehicle。

问题与车辆中的 mCurrenveVehicleModel 属性有关，如果我删除它，一切正常，但我无法跟踪最后添加的项目（至少不是通过这种方式）。

无论如何，我可以在不需要为 VehicleModelItem 和车辆调用 save 的情况下完成这项工作吗？

我在这些集合上尝试了几种 Cascade 组合，但没有成功。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:52:28.870

尝试将您的 VehicleMap 更改为：

```
public class VehicleMap : BaseUniqueNamedEntityMap<Vehicle>
{
    public VehicleMap():
        base("vehicle_id", 40)
    {
        Not.LazyLoad();                

        //The main collection of items
        HasMany(x => x.mVehicleModels)                                        
            .OrderBy("date asc")
            .Cascade.AllDeleteOrphan()                    
            .LazyLoad()
            .KeyColumn("vehicle_id")
            .Inverse();

        //Always updated to the last added item
        References(x => x.mCurrentModel)
            .Column("current_vehicle_model_relation_id")
            .Not.Nullable()
            .Not.Insert();
    }
} 
```

这与我所做的类似，除了我手动设置“引用”部分而不是将其包含在 setter 中。唯一的缺点是，将“Inverse”设置为 true，您必须在 VehicleModelItem 上手动指定父级。由于构造函数传入了该引用，我假设您已经这样做了。

# c++ - 从 boost python 调用具有可变数量输入参数的 Python 函数

> ID：11904015
> 
> 赞同：1
> 
> 时间：2012-08-10T14:42:16.623
> 
> 标签：c++, python, boost-python

是否可以从 boost::python 内部调用具有可变数量输入参数的 python 函数：

在python中我定义了一个函数

```
def py_fn1(a):
    return 2 * a

def py_fn2(a, b):
    return a+b

def call_fn_py(fn, *args):
    return fn(*args)

a = call_fn_py(py_fn1, 15)  # returns 30
b = call_fn_py(py_fn2, 10, 11)  # returns 21 
```

根据评论给出结果。我想使用 boost python 在 C++ 中实现 call_fn(fn, *args) 。到目前为止，我有：

```
using namespace boost::python;
object call_fn(object fn, tuple arg_in)
{
return fn(arg_in);
}

BOOST_PYTHON_MODULE(python_addins)
{
    using namespace boost::python;
def("call_fn", &call_fn);
} 
```

但随后做类似的事情：

```
import python_addins

d = python_addins.call_fn(py_fn1, (5,))  # returns (5,5) 
```

这不是我所追求的。如何编写 call_fn 使其表现得像 call_fn_py？

谢谢，马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:45:19.507

可以使用可变数量的参数调用 python 函数。有两种方法：

*   通过创建一组`call_fn`函数来模拟可变数量的参数。
*   利用 python 将多个对象打包和解包到一个元组中的能力。

* * *

第一种方法对于通用 C++ 编程相当普遍。它需要创建一组根据参数数量变化的重载函数：`call_fn( fn )`, `call_fn( fn, A1 )`, `call_fn( fn, A1, ...An)`. 使用 C++11 可变参数模板函数可以减少样板代码的数量。但是，在定义包装器时，必须指定模板函数的确切类型。因此，这种方法将根据包装的模板实例化限制参数的数量。

```
#include <boost/python.hpp>

using boost::python;
object call_fn1( object fn, object a1 )
{
  return fn( a1 );
}
object call_fn2( object fn, object a1, object a2 )
{
  return fn( a1, a2 );
}
object call_fn3( object fn, object a1, object a2, object a3 )
{
  return fn( a1, a2, a3 );
}

BOOST_PYTHON_MODULE(example)
{
  def( "call_fn", &call_fn1 );
  def( "call_fn", &call_fn2 );
  def( "call_fn", &call_fn3 );
} 
```

这是一个演示：

```
>>> def py_fn1( a ): return 2 * a
... 
>>> def py_fn2( a, b ): return a + b
... 
>>> def call_fn_py( fn, *args ):
...     from example import call_fn
...     return call_fn( fn, *args )
... 
>>> call_fn_py( py_fn1, 15 ) 
30
>>> call_fn_py( py_fn2, 10, 11 )
21 
```

* * *

第二种方法利用元组。它要求调用者将参数打包成一个元组，并要求调用函数解包参数。但是，由于在 python 中进行元组打包和解包更容易，`example.call_fn`可以在 python 中进行修补，以便函数参数用辅助函数装饰，该函数在委托之前解包参数。

在 C++ 中，创建一个`call_fn`接受单个`boost::python::tuple`参数的函数。

```
#include <boost/python.hpp>

using namespace boost::python;
object call_fn( object fn, tuple args )
{
  return fn( args );
}

BOOST_PYTHON_MODULE(example)
{
  def( "call_fn", &call_fn );
} 
```

现在，创建`example_ext.py`将补丁`example.call_fn`：

```
import example

def patch_call_fn():
    # Store handle to unpatched call_fn.
    original = example.call_fn

    # Helper function to create a closure that unpacks arguments
    # before delegating to the user function.
    def unpack_args( fn ):
        def wrapper( args ):
            return fn( *args )
        return wrapper

    # The patched function that will wrap the user function.
    def call_fn( fn, *args ):
        return original( unpack_args( fn ), args )

    return call_fn

# Patch example.
example.call_fn = call_fn = patch_call_fn() 
```

可以使用相同的演示，唯一需要的更改是`example_ext`需要导入而不是`example`.

```
>>> def py_fn1( a ): return 2 * a
... 
>>> def py_fn2( a, b ): return a + b
... 
>>> def call_fn_py( fn, *args ):
...     from example_ext import call_fn
...     return call_fn( fn, *args )
... 
>>> call_fn_py( py_fn1, 15 ) 
30
>>> call_fn_py( py_fn2, 10, 11 )
21 
```

# c# - QuickGraph Metro 风格应用程序支持

> ID：11904018
> 
> 赞同：2
> 
> 时间：2012-08-10T14:42:19.710
> 
> 标签：c#, .net, microsoft-metro, quickgraph

我想在 Win8 Metro 风格的应用程序中使用 QuickGraph 库。但是我没有设法在新创建的应用程序中引用它。我使用了简单的空白应用程序模板。我尝试通过 Nuget 安装它，我收到以下错误：

安装失败。回滚...无法安装包“QuickGraph 3.6.61119.7”。您正在尝试将此包安装到以“.NETCore,Version=v4.5”为目标的项目中，但该包不包含与该框架兼容的任何程序集引用。有关详细信息，请联系包作者。

有没有人设法在 .NET 4.5 中使用它？

提前谢谢亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:08:15.503

根据他们的页面，他们不支持 .NET Framework 4.5（Metro 应用程序需要），所以可能这就是您遇到此问题的原因。

> ◾.NET 2.0、3.5、4.0 或 Silverlight 3.0

# php - Symfony 2，没有文件的实体？

> ID：11904020
> 
> 赞同：-1
> 
> 时间：2012-08-10T14:42:21.560
> 
> 标签：php, symfony

**情况：**

我有一个 MySQL 数据库，其中包含数百个将由管理员操作生成的表。我想利用 symfony 实体的好处，但我不想为此生成数百个实体文件。

**目标：**

有一个实体工厂之类的东西，它可以返回我的表对象。

**Zend 框架：**

```
$bugTable = new Zend_Db_Table('job_153'); 
```

有没有办法通过 symfony 2 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:52:19.393

我认为不可能在运行时动态定义实体。

如果您有一个复杂的模式，那么`doctrine:mapping:import`自动生成映射文件可能会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:47:01.567

经过一些研究，我认为使用内置方法是不可能的。

# python - 如何将 main.css 链接到所有 Django 模板？

> ID：11904022
> 
> 赞同：0
> 
> 时间：2012-08-10T14:42:38.760
> 
> 标签：python, css, django

我希望能够从 Django 中的所有模板调用 main.css 中的类。目前，我将它存储在 app_name/static/css/main.css 中。如何将其链接到模板，以便我可以简单地将类添加到 html 元素并应用该类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:45:01.310

我会使用包含所有常用内容（JQuery、main.css）的基本模板。

因此，您将有一个名为`base.html`will **all** basic stuff and placeholders 的模板用于特定页面内容：

```
<html>
<head>
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}/css/main.css">
    {% block additional_header %}
    {% endblock %}
</head>
<body>
    {% block content %}
    {% endblock %}
</body>
</html> 
```

然后，您的**实际**页面将是一个具有以下内容的模板：

```
{% extends 'base.html' %}
{% block content %}
This is specific content for your page
{% endblock %} 
```

[查看 Django 的官方文档](https://docs.djangoproject.com/en/dev/topics/templates/)。查找标题为 的部分`Template Inheritance`。

# android - 带有 setMaxDuration 的进度条

> ID：11904027
> 
> 赞同：1
> 
> 时间：2012-08-10T14:43:09.617
> 
> 标签：android, progress-bar, mediarecorder

我四处寻找，但没有找到答案。我正在使用`MediaRecorder`类和`setMaxDuration(10000)`方法录制视频。但是，我想显示在这 10 秒的进度条中已经过去了多少时间。我只看到使用类的`getDuration`方法的例子`MediaPlayer`。谁能给我一个如何使用`MediaRecorder`with的例子`progress bar`？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:15:10.170

只需使用[`Timer`](http://developer.android.com/reference/java/util/Timer.html).

```
//fires once a second, decrease this to fire more frequently
private static final int TIMER_FREQ = 1000; 

//ProgressBar setup. You should do this in a way more tailored to your needs,
//but I've included it anyway
final ProgressBar progressBar = new ProgressBar(this); //where this is a Context
progressBar.setMax(10000);

Timer progressBarAdvancer = new Timer();
progressBarAdvancer.scheduleAtFixedRate(new TimerTask() {

        public void run() {
            progressBar.setProgress(progressBar.getProgress() + TIMER_FREQ);
        }
    },
    0, //Delay before first execution
    TIMER_FREQ); 
```

这将在`progressBar`与录制不同的线程上运行，但它将在 10 秒内完成，此时您可以停止录制、完成等。

# php - jQuery tablesorter 禁用列

> ID：11904029
> 
> 赞同：1
> 
> 时间：2012-08-10T14:43:10.560
> 
> 标签：php, jquery, tablesorter

我正在尝试使用 JQuery 插件 tablesorter 2.0.5 禁用表的第一列

虽然它确实禁用了，但我不能再正确地对其他列进行排序。我只能在一个列上单击一次，然后必须在另一列上单击一次才能再次单击（仍然只有一次），如本文[所述](https://stackoverflow.com/questions/11667572/tablesorter-combining-sortlist-with-disabled-columns)。

我遵循[了第一个示例](http://tablesorter.com/docs/example-options-headers.html)和[另一个示例](http://mottie.github.com/tablesorter/docs/example-parsers-class-name.html)

这是我在 php 视图中包含的代码

```
echo '<script type="text/javascript" language="JavaScript">

$(document).ready(function() { 
    $("table").tablesorter({ 
    headers: { 
        0: {sorter: false}
    } 
    }); 
});

</script>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:28:08.063

好的，这是[给你的 jsFiddle 演示](http://jsfiddle.net/Mottie/eY8uH/113/)

您的代码看起来不错，只是不再需要该`language`属性，所以我不确定您可能在哪里遇到问题。

```
echo '<script type="text/javascript">
$(document).ready(function() { 
    $("table").tablesorter({ 
    headers: { 
        0: {sorter: false}
    } 
    }); 
});
</script>'; 
```

要检查的事情是：

1.  确保只有一份 jQuery 正在运行
2.  确保在 jQuery 之后加载 tablesorter 脚本（脚本标签应该在它之后）
3.  确保这`table`是 tablesorter 的正确目标。您可能需要将 ID 或类名添加到表中，然后将其作为目标，例如`$("#mytable")`.
4.  检查您的页面是否有错误 - 按 F12，转到控制台，然后重新加载页面。

# string - 如何写入.mat文件matlab

> ID：11904031
> 
> 赞同：0
> 
> 时间：2012-08-10T14:43:21.763
> 
> 标签：string, file, matlab

我的文件夹中有几个 .mat 文件。我想给他们每个人写几个变量，字符串，由我在执行这个程序期间指定。如何从 matlab 写入并将这些字符串保存到 .mat ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:53:58.483

您可以使用带有“-append”参数的命令保存

保存 matfile -append

[在http://www.mathworks.com/help/techdoc/matlab_prog/f10-61206.html](http://www.mathworks.com/help/techdoc/matlab_prog/f10-61206.html)查看详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:50:51.233

[http://www.mathworks.com/help/techdoc/import_export/braidzi-1.html](http://www.mathworks.com/help/techdoc/import_export/braidzi-1.html)

`save('mymatfile.mat', 'string1', 'variable42');`

除非您的问题没有明确说明，否则我认为您在提问之前并没有非常努力地寻找答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T14:56:31.053

`-append`您可以在保存时使用标志附加 .mat 文件。如果您尝试附加到文件的变量名称已存在于文件中，它将被此命令覆盖。

前任。

```
>> save <your .mat filename> <your variables> -append 
```

# php - 使用 PHP 从 MySQL 打印两个日期之间的业务日期 Ymd 列表

> ID：11904033
> 
> 赞同：0
> 
> 时间：2012-08-10T14:43:36.967
> 
> 标签：php, mysql, date, between

我有这张`MySQL`桌子：

```
desc studentabsence;
+---------------------------+-------------+
| Field                     | Type        |
+---------------------------+-------------+
| student_id                | INT(11)     |
| student_absence_startdate | date        |
| student_absence_enddate   | date        |
+---------------------------+-------------+ 
```

假设我们有

**student_absence_startdate** = 2012-08-01
**student_absence_enddate** = 2012-08-08

使用 PHP，我想`echo`在该范围（周一至周五）之间的所有工作日。

从上述范围我想打印：

> 2012-08-01
> 2012-08-02
> 2012-08-03
> 2012-08-06
> 2012-08-07
> 2012-08-08

我应该如何以及从哪里开始实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T14:50:49.513

```
// Date strings from DB
$startDate = '2012-08-01';
$endDate = '2012-08-08';

// Convert to UNIX timestamps
$currentTime = strtotime($startDate);
$endTime = strtotime($endDate);

// Loop until we reach the last day
$result = array();
while ($currentTime <= $endTime) {
  if (date('N', $currentTime) < 6) {
    $result[] = date('Y-m-d', $currentTime);
  }
  $currentTime = strtotime('+1 day', $currentTime);
}

// Show the result
// You could loop the array to pretty-print it, or do it within the above loop
print_r($result); 
```

[看到它工作](http://codepad.viper-7.com/oFmxV3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T14:48:18.557

这将打印日期范围：

```
$startDate = '2012-08-01';
$endDate = '2012-08-08';

$date = new DateTime($startDate);
while ($date->format('Y-m-d') != $endDate) {

    if ($date->format('N') > 5) {
        $date->modify('+1 day');
        continue;
    }

    echo $date->format('Y-m-d') . PHP_EOL;
    $date->modify('+1 day');
}
echo $endDate; 
```

# macos - OS X 上的 Emacs 中出现奇怪的垂直线？

> ID：11904035
> 
> 赞同：3
> 
> 时间：2012-08-10T14:43:40.803
> 
> 标签：macos, emacs, emacs24

我的 emacs 显示奇怪的垂直线。这些线条随机出现在任何颜色和长度中。他们似乎没有任何理由出现。当我切换缓冲区或滚动时，它们有时会消失/改变 - 基本上是任何强制整个帧重绘的活动。它们随机出现在帧的任何部分，尤其是在行号的装订线和两侧。我在 OS X 10.7.4 上使用 Emacs 24.1。我已经检查过，所有其他应用程序都呈现得非常好，这仅在 Emacs 中发生。我试图在网上找到任何类似的问题，但我根本找不到任何东西，所以我想我会在这里发布。

问题不是停止工作，但肯定很烦人。任何帮助将非常感激。

附上[截图](http://snag.gy/WznV4.jpg)。可以在此处的侧面看到线条。行号区有黑线，两边有白线。您还可以在左下角看到一些红色虚线。

# javascript - 纯Javascript双向数据绑定

> ID：11904039
> 
> 赞同：14
> 
> 时间：2012-08-10T14:43:45.130
> 
> 标签：javascript, jquery, data-binding

出于好奇和增加知识，我想在 dom 元素和 javascript 变量之间实现某种双向数据绑定。

我很幸运在这里@stackoverflow 找到了解决我一半问题的绝佳答案，这让我想到了这个要点[https://gist.github.com/384583](https://gist.github.com/384583)，但我仍然无法以 100% 的速度完成任务。

这是**我的代码示例**：http : [//jsfiddle.net/bpH6Z/](http://jsfiddle.net/bpH6Z/)

如果您尝试运行小提琴并单击“查看值”，您将得到**undefined**，而我想获得对象属性的实际值。

由于我缺乏使用 javascript 的经验，我可能做错了什么，但是您知道为什么在 _bind() 和 _watch() 调用之后我无法正确读取属性“秘密”吗？

**免责声明**：正如我所说，我这样做是因为我想要更好地了解 javascript，并且我不会编写我的框架。所以任何“使用框架 X”都是完全没用的，因为我可以用 angularjs 完成工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T15:03:17.807

请尝试[http://jsfiddle.net/bpH6Z/4/](http://jsfiddle.net/bpH6Z/4/)

我已经更新了您在 Object.prototype.__watch 中重新定义的 getter/setter，目前您的处理程序也需要返回新值。

更新：现在您的处理程序不需要返回新设置的值。

当前代码：

```
//Got this great piece of code from https://gist.github.com/384583
Object.defineProperty(Object.prototype, "__watch", {
    enumerable: false,
    configurable: true,
    writable: false,
    value: function(prop, handler) {
        var val = this[prop],
            getter = function() {
                return val;
            },
            setter = function(newval) {
                val = newval;
                handler.call(this, prop, newval);
                return newval;
            };

        if (delete this[prop]) { // can't watch constants
            Object.defineProperty(this, prop, {
                get: getter,
                set: setter,
                enumerable: true,
                configurable: true
            });
        }
    }
});

var Controller = function () {
    //The property is changed whenever the dom element changes value
    //TODO add a callback ?
    this._bind = function (DOMelement, propertyName) {
        //The next line is commented because priority is given to the model
        //this[propertyName] = $(DOMelement).val();
        var _ctrl = this;
        $(DOMelement).on("change input propertyChange", function(e) {
            e.preventDefault();
            _ctrl[propertyName] = DOMelement.val();
        });

    };

    //The dom element changes values when the propertyName is setted
    this._watch = function(DOMelement, propertyName) {
        //__watch triggers when the property changes
        this.__watch(propertyName, function(property, value) {
            $(DOMelement).val(value);
        });
    };
};

var ctrl = new Controller();
ctrl.secret = 'null';
ctrl._bind($('#text1'), 'secret'); // I want the model to reflect changes in #text1
ctrl._watch($('#text2'), 'secret'); // I want the dom element #text2 to reflect changes in the model
$('#button1').click(function() {
    $('#output').html('Secret is : ' + ctrl.secret); //This gives problems
}); 
```

当前的 HTML：

```
<html>
<head></head>
<body>
    value: <input type="text" id="text1" /><br />
    copy: <input type="text" id="text2" /><br />
    <input type="button" id="button1" value="View value"><br />
    <span id="output"></span>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T15:02:56.400

您传递给`__watch`函数的处理程序缺少一条`return`语句。

```
this._watch = function(DOMelement, propertyName) {
    //__watch triggers when the property changes
    this.__watch(propertyName, function(property, value) {
        $(DOMelement).val(value);
        return value;
    })

} 
```

因为`newval`设置为从处理程序返回的内容，所以`undefined`没有它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-18T12:05:12.407

我已经为多观察者增强了它。

[http://jsfiddle.net/liyuankui/54vE4/](http://jsfiddle.net/liyuankui/54vE4/)

```
//The dom element changes values when the propertyName is setted
this._watch = function(DOMelement, propertyName) {
    //__watch triggers when the property changes
    if(watchList.indexOf(DOMelement)<0){
        watchList.push(DOMelement);
    }
    this.__watch(propertyName, function(property, value) {
        for(var i=0;i<watchList.length;i++){
            var watch=watchList[i];
            $(watch).val(value);
            $(watch).html(value);
        }
    });
}; 
```

# python - 在 Python 中获取键的顶部长度

> ID：11904040
> 
> 赞同：1
> 
> 时间：2012-08-10T14:43:53.080
> 
> 标签：python, python-3.x, dictionary, string-length

> **可能重复：**
> [在字典中查找最长（字符串）键](https://stackoverflow.com/questions/10895567/find-longest-string-key-in-dictionary)

无需折叠。例子：

```
from functools import reduce
dict = {'t1': 'test1', 'test2': 't2'}
print(len(reduce(lambda x, y: x if len(x) >= len(y) else y, dict.keys()))) 
```

有什么方法可以在 aa 字典中获取最长键的长度（最好是一行）？折叠没有什么问题，但我只是对 Python 3 中是否有另一种方法感兴趣。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T14:46:21.783

你可以简单地做

```
max(map(len, my_dict)) 
```

这将获取所有键的长度并提取这些长度的最大值。

要获得最长的密钥本身，请使用

```
max(my_dict, key=len) 
```

# curljs - 相对路径和 curl.js

> ID：11904049
> 
> 赞同：3
> 
> 时间：2012-08-10T14:44:34.180
> 
> 标签：curljs

我有一个这样布置的项目：

*   库/
    *   bar.js
    *   curl.js
*   源/
    *   foo.js
*   测试/
    *   测试.html

在我的`test/test.html`文件中，我有以下内容

```
<script type="text/javascript" src="../lib/curl.js" charset="utf-8"></script>
<script type="text/javascript" charset="utf-8">

  curl(['../src/foo'], function (Foo) {
    console.log(Foo);
  });

</script> 
```

这失败了，我看到的唯一解决方法是在加载 curl.js 之前包含以下内容：

```
<script>

  curl = {
    paths: {
      src: '../src'
    }
  };

</script> 
```

所以我的第一个问题是，如果我只想链接到目录中的单个文件，为什么必须以这种方式设置路径`src/`。

假设第一个问题已解决，我的第二个问题在`src/foo.js`. 我想对该文件有依赖`lib/bar.js`，所以我写了以下内容：

```
define(['../lib/bar'], function (Bar) {
  return Bar;
}); 
```

唉，这不起作用，因为 curl.js 正在尝试加载`test/lib/bar.js`，而不是`lib/bar.js`像我希望的那样。如果唯一的选择是`paths`为 curl 指定一个对象，是否可以在`src/foo.js`模块中执行此操作，还是必须全部在`test/test.html`文件中完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T17:24:32.443

> 所以我的第一个问题是，如果我只想链接到 src/ 目录中的单个文件，为什么必须以这种方式设置路径。

好问题。这看起来可以称为错误。我们可能应该解决这个问题，但恕我直言，这不是主要问题。让我解释....

curl.js 面向复杂项目，其中模块被捆绑到“包”中——在概念上与 CommonJS/NodeJS 包非常相似。在包中，使用“../”导航出一个包并进入另一个包是没有意义的。事实上，我们中的许多人认为这应该会产生错误。不幸的是，curl.js 在这种情况下只是默默地失败了（这绝对是一个错误恕我直言）。

您看到的错误可能是 curl.js 在您不使用包时应用了包导航逻辑。（嗯，对我来说听起来更像是一个错误。:)）

所以，一般来说，curl.js 需要一个配置。此配置中最重要的部分是 baseUrl。baseUrl 告诉 curl 应用程序的根所在的位置。在您的情况下，它是“..”（您也可以将其写为“../”，但 curl 无论如何都会在内部切断尾随的“/”。

您不必使用全局预配置 curl。您还可以在第一次像这样调用 curl() 时包含配置。

```
curl({ baseUrl: '..' }, ['src/foo'], function (Foo) {
    console.log(Foo);
}); 
```

我想这也回答了你的第二个问题。您可以使用 baseUrl 而不是配置路径。但是，一旦您开始组织模块，路径最终会派上用场。例如，路径可以将像“lib/jquery-1.8.0/jquery.min.js”这样的凌乱路径翻译成“jquery”。

```
curl({ baseUrl: '..', paths: { "lib/jquery-1.8.0/jquery.min.js": "jquery" }); 
```

我实际上推荐包而不是路径。随着越来越多的人开始编写可以在节点和浏览器中运行的 CommonJS 包，这可能变得不可避免。此外，我们计划围绕包构建 curl.js 的 compile-to-javascript 功能。

希望我有所帮助。:)

# youtube - 切换到 bbcode 时无法将 youtube 视频添加到 ckeditor

> ID：11904052
> 
> 赞同：4
> 
> 时间：2012-08-10T14:44:45.963
> 
> 标签：youtube, ckeditor, wysiwyg

我安装了 ckeditor 并将其默认设置为 html 输出，然后我设法通过单击 flash 按钮并像这样放置 youtube 链接来添加 youtube 视频：`http://www.youtube.com/v/G6Na--PE9Yo`

现在我切换到bbcode，当我做同样的事情时它不起作用。我什至尝试使用 YouTube 插件，但仍然无法正常工作。

如果你知道如何解决它，我很想听听。我有线索，但我不知道该怎么做。

每当有人放置 youtube 链接时，我希望它将其替换为以下语法：

```
[youtube]http://www.youtube.com/v/G6Na--PE9Yo[/youtube] 
```

在 html 输出上它应该是：

```
<embed allowfullscreen="true" height="300" src="http://www.youtube.com/v/G6Na--PE9Yo?version=3&amp;color1=0xb1b1b1&amp;color2=0xcfcfcf&amp;feature=player_embedded" type="application/x-shockwave-flash" width="500"></embed> 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-27T08:18:59.017

我使用了 CKEditor 4.1.2 和 BBCode add-on 4.1.3，但我认为最新版本（4.3）并没有太大的不同。您需要做的所有更改都在 BBCode 插件中：

1.  YouTube 插件会创建 iframe，但我们需要将它们视为`youtube`bbcode 的“标签”。所以添加`iframe: 'youtube'`到第`convertMap`30 行。

2.  现在我们需要将该“标签”映射到 BBCode 标签。添加`youtube: 'youtube'`到第`bbcodeMap`29 行

3.  现在我们需要指定如何处理这个`youtube`标签。转到`editor.dataProcessor.htmlFilter.addRules`（第 637 行）并`else if`为`youtube`标签添加新的：

代码：

```
else if (tagName == 'youtube') {
   element.isEmpty = 0;
   var arr = attributes.src.split('/');
   var ytid = arr[arr.length - 1].split('?')[0];
   element.children = [new CKEDITOR.htmlParser.text(ytid)];
   element.attributes.ytheight = attributes.height;
   element.attributes.ytwidth = attributes.width;
} 
```

第一行是`img`标签的复制粘贴。我不确定它的作用。接下来的 3 行是从属性中获取 YouTube id`src`并放在`youtube`这样的标签之间`[youtube]{id}[/youtube]`。在 YouTube 标记中放置完整的 URL 是个坏主意，因为用户可以在其中放置任何 URL。请参阅约定：[http](http://www.bbcode.org/reference.php) ://www.bbcode.org/reference.php 。这个解决方案在你的情况下就足够了，但在我的情况下还不够。我也需要转移宽度和高度。所以最后 2 行添加了自定义属性`ytheight`和`ytwidth`. 我使用`yt`前缀，以便其他元素具有`height`或`width`不会将这些属性添加到它们的 BBCode 中。

4.转到`var BBCodeWriter = CKEDITOR.tools.createClass`（第 407 行）。在`proto:`（第 432 行）中有一个函数`attribute : function( name, val )`（第 486 行）添加一个`else if`for`ytheight`和一个`ytwidth`

代码：

```
else if (name == 'ytwidth') { 
    this.write(' width=', val); 
} else if (name == 'ytheight') {
    this.write(' height=', val);
} 
```

如果需要，您可以通过这种方式添加更多属性。

最终输出：

`[youtube height=315 width=560]0aSCPmabRpM[/youtube]`

PS 这种方法的缺点是所有 iframe 都将被视为 YouTube，但我认为您不需要任何其他 iframe。

# asp.net-mvc-3 - 是否必须在更新后显式调用 Session.Flush() 并删除我的应用程序存在更大问题的迹象？

> ID：11904053
> 
> 赞同：0
> 
> 时间：2012-08-10T14:44:50.847
> 
> 标签：asp.net-mvc-3, nhibernate, session, transactions

是的，所以我可以很容易地*创建*项目，而无需在 Session.SaveOrUpdate(entity) 之后显式调用 Session.Flush() - 但更新或删除时并非如此。除了键入 Session.Flush() 我还可以键入 Session.Transaction.Commit() 来实现相同的效果（即即时删除/更新）。

这让我相信我的 NHibernateActionFilter 事务处理存在问题，即它只提交*了一些*时间而不是所有时间。我不太确定为什么？

品牌控制器：会话控制器

```
 [HttpPost]
    public ActionResult Edit (EditBrandViewModel editBrandViewModel)
    {
        if(ModelState.IsValid)
        {
            var model = editBrandViewModel;
            var brand = Session.Get<Brand>(model.Id);

            Mapper.Map(model, brand);
            Session.SaveOrUpdate(brand);
            Session.Flush();
            return RedirectToAction("Details/" + model.Id);
        }

        return View(editBrandViewModel);
    }

    public ActionResult Delete(int id)
    {
        var brand = Session.Get<Brand>(id);
        Session.Delete(brand);
        Session.Flush();
        return RedirectToAction("Index");
    } 
```

会话控制器：

```
public class SessionController : Controller
{
    public HttpSessionStateBase HttpSession
    {
        get { return base.Session; }
    }

    public new ISession Session { get; set; }
} 
```

NHibernateActionFilter：

```
public class NHibernateActionFilter : ActionFilterAttribute
{
    private static ISessionFactory sessionFactory;

    public NHibernateActionFilter(ISessionFactory sessionFactory)
    {
        sessionFactory = sessionFactory;
    }

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var sessionController = filterContext.Controller as SessionController;

        if (sessionController == null)
            return;

        sessionController.Session = sessionFactory.OpenSession();
        sessionController.Session.BeginTransaction();
    }

    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        var sessionController = filterContext.Controller as SessionController;

        if (sessionController == null)
            return;

        using (var session = sessionController.Session)
        {
            if (session == null)
                return;

            if (!session.Transaction.IsActive)
                return;

            if (filterContext.Exception != null)
                session.Transaction.Rollback();
            else
                session.Transaction.Commit();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T11:41:47.480

如果没有显式事务，插入可能会在 NHibernate 中立即触发，具体取决于您映射身份列的方式。这是因为 NHibernate 希望他/她的实体在调用 Save/SaveOrUpdate 后具有有效的 Id 值。像“identity”这样的数据库生成策略必须在执行 SaveOrUpdate 时立即触发它，但是像“guid”这样的策略将等到您刷新。

您发布的代码乍一看还不错，因此问题可能在于操作过滤器的连接方式。您描述的行为也将与您的过滤器从不被调用一致（尽管在那种情况下我不知道为什么会话是打开的）。

# excel - 在PowerShell脚本宏执行期间阻止excel打开

> ID：11904054
> 
> 赞同：0
> 
> 时间：2012-08-10T14:44:51.530
> 
> 标签：excel, powershell, vbscript, vba

我运行一个 powershell 脚本，它在后台打开 excel 文件并在它们上执行宏。问题是运行需要很长时间，有时我忘记它正在运行并打开另一个excel实例，这会弄乱脚本。

脚本中有没有办法阻止用户打开另一个 excel 文件，或者让脚本在后台执行并允许我在前台的另一个工作簿中工作？

以下是 powershell 脚本的相关部分：

```
# Open excel
$excel = new-object -comobject excel.application
$macro = $excel.workbooks.open("C:\Users\User\AppData\Roaming\Microsoft\Excel\XLSTART\PERSONAL.XLSB")

# Get list of files to parse
$files = Get-ChildItem -Path $PWD\*.csv

# ----execute macros----

# Close excel
$macro.close()
$excel.quit() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:34:29.260

基本上，答案是否定的。创建新对象会打开 Excel。它不可见（$Excel.Visible=$true 会使它可见），但它仍然必须打开才能向它发送命令。

# php - 在“X”行开始解析 CSV 文件

> ID：11904060
> 
> 赞同：0
> 
> 时间：2012-08-10T14:45:17.003
> 
> 标签：php, loops, csv

我正在处理一个包含 35,000 行内容的 CSV 上传文件，我正在尝试想办法在“X”行开始解析 CSV 文件。我一直在刷新页面并保存我最后一次使用的行，这样它就可以解决我在浏览器中遇到的超时问题。现在，我只需要知道如何在我离开的那一行开始我的 CSV 文件。

```
while(($data = fgetcsv($handle, 0, ",")) !== false) {
    if($i > 2000) { break; }
    //start parsing here
    $i++
}
$_SESSION['lastLine'] = $i;
$_SESSION['filepath'] = $filepath;
//resend headers 
```

我也将文件路径保存为会话，因为它已上传到临时文件夹，我可以重新访问它。所以我第一次上传时，我非常高兴地浏览了所有 2000 行。标头重置并再次启动该过程，但由于 $_SESSION['lastline'] 现在是 2001 年，因此代码中断（这很好）。我需要弄清楚的是如何在 2001 行开始解析并在 4000 处再次中断。这将一直持续到所有 35,000 行都完成为止。

我正在考虑在解析之前设置 break 语句：

```
if($i < $_SESSION['lastLine']) { $i++; }
if($i > $_SESSION['lastLine'] + 2000) { break; } 
```

我的问题是，执行 35,000 行 CSV 意味着最后 10 次左右的运行将不得不在解析开始之前执行数千次 i++ 循环。我四处寻找一些在“X”行开始 CSV 文件的方法，这将是我的首选方法，但我找不到任何东西。任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:48:52.013

用于[`ftell()`](http://ca3.php.net/ftell)保存您在文件中的位置。然后，您可以[`fseek()`](http://php.net/fseek)在重新启动 fgetcsv() 循环之前到达该位置，例如

```
while($row = fgetcsv($handle)) {
    $cur_pos = ftell($handle);
    if ($some_condition) {
          break;
    }
}
.....

fseek($handle, $cur_pos); // jump back to last position
... continue on wards ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:49:07.817

您应该将字节偏移量与行号一起保存，然后`fseek`在开始解析之前保存到该字节偏移量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-22T04:28:00.767

我发现 fseek 是偏移字符，而不是我使用[SplFileObject的行](http://php.net/manual/en/class.splfileobject.php)

像这样的东西

```
$file = new SplFileObject('your-csv-file.csv');
//this is zero based so need to subtract 1
$file->seek(2); /// Going to line 3
$arr=$file->fgetcsv();
print_r($arr); 
```

从该行号迭代整个 CSV

```
while(!$file->eof())
{
    $row=$file->fgetcsv();
    print_r($row);
} 
```

函数链接：- [seek](http://php.net/manual/en/splfileobject.seek.php) , [fgetcsv](http://php.net/manual/en/splfileobject.fgetcsv.php)

# asp.net - 尽管 PreSendRequestContent 事件被命中，但长时间运行的 AJAX 请求没有收到响应

> ID：11904064
> 
> 赞同：0
> 
> 时间：2012-08-10T14:45:30.657
> 
> 标签：asp.net, iis, windows-server-2008, iis-7.5

这个问题让我有点发疯——我现在已经花了 3 天的时间来解决这个问题。为了让它更烦人，我无法在我们的开发/测试环境中复制它——它似乎只在我们的生产环境中表现出来。

**场景：**

有一个页面会触发一个上传器——这个上传器是一个 YUI2 javascript 上传器组件，它在后台使用 flash。该文件可以正常上传到我们的服务器，之后会触发*uploadsuccess* javascript 事件，这会导致向服务器发出 ajax 请求，以便我们可以进行进一步处理。处理需要相当长的时间 - 最多 12 分钟。我知道这本身就是一个问题，但是为此创建一个异步线程进程所需的工作相当复杂，我们已将其安排在另一天。现在，我们在 Web.config 中增加了 Web 请求超时限制，以便请求不会超时。

在我们的开发/测试环境中，该过程完成并收到响应。

在我们的生产环境中，该过程已完成，但从未收到任何响应。:(

**我试图找到问题：**

我在代码中添加了大量的日志记录，甚至删除了在击中 asp.net 页面生命周期的每个事件时记录的日志记录点。

该操作似乎可以正确处理，然后每个页面生命周期事件都会一直命中，直到最后一个事件（在内容响应发送回客户端之前触发的 PreSendRequestContent）。但是，我完全没有收到任何回复——我什至启动并运行了 fiddler 以确保这不是一些奇怪的浏览器问题。没有。:(

我是一名开发人员，所以我觉得我在这里的调试方面已经用尽了我的选择。问题似乎在 IIS 中更深的地方，在它离开 asp.net 堆栈之后，在它返回到客户端之前。

**我的请求：**

有没有人对可能发生的事情有任何远程倾向，或者我可以做些什么来继续我的故障排除和调试？

如标签中所述，该应用程序是一个 ASP.NET 应用程序（特别是 MVC 2），在 Windows Server 2008 机器上的 IIS 7.5 网络服务器上运行。

如果你能以任何方式提供帮助，我会赞美你到最后。

忠实于你的; 沮丧的开发者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:11:01.377

好的，所以问题已经解决了，但是我永远无法找出确切的问题和请求被丢弃的点。这是一个间歇性问题，仅在非常长时间运行的请求期间才会受到影响，无论如何这对网络来说总是一个坏主意。

我通过创建一个带有多个工作线程的后台工作队列来解决这个问题。对原始操作的请求现在被转移到工作队列。我还公开了一个状态页面，用户可以在其中跟踪这些项目的进度，甚至重试失败的项目。

似乎运行良好，并且 UI 响应速度更快，这总是一件好事。

# php - Lat/Lng 存储到 mysql 表中

> ID：11904070
> 
> 赞同：-1
> 
> 时间：2012-08-10T14:46:00.383
> 
> 标签：php, mysql, database, google-maps, indexing

我应该使用什么类型的数据来存储`Lat`和`Lng`从谷歌地图到我的数据库？我不确定我应该在 mysql 中输入多少位小数。

那么我应该使用`Decimal`等`Float`吗？我应该花多少钱`Length`？同时，为`Lat`和`Lng`在Mysql中放置索引是否很好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:26:34.150

这取决于您将如何处理这些信息，以及您需要的值有多精确。

一个纬度或经度大约是 69 英里。（纬度的实际距离略有不同，距离赤道越远，经度的距离越小。

```
DECIMAL(9,6) allows for a resolution of about  4 inches
DECIMAL(8,5) allows for a resolution of about 3 1/2 feet
DECIMAL(7,4) allows for a resolution of about 36 feet 
```

（对于纬度，您只需要小数点前两位，而不是经度所需的三位。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-01T18:13:37.407

如果您正在为 Google 地图执行此操作并绘制一条折线（可能有几千个点），您可以将这些点存储在一个数组中，对数组进行序列化，并将其存储在 BLOB 或 TEXT 字段中。我没有对此进行任何计时试验，但我怀疑它比转换为 DEC 更快。或者，如果您将其传递给 JavaScript，您可以使用 JSON_ENCODE 将其存储为 JSON 字符串，并在每次使用绘图时保存该转换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T07:22:26.853

我对 lat 和 lon 都使用 decimal(10,6)，这可以为您提供优于 1 米的分辨率。（记住要考虑减号）。

* * *

## 编辑：

从 MySQL 手册中引用关于十进制类型的减号：

> 标准 SQL 要求 DECIMAL(5,2) 能够存储任何五位和两位小数的值，因此可以存储在薪水列中的值范围为 -999.99 到 999.99。MySQL 从 MySQL 5.0.3 开始强制执行此限制。**在 5.0.3 之前，在范围的正端，该列实际上可以存储高达 9999.99 的数字。（对于正数，MySQL 5.0.2 和更早的版本使用为符号保留的字节来扩展范围的上限。）**

资源：

> [http://dev.mysql.com/doc/refman/5.0/en/fixed-point-types.html](http://dev.mysql.com/doc/refman/5.0/en/fixed-point-types.html)

# java - 如何将 Access 数据库中的数据加载到 int 数组中？

> ID：11904075
> 
> 赞同：0
> 
> 时间：2012-08-10T14:46:20.640
> 
> 标签：java, sql, database, arrays, parsing

我正在寻找一种方法来验证用户输入的数字是否与存储在数据库中的数据相对应。例如。如果用户输入“5132”，它会将特定列中的所有数据加载到数组中，然后我会循环该数据并将输入与它进行比较以希望找到匹配项。

简单地说：如何将数据库（结果集）中的数据解析为 int 数组？

我试图达到的一个简单例子

```
String s = JOptionPane.showInputDialog(...);
int intS = Integer.parseInt(s);
boolean correct = false;

Get database info
count++; //for every data entry

int TagNumber [] = new int [count];

for (int i=0;i<count;i++) {
 if (intS == TagNumber[i]) {
  correct =true;
  break;
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:08:11.623

如果您真的想从数据库加载值并检查用户的特定值，那么您可以使用二进制搜索，否则您也可以使用 SQL 查询。

下面是在数组中查找值的实现（二进制搜索）。

```
public class BinarySearch {

    public static void main(String[] a) {
        int[] numArray = {5,6,10,11,19,18,30,25,88,44,55,1,3};
        Arrays.sort(numArray);
        // performing a binary search - here 100 is the element that you want 
            // to search in your array
        System.out.println(searchElement(numArray, 100));
    }

    private static int searchElement(int[] sortedArray, int element) {

        int first = 0;
        int upto  = sortedArray.length;

        while (first < upto) {
            int mid = (first + upto) / 2;  // Compute mid point.
            if (element < sortedArray[mid]) {
                upto = mid;       // repeat search in bottom half.
            } else if (element > sortedArray[mid]) {
                first = mid + 1;  // Repeat search in top half.
            } else {
                return sortedArray[mid];       // Found it. You can return the position or the element
            }
        }
        return -1;    // The element is not in the array
    }
} 
```

数据库功能

```
public class RetrieveValues {
    public static void main(String args[]) throws SQLException {
        Connection conn = null;
        Statement select = null;
        try {
            Class.forName("com.somejdbcvendor.TheirJdbcDriver");
            conn = DriverManager.getConnection(
                            "jdbc:somejdbcvendor:other data needed by some jdbc vendor",
                            "myLogin", "myPassword");
            select = conn.createStatement();
            ResultSet result = select
                    .executeQuery("SELECT Element FROM TestTable");

            List<Integer> elementList = new ArrayList<Integer>();
            while (result.next()) { // process results one row at a time
                elementList.add(result.getInt(1));
            }
            // convert to int array

            convertIntegers(elementList);

        } catch (SQLException e) {
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } finally {
            select.close();
            conn.close();
        }
    }

    public static int[] convertIntegers(List<Integer> elemIntegers)
    {
        int[] elements = new int[elemIntegers.size()];
        for (int i=0; i < elements.length; i++)
        {
            elements[i] = elemIntegers.get(i).intValue();
        }
        return elements;
    }
} 
```

# java - 肥皂头认证

> ID：11904080
> 
> 赞同：1
> 
> 时间：2012-08-10T14:46:48.890
> 
> 标签：java, web-services, jakarta-ee, soap

如何在肥皂标题中使用凭据？我知道如何设置它们：

```
BindingProvider bp = (BindingProvider) coreWebService;
bp.getRequestContext().put(BindingProvider.USERNAME_PROPERTY, "username");
bp.getRequestContext().put(BindingProvider.PASSWORD_PROPERTY, "password"); 
```

但是如何在 web 服务端验证它们呢？如何从客户端发送的请求中“提取”它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:54:00.067

据我所知，您发布的代码将凭据放入 HTTP 标头，而不是 SOAP 标头。

您应该能够从 WebServiceContext 访问您需要的内容。

对于 SOAP 标头：

[http://metro.java.net/guide/ch04.html#accessing-soap-headers-for-incoming-messages](http://metro.java.net/guide/ch04.html#accessing-soap-headers-for-incoming-messages)

HTTP 标头：

[http://middlewaremagic.com/weblogic/?p=351](http://middlewaremagic.com/weblogic/?p=351)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T07:00:19.053

在您的服务器上设置[基本身份验证。](http://en.wikipedia.org/wiki/Basic_access_authentication)您可以检查标头（通过嗅探流量）并查看您的请求将包含一个`Authorization`标头，其中包含一些包含您的用户名和密码的 Base64 编码内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-27T23:51:33.370

我 funciono asi:

> ```
> BindingProvider bp = (BindingProvider) port;
> Map<String, Object> map = bp.getRequestContext();
> map.put(BindingProvider.USERNAME_PROPERTY, "aspbbo");
> map.put(BindingProvider.PASSWORD_PROPERTY, "dkN6ssP");
> 
> Map<String, List<String>> credentials = new HashMap<String, List<String>>();
> credentials.put("username", Collections.singletonList("aspbbo"));
> credentials.put("password", Collections.singletonList("dkN6ssP"));
> ((BindingProvider)port).getRequestContext().put(MessageContext.HTTP_REQUEST_HEADERS, credentials); 
> ```

# python - 如何使用 PIL 获取图像大小（字节）

> ID：11904083
> 
> 赞同：38
> 
> 时间：2012-08-10T14:46:56.793
> 
> 标签：python, python-imaging-library, tornado, filesize

我发现了如何使用 PIL 来获取图像尺寸，而不是文件大小（以字节为单位）。我需要知道文件大小来决定文件是否太大而无法上传到数据库。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-10T14:49:35.927

尝试：

```
import os
print os.stat('somefile.ext').st_size 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-02-05T16:50:10.167

如果您已经在文件系统上有图像：

```
import os
os.path.getsize('path_to_file.jpg')` 
```

但是，如果您想获取内存中尚未保存到文件系统的图像的保存大小：

```
from io import BytesIO
img_file = BytesIO()
image.save(img_file, 'png')
image_file_size = img_file.tell() 
```

此方法将避免与 StringIO 一样多次读取图像数据。但是请注意，它将使用更多 RAM。一切都是权衡。:-)

编辑：我刚从 OP 看到这条评论：

> 最后，问题是从一开始的，如果有人上传一张有 1 giga（伪造的）的图片，他会在 PIL 完成它的工作之前杀死服务器，所以我必须在它完成之前阻止请求！

这是一个非常不同的问题，可能最好在 Web 服务器上完成。对于 nginx，您可以将其添加到您的配置中：

```
http {
    #...
        client_max_body_size 100m; # or whatever size you want as your limit
    #...
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-07-09T12:43:17.027

我认为这是内存中图像大小（以字节为单位）的真正衡量标准和最快的衡量标准：

```
print("img size in memory in bytes: ", sys.getsizeof(img.tobytes())) 
```

然后，磁盘上文件的大小取决于文件的格式：

```
from io import BytesIO
img_file = BytesIO()
img.save(img_file, 'png')
img_file_size_png = img_file.tell()
img_file = BytesIO()
img.save(img_file, 'jpeg')
img_file_size_jpeg = img_file.tell()
print("img_file_size png: ", img_file_size_png)
print("img_file_size jpeg: ", img_file_size_jpeg) 
```

来自 CIFAR10 数据集的 32 x 32 x 3 图像的可能输出：

```
img size in memory in bytes:  3105    
img_file_size png:  2488
img_file_size jpeg:  983 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-11-26T05:57:27.333

要使用 Pillow Library 查找图像的大小（以字节为单位），请使用以下代码。它会正常工作。

```
from PIL import Image
image_file = Image.open(filename)
print("File Size In Bytes:- "+str(len(image_file.fp.read())) 
```

确保您安装了枕头库：-

```
pip install pillow 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-09-24T13:12:46.020

我对此有点晚了，但我在 5 分钟前在搜索如何获取 PIL 图像的大小而不将其保存到磁盘时遇到了这个问题。万一其他人遇到这种情况，这是一种简单的方法：

```
import StringIO
output = StringIO.StringIO()
image_output.save(output, 'PNG') #a format needs to be provided
contents = output.getvalue()
output.close()

image_filesize = len(contents) 
```

# java - 在表格中插入一行有一对多和多对一

> ID：11904084
> 
> 赞同：1
> 
> 时间：2012-08-10T14:46:57.913
> 
> 标签：java, jpa

我有 3 个具有一对多和多对一关系的实体（请注意红色框中）：第一个实体名为**KhachHang**：

![第一个表名 KhachHang](../Images/4712c8f7a96c4efbebb2081c7627696c.png)

第二个实体名为**ThamDu**

![第二实体](../Images/d28186244d662d3c16d3397037478c62.png)

第三个实体名为**MaSoThuong**

![在此处输入图像描述](../Images/2d44d1f63fc081a63bbd01155897ad6b.png)

**请帮我在ThamDu**表中插入一行。

# php - 在使用 jQuery 发布到 javaScript 之前验证表单，然后到确认页面

> ID：11904086
> 
> 赞同：0
> 
> 时间：2012-08-10T14:47:04.940
> 
> 标签：php, javascript, jquery

我需要使用 jQuery 验证表单，然后将其提交到 JavaScript 文件，该文件将其重定向到确认/发送邮件页面。我这样做的原因是为了防止垃圾邮件没有放入某种类型的验证码。我基本上输入了错误的 url 用于表单的页面，然后将其更改为外部 JavaScript 文件中的正确页面。一切都很好，除了表单在验证之前提交。我可以看到它在提交之前标记错误一秒钟。

验证 JS：

```
<script type="text/javascript">
$(document).ready(function(){

    $('#contactform').submit(function() {
      return $('#contactform').valid();
    });

        $("#contactform").validate();

            $("#Name").rules("add", {
        required: true,
        minlength: 5,
        messages: {
        required: "Required",
        minlength: jQuery.format("Minimum {0} Characters Required")
     }   
    }); 
        $("#Question").rules("add", {
        required: true,
        minlength: 20,
        messages: {
        required: "Required",
        minlength: jQuery.format("Question Must Be {0} Character Long")
     }

    });

    $("#math").rules("add", {
        required: true,
        equalTo: "#math2",
        messages: {
        required: "Solve Security Question.",
     }
    });

});
</script> 
```

外部 JS 重定向：

```
function submitCommentForm() {
    // Change the form action to the real submission page
    document.getElementById('contactform').action = "confirmation.php";
    // Submit the form
    document.getElementById('contactform').submit();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T14:59:47.883

改变

```
$('#contactform').submit(function() {
  return $('#contactform').valid();
}); 
```

到

```
$('#contactform').submit(function() {
  if($(this).valid()){
    submitCommentForm();
  }else{
    alert('Please fix the errors within the form.');
  }
  return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:58:31.300

您可以使用 jQuery 插件来验证表单数据。

这是一个很好的->[番茄酱](http://demos.usejquery.com/ketchup-plugin/)

# mongodb - MongoDB $并返回意外结果？

> ID：11904088
> 
> 赞同：0
> 
> 时间：2012-08-10T14:47:07.143
> 
> 标签：mongodb

我刚刚偶然发现了 MongoDB 的一个意外行为：

```
db.photosLambda.find({'analysis': {$exists: true}, 'analysis_lambda': {$exists: true}}).count()
db.photosLambda.find({$and: [{'analysis': {$exists: true}}, {'analysis_lambda': {$exists: true}}]}).count() 
```

我不明白为什么第二个查询应该返回一个空结果，而第一个查询返回我所期望的，即`photosLambda`集合中的所有元素都具有`'analysis'`并`'analysis_lambda'`设置为某些东西。

对此有任何线索吗？

**更新：**感谢下面的评论，我意识到我正在运行一个“过时”版本的 mongo：该`$and`运算符是在 v2.0 中引入的（我使用的是 v1.6）。

# php - 使用 FPDF 填写 PDF 表单

> ID：11904090
> 
> 赞同：1
> 
> 时间：2012-08-10T14:47:14.360
> 
> 标签：php, forms, pdf, fpdf, fdf

fpdf.org 上有一个脚本部分，其中有一个动态填充 PDF 的示例。这是脚本。

```
<?php

/***************************
  Sample using a PHP array
****************************/

require('fpdm.php');

$fields = array(
    'name'    => 'My name',
    'address' => 'My address',
    'city'    => 'My city',
    'phone'   => 'My phone number'
);

$pdf = new FPDM('template.pdf');
$pdf->Load($fields, false); // second parameter: false if field values are in ISO-8859-1, true if UTF-8
$pdf->Merge();
$pdf->Output();
?> 
```

首先 - 他们引用 fpdm.php - 我认为这是一个错误，并将其更改为 fpdf.php，以及类引用 - 所以这不是我的错误的根源。当我改变所有这些并设置测试时 - 我收到一条错误消息，说“方向错误”。

每个其他 fpdf 示例都让您在函数中输入参数以设置方向（P 或 L）以及尺寸（A4）等。这个没有。有没有人弄乱这个例子并让它工作？我们在医生网站上使用 HTML 表单获取信息，然后将其与他们的实际表单合并，并将它们作为 PDF 输出用于他们的图表 - 所以像这样的脚本，我可以将整个记录加载到数组中并弹出它们在PDF上的字段中会很棒....如果它有效:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T02:48:36.547

fpdm.php 实际上是您必须在示例下方[下载的内容。](http://www.fpdf.org/en/script/dl.php?id=93&f=zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:26:57.063

我发现了一些可以帮助你的东西。

尝试[FPDI](http://www.setasign.de/products/pdf-php-solutions/fpdi/about/)

使用 FPDI，您可以使用 .pdf 作为一种模板，并使用 FPDF als an Image 来处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T18:43:24.413

fpdm.php 是正确的。您没有像 fpdf 那样输入参数的选项，因为此库使用您创建的模板 pdf 文件。它只是使用 php 代码中的字段数组（参见 ex-array.php 文件）或使用字段表单（ex-fdf.php）为您填写模板表单。请注意，如果您在浏览器中打开输出的 pdf 文件，填充的信息将不会显示，您必须在 PDF 查看器（Acrobat Reader...）中打开它才能看到结果。

# sql - 使用 ID 插入 3 个表的存储过程

> ID：11904102
> 
> 赞同：0
> 
> 时间：2012-08-10T14:47:56.130
> 
> 标签：sql, sql-server

我有一个必须插入 3 个表格的表格。我创建了一个存储过程（这是不正确的）。

3 个表：
1\. dbo.Client (ClientID, ClientName, *AddressID* )
2\. dbo.Contact (AddressID, Addressline1, Add2, *CityID* ) CityID 来自下拉列表。
3\. dbo.PointOfCContact (POCID, FirstName, ...)

我的存储过程..

```
Create PROCEDURE sp_Clientdetails(
    @ClientName varchar(50),

    @Addressline1   varchar(50),
    @Addressline2   varchar(50),
    @CityID INT,

    @Firstname  varchar(50),
    @LastName   varchar(50),
    @Middlename  varchar(50),
    @Mob1 numeric(10,0),
    @Mob2 numeric(10,0),
    @Email1 varchar(50),
    @Email2 varchar(50),
    @phone varchar(50),
    @Extention INT  
    )
AS
DECLARE @AddressID int, @ClientID int, @POCID int;

Set NOCOUNT OFF

BEGIN TRANSACTION

IF NOT EXISTS(Select 1 FROM dbo.Contact Where AddressID=@AddressID)
BEGIN
    INSERT INTO dbo.Contact VALUES (@Addressline1, @Addressline2, @CityID);
    SET @AddressID = SCOPE_IDENTITY();
    SET @CityID = SCOPE_IDENTITY();
END
ELSE
    Select AddressID = @AddressID From dbo.Contact Where AddressID=@AddressID;

IF NOT EXISTS(Select 1 FROM dbo.Client Where ClientID=@ClientID)
BEGIN
    INSERT INTO dbo.Client VALUES (@ClientID, @AddressID, @CityID);
    SET @ClientID= SCOPE_IDENTITY();
END
ELSE
    Select ClientID = @ClientID From dbo.Client Where ClientID = @ClientID;

Insert into dbo.PointOfCContact VALUES (@Firstname, @LastName, @Middlename, @Mob1, @Mob2,
 @Email1, @Email2, @phone, @Extention);
SET @POCID= SCOPE_IDENTITY();

COMMIT 
```

出现错误：列名或提供的值的数量与表定义不匹配。

在 `INSERT INTO dbo.Contact VALUES (@Addressline1, @Addressline2, @CityID);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:49:28.203

您应该指定列名

```
INSERT INTO dbo.Contact (Address1, Adddres2, CityID) 
VALUES (@Addressline1, @Addressline2, @CityID);

....

INSERT INTO dbo.Client (ClientID, AddressID, CityID)
VALUES (@ClientID, @AddressID, @CityID); 
```

ETC

更好的是，您可以使用`MERGE`语法 [http://technet.microsoft.com/en-us/library/bb510625.aspx](http://technet.microsoft.com/en-us/library/bb510625.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:49:51.357

您必须添加结构表；向表中添加列

```
INSERT INTO dbo.Contact (Address1, Adddres2, CityID) VALUES (@Addressline1, @Addressline2, @CityID); 
```

# ruby-on-rails - 设计和强大的参数

> ID：11904105
> 
> 赞同：40
> 
> 时间：2012-08-10T14:48:05.130
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise, strong-parameters

我想知道如何集成这两个 gem（设计 + 强参数），因为强参数可能会在 4.0 中添加到 rails 核心

欢迎任何帮助谢谢

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-17T03:56:24.193

设计 4.x 的更新

```
class ApplicationController < ActionController::Base
  before_filter :configure_permitted_parameters, if: :devise_controller?

  protected

  def configure_permitted_parameters
    devise_parameter_sanitizer.permit(:sign_up, keys: [:username])
    devise_parameter_sanitizer.permit(:sign_in, keys: [:username])
    devise_parameter_sanitizer.permit(:account_update, keys: [:username])
  end
end 
```

* * *

添加两个宝石后，设计将正常工作。

更新：使用最新版本的 Devise 3.x，如[devise#strong-parameters](https://github.com/plataformatec/devise#strong-parameters)所述，身份验证密钥（通常是电子邮件字段）和密码字段已经被允许。但是，如果注册表单上有任何其他字段，您需要让 Devise 知道允许的额外字段。最简单的方法是使用过滤器：

```
class ApplicationController < ActionController::Base
  before_filter :configure_permitted_parameters, if: :devise_controller?

  protected

  def configure_permitted_parameters
    devise_parameter_sanitizer.for(:sign_up) << :username
  end
end 
```

对于 Devise 2.x，如果您使用需要在用户模型中明确将受污染参数列入白名单的安全功能：

```
include ActiveModel::ForbiddenAttributesProtection 
```

所需的更改可在[https://gist.github.com/3350730](https://gist.github.com/3350730)找到，它覆盖了一些控制器。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-16T13:08:37.813

简单的方法是在 ApplicationController 中添加一个简单的前置过滤器。如果您有不同的角色和/或其他更复杂的场景，下面的链接还有其他选项：

[https://github.com/plataformatec/devise#strong-parameters](https://github.com/plataformatec/devise#strong-parameters)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-15T05:27:17.260

```
before_filter :configure_sanitized_params, if: :devise_controller?

def configure_sanitized_params
  devise_parameter_sanitizer.for(:sign_up) { |u| u.permit(:firstname, :designation_id, :middlename, :previous_experiance_year, :previous_experiance_month, :lastname, :email, :username, :password, :password_confirmation, :previous_experiance, :empid, :dob, :timezone, :doj, :gender, :education, :comments, :locked, :deactivated, :reason, :phone, :deactivated_date, :image) }
  devise_parameter_sanitizer.for(:account_update) { |u| u.permit(:remove_image, :firstname, :designation_id, :middlename, :lastname, :email, :username, :empid, :dob, :timezone, :doj, :gender, :education, :comments, :locked, :deactivated, :reason, :phone, :deactivated_date, :image) }
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-03T10:57:05.553

你也可以试试这个它包括嵌套参数许可

```
class ApplicationController < ActionController::Base
 before_action :configure_permitted_parameters, if: :devise_controller?

  protected

  def configure_permitted_parameters
   devise_parameter_sanitizer.permit(:sign_up, keys: [:username,:phone])
  # permit nested attributes
  # devise_parameter_sanitizer.permit(:sign_up, keys: 
  # [:username,:phone,profile_attributes:[:firstname, :lastname]])
  end
end 
```

这将适用于 rails 4 和 5 devise 和 rails

# php - PHP switch case 默认

> ID：11904108
> 
> 赞同：8
> 
> 时间：2012-08-10T14:48:12.140
> 
> 标签：php, switch-statement, default

如果之前有匹配的案例，是否会评估 switch 语句的默认值？

前任：

```
switch ($x) {
  case ($x > 5): print "foo";
  case ($x%2 == 0): print "bar";
  default: print "nope";
} 
```

所以对于 x = 50，你会看到`foo`and `bar`, or `foo`and `bar`and `nope`?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T18:55:59.180

是的，如果没有“break”，那么第一个`case`匹配之后的所有动作都将被执行。控制流将“遍历”所有后续`case`，并执行每个后续下的所有操作`case`，直到`break;`遇到语句，或者直到`switch`到达语句的末尾。

在您的示例中，如果 $x 的值为 50，您实际上会看到`"nope"`.

请注意，这`switch`实际上是在关键字后面的表达式`switch`和关键字后面的每个表达式之间执行简单的相等测试`case`。

您的示例很不寻常，因为它只会在 $x 的值为 0 时显示`"foo"`。（实际上，当 $x 的值为 0 时，您会看到“foo bar nope”。）

评估关键字后面的表达式`case`，在您的情况下，示例返回 0（如果条件测试为假）或 1（如果条件测试为真）。它是那个值（0 或 1）`switch`将与`$x`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T14:50:39.830

> 如果之前有匹配的案例，是否会评估 switch 语句的默认值？

在大多数`case`s 中它不应该，因为你经常会有`break`s 在那里。但是，在您的情况下，它也会转到`default`.

另外请尽量防止做那些单行的东西（为了可读性）：

```
$x = 10;

switch (true) {
  case ($x > 5):
      print "foo";

  case ($x%2 == 0):
      print "bar";

  default:
      print "nope";
} 
```

将打印`foobarnope`。所以回答你的问题：是的:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T14:51:21.073

自己尝试会更容易。

但是无论如何，如果你不在一个case中使用break，它后面的所有case都会被执行（包括默认的）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-10T14:54:52.940

这不是开关的工作方式。

[根据手册](http://php.net/manual/en/control-structures.switch.php)：

> switch 语句类似于同一表达式上的一系列 IF 语句。在许多情况下，您可能希望将同一个变量（或表达式）与许多不同的值进行比较，并根据它等于哪个值来执行不同的代码。这正是 switch 语句的用途。

像这样的评价

```
case ($x > 5): 
```

简单地等同于

```
case true: 
```

或者

```
case false: 
```

取决于`$x`因为的值`($x > 5)`是*EVALUATION*，而不是*VALUE*。开关比较参数的值以查看它是否等于任何`case`s。

```
switch($x) {
    case ($x > 5): // $x == ($x > 5)
        echo "foo";
        break;
    case ($x <= 5): // $x == ($x <= 5)
        echo "bar"
        break;
    default:
        echo "default";
        break;
} 
```

上面代码中的比较等价于

```
if ($x == ($x > 5)) {
    echo "foo";
} elseif ($x == ($x < 5)) {
    echo "bar";
} else {
    echo "five";
} 
```

其中（当`$x == 50`）等价于

```
if ($x == true) {
    echo "foo";
} elseif ($x == false) {
    echo "bar";
} else {
    echo "five";
} 
```

这相当于

```
if (true) { // $x == true is the same as saying "$x is truthy"
    echo "foo";
} elseif (false) {
    echo "bar";
} else {
    echo "five";
} 
```

**IF**但是，您使用了您的 switch 语句，因为它打算使用（将参数与具体值进行比较）：

```
switch ($x) {
    case 50:
        echo "foo ";
    case 30:
        echo "bar ";
    default:
        echo "foo-bar";
} 
```

并且`$x == 50`，您的输出将是

```
foo bar foo-bar 
```

由于`break`您的情况下没有。

如果您将`break`关键字添加到每个案例的末尾，您将只执行该特定案例的代码。

```
switch ($x) {
    case 50:
        echo "foo ";
        break;
    case 30:
        echo "bar ";
        break;
    default:
        echo "foo-bar";
        break;
} 
```

输出：

```
foo 
```

# javascript - 如何将 Javascript 应用于分组的 SharePoint 列表？

> ID：11904113
> 
> 赞同：0
> 
> 时间：2012-08-10T14:48:30.693
> 
> 标签：javascript, sharepoint, sharepoint-2007

我对 SharePoint 自定义场景还很陌生，但是已经掌握了一些 javascript，它们将根据单元格的值更改 SP 列表中单元格的背景颜色。

这在普通视图上工作正常，但任何分组的东西都不起作用，我相信这与页面加载的顺序有关。有没有办法将 javascript 应用于分组并设置为默认折叠的视图？

我从去年看到另一个线程有类似的查询，但似乎没有解决方案。

提前谢谢了！！！

担

这是我用于单元格颜色更改的代码：

```
<script type="text/javascript" language="javascript">   
  var x = document.getElementsByTagName("TD") // find all of the TDs
  var i=0;
  for (i=0;i<x.length;i++)
  {
 if (x[i].className=="ms-vb2") //find the TDs styled for lists
  { 

if (x[i].innerHTML=="Green" && x[i].cellIndex==10)
  {
    x[i].style.backgroundColor='forestgreen'; // set the background color
    x[i].style.color='Black'; //set the font color
  }

if (x[i].innerHTML=="Amber" && x[i].cellIndex==10)
  {
    x[i].style.backgroundColor='Goldenrod'; // set the background color
    x[i].style.color='Black'; //set the font color
  }

if (x[i].innerHTML=="Red" && x[i].cellIndex==10)
  {
    x[i].style.backgroundColor='Firebrick'; // set the background color
    x[i].style.color='black'; //set the font color
  }
 }
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T12:23:16.523

也许在您的情况下，为给定列自定义 CSS 样式会容易得多。您可以定义扩展 ms-vb2 类的新 CSS 规则，但仅适用于第 10 列。使用 CSS 选择器可以轻松实现这一点。

例如，找到适用于该单元格的 CSS 样式表，并定义一个新规则：.ms-vb2:nth-child(10)[innelHtml='Red']{ Background-color:firebrick; 颜色：黑色 }

然后，只要您的表格单元格可见，就会应用 CSS。

# ruby-on-rails - 未注册的特征：属性名称

> ID：11904115
> 
> 赞同：5
> 
> 时间：2012-08-10T14:48:33.800
> 
> 标签：ruby-on-rails, ruby, rake, factory-bot

很难完成这项工作。我正在使用 seed.rb + factory_girl 用 rake db:seed 填充数据库。

（我知道存在固定装置，但我想以这种方式完成，这只是一个示例，数据库将填充复杂的关联对象。）

我的种子.rb：

```
require 'factory_girl_rails'
["QM","CDC","SI","QS"].each do |n|
  FactoryGirl.create(:grau, nome: n)
end 
```

和我的 /factories/graus.rb

```
FactoryGirl.define do
  factory :grau do
    nome
  end
end 
```

但是当我运行时：

> 耙分贝：种子

我得到：

```
rake aborted!
Trait not registered: nome

Tasks: TOP => db:seed 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-10T18:18:09.120

您需要为 nome 添加一些默认值：

```
FactoryGirl.define do
  factory :grau do
    nome 'lorem'
  end
end 
```

# workflow-foundation-4 - TrackingParticipant.Track 方法是否线程安全>

> ID：11904116
> 
> 赞同：0
> 
> 时间：2012-08-10T14:48:34.913
> 
> 标签：workflow-foundation-4

我正在使用自定义 TrackingParticipant 来更新数据库中的一些状态信息。由于在数据库中有时会有不正确的值，我认为 Track 方法的行为不是我所期望的。文档说：“在派生类中实现时，用于同步处理跟踪记录”我打算让所有记录一个接一个地执行，至少对于同一个状态机实例。

我错了吗？我是否应该始终使用关键部分来保护 Track 实现？我想知道整体性能......无论如何，当然，优先事项是系统按预期工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:16:30.820

您需要实现 Track() 方法，因此毫无疑问它是线程安全的，由您决定。

在 Track() 完成之前，工作流运行时不会继续，因此您永远不会同时获得多个 Track() 调用。这意味着“缓慢”的数据库插入会影响您的工作流程性能。最好的性能是将数据放在并发的内存队列中，并使用后台线程来执行实际的数据库插入。

# testing - 使用 Maven 进行 Grails 集成测试

> ID：11904119
> 
> 赞同：0
> 
> 时间：2012-08-10T14:48:39.237
> 
> 标签：testing, grails, maven, integration

首先，我对缺乏为 Grails 实施前端测试的文档感到震惊。GroovyPagesTestCase 类使测试变得超级简单，如此简单，FE 开发人员没有理由不进行测试。但无论如何，这是我的问题。在我的工作中，我使用 Maven 运行 Grails。当我需要运行测试时，执行测试的唯一成功命令是：

```
mvn grails:test-app 
```

并运行所有测试。但是，我真的想在测试驱动代码时更快地移动，有人知道如何只在这种环境下运行集成测试吗？没有找到我自己的任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-14T16:36:12.773

用于此的 grails 命令是`grails test-app :integration`.

鉴于此，我相信您应该能够使用 grails:exec 目标来运行任意命令，例如 - `mvn grails:exec -Dcommand=test-app -Dargs=:integration`。

不太确定 mvn 将如何处理等号后的冒号。`:integration`如果香草语法不能削减它，您可以尝试使用引号或双引号。

这基于[http://grails.org/doc/latest/guide/commandLine.html#4.5](http://grails.org/doc/latest/guide/commandLine.html#4.5) Ant 和 Maven。

更新：`grails test-app -unit`并且`grails test-app -integration`也受支持，这可能更符合 Maven 的喜好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-30T12:32:30.997

### Grails 1.x

```
mvn -Dargs=CircleTests -Dcommand=test-app grails:exec
mvn grails:test-app will always execute all tests 
```

最好将其与`-unit`/结合起来，`-integration`以避免为其他阶段进行耗时的准备（示例使用名为 的测试`CircleTests`；删除参数中的后缀）：

```
mvn -Dargs="-unit Circle" -Dcommand=test-app grails:exec 
```

您可以使用模式和多个名称，以空格分隔：

```
mvn "-Dargs=Square Ci*le" -Dcommand=test-app grails:exec 
```

Grails 还理解特殊的 -unit 和 -integration 名称：

```
mvn -Dargs=-unit -Dcommand=test-app grails:exec 
```

或者运行一个方法：

```
mvn -Dargs=Circle.DrawSmallEllipse -Dcommand=test-app grails:exec 
```

### Grails 2.x

在新的 Grails 版本中，这不再起作用，因为 grails:exec 在开发模式而不是测试模式下运行。您现在可以执行以下任一操作：

```
mvn -Dgrails.cli.args="integration: Circle" grails:test-app
mvn -Dgrails.cli.args="-integration Circle" grails:test-app
mvn -Dgrails.env=test -Dargs="integration: Circle" -Dcommand=test-app grails:exec 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-28T23:55:59.817

在 grails 2.x 上，这对我最有效：

所有集成测试：

```
mvn grails:exec -Dgrails.env=test -Dcommand=test-app -Dargs=:integration 
```

单测试类：

```
mvn grails:exec -Dgrails.env=test -Dcommand=test-app -Dargs=:integration -Dargs=NameOfYourIntegrationTests 
```

测试类中的单个方法：

```
mvn grails:exec -Dgrails.env=test -Dcommand=test-app -Dargs=:integration -Dargs=NameOfYourIntegrationTests.testMethod 
```

希望能帮助到你

# spring - 使用 JPA，只有在没有任何引用的情况下才删除记录的正确方法是什么？

> ID：11904120
> 
> 赞同：0
> 
> 时间：2012-08-10T14:48:43.953
> 
> 标签：spring, jpa, entitymanager

假设我们有一个旧的 Book 和 Authors 模型，两者都有 CRUD。当用户试图删除作者时，我想告诉她如果作者已经注册了书籍，她必须先删除作者的书籍。

也就是说，我只想删除一条记录，除非它没有任何引用，但如果有，我只想警告用户。

**第一种方法：**

到目前为止我一直在做的方式是这样的：

```
@PersistenceContext
private EntityManager em;

public void deleteAuthor(Author author){
    Long qtBooks = em.createQuery(
           "SELECT COUNT(b) FROM Book b WHERE b.author.id = :id")
           .setParameter("id", author.getId()).getSingleResult();
    if (qtBooks > 0) {
        throw IllegalArgumentException("This author has books registered");
    }
    em.remove(em.getReference(Author.class, author.getId()));
} 
```

...并且在表示层（JSF bean）中，我捕获了异常，`IllegalArgumentException`在这种情况下是异常，并向用户显示其错误消息。

**第二种方法：**

当我使用 Spring 时，我知道另一种方法是`DataIntegrityViolationException`在表示层中捕获 Spring's 。然后，业务方法将只包含删除实体的代码：

```
public void deleteAuthor(Author author){
    em.remove(em.getReference(Author.class, author.getId()));
} 
```

...然后表示层（在我的例子中是一个 JSF bean）可以捕获 Spring 异常：

```
@ManagedProperty("#{authorService}");
private AuthorService authorService;

public void deleteAuthor(Author author) {
    try {
        authorService.deleteAuthor(author);
        addGlobalInfo("Author deleted");
    } catch (DataIntegrityViolationException e) {
        addGlobalError("This author already has books associated");
    }
    redirect(getRequestURL());
} 
```

现在，我使用第一种方法已经有一段时间了，我发现第二种方法更容易编写。我的问题是，除了使用这个特定的异常使我的应用程序更依赖于 Spring 之外，使用第二种方法的缺点是什么？第一个的真正优点是什么？到底好不好？是否有第三种更好的方法来使用 JPA 执行此操作？

由于这两种方法都依赖于捕获一些异常（除了第一个在尝试更改数据库中的任何内容之前抛出），我真的不知道如何决定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T20:20:01.400

两种方法都很好，但第二种方法不太灵活：

*   如果您在涉及多个实体的较大事务中使用此方法，则无法确定异常是由删除作者引起的，而不是由无关的东西引起的
*   如果作者是书籍以外的其他实体的引用，则不能告诉用户必须删除书籍。它可以是引用作者的任何其他实体

请注意，对于第一种方法，如果抛出异常的目标是能够在表示层中发现它（而不是简单地显示通用错误消息），我将使用更具体的异常，例如`BookStillReferencesAuthorException`. 异常会更清楚，并且您不会有捕获与仍在引用作者的书籍无关的 IllegalArgumentException 的风险。

# c# - 任务并行库 - 未处理异常？

> ID：11904124
> 
> 赞同：0
> 
> 时间：2012-08-10T14:48:55.943
> 
> 标签：c#, task-parallel-library

嗨，我有以下代码：

```
 try
    {
        var t1 = Task.Factory.StartNew(() =>
        {
            Count(5, 10);
        });
        //t1.Wait(); //This line if uncommented causes the exception to be handled below....
        Console.WriteLine("done");
    }
    catch (AggregateException ex)
    {
        Console.WriteLine(ex);
    }

    private void Count(int start, int end)
    {
        for (var i = start; i <= end; i++)
        {
            Console.WriteLine(i);
            if (i == 7) throw new InvalidOperationException("Something bad happened");
            Thread.Sleep(1000);
        }
    } 
```

如果我不想等待我的任务，但仍想处理异常，我该如何实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T14:57:00.947

创建一个在任务失败时处理错误的延续：

```
var t1 = Task.Factory.StartNew(() =>
    {
        Count(5, 10);
    });
t1.ContinueWith(
    (task) =>
    {
        var error = task.Exception;
        // handle error
    }, TaskContinuationOptions.OnlyOnFaulted); 
```

`OnlyOnFaulted`指定如果任务失败，延续将在线程池线程上运行。如果任务成功完成，则不会执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:00:38.103

创建和启动任务的堆栈可能不再存在......如何处理异常？

你可以：

1.  将异常处理放在每个任务堆栈的顶部。
2.  创建一个任务来创建/启动/等待/处理子任务的异常
3.  创建一个继续任务来处理异常（如 Sean U 的回答）。

# android - 如何在文本视图的中心设置文本

> ID：11904125
> 
> 赞同：3
> 
> 时间：2012-08-10T14:49:01.467
> 
> 标签：android, textview, center, gravity

> **可能重复：**
> [如何在 Android 的 TextView 中水平和垂直居中文本？](https://stackoverflow.com/questions/432037/how-do-i-center-text-horizontally-and-vertical-in-a-textview-in-android)

我想将文本设置在 textview 的中心（垂直和水平）。它水平居中，垂直居中，在文本顶部有更多空间。

xml布局：

```
 <TextView
        android:id="@+id/txtQuantity"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center|center_vertical"
        android:text="+"
        android:textColor="@color/white"
        android:textSize="25sp" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T14:53:26.623

使用`android:gravity="center"`而不是`android:gravity="center|center_vertical"`.

这将使其水平和垂直居中。

# performance - 如何在 1.6 之后提升 Magento 网站？

> ID：11904135
> 
> 赞同：3
> 
> 时间：2012-08-10T14:49:20.233
> 
> 标签：performance, magento

自 1.3 以来，我已经大量使用 Magento。Magento 团队对它的性能进行了很大的改进，但现在是“1.6 之后”的时代。但是Magento的速度还是不是很好。

有很多帖子讨论如何改进它，例如：

1.  gzip 压缩
2.  缩小 HTML、CSS、JSS（删除所有不必要的空白）
3.  优化您的图像
4.  禁用任何未使用的模块 5.将外部 CSS/JS 合并到一个文件中
5.  可以缓存的缓存文件
6.  等等。

但是，有人可以从编程框架级别了解 Magento 速度慢的瓶颈吗？我们可以为此改进多少？

修改 Magento 中的某些内容以增强它会非常有趣。不是吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T21:28:33.787

您的托管平台可以产生巨大的影响！我发现使用 nginx 和 php-fpm 可以极大地提高速度。我们还实现了一个 REST 数据库服务器。所有这些都在 Amazon EC2 php-fpm ubuntu 实例上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T09:36:27.670

这里有一个基准指南：http:
[//magebase.com/magento-tutorials/optimizing-magento-performance/](http://magebase.com/magento-tutorials/optimizing-magento-performance/)

我找到了这个关于性能和 Magento 的指南，看起来做得很好：http:
[//mage-page.net/2012/08/tips-tricks-to-speed-up-magentp/](http://mage-page.net/2012/08/tips-tricks-to-speed-up-magentp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T12:58:46.070

在 magento 中有各种 js 文件，其中涉及很多文件，Fooman 的 Fooman Speedster 扩展非常好，也是加速 magento 站点的非常好的扩展。它可以在连接上使用，并且确实对 magento 商店有影响。

# ios - 将段控制器添加到titleView后无法命名导航栏的标题

> ID：11904139
> 
> 赞同：0
> 
> 时间：2012-08-10T14:49:27.953
> 
> 标签：ios, uinavigationitem

我现在的观点是包含 3 `uitabbaritem`。在第一个选项卡中，我`segmentcontroller`通过`self.navigationItem.titleView`以下方式添加

```
-(void)viewDidLoad {

    // Enable 'segmentControl' on navigation bar
    self.navigationItem.titleView               =   self.segmentedControl;
} 
```

结局是

![在此处输入图像描述](../Images/a0bef6a398f597218abb61e2de467a88.png)

接下来，当我切换到第二个 uitabbaritem 时，我隐藏了 segmentcontroller 并将导航的标题命名如下

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item {
    if ( item.tag == 1 ) {
        self.navigationItem.titleView.hidden    =   NO;
    }

    if ( item.tag == 2 ) {
        self.navigationItem.titleView.hidden    =   YES;
        self.title          =   @"support";
    }
} 
```

但是，点击第二个uitbarbatitem后，标题并没有显示在导航栏上。。 ![在此处输入图像描述](../Images/a2b63dd49d898a895898cf11eb89008d.png)

如果您知道我做错了什么，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:15:26.550

有集合`title`时不显示`titleView`，无论是否隐藏。您必须将 设置`titleView`为`nil`。

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item {
  if ( item.tag == 1 ) {
      self.navigationItem.titleView = self.segmentedControl;
      self.title = nil;
  }

  if ( item.tag == 2 ) {
      self.navigationItem.titleView = nil;
      self.title = @"support";
  }
} 
```

# c# - 我如何从循环中的字符串中获取所有文本，而不仅仅是一次？

> ID：11904140
> 
> 赞同：0
> 
> 时间：2012-08-10T14:49:31.357
> 
> 标签：c#

我有这个代码：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            BackgroundWorker worker = sender as BackgroundWorker;

            WebRequest request = WebRequest.Create(url);
            request.Method = "GET";
            WebResponse response = request.GetResponse();
            Stream stream = response.GetResponseStream();
            StreamReader reader = new StreamReader(stream);
            string content = reader.ReadToEnd();
            reader.Close();
            response.Close();

        } 
```

现在我有两个功能：

```
private void GetProfileNames(string text)
        {
            string startTag = "<a  href='/profile/";
            string endTag = "'>";
            int startTagWidth = startTag.Length;
            int endTagWidth = endTag.Length;
            index = 0;
            while (true)
            {
                index = text.IndexOf(startTag, index);
                if (index == -1)
                {
                    break;
                }
                // else more to do - index now is positioned at first character of startTag 
                int start = index + startTagWidth;
                index = text.IndexOf(endTag, start + 1);
                if (index == -1)
                {
                    break;
                }
                // found the endTag 
                profileName = text.Substring(start, index - start);
            }
            return profileName;
        }

        private void GetTextFromProfile(string text)
        {
            string str = "<span class=\"message-text\">";
            string startTag = str;
            string endTag = "<";
            int startTagWidth = startTag.Length;
            int endTagWidth = endTag.Length;
            index = 0;
            while (true)
            {
                index = text.IndexOf(startTag, index);
                if (index == -1)
                {
                    break;
                }
                // else more to do - index now is positioned at first character of startTag 
                int start = index + startTagWidth;
                index = text.IndexOf(endTag, start + 1);
                if (index == -1)
                {
                    break;
                }
                // found the endTag 
                profileNameText = text.Substring(start, index - start);
            }

            return profileNameText;
        } 
```

现在，在 DoWork 事件中的字符串内容行之后，我调用了函数：GetProfileNames，但是当我在该行上使用断点时：profileNameText = text.Substring(start, index - start); 我一直得到相同的配置文件名称，我需要关闭程序再次运行它。

我想要它做的是当我在 Dowork 事件中调用该函数时，它将使 GetProFileNames 函数结束，并从已下载的当前内容中获取所有配置文件名称。

* * *

不知何故，我需要调用这两个函数：GetProfileNames 和 GetTextFromProfile，我需要为每个配置文件和属于他的文本创建一个字符串。

例如，我在内容变量中有这一行：

```
<span class="message-profile-name" ><a  href='/profile/LipazD'>LipazD</a></span>: <span class="message-text">hello world</span> 
```

所以我需要这两个函数都将遍历内容，每次迭代时我都会得到一个字符串，如 string t = "LipazD hello world" 下一个迭代将是：“Daniel 你好吗？”

函数工作他们得到配置文件名称，第二个得到文本，但我不知道如何进行迭代循环并让它全部工作。

* * *

然后，当它完成循环内容并获取每个配置文件名称的所有配置文件名称和文本时，我需要删除内容并再次下载新内容，然后使用功能完成删除内容或仅下载新内容和如此反复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:59:06.570

```
var wc = new WebClient();

wc.DownloadStringCompleted += (s, e) =>
{
    HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
    doc.LoadHtml(e.Result);

    var link = doc.DocumentNode
                    .SelectSingleNode("//span[@class='message-profile-name']")
                    .Element("a")
                    .Attributes["href"].Value;
};

wc.DownloadStringAsync(new Uri("http://chatroll.com/rotternet")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:00:12.740

```
HtmlDocument doc = new HtmlDocument();
WebClient wc = new WebClient();

doc.Load(wc.DownloadString("http://yourUri.com"));
foreach(HtmlNode link in doc.DocumentElement.SelectNodes("//span[@class='message-profile-name'"])
{
    // etc.
} 
```

但我认为 message-profile-name 和 message-text 包含在父元素中。我建议遍历该元素，然后获取子配置文件名称和评论跨度内容

# c - 在 BIOS 程序集中获取存储设备信息

> ID：11904146
> 
> 赞同：1
> 
> 时间：2012-08-10T14:49:53.323
> 
> 标签：c, assembly, inline-assembly, bios

如何使用 8086 程序集从 BIOS 获取有关连接到 PC 的存储设备（软盘、硬盘、USB 磁盘驱动器、闪存驱动器）的信息。我正在使用 VS 2008。你能给我指一本参考书或一些信息吗？我想检测所有工作的此类设备并能够读取和写入它们。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T15:20:58.937

看看这些：

*   拉尔夫布朗的中断清单

*   帮助PC

*   技术帮助

*   未记录的 PC：I/O、CPU 和固定内存区域的程序员指南

*   PCI系统架构（等）

# javascript - jqGrid - 有没有“网格编辑模式”？

> ID：11904147
> 
> 赞同：4
> 
> 时间：2012-08-10T14:49:56.227
> 
> 标签：javascript, jquery, jqgrid

我是 jqGrid 的新手，我想知道是否有任何方法可以将整个网格设置为编辑模式。

我只有一个可编辑的专栏。它基本上是一个复选框列表。当用户进入编辑模式时，我的第一种方法是这段代码：

```
var ids = $("#tblPermisos").jqGrid('getDataIDs');
for (var i = 0; i < ids.length; i++)
    $('#tblPermisos').editRow(ids[i], false); 
```

这似乎很好用，但是当用户更改页面时，编辑模式下的所有行都被取消（或保存，不知道）。我宁愿避免处理事件以保持所有行的编辑模式。那么，回到我的问题，是否有任何“网格编辑模式”或其他比处理事件更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:14:12.833

我做了一些在线研究，我没有找到任何“切换”来保持网格连续处于编辑模式。我看过的地方是[jqGrid：默认情况下所有行都处于“内联编辑模式”](https://stackoverflow.com/questions/9170260/jqgrid-all-rows-in-inline-edit-mode-by-default)和[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#editrow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#editrow)

# php - $this 当不在 constants.php 中的对象上下文中时

> ID：11904149
> 
> 赞同：0
> 
> 时间：2012-08-10T14:49:57.017
> 
> 标签：php, codeigniter

当我尝试使用`define('LANG', $this->uri->rsegment(2));`in 时`constants.php`，出现此错误：

`Using $this when not in object context in constants.php`.

我不知道为什么。我对**codeIgniter**很陌生，我想定义一个常量，它将从 URI 中获取语言。我已经使用 ; 做了类似的事情`REQUEST_URI`，但使用`uri->segment`; 那会容易得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:02:43.097

codeigniter的架构方式，不能 `$this`在config.php中使用，因为在constant.php加载的时候所有的framework资源都没有加载。

为了执行您需要执行的操作，您应该执行以下操作：

创建一个新的自定义配置文件，比如 app_config.php（你可以随意调用它）

将此代码添加到 app_config 文件：

```
$ci = &get_instance();
define('LANG', $ci->uri->rsegment(2)); 
```

将此文件放在 config 文件夹中（与 config.php 所在的文件夹相同）

在 autoload.php 中，将此配置文件的名称添加为要自动加载的：

```
/*
| -------------------------------------------------------------------
|  Auto-load Config files
| -------------------------------------------------------------------
| Prototype:
|
|   $autoload['config'] = array('config1', 'config2');
|
| NOTE: This item is intended for use ONLY if you have created custom
| config files.  Otherwise, leave it blank.
|
*/

$autoload['config'] = array('app_config'); 
```

现在您将能够跨应用程序访问常量 LANG..

# plone - 在 Plone 的工作流状态菜单中禁用“高级...”

> ID：11904155
> 
> 赞同：2
> 
> 时间：2012-08-10T14:50:15.847
> 
> 标签：plone

我想为除经理和站点管理员之外的其他角色禁用工作流状态菜单中的“高级...”（content_status_history）链接。是否有我可以用来执行此操作的权限？还是此链接的许可与过渡的存在相结合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:03:48.867

链接的存在与工作流转换相关联。它链接到的表单提供了额外的选项来设置当前对象上可用的转换。没有权限控制它的存在；菜单项是硬编​​码的。

从[`plone.app.contentmenu.menu`来源](https://github.com/plone/plone.app.contentmenu/blob/6252354d07e8946cced6effbd0a7a3957d202a60/plone/app/contentmenu/menu.py#L634)：

```
 if len(results) > 0:
        results.append({ 'title'        : _(u'label_advanced', default=u'Advanced...'),
                         'description'  : '',
                         'action'       : url + '/content_status_history',
                         'selected'     : False,
                         'icon'         : None,
                         'extra'        : {'id': 'advanced', 'separator': 'actionSeparator', 'class': 'kssIgnore'},
                         'submenu'      : None,
                        }) 
```

要提供您自己的实现（如果满足某些条件，可能使用再次*删除*最后一个选项的子类），您必须使用 an[`override`](http://collective-docs.readthedocs.org/en/latest/components/zcml.html#overrides)重新定义`browser:menu`注册。

在您的情况下，您必须使用以下声明`overrides.zcml`指向您自己的实现：`browser:menu`

```
 <browser:menu
    id="plone_contentmenu_workflow"
    title="The 'workflow' menu - allows the user to execute workflow transitions"
    class=".yourmodule.YourWorkflowMenu"
    /> 
```

然后在`yourmodule.py`创建一个`YourWorkflowMenu`类，例如：

```
from plone.app.contentmenu.menu import WorkflowMenu

class YourWorkflowMenu(WorkflowMenu):
    def getMenuItems(self, context, request):
        results = super(YourWorkflowMenu, self).getMenuItems(context, request)
        if len(results) > 0 and someothercondition:
            # Remove status history menu item ('Advanced...')
            results = [r for r in results
                if not r['action'].endswith('/content_status_history')]
        return results 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T17:40:39.970

您应该能够通过添加隐藏菜单项

```
a#advanced {
   display: none;
} 
```

到你的风格。

与臃肿的前清洁解决方案相比，这是一个务实的解决方案。

# multithreading - 编译器在多线程程序中对寄存器的使用

> ID：11904156
> 
> 赞同：2
> 
> 时间：2012-08-10T14:50:18.253
> 
> 标签：multithreading, process, operating-system

这是一个普遍的问题，但是：

在多线程程序中，编译器使用寄存器临时存储全局变量是否安全？

我认为不是，因为将全局变量存储在寄存器中可能会更改其他线程的保存值。

那么如何使用寄存器来存储函数中定义的局部变量呢？

我认为没关系，因为没有其他线程能够获取这些变量。

如果我错了，请纠正我。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T15:12:05.730

事情比你想象的要复杂得多。

即使编译器将值存储到内存中，CPU 通常也不会立即将数据推送到 RAM。它将它存储在缓存中（有些系统在处理器和内存之间有 2 或 3 级缓存）。

更糟糕的是，编译器决定的指令顺序可能不是实际执行的顺序，因为许多处理器可以在自己的管道中重新排序指令（甚至指令的子部分）。

通常，在多线程环境中，您应该亲自注意不要从两个单独的线程访问（读取或写入）相同的内存，除非以下情况之一为真：

*   您正在使用确保正确同步的几种特殊原子操作之一。
*   您使用了几种同步操作之一来“保留”对共享数据的访问，然后“放弃”它。这些确实包括所需的内存屏障，这些屏障也可以保证数据是它应该是的。

您可能想阅读[http://en.wikipedia.org/wiki/Memory_ordering#Memory_barrier_types](http://en.wikipedia.org/wiki/Memory_ordering#Memory_barrier_types)和[http://en.wikipedia.org/wiki/Memory_barrier](http://en.wikipedia.org/wiki/Memory_barrier)

如果您已经准备好有点头疼并想看看事情实际上会变得多么复杂，这里是您的晚间讲座[内存屏障：软件黑客的硬件视图](http://www.rdrop.com/users/paulmck/scalability/paper/whymb.2010.06.07c.pdf)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:10:25.820

“安全”并不是一个真正合适的词。许多高级语言（例如 C）没有线程模型，因此语言规范没有说明多线程交互。

如果您不使用任何类型的锁定原语，那么您无法保证不同线程如何交互。因此，编译器有权将寄存器用于全局变量。

即使您使用锁定，行为仍然可能很棘手：如果您读取一个变量，然后获取一个锁，然后再次读取该变量，编译器仍然无法知道它是否必须再次从内存中读取变量，或者可以使用它存储在寄存器中的较早的值。

在 C/C++ 中，将变量声明为 volatile 将强制编译器始终从内存重新加载变量并解决此特定实例。

大多数系统上还有“互锁*”原语，它们具有保证的原子性语义，可用于确保某些操作是线程安全的。锁定原语通常建立在这些低级操作之上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T15:08:28.673

在多线程程序中，您有两种情况之一：如果它在单处理器（单核，单 CPU）上运行，那么线程之间的切换就像进程之间的切换一样处理（尽管由于线程在相同的虚拟内存空间） - 一个线程的所有寄存器在转换到另一个线程期间被保存，因此无论出于何种目的使用寄存器都可以。这是操作系统使用的上下文切换例程的工作，寄存器集被认为是线程（或进程）上下文的一部分。如果您有一个多处理器系统 - 多个 CPU 或单个 CPU 上的多个内核 - 每个处理器都有自己不同的一组寄存器，所以同样，使用寄存器来存储东西是可以的。最重要的是，当然，

也就是说，在某些架构和/或某些操作系统上，可能存在特定的例外情况，因为 ABI 保留了某些寄存器供操作系统或提供操作系统接口的库的特定用途使用，但是您的编译器（s）通常具有内置平台的那种类型的知识。但是，如果您正在进行内联汇编或某些其他“低级”事情，则需要了解它们......

# android - 我可以在调用 Intent.ACTION_VIEW 时禁用一个选项吗？

> ID：11904158
> 
> 赞同：1
> 
> 时间：2012-08-10T14:50:22.043
> 
> 标签：android, android-intent, intentfilter, actionview

我正在做一个应用程序，我的清单中有一个 Intent Filter，这个 Intent Filter 有动作

```
<action android:name="android.intent.action.VIEW" /> 
```

和类别

```
<category android:name="android.intent.category.DEFAULT" />
<category android:name="android.intent.category.BROWSABLE" /> 
```

并且，当我想启动一个包含在该意图过滤器中声明的数据的网页时，我的应用程序会出现在对话框中，并带有浏览器。

这就是我想要的，但在某些情况下，当我按下特定按钮时，我不想启动我的应用程序，但它会出现在对话框中。

我可以禁用它吗？

PS。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:56:13.517

> 我可以禁用它吗？

只有通过创建自己的选择器对话框，使用类似的`PackageManager`东西`queryIntentActivities()`来找出可能性，将自己从该列表中过滤出来，然后用结果构建一个对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-21T18:01:40.067

你可以这样，它工作得很好。

```
void showBrowsers() {
    List<Intent> shareIntentsLists = new ArrayList<Intent>();
    Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
    List<ResolveInfo> resInfos = getPackageManager().queryIntentActivities(browserIntent, 0);
    if (!resInfos.isEmpty()) {
        for (ResolveInfo resInfo : resInfos) {
            String packageName = resInfo.activityInfo.packageName;
            if (!packageName.toLowerCase().contains("YOURPACKAGE_NAME")) {
                Intent intent = new Intent();
                intent.setComponent(new ComponentName(packageName, resInfo.activityInfo.name));
                intent.setAction(Intent.ACTION_VIEW);
                intent.setData(Uri.parse(url));
                intent.setPackage(packageName);
                shareIntentsLists.add(intent);
            }
        }
        if (!shareIntentsLists.isEmpty()) {
            Intent chooserIntent = Intent.createChooser(shareIntentsLists.remove(0), "Choose Browser");
            chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, shareIntentsLists.toArray(new Parcelable[]{}));
            startActivity(chooserIntent);
        } else
            Log.e("Error", "No Apps can perform your task");
    }
} 
```

# node.js - 在 MongoDB 中删除时自动删除引用对象

> ID：11904159
> 
> 赞同：46
> 
> 时间：2012-08-10T14:50:25.570
> 
> 标签：node.js, mongodb, mongoose

假设我有这样的架构：

```
var Person = new Schema({
    name: String
});

var Assignment = new Schema({
    name: String,
    person: ObjectID
}); 
```

如果我删除一个人，仍然会留下引用不存在的人的孤立分配，这会在数据库中产生无关的混乱。

有没有一种简单的方法可以确保当一个人被删除时，对该人的所有相应引用也将被删除？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-10T15:48:31.150

您可以在架构上添加自己的`'remove'`Mongoose[中间件](http://mongoosejs.com/docs/middleware.html)`Person`，以将该人从引用它的所有其他文档中删除。在您的中间件函数中，`this`是`Person`要删除的文档。

```
Person.pre('remove', function(next) {
    // Remove all the assignment docs that reference the removed person.
    this.model('Assignment').remove({ person: this._id }, next);
}); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-10T15:05:01.733

如果“简单”是指“内置”，那么不是。MongoDB 毕竟不是关系型数据库。您需要实现自己的清理机制。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-03-25T12:57:24.117

### 该`remove()`方法已弃用。

因此，在您的 Mongoose 中间件中使用“删除”可能不再是最佳实践。

[Mongoose 已经创建了更新来为`deleteMany()`和`deleteOne()`](https://github.com/Automattic/mongoose/issues/7195)提供钩子。你可以用那些代替。

```
Person.pre('deleteMany', function(next) {
    var person = this;
    person.model('Assignment').deleteOne({ person: person._id }, next);
}); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-06-06T20:22:13.703

如果有人在寻找 pre hook 但 for `deleteOne`and `deleteMany`functions 这对我来说是一个解决方案：

```
const mongoose = require('mongoose');
... 

const PersonSchema = new mongoose.Schema({
  name: {type: String},
  assignments: [{type: mongoose.Schema.Types.ObjectId, ref: 'Assignment'}]
});

mongoose.model('Person', PersonSchema);

.... 

const AssignmentSchema = new mongoose.Schema({
  name: {type: String},
  person: {type: mongoose.Schema.Types.ObjectId, ref: 'Person'}
});

mongoose.model('Assignment', AssignmentSchema)
...

PersonSchema.pre('deleteOne', function (next) {
  const personId = this.getQuery()["_id"];
  mongoose.model("Assignment").deleteMany({'person': personId}, function (err, result) {
    if (err) {
      console.log(`[error] ${err}`);
      next(err);
    } else {
      console.log('success');
      next();
    }
  });
}); 
```

`deleteOne`在服务中的某处调用函数：

```
try {
  const deleted = await Person.deleteOne({_id: id});
} catch(e) {
  console.error(`[error] ${e}`);
  throw Error('Error occurred while deleting Person');
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-09-21T06:14:31.507

您可以使用软删除。不要从 Person Collection 中删除人员，而是使用 isDelete 布尔标志设置为 true。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-21T19:07:30.853

即使删除了引用的个人文档，您也可以保留文档原样。Mongodb 清除指向不存在文档的引用，这不会在删除引用的文档后立即发生。相反，当您对文档执行操作时，例如更新。而且，即使在引用被清除之前查询数据库，返回也是空的，而不是空值。

第二个选项是使用[$unset](https://docs.mongodb.com/manual/reference/operator/update/unset/)运算符，如下所示。

```
{ $unset: { person: "<person id>"} } 
```

注意在查询中使用 person id 来表示引用的值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-16T11:23:13.737

您可以像这样简单地调用需要删除的模型并删除该文档：

PS：这个答案并不特定于问题模式。

```
const Profiles = require('./profile');

userModal.pre('deleteOne', function (next) {
  const userId = this.getQuery()['_id'];
  try {
    Profiles.deleteOne({ user: userId }, next);
  } catch (err) {
    next(err);
  }
}); 
```

// 在用户删除路由中

```
exports.deleteParticularUser = async (req, res, next) => {
  try {
    await User.deleteOne({
      _id: req.params.id,
    });

    return res.status(200).json('user deleted');
  } catch (error) {
    console.log(`error`, error);
    return next(error);
  }
}; 
```

# php - Yii eexcelview 不导出网格过滤器

> ID：11904161
> 
> 赞同：0
> 
> 时间：2012-08-10T14:50:30.170
> 
> 标签：php, csv, controller, yii

我正在尝试通过单击按钮`cgridview`使用扩展名将数据（当前搜索结果）导出到 CSV 。`excelview`

但是，我没有在我的 CSV 中获得过滤后的数据；相反，我得到了模型中的所有记录。

这是我正在调用的控制器操作：

```
 public function actionExcel()
{
    $model = new PackagingMetric('search'); 
    $this->widget('application.extensions.EExcelView', array( 
            'dataProvider'=> $model->search(), 
            'grid_mode'=>'export', 
            'exportType'=>'Excel5', 
            'filename'=>'report', 
            )); 
} 
```

有谁知道如何解决这个问题，或者我的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:13:54.830

您在那里没有任何搜索条件。通常你会这样做：

```
$model = new PackagingMetric('search');
$model->attributes = $_POST['PackagingMetric']; // this would be the model associated with the search form
$model->search(); 
```

我在您的代码中没有看到任何从用户输入中获取值的内容，因此您应该以某种方式使用您的搜索表单。当然，您的模型中可以有默认值，但我认为情况并非如此。

**编辑：**

我对您正在使用的扩展程序的源代码进行了更多研究。似乎导出按钮实际上是标准`<a href=''></a>`链接，可将您发送到应该输出 Excel 工作表的页面。但是，由于实际的过滤器数据不会传输到该页面，因此无法在服务器端应用这些过滤器。

由于这是扩展的预期行为，因此没有优雅的方法来解决它，但有一些混乱的方法。

第一种选择是自己调整扩展，但这会破坏与未来版本的兼容性。另一种方法是使用 Javascript 将您的数据发送到您需要的地方。在显示 gridview 的视图文件中，您应该将小部件包装在一个`form`元素中或`ActiveForm`禁用所有验证的情况下。然后你需要在页面的某处放置以下一段 Javascript 代码：

```
var $excelForm = $( '#your_form_id' );
$( '.summary a', $excelForm ).click( function() {
    $excelForm.attr( 'action', this.href ).submit();
    return false;
}); 
```

这会将表单提交到导出链接指定的地址。因为表单包装了小部件，它将包含过滤结果的输入元素，因此您将可以访问服务器上用户输入的过滤器。您可以使用我最初发布的代码从那里获取数据。

注意：我使用`div`包含导出按钮的默认类名，即`.summary`. 如果您使用不同的类，则应更改相应的 JS 代码。

# php - php中的天数差异

> ID：11904176
> 
> 赞同：0
> 
> 时间：2012-08-10T14:51:16.547
> 
> 标签：php, mysql

```
$currentDate = time() - $printDate; //print date is a timestamp in mysql
$numberDays = floor($currentDate/(606024)); 
echo  "number of days: $numberDays </br>"; 
$editedDate = date("d ", $numberDays); 
echo "edited date: $editedDate"; 
```

这是我的输出：

```
number of days: 15562 
edited date: 31 
number of days: 15562 
edited date: 31 
number of days: 15562 
edited date: 31 
```

这给了我 15562 和 31，所以我在这里遗漏了什么吗？我只需要打印出天的差异

编辑：如果正在搜索此问题的任何人也碰巧遇到它，那么这是有效的最终输出：

```
$currentDate = time();
echo "Current Time:";
echo $currentDate;
echo "</br>";
$editedPrintDate = strtotime($printDate);
echo "Print Date:";
echo $editedPrintDate;
echo "</br>";
$numberDays = floor(abs($currentDate - $editedPrintDate)/60/60/24); 
echo "Number of Days:";
echo floor($numberDays);
echo "</br>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:54:04.993

您只需计算两个日期之间的秒数，然后除以得到天数：

```
$numDays = abs($smallestTimestamp - $biggestTimestamp)/60/60/24; 
```

然后，您可以使用 for 循环来检索日期：

```
$numDays = abs($smallestTimestamp - $biggestTimestamp)/60/60/24;

for ($i = 1; $i < $numDays; $i++) {
    echo date('Y m d', strtotime("+{$i} day", $smallestTimestamp)) . '<br />';
} 
```

同样，如果您不知道哪个时间戳最小，您可以使用该`min()`函数（strtotime 中的第二个参数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:58:31.007

我想您也可以将时间戳转换为 DateTime 对象，然后使用[DateTime::diff](http://www.php.net/manual/en/datetime.diff.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T14:59:37.573

你的代码永远不会工作。

`date()`需要一个时间戳，表示一个时间点，其中 0 表示 1970 年 1 月 1 日。您不能传入一些任意数字（您的 /606024 值），因为这不再是 unix 时间戳，它现在是一些代表“几乎一周”的不稳定数字。

如果您想要经过的天数，只需在 MySQL 中进行计算，它[可以](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_datediff)为您计算出来：

```
SELECT DATEDIFF(now(), FROM_UNIXTIME(yourtimestampfield)) AS days 
```

# mongodb - 在 mongo 中搜索具有特定列的文档

> ID：11904179
> 
> 赞同：0
> 
> 时间：2012-08-10T14:51:29.467
> 
> 标签：mongodb, nosql

```
db.posts.insert({
    title: "Hello World",
    "2d": [1,2],
    "3d": [3,4,5],
    "4d": [6,7,8,9],
    "6d: [1,2,3,4,5,6]
}); 
```

每个文档只能有`2d`列，或者只有`3d`列，或者只有两者，或者只有`4d`and`2d`等。如何找到具有该特定列的文档？

`SELECT * FROM posts where posts.hascolumn=2d`

^仅作示范。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:53:16.387

您可以使用`db.posts.find({"2d" : {$exists:true})`

# wpf - 触摸屏友好的 WPF 控件？

> ID：11904183
> 
> 赞同：0
> 
> 时间：2012-08-10T14:51:51.917
> 
> 标签：wpf, wpf-controls, touch

我正在开发一个 WPF 业务应用程序，该应用程序需要在触摸屏信息亭以及传统的鼠标和键盘设置上可用。

我正在寻找任何可用的触摸友好控件库，和/或标准 WPF 控件的任何样式或主题，以提高触摸的可用性，但我并没有真正找到太多。

商业选择很好。（事实上​​，像 Telerik 的 RadControls 具有触摸友好的样式和功能是理想的。他们的[MetroTouch](http://blogs.telerik.com/blogs/posts/12-05-31/touch-up-your-app-with-telerik-s-metrotouch-skin-for-asp-net-ajax.aspx)皮肤看起来不错，但它只适用于 ASP.NET AJAX）。

我看过 Surface 2，但我并没有真正开发 Surface 应用程序，而且这个应用程序可能必须支持 XP 和 Vista，我认为这对 Surface 来说是不行的。也就是说，如果有人认为 Surface 是可行的方法，我会有兴趣了解原因。

理想情况下，我更愿意为人们实际用于触摸友好型应用程序的解决方案提供建议。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T15:18:51.847

要考虑的一件事是您的自助服务终端触摸屏的实际功能。我们在我店里使用的大多数工业触摸屏都很粗糙，灵敏度低（需要相当大的力量来“推动”）并且没有真正的“滑动”支持。这限制了您可以通过触摸友好界面的方式完成的工作。有了这些限制，您只能将按钮设置得足够大且间距足够大，以防止意外按下。如果不首先评估一些实际的信息亭屏幕以查看它们的响应速度，我不会在使您的界面触摸友好的道路上走得太远。您可能会发现您希望支持的触控功能在您所针对的硬件上实际上并不能很好地工作。

也就是说，技术正在改进，我绝对有兴趣了解新控件的发展。大约一年前我做了一些搜索，但没有找到太多。我主要建议为现有控件滚动您自己的控件模板（例如，我们这样做是为了创建看起来更像物理开关的东西），因为这真的不是太难。

# asp.net-mvc - 使用 Nginx 在 Mono 上运行的 ASP MVC 应用程序的内存缓存

> ID：11904185
> 
> 赞同：1
> 
> 时间：2012-08-10T14:51:56.973
> 
> 标签：asp.net-mvc, asp.net-mvc-2, mono, nginx

我有一些使用 Mono 和 Nginx 在 linux 机器上运行的 https ASP MVC 2 Web 服务。

如何配置它们与ASP MVC的[输出缓存功能一起使用？](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/improving-performance-with-output-caching-cs)

```
using System.Web.Mvc;

namespace MvcApplication1.Controllers
{
[HandleError]
public class HomeController : Controller
{
    [OutputCache(Duration=10)]
    public ActionResult Index()
    {
        return View();
    }

}
} 
```

我想将缓存存储在运行 Web 服务的同一台机器上。

我已经尝试调整我的 nginx 配置以包含 proxy_cache 并重定向到同一台机器上的另一个端口以运行原始请求，使用了这个[示例](http://codebetter.com/karlseguin/2010/01/13/asp-net-performance-part-5-nginx/)中的大部分代码。但是，我没有运气让它工作。

这是我所拥有的：

```
proxy_cache_path /usr/local/nginx/proxy_temp/ levels=1:2 keys_zone=cache:10m inactive=10m max_size=250M;
proxy_temp_path /usr/local/nginx/proxy_temp/tmp;

server
{
   listen   443 ssl;
   server_name myserver.com;

   ssl_certificate /home/ubuntu/ssl/nginx_https.pem;
   ssl_certificate_key /home/ubuntu/ssl/nginx_https.key;

    location /
    {
                    proxy_set_header  X-Real-IP        $remote_addr;
                    proxy_set_header  Host             $http_host;
                    proxy_pass https://127.0.0.1:4430;
                    proxy_cache cache;
                    proxy_cache_valid 200 302 60m;
                    proxy_cache_valid 404 1m;

    }
}

server
{
   listen   4430 ssl;

   root          /var/www/mywebpage/;

   ssl_certificate /home/user/ssl/https.pem;
   ssl_certificate_key /home/user/ssl/https.key;

    location /
    {
            index index.html index.htm default.aspx Default.aspx;
            fastcgi_pass 127.0.0.1:9000;
            include /etc/nginx/fastcgi_params;
    }
} 
```

如果我添加该行：

```
proxy_ignore_headers Cache-Control; 
```

然后缓存工作，但是它开始缓存所有内容，我只希望它缓存在我的 MVC 应用程序中标记有 OutputCache 属性的方法，尽管我不确定如何正确配置 Nginx 缓存来处理它。

将 Nginx 缓存系统与在 Mono 上运行的 ASP MVC 应用程序的输出缓存属性耦合的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T18:28:57.470

Nginx 缓存和 ASP.NET 缓存**是两个完全**不同的东西。如果您`[OutputCache]`在 ASP.NET 项目中使用，Nginx 将不会意识到这一点。反之亦然，`proxy_cache_*`您的 nginx 配置中的指令绝不会影响 ASP.NET 缓存。

您应该决定在哪里缓存，使用 nginx 或使用 ASP.NET。如果要使用 Nginx 进行缓存，请删除 [OutputCache] 属性或通过 alltogether 禁用输出缓存`web.config`。相反，在 nginx 中为不同的缓存区域创建不同的位置，如下所示：

```
# for your Home controller, assuming you use the /home/ route
location /home/ {
    proxy_set_header  Host             $http_host;
    proxy_pass https://127.0.0.1:4430;
    proxy_cache cache;
    proxy_cache_valid 200 302 10m;
    proxy_cache_valid 404 1m;
}
# for all other routes
location / {
    proxy_set_header  Host             $http_host;
    proxy_pass https://127.0.0.1:4430;
    # no proxy_cache here means no caching on the nginx side
} 
```

您可以创建复杂`location`的部分，甚至使用正则表达式来匹配您的 ASP.NET 路径/路由。请参阅有关该内容的[nginx 文档](http://wiki.nginx.org/HttpCoreModule#location)。

如果您想在 ASP.NET 中控制缓存，请`proxy_cache*`从 nginx 配置中删除所有指令（`location`如上例中的最后一部分）并使用常规的 ASP.NET 缓存指令，如`[OutputCache]`指令。

我建议使用 nginx 方法，因为 nginx 非常快速且功能强大，但首先需要阅读一些内容。但是如果你了解它，你可以使用它的反向代理功能来创建强大的网络缓存，不仅适用于 ASP.NET，也适用于所有其他的 web 应用程序，如 ruby​​、node.js 等。

# vba - Range(...).Formula 不能完全翻译

> ID：11904194
> 
> 赞同：1
> 
> 时间：2012-08-10T14:52:22.263
> 
> 标签：vba, excel

我无法弄清楚这一点。

我们主要使用法语版本的 Excel（因为我们住在加拿大的法语省）。在 VBA 代码的某处，我直接设置了单元格的公式。通常，我们必须用英语编写公式，而 Excel 会进行翻译（据我所知，在 VBA 中用英语以外的任何其他语言编写公式都会导致错误）。然而，这个方程只有一半被翻译，我认为这导致了我的问题（在另一个单元格中编写正确的公式会产生不同的结果，而且很可能是正确的结果）。

```
range("J2").Formula = "=round(IF(F2="",0,F2),2)-round(IF(G2="",0,G2),2)" 
```

在单元格中被翻译成这个：

```
=ARRONDI(SI(F2=",0,F2),2)-round(IF(G2=",0,G2),2) 
```

如您所见，右侧部分应为“ARRONDI（SI（..”），但不是这样读的。我尝试添加空格，完全删除减号等。没有任何效果，它总是翻译一半。任何想法?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T14:59:54.717

在 VBA 中，你需要像这样逃避你的报价：

```
range("J2").Formula = "=round(IF(F2="""",0,F2),2)-round(IF(G2="""",0,G2),2)" 
```

这是因为`"`字符在 VBA 中用作字符串的开始/结束。因此，如果您不想将其包含**在**字符串中，则需要连续输入两次。

# jquery - Google Maps infoWindow 未正确放置在 jQuery Mobile 应用程序中

> ID：11904199
> 
> 赞同：0
> 
> 时间：2012-08-10T14:52:30.287
> 
> 标签：jquery, google-maps, jquery-mobile

我在 jQuery Mobile 应用程序中嵌入了谷歌地图。在 iPhone 上查看地图并单击 infoWindows 时出现以下行为：

1.  如果单击需要地图向左平移的 infoWindow，则 infoWindow 的右侧会从屏幕的右侧脱落。![向左平移的地图](../Images/9d0c31635004cdac6347e1a609d75856.png)
2.  单击需要地图向右平移的信息窗口不会出现同样的问题。![向右平移的地图](../Images/ddcba36c3dd3a39562b7f90a0e629acb.png)

所有 infoWindows 的大小都正确，但地图根本没有平移到正确的位置。我正在使用以下代码来放置地图：

```
<style type="text/css">
.page-map, .ui-content, #map_canvas { width: 100%; height: 100%; padding: 0; }
#map_canvas img{max-width:none};
.content-primary, #map_canvas { height: 100%; min-height: 100%; }
</style>

<div data-role="page" data-theme="b" id="mappage" class="page-map" style="width:100%; height:100%;">
    <div data-role="content" class="fullHeight">
        <div id="map_canvas"></div>
    </div>
</div> 
```

当单击导致地图向左平移的标记时，我需要弄清楚如何让 infoWindows 正确平移。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:32:49.833

窗口的自动调整大小导致了这个问题。我调整了我的 CSS 以强制信息窗口为 225 像素。一旦我强制信息窗口小于 iPhone 视口的开口，它就会按照我的预期正确放置信息窗口。

# asp.net - WCF Web 服务错误：无法激活该服务，因为它不支持 ASP.NET 兼容性

> ID：11904202
> 
> 赞同：55
> 
> 时间：2012-08-10T14:52:40.290
> 
> 标签：asp.net, wcf, rest

我正在尝试创建一个宁静的 wcf Web 服务。当我尝试通过客户端连接到服务时，出现以下错误：

> > **该服务无法激活，因为它不支持 ASP.NET 兼容性。为此应用程序启用了 ASP.NET 兼容性。在 web.config 中关闭 ASP.NET 兼容模式，或将 AspNetCompatibilityRequirements 属性添加到服务类型，并将 RequirementsMode 设置为“允许”或“必需”。**

其他人遇到了问题，但他们通过更改 web.config 解决了问题。我已经实施了他们的修复，但问题仍然存在。这是我的 web.config：

```
<system.serviceModel>
    <behaviors>
      <endpointBehaviors>
        <behavior name="WebBehavior" >
           <webHttp />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="MyServiceBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <service behaviorConfiguration="MyServiceBehavior" name="myfirstwcf">
        <endpoint address="ws" binding="basicHttpBinding" 
                  contract="Imyfirstwcf" />
        <endpoint address="ws2" binding="wsHttpBinding" 
                  contract="Imyfirstwcf" />
        <endpoint address="" behaviorConfiguration="WebBehavior" 
                  binding="webHttpBinding" 
                  contract="Imyfirstwcf" />
        <endpoint address="mex" binding="mexHttpBinding" 
                  contract="IMetadataExchange" />
      </service>
    </services>
    <serviceHostingEnvironment aspNetCompatibilityEnabled= "true"
      multipleSiteBindingsEnabled="true"  />
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-08-10T15:02:15.933

在您的主要服务上，您可以将您的服务标记为：

```
[AspNetCompatibilityRequirements(
        RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)] 
```

来自[http://forums.silverlight.net/t/21944.aspx](http://forums.silverlight.net/t/21944.aspx)

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2014-04-22T11:01:35.657

它会工作：

您已在代码中更改此行或在 web.config 中添加该行：

```
<system.serviceModel>
<serviceHostingEnvironment aspNetCompatibilityEnabled="false" multipleSiteBindingsEnabled="true" /> 
</system.serviceModel> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-19T12:14:23.010

如果某人有很多服务并且服务是使用自定义创建的`ServiceHostFactory`，那么`AspNetCompatibilityRequirementsAttribute`也可以在`CreateServiceHost`方法中设置。

**例子：**

```
public class HostFactory : ServiceHostFactory
{
    protected override ServiceHost CreateServiceHost(Type serviceType, Uri[] baseAddresses)
    {
        var host = new ServiceHost(serviceType, baseAddresses);
        //other relevent code to configure host's end point etc
        if (host.Description.Behaviors.Contains(typeof(AspNetCompatibilityRequirementsAttribute)))
        {
            var compatibilityRequirementsAttribute = host.Description.Behaviors[typeof(AspNetCompatibilityRequirementsAttribute)] as AspNetCompatibilityRequirementsAttribute;
            compatibilityRequirementsAttribute.RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed;
        }
        else
        {
            host.Description.Behaviors.Add(new AspNetCompatibilityRequirementsAttribute() { RequirementsMode =AspNetCompatibilityRequirementsMode.Allowed});
        }
        return host;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-09T23:25:19.797

实际上，根据最新的文档，您需要做两件事，

1.对于您的服务等级：

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
[ServiceBehavior(Namespace = "url")]
public class Service : IService
{
} 
```

2.对于web.config

```
<system.serviceModel>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true"/> 
```

# javascript - 为什么在原型中定义属性被认为是反模式

> ID：11904203
> 
> 赞同：7
> 
> 时间：2012-08-10T14:52:43.720
> 
> 标签：javascript, prototype, anti-patterns, prototype-programming, prototypal-inheritance

我经常看到这种模式来定义 javascript 对象

```
function Person(name) {
    this.name = name;
}
Person.prototype.describe = function () {
    return "Person called "+this.name;
}; 
```

在[这篇文章中](http://css.dzone.com/articles/ecmascriptnext-classes)，它说直接向原型对象添加属性被认为是一种反模式。

来自“基于经典类”的语言，除了方法之外必须定义属性听起来不太正确，而且在 javascript 中，方法应该只是具有函数值的属性（我在这里吗？）

我想知道是否有人可以解释这一点，甚至提出更好的方法来处理这些情况

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T15:02:48.930

在通常的面向对象语言中，您有一个描述成员、方法和构造函数的类的定义。

在 JS 中，“类”的定义（它不像其他语言那样真正是类......有时使用术语伪类）是构造函数本身。如果您的对象由 参数化`name`，则编写

```
function Person(name) {
    this.name = name;
} 
```

即属性`name`必须在构造函数中设置。

当然也可以写

```
function Person(name) {
    this.name = name;
    this.describe = function() { ... };
} 
```

它会按您的预期工作。

但是，在这种情况下，您将在每次调用构造函数时创建一个单独的方法实例。

另一方面，这里：

```
Person.prototype.describe = function () {
    return "Person called "+this.name;
}; 
```

你只定义一次方法。的所有实例都`Person`将收到一个`__proto__`指向`Person.prototype`. 所以如果你打电话

```
var myPerson = new Person();
myPerson.describe(); 
```

它会起作用，因为 JS 直接在对象中查找对象成员，然后在其原型等中一直到`Object.prototype`.

关键是在第二种情况下，该函数只存在一个实例。您可能会同意这是一个更好的设计。即使你不这样做，它也只会占用更少的内存。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-10T15:03:28.537

该代码没有任何问题。据说是这个意思：

```
function Person(name) {
    this.name = name;
}
Person.prototype.age = 15; //<= adding a hardcoded property to the prototype 
```

现在你会看到这个：

```
var pete = new Person('Pete'), mary = new Person('Mary');
pete.age; //=> 15
mary.age  //=> 15 
```

大多数时候，这不是你想要的。分配给构造函数原型的属性在所有实例之间共享，在构造函数 ( `this.name`) 中分配的属性是特定于实例的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T14:58:25.573

正如 arxanas 所说，文章提到了*data properties*。

我认为原因是数据通常**特定于实例**，因此将其添加到原型中没有意义。

此外，如果您的数据是可变类型，例如数组，并且您将其分配给原型，那么此数组实例将在所有实例之间共享，并且您不能像每个实例都有自己的数组一样使用它。

* * *

**示例：**以下导致不正确的行为：

```
function Set() {

}

// shared between instances
// each instance adds values to **the same** array
Set.prototype.elements = [];

Set.prototype.add = function(x) {
   this.elements.push(x);
}; 
```

它应该是：

```
function Set() {
    // each instance gets its own array
    this.elements = [];
}

Set.prototype.add = function(x) {
   this.elements.push(x);
}; 
```

* * *

把它们加起来：

*   **将应该在所有实例之间共享的属性添加到原型。**
*   **在构造函数中分配实例特定的数据。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T14:59:55.017

就像*阿克萨纳斯*在他的评论中写的那样。原型中的数据属性或多或少类似于传统 oop 中的类级变量。除非您有非常特殊的需要，否则这些不是每天都使用的。就这样。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-28T17:14:09.233

在原型上声明属性根本不是反模式。当我看一个`prototype`对象时，我会想“这就是这种类型的原型对象对数据和方法所拥有的东西”。

其他人警告不要在原型中给属性一个引用值，例如：`Foo.prototype.bar = [];`--- 因为数组和对象是引用类型。引用类型是不可变的，因此“类”的每个实例都引用同一个数组或对象。只需`null`在原型中设置它们，然后在构造函数中给它们一个值。

我总是在原型中包含所有属性，原因很明确：与其他程序员交流哪些属性是公开可用的以及它们的默认值是什么，而不需要他们筛选构造函数来弄清楚。

如果您正在创建需要文档的共享库，这将变得特别有用。

考虑这个例子：

```
/**
 * class Point
 * 
 * A simple X-Y coordinate class
 *
 * new Point(x, y)
 * - x (Number): X coordinate
 * - y (Number): Y coordinate
 *
 * Creates a new Point object
 **/
function Point(x, y) {
    /**
     * Point#x -> Number
     *
     * The X or horizontal coordinate
     **/
    this.x = x;

    /**
     * Point#y -> Number
     *
     * The Y or vertical coordinate
     **/
    this.y = y;
}

Point.prototype = {
    constructor: Point,

    /**
     * Point#isAbove(other) -> bool
     * - other (Point): The point to compare this to
     *
     * Checks to see if this point is above another
     **/
    isAbove: function(other) {
        return this.y > other.y;
    }
}; 
```

（文档格式：[PDoc](http://pdoc.org/syntax.html)）

在这里仅仅阅读文档有点尴尬，因为关于`x`和`y`属性的信息嵌入在构造函数中。将其与在原型中包含这些属性的“反模式”进行对比：

```
/**
 * class Point
 * 
 * A simple X-Y coordinate class
 *
 * new Point(x, y)
 * - x (Number): X coordinate
 * - y (Number): Y coordinate
 *
 * Creates a new Point object
 **/
function Point(x, y) {
    this.x = x;
    this.y = y;
}

Point.prototype = {

    /**
     * Point#x -> Number
     *
     * The X or horizontal coordinate
     **/
    x: 0,

    /**
     * Point#y -> Number
     *
     * The Y or vertical coordinate
     **/
    y: 0,

    constructor: Point,

    /**
     * Point#isAbove(other) -> bool
     * - other (Point): The point to compare this to
     *
     * Checks to see if this point is above another
     **/
    isAbove: function(other) {
        return this.y > other.y;
    }

}; 
```

现在查看原型可以为您提供实际对象的快照，这更容易在您的脑海中可视化，并且作者更容易编写文档。构造函数也不会被文档弄得乱七八糟，并且坚持将`Point`对象带入生活的业务。

`Point`原型拥有一切，并且是关于“原型”对象对方法*和*数据都有什么的规范信息源。

我认为在原型中*不*包含数据属性是反模式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-23T12:48:56.517

也许相关：通常修改您不拥有的对象被认为是*反模式*。

这意味着，如果您没有创建对象，那么您就不会“拥有”该对象。包含：

*   本机对象（对象、数组等）
*   DOM 对象
*   浏览器对象模型 (BOM) 对象（例如`window`）
*   库对象

[Nicholas C. Zakas 提供可维护的 Javascript](https://www.oreilly.com/library/view/maintainable-javascript/9781449328092/ch11.html)源代码

# xml - Scala，在 XML 节点上组合过滤器

> ID：11904207
> 
> 赞同：2
> 
> 时间：2012-08-10T14:52:53.003
> 
> 标签：xml, scala, filter, xmlnode

XML 示例：

```
<structure-node (n)>
    <node-data (1)>
        <feature-list (n)>
            <feature (n)>
                <value (1)>123</value>
            </feature>
        </feature-list>
    </node-data>
</structure-node> 
```

括号中为最大出现次数。我想获得一个结构节点，但仅限于包含值等于 123 的地方。

我试过这个（玩！用Scala）：

```
@{ (parentNode \ "structure-node").filter{ f => (f \ "node-data" \ "feature-list" \ "feature" \ "value").text == "123"}  } 
```

但似乎我无法过滤节点本身不存在的字段。我必须组合过滤器吗？我试过了，但失败了...

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T16:17:28.313

您可以使用函数 exists 在“结构节点”标签下的“值”标签的 SeqNode 上添加条件：

```
(parentNode \ "structure-node").filter(s => (s \ "node-data" \ "feature-list" \ "feature" \ "value").exists ( t => t.text == "123")) 
```

或者

```
(parentNode \ "structure-node").filter(s => (s \\ "value").exists ( t => t.text == "123")) 
```

# google-chrome-devtools - 如何在 Chrome 开发者工具中查看注入的脚本

> ID：11904209
> 
> 赞同：4
> 
> 时间：2012-08-10T14:53:08.833
> 
> 标签：google-chrome-devtools

我正在使用 $().html(content) 将部分注入页面。部分是我需要检查的内联脚本块中的 JavaScript 代码。当我查看 Chrome 开发人员工具中的 Sources 选项卡时，它不会显示注入的内容。它显示的只是原始来源。

有没有办法访问 JavaScript？

### 更新

我使用的是 Google Chrome 21.0.1180.77，但我也安装了 Google Chrome Canary。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:12:33.777

我没有源选项卡（元素、资源、网络、脚本、时间线、配置文件、审核、控制台）。

~~Elements 选项卡始终反映 DOM 的当前状态，因此它将显示任何注入的脚本。~~ 编辑：这似乎是错误的。

有一个关于此的 Chrome 问题： [http ://code.google.com/p/chromium/issues/detail?id=95352](http://code.google.com/p/chromium/issues/detail?id=95352)

您可以在注入的 JavaScript 代码中添加[特殊格式的注释](http://blog.getfirebug.com/2009/08/11/give-your-eval-a-name-with-sourceurl/)，然后它将显示在“脚本”选项卡中（但无论出于何种原因，它仍然不会显示在“元素”选项卡中）：

```
//@ sourceUrl=whatever.js 
```

# android - 从 XML 读取奇怪的行为

> ID：11904213
> 
> 赞同：1
> 
> 时间：2012-08-10T14:53:23.440
> 
> 标签：android

这是我的尺寸 XML 文件：

```
<resources>    
    <dimen name="time_text_size">20dp</dimen>
    <dimen name="artist_text_size">20dp</dimen>
</resources> 
```

这是我的代码：

```
int timeSize = res.getDimensionPixelSize(R.dimen.time_text_size);
System.out.println("timeSize: " + timeSize);
int artistSize = res.getDimensionPixelSize(R.dimen.artist_text_size);
System.out.println("artistSize: " + artistSize); 
```

这是控制台的结果：

```
08-10 16:48:44.705: I/System.out(11866): timeSize: 40
08-10 16:48:44.705: I/System.out(11866): artistSize: 20 
```

这是我的反应： **WTF！？**

我的平板电脑（Transformer Prime）出现此错误。在我的 Galaxy Nexus 上，这很好用，我对此没有任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:56:36.670

//实际上你是在xhdpi设备上运行的

```
20 * 2 =40 px 
```

如果您有另一个文件夹或文件夹`dimen.xml`，请检查您可能复制粘贴在那里的值是否相同。`values-hdpi``values-xhdpi`

# iphone - 如何从 iPhone 应用程序转到 Safari 中的上一个选项卡

> ID：11904217
> 
> 赞同：1
> 
> 时间：2012-08-10T14:53:27.367
> 
> 标签：iphone, ios

我有一个网络应用程序，它有一个链接，当在 iPhone 中单击该链接时，该链接可以启动一个用于上传照片的应用程序。应用程序上传照片后，它使用以下继续 url 调用 safari：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString: CONTINUE_URL]] 
```

但这会在 Safari 中打开一个新选项卡。我想在启动应用程序的原始选项卡上加载继续 URL，而不是打开新选项卡。有人知道怎么做吗？

# xslt - 如何使用 XSLT 读取这些动态数据字段

> ID：11904218
> 
> 赞同：0
> 
> 时间：2012-08-10T14:53:31.683
> 
> 标签：xslt

我有来自 XML 的数据如下的情况。我想要下面输入 XML 之后显示的格式的数据

```
**Input XML:-**

<JLINKMetadata>
    <photos>
        <EventNumber>
            <string>120423007237</string>
            <string>120602009897</string>
            <string>071030-3242</string>
            <string>071022-2374</string>
            <string>071010-2484</string>
            <string>071018-2894</string>
        </EventNumber>
            <EventDate>
                <dateTime>2012-04-23T06:27:00</dateTime>
                <dateTime>2012-06-02T18:53:00</dateTime>
                <dateTime>2007-10-30T20:35:00</dateTime>
                <dateTime>2007-10-22T16:45:00</dateTime>
                <dateTime>2007-10-10T16:50:00</dateTime>
                <dateTime>2007-10-18T19:40:00</dateTime>
            </EventDate>
        <DOB>
            <dateTime>1965-07-08T00:00:00</dateTime>
            <dateTime>1965-07-08T00:00:00</dateTime>
            <dateTime>1965-07-08T00:00:00</dateTime>
            <dateTime>1965-07-08T00:00:00</dateTime>
            <dateTime>1965-07-08T00:00:00</dateTime>
            <dateTime>1965-07-08T00:00:00</dateTime>
        </DOB>
    </photos>
</JLINKMetadata> 
```

**以下是我想要上述 XML 数据的现有 XSLT 格式....**

```
<PersonPhoto>                 
    <!--PersonPhotos.EventNumber-->
    <EventIdentification>
        <IdentificationID>EVT12345</IdentificationID>
    </EventIdentification>

    <EventDate>
        <!--PersonPhotos.EventDate-->
        <Date>2007-02-20</:Date>
    </EventDate>                    

    <PersonBirthDate>
        <!--PersonPhotos.BirthDate-->
        <Date>1981-02-20</Date>
    </PersonBirthDate>

</PersonPhoto> 
```

**这是我最终想要的输出 XML：-**

```
<Photos>
    <PersonPhoto>
        <EventIdentification>
            <IdentificationID>120423007237</IdentificationID>
        </EventIdentification>
        <EventDate>
            <Date>04/23/2012</Date>
        </EventDate>
        <PersonBirthDate>
            <Date>7/8/1965</Date>
        </PersonBirthDate>
    </PersonPhoto>

    <PersonPhoto>
        <EventIdentification>
            <IdentificationID>120602009897</IdentificationID>
        </EventIdentification>
        <EventDate>
            <Date>10/22/2007</Date>
        </EventDate>
        <PersonBirthDate>
            <Date>11/6/1945</Date>
        </PersonBirthDate>
    </PersonPhoto>

    <PersonPhoto>
        <EventIdentification>
            <IdentificationID>120602009897</IdentificationID>
        </EventIdentification>
        <EventDate>
            <Date>5/12/2011</Date>
        </EventDate>
        <PersonBirthDate>
            <Date>1/3/1955</Date>
        </PersonBirthDate>
    </PersonPhoto>

</Photos> 
```

在此先感谢..希望有人可以帮助我解决这种情况...

**这是我到目前为止所尝试的......并且只产生了 1 条 PersonPhoto 记录，显示在上面的预期输出 xml 中......我的目标是捕获每条出现动态的记录**

```
<xsl:variable name="Photos" select="photos"/>

<xsl:for-each select="$Photos"> 
  <PersonPhoto>                 
    <!--PersonPhotos.EventNumber-->
        <EventIdentification>
      <IdentificationID>
    <xsl:value-of select="EventNumber/string" />
      </IdentificationID>
        </EventIdentification>

    <EventDate>
        <!--PersonPhotos.EventDate-->
        <Date>
        <xsl:value-of select="EventDate/dateTime" />
        </Date>
    </EventDate>                    

    <PersonBirthDate>
        <!--PersonPhotos.BirthDate-->
        <Date>
        <xsl:value-of select="DOB/dateTime" />
        </Date>
    </PersonBirthDate>

</PersonPhoto> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:21:03.967

从外观上看，您的 for-each 对 photos 元素进行操作，其中只有一个。如果我理解正确，您希望它改为遍历 EventNumber、EventDate 和 DOB 的子项中的（本示例中为 6，下次可能是 ##）条目。尝试遍历照片/事件编号/字符串。`<xsl:value-of select="." />`每次迭代，获取变量 ($pos) 中的位置，然后分别用、`<xsl:value-of select="../../EventDate/dateTime[position() = $pos]" />`和替换出现的值`<xsl:value-of select="../../DOB/dateTime[position() = $pos]" />`。如果您有多个

# ios - 我怎样才能从另一个视图中解散Popover？

> ID：11904220
> 
> 赞同：0
> 
> 时间：2012-08-10T14:53:34.100
> 
> 标签：ios, uipopovercontroller, popover, dismiss

我有这样的问题：我有一个根视图，它有一个 UIPopoverController 和一个按钮，当我单击该按钮时，它会显示一个 tableView。我的应用程序显示正常，但现在当我单击任何行时，UIPopoverController 仍然显示，我希望它关闭。

有什么帮助吗？谢谢！

这是我的代码：

**视图控制器.h**

```
#import <UIKit/UIKit.h>
#import "UIPopoverIphone.h"
#import "TableViewController.h"

@interface ViewController : UIViewController <UIPopoverControllerDelegate, TableViewPopoverDelegate> {
    TableViewController *popoverView;
    IBOutlet UIButton *popButton;
    UIPopoverController *pop;
}

@property (strong, nonatomic) UIPopoverController *pop;

+(void)hidePop;
@end 
```

**视图控制器.m**

```
#import "ViewController.h"

@implementation ViewController
@synthesize pop;

-(void)dealloc {
    [pop release];
    [super dealloc];
}

-(IBAction)showPop {
    popoverView = [[TableViewController alloc] init];
    popoverView.delegate = self;
    pop = [[UIPopoverController alloc] initWithContentViewController:popoverView];
    [pop setPopoverContentSize:CGSizeMake(100, 200)];
    [pop setDelegate:self];
    [pop presentPopoverFromRect:popButton.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
}

-(void)hidePop {
    [pop dismissPopoverAnimated:YES];
}

....

@end 
```

**表视图控制器.h**

```
#import <UIKit/UIKit.h>

@protocol TableViewPopoverDelegate <NSObject>

-(void) dismissPopover;

@end

@interface TableViewController : UITableViewController <UITableViewDelegate, UITableViewDataSource> {
    NSMutableArray *itemsArray;
    UITableView *tableView;
    id<TableViewPopoverDelegate> delegate;
}

@property (nonatomic, retain) NSArray *itemsArray;
@property (nonatomic, retain) UITableView *tableView;
@property (nonatomic, assign) id<TableViewPopoverDelegate> delegate;

@end 
```

**表视图控制器.m**

```
#import "TableViewController.h"

@implementation TableViewController

@synthesize itemsArray;
@synthesize tableView;

-(void) dealloc {
    [itemsArray release];
    [tableView release];
    [super dealloc];
}

-(void)loadView {
    UIView *mainView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 200)];
    self.view = mainView;
    [mainView release];

    self.tableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 100, 200) style:UITableViewStylePlain];
    self.tableView.delegate   = self;
    self.tableView.dataSource = self;
    [self.view addSubview:self.tableView];
}

....

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     [detailViewController release];
     */
    NSLog(@"%@",[self.itemsArray objectAtIndex:indexPath.row]);
    [self.delegate dismissPopover];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:04:35.760

您的根视图`ViewController`似乎没有正确实现您的`TableViewPopoverDelegate`. 您已在该委托中声明了一个名为 的方法`dismissPopover`，但尚未在 ViewController.m 中实现它。

在 ViewController.m 中，将 hidePop 函数更改为：

```
-(void)dismissPopover {
    [pop dismissPopoverAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T16:27:49.500

在您当前的工作流程中，`ViewController`与`TableViewController`. 看起来您正在呈现`UITableViewController`来自而`UIPopoverIphone`不是来自`ViewController`. 所以委托回调方法`dismissPopover`需要在`UIPopoverIphone`类而不是`ViewController`类中实现。如果您仍想`UIPopoverIphone`从中解散`ViewController`，有两种选择：

1.  使用`NSNotificationCenter`：在 中`TableViewController`，您可以在准备好关闭弹出框时发布通知。然后在 中`ViewController`，您可以观察该通知并关闭弹出框。在这种情况下，不涉及任何委托。

2.  `UIPopoverIphone`从您的班级和班级设置委托回调`ViewController`。因此，当您点击弹出窗口中的按钮时，它会回调`ViewController`，然后您关闭弹出窗口并准备好`TableViewController`并呈现它。在这里你`TableViewController`和你`ViewController`有联系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T15:06:48.743

默认情况下，当检测到点击超出其范围时，弹出框会自行关闭。

# django - 为什么必须将 id 和 pk 都设置为 None 才能复制具有继承的 Django 模型？

> ID：11904221
> 
> 赞同：5
> 
> 时间：2012-08-10T14:53:37.157
> 
> 标签：django, django-models

Django 文档建议[复制模型实例](https://docs.djangoproject.com/en/1.4/topics/db/queries/#copying-model-instances)：

```
original.pk = None
original.save() 
```

但是如果你“使用继承”——显然意味着如果模型的类是子类的子类`models.Model`——你需要做的稍微不同。

具体来说，文档说：

> 由于继承的工作原理，您必须将 pk 和 id 都设置为 None：

并给出一个类似的例子：

```
original.pk = None
original.id = None
original.save() 
```

这看起来很笨拙。无论如何，我想了解发生了什么。为什么使用继承需要您将`id`字段设置为`None`也？`models.Model`在任何情况下，不是所有的 Django 模型都继承自吗？

（注意：我在文档中省略了有关复制 m2m 字段的内容，顺便说一下，这似乎更加笨拙。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T15:03:27.057

这是因为 MTI（Multiple Table Inheritance），即您在此处讨论的类型，将对象存储在多个表中。举个例子：

```
class Animal(models.Model):
    ...

class Dog(Animal):
    ... 
```

创建a`Dog`时，所有的字段`Animal`都保存到表中`Animal`，只有直接上的字段`Dog`保存到表中`Dog`。当您查找`Dog`后者时，Django 会查询这两个表并将它们拼接在一起。

然而，这两个表都需要主键，而 Django 使用`AutoField`s ，它们只是正整数字段。所以`Dog`有一个id，`Animal`也有一个id。用零件`pk`的 id 填充，`Animal`因为这是主要部分，而`Dog`id 无关紧要。但是，如果您要制作副本，则需要复制两个部分。否则，副本的`Animal`部分将不会得到它自己`Dog`的副本部分。

# html - # 在 URL 中被编码为 %23 并传递给服务器

> ID：11904226
> 
> 赞同：1
> 
> 时间：2012-08-10T14:53:57.100
> 
> 标签：html, internet-explorer, url, backbone.js, singlepage

我们的单页应用程序包含基于哈希的 URL（即#map）。

我的日志中出现了一些错误，类似于以下错误：

```
[MissingControllerException] Controller class %23mapController could not be found. 
```

似乎在某些情况下，哈希标签被编码而不是被视为特殊字符。

顺便说一句，通过源的 grep 表示导航到该特定位置的一次出现，

```
<a href="#map"> 
```

我无法重新创建触发此问题的场景。它只在极少数情况下发生。它已为 IE 7-9 记录。在其他浏览器中可能会出现此错误，但仅针对IE进行了记录。示例用户代理：

```
Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Trident/4.0; .NET4.0C; .NET4.0E; .NET CLR 2.0.50727; .NET CLR 3.0.04506.648; .NET CLR 3.5.21022; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; 360SE)
Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; InfoPath.3)
Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.0; Trident/5.0) 
```

有没有人知道可能会出现这种行为的场景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T00:16:10.893

也许这与您的客户端应用程序上的正确编码有关，例如 UTF-8 与 iso...。我在使用 Spring MVC 时遇到了这个问题，我的应用程序中的默认值是 utf，但在 apache 中它是 iso

# opengl - GLSL - 将贴花纹理放入带有颜色指示的基础纹理中

> ID：11904229
> 
> 赞同：0
> 
> 时间：2012-08-10T14:54:01.183
> 
> 标签：opengl, glsl, shader

我正在尝试编写简单的着色器在基础纹理（128 * 128）上放置一些“标记”（64 * 64），以指示标记必须在哪里，我在基础上使用青色标记大小（64 * 64）区域质地。
![基本图像](../Images/b6854d33aced9a4f99b67b9979e1bb6f.png)
![标记图像](../Images/9f2eb671008d213e269284ed46a39171.png)
变成
![期望的结果](../Images/dd3e910bbded004e8a511b97d67d4196.png)

片段着色器

```
precision lowp float;

uniform sampler2D us_base_tex;
uniform sampler2D us_mark_tex;

varying vec2 vv_base_tex;
varying vec2 vv_mark_tex;

const vec4 c_mark_col = vec4(0.0, 1.0, 1.0, 1.0);//CYAN

void main()
{
 vec4 base_col = texture2D(us_base_tex, vv_base_tex);

if(base_col == c_mark_col)
{
 vec4 mark_col = texture2D(us_mark_tex, vv_mark_tex);//texelFetch magic overhere must be
 base_col = mix(base_col, mark_col, mark_col.a);
}
 gl_FragColor = base_col;
} 
```

当然，它不能正常工作，我得到了这样的东西（透明仅用于演示，没有青色区域，只有一块“T”）：
![问题](../Images/d48dda3dd887ce76a284efafab1f31c5.png)

我试图弄清楚它，只有像 texelFetch 这样的东西会帮助我，但我不知道，如何获取基础纹理青色纹素的 tex 坐标并将其转换为 - 第一个 col/第一行 青色 base texel = first col/first行标记纹素，第二列/第一行基数 = 第二列/第一行标记。ETC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T19:59:27.487

我认为有一种方法可以一次性完成 - 但它涉及使用另一个能够保存下面提供的信息的纹理。因此，您将增加纹理内存使用量。

在这种方法中，第二个纹理（它可以通过离线或以某种方式对原始纹理进行后处理来生成）包含贴花的 UV 贴图

1.  R = 距青色方块左侧的归一化距离
2.  G = 到青色方块顶部的归一化距离
3.  B = 不在乎

现在像素着色器很简单，它需要做的就是查看当前纹理像素是否为青色，从“decal-uvmap”纹理中选择 R 和 G，并使用它们作为纹理坐标来对贴花纹理进行采样。

请注意，此纹理的位深度（及其大小）与原始纹理的大小有关，因此可以使用比原始纹理小得多的“decal-uvmap”纹理。

# tridion - 出站电子邮件发送的邮件问题

> ID：11904232
> 
> 赞同：2
> 
> 时间：2012-08-10T14:54:08.640
> 
> 标签：tridion, tridion-2011

我们通过出站电子邮件发送成千上万的邮件。我们有一份新闻稿，上面嵌入了四张图片。但是我们遇到了一个问题，这四个图像中的一个被嵌入到时事通讯中的所有地方，而当我们发送邮件时，其他图像应该出现在这些地方（我的意思是说所有地方都出现了相同的图像）。新闻通讯页面的预览在 CMS 中非常好。如果有的话建议解决方案。

我们通过出站电子邮件发送成千上万的邮件。我们有一份新闻稿，上面嵌入了四张图片。但是我们遇到了一个问题，这四个图像中的一个被嵌入到时事通讯中的所有地方，而当我们发送邮件时，其他图像应该出现在这些地方（我的意思是说所有地方都出现了相同的图像）。新闻通讯页面的预览在 CMS 中非常好。如果有的话建议解决方案。

这是我们在一个 DWT 中的代码：

```
<tr style="background:@@header_background_color@@ url(@@TrimSpacesFromString(website_url)@@/@@TrimSpacesFromString(header_background_image_url)@@) repeat-x left top;">
    <td style="width:98px; padding:4px 14px 7px">
        <a href="@@website_url@@">
            <img src="@@EmbedImage(logo)@@" width="98" height="98" border="0" alt="@@GetKeyValueForTitle('football_club','AC')@@"/>
        </a>
    </td>
    <td  style="width:453px; padding:0px 14px 7px 0; vertical-align:top;">
        another table with data
    </td>
</tr> 
```

第 2 载重吨代码

```
<tr>
    <!-- TemplateBeginRepeat name="list" -->        
    <td style="<!-- TemplateBeginIf cond="TemplateRepeatIndex<(listCount-1)" -->padding-right<!-- TemplateEndIf --><!-- TemplateBeginIf cond="TemplateRepeatIndex==(listCount-1)" -->padding-left<!-- TemplateEndIf -->:7px;">
        <table style="width:285px; padding:0 0 20px 0" cellspacing="0">         
            <tr>
            <!-- TemplateBeginIf cond="image" -->
                <td rowspan="2" style="padding:0px 5px 0 0px; width:127px; vertical-align:top;">                        
                    <!-- TemplateBeginIf cond="GetTextValueFromCompOrEmbedField(ID,'link', 'external_link','0')!=''" --> 
                        <!-- TemplateBeginIf cond="GetStatusForExternalUrl(GetTextValueFromCompOrEmbedField(ID,'link','external_link','0'))" -->                    
                            <a href="@@TrimSpacesFromString(GetTextValueFromCompOrEmbedField(ID,'link','external_link','0'))@@" 
                            style="color:@@header_link_color@@; text-decoration:none;" >
                                <!-- <img src="@@EmbedImage(image)@@" width="127" height="108" border="0" alt="players" /> -->                                  
                                <img src="@@EmbedImage(image)@@" width="127" height="108" border="0" alt="@@GetKeyValueForLabel('player','CM')@@" />
                            </a>
                        <!-- TemplateEndIf -->                          
                </td>
                <!-- TemplateEndIf -->                      
            </tr>

        </table>
    </td>
    <!-- TemplateEndRepeat -->      
</tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:58:43.750

在早期版本中存在一个缺陷，即在多线程或系统负载过重时发送邮件可能偶尔会导致嵌入图像或附件的图像 ID 是一串零而不是唯一 ID。

这已针对 2009 SP1 进行了修复，并且也合并到了 2011 SP1 中。

您使用的是早期版本，因此推荐的解决方案是升级到 SP1 HR1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T10:14:57.520

这是 Tridion 2011 中的一个问题。它已在 2011 SP1 中修复。每当发送大量电子邮件时，图像嵌入在 Tridion 2011 中就无法正常工作。

# c++ - 从 C++ 调用 JavaScript

> ID：11904243
> 
> 赞同：0
> 
> 时间：2012-08-10T14:54:50.580
> 
> 标签：c++, javascript

我有一个 JavaScript 类，我不想移植到 C++，因为它太大太复杂了。有什么方法可以从我的 C++ 代码中调用 JavaScript 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:57:13.013

您可以嵌入 JavaScript 引擎，例如[V8](http://en.wikipedia.org/wiki/V8_%28JavaScript_engine%29)。不过，这是一个非常（*非常*）大的开销。除非您有特定需求，否则最好只移植您的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T14:58:01.270

我建议您查看 Google 的 V8，Chrome 中使用的 C++ Javascript 引擎 [http://code.google.com/p/v8/](http://code.google.com/p/v8/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T14:56:54.480

您可以使用[V8](http://en.wikipedia.org/wiki/V8_%28JavaScript_engine%29)库从 C++ 调用 JavaScript 代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T15:08:41.503

除非您有*非常具体*的要求迫使您这样做，否则这将是一个非常糟糕的主意。它会产生可怕的开销（在执行速度和内存使用方面）。您应该认真考虑将 Javascript 代码移植到 C++。

# asp.net-mvc-3 - 在异步任务中登录 Elmah

> ID：11904246
> 
> 赞同：5
> 
> 时间：2012-08-10T14:54:57.137
> 
> 标签：asp.net-mvc-3, model-view-controller, logging, elmah

我需要一些 Elmah 登录在我的网络服务器上执行的异步任务。但是当我尝试记录错误时，它会因为 HttpContext 而失败。

```
 var httpContext = HttpContext.Current;

        Task.Factory.StartNew(() =>
        {
            HttpContext.Current = httpContext;

            try
            {
                //Execute some code
            }
            catch (Exception ex)
            {
                //Generate some error for the user and log the error in Elmah
                try
                {
                    ErrorLog.GetDefault(HttpContext.Current).Log(new Error(ex));
                }
                catch(Exception ex)
                {
                }
            }
        }); 
```

为了获得任务的进展，我实施了一些轮询机制。目前没有任何错误记录到 Elmah，这使得解决它们变得困难。

同样提供上下文作为参数也不起作用。

它不起作用。我收到一个 ArgumentException，告诉我预期值不在预期范围内。使用以下堆栈跟踪：

在 System.Web.Hosting.IIS7WorkerRequest.GetServerVariableInternal(String name) 在 System.Web.HttpRequest.AddServerVariableToCollection(String name) 在 System.Web.HttpRequest 的 System.Runtime.InteropServices.Marshal.ThrowExceptionForHRInternal(Int32 errorCode, IntPtr errorInfo)。 FillInServerVariablesCollection() 在 System.Web.HttpServerVarsCollection.Populate() 在 System.Web.HttpServerVarsCollection.Get(String name) 在 Elmah.ErrorLog.InferApplicationName(HttpContext context) 在 Elmah.ErrorLog.GetDefaultImpl(HttpContext context) 在 Elmah.ServiceContainer。 GetService(Type serviceType) at Elmah.ServiceCenter.GetService(Object context, Type serviceType) at Elmah.ErrorLog.GetDefault(HttpContext context) at Bis.Utilities.Log.ElmahErrorLog.TryLogError(Exception exeption) in D:\Users\A500535\Documents\Projecten\Biobank\Bis\src\Utilities\Log\ElmahErrorLog.cs：第 13 行

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T13:39:36.907

下面是一个可以完成工作的丑陋黑客。本质上，它`Error`在伪造`Exception`的（*原型*）上创建一个对象，以便可以在请求仍在进行中时捕获上下文。稍后，当由于请求失败而启动的任务时，会根据发生`Error`的实际异常创建另一个对象，然后有选择地从早期原型中复制有趣的上下文位。`Error`不幸的是，无论是否发生异常，都必须创建原型。

```
// Create an error that will capture the context
// and serve as a prototype in case a real exception
// needs logging

var prototype = new Error(new Exception(), context);

Task.Factory.StartNew(() =>
{
    try
    {
        // Execute some code
    }
    catch (Exception ex)
    {
        // Generate some error for the user and log the error in ELMAH
        try
        {
            // Create a new error without contextual information
            // but then copy over the interesting bits from the
            // prototype capture at time of request.

            var error = new Error(ex)
            {
                HostName = prototype.HostName,
                User = prototype.User,
            };
            error.ServerVariables.Add(prototype.ServerVariables);
            error.QueryString.Add(prototype.QueryString);
            error.Cookies.Add(prototype.Cookies);
            error.Form.Add(prototype.Form);
            ErrorLog.GetDefault(null).Log(error);
        }
        catch(Exception)
        {
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-08T08:54:06.327

当您启动一个新线程时，它不会获得 HttpContext 结构。由于 Elmah 日志记录需要 HttpContext 数据，因此它会失败。

请参阅以下 QA： [Elmah 不会在火灾中发送电子邮件而忘记情况](https://stackoverflow.com/questions/22237435/elmah-does-not-email-in-a-fire-and-forget-scenario)

对我来说，这在一个名为 Task.Run 的异步任务中工作：

```
Elmah.ErrorLog.GetDefault(null).Log(new Elmah.Error(new NotSupportedException("elmah logging test"))); 
```

# c - 结构成员的 PREfast 注释

> ID：11904247
> 
> 赞同：2
> 
> 时间：2012-08-10T14:55:01.033
> 
> 标签：c, prefast

在我公司的代码中，我们有通用的 get() 和 set() 方法用于某些组件之间的互操作。但是，如果我尝试运行 PREfast，我会被警告淹没，因为 PREfast 没有意识到 get() 方法初始化了给定的参数。

问题是，由于这些方法非常通用，它们不简单地接受一个参数（我可以用`_Out_`或类似的标记，而是一个结构数组，其中包含应该返回哪些数据的数据。

在代码中（大大简化）：

```
typedef struct
{
    int type;
    int* data;
} ARGS;

void get(int count, ARGS* args)
{
    for (int i = 0; i < count; i++)
        *(args[i].data) = 42; // Actually handled by internal methods
}

// Sample Usage
void foo()
{
    int value;
    ARGS args[1];

    args[0].type = 1234;
    args[0].data = &value;

    get(1, args);

    // Do something with value
    // PREfast complains that value is uninitialized (error C6001)
    printf("%d", value);
} 
```

有什么方法可以对此进行注释，以便 PREfast 知道它`args.data`是由 初始化的`get()`吗？还是这对于 PREfast 来说太复杂了？

编辑：如果我使用`get(1, &args)`，那么警告就会消失。所以PREfast中有一些启发式可以处理这种情况，但我还没有发现是否可以从外部触发它：

```
void get2(int count, ARGS(* args)[1]) // Needs the size of args, or it won't compile below
{
    for (int i = 0; i < count; i++)
        *(*args)[i].data = 42; // Actually handled by internal methods
}

// Sample Usage
void foo2()
{
    int value;
    ARGS args[1];

    args[0].type = 1234;
    args[0].data = &value;

    get2(1, &args);

    // Do something with value
    printf("%d", value);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:36:01.087

This should fix the warning.

```
void foo()
{
   int value=0;
  ...
} 
```

Note that `get()` will be called in runtime only. Since, PREfast is a static analysis tool, it might report that the value is uninitialized. Nevertheless, initializing a variable before use is always a best practice in C.

Another way would be to use the PREfast `suppress` as below:

```
void foo()
{
    int value;
    ARGS args[1];

    args[0].type = 1234;
    args[0].data = &value;

    get(1, args);

    // Do something with value
    // PREfast complains that value is uninitialized (error C6001)
    #pragma prefast(suppress:C6001 , "PREfast noise: the variable value will be initialized by get method in a line above")
    printf("%d", value);
} 
```

It suppresses the warnings in the next line after the suppress statement.

Also, do add the following code in you header files(or source files) just before using the `pragma prefast` in your code:

```
#ifndef _PREFAST_
#pragma warning(disable:4068)
#endif 
```

to avoid 4068 warning to be flagged. NOTE: pragma prefast is an extension to the PREfast AST compiler only and may not be supported by other compilers.

# c# - c#.net Regex - 需要找到一个字符序列，然后替换其中的一个字符

> ID：11904253
> 
> 赞同：2
> 
> 时间：2012-08-10T14:55:45.160
> 
> 标签：c#, regex

我正在尝试构建一个正则表达式，它可以查找包含撇号（O'Connor，O'Neil）的名称并将撇号替换为 2 个撇号（O''Connor，O''Neil）。

我不想对相关字符串中的所有撇号执行此操作，而只是出现在两个字母（大写或小写）之间的撇号。现在，我可以毫不费力地找到 LETTER-APOSTROPHE-LETTER 的实例，但我不确定如何采用该序列`'`并将`''`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T15:07:14.170

您说这是用于将值插入数据库。不要这样做 - 改用参数化查询，这将正确处理转义。 [乔恩斯基特这么说](https://stackoverflow.com/a/2020393/106302)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:00:59.493

```
new Regex("([a-zA-Z])'([a-zA-Z])").Replace(input, match => match.Groups[1] + "''" + match.Groups[2]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T15:03:24.170

```
string result = Regex.Replace(input, @"(?<=[^'])(')(?=[^'])", "''"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T14:58:24.610

这会起作用，我刚刚测试过：

```
Regex.Replace("(\w)'(\w)","$1''$2"); 
```

(O'Connor, O'Neil) 变成 (O''Connor, O''Neil)

# jquery - Phonegap 1.7.0 ajax 超时不起作用

> ID：11904254
> 
> 赞同：3
> 
> 时间：2012-08-10T14:55:45.783
> 
> 标签：jquery, ajax, cordova, timeout

我正在开发phonegap/cordova 1.7.0。我正在向服务器发送 ajax 请求。我需要设置一个超时来模拟它我在服务器端包含了一个 sleep(30)，在客户端包含了我的 js，我的时间超过了 30000。

经过测试，我得出的结论是，Android 完全忽略了检查超时，而 iOS 完全无法进行 ajax 调用，但没有给出任何错误。

有人可以帮我弄这个吗？是不是 ajax 超时在 phonegap 下不起作用，有没有另一种方法来检查 phonegap 超时？这是js代码：

```
 $.ajax({
        url: url,
        data: data,
        type: 'GET',
        dataType: data_type,
        timeout:3000,

        error: function(xhr, status, error){
            $('body').trigger('network-error') // triggers standard network error
                console.log('network-error')
                console.log('request came back with the error '+error)
                CallbackFail()
        },
        success: function(data){
            // is called from aSuccessCallback in the return
            console.log('success')
            console.log(data)

        }
    }) 
```

**编辑**

我忘了提一个重点，我不是直接使用jquery，而是使用zepto。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T19:15:35.467

首先，让自己轻松一点。安装 weinre [http://people.apache.org/~pmuellr/weinre/](http://people.apache.org/~pmuellr/weinre/)，帮助你实时追踪ajax请求；这样您就可以看到来自服务器的确切 http 响应（如果有）。基本上它具有与谷歌开发者工具相同的界面。您将转到“网络”选项卡来跟踪您的 ajax 请求。

一般来说，在进行 ajax 调用时需要考虑几个重要的注意事项：

1.  确保将您发送 ajax 请求的服务器列入白名单，否则您将无法向其发送任何 ajax 请求。（这里是如何做到这一点： http: [//docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html](http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html)）

2.  如果您通过 https 发送 ajax 请求，请确保您的服务器具有有效的证书；否则它将不起作用，除非您手动忽略 phonegap 中的无效证书。iOS/android 需要不同的步骤 - 如果是这种情况，我可以为您指出正确的 stackoverflow 链接。

最后，只是想让你知道我在我的 phonegap 项目中发送 ajax 请求没有任何问题。超时按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:28:05.247

我去了 zepto 的 github，似乎 ajax 超时一直是一个问题：

[https://github.com/madrobby/zepto/issues/search?q=ajax+timeout](https://github.com/madrobby/zepto/issues/search?q=ajax+timeout)

很少有人说这是否已经或正在被倾向于或不被倾向于。如果有人和我使用同一个库，直接使用 jquery 可能是个好主意......

# php - 构造函数返回值？

> ID：11904255
> 
> 赞同：33
> 
> 时间：2012-08-10T14:55:55.950
> 
> 标签：php, constructor, return

查看以下代码，我看到构造函数正在返回一个值。我认为构造函数只返回对象。有人能告诉我我错过了什么吗？

```
public function __construct($username = null, $password = null){
        $urlLogin = "{$this->apiHost}/login/$username";

        $postData = sprintf("api_type=json&user=%s&passwd=%s",
                            $username,
                            $password);
        $response = $this->runCurl($urlLogin, $postData);

        if (count($response->json->errors) > 0){
            return "login error";    
        } else {
            $this->modHash = $response->json->data->modhash;   
            $this->session = $response->json->data->cookie;
            return $this->modHash;
        }
    } 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-08-10T14:58:17.903

确实你是对的。构造函数的返回值不能做任何事情（除了使用它创建的对象）。

所以不，你没有错过任何东西，是编写该代码的开发人员。

如果直接调用函数，从技术上讲可以使用构造函数的返回值

```
$obj->__construct(); 
```

这将允许您使用构造函数的返回值。然而，这是非常不常见的，并且相当不推荐。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-01-13T19:30:34.387

你可以对构造函数的返回值做任何你想做的事情，所以“对构造函数的返回值无能为力（除了使用它创建的对象）”是不正确的。构造函数的返回值不是“它”创建的对象。构造函数不创建对象（`new`关键字创建）。构造函数的返回值与任何其他函数的返回值相同：无论您选择返回什么。此外，一个对象必须存在才能调用其构造函数也是错误的。这是完全有效的：

```
$parent_constructor_return_value = parent::__construct(); 
```

例如：

```
abstract class MyBase {
    function __construct () {
        return "Hello, world.";
    }
}
class MyDerived extends MyBase {
    function __construct () {
        echo parent::__construct();
    }
}
new MyDerived(); // prints "Hello, world." 
```

虽然这是可能的，但我无法想象一个最佳实践的场景。毕竟，你总是可以调用一个方法`parent::__construct()`来获取你的价值，而你失去的只是默默无闻。我想它可以用作错误处理的一种方式——还有其他两种方法可以完成同样的事情：

1.  在父构造函数中抛出异常并在派生构造函数中捕获它们。
2.  在父构造函数中设置指示发生错误的属性，然后在派生构造函数中检查这些属性的状态。

如果父构造函数中的错误不是异常的，他可能已经决定让父构造函数返回错误值，而不是将瞬态错误信息存储为对象属性。当然，命名父类方法的唯一原因`__construct`是父类不是抽象的，但它本身可以被实例化——但在这种情况下，返回的错误消息永远不会被看到。所以，不好的模式；坏的。构造函数不打算返回值，这意味着您正在通过利用这种机制打开一个蠕虫的架构罐。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-10T15:01:08.023

请参阅此页面：[在类的构造函数中返回值](https://stackoverflow.com/questions/6849572/returning-a-value-in-constructor-function-of-a-class-php)

**阅读：-**

构造函数没有返回值；它们完全用于实例化类。

如果不重组您已经在做的事情，您可以考虑在此处使用异常。

```
public function __construct ($identifier = NULL)
{
  $this->emailAddress = $identifier;
  $this->loadUser();
}

private function loadUser ()
{
    // try to load the user
    if (/* not able to load user */) {
        throw new Exception('Unable to load user using identifier: ' . $this->identifier);
    }
} 
```

现在，您可以以这种方式创建一个新用户。

```
try {
    $user = new User('user@example.com');
} catch (Exception $e) {
    // unable to create the user using that id, handle the exception
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-10T14:58:33.310

构造函数不返回任何内容，但您可以从中返回（由于某种原因在某个点停止方法执行，但可以创建对象）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-10T15:25:28.240

与其他语言不同，在 PHP 中您可以显式调用构造函数。这只是另一个功能。看起来原作者首先决定将一些可能失败的代码放在构造函数中，然后意识到他需要一种方法来在失败后重新运行初始化。

```
$result = $user->__construct($username, $password) 
```

实际上会起作用，并且您确实会获得返回值。显然，这是一种丑陋的做事方式。

在我看来，在构造函数中包含触发副作用的代码并不是一个好习惯。我会将代码放在一个单独的函数中，其名称清楚地说明了它的作用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-14T05:59:22.420

如果您总是期望一个字符串作为返回值，您可以添加该方法`__toString()`，然后如果您尝试打印该类，它将返回您放置在那里的内容，只有字符串，我可以看到这是您的情况，所以我相信那应该对你有用..

```
public function __construct($username = null, $password = null){
    $urlLogin = "{$this->apiHost}/login/$username";

    $postData = sprintf("api_type=json&user=%s&passwd=%s",
                        $username,
                        $password);
    $response = $this->runCurl($urlLogin, $postData);

    if (count($response->json->errors) > 0){
        return "login error";    
    } else {
        $this->modHash = $response->json->data->modhash;   
        $this->session = $response->json->data->cookie;
        return $this->modHash;
    }
}

public function __toString(){
     return $this->modeHash;   
}

...
echo yourClass($username, $password); // will return yourClass->modeHash; 
```

# iphone - 延长 iOS 应用暂停时间

> ID：11904261
> 
> 赞同：0
> 
> 时间：2012-08-10T14:56:17.047
> 
> 标签：iphone, ios, xcode, suspend

当我按下主页按钮时，我的应用程序被正确挂起，但它只持续了几分钟。如果我离开它一会儿并返回它，应用程序就会重新启动。

我没有在我的应用程序中运行任何后台任务，其他应用程序的暂停时间比我的要长得多。

这可能是什么潜在原因？我是否有可能在后台运行我不知道的操作，并且当内存不足时 iOS 正在杀死我的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T17:33:36.120

使用最多内存的应用程序首先在后台终止。因此，可能的原因是您的应用程序消耗的内存比您想象的要多。我首先要确保您的内存得到正确管理。

[Apple - 应用程序状态和多任务处理](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

# matplotlib - 动画情节更新

> ID：11904266
> 
> 赞同：1
> 
> 时间：2012-08-10T14:56:36.000
> 
> 标签：matplotlib

我正在尝试找到正弦曲线的最大值并将其显示在子图中。并尝试像动画一样更新它。但是最大值的子图给出了所有零值。当我打印数组时，它不是零。我认为它没有更新 y 值。我无法弄清楚原因。任何帮助将不胜感激。

我将把我的代码放在可执行文件中：

```
from pylab import *
import time

ion()
fs = 1e6
Ts = 1/fs
SNR=10
sinfreq=2*pi*1e5
pack= 512
t = Ts*arange(0,pack)
f = fs*(arange(0,pack)-pack/2)/pack
max_y = zeros (len(t))
y=sin(sinfreq*t)        
y=y+randn(size(y))/sqrt(10^(SNR/10)*2) 
subplot(211)       
line1, = plot(y)

subplot(212)
line2, = plot(max_y)
for i1 in arange(1,1000):  
    y=sin(sinfreq*t)
    y=y+randn(size(y))/sqrt(10^(SNR/10)*2)

    line1.set_ydata(y)  

    mk=0
    for mk in range(0,len(y)):
        if y[mk] > max_y[mk]:
            max_y[mk] = y[mk]
    print max_y
    line2.set_ydata(max_y) 
    draw()                        
    waitforbuttonpress(timeout=0.5) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:06:20.337

您忘记了第二个 for 循环中的缩进。那实际上应该给您一个 IndentationError，所以我不明白您如何说该程序是可执行的（实际上，我编辑了您的条目以删除剩余的“在此处输入代码”语句；如果您已检查并复制-粘贴您的条目，您可能会发现两个错误）。

但是，你确定你不想简单地

```
max_y[:] = max(y) 
```

而不是那个for循环？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T07:02:12.227

好的，我偶然找到了解决方案，我不知道原因，但我首先更新我的 max_y 绘图任何其他值，然后进行真正的更新，然后绘图显示我的更改。除此之外，它没有显示。我尝试使用不同的 for 循环，他们正在绘制一次更新，但对于我的循环，它想要更新两次。

我还添加了 set_ylim 以更好地查看限制。我把星星放在我改变的地方。我也在放新代码。我希望它能帮助有同样问题的人。

```
from pylab import *
import time

ion()
fs = 1e6
Ts = 1/fs
SNR=10
sinfreq=2*pi*1e5
pack= 512
t = Ts*arange(0,pack)
f = fs*(arange(0,pack)-pack/2)/pack
max_y = zeros (len(t))
y=sin(sinfreq*t)        
y=y+randn(size(y))/sqrt(10^(SNR/10)*2) 
subplot(211)      
line1, = plot(y)

sub2=subplot(212) #****
line2, = plot(max_y)
for i1 in arange(1,1000):  
    y=sin(sinfreq*t)
    y=y+randn(size(y))/sqrt(10^(SNR/10)*2)

    line1.set_ydata(y)  

    mk=0
    for mk in range(0,len(y)):
        if y[mk] > max_y[mk]:
            max_y[mk] = y[mk]
    #print max_y
    line2.set_ydata(zeros(len(max_y)))#****     
    line2.set_ydata(max_y) 
    sub2.set_ylim(min(max_y),max(max_y)) #****
    draw()                        
    waitforbuttonpress(timeout=0.5) 
```

# javascript - jquery ui 的用途是什么？为什么不使用 jquery 呢？

> ID：11904273
> 
> 赞同：0
> 
> 时间：2012-08-10T14:57:20.507
> 
> 标签：javascript, jquery

jquery ui 的用途是什么？为什么不使用 jquery 呢？

我已经在他们的官方网站上阅读了有关 Jquery ui 的信息，但是，我仍然对它可以为我做什么以及我是否应该学习它感到困惑？我是一个有抱负的网站设计师。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T14:59:17.697

`jQueryUI`带有许多组件，例如滑块、手风琴和小部件，而`jQuery`. `jQuery`它本身只是一个 Javascript 抽象，允许您为客户端编写敏捷代码。`jQuery`也是 的依赖项`jQueryUI`，因此您将需要它才能使用后一个库。

它的可行性类似于`Twitter Bootstrap`。

这里有一些演示供您查看以展示差异：http: [//jqueryui.com/demos/](http://jqueryui.com/demos/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T14:59:42.047

你不要用一个来代替另一个。

jQuery UI 依赖于 jQuery。jQuery UI 提供了可以在您的网站上使用的小部件和效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T14:59:49.180

JQuery UI 不会取代 JQuery，它是它的扩展并且依赖于它。它提供了一些小部件，例如进度条或日期选择器。

# iphone - 当应用程序未处于活动状态时，如何通过单击“查看”按钮来处理 APNS 消息？

> ID：11904274
> 
> 赞同：1
> 
> 时间：2012-08-10T14:57:36.933
> 
> 标签：iphone, ios, apple-push-notifications

我是在 iPhone 应用程序中使用 APNS 的新手。我在所有场景中都使用并收到了该消息。当`user clicks the "View" button from the APNS alert i should do the actions in the app and navigate the user to 3rd tab`.

但是当应用程序处于**In Active (The app not in use) 时** `i can't trigger the actions in the app`。我在“didFinishLaunch”中使用了以下代码，但未使用。

```
 NSString *params=[[launchOptions objectForKey:@"UIApplicationLaunchOptionsRemoteNotificationKey"] objectForKey:@"aps"];
    NSDictionary *remoteNotif = [launchOptions objectForKey: UIApplicationLaunchOptionsRemoteNotificationKey];
    NSLog(@"remoteNotif : %@", remoteNotif);
    if ([params length] > 0 ) 
    {
        UIAlertView *messageReceivedAlert = [[UIAlertView alloc] initWithTitle:@"My APP" message:@"New Message Recevied From APNS in IN-Active Stage" delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
        [messageReceivedAlert show];
        [messageReceivedAlert release];
    } 
```

它总是返回 (null)。

谁能帮我做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:08:54.607

用这个 ：

`- (void) application:(UIApplication*)application didReceiveRemoteNotification:(NSDictionary*)userInfo`

您可以使用以下方法检查非活动状态

```
if([UIApplication sharedApplication].applicationState == UIApplicationStateInactive) 
```

# account - 如何验证用户帐户的内容？

> ID：11904276
> 
> 赞同：0
> 
> 时间：2012-08-10T14:57:39.947
> 
> 标签：account

我们想建立一个网站作为本地和非本地 K-12 学生之间的交流平台。例如，非母语学生可以向母语学生提问，母语学生可以回答。另一个例子是，我们希望本土学生可以写博客或上传图片和视频，让人们了解部落正在发生的事情。

我们被困在设计一个可以工作的网站上。我们必须确保来自本土学生的文本和多媒体确实来自本土学生。我们认为学生需要在网站上拥有帐户。问题是如何确保本地学生帐户确实是本地学生帐户。非本地学生帐户也是如此。现在无论验证方法是什么，我们都需要确保该方法是可扩展的，因为那里有很多本地和非本地学生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:01:16.060

我对此的唯一想法是您在注册时需要政府身份验证服务。除此之外，您可以要求提供 zip 或地址并据此进行验证，但这并不可靠。

# haskell - 找不到模块“Date.Time.Calendar”

> ID：11904280
> 
> 赞同：1
> 
> 时间：2012-08-10T14:57:59.870
> 
> 标签：haskell, cabal

即使安装了时间包，我的 ghci 也找不到日历模块。

```
$ ghc-pkg list | grep time
old-time-1.0.0.6
time-1.2.0.3
time-1.4.0.1 
```

我试图删除旧的，但这破坏了很多其他的包。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T17:40:53.363

假设您的问题措辞正确：模块被调用`Data.Time.Calendar`而不是`Date.Time.Calendar`.

# javascript - 在 Javascript 中使用对象

> ID：11904286
> 
> 赞同：0
> 
> 时间：2012-08-10T14:58:17.747
> 
> 标签：javascript

我一直在 codecademy 中研究 Javascript，并且对其中一个问题有疑问。

问题：

写两个函数：

```
one creates an object from arguments
the other modifies that object 
```

我的答案：

```
//First, the object creator
function makeGamePlayer(name,totalScore,gamesPlayed) {
    //should return an object with three keys:
    // name
    // totalScore
    // gamesPlayed
    var myObject = {
     "name": name,
     "totalscore" : totalscore,
     "gamesPlayed" : gamesPlayed
    };
  return myObject;
}

//Now the object modifier
function addGameToPlayer(player,score) {
    //should increment gamesPlayed by one
    //and add score to totalScore
    //of the gamePlayer object passed in as player
    var score = player[totalscore];
    score =score+1;
    player[totalscore] = score;
} 
```

不知道我的错误在哪里。需要一些有关改进此解决方案的指导。非常感谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T15:01:30.473

在您的对象中，您永远不会分配分数

```
"totalscore" : totalscore, 
```

应该

```
"totalscore" : totalScore 
```

既然你进来了`totalScore`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T15:03:03.643

您也没有正确访问该对象

```
var score = player.totalscore; 
```

或者

```
var score = player["totalscore"]; 
```

它需要一个字符串，但您传递的是一个未定义的变量。

您还在`score`函数中定义了两次，为内部变量使用不同的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T15:03:14.823

参数 to`makeGamePlayer`已命名`totalScore`，但您使用`totalscore`的`myObject`是不同的名称 - 大小写很重要。

`addGameToPlayer`您在尝试使用名为`totalscore`但未定义的变量时也遇到问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T15:13:57.343

除了错字和您的代码相当愚蠢和毫无意义的 IMO（对不起，谷歌 Douglas Crockford JavaScript Object 或其他东西并*阅读*什么是 powerconstructor）之外，我认为您想检查是否所有参数都传递给函数。如果是这样的话：

```
function foo (bar, foobar)
{
    if (arguments.length < 2)
    {
        throw new Error('foo expects 2 arguments, only '+arguments.length+' were specified');
    }
    //or - default values:
    bar = bar || 'defaultBar';
    //check the type?
    if (typeof bar !== 'string' || typeof foobar !== 'number')
    {
        throw new Error ('types don\'t match expected types');
    }
} 
```

等等......但是，请阅读并在提问时更加具体

# operating-system - 没有操作系统的嵌入式 Web 服务器中的任务调度

> ID：11904288
> 
> 赞同：0
> 
> 时间：2012-08-10T14:58:20.987
> 
> 标签：operating-system, embedded, scheduled-tasks, scheduler, interrupt

我正在嵌入式 Web 服务器上做项目。嵌入式服务器没有操作系统。在这种情况下，如何在这样的系统中安排多个任务？

循环执行和超级循环是一样的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T22:08:32.190

循环执行

有或没有中断

# c# - 使用 C# 使用 WebDriver 检查 gmail 登录

> ID：11904291
> 
> 赞同：0
> 
> 时间：2012-08-10T14:58:28.180
> 
> 标签：c#, selenium, gmail, webdriver

我正在使用带有 C# 的 WebDriver 来自动测试 gmail。我填写表格，然后单击按钮进入。如何验证登录成功或失败？

```
[FindsBy(How = How.Id, Using = "Email")]
public IWebElement username;

[FindsBy(How = How.Id, Using = "Passwd")]
public IWebElement password;

[FindsBy(How = How.Id, Using = "signIn")]
public IWebElement loginButton;

public LoginForm()
{
    PageFactory.InitElements(Driver.driver, this);
}

public GmailPage Login(String username, String password)
{
    this.username.SendKeys(username);
    this.password.SendKeys(password);
    this.loginButton.Click();
    GmailPage result = new GmailPage();
    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:29:46.237

我会使用 Nunit，因为您使用 C# 并通过那里查看断言文档： [NUNIT](http://www.nunit.org/index.php?p=assertions&r=2.6)

我会断言登录成功后页面上显示的独特内容，或者断言您没有看到 gmail 要求重新输入凭据。

```
Assert.IsTrue( true, "your name here" ); 
```

或者`Assert.False( false, "The username or password you entered is incorrect" );`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:56:38.303

当用户名或密码错误时，在gmail中单击登录按钮后会显示一条消息。因此，您可以验证文本显示为：

```
assertTrue(driver.getPageSource().contains("The username or password you entered is incorrect."), "Username or password is not correct"); 
```

如果您能够成功登录，则可以进行断言：

```
assertFalse(driver.getPageSource().contains("The username or password you entered is incorrect."), "some message"); 
```

上面的例子是基于使用 TestNG 作为框架的 WebDriver (Selenium 2)。assertTrue 包含 2 个参数：i) 布尔值 ii) 消息。您可以使用 NUnit 考虑相同的概念。

上述代码类似于 Selenium RC 的 isTextPresent()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-01T18:08:12.613

试试下面的代码，它对我有用，我通过使用 chrome 检查字段得到它，因此右键单击该字段并复制 XPath 字段并在 selenium 中使用它们

```
driver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(20)); 
driver.FindElement(By.XPath("//div[@class='sign-in-dialog-provider']")).Click(); 
driver.FindElement(By.Id("identifierId")).SendKeys("YOUR Email\n");

Thread.Sleep(10);

driver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(20));

Actions builder = new Actions(driver);

builder.MoveToElement(driver.FindElement(By.XPath("//*[@id='password']/div[1]/div/div[1]/input"))).Build().Perform();

var wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));

IWebElement checkOut = wait.Until(ExpectedConditions.ElementToBeClickable(By.XPath("//*[@id='password']/div[1]/div/div[1]/input")));

checkOut.SendKeys("Your Password");

driver.FindElement(By.XPath("//*[@id='passwordNext']/content")).Click(); 
```

# php - setFlash 中的消息为空

> ID：11904295
> 
> 赞同：1
> 
> 时间：2012-08-10T14:58:31.537
> 
> 标签：php, cakephp, cakephp-2.1

我有此代码，但 Flash 消息显示不正确。

我想在以下位置显示消息：

```
http://xxx/cake/ ----(add action) 
```

但实际上消息显示在：

```
http://xxx/cake/users/ ----(index action) 
```

我该如何解决这个问题？我对激活没有任何看法。我只想重定向到添加操作并在此之后显示 Flash 消息。

* * *

```
class UsersController extends AppController {

    public function index() {
        $this->User->recursive = 0;
        $this->set('users', $this->paginate());
    }

    public function add() {

    }

    public function activation() {
        $email = $this->request->query['email'];
        $codeLink = $this->request->query['code'];

        if($this->User->activationAccount($email, $codeLink)) {
            $this->Session->setFlash(__('Success'));///should be shown in add
            $this->redirect(array('action' => 'add'));
        }
        else {
            $this->Session->setFlash(__('Error.'));//should be shown in add
            $this->redirect(array('action' => 'add'));
        }
    }
} 
```

路由.php

```
Router::connect('/', array('controller' => 'users', 'action' => 'add')); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:55:16.533

只需销毁此会话：

```
array
  'fb_400xxxxxxx96_state' => string 'ce3xxasdxxxxxxasdasdxxxxxxxf' (length=32) 
```

* * *

```
 public function add() {
        $this->Session->destroy();

        //some code

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T17:04:06.213

也许你应该看看这个涵盖这个的[tuto](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html)

# java - JAVA中的混合表数据结构

> ID：11904297
> 
> 赞同：1
> 
> 时间：2012-08-10T14:58:35.747
> 
> 标签：java

在 C# 世界中，我们设计了一个看起来像向量的智能表结构，但它实现了智能缓存。让我们以下表为例

```
Symbol Bid Ask Volume
AAPL   600 601 19292
MSFT   30  31  93939 
```

上面的表结构中有 4 个字段，用户可以使用标准的阅读器表示法访问列和行，例如 Table.AAPL[0]、Table.Bid[0]、Table.count 等。

我们所做的是实现了一个智能缓存策略，假设如果数据库中有 1000 万行，则该表仅用于在内存中加载 1000 行，但是当用户访问 1001 个元素时，我们使用从内存中交换当前行并获取数据库中的下 1000 行并将其缓存。我们的目标是在任何时候只缓存 1000 行，但给用户一种数组导航技术的体验。

在我开始移植我的 C# 代码之前，我想知道是否有任何开源框架允许我使用这些功能。

# android - 动画绘制的图像

> ID：11904298
> 
> 赞同：-1
> 
> 时间：2012-08-10T14:58:41.363
> 
> 标签：android, animation, canvas

我有一些问题。我有一张使用画布绘制的图像，我想为它制作动画。我想做类似的事情`TranslateAnimation`，但`TranslateAnimation`只适用于视图，我的图像不是视图。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T10:03:28.197

就我个人而言，我没有使用过 Android 画布，但我相当确定你需要做的是：

1.  在画布上画出你的形状
2.  等待几毫秒
3.  清除画布
4.  将形状重绘到下一个直接位置

并重复此操作，直到到达最终位置。

据我所知，画布更像是一张纸，而不是 Flash 动画。您需要绘制、清除、重新计算、重绘。我强烈建议阅读更多关于该主题的内容。首先，我将从 android canvas 参考开始：http: [//developer.android.com/reference/android/graphics/Canvas.html](http://developer.android.com/reference/android/graphics/Canvas.html)

然后尝试一些教程，如适用于 android 的画布逐帧教程：http: [//developingthedream.blogspot.ro/2011/01/android-canvas-frame-by-frame-animation.html](http://developingthedream.blogspot.ro/2011/01/android-canvas-frame-by-frame-animation.html)

而且我强烈建议先在谷歌上查找内容，然后再在堆栈上发布问题。有很好的机会，特别是如果您是初学者，可以找到包含您需要的一切以及更多内容的现有教程。祝学习顺利。

# java - Java中的心跳机制

> ID：11904299
> 
> 赞同：4
> 
> 时间：2012-08-10T14:58:45.260
> 
> 标签：java, heartbeat

你知道是否有设计良好的（基于状态机的）心跳机制用 Java 作为开源项目编写？实际上，基于状态的对我来说不是强制性的。我只是假设这种设计涵盖了各种故障转移案例。

谷歌搜索后，我找到了 Java DMK。您的回答将有助于我避免测试所有此类项目以找到更好的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:22:57.890

我可以将您指向[JGroups](http://jgroups.org)项目。它具有分散的系统，具有开箱即用的集群状态和听到的功能。

还有著名的[ZooKeeper](http://zookeeper.apache.org)项目，它也有你的一些需求。

希望能帮助到你。

# ruby-on-rails - Rails Select 与嵌套形式的模型关联

> ID：11904300
> 
> 赞同：-1
> 
> 时间：2012-08-10T14:58:52.130
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我如何将项目与关联关联起来。这里是一个例子，这里是模型

```
-Customer
-Phone
-PhoneType

Customer          Phone             PhoneType
Id                Id                Id
First             Number            Description
Last              Phone_Type_Id
Email             isViewed
Password
... 
```

他的关系如下

```
Customer
  has_many phone
  accepts_nested_attributes_for :phone, allow_destroy: :true
Phone
  belongs_to :customer
  has_one :phone_type
  accepts_nested_attributes_for :phone, allow_destroy: :true
PhoneType
  belongs_to :phone 
```

我的表单视图在 Customer#edit 视图中遵循的工作方式我呈现了一个由其他字段组成的通用表单，在其中我有以下代码

```
<%= f.fields_for :phones do |b| %>
<fieldset>
    <%= b.label :number %>
    <%= b.select :PhoneType %>  ## issues is here
    <%= b.label :isViewed %>
</fieldset>
<% end %> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:09:08.193

尝试

```
:phone_type 
```

而不是在表单中使用驼峰式（PhoneType）。您在电话模型中的关联需要一个名为 :phone_type 的字段，因此您需要解决此问题。

此外，您现在的视图中呈现的是什么？你有任何错误吗？

所以你想让用户通过从下拉列表中选择描述来选择电话类型吗？你可以尝试类似的东西

```
<%= select(:phone_type, :phone_type_id, PhoneType.all, :id, :description) %> 
```

最后，您可能想看看简单的表单 gem.... [https://github.com/plataformatec/simple_form/](https://github.com/plataformatec/simple_form/)

# jquery - 同位素网格+角戳去除空格，排序逻辑

> ID：11904302
> 
> 赞同：0
> 
> 时间：2012-08-10T14:59:01.750
> 
> 标签：jquery, jquery-isotope

这个问题与这个较旧的问题有关：[Isotope Grid layout use empty space](https://stackoverflow.com/questions/11612399/isotope-grid-layout-use-empty-space)

这是我正在使用的小提琴：http: [//jsfiddle.net/zewkG/4/](http://jsfiddle.net/zewkG/4/)

问题是，一旦添加了砖石cornerstamp [由同位素的创建者编码]，在上一个问题的答案中起作用的排序逻辑就会失败。我一直在试图弄清楚这背后的逻辑，但不幸的是无济于事，浪费了很多时间而没有突破。[点击第五个元素时不应该有任何缺失的框，也不应该往下走两行，只有一个。前三个元素应该占据第一行而不是下降一行。]

上面的小提琴包含上一个问题的排序逻辑，只添加了第四列和一个角戳。

希望我能得到任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:52:04.647

见[http://jsfiddle.net/zewkG/6/](http://jsfiddle.net/zewkG/6/)，我希望我能很好地理解你想要什么

**编辑**：

如果您想要 21 个盒子，请参阅[http://jsfiddle.net/zewkG/8/](http://jsfiddle.net/zewkG/8/)

**编辑 2**：

[http://jsfiddle.net/zewkG/8/](http://jsfiddle.net/zewkG/8/)有一个错误：框号 13,17,21（在行尾），单击时，它们会转到下一行而不是行首。[在http://jsfiddle.net/zewkG/9](http://jsfiddle.net/zewkG/9/) ​​/ 中修复

# c++ - C ++中奇怪的多重赋值错误

> ID：11904307
> 
> 赞同：2
> 
> 时间：2012-08-10T14:59:19.573
> 
> 标签：c++, variable-assignment

我的程序中有多个赋值语句，如下所示`query.constraints.size()`应该返回`13`（`constraints`是一个数组并且它返回它的大小）

```
int num,size =  query.constraints.size(); 
```

当我这样做`size`时，正如预期的那样变成 13 但`num`由于某种原因变成了 9790272。

当我按如下方式单独执行它们时，一切都很好，并且它们都是 13，如预期的那样

```
int size =  query.constraints.size();

int num =  query.constraints.size(); 
```

为什么我的多重赋值会导致奇怪的奇怪值？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-10T15:00:24.810

> 为什么我的多重赋值会导致奇怪的奇怪值？

因为 C++ 没有多重赋值¹。您在这里声明了两个变量，但只初始化第二个，而不是第一个。

* * *

¹好吧，你可以这样做，`int a, b = a = c;`但大多数 C++ 程序员会认为这样做的代码很糟糕，除非在非常特殊的情况下。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T15:00:57.680

您不是多次分配，而是多次声明。您需要执行以下操作：

```
int num, size;
size = num = query.constraints.size(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T15:01:22.253

多重分配看起来像：

```
int num, size;
num = size = query.constraints.size(); 
```

但是逗号运算符不进行多重赋值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-10T15:02:22.753

您所拥有的实际上是一个*声明语句*，部分带有初始化程序。您的代码等效于以下代码：

```
int num;  // uninitialized, you're not allowed to read it

int size(query.constraints.size());  // initialized 
```

* * *

通常，`T x = expr;` *声明*`x`一个类型的变量`T`并使用 的值对其进行*复制初始化*`expr`。对于基本类型，这只是您所期望的。对于类类型，复制构造函数只是形式上需要的，但在实践中通常被省略。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T15:00:41.330

逗号运算符不会做你认为它做的事

# c# - 从服务器到客户端接收字节数组？BinaryReader / BinaryWriter 错误？

> ID：11904309
> 
> 赞同：-2
> 
> 时间：2012-08-10T14:59:20.160
> 
> 标签：c#, sockets, client-server, binaryreader, binarywriter

嗨，我是 C# 的新手，做服务器和客户端以通过 tcp/ip 套接字连接共享文本文件。我使用 BinaryReader / BinaryWriter 从客户端上传到服务器，但从服务器到客户端卡住：从客户端到服务器：

```
Socket clientSock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
                var stream = new MemoryStream();
                var writer = new BinaryWriter(stream);
                writer.Write(fileName);
                writer.Write(authorName);
                writer.Write(fileContent);
                var data = stream.ToArray();  // send this data array to server
                clientSock.Connect("192.168.7.48", 9050); // targets machine ip add and port num
                clientSock.Send(data);
                writer.Dispose();
                stream.Dispose();
                clientSock.Close(); 
```

在服务器中：

公共无效ReadCallBack（IAsyncResult ar）{

```
 String content = String.Empty;
    StateObject state = (StateObject)ar.AsyncState;
    Socket handler = state.workSocket;
    bytesRead = handler.EndReceive(ar);
    System.Diagnostics.Debug.WriteLine("Error asshole-0");
   if (bytesRead > 0)
   {
       if (flag == 0)
       {
           var stream = new MemoryStream(state.buffer);
           var reader = new BinaryReader(stream);
           fileName = reader.ReadString();
           authorName = reader.ReadString();
           fileContent = reader.ReadString();
           reader.Dispose();
           stream.Dispose();
           flag++;
           Console.Write(fileName + authorName);
           Console.Write(fileContent);
       }
       string path = @"C:\"+fileName;

       StreamWriter sw = new StreamWriter(path);
       sw.Write(fileContent);
       sw.Close();
       sw.Dispose();
       SqlCmd();
   }
   else
   {
       Invoke(new MyDelegate(LabelWrite));
   }

} 
```

流.Dispose();

现在我尝试从服务器到客户端使用相同的方式但出现错误

```
var stream = new MemoryStream(state.buffer);
var reader = new BinaryReader(stream); 
```

stateObject 是错误的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:24:33.703

**问题**：由于套接字在缓冲区中接收数据，可能无法一次读取整个数据。 **解决方案**：您是否考虑过调用 byteread 时的用途。它`handler.EndReceive(ar)`会告诉您读取的数据，但意味着您必须检查是否收到了全部数据，如果是，则继续将其转换为字符串。

```
 Public Class State
    Public CLient As Net.Sockets.Socket
    Public Const BufferConst As Integer = 100
    Public TmpBuffer(BufferConst) As Byte
    Public sb As New System.Text.StringBuilder
End Class

Public Sub SendText(txt As String, socket As Net.Sockets.Socket)
    socket.Send(System.Text.Encoding.UTF32.GetBytes(txt + "•"))
End Sub

Public Sub ReadData(ar As IAsyncResult)
    Dim state As State = ar.AsyncState
    Try
        Dim read As Integer = state.CLient.EndReceive(ar)
        If read > 0 Then
            state.sb.Append(System.Text.Encoding.UTF32.GetChars(state.TmpBuffer))
            If state.sb.ToString.IndexOf("•") > 0 Then
                'All data have been recived
                Console.WriteLine(state.sb.ToString())
            Else
                ' Not Complete Start it again
                state.CLient.BeginReceive(state.TmpBuffer, 0, state.BufferConst, Net.Sockets.SocketFlags.None, New AsyncCallback(AddressOf ReadData), state)
            End If
        End If
    Catch ex As Exception
        Console.Write("Read Error")
    End Try
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:01:43.250

记住和`Flush`写完之后的流。从您迄今为止共享的片段来看，它看起来不像有同花顺。

查看[Stream Flush](http://msdn.microsoft.com/en-us/library/system.io.stream.flush%28v=vs.71%29.aspx)文档

# sql-server - SQL Word Formation to a sentence

> ID：11904313
> 
> 赞同：0
> 
> 时间：2012-08-10T14:59:33.610
> 
> 标签：sql-server, sql-server-2008, tsql

我在 sql 中寻找一种方法来组合条目以匹配特定组合。例如表：

参赛作品：

```
Username (nvarchar(255)) 
WordEntry (nvarchar(255)) 
```

输出，条目和计数，其中人词“我的名字是伯爵”

```
Username   Count 
TestUser   3
TestUser2  1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T15:47:01.987

我猜你正在寻找 wordentry 字段中的子字符串。如果这不是您想要的，请澄清问题。以下其中一项应该有效：

```
select username, count(*)
from t
where wordentry = 'My Name is Earl'
group by username 
```

这假设您想要完全匹配。

或者，也许您只是在 wordentry 中寻找该子字符串：

```
select username, count(*)
from t
where wordentry like '%My Name is Earl%'
group by username 
```

# java - 用java将数据插入mySQL表

> ID：11904314
> 
> 赞同：6
> 
> 时间：2012-08-10T14:59:36.120
> 
> 标签：java, mysql, sql, jdbc

我在 mySQL 数据库中有一个预定义的表： ![在此处输入图像描述](../Images/a336d75e571c287a62ded1cff0de8f30.png)

我正在将用户输入的数据保存到数据库中，但我似乎无法将任何数据保存在数据库中。使用以下代码，我试图更新数据库的第一行（ID：1 到 OTHER 2：0）。我究竟做错了什么？

```
private java.sql.Connection con = null;
private PreparedStatement pst = null;
private ResultSet rs = null;
private String url = "jdbc:mysql://localhost:8889/deliveryEarn";
private String user = "root";
private String password = "root";

try {
     con = DriverManager.getConnection(url, user, password);
     Statement st = (Statement) con.createStatement(); 

     st.executeUpdate("INSERT INTO incomeCalc " + "VALUES (3, 75, 6, 25, 18.50)");

     con.close();
}

catch (SQLException ex) {
     Logger lgr = Logger.getLogger(deliveryMain.class.getName());
     lgr.log(Level.SEVERE, ex.getMessage(), ex);

 } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T15:04:46.417

我认为它不起作用，因为值的数量少于表中的列数。您需要做的是指定列的名称以匹配您的值的数量。

```
INSERT INTO incomeCalc VALUES (3, 75, 6, 25, 18.50)  // error
// the only way this will work is when you have only 5 columns in 
// your table but in your case you have 7 that is why it will not work 
```

它应该是

```
INSERT INTO incomeCalc(specify columns here to the values bound to)
VALUES (3, 75, 6, 25, 18.50) 
```

**[w3School：（插入）](http://www.w3schools.com/sql/sql_insert.asp)**

可以用两种形式编写 INSERT INTO 语句。

第一种形式没有指定将插入数据的列名，只指定它们的值：

```
INSERT INTO table_name
VALUES (value1, value2, value3,...) 
```

第二种形式指定要插入的列名和值：

```
INSERT INTO table_name (column1, column2, column3,...)
VALUES (value1, value2, value3,...) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T15:03:12.940

您的插入语句应该是：

```
"INSERT INTO incomeCalc(ID, TIPS, HOURS, GAS, HOURLY_EARNINGS) " +
"VALUES (3, 75, 6, 25, 18.50)" 
```

换句话说，您的语句缺少列名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T15:06:14.017

您需要指定列名，例如：

```
"INSERT INTO incomeCalc (ID, TIPS, HOURS, GAS, HOURLY_EARNINGS) VALUES (3, 75, 6, 25, 18.50)" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T15:06:59.143

**一个**。按照在 MYSQL DB 中定义的顺序传递表中所有列的值。在这里，我们可以在您的表格中看到 7 列，而您只提供了 5 个值...

或者

**乙**。使用此语法

```
INSERT INTO TABLE_NAME (COLUMN_NAMES_SEPARATED_BY_COMMA) VALUES (VALUES_SEPARATED_BY_COMMA) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T15:15:52.080

像 munyengm 一样，您的 rcase 中的语句将是：“INSERT INTOincomeCalc(ID, TIPS, HOURS, GAS, HOURLY_EARNINGS)” + “VALUES (3, 75, 6, 25, 18.50)”

但你可能会循环值和东西，所以我建议使用准备好的语句，这可以防止 sql 注入。

```
ps = "INSERT INTO incomeCalc(ID, TIPS, HOURS, GAS, HOURLY_EARNINGS) VALUES (?, ?, ?, ?, ?)" 
```

然后

```
 ps.setInt(index++, id); //id=3
        ps.setInt(index++, tips); //tips=75
        ps.setInt(index++, hours);//hour=6
        ps.setInt(index++, gas);//gas=25
        ps.setFloat(index++, HOURLY_EARNINGS); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-25T12:34:04.107

第一的`READONLY = false;`

有一些限制。您`[Name_table$]`需要`\`在`COLUMN_NAMES`. 像这样：

```
st.executeUpdate("INSERT INTO [IncomeCalc$] (\"ID\", \"TIPS\", \"HOURS\", \"GAS\",\"HOURLY_EARNINGS\") VALUES ('2012-10-25 01:00:00','16.3')"); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-19T19:18:21.703

这种格式对我有用，就像你看到的那样，不需要额外的逗号、斜杠或其他任何东西：

```
statement.executeUpdate("INSERT INTO incomeCalc (value1, value2, value99) VALUES (3, 75, 6)"); 
```

# python - Google App Engine 上的 PeeWee + SQLite3

> ID：11904362
> 
> 赞同：2
> 
> 时间：2012-08-10T15:01:43.000
> 
> 标签：python, google-app-engine, bottle, peewee

我正在尝试使用**Google App Engine**部署**BootlePy + PeeWee**网络应用程序。

我将**PeeWee**与**SQLite**一起使用。

这是**PeeWee 的**源代码：

```
try:
    import sqlite3
except ImportError:
    sqlite3 = None 
```

这是我在**Google App Engine**开发控制台中遇到的错误：

```
ImportError: No module named _sqlite3 
```

为什么导入失败？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T15:05:13.953

Google App Engine 不允许使用 sqlite，因此其中没有模块。这里有更多信息：[在 Google App Engine 中使用 sqlite3？](https://stackoverflow.com/questions/5150115/using-sqlite3-within-google-app-engine)

# asp.net - 带有 ASP.NET 和 XML 的可更新新闻部分

> ID：11904363
> 
> 赞同：0
> 
> 时间：2012-08-10T15:01:48.307
> 
> 标签：asp.net, xml

我想做的是当我在 xmlTitle.Text(textbox) 和 xmlContent.Text(textbox) 上放一些东西时，我希望我的 TextXML.xml 将被更新，请帮忙吗？

```
protected void Button1_Click(object sender, EventArgs e)
    {
        XmlDocument xmlfile = new XmlDocument();
        xmlfile.Load(Server.MapPath ("~/TestXML.xml"));
        //create element
        XmlElement theNewsTag = xmlfile.CreateElement("news");
        XmlElement theTitleTag = xmlfile.CreateElement("title");
        XmlElement theContentsTag = xmlfile.CreateElement("contents");
        //create text node
        XmlText theTitleText = xmlfile.CreateTextNode(xmlTitle.Text);
        XmlText theContentsText = xmlfile.CreateTextNode(xmlContent.Text);
        //append
        theTitleTag.AppendChild(theTitleText);
        theContentsTag.AppendChild(theContentsText);

        theNewsTag.AppendChild(theTitleTag);
        theNewsTag.AppendChild(theContentsTag);
        //save
        xmlfile.DocumentElement.AppendChild(theNewsTag);
        xmlfile.Save(Server.MapPath ("~/TestXML.xml"));

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:28:44.337

您的代码正在运行，为了测试它，我创建了一个名为 TestXml.xml 的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<Data>

</Data> 
```

和aspx代码

```
 <asp:Button ID="button" runat="server" Text="Write XML"  
    onclick="button_Click" />
 <asp:TextBox  ID="xmlContent" runat="server" />
<asp:TextBox ID="xmlTitle" runat="server" /> 
```

和按钮单击事件代码

```
protected void button_Click(object sender, EventArgs e)
{
    XmlDocument xmlfile = new XmlDocument();
    xmlfile.Load(Server.MapPath("~/TestXML.xml"));
    //create element
    XmlElement theNewsTag = xmlfile.CreateElement("news");
    XmlElement theTitleTag = xmlfile.CreateElement("title");
    XmlElement theContentsTag = xmlfile.CreateElement("contents");
    //create text node
    XmlText theTitleText = xmlfile.CreateTextNode(xmlTitle.Text);
    XmlText theContentsText = xmlfile.CreateTextNode(xmlContent.Text);
    //append
    theTitleTag.AppendChild(theTitleText);
    theContentsTag.AppendChild(theContentsText);

    theNewsTag.AppendChild(theTitleTag);
    theNewsTag.AppendChild(theContentsTag);
    //save
    xmlfile.DocumentElement.AppendChild(theNewsTag);
    xmlfile.Save(Server.MapPath("~/TestXML.xml"));

} 
```

我得到以下输出

```
<?xml version="1.0" encoding="utf-8"?>
<Data>
  <news>
   <title>second1</title>
   <contents>first1</contents>
 </news>
</Data> 
```

# c# - 什么是 C# 泛型约束“T,K: where T: It “？

> ID：11904364
> 
> 赞同：5
> 
> 时间：2012-08-10T15:01:52.940
> 
> 标签：c#, java, generics, equivalent

这个 C# 声明在 Java 中的等价物是什么？

```
public class AsyncThreadPool<T, K> where T : IAsyncThread<K> { 
```

并且`IAsyncThread`是一个接口

```
public interface IAsyncThread<T> 
{
    T GetAsyncUsedObject(); 
    void StartAsyncRequest();    
} 
```

我试过了 ：

```
public class AsyncThreadPool<T extends IAsyncThread<K>, K  > 
```

但这是不正确的，因为 T 实现`IAsyncThread<K>`不扩展它。

我需要在这个类中使用`T.StartAsyncRequest()`或类似

在 C# 中是：

```
T asyncThread = default(T);
asyncThread.StartAsyncRequest() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T15:11:38.967

Java 中的通用约束只有两个选项，`extends`和`super`，在这种情况下，扩展和实现之间没有区别。您的方法声明代码应该按原样工作。

对于实例化，您必须执行一个模式，在其中使用类`T`来创建它。因为您不能直接使用`T.class`，所以如果您需要创建模式的可重用性，您可以像 corsiKa 建议的那样创建一个工厂，或者您可以将 a`Class<T>`传入您的类的构造函数并保留该实例。

```
public class AsyncThreadPool<T extends IAsyncThread<K>, K>{ 
    private final Class<T> clazz;
    public AsyncThreadPool(Class<T> clazz){
        this.clazz = clazz;
    }       
    public void Start() throws InstantiationException, IllegalAccessException{          
        T instance = clazz.newInstance();
        instance.StartAsyncRequest();
    }
} 
```

还需要注意的是，在 C# 中，`default(T)`用于类或接口将产生空引用，因此您的原始示例是不正确的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T15:13:32.747

你 `<T extends IAsyncThread<K>>`是正确的。尽管类本身是实现而不是扩展，但通用定义的术语是扩展。如果你愿意，你可以使用`<T extends Object & IAsyncThread<K>>`or`<T extends Object, IAsyncThread<K>>`但没有必要。

要创建类型 T 的成员，您唯一可以使用的就是使用工厂对象。

```
public class AsyncThreadPool<T extends IAsyncThread<K>, K> {
    private final AsyncThreadFactory<T> factory;
    public ASyncThreadPool(AsyncThreadFactory<T> factory) {
        this.factory = factory;
    }
    public void foo() {
        T t = factory.createDefault();
        t.startAsyncRequest();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T15:12:55.160

你的代码应该没问题：

```
public class AsyncThreadPool<T extends IAsyncThread<K>, K  > 
```

对于泛型，`extends`可能意味着扩展或实现。

# php - 将字符串转换为数组 - PHP

> ID：11904366
> 
> 赞同：4
> 
> 时间：2012-08-10T15:01:56.967
> 
> 标签：php, string, csv, explode

> **可能重复：**
> [使用 php 加载和读取 csv 文件](https://stackoverflow.com/questions/4354517/load-and-read-a-csv-file-with-php)

我有以下字符串：

```
Mr,Tom,Jones,Add1,Add2,"Add3,Add3 extra",Town,County,postcode,99999,888,777 
```

我正在尝试将字符串放入如下所示的数组中：

```
Array
(
    [0] => Mr
    [1] => Tom
    [2] => Jones
    [3] => Add1
    [4] => Add2
    [5] => "Add3,Add3 extra"
    [6] => Town
    [7] => County
    [8] => Postcode
    [9] => 99999
    [10] => 888
    [11] => 777
) 
```

如果你用“，”来分解字符串，它会将数组项 5 分成两部分，这是我试图避免的。原始数据来自 CSV。

最后，我正在尝试导入 CSV 并动态创建一个新的数据库，其中包含正确的标题和文件内容。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T15:04:19.460

尝试[fgetcsv()](http://php.net/manual/en/function.fgetcsv.php)：

> fgetcsv — 从文件指针获取行并解析 CSV 字段

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T15:11:07.260

```
$array = str_getcsv( 'Mr,Tom,Jones,Add1,Add2,"Add3,Add3 extra",Town,County,postcode,99999,888,777', ',', '"' ); 
```

这将使您获得所需的阵列。

[str_getcsv()](http://php.net/manual/en/function.str-getcsv.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T15:05:27.977

```
<?php
$row = 1;
if (($handle = fopen("test.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $num = count($data);
        echo "<p> $num fields in line $row: <br /></p>\n";
        $row++;
        for ($c=0; $c < $num; $c++) {
            echo $data[$c] . "<br />\n";
        }
    }
    fclose($handle);
}
?> 
```

从[fgetcsv](http://php.net/manual/en/function.fgetcsv.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T15:06:40.397

您可以使用[str_getcsv()](http://php.net/manual/en/function.str-getcsv.php)。

> str_getcsv — 将 CSV 字符串解析为数组

# jquery - jquery Datatables IE7 和 IE8 显示问题：当用户尝试移动列时，表以蓝色突出显示

> ID：11904370
> 
> 赞同：0
> 
> 时间：2012-08-10T15:02:14.843
> 
> 标签：jquery, internet-explorer, datatables

也许有人以前遇到过这个数据表问题？

我有一个在 Firefox 和 Chrome 中运行良好的 jquery 数据表。当在 IE7 和 IE8 中显示完全相同的表格时，它无法正确显示。Firefox 和 Chrome 是最新的版本。

问题表现如下： - 表的初始呈现在所有 3 个浏览器中都很好。- 但是在 IE7 和 IE8 中，当用户选择一列并尝试将其移动时，从该列向前移动的整个表格以及屏幕的其余部分都以蓝色突出显示。

这是我的表定义：

```
oTable = 
$('#datalog').dataTable( {
    "sDom": 'RC<"clear">lfrtip',                        // Specify exactly where in the DOM you want DataTables to inject the various controls: http://datatables.net/usage/options#sDom
    "oColReorder": {
        "aiOrder": [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 ],    // Defaults for setting the Columns. See "aoColumns" entries.
        "iFixedColumns": 2                              // Prevent first 2 columns in "aoColumns" entries from being moved.
    },
    "oColVis": {
        "aiExclude": [ 0, 1 ],                          // Prevent the columns in "aoColumns" from being enabled/disabled.
        "buttonText": $("#ressShowHideColumns").text()  // Localise Column Show/Hide button.
    },
    "bFilter": false,                       // Disable the Search Text box i.e. disable filtering
    "bSort": false,                         // Disable sorting of Columns
    "bDeferRender": true,
    "bStateSave": true,                     // Save State e.g. Column order, which columns are hidden, pagination.
    "sScrollY": "365px",                    // Allow a vertical scroll bar. Make the table xxxpx high
    "bPaginate": true,                      // Enable Pagination.
    "sPaginationType": "full_numbers",      // Use full set of Pagination Navigation buttons. Default is two (Previous & Next).
    "bInfo": true,                          // Enable display table info: "Showing X to XXX of XXX entries" 
    "bAutoWidth": true,                     // Auto width for display of Columns
    "bProcessing": true,                    // Display "Processing" when page is busy
    "bServerSide": true,                    // Get the data from the Server
    "sAjaxSource": ajaxURL,     // URL used to update Table via Ajax calls.
    "bJQueryUI": true,                      // Use JQuery UI Theme instead of the default Datatables theme
    "aoColumns": [
        { "mDataProp": "col0" },            // 0 - Column Array Index Position
        { "mDataProp": "col1" },        // 1
        { "mDataProp": "col2" },    // 2
        { "mDataProp": "col3" },    // 3
        { "mDataProp": "col4" },    // 4
        { "mDataProp": "col5" },    // 5 
        { "mDataProp": "col6" },    // 6
        { "mDataProp": "col7" },    // 7
        { "mDataProp": "col8" },    // 8 
        { "mDataProp": "col9" }     // 9 - Column Array Index Position
    ],
    "oLanguage": {                          // Internationalisation: http://datatables.net/ref#oLanguage
        "sLengthMenu": $("#ressLengthMenu").text(),
        "sZeroRecords": $("#ressZeroRecords").text(),
        "sInfo": $("#ressInfo").text(),
        "sInfoEmpty": $("#ressInfoEmpty").text(),
        "sEmptyTable": $("#ressEmptyTable").text(),
        "sLoadingRecords": $("#ressLoadingRecords").text(),
        "sProcessing": $("#ressProcessing").text(),
        "oPaginate": {
            "sFirst": $("#ressFirst").text(),
            "sLast": $("#ressLast").text(),
            "sNext": $("#ressNext").text(),
            "sPrevious": $("#ressPrevious").text()
        }
     },
     "fnServerData": function ( sSource, aoData, fnCallback ) {
         $.ajax( {
           "dataType": 'json',
           "type": "POST",
           "url": sSource,
           "data": aoData,
           "success": fnCallback
         } );
     }
}); 
```

任何信息表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:04:42.247

您可以尝试将**bAutoWidth**选项设置为 false。

# php - 我正在使用 Microsoft Word 在服务器上创建 PDF 文件。如何让 Word 关闭？

> ID：11904372
> 
> 赞同：0
> 
> 时间：2012-08-10T15:02:33.500
> 
> 标签：php, apache, function

我在 PHP 中编写了一个函数来转换`doc`为`pdf`，但它不起作用。一开始，我的功能起作用了，虽然它没有关闭`Winword.exe`，但我手动关闭了它。

现在，当我使用此功能打开站点页面时，Apache 停止工作。

```
$word = new COM('word.application');
$word->Visible = 0;
$word->Documents->Open('C:\Apache\smena3.krw.rzd\www\docnz\oblachnye.docx');
$word->Documents[1]->SaveAs(APPLICATION_DOCNZ_FOLDER.'\oblachnye.pdf',17);
$word->Quit('0','0','0');
$word = null;
$this->render('docnz'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:17:35.323

如果它已经在工作并且唯一的问题是 apache 停止工作，您可以考虑在脚本中添加一个命令来重新启动 apache。

我不知道您正在运行什么样的系统，但是如果您正在运行 linux，这可能会起作用：

```
$restart = shell_exec('apachectl restart');
echo $restart; 
```

最后一个回声只是为了确保 apache 正确重新启动。

# jquery - Jquery 效果表现得像一个回调。事件顺序问题。为什么？

> ID：11904373
> 
> 赞同：1
> 
> 时间：2012-08-10T15:02:41.257
> 
> 标签：jquery, callback

我正在创建一个 jquery 启动页面来覆盖一个网站。当 2 个盒子分开时，它后面有一个盒子，它应该在分裂发生的同时淡出，但它不能正常工作。它等待 2 个盒子拆分，然后在完成后盒子消失。

回调是**在黑色淡入淡出框之后**设置的，所以我不确定为什么会这样。假设这些事件同时发生。我的代码错了吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title></title>
        <meta name="robots" content="noindex, nofollow" />
        <link rel="stylesheet" type="text/css" href="includes/css/style.css" />
        <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $(".left,.right").delay(800).animate({
                    width: 0
                }, 1100);
                $(".black").delay(2300).animate({
                    opacity: 0
                }, function () {

                    $(".left,.right,.black").css('display', 'none');
                });
            });
        </script>
        <style type="text/css">
            body {
                background-color: #333;
                margin:0;
                height:100%;
                width:100%;
            }
            .left {
                background-color: #FFF;
                height: 100%;
                width: 50%;
                position: absolute;
                left: 0px;
                top: 0px;
                z-index: 999;
            }
            .right {
                background-color: #FFF;
                height: 100%;
                width: 50%;
                position: absolute;
                top: 0px;
                right: 0px;
                z-index: 999;
            }
            .black {
                background-color: #000;
                height: 100%;
                width: 100%;
                position: absolute;
                top: 0px;
                right: 0px;
                z-index: 998;
            }
        </style>
    </head>

    <body>
        <div class="left"></div>
        <div class="right"></div>
        <div class="black"></div>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:20:48.663

盒子在消失之前会等待，因为在该动画之前有 2300 毫秒（2.3 秒）的延迟。不是等待第一个动画完成，而是等待 2.3 秒。

此外，当黑盒完成淡入淡出时，无论第一个动画是否完成，它都会隐藏所有这些。

尝试将延迟更改为 800（与和`.black`相同）。还要使动画时间相同，以便它们同时完成（并因此隐藏）。`.left``.right`

示例：http: [//jsfiddle.net/NTICompass/PVqec/](http://jsfiddle.net/NTICompass/PVqec/)

# redis - 为 Redis 配置多个密码

> ID：11904378
> 
> 赞同：4
> 
> 时间：2012-08-10T15:02:53.017
> 
> 标签：redis

我已经使用 redis.conf 文件中的密码设置了一个 redis 实例

```
# requirepass foobared 
```

指示。

我想为 Redis 实例设置多个密​​码，这样我就可以为每个访问 Redis 实例的开发人员设置一个应用程序专用密码和一个不同的密码（这是用于暂存环境），这样我就可以控制对具有一定粒度的实例。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T15:15:59.857

不可以。有关更多信息，请参阅[http://redis.io/topics/security](http://redis.io/topics/security)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-12-06T10:27:18.630

是的。从版本 6 开始，现在可以实现 ACL，请参阅： [https ://redis.io/topics/acl](https://redis.io/topics/acl)

# grails - 错误 500：在 Cloud Foundry 上部署 grails 应用程序时的 Closure.rehydrate

> ID：11904385
> 
> 赞同：2
> 
> 时间：2012-08-10T15:03:09.833
> 
> 标签：grails, cloud-foundry

最近尝试将 grails-app 部署到 Cloud Foundry，该应用程序在 @ localhost 上运行良好，但在`cf-push`使用 cloud-foundry 插件后，控制台卡在正在启动应用程序，并且在尝试访问 url:myapp.cloudfoundry.com 时，我有：

```
Error 500 - Internal Server Error.

groovy.lang.Closure.rehydrate(Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)Lgroovy/lang/Closure; 
```

这个错误是什么意思？

编辑：这里是日志：

```
==== logs/stderr.log ====
Aug 10, 2012 3:28:24 PM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-19820
Aug 10, 2012 3:28:24 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 386 ms
Aug 10, 2012 3:28:24 PM org.apache.catalina.realm.JAASRealm setContainer
INFO: Set JAAS app name Catalina
Aug 10, 2012 3:28:24 PM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Aug 10, 2012 3:28:24 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.35
Aug 10, 2012 3:28:24 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory ROOT
Aug 10, 2012 3:28:33 PM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-19820
Aug 10, 2012 3:28:33 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 9331 ms

==== logs/stdout.log ==== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T21:01:36.350

关于您上面的问题“这个错误是什么意思？”，看起来标准输出消息被报告到错误日志中，这并没有给我们提供太多信息。这里有一些想法，1) 部署一个示例应用程序以确保一切正常，2) 将您的应用程序简化到成功部署的程度，3) 逐步启用其他功能直到它中断，4) 尝试使用可用的工具，如调试STS 进一步调查，[cloudfoundry 文档](http://docs.cloudfoundry.com/tools/STS/debugging-CF-Eclipse.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T16:43:42.320

这可能与此问题中所述的问题相同： [https ://stackoverflow.com/a/12469996/187812](https://stackoverflow.com/a/12469996/187812)

该线程中的答案是“Closure.rehydrate 是在 Groovy 1.8.5 中引入的”，并且提问者有一个与他们的项目相关的旧版本的 Groovy。

# c# - PluralizationServices (c#) 的问题

> ID：11904387
> 
> 赞同：1
> 
> 时间：2012-08-10T15:03:13.453
> 
> 标签：c#, entity-framework, pluralize

我只是在玩 System.Data.Entity.Design.PluralizationServices.PluralizationService。

您是否遇到过此功能的问题？

如果我有一个值为“鸭子”的字符串变量并运行

```
string noun = "ducks";

noun = System.Data.Entity.Design.PluralizationServices.PluralizationService.CreateService(System.Globalization.CultureInfo.CurrentUICulture).Singularize(noun); 
```

我仍然得到复数。

但是，如果我对文字字符串执行相同操作，它会按预期工作。

```
string noun = string.Empty;

noun = System.Data.Entity.Design.PluralizationServices.PluralizationService.CreateService(System.Globalization.CultureInfo.CurrentUICulture).Singularize("ducks"); 
```

# delphi - 为什么使用 FillChar 来初始化 Integer

> ID：11904399
> 
> 赞同：3
> 
> 时间：2012-08-10T15:03:56.060
> 
> 标签：delphi, initialization, integer

是否有任何特殊原因可以使用 FillChar 初始化 Delphi 整数变量，而不仅仅是为其分配一个初始值？我遇到过如下代码。它不在速度敏感循环或任何东西中。在这里使用 FIllChar，尤其是在对另一个变量进行更传统的赋值之后立即使用，似乎毫无意义地迟钝。那么我错过了什么？

```
procedure DoSomething;
var
  MyNum: Integer;
  MyPos: Integer;
begin
  MyNum:= 0;
  FillChar (MyPos, SizeOf (MyPos), 0);
  [...] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T13:52:58.747

据我所知，当您需要零数组或可变长度数据时，在这种情况下使用 Fillchar。在您编写的示例中，我猜开发人员认为 MyPos 将来可以更改其类型（可能是记录？还是记录？）。

# vba - 查找未包含在另一个查询中的记录

> ID：11904405
> 
> 赞同：3
> 
> 时间：2012-08-10T15:04:31.380
> 
> 标签：vba, ms-access

我有两个相互关联的表：`QUOTERun`和`QUOTERunResults`. `QUOTERun`包含特定报价所需的所有项目。 `QUOTERunResults`包含所有供应商响应的记录。我有一个程序可以分析这些响应并选择最合适的供应商并将一个名为`Preffered`true 的字段设置为。有时没有一个供应商会工作。我需要创建一个所有记录的列表，`QUOTERun`其中没有`QUOTERunResults`标记为首选的匹配记录。

**这是我到目前为止所拥有的**：

```
Set rs1 = CurrentDb.OpenRecordset("SELECT ReferenceNumber FROM [QUOTERun] WHERE RunID = " & TempRunID, dbOpenDynaset)
Set rs2 = CurrentDb.OpenRecordset("SELECT ReferenceNumber, Preffered FROM [QUOTERunResults] " & _
                                  "WHERE RunID = " & TempRunID & " AND Preffered = True", dbOpenDynaset)
If (rs2.RecordCount = 0) Then
   TempListNotComplete = "NONE OF THE VENDOR RESPONSES HAD ENOUGH STOCK. NO RECORDS HAVE BEEN MARKED AS PREFFERED."
ElseIf (rs1.RecordCount <> 0) Then
   rs1.MoveFirst
   Do While rs1.EOF <> True
      rs2.FindFirst "ReferenceNumber = " & rs1.Fields("[ReferenceNumber]").value
      If (rs2.Fields("[ReferenceNumber]").value <> rs1.Fields("[ReferenceNumber]").value) Then
         If (TempListNotComplete = "") Then 
            TempListNotComplete = rs1.Fields("[ReferenceNumber]").value 
     Else 
            TempListNotComplete = TempListNotComplete & ", " & rs1.Fields("[ReferenceNumber]").value
     End If
      End If
      rs1.MoveNext
   Loop
End If 
```

有没有更有效的方法来做上述事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:13:35.687

您可以在查询设计窗口的 SQL 视图中创建查询：

```
SELECT a.ReferenceNumber 
FROM
    (SELECT ReferenceNumber 
     FROM [QUOTERun] 
     WHERE RunID = [Enter TempRunID]) a
LEFT JOIN 
    (SELECT ReferenceNumber, Preffered 
     FROM QUOTERunResults 
     WHERE RunID = [Enter TempRunID] AND Preffered = True) b
On a.ReferenceNumber=b.ReferenceNumber
WHERE b.ReferenceNumber Is Null 
```

以上应显示第一个派生表中不在第二个派生表中的所有记录。

# c# - 在 MVC3 上的 CheckBox 列表中填充和检索数据

> ID：11904410
> 
> 赞同：0
> 
> 时间：2012-08-10T15:04:46.527
> 
> 标签：c#, asp.net-mvc-3, razor

我的视图上有用户列表：

```
foreach (var user in (List<GetWorkDone.Model.Accounts.User>)ViewBag.users)
{
} 
```

用户是：

```
public class User
{
    public int UserId { get; set; }
    public string Name { get; set; }
} 
```

我需要在 CheckBoxes 中显示用户列表并仅在 ActionResult 中选择 CheckBoxes：

```
public ActionResult AssignUser(List<User> users)
{
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:11:40.380

使用视图模型：

```
public class UserViewModel
{
    public int UserId { get; set; }
    public string Name { get; set; }
    public boolean IsSelected { get; set; }
} 
```

进而：

```
public class UsersController: Controller
{
    public ActionResult Index()
    {
        var users = new UserViewModel[]
        {
            // TODO: obviously those could come from a database or something
            new UserViewModel { UserId = 1, Name = "user 1" },
            new UserViewModel { UserId = 2, Name = "user 2" },
            new UserViewModel { UserId = 3, Name = "user 3" },
        };
        return View(users);
    }

    public ActionResult Index(UserViewModel[] users)
    {
        ... you could inspect the IsSelected property of each user here        
    }
} 
```

最后有一个强类型视图：

```
@model UserViewModel[]
@using (Html.BeginForm())
{
    @for (var i = 0; i < Model.Length; i++)
    {
        <div>
            @Html.HiddenFor(x => x[i].UserId)
            @Html.HiddenFor(x => x[i].Name)
            @Html.DisplayFor(x => x[i].Name)
            @Html.CheckBoxFor(x => x[i].IsSelected)
        </div>
    }
    <button type="submit">OK</button>
} 
```

如果您已经有其他模型，那么，调整它并使用视图模型：

```
public class AssignUserViewModel
{
    public UserViewModel[] Users { get; set; }

    ... some other properties that you already have
} 
```

进而：

```
@model AssignUserViewModel

@using (Html.BeginForm())
{
    @for (var i = 0; i < Model.Users.Length; i++)
    {
        <div>
            @Html.HiddenFor(x => x.Users[i].UserId)
            @Html.HiddenFor(x => x.Users[i].Name)
            @Html.DisplayFor(x => x.Users[i].Name)
            @Html.CheckBoxFor(x => x.Users[i].IsSelected)
        </div>
    }

    ... some other fields

    <button type="submit">OK</button>
} 
```

结论：**始终**使用视图模型。

# php - PHP根据选定的整数对整数进行排序

> ID：11904420
> 
> 赞同：1
> 
> 时间：2012-08-10T15:05:26.653
> 
> 标签：php, sorting

我在使用 PHP 对从 1 开始的整数进行排序到某个值时遇到问题，其中排序基于选定的整数，其值介于 1 和某个值之间。

这是我希望该功能的外观：

```
function sort_integers($count, $selected_value){
     ....sort()...?
} 
```

因此，如果`$count=7`and you `$selected_value=3`，则该`sort_integers()`函数将返回：

```
3,4,5,6,7,1,2 
```

如果`$count=4`and you `$selected_value=2`，那么`sort_integers()`函数将返回：

```
2, 3, 4, 1 
```

我想我需要一个递增的第三个变量，以便我可以进行比较，但我的头开始受伤思考如何完成。想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T15:09:46.427

如果我说对了，我会这样做：

```
function sort_integers($count, $selected_value){
    $res = array();
    for($i = $selected_value; $i <= $count; ++$i)
      $res[] = $i;
    for($i = 1; $i < $selected_value; ++$i)
      $res[] = $i;
    return $res;
} 
```

或使用内置函数：

```
function sort_integers($count, $selected_value){
    return array_merge(range($selected_value, $count), 
                       range(1, $selected_value - 1));
} 
```

这假设您只想像示例中那样对齐值，并且没有要排序的给定数组（因为您没有传入一个并且没有提及一个）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T15:13:45.950

范围已经排序，您只需将其拆分并反转​​部分：

```
$count = 7;
$selected = 3;

$range = range(1, $count);

if (--$selected)
{
    $sort = array_splice($range, 0, $selected);
    $sort = array_merge($range, $sort);
} else {
    $sort = $range;
} 
```

或者更直接：

```
function sort_integers($count = 7, $selected = 3) {
    if (! $count = max(0, $count)) return array();
    if (--$selected && $selected < $count) {
        return array_merge(range($selected+1,$count), range(1, $selected));
    }
    return range(1, $count);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T15:18:24.030

没有数组，这应该可以工作..

```
function sort_integers($count, $selected_value)
{
    for($x = $selected_value; $x<=$count;$x++)
    {
        echo $x.",";
    }

    for($x=1; $x < $selected_value;$x++)
    {
        echo $x.",";
    }
} 
```

哦，最后可能会留下一个额外的逗号..

# c - 宏扩展后重新扫描“定义”运算符：它应该工作吗？

> ID：11904424
> 
> 赞同：4
> 
> 时间：2012-08-10T15:05:45.183
> 
> 标签：c, macros, doxygen, c-preprocessor

考虑

```
#define FOOBAR (defined(FOO) || defined(BAR))

#if FOOBAR
/* Do stuff. */
#endif 
```

这应该工作吗？我问是因为显然我的编译器对此没有问题，但是 doxygen 内部预处理器认为`#if`. 我知道我可以解决这个问题

```
#if defined(FOO) || defined(BAR)
#define FOOBAR 1
#endif
#if FOOBAR
/* Do stuff. */
#endif 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T19:27:03.583

从 C99 规范：

> **6.10.1.3**
> 
> 在评估之前，预处理标记列表中将成为控制常量表达式的宏调用被替换（除了那些由定义的一元运算符修改的宏名称），就像在普通文本中一样。如果定义的标记是作为替换过程的结果生成的，或者使用定义的一元运算符与宏替换之前的两种指定形式之一不匹配，则行为未定义。

因此，如果您使用扩展`defined`为您所做的宏，则结果是未定义的。

与 C 规范中的大多数未定义的东西一样，它是未定义的，因为标准之前的实现对它的处理方式不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:10:53.367

这听起来像是一个特定于编译器的问题。只要你只是在使用这个编译器，就试一试——在`/*do stuff*/`零件里放一些代码，看看代码是否被编译。

# xcode4 - Xcode 4.4.1 (LLVM) 链接器占用大量内存，然后断言

> ID：11904428
> 
> 赞同：2
> 
> 时间：2012-08-10T15:06:20.393
> 
> 标签：xcode4, llvm, ld, osx-mountain-lion

这只是我的想象，还是其他人注意到 Mac App Store (4.4.1) 的最新 Xcode 中包含的链接器已经开始使用比早期版本更多的内存？我的意思是 6 GB 或更多的内存。这是从数百个目标文件生成 i386 共享库时，其中一些或全部可能使用 -g 编译。现在它是否在做某种昂贵的链接时间优化，而早期的链接器版本没有这样做？我怎么能把它关掉？

很抱歉不能更具体...我刚刚开始调查这个。到目前为止，我运行 10.8 的 MacBook Pro 已经成功挂起几次，而相关软件的构建一直在运行，这可能是由于磁盘和交换空间不足（是的，我有点紧张磁盘空间），因此只有长按电源按钮才有效...

实际上在某些情况下，链接器最终会收到一个断言错误：

```
Assertion failed: (counter() < 0xffff), function nextCounter, file /SourceCache/ld64/ld64-133.3/src/ld/ld.hpp, line 99.
0  0x10adb2280  __assert_rtn + 144
1  0x10adf2f11  ld::tool::InputFiles::findDylib(char const*, char const*) + 321
2  0x10aded00a  mach_o::dylib::File<x86>::processIndirectLibraries(ld::dylib::File::DylibHandler*, bool) + 138
3  0x10adf36b4  ld::tool::InputFiles::createIndirectDylibs() + 676
4  0x10adf4b2a  ld::tool::InputFiles::forEachInitialAtom(ld::File::AtomHandler&) + 874
5  0x10adff34c  ld::tool::Resolver::resolve() + 204
6  0x10adb2649  main + 585 
```

# vb.net - JavaScriptSerializer 异常

> ID：11904430
> 
> 赞同：0
> 
> 时间：2012-08-10T15:06:24.157
> 
> 标签：vb.net

我是这个话题的新手，基本上我有这个 JSON 字符串：

```
"{"payChannleResult":{"lastestPayChannel":"","supportedPayChannelList":{"supportTopPayChannel":[{"name":"FastPay","cashierCode":"CREDITCARD","supportSecPayChannelList":{"supportSecPayChannel":[{"name":"BankA","cashierCode":"CREDITCARD_A"},{"name":"BankB","cashierCode":"CREDITCARD_B"},
{"name":"BankE","cashierCode":"CREDITCARD_E"},
{"name":"More","cashierCode":"CREDITCARD"}]}},
{"name":"Credits","cashierCode":"DEBITCARD","supportSecPayChannelList":{"supportSecPayChannel":[{"name":"BankF","cashierCode":"DEBITCARD_F"},
{"name":"BankI","cashierCode":"DEBITCARD_I"},
{"name":"More","cashierCode":"DEBITCARD"}]}}]}}}" 
```

我为此开设了课程：

```
<Serializable()> Public Class RootObject
    Private _payChannelResult As PayChannleResult
    Public Property payChannleResult() As PayChannleResult
        Get
            Return _payChannelResult
        End Get
        Set(ByVal value As PayChannleResult)
            _payChannelResult = value
        End Set
    End Property
End Class

<Serializable()> Public Class PayChannleResult
    Private _lastestPayChannel As String 'LastestPayChannel
    Private _supportedPayChannelList As SupportedPayChannelList

    Public Property lastestPayChannel() As String
        Get
            Return _lastestPayChannel
        End Get
        Set(ByVal value As String)
            _lastestPayChannel = value
        End Set
    End Property

    Public Property supportedPayChannelList() As SupportedPayChannelList
        Get
            Return _supportedPayChannelList
        End Get
        Set(ByVal value As SupportedPayChannelList)
            _supportedPayChannelList = value
        End Set
    End Property
End Class

<Serializable()> Public Class SupportedPayChannelList
    Private _supportTopPayChannel As SupportTopPayChannel
    Public Property supportTopPayChannel() As SupportTopPayChannel
        Get
            Return _supportTopPayChannel
        End Get
        Set(ByVal value As SupportTopPayChannel)
            _supportTopPayChannel = value
        End Set
    End Property
End Class

<Serializable()> Public Class SupportTopPayChannel
    Private _name As String
    Private _cashierCode As String
    Private _supportSecPayChannelList As SupportSecPayChannelList

    Public Property name() As String
        Get
            Return _name
        End Get
        Set(ByVal value As String)
            _name = value
        End Set
    End Property
    Public Property cashierCode() As String
        Get
            Return _cashierCode
        End Get
        Set(ByVal value As String)
            _cashierCode = value
        End Set
    End Property

    Public Property supportSecPayChannelList() As SupportSecPayChannelList
        Get
            Return _supportSecPayChannelList
        End Get
        Set(ByVal value As SupportSecPayChannelList)
            _supportSecPayChannelList = value
        End Set
    End Property
End Class

<Serializable()> Public Class SupportSecPayChannelList

    Private _supportSecPayChannel As List(Of SupportSecPayChannel)
    Public Property supportSecPayChannel() As List(Of SupportSecPayChannel)
        Get
            Return _supportSecPayChannel
        End Get
        Set(ByVal value As List(Of SupportSecPayChannel))
            _supportSecPayChannel = value
        End Set
    End Property
End Class

<Serializable()> Public Class SupportSecPayChannel
    Private _name As String
    Private _cashierCode As String

    Public Property name() As String
        Get
            Return _name
        End Get
        Set(ByVal value As String)
            _name = value
        End Set
    End Property
    Public Property cashierCode() As String
        Get
            Return _cashierCode
        End Get
        Set(ByVal value As String)
            _cashierCode = value
        End Set
    End Property
End Class

<Serializable()> Public Class LastestPayChannel
    Private _name As String
    Private _cashierCode As String
    Public Property name() As String
        Get
            Return _name
        End Get
        Set(ByVal value As String)
            _name = value
        End Set
    End Property
    Public Property cashierCode() As String
        Get
            Return _cashierCode
        End Get
        Set(ByVal value As String)
            _cashierCode = value
        End Set
    End Property
End Class 
```

最后这就是我调用解串器函数的方式：

```
Dim seriliazer As JavaScriptSerializer = New JavaScriptSerializer
Dim p As RootObject = seriliazer.Deserialize(Of RootObject)(strJson) 
```

但它给出了错误：不支持类型“SupportTopPayChannel”用于数组的反序列化。

请帮帮我，非常感谢！！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T20:07:38.457

看起来您的 VB 类定义不太正确。SupportedPayChannelList 类具有未声明为列表的属性。使用下面的类定义（添加 List(Of 添加)）。如果您还没有，请确保拥有 Imports System.Collections.Generic。

```
公共类 SupportedPayChannelList
    Private _supportTopPayChannel 作为列表（SupportTopPayChannel 的）
    公共属性 supportTopPayChannel() As List(Of SupportTopPayChannel)
        得到
            返回 _supportTopPayChannel
        结束获取
        Set(ByVal value As List(Of SupportTopPayChannel))
            _supportTopPayChannel = 价值
        结束集
    结束属性
结束类

```

# c - GTK+：gtk_ui_manager_add_ui_from_resource 函数有什么作用？

> ID：11904437
> 
> 赞同：0
> 
> 时间：2012-08-10T15:06:39.710
> 
> 标签：c, linux, gtk

我在几个地方看到了该函数，但在[GTK+ 3 Reference Manual](http://developer.gnome.org/gtk3/3.0/index.html)`gtk_ui_manager_add_ui_from_resource`中找不到任何文档。这个函数有什么作用？

我想它应该类似于[gtk_ui_manager_add_ui_from_file](http://developer.gnome.org/gtk3/3.0/GtkUIManager.html#gtk-ui-manager-add-ui-from-file)，但是“资源”指的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:02:51.987

好吧，谷歌搜索我发现[了这个](https://mail.gnome.org/archives/commits-list/2012-January/msg06991.html)，它仍然是 gnome 网页。

它说

> 这是一个帮助函数，可以轻松地从资源文件中添加 ui。

事实上，它们非常相似：

```
guint gtk_ui_manager_add_ui_from_file    (GtkUIManager *manager, 
                                          const gchar *filename,
                                          GError **error);

guint gtk_ui_manager_add_ui_from_resource(GtkUIManager *manager,
                                          const gchar *resource_path,
                                          GError **error); 
```

该资源描述为：

> resource_path：要解析的文件的资源路径

所以它们只会在获取文件的方式上有所不同。

希望能帮助到你...

# android - 尝试将“CheckBox”设置为选中时出现空指针异常

> ID：11904439
> 
> 赞同：0
> 
> 时间：2012-08-10T15:06:44.793
> 
> 标签：android, checkbox

尝试将 a 设置`CheckBox`为选中时出现空指针异常。

我的代码示例：

```
CheckBox something;
something.setChecked(true); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T15:09:21.910

那是因为你的东西对象没有初始化。

初始化它

```
CheckBox something = new CheckBox(); 
```

然后使用

```
something.setChecked(true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T15:10:03.700

这是因为您没有`CheckBox`正确实例化您的对象。

如果你`CheckBox`在一个 xml 文件中，你可以这样做：

```
something = (CheckBox)findViewById(R.id.idofYourCheckbox); 
```

如果不只是这样做：

```
something = new CheckBox(Context ct); 
```

[有关更多信息，请参阅此内容。](http://developer.android.com/reference/android/widget/CheckBox.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T15:10:04.313

这是因为，您只是**声明** `CheckBox something;`了对象，**而不是对其进行了初始化**。

像这样初始化它，

```
CheckBox something = new CheckBox(this); // here 'this' is an activity context 
```

或者，

```
something = (CheckBox)findViewById(R.id.checkbox); // This is from XML file 
```

# vba - 将数据表中的数据推送到生成的模板工作表中

> ID：11904443
> 
> 赞同：1
> 
> 时间：2012-08-10T15:06:51.677
> 
> 标签：vba, excel

我正在扩展我的宏构建工作，以组织和转移从大型机检索到的数据。数据为字符串形式，与[此处](https://stackoverflow.com/questions/11620118/finding-numerical-value-pairs-with-conditionals-and-nested-if-then-statements)讨论的类似。我还利用这些问题（[1](https://stackoverflow.com/questions/11872651/filtering-column-based-on-range-vba)）（[2](https://stackoverflow.com/questions/11888291/deleting-worksheets-based-on-multiple-worksheet-criteria)）的 SO 建议和帮助开发的宏。

由于我在开发中遇到的困难——也许是因为缺乏经验，我花了很多时间来开发宏的这个特定部分，以至于同时处理其他部分。

简而言之，我正在生成工作表，重命名它们并将数据推送到这些工作表中，然后生成这些工作表，然后填写一个空白表格。我试图根据行来做，因为每一行本质上都是我推送到工作表表单的记录。我正在使用 20 多个字段并将其推送到每个新工作表。

我最初尝试了一个高度嵌套的循环，然后考虑了如何使用结构。然而，随着我越来越困惑，我切换到离散模型，因为我注意到我仍然没有弄清楚如何正确使用 Range 对象的单元格（单元格地址属性）。

代码如下：

```
'This subroutine is intended to take filtered data and use it to fill forms.
'These forms use a very basic text template worksheet, which is copied over for each worksheet.
'In general, these forms will number from 1 to 100, for discussion purposes.
'The idea is that each row of data in the DataSheet will be used to fill each worksheet tab.

Sub DataShifter()

Dim RngOne As Range, RngCell As Range
Dim RngTwo As Range
Dim RngThree As Range, RngCell2 As Range 'RngCell2 is not currently in use
Dim RngRow As Range

Dim LastCell As Long

Dim arrList() As String, LongCount As Long

'Define range data within the Crtieria Sheet
With Sheets("Criteria")
    LastCell = .Range("A" & Sheets("Criteria").Rows.Count).End(xlUp).row
    Set RngOne = .Range("A2:A" & LastCell)
End With

'Push values into the array
LongCount = 0
For Each RngCell In RngOne
    ReDim Preserve arrList(LongCount)
    arrList(LongCount) = RngCell.Text
    LongCount = LongCount + 1
Next

'Filter the values to the desired criteria stored in the array.
With Sheets("Sheet1")

'For when this process is repeated.
If .FilterMode Then .ShowAllData

.Range("A:A").AutoFilter Field:=1, Criteria1:=arrList, Operator:=xlFilterValues

End With

'Add a Sheet to contain the filtered criteria
Sheets.Add After:=Sheets(1)
Sheets(2).Name = "DataSheet"

'With the original dataset, snag all existing data based on the range in Sheet Criteria.
'This avoids potential empty junk data and potential blanks pulled from the mainframe.
With Sheets("Sheet1")

LastCell = .Range("A" & Sheets("Criteria").Rows.Count).End(xlUp).row
Set RngTwo = .Range("A2:AA" & LastCell)

End With

'Push data into DataSheet worksheet, so data is sequential
Sheets(1).Select
RngTwo.Copy
Sheets("DataSheet").Select
ActiveSheet.Paste

'Define the ranges used within the sheet
With Sheets("DataSheet")
LastCell = .Range("A" & Sheets("Criteria").Rows.Count).End(xlUp).row
Set RngThree = .Range("A2:A" & LastCell)

End With

'For each row in the range, (1) generate a new datasheet, and copy the form from the template to the new sheet.
'(2) Rename the datasheet to be the value in Row 1, Column 1 ("A1").
'(3) Copy over information to the form based on column location in the Datasheet.
'This method, even if made functional, is both procedural and limited in scope. Recursion with text matching will be the end goal for this form.
For Each RngRow In RngThree.Rows

Sheets.Add After:=Sheets(1)

'Grab the text form from the Template and push it into the new sheet.
Sheets("TemplateSheet2").Select
Cells.Select
Selection.Copy
Sheets(2).Select
ActiveSheet.Paste

Sheets(2).Name = Sheets("DataSheet").Cells(RngRow, 1).Value

Sheets(2).Range("B3") = Sheets("DataSheet").Cells(RngRow, 1).Value
Sheets(2).Range("D3") = Sheets("DataSheet").Cells(RngRow, 2).Value
Sheets(2).Range("F3") = Sheets("DataSheet").Cells(RngRow, 3).Value
Sheets(2).Range("B5") = Sheets("DataSheet").Cells(RngRow, 4).Value
Sheets(2).Range("B10") = Sheets("DataSheet").Cells(RngRow, 5).Value
Sheets(2).Range("B7") = Sheets("DataSheet").Cells(RngRow, 6).Value
Sheets(2).Range("D10") = Sheets("DataSheet").Cells(RngRow, 7).Value
Sheets(2).Range("F10") = Sheets("DataSheet").Cells(RngRow, 8).Value
Sheets(2).Range("B13") = Sheets("DataSheet").Cells(RngRow, 9).Value
Sheets(2).Range("D13") = Sheets("DataSheet").Cells(RngRow, 10).Value
Sheets(2).Range("F13") = Sheets("DataSheet").Cells(RngRow, 11).Value
Sheets(2).Range("B16") = Sheets("DataSheet").Cells(RngRow, 12).Value
Sheets(2).Range("D16") = Sheets("DataSheet").Cells(RngRow, 13).Value
Sheets(2).Range("F16") = Sheets("DataSheet").Cells(RngRow, 14).Value
Sheets(2).Range("B19") = Sheets("DataSheet").Cells(RngRow, 15).Value
Sheets(2).Range("D19") = Sheets("DataSheet").Cells(RngRow, 16).Value
Sheets(2).Range("F19") = Sheets("DataSheet").Cells(RngRow, 17).Value
Sheets(2).Range("B21") = Sheets("DataSheet").Cells(RngRow, 18).Value
Sheets(2).Range("D21") = Sheets("DataSheet").Cells(RngRow, 19).Value
Sheets(2).Range("B23") = Sheets("DataSheet").Cells(RngRow, 20).Value
Sheets(2).Range("D23") = Sheets("DataSheet").Cells(RngRow, 21).Value

 'Concatenate values from certain fields into one field
Sheets(2).Range("B26") = Sheets("DataSheet").Cells(RngRow, 23).Value & Cells(RngRow, 24).Value & Cells(RngRow, 24).Value & Cells(RngRow, 25).Value & Cells(RngRow, 26).Value & Cells(RngRow, 27).Value

Next RngRow

End Sub 
```

目前，执行此代码会导致类型不匹配，首先在第 84 行：`Sheets(2).Name = Sheets("DataSheet").Cells(RngRow, 1).Value`，如果第 84 行被注释掉，则在后续行中。我不确定我应该如何纠正这个问题以使我的代码有效地发挥作用，我要求修复这个特定问题。

更普遍关注的是我的方法，我也欢迎任何建议、建议、方法或改进来考虑这个宏 - 尽管在我进行任何优化工作之前修复是最重要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:41:13.577

在导致错误的行中，而不是`RngRow`Use `RngRow.Row`。

`RngRow`是一个`Range`。`RngRow.Row`将返回第一行的数字`RngRow`。

`Cells`需要 a `RowIndex`(a number) 和 a `ColumnIndex`。当您提供 Range（而不是数字）和 ColumnIndex 时，它会引发您指示的类型匹配错误。

这是如何缩短/改进代码的一个示例，而不是：

```
Sheets.Add After:=Sheets(1)  
'Grab the text form from the Template and push it into the new sheet. 
Sheets("TemplateSheet2").Select 
Cells.Select 
Selection.Copy 
Sheets(2).Select 
ActiveSheet.Paste 
```

尽管我会尽量避免使用它，但您应该能够使用它并获得相同的结果`select`：

```
'Copy the Template into a new sheet.
Sheets("TemplateSheet2").Copy After:=Sheets(1)
Sheets(2).select 
```

# algorithm - 考虑到票数计算出最高评分的公式

> ID：11904444
> 
> 赞同：0
> 
> 时间：2012-08-10T15:06:54.187
> 
> 标签：algorithm

我需要按评级顺序显示事物列表。这些东西可以从 0 星到 5 星。我确定我在某处看到了一个公式，可以计算出他们应该按哪个顺序。

例如，我认为如果其中一件事只有 1 条评论是 5 星，我认为它们看起来不会比有 10 条平均 4.5 星的评论更高，如果你明白我的意思的话。

有谁知道我在说什么或公式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:11:27.360

您应该通过以下链接了解 IMDB 使用的公式...

[IMDB排名系统](http://en.wikipedia.org/wiki/Internet_Movie_Database#Ranking_.28IMDb_Top_250.29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:55:45.490

你也必须考虑谁是选民——有些人倾向于给高星，而其他人则不然。因此，仅查看项目及其投票是不准确的。因此，您最好考虑两件事：项目和选民。

你最好[在这里](http://en.wikipedia.org/wiki/Recommender_system)阅读推荐系统是如何工作的。

# biztalk - BizTalk 单例业务流程实例已被淹没

> ID：11904447
> 
> 赞同：2
> 
> 时间：2012-08-10T15:07:11.423
> 
> 标签：biztalk

我们有一个单例（顺序护航）编排实例，其中充斥着大约 14000 条消息。这意味着该实例已经处理了 8 天，但处理速度目前非常慢（大约每 7 分钟 1 次）。该实例启动速度很快，但在过去几天中已减慢到当前的性能水平。

我们已经从这个实例中转移了更多的消息，我们的计划是在它完成积压的处理后终止它。

问题是，根据我们计算出的当前处理速度，我们还有三天的时间来处理（大约还有 660 条消息需要处理）。

我的问题是：有什么办法可以加快速度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:28:15.423

我们设法为此创建了一个解决方法：

1.  查询消息框并检索所有已*消费但未处理的消息*
2.  杀死执行缓慢的编排实例
3.  将所有未处理的消息通过管道返回，在这些消息中创建了一个新的编排实例。

这个新实例不受前一个实例的所有历史记录（消费消息）的影响，因此运行速度提高了大约 60 倍，快速清除了剩余的积压。

我们识别已*消费但未处理的*消息的方法是使用我在此处记录的方法：[了解给定 BizTalk 顺序护航编排实例的已消费但未处理消息的数量的技术](http://www.linkedin.com/groupItem?view=&gid=53234&type=member&item=144996328)

其余的，一旦您从消息框数据库中检索到消息 guid 列表，就会记录在以下位置：

*   [如何从 BizTalk 数据库中检索消息正文](https://groups.google.com/forum/?fromgroups#!topic/microsoft.public.biztalk.general/WZwDiAcxeAI%5B1-25%5D)
*   [从 BizTalk 跟踪数据库中以编程方式提取消息正文的 3 种方法](http://connectedthoughts.wordpress.com/2008/04/02/3-ways-of-programatically-extracting-a-message-body-from-the-biztalk-tracking-database/)（我使用了第 3 种方法）

总之，一旦您拥有消息 ID，您就可以从 messagebox db 的 Parts 表中选择 imgPart 列，这将为您提供消息正文的二进制编码压缩版本。然后，您可以使用上述文章中的代码来重建消息。

在此之后，它只是获取所有消息然后通过 MSMQ 接收位置将它们发射回 biztalk 的情况。

从长远来看，我们将需要解决导致此问题发生的设计缺陷 - 尽管没有预料到会发生洪水，但在重负载下让运行过程的性能崩溃通过地板从来都不是一个好地方。

我们遇到的问题是，对于我们的大多数消费者系统，必须维护源消息顺序。出于这个原因，我们到处都有单例，所有这些都可能面临这个问题。

我在这里发布了有关 BizTalk 中的消息[重新排序](http://www.eaipatterns.com/Resequencer.html)策略的信息：[Resequencing strategy for ordered delivery in BizTalk](https://sites.google.com/site/finamics/resequencing-strategies-for-ordered-delivery-in-biztalk)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T13:02:59.157

我们注意到我们最初的单例/多例模式有类似的行为。原因似乎是因为太多消息与编排“相关”，即使消息已完成处理，它也不能可靠地从消息框中删除，因为编排实例仍在运行（BTS 2009，没有 SP）。一旦假脱机表达到约 500k 行，所有主机都进入限制状态（我认为是 6），然后吞吐量急剧下降。

以下帮助：

1.  我们确保我们的消息和变量在 orch 中的范围很窄，一旦不再需要它们就会超出范围。
2.  我们添加了一个超时，以允许多吨在一段时间不活动后“死亡”，例如 60 秒。这样做的缺点是，如果在管弦乐死亡时有新消息到达，可能会导致僵尸。幸运的是，我们能够让我们的合作伙伴突发发送消息，中间有延迟，从而避免了这个问题。

如果您发现您的服务器由于消息框/假脱机表级别而受到限制，您可以做的是暂时将“[数据库中的消息计数阈值](http://msdn.microsoft.com/en-us/library/aa559628%28BTS.10%29.aspx)”增加10 倍，然后重新启动主机 - 这可能会清除当前的积压。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T20:27:23.937

确保 BTS 数据库作业已启动并正在运行，并且已正确配置。

# sql - 如何根据日期范围/年龄进行存储和查询？

> ID：11904455
> 
> 赞同：1
> 
> 时间：2012-08-10T15:07:48.523
> 
> 标签：sql, sql-server, database, database-design

我正在构建一个佣金计算器，但我不确定如何进行。我有这样的情况：客户 123 的 saleRep A 在前 2 年获得 2%，然后是 0.5%。我已经知道如何获取客户的年龄。

日期范围是可变的。这意味着一个 salesRep/Customer 组合可以在 1 年、2 年、任何时候拆分，但可能在当年拆分。

那么，我该如何查询和存储呢？我的佣金表目前如下，我需要更改吗？

```
 CREATE TABLE [dbo].[NCL_Commissions](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [ProductType] [varchar](255) NULL,
    [LowCost] [int] NULL,
    [HighCost] [int] NULL,
    [CustCode] [varchar](30) NULL,
    [SalesRep] [varchar](10) NULL,
    [Commission] [float] NULL,
    [MinAge] [smallint] NULL,
    [MaxAge] [smallint] NULL,
 CONSTRAINT [PK_NCL_Commissions] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

当我被告知所有佣金都相同时，我是这样构建它的：

```
 DECLARE @custCreationDate datetime

    SET @custCreationDate = (   SELECT TOP 1 cast(INVDate as datetime)
                                FROM InvoiceHeader
                                WHERE companycode = @custCode
                                order by recid asc      )

--  PRINT 'Line 54: @custCreationDate: ' + cast(@custCreationDate as varchar)

    --If the customer has existed for less than a year
    IF @custCreationDate > DateAdd(yy, -1, @now)
        BEGIN
            SET @result = 2.00  --Customers in existance for less than a year yeild 2% commission
--          PRINT 'Line 60 - @result: ' + cast(@result as varchar)
            GOTO Exit_Function
        END
    ELSE
        BEGIN
            SET @result = 0.50  --Customers in existance longer yeild 0.5 % commission.
--          PRINT 'Line 66 - @result: ' + cast(@result as varchar)
            GOTO Exit_Function
        END 
```

样本数据（部分问题是寻找有关如何存储的建议）

销售代表 A 的客户 123 在前 2 年获得 1%，比 0.5%
销售代表 B 的客户 456 在前 1 年获得 2%，比 0.75%

在任何给定时间，我都必须能够根据客户的当前年龄获得正确的百分比。因此，如果客户 A 是在 2012 年 6 月 1 日创建的，则佣金为 2%。如果客户是在 2008 年 9 月 5 日创建的，则佣金为 0.5%。

解决方案基于 Gordon Linoff 的回答：

```
SET @custAgeInMonths = datediff(month, @custCreationDate, @invDate)

    --First look for a customer specific record
    SELECT @result = C.Commission
    FROM NCL_Commissions C
    WHERE C.CustCode = @custCode
    AND C.SalesRep = @salesRep
    AND ProductType in ('L')
    AND @custAgeInMonths BETWEEN C.MinAgeMonths AND C.MaxAgeMonths 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:30:34.083

这似乎是一个连接。

假设您有一个客户表，上面有客户的开始日期和佣金表。您可以计算客户的当前年龄并加入佣金表。这假设客户记录具有销售代表：

```
select <whatever>
from (select c.*, datediff(day, c.joindate, getdate())/365.25 as AgeYears
      from customer c
     ) c left outer join
     NCL_Commissions com
     on c.CustCode = com.CustCode and
        c.ProductType= com.ProductType and
        c.SalesRep = com.SalesRep and
        c.AgeYears between MinAge and c.MaxAge 
```

鉴于所有连接条件，我会注意不匹配（因此使用左外连接）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:50:53.730

1）你需要一个有佣金括号的表格（我推荐按月）

```
CREATE TABLE [dbo].[CommissionsBrakets](
[ID] [int] NOT NULL,
[Commission] [Decimal](4, 4) NULL,
Month [smaillint]) 
```

用刹车填满它

```
1    2%  1 /month 1 2%
1    2%  2 /month 2 2%
....
1  0.5% 24 /month 24 (2 years) 0.5% 
```

2）您需要一个与客户+salesrep+comisionBracket 相关的表格

```
CREATE TABLE [dbo].[NCL_Commissions](
[ID] [int] IDENTITY(1,1) NOT NULL,   
[CustCode] [varchar](30) NULL,
[SalesRep] [varchar](10) NULL,
[CommissionID] [int] NULL) 
```

然后你可以加入

```
declare @mothDiff int = DATEDIFF(m, @custCreationDate, GETDATE())

Select b.Commission from NCL_Commissions C inner join CommissionsBrakets B 
on c.CommissionID  =   B.ID 
where 
B.month = case 
    when @mothDiff > ((select max(Month) from CommissionsBrakets CB where CB.id = B.ID   ))
    then (select max(Month) from CommissionsBrakets CB where CB.id = B.ID   )
    else @mothDiff
    end 
```

# php - Magento 联系表疑难解答

> ID：11904462
> 
> 赞同：1
> 
> 时间：2012-08-10T15:08:26.163
> 
> 标签：php, magento

我们的联系表格已经停止工作，我不确定问题是什么。我可以确认其他电子邮件工作正常。奇怪的是，一旦我点击提交，它就会返回给我`http://mydomain.com/contact/index/`并且没有任何消息。另外, 如果测试消息看起来是垃圾邮件, **Akismet**将在 Akismet 部分捕获它。这是我的设置：

**带表格的页面：**

```
{{block type="core/template" name="contactForm" form_action="/contacts/index/post/" template="contacts/form.phtml"}} 
```

form.html**代码**：

```
<form action="<?php echo $this->getFormAction();?>" id="contactForm" method="post">
<div class="fieldset">
    <h2 class="legend"><?php echo Mage::helper('contacts')->__('Contact Information') ?></h2>
    <ul class="form-list">
        <li class="fields">
            <div class="field">
                <label for="name" class="required"><em>*</em><?php echo Mage::helper('contacts')->__('Name') ?></label>
                <div class="input-box">
                    <input name="name" id="name" title="<?php echo Mage::helper('contacts')->__('Name') ?>" value="<?php echo $this->htmlEscape($this->helper('contacts')->getUserName()) ?>" class="input-text required-entry" type="text" />
                </div>
            </div>
            <div class="field">
                <label for="email" class="required"><em>*</em><?php echo Mage::helper('contacts')->__('Email') ?></label>
                <div class="input-box">
                    <input name="email" id="email" title="<?php echo Mage::helper('contacts')->__('Email') ?>" value="<?php echo $this->htmlEscape($this->helper('contacts')->getUserEmail()) ?>" class="input-text required-entry validate-email" type="text" />
                </div>
            </div>
        </li>
        <li>
            <label for="telephone"><?php echo Mage::helper('contacts')->__('Telephone') ?></label>
            <div class="input-box">
                <input name="telephone" id="telephone" title="<?php echo Mage::helper('contacts')->__('Telephone') ?>" value="" class="input-text" type="text" />
            </div>
        </li>
        <li class="wide">
            <label for="reason" class="required"><em>*</em><?php echo Mage::helper('contacts')->__('Reason') ?></label>
            <div class="input-box">
                <textarea name="reason" id="reason" title="<?php echo Mage::helper('contacts')->__('Reason') ?>" class="required-entry input-text" cols="5" rows="3"></textarea>
            </div>
        </li>
    </ul>
</div>
<div class="buttons-set">
    <p class="required"><?php echo Mage::helper('contacts')->__('* Required Fields') ?></p>
    <input type="text" name="hideit" id="hideit" value="" style="display:none !important;" />
    <button type="submit" title="<?php echo Mage::helper('contacts')->__('Submit') ?>" class="button"><span><span><?php echo Mage::helper('contacts')->__('Submit') ?></span></span></button>
</div>
</form>
<script type="text/javascript">
//<![CDATA[
var contactForm = new VarienForm('contactForm', true);
//]]>
</script> 
```

以下是 system.log 的内容：

```
2012-08-10T18:21:51+00:00 ERR (3): Notice: Undefined index: comment  in /var/www/html/svn/magento/website/trunk/app/code/community/Centerax/Akismet/Model/Api.php on line 56
2012-08-10T18:21:51+00:00 ERR (3): Notice: Undefined index: comment  in /var/www/html/svn/magento/website/trunk/app/code/community/Centerax/Akismet/controllers/Contacts/IndexController.php on line 52 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:40:40.787

修好了 正如您在上面的代码中看到的那样，在某些时候，我将“评论”的默认字段更改为“原因”。Akismet 抛出错误，因为它找不到“评论”来检查垃圾邮件。总之谢谢大家。

# git - xargs 和 git log --grep

> ID：11904468
> 
> 赞同：2
> 
> 时间：2012-08-10T15:08:50.127
> 
> 标签：git, xargs

我正在整理一个 bash 命令来从旧的 SVN 存储库中查找 Git 提交。这是我的整个命令：

```
$ svn log --xml --revision 323016 http://svn.php.net/repository | grep "<msg>" | sed 's/<msg>//' | xargs --verbose -i% git log --pretty=oneline --grep=\"%\"
git log --pretty=oneline --grep="Always restore PG(magic_quote_gpc) on request shutdown" 
```

运行命令的前几部分会给我提交评论：

```
$ svn log --xml --revision 323016 http://svn.php.net/repository | grep "<msg>" | sed 's/<msg>//'
Always restore PG(magic_quote_gpc) on request shutdown 
```

所以这很好 - 但是当我想通过 xargs 使用 git log --grep 时，它不起作用（给我没有回应）。

这是奇怪的部分......`--verbose`为我打印出命令。如果我复制并粘贴那个确切的命令，我会得到我需要的输出。那是：

```
$ git log --pretty=oneline --grep="Always restore PG(magic_quote_gpc) on request shutdown"
87c038be06b8b0eb721270f98c858fd701f5d54b Always restore PG(magic_quote_gpc) on request shutdown 
```

此外，由于某种原因，这不起作用：

```
$ echo -n "Always restore PG(magic_quote_gpc) on request shutdown" | xargs --verbose -i% git log --grep=\"%\"
git log --grep="Always restore PG(magic_quote_gpc) on request shutdown" 
```

所以这一定是我对 xargs 的使用，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T23:39:11.790

我会将您通过 xargs 执行的命令包装到 sh

```
git rev-parse HEAD | xargs -n 1 -i{} sh -e "git log -1 {}" 
```

我用它来解决一些转义问题以及为 xargs 传递的每个项目执行复杂的脚本：

```
git rev-parse HEAD | xargs -n 1 -i{} sh -e "some crazy looped code with {} embedded in multple places" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:23:28.737

问题是您正在转义引号。我不知道为什么这是个问题，但我试过了，问题肯定出在转义引号上。不知何故，当 xargs 调用命令时，它会将这些引号作为参数的一部分，因此`Always restore PG(magic_quote_gpc) on request shutdown`您不是在搜索 ，而是在搜索`"Always restore PG(magic_quote_gpc) on request shutdown"`。以下内容应该适合您：

```
svn log --xml --revision 323016 http://svn.php.net/repository | grep "<msg>" | sed 's/<msg>//' | xargs --verbose -i% git log --pretty=oneline --grep="%" 
```

# javascript - jQuery TinySort 按数据属性排序和放置

> ID：11904471
> 
> 赞同：0
> 
> 时间：2012-08-10T15:08:57.887
> 
> 标签：javascript, jquery

我有一个星期五下午的时刻，我真的很难按照我的意愿对这些物品进行分类！

我有一个列表，将通过从两个下拉列表中进行选择来过滤。一个用于属性，另一个用于值。然后我想根据两个下拉列表对列表进行排序。

因此，例如，用户可能选择值为 30 的 attr4。然后我想按升序对列表进行排序，首先是匹配项，然后是不匹配项。即下面的这个列表：

```
<ul>
    <li data-attr1="10" data-attr2="20" data-attr3="30" data-attr4="40" data-attr5="50">Option 1</li>
    <li data-attr1="20" data-attr2="30" data-attr3="40" data-attr4="50" data-attr5="10">Option 2</li>
    <li data-attr1="30" data-attr2="40" data-attr3="50" data-attr4="10" data-attr5="20">Option 3</li>
    <li data-attr1="40" data-attr2="50" data-attr3="10" data-attr4="20" data-attr5="30">Option 4</li>
    <li data-attr1="50" data-attr2="10" data-attr3="20" data-attr4="30" data-attr5="40">Option 5</li>
</ul> 
```

然后看起来像这样：

```
<ul>
    <li data-attr1="50" data-attr2="10" data-attr3="20" data-attr4="30" data-attr5="40">Option 5</li>
    <li data-attr1="10" data-attr2="20" data-attr3="30" data-attr4="40" data-attr5="50">Option 1</li>
    <li data-attr1="20" data-attr2="30" data-attr3="40" data-attr4="50" data-attr5="10">Option 2</li>
    <li data-attr1="40" data-attr2="50" data-attr3="10" data-attr4="20" data-attr5="30">Option 4</li>
    <li data-attr1="30" data-attr2="40" data-attr3="50" data-attr4="10" data-attr5="20">Option 3</li>
</ul> 
```

我可以很容易地使用以下方法对整个列表进行排序：

```
$('ul li').tsort({ data: attribute, order: 'asc'}); 
```

但我无法将匹配的项目放在不匹配的项目前面。我尝试使用：

```
$('ul li').tsort({ data: test, order: 'asc', place: 'start' }); 
```

无济于事。谁能发现我做错了什么？任何帮助将不胜感激 - 周五愉快！谢谢！

达伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T08:28:20.850

```
$('ul.suites li').each(function() {
    if($(this).data(attribute)==0) {
        resultsZilch.push($(this));
    } else if($(this).data(attribute)>=amount) {
        resultsMatch.push($(this));
    } else {
        resultsClose.push($(this));
    }
});

resultsMatch.sort(normalCompare);
resultsClose.sort(normalCompare).reverse();

var resultsTotal = resultsMatch.concat(resultsClose, resultsZilch);

$('ul li').remove();

$.each(resultsTotal, function(index, item) {
    $('ul').append(item);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:48:08.617

有几种方法可以做到这一点。

最简单的方法是将列表拆分为两个列表，首先是与您的规范匹配的项目（因此排在第一位），其次是不符合规范的项目。根据需要对每个列表进行排序，然后加入它们以覆盖原始列表。

第二种方法更复杂，但会就地对列表进行排序，需要您编写自定义排序函数：

```
$('ul li').tsort('', { sortFunction:function(a,b) {
    var amt, bmt;

    amt = matchesSpec(a);
    bmt = matchesSpec(b);
    if (amt || bmt) {
        if (amt && bmt) {
          // Both match spec, so equal
          return 0;
        }
        // Only one matches spec; the one that matches is always less to go first
        return (amt ? -1 : 1);
    }

    // Neither matches spec, do normal comparison
    return normalCompare(a, b);
}}); 
```

如果组合框属性与列表项匹配，matchesSpec 将返回 true。如果项目在排序顺序中相等，则 normalCompare 将返回 0，如果 a 应该排在第一位，则返回 -1，如果 b 应该排在第一位，则返回 1。如果 TinySort 有一个可调用的默认函数，你也可以使用它。

# asp.net-mvc-4 - 可空的可选 url 参数的 ASP.NET MVC 4 RC Web API ModelState 错误

> ID：11904475
> 
> 赞同：5
> 
> 时间：2012-08-10T15:09:16.430
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我想为我的 Web API 创建一个全局验证属性。所以我按照[教程](http://www.asp.net/web-api/overview/web-api-routing-and-actions/video-custom-validation)完成了以下属性：

```
public class ValidationActionFilter : ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        if (actionContext.ModelState.IsValid)
        {
            return;
        }

        var errors = new List<KeyValuePair<string, string>>();
        foreach (var key in actionContext.ModelState.Keys.Where(key =>
            actionContext.ModelState[key].Errors.Any()))
        {
            errors.AddRange(actionContext.ModelState[key].Errors
                  .Select(er => new KeyValuePair<string, string>(key, er.ErrorMessage)));
        }

        actionContext.Response =
            actionContext.Request.CreateResponse(HttpStatusCode.BadRequest, errors);
    }
} 
```

然后我将它添加到 Global.asax 中的全局过滤器中：

`configuration.Filters.Add(new ValidationActionFilter());`

它适用于我的大多数操作，但不适用于具有可选和可为空请求参数的操作。

例如：

我创建了一条路线：

```
routes.MapHttpRoute(
    name: "Optional parameters route", 
    routeTemplate: "api/{controller}", 
    defaults: new { skip = UrlParameter.Optional, take = UrlParameter.Optional }); 
```

我的一个动作`ProductsController`：

```
public HttpResponseMessage GetAllProducts(int? skip, int? take)
{
    var products = this._productService.GetProducts(skip, take, MaxTake);

    return this.Request.CreateResponse(HttpStatusCode.OK, this._backwardMapper.Map(products));
} 
```

现在，当我请求此 url 时：`http://locahost/api/products`我收到带有 403 状态代码和以下内容的响应：

```
[
{
    "Key": "skip.Nullable`1",
    "Value": "A value is required but was not present in the request."
},
{
    "Key": "take.Nullable`1",
    "Value": "A value is required but was not present in the request."
}
] 
```

我相信这不应该显示为验证错误，因为这些参数都是可选的和可为空的。

有没有人遇到过这个问题并找到了解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T09:58:43.630

您可能还希望避免/禁止对 GET 请求中的原始类型进行模型验证。

```
public class ModelValidationFilter : ActionFilterAttribute
    {
        public override void OnActionExecuting(HttpActionContext actionContext)
        {
            if (!actionContext.ModelState.IsValid && actionContext.Request.Method != HttpMethod.Get)
            { ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T16:52:32.180

似乎您在 Web API 和 MVC 之间弄乱了代码，您应该使用Web API 中的**RouteParameter**而不是MVC中的**UrlParameter**

```
routes.MapHttpRoute(
    name: "Optional parameters route", 
    routeTemplate: "api/{controller}", 
    defaults: new { skip = RouteParameter.Optional, take = RouteParameter.Optional }
    ); 
```

但：

**您的路由跳过**和**采用**的默认参数对您的路由机制没有任何作用，因为您只是在查询字符串中使用它们，而不是在路由模板中。所以最纠正的路线应该是：

```
routes.MapHttpRoute(
    name: "Optional parameters route", 
    routeTemplate: "api/{controller}"
    ); 
```

# javascript - 在 asp.net 中使用 javascript 填充国家和城市下拉列表

> ID：11904478
> 
> 赞同：0
> 
> 时间：2012-08-10T15:09:22.097
> 
> 标签：javascript, asp.net, error-handling, fancybox, html-select

我在花式框中有一个注册表单作为内联内容，并且可以在所有站点中访问它，因为链接位于母版页中。

在注册表单上，我有两个下拉列表，一个用于国家，另一个用于城市。当用户更改国家/地区时，城市下拉列表会刷新为先前选择的国家/地区。我从脚本[https://bdhacker.wordpress.com/tag/all-countries-of-the-world/获得的来自国家和城市的所有数据](https://bdhacker.wordpress.com/tag/all-countries-of-the-world/)

问题是，当用户提交表单时，Firefox 中会出现错误提示

```
Invalid postback or callback argument.  Event validation is enabled using <pages enableEventValidation="true"/> in configuration or <%@ Page EnableEventValidation="true" %> in a page.  For security purposes, this feature verifies that arguments to postback or callback events originate from the server control that originally rendered them.  If the data is valid and expected, use the ClientScriptManager.RegisterForEventValidation method in order to register the postback or callback data for validation.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.ArgumentException: Invalid postback or callback argument.  Event validation is enabled using <pages enableEventValidation="true"/> in configuration or <%@ Page EnableEventValidation="true" %> in a page.  For security purposes, this feature verifies that arguments to postback or callback events originate from the server control that originally rendered them.  If the data is valid and expected, use the ClientScriptManager.RegisterForEventValidation method in order to register the postback or callback data for validation. 
```

正如错误指出的那样，我必须设置 enableeventvalidation=false。问题是我必须在每个页面上都这样做，因为fancybox 在整个站点中，而且我读到它不是最佳安全实践。当异常抛出时，其他选项是使用两个下拉列表的客户端脚本管理器注册每个选项，这会很烦人，因为有 200 多个国家和 10.000 个城市！

有什么想法我能做什么？

这是一些代码

```
<%@ Master Language="C#" AutoEventWireup="True" CodeBehind="Site.master.cs" Inherits="VozDirecta.SiteMaster" %>
<script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
        $("#RegistroLightbox").fancybox({

        });
    });

</script>

<body id="page1">
<form id="Form1" runat="server">
<asp:ScriptManager ID="ScriptManager" runat="server">
</asp:ScriptManager>
<a class="labelsTipolinks"  id="RegistroLightbox" href="#LightBoxRegistroDiv">Registro</a>

 <div style="display: none">
    <div id="LightBoxRegistroDiv">
        <asp:DropDownList ValidationGroup="grupoValidacionRegistroUsuario" runat="server"
                    ID="drpDownPais" CssClass="textoLightbox" AutoPostBack="false" CausesValidation="false">
                </asp:DropDownList>
         <asp:DropDownList ValidationGroup="grupoValidacionRegistroUsuario" runat="server"
                    ID="drpDownCiudad" CssClass="textoLightbox" AutoPostBack="false" CausesValidation="false">
                </asp:DropDownList>
    </div>
</div> 
```

我考虑其他选择从数据库中获取数据并绑定到下拉列表，但我宁愿留在 javascript

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:39:09.883

我最终使用了纯 html 选择控件并将两个值保存在两个隐藏字段中。有了这个，我可以使用默认值为 true 来保留 enableeventvalidation :)

这里有一些代码：

```
<select CssClass="textoLightbox" id="selectPais" onchange="cambiarCiudad()"></select>
<asp:HiddenField runat="server" ID="hdnPaisSeleccionado" />

<select CssClass="textoLightbox" id="selectCiudad" onchange="guardarCiudad()"></select>
<asp:HiddenField runat="server" ID="hdnCiudadSeleccionada" />

<script language="javascript" type="text/javascript">
$(document).ready(function () {
    ImprimirPais("selectPais");
    var dropPais = document.getElementById("selectPais");
    var dropCiudad = document.getElementById("selectCiudad");
    dropPais.value = "USA";
    print_state('selectCiudad', dropPais.selectedIndex)
    dropCiudad.value = "California";
    document.getElementById("<%=hdnPaisSeleccionado.ClientID%>").value = "USA";
    document.getElementById("<%=hdnCiudadSeleccionada.ClientID%>").value = "California";

});

//Repopula el combo de las ciudades cuando es cambiado el pais.
function cambiarCiudad() {
    var dropPais = document.getElementById("selectPais");
    //Vacia ciudad
    document.getElementById('selectCiudad').options.length = 0;
    //Repopula ciudad de acuerdo al pais
    print_state('selectCiudad', dropPais.selectedIndex);
    //Guarda Pais
    document.getElementById("<%=hdnPaisSeleccionado.ClientID%>").value = dropPais.value;
    //Guarda Ciudad
    guardarCiudad();
}

function guardarCiudad() {
    var dropCiudad = document.getElementById("selectCiudad");
    document.getElementById("<%=hdnCiudadSeleccionada.ClientID%>").value = dropCiudad.value;
} 
```

# mongodb - 基于文档的关系数据存储

> ID：11904480
> 
> 赞同：0
> 
> 时间：2012-08-10T15:09:31.627
> 
> 标签：mongodb, database-design, architecture, scalability, document-based-database

我应该将我的关系数据存储在 MongoDB 中吗？

鉴于我的独特情况（如下所述）的任何见解将不胜感激！与任何项目一样，我的资源极为有限。我希望以尽可能少的成本提高性能。:)

**背景**

1.  我正在开发一个具有广泛而复杂的数据模型的项目。
    1.  84 个主表
    2.  44 个视图进入辅助表
    3.  主要项目类型的 60 万个实例
    4.  500,000,000+ 元组支持 600k 主要项目
2.  该模型被很好地标准化，并且经过深思熟虑。
3.  许多项目已被非规范化以提高性能。
4.  我们的数据访问层使用 Hibernate for ORM。

**问题陈述**

Hibernate 将 84 个表 + 44 个视图连接在一起，将主数据项映射在一起（我将主数据项称为 THEObject）。这种结构非常昂贵（单个 Oracle 数据库节点）。组装 THEObject 及其子项可能需要**几分钟。**

THEObject 实例之间共享的数据非常少。共享的数据主要是只读的（用户数据之类的东西，对一般配置的引用......）

保存 THEObject 也非常昂贵。

作为一个附带项目，我创建了一组 bean 来表示 THEObject 的数据，将数据从昂贵的 THEObject 实例复制到 bean 中，然后使用 xstream 将 bean 序列化为 XML。从 THEObject 到 bean 的转换、bean 的序列化以及表示 bean 的 XML 的存储仅用了 26 毫秒。（在我们的关系表示上使用休眠将 THEObject 保存回来所需的 6 分钟还很远​​）。哦

我认为基于 Document 的数据库会更好地为我的应用程序提供服务，因为我使用的数据有 3 种主要块类型（思维集合），代表 THEObject 的块共享来自其他主要块的 2 个数据，但不共享THEObject 的其他实例中的任何它自己的数据。这将允许我将 THEObject 作为一个整体来阅读，而不会出现与规范化存储相关的连接或性能下降。

尽管它实际上是关系数据，但将我的数据存储在基于文档的数据库中是否合理？！

**相关阅读**

[为什么我应该使用基于文档的数据库而不是关系数据库？](https://stackoverflow.com/questions/441441/why-should-i-use-document-based-database-instead-of-relational-database)

[非关系型数据库设计](https://stackoverflow.com/questions/1189911/non-relational-database-design)

[MongoDB 与 Cassandra](https://stackoverflow.com/questions/2892729/mongodb-vs-cassandra)

[什么是 NoSQL，它是如何工作的，它有什么好处？](https://stackoverflow.com/questions/1145726/what-is-nosql-how-does-it-work-and-what-benefits-does-it-provide)

# mongodb - Amistad Mongoid Save 不会持续存在

> ID：11904483
> 
> 赞同：0
> 
> 时间：2012-08-10T15:09:42.403
> 
> 标签：mongodb, mongoid

我刚刚开始使用 Amistad 和 Mongoid，我发现 current_user.invite(@user) 没有保存到 Mongo。我已经在控制台和 Rails 应用程序中完成了此操作，我确定该方法确实有效，因为该方法返回 true，但数据不会持续存在。有没有其他人有这个问题？我的 mongo 数据库确实有效。我已经用它保存了各种数据，但 Amistad 朋友方法没有。

这是控制器动作：

```
def invite_friend
  @user = User.find params['id']
  res = current_user.invite(@user)
  current_user.last_name = 'hamilton123'
  current_user.save

  respond_to do |format|
    format.html 
    format.js{ render :js => "$('#friend_#{params['id']}').text('Pending')" }
  end
end 
```

这是运行 .invite() 后的一些日志输出。我还做了一个 current_user.save() 只是为了确保我可以看到 Mongo 输出一个保存

```
MONGODB yansn_development['system.namespaces'].find({})
MONGODB yansn_development['users'].find({:_id=>BSON::ObjectId('4f8b100dbf0d820513000007')}).limit(-1).sort([[:_id, :asc]])
MONGODB yansn_development['users'].find({:_id=>BSON::ObjectId('4f8b0fd2bf0d82055b000001')}).limit(-1).sort([[:_id, :asc]])
MONGODB yansn_development['users'].update({"_id"=>BSON::ObjectId('4f8b100dbf0d820513000007')}, {"$set"=>{"last_name"=>"hamilton123", "updated_at"=>2012-04-15 19:06:21 UTC}}) 
```

邀请（）方法不应该保存吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T02:16:58.130

根据 Amistad 的[来源](http://rubydoc.info/gems/amistad/0.7.5/Amistad/ActiveRecord/FriendModel/InstanceMethods#invite-instance_method)`self`，如果用户是或者如果用户已经与用户建立了友谊，该方法将返回 false ，方式如下：

```
def invite(user)
  return false if user == self || find_any_friendship_with(user)
  Friendship.new(:user_id => self.id, :friend_id => user.id).save
end 
```

我会检查您返回的用户是否`find`实际上是您期望的用户，并且与用户没有现有关系。

# javascript - 用茉莉花测试对象中的事件处理程序

> ID：11904486
> 
> 赞同：1
> 
> 时间：2012-08-10T15:09:46.867
> 
> 标签：javascript, event-handling, coffeescript, jasmine

我在 CoffeeScript ala [Spinejs](http://spinejs.com)中使用了一个简单的 MVC 模式。它允许我通过在实例化之前指定一个事件对象来添加事件侦听器：

```
class Controller extends Module
    @include Events

    eventSplitter: /^(\S+)\s*(.*)$/
    events: {}

    constructor: (view = '<div/>') ->
        @view = $(view)
        @delegate key, func for key, func of @events

    delegate: (key, func) ->
        match = key.match @eventSplitter
        if match[2] is ''
            @view.on( match[1], $.proxy(@[func], @) )
        else
            @view.on( match[1], match[2], $.proxy(@[func], @) ) 
```

快速解释 - 你传入一个选择器、元素或 html 字符串，这些字符串被分配给视图属性。然后委托方法接受一个事件对象并循环遍历并将事件侦听器分配给视图节点本身，或者将事件处理程序从子元素委托给视图节点：

```
class Con extends Controller
    events:
        'click' : 'parent'
        'mouseover span' : 'child'

    parent: (e) ->
        console.log('div was clicked')

    child: (e) ->
        console.log('span was moused over')

con = new Con('<div><span>test</span></div>')

con.view.trigger('click') // --> 'div was clicked'
con.view.find('span') // --> 'span was moused over' 
```

我正在努力用茉莉花测试这个。以下测试将通过：

```
expect( con.view ).toHandle('mouseover')
expect( con.view ).toHandle('click') 
```

这至少允许我测试是否设置了某种处理程序，但我想测试正在设置的实际处理程序。我试图监视事件处理程序，但它们似乎从未被调用。

```
spyOn(con, 'parent')
con.view.trigger('click')

expect( con.parent ).toHaveBeenCalled() // fails! 
```

我还试图窥探原型中的实际方法。

```
spyOn( Con.prototype, 'parent' )
con.view.trigger('click')

expect( Con.prototype.parent ).toHaveBeenCalled() // fails! 
```

如果我显式调用该方法，我可以通过测试：

```
con.parent();
expect( con.parent ).toHaveBeenCalled() // passes! 
```

我认为间谍在被事件执行时会失败，因为事件处理程序是如何通过 jQuery 'on' 方法引用的。因为它是一个函数，但它不是 con 对象上的实际方法。

任何帮助，将不胜感激。也欢迎任何一般测试建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T18:00:54.587

Jasmine 实际上有一种[`spyOn`方法](https://github.com/pivotal/jasmine/wiki/Spies)可以让您在不覆盖[System Under Test](http://xunitpatterns.com/SUT.html)的情况下执行此操作。

我承认没有运行此特定代码，但这是您的答案的重构，它使用`spyOn`并拆分了您的两个测试。

```
describe 'CRDGN.Controller', ->
  it 'should attach a click listener', =>
    clickSpy = spyOn(CRDGN.Controller, 'parent')
    controller = @_buildController()

    controller.view.trigger('click')

    expect(clickSpy).toHaveBeenCalled()

  it 'should attack a mouseover listener for <span>', =>
    mouseSpy = spyOn(CRDGN.Controller, 'child')
    controller = @_buildController()

    controller.view.find('span').trigger('mouseover')

    expect(mouseSpy).toHaveBeenCalled()

  _buildController: () ->
    new CRDGN.Controller('<div><span>test</span></div>') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T16:08:53.770

解决方案似乎是在对象之外定义间谍。我刚刚发现了创建裸间谍的 jasmine.createSpy() 方法，这正是我所需要的：

```
describe "Controller", ->
    clickSpy = jasmine.createSpy()
    mouseSpy = jasmine.createSpy()

    class Con extends CRDGN.Controller
        events:
            'click' : 'parent'
            'mouseover span' : 'child'

        parent: clickSpy

        child: mouseSpy

    con = new Con('<div><span>test</span></div>')

it "should attach listeners through an events object", ->
    con.view.trigger('click')
    expect( clickSpy ).toHaveBeenCalled()

    con.view.find('span').trigger('mouseover')
    expect( mouseSpy ).toHaveBeenCalled() 
```

# jquery - 如果 ModelState.IsValid 返回 true，则将在 jquery.dialog 中加载部分视图

> ID：11904487
> 
> 赞同：1
> 
> 时间：2012-08-10T15:09:47.067
> 
> 标签：jquery, asp.net-mvc

在我的 jquery 中，我可以调用 Post 操作。我的问题是，如果 ModelState.IsValid 返回要在 jquery.dialog 中加载的部分视图。我该怎么做？从过去4天开始一直在挣扎。请帮忙。

这是我的代码。我有一个帖子操作如下：

```
[HttpPost]
        public ActionResult Add(MyModel mj)
        {
            if (ModelState.IsValid)
            {
        mj.Id = mj.ModifyJob();
            }
            else
            {
                return new JsonResult() { Data = "error" };
            }
            return View(mj);
        } 
```

jquery如下：

```
<script type="text/javascript">
       $(function () {
           $('#new-value-link').click(function () {
               $.post('<%: Url.Action("Add","MyController") %>',
                $('#addform').serialize(),
                function (data) {
                    success(data);
                });     
               return false;
           });
       });
       function success(data) {
           if (data != "error") {
               var href = this.href;
               $('#dialog').dialog({
                   modal: true,
                   height: 700,
                   width: 900,
                   open: function (event, ui) {
                       $(this).load(href, function (result) {
                            $('#Preview-form').submit(function () {
                                $.ajax({
                                    url: this.action,
                                    type: this.method,
                                    data: $(this).serialize(),
                                    success: function (json) {
                                        $('#dialog').dialog('close');
                                        window.location = json.redirectTo;
                                    }
                                });
                                return false;
                            });
                       });
                   }
               });
           }
           else {
               alert('hi');
           }
           return;
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:29:13.110

你应该回来

```
return new ContentResult("error"); 
```

# sql - 指示 LINQ to Entities 生成 Oracle 兼容 SQL

> ID：11904494
> 
> 赞同：3
> 
> 时间：2012-08-10T15:10:04.527
> 
> 标签：sql, oracle, entity-framework, linq-to-sql, linq-to-entities

我有一个 linq 到实体查询（EF 4.3）

```
var query = from item in db.TableTest
            select item.VAL; 
```

翻译成这个 SQL 语句

```
SELECT
"Extent1"."VAL" AS "VAL"
FROM "dbo"."TEST_TABLE" "Extent1" 
```

数据库是**Oracle**。

当我执行查询时，我收到数据表不存在的消息。问题是（**“dbo”**）部分。如果我删除它并直接执行此查询（不是通过 LINQ，而是通过 oracleconnection 等）

```
SELECT
"Extent1"."VAL" AS "VAL"
FROM "TEST_TABLE" "Extent1" 
```

那么一切都好。我得到了价值。

**如何指示 Linq To Entities 输出与 Oracle 兼容的 SQL**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:16:08.527

假设您有一个实体模型，请确保您正确设置了 DDL 生成模板。

此外，您可以删除`dbo`数据库模式名称以匹配您的实际数据库。

![在此处输入图像描述](../Images/cee2da095fa46d9c65b56c4026c8d60b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:24:23.147

询问后不久，我找到了解决问题的方法

我有这个 POCO 课

```
[Table("TEST_TABLE")]
public class MyEntity
{
    [Key, Column("VAL")]
    public string key_valye { get; set; }
} 
```

生成的 sql 注入了“dbo”。当我将表属性更改为

```
 [Table("TEST_TABLE", Schema="ATT")] 
```

这会生成“ATT”。“TEST_TABLE”，这实际上是正确的 sql。

# c++ - std::function 复制参数？

> ID：11904497
> 
> 赞同：10
> 
> 时间：2012-08-10T15:10:11.277
> 
> 标签：c++, c++11, std-function

我的代码：

```
#include <iostream>
#include <functional>
using namespace std;

struct A {
  A() = default;
  A(const A&) {
    cout << "copied A" << endl;
  }
};

void foo(A a) {}

int main(int argc, const char * argv[]) {
  std::function<void(A)> f = &foo;
  A a;
  f(a);
  return 0;
} 
```

我在控制台上看到两次“复制的 A”。为什么对象被复制两次，而不是一次？我怎样才能正确防止这种情况？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T15:33:29.937

特`std::function<R(Args...)>`化有一个调用操作符，声明如下：

```
R operator()(Args...) const; 
```

在您的情况下，这意味着操作员需要`A`. 因此，`f(a)`由于按值传递语义，调用会产生副本。但是，底层`foo`目标也按值接受其参数。`f`因此，当参数 to被转发到时，将会有第二个副本`foo`。

这是设计使然，事实上，如果`A`有一个移动构造函数，那么只有一个副本后面跟着一个移动构造——调用`f(std::move(a))`只会导致两个移动构造。如果您觉得两个副本太多，您需要重新考虑是否应该同时使用`foo`and来代替 eg ，和/或是否可以有一个合理的 move 构造函数。`f``A``A const&``A`

您也可以`std::function<void(A const&)> f = &foo;`不修改`foo`. 但是您应该保留它，以防修改`foo`超出您的控制范围，和/或使`A`廉价移动可构造不是一种选择。[在 C++11 中按值传递](https://stackoverflow.com/questions/7592630/is-pass-by-value-a-reasonable-default-in-c11/7592741)没有错，所以我建议要么两者都应该采用`A`，要么都应该采用`A const&`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:17:20.653

它被复制是因为您按值传递它。您可以通过将其作为 const 引用传递来避免所有副本。

# jquery - 使用 addClass 自定义 JQUery UI 元素

> ID：11904499
> 
> 赞同：1
> 
> 时间：2012-08-10T15:10:13.150
> 
> 标签：jquery, css, jquery-ui

我通过为其句柄指定自定义样式来扩展 JQuery UI 滑块。

代码如下：

JavaScript：

```
var slider = $("#container").slider();
var handle = $(".ui-slider-handle", slider); 
```

那我在做

```
handle.css("backgroundColor","yellow"); 
```

哪个有效。

但是当我创建一个类时：

```
.yellow
{
   background-color: yellow;
} 
```

并使用

```
 handle.addClass("yellow"); // works! 
```

它没有捡起它。让我澄清一件事 - CSS 位置是有效的，并且我的自定义 CSS在 JQuery CSS**之后**应用，如果我通过编写来覆盖自定义 CSS 中的 JQuery 原始样式：

```
.ui-slider-horizontal .ui-slider-handle 
{ 
   background-color: yellow;    
} 
```

它再次起作用。它只是 addClass 似乎没有得到尊重。谁能建议我如何让它与 addClass 一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:14:54.573

我认为您对[css 特异性](http://css-tricks.com/specifics-on-css-specificity/)有疑问，这意味着您的课程`.yellow`的特异性低于`.ui-slider-horizontal .ui-slider-handle`

一种解决方案是为黄色添加特异性，这样它就不会被覆盖

```
.ui-slider-horizontal .ui-slider-handle.yellow {
background-color: yellow;
} 
```

# java - 从 RS-232 端口读取字符串的最简单方法？

> ID：11904500
> 
> 赞同：0
> 
> 时间：2012-08-10T15:10:17.460
> 
> 标签：java

我有一个定制的板，它从各种传感器读取不同的指标（例如摄氏度的温度，巴的压力），并通过 RS-232 端口将它们作为带有“通道”（传感器的助记符）的字符串和实际阅读例如“a14.23”或“b33.0”。

我需要在 java 中读取和解析该信息并将其发送到 JMS 队列以便在另一个应用程序中进行进一步处理。要求是它必须在 Windows XP/7 上工作。

我正在阅读 Oracle Java Communications API 仅针对 Linux/Solaris 系统实现，因此该项目将其丢弃。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-30T03:59:03.190

我使用了旧版本的[Java Communications API](http://www.oracle.com/technetwork/java/index-jsp-141752.html)。

# extension-methods - 如何为嵌入式 IronPython 脚本启用 LINQ

> ID：11904503
> 
> 赞同：1
> 
> 时间：2012-08-10T15:10:29.133
> 
> 标签：extension-methods, ironpython

我的应用程序可以通过用户提供的 IronPython 脚本进行扩展。

*   首先，我创建一个新的`ScriptScope`.
*   使用该脚本范围，我运行了一个简短的设置脚本来执行一些方便的导入。
*   最后，我在准备好的范围内运行所有用户脚本。

安装脚本如下所示：

```
import clr
import System
from System import Exception
from System import Math
clr.ImportExtensions(System.Linq.Enumerable) 
```

这个想法是用户脚本可以使用常见的类型，例如`Math`或`Exception`不必先导入它们。

我还希望 LINQ 开箱即用，因此我将最后一行添加到设置脚本中。但是，虽然常规导入工作正常，但扩展导入却不行。据我所知，常规导入成为脚本范围的一部分，因此可用于在同一范围内运行的任何后续脚本。然而，扩展导入的工作方式似乎有所不同。

所以我的问题是：我执行的脚本如何在不必显式导入扩展方法的情况下使用 LINQ？

注意：有很多脚本，其中许多只包含一个表达式。所以我宁愿避免使用扩展导入自动为每个脚本添加前缀的性能损失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-24T14:05:37.550

在 IL 中查看 Reflector 或 ILSpy 中的 LINQ 语句。LINQ 是编译器的魔法，它把语句变成一堆类和方法调用。你永远不会让 LINQ 工作。您最好的选择是为您执行一些与 LINQ 相关的工作的包装类。专注于您尝试提供的实际用例并提供帮助方法来完成工作。

# html - 这应该很简单。我可以调整单个列表项的边距底部吗？

> ID：11904508
> 
> 赞同：0
> 
> 时间：2012-08-10T15:10:40.533
> 
> 标签：html, css

我创建了一个包含 CSS 列表的 HTML 表单。但是，我想在“姓氏”字段和以下 HTML 表单的“确认”字段之后添加 10 个像素左右。这可能吗？

```
<form>
<ul>
<li><label for="firstName">First Name:</label></li>
<li><input type="text" name="firstName" size="35" id="firstName"/></li>
<li><label for="lastName">Last Name:</label></li>
<li><input type="text" name="lastName" size="35" id="lastName"/></li>

<li><label for="passid">Password:</label></li>
<li><input type="password" name="password" size="35" id="password"/></li>
<li><label for="confirmation">Confirmation:</label></li>
<li><input type="password" name="confirmation" size="35"id="confirmation"/></li>

<li><label for="email">Email:</label></li>
<li><input type="text" name="email" size="35" id="email"/></li>
</ul>
</form> 
```

我做了几个 CSS 和 HTML 修改，如下所示，但没有任何效果：

```
form ul li.extra
{
    margin-bottom:15px;
}

<li class="extra"><label for="lastName">Last Name:</label></li>
<li class="extra"><input type="text" name="lastName" size="35" id="lastName"/></li> 
```

我也尝试过更简单的东西，比如 HTML 换行符，但没有一个对我的页面布局产生任何影响。

是否可以调整单个列表项的 margin-bottom 属性？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:15:29.633

在 li 上设置一个类：

```
HTML:

<ul>
   <li>1</li>
   <li>2</li>
  <li>3</li>
  <li class="extra">4</li>
  <li>5</li>
</ul> 
```

CSS：

```
ul li.extra{
    margin-top:15px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:11:52.263

这并不理想，但一种快速的方法是设置您感兴趣的 LI 的内联样式：

```
<li style="margin-bottom: 15px;">Whatever</li> 
```

但更好的方法是添加类，这显然更容易应用于其他单个 LI 标记：

```
li.single_li {
    margin-bottom: 15px;
}

<li class="single_li">Whatever</li> 
```

如果它不起作用，它可能被父类/样式覆盖，请在您的 css/样式中尝试以下操作：

**CSS**

```
li.single_li {
    margin-bottom: 15px !important;
} 
```

**排队**

```
<li style="margin-bottom: 15px !important;">Whatever</li> 
```

添加**!important**确保它被应用并且不会被父类覆盖。

添加[了内联样式的 jsFiddle 示例](http://jsfiddle.net/zvBgS/)

# html - 子 div 标签的垂直对齐

> ID：11904512
> 
> 赞同：-2
> 
> 时间：2012-08-10T15:10:54.220
> 
> 标签：html, css

> **可能重复：**
> [div中元素的垂直对齐](https://stackoverflow.com/questions/79461/vertical-alignment-of-elements-in-a-div)

我有 div 标签，在他身上我有 img 标签，div 标签尺寸是静态的：200x200，img 尺寸总是小于 200px，但具体如何，我事先不知道。我希望 img 始终是 div 标签的中心，在我制作的水平方向上，但是如何使它成为 vertikal ？

```
 <div style="width: 200px; height: 200px; background-color: #090; text-align: center; ">
        <img src="pic.jpg">
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:15:40.880

看看[这个 JSFIDDLE](http://jsfiddle.net/amiregelz/ZfHmL/3/)

您可以使用 CSS [calc()](https://developer.mozilla.org/en-US/docs/CSS/calc?redirectlocale=en-US&redirectslug=CSS/-moz-calc)函数在 div 内垂直居中图像：

```
position: relative;
top: -webkit-calc(50% - []px )    /* [] = half the image height) */;  
top: calc(50% - []px)    /* [] = half the image height) */; 
```

# jquery - 关闭 acoordion div 时停止播放 YouTube 视频

> ID：11904513
> 
> 赞同：0
> 
> 时间：2012-08-10T15:11:04.767
> 
> 标签：jquery, css, video, html, youtube

> **可能重复：**
> [隐藏 iframe 时如何暂停 YouTube 播放器？](https://stackoverflow.com/questions/8667882/how-to-pause-a-youtube-player-when-hiding-the-iframe)

我有一个播放 youtube 视频的 jquery 手风琴。关闭图层时如何停止播放 youtube 视频？它继续在后台播放。

我想我只需要在代码中添加一些微小的东西，但不幸的是我完全困惑了。

这是我的示例和代码： [http ://defroster.99k.org/youtube_div.htm](http://defroster.99k.org/youtube_div.htm)

感谢一百万的帮助！马库斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:21:33.943

```
$("#the-accordion").accordion({
    changestart: function(){
        player.stopVideo();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:44:18.620

试试这个：

```
$(document).ready(function(){
    $(".accordion2 h3").eq(40).addClass("active");
    $(".accordion2 p").eq(40).show();
    $(".accordion2 h3").click(function(){
        var video = $(".accordion2 h3.active").next().children();
        var src = video.attr("src");
        video.attr("src","");
        video.attr("src",src);
        $(this).next("p").slideToggle("slow")
        .siblings("p:visible").slideUp("slow");
        $(this).toggleClass("active");
        $(this).siblings("h3").removeClass("active");
    });
});​ 
```

这里的例子：http: [//jsfiddle.net/r8h7t/20/](http://jsfiddle.net/r8h7t/20/)

# css - 将附加图像插入复选框元素 JQuery Mobile

> ID：11904518
> 
> 赞同：3
> 
> 时间：2012-08-10T15:11:20.393
> 
> 标签：css, html, jquery-mobile

我正在使用 JQuery Mobile 构建一个手机应用程序，并且我想通过一个复选框元素列表来实现视觉效果。基本上我想在以下位置的每个复选框元素的主体中插入一个小图标（图像）：

![在此处输入图像描述](../Images/cd4be6cca9469e97e49b45c1dbc5c6b4.png)

是否可以使用 JQuery Mobile 实现这一点？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:21:52.360

类似的东西？ [http://jsfiddle.net/KADqA/23/](http://jsfiddle.net/KADqA/23/) 只需为图像添加一些样式，就可以了。

（在这种情况下，javascript 并不是很有用。是关于如何在该字段中添加链接的示例：http: [//jsfiddle.net/KADqA/](http://jsfiddle.net/KADqA/)）

# c++ - C ++：除了虚函数之外，“未定义对'typeinfo for [class name]'的引用”的原因是什么

> ID：11904519
> 
> 赞同：10
> 
> 时间：2012-08-10T15:11:20.927
> 
> 标签：c++

其中一些错误是通过修改解决的

```
 virtual void draw(); 
```

至

```
 virtual void draw() {}; 
```

但是，这些错误的其他原因可能是什么？，除了虚拟功能.. 什么可能是以下错误的原因..

```
 /tmp/cciGEgp5.o:(.rodata._ZTI14CustomXmppPump[typeinfo for CustomXmppPump]+0x18): 
  undefined reference to `typeinfo for XmppPump' 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-02-15T00:36:18.120

如果您使用 RTTI (-frtti) 进行编译，请确保您的依赖库也使用它编译，而不是 -fno-rtti。否则，当您对使用 -fno-rtti 编译的类进行子类化或使用 dynamic_cast 时，您将收到 typeinfo 错误。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-10T15:28:35.347

在 GCC 中，第一个非内联虚方法用于确定创建 vtable 和 typeinfo 对象的翻译单元。如果您随后不定义该方法，则会创建您看到的错误，因为它希望您在某处定义该方法，并且正在等待该定义为该类发出 vtable 和 typeinfo 的输出。

[http://gcc.gnu.org/onlinedocs/gcc/Vague-Linkage.html](http://gcc.gnu.org/onlinedocs/gcc/Vague-Linkage.html)

当您将 的声明更改`virtual void draw();`为 的内联定义时`virtual void draw() {};`，它会选择一个不同的函数来发出 vtable。

# asp.net-mvc-4 - 如何在 mvc4 中呈现隐藏的输入控件？

> ID：11904520
> 
> 赞同：0
> 
> 时间：2012-08-10T15:11:24.040
> 
> 标签：asp.net-mvc-4, data-annotations

`HiddenInput`在MVC3 中，有一个`System.Web.Mvc`. 但是在Mvc4中，这个属性已经不存在了。

因此，没有办法用MVC3的方式写注解：

```
[HiddenInput(DisplayValue = false)]
public int SubmittedByUserId { get; set; } 
```

谁能告诉我如何在 MVC4 的视图模型中使用数据注释来呈现隐藏的输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-07T19:29:01.233

在开始使用之前，您必须包含**“System.Web.Mvc”命名空间。**

# regex - RegEx 移动和更改文件名

> ID：11904527
> 
> 赞同：3
> 
> 时间：2012-08-10T15:11:43.483
> 
> 标签：regex, bash

我正在尝试在此目录和格式中移动很多文件：

```
/1.12.268/1.12.268_Hi_3D.jpg
```

到这个目录和格式：

```
/1.12.0268/1.12.0268_Hi_3D.jpg
```

我设法运行了一个为我创建了所有新文件夹的正则表达式：

```
ls 1* | find . -type d | awk '{print("mkdir "$1)}' | sed 's/[0-9][0-9][0-9]*/0&/2'
```

但是我不知道使用什么正则表达式来创建一个`mv`将所有文件移动并重命名到新文件夹的语句？

这和我来的一样接近，但是文件夹被颠倒了，文件没有被重命名。

```
ls 1* | find . -type f | awk '{print("mv "$1" "$1)}' | sed 's/[0-9][0-9][0-9]*/0&/2'
```

我得到这个输出：

```
mv ./1.12.0269/1.12.269_Low_Tech.gif ./1.12.269/1.12.269_Low_Tech.gif
mv ./1.14.0410/1.14.410_hi_3d.jpg ./1.14.410/1.14.410_hi_3d.jpg
mv ./1.14.0410/1.14.410_hi_tech.jpg ./1.14.410/1.14.410_hi_tech.jpg
mv ./1.14.0410/1.14.410_low_3d.png ./1.14.410/1.14.410_low_3d.png
mv ./1.14.0410/1.14.410_low_tech.png ./1.14.410/1.14.410_low_tech.png
mv ./1.14.0845/1.14.845_hi_3d.jpg ./1.14.845/1.14.845_hi_3d.jpg
mv ./1.14.0845/1.14.845_hi_tech.jpg ./1.14.845/1.14.845_hi_tech.jpg
mv ./1.14.0845/1.14.845_low_3d.png ./1.14.845/1.14.845_low_3d.png
mv ./1.14.0845/1.14.845_low_tech.png ./1.14.845/1.14.845_low_tech.png
```

当我实际上想要这个时：

```
mv ./1.12.269/1.12.269_Low_Tech.gif ./1.12.0269/1.12.0269_Low_Tech.gif
mv ./1.14.410/1.14.410_hi_3d.jpg ./1.14.0410/1.14.0410_hi_3d.jpg
mv ./1.14.410/1.14.410_hi_tech.jpg ./1.14.0410/1.14.0410_hi_tech.jpg
mv ./1.14.410/1.14.410_low_3d.png ./1.14.0410/1.14.0410_low_3d.png
mv ./1.14.410/1.14.410_low_tech.png ./1.14.0410/1.14.0410_low_tech.png
mv ./1.14.845/1.14.845_hi_3d.jpg ./1.14.0845/1.14.0845_hi_3d.jpg
mv ./1.14.845/1.14.845_hi_tech.jpg ./1.14.0845/1.14.0845_hi_tech.jpg
mv ./1.14.845/1.14.845_low_3d.png ./1.14.0845/1.14.0845_low_3d.png
mv ./1.14.845/1.14.845_low_tech.png ./1.14.0845/1.14.0845_low_tech.png
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:21:31.803

是否使用`rename`选项？它基本上是为这种东西制作的。

如果是这样，`rename -n 's/[0-9][0-9][0-9]/0$&/g'`应该为你工作。（`-n`仅用于调试，删除它以进行实际重命名）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T17:02:39.880

我有肮脏的方式来做到这一点。试试看。

```
ls 1* | find . -type f | awk '{print("mv "$1" "$1)}' | sed 's/[0-9][0-9][0-9]*/0&/6' | sed 's/[0-9][0-9][0-9]*/0&/8' 
```

# sharepoint - 外部列表和外部内容类型将持久性错误传回给用户

> ID：11904530
> 
> 赞同：0
> 
> 时间：2012-08-10T15:11:47.760
> 
> 标签：sharepoint, sharepoint-2010, bcs, sharepoint2010-bcs

我在我的 Sharepoint 2010 安装中创建了一个外部内容类型，它通过 WCF 服务从远程数据库获取其数据。我已经毫无问题地实施了所有 CRUD 操作。

我在 Visual Studio 2010 中创建了一个列表实例，并向该实例添加了一个自定义新表单，因此当用户在浏览列表时选择新项目时，我的自定义表单就是使用的那个。这很好用。但是，当用户输入新项目的数据并按保存时，我需要能够将外部系统可能出现的任何错误返回给用户。

我无法弄清楚如何在我的自定义表单后面的代码中获取事件或处理 BDCModel，如果例如 WCF 服务超时或远程数据库对某些人不可用，这将允许我发回错误原因。

Governance 已声明不允许我们使用 Sharepoint Designer 或 InfoPath 表单，我必须在 Visual Studio 中执行此操作。

任何人都可以指出拦截从 BDCModel 创建和更新方法返回的错误并通过我的自定义表单后面的代码将它们发回给用户的教程，还是我必须自己使用完全自定义的表单来实现整个保存过程，覆盖保存?

我宁愿不必那样做。我还被告知，除非绝对无法使用 OOTB 外部列表和自定义表单来解决此问题，否则我不能使用自定义 Web 部件来通过客户端对象模型来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T23:09:00.953

这是权限（始终是权限）-后端用户（可能是应用程序池帐户）没有权限-检查系统应用程序事件日志，然后检查安全日志。SharePoint ULS 日志也可能有所帮助。

# ffmpeg - FFMPEG - 如何在删除连续重复的帧时将帧提取为图像

> ID：11904531
> 
> 赞同：5
> 
> 时间：2012-08-10T15:11:48.827
> 
> 标签：ffmpeg, duplicate-removal, sequential, image-extraction

有什么方法（通过脚本或最好是调用我错过的 ffmpeg 中的某些参数）从 avi 文件中提取帧并**忽略顺序重复的帧**，从而能够浏览仅查看增量/更改的图片？

我经常需要记录工作中的会议，而且很多时候，当我们通过电话交谈时，我正在查看的客户端屏幕并没有改变。会议结束后，我需要将这些图像用作我们文档和规范收集的一部分。

我知道我可以只输出每一帧并通过任何给定的重复文件删除实用程序运行它们，但这会删除所有重复的帧。所以，如果提取的帧是这样的：

A，A，A，B，B，B，B，C，C，A，A，C，C，C，B，B，B ...

通过典型的重复文件删除器运行它们，我会得到：A、B、C

**我想要的是：A、B、C、A、C、B**

我目前用来提取图像的命令是：

ffmpeg.exe -i file.avi -ss 0 -sameq -f image2 -r 1 images%5d.png

我事先得到了每一帧（从上面删除了 -r 1），但这会产生太多的帧来处理，因为这些在线会议可能会持续数小时，所以现在，我每秒从文件中获取一帧。

基于 Windows 的解决方案会更可取，但是，我相信其他人会对其他平台上的解决方案感兴趣（如果有的话）。

非常感谢任何朝着正确方向的解决方案或观点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T19:06:31.223

你试过这个`-vsync 0`选项吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-23T21:28:16.857

运行 ffmpeg 后，运行重复文件查找器。

Linux：`fdupes -N -d *.png`（[http://code.google.com/p/fdupes/](http://code.google.com/p/fdupes/)）。

对于 Windows 等数十种类似的工具，请参阅[http://en.wikipedia.org/wiki/List_of_duplicate_file_finders](http://en.wikipedia.org/wiki/List_of_duplicate_file_finders)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-19T17:43:56.703

您可以通过`mpdecimate`视频过滤器（后跟`setpts`过滤器以获得正确的时间）来达到它。
使用此选项：

```
-vf mpdecimate,setpts=N/FRAME_RATE/TB 
```

也许它不适用于您的原始命令，您需要使用它首先将原始视频转换为没有重复帧的视频：

```
ffmpeg.exe -i file.avi -vf mpdecimate,setpts=N/FRAME_RATE/TB outfile.avi 
```

然后使用`outfile.avi`生成图像序列。

（在需要的情况下，过滤器`mpdecimate`可以通过其选项进行调整，`hi`但默认值可以正常工作。）`lo``frac`

# ios - 按下表格单元格时将视图加载到导航视图控制器中

> ID：11904537
> 
> 赞同：0
> 
> 时间：2012-08-10T15:12:13.290
> 
> 标签：ios, uitableview, view, uinavigationcontroller, storyboard

我有一个 iOS 应用程序正在使用情节提要（以及 ARC）。现在在该应用程序中，我有一个选项卡视图，其中一个选项卡指向 UINavigationController 中的表视图。到目前为止，加载视图 100% 由故事板中的 segue 处理。现在在表格视图中，我有一些以编程方式创建的单元格，我希望它们指向不同的视图（也将在 UINavigationController 中）。现在它们总是导致相同的视图，只需在按下时传递不同的信息（我已经处理过）。问题是，我无法在情节提要中做到这一点，因为单元格是以编程方式创建的......

那么有没有办法使用故事板来做到这一点？如果没有，我如何以编程方式完成此操作？

附上一张图片，使故事板的组织更清晰。 ![在此处输入图像描述](../Images/495d6b195cf0fb3ea86ffcec8e2cd1ba.png)

感谢您的任何支持！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:28:08.723

在两个控制器之间的情节提要中创建一个推式转场并为其命名。当用户选择一个单元格时，使用`performSegueWithIdentifier:sender:`触发转换。

# c# - 如何在 javascript 或 jquery 中调用基于 asp.net 3.5 soap xml 的 web 服务？

> ID：11904539
> 
> 赞同：0
> 
> 时间：2012-08-10T15:12:17.653
> 
> 标签：c#, javascript, jquery, json, web-services

我是 jquery 的新手，并试图在 jquery 中使用 asp.net 3.5 制作的 web 服务，但我不知道为什么我不能使用它。我在互联网上找到的所有示例都与我正在做的相同，但我不知道代码发生了什么，

有人可以帮帮我吗？

这是我的javascript代码，

```
var soapMessage =
    '<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"> \
    <soap:Body> \
    <test xmlns="http://tempuri.org/"> \
    <param>this is a test parameter</param> \
    </test> \
    </soap:Body> \
    </soap:Envelope>';

    $.ajax({
        url: "http://localhost:50575/Service1.asmx?op=test",
        type: "POST",
        dataType: "xml",
        data: soapMessage,
        complete: hi,
        error: function (a, b, c) {
            alert("error");
        },
        contentType: "text/xml; charset=\"utf-8\""
    });

    function hi(xmlHttpRequest, status) {

        alert($(xmlHttpRequest.responseText).text());

        alert($(xmlHttpRequest.responseXML).find('Mymessage').text());

    } 
```

这是服务器端代码

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
[System.Web.Script.Services.ScriptService]
public class Service1 : System.Web.Services.WebService
{

    [WebMethod]
    public message test(string param)
    {
        message mymsg = new message();
        mymsg.head = "message head";
        mymsg.Mymessage = "Test string with param " + param;
        return mymsg;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:19:06.427

传递给错误处理程序的第一个对象应该包含一些有用的信息。尝试在您使用的任何调试工具中“扩展” a 。不要只是“提醒”它的价值。

具体来说，寻找`a.status`和`a.responseText`。这应该让您对正在发生的事情有一个很好的了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:03:18.453

我建议你试试[Fiddler](http://www.fiddler2.com/fiddler2/)，它是一个很棒的网络调试工具，应该可以帮助你找出你遇到的问题。

# c# - 隐藏和显示由 Systems.Diagnostics.Process 启动的程序

> ID：11904541
> 
> 赞同：0
> 
> 时间：2012-08-10T15:12:24.770
> 
> 标签：c#, .net, process

以下代码是我启动程序的方式：

```
System.Diagnostics.Process fooProgram;
fooProgram = System.Diagnostics.Process.Start("foo.exe"); 
```

现在我知道您可以设置 StartInfo 参数以隐藏程序运行，但是有什么方法可以隐藏它并在处理过程中将其恢复，因为我只想向用户显示某些屏幕，然后我希望它自动隐藏自己当信息显示时。我希望有像 fooProgram.Show() 和 fooProgram.Hide() 这样简单的东西，但它似乎不是那么简单。

只需将其发送到其他程序后面并将其重新聚焦也足够了，但这似乎也不在可用操作列表中。

正在启动的程序是一个 .NET 4 形式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:20:34.453

我认为你不能在 .NET 中做到这一点——你需要使用互操作。

查看这些功能：

*   [查找窗口](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633499%28v=vs.85%29.aspx)
*   [展示窗口](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633548%28v=vs.85%29.aspx)
*   [设置前景窗口](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633539%28v=vs.85%29.aspx)
*   [发信息](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950%28v=vs.85%29.aspx)

因此，您将用于`FindWindow()`获取窗口句柄，然后您将在该句柄上执行其他功能。在将这些函数暴露给 C# 方面，请查看这个很棒的互操作网站：[pinvoke.net](http://www.pinvoke.net/)

此外，而不是`HWND`使用`IntPtr`.

# html - HTML 5 绘图线不起作用

> ID：11904542
> 
> 赞同：0
> 
> 时间：2012-08-10T15:12:24.520
> 
> 标签：html, canvas, line

我已经在这个网站和许多其他网站上搜索过这个问题的答案，但是根据每个网站（包括这个网站和 w3schools），以下应该可以使用 HTML5 中的画布画一条线。

```
var c=document.getElementById("drawBox");

var ctx=c.getContext("2d");

ctx.strokeStyle=document.getElementById("lineColor").value;

ctx.fillStyle=document.getElementById("fillColor").value;

ctx.lineWidth=document.getElementById("lineWidth").value;

ctx.beginPath();

ctx.moveTo(x1, y1);

ctx.lineTo(x2, y2);

ctx.stroke(); 
```

请记住，以上几行是我的代码片段，而不是下面的完整代码本身。

我正在尝试为我的作业编写一个简单的绘图程序，但由于某种原因（并且我已经测试了不同的方法）它根本不会画线。它不会抛出任何错误，只是不会画线。我正在使用谷歌浏览器（据我了解，您可以完全信任使用 html5 的唯一浏览器）。我已经测试了下面的代码，以确保逻辑分支实际上正在执行。事实上，一切都执行得很完美，直到实际的 ctx.stroke(); 功能。同样，它不会出错，但它根本不会画线。mouseup 和 mouseout 功能也可以正常工作，因为我使用其他我知道可以工作的代码对其进行了测试。以下是我正在使用的代码：

这是修改后的代码（尽管到目前为止所有的帮助都很好，但仍然没有画出来）

* * *

```
 $(document).ready(function (){
///////////////////////////////////////////

    var c=document.getElementById("drawBox");
    var ctx=c.getContext("2d");
    var x=0;
    var y=0;
    var position="";
    var rangeValue=1;
    var x1=0;
    var y1=0;
    var startDraw=false;
    var x2=0;
    var y2=0;

   $('#drawBox').mousemove(function (){
        x=window.event.clientX;
        y=window.event.clientY;

        position=x + ", " + y;

        document.getElementById("check").innerHTML=position;
    });

   $("#lineWidth").mousemove(function (){
   rangeValue = document.getElementById("lineWidth").value;
   $("#rangeValueContainer").html(rangeValue);
  });

  $("#drawBox").mouseout(function (){
     startDraw=false;
  });

   $("#drawBox").mousedown(function (){
        startDraw=true;
        x1=window.event.clientX;
        y1=window.event.clientY;
        ctx.strokeStyle=document.getElementById("lineColor").value;
        ctx.fillStyle=document.getElementById("fillColor").value;
        ctx.lineWidth=document.getElementById("lineWidth").value;
        ctx.moveTo(x1, y1);
        });
        ///
    $("#drawBox").mouseup(function (){
           if (startDraw)
           {
                x2=window.event.clientX;
                y2=window.event.clientY;
                //$("p").html(document.getElementById("fillColor").value);
                ctx.lineTo(x2, y2);
                ctx.stroke();
                startDraw = false;
           }
    });

            ///

        /*if (document.getElementById("shapeSelect").value == "line")
        {
            $("#drawBox").mouseup(function (){
                x2=window.event.clientX;
                y2=window.event.clientY;
                //$("p").html(document.getElementById("lineColor").value);
                ctx.lineTo(x2, y2);
                ctx.stroke();
            });
        }

        if (document.getElementById("shapeSelect").value == "square")
        {
            $("p").html(document.getElementById("fillColor").value);
        }

        if (document.getElementById("shapeSelect").value == "circle")
        {

        }
    }); */

    $("#eraseBtn").click(function (){
        ctx.save();
        ctx.setTransform(1, 0, 0, 1, 0, 0);
        ctx.clearRect(0, 0, ctx.width, ctx.height);
        ctx.restore();
    });
}); 
```

另外，有些网站说要使用，有些网站说要`beginPath()`使用`beginPath()`and `closePath()`，而其他网站（即 w3schools）也不说要使用？他们有必要吗？他们的目的是什么？我是否需要它们，或者在某些情况下？我必须让这个程序最后也画出正方形和圆形。

任何帮助将不胜感激。

抱歉，如果这篇文章有点草率，我试过了，但这是我的第一篇文章，我不认为这个网站的部分识别出某些东西是代码，正在使用 jquery。我不得不手动输入很多换行符，只是为了让它看起来和它一样糟糕 XD

此外，可能很重要的一点是，我已经（就像我在测试之前总是做的那样）清除了缓存，甚至总是使用 ctrl+f5 来忽略加载时的缓存。

谢谢

好的，这是 HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

  <head>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Canvas Drawer</title>
    <base href="index.htm"/>
    <link rel="shrotcut icon" href="/paintbrush.ico" type="image/x-icon" />
    <link href="_Styling.css" rel="stylesheet" type="text/css" media="screen" />
    <script type="text/javascript" src="jquery.1.7.2.js"></script>
    <script type="text/javascript" src="_Operation.js"></script>
  </head>
  <body>
    <table id="tableContainer">
        <tr>
            <td colspan="2">
                </br>
                <span id="programTitle">
                  Painter 0.0
                </span></br>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <canvas id="drawBox">Your browser does not support the HTML5 canvas tag.</canvas>
            </td>
        </tr>
        <tr>
            <td style="text-align: left;">
                <span>
                    Cursor Position:
                </span>
            </td>
            <td style="text-align: right;">
                <span id="checkPosition">
                  <span id="check">0, 0</span>
                </span>
            </td>
        </tr>
    </table>
    <p>
        Draw:&nbsp;&nbsp;
        <select id="shapeSelect" value="line">
            <option value="line">Line</option>
            <option value="square">Square</option>
            <option value="circle">Circle</option>
        </select>
    </p>
    <p>
        Select Line Color:&nbsp;&nbsp;<input type="color" id="lineColor"/>
    </p>
    <p>
        Select Fill Color:&nbsp;&nbsp;<input type="color" id="fillColor"/>
    </p>
    <p>
        <span style="text-decoration: underline;">Line Width:</span></br>
        <input type="range" id="lineWidth" min="1" max="30" value="10"/></br>
        <span id="rangeValueContainer">10</span></br>
    </p>
    <p>
        <input id="eraseBtn" type="button" value="Erase"/>
    </p>
  </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:47:20.673

[你对范围](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope)有问题。

将所有脚本移到一个下`$(document).ready()`，

IE，

```
$(document).ready(function (){

    var c=document.getElementById("drawBox");
   ...
   $('#drawBox').mousemove(function (){
   ...
   });

   etc.

}); 
```

通过将每个代码片段包围在一个单独的`function(){}`块中，您可以隔离其中的变量。

它也看起来好像你的画布没有任何大小。尝试设置它的大小，

```
<canvas id="drawBox" width="200px" height="200px">Your browser does not support the HTML5 canvas tag.</canvas> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T20:24:35.080

好的，这就去。首先，永远不要假设你的代码是正确的。如果它不起作用，则您的代码显然不正确。在这种情况下，它不是错误。您当前的实现有两点错误：

1.  你的定位很差。我有一个偷偷摸摸的怀疑，你的线是不可见的，因为它被渲染远离画布。

2.  您需要使用`.beginPath()`， `.closePath()`这将有助于防止路径图中出现不可预知的行为。

**解决方案**问题是您在css中定义画布的尺寸，而不是画布元素本身。

**工作解决方案** [http://jsfiddle.net/crbHg/9/](http://jsfiddle.net/crbHg/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T16:08:49.023

您的绘图是正确的，但有两个问题 -

*   您添加了几个单独的 $(document).ready 函数，每个函数都有单独的范围，这就是为什么您的变量都没有幸存的原因

*   您没有使用 jQuery 事件对象来获取客户端位置 - 请参阅[jquery api](http://api.jquery.com/mousedown/)

这是一个工作版本的[jsfiddle](http://jsfiddle.net/gecfj/)

# facebook - 您可以使用 Facebook Graph API 将照片发布到品牌帐户以及用户帐户吗？

> ID：11904547
> 
> 赞同：0
> 
> 时间：2012-08-10T15:13:03.180
> 
> 标签：facebook, facebook-graph-api, oauth, oauth-2.0

我正在做一个拍摄照片的项目，用户可以在 Facebook 上分享他们的照片。我们将使用 oAuth 和 FB Graph API 将照片和标题发布到用户的时间线。客户刚刚请求也将其发布到他们（客户的）相册中。因此，当用户提交照片时，它会发布到用户的时间线以及客户​​的时间线/相册。这个双重帖子（到两个不同的帐户）可能吗？那不是要求客户端也通过 oAuth 登录吗？此外，只要应用程序具有将发布到两个不同地方的免责声明，是否存在任何 FB 法律/法规问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:28:16.907

用户的条目是该用户的应用相册的新照片。我/照片

但是进入您的客户页面的条目......我认为人们不能做其他人或页面的身份证/照片。（值得一试）

您必须坚持使用 id/feed 并可能包含指向图像主机的链接。

# joomla - 购物车在 15 件商品后清空

> ID：11904548
> 
> 赞同：0
> 
> 时间：2012-08-10T15:13:04.360
> 
> 标签：joomla, virtuemart

我的购物车有严重问题。如果我在购物车中添加 14 个产品，一切正常，但如果我添加其他产品，购物车就会被清除。当我在购物车中有 15 件产品时，这将被清除并且我看到消息“您的购物车中没有产品”。

Joomla！1.0.15。我在这里[http://forum.virtuemart.net/index.php?topic=105960.0](http://forum.virtuemart.net/index.php?topic=105960.0)找到了解决方案，但似乎安装了旧的 joomla 版本，我没有选项集会话处理程序或“如有必要更新表”我怎么能解决？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:16:47.533

这是服务器问题刚刚转移到另一个主机

# sql - 使用实体框架向使用外键关系的表添加行时出错

> ID：11904550
> 
> 赞同：0
> 
> 时间：2012-08-10T15:13:08.240
> 
> 标签：sql, entity-framework

我编写了以下 C# 代码：

```
 abcEntities entities = new abcEntities();            
        abc_Lids_New newUserEntry = new abc_Lids_New()
        {
            Lid = lid,
            FName = fname,
            LName = lname,
            Phone = phone,
        };
        newUserEntry.abc_class_Assignments_New = new System.Data.Objects.DataClasses.EntityCollection<abc_class_Assignments_New>();
        foreach (string classId in classIds)
        {
            newUserEntry.abc_class_Assignments_New.Add(new abc_class_Assignments_New()
            {
                Lid = lid,
                classID = classId
            });
        }
        entities.abc_Lids_New.AddObject(newUserEntry);
        entities.SaveChanges(); 
```

该代码应该在 abc_Lids_New 中添加代表新用户的新行。该代码还应该在 abc_class_assignments_new 中添加与用户的盖子和一些类 ID 相对应的行。

但是，我收到一个错误：`Unable to update the EntitySet 'UCV_TF_Assignments_New' because it has a DefiningQuery and no <InsertFunction> element exists in the <ModificationFunctionMapping> element to support the current operation.`

直到最近，我只使用实体框架和存储过程，所以这对我来说是新事物。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:22:09.203

您的`EntitySet`“'UCV_TF_Assignments_New”要么基于`View`（在这种情况下，您必须创建`InsertFunction`（存储过程）），要么它缺少主键（在这种情况下，添加一个）。

# jquery - 使用 Easy Paginate jQuery 插件在同一页面上创建多个分页

> ID：11904551
> 
> 赞同：0
> 
> 时间：2012-08-10T15:13:18.020
> 
> 标签：jquery, jquery-plugins

我正在使用[这个分页插件](http://cssglobe.com/easy-paginate-jquery-plugin-for-pagination/)。

在他的解释的底部，作者提到：

> 如果您想在同一页面上创建多个分页，请记住此插件使用 ID 来定位控件按钮，因此您需要为每个分页定义控件 id 参数。

在我的页面上，我定义了两个控件：

```
1.
$('#port').easyPaginate({
   step:2
});

2.
$('#blog_posts').easyPaginate({
   step:1
}); 
```

只有在第一个`id='port'`有效。

有人对我如何使它起作用有任何想法吗？

这是为您提供方便的脚本：

```
(function($) {

    $.fn.easyPaginate = function(options){

        var defaults = {                
            step: 4,
            delay: 100,
            numeric: true,
            nextprev: true,
            auto:false,
            pause:4000,
            clickstop:true,
            controls: 'pagination',
            current: 'current' 
        }; 

        var options = $.extend(defaults, options); 
        var step = options.step;
        var lower, upper;
        var children = $(this).children();
        var count = children.length;
        var obj, next, prev;        
        var page = 1;
        var timeout;
        var clicked = false;

        function show(){
            clearTimeout(timeout);
            lower = ((page-1) * step);
            upper = lower+step;
            $(children).each(function(i){
                var child = $(this);
                child.hide();
                if(i>=lower && i<upper){ setTimeout(function(){ child.fadeIn('fast') }, ( i-( Math.floor(i/step) * step) )*options.delay ); }
                if(options.nextprev){
                    if(upper >= count) { next.fadeOut('fast'); } else { next.fadeIn('fast').css({'display':'inline-block'}); };
                    if(lower >= 1) { prev.fadeIn('fast').css({'display':'inline-block'}); } else { prev.fadeOut('fast'); };
                };
            }); 
            $('li','#'+ options.controls).removeClass(options.current);
            $('li[data-index="'+page+'"]','#'+ options.controls).addClass(options.current);

            if(options.auto){
                if(options.clickstop && clicked){}else{ timeout = setTimeout(auto,options.pause); };
            };
        };

        function auto(){
            if(upper <= count){ page++; show(); }           
        };

        this.each(function(){ 

            obj = this;

            if(count>step){

                var ol;
                var pages = Math.floor(count/step);
                if((count/step) > pages) pages++;

                ol = $('<ol id="'+ options.controls +'"></ol>').insertAfter(obj);

                if(options.nextprev){
                    prev = $('<li class="prev">&laquo; Previous</li>')
                        .hide()
                        .appendTo(ol)
                        .click(function(){
                            clicked = true;
                            page--;
                            show();
                        });
                };

                if(options.numeric){
                    for(var i=1;i<=pages;i++){
                    $('<li data-index="'+ i +'">'+ i +'</li>')
                        .appendTo(ol)
                        .click(function(){  
                            clicked = true;
                            page = $(this).attr('data-index');
                            show();
                        });                 
                    };              
                };

                if(options.nextprev){
                    next = $('<li class="next">Next &raquo;</li>')
                        .hide()
                        .appendTo(ol)
                        .click(function(){
                            clicked = true;         
                            page++;
                            show();
                        });
                };

                show();
            };
        }); 

    };  

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:32:00.773

使用 JQuery，创建一个函数，用于循环浏览要分页的列表。用通用类标记它们，以确保您没有选择页面上的所有列表。

HTML

```
<div id="test_1" class="paginateMe">
    <ul>
    </ul>
    <div class="clear"></div>
</div>

<div id="test_2" class="paginateMe">
    <ul>
    </ul>
    <div class="clear"></div>
</div> 
```

JS：

```
$('div.paginateMe').each(function(index, element) {
    $this = $('#'+$(this).attr('id')+' ul');

    $this.easyPaginate({ step:1 });
}); 
```

您也可以只针对具有公共类的 UL，而不是像我在上面所做的那样将其嵌套在 DIV 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:45:27.403

我以不同的方式解决了

```
 $('ul.easypagination1').easyPaginate({
        step:20,
        delay:0,
        controls:'easy-pagination-1'
      });

     $('ul.easypagination2').easyPaginate({
        step:20,
        delay:0,
        controls:'easy-pagination-2'
      }); 
```

它可以工作，但您必须添加更多代码和更多 css，我尝试了 opanitch 的代码，但它对我不起作用，现在我在 jquery 1.7.2 上......不知道。

# .net - 在自定义 MessageInspector 中使用 ReadSubTree() 读取 XML 失败

> ID：11904554
> 
> 赞同：2
> 
> 时间：2012-08-10T15:13:26.377
> 
> 标签：.net, xml, wcf

我正在编写一个自定义 MessageInspector，以便能够根据 XSD 验证传入的 XML 文档。（这发生在消息反序列化之前。）

我得到一个例外

> “只有当阅读器位于元素节点上时，才能调用 ReadSubtree()。”

在此行上调用 ReadSubTree() ：

```
XmlReader bodyReader = message.GetReaderAtBodyContents().ReadSubtree(); 
```

这是该方法的代码（从[http://msdn.microsoft.com/en-us/library/aa717047.aspx](http://msdn.microsoft.com/en-us/library/aa717047.aspx)复制）

```
private void ValidateMessageBody(ref System.ServiceModel.Channels.Message message, bool isRequest)
    {
        if (!message.IsFault)
        {
            XmlDictionaryReaderQuotas quotas = new XmlDictionaryReaderQuotas();
            XmlReader bodyReader = message.GetReaderAtBodyContents().ReadSubtree();
            XmlReaderSettings wrapperSettings = new XmlReaderSettings();
            wrapperSettings.CloseInput = true;
            wrapperSettings.Schemas = schemaSet;
            wrapperSettings.ValidationFlags = XmlSchemaValidationFlags.None;
            wrapperSettings.ValidationType = ValidationType.Schema;
            wrapperSettings.ValidationEventHandler += new ValidationEventHandler(InspectionValidationHandler);
            XmlReader wrappedReader = XmlReader.Create(bodyReader, wrapperSettings);

            // pull body into a memory backed writer to validate
            this.isRequest = isRequest;
            MemoryStream memStream = new MemoryStream();
            XmlDictionaryWriter xdw = XmlDictionaryWriter.CreateBinaryWriter(memStream);
            xdw.WriteNode(wrappedReader, false);
            xdw.Flush(); 
            memStream.Position = 0;
            XmlDictionaryReader xdr = XmlDictionaryReader.CreateBinaryReader(memStream, quotas);

            // reconstruct the message with the validated body
            Message replacedMessage = Message.CreateMessage(message.Version, null, xdr);
            replacedMessage.Headers.CopyHeadersFrom(message.Headers);
            replacedMessage.Properties.CopyProperties(message.Properties);
            message = replacedMessage;
        }
    } 
```

我正在使用 Fiddler 向我的 WCF 服务（IIS 托管）发送 POST 请求。内容类型设置为 application/xml。

我的输入 XML 如下所示：

```
<Envelope xmlns="myNamespace" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="0.52">
<Sender id="1" email="..." />
    ...
    ... 
```

那么，可能是什么问题？文档并没有帮助我理解问题所在。我认为问题实际上出在 GetReaderAtBodyContents() 调用上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T09:45:27.980

我的猜测是该节点是一个空节点，由自闭合标签判断。

ReadSubTree 可能会因此引发异常...

在您的情况下，您只需要根据节点名称迭代属性...

# css - 绝对定位导致水平滚动

> ID：11904561
> 
> 赞同：2
> 
> 时间：2012-08-10T15:13:43.670
> 
> 标签：css, css-position

我有一个云，它使用 CSS3 动画从屏幕内部移动到屏幕外。当云离开屏幕时，屏幕水平滚动，并不理想。我可以用 CSS 隐藏滚动条，但我想阻止滚动。

```
#c-2 {
background:url(clouds.png) no-repeat;
width:161px;
height:94px;
position:absolute;
top:40%;
right:0%;
animation:CloudB 20s 1s infinite alternate ease-in-out;
-moz-animation:CloudB 20s 1s infinite alternate ease-in-out;
-webkit-animation:CloudB 20s 1s infinite alternate ease-in-out;
-o-animation:CloudB 20s 1s infinite alternate ease-in-out;
}

@keyframes CloudB {
    0%   { right:0%; top:40%; }
    100% { right:-10%; top:40%; }
}

@-moz-keyframes CloudB {
    0%   { right:0%; top:40%; }
    100% { right:-10%; top:40%; }
}

@-webkit-keyframes CloudB {
    0%   { right:0%; top:40%; }
    100% { right:-10%; top:40%; }
}

@-o-keyframes CloudB {
    0%   { right:0%; top:40%; }
    100% { right:-10%; top:40%; }
} 
```

[http://energycenter.herokuapp.com/](http://energycenter.herokuapp.com/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T15:16:14.470

试试这个 - [http://jsfiddle.net/m3af2/](http://jsfiddle.net/m3af2/)

```
body {
    background-color: #99CCE8;
    margin: 0;
    line-height: 1;
    text-rendering: optimizeLegibility;
    overflow-x: hidden;
    position: relative;
} 
```

# c++ - 当输入为高值时程序崩溃

> ID：11904563
> 
> 赞同：0
> 
> 时间：2012-08-10T15:13:46.543
> 
> 标签：c++, if-statement, crash, while-loop

我的代码在值小时例如 [a = 1, gos = 0.5, N = 1] & [a = 1, gos = 0.2, N = 2] 时有效。

但是，当输入更大的值时它会崩溃。例如[a = 10, gos = 0.01, N = 18] & [a=50, gos=0.01, N=64]。

我该如何解决？

这是代码：

```
#include <cstdlib>
#include <iostream>

using namespace std;
double num_trunks(double A, double B, int N);
double num_trunk_checker(double B, double gos, int N, double A);

double num_trunks(double A, double B, int N)
{
   double gos_prev = 1;
   double gos;
   int k = 1;
   while (k != (N+1))
   {
       gos = (A*gos_prev)/(k+(gos_prev)*A);
       gos_prev = gos;
       k++;    
   };
   num_trunk_checker(B,gos,N,A);
}

double num_trunk_checker(double B, double gos, int N, double A)
{
    if (B != gos)
    {
       N = N + 1;
       num_trunks(A,B,N);
    }
    else
    {
       cout << "Number of trunks: " << N << "\n";
    }
}

int main(int argc, char *argv[])
{

   double A, gos;
   int N = 1;
   cout << "A: ";
   cin >> A;
   cout << "gos: ";
   cin >> gos;
   num_trunks(A,gos,N);

system("PAUSE");
return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:27:53.633

在`num_trunks(A, B, N)`中，您计算​​一个`gos`值，然后调用`num_trunk_checker(B, gos, N, A)`。但在`num_trunk_checker`，如果`B`不匹配`gos`，你转身打电话`num_trunks(A, B, N+1)`。所以唯一改变的是更大的`N`，如果`gos`永远不等于，你会得到无限递归`B`。

```
num_trunks(A, B, N)
    calculuate gos (which has to be less than 1)
    num_trunk_checker(B, gos, N, A)

num_trunk_checker(B, gos, N, A)
    if (B != gos) num_trunks(A, B, N+1) 
```

有可能`gos`超过 的值`B`，所以你永远不会得到相等。

也许你的意思是：

```
 if (gos > B) //... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:40:24.747

您应该阅读有关浮点比较的常见问题解答

[http://www.parashift.com/c++-faq/floating-point-arith.html](http://www.parashift.com/c++-faq/floating-point-arith.html)

然后尝试

```
if (fabs(B-gos)<1.e-6) 
```

在 num_trunk_checker 函数中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T15:31:05.723

如果没有更多信息（什么崩溃？需要多长时间？），就不可能完美地解决您的问题。但是可以做出一些合理的猜测。

浮点比较并不完全准确，通常通过将两个值相减并与一个较小的值（称为 epsilon）进行比较来完成。在检查 (B != gos) 时，执行类似 (B - gos < .00001) 的操作可能会更好。没有这个，计算可能不会终止；如果没有，递归将无限期地继续，直到堆栈溢出并且程序崩溃。

另一种可能性（我没有运行程序来查看自己会发生什么）是，对于较大的值，乘法会导致它们溢出（超过可以用双精度表示的最大可能值），从而导致抛出异常。

# django - Heroku 上的内存监控

> ID：11904564
> 
> 赞同：5
> 
> 时间：2012-08-10T15:13:47.123
> 
> 标签：django, memory, memory-management, heroku

我们在 Heroku 上运行 Django，我正在寻找一种方法来监控正在使用的内存量。一旦我们超过了限制，我们就会得到错误，告诉我们我们正在使用多少内存，但我想看看即使我们低于我们的限制内存是如何潮起潮落的。

这似乎是基本功能，但我在 Heroku dyno 文档中没有看到任何建议这样做的方法。我真的很感激任何指示。

非常感谢！

黏土

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T06:26:33.133

我也在 Heroku 上使用 Django。监控内存的最佳方法是安装[NewRelic 插件](https://addons.heroku.com/newrelic)。当您第一次安装它（免费版本）时，您可以免费获得一周的“高级”使用层，这使您可以查看有关您的应用程序的所有统计信息：

*   每分钟的总请求数。
*   平均响应时间。
*   页面慢。
*   数据库查询（响应时间等）。
*   最终用户页面加载时间。
*   各种分析。
*   后台作业统计信息（内存、cpu 等）。
*   可用 RAM、随时间变化的 RAM 使用情况等。
*   还有更多

作为参考，这是一个屏幕截图，因此您可以看到我在说什么：

![NewRelic 内存统计](../Images/fdabc764090963c3beda9f06bea2812d.png)

# php - Javascript 图表未插入 DIV 容器

> ID：11904569
> 
> 赞同：0
> 
> 时间：2012-08-10T15:14:03.367
> 
> 标签：php, javascript, html, charts, gantt-chart

我正在尝试将**甘特**图插入`div`名为“GanttDiv”的容器中。我正在使用[dhtmlxGantt 库](http://dhtmlx.com/docs/products/dhtmlxGantt/samples/01_initialization/1_readonly.html)。

所以，我下载了这个库并将其保存在`mod_gantt/js`. 接下来，我复制了一个[示例代码](http://dhtmlx.com/docs/products/dhtmlxGantt/samples/01_initialization/1_readonly.html#code)来检查它是如何工作的。问题是我的网页上没有创建甘特图。

可能是什么原因？

```
<script type="text/javascript" language="JavaScript">
function createChartControl('GanttDiv')
{
    // Initialize Gantt data structures
    var project1 = new GanttProjectInfo(1, "Applet redesign", new Date(2010, 5, 11));
    var parentTask1 = new GanttTaskInfo(1, "Old code review", new Date(2010, 5, 11), 208, 50, "");
    parentTask1.addChildTask(new GanttTaskInfo(2, "Convert to J#", new Date(2010, 5, 11), 100, 40, ""));
    parentTask1.addChildTask(new GanttTaskInfo(13, "Add new functions", new Date(2010, 5, 12), 80, 90, ""));
    var parentTask2 = new GanttTaskInfo(3, "Hosted Control", new Date(2010, 6, 7), 190, 80, "1");
    var parentTask5 = new GanttTaskInfo(5, "J# interfaces", new Date(2010, 6, 14), 60, 70, "6");
    var parentTask123 = new GanttTaskInfo(123, "use GUIDs", new Date(2010, 6, 14), 60, 70, "");
    parentTask5.addChildTask(parentTask123);
    parentTask2.addChildTask(parentTask5);
    parentTask2.addChildTask(new GanttTaskInfo(6, "Task D", new Date(2010, 6, 10), 30, 80, "14"));
    var parentTask4 = new GanttTaskInfo(7, "Unit testing", new Date(2010, 6, 15), 118, 80, "6");
    var parentTask8 = new GanttTaskInfo(8, "core (com)", new Date(2010, 6, 15), 100, 10, "");
    parentTask8.addChildTask(new GanttTaskInfo(55555, "validate uids", new Date(2010, 6, 20), 60, 10, ""));
    parentTask4.addChildTask(parentTask8);
    parentTask4.addChildTask(new GanttTaskInfo(9, "Stress test", new Date(2010, 6, 15), 80, 50, ""));
    parentTask4.addChildTask(new GanttTaskInfo(10, "User interfaces", new Date(2010, 6, 16), 80, 10, ""));
    parentTask2.addChildTask(parentTask4);
    parentTask2.addChildTask(new GanttTaskInfo(11, "Testing, QA", new Date(2010, 6, 21), 60, 100, "6"));
    parentTask2.addChildTask(new GanttTaskInfo(12, "Task B (Jim)", new Date(2010, 6, 8), 110, 1, "14"));
    parentTask2.addChildTask(new GanttTaskInfo(14, "Task A", new Date(2010, 6, 7), 8, 10, ""));
    parentTask2.addChildTask(new GanttTaskInfo(15, "Task C", new Date(2010, 6, 9), 110, 90, "14"));
    project1.addTask(parentTask1);
    project1.addTask(parentTask2);
    //project 2
    var project2 = new GanttProjectInfo(2, "Web Design", new Date(2010, 5, 17));
    var parentTask22 = new GanttTaskInfo(62, "Fill HTML pages", new Date(2010, 5, 17), 157, 50, "");
    parentTask22.addChildTask(new GanttTaskInfo(63, "Cut images", new Date(2010, 5, 22), 78, 40, ""));
    parentTask22.addChildTask(new GanttTaskInfo(64, "Manage CSS", null, 90, 90, ""));
    project2.addTask(parentTask22);
    var parentTask70 = new GanttTaskInfo(70, "PHP coding", new Date(2010, 5, 18), 120, 10, "");
    parentTask70.addChildTask(new GanttTaskInfo(71, "Purchase D control", new Date(2010, 5, 18), 50, 0, ""));
    project2.addTask(parentTask70);
    // Create Gantt control
    var ganttChartControl = new GanttChart();
    // Setup paths and behavior
    ganttChartControl.setImagePath("mod_gantt/js/dhtmlxGantt/codebase/imgs/");
    ganttChartControl.setEditable(false);
    ganttChartControl.showTreePanel(false);
    ganttChartControl.showContextMenu(false);
    ganttChartControl.showDescTask(true,'n,s-f');
    ganttChartControl.showDescProject(true,'n,d');
    // Load data structure        
    ganttChartControl.addProject(project1);
    ganttChartControl.addProject(project2);
    // Build control on the page
    ganttChartControl.create(htmlDiv1);
}
</script>

<div class="contacts">
    <div class="_line">
        <div class="_title">Phone:</div>
        <div class="_txt">77 77 88</div>
    </div>
</div>

<div id="GanttDiv" class="GanttDiv"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:20:17.280

将完整的 JavaScript 代码放在结束 body 标记的上方。当您调用该函数时，可能不会在页面中呈现 div。

像这样的东西

```
<html>
<body>
div class="contacts">
    <div class="_line">
        <div class="_title">Phone:</div>
        <div class="_txt">77 77 88</div>
    </div>
</div>

<div id="GanttDiv" class="GanttDiv"></div>

<script type="text/javascript" language="JavaScript">
function createChartControl(htmlDiv1)
{
    // Initialize Gantt data structures
    var project1 = new GanttProjectInfo(1, "Applet redesign", new Date(2010, 5, 11));
    var parentTask1 = new GanttTaskInfo(1, "Old code review", new Date(2010, 5, 11), 208, 50, "");
    parentTask1.addChildTask(new GanttTaskInfo(2, "Convert to J#", new Date(2010, 5, 11), 100, 40, ""));
    parentTask1.addChildTask(new GanttTaskInfo(13, "Add new functions", new Date(2010, 5, 12), 80, 90, ""));
    var parentTask2 = new GanttTaskInfo(3, "Hosted Control", new Date(2010, 6, 7), 190, 80, "1");
    var parentTask5 = new GanttTaskInfo(5, "J# interfaces", new Date(2010, 6, 14), 60, 70, "6");
    var parentTask123 = new GanttTaskInfo(123, "use GUIDs", new Date(2010, 6, 14), 60, 70, "");
    parentTask5.addChildTask(parentTask123);
    parentTask2.addChildTask(parentTask5);
    parentTask2.addChildTask(new GanttTaskInfo(6, "Task D", new Date(2010, 6, 10), 30, 80, "14"));
    var parentTask4 = new GanttTaskInfo(7, "Unit testing", new Date(2010, 6, 15), 118, 80, "6");
    var parentTask8 = new GanttTaskInfo(8, "core (com)", new Date(2010, 6, 15), 100, 10, "");
    parentTask8.addChildTask(new GanttTaskInfo(55555, "validate uids", new Date(2010, 6, 20), 60, 10, ""));
    parentTask4.addChildTask(parentTask8);
    parentTask4.addChildTask(new GanttTaskInfo(9, "Stress test", new Date(2010, 6, 15), 80, 50, ""));
    parentTask4.addChildTask(new GanttTaskInfo(10, "User interfaces", new Date(2010, 6, 16), 80, 10, ""));
    parentTask2.addChildTask(parentTask4);
    parentTask2.addChildTask(new GanttTaskInfo(11, "Testing, QA", new Date(2010, 6, 21), 60, 100, "6"));
    parentTask2.addChildTask(new GanttTaskInfo(12, "Task B (Jim)", new Date(2010, 6, 8), 110, 1, "14"));
    parentTask2.addChildTask(new GanttTaskInfo(14, "Task A", new Date(2010, 6, 7), 8, 10, ""));
    parentTask2.addChildTask(new GanttTaskInfo(15, "Task C", new Date(2010, 6, 9), 110, 90, "14"));
    project1.addTask(parentTask1);
    project1.addTask(parentTask2);
    //project 2
    var project2 = new GanttProjectInfo(2, "Web Design", new Date(2010, 5, 17));
    var parentTask22 = new GanttTaskInfo(62, "Fill HTML pages", new Date(2010, 5, 17), 157, 50, "");
    parentTask22.addChildTask(new GanttTaskInfo(63, "Cut images", new Date(2010, 5, 22), 78, 40, ""));
    parentTask22.addChildTask(new GanttTaskInfo(64, "Manage CSS", null, 90, 90, ""));
    project2.addTask(parentTask22);
    var parentTask70 = new GanttTaskInfo(70, "PHP coding", new Date(2010, 5, 18), 120, 10, "");
    parentTask70.addChildTask(new GanttTaskInfo(71, "Purchase D control", new Date(2010, 5, 18), 50, 0, ""));
    project2.addTask(parentTask70);
    // Create Gantt control
    var ganttChartControl = new GanttChart();
    // Setup paths and behavior
    ganttChartControl.setImagePath("mod_gantt/js/dhtmlxGantt/codebase/imgs/");
    ganttChartControl.setEditable(false);
    ganttChartControl.showTreePanel(false);
    ganttChartControl.showContextMenu(false);
    ganttChartControl.showDescTask(true,'n,s-f');
    ganttChartControl.showDescProject(true,'n,d');
    // Load data structure        
    ganttChartControl.addProject(project1);
    ganttChartControl.addProject(project2);
    // Build control on the page
    ganttChartControl.create(htmlDiv1);
}

createChartControl('GanttDiv');
</script>
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:28:56.230

通过添加以下脚本使您的 javascript 立即可运行：

```
(function(){
        createChartControl('GanttDiv');
})(); 
```

# objective-c - 如何解析私有 Objective-C 特定的 Mach-O 部分

> ID：11904570
> 
> 赞同：1
> 
> 时间：2012-08-10T15:14:08.537
> 
> 标签：objective-c, mach-o

在 Mach-O 二进制文件的 DATA 段中，有一些特定于 Objective-C 的部分（在[Mach-O 文件格式](http://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/MachORuntime/Mach-O_File_Format.pdf)的第 7 页提到）

引用[PiOS 论文](http://www.iseclab.org/papers/egele-ndss11.pdf)：

> __objc_classlist 部分包含所有类的列表，其实现存在于分析的二进制文件中（即，开发人员实现或静态链接器包含的所有类）

和

> 另一方面，__objc_classref 部分包含对应用程序使用的所有类的引用。这些类的实现不需要包含在二进制文件本身中，但可以由运行时框架（相当于动态链接库）提供。

他们提到这些结构的布局可从 Objective C 运行时标头（可[在此处](http://www.opensource.apple.com/source/objc4/objc4-437/runtime/)获得）中获得。

`__objc_classref`和部分的实际结构是`__objc_classlist`什么？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T06:51:39.113

看看[稍新版本的 Objective-C 运行时实现](http://www.opensource.apple.com/source/objc4/objc4-532/runtime/objc-file.mm)`GETSECT`中的宏定义。它看起来像这样：

```
#define GETSECT(name, type, sectname)                                   \
    type *name(const header_info *hi, size_t *outCount)  \
    {                                                                   \
        unsigned long byteCount = 0;                                    \
        type *data = (type *)                                           \
            getsectiondata(hi->mhdr, SEG_DATA, sectname, &byteCount);   \
        *outCount = byteCount / sizeof(type);                           \
        return data;                                                    \
    } 
```

这告诉我们每个部分都是类型为的项目数组`type`。

几行之后使用它来声明名为的函数`_getObjc2ClassRefs`，并`_getObjc2ClassList`读取您感兴趣的两个部分：

```
GETSECT(_getObjc2ClassRefs,           class_t *,       "__objc_classrefs");
GETSECT(_getObjc2ClassList,           classref_t,       "__objc_classlist"); 
```

所以`__objc_classrefs`包含`class_t *`s，并且`__objc_classlist`包含`classref_t`s。解释这些字段应该是相对不言自明的。

# entity-framework - EF 迁移：回滚上次应用的迁移？

> ID：11904571
> 
> 赞同：514
> 
> 时间：2012-08-10T15:14:13.857
> 
> 标签：entity-framework, entity-framework-4, database-migration, entity-framework-migrations

这看起来像是一个非常常见的任务，但我找不到一个简单的方法来做到这一点。

我想撤消上次应用的迁移。我本来期望一个简单的命令，比如

```
PM> Update-Database -TargetMigration:"-1" 
```

相反，我能想到的是：

```
PM> Get-Migrations

Retrieving migrations that have been applied to the target database.
201208012131302_Add-SystemCategory
201207311827468_CategoryIdIsLong
201207232247409_AutomaticMigration
201207211340509_AutomaticMigration
201207200025294_InitialCreate

PM> Update-Database -TargetMigration:"CategoryIdIsLong" 
```

（至少我可以只使用名称，跳过时间戳......）

有没有更简单的方法？

* * *

## 回答 #1

> 赞同：454
> 
> 时间：2014-05-21T20:41:44.547

我想对该线程添加一些说明：

```
Update-Database -TargetMigration:"name_of_migration" 
```

您在上面所做的是说您想要回滚所有迁移，直到您留下指定的迁移。因此，如果您使用 GET-MIGRATIONS 并发现您有 A、B、C、D 和 E，那么使用此命令将回滚 E 和 D 以将您带到 C：

```
Update-Database -TargetMigration:"C" 
```

此外，除非有人可以提出相反的意见，否则我注意到您可以使用序数值和短的 -Target 开关（因此，-Target 与 -TargetMigration 相同）。如果要回滚所有迁移并重新开始，可以使用：

```
Update-Database -Target:0 
```

0，上面，甚至会回滚第一次迁移（**这是一个破坏性的命令——确保你在使用它之前知道你在做什么！**）——如果你使用上面需要名称的语法，这是你无法做到的目标迁移（在应用迁移之前，第 0 个迁移的名称不存在！）。因此，在这种情况下，您必须使用 0（序数）值。同样，如果您已应用迁移 A、B、C、D 和 E（按此顺序），则序数 1 应引用 A，序数 2 应引用 B，依此类推。所以要回滚到 B 你可以使用：

```
Update-Database -TargetMigration:"B" 
```

或者

```
Update-Database -TargetMigration:2 
```

## 2019 年 10 月编辑：

根据this related [answer](https://stackoverflow.com/a/40788279/6640527) on a similar question，正确的命令`-Target`适用于EF Core 1.1，而`-Migration`适用于EF Core 2.0。

* * *

## 回答 #2

> 赞同：236
> 
> 时间：2012-08-13T18:38:14.670

从 EF 5.0 开始，您描述的方法是首选方式。所以

`PM> Update-Database -TargetMigration:"NameOfSecondToLastMigration"`

或使用您的示例迁移

`PM> Update-Database -TargetMigration:"CategoryIdIsLong"`

一种解决方案是创建一个自动执行上述步骤的包装 PS 脚本。此外，请随意为此创建功能请求，或者更好的是，尝试实现它！[https://github.com/dotnet/ef6](https://github.com/dotnet/ef6)

* * *

## 回答 #3

> 赞同：106
> 
> 时间：2016-10-13T12:25:00.823

在**EntityFrameworkCore 中**：

```
Update-Database 20161012160749_AddedOrderToCourse 
```

`20161012160749_AddedOrderToCourse`您要回滚到的迁移名称在哪里。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2020-06-25T07:36:14.047

我意识到使用 CLI 命令没有任何好的解决方案，`dotnet`所以这里有一个：

```
dotnet ef migrations list
dotnet ef database update NameOfYourMigration 
```

在`NameOfYourMigration`输入您要恢复到的迁移名称的地方。

然后，您可以删除所有恢复的迁移，以便使用

```
dotnet ef migrations remove 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2016-09-27T23:40:27.703

解决方案是：

```
Update-Database –TargetMigration 201609261919239_yourLastMigrationSucess 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2020-11-04T17:00:11.840

**英孚核心**

`PM> Update-Database yourMigrationName`

（恢复迁移）

`PM> Update-Database`

为我工作

在这种情况下，原始问题（yourMigrationName = CategoryIdIsLong）

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2019-04-16T01:57:12.130

```
update-database 0 
```

***警告***：这将回滚EFCore 中的**所有迁移！**请小心使用:)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-05-18T02:04:20.453

额外提醒：

如果您有多个配置类型，则需要指定 [ConfigurationName]

```
Update-Database -Configurationtypename [ConfigurationName] -TargetMigration [MigrationName] 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-08-06T16:14:43.187

在 EF Core 中，您可以`Remove-Migration`在添加错误迁移后在包管理器控制台中输入命令。

如果您的迁移可能涉及数据丢失，控制台建议您这样做：

> 搭建了一个可能导致数据丢失的操作。请检查迁移的准确性。要撤消此操作，请使用 Remove-Migration。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-07-22T17:33:41.620

我通过我的**（BASH GIT）控制台**运行我的也运行**Entity Framework Core**。`Update-Database`命令在包控制台之外不起作用，我必须使用这些`donet ef`命令。

```
donet ef database update [Name of previous Migration] 
```

这将运行`protected override void Down(MigrationBuilder migrationBuilder)`您当前迁移的方法和所有其他方法，以返回您设置的数据库版本。

我也使用`-p [migration project]` `-s [Project Solution]`. 这也允许它指向我的**appsettings.[Enviorment].json**，其中存储了我访问数据库的密码。

```
export ASPNETCORE_ENVIRONMENT=[ENVIORMENT]; donet ef database update [Name of previous Migration] -p [Migration Project Name] -s [Solution Name] 
```

其中很多可能是已知的，但如果您第一次这样做，希望提供详细信息。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2021-06-14T22:37:32.480

英孚核心

将数据库更新到上一点

```
update-database CategoryIdIsLong 
```

然后，删除不良迁移

```
remove-migration 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-07-30T06:14:35.767

我正在使用**EntityFrameworkCore**并使用@MaciejLisCK 的答案。如果您有多个数据库上下文，您还需要通过添加上下文参数来指定上下文，例如：

`Update-Database 201207211340509_MyMigration -context myDBcontext`

（`201207211340509_MyMigration`您要回滚到的迁移在哪里，并且`myDBcontext`是您的数据库上下文的名称）

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-09-23T05:48:00.927

```
Update-Database –TargetMigration:"Your migration name" 
```

对于这个问题，我建议这个链接：

[https://elegantcode.com/2012/04/12/entity-framework-migrations-tips/](https://elegantcode.com/2012/04/12/entity-framework-migrations-tips/)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-11-12T18:53:20.310

我发现这在包管理器控制台中运行时有效：

`dotnet ef migrations list | select -Last 2 | select -First 1 | ForEach-Object { Update-Database -Migration $_ }`

您可以创建一个脚本，使其更容易。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-11-01T07:06:23.427

如果有数据丢失的可能性，EF 不会完成 update-database 命令，因为 AutomaticMigrationDataLossAllowed = false 默认情况下，并且会回滚操作，除非您使用*-force*参数运行它。

```
Update-Database –TargetMigration:"Your migration name" -force 
```

或者

```
Update-Database –TargetMigration:Your_Migration_Index -force 
```

# actionscript-3 - AS3 保存前一帧，同时进入下一帧做某事

> ID：11904572
> 
> 赞同：0
> 
> 时间：2012-08-10T15:14:14.003
> 
> 标签：actionscript-3

可能是这样的：在frame1中我有一些用户交互（拖放图形等），当用户单击某个按钮时，我打开frame2或frame3，其中是用于从用户那里获取一些输入的字段，然后当用户完成时，我将他返回到frame1但框架不是“重置”？我尝试了这里描述的内容，我什至可以使用全局变量将数据从第 2 帧发送到第 1 帧，但是第 1 帧是“重置”所有用户操作都是干净的，所以在这种情况下有没有办法将 frame1 保存在内存中或其他东西?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:12:50.067

如果帧正在初始化，则上一个或下一个转到一个帧是自然的。没有办法保存它。换句话说，移动框架是以下概念，`removeChild(previous-stage)`，`addChild(next-stage)` 以我的经验，控制框架的脚本代码，增加复杂性是非常不可取的。维护困难，未来代码的可读性很差。建议比单帧处理。像单帧的对象位置，大小，状态，并存储为变量，因为它可以恢复它，这样认为更合理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:19:13.133

如果您同时使用 Flash 和 AS3，您可以将代码：

gotoAndStop(3); // 3是帧数

如果您正在使用：

gotoAndPlay(3); // 它将开始播放从 3 开始的帧，直到时间线找到停止标记。

所以，你需要在你想要的框架上停下来。例如停止（）；

查看本教程：[http ://www.youtube.com/watch?v=9N9vE7wjoc4](http://www.youtube.com/watch?v=9N9vE7wjoc4)

# c# - 无法更改 XML 标记的值

> ID：11904573
> 
> 赞同：1
> 
> 时间：2012-08-10T15:14:17.630
> 
> 标签：c#, xml, xmlnode

这是 XML：

```
<PolicyChangeSet schemaVersion="2.1" username="" description="">
    <Attachment name="" contentType="">
        <Description/>
        <Location></Location>
    </Attachment>
</PolicyChangeSet> 
```

我只是想在“位置”标签之间添加值“XXX”。

我试过这个，但它不工作：

```
 string newValue = string.Empty;
    XmlDocument xmlDoc = new XmlDocument();

    xmlDoc.Load(AppVars.pxCentralXMLPayloadFilePath);
    node = xmlDoc.SelectSingleNode("/PolicyChangeSet/Attachment/location");

    node.InnerText = "XXX";

    xmlDoc.Save(AppVars.pxCentralXMLPayloadFilePath); 
```

我错过了什么？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:19:52.710

请按照MS 支持站点的[演练](http://support.microsoft.com/kb/301233)中所述，通过[ChildNodes](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.childnodes.aspx)使用迭代。根据方法的[文档](http://msdn.microsoft.com/en-us/library/h0hw012b.aspx)：`XmlDocument``SelectSingleNode()`

> 不应期望 XmlNode 将“实时”连接到 XML 文档。也就是说，出现在 XML 文档中的更改可能不会出现在 XmlNode 中，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:20:51.713

> doc.Save(@"XML 文件路径"); //这将保存对文件的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T15:24:56.813

发现问题出在 CASE SENSITIVITY。

# c# - 已安装 nuget，但在工具中看不到菜单选项添加库包引用

> ID：11904575
> 
> 赞同：0
> 
> 时间：2012-08-10T15:14:25.330
> 
> 标签：c#, visual-studio, nuget

我在 vs.net 2010 Ultimate 中使用扩展管理器安装了 nuget。

它重新启动，我仍然没有在工具菜单中看到“添加库包引用”菜单。

**可能是什么问题？**

我只能进入 powershell 控制台并使用 nuget。

库包参考在工具中有，但它只有 2 个选项：

```
Package manager console
Package manager settings 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:23:23.130

我相信这可能是默认值。这对我来说是一样的，我也有 Ultimate 2010 ......

当我打开解决方案文件时，我会看到其他选项“管理解决方案的 NuGet 包”

当我在解决方案资源管理器中右键单击解决方案文件时，我确实获得了管理 NuGet 包的选项。我只需要加载一个解决方案。

我认为这是它应该如何工作的，因为我从未见过它以任何其他方式工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:22:55.317

如果您没有打开支持它的解决方案/项目，您将只会看到这两个选项。

# java - 关于摆动容器

> ID：11904576
> 
> 赞同：1
> 
> 时间：2012-08-10T15:14:32.327
> 
> 标签：java, swing, layout-manager, miglayout, grid-layout

我正在做一项研究，我有以下应用程序，因为我们有以下挥杆布局..

![在此处输入图像描述](../Images/ede816554d86de6ba58aede314478d57.png)

现在的问题是，我想开发的同样的东西我正在使用谷歌框架的 Swing Designer ..

![在此处输入图像描述](../Images/05c763f8f53166850d54327d5cee025c.png)

请告诉我什么容器布局和其他东西我需要通过 Swing Designer 构建相同的 forat，我稍后也想自定义它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:19:27.523

据我了解，您的问题是相等地调整两个按钮的大小？好吧，我会使用[Mig Layout](http://miglayout.com/)，创建两列，每列将缩放 50%。

# grails - 填充 Grails 域类

> ID：11904577
> 
> 赞同：-1
> 
> 时间：2012-08-10T15:14:37.513
> 
> 标签：grails, groovy

我编写了一个简单的代码来填充 Grail 域类和一个显示 db 内容的代码，但它不起作用。附上我的代码！我很感激任何帮助。

```
def populateDB(int nofelements)
    {
        def instance
        for (int i=1;i<=nofelements;i++){
            instance=new Avendpoint()
            instance.avName=org.apache.commons.lang.RandomStringUtils.random(9, true, true)
            instance.bridge=org.apache.commons.lang.RandomStringUtils.random(9, true, true)
            instance.callerID=org.apache.commons.lang.RandomStringUtils.random(9, true, true)
            instance.con=false
            instance.state=AvendpointState.ONE_WAY
            instance.uid=org.apache.commons.lang.RandomStringUtils.random(5, true, true)
            instance.save(flush: true)
        }

        render "The database has been populated successfully!"

    }
    def showDB(){   
        def instance
        String res
        res+=Integer.toString(Avendpoint.count())
        for(int i=1; i<Avendpoint.count(); i++){
        instance=Avendpoint.get(i)
        res+=instance.avName+"<br>"+instance.bridge+"<br>"+instance.callerID+"<br>"+
        instance.con+"<br>"+instance.state+"<br>"+instance.uid+"<br>"
        }
        render res
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:18:49.913

首先是尝试使用：`instance.save(flush: true,failOnError:true)`. 默认情况下，当域不是字段约束时，Grails 不会抛出异常。也许实例在验证时被拒绝并且不会被保存。

# javascript - 同一元素的 this.id 的值在浏览器之间是不同的

> ID：11904580
> 
> 赞同：0
> 
> 时间：2012-08-10T15:14:43.887
> 
> 标签：javascript, jquery

我正在使用 Raphael.js 来处理 SVG 地图。它在所有桌面浏览器中都表现出色。当点击地图上的给定区域时，我有一个点击功能来触发一些事情。它依赖于抓取被点击对象的 (this.id) 并返回一些结果。

问题是它适用于桌面浏览器 Safari、Opera、IE9 和 Chrome。我尝试在移动 android (4.0.3) 浏览器上打开相同的东西，但 (this.id) 的值不一样，所以我点击的区域不是我得到结果的区域。桌面上对象的 this.id 不等于移动浏览器上同一对象的 this.id。

我已经使用警报验证了这些值。是什么赋予了？我该如何解决这个问题或以更简单的方式找到点击项目的 ID？

这是重要的代码片段：

```
drawnl[i].click(function(){//click function

if(dcount == mcount){
    idx = (highestid-1-this.id); // this takes the total number of markets generated up to this point, subtracts the # of markets for this current map

}else if(gens > 2){

    idx = (mcount-1)-((dcount + (gens-2))-(this.id)); // this takes the total number of markets generated up to this point, subtracts the # of markets for this current 

}else{
    idx = mcount-1-(dcount-this.id);
}   

} 
```

我已经确认所有其他值都是一致的，除了当我获取 this.id 时。[我正在使用 Raphael.js ( http://raphaeljs.com/reference.html#Element.click](http://raphaeljs.com/reference.html#Element.click) )的内置处理程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:26:45.610

id 应该在事件中。在您的事件处理程序中

`var id = evt.target.id;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:28:13.570

您可以发布一个 jsfiddle 以便我们可以看到您在做什么吗？

在黑暗中射击：您可以使用事件对象，通常将第一个参数传递给事件侦听器回调函数。然后您可以执行 eventObject.currentTarget.id，它应该是对触发点击事件的节点的引用。

# java - JFreeChart combinedDomainXYPlot - 维护绘图顺序

> ID：11904583
> 
> 赞同：0
> 
> 时间：2012-08-10T15:15:06.187
> 
> 标签：java, jfreechart

我想在 combineDomainXYPlot 中隐藏/显示图，但该类只允许添加/删除图。例如，如果我有 3 个图，我删除第二个，然后添加它，视觉上它会将其添加为底部的第三个图表。有什么方法可以直观地维护图表顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T10:31:54.513

我会使用`ListSelectionModel`， 两者都可以使用`JList`， 显示[在这里](https://stackoverflow.com/a/7620726/230513)， 和`JTable`， 显示[在这里](https://stackoverflow.com/a/7620693/230513)。前者有一个灵活的布局，而后者有一个方便的`JCheckbox` [渲染器/编辑器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)。

让我们假设您的模型最终生成一个`List<Plot>`命名的`selected`. 您可以将`getSubplots()`列表循环到`remove()`所有当前图，然后循环`List<Plot>`到`add()`每个选定的图。

附录：如果子图在其他方面相同，您可能能够`add()`或`remove()`最少数量的子图并替换仍然使用的模型，`setDataset()`如图所示[。](https://stackoverflow.com/a/11895709/230513)它稍微复杂一些，但在视觉上的破坏性可能较小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T16:34:16.070

您可以`AbstractRenderer.setSeriesVisible`根据`Renderer`您使用的情况使用。

这隐藏而不是删除系列，因此顺序不受影响。如果您有权访问 JFreeChart 演示，请查看 HideSeriesDemo1 以获取示例。

# php - PHP XSLT Prozessor 要求

> ID：11904585
> 
> 赞同：1
> 
> 时间：2012-08-10T15:15:18.480
> 
> 标签：php, xml, xslt, lampp

我正在尝试使用 XSLT 对主页进行一些 XML 转换。我`lampp`在 Fedora 系统上使用。我从这个 php 代码开始：

```
<?php
$xh = xslt_create();
if (xslt_process($xh, 'sample.xml', 'transform.xsl', 'result.xml')) {
    readfile('result.xml');
}
else {
    print "Could not be transformed by transform.xsl into";
    print "  result.xml the reason is that " . xslt_error($xh) . " and the ";
    print "error code is " . xslt_errno($xh);
}
xslt_free($xh);
?> 
```

我得到的错误消息如下：

> **致命错误：在第****2**行的**/opt/lampp/htdocs/test/test.php**中调用未定义函数 xslt_create()

 **我认为如果我安装`libxml2`、`libxml-devel`、`libxslt`和，它会起作用`libxslt-devel`，但最后还是出现了相同的错误消息。我也试过`php-xml`，但没有成功。也许是因为lampp？我的问题还有其他想法或解决方案吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:31:34.573

`php-dom`PHP 5 的包中提供了 XSL 功能。

[`xslt_create`^(*Docs*)](http://de.php.net/xslt_create)函数来自[XSLT (PHP 4) 扩展^(*Docs*)](http://de.php.net/manual/book.xslt.php)。它已经过时了。

取而代之的是与 PHP 5 一起使用的[XSL 扩展^(*文档*)](http://de.php.net/manual/en/book.xsl.php)（当前的 PHP 版本，PHP 4 已死）。

IIRC 有一些用 PHP 代码本身编写的后备库，它能够使用当前的 DOM 扩展来模仿 PHP 4 扩展的语法。但我不能告诉你那在哪里，也不能告诉你有多好，因为那是很久以前的事了，我记不太清了。也更容易使用新的扩展。**

# javascript - 在 Wordpress 中使用 wp_enqueue_script 中断脚本

> ID：11904593
> 
> 赞同：0
> 
> 时间：2012-08-10T15:16:00.353
> 
> 标签：javascript, wordpress

如果我在我的 Wordpress 主题的 head 部分使用脚本的完整路径，它可以正常工作。例如：

```
<script src="http://www.mysite.com/wp-content-/theme/mytheme/js/script.js"></script> 
```

但是，如果我使用“正确”的 Wordpress 方法，它会中断，例如：

```
<?php wp_enqueue_script('kwicks-settings', get_template_directory_uri() . '/js/script.js'); ?> 
```

当我使用 wp_enqueue_script 时，该脚本似乎链接到源代码中，但由于某种原因该脚本没有运行。

任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:37:58.803

您没有注册脚本。

注册它：

```
wp_register_script( 'my-script', get_template_directory_uri() .'/js/myscript.js'); 
```

然后入队：

```
wp_enqueue_script( 'my-script' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:38:25.373

首先，您需要注册您的脚本。然后您还需要描述相关脚本（在此示例中：如果您的脚本需要 jquery 库）。

所以正确的用法是：

```
wp_register_script('kwicks-settings', get_template_directory_uri() . '/js/script.js', array('jquery') );
wp_enqueue_script('kwicks-settings'); 
```

# c# - 新的关键字混淆

> ID：11904601
> 
> 赞同：2
> 
> 时间：2012-08-10T15:16:33.207
> 
> 标签：c#, .net

全部 -

已阅读有关新关键字以及何时使用的各种文章：

MSDN - [http://msdn.microsoft.com/en-us/library/6fawty39(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/6fawty39(v=vs.80).aspx)

StackOverflow -[在与基类成员同名的派生类成员中使用新关键字的好处](https://stackoverflow.com/questions/8229171/benefit-of-using-new-keyword-in-derived-class-member-having-same-name-with-base)

这是我为实践这个概念而编写的示例代码

```
 static void Main(string[] args)
    {
        Animal a2 = new Dog();
        a2.Talk();
        a2.Sing();
        a2.Greet();
        a2.Dance();
        Console.ReadLine();
    }

class Animal
{
    public Animal()
    {
        Console.WriteLine("Animal constructor");
    }

    public void Talk()
    {
        Console.WriteLine("Animal is Talking");
    }

    public virtual void Sing()
    {
        Console.WriteLine("Animal is Singing");
    }

    public void Greet()
    {
        Console.WriteLine("Animal is Greeting");
    }

    public virtual void Dance()
    {
        Console.WriteLine("Animal is Dancing");
    }
}

//Derived Class Dog from Animal
class Dog : Animal
{
    public Dog()
    {
        Console.WriteLine("Dog Constructor");
    }

    public new void Talk()
    {
        Console.WriteLine("Dog is Talking");
    }

    public override void Sing()
    {
        //base.Sing();
        Console.WriteLine("Dog is Singing");
    }

    public new void Dance()
    {
        Console.WriteLine("Dog is Dancing");
    }
} 
```

我的任何输出如下：

![在此处输入图像描述](../Images/f966782618cfa12cbc472df5e89e5642.png)

令我困惑的是，通过在派生类中使用 new 关键字实际上显示了基类的输出。这不是错误的吗？ new 关键字不应该隐藏基类成员资格，因此不应该打印 Animal is Talking 和 Animal is Dancing 的结果。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T15:18:12.783

“新”意味着该方法是“新的”而不是“覆盖”。因此，如果您从基类调用该名称的方法，它尚未被覆盖，因此不会调用派生类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-01T14:40:39.670

这也让我感到困惑，但简单地说：

new 关键字对父级隐藏了子级的成员。

# php - Python 等价于 php 的 stream_context_create

> ID：11904603
> 
> 赞同：1
> 
> 时间：2012-08-10T15:16:36.120
> 
> 标签：php, python, sockets, python-requests

我正在遵循一个教程，该教程要求我打开一个套接字并发送带有证书的有效负载：http: [//blog.serverdensity.com/how-to-build-an-apple-push-notification-provider-server-tutorial/](http://blog.serverdensity.com/how-to-build-an-apple-push-notification-provider-server-tutorial/) .

我在弄清楚如何使用 python 执行以下操作时遇到了一些困难：

```
// Open the connection
$apnsHost = 'gateway.sandbox.push.apple.com';
$apnsPort = 2195;
$apnsCert = 'apns-dev.pem';

$streamContext = stream_context_create();
stream_context_set_option($streamContext, 'ssl', 'local_cert', $apnsCert);

$apns = stream_socket_client('ssl://' . $apnsHost . ':' . $apnsPort, $error, $errorString, 2, STREAM_CLIENT_CONNECT, $streamContext);

// Send the payload
$apnsMessage = chr(0) . chr(0) . chr(32) . pack('H*', str_replace(' ', '', $deviceToken)) . chr(0) . chr(strlen($payload)) . $payload;
fwrite($apns, $apnsMessage);

// Close Resources
socket_close($apns);
fclose($apns); 
```

我过去使用过 python-requests。但仅适用于简单的获取请求。

我可以使用 python-requests 在 python 中重写上面的代码，还是有更适合这个任务的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:38:47.783

查看 stream_context_create 的 PHP 文档，以及您正在遵循的教程，我认为您要完成的是打开与 gatway.sandbox.push.apple.com 的 SSL 安全套接字连接。

我认为您要查看的 python 模块是[ssl 模块](http://docs.python.org/library/ssl.html)。有一个从客户端连接到服务器的[示例](http://docs.python.org/library/ssl.html#client-side-operation)`ssl.wrap_socket()`，可能将密钥文件和证书文件选项设置为您创建并注册的证书以与苹果服务器通信。

# cakephp - 可包含的嵌套模型

> ID：11904604
> 
> 赞同：2
> 
> 时间：2012-08-10T15:16:43.057
> 
> 标签：cakephp, cakephp-2.0, containable

我有一些嵌套模型，我正在尝试使用`Containable`CakePHP 中的行为加载它们。大部分工作正常。

但是，具有`hasMany`关系的 1 个模型仅返回 1 个对象：

```
$article = $this->News->find('first',array(
    'conditions'=>array('News.id'=>$id),
    'contain' =>  array(
        'Newslayout', 
        'Newspicture'=> array(
            'NewspicturesProduct' => array(
                'Product' => array(
                    'Brand',
                    'Category'
                )
        )))
    )); 
```

仅加载一次的对象是关系`Newspicture hasMany NewspicturesProduct` 当我记录查询时，我得到以下信息：

```
SELECT `NewspicturesProduct`.`id`, `NewspicturesProduct`.`x`, `NewspicturesProduct`.`y`, `NewspicturesProduct`.`product_id`, `NewspicturesProduct`.`newspicture_id`, `NewspicturesProduct`.`w`, `NewspicturesProduct`.`h` FROM `edclondon`.`newspictures_products` AS `NewspicturesProduct` WHERE `NewspicturesProduct`.`newspicture_id` = 3 
```

这给了我 3 个结果`phpMyAdmin`。但是在 CakePHP 的调试中只有 1 个：

```
'Newspicture' => array(
        (int) 0 => array(
            'id' => '3',
            'news_id' => '2',
            'newspicture_file_path' => '5022443f-ddf8-4115-ae57-618e9d60b047.jpg',
            'newspicture_file_size' => '1232546',
            'order' => null,
            'NewspicturesProduct' => array(
                'id' => '1',
                'x' => '0.180664',
                'y' => '0.295312',
                'product_id' => '3',
                'newspicture_id' => '3',
                'w' => '0.286133',
                'h' => '0.478125',
                'Product' => array(
                    'id' => '3',
                    //....
                    'Brand' => array(
                        'id' => '6',
                        //...
                    ),
                    'Category' => array(
                        'id' => '6',
                        //....
                    )
                )
            )
        ) 
```

当检索`Newspictures`对象而不是检索`News`对象时，我确实得到了所有 3 个`NewspicturesProduct`对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:19:40.840

在我看来，与您显示的查询对应的代码应该是：

```
$article = $this->News->find('first',array(
'contain' =>  array(
    'Newslayout', 
    'Newspicture'=> array(
        'NewspicturesProduct' => array(
            'conditions'=>array('NewspicturesProduct.newspicture_id'=>'3')
            'Product' => array(
                'Brand',
                'Category'
            )
    )))
)); 
```

而不是你给的那个...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-12T09:42:10.957

看来您需要 3 条记录`NewspicturesProduct`。如果是这样，那么您可以尝试：

```
$article = $this->News->find('first',array(
'contain' =>  array(
    'Newslayout', 
    'Newspicture'=> array(
        'NewspicturesProduct' => array(
            'conditions'=>array(
                             'limit'=> 3
                         ),
            'Product' => array(
                'Brand',
                'Category'
            )
    )))
)); 
```

# ssh - Git, vagrant (lucid 32), 山狮, 权限被拒绝

> ID：11904607
> 
> 赞同：0
> 
> 时间：2012-08-10T15:16:55.110
> 
> 标签：ssh, github, public-key-encryption, osx-mountain-lion, vagrant

我遇到了类似的问题： [权限被拒绝（公钥）。致命：远程端在推回git存储库时意外挂断](https://stackoverflow.com/questions/7065257/permission-denied-publickey-fatal-the-remote-end-hung-up-unexpectedly-while)

但我怀疑它可能会更复杂，因为我在 mac（山狮）上运行 vagrant，并且遇到了我在 Snow Leopard 中没有的“权限被拒绝”问题。

我用 ssh 密钥在我的 mac（山狮）上设置了 git，它可以工作。

我设置了 vagrant（lucid32 框）并设置了一个新的 ssh 密钥（一旦我 ssh 进入 vagrant）：

```
cd ~/.ssh
ssh-keygen -t rsa -C "myemail@mail.com"
Generating public/private rsa key pair.
Enter file in which to save the key (/home/vagrant/.ssh/id_rsa): 
Enter passphrase (empty for no passphrase): [just hit enter]
Enter same passphrase again: [just hit enter] 
```

然后我将 ssh 密钥添加到我的 github 存储库（注意：pbcopy/xclip 有问题，所以我只使用了 vi 并复制粘贴）

```
vagrant@lucid32:~$ cd /vagrant/
vagrant@lucid32:/vagrant$ git push -u origin master
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

所以，现在我的 github 存储库中有两个 ssh 密钥：

```
- My Mac key (works, can commit to my non-vagrant repo from my mac)
- My vagrant key (does not work, cannot ssh into vagrant and commit my repo from my vagrant box) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:20:54.850

您是否要推送到 github 存储库？

如果是这样，您需要将 vagrant VM 的 SSH 密钥添加到您在 Github 上的帐户设置下的帐户中。

请记住，Vagrant VM 本质上是与本地计算机“不同”的计算机，因此它将具有不同的 SSH 密钥。

请参阅[这篇](https://help.github.com/articles/generating-ssh-keys)关于使用 SSH 密钥的github 文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T16:32:07.270

我的开始工作了，我遵循了这个建议： [Unable to Git-push master to Github](https://stackoverflow.com/questions/922210/unable-to-git-push-master-to-github)

并在我的 ~/.ssh 文件夹中添加了一个配置文件。不行，但我不确定这是否有帮助？

# java - Java中的JSON字符串到JSON

> ID：11904608
> 
> 赞同：0
> 
> 时间：2012-08-10T15:16:58.573
> 
> 标签：java, android, mysql, json

我有几个 txt 文件，它们从 android 的（调用、消息等）数据库中获取一些信息并将其存储为 Cursor 对象。

然后我将光标转换为 JSON 对象，然后将其存储在设备上 SD 卡上的 txt 文件中。当我从文件中读取时，我得到的行是这样的字符串：

```
{"date":1332969098495,"duration":0,"number":"7038673588","Device_ID":"streak"} 
```

我必须将字符串的值存储到 MySQL 表中。有没有办法可以将它转换回 JSON 或 Map？

我考虑过编辑字符串，使值用单引号括起来，并使用 MySQL 语法简单地加载文件中的字段。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:17:35.800

为此，您需要使用[JSon-lib](http://json-lib.sourceforge.net/usage.html)（或）[GSon](http://www.mkyong.com/java/how-do-convert-java-object-to-from-json-format-gson-api/)库。

示例 Gson 代码将是：

```
YourObject obj = gson.fromJson(inputJson, YourObject.class); 
```

**注意：** YourObject 是带有 getter/setter 的 java 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T16:03:06.790

您可以从您拥有的字符串创建 JSONObject。这将提供与 java.util.Map 相同的功能。例如，

```
String jsonStr = "json representation of your data";
JSONObject jObj = new JSONObject(jsonStr);
jObj.get(yourKeyString);
//do more with your jObj here... 
```

希望这可以帮助。有关更多详细信息，请参阅[JSONObject](http://json.org/javadoc/org/json/JSONObject.HTML)文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T16:06:48.073

这里有一个使用GSON库实现类型化对象转换的教程。

[http://java.sg/parsing-a-json-string-into-an-object-with-gson-easily/](http://java.sg/parsing-a-json-string-into-an-object-with-gson-easily/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T16:21:07.063

Sathishpaul 是正确的，但只是为了澄清：

```
JSONObject obj =  new JSONObject(YourJSONString);
Long date = obj.getLong("date");
int duration = obj.getInt("duration"); 
```

ETC..

# python - 配置 django 设置以使用 1.4.1。加载模板错误

> ID：11904609
> 
> 赞同：15
> 
> 时间：2012-08-10T15:17:07.197
> 
> 标签：python, django, django-templates, osqa

这是我得到的错误：

```
ImproperlyConfigured: Error importing template source loader django.template.loaders.filesystem.load_template_source: "'module' object has no attribute 'load_template_source'" 
```

这是我的加载器模板代码：

```
if DEBUG:
    TEMPLATE_LOADERS = [
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',      
    ]
else:
    TEMPLATE_LOADERS = [
        ('django.template.loaders.cached.Loader',(
            'django.template.loaders.filesystem.load_template_source',
            'django.template.loaders.app_directories.load_template_source',
            'forum.modules.template_loader.module_templates_loader',
            'forum.skins.load_template_source',
            )),
    ] 
```

当我从互联网下载项目时，所有这些代码都在那里。我正在尝试使用[这些说明设置](http://wiki.osqa.net/display/docs/Windows+Vista+with+SQLServer)[OSQA](http://www.osqa.net/download/)。我正在运行**MS SQL Server**并安装了**Python 2.6**。有关如何修复此错误的任何帮助*（当我尝试运行**runserver 并点击设置我的东西的 http 链接时发现。错误会在命令行中弹出）*。我是**Django**和**Python**的新手，所以我真的不知道如何诊断正在发生的事情。*****`manage.py`*****

 ******* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-10T15:25:18.210

如果您查看有关[模板加载器类型](https://docs.djangoproject.com/en/dev/ref/templates/api/#loader-types)的文档（向下滚动到缓存模板加载器部分），看起来当您配置缓存加载器时您仍然需要传递它的`Loader`类 - 所以您希望将配置更改为这个：

```
if DEBUG:
    TEMPLATE_LOADERS = [
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',      
    ]
else:
    TEMPLATE_LOADERS = [
        ('django.template.loaders.cached.Loader',(
            'django.template.loaders.filesystem.Loader',
            'django.template.loaders.app_directories.Loader',
            'forum.modules.template_loader.module_templates_loader',
            'forum.skins.load_template_source',
            )),
    ] 
```

我不确定`forum`应用程序的加载器是什么，但您可能还想要`Loader`那里的类（您需要阅读该应用程序的文档才能弄清楚 - 并非所有第三方模板加载器都可以与缓存加载器一起使用）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-26T06:30:58.980

1.  打开包含 Twissandra 项目提取内容的文件夹中的“settings.py”文件。
2.  搜索“TEMPLATE_LOADERS=(”并在其中搜索“django.template.loaders.filesystem.load_template_source”。注释此行并添加“django.template.loaders.filesystem.Loader”。
3.  同样，在“TEMPLATE_LOADERS=(”中，搜索“django.template.loaders.app_directories.load_template_source”，并将其替换为“django.template.loaders.app_directories.Loader”。

PS 我解决了我的问题并感谢[How to fix the Django error display when loading of Twissandra 第一次加载？](http://ksearch.wordpress.com/2012/09/25/how-to-fix-the-django-error-displayed-when-loading-twissandra-for-the-first-time/)******

# regex - 正则表达式在字符串之间查找文本，中间没有预定义的字符串

> ID：11904610
> 
> 赞同：1
> 
> 时间：2012-08-10T15:17:10.773
> 
> 标签：regex, string, find, regex-negation

我有这么写的文字：

```
11 bla gulp bla 22
11 bla bla bla 2211 bla 
ble
bli 22 
```

我需要一个正则表达式来查找所有夫妻之间的所有文本**“** ”`11`和“ `22`”但**不**包含“ `gulp`”。

如果我`(?s)11.*?22`使用 TextCrawler 进行搜索，我会找到所有三个字符串：

```
bla gulp bla
bla bla bla
bla ble bli 
```

错误的！我只想获得：

```
bla bla bla
bla ble bli 
```

因为“ `bla gulp bla`”包含“ `gulp`”，我不想要它！

任何想法？:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:40:51.120

使用否定的前瞻断言：

```
11(?!.*?gulp.*?)(.*?)22 
```

单词边界在中间（围绕 ）可能是个好主意，`gulp`因为它可以区分`gulp`and或(?)：`gulping``gulped``ungulp`

```
11(?!.*?\bgulp\b.*?)(.*?)22 
```

但把它们放在一切周围：

```
\b11\b(?!.*?\bgulp\b.*?)(.*?)\b22\b 
```

将排除您的其他两个结果 - 不是您想要的。

# c# - 如何格式化 REST Web 服务的 XML 响应？

> ID：11904611
> 
> 赞同：3
> 
> 时间：2012-08-10T15:17:12.567
> 
> 标签：c#, xml, web-services, rest

我正在玩[这个简单的 C# 教程](http://www.codeproject.com/Articles/255684/Create-and-Consume-RESTFul-Service-in-NET-Framewor)，这里是你可以 GET 的那种 XML。

```
 <Person xmlns="http://schemas.datacontract.org/2004/07/RESTfulDemo" 
      xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
      <Age>23</Age>
      <ID>1</ID>
      <Name>Bob Kohler</Name>
    </Person> 
```

这是 Person.cs 类：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Runtime.Serialization;

    namespace RESTfulDemo
    {   

      [DataContract]
      public class Person
      {
         [DataMember]
         public string ID;

         [DataMember]
         public string Name;

         [DataMember]
         public string Age;
      }
    } 
```

1) 我应该如何在我的 XML 中为每个数据成员添加属性/前缀？

2）如何将我的 XML 的标题设置为此（或其他任何内容）：

```
 <?xml version="1.0"?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:14:46.017

问题2）可以在初始化文档时完成：

```
XDocument document = new XDocument(new XDeclaration("1.0", "utf-16", "yes")); 
```

至于问题1），据我了解，如果您有这样的XML文件：

```
<CATALOG>
  <CD>
    <TITLE> ... </TITLE>
    <ARTIST> ... </ARTIST>
    <YEAR> ... </YEAR>
  </CD>
</CATALOG> 
```

并且您需要`"id"`为`CD`节点添加一个属性，（其中 id 自动递增）

```
XmlNodeList list = document.GetElementsByTagName("CATALOG");
int i = 0;

foreach (XmlNode CD in list)
  {
    i++;
    XmlAttribute idAttr = document.CreateAttribute("id");
    idAttr.Value = i.ToString();
    CD.Attributes.Append(idAttr); //to append the created attribute and its value to the CD node
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:52:01.510

所以，这就是我为克服这个问题所做的。该解决方案不涉及序列化，但至少它可以按照您的需要格式化响应。

*   (1) 将 System.xml.linq 中的 XElement 作为每个方法的返回类型，并在每个方法中使用 XElement 类构建 xml。
*   (2) 完全使用[此处提供的代码在](http://shevaspace.blogspot.co.uk/2009/01/include-xml-declaration-in-wcf-restful.html)您的 xml 响应之上添加 xml 声明。感谢@Dash 提供链接。

# ios - 在 iOS 中流式传输音频文件

> ID：11904617
> 
> 赞同：3
> 
> 时间：2012-08-10T15:17:37.193
> 
> 标签：ios, audio-streaming

我需要在我的应用程序中发送和接收音频文件。为了提高性能并保持开放连接，我希望流式传输这些数据。

我已经根据问题的答案查看了诸如[HTTP Live Streaming](https://developer.apple.com/streaming/examples/)和[AudioStreamer 之类的东西。](https://github.com/mattgallagher/AudioStreamer)但是，这些似乎是用于*连续*流式传输，单向（读取）。而我正在发送一个有限的音频文件（> 10 秒），然后收到一个回复​​。

我熟悉 NSURLConnection 并查看了这个[答案](https://stackoverflow.com/questions/6611151/playing-audio-from-a-continuous-stream-of-data-ios)。但同样，这使用了*连续*的 1-way 流。

我将不胜感激有关架构的任何建议以完成上述工作以帮助我入门。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:39:37.947

一般来说，`AVAudioPlayer`使用音乐播放。但是，此框架不支持流式传输。`AVPlayer`因此可以实现使用流式传输。通常开发者的`AVPlayer`目的只知道可以播放视频，还可以播放音乐。

我看下面推荐Apple的示例代码。这是使用`AVPlayer`

[缝合流播放器](http://developer.apple.com/library/ios/#samplecode/StitchedStreamPlayer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010092)

我上传到 myServer Tested，.mp3 也很完美

3G、wifi 在两种环境下都经过测试。虽然是示例代码，但令人惊讶的是它完美地工作。mp3 文件上传您的服务器。立即尝试测试。会运作良好。

如果你想在后台播放，下面的代码不要忘记：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    AVAudioSession* audio = [[AVAudioSession alloc] init];
    [audio setCategory: AVAudioSessionCategoryPlayback error: nil];
    [audio setActive: YES error: nil];

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-01T15:42:36.213

对于从服务器播放，我的 Audjustable 项目 ( [https://github.com/tumtumtum/audjustable](https://github.com/tumtumtum/audjustable) ) 修复了原始 AudioStreamer 项目中的大部分问题，并包括无缝播放和解耦音频数据源，以允许诸如错误恢复、加密之类的事情等等。完全开源...

如果您想将音频数据上传到服务器，您可以通过多种方式完成，但 NSURLConnection 似乎是最简单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T17:44:46.013

是的，到目前为止，我使用和搜索过的 AudioStreamer 都非常好。

但是使用 AudioStreamer，在尝试在后台流式传输时需要进行某些更改，当您创建 2 个实例时，还有更多......

[https://github.com/mattgallagher/AudioStreamer/](https://github.com/mattgallagher/AudioStreamer/)

您也可以在我的个人资料中找到 2-3 个关于相同问题的问题...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T10:49:57.043

我认为您要做的是从非流式传输的服务器上传和下载文件。对于下载，您可以使用[NSURLConnection](http://www.google.com/#sclient=tablet-gws&hl=en&tbo=d&q=download+file+using+nsurlconnection&oq=download+file+nsurlconnection&gs_l=tablet-gws.1.1.0i30j0i7i30l2.163158.163876.2.168763.5.5.0.0.0.3.702.2252.0j2j5-2j1.5.0.les;..0.0...1ac.rfy6jYRl97g&pbx=1&bav=on.2,or.r_gc.r_pw.&fp=12f3a3f2cd48643f&biw=1024&bih=672) / NSURLRequest。对于上传，您可以使用 HTTP [POST](https://stackoverflow.com/questions/936855/file-upload-to-http-server-in-iphone-programming)方法。还有一个旧的第三方库，称为 ASIHTTPRequest。互联网上有很多关于这些主题的示例。

# java - 具有相互 SSL 的 SOAP - 如何通过凭据发送？

> ID：11904620
> 
> 赞同：3
> 
> 时间：2012-08-10T15:18:01.053
> 
> 标签：java, soap, jaxb

```
public class ResLookupGetService extends Service {
    ServerServicePortType getServerServicePort();
}
public interface ServerServicePortType {
    ServerServiceResponse doSoapMethod(RequestObject request, ParamObject parameters);
}

ServerServicePortType service = new ServerServiceGetService().getServerServicePort();
ServerServiceResponse response = service.doSoapMethod(request, parameters); 
```

在需要相互 SSL 加密之前，上面的代码可以很好地调用我的 SOAP 服务。

一旦它打开，我尝试创建一个 SSL 上下文并像这样设置它：

```
ServerServicePortType service = new ServerServiceGetService().getServerServicePort();

BindingProvider bindingProvider = (BindingProvider) service;
    bindingProvider.getRequestContext().put(
        "com.sun.xml.internal.ws.transport.https.client.SSLSocketFactory",
        getSslContext().getSocketFactory());

ServerServiceResponse response = service.doSoapMethod(request, parameters); 
```

以及创建的代码`SSLContext`：

```
public SSLContext getSslContext(String keyStorePath, String keyStoreType, String trustStorePath) {
  KeyStore keyStore = KeyStore.getInstance(keyStoreType);
  InputStream ksis = ClassLoader.getSystemResourceAsStream(keyStorePath);
  keyStore.load(ksis, "mypassword".toCharArray());
  ksis.close();

  KeyStore trustStore = KeyStore.getInstance("JKS");
  InputStream tsis = ClassLoader.getSystemResourceAsStream(trustStorePath);
  trustStore.load(tsis, "mypassword".toCharArray());
  tsis.close();

  TrustManagerFactory tmf =
      TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
  tmf.init(trustStore);

  KeyManagerFactory kmf =
      KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
  kmf.init(keyStore, "mypassword".toCharArray());

  sslContext = SSLContext.getInstance("TLS");
  sslContext.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null);
  return sslContext;
} 
```

但它似乎没有正确传递我的凭据。我设置正确吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T19:44:03.990

事实证明，使用`BindingProvider`它什么都不做（或者至少我不能使用它来产生影响）。

在调用 Web 服务之前，我只需设置以下系统属性：

```
 private void setSystemProps() {

    String keyStoreFileName = "ssl/clientKeyStore.jks";
    String keyStorePath = ClassLoader.getSystemResource(keyStoreFileName).getPath();
    String keyStoreType = "JKS";
    String keyStorePassword = "mypassword";

    String trustStoreFileName = "ssl/clientTruststore.jks";
    String trustStorePath = ClassLoader.getSystemResource(trustStoreFileName).getPath();
    String trustStoreType = "JKS";
    String trustStorePassword = "mypassword";

    Properties systemProps = System.getProperties();
    systemProps.put("javax.net.ssl.keyStore", keyStorePath);
    systemProps.put("javax.net.ssl.keyStorePassword", trustStorePassword);
    systemProps.put("javax.net.ssl.keyStoreType", keyStoreType);

    systemProps.put("javax.net.ssl.trustStore", trustStorePath);
    systemProps.put("javax.net.ssl.trustStoreType", trustStoreType);
    systemProps.put("javax.net.ssl.trustStorePassword", keyStorePassword);
    System.setProperties(systemProps);
  } 
```

然后我可以像往常一样进行服务调用：

```
ServerServicePortType service = new ServerServiceGetService().getServerServicePort();
ServerServiceResponse response = service.doSoapMethod(request, parameters); 
```

值得注意的是，当我设置系统属性时，它们接受任何`Object`值，而我最初错误地将其设置为 URL 对象而不是字符串。

因此`trustStorePath`and`keyStorePath`变量被设置为`.getPath()`值，这是一个绝对文件路径，例如：

```
"/Users/username/path/to/directory/with/ssl/clientKeyStore.jks" 
```

现在一切正常。

# c++ - C++阅读器函数设计：辅助函数、类、私有、过度工程？

> ID：11904624
> 
> 赞同：0
> 
> 时间：2012-08-10T15:18:29.143
> 
> 标签：c++, filereader, private-members

在 C++ 中，我想实现一个阅读器函数，即只执行一次的方法，返回一些东西然后消失。阅读过程有点复杂，所以我想我最好把它分成一个`read(filename)`和几个辅助函数。为了确保它们不会被意外访问，我想我将整个东西包装在一个无状态类中，并将这些辅助函数标记为私有。但是，这会产生代码开销，即必须先创建读取器类的实例，然后再调用`read(filename)`它。好的，让我们创建一个辅助函数，创建所述类的一个实例，调用`read(filename)`、转储它并返回读取的输出。

```
class Reader
{
public:
Reader();

virtual
~Reader();

OutputData
read(const std::string & fileName);

private:
helper1_();
helper2_();
helper3_();
};

OutputData
ReadIt(const std::string & fileName)
{
Reader r();
OutputData out = r.read(fileName);
return out;
} 
```

嗯，这闻起来有点过度设计。你对此有何看法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T15:21:40.340

这听起来不错，但如果您只需要一组没有状态的独立辅助函数，那么最好使用自由函数并将它们隐藏在实现中。一种方法是将所有帮助程序放在实现文件中的匿名名称空间中。

头文件：

```
namespace Reader {

OutputData reatIt(const std::string& filename);

} // Reader namespace 
```

实施文件

```
namespace Reader {

namespace {

void helper1_() { .... }
void helper2_() { .... }
void helper3_() { .... }

} // anonymous namespace

readIt(const std::string& filename) {
  // use helpers here. Client code will never know.
}

} // Reader namespace 
```

# php - simplexml_load_string 奇怪的字符

> ID：11904633
> 
> 赞同：1
> 
> 时间：2012-08-10T15:19:13.503
> 
> 标签：php

我在使用 simplexml_load_string 处理非标准字符时遇到了困难。

我已经使用 file_get_contents 加载了报纸 xml 提要。如果我打印以筛选内容，我会得到其中一篇文章的标题：

```
<title>&#8216;If Legault were running in Alberta, he&#8217;d be more popular&#8217;: How right-wing is the CAQ?</title> 
```

如果我这样做：

```
$feed = @simplexml_load_string($xml); 
```

并打印 $feed 的结果，标题已更改为：

```
[title] => â��If Legault were running in Alberta, heâ��d be more popularâ��: How right-wing is the CAQ? 
```

关于如何阻止这些字符像这样显示的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:23:27.443

这看起来 SimpleXML 正在创建一个 UTF-8 字符串，然后以 ISO-8859-1 (latin-1) 或类似 CP-1252 的方式呈现。

当您将结果保存到文件并通过 Web 服务器提供该文件时，浏览器将使用文件中声明的编码。

包含在网页中 由于您的网页编码不是 UTF-8，因此您需要将字符串转换为您使用的任何编码，例如 ISO-8859-1 (latin-1)。

这很容易用 iconv() 完成：

```
$xmlout = iconv('UTF-8', 'ISO-8859-1//TRANSLIT', $xmlout); 
```

保存到数据库 您的数据库列未使用 UTF-8 排序规则，因此您应该使用 iconv 将字符串转换为数据库使用的字符集。

假设您的数据库排序规则与您呈现的编码相同，则从数据库读取时您无需执行任何操作。

说明 在 UTF-8 中，0xc2 前缀字节用于访问“Latin-1 Supplement”块的上半部分，其中包括重音字母、货币符号、分数、上标 2 和 3、版权和注册商标符号等字符，以及不间断的空间。

但是在 ISO-8859-1 中，字节 0xC2 代表一个 Â。因此，当您的 UTF-8 字符串被误解为其中之一时，您会得到 Â 后跟其他一些无意义的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:24:11.670

这是一个字符集问题。它必须是 utf8，您可以在内容上运行 utf8_decode，但最好通过将输入（提要）中的字符集匹配到输出（我假设是 html 页面）来解决此问题。

# sql - SQL - 按唯一列组合分组

> ID：11904634
> 
> 赞同：1
> 
> 时间：2012-08-10T15:19:16.277
> 
> 标签：sql

我正在尝试编写一个脚本，该脚本将返回一个独特的 documentid-physician-patient 三元组的最新值。我需要脚本的行为类似于 group by 语句，除了 group by 一次只能处理一列。我只需要最新的唯一三胞胎的日期和状态信息。请让我知道您需要从我这里得到什么帮助。这是当前非常简单的声明：

```
 SELECT
        TransmissionSend.CreateTimestamp,
        TransmissionSendItem.Status,
        TransmissionSendItem.PhysicianId,
        TransmissionSendItem.DocumentIdDisplay,
        Utility.SqlFunctions_NdnListToAccountList(TransmissionSendItem.NdocNum) AS AccountNum
    FROM
        Interface_SFAX.TransmissionSend,
        Interface_SFAX.TransmissionSendItem
    WHERE
        TransmissionSend.ID = TransmissionSendItem.childsub --I don't know exactly what this does, I did not write this script. It must stay here though for the exact results.

    ORDER BY TransmissionSend.CreateTimestamp DESC -- In the end, each latest result of the unique triplet will be ordered from most recent to oldest in return 
```

我的问题是，我如何才能将结果限制为每个医生 ID、文档 ID 和帐号组合的最新状态？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T15:26:48.047

首先选择带有 documentid GROUP BY documentid 的 MAX(date)，然后通过第一个选择结果从表中选择所有数据，例如使用内部连接。

```
SELECT table.additionalData, J.id, J.date
FROM table
INNER JOIN (SELECT id, MAX(date) AS date 
            FROM table GROUP BY id) AS J 
ON J.id = table.id 
AND J.date /* this is the max date */ = table.date 
```

# blackberry - “类型不是通用的，它不能用参数进行参数化”

> ID：11904636
> 
> 赞同：2
> 
> 时间：2012-08-10T15:19:19.943
> 
> 标签：blackberry, java-me

我正在尝试创建一个实现黑莓的类`Comparator`，以便我可以轻松地对二维数组进行排序。

```
import net.rim.device.api.util.Comparator;    

class ArrayComparator implements Comparator<Object[]> {
    ...
} 
```

这给了我错误：

> 类型比较器不是通用的；它不能用参数参数化`<Object[]>`

如果我包含正常的 JRE 库和 import ，这个错误就会消失`java.util.Comparator`，但这不会编译，因为它是移动设备，库没有预先验证，等等等等。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:29:04.583

net.rim.device.api.util.Comparator 没有通用功能。您需要在没有任何类型信息的情况下实现 Comparator 并比较数组的所有项目。如果数组的项是对象，则还需要在此对象上实现 Comparator 接口。

[您可以在此链接](http://supportforums.blackberry.com/t5/Java-Development/Implement-a-Comparator-to-compare-objects/ta-p/445233)上获得更多实施信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T16:48:02.477

BlackBerry JRE 是 1.3（类似于 CLDC 1.1），不支持现代 Java 世界中的泛型、非同步集合和其他东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T15:28:11.637

Sicne 您正在为不需要（也不能使用）泛型的特定类定义比较器。`Object`在您覆盖的比较方法中进行比较之前，您的数组比较器应该将类型参数转换为相应的类型。

例如，您的 ArrayComparator 应该将`o1`and`o2`转换为数组。将来，如果您制作 UserDataComparator，则比较方法应将参数转换为您的`UserData`类类型。

仅供参考：Blackberry 的编译器 (RAPC) 最多支持 java 1.4 AFAIK（检查[此](http://docs.blackberry.com/en/developers/deliverables/1072/BlackBerry%20Java%20Development%20Environment%20Component%20Package%20Release%20Notes%20-%20build%20version.pdf)），因此不支持泛型、枚举和其他 Java 1.5 及更高版本的功能。

**编辑**正如其他人指出的那样（并且为了完整的答案），我的回答不够具体。我已编辑此答案以反映与您的问题相关的一些关键点。

# c - 用二进制值切换大小写值？

> ID：11904639
> 
> 赞同：1
> 
> 时间：2012-08-10T15:19:35.077
> 
> 标签：c

我正在做一个开关案例，其中案例值需要是二进制数字`01,010,0100,0,00,000,`，依此类推。

```
switch(Code)
{
          case 0:
               {
                   printf("A");
                   break;
                   }
          case 00:
               {
                   printf("B");
                   break;
                   }
          case 000:
               {
                   printf("C");
                   break;
} 
```

我知道如果我输入000，它将被存储为0。我的问题是你如何输入000以便我可以得到`printf("C")`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:29:59.827

我无法想象您为什么要区分这些数字，因为在任何表示中它们都是相同的数字，但我想您将不得不将它们作为字符串进行检查。您不能将字符串放入 C 中的 switch 语句中，因此您只需要有一系列 if/else 语句：

```
void selectString(char *input)
{
    if(strcmp(input, "0") == 0)
    {
        printf("A");
    }
    else if(strcmp(input, "00") == 0)
    {
        printf("B");
    }
    else if(strcmp(input, "000") == 0)
    {
        printf("C");
    }
} 
```

话虽如此，你所问的问题看起来很像一个**XY 问题**，也就是说，你在问如何做奇怪的事情 Y，因为你认为你需要这样做来解决 X。你想做什么？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T16:14:45.457

您的问题是您有一系列要解码的位（线上的信号）。但是您不知道您的信息包何时开始。您在编码中缺少的是字母的开头。（您也没有单词开头，我建议编一个未使用的数字来表示单词之间的空格）。

在您的程序中，建议在每个系列的位前加上 1 个起始位（请注意，这实际上并没有被传输，而是隐含的，因为没有传输任何内容的持续时间）。那么您的值是 10、100 和 1000。您可以轻松地以二进制表示形式比较它们。请注意，最小的有效位系列是字母“e”，二进制为 10。单个 1 位不是有效值。只看[这里的摩尔斯电码条目](http://en.wikipedia.org/wiki/Morse_code)，字母表就形成了一个编号系统，可以存储在查找表中以便快速实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T17:32:00.993

鉴于您在变量中将其用于 Morse（我猜 0 = 点，1 = 破折号）。“代码”必须是字符串。

```
switch(Code)
{
    case "01":   //".-"
        printf("A");
        break;
    case "100":   //"-.."
        printf("B");
        break;
    case "0001":   //"...-"
        printf("V");
    break;
} 
```

# java - Java - 维护对象集合的顺序

> ID：11904646
> 
> 赞同：0
> 
> 时间：2012-08-10T15:19:46.860
> 
> 标签：java, sorting, collections

您将如何维护集合业务对象的顺序

```
<BO1, BO2, BO3, BO4> 
```

这样当您删除 BO2, amd BO4 时，您会得到

```
<BO1, BO3> 
```

然后当你添加 BO2

```
<BO1, BO2, BO3> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:23:19.260

除非您使用排序顺序，否则我看不出集合应该如何知道 BO2 应该放在中间。

如果您的业务对象实现 Comparable，这将满足您的需求

```
SortedSet<BusObj> bos = new TreeSet<>();
bos.addAll(Arrays.asList(bo1, bo2, bo3, bo4));
bos.removeAll(Arrays.asList(bo2, bo4));
bos.add(bo2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T15:27:44.507

您有几种方法可以做到这一点，但这取决于您要使用的集合类型。显然，您不想保持插入的顺序，而是要根据列表中元素的类型来保持顺序。

所以，在说使用这个或那个之前，问自己以下问题：

**我的收藏可以包含重复的元素吗？**

1）如果是：那么您可以使用`List`对象的实现（`ArrayList`,`LinkedList`等）。但是您需要在每次插入后对列表进行排序：

```
List<MyObj> list = ...
list.add(myObjInstance);
Collections.sort(list); 
```

为了避免在每次插入时对列表进行排序，您可以使用[`TreeList`](http://commons.apache.org/collections/api-3.1/org/apache/commons/collections/list/TreeList.html)Apache Commons Collections 中的实现。

2) 如果上一个问题的答案是否定的。然后使用 a [`TreeSet`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)，您不需要使用该实现对每次插入的集合进行排序。

请注意，您的对象元素必须实现[`Comparable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)接口才能进行*排序*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T15:23:04.240

制作您的业务对象[`Comparable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)并使用已排序的集合（例如[`TreeSet`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)a [`SortedSet`](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html)）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T15:22:52.453

使用排序集

[http://docs.oracle.com/javase/7/docs/api/java/util/SortedSet.html](http://docs.oracle.com/javase/7/docs/api/java/util/SortedSet.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T15:27:30.390

有 2 个选项：使用 a`List`并通过在适当的位置插入来自己进行排序，或者使用排序的集合。

我认为您想要的排序集合是`SortedSet` [http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html)。

SortedSet 需要条目来实现`Comparable`接口。

您还应该查看另一个问题：[Java 中的排序集合](https://stackoverflow.com/questions/416266/sorted-collection-in-java)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T16:29:42.130

回答我的问题：

如果有人对随机访问不感兴趣，我想 PriorityQueue 也是一种解决方案。

# database - GClock 和时钟缓冲区替换策略之间的区别？

> ID：11904652
> 
> 赞同：0
> 
> 时间：2012-08-10T15:19:59.230
> 
> 标签：database, postgresql-9.1, framebuffer

GClock 和 Clock 替换策略有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:19:28.100

通用时钟页面替换算法。对于内存中的每个页框，我们关联一个计数字段，并将这些计数字段排列在一个循环列表中。每当引用页面时，相关的计数字段都会设置为 i。当发生页面错误时，会观察到一个围绕此页框循环列表旋转的指针。如果指向的计数字段为零，则删除该页面并将新页面放置在该框架中。否则，计数减 1，指针前进到下一个计数字段，并重复该过程。当一个新页面被放置在页面框架中时，如果该页面将被引用（请求获取），则计数字段设置为 i，如果该页面已被预分页并且未被立即引用，则该字段设置为 j。我们用 CLOCKP(j, i) 来缩写这个算法。“P”表示这是一个预分页算法（预分页策略尚未指定）。当不涉及预分页时，该算法缩写为 CLOCK(i) 。MULTICS 和 CP-67 中使用的算法是 CLOCK(1)。

[数据库系统中的顺序性和预取](http://dl.acm.org/citation.cfm?id=320276)

所以，CLOCK 是 GCLOCK(1)。

# c - 给定 .dll、.lib 和 .h，并想使用 DLL 中的函数编写 C 程序

> ID：11904653
> 
> 赞同：1
> 
> 时间：2012-08-10T15:19:58.437
> 
> 标签：c, gcc, dll, static-libraries, undefined-reference

所以，我有 TVZLib.h、TVZlib.dll 和 TVZlib.lib，我正在使用 gcc 编译以下程序（这是一个简单的测试用例）。编译器给了我错误：

```
"undefined reference to '_imp__TVZGetNavigationMatrix'" 
```

然而。当我为函数调用使用不同类型的参数完成程序时，它抱怨它不是正确的参数（需要 *float）。对我来说，这意味着它至少找到了功能，因为它知道自己想要什么。

根据我的研究，我可以看出人们认为这与库的链接或我链接的顺序有关，但我已经尝试了所有组合的所有 gcc 命令，并且都给了我同样的错误，所以我迫切需要一些帮助。

```
#include <stdlib.h>
#include <stdio.h>
#include "TVZLib.h"

int main() {
    float floatie = 2;
    float *ptr = &floatie;
    TVZGetNavigationMatrix(ptr);
    getchar();
    return 0;
} 
```

提前非常感谢！

我的编译器命令：

```
gcc dlltest.c -L. TVZLib.lib 
```

* * *

[头文件 (TVZLib.h)。](http://pastebin.com/VSr5Aj3R)

直接输出：

```
C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp\ccuDpoiE.o:dlltest.c:(.text+0x2c): undefined reference to `_imp__TVZGetNavigationMatrix'
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:44:53.897

自从我在 Windows 上进行本地编译以来已经有一段时间了......

您是否打算针对 TVZlib.lib 进行静态链接？那没有发生。默认情况下，如果 gcc 同时找到静态库和动态库，gcc 将选择库的动态版本。如果要强制 gcc 静态链接，可以使用该`-static`选项。

如果没记错的话，`_imp__`前缀是加载 DLL 的标志（`_imp__`符号前缀用于调用 DLL 的蹦床函数）。

# sql - 如何从表中只删除重新编码？

> ID：11904655
> 
> 赞同：0
> 
> 时间：2012-08-10T15:20:04.660
> 
> 标签：sql, sql-server, sql-server-2008

我的数据库中有一张表

```
 Id        Name
    -------------------------
      1        1          a
      2        1          a
      3        1          a
      4        2          b
      5        2          b
      6        2          b 
```

这是我的数据库表，它有 6 行和 2 列 Id 和 Name

在此表中，字段`Id`不是主键，我想从我的按`id`字段表中删除 2 个数字行

删除表的 2 行后，我想要这样的输出

```
 Id        Name
    -------------------------
      1        1          a
      3        1          a
      4        2          b
      5        2          b
      6        2          b 
```

可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T15:26:43.727

您的 ID 应该是唯一的，但这里是删除所有 ID 为 2 的 sql。

```
Delete FROM table WHERE table.Id=2; 
```

将“表”替换为您的表名。

**编辑：** 看起来你想删除第二个结果。我不知道为什么，但这里是sql：

```
with rn AS
(
  SELECT *, rn = ROW_NUMBER() OVER (ORDER BY (SELECT 0))
  FROM table  
)
DELETE
FROM rn
WHERE rn = 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T05:50:19.663

表中必须有一些标准，您可以通过这些标准来识别其行。那是主键。如何知道行的顺序保持不变？您的表甚至无法排序，我的意思是您不能确定相同的 SELECT 语句以相同的顺序返回行。

这就是为什么我会回答你不能只删除并准确记录第二个，因为你的表中没有订单。一个 SELECT 会在第二个位置产生不同的行。

如果 Id 字段必须具有这样的值，则可能您可以添加代理主键。

# java - 动画不适用于所有设备

> ID：11904656
> 
> 赞同：1
> 
> 时间：2012-08-10T15:20:06.207
> 
> 标签：java, android, animation, frame, android-animation

例如，我的动画可以在 SGS2 上运行，但不能在 SGS 1 或模拟器上运行（出于某种原因，我构建的其他动画在每台设备上都运行得非常好）

此外，即使在运行动画的设备上，当调用 OnPostExcute 时，动画也会停止，而在其他类似的动画中，也嵌套在 ASyncTask 中，动画在调用 stop() 之前不会停止

每帧的尺寸为512x512

这是动画列表文件：

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"
android:oneshot="false">

    <item android:drawable="@drawable/logo0" android:duration="35" />
    <item android:drawable="@drawable/logo1" android:duration="35" />
    <item android:drawable="@drawable/logo2" android:duration="35" />
    <item android:drawable="@drawable/logo3" android:duration="35" />
    <item android:drawable="@drawable/logo4" android:duration="35" />
    <item android:drawable="@drawable/logo5" android:duration="35" />
    <item android:drawable="@drawable/logo6" android:duration="35" />
    <item android:drawable="@drawable/logo7" android:duration="35" />
    <item android:drawable="@drawable/logo8" android:duration="35" />
    <item android:drawable="@drawable/logo9" android:duration="35" />
    <item android:drawable="@drawable/logo10" android:duration="35" />
    <item android:drawable="@drawable/logo11" android:duration="35" />
    <item android:drawable="@drawable/logo12" android:duration="35" />
    <item android:drawable="@drawable/logo13" android:duration="35" />
    <item android:drawable="@drawable/logo14" android:duration="35" />
    <item android:drawable="@drawable/logo15" android:duration="35" />
    <item android:drawable="@drawable/logo16" android:duration="35" />
    <item android:drawable="@drawable/logo17" android:duration="35" />
    <item android:drawable="@drawable/logo18" android:duration="35" />
    <item android:drawable="@drawable/logo19" android:duration="35" />
    <item android:drawable="@drawable/logo20" android:duration="35" />
    <item android:drawable="@drawable/logo21" android:duration="35" />
    <item android:drawable="@drawable/logo22" android:duration="35" />
    <item android:drawable="@drawable/logo23" android:duration="35" />
    <item android:drawable="@drawable/logo24" android:duration="35" />
    <item android:drawable="@drawable/logo25" android:duration="35" />
    <item android:drawable="@drawable/logo26" android:duration="35" />
    <item android:drawable="@drawable/logo27" android:duration="35" />
    <item android:drawable="@drawable/logo28" android:duration="35" />
    <item android:drawable="@drawable/logo29" android:duration="35" />
    <item android:drawable="@drawable/logo30" android:duration="35" />
    <item android:drawable="@drawable/logo31" android:duration="35" />
    <item android:drawable="@drawable/logo32" android:duration="35" />
    <item android:drawable="@drawable/logo33" android:duration="35" />
    <item android:drawable="@drawable/logo34" android:duration="35" />
    <item android:drawable="@drawable/logo35" android:duration="35" />
    <item android:drawable="@drawable/logo36" android:duration="35" />
    <item android:drawable="@drawable/logo37" android:duration="35" />
    <item android:drawable="@drawable/logo38" android:duration="35" />
    <item android:drawable="@drawable/logo39" android:duration="35" />
    <item android:drawable="@drawable/logo40" android:duration="35" />
    <item android:drawable="@drawable/logo41" android:duration="35" />
    <item android:drawable="@drawable/logo42" android:duration="35" />
    <item android:drawable="@drawable/logo43" android:duration="35" />
    <item android:drawable="@drawable/logo44" android:duration="35" />
    <item android:drawable="@drawable/logo45" android:duration="35" />
    <item android:drawable="@drawable/logo46" android:duration="35" />
    <item android:drawable="@drawable/logo47" android:duration="35" />
    <item android:drawable="@drawable/logo48" android:duration="35" />
    <item android:drawable="@drawable/logo49" android:duration="35" />
    <item android:drawable="@drawable/logo50" android:duration="35" />
    <item android:drawable="@drawable/logo51" android:duration="35" />
    <item android:drawable="@drawable/logo52" android:duration="35" />
    <item android:drawable="@drawable/logo53" android:duration="35" />
    <item android:drawable="@drawable/logo54" android:duration="35" />
    <item android:drawable="@drawable/logo55" android:duration="35" />
    <item android:drawable="@drawable/logo56" android:duration="35" />
    <item android:drawable="@drawable/logo57" android:duration="35" />
    <item android:drawable="@drawable/logo58" android:duration="35" />
    <item android:drawable="@drawable/logo59" android:duration="35" />

</animation-list> 
```

这是应该启动动画的代码：

```
 final ImageView logoAnimation = (ImageView) findViewById(R.id.logoAnimation);
    logoAnimation.setImageResource(R.drawable.none);
    logoAnimation.setBackgroundResource(R.drawable.logo_animation);
    final AnimationDrawable frameAnimation = (AnimationDrawable) logoAnimation
            .getBackground();

    class Init extends AsyncTask<Void, Boolean, Boolean> {
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            frameAnimation.start();
        }

        @Override
        protected Boolean doInBackground(Void... params) {
            if (!isNetworkAvailable()) {
                return false;
            } else {
                try {
                    CheckAll();
                } catch (IOException e) {
                }
            }
            return true;
        }

        @Override
        protected void onPostExecute(Boolean result) {
            super.onPostExecute(result);
            frameAnimation.stop();
            if (result) {
                Intent openMain = new Intent(c, Main.class);
                startActivity(openMain);
                Splash.this.finish();
            } else {

                Builder alertDialog = new AlertDialog.Builder(Splash.this);
                alertDialog
                        .setMessage(getString(R.string.noInternetConnection));
                alertDialog.setNegativeButton(getString(R.string.close),
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                Splash.this.finish();
                            }
                        });
                alertDialog.show();
            }
        }

    }
    new Init().execute(); 
```

而且我不知道是否需要它，但这是布局 xml 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/splash"
        android:orientation="vertical" >

        <ImageView
        android:id="@+id/logoAnimation"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:src="@drawable/logo0"
        android:contentDescription="@null" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/logoAnimation"
        android:layout_centerHorizontal="true"
        android:text="@string/loading"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T13:34:55.407

也许您可以使用内置`ProgressBar`并将其更改为您想要的任何内容。

# python - 搅拌机：在球体周围走动

> ID：11904659
> 
> 赞同：57
> 
> 时间：2012-08-10T15:20:16.463
> 
> 标签：python, blender, coordinate-transformation

为了理解 blender python 游戏脚本，我目前尝试使用[此链接](http://blender.pellej.com/bge/FPSController.blend)中的 FPSController 结构构建一个可以绕球体行走的场景。对于重力和 FPSController 方向，我尝试构建一个 python 控制器，目前看起来像这样：

```
def main():
    print("Started")

    controller = bge.logic.getCurrentController()
    me = controller.owner

    distance, loc, glob = me.getVectTo((0,0,0))

    grav = controller.actuators['Gravity']

    strength = me['Gravity']
    force = strength*(distance*distance)*glob

    grav.force = force

    try:
        rot = Vector((0,0,-1)).rotation_difference(glob).to_matrix()
    except Exception as E:
        print(E)
        rot = (0,0,0)

    rotZ = me.orientation
    me.orientation = rot*rotZ

    controller.activate(grav)

main() 
```

它大致工作，直到任何角度超过 180 度，然后看起来不连续。我认为这是因为rotation_difference 是不连续的——[关于数学类型和实用程序的搅拌机文档](http://www.blender.org/documentation/blender_python_api_2_63_17/mathutils.html)没有说明任何内容，而且我对四元数表示还没有充分考虑到是否可以使用连续映射——我想有一种更优雅的方式实现局部 Z 方向持续依赖于鼠标，而局部 X 和 Y 方向持续依赖于某个给定向量，但是如何实现呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-10T19:32:10.967

共识似乎是你应该使用四元数来完成这样的旋转。

有关 api，请参见：http: [//www.blender.org/documentation/249PythonDoc/Mathutils.Quaternion-class.html](http://www.blender.org/documentation/249PythonDoc/Mathutils.Quaternion-class.html)

有关数学的介绍，请参阅此：[http ://en.wikipedia.org/wiki/Rotation_formalisms_in_three_dimensions#Quaternions](http://en.wikipedia.org/wiki/Rotation_formalisms_in_three_dimensions#Quaternions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-03T22:28:44.157

有一个对齐功能。如果游戏对象被称为自己的，它应该类似于`own.alignAxisToVect(vector, 2, 1)`2 是 Z 轴的索引（x=0，y=1，z=2），1 是对齐速度（在 0 和 1 之间）

# php - https 在第三方非 https 网站上

> ID：11904664
> 
> 赞同：0
> 
> 时间：2012-08-10T15:20:27.123
> 
> 标签：php

假设有一个不受 https 保护的第三方站点。

第三方网站集成了一个 javascript 调用，该调用基本上从我的网站获取付款表格并在第三方网站上添加付款表格。

此人填写付款表格，其中的表格操作为“https://example.com/...”，其中 example.com 是我的网站。

即使他们在不受 https 保护但表单操作受 https 保护的网站上填写付款表格，他们的信息是否会被加密。

所以基本上：

显示付款表格的网站称为[http://thirdparty.com/welcome](http://thirdparty.com/welcome)

付款表格具有以下表格代码：

```
<form name = "payment" action = "https://example.com/process"> 
```

此表单显示在非 https 加密站点上： http: [//thirdparty.com/welcome](http://thirdparty.com/welcome) 并发送到[https://example.com/process](https://example.com/process)

以这种形式提供的信息会被加密吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:49:23.277

他们提交的信息在通过 HTTP 发送时会被加密……</p>

…但是包含表单的页面是不安全的，可以在到达客户端的途中被拦截，并且可以添加额外的 JavaScript。这样的 JavaScript 可能会将他们输入的支付信息复制到攻击者的服务器（在它被加密之前）。

因此，总体而言，这种方法**并不**安全。

用户应该被引导到您网站页面中由您的网站托管的表单，而不是嵌入在第三方网站上。

# python - Django CSRF框架忽略会话cookie域

> ID：11904665
> 
> 赞同：1
> 
> 时间：2012-08-10T15:20:33.727
> 
> 标签：python, django, cookies

我在 Django 中使用[SESSION_COOKIE_DOMAIN](https://docs.djangoproject.com/en/dev/ref/settings/#session-cookie-domain)设置来指定它将我所有应用程序的 cookie 存储在“mysite.com”域下。然而，在 Firefox/Chrome 中进行测试后，我发现即使现在大多数 cookie 都使用正确的域，Django 仍然将“csrftoken”cookie 存储在完整主机名下（例如“sub.mysite.com”）。

这看起来像 Django 中的错误，还是 CSRF 框架应该明确忽略我的自定义 SESSION_COOKIE_DOMAIN 值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T16:04:53.727

CSRF 与会话无关，并且有自己的 cookie 域设置[`CSRF_COOKIE_DOMAIN`](https://docs.djangoproject.com/en/1.4/ref/settings/#csrf-cookie-domain)。

# c# - Quartz作业存储与活动数据有关吗？

> ID：11904667
> 
> 赞同：4
> 
> 时间：2012-08-10T15:20:43.453
> 
> 标签：c#, .net, quartz.net

正如我从[Quartz 官方文档](http://quartznet.sourceforge.net/tutorial/lesson_9.html)中了解到的，AdoStore 必须用于活动数据存储，例如 JobDataMap 和其他数据。如果我错了，请纠正我。

除了这个澄清之外，我想知道是否有任何方法可以从数据库加载作业和触发器定义。一种插件或类似的东西`Quartz.Plugin.Xml.XMLSchedulingDataProcessorPlugin`用于从 xml 文件中读取。

如果没有，实现从数据库读取的自定义插件或使用其他方法是最佳解决方案吗？

[编辑] 拉斯特科 2012 年 8 月 13 日上午 11:16:28

从下面的答案中，我认为我没有很好地描述你的问题。我想从数据库加载作业和触发器配置。就像它在代码或 xml 中定义一样：

```
 <job>
  <name>WriterJob</name>
  <group>CommonGroup</group>
  <description>Test WriteJob</description>
  <job-type>Console.WriteJob, Console</job-type>
</job>
<trigger>
  <simple>
    <name>WriterJobTrigger</name>
    <group>CommonTriggerGroup</group>
    <description>Simple trigger to simply fire sample job</description>
    <job-name>WriterJob</job-name>
    <job-group>CommonGroup</job-group>
    <misfire-instruction>SmartPolicy</misfire-instruction>
    <repeat-count>-1</repeat-count>
    <repeat-interval>10000</repeat-interval>
  </simple>
</trigger> 
```

我想在数据库中以同样的方式拥有它。从为 ADOJobStore 生成的表中，我看到这些表与跟踪当前活动的作业更相关 - 跟踪其状态、触发器触发等。

我希望我现在更清楚。如果您需要任何额外的说明，请随时问我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-11T20:14:03.770

> 我想知道有没有办法从数据库加载作业和触发器定义。

如果您要从数据库中检索作业列表，您可以执行以下操作：

```
 Quartz.IScheduler scheduler ; 

   ....

  var details = (from groupName in scheduler.GetJobGroupNames()
                 from jobKey in scheduler.GetJobKeys(
                      Quartz.Impl.Matchers.GroupMatcher<Quartz.JobKey>
                      .GroupEquals(groupName))
                select new 
                { 
                    GroupName = groupName, 
                    JobName = jobKey.Name  , 
                    triggers = scheduler.GetTriggersOfJob(jobKey) 
                }
               ); 
```

此语法适用于 Quartz 2.0。

如果您正在构建一个与实际执行作业的程序不同的程序，那么您只需创建一个具有相同细节的调度程序，但不要调用 scheduler.Start()

如果您希望向数据库中添加新工作，您可以执行以下操作：

（其中 SimpleJob 是您的工作的 C# 类名称）

```
string jobName = ...
string triggerName = ...
string cronExpression = ...  
Quartz.IScheduler scheduler = ... 

Quartz.IJobDetail jobDetail = Quartz.JobBuilder.Create<SimpleJob>()
                    .WithIdentity(jobName)
                    .StoreDurably()
                    .Build();

Quartz.ITrigger trigger = Quartz.TriggerBuilder.Create()
                    .WithIdentity(triggerName)
                    .WithSchedule(Quartz.CronScheduleBuilder.CronSchedule(cronExpression))
                    .ForJob(jobName)
                    .Build();

scheduler.ScheduleJob(jobDetail, trigger); 
```

如果您希望在不附加触发器的情况下将作业添加到数据库

```
Quartz.IJobDetail jobDetail = Quartz.JobBuilder.Create<SimpleJob>()
                    .WithIdentity(jobName)
                    .StoreDurably()
                    .Build();

scheduler.AddJob(jobDetail, false) 
```

如果您希望安排执行一次性现有作业，那么

```
 Quartz.ITrigger trigger1 = Quartz.TriggerBuilder.Create()
                        .WithIdentity(triggerName)
                        .WithSchedule(Quartz.SimpleScheduleBuilder.Create())
                        .ForJob(jobName)
                        .Build();

   scheduler.ScheduleJob(trigger1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:46:26.553

我将 Quartz 用于 java，但由于基本逻辑是相同的，我可以说将 XML 用于任务调度程序不是一个好主意。在作业的每次状态更改时，您都需要更改 xml 文件。使用数据库（在您的情况下为 AdoJobStore）可能更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T13:36:19.970

看看 XMLSchedulingDataProcessorPlugin[实现](https://github.com/quartznet/quartznet/blob/e4e71b78bea5a4b7cb41408902207e9880b027ad/src/Quartz/Plugin/Xml/XMLSchedulingDataProcessorPlugin.cs)。基本上你需要实现 ISchedulerPlugin 并添加逻辑来加载作业。

# php - php创建图像

> ID：11904672
> 
> 赞同：0
> 
> 时间：2012-08-10T15:20:57.347
> 
> 标签：php, image

我正在使用 php 函数创建图像，`imagesetpixel()`我可以设置起始 x 位置和 y 位置，但如果我在代码中有它：

```
for ($i=1;$i<50;$i++)
{ 
    for ($a=1;$a<50;$a++)
    { 
         imagesetpixel($img, $i, $a, $color); 
    } 
} 
```

这会创建每个字段 1x1px 但我希望它可能是 5x5px。有可能做出类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:26:33.260

见下面的网址： -

[http://phptutorial.info/?imagesetpixel](http://phptutorial.info/?imagesetpixel)

[http://php.net/manual/en/function.imagesetpixel.php](http://php.net/manual/en/function.imagesetpixel.php)

例子：-

```
<?php

$x = 200;
$y = 200;

$gd = imagecreatetruecolor($x, $y);

$corners[0] = array('x' => 100, 'y' =>  10);
$corners[1] = array('x' =>   0, 'y' => 190);
$corners[2] = array('x' => 200, 'y' => 190);

$red = imagecolorallocate($gd, 255, 0, 0); 

for ($i = 0; $i < 100000; $i++) {
  imagesetpixel($gd, round($x),round($y), $red);
  $a = rand(0, 2);
  $x = ($x + $corners[$a]['x']) / 2;
  $y = ($y + $corners[$a]['y']) / 2;
}

header('Content-Type: image/png');
imagepng($gd);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:24:50.593

您必须将图像的大小作为参数传递给 - 例如 [imagecreate][1] 函数。

例子：

```
$width = 5;
$height = 5;

$img = imagecreate($width, $height); 
```

# android - 如何限制谷歌地图缩放

> ID：11904675
> 
> 赞同：1
> 
> 时间：2012-08-10T15:21:19.177
> 
> 标签：android, google-maps

是否可以限制用户在 Android 中缩小 Google 地图的距离？我不希望用户能够缩小到足以看到多个地球。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:09:14.587

您可以禁用内置缩放并添加您自己的按钮并在单击时更改您的缩放。您将能够禁用某个级别的缩小。

**重要**我认为用户可能总是能够水平滚动。

# c# - C# Clean Rss 描述

> ID：11904677
> 
> 赞同：-1
> 
> 时间：2012-08-10T15:21:23.100
> 
> 标签：c#, html, rss, plaintext

> **可能重复：**
> [如何将 Html 转换为纯文本？](https://stackoverflow.com/questions/286813/how-do-you-convert-html-to-plain-text)

我想在我的应用程序中显示一些 Rss 提要。但我不想展示完整的描述。我只想显示 rss 描述的前几句话。

由于许多 Rss 提要以 html 形式出现，我想转换为纯文本并从中获取子字符串。

有没有办法在 C# 中使用 html -> 纯文本？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:25:35.290

请参阅关于[如何将 Html 转换为纯文本的 filbys 答案？](https://stackoverflow.com/questions/286813/how-do-you-convert-html-to-plain-text/286825#286825)如何做到这一点。您还应该在同一个问题[链接](https://stackoverflow.com/questions/286813/how-do-you-convert-html-to-plain-text/1121515#1121515)上看到 Judah Himango 的回答。他基本上说你应该使用[`HtmlAgilityPack`](http://htmlagilitypack.codeplex.com/)which will do it for you。

希望这可以帮助！

# linux - 这是如何在 poll(2) 中使用 posix 队列？

> ID：11904678
> 
> 赞同：1
> 
> 时间：2012-08-10T15:21:28.483
> 
> 标签：linux, queue, posix, polling

我已经在几个地方读过，您可以将 poll(2) 与 posix 队列一起使用，但在互联网上没有找到一个简单的例子。所以我认为它应该是这样的

```
mq_send(socket->mFd, (const char*)data->getBuffer(), data->getLen(), 0 );
//and then in an other porcess here is my poll
::poll(m_descriptors, ii, msecWaitTime); 
```

但这不起作用，我希望 POLLIN 或 POLLRDNORM 或可能 POLLRDBAND 或其他任何东西到达，但它没有。而且我很确定我的描述符在 PollFd 数组中。我做错了什么，或者这是正确的，问题出在我的代码中的其他地方？（我在 OpenSuse 上，这是一个 linux，所以我猜这应该可以）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:44:27.553

好的，NOS 是对的。这个例子在理论上是正确的，它在我的 OpenSuse 上确实有效，我的错误是忘记填写这个 fd 的事件掩码。

# javascript - 有没有办法将选择器返回到元素？是 $(this) 还是其他方法？

> ID：11904679
> 
> 赞同：-1
> 
> 时间：2012-08-10T15:21:29.753
> 
> 标签：javascript, jquery

我得到了很多东西，我打算用javascript制作一个hashmap来让我记住某些东西，其中之一是最近接触过的对象。话虽如此，我很好奇我是否可以创建一个键->值或数组来保存所单击项目的选择器。

我不确定它是否是这样的：

```
var item = new Array();
$("div.item").click(function(){
   item.push($(this));
}); 
```

然后单击的每个项目都添加到数组中，我可以执行以下操作：

```
$(item).each(function(){
    $(this).css("background-color","red");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:31:03.063

创建一个空的 jQuery 集合并添加到它。

```
var items = $([]);
$("div.item").click(function(){
   var elem = $(this);
   items = items.add(elem);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T15:33:02.973

您可以使用 jQuery 对象，而不是使用数组：

```
var $items = $();
$("div.item").click(function () {
   $items = $items.add(this);
});
$items.css('background-color', 'red'); 
```

[http://jsfiddle.net/b5qaT/](http://jsfiddle.net/b5qaT/)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-10T15:27:01.320

您希望将事件作为参数传递给事件处理程序函数。像这样：

```
$("div.item").click(function(e){...
    e.whateverYouWantToDoWithIt; 
```

该事件是一个 javascript 对象，而不是 jquery。你可以谷歌 javascript 事件方法、属性等，看看你能用它做什么。

**编辑** 对不起，我读你的问题有点快。如果您想将实际的 DOM 对象（div）存储在数组中，那么是的，您将使用 $(this) 选择器。

# asp.net-mvc-3 - 我的模型应该如何从动态添加的文本框将数据存储在数据库中？

> ID：11904682
> 
> 赞同：3
> 
> 时间：2012-08-10T15:21:34.013
> 
> 标签：asp.net-mvc-3, entity-framework-4

我的模型：

```
public class Order
{
     public int OrderId { get; set; }
     public int Quantity { get; set; }
     public double Width { get; set; }
     public double Height { get; set; }
} 
```

在我对该模型的强类型视图中，我有一个具有`TextBoxFor`该属性的表单，例如：

```
<table>
    <tr>
        <td><a href="#" onclick="AddTextBox()">+</a></td>
        <td>@Html.TextBoxFor(m => m.Quantity)</td>
        <td>@Html.TextBoxFor(m => m.Width)</td>
        <td>@Html.TextBoxFor(m => m.Height)</td>
    </tr>
</table> 
```

带有 的链接`AddTextBox()`是一个 jQuery 函数，用于动态添加另一个表，例如包含三个以上文本框的表。

我的控制器：

```
[HttpPost]
public ActionResult SaveOrder(Order order)
{
    context.Order.Add(order);
    context.SaveChanges();
    return View();
} 
```

调试时，我可以看到订单对象填充了表单中的数据，但仅填充了第一个数量、重量和高度文本框的值，我知道这是预期的行为，并且我知道我收到了所有值，因为我测试过下面的示例和我的列表已正确填写：

```
[HttpPost]
public ActionResult SaveOrder(List<int> Quantity, List<int> Width, List<int> Height)
{
    return View();
} 
```

所以这里又是一个问题：我应该如何创建一个模型来保存该数据数组并保存在我的数据库中？

我希望我对这个问题很清楚，并感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:17:03.107

您的视图模型必须有一个您要添加到的列表。您不能将模型添加到单音的固定实例（`@model`在您的视图中）。所以你的模型必须是可扩展的。

这是您的示例，[编辑可变长度列表，ASP.NET MVC](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

看看他们做了什么，并为您的控制和视图做同样的事情。我完全基于这篇文章构建了我的应用程序——它足够简单，即使是新手（有基础知识）也能理解，并在你的领域内实现类似的功能。他们还有完整的演示源代码，您可以下载和使用

描述过程太长了，用简单的话你

1.  在您的控制器中创建专用操作并使用 ajax 调用它以生成您想要添加到视图中的任何内容（`textbox`在您的情况下，但它肯定会更复杂）和

2.  `$(<your selector>).append(<your result from ajax call>)`.

3.  在发回控制器时，您将获得包含您在视图中添加/删除的**实际**项目数量的列表

4.  您将它们一一添加到您的 DTO 并在完成后提交事务。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T22:28:29.173

最后 ！

我不知道我是否对我的问题很清楚，但这是我找到的解决方案，我不知道这是否非常简单，因为我对编程不是很有经验，所以感谢谁试图帮助我。

我不是只有一个模型，而是必须创建另一个模型来保存我的数据库中每个订单的所有度量，所以我将模型更改为如下所示：

```
public class Order
{
     public int OrderId { get; set; }
     public virtual List<Measures> Measures { get; set;}
     // I have many other properties here but i erased for simplicity...
}

public class Measures
{
     public int MeasuresId { get; set; }
     public int Quantity { get; set; }
     public double Width { get; set; }
     public double Height { get; set; }
     public Order Order { get; set; }
} 
```

因此，在我添加了一些`<input>`动态之后，他们的所有名称属性都是数量、宽度或高度，而我在控制器上收到的响应是这样的：

```
Quantity: 10
Width: 20
Height: 16
Quantity: 3
Width: 14
Height: 10
Quantity: 500
Width: 2
Height: 5 
```

最后，我的控制器是：

```
 [HttpPost]
    public ActionResult SaveOrder(Order Order, List<int> Quantity, List<double> Width, List<double> Height)
    {
        List<Measures> Measures = new List<Measures>();

        //At this point my Order model is filled with all the properties
        //that came from the form and I'll save it to the Database so that
        //this model can have its Id filled from the identity column
        unitOfWork.ServicosRepository.Insert(Order);
        unitOfWork.Save();

        //Now that I have the OrderId I can add how much Measures I want referencing
        //that OrderId to access that further on my View
        for (int i = 0; i < Quantity.Count; i++)
        {
            Measures measures = new Measures { Quantity = Quantity[i], Width = Width[i], Height = Height[i], Order = Order };
            unitOfWork.MedidasRepository.Inserir(medidas);
            unitOfWork.Salva();
            Medidas.Add(medidas);
        }

        return PartialView("_Emitir", Pedido);
    } 
```

# c# - Ajax 调用 .Net 并返回 cookie

> ID：11904685
> 
> 赞同：2
> 
> 时间：2012-08-10T15:21:46.313
> 
> 标签：c#, jquery, .net

我正在从 html 页面（移动设备）向 .net 服务器进行 ajax 调用以进行登录和身份验证。现在我正在发送一个成功的 JSON 响应：true。这一切都很好，但我需要设置 cookie，以便在登录后进行其他调用以记录数据时记住用户。

我读过有关使用 JSONP 的信息，但如果我不必这样做，我宁愿不走那条路，因为这意味着要改变很多。我只想在响应中发回 cookie 并在客户端手动设置它。

如何在 .net 的服务器端检索此 cookie（或创建 cookie？”并在响应中发回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:32:23.343

在你`success`的ajax事件中，你可以在客户端设置cookie

假设你`JSON`是这样的

```
 {    "success": "true",    "username": "scott"   } 
```

在您的 ajax 函数中，检查 JSON，如果成功项值为 true，则设置 cookie。

```
$.ajax({
        url: "someserverpage.aspx",
        success: function(data) {
           if(data.success=="true")
           {
              SetCookie("YoursiteUsername",data.username,365);                   
           }
        }
}); 
```

SetCookie 函数设置 cookie。

```
function SetCookie(c_name,value,exdays)
{
  var exdate=new Date();
  exdate.setDate(exdate.getDate() + exdays);
  var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
  document.cookie=c_name + "=" + c_value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:27:54.190

在检测到您的成功：真响应后，您可以使用 javascript 设置 cookie 客户端。

# java - com.google.android.maps.MapView ClassNotFoundException

> ID：11904691
> 
> 赞同：3
> 
> 时间：2012-08-10T15:22:13.910
> 
> 标签：java, android, google-maps, classnotfoundexception

我正在尝试进行谷歌地图活动，但出现 LogCat 错误并且我的应用程序崩溃。我注册API密钥时使用了android提供的编码，所以我不知道为什么它不起作用。我需要帮助解决这个问题。

日志猫

```
08-10 11:04:38.854: W/dalvikvm(702): Unable to resolve superclass of Lcom/maps/google/Main; (402)
08-10 11:04:38.854: W/dalvikvm(702): Link of class 'Lcom/maps/google/Main;' failed
08-10 11:04:38.854: D/AndroidRuntime(702): Shutting down VM
08-10 11:04:38.854: W/dalvikvm(702): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
08-10 11:04:38.874: E/AndroidRuntime(702): FATAL EXCEPTION: main
08-10 11:04:38.874: E/AndroidRuntime(702): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.maps.google/com.maps.google.Main}: java.lang.ClassNotFoundException: com.maps.google.Main
08-10 11:04:38.874: E/AndroidRuntime(702):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
08-10 11:04:38.874: E/AndroidRuntime(702):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-10 11:04:38.874: E/AndroidRuntime(702):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-10 11:04:38.874: E/AndroidRuntime(702):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-10 11:04:38.874: E/AndroidRuntime(702):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-10 11:04:38.874: E/AndroidRuntime(702):  at android.os.Looper.loop(Looper.java:137)
08-10 11:04:38.874: E/AndroidRuntime(702):  at android.app.ActivityThread.main(ActivityThread.java:4745)
08-10 11:04:38.874: E/AndroidRuntime(702):  at java.lang.reflect.Method.invokeNative(Native Method)
08-10 11:04:38.874: E/AndroidRuntime(702):  at java.lang.reflect.Method.invoke(Method.java:511)
08-10 11:04:38.874: E/AndroidRuntime(702):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-10 11:04:38.874: E/AndroidRuntime(702):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-10 11:04:38.874: E/AndroidRuntime(702):  at dalvik.system.NativeStart.main(Native Method)
08-10 11:04:38.874: E/AndroidRuntime(702): Caused by: java.lang.ClassNotFoundException: com.maps.google.Main
08-10 11:04:38.874: E/AndroidRuntime(702):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
08-10 11:04:38.874: E/AndroidRuntime(702):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
08-10 11:04:38.874: E/AndroidRuntime(702):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
08-10 11:04:38.874: E/AndroidRuntime(702):  at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
08-10 11:04:38.874: E/AndroidRuntime(702):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
08-10 11:04:38.874: E/AndroidRuntime(702):  ... 11 more 
```

XML 文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.google.android.maps.MapView
        android:id="@+id/MView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:apiKey="02ooeHTBsCB6ez4yyEGFEyiuNCz5hTHubgxBMfg" />

</RelativeLayout> 
```

Java 文件

```
package com.maps.google;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import android.os.Bundle;

public class Main extends MapActivity {

    MapView map;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        map = (MapView)findViewById(R.id.MView);
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-10T15:44:53.747

在您的文件中添加`<uses-library`这样的`manifest`内容。

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
 package="com.example.package.name">
  ...
  <application android:name="MyApplication" >
    <uses-library android:name="com.google.android.maps" />
    ...
  </application>
  ...
</manifest> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T15:51:13.903

确保您在应用程序清单中包含以下行：

```
<uses-library android:required="true" android:name="com.google.android.maps" /> 
```

并确保它在正确的位置。我的问题（有类似的错误消息）是我把它放在那里，但就像使用权限的东西一样，它就在根元素清单的下面，而实际上，uses-library 元素应该放在应用程序元素下面。如果我不够清楚，请参阅以下部分：从 Sameers 链接配置应用程序清单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T15:39:51.047

您是否在项目中包含了谷歌地图类？

您需要将地图 jar 文件添加到您的项目中。

jar 可以在您的 `{ANDROID-SDK_HOME}\add-ons\addon_google_apis_google_inc_*\libs`目录中找到。

这里还有另外两个问题可能会对您的情况有所帮助。

1.  [我想要获取库为 com-google-android-maps-to-add-my-project](https://stackoverflow.com/questions/6409936/i-want-to-get-library-for-com-google-android-maps-to-add-my-project)
2.  [google-maps-android-api-gives-a-noclassdeffounderror](https://stackoverflow.com/questions/3792148/google-maps-android-api-gives-a-noclassdeffounderror)

# c# - 在 C# 中操作密封类型

> ID：11904692
> 
> 赞同：3
> 
> 时间：2012-08-10T15:22:17.050
> 
> 标签：c#, oop, inheritance, extension-methods

例如，我想向`integer`(ie, `Int32`) 添加一个方法，这将使我能够执行以下操作：

```
int myInt = 32;
myInt.HelloWorld(); 
```

可以说，您可以编写一个采用 , 的方法，而不是坚持执行上述操作，`integer`如下`HelloWorld(integer)`所示，更容易：

```
int myInt = 32;
HelloWorld(myInt); 
```

但是，我只是好奇这是否可能。如果属实，那么向知名类添加一些其他功能是一种*好的编程实践吗？*

PS：我试图创建另一个*继承*自的类`Int32`，但不能从密封类型“int”派生。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T15:23:23.530

您可以为`int32`.

```
 public static class Int32Extensions
   {
       public static void HelloWorld(this int value) 
       {
         // do something
       }
   } 
```

只要记住`using`类所在的命名空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T15:23:59.987

你在[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)之后。他们在面向对象编程方面没有任何问题，因为您无法访问私有变量，也无法以任何方式改变对象的行为。

它是您准确描述的唯一语法糖。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T15:25:00.063

我想你提到了扩展方法[的扩展方法编程指南](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-10T15:28:25.137

问：向知名类添加一些其他功能是一种好的编程实践吗？

这种类型的讨论确实属于“程序员”。

请看一下这个关于程序员的讨论，它有很多关于使用扩展方法的哲学观点：

[https://softwareengineering.stackexchange.com/questions/77427/why-arent-extension-methods-being-used-more-extensively-in-net-bcl](https://softwareengineering.stackexchange.com/questions/77427/why-arent-extension-methods-being-used-more-extensively-in-net-bcl)

还：

[https://softwareengineering.stackexchange.com/questions/41740/when-to-use-abstract-classes-instead-of-interfaces-and-extension-methods-in-c?lq=1](https://softwareengineering.stackexchange.com/questions/41740/when-to-use-abstract-classes-instead-of-interfaces-and-extension-methods-in-c?lq=1)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T15:26:34.720

使用扩展方法

```
static class Program
{
    static void Main(string[] args)
    {
        2.HelloWorld();
    }

    public static void HelloWorld(this int value)
    {
        Console.WriteLine(value);
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-10T15:26:41.603

您可以使用这样的扩展方法：

```
public static class IntExtensions
{
    public static string HelloWorld(this int i)
    {
        return "Hello world";
    }
} 
```

# java - 制表符分隔的字符串到数组

> ID：11904693
> 
> 赞同：1
> 
> 时间：2012-08-10T15:22:16.983
> 
> 标签：java, arrays, string, csv

我想要实现的是从 Excel 工作表中读取数据（保存在 Txt 中，以制表符分隔），逐行读取数据，每个单独的列都是我想要存储在数组中的不同数据。

我尝试了不同的方法。我什至从互联网上下载了 CSVReader 类，但它没有用。至少这一次它阅读真实的字符而不是胡言乱语。

我现在拥有的版本是使用 bufferedReader 和 String Tokenizer。但它没有正确阅读。

这是代码：

```
 import java.io.BufferedReader;
     import java.io.BufferedWriter;
     import java.io.File;
     import java.io.FileNotFoundException;
     import java.io.FileReader;
     import java.io.FileWriter;
     import java.io.IOException;
     import java.util.StringTokenizer;

     import com.csvreader.CsvReader;

     import au.com.bytecode.opencsv.CSVReader;

     public class excelToText{
     public static void main(String[] args) throws IOException {

    try
    {

        //csv file containing data
          BufferedReader CSVFile = new BufferedReader(new          FileReader("C:/Users/nhajjar/workspace/MB/src/yoyo.txt"));

          // Read first line.
          String dataRow; 
          int lineNumber = 0; 

          while ((dataRow = CSVFile.readLine() )!= null)
          {
                String [] dataArray;
                lineNumber++; 

                String delimiter = "\t";
                /* given string will be split by the argument delimiter provided. */
                dataArray = dataRow.split(delimiter);
                /* print substrings */ 
```

// for(int i =0; i < dataArray.length ; i++) // System.out.println(dataArray[i]);

```
 String PrinterName = dataArray[0];
                String Model = dataArray[1];
                String IP = dataArray[2];
                String Location = dataArray[3];
                String Department = dataArray[4];
                String PrimServer = dataArray[5];
                String SecServer = dataArray[6];
                String ShareName = dataArray[7];
                String GroupNamePrefix = dataArray[8];
                String GroupNameSuffix = dataArray[9];
                String GroupNameFinal = dataArray[10];
                String WSPPrefix = dataArray[11];
                String WSPFull = dataArray[12];
                String PrimWSP = dataArray[13];
                String SecWSP = dataArray[14];

              System.out.println("PrinterName is : " + PrinterName);
                System.out.println("Model is : " + Model);
                System.out.println("IP is : " + IP);
                System.out.println("Location is : " + Location);
                System.out.println("Department is : " + Department);
                System.out.println("PrimServer is : " + PrimServer);
                System.out.println("SecServer is : " + SecServer);
                System.out.println("ShareName is : " + ShareName);
                System.out.println("GroupNamePrefix is : " + GroupNamePrefix);
                System.out.println("GroupNameSuffix is : " + GroupNameSuffix);
                System.out.println("GroupNameFinal is : " + GroupNameFinal);
                System.out.println("WSPPrefix is : " + WSPPrefix);
                System.out.println("WSPFull is : " + WSPFull);
                System.out.println("PrimWSP is : " + PrimWSP);
                System.out.println("PrimWSP is : " + PrimWSP);
                System.out.println("SecWSP is : " + SecWSP);

                /*//writing file for ones that were not sent out. 
                  File file = new File("write.txt");
                  BufferedWriter output = new BufferedWriter(new FileWriter(file));
                  */

            }

            CSVFile.close();

        }   catch (FileNotFoundException e) {
            e.printStackTrace();
        }   catch (IOException e) {
            e.printStackTrace();
        }   catch(Exception e)          {
          System.out.println("Exception while reading/writing csv file: " + e);                   
        }// end Exceptions 

  }// end try block 
     } 
```

输入是：

```
 Printer name    Model   IP  Location    Department  Primary Server  Secondary Server    Share Name
    Boundary Sprinter Techs Lexmark E360dn      Boundary    Sprinter    s173m928site    s173mho1site    928-Sprinter-techs-L-E360dn
    Boundary Sprinter Xerox 7232    Xerox WorkCentre 7232       Boundary    Sprinter    s173m928site    s173mho1site    928-Sprinter-WC7232
    Boundry Parts   HP LaserJet P2055dn     Boundary    Parts   s173m928site    s173mho1site    928-Parts-LJ-P2055dn
    Boundry Sales   HP Color LaserJet CP4005        Boundary    Sales   s173m928site    s173mho1site    928-Sales-Main-CP4005
    Boundry Techs East  HP LaserJet P3015       Boundary    Techs East  s173m928site    s173mho1site    928-Techs-east-LJ-P3015
    Boundry Techs West  Lexmark E352dn      Boundary    Techs West  s173m928site    s173mho1site    928-Techs-west-L-E352dn
    Concord     Lexmark E360dn      Concord         s173mho1site    
    Dundas Parts    Xerox WorkCentre 7232       Dundas  Parts   s173m910site    s173mho1site    910-Parts-WC-7232
    Dundas Preowned Xerox WorkCentre 7425       Dundas  Preowned    s173m910site    s173mho1site    910-PreOwned-WC-7425
    Dundas Sales 2nd Floor  HP Color LaserJet CP4025        Dundas  Sales   s173m910site    s173mho1site    910-Sales-2nd-CP4025
    Dundas Sales Main Floor HP Color LaserJet CP4025        Dundas  Sales   s173m910site    s173mho1site    910-Sales-Main-CP4025

output im getting is : 

PrinterName is : Printer name 
Model is : Model
IP is : IP
Location is : Location
Department is : Department
PrimServer is : Primary Server 
SecServer is : Secondary Server
ShareName is : Share Name
GroupNamePrefix is : Group Name Prefix
GroupNameSuffix is : Group Name Suffix
GroupNameFinal is : Group Name Final
WSPPrefix is : WSP Prefix
WSPFull is : WSP Full
PrimWSP is : Primary WSP
PrimWSP is : Primary WSP
SecWSP is : Secondary WSP

PrinterName is : Boundary Sprinter Techs
Model is : Lexmark E360dn
IP is : 53.254.177.138
Location is : Boundary
Department is : Sprinter
PrimServer is : s173m928site
SecServer is : s173mho1site
ShareName is : 928-Sprinter-techs-L-E360dn
GroupNamePrefix is : D173_PRINTER-
GroupNameSuffix is : 928-Sprinter-techs-L-E360dn
GroupNameFinal is : D173_PRINTER-928-Sprinter-techs-L-E360dn
WSPPrefix is : #;\D173\_GLOBALRESOURCES\GROUPS\Printers\
WSPFull is : #;\D173\_GLOBALRESOURCES\GROUPS\Printers\D173_PRINTER-928-Sprinter-techs-L-E360dn.wsp;D173_PRINTER-928-Sprinter-techs-L-E360dn
PrimWSP is : >;%;\\s173m928site.cambc.corpintra.net\928-Sprinter-techs-L-E360dn
PrimWSP is : >;%;\\s173m928site.cambc.corpintra.net\928-Sprinter-techs-L-E360dn
SecWSP is : ;>;%;\\s173mho1site.cambc.corpintra.net\928-Sprinter-techs-L-E360dn

PrinterName is : Boundary Sprinter Xerox 7232
Model is : Xerox WorkCentre 7232
IP is : 53.254.177.136
Location is : Boundary
Department is : Sprinter
PrimServer is : s173m928site
SecServer is : s173mho1site
ShareName is : 928-Sprinter-WC7232
GroupNamePrefix is : D173_PRINTER-
GroupNameSuffix is : 928-Sprinter-WC7232
GroupNameFinal is : D173_PRINTER-928-Sprinter-WC7232
WSPPrefix is : #;\D173\_GLOBALRESOURCES\GROUPS\Printers\
WSPFull is : #;\D173\_GLOBALRESOURCES\GROUPS\Printers\D173_PRINTER-928-Sprinter-WC7232.wsp;D173_PRINTER-928-Sprinter-WC7232
PrimWSP is : >;%;\\s173m928site.cambc.corpintra.net\928-Sprinter-WC7232
PrimWSP is : >;%;\\s173m928site.cambc.corpintra.net\928-Sprinter-WC7232
SecWSP is : ;>;%;\\s173mho1site.cambc.corpintra.net\928-Sprinter-WC7232

PrinterName is : Boundry Parts
Model is : HP LaserJet P2055dn
IP is : 53.254.193.222
Location is : Boundary
Department is : Parts
PrimServer is : s173m928site
SecServer is : s173mho1site
ShareName is : 928-Parts-LJ-P2055dn
GroupNamePrefix is : D173_PRINTER-
GroupNameSuffix is : 928-Parts-LJ-P2055dn
GroupNameFinal is : D173_PRINTER-928-Parts-LJ-P2055dn
WSPPrefix is : #;\D173\_GLOBALRESOURCES\GROUPS\Printers\
WSPFull is : #;\D173\_GLOBALRESOURCES\GROUPS\Printers\D173_PRINTER-928-Parts-LJ-P2055dn.wsp;D173_PRINTER-928-Parts-LJ-P2055dn
PrimWSP is : >;%;\\s173m928site.cambc.corpintra.net\928-Parts-LJ-P2055dn
PrimWSP is : >;%;\\s173m928site.cambc.corpintra.net\928-Parts-LJ-P2055dn
SecWSP is : ;>;%;\\s173mho1site.cambc.corpintra.net\928-Parts-LJ-P2055dn

PrinterName is : Boundry Sales
Model is : HP Color LaserJet CP4005
IP is : 53.254.193.117
Location is : Boundary
Department is : Sales
PrimServer is : s173m928site
SecServer is : s173mho1site
ShareName is : 928-Sales-Main-CP4005
GroupNamePrefix is : D173_PRINTER-
GroupNameSuffix is : 928-Sales-Main-CP4005
GroupNameFinal is : D173_PRINTER-928-Sales-Main-CP4005
WSPPrefix is : #;\D173\_GLOBALRESOURCES\GROUPS\Printers\
WSPFull is : #;\D173\_GLOBALRESOURCES\GROUPS\Printers\D173_PRINTER-928-Sales-Main-CP4005.wsp;D173_PRINTER-928-Sales-Main-CP4005
PrimWSP is : >;%;\\s173m928site.cambc.corpintra.net\928-Sales-Main-CP4005
PrimWSP is : >;%;\\s173m928site.cambc.corpintra.net\928-Sales-Main-CP4005
SecWSP is : ;>;%;\\s173mho1site.cambc.corpintra.net\928-Sales-Main-CP4005

PrinterName is : Boundry Techs East
Model is : HP LaserJet P3015
IP is : 53.254.193.220
Location is : Boundary
Department is : Techs East
PrimServer is : s173m928site
SecServer is : s173mho1site
ShareName is : 928-Techs-east-LJ-P3015
GroupNamePrefix is : D173_PRINTER-
GroupNameSuffix is : 928-Techs-east-LJ-P3015
GroupNameFinal is : D173_PRINTER-928-Techs-east-LJ-P3015
WSPPrefix is : #;\D173\_GLOBALRESOURCES\GROUPS\Printers\
WSPFull is : #;\D173\_GLOBALRESOURCES\GROUPS\Printers\D173_PRINTER-928-Techs-east-LJ-P3015.wsp;D173_PRINTER-928-Techs-east-LJ-P3015
PrimWSP is : >;%;\\s173m928site.cambc.corpintra.net\928-Techs-east-LJ-P3015
PrimWSP is : >;%;\\s173m928site.cambc.corpintra.net\928-Techs-east-LJ-P3015
SecWSP is : ;>;%;\\s173mho1site.cambc.corpintra.net\928-Techs-east-LJ-P3015

PrinterName is : Boundry Techs West
Model is : Lexmark E352dn
IP is : 53.254.193.221
Location is : Boundary
Department is : Techs West
PrimServer is : s173m928site
SecServer is : s173mho1site
ShareName is : 928-Techs-west-L-E352dn
GroupNamePrefix is : D173_PRINTER-
GroupNameSuffix is : 928-Techs-west-L-E352dn
GroupNameFinal is : D173_PRINTER-928-Techs-west-L-E352dn
WSPPrefix is : #;\D173\_GLOBALRESOURCES\GROUPS\Printers\
WSPFull is : #;\D173\_GLOBALRESOURCES\GROUPS\Printers\D173_PRINTER-928-Techs-west-L-E352dn.wsp;D173_PRINTER-928-Techs-west-L-E352dn
PrimWSP is : >;%;\\s173m928site.cambc.corpintra.net\928-Techs-west-L-E352dn
PrimWSP is : >;%;\\s173m928site.cambc.corpintra.net\928-Techs-west-L-E352dn
SecWSP is : ;>;%;\\s173mho1site.cambc.corpintra.net\928-Techs-west-L-E352dn
Exception while reading/writing csv file: java.lang.ArrayIndexOutOfBoundsException: 7 
```

注意：我截断了输出。这些“空块”还有很多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:33:35.667

看起来你过于复杂了。CSV 文件具有逗号分隔值。因此，您的文件数据应类似于：

第 1 行：单元 1、单元 2、单元 3、单元 4 等...

第 2 行：第 2 行的单元格 1、第 2 行的单元格 2 等...

您使用制表符分隔的文件，因此您需要在制表符上拆分

```
//Read first line 
String dataRow;
int lineNumber = 0;
while((dataRow = CSVFile.readline()) != null)
{
    String [] dataArray;
    lineNumber++;
    String delimiter = "\t";
    dataArray = dataRow.split(delimiter); //Now dataArray contains all the tab delimited cells that were on line one of the .txt file
    //Start assigning the information to your variables since it is stored in dataArray
    String PrinterName = dataArray[0];//This would assign the first cell (row 1, column 1 in excel) that was read from the text file. From looking at your input this should be "Printer name"
    String Model = dataArray[1];
    String IP = dataArray[2];
    //etc...Assign the rest
    //Print your output
    //Do anything else you need to do
 }//end the while loop 
```

以下是一些来源：

[http://www.java-examples.com/java-string-split-example](http://www.java-examples.com/java-string-split-example)

注意：这个例子更接近你正在做的只是使用“\t”而不是“，”： [http://www.daniweb.com/software-development/java/threads/17262/reading-in-a-。 csv-file-and-loading-the-data-into-an-array](http://www.daniweb.com/software-development/java/threads/17262/reading-in-a-.csv-file-and-loading-the-data-into-an-array)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:32:08.483

标记仅由空格和加号分隔。那是因为第二个参数 of`StringTokenizer`不允许正则表达式。尝试使用`"\t"`似乎真正分开的字段。

顺便说一句，您并不需要每行有 100 个字符串数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T15:49:34.047

我建议使用该`String.split()`函数，因为这将大大简化您的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T15:54:28.077

我不建议自己使用 .split 或 StringTokenizer 类拆分数据。他们不考虑字段引用等......

使用类似（如前所述）OpenCSV 或 StrTokenizer（commons-lang 的一部分）之类的库为您进行解析。

使用制表符分隔解析器的 StrTokenizer 示例：

```
StrTokenizer tokenizer = StrTokenizer.getTSVInstance();    
while ( (line = ...) != null) {
    tokenizer.reset(line);
    String tokArray[] = tokenizer.getTokenArray();
} 
```

# android - 选择与目标 Android 4.1 兼容的设备

> ID：11904695
> 
> 赞同：1
> 
> 时间：2012-08-10T15:22:34.803
> 
> 标签：android, android-emulator

我正在开始对我正在开发的应用程序进行最终测试。我现在正在测试与不同 Android 版本的兼容性。现在，当我尝试在早于 4.1 的 Android 版本上运行我的应用程序时，AVD 管理器会说选择与 Android 4.1 兼容的设备。它不会向我显示我使用旧 Android 版本创建的任何 AVD。我只能选择 4.1 的 AVD 在我的清单文件中，我声明了这个：

```
<uses-sdk android:minSdkVersion="7" 
          android:targetSdkVersion="16"/> 
```

据我所知，这应该允许我的应用程序在从 API 7 到 API 16 的 Android 版本上运行。但它不会向我显示任何早于 4.1 的内容。我尝试从 AVD 管理器使用旧版本启动 AVD，然后安装我的应用程序。它让我可以安装它，但上面有一个红色的 X 表示它不兼容。在应用程序中，我使用默认文本颜色和黑色背景的透明按钮，在 4.1 上显示为白色文本。但在较旧的 Android 版本中，文本是黑色的。除了清单文件中的 uses-sdk 行之外，我不知道还有什么会影响到这一点。任何帮助将不胜感激。

# spring-data-jpa - 将spring data jpa与spring batch admin集成时出错

> ID：11904698
> 
> 赞同：2
> 
> 时间：2012-08-10T15:22:46.890
> 
> 标签：spring-data-jpa, spring-batch-admin

```
o.s.web.context.ContextLoader  - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'productfeedSvc': 
Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field:
private com.dealwallet.productFeed.repository.ProductFeedRepository 
com.dealwallet.productFeed.svc.impl.ProductSvcImpl.productFeedRepository;
nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'productFeedRepository': Initialization of bean failed; nested exception is java.lang.NoSuchMethodError: **org.springframework.transaction.interceptor.TransactionInterceptor.setTransactionManagerBeanName(Ljava/lang/String;)**V
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287) ~[spring-beans-3.1.2.RELEASE.jar:3.1.2.RELEASE] 
```

我正在使用带有spring批处理管理的spring data jpa，我配置了application-context.xml和persistance.xml，当我在tomcat中运行它时我得到了这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T09:44:37.663

说里面有问题`auto-wiring`。

所以检查这些项目：
- 确保您的班级（正在使用另一个班级）具有该属性的设置器。
- 确保您的类的属性（使用另一个的属性）具有另一个类 bean id 的确切名称。
- 确保您已启用`annotation`s。

# java - 使用 ant-jnlp-war builder 时如何添加/访问 JSP 文件？

> ID：11904699
> 
> 赞同：1
> 
> 时间：2012-08-10T15:22:50.627
> 
> 标签：java, jsp, ant, war, jnlp

我目前正在使用[Ant Web Start Task](http://ant-jnlp-war.sourceforge.net/)来构建一个相当大的 JNLP 项目。

我最近在我的项目中添加了一些 JSP 文件。然而，我有两个问题。

## 问题1：

部署应用程序时无法访问这些文件。我目前将它们放在一个`src/jsp directory.` 我已经将此目录添加到一个正在构建`<fileset dir="${jsp.dir}" includes="**/*.jsp"/>` 的 jar 中，如果我解压缩并探索所述 jar，我可以在 jar 中看到这些文件。

## 问题2：

ant jnlp 战争构建器似乎自动生成 web.xml 和 index.html。如何自动将当前的 web.xml（和新的 index.html）页面合并到我的 war 文件中，而不是每次都重新构建/覆盖它？

任何帮助表示赞赏。如果你不知道的话，我对很多都是新手。

# grails - Grails 将非英国字符从 GSP 编码到控制器

> ID：11904701
> 
> 赞同：0
> 
> 时间：2012-08-10T15:22:53.467
> 
> 标签：grails, encoding, utf-8, character-encoding, gsp

我有一个 Grails (2.0.4) 应用程序，全部设置为管理 UTF-8 编码（布局中的元标记，mysql 数据库表）。不幸的是，奇怪的事情发生了。

例如，如果在表单中（创建域实例）我键入任何包含非英国字符的文本，如下所示：

`más que nada`

POST 包含确切的文本（“á”字符原样），但控制器中的 params 变量包含错误的文本：

`mÃ¡s que nada`

视图和控制器之间什么都没有，怎么会这样呢？

我也尝试在 Config.groovy 中进行设置，但效果不佳：

```
grails.views.default.codec = "html" 
```

还有什么我想设置的吗？

提前感谢所有愿意花时间查看此问题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:05:52.463

Config.groovy 中的这些值如何：

```
grails.views.default.codec = "none"
grails.views.gsp.encoding = "UTF-8"
grails.converters.encoding = "UTF-8" 
```

那些配置正确吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:27:28.423

在产品上，我在 server.xml 中将我的 tomcat 6 配置为
`<Connector port="14080" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="14443" URIEncoding="UTF-8"/>`
最重要的一行是`URIEncoding="UTF-8"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T15:50:16.547

MySQL 数据库的默认字符集是什么？可以吗？

这就是我创建 MySQL 数据库的方式：

```
create database [dbname] DEFAULT CHARACTER SET = utf8 DEFAULT COLLATE utf8_swedish_ci; 
```

有关 CREATE DATABASE 的完整语法，请参见[http://dev.mysql.com/doc/refman/5.5/en/create-database.html](http://dev.mysql.com/doc/refman/5.5/en/create-database.html)

排序规则影响排序。您可以在 mysql 中获取带有“显示排序规则”的 sql 语句的列表。[http://dev.mysql.com/doc/refman/5.1/en/show-collat​​ion.html](http://dev.mysql.com/doc/refman/5.1/en/show-collation.html)

使用以下命令更改现有表的编码：

```
ALTER TABLE tbl_name CONVERT TO CHARACTER SET charset_name [COLLATE collation_name]; 
```

您可以使用“show create table tbl_name”命令检查现有表的编码。更改数据库的默认编码不会更改现有表（或从 mysql 转储导入的表）的编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T16:32:25.600

您是否已经尝试过

```
${myHtmlContent.encodeAsHtml()} 
```

在你看来？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T09:11:07.337

好吧，这篇文章已有几个月的历史了，OP 可能已经找到了更好的解决方案。但是我已经设法解决这个问题的另一种解决方案是显式更改相关参数的字符编码。

例如，`params.paramsname = new String(params.unicodeInput.getBytes("8859_1"), "UTF8");`

这将强制将`paramsname`其正确解码为 Unicode 字符。

我刚刚遇到了这个问题，只是提醒您这只是一种解决方法。我也在寻找更好的解决方案。加油！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T09:45:25.733

对不起，我几天前就发现了问题所在，但直到现在我还没有时间回答我自己的问题。

不幸的是，我忘了提到问题的关键部分，因为我不认为它是相关的。我只在 AJAX 调用时遇到了编码问题，我没有提到它，因为我的应用程序中的所有节省都是通过 AJAX 完成的。

因此，编码问题与 jQuery post 的内容类型的配置有关，它（要与 UTF-8 一起正常工作）必须是这样的：

```
contentType: "application/x-www-form-urlencoded;charset=UTF-8" 
```

# hibernate - Grails：当 PostgreSQL 中存在行且连接池打开时，选择返回（随机）null

> ID：11904717
> 
> 赞同：4
> 
> 时间：2012-08-10T15:23:33.327
> 
> 标签：hibernate, postgresql, grails, connection-pooling

我们开发了一个 Grails 2.0 应用程序，它以前可以在 MySQL 上顺利运行

我们一直在要求我们的管理员切换到他们喜欢的 PostgreSQL

我们为应用程序添加了许多新功能，包括现在导致我们问题的一个：异步第三方 Web 服务请求

所以，我们创建了一个域对象，我们称之为问题。使用`afterInsert`闭包`Resource`创建 a，以便稍后存储对外部 Web 服务的调用结果。

```
class Question implements Serializable {

    static hasMany = [resources: Resource]

    static constraints = {
        resources(nullable: true)
    } 
    def afterInsert() {
        Resource.withNewSession {
            Resource txt = Resource.create(null)
            this.addToResources(txt)
        }
    }           

    Resource retrieveResource(){
      return this.resources.find{ it instanceof Resource }
    }        

    static Question create(Map params) throws SaveDomainException {
        //question creation
    }    
} 
```

我们创建这样的问题：

```
//first we create question and save it
def question = Question.create(params)
question.save(flush:true, insert:true)
getThirdPartyService().doCallAsync((int)req.retrieveResource().id) 
```

并且`ThirdPartyService`作为一种方法`doCallAsync`产生一个`ExecutorService`（通过 executors grails 插件获得，因此这不是可怕的“Hibernate Session - Thread”问题），它`Resource.get(res_id)`使用如上所示获得的 Id执行一个简单的

问题在于，使用 PostgreSQL 和`pooled = true`in`DataSource.groovy`时，`get`有时返回 null，有时返回资源对象。

我们测试了 3 个不同的请求： a `get(id)`、 a`findById(id)`和`executeQuery`带有 select 的 an。

更奇怪的是，上面三行在同一个方法中，有时我们会得到不同的结果。三个中只有一个返回 null，或者三个返回 null，或者没有（我记得这是预期的行为）

我们打开了PostgreSQL查询日志看看是不是Hibernate缓存问题，但是这3个请求都出现在了日志中，所以hibernate每次都命中数据库。我们看到插入了具有正确 ID 的资源，然后是提交，然后是三个选择（提供了正确的资源 ID）

有没有人暗示我们将进一步测试以查看此错误来自何处？（我们试图改变连接池，没有运气）

最后一件事，如果我们`Thread.sleep(1000)`在请求之前添加一个（这是血淋淋的，但仅用于测试目的 ;-) ），一切都会顺利进行。所以，这似乎是 postgres 进程之间的可见性问题，但我们不知道如何解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:49:45.917

您已经花时间研究这个问题并将其写成一个很好的问题，但忽略了重要的日志？

我推测您的保存和异步获取之间存在重叠事务。保存未提交或获取在保存发生之前看到一致的快照。确保您在日志记录中启用了 process-id，或者以其他方式来区分连接并查看语句发生的顺序。

* * *

编辑：看起来像事务快照时间。

在 PostgreSQL 中，所有语句都在一个事务中（可能是隐式的并且只持续一个语句）。

默认模式是“Read Committed”，这意味着您可以看到在事务期间发生的提交。

还有一个“可序列化”级别的选项，这意味着您（大部分）在事务开始时会看到数据库的冻结快照。

有关更多信息，请参阅[文档](http://www.postgresql.org/docs/current/static/transaction-iso.html)。

打开两个 psql 控制台并尝试一些变体，其中一个提交并选择具有不同隔离级别的另一个。您应该能够看到您的实时系统发生了什么。

# mysql - 如何优化 MySQL 以插入数百万行？

> ID：11904720
> 
> 赞同：7
> 
> 时间：2012-08-10T15:23:38.240
> 
> 标签：mysql, optimization, insert

我需要将数百万行插入 MySQL 数据库（InnoDB 引擎）。当桌子很大时，我有时间问题。几乎所有时间都花在插入查询上。也许有人知道如何优化它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-10T15:53:11.770

要将大量数据导入 InnoDB：

1.  在 MySQL 配置中设置

    *   innodb_doublewrite = 0
    *   innodb_buffer_pool_size = 50%+ 系统内存
    *   innodb_log_file_size = 512M
    *   日志箱 = 0
    *   innodb_support_xa = 0
    *   innodb_flush_log_at_trx_commit = 0
2.  在事务开始后立即添加：

    设置 FOREIGN_KEY_CHECKS = 0；

    SET UNIQUE_CHECKS = 0；

    设置自动提交 = 0；

3.  在交易结束前设置：

    SET UNIQUE_CHECKS = 1;

    设置 FOREIGN_KEY_CHECKS = 1；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:27:01.180

如果您谈论大量`INSERT`语句，请查看称为事务的东西。我很确定大多数（如果不是全部）执行 SQL 的语言都支持事务。他们将加快涉及写入数据库的任何事情。额外的好处是，如果出现问题，您可以回滚更改。

# spring - 使用 Spring Integration 将大型 XML 文件拆分为单独的较小消息并单独处理每个消息

> ID：11904728
> 
> 赞同：4
> 
> 时间：2012-08-10T15:24:22.570
> 
> 标签：spring, spring-integration, splitter, eai

我正在使用 Spring Integration 并且有一个包含子项集合的大型 XML 文件，我想将文件拆分为一组消息，每条消息的有效负载将是一个子 XML 片段。

使用 splitter 是显而易见的，但这需要返回一组消息，这会耗尽内存；我需要将文件拆分为单独的消息，但一次处理一个（或者更可能使用多线程任务执行器）。

是否有一种标准方法可以做到这一点，而无需编写以编程方式将子消息写入通道的自定义组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-25T03:05:30.987

我一直在寻找类似的解决方案，但我还没有找到任何标准的方法。如果有人需要实现此行为，这是一个相当肮脏的修复：

1.  使用 Service Activator 或带有自定义 bean 的拆分器手动拆分文件。

> ```
> <int:splitter input-channel="rawChannel" output-channel="splitChannel" id="splitter" >
>   <bean class="com.a.b.c.MYSplitter" />
> </int:splitter> 
> ```

2.  您的自定义 bean 应该实现 ApplicationContextAware，以便 Spring 可以注入应用程序上下文。
3.  手动检索输出通道并发送每个子消息

> ```
> MessageChannel xsltChannel = (MessageChannel) applicationContext.getBean("splitChannel"); 
> Message<String> message = new GenericMessage<String>(payload));
> 
> splitChannel.send(message); 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-27T19:25:26.917

对于遇到这个非常古老的问题的人。拆分器现在可以处理`Iterable`、`Iterator`、`Stream`和`Flux`(project reactor) 类型的结果。如果返回任何这些类型，则一次发出一条消息。

`Iterator/Iterable`从 4.0.4 开始；`Stream/Flux`从 5.0.0 开始。

从 4.1.2 开始，现在还有一个通过-[一次一行地发出文件内容的功能](https://docs.spring.io/spring-integration/reference/html/history.html#x4.2-file-splitter)`FileSplitter`。`Interator`

# progress-4gl - 命令查找临时表中的条目数

> ID：11904729
> 
> 赞同：4
> 
> 时间：2012-08-10T15:24:25.877
> 
> 标签：progress-4gl, openedge

在临时表中查找条目/行数的命令是什么？版本 10.2b

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T19:07:52.067

```
/* create a temp-table so that we can test this technique
 */

define temp-table ttTest
  field id as int
.

create ttTest.
id = 1.
create ttTest.
id = 2.

/* how many records?
 */

define query q for ttTest cache 0.
open query q preselect each ttTest.
display num-results( "q" ). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:54:00.663

或者您可以使用 clasic FOR EACH：

```
DEFINE VARIABLE iCount AS INT NO-UNDO.

FOR EACH ttTest:
  iCount = iCount + 1.
END.

DISPLAY iCount. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-11T15:58:41.170

这是我的，适用于任何临时表：

```
FUNCTION TT_NBREC RETURNS INTEGER ( INPUT pr_hd_temptable AS HANDLE ) :

    DEFINE VARIABLE in_nbrec  AS INTEGER   NO-UNDO INITIAL 0.
    DEFINE VARIABLE hd_buffer AS HANDLE    NO-UNDO.
    DEFINE VARIABLE hd_query  AS HANDLE    NO-UNDO.
    DEFINE VARIABLE ch_query  AS CHARACTER NO-UNDO.
    DEFINE VARIABLE ch_table  AS CHARACTER NO-UNDO.
    DEFINE VARIABLE lg_error  AS LOGICAL   NO-UNDO.

    ASSIGN
        ch_table = pr_hd_temptable:NAME
        ch_query = "FOR EACH " + ch_table + " NO-LOCK".
    CREATE BUFFER hd_buffer FOR TABLE ch_table.
    CREATE QUERY  hd_query.
    hd_query:ADD-BUFFER( hd_buffer ).
    lg_error = hd_query:QUERY-PREPARE( ch_query ) NO-ERROR.
    hd_query:QUERY-OPEN().
    hd_query:GET-FIRST().
    DO WHILE NOT hd_query:QUERY-OFF-END :
        ASSIGN in_nbrec = in_nbrec + 1.
        hd_query:GET-NEXT().
    END.
    hd_query:QUERY-CLOSE().
    DELETE OBJECT hd_query.
    DELETE OBJECT hd_buffer.
    ASSIGN
        hd_query  = ?
        hd_buffer = ?.

    RETURN in_nbrec.
END FUNCTION. 
```

只需将它传递给您的临时表的句柄，您就可以获得记录数。它当然可以改进，但它对我来说足够快。

# perl - 如何在 Perl 中比较字母及其对应的（按字母顺序）数字？

> ID：11904731
> 
> 赞同：3
> 
> 时间：2012-08-10T15:24:37.173
> 
> 标签：perl, comparison, operator-overloading, versioning

我应该使用 Perl 比较一些应用程序的版本。问题是，每个版本的最后一部分都可以由数字以及按字母顺序对应的字母设置，即：

```
12.3a == 12.31
12.3b == 12.32
12.3c <> 12.34 
```

我看到了[版本模块](http://search.cpan.org/~jpeacock/version-0.97/lib/version.pod)，但它似乎只处理数字和下划线。
也许我应该使用[重载](http://perldoc.perl.org/overload.html)？什么是最好和最优雅的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:38:47.230

这是一个奇怪的规格。规范化可能是要走的路。

```
use version qw( qv );

sub normalise_version {
    my ($v) = @_;
    $v =~ s/([a-i])/ ord($1)-ord('a')+1 /eg;
    return qv("v$v");
}

normalise_version($v1) <=> normalise_version($v2) 
```

与上面的 12.3 相比，被认为小于 12.31。让我知道这是否是错误的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T15:51:31.517

您可以尝试[Sort::Versions](http://search.cpan.org/~edavis/Sort-Versions-1.5/Versions.pm)。从模块描述：

> Sort::Versions 允许对混合的非数字和数字字符串进行轻松排序，例如许多共享库系统和修订控制包使用的“版本号”。如果您尝试处理共享库，这将非常有用。它还可以应用于在文本中散布可变宽度数字字段的应用程序。毫无疑问，可以找到其他应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T15:31:38.813

你看过 David Wheeler 的[SemVer](https://metacpan.org/module/SemVer)吗？

# dotnetnuke - 错误 401 不是未经授权的 LinqToTiwtter API

> ID：11904734
> 
> 赞同：0
> 
> 时间：2012-08-10T15:24:53.037
> 
> 标签：dotnetnuke, linq-to-twitter

我关注 linqtotiwwter.codeplex.com 的演示**我** 试图让演示 webformrtimeline 闲置，所以我为 DotNetNuke 模块编写了这段代码，当按下底部 btnAutorizar 以进行 beginauthorization 时，响应始终是 Error 401 Unauhtorized 。我将配置放入模块的设置中。

**ConsumerKey：lcgG6BXQpwQtHSzwqWA ConsumerSecret：6MoV8PlLBktgVaAP5ezDYEHGMKcHGEDe8eDuk5mpas 和我在推特上的应用调用 dnnPrueba**

我在代码中的错误是什么？，我还需要什么？请帮我！对不起我的英语！

* * *

```
public partial class ViewTwitterAndrea : PortalModuleBase    {         

private ConfiguracionTwitterAndrea configuracion;       

private WebAuthorizer wbAuthorizer;            

protected void Page_Load(object sender, EventArgs e)        {           

try            {                   

configuracion = new ConfiguracionTwitterAndrea(this.TabModuleId);                   

string consumerKey = configuracion.ConsumerKey;                   

string consumerSecret = configuracion.ConsumerSecret;                                        

if (string.IsNullOrEmpty(consumerKey) || string.IsNullOrEmpty(consumerSecret))                        
{  this.mvTwitterAndrea.SetActiveView(this.vwConfiguracion); }
else {                      
IOAuthCredentials objCredenciales = new SessionStateCredentials();                          
if (objCredenciales.ConsumerKey == null || objCredenciales.ConsumerSecret == null)                             
{                               
objCredenciales.ConsumerKey = configuracion.ConsumerKey;                                                              
objCredenciales.ConsumerSecret = configuracion.ConsumerSecret;   
}                 
wbAuthorizer = new WebAuthorizer {                                
Credentials=objCredenciales,  
PerformRedirect = authUrl => Response.Redirect(authUrl)      };                                  
if(!Page.IsPostBack){                         
wbAuthorizer.CompleteAuthorization(Request.Url);                                                         
}
if(string.IsNullOrEmpty(objCredenciales.ConsumerKey) || string.IsNullOrEmpty(objCredenciales.ConsumerSecret)){                                   
lblRegistrado.Text = "No estas autorizado aun";           
btnAutorizar.Visible = true; 
btnTweets.Visible = false;
}else if(wbAuthorizer.IsAuthorized){                 
lblRegistrado.Text = "Estas Autorizado.";     
btnAutorizar.Visible = false;                           
btnTweets.Visible = true;                 
}                         
this.mvTwitterAndrea.SetActiveView(vwAutorizacion);                                         
}}catch (Exception ex) {Exceptions.ProcessModuleLoadException(this, ex);     
}       
}

protected void BtnEnviar_Click(object sender, EventArgs e)        {             
ComunicacionTwitter objTwitter = new ComunicacionTwitter(this.TabModuleId);   
Status objStatus= objTwitter.ActualizarEstado(wbAuthorizer, this.txtEstado.Text);
}
protected void btnAutorizar_Click(object sender, EventArgs e) {    
try {               
wbAuthorizer.BeginAuthorization(Request.Url);         
}catch(Exception ex){ }     
}

protected void btnTweets_Click(object sender, EventArgs e)        {           
try  {       
wbAuthorizer = new WebAuthorizer    {               
Credentials = new SessionStateCredentials()     };
ComunicacionTwitter objTwitter = new ComunicacionTwitter(this.TabModuleId);               
var UltimosTweets = objTwitter.getHomeTimeLine(wbAuthorizer, intCantidadTweets);
foreach (var Tweet in UltimosTweets)                {                   
this.spnTweets.InnerHtml =    "<div class='twitterTweet'>" +    
"<div class='twitterUsuario'>Usuario " + Tweet.ScreenName + "</div>" + 
"<div class='twitterContenido'>" + Tweet.Text + "</div>" + 
"<div class='twitterFecha'>" + Tweet.CreatedAt + "</div>" +                   
"</div>";               
}   
this.mvTwitterAndrea.SetActiveView(this.vwTweets);            
}catch(Exception ex){    }     
}
}
} 
```

****** *** ** *** ** *** ***我还有一堂课**

 **```
Class ConfiguracionTwitter{
public ConfiguracionTwitter(){} 
public IEnumerable<Status> getHomeTimeLine(WebAuthorizer auth,int intCantidadTweets) {               
twitterContexto= new TwitterContext(auth);           
var tweets =        
(from tweet in twitterContexto.Status                       
where tweet.Type == StatusType.Home                        
select tweet).Take(intCantidadTweets).ToList();           
return tweets;        
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:45:05.687

“401 Unauthorized”表示您的应用程序无法通过 Twitter 进行身份验证。导致 401 的原因有很多。我编写了一个常见问题解答，其中列出了要检查的事项：

[http://linqtotwitter.codeplex.com/wikipage?title=LINQ%20to%20Twitter%20FAQ&referringTitle=Documentation](http://linqtotwitter.codeplex.com/wikipage?title=LINQ%20to%20Twitter%20FAQ&referringTitle=Documentation)

顺便说一句，发布您的 OAuth 密钥会使您的应用程序不安全。您应该尽快在 Twitter 页面上访问您的应用程序并生成一组新密钥。

乔**

# css - CSS 相关，内容向上浮动（在标题图像顶部）仅在 FireFox 上...

> ID：11904736
> 
> 赞同：0
> 
> 时间：2012-08-10T15:24:55.680
> 
> 标签：css, layout

[http://ratest3.com/spare-2/](http://ratest3.com/spare-2/)

主要内容区域仅在 FireFox 中浮动在标题图像上方。我已经在最新最好的 Safari、Chrome、IE 和我的 Galaxy S3 上检查过它。

帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:38:11.333

尝试添加`clear: right;`到`#main`CSS 声明中。这在 Firefox 中为我修复了它。

或者，您可以将 clearfix 类应用于`#branding`div。（虽然我没有尝试过。）

# netbeans - JavaFX Netbeans 错误：找不到合适的方法

> ID：11904739
> 
> 赞同：1
> 
> 时间：2012-08-10T15:25:00.417
> 
> 标签：netbeans, javafx-2

我正在使用 Netbeans 7.2，当我尝试本[教程](http://docs.oracle.com/javafx/2/get_started/form.htm)时，我收到了这个错误：

![在此处输入图像描述](../Images/84a931eb21c441c219fd037d76800289.png)

类代码如下：

```
public class Login extends Application {

@Override
public void start(Stage primaryStage) {
    GridPane grid = new GridPane();
    grid.setAlignment(Pos.CENTER);
    grid.setHgap(10);
    grid.setVgap(10);
    grid.setPadding(new Insets(25, 25, 25, 25));

    Text sceneTitle = new Text("Welcome");
    sceneTitle.setFont(Font.font("Tahoma", FontWeight.NORMAL, 20));
    grid.add(sceneTitle, 0, 0, 2, 1);

    Label userName = new Label("User Name:");
    grid.add(userName, 0, 1);

    Label pw = new Label("Password:");
    grid.add(pw, 0, 2);

    Scene scene = new Scene(grid, 300, 275);
    primaryStage.setScene(scene);

    primaryStage.setTitle("JavaFX Welcome");
    primaryStage.show();
}

/**
 * The main() method is ignored in correctly deployed JavaFX application.
 * main() serves only as fallback in case the application can not be
 * launched through deployment artifacts, e.g., in IDEs with limited FX
 * support. NetBeans ignores main().
 *
 * @param args the command line arguments
 */
public static void main(String[] args) {
    launch(args);
}
} 
```

我正在使用 JavaFX 2

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:33:01.950

检查你的进口。看来你`Label`不是`javafx.scene.control.Label`

# jquery - jQuery，动画后悬停

> ID：11904740
> 
> 赞同：0
> 
> 时间：2012-08-10T15:25:01.867
> 
> 标签：jquery, animation, hover

我正在做一个特定的轮播，它有：

*   内容
*   下一步按钮
*   上一个按钮

功能是：

*   当您将鼠标悬停在 Next 或 Prev 上时，它会将内容沿按钮方向移动 20 像素。
*   当您单击按钮时，轮播会启动动画。

目前的代码很粗鲁，充满了`if`防止动画、队列等的控件......但目前它似乎工作正常。

我使用**jCarousel**作为它的插件和**jQuery easing**。

我为你准备了一个**[JsFiddle](http://jsfiddle.net/toroncino/9Et4B/)**。

**错误**：

它有一个错误。如果您将鼠标悬停在下一个按钮上（将鼠标指针悬停在下一个按钮上），单击一次，始终保持悬停状态而不离开按钮，再单击一次。图像未对齐。

这是因为在动画之后它不再识别为悬停状态。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:48:07.473

所以我编辑了你的小提琴，我希望这是你所期望的行为。而且它也不再像您的第一个版本那样“跳跃”。

我创建了三个新变量：

```
var hovered    = false;
var animating  = false;
var correction = null; 
```

第一个存储元素是否悬停，第二个存储动画是否正在运行，第三个存储必须使用哪个校正（左侧或骑行侧）。

比我更新的功能来跟踪正在发生的事情：

```
$carouselNext.hover(function () {
    if (!animating)
        shunt('-=20');
    hovered = true;
    correction = 'next';
}, function () {
    if (!animating)
        shunt('+=20');
    hovered = false;
    correction = 'next';
}); 
```

比我更新了点击处理程序：

```
$carouselNext.bind('click', function(e) {
    move(0);
    e.preventDefault();
}); 
```

和`move()`- 功能：

```
function move(dir, par) {
    if(!animating) {
        animating = true;
        if(dir == 0) {
            carousel.next();
        } else {
            carousel.prev();
        }
        setTimeout(function() {
            shunt( ( hovered ? '+=0' : ( 'next' == correction ? '+' : '-' ) + '=20' ) );
            animating = false;
        }, 1700);
    }
} 
```

这是演示 - 希望你得到我更新的所有内容。

### 演示

[jsfiddle](http://jsfiddle.net/tL8PX/)

注意：从一开始就可以声明变量`function carousel_initCallback(carousel)`- 不知何故它没有存储在小提琴中......</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:57:28.020

为您的下一个按钮设置`z-index`为 10 或其他值，它将始终位于顶部，您添加图像的部分也只是为了安全起见添加`z-index`到 0 或 1。

# c# - 如何在 C# 中定义全局结构？

> ID：11904743
> 
> 赞同：1
> 
> 时间：2012-08-10T15:25:13.320
> 
> 标签：c#, variables, structure, global

我想在 C# 中定义一个全局结构并在三个单独的子例程中使用它。我已经创建了结构，但我不知道如何使它成为一个全局变量，所以我可以在我的代码的多个部分中使用它。任何帮助表示赞赏。

```
 public struct Simple
    {
        public int Position;
        public bool Exists;
        public double LastValue;
    };

    static void Main(string[] args)
    {
        Simple s;
        s.Position = 1;
        s.Exists = false;
        s.LastValue = 5.5;
    } 
```

所以我想在我的代码中的另外两个例程中使用一个简单的结构，并可能将它传递给不同的形式（一个变量的多次使用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:27:29.560

C# 中最接近“全局”的是“静态”。只需将类和所有成员定义为静态，就可以从引用包含命名空间的任何地方访问它。**正如Servy正确指出的那样编辑**，类本身不必是静态的；但是这样做会强制所有成员在编译时保持静态。此外，静态成员可以具有任何可见性，因此您可以拥有由公共静态属性或方法使用的私有静态字段，并且您可以拥有在其主程序集之外不可见的内部静态类。只是静止不动并不会自动使其敞开。

然而，更好的模式可能是单例；你定义一个类，它有一个自身的静态实例，然后可以传递。好处是您仍然可以根据需要将对象作为实例类处理，但是使用静态 getter 可以在任何地方使用相同的实例。这里有一些阅读材料：[http ://csharpindepth.com/Articles/General/Singleton.aspx](http://csharpindepth.com/Articles/General/Singleton.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:58:05.200

在您的情况下，您的主要方法中似乎有一个对象作为局部变量，您需要在另一个方法中使用该对象。在这种情况下，适当的解决方案是将参数添加到其他方法。看看这个例子：

```
public class MyObject
{
    public int Value;
}

public static void Main(string[] args)
{
    MyObject obj = new MyObject();

    obj.Value = 42;

    PrintObject(obj);

    Console.WriteLine("Press any key to exit...");
    Console.ReadKey(true);
}

public static void PrintObject(MyObject obj)
{
    Console.WriteLine(obj.Value);
} 
```

# python - Python Traits：对象的pickle列表，项目设置两次

> ID：11904747
> 
> 赞同：1
> 
> 时间：2012-08-10T15:25:20.640
> 
> 标签：python, pickle, traits

基本上，我尝试腌制和恢复一个包含对象列表的 Traits 对象。恢复时，列表更改的事件通知会被触发两次：

```
from enthought.traits.api import Int, HasTraits, List, on_trait_change
import cPickle

class Foo(HasTraits):
    a = Int(1)

class Bar(HasTraits):
    l = List(Foo)
    @on_trait_change('l[]')
    def _l_changed(self):
        for x in self.l:
            print x.a

    def store(self):
        file = open('test_state.pyd', 'w')
        cPickle.dump(self.__getstate__(), file)
        file.close()
    def restore(self):
        file = open('test_state.pyd')
        self.__setstate__(cPickle.load(file))
        file.close()

    b = Bar(l=[Foo()])

    b.store()

    print 'restoring...'

    b.restore() 
```

将导致恢复... 1 1

我认为问题在于 pickle 不仅会腌制对象 b 的属性，还会腌制对象 b 本身（因为列表）。这个问题也被指出在这里[https://mail.enthought.com/pipermail/enthought-dev/2006-December/003707.html](https://mail.enthought.com/pipermail/enthought-dev/2006-December/003707.html)，虽然没有得到答复。然后调用 cPickle.load(file)，它会因此创建一个 Bar 对象，触发事件。然后**setstate**方法将在当前对象 b 上设置腌制数据，再次触发事件。

关于如何避免这种情况的任何想法，即 cPickle.load(file) 时的第一个事件？

# jsp - 如何在 glassfish 3.1.2 中将域名从我的本地 ip 更改为“mywebpage”？

> ID：11904750
> 
> 赞同：0
> 
> 时间：2012-08-10T15:25:40.777
> 
> 标签：jsp, glassfish, dns

我正在尝试更改我的 JSP 网站的域。当我想将我的页面显示给同一局域网上的另一台计算机时，我必须将我的电脑的 IP 提供给他，比如

```
http://192.168.77.232:8080/MyWebSite/index.html 
```

有没有办法改变它

```
http://MyWebSite/index.html 
```

或者

```
http://domainname:8080/MyWebSite/index.html 
```

我已经尝试了这些说明，但没有结果。 [http://docs.oracle.com/cd/E19798-01/821-1841/gjsdi/index.html](http://docs.oracle.com/cd/E19798-01/821-1841/gjsdi/index.html)

作为附加数据，我的 IDE 是 NetBeans 7.1.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:31:17.033

与 Glassfish 无关，但我很幸运地编辑了本地机器主机文件以将地址`http://MyWebSite/`指向机器 IP`192.168.77.232:8080`

```
192.168.77.232:8080 MyWebSiteAddress 
```

可以在[此处找到图形指南](http://www.howtogeek.com/howto/27350/beginner-geek-how-to-edit-your-hosts-file/)

# sql-server-2008-r2 - SQL Server select inside select invalid column name

> ID：11904752
> 
> 赞同：-1
> 
> 时间：2012-08-10T15:25:47.083
> 
> 标签：sql-server-2008-r2

我正在使用 SQL Server。我有以下查询：

```
select 
    convert(varchar(10), MAX(closedate), 101) 
from 
    (select PSer.Signin_Date as closedate 
     from PSer 
     where ID = '12') 
```

请注意，我的 from 中的内容比我拥有的简化版本更复杂。

我收到一条消息说

> 无效的列名已关闭

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:31:35.833

确保你给你的子查询一个别名。

```
from ( select PSer.Signin_Date as closedate from PSer where ID = '12') AS SOMENAME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:37:10.797

用这个：

```
select convert(varchar(10),MAX(t1.closedate),101) 
from ( select PSer.Signin_Date as closedate from PSer where ID = '12') as t1 
```

请享用。

# ruby-on-rails - 栏杆：脚手架。为模型创建管理控制器

> ID：11904753
> 
> 赞同：3
> 
> 时间：2012-08-10T15:25:52.203
> 
> 标签：ruby-on-rails, ruby, scaffolding

我想为现有模型用户创建管理界面。

最简单的方法是什么？
我想，是脚手架。

rails 中的脚手架是由 script( `rails generate scaffold`) 生成的，并且没有动态的选项（就像在 django 中一样），对吗？

那么如何`AdminUsers`为模型创建脚手架控制器`User`？创建`AdminUsers`脚手架并替换`AdminUser`模型`User`？

如果模型将被迁移更改，我该怎么办？手动更新脚手架控制器和视图，对吗？有没有自动化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T18:43:38.913

您可以使用脚手架动态生成文件 - 脚手架命令可以采用命名空间参数。

```
rails generate scaffold Admin::User 
```

不过，您不需要其他模型 - 您的 Admin::UsersController 和视图应该与 User 模型一起使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-24T20:46:57.447

使用诸如[activeadmin](http://rubygems.org/gems/activeadmin)或[rails_admin](http://rubygems.org/gems/rails_admin)之类的标准解决方案是最简单的方法。如果你想要一些自定义的东西，但仍然想知道如何`AdminUsers`为模型搭建控制器`User`，你可能想看看[rails-admin-scaffold gem](http://rubygems.org/gems/rails-admin-scaffold)，它可以自动化这个过程，[还有一篇](http://dhampik.com/blog/rails-admin-scaffold)有更详细解释的文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T22:12:31.350

![在此处输入图像描述](../Images/cd5775c0bb751a73f9c1f4fdcf30daf2.png)

ActiveAdmin 是 Rails 应用程序的简洁用户界面。它为您的模型提供了完全可定制的用户界面。

网站：[http ://activeadmin.info/](http://activeadmin.info/)

演示：[http ://demo.activeadmin.info/admin](http://demo.activeadmin.info/admin)

Railscasts 剧集：[http ://railscasts.com/episodes/284-active-admin](http://railscasts.com/episodes/284-active-admin)

# php - 切换评估

> ID：11904754
> 
> 赞同：0
> 
> 时间：2012-08-10T15:26:00.067
> 
> 标签：php, switch-statement

我最近就如何处理比较发生了争论`switch`，需要帮助解决它。

如果我写一个`switch`例如：

```
switch ($x){
    case ($x > 5):
        echo "foo";
        break;
    case ($x < 5):
        echo "bar";
        break;
    default:
        echo "five";
        break;
} 
```

`if`它相当于哪个语句？**甲**还是**乙**？

```
// A

if ($x > 5) {
    echo "foo";
} elseif ($x < 5) {
    echo "bar";
} else {
    echo "five";
}

// B

if ($x == ($x > 5)) {
    echo "foo";
} elseif ($x == ($x < 5)) {
    echo "bar";
} else {
    echo "five";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T15:33:45.327

给大家澄清一下：

**它相当于`B`。**

它不是“两者”，有时不是它的一个，有时是另一个，它总是`B`。要了解为什么有时会看到表明它可能是的结果`A`，您需要了解[类型强制在 PHP 中是如何工作的](http://php.net/manual/en/language.types.type-juggling.php)。

如果您将虚假值传递给 of 的“参数”，`switch`并且您在s 中使用导致布尔值的*表达式*`case`，则只有当您的表达式计算结果为 时，它们才会匹配`FALSE`。

* * *

`switch`基本上是一个巨大的`if`/树，它在传递给（表达式的左侧）和s 中的表达式（右侧）之间`elseif`执行松散的比较（`==`而不是）。`===``switch``case`

这[可以通过](http://codepad.viper-7.com/79Kyvr)您的代码的变体很好地证明：

```
$x = 0;

switch ($x) {
  case $x > -1: // This is TRUE, but 0 == FALSE so this won't match
    echo "case 1";
  case $x == -1: // This is FALSE, and 0 == FALSE so this will match
    echo "case 2";
} 
```

如果我们将其转换为两个`if`/`elseif`树：

[答](http://codepad.viper-7.com/2vUgNx)：

```
$x = 0;

if ($x > -1) {
  // It matches here
  echo "case 1";
} else if ($x == -1) {
  // and not here
  echo "case 2";
} 
```

[乙](http://codepad.viper-7.com/xogd7U)：

```
$x = 0;

if ($x == ($x > -1)) {
  // It doesn't match here
  echo "case 1";
} else if ($x == ($x == -1)) {
  // ..but here instead
  echo "case 2";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T15:29:23.910

那个switch case等价于B

**编辑 ：**

如果我们以 $x 等于 0 为例：

$x > 5 将计算为假（0 也计算为假），所以第一个 if 将打印 bar，但第二个将打印 foo。开关将被转换成这样的东西：

```
switch ($x){
    case false:
        echo "foo";
        break;
    case true:
        echo "bar";
        break;
    default:
        echo "five";
        break;
} 
```

这将打印 foo （与 B 相同）

**编辑 2：**

我试过了，结果给了我：

$x = 0 => switch (foo), if A (bar), if B (foo)

$x = 5 => switch (5), if A (5), if B (5)

$x = 7 => switch (foo), if A (foo), if B (foo)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T15:33:31.713

您的示例等效于**B**。

如果你想在你的开关中使用比较（并且相当于**A**），你可以这样写：

```
switch (true) { // Use true instead of $x
    case ($x > 5):
        echo "foo";
        break;
    case ($x < 5):
        echo "bar";
        break;
    default:
        echo "five";
        break;
} 
```

# web-services - Redbus API 的注册和许可？

> ID：11904755
> 
> 赞同：0
> 
> 时间：2012-08-10T15:26:00.773
> 
> 标签：web-services

如何注册并获取登录 ID 和密码以访问 RedBus Api？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T10:15:00.450

从外观上看，Redbus 尚未向公众开放 Web 服务。显然，公开的 Web 服务仅适用于拥有自己凭据的巴士运营商。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-03T23:40:26.137

API 仅对注册商户或集成商开放。我得到了一个，他们会根据您的运营国家/地区提供。就我而言，我只在马来西亚注册，支付了大约 300 美元的注册费并获得了 api 密钥。尽管我会说他们的技术支持不是我在 PHP 中实现的最好的，而且他们并不具备支持使用 PHP 进行集成的专业知识。最成问题的部分是座位选择过程。其余的很简单。

我建议你看看他们的网站，看看有没有商家注册链接。和我一样，我们来到他们的地区办事处并在那里注册。

# .htaccess - Mod_Rewrite 到 /subdirectory 和 /subdirectory/query

> ID：11904757
> 
> 赞同：1
> 
> 时间：2012-08-10T15:26:19.877
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我很难开始使用 mod_rewrite。我已经在谷歌上搜索了大约一个小时，但似乎没有任何效果。我想要做的是将
example.com/species.php 更改为 example.com/species
并将
example.com/species.php?name=frog 更改为 example.com/species/frog。

使用

```
Options +FollowSymlinks  
RewriteEngine on  

RewriteRule ^species/(.*)$ /species.php?name=$1 
```

我可以让 example.com/species.php?name=frog 显示为 example.com/species/frog，并使用

```
RewriteRule ^species/ /species.php 
```

我可以让 example.com/species.php 显示为 example.com/species/，但我不能让它们同时工作。
此外，没有斜杠的 example.com/species 总是以 404 出现。
我考虑过只创建一个 /species/ 目录来解决任何问题，但我宁愿只为一个 species.php 文件设置一些规则。任何帮助将不胜感激！

**编辑（因为我在 8 个小时内无法回答我自己的问题）：**

我似乎已经解决了我的两个问题。我将 .htaccess 更改为：

```
Options +FollowSymlinks
RewriteEngine on

RewriteRule ^species/(.*)$ /species.php?name=$1 
RewriteRule ^species/?$ /species.php 
```

第二个 RewriteRule 成功地将 example.com/species 重定向到 example.com/species.php，同时让另一个 RewriteRule 工作。
但是，如果我在 example.com/species/ 中输入一个斜杠，它会被读取为 example.com/species.php?name= 并且会抛出错误，因为没有提交名称，所以我只是添加了

```
if(isset($_GET['name']) && empty($_GET['name'])) {header('location: http://example.com/species');} 
```

因此，如果我使用 example.com/species/ 它会重定向到 /species 并按需要工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:00:15.597

如果您在第一个 RewriteRule 中将`*`（匹配零个或多个）更改为`+`（匹配一个或多个），那么您应该停止查看`species.php?name=`是否使用了尾部斜杠。

这是因为`+`将要求在斜线之后出现某些内容，否则规则将不匹配。然后您的第二个 RewriteRule 将匹配，因为它以可选的斜杠结尾，但不会将`name=`查询字符串添加到目标 URL。

您可能还想`[L]`在第一条规则之后添加标志（最后一个），因为如果第一条规则匹配，则不需要执行第二条规则。（请注意，这不会停止在生成的重定向 URL 上运行 RewriteCond 和 RewriteRule 测试，它必须像任何其他请求一样通过 .htaccess 文件。）

请参阅[Apache 2.4 中 mod_rewrite 的参考文档](http://httpd.apache.org/docs/2.4/mod/mod_rewrite.html)（或查看您实际使用的 Apache 版本的文档）。

# android - 在不移动操作栏的情况下在活动之间转换

> ID：11904758
> 
> 赞同：1
> 
> 时间：2012-08-10T15:26:29.137
> 
> 标签：android, android-layout, android-ui

有谁知道如何在不像 Gmail 应用程序中那样为操作栏设置动画的情况下在活动之间进行转换？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T15:30:18.333

它不是之间的过渡`Activities`，而是之间的过渡`Fragments`。

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

`Fragments`在 3.0 中引入，但在 android SDK 中有一个 backport 库。您可以从 API 级别 4 及以上级别使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:42:45.837

试试这个：

```
Intent myIntent = new Intent(context, MyActivity.class);
myIntent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
context.startActivity(myIntent); 
```

# javascript - 我怎样才能延迟一个功能

> ID：11904765
> 
> 赞同：1
> 
> 时间：2012-08-10T15:26:33.807
> 
> 标签：javascript, jquery, html, css

有人可以帮助我如何延迟此功能吗？

```
$('#customer_quote').lightbox_me({  
        centered: true, 
        closeSelect: ".close",
        onClose: function(){
            $('div.error').remove()
            }
        })  

 }); 
```

我希望这个灯箱在 7 秒后打开。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T15:29:23.067

使用`setTimeout()`：

```
setTimeout(lightbox, 7000);

function lightbox() {
    $('#customer_quote').lightbox_me({  
            centered: true, 
            closeSelect: ".close",
            onClose: function(){
                $('div.error').remove()
                }
            })  

     });
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T15:29:29.113

试一试`setTimeout`：

```
setTimeout(function() {
    $('#customer_quote').lightbox_me({
        centered: true,
        closeSelect: ".close",
        onClose: function() {
            $('div.error').remove()
        }
    });
}, 7000);​ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T15:29:33.597

```
setTimeout(function(){
$('#customer_quote').lightbox_me({  
        centered: true, 
        closeSelect: ".close",
        onClose: function(){
            $('div.error').remove()
            }
        })  

 });

}, 7000); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-10T15:29:22.577

查看此链接：[使用 jQuery 延迟 JavaScript 函数调用](https://stackoverflow.com/questions/5322344/to-delay-javascript-function-call-using-jquery)

好像你只是使用 setTimeout 和 7000

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T15:30:48.093

使用`setTimeout`.

```
var delayedFunction = function() {
   /* your code */
}

setTimeout(delayedFunction, 7000); 
```

第二个参数代表毫秒数。

另请注意，这会引发异步事件。您的代码的执行*不会*`setTimeout`在7 秒内停止。

如果您想在此延迟之后执行另一个代码，您必须`delayedFunction`在事件触发时执行此操作。

# sql - 对具有相同值的两列进行排序时出现奇怪的排序错误（这是一个错误吗？）

> ID：11904766
> 
> 赞同：8
> 
> 时间：2012-08-10T15:26:36.710
> 
> 标签：sql, postgresql, sql-order-by, limit, offset

我在 postgres 中有以下查询：

```
SELECT * 
FROM "bookings"
WHERE ("bookings".client_id = 50) 
ORDER BY session_time DESC 
LIMIT 20 OFFSET 0 
```

第 20 位的记录与第 21 条记录具有相同的 session_time。

此查询返回 20 个结果，但是如果将结果与整个数据库进行比较，则查询返回第 1-19 个结果和第 21 个结果，跳过第 20 个结果。

可以通过在订单中添加“id”来修复此查询：

```
SELECT * 
FROM "bookings" 
WHERE ("bookings".client_id = 50) 
ORDER BY session_time DESC, id 
LIMIT 20 OFFSET 0 
```

但是我想知道这个错误是如何发生的？使用偏移量和限制时，postgres 如何对相同的文件进行排序？是随机的吗？这是postgres的错误吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-06T16:09:13.883

这不是错误。限制和偏移发生在排序之后，并且在一种情况下选择哪些行与另一种情况下并不确定。一般来说，您希望有一个 tiebreaker，以便您的排序是稳定和确定的（即使我没有限制或偏移问题，我更喜欢使用唯一的 tiebreakers，以确保每次运行时查询都是相同的）。

如果您正在进行分页，请将主键或代理键添加到排序中作为决胜局。这真的是最好的办法。

# asp.net-mvc - 从无法更改为 ActionResult 的 ViewResult 的 MVC 重定向

> ID：11904771
> 
> 赞同：2
> 
> 时间：2012-08-10T15:26:46.257
> 
> 标签：asp.net-mvc, redirect, viewresult

我想从 a 重定向`ViewResult`，以便在搜索结果`1`而不是产品列表页面时显示特定的产品详细信息。

其他页面说将 更改`ViewResult`为 an`ActionResult`并使用`RedirectToAction`. 但我的问题是我的控制器继承自第三方控件，并且我的搜索方法设置为覆盖相同的第三方控件方法，即`ViewResult`.

我想知道是否有人对我可以做什么有一些建议，是否有另一种从 a 重定向的方法，`ViewResult`或者是否有另一种方法来处理将第三方控件搜索方法覆盖为`ActionResult`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:56:53.640

你*可以*只返回一个不同的视图（没有重定向）

```
//in your action method
if( result.Count == 1 )
    return View( "Product", result[0] ); 
```

或直接调用其他操作方法（如果它们在同一个控制器中）

```
if( result.Count == 1 )
    return YourActionDetails( result[0].Id /* params */ ); 
```

或者，您可以返回一个简单的视图，使客户端自动重定向

```
// a "Redirect" view
@model Product
<html>
    <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
     <meta http-equiv="Refresh" content="0;url=@Url.Action("Details", Model.Id)" />
    </head>
    <body></body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:41:37.927

如果您无法更改操作的返回类型，则可以使用路由将带有 1 的请求路由到不同的操作。

只需定义另一条路线并确保将其添加到默认路线`RouteCollection` *之前。*

# bash - 如何在等待网络服务器响应的bash中创建一个循环？

> ID：11904772
> 
> 赞同：124
> 
> 时间：2012-08-10T15:26:43.923
> 
> 标签：bash

如何在等待网络服务器响应的bash中创建一个循环？

它应该打印一个“。” 每 10 秒左右，并等待服务器开始响应。

更新，此代码测试我是否从服务器获得了良好的响应。

```
if curl --output /dev/null --silent --head --fail "$url"; 然后
  echo "URL 存在：$url"
别的
  echo "网址不存在：$url"
菲

```

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2014-01-17T15:22:12.037

将问题与chepner的回答结合起来，这对我有用：

```
until $(curl --output /dev/null --silent --head --fail http://myhost:myport); do
    printf '.'
    sleep 5
done 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2018-05-29T11:39:36.330

我想限制最大尝试次数。根据托马斯接受的答案，我做了这个：

```
attempt_counter=0
max_attempts=5

until $(curl --output /dev/null --silent --head --fail http://myhost:myport); do
    if [ ${attempt_counter} -eq ${max_attempts} ];then
      echo "Max attempts reached"
      exit 1
    fi

    printf '.'
    attempt_counter=$(($attempt_counter+1))
    sleep 5
done 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-04-03T17:08:37.650

httping 很适合这个。简单、干净、安静。

```
while ! httping -qc1 http://myhost:myport ; do sleep 1 ; done 
```

而/直到等是个人偏好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-18T15:35:56.490

## 反引号的使用`` ``已经[过时](https://unix.stackexchange.com/a/5782/39845)。

改用`$( )`：

```
until $(curl --output /dev/null --silent --head --fail http://myhost:myport); do
  printf '.'
  sleep 5
done 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-12-31T02:16:05.213

您还可以像这样组合 timeout 和 tcp 命令。它将在 60 秒后超时，而不是无限期等待

`timeout 60 bash -c 'until echo > /dev/tcp/myhost/myport; do sleep 5; done'`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-16T08:54:42.853

```
printf "Waiting for $HOST:$PORT"
until nc -z $HOST $PORT 2>/dev/null; do
    printf '.'
    sleep 10
done
echo "up!" 
```

我从这里得到了这个想法：[https ://stackoverflow.com/a/34358304/1121497](https://stackoverflow.com/a/34358304/1121497)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-10T15:59:05.280

有趣的谜题。如果您的客户端没有访问权限或异步 api，您可以尝试像这样 grepping 您的 tcp 套接字：

```
until grep '***IPV4 ADDRESS OF SERVER IN REVERSE HEX***' /proc/net/tcp
do
  printf '.'
  sleep 1
done 
```

但这是一个间隔为 1 秒的繁忙等待。您可能需要更多的分辨率。这也是全球性的。如果与该服务器建立了另一个连接，则您的结果无效。

# python - 如何将 URL 中的参数字符串传递给 GAE 中的 Python 函数？

> ID：11904780
> 
> 赞同：0
> 
> 时间：2012-08-10T15:27:09.547
> 
> 标签：python, google-app-engine

我是**GAE**和**Python**新手。我无法将我的 HTML 页面中的字符串参数传递给 Python 函数*（尽管它适用于整数参数）*。

我有以下网址：

```
http://localhost:8094/papers/xyz 
```

在`main()`我有：

```
app = webapp2.WSGIApplication([
('/', homepage.ViewHomePage),
('/about', aboutpage.ViewAboutPage),
    ('/papers/([\w]+)', PaperList)
],
            config=config,
            debug=True) 
```

函数定义为：

```
class PaperList(BaseHandler):

    def get(self, param1): 
```

在`app.yaml`我有：

```
- url: .*
  script: main.app 
```

这不起作用。但是，如果我只是将参数从字符串更改为整数，那么它就可以工作。*（我还没有对参数做任何事情，只是希望它接受字符串参数。）*

有人可以告诉我我必须更改哪些内容才能使其与字符串参数一起使用，并指出文档解释如何传递参数的位置`main()`吗？

我正在使用**Python 2.7**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T16:15:36.213

`\d`只匹配十进制数字。你的意思是`\w`改用吗？此外，没有方括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T16:35:31.253

您还可以选择传递 urlencoded 数据，例如 yourapp.appspot.com/papers?keyword=helloworld

并在您的处理程序中使用：keyword = self.request.GET.get('keyword') 或 keyword = self.request.POST.get('keyword') 取决于您的请求方法。

您还可以在 AJAX 帖子的正文中传递 json 数据，并使用 json 将其反序列化为 python 数据。为了验证这种数据，我推荐 voluptuous。

# c# - 当用户故事提到父母，但行动是针对孩子时，行为应该在哪里？

> ID：11904781
> 
> 赞同：5
> 
> 时间：2012-08-10T15:27:15.707
> 
> 标签：c#, class, domain-driven-design, entity

我有一个 StoreOwner 实体。StoreOwner 有一个 Store 属性。

```
public class Product { }

public class Store { 
    public IEnumerable<Product> Products { get; private set; }
}

public class StoreOwner { 
    public Store Store { get; private set }
} 
```

我有以下用户故事：

> 作为店主，我可以将产品添加到我的商店。

“将产品添加到商店”的行为应该生活在哪里？在 StoreOwner 或 Store 上？

如果是商店，方法名称是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T15:32:46.760

我会把它放在 中`Store`，因为我猜 products 集合是 中的子实体`Store`。与`Store.AddProduct()`公开产品系列相反。

如果有逻辑可以确保只有当前所有者可以做到这一点，我相信*只有*在`Store`已经`Store`了解所有者的情况下才可以选择加入，但在尝试 all 之前*绝对*`AddProduct`应该进行验证。

这部分看起来像是一个用户角色，所以它可能属于您的 UI 控制器，或者如果当前用户实际上是商店所有者，则可能会将其纳入用户角色并对其进行授权。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:31:33.710

> “加店”的行为应该活在哪里？在 StoreOwner 或 Store 上？

我假设您的意思是添加产品

我希望该方法成为`Store`. 类似的东西`store.AddProduct(product)`。您不能将产品添加给所有者，除非它是一些沙龙洗发水或其他东西

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T15:34:09.613

我采取的最佳方法之一是始终关注谁拥有什么。

所以 ：

StoreOwner 拥有一个 Store A Store 包含 Product

因此，根据您的故事和上述用例，您会说 Store.AddProduct(newProduct);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T15:34:17.590

如果您只能在有权访问`StoreOwner`实例的情况下添加产品，请将方法放在那里，否则放在`Store`类中。

名字`AddProduct`好像很明显...

# coldfusion - ColdFusion Application.cfc & cfinvoke & THIS 范围

> ID：11904786
> 
> 赞同：3
> 
> 时间：2012-08-10T15:27:39.523
> 
> 标签：coldfusion, coldfusion-10, application.cfc, cfinvoke

在使用 CF application.cfc - 需要创建一些变量以开始（在 THIS 范围内） - 例如 this.name 和 this.applicationtimeout() 等。

我遇到了一些我认为奇怪的行为 - 希望有人能解释为什么会发生这种情况以及可能的解决方法。

有相当多的“THIS”变量被接受，可以用来设置应用程序特定的变量（当然你必须在 CFADMIN 中检查“允许应用程序特定的变量”——我做了）

其中之一是 THIS.mappings - 这是一个映射数组 - MINE 看起来像这样：

```
this.path = GetDirectoryFromPath( GetCurrentTemplatePath() );
this.mappings = {
     '/files' = '#this.path#_my_files\'
     ,'/functions' = '#this.path#_my_functions\'
     ,'/logs' = '#this.path#_my_logs\'
}; 
```

它工作正常 - 当它设置在 application.cfc 顶部的 cfscript 块内时，它工作正常 - 如果我将该脚本块放在它自己的文件中并将其 cfinclude 到 application.cfc

但是 - 为了分割我的代码 - 我想将我的所有应用程序设置放在 settings.cfc ...（这里的想法是如果必须更改某些设置 - 我不必担心'在哪里' 看，我真的不想在我的 app.cfc 和 settings.cfc 中的其他应用程序或会话设置上拆分这些东西

所以我在 settings.cfc 中创建了一个名为 getTHIS 的方法，并将脚本块放在那里......然后使用

```
<cfinvoke component="settings"
          method="getTHIS" 
      returnvariable="THIS" 
    /> 
```

哪个 WORKS - 除了（似乎）在映射上......

this.name 等似乎都可以正常工作并被设置 - 事实上，如果我做一个

```
<cfdump var="#THIS#" label="THIS" /> 
```

当我在 app.cfc 页面上“逐字地”设置它时，转储与 THIS 的转储相同。

但是 - 任何通过映射调用模板的尝试 - 都会导致标准“如果你想使用绝对路径，你必须创建一个映射等等等等......”

我更大的目标是（在应用程序启动时）扫描目录中的子目录，并根据某些子目录创建映射。但如果我不能将该功能抽象为它自己的功能 - 我将被迫直接在 app.cfc 中编写它（这不会杀死我，但我再次尝试对我的代码进行逻辑分段......似乎可以设置这些映射的时间和地点有限制......真的吗？

所以我想最大的问题是 - 我可以通过外部方法设置 this.mappings 吗？我想我可以使用 cfc 调用恢复“我想要的设置”，然后执行“设置 this.whatever = return form cfc” - （这可能是我的答案......）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:43:04.163

我没有对此进行测试，但我很确定如果您的 application.cfc 扩展了您的 settings.cfc，它会起作用。

```
component {
    public any function getMappings() {
        var mappings = {};
        //code to get your directories etc.
        return mappings;
    }
}

component extends="settings" {
    this.name = "xxxx";
    this.mappings = getMappings();
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T16:32:03.350

映射只能在“伪构造函数”中设置，不能在 Application.cfc 中的任何方法中设置 - [http://adobe.ly/QN2oX1](http://adobe.ly/QN2oX1)

您可以尝试将 this.mappings 设置为 CFC 调用的结果（我想不出为什么这不起作用），但如果它依赖于映射来执行此操作，它可能不起作用。

# ruby-on-rails - Rails 3 如何允许在没有 _attributes 指定的情况下传递嵌套属性

> ID：11904800
> 
> 赞同：9
> 
> 时间：2012-08-10T15:28:27.420
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

当使用accepts_nested_attributes_for时，我想传递“child”而不是传递“child_attributes”。我很确定如果我在我的控制器中放入很多逻辑来创建记录和子项，我可以做到这一点。但是，为了使我的控制器保持清洁和逻辑，在这种情况下，模型，我想知道如何在执行 POST 或 PUT 时切换 rails 3 以使用此语法。

```
{
  "name": "test",
  "child_attributes": [
    {
      "id": 1,
      "name": "test_child_update"
    },
    {
      "name": "test_child_create"
    }
} 
```

相当

```
{
  "name": "test",
  "child": [
    {
      "id": 1,
      "name": "test_child_update"
    },
    {
      "name": "test_child_create"
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T22:51:47.243

显然，这是做不到的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-22T15:11:44.167

后缀对`_attributes`JSON 请求和响应没有任何价值，但要在模型层中去掉它，您必须对 ActiveRecord 进行修补。每个人都讨厌猴子修补 ActiveRecord 关系。

How about doing it in the controller layer?

```
@comment = Comment.new(attributify(:comment))

# snip

# ApplicationController

def attributify()
  # Now I'll go and write this!
end 
```

Edit: Done. The controller mixin is here: [https://gist.github.com/johncant/6056036](https://gist.github.com/johncant/6056036)

# java - 在 Eclipse 中从 XML 生成 Java 代码

> ID：11904803
> 
> 赞同：5
> 
> 时间：2012-08-10T15:28:42.540
> 
> 标签：java, xml, eclipse, code-generation, eclipse-m2t-jet

我正在开发一个项目，该项目将有几个彼此非常相似的 Java 类，并且我想从 XML 文件生成这些类。我想要做的是改变 Eclipse 构建过程来做这样的事情：

*   编译代码生成器
*   运行代码生成器，将 XML 转换为 Java
*   编译项目的其余部分

我可以手动完成这一切，但我更愿意让 Eclipse 为我完成这一切。

**例子**

我希望能够获取如下所示的源 XML 文件：

```
<command-list>
    <command name="DATE" />
    <command name="GROUP">
        <capability "READER" />
        <argument "groupname" />
    </command>
    <command name="ARTICLE">
        <capability "READER" />
        <argument "message-id" optional="true" />
    </command>
</command-list> 
```

并让它给我类似于以下内容（在单独的文件中视情况而定）：

```
public class Date extends Command {
    public ResponseCode execute() {
        Server srv = getServer();
        srv.send("DATE");
        return srv.getResponse();
    }
}

public class Group extends Command {
    public ResponseCode execute() {
        Server srv = getServer();
        if (srv.hasCapability(Capabilities.READER) == false) {
            Log.debug("Attempting non-available capability: READER");
        }
        String groupname = getArgument("groupname");
        if (groupname == null) {
             throw new InvalidArgumentException("Require groupname");
        }
        String command = "GROUP";
        if (groupname != null) command += " " + groupname;
        srv.send(command);
        return srv.getResponse();
    }
}

public class Article extends Command {
    public ResponseCode execute() {
        Server srv = getServer();
        if (srv.hasCapability(Capabilities.READER) == false) {
            Log.debug("Attempting non-available capability: READER");
        }
        String messageId = getArgument("messageId");
        String command = "ARTICLE";
        if (messageId != null) command += " " + messageId;
        srv.send(command);
        return srv.getResponse();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T15:34:05.990

这正是模型到文本 (M2T) 项目中的 JET 组件的用途。事实上，您甚至可以使用 JET 创建项目、.classpath 和您需要的任何其他文件。

Jet 模板如下。请注意，这些模板的命名必须与所示完全相同。

/模板/main.jet

```
<%@taglib prefix="ws" id="org.eclipse.jet.workspaceTags" %>
<%-- Main entry point for com.lacqui.command.xform --%>

<%-- 
  Let c:iterate tags set the XPath context object.
  For 100% compatibility with JET 0.9.x or earlier, remove this statement
 --%>
<c:setVariable var="org.eclipse.jet.taglib.control.iterateSetsContext" select="true()"/>

    <c:setVariable select="/command-list" var="command-list" />

    --- traverse input model, performing calculations and storing 
    --- the results as model annotations via c:set tag 

    <c:set select="$command-list" name="project">com.lacqui.commands</c:set>
    <c:set select="$command-list" name="commandPkg">com.lacqui.commands</c:set>
    <c:set select="$command-list" name="commandDir"><c:get select="translate($command-list/@commandPkg,'.','/')" /></c:set>

    <c:iterate select="$command-list/command" var="command" >

            - Derive the class name from the name of the command

        <c:set select="$command" name="classname"><c:get select="camelCase($command/@name)" />Command</c:set>

        <c:iterate select="$command/argument" var="argument">

            <c:if test="not($argument/@optional)">
                <c:set select="$argument" name="optional">false</c:set>
            </c:if>

        </c:iterate>

    </c:iterate>

   --- traverse annotated model, performing text generation actions 
   --- such as ws:file, ws:folder and ws:project 

   <ws:project name="{$command-list/@project}" />
   <ws:file template="templates/project.jet" path="{$command-list/@project}/.project"  />
   <ws:file template="templates/classpath.jet" path="{$command-list/@project}/.classpath"/>

    <c:iterate select="$command-list/command" var="command" >

        <ws:file template="templates/class.jet" path="{$command-list/@project}/src/{$command-list/@commandDir}/{$command/@classname}.java" replace="true"/>

    </c:iterate> 
```

/templates/classpath.jet

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" path="src"/>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
    <classpathentry kind="output" path="bin"/>
</classpath> 
```

/模板/project.jet

```
<?xml version="1.0" encoding="UTF-8"?>
<projectDescription>
    <name><c:get select="$command-list/@project" /></name>
    <comment></comment>
    <projects>
    </projects>
    <buildSpec>
        <buildCommand>
            <name>org.eclipse.jdt.core.javabuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
    </buildSpec>
    <natures>
        <nature>org.eclipse.jdt.core.javanature</nature>
    </natures>
</projectDescription> 
```

/模板/class.jet

```
package <c:get select="$command-list/@commandPkg" />;

public class <c:get select="$command/@classname" /> extends Command {
    public ResponseCode execute() {
        Server srv = getServer();
<c:iterate select="$command/capability" var="capability">

        if (srv.hasCapability(Capabilities.<c:get select="$capability/@name"/>) == false) {
            Log.debug("Attempting non-available capability: <c:get select="$capability/@name"/>");
        }
</c:iterate>        
<c:iterate select="$command/argument" var="argument">

        String <c:get select="$argument/@name"/> = getArgument("<c:get select="$argument/@name"/>");
<c:if test="$argument/@optional = 'false'" >
        if (<c:get select="$argument/@name"/> == null) {
             throw new InvalidArgumentException("Require <c:get select="$argument/@name"/>");
        }
</c:if>
</c:iterate>        

        String command = "GROUP";
<c:iterate select="$command/argument" var="argument">
        if (<c:get select="$argument/@name"/> != null) command += " -<c:get select="$argument/@name"/> " + <c:get select="$argument/@name"/>;
</c:iterate>       

        srv.send(command);
        return srv.getResponse();
    }
} 
```

并使用此模型：

```
<command-list>
    <command name="DATE" />
    <command name="GROUP">
        <capability name="LOGGER" />
        <capability name="AUTHENTICATOR" />
        <argument name="groupname" />
    </command>
    <command name="ARTICLE">
        <capability name="READER" />
        <argument name="article-id" optional="false" />
        <argument name="message-id" optional="true" />
    </command>
</command-list> 
```

给出一个名为 com.lacqui.commands 的完整 java 项目，其中包含三个 java 文件：

```
package com.lacqui.commands;

public class ArticleCommand extends Command {
    public ResponseCode execute() {
        Server srv = getServer();

        if (srv.hasCapability(Capabilities.READER) == false) {
            Log.debug("Attempting non-available capability: READER");
        }

        String article-id = getArgument("article-id");
        if (article-id == null) {
             throw new InvalidArgumentException("Require article-id");
        }

        String message-id = getArgument("message-id");

        String command = "GROUP";
        if (article-id != null) command += " -article-id " + article-id;
        if (message-id != null) command += " -message-id " + message-id;

        srv.send(command);
        return srv.getResponse();
    }
} 
```

还有这个：

```
package com.lacqui.commands;

public class GroupCommand extends Command {
    public ResponseCode execute() {
        Server srv = getServer();

        if (srv.hasCapability(Capabilities.LOGGER) == false) {
            Log.debug("Attempting non-available capability: LOGGER");
        }

        if (srv.hasCapability(Capabilities.AUTHENTICATOR) == false) {
            Log.debug("Attempting non-available capability: AUTHENTICATOR");
        }

        String groupname = getArgument("groupname");
        if (groupname == null) {
             throw new InvalidArgumentException("Require groupname");
        }

        String command = "GROUP";
        if (groupname != null) command += " -groupname " + groupname;

        srv.send(command);
        return srv.getResponse();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:46:45.960

您可能想看看 JaxB。

如果您想快速浏览一下，Lars Vogel 做了一个简单的教程。
[JAXB 教程](http://www.vogella.com/articles/JAXB/article.html)

这里还有一个 xml unmarshaling 的基准测试。
[Java中的XML解组基准：JAXB vs STax vs Woodstox](http://java.dzone.com/articles/xml-unmarshalling-benchmark)

# django - Django 从字段开始

> ID：11904805
> 
> 赞同：34
> 
> 时间：2012-08-10T15:28:51.650
> 
> 标签：django

假设我有一个带有邮政编码字段的地址模型。我可以使用以下行查找邮政编码以“123”开头的地址：

```
Address.objects.filter(postcode__startswith="123") 
```

现在，我需要以“其他方式”进行搜索。我有一个带有 postcode_prefix 字段的地址模型，我需要检索所有 postcode_prefix 是给定代码前缀的地址，例如“12345”。因此，如果在我的数据库中我有 2 个带有 postcode_prefix = "123" 和 "234" 的地址，则只会返回第一个地址。

就像是：

```
Address.objects.filter("12345".startswith(postcode_prefix)) 
```

问题是这行不通。我能想出的唯一解决方案是对第一个字符执行过滤器，例如：

```
Address.objects.filter(postcode_prefix__startswith="12345"[0]) 
```

然后，当我得到结果时，制作一个正确过滤它们的列表理解，如下所示：

```
results = [r for r in results if "12345".startswith(r.postcode_prefix)] 
```

有没有更好的方法在 django 中做到这一点？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-10T15:59:46.903

**编辑：这并没有回答原始问题**，而是如何用另一种方式表达查询。

我认为你试图用你的“类似”行做的事情正确地写成这样：

```
Address.objects.filter(postcode__startswith=postcode_prefix) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-10T16:53:03.397

在 SQL 术语中，您想要实现的内容如下（“12345”是您要搜索的邮政编码）：

```
SELECT *
FROM address
WHERE '12345' LIKE postcode_prefix||'%' 
```

这不是一个真正的标准查询，我看不到在 Django 中仅使用 get()/filter() 实现这一目标的任何可能性。

但是，Django 提供了一种方法来提供额外的 SQL 子句`extra()`：

```
postcode = '12345'
Address.objects.extra(where=["%s LIKE postcode_prefix||'%%'"], params=[postcode]) 
```

请参阅[有关 extra() 的 Django 文档以](https://docs.djangoproject.com/en/dev/ref/models/querysets/#extra)获取更多参考。另请注意，extra 包含纯 SQL，因此您需要确保该子句对您的数据库有效。

希望这对你有用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-06-06T14:06:54.257

有点拗口，但您可以通过注释您的搜索值然后对其进行过滤来做到这一点。一切都在数据库中很快发生。

```
from django.db.models import Value as V, F, CharField

Address.objects.exclude(
    postcode_prefix=''
).annotate(
    postcode=Value('12345', output_field=CharField())
).filter(
    postcode__startswith=F('postcode_prefix')
) 
```

`exclude`仅当可以`postcode_prefix`为空时才需要。这将产生一个 SQL `like '%'`，它将匹配每个`postcode`.

我相信这些天你也可以通过一个很好的模板函数来做到这一点......但这对我来说已经足够干净了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-08T18:50:50.733

一个可能的替代方案。（不知道它与接受的解决方案相比如何，以列作为第二个参数，在执行时间）

`q=reduce(lambda a,b:a|b, [Q(postcode__startswith=postcode[:i+1]) for i in range(len(postcode))])`

因此，您生成所有前缀，或者它们一起生成......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-28T01:19:00.920

您需要的原始 SQL 查询如下所示：

```
select * from postal_code_table where '1234567' like postal_code||'%' 
```

此查询将从您的表中选择任何 postal_code，它是“1234567”的子字符串，并且必须从头开始，即：“123”、“1234”等。

现在要在 Django 中实现这一点，首选方法是使用自定义查找：

```
from django.db.models.fields import Field
from django.db.models import Lookup

@Field.register_lookup
class LowerStartswithContainedBy(Lookup):
    '''Postgres LIKE query statement'''
    lookup_name = 'istartswithcontainedby'

    def as_sql(self, compiler, connection):
        lhs, lhs_params = self.process_lhs(compiler, connection)
        rhs, rhs_params = self.process_rhs(compiler, connection)
        params = lhs_params + rhs_params
        return f"LOWER({rhs}) LIKE LOWER({lhs}) || '%%'", params 
```

现在您可以编写一个 django 查询，如下所示：

```
PostCode.objects.filter(code__istartswithcontainedby='1234567') 
```

同样，如果你只是寻找子字符串并且不需要startswith条件，只需将as_sql方法的返回行修改为以下内容：

```
return f"LOWER({rhs}) LIKE '%%' || LOWER({lhs}) || '%%'", params 
```

更详细的解释见我的 git gist [Django custom lookup](https://gist.github.com/oscarychen/743a81bc9990d192a89c1d7f978e18d5)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-03T03:03:59.620

A. 如果不是问题[https://code.djangoproject.com/ticket/13363](https://code.djangoproject.com/ticket/13363)，您可以这样做：

```
queryset.extra(select={'myconst': "'this superstring is myconst value'"}).filter(myconst__contains=F('myfield')) 
```

也许，他们会解决一个问题并且它可以工作。

B. 如果不是问题 16731（对不起，没有提供完整的 url，没有足够的代表，请参阅上面的另一张票），您可以通过添加“.annotate”的字段进行过滤，并创建自定义聚合函数，例如： [http:// coder.cl/2011/09/custom-aggregates-on-django/](http://coder.cl/2011/09/custom-aggregates-on-django/)

C. 最后和成功。我已经设法使用以下猴子补丁来做到这一点：

1.  django.db.models.sql.Query.query_terms
2.  django.db.models.fields.Field.get_prep_lookup
3.  django.db.models.fields.Field.get_db_prep_lookup
4.  django.db.models.sql.where.WhereNode.make_atom

刚刚定义了自定义查找“_starts” *，它具有“* _startswith”的反向逻辑

# java - 在android的tabhost中添加滚动

> ID：11904806
> 
> 赞同：12
> 
> 时间：2012-08-10T15:28:51.553
> 
> 标签：java, android, eclipse, android-layout

我有一个标签主机，其中有 6 个以上的按钮。然而，屏幕仅显示 3-4 个按钮。

以下是我与图像一起使用的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#777777">

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"

        >
       <RelativeLayout
            android:id="@+id/layTab"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:paddingLeft="10dp"
            android:paddingRight="10dp"
            android:background="@drawable/navbar_background"
            android:layout_alignParentBottom="true"
            android:layout_centerVertical="true"
            >
            <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            />
        </RelativeLayout>
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_alignParentTop="true"
            android:layout_above="@+id/layTab"/>

   </RelativeLayout>
</TabHost> 
```

![在此处输入图像描述](../Images/c4d2ff747d77628e8821fadd4833fc11.png)

问题是，我想如何添加一个滚动，以便我可以滚动到所有 6 个按钮或任何其他技巧。

最好的祝福

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-10T15:33:40.617

只需将 TabWidget 嵌套在 Horizo​​ntalScrollingView 中，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#777777" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <RelativeLayout
            android:id="@+id/layTab"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerVertical="true"
            android:background="@drawable/navbar_background"
            android:gravity="center"
            android:paddingLeft="10dp"
            android:paddingRight="10dp" >

            <HorizontalScrollView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:fillViewport="true"
                android:scrollbars="none" >

                <TabWidget
                    android:id="@android:id/tabs"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >
                </TabWidget>
            </HorizontalScrollView>
        </RelativeLayout>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_above="@+id/layTab"
            android:layout_alignParentTop="true" />
    </RelativeLayout>

</TabHost> 
```

顺便说一句，此解决方案适用于许多其他场景，例如 RadioGroup

# sql - 用于计算 MS Access 2010 中相同登录/注销列的总工作时间的 sql 查询

> ID：11904809
> 
> 赞同：2
> 
> 时间：2012-08-10T15:28:58.750
> 
> 标签：sql, ms-access

> **可能重复：**
> [同一表中两条记录之间的日期差异](https://stackoverflow.com/questions/5449496/date-difference-between-two-records-in-same-table)

我是 MS Access 的新手，知道一点 SQL，这是我在这里的第一个问题。在提出问题之前，我进行了很多搜索以找到合适的解决方案。这是场景：

我有一个具有以下结构的表：
RCDID-- EmployeeID-- LogDate-- LogTime-- terminalID-- InOut
1 -----------2001---------1/4 /2012---15:39:27----iGuard3A-----IN
2 -----------2023---------1/4/2012-- -15:45:27----iGuard3A-----IN
3 -----------2001---------1/4/2012---15:47 :29----iGuard3A-----Out

最后的要求是获取每个员工 id 每个月的总工作时间。主要问题是登录和注销时间在不同的记录上。但我已经这样做了，我的意思是我写了一个 sql 来为每个登录注销时间间隔计算另一个。使用其他一些标准，我的 sql 如下：

```
SELECT AccessLog.EmployeeID, 
       AccessLog.LogDate, 
       AccessLog.TerminalID, 
       AccessLog.LogTime,   
       Format((SELECT MAX(LogTime) 
               FROM AccessLog AS Alias  
               WHERE Alias.LogTime < AccessLog.LogTime 
               AND Alias.EmployeeID = AccessLog.EmployeeID 
               AND Alias.LogDate = AccessLog.LogDate 
               AND AccessLog.TerminalID <> "iGuard1A" 
               AND AccessLog.TerminalID  <> "iGuard1B" 
               AND AccessLog.EmployeeID LIKE "2*"),"hh:nn:ss") AS PrevTime,
       Format((ElapsedTime([PrevTime],[LogTime])),"hh:nn:ss") AS Duration,
       AccessLog.InOut
FROM AccessLog
WHERE AccessLog.TerminalID <> "iGuard1A" 
AND AccessLog.TerminalID <> "iGuard1B" 
AND AccessLog.EmployeeID LIKE "2*" 
AND AccessLog.InOut = "OUT"
ORDER BY AccessLog.EmployeeID, AccessLog.LogDate, AccessLog.LogTime; 
```

事实证明，这对我来说是一个复杂的问题。但因为这是我第一次在访问方面工作，所以我从一开始就没有意识到一切。我计算了 prevtime 并将其用作相应注销时间记录的登录时间。

现在我的目标是计算每个员工 ID 的总持续时间。我使用了以下代码。但它需要我不确定的 group by 子句。

```
Format((Sum([Duration])-Int(Sum([Duration]))),"hh:nn:ss") AS TotalTime 
```

这个总时间将基于每个月。

任何帮助将不胜感激。我是不是走错了路。我应该为此目的使用 vba 和报告吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T10:44:36.537

我找到了如下解决方案，但是查询花费了太多时间，几乎一分钟。我认为这是因为多次转换。知道如何优化此查询。哪个函数的时间转换更快？表中 logtime 的数据类型是日期/时间，我应该将其更改为任何其他类型，如文本吗？

```
SELECT EmployeeID,
       month(LogDate), 
       SUM(int(DateDiff("s",  '00:00:00',Duration))) AS abc
       FROM (SELECT AccessLog.EmployeeID, 
                    AccessLog.LogDate, 
                    AccessLog.TerminalID, 
                    AccessLog.LogTime, 
                    Format((SELECT max(LogTime) 
                          FROM AccessLog AS Alias 
                          WHERE Alias.LogTime < AccessLog.LogTime 
                                AND Alias.EmployeeID = AccessLog.EmployeeID 
                                AND Alias.LogDate = AccessLog.LogDate 
                                AND (Alias.TerminalID)<>"iGuard1A" 
                                And (Alias.TerminalID)<>"iGuard1B"  
                                AND Alias.EmployeeID = AccessLog.EmployeeID),
                    "hh:nn:ss")  AS PrevTime, 
                    Format((ElapsedTime(iif(PrevTime = '',logtime,prevtime),[LogTime])),"hh:nn:ss") AS Duration, 
                    AccessLog.InOut 
            FROM AccessLog 
            WHERE (((AccessLog.TerminalID)<>"iGuard1A" 
            And (AccessLog.TerminalID)<>"iGuard1B") 
            AND ((AccessLog.EmployeeID) Like "2*") 
            AND ((AccessLog.InOut)="OUT")) 
ORDER BY AccessLog.EmployeeID, AccessLog.LogDate, AccessLog.LogTime) 
GROUP BY EmployeeID, month(LogDate); 
```

# wmi - 试图确定适当的通知设计

> ID：11904813
> 
> 赞同：1
> 
> 时间：2012-08-10T15:29:13.953
> 
> 标签：wmi, listener, snmp, monitor, broadcast

我们正在构建一个内部应用程序，它将执行以下操作： 作为 Windows 服务运行 扫描各种服务器/平台类型以确认它们已启动并正在运行 在我们所有的 WCF 服务上调用 HeartBeat() 方法

然后我们要做的是（对于每个服务器）发送通知广播，以便侦听器可以获取数据并在仪表板环境中显示实时结果。

此外，侦听器将收集数据以用于下钻或报告目的。

我很难确定广播结果的正确方法是什么。SNMP 似乎很合适，但我不确定在 C# 中实现它有多容易。我目前已经查看了 WMI 和 SNMP。

我正在寻找有关广播方法的 SNMP 或 WMI 替代方案的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:07:29.717

如果您只使用 C# 进行编程，那么最好的办法是找到一些您可能必须购买的 C# SNMP 库。

如果您想要使用可移植性和标准，请使用 SNMP。

如果您总是要使用 Win32 C#，那么请使用 WMI 解决方案。

如果您不介意在 C# 之外进行编码，而是使用 C 或 C++ 并希望使其与其他系统兼容，那么我强烈建议您使用`Net-SNMP`并从中构建 SNMP 代理。

# internet-explorer - 单选按钮的 CSS3 转换问题 - IE 9

> ID：11904814
> 
> 赞同：0
> 
> 时间：2012-08-10T15:29:17.377
> 
> 标签：internet-explorer, css, cross-browser, css-transitions

我正在尝试使用 CSS3 转换属性创建一个单选按钮。它适用于除 IE 浏览器之外的所有主流浏览器。我试图让它至少从 IE 9 开始工作。

我知道 IE 9 不支持 css3 转换。我很高兴有任何工作可以使它从 ie 9 开始工作。

[http://jsfiddle.net/meetravi/7ufZ4/8/](http://jsfiddle.net/meetravi/7ufZ4/8/)

# delphi - 在delphi中创建表单时出错

> ID：11904815
> 
> 赞同：2
> 
> 时间：2012-08-10T15:29:19.373
> 
> 标签：delphi, delphi-5

嗨，我有使用 100 多种表格的 delphi 应用程序。有一种表格叫做表格 B，它是从表格 A 派生的。

```
Unit B 

interace

uses A;

Type
Form B = Class(Form A)

End; 
```

现在，当我尝试在 IDE 上打开 Form B 时，我收到错误消息“错误创建表单：找不到 TFormA 的祖先”。但是当我打开表格 A 然后尝试表格 B 时，我可以打开表格而不会出现任何错误。我无法找到它发生的原因。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T16:02:54.703

使用表单继承时要记住两点。dfm文件需要声明“inherited TFormB”而不是“object TFormB” 另一项是Delphi需要知道TFormA在哪里才能创建TFormB。我已经有一段时间没有这样做了，如果我没记错的话，将基本表单添加到存储库时效果会更好

既然您指出您是手动执行的，请确保 dfm 中的声明使用的是“继承”一词，而不是我上面描述的“对象”。要自己进行更改，请执行以下操作

1）打开两种形式。2）然后将 TFormB 视为文本 3）将其更改为继承，如下所述

```
 inherited FormB: TFormB
      Caption = 'FormB'
      PixelsPerInch = 96
      TextHeight = 13
    end

// not

    object FormB: TFormB
      Caption = 'FormB'
      PixelsPerInch = 96
      TextHeight = 13
    end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:57:39.620

您应该使用 Delphi IDE 提供的可视化表单继承；我没有 Delphi 5，在 Delphi XE 中通过 File->New->Other...->Inheritable Items 访问它。我确信它在 Delphi 5 中也可用，但可能来自不同的菜单项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-16T12:42:37.790

尽管 DFM 文件中的所有内容都“继承”了，但我遇到了同样的问题。

解决我的问题是通过右键单击项目管理器->添加并选择祖先文件将祖先文件添加到项目中。

# mysql - mySQL order by count 子查询麻烦

> ID：11904817
> 
> 赞同：0
> 
> 时间：2012-08-10T15:29:22.713
> 
> 标签：mysql, count, subquery

我有一个名为 items_status 的表，它有 3 个字段，item_id、user_id 和状态，可以是“拥有”或“想要”。

```
Field   Type                Null    Key 
user_id varchar(10)         NO      PRI     
item_id varchar(10)         NO      PRI     
status  set('have','want')  YES     NULL 
```

我有一个页面，我想在其中获取表中所有用户 ID 的列表，这些用户 ID 按状态为“拥有”的表中与其用户 ID 关联的记录数排序。到目前为止，这是我能想到的最好的：

```
SELECT user_id 
FROM items_status AS is  
ORDER BY 
    //Subquery to get number of items had by user
    (SELECT COUNT(i.item_id) 
          FROM items_status AS i 
          WHERE i.user_id = is.user_id AND i.status = 'have') DESC
GROUP BY user_id 
```

但是，这会在子查询中引发错误。如何获取按他们拥有的项目数排序的表中的所有用户 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:33:02.763

你可以这样做：

```
SELECT  user_id
FROM    items_status
WHERE   `status` = 'have'
GROUP BY userID
ORDER BY COUNT(user_id) DESC 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/62f3f/1)

*列名略有不同，但查询相同*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:34:07.580

```
SELECT user_id, SUM(CASE WHEN i.status = 'have' THEN 1 ELSE 0) AS s
FROM items_status AS is
GROUP BY user_id
ORDER BY  SUM(CASE WHEN i.status = 'have' THEN 1 ELSE 0) DESC 
```

# vb.net - 过滤 datagridview 的 bindingSource 不起作用

> ID：11904820
> 
> 赞同：0
> 
> 时间：2012-08-10T15:29:24.537
> 
> 标签：vb.net, datagridview, filter, bindingsource

我有 5 个数据网格视图，每个有 5 到 15 列...

所以我正在尝试使过滤自动化一点。但我根本无法让它工作！

我的 bindingSource 使用实现 Sortable 的 BindingList：[http ://www.tech.windowsapplication1.com/content/sortable-binding-list-custom-data-objects](http://www.tech.windowsapplication1.com/content/sortable-binding-list-custom-data-objects)

我已经搜索了一段时间，但找不到为什么我可以设置 bindingSource.Filter，但它什么也没做：S

我找到了数据表或 c# 的示例，但我还没有找到 Vb.net 和 BindingSource 的示例...

这是我创建绑定源的代码，我添加了过滤器作为测试，它通常不在这里。

```
Public Function reqTable(Of T)(ByVal pTable As String, ByVal pNoProjet As Integer, 
      Optional ByVal strAdditionnalConditions As String = "") As BindingSource
    Dim lstRetour As New cclSortableBindingList(Of T)(New List(Of T))
    Dim bsRetour As New BindingSource(lstRetour, "")

    rsRequestCSV = conSQL.Execute("SELECT * FROM " & pTable & " WHERE NoProjet = " & 
        pNoProjet & " " & strAdditionnalConditions)
    With rsRequestCSV
        While Not .EOF
            lstRetour.Add(Activator.CreateInstance(GetType(T), New Object() 
                 {rsRequestCSV.Fields})) 'New clsTable(rsRequestCSV.Fields))
            .MoveNext()
        End While
    End With
    bsRetour.Filter = "Quantite < 3"
    Return bsRetour
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:39:23.333

为了使用`BindingSource.Filter`，底层列表 ( `cclSortableBindingList`) 需要实现`IBindingListView`接口。A`BindingList`没有实现这个接口。

请参阅MSDN 中的[BindingSource.Filter 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.filter.aspx)。

# c# - 是否建议将 prevTask.Wait() 与 ContinueWith 一起使用（来自任务库）？

> ID：11904821
> 
> 赞同：88
> 
> 时间：2012-08-10T15:29:26.893
> 
> 标签：c#, task-parallel-library

所以最近有人告诉我，我如何使用 .ContinueWith 来处理任务并不是使用它们的正确方法。我还没有在互联网上找到这方面的证据，所以我会问你们，看看答案是什么。这是我如何使用 .ContinueWith 的示例：

```
public Task DoSomething()
{
    return Task.Factory.StartNew(() =>
    {
        Console.WriteLine("Step 1");
    })
    .ContinueWith((prevTask) =>
    {
        Console.WriteLine("Step 2");
    })
    .ContinueWith((prevTask) =>
    {
        Console.WriteLine("Step 3");
    });
} 
```

现在我知道这是一个简单的例子，它会运行得非常快，但只是假设每个任务都做了一些更长的操作。所以，我被告知在.ContinueWith 中，你需要说prevTask.Wait(); 否则你可以在上一个任务完成之前完成工作。这甚至可能吗？我假设我的第二个和第三个任务只有在他们之前的任务完成后才会运行。

我被告知如何编写代码：

```
public Task DoSomething()
{
    return Task.Factory.StartNew(() =>
    {
        Console.WriteLine("Step 1");
    })
    .ContinueWith((prevTask) =>
    {
        prevTask.Wait();
        Console.WriteLine("Step 2");
    })
    .ContinueWith((prevTask) =>
    {
        prevTask.Wait();
        Console.WriteLine("Step 3");
    });
} 
```

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-08-10T17:56:21.963

Ehhh ....我认为当前的一些答案缺少一些东西：异常会发生什么？

您调用`Wait`延续的唯一原因是观察延续本身中前件的潜在异常。`Result`如果您在 a 的情况下访问`Task<T>`并且如果您手动访问该`Exception`属性，也会发生相同的观察。坦率地说，我不会打电话`Wait`或访问`Result`，因为如果出现异常，您将付出重新提高它的代价，这是不必要的开销。相反，您可以只检查前件的`IsFaulted`属性`Task`。或者，您可以通过链接多个兄弟延续来创建分叉工作流，这些延续仅基于成功或失败使用`TaskContinuationOptions.OnlyOnRanToCompletion`and触发`TaskContinuationOptions.OnlyOnFaulted`。

现在，没有必要在 continuation 中观察前件的异常，但如果“步骤 1”失败，您可能不希望您的工作流程继续前进。在这种情况下：指定`TaskContinuationOptions.NotOnFaulted`您的`ContinueWith`调用将阻止延续逻辑甚至触发。

请记住，如果您自己的延续没有观察到异常，那么等待整个工作流程完成的人将是观察它的人。他们要么`Wait`在`Task`上游进行，要么已经在自己的延续上知道它何时完成。如果是后者，他们的延续就需要使用前面提到的观察逻辑。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-10T15:32:28.917

您正在正确使用它。

> 创建一个**在目标任务完成时异步执行的延续。**

来源：[Task.ContinueWith 方法（作为 MSDN 的操作）](http://msdn.microsoft.com/en-us/library/dd270696.aspx)

`prevTask.Wait()`每次调用都必须`Task.ContinueWith`调用似乎是一种重复不必要逻辑的奇怪方式——即做一些“超级可靠”的事情，因为你实际上不了解某段代码的作用。就像检查 null 只是为了抛出一个`ArgumentNullException`无论如何都会被抛出的地方。

所以，不，谁告诉你这是错误的，可能不明白为什么`Task.ContinueWith`存在。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-08-10T15:34:53.207

谁告诉你的？

引用[MSDN](http://msdn.microsoft.com/en-us/library/dd321405.aspx)：

> 创建一个在目标任务完成时异步执行的延续。

另外，如果不等待上一个任务完成，**继续**的目的是什么？

你甚至可以自己测试它：

```
Task.Factory.StartNew(() =>
    {
        Console.WriteLine("Step 1");
        Thread.Sleep(2000);
    })
    .ContinueWith((prevTask) =>
    {
        Console.WriteLine("I waited step 1 to be completed!");
    })
    .ContinueWith((prevTask) =>
    {
        Console.WriteLine("Step 3");
    }); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-10T15:32:44.990

从[MSDN](http://msdn.microsoft.com/en-us/library/dd991174.aspx)上`Task.Continuewith`

> 在当前任务完成之前，不会安排返回的任务执行。如果不满足通过 continuationOptions 参数指定的条件，则继续任务将被取消而不是计划。

我认为您期望它在第一个示例中的工作方式是正确的方式。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-17T00:01:24.797

您可能还想考虑使用 Task.Run 而不是 Task.Factory.StartNew。

Stephen Cleary 的[博客文章和](http://blog.stephencleary.com/2013/08/startnew-is-dangerous.html)[他引用](https://blogs.msdn.microsoft.com/pfxteam/2011/10/24/task-run-vs-task-factory-startnew/)的 Stephen Toub 的文章解释了这些差异。[这个答案](https://stackoverflow.com/questions/38423472/what-is-the-difference-between-task-run-and-task-factory-startnew)中也有讨论。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-17T15:34:53.137

通过访问`Task.Result`你实际上是在做类似的逻辑`task.wait`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-18T08:29:20.530

我将重申许多人已经说过的话，`prevTask.Wait()` **是不必要的**。

有关更多示例，可以转到[**使用连续任务链接任务**](https://docs.microsoft.com/en-us/dotnet/standard/parallel-programming/chaining-tasks-by-using-continuation-tasks)，这是 Microsoft 提供的另一个链接，其中包含很好的示例。

# xml - 从一个 XML 文件更改数据 从另一个文件获取数据

> ID：11904822
> 
> 赞同：0
> 
> 时间：2012-08-10T15:29:26.660
> 
> 标签：xml

我有 2 个 xml 文件：

文件1：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../helpproject.xsl" ?>
<topic template="Default" lasteditedby="fjuras" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../helpproject.xsd">
 <body>
  <para><text>Enter the </text><lang>button1</lang><text>by tapping the list icon</text></para>
 </body>
</topic> 
```

文件2：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<language id="lang.main" name="English (British)" iso="GBR" langIso="ENG" charset="roman" charsetSpecial="special" usingCJK="no" R2L="no">
 <lang id="button1" text="Menu"/>
</language> 
```

我的问题是我想用 file2 中的 Menu 替换 file1 中的 button1。我必须这样做，因为 file2 中的名称发生了很大变化，但 ids 保持不变。我无法修改文件 helpproject.xsl。该文件是最终的样式表。我想在显示内容之前进行此修改。我想这样做，或者直接在file1中写一些东西，或者制作一些新的外部xsl文件来做到这一点。如果有任何可能这样做，请回复我，因为我现在不知道如何做到这一点。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:17:20.217

我认为您可以对合并这两个文件的[相关主题感到满意。](https://stackoverflow.com/questions/1510688/xslt-a-simple-way-to-merge-xml-files)

一旦完成，您就可以完成一些 xsl 转换。

希望这会有所帮助

一种问候

# java - PowerMock 的 mockStatic() 覆盖 X.class.y() 方法

> ID：11904825
> 
> 赞同：1
> 
> 时间：2012-08-10T15:29:37.120
> 
> 标签：java, static, powermock, java.lang.class

MyClass.java：

```
package test;
public final class MyClass {
    public MyClass() { }
    public Package returnPackage() {
        return MyClass.class.getPackage();
    }
} 
```

测试类.java：

```
package test;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;
import static org.powermock.api.mockito.PowerMockito.*;

@RunWith(PowerMockRunner.class)
@PrepareForTest(MyClass.class)
public class TestClass {
    @Test
    public void test() throws Exception {
        System.out.println(new MyClass().returnPackage());
        mockStatic(MyClass.class);
        System.out.println(new MyClass().returnPackage());
    }
} 
```

但是，这会导致：

```
package test
null 
```

任何`MyClass.class`方法调用都`null`在`PowerMockito.mockStatic(Class)`. 有什么办法可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:22:56.967

解决方法：我可以使用 EasyMock-API 来设置没有`PowerMockito.mockStatic()`.

# jakarta-ee - EJB 上的 JavaEE 类注释处理

> ID：11904826
> 
> 赞同：3
> 
> 时间：2012-08-10T15:29:41.113
> 
> 标签：jakarta-ee, annotations, ejb

有人能告诉我如何在受保护或私有方法上处理类注释（如拦截器）吗？

如果我有这样的 EJB：

```
@Stateless
@Interceptors({ SomeInterceptor.class })
public class ContactBean implements ContactLocal {

@Override
public void doSomethingWithPublicMethod(final Long id) {
    return doSomething(id)
}

ContactEntity doSomething(final Long id){
    doSomethingPrivate(id);
}

private doSomethingPrivate(final Long id){
    ...
} 
```

拦截器是在所有方法上调用的，只是那些标记为 @Override 的方法（看不出它为什么应该这样做）还是有任何其他规则？我正在快速浏览 Java EE 教程，但找不到任何描述它的内容。可能取决于容器吗？

所以我假设我应该在接口上拥有我所有的拦截器、事务等，而不是在 Bean 实现上，如果我想让它们只在实现接口的方法上工作......？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T21:27:46.177

仅在通过代理进行调用时才处理托管 bean（如 EJB bean）上的注释。换句话说，从豆子外面。

在 Java 中，不可能（很容易）装饰隐式`this`变量。当您从该`doSomethingWithPublicMethod`方法调用您的默认和私有方法时，不会对这些方法进行拦截。

同样，如果这些方法单独使用 say`@RunAs`或进行注释`@Asynchronous`，那么这些方法也不会被处理。

Adam Bien 在他的博客中更详细地解释了这一点：http: [//www.adam-bien.com/roller/abien/entry/how_to_self_invoke_ejb](http://www.adam-bien.com/roller/abien/entry/how_to_self_invoke_ejb)

# c - 使用 strtok() 比较两个字符串

> ID：11904831
> 
> 赞同：1
> 
> 时间：2012-08-10T15:30:01.743
> 
> 标签：c, string, file, strtok

我需要比较两个文本文件中的字符串。在使用（对于任一文件）分隔字符串`strtok()`时，我在引用两个文件中的句子时遇到问题，使用`strtok()`，因为它们正在发生冲突。

```
#include <stdio.h>
#include <string.h>
#include <conio.h>

int main()
{
    FILE *fp,*fp1,*fp2;
    fp=fopen("inp1.txt","r");
    fp1=fopen("inp2t.txt","r");

    int f;
    char *a,*b,*chk;
    char buffer[500],buf[5000];

    while(fgets(buf,5000,fp1));
    {
        chk= (char *)strtok (buf," ");

        while(chk!=NULL)
        {
            rewind(fp);
            f=0;

            while(fgets(buffer,500,fp))
            {
                a= (char *) strtok(buffer,"\t");
                b= (char *) strtok(NULL,"\n");

                if(stricmp(a,chk)==0)
                {
                    printf("%s",b);
                    printf(" ");
                    f=1;
                }
            }

            if(f==0)
            {
                printf("%s",chk);
                printf(" ");
            }

            chk= (char *) strtok(NULL," ");                
        }
    }
    fclose(fp);
    fclose(fp1);

    getch();
    return 0;                    
} 
```

如何修复此代码，以便能够从两个输入文件中提取令牌？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:33:38.323

strtok() 使用全局内部值，这将发生冲突。使用 strtok_s() 来防止这种情况，因为该函数需要一个引用变量，该变量将使两个实例分开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T15:35:35.563

`strtok`使用指向正在解析的字符串的静态指针，因此在任何给定时间只能对其进行一次调用。

我可能只是使用：

```
char buffera[5000];
char bufferb[5000];

fscanf(fp, "%4999s", buffera);
// ...
fscanf(fp, "%4999s", bufferb); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-19T21:54:09.267

strtok 有一个内部状态，可以记住最后一个位置。strtok_r() 是 strtok() 的可重入版本。检查它是否在您的平台上可用并使用它。

# python - 修改不理想的列表格式并将其导出到 Excel (Python)

> ID：11904832
> 
> 赞同：3
> 
> 时间：2012-08-10T15:30:05.333
> 
> 标签：python, list, export-to-excel

对 Python 非常陌生，无意侮辱任何人的智商。

我有一个大列表，包含一系列 id 和相关值，极短的版本如下所示：

```
large = [('550111', [(4, 5, 8), (6, -4, -6)]), ('222211', [(2, -4, 5), (1, 15, -4)])] 
```

我有这样的代码，可以将理想格式导出到 Excel，但是没有进行所需的修改：

```
import csv
with open("out1.csv", "wb") as fp: 
 writer = csv.writer(fp, delimiter=",")     
for entry in large:        
 writer.writerow([entry[0]])         
for line in entry[1]:             
 writer.writerow(line)        
 writer.writerow([]) 
```

从此输出到 Excel *（每个值都有自己的单独单元格 - 5501 在 A1 中，4 在 A2 中，5 在 B2 中，8 在 C2 中......第一个空格将在 A4 中等）*看起来像：

```
550111 
4,5,8 
6,-4,-6  
<space here - dont know how to put them in>
222211 
2,4,-5 
1,-15, 4 
 <space here - dont know how to put them in> 
```

这是完美的，但是我也希望产生值的绝对最大值。这是我需要帮助的地方。我不知道如何将绝对最大函数写入导出代码，因为我不断收到错误消息说我无法将函数应用于列表。

我还需要在最后插入一个从 1 到 8904 的数字序列。

导出到 Excel 后所需的形式 - 具有**绝对最大值 .ie ignoreinf '-' 符号**和**排序的绝对最大值**

```
550111 
4,5,8 
6,-4,-6
'space here'
'Max:'
6, 5, 8
'Sorted max'
8, 6, 5
'space here'     
222211 
2,4,-5 
1,-15,4
'space here'
'Max:'
2, 15, 5
'Sorted max:' 
15, 5, 2
'space here'
1, 2, 3, ........, 8904 
```

抱歉，如果问题很烦人/新手/琐碎。帮助真的很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:58:07.903

我认为以下代码片段可以帮助您获取最大值和排序的最大值。抱歉，虽然无法帮助您将它们放入 excel 中

```
for entry in large:
    max_list=[]
    for z in zip(*entry[1]): 
        max_list.append(max(z))
    print max_list
    max_list.sort(reverse=True)
    print max_list

[6, 5, 8]
[8, 6, 5]
[2, 15, 5]
[15, 5, 2] 
```

基本上，对于大型数据集中的每个条目，您必须处理条目[1](http://docs.python.org/library/functions.html#zip)列表（这是一个元组列表）。使用 zip 您可以同时“压缩”多个数据结构。

```
zip(*entry[1]) 
```

这一行基本上展开列表中的所有元组并同时循环它们。因此，在第一次迭代期间，所有元组的所有第一个元素都被选择并存储为一个元组。

使用 max 函数，您可以获得最大值并将其存储在单独的列表中（每个条目的新列表）。然后你可以对该列表进行反向排序以获得你想要的

**编辑**

刚刚注意到你需要绝对最大值。所以代码片段被修改为

```
for entry in large: 
    max_list=[]
    for z in zip(*entry[1]): 
        max_list.append(max(abs(t) for t in z))
    print "Absolute max",max_list
    max_list.sort(reverse=True)
    print "Sorted Absolute Max",max_list 
```

输入

```
large = [('5501', [(4, -5, 8), (6, -4, -6)]), ('2222', [(2, -4, 5), (1, -15, -4)])] 
```

输出

```
Absolute max [6, 5, 8]
Sorted Absolute Max [8, 6, 5]
Absolute max [2, 15, 5]
Sorted Absolute Max [15, 5, 2] 
```

**编辑2**

既然您询问了 zip 和编辑后的代码，我将尝试解释这一点。

[zip()](http://docs.python.org/library/functions.html#zip)是一个内置的 python 函数，它可以帮助您并行地迭代多个可迭代对象（列表、元组和任何其他可以迭代的东西）。

```
>>> a=[1,2,3,]
>>> b=[4,5,6,]
>>> zip(a,b)
[(1, 4), (2, 5), (3, 6)] 
```

结果的第 i 个元组是输入列表的第 i 个元素的集合

在您的情况下`entry[1]`，是您想要“压缩”的元组列表，但只有当我们给它多个列表而不是单个列表列表时，zip 才有效！

这就是[* 运算符](https://stackoverflow.com/questions/5239856/foggy-on-asterisk-in-python)派上用场的地方。它会将您的列表列表拆分为多个列表。

```
>>> def printme(*a): 
...     for i in a: 
...         print i
... 
>>> m=[(1,2,),(3,4,),(5,6,),]
>>> printme(m)
[(1, 2), (3, 4), (5, 6)]
>>> printme(*m)
(1, 2)
(3, 4)
(5, 6) 
```

如果你想在一个列表中找到最大值，你可以使用内置的[max()](http://docs.python.org/library/functions.html#max)函数。

现在我们拥有解决您的问题所需的所有理论要素。让我们说

```
>>> entry=('5501', [(4, -5, 8), (6, -4, -6)])
>>> entry[1]
[(4, -5, 8), (6, -4, -6)] 
```

您要做的是压缩这些元组，以便所有第一个元素形成一个单独的元组，所有第二个元素形成一个单独的元组，依此类推。

```
>>> zip(entry[1])
[((4, -5, 8),), ((6, -4, -6),)] 
```

不好！！！让我们使用`*`

```
>>> zip(*entry[1])
[(4, 6), (-5, -4), (8, -6)] 
```

完美的！现在对于列表中的每个元组，我们需要做的就是执行 max() 来找出最大值并将其存储在某个地方。

```
>>> for z in zip(*entry[1]): 
...     print "I have",z
...     print "max is",max(z)
... 
I have (4, 6)
max is 6
I have (-5, -4)
max is -4
I have (8, -6)
max is 8 
```

因此，如果我们初始化一个空列表并将最大值附加到它，我们将得到最大值列表！因此，我写的第一个代码

```
max_list=[]
for z in zip(*entry[1]): 
    max_list.append(max(z))
print max_list 
```

给我们

```
[6, -4, 8] 
```

为了对 max_list 本身进行排序，我们使用列表的 sort 方法

```
max_list.sort(reverse=True)
print max_list 
```

给我们

```
[8, 6, -4] 
```

但是我们需要值的绝对最大值。

在上面的代码片段中，`z`, 保存值。所以我们需要一种将这些值转换为绝对值的方法。内置[abs()](http://docs.python.org/library/functions.html#abs)仅适用于数字，因此我们需要将其应用于 z 的每个元素

```
>>> for z in zip(*entry[1]): 
...     print z
...     new_z = []
...     for i in z: 
...         new_z.append(abs(i))
...     print new_z
... 
(4, 6)
[4, 6]
(-5, -4)
[5, 4]
(8, -6)
[8, 6] 
```

或者我们可以是 pythonic 并将其缩短为

```
>>> for z in zip(*entry[1]): 
...     print z
...     new_z=[abs(i) for i in z]
...     print new_z
... 
(4, 6)
[4, 6]
(-5, -4)
[5, 4]
(8, -6)
[8, 6] 
```

但我们还需要 的最大值`new_z`。这很容易`max(new_z)`。我们现在的代码是

```
max_list=[]
for z in zip(*entry[1]): 
    new_z=[abs(i) for i in z]
    max_list.append(max(new_z))       
print max_list 
```

这给了我们

```
[6, 5, 8] 
```

这就是我们想要的。但是等等，我们仍然可以缩短代码

```
new_z=[abs(i) for i in z]
max_list.append(max(new_z)) 
```

可以转换为单行

```
max_list.append(max( abs(t) for t in z )) 
```

这将我们带到了最终代码

```
for entry in large: 
    max_list=[]
    for z in zip(*entry[1]): 
        max_list.append(max(abs(t) for t in z))
    print "Absolute max",max_list
    max_list.sort(reverse=True)
    print "Sorted Absolute Max",max_list 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T16:32:09.703

不确定这是python还是excel问题，但在excel中：“一步内一个范围内绝对值的最大值”的函数是：

```
=MAX(INDEX(ABS(F17:F22),0,1)) 
```

我不熟悉python，但我确信有一种方法可以将公式插入到单元格中——所以我将把它留给你或其他人来回答。祝你好运。

来源： [http ://www.mrexcel.com/forum/showthread.php?47999-Maximum-of-absolute-values-within-a-range-in-one-step](http://www.mrexcel.com/forum/showthread.php?47999-Maximum-of-absolute-values-within-a-range-in-one-step)

[https://groups.google.com/forum/?fromgroups#!topic/python-excel/bRDXSVWstxo%5B1-25%5D](https://groups.google.com/forum/?fromgroups#!topic/python-excel/bRDXSVWstxo%5B1-25%5D)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T08:21:31.900

使用[xlwt](http://www.python-excel.org/)模块，您可以直接导出为二进制 Excel 文件格式而不是 CSV，以便使用动态 Excel 公式。

这适用于 65k 行以下的电子表格（xlwt 使用的古代 Excel 格式的限制）。

[更新]

我不确定我明白你想要什么。如果你想计算最大值，就这样做。

```
import csv
with open("out1.csv", "wb") as fp: 
    writer = csv.writer(fp, delimiter=",")
    for entry, data in large:
        values = []
        writer.writerow([entry])
        for line in data:             
            writer.writerow(line)
            values.extend(line)
        writer.writerow([])
        writer.writerow(['Sorted Max'])
        writer.writerow(sorted(values, reverse=True)[:3])
        writer.writerow([]) 
```

[更新]

这里不欢迎长串评论，所以我要求将其移至聊天室。请注意，我有自己的工作要做，可能需要几分钟才能回答。记住，我是自愿帮助你的……如果你值得我的帮助，我值得你的耐心。

通过“abs max”，您的意思是前 3 个整数与它们在数据集中出现的顺序相同吗？

```
top3 = sorted(values, reverse=True)[:3]
absmax = filter(lambda x: x in top3, values) 
```

“最后”是指右边的几列？使用 xlwt 模块，您可以精确控制行/列 - 但使用 csv 模块，您必须自己填充列。请根据您的用例调整以下示例：

```
c = 1
for a in range(10):
    writer.writerow([a, ' ', ' ', c])
    c += 1
    writer.writerow([a+1, a+2, a+3, c])
    c += 1
    writer.writerow([' ', ' ', ' ', c])
    c += 1 
```

结果：

```
0, , ,1
1,2,3,2
 , , ,3
1, , ,4
2,3,4,5
 , , ,6
2, , ,7
3,4,5,8
 , , ,9
... 
```

# wpf - WPF 工具箱为空

> ID：11904833
> 
> 赞同：2
> 
> 时间：2012-08-10T15:30:10.580
> 
> 标签：wpf, visual-studio-2008, toolbox

我正在添加到现有的 WPF 项目中，并且遇到了一个奇怪的错误。我的工具箱是空的。

我正在使用以管理员身份运行的 Visual Studios 2008 在 Windows 7 环境中进行开发。我从头开始创建了一个项目，工具就在那里。但是，当我加载现有项目时，工具箱中没有工具。我确实在 UI 中选择了一个元素。

我通过进入工具 -> 选择工具箱项... -> WPF 组件修复了这个问题。然后我添加了我需要的工具。在那之后，他们停留了一段时间。但是，今天早上我去添加一个标签，工具箱是空的。我回到选择工具箱项目，所有选择都被清除了。我尝试再次选择我需要的工具，但工具箱仍然是空的。当我回到选择工具箱项目时，我刚刚选择的项目已被取消选择。

我试过关闭和打开xaml窗口，选择工具后重新启动VS，重置工具箱，这次这些都没有奏效。我知道它们在那里并且可以工作，因为我以前在这个应用程序中使用过它们。有谁知道如何解决这个问题？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-03-11T19:58:05.290

工具 -> 选项 -> XAML 设计器。选中“启用 XAML 设计器”。重启VS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:46:42.967

尝试重置设置。在 Visual Studio 2010 中，方法是工具->设置->重置。2008年一定是这样的。

# logging - 如何为 statsd 日志文件配置设置本地路径

> ID：11904837
> 
> 赞同：2
> 
> 时间：2012-08-10T15:30:18.193
> 
> 标签：logging, statsd

例如，如何在配置文件中设置日志文件路径，以便将所有传入消息转储到文件 statsd.log 中。

我到目前为止是这样的，但它似乎不起作用：

```
{
   graphitePort: 2003,
   graphiteHost: "omitted.for.post.com",
   port: 8125,
   flushInterval: 10000,
   debug: false,
   dumpMessages: true,
   log: "some/file/path/statsd.log"
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T02:06:47.177

您可以将 statsd 的输出重定向到您想要的任何位置

```
node /usr/share/statsd/stats.js /etc/statsd/rdioConfig.js 2>&1 >> /tmp/statsd.log 
```

或者您可以将日志记录设置为转到 syslog。[https://github.com/etsy/statsd/blob/master/exampleConfig.js#L42](https://github.com/etsy/statsd/blob/master/exampleConfig.js#L42)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T13:29:50.460

或者，您可以在 log4js 库的帮助下初始化您自己的记录器。

```
var log4js = require(log4js);
log4js.loadAppender('file');
log4js.addAppender(log4js.appenders.file(config.log), 'bekcilog');
var loggerjs = log4js.getLogger('bekcilog')
log4js.replaceConsole(loggerjs); 
```

调用`replaceConsole`方法至关重要，这样所有控制台日志都可以被捕获并转储到您指定的日志文件中。因为默认情况下，statsd 登录控制台；你会用这种方式抓住所有这些。

# multithreading - 分离线程和守护线程有什么区别？

> ID：11904848
> 
> 赞同：7
> 
> 时间：2012-08-10T15:30:51.833
> 
> 标签：multithreading, pthreads, daemon, detach

我知道所有守护线程都是分离线程，但为什么所有分离线程都不是守护线程？

假设线程“main”创建线程“A”（非分离），线程“A”创建线程“B”（分离）。当“B”继续运行时，线程“A”可以退出吗？

PS：我问的是pthreads，但无论如何请回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T16:05:49.443

也许你应该先阅读[fork 和 thread 有什么区别？](https://stackoverflow.com/questions/2483041/what-is-the-difference-between-fork-and-thread)

详细说明

**守护线程**

通常在 C/C++（Linux 环境）中，人们会使用**fork()**创建一个守护进程。**fork()**通过复制调用进程来创建一个新进程。在这里，父进程将退出，而将子进程留在后面。该子进程与控制终端分离，重新打开所有 {stdin, stdout, stderr} 到 /dev/null，并将工作目录更改为根目录。（当然，基于标志）。在 Linux 下，fork() 是使用写时复制页实现的，因此它所招致的唯一损失是复制父页表所需的时间和内存，并为子页创建独特的任务结构。

**分离线程**

而Pthread的分离行为则不同（1）被分离的线程一旦分离就不能再join回来（2）分离属性仅仅决定了线程终止时系统的行为；如果进程使用 exit 终止（或者等效地，如果主线程返回），它不会阻止线程终止。**pthread_detach()**函数将线程标识的线程标记为已分离。当一个分离的线程终止时，它的资源会自动释放回系统，而不需要另一个线程加入到终止的线程中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:43:04.883

我认为就内存模型而言，线程 A 可以退出而线程 B 可以继续运行。此外，如果没有用户线程正在执行，程序将退出......或者您可以认为只保留守护线程，因此应用程序将以不同的方式结束

# ruby-on-rails - Rails sunspot：关联模型的重新索引不会作为延迟作业运行

> ID：11904852
> 
> 赞同：0
> 
> 时间：2012-08-10T15:31:12.067
> 
> 标签：ruby-on-rails, delayed-job, sunspot-rails

我将 sunspot 与延迟作业结合使用，以将我的模型重新索引为异步后台进程。对于模型更新，这可以正常工作，因为：`handle_asynchronously :solr_index, :queue => 'solr_index'`.

但是，模型中的可搜索块（我们称其为模型 A）还引用关联模型 (B) 的属性，其中 B 有许多 As。当关联模型被用户更新时，我会在 B 中的 after_save 回调中触发重新索引，如下所示`Sunspot.index(self.my_many_As)`：虽然重新索引成功，但它不会作为延迟作业运行。我怎样才能做到这一点？

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:22:53.877

您如何安排一个调用更新文档索引的作业？您可以记录特定模型的上次更新索引，并调用 Sunspot.index(ModelB.updated_after(last_update_time))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T16:29:35.467

我没有调用，而是`Sunspot.index(self.my_many_As)`直接在 B 的 after_save 回调中为每个 A 调用 solr_index `self.my_many_As.each(&:solr_index)`。为我工作。

# ios - 在 iOS/iPad 开发中写入 SQLite

> ID：11904854
> 
> 赞同：1
> 
> 时间：2012-08-10T15:31:13.067
> 
> 标签：ios, ipad, sqlite

我在 iPad 开发项目中写入 SQLite 数据库时遇到问题。这是我使用插入语句写入数据库的代码。当我执行语句时，Sqlite 没有发回错误，但数据仍然没有保存在数据库中。

我的插入语句的简化版本：

```
//Insert Into POHeader(CustID, CatalogName) Values('0', 'webdemo')

@try {
        NSFileManager *fileMgr = [NSFileManager defaultManager];
        NSString *dbPath = [[[NSBundle mainBundle] resourcePath]stringByAppendingPathComponent:@"Orders.db"];
        BOOL success = [fileMgr fileExistsAtPath:dbPath];
        if(!success)
        {
            NSLog(@"Cannot locate database file '%@'.", dbPath);
        }
        if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
        {
            NSLog(@"An error has occured: %@", sqlite3_errmsg(db));
        }

    sql = [self prepareSqlForPOHeader];
    sqlite3_stmt *sqlStatement;

    int sqlResult = (sqlite3_prepare_v2(db, sql, -1, &sqlStatement, NULL));

    if (sqlResult != SQLITE_OK)// (sqlite3_prepare_v2(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK)
    {
        NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db));
    }else{
        //success
    }

    sqlite3_finalize(sqlStatement);

}
@catch (NSException *exception) {
    NSLog(@"Problem with prepare statement: %@", sqlite3_errmsg(db));
}
@finally {
    sqlite3_close(db);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:43:29.503

执行语句，这将起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:45:19.210

你忘了添加这一行：`sqlite3_step(sqlStatement);`。

将代码更改为：

```
if ((sqlite3_prepare_v2(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK)
{
    NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db));
}
else
{
    sqlite3_step(sqlStatement);
    sqlite3_finalize(sqlStatement);
} 
```

# php - 从 php 执行 bash 脚本无法在 Windows 上运行

> ID：11904855
> 
> 赞同：0
> 
> 时间：2012-08-10T15:31:13.693
> 
> 标签：php, windows, bash, xampp, wampserver

我已经在 xampp ( ubuntu ) 下执行了这个脚本，它工作正常。但是当我尝试在 Windows 下执行它时，它没有给我任何错误，但也没有输出。

`<? $command='ls -l'; $output = shell_exec($command); echo $output; ?>`

PHP 不在保存模式下运行。问题是什么 ？它取决于操作系统吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T16:01:27.697

这是因为*ls*是基于 unix 的命令，在 Windows 上不可用

不显示错误是因为 shell_exec 只输出 STDOUT 而不是 STDERR，如果您希望能够查看错误，可以像这样运行命令：

```
$output = shell_exec("{$command} 2>&1"); 
```

这将显示一个错误，指出找不到 ls 或类似的东西

在 windows 而不是*ls*你可以运行*dir*

这可能会有所帮助：

```
<?
    $command=substr(PHP_OS, 0, 3)=='WIN'?'dir':'ls -l';
    $output = shell_exec("{$command} 2>&1");
    echo $output;
?> 
```

# java - 该类型的方法 If(boolean) 未定义

> ID：11904856
> 
> 赞同：-1
> 
> 时间：2012-08-10T15:31:14.857
> 
> 标签：java, if-statement, syntax-error

Eclipse 不断给我以下错误：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problems: 
input cannot be resolved
The method If(boolean) is undefined for the type bai1DinhLuatCuLong
Syntax error, insert ";" to complete Statement
F cannot be resolved to a variable 
```

我不明白。我需要解决什么问题？为什么我不能使用该`If()`功能？

我试过浏览 Google 和 Bing，并且仔细检查了我的 Java 示例书，但我无法解决这个问题。

```
import java.util.Scanner;

public class bai1DinhLuatCuLong
{
    public static void main(String[] args)
    { 
    System.out.print("Giá trì cần tìm (F // q // r) : ");   
    char cantim = input.nextChar();

            // HERE THIS IS WHERE I PUT THE IF STATEMENT !!!
    If (cantim == 'F') {

        Scanner input = new Scanner(System.in); 
        System.out.print("Độ lớn của điện tích thứ nhất : ");
        double q1 = input.nextDouble();
        System.out.print("Độ lớn của điện tích thứ hai : ");
        double q2 = input.nextDouble();
        System.out.print("Khoảng cách giữa 2 điện tích : ");
        double r = input.nextDouble();
        System.out.print("Hệ số k sẽ tự động được đặt là 9*10^9 như trong hệ SI");
        double F = 9 * Math.pow(10,9) * Math.abs(q1) * Math.abs(q2) / Math.pow(r,2);
    }

    System.out.print("Độ lớn lực tương tác giữa 2 điện tích điểm : " + "\n Lưu ý E là *10");

    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-10T15:32:06.930

`If`在 java中没有大写`I`：应该是`if`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-10T15:31:51.317

`if (cantim == 'F')`它应该很小**`i`**

或者

你需要写一个方法

```
public boolean If(boolean test)
{
//Your logic.
} 
```

但是，根据您的代码，您似乎正在寻找`"if"`声明而不是拥有新方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T15:44:33.433

也许你想做这样的事情：

```
Scanner input = new Scanner(System.in);
String cantim = input.next();

if (cantim.equals("F")) {
    System.out.println("If F");
} else {
    System.out.println("Out of F");
} 
```

# asp.net - asp表单中的DateTimeControl空白

> ID：11904858
> 
> 赞同：1
> 
> 时间：2012-08-10T15:31:19.713
> 
> 标签：asp.net, sharepoint-2010

我有一个 asp 形式的共享点 DateTimeControl，但是下拉框不显示任何值。

```
 <td class="ms-formbody">
    <SharePoint:DateTimeControl ID="dateTimeCurfewIn" runat="server" TimeOnly="true" HoursMode24="true"/>
 </td> 
```

我需要添加一些特别的东西来获得在下拉框中显示的时间吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T19:25:39.037

你的例子有效。也许尝试添加

```
<%@ Register TagPrefix="SharePoint" Namespace="Microsoft.SharePoint.WebControls" Assembly="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %> 
```

如果你以前没有。这里[DateTimeControl 控件](http://karinebosch.wordpress.com/sharepoint-controls/datetimecontrol-control/)是完整的控件属性描述。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-14T13:41:56.460

这是一个常见的方法，希望它可以帮助有同样问题的人。

```
/// <summary>
/// Get common SP DateTimeControl with current DateOnly settings and MethodToProcessDateChanged
/// </summary>
public static DateTimeControl Cd(this bool DateOnly, bool AutoPostBack = false,
DateTime? SelectedDate = null, Func<bool> MethodToProcessDateChanged = null)
{
     var d = new DateTimeControl();
     d.DateOnly = DateOnly;
     d.AutoPostBack = AutoPostBack;
     if (SelectedDate != null)
     d.SelectedDate = SelectedDate.Value;
     if (MethodToProcessDateChanged != null)
          d.DateChanged += (o, e) => { MethodToProcessDateChanged();};
     return d;
} 
```

[在此处](https://pizza-soft.ru/2018/11/18/spdatetimecontrol/)查看更多详细信息

# google-analytics - Google Analytics 标记来自管理网站的转化

> ID：11904859
> 
> 赞同：0
> 
> 时间：2012-08-10T15:31:24.397
> 
> 标签：google-analytics

我想知道是否有一种方法可以跟踪我网站上的转化。我让客户在我们的网站 (www) 上填写了一份表格，我现在正在跟踪一个事件。我们的代理从我们的管理站点 (admin) 处理这些请求，如果成功，他们会将其标记为已售出。转换是指请求被标记为已售出，但这与将请求标记为已售出的分析用户（我们的代理）不同。

跟踪事件不如实际转化精确。有没有办法跟踪这种交易？

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:15:22.603

从我收集的信息来看，如果销售人员成功，您想为转化分配一个美元价值。从技术角度来看，您不能让 GA 自动执行此操作。您可以通过计算每个成功潜在客户的平均利润乘以您的 CRM 的转化率来准确估算转化价值。历史数据将非常有帮助。

例如，如果您为每个成功的潜在客户赚取 10 美元，那么您成功转换了 %50 的潜在客户，那么您可以轻松地为转换赋予 5 美元的价值。（即：10 * .5 = 5）

GA 并不是真正意义上的 CRM（客户关系经理），虽然它擅长跟踪电子商务交易，但它并不意味着存储详细的客户数据。做我上面提到的事情会给你一个很好的转化价值指标。您还可以随着业务的变化随时更改此值。

添加评论后编辑：

...已删除...

三重编辑：以可以直接识别用户的方式使用 GA 违反了他们的 TOS。我写了怎么做，然后查看了 TOS。这不仅是不好的做法，而且会让你被踢出 GA。

# php - 使用 \n 通过换行分解 textarea 内容，但未创建数组

> ID：11904862
> 
> 赞同：0
> 
> 时间：2012-08-10T15:31:31.507
> 
> 标签：php, arrays, codeigniter

我正在`\n`尝试通过换行来分解文本区域的内容。但是，数组并没有被创建，它只是将它们集中在一起。我试过用逗号分隔它们，它工作正常，`\n`不是我想要使用的吗？

textarea 包含以下内容：

```
QWERTY
ASDFGH
ZXCVBN 
```

我需要每一行在数据库中成为它自己的行。我正在使用以下代码创建数组并插入数据库：

```
public function update_giveaway($item_id) {

    // create array from comma separated string
    $post_keys = explode('\n', $this->input->post('giveaway_keys'));

    $db_keys = $this->get_giveaway_keys($item_id);

    // add tags to database that are in new array, but not in old array
    // returns array
    $add_keys = array_diff($post_keys, $db_keys);

    foreach($add_keys as $key) {

        // add to giveaway table
        $data = array(
          'giveaway_id' => $item_id,
          'key' => $key,
        );

    $this->db->set('date_created', 'NOW()', FALSE);
    $this->db->insert('atk_giveaways', $data);

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T15:33:09.677

您需要使用双引号将换行符定义为字符：

```
"\n" 
```

单引号表示字符串，双引号表示字符

```
$post_keys = explode("\n", $this->input->post('giveaway_keys')); 
```

# php - 如何使用 PHP 在 Mysql 数据库中插入长文本（“文本”数据类型）

> ID：11904866
> 
> 赞同：0
> 
> 时间：2012-08-10T15:31:33.817
> 
> 标签：php, mysql, longtext

我正在尝试使用 PHP 将长文本插入到 mysql 数据库中。我使用数据类型“Text”来存储长文本，但问题是“Text”数据类型不存储值，但如果我使用“Blob”而不是“Text”，它就可以工作。

我想补充一件事：如果我直接在 phpmyadmin 中运行查询，它就可以工作。所以似乎php无法将“文本”数据类型的数据插入数据库。我用谷歌搜索了这个问题，但没有找到解决方案。有人可以指导我如何解决吗？提前致谢。

表类型：`MyISAM`

```
UPDATE `xx_tablename` SET `catid`='1',`dmname`='bash Quick Reference 2006',`dmfilename`='bash Quick Reference 2006.pdf',`dmdescription`='',`dmdate_published`='2012-08-10 14:48:14',`dmowner`='0',`published`='0',`dmurl`='',`dmcounter`='0',`checked_out`='54',`checked_out_time`='2012-08-10 15:54:05',`approved`='0',`dmthumbnail`='',`dmlastupdateon`='2012-08-10 15:59:51',`dmlastupdateby`='54',`dmsubmitedby`='54',`dmmantainedby`='54',`dmlicense_id`='0',`dmlicense_display`='0',`access`='1',`attribs`='crc_checksum=\nmd5_checksum=',`dmcontent`='€Internationalization facilities\n€Anarithmetic\nInvoking the Shell\nThe command interpreter for the Bash shell (\n)can be invoked as follows:\noptions][arguments]Bash can execute commands from a terminal, from a “le (when the “rst\nor from standardinput (if no arguments remain or if\nprints prompts if standardinput is a terminal, or if\nis given on the command line.\nOn many systems,\nis a link to Bash. When invoked as\n,Bash acts morelike the\ntraditional Bourne shell: login shells read\n,and regular\nshells read $ENV,ifitsset. Full details areavailable in the\nRead commands from string\n--dump-strings\nPrint all\nstrings in the program.\nCreate an interactiveshell (prompt for input).\nEnable\nStar tup as a privileged user.Dont read $ENV or $BASH_ENV,dont impor tfunctions\nfrom the environment, and ignorethe value of $SHELLOPTS. Thenormal “xed-\nname startup “les (such as\n)are read.\n--restricted\nCreate a restricted shell.\nRead commands ffunctions\nUnset variables\nUntil\ncommand. See the Examples under\nID]Pause in execution until all background jobs complete (exit status 0 is\nreturned), or pause until the speci“ed background process\nis returned). Note that the shell variable\nthe process ID of the most recent background process.\nExample\nWait for most recent background process to finish\nBuilt-in Commands63\n' WHERE `id`='21' 
```

# excel - 如何让Excel在绘图之前对值进行分组？

> ID：11904872
> 
> 赞同：2
> 
> 时间：2012-08-10T15:31:53.783
> 
> 标签：excel, excel-2007

考虑以下 Excel 工作表：

```
 | A       B     C
 --+--------------------
 1 | company day  return
 --+--------------------
 2 | 1       1    2
 3 | 1       2    1
 4 | 1       3    1
 5 | 2       1    3
 6 | 2       2    2
 7 | 2       3    0
 8 | 3       1    1
 9 | 3       2    5
10 | 3       3    1 
```

工作表基本上是面板时间序列。在示例中，它列出了 3 家公司连续 3 天的股票收益。我现在想绘制每天的总回报（即：所有公司的累计回报），如下所示：

```
 return 8 |        * (C3+C6+C9=1+2+5=8)
        7 |
        6 |  * (C2+C5+C8=2+3+1=6)
        5 |
        4 |
        3 |
        2 |              * (C4+C7+C10=1+0+1=2)
        1 |
        0 +----------------------
             1     2     3    day 
```

这可以在 Excel 中完成吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:43:20.847

在另一张纸上设置一个新的图表图形，以将您的第一个较大图表中的数据分组为以下格式：

```
 --+--------------------
A1 | company1 company2 Company3
 --+--------------------
 1 | B2       C2    D2
 2 | B3       C3    D3
 3 | B4       C4    C4 
```

然后，将单元格 B2 中的公式设置为 = SUMIFS(C:C,A:A,A1,B:B,A2) Where `C:C`，`B:B`并`A:A`引用原始图中的列`A1`和`A2`引用分组图表。

请注意，该`SUMIFS`公式适用于 Excel 2007 / 2010。我已包含此方法的示例工作表，并在旧版本的 excel 中使用与数组公式相同的方法。

这是 Excel 版本 2007 / 2010 的示例文件： [https ://dl.dropbox.com/u/19599049/GroupData_NewExcel.xlsx](https://dl.dropbox.com/u/19599049/GroupData_NewExcel.xlsx)

这是旧版本 excel 的示例：
[https ://dl.dropbox.com/u/19599049/GroupData_OldExcel.xls](https://dl.dropbox.com/u/19599049/GroupData_OldExcel.xls)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T16:06:39.277

正如@Gimp 建议的那样，如何在引用原始范围（在本例中）的新工作表上设置一个新表`OriginalSheet`，并让它看起来像：

```
 |   A      B       C
--+---------------------
1 | day   return
--+---------------------
2 | 1     6
3 | 2     8
4 | 3     2 
```

其中`return`in`B2`将计算为

```
=SUMIFS(OriginalSheet!C:C,OriginalSheet!B:B,"=" & A2) 
```

并一直复制下来。要进行设置，您只需列出 A 列中的日期，然后添加公式。从那里，您可以通过选择整个新范围来设置散点图（在我们的示例中，`A1:B4`. 生成的图表将看起来像您提供的那样。此外，这将使列数保持在低水平，因此添加新公司不会扩大范围。

让我知道这是否没有意义，因为我没有清晰沟通的天赋:)

# google-maps - 在谷歌地图上设置适当的缩放级别

> ID：11904873
> 
> 赞同：0
> 
> 时间：2012-08-10T15:31:54.893
> 
> 标签：google-maps, zooming, google-maps-markers

在我的网络应用程序中，我有一个谷歌地图，用于在其上显示一些位置。这些位置中的每一个都存储在数据库中并显示在地图上。我需要设置地图缩放级别，以便所有标记都包含在地图显示的区域中。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T22:25:51.130

您需要创建[LatLngBounds](https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds)类的实例，然后在将每个位置/标记添加到地图时，使用该`extend(point:LatLng)`方法通过标记 LatLng 坐标扩展边界。完成添加标记并扩展 LatLngBounds 后，您可以使用[Map 类](https://developers.google.com/maps/documentation/javascript/reference#Map)方法`fitBounds(bounds:LatLngBounds)`或`panToBounds(latLngBounds:LatLngBounds)`缩放和移动视口以适应边界。

[Daniel Vassallo 在https://stackoverflow.com/a/3521067/881551](https://stackoverflow.com/a/3521067/881551)提供了一个很好的代码示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T22:29:49.427

缩放级别范围从 0 到 21 对于您的情况，您可能希望将该值设置为尽可能低，大约为 8 或 9。您可能会在此处看到以下示例：它将 10 个位置一起显示到一张谷歌地图中。

[http://www.webkeet.com/webtutorials/tabid/78/id/53/using-reverse-geocoding-latitude-and-longitude-and-address-geocoding-to-display-google-map.aspx](http://www.webkeet.com/webtutorials/tabid/78/id/53/using-reverse-geocoding-latitude-and-longitude-and-address-geocoding-to-display-google-map.aspx)

# interface-builder - 我的 XCode 4.2 应用程序出现旋转

> ID：11904875
> 
> 赞同：1
> 
> 时间：2012-08-10T15:32:02.943
> 
> 标签：interface-builder, xcode4.2

我在这里做错了什么？

当我在 IOS 模拟器中运行我的应用程序时，它看起来就像一个纵向应用程序被横向查看，我必须将模拟 iPad 的 IO 旋转到纵向才能以正确的方式查看我的应用程序。

我将界面构建器屏幕设置为横向并想要构建横向视图，但看起来我实际上正在构建纵向视图，尽管它是在横向界面构建器中。

如何更改正在构建的内容，以便构建与 iOs 模拟器中的横向 iPad 屏幕对齐的横向视图？

我很欣赏这里的语言令人困惑。

# jquery - jquery切换子菜单，但如果子菜单页面处于活动状态，则保持子菜单打开

> ID：11904879
> 
> 赞同：3
> 
> 时间：2012-08-10T15:32:16.037
> 
> 标签：jquery, html, submenu

只是想深入了解 jquery，如果这已经得到解答，请原谅我。搜索但找不到与我正在尝试做的事情相关的示例。

我有一个带有一些子菜单的垂直菜单。当点击顶层菜单时，子菜单打开是有效的。问题是我希望在单击子菜单项之一时子菜单保持打开状态。就像现在一样，当单击子菜单项时，菜单会折叠。

这是我的代码：

```
// Add class of drop if item has sub-menu
$('ul.sub-menu').closest('li').addClass('drop');

// Left Sidebar Main Navigation
var menu_ul = $('.menu > li.drop > ul'),
    menu_a  = $('.menu > li.drop > a');

menu_ul.hide();

menu_a.click(function(e) {
    e.preventDefault();
    if(!$(this).hasClass('active')) {
        menu_a.removeClass('active');
        menu_ul.filter(':visible').slideUp('normal');
        $(this).addClass('active').next().stop(true,true).slideDown('normal');
    } else {
        $(this).removeClass('active');
        $(this).next().stop(true,true).slideUp('normal');
    }
}); 
```

我想如果我尝试将我想要的内容翻译成一个清晰的编码类型句子，它会这样读。基本上我需要在 DOM 中查询任何具有子菜单的活动菜单，如果页面显示其中一个子菜单项，则显示子菜单下拉菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:12:59.937

我认为你有两个选择。

1.  考虑使用 Ajax 加载页面
2.  模拟每个页面的点击事件。

例如：

对于“投资组合”项目添加此

```
<script type="text/javascript">
  $(document).ready(function(){
      jQuery('#menu-item-38>a').trigger('click');
  });
</script> 
```

对于“关于我们”：

```
<script type="text/javascript">
  $(document).ready(function(){
      jQuery('#menu-item-180>a').trigger('click');
  });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:19:48.257

去掉这条线怎么样

```
menu_ul.filter(':visible').slideUp('normal'); 
```

它会阻止隐藏非活动菜单。

试一试，让我们知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-26T15:18:33.573

在样式表中创建一个额外的类

```
.menu ul.keepthisopen {display:block !important;} 
```

将类添加到要保持打开的子菜单中的 ul 中。

（示例）在“关于”页面上，进入代码，找到菜单，找到“关于”链接，这是一个

*   项目，其下方是该项目的子菜单。将其更改为

    ```
    <ul class="keepthisopen"> 
    ```

    在这里工作正常，使用与您使用的相同的代码/脚本。如果您单击另一个菜单项，子菜单也会再次向上滑动。

    我正在使用纯代码（小型站点），所以我很容易为每个页面手动更改它。

# silverlight - 无法在 Silverlight StoryBoard ColorAnimation 中设置边框背景

> ID：11904882
> 
> 赞同：1
> 
> 时间：2012-08-10T15:32:27.267
> 
> 标签：silverlight, background, storyboard, border, coloranimation

尝试设置 a 的背景时，`Border`出现以下异常：

```
Cannot resolve TargetProperty (Border.Background).(SolidColorBrush.Color) on specified object. 
```

您可以使用以下 Xaml 轻松重现这一点：

```
<UserControl x:Class="SilverlightApplication2.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">
    <UserControl.Resources>
        <Style x:Key="LinkStyle" TargetType="HyperlinkButton">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="HyperlinkButton">
                        <Grid x:Name="ButtonGrid" Cursor="{TemplateBinding Cursor}" Background="Transparent">
                            <Border x:Name="ButtonBorder" CornerRadius="10 10 0 0">
                                <ContentControl x:Name="LinkContent" Content="{TemplateBinding Content}"/>
                            </Border>
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="LinkStates">
                                    <VisualState x:Name="ActiveLink">
                                        <Storyboard>
                                            <ColorAnimation Storyboard.TargetName="ButtonBorder" Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)" To="#6F666ECC"  Duration="0:0:0" />
                                            <ColorAnimation Storyboard.TargetName="LinkContent" Storyboard.TargetProperty="(ContentControl.Foreground).(SolidColorBrush.Color)" To="#FFFFFFFF"  Duration="0:0:0" />
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Grid x:Name="LayoutRoot" Background="White">
        <HyperlinkButton x:Name="TheLink" Content="Click" Style="{StaticResource LinkStyle}" />
    </Grid>
</UserControl> 
```

将其放入构造函数中进行测试：

```
TheLink.Click += (s, e) => VisualStateManager.GoToState((HyperlinkButton)s, "ActiveLink", true); 
```

知道我做错了什么吗？当我将 ButtonBorder 的 ColorAnimation 行放在注释中时，它将起作用。所以它很难找到/设置 的`Background`属性`Border`，但`Border`确实有一个`Background`属性，不是吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T16:45:58.137

问题是该`Background`属性未设置为`SolidColorBrush`.

将以下内容添加到`Border`应该可以解决问题：

```
<Border.Background>
    <SolidColorBrush />
</Border.Background> 
```

# javascript - 使用带有“split”的jQuery警告输入“文件”文件名

> ID：11904886
> 
> 赞同：1
> 
> 时间：2012-08-10T15:32:39.073
> 
> 标签：javascript, jquery

我正在尝试从上传输入中提醒文件名。

这是我的[小提琴](http://jsfiddle.net/xwdct/)

它有效，但是有“C：Fakepath ...”之类的东西。我只想要文件名，没有假路径。我尝试使用该`split`功能，但我不确定为什么它不起作用。

示例 html：

```
<html>
    <head>
        <title>Test Page</title>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>
    <body>
        <input type="file" id="tester" />
    </body>
</html> 
```

示例脚本：

```
$(function() {
    var bogus;
    var triple;
    $('#tester').change(function() {

        triple = $('#tester').val();
        bogus = triple.split(/[\s/]+/);

        alert(bogus[bogus.length - 1]);
    });
}); 
```

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T15:35:31.703

你可以逃避斜线：

```
 bogus = triple.split("\\"); 
```

更新小提琴：http: [//jsfiddle.net/johnkoer/xwdct/3/](http://jsfiddle.net/johnkoer/xwdct/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:40:29.707

如果您的 Web 浏览器支持[File API](http://caniuse.com/#search=File%20API)（目前，这是任何非 IE 的 Web 浏览器），您可以从输入的 FileList 对象中获取文件名。

```
$(function() {
    $('#tester').change(function() {
        var files = this.files;
        if (files && files.length) {
            alert(files[0].name); //use the file api
        }
        else {
            alert($(this).val().replace("C:\\fakepath\\", ""));  //this is for IE
        }
    });
});​ 
```

示例：http: [//jsfiddle.net/NTICompass/xwdct/6/](http://jsfiddle.net/NTICompass/xwdct/6/)

文档：[https ://developer.mozilla.org/en-US/docs/Using_files_from_web_applications](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)

# c++ - C/C++ - 指针传递给 DLL 中的函数

> ID：11904888
> 
> 赞同：3
> 
> 时间：2012-08-10T15:32:42.367
> 
> 标签：c++, pointers, structure

假设我的 DLL 中有以下函数：

```
void TestFunction(int type, void* data) 
```

现在从加载该 DLL 的应用程序调用该函数。应用程序初始化一个结构并将指向该结构的指针发送到该函数：

```
SampleStruct strc;
TestFunction(DT_SS, &ss); 
```

到现在为止还挺好。现在困扰我的是如何用另一个结构替换内存中的strcc变量。如果我在我的 dll 中执行以下操作：

```
SampleStruct dllstrcc;
data = &dllstrcc; 
```

***data***现在将指向新的**dllstrcc**结构，但是当它存在函数并且控件返回到应用程序时， **strc**仍将指向第一个结构。如何在不分配每个字段的情况下用我的 dll 结构替换应用程序的结构：

```
data.vara = dllstrcc.vara;
data.varb = dllstrcc.varb;
data.varc = dllstrcc.varc; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:57:26.813

1.最简单的选择是复制整个结构：

```
void TestFunction(int type, void* data) {
    SampleStruct dllstrcc;
    // fill dllstrcc here...
    SampleStruct *p_ret = data;
    *p_ret = dllstrcc;
} 
```

并通过调用它

```
SampleStruct strcc;
TestFunction(type, &strcc); 
```

好处是您不必担心释放内存等。

2、如果真的要替换调用者的结构（要有新的结构），可以在DLL中分配一个新的结构。

```
void* TestFunction(int type) {
    SampleStruct* pdllstrcc = new SampleStruct();
    return pdllstrcc;
} 
```

（我将`return`使用新结构，因为它更容易，但如果需要，可以使用 . 参数将其传递出去`void** data`。）

您可以像这样调用函数：

```
SampleStruct *strcc = TestFunction(type);
// do something with the struct
delete strcc; 
```

不要忘记删除指针，否则会泄漏内存。您应该明确决定释放内存、调用者或 DLL 的责任。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:41:23.340

您可以将功能更改为

```
void *func(int,void *) 
```

并返回新结构 - 但请注意，它必须使用 new 或 malloc 在堆上分配，然后由调用者使用 free 或 delete 释放

顺便说一句，默认赋值运算符不做你需要的吗？

```
sampleStruct newStruct;
sampleStruct *tmp=(sampleStruct *)data;
*tmp=newStruct; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-10T16:43:03.377

你是用c还是c++编码？

第一：如果你想这样调用函数：

```
SampleStruct strc;
TestFunction(DT_SS, &strc); 
```

你不能。替换是什么意思`&strc`？您正在尝试替换结构的地址？那没有任何意义。同样在你不使用的c++中`void *`，你使用`SampleStruct *`

如果你想替换一些东西，你必须这样称呼它：

```
SampleStruct strc;
SampleStruct * pstrc = & strc;
TestFunction(DT_SS, pstrc); 
```

现在你可以用你的结果替换 pstrc，如果你像这样编写你的函数：

```
void TestFunction(int type, SampleStruct * & data) 
```

注意`&`，这意味着您将指针数据作为参考传递。现在你可以写`data = & dllstrcc;`了，它会修改`pstrc`，因为`data`不是变量，而是对 的引用`pstrc`。但是您可能想在尝试之前了解内存处理和内存泄漏。

# jmeter - 使用 JMeter 检查重定向到网站移动版本是否有效

> ID：11904890
> 
> 赞同：0
> 
> 时间：2012-08-10T15:32:45.020
> 
> 标签：jmeter

如果用户通过主网站访问该网站，他们应该会自动重定向到移动版本。如果所有移动用户都被重定向，有没有办法在 Jmeter 中进行测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:35:09.817

您可以使用以下方法构建测试：

*   一个 csv 配置元素，将包含用户代理 iphone、三星 Galaxy s3 的列表...
*   每个移动版网站一个 http 采样器，因为您有 5 个移动网站
*   作为此请求的子项，将用户代理设置为 csv 中定义的变量的 headermanager

并将迭代次数设置为csv中的行数。

问候

菲利普·M。

[http://www.ubik-ingenierie.com](http://www.ubik-ingenierie.com)

# sql - MS Access Query 在经典 ASP 中不起作用

> ID：11904893
> 
> 赞同：2
> 
> 时间：2012-08-10T15:32:56.197
> 
> 标签：sql, ms-access, asp-classic

以下作品在 Access 中；

```
SELECT Transactions.Date, Transactions.Time, Transactions.Direction,
           Transactions.TransactionNumber, Transactions.TransactionType,
           Transactions.Exception, Exceptions.ExceptionType
FROM Transactions LEFT JOIN Exceptions 
         ON  (Transactions.TransactionNumber = Exceptions.TransactionNumber)
         AND (Transactions.Date = Exceptions.Date) 
         AND (Transactions.TokenNumber = Exceptions.TokenNumber)
WHERE (((Transactions.Date)>=20120803) 
         AND ((Transactions.Direction)=-1) 
         AND ((Exceptions.ExceptionType) Not In (43,44,45,46) 
             OR (Exceptions.ExceptionType) Is Null) 
         AND ((Transactions.TokenNumber)=6605253))
ORDER BY Transactions.Date, Transactions.TransactionNumber; 
```

但是当在 ASP 中完成如下操作时，我得到错误 '80004005'

```
SELECT Transactions.Date, Transactions.Time, Transactions.Direction,
           Transactions.TransactionNumber, Transactions.TransactionType,
           Transactions.Exception, Exceptions.ExceptionType 
FROM Transactions LEFT JOIN Exceptions 
        ON Transactions.TransactionNumber = Exceptions.TransactionNumber 
    AND Transactions.Date = Exceptions.Date 
        AND Transactions.TokenNumber = Exceptions.TokenNumber 
WHERE Transactions.Direction = -1 
        AND (Exceptions.ExceptionType Not In (43,44,45,46) 
            OR Exceptions.ExceptionType Is Null)
        AND Transactions.TokenNumber= 6605253
        AND Transactions.Date >= 20120803 
ORDER BY Transactions.Date, Transactions.TransactionNumber 
```

我顺便删除了一些括号，认为它会有所帮助，但它没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:25:39.187

这是通过将 Exception 这个词放在方括号中来解决的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T15:57:44.887

I agree with Remou's comment. 80004005 doesn't point at a bad query, I think it points at a data source name being wrong or a corrupt Access file.

I would check your connection string and verify that you can run a simple query before chasing this query.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T16:22:01.763

迈克是对的。确保所有 IIS 进程都对包含数据库的文件夹具有读/写 (NTFS) 权限。通常，这将是 IUSR_[machinename] 帐户。根据您使用的 IIS 版本，它会有所不同。在 IIS 中，查看“匿名”用户映射到哪个帐户。

为了快速检查，只需将文件夹设置为“所有人”的读/写。它必须在文件夹级别，而不仅仅是文件，因为 MSAccess 需要创建/销毁 .LDB 文件以维护锁等。

# ios - iOS 上的 AES/CFB8 密码

> ID：11904898
> 
> 赞同：1
> 
> 时间：2012-08-10T15:33:09.620
> 
> 标签：ios, encryption, aes, commoncrypto

我正在尝试在 iOS 上实现 AES/CFB8 流密码。我相信实现这一点的方法是使用 Apple 提供的 CommonCrypto 库。

我发现的所有小文档都只显示了分组密码，那么如何使用该库来完成 AES/CFB8 流密码呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:49:25.437

首先，您可以在这里查看加密/解密的代码： [http ://robnapier.net/blog/aes-commoncrypto-564](http://robnapier.net/blog/aes-commoncrypto-564)

其次，我相信 iOS CommonCrypto 默认使用 CBC，唯一的其他选择是使用[`kCCOptionECBMode`flag](http://www.opensource.apple.com/source/CommonCrypto/CommonCrypto-36064/CommonCrypto/CommonCryptor.h)来获取 ECB。

如果你对 CBC 没问题，你可以使用 CommonCrypto。如果您需要专门的 CFB，则可能需要集成一些第 3 方加密库。

# zend-framework - ZF 文件元素未打印任何错误消息

> ID：11904901
> 
> 赞同：0
> 
> 时间：2012-08-10T15:33:29.040
> 
> 标签：zend-framework, zend-form, zend-form-element

我创建了一个用于上传文件的独立 zend 表单，并将文件元素设置为必填字段。但是文件元素没有打印出任何错误消息。

我为文件元素设置装饰器，如下所示：

```
// The file element requires the File decorator instead of the 
// ViewHelper decorator
$file->setDecorators(array(
    'File',
    'Errors',
)); 
```

我在这里粘贴了代码：http: [//pastebin.com/0D59pxiR](http://pastebin.com/0D59pxiR)

我在这里粘贴了模板：http: [//pastebin.com/SRYh71JN](http://pastebin.com/SRYh71JN)

我究竟做错了什么？我预先感谢您的协助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T13:00:00.890

您可能需要拆分 ispost 和 isvalid：

```
if( isset( $_POST['submit'] )) {
    if ($form->isValid( $_POST )){
    echo 'Thank you';
    }
    //if is post but not valid reload page and render the errors
    echo $form->render( $view );//render form with errors
    echo $form->getMessages($view);//or just render the messages back to the view
} else {
    echo $form->render( $view );//if not post render form
} 
```

这是我最好的猜测。

**[编辑]**

你有没有尝试过

```
$file->addDecorator('File'); 
```

代替

```
$file->setDecorators(array(
    'File',
    'Errors',
)); 
```

表单级别的 setElementDecorators 可能会以某种方式干扰设置文件元素装饰器。addDecorator() 或 addDecorator() 应该防止这种情况。

我还建议您尝试使用默认装饰器进行测试以排除任何其他潜在问题。

我没有看到任何明显的东西。唯一真正不同的是 File 元素代理 isValid() 到 Zend_File_Transfer。我想那里可能有问题，但如果有的话，我会期待一个重要的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:18:08.833

需要打印出 enctype="element->getEnctype();?> 并且一切正常。

# calendar - 如何设置richfaces日历的宽度？

> ID：11904904
> 
> 赞同：3
> 
> 时间：2012-08-10T15:33:33.987
> 
> 标签：calendar, richfaces

我正在尝试使用 设置*richfaces*日历的宽度`style="width:60px"`，但它不起作用。

```
<rich:calendar  id="givenDate" name="givenDate" 
    enableManualInput="true" style="width:60px" 
    datePattern="MM/dd/yyyy"  value="#{shotController.adminDate}" 
    immediate = "true"  required="true" 
    requiredMessage="#{msg.requiredmsg}" popup="true" /> 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T16:17:08.753

`<rich:calendar>`标签组件是许多组件的组合，您可以设置每个组件的样式。对于输入，您应该使用`inputStyle`属性，或者`inputClass`对于 CSS 定义的类：

```
<rich:calendar id="givenDate" name="givenDate"
    enableManualInput="true"
    <!-- this will be the style for the input textbox -->
    inputStyle="width:60px"
    datePattern="MM/dd/yyyy" value="#{shotController.adminDate}"
    immediate = "true" required="true"
    requiredMessage="#{msg.requiredmsg}" popup="true" /> 
```

另一种解决方案可能是重写特定日历组件的 CSS 样式。完整列表可在[RichFaces 组件附录 A：样式类](http://docs.jboss.org/richfaces/latest_4_2_X/Developer_Guide/en-US/html/appe-Developer_Guide-Style_classes_and_skin_parameters.html#sect-Developer_Guide-Style_classes_and_skin_parameters-richcalendar)中找到。

更多信息：

*   [RichFaces 日历组件](http://docs.jboss.org/richfaces/latest_4_2_X/Component_Reference/en-US/html/chap-Component_Reference-Rich_inputs.html#sect-Component_Reference-Rich_inputs-richcalendar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T08:53:53.523

如果有人仍在寻找答案：要设置输入文本框的大小，可以使用“inputSize”属性。例如

```
 inputSize="10" 
```

这会将文本框的大小设置为 10 个字符的长度。

参考：[https ://community.jboss.org/thread/8802](https://community.jboss.org/thread/8802)

# bash - 将 stdout 和 stderr 重定向到 Function

> ID：11904907
> 
> 赞同：23
> 
> 时间：2012-08-10T15:33:39.710
> 
> 标签：bash

我需要帮助将系统命令的输出（stdin 和 stdout）发送到 bash 函数，同时仍接受来自参数的输入。类似于下面的示例。有人可以指出我正确的道路吗？

```
LogMsg()
{
  DateTime=`date "+%Y/%m/%d %H:%M:%S"`
  echo '*****'$DateTime' ('$QMAKESPEC'): '$1 >> "$LogFile"
  echo $DateTime' ('$QMAKESPEC'): '$1
}

# Already works
LogMsg "This statement is sent directly"

# Wish I could do this:
# Capture both stdout & stderr of a system function to the logfile
# I do not presume that any of the syntax that follows is good
make 2>&1 >(LogMsg) 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-10T16:30:10.977

为此，您可以使用[`read`](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_08_02.html)bash 内置：

```
LogMsg()
{
  read IN # This reads a string from stdin and stores it in a variable called IN
  DateTime=`date "+%Y/%m/%d %H:%M:%S"`
  echo '*****'$DateTime' ('$QMAKESPEC'): '$IN >> "$LogFile"
  echo $DateTime' ('$QMAKESPEC'): '$IN
} 
```

然后使用管道：

```
make 2>&1 | LogMsg 
```

**更新：**

为了能够使用标准输入或参数作为输入（根据 chepner 的评论），您可以这样做：

```
LogMsg()
{
  if [ -n "$1" ]
  then
      IN="$1"
  else
      read IN # This reads a string from stdin and stores it in a variable called IN
  fi

  DateTime=`date "+%Y/%m/%d %H:%M:%S"`
  echo '*****'$DateTime' ('$QMAKESPEC'): '$IN >> "$LogFile"
  echo $DateTime' ('$QMAKESPEC'): '$IN
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-07-27T00:49:03.570

这是一个旧线程..但我用它来帮助我编写一个日志函数，该函数还将输出多行命令输出：

```
# Defines function to grab a time stamp #
get_Time () { Time=$(date +%Y-%m-%d\ %H:%M:%S) ; }

write_Log()
{
get_Time
if [ -n "${1}" ]; then         # If it's from a "<message>" then set it
    IN="${1}"
    echo "${Time} ${IN}" | tee -a ${log_File}
else
    while read IN               # If it is output from command then loop it
    do
        echo "${Time} ${IN}" | tee -a ${log_File}
    done
fi
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-27T01:11:06.343

根据前面的答案，我整理了一些可以使用或不使用日志文件的通用函数，如本文末尾所列。这些对于更复杂的脚本很方便。我通常打印终端窗口消息，`stderr`以免干扰可能需要重定向的合法程序输出。函数可以如下调用：

```
scriptFolder=$(cd $(dirname "$0") && pwd)
scriptName=$(basename $scriptFolder)
# Start a log file that will be used by the logging functions
logFileStart ${scriptName} "${scriptFolder)/${scriptName}.log"

# The following logs the message string passed to the function.
# - use a space for empty lines because otherwise the logging function
#   will hang waiting for input
logInfo " "
logInfo "Starting to do some work."

# The following will log each 'stdout` and `stderr` line piped to the function.
someOtherProgram 2>&1 | logInfo 
```

职能...

```
# Echo to stderr
echoStderr() {
  # - if necessary, quote the string to be printed
  # - redirect stdout from echo to stderr
  echo "$@" 1>&2
  # Or, use an alternate echo such one that colors textT
  # ${echo2} "$@" 1>&2
}

# Print a DEBUG message
# - prints to stderr and optionally appends to log file if ${logFile} is defined globally
#   - see logFileStart() to start a log file
# - call with parameters or pipe stdout and stderr to this function: 2>&1 | logDebug
# - print empty lines with a space " " to avoid hanging the program waiting on stdin input
logDebug() {
  if [ -n "${1}" ]; then
    if [ -n "${logFile}" ]; then
      # Are using a log file
      echoStderr "[DEBUG] $@" 2>&1 | tee --append $logFile
    else
      # Are NOT using a log file
      echoStderr "[DEBUG] $@"
    fi
  else
    while read inputLine; do
      if [ -n "${logFile}" ]; then
        # Are using a log file
        echoStderr "[DEBUG] ${inputLine}" 2>&1 | tee --append $logFile
      else
        # Are NOT using a log file
        echoStderr "[DEBUG] ${inputLine}"
      fi
    done
  fi
}

# Print an ERROR message
# - prints to stderr and optionally appends to log file if ${logFile} is defined globally
#   - see logFileStart() to start a log file
# - call with parameters or pipe stdout and stderr to this function: 2>&1 | logError
# - print empty lines with a space " " to avoid hanging the program waiting on stdin input
logError() {
  if [ -n "${1}" ]; then
    if [ -n "${logFile}" ]; then
      # Are using a log file
      echoStderr "[ERROR] $@" 2>&1 | tee --append $logFile
    else
      # Are NOT using a log file
      echoStderr "[ERROR] $@"
    fi
  else
    while read inputLine; do
      if [ -n "${logFile}" ]; then
        # Are using a log file
        echoStderr "[ERROR] ${inputLine}" 2>&1 | tee --append $logFile
      else
        # Are NOT using a log file
        echoStderr "[ERROR] ${inputLine}"
      fi
    done
  fi
}

# Start a new logfile
# - name of program that is being run is the first argument
# - path to the logfile is the second argument
# - echo a line to the log file to (re)start
# - subsequent writes to the file using log*() functions will append
# - the global variable ${logFile} will be set for use by log*() functions
logFileStart() {
  local newLogFile now programBeingLogged
  programBeingLogged=$1
  # Set the global logfile, in case it was not saved
  if [ -n "${2}" ]; then
    logFile=${2}
  else
    # Set the logFile to stderr if not specified, so it is handled somehow
    logFile=/dev/stderr
  fi
  now=$(date '+%Y-%m-%d %H:%M:%S')
  # Can't use logInfo because it only appends and want to restart the file
  echo "Log file for ${programBeingLogged} started at ${now}" > ${logFile}
}

# Print an INFO message
# - prints to stderr and optionally appends to log file if ${logFile} is defined globally
#   - see logFileStart() to start a log file
# - call with parameters or pipe stdout and stderr to this function: 2>&1 | logInfo
# - print empty lines with a space " " to avoid hanging the program waiting on stdin input
logInfo() {
  if [ -n "${1}" ]; then
    if [ -n "${logFile}" ]; then
      # Are using a log file
      echoStderr "[INFO] $@" 2>&1 | tee --append $logFile
    else
      # Are NOT using a log file
      echoStderr "[INFO] $@"
    fi
  else
    while read inputLine; do
      if [ -n "${logFile}" ]; then
        # Are using a log file
        echoStderr "[INFO] ${inputLine}" 2>&1 | tee --append $logFile
      else
        # Are NOT using a log file
        echoStderr "[INFO] ${inputLine}"
      fi
    done
  fi
}

# Print an WARNING message
# - prints to stderr and optionally appends to log file if ${logFile} is defined globally
#   - see logFileStart() to start a log file
# - call with parameters or pipe stdout and stderr to this function: 2>&1 | logWarning
# - print empty lines with a space " " to avoid hanging the program waiting on stdin input
logWarning() {
  if [ -n "${1}" ]; then
    if [ -n "${logFile}" ]; then
      # Are using a log file
      echoStderr "[WARNING] $@" 2>&1 | tee --append $logFile
    else
      # Are NOT using a log file
      echoStderr "[WARNING] $@"
    fi
  else
    while read inputLine; do
      if [ -n "${logFile}" ]; then
        # Are using a log file
        echoStderr "[WARNING] ${inputLine}" 2>&1 | tee --append $logFile
      else
        # Are NOT using a log file
        echoStderr "[WARNING] ${inputLine}"
      fi
    done
  fi
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-15T01:40:17.970

感谢发布回复的人。我想出了我的版本，它将为每条消息添加一次时间戳。

```
#!/bin/bash
CURRENT_PID=$$
PROCESS_NAME=$(basename $0)

LOGFILE=/var/log/backup-monitor.log
function log_message {
  if [ -n "$1" ]; then
      MESSAGE="$1"
      echo -e "$(date -Iseconds)\t$PROCESS_NAME\t$CURRENT_PID\t$MESSAGE" | tee -a $LOGFILE
  else
      MESSAGE=$(tee)
      echo -e "$(date -Iseconds)\t$PROCESS_NAME\t$CURRENT_PID\t$MESSAGE" | tee -a $LOGFILE
  fi
}

log_message "Direct arguments are working!!"

echo "stdin also working" | log_message 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-01-01T16:16:02.207

在我看来，读取命令中的 100 毫秒（-t 0.1）超时将允许 LogMsg 处理输入管道和参数，而无需在没有输入的情况下永远等待。

```
function log(){ read -t 0.1 IN1
  echo $(date "+%Y/%m/%d %H:%M:%S")' ('$QMAKESPEC'): '$IN1 $* |tee -a $LogFile ;}
#test without, with pipe , with pipe and parameters , with parameters only
log ; echo foo | log ; echo foo | log bar ; log bar
2015/01/01 16:52:17 ():
2015/01/01 16:52:17 (): foo
2015/01/01 16:52:17 (): foo bar
2015/01/01 16:52:17 (): bar 
```

tee -a 复制到标准输出并附加到 $LogFile

玩得开心

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-10T16:21:06.960

有两种方法，首先，我认为更好的是，创建一个 bash 文件并将结果传递给它，如下所示：

```
make 2>&1 > ./LogMsg 
```

第二种方法是将结果作为参数传递给函数：

```
LogMsg $(make 2>&1) 
```

# sql - SQL组合查询信息模式以帮助构建大型存储过程

> ID：11904909
> 
> 赞同：1
> 
> 时间：2012-08-10T15:33:41.863
> 
> 标签：sql, database, tsql, sql-server-2008-r2

我想使用`INFORMATION_SCHEMA.COLUMNS`来帮助我更快地为具有许多列的表构建存储过程。

例如，对于有 100 列的表的 MERGE 语句中的更新子句，我必须执行`COLUMN_1 = SOURCE.COLUMN1, COLUMN2...`100 次，这并不令人愉快。

我知道我可以从对象浏览器编写 update/create/etc 语句，但我想多控制一些格式。所以：

此查询输出上面提到的每一列的更新格式：

```
select column_name + ' = SOURCE.' + column_name + ', ' 
from INFORMATION_SCHEMA.COLUMNS
where TABLE_NAME = 'TableName' 
```

*不幸的是，它会产生多个结果：*

```
COLUMN_1 = SOURCE.COLUMN_1,
COLUMN_2 = SOURCE.COLUMN_2,
etc. 
```

* * *

**问题：**

有人可以告诉我如何修改上面的查询以**连接所有结果**，使输出看起来更像：

```
COLUMN_1 = SOURCE.COLUMN_1, COLUMN_2 = SOURCE.COLUMN_2, etc. 
```

**PS：**我知道如何使用游标循环并实现此结果。如果可能的话，我想找到一种方法在带有枢轴或某些 T-SQL 函数的查询中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:51:24.240

正如 EricZ 所说，你需要在最后添加 FOR XML PATH('')

如果您希望输出是 varchar 而不是 xml，请使用强制转换

```
select cast((select column_name + ' = SOURCE.' + column_name + ', ' 
             from INFORMATION_SCHEMA.COLUMNS
             where TABLE_NAME = 'TableName'
             FOR XML PATH(''))  
       as varchar) 
```

你也可以使用变量

```
declare @str varchar(8000) = ''  

select @str += column_name + ' = SOURCE.' + column_name + ', ' 
from INFORMATION_SCHEMA.COLUMNS
where TABLE_NAME = 'TableName'

set @str = left(@str,len(@str)) 
```

# css - 为什么 Twitter Bootstrap “固定”布局不固定？

> ID：11904911
> 
> 赞同：2
> 
> 时间：2012-08-10T15:33:45.677
> 
> 标签：css, ruby-on-rails, ruby, twitter-bootstrap, twitter-bootstrap-rails

Twitter Bootstrap 网站内容如下：

> 默认且简单的 940 像素宽、居中布局，适用于单个`<div class="container">`.

引用自[http://twitter.github.com/bootstrap/scaffolding.html#layouts](http://twitter.github.com/bootstrap/scaffolding.html#layouts)

这正是我在我的 HTML 中所拥有的，但是当我检查元素时，我看到这个 CSS 适用于它：

```
.container, .navbar-fixed-top .container, .navbar-fixed-bottom .container {
    width: 1170px;
} 
```

顺便说一句，如果我通过添加来覆盖该 CSS 规则......

```
div.container{
  width:940px;
} 
```

然后 div.container 里面的元素比 div.container 本身宽，看起来格格不入。

那么，为什么 Twitter Bootstrap 的“固定”布局没有固定呢？我怎样才能修复它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T15:52:52.153

### 更新

在较新版本的引导程序中，从 2.1.0（我认为）开始，您可以[在 github 上的源代码](https://github.com/twitter/bootstrap/blob/v2.1.0/less/variables.less#L255)`variables.less`中修改响应式网格大小

因此，如果您从 Less 编译 CSS，您可以修改这些变量。否则，下面的解决方案仍然有效。

* * *

这是因为您包含了响应式布局。检查[文档](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

如果您查看此文件[github responsive-1200px-min.less (2.0.4)](https://github.com/twitter/bootstrap/blob/v2.0.4/less/responsive-1200px-min.less#L7)或[github responsive-1200px-min.less (2.1.0)](https://github.com/twitter/bootstrap/blob/v2.0.4/less/responsive-1200px-min.less#L7)

你可以看到

```
@gridColumnWidth: 70px; // First parameter
@gridGutterWidth: 30px; // Second parameter 
```

这给出了`70*12 + 30*(12-1) = 1170px`（12 是`@gridColumns`）。

因此，如果您想要静态、无响应、940 像素宽的网格，则必须`bootstrap-reponsive.css`从包含中删除该文件。

至于 RoR 等价物，任何输入都会受到赞赏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T15:41:23.203

你确定你有最新版本的 Twitter Bootstrap 吗？我的 bootstrap.css 说（第 197 行）：

```
.container,
.navbar-fixed-top .container,
.navbar-fixed-bottom .container {
    width: 940px;
} 
```

正如您提到的，您正在使用 twitter-bootstrap-rails`vendor/toolkit/twitter/bootstrap/variables.less`状态：

```
// Default 940px grid
// -------------------------
@gridColumns:             12;
@gridColumnWidth:         60px;
@gridGutterWidth:         20px;
@gridRowWidth:            (@gridColumns * @gridColumnWidth) + (@gridGutterWidth * (@gridColumns - 1)); 
```

[这就是来自https://github.com/seyhunak/twitter-bootstrap-rails](https://github.com/seyhunak/twitter-bootstrap-rails)的标准文件

您可能正在使用它的其他版本？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T15:51:48.970

我认为您错过了为引导程序固定的术语。当`Bootstrap`提及固定时，它们意味着它不会根据浏览器的大小重新调整内容的宽度，但 Fluid 会。

所以如果你改变了容器，你也应该改变`row`类的默认宽度。IE：`.row { width: 940px; }`

您可能也必须对其他课程这样做。[Bootstrap在这里](http://twitter.github.com/bootstrap/download.html#variables)也提供了自定义页面

希望有帮助，

# php - 从codeigniter中的视图提交一个大数组

> ID：11904917
> 
> 赞同：0
> 
> 时间：2012-08-10T15:34:05.813
> 
> 标签：php, model-view-controller, codeigniter

我有一个问题，我将数据发送给需要在将数据提交给模型之前检查数据是否正确的用户。通常我会从控制器发送数据，但我不知道在这种情况下该怎么做..

这就是我所拥有的

控制器

```
 $questions = $this->assessment_model->get_list_questions($data['list']);
 $this->load->view('quiz', $questions); 
```

我的观点是向用户输出 $questions。（问题是一个大数组）

看法

```
foreach ($questions['data'] as $q) {
    echo $q;
};
echo "<a href'WHAT_GOES_HERE'>Save Question list</a>" 
```

一旦用户点击了链接，我需要将 $questions 中的数据提交给另一个控制器......有没有一种直截了当的方式来做到这一点？

干杯

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:44:02.220

您的控制器需要更正：

```
$this->load->library('session');
$list['questions'] = $this->assessment_model->get_list_questions($data['list']);
$this->load->view('quiz', $list); 
```

在视图中：

```
<?php
    $this->session->set_flashdata('Questions', $questions);
    $this->load->helper('url');
    anchor('controller2', 'Click here');
?> 
```

在第二个控制器上：

```
$this->load->library('session');
$questions = $this->session->flashdata('Questions'); 
```

寻求帮助：[http ://codeigniter.com/user_guide/libraries/sessions.html](http://codeigniter.com/user_guide/libraries/sessions.html)

# events - 浏览器关闭事件确认。单击确定运行一些代码，自定义代码

> ID：11904929
> 
> 赞同：2
> 
> 时间：2012-08-10T15:34:42.983
> 
> 标签：events, browser

当用户关闭浏览器时，我想确认“您要注销吗？”。如果是，我想运行一些注销代码并显示消息“您已注销”。如果没有，就什么也不做。

下面是我正在使用的代码：

```
window.onbeforeunload = closeit; 

function closeit(e) {
    var closeEvent = false;
    if (event.clientY < 0)
        closeEvent = true;

    if ((closeEvent)) {

      var response = confirm("Are you sure you want to log-off?");

        if(response == true){
            var swf = "SWFAPP";
            var container;
            if (navigator.appName.indexOf("Microsoft") >= 0)
            {
                container = document;
            }
            else
            {
                container = window;
            }
            container[swf].logOutUser();
            alert("Logged off");
        }
        else{

        }

     }
 } 
```

上面的代码不起作用，无论我单击“确定”还是“取消”，它都会关闭浏览器。如果单击“确定”，则它不会抛出警报消息“已注销”。

如果我删除确认行并说响应始终为真，它将运行注销代码并显示消息“已注销”。Container.logOutUser 更新数据库中的用户状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:17:25.660

事件`onbeforeunload`没有`clientY`属性，所以`closeEvent`永远都是`false`.

`returnValue`必须设置事件的属性以防止页面卸载，但浏览器通过提示用户来保留最终决定。另请参阅：[https ://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)

```
window.onbeforeunload = closeit; 

function closeit(e) {
    if (confirm("Are you sure you want to log-off?")) {
        var container;
        if (navigator.appName.indexOf("Microsoft") >= 0)
        {
            container = document;
        }
        else
        {
            container = window;
        }
        container[swf].logOutUser();
        alert("Logged off");
    }
    else{
        e.returnValue='Log-off cancelled.';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:47:02.627

```
window.onbeforeunload = function (evt) { 
 evt = window.event;
alert(evt.clientY); 
```

# php - 在模块控制器中使用 append_metadata() 方法

> ID：11904931
> 
> 赞同：0
> 
> 时间：2012-08-10T15:35:01.007
> 
> 标签：php, codeigniter, hmvc

我使用 Phil Sturgeon 的模块化扩展 HMVC 和模板库。如何在模块的控制器中使用 $this->template。我想使用 append_metadata() 方法在 html 布局的头部加载一些模块的 javascript 文件。

执行顺序示例：

controllers/home/home.php - 主控制器

```
class Home extends MX_Controller {
    function index()
    {
    $this->template->build('login');
    }
} 
```

views\layouts\default.php- 默认布局

```
 <html>
  <head>
    <?php include "\..\partials\head.php"; ?>
  </head>
  <body>
       //calling topbar module
    <?php echo Modules::run('navigation_panels/TopBar/render'); ?>
    <?php echo $template['body']; ?>
  </body>
   </html> 
```

modules\navigation_panels\controllers\TopBar.php- 顶栏模块的控制器

```
class TopBar extends MX_Controller {

public function __construct()
{
    parent::__construct();
//want to manipulate the head but template property is not visible 
      $this->template
 ->prepend_metadata(generateJavaScriptIncludeTag('TOPBAR_JAVASCRIPT_LOCATION' .        'change_language.js'));
}

public function render()
{
    $data['languages'] = $this->language->getOtherLanguageArray();
    $this->load->view('TopBar_view', $data);
}
} 
```

这似乎是输出缓冲问题，因为方法 prepend_metadata() 存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:39:47.803

如果我没记错的话，append_metadata 方法在 PyroCMS 中也使用的最后一个版本的库中已被 appens_js 取代。

要使用它，您需要：

```
$this->template
              ->appens_js('your file_name here')
              ->build('your view here'); 
```

如果 append_js 不起作用，只需将其替换为`append_metadata`

# testing - 在 wxPython 应用程序的自动化测试中处理模式对话框

> ID：11904932
> 
> 赞同：1
> 
> 时间：2012-08-10T15:35:03.530
> 
> 标签：testing, wxpython

如何处理在测试 wxPython 应用程序时打开的对话框？

因为有人已经有[类似的问题](http://wiki.wxpython.org/Unit%20Testing%20with%20wxPython)：

> 问题是，一旦应用程序启动模态对话框，控制不会返回，直到模态对话框退出，此时测试脚本将数据输入其中为时已晚

一般来说，我想为以下工作流程编写一个测试用例：

1.  用户按下按钮“SomeProcessing”
2.  在打开的对话框中，用户选择“Selection 1”并按 OK
3.  根据选择处理数据并与已知结果进行比较 ( `data_after_processing`)

如何执行第 2 步以使事情自动发生（下面的示例打开`Dlg_GetUserInput`并等待手动输入）？可能是我对 GUI 测试的理解存在缺陷，并且不应将第 3 部分视为 GUI 测试？在那种情况下，我可能需要重写代码......

欢迎任何建议！

```
import wx

class MyFrame(wx.Frame):
    def __init__(self, parent, title):
        wx.Frame.__init__(self, parent, title=title)
        btn = wx.Button(self, label="SomeProcessing")
        self.Bind(wx.EVT_BUTTON, self.SomeProcessing, btn)

    def SomeProcessing(self,event):
        self.dlg = Dlg_GetUserInput(self)
        if self.dlg.ShowModal() == wx.ID_OK:
            if self.dlg.sel1.GetValue():
                print 'sel1 processing'
                self.data_after_processing = 'boo'
            if self.dlg.sel2.GetValue():
                print 'sel2 processing'
                self.data_after_processing = 'foo'

class Dlg_GetUserInput(wx.Dialog):
    def __init__(self, parent):
        wx.Dialog.__init__(self, parent)
        self.sel1 = wx.CheckBox(self, label='Selection 1')
        self.sel2 = wx.CheckBox(self, label='Selection 2')
        self.OK = wx.Button(self, wx.ID_OK)
        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(self.sel1)
        sizer.Add(self.sel2)
        sizer.Add(self.OK)
        self.SetSizer(sizer)

def test():
    app = wx.PySimpleApp()
    mf = MyFrame(None, 'testgui')

    for item in mf.GetChildren():
        if item.GetLabel() == 'SomeProcessing':
            btn = item
            break

    event = wx.CommandEvent(wx.wxEVT_COMMAND_BUTTON_CLICKED, btn.GetId())   
    mf.GetEventHandler().ProcessEvent(event)

    """
    PROBLEM: here I'd like to simulate user input 
    sel1 in Dlg_GetUserInput 
    (i.e. mf.dlg.sel1.SetValue())
    and check that 
    data_after_processing == 'boo'
    """

    mf.Destroy()

test() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T17:30:38.783

您可能想要查看这些应用程序之一进行 GUI 测试：

*   [http://uiautomationverify.codeplex.com/](http://uiautomationverify.codeplex.com/)
*   [https://github.com/ldtp/cobra](https://github.com/ldtp/cobra)
*   [http://sikuli.org/](http://sikuli.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:19:43.957

发布解决方案以防万一有人遇到同样的问题。

```
def test():
    app = wx.PySimpleApp()
    mf = MyFrame(None, 'testgui')
    for item in mf.GetChildren():
        if item.GetLabel() == 'SomeProcessing':
            btn = item
            break

    def clickOK():
        dlg = wx.GetActiveWindow()
        dlg.sel1.SetValue(True)
        clickEvent = wx.CommandEvent(wx.wxEVT_COMMAND_BUTTON_CLICKED, wx.ID_OK)
        dlg.ProcessEvent(clickEvent)

    event = wx.CommandEvent(wx.wxEVT_COMMAND_BUTTON_CLICKED, btn.GetId())   
    wx.CallAfter(clickOK)
    mf.GetEventHandler().ProcessEvent(event)

    print 'data_after_processing:', mf.data_after_processing
    mf.Destroy() 
```

# iphone - 如何将图像目录更改为我的资源文件

> ID：11904934
> 
> 赞同：0
> 
> 时间：2012-08-10T15:35:16.340
> 
> 标签：iphone, objective-c, xcode4, cocos2d-iphone

我是 cocos2d 的新手，我正在尝试学习如何将我的图像目录更改为项目中的资源文件，而不是我的桌面。仅当图像在桌面上而不是在我的游戏项目的资源文件中时才会显示图像。任何帮助将不胜感激。错误类似于 012-08-10 15:30:55.884 again[9753:1be03] cocos2d: Couldn't add image:soundoff.png in CCTextureCache

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:55:29.817

当您将文件添加到项目时，请务必在添加文件对话框中选中“如有必要，将文件复制到目标组文件夹”选项。对于您添加到项目中的大多数内容，您不会想要使用项目引用选项。

# c# - C# Windows 服务的安全性

> ID：11904941
> 
> 赞同：2
> 
> 时间：2012-08-10T15:35:40.907
> 
> 标签：c#, security, windows-services, clr

我知道在 Java 中运行的 Windows 服务在安全级别上存在缺陷，因为这意味着 JVM 正在服务线程中运行，因此潜在威胁的数量增加了。

C# 呢？C# 在 CLR（[公共语言运行时](http://en.wikipedia.org/wiki/Common_Language_Runtime)）上运行，所以当我说它也可能导致一些严重的安全漏洞时我错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T15:45:43.790

好吧，CLR 实施了几种安全措施，以实际提供额外的安全层并避免 JVM 的一些陷阱。

首先，您的代码是您的，它将按原样执行，它不会像 Java 那样在虚拟机上进行解释和运行。当您在 .NET 中生成程序集或 exe 文件时，您将获得 IL 代码，即中间语言代码。

然后将该 IL 及时编译为机器代码，然后执行该机器代码。没有虚拟机可以解释它，一旦代码被编译成特定机器的汇编程序，它就会像用标准语言编写的任何其他程序一样执行。

当您执行 .NET 程序时，程序上的第一条指令实际上会加载 CLR，而 CLR 又会查找程序的主入口点并开始执行。CLR 加载程序位于 mscorlib.dll 中，而后者又位于[GAC](http://en.wikipedia.org/wiki/Global_Assembly_Cache)中。

现在，GAC 本身确实包含一些安全措施，最重要的是位于 GAC 中的程序集（当然包括来自 Microsoft 的程序集）是强命名的，换句话说，它们是经过签名的。

Microsoft 保留他的私钥并对任何版本的 .NET Framework 的每个程序集进行签名，然后在 GAC 上安装后，根据 Microsoft 公钥检查该签名以查看它们是否匹配。当您使用 Visual Studio 引用 .NET 框架版本时，该过程会自动为您完成，尽管它可以在编译期间通过命令行显式完成。

所以简而言之，不，它不会导致同样的安全漏洞。

# c# - 使用视图模型时模型项为空

> ID：11904943
> 
> 赞同：0
> 
> 时间：2012-08-10T15:35:52.733
> 
> 标签：c#, asp.net-mvc-3

我在 MVC3 中有我的用户模型：

```
public class User
{
    [Key]
    public virtual Guid UserId { get; set; }

    [Required]
    public virtual String Username { get; set; }

    [DataType(DataType.MultilineText)]
    public virtual String Comment { get; set; }

   ..loads of other properties 
```

此类包含大量我在编辑屏幕中并不真正需要的信息。假设我只想编辑`comment`. `user`我试图创建一个这样的视图模型，但不确定我是否正确

*查看模型*

```
 public class UserViewModel
  {
    public string notes;

  } 
```

现在我的控制器中有这个：

```
public ActionResult Edit(Guid id)
        {
           User user = Context.Users.Where(x => x.UserId == id).First();
          UserViewModel uvm = new UserViewModel();
          uvm.notes = user.Comment;
            return View(uvm);
        } 
```

这部分似乎工作正常，如果信息存在则传递信息。编辑视图是这样的：

```
@model core.Areas.Manage.Models.UserViewModel
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>User Edit</legend>

        @Html.TextBoxFor(model => model.notes)

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
} 
```

其中显示来自控制器的注释/评论。但是，如果我按提交，**则模型为空**- 此时`model.notes`为空：

```
 [HttpPost]
        public ActionResult Edit(Guid id, UserViewModel model)
        { 
```

我做错了什么吗？过去我只是简单地传递了整个模型，但这并不理想。我有点在黑暗中刺伤，只是想在转向 SO 之前我会尝试自己实现它！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:46:00.377

我认为这可能是因为您没有 {get;set;} 在您的视图模型中声明。看到这篇文章：[{get; 放; 在 ViewModel 中使用](https://stackoverflow.com/questions/11399375/get-set-used-in-viewmodel)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T15:52:22.497

您将 notes 声明为`field`. 模型绑定不适用于字段。您应该将其声明为**属性**

```
public class UserViewModel
{
  public string notes  {set;get;}
} 
```

> ASP.NET MVC 框架包括名为 DefaultModelBinder 的默认模型绑定器实现，旨在有效地绑定大多数模型类型。它通过对目标模型的每个**属性使用相对简单和递归的逻辑来做到这一点：**

# ios - UIImage效果图的内容模式

> ID：11904944
> 
> 赞同：3
> 
> 时间：2012-08-10T15:35:54.390
> 
> 标签：ios, contentmode

我有两张完全相同的图像，只是颜色不同。我用它们来设置 2 个 UIImageViews 图像。我正在尝试创建进度效果，我的视图层次结构看起来像这样

```
UIView >UIImageView
       > UIView > UIImageView 
```

除了设置为左模式的最低 UIImageView 之外，所有视图都设置为内容模式缩放以填充。如果我慢慢地使第二张图像（位于第一张图像的顶部）沿正 x 轴可见，这在进度错觉方面起作用。

我遇到的问题是，如果我将内容模式设置为左，则应该相同的图像与第一张图像的比例不同。如果我将第二个 imageview 的模式设置为 Scale To Fill ，则图像的比例完全相同，但是当我希望将其固定时，图像会随着 imageview 沿其 x 轴的扩展而缩放。

如何将 Scale To Fill 与 Left 内容模式结合起来，或者我该如何解决这个比例问题？

# diff - 在 gerrit 中比较图像

> ID：11904953
> 
> 赞同：5
> 
> 时间：2012-08-10T15:36:33.033
> 
> 标签：gerrit, diff, gerrit

对于二进制文件，[gerrit](/questions/tagged/gerrit "显示标记为“gerrit”的问题")仅在 diff 中显示一些非常短的元信息。在图像文件的情况下，我真的很想直观地比较新旧版本。这可能以某种方式（直接使用gerrit）吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T23:19:17.717

实际上，是的，自 2009 年以来，通过[`mimetype.*.safe`配置](https://gerrit-review.googlesource.com/Documentation/config-gerrit.html#mimetype)就可以做到这一点。该评论在 2.0.17 版本中可用，并于 2009 年 7 月 15 日[合并](https://gerrit-review.googlesource.com/10275)到代码库中。描述此问题的原始功能请求和修复是[问题 #179](http://code.google.com/p/gerrit/issues/detail?id=179)。

# python - 如何获取调用当前执行函数的模块？

> ID：11904960
> 
> 赞同：9
> 
> 时间：2012-08-10T15:37:19.627
> 
> 标签：python, introspection

到目前为止，这是我从函数中访问调用模块的问题的最佳解决方案：

```
import inspect
import sys
def calling_module(level=0):
    filename = inspect.stack()[level+2][1]
    modulename = inspect.getmodulename(filename)
    try:
        return sys.modules[modulename]
    except KeyError:
        return sys.modules['__main__'] 
```

...但是在处理中隐含的`KeyError`是（基本上没有根据的）假设，即只有`filename`在运行时才会发生`__main__`。

Python 标准库是否提供了更强大的方法来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T15:39:36.137

我发现以下方法效果很好：

```
import inspect
def printfunc()
    stk = inspect.stack()[1]
    mod = inspect.getmodule(stk[0])
    print("Currently in {}.{}".format(mod, stk[3])) 
```

我在一个叫做类似的实用函数里面有`printfunc()`

# jquery - jQuery 放大和缩小不起作用

> ID：11904962
> 
> 赞同：0
> 
> 时间：2012-08-10T15:37:25.747
> 
> 标签：jquery, zooming

我试图在按下按钮时放大和缩小照片，但是我无法让代码正常工作我相信这是我构建缩小部分的方式代码。

jQuery代码：

```
 $(".enlarge-photo").click(function(){
    //photo - zoom-in
        var $img = $(".image");
    $img.stop().animate({ 
    height: "365", 
    width: "269", 
    paddingRight: "12"},"fast");

  },function(){
        $img.stop().animate({
        height: "265",
        width: "169",
        paddingRight: "0"},"fast");
  }); 
```

这是我正在使用的 HTML：

```
<figure>
            <img class="image" src="img/basketball.jpg" width="169" height="265" border="0" alt="basketball dunk"/>
            <figcaption>Laura Skelding/AMERICAN-STATESMAN</figcaption>
        </figure>

            <ul id="photo">
                <li rel="nofollow"><a class="enlarge-photo" href="#" title="enlarge-photo">ENLARGE PHOTO</a></li>
            </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:42:51.983

基于您想要一个按钮来执行此操作的事实：

```
$("#zoom").button().click(function () {
    var options = { height: "365", width: "269", paddingRight: "12"};
    var myImage = $("#myImage");
    if (myImage.hasClass("zoomed"))
    {
        options = {height: "265", width: "169"};
    }

    myImage.stop().animate(options,"fast");
    myImage.toggleClass("zoomed");
});​ 
```

更新小提琴：http: [//jsfiddle.net/johnkoer/NhYtL/19/](http://jsfiddle.net/johnkoer/NhYtL/19/)

# java - 从 PDF 中获取图片

> ID：11904963
> 
> 赞同：-1
> 
> 时间：2012-08-10T15:37:37.877
> 
> 标签：java, pdf, extract

我有一个包含许多图片和文本的大型 PDF 文档。有没有办法以编程方式从此 PDF 文档中提取图片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T16:07:58.140

您可以使用 Apache 的[ExtractImages](http://pdfbox.apache.org/apidocs/org/apache/pdfbox/ExtractImages.html)类。

采用：

```
 java org.apache.pdfbox.ExtractImages <pdffile> <password> [imageprefix] 
```

# sql-server - 数字字段可以成为 SQL 注入攻击的目标吗？

> ID：11904964
> 
> 赞同：1
> 
> 时间：2012-08-10T15:37:50.880
> 
> 标签：sql-server, performance, parameters, sql-injection

我遇到了一个问题，通过用硬值替换参数，我的 SQL Server 查询的性能得到了显着提高。例如：

```
SELECT * FROM Table1 WHERE RowNumber >= 101 AND ID < 200 
```

明显快于以下：

```
DECLARE @Start int = 101;
DECLARE @End Start int = 200;

SELECT * FROM Table1 WHERE RowNumber >= @Start AND RowNumber < @End 
```

第一个在大约 2 秒内运行，第二个在 15 秒内运行。所以我的问题是，如果它们是数字和 pnly 参数化字符串，我可以安全地使用硬值吗？我不认为这是索引问题，因为 RowNumber 列已经被索引为非聚集索引。我并不熟悉所有的 SQL 注入技术，但多年来我一直在为所有输入值使用参数，以试图避免 SQL 注入攻击。我从来没有完全意识到使用参数可能会降低性能。

我也看到了一些关于使用参数降低性能的问题，但我还没有看到任何关于如何解决问题的明确答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:50:05.633

无论如何，我想说，鉴于“我对所有 SQL 注入技术并不熟悉”这句话，那么您应该始终保持安全并继续进行参数化查询。

我在用户组中就 SQL 注入攻击进行了一次演讲，但我并不认为我什么都知道。我以为我对攻击发生的各种方式了解很多，但我什至让一个人在谈话后找到我，告诉我在他工作的一家公司发生的一次攻击，攻击是通过一个由 OCR 机器读取的**纸质表格。**我以前从未考虑过这种形式的攻击。

攻击以各种奇怪的方式发生，即使您已经想到了所有可能的方法，其他人总是会设法想到其他方法来攻击系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T04:12:28.667

数字字段很危险，因为注释（**//**或**/**）和*空格*会导致 SQL 注入（攻击）

如果用户和密码匹配，许多站点允许用户进入保留区域。

假设一个疯狂的网站使用数字字段作为密码：

```
 .....  Where User='James' and Pass=123 
```

即使在 Javascript 中验证用户输入，也很容易更改帖子值：因此，可以“注入”下面的部分而不是 123

```
 123  or 1=1 
```

返回所有记录。许多站点检测到这种情况，但是用户字段是“用户”或“用户名”是很常见的。因此可以尝试向下结构中的“用户”和其他常见字段名称

```
 12  or 1=1  and User='James' 
```

在这种情况下，只会返回所需的记录！

数字字段的一个简单解决方案是使用单引号：

```
 Select User='James' and Pass='123' 
```

我已经验证 SQL Server、MySQL 和 SQLite 接受这种语法，可能会有轻微的多收费用。由于电子邮件、姓名等原因，避免在字符串中使用单引号更加困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T15:50:13.043

SQL Server 会提前计算一些常量表达式以提高查询性能。这称为常量折叠。

在上面的查询中，与编译查询之前一样，将评估常量，优化器不需要做任何事情。但是对于参数，优化器必须在每次运行时编译它。

# android - Android 谷歌地图灰色网格

> ID：11904965
> 
> 赞同：0
> 
> 时间：2012-08-10T15:37:51.707
> 
> 标签：android, map

我使用 Google 地图创建了一个 android 应用程序我生成了一个签名用于在市场上分发的密钥我生成了一个 MD5 来生成 Android Maps API 密钥 android：

```
apiKey = "0kHWNnZhgMPg19T3YMmSXOgUakRz-TkkiLk7gWg" 
```

然后生成apk并将其上传到市场但是当我下载应用程序并使用地图时，我得到一个灰色网格并且地图没有显示地图我可能做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T16:54:15.347

只要您使用的是 Eclipse 并且使用了 Export 命令并将其指向与您用来生成 Maps 密钥的密钥相同的密钥，它就应该可以工作。问题是您在某个地方使用了不同的签名密钥，或者没有导出并使用该密钥签署您的应用程序，或者您上传了使用调试密钥构建的 apk。这些是获得灰色背景的原因。

# box-api - API 在大量负载后响应 500 个错误

> ID：11904970
> 
> 赞同：0
> 
> 时间：2012-08-10T15:38:24.273
> 
> 标签：box-api

我在一家 cload 集成提供商工作，该提供商使用 Box 的 API 为我们的客户将数据移入和移出 Box 帐户。我们将轻松地在一天内点击数万次或数十万次 API。昨天晚上，我注意到我们的大量 API 调用开始收到 500 个错误，响应中没有 json 错误正文。

请让我知道尝试解决此问题的途径是什么，因为它对我们的客户造成了重大影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:56:20.203

[根据文档](http://developers.box.com/docs/#rate-limiting)：

> 在某些情况下，Box 需要强制执行速率限制，以防止第三方服务和/或用户滥用。如果您的服务或您的服务的用户达到过度使用水平，将返回标准 503 错误，并指示何时重试请求。如果您收到背靠背 503，建议使用指数退避算法。

# node.js - Node.js：测试永远不会调用回调

> ID：11904972
> 
> 赞同：1
> 
> 时间：2012-08-10T15:38:37.117
> 
> 标签：node.js, testing, asynchronous

我有一些异步循环的代码，从数据库中读取并发出它找到的任何新记录：

```
var foo = new EventEmitter();

foo.stopped = false;

function run() {
    readSomeData(function(err, data) {
        if (foo.stopped) return;

        if (err) foo.emit('error', err);
        if (data) foo.emit('data', data);

        run();
    });
}

run(); 
```

测试停止时不再发出数据的最佳方法是什么？下面是一种尝试。有没有办法重组代码以避免使用 `setTimeout`？这个测试似乎通常很脆弱。

```
it('does not emit data when stopped', function(done) {
    var count = 0;

    foo.on('error', done);

    foo.on('data', function(data) {
        count++;

        if (count === 2) next();
        if (count > 2) done(new Error('Data should not have been emitted'));
    });

    // We'll know that this data has been written when the `data` callback
    // is called twice
    writeSomeData(mydata1, function(err) {
        if (err) done(err);
    });
    writeSomeData(mydata2, function(err) {
        if (err) done(err);
    });

    function next() {
        foo.stopped = true;

        writeSomeData(mydata3, function(err) {
            if (err) return done(err);

            // Data has been written but would it have been read yet
            // if `foo` was not stopped?  Perhaps not.  Wait a little bit
            // to ensure we don't get a false positive test.

            setTimeout(done, 1000);
        });
    }
}); 
```

# javascript - 在附加到 DOM 之前对 Ajax 响应进行字符串替换

> ID：11904980
> 
> 赞同：0
> 
> 时间：2012-08-10T15:39:03.763
> 
> 标签：javascript, jquery, ajax

我无法更新来自 jQuery ajax 请求的响应。在附加到 DOM 之前我需要能够替换`myPage.aspx`的内容。`/myfolder/myPage.aspx`jQuery 或者只是普通的 Javascript 可以做到这一点吗？

这是“数据”的一部分。

```
<a id="act_ExportXML" href="javascript:SubmitForm('myPage.aspx?test=Test','_blank','false','',null)"> 
```

我已经尝试过设置`dataType`为`text`和`html`。将 contains 与类似`[a:href~="myPage.aspx"]`. 我试过使用`replaceAll("myPage.aspx", "/myfolder/myPage.aspx`，但到目前为止没有运气。任何想法将不胜感激。

也许这根本不可能？

编辑：

感谢您的回复，但我已经使用这行代码，比我想象的要容易，但仍然想知道为什么 replaceAll() 在将响应转换为 jQuery 对象后不起作用。

```
// Inside of ajax success callback

var html = data.replace(/myPage.aspx/g,"/myfolder/rdPage.aspx");
// append code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:44:41.640

假设您的响应包含在名为 的变量中`responseText`，您可以尝试以下操作：

```
$(responseText).find('a').attr('href', function() {
    return this.href.replace('myPage.aspx', '/myfolder/myPage.aspx');
}); 
```

这应该从您的 HTML 中创建实际元素，找到所有`<a>`元素，然后将它们的`href`属性设置为更新的值（替换`myPage.aspx`为`/myfolder/myPage.aspx`）。

# python - 赋值前引用的局部 (?) 变量

> ID：11904981
> 
> 赞同：153
> 
> 时间：2012-08-10T15:39:11.437
> 
> 标签：python, python-3.x

```
test1 = 0
def testFunc():
    test1 += 1
testFunc() 
```

我收到以下错误：

> UnboundLocalError：分配前引用的局部变量“test1”。

错误说这`'test1'`是局部变量，但我认为这个变量是全局的

那么它是全局的还是局部的，如何在不将全局`test1`作为参数传递给的情况下解决此错误`testFunc`？

* * *

## 回答 #1

> 赞同：262
> 
> 时间：2012-08-10T15:43:48.800

为了让您`test1`在函数内部进行修改，您需要将其定义`test1`为全局变量，例如：

```
test1 = 0
def testFunc():
    global test1 
    test1 += 1
testFunc() 
```

但是，如果您只需要读取全局变量，则可以在不使用关键字的情况下打印它`global`，如下所示：

```
test1 = 0
def testFunc():
     print test1 
testFunc() 
```

但是每当您需要修改全局变量时，您必须使用关键字`global`。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-08-10T15:45:26.357

最佳解决方案：不要使用`global`s

```
>>> test1 = 0
>>> def test_func(x):
        return x + 1

>>> test1 = test_func(test1)
>>> test1
1 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-08-10T15:41:28.007

您必须指定 test1 是全局的：

```
test1 = 0
def testFunc():
    global test1
    test1 += 1
testFunc() 
```

# c# - 为什么信号量不等待

> ID：11904983
> 
> 赞同：2
> 
> 时间：2012-08-10T15:39:19.473
> 
> 标签：c#, multithreading, synchronization, semaphore

## **最后是编辑：**

我正在使用信号量同步两个不同的进程：

```
var semaphore = new Semaphore(0, 1, "semName"); 
```

所以我有进程 A 和进程 B 它们碰巧是不同的可执行文件。

**过程A**

```
 static void Main(string[] args)
    {

        Console.Write("Process A");
        Task.Factory.StartNew(() =>
        {
            var semaphoreName = "sem";
            var semaphore = Semaphore.OpenExisting(semaphoreName);

            Thread.Sleep(100);

            semaphore.Release();

            semaphore.WaitOne();

            semaphore.Release();

            Console.Write("Process A Completed!");
        });
        Console.Read();

    } 
```

**进程 B（不同的控制台应用程序）**

```
 static void Main(string[] args)
    {
        Console.Write("Process B");
        Task.Factory.StartNew(() =>
        {
            var semaphoreName = "sem";
            var semaphore = new Semaphore(0, 1, semaphoreName);

            semaphore.WaitOne();

            Thread.Sleep(1000);

            semaphore.Release();

            semaphore.WaitOne();

            Console.Write("Process B Completed!");
        });

        Console.Read();

    } 
```

如果我调试进程或放置一个`Thread.Sleep`我能够到达最后一行`Console.Write("Process A Completed!");` **我怎样才能解决这个问题而不必放置`Thread.Sleep(100);`？**

* * *

* * *

* * *

## 编辑

**没有比赛条件！！**也许我错了，如果我是的话，请纠正我。无论如何，这就是我认为没有竞争条件的原因：

**过程A**

```
 static void Main(string[] args)
    {
        Console.Write("Process A");
        var semaphoreName = "sem";

        Task.Factory.StartNew(() =>
        {                                
            var semaphore = Semaphore.OpenExisting(semaphoreName);

            semaphore.Release();

            semaphore.WaitOne();

            // this line should never be reached but it is!!!

            Console.Write("Process A Completed!");
        });            

        Console.Read();

    } 
```

**流程 B**

```
 static void Main(string[] args)
    {
        Console.Write("Process B");
        var semaphoreName = "sem";

        Task.Factory.StartNew(() =>
        {                

            var semaphore = new Semaphore(0, 1, semaphoreName);

            semaphore.WaitOne();

            // important to have these lines
            int a = 0;
            for (var i = 0; i < 1000000000; i++)
                a = i;

            Thread.Sleep(10000); // there should not be a race condition any more!!!!

            Console.Write("Process B Completed!");
        });

        Console.Read();
    } 
```

请注意，在流程 A 上，我们永远不应该到达这条线：`Console.Write("Process A Completed!");` 但我们确实......

进程 B 休眠 10000 秒，因此没有理由应该存在竞争条件。此外，如果我删除循环`for (var i = 0; i < 1000000000; i++)`，我不会得到那种行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:46:01.203

我找不到任何说明等待信号量的线程必须按照它们开始等待的顺序释放的文档。因此，在没有给进程 A 进入的机会的情况下，`sem.WaitOne()`进程中的 B 是否可能被其上层释放？`sem.Release()`

在进程 B 中在信号量上等待之前的添加`Thread.Sleep()`可能会给进程 A 一个进入信号量的机会。

您还没有完全清楚为什么要以这种方式使用信号量，或者`sem.WaitOne()`进程 B 正在等待什么（因为进程 A 从未在示例代码中释放信号量），因此很难提出改进建议解决问题。

但是，如果您打算让进程 A 在开始工作之前等待进程 B 启动，然后让进程 B 在继续之前等待进程 A 完成工作，似乎两个`ManualResetEvent`s 可以更有效地实现这一点（特别是进程 A 等待“进程 B 就绪”事件，进程 B 等待“进程 A 完成”事件）。

可能的解决方案：

过程一：

```
 static void Main(string[] args)
    {
        Console.Write("Process A");
        Task.Factory.StartNew(() =>
        {
            var readyEvent = new EventWaitHandle(false, EventResetMode.ManualReset, "Process B Ready");
            var doneEvent = new EventWaitHandle(false, EventResetMode.ManualReset, "Process A Finished");

            // Wait for process B to be ready...
            readyEvent.WaitOne();

            // Do some work...

            Console.Write("Process A Completed!");

            // Signal that the process is complete
            doneEvent.Set();
        });
        Console.Read();
    } 
```

过程乙：

```
 static void Main(string[] args)
    {
        Console.Write("Process B");
        Task.Factory.StartNew(() =>
        {
            var readyEvent = new EventWaitHandle(false, EventResetMode.ManualReset, "Process B Ready");
            var doneEvent = new EventWaitHandle(false, EventResetMode.ManualReset, "Process A Finished");

            // Signal that process B is ready
            readyEvent.Set();

            // Wait for process A to complete...
            doneEvent.WaitOne();

            Console.Write("Process B Completed!");
        });

        Console.Read();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:50:05.767

目前，进程 B 在释放信号量之前不消耗信号量。`OpenExisting`根据文档不消耗计数。`WaitOne`如果有可用空间，将增加信号量计数。

因此，假设您首先运行 A 因为它包含`new Semaphore`而 B 第二因为它包含`OpenExisting`，A 将抓取它并休眠 4 秒并且永远不会释放它，并且 B 会在抓取它之前尝试释放它。

至于`WaitOne`不等待，在我看来这是与其他进程的竞争条件。10ms 允许其他进程首先进入，因此`WaitOne`在第二个进程中似乎等待，因为没有空间。

信号量只有在没有空间的时候才会阻塞，如果有空间`WaitOne`会很快返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T15:59:29.893

正如其他人指出的那样，作为对您的特定问题的一般回答，您的代码中存在竞争条件。

这就是大多数时候实际发生的事情，也是为什么你认为它是系统的（实际上是随机的）。

你开始你的线程：

*   A 启动并在信号量中被阻塞。
*   B 启动并释放信号量上的锁。

现在情况不同了：

如果您有 Th​​read.Sleep(100) 但没有 Thread.Sleep(10)，.NET 的内部实现将暂停您的线程并启动进程 A，因为它是等待信号量最长的进程。

如果你有 Thread.Sleep(10) 可能（我不确定）**进程只是旋转 10 毫秒**并继续而不做上下文更改（也就是说，没有真正让线程进入睡眠状态），它会继续重新获取信号量，因此进程 A 永远不会被解锁。如果您没有任何类型的 thread.sleep，当然也会发生同样的情况。基本上，使用 Thread.Sleep(100) 您正在强制进行上下文切换，从而允许进程 A 获取线程。这当然是完全随机的，因为上下文切换无论如何都可能出现，但这样你就会强制它，这就是你看到你提到的结果的原因。

**编辑：**对于您更新的问题，您认为它是错误的。您使用信号量（在这种情况下为互斥体）来同步两个进程或线程。所以你让一个线程获取信号量，而另一个线程释放信号量，这样第二个线程就“发出信号”，它可以继续第一个线程。

如果您希望该过程以两种方式工作，则必须使用两个信号量。

# php - 如何与他们的 API 建立 Foursquare 连接？

> ID：11904985
> 
> 赞同：0
> 
> 时间：2012-08-10T15:39:24.730
> 
> 标签：php, mysql, api, connection, foursquare

我需要连接到 Foursquare 的 API 并获取前 5 个场所并显示它们及其数据。我得到了两个文件，一个是处理与 Foursquare 服务器联系的所有内容的基类，另一个处理返回的有关 Foursquare 场所的数据。

这是我遇到问题的与 Foursquare 服务器的连接。我找不到任何教程或任何看起来接近我正在做的事情或为初学者提供足够信息的东西，所以我想知道是否有人可以提供一些帮助。

我很肯定，一旦我连接到 Foursquare 的服务器，我就能够做到这一点。

这是连接的第一个文件：

```
<?php
class Foursquare {
    public $oauth;
    public $base_url="https://api.foursquare.com/v2";

    function __construct($oauth) {

    }

    public function fetchRemote($url,$params) {

    }

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T16:04:11.550

Foursquare 有不同类型的 API 调用：在**用户上下文**中进行的调用（需要访问令牌）或在无用户上下文中进行的调用**（**不需要访问令牌）。**如果您需要使用访问令牌（需要代理用户 = Yes**）调用给定端点，或者您是否可以在无用户上下文中调用它，foursquare API 文档非常清楚。

如果您的应用程序不需要用户登录到foursquare，并且您需要获取场地信息，则可以在无用户上下文中调用许多场地API 端点。

如果您**确实**需要在应用程序中对foursquare 用户进行身份验证，您可以通过调用foursquare 的**身份验证**端点来完成此操作。 **这是一个两步过程，**如下所述： [https ://developer.foursquare.com/overview/auth](https://developer.foursquare.com/overview/auth)

首先，您调用身份验证端点，传入您的客户端 ID 和客户端密码；Foursquare 处理验证您的用户（或不验证）并向您发送回验证码。接下来，您使用您的客户端 ID、客户端密码和您刚刚获得的身份验证代码请求访问令牌。Foursquare 然后将一个访问令牌交还给您。访问令牌特定于您的应用和此用户。

需要明确一点： **无用户上下文**要求您在调用中包含您的客户端 ID 和客户端密码。 **用户上下文**要求您包含从您已经完成的身份验证中收到的访问令牌。（如果您包含访问令牌，则不需要包含客户端 ID 和客户端密码。）

例如，这是在无用户上下文中对场地搜索端点的调用。请注意，不需要访问令牌。

```
https://api.foursquare.com/v2/venues/search?ll=40.7,-74&client_id=CLIENT_ID&client_secret=CLIENT_SECRET&v=YYYYMMDD 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:43:28.457

连接说明位于：[https](https://developer.foursquare.com/overview/auth) ://developer.foursquare.com/overview/auth 您必须先注册您的应用程序并获取 API 密钥。大多数 API 都是这种情况。

# android - 安卓线性布局性能

> ID：11904987
> 
> 赞同：3
> 
> 时间：2012-08-10T15:39:35.980
> 
> 标签：android, android-linearlayout

我的布局中有这些 lint 警告

```
Nested weights are bad for performance (11 items)
data.xml has more than 80 views, bad for performance 
```

这是我的布局：

![在此处输入图像描述](../Images/9ebf2ba3239323c75fb25cab28650c2d.png)

我的布局是显示数据。这些数据几乎显示为表格，但一些“行”必须为 3 或 4 `TextViews`，而其他“行”必须为 6 或 7。因为我希望其中一些`TextViews`具有完全相同的宽度，所以我创建了所有这些`LinearLayout`并使用`android:weightSum`并`android:layout_weight`实现什么我想。

由于我无法删除某些视图（它们都是显示我的数据所必需的），我可以做些什么来提高布局的性能？

我试过使用`RelativeLayout`，但我不能使用`android:weightSum`and `android:layout_weight`。

谢谢。

法沃拉斯

**编辑**

对不起。不明白 XML 如此重要。

这是巨大的代码：

[http://pastebin.com/0mehGx2z](http://pastebin.com/0mehGx2z)

还有一些解释。

我有一个数据库，其中一张表有近 50 列。

我对数据库进行查询，此查询返回一个光标。结果显示在`ListView`. 用户选择这些结果之一，然后“发送”到此布局，如果数据显示在所有这些字段上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T16:35:13.303

在我看来，您实际上是在尝试重新创建 ListView 已经做的事情。您肯定希望使用 ListView 或 GridView，因为它们是针对此任务设计和优化的。使用自定义适配器，您可以显示自定义布局。此外。我想我记得读过[RelativeLayout 比 LinearLayout 快](http://developer.android.com/training/improving-layouts/optimizing-layout.html#Revise)。可能是因为它不必那么努力地确定子视图的位置。只是要考虑其他事情。

Google[示例](http://developer.android.com/guide/topics/ui/layout/listview.html)展示了如何使用 Loader 动态加载 ListView。如果您已经拥有数据，那么您可以轻松去除 Loader 功能。

```
public class ListViewLoader extends ListActivity
        implements LoaderManager.LoaderCallbacks<Cursor> {

    // This is the Adapter being used to display the list's data
    SimpleCursorAdapter mAdapter;

    // These are the Contacts rows that we will retrieve
    static final String[] PROJECTION = new String[] {ContactsContract.Data._ID,
            ContactsContract.Data.DISPLAY_NAME};

    // This is the select criteria
    static final String SELECTION = "((" + 
            ContactsContract.Data.DISPLAY_NAME + " NOTNULL) AND (" +
            ContactsContract.Data.DISPLAY_NAME + " != '' ))";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Create a progress bar to display while the list loads
        ProgressBar progressBar = new ProgressBar(this);
        progressBar.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT, Gravity.CENTER));
        progressBar.setIndeterminate(true);
        getListView().setEmptyView(progressBar);

        // Must add the progress bar to the root of the layout
        ViewGroup root = (ViewGroup) findViewById(android.R.id.content);
        root.addView(progressBar);

        // For the cursor adapter, specify which columns go into which views
        String[] fromColumns = {ContactsContract.Data.DISPLAY_NAME};
        int[] toViews = {android.R.id.text1}; // The TextView in simple_list_item_1

        // Create an empty adapter we will use to display the loaded data.
        // We pass null for the cursor, then update it in onLoadFinished()
        mAdapter = new SimpleCursorAdapter(this, 
                android.R.layout.simple_list_item_1, null,
                fromColumns, toViews, 0);
        setListAdapter(mAdapter);

        // Prepare the loader.  Either re-connect with an existing one,
        // or start a new one.
        getLoaderManager().initLoader(0, null, this);
    }

    // Called when a new Loader needs to be created
    public Loader<Cursor> onCreateLoader(int id, Bundle args) {
        // Now create and return a CursorLoader that will take care of
        // creating a Cursor for the data being displayed.
        return new CursorLoader(this, ContactsContract.Data.CONTENT_URI,
                PROJECTION, SELECTION, null, null);
    }

    // Called when a previously created loader has finished loading
    public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
        // Swap the new cursor in.  (The framework will take care of closing the
        // old cursor once we return.)
        mAdapter.swapCursor(data);
    }

    // Called when a previously created loader is reset, making the data unavailable
    public void onLoaderReset(Loader<Cursor> loader) {
        // This is called when the last Cursor provided to onLoadFinished()
        // above is about to be closed.  We need to make sure we are no
        // longer using it.
        mAdapter.swapCursor(null);
    }

    @Override 
    public void onListItemClick(ListView l, View v, int position, long id) {
        // Do something when a list item is clicked
    }
} 
```

# sql - EXECUTE 之后的事务计数表明 BEGIN 和 COMMIT 的数量不匹配？

> ID：11904992
> 
> 赞同：1
> 
> 时间：2012-08-10T15:39:52.063
> 
> 标签：sql, sql-server, sql-server-2008, tsql, transactions

问题：我有这个 SQL 脚本：

```
DECLARE @in_TE_UID varchar(36) 
DECLARE @in_ZO_BETE_Sort int 
DECLARE @in_user int 

SET @in_TE_UID = '9f510440-8828-44ce-bbea-6bc866902262'
SET @in_ZO_BETE_Sort = 0 
SET @in_user = 12435

-- http://stackoverflow.com/questions/884334/tsql-try-catch-transaction-in-trigger
BEGIN TRANSACTION BeforeUpdate;
BEGIN TRY
    IF NOT EXISTS 
    (
        SELECT 1 FROM T_FMS_ZO_Benutzer_TeaserOrder 
        WHERE (T_FMS_ZO_Benutzer_TeaserOrder.ZO_BETE_Status = 1) 
        AND (T_FMS_ZO_Benutzer_TeaserOrder.ZO_BETE_BE_ID = @in_user) 
        AND 
        (
            T_FMS_ZO_Benutzer_TeaserOrder.ZO_BETE_TE_UID = @in_TE_UID 
            OR 
            (
                @in_TE_UID IS NULL 
                AND 
                T_FMS_ZO_Benutzer_TeaserOrder.ZO_BETE_TE_UID IS NULL 
            ) 
        )    
    )
    BEGIN
        INSERT INTO T_FMS_ZO_Benutzer_TeaserOrder 
        (
             ZO_BETE_UID
            ,ZO_BETE_BE_ID
            ,ZO_BETE_TE_UID
            ,ZO_BETE_Sort
            ,ZO_BETE_Status
        )
        VALUES
        (
             NEWID() --<ZO_BETE_UID, uniqueidentifier,>
            ,@in_user --<ZO_BETE_BE_ID, int,>
            ,@in_TE_UID --<ZO_BETE_TE_UID, uniqueidentifier,>
            ,@in_ZO_BETE_Sort --<ZO_BETE_Sort, int,>
            ,1 --<ZO_BETE_Status, int,>
        )
        ;
    END
    ELSE
    BEGIN

        UPDATE T_FMS_ZO_Benutzer_TeaserOrder  
            SET  ZO_BETE_Sort = @in_ZO_BETE_Sort 

        WHERE (T_FMS_ZO_Benutzer_TeaserOrder.ZO_BETE_Status = 1) 
        AND (T_FMS_ZO_Benutzer_TeaserOrder.ZO_BETE_BE_ID = @in_user) 
        AND 
        (
            T_FMS_ZO_Benutzer_TeaserOrder.ZO_BETE_TE_UID = @in_TE_UID 
            OR 
            (
                @in_TE_UID IS NULL 
                AND 
                T_FMS_ZO_Benutzer_TeaserOrder.ZO_BETE_TE_UID IS NULL 
            ) 
        ) 
        ;

    END

END TRY
BEGIN CATCH
    IF @@TRANCOUNT > 0
        ROLLBACK TRANSACTION BeforeUpdate --RollBack in case of Error

    --RETURN

    DECLARE @ErrorMessage NVARCHAR(4000);
    DECLARE @ErrorSeverity INT;
    DECLARE @ErrorState INT;

    SELECT 
        @ErrorMessage = ERROR_MESSAGE(),
        @ErrorSeverity = ERROR_SEVERITY(),
        @ErrorState = ERROR_STATE();

    -- Use RAISERROR inside the CATCH block to return error
    -- information about the original error that caused
    -- execution to jump to the CATCH block.
    RAISERROR (@ErrorMessage, -- Message text.
               @ErrorSeverity, -- Severity.
               @ErrorState -- State.
    );
END CATCH 
```

当我运行一次时它运行良好。

如果之后我运行

```
SELECT * FROM T_FMS_ZO_Benutzer_TeaserOrder 
```

然后它超时。

如果我添加`with (nolock)`，那么它的工作原理。

如果我查看 SSMS 中的进程，我会看到一个带有`LCK_M_S`.

如果我在代码中执行相同的命令，我总是会收到此错误：

> *EXECUTE 之后的事务计数表明 BEGIN 和 COMMIT 语句的数量不匹配。先前计数 = 0，当前计数 = 1*

所以真的，这段代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T15:42:02.517

你还没有`COMMIT`在你的 SQL 中放任何地方。大概它应该在`END TRY`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-11T11:31:49.093

```
-- =============================================              
-- Author:  <Ashish Jaishwal>              
-- Create date: <14 Jan 2016>              
-- Description: <create a bulk registeration of student and Login and alloted Batch>              
-- =============================================              
alter proc [dbo].[SPC_Bulk_Student_Register]          
(                 
 @BatchName varchar(50),          
 @CourseID int,          
 @START_DATE Datetime,          
 @END_DATE Datetime,          
 @MAX_LIMIT int,          
 @EmpID int,          
 @ExistBatchFlag int          
)          
as          
Begin          
DECLARE @STUDENT_ID VARCHAR(15)          
DECLARE @BATCHID INT          
DECLARE @COURSE_ID VARCHAR(6)                    
--DECLARE @EMPID INT          
--Note: 0 Batch is not Exist and 1 Batch is Exist  
--insert into TempExcelData select * from @BulkData;                
IF @ExistBatchFlag =0          
BEGIN          
  exec tc_insert_batch @BatchName,@CourseID,@START_DATE,@END_DATE,@MAX_LIMIT,@EmpID          
  set @BATCHID=(select batch_id from BATCH_MASTER where batch_name=@BatchName)          
END          
ELSE          
BEGIN          
 set @BATCHID=(select batch_id from BATCH_MASTER where batch_name=@BatchName)          
END          
--BEGIN try          
 BEGIN TRANSACTION     

 WHILE EXISTS(select top 1 ID,FNAME,LNAME,DOB,EMAILID from TempExcelData)          
 BEGIN          
  DECLARE @id INT          
  DECLARE @FNAME VARCHAR(40)          
  DECLARE @LNAME VARCHAR(40)          
  DECLARE @DOB DATETIME          
  DECLARE @EMAILID VARCHAR(40)          
  DECLARE @STUDENTLOGIN VARCHAR(50)          
  SELECT TOP 1 @id = Id,@FNAME=Fname,@LNAME =Lname,@DOB=DOB,@EMAILID=EmailID FROM TempExcelData          
  --HERE REGISTER THE STUDENT AND RETURN THE STUDENT ID          
   EXEC Spc_excel_insert_student_register @FNAME,@LNAME,@DOB,@EMAILID,@STUDENT_ID out          
   EXEC Spc_Excel_LoginName_Generation @FNAME,@LNAME,@STUDENTLOGIN OUT      
   EXEC sp_InsertStudentLogonDetails @STUDENT_ID,@STUDENTLOGIN,'welcome123','Y'      
   --HERE ALLOTED TO BATCH AND COURSE          
    EXEC tc_insertStudentRegister4_new @STUDENT_ID,@BATCHID,'',@CourseID          
   delete TempExcelData where id=@id     
  -- COMMIT TRAN           
 END          
     --COMMIT TRAN      
    IF ( @@error <> 0 )                 
      BEGIN       
       BEGIN              
          ROLLBACK TRAN    
          END                 
      END              
     IF (@@trancount > 0)                 
  BEGIN      
    BEGIN               
      COMMIT TRAN           
      END          
  END            
end               

Transaction count after EXECUTE indicates a mismatching number of BEGIN and COMMIT statements. Previous count = 2, current count = 0.

I AM FACING THIS SUCH TYPE PROBLEM................!!!! 
```

# c++ - C++“无效的构造函数”

> ID：11904997
> 
> 赞同：7
> 
> 时间：2012-08-10T15:40:21.023
> 
> 标签：c++, constructor, compiler-errors

当我试图创建一个具有构造函数的类时，该构造函数按值获取该类的对象，例如：

```
class X{
    X(){}
    X(X x){} //Error!
}; 
```

然后 g++ 为第二个构造函数抱怨以下内容：

```
error: invalid constructor; you probably meant ‘X (const X&)’ 
```

亲爱的编译器，不，我不是指 const 引用。这一次，我想做我写的：按值传递参数x！为什么这是无效的？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-10T15:43:31.733

您正在尝试创建一个复制构造函数，并且复制构造函数必须具有引用。否则，当您将 x 按值传递给构造函数时，编译器将不得不创建 x 的临时副本，为此它需要调用复制构造函数，并需要为其创建一个临时副本....无穷无尽。

因此，复制构造函数必须通过引用获取其参数，以防止无限递归。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-10T15:42:43.170

因为

```
X(X x){} //Error! 
```

需要一个复制构造函数。即本身即递归。即什么时候结束？！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T15:42:57.883

您正在尝试实现一个复制构造函数，它只能通过传递对您要复制的对象的引用来工作。