# StackOverflow 问答 11734000-11734999

# windows - Azure 服务总线免费试用

> ID：11734002
> 
> 赞同：0
> 
> 时间：2012-07-31T05:56:33.620
> 
> 标签：windows, service, azure, bus

一周前，我注册了免费试用 Windows azure 3 个月。但是，我似乎找不到服务总线或访问控制的菜单选项来创建服务总线队列和主题。这些不是作为免费试用的一部分提供的吗？我在某处读到服务总线是免费试用的一部分，直到 2012 年 5 月 31 日。这是真的吗？

有没有其他方法可以使用服务总线队列和主题免费测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:58:52.963

我不认为服务总线是作为免费试用的一部分提供的。

[http://www.windowsazure.com/en-us/pricing/free-trial/](http://www.windowsazure.com/en-us/pricing/free-trial/)

# android - 如何更改android中默认ListView的文本颜色？

> ID：11734005
> 
> 赞同：0
> 
> 时间：2012-07-31T05:56:42.283
> 
> 标签：android, android-layout

我有一个来自 android 的默认 ListView 说**android.R.layout.simple_list_item_1**。其中 ListView 的背景颜色为黑色，列表的文本为白色。

现在我已将 ListView 的背景颜色更改为白色。因此，listView 上填充的文本默认也是白色的。这就是为什么 ListView 的数据不可见的原因。

ListView 上填充的文本是数组列表。那么我在哪里设置 ListView 的文本颜色呢？我想更改**ListView**上填充的**文本颜色**。

 **任何人都可以判断没有自定义 ListView 是否可行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T06:08:21.637

答案`@Archie.bpgc`是正确的。通过**[此链接](http://www.vogella.com/articles/AndroidListView/article.html#listview_adapterintro)**将帮助您了解要完成的工作。

让我试着解释一下：

这是您的列表适配器：

```
String Values [] = {"value 1","Value 2"......}
YourlistAdapter = new ArrayAdapter  
      (this, R.layout.listlayout, R.id.listTextView,Values);
YourListView.setAdapter( listAdapter );` 
```

和**R.layout.listlayout ：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/listTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textColor="your_color"
    android:text="TextView" /> 
```

现在我希望你明白。
`R.layout.listlayout`是列表视图的布局。
`listTextView`是要在其上写入文本的布局内的文本视图的 ID。
值是您要在列表视图上写入的内容的字符串数组

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T06:05:31.080

你可能正在使用这个：

```
 setListAdapter(new ArrayAdapter(this,
                android.R.layout.simple_list_item_1, listItems)); 
```

然后将 android.R.layout.simple_list_item_1 更改为您定义的其他布局`R.layout.myListItem`

在那个 myListItem 中只有一个 TextView`android:TextColor="@color/black"`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-12-18T19:51:55.770

科特林

val 适配器：ArrayAdapter = 对象：ArrayAdapter(this, android.R.layout.simple_list_item_1, listOfItems) {

覆盖有趣的getView（位置：Int，covertView：View，父：ViewGroup）：View {

val view = super.getView(position, convertView, parent) val text = view.findViewById(R.id.text1) text.setTextColor(ContextCompat.getColor(applicationContext, android.R.color.white))

返回视图

}

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-31T06:03:16.180

像这样设置listview文本颜色

列表视图 android:textColor=""**

# iphone - 在一个 Git 存储库中为不同国家/地区维护 iOS 应用程序

> ID：11734006
> 
> 赞同：2
> 
> 时间：2012-07-31T05:56:45.993
> 
> 标签：iphone, ios, git, version-control, app-store

我们的团队在中国发布了一个应用程序，现在我们将添加许多新功能并在许多其他国家发布它。

问题是几乎不可能在一个应用程序中本地化它——它是一个语言学习应用程序，具有依赖于语言的预填充数据库、不同的社交网络和其他东西，所以我们决定为不同的国家发布不同的应用程序。这是一个正确的（或者至少是可能的——我的意思是，苹果会批准它）的方法吗？

如果是，那么我们如何在一个存储库中为不同国家/地区维护不同版本的应用程序，同时开发核心功能？

什么样的分支会做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:48:34.023

您应该创建一个新目标并（例如）指定不同的预处理宏、info-plist 文件等，以便您可以识别本地化目标。

# weblogic - 如何以编程方式使用 selectionListener="#{bindings.Products.collectionModel.makeCurrent}" ？

> ID：11734007
> 
> 赞同：0
> 
> 时间：2012-07-31T05:57:09.537
> 
> 标签：weblogic, jdeveloper, oracle-adf

我在 adf 表组件中使用自定义选择侦听器。那么如何`selectionListener="#{bindings.Products.collectionModel. makeCurrent}"`以编程方式调用以获取选定的行/键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:14:17.900

Look at sample #23 at [http://www.oracle.com/technetwork/developer-tools/adf/learnmore/index-101235.html#CodeCornerSamples](http://www.oracle.com/technetwork/developer-tools/adf/learnmore/index-101235.html#CodeCornerSamples) which shows how to do this in a generic way.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T05:25:07.397

...此外，您可以使用 MethodExpression 从 Java 调用 EL。在这种情况下，您的选择侦听器将最初创建

*   FacesContext 实例
*   EL上下文
*   表达式工厂
*   MethodExpression（从 ExpressionFactory 构建，您输入问题的 EL 将放入其中）

...然后您调用 MethodExpression 来执行逻辑。您从这种方法中获得的好处是您可以执行预处理和后处理（如前触发和后触发）

# maven - 从 Maven POM 中的 JAR 文件中删除版本？

> ID：11734008
> 
> 赞同：1
> 
> 时间：2012-07-31T05:57:14.790
> 
> 标签：maven, maven-2

在 pom.xml 中，我在下面的条目中创建了一个 JAR

```
<?xml version="1.0" encoding="UTF-8"?>
<project>
   <modelVersion>4.0.0</modelVersion>
   <groupId>se.sigma.educational</groupId>
   <artifactId>my-jar</artifactId>
   <version>1.0</version>
   <packaging>jar</packaging>
   <name>Executable jar example</name>
     .... 
```

在这里，一切正常，并且创建了名为“my-jar-1.0.jar”的 JAR。有没有办法可以将 JAR 文件名创建为“my-jar.jar”而不是在名称中包含版本？？？我尝试删除属性，但 pom.xml 无法运行。

非常感谢任何帮助，如何从 JAR 文件名中删除版本？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T07:44:36.700

好吧，有一个`<finalName>`属性可以让您定义工件的自定义名称 -

```
<build>
        <finalName>NAME_OF_JARFILE</finalName>
</build> 
```

# haskell - 部分类型签名

> ID：11734012
> 
> 赞同：1
> 
> 时间：2012-07-31T05:57:35.243
> 
> 标签：haskell, ghc, type-inference

> **可能重复：**
> [不完整的类型签名](https://stackoverflow.com/questions/11751318/incomplete-type-signature)

考虑以下：

```
import Network.HTTP.Conduit  

(parseUrl "http://stackoverflow.com") :: Maybe a 
```

[`parseUrl`](http://hackage.haskell.org/packages/archive/http-conduit/1.5.0.3/doc/html/Network-HTTP-Conduit.html#v:parseUrl)返回`Failure HttpException m => m (Request m')`

它的文档说：

> 由于此函数使用`Failure`，因此返回单子可以是任何 的实例`Failure`，例如`IO`or `Maybe`。

但是，当我尝试强制`parseUrl`使用`Maybe`时，出现以下错误：

```
main.hs:9:11:
    Couldn't match type `a' with `Request m'0'
      `a' is a rigid type variable bound by
          an expression type signature: Maybe a at main.hs:9:10
    Expected type: Maybe a
      Actual type: Maybe (Request m'0) 
```

无论如何强制类型`Maybe`而不指定完整的确切类型？包括 GHC 扩展在内的答案都很好。

请注意，这有效：

```
f :: Maybe a -> Maybe a
f x = x

f (parseUrl "http://stackoverflow.com") 
```

但这对我来说似乎很丑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:18:38.860

你可以使用`asTypeOf`，

```
main = do
    print (parseUrl "http://stackoverflow.com" `asTypeOf` Nothing) 
```

迫使 monad 成为`Maybe`. 并不是说那获得了太多

```
main = do
    print (parseUrl "http://stackoverflow.com" :: Maybe (Request m)) 
```

# .net - 使用安装程序更新 Windows .net 程序

> ID：11734013
> 
> 赞同：1
> 
> 时间：2012-07-31T05:57:38.317
> 
> 标签：.net, windows, visual-studio, installation

我在 Visual Studio 中创建了一个简单的小型 Windows 程序，我在解决方案中添加了一个安装项目。现在我可以安装我的程序，当我更新 Windows 程序中的某些内容时，我可以快速构建一个新的安装程序，但是我遇到了 1 个问题。我的 Windows 程序包含一个设置文件，当我 Uodate/Reinstall 我的设置文件被重置时，如何避免这种情况，我希望能够在不重置设置文件的情况下从设置文件更新我的程序？

所以任何人请帮助我或指出正确的方向:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:15:55.897

我相信您可以通过将 VS 设置项目中的设置文件属性更改为以下内容来实现您想要的：

```
Transitive = False 
```

如果您希望文件在卸载后仍保留在那里，那么还要为该文件设置以下属性：

```
Permanent = True 
```

**警告：**设置上述 Transitive 属性可能会产生其他不太理想的副作用。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/928tb19t%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/928tb19t%28v=vs.71%29.aspx)。

另一种选择是在安装项目的文件中添加一个**条件**，如以下链接中所述：-

[如果文件存在，则 Visual Studio 安装项目有条件](https://stackoverflow.com/questions/4102503/visual-studio-setup-project-conditional-if-file-exists)

# android - 选择哪个适配器？

> ID：11734014
> 
> 赞同：3
> 
> 时间：2012-07-31T05:57:48.013
> 
> 标签：android, cursor, android-arrayadapter, simplecursoradapter, listadapter

我有两种方法可以从中读取相同的数据`database`，第一个返回对象`Cursor`，第二个返回`List`对象。现在我使用第一种方法显示我的活动项目`SimpleCursorAdapter`，我也可以使用第二种方法和适当的适配器。这两种方式中哪一种更好用，第二种方式我应该使用哪种适配器？

PS对不起英语不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:10:42.157

一定要去`SimpleCursorAdapter`。`Cursor`如果可能，如果您的数据来自，请始终使用，通过不创建对象来`database`节省内存。`List`在 Java 中创建对象在时间和内存消耗方面是昂贵的，您必须记住，您是在资源有限的移动平台上。如果您使用`List`对象而`ListView`不是使用从`ArrayAdapter`.

尽管`Cursor`您的数据来自`database`. 假设您将地点存储在`database`由其名称和位置定义的位置，并且您希望`ListView`按照与当前位置的距离排序来显示它们。除非您不在附加列中存储相对距离，否则很难执行返回排序结果的查询。但是您可以在`Cursor`将它`List`发送到您的`ListView`.

# wcf - RESTful 服务不适用于多个调用

> ID：11734016
> 
> 赞同：0
> 
> 时间：2012-07-31T05:57:52.967
> 
> 标签：wcf, web-services, jmeter

我创建了一个接受输入 xml 并输出响应 xml 的 Restful 服务。在给出输出 xml 之前，它会调用 Web 服务并从中获取 xml。我对 xml 进行了一些修改并输出它。

客户端报告说，当他们进行负载测试时，有时响应正确，有时不是来自 RESTful 服务。

如何使用 JMeter 进行负载测试并找到其中的漏洞。这发生在多个呼叫中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:50:08.220

jmeter 的两个很好的参考是： - [http://blog.milamberspace.net/](http://blog.milamberspace.net/)如果你说法语 - [http://theworkaholic.blogspot.fr/](http://theworkaholic.blogspot.fr/)如果不是

但是您绝对应该从阅读开始：- [http://jmeter.apache.org/usermanual/index.html](http://jmeter.apache.org/usermanual/index.html)

如果您遇到困难，请在 jmeter 用户列表上提问。问候菲利普

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:26:15.813

[首先使用JMeter Proxy](http://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf)创建新的测试并保存测试场景（记录用户在浏览器中的点击）。
然后使用记录的组件来组成您的实际测试。

不要忘记使用[JMeter 插件](http://code.google.com/p/jmeter-plugins/)（无价之宝）。

# c++ - 将lua脚本编译成dll？

> ID：11734024
> 
> 赞同：1
> 
> 时间：2012-07-31T05:59:07.427
> 
> 标签：c++, dll, lua, luajit

我听说过使用 LuaJIT 将 Lua 代码编译成字节码，然后编译成静态库。

理想情况下，我希望能够将 Lua 代码编译成动态库，这样我就不必重建主可执行文件。

你能把Lua编译成dll吗？如果是这样，由于没有标题，您如何将其链接到 c++ 代码？最后，您将如何从程序内部运行 Lua 脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:04:10.473

我相信你会做的是将lua interperter dll（[http://www.lua.org/pil/24.html](http://www.lua.org/pil/24.html)）链接到你的程序，然后将脚本作为资源包含在你的c/c++的头文件中程序并使用 lua.dll 函数来执行它。您也可以使用该方法从 C 调用 lua 函数（这显示了几个完整的片段示例，其中包含头文件[http://www.troubleshooters.com/codecorn/lua/lua_c_calls_lua.htm](http://www.troubleshooters.com/codecorn/lua/lua_c_calls_lua.htm)）。

# wordpress - 翻译 .po 文件不起作用

> ID：11734030
> 
> 赞同：0
> 
> 时间：2012-07-31T05:59:34.890
> 
> 标签：wordpress

我在英文界面安装wordpress。

之后，我安装了转换为希伯来语 + 的主题（alyeska）`<html dir="rtl">`。

在主题文件夹里面有 lang\alyeska.po

我做了一些步骤来翻译 alyeska.po：

1.  我用 Poedit 打开文件 alyeska.po 并更改原始文件并将其保存为 he-il.po

2.  我编辑文件 function.php 并添加`<?php load_theme_textdomain('alyeska'); ?>`我不知道它是否正确`('alyeska')`或需要其他值的行。

3.  我打开文件 wp-config.php 并添加该行`define ('WPLANG', 'he-il');`

翻译主题不起作用。

我在这里想念什么？

许多谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T06:46:46.333

尝试改变这一点

```
define ('WPLANG', 'he-il'); 
```

至

```
define ('WPLANG', 'he_IL'); 
```

还，

```
he-il.po 
```

至

```
he_IL.po 
```

# css - 如何在 twitter bootstrap subnav 下拉菜单中实现小箭头

> ID：11734033
> 
> 赞同：0
> 
> 时间：2012-07-31T05:59:43.287
> 
> 标签：css, drop-down-menu, twitter-bootstrap, modal-dialog, pseudo-class

我已经使用模式成功地在引导程序“subnav”（取自 docs.css）上实现了一个下拉菜单。

问题是小箭头（不是插入符号，而是将 div/modal 与链接“连接”的**白色箭头。）。**

我设法渲染了箭头（使用'：after'），但不明白如何隐藏/切换它，因为它在标准导航栏下拉菜单中工作。

不关心模态的定位（使用小提琴“show”看起来与预期的一样）。

小提琴（表演）：http: [//jsfiddle.net/MDtCg/5/show/](http://jsfiddle.net/MDtCg/5/show/)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:20:14.020

两个简单的 CSS 更新应该可以做到：

```
a strong.caret {
 display: none;   
}

a:hover strong.caret {
 display: inline-block;   
} 
```

# java - 如何使用 Singleton 类来获得多个连接？

> ID：11734040
> 
> 赞同：1
> 
> 时间：2012-07-31T06:00:26.593
> 
> 标签：java, database, design-patterns, jdbc

我写了一个单例类来获取连接。但是，我无法使用 Singleton 获得连接。

我想使用我的 Singleton 获取多个连接并使用连接 Singleton 对数据库进行查询。我总是为此尝试几种方法，但没有成功。

这是我的单例类：

```
import java.sql.*;

public class ConnectDB {

private static Connection connect;
private static ConnectDB instance;

private ConnectDB()
{

    try {

        Class.forName("com.mysql.jdbc.Driver");
        //connect DB
        connect = DriverManager.getConnection("jdbc:mysql://ip/database","root","password");

    }

    catch(SQLException e)
    {
        System.err.println(e.getMessage());

    }

    catch(ClassNotFoundException e)
    {

        System.err.println(e.getMessage());

    }   
}

  public static ConnectDB getInstance()
  {

      if(instance == null) {

          instance = new ConnectDB();

      }

      return instance;

  }

} 
```

现在，我得到了连接：

```
 public class NameClass {

public void getInfoDatabase()
{   

       Connection cnn = ConnectDB.getConnection();
       PreparedStatement ps;
       ResultSet rs;

       try {

           ps = cnn.prepareStatement("select *  from tables");

           rs = ps.executeQuery();

           while(rs.next())
           {

               String tables = rs.getString("table1");
               System.out.println(tables);
           } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T06:06:26.783

如果您想有效地使用多个连接，您可能需要一个[连接池](http://en.wikipedia.org/wiki/Connection_pool)：

> 在软件工程中，连接池是维护的数据库连接的缓存，以便在将来需要对数据库的请求时可以重用连接。连接池用于提高在数据库上执行命令的性能。

拥有一个`Singleton`which 将返回*许多*连接违背了 的目的`Singleton`，它的任务是在调用它时提供相同的实例。

我建议您看一下[这个](https://stackoverflow.com/questions/5640146/java-jdbc-connection-pool-library-choice-in-2011-2012)先前的 SO 线程，其中讨论了各种连接池库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-22T13:26:27.920

我的方式是这个 DBConnection 是一个单例类。这个用法在 ContactDAO 类中。

```
public class DBConnection{

    private static DBConnection instance;
    private String url="jdbc:oracle:thin:@192.168.10.32:1521:orcl";
    private String login="kit";
    private String pass="1234";

    private DBConnection(){

        try {
            Class.forName("oracle.jdbc.driver.OracleDriver");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static Connection getConnection() throws SQLException {
        if (instance == null) {
            instance = new DBConnection();
            System.out.println(" Connection  - - - - - - - -  New DBConnection created");
        }
        try {
            return DriverManager.getConnection(instance.url, instance.login,instance.pass);
        } catch (SQLException e) {
            throw e;
        }
    }

    public static void close(Connection connection)
    {
        try {
            if (connection != null) {
                connection.close();
                connection=null;
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

} 
```

> ********* 联系道 *************

```
public class ContactDAO {

        public List<Contact> findAll() {
            List<Contact> list = new ArrayList<Contact>();
            Connection c = null;
            String sql = "SELECT * FROM KIT.CONTACT";
            try {
                c = DBConnection.getConnection();
                Statement s = c.createStatement();
                ResultSet rs = s.executeQuery(sql);
                while (rs.next()) {
                    list.add(processRow(rs));
                }
            } catch (SQLException e) {
                e.printStackTrace();
                throw new RuntimeException(e);
            } finally {
                DBConnection.close(c);
            }
            return list;
        }

        public List<Contact> findByCity(String city) {
            List<Contact> list = new ArrayList<Contact>();
            Connection c = null;
            String sql = "SELECT * FROM KIT.CONTACT as e " + "WHERE UPPER(city) LIKE ? ";
            try {
                c = DBConnection.getConnection();
                PreparedStatement ps = c.prepareStatement(sql);
                ps.setString(1, "%" + city.toUpperCase() + "%");
                ResultSet rs = ps.executeQuery();
                while (rs.next()) {
                    list.add(processRow(rs));
                }
            } catch (SQLException e) {
                e.printStackTrace();
                throw new RuntimeException(e);
            } finally {
                DBConnection.close(c);
            }
            return list;
        }

        public Contact findById(int id) {
            String sql = "SELECT * FROM KIT.CONTACT WHERE id = ?";
            Contact contact = null;
            Connection c = null;
            try {
                c = DBConnection.getConnection();
                PreparedStatement ps = c.prepareStatement(sql);
                ps.setInt(1, id);
                ResultSet rs = ps.executeQuery();
                if (rs.next()) {
                    contact = processRow(rs);
                }
            } catch (Exception e) {
                e.printStackTrace();
                throw new RuntimeException(e);
            } finally {
                DBConnection.close(c);
            }
            return contact;
        }

        public Contact save(Contact contact) {
            return contact.getId() > 0 ? update(contact) : insert(contact);
        }

        public Contact insert(Contact contact) {
            Connection c = null;
            PreparedStatement ps = null;
            try {
                c = DBConnection.getConnection();
                ps = c.prepareStatement(
                        "INSERT INTO KIT.CONTACT (country, city, address, photo,fk_user) VALUES (?, ?, ?, ?, ?)",
                        new String[] { "ID" });

                ps.setString(1, contact.getCountry());
                ps.setString(2, contact.getCity());
                ps.setString(3, contact.getAddress());
                ps.setString(4, contact.getPhoto());
                ps.setInt(5, contact.getFk_user());

                ps.executeUpdate();

                ResultSet rs = ps.getGeneratedKeys();
                while(rs.next()){
                int id = rs.getInt(1);
                contact.setId(id);
                }

            } catch (Exception e) {
                e.printStackTrace();
                throw new RuntimeException(e);
            } finally {
                DBConnection.close(c);
            }
            return contact;
        }

        public Contact update(Contact contact) {
            Connection c = null;
            try {
                c = DBConnection.getConnection();
                PreparedStatement ps = c
                        .prepareStatement("UPDATE KIT.CONTACT SET country=?, city=?, address=?, photo=?  WHERE id=?");
                ps.setString(1, contact.getCountry());
                ps.setString(2, contact.getCity());
                ps.setString(3, contact.getAddress());
                ps.setString(4, contact.getPhoto());

                ps.setInt(5, contact.getId());
                ps.executeUpdate();
            } catch (SQLException e) {
                e.printStackTrace();
                System.out.println("contactDAO update exception");
                throw new RuntimeException(e);
            } finally {
                DBConnection.close(c);
            }
            return contact;
        }

        public boolean remove(int id) {
            Connection c = null;
            try {
                c = DBConnection.getConnection();
                PreparedStatement ps = c
                        .prepareStatement("DELETE FROM KIT.CONTACT WHERE id=?");
                ps.setInt(1, id);
                int count = ps.executeUpdate();
                return count == 1;
            } catch (Exception e) {
                e.printStackTrace();
                throw new RuntimeException(e);
            } finally {
                DBConnection.close(c);
            }
        }

        protected Contact processRow(ResultSet rs) throws SQLException {
            Contact contact = new Contact();
            contact.setId(rs.getInt("id"));
            contact.setCountry(rs.getString("country"));
            contact.setCity(rs.getString("city"));
            contact.setAddress(rs.getString("address"));
            contact.setPhoto(rs.getString("photo"));

            return contact;

        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T06:06:27.347

[最好有一个像ComboPooledDataSource](http://www.mchange.com/projects/c3p0/)这样的单例类连接池，然后从中获取多个连接。

# facebook - Facebook 新闻源帖子中的嵌入式 Flash 播放器有时会打开一个新窗口而不是内联播放

> ID：11734044
> 
> 赞同：0
> 
> 时间：2012-07-31T06:01:03.560
> 
> 标签：facebook, flash, embed, facebook-opengraph

我的团队正在运行音乐门户（歌曲、音乐视频等）[SongDew](http://www.songdew.com)，我们无法让我们的用户在 Facebook 上分享内容。当用户在 Facebook 上分享歌曲时，我们的应用程序会在 newsgeed 帖子中嵌入一个 Flash 播放器对象。分享歌曲的帖子中有一张图片，图片顶部有一个播放按钮：当有人点击播放按钮时，图片会展开，变成 Flash 播放器，然后播放歌曲。

我们遇到的错误是，有时当用户单击播放按钮时，浏览器会打开一个新窗口并加载实际的 Flash 源。

您现在可以在网站上实时看到问题 - 转到[SongDew](http://www.songdew.com)，使用 Facebook ID 注册，在 Facebook 上分享歌曲，然后尝试单击它生成的新闻源帖子。

据我所知，我们已经添加了所有必需的 OpenGraph 标记。内容得到正确共享，并且帖子显示在新闻源中 - 只是播放按钮打开了 Flash 源的新窗口，而不是内联播放 Flash。

如何修复此错误，以便 Flash 内联播放，而不是使用媒体源打开新窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:29:23.880

尝试添加一个`og:url`元标记，这应该会使解析器的工作更容易。还要检查[url linter/debug tool](http://developers.facebook.com/tools/debug/og/object)的输出，`og:message`无法识别，可能需要`og:description`改为。

由于 youtube 似乎可以正常工作，请尝试重新创建[他们的标签](http://developers.facebook.com/tools/debug/og/object?q=http://www.youtube.com/watch?v=meOCdyS7ORE)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:24:06.147

`og:type:video.other`您的 og 标签中缺少

# perl - Perl 哈希和数组 + 排序

> ID：11734046
> 
> 赞同：0
> 
> 时间：2012-07-31T06:01:05.890
> 
> 标签：perl

代码不言自明，没有在代码中使用排序，因为我不知道你的用途这是 perl 中的内容代码。

```
/bash/perl
%ttys = ();
my @lsarray = `cat /home/delkav/labs-scripts/grep`;
my @array;
$array[0] = <STDIN>; < ONE
$array[1] = <STDIN>; < TWO
$array[2] = <STDIN>; < TRHEE
$array[3] = <STDIN>; < FOUR
$array[4] = <STDIN>; < FIVE
$array[5] = <STDIN>; < SIX
$array[6] = <STDIN>; < SEVEN
$array[7] = <STDIN>; < EIGHT
$array[8] = <STDIN>; < NINE
@ttys{@lsarray} = @array;
print "@{[%ttys]}\n" 
```

/home/delkav/labs-scripts/grep 中的内容是：

```
$90850
$0
$389
$469
$670
$750
$684
$21744
$604 
```

打印出脚本

```
$684
SEVEN
$469
FOUR
$21744
EIGHT
$670
FIVE
$389
TRHEE
$90850
ONE
$0
TWO
$750
SIX
$604
NINE 
```

我需要输出如何。

```
$90850
ONE
$0
TWO
$389
THREE
$469
FOUR
$670
FIVE
$750
SIX
$684
SEVEN
$21744
EIGHT
$604
NINE 
```

嗯，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:11:40.157

如果您需要保留顺序，则不应使用散列，因为散列函数不维护顺序。相反，您应该使用数组 ref。也许是这样的：

```
#!/bash/perl
my @ttys;
my @lsarray = map { chomp; $_ } `cat /home/delkav/labs-scripts/grep`;
my @array;
chomp($array[$_] = <>) for 0..8;
push @ttys, [$array[$_], $lsarray[$_]] for 0..$#array;
print "$_->[0]\n$_->[1]\n" foreach @ttys; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:15:26.443

也许是这样的：

```
print "$_\n$ttys{$_}\n" for @lsarray; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:52:02.473

您应该*始终* 处于每个程序的顶部`use strict`。`use warnings`您还应该打开数据文件并在 Perl 中读取它，而不是使用`cat`.

该程序可以满足您的需要。

```
use strict;
use warnings;

open my $fh, '<', '/home/delkav/labs-scripts/grep' or die $!;

my @numbers = qw/ ONE TWO THREE FOUR FIVE SIX SEVEN EIGHT NINE TEN /;

my $i = 0;
while (<$fh>) {
  print;
  print $numbers[$i++], "\n";
} 
```

# jquery - jquery将联系人拖放到表单字段中

> ID：11734048
> 
> 赞同：1
> 
> 时间：2012-07-31T06:01:23.080
> 
> 标签：jquery, jquery-ui

我一直在尝试弄清楚如何使用 jquery 从联系人块中拖动一个项目（例如手机号码）并将它们放入表单字段或文本区域，然后通过关闭按钮将它们删除（添加联系人时类似于 iphone 消息）。

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:50:00.267

试试这个：

```
 $(function() {
      $( "ul > li" ).draggable({
          appendTo: "body",
          helper: "clone"
      });
      $("div").droppable({
          drop: function( event, ui ) {
              createNode(ui.draggable.text(), $(ui.draggable))
              $(ui.draggable).hide();

          }
      });
  });

  function createNode(text, origNode) {
     $("div").append(
         $('<span class="node"/>').html(text).append(
             $('<span class="close"/>').click(function () {
                 origNode.show();
                 $(this).parent().remove();
             }).html('x')
         )
     );
  } 
```

演示：http: [//jsfiddle.net/codef0rmer/G6fmF/](http://jsfiddle.net/codef0rmer/G6fmF/)

# algorithm - SPARQL中的搜索算法？

> ID：11734049
> 
> 赞同：-1
> 
> 时间：2012-07-31T06:01:27.790
> 
> 标签：algorithm, data-structures, graph, rdf, sparql

关于从 RDF 获取数据的 SPARQL，我有两个问题。

1.  SPARQL 使用什么底层搜索算法来获取数据？

2.  如何使用不同的搜索算法从 RDF 中获取数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:49:57.113

1 没有标准答案，这将因数据库而异。不过，总的来说，这不是我认为您的意思的搜索算法。大多数数据库将采用解析 SPARQL 查询产生的查询代数，并将其转换为一系列扫描、连接、过滤器等，从而从索引中获取查询的答案。这是一个与关系查询回答并不完全不同的过程。

对于2，我一点也不知道你在说什么。您可以从三重存储的 API 或通过 SPARQL 从三重存储获取 RDF 数据。就是这样。您可以在这两种访问数据的机制之上构建自己的算法，然后您可以自由使用您喜欢的任何算法，但您将无法更改三元组的任何底层位您正在使用的商店。

# java - 反转 HashMap 到不同的集合和/或列表

> ID：11734056
> 
> 赞同：0
> 
> 时间：2012-07-31T06:01:51.267
> 
> 标签：java, oop, map, hashmap, reverse

我会尽可能简单地解释我被困住的观点。

基本上我正在尝试实施一种解决方案来处理用户数据。

我有一个类似的 Map `<String, Object>`，它将用户 ID 存储为键，将用户对象存储为值。用户对象有一些字段，如位置、姓名、年龄等。

通过使用地图，我希望有一些集合或其他地图来对用户数据进行分类。例如，我正在尝试获取另一张地图`<String, Set<String>>`，该地图将存储一组居住在同一位置的用户，依此类推。

我尝试了一些技巧，并检查了一些链接，例如[this](http://www.codingforums.com/showthread.php?t=191502)和[this](https://stackoverflow.com/questions/7549640/reversing-a-hashmap-from-mapstring-boolean-to-mapboolean-liststring)以及其他一些链接，还尝试实现一些用于反转的基本代码

```
Set<String> userid = new HashSet<String>();
Map<String, Set<String>> returnvalue = new HashMap<String, Set<String>>();
HashMap<String, String> userReason = convertForReason();
for (Entry<String, String> entry : userReason.entrySet()) {
    userid.add(entry.getKey());
} 
```

但我被困在如何创建新地图上`<String. Set<String>>`，有什么想法可以实现吗？或此类问题的其他解决方案？

更新：

好吧，这是我为自己的问题找到的：

Map>returnValue = new HashMap>(); HashSet reasonSet = new HashSet();

```
 for(String userId : userData.keySet()){
        UserObject obj = userData.get(userId);
        String location = obj.getLocation();
        String username = obj.getUserid(); 
        if(returnValue.get(location)==null){
            reasonSet = new HashSet<String>();
            reasonSet.add(username);
            returnValue.put(reason, reasonSet);
        }else{
            HashSet<String> tmp = returnValue.get(location); 
            tmp.add(username);
            returnValue.put(location, tmp);
        } 
```

感谢 Byter 给了我洞察力和更好的想法来解决这个问题 :) 我不太确定如果尺寸太大会如何影响性能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:14:29.907

假设您将位置作为用户数据，并且您希望给定位置的不同用户...

```
 Map<String, Set<String>> returnvalue = new HashMap<String, Set<String>>();
    Map<String, UserObject> userData = getUserData();

    for (String userId : userData.keySet()) {
        UserObject obj = userData.get(userId);
        String location = obj.getLocation();
        Set<String> usersInGivenLocation = returnvalue.get(location);
        if(usersInGivenLocation == null) {
           usersInGivenLocation = new HashSet<String>();
           returnvalue.put(userId,usersInGivenLocation);
        }
        usersInGivenLocation.add(userId);
    } 
```

我希望这是你想要的...

# c# - 计算机本地化 process.Start() 故障？

> ID：11734061
> 
> 赞同：0
> 
> 时间：2012-07-31T06:02:15.773
> 
> 标签：c#, process

我在 c# 中遇到有关进程类的问题，特别是在尝试启动命令提示符时。发生的情况是无限数量的 cmd 窗口打开，然后无限关闭，就像陷入循环一样，尽管事实上没有；它在运行时确实冻结了我的计算机。然而，这只发生在我的 64 位 vista 上；该代码（我将很快发布）在我的 32 位联想 thinkpad 上运行良好，但我不知道为什么。请注意，标准输出行不是导致问题的原因；我尝试删除它们，但没有运气。任何想法将不胜感激。

```
using System;
using System.Windows.Forms;
using System.Diagnostics;

public class BuildByteArray
{

    public static void Main()
    {

        Process process = new Process();
        ProcessStartInfo startInfo = new ProcessStartInfo();
        startInfo.UseShellExecute = false;
        startInfo.RedirectStandardOutput = true;
        startInfo.WindowStyle = ProcessWindowStyle.Hidden;
        startInfo.FileName = "cmd.exe";
        startInfo.Arguments = "/c ipconfig";
        MessageBox.Show("");
        process.StartInfo = startInfo;

        process.Start();
        string output = process.StandardOutput.ReadToEnd();
        MessageBox.Show(output);
        process.WaitForExit();

    }
} 
```

# firefox - Firefox 在重新启动浏览器时已经运行消息

> ID：11734062
> 
> 赞同：0
> 
> 时间：2012-07-31T06:02:19.413
> 
> 标签：firefox, process, crash

在使用特定的 Web 应用程序并关闭浏览器后，我遇到了 Firefox 的问题。当我在退出时再次使用浏览器时，它显示“firefox 已在运行”警报消息。除非我终止该进程，否则无法再次打开浏览器。在 Web 应用程序中，我们通过 AJAX 执行后台进程以获取某些内容。是不是因为这些进程仍然在后台运行，这会阻止浏览器再次打开。？任何人都可以建议在浏览器退出时终止后台进程或为此的具体原因以及这方面的可能解决方案。

# android - 安卓解析

> ID：11734068
> 
> 赞同：0
> 
> 时间：2012-07-31T06:02:32.337
> 
> 标签：android, xml, xml-parsing

这是我的 XML：

```
<STATE sname="AndhraPradesh" >
    <DISTRICT dname="Ananthapur" >
        <address>
            Apollo Pharmacy, ANANTHAPUR (0.0 km)
            D.NO.15/545, NEAR SAPTHAGIRI CIRCLE ANANTHAPUR, Rayalaseema, ANANTHAPUR, ANATHAPUR , ANDHRA PRADESH
        </address>
    </DISTRICT>

    <DISTRICT dname="Kurnool" >
        <address>
            Apollo Pharmacy, KURNOOL (0.0 km)
            municipal no. D No: 46/697-A, Budwarpeta, KURNOOL, KURNOOL, ANDHRA PRADESH
        </address>
        <address>
            Apollo Pharmacy, KURNOOL 2 (0.0 km)
            1-155, Rayalaseema, KURNOOL 2, KURNOOL, ANDHRA PRADESH
        </address>
    </DISTRICT>

    <DISTRICT dname="EastGodawari" >

        <address>
            Apollo Pharmacy, VENKATESWAR COLONY (MAHABUB NAGAR) (0.0 km)
            D.No.7-4-58/A, Main Road Opp:A.P.S.E.B.Buliding, Mahabub, VENKATESWAR COLONY (MAHABUB NAGAR), HYDERABAD, ANDRA PRADESH
        </address>
        <address>
            Apollo Pharmacy, MAHABOOBNAGAR (0.0 km)
            1-5-35/6, Beside Andhrabank ATM, Mahaboobnagar, Telangana, MAHABOOBNAGAR, HYDERABAD, ANDHRA PRADESH
        </address>
        <address>
            Apollo Pharmacy, METTUGUDA - MAHABOOBANAGAR - 2 (0.0 km)
            1-4-30/D/B, Mahaboobnagar, METTUGUDA - MAHABOOBANAGAR - 2, HYDERABAD, ANDHRA PRADESH
        </address>
    </DISTRICT>

</STATE>

 <STATE sname="AndhraPradesh1111" >
    <DISTRICT dname="Ananthapur1111" >
        <address>
            Apollo Pharmacy, ANANTHAPUR (0.0 km)
        </address>
    </DISTRICT>

    <DISTRICT dname="Kurnool1111" >
        <address>
            Apollo Pharmacy, KURNOOL (0.0 km)
        </address>
        <address>
            Apollo Pharmacy, KURNOOL 2 (0.0 km)
        </address>
    </DISTRICT>

    <DISTRICT dname="EastGodawari1111" >

        <address>
            Apollo Pharmacy, VENKATESWAR COLONY (MAHABUB NAGAR) (0.0 km)
        </address>
        <address>
            Apollo Pharmacy, MAHABOOBNAGAR (0.0 km)
        </address>
        <address>
            Apollo Pharmacy, METTUGUDA - MAHABOOBANAGAR - 2 (0.0 km)
        </address>
    </DISTRICT>

</STATE> 
```

我想在微调器中显示值。当我选择状态时，相关区域必须加载到区域微调器中。根据地区微调器，该地区的地址应加载到文本视图中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:39:15.553

使用dom解析 //从/res/raw文件夹中读取myxml.xml文件 InputStream is=getResources().openRawResource(R.raw.country);

```
Log.i("TAG","is value==>"+is);
DocumentBuilder builder=DocumentBuilderFactory.newInstance().newDocumentBuilder();
Document doc=builder.parse(is, null);

//get the root node
NodeList nodeList=doc.getElementsByTagName("STATE sname");

Log.i("TAG","nodeList Length --" + nodeList.getLength()); //output:- -1
Log.i("TAG","nodeList name --" + nodeList.item(0).getNodeName());
//output:- message
for(int j=0; j<nodeList.getLength(); j++) {
Node nodee=nodeList.item(j);
for(int i=0;i<nodee.getChildNodes().getLength();i++)
{
Node node=nodee.getChildNodes().item(i);
if(node.getNodeName().equalsIgnoreCase("STATE sname")){
Log.i("TAG","from node::" + node.getTextContent());

countryname.add(node.getTextContent());
countrySelector.setAdapter(countryname);

countrySelector.setOnItemSelectedListener(this);

}
else if(node.getNodeName().equalsIgnoreCase("DISTRICT dname")){
Log.i("TAG","to node::" + node.getTextContent());
countryid.add(node.getTextContent());
}
}
}

is.close();
}
catch(Exception e){
System.out.println("ERROR while parsing xml:----" + e.getMessage());
} 
```

此解析使用并使用微调器显示值

# sql - 使用 SQL 表管理数据流

> ID：11734069
> 
> 赞同：0
> 
> 时间：2012-07-31T06:02:40.470
> 
> 标签：sql, sql-server, sql-server-2008

我将向 3 个表中插入数据。（根据我的过程。）。但是必须将数据输入到三个表中。否则我想回滚事务。例如：- 如果数据插入到 2 个表中并且没有插入表 3，我想从 2 个表中删除输入的值。

这样做的最佳方法是什么。我可以使用触发器来做到这一点吗？请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T06:15:05.397

你可以试试这个：

```
SET XACT_ABORT ON
 BEGIN TRY
BEGIN TRAN
INSERT INTO Table1 values ()
INSERT INTO Table2 values ()
INSERT INTO Table3 values ()
COMMIT TRAN
END TRY

BEGIN CATCH 
raiserror('Custome Error Message ',16,20)
END CATCH
SET XACT_ABORT OFF 
```

使用 SET XACT_ABORT ON，如果 Transact-SQL 语句引发运行时错误，则整个事务将终止并回滚

在 catch 块中，您可以引发自定义错误或将其记录到表中

```
 Begin CATCH
 Insert into #LogError values (1,'Error while inserting a duplicate value')
 if @@TRANCOUNT >0
 rollback tran 
 END CATCH 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:05:32.967

采用`transactions`

```
Commit tran -- if success
Rollback tran -- on error 
```

像这样的东西

```
Create Proc YourSPName
AS

BEGIN TRAN

INSERT INTO TableOne ( -- Columns)
VALUES  ( -- Values)

IF (@@ERROR <> 0) goto Truncater;

INSERT INTO TableTwo ( -- Columns)
VALUES  ( -- Values)

IF (@@ERROR <> 0) goto Truncater;

INSERT INTO TableThree ( -- Columns)
VALUES  ( -- Values)

IF (@@ERROR <> 0) goto Truncater;

Truncater:
if(@@ERROR<>0)
begin
    rollback tran
    return -1 -- error flag
end
else
    commit tran   

 GO 
```

更多信息请[点击此处](http://www.sqlteam.com/article/introduction-to-transactions)。

# android - 如何在我的 ant 构建中覆盖 libs/ 作为我的 Android 3rd 方库的位置？

> ID：11734071
> 
> 赞同：0
> 
> 时间：2012-07-31T06:02:48.507
> 
> 标签：android, ant

如果我将我的 3rd 方 jar 放在 libs/ 中，那么我可以使用 ant 构建我的项目。但是，我不知道如何将该位置更改为其他位置。例如，如果我将 jars 放在 libs/main 中，我无法让我的构建找到它们。我没有运气尝试过以下属性：

*   `jar.libs.dir=libs/main`
*   `external.libs.dir=libs/main`

我尝试将它们放在 xml 和`ant.properties`文件中，但没有成功。我可以设置什么属性来覆盖 libs 目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:46:24.393

如果您因为 Ant 插件任务不工作而询问：
用于`ANT_ARGS`该目的，即在其中使用批处理文件/shellscript 来运行您的 ant 脚本，
[请参阅该答案以获取更多详细信息](https://stackoverflow.com/a/5291692/130683)。
否则，如果源编译失败，请使用`<javac>`嵌套`<classpath>`：

```
<javac ...>
  <classpath>
    <pathelement location="lib/"/>
    <pathelement path=".../"/>
  </classpath>
</javac> 
```

这里的例子 => [http://ant.apache.org/manual/using.html](http://ant.apache.org/manual/using.html)
和这里 => [https://stackoverflow.com/a/722787/130683](https://stackoverflow.com/a/722787/130683)

# .net - 如何使用参数制作简单的异步包装器

> ID：11734075
> 
> 赞同：0
> 
> 时间：2012-07-31T06:03:14.127
> 
> 标签：.net, vb.net, visual-studio-2012, async-await

我想将一个现有的 Forms 项目引入 VS2012 RC，并在一些长过程中添加一些快速的 Async/Await 包装器。我想在`Async`不更改原始程序的情况下将现有程序包装在等效程序中。

到目前为止，我已经取得了这样的成功：

```
'old synchronous function:
Public Function UpdateEverything() As Boolean
    'Do lots of predictable updates
    ...
    Return True
End Function

'new asynchronous wrapper:
Public Async Function UpdateEverythingAsync() As Task(Of Boolean)
    Return Await Task.Run(AddressOf Me.UpdateEverything)
End Function 
```

但这仅有效，因为`UpdateEverything`没有参数。如果原始函数有任何参数，我无法计算出语法。例如，如果我有：

```
'old synchronous function:
Public Function UpdateSomething(somethingID As Integer) As Boolean
    'Do updates
    ...
    Return True
End Function 
```

我以为会是：

```
Public Async Function UpdateSomethingAsync(somethingID As Integer) As Task(Of Boolean)
    Return Await Task.Run(Of Boolean)(New Func(Of Integer, Boolean)(AddressOf Me.UpdateSomething))
End Function 
```

但显然不是那么简单。有没有一种简单的方法可以在不重构原始文件的情况下将其包装在 Async 等效项中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:59:27.937

```
Public Async Function UpdateSomethingAsync(somethingID As Integer) As Task(Of Boolean)
    Return Await Task.Run(Of Boolean)(New Func(Of Integer, Boolean)(AddressOf Me.UpdateSomething))
End Function 
```

这个方法有些奇怪：你期望`UpdateSomething()`方法接收`somethingID`参数，但你从来没有将它传递给它。您不能`UpdateSomething`在此处直接用作委托，但可以使用 lambda：

```
Public Async Function UpdateSomethingAsync(somethingID As Integer) As Task(Of Boolean)
    Return Await Task.Run(Of Boolean)(Function() (UpdateSomething(somethingID)))
End Function 
```

虽然这里不需要`Async`，但可以通过直接返回`Task`：

```
Public Function UpdateSomethingAsync(somethingID As Integer) As Task(Of Boolean)
    Return Task.Run(Of Boolean)(Function() (UpdateSomething(somethingID)))
End Function 
```

话虽如此，我同意[我之前链接的 Stephen Toub 文章](http://blogs.msdn.com/b/pfxteam/archive/2012/03/24/10287244.aspx)：不要这样做，它只会让你的用户感到困惑，如果他们需要的话，他们可以自己做。

# php - 尝试登录 joomla 时出错

> ID：11734078
> 
> 赞同：2
> 
> 时间：2012-07-31T06:03:20.627
> 
> 标签：php, joomla

如果我输入了错误的凭据，我会在登录时遇到错误。错误是：`500-An error has occurred`。当我输入错误的用户名和密码而不是在 joomla 管理员登录页面上显示错误消息时，它会将我重定向到显示上述错误的新页面。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:08:28.873

尝试以下操作：

更改您的文件夹权限`777`。以及在文件夹`cache`、`logs`和. 里面找代码： `tmp``administrator/cache``configration.php`

```
$log_path = ' something ';
$tmp_path = ' something '; 
```

更改代码

```
$log_path = './logs';
$tmp_path = './tmp'; 
```

这应该有助于解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:10:13.557

检查您的错误日志以获取有关它可能发生的位置的任何线索。这可能是由几个项目引起的。如果您为 URL 重写启用了 SEF 和附加后缀，您需要在`.htaccess`文件中取消注释以下内容：

```
RewriteBase / 
```

其次，如果您可以将文件夹权限更改`775`为以下文件夹：

> 缓存、日志、tmp 和管理员/缓存

然后转到：`configuration.php`

查找代码：

```
$log_path = 'XXXXXXXXXXXXX';
$tmp_path = 'XXXXXXXXXXXXX'; 
```

并将代码更改为：

```
$log_path = './logs';
$tmp_path = './tmp'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-15T10:27:22.007

Joomla 论坛上到处都建议设置日志文件和目录的权限。这对我根本不起作用。但我跟踪执行代码，发现客户端上的 500 服务器错误（在我的站点登录过程由 mootools ajax 调用）之后是由 Joomla 显示 404 错误页面，在`/joomla/error/error.php` `customErrorPage`方法中调用。我不知道为什么 404 页面会在错误的凭据上回显。`customErrorPage`所以我只是通过在它前面`/plugins/system/logout/logout.php`加上`if ($error->getCode() == 102001) return;`line来设置不调用。“102001”是“错误凭据”错误。因此，这意味着“使用错误凭据时不显示 404 错误”。可能它不是最好的解决方案并且它依赖于站点，我稍后会找到一个最好的解决方案。但希望这可以帮助某人。

# ios - XML解析使用TBXML需要在IOS中处理Network Time out？

> ID：11734079
> 
> 赞同：1
> 
> 时间：2012-07-31T06:03:22.173
> 
> 标签：ios, xml, xml-parsing, tbxml

目前通过 initwithURL 方法直接使用 TBXML 解析远程内容。但是在解析数据时，如果发生网络超时，解析会中间停止。不知道如何处理这种情况，同时没有委托人会打电话。

如果有人知道解决方案，请帮助我。

注意：XML 内容非常大，大约有 50 万条数据，解析也发生在后台线程中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:19:42.600

为什么不使用`NSURLConnection`下载xml数据然后使用

```
TBXML * tbxml = [[TBXML tbxmlWithXMLData:myXMLData] retain]; 
```

# actionscript-3 - TypeError #1007 尝试对数组中的非构造函数进行实例化

> ID：11734083
> 
> 赞同：0
> 
> 时间：2012-07-31T06:03:29.600
> 
> 标签：actionscript-3, flash

我正在尝试制作一个横向滚动射击游戏，并使用代码而不是放置来生成所有敌人，我一直遇到：

> TypeError：错误＃1007：尝试在非构造函数上进行实例化。

相关代码：

```
tanktimer++;
var n:MovieClip;        
var lv1arr:Array = [24,120,144,264,288,384,408,432,480];                        
var lv1Tarr:Array = ['Tank(1)','Tank(1)','Tank(2)','Tank(1)','Tank(2)','Tank(3)','Tank(1)','Tank(2)','Tank(3)'];

if(tanktimer == lv1arr[we])
{
    trace('work darn you!');
    n = new lv1Tarr[we];
    n.x = 700;
    n.y = 550;
    addChild(n);
    trace('build');
    we++;
} 
```

var 'we' 和 tanktimer 一样在顶部定义为 Number=0。

我认为应该发生的是 tanktimer 从 0 计数到 24，然后它将等于 lv1arr 中的第一个值，此时它将构建 lv1Tarr 中的第一个项目。

我很确定问题是：

```
n = new lv1Tarr[we]; 
```

随着代码到达那里，然后给出错误并且不生成坦克。但是如果我删除 lv1Tarr[we] 并用 Tank(1) 替换它，它工作得很好，所以很明显 Flash 不希望我以这种方式使用数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:13:40.423

您需要创建 tank 实例并将它们放入数组中，然后通过从数组中拉出它们来引用它们（我假设这里的“我们”在范围内）。简单地拥有一个字符串数组，然后尝试在它们上调用 new 是行不通的，这与以下内容相同：

新的“坦克（1）”

这不是有效的构造函数调用

```
tanktimer++;
var n:MovieClip;        
var lv1arr:Array = [24,120,144,264,288,384,408,432,480];                       
var tank1:Tank = new Tank(1);
var tank2:Tank = new Tank(2);
var tank3:Tank = new Tank(3); 
var lv1Tarr:Array = [tank1,tank1,tank2,tank1,tank2,tank3,tank1,tank2,tank3];

if(tanktimer == lv1arr[we])
{
    trace('work darn you!');
    n = lv1Tarr[we]; //<-- this is not a constructor call if you have strings
    n.x = 700;
    n.y = 550;
    addChild(n);
    trace('build');
    we++;
} 
```

相反，如果您想包含类和构造函数 arg，您可以这样做（基于 terbooter 的回答 +1ed）：

```
var classesArray:Array = [{clazz:Tank,arg:1}, {clazz:Tank, arg:1}, {clazz:Tank, arg:2}];
for (var i:int=0; i<classesArray.length; i++){
    var clazz:Class =  classesArray[i].clazz as Class;
    var object:Object = new clazz(classesArray[i].arg);    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:15:36.540

您正在尝试实例化一个字符串`'Tank(1)'`，它没有将构造函数调用到`Tank`类。ActionScript 3 没有`eval()`那个调用函数。

这可以通过定义要调用的函数数组来实现：

```
var lv1Tarr:Array = [
    function():MovieClip {return new Tank(1)},
    function():MovieClip {return new Tank(1)},
    function():MovieClip {return new Tank(2)},
    function():MovieClip {return new Tank(1)},
    function():MovieClip {return new Tank(3)}
    ]; 
```

然后您可以致电：

```
var n:Tank = new lv1Tarr[we]; 
```

或者更恰当地说：

```
var n:Tank = lv1Tarr[we].call(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T06:16:26.707

您的数组必须包含类对象。但现在它包含字符串。查看快速示例如何从数组中描述的类中实例化对象

```
import flash.display.Sprite;

var classesArray:Array = [Sprite, Sprite, MovieClip];
for (var i:int=0; i<classesArray.length; i++){
    var clazz:Class =  classesArray[i] as Class;
    var object:Object = new clazz();    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T06:11:18.123

问题（我相信）`we`不限于 的长度`lv1Tarr`，因此最终`lv1Tarr[we]`评估为`null`。

这就是为什么你在使用时没有问题的原因`Tank(1)`。

尝试`we`像这样递增：

```
++we;
we %= lv1arr.length(); 
```

这样，`we`不超过数组的长度。

# java - 如何在java中解压缩不是UTF8格式的文件

> ID：11734084
> 
> 赞同：4
> 
> 时间：2012-07-31T06:03:32.077
> 
> 标签：java

我有一个文件，例如 test.zip。如果我使用像 winrar 这样的 ZIP 工具，它很容易提取（将 test.zip 解压缩到 test.csv）。但 test.csv 不是 UTF8 格式。我的问题是，当我使用java解压缩它时，它无法读取这个文件。

```
ZipFile zf = new ZipFile("C:/test.zip"); 
```

抛出的异常表示打开该文件时发生错误。

在 java [http://java.sun.com/developer/technicalArticles/Programming/compression/](http://java.sun.com/developer/technicalArticles/Programming/compression/)上没有任何关于数据格式的文章。也许整个 API 只为 UTF8 格式的数据而设计。那么，如果我必须解压缩除 UTF8 格式以外的数据，如何解压缩呢？尤其是空间大小更大的日文和中文字符（UTF8 除外）。我还在 [http://truezip.java.net/6/tutorial.html](http://truezip.java.net/6/tutorial.html)找到了一个 API，其中提到了这个问题。但是，我没有办法解决它。有什么简单的方法可以解决这个问题吗？尤其是从 JAVA 规范请求传递的 API。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-11T15:39:38.480

JDK6 在 java.util.zip 实现中有一个错误，它无法处理非 USASCII 字符。我使用 Apache Commons commons-compress-1.0.jar 库来修复它。JDK7 已修复 java.util.zip 实现。 [http://docs.oracle.com/javase/7/docs/api/java/util/zip/ZipInputStream.html](http://docs.oracle.com/javase/7/docs/api/java/util/zip/ZipInputStream.html)

```
import java.io.*;
import org.apache.commons.compress.archivers.ArchiveEntry;
import org.apache.commons.compress.archivers.zip.*;

public static int unzip(File inputZip, File outputFolder) throws IOException {
    int count=0;
    FileInputStream fis = null;
    ZipArchiveInputStream zis = null;
    FileOutputStream fos = null;
    try {
        byte[] buffer = new byte[8192];
        fis = new FileInputStream(inputZip);
        zis = new ZipArchiveInputStream(fis, "Cp1252", true); // this supports non-USACII names
        ArchiveEntry entry;
        while ((entry = zis.getNextEntry()) != null) {
            File file = new File(outputFolder, entry.getName());
            if (entry.isDirectory()) {
                file.mkdirs();
            } else {
                count++;
                file.getParentFile().mkdirs();
                fos = new FileOutputStream(file);
                int read;
                while ((read = zis.read(buffer,0,buffer.length)) != -1)
                    fos.write(buffer,0,read);
                fos.close();
                fos=null;
            }
        }
    } finally {
        try { zis.close(); } catch (Exception e) { }
        try { fis.close(); } catch (Exception e) { }
        try { if (fos!=null) fos.close(); } catch (Exception e) { }
    }
    return count;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T06:06:28.553

不，zip 文件*不仅*适用于 UTF-8 数据。Zip 文件根本不会尝试解释文件中的数据，Java API 也不会。

文件的非 ASCII*名称*可能存在问题，但文件内容本身根本不应该是问题。在您的情况下，文件的名称看起来只是`test.zip`，因此您不应该遇到任何名称编码问题。

如果文件无法*打开*，那么听起来您遇到了不同的问题。您确定该文件存在于您期望的位置吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T11:14:42.053

你可以试试下面的代码吗？有关更多示例，请在此处查看[http://java2novice.com/java-collections-and-util/zip/unzip/](http://java2novice.com/java-collections-and-util/zip/unzip/)

```
FileInputStream fis = null;
    ZipInputStream zipIs = null;
    ZipEntry zEntry = null;
    try {
        fis = new FileInputStream(filePath);
        zipIs = new ZipInputStream(new BufferedInputStream(fis));
        while((zEntry = zipIs.getNextEntry()) != null){
            try{
                byte[] tmp = new byte[4*1024];
                FileOutputStream fos = null;
                String opFilePath = "C:/"+zEntry.getName();
                System.out.println("Extracting file to "+opFilePath);
                fos = new FileOutputStream(opFilePath);
                int size = 0;
                while((size = zipIs.read(tmp)) != -1){
                    fos.write(tmp, 0 , size);
                }
                fos.flush();
                fos.close();
            } catch(Exception ex){

            }
        }
        zipIs.close();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T19:13:49.543

试试这个我用来提取所有 zip 文件的代码

```
try
    {

        final ZipFile zf = new ZipFile("C:/Documents and Settings/satheesh/Desktop/POTL.Zip");

        final Enumeration<? extends ZipEntry> entries = zf.entries();
        ZipInputStream zipInput = null;

        while (entries.hasMoreElements())
        {
            final ZipEntry zipEntry=entries.nextElement();
            final String fileName = zipEntry.getName();
        // zipInput = new ZipInputStream(new FileInputStream(fileName));
            InputStream inputs=zf.getInputStream(zipEntry);
            //  final RandomAccessFile br = new RandomAccessFile(fileName, "r");
                BufferedReader br = new BufferedReader(new InputStreamReader(inputs, "UTF-8"));
                FileWriter fr=new FileWriter(f2);
            BufferedWriter wr=new BufferedWriter(new FileWriter(f2) );

            while((line = br.readLine()) != null)
            {
                wr.write(line);
                System.out.println(line);
                wr.newLine();
                wr.flush();
            }
            br.close();
            zipInput.closeEntry();
        }

    }
    catch(Exception e)
    {
        System.out.print(e);
    }
    finally
    {
        System.out.println("\n\n\nThe had been extracted successfully");

    } 
```

这段代码真的很适合我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T06:29:23.363

我记得只有当文件名没有以 UTF8 编码时才会发生这种情况。

如果不禁止第三个组件，请尝试使用 Apache Zip API。

导入 org.apache.tools.zip.ZipEntry；导入 org.apache.tools.zip.ZipFile；

# c++ - 在 Visual Studio 2010 自定义操作项目中使用标题时出错

> ID：11734091
> 
> 赞同：1
> 
> 时间：2012-07-31T06:04:13.147
> 
> 标签：c++, visual-studio-2010, compiler-errors, custom-action

我在 vs 2010 中有一个自定义操作项目，当我尝试将标题添加为：

```
#include "wx/wxprec.h"
#include "wx/wx.h"
#include "wx/string.h"
#include "wx/tokenzr.h" 
```

并编译它，出现以下错误：

```
 Error  12  error LNK2019: unresolved external symbol "public: void __thiscall wxStringData::Free(void)" (?Free@wxStringData@@QAEXXZ) referenced in function "public: void __thiscall wxStringData::Unlock(void)" (?Unlock@wxStringData@@QAEXXZ)    C:\MSIvalidate\Samples\Source Code\MSISerialValidateSample\MSISerialValidateSample\MSISerialValidateSample.obj  MSISerialValidateSample

Error   13  error LNK1120: 1 unresolved externals   C:\MSIvalidate\Samples\Source Code\MSISerialValidateSample\MSISerialValidateSample\Debug\MSISerialValidateSample.dll    MSISerialValidateSample 
```

谢谢

# java - hawtdispatch：一个简单的线程池示例

> ID：11734101
> 
> 赞同：1
> 
> 时间：2012-07-31T06:04:49.037
> 
> 标签：java, concurrency

我对 hawtdispatch 很陌生，想运行一个示例程序来演示线程池。以下是我尝试运行的程序：

公共类 DispatchQueueT {

```
public static void main(String[] args) {

    DispatchQueue queue = createQueue("Your queue");

    queue.execute(new Runnable()
        {
            public void run()
            {
                for (int i = 0; i < 100000; i++)
                {
                    System.out.println("First Task"+ "time  "+new Date()+" count : "+i);
                }
            }
        });

} 
```

}

但问题是，它不是打印到控制台 100000 次，而是随机打印 700 或 800 次并且程序停止.. 我不知道如何使用 HawtDispatch 实现这个简单的线程池 .. :(

我也需要知道一些问题的答案

使用 hawtdispatch 时，有什么方法可以知道系统在特定时间使用的线程数？调度队列的内存管理是如何完成的？

请帮忙 ！！

谢谢...里查！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T09:42:16.957

我不知道这个 hawtdipatch 库，但这似乎是守护进程与普通线程的典型问题。

根据 java 规范，当所有非守护线程都终止时，JVM 退出。执行 main() 方法的线程是一个非守护线程，在命令行应用程序中，它也是唯一正在运行的非守护线程。您的 DispatchQueue 很可能会产生守护线程，这些线程不会使应用程序保持活动状态。

结果，JVM 在执行“queue.execute()”调用后很快退出。在 JVM 完全停止之前，DispatchQueue 中的线程可能有时间执行一些循环，但在 JVM 停止所有线程之前它没有时间完成所有 100'000 个循环。

在对 HawtDispatcher 的源代码进行了一番摸索之后，事实证明这确实是问题所在。它位于 SimplePool.createWorker()

```
private SimpleThread createWorker(int index) {
    SimpleThread w;
    try {
        w = new SimpleThread(this);
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
    w.setDaemon(true); // <- That's the one that causes trouble for you
    w.setPriority(priority);
    w.setName(name + "-" + (index+1));
    return w;
} 
```

似乎这种行为也不能轻易改变，因为 HawtDispatch 绝不允许您轻松替换自己的 WorkerPool 实现。

要解决您的问题，您需要等到任务完成执行，您可以通过两种不同的方式完成：

1）。在 queue.execute() 之后添加一个 Thread.sleep() 调用。这很简单，但有点丑陋和脆弱。

2).使用适当的同步工具，如CountDownLatch，适当等待任务终止

```
public static void main(String[] args) throws InterruptedException {
    DispatchQueue queue = createQueue("Your queue");
    final CountDownLatch latch = new CountDownLatch(1);
    queue.execute(new Runnable(){
            public void run(){
                for (int i = 0; i < 100000; i++){
                    System.out.println("First Task"+ "time  "+new Date()+" count : "+i);
                }
                latch.countDown();
            }
        });
    latch.await();
} 
```

# java - 从 Java 访问 Mac OS X 应用程序菜单

> ID：11734104
> 
> 赞同：5
> 
> 时间：2012-07-31T06:05:05.453
> 
> 标签：java, macos, menu

我正在编写一个为所有平台设计的 Java 应用程序，但具体来说，我正在研究 OS X 的外观和集成（我在 MacBook Pro 上使用 NetBeans）。我想访问应用程序的菜单，即以应用程序命名的粗体菜单。我想为 About 和 Quit 项目注册侦听器，并显示 Preferences 项目。我也不介意添加更多我自己的项目。

那么，我该怎么做呢？我看到以前的帖子提到过 OSXAdapter，但 Apple 的天才们决定将它从他们的库中删除（或模糊地重命名），因为所有链接都重定向到主页，而我的所有搜索都没有结果。我还看到了一个[MacOSAppAdapter](http://www.java2s.com/Code/Java/Development-Class/MacOSApplicationAdapter.htm)类，但我不确定如何使用它。所有导入和新的类和层次结构都有些混乱。

编辑：

这就是我为绑定到 About、Preferences 和 Quit 项目所做的工作：

我创建了一个新类 MacOSXAboutHandler，它扩展了

```
com.apple.eawt.Application 
```

它的构造函数只是调用

```
setAboutHandler(AboutHandler aH) 
```

我为它提供了我自己的监听器，它可以扩展

```
AboutHandler 
```

在我的主要课程中，我确定我是否在 Mac 上使用

```
System.getProperty("os.name").contains("mac") 
```

如果这是真的，那么我只需创建一个新的 MacOSXAboutHandler 实例。构造函数添加我的处理程序，并且每当运行应用程序（甚至在 NetBeans 中测试）时，单击应用程序粗体菜单上的 About... 项会执行我在 AboutHandler 中指定的代码。

偏好和退出也是如此，只需将出现的“关于”替换为适当的操作。所有这些处理程序都像任何其他 Java 侦听器一样编写。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T06:20:46.430

您可能想看看[将您的 Java 应用程序带到 Mac OS X](http://www.oracle.com/technetwork/articles/javase/javatomac-140486.html)和（更重要的是）[将您的 Java 应用程序带到 Mac OS X 第 2 部分](http://www.oracle.com/technetwork/articles/javase/javatomac2-138389.html)和[将您的 Java 应用程序带到 Mac OS X 第 3 部分](http://www.oracle.com/technetwork/articles/javase/javatomac3-137430.html "将您的 Java 应用程序带入 Mac OS X 第 3 部分")

您可能会使用[Java System Property Reference for Mac](http://developer.apple.com/library/mac/#documentation/Java/Reference/Java_PropertiesRef/Articles/JavaSystemProperties.html)

您可能想看看[Apple 的 Java 6 Extensions API](https://developer.apple.com/library/mac/documentation/Java/Reference/JavaSE6_AppleExtensionsRef/api/index.html?com/apple/eawt/ApplicationAdapter.html)，从我的简短阅读来看，您基本上想使用默认实例 if [com.apple.eawt.Application](https://developer.apple.com/library/mac/documentation/Java/Reference/JavaSE6_AppleExtensionsRef/api/com/apple/eawt/Application.html)并提供您需要的处理程序（例如`setAboutHandler`）。

您可能还想通读[Mac OS X 上的 Java 关于、退出和首选项菜单项和事件](http://www.devdaily.com/java/java-mac-osx-about-preferences-quit-application-adapter)文章，该文章应该提供更多附加提示。

# ruby-on-rails-3 - 使用 ruby on rails 购物的 Google 内容 API

> ID：11734109
> 
> 赞同：1
> 
> 时间：2012-07-31T06:05:30.553
> 
> 标签：ruby-on-rails-3

我需要开发一个 ruby​​ on rails (rails 3.2) 解决方案来连接 Google content api 进行购物。

我试图在谷歌上搜索，但我找不到任何 rails gem 或任何好的信息如何做到这一点。

任何人都可以对此有所了解吗？

提前非常感谢。

# jquery - 滚动到视口边缘时图像消失

> ID：11734113
> 
> 赞同：3
> 
> 时间：2012-07-31T06:06:18.583
> 
> 标签：jquery, image, parallax

我们中的一些人想知道为什么本教程演示中的图像一触到顶部就会消失 - 在演示中的幻灯片 3 上慢慢滚动：

[http://webdesigntutsplus.s3.amazonaws.com/tuts/338_parallax/src/index.html](http://webdesigntutsplus.s3.amazonaws.com/tuts/338_parallax/src/index.html)

我无法弄清楚。教程在这里： [http ://webdesign.tutsplus.com/tutorials/complete-websites/create-a-parallax-scrolling-website-using-stellar-js/](http://webdesign.tutsplus.com/tutorials/complete-websites/create-a-parallax-scrolling-website-using-stellar-js/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T20:10:47.927

我找到了答案：这是`hideDistantElements`在 stellar.js 中找到的参数。您需要将 0 更改为 1，从而有效地禁用它。

参考： [https ://github.com/markdalgleish/stellar.js/issues/7](https://github.com/markdalgleish/stellar.js/issues/7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:58:25.450

我遇到了同样的问题，为了性能，我不想禁用 hideDistantElements。

我注意到如果我滚动到它们的位置（它们通常会消失的地方）并重新加载页面，这些 div 将保持可见。如果这对您有用，请尝试以隐身模式打开页面，因为问题似乎出在网站的缓存端。

我还将所有名为“scroll”的类的名称更改为唯一的名称，但是我不确定这有什么不同，因为那是我注意到缓存问题的时候。

希望这对任何人都有帮助，至少它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-15T23:57:52.750

我也有这个问题。我注意到滚动元素在特定 div 之后过早地开始消失 - 该 div 与其他 div 之间的区别在于该 div 具有“float: none” css 属性。

尝试添加`float: left`到您正在滚动的 div。

编辑：另外，我发现如果您刷新页面并且您已经滚动到页面的一半，则会发生错误。为了解决这个问题，`responsive: true`在实例化 stellar 时添加参数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-30T16:47:06.210

从作者那里找到了解决方案： [https ://github.com/markdalgleish/stellar.js-site/issues/1](https://github.com/markdalgleish/stellar.js-site/issues/1)

无需隐藏DistantElements。只需在您的 css 或 html 中设置 div/image 的尺寸。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-13T13:43:23.027

设置 div 大小和恒星的选项对我没有帮助。修复`background-attachment:initial;`了用于滚动 div 的问题。

# macos - Simperium 与 OS X 和 NSArrayControllers

> ID：11734118
> 
> 赞同：0
> 
> 时间：2012-07-31T06:06:33.210
> 
> 标签：macos, cocoa-bindings, simperium

我目前正在制作一个使用 simperium 来管理同步的 iOS/OS X 应用程序。如果我按照设置 iOS 的说明进行操作，iOS 设备之间的一切正常。在 OS X 上设置时，我遵循了额外的设置说明，但得到了一些有趣的行为。Simperium 的 NSLogs 说我在 OS X 应用程序中创建的任何内容都由 simperium 管理，但它们没有显示在 simperium 站点的数据浏览器中（因此，没有在 osx 应用程序中创建同步数据）。对于我的 OS X 应用程序，我使用带有可可绑定的表格视图。我的核心数据实体都从 SPManagedObject 正确继承。有什么想法我可能做错了吗？

编辑：如果我打印出 [self.simperium objectsForEntityName@"Name"]，我会得到以下信息：

> “SPManagedObject：0x100245730（实体：名称；id：0x1010471d0 x-coredata://F1A16321-32F4-4B4E-93A6-75B8DD6B1B23/Name/p102；数据：故障）”，“SPManagedObject：0x100255770（实体：名称；id：0x101 名称；id：0x101 x-coredata://F1A16321-32F4-4B4E-93A6-75B8DD6B1B23/Name/p103；数据：故障)"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:38:52.343

未使用自定义子类的实体存在问题。[GitHub 上 Simperium 存储库](https://github.com/Simperium/simperium)的“iosupdate”分支修复了这个问题。此修复程序最终也将移至主分支。

请注意，您粘贴的日志输出看起来正确且符合预期。

# visual-c++ - 在 C++ 中将 4 个字节转换为 DWORD

> ID：11734119
> 
> 赞同：2
> 
> 时间：2012-07-31T06:06:37.727
> 
> 标签：visual-c++, registry, timestamp, typeconverter

我有一个指向字节的指针，它实际上指向 4 个字节的数组（由 RegQueryValueEx 创建）。
我想将这 4 个字节转换为一个 DWORD。
虽然看起来很简单，而且肯定有现成的方法可以做到，但我没有成功找到它。

或者：注册值是一个时间戳。有没有一种方法可以将代表时间戳的 4 字节数组转换为字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T06:43:55.773

您是在询问如何获取四个字节的数组并将其转换为 32 位值，对吗？它实际上非常简单（假设您认为按位运算符很简单）：

```
typedef unsigned int dword;
typedef unsigned char byte;

//Convert an array of four bytes into a 32-bit integer.
dword getDwordFromBytes(byte *b)
{
    return (b[0]) | (b[1] << 8) | (b[2] << 16) | (b[3] << 24);
} 
```

这假设您的整数是小端存储的。这意味着首先存储最低有效字节，因此如果您有一个字 0x1234，它将按顺序存储在内存中作为两个字节 0x34、0x12。

在 big-endian 中，数字 0x1234 将作为 0x12、0x34 存储在内存中。如果这就是你想要的，那么只需反转数组索引，即从`b[3]`to `b[0]`。

**陷阱警告：**
以下代码是完全合法的 C 代码，即编译时不会出错：

```
char c[4];
int x = *((int *)c); 
```

但是，这基本上是通过将 a 强制转换`char *`为 an`int *`并取消引用它来工作的。这被认为是非常糟糕的做法，因为它引入了以下可移植性问题：

*   字节顺序，上面解释过。不同的处理器架构以不同的方式存储字。例如，x86 处理器是 little-endian，而 PowerPC 是 big-endian。上述结构对处理器如何解释 4 字节值做出了假设。
*   内存对齐问题。一些体系结构需要对齐字访问。也就是说，多字节内存访问的地址必须是字长的倍数。上面的代码可以在 x86 上工作，它允许未对齐的访问，但是像 68000 这样的其他架构会阻塞并给出总线错误。
    保证 C 中的变量针对该大小正确对齐；这意味着如果 an`int`是 32 位，那么如果目标系统需要，编译器必须保证对齐。`char[4]`不保证A对齐到 4 个字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:40:00.207

查看 MAKEWORD MAKELONG 宏。

# android - 如何在网格视图中在每个图像下方设置有关产品名称的文本字段

> ID：11734120
> 
> 赞同：2
> 
> 时间：2012-07-31T06:06:43.560
> 
> 标签：android

* ***如何在网格视图中设置每个图像下方的文本**

> > 当我单击此文本时，我想在每个图像下方设置有关产品名称的文本，以便它转到完整图像一个活动请帮助我。这是我的代码

## 这是我的 Android Grid Activity 代码

```
package com.a.test;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.GridView;

public class AndroidGridActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.gridview);

GridView gridView = (GridView) findViewById(R.id.grid_view);

// Instance of ImageAdapter Class
gridView.setAdapter(new ImageAdapter(this));
/**
* On Click event for Single Gridview Item
     * */
gridView.setOnItemClickListener(new OnItemClickListener() {

public void onItemClick(AdapterView<?> parent, View v,
int position, long id) {

// Sending image id to FullScreenActivity
Intent i = new Intent(getApplicationContext(), FullImageActivity.class);
// passing array index
i.putExtra("id", position);
startActivity(i);
}
});
gridView.setOnItemClickListener(new OnItemClickListener() {

public void onItemClick(AdapterView<?> parent, View v,
int position, long id) {

// Sending text id to FullScreenActivity
Intent i = new Intent(getApplicationContext(),  FullImageActivity.class);
// passing array index
i.putExtra("id", position);
startActivity(i);
}
});
}
}` 
```

* * *

这是android网格视图活动的布局文件

```
<TextView android:id="@+id/chooseText"
android:layout_height="wrap_content"
android:layout_width="85dp"
android:text="TextView"
android:layout_below="@+id/chooseImage"
android:gravity="center"
android:singleLine="true"
android:ellipsize="marquee"
android:marqueeRepeatLimit="marquee_forever"
android:textColor="#3232FF">
</TextView>
<GridView 
android:id="@+id/grid_view"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:numColumns="auto_fit"
android:columnWidth="90dp"
android:horizontalSpacing="10dp"
android:verticalSpacing="10dp"
android:gravity="center"
android:stretchMode="columnWidth" 
android:background="#0000FF">  

</GridView>
</RelativeLayout> 
```

* * *

这是我的完整图像类
包 com.example.androidhive；

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.ImageView;

public class FullImageActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.full_image);

// get intent data
Intent i = getIntent();
// Selected image id
int position = i.getExtras().getInt("id");
ImageAdapter imageAdapter = new ImageAdapter(this);

ImageView imageView = (ImageView) findViewById(R.id.full_image_view);
imageView.setImageResource(imageAdapter.mThumbIds[position]);

// get intent data
Intent in = getIntent();

// Selected text id
int positiont = in.getExtras().getInt("id");
ImageAdapter imageAdaptert = new ImageAdapter(this);

TextView txtView = (TextView) findViewById(R.id.fulltext);
txtView.setText(imageAdapter.mThumbTxt[position]);
}

} 
```

* * *

它是一个完整的图像布局代码

```
<ImageView android:id="@+id/full_image_view"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_gravity="center"/>
<TextView
android:id="@+id/fulltext"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:gravity="center"
android:textColor="#000000" />

</LinearLayout> 
```

* * *

其图像适配器类
包com.example.androidhive；

```
import android.content.Context;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.RelativeLayout;
import android.widget.TextView;

public class ImageAdapter extends BaseAdapter {
private Context mContext;

// Keep all Images in array
public Integer[] mThumbIds = {
R.drawable.pic_1, R.drawable.pic_2,
R.drawable.pic_3, R.drawable.pic_4,
R.drawable.pic_5, R.drawable.pic_6,
R.drawable.pic_7, R.drawable.pic_8,
R.drawable.pic_9, R.drawable.pic_10,
R.drawable.pic_11, R.drawable.pic_12,
R.drawable.pic_13, R.drawable.pic_14,

};

// Constructor
public ImageAdapter(Context c){
mContext = c;
}

public int getCount() {
return mThumbIds.length;
}

public Object getItem(int position) {
return null;
}

public long getItemId(int position) {
return 0;
}

// create a new ImageView for each item referenced by the Adapter
public View getView(int position, View convertView, ViewGroup parent) {
ImageView imageView;

if (convertView == null) {  // if it's not recycled, initialize some attributes
imageView = new ImageView(mContext);
imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
imageView.setPadding(8, 8, 8, 8);
} else {
imageView = (ImageView) convertView;
}

imageView.setImageResource(mThumbIds[position]);
return imageView;
}

public String[] mThumbTxt = {
"Müzeler", "Anıtlar", "İbadethaneler",   "Hepsi","iqra","rafia","sana","sobia","amna","aisha","asma","asna","urosa","asnam"
};
public View getView1(int position, View convertView, ViewGroup arg2) {
View view = View.inflate(mContext, R.layout.gridview, null);
RelativeLayout rl = (RelativeLayout) view.findViewById(R.id.relaGrid);

ImageView image = (ImageView) rl.findViewById(R.id.chooseImage);
TextView text = (TextView) rl.findViewById(R.id.chooseText);       
image.setImageResource(mThumbIds[position]);
text.setText(mThumbTxt[position]);
return rl;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:16:53.537

参考下面的代码

```
 GridView sdcardImages = (GridView) findViewById(R.id.sdcard);
        sdcardImages.setAdapter(new ImageAdapter(myImages, myViews));
        sdcardImages.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView parent, View v,
                    int position, long id) {
                Intent i = new Intent(EquipmentViews.this, VIRDemo.class);
                i.putExtra("EquipmentId", equipmentIds[position]);
                startActivity(i);

            }
        }); 
```

然后创建适配器

```
private class ImageAdapter extends BaseAdapter {

    private int[] myRemoteImages;
    private String[] myRemoteViews;

    public ImageAdapter(int[] myimages, String[] myviews) {
        myRemoteImages = myimages;
        myRemoteViews = myviews;
    }

    public int getCount() {
        return this.myRemoteImages.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        View v;
        if (convertView == null) {
            LayoutInflater li = getLayoutInflater();
            v = li.inflate(R.layout.imageitem, null);
            TextView tv = (TextView) v.findViewById(R.id.icon_text);
            tv.setText(myRemoteViews[position]);
            ImageView iv = (ImageView) v.findViewById(R.id.icon_image);
            iv.setImageResource(myRemoteImages[position]);

        } else {
            v = convertView;
        }
        return v;
    }
} 
```

XML 文件 imageitem.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content" android:layout_height="wrap_content"
    android:orientation="vertical" android:gravity="center_horizontal" >

    <ImageView android:id="@+id/icon_image" android:layout_width="200dp"
        android:layout_height="150dp">
    </ImageView>
    <TextView android:id="@+id/icon_text" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:text="TextView"
        android:gravity="center_horizontal" android:textColorHighlight="#656565">
    </TextView>
</LinearLayout> 
```

# android - 我可以在下一个活动中将字符串值从 MulitiColumn listView 存储到 Simple ListView 吗？

> ID：11734123
> 
> 赞同：5
> 
> 时间：2012-07-31T06:07:12.840
> 
> 标签：android, android-listview

**如何从具有两列的自定义 ListView 中获取值到下一个 Activity 中的 Simple ListView。我有 select1 和 select2 String[] 变量。Myval 是全局变量。我有以下例外 ***

logcat 中的异常：

```
 07-31 10:37:55.470: E/AndroidRuntime(974): FATAL EXCEPTION: main
    07-31 10:37:55.470: E/AndroidRuntime(974): java.lang.NullPointerException
    07-31 10:37:55.470: E/AndroidRuntime(974):  at                android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:394)
     07-31 10:37:55.470: E/AndroidRuntime(974):     at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.widget.AbsListView.obtainView(AbsListView.java:2033)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.widget.ListView.makeAndAddView(ListView.java:1772)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.widget.ListView.fillDown(ListView.java:672)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.widget.ListView.fillFromTop(ListView.java:732)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.widget.ListView.layoutChildren(ListView.java:1625)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.widget.AbsListView.onLayout(AbsListView.java:1863)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.view.View.layout(View.java:11278)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.view.ViewGroup.layout(ViewGroup.java:4224)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.view.View.layout(View.java:11278)
     07-31 10:37:55.470: E/AndroidRuntime(974):     at android.view.ViewGroup.layout(ViewGroup.java:4224)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.view.View.layout(View.java:11278)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.view.ViewGroup.layout(ViewGroup.java:4224)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.view.View.layout(View.java:11278)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.view.ViewGroup.layout(ViewGroup.java:4224)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.view.View.layout(View.java:11278)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.view.ViewGroup.layout(ViewGroup.java:4224)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1489)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.os.Handler.dispatchMessage(Handler.java:99)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.os.Looper.loop(Looper.java:137)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at android.app.ActivityThread.main(ActivityThread.java:4424)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at java.lang.reflect.Method.invokeNative(Native Method)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at java.lang.reflect.Method.invoke(Method.java:511)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    07-31 10:37:55.470: E/AndroidRuntime(974):  at dalvik.system.NativeStart.main(Native Method) 
```

从 Spinner 获取值：

```
 public void onItemSelected(AdapterView<?> parent, View arg1, int pos,long id) {              

  String Text = parent.getSelectedItem().toString();
    if(Text.equals("----SELECT----")) {

    }       
    else if(Text.equals("BEVERAGES")){
        select1=new String[Beverage.length];
        select2=new String[P1.length];
        System.out.println("Length of Beverage:" + select1.length);
        System.out.println("Length of P1:" + select2.length);
        select1 = Beverage;
        select2 = P1;
       l1.setAdapter(new EfficientAdapter(HomeActivity.this));
       return;

   } 
```

从自定义 ListView 中获取值：

```
 l1.setOnItemClickListener(new OnItemClickListener() { 

                   public void onItemClick(AdapterView<?> parent, View view, 
                   int position, long id) { 

                   // When clicked, show a toast with the TextView text 
                   Toast.makeText(HomeActivity.this, "SELECTED :: " + "item "+select1[position] + " " + "price"+ select2[position], 
                   Toast.LENGTH_SHORT).show(); 
           String ss=(String)parent.getItemAtPosition(position);
           GlobalClass.myval.add(ss); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:20:40.747

替换代码中的以下内容，它可能会为您提供一些 **l1.setAdapter(new EfficientAdapter(HomeActivity.this)); 替换为：l1.setAdapter(new EfficientAdapter(HomeActivity.this),arraytosendtoadapter);** *//将您的高效适配器更改为具有 String[] 以便接收您发送的内容*

# php - 从 MySQL 数据库获取数据时未定义的属性

> ID：11734124
> 
> 赞同：0
> 
> 时间：2012-07-31T06:07:25.417
> 
> 标签：php, mysql, sql, select

我尝试使用此脚本获取数据：

```
 public function getReligion()
    {
        $sql = 'select refReligionId, refReligionNameEN FROM ref_religion group by refReligionNameEN';
        $this->selectSql($sql);             
        $results = $this->getResult();              
        $forms = '
        <select name="slcReligion" id="slcReligion" style="width: 204px">
            <option value="" selected>Select Religion</option>
        ';              
        foreach($results as $result)
        {
            $forms .= '<option value="'.$result->refReligionId.'">'.$result->refReligionNameID.'</option>';
        }
        $forms .= '</select>';              
        return $forms;
    } 
```

我有父类函数：

```
 public function selectSql($sql)
{
    $query = @mysql_query($sql);
    if($query)
    {
        $this->numResults = mysql_num_rows($query);
        for($i = 0; $i < $this->numResults; $i++)
        {
            $r = mysql_fetch_array($query);
            $key = array_keys($r);
            for($x = 0; $x < count($key); $x++)
            {
                // Sanitizes keys so only alphavalues are allowed
                if(!is_int($key[$x]))
                {
                    if(mysql_num_rows($query) > 1)
                        $this->result[$i][$key[$x]] = $r[$key[$x]];
                    else if(mysql_num_rows($query) < 1)
                        $this->result = null;
                    else
                        $this->result[$key[$x]] = $r[$key[$x]];
                }
            }
        }       
        return true;
    }
    else
    {
        return false;
    }
} 
```

abd 获取结果函数：

```
 public function getResult($getArray = false)
{
    $encode = json_encode($this->result);

    if($getArray == true)
        $array = true;
    else
        $array = false;                                 

    if($this->numResults == 1)
        $results = '['.$encode.']'; 
     else
        $results = $encode;

    $result = json_decode($results, $array);

    return $result;
} 
```

我可以使用这些脚本获取数据，

问题是 php 页面出现了这些错误：

```
Undefined property: stdClass::$refReligionId
Undefined property: stdClass::$refReligionNameID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:12:32.533

您正在选择`refReligionNameEN`，但`refReligionNameID`在对象引用（`EN`vs. `ID`）中使用。

# html - 如何轻松遵守这些 API 安全要求

> ID：11734125
> 
> 赞同：0
> 
> 时间：2012-07-31T06:07:25.753
> 
> 标签：html, api, forms, http-post

我正在与一家营销公司的 Web API 合作，他们的身份验证文档说：

> 切勿将 Web Endpoint 详细信息放在应用程序的客户端部分，任何查看源代码的人都可以轻松阅读。

很公平。我的技能非常依赖于客户端（HTML/CSS/JS），并且在测试时（通过在 HTML 中包含身份验证信息）我与 API 交互没有问题。

身份验证需要作为 POST 参数与其他参数一起发送。

我是否将表单提交到服务器上的脚本，然后添加身份验证信息并将所有内容发布到 API？还是有另一种方法可以做到这一点？不幸的是，没有 API 密钥或类似的任何简单的东西。

作为一个没有任何经验的人，我从哪里开始（除了关于stackoverflow的问题）来找到我需要知道的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:16:15.867

假设客户端是网站或 Web 应用程序，您可以这样实现：

*   将表单发布到您自己的服务器。
*   在服务器上，有一些脚本可以检索数据，然后将其重新发布到 API。

这样，Web 端点就不会出现在客户端源代码中。

# mysql - 无法将 grails 应用程序连接到 mySql 数据库，无法加载 JDBC 驱动程序类“com.mysql.jdbc.Driver”

> ID：11734126
> 
> 赞同：6
> 
> 时间：2012-07-31T06:07:31.130
> 
> 标签：mysql, grails

我已经将 mysql/j 连接器复制到了我的 grails 应用程序的 grails-app/lib 文件夹中。我的 DataSource.groovy 文件看起来像这样

```
dataSource {
    pooled = true
    driverClassName = "com.mysql.jdbc.Driver"
    username = "root"
    password = "password"
}
hibernate {
    cache.use_second_level_cache = true
    cache.use_query_cache = false
    cache.region.factory_class = 'net.sf.ehcache.hibernate.EhCacheRegionFactory'
}
// environment specific settings
environments {
    development {
        dataSource {
            dbCreate = "create-drop" // one of 'create', 'create-drop', 'update',     'validate', ''
            url = "jdbc:mysql://localhost:3306/tewhareoteata3test"
            dialect = "org.hibernate.dialect.MySQL5InnoDBDialect"
        }
    }
    test {
        dataSource {
            dbCreate = "update"
            url = "jdbc:h2:mem:testDb;MVCC=TRUE;LOCK_TIMEOUT=10000"
        }
    }
    production {
        dataSource {
            dbCreate = "update"
            url = "jdbc:h2:prodDb;MVCC=TRUE;LOCK_TIMEOUT=10000"
            pooled = true
            properties {
               maxActive = -1
               minEvictableIdleTimeMillis=1800000
               timeBetweenEvictionRunsMillis=1800000
               numTestsPerEvictionRun=3
               testOnBorrow=true
               testWhileIdle=true
               testOnReturn=true
               validationQuery="SELECT 1"
            }
        }
    }
} 
```

但它给了我这个错误

```
Cannot load JDBC driver class 'com.mysql.jdbc.Driver' 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T06:27:55.313

在`BuildConfig.groovy`添加

```
dependencies {
        runtime 'mysql:mysql-connector-java:5.1.16'
    } 
```

事实上，它可能已经被注释掉了。

这告诉 grails 下载`mysql-connector`及其依赖项。

您需要告诉 Grails 要使用哪些 maven 存储库（也在`BuildConfig.groovy`）：

```
repositories {
        grailsPlugins()
        grailsHome()
        grailsCentral()
        mavenCentral()
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T06:23:26.470

取消注释

```
runtime 'mysql:mysql-connector-java:5.1.20' 
```

在`BuildConfig.groovy`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T16:51:26.257

如果要在不使用自动依赖解析的情况下包含 jar 文件，则需要将其放在`lib`项目根目录下的目录中，*而不是* `grails-app/lib`. 布局应如下所示：

```
|-- grails-app
|   |-- conf
|   |   |-- hibernate
|   |   `-- spring
|   |-- controllers
|   |-- domain
|   |-- i18n
|   |-- services
|   |-- taglib
|   |-- utils
|   `-- views
|       `-- layouts
|-- lib                  <-- jars go here
|-- scripts
|-- src
|   |-- groovy
|   `-- java
|-- target
|-- test
|   |-- integration
|   `-- unit
`-- web-app 
```

# c# - 从没有 Ref 的表单创建对象

> ID：11734133
> 
> 赞同：-1
> 
> 时间：2012-07-31T06:08:41.660
> 
> 标签：c#

> **可能重复：**
> [在 C# 中克隆对象](https://stackoverflow.com/questions/78536/cloning-objects-in-c-sharp)

我的代码：

```
private void button1_Click(object sender, EventArgs e)
{
    CopyForm(new Form1());
}

public void CopyForm(Form form)
{
    Form frm = form;
    frm.Text = "1";
    form.Text = "2";

    string c = frm.Text;// out 2
    string c2 = form.Text;// out 2
} 
```

如何从 Form 创建对象`without Ref`？

请告诉我最好的方法。

编辑 ：

请样品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:25:37.067

[您可以使用Copy Constructor](http://msdn.microsoft.com/en-us/library/ms173116)或使用[ICloneable 的 Clone 方法](http://msdn.microsoft.com/en-us/library/system.Icloneable)来制作 Form 的副本。

下面给出了 Copy Constructor 的一个简单示例。您需要创建自己的表单类并向其添加 copyConstructor 方法。

```
class MyClonableForm:Form
{

public MyClonableForm(Form oldForm)//Copy Constructor
{
this.Text=oldForm.Text;
//write your clone code here
//be careful with reference types!
}

} 
```

**注意**：

不推荐使用`ICloneable`接口，因为它没有指定执行的克隆类型，即深或浅。

如果您确实想使用它，您可以但不要公开克隆方法。将其用于您自己的目的！

# php - 如何访问 symfony 存储库中的创建查询方法

> ID：11734147
> 
> 赞同：6
> 
> 时间：2012-07-31T06:10:55.920
> 
> 标签：php, symfony, doctrine-orm

我有类用户存储库

```
class userRepository extends EntityRepository
{

    function getuserData($id)
    {
        $query = $this->createQuery('
                SELECT c FROM AcmeBundle:User c 
                WHERE c.id = :id ORDER BY c.id ASC
            ')
            ->setParameter('id', $id);

        return $query->getResult();
    }
} 
```

我收到此错误

> 未定义的方法“createQuery”。方法名称必须以 findBy 或 findOneBy 开头！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T06:18:31.063

根据[文档](http://symfony.com/doc/current/book/doctrine.html#querying-for-objects-with-dql)

```
$em = $this->getEntityManager();
$query = $em->createQuery('
        SELECT p FROM AcmeStoreBundle:Product p 
        WHERE p.price > :price 
        ORDER BY p.price ASC
    ')
    ->setParameter('price', '19.99');

$products = $query->getResult(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T16:52:53.737

我知道这个答案已经很晚了，但是您的 userRepository 类需要在您的 User 实体中定义。

```
use Doctrine\ORM\Mapping as ORM
/**
 * @ORM\Entity(repositoryClass="NameOfBundle\Repository\UserRepository")
class User
{
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-20T13:13:51.663

当我们在存储库工作时

```
$em = $this->getEntityManager(); //wont work in repository
$em->createQueryBuilder($sql); 
```

你必须使用

```
$conn = $this->getEntityManager()->getConnection();     
$stmt = $conn->prepare($sql); 
```

[阅读更多](http://docs.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/data-retrieval-and-manipulation.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-28T15:37:42.577

该方法`CreateQuery`是**实体管理器**，不是`Controller`类

# c# - 如何通过 id 从父面板用户控件获取子用户控件？

> ID：11734148
> 
> 赞同：0
> 
> 时间：2012-07-31T06:10:58.180
> 
> 标签：c#, .net, visual-studio

例如。我的代码是

```
void abc(usercontrolclass ucc)
{
   this.panel.Controls.Add(ucc);
}

void def()
{
  usercontrolclass ucc1 = this.panel.Controls.GetChildUserControl(ucc);

} 
```

注意“GetChildUserControl”不是一个有效的函数，我需要的是一个可以用来获取 ucc 的方法或函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:25:06.557

1 - 设置用户控件`tag`属性。

2 - 将用户控件添加到其父级。

`Tag`3 -通过迭代从父级获取其属性的用户控制[`Control.Controls`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controls.aspx)。

你的代码应该是这样的：

```
void AddControl(UserControl control, int id)
{
    control.Tag = id;
    this.panel.Controls.Add(control);
}

UserControl GetControl(int id)
{
    foreach (Control control in this.panel.Controls)
    {
        if (id == (int) control.Tag)
            return (UserControl) control;
    }
    return null;
}

// or using LINQ
UserControl GetControl(int id)
{
    return Controls.Cast<UserControl>()
                   .FirstOrDefault(control => id == (int) control.Tag);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:18:11.793

用户控件也“只是”一个控件，因此它具有带有子控件的 Controls 属性。用它。

见[这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.usercontrol.aspx)和[这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controls.aspx)。

# xml - 使用 Eclipse 在 xml 文件中进行 XML 验证

> ID：11734151
> 
> 赞同：2
> 
> 时间：2012-07-31T06:11:14.103
> 
> 标签：xml, xsd, jaxb, xml-validation, xsd-validation

我在验证我的 xml 文件时遇到了一些问题。我收到错误消息“cvc-elt.1：找不到元素 'xsi:settings' 的声明。” 在我的 xml 文件中。对我来说，我的代码是正确的，但显然它不应该是..

我的 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsi:settings  xmlns:xsi="http://www.w3.org/2001/XMLSchema" xsi:noNamespaceSchemaLocation="http://www.w3.org/2001/XMLSchema/Application.xsd">
    <info>
            <Version>1.0</Version>
            <Release_date>2012-07-27</Release_date>
    </info>

    <config>
        <Betriebssystem>Windows</Betriebssystem>
        <Wildcard>%</Wildcard>
        <Errormessages>
            <View1>
                <Message1>Der neue Mitarbeiter braucht ein Geburtsdatum der Form JJJJ-MM-TT und eine nicht vorhandene Personalnummer</Message1>
                <Message2>Dem Mitarbeiter muss eine Personalnummer zugewiesen werden</Message2>
            </View1>
            <View3>
                <Message1>Sie muessen mindestens ein Kriterienfeld ausfuellen"</Message1>
                <Message2>Der Mitarbeiter braucht ein Geburtsdatum der Form JJJJ-MM-TT und eine nicht vorhandene Personalnummer</Message2>
                <Message3>Sie muessen erst einen Mitarbeiter laden</Message3>
                <Message4>Problem beim Loeschen des Mitarbeiters. Ist der Mitarbeiter in der Datenbank vorhanden?</Message4>
            </View3>
        </Errormessages>
    </config>
</xsi:settings> 
```

我的 xsd 文件（没有错误）：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.w3.org/2001/XMLSchema" >

 <xs:element name="settings">
 <xs:complexType>
 <xs:sequence>

 <xs:element name="info">
    <xs:complexType>
      <xs:sequence>
        <xs:element type="xs:float" name="Version"/>
        <xs:element type="xs:date" name="Release_date"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>

  <xs:element name="config">
    <xs:complexType>
      <xs:sequence>
        <xs:element type="xs:string" name="Betriebssystem"/>
        <xs:element type="xs:string" name="Wildcard"/>
        <xs:element name="Errormessages">
          <xs:complexType>
            <xs:sequence>

              <xs:element name="View1">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element type="xs:string" name="Message1"/>
                    <xs:element type="xs:string" name="Message2"/>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>

              <xs:element name="View3">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element type="xs:string" name="Message1"/>
                    <xs:element type="xs:string" name="Message2"/>
                    <xs:element type="xs:string" name="Message3"/>
                    <xs:element type="xs:string" name="Message4"/>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>

            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>

</xs:sequence>
</xs:complexType>
</xs:element>
</xs:schema> 
```

在此先感谢您的帮助。

哈拉尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:21:56.157

你的命名空间错了。为了继续，您的更正样本如下所示。首先，您必须引用 XML Schema Instance 命名空间（下面使用 xst 前缀）并改用 schemaLocation（因为您有一个目标命名空间）。

```
<?xml version="1.0" encoding="UTF-8"?> 
<xsi:settings xmlns:xsi="http://www.w3.org/2001/XMLSchema" xmlns:xst="http://www.w3.org/2001/XMLSchema-instance" xst:schemaLocation="http://www.w3.org/2001/XMLSchema/Application.xsd"> 
    <info> 
        <Version>1.0</Version> 
        <Release_date>2012-07-27</Release_date> 
    </info> 
    <config> 
        <Betriebssystem>Windows</Betriebssystem> 
        <Wildcard>%</Wildcard> 
        <Errormessages> 
            <View1> 
                <Message1>Der neue Mitarbeiter braucht ein Geburtsdatum der Form JJJJ-MM-TT und eine nicht vorhandene Personalnummer</Message1> 
                <Message2>Dem Mitarbeiter muss eine Personalnummer zugewiesen werden</Message2> 
            </View1> 
            <View3> 
                <Message1>Sie muessen mindestens ein Kriterienfeld ausfuellen"</Message1> 
                <Message2>Der Mitarbeiter braucht ein Geburtsdatum der Form JJJJ-MM-TT und eine nicht vorhandene Personalnummer</Message2> 
                <Message3>Sie muessen erst einen Mitarbeiter laden</Message3> 
                <Message4>Problem beim Loeschen des Mitarbeiters. Ist der Mitarbeiter in der Datenbank vorhanden?</Message4> 
            </View3> 
        </Errormessages> 
    </config> 
</xsi:settings> 
```

我正在展示另一个示例，它通常使用前缀。xsi 用于 XML Schema 实例。尽管如此，它是任意的，如上所示，它也可以与其他东西一起使用。

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!-- Sample XML generated by QTAssistant (http://www.paschidev.com) -->
<settings xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.w3.org/2001/XMLSchema">
    <info xmlns="">
        <Version>1</Version>
        <Release_date>1900-01-01</Release_date>
    </info>
    <config xmlns="">
        <Betriebssystem>Betriebssystem1</Betriebssystem>
        <Wildcard>Wildcard1</Wildcard>
        <Errormessages>
            <View1>
                <Message1>Message11</Message1>
                <Message2>Message21</Message2>
            </View1>
            <View3>
                <Message1>Message11</Message1>
                <Message2>Message21</Message2>
                <Message3>Message31</Message3>
                <Message4>Message41</Message4>
            </View3>
        </Errormessages>
    </config>
</settings> 
```

我不得不评论一个事实，一般来说，定位 W3C XML Schema (XSD) uri (http://www.w3.org/2001/XMLSchema) 和 XML Schema Instance 都不是一件好事(XSI) uri (http://www.w3.org/2001/XMLSchema-instance)。

# html - 在 Zend Framework 中显示组装饰器

> ID：11734155
> 
> 赞同：1
> 
> 时间：2012-07-31T06:11:25.380
> 
> 标签：html, zend-framework

```
<?php

class Application_Form_Auth extends Zend_Form
{

    public function init() 
    {   $this->setAttrib('enctype', 'multipart/form-data');
        $this->setMethod('post');

        $username = $this->createElement('text','username');
        $username->setLabel('Username:')
                 ->setRequired(true);                               

        $username->setDecorators(array(

                   'ViewHelper',

                   'Description',

                   'Errors',

                   array(array('data'=>'HtmlTag'), array('tag' => 'td')),

                   array('Label', array('tag' => 'td')),

                   array(array('row'=>'HtmlTag'),array('tag'=>'tr'))

           ));

        $password=$this->createElement('password','password');
        $password->setLabel('Password:')
                 ->setRequired(true);

                $password->setDecorators(array(

                   'ViewHelper',

                   'Description',

                   'Errors',

                   array(array('data'=>'HtmlTag'), array('tag' => 'td')),

                   array('Label', array('tag' => 'td')),

                   array(array('row'=>'HtmlTag'),array('tag'=>'tr'))

           ));

        $file = new Zend_Form_Element_File('file');

        $file->setLabel('Select File:')

            ->setDestination(BASE_PATH . '/data/uploads')

            ->setRequired(true);

                    $file->setDecorators(array(

                   'file',

                   'Description',

                   'Errors',

                   array(array('data'=>'HtmlTag'), array('tag' => 'td')),

                   array('Label', array('tag' => 'td')),

                   array(array('row'=>'HtmlTag'),array('tag'=>'tr'))

           ));

$captcha = $this->createElement('captcha', 'captcha',
array('required' => true,
'captcha' => array(
'captcha' => 'Image',
'font' => BASE_PATH .'/fonts/Average-Regular.ttf',
'fontSize' => '24',
'wordLen' => 5,
'height' => '75',
'width' => '200',
'imgDir'=> BASE_PATH.'/images/captcha',
'imgUrl'=>'../../images/captcha/',
'dotNoiseLevel' => 50,
'lineNoiseLevel' => 5)));

$captcha->setLabel('Please type the words shown:');

                    $captcha->setDecorators(array(

                   'captcha',

                   'Description',

                   'Errors',

                   array(array('data'=>'HtmlTag'), array('tag' => 'td')),

                   array('Label', array('tag' => 'td')),

                   array(array('row'=>'HtmlTag'),array('tag'=>'tr'))

           ));

           $form = new ZendX_JQuery_Form();
$date1 = new ZendX_JQuery_Form_Element_DatePicker(
                        'date1',
                        array('label' => 'Date:')
        );

            $date1->setDecorators(array(

               'UiWidgetElement',

            'Description',

                   'Errors',

                   array(array('data'=>'HtmlTag'), array('tag' => 'td')),

                   array('Label', array('tag' => 'td')),

                   array(array('row'=>'HtmlTag'),array('tag'=>'tr'))

       ));

        $reg=$this->createElement('submit','submit');
        $reg->setLabel('save'); 

            $reg->setDecorators(array(

               'ViewHelper',

               'Description',

               'Errors', array(array('data'=>'HtmlTag'), array('tag' => 'td',

               'colspan'=>'2','align'=>'center')),

               array(array('row'=>'HtmlTag'),array('tag'=>'tr'))

       ));

    $this->setDecorators(array(

               'FormElements',

               array(array('data'=>'HtmlTag'),array('tag'=>'table')),

               'Form'

       ));

        $this->addElements(array(
        $username,
        $password,
        $file,
        $captcha,
        $date1,
        $reg

        ));

        $this->addDisplayGroup(array('username', 'password','file','captcha','date1','submit'), 'login',array('legend' =>'Add User'));          

          $login = $this->getDisplayGroup('login');
        $login->setDecorators(array(

                    'FormElements',
                    'Fieldset',

                    array('HtmlTag',array('tag'=>'div','style'=>'width:70%;;float:left; padding-top:5px;'))
        ));

        return $this;
    }

}
?> 
```

addUser.phtml

```
<?php 

echo $this->form->getDisplayGroup('login');  //This form aligned perfectly  

echo $this->form;   //This won't 

?> 
```

我是 Zend Framework 的新手，我刚开始使用 Zend Decorators 和 DisplayGroup。

# css - CSS 在 IE7 中不起作用，但全部

> ID：11734159
> 
> 赞同：2
> 
> 时间：2012-07-31T06:11:58.407
> 
> 标签：css, internet-explorer-7, cross-browser

我正在内部的客户网站上工作。特定的 CSS 不适用于 IE7，但适用于 IE8、9 等。

我正在使用 IE7 浏览和文档模式检查 IE9。

CSS：

```
ul.default-list {
  margin: 0;
  padding: 0;
  list-style: none;
  font-size: 14px;
  margin-bottom: 20px;
}

ul.default-list li {
  padding: 0;
  margin: 0;
  background: url(../images/arrow-red.gif) no-repeat left 6px;
  padding-left: 13px;
  margin-bottom: 17px;
}

.fl {
  float: left;
}

.no-margin li {
  margin: 0;
} 
```

HTML：

```
<ul class="default-list fl no-margin" sizcache="2" sizset="10">
<li sizcache="0" sizset="20"><a href="#item1">Item 1</a></li> 
<li sizcache="0" sizset="21"><a href="#Item 2">Item 2</a></li>  
<li sizcache="0" sizset="22"><a href="#Item 3">Item 3</a></li>  
<li sizcache="0" sizset="23"><a href="#Item 4">Item 4</a></li>  
</ul> 
```

**IE8 模式截图**

![在此处输入图像描述](../Images/6260948231eeef07daf941a923a8c50f.png)

**IE7模式截图**

![在此处输入图像描述](../Images/64cf1d1d0134d978d591745503795a78.png)

页面头部

```
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="lt-ie9" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="ie9" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--> <html lang="en"> <!--<![endif]-->
<head>
<meta charset="utf-8">
<link href='http://fonts.googleapis.com/css?family=Droid+Sans:400,700|Droid+Serif:400,400italic,700,700italic' rel='stylesheet' />
<link rel="stylesheet" href="js/fancybox/jquery.fancybox-1.3.4.css" media="all" />
<link rel="stylesheet" href="css/main.css?version=56" media="all"  />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-#####-1']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
<link rel="stylesheet" href="css/about-us.css?version=56" media="all"  />
</head> 
```

最后一个 CSS 文件是包含我上面提到的代码的 CSS

## 编辑：刚刚

我将我的头部部分剥离到这个，但问题仍然存在

```
 <!DOCTYPE html>
    <!--[if lt IE 7]> <html class="lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
    <!--[if IE 7]>    <html class="lt-ie9 lt-ie8" lang="en"> <![endif]-->
    <!--[if IE 8]>    <html class="lt-ie9" lang="en"> <![endif]-->
    <!--[if IE 9]>    <html class="ie9" lang="en"> <![endif]-->
    <!--[if gt IE 9]><!--> <html lang="en"> <!--<![endif]-->
    <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/about-us.css?version=56" media="all"  />
    </head> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T08:15:15.847

我已经评估了你的 css，你的 css 有问题，如果我删除上面的整个 css`ul.default-list`就可以了。

**编辑：**

正如我所假设的那样，您的 CSS 行有问题，`1038`即

```
ol li:before, ol .num { float: left; margin: 0 4px 0 0; padding: 0 7px 0 0; background: url(../images/bullet.gif) no-repeat 100% 8px; color: #000; content: counters(item, ".") " "; counter-increment: item; } 
```

和线`1046`即

```
ol li:before, ol .num { float: left; margin: 0 4px 0 0; padding: 0 7px 0 0; background: url(../images/bullet.gif) no-repeat 100% 8px; color: #000; content: counters(item, ".") " "; counter-increment: item; } 
```

我认为在这些行中我`content: counters(item, ".") " ";`应该`content: counters(item,".") " "`删除了它们之间的空间`(item,".")`并且它有效。

# apache - 添加“万维网”。使用 htaccess 访问 URL

> ID：11734161
> 
> 赞同：3
> 
> 时间：2012-07-31T06:12:09.563
> 
> 标签：apache, .htaccess

我一直在重写我的网址，如下所示：

```
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

效果很好，但是我有一个通过 apache/htaccess 受密码保护的子目录。当我导航到此目录时，我的浏览器收到 401 错误。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T06:15:03.510

尝试放置：

```
ErrorDocument 401 "Unauthorized Access"
RewriteEngine off

... Authorisation lines 
```

在包含您的授权指令的 .htaccess 文件中。

# linux - linux 内核、linux 设备驱动程序或模块编写器程序员是否需要算法分析？

> ID：11734164
> 
> 赞同：0
> 
> 时间：2012-07-31T06:12:26.737
> 
> 标签：linux, algorithm, kernel, linux-device-driver

我不擅长分析算法并试图获得一些知识。由于我对内核感兴趣，linux设备驱动程序或模块编写器编程是这些编程真正需要的分析，如果是，那么一些概念就足够了，或者我必须是我的代码的良好分析器，或者我可以跳过这个并学习编程知识如 C、C++、Linux 内核等

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T06:54:50.320

没有算法的编程就像没有句子的文学——这是一个荒谬的想法。您编写的每个代码块都实现了某种算法，如果不了解算法就开始编写代码是没有意义的。

让您高兴的是，实现对算法的理解的最佳方法之一是实现算法。

一旦你超越了基础知识（排序、搜索、基本数据结构操作），你需要熟悉哪些算法，以及它们分析的哪些方面，是特定于领域的。因此，一旦掌握了基础知识，您就应该将研究导向您选择的领域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:08:45.717

作为一名 Linux 内核程序员，

您应该对以下领域有所了解。

```
Operating system Concepts(Memory Management, Process Management particularly)

Good C programming.

Based on Driver you working, you should specialize the kernel APIs. 

Basic hardware knowledge like BAR, Interrupt, Register. 
```

# wpf - 如何将多种样式应用于wpf中的单个控件？

> ID：11734166
> 
> 赞同：0
> 
> 时间：2012-07-31T06:12:34.340
> 
> 标签：wpf, styles

> **可能重复：**
> [如何在 WPF 中应用多种样式](https://stackoverflow.com/questions/16096/how-to-apply-multiple-styles-in-wpf)

```
<Window.Resources>   
    <Style TargetType="Button" x:Key="style_1">
        <Setter Property="Foreground" Value="Green" />
    </Style>
    <Style TargetType="Button" x:Key="style_2">
        <Setter Property="Background" Value="Blue" />
    </Style>    
</Window.Resources>

    <Button x:Name="btn_1" Content="Button" HorizontalAlignment="Left" Height="40" Margin="153,95,0,0" VerticalAlignment="Top" Width="89" Style="{StaticResource style_1}" Click="Button_Click" />
    <Button x:Name="btn_2" Content="Button" Height="40" Margin="281,95,262,0" VerticalAlignment="Top" Style="{StaticResource style_2}"/> 
```

现在我想将 style_1 和 style_2 应用到**btn_1**我应该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:19:59.480

不能将两种样式应用于 XAML 中的单个控件。

你可以做的是让 style_2 通过指定从 style_1 继承

```
<Style TargetType="Button" x:Key="style_2" BasedOn="{StaticResource style_1}"> 
    <Setter Property="Background" Value="Blue" />
</Style> 
```

然后只使用 style_2。

# javascript - Dojo : 手风琴打开和关闭

> ID：11734171
> 
> 赞同：1
> 
> 时间：2012-07-31T06:13:17.377
> 
> 标签：javascript, html, css, dojo, accordion

> 请参考：http: [//jsfiddle.net/n23F3/](http://jsfiddle.net/n23F3/)

我想知道如何在手风琴标题（红色标签）上实现打开和关闭。现在第一个选项卡只有在单击第二个选项卡后才会关闭。我想在点击事件上实现切换（切换）。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T11:43:48.990

根据定义， `Accordion`extends`StackContainer`一次只显示一个孩子。

你可以用它`dijit.TitlePane`来完成你想要的。

[http://jsfiddle.net/cswing/RJc4k/](http://jsfiddle.net/cswing/RJc4k/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T08:45:05.507

TitleGroup 可能会为您提供帮助，但我不确定它是否支持多个 TitleGroup，即。一个 TitleGroup 在另一个之下。

[http://dojotoolkit.org/reference-guide/1.7/dojox/widget/TitleGroup.html](http://dojotoolkit.org/reference-guide/1.7/dojox/widget/TitleGroup.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T06:36:50.610

我认为使用 Dojo 的手风琴组件不可能做到这一点。

但是你可以试试这个：[http](http://www.switchonthecode.com/tutorials/javascript-and-css-tutorial-accordion-menus) ://www.switchonthecode.com/tutorials/javascript-and-css-tutorial-accordion-menus 。虽然不是 Dojo 组件，但是...

希望有帮助！

# iphone - 任何时候都会调用 UIApplicationDidBecomeActiveNotification？

> ID：11734173
> 
> 赞同：0
> 
> 时间：2012-07-31T06:13:22.217
> 
> 标签：iphone, objective-c

我使用`UIApplicationDidBecomeActiveNotification`/ `UIApplicationWillResignActiveNotification`pair 来计算应用程序运行时间。在回调中`UIApplicationDidBecomeActiveNotification`，我记录开始时间，在回调中`UIApplicationWillResignActiveNotification`，我记录结束时间。在大多数情况下，我发现运行时间是正确的。但是服务器日志中有一些特殊情况，我发现运行时间很奇怪。比如结束时间小于开始时间，或者结束时间远大于开始时间。所以我怀疑`UIApplicationDidBecomeActiveNotification`有时不会调用。如果有人遇到这种情况，请给我一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-23T14:27:38.107

如果您`UIApplicationDidBecomeActiveNotification`在视图控制器中侦听，则在发布`viewDidLoad`之后才会调用then `UIApplicationDidBecomeActiveNotification`。因此，如果您在 中注册通知`viewDidLoad`，您将错过第一个通知，该通知发生在视图加载之前。所以每次你的应用程序启动时，你都会错过一个这样的通知。但是，所有后续通知都会被捕获，包括从后台返回等。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-31T06:24:50.393

`UIApplicationDidBecomeActiveNotification`每次您的应用程序从后台进入 forgnound 时都会被调用。意味着每次您的应用程序从非活动状态变为活动状态时。我认为这是更改时间的原因。

# testing - 测试期间敏捷类型上的 ComponentLookupError

> ID：11734176
> 
> 赞同：1
> 
> 时间：2012-07-31T06:13:36.617
> 
> 标签：testing, plone, dexterity

我有一个具有多种 Dexterity 类型的自定义产品，其中一些被 setuphandler 用于创建站点结构。这在测试之外没有任何问题，但在测试中它一直失败：

```
Traceback (most recent call last):
  [snip]
  File "/opt/ctcc_plone/src/ctcc.model/ctcc/model/setuphandlers.py", line 52, in setupStructure
    random = createSiteFolder(portal, 'ctcc.model.servicefolder', 'Randomisation', 'random')
  File "/opt/ctcc_plone/src/ctcc.model/ctcc/model/setuphandlers.py", line 35, in createSiteFolder
    return createContentInContainer(context, type, title=title, id=id)
  File "/opt/ctcc_plone/eggs/plone.dexterity-1.1-py2.7.egg/plone/dexterity/utils.py", line 166, in createContentInContainer
    content = createContent(portal_type, **kw)
  File "/opt/ctcc_plone/eggs/plone.dexterity-1.1-py2.7.egg/plone/dexterity/utils.py", line 112, in createContent
    fti = getUtility(IDexterityFTI, name=portal_type)
  File "/opt/ctcc_plone/eggs/zope.component-3.9.5-py2.7.egg/zope/component/_api.py", line 169, in getUtility
    raise ComponentLookupError(interface, name)
ComponentLookupError: (<InterfaceClass plone.dexterity.interfaces.IDexterityFTI>, 'ctcc.model.servicefolder') 
```

我确保在安装过程中导入包的配置文件：

```
class CTCCModelSandboxLayer(PloneSandboxLayer):
    defaultBases = (PLONE_FIXTURE,)

    def setUpZope(self, app, configurationContext):
        import ctcc.model
        self.loadZCML(package=ctcc.model)

    def setUpPloneSite(self, portal):
        self.applyProfile(portal, 'ctcc.model:default') 
```

虽然它们在包的设置中被列为安装要求，但我也尝试了明确`applyProfile`的 on`plone.app.dexterity`和`quickInstallProduct`，但由于某种原因，Dexterity FTI 在调用时似乎没有注册。

我正在使用 Plone 4.1、Dexterity 1.1 和 plone.app.testing 4.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:49:05.877

正如 Mikko 所建议的那样，我将 setuphandler 配置从产品的 zcml 移到了 GenericSetup`import_steps.xml`中，从而允许指定显式依赖项`typeinfo`：

```
<?xml version="1.0"?>
<import-steps>
    <import-step
        id="ctcc-setup"
        title="Additional CTCC setup"
        handler="ctcc.model.setuphandlers.setupVarious"
        version="20120731"
    >
        <dependency step="typeinfo" />
    </import-step>
</import-steps> 
```

测试现在运行而不是在该`applyProfile`阶段失败，并且站点结构的测试表明它正在按预期设置。

再次感谢！

# drupal - 如何在 Drupal 7 中创建标签云？

> ID：11734179
> 
> 赞同：3
> 
> 时间：2012-07-31T06:13:55.943
> 
> 标签：drupal, drupal-7, tags, drupal-modules, tag-cloud

我找到了 Drupal [Tagadelic](http://drupal.org/project/tagadelic)模块。截至目前，[它](http://drupal.org/node/1129342)不适合 Drupal 7。

谁能告诉我如何在 Drupal 7 中创建标签云？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T14:30:34.563

[您可以使用http://drupal.org/project/tagclouds](http://drupal.org/project/tagclouds)获得静态标签云。要获得一个不错的 flash（动态）版本，请尝试[http://drupal.org/project/cumulus的开发版本](http://drupal.org/project/cumulus)

编辑

您已经可以将 tagadelic 用于 Drupal 7 用于**动态**标签云。它在 github 上可用：[https ://github.com/berkes/tagadelic/tree/7.x-1.x](https://github.com/berkes/tagadelic/tree/7.x-1.x)

*Drupal7 分支也在那里。它被报告为稳定且可用，但需要重构和更好的测试，直到在 drupal.org 上发布。*

由于 tagadelic 不会更改数据库，只显示分类，可能发生的最糟糕的事情是显示标签云的页面崩溃......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T09:45:04.417

您可以为您的站点调整 Tagedelic 7.x-1.x-dev：[https](https://drupal.org/node/1160134) ://drupal.org/node/1160134 我个人不喜欢 2.x 版本。

它没有维护，作者不推荐，但它对我们来说是开箱即用的。无论如何，我们分叉了这个版本并根据我们的需要对其进行了调整。查看我们的博客标签：[https ://www.abgeordnetenwatch.de/tagadelic](https://www.abgeordnetenwatch.de/tagadelic)

如果您打算使用它进行开发，这是一个好的开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T16:07:35.203

当你按照[dorien](https://stackoverflow.com/users/1496362/dorien)说的做时，请确保你的 cron 作业设置正确。如果您的 cron 作业没有足够频繁地触发，Tagclouds 可能会不同步。这会导致标签云中显示空标签以及链接标签的权重（大小）不正确。

# asp.net-mvc-3 - 我将如何模拟查询字符串

> ID：11734181
> 
> 赞同：7
> 
> 时间：2012-07-31T06:14:11.313
> 
> 标签：asp.net-mvc-3, mocking

在起订量中使用以下内容

```
public Mock<HttpRequestBase> Request { get; set; } 
```

我怎样才能模拟这个请求[....]

```
(in controller)
var modelFromPost = Request["mymodel"] 
```

这是我到目前为止所拥有的

```
public class ContextMocks
{

    public Mock<HttpContextBase> HttpContext { get; set; }
    public Mock<HttpRequestBase> Request { get; set; }
    public RouteData RouteData { get; set; }

    public ContextMocks(Controller controller)
    {
        HttpContext = new Mock<HttpContextBase>();
        HttpContext.Setup(x => x.Request).Returns(Request.Object);

    }

} 
```

干杯！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T06:34:53.887

您可以使用以下方法模拟索引器`SetupGet`：

```
ContextMocks.Request.SetupGet(r => r["mymodel"]).Returns(myModel); 
```

# perl - perl 脚本中的编译错误，同时在输入文件名中给出当前日期

> ID：11734186
> 
> 赞同：-1
> 
> 时间：2012-07-31T06:14:37.017
> 
> 标签：perl

根据以下脚本，尝试提供两个输入文件。Test_DDD111_20120731.csv 和 DDD111.txt。在一个文件夹中，可以使用不同日期的 Test_DDD111*.csv 文件。我只想在此脚本中提供当前日期文件作为输入。

我将日期指定为 $deviationreportdate。但是我遇到了错误，任何人都可以帮我解决这个问题。

我得到的错误：

```
Scalar found where operator expected at subscriberdump.pl line 58, near "/Test_DDD(\d+)/${deviationreportdate}"
        (Missing operator before ${deviationreportdate}?)
        syntax error at subscriberdump.pl line 58, near "/Test_DDD(\d+)/${deviationreportdate}"
        Execution of test.pl aborted due to compilation errors. 
```

* * *

```
#!/usr/bin/perl

use strict;
use warnings;

use strict;
use POSIX;

my @array123;

my $daysbefore;
my %month="";

my ($f2_field, @patterns, %patts, $f2_rec);

while (@ARGV)

{
  my $par=shift;

  if( $par eq "-d" )

  {

    $daysbefore=shift;

    next;
  }
}

sub getDate
{
        my $daysago=shift;

        $daysago=0 unless ($daysago);

        my @months=qw(Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec);

        my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = 

Localtime(time(86400*$daysago));

        # YYYYMMDD, e.g. 20060126

        return sprintf("%d%02d%02d",$year+1900,$mon+1,$mday);
}

my $deviationreportdate=getDate($daysbefore-1);

my $transactiondate=getDate($daysbefore);

my $filename="output.txt");

open(OUTPUTFILE,"> /tmp/$filename");

for my $Test_file (<Test_DDD*${deviationreportdate}*>) 

{

  if ($Test_file =~ /Test_DDD(\d+)/${deviationreportdate}*) 

{

    my $file = "DDD$1.txt";

    my $ID="DDD$1"; 

    open AIN, "<$file"    or die($file);

    open BIN, "<$Test_file" or die($Test_file);

    my %seen;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:32:26.880

此正则表达式无效

`$Test_file =~ /Test_DDD(\d+)/${deviationreportdate}*`

您只能在正则表达式的最后一个斜杠之后使用修饰符。我不确定您要对此做什么，否则我会为您发布正确的正则表达式。也许你提到这个？

`$Test_file =~ /Test_DDD(\d+)\/${deviationreportdate}*/`

或这个

`$Test_file =~ /Test_DDD(\d+)${deviationreportdate}*/`

# bash - 读取文本文件时删除 CR (\r)

> ID：11734187
> 
> 赞同：1
> 
> 时间：2012-07-31T06:14:41.650
> 
> 标签：bash

我有这个脚本，我正在逐行读取文本文件并执行命令。我发现字符串（又名行）总是以`'\r'`.

我想从字符串的末尾删除 CR。

这就是我的代码的样子：

```
file="myfilelist.txt"

while IFS= read -r filename
do

git log --oneline -- ${filename} |wc -l

done <"$file" 
```

我希望能够在循环中执行命令，而不是`\r`在每行字符串（又名文件名）的末尾。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T06:21:47.580

尝试这个：

```
git log --oneline -- $(echo "$filename" | tr -d '\r') | wc -l 
```

`$filename`请注意，当被空格包围时，您不需要大括号。

原则上你也可以通过 bash 自己的参数扩展机制来做到这一点：

```
git log --oneline -- ${filename%^M} | wc -l 
```

但`^M`必须是文字 control-M 字符，这很难看且难以维护。

或者您可以删除名称末尾的所有空白字符（包括`^M`空格、制表符等）：

```
git log --oneline -- ${filename%[-[:space:]]} | wc -l 
```

[但是现在我们正在研究那些不阅读手册](http://www.gnu.org/software/bash/manual/html_node/Pattern-Matching.html#Pattern-Matching)就很少有人能认出的技术。

# html - 引导轮播图像不按比例缩放

> ID：11734195
> 
> 赞同：3
> 
> 时间：2012-07-31T06:15:42.943
> 
> 标签：html, css, twitter-bootstrap, carousel

我的轮播填充了页面的宽度，但是当我缩小窗口时，y 轴没有响应。

[在这里](http://sacgamehub.com/index.html)查看

如何保持原始图像比例？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T12:55:02.450

将显式尺寸从轮播中的所有图像中删除，它应该可以正常工作。

# android - 平板电脑（ICS）的开发从哪里开始？

> ID：11734196
> 
> 赞同：1
> 
> 时间：2012-07-31T06:15:51.767
> 
> 标签：android, android-4.0-ice-cream-sandwich

我熟悉 android 2.2 并且我一直在为手机开发，现在为 ICS 平板电脑开发时从哪里开始。我从 quick-google 学到的主要事情是，现在我将不得不将片段用于多窗格布局，而不仅仅是 Activity。在开始之前我还需要寻找什么？一些链接会有所帮助（也适用于片段）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T06:20:49.620

[以下是如何将模拟器设置为平板电脑。](http://mobile.tutsplus.com/tutorials/android/android-sdk_tablet_virtual-device-configuration/)

[这是有关支持平板电脑和手机的出色指南。](http://developer.android.com/guide/practices/tablets-and-handsets.html)

[最后是一个非常有用的片段指南](http://android-developers.blogspot.com/2011/02/android-30-fragments-api.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:36:35.757

您应该了解如何使 UI 看起来适合不同的屏幕尺寸，查看特定尺寸的可绘制对象和资源，以及如何使用屏幕。在 d.android.com 上接受开发培训

# navigation - 是否可以在spring webFlow中获取子流堆栈

> ID：11734208
> 
> 赞同：1
> 
> 时间：2012-07-31T06:16:35.660
> 
> 标签：navigation, spring-webflow

在我们的应用程序中，我们使用 Spring WebFlow 在站点中导航用户。在某些页面中，我需要知道我从哪个流开始当前子流。有没有什么简单的方法可以在 Spring WebFlow 中获取这些信息？

我正在使用 Spring WebFlow 2.0.9 版，不幸的是无法升级到更新版本。

简单的例子：

我有页面`foo/foo.xhtml`调用 from `foo/flow.xml`，`bar/bar.xhtml`调用 from `bar/flow.xml`。
最后我有`baz/baz.xhtml`一个`baz/flow.xml`. 这被称为 foo 流或 bar 流的子流。在baz flow的backing bean中，我需要查看我如何称呼我的“历史”`baz/flow.xml`

为这个问题找到的解决方案：
*您也可以实现自己的 FLowExecutionListener，当您输入 StateDefinition 时，您可以检查它是否是 SubflowState 的实例并获取父级的名称。那么也许您可以将该变量放入 FlowScope 以在您的状态下使用它 - rptmat57*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:18:45.023

在每个子流中设置的原始流上使用输入怎么样？
在`baz/flow.xml`：

`<input name="comingFrom" type="string">`

在`foo/flow.xml`：

`<subflow-state id="subFlowFoo" subflow="baz">`
`<input name="comingFrom" value="Foo" type="string"/>`
`...`
`</sublfow-state>`

在`bar/flow.xml`：

`<subflow-state id="subFlowBar" subflow="baz">`
`<input name="comingFrom" value="Bar" type="string"/>`
`...`
`</sublfow-state>`

# node.js - 如何使用node.js expressbone.js mongodb登录用户？

> ID：11734210
> 
> 赞同：2
> 
> 时间：2012-07-31T06:16:46.423
> 
> 标签：node.js, mongodb, backbone.js, express

我对nodejs真的很陌生，而且主干太混乱了

登录：

在客户端，我使用骨干网。

**模型**

```
var testModel = Backbone.Model.extend({
    url:'api/test',
    defaults:{
        login:false,
        apikey:{},
    },

    initialize:function(){
        this.bind('change:apikey',this.onApiKeyChange,this);
        // this.set({'apikey': localStorage.getItem('apikey')});
    },

    setApiKey:function(apikey){
        localStorage.setItem('apiKey', apikey);
        this.set({'apikey':apikey});
    },

    onApiKeyChange:function(){
        // console.log(this.toJSON())
        //login here
    }
}); 
```

**看法**

```
var testView = Backbone.View.extend({
    el:'#content',
    events:{
        'submit #loginForm':'login',
    },

    login:function(e){
        e.preventDefault();
        this.model.setApiKey({name:this.$('input[name=username]').val(),password:this.$('input[name=password]').val()});
    }
})
var test= new testView({model:new testModel()}); 
```

因此，当用户提交表单时，模型会发生更改并触发`onApiKeyChange()`，如果用户登录`onApiKeyChange()`则应使用用户详细信息更新模型。我不知道该怎么做，主干如何发送这样的请求？

服务器端：

```
 var express = require('express');
 var routes = require('./routes');
 var http = require('http');
 var mongoose = require('mongoose');

 var app = express();

 mongoose.connect('mongodb://localhost/test');
 var User = mongoose.model('User',new mongoose.Schema({
    name:String,
    password:String,
 }));

 app.configure(function(){
 app.set('port', process.env.PORT || 3000);
 app.set('views', __dirname + '/views');
 app.set('view engine', 'jade');
 app.use(express.favicon());
 app.use(express.logger('dev'));
 app.use(express.bodyParser());
 app.use(express.cookieParser());
 app.use(express.session({ secret: "keyboard cat" }));
 app.use(express.methodOverride());
 app.use(app.router);
 app.use(express.static(__dirname + '/public'));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

app.get('/', routes.index);
app.get('/api/test', someFunction());

http.createServer(app).listen(app.get('port'), function(){
 console.log("Express server listening on port " + app.get('port'));
}); 
```

服务端只是基本的express app.js，不知道session怎么用。

我知道这可能是一个基本问题，但我就是不明白。请给我一些建议或告诉我一些适合初学者的简单教程。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T11:54:40.683

我个人使用[PassportJS](http://passportjs.org/)进行身份验证，只有在用户通过身份验证后，他才能访问我使用骨干网的“单页应用程序”。这是一个对我有很大帮助的项目[LostAndFound](https://github.com/ArnaudRinquin/LostAndFound)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:45:58.330

也许这对你有用......

[https://github.com/etaque/node-backbone-mongo-showcase.git](https://github.com/etaque/node-backbone-mongo-showcase.git)

# java - 如何将 zip 文件转换为八位字节流

> ID：11734214
> 
> 赞同：1
> 
> 时间：2012-07-31T06:16:58.420
> 
> 标签：java, soap, zipfile, webservices-client

我正在研究 SOAP Web 服务。我获得了一个第三方 WSDL URL，我需要为其生成客户端代码。我需要传递一个包含 XML 包的 zip 文件，传递的参数应该是八位字节流类型。我不知道如何将参数作为八位字节流传递。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:28:30.717

SOAP Web 服务需要以 SOAP 定义的格式（基本上是 XML）返回结果。八位字节流是一种不同的文件/数据传输机制，因此这不是您所需要的。

您需要使用的是“[带有附件的 SOAP](http://en.wikipedia.org/wiki/SOAP_with_Attachments) ”或“ [MTOM（消息传输优化机制）](http://en.wikipedia.org/wiki/Message_Transmission_Optimization_Mechanism) ”，您的 ZIP 文件将以某种方式附加到 SOAP 消息中。如果您将 Java 与 Axis 2 一起使用，[Axis 文档中的这篇文章](http://axis.apache.org/axis2/java/core/docs/mtom-guide.html)描述了您需要做什么。

请记住，您的 Web 服务客户端还需要了解 MTOM 或 SwA。因此，请选择您的客户容易支持的方法。

# java - Lucene 性能：将字段数据从一个索引传输到另一个索引

> ID：11734216
> 
> 赞同：0
> 
> 时间：2012-07-31T06:17:05.823
> 
> 标签：java, search, lucene

简而言之，我需要将多个字段和值的映射从一个索引交换到结果索引。

以下是场景。

**索引 1**结构 [字段 => 值] [已存储]

```
Doc 1    
keys => keyword1;    
Ids => id1, id1, id2, id3, id7, id11, etc.. 

Doc 2    
keys => keyword2;    
Ids => id3, id11, etc.. 
```

**索引 2**结构 [字段 => 值] [已存储]

```
Doc 1    
ids => id1    
keys => keyword1, keyword1

Doc 3    
ids => id3    
keys => keyword1, keyword2, etc.. 
```

请注意，keys<->ids**映射**在结果索引中是相反的。

就时间复杂度而言，您认为实现这一目标的最有效方法是什么？..

我能想到的唯一方法是..

```
1) index1Reader.terms();    
2) Process only terms belonging to "Ids" field    
3) For each term, get TermDocs    
4) For each doc, load it, get "keys" field info    
5) Create a new Lucene Doc, add 'Id', multi Keys, write it to index2\.     
6) Go to step 2. 
```

由于存储了这些字段，我确信有多种方法可以做到这一点。

请用任何表演技巧指导我。考虑到 Index1 的大小约为 6GB，**即使是最轻微的改进也会对我的方案产生巨大影响。**

总数 独特关键词：1800万；总数 唯一 ID：90 万

有趣**的更新**

**优化一**

*   在添加新文档时，不是创建多个重复的“字段”对象，而是使用“”分隔符创建单个 StringBuffer，然后将整个添加为单个字段似乎有高达 25% 的改进。

**更新 2：代码**

```
 public void go() throws IOException, ParseException {
    String id = null;
    int counter = 0;
    while ((id = getNextId()) != null) { // this method is not taking time..
        System.out.println("Node id: " + id);
        updateIndex2DataForId(id);
        if(++counter > 10){
            break;
        }
    }
    index2Writer.close();
}

private void updateIndex2DataForId(String id) throws ParseException, IOException {
    // Get all terms containing the node id
    TermDocs termDocs = index1Reader.termDocs(new Term("id", id));
    // Iterate
    Document doc = new Document();
    doc.add(new Field("id", id, Store.YES, Index.NOT_ANALYZED));
    int docId = -1;        
    while (termDocs.next()) {
        docId = termDocs.doc();
        doc.add(getKeyDataAsField(docId, Store.YES, Index.NOT_ANALYZED));            
    }
    index2Writer.addDocument(doc);
}

private Field getKeyDataAsField(int docId, Store storeOption, Index indexOption) throws CorruptIndexException,
        IOException {
    Document doc = index1Reader.document(docId, fieldSelector); // fieldSel has "key"
    Field f = new Field("key", doc.get("key"), storeOption, indexOption);
    return f;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:12:23.320

FieldCache 的使用就像一个魅力......但是，我们需要分配越来越多的 RAM 来容纳堆上的所有字段。

我已经用下面的代码片段更新了上面的 updateIndex2DataForId() ..

```
private void updateIndex2DataForId(String id) throws ParseException, IOException {
    // Get all terms containing the node id
    TermDocs termDocs = index1Reader.termDocs(new Term("id", id));
    // Iterate
    Document doc = new Document();
    doc.add(new Field("id", id, Store.YES, Index.NOT_ANALYZED));
    int docId = -1;
    StringBuffer buffer = new StringBuffer();
    while (termDocs.next()) {
        docId = termDocs.doc();
        buffer .append(keys[docId] + " "); // keys[] is pre-populated using FieldCache                 
    }
    doc.add(new Field("id", buffer.trim().toString(), Store.YES, Index.ANALYZED));   
    index2Writer.addDocument(doc);
}

String[] keys = FieldCache.DEFAULT.getStrings(index1Reader, "keywords"); 
```

它让一切变得更快，我不能告诉你确切的指标，但我必须说非常重要。

现在该程序正在一些合理的时间内完成。无论如何，我们非常感谢您提供进一步的指导。

# php - 实体依赖 Symfony2

> ID：11734217
> 
> 赞同：3
> 
> 时间：2012-07-31T06:17:15.867
> 
> 标签：php, symfony, doctrine

我有两个包含两个实体的捆绑包。我需要在这些实体之间创建多对多关系。

财产：

```
namespace Pfwd\AdminBundle\PropertyBundle\Entity;

use Pfwd\UserBundle\Entity\User as User;
use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="property")
 */
class Property {

//...
/**
 * @ORM\ManyToMany(targetEntity="User")
 * @ORM\JoinTable(name="user_role",
 *     joinColumns={@ORM\JoinColumn(name="user_id", referencedColumnName="id")},
 *     inverseJoinColumns={@ORM\JoinColumn(name="property_id", referencedColumnName="id")}
 * )
 *
 * @var ArrayCollection $salesAgents
 */
protected $salesAgents;

//.. 
```

用户：

```
namespace Pfwd\UserBundle\Entity;

use Doctrine\Common\Collections\ArrayCollection;
use Symfony\Component\Security\Core\User\UserInterface;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="user")
 */
class User implements UserInterface
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     * 
     * @var integer $id
     */
    protected $id;

   // ... 
```

属性包依赖于用户包。

当我跑

```
 php app/console doctrine:schema:update --force 
```

我收到以下错误：

```
 [ErrorException]                                                             
Warning: class_parents(): Class Pfwd\AdminBundle\PropertyBundle\Entity\User  
does not exist and could not be loaded in <SITE_PATH>/symfony2/vendor/doctrine/lib/Doctrine/ORM/Mapping/Cl  
assMetadataFactory.php line 223 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:23:57.130

根据您的`Property`类定义，您已经定义了与 的`ManyToMany`关系`User`。由于您省略了命名空间，因此将使用当前命名空间：

`User`将被翻译成`Pfwd\AdminBundle\PropertyBundle\Entity\User`

您必须指定 FQCN：

```
@ORM\ManyToMany(targetEntity="Pfwd\UserBundle\Entity\User") 
```

# java - Android：异常解组未知类型

> ID：11734220
> 
> 赞同：0
> 
> 时间：2012-07-31T06:17:27.430
> 
> 标签：java, android, android-intent

我必须将 ArrayList 从一个活动传递到另一个活动。所以我用

```
intent.putParcelableArrayListExtra("Items",sendinglist); 
```

我通过

```
ArrayList<GeoItem> revd = new ArrayList<GeoItem>();
        Bundle b = getIntent().getExtras();
        if (b != null)
            revd = b.getParcelableArrayList("Items");
Log.i("Element details",revd.get(0).getLatitude()+"");// Error 
```

但我无法访问该列表中的 GeoItem 对象。 根据答案**更新课程...**

我的 GeoItem 类是

公共类 GeoItem 实现 Parcelable、Serializable {

```
/** id of item. */
protected long id_;
/** item location in GeoPoint. */
// protected GeoPoint location_;
/** selection state flag. true if selected. */
protected boolean isSelected_;
protected int latitude;
protected int longitude;
protected String incident_no;
protected String title;
protected String date;
protected String address;

/**
 * @param id
 *            item id.
 * @param latitudeE6
 *            latitude of the item in microdegrees (degrees * 1E6).
 * @param longitudeE6
 *            longitude of the item in microdegrees (degrees * 1E6).
 */
public GeoItem(long id, int latitudeE6, int longitudeE6, String inc_no,
        String tlt, String dates, String addr) {
    id_ = id;
    // location_ = new GeoPoint(latitudeE6, longitudeE6);
    isSelected_ = false;
    incident_no = inc_no;
    title = tlt;
    date = dates;
    address = addr;
    latitude=latitudeE6;
    longitude=longitudeE6;
}

public long getId_() {
    return id_;
}

public void setId_(long id_) {
    this.id_ = id_;
}

public String getTitle() {
    return title;
}

public void setTitle(String title) {
    this.title = title;
}

public String getDate() {
    return date;
}

public void setDate(String date) {
    this.date = date;
}

public String getAddress() {
    return address;
}

public void setAddress(String address) {
    this.address = address;
}

public void setIncident_no(String incident_no) {
    this.incident_no = incident_no;
}

public int getLatitude() {
    return latitude;
}

public void setLatitude(int latitude) {
    this.latitude = latitude;
}

public int getLongitude() {
    return longitude;
}

public void setLongitude(int longitude) {
    this.longitude = longitude;
}

/**
 * @param src
 *            source GeoItem
 */
public GeoItem(GeoItem src) {
    id_ = src.id_;
    // location_ = new
    // GeoPoint(src.location_.getLatitudeE6(),src.location_.getLongitudeE6());
    isSelected_ = src.isSelected_;
}

/**
 * @param src
 *            source Parcel
 */
public GeoItem(Parcel src) {
    id_ = src.readLong();
    // location_ = new GeoPoint(src.readInt(), src.readInt());
    isSelected_ = src.readInt() == 0 ? false : true;
    address = src.readString();
    date = src.readString();
}

/* describeContents */
public int describeContents() {
    return 0;
}

/**
 * getId
 * 
 * @return id of the item.
 */
public long getId() {
    return id_;
}

public String getIncident_no() {
    return incident_no;
}

/**
 * setId
 * 
 * @param id
 *            of the item.
 */
public void setId(long id) {
    id_ = id;
    ;
}

/**
 * getLocation
 * 
 * @return GeoPoint of the item.
 * 
 *         public GeoPoint getLocation() { return location_; }
 */
/**
 * isSelected
 * 
 * @return true if the item is in selected state.
 */
public boolean isSelected() {
    return isSelected_;
}

/**
 * setSelect
 * 
 * @param flg
 *            flag to be set.
 */
public void setSelect(boolean flg) {
    isSelected_ = flg;
}

/**
 * Parcelable.Creator
 */
public static final Parcelable.Creator<GeoItem> CREATOR = new Parcelable.Creator<GeoItem>() {
    public GeoItem createFromParcel(Parcel in) {
        return new GeoItem(in);
    }

    public GeoItem[] newArray(int size) {
        return new GeoItem[size];
    }
};

/**
 * writeToParcel
 * 
 * @param parcel
 *            Parcel to be written.
 * @param flags
 *            flag.
 */
public void writeToParcel(Parcel parcel, int flags) {
    parcel.writeLong(id_);
    parcel.writeString(address);
    parcel.writeString(date);
    parcel.writeInt(latitude);
    parcel.writeInt(longitude);
    int flg = isSelected_ ? 1 : 0;
    parcel.writeInt(flg);
}

} 
```

请给我最好的方法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:24:28.530

[`GeoPoint`](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/GeoPoint)不是一个`Parceable`因此它可以被编组。您可能希望以某种方式保存数据而不使用`GeoPoint`或扩展`GeoPoint`，以便实现`Parceable`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:12:25.103

```
**To pass an arraylist  of Category to another activity,** 

 intent i = new Intent(_av.getContext(), ItemList.class);
    Bundle b = new Bundle();
    b.putParcelableArrayList("categories", categories);
    b.putInt("index", _index);
    i.putExtras(b);
    startActivityForResult(i, ITEM_LIST);

**To retrieve the data,**

Bundle b = this.getIntent().getExtras();

ArrayList<Category> cats = b.getParcelableArrayList("categories");
int index = b.getInt("index"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T05:57:42.517

我的实际任务是通过意图发送 GeoItems 对象列表。我的 GeoItems 类也是可序列化的。显然可序列化对象的列表也是可序列化的所以我使用了，

```
Intent listview = new Intent(context, ReportList.class);
            Bundle send = new Bundle();
            send.putSerializable("Items", (Serializable) items);
            listview.putExtras(send);
            context.startActivity(listview); 
```

其中 items 是 GeoIems 对象的列表

而在接收活动中，

```
 Bundle b = this.getIntent().getExtras();
        if (b != null) {
            data = (List<GeoItem>) b.getSerializable("Items");
        } 
```

其中 data 是 GeoIems 对象的列表

不使用 Parceable 接口，现在我可以通过意图设置我的可序列化对象列表到下一个活动

# c# - 覆盖运算符以连接两个字节数组

> ID：11734227
> 
> 赞同：0
> 
> 时间：2012-07-31T06:18:12.157
> 
> 标签：c#, overriding

`byte[]`我使用以下代码使用覆盖运算符连接两个`+`。
但有一个我无法理解的错误。
这是我的方法的标题

```
public static byte[] operator +(byte[] bytaArray1, byte[] bytaArray2){...} 
```

错误文字：

> 二元运算符的参数之一必须是包含类型

我应该如何实施？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T06:30:25.617

您不能为另一个类定义运算符。

一种替代方法是创建一个**扩展方法**，如下所示：

```
public static byte[] AddTo(this byte[] bytaArray1, byte[] bytaArray2){...} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:24:56.390

这是因为您试图在不属于 的类定义中创建运算符重载`byte`。

假设这个

```
class Program
{  
 public static Program operator +(Program opleft, Program opright)
 {
    return new Program();
 }
} 
```

这编译得很好，因为我为 Program 重载了 operator + 并且我正在执行 + 操作的操作数也是 Program 类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-09T07:34:43.293

我更喜欢这个解决方案：

```
 public static byte[] concatByteArray(params byte[][] p)
    {
        int newLength = 0;
        byte[] tmp;

        foreach (byte[] item in p)
        {
            newLength += item.Length;
        }

        tmp = new byte[newLength];
        newLength = 0;

        foreach (byte[] item in p)
        {
            Array.Copy(item, 0, tmp, newLength, item.Length);
            newLength += item.Length;
        }
        return tmp;
    } 
```

# iphone - 在 NSArray 中搜索

> ID：11734230
> 
> 赞同：4
> 
> 时间：2012-07-31T06:18:25.640
> 
> 标签：iphone, objective-c, nsarray

我正在实现一个`UISearchBar`and`SearchDisplayController`来过滤`NSArray`我从 HTML 中解析的内容。我的数组中的数据类似于以下格式。

```
`"<Book:twRxQxBihF> {\n    bookAuthor = Testing;\n    bookTitle = \"IOS Development\";\n}",
"<Book:kxUTu3rcX5> {\n    bookAuthor = Testing;\n    bookTitle = \"Android Development\";\n}",
.....` 
```

我的项目是关于移动图书馆的，我想按作者或书名过滤图书

到目前为止，我有一个名为 parseResults 的 NSArray 来存储我解析的数据，另一个`NSArray` `filteredResults`来存储最终结果。我对 IOS 开发很陌生，我对使用范围进行搜索感到很困惑。

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T06:24:10.620

利用[`indexOfObjectPassingTest:`](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/indexOfObjectPassingTest%3a)

```
NSString *search = @"IOS Development";
NSUInteger index = [myArray indexOfObjectPassingTest:
    ^(id obj, NSUInteger idx, BOOL *stop) {
        return [(NSString*)obj rangeOfString:search].location != NSNotFound;
    }]; 
```

示例改编自：[作为一个笨蛋](http://www.fieryrobot.com/blog/2010/06/20/being-a-blockhead/)。

# javascript - jQuery - 遍历链接，打开

> ID：11734235
> 
> 赞同：1
> 
> 时间：2012-07-31T06:18:40.743
> 
> 标签：javascript, jquery, bookmarklet

是否可以有一个小书签来打开包含某些唯一 href 的页面上的所有 URL？（比如*aggregator/h*什么的，最好不要复杂的正则表达式）。我正在查看 jQuery.each + window.open （Firefox 设置为在选项卡中打开所有新窗口，popupblocker 已禁用）但无法弄清楚如何执行 if 语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T06:20:54.147

你可以使用[`attribute contains selector`](http://api.jquery.com/attribute-contains-selector/).

```
$('a[href*="aggregator/h"]').each(function(){
    window.open(this.href);
}); 
```

# android - 适用于 Android 的垂直操作栏

> ID：11734238
> 
> 赞同：4
> 
> 时间：2012-07-31T06:19:10.303
> 
> 标签：android, android-actionbar

我想在我的应用程序中垂直显示操作栏。我找到了几个水平的例子，但没有找到垂直的例子。

谁能给我任何垂直操作栏的例子。

谢谢，大卫布朗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:33:36.470

[Android UI 设计](http://developer.android.com/design/index.html)指南中没有关于垂直[ActionBar](http://developer.android.com/reference/android/app/ActionBar.html)的内容。但是您可以通过锁定显示方向，然后对内容区域中[的视图应用旋转来强制实现类似的效果。](http://developer.android.com/reference/android/view/View.html#attr_android:rotation)您还可以通过下载 ActionBarSherlock 的源代码[并](http://actionbarsherlock.com/)实现您自己的 ActionBar 版本来达到目的。但我不推荐这两种解决方案。如果您真的打算将操作放在屏幕的一侧，我建议您使用小的垂直 LinearLayout，或者实施[Android Facebook 样式幻灯片](https://stackoverflow.com/q/8657894/517561)中讨论的侧导航解决方案之一。

# java - 如何使用 jdom 和 java 将数据附加到 xml 文件

> ID：11734248
> 
> 赞同：1
> 
> 时间：2012-07-31T06:19:58.590
> 
> 标签：java, xml, jdom

我想知道是否有人可以帮助将数据附加到 XML 文件中。下面，我有代码，它从另一个 xml 文件中获取数据，进行一些逻辑更改，并将更改写入新的输出文件。但是，通过这个[api](http://www.jdom.org/docs/apidocs/org/jdom2/output/XMLOutputter.html)

我`m having trouble understanding which method does appending. It seems like all of them creates a new XML file doc/overwrites an existing one if it exists. I`试图在循环时将标签附加到新文件中。

```
 for(int i = 0; i < itemList.size(); i++){

            //get the specific item node 
            Element item = (Element)itemList.get(i);

            //there are some non item nodes so need this check
            if(item.getName().equals("item")){  

                //do some logic changing to the tags

                //System.out.println(item.getValue());
                //System.out.println(item.getChild("Q").getValue());
                //System.out.println(item.getChild("A").getValue());

                boolean exists = (new File("/Users/davidyu/Desktop/file2.xml")).exists();
                //if file exists
                if(exists){
                    System.out.println("in here1");
                    xmlOutput.?????
                }
                else{
                    System.out.println("in here2");
                    xmlOutput.output(doc, new FileWriter("/Users/davidyu/Desktop/file2.xml"));
                }

            } 
```

我基本上想做的是在每次循环迭代后将一个新的项目标签写入文件中。该项目标签应包含新的子节点“Q”和“A”。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:26:01.743

鉴于您在循环中执行此操作，因此在循环开始之前加载文件*一次*，然后遍历循环并将元素添加到文档中，然后在循环之后再次保存它是有意义的。如果该文件事先不存在，请使用您需要的任何结构创建一个新文档（仅在内存中，因为您稍后会保存它） - 例如，只需一个适当的根元素。当然，您需要确定要添加新元素的位置。

*在不*首先加载现有文件的情况下，没有简单的方法可以将元素添加到现有 XML文件中。（虽然您可能*会*以流式方式执行此操作，但编写代码可能要复杂得多。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:33:40.493

XMLOutputter 只是将现有的 XML 结构输出到目标 - 在您的情况下是文件。在我看来，您似乎对更改现有 XML 文档的结构感兴趣。如果是这种情况，那么一旦您引用了要添加内容的元素（`Element item = (Element)itemList.get(i);`在您的示例中），您需要执行以下操作：

```
Element newElement = new Element("NewElement");
item.addContent(newElement); 
```

这将在给出的元素`<NewElement/>`下添加元素`item`

```
<item>
     <NewElement/>
</item> 
```

请参阅[元素](http://www.jdom.org/docs/apidocs.1.1/org/jdom/Element.html)javadocs。

# java - 中央两个按钮不好看黑莓

> ID：11734249
> 
> 赞同：0
> 
> 时间：2012-07-31T06:20:06.737
> 
> 标签：java, blackberry

我正在开发一个应用程序，我想在其中创建两个按钮。这些按钮应`center`与位图填充背景对齐自定义按钮。每个还应包含以该按钮为中心的文本。

问题是这两个按钮设置不正确。第二个按钮在第一个按钮之后，它的位图高度也比第一个按钮减小。

对于两个自定义按钮，我有相同的 CustomButton 类。

**这是代码：**

```
 CustomButtonField aboutM1 = new CustomButtonField(0,"About G1",registerbg,registerbg,Field.FOCUSABLE,0x324F85);
                    add(new RichTextField(Field.NON_FOCUSABLE));

                  //  CustomButtonField2 ForgotPass = new CustomButtonField2("Forgot Password?",0x324F85);
                    CustomButtonField ForgotPass = new CustomButtonField(0,"Forgot Password?",registerbg,registerbg,Field.FOCUSABLE,0x324F85);

                    add(new RichTextField(Field.NON_FOCUSABLE));

                    VerticalFieldManager bottomVFM = new VerticalFieldManager(USE_ALL_WIDTH);
                    HorizontalFieldManager bottomHFM = new HorizontalFieldManager(FIELD_HCENTER);

                    bottomHFM.add(aboutM1);
                    bottomHFM.add(ForgotPass);
                    bottomVFM.add(bottomHFM);
                    add(bottomVFM); 
```

**自定义按钮：**

```
import net.rim.device.api.system.Bitmap;
import net.rim.device.api.ui.*;

public class CustomButtonField extends Field
{
    Bitmap Unfocus_img, Focus_img, current_pic;
    int width;
    String text;
    Font font;   
    int custColor;
    CustomButtonField(int width, String text, Bitmap onFocus, Bitmap onUnfocus, long style,int custColor)
    {
        super(style);
        Unfocus_img = onUnfocus;
        Focus_img = onFocus;
        current_pic = onFocus;
        this.text = text;
        this.width = width;
        this.custColor = custColor;
    }
    protected void layout(int width, int height) 
    {
        setExtent(current_pic.getWidth(), current_pic.getHeight());        
    }
    protected void paint(Graphics graphics) 
    {
        try
        {
                FontFamily fntFamily = FontFamily.forName("BBAlpha Sans");
                font = fntFamily.getFont(Font.BOLD,20);              
        }
        catch(Exception e)
        {
            font = Font.getDefault();

        }
        graphics.setFont(font);

        graphics.setColor(custColor); 

        int xText = (getWidth() - font.getAdvance(text)) / 2;
        int yText = (getHeight() - font.getHeight()) / 2;

        graphics.drawBitmap(0, 0, current_pic.getWidth(), current_pic.getHeight(), current_pic , 0 , 0);
        graphics.drawText(text, xText, yText);

       /* graphics.drawBitmap(0, 0, current_pic.getWidth(), current_pic.getHeight(), current_pic , 0 , 0);
        graphics.drawText(text, width , 7);*/
        graphics.setDrawingStyle(Graphics.HCENTER | Graphics.VCENTER, true);
    }
    protected void onFocus(int direction) 
    {
        super.onFocus(direction);
        current_pic = Unfocus_img;
        this.invalidate();
    }
  protected void drawFocus(Graphics graphics, boolean on) 
  {

    }
    protected void onUnfocus() 
    {
        super.onUnfocus();
        current_pic = Focus_img;
        invalidate();
    }
    public boolean isFocusable() {
        return true;
    }
    protected boolean navigationClick(int status, int time) {
        fieldChangeNotify(0);
        return true;
    }
} 
```

![在此处输入图像描述](../Images/53cc192b1465aecbabe729a3bbe9674b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T06:17:40.370

您使用的代码是正确的，唯一的缺点是您根据位图宽度和文本长度将文本居中，而不是位图宽度。你可能需要改变你的方法。在下面的 URL 中查看 Blackberry UI 示例并检查 EmbossedButtonField Demo

```
https://github.com/blackberry/Samples-for-Java 
```

一旦我们不确定按钮标签的长度，它是创建自定义按钮的好方法。

# c - 可以语句 char str[]="abcdef"; 和 char *str="abcdef"; 用于解释 C 中的 char 数组和字符串字面量？

> ID：11734252
> 
> 赞同：-1
> 
> 时间：2012-07-31T06:20:26.363
> 
> 标签：c

> **可能重复：**
> [C 中的 char s[] 和 char *s 有什么区别？](https://stackoverflow.com/questions/1704407/what-is-the-difference-between-char-s-and-char-s-in-c)

可以声明吗

```
char str[]="abcdef"; 
```

和

```
char *str="abcdef"; 
```

用于解释 C 中的 char 数组和字符串字面量？char数组和字符串文字之间有什么关系？除了存储字符串文字之外，char 数组的实际用途是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T07:17:14.910

`char`字符串文字是不可修改的数组。

C99 6.4.5 p2：

> 字符串*文字*是用双引号括起来的零个或多个多字节字符序列，如“xyz”。

然后，在 C99 6.4.5 p5 中：

> 在翻译阶段 7 中，将一个字节或值为零的代码附加到由一个或多个字符串文字产生的每个多字节字符序列。然后使用多字节字符序列来初始化一个静态存储持续时间和长度刚好足以包含该序列的数组。对于字符串文字，数组元素具有 type **`char`**，并使用多字节字符序列的各个字节进行初始化；...

我的 C11 草案有类似的措辞。我相信它的措辞是“具有类型`char`”，正是为了允许将字符串文字分配给`char *`. 但是，该标准确实在 C99 6.4.5 p6 中继续说：

> 如果程序尝试修改这样的数组，则行为未定义。

如此可分配，但不可修改。

字符串文字可用作 . 数组的初始值设定项`char`。从 C99 6.7.8 p14 开始：

> 字符类型的数组可以由字符串字面量初始化，可选地用大括号括起来。字符串文字的连续字符（如果有空间或数组大小未知，则包括终止的空字符）初始化数组的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:23:35.817

你的第二个任务是错误的。它应该是一个`const char *`字符串文字，当分配给一个指针时，它们是常量，但是当它们初始化一个*数组*时它们变得可修改。例如，您不能在调用中使用第二个版本`strtok()`（谷歌其手册页以查看原因！）

# c++ - 用于存储和搜索比赛结果的数据结构

> ID：11734254
> 
> 赞同：0
> 
> 时间：2012-07-31T06:20:43.587
> 
> 标签：c++, data-structures

> 有 100 个玩家 p1, p2, ...... p100，每个玩家与其他玩家进行一场比赛。您必须存储作为每个组合（Pi，Pj）获胜者的比赛结果。

我应该使用什么数据结构来高效存储和搜索结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T06:26:58.813

查看关联容器，例如[std::map](http://en.cppreference.com/w/cpp/container/map)。这些允许您以对数查找时间存储键值对。您可以考虑类似索引对的对象的映射，以便您可以像这样搜索结果：

```
int result = myMap[PairLikeType(i,j)]; 
```

其中`i`和`j`是两个玩家的指数。

`std::map`被实现为二叉搜索树，但也有基于哈希表的映射，例如 C++11 的[std::unordered_map](http://en.cppreference.com/w/cpp/container/unordered_map)（`tr1/unordered_map`至少在 gcc 中可用）或`boost::hash_map`.

您可以通过定义自己的索引对（或使用`std::pair<int,int>`，为其提供小于比较）作为映射的键来实现这一点，并可能将其包装在一个类中，并使用允许您检查的访问器方法，给定一对指数：

```
struct ResultMap {
  int winnerID(int playerID1, int playerID2)
  {
    return m_map[std::make_pair(playerID1, playerID2)]; // or use map::find
                                                        // of you want to handle
                                                        // non-existent keys specially
  }
 private:
  std::map<std::pair<int,int>, int> m_map;
}; 
```

您可以使用 来实现上述`std::unordered_map`内容，但您必须为 . 提供自己的散列函数`std::pair<int,int>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:51:16.157

我会使用具有聪明功能的一维数组来计算索引。

我会将数组构造为数据包数组：

```
0 
1  0
2  0 1
3  0 1 2
4  0 1 2 3 
//and so on 
```

其中第一列对应于`i`玩家。raw对应`j`可以和i一起玩的玩家

这是数组在内存中的样子： `||0|0 1|1 0 1|1 0 0 1|`//0,1 - bool 结果

这是计算索引的函数。（它会出现一些错误，例如您必须将 1 添加到某个索引，但通常是正确的）

```
int index(int i, int j) // i = [0, 99], j = [0, 99]
{
    assert(i != j);
    if ( i < j) std::swap(i, j); //i should be maximum. i == j not considered

    int num_oponents = i;

    int pack_start_index = num_oponents * (num_oponents + 1) / 2; //sum of 1 + 2 + 3 + ... + num_oponents
    int pack_internal_index = j;

    return pack_start_index + pack_internal_index;
} 
```

在这种情况下，除了所需的数据（4950 项）外，没有其他任何东西被存储

该解决方案的思想类似于 2d 数组，但不存储重复项和 self 以及 self 结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T06:24:19.647

你考虑过二维数组吗？如果您只需要存储结果，那么我认为这将是最好的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T06:34:33.843

取一个 100x100 的数组。

将获胜者存储在每个位置

```
 p1 p2 p3  
 p1 0  p2 p1  
 p2 p2 0  p3 
 p3 p1 p3 0 
```

空间复杂度 O(n^2)

存储和查询的时间复杂度 O(1)

# java - 如何使用 javascript/jquery 获取 html struts styleClass

> ID：11734257
> 
> 赞同：0
> 
> 时间：2012-07-31T06:20:46.287
> 
> 标签：java, javascript, jquery, jsp, struts2

我需要在 javascript 中获取 styleClass 元素的值。页面在 jsp 中，带有 struts/html 标签元素。jsp代码是

```
<input type="hidden" class="filename" name="filename" value="<%= filename %>" />
                        <html:file property="testfile" styleClass="testfile"/> 
```

并单击按钮我调用javascript

```
function fields() {
    var filename = jQuery('.filename');
    alert(filename);
    var testfile= jQuery('.testfile').val();
    alert(testfile);
    } 
```

但是，在第一种情况（文件名）中，我得到 [object object] 返回，在第二种情况下，我得到“未定义”。有人可以就如何在 jquery 中获取上传的文件名给出一些指示。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:24:57.813

如果要从输入中获取值：

`var filename = $('.filename').val();`

或者

`var filename = jQuery('.filename').val();`（同上）

在此处阅读更多信息-> [jquery 选择器无法从隐藏字段中读取](https://stackoverflow.com/questions/996644/jquery-selector-cant-read-from-hidden-field)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:48:42.277

尝试这个

```
var testfile= jQuery('.testfile').attr('value'); 
```

出于安全原因，您的浏览器可能会阻止访问 value 属性。在不同的浏览器中尝试这两个选项 - Chrome、Firefox、IE 等。

# iphone - 在 iPad 中使用 Wi-fi/LAN 进行视频通话的 API

> ID：11734262
> 
> 赞同：0
> 
> 时间：2012-07-31T06:21:31.617
> 
> 标签：iphone, ios, ipad

我目前正在研究如何使用 Wi-fi 或通过 LAN 与其他 ipad 进行视频通话，任何人都可以列出一些支持视频通话功能的 API 吗？请提供有关视频通话如何工作的任何链接或编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:56:05.233

没有默认方法可以创建一个 iPad 到另一个 iPad 的视频通话...

FaceTime 可使用以下 URL 架构之一集成到 iOS 应用程序中：

*   面对面时间：//我的朋友
*   facetime://myfriend@somewhere.com
*   面谈时间：//5558675309

不幸的是，这是一种未记录的方式，因此根据[此 Apple 开发者论坛帖子](https://devforums.apple.com/message/629980#629980)，Apple 拒绝使用此 FaceTime API 的应用程序。所以我认为，它现在不是一个可行的功能。

我确定有一些视频通话 SDK，例如[TokBox](http://tokbox.com/live-video-ios-sdk)或[iDoubs](http://code.google.com/p/idoubs)（开源选项）

使用以下 URL 架构将 Skype 集成到您的应用程序的最简单方法之一，但不确定它是否足以满足您的需求。

```
NSString *contact= @"MyDude";
NSURL *skypeURL= [NSURL URLWithString:[NSString stringWithFormat:@"skype://%@?call", contact]];
if ([[UIApplication sharedApplication] canOpenURL:skypeURL]) {
      [[UIApplication sharedApplication] openURL:skypeURL];
} 
```

祝你好运！

# asp.net - 错误重定向循环

> ID：11734266
> 
> 赞同：2
> 
> 时间：2012-07-31T06:21:54.710
> 
> 标签：asp.net

此网页有重定向循环。
的网页`localhost:3613/SqaSuite/LessPermission.aspx`导致了过多的重定向。清除此站点的 cookie 或允许第三方 cookie 可能会解决问题。如果不是，则可能是服务器配置问题，而不是您的计算机问题。

以下是一些建议：

*   稍后重新载入此网页。
*   了解有关此问题的更多信息：

    > 错误 310 (net::ERR_TOO_MANY_REDIRECTS)：重定向太多。

尽管清除了 cookie 并且没有递归和/或许多循环重定向，但我遇到了这个错误。帮助 ？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-31T07:16:35.167

检查您的页面上是否有某个地方（例如，称为“SamePage.aspx”），或者某个全局的地方，这个无限循环。

```
 Response.Redirect("SamePage.aspx"); 
```

并将其更改为

```
 if(!HttpContext.Current.Request.Path.EndsWith("SamePage.aspx", StringComparison.InvariantCultureIgnoreCase))
       Response.Redirect("SamePage.aspx"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-31T12:15:46.693

试试这个：

```
if (!IsPostBack)
{    
    Response.Redirect("~/Default.aspx");         
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-29T17:00:10.397

也可能是因为`Button.PostBackUrl`正在重定向到同一页面。那是我的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-08T00:44:49.593

默认情况下，asp.net MVC 启用 OwinStartup 并重定向到 Account 控制器下的 Login。您可以参考 Startup.Auth。执行以下操作将解决此问题。

```
 <appSettings>
    <add key="owin:AutomaticAppStartup" value="false" />
  </appSettings> 
```

# c# - 无效的列名异常，即使列存在

> ID：11734271
> 
> 赞同：0
> 
> 时间：2012-07-31T06:22:22.490
> 
> 标签：c#, sql

当我尝试使用此查询访问数据库时，它给了我一个错误

```
invalid column name 'sandeep' which is the name of the patient ie itemArray[3] 
```

代码：

```
case "patient":
string queryPatientCheck = @"select * 
                             from patient
                             where 
                             [patientID]={0} and
                             [patientName]={1}";

queryPatientCheck = string.Format(queryPatientCheck, itemArray[2], itemArray[3]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T06:46:11.120

那么你的sql翻译成这个

```
select * 
                             from patient
                             where 
                             [patientID]={0} and
                             [patientName]=sandeep 
```

在这种情况下，它会搜索名为 sandeep 的列。你想要的是字符串sandeep，即`'sandeep'`

```
select * 
                             from patient
                             where 
                             [patientID]={0} and
                             [patientName]='sandeep' 
```

# sql - 获取表格的行总和

> ID：11734272
> 
> 赞同：0
> 
> 时间：2012-07-31T06:22:32.697
> 
> 标签：sql, datatable

是否可以从 SQL 中的数据表中获取所有行的行总和。我有一个这样的数据表

```
Date             col1           col2       col3
30/7/2012          5              2           3
31/7/2012          2              3           5
01/08/2012         2              4           1 
```

但我想通过创建一个列名 Total 来实现这样的目标：

```
 Date            Total      col1           col2       col3
30/7/2012         10          5              2           3
31/7/2012         9           1              3           5
01/08/2012        7           2              4           1 
```

是否可以？如果是，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T06:26:39.567

试试这个：

```
select Date,
       col1 + col2 + col3 as Total,
       col1, col2, col3
  from your_table; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:00:00.823

您可以使用Total的[`DataColumn.Expression`属性](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression.aspx)`DataColumn`将列中的值计算为每行中其他列的值的总和：

```
var totalColumn = new DataColumn("Total");
// Add your Total column to your DataTable.
dt.Columns.Add(totalColumn);
// The new column will be the second in the DataTable, like your diagram shows.
totalColumn.SetOrdinal(1);
// Use the sum of each row's Col1, Col2 and Col3 for the values in this column.
totalColumn.Expression = "[Col1] + [Col2] + [Col3]"; 
```

# java - javax.faces.application.ViewExpiredException：负载测试期间

> ID：11734273
> 
> 赞同：1
> 
> 时间：2012-07-31T06:22:39.757
> 
> 标签：java, jsf, jsf-1.2, viewexpiredexception

我们正在为我们的应用程序使用 SUN JSF 1.2、WebSphere 7.0，我们仅在负载测试期间收到 ViewExpiredException

我已经通过下面的链接

[javax.faces.application.ViewExpiredException：无法恢复视图](https://stackoverflow.com/questions/3642919/javax-faces-application-viewexpiredexception-view-could-not-be-restored/3642969#3642969)

追了大部分的东西，

1.  设置上下文参数，

    com.sun.faces.enableRestoreView11Compatibility true

2.  通过在所有 JSP 页面顶部添加以下代码，指示浏览器不缓存动态 JSF 页面，

    ```
     res.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); 
        res.setHeader("Pragma", "no-cache");
        res.setDateHeader("Expires", -1); 
    ```

当我们手动浏览应用程序时，我们没有遇到异常。我无法弄清楚这个问题。

友善的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:03:11.370

视图存储在会话中。会话中存储的默认最大视图数量为 15，这在 Mojarra 中可由`com.sun.faces.numberOfViewsInSession`上下文参数配置。

想象这样一种情况，其中最终用户在同一会话中的至少 16 个不同的浏览器选项卡/窗口中打开带有表单（实际上是一个视图）的随机 JSF 页面。然后在第一个打开的选项卡/窗口中提交表单将抛出`ViewExpiredException`. 也许在负载测试期间也会发生同样的情况。负载测试应该更好地创建不同的会话。

正如您自己找到的答案中所述，唯一的解决方法是将 JSF 状态保存方法设置为`client`而不是`server`. 禁用浏览器缓存只是防止`ViewExpiredException`最终用户从浏览器缓存中获得的页面上发生这种情况（例如，通过按下后退按钮等）。

# php - 如何使用正则表达式获取字符串的包装元素

> ID：11734275
> 
> 赞同：0
> 
> 时间：2012-07-31T06:22:43.937
> 
> 标签：php, regex, preg-match

> **可能重复：**
> [使用 preg_match php 获取包装元素](https://stackoverflow.com/questions/11733733/get-wrapping-element-using-preg-match-php)

我想获取包装指定字符串的元素，例如：

```
$string = "My String";
$code = "<div class="string"><p class='text'>My String</p></div>"; 
```

那么我如何能够`<p class='text'></p>`通过使用正则表达式模式匹配它来包装字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:10:23.147

使用 PHP 的 DOM 类，您可以做到这一点。

```
$html = new DomDocument();
// load in the HTML
$html->loadHTML('<div class="string"><p class=\'text\'>My String</p></div>');
// create XPath object
$xpath = new DOMXPath($html);
// get a DOMNodeList containing every DOMNode which has the text 'My String'
$list = $xpath->evaluate("//*[text() = 'My String']");
// lets grab the first item from the list
$element = $list->item(0); 
```

现在我们有了整个`<p>`-tag。但是我们需要删除所有子节点。这里有一个小功能：

```
function remove_children($node) {
  while (($childnode = $node->firstChild) != null) {
    remove_children($childnode);
    $node->removeChild($childnode);
  }
} 
```

让我们使用这个功能：

```
// remove all the child nodes (including the text 'My String')
remove_children($element);

// this will output '<p class="text"></p>'
echo $html->saveHTML($element); 
```

# workflow-foundation-4 - 各州不支持的工作流服务和操作

> ID：11734282
> 
> 赞同：1
> 
> 时间：2012-07-31T06:23:13.857
> 
> 标签：workflow-foundation-4, workflow-services

我有两个工作流服务（状态机），它们应该合作并交换信息以完成所需的行为。

我遇到的问题（但我也只有一台状态机）是有时我尝试发送当前状态不允许的操作。

有两个问题：1）我必须等待操作超时才能知道该操作是不允许的 2）由于其他问题，我正在“屏蔽”真正的超时

到目前为止，我找到了两种可能的解决方案：1）我可以更改签名以返回 true（允许）和 false（不允许）并将所有操作添加到所有状态，（不允许的操作会触发自我转换） 2）我总是将所有转换添加到所有状态（不允许将触发自转换）但对于不允许的转换，我将发送异常

我想知道哪个是最好的选择（当然，我也很欣赏其他可能的解决方案）。我还想知道如何回复带有异常的请求（也许将其扔在 try/catch 中？）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:12:30.770

这里的另一个选项是使用工作流持久性存储中的信息。其中一列包含活动书签，在接收活动的情况下，这是 SOAP 操作。您可以有一个单独的服务来公开给定工作流实例的该信息。

您仍然需要考虑这样一个事实，即您可能会将消息发送到处于不同状态的工作流，因为工作流持久性存储不会立即更新（除非您这样做）并且因为多个人可能会将消息发送到相同的工作流实例。这种基本技术仍然非常有效，我已经使用它来根据工作流的状态启用/禁用 UI 上的按钮。

# blackberry - 后台应用程序在收到推送通知时无法显示 UI

> ID：11734284
> 
> 赞同：1
> 
> 时间：2012-07-31T06:23:15.617
> 
> 标签：blackberry, push-notification, listener, background-application

这是我的完整推送通知侦听器。

```
public class MyApp extends UiApplication {
    public static void main(String[] args) {
        PushAgent pa = new PushAgent();
        pa.enterEventDispatcher();
    }
} 
```

这个类是否正确扩展？

```
public class PushAgent extends Application {
private static final String PUSH_PORT = "32023";
private static final String BPAS_URL = "http://pushapi.eval.blackberry.com";
private static final String APP_ID = "2727-c55087eR3001rr475448i013212a56shss2";
private static final String CONNECTION_SUFFIX = ";deviceside=false;ConnectionType=mds-public";

public static final long ID = 0x749cb23a75c60e2dL;

private MessageReadingThread messageReadingThread;

public PushAgent() {
    if (!CoverageInfo.isCoverageSufficient(CoverageInfo.COVERAGE_BIS_B)) {
        return;
    }
    if (DeviceInfo.isSimulator()) {
        return;
    }
    messageReadingThread = new MessageReadingThread();
    messageReadingThread.start();
    registerBpas();
}

private static class MessageReadingThread extends Thread {

    private boolean running;
    private ServerSocketConnection socket;
    private HttpServerConnection conn;
    private InputStream inputStream;
    private PushInputStream pushInputStream;

    public MessageReadingThread() {
        this.running = true;
    }

    public void run() {
        String url = "http://:" + PUSH_PORT + CONNECTION_SUFFIX;

        try {
            socket = (ServerSocketConnection) Connector.open(url);
        } catch (IOException ex) {
        }

        while (running) {
            try {
                Object o = socket.acceptAndOpen();
                conn = (HttpServerConnection) o;
                inputStream = conn.openInputStream();
                pushInputStream = new MDSPushInputStream(conn, inputStream);
                PushMessageReader.process(pushInputStream, conn);
            } catch (Exception e) {
                if (running) {
                    running = false;
                }
            } finally {
                close(conn, pushInputStream, null);
            }
        }
    }
}

public static void close(Connection conn, InputStream is, OutputStream os) {
    if (os != null) {
        try {
            os.close();
        } catch (IOException e) {
        }
    }
    if (is != null) {
        try {
            is.close();
        } catch (IOException e) {
        }
    }
    if (conn != null) {
        try {
            conn.close();
        } catch (IOException e) {
        }
    }
}

private String formRegisterRequest(String bpasUrl, String appId,
        String token) {
    StringBuffer sb = new StringBuffer(bpasUrl);
    sb.append("/mss/PD_subReg?");
    sb.append("serviceid=").append(appId);
    sb.append("&osversion=").append(DeviceInfo.getSoftwareVersion());
    sb.append("&model=").append(DeviceInfo.getDeviceName());
    if (token != null && token.length() > 0) {
        sb.append("&").append(token);
    }
    return sb.toString();
}

private void registerBpas() {
    final String registerUrl = formRegisterRequest(BPAS_URL, APP_ID, null)
            + CONNECTION_SUFFIX;
    Object theSource = new Object() {
        public String toString() {
            return "Oriental Daily";
        }
    };

    NotificationsManager.registerSource(ID, theSource,
            NotificationsConstants.IMPORTANT);

    new Thread() {
        public void run() {
            try {
                HttpConnection httpConnection = (HttpConnection) Connector
                        .open(registerUrl);
                InputStream is = httpConnection.openInputStream();
                String response = new String(IOUtilities.streamToBytes(is));
                close(httpConnection, is, null);

                String nextUrl = formRegisterRequest(BPAS_URL, APP_ID,
                        response) + CONNECTION_SUFFIX;
                HttpConnection nextHttpConnection = (HttpConnection) Connector
                        .open(nextUrl);
                InputStream nextInputStream = nextHttpConnection
                        .openInputStream();
                response = new String(
                        IOUtilities.streamToBytes(nextInputStream));
                close(nextHttpConnection, is, null);
            } catch (IOException e) {
            }
        }
    }.start();
}
}
} 
```

这是`process`;

```
public class PushMessageReader {
private static final String MESSAGE_ID_HEADER = "Push-Message-ID";
private static final String MESSAGE_TYPE_TEXT = "text";
private static final String MESSAGE_TYPE_IMAGE = "image";

private static final int MESSAGE_ID_HISTORY_LENGTH = 10;
private static String[] messageIdHistory = new String[MESSAGE_ID_HISTORY_LENGTH];
private static byte historyIndex;

private static byte[] buffer = new byte[15 * 1024];
private static byte[] imageBuffer = new byte[10 * 1024];

public static final long ID = 0x749cb23a75c60e2dL;
public static Bitmap popup = Bitmap.getBitmapResource("icon_24.png");

private PushMessageReader() {
}

public static void process(PushInputStream pis, Connection conn) {
    try {
        HttpServerConnection httpConn;

        if (conn instanceof HttpServerConnection) {
            httpConn = (HttpServerConnection) conn;
        } else {
            throw new IllegalArgumentException(
                    "Can not process non-http pushes, expected HttpServerConnection but have "
                            + conn.getClass().getName());
        }

        String msgId = httpConn.getHeaderField(MESSAGE_ID_HEADER);
        String msgType = httpConn.getType();
        String encoding = httpConn.getEncoding();

        if (!alreadyReceived(msgId)) {
            byte[] binaryData;

            if (msgId == null) {
                msgId = String.valueOf(System.currentTimeMillis());
            }

            if (msgType.indexOf(MESSAGE_TYPE_TEXT) >= 0) {
                int size = pis.read(buffer);
                binaryData = new byte[size];
                System.arraycopy(buffer, 0, binaryData, 0, size);

                NotificationsManager.triggerImmediateEvent(ID, 0, null,
                        null);
                processTextMessage(buffer);
            } else if (msgType.indexOf(MESSAGE_TYPE_IMAGE) >= 0) {
                int size = pis.read(buffer);

                if (encoding != null && encoding.equalsIgnoreCase("base64")) {
                    Base64InputStream bis = new Base64InputStream(
                            new ByteArrayInputStream(buffer, 0, size));
                    size = bis.read(imageBuffer);
                }

                binaryData = new byte[size];
                System.arraycopy(buffer, 0, binaryData, 0, size);
            }
        }
        pis.accept();
    } catch (Exception e) {

    } finally {
        PushAgent.close(conn, pis, null);
    }
}

private static boolean alreadyReceived(String id) {
    if (id == null) {
        return false;
    }

    if (Arrays.contains(messageIdHistory, id)) {
        return true;
    }

    messageIdHistory[historyIndex++] = id;

    if (historyIndex >= MESSAGE_ID_HISTORY_LENGTH) {
        historyIndex = 0;
    }
    return false;
}

private static void processTextMessage(final byte[] data) {
    synchronized (Application.getEventLock()) {

        UiEngine ui = Ui.getUiEngine();

        GlobalDialog screen = new GlobalDialog("New Notification",
                "Article ID : " + new String(data), new String(data));

        ui.pushGlobalScreen(screen, 1, UiEngine.GLOBAL_QUEUE);
    }
}

static class GlobalDialog extends PopupScreen implements
        FieldChangeListener {
    ButtonField mOKButton = new ButtonField("OK", ButtonField.CONSUME_CLICK
            | FIELD_HCENTER);
    String data = "";

    public GlobalDialog(String title, String text, String data) {
        super(new VerticalFieldManager());
        this.data = data;

        add(new LabelField(title));
        add(new SeparatorField(SeparatorField.LINE_HORIZONTAL));
        add(new LabelField(text, DrawStyle.HCENTER));

        mOKButton.setChangeListener(this);
        add(mOKButton);
    }

    public void fieldChanged(Field field, int context) {
        if (mOKButton == field) {
            try {
                ApplicationManager.getApplicationManager().launch(
                        "OrientalDailyBB");
                ApplicationManager.getApplicationManager().postGlobalEvent(
                        ID, 0, 0, data, null);

                ApplicationIndicatorRegistry reg = ApplicationIndicatorRegistry
                        .getInstance();
                reg.unregister();

                close();
            } catch (ApplicationManagerException e) {
            }
        }
    }
}
} 
```

在这个项目中，我检查**了启动时自动运行，**以便此后台应用程序侦听器将一直运行，并在 BB App Descriptor 中将**启动层**设置为 7。

但是，它无法显示弹出窗口`Dialog`，但我可以看到设备已收到推送通知。

在弹出对话框和用户单击**OK**后将启动`OrientalDailyBB`项目并显示特定的`MainScreen`.

**仅供参考**：侦听器优先级高于`OrientalDailyBB`项目，因为它是后台应用程序。所以当我安装时`OrientalDailyBB`，它也会安装这个监听器。发生这种情况是因为此侦听器不在`OrientalDailyBB`项目文件夹中，而是在不同的文件夹中。我确实将它们分开以避免当用户退出时后台应用程序被终止`OrientalDailyBB`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:56:03.937

我相信这是一个线程问题。`pushGlobalScreen`是您可以尝试使用的消息`invokeLater`。

```
UiApplication.getUiApplication().invokeLater(new Runnable() {
  public void run() {
    ui.pushGlobalScreen(screen, 1, UiEngine.GLOBAL_QUEUE);
  }
}); 
```

您也可以尝试将应用程序推送到前台。

# android - GPU后台处理

> ID：11734286
> 
> 赞同：2
> 
> 时间：2012-07-31T06:23:33.677
> 
> 标签：android, gpu, background-process

就像 CPU 一样，GPU 是否也在后台运行一些处理？我想要得到的是 GPU 上的当前负载。所以，我想知道 GPU 上的负载是否完全基于屏幕上当前显示的内容，或者它是否还在后台进行了一些与使用 GPU 的其他应用程序相关的处理。

提前致谢。

# ruby-on-rails - Omniauth + 设计重定向错误

> ID：11734291
> 
> 赞同：0
> 
> 时间：2012-07-31T06:23:47.287
> 
> 标签：ruby-on-rails, facebook, devise, omniauth, facebook-iframe

我有以下问题：我的应用程序作为 Facebook 应用程序运行，但在用户第一次接受它的 Facebook 权限时，它被重定向到正确的 URL，但在 Facebook（画布）之外。我该如何解决？

这是我的实际设置：

设计.rb：`config.omniauth :facebook, ENV['FACEBOOK_APP_ID'], ENV['FACEBOOK_SECRET'], scope: "email,publish_stream"`

应用程序/控制器/omniauth_callback_controller.rb

```
class OmniauthCallbacksController < Devise::OmniauthCallbacksController

      def passthru
      render :file => "#{Rails.root}/public/404.html", :status => 404, :layout => false
      end

      def facebook

        @user = User.find_for_facebook_oauth(request.env["omniauth.auth"], current_user)

        if @user.persisted?
          flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Facebook"

          sign_in_and_redirect @user, :event => :authentication
        else
          session["devise.facebook_data"] = request.env["omniauth.auth"]
          redirect_to root_path
        end
      end

      def after_sign_in_path_for(resource)
        inicio_path
      end
    end 
```

路线.rb

```
Pl::Application.routes.draw do

      ActiveAdmin.routes(self)

      mount Resque::Server, :at => "/resque"

      devise_for :admin_users, ActiveAdmin::Devise.config

      devise_for :users, :controllers => { :omniauth_callbacks => "omniauth_callbacks" }

      devise_scope :user do
      get '/users/auth/:provider' => 'users/omniauth_callbacks#passthru'
      end

      match 'states'  => 'game_plays#states'
      match 'cities'  => 'game_plays#cities'
      match 'parties' => 'game_plays#parties'
      match 'prefeito' => 'game_plays#prefeito'
      match 'prefeitos' => 'game_plays#prefeitos'
      match 'vereadores' => 'game_plays#vereadores'
      match 'parties' => 'game_plays#parties'
      match 'qualities' => 'game_plays#qualities'
      match 'start' => 'game_plays#start'
      match 'generated_image' => 'game_plays#generated_image'
      match 'save_game_play' => 'game_plays#save_game_play'
      match 'final' => 'game_plays#final', :as => :final

      match 'inicio'  => 'game_plays#index'  

      root :to => 'game_plays#bem_vindo'

    end 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:43:32.850

这是我几个月前在这个问题上的经验，我希望它有所帮助。

从 Facebook 的角度来看，这正是它应该做的。它无法识别请求来源之间的差异。您必须更改请求中的重定向 URL 以使其保留在 iframe 中。

我发现最简单的方法是让 iframe url 转到 my_website.com/fb-app，它设置一个会话变量，让您知道您在画布中，并确保他们已经通过 facebook 登录。然后，它将它们重定向到画布站点，该站点正常运行，用户永远不会注意到任何事情。

```
def fbapp

  session[:fbapp] = true

  if user_signed_in? == false
    redirect_to user_omniauth_authorize_path(:facebook)
  else
    redirect_to $APP_CANVAS_URL + "?auth_token=" + current_user.authentication_token
  end
end 
```

然后，在您的 Application_controller.rb 中，您需要更改重定向路径。这就是它在我的应用程序中的样子，注意 $APP_CANVAS_URL 应该类似于[https://apps.facebook.com/your_app_here](https://apps.facebook.com/your_app_here)

```
def after_sign_in_path_for(resource_or_scope)  
  if session[:fbapp] == true
    $APP_CANVAS_URL + "?auth_token=" + current_user.authentication_token
  else
    root_path
  end
end 
```

我怀疑这是最好的方法，但这是我经过数小时的挫折后必须为我工作的方法。我希望它有所帮助。

# jsf - Flash 范围在带有 jsf2.1 的 glassfish 中不起作用

> ID：11734292
> 
> 赞同：1
> 
> 时间：2012-07-31T06:23:48.280
> 
> 标签：jsf, glassfish

当我在 glassfish 中使用闪光灯范围时，它的寿命比一个请求长，但与 jetty8 一起工作正常，甚至尝试了最新版本的 glassfish，但它不工作。JSF 有一个关于它的 jira，他们已经在下一个版本中解决了它，我什至为 JSF 尝试了那个版本的 jars，但同样的问题仍然存在于 Glassfish 但适用于 Jetty8。很多天以来都面临这个问题，任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:11:44.773

Jetty 作为准系统 servletcontainer 没有捆绑任何 JSF 实现，并且始终使用与 webapp 一起提供的实现。

Glassfish 作为一个成熟的 Java EE 应用程序服务器，捆绑了一个 JSF 实现，与 web 应用程序一起提供的实现默认总是被忽略。如果您想升级 Glassfish 捆绑的 JSF 实现，那么您应该替换`/glassfish/modules`文件夹中的 JAR。或者，如果您想强制 Glassfish 使用 webapp 提供的 JSF 实现，那么您应该将以下条目添加到`/WEB-INF/glassfish-web.xml`（或`sun-web.xml`，取决于使用的 GF 版本）：

```
<class-loader delegate="false" />
<property name="useBundledJsf" value="true" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:38:30.060

我遇到过同样的问题。该问题是由 Mojarra（甚至是 2.1.11）无法处理 HTTP 分块引起的。通过禁用它，闪光灯按预期清空。

您可以在管理控制台中禁用它

*   配置
*   服务器配置
*   网络配置
*   协议
*   http-listener-[N]
    *   HTTP 选项卡
    *   分块

# jquery - $(window) 或 $(document) 测量宽度和高度以在每个屏幕上自动适应浏览器中的图像

> ID：11734293
> 
> 赞同：0
> 
> 时间：2012-07-31T06:23:49.597
> 
> 标签：jquery, html

我必须以每种屏幕分辨率将所有图像放在屏幕上。

我应该使用哪个`$(window)`或`$(document)`测量`height /width`来自动调整图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:28:43.287

如果所有图像都没有固定高度，则使用

```
$(window).load(function () {
    // your code goes here which will be executed once all the images 
   // got loaded (seen)
}); 
```

如果您正在加载的所有图像的高度都是固定的，那么不要等待图像被加载，只需为`<img>`标签分配固定高度并适合它们。利用

```
$(document).ready(function () {
    // your code goes here which will be executed once the DOM is ready 
    // (means all the tags including IMG tags) are loaded. 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:29:01.873

我使用这样的窗口：

```
function resizeThings(){
var  winH = $(window).height();
var  winW = $(window).width();

// let's say you are trying to match images to height
 $('img').each(function(){
   $(this).css('height', winH); 
 }); 
```

};

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T06:26:03.193

您需要获取 $(window)。

`window`包括`document`. _ `window`是浏览器屏幕，因此是屏幕上的可视区域，而是`document`您的文档。因此，加载到浏览器中的 html 页面可以小于您的屏幕尺寸。

# iphone - 在 xcode 4.4 中构建失败且没有错误

> ID：11734295
> 
> 赞同：1
> 
> 时间：2012-07-31T06:23:54.940
> 
> 标签：iphone, ios, xcode, xcode4.4

我的项目在 xcode 4.3 版之前运行良好，当我将其更新到 4.4 版时，它显示失败，在构建代码时没有任何错误，我尝试通过谷歌搜索并尝试所有可能的步骤，但无法解决我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T07:37:59.893

我有这个问题。我没有意识到我以某种方式通过错误选项卡底部的一个空格过滤了错误:(。删除错误页面底部的过滤器将其全部排序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T07:12:45.913

我通过安装命令行工具解决了我的问题

> XCode > 首选项 > 下载 > 组件 > 命令行工具。

# log4j - log4j:WARN 请正确初始化log4j系统；仍然创建日志文件，但在 UNIX 中没有

> ID：11734297
> 
> 赞同：1
> 
> 时间：2012-07-31T06:24:04.413
> 
> 标签：log4j, struts

我正在开发具有 commons-logging.jar 并用于记录 log4j.jar 的 Web 应用程序。
服务器启动时收到以下消息。

```
log4j:WARN No appenders could be found for logger (org.apache.struts.util.PropertyMessageResources).
log4j:WARN Please initialize the log4j system properly. 
```

但仍然会创建日志文件，格式也与 log4j.properties 中指定的相同。
**应用程序日志文件是在 Windows 环境中创建的，但不是在 Unix 环境中创建的。**
为什么它不在 UNIX 中创建日志文件？文件夹有写权限..有
什么想法吗？
拉克斯曼乔达里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:10:44.130

你在服务器启动时收到的消息只是一个警告，你的日志文件应该被创建（你可以在[这篇文章](https://stackoverflow.com/questions/6608775/please-initialize-the-log4j-system-properly-while-running-web-service#6616858)中找到对消息的解释）。

为什么文件在 Windows 中创建但在 Unix 中没有创建可能有很多原因：运行应用程序的用户的权限是第一位的，也许配置的路径仍然是 Windows 路径（例如包含 C :\ 也许），也许您打算使用绝对路径而忘记在其前面加上 / ......如果没有看到您的配置，很难说。首先检查这些，也许用您正在使用的配置更新问题。

有时可能发生的情况是您使用文件的相对路径并且该文件是相对于 Windows 中的某个文件夹创建的，并且您希望它在 Unix 中是相同的。但是“当前文件夹”可能是 Unix 中的另一个。也许文件被创建但它位于另一个地方？尝试在磁盘上搜索它...

# sphinx - 在语音识别中建立声学模型

> ID：11734302
> 
> 赞同：0
> 
> 时间：2012-07-31T06:24:21.830
> 
> 标签：sphinx, speech-recognition, decoding

> **可能重复：**
> [为什么我在此语音识别代码中缺少 an4-1-1.match 文件？](https://stackoverflow.com/questions/11739675/why-am-i-missing-the-an4-1-1-match-file-in-this-speech-recognition-code)

我正在做语音识别并使用 Ubuntu 作为我的操作系统
我在解码时遇到问题。
我已按照[此处](http://www.speech.cs.cmu.edu/sphinx/tutorial.html#pocketsphinx)的所有说明进行操作。我已经下载了 Sphinxbase、Sphinx3、an4 和 Sphinxtrain 并“配置 -> 制作”每个文件夹。
但是当我进入解码部分时。
当我输入“perl scripts_pl/decode/slave.pl”时，
我遇到了这些错误。

```
MODULE: DECODE Decoding using models previously trained
        Decoding 130 segments starting at 0 (part 1 of 1) 
Could not find executable for /home/go/Documents/tutorial/an4/bin/sphinx3_decode at /home/go/Documents/tutorial/an4/scripts_pl/decode/../lib/SphinxTrain/Util.pm line 299.
        Aligning results to find error rate
Can't open /home/go/Documents/tutorial/an4/result/an4-1-1.match
word_align.pl failed with error code 65280 at scripts_pl/decode/slave.pl line 173. 
```

可能是什么问题？

# sharepoint - 在获取列表项时给出“Microsoft sharepoint soapserver soap server exception”

> ID：11734307
> 
> 赞同：0
> 
> 时间：2012-07-31T06:24:44.200
> 
> 标签：sharepoint, sharepoint-2010

我正在尝试通过使用 web 服务参考模型来获取列表项。我正在尝试获取列表的详细信息

```
 SPSeriveReference.Lists client = new SPSeriveReference.Lists();

                client.Credentials = new NetworkCredential("Administrator", "pswd","MyDomain");
                XmlDocument mydoc = new XmlDocument();
                XmlElement viewFileds = mydoc.CreateElement("ViewFields");
                viewFileds.InnerXml = "<FieldRef Name=\"Title\" />" +
        "<FieldRef Name=\"Name\" />" +
        "<FieldRef Name=\"Address\" />";
                XmlNode listItems = client.GetListItems("Manager", null, null, viewFileds, null, null, null); //a4af13f3-69f6-45e3-930d-8c2ce61a10fd
                //XmlNode listItems = client.GetListItems("Manager", null, null, viewFileds, null, null, null);
                foreach (XmlNode node in listItems)
                {
                    if (node.Name == "rs:data")
                    {
                        for (int i = 0; i < node.ChildNodes.Count; i++)
                        {
                            if (node.ChildNodes[i].Name=="z:row")
                            {
                                string title = node.ChildNodes[i].Attributes["ows_Title"].Name;
                                string name = node.ChildNodes[i].Attributes["ows_Name"].Name;
                                string address = node.ChildNodes[i].Attributes["ows_Address"].Name;
                                Console.WriteLine(title + " " + name + " " + address);
                            }
                        }
                    }
                } 
```

但这会导致运行时异常为“Microsoft.SharePoint.SoapServer.SoapServerException” 这个解决方案是什么？我验证了之前关于相同错误的堆栈溢出问题。但是没有一个提供这个问题的解决方案。

# c# - 在 GridView 的页脚中显示总计，并在最后一列中添加列总和（行虎钳）

> ID：11734308
> 
> 赞同：16
> 
> 时间：2012-07-31T06:24:45.590
> 
> 标签：c#, asp.net, gridview, footer

在我的 Asp.net 应用程序中，我有一个`GridView`并且我`column[6]`自己使用后面的代码生成数据。

通过查看下面的代码，我有一个`footer`适用于我的`gridview`. 问题是如果我使用页脚，我的 column[6] 文本不会出现。如果我删除页脚文本代码，则会出现我的 column[6] 文本。问题是什么？两个代码不能一起使用？我已经设置 ShowFooter="True"

```
protected void Page_Load(object sender, EventArgs e)
{
    for (int i = 0; i < (this.GridView1.Rows.Count); i++)
    {
       this.GridView1.Rows[i].Cells[6].Text = "testing";
       //GridView1.Columns[1].FooterText ="footer 1";
    }
} 
```

.aspx

```
<asp:GridView ID="GridView1" runat="server" DataSourceID="SqlDataSource1" 
            AutoGenerateColumns="False" DataKeyNames="ID" CellPadding="4" 
            ForeColor="#333333" GridLines="None" ShowFooter="True" 
                    onrowdatabound="GridView1_RowDataBound">
            <RowStyle BackColor="#EFF3FB" />
            <Columns>
                <asp:BoundField DataField="reportDate" HeaderText="Report Date" dataformatstring="{0:dd MMMM yyyy}" SortExpression="reportDate" />
                <asp:BoundField DataField="sponsorBonus" HeaderText="Sponsor Bonus"  dataformatstring="{0:0.00}" SortExpression="sponsorBonus" HtmlEncode="False" />
                <asp:BoundField DataField="pairingBonus" HeaderText="Pairing Bonus" HtmlEncode="False" SortExpression="pairingBonus" dataformatstring="{0:c}" />                                       
                <asp:BoundField DataField="staticBonus" HeaderText="Static Bonus"  SortExpression="staticBonus" />
                <asp:BoundField DataField="leftBonus" HeaderText="Left Bonus"  SortExpression="leftBonus" />
                <asp:BoundField DataField="rightBonus" HeaderText="Right Bonus"  SortExpression="rightBonus" />
                <asp:BoundField HeaderText="Total" SortExpression="total" >
                <ItemStyle Width="100px" />
                </asp:BoundField>
            </Columns>
            <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
            <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
            <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
            <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
            <EditRowStyle BackColor="#2461BF" />
            <AlternatingRowStyle BackColor="White" />            
        </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-31T06:42:19.783

**示例代码**：以编程方式设置页脚文本

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
      if (e.Row.RowType == DataControlRowType.Footer)
      {
         Label lbl = (Label)e.Row.FindControl("lblTotal");
         lbl.Text = grdTotal.ToString("c");
      }
   } 
```

**更新代码**：

```
 decimal sumFooterValue = 0;
  protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {

        if (e.Row.RowType == DataControlRowType.DataRow)
        {
         string sponsorBonus = ((Label)e.Row.FindControl("Label2")).Text;
         string pairingBonus = ((Label)e.Row.FindControl("Label3")).Text;
         string staticBonus = ((Label)e.Row.FindControl("Label4")).Text;
         string leftBonus = ((Label)e.Row.FindControl("Label5")).Text;
         string rightBonus = ((Label)e.Row.FindControl("Label6")).Text;
         decimal totalvalue = Convert.ToDecimal(sponsorBonus) + Convert.ToDecimal(pairingBonus) + Convert.ToDecimal(staticBonus) + Convert.ToDecimal(leftBonus) + Convert.ToDecimal(rightBonus);
         e.Row.Cells[6].Text = totalvalue.ToString();
         sumFooterValue += totalvalue; 
        }

    if (e.Row.RowType == DataControlRowType.Footer)
        {
           Label lbl = (Label)e.Row.FindControl("lblTotal");
           lbl.Text = sumFooterValue.ToString();
        }

   } 
```

在 .aspx 页面中

```
 <asp:GridView ID="GridView1" runat="server" DataSourceID="SqlDataSource1" 
        AutoGenerateColumns="False" DataKeyNames="ID" CellPadding="4" 
        ForeColor="#333333" GridLines="None" ShowFooter="True" 
                onrowdatabound="GridView1_RowDataBound">
        <RowStyle BackColor="#EFF3FB" />
        <Columns>
            <asp:TemplateField HeaderText="Report Date" SortExpression="reportDate">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("reportDate") %>'></asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" 
                        Text='<%# Bind("reportDate", "{0:dd MMMM yyyy}") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Sponsor Bonus" SortExpression="sponsorBonus">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("sponsorBonus") %>'></asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label2" runat="server" 
                        Text='<%# Bind("sponsorBonus", "{0:0.00}") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Pairing Bonus" SortExpression="pairingBonus">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox3" runat="server" Text='<%# Bind("pairingBonus") %>'></asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label3" runat="server" 
                        Text='<%# Bind("pairingBonus", "{0:c}") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Static Bonus" SortExpression="staticBonus">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox4" runat="server" Text='<%# Bind("staticBonus") %>'></asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label4" runat="server" Text='<%# Bind("staticBonus") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Left Bonus" SortExpression="leftBonus">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox5" runat="server" Text='<%# Bind("leftBonus") %>'></asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label5" runat="server" Text='<%# Bind("leftBonus") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Right Bonus" SortExpression="rightBonus">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox6" runat="server" Text='<%# Bind("rightBonus") %>'></asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label6" runat="server" Text='<%# Bind("rightBonus") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Total" SortExpression="total">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox7" runat="server"></asp:TextBox>
                </EditItemTemplate>
                <FooterTemplate>
                    <asp:Label ID="lbltotal" runat="server" Text="Label"></asp:Label>
                </FooterTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label7" runat="server"></asp:Label>
                </ItemTemplate>
                <ItemStyle Width="100px" />

            </asp:TemplateField>
        </Columns>
        <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
        <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
        <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <EditRowStyle BackColor="#2461BF" />
        <AlternatingRowStyle BackColor="White" />            
    </asp:GridView> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-01T06:25:14.883

```
protected void gvBill_RowDataBound(object sender, GridViewRowEventArgs e)
    {

        if (e.Row.RowType == DataControlRowType.DataRow)

            Total += Convert.ToDecimal(DataBinder.Eval(e.Row.DataItem, "InvMstAmount"));
        else if (e.Row.RowType == DataControlRowType.Footer)

            e.Row.Cells[7].Text = String.Format("{0:0}", "<b>" + Total + "</b>");
    } 
```

[![在此处输入图像描述](../Images/1470ebb416d9527ee33ad404ee40669b.png)](https://i.stack.imgur.com/UlAab.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-12T11:52:10.497

这可以通过带有分组的 LINQ 来实现，这里是作为数据源指向实际网格视图的项目列表。示例伪代码可以帮助编码实际。

```
var tabelDetails =(from li in dc.My_table
    join m in dc.Table_One on li.ID equals m.ID
    join c in dc.Table_two on li.OtherID equals c.ID
    where //Condition
group new { m, li, c } by new
{
    m.ID,
    m.Name
} into g
select new
{
    g.Key.ID,
    Name = g.Key.FullName,
    sponsorBonus= g.Where(s => s.c.Name == "sponsorBonus").Count(),
    pairingBonus = g.Where(s => s.c.Name == "pairingBonus").Count(),
    staticBonus = g.Where(s => s.c.Name == "staticBonus").Count(),   
    leftBonus = g.Where(s => s.c.Name == "leftBonus").Count(),  
    rightBonus = g.Where(s => s.c.Name == "rightBonus").Count(),  
    Total = g.Count()  //Row wise Total
}).OrderBy(t => t.Name).ToList();

tabelDetails.Insert(tabelDetails.Count(), new  //This data will be the last row of the grid
{
    Name = "Total",  //Column wise total
    sponsorBonus = tabelDetails.Sum(s => s.sponsorBonus),
    pairingBonus = tabelDetails.Sum(s => s.pairingBonus),
    staticBonus = tabelDetails.Sum(s => s.staticBonus),
    leftBonus = tabelDetails.Sum(s => s.leftBonus),
    rightBonus = tabelDetails.Sum(s => s.rightBonus ),
    Total = tabelDetails.Sum(s => s.Total)
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-28T05:59:31.970

```
 <asp:TemplateField HeaderText="ExEmp" HeaderStyle-HorizontalAlign="Center" ItemStyle-HorizontalAlign="Center"
                                                                    FooterStyle-BackColor="BurlyWood" FooterStyle-HorizontalAlign="Center">
                                                                    <ItemTemplate>
                                                                        <asp:TextBox ID="txtNoOfExEmp" runat="server" CssClass="form-control input-sm m-bot15"
                                                                            Font-Bold="true" onkeypress="return isNumberKey(event)" Text='<%#Bind("ExEmp") %>'></asp:TextBox>
                                                                    </ItemTemplate>
                                                                    <HeaderStyle HorizontalAlign="Center"></HeaderStyle>
                                                                    <ItemStyle HorizontalAlign="Center" Width="50px" />
                                                                    <FooterTemplate>
                                                                        <asp:Label ID="lblTotNoOfExEmp" Font-Bold="true" runat="server" Text="0" CssClass="form-label"></asp:Label>
                                                                    </FooterTemplate>
                                                                </asp:TemplateField>

 private void TotalExEmpOFMonth()
    {
        Label lbl_TotNoOfExEmp = (Label)GrdPFRecord.FooterRow.FindControl("lblTotNoOfExEmp");
        /*Sum of the  Total Amount Of month*/
        foreach (GridViewRow gvr in GrdPFRecord.Rows)
        {
            TextBox txt_NoOfExEmp = (TextBox)gvr.FindControl("txtNoOfExEmp");
            lbl_TotNoOfExEmp.Text = (Convert.ToDouble(txt_NoOfExEmp.Text) + Convert.ToDouble(lbl_TotNoOfExEmp.Text)).ToString();
            lbl_TotNoOfExEmp.Text = string.Format("{0:F0}", Decimal.Parse(lbl_TotNoOfExEmp.Text));

        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-26T09:00:41.760

```
int total = 0;
protected void gvEmp_RowDataBound(object sender, GridViewRowEventArgs e)
{
if(e.Row.RowType==DataControlRowType.DataRow)
{
total += Convert.ToInt32(DataBinder.Eval(e.Row.DataItem, "Amount"));
}
if(e.Row.RowType==DataControlRowType.Footer)
{
Label lblamount = (Label)e.Row.FindControl("lblTotal");
lblamount.Text = total.ToString();
}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-26T10:49:59.017

```
/*This code will use gridview sum inside data list*/
SumOFdata(grd_DataDetail);

  private void SumOFEPFWages(GridView grd)
    {
        Label lbl_TotAmt = (Label)grd.FooterRow.FindControl("lblTotGrossW");
        /*Sum of the total Amount of the day*/
        foreach (GridViewRow gvr in grd.Rows)
        {
            Label lbl_Amount = (Label)gvr.FindControl("lblGrossS");
            lbl_TotAmt.Text = (Convert.ToDouble(lbl_Amount.Text) + Convert.ToDouble(lbl_TotAmt.Text)).ToString();
        }

    } 
```

# java - 使用java 7从码头服务器删除文件

> ID：11734309
> 
> 赞同：0
> 
> 时间：2012-07-31T06:24:47.243
> 
> 标签：java, jetty, java-7

我正在开发在码头服务器上运行的 Web 应用程序。在此应用程序中，我正在上传图像并在我的 jsp 页面中使用此图像。现在当我想使用删除它时

```
Files.delete(File Path) 
```

它给了我错误

```
java.nio.file.FileSystemException: "File Path": The process cannot access the file because it is being used by another process. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:14:20.720

在 Windows Jetty 上，它通过默认 servlet 锁定静态文件。这是一个常见的问题。它与缓存有关。参见维基： [http ://wiki.eclipse.org/Jetty/Howto/Deal_with_Locked_Windows_Files](http://wiki.eclipse.org/Jetty/Howto/Deal_with_Locked_Windows_Files)

你需要切换`useFileMappedBuffer`到假。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:09:42.707

在您尝试删除它之前关闭与该文件关联的所有流。还要考虑对您要上传到的文件使用[try-with-resources 。](http://java.dzone.com/articles/java-7-new-try-resources)

# wordpress - wordpress 自定义字段中的简单贝宝购物车简码

> ID：11734312
> 
> 赞同：0
> 
> 时间：2012-07-31T06:24:54.357
> 
> 标签：wordpress

我正在使用 wordpress 简单的 paypal 购物车，我想将简码解析为自定义字段，我找到了一个示例，但它
在循环上方不起作用我已经把它放在了
`<?php $price = get_post_meta( $post->ID, ‘price’, true ); ?>`
我想显示添加到购物车的地方按钮我有这个
`<?php echo print_wp_cart_button_for_product($name, $price); ?>`

它工作不正常

添加到购物车按钮出现在每个帖子上，当你按下它时，它会在购物车中添加没有名称和价格的产品，当我添加 key=price 和 value=25 时，它会添加到购物车相同的 noname 和 noprice 产品:(

顺便说一句，我想解析它的短代码看起来像这样 [wp_cart:PRODUCT NAME:price:PRODUCT PRICE:end]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:07:56.673

你就是这样做的 `<?php $price = get_post_meta( $post->ID, 'price', true ); ?>
<?php $name = get_the_title(); ?> <?php echo print_wp_cart_button_for_product($name, $price); ?>`

该代码显示添加到购物车按钮

```
Price: <?php echo get_post_meta($post->ID, 'price', true); ?> $ 
```

那就是要显示的价格

玩得开心

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T20:01:36.410

为了让事情组织代码，它看起来像这样

```
<?php $price = get_post_meta( $post->ID, 'PRODUCT-PRICE', true ); ?>
  Price: $<?php echo get_post_meta($post->ID, 'PRODUCT-PRICE', true); ?> 
  Product Name: <?php echo get_post_meta($post->ID, 'PRODUCT-NAME', true); ?>
<?php $name = get_the_title(); ?> <?php echo print_wp_cart_button_for_product
($name, $price); ?> 
```

# svn - 如何将不同版本的文件添加到SVN？

> ID：11734316
> 
> 赞同：1
> 
> 时间：2012-07-31T06:25:14.010
> 
> 标签：svn

我有以下格式的存储库。

```
/svn/project/trunk/file1,file2,dir1,dir2 (file & directory under trunk),
/svn/project/branches
/svn/project/tags 
```

我为主干创建了一个分支，其头版本为 V1 (/svn/project/branches/v1/file1,file2,dir1,dir2 )。这是我的工作副本使用的分支。

现在我想升级我的应用程序，这意味着正在使用的 dir2 文件夹在升级后的版本中会有所不同。比如说 file1、file2、dir1、dir2 这些是正在使用的文件。当我升级我的项目时，dir2 会发生变化，但其他文件将是相同的。这意味着升级版本也将具有相同的目录 dir2，并且此 dir2 下的文件名在旧版本和升级版本之间将相同，但文件内容将不同。我如何修改我的文件？请指教....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:52:48.070

使用 SVN 做你想做的事很简单：

```
$> cd /path/to/your/working/copy
$> svn copy http://yourRepoAddress/project/branches/v1 http://yourRepoAddress/project/branches/v2
$> svn switch http://yourRepoAddress/project/branches/v2
... then you can modify all the files you want inside dir2 or elsewhere ...
$> svn commit -m "Changed files in dir2" 
```

你完成了。

`svn copy`创建一个新分支，然后`svn switch`将您的工作副本移动到该分支，最后`svn commit`允许您将更改推送到服务器。

# blender - 如何分析Blender的源码

> ID：11734317
> 
> 赞同：14
> 
> 时间：2012-07-31T06:25:16.900
> 
> 标签：blender, blender-2.50

我是Blender的初学者，我的教授让我阅读Blender 2.6的源代码，研究Blender如何实现材质和纹理块。下载源代码后，我发现我无法阅读完整的源代码，尤其是没有详细的注释和专业手册。有没有人可以给我一些建议或提供一些学习资料？例如，我对如何通过使用不同的混合类型（如混合、添加、减去或叠加）来合成多层纹理感到困惑。Blender 如何实现这些功能？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-01T05:47:58.257

看看[这里](http://www.blender.org/bf/codelayout.jpg)的代码布局图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:03:03.627

我建议您获取源代码并将代码导入 QtCreator 之类的 IDE（导入 make 文件项目）。从那里，您可以轻松浏览详细信息。您要查找的是 DNA 条目。因此，请查看文件 DNA_MAterial_Types.h，您可以找到所有材料类型的声明。

# php - 有没有办法从声明类中的素数类中获取变量？

> ID：11734318
> 
> 赞同：-4
> 
> 时间：2012-07-31T06:25:19.483
> 
> 标签：php, oop, variables

例如 -

```
class wow
{
  public $foo = 5;
  public function __construct()
 {
   $sub_class = new sub();
 }

}

    class sub
{
  public function __construct()
  {
    echo $this->foo;
  }
}

$wow = new wow(); 
```

有没有办法做到这一点？

为什么f ***总是有人忽略我的问题？你有什么问题？这个网站是用来提问的，如果你有问题，所以不要来这个网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:31:51.247

从我的评论中添加..试试这个

```
class wow
{
    public $foo = 5;
    public function __construct()
    {
        $sub_class = new sub();
    }
}

class sub extends wow
{
    public function __construct()
    {
        echo $this->foo;
    }
}

$wow = new wow(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T06:33:30.760

您应该扩展父类

```
class wow
{
    public $foo = 5;
    public function __construct()
    {
        $sub_class = new sub();
    }

}

class sub extends wow
{
    public function __construct()
    {
        echo $this->foo;
    }
}

$wow = new wow(); 
```

这将返回 5。

而且您的代码中还有其他错误

```
class sub() 
```

应该

```
class sub 
```

和

```
public __construct() 
```

应该

```
public function __construct() 
```

# c++ - C ++中的Matlab类型数组

> ID：11734322
> 
> 赞同：11
> 
> 时间：2012-07-31T06:25:45.060
> 
> 标签：c++, arrays, matlab, opencv

如何像在 matlab 中一样在 C++/Open CV 中定义数组？

例如：

```
x=a:b:c; 
```

或者

```
y=linspace(a,b,n); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T18:54:20.187

有关您问题的一般答案，请参阅以前的答案。

具体来说，为了解决您提到的两个示例，这里是一些使用向量来动态生成您提到的数组的等效 C++ 代码（尚未测试）：

```
#include <vector>
using std::vector;

vector<double> generateRange(double a, double b, double c) {
    vector<double> array;
    while(a <= c) {
        array.push_back(a);
        a += b;         // could recode to better handle rounding errors
    }
    return array;
}

vector<double> linspace(double a, double b, int n) {
    vector<double> array;
    double step = (b-a) / (n-1);

    while(a <= b) {
        array.push_back(a);
        a += step;           // could recode to better handle rounding errors
    }
    return array;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T06:32:50.433

OpenCV 提供了一些类似于 Matlab 的功能，但数量非常有限。

你可以

```
cv::Mat a = cv::Mat::eye(5);
cv::Mat b = cv::Mat::zeros(5);
cv::Mat img = cv::imread("myGorgeousPic.jpg");
cv::imwrite(img, "aCopyOfMyGorgeousPic.jpg"); 
```

它还支持`diag()`

但是对于大多数棘手的 Matlab 功能，如`linspace`或`magic`或其他，在 OpenCV 中没有对应的，主要是因为 OpenCV 不是一个数学包，而是一个计算机视觉包。如果你需要一些特定的功能，你可以在你的项目中克隆它（也就是你自己写的）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T12:46:44.410

不幸的是，C++ 没有内置任何东西来允许这种矩阵初始化。它支持多维数组，但您需要自己初始化每个元素。C++ 是一种比 Matlab 低级的语言，它涉及更多的工作来编写创建和初始化矩阵类型变量的功能。

话虽如此，有许多库可与 C++ 一起使用，它们使数值计算比你自己尝试编写它更容易。如果您需要考虑使用库，请查看此链接，其中建议了一些合适的链接 [https://scicomp.stackexchange.com/questions/351/recommendations-for-a-usable-fast-c-matrix-library](https://scicomp.stackexchange.com/questions/351/recommendations-for-a-usable-fast-c-matrix-library)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-11T00:31:04.880

```
double* linspace(int xi, int xf, unsigned int n){
double *vec ;
vec = new double[n];
float esp, falt=xf-xi;
esp=falt/(n-1);
vec[0]=xi;
for(int i=1; i<n; i++)
    vec[i]=vec[i-1]+esp;
return vec; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-25T15:12:54.210

如果您使用 openCV，这是一个简单的实现。

```
Mat linspace(double &startP,double &Endp,int &interval)
{
    double spacing = interval-1;
    Mat y(spacing,1,CV_64FC1);
    for (int i = 0; i < y.rows; ++i)
    {
        y.at<double>(i) = startP + i*(Endp - startP)/spacing;
    }
    return y;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-14T21:39:59.260

这是我测试过的 linspace，与其他所有的 linspace 非常相似，但可以处理所有情况：

```
vector<double> Utilities::Linspace(double a, double b, int n) {
    vector<double> array;
    double epsilon = 0.0001;
    double step = (b-a) / (n-1);
    if (a==b)
    {
        for (int i = 0; i < n; i++)
        {
            array.push_back(a);
        }
    }
    else if (step >= 0)
    {
        while(a <= b + epsilon)
        {
            array.push_back(a);
            a += step;           
        }       
    }
    else
    {
        while(a + epsilon >= b )
        {
            array.push_back(a);
            a += step;           
        }       
    }
    return array;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-26T08:43:24.353

我想对 mattgately 提出的代码稍加修改。我使用了它，在某些情况下`step`由于除法近似而无法正确计算

```
double step = (b-a) / (n-1); 
```

我只是在`while`条件中添加了一个小数字：

```
while(a <= b+0.00001) 
```

像这样它与我一起工作，并创建了正确数量的间隔。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-04T20:33:06.217

扩展@Gilad 上面的答案，`n=0`因为`n=1`后者导致除以零的情况。

```
vector<double> linspace(double a, double b, int n) {
    vector<double> array;
    if ((n == 0) || (n == 1) || (a == b))
        array.push_back(b);
    else if (n > 1) {
        double step = (b - a) / (n - 1);
        int count = 0;
        while(count < n) {
            array.push_back(a + count*step);
            ++count;
        }
    }
    return array;
} 
```

# flash - 用于动作脚本开发的 IDE/工具

> ID：11734323
> 
> 赞同：-4
> 
> 时间：2012-07-31T06:25:48.513
> 
> 标签：flash, actionscript, adobe

> **可能重复：**
> [ActionScript 3 编码的最佳 IDE](https://stackoverflow.com/questions/1385169/best-ide-for-actionscript-3-coding)

有人能告诉我哪个 IDE 最适合 adobe actionscript 开发吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:27:12.873

尝试使用 Adob​​e flash 或 Adob​​e Dreamweaver

# c# - 在 C# 应用程序中处理大量图像

> ID：11734324
> 
> 赞同：4
> 
> 时间：2012-07-31T06:25:52.210
> 
> 标签：c#, image, dll, resources

我正在尝试用 C# 创建一个纸牌游戏，为此我需要加载很多图像。它们都是jpg图像，大约有7000张。

我想确保如果您下载游戏，图像将无法轻松访问，这意味着它们不应只是应用程序子文件夹中的 JPG 图像。所以我考虑将它们嵌入到 DLL 文件中。

但是我该怎么做呢？我如何有效地处理这个问题？这种事情有技巧，还是另一种方法更可取？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T06:54:18.013

> 我想确保 [...] 图像不容易访问

首先，您应该问自己为什么要禁止这样做。如果您只是想避免其他人操纵图片，您可以将它们作为 JPG 保存在一堆子文件夹中，只需为每个文件生成校验和并在程序加载图片时检查它们。

如果您想避免重复使用图片，您可以将它们放在一堆子文件夹中，但不要作为 JPG 格式。例如，使用标准 AES 算法对它们进行编码。但请注意，这不会阻止其他人在您的应用程序运行时制作屏幕截图，因此您应该考虑这样做是否真的值得。

编辑：如果您想嵌入图像，因为当您只有一个大文件要部署而不是 7000 个单个文件时，安装变得更容易，那么您可以编写一个帮助程序以编程方式创建资源文件。[请参阅Microsoft](http://msdn.microsoft.com/en-us/library/xbx3z216.aspx#resourcesfiles)的此页面，尤其是有关`.resource`文件的部分，以了解如何[`ResourceWriter`](http://msdn.microsoft.com/en-us/library/system.resources.resourcewriter.aspx)为此目的使用该类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:11:29.877

我假设这是一个 Windows 应用程序

**为了将图像嵌入到程序集中**

```
1\. Right click the Image file and Select properties
2\. In the Properties Pane Set the BuildAction as Embeded resource 
```

所以这个Image在应用编译的时候就变成了嵌入资源

**然后您可以从程序集中访问图像，例如：**

```
global::[[MyNameSpace]].Properties.Resources.[[ImageName]] 
```

例如：`this.pictureBox1.Image = global::[[MyNameSpace]].Properties.Resources.[[ImageName]]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T06:39:39.117

如果您有 7000 张图像，则需要一个数据库。[Microsoft SQL Server Compact 4.0](http://www.microsoft.com/en-us/download/details.aspx?id=17876)是一个选项。它体积小且易于使用。

# model-view-controller - 如何同步组合框和文本字段值。即如何从存储在文本字段中加载不同的值，而我正在更改组合框上的值

> ID：11734330
> 
> 赞同：1
> 
> 时间：2012-07-31T06:26:02.320
> 
> 标签：model-view-controller, extjs, sencha-architect

我是 EXTjs 的新手（也是 Stackoverflow 的新手）。我一直在努力解决这个问题，最后决定寻求帮助。我的问题是“如何同步组合框和文本字段的值。即如何从文本字段的‘存储’加载不同的值，而我正在更改组合框的值？”我的问题是，当我在组合框上加载值并选择它们时，我的文本字段一直为空。我试过“Ext.getCmp().setValue();” 它适用于此，但我认为如果我有 100 个文本字段，这不是最佳选择。我希望组合框和文本字段以某种方式与商店同步。任何帮助表示赞赏。图片中的情况在下面的链接中：

[图片一](http://imageshack.us/f/43/pic1jv.png/)

[图二](http://imageshack.us/photo/my-images/15/pic2ml.png/)

我的代码：

**我的 app.js ：**

```
Ext.Loader.setConfig({
    enabled: true
});
Ext.application({

    name: 'work',

    appFolder: 'app',

    controllers: ['Work'],

    launch: function() {

        Ext.create('Ext.container.Viewport', {
            //layout: 'fit',
            items: [{
                xtype: 'rightpanel' // gets it from view class
            }

            ]

        });
    }
}); 
```

**我的观点 RightPanel ：**

```
Ext.define('work.view.works.RightPanel', {
    extend: 'Ext.panel.Panel',
    ALIAS: 'widget.rightpanel',
    width: 300,
    title: 'Building navigation',
    animCollapse: true,
    collapsible: true,
    split: true,
    minSize: 400,
    maxSize: 400,
    margins: '0 5 0 0',
    //activeTab:1, tabPosition:'bottom',
    initComponent: function() {
        this.items = [{
            xtype: 'form',
            items: [{
                xtype: 'combobox',
                fieldLabel: 'BuildingID',
                queryMode: 'local',
                name: 'Bid',
                displayField: 'Bid',
                valueField: 'Bid',
                id: 'Bid',
                MODE: 'remote',
                store: 'Work'
            }, {
                xtype: 'textfield',
                fieldLabel: 'Address',
                name: 'Address',
                displayField: 'Address',
                valueField: 'Address',
                id: 'Address',
                store: 'Work'
            }]
        }];

        this.columns = [{
            header: 'ID',
            dataIndex: 'Bid',
            flex: 1
        }, {
            header: 'Texts',
            dataIndex: 'Address',
            flex: 1
        }];

        this.callParent(arguments);

    }
}); 
```

**我的商店：**

```
Ext.define('work.store.Work', {
    extend: 'Ext.data.Store',

    model: 'work.model.Work',
    storeId: 'workstore',
    id: 'workstore',
    autoLoad: true,

    proxy: {
        type: 'ajax',
        limitParam: undefined,
        startParam: undefined,
        paramName: undefined,
        pageParam: undefined,
        noCache: false,

        api: {
            read: 'data/showWork.php' // just a .php file that reads values from database and shows them on combobox
        },

        reader: {
            type: 'json',
            root: 'data',
            successProperty: 'success'
        },

        writer: {
            type: 'json',
            root: 'data',
            encode: true
        }

    }
}); 
```

**我的模型类：**

```
Ext.define('work.model.Work', {
    extend: 'Ext.data.Model',
    //idProperty: 'WorkID',   
    fields: [{
        name: 'Bid',
        type: 'int'
    }, 'Address']
}); 
```

**我的控制器：**

```
 Ext.define('work.controller.Work', {
   extend: 'Ext.app.Controller',

   stores: ['Work'],
   models: ['Work'],

   views: [
       'works.RightPanel' // name comes from view class
   ],

   init: function() {
       console.log('Done');
       this.control({
           'viewport > rightpanel': {
               render: this.test
           },
           'rightpanel combobox[id=Bid]': {
               select: this.change
           }
       });
   },

   change: function(buttons) {
       var values = this.getStore('Work').collect('Address', 'Address', false);
       var win = buttons.up('rightpanel'); //  gets the needed widget
       var form = win.down('combobox'); // gets the needed form
       var value = form.getValue(); // gets the value
       console.log("value " + value);
   }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:22:30.183

您想观察组合框上的更改，然后根据其新值执行更改。

```
this.items = [{
    xtype: 'form',
    items: [{
        xtype: 'combobox',
        fieldLabel: 'BuildingID',
        queryMode: 'local',
        name: 'Bid',
        displayField: 'Bid',
        valueField: 'Bid',
        id: 'Bid',
        mode: 'remote',
        store: 'Work'
        listeners::{
            change:function(cbx, newVal,oldVal,e){
                var record  = cbx.getStore().find("Bid",newVal); // theres prolly a better way to find this, such as to find the active record of the cbx
                Ext.getCmp('Address').setValue(record.getValue("Address"))

            }

        }

    },{
        xtype: 'textfield',
        fieldLabel: 'Address',
        name: 'Address',
        displayField: 'Address',
        valueField: 'Address',
        id: 'Address',
        store: 'Work'
    }] 
```

# android - 如何使用 Facebook Android SDK 切换授权的 Facebook 用户？

> ID：11734331
> 
> 赞同：4
> 
> 时间：2012-07-31T06:26:06.537
> 
> 标签：android, facebook, facebook-graph-api, facebook-android-sdk

我已经在我的原生 android 应用程序中成功实现了对 facebook 的授权。

现在我有以下问题：

用户从我的应用程序中注销，我调用 facebook sdk 注销方法。但是当用户按下登录按钮时，它会自动重定向回我的应用程序而不显示“已授权”窗口，因此他无法切换到另一个用户。

这是正常行为还是我做错了什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T04:53:51.657

如果您想切换到其他用户，您可以参考[Facebook SDK for Android](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)中的“SwitchUserSample” 。

这是一些示例代码仅供参考。

```
Session currentSession = Session.getActiveSession();
currentSession.closeAndClearTokenInformation();
newSession = new Session.Builder(LoginActivity.this).build();
newSession.openForRead(new Session.OpenRequest(LoginActivity.this)
                            .setLoginBehavior(SessionLoginBehavior.SUPPRESS_SSO)
                            .setCallback(statusCallback)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:48:02.930

不，这不是默认的，我们可以切换用户。在您进行注销时，您没有正确清除凭据，因此会出现此类问题，因此您需要完美地删除凭据。

您应该通过[Facebook 为所有功能提供的 HackBook 代码](https://github.com/facebook/facebook-android-sdk)，您必须将 Facebook 对象保存在 SessionStore 类中并相应地处理它：

```
 private class SessionListener implements AuthListener, LogoutListener {

    @Override
    public void onAuthSucceed() {
        setImageResource(R.drawable.logout_button);
        SessionStore.save(mFb, getContext());
    }

    @Override
    public void onAuthFail(String error) {
    }

    @Override
    public void onLogoutBegin() {
    }

    @Override
    public void onLogoutFinish() {
        SessionStore.clear(getContext());
        setImageResource(R.drawable.login_button);
    }
} 
```

# ios - 当我在 IOS 中下载某些文件时，iOS 磁盘空间不足

> ID：11734332
> 
> 赞同：2
> 
> 时间：2012-07-31T06:26:13.857
> 
> 标签：ios, crash

我有一个应用程序可以将一些文件下载到缓存的路径。当IOS磁盘空间不足时，会发生什么？可能会崩溃！！！？

提前致谢！

# java - 如何在tomcat/java中只存储一段时间的值

> ID：11734339
> 
> 赞同：0
> 
> 时间：2012-07-31T06:26:49.223
> 
> 标签：java, caching, tomcat, tomcat7

我只想在tomcat java web应用程序的集合中存储一些值一段时间。

场景是：

*   `value1`首先添加
*   `value2`1 分钟后添加`value1`
*   `value3`在添加之后`value2`添加
*   `value4`添加后 2 分钟`value1`添加

此值应仅在添加后 5 分钟内可用。5 分钟后，它们应从列表中删除。无论上次访问时间如何，每个值都会在 5 分钟后（添加后）过期。

我已经开始使用`ConcurrentHashMap`and来实现这一点`ScheduledExecutor`。

我找不到适合此要求的内置缓存机制，如果使用缓存，如果更频繁地访问值，它将不会从列表中删除/过期值。

如果有人能给我一个指导或参考任何现有的实现，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:55:31.447

[谷歌番石榴](http://code.google.com/p/guava-libraries/wiki/CachesExplained)可以做到这一点（很简单）

```
com.google.common.cache.Cache<Integer, String> values = CacheBuilder.newBuilder().concurrencyLevel(4).expireAfterWrite(5, TimeUnit.MINUTES).maximumSize(20).build();        

values.put(someKey, "string val"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:33:33.530

java.util.* 中没有这样的集合。

一种选择是使用番石榴的[Cache](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/Cache.html)。可以通过[CacheBuilder](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/CacheBuilder.html)创建实例。在您的情况下，最有趣的方法是[expireAfterWrite](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/CacheBuilder.html#expireAfterWrite%28long,%20java.util.concurrent.TimeUnit%29)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T08:02:10.730

如果您想手动执行此操作，这是一个简单的想法：

1.  创建一个类，用日期包装您要存储的类型。
2.  Extend `HashMap`，覆盖该`get()`方法，使其检查日期，`null`如果日期太旧则返回，否则返回存储的对象。

编辑：

如果内存有问题，您可以每 X 分钟迭代一次映射以删除过期值。为此，在被覆盖的`get()`方法中检查上次清理日期，如果超过 X 分钟，请立即进行清理。但如果你没有记忆问题，你甚至可以跳过这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T06:44:09.473

如果您正在谈论存储每个客户端 cookie 的值，则可用于此目的。

# c# - PDFNet 尝试添加文本不起作用

> ID：11734341
> 
> 赞同：1
> 
> 时间：2012-07-31T06:26:55.430
> 
> 标签：c#, .net, pdf

我基本上是在尝试 PDFNet 并调整 PDFNet 的样本之一。这是代码：

```
 PDFNet.Initialize();

            // Relative path to the folder containing test files.
            string input_path = "../../../../TestFiles/";
            string output_path = "../../../../TestFiles/Output/";

            PDFDoc doc = new PDFDoc(input_path + "form1.pdf");
            for (int index = 1; index <= doc.GetPageCount(); index++)
            {
                Page page = doc.GetPage(index);
                ElementBuilder eb = new ElementBuilder();       // ElementBuilder is used to build new Element objects
                eb.Reset();         // Reset GState to default
                ElementWriter writer = new ElementWriter(); // ElementWriter is used to write Elements to the page  
                writer.Begin(page);

                // Begin writing a block of text
                string data = "Page " + index;
                Element element = eb.CreateTextRun(data, Font.Create(doc, Font.StandardType1Font.e_times_roman, true), 100.0);
                element.SetTextMatrix(10, 0, 0, 10, 100, 100);
                GState gstate = element.GetGState();
                gstate.SetTextRenderMode(GState.TextRenderingMode.e_stroke_text);
                gstate.SetStrokeColorSpace(pdftron.PDF.ColorSpace.CreateDeviceRGB());
                gstate.SetStrokeColor(new pdftron.PDF.ColorPt(1, 0, 0));

                writer.WriteElement(element);
                writer.End();
                writer.Dispose();  // save changes to the current page
            }

            doc.Save(output_path + "element_builder.pdf", SDFDoc.SaveOptions.e_linearized);
            doc.Close(); 
```

但问题是，没有文本被添加到`element_builder.pdf`. 它只是按原样复制，看起来与`form1.pdf`. 有人可以帮帮我吗？

这是 PDFNet [http://www.pdftron.com/pdfnet/downloads.html的链接](http://www.pdftron.com/pdfnet/downloads.html)

我正在为 .Net 4.0 使用 64 位版本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:28:42.830

您似乎缺少调用 eb.CreateTextBegin() 和 eb.CreateTextEnd()。你应该尝试这样的事情：

```
 PDFNet.Initialize();

        // Relative path to the folder containing test files.
        string input_path = "../../../../TestFiles/";
        string output_path = "../../../../TestFiles/Output/";

        PDFDoc doc = new PDFDoc(input_path + "form1.pdf");
        ElementWriter writer = new ElementWriter();
        ElementBuilder eb = new ElementBuilder();
        for (int index = 1; index <= doc.GetPageCount(); index++)
        {
            Page page = doc.GetPage(index); 
            writer.Begin(page);
            eb.Reset();

            // Begin writing a block of text
            string data = "Page " + index;
            Element element = eb.CreateTextBegin(Font.Create(doc, Font.StandardType1Font.e_times_roman, true), 10.0);
            writer.WriteElement(element);
            eb.CreateTextRun(data);
            element.SetTextMatrix(10, 0, 0, 10, 100, 100);
            GState gstate = element.GetGState();
            gstate.SetTextRenderMode(GState.TextRenderingMode.e_fill_text);
            gstate.SetStrokeColorSpace(pdftron.PDF.ColorSpace.CreateDeviceRGB());
            gstate.SetStrokeColor(new pdftron.PDF.ColorPt(1, 0, 0));

            writer.WriteElement(element);
            writer.WriteElement(eb.CreateTextEnd());  
            writer.End();

        }
        writer.Dispose();
        eb.Dispose();
        doc.Save(output_path + "element_builder.pdf", SDFDoc.SaveOptions.e_linearized);
        doc.Close(); 
```

顺便提一句。将文本添加到现有页面的一种可能更简单的方法可能是使用“pdftron.PDF.Stamper”，如[Stamper sample](http://www.pdftron.com/pdfnet/samplecode.html#Stamper)中所示。

# php - 需要用户对用户数据库中的数据。如何避免灾难？

> ID：11734346
> 
> 赞同：1
> 
> 时间：2012-07-31T06:27:31.103
> 
> 标签：php, sql

在我的要求中，网站上的每个用户都可以看到附加到其他用户的分数。它是根据他们的配置文件参数计算的。我给别人的分数将是一，但他们给我的分数将是另一个。

到目前为止，我在 MySQL 数据库中所做的表如下所示：

```
___UserID1___|___UserID2___|___Score___|___Last_Uopdated___
   1 | 2 | 45 | 1235686744
   2 | 1 | 24 | 1235645332

```

当用户查看某人的页面时，我的分数类正在检查该对的记录是否存在于数据库中，如果不存在，则计算并记录它。这很好用，因为没有人会查看网站上的每个用户页面。

现在我需要拉用户并根据分数对其进行排序。所以我想，我可以创建一个 cronjob，每晚运行它，这样它就会更新数据库中的分数，并为每对用户创建它们。

好吧，问题是我正在为超过 500,000 个用户规划一个系统，我担心它会导致我的数据库崩溃并创建巨大的数据库。因此，对于 500,000 条记录，我们谈论的是 2500 亿条记录……：/

有谁知道创建此功能的任何其他方式？可能是即时计算......或任何其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T07:07:54.960

如果我处于您的情况，我会即时创建计算。我将使用您的函数生成分数，然后将值存储到数据库中。这样，每当任何用户访问任何页面时，分数都会更新。这是一种增量方法，而不是尝试一次在每个可能的组合上运行该函数。再加上没有更多的数据库灾难:)

如果你有一个按分数对所有用户进行排名的页面，如果你使用分页并使用 SQL 查询的 ORDER BY 和 OFFSET、LIMIT 特性而不是一次获取所有用户，那会简单得多。

# sql - 我们如何通过查询在 sum()/group 中选择多个列？

> ID：11734349
> 
> 赞同：2
> 
> 时间：2012-07-31T06:27:44.500
> 
> 标签：sql, ms-access-2007

我需要从 Access DB 中提取总数量的产品数量，但包括供应商名称、ID 号、描述等......以及数量总和。

我有一个这样的查询：

```
SELECT [Vendor Name], SUM([Quantity]) AS Total
FROM [SalesDB]
WHERE [Vendor No] IN (1,2,3,4,5,6,7,8) AND [Item Description] = 'bolts'
Group By [Vendor Name] 
```

效果很好......除了我需要在查询中提取更多列，如下所示：

```
SELECT [Vendor Name], [Vendor No], [Item No], [Item Description], [Item Cost], [Quantity],  SUM([Quantity]) AS Total
FROM [SalesDB]
WHERE [Vendor No] IN (1,2,3,4,5,6,7,8) AND [Item Description] = 'bolts'
Group By [Vendor Name] 
```

不起作用，引发聚合错误

所以改为这样做：

```
SELECT [Vendor Name], [Vendor No], [Item No], [Item Description], [Item Cost], [Quantity],  SUM([Quantity]) AS Total
FROM [SalesDB]
WHERE [Vendor No] IN (1,2,3,4,5,6,7,8) AND [Item Description] = 'bolts'
Group By [Vendor Name], [Vendor No], [Item No], [Item Description], [Item Cost], [Quantity] 
```

哪个运行但改变结果太多。处理此查询的适当方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T06:33:11.760

试试这个：

您必须将第一个查询作为派生表并与实际表连接以获取所有字段

```
 SELECT A.[Vendor Name], [Vendor No], [Item No], [Item Description], 
[Item Cost], [Quantity],B.Total
 from [SalesDB] A 
 inner join
    (SELECT [Vendor Name], SUM([Quantity]) AS Total
    FROM [SalesDB]
    WHERE [Vendor No] IN (1,2,3,4,5,6,7,8) 
    AND [Item Description] = 'bolts'
    Group By [Vendor Name])B
  on A.[Vendor Name]=B.[Vendor Name] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-07T22:50:52.797

**只是一个想法**

```
SELECT 
        [ItemID],
        SUM(ItemQty) as 'QTY',
        [ItemName] as 'ItemName',
        itemPrice as 'itemPrice',
        SUM(ItemTotalPrice) as  'Total'
    FROM
        [OrderDetails]
        inner join Orders
        on [OrderDetails].OrderID=Orders.OrderID
         where Orders.TableID != 4
    GROUP BY  ItemID, [ItemName],itemPrice order by ItemID 
```

# scheduler - buildbot调度程序不起作用

> ID：11734352
> 
> 赞同：0
> 
> 时间：2012-07-31T06:28:15.907
> 
> 标签：scheduler, buildbot

我希望构建机器人在检测到新版本已提交给 svn 时触发构建器，但它失败了。只有添加了 Periodic 调度器才能触发构建器，但这不是我的期望。根据日志，

```
2012-07-30 23:51:33-0400 [-] SVNPoller: polling
2012-07-30 23:51:33-0400 [-] SVNPoller: _process_changes 11 .. 12
2012-07-30 23:51:33-0400 [-] Adding change revision 12
2012-07-30 23:51:34-0400 [-] SVNPoller: finished polling None 
```

检测到新提交，但未触发构建器。

以下是我的配置文件：

```
c = BuildmasterConfig = {}
from buildbot.buildslave import BuildSlave
c['slaves'] = [BuildSlave("example-slave", "pass")]

c['slavePortnum'] = 9989

INTERVAL = 30

from buildbot.changes.svnpoller import SVNPoller, split_file_branches
svn_url = 'file:///data/subREPOS/project'
c['change_source'] = []
c['change_source'].append(SVNPoller(svnurl = svn_url,
                                    split_file=split_file_branches,    pollinterval=INTERVAL))

from buildbot.schedulers.basic import Scheduler
from buildbot.scheduler import Periodic

c['schedulers'] = []
c['schedulers'].append(Scheduler(name="General", branch=None,
                                 treeStableTimer=3,
                                 builderNames=["testbuilder"]))
c['schedulers'].append(Periodic("Periodic", ['testbuilder', ], INTERVAL))

from buildbot.process.factory import BuildFactory
from buildbot.steps.source import SVN
from buildbot.steps.shell import ShellCommand, Compile

factory = BuildFactory()

factory.addStep(ShellCommand(command=["ls"]))
factory.addStep(SVN(svn_url, None, 'incremental',workdir='sourcedir' ))
factory.addStep(Compile(workdir="sourcedir", command=["make"]))

from buildbot.config import BuilderConfig

c['builders'] = []
c['builders'].append(
    BuilderConfig(name="testbuilder",
      slavenames=["example-slave"],
      factory=factory)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:22:38.797

如果`SVNPoller`工作正常，您应该会看到类似

```
added change Change(revision=u'08b4489c26aafc0600bb6cda647c47dc422a6839', who=u'Jaka Kranjc <lynxlupodian@users.sourceforge.net>', branch=u'master', comments=u'fix msvc build error - no strcasecmp', when=1346362922, category=None, project=u'gemrb', repository=u'git://gemrb.git.sourceforge.net/gitroot/gemrb/gemrb', codebase=u'') to database 
```

我的猜测是那里列出的分支与 指定的分支不同`Scheduler`，因此它没有被触发。

# android - 在 android 的 APV PDF 查看器中找不到文件。

> ID：11734356
> 
> 赞同：-1
> 
> 时间：2012-07-31T06:28:35.953
> 
> 标签：android, java-native-interface, pdf-viewer

我正在尝试在 cygwin 中重新构建 APV PDF Viewer 的 .so 文件，但它显示未找到错误

```
#include "fitz.h"
#include "mupdf.h" 
```

[https://code.google.com/p/apv/source/browse/pdfview/jni/pdfview2/pdfview2.h](https://code.google.com/p/apv/source/browse/pdfview/jni/pdfview2/pdfview2.h)

在这个文件中 r 不在项目中。当我删除它时，它显示了很多错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:25:50.447

我没有给你-1，但你的问题看起来你没有付出任何努力来研究和调查解决方案。就在[项目的首页](https://code.google.com/p/apv/)：

《基于[MuPDF](http://www.mupdf.com/)库的原生 Android PDF 查看器》

# jquery - 如何在另一个弹出窗口中创建一个弹出窗口

> ID：11734358
> 
> 赞同：0
> 
> 时间：2012-07-31T06:28:48.580
> 
> 标签：jquery, fancybox

我们可以在弹出窗口中创建一个弹出窗口吗？

我有一个缩略图图像，当我单击它时，它会使用精美的框弹出大图像。现在我想以这样的方式，当我将鼠标悬停在大图像中的一个点上时，它应该在它上面弹出另一个图像。

如何使这成为可能。如果有人有链接示例，那么它会更有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:45:02.270

您可以将悬停事件附加到特定部分。例如

```
 $('.hover-section').hover(function() {
       // do what you want to here
 }); 
```

[jQuery 悬停参考](http://api.jquery.com/hover/)

# android - 当android杀死后台任务时，AsyncTask postExecute或onCancelled没有被调用-没有更多的后台进程

> ID：11734360
> 
> 赞同：1
> 
> 时间：2012-07-31T06:28:57.200
> 
> 标签：android, android-asynctask

我正在运行一个队列，我正在下载视频，并且为了让 que 正常工作，需要强制调用 AsyncTask 的 postExecute ..或者当我的 asynctask 被处理器杀死时，我必须有一个事件，它说“不”更多后台任务”..内存不足..OnCancelled 也没有被调用...任何帮助？？？

* * *

@kdehairy 意向服务？？？好的，实际上我需要更新我的 UI ..例如，我正在下载一个在 asynctask 中开始的视频，我会跟踪该块并相应地更新我的自定义进度条，如果用户破坏了活动 m 直到我的工作才取消我的 ansynctask完成..我跟踪异步任务..如果由于某种原因我的异步任务停止，即使它在后台......它再次询问任务..这是由服务完成的......我说的是即使我不知道我的异步任务从服务或应用程序排队...但我只是跟踪正在排队的 asyncatsks..并从堆栈中推送和弹出..asynctask postexecute 刷新我的视图...如果 asynctask 正在从服务运行我检查 postExecute 如果我的UI 屏幕是可见的......比我调用新的 Intent..with Flags SingleTop 和 New Task ，因此我可以刷新我的progressBar ..

你能给我举个例子吗……？？？谢谢 Kdehairy

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T00:42:21.170

如果处理流程的生命周期对您至关重要，那么最好使用服务。AsyncTask 不是系统组件（服务是）。

### 更新：

1.  `IntentService`用你自己的实现扩展。
2.  要更新 UI，您可以使用广播。如下：

    1.  *每当您需要更新 UI 时，将其写入您的服务中：*

        ```
         Intent intent = new Intent(ACTION_UPDATE_PROGRESS);
        intent.putExtra(EXTRA_POSITION, currentValue);
        LocalBroadcastManager.getInstance(this).sendBroadcast(intent); 
        ```

        在这里，我们使用 发送广播，`LocalBroadcastManager`因为我们希望将此广播保密给应用程序。
    2.  *在您的活动中：*

        ```
         // this is the broadcast receiver object that will handle our UI updates.
        private BroadcastReceiver mReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                int position = intent.getIntExtra(YourService.EXTRA_POSITION, 0);
                // do your UI updates here.
            }
        }

        @Override
        protected void onResume() {
            // register for the broadcast.
            LocalBroadcastManager.getInstance(this).registerReceiver(
                mReceiver,
                new IntentFilter(YourService.ACTION_UPDATE_PROGRESS));
            super.onResume();
        }
        @Override
        protected void onPause() {
            // unregister when activity is paused.
            LocalBroadcastManager.getInstance(PlayerActivity.this)
                .unregisterReceiver(mPlayerReceiver);
            super.onPause();
        } 
        ```

如果您发现任何不清楚的地方，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:46:08.890

try like this.. or look at this example it migth help you.. **call onCancle() method where you want.. as shown in Onpause() in below example, It ll cancel the asyncTask**

```
public class newA extends Activity implements OnClickListener {

private static final String TAG = "MyPost";

private boolean post_is_running = false;

private doSomethingDelayed doSth;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button pushButton = (Button) findViewById(R.id.push_button);
    pushButton.setOnClickListener(this);

}

@Override
protected void onPause() {
    super.onPause();
    if (post_is_running) {
        Log.v(TAG, "Stopping Async Task onPause");
        doSth.cancel(true);
    }
}

@Override
protected void onResume() {
    super.onResume();
    if (post_is_running) {
        Log.v(TAG, "Starting Async Task onResume");
        doSth = (doSomethingDelayed) new doSomethingDelayed().execute();
        ((Button) findViewById(R.id.push_button)).setText("Resuming..");
    }
}

public void onClick(View v) {
    if (post_is_running == false) {
        post_is_running = true;
        Log.v(TAG, "Starting Async Task onClick");
        doSth = (doSomethingDelayed) new doSomethingDelayed().execute();
        ((Button) findViewById(R.id.push_button)).setText("Starting..");
    } else {
        Log.v(TAG, "Stopping Async Task onClick");
        post_is_running = false;
        doSth.cancel(true);
        ((Button) findViewById(R.id.push_button)).setText("Stopping..");
    }
}

private class doSomethingDelayed extends AsyncTask<Void, Integer, Void> {

    private int num_runs = 0;

    private JSONObject holder;

    @Override
    protected Void doInBackground(Void... gurk) {

        while (!this.isCancelled()) {
            Log.v(TAG, "going into postData");

            long ms_before = SystemClock.uptimeMillis();
            Log.v(TAG, "Time Now is " + ms_before);

            try {
                Thread.sleep(5000);
                postData();

            } catch (InterruptedException e) {

                e.printStackTrace();
            }

            long ms_after = SystemClock.uptimeMillis();

            long time_passed = ms_after - ms_before;

            Log.v(TAG, "coming out of postData");
            Log.i(TAG, "RTT: " + time_passed + " ms");

            num_runs++;

            if (!this.isCancelled()) {
                publishProgress(num_runs, (int) time_passed);
            }

        }
        return null;
    }

    @Override
    protected void onCancelled() {
        Context context = getApplicationContext();
        CharSequence text = "request is send every 5 sec.";
        int duration = Toast.LENGTH_LONG;

        Toast.makeText(context, text, duration).show();

        ((Button) findViewById(R.id.push_button))
                .setText("Stopped. Tap to Start for sending new request!");
    }

    @Override
    protected void onProgressUpdate(Integer... num_runs) {
        Context context = getApplicationContext();
        CharSequence text = "Looped with time interval in every 5 sec "
                + num_runs[0].toString() + " Times";
        int duration = Toast.LENGTH_SHORT;

        Toast.makeText(context,
                text + "\nRTT: " + num_runs[1].toString() + " ms", duration)
                .show();

        ((Button) findViewById(R.id.push_button)).setText(text
                + "\nTap to Stop process");

    }

    public void postData() {

        // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://192.168.1.1/listen");

        String resp = null;
        long time_passed = 0;

        // Sending details in Json Format

        holder = new JSONObject();

        try {
            holder.put("UserId", "1");
            holder.put("TimeStamp", "12345");
            System.out.println("----holder--" + holder);

        } catch (JSONException e1) {
            e1.printStackTrace();
        }

        try {
            StringEntity se = new StringEntity(holder.toString());
            se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE,
                    "application/json"));
            httppost.setEntity(se);
            HttpResponse response = httpclient.execute(httppost);
            resp = response.toString();
            String t = EntityUtils.toString(response.getEntity());

        } catch (ClientProtocolException e) {
            Log.e(TAG, e.toString());
        } catch (IOException e) {
            Log.e(TAG, e.toString());
        } catch (RuntimeException e) {
            e.printStackTrace();
        }

        Log.i(TAG, "RTT inside post-data: " + time_passed);

        Log.i(TAG, resp.toString());
    }
}
} 
```

# wpf - 使用 BackgroundWorker 创建新的用户控件失败

> ID：11734363
> 
> 赞同：0
> 
> 时间：2012-07-31T06:29:08.223
> 
> 标签：wpf, multithreading, backgroundworker, sta

我环顾了谷歌，因为我的程序在尝试加载 gif 并同时加载用户控件时会滞后，因此我需要多线程。相反，gif 挂起，页面突然显示我的用户控件，没有任何过渡。好的程序应该如何表现，

显示 gif-->加载用户控件-->隐藏 Gif-->运行动画（一个简单的幻灯片效果）

但是由于渲染用户控件的ui元素时的滞后，程序的行为是这样的

显示 Gif --> Gif 挂起（或冻结） --> 立即显示用户控件

所以我发现了这个叫做 BackgroundWorker 的东西。听起来很棒。嗯……不完全。我试了一下并将其应用到我的代码中

```
 BackgroundWorker worker = new BackgroundWorker();
        CrowdWatch_Portrait.CrowdWatch crowder;
        //The page is a frame fyi
        thePage.LoadCompleted += new LoadCompletedEventHandler(thePage_LoadCompleted);

        worker.DoWork += delegate(object s, DoWorkEventArgs args)
        {

                crowder = new CrowdWatch_Portrait.CrowdWatch();
                thePage.Content = crowder;

        };

        worker.RunWorkerAsync(); 
```

听起来不错。跑了。失败的。它给了我这个错误

调用线程必须是 STA，因为许多 UI 组件都需要这个。

所以再次上网研究后，我找不到任何使用该类加载用户控件的场景。所以我转向社区寻求帮助....帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:46:02.990

尝试像这样在 UI 调度程序上设置页面内容 -

```
App.Current.Dispatcher.BeginInvoke((Action)delegate{ thePage.Content = crowder; }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:35:31.553

我不记得确切原因，但在我的一个程序中，我遇到了同样的错误。我用这段代码解决了：

```
_wakeupthread.SetApartmentState(System.Threading.ApartmentState.STA); 
```

希望它有帮助:-)

# mysql - InfiniDB 插入速度与插入语句

> ID：11734364
> 
> 赞同：1
> 
> 时间：2012-07-31T06:29:16.170
> 
> 标签：mysql, infinidb

我最近开始使用 InfinDB，到目前为止它运行良好。我使用 cipimport 工具进行批量加载，它可以在几秒钟内插入数百万行。但是，在某些情况下，我需要插入数千行，并且由于数据生成方式的性质，使用 insert 语句在编程上更加合理。但是，当我尝试这样做时，插入速度似乎很慢。它每秒插入大约 30 行（每行非常小......每行大约 5 列，每个类型为 varchar(10)）。我是否错误地配置和/或安装了某些东西，或者是使用插入语句的预期速度？我的电脑有 16 gb 内存和 520 mb/s 写入速度的 SSD，使用 MyISAM 或 Innodb，我可以使用 insert 语句每秒插入几千行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:42:58.160

`INSERT INTO VALUES(),(),...``INSERT`比单独查询快得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-14T21:18:50.767

我是 InfiniDB 的架构师

你是在做 INSERT INTO 还是在做一堆单独的 INSERT 命令？你说你正在做数千行，那么你能用 INSERT INTO 做到这一点吗？

cpimport 已针对快速加载进行了优化，为什么我们建议在 INSERT INTO 和 LOAD DATA 上使用它。由于数据库的性质和下面的体系结构，有几个原因会出现这种情况。话虽如此，我们意识到人们希望能够使用 INSERT INTO 和 LOAD DATA，因为他们习惯于使用它们，并且希望获得与使用 cpimport 类似的更快的性能。现在正在工作中，并将在 6 月底 / 7 月初发布的 InfiniDB 4.6 版本中发布。这些操作将被优化为在没有未完成提交时在高速模式下操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-13T00:57:49.943

您不使用面向列的数据库进行 OLTP 操作。它们专为批量插入而设计。您可以在 cpimport 作业中自动插入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-14T13:11:39.090

InfiniDB 是面向列的数据库，而 MyISAM 和 Innodb 是面向行的。基本上，这意味着数据分别按列和行分组保存在硬盘上。因此，如果要在面向列的数据库中插入新行，则必须为每一列插入值，每个列都位于硬盘上的不同位置。但是，从 1 列获取所有数据（例如调用 AVG()）比使用面向行的 dbms 快得多。

我建议阅读有关面向列的数据库的维基百科文章以了解这个想法：[http ://en.wikipedia.org/wiki/Column-oriented_DBMS](http://en.wikipedia.org/wiki/Column-oriented_DBMS)

# magento - PHP 致命错误：第 342 行 /app/code/core/Mage/Core/Controller/Varien/Front.php 中的未定义类常量 'XML_PATH_CUSTOM_ADMIN_PATH

> ID：11734368
> 
> 赞同：3
> 
> 时间：2012-07-31T06:29:29.760
> 
> 标签：magento, windows-shell

我将 magento 站点从 1.4.1.1 升级到最新版本。

但是当我加载网站时，它会显示白页。

在火灾错误中，它显示网络服务器错误。

所以我使用 ssh 检查了错误。

```
tail -f /var/log/apache2/error.log 
```

它显示一些错误：

```
 root@MSHOME:/var/www/magento_upgrade# tail -f /var/log/apache2/error.log
[Tue Jul 31 12:15:20 2012] [error] [client 192.168.1.11] PHP Fatal error:  Undefined class constant 'XML_PATH_CUSTOM_ADMIN_PATH' in /var/www/magento_upgrade/app/code/core/Mage/Core/Controller/Varien/Front.php on line 342
[Tue Jul 31 12:15:20 2012] [error] [client 192.168.1.11] PHP Fatal error:  Undefined class constant 'XML_PATH_CUSTOM_ADMIN_PATH' in /var/www/magento_upgrade/app/code/core/Mage/Core/Controller/Varien/Front.php on line 342
[Tue Jul 31 12:15:30 2012] [notice] caught SIGTERM, shutting down
[Tue Jul 31 12:15:32 2012] [notice] Apache/2.2.17 (Ubuntu) DAV/2 SVN/1.6.12 PHP/5.3.5-1ubuntu7.10 with Suhosin-Patch configured -- resuming normal operations
[Tue Jul 31 12:17:18 2012] [notice] caught SIGTERM, shutting down
[Tue Jul 31 12:17:20 2012] [notice] Apache/2.2.17 (Ubuntu) DAV/2 SVN/1.6.12 PHP/5.3.5-1ubuntu7.10 with Suhosin-Patch configured -- resuming normal operations
[Tue Jul 31 12:32:41 2012] [notice] caught SIGTERM, shutting down
[Tue Jul 31 12:32:42 2012] [notice] Apache/2.2.17 (Ubuntu) DAV/2 SVN/1.6.12 PHP/5.3.5-1ubuntu7.10 with Suhosin-Patch configured -- resuming normal operations
[Tue Jul 31 12:49:04 2012] [notice] caught SIGTERM, shutting down
[Tue Jul 31 12:49:05 2012] [notice] Apache/2.2.17 (Ubuntu) DAV/2 SVN/1.6.12 PHP/5.3.5-1ubuntu7.10 with Suhosin-Patch configured -- resuming normal operations 
```

我该如何解决这个问题？

如果有任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-28T10:41:09.093

Mage_Adminhtml_Helper_Data::XML_PATH_CUSTOM_ADMIN_PATH 类常量已添加到 Community Edition 版本 1.6.1.0。

如果您已将 Magento 从 1.4.1.1 升级到最新版本，请仔细检查您是否已成功升级以下文件：

```
app/code/core/Mage/Adminhtml/Helper/Data.php 
```

它应该有以下几行：

```
const XML_PATH_USE_CUSTOM_ADMIN_PATH = 'default/admin/url/use_custom_path';
const XML_PATH_CUSTOM_ADMIN_PATH = 'default/admin/url/custom_path'; 
```

如果没有，您的升级过程有一些失败。我会确保升级后的 Magento 安装文件夹（以下子文件夹）中的每个文件与您升级到的 Magento 版本中的文件完全对应（您可以使用 Git 或 Diff 进行检查）：

*   应用程序/代码
*   应用程序/等/模块
*   库

还要检查编译是否已关闭，并在重试之前清理缓存。如果您使用 APC 或类似的 PHP 操作码缓存，请同时重新启动您的 PHP 服务（apache、php-fpm 等），因为这些缓存中的 PHP 字节码可能已过时。

# c++ - 如何在c ++中将整个xml文件源存储为字符串

> ID：11734371
> 
> 赞同：0
> 
> 时间：2012-07-31T06:30:06.373
> 
> 标签：c++, xml, string, visual-c++, xml-parsing

xml 只能在代码中作为外部链接引用，例如。“www.etc.com”。我希望能够从某些网站的页面源中提取某些单词，但首先我需要将源内容转储到字符串或 CString 中。谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:40:58.973

您可以使用 DOM 或 SAX 解析器来检索每个元素。

如果您希望整个 xml 文件内容在内存中，那么这里是示例代码

```
 ifstream fin("books.xml");

       if ( fin.fail())
          return 1;

       fin.seekg(0, ios::end);
       size_t length = fin.tellg();
       fin.seekg(0, ios::beg);

       char* buffer = new char[length+1];
       fin.read(buffer, length);
       buffer[length] = '\0';

       fin.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:41:07.337

我认为您要问的是如何从互联网上获取数据。我找到[了这个](http://www.cplusplus.com/forum/windows/36638/)线程和一些关于这个的[源代码。](http://curl.haxx.se/libcurl/c/example.html)

# java - 分叉一个进程

> ID：11734377
> 
> 赞同：1
> 
> 时间：2012-07-31T06:31:06.177
> 
> 标签：java, c, fork

我有一个进入数据库并获取数据的过程。复杂性和我的问题如下：

一些数据来自一个数据源，其余数据来自另一个数据源。我想知道一旦我开始一个进程，我可以创建一个对象，我将在其中转储所有数据，然后分叉（如在 C 语言中）。将每个进程发送到不同的数据源。

问题 1：如果我做一些类似 fork 的事情，它会同时更新数据的转储，对吗？即，如果父进程从源 A 获取数据并转储到对象 O，而 chil 进程从 B 获取并仅转储到对象 O，那么 O 会同时填充对吗？它不会创建两个对象，一个是来自 A 的数据，另一个是来自 B 的数据。此外，这个过程的效率仅在于多处理器系统吗？

问题2：Java中有这样的东西吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:05:47.450

你可以试试@DaveHoves 的建议。在处理多个源数据加载/处理时，我个人更喜欢的另一个选择是使用[ForkJoin](http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html)框架。[请在这里](http://www.vogella.com/articles/JavaConcurrency/article.html)找到好的教程。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T06:51:48.767

我会说相当于 fork 的 java 是`java.lang.Thread`. 看看[这里](http://docs.oracle.com/javase/tutorial/essential/concurrency/)的教程。

如果我正确理解了这个问题，看起来对 DataSource A 的访问将通过应用程序的主线程进行，而对 DataSource B 的访问将由单独的线程处理。我很想将对**两个**数据源的访问推送到单独的线程中，等待它们都完成（请参阅[javadocs](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#join%28%29)），然后将结果合并到一个对象中（上面描述中的 Object O ）。

# c# - 在 foreach 循环中检查 null

> ID：11734380
> 
> 赞同：120
> 
> 时间：2012-07-31T06:31:27.383
> 
> 标签：c#, loops, foreach, null

是否有更好的方法来执行以下操作：
在继续循环之前，我需要在 file.Headers 上检查 null

```
if (file.Headers != null)
{
  foreach (var h in file.Headers)
  {
   //set lots of properties & some other stuff
  }
} 
```

简而言之，由于我的代码中发生的缩进级别，在 if 中编写 foreach 看起来有点难看。

是可以评估的东西

```
foreach(var h in (file.Headers != null))
{
  //do stuff
} 
```

可能的？

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-07-31T06:40:41.253

作为对 Rune 建议的轻微修饰，您可以创建自己的扩展方法：

```
public static IEnumerable<T> OrEmptyIfNull<T>(this IEnumerable<T> source)
{
    return source ?? Enumerable.Empty<T>();
} 
```

然后你可以写：

```
foreach (var header in file.Headers.OrEmptyIfNull())
{
} 
```

根据口味更改名称:)

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2012-07-31T06:37:43.337

假设 file.Headers 中元素的类型是 T 你可以这样做

```
foreach(var header in file.Headers ?? Enumerable.Empty<T>()){
  //do stuff
} 
```

如果 file.Headers 为空，这将创建一个空的 T 枚举。但是，如果文件类型是您拥有的类型，我会考虑更改 getter `Headers`。`null`是 unknown 的值，所以如果可能，当 null 实际上（/最初）应该解释为“我不知道是否有任何元素”时，而不是使用 null 作为“我知道没有元素”，而是使用空集来显示你知道集合中没有元素。这也将是 DRY'er，因为您不必经常进行 null 检查。

**编辑**作为 Jons 建议的后续行动，您还可以创建一个扩展方法，将上述代码更改为

```
foreach(var header in file.Headers.OrEmptyIfNull()){
  //do stuff
} 
```

在您无法更改 getter 的情况下，这将是我自己的首选，因为它通过为操作命名（OrEmptyIfNull）更清楚地表达了意图

上面提到的扩展方法可能会使优化器无法检测到某些优化。具体来说，那些与 IList 相关的使用方法重载 this 可以被消除

```
public static IList<T> OrEmptyIfNull<T>(this IList<T> source)
{
    return source ?? Array.Empty<T>();
} 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-07-31T06:46:54.510

坦率地说，我建议：干脆接受`null`测试。`null`测试**只是**一个`brfalse`or `brfalse.s`; _ 其他一切都将涉及更多的工作（测试、分配、额外的方法调用、不必要的`GetEnumerator()`, `MoveNext()`,`Dispose()`迭代器等）。

测试简单、`if`明显且有效。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2018-02-27T11:03:42.070

使用[空条件运算符](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/null-conditional-operators)和比标准 foreach 循环更快的 ForEach()。
不过，您必须将集合转换为 List。

```
 listOfItems?.ForEach(item => // ... ); 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2012-07-31T06:39:35.583

迭代之前的“if”很好，这些“漂亮”语义中很少有可以使您的代码可读性降低。

无论如何，如果缩进打扰您，您可以更改 if 来检查：

```
if(file.Headers == null)  
   return; 
```

并且只有当 headers 属性存在真值时，您才会进入 foreach 循环。

我可以考虑的另一个选择是在 foreach 循环中使用 null-coalescing 运算符并完全避免 null 检查。样本：

```
List<int> collection = new List<int>();
collection = null;
foreach (var i in collection ?? Enumerable.Empty<int>())
{
    //your code here
} 
```

（用你的真实对象/类型替换集合）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-31T06:40:41.577

我为这些场景使用了一个不错的小扩展方法：

```
 public static class Extensions
  {
    public static IList<T> EnsureNotNull<T>(this IList<T> list)
    {
      return list ?? new List<T>();
    }
  } 
```

鉴于 Headers 是列表类型，您可以执行以下操作：

```
foreach(var h in (file.Headers.EnsureNotNull()))
{
  //do stuff
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-25T11:12:01.047

在某些情况下，我更喜欢另一种通用变体，假设通常默认集合构造函数返回空实例。

最好命名这个方法`NewIfDefault`。它不仅对集合有用，因此类型约束`IEnumerable<T>`可能是多余的。

```
public static TCollection EmptyIfDefault<TCollection, T>(this TCollection collection)
        where TCollection: class, IEnumerable<T>, new()
    {
        return collection ?? new TCollection();
    } 
```

# ruby-on-rails - Ruby On Rails - 从文本框中检索数据并显示其内容

> ID：11734381
> 
> 赞同：0
> 
> 时间：2012-07-31T06:31:34.560
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是 Ruby on Rails 的新手。我有一个连接到 twitter 的简单应用程序。该应用程序在主页上有一个搜索文本框和一个提交按钮。还有一个模型和控制器。我想在twitter上动态搜索一些关键字，然后将它们显示在我们应用程序的主页上。我在“index.html.erb”页面中创建了一个文本框和提交按钮。我不知道如何获取关键字并传递给控制器​​。然后我想显示搜索结果。任何人都可以找到相同的示例吗？请建议代码中的错误/更改。像这样的 ruby​​ on rails

**index.html.erb 的内容**

```
<h1>Tweets about New Year Resolution</h1>

<tr><td>Enter keyword  <input type = "text" name = "keyword"></td></tr>
<tr><td><input type = "submit" value = "SEARCH"></td></tr>

<%= form_tag(tweets/index, :method => "get") do %>
    <%= label_tag(:q, "Enter keyword :") %>
    <%= text_field_tag(:q) %>
    <%= submit_tag("SEARCH") %>
<% end %>

<div id="container">
<ul>
<% @tweets.each do |tweet| %>
    <li class="<%=cycle('odd', '')%>">
        <%= link_to tweet.from_user, "http://twitter.com/#{tweet.from_user}", :class => "username", :target => "_blank" %>  
        <div class="tweet_text_area">
            <div class="tweet_text">
                <%=raw display_content_with_links(tweet.text) %>
            </div>
            <div class="tweet_created_at">
                <%= time_ago_in_words tweet.twitter_created_at %> ago
            </div>
        </div>
    </li>
<% end %>
</ul>
</div> 
```

**控制器 tweets.rb 的内容**

```
class TweetsController < ApplicationController
  def index
    #Get the tweets (records) from the model Ordered by 'twitter_created_at' descending

   searchValue = params[:keyword] 

 if Tweet.count > 0                         
               Tweet.delete_all        
    end    
     Tweet.get_latest_new_year_resolution_tweets("iphone")

    @tweets = Tweet.order("twitter_created_at desc")   

  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:45:31.093

我注意到的一件事是您的输入字段以`q`HTML 命名，而您的控制器操作正在等待`params[:keyword]`。尝试更改输入字段：

```
<%= text_field_tag(:keyword) %> 
```

表单标签助手中的 url 也应该被引用：

```
form_tag("tweets/index", :method => "get") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T03:45:31.150

```
 <% @tweets.each do |tweet| %>

     .......

   <%end%> 
```

只有当@tweets 至少有一个元素时才会执行/输出。如果您真的想进行检查，请使用

```
 <%if @tweets.empty? %> 
```

哪里都行。请不要说@tweet.nil？即使数组为空，也可能返回 false。

当您将搜索表单提交给 TweetsController 时，您将获得异常。默认情况下，当您通过 POST 向控制器提交表单时，它的“创建”操作/方法或“更新”操作不会像您期望的那样被称为“索引”操作。

您可能需要为该 TweetsController 定义额外的操作；类似“搜索”的东西；然后你可以使用 form_tag(:action=>"search" , :controller=>"Twitter", :method => "get") 或类似的东西。您还应该在 routes.rb 文件中指定您有一个通过 GET/POST 访问的“搜索”资源。

在你的推文控制器中

```
 def search

       @tweets=  Tweet.where("text LIKE %#{params[:q]}%")
       render :action=>"index" #show the home page itself
    end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T06:41:19.017

有一个[关于搜索表单的不错的 railscast](http://railscasts.com/episodes/37-simple-search-form)，您可以从中学习。

如果您想避免数据库访问，您也可以从[this](http://railscasts.com/episodes/193-tableless-model)、[this](http://railscasts.com/episodes/16-virtual-attributes)和[this中学习。](http://railscasts.com/episodes/167-more-on-virtual-attributes)

# java - 使用泛型检查 @Entity 的 @Unique

> ID：11734382
> 
> 赞同：0
> 
> 时间：2012-07-31T06:31:36.297
> 
> 标签：java, generics, jpa, jpql, generic-programming

甚至可以将泛型与`genericPersist`and一起使用`isUniqueEntity`吗？persist 方法看起来相当简单：

```
package net.bounceme.dur.usenet.driver;

import java.util.ArrayList;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.mail.Folder;
import javax.mail.Message;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;
import javax.persistence.TypedQuery;
import net.bounceme.dur.usenet.model.Article;
import net.bounceme.dur.usenet.model.Newsgroup;
import net.bounceme.dur.usenet.model.Usenet;

public class Main {

    private static final Logger LOG = Logger.getLogger(Main.class.getName());
    private Usenet u = Usenet.INSTANCE;

    public static void main(String[] args) {
        try {
            Main main = new Main();
        } catch (Exception ex) {
            Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public Main() throws Exception {
        EntityManagerFactory emf;
        EntityManager em;
        emf = Persistence.createEntityManagerFactory("USENETPU");
        List<Newsgroup> subscribed = getFolders();
        em = emf.createEntityManager();
        for (Newsgroup newsgroup : subscribed) {
            persistNewsgroups(em, newsgroup);
            List<Message> messages = u.getMessages(newsgroup.getNewsgroup());
            LOG.fine(newsgroup + "  " + messages.size() + " messages");
            for (Message message : messages) {
                LOG.fine("message " + message.getMessageNumber());
                Article article = new Article(message);
                persistArticle(em, article);
            }
        }
        em.close();
    }

    private boolean isUniqueArticle(Article article, List<Article> articles) {
        LOG.fine(articles.toString());
        for (Article a : articles) {
            if (a.getSubject().equalsIgnoreCase(article.getSubject())) {
                return false;
            }
        }
        LOG.fine("new\t\t" + article);
        return true;
    }

    private void persistArticle(EntityManager em, Article article) {
        LOG.fine(article.toString());
        TypedQuery<Article> query = em.createQuery("SELECT a FROM Article a", Article.class);
        List<Article> results = query.getResultList();
        if (isUniqueArticle(article, results)) {
            em.getTransaction().begin();
            em.persist(article);
            em.getTransaction().commit();
        }
    }

    private <T> void genericPersist(EntityManager em, Class<T> entity, String queryString) {
        TypedQuery<T> query = em.createQuery(queryString, entity);
        List<T> results = query.getResultList();
        if (isUniqueEntity(entity, results)) {
            em.getTransaction().begin();
            em.persist(entity);
            em.getTransaction().commit();
        }
    }

    private <T> boolean isUniqueEntity(Class<T> entity,List<T> results) {
        return false;
    }

    private void persistNewsgroups(EntityManager em, Newsgroup newNewsgroup) {
        LOG.fine(newNewsgroup.toString());
        TypedQuery<Newsgroup> query = em.createQuery("SELECT n FROM Newsgroup n", Newsgroup.class);
        List<Newsgroup> results = query.getResultList();
        if (isUniqueNewsgroup(newNewsgroup, results)) {
            em.getTransaction().begin();
            em.persist(newNewsgroup);
            em.getTransaction().commit();
        }
    }

    private boolean isUniqueNewsgroup(Newsgroup newNewsgroup, Iterable<Newsgroup> results) {
        LOG.fine(results.toString());
        for (Newsgroup existingNewsgroup : results) {
            if ((existingNewsgroup.getNewsgroup().equals(newNewsgroup.getNewsgroup()))) {
                return false;
            }
        }
        LOG.fine(newNewsgroup + "\tnew");
        return true;
    }

    private List<Newsgroup> getFolders() {
        List<Folder> folders = u.getFolders();
        List<Newsgroup> newsgroups = new ArrayList<>();
        for (Folder folder : folders) {
            Newsgroup newsgroup = new Newsgroup(folder);
            newsgroups.add(newsgroup);
        }
        LOG.fine(newsgroups.toString());
        return newsgroups;
    }
} 
```

我`isUniqueEntity`所能想到的就是确定对象的类型，然后使用开关，但这似乎并没有节省多少。如何才能做到这一点？

假设实体有一个`@Unique`字段，确定该字段然后相应地查询数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:32:23.020

嗯，我不太确定-您是否要替换`isUniqueArticle`and ？您可以在文章/新闻组中添加一些内容吗？如果您可以为它们添加一个接口和一个方法，那么可以。如果你不能那么可能你也可以这样做，但我想不出那样:)`isUniqueNewsgroup``isUniqueEntity`

无论如何，你可以试试这个。为这两个类添加一个接口：

```
public interface Equalable<T> {
    boolean isEqual(T other);
}

private <T extends Equalable> boolean isUniqueEntity(T entity, Iterable<T> results) {
    LOG.fine(results.toString());
    for (T resultEntity : results) {
        if (resultEntity.isEqual(entity))) {
            return false;
        }
    }
    LOG.fine(newNewsgroup + "\tnew");
    return true;
} 
```

然后在两个类中实现 isEqual(T other) （现在只需复制粘贴两个 isXUnique 中的“ifs”中的条件）。

如果那是您正在寻找并且有效的东西（尚未编译它！），persist 方法对您来说应该没问题:)

# security - 如何在 Webinspect 中仅扫描应用程序的一部分

> ID：11734383
> 
> 赞同：0
> 
> 时间：2012-07-31T06:31:42.287
> 
> 标签：security

谁能解释使用 Webinspect 仅扫描 Web 应用程序特定部分的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:10:30.993

实际上，约翰没有给你确切文章的链接。这里是：“如何使用 Webinspect 仅扫描 Web 应用程序的一部分” [http://webappsecure.blogspot.in/2012/07/how-to-use-webinspect-to-scan-only-part.html](http://webappsecure.blogspot.in/2012/07/how-to-use-webinspect-to-scan-only-part.html)

顺便说一句 - 您可能应该使用 HP WebInspect 用户论坛了解更多问题。开发者和用户更关注这个话题。

[http://h30499.www3.hp.com/t5/HP-Application-Security-Center/ct-p/sws-sc01](http://h30499.www3.hp.com/t5/HP-Application-Security-Center/ct-p/sws-sc01)

```
 Parent:  http://h30499.www3.hp.com/t5/Application-Security/ct-p/sws-AS 
```

# mysql - 数据库索引创建与用户为表创建索引

> ID：11734387
> 
> 赞同：0
> 
> 时间：2012-07-31T06:31:58.577
> 
> 标签：mysql, oracle, indexing

我有一个mysql数据库。当我在表[T_ID, T_Name, T_AGE] 中输入数据时（比如大约 10k 行。）数据库是否会为该表隐式创建索引。如果是这样，那么如果我自己使用**"Create Index .. ON say T_ID" 创建索引**会发生什么。两个索引是否都存在，或者哪个索引会实际存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:38:55.620

如果您指定`primary key(t_id)`，那么它将自动创建一个索引，您将无法在同一列上创建另一个索引。

为什么你不尝试这些案例？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:38:09.423

它依赖于 MySQL 中的存储引擎。

在`InnoDB`存储引擎的情况下，如果您没有`PRIMARY KEY`在`ID`列上指定任何内容，那么在内部它将自动创建一个`clustered index`. 看[这里](http://dev.mysql.com/doc/refman/5.5/en/innodb-index-types.html)。

如果是存储引擎，您可以在字段上`MyISAM`明确指定。`PRIMARY KEY``ID`

在这两种情况下，二级索引都是可选的。

# javascript - Google Maps API - 在从 ajax 页面加载新数据之前清除标记、折线

> ID：11734392
> 
> 赞同：1
> 
> 时间：2012-07-31T06:32:44.027
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3, google-maps-markers

我从 ajax 页面加载标记和折线，索引页面上显示的每个请求数据，现在我想在从 ajaxPage 获取新数据之前清除数据*（标记、折线、...）*

***索引页：***

```
var gmarkers = []; 
var map = null;
function initialize() {
  var myOptions = {
    zoom: 15,
    center: new google.maps.LatLng(35, 53),
    // mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }

  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
  google.maps.event.addListener(map, 'click', function() {
        infowindow.close();
        });

}

var infowindow = new google.maps.InfoWindow(
  { 
    size: new google.maps.Size(150,50)
  });

function myclick(i) {
  google.maps.event.trigger(gmarkers[i], "click");
}

function createMarker(latlng, name, html) {
    var contentString = html;
    var marker = new google.maps.Marker({
        position: latlng,
        map: map,
        zIndex: Math.round(latlng.lat()*-100000)<<5
        });

    google.maps.event.addListener(marker, 'click', function() {
        infowindow.setContent(contentString); 
        infowindow.open(map,marker);
        });
    // save the info we need to use later for the side_bar
    gmarkers.push(marker);
} 
```

***Ajax 页面（record2.php）：***

```
var polylines = [];

var beaches = [
    ['Bondi Beach',10,15, 4],
    ['Coogee Beach',11,16, 5],
    ['Cronulla Beach',13,15, 3],
    ['Manly Beach',13,17, 2],
    ['Maroubra Beach',12,10, 1]
];

for (var i = 0; i < beaches.length; i++) {
    var beach = beaches[i];
    var myLatLng = new google.maps.LatLng(beach[1], beach[2]);
    // var polylines = new google.maps.LatLng(beach[1], beach[2]);
    polylines.push(new google.maps.LatLng(beach[1], beach[2]));

    var marker = createMarker(myLatLng,"This place",beach[0])
}

var routes = new google.maps.Polyline({
    path: polylines,
    strokeColor: "#FF0000",
    strokeOpacity: 0.6,
    strokeWeight: 4
});

routes.setMap(map); 
```

***问题：***在加载新数据之前清除折线、标记等的简单方法`ajax page`？

*/--- 编辑 ---/*
我检查了[Google Maps API v3 的答案：如何删除所有标记？](https://stackoverflow.com/questions/1544739/google-maps-api-v3-how-to-remove-all-markers)但只是来自请求页面的第一个请求是响应，下一个请求将不起作用，我想我错误地添加了清晰的地图功能

***从索引调用 AjaxPage：***

```
$(document).ready(function(){
     $('#loader').hide();

        $("#search_button").click(function() {

            $('#loader').fadeIn(200);
            $('#login_group').slideUp(200);
            $.post("record2.php", {
                time: $('#login_username').val()

            }, function(response){
                setTimeout("finishAjax('login_group', '"+escape(response)+"')", 200);
            });
            return false;
        });
    });

function finishAjax(id, response){
  $('#loader').slideUp(300);
  $('#'+id).html(unescape(response));
  $('#'+id).fadeIn(200);

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T06:24:06.120

创建变量标记数组。然后在创建标记时，添加标记数组。你可以试试这个。

```
var markerArrays = new Array();
for (var i = 0; i < beaches.length; i++) {
    var beach = beaches[i];
    var myLatLng = new google.maps.LatLng(beach[1], beach[2]);
    // var polylines = new google.maps.LatLng(beach[1], beach[2]);
    polylines.push(new google.maps.LatLng(beach[1], beach[2]));

    var marker = createMarker(myLatLng,"This place",beach[0]);
    markerArrays.push(marker);
}

$.each(markerArrays, function(index, val) {
    val.setMap(null);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-30T07:13:40.297

**只需重置地图，**
即再次加载地图 `map = new google.maps.Map(document.getElementById('map'), mapOptions);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-08T10:37:57.017

您必须创建一个数组来保存所有标记。

如果要清除所有标记，则必须遍历数组并使用

```
marker.setMap(null) 
```

您可以删除所有标记

# sqlite - 在 Sqlite3 和 Psql 提示符处访问上一个结果

> ID：11734395
> 
> 赞同：1
> 
> 时间：2012-07-31T06:32:49.213
> 
> 标签：sqlite, postgresql

一些交互式 shell 有一个内置变量，它总是指向前一个命令的结果（例如在 python3 shell 中，这个变量是“_”）。

Sqlite3 和 Psql 提示中是否存在任何此类变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:32:44.613

`psql`没有，而且它并不是处理关系数据的典型方式。如果要保留先前查询的结果，请将其放在临时表中。

您的意思是您希望能够：

```
SELECT count(somecol), avg(someothercol) FROM _; 
```

... 例如？即您希望能够使用您的“最后结果”集并对其进行进一步处理？

如果是这样，通常最好：

*   使用 .将结果放入临时表中[`SELECT INTO`](http://www.postgresql.org/docs/9.1/static/sql-selectinto.html)。这几乎适用于任何东西，包括普通`SELECT`的 , `DELETE ... RETURNING`, `INSERT ... RETURNING`,`UPDATE ... RETURNING`等。然后根据需要处理临时表。
*   创建结果的[临时视图](http://www.postgresql.org/docs/9.1/static/sql-createview.html)。这当然只适用于`SELECT`. `CREATE TEMPORARY VIEW`创建一个只存在于您的会话的视图。
*   使用阅读线。只需按向上箭头即可访问上一个命令，根据需要进行编辑，然后重新运行。
*   使用`\e`psql 命令在外部编辑器（使用 env var 指定`EDITOR`）中打开最后一个命令，您可以在其中更轻松地对其进行修改。

SQLite 没有`\e`命令，我认为它没有可以返回结果集（`... RETURNING`命令）的 DML 命令。否则，其中大部分也应该适用于那里。

# java - 获取电子邮件客户端不支持通过 Java 发送电子邮件的 HTML 消息

> ID：11734398
> 
> 赞同：0
> 
> 时间：2012-07-31T06:32:55.000
> 
> 标签：java, email, apache-commons-logging

我正在使用**apache-commons-logging.jar**发送电子邮件。我能够成功发送 html 电子邮件，但很少有人在他们的邮件中收到**您的电子邮件客户端不支持 HTML 消息**消息。以下是代码示例 -

```
HtmlEmail htmlEmail = new HtmlEmail();
htmlEmail.setHostName("localhost");
htmlEmail.addTo(email, "demo1@sample.com");
htmlEmail.setFrom("demo2@sample.com", "Demo2");
htmlEmail.setSubject("Subject Line");

String msg = "<html>Hi Demo1,";
msg       += "<br><br> &nbsp;&nbsp;&nbsp;&nbsp; A very warm Welcome";
msg       += "</html>";
htmlEmail.setHtmlMsg(msg);

// set the alternative message
htmlEmail.setTextMsg("Your email client does not support HTML messages");

// send the email
htmlEmail.send(); 
```

我不明白如何解决这个问题。

请大师帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:46:16.753

您可能正在使用 Commons Email 而不是 Commons Logging 来发送电子邮件。

预计那些将他们的电子邮件客户端配置为首选文本的人实际上确实看到的是文本而不是 HTML。作为发件人，您唯一能做的就是编写更有意义的纯文本消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:56:35.073

这个“问题”的解决方案是改变：

```
htmlEmail.setTextMsg("Your email client does not support HTML messages"); 
```

至

```
htmlEmail.setTextMsg("A very warm Welcome"); 
```

...或者完全不考虑。用户可以选择是否将他们的电子邮件客户端配置为显示电子邮件正文的 HTML 或纯文本版本。理想情况下，您应该同时发送两个版本，但如果您只发送一个版本，那么您应该简单地将另一个版本留在外面。

* * *

> 我刚刚给出了“非常热烈的欢迎”的例子，有很多像超链接这样的 html 消息。所以我不能以纯文本格式提供这些消息。

我建议您阅读以下建议：

*   [http://blog.hubspot.com/blog/tabid/6307/bid/32643/Why-Marketers-Must-Optimize-Emails-for-HTML-AND-Plain-Text-Infographic.aspx](http://blog.hubspot.com/blog/tabid/6307/bid/32643/Why-Marketers-Must-Optimize-Emails-for-HTML-AND-Plain-Text-Infographic.aspx)

（我知道它主要针对电子邮件营销人员......但大多数建议也同样适用于软件生成的电子邮件。）

最重要的是，如果您希望您的用户可以阅读您的电子邮件，*那么您的工作*就是确保有可行的 HTML 和纯文本版本。如果您不这样做，您可能会疏远一些由于各种原因不能或不会阅读 HTML 电子邮件的用户。

# iphone - Objective-C：如何从 0.123 或一般的 xyz... 从 0.xyz ... 获得 123？

> ID：11734399
> 
> 赞同：2
> 
> 时间：2012-07-31T06:32:58.347
> 
> 标签：iphone, ios, objective-c, fractions

如标题所述，如果我有一个浮点数，我需要将小数部分作为整数，我该怎么做？

我刚在想：

1.  获取小数点的索引（位置）
2.  那么我可以知道小数点后有多少位
3.  将这些数字作为子字符串
4.  将其转换为整数

有没有更好/更聪明的方法？

更新：

我忘了提，浮点数的格式如下：X.YZ 所以小数点后最多有两位数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T06:43:21.390

您使用[modf](http://www.cplusplus.com/reference/clibrary/cmath/modf/)功能：

```
double integral;
double fractional = modf(some_double, &integral); 
```

参考[NSDecimalnumber 的这个小数部分](https://stackoverflow.com/questions/5355755/fractional-part-of-nsdecimalnumber)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T07:04:09.943

```
 float temp=12.123;
NSString *str=[NSString stringWithFormat:@"%f",temp];
NSArray *arr=[str componentsSeparatedByString:@"."];
int tempInt=[[arr lastObject] intValue]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-31T06:54:01.430

```
NSString *str = [NSString stringWithFormat:@"%f", value];
NSArray *arr = [str componentsSeparatedByString:@"."];
int num = [[arr objectAtIndex:1] intValue]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-31T06:42:01.347

举个例子：x = 129.567;

将 x 转换为整数并放入 y。y = int(x); 所以 y = 129;

现在从 x 中减去 y。所以 z = xy; z = .567

z = z*1000；所以 z = 567

我想这就是你要找的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T06:42:23.883

取浮点数乘以 1000 并将结果转换为整数怎么样？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T09:28:10.313

这是我的解决方案：

```
float value = 12.345f;
float integral;
float divisor = 1000.0f;
float fractional = modff(value, &integral);  // breaks a float into fractional and integral parts

int xyz = (int)fmodf(fractional*divisor, divisor);  // modulo (cannot just use %)

NSLog(@"XYZ: %d", xyz); // logs "XYZ: 345" 
```

通过更改您的值`divisor`可以获得您想要的精度，例如只有 XY (100.0f) 或 X (10.0f)。

该解决方案不是最高效的，但很有用。我认为它可以使用按位运算进行优化。

**使用“f”的注意事项：**

*   [初始化（在 C 中）时 0.0f 的意义是什么？](https://stackoverflow.com/questions/2391818/f-after-number-float-in-objective-c-c?lq=1)
*   [Objective-C/C 中数字/浮点数后的“f”](https://stackoverflow.com/questions/5199338/what-is-the-significance-of-0-0f-when-initializing-in-c?lq=1)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-31T06:38:27.927

看看`NSDecimalNumber`和`NSDecimal`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-31T06:48:22.243

浮点数永远不能准确地表示数字。最好的方法是从“双”数字创建一个字符串，然后进行字符串操作以获取小数点后的数字。

# mobile - 使用 SenchaTouch 2 一直只显示进度条

> ID：11734405
> 
> 赞同：2
> 
> 时间：2012-07-31T06:33:16.783
> 
> 标签：mobile, extjs, sencha-touch-2

我刚刚通过命令使用 Sencha Touch 2 创建了默认示例应用程序

```
sencha app create FirstApp D:/Sencha/MyFirstApp all 
```

我尝试运行 index.html，但它只在我的 chrome 中显示进度条，而不是默认页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:23:31.880

我遇到了同样的问题，在找到解决方案之前必须做很多研究。我正在使用 sencha touch 2 并在 IIS 服务器 7 上运行它。默认情况下，IIS 不提供 JSON 文件。因此，在我的 Chrome 控制台中，IIS 返回了一个未找到的文件（404）。一旦我添加了 JSON MIME 类型和到 IIS 的处理程序映射，它就开始完美地工作了。如果您也在使用 IIS，则可以按照以下说明将 JSON 的 MIME 类型和处理程序映射添加到 IIS。

1.  打开你的 IIS 管理器。
2.  在服务器属性中，导航到 Mime 类型。
3.  单击`Add`。（对我来说，这是在 Windows 7 的右侧面板上）

    *   将文件扩展名为：.json
    *   将 MIME 类型设置为：application/x-javascript
4.  返回服务器属性。

5.  导航到处理程序映射
6.  点击`Add a Script Map`

    *   将请求路径指定为：*.json
    *   可执行文件为：C:\WINDOWS\system32\inetsrv\asp.dll
    *   将名称设置为：JSON
7.  重新启动服务器和您的网站，使其正常工作

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:46:12.960

默认情况下，示例应用程序在开发中创建或 Sencha 名称为“microloader”模式。这意味着您不会在启动时加载 sencha-touch.js，但是来自您的应用程序和核心 Ext 的所有类都是从 sdk 文件夹异步加载的。要在 microloader 模式下运行，您必须连接**本地 http 服务器**。像**xampp**或其他。之后将您的源代码复制（或更好的链接）到 htdocs 文件夹并通过 http:// *localhost* /path/to/you/MyFirstApp在浏览器中运行应用程序

干杯，奥列格

# .net - 添加对 DLL 的引用不会复制 Visual Studio 中 bin 文件夹中的所有依赖 DLL

> ID：11734410
> 
> 赞同：-2
> 
> 时间：2012-07-31T06:33:35.503
> 
> 标签：.net, .net-assembly

我有以下场景，项目 A 引用 A1 和 A2 DLL。Proj A 是一个库项目，包含一些常见的数据相关功能，可以在所有应用程序中使用。解决方案 X 中的项目 B 和解决方案 Y 中的项目 C 依赖于项目 A 来使用其与数据相关的功能。现在我有以下选择。

选项1：

在解决方案 X 和 Y 中添加项目 A 并让各自解决方案中的项目 B 和 C 将项目 A 添加为“项目引用”，这将复制 A.dll、A1.dll 和 A2.dll 到 bin 文件夹中自动项目 B 和 C。

优点：

1.  如果我在 Proj A 中更改任何内容，它将自动反映在 Proj B 和 C 中。
2.  正如我所提到的，它不仅会复制 A.dll，还会复制 Proj B 和 Proj C 的 bin 文件夹中的 A1.dll 和 A2.dll。

缺点：

1.  如果我更改 Proj A 的位置，那么我需要在解决方案中修复这个问题，并且需要构建所有使用 Proj A 作为项目参考的解决方案。

选项 2：

创建一个单独的中央解决方案，其中包括所有公共库项目。创建一个项目 CommonLib 将所有库项目作为项目引用添加到该项目中，以便 CommonLib 将 Proj A 引用为项目引用。这会将 A.dll 、 A1.dll 和 A2.dll 复制到 CommonLib 项目的 bin 文件夹中。现在解决方案 X 和 Y 中的项目 B 和 C 需要从项目 CommonLib 的 bin 文件夹中引用 A.dll。

优点：

1.  项目 A 位置的更改不会影响 Sol X 和 Y 的修复，因为您只需要在 CommnLib 解决方案这一单一位置进行修复。

缺点：

1.  如果你从 commonlib bin 文件夹中引用 A.dll，在项目 B 中，它不会自动复制项目 B 的 bin 文件夹中的 A1.dll 和 A2.dll。所以你永远不会知道项目 A 的所有 DLL 是什么是依赖的。

为什么当我从 CommonLib 项目的 bin 文件夹中引用 A.dll 时，不包括 A1.dll 和 A2.dll ？对此的任何解决方案。

[注意：我不想使用 GAC]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T12:17:52.380

选项 1 是最好的 选项 2 不是最好的

# ios - 我如何等待 NSStream 打开或失败？

> ID：11734414
> 
> 赞同：3
> 
> 时间：2012-07-31T06:33:44.263
> 
> 标签：ios, nsstream

目前，当我打开一个 NSInputStream（例如）时，我可以将其设置为获取一个指示它已完全打开的事件。但如果失败，则根本没有任何事件。我从来没有被告知开幕未能完成。我可以在它试图打开时进行轮询，但是我必须在很长一段时间内占用一个线程。

我想做的是编写高效的代码来等待流打开或打开失败。有没有使用 NSStream 等的方法？

我还想创建一个可以等待一段时间的事件。如果连接成功，该事件将发出信号并将我弹出等待状态。如果发生超时，我可以测试状态并查看它是否失败或再次回到等待状态。但这当然是 B 计划，既不雄辩也不高效。并且查看 CocoaTouch 文档并不清楚如何创建这样一个我可以等待超时的信号。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T22:09:51.713

`NSStream`当 a无法打开时会发生一个事件： `NSStreamEventErrorOccurred`。也许您遇到的问题是 TCP/IP 超时可能很长。因此，如果与主机的连接将失败，则可能需要 30 秒才能收到此事件。

您可以同时启动一个`NSTimer`以较短的时间间隔打开流的时间，但是您会遇到该时间间隔应该是多少的问题？

通常最好将取消连接的选项留给用户，除非发生 TCP/IP 超时。

我在许多项目中所做的是在大约 1 秒后弹出一个带有活动指示器和取消按钮的自定义模式视图。本地网络上的许多连接将在此之前完成，用户不会被弹出窗口打扰。对于较慢的连接，这允许用户决定他们愿意等待多长时间。您甚至可以在更长的时间后更新模态视图中的消息，说连接比平时花费的时间更长，这样他们就知道程序知道他们正在等待！

# android - 是否可以将 View 添加到 xml 中包含的布局中？

> ID：11734416
> 
> 赞同：0
> 
> 时间：2012-07-31T06:33:51.793
> 
> 标签：android, android-layout

我想知道是否可以在 xml 中实现以下目标：

我有这个简单的布局，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp"
    android:orientation="horizontal" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:text="Address: "
    android:textSize="14dp" />

</LinearLayout> 
```

当我在其他 xml 中包含此布局时，是否可以在其中添加另一个 TextView，因此结果如下所示：

地址：另一个文本视图的文本。

我想在 xml 中完成这项工作，而不是以编程方式。

我试过以下：

```
 <include layout="@layout/mybaselayout" >

                <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="20dp"
                    android:text="mylocalizedstring" />
            </include> 
```

那是行不通的，我是在尝试在 xml 中做一些不可能的事情吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:38:14.577

Looks like the way I want to add views inside included layout in xml is not possible, only way to achieve it, is to do it programmatically.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:37:55.687

```
<?xml version="1.0" encoding="utf-8"?>  
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"  
          android:orientation="vertical"  
          android:layout_width="fill_parent"  
          android:layout_height="fill_parent"  
    >  
<TextView  
        android:layout_width="fill_parent"  
        android:layout_height="wrap_content"  
        android:text="This is a 'sans' demo!"  
        android:typeface="sans"  
        />  
 <TextView  
        android:layout_width="fill_parent"  
        android:layout_height="wrap_content"  
        android:text="This is a 'serif' demo!"  
        android:typeface="serif"  
        />  
 <TextView  
        android:layout_width="fill_parent"  
        android:layout_height="wrap_content"  
        android:text="This is a 'monospace' demo!"  
        android:typeface="monospace"  
        />  

  </LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T06:50:07.943

如果您不想直接添加`TextView`到`xml`布局文件中，则必须使用一些编码。如果您不止一次地包含您的布局，并且您只想添加`TextView`几次，请使用[ViewStub](http://android-developers.blogspot.sk/2009/03/android-layout-tricks-3-optimize-with.html)。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp"
    android:orientation="horizontal">
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:text="Address: "
        android:textSize="14dp" />
    <ViewStub
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:id="@+id/view_stub"
        android:inflatedId="@+id/addr"
        android:layout="@layout/text_view" />
</LinearLayout> 
```

`text_view.xml`布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<TextView
    android:layout_width="wrap_content"
    android:layout_height="fill_parent" /> 
```

当你想显示`TextView`你膨胀它

```
TextView text_view = (TextView) ((ViewStub) findViewById(R.id.view_stub)).inflate();
text_view.setText(...); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T06:50:56.613

你当然可以在你的第二个 xml 文件中这样做，

```
<RelativeLayout>
<include android:id="@+id/llone" layout="@layout/topbar"/>
<TextView android:layout_toRightOf="@id/llone"></TextView>
</RelativeLayout> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-31T06:40:51.060

你可以使用`<include>`标签

```
<include layout="@layout/topbar" android:layout_width="wrap_content" android:layout_height="wrap_content" /> 
```

# javascript - Javascript 等效于 Python 的 values() 字典方法

> ID：11734417
> 
> 赞同：80
> 
> 时间：2012-07-31T06:33:56.817
> 
> 标签：javascript

在 Python 中，我可以使用该`.values()`方法来迭代字典的*值*。

例如：

```
mydict = {'a': [3,5,6,43,3,6,3,],
          'b': [87,65,3,45,7,8],
          'c': [34,57,8,9,9,2],}
values = mydict.values(): 
```

其中`values`包含：

```
[
    [3,5,6,43,3,6,3,],
    [87,65,3,45,7,8],
    [34,57,8,9,9,2],
] 
```

如何在 Javascript 中只获取字典的值？

我最初的打印示例不清楚我想做什么。我只想要字典中值的列表/数组。

我意识到我可以循环浏览列表并创建一个新的值列表，但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-07-31T06:45:52.217

**更新**
我赞成 Adnan 的回答，因为它是第一个。如果有帮助，我只是发布更多细节。

[for..in](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in)循环是您正在寻找的-

```
var dictionary = {
    id:'value',
    idNext: 'value 2'
}

for (var key in dictionary){
    //key will be -> 'id'
    //dictionary[key] -> 'value'
} 
```

要获取`dictionary`对象中的所有键，你可以`Object.keys(dictionary)`
这意味着，你可以在数组循环中做同样的事情——

```
var keys = Object.keys(dictionary);
keys.forEach(function(key){
    console.log(key, dictionary[key]);
}); 
```

当您想要过滤键而不编写丑陋的`if..else`循环时，这证明特别方便。

```
keys.filter(function(key){
    //return dictionary[key] % 2 === 0;
    //return !key.match(/regex/)
    // and so on
}); 
```

**更新**- 要获取字典中的所有值，目前除了执行循环之外别无他法。但是，如何进行循环是一个选择问题。就个人而言，我更喜欢

```
var dictionary = {
    a: [1,2,3, 4],
    b:[5,6,7]
}
var values = Object.keys(dictionary).map(function(key){
    return dictionary[key];
});
//will return [[1,2,3,4], [5,6,7]] 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-05-21T10:37:21.203

[Object.values()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Object/values)在 Firefox 47 和 Chrome 51 中可用，这是其他浏览器的单行 polyfill：

```
Object.values = Object.values || function(o){return Object.keys(o).map(function(k){return o[k]})}; 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-08-05T16:23:33.520

使用 jQuery，有一个使用 $.map() 的漂亮的单行版本：

```
var dict = {1: 2, 3: 4};
var values = $.map(dict, function(value, key) { return value });
var keys = $.map(dict, function(value, key) { return key }); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-07-23T18:37:08.183

并不是说其他​​任何答案都是错误的，但是如果您不反对使用外部库，[underscore.js](http://underscorejs.org/#values)有一种方法可以做到这一点：

```
_.values({one: 1, two: 2, three: 3});
// returns [1, 2, 3] 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-07-31T06:38:20.207

您可以使用[`for in`](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in)

```
mydict = {'a': [3,5,6,43,3,6,3,],
          'b': [87,65,3,45,7,8],
          'c': [34,57,8,9,9,2]};
for (var key in mydict){
    alert(mydict[key]);
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-02-09T16:51:43.017

In ES6, currently supported by default in Firefox and with flags in Chrome, you can do this:

```
a = {'a': [3,5,6,43,3,6,3,],
      'b': [87,65,3,45,7,8],
      'c': [34,57,8,9,9,2]}
values = [a[x] for (x in a)]; 
```

`values` will now be the expected array.

This is also useful for [code golf](https://codegolf.stackexchange.com/questions/tagged/code-golf). Removing the spaces around `for` cuts it down to 17 characters.

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-07-31T06:38:46.680

在 javascript 中，您使用`for..in`循环对象的属性。

```
var mydict = {
    'a': [3,5,6,43,3,6,3,],
    'b': [87,65,3,45,7,8],
    'c': [34,57,8,9,9,2]
 };

for (var key in mydict) {
  console.log(mydict[key]);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-08T12:25:43.463

如果您只想获取值，请使用以下代码：

```
 for(keys in mydict){
   var elements = mydict[keys];
   console.log(elements);
 } 
```

您可以通过元素数组中的索引值获取单个元素。

# ios - 导航到特定的标签栏 - iOS

> ID：11734419
> 
> 赞同：0
> 
> 时间：2012-07-31T06:34:12.550
> 
> 标签：ios, xcode, uitabbarcontroller

我正在尝试模拟单击额外视图控制器中的按钮（第二视图控制器-> 额外 UIViewController ）时的场景，它返回带有第二个视图控制器的标签栏控制器（带有标签栏项目标题 2）作为显示页面而不是第一个视图控制器。默认选项卡式应用程序供我参考。 [这](http://i.imgur.com/eyn2t.png)是屏幕截图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:45:16.257

如果我正确理解您的问题，您是在问如何在 Cocoa Touch 中实现后退按钮。

后退按钮实际上并不在它们被选项卡的视图控制器中起作用。视图控制器通常被推送到一堆视图控制器上，其中堆栈的顶部是可见的。如果用户现在点击后退按钮，此操作将由堆栈顶部下方的视图控制器执行，这只会弹出最后一个控制器，这意味着您回来了。为此，您通常将最后一个视图控制器定义为您的委托，然后使用它向其发送消息。

我希望我正确地解释了你的问题。如果没有，您能详细说明一下吗？

# c# - 在紧凑框架中获取 Windows Mobile 设备上的设备 ID？

> ID：11734429
> 
> 赞同：1
> 
> 时间：2012-07-31T06:35:40.477
> 
> 标签：c#, windows-mobile, compact-framework, rapi

当我使用 RAPI API 从 PC 连接到 Windows 移动设备时，我可以像这样获取它的设备 ID：

```
using (RemoteDeviceManager r = new RemoteDeviceManager())
{
     using (RemoteDevice dev = r.Devices.FirstConnectedDevice)
     {
         //dev.DeviceId; <--the id
     }
} 
```

如何在紧凑的框架中在设备本身上获得相同的“DeviceId”值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-23T00:56:48.150

完整的代码是：

```
public static class Device 
{
    //http://msdn.microsoft.com/en-us/library/aa446562.aspx
    //These values and the definition of IOCTL_HAL_GET_DEVICEID were taken from the C++ header file, 
    // winioctl.h.
    private static Int32 FILE_DEVICE_HAL = 0x00000101;
    private static Int32 FILE_ANY_ACCESS = 0x0;
    private static Int32 METHOD_BUFFERED = 0x0;

    private static Int32 IOCTL_HAL_GET_DEVICEID =
        ((FILE_DEVICE_HAL) << 16) | ((FILE_ANY_ACCESS) << 14)
         | ((21) << 2) | (METHOD_BUFFERED);

    [DllImport("coredll.dll")]
    private static extern bool KernelIoControl(Int32 IoControlCode, IntPtr InputBuffer, Int32 InputBufferSize, byte[] OutputBuffer, Int32 OutputBufferSize, ref Int32 BytesReturned);
    public static string GetDeviceID()
    {
        byte[] data = new byte[256];
        Int32 OutputBufferSize, BytesReturned;
        OutputBufferSize = data.Length;
        BytesReturned = 0;
        // Call KernelIoControl passing the previously defined IOCTL_HAL_GET_DEVICEID parameter
        // We don’t need to pass any input buffers to this call
        // so InputBuffer and InputBufferSize are set to their null values
        bool retVal = KernelIoControl(IOCTL_HAL_GET_DEVICEID, IntPtr.Zero, 0, data, OutputBufferSize, ref BytesReturned);
        // If the request failed, exit the method now
        if (retVal)
        {
            // Examine the OutputBuffer byte array to find the start of the 
            // Preset ID and Platform ID, as well as the size of the PlatformID. 
            // PresetIDOffset – The number of bytes the preset ID is offset from the beginning of the structure
            // PlatformIDOffset - The number of bytes the platform ID is offset from the beginning of the structure
            // PlatformIDSize - The number of bytes used to store the platform ID
            // Use BitConverter.ToInt32() to convert from byte[] to int
            Int32 PresetIDOffset = BitConverter.ToInt32(data, 4);
            Int32 PlatformIDOffset = BitConverter.ToInt32(data, 0xc);
            Int32 PlatformIDSize = BitConverter.ToInt32(data, 0x10);

            // Convert the Preset ID segments into a string so they can be 
            // displayed easily.
            StringBuilder sb = new StringBuilder();
            sb.Append(String.Format("{0:X8}-{1:X4}-{2:X4}-{3:X4}-",
                 BitConverter.ToInt32(data, PresetIDOffset),
                 BitConverter.ToInt16(data, PresetIDOffset + 4),
                 BitConverter.ToInt16(data, PresetIDOffset + 6),
                 BitConverter.ToInt16(data, PresetIDOffset + 8)));

            // Break the Platform ID down into 2-digit hexadecimal numbers
            // and append them to the Preset ID. This will result in a 
            // string-formatted Device ID
            for (int i = PlatformIDOffset; i < PlatformIDOffset + PlatformIDSize; i++)
            {
                sb.Append(String.Format("{0:X2}", data[i]));
            }
            // return the Device ID string
            return sb.ToString();
        }
        // if null call 
        // "If the OEM has provided support for the IOCTL_HAL_GET_DEVICEID IOCTL, KernelIoControl will return true.
        // If the OEM has not provided support for IOCTL_HAL_GET_DEVICEID, or the request fails, then false is returned. 
        // If false is returned, call Marshal.GetLastWin32Error for details. An error code of 122 indicates that
        // the allocated DEVICE_ID buffer is too small to store all the information. In this situation,
        // the first 4 bytes of OutputBuffer will contain the required buffer size. 
        //Simply reallocate the size of OutputBuffer and request the information again."
        return null;
    }
} 
```

那么例如：

```
var deviceId = Device.GetDeviceID();
Debug.WriteLine(string.Format("Device Id {0}", deviceId)); 
```

谢谢jp2code。

我刚刚完成了这些点。在 Windows Compact 7 中为我工作

编辑：参考：[https](https://msdn.microsoft.com/en-us/library/ee478480.aspx) : //msdn.microsoft.com/en-us/library/ee478480.aspx 10/16/2014 此 I/O 控件 (IOCTL_HAL_GET_DEVICEID) 已弃用。其功能已集成到 IOCTL_HAL_GET_DEVICE_INFO。

安东尼奥

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T16:34:55.020

Microsoft 早在 2003 年就发表了一篇关于[使用 Microsoft .NET Compact Framework 检索 Windows CE 设备 ID](http://msdn.microsoft.com/en-us/library/aa446562.aspx)的库文章，我一直在成功使用该文章。

```
[DllImport("coredll.dll")]
private static extern bool KernelIoControl(Int32 IoControlCode, IntPtr InputBuffer, Int32 InputBufferSize, byte[] OutputBuffer, Int32 OutputBufferSize, ref Int32 BytesReturned);

private static string GetDeviceID() {
  // Reference: http://msdn.microsoft.com/en-us/library/aa446562.aspx
  byte[] data = new byte[256];
  Int32 OutputBufferSize, BytesReturned;
  OutputBufferSize = data.Length;
  BytesReturned = 0;
  // Call KernelIoControl passing the previously defined IOCTL_HAL_GET_DEVICEID parameter
  // We don’t need to pass any input buffers to this call
  // so InputBuffer and InputBufferSize are set to their null values
  bool retVal = KernelIoControl(IOCTL_HAL_GET_DEVICEID, IntPtr.Zero, 0, data, OutputBufferSize, ref BytesReturned);
  // If the request failed, exit the method now
  if (retVal) {
    // Examine the OutputBuffer byte array to find the start of the 
    // Preset ID and Platform ID, as well as the size of the PlatformID. 
    // PresetIDOffset – The number of bytes the preset ID is offset from the beginning of the structure
    // PlatformIDOffset - The number of bytes the platform ID is offset from the beginning of the structure
    // PlatformIDSize - The number of bytes used to store the platform ID
    // Use BitConverter.ToInt32() to convert from byte[] to int
    Int32 PresetIDOffset = BitConverter.ToInt32(data, 4);
    Int32 PlatformIDOffset = BitConverter.ToInt32(data, 0xc);
    Int32 PlatformIDSize = BitConverter.ToInt32(data, 0x10);

    // Convert the Preset ID segments into a string so they can be 
    // displayed easily.
    StringBuilder sb = new StringBuilder();
    sb.Append(String.Format("{0:X8}-{1:X4}-{2:X4}-{3:X4}-",
         BitConverter.ToInt32(data, PresetIDOffset),
         BitConverter.ToInt16(data, PresetIDOffset + 4),
         BitConverter.ToInt16(data, PresetIDOffset + 6),
         BitConverter.ToInt16(data, PresetIDOffset + 8)));

    // Break the Platform ID down into 2-digit hexadecimal numbers
    // and append them to the Preset ID. This will result in a 
    // string-formatted Device ID
    for (int i = PlatformIDOffset; i < PlatformIDOffset + PlatformIDSize; i++) {
      sb.Append(String.Format("{0:X2}", data[i]));
    }
    // return the Device ID string
    return sb.ToString();
  }
  return null;
} 
```

# android - 如何在android中升级数据库版本？

> ID：11734430
> 
> 赞同：0
> 
> 时间：2012-07-31T06:35:46.793
> 
> 标签：android, sqlite

我想将我的数据库版本升级到 4。我在清单文件中更改了版本代码，我的数据库 openhelper 是

```
@Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        DTLog.w("Old Version" + oldVersion, "new Version" + newVersion);
        DTLog.w("UPDATING DB", "Updating database");

        if (oldVersion == 1 && newVersion == 2) {
            db.execSQL("ALTER TABLE moduleRecord ADD COLUMN subtitle1 TEXT");
            db.execSQL("ALTER TABLE moduleRecord ADD COLUMN subtitle2 TEXT");
            db.delete("moduleRecord", null, null);

        } 
        else if ((oldVersion == 2&&newVersion == 3)) {
            db.execSQL("CREATE TABLE "
                    + "moduleDesc"
                    + "(deleteable INTEGER,createable INTEGER,updateable INTEGER,name TEXT,label TEXT,labelfields TEXT,fields TEXT);");

        } else {
            db.execSQL("DROP TABLE IF EXISTS " + "moduleRecord");
            db.execSQL("DROP TABLE IF EXISTS " + "ModuleName");
            db.execSQL("DROP TABLE IF EXISTS " + "EventStatus");
            db.execSQL("DROP TABLE IF EXISTS " + "moduleDesc");
            onCreate(db);
        }
    } 
```

我得到的错误是

```
 07-31 12:01:15.267: W/System.err(632): 
android.database.sqlite.SQLiteException: no such table: moduleDesc: ,
while compiling: insert into moduleDesc(deleteable,createable,updateable,name,label,labelfields,fields)
values(?,?,?,?,?,?,?)
    07-31 12:01:15.267: W/System.err(632):  
at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
    07-31 12:01:15.267: W/System.err(632): 

at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
    07-31 12:01:15.267: W/System.err(632): 

at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
    07-31 12:01:15.267: W/System.err(632): 

at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83) 
```

谁能告诉我如何升级数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:45:56.773

我相信您的问题可能是您拥有的 if 语句循环。如果用户拥有您的应用程序的版本 1 或版本 2，并且想要升级到最新版本，我相信是 4，该怎么办？

在这种情况下，它将简单地通过 if 循环并进入 final `else`，它试图删除 table `moduleDesc`，只有在用户计划从版本 1 或 2 升级到版本 3 时才会创建该表。

因此，总而言之，检查您的 if 语句并满足所有条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:44:25.743

您无需更改 mainfest 文件，您可以更改您的 sql 数据库类。检查以下代码，您必须更改 DATABASE_VERSION =7；

```
 public static final String TABLE_COMMENTS = "contacts";
public static final String COLUMN_ID = "_id";
public static final String COLUMN_COMMENT = "account";
public static final String COLUMN_USER_ID = "contactJids";
public static final String COLUMN_USER_NAME = "contactNames";

private static final String DATABASE_NAME = "contacts.db";
private static final int DATABASE_VERSION =7;

// Database creation sql statement
private static final String DATABASE_CREATE = "create table "
        + TABLE_COMMENTS + "( " + COLUMN_ID     + " integer primary key autoincrement, "
                                + COLUMN_COMMENT + " text not null, " 
                                + COLUMN_USER_ID + " text not null, "
                                + COLUMN_USER_NAME + " text not null );";

public MySQLiteHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}
@Override
public void onCreate(SQLiteDatabase database) {
    database.execSQL(DATABASE_CREATE);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Log.w(MySQLiteHelper.class.getName(),
            "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_COMMENTS);
    onCreate(db);
}

  } 
```

# c++ - QPushButton 视觉问题

> ID：11734431
> 
> 赞同：6
> 
> 时间：2012-07-31T06:35:48.627
> 
> 标签：c++, qt, qtstylesheets, qpushbutton

我有两个自定义样式的`QPushButton`按钮。这是`Ok`按钮的样式表：

```
QPushButton
{ 
    background-color:#9dce2c;
    border-radius:7px;
    border:1px solid #83c41a;
    color:#ffffff;
    font-size:15px;
    font-weight:bold;
    padding:4px 24px;
    text-decoration:none;
}
QPushButton:pressed
{
    border:2px solid black;
} 
```

现在它看起来像这样：

![确定按钮](../Images/0b50b250361681b31e15ed2e292d553f.png)

这很好。但是，如果单击按钮（获得焦点），它开始看起来像这样：

![确定按钮集中](../Images/7188f43daec6414a4a81140611bbddc3.png)

请注意文本周围的轻微阴影矩形。看起来好像正在“选择”文本。当按钮失去焦点时，它又开始看起来正常了。我想这是因为选定的控件像这样突出显示：

![在此处输入图像描述](../Images/68792f2924ed76298b98f663105773e9.png)

但是，我希望我的按钮保持不变，无论它是否聚焦。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T16:18:57.823

这将删除橙色矩形：

```
QPushButton:focus {
    outline: none;
} 
```

*PS：您应该尝试向焦点状态添加一些样式，例如更改背景颜色，以便该状态对用户保持“可见”。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T08:46:23.017

找到了解决方案。结果*很*简单。

该问题确实是由按钮接收焦点引起的。我需要做的就是将按钮的`focusPolicy`属性设置为`NoFocus`. 它可以在 QtDesigner 中完成：

![在此处输入图像描述](../Images/e340ec701a01a912c59439bb1eb318b6.png)

或在代码中：

`ui.okButton->setFocusPolicy(Qt::NoFocus);`

完成后，按钮的点击不会使其获得焦点，外观也不会改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T08:35:55.063

这里：[http ://doc.qt.io/qt-5/stylesheet-examples.html](http://doc.qt.io/qt-5/stylesheet-examples.html)

我找到了如下参数：

```
"selection-color: yellow;"
"selection-background-color: blue;" 
```

我还没有尝试过，但它可能是你需要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T07:47:00.837

我没有尝试，但我认为您可以通过设置`QPushButton:hover`与`QPushButton`. 有一些默认样式会使按钮在悬停时变为红色，您只需要找出它是哪一个（可能`hover`）并覆盖它。

# android - 在 Android 菜单中为按钮设置动画的最简单方法

> ID：11734433
> 
> 赞同：1
> 
> 时间：2012-07-31T06:36:03.007
> 
> 标签：android, android-layout

我必须为我的 Android 应用程序编写动画菜单按钮。它看起来像这样：

菜单的简单模型：

![在此处输入图像描述](../Images/fdbf6f326af354e747c153ff8016391b.png)

动画看起来像是某种立方体旋转 - 立方体的一个旋转，类似的东西..

我正在寻找为菜单按钮（例如“button1”）编程动画的最简单方法。通过点击它必须先做动画，然后显示子菜单的内容。“button1”必须由四个 *.png 文件进行动画处理：

```
button1.png
button1_step1.png
button1_step2.png
button1_step3.png 
```

我试图在 Android SDK 中找到一些示例，但没有找到。任何人都知道一个简单的方法来编码这个？提前致谢 ;-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:59:47.487

假设您在活动 xml 文件中注册了这些按钮，如下所示：

```
<Button
    ...
    android:onClick="onClickButton1"
    android:text="@string/button1_text" />

<Button
    ...
    android:onClick="onClickButton2"
    android:text="@string/button2_text" />

... 
```

然后，将以下方法添加到您的活动类。您可以描述单击每个按钮会发生什么。

```
public class MyActivity extends Activity {   
    ...

    public void onClickButton1 (View view) {
       // insert codes here to show animation of button1
    }

    public void onClickButton2 (View view) {
       // insert codes here to show animation of button2
    }
} 
```

对于动画示例，请查看此链接：[我需要简单的 Android 动画示例](https://stackoverflow.com/questions/5762743/i-need-simple-android-animation-examples)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:48:50.187

我会看看[http://nineoldandroids.com/](http://nineoldandroids.com/)

这是 Honeycomb 动画类的向后兼容版本，有一个示例应用程序可以为按钮设置动画。

# android - 在非活动类中使用 TextView 资源。MainActivity 以“异常发送输入事件”停止。

> ID：11734440
> 
> 赞同：2
> 
> 时间：2012-07-31T06:36:38.427
> 
> 标签：android, google-maps, android-layout, android-mapview, android-ui

我正在尝试从布局 XML 文件获取资源`setText()`。`TextView`

当用户点击谷歌地图中的标记时。这是我`onTap()`为标记编写的代码。

直到我不添加`TextView`，我的代码工作正常。当我单击标记并且一切正常时，它会显示对话框。

当我将这些行添加到时`onTap()`，我运行应用程序并单击标记，它停止说`Unfortunately map has stopped`。

我收到 LogCat 错误消息：

> 分派输入事件时出错

我创建了一个类 CustomOverlayItem 扩展 OverlayItem 类。Tv_description`TextView`是布局文件 cutom_dialog.xml 的一部分。

当用户单击标记时，如何在运行时动态`setText()`调用？`TextView`

```
@Override
protected boolean onTap(int index) {
    Dialog dialog = new Dialog(context, android.R.style.Theme_Dialog);
    TextView tv_description = new TextView(context);
    tv_description = (TextView) dialog.findViewById(R.id.tv2_description);
    tv_description.setText("checking");

    dialog.setContentView(R.layout.custom_dialog);
    dialog.show();

    return true;

} 
```

这是 logcat 输出：

```
07-31 11:59:16.271: E/Trace(2143): error opening trace file: No such file or directory (2)
07-31 11:59:17.741: E/ZoomButtonsController(2143): Cannot make the zoom controller visible if the owner view is not attached to a window.
07-31 11:59:18.151: E/MapActivity(2143): Couldn't get connection factory client
07-31 11:59:28.531: E/InputEventReceiver(2143): Exception dispatching input event.
07-31 11:59:28.541: E/MessageQueue-JNI(2143): Exception in MessageQueue callback: handleReceiveCallback
07-31 11:59:28.591: E/MessageQueue-JNI(2143): java.lang.NullPointerException
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at com.incubers.map.Markers.onTap(Markers.java:41)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at com.google.android.maps.ItemizedOverlay.onTap(ItemizedOverlay.java:453)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at com.google.android.maps.OverlayBundle.onTap(OverlayBundle.java:83)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at com.google.android.maps.MapView$1.onSingleTapUp(MapView.java:356)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at com.google.android.maps.GestureDetector.onTouchEvent(GestureDetector.java:533)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at com.google.android.maps.MapView.onTouchEvent(MapView.java:683)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at android.view.View.dispatchTouchEvent(View.java:7127)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2170)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1905)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1919)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1919)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1919)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1919)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1925)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1379)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at android.app.Activity.dispatchTouchEvent(Activity.java:2396)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1873)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at android.view.View.dispatchPointerEvent(View.java:7307)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3172)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3117)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4153)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4132)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4224)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:171)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at android.os.MessageQueue.nativePollOnce(Native Method)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at android.os.MessageQueue.next(MessageQueue.java:125)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at android.os.Looper.loop(Looper.java:124)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at android.app.ActivityThread.main(ActivityThread.java:4745)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at java.lang.reflect.Method.invokeNative(Native Method)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at java.lang.reflect.Method.invoke(Method.java:511)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-31 11:59:28.591: E/MessageQueue-JNI(2143):   at dalvik.system.NativeStart.main(Native Method)
07-31 11:59:28.681: E/AndroidRuntime(2143): FATAL EXCEPTION: main
07-31 11:59:28.681: E/AndroidRuntime(2143): java.lang.NullPointerException
07-31 11:59:28.681: E/AndroidRuntime(2143):     at com.incubers.map.Markers.onTap(Markers.java:41)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at com.google.android.maps.ItemizedOverlay.onTap(ItemizedOverlay.java:453)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at com.google.android.maps.OverlayBundle.onTap(OverlayBundle.java:83)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at com.google.android.maps.MapView$1.onSingleTapUp(MapView.java:356)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at com.google.android.maps.GestureDetector.onTouchEvent(GestureDetector.java:533)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at com.google.android.maps.MapView.onTouchEvent(MapView.java:683)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at android.view.View.dispatchTouchEvent(View.java:7127)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2170)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1905)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1919)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1919)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1919)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1919)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1925)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1379)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at android.app.Activity.dispatchTouchEvent(Activity.java:2396)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1873)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at android.view.View.dispatchPointerEvent(View.java:7307)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3172)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3117)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4153)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4132)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4224)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:171)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at android.os.MessageQueue.nativePollOnce(Native Method)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at android.os.MessageQueue.next(MessageQueue.java:125)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at android.os.Looper.loop(Looper.java:124)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at android.app.ActivityThread.main(ActivityThread.java:4745)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at java.lang.reflect.Method.invokeNative(Native Method)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at java.lang.reflect.Method.invoke(Method.java:511)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-31 11:59:28.681: E/AndroidRuntime(2143):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:02:08.247

我相信这条线是错误的。

```
tv_description = (TextView) dialog.findViewById(R.id.tv2_description); 
```

您正在尝试查找`TextView`对话框中不存在的内容。

您的对话框是默认的`Dialog`，不会有这个`TextView`。在你`setContentView()`的对话框上做一个布局，`TextView`在上面这行之前有这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:43:58.770

您可以尝试`TextView`通过以下方式更新您的`Handler`：

```
public Handler MainHandler = new Handler() 
{
    @Override
    public void handleMessage(Message msg) 
    {
        _mytextview.setText((String)msg.obj);
    }
}; 
```

发送来自您的消息`onTap()`：

```
Message _message = new Message();
_message.obj = "my text to update";
MainHandler.sendMessage(_message); 
```

希望它有帮助:-)

[编辑] 这是我尝试过的代码：

custom_dialog.xml ：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent" android:id="@+id/Overlay_Layout" android:orientation="vertical">
<TextView android:textAppearance="?android:attr/textAppearanceSmall" android:layout_width="wrap_content" android:layout_height="wrap_content"  android:layout_margin="5dp" android:text="@string/empty" android:id="@+id/tv2_description">    </TextView>
</LinearLayout> 
```

在我的`onTouchEvent()`：

```
Dialog dialog = new Dialog(_context, android.R.style.Theme_Dialog);
dialog.setContentView(R.layout.custom_dialog);
TextView tv_description = (TextView) dialog.findViewById(R.id.tv2_description);
tv_description.setText("checking");
dialog.show(); 
```

它对我有用..

# php - 如何获取php系统函数的全部输出

> ID：11734443
> 
> 赞同：0
> 
> 时间：2012-07-31T06:37:08.007
> 
> 标签：php, linux

我想在 linux 上使用 php 获取我网络的所有路由器列表。我已经尝试过 php exec 和 system 函数，但它只在输出中提供一个路由器。

如何获取路由器的完整列表？

```
$last_line = system('iwlist scan', $retval);
echo '
</pre>
<hr />Last line of the output: ' . $last_line . '
<hr />Return value: ' . $retval;

$last_line = system('iwlist scan | grep ESSID', $retval);

echo '

<hr />Last line of the output: ' . $last_line . '
<hr />Return value: ' . $retval; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:18:04.020

使用 passthru 检索所有输出。

您必须了解这里需要考虑不同的输出流：

*   `iwlist`可能会在[stdout](/questions/tagged/stdout "显示标记为“stdout”的问题")和[stderr](/questions/tagged/stderr "显示标记为“stderr”的问题")上生成文本（由于其他接口不支持无线）
*   `grep`只会通过管道从标准输出接收[输出](/questions/tagged/stdout "显示标记为“stdout”的问题")
*   `passthru`将从and接收[stdout](/questions/tagged/stdout "显示标记为“stdout”的问题")和[stderr](/questions/tagged/stderr "显示标记为“stderr”的问题")。`iwlist``grep`

您可以重定向输出，以便仅获得已被 grep 处理的成功输出。整个事情就变成了：

`echo passthru('iwlist scan 2>/dev/null | grep ESSID');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:13:22.480

您可以使用[`exec()`](http://php.net/manual/en/function.exec.php)而不是`system`. for的第二个参数`exec()`是一个（可选的）数组。您的命令返回的每一行输出都将在该数组中。

```
$output = array();
exec('iwlist scan', $output, $retval);
print_r($output); 
```

# javascript - 将 base64 图像数据作为 src 分配给图像时，Firefox 和 Chrome 上的结果不一致

> ID：11734446
> 
> 赞同：2
> 
> 时间：2012-07-31T06:37:22.347
> 
> 标签：javascript, image, base64

我正在尝试通过将 base64 图像数据作为 src 分配给图像对象来在画布上绘制复选框图像。它在 IE 上运行良好，但在 Firefox 和 Chrome 上给出不一致的结果这是我的代码

```
 img = document.createElement('img');
    img.src = 'data:image/gif;base64,R0lGODlhDgAPAPcAAAAAAIAAAACAAICAAAAAgIAAgACAgMDAwMDcwKbK8BxRgCGhIeLi3ePj3+Xl4efn4+rq5uzs6e/v7PHx7/Pz8fX18/f39vn5+Pr6+fz8+/39/f7+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/78KCgpICAgP8AAAD/AP//AAAA//8A/wD//////yH5BAAAAAAALAAAAAAOAA8AhwAAAIAAAACAAICAAAAAgIAAgACAgMDAwMDcwKbK8BxRgCGhIeLi3ePj3+Xl4efn4+rq5uzs6e/v7PHx7/Pz8fX18/f39vn5+Pr6+fz8+/39/f7+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/78KCgpICAgP8AAAD/AP//AAAA//8A/wD//////whzADkIHEiQoIKDCBMi5KCAgcMGDh5AiCBhAgUFDB9GnFiRQgWMDSFKpDhhQQULIEVyLLnAwgWQEReQXEDzAgaQEmmyXGAzA8iJNIP21AByZk0MGTRsANmxAk+kShkytHhy6AaBID26hHoVK0OFYDEWHDswIAA7';
    ctx.drawImage(
        img,
        sx, 
        sy, 
        sw, 
        sh, 
        dx, 
        dy, 
        dw, 
        dh      
        ); 
```

如果我在将 src 分配给图像之后发出警报，那么它甚至可以与 FF 和 chrome 一起使用。我猜这一切都是因为 javascript 异步行为，在将完整的 src 分配给图像之前，绘图过程发生，因此没有获得完整的图像。谁能告诉我如何处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:11:11.710

尝试在绘制图像之前等待图像 onLoad 事件。并确保在分配 src 属性之前添加处理程序。

```
 img = document.createElement('img');
 img.onload = function() {
    ctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh);
 };
 img.src = 'data:image/gif;base64,R0lGO...OFYDEWHDswIAA7'; 
```

也试试这个（在大多数浏览器中，它应该会产生完全相同的结果，但一些较旧的浏览器确实存在一种或另一种方法的问题）：

```
 var img = new Image();
 img.onload = function() { 
    ctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh);
 }
 img.src = "data:img/gifx;base64...."; 
```

如果这在 Firefox 和 Chrome 上仍然无法正常工作，您可以尝试将图像添加到 DOM 以查看是否有任何不同：

```
 img = document.createElement('img');
 document.body.appendChild(img);
 img.onload = function() {
    ctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh);
 };
 img.src = 'data:image/gif;base64,R0lGO...OFYDEWHDswIAA7'; 
```

# iphone - Unity3d：iOS 上的草缺失

> ID：11734447
> 
> 赞同：0
> 
> 时间：2012-07-31T06:37:24.307
> 
> 标签：iphone, unity3d

我在地形上有草。在统一编辑器中，在“编辑”-“图形仿真”中有 opengl 1.1 和 opengl 2.0 选项。当我将它设置为 2.0 时，草显示很好。但是当我设置为opengl es 1.1时，草消失了。那没问题。但现在，我正在尝试为我的 iPad 构建它：在播放器设置中，我正在设置 armv7 平台，仅限 iPad。我在 iPad 上看不到草。我做错什么了吗？我所需要的只是在 iPad 上显示草：no metter opengl 版本。来自 xCode 日志：“版本：OpenGL ES 2.0 IMGSGX543-63.24”，因此，openGL 版本为 2.0。我想，这都是关于一些统一设置的东西，但是在哪里呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T02:48:53.507

我重新制作了这个场景，草又回到了它的位置。

# jquery - 将产品添加到购物车的按钮

> ID：11734448
> 
> 赞同：0
> 
> 时间：2012-07-31T06:37:26.417
> 
> 标签：jquery, knockout.js

我的购物车在这里[http://jsfiddle.net/bkw5p/48/](http://jsfiddle.net/bkw5p/48/)

我想在产品上向用户显示一个按钮，以将该产品添加到购物车中。例如：当单击产品上的按钮时，它应该添加到购物车而不是拖动到购物车我需要一个按钮来将该产品添加到购物车

我已经尝试过了，但我无法得到它。请尽快帮助解决此问题

谢谢并恭祝安康

s.varun

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:22:14.120

@ClarkeyBoy - 我不认为 Varun 在这个阶段要求让商店真正“运作”。如果我理解与 darksky 相同，那么它只是添加一个按钮来执行与 drop 功能相同的操作。

我已经破解了小提琴在这里工作：http: [//jsfiddle.net/joevallender/VTtUr/4/](http://jsfiddle.net/joevallender/VTtUr/4/)使用 img 作为可拖动手柄以允许

**编辑**更多最新的 JS Fiddle（根据下面的评论）[http://jsfiddle.net/joevallender/VTtUr/6](http://jsfiddle.net/joevallender/VTtUr/6)

我建议使用普通的 jQuery UI 而不是 easyui。前者有一个“取消”选项，它允许除选择器之外的所有内容来处理[http://forum.jquery.com/topic/how-do-i-prevent-dragging-when-a-button-is-clicked-within -可拖动容器](http://forum.jquery.com/topic/how-do-i-prevent-dragging-when-a-button-is-clicked-within-the-draggable-container)

一点重构和“添加到购物车”功能可用于我的不同事件

```
function addToCart(source) {
    var name = source.find('p:eq(0)').html();
    var price = source.find('p:eq(1)').html();
    var cartItem = new item(name, parseFloat(price.split('$')[1]));
    var match = ko.utils.arrayFirst(viewModel.cartItems(), function(item) {
        return item.name == name;
    });
    if (match) {
        match.qty(match.qty() + 1);
    } else {
        viewModel.cartItems.push(cartItem);
        var rowCount = document.getElementById("cartcontent1").getElementsByTagName("TR").length;
        document.getElementById("Total").innerHTML = rowCount;
    }
} 
```

所以它可以通过drop使用

```
$('.cart').droppable({
    onDrop: function(e, source) {
        addToCart($(source));
    }
}); 
```

并点击

```
$('.item .add-to-cart').click(function() {
    addToCart($(this).parent());
}); 
```

我不会开始挑选其余代码的细节，因为我可以看到您仍在测试和搞乱，只是想要一个具体的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T10:28:36.353

尝试这个

解决方案如下

使用打击代码并尝试一下

```
<a data-role="link" href="javascript:linkHandler('<%= obj.productname %>', '<%= obj.price %>')" class="get" >Add <a>

function linkHandler(name, price)
{
    alert(name);
    alert(price);
    var name = name;
    var price = price;
    var cartItem = new item(name, parseFloat(price));
            // check duplicate
            var match = ko.utils.arrayFirst(viewModel.cartItems(), function(item){ return item.name == name; });
            if(match){
                match.qty(match.qty() + 1);
            } else {
              viewModel.cartItems.push(cartItem);
var rowCount = document.getElementById("cartcontent1").getElementsByTagName("TR").length;
document.getElementById("Totala").innerHTML = rowCount;
            }
} 
```

# sql - SQL查询三张表

> ID：11734452
> 
> 赞同：-2
> 
> 时间：2012-07-31T06:38:05.843
> 
> 标签：sql

**表格1**

```
ID    |     DATE             Ordered
 a    |   10-06-2012    |      1
 b    |   07-07-2012    |      1
 c    |   10-06-2012    |      0 
```

**表2**

```
ID    |    OrdersID
 a    |     001
 b    |     002
 c    |     003 
```

**表3**

```
OrdersID   |  Items  |  
 001       |   5    |  
 002       |   3    |  
 003       |   7    | 
```

我有三个表，我想在 TABLE1 中搜索 DATE，例如 10-06-2012 和 Ordered，例如 1 并返回 ID 'a'。

在 Table2 中，我希望它使用 Table1 的结果来获取 OrdersID

在 Table3 中，我希望它使用 Tables2 的结果来返回 Items ID 在两个表中都很常见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:28:47.967

您使用的是哪种 RDBMS，MS SQL Server、MySQL、Oracle？对如何[处理 tSQL](http://msdn.microsoft.com/en-us/library/bb510741.aspx)、[创建查询](http://msdn.microsoft.com/en-us/library/ms187731%28v=sql.105%29.aspx)、[使用 Joins](http://msdn.microsoft.com/en-us/library/ms191517%28v=sql.105%29.aspx)等进行一些研究不会对您造成伤害。

如果您使用的是 MS SQL Server，这里是使用您提供的数据可以做什么的示例。请注意，嵌套查询可能非常慢，请检查您的索引、主键等。

```
--get from Table1 Id's filtering by date and Ordered fields
SELECT t1.Id
  FROM Table1 t1 JOIN Table2 t2
 WHERE t1.[Date] = '10062012 00:00:00'
   AND t1.Ordered = 1

--get from Table2 OrderedID filtered by previous query
SELECT t2.OredersID
  FROM Table2 t2
 WHERE t2.ID IN (SELECT t1.Id
                   FROM Table1 t1 JOIN Table2 t2
                  WHERE t1.[Date] = '10062012 00:00:00'
                    AND t1.Ordered = 1
                 )

--get from Table3 Items filtered by previous query
SELECT t3.Items
  FROM Table3 t3
 WHERE t3.OrdersID IN (SELECT t2.OrdersID
                         FROM Table2 t2
                        WHERE t2.ID IN (SELECT t1.Id
                                          FROM Table1 t1 JOIN Table2 t2
                                         WHERE t1.[Date] = '10062012 00:00:00'
                                           AND t1.Ordered = 1
                                        )
                      )

--Using JOINS, not sure if this is 100% correct
--get from Table3
SELECT t3.Items
  FROM Table3 t3
      JOIN Table2 t2 ON t3.OrdersID = t2.OrdersID
      JOIN Table1 t1 ON t2.ID = t1.ID
 WHERE t1.[Date] = '10062012 00:00:00'
   AND t1.Ordered = 1 
```

# java - 有没有办法为 ant 项目做一个启动板 ppa？

> ID：11734467
> 
> 赞同：2
> 
> 时间：2012-07-31T06:39:14.187
> 
> 标签：java, ubuntu, ant, launchpad

我有一个普通的 netbeans 项目并使用 jdeb 创建一个 deb 包。我希望将其上传到我创建的启动板 ppa，但意识到启动板需要自己构建包，可能同时具有源和签名，以便对恶意代码有更多的安全性和威慑力。

好的，好的 jdeb 出来了。但是考虑到它是一个普通的 netbeans ant 项目，而不是一个 buildtools 项目，我如何从他们的沙箱构建我的项目？还考虑到我依赖于一些（但不是全部，但已经在我的 ant 文件中解决）二进制 jar 库？如果不编译所有不在存储库中使用的库，是否不可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:44:38.020

不，您必须确保您要运送的所有库都有 .deb，这些库都是从源代码构建的。

您必须提供一个使用 ant 构建项目的源代码包。要获得一些灵感，请查看已经执行此操作的现有包，例如 jalview: `apt-get source jalview`。

# android - 如何使用 Resources.getFraction()？

> ID：11734470
> 
> 赞同：36
> 
> 时间：2012-07-31T06:39:19.313
> 
> 标签：android, android-resources

如何存储像`3.1416`资源中的小数值？在 XML 中写什么以及如何在 Java 代码中检索它？

状态的文档[`getFraction()`](http://developer.android.com/reference/android/content/res/Resources.html#getFraction%28int,%20int,%20int%29)：

> `public float getFraction (int id, int base, int pbase)`
> 
> 检索特定资源 ID 的小数单位。
> 
> **参数**
> `base` 此分数的基值。换句话说，标准分数乘以该值。
> `pbase` 此分数的父基值。换言之，父分数 (nn%p) 乘以该值。
> 
> **返回**
> 属性小数值乘以相应的基值

[这个答案](https://stackoverflow.com/a/6021880/165674)显示了一个简单的百分比示例，而没有详细说明参数的含义。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-06-10T15:50:20.950

您在 XML 中指定分数，如下所示：

```
 <item name="fraction" type="fraction">5%</item>
   <item name="parent_fraction" type="fraction">2%p</item> 
```

实际使用时，5% 为 0.05。

然后：

```
// 0.05f
getResources().getFraction(R.fraction.fraction, 1, 1);
// 0.02f
getResources().getFraction(R.fraction.parent_fraction, 1, 1);
// 0.10f
getResources().getFraction(R.fraction.fraction, 2, 1);
// 0.10f
getResources().getFraction(R.fraction.fraction, 2, 2);
// 0.04f
getResources().getFraction(R.fraction.parent_fraction, 1, 2);
// 0.04f
getResources().getFraction(R.fraction.parent_fraction, 2, 2); 
```

如您所见，根据分数的类型，该`getFraction`方法会相应地乘以这些值。如果您指定父分数 ( `%p`)，它将使用第二个参数 ( `pbase`)，而忽略第一个。另一方面，指定一个普通分数，只使用`base`参数，将分数乘以这个。

# php - 使用javascript函数初始化php变量

> ID：11734471
> 
> 赞同：-7
> 
> 时间：2012-07-31T06:39:20.657
> 
> 标签：php, javascript

嗨，我想在 javascript 函数中初始化 php 变量，然后用 php 初始化变量调用 php 函数。请帮我解决这个问题...

```
 <?php
    function printDiv($abc) {
        echo '<div align="center" width="100%"> ' . $abc . ' </div>';
    }
    ?>
    <script type="text/javascript">
        function callPhpFunction(jsabc) {
            <?php $abc ?> = jsabc;
            document.write("<?php printDiv($abc) ?>");
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:42:44.743

不幸的是，它不能按照您描述的方式完成。Javascript 是客户端脚本，PHP 是服务器端脚本语言。您将需要查看 ajax 调用来填充 javascript 变量。

操作顺序（基本）：

1.  服务器获取页面请求
2.  服务器解析 PHP 或其他语言，将页面发送到浏览器
3.  客户端从服务器接收页面
4.  加载所需的任何其他文件/脚本 - 在第 1 步重新启动任何新请求
5.  执行 Javascript（通常在加载时加载，除非在加载文档后使用 jQuery $().ready。

# iphone - 使用表格中的进度条将多个图像上传到服务器

> ID：11734473
> 
> 赞同：0
> 
> 时间：2012-07-31T06:39:25.583
> 
> 标签：iphone, ios, ipad, image-uploading

我想将多个图像上传到服务器。并且还想显示进度，因为我需要在表格中显示所有带有进度条的图像。

请建议我什么是最好的方法，如果任何可用的示例代码会有很大帮助

# android - Android 滚动错误 > 仅在触摸时可见

> ID：11734483
> 
> 赞同：5
> 
> 时间：2012-07-31T06:40:30.920
> 
> 标签：android, web-applications, cordova

我正在使用 PhoneGap 1.9 创建一个 Web 应用程序，而在 android 上我遇到了一个问题，目前在 Android 3.2 上运行。

我有一个带有 li 元素的简单 ul 列表，由于某种原因，滚动时内容不会立即可见，但您必须触摸屏幕才能看到比赛。

我附上了两张图片，应该更能说明问题。需要注意的是，当到达滚动底部时，我会加载其他内容。

一键向下滚动；

> [图片1](http://puu.sh/Ng05.jpg)：

触摸屏幕底部 - 内容现在才出现；

> [图2](http://puu.sh/Ng0F.jpg)

除此之外，有时滚动也会变得非常错误，例如在触摸内容时它会向上/向下跳跃。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:36:52.933

我之前也遇到过同样的问题，但我使用的是 Mobile jQuery 1.1。无论如何，它通过使用 iScroll 解决了。看看[http://cubiq.org/iscroll](http://cubiq.org/iscroll)

这可能会帮助你。

# accordion - 您能否展示我们如何从另一个页面打开手风琴中的特定选项卡？

> ID：11734484
> 
> 赞同：0
> 
> 时间：2012-07-31T06:40:30.503
> 
> 标签：accordion

我一直在关注 Youtube 贡献者“learnnerd”的教程。[Url here](http://www.youtube.com/watch?v=WjHt_v6nK_E&list=UU08OUGXLKqlnADsUDqA8evg&index=2&feature=plcp) 我使用他提供的代码创建了我的网站。[这是我的网站](http://www.alliedantennas.com.au)。（检查服务）

我想在我的主页上链接一个选项卡以在我的服务页面中打开一个特定的手风琴。我研究过，但仍然知之甚少。我对Javascript不太了解。我的 php/html 代码如下所示：

```
<h2 class="accordion"><a href="#1"> Antenna</a></h2>
<h2 class="accordion"><a href="#2"> Digital</a></h2> 
```

我的脚本（来自“learnnerd (Youtube)”和 Atomix(here)）如下所示：

```
$(function(){   
   $('.accContainer').hide(); //hide all content        
   $('.accordion').click(function(){
    if( $(this).next().is(':hidden') ) {
    $('.accordion').next().slideUp();
    //triggers the hiding of contents
    $(this).next().slideDown();
    //triggers slide down of contents
    }
     return false; //prevents brower default
   });

   $(".accordion").accordion({ 
     header: "h2", navigation: true 
   }); 
}); //document.ready function 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:51:13.260

您需要在此站点上进行更多搜索。我相信这个已经回答的问题应该对您有所帮助：

[打开 jQuery Accordion 的链接](https://stackoverflow.com/questions/588030/link-to-open-jquery-accordion?rq=1)

# apache-flex - Flex 1 小时后与服务器断开连接

> ID：11734490
> 
> 赞同：0
> 
> 时间：2012-07-31T06:40:57.020
> 
> 标签：apache-flex, iis

我使用 Flex 和 VB.NET 开发了一个应用程序。Flex 请求服务器一些由 VB.NET 构建的操作。但是，如果它需要超过 1 小时，那么它会在 1 小时后与服务器断开连接。我希望它一直保存到完成，即使它需要几个小时。我使用 IIS 7.5。我不知道它在哪里强制断开连接，它是来自 IIS 还是来自 Flex。谁知道我可以从哪里配置这个时间？如果你给我任何线索，我将不胜感激。

# iphone - 如何在 iPhone sdk 中合并两个图像

> ID：11734491
> 
> 赞同：0
> 
> 时间：2012-07-31T06:40:57.710
> 
> 标签：iphone, ios4, uiimage, cgimage, cgimageref

我的应用需要合并 2 张图片。请指导我如何拼接图像。公共部分应该被覆盖。在使用 openCV 框架时，在我的帮助下合并两个图像，`cvWarpPerspective(mImage1, warpImage, &HH)`我只得到了图像的匹配部分。

# php - 如何正确存储 PBKDF2 密码哈希

> ID：11734495
> 
> 赞同：6
> 
> 时间：2012-07-31T06:41:09.410
> 
> 标签：php, encryption, hash, passwords, pbkdf2

我一直在研究散列/加密密码并将其存储在数据库中的正确方法。我知道 Salt 和 Hashing，所以我环顾四周，PBKDF2 似乎是一个不错的选择。所以我找到了[这个网站](http://crackstation.net/hashing-security.htm)，它提供了一个很好的教程以及 PBKDF2 的 PHP 改编版（这是我在我的网站上使用的）。

因此，我设置了我的网站以使用这些功能来生成/创建密码，但正如您在以下代码中看到的那样：

> ```
> function create_hash($password) {
> // format: algorithm:iterations:salt:hash
> $salt = base64_encode(mcrypt_create_iv(PBKDF2_SALT_BYTES, MCRYPT_DEV_URANDOM));
> return PBKDF2_HASH_ALGORITHM . ":" . PBKDF2_ITERATIONS . ":" .  $salt . ":" .
>     base64_encode(pbkdf2(
>         PBKDF2_HASH_ALGORITHM,
>         $password,
>         $salt,
>         PBKDF2_ITERATIONS,
>         PBKDF2_HASH_BYTES,
>         true
>     )); } 
> ```

salt 在 create_hash 函数中生成，并存储在生成的哈希中，最终看起来像 sha256:1000:salt:hashed_pa​​ssword。这是我必须存储在数据库中的内容，并且由于盐包含在生成的哈希中，因此我不需要将其添加到我的数据库中。然而，在用这个生成了一些测试用户之后，我想知道在我的数据库中的哈希密码中包含 PBKDF2 设置是否真的是一件好事。他们让我的新手看到它是一个黑客，在破解我的数据库后，会看到这些 sha256:1000:salt:password 东西，并弄清楚每个部分代表什么，这对他的尝试有很大帮助，不?

因此，我对其进行了一些修改，使其具有一个我生成并存储在我的数据库中的外部盐，并在通过 PBKDF2 运行它之前将盐包含在密码中。然后我做同样的事情来比较给定的密码和我在我的数据库中的登录密码，它可以工作。我唯一担心的是，使用 128 位盐，生成的密码哈希只有 50 个字符长，这对我来说似乎不正确。

这是我当前的代码：

```
define("PBKDF2_HASH_ALGORITHM", "sha256");
define("PBKDF2_ITERATIONS", 10000);
define("PBKDF2_SALT_BYTES", 128);
define("PBKDF2_HASH_BYTES", 24);

define("HASH_SECTIONS", 4);
define("HASH_ALGORITHM_INDEX", 0);
define("HASH_ITERATION_INDEX", 1);
define("HASH_SALT_INDEX", 2);
define("HASH_PBKDF2_INDEX", 3);

function create_hash($password, $salt)
{
    // format: salthash
    return  
        base64_encode(pbkdf2(
            PBKDF2_HASH_ALGORITHM,
            $password,
            $salt,
            PBKDF2_ITERATIONS,
            PBKDF2_HASH_BYTES,
            true
        ));
}

function validate_password($password, $salt, $good_hash)
{
    $pbkdf2 = base64_decode($good_hash);
    return slow_equals(
        $pbkdf2,
        pbkdf2(
            PBKDF2_HASH_ALGORITHM,
            $password,
            $salt,
            PBKDF2_ITERATIONS,
            PBKDF2_HASH_BYTES,
            true
        )
    );
}

// Compares two strings $a and $b in length-constant time.
function slow_equals($a, $b)
{
    $diff = strlen($a) ^ strlen($b);
    for($i = 0; $i < strlen($a) && $i < strlen($b); $i++)
    {
        $diff |= ord($a[$i]) ^ ord($b[$i]);
    }
    return $diff === 0; 
}

function pbkdf2($algorithm, $password, $salt, $count, $key_length, $raw_output = false)
{
    $algorithm = strtolower($algorithm);
    if(!in_array($algorithm, hash_algos(), true))
        die('PBKDF2 ERROR: Invalid hash algorithm.');
    if($count <= 0 || $key_length <= 0)
        die('PBKDF2 ERROR: Invalid parameters.');

    $hash_length = strlen(hash($algorithm, "", true));
    $block_count = ceil($key_length / $hash_length);

    $output = "";
    for($i = 1; $i <= $block_count; $i++) {
        // $i encoded as 4 bytes, big endian.
        $last = $salt . pack("N", $i);
        // first iteration
        $last = $xorsum = hash_hmac($algorithm, $last, $password, true);
        // perform the other $count - 1 iterations
        for ($j = 1; $j < $count; $j++) {
            $xorsum ^= ($last = hash_hmac($algorithm, $last, $password, true));
        }
        $output .= $xorsum;
    }

    if($raw_output)
        return substr($output, 0, $key_length);
    else
        return bin2hex(substr($output, 0, $key_length));
} 
```

我对这种密码保存格式的关注有意义吗？或者它是否只是同样的事情，因为通过将我的盐放在我的数据库中，一旦它被破解，黑客仍然可以暴力破解？

谢谢，很抱歉这个长问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T05:00:41.777

> 我唯一担心的是，使用 128 位盐，生成的密码哈希只有 50 个字符长，这对我来说似乎不正确。

结果哈希的大小与盐的大小、密码和迭代次数完全无关。无论输入如何，现代安全哈希算法（如 sha256）的输出*总是相同的长度。*零长度输入具有与 25TB 输入相同的长度输出。

> 或者它是否只是同样的事情，因为通过将我的盐放在我的数据库中，一旦它被破解，黑客仍然可以暴力破解？

通过将盐分成两部分，您会增加代码复杂性（通常是一件坏事）。根据您存储盐块的方式，在某些情况下您可能会获得一些好处。例如，如果静态盐片段存储在数据库之外，那么数据库的转储不会为攻击者提供足够的信息来对数据库中的密码哈希执行离线攻击。

如果将盐碎片彼此分开存储，则可以获得少量的深度防御。它是否超过复杂性成本是一个判断要求，但我想说，花时间寻找 XSS 和 SQL 注入漏洞（攻击者经常*获取*上述数据库转储的方式）和保护使用 SSL 和证书或强密码在系统的各个组件之间建立连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-06T19:14:44.393

用@Romain 的评论回答我自己的问题。

> 请参阅这些答案，以便很好地了解隐藏盐是多么无用，[在这里](https://stackoverflow.com/questions/213380/the-necessity-of-hiding-the-salt-for-a-hash/215165#215165)使用 bcrypt（因为在您的链接中没有给出实现），以及如何在[此处](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords?answertab=votes#tab-top)[使用](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)哈希保护密码的最佳实践。最后，永远不要低估你的对手！

此外，（因为这有点旧），bcrypt 确实比 pbkdf2“更好”，但 scrypt 甚至更好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T05:11:52.660

有几件事，一个，而不是 SHA256，您应该使用慢速散列函数，例如 bcrypt，第二，您可能根本不应该存储密码（而是使用 openId 或类似的东西）。

综上所述，您需要为每个用户使用不同的盐，您可以将它们存储在同一行，甚至（正如您所做的那样）相同的字段，或完全不同的数据库中。您愿意付出多少努力取决于您和您的性能要求。

除了每个用户/密码的单独盐之外，您还可以考虑每个应用程序盐，它被排除在任何数据库之外。

# objective-c - 使用@synthesized getter 有什么意义？

> ID：11734497
> 
> 赞同：2
> 
> 时间：2012-07-31T06:41:13.667
> 
> 标签：objective-c

关于为什么要通过 @synthesized 设置器（而不是直接访问 ivar）、保留/复制内存管理或 KVO 有很多内容。

但是我想不出一个很好的论据来解释为什么你会关心你是否使用`foo = self.bar`, 或`foo = bar`.

我唯一能想到的就是数据抽象......如果 bar 是一个声明的属性，那么底层实现可能会改变，其他人不会关心。（当然，在这种情况下，您可能不会使用@synthesized getter）

那么......使用@synthesized getter 有什么令人信服的理由吗？是否有一些线程问题使其变得重要？

就此而言，@synthesized 代码除了返回 ivar 之外还能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:55:01.980

一个很好的理由是封装。当您通过访问器时，该类可以自由地在接口后面执行它想要的任何技巧（正如您在问题中已经说过的那样）。该值可能是延迟获取的，它可能是动态计算的，也可能是从其他对象中获取的。也就是说，在类实现中，我通常使用普通的 ivar 访问，因为如果属性实现发生更改，我可以自由地重写它。（当在公共标头中声明私有 ivars 时，这曾经是一个更大的问题，以便您的子类可以直接访问它们。）

至于线程，我认为默认的 getter/setter 组合是原子的，这意味着您不会得到一个错误，即 getter 将在 setter 中间被调用，从而获得一些无效值。我从来没有读过这个问题，查看`nonatomic`属性修饰符的文档。（或者[这个相关的问题](https://stackoverflow.com/questions/588866/atomic-vs-nonatomic-properties)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:46:55.210

getter 还需要符合`@property`语句中定义的内存管理规则；例如，如果它具有`retain`需要使用的属性`autorelease`：

```
- (NSString *)name
{
    return [[_name retain ] autorelease];
} 
```

并且将其合成可以使您不必输入它。另外，能够同时合成 getter 和 setter 是一个更完整的解决方案。

# c# - 仅检索单击的会话

> ID：11734498
> 
> 赞同：-3
> 
> 时间：2012-07-31T06:41:15.743
> 
> 标签：c#, asp.net, session

我有按钮，每个按钮都有会话。用户需要点击其中一个按钮，然后在下一页用户可以查看他们点击的数据。这是我背后的代码：

```
public partial class Welcome_Proton : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{

}

protected void Button3_Click(object sender, EventArgs e)
{
    Session["carA"] = Label1.Text;
    Response.Redirect("~/Welcome/BookingForm.aspx");
}
protected void Button4_Click(object sender, EventArgs e)
{
    Session["carB"] = Label1.Text;
    Response.Redirect("~/Welcome/BookingForm.aspx");
}
protected void Button5_Click(object sender, EventArgs e)
{
    Session["carC"] = Label1.Text;
    Response.Redirect("~/Welcome/BookingForm.aspx");
}
protected void Button6_Click(object sender, EventArgs e)
{
    Session["carD"] = Label1.Text;
    Response.Redirect("~/Welcome/BookingForm.aspx");
}
protected void Button7_Click(object sender, EventArgs e)
{
    Session["carE"] = Label1.Text;
    Response.Redirect("~/Welcome/BookingForm.aspx");
}
protected void Button8_Click(object sender, EventArgs e)
{
    Session["carF"] = Label1.Text;
    Response.Redirect("~/Welcome/BookingForm.aspx");
}
protected void Button9_Click(object sender, EventArgs e)
{
    Session["carG"] = Label1.Text;
    Response.Redirect("~/Welcome/BookingForm.aspx");
}
protected void Button10_Click(object sender, EventArgs e)
{
    Session["carH"] = Label1.Text;
    Response.Redirect("~/Welcome/BookingForm.aspx");
}
} 
```

为了取回会话，我在后面的“BookingForm.aspx”代码中使用了这个代码：`string car = Session["car"].ToString();` 现在的问题是，我应该编写什么代码才能取回用户点击的会话？如何仅检索用户的会话点击？如果你不清楚我的问题，你可以问我。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:49:58.000

如果我正确理解了您的问题，那么一个*快速而肮脏*的解决方案是将密钥也保存为`Session`这样的：

```
protected void Button9_Click(object sender, EventArgs e)
{
    Session["carG"] = Label1.Text;
    Session["buttonKey"] = "carG";
} 
```

`BookingForm.aspx`加载后，您可以使用以下代码从会话中获取值：

```
private string GetSessionValue()
{
    var key = Sesssion["buttonKey"] as string;
    return Session[key] as string;
} 
```

# javascript - 使用 jQuery 向表单字段发送值

> ID：11734501
> 
> 赞同：2
> 
> 时间：2012-07-31T06:41:36.770
> 
> 标签：javascript, jquery, html, forms

我想用 jQuery 向表单字段发送一个值。这是基本代码，它将正常工作：

```
<input id="logo" name="logo" type="text" /> 
```

jQuery：

```
jQuery('#logo').val(imgurl); 
```

但是，我需要将字段 ID 更改为`option[logo]`. 所以我正在尝试这个：

```
<input id="option[logo]" name="option[logo]" type="text" /> 
```

jQuery：

```
jQuery('#option[logo]').val(imgurl); 
```

这不起作用。如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T06:46:16.800

您不能只在 JQuery 选择器中的属性/元素名称中使用`[`或`]`字面作为字符，因为它们具有特殊含义。你必须逃离他们。在此处阅读文档：http: [//api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

这应该有效：

```
jQuery('#option\\[logo\\]').val(imgurl); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T06:44:39.563

向该输入添加一个类并尝试以下操作

```
<input id="logo" class="option" name="option[logo]" type="text" />

jQuery('input.option').attr({
                             "id": "option\[logo\]",
                             "name": "option\[logo\]"
                            }); 
```

[`Working DEMO`](http://jsfiddle.net/Ht94P/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T06:48:15.757

您需要像这样转义 jQuery 中的括号：

```
$('#option\\[logo\\]').val(imgurl); 
```

# iphone - 如何以编程方式查找我的 iPhone 应用程序的大小？

> ID：11734503
> 
> 赞同：1
> 
> 时间：2012-07-31T06:41:49.593
> 
> 标签：iphone, ios, ipad

我正在努力寻找 iphone 应用程序的大小以及框架，但我没有找到如何做到这一点的方法。任何人都可以为我提供代码吗？我得到了在运行时查找我的应用程序当前内存使用情况的代码。

[链接在这里](http://forrst.com/posts/Get_current_Memory_usage-hzw)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:25:20.633

```
NSString *folderPath = [[NSBundle mainBundle] bundlePath];
NSArray *filesArray = [[NSFileManager defaultManager] subpathsOfDirectoryAtPath:folderPath error:nil];
NSEnumerator *filesEnumerator = [filesArray objectEnumerator];
NSString *fileName;
unsigned long long int fileSize = 0;

while (fileName = [filesEnumerator nextObject]) {
    NSDictionary *fileDictionary = [[NSFileManager defaultManager] fileAttributesAtPath:[folderPath stringByAppendingPathComponent:fileName] traverseLink:YES];
    fileSize += [fileDictionary fileSize];
}

NSLog(@"App size : %lld",fileSize); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-18T12:46:52.953

快速回答 - **SWIFT 3.x**

```
let bundlePath = Bundle.main.bundlePath
let bundleArray  = FileManager.default.subpaths(atPath: bundlePath)
var fileSize : UInt64 = 0
for file in bundleArray! {
    do {
        let attr = try FileManager.default.attributesOfItem(atPath: bundlePath + "/" + file )
        let xfileSize = attr[FileAttributeKey.size] as? UInt64 ?? 0
        fileSize =  fileSize + xfileSize
    } catch {
    }
}
let folderSize = ByteCountFormatter.string(fromByteCount: Int64(fileSize), countStyle: .memory)
print("App size (bundle size): \(folderSize)")//xx MB 
```

这将为您提供捆绑包中的应用程序大小 -

> /Users/MyLaptop/Library/Developer/CoreSimulator/Devices/DB7032C9-7CE2-42A9-83D1-59E2D2C5C361/data/Containers/Bundle/Application/CC808040-2F18-4B35-A912-591BD0C7DCD9/MyApp.app

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-01T05:33:18.983

如果有人仍在寻找答案，请注意 fileAttributesAtPath 方法已被贬低，因此请使用 attributesOfItemAtPath 方法

例子：

```
//get full pathname of bundle directory
NSString *bundlePath = [[NSBundle mainBundle] bundlePath];

//get paths of all of the contained subdirectories
NSArray *bundleArray = [[NSFileManager defaultManager] subpathsOfDirectoryAtPath:bundlePath error:nil];

//to access each object in array
NSEnumerator *filesEnumerator = [bundleArray objectEnumerator];

NSString *fileName;

unsigned long long int fileSize = 0;
NSError *error = nil;

//return next object from enumerator
while (fileName = [filesEnumerator nextObject])
{
    NSDictionary *fileDictionary = [[NSFileManager defaultManager] attributesOfItemAtPath:[bundlePath stringByAppendingPathComponent:fileName] error:&error];

    fileSize += [fileDictionary fileSize];
}
//converts a byte count value into a textual representation that is formatted with the appropriate byte modifier (KB, MB, GB and so on)
NSString *folderSizeStr = [NSByteCountFormatter stringFromByteCount:fileSize countStyle:NSByteCountFormatterCountStyleMemory];
NSLog(@"App size (bundle size): %@ \n\n\n",folderSizeStr); 
```

# python - 多态性功能在 python 的 sort() 函数的情况下失败，我们如何在 python 中对虚数进行排序？

> ID：11734504
> 
> 赞同：1
> 
> 时间：2012-07-31T06:42:00.577
> 
> 标签：python, sorting, complex-numbers

理想情况下 sort() 函数是**多态性**的极好例子。在 sort() 函数的情况下，您几乎可以用它对任何东西进行排序。

```
In [27]: b
Out[27]: [3, 4, 5, 6]

In [28]: b = ['a','b',5,6,None]

In [29]: b.sort()

In [30]: b
Out[30]: [None, 5, 6, 'a', 'b']

In [31]: b = ['a','b',23,'c',None,5j]

In [32]: b.sort()
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
/home/dubizzle/webapps/django/dubizzle/<ipython-input-32-fc40da74ac51> in <module>()
----> 1 b.sort()

TypeError: no ordering relation is defined for complex numbers 
```

但似乎在虚数的情况下 sort() 函数失败。请注意，我收到此错误**TypeError: no ordering relationship is defined for complex numbers**。

所以我的问题是

1.  这个顺序到底是在哪里定义的？sort() 函数如何在内部工作？
2.  是否有任何目的为复数保留这种排序关系，或者它只是像我们在 c 语言中没有幂运算符一样被遗漏了**（一个错误）**。
3.  我们如何对python中**的虚数（复数）进行排序？**我们有pythonic的方式来做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:52:45.260

用数学术语来说，复数的集合不可能是完全有序的集合；为它们定义订单需要您提供一个可以订购它们的密钥。这取决于你想要什么：你想按它们的真实值排序吗？

```
b.sort(key=lambda complex_: complex_.real) 
```

通过他们的想象值？

```
b.sort(key=lambda complex_: complex_.imag) 
```

按它们的大小？

```
b.sort(key=lambda complex_: sqrt(complex_.real**2 + complex_.imag**2)) 
```

无论您想对它们进行排序，您都可以使用 key 关键字指定一个函数来比较元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:48:26.207

您可以通过这种方式按实部或虚部排序：

```
>>> x = [(1+2j),(2+3j),(2+1j),(7+4j),(2+2j)]
>>> sorted(x, key=lambda x: x.real)
[(1+2j), (2+1j), (2+2j), (2+3j), (7+4j)]
>>> sorted(x, key=lambda x: x.imag)
[(2+1j), (1+2j), (2+2j), (2+3j), (7+4j)] 
```

或者：

```
>>> sorted(x, key=lambda x: (x.real, x.imag))
[(1+2j), (2+1j), (2+2j), (2+3j), (7+4j)] 
```

复数没有自然排序，因此您必须指定要以何种方式对它们进行排序。

# visual-c++ - 类'boost ::shared_ptr ' 需要有 dll 接口供类 'boost::signals::connection' 的客户端使用

> ID：11734510
> 
> 赞同：2
> 
> 时间：2012-07-31T06:42:35.960
> 
> 标签：visual-c++, warnings, boost-signals

我在编译代码时收到以下错误。

```
c:\boost_1_48_0\boost\signals\connection.hpp(118) : warning C4251: 'boost::signals::connection::con' : class 'boost
::shared_ptr<T>' needs to have dll-interface to be used by clients of class 'boost::signals::connection' 
```

代码中的信号定义为

```
boost::signal<void (long long int)> totalTimeChanged;
boost::signal<void (unsigned int)> curTimeChanged; 
```

连接完成为

```
GStreamer::totalTimeChanged.connect(boost::bind(&MainWindow\
            ::total_time_changed, &player, _1)); 
```

编译成功，但如何摆脱这些编译器警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T08:50:30.790

您可能想阅读[如何在我的 dll 接口或 ABI 中使用标准库 (STL) 类？](https://stackoverflow.com/questions/5661738/common-practice-in-dealing-with-warning-c4251-class-needs-to-have-dll-inter)提到的“UnknownRoad”帖子位于[http://www.unknownroad.com/rtfm/VisualStudio/warningC4251.html](http://www.unknownroad.com/rtfm/VisualStudio/warningC4251.html)

高温高压

# mysql - SQL：输出每个字段值的计数表

> ID：11734514
> 
> 赞同：2
> 
> 时间：2012-07-31T06:42:47.830
> 
> 标签：mysql, sql, sql-server, oracle, oracle10g

我们有以下数据。

```
TestName  Stage1  Stage2  Stage3  Stage4
Test1     John    Calra   John    Calre
Test2     Calra   null    John    Calra 
```

我们需要实现一个以以下格式显示数据的查询。

```
User    Stage1count  Stages2Count  Stages3count  Stages4Count
John         1             0             2             0
Calra        1             1             0             2 
```

谢谢约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:02:05.397

您可以使用 a`union`来规范化数据。之后，常规`pivot`策略将起作用：

```
select  Name
,       sum(case when Stage = 1 then 1 end) as Stage1count
,       sum(case when Stage = 2 then 1 end) as Stage2count
,       sum(case when Stage = 3 then 1 end) as Stage3count
,       sum(case when Stage = 4 then 1 end) as Stage4count
from    (
        select  1 as Stage
        ,       Stage1 as Name
        from    YourTable
        union all
        select  2 as Stage
        ,       Stage2 as Name
        from    YourTable
        union all
        select  3 as Stage
        ,       Stage3 as Name
        from    YourTable
        union all
        select  4 as Stage
        ,       Stage4 as Name
        from    YourTable
        ) as SubQueryAlias
group by
        Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:22:45.910

试试这个

```
 drop table tests
    CREATE TABLE tests(TestName varchar(10),Stage1 varchar(10),Stage2 varchar(10),Stage3 varchar(10),Stage4 varchar(10))
    INSERT INTO tests
    VALUES('Test1','John','Calra','John','Calra'),('Test2','Calra',null,'John','Calra')

select * from tests

    select 'John' as [User] 
          ,SUM(case when stage1='John' then 1 else 0 end) as stage1
          ,SUM(case when stage2='John' then 1 else 0 end) as stage2
          ,SUM(case when stage3='John' then 1 else 0 end) as stage3
          ,SUM(case when stage4='John' then 1 else 0 end) as stage4
    from tests 
    UNION 

    select 'Calra' as [User] 
          ,SUM(case when stage1='Calra' then 1 else 0 end) as stage1
          ,SUM(case when stage2='Calra' then 1 else 0 end) as stage2
          ,SUM(case when stage3='Calra' then 1 else 0 end) as stage3
          ,SUM(case when stage4='Calra' then 1 else 0 end) as stage4
    from tests 
```

# sprite - 如何使精灵的特定实例暂停一段时间和引擎

> ID：11734517
> 
> 赞同：1
> 
> 时间：2012-07-31T06:43:05.260
> 
> 标签：sprite, andengine

我有一个精灵，它的大量实例在特定时间点出现在场景中。是否可以让一个特定的实例在屏幕上暂停一个实例。我知道我必须通过线程等待（可能）来做到这一点，但是当我尝试等待特定的精灵实例时，它会暂停整个场景，直到我指定的时间，这不是我想要的。有人可以帮忙吗？

这是代码

```
 if((_target.contains(P4X[5], P4Y[5])) || (_target.contains(P5X[4], P5Y[4]))){

                removeSprite(_target);

     } 
```

我想在这里等一段时间，然后删除精灵_target。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T18:47:37.130

您需要的两个工具是

```
// will make your sprite stop updting.
sprite.setIgnoreUpdate(true); 
```

并在完成后用作 TimerHandler 来重新激活精灵。

```
//TimerHandler(seconds, autoReset, callback)
TimerHandler timerHandler = new TimerHandler(0.1f, true, new ITimerCallback(){
@Override
public void onTimePassed(TimerHandler arg0) {
     // Called when timer has completed
     // unpause your sprite here.
}
});
scene.registerUpdateHandler(timerHandler); 
```

这两个工具应该可以让你暂停和取消暂停精灵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T08:59:29.407

您可以使用延迟修改器：

```
DelayModifier mod = new DelayModifier(numberOfSeconds);
mod.addModifierListener(new IModifierListener<IEntity>() {

    @Override
    public void onModifierStarted(IModifier<IEntity> pModifier, IEntity pItem) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onModifierFinished(IModifier<IEntity> pModifier, IEntity pItem) {
        removeSprite(_target);

    }
});
_target.registerEntityModifier(mod); 
```

# mysql - MySQL 按 IN 子句中相同的值顺序排列

> ID：11734524
> 
> 赞同：9
> 
> 时间：2012-07-31T06:43:50.410
> 
> 标签：mysql

这是带有 IN 子句的简单查询。但问题是我需要以相同的 id 顺序获取输出。

`SELECT GROUP_CONCAT(username) as users FROM usertable WHERE usr_id IN (54,68,46)`

例如，如果我通过 54,68,46，那么 usr_id 54 的行应该首先出现，然后是 68，然后是 46。有没有办法在 MySQL 中实现这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T12:50:41.273

我们可以`FIND_IN_SET`像这样使用 on order by 子句以相同的顺序获取值。

```
SELECT `username` as users FROM usertable WHERE usr_id IN (54,68,46) ORDER BY FIND_IN_SET(`usr_id`,"54,68,46") 
```

但我不知道如何以`GROUP_CONCAT`相同的顺序。如果有人用这种简单的方法给出答案，我可以接受这个答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:45:29.390

您需要在[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)`ORDER BY`中使用子句：

```
SELECT GROUP_CONCAT(username ORDER BY user_id ASC) as users 
FROM usertable 
WHERE usr_id IN (54,68); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T06:46:28.567

```
SELECT group_concat(username order by case when usr_id=54 
                                           then 0
                                           when usr_id=68
                                           then 1
                                           when usr_id=46
                                           then 2
                                           else 3    
                                      end) as users 
FROM usertable
WHERE usr_id IN (54,68,46) 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!2/814a0/1)

# apache - 寻找 apache web 服务器配置 API

> ID：11734527
> 
> 赞同：0
> 
> 时间：2012-07-31T06:43:57.927
> 
> 标签：apache, api, configuration, vhosts

是否有可用的 API 可用于以编程方式配置 Apache Web 服务器配置文件？我想访问“vhost”并获取/设置属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:48:34.743

你可以看看[webmin](http://webmin.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-18T04:50:11.207

据我所知，最好的办法是使用`sed`和`awk`转换文本文件之类的工具。

如果您使用的是基于 Debian 的 Linux 发行版，则有一些工具旨在为启用和禁用模块和站点编写脚本，如[https://wiki.apache.org/httpd/DebianLikePlatform](https://wiki.apache.org/httpd/DebianLikePlatform)所述：

*   `a2enmod`启用模组同时`a2dismod`禁用它们
*   `a2ensite`启用虚拟主机站点，同时`a2dissite`禁用它们

# sql - 使用参数更新查询？

> ID：11734531
> 
> 赞同：0
> 
> 时间：2012-07-31T06:44:24.417
> 
> 标签：sql, function

我正在尝试在 MS SQL 中创建一个覆盖更新查询（“而不是更新”）的触发器。我想将一个附加参数传递给触发器函数，但到目前为止，我能做到这一点的唯一方法是通过 where 子句或作为我设置的值的一部分。还有另一种方法可以实现这一目标吗？

我见过类似的事情，其中​​使用函数来模拟允许将参数传递给选择查询的表（例如，'select * from table(42)'）。如果我可以对更新查询做类似的事情，那就太好了......

干杯，马克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:03:45.147

我从来没有遇到过触发器可以接受参数。经过几分钟的搜索似乎是不可能的，但您可以通过使用架构的其他表或使用[SET CONTEXT_INFO 指令](http://msdn.microsoft.com/en-us/library/ms187768%28v=sql.105%29.aspx)找到一些解决方法。

以下是一些有用的链接：

[如何在 sql-server 中创建触发器-接受外部参数](https://stackoverflow.com/questions/9803964/how-to-create-triggers-which-accepts-external-parameters-in-sql-server)

[将变量传递到触发器](https://stackoverflow.com/questions/2646547/pass-a-variable-into-a-trigger)

# asp.net - 如何在 asp.net 中访问 excel 的所有属性，如工作表名称、字体、颜色、粗体、斜体等

> ID：11734534
> 
> 赞同：0
> 
> 时间：2012-07-31T06:44:26.880
> 
> 标签：asp.net, .net, xml, excel

嘿，我已经完成了在 asp.net 中上传和显示 excel 文件的编码，但问题是：

1）如何知道 excel 文件的工作表名称（我将 sheet1 作为默认工作表，但如果用户尝试上传具有不同工作表名称的 excel 文件，则显示错误

2）如何知道excel文件的属性，比如excel文件的标题，数据的颜色是什么大小和字体？这样我显示的输出将与 excel 文件中的输出相同

下面是我的代码

```
using System;
using System.Collections.Generic;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.OleDb;

namespace ExcelToAsp
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void BtnUpload_Click(object sender, EventArgs e)
        {
            if ((TxtFilePath.HasFile))
            {

                OleDbConnection conn = new OleDbConnection();
                OleDbCommand cmd = new OleDbCommand();
                OleDbDataAdapter da = new OleDbDataAdapter();
                DataSet ds = new DataSet();
                string query = null;
                string connString = "";
                string strFileName = DateTime.Now.ToString("ddMMyyyy_HHmmss");
                string strFileType =
                System.IO.Path.GetExtension(TxtFilePath.FileName).ToString().ToLower();
                //Check file type
                if (strFileType == ".xls" || strFileType == ".xlsx")
                    TxtFilePath.SaveAs(Server.MapPath("~/UploadedExcel/" + strFileName + strFileType));
                else
                {
                    LblMsg.Text = "Only excel files allowed";
                    LblMsg.ForeColor = System.Drawing.Color.Red;
                    LblMsg.Visible = true;
                    return;
                }
                string strNewPath = Server.MapPath("~/UploadedExcel/" + strFileName + strFileType);

                //Connection String to Excel Workbook
                if (strFileType.Trim() == ".xls")
                {
                    connString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" +
                       strNewPath + ";Extended Properties=\"Excel 8.0;HDR=Yes;IMEX=2\"";
                }
                else if (strFileType.Trim() == ".xlsx")
                {
                    connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + strNewPath + ";Extended Properties=\"Excel 12.0;HDR=Yes;IMEX=2\"";
                }

                query = "SELECT * FROM [Sheet1$]";//query = "SELECT [Country],[Capital] FROM [Sheet1$] WHERE[Currency]=’Rupee’"//query = "SELECT [Country],[Capital] FROM [Sheet1$]"

                //Create the connection object
                conn = new OleDbConnection(connString);
                //Open connection
                if (conn.State == ConnectionState.Closed) conn.Open();
                //Create the command object
                cmd = new OleDbCommand(query, conn);
                da = new OleDbDataAdapter(cmd);
                ds = new DataSet();
                da.Fill(ds);

                GrvExcelData.DataSource = ds.Tables[0];
                GrvExcelData.DataBind();
                LblMsg.Text = "Data retrieved successfully! Total Records:" + ds.Tables[0].Rows.Count;
                LblMsg.ForeColor = System.Drawing.Color.Green;
                LblMsg.Visible = true;
                da.Dispose();
                conn.Close();
                conn.Dispose();
            }
            else
            {
                LblMsg.Text = "Please select an excel file first";
                LblMsg.ForeColor = System.Drawing.Color.Red;
                LblMsg.Visible = true;

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:32:04.033

您可以使用 oledb 获取工作表名称。

```
DataTable dtTable = new DataTable();
OleDbConnection conn = new OleDbConnection(connstr);
dtTable = conn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null); 
```

# c# - C＃。在单词上拆分标识符

> ID：11734536
> 
> 赞同：-5
> 
> 时间：2012-07-31T06:44:32.997
> 
> 标签：c#, regex

我有一些识别器。例如：'basicHtmlConverter。'
我需要将他的一些词分开：'基本 Html 转换器'。
我想使用`Regex.Split`一些模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:52:27.483

试试这个`Regex`：

```
([a-z]+)([A-Z]?[a-z]*)+ 
```

你的代码应该是这样的：

```
var nameList = new List<string>();
var inputString = "canClearScene";
foreach (Capture capture in Regex.Matches(inputString, "(?<name>[a-z]+)(?<name>[A-Z]?[a-z]*)+")[0].Groups["name"].Captures)
{
    nameList.Add(capture.Value);
} 
```

或`LINQ`方式：

```
var nameList = (from Capture capture in Regex.Matches(inputString, "(?<name>[a-z]+)(?<name>[A-Z]?[a-z]*)+")[0].Groups["name"].Captures
                select capture.Value).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:09:44.483

不需要正则表达式：您只需要扫描一次字符串并通过 LINQ 完成任务。

```
yourString.Select(c => string.Format(Char.IsUpper(c) ? " {0}" : "{0}", c)); 
```

这将为您提供一个`IEnumerable<string>`包含您需要的所有数据的对象，它可以成为您需要的对象，如下所示：

```
string[] output = string.Split(" ", string.Join("", yourString.Select(c => string.Format(Char.IsUpper(c) ? " {0}" : "{0}", c))); 
```

基本上，流程是这样的：

*   插入所需的任何空间
*   打包数据
*   拆分令牌

# objective-c - 应用程序崩溃 - 应用程序收到内存不足警告

> ID：11734537
> 
> 赞同：0
> 
> 时间：2012-07-31T06:44:33.340
> 
> 标签：objective-c, ios, uiimage

在我的应用程序中，从 iPad 相机拍摄超过 100 张照片后，我收到内存不足警告和应用程序崩溃。我使用了一些内存管理工具，例如仪器泄漏-分配，仪器没有显示任何泄漏。但是当我使用分配时，它显示 malloc 16bytes 每次打开相机视图并拍照时使用更多分配，打开我的自定义视图。

我做了谷歌，我找到了代码片段来了解应用程序使用了多少内存

```
 -(void) report_memory {
struct task_basic_info info;
mach_msg_type_number_t size = sizeof(info);
kern_return_t kerr = task_info(mach_task_self(),
                               TASK_BASIC_INFO,
                               (task_info_t)&info,
                               &size);
if( kerr == KERN_SUCCESS ) {
    NSLog(@"Memory in use (in bytes): %u", info.resident_size);
} else {
    NSLog(@"Error with task_info(): %s", mach_error_string(kerr));
  }
  } 
```

上面的代码片段也给了我与仪器相同的结果，当我打开相机和自定义 VC 时，应用程序使用更多分配。

在我的代码中，我使用了一个类别来使用函数 CGContextRef、CGColorSpaceRef、CGImageRef、imageWithCGImage 等创建缩略图。它是否会导致崩溃？

有没有其他方法可以找出或追踪应用程序崩溃/收到内存警告的原因？或者在仪器中还有其他更好的方法来发现这一点吗？

谢谢..

# mongodb - Doctrine MongoDB ODM 的原子操作

> ID：11734539
> 
> 赞同：5
> 
> 时间：2012-07-31T06:44:49.893
> 
> 标签：mongodb, symfony, doctrine

我似乎无法使以下查询起作用。基本上，我正在尝试将消息文档添加到对话文档中，如下所示：

```
public function reply($conversationId, Message $message, $flush = true)
{            
    $this->dm->createQueryBuilder($this->class)
        ->field('archivers')->unsetField()
        ->field('repliedBy')->set($message->getUserId())
        ->field('repliedBody')->set($message->getBody())
        ->field('repliedAt')->set(new \DateTime())
        ->field('modifiedAt')->set(new \DateTime())
        ->field('messages')->push($message)
        ->field('id')->equals(new \MongoId($conversationId))
        ->getQuery()
        ->execute();

    if ($flush) {
        $this->dm->flush();
    }
} 
```

此回复方法以两种方式调用。首先是用户通过 html 表单发布消息，其次是 Android 应用程序进行的 REST 调用。表单有效，但 REST 调用失败（其余实现使用 JMSSerializerBundle 和 FOSRestBundle 顺便说一句）......

我已经验证了代码被调用并且传递给方法的参数在这两种情况下都是有效的，但是由于某种原因，UnitOfWork.php 中的 commit() 调用忽略了对文档的更改。请参阅[第 413 行](https://github.com/doctrine/mongodb-odm/blob/master/lib/Doctrine/ODM/MongoDB/UnitOfWork.php#L413)以了解我的意思。

有谁知道为什么会发生这种情况？

以下是我尝试过的其他方法：

首先，我添加了一个 update() 调用，该调用失败并显示“可捕获的致命错误：类的对象......无法在 /vendor/bundles/Symfony/Bundle/DoctrineMongoDBBundle/Logger/DoctrineMongoDBLogger.php 第 280 行中转换为字符串”。

```
public function reply($conversationId, Message $message, $flush = true)
{            
    $this->dm->createQueryBuilder($this->class)
        ->update()
        ->field('archivers')->unsetField()
        ->field('repliedBy')->set($message->getUserId())
        ->field('repliedBody')->set($message->getBody())
        ->field('repliedAt')->set(new \DateTime())
        ->field('modifiedAt')->set(new \DateTime())
        ->field('messages')->push($message)
        ->field('id')->equals(new \MongoId($conversationId))
        ->getQuery()
        ->execute();

    if ($flush) {
        $this->dm->flush();
    }
} 
```

我尝试的第二种方法是推送一个数组而不是一个对象：

```
public function reply($conversationId, Message $message)
{            
    $this->dm->createQueryBuilder($this->class)
        ->update()
        ->field('archivers')->unsetField()
        ->field('repliedBy')->set($message->getUserId())
        ->field('repliedBody')->set($message->getBody())
        ->field('repliedAt')->set(new \DateTime())
        ->field('modifiedAt')->set(new \DateTime())
        ->field('messages')->push(array(
            '_id' => new \MongoId(),
            'userId' => $message->getuserId(),
            'body' => $message->getBody(),
            'createdAt' => new \DateTime(),
            'modifiedAt' => new \DateTime(),
        ))
        ->field('id')->equals(new \MongoId($conversationId))
        ->getQuery() 
        ->execute();

    $this->dm->flush();
} 
```

在调用 flush() 方法之前，它工作正常。flush() 会导致推送重复的对象。所以我在对话中得到了相同消息的两个副本（评论 flush() 解决了这个问题，但应用程序在其他类中有多个 flush() 调用）。

另一个因对象而失败的推送查询：

```
public function archive($conversationId, $userId)
{

    $userStamp = new UserStamp();
    $userStamp->setUserId($userId);

    $this->dm->createQueryBuilder($this->class)
        ->update()
        ->field('archivers')->push($userStamp)
        ->field('modifiedAt')->set(new \DateTime())
        ->field('id')->equals(new \MongoId($conversationId))
        ->getQuery()
        ->execute();
} 
```

如果 push() 调用被删除，一切正常。

仍然停留在这一点上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:16:17.153

查询构建器通常用于对 MongoDB 执行多文档或命令查询，从而绕过文档管理。唯一的例外是，如果您正在执行[查询生成器文档](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/query-builder-api.html#disabling-hydration)中描述的混合查找查询。您上面的示例等效于：

```
$collection->update(
    ['_id' => new \MongoId($conversationId)],
    [
        '$set' => [
            'repliedBy' => $message->getUserId(),
            'repliedBody' => $message->getbody(),
            'repliedAt' => new \MongoDate(),
            'modifiedAt' => new \MongoDate(),
        ],
        '$push' => ['messages' => $message],
    ],
    ['multiple' => false]
); 
```

请注意，您的字段映射将被使用（例如 Datetime 将成为 MongoDate），但没有要使用此查询管理的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T16:39:28.210

如果在更新期间推送对象，请在 php.ini 中使用 \stdClass。快速示例：

```
public function reply($conversationId, Message $message)
{      
       $object = new \stdClass();
       $object->_id = new \MongoId();
       $object->userId = $message->getuserId();
       $object->body = $message->getBody();
       $object->createdAt = new \MongoDate();
       $object->modifiedAt = new \MongoDate();

       $this->dm->createQueryBuilder($this->class)
        ->update()
        ->field('archivers')->unsetField()
        ->field('repliedBy')->set($message->getUserId())
        ->field('repliedBody')->set($message->getBody())
        ->field('repliedAt')->set(new \DateTime())
        ->field('modifiedAt')->set(new \DateTime())
        ->field('messages')->push()
        ->field('id')->equals(new \MongoId($conversationId))
        ->getQuery() 
        ->execute();

        $this->dm->flush();
} 
```

# python - 自定义 Django 注册和 django 配置文件

> ID：11734540
> 
> 赞同：0
> 
> 时间：2012-07-31T06:45:00.860
> 
> 标签：python, django, django-forms, django-registration

我从 1 天开始就在 django-user 注册上苦苦挣扎，我特此附上我的帐户模块，请考虑一下

这是我的模型

```
from django.db import models
from django.contrib.auth.models import User
from django.contrib import admin
from demo.models import Organization
def_max_length = 255

class Profile(models.Model):
    user_name = models.ForeignKey(User, unique=True,related_name = 'ussr')    
    first_name = models.CharField(max_length=100)
    middle_name = models.CharField(max_length=100)
    last_name = models.CharField(max_length=100)
    user_name = models.ForeignKey(User, unique=True, related_name='profile')
    password = models.CharField(max_length=80)
    role = models.CharField(max_length = 20)
    org_name = models.ForeignKey('demo.Organization',related_name = 'user_org_nm',null= False)

    city = models.CharField(max_length=50,null = True,blank = True)
    state = models.CharField(max_length=50,null = True,blank = True)
    country = models.CharField(max_length=50,null = True,blank = True)
    street = models.TextField(null=True,blank = True)
    pin = models.CharField(max_length=30,null = True,blank = True)

    user_type = models.CharField(max_length = 30)
    status =models.IntegerField(null=True, blank=True)
    primary_mobile =models.CharField(max_length = 50,null = True,blank = True)
    secondary_mobile =models.CharField(max_length = 50,null = True,blank = True)
    primary_landline =models.CharField(max_length = 50,null = True,blank = True)
    secondary_landline =models.CharField(max_length = 12,null = True,blank = True)
    primary_email = models.CharField(max_length = 30,null = True,blank = True)
    secondary_email = models.CharField(max_length = 30,null = True,blank = True)
    notes = models.TextField()
    date_created = models.DateTimeField(auto_now = True,blank=True, null=True)

    date_modified =models.DateTimeField(auto_now = False,null = True)
    class Meta:
        abstract=True

    """
    class UserProfile(Profile, User):
        def user_created(sender, user, request, **kwargs):
            form = ExtendedRegistrationForm(request.POST)
            extended_user = UserProfile(user=user)
            extended_user.is_active = False
            extended_user.first_name = form.extended_user['first_name']
            extended_user.last_name = form.extended_user['last_name']
            extended_user.pid = form.extended_user['pin']
            extended_user.street = form.extended_user['street']
            extended_user.number = form.extended_user['state']
            extended_user.number = form.extended_user['country']
            extended_user.number = form.extended_user['primary_mobile']
            extended_user.number = form.extended_user['secondary_mobile']
            extended_user.number = form.extended_user['primary_landline']
            extended_user.number = form.extended_user['secondary_landline']

            extended_user.number = form.extended_user['primary_email']
            extended_user.number = form.extended_user['secondary_email']

            extended_user.city = form.extended_user['city']
            extended_user.save()

        user_registered.connect(user_created)
    """

    def disable_from_user(self):
         try:
            get_mtng = Meeting.objects.filter(created_by = self.id)
            for get_p in get_mtng:
                get_p.status = 0
                get_p.save()
                if get_p:
                    try:
                        get_participant = Participant.objects.filter(meeting_id =get_p)
                        for get_pp in get_participant:
                            get_pp.status = 0
                            get_pp.save()
                    except:
                        LOG_INFO('Organization %s has no PARTICIPANT IN  '% get_p)
                        pass        
         except:
            pass 

    class Meta:
        app_label = 'accounts'

    def Validate(self):
        errors = {}

        errors.update(verifyStringEmpty('first_name', self.first_name, True))        
        errors.update(verifyStringEmpty('last_name', self.last_name, True))
        errors.update(verifyStringEmpty('passwd', self.passwd, True))
        errors.update(verifyStringEmpty('city', self.city, True))
        errors.update(verifyStringEmpty('state', self.state, True))
        errors.update(verifyStringEmpty('country', self.country, True))
        errors.update(verifyStringEmpty('street', self.street, True))
        errors.update(verifyStringEmpty('pin', self.pin, True))
        errors.update(verifyStringEmpty('primary_mobile', self.primary_mobile, True))
        errors.update(verifyStringEmpty('primary_landline', self.primary_landline, True))
        errors.update(get_email('primary_email', self.primary_email, True))
        errors.update(verifyStringEmpty('status', self.status, False))
        errors.update(verifyStringEmpty('middle_name', self.middle_name, False))
        errors.update(verifyStringEmpty('notes', self.notes, False))
        errors.update(verifyStringEmpty('secondary_mobile', self.secondary_mobile, False))
        errors.update(verifyStringEmpty('secondary_landline', self.secondary_landline, False))
        errors.update(get_email('secondary_email', self.secondary_email, False))

        return errors

    def ValidateAdmin(self):
        errors = {}

        errors.update(verifyStringEmpty('last_name', self.last_name, True))
        errors.update(verifyStringEmpty('passwd', self.passwd, True))
        #print self.get_org(self.org_name)
        errors.update(verifyStringEmpty('role', self.role, True))
        errors.update(verifyStringEmpty('address', self.address, True))
        errors.update(verifyStringEmpty('primary_mobile', self.primary_mobile, True))
        errors.update(verifyStringEmpty('primary_landline', self.primary_landline, True))
        errors.update(get_email('primary_email', self.primary_email, True))
        errors.update(verifyStringEmpty('status', self.status, False))
      #  errors.update(utils.verifyStringEmpty('org_type', self.org_type, False))
        errors.update(verifyStringEmpty('middle_name', self.middle_name, False))
        errors.update(verifyStringEmpty('notes', self.notes, False))
        errors.update(verifyStringEmpty('secondary_mobile', self.secondary_mobile, False))
        errors.update(verifyStringEmpty('secondary_landline', self.secondary_landline, False))
        errors.update(get_email('secondary_email', self.secondary_email, False))

        return errors

    class Meta:

        verbose_name = "User profile"
        verbose_name_plural = "User profiles" 
```

这是我的 profile.py 文件

```
from django import forms
from models import Profile
from demo.models import Organization
#import strings
from registration.forms import RegistrationForm

class UserRegistrationForm(RegistrationForm):
    first_name = forms.CharField(max_length=30,widget=forms.TextInput(attrs={'class' : 'myfieldclasscity'}),error_messages={'required':"please enter the First name"},required = True)
    middle_name = forms.CharField(max_length=30,widget=forms.TextInput(attrs={'class' : 'myfieldclasscity'}),error_messages={'required':"please enter the middle name"},required = True)
    last_name = forms.CharField(max_length=30,widget=forms.TextInput(attrs={'class' : 'myfieldclasscity'}),error_messages={'required':"please enter the last name"},required = True)

    password1 = forms.CharField(label="Password", widget=forms.PasswordInput)
    password2 = forms.CharField(label="Password confirmation", widget=forms.PasswordInput,
                                help_text = "Enter the same password as above, for verification.")
  #  primary_email = forms.EmailField(label="Email", max_length=75)
    secondary_email = forms.EmailField(label="secondary email", max_length=75)

    city = forms.CharField(max_length=30,widget=forms.TextInput(attrs={'class' : 'myfieldclasscity'}),error_messages={'required':"please enter the city name"},required = True)
    state = forms.CharField(max_length=30,widget=forms.TextInput(attrs={'class' : 'myfieldclassst'}),error_messages={'required':"please enter a state name"},required = True)
    country = forms.CharField(max_length=100,widget=forms.TextInput(attrs={'class' : 'myfieldclasscountry'}),error_messages={'required':"please enter a country name"},required = True)
    street = forms.CharField(max_length=100,widget=forms.TextInput(attrs={'class' : 'myfieldclassstreet'}),error_messages={'required':"please enter a street name"},required = True)
    pin = forms.CharField(max_length=30,widget=forms.TextInput(attrs={'class' : 'myfieldclasspin'}),error_messages={'required':"please enter a pin name"},required = True)
    primary_mobile =forms.CharField(max_length=100,widget=forms.TextInput(attrs={'class' : 'myfieldclasspm'}),error_messages={'required':"work phone is required"},required = True)
    secondary_mobile =forms.CharField(max_length=100,widget=forms.TextInput(attrs={'class' : 'myfieldclasssm'}),error_messages={'required':"home phone is required"},required = False)
    primary_landline =forms.CharField(max_length=100,widget=forms.TextInput(attrs={'class' : 'myfieldclasspl'}),error_messages={'required':"work phone number  is required"},required = True)
    secondary_landline =forms.CharField(max_length=100,error_messages={'required':"home phone is required"},required = False)

    org_name = forms.ModelChoiceField(queryset=Organization.objects, label='Organization') 
```

这是 regbackend.py 文件，我在其中保存所有自定义字段

```
import profile
from django.http import HttpResponseRedirect, HttpResponse, Http404
from django.contrib import messages

from demo.models import Organization
def user_created(sender, user, request, **kwargs):
    form = profile.UserRegistrationForm(request.POST)
    data = profile.Profile(user_name=user)        
    try:get_id = form.data['org_name']
    except:get_id = False
    get_org = Organization.objects.get(id = get_id)    
    data.org_name = get_org
    data.primary_email = user.email
    data.first_name = form.data['first_name']
    try:data.middle_name = form.data['middle_name']
    except:data.middle_name = ''
    data.last_name = form.data['last_name']
    data.city = form.data['city']
    data.street = form.data['street']
    data.state = form.data['state']
    data.country = form.data['country']
    data.primary_mobile = form.data['primary_mobile']
    try:data.secondary_mobile = form.data['secondary_mobile']
    except:data.secondary_mobile = ''
    data.primary_landline = form.data['primary_landline']
    try:data.secondary_landline = form.data['secondary_landline']
    except:data.secondary_landline  = ''
    try:data.secondary_email = form.data['secondary_email']
    except:data.secondary_email  = ''
    data.passworwd = user.password
    data.save()
    print "---------------------"
    print request
    messages.success(request, 'Thank you!')
 from registration.signals import user_registered
 user_registered.connect(user_created) 
```

我的观点很少

```
from django.contrib.auth.decorators import login_required
from django.template import RequestContext
from django.shortcuts import render_to_response
from django.contrib.auth.views import logout_then_login
from django.contrib.auth.models import User
from django.shortcuts import render_to_response, get_object_or_404
from django.http import HttpResponseRedirect, HttpResponse, Http404
from accounts.forms import UserCreationForm
from django.contrib.auth.tokens import default_token_generator
from django.core.urlresolvers import reverse
from django.template import RequestContext
from django.conf import settings
from django.utils.http import urlquote, base36_to_int
from django.contrib.sites.models import Site 
from accounts.forms import UserCreationForm 
from django.core.urlresolvers import reverse

def logout_page(request):
    logout_then_login(request)

def index(request):
    return HttpResponseRedirect(reverse("registration_register")) 
```

最后但并非最不重要的 urls.py

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
# from django.contrib import admin
# admin.autodiscover()

from django.contrib import admin
admin.autodiscover()
from django.conf.urls.defaults import *
from django.views.generic.simple import direct_to_template

import registration.backends.default.urls as regUrls

    from profile import UserRegistrationForm
    from registration.views import register
    import regbackend, views
    from accounts import profile
    urlpatterns = patterns('',     
      #  (r'^conf/admin/(.*)', admin.site.root),
        url(r'^register/$', register, {'backend': 'registration.backends.default.DefaultBackend','form_class': UserRegistrationForm}, name='registration_register'),
        (r'^accounts/', include(regUrls)),
        url('^profile/$', direct_to_template, {'template': 'profile.html'}, name="profile"),
        (r'^$', views.index),    
    ) 
```

我能够保存自定义字段以及 django 默认字段，但是

当我在保存自定义字段（注册）后尝试重定向 url @/accounts/profile/ 时出现问题。我使用

regbackend.py 中 data.save() 之后的 HttpresponseRedirect() 方法，但它不起作用

请帮助我如何将 url 重定向到用户配置文件。我对 Signal 不太了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:39:28.043

这来自文档（非常好）：

```
Upon successful registration – not activation – the default redirect is to the URL pattern named registration_complete; this can be overridden by passing the keyword argument success_url to the register() view. 
```

[http://docs.b-list.org/django-registration/0.8/default-backend.html](http://docs.b-list.org/django-registration/0.8/default-backend.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:28:44.507

你在使用 django-registration 吗？看起来你是？

# c# - SDL .NET 中的字体渲染错误？还是只是我的代码？

> ID：11734542
> 
> 赞同：1
> 
> 时间：2012-07-31T06:45:08.410
> 
> 标签：c#, sdl, game-engine, system.drawing, game-physics

```
/// <summary>
/// Simple UI TextBox Class. For displaying messages in 2D Games
/// </summary>
class TextBox
{
    /// <summary>
    /// Constructor.
    /// </summary>
    /// <param name="Text"> The text of the TextBox</param>
    public TextBox(string Text = "", int w = 400, int h = 200)
    {
        this.Text = Text;
        textNext = string.Empty;

        try { Surface = new Surface(w, h); }
        catch (NullReferenceException e)
        {
            MessageBox.Show(e.Message);
            Events.QuitApplication();
        }

        Offset = new System.Drawing.Point(30, 30);
        FontColor = System.Drawing.Color.White;
        BackColor = System.Drawing.Color.Black;
        Surface.Fill(BackColor);

        try { Font = new Font(@"data\font\AllerDisplay.ttf", 16); }
        catch (NullReferenceException e)
        {
            MessageBox.Show(e.Message);
            Events.QuitApplication();
        }

        Visible = true;
        MaxLines = 6;
        AcceptKey = Key.Return;
    }

    /// <summary>
    /// Locks and wraps up the text box.
    /// Text, Size and Font changes take effect
    /// </summary>
    public void Lock()
    {
        Surface.Fill(BackColor); // clear the surface
        DrawText(); // draw the text
    }

    public void Update()
    {
        if (Keyboard.IsKeyPressed(AcceptKey))
        {
            if (!String.IsNullOrEmpty(textNext))
            {
                Text = textNext;
                textNext = string.Empty;
                Lock();
            }
            else
            {
                Visible = false;
            }
        }
    }

    /// <summary>
    /// Wraps up and renders the text
    /// </summary>
    private void DrawText()
    {
        var x = 0;
        var y = 0;

        Console.WriteLine(Text.Length);

        // increment the size of each character
        for (var i = 0; i < Text.Length; i++)
        {
            x += Font.SizeText(Text[i].ToString()).Width;

            // if it exceeds the width of the box
            if (x > Surface.Width - Offset.X * 2)
            {
                Text = Text.Insert(i, "-\n");
                x = 0;
                y++;
            }

            // if the lines exceed the limit
            if (y > MaxLines)
            {
                // save the remaining lines for the next run
                var index = Text.LastIndexOf("-\n");
                textNext = Text.Substring(index);
                Text = Text.Substring(0, index);
                break;
            }
        }

        Console.WriteLine(Text);

        // render the string and blit it onto Surface
        var surf = Font.Render(Text, FontColor);
        Surface.Blit(surf, Offset);

    }

    /// <summary>
    /// The remaining text which is to be displayed 
    /// on the next run of the text box
    /// </summary>
    string textNext;

    /// <summary>
    /// The text of the text box
    /// </summary>
    public string Text
    {
        get;
        set;
    }

    /// <summary>
    /// The background surface of the text box
    /// </summary>
    public Surface Surface
    {
        get;
        set;
    }

    /// <summary>
    /// Maximum number of lines per text piece
    /// </summary>
    public int MaxLines
    {
        get;
        set;
    }

    // More irrelevant code...
} 
```

现在该`DrawText()`方法基本上对文本进行了自动换行。如果文本太大而无法在单个框中显示，则将其部分存储并在重新运行时显示。现在的问题是，我第二次调用 Font.Render 时，出于某种原因，我得到了垂直显示的文本。例如：

```
 textBox = new TextBox(
@"Please note that this Tutorial is not for the absolute beginner. I assume that you already can code fluent in C# and that you are able to understand code when reading them. I will not explain every single line of code when it should be clear what it's doing. Also please note that i am not a native speaker, so there are for sure many grammatical errors in this text (which are maybe corrected in the future when i find them ;-)");

            textBox.Lock(); 
```

现在我得到的输出是： ![输出 1](../Images/fe59124bc803be686235e16ad3e94e41.png) ![输出 2](../Images/dec757ed4815f4850dc52397cf8a9356.png)

那么为什么文本的第二部分是垂直显示的呢？我尝试检查我的自动换行功能是否正常工作，也许垂直方向是由 '\n' 插入引起的。但是，它运行良好。它只在正确的位置添加了一个 '\n'。所以字体渲染可能存在一些问题。

# xml - 如何在 pom.xml 中列出项目的子项？

> ID：11734543
> 
> 赞同：0
> 
> 时间：2012-07-31T06:45:07.850
> 
> 标签：xml, maven-2, build, parent-child, pom.xml

我知道可以在 pom.xml 中为项目定义父级，但我可以在 maven 2 中明确定义项目的子级吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:48:01.670

是的，它在 Maven 中被称为“模块”。因此，在标签模块下，您拥有带有模块名称的标签模块，即子模块。

[Maven 模块](http://maven.apache.org/guides/mini/guide-multiple-modules.html)

[例子](http://www.sonatype.com/books/mvnex-book/reference/multimodule-sect-simple-parent.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:51:27.157

我给你举个例子：

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
                <modelVersion>4.0.0</modelVersion>
                <groupId>de.something.pr.pr-system</groupId>
                <artifactId>pr-models</artifactId>
                <version>T03-SNAPSHOT</version>
                <name>${project.artifactId}</name>
                <description>PR Processing</description>

                <parent>
                    <groupId>de.something.pr</groupId>
                    <artifactId>pr-system</artifactId>
                    <version>T03-SNAPSHOT</version>
                </parent>

                <dependencies>
                    <dependency>
                        <groupId>de.something.pr.pr-system</groupId>
                        <artifactId>pr-common</artifactId>
                        <version>T24-SNAPSHOT</version>
                    </dependency>
                </dependencies>
            </project> 
```

# objective-c - uitableview 中的单元格规范

> ID：11734544
> 
> 赞同：0
> 
> 时间：2012-07-31T06:45:10.780
> 
> 标签：objective-c, xcode, ios5, uitableview

> **可能重复：**
> [UITableView 创建 4 个正方形](https://stackoverflow.com/questions/11718414/uitableview-create-4-square)

我想在 uiTableview 的一行中有 4 个单元格，但什么也没有出现，我不知道你为什么要帮我这个单元格的图片

提前致谢

```
 - (void)viewDidLoad
{
[super viewDidLoad];
NSMutableArray *keys = [[NSMutableArray alloc] init];
NSMutableDictionary *contents = [[NSMutableDictionary alloc] init];

NSString *monKey = @"Monday";
NSString *tueKey = @"Tuesday";
NSString *wedKey = @"Wednday";
NSString *thuKey = @"Thusday";
NSString *friKey = @"Friday";
NSString *satKey = @"Satuarday";
NSString *sunKey = @"Sunnday";

[contents setObject:[NSArray arrayWithObjects:@"Work Time", @"Absence", nil] forKey:monKey];
[contents setObject:[NSArray arrayWithObjects:@"Compensation", @"Work Time", @"Absence", nil] forKey:wedKey];
[contents setObject:[NSArray arrayWithObjects:@"Compensation", @"Work Time", nil] forKey:tueKey];
[contents setObject:[NSArray arrayWithObjects:@"Compensation", @"Work Time", nil] forKey:thuKey];
[contents setObject:[NSArray arrayWithObjects:@"Compensation", @"Work Time", nil] forKey:friKey];
[contents setObject:[NSArray arrayWithObjects:@"Compensation", @"Work Time", nil] forKey:satKey];
[contents setObject:[NSArray arrayWithObjects:@"Compensation", @"Work Time", nil] forKey:sunKey];

[keys addObject:tueKey];
[keys addObject:monKey];
[keys addObject:wedKey];
[keys addObject:thuKey];
[keys addObject:friKey];
[keys addObject:satKey];
[keys addObject:sunKey];

[self setSectionKeys:keys];
[self setSectionContents:contents];

// Uncomment the following line to preserve selection between presentations.
// self.clearsSelectionOnViewWillAppear = NO;

// Uncomment the following line to display an Edit button in the navigation bar for this view controller.
self.navigationItem.leftBarButtonItem = self.editButtonItem;
UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd 
target:self action:@selector(addNewItem)];
self.navigationItem.rightBarButtonItem = rightButton;
} 
```

**cellForRowAtIndexPath**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithFrame:CGRectZero]; 
}
cell.selectionStyle = UITableViewCellSelectionStyleNone;

int column = 4;
for (int i=0; i<column; i++) {

    UIImageView *aBackgroundImageView = [[UIImageView alloc]initWithFrame:CGRectMake(32+184*i,10, 167,215)];
    aBackgroundImageView.tag = (column*indexPath.row)+i;
    [cell.contentView addSubview:aBackgroundImageView];
   // [aBackgroundImageView release];
}
return cell;
} 
```

**编辑 1**

这是我添加此行时的图片

```
 aBackgroundImageView.backgroundColor = [UIColor redColor]; 
```

**编辑 2：使用 Rog 方法**

![在此处输入图像描述](../Images/6b43544ebcc685cff063284a43957df8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:14:42.250

你的方法有点乱。您的主要问题是您如何设置 UIImageView 实例的框架原点，因为它们 1）对于单元格而言太大 2）超出单元格边界。

试试这个（ps：可能有错别字，因为我已经把它写在我的头上）：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

    int numberOfColumns = 4;
    CGSize gridSize = CGSizeMake(cell.contentView.frame.size.width / numberOfColumns, cell.contentView.frame.size.height / 2); // Height size is arbitrary here, width is obtained by dividing total width by number of columns
    for (int i=0; i < column; i++) 
    {
         UIView *aView = [[UIView alloc] initWithFrame:CGRectMake(gridSize.width * i, cell.contentView.frame.size.height/2 - gridSize.height/2, gridSize.width, gridSize.height)];
         aview.backgroundColor = [UIColor colorWithWhite:1.0 alpha:1/i+1]; // This is just so you can see the different gridCells within the cell
         [cell.contentView addSubview:aView];
         [aView release];
    }
    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:58:41.473

在我看来，在：

```
for (int i=0; i<column; i++) {

  UIImageView *aBackgroundImageView = [[UIImageView alloc]initWithFrame:CGRectMake(32+184*i,10, 167,215)];
  aBackgroundImageView.tag = (column*indexPath.row)+i;
  [cell.contentView addSubview:aBackgroundImageView];
  // [aBackgroundImageView release];
} 
```

您没有为您的观点提供内容...

所以这应该解释为什么你什么都看不到......尝试添加：

```
aBackgroundImageView.backgroundColor = [UIColor redColor]; 
```

看看是否有任何变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T07:20:45.927

在这里，我创建了一个您想要的演示应用程序，并将一些代码放入此处。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
NSUInteger devide=[self.tableArray count] / 3;

    if ([self.tableArray count] % 3 &gt;0 ) {

        devide+=1;

    } else {

        devide=devide;

    }
    return devide;
} 
```

和 cellForRowAtIndexPath。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if(cell==nil){
        cell=[[[NSBundle mainBundle] loadNibNamed:@"CCell" owner:self options:nil] objectAtIndex:0];
        UIButton *imgV1=(UIButton*)[cell viewWithTag:1];
        UIButton *imgV2=(UIButton*)[cell viewWithTag:2];
        UIButton *imgV3=(UIButton*)[cell viewWithTag:3];
        [imgV1 addTarget:self action:@selector(btnTapped:) forControlEvents:UIControlEventTouchDown];
        [imgV2 addTarget:self action:@selector(btnTapped:) forControlEvents:UIControlEventTouchDown];
        [imgV3 addTarget:self action:@selector(btnTapped:) forControlEvents:UIControlEventTouchDown];
        HJManagedImageV *img1=[[HJManagedImageV alloc] initWithFrame:CGRectMake(0, 0, imgV1.frame.size.width, imgV1.frame.size.height)];
        HJManagedImageV *img2=[[HJManagedImageV alloc] initWithFrame:CGRectMake(0, 0, imgV2.frame.size.width, imgV2.frame.size.height)];
        HJManagedImageV *img3=[[HJManagedImageV alloc] initWithFrame:CGRectMake(0, 0, imgV3.frame.size.width, imgV3.frame.size.height)];
        img1.tag=img2.tag=img3.tag=10000;

        img1.backgroundColor=img2.backgroundColor=img3.backgroundColor=[UIColor clearColor];
        [imgV1 addSubview:img1];
        [imgV2 addSubview:img2];
        [imgV3 addSubview:img3];
    }

    int x=indexPath.row;
    x=x*3;

    UIButton *imgV1=(UIButton*)[cell viewWithTag:1];
    UIButton *imgV2=(UIButton*)[cell viewWithTag:2];
    UIButton *imgV3=(UIButton*)[cell viewWithTag:3];

    HJManagedImageV *img1=(HJManagedImageV*)[imgV1 viewWithTag:10000];
    HJManagedImageV *img2=(HJManagedImageV*)[imgV2 viewWithTag:10000];
    HJManagedImageV *img3=(HJManagedImageV*)[imgV3 viewWithTag:10000];

    [img1 clear];
    [img2 clear];
    [img3 clear];

    [imgV1 setTitle:[self.tableArray objectAtIndex:x] forState:UIControlStateDisabled];
    img1.url=[NSURL URLWithString:[self.tableArray objectAtIndex:x]];
    [img1 showLoadingWheel];
    [GlobalCacheManager manage:img1];

    if((x+1) &gt;= self.tableArray.count){
        imgV2.hidden=imgV3.hidden=YES;
        [imgV2 setBackgroundImage:nil forState:UIControlStateNormal];
        [imgV3 setBackgroundImage:nil forState:UIControlStateNormal];
    } else if( (x+2)&gt;=self.tableArray.count) {
        img2.url=[NSURL URLWithString:[self.tableArray objectAtIndex:x+1]];
        [img2 showLoadingWheel];
        [GlobalCacheManager manage:img2];
        imgV1.hidden=imgV2.hidden=YES;
        imgV3.hidden=YES;
        [imgV2 setTitle:[self.tableArray objectAtIndex:x+1] forState:UIControlStateDisabled];
        [imgV3 setBackgroundImage:nil forState:UIControlStateNormal];
    } else {
        [img2 showLoadingWheel];
        [img3 showLoadingWheel];
        img2.url=[NSURL URLWithString:[self.tableArray objectAtIndex:x+1]];
        [GlobalCacheManager manage:img2];
        img3.url=[NSURL URLWithString:[self.tableArray objectAtIndex:x+2]];
        [GlobalCacheManager manage:img3];
        imgV2.hidden=imgV3.hidden=NO;
        [imgV2 setTitle:[self.tableArray objectAtIndex:x+1] forState:UIControlStateDisabled];
        [imgV3 setTitle:[self.tableArray objectAtIndex:x+2] forState:UIControlStateDisabled];
    }

    return cell;
} 
```

# python - 从具有 minidom 的节点或元素对象获取文档

> ID：11734545
> 
> 赞同：3
> 
> 时间：2012-07-31T06:45:11.963
> 
> 标签：python, xml, minidom

有没有办法从子元素或节点获取文档根？我正在从适用于 Document、Element 或 Node 的库迁移到仅适用于 Document 的库。例如。

从：

```
element.xpath('/a/b/c') # 4Suite 
```

到：

```
xpath.find('/a/b/c', doc) # pydomxpath 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T07:43:51.417

`Node`对象具有`ownerDocument`引用`Document`与节点关联的对象的属性。请参阅[http://www.w3.org/TR/DOM-Level-2-Core/core.html#node-ownerDoc](http://www.w3.org/TR/DOM-Level-2-Core/core.html#node-ownerDoc)。

Python 文档中没有提到此属性，但它是可用的。例子：

```
from xml.dom import minidom

XML = """
<root>
   <x>abc</x>
   <y>123</y>
</root>"""

dom = minidom.parseString(XML)
x = dom.getElementsByTagName('x')[0]

print x
print x.ownerDocument 
```

输出：

```
<DOM Element: x at 0xc57cd8>
<xml.dom.minidom.Document instance at 0x00C1CC60> 
```

# javascript - jquery 确保 mouseup 被触发

> ID：11734549
> 
> 赞同：1
> 
> 时间：2012-07-31T06:45:17.753
> 
> 标签：javascript, jquery, mouseup

我有一个使用 mouseup 和 down 绘制元素的应用程序。问题是，如果由于某种原因在 mousedown 之后没有触发 mouseup 事件（假设我引入了一个取消绘制新元素的转义键），则该元素将是“不完整的”，因此会导致问题。所以我想知道我是否可以在 mousedown 内部使用任何机制来确保在它之后触发 mouseup ，如果没有，则销毁新元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:49:57.473

您将不得不在您能想到的事件上破坏绘图，在绘图时使用 alt+tab 切换窗口，在绘图时计算机在龙卷风中间被闪电击中等。

# wix - Wix：如果找到以前的版本，则显示自定义对话框

> ID：11734551
> 
> 赞同：5
> 
> 时间：2012-07-31T06:45:29.783
> 
> 标签：wix, wix3.5

我想自定义我的安装程序以在已安装先前版本时显示自定义对话框：欢迎对话框后用户应该看到一个自定义对话框`OldVersionDlg`，其中包含找到先前版本并将自动卸载的信息。

但是由于某种原因，`UpgradeVersion`当`null`我在`UI/Publish Dialog`.

以下是基本的代码片段。

**产品.wxs**：

```
<Product Id="*" Version="$(var.Version)" UpgradeCode="$(var.ProductId)"
         Language="1033" Name="$(var.ProductFullName)" Manufacturer="$(var.Manufacturer)">
  <Package Description="$(var.ProductDescription)" InstallerVersion="200" Compressed="yes" 
           Manufacturer="$(var.Manufacturer)" />

  <Property Id="PREVIOUSVERSIONSINSTALLED" Secure="yes" />
  <Upgrade Id="$(var.ProductId)">
    <UpgradeVersion Minimum="1.0.0.0" Maximum="$(var.Version)"
                    Property="PREVIOUSVERSIONSINSTALLED"
                    IncludeMinimum="yes" IncludeMaximum="no" />
  </Upgrade>

  <InstallExecuteSequence>
    <RemoveExistingProducts Before="InstallInitialize" />
  </InstallExecuteSequence>
</Product> 
```

**WixUI_Wizard.wxs**：

```
<Publish Dialog="WelcomeDlg" Control="Next" Event="NewDialog" Value="OldVersionDlg">PREVIOUSVERSIONSINSTALLED</Publish>
<Publish Dialog="WelcomeDlg" Control="Next" Event="NewDialog" Value="SetupTypeDlg">NOT Installed</Publish> 
```

下一步按钮不起作用。我已经签入了`PREVIOUSVERSIONSINSTALLED`之后设置的日志`FindRelatedProducts`。如果我在**Product.wxs**的条件下使用它，那么一切正常。但在 UI 配置中它始终是`null`.

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:37:27.147

该问题是由**WixUI_Wizard.wxs**中的第二行引起的。出于某种原因，WiX 总是使用它。因此，要实现对先前版本的检查，我们需要`PREVIOUSVERSIONSINSTALLED`从第二个条件中排除：

```
<Publish Dialog="WelcomeDlg" Control="Next" Event="NewDialog" Value="OldVersionDlg">PREVIOUSVERSIONSINSTALLED</Publish>
<Publish Dialog="WelcomeDlg" Control="Next" Event="NewDialog" Value="SetupTypeDlg">NOT Installed AND NOT PREVIOUSVERSIONSINSTALLED</Publish> 
```

# winapi - SelectObject 函数如何选择和销毁 GDI 对象

> ID：11734553
> 
> 赞同：1
> 
> 时间：2012-07-31T06:45:31.267
> 
> 标签：winapi, visual-c++, mfc, gdi

由于我是 Visual C++ 的新手，这可能是与选择 GDI 对象相关的一个非常基本的问题。

以下代码片段绘制了一个没有边框的浅灰色圆圈。

```
cPen pen(PS_NULL, 0, (RGB(0,0,0)));
dc.SelectObject(& pen);
CBrush brush (RGB (192,192,192));
dc.SelectObject (&brush);
dc.Ellipse(0,0, 100,100); 
```

我从代码片段中了解到的是，首先创建了一个 Pen 对象，它是一个 NULL Pen，它会使边框消失，然后画笔创建一个灰色圆圈，但是`dc`如果它已经在使用画笔，如何使用 pen？这有点令人困惑。

使用`dc.SelectObject()`两次有什么帮助？如果使用实心画笔对象创建一个灰色的圆圈，创建笔对象有什么帮助，如果它在创建画笔对象时被销毁？这东西到底是怎么工作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T06:54:20.307

SelectObject 函数用于选择五种不同类型的对象进入 DC

1.  笔
2.  刷子
3.  字体
4.  位图和
5.  地区

该文档指出 `The newly selected object replaces the previous object of the same type`. 所以这意味着你可以毫无问题地选择笔和画笔，但你不能选择笔两次。

此外，为了避免资源泄漏，您需要选择旧笔/画笔，无论您之前选择了什么

```
CPen pen(PS_NULL, 0, (RGB(0,0,0)));
CPen *oldPen = dc.SelectObject(& pen);
CBrush brush (RGB (192,192,192));
CBrush *oldBrush = dc.SelectObject (&brush);
dc.Ellipse(0,0, 100,100);

dc.SelectObject(oldPen);
dc.SelectObject(oldBrush); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:54:30.290

DC对象有当前画笔、当前笔、当前字体等。即特定类型的当前对象。因此，您可以同时选择笔和画笔，但不能同时选择两支笔。`SelectObject`在内部看到句柄的类型。

此外，`SelectObject`返回相同类型的先前当前对象，选择您提供的句柄时未选择该对象。您应该保存它并在完成后恢复。

# java - 在迭代元素时获取文档标签名称

> ID：11734554
> 
> 赞同：0
> 
> 时间：2012-07-31T06:45:43.573
> 
> 标签：java, dom

我有这个 XML 文档：

```
<?xml version="1.0" encoding="UTF-16"?>

<root>
<items>
    <item1>
    <tag1>1</tag1>
    <tag2>2</tag2>  
    <tag3>3</tag3>
    </item1>

    <item2>
    <tag1>4</tag1>
    <tag2>5</tag2>  
    <tag3>6</tag3>
    </item2>
</items>
</root> 
```

我想迭代项目元素（item1，item2 ...），并为每个标签获取**标签名称**，然后获取标签的**值**。

我正在使用 DOM 解析器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:50:36.150

对不起，但这不是一个无法解决或复杂的问题，这只是阅读可以在几秒钟内搜索到的[教程。](http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/)

当然，您也可以查看[文档](http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Node.html)，它会为您提供有关名为“getNodeName()”的[便捷方法的提示。](http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Node.html#getNodeName%28%29)

# c# - 处理将数组从 T1 类型转换为 T2 类型的有效方法

> ID：11734555
> 
> 赞同：0
> 
> 时间：2012-07-31T06:45:44.320
> 
> 标签：c#, .net

5 分钟前我有一个真实场景，我需要将 a`Guid[]`变成`object[]`.

最简单快捷的解决方法是输入：

```
var dataset = inputArray.Select(item => (object)item).ToArray(); 
```

可读性和一切，但我不确定它是否非常有效（当然可能是编译器对其进行了一些优化）。

您建议最好从一个类型转到另一个类型（假设它是可转换的，跳过整数解析等）？

**编辑：** `Cast<T>`扩展方法当然也可以使用。

```
var listOfGuids = new Guid[]{Guid.NewGuid(), Guid.NewGuid(), Guid.NewGuid()};
var listOfStrings = new string[]{"foo", "bar"};

var objectListGuidsLinq = listOfGuids.Cast<object>().ToArray();
var objectListStringsLinq = listOfStrings.Cast<object>().ToArray();
var objectListStringsDirect = (object[]) listOfStrings; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T06:58:04.230

在值类型数组的情况下，它们需要被装箱，因此需要您的方法或类似的东西`inputArray.Cast<object>().ToArray()`。

但是，可以将引用类型数组隐式转换为`object[]`.

`OfType`当您有多个类型的数组时，扩展方法对于过滤也很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:02:34.313

我认为你做得对。请检查：[IEnumerable.Cast<>](https://stackoverflow.com/questions/2760804/ienumerable-cast)

似乎 Cast 方法的剂量说明正如您从其名称中所期望的那样工作。

# java - 如何在 Java swing 中查看数据库结果集

> ID：11734561
> 
> 赞同：0
> 
> 时间：2012-07-31T06:45:55.400
> 
> 标签：java, swing, jdbc, jtable, jeditorpane

如何在 Java swing 中查看数据库结果集？我的选择是

1.  乙二胺
2.  表。

查看该文件后，我想将文件保存在`.rtf`或`.pdf`. 这在 Java 桌面应用程序中怎么可能？

**注意：**请勿使用第三方 API 或库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:48:01.090

查看您的结果 - JTable 是您的最佳选择

保存结果，好吧，除非您想使用第三部分库，否则您的选择非常有限，除非您非常熟悉要使用的各种文件格式。

开箱即用，我想说 CVS 很容易实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T06:51:58.813

`JTable`会做得最好，这是显示的`ResultSet`代码`JTable`

```
public static void main(String[] args) throws Exception {
// The Connection is obtained

ResultSet rs = stmt.executeQuery("select * from product_info");

// It creates and displays the table
JTable table = new JTable(buildTableModel(rs));
JOptionPane.showMessageDialog(null, new JScrollPane(table)); // or can you other swing component

// Closes the Connection
} 
```

buildTableModel 方法：

```
public static DefaultTableModel buildTableModel(ResultSet rs)
    throws SQLException {

ResultSetMetaData metaData = rs.getMetaData();

// names of columns
Vector<String> columnNames = new Vector<String>();
int columnCount = metaData.getColumnCount();
for (int column = 1; column <= columnCount; column++) {
    columnNames.add(metaData.getColumnName(column));
}

// data of the table
Vector<Vector<Object>> data = new Vector<Vector<Object>>();
while (rs.next()) {
    Vector<Object> vector = new Vector<Object>();
    for (int columnIndex = 1; columnIndex <= columnCount; columnIndex++) {
        vector.add(rs.getObject(columnIndex));
    }
    data.add(vector);
}

return new DefaultTableModel(data, columnNames);

} 
```

如果不使用**3rd 方 api**，将很难将数据**导出为***pdf*或*rtf*

# android - 如何在画布上保存图像和文本

> ID：11734562
> 
> 赞同：1
> 
> 时间：2012-07-31T06:45:57.413
> 
> 标签：android

我做了一个画布并在画布上画了一个图像我还在上面画了一些文字

帆布。图像和文本现在都是独立的。我想要那个当我

绘制应该打印在图像上的文本。我可以保存现在的图像和文本

在图像上，我想在另一个活动中发送带有文本的图像。

* * *

这是我的代码：

```
 @Override

  protected Void onDraw(Canvas canvas) {

   Bitmap b = BitmapFactory.decodeResource(getResources(),R.drawable.ic);

   canvas.drawBitmap(b,10,10,null);

canvas,drawText("hello this is my image",10,10,null);

   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T06:58:28.837

@sachit。正如您在现实生活中所知道的那样，画布只是一个画笔，您可以使用它在纸上绘画。这里的纸就是你的形象本身。

所以不用担心。只需发送位图 b，它现在是带有文本的图像。

对于发送，您可以将 b 转换为字节数组，例如

```
ByteArrayOutputStream stream = new ByteArrayOutputStream();
            b.compress(Bitmap.CompressFormat.JPEG, 90, stream);
        ByteArray byteArray = stream.toByteArray(); 
```

现在您可以将 byteArray 发送到另一个活动.. 干杯.......

# ios - 应用程序不会在设备和元上运行

> ID：11734571
> 
> 赞同：-1
> 
> 时间：2012-07-31T06:46:29.377
> 
> 标签：ios, xcode

我在这里和苹果的开发论坛都进行了搜索，并遵循了所有建议，但仍然卡住了。

基本上，我的应用程序在模拟器中运行，但在切换到设备（iPod touch）时不会运行。没有错误 - 我从 Xcode 收到“运行完毕”消息。

诀窍是我的另一个应用程序确实在设备上运行。唔。

顺便说一下（这是“元”部分）这个错误非常令人困惑。我不知道在哪里看/读什么。这让我觉得我错过了某个地方的文件。关于解决这些类型的错误的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:57:14.347

天哪，我想通了。

我在 plist 中切换了以下条目：

```
Main storyboard file base name (iPhone) 
```

对此：

```
Main storyboard file base name 
```

做到了。我在 iPod touch 上运行，但无论哪种方式，这似乎都是一个错误，因为 Xcode 可以检查 plist 条目是否与正在运行的设备匹配......

# php - 通过 toArray() 序列化时隐藏列

> ID：11734574
> 
> 赞同：1
> 
> 时间：2012-07-31T06:46:59.310
> 
> 标签：php, orm, doctrine, crud, doctrine-1.2

我有一个简单的问题，我经常使用 Doctrine 1.2 模型的数组序列化版本返回 CRUD 类型的 Ajax 请求。我希望能够在 execute() 结果之后简单地返回 toArray() 方法，但是，这将显示有关我不想公开的模型的数据。一个简单的例子是在我的用户模型上显示密码和盐。虽然我意识到这些已经是散列值，但我不希望它作为 JSON 响应返回。

我翻阅了 Doctrine 1.2 手册，但没有找到任何提供我正在寻找的功能类型的东西。我意识到我可以迭代结果以手动 unset() 我希望隐藏的列，但我希望有一个我忽略的更原生的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:38:53.953

你为什么不建立你自己的`toArray()`？

如果你想这样做，你必须扩展继承自所有 Base* 类的 sfDoctrineRecord 类。[它在 doc 中有描述](http://www.symfony-project.org/doctrine/1_2/en/03-Configuration#chapter_03_configuring_model_building)。

你必须把`configureDoctrine()`里面`config/ProjectConfiguration.class.php`。

然后你会有这样的课程：

```
class myDoctrineRecord extends sfDoctrineRecord
{
} 
```

因此，您可以`toArray()`在此处轻松添加自定义：

```
class myDoctrineRecord extends sfDoctrineRecord
{
  public function toArray($deep = true, $prefixKey = false, array $excludeFields = array())
  {
    // do every thing like the original toArray
    // but when a column match one entry in $excludeFields, don't add it
  }
} 
```

因此，当将`toArray()`方法与第三个参数的字段数组一起使用时，它们将被排除在结果之外。

# c# - 当服务停止/崩溃时在不同的服务中模仿服务状态

> ID：11734575
> 
> 赞同：0
> 
> 时间：2012-07-31T06:47:08.440
> 
> 标签：c#, msmq

我有两个服务托管在两个不同的服务器上。

可以说，服务器 A 上的服务 A 和服务器 B 上的服务 B。我的服务 B 依赖于服务 A。我想实现功能，例如当服务 B 显式崩溃/停止时（由于某种原因），我想要服务 A模仿 B 使服务 A 停止。

我可以知道如何实现此功能吗？

**注意**：我在我的应用程序中捕获了所有可能的异常，但是由于一些数据库问题或一些未处理的异常（在验证环境中没有出现），我需要放置这个功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:59:38.870

你说服务 B 依赖于服务 A？那么如果服务 A 停止工作会发生什么？B 是否也停止工作，还是只是崩溃到处理的异常中？

您可以`BackgroundWorker`在服务 A 中实现一个调用服务 B 中的特定函数并等待回调的函数。如果你把 a`Thread.Sleep()`放在`DoWork`事件中，`BackgroundWorker`你可以让它以设定的时间间隔运行。当`backgroundWorker`没有从函数返回时，您可以停止服务 A。

或者您可以在服务 B 上使用`WCF`a `CallBack function`，但这似乎有点矫枉过正。

# sql-server - MS Access 中的模棱两可的左连接

> ID：11734577
> 
> 赞同：3
> 
> 时间：2012-07-31T06:47:20.983
> 
> 标签：sql-server, tsql, ms-access, jet

我想从 T-SQL 转换以下查询

```
SELECT
    * 
FROM
    A                            LEFT JOIN
    B ON A.field1 = B.field1     LEFT JOIN
    C ON C.field1 = A.field2 AND
         C.field2 = B.field2 
```

到 Jet SQL。
现在 MS Access 不接受模棱两可的查询。我怎样才能做到这一点？我不能把第二个比较放在`WHERE`子句中。为什么？因为我的情况是我正在选择 C ​​中不存在的记录。

[如何从一个表中选择另一张表中不存在的所有记录？](https://stackoverflow.com/questions/2686254/how-to-select-all-records-from-one-table-that-do-not-exist-in-another-table)

现在，您在 MS Access 中是如何做到的？提前感谢您的时间和专业知识。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T08:08:26.870

您需要一个派生表才能在 MS Access 中进行这项工作：

```
SELECT * 
FROM (
   SELECT A.Field1, A.Field2 As A2, B.Field2 
   FROM A 
   LEFT JOIN B ON A.field1 = B.field1) AS x 
LEFT JOIN C ON  x.A2 = C.field1 AND  x.field2= C.field2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:10:28.653

从帮助[LEFT JOIN、RIGHT JOIN 操作](http://office.microsoft.com/en-us/access-help/left-join-right-join-operations-HP001032251.aspx)

> 您可以链接多个 ON 子句。请参阅 INNER JOIN 主题中对子句链接的讨论，以了解这是如何完成的。
> 
> 您还可以使用以下语法在 JOIN 语句中链接多个 ON 子句：

```
SELECT fields 
FROM table1 
     INNER JOIN table2 ON table1.field1 compopr table2.field1 
                          AND ON table1.field2 compopr table2.field2)
                          OR ON table1.field3 compopr table2.field3)]; 
```

但这有效（似乎帮助中有错误）：

```
SELECT * 
FROM A 
     LEFT JOIN B ON A.field1 = B.field1
     LEFT JOIN C ON (C.field1 = A.field2 AND C.field2 = B.field2) 
```

# cuda - CURAND 库 - 编译错误 - 未定义的函数引用

> ID：11734578
> 
> 赞同：5
> 
> 时间：2012-07-31T06:47:22.933
> 
> 标签：cuda, gpu, gpgpu, prng

我有以下代码，我正在尝试使用 nvcc 进行编译。

代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <cuda.h>
#include <curand.h>

int main(void)
{
    size_t n = 100;
    size_t i;
    int *hostData;
    unsigned int *devData;
    hostData = (int *)calloc(n, sizeof(int));
    curandGenerator_t gen;
    curandCreateGenerator(&gen, CURAND_RNG_PSEUDO_MRG32K3A);
    curandSetPseudoRandomGeneratorSeed(gen, 12345);
    cudaMalloc((void **)&devData, n * sizeof(int));
    curandGenerate(gen, devData, n);
    cudaMemcpy(hostData, devData, n * sizeof(int), cudaMemcpyDeviceToHost);
    for(i = 0; i < n; i++)
    {
        printf("%d ", hostData[i]);
    }
    printf("\n");
    curandDestroyGenerator (gen);
    cudaFree ( devData );
    free ( hostData );
    return 0;
} 
```

这是我收到的输出：

```
$ nvcc -o RNG7 RNG7.cu
/tmp/tmpxft_00005da4_00000000-13_RNG7.o: In function `main':
tmpxft_00005da4_00000000-1_RNG7.cudafe1.cpp:(.text+0x6c): undefined reference to `curandCreateGenerator'
tmpxft_00005da4_00000000-1_RNG7.cudafe1.cpp:(.text+0x7a): undefined reference to `curandSetPseudoRandomGeneratorSeed'
tmpxft_00005da4_00000000-1_RNG7.cudafe1.cpp:(.text+0xa0): undefined reference to `curandGenerate'
tmpxft_00005da4_00000000-1_RNG7.cudafe1.cpp:(.text+0x107): undefined reference to `curandDestroyGenerator'
collect2: ld returned 1 exit status 
```

我最初的猜测是，由于某种原因，CURAND 库没有正确安装，或者找不到 curand.h 头文件。

请让我知道我应该寻找什么或如何解决我的问题。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-01T02:51:50.510

@Wilo Maldonado：只需使用链接器标志 -lcurand 和 -L/path/to/cuda/libs 如果您还没有它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:50:33.273

问题不在于头文件，否则会出现编译错误。你有一个链接器错误。您需要告诉链接器在哪里可以找到包含这些函数的对象或库文件。

# c# - 在 C# 中将 int 数组转换为字符串

> ID：11734581
> 
> 赞同：3
> 
> 时间：2012-07-31T06:47:32.217
> 
> 标签：c#

我有一个`int[]`：

```
RXBuffer[0], RXBuffer[1],..., RXBuffer[9] 
```

其中每个值代表一个 ASCII 码，所以 0x31 代表`1`， 0x41 代表`A`。

如何将其转换为 10 个字符的字符串？

到目前为止，我已经尝试过`Data = RxBuffer.ToString();`。但它显示`Data`等于`System.Int32[]`哪个不是我的数据。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T06:52:18.577

假设“int 数组”是 0-9 范围内的值（这是将长度为 10 的“int 数组”转换为 10 个字符的字符串的唯一方法）——有点奇怪：

```
string s = new string(Array.ConvertAll(RXBuffer, x => (char)('0' + x))); 
```

但非常有效（`char[]`自动调整大小，字符串转换仅使用数学完成，而不是`ToString()`）。

* * *

编辑：通过明确这些实际上是 ASCII 代码的修订，它变得更简单：

```
string s = new string(Array.ConvertAll(RXBuffer, x => (char)x)); 
```

虽然坦率地说，如果值是 ASCII（甚至 unicode），最好将其存储为`char[]`; 这涵盖了相同的范围，占用了一半的空间，并且只是：

```
string s = new string(RXBuffer); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T06:54:43.053

LolCoder 所有你需要的是：

```
string.Join("",RXBuffer); 
```

============== 或者==================

```
 int[] RXBuffer = {0,1,2,3,4,5,6,7,8,9};
        string result  =  string.Join(",",RXBuffer); 
```

# jsf-2 - 使用分页时表格不显示数据

> ID：11734582
> 
> 赞同：0
> 
> 时间：2012-07-31T06:47:35.337
> 
> 标签：jsf-2, primefaces

我有一个这样的

```
<h:form id="logForm" prependId="false">
    <div class="leftcol">
    ....
    <h:commandButton value="Apply Filters"
        action="#{exporterReview.applyFilterAction}">    
    </h:commandButton><br></br><br></br>
    ....
    </div>

    <div class="rightcol1" >
        <p:dataTable  var="exporter" 
                      value="#{exporterReview.exporters}"
                      paginator="true" rows="5"
                      height="400" paginatorPosition="top"
                      emptyMessage="#{exporterReview.noExporterFound}">

            <p:column>

                <div style="....">
                    <h:graphicImage value="#{exporter.imgPath}" />
                </div>

                <div style="...">
                    <h:commandButton value="Update" 
                                     action="#{exporterReview.updateExporter}"         
                                     rendered="#{login.updateState}"  
                                     style="... ">
                        <f:param name="exporterid" 
                                 value="#{exporter.exporterId}" />
                    </h:commandButton>
                </div>

                <div class="arrowbuttons">
                    <span class="arrow"></span>
                </div>
                <p:spacer height="10" width="20"/>
                <h:commandButton  value="#{exporter.organizationName}" 
                                  action="#{exporterReview.viewExporter}" 
                                  style="...">
                    <f:param name="exporterid" value="#{exporter.exporterId}" />
                    <f:param name="disableLink" value="#{exporter.disableLink}" />
                </h:commandButton>

                <div style='padding-top:10px'>
                    <h:outputLabel value="City: "  style="color: #1c6ace;"/>
                    <h:panelGroup rendered="#{not exporter.disableLink}">
                        <h:commandLink value="#{exporter.cityName}" 
                                       style="text-decoration: underline" 
                                       disabled="#{exporter.disableLink}" 
                                       onclick="openCityPopup(#{exporter.cityId});" >
                        </h:commandLink>
                    </h:panelGroup>

                    <h:panelGroup rendered="#{exporter.disableLink}">
                        <h:outputText value="#{exporter.cityName}"></h:outputText>
                    </h:panelGroup>
                </div>

                <div style='padding-top:3px'>
                    <h:outputLabel value="Email Address: " style="color: #1c6ace;"/>
                    <a href="mailto:#{exporter.emailAddress}">
                        <h:outputText value="#{exporter.emailAddress}" 
                                      style="..">
                        </h:outputText>
                    </a>
                </div>

                <div style='padding-top:3px'>
                    <h:outputText value="#{exporter.categoryDesc}" 
                                  escape="false" />
                </div>

                <div class="horizontalline"></div>
            </p:column>

        </p:dataTable>
    </div>
</h:form> 
```

这是过滤方法

```
public void applyFilterAction() {
    ....
    //Setting whereParam so that whenever user navigate from page And return back
    // the grid is populated with the previous search criteria
    session.setAttribute("settingWhereParam", whereParam);
    getExporterGrid();

} //end of applyFilterAction

private void getExporterGrid() {
    ....
    exporters.add(new Exporter(Datatable values));

} //end of getExporterGrid 
```

问题是当我在第一页并进行搜索时，一切正常。这是第一张照片。 ![在此处输入图像描述](../Images/fd26ec7c561a382a384ec2a97cf0a603.png)

然后如果我应用搜索然后它变成

![在此处输入图像描述](../Images/5e1b6cc86687b2a05878c13993602688.png)

但是，如果我进行分页，请说转到第 4 页然后应用搜索然后没有结果显示

![在此处输入图像描述](../Images/5389320cb21673c0551a0f7154c720f0.png)

但随后什么都没有显示

![在此处输入图像描述](../Images/5b93a78c47920f75c0b6faf91316362d.png)

为什么会这样？我做错了什么？我正在使用 Prime 面孔 2.2。它是一个旧程序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:21:56.973

我不确定这是否适用于 primefaces 2.2，但在版本 3+ 中，您可以指定更新属性。

你的 commandButton 看起来像这样：

```
<h:commandButton value="Apply Filters" action="#{exporterReview.applyFilterAction}" update="@form"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T07:08:00.073

我做的 ：）。其实我做了一个解决方法。我做了什么，我在我的过滤器按钮上使用了 onClick 事件。喜欢

```
<h:commandButton id="filterButton"
                 value="Apply Filters"
                 style=""
                 action="#{exporterReview.applyFilterAction}"
                 onclick="filterButtonClick(event)" /> 
```

现在，当单击按钮时，首先我的客户端代码将运行。所以我得到所有的值，然后使用ajax调用servlet，并将结果保存在会话对象中。之后，我的服务器端代码将运行，并调用我的操作方法，其中我简单地返回同一页面的 url。

```
public String applyFilterAction() {

    return "Exporter_Review?faces-redirect=true";

} //end of applyFilterAction() 
```

现在，当页面调用时，我只需检查会话中的结果。如果存在会话对象，则只需从该对象获取值并显示结果。当我离开页面时，我只是将 null 放在针对对象的会话中，现在使用默认值。现在一切正常:)

# debugging - 为什么核心文件大于虚拟内存？

> ID：11734583
> 
> 赞同：4
> 
> 时间：2012-07-31T06:47:36.040
> 
> 标签：debugging, coredump

我有一个多线程程序正在运行，它在一两天后崩溃。此外，核心转储的 gdb 回溯不会导致任何地方。它崩溃的地方没有符号。

现在生成核心文件的机器拥有 3 Gigs 的物理内存和 5 Gigs 交换空间。但是我们得到的核心转储大约是 25 Gigs。核心转储实际上不是内存转储吗？为什么核心转储很大？

谁能给我更多指导如何在这种情况下进行调试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T08:13:53.683

如果您运行的是 64 位操作系统，那么您可以拥有超过可用物理内存 + 交换空间数倍的文件支持映射。

从内核版本 2.6.23 开始，Linux 提供了一种机制来控制核心转储文件中包含的内容，称为*核心转储过滤器*。过滤器的值是通过文件操作的位域`/proc/<pid>/coredump_filter`（参见`core(5)`手册页）：

*   位 0 ( `0x01`) - 匿名私有映射（例如动态分配的内存）
*   位 1 ( `0x02`) - 匿名共享映射
*   位 2 ( `0x04`) - 文件支持的私有映射
*   位 3 ( `0x08`) - 文件支持的共享映射（例如共享库）
*   位 4 ( `0x10`) - ELF 标头
*   位 5 ( `0x20`) - 私有大页面
*   位 6 ( `0x40`) - 共享大页面

默认值`0x33`对应于转储所有匿名映射以及 ELF 标头（但仅当内核使用 编译时`CONFIG_CORE_DUMP_DEFAULT_ELF_HEADERS`）和私有大页面。从此文件中读取会返回过滤器的十六进制值。写入一个新的十六进制值来`coredump_filter`更改特定进程的过滤器，例如，启用所有可能的映射的转储：

```
echo 0x7f > /proc/<pid>/coredump_filter 
```

（`<pid>`进程的PID在哪里）

核心转储过滤器的值继承于由`fork()`.

`init`一些 Linux 发行版可能会在操作系统启动阶段的早期更改进程的过滤器值，例如启用转储文件支持的映射。这将影响以后启动的任何进程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T06:51:23.947

核心转储不仅包含进程内存的状态。有关核心转储中包含的其他信息的示例（在 Linux 上），请参阅[https://stackoverflow.com/a/5321564/91757](https://stackoverflow.com/a/5321564/91757)上的答案。

# php - 使用自定义流包装器作为 PHP 的 http:// 流包装器的测试存根

> ID：11734592
> 
> 赞同：7
> 
> 时间：2012-07-31T06:48:03.443
> 
> 标签：php, stream, stream-wrapper

我正在编写一个自定义流包装器，以用作使用内置`http://`流包装器的 HTTP 客户端类的单元测试中的存根。

具体来说，我需要`'wrapper_data'`通过调用`stream_get_meta_data`自定义流包装器创建的流来控制键中返回的值。不幸的是，关于自定义流包装器的文档很糟糕，而且 API 似乎不直观。

自定义包装器中的什么方法控制元`wrapper_data`响应？

`var_dump(stream_get_meta_data($stream));`使用底部的类，当我在使用自定义包装器创建的流上时，我只能得到以下结果......

```
array(10) {
  'wrapper_data' =>
  class CustomHttpStreamWrapper#5 (3) {
    public $context =>
    resource(13) of type (stream-context)
    public $position =>
    int(0)
    public $bodyData =>
    string(14) "test body data"
  }
  ... 
```

但是我需要诱使包装器在元数据检索中产生类似以下内容，以便我可以测试客户端类对真实`http://`流包装器返回的数据的解析......

```
array(10) {
  'wrapper_data' => Array(
       [0] => HTTP/1.1 200 OK
       [1] => Content-Length: 438
   )
   ... 
```

这是我目前用于自定义包装器的代码：

```
class CustomHttpStreamWrapper {

    public $context;
    public $position = 0;
    public $bodyData = 'test body data';

    public function stream_open($path, $mode, $options, &$opened_path) {
        return true;
    }

    public function stream_read($count) {
        $this->position += strlen($this->bodyData);
        if ($this->position > strlen($this->bodyData)) {
            return false;
        }
        return $this->bodyData;
    }

    public function stream_eof() {
        return $this->position >= strlen($this->bodyData);
    }

    public function stream_stat() {
        return array('wrapper_data' => array('test'));
    }

    public function stream_tell() {
        return $this->position;
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-31T08:15:21.950

`stream_get_meta_data`在[ext/standard/streamfunc.c](http://svn.php.net/viewvc/php/php-src/trunk/ext/standard/streamsfuncs.c?view=log)中实现。相关部分是

```
if (stream->wrapperdata) {
    MAKE_STD_ZVAL(newval);
    MAKE_COPY_ZVAL(&stream->wrapperdata, newval);

    add_assoc_zval(return_value, "wrapper_data", newval);
} 
```

即无论zval stream->wrapperdata 持有什么，都被$retval["wrapper_data"]“复制”到/引用。
您的自定义包装代码由[main/streams/userspace.c](http://svn.php.net/viewvc/php/php-src/trunk/main/streams/userspace.c?view=log) “处理” `user_wrapper_opener`。你有

```
/* set wrapper data to be a reference to our object */
stream->wrapperdata = us->object; 
```

`us->object`“是”为流实例化的自定义包装器的实例。除此之外，我还没有找到影响`stream->wrapperdata`用户空间脚本的方法。但是，如果您只需要and ，
您可以实现[Iterator](http://docs.php.net/manual/en/class.iterator.php) / [IteratorAggregate](http://docs.php.net/manual/en/class.iteratoraggregate.php)和/或[ArrayAccess](http://docs.php.net/manual/en/class.arrayaccess.php)。 例如`foreach($metadata['wrapper_data'] ...)``$metadata['wrapper_data'][$i]`

```
<?php
function test() {
    stream_wrapper_register("mock", "CustomHttpStreamWrapper") or die("Failed to register protocol");
    $fp = fopen("mock://myvar", "r+");
    $md = stream_get_meta_data($fp);

    echo "Iterator / IteratorAggregate\n";
    foreach($md['wrapper_data'] as $e) {
        echo $e, "\n";
    }

    echo "\nArrayAccess\n";
    echo $md['wrapper_data'][0], "\n";

    echo "\nvar_dump\n";
    echo var_dump($md['wrapper_data']);
}

class CustomHttpStreamWrapper implements IteratorAggregate, ArrayAccess  {
    public $context;
    public $position = 0;
    public $bodyData = 'test body data';

    protected $foo = array('HTTP/1.1 200 OK', 'Content-Length: 438', 'foo: bar', 'ham: eggs');
    /* IteratorAggregate */
    public function getIterator() {
        return new ArrayIterator($this->foo);
    }
    /* ArrayAccess */
    public function offsetExists($offset) { return array_key_exists($offset, $this->foo); }
    public function offsetGet($offset ) { return $this->foo[$offset]; }
    public function offsetSet($offset, $value) { $this->foo[$offset] = $value; }
    public function offsetUnset($offset) { unset($this->foo[$offset]); }

    /* StreamWrapper */
    public function stream_open($path, $mode, $options, &$opened_path) {
        return true;
    }

    public function stream_read($count) {
        $this->position += strlen($this->bodyData);
        if ($this->position > strlen($this->bodyData)) {
            return false;
        }
        return $this->bodyData;
    }

    public function stream_eof() {
        return $this->position >= strlen($this->bodyData);
    }

    public function stream_stat() {
        return array('wrapper_data' => array('test'));
    }

    public function stream_tell() {
        return $this->position;
    }
}

test(); 
```

印刷

```
Iterator / IteratorAggregate
HTTP/1.1 200 OK
Content-Length: 438
foo: bar
ham: eggs

ArrayAccess
HTTP/1.1 200 OK

var_dump
object(CustomHttpStreamWrapper)#1 (4) {
  ["context"]=>
  resource(5) of type (stream-context)
  ["position"]=>
  int(0)
  ["bodyData"]=>
  string(14) "test body data"
  ["foo":protected]=>
  array(4) {
    [0]=>
    string(15) "HTTP/1.1 200 OK"
    [1]=>
    string(19) "Content-Length: 438"
    [2]=>
    string(8) "foo: bar"
    [3]=>
    string(9) "ham: eggs"
  }
} 
```

# javascript - JS URL持久化创建模板

> ID：11734595
> 
> 赞同：0
> 
> 时间：2012-07-31T06:48:11.687
> 
> 标签：javascript, jquery, persistence

我有一个元素的交互式 UI，我被鼓励专门使用 div 和 span，并避免使用复选框。我已将该站点转换为相同的功能，但对持久性一开始并不了解，但使用复选框，考虑到“检查”或“未检查”的想法，它似乎很容易接近。我将如何开始使用这种方法来跟踪每个元素的可见性？

[这](http://specialorange.org/resume)是我试图在其上实现持久性的页面。

以前的实现（不是我的代码，因为我是 JS 和持久性的新手）使用以下内容：

```
// Persistence
//¿¿??
var formvals = {};
var keyval = location.search.replace('?', '').split('&');
$.each(keyval, function () {
    var splitval = this.split('=');
    formvals[splitval[0]] = splitval[1];
});

$.each($('form')[0].elements, function () {
    var key = $(this).attr('name');
    if (key && formvals[key]) {
        $('#' + key).val(formvals[key]);
    } else {
        if ($(this).attr('type') == 'checkbox') {
          $('#'+key)[0].checked = false;
        }
    }
}); 
```

我想知道如何使用元素的可见性来帮助开发不同的模板。

我找不到任何有关 URL 持久性的介绍，而且我不太确定前面的代码做了什么，因此非常感谢任何解释或指导。

如果您需要更多信息，请询问，希望您能帮助我走上正确的道路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:15:46.443

如果 URL 会像`http://site.com/page.html?id_block_to_click1=1&id_block_to_click2=1`它应该工作

```
$(function(){
    var formvals = {};
    var keyval = location.search.replace('?', '').split('&');

    $.each(keyval, function () {
        var splitval = this.split('=');
        formvals[splitval[0]] = splitval[1];
    });

    $.each(formvals, function(key,val){
        if (val == 1) {
            $('#'+key).click();
        }
    })
}); 
```

# xslt - 使用 XSLT 在同一节点中进行多次替换

> ID：11734596
> 
> 赞同：0
> 
> 时间：2012-07-31T06:48:12.327
> 
> 标签：xslt, xslt-1.0

我的输入是：

```
<w:body>
 <w:p>
 <w:pPr>
    <w:pStyle w:val="paragraph"/>
  </w:pPr>
 <w:r><w:t>1274394 The milk costs , $1.99 [12] test Figure 1, Table 1</w:t></w:r>
</w:p>
<w:p>
<w:pPr>
<w:pStyle w:val="paragraph"/>
</w:pPr>
<w:r><w:t>sample text Figure 1 and [1]</w:t></w:r>
</w:p>
</w:body> 
```

我想使用 XSLT "analyze-string" 得到如下输出

```
<w:body>
<w:p>
<w:pPr>
   <w:pStyle w:val="paragraph"/>
 </w:pPr>
<w:r><w:t>1274394 The milk costs , $1.99 <ref>[12]</ref> test <fig>Figure 1</fig>, <tab>Table 1</tab></w:t></w:r>
</w:p>
<w:p>
<w:pPr>
<w:pStyle w:val="paragraph"/>
</w:pPr>
<w:r><w:t>sample text Figure 1 and [1]</w:t></w:r>
</w:p>
</w:body> 
```

XSLT 如下：

```
<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="w:t/text()">
 <xsl:variable name="phase1">
  <xsl:apply-templates select="." mode="fig" />
 </xsl:variable>
 <xsl:variable name="phase2">
  <xsl:apply-templates select="." mode="tab" />
 </xsl:variable>
  <xsl:apply-templates select="$phase1" mode="ref" />
</xsl:template>

<xsl:template match="text()" mode="fig">
 <xsl:analyze-string select="." regex="Figure (\d{{1,2}})">
 <xsl:matching-substring>
  <fig>
   <xsl:value-of select="." />
  </fig>
 </xsl:matching-substring>
 <xsl:non-matching-substring>
  <xsl:value-of select="." />
 </xsl:non-matching-substring>
 </xsl:analyze-string>
</xsl:template>

<xsl:template match="text()" mode="ref">
 <xsl:analyze-string select="." regex="\[(\d{{1,2}})\]">
 <xsl:matching-substring>
  <ref>
   <xsl:value-of select="." />
  </ref>
 </xsl:matching-substring>
 <xsl:non-matching-substring>
  <xsl:value-of select="." />
 </xsl:non-matching-substring>
 </xsl:analyze-string>
</xsl:template>
    <xsl:template match="text()" mode="tab">
 <xsl:analyze-string select="." regex="Table (\d{{1,2}})">
 <xsl:matching-substring>
  <tab>
   <xsl:value-of select="." />
  </tab>
 </xsl:matching-substring>
 <xsl:non-matching-substring>
  <xsl:value-of select="." />
 </xsl:non-matching-substring>
 </xsl:analyze-string>
</xsl:template>
<xsl:template match="@*|*|comment()|processing-instruction()" mode="ref">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()" mode="ref"/>
 </xsl:copy>
</xsl:template>
</xsl:stylesheet> 
```

使用上面的 XSLT 我可以替换 Fig 和 ref，替换表我正在使用 Phase2 变量但我没有得到输出，有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:24:17.873

看起来你错过了管道设计的重点。在管道中，您将一个阶段/阶段的输出馈送到下一个阶段的输入。

**如果您希望保留相同的管道设计，请使用此 XSLT 2.0 样式表...**

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:fn="http://www.w3.org/2005/xpath-functions"
  xmlns:w="www"
  exclude-result-prefixes='xsl fn'>
<xsl:output method="xml" indent="yes"/>

<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="w:t/text()">
 <xsl:variable name="phase1">
  <xsl:apply-templates select="." mode="fig" />
 </xsl:variable>
 <xsl:variable name="phase2">
  <xsl:apply-templates select="$phase1" mode="tab" />
 </xsl:variable>
  <xsl:apply-templates select="$phase2" mode="ref" />
</xsl:template>

<xsl:template match="text()" mode="fig">
 <xsl:analyze-string select="." regex="Figure (\d{{1,2}})">
 <xsl:matching-substring>
  <fig>
   <xsl:value-of select="." />
  </fig>
 </xsl:matching-substring>
 <xsl:non-matching-substring>
  <xsl:value-of select="." />
 </xsl:non-matching-substring>
 </xsl:analyze-string>
</xsl:template>

<xsl:template match="text()" mode="tab">
 <xsl:analyze-string select="." regex="Table (\d{{1,2}})">
 <xsl:matching-substring>
  <tab>
   <xsl:value-of select="." />
  </tab>
 </xsl:matching-substring>
 <xsl:non-matching-substring>
  <xsl:value-of select="." />
 </xsl:non-matching-substring>
 </xsl:analyze-string>
</xsl:template>

<xsl:template match="text()" mode="ref">
 <xsl:analyze-string select="." regex="\[(\d{{1,2}})\]">
 <xsl:matching-substring>
  <ref>
   <xsl:value-of select="." />
  </ref>
 </xsl:matching-substring>
 <xsl:non-matching-substring>
  <xsl:value-of select="." />
 </xsl:non-matching-substring>
 </xsl:analyze-string>
</xsl:template>

<xsl:template match="@*|*|comment()|processing-instruction()" mode="tab">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()" mode="tab"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="@*|*|comment()|processing-instruction()" mode="ref">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()" mode="ref"/>
 </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

**然而，在文本节点上有 3 个类似的转换，我建议转向通用的参数化模板设计，访问 fig/tab/ref 类型元素及其文本模式的查找表。**根据时间的不同，我可能会也可能不会用这样的设计样式表更新这个问题。

## 更新

**这是commpon模板设计的样式表...**

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:fn="http://www.w3.org/2005/xpath-functions"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:so="http://stackoverflow.com/questions/11734596"
  xmlns:w="www"
  exclude-result-prefixes='xsl fn xs so'>
<xsl:output method="xml" indent="yes"/>

<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="w:t/text()">
  <xsl:call-template name="parse-text">
   <xsl:with-param name="raw-text" select="." />
  </xsl:call-template>  
</xsl:template>

<so:markup-lexicon>
 <so:map pattern="Figure (\d{1,2})" markup="fig" />
 <so:map pattern="Table (\d{1,2})"  markup="tab" />
 <so:map pattern="\[(\d{1,2})\]"    markup="ref" />
</so:markup-lexicon>

<xsl:template name="parse-text">
 <xsl:param name="raw-text" as="xs:string" />
 <xsl:variable name="m" select="
   document('')/*/so:markup-lexicon/so:map
   [fn:matches(current(),@pattern)]" as="element()*"/>
 <xsl:choose> 
  <xsl:when test="$m">
   <xsl:call-template name="analyze-wp-text">
    <xsl:with-param name="raw-text" select="." />
    <xsl:with-param name="markup"   select="$m[1]/@markup" />
    <xsl:with-param name="pattern"  select="$m[1]/@pattern" />
   </xsl:call-template>
  </xsl:when> 
  <xsl:otherwise> 
   <xsl:value-of select="$raw-text" />
  </xsl:otherwise> 
 </xsl:choose> 
</xsl:template>

<xsl:template name="analyze-wp-text">
 <xsl:param name="raw-text" as="xs:string" />
 <xsl:param name="markup"   as="xs:string" />
 <xsl:param name="pattern"  as="xs:string" />
 <xsl:analyze-string select="$raw-text" regex="{$pattern}">
 <xsl:matching-substring>
  <xsl:element name="{$markup}">
   <xsl:value-of select="." />
  </xsl:element>
 </xsl:matching-substring>
 <xsl:non-matching-substring>
  <xsl:call-template name="parse-text">
   <xsl:with-param name="raw-text" select="." />
  </xsl:call-template>  
 </xsl:non-matching-substring>
 </xsl:analyze-string>
</xsl:template>

</xsl:stylesheet> 
```

**两种样式表都已经用 Saxon 进行了测试，它们产生了相同的输出......**

```
<w:body xmlns:w="www">
   <w:p>
      <w:pPr>
         <w:pStyle w:val="paragraph"/>
      </w:pPr>
      <w:r>
         <w:t>1274394 The milk costs , $1.99 <ref>[12]</ref> test <fig>Figure 1</fig>, <tab>Table 1</tab>
         </w:t>
      </w:r>
   </w:p>
   <w:p>
      <w:pPr>
         <w:pStyle w:val="paragraph"/>
      </w:pPr>
      <w:r>
         <w:t>sample text <fig>Figure 1</fig> and <ref>[1]</ref>
         </w:t>
      </w:r>
   </w:p>
</w:body> 
```

# c++ - 没有花括号的“if”块使后续的“else if”嵌套

> ID：11734604
> 
> 赞同：22
> 
> 时间：2012-07-31T06:48:34.727
> 
> 标签：c++, c, if-statement, nested-if

AFAIK，如果没有提供大括号“if”块，则其中仅考虑 1 个语句。例如

```
if(..)
  statement_1;
  statement_2; 
```

不考虑选项卡，仅`statement_1`在`if`块内考虑。

以下代码与此不符：

```
int main ()
{
  if(false)  // outer - if
    if(false)  // nested - if
      cout << "false false\n";
  else if(true)
    cout << "true\n";
} 
```

上面的代码不打印任何东西。它应该已经打印出来了`"true"`。
它似乎`else if`自动嵌套在*外部* `if`块内。`g++ -Wall`发出警告，但这不是这里的问题。放置花括号后，一切都会按预期进行。

为什么会有这种不同的行为？
[GCC 演示：[不带大括号](http://ideone.com/0v0aD)和[带大括号](http://ideone.com/k7L5Z)]。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-07-31T06:51:14.177

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T06:52:17.970

因为`else`实际上是与*内部* `if`分组，而不是外部分组。它实际上被解析为

```
int main ()
{
  if(false)  // outer - if (never gets executed)
  { 
    if(false)  // nested - if
    {
        cout << "false false\n";
    } else if(true) {
        cout << "true\n";
    }
  }
} 
```

您可以通过明确地将大括号放在您想要的位置来解决问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T06:51:30.317

它不应该打印任何东西。它等价于这个，因为第二个 if/else if 是属于第一个 if 的一个块：

```
 if(false) {
    if(false)  // nested - if
      cout << "false false\n";
    else if(true)
      cout << "true\n";
  } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-31T08:03:13.283

从 C 解析器的角度来看，这很自然。

解析器在解析 if 语句时，首先解析条件表达式，然后解析条件后的第一个语句，然后查找*else*关键字，如果存在*else*，则解析第二个（替代）语句。

但是，第一个语句也是一个 if 语句，因此解析器递归地调用“if-parser”（在测试*else*关键字之前！）。此递归调用完全解析内部 if-else 语句（包括*else*），并将标记位置移动到整个代码片段的“末尾”。

任何实现替代行为的尝试都应该涉及“外部”和“内部”if 解析器之间的一些额外通信：外部解析器应该通知“内部”不要贪婪（即不要吃*else*语句）。这会给语言语法增加额外的复杂性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T06:56:36.533

`else`语句总是附加到最近的`if`。没有分支嵌套`if`本身不会形成有意义的语句，所以解析器继续。

# google-app-engine - 任务排队，重试时没有任何反应（无日志）

> ID：11734606
> 
> 赞同：1
> 
> 时间：2012-07-31T06:48:37.113
> 
> 标签：google-app-engine, task-queue

我注意到超过 1,000 个任务在 Google App Engine 的任务队列中排队。当我点击“立即运行”时，似乎什么都没有发生，日志条目中没有错误等。我仔细检查了一切，但一切似乎都很好。对我来说唯一可疑的是在任务队列控制台的“上一个运行”选项卡下，它显示“最后一个 http 响应代码：404”。尽管有 404，但 URL 似乎很好，我可以在浏览器中调用它。此外，类似的任务也会按预期运行。没有日志，我不知道还要检查什么。

有些任务之前可能已经失败，但在修复之后，该错误应该消失了。

我正在使用 Java App Engine SDK 1.7.0 和这样的自定义队列：

```
<queue>
    <name>data-import</name>
    <rate>1/s</rate>
    <bucket-size>3</bucket-size>
    <max-concurrent-requests>1</max-concurrent-requests>
</queue> 
```

那么，有什么线索吗？或者还有什么要检查的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:10:03.463

您是否仍然遇到问题？您使用的是主/从还是高复制？

您可以报告错误并提供您的应用程序 ID。

# c# - ParameterInfo.IsLcid 或 ParameterInfo.IsRetval 何时为真？

> ID：11734607
> 
> 赞同：5
> 
> 时间：2012-07-31T06:48:39.393
> 
> 标签：c#, reflection

我在谷歌搜索时在 Stack Overflow 中找到了这个问题，但它已被删除。所以我再次列出这个问题。

由于我在 BCL 中找不到`LcidAttribute`or `RetvalAttribute`，我猜 C# 没有提供对语言环境标识符参数和返回值参数的支持。

是这样吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T09:33:01.197

它们与[ParameterAttributes 枚举](http://msdn.microsoft.com/en-us/library/system.reflection.parameterattributes.aspx)相关联。它在元数据中用于方法的参数，只有编译器可以发出 [modopt]。

我不知道实际执行此操作的编译器。我对背景有一个不错的猜测，这些属性也用于 IDL。这是一种用于 COM 和 RPC 的接口描述语言。拥有此选项可确保 .NET 元数据也可以描述以 IDL 编写并可以出现在类型库中的声明类型。

[lcid] 属性[在此处描述](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367067%28v=vs.85%29.aspx)。它实际上并没有描述用法，我自己也从未使用过。不知道为什么要使用它。

[retval] 属性[在此处描述](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367158%28v=vs.85%29.aspx)。在 COM 自动化方法声明中非常重要，它标记了返回方法值的参数。并被 Tlbimp.exe 之类的工具使用，它会重写方法以使该参数成为返回值类型。

# jquery - 如何使用带有exploting效果的jquery慢慢隐藏div

> ID：11734609
> 
> 赞同：-3
> 
> 时间：2012-07-31T06:48:48.397
> 
> 标签：jquery

我是编程新手请帮助我使用带有exploting效果的jquery慢慢隐藏div

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:50:47.983

```
jQuery("#some_id").hide("explode", 5000); 
```

[http://docs.jquery.com/UI/Effects/Explode](http://docs.jquery.com/UI/Effects/Explode)

[http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:01:01.270

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>    
$("#divId").hide('explode',1000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T07:10:23.397

隐藏

```
 $("#divId").hide('explode',1000); 
```

以显示

```
$("#divId").show('explode',1000); 
```

# c# - List的深拷贝 带扩展方法

> ID：11734613
> 
> 赞同：1
> 
> 时间：2012-07-31T06:49:06.570
> 
> 标签：c#, extension-methods, clone

我有这门课：

```
public class Person : ICloneable
{
    public string FirstName { get; set; }
    public string LastName { get; set; }

    public object Clone()
    {
        return this;
    }
} 
```

扩展方法：

```
public static class MyHelper
{
    public static IEnumerable<T> Clone<T>(this IEnumerable<T> collection) where T : ICloneable
    {
        return collection.Select(item => (T)item.Clone());
    }
} 
```

我想在这种情况下使用它：

```
var myList = new List<Person>{ 
    new Person { FirstName = "Dana", LastName = "Scully" },
    new Person{ FirstName = "Fox", LastName = "Mulder" }
};

List<Person> myCopy = myList.Clone().ToList<Person>(); 
```

当我在“即时窗口”中更改 的值时`myCopy`，原始列表也发生了变化。

我希望两个列表都完全独立

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T06:52:19.203

你的实现`Clone`是错误的。

尝试这个：

```
public object Clone()
{
    return MemberwiseClone();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:54:13.350

除了类中方法的问题之外，您`Clone`还`Person`需要在扩展方法中返回一个新列表

```
return collection.Select(item => (T)item.Clone()).ToList(); 
```

这是因为该`Select`方法来自使用延迟执行的 Linq。如果您更改原始列表，则“myCopy”列表也会更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T06:50:20.683

您的克隆方法返回相同的对象。

你应该像这样实现它

```
public class Person : ICloneable
{
    public string FirstName { get; set; }
    public string LastName { get; set; }

    public object Clone()
    {
        return new Person { FirstName = this.FirstName, LastName = this.LastName };
    }
} 
```

# c# - 实体框架不返回值

> ID：11734614
> 
> 赞同：0
> 
> 时间：2012-07-31T06:49:06.460
> 
> 标签：c#, entity-framework-4

尝试从空记录中选择值：

```
 var id = (from transactions in testTransactions.Transactions
                                      orderby transactions.TransID descending select transactions.TransID).First(); 
```

我怎样才能给一个默认值，然后表是空的。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:53:22.553

如果该项目根本不存在，您可以使用 first 或 default 尝试此操作，它会给出 null

```
 var id = (from transactions in testTransactions.Transactions
                                          orderby transactions.TransID descending select transactions.TransID).FirstOrDefault();
if(id!=null)
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:03:43.193

如果您在 IF 行之前有错误，也许您必须检查您的类 testTransaction 并添加到所有可能为 null 的文件中，如下所示

```
public string? MyVal{get;set;} 
```

但是，如果您使用 EF 设计器，它们必须自动创建所有类型，并且您必须更改其他内容。

# java - 在java中找到模式

> ID：11734615
> 
> 赞同：-3
> 
> 时间：2012-07-31T06:49:09.670
> 
> 标签：java

我需要找到在给定字符串或什么中找到以下模式的方法。`#8226:`. 这里的数字可以是任何东西，应该以 # 开头，以 : 结尾，并且应该包含 4 个数字（4 位数字）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T06:53:40.950

可以用正则表达式来完成

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class FindPattern {
    public static void main(String[] args) {
        Pattern pattern = Pattern.compile("#[0-9]{4}:");

        String text = "#1233:#3433:abc#3993: #a343:___#8888:ki";
        Matcher matcher = pattern.matcher(text);
        while (matcher.find()) {
            System.out.println(matcher.group());
        }

    }
} 
```

输出是：

```
#1233:
#3433:
#3993:
#8888: 
```

# c++ - 检查 QPainterPath 中是否存在点

> ID：11734618
> 
> 赞同：6
> 
> 时间：2012-07-31T06:49:16.767
> 
> 标签：c++, algorithm, qt

我有一个应用程序，我在场景中放置了几条曲线。我正在寻找一种简单的方法来检测用户是否按下了线路。当我画多条线时太不准确了`boundingRect()`。`intersects()`所以我做了这个功能，除了线条是垂直的，它就像一个梦一样工作。

`selectionMargin`是用户设置的全局变量（默认值 = 0.5）。它会调整边距，以确保选择检查的准确性。名称基于每个子线的线性函数，`y = ax + b`。Pos 是 mousePressEvent 的位置。

```
bool GraphApp::pointInPath(QPainterPath path, QPointF pos)
{
    qreal posY = pos.y();
    qreal posX = pos.x();

    for (int i = 0; i < path.elementCount()-1; ++i) {
        if (posX < path.elementAt(i + 1).x && posX > path.elementAt(i).x) {
            qreal dy = path.elementAt(i + 1).y - path.elementAt(i).y;
            qreal dx = path.elementAt(i + 1).x - path.elementAt(i).x;
            qreal a = dy / dx;
            qreal b = path.elementAt(i).y - (path.elementAt(i).x * a);

            if (selectionMargin == 0.0)
                selectionMargin = 0.5;

            qreal lowerBound = (a * posX + b) + selectionMargin;
            qreal upperBound = (a * posX + b) - selectionMargin;

            if (posY < lowerBound && posY > upperBound)
                return true;
        }
    }
    return false;
} 
```

因此，当我从垂直线覆盖的区域发送 mousePressEvent 时，该函数似乎返回 false。我的第一个想法是 if 句：

```
if (posX < path.elementAt(i + 1).x && posX > path.elementAt(i).x) 
```

关于如何在没有 if 句的情况下实现这一点的任何其他想法？

我还看到其他人正在努力寻找一种好方法来检查 a 是否`QPainterPath`包含一个没有`boundingRect()`and`intersects()`函数的点，所以这可能也可以用于其他人:)

编辑：据我所知，`contains()`使用`boundingRect()`. 所以我不认为这是一个合适的解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T12:59:19.247

我曾经需要比你类似的东西。我需要测试两条路径的相似性。因此，我从点列表创建了一条路径（我希望您不需要更复杂的路径，因为该解决方案对于一般的 QPaintingPaths 来说会变得极其困难）。这条路径是使用给定的“容差”构建的，这是你的`selectionMargin`.

该函数返回一个 QPainterPath，它“在给定的折线周围绘制一个区域”。然后可以填充该区域，并生成与`tolerance`使用圆帽和圆形连接选项的笔宽绘制原始多段线相同的图像。

您也可以，这就是您想要做的，检查给定点是否包含在此路径中。请注意，`QPainterPath::contains`检查点是否位于路径定义的封闭区域内。例如，这个封闭区域对于单个线段是空的，对于两个线段是三角形，所以如果您`contains`直接在路径上使用这不是您想要的（正如我在对您的问题的第三条评论中提到的）。

```
QPainterPath intersectionTestPath(QList<QPointF> input, qreal tolerance)
{
    //will be the result
    QPainterPath path;

    //during the loop, p1 is the "previous" point, initially the first one
    QPointF p1 = input.takeFirst(); 

    //begin with a circle around the start point
    path.addEllipse(p1, tolerance, tolerance); 

    //input now starts with the 2nd point (there was a takeFirst)
    foreach(QPointF p2, input) 
    {
        //note: during the algorithm, the pair of points (p1, p2)
        //      describes the line segments defined by input.

        //offset = the distance vector from p1 to p2
        QPointF offset = p2 - p1;

        //normalize offset to length of tolerance
        qreal length = sqrt(offset.x() * offset.x() + offset.y() * offset.y());
        offset *= tolerance / length;

        //"rotate" the offset vector 90 degrees to the left and right
        QPointF leftOffset(-offset.y(), offset.x());
        QPointF rightOffset(offset.y(), -offset.x());

        //if (p1, p2) goes downwards, then left lies to the left and
        //right to the right of the source path segment
        QPointF left1 = p1 + leftOffset; 
        QPointF left2 = p2 + leftOffset;
        QPointF right1 = p1 + rightOffset;
        QPointF right2 = p2 + rightOffset;

        //rectangular connection from p1 to p2
        {
            QPainterPath p;
            p.moveTo(left1);
            p.lineTo(left2);
            p.lineTo(right2);
            p.lineTo(right1);
            p.lineTo(left1);
            path += p; //add this to the result path
        }

        //circle around p2
        {
            QPainterPath p;
            p.addEllipse(p2, tolerance, tolerance);
            path += p; //add this to the result path
        }

        p1 = p2;
    }

    //This does some simplification; you should use this if you call
    //path.contains() multiple times on a pre-calculated path, but
    //you won't need this if you construct a new path for every call
    //to path.contains().
    return path.simplified();
} 
```

# fuse - FUSE 中的 opendir()

> ID：11734619
> 
> 赞同：4
> 
> 时间：2012-07-31T06:49:22.310
> 
> 标签：fuse

`xxx_readdir()` 在**FUSE**的实现中，我使用以下代码：

```
static int hello_readdir(const char *path, void *buf, fuse_fill_dir_t filler,
                         off_t offset, struct fuse_file_info *fi)
{
    DIR *dp;
    struct dirent *de;

    (void) offset;
    (void) fi;

    dp = opendir(path);
    if (dp == NULL)
        return -errno;

    while ((de = readdir(dp)) != NULL) {
        struct stat st;
        memset(&st, 0, sizeof(st));
        st.st_ino = de->d_ino;
        st.st_mode = de->d_type << 12;
        if (filler(buf, de->d_name, &st, 0))
            break;
    }

    closedir(dp);
    return 0;
} 
```

然后，在文件夹上编译并执行：

```
./hello /tmp/hello/ 
```

当我使用`ls /tmp/hello/`命令时，结果如下：

```
bin   dev  home  lib64       media  opt   root  sbin  sys  usr
boot  etc  lib   lost+found  mnt    proc  run   srv   tmp  var 
```

但是，我没有在`/tmp/hello/`. 那么，当我使用命令时，为什么这些目录会驻留在它上面`ls`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T06:53:55.537

你打电话：

```
dp = opendir(path); 
```

开始`readdir`实施。当您调用它时，它`path`是*相*对于文件系统的根目录，而不是系统上的绝对路径。

所以在 /tmp/hello/ 中的值`path`将是 '/' 因为文件系统需要知道它们安装位置的详细信息是没有意义的。那里有一个深思熟虑的抽象，使得每个文件系统只关心它存储的东西。

# php - PHP类构造函数将mysql行作为对象返回

> ID：11734622
> 
> 赞同：0
> 
> 时间：2012-07-31T06:49:34.793
> 
> 标签：php, mysql, oop, class, constructor

有人可以提供一个如何实现这一目标的例子吗？我希望像这样使用它：

```
$user = new User($id = '5');
echo "hi {$user->firstName}\n"; 
```

该对象应包含行中的所有字段，这些字段可能会发生变化。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:58:13.373

在这里我创建逻辑原型

```
class user 
{
    protected $_table = 'tbl_user';
    protected $_db;       // stores the database handler
    public $_user;     // stores the user data

    protected function __construct($user_id)
    {
          $stmt = "SELECT * FROM $this->_table WHERE id='".(int)$user_id."'";
          if ($this->_db->query($stmt)){
              $fetch = $this->_db->mysql_query($stmt);
              $this->_user = mysql_fetch_row($fetch);
          }
    }    

}

 $obj_user=new user($user_id);
 // now you can access 
 $obj_user->_user->firstname 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:04:54.720

例如（**非常**简化 - 展示它背后的想法）......

```
<?php
class User {
  /**
   * @var PDO
   **/
  protected $_dbh;

  protected $_userid;
  protected $_firstname;
  protected $_surname;

  /**
   * init database connection
   *
   * @return void
   **/
  private function _initDatabase() {
    try {
      $this->_dbh = new PDO('mysql:...');
    } catch(PDOException $e) {
      die('not able to connect: '. $e->getMessage());
    }
  }

  /**
   * load user data from database
   *
   * @return void
   **/
  private function _loadData() {
    $this->_initDatabase();

    // create sql statement and select data
    $SQL = "
      SELECT *
      FROM   users
      WHERE  userid = :userid
    ";

    $dbStatement = $this->_dbh->prepare($SQL);
    $dbStatement->bindParam(':userid', $this->_userid, PDO::PARAM_INT);
    $dbStatement->execute();

    // assign data
    $userdata = $dbStatement->fetch(PDO::FETCH_ASSOC);
    $this->_firstname = $userdata['firstname'];
    $this->_surname   = $userdata['surname'];
    // ... and so on
  }

  /**
   * construct
   *
   * @param  int $userid
   * @return void
   **/
  public function __construct($userid) {
    $this->_userid = intval($userid);

    $this->_loadData();
  }

  /**
   * overload __get
   *
   * @param string $key
   * @return mixed
   **/
  public function __get($key) {
    if(property_exists($this, '_'. $key)) {
      return $this->{'_'. $key};
    }
  }
}

$user = new User(5);
echo('Hi '. $user->firstname);
?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T07:00:43.187

您必须首先创建一个简单的 php 类命名用户。正确封装它。将所有 getter 和 setter 写入此内容。

例如。

```
class User
{
private $firstName = '';
public function getfirstName($firstName)
{
return $firstName;
}
public function setfirstName($firstName)
{
this.firstName = $firstName;
}
}

//How to use it.

$user = new User();
$user->serfirstName('Suryansh');
echo 'Hi '.$user->getfirstName(); 
```

# javascript - 使用 innerHTML 添加行且自动完成未完成

> ID：11734623
> 
> 赞同：0
> 
> 时间：2012-07-31T06:49:56.297
> 
> 标签：javascript, jquery

我试图插入带有 id 作为标签的输入框。插入后，我需要自动完成功能。尝试了很多方法，但带有标签的输入无法自动完成。

```
function addRow(row) {

    var table = document.getElementById('dataTable');
    var rowCount = table.rows.length;
    var newRow= table.insertRow((1));
    var row = newRow.insertCell(1)"

    row.innerHTML+="<INPUT id =tags>"; 

 }

$(function() {
    var availableTags = [
    "abc",
    "bcd",
    "EGF"
        ];

$( "#tags" ).autocomplete({
            source: availableTags
                });
    }); 
```

我应该在哪里放置我的自动完成功能以启用新功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:01:26.670

`row.innerHTML+="<INPUT id =tags>";`这一行

应该

`row.innerHTML+='<INPUT id="tags" />';`

并确保在 addRow 之后调用 $("#tags").autocomplete()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:05:58.697

试试这个

```
function addRow(row) {
  var table = document.getElementById('dataTable');
  var rowCount = table.rows.length;
  var newRow= table.insertRow((1));
  var row = newRow.insertCell(1)"

  row.innerHTML+='<INPUT id="tags">'; 

   $( "#tags" ).autocomplete({
        source: availableTags
     }); 
```

}

# android - 实现 SharedPreferences

> ID：11734628
> 
> 赞同：1
> 
> 时间：2012-07-31T06:50:05.600
> 
> 标签：android, sharedpreferences

这是我的代码。我有一个文本视图和 2 个按钮接受和拒绝。当用户单击接受按钮时，我使用共享首选项将状态保存为 100。

下次用户登录时，我需要检查用户是否已经点击了接受按钮。如果他已经接受了，那我应该去家庭活动。

用户单击接受后，我不需要再次显示此活动。

```
public int kill;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Toast.makeText(Eula.this, "Status of the app is "+kill, Toast.LENGTH_LONG).show();
    if(kill==100)
    {
    Intent intent = new Intent(Intent.ACTION_MAIN);
        intent.setComponent(new ComponentName("mobi.infoways.triviavs1_0","mobi.infoways.triviavs1_0.Home"));
        startActivity(intent);
    }
    setContentView(R.layout.eulatxt);
    Intent i2 = getIntent();                
    addListenerOnButton();
}
        private void addListenerOnButton() {

        TextView t = (TextView) findViewById(R.id.txtv1); 
        t.setText(f);
        Button Accept = (Button) findViewById(R.id.btn1);    
            Accept.setOnClickListener(startListener);
            Button Reject = (Button) findViewById(R.id.btn2);    
            Reject.setOnClickListener(startListener);
}

        OnClickListener startListener = new OnClickListener() 
        {
            public void onClick(View v) {

          switch (v.getId()) {
             case R.id.btn1:

                 SharedPreferences prefs = getPreferences(MODE_PRIVATE);
                 SharedPreferences.Editor editor = prefs.edit();
                 editor.putInt("storedInt",100); 
                 editor.commit();
                     kill = prefs.getInt("storedInt", 100);
                    Toast.makeText(Eula.this, "status =" + kill, Toast.LENGTH_LONG).show();
                    Intent intent = new Intent(Intent.ACTION_MAIN);
                intent.setComponent(new ComponentName("mobi.infoways.triviavs1_0","mobi.infoways.triviavs1_0.Home"));
                startActivity(intent);
              break;
             case R.id.btn2:
                 Toast.makeText(Eula.this, "button 2 clicked", Toast.LENGTH_SHORT).show();
          Eula.this.finish();
              break;
          }  

    };

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:13:30.330

参考下面的代码

```
SharedPreferences sharedPreferences;
SharedPreferences.Editor editor;
Boolean checkforFirstTime;

sharedPreferences = PreferenceManager
                .getDefaultSharedPreferences(getApplicationContext());
editor = sharedPreferences.edit();

checkforFirstTime = sharedPreferences.getBoolean("checkforFirstTime", true);

//Checking whether application is launched first time
if (checkforFirstTime) {

    //your code
    editor.putBoolean("checkforFirstTime", false);
    editor.commit();

 } else {

 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:57:10.497

代替

```
SharedPreferences prefs = getPreferences(MODE_PRIVATE); 
```

利用

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(YourAcitivyName.this); 
```

同样在`onCreate()`构造`super`函数加载首选项并初始化`kill`变量之后。

在 super.onCreate(savedInstanceState) 旁边的 onCreate 方法中初始化 kill；本身可能就足够了..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T07:18:55.367

当加载共享首选项时调用：

```
SharedPreferences save = getSharedPreferences("login", Activity.MODE_PRIVATE);
save.getInt(variable, 0); // zero is default value if you dont have it yet saved 
```

保存时调用：

```
SharedPreferences settings = getSharedPreferences("login", Activity.MODE_PRIVATE);
SharedPreferences.Editor editor = settings.edit();
editor.putInt("storedInt", 100);
editor.commit(); 
```

# ms-access - 预期参数太少 1-MS 访问错误

> ID：11734630
> 
> 赞同：0
> 
> 时间：2012-07-31T06:50:09.043
> 
> 标签：ms-access

我使用前端作为业务对象和后端 MS Access 数据库。我有一个字段，语法如下

```
Format(Votes.`Vote Received`,"yyyymm") 
```

此语法正在解析，但在查询中拉出此对象时会出错。我认为这与字段名称上的引号有关，但这就是该字段的命名方式。当我在字段查询下方拉动时不会出错。

```
Votes.`Vote Received` 
```

感谢您的投入..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:51:45.433

您似乎希望在不使用格式的情况下将年份和月份分别转换为两位数。

“无论如何在不使用格式函数的情况下将月份数转换为两位数（01-12）。当我使用年（日期）和月份（日期）时，它的给出结果但像 20111”

我建议你试试：

```
Right(Year(Votes.`Vote Received`),2) & "-" & Right("00" & Month(Votes.`Vote Received`),2) 
```

# javascript - “停止运行脚本错误”在 IE8 中具有大量集合

> ID：11734637
> 
> 赞同：4
> 
> 时间：2012-07-31T06:50:46.253
> 
> 标签：javascript, backbone.js, internet-explorer-8, underscore.js

在使用 IE8 从 REST 服务获取相当大的 Backbone 集合时，我遇到“此页面上的脚本导致 Internet Explorer 运行缓慢”警告消息。

我有大约 4000 个项目的 25 个属性（这是一个 Intranet 应用程序，我做分页客户端）。

所有其他浏览器（IE9 也是）都能完美运行。

当接收到的剩余数组在获取到服务器后映射到模型集合时，会出现警告。

出现此消息是因为 IE8[的操作限制约为 500 万](https://stackoverflow.com/a/2345724/1929)次，当它到达时会显示一条烦人的警告消息。

我不知道如何通过在我看来并不是大量数据的情况来达到这个限制。

我了解到可以通过在客户端上操作 Windows 注册表或使用Microsoft 提供的[补丁来增加此限制。](http://support.microsoft.com/kb/175500)

更优雅的解决方案是使用[此处](http://www.picnet.com.au/blogs/Guido/post/2010/03/04/How-to-prevent-Stop-running-this-script-message-in-browsers)描述的解决方法，该解决方法将在长时间运行的操作中插入 setTimeout，重置 IE8 中的操作计数器。

现在成功获取数据后，主干调用 parse 方法，该方法将在内部使用 underscore.js 映射函数。

我想在不触及 underscore.js 或backbone.js 源代码的情况下应用解决方法代码。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:03:23.620

是否可以拆分请求并让服务器前端完成所有分页逻辑？IE8 真的是地狱，但你的方法也不是最佳实践，无论是否是 Intranet。4000 个对象 x 25 个属性（我猜是 json，因为您使用的是骨干网）实际上是非常繁重的客户端解析。

查看 Backbone 的 Backbone.Paginator 组件，因为它肯定会帮助你。

[http://addyosmani.com/blog/backbone-paginator-new-pagination-components-for-backbone-js/](http://addyosmani.com/blog/backbone-paginator-new-pagination-components-for-backbone-js/)

# c# - 实体框架中的“不支持指定的方法”

> ID：11734641
> 
> 赞同：1
> 
> 时间：2012-07-31T06:51:04.597
> 
> 标签：c#, .net, entity-framework, entity-framework-4, exception-handling

这是我的实体类：

```
public partial class NerdDinnerEntities : ObjectContext
{
    public NerdDinnerEntities(string connectionString)
        : base(connectionString, "NerdDinnerEntities")
    {
        try
        {
            ObjectContext oc = new ObjectContext(connectionString);

           oc.Connection.ChangeDatabase("NERDDINNER1");
           oc.AcceptAllChanges();
            this.ContextOptions.LazyLoadingEnabled = true;
            OnContextCreated();
        }
        catch (Exception ex) { }
    }

    partial void OnContextCreated();

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    public ObjectSet<Dinner> Dinners
    {
        get
        {
            if ((_Dinners == null))
            {
                _Dinners = base.CreateObjectSet<Dinner>("Dinners");
            }
            return _Dinners;
        }
    }
    private ObjectSet<Dinner> _Dinners;

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    public ObjectSet<RSVP> RSVPs
    {
        get
        {
            if ((_RSVPs == null))
            {
                _RSVPs = base.CreateObjectSet<RSVP>("RSVPs");
            }
            return _RSVPs;
        }
    }

    private ObjectSet<RSVP> _RSVPs;

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    public ObjectSet<sysdiagram> sysdiagrams
    {
        get
        {
            if ((_sysdiagrams == null))
            {
                _sysdiagrams = base.CreateObjectSet<sysdiagram>("sysdiagrams");
            }
            return _sysdiagrams;
        }
    }

    private ObjectSet<sysdiagram> _sysdiagrams;

    /// <summary>
    /// Deprecated Method for adding a new object to the Dinners EntitySet. Consider using the .Add method of the associated ObjectSet&lt;T&gt; property instead.
    /// </summary>
    public void AddToDinners(Dinner dinner)
    {
        base.AddObject("Dinners", dinner);
    }

    /// <summary>
    /// Deprecated Method for adding a new object to the RSVPs EntitySet. Consider using the .Add method of the associated ObjectSet&lt;T&gt; property instead.
    /// </summary>
    public void AddToRSVPs(RSVP rSVP)
    {
        base.AddObject("RSVPs", rSVP);
    }

    /// <summary>
    /// Deprecated Method for adding a new object to the sysdiagrams EntitySet. Consider using the .Add method of the associated ObjectSet&lt;T&gt; property instead.
    /// </summary>
    public void AddTosysdiagrams(sysdiagram sysdiagram)
    {
        base.AddObject("sysdiagrams", sysdiagram);
    }
} 
```

这些是我的 web.config 文件

```
<add name="NerdDinnerEntities" connectionString="metadata=res://*/Models.NerdDinner.csdl|res://*/Models.NerdDinner.ssdl|res://*/Models.NerdDinner.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=@;Database=NERDDINNER;User ID=@;Password=@@@;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClients" /> 
```

我收到错误：

> 不支持指定的方法

在这一行：

```
oc.Connection.ChangeDatabase("NERDDINNER1"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:56:24.887

[如果您在MSDN](http://msdn.microsoft.com/en-us/library/system.data.entityclient.entityconnection.changedatabase.aspx)上查找文档，您会发现该方法实际上不受支持。它必须是未来改进或其他东西的占位符。

为那些想要在运行时更改数据库的人扩展：

1.在您的设置中创建一个条目以代替 app.config 中的默认值。将用户名、密码、目录名称（数据库名称）、服务器等详细信息提取到其他设置条目中。

```
<Setting Name="EntityConnectionString2" Type="System.String" Scope="Application">
  <Value Profile="(Default)">metadata=res://*/Model1.csdl|res://*/Model1.ssdl|res://*/Model1.msl;provider=System.Data.SqlClient;provider connection string="data source={0};initial catalog={1};persist security info=True;user id={2};password={3};encrypt=True;trustservercertificate=True;multipleactiveresultsets=True;App=EntityFramework"</Value>
</Setting> 
```

*请注意 {0}..{3} 条目，并且此连接字符串不是 app.config 中的整个 configuration/connectionStrings/add 条目*

2.使用接受连接字符串的 EF 数据库的重载构造函数之一。

```
var settings = Properties.Settings.Default;  
string constring = string.Format(settings.EntityConnectionString2, settings.Server, settings.Database, settings.User, settings.Password);
NerdDinnerEntities db = new NerdDinnerEntities (constring); 
```

3.要在运行时更改，您可以使用不同的目录名称以相同的方式创建不同的对象，或者使用不同的目录名称处理并重新创建 db 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:56:14.560

不支持 EntityConnection 的 ChangeDatabase 方法（[http://msdn.microsoft.com/en-us/library/system.data.entityclient.entityconnection.changedatabase.aspx](http://msdn.microsoft.com/en-us/library/system.data.entityclient.entityconnection.changedatabase.aspx)）

如果要将数据上下文与另一个数据库一起使用，请创建另一个连接字符串并使用新连接字符串创建数据上下文实例

# actionscript-3 - 在 Actionscript 3.0 中获取角色方向？

> ID：11734644
> 
> 赞同：1
> 
> 时间：2012-07-31T06:51:14.033
> 
> 标签：actionscript-3, flash, actionscript

我正在创建一个小型多人游戏，并且试图找到如何将鼠标的方向与角色所在的位置进行比较...

例如，如果角色在 A 点，我希望角色面对的方向改变，使其面向鼠标所在的方向。

我按照以下指南为我的角色创建了方向动画剪辑：

![度数](../Images/e4aea1ab74e622513390dd261026fd18.png)

我尝试了许多在线代码/建议/howtos，但没有一个对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:00:45.357

您可以使用这样的函数来确定度数角度：

```
public static function polarAngle(point:Point, center:Point=null):Number
{
    if (!center)
        center = new Point(0, 0);

    var degrees:Number = Geometry.rad2deg(Math.atan2(point.y - center.y, point.x - center.x));

    if (degrees < 0)
        degrees += 360;

    return degrees;
} 
```

使用此功能，`point`鼠标的`center`点与您的角色的注册点或中心进行比较。

因此，这可以称为：

```
var angle:Number = polarAngle(new Point(mouseX, mouseY),
                              new Point(character.x, character.y)); 
```

我建议使用 Flash 原生坐标系 - 0 到 180 之间的值表示顺时针旋转；从 0 到 -180 的值表示逆时针旋转。

![极性](../Images/8826fb86de3891742bbb44e29e4ad346.png)

将这些转换为基本方向系统，可能会有优雅的算法，例如使用点积；但是，您可以蛮力：

```
if ((angle < 22.5) || (angle > 337.5))
    return "e";
if (angle < 67.5)
    return "se";
if (angle < 112.5)
    return "s";
if (angle < 157.5)
    return "sw";
if (angle < 202.5)
    return "w";
if (angle < 247.5)
    return "nw";
if (angle < 292.5)
    return "n";
if (angle < 337.5)
    return "ne"; 
```

# .net - 如何在.net中捕获和保存异常？

> ID：11734648
> 
> 赞同：-1
> 
> 时间：2012-07-31T06:51:21.290
> 
> 标签：.net, exception, try-catch

我想在日志文件中捕获并保存异常。

我怎样才能自己实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:03:35.717

我假设您知道如何捕获异常。最基本的例子是这样的：

```
try
{
    // ... Do some work here
}
catch (Exception ex)
{
    File.WriteAllText("C:\\ExceptionFile" + DateTime.Now.Ticks + ".txt", ex.Message);
} 
```

这样，您的错误消息将被写入 C:\ 驱动器上的 txt 文件。您也可以添加或选择编写 StackTrace，您可能会希望这样做。

此外，如果您希望在整个应用程序中使用它，您将需要一个更优雅的解决方案，带有日志类或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:06:22.797

你应该看看 NLog 项目： http: [//nlog-project.org/](http://nlog-project.org/)

假设您知道如何捕获异常，您只需使用 NLog 记录它，它有多个配置选项可以将异常详细信息（或消息）写入文件、事件查看器等。

# ruby-on-rails-3 - 将 user_id 存储在 paper_trail 版本表中

> ID：11734651
> 
> 赞同：4
> 
> 时间：2012-07-31T06:51:27.403
> 
> 标签：ruby-on-rails-3, audit-trail, paper-trail-gem

我正在使用纸质追踪来审核对数据的更改，并且除了纸质追踪默认存储的“whodunnit”列之外，还希望存储当前用户的 user_id。

我可以轻松修改版本迁移以添加 user_id 列。但是我还没有找到一种简单的方法来从我的应用程序中的各种模型中设置该列。

看起来这应该有效：

```
has_paper_trail :meta => { :user_id  => current_user.id
                       } 
```

而且，我认为如果我可以访问模型中的 current_user，它可能会起作用。但我没有。在研究了如何在我的模型中访问 c​​urrent_user 之后，我发现这里有一场哲学辩论。不过，这不是我的问题。

所以我正在考虑使用像 sentient_user 或 sentient_model 这样的 gem 来让我访问我的模型中的 current_user，这样我就可以用上面的代码来设置它。

但是，对于我在这里尝试做的小事来说，添加这些宝石似乎很复杂。我想知道是否有更简单的方法。

将采取行动的人的 user_id 添加到版本表中的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:01:13.677

`current_user`模型本身不存在，它从控制器中出现。因此，标准方法适用：

```
class ApplicationController < ActionController::Base
  def user_for_paper_trail
    current_user if user_signed_in?
  end

  def info_for_paper_trail
    { user_id: current_user.id } if user_signed_in?
  end
end

# config/initializers/paper_trail.rb
class Version < ActiveRecord::Base
  attr_accessible :user_id
end 
```

# javascript - 在 javascript 中访问 HTML 表值

> ID：11734654
> 
> 赞同：0
> 
> 时间：2012-07-31T06:51:33.003
> 
> 标签：javascript, html

我正在使用带有 phonegap 的 HTML5。我有一个定义如下的表。

```
<table id = "myTable">
   <tr><td>Name</td><td class="center">:</td><td><div id="name"></div> </td></tr>
   <tr><td>Age</td><td class="center">:</td><td><div id="age"></div> </td></tr>
   <tr><td>Country</td><td class="center">:</td><td><div id="country"></div> </td></tr>
</table> 
```

我想从 javascript 将值设置为“name”、“age”和“country”。我尝试如下。

```
document.getElementById('name') = 'John' 
```

但这并没有给我所需的输出。怎么可能呢？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T06:52:41.193

```
document.getElementById('name').innerHTML= 'John' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T06:57:55.357

利用`document.getElementById('name').innerHTML = 'John';`

[**看演示**](http://jsfiddle.net/akhurshid/6eyLL/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T06:57:17.383

```
document.getElementById('name').innerText = 'John' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T07:06:49.950

您可以设置 innerHTML 以在元素内设置 html。

```
document.getElementById('name').innerHTML= 'John' 
```

# java - java.lang.ClassCastException：ihtika2.i_testbundle.TestClasss 无法转换为 ihtika2.i_testbundle.service.TestClasssInter

> ID：11734655
> 
> 赞同：1
> 
> 时间：2012-07-31T06:51:32.510
> 
> 标签：java, osgi, bundle, apache-felix

我正在玩 Felix，但我无法理解一件事。我有一些 OSGi Felix 包，我尝试从这个包中加载和使用服务。捆绑代码：

```
 package ihtika2.i_testbundle;

import ihtika2.i_testbundle.service.TestClasssInter;
import java.util.Hashtable;
import org.osgi.framework.BundleActivator;
import org.osgi.framework.BundleContext;
import org.osgi.framework.InvalidSyntaxException;
import org.osgi.framework.ServiceReference;

public class Activator implements BundleActivator {

    @Override
    public void start(BundleContext context) throws Exception {
        Hashtable<String, String> props = new Hashtable<String, String>();
        props.put("Funct", "TESTCl");

        context.registerService(TestClasssInter.class.getName(), new TestClasss(), props);

        ServiceReference[] refs;
        try {
            BundleContext bundleContext = context;

//            System.out.println(TestClasssInter.class.getName());
            refs = bundleContext.getServiceReferences("ihtika2.i_testbundle.service.TestClasssInter", "(Funct=TESTCl)");

            if (refs == null) {
                System.out.println("Not Found AboutForm on show!!!");
            } else {
                Object MainForm = bundleContext.getService(refs[0]);
                TestClasssInter sdfsdf = (TestClasssInter) MainForm;
                sdfsdf.printSomeLine();
//                    MainForm.sendContext(bundleContext);
//                    MainForm.showWindow();
            }

        } catch (InvalidSyntaxException ex) {
            ex.printStackTrace();
        }
    }

    @Override
    public void stop(BundleContext context) throws Exception {
        // TODO add deactivation code here
    }
} 
```

* * *

```
package ihtika2.i_testbundle;

import ihtika2.i_testbundle.service.TestClasssInter;

/**
 *
 * @author Arthur
 */
public class TestClasss implements TestClasssInter {

    @Override
    public void printSomeLine() {
        System.out.println("TEST MESSAGE");
    }
} 
```

* * *

```
package ihtika2.i_testbundle.service;

/**
 *
 * @author Arthur
 */
public interface TestClasssInter {

    public void printSomeLine();
} 
```

正如您在更新的示例中看到的 - 必须显示捆绑代码中的“TEST MESSAGE”行。有节目，一切正常。

但是，如果我尝试在我的“加载器”中执行此代码，则会显示错误

```
Could not create framework: java.lang.ClassCastException: ihtika2.i_testbundle.TestClasss cannot be cast to ihtika2.i_testbundle.service.TestClasssInter
java.lang.ClassCastException: ihtika2.i_testbundle.TestClasss cannot be cast to ihtika2.i_testbundle.service.TestClasssInter
    at com.google.code.ihtika.Starter.main(Starter.java:103)
Java Result: -1 
```

装载机的代码是

```
/*
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
package com.google.code.ihtika;

import ihtika2.i_testbundle.service.TestClasssInter;
import java.io.File;
import java.util.ArrayList;
import java.util.Map;
import java.util.ServiceLoader;
import org.osgi.framework.Bundle;
import org.osgi.framework.BundleContext;
import org.osgi.framework.BundleException;
import org.osgi.framework.InvalidSyntaxException;
import org.osgi.framework.ServiceReference;
import org.osgi.framework.launch.Framework;
import org.osgi.framework.launch.FrameworkFactory;

/**
 * This class provides a static {@code main()} method so that the bundle can be
 * run as a stand-alone host application. In such a scenario, the application
 * creates its own embedded OSGi framework instance and interacts with the
 * internal extensions to providing drawing functionality. To successfully
 * launch the stand-alone application, it must be run from this bundle's
 * installation directory using "{@code java -jar}". The locations of any
 * additional extensions that have to be started, have to be passed as command
 * line arguments to this method.
 */
public class Starter {

    private static Framework m_framework = null;

    /**
     * Enables the bundle to run as a stand-alone application. When this static
     * {@code main()} method is invoked, the application creates its own
     * embedded OSGi framework instance and interacts with the internal
     * extensions to provide drawing functionality. To successfully launch as a
     * stand-alone application, this method should be invoked from the bundle's
     * installation directory using "{@code java -jar}". The location of any
     * extension that shall be installed can be passed as parameters. <p> For
     * example if you build the bundles inside your workspace, maven will create
     * a target directory in every project. To start the application from within
     * your IDE you should pass: <p>
     * <pre>
     * {@code file:../servicebased.circle/target/servicebased.circle-1.0.0.jar
     * file:../servicebased.square/target/servicebased.square-1.0.0.jar
     * file:../servicebased.triangle/target/servicebased.triangle-1.0.0.jar}
     * </pre>
     *
     * @param args The locations of additional bundles to start.
     *
     */
    public static void main(String[] args) {
        // Args should never be null if the application is run from the command line.
        // Check it anyway.
        ArrayList<String> locations = new ArrayList<>();

        indexBundlesDir("I_Bundles/Stage_300", locations);
        indexBundlesDir("I_Bundles/Stage_400", locations);
        indexBundlesDir("I_Bundles/Stage_500", locations);

        // Print welcome banner.
        System.out.println("\nWelcome to My Launcher");
        System.out.println("======================\n");

        try {
            Map<String, String> config = ConfigUtil.createConfig();
            m_framework = createFramework(config);
            m_framework.init();
            m_framework.start();
            installAndStartBundles(locations);

            for (Bundle testBundle : m_framework.getBundleContext().getBundles()) {
                if (testBundle.getSymbolicName().equals("ihtika2.I_TestBundle")) {
                    System.out.println("found");

                    ServiceReference[] refs;
                    try {
                        BundleContext bundleContext = m_framework.getBundleContext();

//                        System.out.println(TestClasssInter.class.getName());
                        refs = bundleContext.getServiceReferences("ihtika2.i_testbundle.service.TestClasssInter", "(Funct=TESTCl)");

                        if (refs == null) {
                            System.out.println("Not Found AboutForm on show!!!");
                        } else {
                            Object MainForm = bundleContext.getService(refs[0]);
                            TestClasssInter sdfsdf = (TestClasssInter) MainForm;
//                    MainForm.sendContext(bundleContext);
//                    MainForm.showWindow();
                        }

                    } catch (InvalidSyntaxException ex) {
                        ex.printStackTrace();
                    }

                }
//                Dictionary<String, String> headerLine = testBundle.getHeaders();
//                Enumeration e = headerLine.keys();
//
//                while (e.hasMoreElements()) {
//                    Object key = e.nextElement();
//                    if (key.equals("Import-Package")) {
//                        System.out.println(key + " - " + headerLine.get(key));
//                    }
//                    System.out.println(key + " - " + headerLine.get(key));
//                }
            }

            m_framework.waitForStop(0);
            System.exit(0);
        } catch (Exception ex) {
            System.err.println("Could not create framework: " + ex);
            ex.printStackTrace();
            System.exit(-1);
        }
    }

    private static void indexBundlesDir(String bundlesDir, ArrayList<String> locations) {
        File dir = new File(bundlesDir);
        String[] children = dir.list();
        if (children == null) {
            // Either dir does not exist or is not a directory
        } else {
            for (int i = 0; i < children.length; i++) {
                // Get filename of file or directory
                locations.add("file:/c:/Art/Dropbox/OpenSource/MyGIT/ihtika-2/ihtika-2/MainApplication/" + bundlesDir + "/" + children[i]);
            }
        }
    }

    /**
     * Util method for creating an embedded Framework. Tries to create a
     * {@link FrameworkFactory} which is then be used to create the framework.
     *
     * @param config the configuration to create the framework with
     * @return a Framework with the given configuration
     */
    private static Framework createFramework(Map<String, String> config) {
        ServiceLoader<FrameworkFactory> factoryLoader = ServiceLoader.load(FrameworkFactory.class);
        for (FrameworkFactory factory : factoryLoader) {
            return factory.newFramework(config);
        }
        throw new IllegalStateException("Unable to load FrameworkFactory service.");
    }

    /**
     * Installs and starts all bundles used by the application. Therefore the
     * host bundle will be started. The locations of extensions for the host
     * bundle can be passed in as parameters.
     *
     * @param bundleLocations the locations where extension for the host bundle
     * are located. Must not be {@code null}!
     * @throws BundleException if something went wrong while installing or
     * starting the bundles.
     */
    private static void installAndStartBundles(ArrayList<String> bundleLocations) throws BundleException {
        BundleContext bundleContext = m_framework.getBundleContext();
//        Activator bundleActivator = new Activator();
//        bundleActivator.start(bundleContext);
        for (String location : bundleLocations) {
            Bundle addition = bundleContext.installBundle(location);
//            System.out.println(location);
            addition.start();
        }
    }
} 
```

* * *

```
package ihtika2.i_testbundle.service;

/**
 *
 * @author Arthur
 */
public interface TestClasssInter {

    public void printSomeLine();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T07:18:38.473

ClassLoaders 只是不能那样工作，它*确实需要是相同的 class/interface*。MainForm 实现 MainFormInterface，而不是 MainFormInterface2，即使它们是相同的。

你需要做的是：

*   确保您的 MainFormInterface 位于单独的包中（我认为它是：ihtika2.mainform.service）
*   删除 MainFormInterface2
*   将所有 MainFormInterface2 引用替换为 MainFormInterface
*   将包添加到 Felix 中的 org.osgi.framework.system.packages.extra 设置中，我认为最简单的方法是在 ConfigUtil.createConfig() 之后将其添加到 Map 中，这样 Felix 就可以访问 ihtika2来自 OSGi 外部的 .mainform.service 包
*   确保你的包导入包 ihtika2.mainform.service，所以你的包也可以访问 ihtika2.mainform.service

那应该这样做。

# c# - 将平台目标更改为任何 CPU 时引发的神秘 RemotingException

> ID：11734658
> 
> 赞同：0
> 
> 时间：2012-07-31T06:51:46.067
> 
> 标签：c#

我将假设我安装的 .NET 版本是 foobared，但我想我还是会问，因为这没有任何意义。

1.  创建一个新的 C# 控制台应用程序
2.  将平台目标更改为任何 CPU
3.  跑
4.  看到引发了 RemotingException ！？！

    ```
    'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_64\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll'
    'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\assembly\GAC_MSIL\Microsoft.VisualStudio.HostingProcess.Utilities\10.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.HostingProcess.Utilities.dll'
    'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Windows.Forms\v4.0_4.0.0.0__b77a5c561934e089\System.Windows.Forms.dll'
    'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Drawing\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Drawing.dll'
    'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System\v4.0_4.0.0.0__b77a5c561934e089\System.dll'
    'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\assembly\GAC_MSIL\Microsoft.VisualStudio.HostingProcess.Utilities.Sync\10.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.HostingProcess.Utilities.Sync.dll'
    'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\assembly\GAC_MSIL\Microsoft.VisualStudio.Debugger.Runtime\10.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.Debugger.Runtime.dll'
    'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'e:\dev\ConsoleApplication2\ConsoleApplication2\bin\Debug\ConsoleApplication2.vshost.exe'
    'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Core\v4.0_4.0.0.0__b77a5c561934e089\System.Core.dll'
    'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Xml.Linq\v4.0_4.0.0.0__b77a5c561934e089\System.Xml.Linq.dll'
    'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Data.DataSetExtensions\v4.0_4.0.0.0__b77a5c561934e089\System.Data.DataSetExtensions.dll'
    'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\Microsoft.CSharp\v4.0_4.0.0.0__b03f5f7f11d50a3a\Microsoft.CSharp.dll'
    'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_64\System.Data\v4.0_4.0.0.0__b77a5c561934e089\System.Data.dll'
    'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Xml\v4.0_4.0.0.0__b77a5c561934e089\System.Xml.dll'
    The thread 'vshost.NotifyLoad' (0x1494) has exited with code 0 (0x0).
    The thread 'vshost.LoadReference' (0x12f0) has exited with code 0 (0x0).
    'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'e:\dev\ConsoleApplication2\ConsoleApplication2\bin\Debug\ConsoleApplication2.exe', Symbols loaded.
    A first chance exception of type 'System.Runtime.Remoting.RemotingException' occurred in mscorlib.dll
    An unhandled exception of type 'System.Runtime.Remoting.RemotingException' occurred in mscorlib.dll

    Additional information: The async result object is null or of an unexpected type. 
    ```

    > mscorlib.dll!System.Runtime.Remoting.Proxies.RealProxy.EndInvokeHelper(System.Runtime.Remoting.Messaging.Message reqMsg, bool bProxyCase) + 0x2d0 字节 mscorlib.dll!System.Runtime.Remoting.Proxies.RemotingProxy.Invoke(object未使用，参考 System.Runtime.Remoting.Proxies.MessageData msgData) + 0x191 字节
    > System.Windows.Forms.dll!System.Windows.Forms.Screen.AllScreens.get() + 0x1d2 字节 System.Windows.Forms.dll!System .Windows.Forms.Form.ApplyBoundsConstraints（int建议X，int建议Y，int建议宽度，int建议高度）+ 0x12a字节
    > System.Windows.Forms.dll！System.Windows.Forms.Form.FillInCreateParamsStartPosition（System.Windows.Forms.CreateParams cp ) + 0x4ab 字节
    > System.Windows.Forms.dll!System.Windows.Forms.Form.CreateParams.get() + 0x153 字节 System.Windows.Forms.dll!System.Windows.Forms.Control.CreateHandle() + 0x146 字节
    > System.Windows。 Forms.dll!System.Windows.Forms.Form.CreateHandle() + 0x2ad 字节 System.Windows.Forms.dll!System.Windows.Forms.Control.Handle.get() + 0x68 字节 Microsoft.VisualStudio.HostingProcess.Utilities。 dll!Microsoft.VisualStudio.HostingProcess.HostProc.RunParkingWindowThread() + 0xbd 字节
    > mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback 回调, 对象状态, bool ignoreSyncCtx) + 0xdc字节
    > mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback 回调，对象状态) + 0x3b 字节
    > mscorlib.dll!System.Threading.ThreadHelper.ThreadStart() + 0x4d 字节
    > [Native到托管过渡]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:00:46.210

问题与执行路径太长有关。如果在以 64 位执行时超过 127 个字符，则会弹出。据我所知，这是一个 .net 4 问题，我看到的唯一解决方法是使条目程序集输出名称更短。IMO，这是一个垃圾修复，需要 MS 解决。

编辑：解决方案 - 作为 x86 运行，或缩短项目/用户名

# android - OpenGL ES 纹理映射

> ID：11734666
> 
> 赞同：3
> 
> 时间：2012-07-31T06:52:04.133
> 
> 标签：android, opengl-es, textures, uv-mapping

我需要在我的 Android 应用程序中绘制圆圈。实际上这是一个吃豆人游戏，我需要画平板电脑。由于现场有很多平板电脑，我决定用一个多边形绘制每个平板电脑。

这是我的想法的说明：

[http://www.advancedigital.ru/ideal_circle_with_only_one_polygon.jpg](http://www.advancedigital.ru/ideal_circle_with_only_one_polygon.jpg)

顶点坐标：

```
//  (x, y)
0 : -R, R * (Math.sqrt(2) + 1)
1 : -R, -R
2 : R * (Math.sqrt(2) + 1), -R 
```

顶点坐标是相对于圆心计算的，以便以后轻松放置圆。

问题出在纹理映射中，根据我的计算，UV应该是这样的

```
0 : 0, -(Math.sqrt(2) + 0.5)
1 : 0, 1
2 : 1, (Math.sqrt(2) + 0.5) 
```

但负 V 值会导致应用程序仅显示黑屏。这就是为什么我认为我错过了什么或者我走错了路……</p>

我的问题是：是否可以以这种方式渲染纹理？如果不可能，画小点的最佳方法是什么？

PS：我在 Android 上使用 OpenGL ES 2.0。

在我看来，这家伙正在尝试做[同样](https://stackoverflow.com/questions/9397170/opengl-es-texture-mapping-overflow)的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:59:46.680

和纹理参数默认设置`GL_TEXTURE_WRAP_S`为。将它们设置为以获得您正在寻找的效果（请参阅[glTexParameter 文档](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glTexParameter.xml)）`GL_TEXTURE_WRAP_T``GL_REPEAT``GL_CLAMP_TO_EDGE`

# ruby - 心理 YAML 解析，包括注释

> ID：11734672
> 
> 赞同：13
> 
> 时间：2012-07-31T06:52:25.143
> 
> 标签：ruby, yaml, psych

根据[http://yaml.org/spec/current.html#id2509980，YAML](http://yaml.org/spec/current.html#id2509980)文件中的注释是一个表示细节，不能在序列化/表示图中（[http://yaml.org/spec/current.html#表示/](http://yaml.org/spec/current.html#representation/)）。看起来 Psych 正在根据规范进行解析并丢失了注释，这意味着当文件包含注释时，无法解析 YAML 文件并以完全相同的方式再次序列化它。我认为这很奇怪，因为注释在此类文件（例如配置）中确实很重要。

有谁知道是否可以用现有的库来解析评论，或者是我自己做这一切的唯一方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-28T10:48:38.750

我们也可以做一些这样的事情，这将改变键值并保留评论。

```
require 'yaml'
thing = YAML.load_file('/opt/database.yml')
hostname = thing["common"]["host_name"]
appname = thing["common"]["app_name"]
motdobj = IO.readlines('/opt/database.yml')
motdobj = motdobj.map {|s| s.gsub(hostname, "mrigesh")}
motdobj = motdobj.map {|s| s.gsub(appname, "abc")}

File.open('/opt/database.yml', "w" ) do | file1 |
    file1.puts motdobj
    file1.close
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T02:19:43.023

您可以迭代较低级别的节点，在发出时保留注释。此外，您可以查看 syck 引擎是否为您提供所需的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T23:12:44.197

我喜欢@josh-voigts 的疯狂想法。这是一个疯狂的实现。评论几乎可以散布在任何地方，而且很有效！

```
require 'tempfile'

def yaml_conf_edit(fn, &block)
  conf = File.open(fn) {|f| YAML.load(f.read)}

  before = Tempfile.new('before')
  before.write(conf.to_yaml)
  before.close

  yield conf

  after = Tempfile.new('after')
  after.write(conf.to_yaml)
  after.close

  `merge #{fn} #{before.path} #{after.path}`
  before.unlink; after.unlink

  conf
end 
```

您可以在以下内容中使用它：

```
yaml_conf_edit('conf/database.yml') do |conf| 
  conf['development']['database'] = db_timestamped
end 
```

# php - 如何在 PHP 中动态决定 css 类名？

> ID：11734674
> 
> 赞同：2
> 
> 时间：2012-07-31T06:52:35.553
> 
> 标签：php, ternary-operator

我想在 PHP 中使用三元运算符动态决定一个 css 类，我正在使用以下代码，但它有些错误

```
echo '<div '.count($photos) > 1 ? "class='slider'" : "class='image'".'>'; 
```

上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T06:55:02.537

表达式需要括号。

```
echo '<div ' . (count($photos) > 1 ? "class='slider'" : "class='image'") . '>'; 
```

或者

```
echo '<div class="' . (count($photos) > 1 ? 'slider' : 'image') . '">' 
```

# php - 如何以编程方式从书名和作者中获取 ISBN 号？php

> ID：11734681
> 
> 赞同：0
> 
> 时间：2012-07-31T06:52:50.977
> 
> 标签：php

我想知道是否有办法从书名中获取 ISBN 号，并使用 php 以编程方式编写作者。

Google 图书是否为此提供任何服务？我们如何使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T06:59:21.707

是的，Google 图书提供了一个简单的 GET 方法，您可以将其与 PHP cURL 一起使用，该方法将返回 ISBN： [https ://developers.google.com/books/docs/v1/using#PerformingSearch](https://developers.google.com/books/docs/v1/using#PerformingSearch)

# c# - 如何在cs文件的下拉列表中添加项目

> ID：11734683
> 
> 赞同：6
> 
> 时间：2012-07-31T06:52:53.447
> 
> 标签：c#, asp.net, sql-server-2008

**这是我的下拉 CS 文件：**

```
protected void BindDropDownList()     

    {

        DataTable dt = new DataTable();
        string connString = System.Configuration.ConfigurationManager.AppSettings["EyeProject"];
        SqlConnection conn = new SqlConnection(connString);

        try
        {
            conn.Open();
            string sqlStatement = "SELECT FirstName FROM tbl_UserDetails";
            SqlCommand sqlCmd = new SqlCommand(sqlStatement, conn);
            SqlDataAdapter sqlDa = new SqlDataAdapter(sqlCmd);

            sqlDa.Fill(dt);
            if (dt.Rows.Count > 0)
            {
                DropDownList1.DataSource =dt;

                DropDownList1.DataTextField = "FirstName"; // the items to be displayed in the list items

                DropDownList1.DataBind();
            }
        }
        catch (System.Data.SqlClient.SqlException ex)
        {
            string msg = "No Data Found To display in the DropDown List";
            msg += ex.Message;
            throw new Exception(msg);
        }
        finally
        {
            conn.Close();
        }

    }

By using this one iam getting values of table Firstname values now i want to add one more item Called ALLrecords. 

How can i add it.

this is my Aspx file 

 <div class="label">
                                    Select Name:
                                    <asp:DropDownList ID="DropDownList1" runat="server">

                                    </asp:DropDownList>
                                </div> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-31T06:56:04.953

尝试这个

```
 DropDownList1.Items.Add(new ListItem("All Record")); 
```

如果您想添加具有价值的项目，那么

```
 DropDownList1.Items.Add(new ListItem("All Record","0"));

 //or if you want to add at particular index then

 DropDownList1.Items.Insert(0,new ListItem("All Record"));// 0 is index of item 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T07:00:35.160

在指定索引处插入项目

```
DropDownListID.Items.Insert(0, new ListItem("Default text", "Default value") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-04T06:08:04.690

```
DropDownList1.Items.Insert(0,new ListItem("AllRecords","itsValue_on_dropdownlist")); // use 0 to show "ALLRecords" text on top in dropdownlist 
```

我建议您也应该将值绑定到下拉列表。像这样 -

```
DropDownList1.DataValueField = "FirstName"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-18T07:01:57.560

首先在下拉列表中使用“addItems”函数编写 onLoad 声明标记 .aspx 文件，如下所示：

然后在cs文件中创建“addItems”函数。

```
<asp:DropDownList ID="DropDownList1" runat="server" OnLoad="addDeleteItems" OnSelectedIndexChanged="DropDownList1_SelectedIndexChanged">

protected void addItems(object sender, System.EventArgs e)
{
     DropDownList ddl = (DropDownList)sender;           
     ListItem newItem = new ListItem("rose", "i");
     ddl.Items.Add(newItem);
} 
```

# java - 如何通过在 url 中提供路径来上传文件

> ID：11734686
> 
> 赞同：0
> 
> 时间：2012-07-31T06:53:09.183
> 
> 标签：java, playframework, playframework-2.0

是否可以在 Play 中上传文件！框架仅通过在 url 中提供路径？例如我想打电话：

```
www.mywebsite.com/upload_PATH 
```

这对我来说非常重要，因为我想上传和处理大量数据。手动选择 1000 个文件非常耗时，我想编写一个程序来为我制作它:-) 我正在使用 Play with Java。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:00:55.563

如果`upload_PATH`是系统上的本地文件路径，则不是一个好方法。

您应该编写一个 Play 操作，您可以在其中上传文件，就像在[此示例](https://github.com/Ekito/mapMyCost-server/blob/master/app/controllers/Application.java#L105)中所做的那样。

然后，您应该编写一个 HTTP 客户端（由`main`Java 方法启动），它会检查您的文件并上传，然后调用 Play！行动。您可以使用[httpclient](http://hc.apache.org/httpcomponents-client-ga/httpclient/) Apache 库来编写客户端部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:28:03.520

正如**nico_ekito**写的`www.mywebsite.com/upload_from_local_path`那样行不通

如果文件量很大，您可以在远程服务器上创建临时文件夹并使用 FTP 上传文件。然后在您的应用程序中，您只需要进行上传后处理的操作，即。它可以检查文件是否有效并将其移动到计算的目的地并在需要时在数据库中注册。

其他可能性是使用一些 flash/ajax 多上传器作为示例[swfupload](http://code.google.com/p/swfupload/)（不知道，它只是从搜索引擎中首次点击）。如果您要将上传的可能性提供给您不想提供任何 FTP 访问权限的人，这种方法会更好。

最后，您可以混合解决方案 -> 使用上传器而不是 FTP，然后远程后期处理新项目。

# hibernate - Tomcat启动失败

> ID：11734690
> 
> 赞同：0
> 
> 时间：2012-07-31T06:53:36.563
> 
> 标签：hibernate, tomcat, netbeans-7

```
Starting of Tomcat failed, the server port 8084 is already in use.
D:\NetbeansProjects\Credit Card Management System\nbproject\build-impl.xml:731: 
Deployment error:
Starting of Tomcat failed, the server port 8084 is already in use.
See the server log for details.
    at org.netbeans.modules.j2ee.deployment.devmodules.api.Deployment.deploy(Deployment.java:200)
    at org.netbeans.modules.j2ee.ant.Deploy.execute(Deploy.java:106)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor128.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:390)
    at org.apache.tools.ant.Target.performTasks(Target.java:411)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.apache.tools.ant.module.bridge.impl.BridgeImpl.run(BridgeImpl.java:284)
    at org.apache.tools.ant.module.run.TargetExecutor.run(TargetExecutor.java:539)
    at org.netbeans.core.execution.RunClassThread.run(RunClassThread.java:154) 
```

我正在研究信用卡管理系统。它在部署项目时支持hibernate和struts，它给了我以下错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:55:57.870

Web-Server 的另一个服务器*实例*（可能是 Apache-tomcat）已经在运行，因此您必须停止该正在运行的实例或更改端口号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:04:32.710

检查端口是否被使用：

```
netstat -an |find /i "established" 
```

如果上述命令显示任何输出，则表示该端口已在使用中。在大多数情况下，可能是您忘记停止以前运行的实例。在任务管理器的进程选项卡中，您可以检查是否有一个已经在运行的 tomcat 进程。杀死进程并重新启动tomcat。

# php - 通过本地IP地址打开多个虚拟主机

> ID：11734691
> 
> 赞同：0
> 
> 时间：2012-07-31T06:53:38.433
> 
> 标签：php, apache, symfony1, osx-lion, mamp

我在 OSX 环境中使用 Apache、PHP (MAMP) 和 Symfony 框架进行开发。Symfony 需要使用虚拟主机进行本地开发，所以我在我的`/etc/apache2/hosts`文件中添加了这些行：

```
127.0.0.1   frontenda.dev
127.0.0.1   frontendb.dev 
```

然后在我的`/Applications/MAMP/conf/apache/extra/httpd.vhosts.conf`，我添加了这些行：

```
<VirtualHost *:80>
  ServerName frontenda.dev
  DocumentRoot /Users/geo/Sites/frontenda/www/
</VirtualHost>

<VirtualHost *:80>
  ServerName frontendb.dev
  DocumentRoot /Users/geo/Sites/frontendb/www/
</VirtualHost> 
```

我可以通过这些 url`http://frontenda.dev`或`http://frontendb.dev`. 我的问题是我应该怎么做（如果可能的话）使用 IP 地址而不是`frontenda.dev`or `frontendb.dev`？我的意思是，假设我的机器 ip `192.168.1.144`，我可以为不同的文件夹做`192.168.1.144/frontenda`甚至分配不同的端口号吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T01:16:31.640

我有一个更好的答案。[我使用来自 37signals http://xip.io/](http://xip.io/)的xip.io 让它工作。你可以这样做：

```
 10.0.0.1.xip.io   resolves to   10.0.0.1
    www.10.0.0.1.xip.io   resolves to   10.0.0.1
 mysite.10.0.0.1.xip.io   resolves to   10.0.0.1
foo.bar.10.0.0.1.xip.io   resolves to   10.0.0.1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:03:36.670

您可以使用 Alias 将不同的路径映射到不同的目录

```
Alias /frontenda /Users/geo/Sites/frontenda/www

Alias /frontendb /Users/geo/Sites/frontendb/www 
```

# apache - .htaccess modRewrite - 找出试图解析的底层 url？

> ID：11734694
> 
> 赞同：0
> 
> 时间：2012-07-31T06:53:53.920
> 
> 标签：apache, .htaccess, redirect, hosting

我在使用适用于我的本地测试设置的 htaccess 文件时遇到问题，但在上传到我的生产服务器时却没有，即使我在该服务器上还有其他具有有效 .htaccess 设置的站点。

有什么方法（可能使用自定义 404 页面）可以找出 .htaccess 已重写的 url，以便调试问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:12:18.367

你有什么问题？

给你一个内部服务器错误或没有执行你的任何规则？

在黑暗中拍摄...如果您的规则不匹配，可能是您的 .htaccess 中有类似的内容

```
RewriteRule /home/ /index.php?s=1&l=1 [L] 
```

...然后尝试更改

```
RewriteRule home /index.php?s=1&l=1 [L] 
```

没有前导斜杠“/”

# javascript - 如何在 express 中使用 socket.io 发布多个对象数据

> ID：11734701
> 
> 赞同：0
> 
> 时间：2012-07-31T06:54:13.553
> 
> 标签：javascript, jquery, node.js, express, socket.io

我设法用socket.io发布单个数据，但是如果我添加另一个（时间戳），那么它什么也没有显示。

应用程序.js

```
app.post('/update', function(req, res, next){
    io.sockets.emit("update", req.body);
    io.sockets.emit("update", Date.now());
    res.send({});
}); 
```

add_users.jade

```
 script(src='jquery-1.7.1.js')
    script(src='http://localhost:3002/socket.io/socket.io.js')
    script(type='text/javascript')
        var socket;
        socket =  io.connect('http://localhost:3002'); 
        socket.on('update', function(newUserAdded, time) {
            console.log("update: ", newUserAdded + "update: ", time)
        });
        $(function() {
            $("button").click(function() {
                $.post("/update", {
                    newUserAdded: $("input").val(),
                    time: getTime()
                });
            });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:05:27.737

它应该是`(new Date).getTime()`

# android - 从 Android 上的 .net Web 服务获取列表

> ID：11734702
> 
> 赞同：2
> 
> 时间：2012-07-31T06:54:14.003
> 
> 标签：android, web-services, ksoap2, android-spinner, android-ksoap2

我有 .net Web 服务，我想在 android 上使用它。此 Web 服务的方法返回 List(Of String) 并且我在 android 上没有得到响应。我能做些什么 ？这是代码..

我正在研究它 3 天，但我还没有找到任何解决方案。

简而言之，我需要一些来自 .net Web 服务的列表，并将该列表的项目添加到微调器。请帮我。

```
public class MainActivity extends Activity {

    private Spinner myspinner;
    private static final String METHOD_NAME = "Sektorler";  
    private static final String NAMESPACE = "http://tempuri.org/";  
    private static final String SOAP_ACTION = "http://tempuri.org/Sektorler";
    private static final String URL = "http://www.xxxxxxxxxx.com/webservice1.asmx";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        myspinner = (Spinner) findViewById(R.id.spinner1);
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.activity_main , SektorDoldur());
        myspinner.setAdapter(adapter);
    }

    private ArrayList<String> SektorDoldur() {

        ArrayList<String> sektorler = new ArrayList<String>();

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;     
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.debug = true;

        try {

       androidHttpTransport.call(SOAP_ACTION, envelope);
       SoapObject response = (SoapObject) envelope.getResponse();

       if (response.hasProperty("String")) {

       if (response.getPropertyAsString("String") == null) {
    //do something
       } else {

           for(int i=0;i<response.getPropertyCount();i++){
//             sektorler.add(i, response.getPropertyAsString("String"));
               sektorler.add(response.getPropertyAsString(i));
           }
        }

}

        } catch (Exception e) {

            e.printStackTrace();

        }

        return sektorler;

    } 
```

**我也在尝试这段代码，但它不起作用。**

```
public class MainActivity extends Activity {

    private Spinner myspinner;
    private static final String METHOD_NAME = "Sektorler";  
    private static final String NAMESPACE = "http://tempuri.org/";  
    private static final String SOAP_ACTION = "http://tempuri.org/Sektorler";
    private static final String URL = "http://www.xxxxxxxx.com/webservice1.asmx";
    private String[] denemeList;

    private String[] SektorDoldur(){
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;     
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.debug = true;

        try {

       androidHttpTransport.call(SOAP_ACTION, envelope);
       SoapObject response = (SoapObject) envelope.bodyIn;
       denemeList = new String[response.getPropertyCount()];

       for(int i=0;i<response.getPropertyCount();i++){ 
           denemeList[i] = response.getPropertyAsString(i).toString();
       }      
} 
        catch (Exception e) {           
            e.printStackTrace();
        }
        return denemeList;      
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        SektorDoldur();

        myspinner = (Spinner) findViewById(R.id.spinner1);
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.activity_main , denemeList);
        myspinner.setAdapter(adapter);

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T06:10:09.267

**我知道了 ！！**

**这是错误的；**

```
SoapObject response = (SoapObject) envelope.bodyIn; 
```

**让我们看看这段代码，它是真的；**

```
SoapObject response = (SoapObject) envelope.getResponse(); 
```

**最后有一些技巧。**

1.  首先从你的项目中删除 ksoap2 jar 文件。
2.  保存并关闭 Eclipse。
3.  然后复制 ksoap2 jar 文件，转到您的工作区文件夹。
4.  打开您的项目文件夹，单击“libs”文件夹并粘贴它。
5.  再次打开 Eclipse 并运行项目！！

    ```
     private Spinner myspinner;
        private static final String METHOD_NAME = "Sektorler";  
        private static final String NAMESPACE = "http://tempuri.org";   
        private static final String SOAP_ACTION = "http://tempuri.org/Sektorler";
        private static final String URL = "http://www.xxxxxxxxxx.com/webservice1.asmx";
        private String[] denemeList;

        private void SektorDoldur(){

            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.dotNet = true;     
            envelope.setOutputSoapObject(request);
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
            androidHttpTransport.debug = true;

            try {

           androidHttpTransport.call(SOAP_ACTION, envelope);
           SoapObject response = (SoapObject) envelope.getResponse();
           denemeList = new String[response.getPropertyCount()];

          for(int i=0;i<response.getPropertyCount();i++){ 

               denemeList[i] = response.getPropertyAsString(i).toString();

          }      
    } 
            catch (Exception e) {           
                e.printStackTrace();
            }       
        }

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            SektorDoldur();

            myspinner = (Spinner) findViewById(R.id.spinner1);
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, denemeList);
            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            myspinner.setAdapter(adapter);

        } 
    ```

# python - 如何在 Python 中绘制带有运动的图形

> ID：11734703
> 
> 赞同：0
> 
> 时间：2012-07-31T06:54:15.463
> 
> 标签：python, python-2.7

我正在用 Python 编写代码来绘制图表。给出输入后，图表将开始播放。正如我们在心电监护仪中看到的心电图波形一样。提供特定输入后，图形应根据提供的输入值开始播放。请帮我解决这个问题...

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:24:37.817

查看[rtgraph](http://rtgraph.sourceforge.net/)包。它可以做实时图表。它在 Linux 上使用 gtk/pygtk。

# android - 如何让我的谷歌帐户/个人资料图片显示为我在 android 中当前位置的地图标记？

> ID：11734709
> 
> 赞同：3
> 
> 时间：2012-07-31T06:54:31.110
> 
> 标签：android, android-mapview, android-maps

我在安卓上玩谷歌地图已经有一段时间了。我只是找不到任何链接/参考来做到这一点。

有什么方法可以从我登录的任何帐户中检索我的 google 帐户个人资料图片？我想用它作为我当前位置的标记。Google 地图应用程序可以做到这一点，当你试图显示你的当前位置时它非常整洁地点。

谢谢你的帮助...

# dns - 域控服务器和团队基础服务器可以安装在同一台机器上吗？

> ID：11734710
> 
> 赞同：0
> 
> 时间：2012-07-31T06:54:34.833
> 
> 标签：dns

我已经安装了团队基础服务器采用工作组样式，我发现用户管理很困难，所以我想adpot domain。域控服务器和团队基础服务器可以安装在同一台机器上吗？是否需要一些虚拟技术？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:50:29.153

是的，域控制器可以在同一台机器上，但不建议这样做。为此，您不需要任何虚拟机。实际上，将域控制器放在虚拟机上会使事情变得更加复杂，所以如果您只是第一次创建域，我会避免使用虚拟机来托管它。

# actionscript-3 - 事件侦听器的目标变量引用名称

> ID：11734714
> 
> 赞同：0
> 
> 时间：2012-07-31T06:54:43.533
> 
> 标签：actionscript-3, flash, mouseevent, flash-cs5

如何获取事件侦听器的目标变量引用名称

```
 var key1:BtnKey=new BtnKey;
    var key2:BtnKey=new BtnKey;
    key1.addEventListener(MouseEvent.CLICK,function(e:MouseEvent):void{
                checkAnswer(e,qset)
            });
    key2.addEventListener(MouseEvent.CLICK,function(e:MouseEvent):void{
                checkAnswer(e,qset)
            });

function checkAnswer(e:MouseEvent,qset:Number):void{
//here I want the target variable reference ("key1" or "key2")  
    //e.target only gives the movieclip refernce like "[Object BtnKey]"
} 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:19:05.317

用于`e.currentTarget`获取被点击的按钮。如果您需要确定是否有`key1`or `key2`，请使用严格的相等比较：

```
if (e.currentTarget === key1) {
    // Do something
} else if (e.currentTarget === key2) {
    // Do something else
} 
```

# php - 服务器上图像文件夹的路径

> ID：11734715
> 
> 赞同：0
> 
> 时间：2012-07-31T06:54:43.317
> 
> 标签：php, wordpress

我在服务器上的公共 html 文件夹中有一个 wordpress。

我想显示文件夹 Public_html--->Trial-->Wordpress_site-->uploads 中的图像

下面是page.php代码

```
 <?php

    $directory = dirname(__FILE__).'/uploads'; 

                        echo $directory;
                        try {    
                            // Styling for images

                            foreach ( new DirectoryIterator("/" . $directory) as $item ) {          
                                if ($item->isFile()) {

                                    echo "<div class=\"expand_image\">";
                                    $path = "/" . $directory . "/" . $item;
                                    echo $path;
                                    echo "<img src=/"". $path . "\" width=861 height=443  />";
                                    echo "</div>";
                                    }
                                }
                            }
                            catch(Exception $e) {
echo 'No images found for this player.<br />';
   }

     ?> 
```

图像没有显示出来。。

有谁知道一样吗？？

**编辑1**

我觉得这句话有问题

```
 echo "<img src=/"". $path . "\" width=861 height=443  />"; 
```

是吗？

**编辑2**

//home/softwar2/public_html/Pradnnya_blog/wordpress_site/wp-content/themes/deep-red/our_results/4thpanelfinal.jpg

是我回显时得到的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:07:28.220

[`__FILE__`](http://php.net/manual/en/language.constants.predefined.php)为您提供文件系统上当前文件的路径；但是，当您访问该网页并在标签中看到一个链接时，您会尝试将其作为 URL 而不是文件进行访问。为此，您可能会发现`$_SERVER['PHP_SELF']`有用的或另一个[$_SERVER 元素](http://php.net/manual/en/reserved.variables.server.php)。不过，在配置文件中包含 URL 可能会更好，因为有时可能未设置 $_SERVER。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:20:40.407

很好，有一点语法错误：

```
echo "<img src=\"". $path . "\" width=861 height=443  />"; 
```

您需要使用反斜杠来转义双引号。

# c# - C# 到 VB.NET 函数

> ID：11734723
> 
> 赞同：0
> 
> 时间：2012-07-31T06:55:14.987
> 
> 标签：c#, vb.net

我在 C# 中的这个函数有问题。我想将其转换为 VB.NET

这段代码是 C#

```
public Frm_Sched()
{
    dayView1.NewAppointment += new Calendar.NewAppointmentEventHandler(dayView1_NewAppointment);
}

void dayView1_NewAppointment(object sender, Calendar.NewAppointmentEventArgs args)
{
    Calendar.Appointment m_Appointment = new Calendar.Appointment();

    m_Appointment.StartDate = args.StartDate;
    m_Appointment.EndDate = args.EndDate;
    m_Appointment.Title = args.Title;

    oApp.Add(m_Appointment);
} 
```

如何将其转换为 VB.NET？我想在我的表单加载中调用这个事件

```
Private Sub Frm_Sched_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
End Sub 
```

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:02:31.423

直接翻译是：

```
Public Sub New()
    AddHandler dayView1.NewAppointment, AddressOf dayView1_NewAppointment
End Sub

Private Sub dayView1_NewAppointment(sender As Object, args As Calendar.NewAppointmentEventArgs)
    Dim m_Appointment = New Calendar.Appointment()

    m_Appointment.StartDate = args.StartDate
    m_Appointment.EndDate = args.EndDate
    m_Appointment.Title = args.Title

    oApp.Add(m_Appointment)
End Sub 
```

* * *

您总是可以使用像[这样的](http://www.developerfusion.com/tools/convert/csharp-to-vb/)自动翻译器，但它们在某些情况下通常会失败，例如不安全的代码（显然）和事件订阅。

# javascript - 如何在 Django 表单的 FileInput 小部件中设置可接受的文件类型

> ID：11734729
> 
> 赞同：0
> 
> 时间：2012-07-31T06:55:22.767
> 
> 标签：javascript, python, html, validation, django-forms

有没有办法在 django`forms.FileInput()`小部件中设置接受的文件类型？我希望它只接受 .txt 和 .pdf。

[文档](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#fileinput)，不包含任何内容。如果这根本不可能，我们如何在客户端为 django 表单添加验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:02:35.093

理想情况下，您应该在清理表单数据时执行此操作，如果它不是您想要的扩展类型，则返回错误。

但是有一个 django 片段显示了如何使用自定义表单字段执行此操作的示例：http: [//djangosnippets.org/snippets/977/](http://djangosnippets.org/snippets/977/)

# mysql - mysql中的这个错误是什么

> ID：11734730
> 
> 赞同：0
> 
> 时间：2012-07-31T06:55:26.330
> 
> 标签：mysql

我想在 tm_matrix 上触发以下查询，但给了我以下错误

```
mysql> INSERT INTO tm_matrix (VDT,VID)VALUES(replace(left(now(),10),'-',''),(SE
LECT CASE WHEN MAX(VID) IS NULL THEN 000001 ELSE (MAX(VID)+1) END AS VID FROM tm
_matrix)); 
```

> ERROR 1093 (HY000): 您不能在 FROM 子句中指定目标表 'tm_matrix' 进行更新

如果我在查询下触发然后给我以下错误

```
mysql> INSERT INTO tm_visitor (VDT,VID)VALUES(replace(left(now(),10),'-',''),SEL
ECT CASE WHEN MAX(VID) IS NULL THEN 000001 ELSE (MAX(VID)+1) END AS VID FROM tm_
visitor); 
```

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“SELEC T CASE WHEN MAX(VID) IS NULL THEN 000001 ELSE (MAX(VID)+1) END AS VID FROM”附近使用正确的语法

如果我使用以下查询，那么它会给我以下错误

```
mysql> INSERT INTO tm_visitor (VDT,VID)VALUES(replace(left(now(),10),'-',''),(SE
LECT CASE WHEN MAX(VID) IS NULL THEN 000001 ELSE (MAX(VID)+1) END AS VID)); 
```

错误 1054 (42S22)：“字段列表”中的未知列“VID”

更新

我试过以下

```
INSERT INTO tm_visitor (VDT,VID,NAME,CONTACT) SELECT REPLACE(LEFT(NOW(), 10), '-', ''), LPAD(COALESCE(MAX(VID) + 1, 000001),6,'0') FROM tm_visitor 
```

那么在这里我如何传递 NAME,CONTACT 的值，因为这里我们没有使用 values() 来插入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:10:41.240

```
INSERT INTO tm_matrix (VDT,VID)
SELECT replace(left(now(),10),'-',''), IFNULL(MAX(VID),0)+1 FROM tm_visitor 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:20:57.880

试试这个——

```
INSERT INTO tm_visitor (VDT,VID)
 SELECT REPLACE(LEFT(NOW(), 10), '-', ''), COALESCE(MAX(VID) + 1, 000001) FROM tm_visitor; 
```

# c++ - 指针指向的节点没有变化

> ID：11734734
> 
> 赞同：-1
> 
> 时间：2012-07-31T06:55:43.643
> 
> 标签：c++, multithreading, pointers, boost

我有一个问题，我的线程代码中有这个指针，它们正在那里修改，但是当它返回到主代码时，更改不是这样的：

线程

```
void threaded_function(Model_factory &mf, ppa::Node *root) { // threads management

try { // n try... 
```

主要的

```
 int main(int argc, char *argv[]) { ... 
```

在主要我正在创建一个节点根，然后在线程中节点被赋予序列并有一个布尔值更改为 true，如：

```
ppa::Node *root; 
```

在线程正在工作（线程组）中，我可以根据需要获取并设置该布尔值，但是当线程组以 join all 结束时（这是 boost），指针根在这一行给我 0

```
cout << root->has_sequence() << endl; 
```

在此继续之后，节点再次充满了一些东西，所以我想问的是为什么我的节点指针没有反映线程中的变化，是设计还是我错了（可能是第二个），我该怎么办一个全局根节点可以解决我的问题，但为什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:51:43.093

如果您有竞争条件，您必须怀疑您正在访问未锁定的关键部分。我注意到您正在手动锁定和解锁 mutex 变量。这可能会导致您的代码出错。例如，这个结构看起来特别令人震惊：

```
for (int i = 0; i < deque_done.size(); i++) {

    tuple_compare(deque_done.at(i));

    result_mutex.unlock();

} 
```

您可以考虑使用`boost::recursive_mutex`and`boost::recursive_mutex::scoped_lock`来管理锁的获取和释放，而不是手动锁定和解锁。

```
boost::recursive_mutex result_mutex;

void foo () {
    boost::recursive_mutex::scoped_lock lock(result_mutex);
    //...
} 
```

如果你真的坚持设计一个允许从多个线程重入的递归算法，也许你可以使用`boost::shared_mutex`, 和`boost::shared_lock`/`boost::upgradeable_lock`作为读锁，和`boost::unique_lock`/`boost::upgrade_to_unique_lock`用于写访问。[您可以点击此链接作为示例。](https://stackoverflow.com/a/989816/315052)

# modx - ModX：编辑资源时不出现资源内容框

> ID：11734736
> 
> 赞同：0
> 
> 时间：2012-07-31T06:55:48.610
> 
> 标签：modx, modx-evolution

我去编辑我的 ModX Evo 网站上的一个页面，但无法访问我资源中的任何内容。通常包含 TinyMCE 的“资源内容”框根本没有出现。我已经在多个浏览器甚至另一台机器上尝试过，但它只是没有出现。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:56:16.630

不确定 Evo，但在 Revo 上，我会检查资源类型设置，听起来您已将其设置为 Web 链接、静态资源或符号链接。

# mysql - 从mysql获取树结构数据

> ID：11734737
> 
> 赞同：1
> 
> 时间：2012-07-31T06:55:48.890
> 
> 标签：mysql

我正在使用 mysql，问题是，我有一个像 '101' 这样的组 id，我想获取他帐户下的所有设备 id 以及其子组下的那些 id，例如：如果组 id 是 101：那么device_id 应该是 1\. 44444 2\. 33333 3\. 55555

```
Table : Groups        --------------------------------------------------------------------------------------
    group_id          |      parent_id          |          group_name
    --------------------------------------------------------------------------------------
    101               |      null               |         matrix
    102               |      101                |         sub_matrix1
    103               |      101                |         sub_matrix2
    104               |      null               |         abc        
    105               |      104                |         sub_abc
    106               |      null               |         mega
    ---------------------------------------------------------------------------------------
    Table : Devices
         --------------------------------------------------------------------------------------
    device_id           |    group_id            |          device_name 
    --------------------------------------------------------------------------------------
    44444               |      101               |         m1
    33333               |      101               |         m1
    22222               |      102               |         m1
    55555               |      103               |         m1        
    88888               |      104               |         m1
    --------------------------------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:10:59.773

这是一篇关于 mysql 中分层数据的好文章：http: [//mikehillyer.com/articles/managing-hierarchical-data-in-mysql/](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)

这样的事情可能会奏效；

```
SELECT t1.device_name
FROM devices AS t1
INNER JOIN groups AS t2 ON t2.group_id = t1.group_id
WHERE t1.group_id = '101' OR t2.parent_id = '101'; 
```

# arrays - emberjs 数组绑定不自动更新

> ID：11734743
> 
> 赞同：1
> 
> 时间：2012-07-31T06:56:16.550
> 
> 标签：arrays, binding, ember.js

我尝试从另一个数组的更改中绑定一个数组。但它不起作用。

test.js 代码如下：

```
var App = Em.Application.create();

Item = Ember.Object.extend({
    name: null
});

CompareItem = Ember.Object.extend({
    i: null,
    j: null
});

Row = Ember.Object.extend({
    title: null,
    tds: []
});

// see emberjs.com/documention "changes in arrays"
App.Items = Ember.Object.create({
    items: [
    Item.create({name: "01"})
    ,Item.create({name: "02"})
    ,Item.create({name: "03"})
    ],
    compareItems: function() {
    var tdItems = [];
    var items = this.get('items');
    items.forEach(function(left, i, lself) {
        var cprItems = [];
        items.forEach(function(right, j, rself) {
        var compareItem = null;
        compareItem = CompareItem.create({
            i: i,
            j: j
        });
        cprItems[j] = compareItem;
        });
        var row = Row.create({
        title: "["+i+"]",
        tds: cprItems
        });
        tdItems[i] = row;
    });
    return tdItems;
    }.property('items.@each')
});

App.Input = Em.TextField.extend({
    change: function(evt){
    var items = this.value.split(" ");
    items.forEach(function(item, index, all) {
        if ($.trim(item)!=""){
        var it = Item.create({name: item});   
        App.Items.get("items").pushObject(it);
        }
    });
    }
});

App.Table = Em.View.extend({
    templateName: 'bsc-table',
    items: App.Items.get("items")
});

App.EditTr = Em.View.extend({
    compareItems: App.Items.get("compareItems")
});

App.EditTh = Em.View.extend({
});

App.EditTd = Em.View.extend({
});
// Em.run.sync();
var bsctable = App.Table.create();
bsctable.app 
```

html代码如下：

```
<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="ie6"> <![endif]--> <!--[if IE 7 ]>    <html lang="en" class="ie7"> <![endif]--> <!--[if IE 8 ]>    <html lang="en" class="ie8"> <![endif]--> <!--[if IE 9 ]>    <html lang="en" class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html> <!--<![endif]-->
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title></title>
  <meta name="description" content="">
  <meta name="author" content="">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="stylesheet" href="css/style.css?v=2">
  <style type="text/css">
  .border-table {
  border: 1px solid #960; border-collapse: collapse;
  }
  .border-table th,td {
  border: 1px solid #960; border-collapse: collapse; padding: 5px;
  }
  .txtInput {width:50px;}
  </style>

  <!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <script type="text/x-handlebars" data-template-name="bsc-table">
    <table class="border-table">
      <thead>
    <tr>
      <th>items</th>
      {{#each items}}
      <th>
        {{name}}
      </th>
      {{/each}}
    </tr>
      </thead>
      <tbody>
    {{#view App.EditTr}}
    {{#each compareItems}}
    <tr>
      {{#view App.EditTh itemTrBinding="this"}}
      <th>
        [{{itemTr.title}}]
      </th>
      {{#each itemTr.tds}}
      {{#view App.EditTd itemTdBinding="this"}}
      <td>
        [{{itemTd.i}}]
        [{{itemTd.j}}]
      </td>
      {{/view}}
      {{/each}}
      {{/view}}
    </tr>
    {{/each}}
    {{/view}}
      </tbody>
    </table>
  </script>
</head>
<body>
  <script type="text/x-handlebars">
    {{#view App.Input}}{{/view}}
  </script>

  <script src="js/libs/jquery-1.7.2.min.js"></script>
  <script src="js/libs/ember-0.9.8.1.min.js"></script>
  <script src="js/test.js"></script>
</body>
</html> 
```

那么，如果你在文本字段中输入“04 05 06”，除了表格将是 6*6，但现在不是。像这样 compareItems 每次都是新的，但是当项目发生变化时，表格使用旧的。如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T22:10:33.120

我认为您应该使用数组代理...

[http://docs.emberjs.com/symbols/Ember.ArrayProxy.html](http://docs.emberjs.com/symbols/Ember.ArrayProxy.html)

ArrayProxy 包装任何其他实现 Ember.Array 和/或 Ember.MutableArray 的对象，转发所有请求。这使得它对于许多绑定用例或能够交换底层数组有用的其他情况非常有用。

一个简单的用法示例：

```
var pets = ['dog', 'cat', 'fish'];
var ap = Ember.ArrayProxy.create({ content: Ember.A(pets) });
ap.get('firstObject'); // => 'dog'
ap.set('content', ['amoeba', 'paramecium']);
ap.get('firstObject'); // => 'amoeba' 
```

# java - 骆驼弹簧-WS。设置自定义 SOAP 标头

> ID：11734745
> 
> 赞同：2
> 
> 时间：2012-07-31T06:56:21.823
> 
> 标签：java, soap, header, apache-camel, spring-ws

我已经使用 Spring DSL 配置了 Camel SOAP 代理服务。一切都很好，直到我发现我需要在里面为 SOAP 响应消息设置一个自定义标头。

我正在使用 spring-ws 组件和最新的 Camel 2.10.0。

这是我的春季路线的示例（我跳过了一些不相关的转换）：

```
<bean id="ahc_binding" class="ru.fabit.ExampleAHCBinding"/>

<bean id="response_assembler" class="ru.fabit.ExampleResponseAssembler"/>

<camel:camelContext id="get_regions">

    <camel:dataFormats>
        <camel:jaxb id="main_jaxb" prettyPrint="true"
                    contextPath="ru.fabit.rosstelecom.webservice.models.smev" />
    </camel:dataFormats>

    <camel:route>
        <camel:from uri="spring-ws:rootqname:{http://fabit.ru/service}getRegionsRequest?endpointMapping=#endpointMapping"/>

        <camel:unmarshal ref="main_jaxb"/>

        <camel:to uri="ahc:http://localhost:9001/service/regions"/>

        <camel:unmarshal ref="main_jaxb"/>

        <camel:process ref="response_assembler"/>

    </camel:route>
</camel:camelContext> 
```

这是 ExampleResponseAssembler.java（“response_assembler”bean）的代码。它是路线中的最后一个元素。并且有责任从某些外部服务（实际上是从 AHC 组件）获取未编组的响应对象，并为整个路由组装正确的 SOAP 响应。

```
public class ExampleResponseAssembler implements Processor {

    @Override
    public void process(final Exchange exchange) throws Exception {

        final Object responseMessage = exchange.getIn().getBody();
        final GetRegionsResponse regionsResponse = new GetRegionsResponse();
        final MessageDataType messageData = new MessageDataType();
        final AppDataType appData = new AppDataType();

        appData.setAny(responseMessage);
        messageData.setAppData(appData);
        regionsResponse.setMessageData(messageData);

        exchange.getOut().setBody(regionsResponse);

        final HeaderType header = exchange.getProperty("exampleHeader", HeaderType.class);
        exchange.getOut().setHeader("CamelSpringWebServiceSoapHeader", header);
    }
} 
```

当我以这种方式设置 Body 时，它会被正确解析。我可以在 SaopUI 中看到它。但标题不存在。我猜这是设置 SOAP 标头的一种天真的方法。而且我找不到任何相关信息。

尽管我能够找到一些关于此问题的 JIRA 票证 -[链接](https://issues.apache.org/jira/browse/CAMEL-4515)，但仍不清楚如何处理设置一些自定义 SOAP 标头。并且工单被标记为“未解决”。也许我在这里需要一些覆盖巫毒魔法（覆盖 MessageFactory、MessageSender 或其他东西）。似乎是一个小问题，但...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:35:28.807

似乎是附加补丁的问题，可能会解决此问题。

[https://issues.apache.org/jira/browse/CAMEL-4515](https://issues.apache.org/jira/browse/CAMEL-4515)

您可能只实现自己的组件，该组件源自 camel-spring-ws（虽然没有测试过）。

在您覆盖的 SpringWebServiceConsumer 中添加标头设置（从交换复制）。在您覆盖的 SpringWebServiceEndpoint 覆盖 createConsumer 以创建您的自定义消费者。在您覆盖的 SpringWebServiceComponent 覆盖 createEndpoint 以创建您的自定义端点。

应该做的伎俩，也许与它周围的一些其他代码。然后只需从您的新组件创建您的路线。

您可能想下载骆驼源代码并查看 spring ws 组件，其中的代码并不多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-22T19:46:41.077

不幸的是，当前的实现不支持多个 SOAP 标头。我是说：

```
<soap-env:Header>
<MyFirstHeader>...</MyFirstHeader>
<MySecondHeader>...</MySecondHeader>
</soap-env:Header> 
```

如何提交补丁？

顺便说一句，Spring-WS 方面有一个解决方法：http: [//leakfromjavaheap.blogspot.com/2014/05/multiple-soap-headers-in-apache-camels.html](http://leakfromjavaheap.blogspot.com/2014/05/multiple-soap-headers-in-apache-camels.html)

# events - 在配置中添加事件监听器

> ID：11734752
> 
> 赞同：0
> 
> 时间：2012-07-31T06:56:45.843
> 
> 标签：events, configuration, sencha-touch-2, event-listener

我知道可以将侦听器添加到在事件触发后触发的事件，如下所示：

```
oDocumentCategories.addAfterListener("activeitemchange", function(oContainer, sValue, oldValue){
    //Do stuff here
}); 
```

但是是否也可以在创建元素时附加它们？
像这样：

```
var oButton = Ext.create("Ext.Button", {
            text: "Button",
            listeners: {
                tap: function(){
                    //Tap event here
                }
            }
        }); 
```

但只有这样才能成为后听者。

**问题**
是否可以在创建元素时附加事件监听器？
就像`listeners`配置属性一样，但随后是事件监听器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:39:02.047

```
 var oButton = Ext.create("Ext.Button", {
      text: "Button",
      listeners: {
            tap: {
               fn: function(){
                //Tap event here
               },
               // scope: this,
               // options: {single: true}
               order: 'after'
           }
      }
 }); 
```

干杯，奥列格

# c# - 为计算的属性实现 INotfyPropertyChanged

> ID：11734757
> 
> 赞同：1
> 
> 时间：2012-07-31T06:57:33.790
> 
> 标签：c#, wpf, mvvm, inotifypropertychanged, inotifycollectionchanged

我对 MVVM 有点陌生，想知道

假设我定义了一个`ObservableCollection<Differences> Diffs`属性。我还有以下属性：

```
public bool IsSame
{
    get
    {
         return Diffs.Count == 0;
    }
 } 
```

我不明白我应该如何实现`OnPropertyChanged`for `IsSame`，因为它在 Diff 列表中是隐含的。

*   我应该附加到 List`OnCollectionChanged`事件然后检查它是否发生变化`IsSame`？
*   我是否应该使用支持字段并处理 List `OnCollectionChanged`？

非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:19:45.650

> 我是否应该使用支持字段并处理 List OnCollectionChanged？

正确地做到这一点：是的。

当相关属性发生变化时，由源来引发所有事件。您的主要问题是检测何时`IsSame`实际更改（即从 1 变为 0 或从 0 变为 1）。您需要一个支持字段，或者您将更频繁地引发事件（更多）然后需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:05:52.873

当您收集更改时，您应该调用 OnPropertyChanged("IsSame"); - 这是正确的。但何时调用取决于您的视图模型逻辑。

编辑：假设您有一个添加和删除命令，那么您必须调用 OnPropertyChanged("IsSame"); 在这些方法中。

# cocos2d-x - Cocos2dx RegisterTouchDispatcher

> ID：11734762
> 
> 赞同：0
> 
> 时间：2012-07-31T06:58:06.813
> 
> 标签：cocos2d-x

我已经开始在 iphone 中使用 cocos2d-x。我创建了一个继承自 cclayer 的类。现在，当我尝试使用触摸调度程序注册它时，它会崩溃。

在 .h 文件中：

类 BasePage : 公共 cocos2d::CCLayer

和 .m 文件：

```
CCDirector::sharedDirector()->getTouchDispatcher()->addTargetedDelegate(this, INT_MIN + 1, true); 
```

它在 ccobject.m 文件中崩溃：

```
void CCObject::retain(void)
{
    CCAssert(m_uReference > 0, "reference count should greater than 0");[here is crash]

    ++m_uReference;
} 
```

你能给我一些解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T02:42:02.817

```
bool SampleLayer::init()
{
   if (!CCLayer::create())
          return false;

    setTouchEnabled(true);

    return true;
}

void SampleLayer::onEnter()
{

CCDirector::sharedDirector()->getTouchDispatcher()->addTargetedDelegate(this, 0, true);
    CCNode::onEnter();

}

void SampleLayer::onExit()
{

    CCDirector::sharedDirector()->getTouchDispatcher()->removeDelegate(this);
    CCNode::onExit();

}

bool SampleLayer::ccTouchBegan(CCTouch* touch, CCEvent* event)
{
    return true;
}

void SampleLayer::ccTouchMoved(CCTouch* touch, CCEvent* event)
{}

void SampleLayer::ccTouchEnded(CCTouch* touch, CCEvent* event)
{} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T09:02:08.690

您只能在 .m（或 .cpp）文件中写入这一行

```
CCDirector::sharedDirector()->getTouchDispatcher()->addStandardDelegate(this, 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T05:11:09.313

事实上，您不需要实现自己的 RegisterTouchDispatcher。

只需在构造函数或 onEnter 中调用下面的方法

```
setTouchEnabled(true);
setTouchMode(kCCTouchesOneByOne); 
```

基类会为你做所有的事情。

此外，如果您想启用多点触控，您应该将触控模式设置为**kCCTouchesAllAtOnce**

ps：如果你在自己的类中重写了onEnter，请记住在你自己的onEnter函数中调用**BaseClass::onEnter()**，比如

```
MyLayer::onEnter()
{
    CCLayer::onEnter();
    // do my own stuff
} 
```

# .net - ImageResizer 处理提供的图像参考

> ID：11734767
> 
> 赞同：5
> 
> 时间：2012-07-31T06:58:21.153
> 
> 标签：.net, image-processing, imageresizer

我们正在使用来自 imageresizing.net 的图像调整器，并且看到了一些奇怪的行为。

当我们从流中读取图像然后调整图像大小时，我们无法再访问原始图像的属性。

以下代码将重现该问题。

```
 static void Main(string[] args)
        {
            using(var httpPostedFileBaseImage = new FileStream(@"C:\test.jpg",FileMode.Open, FileAccess.Read, FileShare.Read))
            {
                using(var uploadedImage = Image.FromStream(httpPostedFileBaseImage))
                {

                    Console.WriteLine(uploadedImage.Width);
                    var resizedImage = ImageBuilder.Current.Build(uploadedImage,
                                                                  new ResizeSettings("width=110;height=83"));

                    Console.WriteLine(uploadedImage.Width);
                }
            }
        } 
```

在 ImageBuilder 行之前，我们可以看到 uploadImage.Width 很好，但之后它会抛出异常：

```
System.ArgumentException was unhandled
  HResult=-2147024809
  Message=Parameter is not valid.
  Source=System.Drawing
  StackTrace:
       at System.Drawing.Image.get_Width()
       at ConsoleApplication6.Program.Main(String[] args) in C:\Users\Daniel\Desktop\ConsoleApplication6\ConsoleApplication6\Program.cs:line 25
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

我们在这里做错了什么，或者这可能是图像调整器中的错误？

注意：问题最初来自一个上传图像的 asp.net mvc 应用程序，这就是为什么该变量被称为 httpPostedFileBaseImage 并且我们使用 Image.FromStream 而不是 Image.FromFile

该图像是![在此处输入图像描述](../Images/79af28005681372a41c06e7d26a42219.png)，但它似乎发生在大多数图像上。

编辑：

图片调整大小后尝试以下操作无济于事

```
httpPostedFileBaseImage.Seek(0, SeekOrigin.Begin); 
```

编辑2：

这让我感到困惑 ![在此处输入图像描述](../Images/5ca3683de05fe0f5723a8e16cee2a9ea.png)

文档似乎暗示“除非 disposeSource=true，否则不会处理它，还是我误读了这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T00:06:02.437

不知道我是怎么错过的，但是 ImageBuilder 有一个参数告诉它不要处理源

```
var resizedImage = ImageBuilder.Current.Build(uploadedImage,new ResizeSettings("width=110;height=83"),false); 
```

即使这修复了它，它也很奇怪，因为文档默认情况下它是错误的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:00:03.703

您是否尝试将流位置重置为 0 ？如果您的图像大小调整库将其向前移动，则需要在再次使用之前将其倒回。

# c# - 如何使用 Lucene.Net 和 .Net 构建搜索引擎（Web 应用程序）？

> ID：11734769
> 
> 赞同：-1
> 
> 时间：2012-07-31T06:58:30.973
> 
> 标签：c#, asp.net, .net, lucene.net, lucene

我想为我的部门内部网站开发一个搜索引擎，让同事在 html 页面中搜索文件下载和信息。

我建议使用 Lucene.Net & .Net C#/VB 来构建搜索（Web 应用程序）。但是很难在上面找到教程/示例，我不知道如何对文档、html 页面内容进行索引...

我正在寻找相关的教程/参考。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T08:19:40.247

[这](http://jsprunger.com/getting-started-with-lucene-net/)涵盖了非常基础的内容，但 lucene 和搜索是一个很大的话题，我从这里开始，并在您进行过程中提出更多问题。

# javascript - 为 node.js 锁定 javascript

> ID：11734772
> 
> 赞同：1
> 
> 时间：2012-07-31T06:58:47.713
> 
> 标签：javascript, node.js

```
//News object
var newsItem = function(heading, type, time, details, ...)
{
  this.heading = heading;
  this.type = type;
  this.time = time;
  this.details = details;
  ....
};

// array of all newsItem objects
var newsItems = [news1, news2, news....]; 
```

我用上面的 node.js 服务器端代码做了两件事：

1.  我通过从某个新闻站点获取价值来更新我的 newsItems 对象。
2.  我从 newsItems 对象创建 html 以在 UI 上显示它。

问题：

如何确保在更新我的 newsItems 对象时不使用它来创建 html。

由于这是多线程的，一个线程服务于请求和后台线程更新来自新闻站点的对象。我需要在 javascript 中进行某种锁定。我在这里遇到了比赛条件。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:29:14.277

如果您将 Node.js 作为服务器运行，则不需要任何锁。这是一个单线程环境。

# tsql - 如何为此运行查询

> ID：11734778
> 
> 赞同：1
> 
> 时间：2012-07-31T06:59:47.190
> 
> 标签：tsql, sql-server-2008-r2

MyTable 有四列。

```
Condition1 |  Condition2  | CondEquation | EquationResult
---------------------------------------------------------    
     1     |       0      |    C1 & C2   |        0
     1     |       1      |    C1 & C2   |        1 
```

EquationResult 数据是选择 C1 和 C2。它是 CondEquation 的求值表达式。

如何使用 SQL 语句更新第 4 列。无论如何我可以为此编写函数吗？SQL Server 2008 R2 谢谢你，史密斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:40:59.767

当然。但是我只能为您提供基于光标的解决方案，我希望这不是问题。

```
use testing 
-- create table test_01 (c1 int, c2 int, ce nvarchar(100), result int)

insert into test_01 (c1, c2, ce) values (1, 0, 'c1 & c2')
insert into test_01 (c1, c2, ce) values (1, 1, 'c1 & c2')
insert into test_01 (c1, c2, ce) values (7, 3, 'c1 & c2')
insert into test_01 (c1, c2, ce) values (2, 4, 'c1 | c2')

declare @eq nvarchar(100)
declare @sql_statement nvarchar(500)

declare c cursor for select ce from test_01
open c
fetch next from c into @eq

while @@fetch_status = 0
    begin
    -- update test_01 set result = (c1 & c2) where current of c
    set @sql_statement = 'update test_01 set result = (' + @eq + ') where current of c'
    exec sp_executesql @sql_statement

    fetch next from c into @eq
    end

close c
deallocate c

select * from test_01 
```

这给出了以下结果：

```
c1  c2  ce  result
1   0   c1 & c2 0
1   1   c1 & c2 1
7   3   c1 & c2 3
2   4   c1 | c2 6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:34:52.990

这是一个脚本，即使表中的数据发生变化，它也会显示 cEquationResult，它只能处理位运算符 & 和 |

代表您的表格的表格：

```
create table t_test(condition1 bit, condition2 bit, condition3 bit, CondEquation varchar(20))
insert t_test values(1,0, 0, 'c1&c2|c3')
insert t_test values(1,1, 1, 'c1&c2 | c3')

go 
```

计算计算位的函数。是的，这是一个卑鄙的人：

```
create function f_t(@condition1 bit, @condition2 bit, @condition3 bit, @CondEquation varchar(10))
returns bit
as
begin
declare @result bit
;with a as
(
select replace(replace(replace(replace(@CondEquation, 'c1',@condition1), 'c2',@condition2), 'c3',@condition3), ' ','') n
),
b as
(
select n, 1 rn from a
union all
select stuff(n, patindex('%&%', n) - 1, 3 , case when substring(n, patindex('%&%', n) - 1, 3) like '%0%' then 0 else 1 end), rn+1
from b
where patindex('%&%', n)> 0
), c as
(
select n from (
select n, row_number() over (order by rn desc) rn2 from b
) a where rn2 = 1
), d as
(
select n, 1 rn from c
union all
select stuff(n, patindex('%|%', n) - 1, 3 , case when substring(n, patindex('%|%', n) - 1, 3) like '%1%' then 1 else 0 end), rn+1
from d
where patindex('%|%', n)> 0
), e as
(
select n from (
select n, row_number() over (order by rn desc) rn2 from d
) a where rn2 = 1
)
select @result=n from e
return @result
end
go 
```

添加额外字段以显示计算的位

```
ALTER TABLE t_test ADD cEquationResult AS 
dbo.f_t(condition1, condition2, condition3, CondEquation) 
```

测试脚本：

```
select * from t_test 
```

# asp.net - ASP.NET MVC 4 自动加载插件 dll 无需重建

> ID：11734789
> 
> 赞同：1
> 
> 时间：2012-07-31T07:00:35.363
> 
> 标签：asp.net, asp.net-mvc, plugins

我对此插件系统有疑问：[.NET 4.0 ASP.NET MVC 3 plugin architecture with embedded views](http://www.codeproject.com/Articles/358360/NET-4-0-ASP-NET-MVC-3-plug-in-architecture-with-e)

当我启动 ptoject（使用 ctrl + f5 在 Visual Studio 中的本地网站）时，当我从插件文件夹中删除 plugin.dll 时，这是可能的。系统自动检测并禁用模块，或者当我将新插件 .dll 放入插件文件夹时，系统自动检测新插件而无需完全重建解决方案？我只需要插件系统，当用户将其安装到应用程序时不需要重新启动服务器。

感谢您的帮助，对不起我的英语！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:11:12.420

请注意插件架构：一旦您在 AppDomain 中加载了程序集，就无法卸载它（请参阅[如何从主 AppDomain 中卸载程序集？](https://stackoverflow.com/questions/123391/how-to-unload-an-assembly-from-the-primary-appdomain)）。

您可能想看看 MEF：http: [//msdn.microsoft.com/en-us/library/system.componentmodel.composition%28VS.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.composition%28VS.100%29.aspx)

# javascript - 在backbone.js 中的嵌套模型

> ID：11734790
> 
> 赞同：2
> 
> 时间：2012-07-31T07:00:36.370
> 
> 标签：javascript, model-view-controller, backbone.js

如果我有一个深度嵌套的模型图，来自服务器（很多子对象，其中一些是数组）。当我将对象转换为模型时，将对象的每个子对象分别转换为模型和集合是一种好习惯吗？这将很方便，因为它将减少应该如何调用的混淆。例如，有这样的东西要清楚得多：

```
myModel.get("child1").get("collection1").get(0); 
```

代替：

```
myModel.get("child1").collection1[0]; 
```

另一方面，如果我们试图在运行时转换它们，它可能会变成性能地狱，尤其是在对象图非常深的情况下。

那里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:38:43.073

您应该使用[Backbone.relational](https://github.com/PaulUithol/Backbone-relational/)来为您处理它。

# c++ - 似乎从 Copy Constructor 获得了段错误？

> ID：11734799
> 
> 赞同：0
> 
> 时间：2012-07-31T07:01:10.333
> 
> 标签：c++, segmentation-fault

我正在为一个简单的“节点”类编写一些 C++ 代码。这基本上是一个用于管理线性链表的类。我通常使用结构来执行此操作，但我正在尝试更好地处理 OOP 和类。到目前为止，我对 Node 类的了解是（注意：String 类是我的典型“字符串”类的版本（精简版），它实现了复制构造函数、赋值重载、析构函数等。在测试中它有工作得很好，似乎完全独立）：

```
class Node {
public:

    //Constructor
    //-----------

    Node() : next_(0) {} //inline (String constructor called)

    //Destructor
    //----------

    ~Node(); 

    //Copy Constructor
    //----------------

    Node(const Node &);    

    //Operator Overload: =
    //---------------------
    //In conjunction with copy constructor.  Protects Class.

    Node & operator=(const Node &);   

private:

    String relatedEntry_;
    Node * next_;
}; 
```

创建一个实例可以正常工作（即。`Node node;`）但是当我创建一个调用复制构造函数的实例时，我最终会在程序的最后出现段错误，因为它正在清理。将结构用于链表与类之间的区别对我来说有点小技巧，我认为我在这里遗漏了一些关键。下面是默认构造函数、复制构造函数和重载赋值运算符的实现：

```
//Constructor inlined

//Destructor
Node::~Node()
{
    Node * curr = next_;
    while (curr) //cycle through LL and delete nodes
    {
        Node * temp = curr; //hold onto current
        curr = curr->next_; //increment one
        delete temp; //delete former current
    }
}

//Copy Constructor
Node::Node(const Node & cp)
{
    std::cout << "in CopyCon" << std::endl;
    relatedEntry_ = cp.relatedEntry_; //calls String class copy constructor/assignment overload
    Node * curr = cp.next_; //for clarity, for traversal
    while (curr) //copies related entry structure
    {
        Node * oldNext = next_;
        next_ = new Node;
        next_->next_ = oldNext; //'next' field (assign prior)
        next_->relatedEntry_ = curr->relatedEntry_; //String class copy
        curr = curr->next_; //increment
    }
}

//OO:  =
Node & Node::operator=(const Node & cp)
{
    std::cout << "in OO: =" << std::endl;
    if (this == &cp)
        return *this; //self assignment
    delete next_; //delete LL
    relatedEntry_ = cp.relatedEntry_; //String Class Assignment Overload
    Node * curr = cp.next_; //for clarity, for traversal
    while (curr)
    {
        Node * oldNext = next_; //hold onto old
        next_ = new Node; 
        next_->next_ = oldNext; //set next to old
        next_->relatedEntry_ = curr->relatedEntry_; //set this string to cp string
        curr = curr->next_; //increment
    }
    return *this;
} 
```

请注意，使用重载分配函数似乎可以正常工作（没有段错误），即使它实际上是相同的代码......我假设这与两个对象在分配发生 *之前已经初始化的事实有关？*

```
//This seems to work ok
Node node1;
Node node2;
node2 = node1; 
```

我已经在这个错误上待了几个小时，我必须休息一下。我真的很感激对此的任何见解。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:15:11.690

在复制构造函数循环中，您有这一行：

```
Node * oldNext = next_; 
```

但是，在循环的第一轮中，值`next_`可以是，嗯，任何东西，很可能不是`NULL`。这意味着最后一个节点将有一个非空指针。

将其初始化为`NULL`循环之前，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:37:39.787

您混淆了 List 和 Node 的概念。您应该编写一个管理一系列节点的 List 类。您的 Node 析构函数或多或少是您的 List 析构函数的外观，Node 本身不需要析构函数。

具体出问题的是，您的 Node 析构函数在您编写`delete temp;`此代码时会递归调用自身，这会删除其余的节点序列，但随后您的 Node 析构函数会循环并尝试再次删除它们。

# php - Yii CDbCriteria sql

> ID：11734801
> 
> 赞同：2
> 
> 时间：2012-07-31T07:01:14.473
> 
> 标签：php, yii

我正在开发 Yii 驱动的应用程序。我想转换这个 SQL：

```
SELECT m.sendDate, m.status, c.name, c.email, mt.name, mt.subject, CONCAT( op.firstName,  ' ', op.lastName ) operator
FROM  `mail` m, client c, mailTemplate mt, operator op
WHERE m.customerID = c.id
AND m.operatorID = op.id
AND m.templateID = mt.id
AND c.name LIKE  '%L%'
AND c.email LIKE  '%@gmail.com%'
AND m.sendDate <  '2012-07-31'
AND m.sendDate >  '2012-06-30' 
```

进入 CDBcriteria 但不知道如何。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T07:19:30.890

首先，您必须创建 4 个模型：Mail、Client、MailTemplate、Operator。

在邮件模型中定义关系：

```
public function relations()
{
    return array(
        'client' => array(self::BELONGS_TO, 'Client', 'customerID'),
        'operator' => array(self::BELONGS_TO, 'Operator', 'operatorID'),
        'mailTemplate' => array(self::BELONGS_TO, 'MailTemplate', 'templateID'),
    );
} 
```

和...

```
$criteria = new CDbCriteria;
$criteria->select = new CDbExpression('t.sendDate, t.status, client.name, client.email, mailTemplate.name, mailTemplate.subject, CONCAT( operator.firstName,  " ", operator.lastName ) operator');
$criteria->addSearchCondition('client.name', 'L', true);
$criteria->addSearchCondition('client.email', '@gmail.com', true);
$criteria->compare('mailTemplate.sendDate', '<2012-07-31');
$criteria->compare('mailTemplate.sendDate', '>2012-06-30'); 
```

好吧，现在我们可以找到项目：

```
$mails = Mail::model()->with(array('client', 'operator', 'mailTemplate'))->findAll($criteria); 
```

第二个问题的更新：

在您的 Mail 模型中定义方法搜索：

```
public function search()
{
    /* Criteria from my first answer */
    return new CActiveDataProvider('Mail', array(
        'criteria' => $criteria,
    ));
} 
```

在gridview中，您必须使用关系的列 $data 是具有关系的邮件模型的一项。

```
'columns' => array(
    array(
        'name' => 'prop_defined_in_mail_model',
        'value' => '$data->client->id',
    ),
), 
```

# android - 从 assets 文件夹加载图像

> ID：11734803
> 
> 赞同：64
> 
> 时间：2012-07-31T07:01:25.357
> 
> 标签：android, image, assets

我正在尝试从`asset`文件夹加载图像，然后将其设置为`ImageView`. 我知道如果我使用它会更好`R.id.*`，但前提是我不知道图像的 id。基本上，我试图通过其文件名动态加载图像。

例如，我在`database`表示中随机检索一个元素，假设是*'* *cow'*，现在我的应用程序要做的是通过. 这也适用于 中的所有元素。（假设是，对于每个元素都有一个等效的图像）*`ImageView``database`*

 *提前致谢。

**编辑**

忘了问题，如何从`asset`文件夹中加载图像？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-07-31T07:05:22.977

签出此[代码](https://xjaphx.wordpress.com/2011/10/02/store-and-use-files-in-assets/)。在本教程中，您可以找到如何从资产文件夹加载图像。

// 加载图片

```
try 
{
    // get input stream
    InputStream ims = getAssets().open("avatar.jpg");
    // load image as Drawable
    Drawable d = Drawable.createFromStream(ims, null);
    // set image to ImageView
    mImage.setImageDrawable(d);
    ims .close();
}
catch(IOException ex) 
{
    return;
} 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-07-31T07:09:02.983

这个给你，

```
 public Bitmap getBitmapFromAssets(String fileName) throws IOException {
    AssetManager assetManager = getAssets();

    InputStream istr = assetManager.open(fileName);
    Bitmap bitmap = BitmapFactory.decodeStream(istr);
    istr.close();

    return bitmap;
} 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-07-31T07:04:59.627

如果您知道代码中的文件名，调用它不会有问题：

```
ImageView iw= (ImageView)findViewById(R.id.imageView1);  
int resID = getResources().getIdentifier(drawableName, "drawable",  getPackageName());
iw.setImageResource(resID); 
```

您的文件名将与 drawableName 同名，因此您不必处理资产。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-06-12T10:12:17.743

其中一些答案可能会回答这个问题，但我从不喜欢其中任何一个，所以我最终写了这篇文章，这是我对社区的帮助。

`Bitmap`从资产中获取：

```
public Bitmap loadBitmapFromAssets(Context context, String path)
{
    InputStream stream = null;
    try
    {
        stream = context.getAssets().open(path);
        return BitmapFactory.decodeStream(stream);
    }
    catch (Exception ignored) {} finally
    {
        try
        {
            if(stream != null)
            {
                stream.close();
            }
        } catch (Exception ignored) {}
    }
    return null;
} 
```

`Drawable`从资产中获取：

```
public Drawable loadDrawableFromAssets(Context context, String path)
{
    InputStream stream = null;
    try
    {
        stream = context.getAssets().open(path);
        return Drawable.createFromStream(stream, null);
    }
    catch (Exception ignored) {} finally
    {
        try
        {
            if(stream != null)
            {
                stream.close();
            }
        } catch (Exception ignored) {}
    }
    return null;
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-02-20T09:31:45.230

根据**Android 开发者文档，使用****位图**加载会降低应用程序的性能。这是[一个链接](https://developer.android.com/topic/performance/graphics/)！所以 doc 建议使用**Glide**库。

如果您想**从 assets 文件夹中加载图像，**那么使用**Glide**库可以帮助您更轻松。

只需将依赖项添加到来自[https://github.com/bumptech/glide的 build.gradle (Module:app)](https://github.com/bumptech/glide)

```
 dependencies {
  implementation 'com.github.bumptech.glide:glide:4.9.0'
  annotationProcessor 'com.github.bumptech.glide:compiler:4.9.0'
} 
```

示例：

```
// For a simple view:
@Override public void onCreate(Bundle savedInstanceState) {
  ...
  ImageView imageView = (ImageView) findViewById(R.id.my_image_view);

  Glide.with(this).load("file:///android_asset/img/fruit/cherries.jpg").into(imageView);
} 
```

如果上述方法不起作用：*将此*对象替换为下面代码中的*视图*对象（仅当您在代码中应用了如下 Inflate 方法时）。

```
 LayoutInflater mInflater =  LayoutInflater.from(mContext);
        view  = mInflater.inflate(R.layout.book,parent,false); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-06-29T06:24:50.340

```
public static Bitmap getImageFromAssetsFile(Context mContext, String fileName) {
        Bitmap image = null;
        AssetManager am = mContext.getResources().getAssets();
        try {
            InputStream is = am.open(fileName);
            image = BitmapFactory.decodeStream(is);
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return image;
    } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-05-07T13:54:16.503

这在我的用例中有效：

```
AssetManager assetManager = getAssets();
ImageView imageView = (ImageView) findViewById(R.id.imageView);
try (
        //declaration of inputStream in try-with-resources statement will automatically close inputStream
        // ==> no explicit inputStream.close() in additional block finally {...} necessary
        InputStream inputStream = assetManager.open("products/product001.jpg")
) {
    Bitmap bitmap = BitmapFactory.decodeStream(inputStream);
    imageView.setImageBitmap(bitmap);
} catch (IOException ex) {
    //ignored
} 
```

（另见[https://javarevisited.blogspot.com/2014/10/right-way-to-close-inputstream-file-resource-in-java.html](https://javarevisited.blogspot.com/2014/10/right-way-to-close-inputstream-file-resource-in-java.html)）

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-10-18T18:38:26.610

```
WebView web = (WebView) findViewById(R.id.webView);
web.loadUrl("file:///android_asset/pract_recommend_section1_pic2.png");
web.getSettings().setBuiltInZoomControls(true); 
```*

# xml - 向远程服务器发送请求

> ID：11734805
> 
> 赞同：0
> 
> 时间：2012-07-31T07:01:34.317
> 
> 标签：xml, soap

我可以访问有关法律公司的网站数据信息。

我想在我的网站上显示这些信息，以利用它们。他们告诉我使用 xmlrequest 但我不知道如何实际提交 Siret 号码并检索信息

我被告知这是一个类型系统getdata。

他们给了我一个示例查询

```
<xmlrequest>
    <header>
        <username>demo</username>
        <password>********</password>
        <operation>getcompanyinformation</operation>
        <language>EN</language>
        <country>FR</country>
        <chargereference>[Demonstration.aspx]</chargereference>
    </header>
    <body>
        <package>standard</package>
        <companynumber>NUMERO SIRET</companynumber>
    </body>
</xmlrequest> 
```

我将此代码放在页面 .xml 上，但是当我在浏览器中加载它时，它只显示没有 xml 标记的文本。

所以我不知道如何将消息发送到服务器并接收响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:09:07.260

`to exploit them`?

我猜你使用的是谷歌浏览器，对吧？默认情况下，Chrome 会将 XML 作为文本。如果您查看源代码，XML 就在那里。

# wxpython - 如何在 wxpython balloontip 中将消息类型更改为 Web 链接 url

> ID：11734807
> 
> 赞同：0
> 
> 时间：2012-07-31T07:01:35.450
> 
> 标签：wxpython

如何将消息类型更改为 wxpython balloontip 中的 Web 链接 url，使用户能够单击以打开链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:53:17.240

据我所知，这不是小部件内置的。您可以覆盖 OnClose 方法并使其打开一个 URL。请参阅BalloonTip 调用的 http://wxpython.org/Phoenix/docs/html/lib.agw.balloontip.BalloonFrame.html#lib-agw-balloontip-balloonframe ( [http://wxpython.org/Phoenix/docs/](http://wxpython.org/Phoenix/docs/html/lib.agw.balloontip.BalloonFrame.html#lib-agw-balloontip-balloonframe) html/lib.agw.balloontip.html)

# java - 当我尝试在我的 Web 应用程序中创建超过 250 个线程时，我收到无法连接，池错误超时等待空闲对象

> ID：11734808
> 
> 赞同：7
> 
> 时间：2012-07-31T07:01:41.393
> 
> 标签：java, mysql, hibernate

> **可能重复：**
> [连接池异常：无法获得连接，池错误超时等待空闲对象](https://stackoverflow.com/questions/7277760/connection-pool-exception-cannot-get-a-connection-pool-error-timeout-waiting-f)

当我尝试在我的 Web 应用程序中创建超过 250 个线程时，我收到无法连接，池错误超时等待空闲对象错误。我正在使用 JSF 2.0 和 Hibernate 创建 Web 应用程序。

我尝试过修改 hibernate.xml、server.xml、context.xml 以及 mysql 属性。

**以下是我得到的。**

```
WARN (JDBCExceptionReporter.java:233) - SQL Error: 0, SQLState: null
ERROR (JDBCExceptionReporter.java:234) - Cannot get a connection, pool error Timeout waiting for idle object
ERROR (BaseServlet.java:301) - ******** java.lang.Thread.getStackTrace(Thread.java:1426)
    Caused by: org.hibernate.exception.GenericJDBCException: Cannot open connection
    org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:140)
    org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:128)
    org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:52)
    org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:449)
    org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)
    org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:160)
    org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:81)
    org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1473)
    sun.reflect.GeneratedMethodAccessor378.invoke(Unknown Source)
    Caused by: org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot get a connection, pool error Timeout waiting for idle object
    org.apache.tomcat.dbcp.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:114)
    org.apache.tomcat.dbcp.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)
    org.hibernate.connection.DatasourceConnectionProvider.getConnection(DatasourceConnectionProvider.java:92)
    org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446)
    org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)
    org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:160)
    org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:81)
    org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1473)
    sun.reflect.GeneratedMethodAccessor378.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    Caused by: java.util.NoSuchElementException: Timeout waiting for idle object
    org.apache.tomcat.dbcp.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1144)
    org.apache.tomcat.dbcp.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:106)
    org.apache.tomcat.dbcp.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)
    org.hibernate.connection.DatasourceConnectionProvider.getConnection(DatasourceConnectionProvider.java:92)
    org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446)
    org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)
    org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:160)
    org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:81)
    org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1473)
    sun.reflect.GeneratedMethodAccessor378.invoke(Unknown Source) 
```

如果对此有任何想法，请帮助我......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T07:23:13.337

也许您已经为**“死”**连接设置了超时，并且某些查询需要**更长**的时间。这意味着您的**池将一个繁忙的连接**作为“死”从池中删除，并从**数据库**请求另一个- 直到数据库拔掉插头。

要对此进行调试，请为您的连接池**启用日志记录**，以便您可以看到它何时请求新连接。

还要检查你的**mysql**连接设置。并尝试在下次完成**db** coz时**关闭连接**（超出限制），连接状态将变为**dead**。**`maxConnectionAge`**

 ***** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T07:18:55.423

我以前遇到过这样的问题，你需要做的是
`close hibernate sessions when you are done with it.`

例如

```
Session sess = factory.openSession();
 Transaction tx;
 try {
     tx = sess.beginTransaction();
     //do some work
     ...
     tx.commit();
 }
 catch (Exception e) {
     if (tx!=null) tx.rollback();
     throw e;
 }
 finally {
     sess.close(); // closing session
 } 
```****

# asp.net - 经典 asp 代码中的查询字符串以捕获整数值

> ID：11734825
> 
> 赞同：0
> 
> 时间：2012-07-31T07:03:31.453
> 
> 标签：asp.net, asp-classic, vbscript, adodb

我在下面编写了应该基于两个参数从数据库中搜索的代码片段

1.  整数值（船舶 ID）
2.  字符串值（船舶名称）。

但是使用以下代码，我可以使用 SHIP 名称从数据库中获取数据，即使用第二种情况。但无法使用 SHIP 的 ID 搜索数据。

以下是代码片段。非常感谢您对这些的任何帮助。

```
nIMO = sql_ship_friendly(request.querystring("nIMO"))
if IsNumeric(nIMO) = false then
    nIMO = ""
else
    nIMO = cInt(nIMO)
end if

sVessel = sql_ship_friendly(UCase(request.querystring("sVessel")),10)

if not nIMO = "" then   

    'search based on vessel id

sql = "SELECT IMO_NBR, VESSEL_NM, COALESCE(SHIP_TYP,'0') AS SHIP_TYP, COALESCE(DWT_WT, 0) AS DWT_WT, COALESCE(YEAR_BUILT_NBR, 0) AS YEAR_BUILT_NBR FROM RSP_VESSEL_VW WHERE ACTIVE_IND='Y' AND IMO_NBR = 7723948"
    Set db1 = Server.CreateObject("ADODB.Connection")
    db1.Open GV_VIEW_DB_String 
    Set rs = db1.Execute(sql)
    Set dbl = nothing "

elseif not sVessel = "" then

    'search based on vessel number

sql = "SELECT IMO_NBR, VESSEL_NM,  COALESCE(SHIP_TYP,'0') AS SHIP_TYP, COALESCE(DWT_WT, 0) AS DWT_WT, COALESCE(YEAR_BUILT_NBR , 0) AS YEAR_BUILT_NBR FROM RSP_VESSEL_VW WHERE VESSEL_NM LIKE '"&SVESSEL&"%' AND ACTIVE_IND='Y'" 
```

> ' response.write sql Set db1 = Server.CreateObject("ADODB.Connection") db1.Open GV_VIEW_DB_String Set rs = db1.Execute(sql) Set dbl = nothing

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T06:13:09.643

问题是您的 SQL 语句中没有使用 nIMO 变量作为搜索条件的地方。忘记使用 IsNumeric(nIMO) = false... 改用 isNull 函数。尝试这个。

```
if not isnull( request.querystring("nIMO")) then
    nIMO = cInt(nIMO)
    sql = "SELECT IMO_NBR, VESSEL_NM, COALESCE(SHIP_TYP,'0') AS SHIP_TYP," &_
          "COALESCE(DWT_WT, 0) AS DWT_WT, COALESCE(YEAR_BUILT_NBR, 0) AS " &_
          "YEAR_BUILT_NBR FROM RSP_VESSEL_VW WHERE ACTIVE_IND='Y' AND " &_
          "IMO_NBR =" & nIMO
    ...
    ...
    ...
 end if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:10:49.130

如果您的第一个案例您已放置以下

> sql = "选择 IMO_NBR，VESSEL_NM，COALESCE(SHIP_TYP，'0') 作为 SHIP_TYP，COALESCE(DWT_WT，0) 作为 DWT_WT，COALESCE(YEAR_BUILT_NBR，0) 作为 YEAR_BUILT_NBR 来自 RSP_VESSEL_VW，其中 ACTIVE_IND='Y' 和 IMO_NBR = 7723948"

但我可以看到您在查询中使用了**nIMO参数。**放上它，你应该得到结果..

您可以像 AND IMO_NBR = nIMO 一样使用它。

# php - MySQL PHP将查询中的单词与数据库列匹配

> ID：11734828
> 
> 赞同：0
> 
> 时间：2012-07-31T07:03:36.370
> 
> 标签：php, mysql

我有以下表结构 [id - title - tag - ..] 我想实现以下目标：

如果表中有一条标题为“I love my job and it is my hobby”的记录 如果提交的查询包含句子中的两个单词，则应选择该句子。例如查询“爱情爱好”。它应该给我上面的标题，而不是例如“我爱我的工作”。至少是先匹配查询关键字的单词多的句子，然后是匹配查询关键字的单词少的句子。

如何在表格的标题列上进行此搜索？

如果解释不清楚，我深表歉意......非常乐意帮助澄清。

谢谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:05:28.293

尝试这个 ：

> SELECT title FROM your_table WHERE title LIKE '%love%' AND title LIKE '%hobby%'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:10:00.710

查看 mysql 内置的[全文搜索](https://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html)功能。在[布尔模式下](https://dev.mysql.com/doc/refman/5.5/en/fulltext-boolean.html)，您可以将查询转换为`+love +hobby`并返回结果，而无需进行全表扫描。请注意，这仅适用于 myisam 表，可能希望将索引数据移出主表，因为 myisam 不支持外键或事务之类的东西。

对于更高级的自由文本索引，您可以尝试[sphinx](http://sphinxsearch.com/)（也有 mysql 外观界面）或[solr](http://lucene.apache.org/solr/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T07:10:42.427

如果您使用的是 MyISAM 或 innoDB，则可以使用 MySQL 全文搜索：

```
SELECT * FROM table_name WHERE MATCH (title) AGAINST ('love hobby' IN BOOLEAN MODE); 
```

它还将搜索单个单词。

阅读：[https ://dev.mysql.com/doc/refman/5.5/en/fulltext-boolean.html](https://dev.mysql.com/doc/refman/5.5/en/fulltext-boolean.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T07:09:26.710

你也可以使用 MySQL`REGEXP`

```
SELECT title FROM table WHERE title REGEXP ' love .+ hobby'; 
```

如果您将其作为单个字符串，请尝试：

```
SELECT title FROM table WHERE title REGEXP REPLACE('love hobby', ' ', '.+ '); 
```

# oracle - oracle触发查询

> ID：11734831
> 
> 赞同：0
> 
> 时间：2012-07-31T07:03:48.953
> 
> 标签：oracle, triggers, plsql, jobs, procedure

我有一个触发器，它将数据从一个表发送到另一个数据库中的另一个表。一切正常。

问题是有一个新概念`END DATE`，其中，如果`END DATE`一个人出现，该行应该在该特定日期到达另一个表。

**例如：如果某人的结束日期是 8 月 31 日，它应该只在那天进行，但是当然，我的触发器在事件更改时触发（当 enddate 设置为 8 月 31 日时）..**

你能告诉我我能做些什么来设置行继续`ENDDATE`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:29:38.980

听起来你不想要触发器。听起来你想要一份工作。例如，如果您创建一个过程来传输`end_date`今天的所有行

```
CREATE OR REPLACE PROCEDURE move_rows_with_end_date(
  p_end_date IN DATE DEFAULT trunc(SYSDATE) 
)
AS
BEGIN
  INSERT INTO table_name@remote_database( <<list of columns>> )
    SELECT <<list of columns>>
      FROM table_name
     WHERE end_date = trunc(sysdate);
END; 
```

然后您可以创建一个每天午夜运行该过程的作业

```
DECLARE
  l_jobno PLS_INTEGER;
BEGIN
  dbms_job.submit( l_jobno,
                   'BEGIN move_rows_with_end_date; END;',
                   trunc(sysdate+1),
                   'trunc(sysdate+1)' );
  commit;
END; 
```

# asp.net - 页面刷新时避免最后一个事件

> ID：11734833
> 
> 赞同：0
> 
> 时间：2012-07-31T07:04:00.140
> 
> 标签：asp.net

当我刷新页面时，最后一个事件也被“重新加载”，例如尝试将相同的数据插入数据库。

我怎样才能避免这种情况？（使用 C#）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:05:23.633

最简单和最常见的解决方案是在您完成插入数据库后将用户重定向到不同的页面（例如“谢谢”页面）：

```
Response.Redirect("ThankYou.aspx"); 
```

这样，如果用户重新加载页面，他会重新加载“谢谢”页面，并且不会再次在服务器上执行任何操作。

如果你想坚持一页，另一种处理问题的常用方法是使用 Session 变量作为“标志”：

```
if (Session["inserted_to_db"] == null)
{
    //insert to database...
    //......
    //......
    Session["inserted_to_db"] = true;
}
else
{
    //already inserted, ignore or throw error
} 
```

# bash - curl unescape 输出文件名

> ID：11734834
> 
> 赞同：5
> 
> 时间：2012-07-31T07:04:02.817
> 
> 标签：bash, curl, escaping

如果 URL 中有`%20`文件名，则指定`-O`将保留它，而首选空格。

libcurl 有`curl_easy_unescape`，但 bash 中的 curl 二进制文件似乎没有一种简单的方法来取消转义输出文件名。但是，默认情况下 wget 不会转义。

目前我从 url 中提取文件名，取消转义，然后使用`-o`.

我想知道是否存在更简单/内置的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T08:38:17.137

不，不幸的是，目前没有办法告诉 curl 对 -O 创建的文件名进行 URL 解码。感觉是一个好主意，在未来提供......

# cocoa - 可可：被苹果迷惑参考：可可查看指南

> ID：11734836
> 
> 赞同：0
> 
> 时间：2012-07-31T07:04:14.087
> 
> 标签：cocoa

可可视图指南描述了如何创建自定义视图。但我很困惑可可是否会调用视图的 initWithFrame: 方法。

![在此处输入图像描述](../Images/70a9775a64aa821ea4d1dfd089822ec3.png)

如何创建自定义视图。 ![如何创建自定义视图](../Images/3329a529cac76a436bde5b8f38f5e3d2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:55:26.727

`-initWithFrame:`仅当您在 IB 中使用**自定义视图**调色板时才会为您的自定义视图调用。例如，如果您在 IB 中创建文本字段并将其设置为您的自定义文本字段子类，`-initWithFrame:`则不会调用但`-initWithCoder:`会调用。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-31T07:06:44.237

我认为这篇文章很清楚。如果你在 Interface Builder 中创建东西，`initWithFrame`将不会被调用；否则，它将被调用。

# asp.net-mvc - SignalR 未向客户端广播 - （移动浏览器）通过 wifi 连接

> ID：11734841
> 
> 赞同：1
> 
> 时间：2012-07-31T07:04:45.933
> 
> 标签：asp.net-mvc, knockout.js, signalr

我一直在尝试向连接到我的集线器的所有客户端广播消息，所有桌面浏览器（IE 9、Chrome 20.x）都会收到消息，但通过 WiFi 连接的移动浏览器除外。我在 IIS7 中部署了应用程序并使用在 LAN 中访问它。

所以我拥有的服务器代码如下 -

```
[HubName("notifications")]
public class Notifications : Hub
{
    try
    {
      using (var context = new xxxEntities())
        {
         // EF code that post the record to the database
             Clients.taskAdded(message);
             return true;
        }
     }
     catch (Exception ex)
     {
        Caller.reportError("Unable to create notification message. Make sure title length is between 10 and 140");
        return false;
      } 
```

客户端代码 -

```
//Handlers for our Hub callbacks  
//Invoked from our TaskHub.cs  
this.hub.taskAdded = function (t) {
messages.push(new notificationViewModel(t.Id, t.Message, t.User, t.Notified, self));
//if (guid != test.guid) //notify all clients except the caller
}; 
```

这一切都适用于桌面浏览器，我使用 knockout.js 来刷新绑定到 HTML 元素（例如列表）的数据模型。当任务被添加到数据库中时，所有桌面浏览器客户端都得到了刷新，除了移动客户端。

所以你知道为什么移动浏览器没有收到通知吗？

**更新 -** 我在 IE 9 中也有同样的问题，从 IE 的开发人员工具中复制了堆栈

它使用长轮询传输，我相信 IE 不支持网络套接字，因此 signalR 将传输切换到“长轮询”

这是它每 2 秒尝试一次的 URL

URL - /m.Notifications/signalr/reconnect?transport=longPolling&connectionId=311eed98-4e1d-4a0c-a012-2a41b20eded0&connectionData=%5B%7B%22name%22%3A%22notifications%22%7D%5D&messageId=18&tid=7

Method - GET Result - 500 (Http response code) Initiator - JS 库 XMLHttpRequest

## *你调用的对象是空的。*

**堆栈跟踪：**

```
[NullReferenceException: Object reference not set to an instance of an object.]
System.Web.HttpContext.GetWebSocketInitStatus() +251
System.Web.HttpContextWrapper.get_IsWebSocketRequest() +46
SignalR.Hosting.AspNet.AspNetResponse.get_IsClientConnected() +48
SignalR.Transports.TransportHeartBeat.AddConnection(ITrackingConnection connection) +280
SignalR.Transports.LongPollingTransport.ProcessReceiveRequest(ITransportConnection connection, Action postReceive) +38
SignalR.TaskAsyncHelper.Interleave(Func`3 before, Func`1 after, T arg, TaskCompletionSource`1 tcs) +181
SignalR.Transports.LongPollingTransport.ProcessRequest(ITransportConnection connection) +295
SignalR.PersistentConnection.ProcessRequestAsync(HostContext context) +892
SignalR.Hosting.AspNet.AspNetHandler.ProcessRequestAsync(HttpContextBase context) +866
System.Web.TaskAsyncHelper.BeginTask(Func`1 taskFunc, AsyncCallback callback, Object state) +50     System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +12519412
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +288 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:45:29.120

新版本运行良好，我从[https://github.com/SignalR/SignalR/](https://github.com/SignalR/SignalR/)下载了最新源 我看到有针对长轮询传输的修复，假设这个问题也已经解决

我将进一步审查自 0.5.2 以来修复的内容

**一项观察**- 在网络选项卡下的 IE 9 开发人员工具中，您将看到一个正在运行的请求（主要是最后一个请求），状态为“待处理”，当您收到通知/或您向服务器发送某些内容时，状态立即更改，对于不支持 Web 套接字的浏览器，这应该是长轮询技术。

# delphi - 如何在运行时在 FireMonkey 中使用鼠标选择 3D 对象

> ID：11734843
> 
> 赞同：2
> 
> 时间：2012-07-31T07:04:57.527
> 
> 标签：delphi, object, 3d, firemonkey

我现在已经搜索了很长时间，但没有找到答案。请给我一点帮助。我在 TVieport3D 中有各种 3D 对象，我想用鼠标在运行时模式下选择它们。但我不知道该怎么做。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:06:51.090

您不需要任何特殊操作即可在 Firemonkey 中实现采摘。每个 3-d 对象已经是一个可以响应鼠标动作的组件。如果您的对象是设计时对象，只需在视口中选择它们并处理它们的 ONMouseClick 事件，如果它们是运行时创建的，则在运行时将您的拾取事件分配给它们的 OnMOuseclick 事件属性。

# c# - ASP.Net 中的会话启动自定义函数

> ID：11734848
> 
> 赞同：-1
> 
> 时间：2012-07-31T07:05:18.063
> 
> 标签：c#, asp.net

我是 asp.net 的菜鸟。我正在 asp.net 3.5 中开发一个应用程序，我需要在请求打开网站时启动计时器，并在页面关闭时结束。听说过 Global.asax 文件。但是，有没有可能从 Global.asax 调用另一个类的函数。任何人帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:16:54.247

`class`是的，您可以通过创建文件来调用文件的功能`object`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:11:06.673

是的，您可以从应用程序事件文件的处理程序中实例化`classes`和调用。`methods`

```
public class Foo {
   public string bar(){ 
     return "Hello";
   }
} 
```

创建 Foo 的实例：

```
Foo foo=new Foo();
var value=foo.bar(); 
```

# c++ - 什么时候可以在初始化列表中省略外括号？

> ID：11734861
> 
> 赞同：51
> 
> 时间：2012-07-31T07:06:01.537
> 
> 标签：c++, c++11, visual-c++-2010

编译下面的代码时，VC2010 中出现错误 C2078。

```
struct A
  {
  int foo;
  double bar;
  };

std::array<A, 2> a1 = 
  // error C2078: too many initializers
  {
    {0, 0.1},
    {2, 3.4}
  };

// OK
std::array<double, 2> a2 = {0.1, 2.3}; 
```

我发现正确的语法`a1`是

```
std::array<A, 2> a1 = 
  {{
    {0, 0.1},
    {2, 3.4}
  }}; 
```

问题是：为什么需要额外的大括号`a1`但不需要`a2`？

**更新**

这个问题似乎并不特定于 std::array。一些例子：

```
struct B
  {
  int foo[2];
  };

// OK
B meow1 = {1,2};
B bark1 = {{1,2}};

struct C
  {
  struct 
    { 
    int a, b; 
    } foo;
  };

// OK
C meow2 = {1,2};
C bark2 = {{1,2}};

struct D
  {
  struct 
    { 
    int a, b; 
    } foo[2];
  };

D meow3 = {{1,2},{3,4}};  // error C2078: too many initializers
D bark3 = {{{1,2},{3,4}}}; 
```

我仍然不明白为什么`struct D`会给出错误，但 B 和 C 没有。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-07-31T07:18:35.877

需要额外的大括号，因为`std::array`它是一个聚合和 POD，与标准库中的其他容器不同。`std::array`没有用户定义的构造函数。它的第一个数据成员是一个大小数组`N`（您将其作为模板参数传递），并且该成员直接使用初始化程序进行初始化。直接初始化的*内部*数组需要额外的大括号。

情况是一样的：

```
//define this aggregate - no user-defined constructor
struct Aarray
{
   A data[2];  //data is an internal array
}; 
```

你将如何初始化它？如果你这样做：

```
Aarray a1 =
{
   {0, 0.1},
   {2, 3.4}
}; 
```

它给出了[编译错误](http://ideone.com/z0ky3)：

> 错误：“Aarray”的初始化程序太多

这与您在 a 的情况下遇到的错误*相同*`std::array`（如果您使用 GCC）。

所以正确的做法是使用*大括号*，如下所示：

```
Aarray a1 =
{
  {  //<--this tells the compiler that initialization of `data` starts

        { //<-- initialization of `data[0]` starts

           0, 0.1

        }, //<-- initialization of `data[0]` ends

       {2, 3.4}  //initialization of data[1] starts and ends, as above

  } //<--this tells the compiler that initialization of `data` ends
}; 
```

[编译得](http://ideone.com/t7AdR)很好。再一次，需要额外的大括号，因为您正在初始化*内部*数组。

--

现在的问题是为什么在 的情况下不需要额外的大括号`double`？

~~这是因为`double`不是聚合，`A`而是。换句话说，`std::array<double, 2>`是聚合的聚合，而`std::array<A, 2>`是聚合¹的聚合的聚合。~~

~~^(1\. 我认为在 double 的情况下仍然需要额外的大括号（像[这样](http://ideone.com/wZkeo)），以完全符合标准，但是代码没有它们也可以工作。看来我需要再次挖掘规范！).~~

# 更多关于牙套和额外牙套的信息

我仔细研究了规范。本节（来自 C++11 的第 8.5.1/11 节）很有趣，适用于这种情况：

> 在表格声明中

```
T x = { a }; 
```

> **可以在初始化列表中省略大括号，如下所示**。如果初始化器列表以左大括号开头，则后续的初始化器子句的逗号分隔列表初始化子聚合的成员；初始化子句比成员多是错误的。但是，如果子聚合的初始化器列表不以左大括号开头，则仅从列表中获取足够的初始化器子句来初始化子聚合的成员；任何剩余的初始化子句都被留下来初始化当前子聚合是其成员的聚合的下一个成员。[ 例子：

```
float y[4][3] = {
{ 1, 3, 5 },
{ 2, 4, 6 },
{ 3, 5, 7 },
}; 
```

> 是一个完全支撑的初始化：1、3 和 5 初始化数组 的第一行`y[0]`，即`y[0][0]`、`y[0][1]`和`y[0][2]`。同样，接下来的两行初始化`y[1]`和`y[2]`。初始化器提前结束，因此`y[3]s`元素的初始化就像使用 float() 形式的表达式显式初始化一样，即使用 0.0 初始化。在下面的例子中，初始化列表中的大括号被省略了；但是初始化器列表与上面示例的完全支撑初始化器列表具有相同的效果，

```
float y[4][3] = {
1, 3, 5, 2, 4, 6, 3, 5, 7
}; 
```

> y 的初始化程序以左大括号开头，但 for`y[0]`没有，因此使用列表中的三个元素。同样，接下来的三个依次为`y[1]`和`y[2]`。—结束示例]

根据我对上述引用的理解，我可以说应该允许以下内容：

```
//OKAY. Braces are completely elided for the inner-aggregate
std::array<A, 2> X =   
{
  0, 0.1,
  2, 3.4
};

//OKAY. Completely-braced initialization
std::array<A, 2> Y = 
{{
   {0, 0.1},
   {2, 3.4}
}}; 
```

在第一个中，内部聚合的大括号被完全省略，而第二个具有完全大括号的初始化。在您的情况下（的情况下`double`），初始化使用第一种方法（内部聚合*完全*省略了大括号）。

但这应该是不允许的：

```
//ILL-FORMED : neither braces-elided, nor fully-braced
std::array<A, 2> Z = 
{
  {0, 0.1},
  {2, 3.4}
}; 
```

它既不是括号省略，也没有足够的括号来进行完全括号初始化。因此，它是不正确的。

# c# - WCF - 两种方法之间的通信

> ID：11734862
> 
> 赞同：2
> 
> 时间：2012-07-31T07:06:02.713
> 
> 标签：c#, .net, wcf, c#-4.0

我有一个 WCF 客户端，它通过两种方法要求订单确认和 WCF 服务：

1) UpdateOrder - 更新数据库中的订单数据（UpdateOrder 调用来自外部服务）
2) GetConfirmationResult - 保持结果返回，直到订单状态从待处理变为其他状态。

问题是，如何在 WCF 中通知从 UpdateOrder 到 GetConfirmationResult，订单状态已更改？

更新：最好，如果我可以将 InstanceContextMode 保留为 Per-Call。

更新 2：假设可能的订单状态为待处理、已确认、已拒绝。ConfirmOrder 可以将订单状态更改为 Confirmed 或 Rejected，GetConfirmationResult 不应该返回结果，直到它被 Confirm 订单更改。

更新 3：我已经更改了带有序列的图像以显示整个堆栈。

![在此处输入图像描述](../Images/35cd4518d4cda8ff57d6d4b00f8f3278.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:46:45.823

你说你有一个支持这个服务器的数据库。然后它会像这样简单，半伪：

```
public YourService : YourServiceInterface
{
    public void UpdateOrder(Order order)
    {
        using (context = new DatabaseContext())
        {
            context.Orders.Where(o => o.ID == order.ID).First().IsConfirmed = order.IsConfirmed;
            context.SaveChanges();
        }
    }

    public Boolean? GetConfirmationResult(Order order)
    {
        using (context = new DatabaseContext())
        {
            return context.Orders.Where(o => o.ID == order.ID).First().IsConfirmed;
        }
    }   
} 
```

您必须坚持下去，因为您提到的是按呼叫实例模式。您不能保留 a`static List<Order>`来包含您的待处理订单，只需将它们保存到您的数据库中并将它们添加为待处理，未批准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:02:08.097

听起来您的问题是基于订单状态在特定时间发生变化的事实，并且只有当该阶段发生变化时，服务消费者才能了解新的订单状态。

这是使用消息传递的完美场景。

与您的 wcf 客户端调用服务不同，服务应该只在订单状态更改时向客户端发送一条消息。然后客户端可以处理该消息（在您的情况下为 ConfirmationResult 消息）。

您可以通过使用 netMsmqBinding 并在接受 msmq 消息的客户端上托管操作来执行此操作。

```
[OperationContract]
void ReceiveConfirmationResult(ConfirmationResult result); 
```

这要简单得多，因为它完全消除了问题的根源。作为一个额外的好处，服务操作 GetConfirmationResult() 可以被删除，因为它不再需要。

**更新**

我认为您误解了，因为根据您最新的问题更新，这是使用排队的更强有力的案例。

事件顺序：

1.  收到订单确认
2.  服务器状态改变
3.  服务器应用逻辑来确定是否应将状态更改发送给客户端
4.  服务器向客户端发送描述状态变化的消息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T06:46:17.227

目前我已经使用 EventWaitHandle 解决了它 - 不确定它是否是最好的方法，但它看起来很干净，很好地支持超时并且非常可测试。

```
public class TestClass 
{
    public static event OrderUpdateHandler UpdatedOrder;

    public void UpdateData(Order order) 
    {
        // ...

        OnOrderUpdated(args);
    }

    public Order GetConfirmedOrder(int id, TimeSpan waitToConfirm) 
    {
        var order = GetOrderFromDatabase();

        if (order.Status == OrderStatus.Pending) 
        {
             var eventHandle = new EventWaitHandle(false, EventResetMode.AutoReset);

             UpdatedOrderHandler waiter = (s, e) =>
             {
                if (e.Order.Id == id)
                {
                    order = e.Order;
                    eventHandle.Set();
                }
            };

            UpdatedOrder += waiter;

            if (!eventHandle.WaitOne(waitToConfirm))
            {                
                return order;
            }

            OrderUpdated -= waiter;
        }

        return order;
    }
} 
```

# sql - 选择@variable=case when...end from... order by len(@variable)

> ID：11734864
> 
> 赞同：0
> 
> 时间：2012-07-31T07:06:06.030
> 
> 标签：sql, sql-server-2008, sql-server-2008r2-express

我想要做的是连接表的两个字段，按连接字段的降序长度对它们进行排序并获得最高结果......

这是我用来尝试实现这一目标的 SQL...

```
declare @color nvarchar(255);
declare @board_name nvarchar(255);

select top(1)
    @board_name = board_name, 
    @color = base_color + case when shade_color is null then '' else '/' + shade_color end 
from 
    cut_vinyl
order by 
    len(@color) desc;

select @board_name, @color; 
```

所以，如果我有下表`cut_vinyl`

```
板名| base_color | shade_color
======================================
板0001 | 明确 | *无效的*
板0002 | 明确 | 蓝色的
板0003 | 青铜 | 青铜
板0004 | 青铜 | 绿色
板0005 | 青铜 | 蓝色的
板0006 | 青铜 | *无效的*

```

然后我希望**`@board_name`**成为**board0003**并**`@color`**成为**青铜/青铜**，但我似乎得到的是像**`@board_name`**= **board0001**和**`@color`**= **clear这样的结果**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:08:06.283

您正在订购`variable`：

```
order by 
    len(@color) desc; 
```

如果您正在寻找最长的颜色，请使用：

```
order by 
    len(base_color) + len(shade_color) desc; 
```

反而。

# c++ - 将 2 个互斥线程“融合”为 1 个以在单核上执行

> ID：11734866
> 
> 赞同：0
> 
> 时间：2012-07-31T07:06:12.333
> 
> 标签：c++, multithreading, mutex

这是一个奇怪的问题，所以我会尝试提供很长的解释。
假设您在单核机器上运行。而且您有 2 个线程，可以说是互斥锁的经典生产者消费者问题。现在我想知道何时在单核机器上运行（所以 1 核没有 HT）：
C++ 中有没有办法将这 2 个线程的执行融合为一个，以便互斥锁可以实现为简单的 int 存储/加载操作，而不是互斥。例如，这是否可行：统一线程中的生产者代码可以只是将内容放入循环缓冲区中，如果当前的 buffer_idx 高于 processes_idx，消费者代码将只从缓冲区中读取。

我知道这似乎是一个愚蠢的问题，但是很多嵌入式的东西仍然是 1 个核心。为简单起见，假设两个线程都是形式

```
while(! shutdown)
{
//...
} 
```

只是把两个身体都放在一个大的时间里会按预期工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:19:33.747

您可以将生产者和消费者放在一个线程中。但是为了什么？它们的存储/加载操作将按顺序执行。他们之间总会有“和平”（不包括意外情况）。对于每个生产者存储操作，都会有消费者加载操作（如果没有条件语句，如果是，则生产者将停止并等待消费者代码加载所有内容，然后再次开始循环）。IMO，使用这种模型，您只能在代码中描述一小部分真实世界情况。

编辑：即使您在单核机器上，将您的逻辑拆分为多个线程也会使您获得比在一个线程中制作所有东西更好的性能。例如，虽然生产者会创建一些东西，但即使存储了一些东西，你的消费者也不会做任何事情，这样会浪费时间。想象一下，消费者加载完东西后，他必须把东西交给你逻辑的另一个元素，如果有很多其他元素，站在消费者之后，他们都在等待一个逻辑元素——生产者，然后等待消费者等。处理器在大多数情况下在线程之间切换所花费的时间少于生产或消费东西所需的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:41:33.627

这种“不受保护”的队列在嵌入的东西上很常见，例如。在线程和中断驱动程序之间进行通信。这样的驱动程序根本不能使用互斥体，（尽管它们通常可以发出信号量来使线程准备好，例如，当一个完整的协议包被推到这样一个不受保护的队列上时）。驱动程序通信的优点是一端绝对确定另一端不能中断它——驱动程序不能被线程中断。这使得确保索引/指针以“安全”顺序更新变得相当容易。

然而，在两个线程之间，事情变得更加困难。在操作索引/指针时，任一端都可以随时被另一端中断。我总是用互斥锁锁定这样的队列（我用于嵌入式通信的线程间队列无论如何都没有内部存储 - 消息本身具有内部转发链接，这使得无锁队列更加尴尬）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T07:25:52.820

由于一个接一个的无限循环意味着永远不会被执行，假设我们有“神奇的” GOTO 语句，它每次都会把我们跳到正确的地方。那么是的，将两个 while 循环放在一起可能会起作用，因为 GOTO 在这里本质上是一个监视器，尽管它可能不是您想要的。

另一方面，假设循环在正确的时间终止。将两个线程（不占用 CPU 时间）融合为一个，基本上可以消除您最初的问题。不需要互斥体，因为除了正在运行的进程本身之外，没有什么可以排除的。

另外要考虑的是单核系统也存在并发问题，它们在时间片中运行多个线程来模拟（在某种程度上）多核系统是如何工作的；相同的多路复用的东西应该可以直接转移。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T07:26:00.277

你仍然必须同样小心。它不能同时运行两个线程，但是通过抢占式多任务处理，您的代码可能会被中断，而另一个线程可以随时运行，因此您仍然需要像一般情况下一样锁定事物。

一个常见的做法是在第一个线程上进行“存储在队列中”操作，而不是直接在另一个线程中调用“队列中的进程”函数（并且只有一个线程）。有可能通过正确的设计使代码在单个内核上运行单线程，如果您有多个内核，则运行多线程。这样可以避免在只有一个核心时必须锁定。

# javascript - Dojo 问题：FilteringSelect，必需：“false”，不工作

> ID：11734871
> 
> 赞同：0
> 
> 时间：2012-07-31T07:06:43.437
> 
> 标签：javascript, html, autocomplete, dojo

Dojo : FilteringSelect , 必需: "false" , 不工作

**我的代码结构是，**

```
var user_search = new FilteringSelect({
                        id: "user_search",
                        name: "user_search",
                        searchAttr: "displayName",
                        type: "text",
                        required: "false",
                        autoComplete: true, 
                        labelFunc: formatLabel,
                        labelType: "html",
                        invalidMessage: "No user found",
                        style: "width: 166px;height:28px;background-color:white"
                    }, this.user_search); 
```

任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:08:50.587

属性应该`required`是布尔值`false`，而不是字符串`"false"`？

```
 ...
 type: "text",
 required: false,
 autoComplete: true, 
 .... 
```

# php - PHP中的排序设计

> ID：11734873
> 
> 赞同：0
> 
> 时间：2012-07-31T07:06:48.743
> 
> 标签：php, design-patterns

![在此处输入图像描述](../Images/abbb9a56d7a9461785e963eff770733e.png)

我为我的网站设计了排序机制： 现在由于需求的变化，我需要添加一些所有策略共有的变量，即 ByDate、ByConsuption、By Demand。

我还需要根据函数的输出修改排序字符串，例如，如果函数返回可用，

1.  SORT BY DATE DESC => 按可用的 desc、DATE desc 排序
2.  SORT BY DEMAND DESC => 按可用的 desc、DEMAND desc 排序

**问题：**

如果我有一些常见的变量/函数，我怎么能在某一点包含它并且仍然可以在所有类中访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:11:19.693

我会使用具有通用功能的 SortStrategyBase 或 SortStrategyAbstract 类，然后让工厂注入所需的任何属性。然后，所有 SoryByWhateverStrategy 类都将扩展基础/抽象。

# asp.net-mvc-3 - 在 Razor MVC 3 中删除 HTML 格式

> ID：11734877
> 
> 赞同：6
> 
> 时间：2012-07-31T07:07:05.027
> 
> 标签：asp.net-mvc-3, razor

我正在使用 MVC 3 和 Razor View 引擎。

**我想要做什么**

我正在使用 MVC 3 制作博客，我想删除所有 HTML 格式标记`<p> <b> <i>`等。

我正在使用以下代码。（它确实有效）

```
 @{
 post.PostContent = post.PostContent.Replace("<p>", " ");   
 post.PostContent = post.PostContent.Replace("</p>", " ");
 post.PostContent = post.PostContent.Replace("<b>", " ");
 post.PostContent = post.PostContent.Replace("</b>", " ");
 post.PostContent = post.PostContent.Replace("<i>", " ");
 post.PostContent = post.PostContent.Replace("</i>", " ");
 } 
```

我觉得肯定有更好的方法来做到这一点。任何人都可以请指导我。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-31T07:15:20.593

谢谢[亚历克斯·雅罗舍维奇，](https://stackoverflow.com/users/1554464/alex-yaroshevich)

这是我现在使用的..

```
post.PostContent = Regex.Replace(post.PostContent, @"<[^>]*>", String.Empty); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T05:53:15.927

正则表达式很慢。使用它，它更快：

```
public static string StripHtmlTagByCharArray(string htmlString)
{
    char[] array = new char[htmlString.Length];
    int arrayIndex = 0;
    bool inside = false;

    for (int i = 0; i < htmlString.Length; i++)
    {
        char let = htmlString[i];
        if (let == '<')
        {
            inside = true;
            continue;
        }
        if (let == '>')
        {
            inside = false;
            continue;
        }
        if (!inside)
        {
            array[arrayIndex] = let;
            arrayIndex++;
        }
    }
    return new string(array, 0, arrayIndex);
} 
```

你可以看看[http://www.dotnetperls.com/remove-html-tags](http://www.dotnetperls.com/remove-html-tags)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-10T13:52:15.100

*以防万一*您想在 .NET 中使用正则表达式来去除 HTML 标记，以下内容似乎在此页面的源代码上运行良好。它比此页面上的其他一些答案更好，因为它会查找实际的 HTML 标签，而不是盲目地删除 和 之间的所有`<`内容`>`。回到 BBS 时代，我们输入`<grin>`了很多而不是`:)`，因此删除`<grin>`不是一种选择。`:)`

此解决方案仅删除标签。它不会在可能很重要的情况下删除这些标签的内容——例如，脚本标签。您会看到脚本，但脚本不会执行，因为脚本标签本身已被删除。删除 HTML 标记的内容非常棘手，实际上*要求*HTML 片段格式正确......

还要注意`RegexOption.Singleline`选项。这对于任何 HTML 块都非常重要。因为在一行中打开 HTML 标签并在另一行中关闭它并没有错。

```
string strRegex = @"</{0,1}(!DOCTYPE|a|abbr|acronym|address|applet|area|article|aside|audio|b|base|basefont|bdi|bdo|big|blockquote|body|br|button|canvas|caption|center|cite|code|col|colgroup|datalist|dd|del|details|dfn|dialog|dir|div|dl|dt|em|embed|fieldset|figcaption|figure|font|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|i|iframe|img|input|ins|kbd|keygen|label|legend|li|link|main|map|mark|menu|menuitem|meta|meter|nav|noframes|noscript|object|ol|optgroup|option|output|p|param|pre|progress|q|rp|rt|ruby|s|samp|script|section|select|small|source|span|strike|strong|style|sub|summary|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|track|tt|u|ul|var|video|wbr){1}(\s*/{0,1}>|\s+.*?/{0,1}>)";
Regex myRegex = new Regex(strRegex, RegexOptions.Singleline);
string strTargetString = @"<p>Hello, World</p>";
string strReplace = @"";

return myRegex.Replace(strTargetString, strReplace); 
```

我并不是说这是最好的答案。这只是一个选择，对我来说效果很好。

# forms - cakephp 两个提交按钮和重定向

> ID：11734880
> 
> 赞同：0
> 
> 时间：2012-07-31T07:07:47.860
> 
> 标签：forms, cakephp, submit

试图在 cakephp 中创建一个有两个提交按钮的表单。

单击任务_1 提交按钮时，会在地址栏“/fields/add”中创建此按钮，并将添加的信息发送到数据库。

单击 task_2 提交按钮时，会在地址栏“/fields/add/add”中创建此按钮，并将输入的信息发送到数据库。

task_1 旨在允许用户不断创建新字段，其中任务 2 旨在将他们带到不同的页面，目前我们只是随机选择一个页面。

这是控制器中添加功能的代码

```
 function add(){

    $this->set('title_for_layout', 'Please Enter Your Invoice Headings');
    $this->set('stylesheet_used', 'style');
    $this->set('image_used', 'eBOXLogo.jpg');   

    $this->Session->setFlash("Please create your required fields.");

    if($this->request->is('post')){

    $this->Field->create(); 

    if ($this->Field->save($this->request->data)) 
    { 
        if($this->params['form']['task_1'] == "task_1") 
            { 
                $this->Session->setFlash('The field has been saved');  
                $this->redirect( array('controller' => 'Fields','action' => 'add'));
            } 
            if($this->params['form']['task_2'] == "task_2") 
            { 
                $this->Session->setFlash('The template has been saved'); 
                $this->redirect( array('controller' => 'Invoices','action' => 'add'));
            } 

    }
    else
    {
        $this->Session->setFlash('The field could not be saved. Please, try again.'); 
    } 
    } 

  } 
```

这是添加视图的代码

```
<form enctype="multipart/form-data" method="post" action="add/"> 
        Name: <input type ="text" name="name" /> <br />
        Description: <input type ="text" name="description" /> <br />
        Account ID: <input type ="number" name="accounts_id" /> <br />
        <br />

        <input type="submit" name="task_1" value="Continue adding fields" /> 
        <input type="submit" name="task_2" value="Finish adding fields" /> 
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:14:21.073

```
 echo $this->Form->create('Field');
    echo $this->Form->input('name');
    echo $this->Form->input('description');
    echo $this->Form->input('account_id');//this would be the conventional fk fieldname
    echo $this->Form->button('Continue adding fields', array('name' => 'type_1'));
    echo $this->Form->button('Finish adding fields', array('name' => 'type_2'));
    echo $this->Form->end(); 
```

# performance - JavaFX2 - 将定制（fxml）面板动态添加到网格窗格时性能非常差

> ID：11734885
> 
> 赞同：10
> 
> 时间：2012-07-31T07:08:06.200
> 
> 标签：performance, javafx-2, fxml, scenebuilder

**问题** 我想在运行时将通过 javafx 场景构建器构建的定制面板添加到网格窗格。我的定制面板存在按钮、标签等。

**我的尝试** 我试图从窗格扩展......

```
public class Celli extends Pane{
    public Celli() throws IOException{
        Parent root = FXMLLoader.load(getClass().getResource("Cell.fxml"));
        this.getChildren().add(root);     
    }
} 
```

...然后在控制器的添加方法中使用此面板

```
@FXML
private void textChange(KeyEvent event) {
    GridPane g = new GridPane();
        for (int i=0 : i<100; i++){
                g.getChildren().add(new Celli());
        }
    }
} 
```

它有效，但性能非常非常差。

**我在找什么** 有没有办法通过 javafx 场景构建器设计面板（因此在 fxml 中有这个面板），然后在运行时将其添加到网格窗格中，而不为每个实例使用这个 fxmlloader。我认为由于 fxml 加载器，它的性能很差。当我添加一个标准按钮时，例如 whitout fxml，它的速度要快得多。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-31T07:33:55.783

**简短的回答：**不，不是（从 JavaFX 2.x 和 8.0 开始）。它可能在未来的版本中（JFX >8）

**长答案：** FXMLLoader 目前并未设计为反复实例化相同项目的模板提供程序。相反，它旨在成为大型 GUI 的一次性加载器（或序列化它们）。

性能很差，因为取决于 FXML 文件，在每次调用 时`load()`，FXMLLoader 必须通过反射查找类及其属性。这意味着：

1.  对于每个 import 语句，尝试加载每个类，直到可以成功加载该类。
2.  对于每个类，创建一个 BeanAdapter 来查找该类具有的所有属性，并尝试将给定的参数应用于属性。
3.  再次通过反射将参数应用于属性。

目前`load()`在代码中对同一 FXML 文件的后续调用也没有任何改进。这意味着：没有缓存找到的类，没有缓存 BeanAdapter 等等。

但是，通过将自定义类加载器设置为 FXMLLoader 实例，可以解决第 1 步的性能问题：

```
import java.io.IOException; 
import java.net.URL; 
import java.util.Enumeration; 
import java.util.HashMap; 
import java.util.Map; 

public class MyClassLoader extends ClassLoader{ 
  private final Map<String, Class> classes = new HashMap<String, Class>(); 
  private final ClassLoader parent; 

  public MyClassLoader(ClassLoader parent) { 
    this.parent = parent; 
  } 

  @Override 
  public Class<?> loadClass(String name) throws ClassNotFoundException { 
    Class<?> c = findClass(name); 
    if ( c == null ) { 
      throw new ClassNotFoundException( name ); 
    } 
    return c; 
  } 

  @Override 
  protected Class<?> findClass( String className ) throws ClassNotFoundException { 
// System.out.print("try to load " + className); 
    if (classes.containsKey(className)) { 
      Class<?> result = classes.get(className); 
      return result; 
    } else { 
      try { 
        Class<?> result = parent.loadClass(className); 
// System.out.println(" -> success!"); 
        classes.put(className, result); 
        return result; 
      } catch (ClassNotFoundException ignore) { 
// System.out.println(); 
        classes.put(className, null); 
        return null; 
      } 
    } 
  } 

  // ========= delegating methods ============= 
  @Override 
  public URL getResource( String name ) { 
    return parent.getResource(name); 
  } 

  @Override 
  public Enumeration<URL> getResources( String name ) throws IOException { 
    return parent.getResources(name); 
  } 

  @Override 
  public String toString() { 
    return parent.toString(); 
  } 

  @Override 
  public void setDefaultAssertionStatus(boolean enabled) { 
    parent.setDefaultAssertionStatus(enabled); 
  } 

  @Override 
  public void setPackageAssertionStatus(String packageName, boolean enabled) { 
    parent.setPackageAssertionStatus(packageName, enabled); 
  } 

  @Override 
  public void setClassAssertionStatus(String className, boolean enabled) { 
    parent.setClassAssertionStatus(className, enabled); 
  } 

  @Override 
  public void clearAssertionStatus() { 
    parent.clearAssertionStatus(); 
  } 
} 
```

用法：

```
public static ClassLoader cachingClassLoader = new MyClassLoader(FXMLLoader.getDefaultClassLoader()); 

FXMLLoader loader = new FXMLLoader(resource); 
loader.setClassLoader(cachingClassLoader); 
```

这显着提高了性能。但是，第 2 步没有解决方法，因此这可能仍然是一个问题。

但是，官方 JavaFX jira 中已经有针对此的功能请求。如果你能支持这个请求，那就太好了。

链接：

*   FXMLLoader 应该能够缓存 load() 调用之间的导入和属性：
    [https ://bugs.openjdk.java.net/browse/JDK-8090848](https://bugs.openjdk.java.net/browse/JDK-8090848)

*   将 setAdapterFactory() 添加到 FXMLLoader：
    [https ://bugs.openjdk.java.net/browse/JDK-8102624](https://bugs.openjdk.java.net/browse/JDK-8102624)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-25T15:54:58.800

我有一个类似的问题。我还必须多次动态加载基于 fxml 的自定义组件，而且花费的时间太长。就我而言，FXMLLoader.load 方法调用很昂贵。

我的方法是并行化组件实例化，它解决了这个问题。

考虑到问题上发布的示例，具有多线程方法的控制器方法将是：

```
private void textChange(KeyEvent event) {
    GridPane g = new GridPane();
    // creates a thread pool with 10 threads
    ExecutorService threadPool = Executors.newFixedThreadPool(10); 
    final List<Celli> listOfComponents = Collections.synchronizedList(new ArrayList<Celli>(100));

    for (int i = 0; i < 100; i++) {
        // parallelizes component loading
        threadPool.execute(new Runnable() {
            @Override
            public void run() {
                listOfComponents.add(new Celli());
            }
        });
    }

    // waits until all threads completion
    try {
        threadPool.shutdown();      
        threadPool.awaitTermination(3, TimeUnit.SECONDS);
    } catch (InterruptedException e) {
        // seems to be a improbable exception, but we have to deal with it
        e.printStackTrace();
    }

    g.getChildren().addAll(listOfComponents);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-20T14:10:38.553

只需在@Sebastian sir 给定代码中添加“缓存已加载类”的代码。它对我有用。请建议对其进行更改以获得更好的性能。

```
@Override
public Class<?> loadClass(String name) throws ClassNotFoundException {
    System.out.println("In Class loader");

    Class result;
    System.out.println(" >>>>>> Load class : "+name);
    result = (Class)classes.get(name);
    if(result != null){
        System.out.println(" >>>>>> returning cached class.");
        return result;
    }else{
    Class<?> c = findClass(name);
    if ( c == null ) {
      throw new ClassNotFoundException( name );
    }
    System.out.println(" >>>>>> loading new class for first time only");
    return c;
    }
} 
```

# web-applications - 如何 SSL 启用我的 Web 应用程序？

> ID：11734886
> 
> 赞同：0
> 
> 时间：2012-07-31T07:08:11.210
> 
> 标签：web-applications, ssl, tomcat7

我已将以下代码放入 tomcat 的 server.xml 文件中：

```
<Connector SSLEnabled="true" clientAuth="false"
    keystoreFile="D:\keystore.jks" keystorePass="****" maxThreads="150"
    port="8443" protocol="HTTP/1.1" scheme="https" secure="true"
    sslProtocol="TLS" /> 
```

我有一个基于 spring-mvc 的 Web 应用程序。但是当我尝试部署我的应用程序时，我收到以下错误：

```
org.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: file [D:\Eclipse Workspaces\RPM\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\RPM\WEB-INF\classes\com\rpm\controller\AdminController.class]; nested exception is java.security.AccessControlException: access denied ("java.lang.RuntimePermission" "accessDeclaredMembers") 
```

我的 web.xml 看起来像这样

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">
    <display-name>RPM</display-name>
    <welcome-file-list>
        <welcome-file>admin</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
    <security-constraint>
        <web-resource-collection>
            <web-resource-name>RPM</web-resource-name>
            <url-pattern>/*</url-pattern>
        </web-resource-collection>
        <user-data-constraint>
            <transport-guarantee>CONFIDENTIAL</transport-guarantee>
        </user-data-constraint>
    </security-constraint>
</web-app> 
```

**dispatcher-servlet.xml 代码**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns="http://www.springframework.org/schema/beans"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                        http://www.springframework.org/schema/context
                        http://www.springframework.org/schema/context/spring-context-3.1.xsd
                        http://www.springframework.org/schema/mvc
                        http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd" >

    <context:component-scan base-package="com.rpm.controller" />
    <mvc:annotation-driven />
    <mvc:resources mapping="/css/**" location="/css/*"/>
    <mvc:resources mapping="/js/**" location="/js/*"/>
    <mvc:resources mapping="/images/**" location="/images/*"/>

    <!-- Beans to be autowired - START-->
    <bean class="com.rpm.beans.Clinic"/>
    <bean class="com.rpm.beans.PatientGroup"/>
    <bean class="com.rpm.beans.Clinician"/>
    <!-- Beans to be autowired - END-->

    <bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver" >
        <property name="viewClass" value="org.springframework.web.servlet.view.tiles2.TilesView" />
    </bean>
    <bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer" >
        <property name="definitions">
            <list>
                <value>/WEB-INF/tiles/tiles.xml</value>
            </list>
        </property>
    </bean>
</beans> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:58:58.033

异常是因为安全管理器与 ssl 无关。

# multithreading - 将库设计为非线程安全的动机

> ID：11734887
> 
> 赞同：0
> 
> 时间：2012-07-31T07:08:19.950
> 
> 标签：multithreading, thread-safety

有许多库和 API（例如[Qt](http://doc.qt.nokia.com/4.7-snapshot/threads-reentrancy.html#notes-on-qt-classes)）似乎被有意设计为非线程安全的。这种设计的动机是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T07:15:28.247

这更容易。在不丢失的情况下使非平凡的库线程安全真的很困难

*   简单
*   可扩展性
*   速度
*   稳定
*   理智

由于许多开发人员非常看重这些东西，他们通常决定不关心多线程。

对于 GUI 库来说，健全性似乎是一个主要问题，因为当您不为 GUI 代码坚持使用单个线程时，您会遇到非常复杂的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:19:48.597

许多用于确保线程安全的技术都会导致性能损失——如果库的可能用例不需要线程安全，那么省略它可能是一个合理的设计选择。

使库非线程安全并不排除它在多线程应用程序中的使用，它只是意味着库的用户必须自己实现线程安全（通常通过在线程安全包装器中包装对库的调用）。通过编写一个没有内置线程安全的库，作者允许不强迫不需要线程安全的用户遭受相关的性能损失。

# ios5 - 无法在 iOS5 上的 iframe 中复制输入字段值

> ID：11734891
> 
> 赞同：0
> 
> 时间：2012-07-31T07:08:30.600
> 
> 标签：ios5, mobile, input, safari, zepto

我无法复制输入字段值。

我试过这个步骤。

1.  焦点输入字段
2.  按住并点击全选
3.  点击复制

[fiddle1](http://jsfiddle.net/wYMKE/4/)　可以复制文本。（不加载 Zepto.js）

[fiddle2](http://jsfiddle.net/wYMKE/5/)　无法复制文本。（加载 Zepto.js）

我认为原因在于 Zepto。

你知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:21:12.757

好吧，我不确定我是否理解您的问题或您尝试的解决方案，因为您没有发布任何代码，但是使用 Zepto（或 jQuery）您会得到如下输入值：

```
var userInput = $('#input_id').val()
// then you can do whatever with it, like writing it to an alert
alert(userInput) 
```

# matlab - SVM - 适用/不适用于大范围的数字？

> ID：11734892
> 
> 赞同：1
> 
> 时间：2012-07-31T07:08:35.813
> 
> 标签：matlab, machine-learning, artificial-intelligence, svm

我一直在玩 SVM，偶然发现了一些有趣的东西。

这可能是我做错了，因此发表评论和澄清。

我有大约 3000 x 30 的数据集。

每个值都在 -100 到 100 的范围内。另外，它们不是整数。它们是浮点数。它们分布不均。

就像，数字是 -99.659、-99.758、-98.234，然后我们不会有像 -1.234、-1.345 这样的东西。

因此，即使范围很大，数据也会在某些点周围聚集，并且它们通常会因分数值而有所不同。
（我认为，从我的阅读和理解来看，这不应该在理想情况下影响 SVM 分类的准确性。如果我错了，请纠正我。请**用是或否评论我是对还是错。**）

我的分类标签是 0 和 1。

所以，然后我拿了一个 30 x 30 的测试数据并尝试测试我的 SVM。

当 kernel_function 为 mlp 时，我的准确率约为 50%。

在其他方法中，我只是得到 0 和 NaN 作为结果，这很奇怪，因为输出中没有 1，而且我不理解输出标签中的 NaN。

所以，mlp 基本上给了我最好的结果，而且也只有 50%。

然后，我将该方法用作“QP”，将“mlp”用作 kernel_function，代码已经运行了大约 8 个小时。我不认为，像 3400 x 30 这样小的东西应该花费那么多时间。

所以问题真的是，对于我拥有的数据，SVM 是不是一个错误的选择？（如上所述）。还是我遗漏了什么导致准确性显着下降？

另外，我知道输入数据并没有搞砸，因为我使用神经网络进行了测试，并且能够获得非常好的准确性。

有没有办法让 SVM 工作？因为，从我在互联网上读到的内容来看，在这个标签决定问题上，SVM 通常应该比神经网络更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:18:49.473

听起来您可能会遇到一些由数据集群的小尺寸引起的数值稳定性问题（尽管我不确定为什么会这样：它确实不应该）。*作为一种算法*， SVM 不应该关心你所描述的分布：事实上，在正常情况下，当呈现出如此明显分离的东西时，它应该做得很好。

要调查的一件事是，您的任何列是否具有很强的相关性。出于性能原因，真正强相关的列组应该由单个列替换，*并且*我已经看到当面对列中几乎完美的相关性时，实现在数值上变得不稳定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T19:22:18.033

虽然独立特征很好，但对于算法来说并不是必需的，毕竟我们事先说我们不知道哪些特征对数据有*什么*贡献。你在扩展你的数据吗？此外，30 个数据点对于创建训练集来说可能有点小。我们可以看看你的代码吗？

# java - Tomcat 和接受的最大请求数

> ID：11734893
> 
> 赞同：3
> 
> 时间：2012-07-31T07:08:43.427
> 
> 标签：java, tomcat, web-applications, tomcat5.5

有没有办法配置 Tomcat 在特定阈值后拒绝请求？例如，在 506 请求开始拒绝之后。
有这样的选择还是我应该为此编写代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:09:07.397

Tomcat 的连接器可以配置为仅同时服务一定数量的请求——这被配置为in的`maxConnections`属性。（您也可以配置，但这实际上是操作系统在达到该堆积后维护的连接队列）。*这限制了所有 URL*上与 Tomcat 的同时连接——也就是说，它只是受到限制的总连接数。`<Connector>``server.xml``acceptCount``maxConnections`

 *如果您想限制同时连接到*特定 URL*（或特定 URL 集）的数量，您可能必须编写自己的代码。我听说[Spring Security](http://static.springsource.org/spring-security/site/)有很多像这样的 QOS（服务质量）功能，您无需编写自己的代码就可以使用它们。

否则，您将被迫编写自己的代码——可能`Filter`只是跟踪有多少请求正在进行中，然后在达到某个限制后拒绝那些进来的请求。当心跨线程使用的计数器的同步问题。*

# ruby - 如何使用 Ruby 打印雪人

> ID：11734895
> 
> 赞同：10
> 
> 时间：2012-07-31T07:08:44.490
> 
> 标签：ruby, unicode

我想要一个尚未实现的单个字符串的占位符。如何在 Ruby 1.9 中打印雪人？

目前，我可以做

```
# coding: utf-8
puts "☃" 
```

或者

```
puts "\u2603" 
```

但是否可以使用“索引条目”字段（[此处](http://www.fileformat.info/info/unicode/char/2603/index.htm)提到）`snowy weather`或打印字符`SNOWMAN`？`weather, snowy`

我没有使用 Rails。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T10:33:22.123

您可以[从 unicode.org 下载名称索引](http://unicode.org/Public/UNIDATA/Index.txt)并将字符名称解析为 Hash（或者更好的是 DB 或类似的）。

然后您可以使用正常的数据访问功能获得它。

例子：

```
# coding: utf-8
index = {}
File.readlines('Index.txt').each{|line|
  line =~ /(.*)\t(.*)$/
  index[$1] = $2.to_i(16).chr("UTF-8")
}

snowman = index['SNOWMAN']
p snowman #hope it works. My shell does not show the snowman
p "\u2603" == snowman #true 
```

* * *

编辑：

有一个 gem [unicode_utils](http://rubygems.org/gems/unicode_utils)。有了这个宝石，您可以使用：

```
require "unicode_utils/grep"
p UnicodeUtils.grep(/^snowman$/) #=> [#<U+2603 "\u2603" SNOWMAN utf8:e2,98,83>] 
```

# php - 类自行循环，直到 php 内存不足并且 db 有太多连接

> ID：11734896
> 
> 赞同：-1
> 
> 时间：2012-07-31T07:08:48.387
> 
> 标签：php, sql, oop, memory

我有一些扩展 Loader 类的类。而那些在 Loader 类中声明的类，就像这样 -

```
class Loader
{   

    public $sql;
    public $logger;
    public $view;
    public $model;
    public $config;
    public $url_data;

    public function __construct()
    {
        $url_accepted = $_GET['url'];
        $this->config = $GLOBALS['config'];

        $database_connection = some array...
        $this->sql = new dbHandler($database_connection);

        $this->logger = new logger();

        $this->view = new view();
        $this->view->set_view($config['view']['view']);
        $this->model = new model();
        ...
        require_once("app/controllers/frame.php"); 
```

view 和 model 是扩展 Loader 的类，并且 frame 扩展了 Loader，但 frame 也扩展了。
出于某种原因，它会自行循环，直到 sql 有很多连接并且 php 内存不足，而 index.php 是唯一声明 Loader 的地方 -

```
require_once("app/includes/loader.php");

$loader = new Loader(); 
```

我不知道是什么问题，但我知道来源是视图和模型的声明。模型和视图都没有对 Loader 的引用，除了在“扩展 Loader”和使用 $this 访问 loader 值。

pastebin 上的代码 - [http://pastebin.com/u/Yehonatan](http://pastebin.com/u/Yehonatan)

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:36:27.337

```
class Loader
   {   
    public $sql;
    public $logger;
    public $view;
    public $model;
    public $config;
    public $url_data;

    public function __construct()
    {
        $url_accepted = $_GET['url'];
        $this->config = $GLOBALS['config'];

        $database_connection = some array...
        $this->sql = new dbHandler($database_connection);

        $this->logger = new logger();

        $this->view = new view();
        $this->view->set_view($config['view']['view']);
        $this->model = new model();
        ...
        require_once("app/controllers/frame.php"); 
```

还有一个问题，“扩展 Loader”，您是说您的模型和视图类扩展了 loader 吗？如果是这种情况，那么很明显它将经历递归。如果是这种情况，那么您将需要覆盖`__construct()`视图和模型中的 。

```
class View extends Loader 
{ 
   public function __construct() 
   { 
     // do something
   }
}

class Model extends Loader 
{
   public function __construct() 
   { 
     // do something
   }
} 
```

我希望你明白原因，如果不是我很乐意解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:22:22.930

> 模型和视图都没有对 Loader 的引用，除了在“扩展 Loader”和使用 $this 访问 loader 值。

如果这是网站

```
class Loader {
  // ...
  public function __construct() {
    // ...
    $this->view = new view();
    // ...
    $this->model = new model();
  }
}

class view extends Loader { 
  // ...
}

class model extends Loader {
  // ...
} 
```

您需要覆盖`__construct()`方法。如果您不这样做，模型/视图类将使用`__construct()`创建模型/视图对象的 Loader 方法 ->*递归*

# javascript - 如何将输入字段限制为仅带两位小数的数字

> ID：11734903
> 
> 赞同：0
> 
> 时间：2012-07-31T07:09:20.150
> 
> 标签：javascript, jquery

> **可能重复：**
> [JavaScript：格式化数字正好有两位小数](https://stackoverflow.com/questions/1726630/javascript-formatting-number-with-exactly-two-decimals)

我需要一个 JS (jQuery) 脚本，它可以帮助我将数字的输入限制为两位小数。

我已经尝试过[了](http://www.texotela.co.uk/code/jquery/numeric/)，它完美地将我的输入限制为浮点数或整数。但我不明白如何将其限制为小数点后两位。

我还在这里查看了许多其他答案，但似乎没有一个可以阻止用户在输入时输入超过两位数。

有什么建议么？谢谢。

*编辑：我的代码，如果有帮助*

表格：

```
<form method="post" id="split_form" 
    action="?name=ajax&case=split_action&sid=' . $id . '" 
    onSubmit="return checkform(this);" >

    <table class="default" cellpadding="0" cellspacing="0">
      <tr><td><input class="numeric1" type="text" name="summ_1" value="" />
      <tr><td><input class="numeric2" type="text" name="summ_2" value="" />
    </table>
    <input type="submit" class="submit" value="ok" />

</form> 
```

JS 脚本：

```
<script type="text/javascript" src="/js/jquery.numeric.js"></script>
<script language="JavaScript" type="text/javascript">
    $(".numeric1").numeric();
    $(".numeric2").numeric();

    function checkform ( form ) {
        var sum1 = form.summ_1.value;
        var sum2 = form.summ_2.value;
        var new_summ = parseFloat(sum1) + parseFloat(sum2);
        var summ = parseFloat(' . $row[1]['summ'] . ');

        if ( ( sum1 > 0 && sum2 > 0 ) && ( new_summ == summ ) ) {
            return true;
        } else {
            return false ;
        }   
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:33:59.163

在[数字插件第 135 行](https://github.com/SamWM/jQuery-Plugins/blob/master/numeric/jquery.numeric.js#L135)中，处理了数字条目。目前，它们总是被允许的。您可以修改此插件以仅在小数点不存在或不超过两步时才允许数字：

```
var decimalIx = $(this).val().indexOf(decimal);
allow = decimalIx == -1 || decimalIx >= $(this).val().length - 2; 
```

我打算进行可`-2`配置的，但正如 Alex Ball 在评论中指出的那样，[工作已经完成](https://github.com/johnedmonds/jQuery-Plugins/commit/fc0fde93d8d595c22ff0af545a63c32f1fff936c)。

# jsf - Primefaces commandButton 仅适用于轮播组件的第一个条目

> ID：11734906
> 
> 赞同：2
> 
> 时间：2012-07-31T07:09:35.660
> 
> 标签：jsf, primefaces, carousel

我使用 Primefaces 轮播组件来显示项目列表。我想做的是在每个轮播项目上显示一个命令按钮，它会触发 bean 上的方法来确认或拒绝条目。

现在它只适用于轮播的第一个条目。单击另一个条目不会调用操作 confirmResource。我想这与ID有关，但我无法弄清楚。

这是表格：

```
<h:form id="form" prependId="false">
<p:carousel id="resourceCarousel" value="#{resourceRatingBean.resourceProposalList}" var="var" rows="1" itemStyle="width:500px; height: 400px; text-align:center;" circular="true">
    <p:column>

        <h:panelGrid columns="1" cellpadding="3">
            <p:graphicImage value="/cache/images/#{var.imagePath}" width="100"/>
            <h:outputText value="#{var.imagePath}" />
            <h:outputText value="#{var.name}" />
            <h:outputText value="#{var.description}" />
        </h:panelGrid>

        <p:commandButton value="confirm" action="#{resourceRatingBean.confirmResource}" process="@this">
            <f:setPropertyActionListener value="#{var}" target="#{resourceRatingBean.ratedResource}" />
        </p:commandButton>

    </p:column>
</p:carousel>
</h:form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T11:07:45.343

我在这里看到两个可能的问题：

1.  这`process="@this"`可能是一个问题，因为这只会调用命令按钮的调用操作过程，而不是轮播组件中的更改。尝试将此属性设置为`resourceCarousel`or `@form`。

2.  如果您仍然遇到问题并使用 JSF 2 + EL 2.2，那么您可以通过EL 表达式将参数传递给方法，而不是依赖于`setPropertyActionListener`设置托管属性的值。`var``actionListener`

这是一个例子：

```
<p:commandButton value="confirm" actionListener="${resourceRatingBean.confirmResourceListener(var)}"
    this="resourceCarousel" /> 
```

# android - 线性布局内的线性布局正在添加但不可见

> ID：11734909
> 
> 赞同：11
> 
> 时间：2012-07-31T07:09:45.357
> 
> 标签：android, android-linearlayout

我在 xml 中有一个空的线性布局。我正在动态添加一些文本视图。

一旦这些文本视图超过 5，那么我将在其中创建另一个线性布局并将文本视图添加到新创建的布局中。最后将这个新布局添加到主布局中。

我可以添加，即在模拟器中它占用该空间，但不会在文本视图中显示信息。

我的xml如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ScrollView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:id="@+id/dyn_layout"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:padding="10dip" >
        </LinearLayout>
    </ScrollView>

    <Button
        android:id="@+id/dyn_button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Add TextViews" />

</LinearLayout> 
```

我的java文件如下：

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Gravity;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup.LayoutParams;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.TextView;

public class AddTextViewsDynamically extends Activity implements
        OnClickListener {

    Button button;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.add_textview_dynamically);

        button = (Button) findViewById(R.id.dyn_button1);
        button.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.dyn_button1:
            LinearLayout layout = (LinearLayout) findViewById(R.id.dyn_layout);
            LinearLayout layout2 = null;
            LinearLayout layout3 = null;
            for (int i = 0; i < 10; i++) {
                if (i > 4) {
                    if (i == 5) {
                        layout2 = new LinearLayout(this);
                        layout2.setLayoutParams(new LayoutParams(
                                LayoutParams.FILL_PARENT,
                                LayoutParams.WRAP_CONTENT));
                        layout2.setOrientation(LinearLayout.VERTICAL);
                        layout2.setPadding(10, 60, 10, 10);
                        layout3 = new LinearLayout(this);
                        layout3.setLayoutParams(new LayoutParams(
                                LayoutParams.FILL_PARENT,
                                LayoutParams.WRAP_CONTENT));
                        layout3.setOrientation(LinearLayout.HORIZONTAL);
                        layout3.setPadding(10, 10, 10, 10);
                    }
                    System.out.println("**** Adding text view " + i);
                    TextView text = new TextView(this);
                    text.setText("The Value of i is :" + i);
                    text.setTextSize(12);
                    text.setGravity(Gravity.LEFT);
                    text.setLayoutParams(new LayoutParams(155,
                            LayoutParams.WRAP_CONTENT));
                    layout3.addView(text);

                    if (i == 9) {
                        System.out
                                .println("Added second linear layout to first");
                        layout2.setVisibility(View.VISIBLE);
                        layout2.addView(layout3);
                        layout.addView(layout2);
                    }
                } else {
                    System.out.println("###### Adding text view " + i);
                    TextView text = new TextView(this);
                    text.setText("The Value of i is :" + i);
                    text.setTextSize(12);
                    text.setGravity(Gravity.LEFT);
                    text.setLayoutParams(new LayoutParams(155,
                            LayoutParams.WRAP_CONTENT));
                    layout.addView(text);
                }
            }

        }

    }

} 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T09:45:38.337

您的主要 LinearLayout 设置为 Horizo​​ntal，因此前 5 个文本视图和 layout2 显示在同一行。将 Layout3 添加到 Layout2 会使 Layout3 从主线性布局的最后一个文本视图的右侧显示。在 10 英寸平板电脑上，我只看到 LinearLayout 的前 2 个元素。也许在较小的屏幕上您看不到它们。尝试使用

```
text.setLayoutParams(new LayoutParams(50, LayoutParams.WRAP_CONTENT)); 
```

代替

```
text.setLayoutParams(new LayoutParams(155, LaoutParams.WRAP_CONTENT)); 
```

你应该看到你所有的文本视图。

**编辑：** 在您的情况下，这应该可以解决问题；xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ScrollView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:id="@+id/dyn_layout"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:padding="10dip" >
        </LinearLayout>

        <LinearLayout
            android:id="@+id/dyn_layout2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:visibility="gone"
            android:padding="10dip" >
        </LinearLayout>
    </ScrollView>

    <Button
        android:id="@+id/dyn_button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Add TextViews" />

</LinearLayout> 
```

和代码：

```
@Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.dyn_button1:
            LinearLayout layout = (LinearLayout) findViewById(R.id.dyn_layout);
            LinearLayout layout2 = (LinearLayout) findViewById(R.id.dyn_layout2);
            LinearLayout layout3 = null;
            for (int i = 0; i < 10; i++) {
                if (i > 4) {
                    if (i == 5) {
                        layout2.setPadding(10, 60, 10, 10);
                        layout3 = new LinearLayout(this);
                        layout3.setLayoutParams(new LayoutParams(
                                LayoutParams.FILL_PARENT,
                                LayoutParams.WRAP_CONTENT));
                        layout3.setOrientation(LinearLayout.HORIZONTAL);
                        layout3.setPadding(10, 10, 10, 10);
                    }
                    System.out.println("**** Adding text view " + i);
                    TextView text = new TextView(this);
                    text.setText("The Value of i is :" + i);
                    text.setTextSize(12);
                    text.setGravity(Gravity.LEFT);
                    text.setLayoutParams(new LayoutParams(155,
                            LayoutParams.WRAP_CONTENT));
                    layout3.addView(text);

                    if (i == 9) {
                        System.out
                                .println("Added second linear layout to first");
                        layout2.setVisibility(View.VISIBLE);
                        layout2.addView(layout3);
                    }
                } else {
                    System.out.println("###### Adding text view " + i);
                    TextView text = new TextView(this);
                    text.setText("The Value of i is :" + i);
                    text.setTextSize(12);
                    text.setGravity(Gravity.LEFT);
                    text.setLayoutParams(new LayoutParams(155,
                            LayoutParams.WRAP_CONTENT));
                    layout.addView(text);
                }
            }

        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:24:50.183

试试这个，然后你会看到你的代码是好的。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:weightSum="100" >

<HorizontalScrollView
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="80" >

    <LinearLayout
        android:id="@+id/dyn_layout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="10dip" >
    </LinearLayout>
</HorizontalScrollView>

<Button
    android:id="@+id/dyn_button1"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="20"
    android:text="Add TextViews" />

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T07:36:52.497

实际上你做对了，我只是删除了填充并将所有线性布局的方向设置为垂直。也可以在 xml 文件上修改它，它会起作用 :))) 它只是添加了 10 或 60 的填充，这是父视图的内容。

修改后的 Java 代码：

```
@Override
public void onClick(View v) {

 switch (v.getId()) {
    case R.id.dyn_button1:
        LinearLayout layout = (LinearLayout) findViewById(R.id.dyn_layout);
        LinearLayout layout2 = null;
        LinearLayout layout3 = null;
        for (int i = 0; i < 10; i++) {
            if (i > 4) {
                if (i == 5) {
                    layout2 = new LinearLayout(this);
                    layout2.setLayoutParams(new LayoutParams(
                            LayoutParams.FILL_PARENT,
                            LayoutParams.WRAP_CONTENT));
                    layout2.setOrientation(LinearLayout.VERTICAL);
                 //   layout2.setPadding(10, 10, 10, 10);
                    layout3 = new LinearLayout(this);
                    layout3.setLayoutParams(new LayoutParams(
                            LayoutParams.FILL_PARENT,
                            LayoutParams.WRAP_CONTENT));
                    layout3.setOrientation(LinearLayout.VERTICAL);
               //     layout3.setPadding(10, 10, 10, 10);
                }
                System.out.println("**** Adding text view " + i);
                TextView text = new TextView(this);
                text.setText("The Value of i is :" + i);
                text.setTextSize(12);
                text.setGravity(Gravity.LEFT);
                text.setLayoutParams(new LayoutParams(155,
                        LayoutParams.WRAP_CONTENT));
                layout3.addView(text);

                if (i == 9) {
                    System.out
                            .println("Added second linear layout to first");
                    layout2.setVisibility(View.VISIBLE);
                    layout2.addView(layout3);
                    layout.addView(layout2);
                }
            } else {
                System.out.println("###### Adding text view " + i);
                TextView text = new TextView(this);
                text.setText("The Value of i is :" + i);
                text.setTextSize(12);
                text.setGravity(Gravity.LEFT);
                text.setLayoutParams(new LayoutParams(155,
                        LayoutParams.WRAP_CONTENT));
                layout.addView(text);

            }
        }

    }

} 
```

# url - UrlFetchApp.fetch( ) 带有 | 的 url

> ID：11734912
> 
> 赞同：1
> 
> 时间：2012-07-31T07:10:01.760
> 
> 标签：url, encoding, scripting, google-apps-script, fetch

我有一个想使用 google 脚本的 UrlFetchApp.fetch( ) 命令获取的 url。不幸的是，这个网址有一个 | （部分编码到 %7c 中），每次我尝试获取它时，我都会收到一条错误消息，提示“无效参数”。知道如何解决这个问题并成功获取网址吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:18:12.553

`UrlFetchApp.fetch`如果传递给的 url已经编码，它似乎可以工作。

假设您要获取 www.google.com/aaa|bbb（实际上并不存在）。以下脚本因“无效参数”而失败：

```
UrlFetchApp.fetch("www.google.com/aaa|bbb"); 
```

但是这个正确地返回一个 404，因为请求是有效的，但是页面没有找到：

```
UrlFetchApp.fetch("www.google.com/aaa%7Cbbb"); 
```

如果这没有帮助，如果您可以粘贴您的网址会有所帮助。

# javascript - jquery javascript循环和顺序函数显示

> ID：11734913
> 
> 赞同：1
> 
> 时间：2012-07-31T07:10:04.370
> 
> 标签：javascript, jquery, setinterval, sequential

我正在为类似手风琴的幻灯片放映开发 jQuery 系统，问题是当我尝试为此创建自动幻灯片时，我有：

```
for (i=1;i<=5;i++)  { setInterval(acordeon(i),2000) } 
```

有了这个我在循环内调用函数 acordeon(i) 每 2000 毫秒执行一次，问题是它没有执行所有

函数参数是要显示的 div 的 id，例如，如果我有 5 个 div 要设置动画，我只需要使用正确的 id 调用此函数，它的动画效果就很好，当我尝试对此进行动画处理时问题就来了：我需要先执行`acordeon(1)`然后`acordeon(2)`..... 3 , 4 最后`acordeon(5)`

我尝试了不同的方法，但它只在我生成随机整数并调用时才有效`setInterval`

好的，谢谢我希望的一切 - 当然 - :) 你可以帮助我，问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:39:28.333

您的问题可能是您将这些间隔“全部”设置在几毫秒内，因此所有 5 个间隔都在“同一时间”结束。尝试：

```
var divToAnimate = 1;

setInterval(function(){ 

    acordeon(divToAnimate);

    divToAnimate = (divToAnimate%5)+1;

},2000); 
```

这样，您将每 2 秒调用一次手风琴，并使用不同的 i 进行动画处理，然后将其递增，但将其保持在 1-5 范围内

[这是一个 jFiddle](http://jsfiddle.net/yz4R8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:38:37.357

这对我来说效果很好：

```
for (var i = 1; i < 10; i++) {
    $('#bullet-' + i).delay(i * 1000 - 1000).fadeIn('fast', function () {
        var id = this
        setTimeout (function () {$(id).css('color', 'lightgray');}, 1500);
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T07:29:24.220

您需要将回调传递给 setInterval，而不是传递手风琴函数的返回值。在你的 for 循环中试试这个：

```
setInterval( function(){ acordeon(i) }, 2000 ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T07:27:21.357

使用 jQuery[`.each()`](http://api.jquery.com/each/)函数：

```
$(div).each(function(){ setInterval(acordeon($(this)),2000)}); 
```

# gwt-platform - GWTP 嵌套演示者：类型 > 无法解决

> ID：11734915
> 
> 赞同：1
> 
> 时间：2012-07-31T07:10:07.650
> 
> 标签：gwt-platform

我正在尝试在 GWT 中制作嵌套演示者。我已经从示例 GWTP 项目@http://code.google.com/p/gwt-platform/wiki/SimpleNestedSample“复制和粘贴”代码

在某一时刻，代码

```
@ContentSlot
public static final Type<RevealContentHandler<?>> contentSlot = new   Type<RevealContentHandler<?>>(); 
```

给了我错误，我无法通过 Eclipse 建议找到要导入的包来解决类型错误。（通过 Eclipse 建议尝试所有可能的“类型”包，例如 import com.google.gwt.i18n.server.Type; import com.google.gwt.dev.asm.Type; import com.sun.tools.javac。代码.类型;

)

谁能告诉我要导入什么包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:25:42.100

`import com.google.gwt.event.shared.GwtEvent.Type;`

# maven - 本地存储库的 Maven 工件

> ID：11734919
> 
> 赞同：0
> 
> 时间：2012-07-31T07:10:22.580
> 
> 标签：maven

我想为 maven 创建一个本地存储库。为此，我必须下载所有必需的工件。是否有任何直接下载链接可供所有工件下载一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:25:32.757

本地存储库将在您第一次调用与项目相关的 Maven 时自动创建。本地存储库的默认位置是 $HOME/.m2/repository。您不需要下载依赖项等，因为 Maven 会自动执行此操作。

# apache - .htaccess 阻止直接访问子目录，但允许通过 JQuery/images/etc 调用它们

> ID：11734924
> 
> 赞同：0
> 
> 时间：2012-07-31T07:10:23.757
> 
> 标签：apache, security, .htaccess

我的主要 index.php 通过 JQuery 从子目录调用几个脚本。我需要阻止直接访问此目录中的任何文件，但允许 index.php 访问它们。我试过简单的：

`deny from all`

方法，但这甚至阻止 Jquery 加载脚本。还有一个`/images`子目录需要阻止直接访问。`deny all`禁止以任何方式调用图像。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:18:16.633

只需使用 php 的文件功能来获取受保护文件的内容，因此只有您的 php 文件（例如 index.php）能够处理受保护目录的文件。

有用的功能是：

[文件获取内容（）](http://de2.php.net/manual/en/function.file-get-contents.php)

[fread()](http://de2.php.net/manual/en/function.fread.php)

...

然后您可以在 output-html 中包含 js 代码或将内容作为图像输出（然后您应该查看[header()](http://de2.php.net/manual/en/function.header.php)函数。

# javascript - JavaScript 添加天数

> ID：11734926
> 
> 赞同：1
> 
> 时间：2012-07-31T07:10:32.943
> 
> 标签：javascript, date, format, add

如何在日期 31.07.2012 中添加一天（或 2 天）并以 dd.MM.yyyy 格式返回结果（与输入日期格式相同）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:29:43.410

最好的方法是使用 javascript 日期对象。javascirpt 中的[日期对象](http://msdn.microsoft.com/en-us/library/cd9w2te4%28v=vs.94%29.aspx)被初始化为 mm/dd/yyyy 或 Date(year,month-1, date)。那是，

```
dateString = "31.07.2012"
dateSplit = dateString.split('.') 
date = new Date(dateSplit[2], dateSplit[1]-1, dateSplit[0])
date.setDate(date.getDate()+2)
newDateString = ((date.getDate() > 10) ? date.getDate() : ("0" + date.getDate())) + "." + ((date.getMonth()+1 > 10) ? date.getMonth()+1 : ("0" + (date.getMonth()+1))) + "." + (date.getFullYear()) 
```

*month-1 用于 Date(year,month-1, date) 因为月份以 0 开头*

结果将是

```
"02.08.2012" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T07:19:06.470

```
/**
 * Format date (2012.08.31)
 */
Date.prototype.format = function() {
   var yyyy = this.getFullYear().toString();
   var mm = (this.getMonth()+1).toString(); // getMonth() is zero-based
   var dd  = this.getDate().toString();
   return yyyy + '.' + (mm[1]?mm:"0"+mm[0]) + '.' + (dd[1]?dd:"0"+dd[0]); // padding
}

/**
 * Increase current time
 */
Date.prototype.increase_days = function(days) {
    this.setTime(this.getTime() + (days * (1000 * 60 * 60 * 24)));
    return this;
}

//usage:
var date = new Date();
date.increase_days(2);
console.log(date.format()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T07:40:03.543

```
 var numDaysToAdd = 2;
    var inputDateString = "31.07.2012";
    var resultDate = stringToDate(inputDateString);
    resultDate.setDate( resultDate.getDate()+numDaysToAdd );
    var result = dateToString( resultDate );

    alert(result);

    function stringToDate( aString )
    {
        var dateArray = aString.split(".");
        return new Date(dateArray[2],dateArray[1]-1,dateArray[0]);
    }

    function dateToString( aDate )
    {
        var date = aDate.getDate();
        date = (date > 9) ? date : "0"+date.toString();

        var month = aDate.getMonth()+1;
        month = (month > 9) ? month : "0"+month.toString();

        var year = aDate.getFullYear();

        return (date+"."+month+"."+year);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-15T09:40:49.163

假设`inputDateString`格式是`dd.mm.yyyy`

```
function addDaysToDate (inputDateString ,noOfDays ){ 
    var myDate=dateString.split(".");
    var newDate=myDate[1]+"/"+myDate[0]+"/"+myDate[2];
    var dateInMilliSec  = new Date(newDate).getTime();
    var addDaysToTime = new Date(dateInMilliSec + (86400000 * noOfDays));
    var dd = addDaysToTime.getDate();
    var MM = addDaysToTime.getMonth()+1;
    var yyyy = addDaysToTime.getFullYear();
    return dd+"."+MM+"."+yyyy;
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T07:33:33.067

这将为您完成

```
var d = "31.07.2012";
d = d.split(".");
date = new Date(d[2],d[1]-1,d[0]);
date.setDate(date.getDate() + 2);
document.body.innerHTML += (date.getDate() + "." + date.getMonth() + "." + (date.getFullYear())); 
```

# performance - 空间划分算法速度

> ID：11734929
> 
> 赞同：1
> 
> 时间：2012-07-31T07:10:41.327
> 
> 标签：performance, algorithm, space, data-partitioning

我正在开发一个 3D 游戏引擎作为一个项目。我想对场景中的每个三角形/多边形使用空间分区算法来有效地检测碰撞。我只想知道（在我开始编写细节之前）现代计算机游戏中典型的空间分区算法有多快？我有动态对象，所以我想我可能必须每帧重新分区我的场景。这是否可能并且仍能达到合理的帧速率？如果答案可以包含数据（例如 FPS、多边形数量等），将不胜感激。如果那太麻烦了，请告诉我重新分区每一帧是否合理。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T19:40:54.650

我首先建议阅读关于[使用 CUDA 进行宽相碰撞检测](http://http.developer.nvidia.com/GPUGems3/gpugems3_ch32.html)的章节。它比较了不同的广泛的相位碰撞算法。您的表现取决于几个关键变量。第一个变量是您的算法是否使用 GPU 加速实现。之前引用的文章包含一些关于帧速率与对象数量的基准。至少它应该让您对可以实现的目标有一个很好的了解。

如果您不计划 GPU 加速，则[扫描和修剪](http://en.wikipedia.org/wiki/Sweep_and_prune)是最容易实现的方法之一。我不知道确切的数字，但是当对象很少并且您的对象在帧之间变化不大时，它会表现良好。在这种情况下，你有 O(n) 的性能。这是一个很好的基线，因为它很容易实现。

如果你真的很认真，我推荐这本书[Real-Time Collision Detection](https://rads.stackoverflow.com/amzn/click/com/1558607323)。我在研究碰撞检测方法时使用了这个。这是一个很好的资源。

# nuget - 私有 Intranet 级 Nuget 源：Windows 集成安全自定义

> ID：11734933
> 
> 赞同：8
> 
> 时间：2012-07-31T07:10:52.473
> 
> 标签：nuget, windows-authentication, nuget-server

我正在考虑设置 Intranet 级别的 Nuget 提要（我公司的一群团队应该使用它）。
我已经简要浏览了[Pro Nuget](https://rads.stackoverflow.com/amzn/click/com/1430241918)书中的一些教程 + 相应章节，但是到目前为止我仍然有一些问题：

1.  如何使windows集成安全在私有feed上顺利运行并自定义私有Nuget feed的访问权限（例如，授予每个人获取包但仅授予几个域用户/组推送）；
2.  如何让开发人员无需将包推送到私人订阅源`api key`？
3.  如何避免开发人员犯将包推送到公共提要这样的愚蠢错误？这足以不将`api key`公共提要配置为默认值吗？

有没有人遇到过这些情况之一？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T09:52:18.117

到目前为止我还没有尝试过，但是按照这些说明操作： http: [//docs.nuget.org/docs/creating-packages/hosting-your-own-nuget-feeds](http://docs.nuget.org/docs/creating-packages/hosting-your-own-nuget-feeds)

我只需在托管提要的服务器上创建一个网络共享，对特定的 AD 开发人员组具有写入权限。

这样您的存储库是公开的，只有某些人可以向其中添加包。

即使在此之后，如果您有一个持续集成服务器，您也可以只允许帐户构建包访问文件共享（或 API 密钥）。通过这种方式，包在通过自动化测试后会自动发布。

# c# - 如何在c#中使用鼠标滚轮放大和缩小图片框中的图像？

> ID：11734934
> 
> 赞同：4
> 
> 时间：2012-07-31T07:10:53.190
> 
> 标签：c#, picturebox, mousewheel, zooming

我想在 c# 中使用鼠标滚轮放大或缩小图片框上的图像。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T07:35:13.217

该主题有助于放大和缩小图片框中的图片

在图片框鼠标滚轮事件中添加以下代码

```
if (e.Delta != 0) {
    if (e.Delta <= 0) {
        //set minimum size to zoom
        if (PictureBox1.Width < 50)
            return;
    } else {
        //set maximum size to zoom
        if (PictureBox1.Width > 500)
            return;
    }
    PictureBox1.Width += Convert.ToInt32(PictureBox1.Width * e.Delta / 1000);
    PictureBox1.Height += Convert.ToInt32(PictureBox1.Height * e.Delta / 1000);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:16:08.830

使用 MouseWheel 事件：http: [//msdn.microsoft.com/fr-fr/library/system.windows.forms.control.mousewheel%28v=vs.80%29](http://msdn.microsoft.com/fr-fr/library/system.windows.forms.control.mousewheel%28v=vs.80%29)

# extjs4 - 卡片布局出现错误

> ID：11734935
> 
> 赞同：0
> 
> 时间：2012-07-31T07:10:53.770
> 
> 标签：extjs4, extjs4.1

当应用程序启动时，它将显示`screen1`. 然后当我们点击一​​个按钮时，它会显示`panel1`或`panel2`。我的代码如下；添加时出现错误`panel2`。

```
launch: function() {

    Ext.create('Ext.container.Viewport', {
        layout: 'card',
        items: [
        { 
            xtype: 'panel', 
        items: { xtype: 'screen1' }
        },
        {
            xtype: 'panel',
            items: { xtype:'panel1' }
        }

        ] 
    }); 

} 
```

一旦我添加另一个面板；我得到一个错误

```
TypeError: namespace is undefined
[Break On This Error]   

if (namespace === from || namespace.substring(0, from.length) === from) { 
```

代码：

```
items: [
            { 
                xtype: 'panel', 
            items: { xtype: 'screen1' }
            },
            {
                xtype: 'panel',
                items: { xtype:'panel1' }
            },
            {
                xtype: 'panel',
                items: { xtype:'panel2' }
            }

        ] 
```

注意：我`Panel2`在 `views: [ Panel2']`

**更新**

```
Ext.define('MyApp.view.Panel2', {
    extend: 'Ext.tab.Panel',
    alias: 'widget.panel2',

    height: 250,
    width: 400,
    activeTab: 0,

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'panel',
                    title: 'Tab 1'
                },
                {
                    xtype: 'panel',
                    title: 'Tab 2'
                },
                {
                    xtype: 'panel',
                    title: 'Tab 3'
                }
            ]
        });

        me.callParent(arguments);
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:07:22.937

这很可能是因为您缺少依赖项。由于您没有发布应用程序定义，因此您需要在控制器中要求视图（或者，如果您还没有那么远，在应用程序本身的要求中）。

查看下载中的 /examples/app/simple 以了解其设置要求。

# php - GROUP_CONCAT && 左外连接在 1 个表上？

> ID：11734942
> 
> 赞同：0
> 
> 时间：2012-07-31T07:11:10.133
> 
> 标签：php, mysql, join, group-concat

我有 1 个带有菜单标签的表。我需要一个查询来获取父标签和 UnderMenu 标签。当我执行此操作时：

```
 SELECT es.Label MenuLabel, m.Label UnderLabel 
  FROM books_menu es
  LEFT JOIN books_menu m ON es.ID = m.MenuParentID 
  WHERE es.ParentID =1 
  AND m.Type='under'
  AND es.Type='main' 
  LIMIT 0 , 30 
```

一切正常，但 MenuLabel 显示在每条记录上。像这样：

```
 MenuLabel    UnderLabel
  Home         1
  Home         2
  Home         3
  Contacts     4 
```

当我执行：

```
 SELECT es.Label MenuLabel, GROUP_CONCAT(m.Label) AS UnderLabel 
  FROM books_menu es
  LEFT JOIN books_menu m ON es.ID = m.MenuParentID 
  WHERE es.ParentID =1 
  AND m.Type='under'
  AND es.Type='main' 
  LIMIT 0 , 30 
```

我得到：

```
 MenuLabel    UnderLabel
       Home         1,2,3,4 
```

我怎么能得到这个：

```
 MenuLabel    UnderLabel
   Home         1,2,3
   Contacts     4 
```

谢谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:13:05.493

你需要有`GROUP BY`子句：

```
SELECT es.Label MenuLabel, GROUP_CONCAT(m.Label) AS UnderLabel 
FROM books_menu es
LEFT JOIN books_menu m ON es.ID = m.MenuParentID 
WHERE es.ParentID =1 
      AND m.Type='under'
      AND es.Type='main' 
GROUP BY MenuLabel    
LIMIT 0 , 30; 
```

# asp.net - LoginView 的反转功能

> ID：11734953
> 
> 赞同：0
> 
> 时间：2012-07-31T07:12:25.457
> 
> 标签：asp.net, login-control, loginview

是否可以在 ASP.NET 中反转 LoginView 的功能？

我想为某个角色排除一些内容，并且我看到它的方式是您使用 LoginView 在登录页面上显示额外内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:19:19.503

您可以通过编辑`RoleGroups`属性为单个角色创建视图。

# java - 如何使用java在excel中读取和写入值？

> ID：11734954
> 
> 赞同：0
> 
> 时间：2012-07-31T07:12:24.093
> 
> 标签：java, excel, report, apache-poi

> *   示例 Excel --> 抱歉，我不允许附加图像..
> *   TC 编号 | 标题 | **结果**
> *   1 | 状态和 Vin | **失败的**
> *   2 | 州和监管代码 | **通过**
> *   3 | 预订试驾 | **通过**

```
public class sampleTest{
public static void main(String[] args) throws Exception {
         int iTest = 2, iTest2 = 3;
          if (iTest == iTest2){
              //It will pass a value into the excel (e.g. "Passed")
          }
          else{
             //It will pass a value into the excel (e.g. "Failed")
          }
    } 
```

我的程序的目标是通过从我的测试中获取通过和失败的结果来生成报告。我的主要问题是如何从 excel 中读取结果并将值**“通过”**或**“失败”**放在“**结果”列**下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:17:13.073

[从这里](http://poi.apache.org/download.html)下载 apache poi jar 浏览这些[示例](http://poi.apache.org/spreadsheet/examples.html)，这些示例演示了如何从 java 程序中读取/写入 xls 数据示例帮助代码：

```
public static void main(String[] args) throws IOException {
        Workbook wb = new HSSFWorkbook(); 
        Sheet sheet = wb.createSheet("sheet");
        Row row = sheet.createRow((short) 0);

        row.createCell(0).setCellValue(1.2);
        row.createCell(1).setCellValue(wb.getCreationHelper().createRichTextString("This is a string"));
        row.createCell(2).setCellValue(true);

        FileOutputStream fileOut = new FileOutputStream("workbook.xls");
        wb.write(fileOut);
        fileOut.close();
    } 
```

这可能会帮助您入门。整个流程是：

1.  创建工作簿 => 主 xls 文件
2.  然后创建一张表
3.  然后创建一行。
4.  为每一行创建任意数量的单元格，并用不同的值填充单元格
5.  像文件一样编写工作簿。

可以有多种类型的单元格，请参阅[此](http://poi.apache.org/spreadsheet/quick-guide.html#CellTypes)以获取更多信息。要了解如何读取 excel 文件：

```
InputStream myxls = new FileInputStream("workbook.xls");
        wb     = new HSSFWorkbook(myxls);

         sheet = wb.getSheetAt(0);       // first sheet
         row     = sheet.getRow(0);        // third row
        HSSFCell cell   = (HSSFCell) row.getCell((short)1);  // fourth cell
        if (cell.getCellType() == HSSFCell.CELL_TYPE_STRING) {
            System.out.println("The Cell was a String with value \" " + cell.getStringCellValue()+" \" ");
        } else if (cell.getCellType() == HSSFCell.CELL_TYPE_NUMERIC) {
            System.out.println("The cell was a number " + cell.getNumericCellValue());
        } else {
            System.out.println("The cell was nothing we're interested in");
        } 
```

有关更多信息，请参阅[此](http://onjava.com/onjava/2003/04/16/poi_excel.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:15:38.050

通过将成为 Excel 文档界面的库。一种选择是[Apache POI](http://poi.apache.org/)。Excel 示例代码可以从[这里](http://poi.apache.org/spreadsheet/how-to.html#sxssf)找到。

其他选项是[Java Excel API](http://sourceforge.net/projects/jexcelapi/)。

# sql - 用于将垂直数据转换为水平数据的 SQL 2008 脚本

> ID：11734956
> 
> 赞同：1
> 
> 时间：2012-07-31T07:12:33.677
> 
> 标签：sql, sql-server, sql-server-2008, pivot

我是SQL新手，请帮助我如何将其转换为水平？例子：

**（老的）**

```
No      Mchn  EnNo       Name      DateTime 
00001   1     01110037   Juan      2012/07/16  08:00:18
00002   1     01110037   Juan      2012/07/16  12:02:23
00003   1     01110037   Juan      2012/07/16  12:42:23
00004   1     01110037   Juan      2012/07/16  18:42:23
00005   1     01110038   Robert    2012/07/16  08:00:18
00006   1     01110038   Robert    2012/07/16  12:02:23
00007   1     01110038   Robert    2012/07/16  12:42:23
00008   1     01110038   Robert    2012/07/16  18:42:23 
```

我想展示的结果..

**（新的）**

```
EnNo         Name   Date         TimeIn     BrkIn      BrkOut     TimeOut
01110037     Juan   2012/07/16   08:00:18   12:02:23   12:42:23   18:42:23
01110038     Robert 2012/07/16   08:00:18   12:02:23   12:42:23   18:42:23 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:03:21.350

你可以尝试这样的事情：

```
select 
EnNo, Name, convert(varchar(10),DateTime,101) date,

-- TimeIn 
convert(varchar(8),min(DateTime),114) TimeIn,

-- BreakIn 
(select convert(varchar(8),max(DateTime),114)
        from (select top 2 DateTime from oldTable where EnNo = t1.EnNo and
            CONVERT(varchar(10),DateTime,101) = CONVERT(varchar(10),t1.DateTime,101))t2
) BreakIn,

-- BreakOut
(select convert(varchar(8),max(DateTime),114) 
        from (select top 3 DateTime from oldTable where EnNo = t1.EnNo and
            CONVERT(varchar(10),DateTime,101) = CONVERT(varchar(10),t1.DateTime,101))t3
) BreakOut,

-- TimeOut
convert(varchar(8),max(DateTime),114) TimeOut 
from oldTable t1
group by EnNo,Name,convert(varchar(10),DateTime,101) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T13:52:49.720

这应该为您提供所需的所有字段：

```
select *
from 
(
    select 
        enno
        , name
        , cast(dt as date) dy
        , CONVERT(char(8), dt, 114) as tm
        , Case row_number() over(partition by enno order by dt) 
            when 1 then 'timein'
            when 2 then 'brkin'
            when 3 then 'brkout'
            when 4 then 'timeout' END as BreakType
    from t
) x
pivot
(
    min(tm)
    for breaktype in ([timein], [brkin], [brkout], [timeout])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/9f06f/1)

# cocos2d-iphone - 使用操纵杆滚动平铺地图

> ID：11734960
> 
> 赞同：0
> 
> 时间：2012-07-31T07:12:56.743
> 
> 标签：cocos2d-iphone, box2d-iphone

在我的游戏中，我使用瓷砖地图和偷偷摸摸的操纵杆，我想在我的游戏中执行以下任务。我在我的游戏中使用 box2d。我正在使用 box2d 创建精灵主体，并为平铺地图创建静态主体。我的主要问题是当我的精灵移动时，瓷砖地图无法滚动。请帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:33:40.603

我不确定您的操纵杆使用什么代码，但是，[这](http://www.cocos2d-iphone.org/forum/topic/1418 "这里")是我在游戏中使用操纵杆时使用的代码。它非常易于使用且易于理解。希望对你有帮助..！:)

# java - 三星 Galaxy S3 的 Linux 开发/部署

> ID：11734963
> 
> 赞同：5
> 
> 时间：2012-07-31T07:13:01.927
> 
> 标签：java, android, linux, eclipse

我正在使用 Linux 系统 (Xubuntu) 来开发 Android 应用程序。我正在使用 Eclipse 开发这个应用程序。我希望能够在我的三星 Galaxy S3 上进行测试，但 Eclipse 似乎无法找到我的设备。“选择正在运行的 Android 设备”部分下没有列出任何内容。

我在三星的网站上搜索了 Galaxy S3 的 USB 驱动程序，但我没有找到适用于 Linux 的 - 只有 Windows 和 Mac。我们 Linux 用户的爱在哪里？Linux 系统没有与基于 Linux 的设备通信的 USB 驱动程序似乎很荒谬。有我可以使用的驱动程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:15:54.637

你试过了吗

> adb 杀死服务器
> 
> adb 启动服务器

在 Linux 中需要执行上述操作。而且您应该以root用户身份登录，

[https://stackoverflow.com/a/3129903/603744](https://stackoverflow.com/a/3129903/603744)

或者如果你有任何机会没有看到这个问题，

[三星 Galaxy 7" (GT-P6210) 未检测到 USB 调试？](https://stackoverflow.com/q/8668923/603744)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T07:17:08.053

您不需要用于 linux 的 USB 驱动程序，请按照[此处](http://developer.android.com/tools/device.html)的说明进行操作。您需要将文件添加到 rules.d

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T07:18:36.183

Linux 不需要 USB 驱动程序，这就是您找不到它们的原因。

为了能够将您的应用程序部署到您的 S3，您需要启用 USB 调试模式。

主屏幕 -> 应用程序 -> 设置 -> 选择开发人员选项 -> USB 调试

主屏幕 -> 应用程序 -> 设置 -> 安全 -> 禁用调试模式（关闭此功能）

现在连接您的手机，然后运行以下命令：

```
adb devices 
```

它应该列出您的设备。此外，您的 Android 通知区域应显示已启用调试模式。

您现在可以将应用程序部署到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T07:17:41.933

我也在 Ubuntu 上工作。您必须设置 USB 供应商 ID。看看这个[链接](http://developer.android.com/tools/device.html)

# windows - Metro应用程序运行时动态变化的Web服务URL

> ID：11734966
> 
> 赞同：0
> 
> 时间：2012-07-31T07:13:16.887
> 
> 标签：windows, microsoft-metro, windows-runtime, winrt-xaml

如果服务引用 url 是动态的，如何访问服务方法？

在我的 Metro 应用程序中，我向用户提供了在文本框中输入 url 的规定，这取决于我需要连接到该服务（因此服务 url 将会改变）

1）如果服务参考网址发生变化，如何在我的 Metro 应用程序中使用服务方法？

2）如何在存在许多服务方法的metro应用程序中访问一种特定的服务方法（如何仅通过将参数作为输入来调用该特定服务方法）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:37:43.760

如果您想动态调用 WCF Web 服务，请通过以下链接。 [http://blogs.msdn.com/b/vipulmodi/archive/2006/11/16/dynamic-programming-with-wcf.aspx](http://blogs.msdn.com/b/vipulmodi/archive/2006/11/16/dynamic-programming-with-wcf.aspx)。

您可以从这里下载源代码，您可以从中调用 Web 服务。

# c# - 登录表单 webmatrix 中的“记住我”

> ID：11734969
> 
> 赞同：0
> 
> 时间：2012-07-31T07:13:29.007
> 
> 标签：c#, asp.net, razor, security

我拥有一个 ASP.NET Razor 站点已有一段时间了，我厌倦了每次都必须手动登录。我想使用所有 WebMatrix 示例和起始站点模板中内置的 rememberMe。但我找不到它的文档。

据我所知，即使在示例中，rememberMe 复选框在那里，它实际上并没有实现。

我们如何才能为基于 WebMatrix 的站点实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T07:19:22.187

搜索[`FormsAuthentication.RedirectFromLoginPage`](http://msdn.microsoft.com/en-us/library/ka5ffkce.aspx)并将最后一个参数设置为**true**。

# php - 我如何获取有关 xml 文件的特定数据？

> ID：11734972
> 
> 赞同：1
> 
> 时间：2012-07-31T07:13:51.053
> 
> 标签：php, xml, xpath, xml-parsing

我如何获取特定数据，只有 Kod 属性是 xml 文件上的 USD 和 GBP？有没有获取属性值的方法？

今天.XML：

```
<?xml version="1.0" encoding="iso-8859-9"?>
    <Tarih_Date Tarih="27.07.2012" Date="07/27/2012">
        <Currency Kod="USD" CurrencyCode="USD">
            <CurrencyName>US DOLLAR</CurrencyName>
            <ForexBuying>1.81</ForexBuying>
            <ForexSelling>1.8187</ForexSelling>
        </Currency>
        <Currency Kod="EUR" CurrencyCode="EUR">
            <CurrencyName>EURO</CurrencyName>
            <ForexBuying>2.2227</ForexBuying>
            <ForexSelling>2.2334</ForexSelling>
        </Currency>
        <Currency Kod="GBP" CurrencyCode="GBP">
            <CurrencyName>POUND STERLING</CurrencyName>
            <ForexBuying>2.841</ForexBuying>
            <ForexSelling>2.8559</ForexSelling>
        </Currency>
    </Tarih_Date> 
```

PHP：

```
<?php
    $get_url = "today.xml";
    $xml = simplexml_load_file($get_url) or die("Error : Cannot create object!");

    foreach($xml-> Currency as $currency){
         //$attr = $currency -> attributes();
         echo $attr."<br/>";
         //echo $currency -> CurrencyName;
        //echo $data -> CurrencyName ."-". $data -> ForexBuying ."-". $data -> ForexSelling ."<br/>";
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:27:36.193

**使用这样的 XPath 表达式**：

```
/*/*[@Kod = 'USD' or @Kod = 'GBP']/* 
```

这将选择作为 XML 文档顶部元素的孙子元素的任何元素，并且其父元素的`Kod`属性具有字符串值`"USD"`or 或`"GBP"`。

**或使用**：

```
/*/*[@Kod = 'USD' or @Kod = 'GBP']/*/text() 
```

这将选择在前一个 XPath 表达式中选择的元素的文本节点子节点。

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select="/*/*[@Kod = 'USD' or @Kod = 'GBP']/*"/>
===========
     <xsl:copy-of select="/*/*[@Kod = 'USD' or @Kod = 'GBP']/*/text()"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<Tarih_Date Tarih="27.07.2012" Date="07/27/2012">
    <Currency Kod="USD" CurrencyCode="USD">
        <CurrencyName>US DOLLAR</CurrencyName>
        <ForexBuying>1.81</ForexBuying>
        <ForexSelling>1.8187</ForexSelling>
    </Currency>
    <Currency Kod="EUR" CurrencyCode="EUR">
        <CurrencyName>EURO</CurrencyName>
        <ForexBuying>2.2227</ForexBuying>
        <ForexSelling>2.2334</ForexSelling>
    </Currency>
    <Currency Kod="GBP" CurrencyCode="GBP">
        <CurrencyName>POUND STERLING</CurrencyName>
        <ForexBuying>2.841</ForexBuying>
        <ForexSelling>2.8559</ForexSelling>
    </Currency>
</Tarih_Date> 
```

**计算两个 XPath 表达式，并将计算结果复制到输出：**

```
<CurrencyName>US DOLLAR</CurrencyName>
<ForexBuying>1.81</ForexBuying>
<ForexSelling>1.8187</ForexSelling>
<CurrencyName>POUND STERLING</CurrencyName>
<ForexBuying>2.841</ForexBuying>
<ForexSelling>2.8559</ForexSelling>
===========
     US DOLLAR1.811.8187POUND STERLING2.8412.8559 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:32:55.110

我尝试使用索引号获取值。谢谢@GordonM。

```
 <?php
        $get_url = "http://www.tcmb.gov.tr/kurlar/today.xml";
        $xml = simplexml_load_file($get_url) or die("Error : Cannot create object!");                       
        echo $xml -> Currency[0] -> Isim;
        echo "<br/>";   
        echo $xml -> Currency[2] -> Isim;                   
    ?> 
```

# java - Java 应用程序在调用 System.exit(0) 时不退出

> ID：11734976
> 
> 赞同：1
> 
> 时间：2012-07-31T07:14:33.950
> 
> 标签：java, exit

我有一个在 Mac 和 Windows 上运行的 Java 应用程序。我呼吁`System.exit(0)`用户按下“退出”按钮。该应用程序在 Win7 上运行良好。但在 Mac 上，按“退出”按钮后，程序无法退出。应用程序没有响应。

根据活动监视器，所有用户线程都已终止。我不知道程序在等什么。

我无法粘贴 Activity Monitor 的整个输出，但这里是一个示例：</p>

```
851 Thread_435381: Java: Exception Handler Thread  
851 Thread_435386: Java: Gang worker#0 (Parallel GC Threads)
851 Thread_435493
851 thread_start  (in libsystem_c.dylib) + 34  [0x92abd6de]  
851 _pthread_start  (in libsystem_c.dylib) + 335  [0x92ab9ed9]  
851 CAPThread::Entry(CAPThread*)  (in CoreMediaIO) + 123  [0x9a5e3a3d]  
851 CMIO::DAL::RunLoop::OwnThread(void*)  (in CoreMediaIO) + 160  [0x9a5eded2]  
851 CFRunLoopRunInMode  (in CoreFoundation) + 120  [0x9329c328]  
851 CFRunLoopRunSpecific  (in CoreFoundation) + 332  [0x9329c47c]  
851 __CFRunLoopRun  (in CoreFoundation) + 1428  [0x9329cda4]  
851 __CFRunLoopServiceMachPort  (in CoreFoundation) + 170  [0x93293c7a]  
851 mach_msg  (in libsystem_kernel.dylib) + 70  [0x942601f6]  
851 mach_msg_trap  (in libsystem_kernel.dylib) + 10  [0x94260c22]' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:25:30.387

**1.**我认为您**将非 Gui 工作与 Gui 混合在一起。**

**2.**我希望你只保留你`Event Dispatcher Thread` **的GUI目的**，如果你还没有尝试过这个......然后尝试去做......

```
public static void main(String[] args){

        EventQueue.invokeLater(new Runnable(){

               public void run(){

                      myframe.setVisible();

                   }

          });

   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:41:55.963

进行线程转储以查看哪些线程正在阻塞退出。为此，请打开命令提示符，然后执行 ps -eaf | grep 爪哇。找到你的 pid 并执行，杀死 -3 3 次。

您应该得到一个线程转储并查看哪个线程正在阻塞。问候菲利普

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T07:26:06.097

我认为您正在使用swing JFrame，除了Kumar Vivek Mitra的回答，要退出，您还可以这样做：

jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

# sql - 在 Access SQL 中有条件地创建数字列表

> ID：11734979
> 
> 赞同：0
> 
> 时间：2012-07-31T07:14:47.173
> 
> 标签：sql, database, ms-access, numbers

这是 Microsoft Access 2010 的家庭作业。
如何创建一个返回从 1 到 18 的数字列表的查询？尽管在一个条件下，数字列表将不包含表 A 中存在的任何数字。

举个例子。表 A 有 1、5、10、8 和 16。因此，查询将只返回这个数字列表（2、3、4、6、7、9、11、12、13、14、15、17、 18)

有人会善意地提供一些指示吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:32:00.417

SQL 是一种基于集合的语言。所以你总是在使用交集、联合、补码等。

考虑表 A 可能完全是空的。在这种情况下，您需要返回从 1 到 18 的所有数字。您将需要从某个地方获取这些数字。（提示，创建另一个表怎么样？）

一旦你可以编写一个返回从 1 到 18 的所有数字的查询，你就可以开始考虑获取从 1 到 18 的所有数字，除了表 A 中的数字。

# hadoop - 如何使用 API 在 hadoop 中创建序列文件？

> ID：11734981
> 
> 赞同：0
> 
> 时间：2012-07-31T07:14:53.967
> 
> 标签：hadoop, sequencefile

我想在一台机器上使用 haddop 的 API 创建序列文件形式的文件地址数组列表。然后将此输出提供给`sparse-vector`然后`clustering`。对于稀疏和聚类，我从[这里](https://github.com/tdunning/MiA/tree/master/src/main/java/mia/clustering/ch09)获取代码。`ReutersToSparseVectors`和`KMeansClustering`。[这里](http://srijiths.wordpress.com/2011/02/23/sequence-files-in-hadoop/)是写序列文件的代码。但是，当我将序列输出提供给稀疏时，程序会出错。

# javascript - 淘汰赛映射插件 - 捕获数组值

> ID：11734982
> 
> 赞同：0
> 
> 时间：2012-07-31T07:15:02.380
> 
> 标签：javascript, jquery, arrays, json, knockout.js

我有一个来自 REST API 的 JSON 数组。我正在使用 Knockout 映射插件来处理数组并将 JSON 加载到预设的表单值中（如果用户之前已将值添加到表单中 - 我有数据来测试 Knockout 数组）。该表单本质上是添加或删除带有输入的 div 块，因此用户可以添加/删除“工作”体验。

我的麻烦是试图破译插件如何映射数组。我试图在数组中找到一行的特定值（id），以便我可以将其添加为变量来告诉 API 删除该特定行。我可以让 Knockout 显式输出 html 中的行值，但我不知道如何捕获它。在模板“foreach”中，我有一个引用“删除：”的按钮，这就是我试图从数组中捕获值的地方。

例如在 HTML 中：

这输出两行“工作”对象没问题：

```
<span data-bind="text: ko.mapping.toJSON(workModel.work())"></span>

[{"id":"1","schoolID":"2","place":"","position":"Science Teacher","description":"I worked at ASD for 1 year as a Science teacher.","start":"2011","end":"2012","profileID":"91"},{"id":"2","schoolID":"1","place":"American School of Taiwan","position":"Science Guy","description":"I was just another science guy","start":"2008","end":"2011","profileID":"91"}] 
```

这将输出数组中第一行和项目的 id：

```
<span data-bind="text: ko.mapping.toJSON(workModel.work()[0].id)"></span>
"1" 
```

但是在 javascript 中，如果您单击由 foreach 模板生成的删除按钮...

```
gone = function(work) {

        alert(ko.mapping.toJSON(workModel.work(this).id)); 

     } 
```

在 Firebug 中给了我这个错误，然后 UI 重新加载并删除了我刚刚单击的模板块。

```
Unable to parse bindings. Message: TypeError: workModel.work()[0] is undefined; Bindings value: text: ko.mapping.toJSON(workModel.work()[0].id) 
```

即使，如果我用显式语句替换上述警报：

```
gone = function(work) {

         alert(ko.mapping.toJSON(workModel.work()[0].id)); 

         } 
```

我再次得到正确的“1”值。我知道它与代码的“this”方面有关，但我不确定映射插件在做什么，以便我可以从数组中捕获特定值......有意义吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:07:30.363

我终于明白了。它来自 Stack Overflow 和 Knockout 论坛上的不同帖子的组合。我相信其他人有比这更优雅的解决方案，但它对我有用。

在“删除”（或您要用于捕获值的任何按钮）按钮上的 foreach 循环中，我在数据绑定中包含以下内容：

```
<a href="" class="btn" data-bind="click: function() { remove($data.id()); }">Remove</a> 
```

然后在javascript中我有：

```
var self = this;
var row_id;

self.remove = function(index){
            var row_id = index;
            alert(row_id);

    } 
```

警报根据我的需要返回已加载 JSON 的行 ID。$data.id() 可以更改/用于从加载的 JSON 返回任何映射元素。row_id 是一个全局变量，也可以在其他地方访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:18:39.920

我要在这里四处走动，但我确实认为这是这个问题，是的。Javascript 中的作用域有时会很麻烦。尝试在包含消失函数的范围内做这样的事情：

```
var self = this;
gone = function(work) {
    alert(ko.mapping.toJSON(workModel.work(self).id)); 
} 
```

*免责声明：我现在无法自己测试，但试一试:)*

# list - 在 Prolog 中实现“last”

> ID：11734986
> 
> 赞同：14
> 
> 时间：2012-07-31T07:15:35.393
> 
> 标签：list, prolog, prolog-toplevel

我试图通过阅读 Ulle Endriss 的[讲义](http://staff.science.uva.nl/~ulle/teaching/prolog/prolog.pdf)来了解 Prolog 编程。当我对一个练习的解决方案没有达到预期的效果时，我发现很难给出一个好的解释。我认为这与我对 Prolog 评估表达式的方式的不稳定理解有关。

第 20 页的练习 2.6 要求递归实现谓词`last1`，其行为类似于内置谓词`last`。我的尝试如下：

> ```
> last1([_ | Rest], Last) :- last1(Rest, Last).
> last1([Last], Last). 
> ```

它给出了正确的答案，但是对于包含多个元素的列表，我必须键入分号来终止查询。这`last1`与内置的`last`.

```
?- last1([1], Last).
Last = 1.

?- last1([1, 2], Last).
Last = 2 ;
false. 
```

如果我切换我声明规则和事实的顺序，那么在这两种情况下我都需要键入分号。

我想我知道为什么 Prolog 认为`last1`可能有更多的解决方案（因此是分号）。我想它遵循评估顺序

```
last1([1, 2], Last).
==>  last1([2], Last).
==>  last1([], Last).    OR    Last = 2.
==>  false    OR    Last = 2. 
```

这似乎表明我应该寻找一种方法来避免`Rest`与`[]`. 无论如何，我无法解释为什么切换声明顺序应该有任何效果。

**问题 1：** 的行为的正确解释是`last1`什么？

**问题 2：** 我怎样才能实现一个`last1`与内置的无法区分的谓词`last`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-31T08:29:04.170

## 问题一：

Prolog 系统并不总是能够在执行之前决定一个子句是否适用。具体情况取决于实现。也就是说，您一般不能依赖该决定。系统确实从一个版本到另一个版本有所改进。考虑作为最简单的情况：

```
?- X = 1 ; 1 = 2。
X = 1;
错误的。

```

一个非常聪明的 Prolog 可以检测到它`1 = 2`总是失败，因此只是简单地回答`X = 1.`。另一方面，这种“聪明”的实现成本非常高，最好将时间花在优化更频繁的情况上。

那么，为什么 Prologs 会显示这一点呢？主要原因是避免温顺地询问另一个答案，如果 Prolog 已经知道没有进一步的答案。因此，在此改进之前，系统会提示您为所有包含变量的查询提供另一个答案，并`false`在每个查询中得到“否”或“否”，并且只有一个答案。这曾经非常麻烦，以至于许多程序员从不要求下一个答案，因此不会收到有关意外答案的警报。

第二个原因是让您了解实现的局限性：如果 Prolog 要求对这个通用查询提供另一个答案，这意味着它仍然使用一些空间，这些空间可能会积累并耗尽您的所有计算资源。

在你的例子中`last1/2`你遇到了这样的情况。而且您已经做了一些非常聪明的事情，顺便说一句：您尝试最小化查询以查看意外行为的第一次出现。

在您的示例查询`last1([1,2],X)`中，Prolog 系统不会查看整个列表`[1,2]`，而只会查看主函子。`last1([_|_],X)`因此，对于 Prolog 系统，查询看起来与决定应用哪些子句时相同。这个目标现在适用于两个子句，这就是 Prolog 将记住第二个子句作为尝试替代的原因。

但是，想一想：除了最后一个元素之外，现在**所有**元素都可以选择这个选项！这意味着您为每个元素支付一些内存！您实际上可以通过使用很长的列表来观察这一点。这是我在我的小型 32 位笔记本电脑上得到的——您可能需要在更大的系统上再添加零或两个：

```
?-长度（L，10000000），last1（L，E）。
错误：超出本地堆栈

```

另一方面，预定义的`last/2`工作顺利：

```
?-长度（L，10000000），最后（L，E）。
L = [_G343，_G346，_G349，_G352，_G355，_G358，_G361，_G364，_G367|...]。

```

事实上，它使用的是**常数**空间！

现在有两种方法可以解决这个问题：

1.  尝试优化您的定义。是的，你可以做到这一点，但你需要非常聪明！例如，@back_dragon 的定义是不正确的。初学者经常尝试优化程序，而实际上他们正在破坏程序的语义。

2.  问问自己，你是否真的定义了与 相同的谓词`last/2`。事实上，你不是。

## 问题2：

考虑：

```
?-最后（Xs，X）。
Xs = [X] ;
Xs = [_G299, X] ;
Xs = [_G299, _G302, X] ;
Xs = [_G299，_G302，_G305，X]；
Xs = [_G299, _G302, _G305, _G308, X]
...

```

和

```
?- last1(Xs, X)。
** 循环 **

```

因此，在这种情况下，您的定义与 SWI 的定义不同。交换条款的顺序。

```
?-长度（L，10000000），last2（L，E）。
L = [_G343，_G346，_G349，_G352，_G355，_G358，_G361，_G364，_G367|...]；
错误的。

```

再次，这个`false`！但这一次，大名单奏效了。而这一次，最小的查询是：

```
?- last2([1],E)。
E = 1 ;
错误的。

```

情况也很相似：同样，Prolog 将以相同的方式查看查询，`last2([_|_],E)`并得出两个子句都适用的结论。至少，我们现在有恒定的开销而不是线性开销。

有几种方法可以以干净的方式克服这种开销 - 但它们都非常依赖于实现的内部结构。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T10:34:39.243

当 SWI-Prolog 可以确定没有解决方案时，它会尝试避免提示更多解决方案。我认为解释器检查内存以寻找`choice point`剩余的内存，如果找不到，只需声明终止。否则它会等待让用户选择移动。

我会尝试以这种方式使 last1 具有确定性：

```
last1([_,H|Rest], Last) :- !, last1([H|Rest], Last).
last1([Last], Last). 
```

但我不认为它是`indistinguishable`从[last](http://www.swi-prolog.org/pldoc/doc_for?object=last/2)开始的。潜伏在库的源代码处（很简单`?- edit(last).`）

```
%%  last(?List, ?Last)
%
%   Succeeds when Last  is  the  last   element  of  List.  This
%   predicate is =semidet= if List is a  list and =multi= if List is
%   a partial list.
%
%   @compat There is no de-facto standard for the argument order of
%       last/2\.  Be careful when porting code or use
%       append(_, [Last], List) as a portable alternative.

last([X|Xs], Last) :-
    last_(Xs, X, Last).

last_([], Last, Last).
last_([X|Xs], _, Last) :-
    last_(Xs, X, Last). 
```

我们可以欣赏一个深思熟虑的实施。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-11T14:54:36.457

这段代码可以工作：

```
last1([Last], Last).
last1([_ | Rest], Last) :- last1(Rest, Last), !. 
```

这是因为 prolog 的东西可能有更多的组合，但是，使用这个符号：！，prolog 到达这一点后不会返回

# java - 将任何类型的 ArrayList 传递给方法

> ID：11734988
> 
> 赞同：8
> 
> 时间：2012-07-31T07:15:47.850
> 
> 标签：java, android, generics

我正在为我的孩子开发我的第一个 Android 应用程序，一个数学游戏，并在此过程中学习 Java。我有两个`ArrayList`s，一个整数`0..9`和一个可能的操作字符串，目前，只是`+`和`-`。

我想编写一个将随机索引返回到 an 的方法`ArrayList`，因此我可以选择一个随机元素。我遇到的是我需要两种方法，一种用于每种类型`ArrayList`，即使代码是相同的。有没有一种方法可以做到这一点？

我现在用的：

```
Random randomGenerator = new Random();

  . . .

n = randomIndexInt(possibleOperands);
int op1 = possibleOperands.get(n);
n = randomIndexInt(possibleOperands);
int op2 = possibleOperands.get(n);
n = randomIndexStr(possibleOperations);
String operation = possibleOperations.get(n);

    . . .

int randomIndexInt(ArrayList<Integer> a){
    int n = randomGenerator.nextInt(a.size());
    return n;
}

int randomIndexStr(ArrayList<String> a){
    int n = randomGenerator.nextInt(a.size());
    return n;
} 
```

我想做的是崩溃`randomIndexInt`并`randomIndexStr`成为一个单一的方法。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-31T07:20:35.190

将您的方法声明为 `int randomIndexInt(ArrayList<?> a)`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-31T07:19:19.567

你只需要数组的大小对吗？这样做：

```
int randomIndex(int size){
    int n = randomGenerator.nextInt(size);
    return n;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-31T07:23:47.360

使用此代码，您可以传递任何类型的列表

```
int randomIndex(List<?> list){
    int n = randomGenerator.nextInt(list.size());
    return n;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-31T07:20:38.643

做吧：

```
private int randomIndex(int size){
return randomGenerator(size);
} 
```

然后打电话给他们`randomIndex(yourArray.size());`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-31T14:36:46.600

`List`比`ArrayList`在方法签名中使用更通用。

```
int your_method(List<?> a){
//your code
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-31T10:27:41.983

你可以使用`Generics`如下

如下声明您的功能

```
private <T> int randomIndex(ArrayList<T> a){
    int n = randomGenerator.nextInt(a.size());
    return n;
} 
```

现在你可以传递`ArrayList<String>`或传递`ArrayList<Integer>`给这个函数，而不会出现任何这样的问题

```
ArrayList<String> strList = new ArrayList<String>();
strList.add("on1");
System.out.println(randomIndex(strList));
ArrayList<Integer> intList = new ArrayList<Integer>();
intList.add(1);
System.out.println(randomIndex(intList)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-31T08:41:07.337

```
int randomIndex1(ArrayList<?> a)
{
   int n = randomGenerator.nextInt(a.size());
   return n;
}

int randomIndex2(int size)
{
   int n = randomGenerator.nextInt(size);
   return n;
} 
```

# unix - mysql bash_profile 密码被忽略

> ID：11734991
> 
> 赞同：0
> 
> 时间：2012-07-31T07:15:51.507
> 
> 标签：unix

我一直在寻找 unix bash 历史来为 mysql 密码提供** 。*例如：如果我发出 - mysql -uroot -psecuritydemon -h192.168.90.888

然后在unix提示符下，如果我使用历史| grep -i mysql -> 我也得到了密码条目。相反，我想查看历史 grep 结果，如下所示

mysql -uroot -p* *** * -h192.168.90.888

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:16:41.280

我认为不可能过滤在 bash 中写入您的历史记录的命令。但是，我建议您使用`~/.my.cnf`此处所述的配置文件：http: [//support.modwest.com/content/6/242/en/how-do-i-create-a-mycnf-mysql-preference-file。 .html](http://support.modwest.com/content/6/242/en/how-do-i-create-a-mycnf-mysql-preference-file.html) _ 并确保您将权限设置为，`go-rwx`以便其他人无法读取您的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:23:11.703

您的 bash 历史记录并不是最大的（或至少不是唯一的）问题：如果您以这种方式运行 sql，任何人都可以`ps ax`在会话打开时轻松查看您的密码！而是`mysql -uroot -p`在没有密码的情况下使用：然后 mysql 客户端将显示没有人可以嗅到的密码提示（除非他们站在你的肩膀上，或者在你的计算机上有 root 权限，或者同样无法预防的事情）。

# .net - WNS 通知多个客户端

> ID：11734998
> 
> 赞同：1
> 
> 时间：2012-07-31T07:16:10.190
> 
> 标签：.net, wcf, push-notification, windows-runtime

我正在为 winrt 应用程序开发用于平铺通知的 WCF 服务。

现在我正在使用 a`foreach`将通知真正的 WNS 发送给注册的客户端。这`foreach`我可以通过使用不同的线程来执行请求来更新。

我的追求：

有没有办法创建一个批处理，然后向 WNS 发送 1 个请求以通知所有注册客户端？还是有更好的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:18:36.413

我假设您的意思是当您将消息推送到 WNS 时，您在云/服务器应用程序上使用了 foreach？

我不相信有批处理机制。

当前模型似乎是每个通道一个调用，这意味着您需要注意 WNS 内部发生的任何限制机制。