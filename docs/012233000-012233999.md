# StackOverflow 问答 12233000-12233999

# vim - 如何在我的 .vimrc 文件中定义仅限 Windows 的 GVim 配置？

> ID：12233001
> 
> 赞同：3
> 
> 时间：2012-09-02T02:33:56.577
> 
> 标签：vim

我没有`.gvimrc`文件*（我不希望它是）*，我相信单个 .vimrc 文件。我使用`if has("gui_running")`方法来定义 GVim 配置。

我最近在 Windows 上安装了 GVim *（第一次安装在 Windows 上）*，我不喜欢默认字体。点击几下后，我发现`Lucida Console`size`10`看起来很漂亮。

但问题是我无法在文件中的任何位置定义字体配置（它应该在*`gui_running`*部分中）。即使在那个部分我无法在任何地方定义，我也需要一个仅限 Windows 的条件。那么，我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T03:59:28.253

除了`gui_running`你可以测试`has("gui_win32")`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T06:43:52.877

配置设置是“guifont”。

# c++ - 对友好 URL 的 POST 请求失败

> ID：12233004
> 
> 赞同：0
> 
> 时间：2012-09-02T02:34:05.983
> 
> 标签：c++, winapi, wininet

我正在尝试将 HTTP 请求发布到可通过友好 URL 地址访问的 HTML 表单。
但是当我发布它时，库返回错误代码“提供的错误 URL”。

```
HINTERNET hRequest = HttpOpenRequest(hConn, L"POST", L"newform",
                     NULL, L"http://www.example.com/add/newform/",
                     rgpszAcceptTypes, NULL, NULL);
DWORD error_code   = GetLastError();
bool hResult       = HttpSendRequestW(hRequest,NULL,NULL,NULL,NULL);
error_code         = GetLastError(); //12005 - bad URL provided 
```

我做错了什么，为什么我的请求失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T03:48:51.273

服务器名称（上述示例中的 www.site.com）必须在对 InternetConnect 的调用中指定，协议 (INTERNET_SERVICE_HTTP) 也必须指定。

在对 HttpOpenRequest 的调用中，您只需给出“对象”的名称，在本例中为“/add/newform/”。

例如（为了更清楚而添加）：

```
HINTERNET hConn = InternetConnect(hInternet, L"www.site.com", INTERNET_DEFAULT_HTTP_PORT,
    NULL, NULL, INTERNET_SERVICE_HTTP, 0, 0);
HINTERNET hRequest = HttpOpenRequest(hConn, L"POST", L"/add/newform", NULL, NULL,
    rgpszAcceptTypes, NULL, NULL); 
```

# java - 用不同的泛型实现接口？

> ID：12233005
> 
> 赞同：0
> 
> 时间：2012-09-02T02:34:19.320
> 
> 标签：java

是否可以为其泛型参数的多种选择实现一个接口？例如，如果我有一个接口

```
public interface MyInterface<T> {
    T doSomething(T);
} 
```

然后一个类为 T 的多种选择实现它？例如

```
public class MyClass implements MyInterface<SomeClass>, MyInterface<SomeOtherClass> {
    SomeClass doSomething(SomeClass T) {
        //here the implementation
    }

    SomeOtherClass doSomething(SomeOtherClass T) {
        //here the implementation
    }
} 
```

以上不起作用，那么在Java中应该如何正确完成呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T05:28:55.300

我认为没有办法让它工作，因为它不应该工作有很多充分的理由，但取决于你的用例到底是什么，可能有办法解决它。例如：

```
public class MyClass implements MyInterface<Object> {

    Object doSomething(Object T) {
        if (T instanceof SomeClass) {
            doSomethingSomeClass((SomeClass)T);
        } else if (T instanceof SomeOtherClass) {
            doSomethingSomeOtherClass((SomeOtherClass)T) {
        } else {
            // handle other objects - return null? throw exception?
        }
    }

    SomeClass doSomethingSomeClass(SomeClass T) {
        //here the implementation
    }

    SomeOtherClass doSomethingSomeOtherClass(SomeOtherClass T) {
        //here the implementation
    }
} 
```

请记住，您可以使用`<? super SomeClass>`或`<? extends SomeClass>`有时也可以帮助解决此类问题。

# android - 适用于 Android 的 Kik API

> ID：12233009
> 
> 赞同：0
> 
> 时间：2012-09-02T02:35:04.880
> 
> 标签：android

我找不到适用于 Android 的 KIK API。请问有人有链接分享吗？或者，如果他们不再提供，我想要一个说明原因的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T20:15:50.770

有点晚了，但这是你要找的吗？ [http://kik.com/dev/quickstart.php](http://kik.com/dev/quickstart.php)

# xpath - 使用 vb6 中的 xpath 在 youtube 提要响应中选择节点

> ID：12233011
> 
> 赞同：0
> 
> 时间：2012-09-02T02:35:35.327
> 
> 标签：xpath, vb6, youtube-api, msxml

对于此 xml 中的每个**条目**，我需要获取“标题”和第一个缩略图。这是 media:group 中的第一张图片

```
<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns='http://www.w3.org/2005/Atom' xmlns:media='http://search.yahoo.com/mrss/'>
<entry>
<title>Progression! 9 more pounds to goo!</title>
<media:group>
<media:thumbnail url='http://i.ytimg.com/vi/7MTjYXt3rLQ/default.jpg'/>
<media:thumbnail url='http://i.ytimg.com/vi/7MTjYXt3rLQ/mqdefault.jpg'/>
<media:thumbnail url='http://i.ytimg.com/vi/7MTjYXt3rLQ/hqdefault.jpg'/>
<media:thumbnail url='http://i.ytimg.com/vi/7MTjYXt3rLQ/1.jpg'/>
<media:thumbnail url='http://i.ytimg.com/vi/7MTjYXt3rLQ/2.jpg'/>
<media:thumbnail url='http://i.ytimg.com/vi/7MTjYXt3rLQ/3.jpg'/>
</media:group>
</entry>
<entry>
<title>Plank Variations Workout with Max Wettstein</title>
<media:group>
<media:thumbnail url='http://i.ytimg.com/vi/O1Nd8lZFGpc/default.jpg'/>
<media:thumbnail url='http://i.ytimg.com/vi/O1Nd8lZFGpc/mqdefault.jpg'/>
<media:thumbnail url='http://i.ytimg.com/vi/O1Nd8lZFGpc/hqdefault.jpg'/>
<media:thumbnail url='http://i.ytimg.com/vi/O1Nd8lZFGpc/1.jpg'/>
<media:thumbnail url='http://i.ytimg.com/vi/O1Nd8lZFGpc/2.jpg'/>
<media:thumbnail url='http://i.ytimg.com/vi/O1Nd8lZFGpc/3.jpg'/>
</media:group>
</entry>
</feed> 
```

这是我的代码

```
 Dim xmlDoc As MSXML2.DOMDocument30
    Dim xmlEntryNode As MSXML2.IXMLDOMNode
    Dim xmlEntryNodes As IXMLDOMNodeList
    Dim xmlC1Nodes As IXMLDOMNodeList
    Dim ns As String
    Set xmlDoc = New DOMDocument30
    ns = txtNS.Text
    xmlDoc.setProperty "SelectionLanguage", "XPath"
    xmlDoc.setProperty "SelectionNamespaces", ns

    If xmlDoc.loadXML(txtXml.Text) = False Then
        appendText "xml document load failed"
        Exit Sub
    End If
    Set xmlEntryNodes = xmlDoc.documentElement.selectNodes(/x:feed/x:entry)
    Dim i As Integer
    For i = 0 To xmlEntryNodes.length - 1
        Set xmlEntryNode = xmlEntryNodes(i)
        appendText xmlEntryNode.Text
        Set xmlC1Nodes = xmlDoc.selectNodes(//media:group/media:thumbnail[1]/@url)
        If xmlC1Nodes.length > 0 Then
            Dim j As Integer
            For j = 0 To xmlC1Nodes.length - 1
                appendText xmlC1Nodes(j).Text
            Next
        End If
    Next

    Exit Sub 
```

这是我的输出

```
Progression! 9 more pounds to goo!  
http://i.ytimg.com/vi/7MTjYXt3rLQ/default.jpg   
http://i.ytimg.com/vi/O1Nd8lZFGpc/default.jpg    Plank Variations
Workout with Max Wettstein  
http://i.ytimg.com/vi/7MTjYXt3rLQ/default.jpg   
http://i.ytimg.com/vi/O1Nd8lZFGpc/default.jpg 
```

谁能帮我调整一下，让它为每个**条目只返回一个图像**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T02:46:39.277

我不精通 VB6，但从 XPath 的角度来看，我会选择相对于你已经得到的 xmlEntryNode：

```
Set xmlC1Nodes = xmlEntryNode.selectNodes("media:group/media:thumbnail[1]/@url") 
```

（我不明白为什么您的 XPath 表达式不在引号中……但您说它会产生输出……）

或者如果 selectNodes() 方法只适用于 XML 文档，那么

```
Set xmlC1Nodes = xmlDoc.selectNodes(
        "/*/x:entry[" + i + "]/media:group/media:thumbnail[1]/@url") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T17:51:07.577

> 谁能帮我调整一下，让它为每个条目只返回一个图像

**使用这样的东西**（多年来没有使用过 MSXML 或 VB）：

```
Set urlAttrib = xmlEntryNode.SelectSingleNode("media:group/media:thumbnail[1]/@url")

wantedText = urlAttrib.nodeValue 
```

# php - 上传脚本的问题

> ID：12233015
> 
> 赞同：0
> 
> 时间：2012-09-02T02:35:57.993
> 
> 标签：php

我在网上找到了这个脚本，试图对其进行一些更改，但现在它不起作用，我只添加了 2 行和它看起来的文件夹。

这是脚本：

```
<?PHP
/*
Silentum Uploader v1.6
Modified July 8, 2012
uploader.php copyright 2005-2012 HyperSilence
*/

// Begin options

$file_extensions = array(".mp3"); // Add or delete the file extensions you want to allow Sample: (".mp3", ".gif", ".htm", ".html", ".jpg", ".png", ".txt")
$file_extensions_list = ".mp3"; // Type the same as above, without the quotation marks Sample: ".doc, .gif, .htm, .html, .jpg, .png, .txt"
$max_length = 30; // The maximum character length for a file name
$maximum_file_size = 10000000; // In bytes
$upload_log_file = "upload_log.txt"; // The log file you want to use

// End options
// If you're using a different folder name for uploaded files other than "files", change both occurrences of "files" on lines 27 and 28 below

$folder_directory = "http://".$_SERVER["HTTP_HOST"].dirname($_SERVER["PHP_SELF"]);
$message = "";
$set_chmod = 0;
$site_uri = "http://".$_SERVER["HTTP_HOST"].$_SERVER["PHP_SELF"];
$upload_directory = "/uploads";
$upload_uri = $folder_directory."/uploads/";

$folder_name_length = strlen($upload_directory);

if($_FILES["userfile"]) {
$resource = fopen($upload_log_file,"a");
fwrite($resource,date("F d, Y / h:i:sa")." - ".$_FILES["userfile"]["name"]." "
.$_FILES["userfile"]["type"]." uploaded by ".$_SERVER["REMOTE_ADDR"]."\n");
fclose($resource);

$file_type = $_FILES["userfile"]["type"]; 
$file_name = $_FILES["userfile"]["name"];
$file_ext = strtolower(substr($file_name,strrpos($file_name,".")));
@chmod($upload_uri."".$file_name, 0755);
if($_FILES["userfile"]["size"] > $maximum_file_size) {
$message = "ERROR: File size cannot be over ".$maximum_file_size." bytes.";
}

elseif($file_name == "") $message = "ERROR: Please select a file to upload.";
elseif(file_exists($upload_directory.$file_name)) $message = "ERROR: A file with that name already exists.";
elseif(strlen($file_name) > $max_length) $message = "ERROR: The maximum length for a file name is ".$max_length." characters.";
elseif(!preg_match("/^[A-Z0-9_.\- ]+$/i",$file_name)) $message = "ERROR: Your file name contains invalid characters.";
elseif(!in_array($file_ext, $file_extensions)) $message = "ERROR: <u>$file_ext</u> is not an allowed file extension.";
else $message = upload_file($upload_directory, $upload_uri);
header("Location: $site_uri?message={$message}");
}

elseif(!$_FILES["userfile"]);
else $message = "ERROR: Invalid file specified.";

$open = opendir($upload_directory);
$uploaded_files = "";
while($file = readdir($open)) {
if(!is_dir($file) && !is_link($file)) {
$uploaded_files .= "        <tr>
            <td style=\"background: #fff; color: #000; text-align: left\"><a href=\"$upload_directory$file\" title=\"$file (".filesize($upload_directory.$file)." bytes)\">".$file."</a> (".filesize($upload_directory.$file)." bytes)</td>
        </tr>
        <tr>
            <td style=\"background: #eee; color: #000; text-align: left; text-indent: 20px\">Uploaded <b>".date("F d, Y / h:ia", filemtime($upload_directory.$file))."</b></td>";
$uploaded_files .="
        </tr>
";
}
}

function upload_file($upload_directory, $upload_uri) {
$mp3_name=substr($file_name,0,-4);
$mp3 = md5($mp3_name.rand().mktime()).".mp3";
$file_name = $mp3;
//$file_name = md5($_FILES["userfile"]["name"].rand()).".mp3";
//$file_name = str_replace(" ","_",$file_name);
$file_path = $upload_directory.$file_name;
$temporary = $_FILES["userfile"]["tmp_name"];

$result = move_uploaded_file($temporary, $file_path);
if(!chmod($file_path,0777))
$message = "ERROR: A folder to place the files was not found, or the files need to be CHMODed to 777.";
else $message = ($result)?"File has been uploaded." : "An error has occurred.";
return $message;
}
?> 
```

我添加的部分是这样的：

```
$mp3_name=substr($file_name,0,-4);
$mp3 = md5($mp3_name.rand().mktime()).".mp3"; 
```

这不应该弄乱脚本，我只是想让它更安全。

我得到的错误是：

> 错误：找不到放置文件的文件夹，或者文件需要 CHMOD 到 777。我确实将文件夹更改为 0777，但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T03:04:21.780

我建议在[chmod()](http://php.net/chmod)之前对变量进行[回](http://php.net/echo)显。我有一种感觉，它并没有指向你认为的路径。`$file_path`

我在您添加的行中看到的一个错误是您引用`$file_name`了函数内部的变量`upload_file`。问题是该函数内部不存在变量，因此没有设置它。

# python - Django 中的 URL 请求

> ID：12233016
> 
> 赞同：0
> 
> 时间：2012-09-02T02:36:15.200
> 
> 标签：python, django, django-urls

我记得，默认情况下，对与 URL 模式不匹配且不以斜杠结尾的 URL 的任何请求都将被重定向到带有尾部斜杠的相同 URL。但我遇到了一个问题。

我项目中的 URLConf：

```
#in urls.py file
urlpatterns = patterns('',
    url(r'^admin/', include(admin.site.urls)),
    url(r'^cms/', include('cms.urls'))
)

#in the cms/ulrs.py
urlpatterns = patterns('cms.views',
    url(r'^category/(?P<slug>[-\w]+)/$', 'category', name="cms-category"),
    url(r'^search/$', 'search', { 'template' : 'cms/story_list.html'}, name="cms- search"),
) 
```

如果我输入： 127.0.0.1:8080/cms/search/ 工作。但是如果我输入 127.0.0.1:8080/cms/search ，就会出现 404。

我只是想知道为什么会出现这个问题？谁能给我一些提示？谢谢你 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T10:23:55.050

解决此问题的最简单方法是按照 John Wang 的建议检查 settings.py 文件中 APPEND_SLASH 的值。这仅在安装了 CommonMiddleware 时才有效。 [https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-APPEND_SLASH](https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-APPEND_SLASH)

或者，您可以在 URL 模式的末尾添加一个问号，以使斜杠成为可选的。

```
url(r'^search/?$', 'search', { 'template' : 'cms/story_list.html'}, name="cms- search"), 
```

这样 '127.0.0.1:8080/cms/search/' 和 '127.0.0.1:8080/cms/search' 都可以工作。

这很有帮助，因为即使我们只链接到一种格式，我们也知道人们可能会通过手动输入 URL 或通过从外部来源链接来访问这两种格式。但这些被搜索引擎视为两个不同的 URL。

这可以通过在 URL 模式中执行以下操作来解决：

```
url(r'^search$', redirect_to, {'url':'/search/'}),
url(r'^search/?$', 'search', { 'template' : 'cms/story_list.html'}, name="cms- search"), 
```

# actionscript-3 - 嵌入式 .swf 动画不会在 stop() 调用时停止？

> ID：12233017
> 
> 赞同：3
> 
> 时间：2012-09-02T02:36:23.847
> 
> 标签：actionscript-3, flash, actionscript

我有一个在 Flash Professional 中创建的 .swf 动画。为了在我的 actionscript 项目中使用它，我将它嵌入如下：

```
[Embed(source="../lib/fetching.swf")]
public var Fetching:Class; 
```

然后我创建一个实例并将其添加到阶段，如下所示：

```
//class variable
var mc:MovieClip;

mc = new Fetching();
this.addChild(mc); 
```

这会导致我的动画出现在屏幕上并无限循环。但是，调用 时`mc.stop()`，动画不会停止。我尝试通过调用从舞台上删除影片剪辑，`removeChild(mc)`但在 ENTER_FRAME 事件上添加一个侦听器告诉我，影片剪辑仍在一遍又一遍地播放。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T03:13:52.380

您应该设置一个嵌入源 mimeType，然后转换为 ByteArray。并加载。因为您不能将类型转换获取类定向到 MovieClip。如果您明确定义 mimeType 并强制转换，您将了解`TypeError #1034: Type Coercion failed: cannot convert YourProject_Fetching@108b780d1 to flash.display.MovieClip`

参考以下代码。

```
package
{
    import flash.display.Loader;
    import flash.display.MovieClip;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.utils.ByteArray;

    public class TestProject extends Sprite
    {
        [Embed(source="../lib/fetching.swf", mimeType="application/octet-stream")]
        public var Fetching:Class;

        public var loader:Loader = new Loader();

        private var mc:MovieClip;

        public function TestProject()
        {
            loader.loadBytes( new Fetching() as ByteArray );
            loader.contentLoaderInfo.addEventListener(Event.INIT, onSwfLoaded);
            this.addChild(loader);
        }

        private function onSwfLoaded(e:Event):void 
        {
            mc = loader.content as MovieClip;
            mc.stop();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T10:59:09.353

您是否检查过嵌入式剪辑是为 AVM2 编译的（即它针对的是 AS3 而不是 AS1 或 AS2）？Avm1 swf 可以转换为 MovieClip 而不会引发错误，但不会响应命令。

# ruby - 重新排列元素

> ID：12233018
> 
> 赞同：0
> 
> 时间：2012-09-02T02:37:07.570
> 
> 标签：ruby, arrays

通过引用它们的索引来重新排列数组元素的最简单方法是什么？像这样的东西：

```
[:a, :b, :c, :d].rearrange(3, 1, 0, 2) # => [:d, :b, :a, :c]
[:a, :b, :c, :d].rearrange!(3, 1, 0, 2) # => [:d, :b, :a, :c] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T13:24:14.497

好吧，Ruby 已经有了这个方法，只是它被称为[values_at](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-values_at)：

```
>> [:a, :b, :c, :d].values_at(3, 1, 0, 2)
=> [:d, :b, :a, :c] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T02:51:56.537

我会转一下。单个排列只是一个将 Array 映射到另一个 Array 的函数，所以这看起来很自然：

```
a = [:a, :b, :c, :d]
permuted = [3, 1, 0, 2].map { |i| a[i] } 
```

如有必要，很容易将猴子修补到 Array 中：

```
class Array
    def permute(*p)
        p.map { |i| self[i] }
    end
end 
```

错误检查、`permute!`和更多细节留作练习。

# c# - 数据库不会存储在选定的文件夹中

> ID：12233019
> 
> 赞同：0
> 
> 时间：2012-09-02T02:37:27.340
> 
> 标签：c#, database, sql-server-ce, datadirectory

我正在尝试将我的**数据库文件**保存到*特定文件夹*。我正在使用以下代码来尝试这样做：

```
 dpath = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData);

            AppDomain.CurrentDomain.SetData("DataDirectory", dpath);
            newConnectString = "Data Source=" + dpath + "\\" + filename;

            Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
            config.ConnectionStrings.ConnectionStrings[ConnectStringName].ConnectionString = newConnectString;
            config.Save(ConfigurationSaveMode.Modified, true);
            ConfigurationManager.RefreshSection("connectionStrings"); 
```

当程序运行时，新文件永远不会在目标文件夹中创建。它仍然将它与*可执行文件*一起存储。关于我可能做错了什么的任何见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T08:14:09.683

您当前的代码仅更改您的配置文件，您还需要将数据库文件 File.Copy 到所需的 forlder，或将 SqlCeEngine.CreateDatabase 与新的连接字符串一起使用。

# python - python重复错误

> ID：12233023
> 
> 赞同：-3
> 
> 时间：2012-09-02T02:38:59.430
> 
> 标签：python, repeat

我正在编写一个读取三行输入的程序。第一行将是一个单词，然后是要重复的多个字符，然后是重复的多个字符。但不幸的是，我无法做到这一点，任何人都可以通过查看我的代码来指导我。谢谢

```
word = raw_input("Enter the word: ")
length = int(raw_input("Enter the repeat length: "))
count = int(raw_input("Enter the repeat count: "))
print word.repeat() * count
I want this sort of output:
Enter the word: banana
Enter the repeat length: 2
Enter the repeat count: 3
banananana 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T02:43:07.363

恐怕你做错了什么。
我想你得到了以下错误：

`AttributeError: 'str' object has no attribute 'repeat'`

由于Python中没有`repeat()`for 的方法。`str`

我猜你可能想要这个：

```
# gives the first `length` characters in `string` to repeat for `count` times
word[:length] * count 
```

**编辑：**

我明白了.. 你的编辑似乎说你想重复**最后** `length`一个`word`..

然后尝试`word + word[-length:] * (count - 1)`

# algorithm - 在无向图中查找所有节点之间的所有简单路径的最省时方法

> ID：12233024
> 
> 赞同：1
> 
> 时间：2012-09-02T02:39:00.193
> 
> 标签：algorithm, graph, graph-theory, graph-algorithm

为了扩展标题，我需要一个非常大的无向图中所有节点之间的**所有**简单（非循环）路径。

我能想到的最明显的优化是，一旦我计算了一对特定节点之间的所有路径，我就可以将它们全部反转，而不是在我需要走另一条路时重新计算。

我正在研究传递闭包和 Floyd-Warshall 算法，但如果我沿着这条路线走，我能做的最好的事情就是只找到所有节点之间的最短路径。

有任何想法吗？现在我正在考虑在图中的每个节点上运行一个 DFS，在我看来这显然不是最佳的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T11:58:28.000

我不明白您认为 DFS 远不如最优的想法背后的原因。事实上，DFS 在这里显然是最优的。

如果您遍历图，仅将分支限制为到目前为止尚未在此分支中访问过的顶点，则 DFS 树中的节点总数将等于从起始顶点到所有其他顶点的简单路径数顶点。由于所有这些路径都是输出的一部分，因此无法对算法进行有意义的改进，因为您无法将复杂性降低到输出大小以下。

根本没有办法在多项式时间内输出阶乘数据，无论问题是什么或您使用的是什么算法。

# c# - 如何为 Visual C# 2010 Express 启用智能感知 [自动完成框]

> ID：12233032
> 
> 赞同：1
> 
> 时间：2012-09-02T02:41:26.733
> 
> 标签：c#, settings, intellisense

我安装并重新安装了新版本的**Microsoft Visual C# 2010 Express**

当我像 System. *点*那个智能感知框应该会弹出结果，我可以从中选择以使其更容易编码。

但是无论我输入什么，该框都不会弹出。我阅读了谷歌的所有解决方案，这里没有任何效果是我的设置图片。

工具 -> 选项 -> 文本编辑器 -> 所有语言 ![所有语言](../Images/c40d9e86642e95255f7873df284a4e31.png) 工具 -> 选项 -> 文本编辑器 -> C# ![所有语言 C#](../Images/3fd2610fdb90811b5eceac42a50c1e52.png) 工具 -> 选项 -> 文本编辑器 -> C# -> IntelliSense ![智能感知 C#](../Images/c65f820fa9db59eb88106b95caabf49f.png) 这是我进行重置的方式.. 没有改变任何事物。 ![chsarp 重置](../Images/b7b7e2613b6ca2582ca97c754aa94020.png) ![变灰](../Images/3204af7667c20df93d4acc12556d08ea.png) 我还有什么需要做的吗？

# python - 使用版本控制的 Django 缓存失效

> ID：12233038
> 
> 赞同：2
> 
> 时间：2012-09-02T02:44:00.167
> 
> 标签：python, django, caching

我有一个模板片段缓存，例如：

```
{% cache 3600 my_list request.path %}
... some html
{% endcache %} 
```

request.path 可以采用以下形式：

*   名单/2012-01-01
*   名单/2012-02-01
*   ...

到目前为止，我已经搜索并阅读了它以使名为“my_list”的所有内容无效我可以使用版本控制并使用 增加版本`cache.incr_version`，但它接受一个我不知道的密钥，因为无法预测用户的 URL正在访问。

基本上这些 url 只是列出了一些模型，当添加一个新模型时，我想使缓存无效，以便它反映新添加的记录。但是我不能打电话`.delete`或者`.incr_version`因为我不知道完整的密钥。

# python - 谷歌应用引擎 yaml index.html

> ID：12233040
> 
> 赞同：3
> 
> 时间：2012-09-02T02:44:55.980
> 
> 标签：python, google-app-engine

我想要对任何以“/”结尾的 url 的获取请求，例如[http://website.com/some_dir/](http://website.com/some_dir/)以接收该目录中的 index.html 文件......在我的示例中，它应该接收[http://website.com /some_dir/index.html](http://website.com/some_dir/index.html) 。

我让它在本地与 GAE 启动器/本地服务器一起工作......但是当我部署它并通过 website.appspot.com 访问它时它失败了......我收到错误：

> 错误：未找到
> 
> 在此服务器上找不到请求的 URL /some_dir/。

这就是我的 yaml 中的内容：

```
- url: /
  static_files: staticLocation/index.html
  upload: staticLocation/index.html
- url: (.+)/
  static_files: staticLocation/\1/index.html
  upload: staticLocation
- url: /
  static_dir: staticLocation 
```

我很好奇它如何/为什么在本地工作得很好，但在 apppot 上却没有......想法，以及如何解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-17T09:31:15.770

我已经确认了你的问题。在本地工作，但不在 apppot 上工作。要解决您的问题更改：

```
- url: (.+)/
  static_files: staticLocation/\1/index.html 
```

至

```
- url: (.*)/
  static_files: staticLocation\1/index.html` 
```

它应该可以正常工作。（注意：`+`已更改为`*`in`url`并且 a`/`已删除 in `static_files`）

为了满足您的好奇心，您正在匹配前导`/`，因此文件系统位置查找`staticlocation//some_dir/index.html`在您的文件系统上运行良好，因为它`//`会折叠到`/`您的操作系统中。我认为 apppot 的路径查找不会折叠`//`导致无法找到您的 index.html 文件。

哦，顺便说一句，像我提到的那样修复第二条规则将使您根本不需要第一条规则，以便可以删除该规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T13:51:14.533

您的第二条路线的“上传”行不够详细，因此其中的文件不会部署到 appengine。你想要这样的东西：

```
- url: (.+)/
  static_files: staticLocation/\1/index.html
  upload: staticLocation/(.*)

- url: /(.+)
  static_files: staticLocation/\1/index.html
  upload: staticLocation/(.+)/index.html 
```

（您的最后一条路线与第一条路线具有相同的 url，因此它永远不会被击中并且可以被删除。）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-02T04:44:22.617

AppEngine 生产服务器是区分大小写的文件系统，请检查两个大小写是否匹配。

# django - 在 Django Admin 中删除会引发 403 错误

> ID：12233045
> 
> 赞同：0
> 
> 时间：2012-09-02T02:46:05.457
> 
> 标签：django, django-admin, http-status-code-403

我正在尝试从 Django 管理界面中删除一条记录。我单击复选框，然后从操作下拉列表中选择“删除选定项”并选择“开始”。这会立即引发 403 错误。

这是我试图从中删除 403 的区域：

![删除区域失败](../Images/b91ceae2392a7ce50614dd59bcb820c2.png)

删除问题的模型有两个内联元素。但是，如果我转到每个单独的记录并从那里选择删除，将允许我删除。

它从这里开始工作（点击上图中的“第三”后）

![工作删除区](../Images/33d52e8277bf3a8761101bd7fa8fd60b.png)

我在 Firebug 中查看了请求，它似乎与我删除不同模型上的记录并没有什么不同，它可以工作。

这是 Firebug 的输出：

```
Parameters                   application/x-www-form-urlencoded
    _selected_action         2
    action                   delete_selected
    csrfmiddlewaretoken      lr6EAAPGJWJBWIm6NxIoyt8fWzfuNxj9
    index                    0
    select_across            0

Source
csrfmiddlewaretoken=lr6EAAPGJWJBWIm6NxIoyt8fWzfuNxj9&action=delete_selected&select_across=0&index=0&_selected_action=2 
```

我不确定去哪里解决这个错误，因为我根本没有修改管理面板，日志中唯一的内容是 403 错误。如何让模型级别的删除工作？

**编辑**我有这个模型的删除权限。如果删除的用户是超级用户，也会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:01:31.143

我无法以我想要的方式解决这个问题。我本来希望保留从概览页面中删除的功能，但是因为如果我一次删除一个单独的条目，它会起作用，所以我决定解决这个问题。

添加`actions = None`到包含此模型的 admin.py。这将删除操作下拉菜单，防止用户选择会引发 403 错误的选项。

# django - Django：在还原（迁移）后尝试访问数据库时权限被拒绝

> ID：12233046
> 
> 赞同：39
> 
> 时间：2012-09-02T02:46:07.400
> 
> 标签：django, postgresql

我在本地开发服务器中有一个 django 1.4 应用程序，其中包含一个填充的 postgres 9.1 数据库。成功部署后，我想将数据从本地移动到在线数据库，所以我使用了：

```
pg_dump -f dump.sql -Ox database 
```

然后在服务器上恢复：

```
psql -1 -f dump.sql database 
```

现在尝试在线登录网站管理员会引发“关系 django_session 的权限被拒绝”异常。我尝试使用/不使用 -Ox 开关及其所有组合转储数据，但没有成功。我还删除了数据库，并在服务器上使用 settings.py 中设置的正确所有者从头开始重新创建它。

如果我在没有恢复的情况下运行正常的 syndb，那么一切正常。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-09-02T14:04:17.860

事实证明，您应该在还原后将数据库中所有对象的显式所有权授予所有者。所有者不是超级用户。仅在数据库创建时设置所有者是不够的。迁移的最终解决方案如下：

在客户端：

```
pg_dump -f dump.sql -Ox database 
```

在服务器上：

```
su postgres    
dropdb database
createdb database -O user
psql database -f dump.sql 
```

然后设置权限：

```
psql database -c "GRANT ALL ON ALL TABLES IN SCHEMA public to user;"
psql database -c "GRANT ALL ON ALL SEQUENCES IN SCHEMA public to user;"
psql database -c "GRANT ALL ON ALL FUNCTIONS IN SCHEMA public to user;" 
```

请注意，我们可以在 psql 控制台中运行 sql 命令，但这种形式很容易嵌入到脚本等中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T02:48:58.303

尝试从`postgres`用户执行此操作：

```
sudo su - postgres
pg_dump -f dump.sql -Ox database 
```

或者只是传递`-U`标志：

```
pg_dump -f dump.sql -Ox database -U postgres 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-07T23:17:21.263

这是我修复我的方法。通过简单地更改用户以匹配将发生导入的目标服务器的当前登录用户，我为自己省去了很多麻烦。

在我的例子中，导入的 db 有一个用户 x（x 也是运行它的机器的用户名），目标机器的用户名是 y，postgres 用户也是 y。

因此，我只是在我的 Django 设置中更改了数据库用户和密码，以匹配目标机器的 y 用户详细信息。

然后这样做：

`$ sudo -u postgres psql psql > GRANT ALL PRIVILEGES DATABASE ON mydb TO y;`

现在喝一些kool-aid！

# android - Android SQLite 数据库选择大值行失败，抛出 IllegalStateException

> ID：12233049
> 
> 赞同：2
> 
> 时间：2012-09-02T02:47:29.147
> 
> 标签：android, sqlite

我创建了下面的类，用于将数据保存到 SQLite 数据库。如您所见，它只是一个键/值映射。KEY 是 TEXT 字段，VALUE 是 BLOB。

它完美地工作，除了在一种情况下：我使用“添加”来添加一个长度约为 2,500,000 个字符的字符串。事实上，它是一个 JSON 编码的字符串（我也尝试过应用 javascript 样式的 encodeURIComponent，以确保没有非法字符干扰）。

在这种情况下，值被成功添加（没有抛出错误，add() 返回 true）。但是，当我之后立即调用 get(key) 时，从 cursor.getString(0) 中抛出 IllegalStateException。

具体来说：

```
"Couldn't read row 0, col 0 from CursorWindow.  Make sure the Cursor is initialized correctly before accessing data from it." (id=830026207728) 
```

我检查了游标对象，没有发现任何问题（mCount==1、mColumns==String[1] 等）。

```
class DatabaseHandler extends SQLiteOpenHelper {

    // All Static variables
    // Database Version
    private static final int DATABASE_VERSION = 2;

    // Contacts Table Columns names
    private static final String KEY_KEY = "key";
    private static final String KEY_VAL = "value";

    public DatabaseHandler(Context context) {
        super(context, Defines.DATA_PREFIX, null, DATABASE_VERSION);
    }

    public String getTableName() {
        return "storage";
    }

    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db) {
        String q = "CREATE TABLE " + this.getTableName() + "(" + KEY_KEY + " TEXT PRIMARY KEY," + KEY_VAL + " BLOB" + ")";
        db.execSQL(q);
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + this.getTableName());

        // Create tables again
        onCreate(db);
    }

    boolean add(String key, String value) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_KEY, key); // Contact Name
        values.put(KEY_VAL, value); // Contact Phone

        // Inserting Row
        long res = db.insertOrThrow(this.getTableName(), null, values);
        db.close(); // Closing database connection
        return res >= 0;
    }

    String get(String key) {
        SQLiteDatabase db = this.getReadableDatabase();

        Cursor cursor = db.query(this.getTableName(), new String[] { KEY_VAL }, KEY_KEY + "=?", new String[] { key }, null, null, null, null);
        if (cursor != null)
            cursor.moveToFirst();

        if(cursor == null)
            return null;

        String ret = null;
        try {
            ret = cursor.getString(0);
        } catch(CursorIndexOutOfBoundsException e) {
            ret = null;
        } catch(IllegalStateException e) {
            ret = null;
        }
        cursor.close();
        return ret;
    }

    int count(String key) {
        String countQuery = "SELECT  * FROM " + this.getTableName()+" WHERE "+KEY_KEY+" = ?";
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(countQuery, new String[] { key });
        int ret = cursor.getCount();;
        cursor.close();

        // return count
        return ret;
    }

    void delete(String key) {
        SQLiteDatabase db = this.getWritableDatabase();
        db.delete(this.getTableName(), KEY_KEY + " = ?", new String[] { key });
        db.close();
    }

    int update(String key, String value)
    {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_KEY, key);
        values.put(KEY_VAL, value);

        // updating row
        return db.update(this.getTableName(), values, KEY_KEY + " = ?", new String[] { key });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T03:00:39.240

经过进一步调查，控制台窗口告诉我“光标窗口”已满，例如空间不足。看到这个线程：[Android：光标窗口已满](https://stackoverflow.com/questions/11863024/android-cursor-window-is-full)

我的解决方案是“分块”数据。例如，“add”函数检测字符串是否大于固定长度，在这种情况下，它为字符串存储多个条目（使用许多行）。然后“get”函数检测到这一点并重新组装这些块。

# python - Python多线程，如何使用多个核心？

> ID：12233057
> 
> 赞同：1
> 
> 时间：2012-09-02T02:48:58.813
> 
> 标签：python, multithreading

我在 Intel(R) Core(TM)2 Duo CPU E7500 @ 2.93GHz 中运行多线程应用程序 (Python2.7.3)。我以为它只使用一个核心，但使用“top”命令我看到python进程不断改变核心编号。在 top 命令中启用“SHOW THREADS”会显示在不同内核上工作的不同线程进程。

谁能解释一下？我从理论上知道多线程是在单核上执行的，这让我很困扰。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T03:01:32.407

首先，多线程意味着*相反*，即同时使用多个内核（通过线程）。在这方面，CPython 确实被削弱了，尽管每当你调用 C 代码（这包括标准库的部分，但也包括 Numpy 之类的扩展模块）时，阻止 Python 代码并发执行的锁可能会被解锁。您仍然可以拥有多个线程，它们只是不会同时解释 Python（相反，它们会非常频繁地轮流）。您还谈到“Python*进程*”——您是否混淆了术语，或者这个“多线程”Python 应用程序实际上是[多处理](http://docs.python.org/py3k/library/multiprocessing.html)？*当然，*多个 Python 进程可以同时运行。

但是，从您的措辞中，我怀疑另一个混淆来源。即使是单个线程也可以在多个内核上运行……只是不能同时运行。哪个线程在哪个 CPU 上运行取决于操作系统，并且操作系统调度程序不一定将线程重新分配给它在挂起之前曾经运行过的同一 CPU（这是有益的，正如 David Schwartz 在评论，但不重要）。也就是说，单个线程/进程从 CPU 跳转到 CPU 是完全正常的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-02T02:56:25.993

线程旨在利用可用的多个内核。如果您只有一个核心，它们也将在一个核心上运行。:-)

没有什么可担心的，您观察到的是“按预期工作”。

# python - 在 Python 中，如何将 super 用于类属性？

> ID：12233058
> 
> 赞同：1
> 
> 时间：2012-09-02T02:49:01.013
> 
> 标签：python

考虑这两个类：

```
class A(object):
    name = "A"

class B(A):
    name = "Child of " + A.name 
```

简单的。`A.name`将是“A”，`B.name`将是“A 的孩子”。

但是将. 的定义硬编码`A.name`到. 我自然想写这样的东西：`B``name`

```
class B(A):
    name = "Child of " + super(B).name 
```

但这引发了`NameError`尚未`B`在表达式中定义的a `super(B)`。（另外，我不确定它是否应该/将是`super(B)`或`super(B, B)`其他什么，但鉴于`NameError`.)

这样做的正确方法是什么，即`super`在类属性的定义中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T03:01:45.170

它不能在类定义中完成，原因是您发现：在类定义中，您无权访问类本身，因为它尚未定义。

不过，您可以使用类装饰器来做到这一点（如果您使用的是带有类装饰器的 Python 版本，我认为它是 2.6 及更高版本）：

```
>>> class A(object):
...     name = "A"
>>> def makeAttr(cls):
...     cls.name = "Child of " + super(cls, cls).name
...     return cls
>>> @makeAttr
... class B(A):
...     name = "B"
>>> B.name
'Child of A' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T02:50:12.120

你不能。如果必须这样做，则需要在 B 的主体中显式使用 A。

# c - 任何有经验的 DWARF 解析器/用户？需要获取一个DIE的属性类型偏移量

> ID：12233061
> 
> 赞同：2
> 
> 时间：2012-09-02T02:50:11.653
> 
> 标签：c, debugging, elf, dwarf

所以我正在尝试使用 libdwarf 解析程序的 DWARF 文件（为此我必须坚持使用 C），我正在尝试从每个 DIE 中专门获取 DW_AT_type 标记。它们中的大多数（我不确定是否全部）都是偏移量，我试图找到任何有用的函数来获取这些标签的值。

例子：

<2><286>
DW_AT_type <156>

我在这里想要的是该特定 DIE 的 type 属性的 156 偏移值。

你们知道API是否提供了任何功能来做到这一点？

注意：我必须坚持使用 C，所以请不要推荐任何 python 库或解析 dwarfdumped 文件。我只是在寻找一个特定的功能，但最近几天一直在尝试，但在文档中找不到任何功能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T01:57:16.407

如您所见， DW_AT_type 是对另一个 DIE 的引用。

libdwarf 提供了各种名为 dwarf_form* 的函数来将属性原始值转换为有意义的类型。在您的情况下，您正在寻找 dwarf_global_formref 函数。

由于 dwarf 中的引用被定义为从调试信息开始到您正在寻找的 DIE 的偏移量，因此使用 found 的引用调用 dwarf_offdie_b。

没有错误检查的示例代码：

```
// Dwarf_Debug dbg, Dwarf_Die die already initialized
Dwarf_Attribute attr;
Dwarf_Off offset;
Dwarf_Die typedie;
dwarf_attr(die,DW_AT_type,&attr,NULL);
dwarf_global_formref(attr,&offset,NULL);
dwarf_offdie_b(dbg,offset,1,&typedie,NULL); 
```

请务必查看手册以了解每个参数的确切含义。

# javascript - 无法通过 javascript 单击呈现的输出

> ID：12233064
> 
> 赞同：0
> 
> 时间：2012-09-02T02:50:36.270
> 
> 标签：javascript, ajax, jquery

我有一个表，它在它的行的点击事件上运行一个函数。它工作得非常好，但是当通过 AJAX 将 tr 添加到该表时，我无法触发该行的点击事件，或者我们可以说点击事件没有触发该行，除了其他行仍然能够触发点击事件.

```
$('div.dashboard-content table.list tbody tr').click(function(){
var id = $(this).attr('id');
$('div.dashboard-content table.list tr td').css({'background': '#ffffff','font-weight':'normal'});
$('div.dashboard-content table.list thead td').css({'background': '#EFEFEF','font-weight':'bold'});
$('tr[id='+ id + '] td').css({'background': 'lightblue','font-weight':'bolder'});
$.get(
        'index.php?route=sale/order/infoforhome&token=<?php echo $token; ?>', 
        { 'order_id' : id }, 
        function(data){
            if(data)
            {
                $('#oder_detail').html
                ('<table>' +
                    '<tbody>' + 
                        '<tr>'+
                            '<td style="font-weight:bold;">' +
                                '<?php echo $column_orderid; ?>:'+
                             '</td>'+
                             '<td>' + 
                             data['orderid'] + 
                             '</td>'+
                         '</tr>' + 
                         '<tr>'+
                            '<td style="font-weight:bold;">'+
                            '<?php echo $column_customername; ?>:'+
                            '</td>'+
                            '<td>'+ 
                            data['name']  +
                            '</td>'+
                         '</tr>'+
                         '<tr>'+
                            '<td style="font-weight:bold;">'+
                            '<?php echo $column_shippingaddress; ?>: '+
                            '</td>'+
                            '<td>'+ 
                            data['address'] +
                            '</td>'+
                         '</tr>'+
                         '<tr>'+
                            '<td style="font-weight:bold;">'+
                            '<?php echo $column_telephone; ?>:'+
                            '</td>'+
                            '<td>'+ 
                            data['telephone'] +
                            '</td>'+
                         '</tr>'+
                         '<tr>'+
                            '<td style="font-weight:bold;">'+
                            '<?php echo $column_orderstatus; ?>:'+
                            '</td>'+
                            '<td>'+ 
                            data['orderstatus'] +
                            '</td>'+
                         '</tr>'+
                         '<tr>'+
                            '<td style="font-weight:bold;">'+
                            '<?php echo $column_ordertotal; ?>:'+
                            '</td>'+
                            '<td>'+ 
                            data['total'] +
                            '</td>'+
                         '</tr>'+
                    '</tbody>'+
                '</table>');
            }
            else
            {
                $('#order_detail').html('Sorry No Details exists for this order in the database');
            }
        }, 'json');

});

function getLatestOrders() {
var last_order_id = $('div.dashboard-content table.list tbody tr:first').attr('id');
$.get(
    "index.php?route=common/home/latest&token=<?php echo $token; ?>",
    {'order_id' : last_order_id },
    function (data) {
  if (data) {
    for (var i = 0; i < data.length; i++) {
      $('div.dashboard-content table.list tbody tr:first').before(
        '<tr id="' + 
        data[i]['order_id'] + 
        '"><td class="right">' + 
        data[i]['order_id'] + 
        '</td><td class="left">' + 
        data[i]['customer'] + 
        '</td><td class="left">' + 
        data[i]['status'] + 
        '</td><td class="left">' + 
        data[i]['date_added'] + 
        '</td><td class="right">' + 
        data[i]['total'] + 
        '</td><td class="right"> [<a href="' + 
        data[i]['action']['href'] + '">' + 
        data[i]['action']['text'] + 
        '</a>]</td></tr>'
      );
    }
  }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T02:56:00.223

这是因为 DOM 不`tr`知道您添加的内容。你在使用 jQuery 吗？

如果是这样，那么如果您使用的是 jQuery 1.7+ ，请使用[.live()](http://api.jquery.com/live/)或[.on() 。](http://api.jquery.com/on/)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T02:56:26.483

您需要将 click 函数绑定到父元素，以便事件可以正确冒泡。我看不到任何结构，所以我将在这里做一些假设。

```
//bind to document.
$(document).on('click', 'table > tr', function(){
  //now all rows will have a click function, regardless of ajax.
  alert('Expected click fired.');
}); 
```

the [.on()](http://api.jquery.com/on/) method is used in versions later than 1.7 to handle event delegation. In previous versions, we use [.delegate()](http://api.jquery.com/delegate/).

# c++ - 使用模板参数初始化 stl 类

> ID：12233066
> 
> 赞同：0
> 
> 时间：2012-09-02T02:51:15.363
> 
> 标签：c++, stl, map, initialization, std

我正在尝试使用模板参数声明一个 stl 映射，如下所示：（假设 T 为 typename，如下所示`template <class T>`：）

`map<T, T> m;`（在 .h 文件中）

它编译得很好。现在在我的 cpp 文件中，当我想插入地图时，我不能。我在智能感知上获得的唯一方法是“at”和“swap”方法。

有任何想法吗？请问有人吗？

提前致谢。

这是示例代码：

```
#pragma once

#include <iostream>
#include <map>

using namespace std;

template <class T> 

class MySample  
{  
map<T, T> myMap;
//other details omitted

public:

//constructor 
MySample(T t)
{
    //here I am not able to use any map methods. 
    //for example i want to insert some elements into the map
    //but the only methods I can see with Visual Studio intellisense
    //are the "at" and "swap" and two other operators
    //Why???
    myMap.  
}

//destructor
~MySample(void)
{

}
//other details omitted
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T03:48:11.857

将键值对插入 a 的常用方法`std::map`是索引运算符语法和`insert`函数。为了示例，我将假设`std::string`键和值：`int`

```
#include <map>
#include <string>

std::map<std::string,int> m;
m["hello"] = 4;  // insert a pair ("hello",4)
m.insert(std::make_pair("hello",4)); // alternative way of doing the same 
```

如果可以使用 C++11，则可以使用新的统一初始化语法代替`make_pair`调用：

```
m.insert({"hello",4}); 
```

而且，正如评论中所说，有

```
m.emplace("hello",4); 
```

在 C++11 中，它就地构造新的键值对，而不是在映射之外构造它并复制它。

* * *

我应该补充一点，因为您的问题实际上是关于*初始化*，而不是插入新元素，并且鉴于您确实在 的构造函数中执行此操作`MyClass`，您真正应该做的（在 C++11 中）是这样的：

```
MySample(T t)
 : myMap { { t,val(t) } }
{} 
```

（这里我假设有一些函数`val`可以生成要存储`t`在地图中的值。）

# asp.net - 上一页的链接按钮文本

> ID：12233067
> 
> 赞同：0
> 
> 时间：2012-09-02T02:51:24.443
> 
> 标签：asp.net, visual-studio-2010, visual-studio, visual-studio-2008, visual-studio-2005

我有一个带有链接按钮的网格视图，当单击 ID 列中的值时，它会发布跨页。我希望将 ID 发布到下一页，以便在 url 中看不到它。（无查询字符串）gridview 包含在 contentplaceholder 中。我想知道如何响应。使用 findcontrol 在 details.aspx 上编写链接按钮 (lbID) 文本。请帮忙。（我使用的是 VB，我应该提到这一点。）

```
 <asp:Content ID="content" ContentPlaceHolderID="content" runat="server">

    <asp:GridView ID="gvOpen" runat="server" AutoGenerateColumns="False" 
    BackColor="White" BorderColor="Black" BorderStyle="None" BorderWidth="1px" 
    CellPadding="4" 
    ForeColor="Black" Width="96%" DataKeyNames="id" 
    DataSourceID="Open" CssClass="Grid" AllowPaging="True">
    <AlternatingRowStyle BackColor="#CCFFCC" />
    <Columns>
    <asp:ImageField DataImageUrlField="priority" HeaderText="Priority">
    <ItemStyle Height="28px" HorizontalAlign="Center" VerticalAlign="Middle" Width="28px" />                                            
        </asp:ImageField>
        <asp:TemplateField HeaderText="ID">
            <ItemTemplate>
                <asp:LinkButton ID="lbID" runat="server" PostBackUrl="~/details.aspx"> <%# Eval("ID") %></asp:LinkButton>
            </ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T04:46:20.493

我认为这就是您想要的：[PostBackUrl](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.postbackurl.aspx#CodeSnippetContainerCode_4a1baf2f-27e3-422e-a5a9-936e7653376d)

```
void Page_Load(object sender, EventArgs e)
{
   LinkButton lbID = (LinkButton) PreviousPage.FindControl("lbID");
   string linkText = "";

   if(lbID != null)
     linkText = lbID.Text;
} 
```

您可能希望像这样设置 linkBut​​ton 文本

```
<asp:LinkButton ID="lbID" runat="server" PostBackUrl="~/details.aspx" Text='<%# Eval("ID") %>'></asp:LinkButton> 
```

# xml - Linq to XML，在已经存在的标签之间强制关闭和打开标签

> ID：12233068
> 
> 赞同：0
> 
> 时间：2012-09-02T02:51:42.900
> 
> 标签：xml, linq

例如有一个标签

```
<book>
<firstHalf>  </firstHalf>

<secondHalf>   </second half>
</book> 
```

我的要求是我需要将上半年和下半年分开，如下所示

```
<book>
<firstHalf>  </firstHalf>
</book>
<book>
<secondHalf> </second half>
</book> 
```

所以首先我需要添加一个新的结束书标签，然后是一个开始书标签！p- 使用 linq

我不知道该怎么做，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T03:07:46.457

```
var xmlStr = @"<root>
    <book>
        <firstHalf></firstHalf>
        <secondHalf></secondHalf>
    </book>
</root>
";
var doc = XDocument.Parse(xmlStr);

// find all books
var books = doc.Descendants("book").ToList();
    // p.s., need ToList() since we're modifying the structure
foreach (var book in books)
{
    // get all the "extra" elements
    var extraElements = book.Elements().Skip(1).ToList();
    if (extraElements.Any())
    {
        // remove the extra elements from the current book
        extraElements.Remove();
        // create new books after this book with the extra element
        book.AddAfterSelf(extraElements.Select(e => new XElement("book", e)));
    }
} 
```

产量：

```
<root>
  <book>
    <firstHalf></firstHalf>
  </book>
  <book>
    <secondHalf></secondHalf>
  </book>
</root> 
```

# facebook - Facebook 聊天 API 和 OpenGraph

> ID：12233071
> 
> 赞同：1
> 
> 时间：2012-09-02T02:53:27.563
> 
> 标签：facebook, xmpp, facebook-opengraph, facebook-chat

如果我向朋友发送私人消息，并且该消息包含一个链接，Facebook 会自动将站点的图标、描述等附加到消息中（假设该站点支持开放图）。

但是，当我使用 Chat API 将该链接发送给朋友时，它并没有这样做。它只是发送链接，但不使用站点的打开图形信息来显示图像、描述等。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T17:18:11.130

如果您打算在 PHP 中执行此操作，我建议您扩展与[Jaxl 库](https://github.com/abhinavsingh/JAXL/)捆绑在一起的[echo_facebook_client.php](https://github.com/abhinavsingh/JAXL/blob/v3.x/examples/echo_facebook_client.php)示例示例。这将允许您使用您的 facebook 应用程序 oauth 令牌向朋友发送私人消息。

上次当我检查[facebook jabber 文档](https://developers.facebook.com/docs/chat/)时（几个月前），没有官方方法可以在聊天上下文中附加链接元数据。在文档的限制部分下，您会发现：

```
Your client cannot send or receive HTML messages 
```

# hibernate - 引起：org.hibernate.TransactionException：JDBC回滚失败

> ID：12233073
> 
> 赞同：2
> 
> 时间：2012-09-02T02:53:37.867
> 
> 标签：hibernate

我只是想在 Hibernate 中保存或更新，我看到正在生成 sql 但插入没有运行。我看到所有的例外。唯一的事情是我要保存的实体有一个复合 ID。并不是说这会导致这种情况，而只是想说明这一点。

```
Hibernate: 
insert 
into
    user_restr
    (access, dname, user_id, sat) 
values
    (?, ?, ?, ?)

65033 [http-bio-8080-exec-11] WARN  org.hibernate.util.JDBCExceptionReporter - SQL Error: -79716, SQLState: IX000
65034 [http-bio-8080-exec-11] ERROR org.hibernate.util.JDBCExceptionReporter - System or internal error java.io.IOException
65071 [http-bio-8080-exec-11] INFO  org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [org/springframework/jdbc/support/sql-error-codes.xml]
65134 [http-bio-8080-exec-11] INFO  org.springframework.jdbc.support.SQLErrorCodesFactory - SQLErrorCodes loaded: [DB2, Derby, H2, HSQL, Informix, MS-SQL, MySQL, Oracle, PostgreSQL, Sybase]
65151 [http-bio-8080-exec-11] WARN  org.springframework.jdbc.support.SQLErrorCodesFactory - Error while extracting database product name - falling back to empty error codes
org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is java.sql.SQLException: Connection not established
    at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:296) [spring-jdbc-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:320) [spring-jdbc-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.jdbc.support.SQLErrorCodesFactory.getErrorCodes(SQLErrorCodesFactory.java:214) [spring-jdbc-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.setDataSource(SQLErrorCodeSQLExceptionTranslator.java:141) [spring-jdbc-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.<init>(SQLErrorCodeSQLExceptionTranslator.java:104) [spring-jdbc-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.orm.hibernate3.HibernateTransactionManager.getDefaultJdbcExceptionTranslator(HibernateTransactionManager.java:817) [spring-orm-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) [catalina.jar:7.0.27]
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999) [tomcat-coyote.jar:7.0.27]
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565) [tomcat-coyote.jar:7.0.27]
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309) [tomcat-coyote.jar:7.0.27]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [na:1.7.0]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [na:1.7.0]
    at java.lang.Thread.run(Thread.java:722) [na:1.7.0]
Caused by: java.sql.SQLException: Connection not established
    at com.informix.util.IfxErrMsg.getSQLException(IfxErrMsg.java:413) [ifxjdbc-3.70.JC1.jar:na]
    at com.informix.jdbc.IfxSqliConnect.getMetaData(IfxSqliConnect.java:2642) [ifxjdbc-3.70.JC1.jar:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [na:1.7.0]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [na:1.7.0]
    at org.hibernate.jdbc.BorrowedConnectionProxy.invoke(BorrowedConnectionProxy.java:74) [hibernate-core-3.6.10.Final.jar:3.6.10.Final]
    at $Proxy46.getMetaData(Unknown Source) [na:na]
    at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:285) [spring-jdbc-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    ... 51 common frames omitted
65154 [http-bio-8080-exec-11] ERROR org.hibernate.transaction.JDBCTransaction - Could not toggle autocommit
java.sql.SQLException: Connection not established
    at com.informix.util.IfxErrMsg.getSQLException(IfxErrMsg.java:413) [ifxjdbc-3.70.JC1.jar:na]
    at com.informix.jdbc.IfxSqliConnect.setAutoCommit(IfxSqliConnect.java:2142) [ifxjdbc-3.70.JC1.jar:na]
    at org.hibernate.transaction.JDBCTransaction.toggleAutoCommit(JDBCTransaction.java:224) [hibernate-core-3.6.10.Final.jar:3.6.10.Final]
    at org.hibernate.transaction.JDBCTransaction.rollbackAndResetAutoCommit(JDBCTransaction.java:216) [hibernate-core-3.6.10.Final.jar:3.6.10.Final]
    at org.hibernate.transaction.JDBCTransaction.rollback(JDBCTransaction.java:192) [hibernate-core-3.6.10.Final.jar:3.6.10.Final]
    at java.lang.reflect.Method.invoke(Method.java:601) [na:1.7.0]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722) [servlet-api.jar:na]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) [catalina.jar:7.0.27]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) [catalina.jar:7.0.27]
    at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198) [spring-orm-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) [spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) [catalina.jar:7.0.27]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) [catalina.jar:7.0.27]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225) [catalina.jar:7.0.27]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169) [catalina.jar:7.0.27]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) [catalina.jar:7.0.27]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) [catalina.jar:7.0.27]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98) [catalina.jar:7.0.27]
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927) [catalina.jar:7.0.27]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) [catalina.jar:7.0.27]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) [catalina.jar:7.0.27]
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999) [tomcat-coyote.jar:7.0.27]
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565) [tomcat-coyote.jar:7.0.27]
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309) [tomcat-coyote.jar:7.0.27]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [na:1.7.0]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [na:1.7.0]
    at java.lang.Thread.run(Thread.java:722) [na:1.7.0]
65156 [http-bio-8080-exec-11] ERROR org.hibernate.transaction.JDBCTransaction - JDBC rollback failed
java.sql.SQLException: Connection not established
    at com.informix.util.IfxErrMsg.getSQLException(IfxErrMsg.java:413) [ifxjdbc-3.70.JC1.jar:na]
    at com.informix.jdbc.IfxSqliConnect.rollback(IfxSqliConnect.java:2075) [ifxjdbc-3.70.JC1.jar:na]
    at org.hibernate.transaction.JDBCTransaction.rollbackAndResetAutoCommit(JDBCTransaction.java:213) [hibernate-core-3.6.10.Final.jar:3.6.10.Final]
    at org.hibernate.transaction.JDBCTransaction.rollback(JDBCTransaction.java:192) [hibernate-core-3.6.10.Final.jar:3.6.10.Final]
    at org.springframework.orm.hibernate3.HibernateTransactionManager.doRollback(HibernateTransactionManager.java:676) [spring-orm-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.doRollbackOnCommitException(AbstractPlatformTransactionManager.java:892) [spring-tx-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:782) [spring-tx-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723) [spring-tx-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393) [spring-tx-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120) [spring-tx-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) [spring-aop-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622) [spring-aop-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [na:1.7.0]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [na:1.7.0]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [na:1.7.0]
    at java.lang.reflect.Method.invoke(Method.java:601) [na:1.7.0]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722) [servlet-api.jar:na]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) [catalina.jar:7.0.27]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) [catalina.jar:7.0.27]
    at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198) [spring-orm-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) [spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) [catalina.jar:7.0.27]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) [catalina.jar:7.0.27]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225) [catalina.jar:7.0.27]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169) [catalina.jar:7.0.27]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) [catalina.jar:7.0.27]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) [catalina.jar:7.0.27]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98) [catalina.jar:7.0.27]
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927) [catalina.jar:7.0.27]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) [catalina.jar:7.0.27]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) [catalina.jar:7.0.27]
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999) [tomcat-coyote.jar:7.0.27]
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565) [tomcat-coyote.jar:7.0.27]
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309) [tomcat-coyote.jar:7.0.27]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [na:1.7.0]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [na:1.7.0]
    at java.lang.Thread.run(Thread.java:722) [na:1.7.0]
65161 [http-bio-8080-exec-11] ERROR org.springframework.transaction.support.AbstractPlatformTransactionManager - Commit exception overridden by rollback exception
org.springframework.jdbc.UncategorizedSQLException: Hibernate flushing: Could not execute JDBC batch update; uncategorized SQLException for SQL [insert into user_restrict_acc (access_level, datatype_name, user_id, satellite) values (?, ?, ?, ?)]; SQL state [IX000]; error code [-79716]; System or internal error java.io.IOException; nested exception is java.sql.SQLException: System or internal error java.io.IOException
    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:83) [spring-jdbc-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80) [spring-jdbc-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80) [spring-jdbc-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.orm.hibernate3.HibernateTransactionManager.convertJdbcAccessException(HibernateTransactionManager.java:805) [spring-orm-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.orm.hibernate3.HibernateTransactionManager.convertHibernateAccessException(HibernateTransactionManager.java:791) [spring-orm-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:664) [spring-orm-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754) [spring-tx-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723) [spring-tx-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393) [spring-tx-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120) [spring-tx-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) [spring-aop-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622) [spring-aop-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [na:1.7.0]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [na:1.7.0]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [na:1.7.0]
    at java.lang.reflect.Method.invoke(Method.java:601) [na:1.7.0]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722) [servlet-api.jar:na]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) [catalina.jar:7.0.27]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) [catalina.jar:7.0.27]
    at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198) [spring-orm-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) [spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) [catalina.jar:7.0.27]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) [catalina.jar:7.0.27]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225) [catalina.jar:7.0.27]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169) [catalina.jar:7.0.27]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) [catalina.jar:7.0.27]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) [catalina.jar:7.0.27]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98) [catalina.jar:7.0.27]
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927) [catalina.jar:7.0.27]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) [catalina.jar:7.0.27]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) [catalina.jar:7.0.27]
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999) [tomcat-coyote.jar:7.0.27]
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565) [tomcat-coyote.jar:7.0.27]
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309) [tomcat-coyote.jar:7.0.27]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [na:1.7.0]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [na:1.7.0]
    at java.lang.Thread.run(Thread.java:722) [na:1.7.0]
Caused by: java.sql.SQLException: System or internal error java.io.IOException
    at com.informix.util.IfxErrMsg.getSQLException(IfxErrMsg.java:488) [ifxjdbc-3.70.JC1.jar:na]
    at com.informix.jdbc.IfxSqli.a(IfxSqli.java:9217) [ifxjdbc-3.70.JC1.jar:na]
    at com.informix.jdbc.IfxSqli.receiveMessage(IfxSqli.java:2549) [ifxjdbc-3.70.JC1.jar:na]
    at com.informix.jdbc.IfxSqli.executeRelease(IfxSqli.java:2157) [ifxjdbc-3.70.JC1.jar:na]
    at com.informix.jdbc.IfxStatement.close(IfxStatement.java:518) [ifxjdbc-3.70.JC1.jar:na]
    at org.hibernate.jdbc.AbstractBatcher.closePreparedStatement(AbstractBatcher.java:563) [hibernate-core-3.6.10.Final.jar:3.6.10.Final]
    at org.hibernate.jdbc.AbstractBatcher.closeStatement(AbstractBatcher.java:291) [hibernate-core-3.6.10.Final.jar:3.6.10.Final]
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:271) [hibernate-core-3.6.10.Final.jar:3.6.10.Final]
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:268) [hibernate-core-3.6.10.Final.jar:3.6.10.Final]
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:184) [hibernate-core-3.6.10.Final.jar:3.6.10.Final]
    at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321) [hibernate-core-3.6.10.Final.jar:3.6.10.Final]
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51) [hibernate-core-3.6.10.Final.jar:3.6.10.Final]
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1216) [hibernate-core-3.6.10.Final.jar:3.6.10.Final]
    at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:383) [hibernate-core-3.6.10.Final.jar:3.6.10.Final]
    at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:133) [hibernate-core-3.6.10.Final.jar:3.6.10.Final]
    at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:656) [spring-orm-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    ... 44 common frames omitted
Caused by: java.io.IOException: null
    at com.informix.asf.IfxDataInputStream.readFully(IfxDataInputStream.java:148) [ifxjdbc-3.70.JC1.jar:na]
    at com.informix.asf.IfxDataInputStream.readSmallInt(IfxDataInputStream.java:453) [ifxjdbc-3.70.JC1.jar:na]
    at com.informix.jdbc.IfxSqli.receiveMessage(IfxSqli.java:2514) [ifxjdbc-3.70.JC1.jar:na]
    ... 57 common frames omitted
Sep 01, 2012 10:07:07 PM com.vaadin.Application terminalError
SEVERE: Terminal error:
Cause: org.springframework.transaction.TransactionSystemException: Could not roll back Hibernate transaction; nested exception is org.hibernate.TransactionException: JDBC rollback failed
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.springframework.transaction.TransactionSystemException: Could not roll back Hibernate transaction; nested exception is org.hibernate.TransactionException: JDBC rollback failed
    at org.springframework.orm.hibernate3.HibernateTransactionManager.doRollback(HibernateTransactionManager.java:679)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.doRollbackOnCommitException(AbstractPlatformTransactionManager.java:892)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:782)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    ... 31 more
Caused by: org.hibernate.TransactionException: JDBC rollback failed
    at org.hibernate.transaction.JDBCTransaction.rollback(JDBCTransaction.java:200)
    at org.springframework.orm.hibernate3.HibernateTransactionManager.doRollback(HibernateTransactionManager.java:676)
    ... 45 more
Caused by: java.sql.SQLException: Connection not established
    at com.informix.util.IfxErrMsg.getSQLException(IfxErrMsg.java:413)
    at com.informix.jdbc.IfxSqliConnect.rollback(IfxSqliConnect.java:2075)
    at org.hibernate.transaction.JDBCTransaction.rollbackAndResetAutoCommit(JDBCTransaction.java:213)
    at org.hibernate.transaction.JDBCTransaction.rollback(JDBCTransaction.java:192)
    ... 46 more 
```

# c++ - 计算一个数的大幂

> ID：12233080
> 
> 赞同：0
> 
> 时间：2012-09-02T02:55:28.377
> 
> 标签：c++, c, bignum

```
#include<iostream>
#include<cstdio>
#define M 1000000007
using namespace std;

long long int power(int a,int b)
{
    if(b==0)
        return 1;
    else if(b==1)
        return a;
    else if(b%2==0)
        return power((a*a)%M,b/2);
    else
        return (power((a*a)%M,b/2)*a)%M;
} 
```

在这个函数中，当我通过 a=2，b>31 时，它总是返回 0。对于 b=31，我得到 147483634。你能说出问题出在哪里吗？

或者你能告诉另一种计算数字大幂的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T03:43:22.713

在`(a*a)%M`中，a*a 可能在计算余数之前溢出。从 2 开始，产生 0 的溢出并不让我感到惊讶。您需要使用能够表示 (M-1)*(M-1) 的类型，即 1000000012000000036，而`int`通常限制为 2147483647。`long long`（自 99 以来的 C 标准和自 11 以来的 C++ 标准，其他地方的通用扩展）保证可以工作.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T02:57:25.750

在`<cmath>`其中`pow(x,y)`x 是底数，y 是指数。x^y。

[参考这里](http://en.cppreference.com/w/cpp/numeric/math/pow)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T06:05:54.650

什么时候`a`是`int`,`a*a`使用- 大小的`int`算术。相反，尝试`a*(long long)a`使用不会溢出的更广泛的算术。

# jquery - 如何在 Rails 项目中组织 Javascript

> ID：12233081
> 
> 赞同：0
> 
> 时间：2012-09-02T02:55:31.023
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我遇到过这几次。所以在 Rails 3 中，随着资产管道的引入，我们最好将 javascript 与视图分开。但是，如果我们想将一些实例变量从控制器转发到 javascript 怎么办？似乎唯一的解决方案是将javascript嵌入视图中。有没有办法解决这个问题？感觉就像，动态组件是不可能从视图中分离出来的。当我使用谷歌可视化 api 时，会时不时发生这种情况。我经常需要将大数据推送到 API 中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T03:04:16.757

您有三个主要选择：

1.  **嵌入式 JavaScript**

    就像您建议的那样，您可以`<script>`在页面中嵌入一个标签，其内容是动态确定的。

2.  **DOM**

    有一个 hidden 是一种常见的做法`<textarea>`，它的内容是某种数据（通常是 JSON）。在页面加载时，您可以使用 DOM 访问元素的 value 属性。

3.  **单独的 HTTP 请求**

    您可以让服务器提供您通过 XMLHttpRequest 或其他方式请求的 JSON 数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T03:18:16.740

一种干净的方法是[Gon gem](https://github.com/gazay/gon)。它专门用于“让你的 Rails 变量到你的 js”

有关其他一些选项，请参阅此[railscasts 剧集](http://railscasts.com/episodes/324-passing-data-to-javascript)（或阅读[ASCIIcasts 成绩单](http://asciicasts.com/episodes/324-passing-data-to-javascript)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-20T22:37:14.157

这很容易！

**假设我们有一个控制器，其index.html.erb**具有以下视图

 **```
#GET /index.html
def index
  @some_data = {:foo => [:bar0, :bar1]}
end 
```

在我们的视图（**index.html.erb**）中，我们首先将数据嵌入 HTML

```
<%= javascript_include_tag "index" %> 
<div id="home_page">

<!-- Pass members to javascript -->
<div id="self" data-some_data='<%= @some_data.to_json %>'></div>    

</div> 
```

最后，假设我们使用 jQuery，我们可以简单地访问**index.js**中的数据。

```
$(document).ready(function() {
  some_data = $("#self").data("some_data");
  alert(some_data.foo[0]);              //Says "bar0"
} 
```

* * *

注意：您可能会期望必须使用 JSON.parse，因为它具有神奇的能力，可以像使用对象一样使用返回的数据，而不仅仅是纯字符串，例如：

```
$(document).ready(function() {
      //This will fail
      some_data = JSON.parse($("#self").data("some_data"));
      alert(some_data.foo[0]);              //Says "bar0"
    } 
```

但是，使用 JSON.parse**将不起作用**。JSON.parse 返回的信息**不一定**是字符串，在这种情况下，它是一个 javascript 对象；[jQuery 的数据函数](http://api.jquery.com/data/#data-html5)会尝试将字符串隐式转换为合理的 javascript 对象。对于包含 JSON 字符串的数据属性，数据属性内的字符串将被转换为“javascript 对象”。

如果您不喜欢 的神奇行为，`$.data`可以使用`JSON.parse($("#self").attr("data-some_data"))``$("#self").data("some_data")`**

# c++ - 下面的符号是什么意思？

> ID：12233085
> 
> 赞同：0
> 
> 时间：2012-09-02T02:56:51.147
> 
> 标签：c++

我遇到了这段代码，但我不明白：

```
catch (MyException & /* q */) { 
```

`/*`和做什么`*/`？他们看起来像是对我的评论，但这是不对的。不需要指定变量吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T02:57:54.587

> 他们看起来像是对我的评论，但这是不对的。

是的，这些*是* [C 风格的注释](http://msdn.microsoft.com/en-us/library/k1dbk8bw.aspx)。它们用于排除未使用变量的名称，最有可能避免编译器发出警告。您可以在您选择的 C 或 C++ 书籍中阅读它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T02:58:26.497

/* */ 用于内联注释和多行注释。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T02:58:55.937

异常的名称被注释掉以避免未使用的变量警告。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T02:57:37.207

`/* */`用于内联注释。

# java - 找不到符号“新”

> ID：12233089
> 
> 赞同：0
> 
> 时间：2012-09-02T02:57:35.957
> 
> 标签：java

好的，我浏览了这个网站上的很多论坛，我找不到我的问题。我不断收到一条错误消息，指出“找不到符号”，并在我的 EmployeeTest 应用程序上指向“新”中的“n”。这是我的代码：

第一个文件：

```
import java.util.Scanner;

public class Employee

{

    private String fName;
    private String lName;
    private Double mSalary;

    public Employee( String first, String last, Double mth)
    {
        fName = first;
        lName = last;
        if ( mth > 0.00 )
            mSalary = mth;

        if ( mth < 0.00 )
            mSalary = 0.00;
    }

    public void setFName( String first )
    {
        fName = first;
    }

    public void setLName( String last )
    {
        lName = last;
    }

    public void setMSalary( Double mth )
    {
        mSalary = mth;
    }

    public String getFName()
    {
        return fName;
    }

    public String getLName()
    {
        return lName;
    }

    public Double getMSalary()
    {
        return mSalary;
    }

    public void displayMessage()
    {
        System.out.printf( "%s %s has a monthly salary of $%.2f\n",
            getFName(),
            getLName(),
            getMSalary() );
    }
} 
```

第二个文件：

```
public class EmployeeTest

{

    public static void main( String[] args )
        {
            Employee myEmployee = new Employee( 
                "Fred", "Rogers", "10" );

            System.out.printf( "Employee's first name is: %s\n",
                myEmployee.getFName() );
            System.out.printf( "\nEmployee's last name is: %s\n",
                myEmployee.getLName() );
            System.out.printf( "\nEmployee's monthly salary is: %d\n",
                myEmployee.getMSalary() );
        }
} 
```

我感觉它与我的构造函数有关，但我无法找出问题所在！我一定已经检查了我的代码 ka-jillion 倍！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T03:05:51.410

你有`public Employee( String first, String last, Double mth)`作为你的构造函数，但你正在实例化一个`Employee`对象`new Employee("Fred", "Rogers", "10");`

该错误很可能是说它找不到带参数的构造`(string, string, string)`函数。

更改`"10"`为`10`：`new Employee("Fred", "Rogers", 10);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T03:06:41.343

您类中的构造函数是：

```
public Employee( String first, String last, Double mth) 
```

但你在打电话

```
Employee myEmployee = new Employee( "Fred", "Rogers", "10" ); 
```

**要么**更改构造函数以传递`String`

```
public Employee( String first, String last, String mth) 
```

或`10.0`作为双精度值传递（这似乎是一个更好的解决方案）。

```
Employee myEmployee = new Employee( "Fred", "Rogers", 10.0d ); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-02T03:07:37.227

改变`EmployeeTest`

```
Employee myEmployee = new Employee("Fred", "Rogers", "10" ); 
```

到：

```
Employee myEmployee = new Employee( "Fred", "Rogers", 10d ); 
```

和：

```
System.out.printf( "\nEmployee's monthly salary is: %d\n", myEmployee.getMSalary() ); 
```

到：

```
System.out.printf( "\nEmployee's monthly salary is: %f\n", myEmployee.getMSalary() ); 
```

# sqlite - 相当于 Oracle 的 ROWNUM 的 SQLITE？

> ID：12233091
> 
> 赞同：10
> 
> 时间：2012-09-02T02:57:44.843
> 
> 标签：sqlite, insert-select

我正在向 SQLite3 中的表添加一个“索引”列，以允许用户通过重命名旧数据库并使用额外的列在其位置创建一个新数据库来轻松地重新排序数据。

我遇到的问题是，当我插入...选择旧值时，我需要在“索引”列中给每一行一个唯一的数字。

我所做的搜索在 Oracle 中发现了一个有用的术语，称为 ROWNUM，但 SQLite3 没有。SQLite 中是否有等价的东西？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-02T10:24:26.203

您可以使用其中一个特殊的行名称`ROWID`，`OID`或`_ROWID_`获取列的 rowid。有关更多详细信息，请参见[http://www.sqlite.org/lang_createtable.html#rowid](http://www.sqlite.org/lang_createtable.html#rowid)（并且这些行可以被调用的普通列隐藏`ROWID`等等）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-02T09:23:18.387

没有 SQLite 没有直接等同于 Oracle 的 ROWNUM。

如果我正确理解您的要求，您应该能够以这种方式根据旧表的顺序添加编号列：

```
create table old (col1, col2);

insert into old values
    ('d', 3),
    ('s', 3),
    ('d', 1),
    ('w', 45),
    ('b', 5465),
    ('w', 3),
    ('b', 23);

create table new (colPK INTEGER PRIMARY KEY AUTOINCREMENT, col1, col2);

insert into new select NULL, col1, col2 from old order by col1, col2; 
```

新表包含：

```
.headers on
.mode column

select * from new;

colPK       col1        col2      
----------  ----------  ----------
1           b           23        
2           b           5465      
3           d           1         
4           d           3         
5           s           3         
6           w           3         
7           w           45 
```

就像它的名字所暗示的`AUTOINCREMENT`那样：每增加一行，前一个值就增加 1。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-03-22T08:38:36.320

这里的许多人似乎将**ROWNUM**与**ROWID**混淆了。它们不是同一个概念，Oracle 两者都有。

**ROWID**是数据库 ROW 的唯一 ID。它几乎是不变的（在导入/导出期间更改，但在不同的 SQL 查询中是相同的）。

**ROWNUM**是查询结果中的行号对应的计算字段。第一行始终为 1，第二行始终为 2，依此类推。它绝对没有链接到任何表行，并且同一表行可能具有非常不同的 rownums，具体取决于查询方式。

Sqlite 有一个 ROWID 但没有 ROWNUM。我发现的唯一等价物是**ROW_NUMBER()**函数（参见[http://www.sqlitetutorial.net/sqlite-window-functions/sqlite-row_number/](http://www.sqlitetutorial.net/sqlite-window-functions/sqlite-row_number/)）。

你可以通过这样的查询来实现你想要的：

```
insert into new 
    select *, row_number() over () 
    from old; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-08T16:07:45.010

我相信您想在 SQLite 中使用约束 LIMIT 。 `SELECT * FROM TABLE`可以返回数千条记录。但是，您可以通过添加`LIMIT`关键字来限制这一点。

`SELECT * FROM TABLE LIMIT 5;` 将返回您查询中返回的表中的前 5 条记录 - 如果可用

# php - 如何使用 PHP 在多个页面中携带主要的 html 元素（例如，有一个 html shell）

> ID：12233095
> 
> 赞同：-1
> 
> 时间：2012-09-02T02:58:20.570
> 
> 标签：php, html

我希望使用 PHP 在多个页面中使用相同的 html shell，这样我只需要更改一个页面而不是多个页面。

显然只需要一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T03:54:19.053

只需将您的许多 php 文件中多次使用的代码移动到单独的 php 文件中，并以三种方式使用

`<?php include 'filename.php';?>//suppose not found then include will only produce a warning (E_WARNING) and the script will continue`

`<?php require 'filename.php';?>//suppose not found require will produce a fatal error (E_COMPILE_ERROR) and stop the script`

`<?php require_once 'filename.php'; ?>//include only once in whole same PHP file`

我希望它清楚你......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T03:02:49.103

您可以创建一个新文件并将所有 html 放入其中，然后将此代码添加到您希望拥有该文件内容的每个页面：

```
<?php require_once 'filename.php'; ?> 
```

# ruby-on-rails - Rails 路由格式

> ID：12233101
> 
> 赞同：2
> 
> 时间：2012-09-02T02:59:26.917
> 
> 标签：ruby-on-rails, resources, format, routes

我正在尝试构建一个单页应用程序并且遇到 Rails 路由问题。基本上我希望管理路由中的所有内容都到管理控制器索引，但 json rails 到特定资源。我试过了

```
namespace :admin do
  constraints :format => 'html' do
    match '*path' => 'admin#index'
  end

  constraints :format => 'json' do
      resources :user, :items
  end
end 
```

在这种情况下，路径将贪婪地匹配并匹配 /admin/users.json 如果我将 :format => 'json' 块向上移动。它匹配 /admin/users

看起来我指定的约束块根本不起作用。

Rails 3.2.6 版 rake 路由

```
/admin/*path(.:format)                        admin/admin#index {:format=>"html"}
admin_users GET    /admin/users(.:format)     admin/users#index {:format=>"json"} 
```

/* 管理员用户和管理员项目的其他正常资源路由 */

我检查了，没有路由 /admin/users(.format) admin/users#index {:format=>"html"}

所以看起来这正是我想的那样。但不知何故仍然不起作用

**更新：** 如果它向上移动 json 块，我已经设法让它工作但是如果 html 块在顶部。它仍然给我带来问题。但我认为现在对我来说已经足够好了。多谢你们

原来的问题是我用了request.xhr？在我应该使用 response_to 的控制器中

**当我转到 /admin/users 时，更新 2** Uhm 现在无法正常工作，我收到了一个不可接受的错误。我认为第一条规则不会匹配并匹配第二条规则。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T11:58:01.837

如果您将 json 块向上移动并为每个 json 资源强制设置格式段，它是否有效？在 Rails 3.2 中，通过将**format**选项设置为**true**来实现：

```
namespace :admin do
  constraints(format: "json") do
    resources :items, format: true
    resources :users, format: true
  end

  constraints(format: "html") do
    match "*path" => "admin#index"
  end
end 
```

# python - 在运行时在python中确定对象是否是类（旧类型和新类型）实例

> ID：12233103
> 
> 赞同：5
> 
> 时间：2012-09-02T02:59:32.580
> 
> 标签：python, class

我正在尝试使用 h5py 模块将一组深度嵌套的类、属性、绑定方法等写入 HDF5 文件以进行长期存储。我真的很亲近。我似乎无法解决的唯一问题是在运行时以编程方式找出一种方法来确定某物是否是类实例类型，而不是列表、int 等。我需要递归到类实例，但显然不应该递归到 int、float 等。这需要对旧式和新式类都有效。我研究的东西不起作用/我无法上班：

**使用检查模块**

```
>>> class R(object): pass
...
>>> _R = R()
>>> import inspect
>>> inspect.isclass(_R)
False
>>> inspect.isclass(R)
True 
```

这没有帮助，我需要一个类似`inspect.isclassinstance(_R)`返回的函数`True`

**使用类型模块**

如果您使用旧式类，则有一个名为 InstanceType 的类型可以匹配旧式类的实例，如下面的代码所示

```
>>> import types
>>> class R(): pass #old-style class
...
>>> _R = R()
>>> import types
>>> type(_R) is types.InstanceType
True
>>> class R(object): pass #new-style class
...
>>> _R = R()
>>> type(_R) is types.InstanceType
False 
```

但是如果您使用新式类，则没有相应的类型`types`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T15:31:07.417

虽然发帖人很可能需要重新考虑他的设计，但在某些情况下，有必要区分用 C 语言创建的内置/扩展类型的实例和用该`class`语句在 Python 中创建的类实例。虽然两者都是类型，但后者是 CPython 内部称为“堆类型”的一类类型，因为它们的类型结构是在运行时分配的。`__repr__`在输出中可以看到 python 继续区分它们：

```
>>> int       # "type"
<type 'int'>
>>> class X(object): pass
... 
>>> X         # "class"
<class '__main__.X'> 
```

通过`__repr__`检查类型是否为堆类型来精确地实现区分。

根据应用程序的确切需求，`is_class_instance`可以通过以下方式之一实现功能：

```
# Built-in types such as int or object do not have __dict__ by
# default. __dict__ is normally obtained by inheriting from a
# dictless type using the class statement.  Checking for the
# existence of __dict__ is an indication of a class instance.
#
# Caveat: a built-in or extension type can still request instance
# dicts using tp_dictoffset, and a class can suppress it with
# __slots__.
def is_class_instance(o):
    return hasattr(o, '__dict__')

# A reliable approach, but one that is also more dependent
# on the CPython implementation.
Py_TPFLAGS_HEAPTYPE = (1<<9)       # Include/object.h
def is_class_instance(o):
    return bool(type(o).__flags__ & Py_TPFLAGS_HEAPTYPE) 
```

* * *

**编辑**

这是该函数的第二个版本的解释。它使用 CPython 内部用于其自身目的的相同测试来真正测试该类型是否为“堆类型”。这确保了对于堆类型（“类”）的实例，它总是返回 True，对于非堆类型（“类型”，还有旧式类，这很容易修复）的实例，它总是返回 False。它通过检查C 级[结构的](http://docs.python.org/c-api/typeobj.html)[`tp_flags`成员](http://docs.python.org/c-api/typeobj.html#PyTypeObject.tp_flags)是否设置了位来做到这一点。实现的弱点在于它硬编码了[`PyTypeObject`](http://docs.python.org/c-api/typeobj.html)`Py_TPFLAGS_HEAPTYPE``Py_TPFLAGS_HEAPTYPE`恒定为当前观察到的值。（这是必要的，因为该常量没有通过符号名称暴露给 Python。）虽然理论上这个常量可以改变，但在实践中极不可能发生，因为这样的改变会无缘无故地破坏现有扩展模块的 ABI。查看中[常量](http://hg.python.org/cpython/file/820032281f49/Include/object.h#l536)的[定义`Py_TPFLAGS`](http://hg.python.org/cpython/file/820032281f49/Include/object.h#l536)`Include/object.h`，很明显，新的常量正在被小心地添加，而不会干扰旧的常量。另一个弱点是此代码在非 CPython 实现（例如 Jython 或 IronPython）上运行的机会为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T20:58:39.763

感谢@user4815162342，我已经能够让它工作。这是一个稍作修改的版本，它将为旧式和新式类的实例返回 True：

```
#Added the check for old-style class
Py_TPFLAGS_HEAPTYPE = (1L<<9)       # Include/object.h
def is_class_instance(o):
    import types
    return (bool(type(o).__flags__ & Py_TPFLAGS_HEAPTYPE) 
            or type(o) is types.InstanceType) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-07T08:42:42.583

**tl;dr** *只需调用`is_object_pure_python()`远在远下方定义的函数。*

和[ibell](https://stackoverflow.com/users/1360263/ibell)一样，[user4815162342](https://stackoverflow.com/a/12237216/2809027)的权威[Python 2.x 专用解决方案](https://stackoverflow.com/a/12237216/2809027)给我留下了深刻的印象。然而，在 Pythonic 的天堂里，一切都不是很好。

## 问题。问题无处不在。

该解决方案（尽管很有见地）遭受了一些[简单的编辑](https://en.wikipedia.org/wiki/Software_rot) *无法*轻松解决的问题，包括：

*   `L`Python 3.x 不支持类型后缀。^(*诚然，微不足道的解决方法。*)
*   交叉解释器`is_class_instance()`实现无法解释使用`__slots__`.
*   CPython 特定的`is_class_instance()`实现在非 CPython 解释器（例如，pypy）下失败。
*   没有可比的实现来检测*类*（而不是*类实例*）是纯 Python 还是基于 C 的。

## 解决方案！解决方案无处不在！

为了解决这些问题，以下特定于 Python 3.x 的解决方案已经过重构，以便在 CPython 下选择更可靠的 CPython 特定`L`实现，并回退到所有其他解释器下不太可靠的跨解释器实现，*以及*已被推广到检测类和类实例。`__slots__``is_class_instance()``is_class_instance()`

 *为了理智，让我们首先检测类实例：

```
import platform

# If the active Python interpreter is the official CPython implementation,
# prefer a more reliable CPython-specific solution guaranteed to succeed.
if platform.python_implementation() == 'CPython':
    # Magic number defined by the Python codebase at "Include/object.h".
    Py_TPFLAGS_HEAPTYPE = (1<<9)

    def is_instance_pure_python(obj: object) -> bool:
        '''
        `True` if the passed object is an instance of a pure-Python class _or_
        `False` if this object is an instance of a C-based class (either builtin
        or defined by a C extension).
        '''

        return bool(type(obj).__flags__ & Py_TPFLAGS_HEAPTYPE)

# Else, fallback to a CPython-agnostic solution typically but *NOT*
# necessarily succeeding. For all real-world objects of interest, this is
# effectively successful. Edge cases exist but are suitably rare.
else:
    def is_instance_pure_python(obj: object) -> bool:
        '''
        `True` if the passed object is an instance of a pure-Python class _or_
        `False` if this object is an instance of a C-based class (either builtin
        or defined by a C extension).
        '''

        return hasattr(obj, '__dict__') or hasattr(obj, '__slots__') 
```

## 证据在圭多的布丁里

单元测试证明了令人不安的事实：

```
>>> class PurePythonWithDict(object): pass
>>> class PurePythonWithSlots(object): __slots__ = ()
>>> unslotted = PurePythonWithDict()
>>> slotted = PurePythonWithSlots()
>>> is_instance_pure_python(unslotted)
True
>>> is_instance_pure_python(slotted)
True
>>> is_instance_pure_python(3)
False
>>> is_instance_pure_python([3, 1, 4, 1, 5])
False
>>> import numpy
>>> is_instance_pure_python(numpy.array((3, 1, 4, 1, 5)))
False 
```

## 这是否可以推广到*没有*实例的类？

是的，但这样做并非易事。检测一个**类**（而不是**类实例**）是纯 Python 还是基于 C 是非常困难的。为什么？因为即使是基于 C 的类也提供了该`__dict__`属性。因此，`hasattr(int, '__dict__') == True`。

尽管如此，如果这是一种骇人听闻的方式，就会有一种骇人听闻的意志。由于未知（*可能是平庸*）的原因，`dir()`内置函数`__dict__`从其返回的列表中删除属性名称，**仅用于基于 C 的类。**因此，以交叉解释器的方式检测一个类是纯 Python 还是基于 C 的，减少了迭代搜索 for 返回的`dir()`列表`__dict__`。为了胜利：

```
import platform

# If the active Python interpreter is the official CPython interpreter,
# prefer a more reliable CPython-specific solution guaranteed to succeed.
if platform.python_implementation() == 'CPython':
    # Magic number defined by the Python codebase at "Include/object.h".
    Py_TPFLAGS_HEAPTYPE = (1<<9)

    def is_class_pure_python(cls: type) -> bool:
        '''
        `True` if the passed class is pure-Python _or_ `False` if this class
        is C-based (either builtin or defined by a C extension).
        '''

        return bool(cls.__flags__ & Py_TPFLAGS_HEAPTYPE)

# Else, fallback to a CPython-agnostic solution typically but *NOT*
# necessarily succeeding. For all real-world objects of interest, this is
# effectively successful. Edge cases exist but are suitably rare.
else:
    def is_class_pure_python(cls: type) -> bool:
        '''
        `True` if the passed class is pure-Python _or_ `False` if this class
        is C-based (either builtin or defined by a C extension).
        '''

        return '__dict__' in dir(cls) or hasattr(cls, '__slots__') 
```

## 更多证明。更多布丁。

更多测试驱动的真实性：

```
>>> class PurePythonWithDict(object): pass
>>> class PurePythonWithSlots(object): __slots__ = ()
>>> is_class_pure_python(PurePythonWithDict)
True
>>> is_class_pure_python(PurePythonWithSlots)
True
>>> is_class_pure_python(int)
False
>>> is_class_pure_python(list)
False
>>> import numpy
>>> is_class_pure_python(numpy.ndarray)
False 
```

## 这就是她写的

为了一般性，让我们将上面定义的低级函数统一为两个高级函数，支持所有可能的 Python 解释器下的所有可能类型：

```
def is_object_pure_python(obj: object) -> bool:
   '''
   `True` if the passed object is either a pure-Python class or instance of
   such a class _or_ `False` if this object is either a C-based class
   (builtin or defined by a C extension) or instance of such a class.
   '''

   if isinstance(obj, type):
       return is_class_pure_python(obj)
   else:
       return is_instance_pure_python(obj)

def is_object_c_based(obj: object) -> bool:
   '''
   `True` if the passed object is either a C-based class (builtin or
   defined by a C extension) or instance of such a class _or_ `False` if this
   object is either a pure-Python class or instance of such a class.
   '''

   return not is_object_pure_python(obj) 
```

*看哪！*纯 Python。*

# clock - CPU不调用IRQ0？

> ID：12233104
> 
> 赞同：0
> 
> 时间：2012-09-02T02:59:35.547
> 
> 标签：clock, interrupt-handling, irq

我正在编写一个操作系统并尝试使用 PIT。我编写了一个处理程序，并为 IRQ0（中断 32）编写了一个 ISR 条目。处理程序根本没有被调用。我很确定我没有正确输入 ISR。有什么建议么？这是我的 ASM 代码

```
mov dword EAX, irq_common_stub
        mov byte [_NATIVE_IDT_Contents + 0x100], AL
        mov byte [_NATIVE_IDT_Contents + 0x101], AH
        mov byte [_NATIVE_IDT_Contents + 0x102], 0x8
        mov byte [_NATIVE_IDT_Contents + 0x105], 0x8E
        shr dword EAX, 0x10
        mov byte [_NATIVE_IDT_Contents + 0x106], AL
        mov byte [_NATIVE_IDT_Contents + 0x107], AH 
```

我初始化 PIT 的代码是

```
 public static void PIT_Init(uint frequency)
    {
        uint divisor = 1193180 / frequency;
        GruntyOS.IO.Ports.Outb(0x43, 0x36);
        byte l = (byte)(divisor & 0xFF);
        byte h = (byte)((divisor >> 8) & 0xFF);
        GruntyOS.IO.Ports.Outb(0x40, l);
        GruntyOS.IO.Ports.Outb(0x40, h);
    } 
```

处理程序是

```
public static void HandlePIT()
    {
        GruntyOS.IO.Ports.Outb(0xA0, 0x20);
        GruntyOS.IO.Ports.Outb(0x20, 0x20);

        print("Tick: " + Tick.ToString());
        Tick++;
    } 
```

哪个被称为

```
irq_common_stub:
pusha                  

mov ax, ds              
push eax                 

mov ax, 0x10 
mov ds, ax
mov es, ax
mov fs, ax
mov gs, ax

call System_Void__GruntyOS_Entry_HandlePIT__

pop ebx       
mov ds, bx
mov es, bx
mov fs, bx
mov gs, bx

popa                  
add esp, 8     
sti
iret 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T09:22:34.197

也许这可能会有所帮助。它是一个简单的内核，能够处理 IRQ 和异常。

[http://www.osdever.net/bkerndev/Docs/irqs.htm](http://www.osdever.net/bkerndev/Docs/irqs.htm)

[http://www.ni.com/white-paper/2874/en](http://www.ni.com/white-paper/2874/en)

# image - 如何在终端中显示图像？

> ID：12233105
> 
> 赞同：13
> 
> 时间：2012-09-02T02:59:53.453
> 
> 标签：image, terminal, image-conversion, ascii-art

有没有什么实用程序可以用来将图像转换为 ASCII，然后在我的终端上打印出来？我找了一个，但似乎找不到。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-02T03:03:20.673

一个名为[cacaview](http://linux.die.net/man/1/cacaview)的程序允许您执行此操作。

它是交互式的，允许您平移、缩放和更改显示模式。

![Cacaview 示例](../Images/bb6a43222e6979d045043aa862f6de2f.png)

（[全尺寸图片](https://i.stack.imgur.com/zwrLb.png)）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-02T03:05:46.760

在询问之前尝试使用 Google-Ninja！我找到[了 cacaview](http://linux.die.net/man/1/cacaview)和[aview](http://aa-project.sourceforge.net/aview/)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-20T15:23:36.573

更简单地说，您可以使用`img2txt`caca 库（`cacaview`是一个图像浏览器并打开一个新窗口，我猜这不是这里所要求的）；

例如 ：

[![截屏](../Images/2bcabea38594c321d3f197c56b3b303e.png)](https://i.stack.imgur.com/NqDFv.png)

在 macOS 上，您可以使用 homebrew ：

```
$ brew reinstall libcaca --with-imlib2 
```

（imlib 用于从不同格式转换）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-02T03:04:48.370

这是一个执行此操作的实用程序（带有源代码）：

[http://www.codeproject.com/Articles/10949/ASCII-Art-Generator](http://www.codeproject.com/Articles/10949/ASCII-Art-Generator)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-25T07:26:01.823

[https://github.com/ichinaski/pxl](https://github.com/ichinaski/pxl)`pxl`上提供了一个高质量的快速独立转换实用程序（前提是您有 256 色终端）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-11-24T08:25:38.417

# 查法

我喜欢用`chafa`.

```
chafa example.png 
```

[![截屏](../Images/4ddf7a672ee87c7154b8370248fdf1fb.png)](https://i.stack.imgur.com/Gj3XW.png)

您可以从[Chafa 的网站](https://hpjansson.org/chafa/download/)或您喜欢的包管理器（如 APT）下载 Chafa：

```
sudo apt install chafa 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-16T07:49:47.313

另一种选择是使用 Ipython notebook：它非常擅长做你要求的事情。

对于 bash：您必须在命令前加上一个 bang。对于图像：您可以使用 ipython 的[丰富显示系统](http://nbviewer.ipython.org/github/ipython/ipython/blob/1.x/examples/notebooks/Part%205%20-%20Rich%20Display%20System.ipynb)。

结果截图：

![结果截图](../Images/9cb3b2456f702a7f921126beed1f604e.png)

[这篇文章](http://blog.invibe.net/posts/14-10-16-how-can-i-display-an-image-in-the-terminal.html)中的完整答案。

# android - 真的没有得到 setResult 和 onActivityResult

> ID：12233106
> 
> 赞同：4
> 
> 时间：2012-09-02T03:00:31.360
> 
> 标签：android, android-intent

好吧，我又来了。还在学习。现在我需要从 2 个活动中来回传递整数值。第一个活动将一个计数器值传递给第二个（跟踪玩家统计数据）。第二个活动能够将统计数据重置为零，从而将数字传回。但我就是无法理解它。这是我到目前为止所拥有的...

第一项活动（主要）：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.menu_settings:
            Intent i = new Intent(this, Options.class);
            Bundle counters = new Bundle();
            counters.putInt("plWin", plWin);
            counters.putInt("plLoss", plLoss);
            counters.putInt("plDraw", plDraw);
            i.putExtras(counters);
            startActivityForResult(i, ?);
            return true; 
```

请填写“？”

第二个活动（选项）：

```
public void onBackPressed() {
    super.onBackPressed();
    Intent i = new Intent();
    Bundle counters = new Bundle();
    counters.putInt("Wins", wins);
    counters.putInt("Losses", losses);
    counters.putInt("Draws", draws);
    i.putExtras(counters);
    setResult(?, i);
    finish();
} 
```

再次，无法弄清楚“？”。

回到我的第一个活动，我不知道接下来会发生什么：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data); 
```

很想弄清楚这一点。提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-02T03:09:32.593

这样做

```
startActivityForResult(i, 100); 
```

对于 setResult

```
setResult(RESULT_OK); 
```

您可以使用 setresult 来发送更高级的结果，例如

```
intent = new Intent();
intent.putExtra("key", "I am done");
setResult(1001, intent); 
```

并在 onActivityResult

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {    
   if(requestCode == 100)
   {
    String key = data.getStringExtra("key");
    if(resultcode == 1001 && key!= null && key.equals("I am done"){
       //do something
    }else{
       //do something else
    }

   }
} 
```

您不必使用 setResult，如果您只需要检查是否从活动返回，则不要设置它并且不要检查 onActivityResult

# c# - JavaScript表单提交不会触发提交按钮的asp服务器端点击功能

> ID：12233114
> 
> 赞同：0
> 
> 时间：2012-09-02T03:02:26.390
> 
> 标签：c#, javascript, asp.net

我使用事件侦听器来阻止我的 asp:button（提交）的操作，因为我想在实际提交之前使用 javascript 函数验证我的表单。

```
formInstance.addEventListener('submit', function (event) {
    event.preventDefault(); 
}, false); 
```

这是按钮：

```
<asp:Button ID="btnCreateForm" CssClass="submit-form button" runat="server" 
    Text="Save Form" OnClick="btnCreateForm_Click" 
        OnClientClick="Sharpforms.checkFormEntry()" /> 
```

被解雇的javascript：

```
checkFormEntry: function () {
    var formName = document.getElementById("txtFormName");

    if (formName.value.trim() == "") {
        alert("Please fill in a valid form name!");
        return false;
    }
    else {
        //formInstance.submit();
        return true;
    }
} 
```

显然，javascript submit() 确实提交了表单，因为页面正在重新加载，但我认识到它不再进入我的 ASP 端**btnCreateForm_Click**函数：

```
protected void btnCreateForm_Click(object sender, EventArgs e)
{
    System.Diagnostics.Debug.WriteLine("Test if the button has been clicked.");
} 
```

在评论我的表单事件侦听器以及 submit() 并尝试本地提交时，他毫无问题地进入了 click 函数。但是我无法在客户端检查我的表格。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T03:05:18.067

您必须将返回添加到 OnClientClick 事件。如果函数返回 true，则回发发生。如果函数返回 false，则回发被取消。

```
<asp:Button ID="btnCreateForm" CssClass="submit-form button" runat="server" 
    Text="Save Form" OnClick="btnCreateForm_Click" 
        OnClientClick="return Sharpforms.checkFormEntry()" /> 
```

此外，以这种方式执行此操作可以删除事件侦听器。

# python - yield_per 期间的 sqlalchemy 游标错误

> ID：12233115
> 
> 赞同：14
> 
> 时间：2012-09-02T03:02:38.423
> 
> 标签：python, sqlalchemy

我收到以下错误：

```
Traceback (most recent call last):
    main()
    for item in session.query(Item).yield_per(10):
    fetch = cursor.fetchmany(self._yield_per)
    self.cursor, self.context)
    l = self.process_rows(self._fetchmany_impl(size))
    row = self._fetchone_impl()
    self.__buffer_rows()
    self.__rowbuffer = collections.deque(self.cursor.fetchmany(size))
sqlalchemy.exc.ProgrammingError: (ProgrammingError) named cursor isn't valid anymore None None 
```

我怀疑调用 session.commit() 会干扰 .yield_per

```
sessionmaker_ = sessionmaker(autocommit=False, autoflush=False, bind=engine)
session = scoped_session(sessionmaker_)

def foo(item):
  # DO something to the item 
  session.add(item)
  session.commit()

def main():
  for item in session.query(Item).yield_per(5):
    foo(item) 
```

任何想法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-02T03:20:02.043

如果您没有从 DBAPI 游标中获取所有行，那么在该游标的连接上调用 commit() 通常是个坏主意。在这种情况下，psycopg2（我猜这是您使用的 DBAPI）无法在事务中维护命名游标的状态（当您需要服务器缓冲行时它使用的状态）。

您绝对应该在这里更改的一件事是您提交的频率。理想情况下，在整个操作完成之前，您不会提交任何内容。会话将根据需要自动刷新数据（好吧，如果您打开了自动刷新，我建议这样做），或者您可以调用 flush() 来强制它，但这与实际提交事务无关。所有这些对 commit() 的调用都会使操作的效率大大降低，当然它会妨碍其他结果集的游标。如果您只是在循环的末尾放置一个 commit()，那么您将同时解决这两个问题。

如果您仍然需要在整个操作完成之前提交，或者即使不需要，我更倾向于分块工作而不是使用相当脆弱的 yield_per()。[http://www.sqlalchemy.org/trac/wiki/UsageRecipes/WindowedRangeQuery](http://www.sqlalchemy.org/trac/wiki/UsageRecipes/WindowedRangeQuery)上的配方显示了一种方法。尽管 psycopg2 给了我们更多的余地，但 DBAPI 不太适合处理非常大的结果集。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-04T09:35:21.857

上面的问题可以通过另外一个会话来解决

```
sessionmaker_ = sessionmaker(autocommit=False, autoflush=False, bind=engine)
session = scoped_session(sessionmaker_)
cool_session = scoped_session(sessionmaker_)

def foo(item):
   # DO something to the item 
   session.add(item)
   session.commit()

def main():
    for item in cool_session.query(Item).yield_per(5):
    item = session.merge(item, load=False)
    foo(item) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-16T11:33:32.717

另一种选择是在进入 sqlalchemy 版本时使用游标选项“WITH HOLD”： [https ://bitbucket.org/zzzeek/sqlalchemy/issues/3667/support-postgresqls-with-hold-cursor](https://bitbucket.org/zzzeek/sqlalchemy/issues/3667/support-postgresqls-with-hold-cursor)

请注意 Scott 提到的关于 Postgres 在首次提交时实现游标的警告。

# sql - SQL将多个“计数”加在一起

> ID：12233118
> 
> 赞同：-1
> 
> 时间：2012-09-02T03:03:14.230
> 
> 标签：sql

我正在尝试将计数相加并输出具有最大计数的计数。

问题是：展示获得奖牌最多的人（金牌为位置 = 1，银牌为位置 = 2，铜牌为位置 = 3）

将所有奖牌加在一起，显示奖牌最多的人

下面是我想过的代码（显然行不通）

有任何想法吗？

```
Select cm.Givenname, cm.Familyname, count(*)
FROM Competitors cm JOIN Results re ON cm.competitornum = re.competitornum
WHERE re.place between '1' and '3'
group by cm.Givenname, cm.Familyname
having max (count(re.place = 1) + count(re.place = 2) + count(re.place = 3)) 
```

抱歉忘记添加不允许使用 ORDER BY。

表中的一些数据

竞争对手表

```
Competitornum   GivenName   Familyname  gender  Dateofbirth Countrycode
219153          Imri        Daniel      Male    1988-02-02  Aus 
```

结果表

```
Eventid Competitornum   Place   Lane    Elapsedtime
SWM111  219153          1       2       20          02 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T03:09:37.863

根据您的描述，听起来您只需要在总奖牌数中选择“顶级”个人。为了做到这一点，你会写这样的东西。

```
Select top 1 cm.Givenname, cm.Familyname, count(*)
FROM Competitors cm JOIN Results re ON cm.competitornum = re.competitornum
WHERE re.place between '1' and '3'
group by cm.Givenname, cm.Familyname
order by count(*) desc 
```

在不使用 order by 的情况下，您还有其他几个选项，尽管我忽略了 sqlfire 可能使用的任何语法特性。

您可以确定任何用户的最大奖牌数，然后只选择具有该数的竞争对手。您可以通过将其保存到变量或使用子查询来做到这一点。

```
Select cm.Givenname, cm.Familyname, count(*)
FROM Competitors cm JOIN Results re ON cm.competitornum = re.competitornum
WHERE re.place between '1' and '3'
group by cm.Givenname, cm.Familyname
having count(*) = (    
    Select max( count(*) )
    FROM Competitors cm JOIN Results re ON cm.competitornum = re.competitornum
    WHERE re.place between '1' and '3'
    group by cm.Givenname, cm.Familyname
) 
```

这里只是一个注释。第二种方法效率非常低，因为我们重新计算父表中每一行的最大奖牌数。如果 sqlfire 支持它，那么提前计算它，将它存储在一个变量中并在 HAVING 子句中使用它会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T03:11:56.477

您按 分组`re.place`，这是您想要的吗？您想要每个...的结果？:)

[编辑] 很好，现在已经解决了，你就快到了 :)

在这种情况下不需要具有，您只需将 a 添加`count(re.EventID)`到您的选择中并使用`max(that_count_column)`.

# android - 为验证视图组中的子项而侦听的事件

> ID：12233123
> 
> 赞同：1
> 
> 时间：2012-09-02T03:05:12.183
> 
> 标签：android, android-layout, android-widget, android-view

我正在为 android 构建一个向导库，从而向向导添加布局（包含其他视图）。

我需要弄清楚父 ViewGroup 可以在其子级上监听的某种事件，以便可以验证这些子级。验证后，向导将允许用户移动到下一页。

我试过监听 MotionEvent 类型的 ACTION_UP。不幸的是，在 ViewGroup 上听这个会在孩子的状态改变之前触发（换句话说，它在孩子之前被调用，所以我不能从孩子知道这一点中受益）。

任何建议都会非常受欢迎。

提前致谢。

**更新**我所说的验证是这样的：考虑一个有两页的向导

```
+-----------+-----------+
|Page 1     |Page2      |
|------     |-----      |
|Radio Bttn |           |
|EditView   |           |
|           |           |
|           |           |
|       next|           |
+-----------+-----------+ 
```

每个页面的下一个按钮以禁用状态开始。在用户按下第 1 页的下一个按钮进入第 2 页之前，第 1 页的单选按钮和编辑视图都必须为非空。所以我需要一种通用的方法来确定第 1 页的孩子何时改变了他们的状态。我的想法是，当孩子的状态发生变化时，我将触发一个有人将通过接口订阅的事件。该事件将与“ValidateView”类似，然后用户将通过自己的业务逻辑以编程方式确定是否可以进入下一页。发生这种情况时，将启用第 1 页的下一个按钮。请注意，第 1 页可以是任何通用视图组，并且可能包含除我所呈现的视图之外的其他视图，这就是我不想在子级上添加侦听器的原因，

# java - 已安装应用程序的执行次数

> ID：12233129
> 
> 赞同：4
> 
> 时间：2012-09-02T03:05:54.073
> 
> 标签：java, android

我有兴趣在 android 中获取已安装软件包的值。我试图找出已经安装的软件包执行了多少次（关闭和打开）的值。我知道我可以通过 sharepreferences 为我的应用程序执行此操作，但如何处理已经存在的包？我已经有了使用 PackageManager 安装的软件包列表。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T04:07:25.103

PackageInfo 类，可以使用 PackageManager 为 Packages 检索，您可以为您提供有关首次安装时间和上次更新时间的信息。但是似乎没有任何方法可以知道它启动了多少次，等等。我什至不确定系统是否会跟踪这些信息。查看[http://developer.android.com/reference/android/content/pm/PackageInfo.html](http://developer.android.com/reference/android/content/pm/PackageInfo.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T03:14:21.760

```
Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);
PackageManager packageManager = mContext.getPackageManager(); 
List<ResolveInfo> apps = packageManager.queryIntentActivities(mainIntent, 0); 
```

尝试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T11:43:04.650

```
 PackageManager manager = getPackageManager();

                Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
                mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);

                final List<ResolveInfo> apps = manager.queryIntentActivities(mainIntent, 0);
                Collections.sort(apps, new ResolveInfo.DisplayNameComparator(manager));

                if (apps != null) {
                    final int count = apps.size();

                    if (mApplications == null) {
                        mApplications = new ArrayList<ApplicationInfo>(count);
                    }
    }
for (int i = 0; i < count; i++) {
                  ApplicationInfo application = new ApplicationInfo();
                ResolveInfo info = apps.get(DEFAULT_KEYS_SEARCH_LOCAL);

                application.title = info.loadLabel(manager);
                application.setActivity(new ComponentName(
                        info.activityInfo.applicationInfo.packageName,
                        info.activityInfo.name),
                        Intent.FLAG_ACTIVITY_NEW_TASK
                        | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
                application.icon = info.activityInfo.loadIcon(manager);

              //  mApplications.add(application);

        } 
```

这将为您提供已安装的所有应用程序的计数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T05:49:54.910

我认为这在常规应用程序中是不可能的。虽然如果你有 root 访问权限，你可以执行

```
dumpsys usagestats 
```

并解析输出。

或者您可以使用`Usagestats Service`已经进行跟踪的。但是，您再次需要 root 访问权限。

# php - PHP - json_decode() 在使用 echo 时返回 null

> ID：12233130
> 
> 赞同：1
> 
> 时间：2012-09-02T03:05:59.877
> 
> 标签：php, json, echo, decode, var-dump

我正在使用以下脚本来解码 json。尽管 var_dump($obj) 返回结果（类似于示例 #1 中的一个），但 echo 行不返回任何结果，就好像 $obj 为空一样。

```
<?php

$clientJSONObject = file_get_contents('php://input');
$obj = json_decode($clientJSONObject, TRUE);
var_dump($obj); // working.
echo $obj; // returns nothing.
echo $obj["carrier"]; // returns nothing.

?> 
```

var_dump 输出：

```
array(2) {
  ["carrier"]=>
  string(8) "Etisalat"
  ["userLanguage"]=>
  string(2) "ar"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T03:42:22.700

您不能像这样回显对象属性，您必须使用 -> 运算符

这是您正在寻找的类似事物的示例

回声 $obj->{"objectname"}

将打印 json 解码对象的属性名称。而且我可以在您的代码中看到另一个错误。你在大写中给出了 true 这就是 Jsondecode 函数没有给你一个数组它仍然抛出一个对象的原因

# ios - 创建 iOS 分发证书窗口 - Apple 配置门户

> ID：12233131
> 
> 赞同：3
> 
> 时间：2012-09-02T03:06:32.190
> 
> 标签：ios, air, portal

我是一名机器人开发人员，使用 PC 使用 as3 air for android。我刚刚购买了一个苹果帐户来导出 iphone。但是我被困在苹果制作的供应门户上。如何在不购买 Mac 的情况下创建这些密钥之一？

我包括了我的屏幕截图。

我尝试上传一些配置文件，但它只是刷新，没有警告出了什么问题。只是一片空白。

谢谢你的帮助！

![希望苹果没有把事情搞得那么复杂。](../Images/fa6e1b016c0e768e3c73eaa58e3ac5ef.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-02T15:46:26.177

在 Windows 中创建分发证书：

1 -`call openssl genrsa -out ios_distribution.key 2048`

2 -`call openssl req -new -key ios_distribution.key -out CertificateSigningRequest.certSigningRequest -subj "/emailAddress=%YOUR_EMAIL%, CN=%YOUR_NAME%, C=%YOUR_COUNTRY_CODE_EG_US%"`

3 - 在以下位置上传新创建的 CertificateSigningRequest.certSigningRequest：[https ://developer.apple.com/ios/manage/certificates/team/distribute.action](https://developer.apple.com/ios/manage/certificates/team/distribute.action)

** 请注意，如果您的 certSigningRequest 格式错误，或者您尝试上传错误的文件，developer.apple.com 页面将像您看到的那样简单地刷新而没有错误消息。我相信这在 Windows 和 Mac 上都会发生。

4 - 从 developer.apple.com 下载 ios_distribution.cer

5 - 使用新证书和您的应用在 developer.apple.com 创建并下载 YourApp_AppStore.mobileprovision

6 -`call openssl x509 -in ios_distribution.cer -inform DER -out ios_distribution.pem -outform PEM`

7 -`call openssl pkcs12 -export -inkey ios_distribution.key -in ios_distribution.pem -out ios_distribution.p12 -passout pass:%YOUR_PASSWORD%`

8 -`call adt -package -target ipa-app-store -storetype pkcs12 -keystore "ios_distribution.p12" -storepass %YOUR_PASSWORD% -provisioning-profile YourApp_AppStore.mobileprovision "fileForAppstore.ipa" "application.xml" -C bin .`

9 - 在 itunesconnect.apple.com 上将您的应用程序标记为准备上传二进制文件

10 - 使用应用程序加载器上传 fileForAppstore.ipa。这是需要 Mac 的唯一步骤！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-19T01:12:02.020

我对这一切也很陌生，我花了好几个小时才终于让它工作——我想我会为其他没有经验的人分享我在此过程中遇到的一些困难。莎拉的方法效果很好（嗨莎拉 - 我是一个超级粉丝，顺便说一句）但是这里有一些额外的技巧可以减少像我这样的绿色人需要多长时间的时间：

在此处下载 openSSL：http://slproweb.com/products/Win32OpenSSL.html [我](http://slproweb.com/products/Win32OpenSSL.html) 必须从此处下载并安装 Microsoft Visual C++ 2008 Redistributable Package (x64)：http: [//www.microsoft.com/en-us/download /details.aspx?id=15336](http://www.microsoft.com/en-us/download/details.aspx?id=15336)在安装 openSSL 之前。

安装 C++ THEN openssl 后，确保以管理员身份运行 ssl（右键单击以获取选项）以避免丢失 .cnf 文件的问题。

我通过运行 \OpenSSL-Win32\bin\openSSL.exe 运行了第 1 步和第 2 步中的命令，并省略了上面 Sarah 代码的“调用 openSSL”部分。

在第 3 步之前，我必须下载并安装中间证书“全球开发者关系证书颁发机构”，该证书位于申请新开发者证书时的首页底部。

一旦我下载了证书并制作并下载了配置证书，我将它们复制到 \OpenSSL-Win32\bin （不确定这是否有必要）

然后我继续在 openssl 中使用 Sarah 的代码（所以仍然不包括 "call openssl" ）直到第 7 步。我这样做了：

```
pkcs12 -export -inkey ios_development.key -in ios_development.pem -out iphone_dev.p12 
```

然后被提示定义密码，我稍后需要使用 .p12 生成测试版本（在我的情况下，在 Win8 机器上使用 Flash Pro 构建 iOS7 iPad Mini）

因为我使用的是 Flash Pro，所以我不需要第 8 步到第 10 步，而且我的应用程序还没有存储阶段。

我敢肯定，对于你们大多数人来说，我已经大大简化了其中的一些，但对于像我这样的新手程序员来说，这些额外的信息会节省很多浪费的时间。

研究我遇到的问题、更新我的 iTunes 和 iOS、解决我在 Apple Dev 站点和 openSSL 中遇到的问题的整个过程花了我一整天的时间——但我现在终于让我的测试版本运行起来了在 iOS 设备上。现在，是伏特加的时候了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T13:20:15.273

我没有尝试过，因为我没有 PC，但请查看以下文章： [http ://help.adobe.com/en_US/air/build/WS5b3ccc516d4fbf351e63e3d118666ade46-7ff0.html#WSfffb011ac560372f284e44b012cd1e700c0-8000](http://help.adobe.com/en_US/air/build/WS5b3ccc516d4fbf351e63e3d118666ade46-7ff0.html#WSfffb011ac560372f284e44b012cd1e700c0-8000)

特别是最后几段应该对您有所帮助。

# java - Java - 休眠异常 - 无法映射反馈 [来自反馈]

> ID：12233140
> 
> 赞同：0
> 
> 时间：2012-09-02T03:11:22.250
> 
> 标签：java, sql, spring, hibernate, sybase

我是休眠的新手。最近，我正在尝试使用 Spring 和 Hibernate 将我的 UI 与数据库连接起来的简单示例。

我能够使用 REST 成功调用一种方法来通过我的控制器、服务等获取数据。但是每当我运行应用程序时，我都会遇到以下错误。这里的“**反馈**”是数据库中表的名称以及我的 Pojo Java 类的同名。

注意：为表和 Java 类赋予不同的名称也会导致相同的错误。

> org.springframework.orm.hibernate3.HibernateQueryException：反馈未映射[来自反馈]；嵌套异常是 org.hibernate.hql.ast.QuerySyntaxException：反馈未映射 [来自反馈]

Java Pojo：-

```
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="Feedback")
public class Feedback {
    private int id;
    private String title;
    private String content;
    private String name;

    @Id
    @GeneratedValue
    @Column(name="id")
    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }

    @Column(name="title", nullable=false)
    public String getTitle() {
        return title;
    }
    public void setTitle(String title) {
        this.title = title;
    }

    @Column(name="content", nullable=false)
    public String getContent() {
        return content;
    }
    public void setContent(String content) {
        this.content = content;
    }

    @Column(name="name", nullable=false)
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    @Override
    public String toString() {
        return "Feedback [id=" + id + ", title=" + title + ", content="
                + content + ", name=" + name + "]";
    }
} 
```

反馈道：-

```
@Repository
public class FeedbackDAO implements IFeedbackDAO {

    private HibernateTemplate hibernateTemplate;

    public HibernateTemplate getHibernateTemplate() {
        return hibernateTemplate;
    }

    @Autowired
    public void setSessionFactory(SessionFactory sessionFactory) {
        hibernateTemplate = new HibernateTemplate(sessionFactory);
    }

    @SuppressWarnings("unchecked")
    public List<Feedback> getFeedbackList() {

       // This line causes that error.
        return hibernateTemplate.find("from Feedback");

    }
       ...
       ...
} 
```

配置在`db-config.xml`

```
 <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory"><ref local="sessionFactory"/></property>
    </bean> 
```

是什么原因造成的？

我在这里错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T03:23:54.370

您可能错过了 sessionFactory 定义中的一件事。

```
<bean id="sessionFactory" ...>
    ...
    <property name="annotatedClasses">
        <list>
            <value><java package name here>.Feedback</value>
        </list>
    </property>
    ...
</bean> 
```

# java - 处理单击任意 Swing 组件

> ID：12233143
> 
> 赞同：1
> 
> 时间：2012-09-02T03:13:08.607
> 
> 标签：java, swing, click

有什么方法可以响应对不是 JButton 或类似的 Swing 组件的点击？JLabels、JTextAreas 等没有 addActionListener(...) 方法；还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T03:23:18.707

您可以使用鼠标侦听器。有关详细信息，请参阅[如何编写鼠标侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T03:24:02.597

添加一个`MouseListener`. 每个`Component`都有[`addMouseListener(MouseListener)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#addMouseListener%28java.awt.event.MouseListener%29)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T03:25:18.923

改用[MouseListerner](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseListener.html) _

寻找[Component.addMouseListener](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#addMouseListener%28java.awt.event.MouseListener%29)

# android - 使用 JDBC 从 Android 连接到 MySQL

> ID：12233145
> 
> 赞同：14
> 
> 时间：2012-09-02T03:13:13.700
> 
> 标签：android, mysql, jdbc

我使用以下代码从 Android连接`MySQL`。`localhost`它仅显示 catch 部分中给出的操作。不知道是不是连接问题。

```
package com.test1;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class Test1Activity extends Activity {
    /** Called when the activity is first created. */
    String str="new";
    static ResultSet rs;
    static PreparedStatement st;
    static Connection con;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        final   TextView tv=(TextView)findViewById(R.id.user);

        try
        {
            Class.forName("com.mysql.jdbc.Driver");
              con=DriverManager.getConnection("jdbc:mysql://10.0.2.2:8080/example","root","");
            st=con.prepareStatement("select * from country where id=1");
            rs=st.executeQuery();
             while(rs.next())
             {
             str=rs.getString(2);

             }

            tv.setText(str);
            setContentView(tv);
        }
        catch(Exception e)
        {
            tv.setText(str);
        }
    }
} 
```

当此代码执行时，它会在 avd 中显示“new”。

```
java.lang.management.ManagementFactory.getThreadMXBean, referenced from method com.mysql.jdbc.MysqlIO.appendDeadlockStatusInformation
Could not find class 'javax.naming.StringRefAddr', referenced from method com.mysql.jdbc.ConnectionPropertiesImpl$ConnectionProperty.storeTo
Could not find method javax.naming.Reference.get, referenced from method com.mysql.jdbc.ConnectionPropertiesImpl$ConnectionProperty.initializeFrom 
```

任何人都可以提出一些解决方案吗？并提前感谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-02T03:23:06.303

您无法从 Android 本地访问 MySQL 数据库。编辑：实际上您可能能够使用 JDBC，但不推荐（或可能不起作用？）...请参阅[Android JDBC not working: ClassNotFoundException on driver](https://stackoverflow.com/questions/7221620/android-jdbc-not-working-classnotfoundexception-on-driver/7221716#7221716)

看

[http://www.helloandroid.com/tutorials/connecting-mysql-database](http://www.helloandroid.com/tutorials/connecting-mysql-database)

[http://www.basic4ppc.com/forum/basic4android-getting-started-tutorials/8339-connect-android-mysql-database-tutorial.html](http://www.basic4ppc.com/forum/basic4android-getting-started-tutorials/8339-connect-android-mysql-database-tutorial.html)

> Android 无法直接连接到数据库服务器。因此，我们需要创建一个简单的 Web 服务，它将请求传递到数据库并返回响应。

[http://codeoncloud.blogspot.com/2012/03/android-mysql-client.html](http://codeoncloud.blogspot.com/2012/03/android-mysql-client.html)

对于大多数 [good] 用户来说，这可能没问题。但是想象一下，你遇到了一个黑客，他掌握了你的程序。我已经反编译了我自己的应用程序，而且我所看到的很可怕。如果他们将您的用户名/密码获取到您的数据库并造成严重破坏怎么办？坏的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-12T07:30:07.437

此代码永久运行！！！由diko（土耳其）创建

```
public void mysql() {

    try {
        Class.forName("com.mysql.jdbc.Driver");
    } catch (ClassNotFoundException e) {
        e.printStackTrace();

    }

    thrd1 = new Thread(new Runnable() {
        public void run() {
            while (!Thread.interrupted()) {
                try {
                    Thread.sleep(100);
                } catch (InterruptedException e1) {

                }
                if (con == null) {
                    try {
                        con = DriverManager.getConnection("jdbc:mysql://192.168.1.45:3306/deneme", "ali", "12345");

                    } catch (SQLException e) {
                        e.printStackTrace();
                        con = null;
                    }

                    if ((thrd2 != null) && (!thrd2.isAlive()))
                        thrd2.start();

                }
            }

        }
    });
    if ((thrd1 != null) && (!thrd1.isAlive())) thrd1.start();

    thrd2 = new Thread(new Runnable() {
        public void run() {
            while (!Thread.interrupted()) {

                if (con != null) {
                    try {
                     //   con = DriverManager.getConnection("jdbc:mysql://192.168.1.45:3306/deneme", "ali", "12345");
                        Statement st = con.createStatement();
                        String ali = "'fff'";
                        st.execute("INSERT INTO deneme (name) VALUES(" + ali + ")");
                      //  ResultSet rs = st.executeQuery("select * from deneme");
                      //  ResultSetMetaData rsmd = rs.getMetaData();
                      //  String result = new String();

                      //  while (rs.next()) {
                      //      result += rsmd.getColumnName(1) + ": " + rs.getInt(1) + "\n";
                     //       result += rsmd.getColumnName(2) + ": " + rs.getString(2) + "\n";

                     //   }

                    } catch (SQLException e) {
                        e.printStackTrace();
                        con = null;
                    }

                    try {
                        Thread.sleep(10);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                } else {
                    try {
                        Thread.sleep(300);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
            }
        }

    });

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-06T16:00:54.653

如果您需要将应用程序连接到服务器，您可以通过 PHP/MySQL 和 JSON [http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/) .Mysql连接代码应该在 AsynTask 类中。不要在主线程中运行它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T03:43:12.870

您想将数据库保存在移动设备上吗？使用 sqlite 而不是 mysql。

如果想法是将数据库保留在服务器上并从移动设备访问。使用网络服务来获取/修改数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T14:01:04.103

另一种方法是使用使用三层架构的虚拟 JDBC 驱动程序：您的 JDBC 代码通过 HTTP 发送到远程 Servlet，该 Servlet 在将 JDBC 代码（配置和安全性）传递给 MySql JDBC 驱动程序之前对其进行过滤。结果通过 HTTP 发回给您。有一些免费软件使用这种技术。只需谷歌“基于 HTTP 的 Android JDBC 驱动程序”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-20T02:45:47.217

尝试在 gradle 文件中将 targetSdkVersion 更改为 8

```
targetSdkVersion 8 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-09-09T05:18:25.740

```
public void testDB() {
        TextView tv = (TextView) this.findViewById(R.id.tv_data);
        try {

            Class.forName("com.mysql.jdbc.Driver");

            // perfect

            // localhost

            /*
             * Connection con = DriverManager .getConnection(
             * "jdbc:mysql://192.168.1.5:3306/databasename?user=root&password=123"
             * );
             */

            // online testing

            Connection con = DriverManager
                    .getConnection("jdbc:mysql://173.5.128.104:3306/vokyak_heyou?user=viowryk_hiweser&password=123");

            String result = "Database connection success\n";
            Statement st = con.createStatement();

            ResultSet rs = st.executeQuery("select * from tablename ");
            ResultSetMetaData rsmd = rs.getMetaData();

            while (rs.next()) {

                result += rsmd.getColumnName(1) + ": " + rs.getString(1) + "\n";

            }
            tv.setText(result);
        } catch (Exception e) {
            e.printStackTrace();
            tv.setText(e.toString());
        }

    } 
```

# python - Google App Engine 数据存储区中的 Python 父子关系

> ID：12233151
> 
> 赞同：0
> 
> 时间：2012-09-02T03:15:48.770
> 
> 标签：python, google-app-engine, inheritance, data-modeling

我正在尝试使用 Python 在 Google App Engine 中建模父层次关系。例如，我想为水果建模。

所以根是果子，然后果子是藤本植物，树本植物。那么例如tree-based的孩子会是apple、pear、banana等。然后作为apple的孩子，我想添加macintosh、golden delicious、granny smith等。

我试图找出最简单的建模方法，以便我可以将另一个类型为篮子的实体放入一个水果类型的实体或史密斯奶奶类型的实体。

任何帮助将不胜感激！

谢谢乔恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T22:18:41.663

您所说的是继承层次结构，但 App Engine 键提供对象层次结构。前者的例子是“香蕉是水果”，而后者的例子是“汽车有方向盘”。在这里使用父属性是错误的；你想使用 PolyModel。

# php - 什么时候应该重新生成会话 ID？

> ID：12233152
> 
> 赞同：1
> 
> 时间：2012-09-02T03:16:33.970
> 
> 标签：php, security

我知道使用 session_regenerate_id() 是个好习惯。我听说有些人说它应该被广泛使用，而另一些人说它应该只用于登录/注销。后者有什么理由吗？运行该函数是否是一个昂贵的过程，在不需要时应该避免吗？

**编辑**：最重要的是，我真的很想知道你回答的理由。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T03:18:29.223

会话 ID 应在登录、注销或获得管理权限后重新生成。这个[Regenerate PHP session id](http://www.xqus.com/regenerate-php-session-id)也很有帮助

# compiler-construction - 通常如何为闭包实现引用环境？

> ID：12233155
> 
> 赞同：3
> 
> 时间：2012-09-02T03:18:09.953
> 
> 标签：compiler-construction, programming-languages, closures

假设我有一个具有深度绑定的静态/词法范围语言，并且我创建了一个闭包。闭包将包括我想要执行的语句以及所谓的引用环境，或者引用[这篇文章](https://stackoverflow.com/questions/3043481/referencing-environment-and-scope)，可以使用的变量集合。

这个引用环境在实现方面实际上看起来像什么？我最近在阅读有关 ObjectiveC 块的实现的内容，作者建议在幕后您可以获得堆栈上所有变量的副本以及对堆对象的所有引用。该解释声称您在创建闭包时获得了引用环境的“快照”。

1.  或多或少会发生这种情况，还是我误读了？
2.  是否采取任何措施来“冻结”堆对象的单独副本，或者假设如果它们在闭包创建和闭包执行之间被修改，闭包将不再在对象的原始版本上运行？
3.  如果确实进行了复制，那么在可能想要创建大量闭包并将它们存储在某处的情况下是否有内存使用注意事项？

我认为对其中一些概念的误解可能会导致棘手的问题，例如 Eric Lippert 在[这篇博](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)文中提到的问题。这很有趣，因为您会认为保留对在调用闭包时可能已经消失的值类型的引用是没有意义的，但我猜在 C# 中编译器会找出变量稍后需要并将其放入堆中。

似乎在大多数内存管理的语言中，一切都是引用，因此 ObjectiveC 是一个有点独特的情况，必须处理复制堆栈上的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T21:28:05.030

这是一个类似伪javascript语法的运行示例。

```
function f(x) {
  var y = ...;
  function g(z) {
    function h(w) {
      .... y, z, w ....
    }
    .... x, h ....
  }
  .... x, g ....
} 
```

一种表示是环境的链接链。也就是说，闭包由代码指针、一些槽和对封闭闭包或顶级环境的引用组成。在这个表示中，

```
f = [<code>, <top-level-env>]
g = [<code>, f, x, y]
h = [<code>, g, z] 
```

除了有时最好让每个函数都直接引用顶级环境，因为它经常使用：

```
f = [<code>, <top-level-env>]
g = [<code>, <top-level-env>, f, x, y]
h = [<code>, <top-level-env>, g, z] 
```

（也有其他变化。）

这种表示的一个优点是您可以将可变变量直接存储在闭包中。（好吧，也许，取决于你如何表示函数激活。）如果你有深度嵌套的闭包，一个缺点是一些变量可能需要多次跳转才能到达。另一个缺点是，如果一个闭包比它的父闭包寿命更长（例如，`g`returns `h`），那么这种表示可能会阻止 GC 收集大部分或什至完全不可达的环境帧。

另一种表示是“平面闭包”：每个闭包都包含一个代码指针和所有代码自由变量的插槽。

```
g = [<code>, x, y]
h = [<code>, y, z] 
```

这种表示修复了空间/GC问题；noclosure 将另一个闭包固定在内存中。另一方面，自由变量槽被复制而不是共享，所以如果有一个带有许多自由变量的嵌套闭包——或者嵌套闭包的许多实例——整体内存使用可能会更高。此外，这种表示通常需要存储可变变量以进行堆分配（但仅适用于实际发生突变的变量，并且仅在无法自动重写突变时）。

还有混合方法。例如，您可能有大部分是扁平的闭包，但会特别对待顶级环境：

```
g = [<code>, <top-level-env>, x, y] 
```

或者你可能有一个“足够聪明”（或至少“足够雄心勃勃”）的编译器，它试图根据自由变量的数量、嵌套深度等在表示之间进行选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T06:54:58.963

在 Smalltalk 中，闭包可以保存对“外部上下文”的引用。外部上下文通常是创建闭包的方法的堆栈帧，但对于嵌套闭包，它可能是另一个闭包。

持有对外部上下文的引用的闭包是昂贵的，因为（我猜）它们会阻止相应的堆栈被垃圾收集。因此，闭包仅在真正需要时才引用外部上下文：

*干净的闭包*：不引用任何本地内容的闭包。他们不需要引用外部上下文。

例如`[ Transcript show: 'something' ]`

*复制闭包*：引用变量的闭包在创建闭包后不会更改。创建闭包时的变量值被复制到闭包本身中。然后，不需要保留对外部上下文的引用。例如

> | 列表 |
> 列表：= OrderedCollection 新。
> 1 到：5 做：[ :i | 列表添加：我]。

*全闭包*：保持对外部上下文的引用的闭包。例如

> | 柜台 |
> 计数器 := 0。1
> 到：5 做：[ :i | 计数器：= 计数器 + 1]。

如果在创建闭包后关闭的变量发生了变异，则需要完全闭包，但对于*非本地返回*也是如此。关于非本地退货，您可能会喜欢[Neal Gafter 的这篇博文](http://gafter.blogspot.ch/2006/08/tennents-correspondence-principle-and.html)。

值得一读的还有 Brian Goetz 的关于即将到来的 JDK 7 中的闭包[的 Lambda 状态](http://cr.openjdk.java.net/~briangoetz/lambda/lambda-state-4.html)。除此之外，我发现关于为什么他们将坚持使用 Java 限制以仅捕获*最终的最终*变量并禁止捕获可变局部变量的讨论很有趣。将不支持上述完全关闭的示例。他们声称的论点是它主要是连环成语。

# ruby - 在 Ruby 中使用 split 函数时的答案差异

> ID：12233158
> 
> 赞同：4
> 
> 时间：2012-09-02T03:18:17.690
> 
> 标签：ruby, regex, split

给定以下输入：

```
line1 = "Hey | Hello | Good | Morning"
line2 = "Hey , Hello , Good , Morning"
file1=length1=name1=title1=nil 
```

使用 ',' 来分割字符串，如下所示：

```
file1, length1, name1, title1 = line2.split(/,\s*/) 
```

我得到以下输出：

```
puts file1,length1,name1,title1

>Hey
>Hello
>Good
>Morning 
```

但是，使用“|” 拆分字符串我收到不同的输出：

```
file1, length1, name1, title1 = line2.split(/|\s*/)
puts file1,length1,name1,title1

>H
>e
>y 
```

除了分隔符号（第一种情况下的逗号和第二种情况下的管道）之外，两个字符串都是相同的。我使用的 split 函数的格式也是相同的，当然，除了分隔符。是什么导致了这种变化？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T03:25:54.763

问题是因为`|`在正则表达式中有 OR 的含义。如果你想要文字字符，那么你需要转义它`\|`。所以正确的正则表达式应该是`/\|\s*/`

* * *

目前，正则表达式`/|\s*/`表示空字符串或一系列空白字符。由于在 OR 中首先指定了空字符串，因此正则表达式引擎将在每个字符处分解字符串（您可以想象字符之间有一个空字符串）。如果将其交换为`/\s*|/`，则在可能的情况下，空格将优先于空字符串，并且拆分后令牌列表中将没有空格。

# javascript - 如何避免以下 javascript 代码中的“使用数组文字表示法”jslint 错误

> ID：12233161
> 
> 赞同：2
> 
> 时间：2012-09-02T03:18:49.083
> 
> 标签：javascript, jslint

> **可能重复：**
> [var x = new Array(); 有什么问题？](https://stackoverflow.com/questions/885156/whats-wrong-with-var-x-new-array)

```
if (!Number.prototype.toZeroPaddedString) {
  Number.prototype.toZeroPaddedString = function (count) {
    "use strict";
    var str = this.toString();
    return (new Array(count + 1 - str.length)).join('0') + str;
  };
} 
```

我希望我的代码符合 jsLint 标准，但是，鉴于我想要做的事情，我无法想象如何摆脱这个错误。

有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T03:22:47.913

数组文字表示法是使用的替代方法，`new Array()`因为 Crockford（理所当然地）不喜欢该`new`关键字。符号 is `[]`，就像字面符号`new Object()`is一样`{}`。为了使数组的长度符合要求，您可以`.length`在数组上进行设置。

```
return (new Array(count + 1 - str.length)).join('0') + str; 
```

到：

```
var arr = [];
arr.length = count + 1 - str.length;
return arr​.join('0') + str; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T03:38:47.257

试试这个：

```
if (!Number.prototype.toZeroPaddedString) {
  Number.prototype.toZeroPaddedString = function (count) {
    "use strict";
    var str = this.toString();
    var ary = [];
    ary.length = count + 1 - str.length;
    return ary.join('0') + str;
  };
} 
```

# css - CSS宽度x小于宽度？

> ID：12233166
> 
> 赞同：1
> 
> 时间：2012-09-02T03:20:00.903
> 
> 标签：css, width, screen

我想要一个位于页面顶部中心的导航栏，并且我希望宽度比屏幕宽度小 80 像素。有没有办法用纯 CSS 来做到这一点，没有 javascript？我以前见过这样做，但当时我没有费心去检查源代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T03:22:27.927

只需在导航栏 div 上使用`margin-left: 40px`和。`margin-right: 40px`

样本：

```
<html>
  <head></head>
  <body style='padding: 0; margin: 0;'>
    <div style='margin: 0 40px 0 40px; background-color:red;'>CONTENT YAY.</div>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-17T14:21:34.487

我知道这是一个非常古老的问题，但如果我现在必须这样做，我会使用`vh`(viewport height) 和`vw`(viewport width) 单位。它们类似于百分比单位，但基于视口大小。

`width: 80vw`

将容器宽度设置**为视口**宽度的 80%。

# jquery - 使用 jQuery 在 div 中加载内容

> ID：12233168
> 
> 赞同：0
> 
> 时间：2012-09-02T03:20:32.077
> 
> 标签：jquery, ajax

我有一个 jQuery 代码来从模式窗口中的链接加载内容。这是我的jQuery代码：

```
$(document).ready(function() {
    var $loading = $('<img src="loading.gif" alt="loading">');

    $('#page-help').each(function() {
        var $dialog = $('<div></div>')
            .append($loading.clone());
        var $link = $(this).one('click', function() {
            $dialog
                .load($link.attr('href'))
                .dialog({
                    title: $link.attr('title'),
                    width: 500,
                    height: 300
                });

            $link.click(function() {
                $dialog.dialog('open');

                return false;
            });

            return false;
        });
    });
}); 
```

HTML 代码：

```
<a id="page-help" href="index2.html">Test</a> 
```

我想在**DIV**中加载内容，而不是在**模式窗口**中！我怎么能这样做？:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:29:04.520

如果您想将一些外部页面的内容加载到 div中，我在[https://stackoverflow.com/a/6949666/1158603](https://stackoverflow.com/a/6949666/1158603)找到了最佳答案

```
<a href="/page1">Load Page 1</a>
<a href="/page2">Load Page 2</a>
<a href="/page3">Load Page 3</a>
<a href="/page4">Load Page 4</a>

<div id="LoadMe">Where external page will load into</div> 
```

```
$('a').click(function() {
  $('#LoadMe').load($(this).attr('href'));

  return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T03:50:40.607

您可以在 jquery中使用[$.load方法：](http://api.jquery.com/load/)

首先，您必须有一个 div 要将内容加载到：

```
<div id="container"></div>
<img id="img" src="loading.gif" style="display:none;"/> 
```

然后在你的脚本中：

```
$('#page-help').click(function(){
    $('#img').show();
    $('#container').load('index2.html', function(){
       $('#img').hide();
   });
}); 
```

# ios - 企业 OTA 应用安装后消失

> ID：12233179
> 
> 赞同：2
> 
> 时间：2012-09-02T03:23:08.453
> 
> 标签：ios

使用“企业分发”选项为客户端分发 iOS 应用程序时，应用程序会下载并安装，但随后会很快从主屏幕上消失。重新启动 iOS 设备后，它会重新出现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T03:23:08.453

在我的情况下，我实际上只是在要保存 .ipa 文件时单击“保存以供企业分发”复选框在构建之间重用生成的 .plist 文件。我为“bundle-identifier”键输入的值有一个旧的 APPID，而不是应用程序当前分发的那个。更正此错误并从我们的网站重新安装应用程序解决了该问题。

本质上是添加一个缺失的*.app。*到我们的捆绑标识符允许应用程序正确安装并留在家庭屏幕上，而无需重新启动。

从：

```
<key>metadata</key>
        <dict>
            <key>bundle-identifier</key>
            <string>com.mycompany.MyApp</string> 
```

至：

```
<key>metadata</key>
        <dict>
            <key>bundle-identifier</key>
            <string>com.mycompany.app.MyApp</string> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:04:51.843

@ThaDon 谢谢！我为这篇文章投了你的票。我有一个类似的问题。我有一个 plist，我从其他人那里重复使用，并且没有足够注意我为 bundle-identifier 输入的值（前一个人仅使用应用程序名称作为 bundle 标识符，但我使用了推荐的反向域notation com .. 它在 iOS 6 上运行良好，但在 iOS 5 上它下载/安装然后消失，正如你所描述的。一旦我将完全相同的包标识符放在我的 Xcode 项目中，它就按照我预期的方式工作至。

# java - 如何将数组中的字符串与字符串进行比较？

> ID：12233185
> 
> 赞同：1
> 
> 时间：2012-09-02T03:23:57.443
> 
> 标签：java

**编辑：已修复，感谢您的帮助！**

所以基本上我有一个字符串数组，一个问题和一个答案

```
public static String[][] triviaData = { 
    {"Question2", "Answer1"},
    {"Question2", "Answer2"},
    {"Question3", "Answer3"},
}; 
```

我正在尝试制作一种验证输入输入的方法，让我们调用输入的输入`enteredAnswer`。`enteredAnswer`存储为`String`.

我正在尝试验证它`enteredAnswer`与数组的第二个索引相同。

```
if (enteredAnswer.equalsIgnoreCase(triviaData[Config.CurrentQuestion][1])) { 
```

这是我尝试过的代码，但出现错误“无法`equalsIgnoreCase(String)`在数组类型上调用`String[]`”

我是一个初学者程序员，所以如果你能帮助我，我将不胜感激。谢谢。

`enteredAnswer`存储为

```
public String[] enteredAnswer; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T03:27:07.667

`enteredAnswer`是它出现的一个数组。你需要一个`String`电话`equalsIgnoreCase`，你能显示更多的代码吗？

`HashMap`此外，使用类似 a来存储问题+答案可能会更好。你可以这样做：

```
HashMap<String, String> questionAnswers = new HashMap<String, String>(); 
```

然后

```
questionAnswers.put("Blah blah?", "blah."); 
```

并检查一个给定字符串问题`String question`的答案是否有答案`String answer`：

```
String realAnswer = questionAnswers.get(question);
boolean correct = realAnswer.equalsIgnoreCase(answer); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T03:32:58.860

您的代码调用不起作用的原因`enteredAnswer`是是 a `String[]`，而不是 a `String`。指定要使用哪个元素来获得所需的元素`String`。

# linq - “IQueryable”和“IQueryable”有什么区别 Get()”和“IQueryable 获取（表达式 > 谓词)"

> ID：12233192
> 
> 赞同：0
> 
> 时间：2012-09-02T03:25:21.987
> 
> 标签：linq, c#-4.0, iqueryable

鉴于以下代码是他们选择一种方式与另一种方式的任何差异或理由。在我看来，results1 和 results2 似乎会经历几乎相同的过程。我错过了什么吗？我已经在不同的源库中看到了两种方式，我只是好奇它们是否是选择一种而不是另一种的充分理由。谢谢。

```
public class Repo<T>
{
    IEnumerable<T> items;
    public Repo(IEnumerable<T> items)
    {
        this.items = items;
    }
    public IQueryable<T> Get()
    {
        return items.AsQueryable();
    }
    public IQueryable<T> Get(Expression<Func<T, bool>> predicate)
    {
        return items.AsQueryable().Where(predicate);
    }
}
class Program
{
    static void Main(string[] args)
    {
        var items = new[] { "a", "b", "c" };
        var repo = new Repo<string>(items);
        var results1 = repo.Get().Where(item => item == "b").ToList();
        var results2 = repo.Get(item => item == "b").ToList();
    }
} 
```

# assembly - 在 linux 上编写汇编语言程序

> ID：12233193
> 
> 赞同：-3
> 
> 时间：2012-09-02T03:25:30.467
> 
> 标签：assembly

我刚开始在 linux(ubuntu) 上编写汇编语言程序，并且知道我有一个 Intel 处理器。nasm 使用类似 Intel 的语法，而 gas（GNU 汇编器）使用类似 AT&T 的语法。但显然我的处理器无法理解 AT&T 语法。所以我想知道这个编译器实际上是如何在幕后工作的？它是否需要文件并将汇编语言转换回英特尔语法，然后在我的处理器上运行它。如果是这样，它如何知道我实际拥有的处理器？（再考虑一下这个疑问，即使我安装了 gcc，我也不会告诉它我正在使用的处理器类型。那它是如何计算出来的呢？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T03:29:58.857

您的处理器无法理解 AT&T 语法或 Intel 语法。这就是为什么你需要一个汇编程序。汇编器的目的是将某些语法转换为您的 CPU 可以理解的指令。汇编器必须被告知要生成什么指令集，除非它只支持一个指令集。

# actionscript-3 - 从视频网络流中检索音频 leftPeak 和 rightPeak？

> ID：12233194
> 
> 赞同：1
> 
> 时间：2012-09-02T03:25:36.393
> 
> 标签：actionscript-3

*我想我的问题很清楚。如何从视频网络流中检索音频 leftPeak 和 rightPeak？我将 leftPeak 和 rightPeak 属性附加到我的 netstream 对象，但它不起作用。*

# objective-c - 将所有 UILabel 设置为隐藏

> ID：12233198
> 
> 赞同：1
> 
> 时间：2012-09-02T03:27:31.840
> 
> 标签：objective-c, css, ios, xcode

有没有办法将所有 UILabel 设置为隐藏在 Objective-C 中？我正在根据`if`语句显示和隐藏标签，感觉我正在编写非常庞大的代码。有没有办法将所有 UILabel 选择`setHidden:YES`为 la CSS？

编辑：我需要其中一个一次可见，而不是一次全部隐藏。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T03:43:09.300

如果所有标签都位于同一视图中，则可以使用它的`subviews`属性：

```
for (UIView *subview in self.view.subviews) {
    if ([subview isKindOfClass:[UILabel class]]) {
        subview.hidden = YES;
    }
} 
```

如果有许多带有标签的视图，您甚至可以为整体添加一个类别`UIView`。

```
@interface UIView (HideLabels)

- (void)hideAllLabels:(BOOL)hide withExcludedLabel:(UILabel *)label;

@end

@implementation UIView (HideLabels)

- (void)hideAllLabels:(BOOL)hide withExcludedLabel:(UILabel *)label
{
    for (UIView *subview in self.view.subviews) {
        if (subview != label && [subview isKindOfClass:[UILabel class]]) {
            subview.hidden = YES;
        }
    }
}

@end 
```

没有其他方法可以做到这一点。

编辑：上面的代码根据您的需要更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T03:41:21.797

如果您始终只需要 1 个`UILabel`，则可以重复使用相同的`UILabel`. 好处是你使用的内存少了一点，而且你不需要管理所有的`UILabel`s。缺点是您需要重新计算/存储坐标来放置`UILabel`和存储的内容`UILabel`（管理转移到这个）。

* * *

现在要求已经改变，下面的答案不再有效。但是，我仍然保留它，以防有人想要***隐藏/显示所有标签***。

~~我不认为你可以像 CSS 那样做，但我们可以使用一个技巧来避免遍历所有`UILabel`s 到`setHidden`.~~

你可以把所有的`UILabel`s 作为一个透明的子视图`UIView`。应该配置透明的`size`and ，以便与不使用透明视图时的坐标相同（以避免混淆）。当你想隐藏所有s 时，你可以隐藏整个 transparent 。`origin``UIView``UILabel``UIView`

~~这有一个缺点是所有的`UILabel`s 必须在现有视图的顶部或之下。这意味着您不能自由地将某些标签调整为位于某个元素的顶部，而将某些标签调整为位于现有视图上的某个元素的下方。您需要为此创建另一个视图，那里的事情会变得非常混乱。~~

# html - 添加嵌入的 HTML 代码而不在 HTML 电子邮件上呈现

> ID：12233201
> 
> 赞同：0
> 
> 时间：2012-09-02T03:28:54.470
> 
> 标签：html, html-email

我创建了 HTML 电子邮件，但我需要发送一些不渲染的 html 代码（因为此代码供用户使用，他可以在该网站上复制并粘贴代码）

我需要发送此代码而不在 html 电子邮件上呈现，我尝试了**代码和预**标记但没有运气

```
<a href="###"><img src="####" width="300" height="250" border="0" alt="####/><br />Watch Local Cam</a> 
```

有什么办法可以做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T03:35:36.437

尝试 html 编码它

```
&lt;a href=&quot;###&quot;&gt;&lt;img src=&quot;####&quot; width=&quot;300&quot; height=&quot;250&quot; border=&quot;0&quot; alt=&quot;####/&gt;&lt;br /&gt;Watch Local Cam&lt;/a&gt; 
```

<a href="###"><img src="####" width="300" height="250" border="0" alt="####/><br />观看本地凸轮</a>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T03:30:46.630

尝试以纯文本、非富文本或 HTML 格式发送电子邮件。否则，将其另存为 HTML 文件并将其添加为附件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T18:01:48.127

尝试将 Multipart/Related 与边界一起使用，并将纯文本部分作为“文本”类型，将另一个作为需要格式化的 html。

# wordpress - WordPress 管理员 - 自定义链接弹出窗口

> ID：12233202
> 
> 赞同：2
> 
> 时间：2012-09-02T03:29:47.007
> 
> 标签：wordpress

我正在寻找一种在弹出窗口中打开管理栏自定义链接的方法。

我的代码如下：

```
 function mytheme_admin_bar_render() {
        global $wp_admin_bar;
            $wp_admin_bar->add_menu( array(
            'parent' => 'new-content',
            'id' => 'custom_link',
            'title' => __('My custom link'),
            'href' => 'http://www.google.com'
        ) );
    }
    add_action( 'wp_before_admin_bar_render', 'mytheme_admin_bar_render' ); 
```

结果是：

![在此处输入图像描述](../Images/ef4b3524c5210818f099507b7f7587a0.png)

但是，我仍然不清楚如何将这个特定链接打开（理想情况下）作为 JavaScript 弹出窗口或最终在新窗口中打开。

一些建议将不胜感激。

非常感谢，帕特里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T05:11:53.960

通过向您的代码添加`meta`信息将在新选项卡中打开链接。

```
function mytheme_admin_bar_render() {
        global $wp_admin_bar;
            $wp_admin_bar->add_menu( array(
            'parent' => 'new-content',
            'id' => 'custom_link',
            'title' => __('My custom link'),
            'href' => __('http://www.google.com'),
            'meta'   => array(
            'target' => '_blank',),
        ) );
    }
    add_action( 'wp_before_admin_bar_render', 'mytheme_admin_bar_render' ); 
```

干杯！！！

# delphi - 将标签页动态添加到页面控件并嵌入表单？

> ID：12233205
> 
> 赞同：16
> 
> 时间：2012-09-02T03:30:04.557
> 
> 标签：delphi, tpagecontrol

我正在开发一个由页面控件组成的模块。默认情况下，此页面控件 ( `TPageControl`) 不应该有任何选项卡表 ( `TTabSheet`)，但在初始化时，它应该动态插入这些页面并在其中嵌入一个表单。

问题在于知道如何将选项卡表插入页面控件。我如何创建这个？一旦创建了它，以及每个表单中的表单，我如何遍历它们以销毁表单？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-02T03:37:09.693

***1.如何动态创建标签页？***

```
procedure TForm1.Button1Click(Sender: TObject);
var
  TabSheet: TTabSheet;
begin
  TabSheet := TTabSheet.Create(PageControl1);
  TabSheet.Caption := 'New Tab Sheet';
  TabSheet.PageControl := PageControl1;
end; 
```

***2\. 如何在标签页内嵌入表单？***

要在选项卡表内插入表单，只需使用父级更改：

```
Form2.Parent := TabSheet;
Form2.Show; 
```

***3\. 销毁时是否需要手动释放嵌入标签表的表单？***

不，释放标签页就足够了。如果表单有一个标签页，或者更准确地说，[`TWinControl`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Controls.TWinControl)作为它们的[`Parent`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Controls.TControl.Parent)，该父级将在释放自身时处理它们的释放。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T07:54:19.583

大卫赫弗南是对的。

```
Form2.Parent := TabSheet;
Form2.Show; 
```

此代码仅表示 Form2 的父级是 TabSheet，而不是它的所有者。

您可以像这样创建表单：

```
Form2 := TForm2.Create(nil); 
```

然后自己释放它。或者您可以创建这样的表单：

```
Form2 := TForm2.Create(Form1); 
```

Form1 是 Form2 的拥有者，它自己释放时会自动释放 Form2。

# python - Python结构错误

> ID：12233208
> 
> 赞同：-1
> 
> 时间：2012-09-02T03:30:43.970
> 
> 标签：python, string, algorithm

我正在编写一个程序，我可以在其中反转序列并将所有 As 替换为 Ts，将所有 Cs 替换为 Gs，将所有 Gs 替换为 Cs，并将所有 Ts 替换为 As。该程序是读取一个碱基序列并输出反向补码序列。我很难做到这一点，所以任何人都可以通过查看我的代码来帮助我：

```
word = raw_input("Enter sequence: ")
a = word.replace('A', 'T')
b = word.replace('C', 'G')
c = word.replace('G', 'C')
d = word.replace('T', 'A')
if a == word and b == word and c == word and d == word:
    print "Reverse complement sequence: ", word 
```

我想要这种输出：

```
Enter sequence: CGGTGATGCAAGG
Reverse complement sequence: CCTTGCATCACCG 
```

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T03:35:57.633

我可能会做类似的事情：

```
word = raw_input("Enter sequence:")

# build a dictionary to know what letter to switch to
swap_dict = {'A': 'T', 'T': 'A', 'C': 'G', 'G': 'C'}

# find out what each letter in the reversed word maps to and then join them
newword = ''.join(swap_dict[letter] for letter in reversed(word))

print "Reverse complement sequence:", newword 
```

我不太明白你的`if`说法，但上面的代码通过循环每个字母，决定它应该变成什么，然后组合结果来避免需要一个。这样每个字母只会被转换一次。

编辑：哎呀，我没有注意到你也想反转字符串。固定的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T03:46:05.323

您编写的代码有问题，因为步骤 1 和 4 彼此相反。因此它们不能在完全独立的步骤中完成：您将所有 As 转换为 T，然后在步骤 4 中将这些（加上原始 T）转换为 As。

对于一些简单的、内置的和-希望-高效的东西，我会考虑使用 string 模块中的翻译表：

```
import string
sequence = "ATGCAATCG"
trans_table = string.maketrans( "ATGC" , "TACG")
new_seq = string.translate( sequence.upper() , trans_table )
print new_seq 
```

这给出了所需的输出：

```
'TACGTTAGC' 
```

尽管我怀疑您的用户是否会忘记将所有字母大写，但确保输入符合预期格式是一种很好的做法；因此使用了 sequence.upper()。转换表中未包含转换的任何字母/碱基将不受影响：

```
>>> string.translate( "AEIOUTGC" , trans_table )
'TEIOUACG' 
```

至于逆补序列？您可以在输出字符串上使用切片表示法简洁地做到这一点，步长为 -1：

```
>>> new_seq[::-1]
'CGATTGCAT' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T03:41:01.470

因此，如果我了解您想要做什么，您想要交换所有 Ts 和 As 以及交换所有 Gs 和 Cs **，并且**您想要反转字符串。

好的，首先，让我们来反转字符串，这是您尚未实现的。不幸的是，没有明显的方法可以做到这一点，但是[这个关于如何在 python 中反转字符串的 SO question](https://stackoverflow.com/questions/931092/reverse-a-string-in-python)应该会给你一些想法。最好的解决方案似乎是

```
reversedWord = word[::-1] 
```

接下来，您需要交换字母。您不能在同一个字符串上调用`replace("T", "A")` **and** `replace("A","T")`，因为这会使您的 As 和 Ts 都设置为 T。您似乎已经认识到这一点，但是您为每次交换使用单独的字符串，并且永远不要将它们组合在一起。相反，您需要遍历字符串，一次一个字母并检查。像这样的东西：

```
swappedWord = "" #start swapped word empty
for letter in word: #for every letter in word
    if letter  == "A": #if the letter is "A"
        swappedWord += "T" #add a "T
    elif letter  == "T": #if it's "T"
        swappedWord += "A" #add an "A"
    elif letter  == "C": #if it's "C"
        ... #you get the idea

    else: #if it isn't one of the above letters
        swappedWord += letter #add the letter unchanged 
```

*（**编辑**- DSM 的基于字典的解决方案比我的解决方案更好。我们的解决方案非常相似，尽管我们都查看每个字符并决定交换的字符应该是什么，但 DSM 的更紧凑。但是，我仍然觉得我的解决方案是有助于帮助您了解 DSM 解决方案的总体思路。DSM 使用字典来快速简单地返回正确的字母，而不是我的大 if 语句。DSM 还将它折叠成一行。）*

您的 if 语句不起作用的原因是您基本上是在说“如果 a、b、c、d 和 word 都完全相同”，因为`==`意味着“相等”并且如果 a 等于 word 和 b等于 word 那么 a 必须等于 b。这只有在字符串没有 As、Ts、Cs 或 Gs 时才成立（即单词没有被交换更改），因此您永远不会打印输出。

# python - Django 模板上的数学

> ID：12233210
> 
> 赞同：2
> 
> 时间：2012-09-02T03:30:48.223
> 
> 标签：python, django, django-templates, django-views

这是关于 Django 的另一个问题。

我有这个代码：

视图.py

```
cursor = connections['cdr'].cursor()
calls = cursor.execute("SELECT * FROM cdr where calldate > '%s'" %(start_date))
result = [SQLRow(cursor, r) for r in cursor.fetchall()]
return render_to_response("cdr_user.html",
    {'calls':result }, context_instance=RequestContext(request)) 
```

我使用这样的 MySQL 查询，因为数据库不是 django 项目的一部分。

我的 cdr 表有一个名为 duration 的字段，我需要将其除以 60 并将结果乘以一个浮点数，例如 0.16。

有没有办法使用模板标签来乘以这个值？如果没有，在我看来有没有好的方法呢？

我的模板是这样的：

```
{% for call in calls %}
    <tr class="{% cycle 'odd' 'even' %}"><h3>
        <td valign="middle" align="center"><h3>{{ call.calldate }}</h3></td>
        <td valign="middle" align="center"><h3>{{ call.disposition }}</h3></td>
        <td valign="middle" align="center"><h3>{{ call.dst }}</h3></td>
        <td valign="middle" align="center"><h3>{{ call.billsec }}</h3></td>
        <td valign="middle" align="center">{{ (call.billsec/60)*0.16 }}</td></h3>
    </tr>
{% endfor %} 
```

最后是我需要显示值的地方，我知道“（call.billsec/60）* 0.16”不可能在那里完成。我写它只是为了代表我需要展示的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T05:23:05.830

您可以在三个不同的层上执行此操作：

*   数据库级别。SQL 是一种强大的数学语言。您可以在查询的选择部分写下您的方程式。在你的情况下，应该是这样的`SELECT (duration/60*0.16) FROM cdr;`。可以在[此处](http://www.java2s.com/Tutorial/MySQL/0420__Math-Numeric-Functions/UsingArithmeticOperatorsinselectstatement.htm)和 Google 上找到示例。请注意，在这种情况下，压力（算法复杂性）放在 MySQL 服务器进程而不是 Python 进程上。
*   查看级别。在您的示例中，就在您返回之前，您可以遍历`result`变量的每个元素以修改其值。你可以按照 Lie Ryan 给出的这个级别的例子。
*   模板级别。这是由[自定义过滤器](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-filters)完成的。您可以按照文档中的说明编写自定义过滤器，并通过此过滤器管道模板变量以获得所需的值。

这些方面的内容将代表适用于您的模板的自定义过滤器：

```
@register.filter
def customFilter(value):
    return value / 60.0 * 0.16 
```

`{% load %}`然后，在自定义过滤器之后，您可以在模板中以这种方式使用它（阅读文档以获取更多实现信息）：

```
{{ billsec|customFilter }} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T14:37:29.693

如果数学运算不太复杂，我通常使用`custom template tags`. [添加](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#add)操作已经可以作为模板标签使用，我在我的项目中使用下面的代码片段分别进行乘法、减法和除法。将此代码放在`.py`您`app/templatetags`所在位置的文件中，并在其中添加一个`__init__.py`。

```
from django import template

#Django template custom math filters
#Ref : https://code.djangoproject.com/ticket/361
register = template.Library()

def mult(value, arg):
    "Multiplies the arg and the value"
    return int(value) * int(arg)

def sub(value, arg):
    "Subtracts the arg from the value"
    return int(value) - int(arg)

def div(value, arg):
    "Divides the value by the arg"
    return int(value) / int(arg)

register.filter('mult', mult)
register.filter('sub', sub)
register.filter('div', div) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T04:03:16.457

**编辑**：以下答案是完全错误的，因为我认为 OP 使用的是 sqlite。MySQL 有自己的方式将事物包装到字典中，见下文。

您可以继承 sqlite3.Row 并编写自己的“计算字段”：

```
class MyRow(sqlite3.Row):
    def comp_billsec(self):
        return (self['billsec'] / 60) * 0.16

cursor = ...
cursor.row_factory = MyRow
for r in cursor.execute('...'):
    print r['billsec'], r.comp_billsec() 
```

请注意，我们`comp_billsec`使用方法调用语法访问，而`sqlite3.Row`工厂通过字典语法提供访问。这种差异会在 django 模板中消失，因为在 django 模板中，字典访问和零参数函数调用具有相同的语法，因此您可以使用`{{ call.billsec }}`和`{{ call.comp_billsec }}`.

**编辑**：在 MySQL 中，您可以在视图中插入计算值，如下所示：

```
cursor = connections['cdr'].cursor(cursorclass=MySQLdb.cursors.DictCursor)
calls = cursor.execute("...")
result = [r + dict(comp_billsec=r['billsec'] / 60 * 0.16) for r in cursor.fetchall()]
return render_to_response("cdr_user.html",
    {'calls':result }, context_instance=RequestContext(request)) 
```

另外，您应该使用参数化查询（注意逗号而不是 %）：

```
cursor.execute("SELECT * FROM cdr where calldate > '%s'", (start_date,)) 
```

您之前的代码存在 SQL 注入安全问题，因为您将 start_date 直接插入到 SQL 查询中。`' OR 1 OR '`例如，如果 start_date 包含，您的查询将被内插为`SELECT * FROM cdr where calldate > '' OR 1 OR ''`它将选择表中的所有行；情况可能更糟。

# c# - 二进制到字符串作为二进制？

> ID：12233216
> 
> 赞同：5
> 
> 时间：2012-09-02T03:33:29.587
> 
> 标签：c#, .net, string, binary, bytearray

[Redis 密钥是二进制安全的](http://redis.io/topics/data-types-intro)。我想搞砸并使用 C# 将二进制文件放入 redis。我选择的客户不支持编写二进制密钥，它使用密钥，这很有意义。但是我只是在鬼混，所以告诉我我该怎么做。

如何将原始字节 [] 转换为字符串？起初我正在考虑将 byte[] 转换为 utf8 字符串，但是 unicode 有一些检查来查看它是否有效。所以原始二进制文件应该失败。

其实我试过了。我没有失败，而是得到了一个奇怪的结果。我的主要问题是如何将原始字符串转换`byte[]`为等效字符串？就像将原始字节 [] 作为字符串而不是编码为 base32/64/hex/whatever 一样。我不重要的问题是为什么我得到一个 512 字节的字符串而不是一个异常说这不是一个有效的 UTF8 字符串？

代码

```
var rainbow = new byte[256];
for (int i = 0; i < 256; i++)
{
    rainbow[i] = (byte)i;
}
var sz = Encoding.UTF8.GetString(rainbow);
var szarr = Encoding.UTF8.GetBytes(sz);
Console.WriteLine("{0} {1} {2}", ByteArraysEqual(szarr, rainbow), szarr.Length, rainbow.Length); 
```

输出

> 假 512 256

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-02T05:54:12.537

如果您有任意字节 []，将其作为字符串获取的方法是将其转换为 hex 或 base-64 之类的东西。最简单的：

```
byte[] key = ...
string s = Convert.ToBase64String(key); 
```

反过来：

```
key = Convert.FromBase64String(); 
```

使用 System.Text.Encoding 之类的东西很*诱人*，但这是完全不正确的，并且**不能**用于进行可靠的转换。如果使用Encoding，有两个问题：

*   许多键无法成功往返
*   许多不同的 byte[] 键可以成为相同的字符串键

这两个都不好！问题是使用是向后的：编码将任意字符串转换为结构化字节[]，允许对任何字符串进行编码/解码。Base-64 将任意 byte[] 转换为结构化字符串/从结构化字符串转换。非常微妙的区别，但非常重要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-02T03:52:42.090

您必须使用某种编码将字节转换为字符串。编码*iso-8859-1*将给出正确的结果：

```
var sz = Encoding.GetEncoding("iso-8859-1").GetString(rainbow);
var szarr = Encoding.GetEncoding("iso-8859-1").GetBytes(sz);
Console.WriteLine("{0} {1} {2}", ByteArraysEqual(szarr, rainbow), szarr.Length, rainbow.Length); 
```

> 真 256 256

问题是 UTF8 每个字符需要一个以上的字节。它可以用一个字节编码前 128 个字符：

```
Console.Write(Encoding.UTF8.GetBytes(Encoding.UTF8.GetString(new byte[] { 127 })).Length); 
```

> 1

但其余的需要三个字节：

```
Console.Write(Encoding.UTF8.GetBytes(Encoding.UTF8.GetString(new byte[] { 128 })).Length); 
```

> 3

因此，当您将字节 0-255 转换为字符串并使用 UTF8 返回时，前 128 个作为一个字节返回，但最后 128 个返回为 3\. 128 + 3*128 = 512，因此是您的结果。

ASCII 不知道如何处理超过 128 的字节，因此它们只是被编码为`?`，并且也作为一个字节返回。

# android - Android - 恢复应用程序状态 - SL4A

> ID：12233217
> 
> 赞同：0
> 
> 时间：2012-09-02T03:33:40.180
> 
> 标签：android, sl4a

请不要因为一个菜鸟问题而用鱼叉攻击我。

我正在使用 SL4A 开发一个 android 应用程序，当我的应用程序启动时，它在脚本执行时在后台运行。我不确定从哪里开始，但每次单击我的图标时，它都会重新启动我的应用程序。我尝试过使用不同的启动模式，但没有发生任何不同。我认为这与 OnCreate 代码和通知的设置有关。我需要帮助保存我的应用程序状态，然后在重新单击图标或单击通知栏时恢复。我已经尝试了一切，不得不转向这里寻求帮助。无论如何，我都不是 android 编程的专家。谢谢大家，温柔点；）

```
 Public void onCreate() {
    super.onCreate();
    mInterpreterConfiguration = ((BaseApplication) getApplication())
            .getInterpreterConfiguration();
}

@Override
public void onStart(Intent intent, final int startId) {
    super.onStart(intent, startId);
    String fileName = Script.getFileName(this);
    Interpreter interpreter = mInterpreterConfiguration
            .getInterpreterForScript(fileName);
    if (interpreter == null || !interpreter.isInstalled()) {
        mLatch.countDown();
        if (FeaturedInterpreters.isSupported(fileName)) {
            Intent i = new Intent(this, DialogActivity.class);
            i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            i.putExtra(Constants.EXTRA_SCRIPT_PATH, fileName);
            startActivity(i);
        } else {
            Log
                    .e(this, "Cannot find an interpreter for script "
                            + fileName);
        }
        stopSelf(startId);
        return;
    }

    // Copies script to internal memory.
    fileName = InterpreterUtils.getInterpreterRoot(this).getAbsolutePath()
            + "/" + fileName;
    File script = new File(fileName);
    // TODO(raaar): Check size here!
    if (!script.exists()) {
        script = FileUtils.copyFromStream(fileName, getResources()
                .openRawResource(Script.ID));
    }
    copyResourcesToLocal(); // Copy all resources

    if (Script.getFileExtension(this)
            .equals(HtmlInterpreter.HTML_EXTENSION)) {
        HtmlActivityTask htmlTask = ScriptLauncher.launchHtmlScript(script,
                this, intent, mInterpreterConfiguration);
        mFacadeManager = htmlTask.getRpcReceiverManager();
        mLatch.countDown();
        stopSelf(startId);
    } else {
        mProxy = new AndroidProxy(this, null, true);
        mProxy.startLocal();
        mLatch.countDown();
        ScriptLauncher.launchScript(script, mInterpreterConfiguration,
                mProxy, new Runnable() {
                    @Override
                    public void run() {
                        mProxy.shutdown();
                        stopSelf(startId);
                    }
                });
    }
}

RpcReceiverManager getRpcReceiverManager() throws InterruptedException {
    mLatch.await();
    if (mFacadeManager==null) { // Facade manage may not be available on startup.
    mFacadeManager = mProxy.getRpcReceiverManagerFactory()
    .getRpcReceiverManagers().get(0);
    }
    return mFacadeManager;
}

@Override
protected Notification createNotification() {
    Notification notification =
        new Notification(R.drawable.script_logo_48, this.getString(R.string.loading), System.currentTimeMillis());
    // This contentIntent is a noop.
    PendingIntent contentIntent = PendingIntent.getService(this, 0, new Intent(), 0);
    notification.setLatestEventInfo(this, this.getString(R.string.app_name), this.getString(R.string.loading), contentIntent);
    notification.flags = Notification.FLAG_ONGOING_EVENT;
    return notification;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T03:58:46.377

您在这里有几个不同的问题。首先，在您的应用程序中执行某些工作的脚本可能不应该在 Activity 内部启动。这是因为您可能不希望脚本的执行与 Acitivty 的生命周期相关联。我建议检查活动生命周期@ [http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

我建议使用服务来控制脚本的工作。正如文档所述

> 服务是一个应用程序组件，它代表应用程序希望在不与用户交互的情况下执行更长时间运行的操作，或提供功能供其他应用程序使用。

该服务通常也是您想要控制通知的显示和取消的地方。就通知意图的活动启动模式而言，这可能会变得复杂，但通常您需要确保从通知内启动活动不会导致创建重复活动。看看@ [http://developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)了解一些细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T03:59:08.233

onRestart 将触发 onStart 因此每次重新启动应用程序时，都会再次触发脚本。查看[http://www.androidjavadoc.com/1.0_r1_src/android/app/Activity.html](http://www.androidjavadoc.com/1.0_r1_src/android/app/Activity.html)以获得方便的 Android 生命周期流程。

我想知道这是否可以更好地实现为服务，而活动只是触发服务？

# php - jquery.ui.tabs.js 不会在 IE9、Chrome 中加载选项卡数据 - 在 Firefox 中工作得非常好

> ID：12233222
> 
> 赞同：2
> 
> 时间：2012-09-02T03:36:39.367
> 
> 标签：php, javascript, jquery, ajax

我在我的网站上遇到的问题很少，我不知道如何解决这些问题。

请访问[http://link.zambeel.ca/index.php/component/obituary/detail/52](http://link.zambeel.ca/index.php/component/obituary/detail/52)并单击照片选项卡，它不会在 IE9 和 Chrome 中及时加载图像。我使用以下代码使其在 Firefox 中工作：

```
var loadNextTab = function() {
if (indexesToLoad.length == 0) return;
var index = indexesToLoad.shift();
$("#tabs-1").tabs("load",index);
};

$("#tabs-1").tabs({
cache: true,
load: loadNextTab
}); 
```

请尽快帮我解决这个问题。

只是让你们知道，我无论如何都不是程序员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T03:53:36.333

当我访问您在 IE 9 上发布的 URL 时，它在错误控制台中向我抛出了以下错误。

`Unable to get value of the property 'tabs': object is null or undefined`

现在，如果您的 JavaScript 在 HTML 之前加载，通常会出现此错误。为防止这种情况，请将上述所有代码放入[就绪](http://api.jquery.com/ready/)事件中

```
$(document).ready(function() {
  // All code you posted above should come in here which initializes the tabs.
}); 
```

# cloud - VoltDB 的 YCSB

> ID：12233225
> 
> 赞同：1
> 
> 时间：2012-09-02T03:38:05.513
> 
> 标签：cloud, benchmarking, microbenchmark, voltdb, ycsb

有谁知道是否有任何 YCSB 客户端/驱动程序可用于对 VoltDB 进行基准测试？甚至任何参考出版物/博客/文章/研究项目？

我们可以将 TPC 工作负载用于 VoltDB 基准测试吗？

非常感谢大家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-07T21:37:46.077

这里的另一位 VoltDB 开发人员，他刚刚完成了实现 YCSB 驱动程序的过程。此驱动程序的源代码可以在 GitHub 上找到，网址为[https://github.com/VoltDB/voltdb/tree/master/tests/test_apps/ycsb](https://github.com/VoltDB/voltdb/tree/master/tests/test_apps/ycsb)。

关于我们的实现的一些细节：

YCSB 使用宽列格式，将字符串键映射到许多字符串二进制 k/v 字段映射。创建一个可以灵活处理这个问题的驱动程序，即一个可以处理任意 YCSB 配置的驱动程序，不允许直接使用固定的关系模式。为了解决这个问题，我们采用了一种“小地图”类型的方法，也就是说，对于每个键，我们将所有字段压缩到一个 blob 中，这样整个 YCSB 行都以 k/v 对处理。这确实做出了隐含（软）假设，即每行的字段数将相对较小（例如，<=50），考虑到现有的、已发布的 YCSB 结果，这似乎是合理的。可以在存储过程级别添加额外的逻辑来处理每行大量字段的情况，

作为进一步说明，我们将“扫描”操作解释为“从该键开始以某种确定的顺序翻阅数据”。在现实世界中，数据意味着某种东西，并且可能（或可能不）具有有意义的顺序。在 YCSB 的世界中，没有特别的理由偏爱一种订购方式而不是另一种订购方式。因此，我们对 VoltDB 分区进行人工排序；结合主键索引施加的分区内排序，这对数据集施加了总排序。对于感兴趣的读者，此操作的客户端实现使用了我们的一些示例中使用的“到处运行”模式的一些新颖的变体。

我们发布的测试结果可以在[https://voltdb.com/blog/voltdb-in-memory-database-achieves-best-in-class-results-running-in-the-cloud-on-the-上看到ycsb-benchmark-3/](https://voltdb.com/blog/voltdb-in-memory-database-achieves-best-in-class-results-running-in-the-cloud-on-the-ycsb-benchmark-3/) . 正如我的同事在上面所建议的那样，虽然这个基准测试的结果非常强大，但实际上会低估 VoltDB 的性能，因为它没有利用通过在存储过程调用中将逻辑捆绑在一起所提供的优化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T14:41:06.507

VoltDB 开发人员在这里。

尽管有几个用户使用 YCSB 框架进行了基准测试，但没有官方的 YCSB 驱动程序。YCSB 和 VoltDB 之间有一点阻抗不匹配。YCSB 旨在与范围分片列存储一起使用。VoltDB 是一个散列分片关系存储，具有对服务器端逻辑的丰富支持。

这表现为三个方面的问题。

首先是 YCSB 需要范围扫描。如果您对密钥分布有一定的了解，并且可以对密钥进行规范化，以便它们有用地存储，您可以在哈希分片存储中进行有效的范围扫描。这是您如何在[Cassandra](http://www.datastax.com/dev/blog/advanced-time-series-with-cassandra)中执行此操作的示例。

这不是不可克服的，但需要一些思考。

第二个问题是列存储模型不能很好地映射到关系数据模型。我可以通过将小地图打包成一个带有 blob 的单行并在添加/更新 k/v 对时重写它，从而获得相当多的速度和内存效率。这就是 Redis 处理小地图的方式。

对于具有许多/较大 k/v 对的较大键，非规范化并允许数据库管理内存是有意义的。通过一些工作，您可以创建一个透明地执行此操作的存储过程 API。

同样，这不是不可克服的，但也不是微不足道的。

第三个问题是 YCSB 是在假设所有逻辑都存在于客户端并且服务器必须为客户端实现所有数据的假设下编写的。这意味着针对 VoltDB 编写的真实世界应用程序可能会快几倍，并且空间效率更高。更快，因为服务器端逻辑可以消除到客户端的多次往返，并且更节省空间，因为对事务的支持使您可以避免以日志结构的方式编写应用程序。

YCSB 将让您大致了解 VoltDB 如何执行和扩展，但是通过以适合关系数据模型和 Volt 对服务器端逻辑的强调的方式编写应用程序，可以获得非同寻常的收益。

关于TPC-C。VoltDB 专为类似 TPC-C 的基准测试而构建。我说“喜欢”是因为它不是官方的，并且在某些方面与 TPC-C 不同。最显着的区别是新订单交易只使用一个仓库（而不是某些百分比的新订单所需的 1-10 个仓库）。这很重要，因为它允许基准测试在没有任何分布式事务的情况下完美分片。

VoltDB TPC-C 之类的基准测试不随发行版提供，但可在[github](https://github.com/VoltDB/voltdb/tree/master/tests/test_apps/tpcc)上找到。

# ruby-on-rails - nil:NilClass 的未定义方法“each”，在不同视图上渲染其他模型

> ID：12233226
> 
> 赞同：1
> 
> 时间：2012-09-02T03:38:08.790
> 
> 标签：ruby-on-rails, each

我正在使用 mongoid 并且在生成普通脚手架后没有添加任何代码。
我想在投资组合索引视图页面上呈现类别列表。
所以我呈现为部分。但得到如下错误..

```
NoMethodError in Portfs#index

Showing /Users/suri/Dev/action2/app/views/cats/_list.html.erb where line #1 raised:

undefined method `each' for nil:NilClass
Extracted source (around line #1):

1: <% @cats.each do |cat| %>
2:  <li><%= cat.name %></li>
3: <% end %> 
```

查看/portf/index.html.erb

```
<div class="row">
  <div class="span9">
    <div class="row">
        <ul class="thumbnails">
        <% @portfs.each do |portf| %>
            <li class="span3"style="border:1px solid black;">
            <div class="thumbnail">
                <% portf.images.each do |image| %>
                    <%= image_tag image.file.url(:small) %>
                <% end %>
                <div class="caption">
                <h3><%= link_to (truncate portf.title, :length =>10), portf %></h3>
                <p><%= truncate portf.decs, :length => 30 %></p>
                <p><%= link_to 'Edit', edit_portf_path(portf) %>
                <%= link_to 'Destroy', portf, method: :delete, data: { confirm: 'Are you sure?' } %></p>
                </div>
            </div>
            </li>
        <% end %>
        </ul>
  </div>
  </div>

    <div class="span3">
        <div class="modal fade" id="portf_modal">
            <div class="modal-header">
                <a class="close" data-dismiss="modal">&times;</a>
                <h3>Welcom to <%= image_tag 'logo.png', :height => 12 %></h3>
            </div>
            <div class="modal-body">
                <%= form_for :portf, :html => { :multipart => true } do |f| %>
                <div class="field">
                <%= f.label :title %><br />
                <%= f.text_field :title %>
                </div>

                <%= f.label :Category %><br />
                <%= collection_select(:portf, :category, Cat.all, :name, :name) %>

                <div class="field">
                <%= f.label :decs %><br />
                <%= f.text_area :decs, :class => 'span5', :rows => 10 %>
                </div>
            </div>
            <div class="modal-footer">
                <%= f.submit '올리기', :class => 'btn btn-primary'  %>
                <a href="#" class="btn" data-dismiss="modal">닫기</a>
                <% end %>
            </div>
        </div>

        <form class="form-search">
            <div class="input-append">
            <input type="text" class="span2 search-query">
            <button type="submit" class="btn">Search</button>
            </div>
        </form>

        <p>category</p>
        <% render 'cats/list', :action => "index", :controller => "cats" %>

        <a href="#portf_modal" data-toggle="modal" class="btn btn-primary">포트폴리오 올리기&lt;/a>
    </div>
</div> 
```

查看/cats/_list.html.erb

```
<% @cats.each do |cat| %>
    <li><%= cat.name %></li>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T04:07:52.913

我认为您误解了[在视图中渲染部分](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)和[在控制器上下文中渲染](http://guides.rubyonrails.org/layouts_and_rendering.html#using-render)之间的区别。不幸的是，这两种方法名称相同，但用例完全不同。当您[在视图中渲染时](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)，就像您在 index.html.erb 模板的底部所做的那样，您通常会渲染部分内容。部分类似于可用于显示项目集合的 HTML 片段。在您的情况下，您需要将集合存储在`@cats`控制器中的实例变量中，然后在视图中呈现部分：

在您的控制器中：

```
@cats = Cat.all # (or any other collection of cats) 
```

在您看来：

```
<%= render :partial => 'cats/list' %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T06:38:48.220

@cats 是一个实例变量，根据 MVC 架构，它将来自您的控制器到您的视图。就像是

```
def index
 @cats = Cat.all
end 
```

您的 view/portf/index.html.erb （只保留您调用部分的最后一个时钟）

**错误的**

```
<p>category</p>
        <% render 'cats/list', :action => "index", :controller => "cats" %> 
```

**正确的**

```
<p>category</p>
        <%= render :partial => "list", :collection => @cats %> 
```

**纠正你的部分**

view/cats/_list.html.erb （我们没有迭代 @cats 循环，因为我们已将本地人作为集合传递

```
<li><%= cat.name %></li> 
```

# java - Java 包和编译（为什么，而不是如何）

> ID：12233230
> 
> 赞同：4
> 
> 时间：2012-09-02T03:39:38.180
> 
> 标签：java

我正在处理 Eclipse 中的一些 Java 代码。代码包含在一个名为 的类`Adder`中，它在 Eclipse 中位于包中`org.processing`。类文件中的第一件事是行

```
package org.processing 
```

**Q1)** *这条线到底在做什么？为什么会有，它的作用是什么。*

代码在 Eclipse 中运行良好，但是，当我进入工作区时，如果我进入 中的`src/org/processing/`文件夹，当我尝试使用运行时进行`src`编译，我得到以下错误`javac Adder.class``java Adder`

`java.lang.NoClassDefFoundError: Adder (wrong name: org/processing/Adder)`

另一方面，如果我从 src 编译使用

```
javac org/processing/Adder.java 
```

我可以从`src`使用中运行它，`java org.processing.Adder`但仍然不能从处理目录中运行。

**Q2）** *这是否意味着编译总是相对于目录结构？*

最后，如果我 `package org.processing`从开头删除该行，`.class`我可以在文件目录中编译和运行该`.class`文件。

**Q3)** *为什么会这样？*我可以完全理解为代码开发强制执行目录结构，但是一旦您使用字节码，这似乎有点过头了，因为现在我（显然）只能`src`使用`java org.processing.Adder`. 现在，我确定我在这里错过了重点，所以如果有人能指出它是什么，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T03:47:00.060

编译器在编译时必须能够找到相关的源代码文件。这就是为什么包和目录结构必须与源代码一致。同样，JVM 必须能够找到引用的 .class 文件。所以在运行时需要相同的目录结构。没有比这更复杂的了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T03:47:12.633

**Q1）**这里的问题是，一旦您进入代表您的包层次结构的文件夹，您将其设置为工作目录。它会在 org/processing/Adder 内部查找路径 org/processing/Adder（本质上是从根目录查找 org/processing/Adder/org/processing/Adder）。您需要使用完整路径从根目录调用它。包的目的是 A：将相关的类组织成组。和 B：和 A 一样，Foo.bar 包中的类不能查看其他包中的私有类，因为它们就像该包的内部类，只有它们所在的包才能使用它们

**Q2)**是的

**Q3)**路径用作 JVM 了解类文件（每个都包含其字节码）的确切位置的基本结构。如果您更改调用它的位置，您基本上是在尝试更改 JVM 的位置以查找类文件，但它们的真实位置没有改变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T03:48:39.947

对于 Q1：包声明允许您保证您的类永远不会被误认为是另一个具有相同名称的类。这就是为什么大多数程序员把他们公司的名字放在包里的原因。不太可能发生冲突。

对于Q2：包结构和目录结构是一一对应的。简而言之，目录和包必须相同，除了包通常位于名为 src 的文件夹下。

对于 Q3：编译后，类文件可能会位于 jar 文件中的相应文件夹中。您的 ant 或 maven 任务将构建 jar 文件，因此除了第一次设置 ant 任务之外，您实际上不必费心处理它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T03:56:12.650

简短的回答 -[包](http://docs.oracle.com/javase/tutorial/java/package/packages.html)有助于保持您的项目结构井井有条，允许您重用名称（尝试使用两个名为 的类`Account`），并且是**非常**大的项目的一般约定。它们只不过是文件夹结构，但为什么要使用它们会严重影响初学者。有趣的是，如果项目少于 5 个类，*您可能不需要它。*

* * *

> 什么，这条线到底在做什么？为什么会有，它的作用是什么。

线

```
package org.processing 
```

告诉 Java 这个类文件位于一个名为**/org/processing 的文件夹中。** 这允许您拥有一个完全定义为`org.processing.Processor`here 的类，并且在另一个文件夹中 - 比如说**/org/account/processing**，您可以拥有一个完全定义为`org.account.processing.Processor`. 是的，两者都使用相同的名称，但它们不会发生冲突——它们位于不同的包中。如果您决定在同一个类中使用它们，则必须通过使用 import 语句或完全限定的对象名称来明确说明要使用哪一个。

> 这是否意味着编译总是相对于目录结构？

**是的。** Java 和大多数其他语言都有一个称为*类路径*的概念。这个类路径上的任何东西都可以编译和运行，默认情况下，你所在的当前目录在类路径上，用于编译和执行。要将*其他*文件放在类路径上，您必须对编译使用另一个命令行调用：

```
javac -sourcepath /path/to/source MainClass.java 
```

...这会将源路径中的所有内容编译到当前目录，整齐地组织在包语句指定的文件夹结构中。

要运行它们，正如您已经建立的那样，您需要在类路径中包含已编译的源代码，然后通过*完全限定的对象名称*执行：

```
java -cp /path/to/source org.main.MainClass 
```

> 为什么会是这样？

就像我之前说的，这对于*非常大的项目*，或者涉及很多其他类和需求结构/组织的项目（例如 Android）非常有用。它做了几件事：

*   **它将源代码组织在一个易于定位的结构中。**你没有散落在各处的物体。
*   **它使您的对象的范围保持清晰。**如果我有一个名为 的包`org.music.db`，那么很明显我正在处理处理数据库和持久性的对象。如果我有一个名为 的包`org.music.gui`，那么很明显这个包处理的是演示端。当您想要创建新功能或更新/重构现有功能时，这会有所帮助；你可以记住它*的作用*，但你记不起它的*名字*。
*   **它允许您拥有具有相同名称的对象。** 那里有不止一种类型`Map`，如果您正在使用将其引入的项目，您希望能够指定*您* `Map`获得的类型 - 再次通过导入或完全限定的对象名称完成。

# mysql - 如何在 Windows 上的 Node.js 中开始 MySQL 工作？

> ID：12233231
> 
> 赞同：3
> 
> 时间：2012-09-02T03:39:39.880
> 
> 标签：mysql, database, node.js

我最近开始使用 Node.js，原因有很多，但最重要的是我可以轻松地使用 HTML5 WebSockets 编写聊天服务器。然而，我已经被 MySQL 困住了好几个星期。

我目前正在使用这个 MySQL 客户端模块：[https ://github.com/sidorares/nodejs-mysql-native](https://github.com/sidorares/nodejs-mysql-native)

我已连接到数据库并设法使用以下代码存储数据：

```
// MySQL database
var db = require("mysql-native").createTCPClient(); // localhost:3306 by default
db.auto_prepare = true;
db.auth(dbName, dbUser, dbPass);
// Update the database
db.execute("UPDATE server_data SET value='" + new Date() + "' WHERE name='lastLoaded'"); 
```

如何使用`SELECT * FROM x WHERE y=z`查询从数据库中检索数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T05:20:40.960

您选择[node-mysql](https://github.com/felixge/node-mysql)`nodejs-mysql-native`是否有任何具体原因，这是一个非常好的节点模块。如果没有，那么您可能应该尝试. 我已经尝试过了，开始使用 MySQL 和 Node.js 非常棒。您可以执行以下操作：`node-mysql`

```
var mysql      = require('mysql');
var connection = mysql.createConnection({
  host     : 'localhost',
  user     : 'your_username',
  password : 'your_password',
});

connection.connect();

connection.query("UPDATE server_data SET value=? WHERE name=?", [new Date(), 'lastLoaded'] function(err, result) {
  if (err) throw err;
  console.log('Result: ', result);
});

connection.end(); 
```

以这种方式使用它的好处是可以防止 SQL 注入，这是在 node-mysql 内部处理的（通过使用 connection.escape() 方法）。

# .net - 使用 WithEvents 和 .NET 对象时出现编译错误

> ID：12233234
> 
> 赞同：1
> 
> 时间：2012-09-02T03:40:20.473
> 
> 标签：.net, vb6, interop, com-interop

`"object does not source automation events"`我在 VB6 的这一行得到一个编译错误：

```
Private WithEvents obj As MyClass 
```

`MyClass`是一个 COM 可见的 .NET 类。

这个错误的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:08:03.637

这意味着 MyClass 没有任何公共事件（可通过 COM 互操作访问）。

如果 .NET 对象是在 VB.Net 中创建的，则可以`Event`像使用 VB6 一样使用标准关键字。C# 将需要`event`关键字和关联的`delegate`. COM Interop 将处理 .NET 事件和 COM 事件之间的转换。

# javascript - 如何在浏览器中检测特定于触摸的*行为*？

> ID：12233238
> 
> 赞同：1
> 
> 时间：2012-09-02T03:41:26.587
> 
> 标签：javascript, iphone, ios, ipad, touch

移动 Safari 的行为与桌面浏览器不同：

*   **滚动行为**：该`scroll`事件在整个滚动中触发一次；
*   **页面缩放行为**：用户缩放保持初始页面宽度（不像桌面上的ctrl+），会带来*无法使用等问题`position: fixed;`*

有没有办法分别**检测这两个问题，**而不是依赖 UA 嗅探或检查触摸事件？

这些浏览器可能还有其他问题，如果您知道，请指出。

# model-view-controller - 为基于 nodejs 的 MVC 平台构建插件系统

> ID：12233241
> 
> 赞同：14
> 
> 时间：2012-09-02T03:42:33.710
> 
> 标签：model-view-controller, node.js, plugins, express

我希望能够在插件样式系统中为我的应用程序构建功能，原因如下：

1.  新项目可以选择哪些插件是必要的，并且没有不需要的功能代码
2.  其他开发人员可以为系统构建插件，而不需要太多的核心工作知识。

我不太确定如何实现这一点。我想有一个`plugins`文件夹来单独托管这些，但我想我的问题是：

1.  插件如何与核心系统交互？
2.  文件夹结构如何工作？每个都持有标准的 MVC 结构：控制器、服务、模型、视图等吗？

我想是否有人有与此技术相关的教程或一些文档会有所帮助。我已经进行了一些搜索，但它与他们正在使用的实际代码而不是概念的关系有点过于密切，而且我没有找到任何与 nodejs 相关的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-15T10:31:11.730

我建议采用类似于我在 uptime 项目 ( [https://github.com/fzaninotto/uptime/blob/master/app.js#L46](https://github.com/fzaninotto/uptime/blob/master/app.js#L46) ) 中所做的方法：

*   在应用程序的关键部分触发应用程序事件
*   在应用程序配置中添加“插件”部分
*   每个插件名称必须是包名称。插件包应该返回一个回调，或者一个带有 init() 函数的对象。
*   无论哪种方式，在调用 init() 或执行回调时向插件注入它们需要运行的对象（配置、连接等）。
*   插件模块注册应用程序事件的监听器并修改它

好处：

*   轻的
*   依赖 npm 进行依赖
*   不要重蹈覆辙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T02:43:38.120

为基本功能创建插件原型，并让用户在模块中定义其插件。在模块中，用户将从原型继承一​​个对象，扩展其功能，然后导出一个返回插件对象的构造函数。

主系统通过 require("pluginname") 加载所有插件，并为每个插件调用构造函数。

# c# - 默认情况下导入 C# 应用程序的 DLL

> ID：12233248
> 
> 赞同：0
> 
> 时间：2012-09-02T03:43:28.220
> 
> 标签：c#, linker, default

我找不到这方面的任何信息。有没有人列出所有与 C# 可执行文件默认链接的 C# DLL（例如 System.Core.dll）？

我正在使用 csc.exe 编译 C# 代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T05:23:35.793

任何 C#（最终是 .NET）程序的*绝对*最小“导入 dll”是`mscorlib.dll`. 这总是被隐式引用。它包含 BCL（基类库）中所需的绝对最小类型，并且是任何语言下的所有 .NET 程序所必需的。

如果您想知道 Visual Studio 中默认引用哪些程序集，这取决于您所针对的项目、编程语言和框架版本。这些额外的程序集通常提供额外的语言支持以及不属于 BCL 但通常有用的其他功能（例如 LINQ）。

例如，针对 .NET 4.0 的 AC# 控制台应用程序默认引用这些程序集（在 VS2010 中）：

```
Microsoft.CSharp（.NET 4.0 及更高版本）（动态支持）
系统（所有版本）（BCL 中的所有其他内容）
System.Core（.NET 3.5 及更高版本）（LINQ 和其他增强功能）
System.Data（所有版本）（ADO.NET）
System.Data.DataSetExtensions（.NET 3.5 及更高版本）（ADO.NET 的 LINQ 扩展）
System.Xml（所有版本）（XML）
System.Xml.Linq（.NET 3.5 及更高版本）（用于 XML 的 LINQ 扩展）

```

如果您打算编写一个基本的控制台应用程序，您可能只需要`System`和`System.Core`. 如果您特别需要使用 XML 或需要创建数据集，请参考相应的程序集。

# c++ - 平方根元函数？

> ID：12233251
> 
> 赞同：6
> 
> 时间：2012-09-02T03:44:04.540
> 
> 标签：c++, templates, metaprogramming, sqrt

是否可以使用具有以下签名的元函数计算整数的平方根：

```
template<unsigned int N> inline double sqrt(); 
```

（或者也许使用 constexpr 关键字，我不知道什么是最好的）。这样，`sqrt<2>()`将`1.414...`在编译时替换为。

这种功能的最佳实现是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-02T04:58:50.450

这可能不是您想要的，但我想确保您意识到通常通过优化编译器无论如何都会在编译时计算结果。例如，如果您有以下代码：

```
void g()
{
  f(sqrt(42));
} 
```

使用带有优化 -O2 的 g++ 4.6.3，生成的汇编代码为：

```
 9 0000 83EC1C                subl    $28, %esp
  11 0003 DD050000              fldl    .LC0
  12 0009 DD1C24                fstpl   (%esp)
  13 000c E8FCFFFF              call    _Z1fd
  14 0011 83C41C                addl    $28, %esp
  16 0014 C3                    ret
  73                    .LC0:
  74 0000 6412264A              .long   1244009060
  75 0004 47EC1940              .long   1075440711 
```

sqrt 函数从未被实际调用，其值只是作为程序的一部分存储。

因此，要创建在技术上满足您要求的功能，您只需要：

```
template<unsigned int N> inline double meta_sqrt() { return sqrt(N); } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-29T16:34:16.907

Eigen 包含`meta_sqrt`使用二进制搜索的这个：

```
template<int Y,
         int InfX = 0,
         int SupX = ((Y==1) ? 1 : Y/2),
         bool Done = ((SupX-InfX)<=1 ? true : ((SupX*SupX <= Y) && ((SupX+1)*(SupX+1) > Y))) >
                                // use ?: instead of || just to shut up a stupid gcc 4.3 warning
class meta_sqrt
{
    enum {
  MidX = (InfX+SupX)/2,
  TakeInf = MidX*MidX > Y ? 1 : 0,
  NewInf = int(TakeInf) ? InfX : int(MidX),
  NewSup = int(TakeInf) ? int(MidX) : SupX
};
  public:
    enum { ret = meta_sqrt<Y,NewInf,NewSup>::ret };
};

template<int Y, int InfX, int SupX>
class meta_sqrt<Y, InfX, SupX, true>
{
    public:  enum { ret = (SupX*SupX <= Y) ? SupX : InfX };
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T04:37:09.420

我看到的问题是 metaP 有效地将枚举滥用到变量中。问题是枚举在内部被视为整数，这排除了尝试从中获取浮点值的可能性。但是，您可以创建自己的浮点格式来创建两个结果，一个整数部分和一个指数。您仍然必须将其处理为浮点数，如`Out = Sqrt<42>::mantissa * pow(10,Sqrt<42>::exponent);`. 实际上确定值留给读者作为练习，但您可能必须向上缩放输入（按 10 的偶数幂），计算根，并存储您之前使用的 -power/2。

要计算 sqrt<42>，您首先将指数枚举设置为合适的幂，例如“-4”（越小，小数越多，但要注意溢出）。然后将输入乘以“10^(-2*exponent)”。在这种情况下，您会得到 42*10^8 = 4200000000。然后，您可以取这个值的根，得到“64807”作为最终值。在运行时，您计算 "val * 10 ^ exponent" = "64807 * 10 ^ -4" = 64807 * 0.0001 = 6.4807m 并将其存储到浮点数中。

额外的转换工作有点违背了目的，但您可以通过将指数存储为 10^k （即 10^4）然后执行`out=sqrt<x>::mantissa/sqrt<x>::exponent`.

**编辑**我刚刚注意到，使用尾数/指数方法，指数的选择是任意的，只要它大于最终根的整数部分。它甚至可以是一个常数，这可以简化元函数的设计。例如，在 42 的情况下，您可以选择“指数”始终为 6000。然后将输入乘以 6000^2，取乘积的整数根，然后在运行时将结果除以 6000 得到根. 它没有将输出视为 a*10^b，而是使用关系 sqr(x*b^2)=sqr(x)*b。数学检查：

*   42*6000*6000=1512000000
*   平方（1512000000）=38884
*   38884/6000=6.4806（平方为 41.999）

# c# - 依赖注入和程序集引用

> ID：12233252
> 
> 赞同：3
> 
> 时间：2012-09-02T03:44:27.283
> 
> 标签：c#, asp.net-mvc, dependency-injection

我有一个我希望是关于 MVC 应用程序中的依赖注入的基本问题，但我无法找到令人满意的答案。我的应用程序由一个 MVC 3 项目、一个服务层类库 (SL) 和一个数据访问类库 (DAL) 组成。SL 和 DAL 都包含它们各自的接口和实现。MVC 项目同时引用了 SL 和 DAL 项目。MVC 项目将创建 DAL 的实现并将其注入到接受 DAL 接口的 SL 构造函数中。

我担心的是，为了让 SL 接受 DAL 接口作为参数，它还需要对 DAL 项目的引用（接口恰好存在于其中，但也存在实现），这似乎违反了 DI，因为现在 MVC 和SL 项目需要对 DAL 程序集的引用。

长话短说，将 DAL 接口移动到自己的项目中是否更有意义，以便 SL 只需要引用接口项目而不是实现项目？MVC 项目显然需要同时引用接口和实现项目，而 DAL 也需要引用接口项目。这似乎是一种更清洁的做事方式，即使它在我的解决方案中添加了另一个项目，这并没有让我很困扰。我还看到了将 DAL 接口存储在 SL 中并具有 DAL 参考 SL 的建议，但这对我来说似乎不正确。任何见解或建议表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T03:48:30.857

看一下洋葱架构：

[http://jeffreypalermo.com/blog/the-onion-architecture-part-1/](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/)

[http://jeffreypalermo.com/blog/the-onion-architecture-part-2/](http://jeffreypalermo.com/blog/the-onion-architecture-part-2/)

[http://jeffreypalermo.com/blog/the-onion-architecture-part-3/](http://jeffreypalermo.com/blog/the-onion-architecture-part-3/)

让 UI 程序集引用所有服务和业务逻辑程序集是非常好的。服务层显然应该引用不应依赖于任何更高级别的基础结构组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T15:21:17.520

真正的组件必须在单独的程序集中有它们的接口和它们的实现。

这允许您像加载项一样动态加载适当的实现。通常它也是避免循环引用的唯一方法。例如，DAL 需要知道模型（业务类），并且模型可能希望通过 DAL 调用延迟加载依赖模型，这会创建循环引用（.NET 禁止循环程序集引用）。如果接口位于单独的程序集中，则 DAL 和模型程序集都具有对这两个接口程序集的引用，并通过构造函数获取依赖项。

```
// Assembly: Model contracts

public interface IModelA
{
    IModelB ModelB { get; }
    ...
}

public interface IModelB
{
    ...
}

public interface IModelFactory
{
    IModelA CreateModelA();
    IModelB CreateModelB();
}

// Assembly: DAL contracts, references Model contracts

public interface IDAL
{
    IModelA LoadA(int id);
    IModelB LoadB(int id);
}

// Assembly: Model implementation, references Model and DAL contracts

public class ModelA : IModelA
{
    private IDAL _dal;

    public ModelA (IDAL dal)
    {
        _dal = dal;
    }

    private IModelB _modelB;
    public IModelB ModelB
    {
        get {
            if (_modelB == null) {
                _modelB = _dal.LoadB(5);
            }
            return _modelB;
        }
    }
}

// Assembly: DAL implementation, references Model and DAL contracts

public class DAL : IDAL
{
    private IModelFactory _modelFactory;

    public DAL(IModelFactory _modelFactory)
    {
        _modelFactory = modelFactory;
    }

    public IModelA LoadA(int id)
    {
        IModelA modelA = _modelFactory.CreateModelA();
        // fill modelA with data from database
        return modelA;
    }

    public IModelB LoadB(int id)
    {
        IModelB modelB = _modelFactory.CreateModelB();
        // fill modelB with data from database
        return modelB;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T04:04:05.910

正如规则所说，只要您依赖接口而不是具体实现就可以了。所以你可以做的是将你的接口放在单独的程序集中，并在你想要的任何地方引用它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T14:42:59.200

引用其中包含具体类型的程序集可能是一个问题，但这取决于您要实现的目标。通过让服务仅依赖于抽象，您可以实现松散耦合的代码。这提高了可维护性。

让您的 BL 程序集仅引用包含抽象（而不是实现）的程序集允许您独立部署软件的各个部分。例如，假设您想将您的软件部署给不同的客户，并且您有多种类型的 DA 层，但不想将所有 DA 类型部署给所有客户（例如，因为他们需要为每个 DA 层付费，或者可能您试图保护您的知识产权）。

因此，如果分离不是部署的问题，您不必创建单独的程序集。

# reverse-proxy - 可以通过 cloudflare 路由游戏服务器流量吗？

> ID：12233254
> 
> 赞同：0
> 
> 时间：2012-09-02T03:44:36.893
> 
> 标签：reverse-proxy, ddos, cloudflare

我在我的网站上使用 cloudflare，我们有一个游戏服务器，我想知道是否可以通过 cloudflare 路由流量。

当我意识到我可以通过另一个 cloudflares 端口 (8080) 路由 Shoutcast 时，这最近突然出现在我的脑海中，该端口不做任何性能增强或任何它只是充当反向代理并阻止 DDoS 的事情。

然后我尝试使用我的游戏服务器 IP cloudflared 设置一个子域，然后 ping IP 和端口。它似乎有连接，但实际上通过游戏连接时却没有。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T03:55:29.627

不; Cloudflare 仅适用于 HTTP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-01T12:13:38.977

如果您禁用“橙色”云，在您设置的子域上，您应该能够访问该端口，即使该域本身是通过 CloudFlare 托管的。橙色云是 CloudFlare 的服务模式设置，它基本上是一个开/关开关。

> 橙色云意味着您的网络流量将通过 CloudFlare 系统，使您的网站更快、更安全、更智能。灰色的云表示您的流量不会通过 CloudFlare 系统。

[资源](https://support.cloudflare.com/hc/en-us/articles/200169626-What-subdomains-are-appropriate-for-orange-gray-clouds-)

# python - 如何将 [ ] 中的单词转换为 line 中的单词？

> ID：12233257
> 
> 赞同：0
> 
> 时间：2012-09-02T03:45:28.443
> 
> 标签：python

> **可能重复：**
> [如何加入字符串列表？](https://stackoverflow.com/questions/2426988/how-to-join-list-of-strings)

我在一个模块中有几个要运行的函数。首先，我必须使用`read()`读取文档中的字符串并将其保存为 new_string 并运行一个函数。然后，我需要使用`readlines()`. 运行第一个函数后，如`match = clean_passage(new_string)`then match contains `['/n', 'asdf', 'dfg']`。现在，我需要将它们排成一行，如原始文档中所示。所以，asdf dfg。如何将匹配转换为包含字符串的内容，其方式与我们使用`readlines()`.

到目前为止，要做到这一点，我必须保存它，然后使用 . 打开它`readlines()`，这需要时间。有没有办法使用简单的命令来做到这一点？对不起，如果解释不清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T03:49:20.603

尝试这个：

```
to_convert  =  ['/n', 'asdf', 'dfg']

original_line = " ".join(to_convert) 
```

# asp.net - 在 Webapicontroller 中提供多个 maproutes

> ID：12233259
> 
> 赞同：1
> 
> 时间：2012-09-02T03:46:38.233
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-4

我的 Web API 控制器中有两种方法，如下所示：

```
public samplecontroller: webapicontroller
{

     [HttpPost]    
     public void PostMethod()

     [HttpGet]
     public void GetValues(int a,int b)
} 
```

我在 global.asax 中有以下内容：

```
 routes.MapHttpRoute

 ("Default API Route", "api/{controller}/{id1}/{id2}/{id3}/{id4}/{id5}", 

  new { id1 = UrlParameter.Optional, id2 = UrlParameter.Optional, id3 = UrlParameter.Optional, id4 = UrlParameter.Optional, id5 = UrlParameter.Optional }); 
```

如果我想调用第二种方法，即，`GetValues(int a,int b)`我可以在 Global.asax 中再写一个 HttpRoute 如下吗？

```
routes.MapHttpRoute(
     name: "ActionApi",
     routeTemplate: "api/{Sample}/{GetValues}/{a}/{b}",
     defaults: new { a = UrlParameter.Optional, b=UrlParameter.Optional }
); 
```

那么我可以在 global.asax 中创建多个 maproute 吗？

而且，为了提供可选参数，我是否应该只提供与 a 和 b 等参数相同的参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T04:26:24.813

你可以在 global.asax 中有多个路由；每个传入的请求都将转到匹配的第一个路由。这意味着*更具体*的应该先行。如果满足以下条件，则 URL 与路由匹配：

1.  和`controller`route`action`值已定义。
2.  定义了所有必需的路由值（路由中大括号中的值，以及 Action 中的不可为空的参数）。

也就是说，您提出的路线*api/{Sample}/{GetValues}/{a}/{b}*没有意义。它创建了两个新的（无意义的）路由值`Sample`and `GetValues`，并且不提供定义`controller`or `action`。我想你的意思是这样写的：

```
routeTemplate: "api/Sample/GetValues/{a}/{b}",
defaults: new { controller: "Sample", action: "GetValues", a = UrlParameter.Optional ,b=UrlParameter.Optional } 
```

这将使 URI`/api/Sample/GetValues/1/2`与您的操作相匹配。

```
routeTemplate: "api/Sample/GetValues/{a}/{b}",
defaults: new { controller: "Sample", action: "GetValues", a = UrlParameter.Optional ,b=UrlParameter.Optional } 
```

# android - Android，如何接收 Process.sendSignal() 发送的信号？

> ID：12233266
> 
> 赞同：0
> 
> 时间：2012-09-02T03:48:32.617
> 
> 标签：android, process, signals

有一个 Process.sendSignal() 方法显示在： http: [//developer.android.com/reference/android/os/Process.html#sendSignal](http://developer.android.com/reference/android/os/Process.html#sendSignal(int) (int , int)

我的问题是：如何在目标进程中接收、检测、捕获、处理或任何可能称为此信号的信号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T11:41:16.583

> 如何在目标进程中接收、检测、捕获、处理或任何可能称为此信号的信号。

AFAIK，你不能，除非在 C/C++ 中。在 SDK 级别上，信号并不是 Android 中 IPC 的一种形式。

> 一个意图是任务 A。另一个意图是任务 B。

不，他们不是。一个`Intent`是*数据*。这是一条*消息*。这不是一个“任务”。

> 我想让 Intent A 发出 Intent B 做某事的信号

这类似于说“我希望这个字节向另一个字节发出信号”。

# java - ClassNotFoundException：org.aopalliance.intercept.MethodInterceptor

> ID：12233267
> 
> 赞同：0
> 
> 时间：2012-09-02T03:48:34.900
> 
> 标签：java, tomcat, aspectj

我正在使用 Tomcat 7 开发 Hibernate3 Spring3 项目启动器，
我正在努力处理这个 ClassNotFoundException - aopalliance 拦截器 Jar（这是 AspectJ 吗？？）
尽管事实上 Jar 存在于类路径中。
我从 maven 不明白的是，我在哪里使用这个 Jar - 谁依赖这个 Jar？

```
[INFO] +- org.hibernate:hibernate-core:jar:3.3.2.GA:compile
[INFO] |  +- antlr:antlr:jar:2.7.6:compile
[INFO] |  +- javax.transaction:jta:jar:1.1:compile
[INFO] |  \- org.slf4j:slf4j-api:jar:1.5.8:compile
[INFO] +- org.hibernate:hibernate-entitymanager:jar:3.3.2.GA:compile
[INFO] |  +- org.hibernate:hibernate:jar:3.2.6.ga:compile
[INFO] |  |  +- net.sf.ehcache:ehcache:jar:1.2.3:compile
[INFO] |  |  \- asm:asm-attrs:jar:1.5.3:compile
[INFO] |  +- org.hibernate:hibernate-annotations:jar:3.3.1.GA:compile
[INFO] |  +- org.hibernate:hibernate-commons-annotations:jar:3.0.0.ga:compile
[INFO] |  +- org.hibernate:ejb3-persistence:jar:1.0.1.GA:compile
[INFO] |  \- javassist:javassist:jar:3.4.GA:compile
[INFO] +- junit:junit:jar:4.8.1:test
[INFO] +- org.springframework:spring-core:jar:3.0.5.RELEASE:compile
[INFO] |  \- org.springframework:spring-asm:jar:3.0.5.RELEASE:compile
[INFO] +- javax.servlet:servlet-api:jar:2.4:compile 
```

这是有问题的jar：

```
[INFO] +- aopalliance:aopalliance:jar:1.0:compile

[INFO] +- org.springframework:spring-expression:jar:3.0.5.RELEASE:compile
[INFO] +- org.springframework:spring-web:jar:3.0.5.RELEASE:compile
[INFO] +- org.springframework:spring-beans:jar:3.0.5.RELEASE:compile
[INFO] +- org.springframework:spring-context:jar:3.0.5.RELEASE:compile
[INFO] +- org.springframework:spring-aop:jar:3.0.5.RELEASE:compile
[INFO] +- org.springframework:spring-context-support:jar:3.0.5.RELEASE:compile
[INFO] +- org.springframework:spring-tx:jar:3.0.5.RELEASE:compile
[INFO] +- org.springframework:spring-orm:jar:3.0.5.RELEASE:compile
[INFO] +- org.springframework:spring-jdbc:jar:3.0.5.RELEASE:compile
[INFO] +- org.springframework:spring-test:jar:3.0.5.RELEASE:test
[INFO] +- org.springframework:spring-webmvc:jar:3.0.5.RELEASE:compile
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T08:01:45.803

> 谁依赖这个 Jar？

Spring 框架需要它用于 Spring AOP。独立的 AspectJ 不需要它。

# python - 引用 Python 列表元素而不指定索引

> ID：12233273
> 
> 赞同：1
> 
> 时间：2012-09-02T03:50:21.043
> 
> 标签：python, indexing

如何在不指定索引号的情况下将值存储在列表中？

例如

```
outcomeHornFive=5

someList = []
someList.append(outComeHornFive) 
```

而不是这样做，

```
someList[0] # to reference horn five outcome 
```

我怎么能做这样的事情？原因是我需要在列表中引用许多项目，我只是认为跟踪哪个索引是什么真的很不方便。

```
someList.hornFive 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T03:51:54.407

如果您想通过属性访问（或通过名称）引用事物，您可以使用其他数据结构。

你可以把它们放在一个 中`dict`，或者创建一个类，或者做其他事情。这取决于您希望与该对象进行何种其他交互。

（PS，我们称这些列表，而不是数组）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T03:56:12.980

您可以使用字典来代替使用列表。

请参阅python 文档中的[数据类型](http://docs.python.org/tutorial/datastructures.html)。

字典允许您使用键查找值：

```
my_dict["HornFive"] = 20 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T03:57:44.980

你不能也不应该。如果你能做到这一点，你会如何引用列表本身？您*需要*参考列表本身。

> 原因是我需要在列表中引用许多项目，我只是认为跟踪哪个索引是什么真的很不方便。

不管你如何组织你的数据，你都需要做一些类似的事情。如果您有单独的变量，则需要知道哪个变量存储了什么。如果您对此有所了解，您仍然需要知道bare`someList`是指“五号角”而不是“六号角”。列表和字典的一个优点是您可以分解出这些知识并编写通用代码。字典，甚至是自定义类（*如果*存在有限数量的语义不同的属性，并且您永远不必将其用作集合），可以通过给它一个实际名称而不是数字索引来帮助提高可读性.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T04:36:31.087

引用自[http://parand.com/say/index.php/2008/10/13/access-python-dictionary-keys-as-properties/](http://parand.com/say/index.php/2008/10/13/access-python-dictionary-keys-as-properties/)

如果您的字典通过点表示法而不是字典语法，假设您想访问这些值。也就是说，你有：

```
d = {'name':'Joe', 'mood':'grumpy'} 
```

你想通过“名字”和“心情”

d.name d.mood

而不是通常的

```
d['name']
d['mood'] 
```

你为什么想做这个？也许你喜欢 Javascript 方式。或者你觉得它更美观。在我的情况下，我需要使用相同的代码来处理 Django 模型实例或普通字典的项目，因此我需要提供一种获取属性的统一方式。

事实证明这很简单：

```
class DictObj(object):
    def __init__(self, d):
        self.d = d

    def __getattr__(self, m):
        return self.d.get(m, None)

d = DictObj(d)
d.name
# prints Joe
d.mood
# prints grumpy 
```

# ios - iOS - UIImagePickerController 在设备上崩溃

> ID：12233277
> 
> 赞同：3
> 
> 时间：2012-09-02T03:50:58.080
> 
> 标签：ios, crash, uiimagepickercontroller

这段代码在模拟器中运行良好，但每次在设备（iPhone 3GS）上崩溃，就在我拍照的时候。这段代码有问题吗？当我使用分配进行概要分析时，当它崩溃时活动内存只有 3-4 MB，所以看起来应用程序没有内存不足。我正在使用ARC。

```
-(IBAction)chooseImageNew:(UIButton*)sender
{
if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
{

    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.delegate = self;

    imagePicker.allowsEditing = YES;
    imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;

    [self presentModalViewController:imagePicker animated:YES];
}
else {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"No Camera Available." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
} 
```

}

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
UIImage *img = [info objectForKey:@"UIImagePickerControllerEditedImage"];
self.userPicture.image = img;
[self.images replaceObjectAtIndex:0 withObject:img];

[self dismissModalViewControllerAnimated:YES];

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T09:44:17.927

这`self.userPicture.image = img;` 会将图像分配给 UIImageView 吗？

在你这样做之前，你必须调整它的大小，ImagePickerController 回调会为你提供一个 JPEG 表示的图像，但是一旦你在 UIImageView 中显示该图像，数据就会被解码为原始格式。3GS 以 2048x1536 的分辨率拍摄照片，这相当于 12 MB 的数据，这对于 3GS 来说可能已经太多了。

有一些可以调整大小的类别，比如这个优秀的：http: [//vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/)

如果您使用它，只需在分配给 imageView 之前调用它：

`UIImage* pickedImage = [sourceImage resizedImageWithContentMode:UIViewContentModeScaleAspectFit bounds:CGSizeMake(960, 960) interpolationQuality:kCGInterpolationHigh];`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T13:23:18.443

当您的方法返回时，您对选择器的引用将被释放。将其设为 ivar：

> UIImagePickerController *imagePicker

编辑：另外，在最后一个委托消息之后，不要释放（ARC：nil out）这个 ivar：也就是说，向主线程分派一个块，这样它就完成了一个运行循环旋转！[问我怎么知道的:-)]

# php - 在多维数组中取消设置具有特定值的数组？

> ID：12233282
> 
> 赞同：0
> 
> 时间：2012-09-02T03:51:55.740
> 
> 标签：php

我正在检查多维数组中子数组中的某些元素是否不等于某个值，并使用多维数组中的该值取消设置数组。我构建了一个函数，以便我可以轻松地实现它，但是它似乎不起作用。

```
function multi_unset($array, $unset) {
    foreach($array as $key=>$value) {
        $arrayU = $array[$key];
        $check = array();
        for($i = 0; $i < count($unset); $i++) { // produces $array[$key][0, 2, 3]
            array_push($check, $arrayU[$unset[$i]]);
        }
        if(in_array("-", $check)) {
            unset($array[$key]);
        }
    }
    return $array;
}
$arr = array(array("-", "test", "test", "test"), array("test", "test", "test", "test"));
$unset = array(0, 2, 3); // keys in individual arrays to check
multi_unset($arr, $unset);
print_r($arr); // Should output without $arr[0] 
```

在这种情况下，我正在检查每个子数组中是否有一个“-”值，并从多数组中取消设置数组。我只检查子数组 (0, 2, 3) 中的特定键，但是它输出一个数组而没有任何更改。我想我一定有一些范围错误，并试图在任何可能的地方使用“全局”，但这似乎并没有解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T04:14:29.053

您可能想阅读一下通过引用传递与 PHP 中的值传递。这是一些适用于给定数据集的代码....

```
// Note the pass by reference.
function multi_unset(&$array, $unset) {
    foreach($array as $pos => $subArray) {
        foreach($unset as $index) {
            $found = ("-" == $subArray[$index]);
            if($found){
                unset($subArray[$index]);
                            // Ver 2: remove sub array from main array; comment out previous line, and uncomment next line.
                            // unset($array[$pos]);
            }
            $array[$pos] = $subArray;  // Ver 2: Comment this line out
        }
    }
    //return $array; // No need to return since the array will be changed since we accepted a reference to it.
}
$arr = array(array("-", "test", "test", "test"), array("test", "test", "test", "test"));
$unset = array(0, 2, 3);
multi_unset($arr, $unset);
print_r($arr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T04:21:12.270

稍微修改您的版本并处理返回值。

```
function multi_unset($array, $unset)
{
    $retVal = array();
    foreach($array as $key => $value)
    {
        $remove = false;
        foreach($unset as $checkKey)
        {
            if ($value[$checkKey] == "-")
                $remove = true;
        }
        if (!$remove)
            $retVal[] = $value;
    }
    return $retVal;
}

$arr = array(array("-", "test", "test", "test"), array("test", "test", "test", "test"));
$unset = array(0, 2, 3);
$arr = multi_unset($arr, $unset);
print_r($arr); 
```

# php - 如果帖子中有超过 1 个图像，则 PHP preg_match_all 与 Wordpress 一起回显图像

> ID：12233284
> 
> 赞同：0
> 
> 时间：2012-09-02T03:52:56.933
> 
> 标签：php, wordpress

基本上我想要完成的是如果有超过 1 个 img 它将回显下面的语句，所以我基本上可以有一个翻转说点击查看更多。另一个问题是，如果我将它更改为“a href”并将永久链接回显到 post_id，我将如何让它链接到帖子本身。

任何帮助将不胜感激。

```
function catch_images() {
  global $post, $posts;
  $first_image = '';
  ob_start();
  ob_end_clean();
  $output = preg_match_all('/<img.+src=[\'"]([^\'"]+)[\'"].*>/ii', $post->post_content, $matches);
  $first_image = $matches [2] [0];
  if ($output == '2') {
  echo '<div class="seemore"><img src="images/magglass.png"></div><div class="seemoretext">See More</div>';
  }
} 
```

好吧，我觉得很愚蠢，我应该只写以下内容：

```
if ($output > '2') { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T04:21:45.047

你为什么不做这样的[事情](https://stackoverflow.com/questions/2485011/how-do-i-show-the-number-of-images-attached-to-a-post-on-the-image-attachment-pa)来检查你帖子中附加图片的数量？不过，这假设您的图片已附加到您的帖子中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T05:32:25.490

好吧，正如评论中所说，如果它有超过 2 个图像，我并没有真正理解你想要链接到图像本身的什么？到附件页？到另一个职位？无论如何，这样的事情应该可以工作 - 阅读并执行评论以满足您的需求..

（第二个问题我没看懂……）

```
 $args = array(
    'post_type' => 'attachment',
    'numberposts' => -1,
    'post_status' => 'published', // or NULL
            //'post_mime_type' => 'image', // only if you want images alone
    'post_parent' => $post->ID
        );

    $attachments = get_posts($args);

$counter = 0;
$attachments = get_posts( $args );
 if ( $attachments ) {
    foreach ( $attachments as $attachment ) {
        if (!$counter == 1) {
        echo wp_get_attachment_image($attachment->ID);
            }
        else {
        // uncomment the following line if you want a LIST of all following attachments and then delete the marked line
        //echo '<a href = ' . wp_get_attachment_url($attachment->ID) . '> see more (image'. $counter .') </a>' ;
            }
    ++$counter;
    } 
      // Delete this line if you have more than 2 images, otherwise it will show the last one only
      echo '<a href = ' . wp_get_attachment_url($attachment->ID) . '> see more (image'. $counter .') </a>' ;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T11:19:29.937

以下是我自己的问题的答案，如果给定帖子中有超过 1 个 img src 标签，它将回显。

```
function catch_images() {
  global $post, $posts;
  $first_image = '';
  ob_start();
  ob_end_clean();
  $output = preg_match_all('/<img.+src=[\'"]([^\'"]+)[\'"].*>/ii', $post->post_content, $matches);
  $first_image = $matches [0] [1];
  if ($output > '2') {
  echo '<div class="seemore"><div class="seemoreimg"><img src="images/magglass.png"></div><div class="seemoretext">See More</div></div>';
 }
} 
```

感谢大家的帮助！

# filter - 允许命令行过滤器的编辑器

> ID：12233285
> 
> 赞同：1
> 
> 时间：2012-09-02T03:53:20.280
> 
> 标签：filter, editor

有谁知道允许在当前选择或文档上运行自定义过滤器（如 perl、python、sh 脚本）的编辑器？像 vim 能够通过过滤器管道缓冲区的能力......但不是 vim。我在windows7上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T03:57:55.807

您可能想检查[Notepad++](http://notepad-plus-plus.org/)。[插件页面](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=Plugin_Central)可能有这样做的东西。

# shellcode - 小于 295 字节的 shell 生成 shellcode

> ID：12233287
> 
> 赞同：1
> 
> 时间：2012-09-02T03:53:21.450
> 
> 标签：shellcode, metasploit

我想要小于 295 字节的 shell 生成 shellcode。Metasploit 通常会生成（远）超过 300 字节的 shell 生成 shellcode。

或者无论如何我可以压缩生成shell的shellcode？

编辑：我需要这些用于 Windows XP/2003 的 shellcode。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T05:30:03.787

尝试使用 aleph1 的 shellcode。它应该足够小。 [http://www.phrack.org/issues.html?issue=49&id=14#article](http://www.phrack.org/issues.html?issue=49&id=14#article)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:32:34.313

你试过壳牌风暴吗？

[http://www.shell-storm.org/shellcode/shellcode-windows.php](http://www.shell-storm.org/shellcode/shellcode-windows.php)

有一些生成 shell 的 shellcode 和其他有效载荷。例如：

[http://www.shell-storm.org/shellcode/files/shellcode-710.php](http://www.shell-storm.org/shellcode/files/shellcode-710.php)

[http://www.shell-storm.org/shellcode/files/shellcode-705.php](http://www.shell-storm.org/shellcode/files/shellcode-705.php)

或者，您可以尝试下载并执行 shellcode，并将 Metasploit 有效负载放入 EXE 文件中。

# google-apps-script - 如何删除谷歌图表并将其替换为谷歌应用程序中的新图表？

> ID：12233293
> 
> 赞同：2
> 
> 时间：2012-09-02T03:55:14.717
> 
> 标签：google-apps-script

我到处搜索我无法想出解决方案。我试图让此代码在每次用户单击“提交”时显示一个图表（该部分有效）。问题出现在用户点击提交不止一次。它多次显示图表。我如何让它删除最后一个图表并用新的图表更新它？

```
function doGet() {
  var uiApp = UiApp.createApplication().setTitle("some title");

  var grid = uiApp.createGrid(3, 2);
  grid.setWidget(0, 0, uiApp.createLabel('Lablel 1'));
  grid.setWidget(1, 0, uiApp.createLabel('Lablel 2'));

  var panel = uiApp.createVerticalPanel();

  panel.add(grid);

  var button = uiApp.createButton('submit');
  var handler = uiApp.createServerHandler('b');
  handler.addCallbackElement(grid);
  button.addClickHandler(handler);

  panel.add(button);
  uiApp.add(panel);

  return uiApp;
 }

function b(e) {
  var app = UiApp.getActiveApplication();

  //gets all my chart data
  var chart = getchartdata()

  //Add chart
  app.add(chart)

  var uiApp = UiApp.getActiveApplication();
  uiApp.close();

  return uiApp;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T07:03:59.933

最简单的方法是为您的图表设置一个单独的面板，并在每次添加图表之前将其清除。VerticalPanel 小部件还有一个可以使用的删除方法。有关我建议的第一个选项，请参见下面的代码

```
function doGet(){
  /* All your other code here */
  uiApp.add(panel);
  var chartPanel = uiApp.createVerticalPanel().setId('chartPanel'); 
  uiApp.add(chartPanel);

  return uiApp;
}

function b(e) {
  var app = UiApp.getActiveApplication();

  //gets all my chart data
  var chart = getchartdata()

  /* Clear chart Panel */
  var chartPanel = app.getElementById('chartPanel');
  chartPanel.clear(); 

  //Add chart
  chartPanel.add(chart)

  var uiApp = UiApp.getActiveApplication();
  uiApp.close();

  return uiApp;
} 
```

*PS：我不确定为什么同一件事有两个不同的变量 app 和 uiApp 。尽管不是您的情况，但它可能会导致混乱和问题。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-18T18:40:45.467

注意到这个问题现在已经有六年了，我的回答更多地适用于从`Sheet`对象中删除图表，而*不是*从 a 中的面板中删除图表`UiApp`，尤其是`UiApp`已弃用的图表：

***“警告：UI 服务已于 2014 年 12 月 11 日弃用。要创建用户界面，请改用 HTML 服务。”***

此答案*不适*用于删除插入`HtmlService`HTML 对话框的图表。

因此，对于那些想要从`Sheet`对象中删除图表的读者来说，下面的代码非常有用：

```
function deleteAllChartsFromSheet(sheetName) {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var chartsSheet = ss.getSheetByName(sheetName); // TODO: validate param sheetName
  var n = chartsSheet.getCharts().length;
  for (var i = n-1; i >= 0; i--) {  // note: delete them in reverse order!
    var chart = chartsSheet.getCharts()[i];
    chartsSheet.removeChart(chart);
  }
} 
```

# javascript - 当滚动条出现时，FancyBox2 导致 Firefox 13 移动 div

> ID：12233298
> 
> 赞同：0
> 
> 时间：2012-09-02T03:56:29.780
> 
> 标签：javascript, jquery, css, firefox, fancybox-2

嘿，所以我有一个问题（当然）。我有一个使用 Jquery FancyBox2 的基本 php 站点（php 部分不重要）。我正要向承包商演示网站的 alpha 版本，但我有一个障碍。当执行 FancyBox2 Jquery 时，在 Firefox 13（并且只有 Firefox，而不是最新版本的 IE、Opera 或 Chrome）中，该框弹出正常，但会弹出相应的整个父文档 y 滚动条，并将整个站点像左一样关闭：-10 px，当您关闭 FancyBox2 实例时，它会恢复正常。当空白 y 滚动条出现 FancyBox2 实例时，似乎没有其他浏览器会移动站点内容。我不想发生这种情况？下面是一些基本代码：

CSS：是的，它有点超载，忽略错误并专注于手头的问题，后端和设计的 alpha 阶段。

```
body
{
font-family:            'Goudy Bookletter 1911', serif;
overflow-x:             hidden;
text-align:             center;
horizontal-align:       baseline;
color:                  #4D60A4;
}
#site_container
{
-moz-user-select:       -moz-none;          /* disable div selection */
-khtml-user-select:     none;
-webkit-user-select:    none;
-o-user-select:         none:
user-select:            none;
zoom:                   1;                  /* for ie6 */
background-image:       url('http://192.168.254.134:8080/images/main_back6.jpg');
background-repeat:      no-repeat;
background-size:        cover;
width:                  980px;
min-height:             780px;
text-align:             left;
height:                 100%;
left:                   50%;
padding:                0px;
border:                 0px solid #0000FF;
overflow:               hidden;
margin:                 0px auto;
margin-top:             -50px;
} 
```

php: FancyBox2 在本网站中的调用示例。

```
echo "<a class='fancybox' href='" . $row['image1'] . "'>";
echo "<img src='" . $row['image1'] . "' width=200 height=200 /></a>"; 
```

js：我如何称呼 FancyBox2

```
$(document).ready(function(){
    ...
    $(".fancybox").fancybox();
    ...
}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-02T04:54:34.947

哦，好的，明白了。我更多的是后端人员，而不是设计人员。只需将其添加到 css 中：

```
body
{
...
overflow-x: hidden;
overflow: scroll;
...
} 
```

并修复了它。想知道为什么只有 Firefox 需要这种分层修复？是否溢出：滚动css3？无论如何，没关系。

# java - 随机 int 到 .txt 文件错误

> ID：12233301
> 
> 赞同：0
> 
> 时间：2012-09-02T03:57:00.737
> 
> 标签：java, random

我想知道为什么这段代码：

```
import java.io.*;
import java.util.Random;

public class RandomNumbers {
public static void main(String[] args) throws IOException {

    PrintWriter output = new PrintWriter("randomNumbers.txt");
    final int randomNumberCount = 100;
    Random randomGenerator = new Random();

    for (int i = randomNumberCount; i >= 0; i--)
    {
    output.print(randomGenerator.nextInt(10) + " ");
    }
    output.close();

  }
} 
```

给我一个文本文件：

```
‰‹‸‸‹‵‹‴‶′′‴‷″‵‷‴′‶‷‵‹‷′‱″″‸‰‷‸′″‵‹″′‶‶‴‶‴‸′″‹‶‱‱‰‸‸‱‷‶‹‶‶‵‰‹‰‰‹‱‸‷‱‵‶‵‷′‱‵‵‸‸‵‵‱‸‷‸‸‱‸‱‶‱‸″‸′‶″‸‸‷‶′ 
```

当我将其更改为选择 11 或以上的随机数时，它可以工作。如果我将其保持在 10 并使其选择 48 个或更低的随机数，则它可以工作。

我错过了什么？

*编辑* 它将在记事本++中正确显示，但在记事本中不正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T04:04:20.190

将来，尝试 A：指定要使用的字符集（我猜记事本不支持默认的 PrintWriter 之一，仅支持 UTF-8）。或 B：使用不同类型的 OutputStreams，因为看起来 PrintWriter 使用的是记事本无法识别的奇数字符集，因此是随机的时髦字符。

# youtube-javascript-api - Internet Explorer 中的 YouTube Javascript API loadVideoByID 错误

> ID：12233305
> 
> 赞同：5
> 
> 时间：2012-09-02T03:58:55.213
> 
> 标签：youtube-javascript-api

希望有人可以验证这一点或提供一些见解。

player.loadVideoByID() 方法的最基本用法似乎不适用于 IE。

我已经从以下位置部署了 google 入门示例代码：

[https://developers.google.com/youtube/iframe_api_reference](https://developers.google.com/youtube/iframe_api_reference)

到我的网站来说明这个问题。

您可以使用此链接并查看源代码以轻松查看它的实际效果。

[http://www.fuhshnizzle.com/YT.html](http://www.fuhshnizzle.com/YT.html)

您还会注意到，在 chrome、ff 和 safari 中自动播放的示例仅在 IE 中显示播放图标。所以这真的是2个错误。

没有自动播放和 loadVideoByID() 在所有风格的 IE 中都抛出异常。

我已经将 loadVideoByID() 方法调用包装在 try catch 中，您可以看到它不再在 IE 中工作，但在 chrome、ff 和 safari 中很好。

我想这会影响每个使用此方法调用的 IE YT API 应用程序，因此应该是 google/YouTube 团队的主要优先事项。由于 stackoverflow 具有最佳的开发人员响应时间，我想我会在这里寻求支持。

非常感谢！

# python - Python子进程模块：将字符串发送到两个链接的子进程

> ID：12233307
> 
> 赞同：2
> 
> 时间：2012-09-02T03:59:17.503
> 
> 标签：python, subprocess

我正在尝试将一个字符串发送到第一个进程的标准输入并将它的标准输出链接到第二个进程的标准输入

第一个程序是`paps`一个文本到postscript的转换器，它接受一个文本文件或字符串作为输入，并将一个postscript文件输出到stdout

第二个程序是`lpr`，行打印机命令。过程是这样的：

1.  将字符串写入第一个程序的标准输入
2.  将第一个程序的输出通过管道传输到第二个程序的标准输入。
3.  第二个程序的输出在 unix 中像这样自行处理：

`echo "The String" | paps | lpr`

这是我从 python 文档中尝试过的。

```
#!/usr/bin/python

import sys
from subprocess import Popen,PIPE

paps=Popen(["/usr/local/bin/paps"],stdin=PIPE,stdout=PIPE)
lpr=Popen(["/usr/bin/lpr"],stdin=paps.stdout)
paps.communicate("ABCD")
paps.stdout.close()
lpr.communicate()[0] 
```

这是来自文档：

```
#p1 = Popen(["dmesg"], stdout=PIPE)
#p2 = Popen(["grep", "hda"], stdin=p1.stdout, stdout=PIPE)
#p1.stdout.close()  # Allow p1 to receive a SIGPIPE if p2 exits.
#output = p2.communicate()[0] 
```

就我而言，原始输出源自我的程序，并被发送到第一个进程的标准输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:50:48.053

```
lpr=Popen(["/usr/bin/lpr"],stdin=paps.stdout) 
```

怎么样`stdout=PIPE`？

# mysql - 仅使用 SQL 选择、更新或插入后获取主键受影响？

> ID：12233313
> 
> 赞同：-1
> 
> 时间：2012-09-02T03:59:41.420
> 
> 标签：mysql, sql, database

如何获取插入导致的主键（假设通过查看显示键知道他的名字）？如何获取受更新影响的行的主键？（与前一种情况一样，与键名无关）。如何获取从选择查询返回的主键（在查询中，即使键不是调查的字段之一）。

我需要在我的应用程序中插入、更新和选择之后运行 SQLs 命令来获取这些信息，这可能吗？我的数据库是 MySQL。

我只需要 sqls，因为我正在制作缓存查询的逻辑以适用于许多应用程序（java 和 php），并且我希望该逻辑独立于语言。

例子：

从人中选择名字

我需要在此之后执行的查询返回这些人的 pk

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T04:07:43.927

```
SELECT LAST_INSERT_ID(); 
```

说真的，将“插入 mysql 的主键”放入 Google 会得到一个 Stack Overflow 答案作为第一个结果。

编辑：基于评论的更多讨论。

如果您想查看更新影响了哪些行，只需使用与 UPDATE 语句相同的 WHERE 子句和 JOIN 条件执行 SELECT，例如：

```
UPDATE foo SET a = 5 WHERE b > 10;

SELECT id FROM foo WHERE b > 10; 
```

如果您要插入到没有自动增量主键的表中，则无需执行任何特殊操作。您已经知道新的主键是什么，因为您在 INSERT 语句中自己设置了它。如果您想要可以处理来自将跟踪 PK 更改的代码之外的 INSERT 语句的代码，那么您需要解析 INSERT 语句，或者让调用代码提供有关主键的信息。

# ruby-on-rails-3.2 - 由于某种原因，Ruby on Rails 中的 yield(:title) 永远不会等于 false

> ID：12233319
> 
> 赞同：3
> 
> 时间：2012-09-02T04:01:23.440
> 
> 标签：ruby-on-rails-3.2

```
#layouts/application.html.haml
    %title
     = yield(:title) || "Default page title"
     = " | DefaultSite.com"

#application_helper.rb
 def title(page_title)
    content_for(:title) { page_title }
  end 
```

即使我没有`title`为页面设置（帮助方法），`"Default page title"`也永远不会显示。取而代之的是`""`（的值`yield(:title)`）出于某种原因出现。

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T04:04:31.887

这只是 Rails 设计的一部分。你不能改变这种行为。

您应该检查是否 yield(:title).empty? 为真或假，以查看是否调用了 content_for(:title)。

例如，而不是：

```
yield(:title) || "Default page title" 
```

你要：

```
(yield(:title).empty? ? "Default page title" : yield(:title)) 
```

这只是检查它是否为空，如果为空则应用默认值，否则使用标题。

# java - 如何在 gwt 建议框中获取文本、值对

> ID：12233320
> 
> 赞同：0
> 
> 时间：2012-09-02T04:01:24.613
> 
> 标签：java, eclipse, gwt

> **可能重复：**
> [使用自定义对象建议创建 GWT SuggestOracle](https://stackoverflow.com/questions/10249430/creating-a-gwt-suggestoracle-with-custom-object-suggestions)

我需要一个自动建议的组合框来显示不明确的字符串列表。但是everey字符串有一个唯一的ID。需要此 id 才能知道用户选择了什么（将 id 发送回服务器并对其进行处理）。

如何使用 gwt 的 auto-suggest-comboBox " `suggestionBox`" 来实现这一点。有没有办法将 id->name 对列表（如 with `listBox.addItem(String name, String value)`）放入`suggestionBox`？可能通过覆盖`suggestionOracle`？（如何获取所选名称的所选ID？）

还是这个用例最好由另一个 gwt 来实现`widget`？

提前谢谢

# php - JWPlayer 和通过 PHP 代理 MP3 文件

> ID：12233324
> 
> 赞同：0
> 
> 时间：2012-09-02T04:02:01.217
> 
> 标签：php, proxy, rss, jwplayer, playlist

这是一个专为个人使用而设计的项目。

我将[JWPlayer](http://www.longtailvideo.com)安装到我的本地开发服务器上。这是我使用并验证的有效播放列表：

```
<rss version="2.0" xmlns:media="http://search.yahoo.com/mrss/">
    <channel>
        <title>oTunes Web App - Playlist</title>
        <item>
            <title>My Baby Loves Me by Martina McBride on Greatest Hits</title>
            <media:content url="07TheGift.mp3" duration="156" />
        </item>
    </channel>
</rss> 
```

此播放列表不起作用：

```
<rss version="2.0" xmlns:media="http://search.yahoo.com/mrss/">
    <channel>
        <title>oTunes Web App - Playlist</title>
        <item>
            <title>My Baby Loves Me by Martina McBride on Greatest Hits</title>
            <media:content url="ajax.php?ajax=getMP3Version&track=38809" duration="156" />
        </item>
    </channel>
</rss> 
```

ajax.php 已被开发用于处理所有 AJAX 请求，包括充当 MP3 文件的“代理”，因为 MP3 文件位于不可通过 Web 访问的目录（不同的驱动器）中。这是来自 ajax.php 的相关代码片段：

```
$initial = $_GET['initial'];
session_start();
echo $tracks->generatePlaylistString($_SESSION['last_results'], $initial); 
```

这是来自 $tracks 类的相关代码：

```
 function generatePlaylistString($data, $initial) {
            $playlistData = $data;
            $firstToPlay = $initial;
            $round = 1;
            $addToPlaylist = false;
            $playlistString = '<rss version="2.0" xmlns:media="http://search.yahoo.com/mrss/">
    <channel>
        <title>oTunes Web App - Playlist</title>
';
            foreach($playlistData AS $item) {
                if ($item['TrackUniqueID'] == $firstToPlay) {
                    $addToPlaylist = true;
                }
                if ($addToPlaylist) {
                    $durationArray = explode(":", $item['TrackTotalDuration']);
                    $playlistString .= '        <item>
            <title>'.$item['TrackTitle'].' by '.$item['TrackArtist'].' on '.$item['TrackAlbum'].'</title>
            <media:content url="ajax.php?ajax=getMP3Version&track='.$item['TrackUniqueID'].'" duration="'.(($durationArray[0]*60)+$durationArray[1]).'" />
        </item>
';
                }
            }
            $playlistString .= '    </channel>
</rss>';
            return $playlistString;
        } 
```

播放列表的格式正确，因为我用对静态文件（见上文）的调用替换了对代理 PHP 文件的调用，并且歌曲播放正确。我在浏览器中转到 PHP 页面，并提示我播放该文件（它也可以正确播放）。我使用 Firebug 来确认正在发出正确的调用和响应，而且它们都是正确的。但是，当我将对代理 PHP 页面的调用放入播放列表时，出现以下错误：

> 无法加载播放列表：播放列表文件不包含有效的播放列表

我不知道还能做什么，除了将所有 MP3 文件移动到 Web 可访问的目录中（出于控制和资源的原因，我不想这样做）。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T03:37:46.930

改变：

```
<rss version="2.0" xmlns:media="http://search.yahoo.com/mrss/">
    <channel>
        <title>oTunes Web App - Playlist</title>
        <item>
            <title>My Baby Loves Me by Martina McBride on Greatest Hits</title>
            <media:content url="ajax.php?ajax=getMP3Version&track=38809" duration="156" />
        </item>
    </channel>
</rss> 
```

至：

```
<rss version="2.0" xmlns:media="http://search.yahoo.com/mrss/" xmlns:jwplayer="http://developer.longtailvideo.com/trac/wiki/FlashFormats">
    <channel>
        <title>oTunes Web App - Playlist</title>
        <item>
            <title>My Baby Loves Me by Martina McBride on Greatest Hits</title>
            <media:content url="ajax.php?ajax=getMP3Version&track=38809" duration="156" />
            <jwplayer:provider>sound</jwplayer:provider>
        </item>
    </channel>
</rss> 
```

那应该行得通。

# php - PHP 重新格式化 Blogger 日期

> ID：12233329
> 
> 赞同：0
> 
> 时间：2012-09-02T04:04:17.570
> 
> 标签：php, xml

我发现 XML 文件中的日期格式与页面上显示的完全不同。这是一个示例， http: [//google.blogspot.com/feeds/posts/default](http://google.blogspot.com/feeds/posts/default)

XML 的格式是 `<published>2011-04-01T08:06:00.000-07:00</published>`

如何将**2011-04-01T08:06:00.000-07:00**重新格式化为**2011 年 4 月 2 日星期六上午 4:13**

非常感谢您的任何建议和帮助:-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T07:30:05.937

多谢你们！已经搞定了。

```
 $date=strtotime("2011-04-01T08:06:00.000-07:00");
 $date = date('l,F jS Y  g:ia', $date); 
```

# c# - 将文本从多个文本框复制到一个特定文本框，每个新文本框都有换行符

> ID：12233333
> 
> 赞同：0
> 
> 时间：2012-09-02T04:04:48.030
> 
> 标签：c#

原谅长标题！

我刚刚开始将 C# 作为一种爱好来学习，以便在业余时间制作简单的程序。我决定制作（我认为这将是一个简单的小程序来记录笔记）我已经搜索了关于此的示例代码以尝试找出如何实现它，但找不到我正在寻找的确切内容。

这是我需要它做的。

我有 8 个文本框设置和 4 个复选框设置。当用户输入 textbox1 时，我需要将其输入到 textbox 8 + 换行符。输入 textbox2 它应该进入文本框 8 以及另一个换行符，依此类推，一直到文本框 7。如果用户选择复选框，它将把预定的文本放入带有空格的 textbox8 中。每个文本框/复选框的所有输出都应该进入 textbox8。

我已经 `notes_view_text.Text = cust_name_text.Text;` 在我的每个文本框（名称明显更改）中尝试过，也尝试过 `Environment.NewLine` ，我可以让一个文本框输入，然后当我进入下一个文本框时，它会清除我的文本框 8，或者它会在每次击键时转到另一行.

我确信我错过了一些非常简单的东西，需要对语言有非常基本的理解，为此我深表歉意。此外，如果这更困难，那么我想请让我知道，我会尝试使用不同的语言或忘记它。我只是想创建它以在我的工作中更轻松地制作日志记录并将它们复制到剪贴板（知道如何做那部分）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T04:10:49.257

要将文本添加到现有字符串，请使用 += 而不是 =，例如

```
notes_view_text.Text += cust_name_text.Text + Environment.NewLine; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T04:20:28.470

请让我知道这可不可以帮你：

```
void combine()
{
    box8.Text = box1.Text;
    box8.Text += Environment.NewLine;
    box8.Text += box2.Text
    box8.Text += Environment.NewLine;
    box8.Text += box3.Text
    box8.Text += Environment.NewLine;
    box8.Text += box4.Text
    box8.Text += Environment.NewLine;
    box8.Text += box5.Text
    box8.Text += Environment.NewLine;
    box8.Text += box6.Text
    box8.Text += Environment.NewLine;
    box8.Text += box7.Text
} 
```

# google-maps - 查找两个地址之间的步行时间（由谷歌地图计算）（在谷歌电子表格中）

> ID：12233334
> 
> 赞同：1
> 
> 时间：2012-09-02T04:06:02.167
> 
> 标签：google-maps, google-api, google-sheets

我有一个谷歌电子表格，其中有一列物理地址，我希望第二列是在第 1 列中的地址和第二个地址（由谷歌地图确定）之间行走的时间（以分钟为单位）。有关如何完成此任务的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T07:35:18.570

根据我对 Google 地图服务条款的理解，他们：

*   不喜欢人们将他们的服务用作“批量地理编码器”。这意味着

    *   您将需要限制您的请求（在每个连续请求之间放置延迟，以避免 OVER_QUERY_LIMIT 错误）

    *   在不显示地图图形的情况下使用地理编码器（可能还有距离服务）违反服务条款

如果你还想继续，

*   您需要某种方式从电子表格中提取地址。我认为有一个 Google docs API 可以帮助您做到这一点。我还找到了一些自定义的 Javascript 代码，可以轻松地为您做到这一点。我没有链接了:(

*   从 Google Maps Javascript API 读取地址后，您可以调用距离或方向 API 来获取步行距离

*   那么您需要将其保存回电子表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T12:13:20.473

这听起来像是[距离矩阵服务](https://developers.google.com/maps/documentation/distancematrix/)的一个可能应用程序。

但只有在显示地图时才能[使用它](https://developers.google.com/maps/documentation/distancematrix/#Limits)

> 距离矩阵 API 的使用必须与谷歌地图上的信息显示相关；例如，在请求并在地图上显示这些目的地之前，确定彼此在特定驾驶时间内的起点-目的地对。禁止在不显示 Google 地图的应用程序中使用该服务。

# django - Amazon EC2 上的 Django 媒体 URL

> ID：12233335
> 
> 赞同：0
> 
> 时间：2012-09-02T04:06:36.190
> 
> 标签：django, amazon-ec2, amazon, thumbnails, media-url

我正在尝试在 Amazon EC2 实例上托管我的 Django 项目，但我的媒体 URL 存在一些问题（我怀疑）。目前，easy_thumbnails 无法生成任何缩略图，并返回错误：

```
Couldn't get the thumbnail ... The source file does not appear to be an image 
```

在我看来，easy_thumbnails 没有在正确的目录中查找图像或其他内容。调试视图显示我的 URL 配置如下：

```
MEDIA_ROOT: '/opt/python/bundle/6/app/media'
MEDIA_URL: '/media/'
STATIC_ROOT: '/opt/python/bundle/6/app/s'
STATIC_URL: '/static/'
STATICFILES_DIRS: ('/opt/python/bundle/6/app/static',) 
```

在我的本地开发版本上一切都运行良好，所以我有点难过。关于检查什么的任何建议？使用 FileZilla 我可以登录我的 EC2 实例，果然，在我的图像被保存的媒体文件夹中，似乎 easy_thumbnails 没有找到正确的位置或其他东西。

# hadoop - 为什么总是使用单个减速器进行排序？

> ID：12233343
> 
> 赞同：1
> 
> 时间：2012-09-02T04:10:02.317
> 
> 标签：hadoop, hive

我正在尝试执行以下查询，并且加载数据需要很长时间，因为第二个作业只使用了一个减速器。

INSERT INTO TABLE ddb_table SELECT * FROM data_dump sort by rank desc LIMIT 1000000;

为上述查询创建了两个作业。第一项工作运行得非常快，因为它使用了 80 个映射器和大约 22 个减速器。第二个工作映射器很快，但由于单个减速器，它非常慢。

我尝试使用**set mapred.reduce.tasks=35**增加减速器数量，但有趣的是，它仅适用于第一份工作，而不是第二份。

为什么使用单个减速器？是因为 sort by 子句吗？如何设置最大减速器？

有更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T23:36:12.563

我并不积极，但我的直觉是这是因为“限制”，而不是“排序依据”。事实上，“排序依据”显式只会在每个 reducer 中排序，因此您不会得到总排序。

问题在于，如果有多个 reducer，它们的协调程度不够，无法知道何时达到 1000000 条记录。所以要做到limit，就必须只有一个reducer，它维护一个记录数的count，一旦达到limit就停止输出新的。

事实上，即使可以对多个减速器进行“排序”和“限制”，你也可以在不同的运行中获得不同的输出，这取决于哪个减速器运行得最快，所以我不认为你想要什么首先在这里做是有道理的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T21:17:35.500

这只是在 Hadoop 中使用默认 Partitioner 进行排序的方式。默认分区使用 hashcode mod 数量的 reducer，所以如果你想要 35 个 reducer，你将得到 35 个输出文件，每个文件都经过排序，但范围重叠。例如，您有以字母字符 [a..z] 开头的键：file1 (a1,a2,a15,d3,d5,f6), file2(a3,a5,b1,z3) 等。为了避免重叠键范围，您需要一个 Reducer，或者您需要让您的分区程序更加了解键的性质，例如让您的分区程序将具有相同第一个字符的所有键定向到同一个分区，因此会有多个文件在输出中，但没有一个范围会重叠。例如 file1 (a1,a2,a3,a5,a15), file2(b1),file3(....) file4(d3,d6) 等。当我使用标准 Hadoop 作业或 Apache PIG 时，它适用。

# java - 来自 Java Web 服务的空响应对象

> ID：12233344
> 
> 赞同：0
> 
> 时间：2012-09-02T04:10:12.863
> 
> 标签：java, xml, web-services, soap, soapui

我尝试通过在服务中添加一个 main 方法将 Web 服务作为 java 应用程序运行，我得到了所有模型值的完美填充。Oracle 10g DB 有一些 DAO 操作，在我的类路径中有 classes12.jar。

然后我创建了一个 wsdl 并在 SOAP UI 中对其进行了测试。在那里我可以看到该服务正在返回一个空对象作为响应。

wsdl 是使用 Apache AXIS v1.4 创建的。

这意味着生成的 wsdl 不正确，因为当我将其作为 java 客户端应用程序运行时，我的所有代码都运行良好。

**附加信息：**

当 Web 服务中存在的方法的返回类型为整数时，则在使用 SOAP UI 调用 Web 服务时会正确返回该值。但是当我尝试返回模型时，会返回一个空响应对象。

**WSDL：**

```
<!--WSDL created by Apache Axis version: 1.4
 Built on Apr 22, 2006 (06:55:48 PDT)-->
 <wsdl:types>
  <schema elementFormDefault="qualified" targetNamespace="http://service.com"   xmlns="http://www.w3.org/2001/XMLSchema">
  <import namespace="http://model.com"/>
  <element name="getAge">
   <complexType/>
  </element>
  <element name="getAgeResponse">
   <complexType>
    <sequence>
     <element name="getAgeReturn" type="xsd:int"/>
    </sequence>
   </complexType>
  </element>
  <element name="fetchEmployeeDetails">
   <complexType>
    <sequence>
     <element name="empId" type="xsd:int"/>
    </sequence>
   </complexType>
  </element>
  <element name="fetchEmployeeDetailsResponse">
   <complexType>
    <sequence>
     <element name="fetchEmployeeDetailsReturn" type="tns1:EmployeeDetails"/>
    </sequence>
   </complexType>
  </element>
 </schema>
 <schema elementFormDefault="qualified" targetNamespace="http://model.com"    xmlns="http://www.w3.org/2001/XMLSchema">
  <complexType name="EmployeeDetails">
   <sequence>
    <element name="age" type="xsd:int"/>
    <element name="deptId" type="xsd:int"/>
    <element name="empId" type="xsd:int"/>
    <element name="empName" nillable="true" type="xsd:string"/>
    <element name="sex" nillable="true" type="xsd:string"/>
   </sequence>
  </complexType>
 </schema>
</wsdl:types>

  <wsdl:message name="fetchEmployeeDetailsResponse">

  <wsdl:part element="impl:fetchEmployeeDetailsResponse" name="parameters">

  </wsdl:part>

  </wsdl:message>

  <wsdl:message name="getAgeRequest">

     <wsdl:part element="impl:getAge" name="parameters">

     </wsdl:part>

  </wsdl:message>

  <wsdl:message name="getAgeResponse">

     <wsdl:part element="impl:getAgeResponse" name="parameters">

     </wsdl:part>

  </wsdl:message>

  <wsdl:message name="fetchEmployeeDetailsRequest">

     <wsdl:part element="impl:fetchEmployeeDetails" name="parameters">

     </wsdl:part>

  </wsdl:message>

  <wsdl:portType name="WebService1">

     <wsdl:operation name="getAge">

        <wsdl:input message="impl:getAgeRequest" name="getAgeRequest">

      </wsdl:input>

        <wsdl:output message="impl:getAgeResponse" name="getAgeResponse">

      </wsdl:output>

     </wsdl:operation>

     <wsdl:operation name="fetchEmployeeDetails">

        <wsdl:input message="impl:fetchEmployeeDetailsRequest" name="fetchEmployeeDetailsRequest">

      </wsdl:input>

        <wsdl:output message="impl:fetchEmployeeDetailsResponse" name="fetchEmployeeDetailsResponse">

      </wsdl:output>

     </wsdl:operation>

  </wsdl:portType>

  <wsdl:binding name="WebService1SoapBinding" type="impl:WebService1">

     <wsdlsoap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>

     <wsdl:operation name="getAge">

        <wsdlsoap:operation soapAction=""/>

        <wsdl:input name="getAgeRequest">

           <wsdlsoap:body use="literal"/>

        </wsdl:input>

        <wsdl:output name="getAgeResponse">

           <wsdlsoap:body use="literal"/>

        </wsdl:output>

     </wsdl:operation>

     <wsdl:operation name="fetchEmployeeDetails">

        <wsdlsoap:operation soapAction=""/>

        <wsdl:input name="fetchEmployeeDetailsRequest">

           <wsdlsoap:body use="literal"/>

        </wsdl:input>

        <wsdl:output name="fetchEmployeeDetailsResponse">

           <wsdlsoap:body use="literal"/>

        </wsdl:output>

     </wsdl:operation>

  </wsdl:binding>

  <wsdl:service name="WebService1Service">

     <wsdl:port binding="impl:WebService1SoapBinding" name="WebService1">

        <wsdlsoap:address location="http://localhost:8045/WebService1/services/WebService1"/>

     </wsdl:port>

  </wsdl:service> 
```

请帮我解决这个问题。如果需要一些额外的信息，请询问。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:57:53.987

错误是使用 main 方法进行单元测试并将其作为 java 应用程序从 main 方法运行。该问题与 classes12.jar 放置有关。对于 Web 应用程序，jar 应该放在 lib 文件夹旁边。但对于 Java 客户端应用程序来说就不一样了。因此，当我尝试使用 SOAP UI 运行连接对象时，它没有被正确检索。

**结论：**

切勿通过在服务类中添加 main 方法并将其作为 Java 客户端应用程序运行来测试 Web 服务，这可能会导致您出现类似这样的不必要的问题。

# css - Firefox 与 Chrome 中的表单样式

> ID：12233346
> 
> 赞同：0
> 
> 时间：2012-09-02T04:11:22.163
> 
> 标签：css, forms, firefox, google-chrome

我试图让这个注册表单在所有主要浏览器上看起来都一致，或者至少在 Firefox 和 Chrome 上。

[http://www.lukaspleva.com/MoneyThink/new_mentor_application.html](http://www.lukaspleva.com/MoneyThink/new_mentor_application.html)

它在 Chrome 中看起来很棒，特别是就所有输入字段之间的间距而言（它是相等的）。然而，在 Firefox 中，间距/填充有点无处不在。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T04:25:36.203

您已经在 td-s 中拥有每个输入/标签，因此要么给 td-s 宽度（如果输入是 100px 宽，则使其 td 宽 120px），要么增加表格的 cellspacing 属性。但是，不建议使用表格进行布局。改用 CSS 浮动和填充/边距。

# css - Animate.CSS 添加滚动条？

> ID：12233348
> 
> 赞同：7
> 
> 时间：2012-09-02T04:11:56.497
> 
> 标签：css, css-transitions, css-animations, animate.css

我正在使用[Animate.CSS](http://daneden.me/animate/)，并且正在使用“铰链”效果使图像从屏幕上掉下来。当它离开屏幕时，它会在页面上添加一个垂直滚动条。当您滚动时，什么都看不到。为什么要添加这个滚动条，如何防止它被添加？

谢谢！

代码：

**HTML**

```
<img id="animate" class="fear" src="/2012/images/september/fear-sign.png" /> 
```

**CSS**

```
.fear{
     position:absolute;
     left:150px;
     top:0px;
}

#animate {
    -moz-animation-delay: 5s;
    -webkit-animation-delay: 5s;
    -o-animation-delay: 5s;
    -ms-animation-delay: 5s;
    animation-delay: 5s;
} 
```

**JS**

```
var $j = jQuery.noConflict();
   $j(document).ready(function() {
       $j('#animate').addClass('animated hinge');
           }); 
```

这是我创建的[小提琴。](http://jsfiddle.net/Lynda333/FafAH/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T04:16:51.020

您可以只使用`overflow:hidden`，这将阻止滚动条：

```
html,body { overflow: hidden; } 
```

小提琴：http: [//jsfiddle.net/FafAH/2/](http://jsfiddle.net/FafAH/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T04:20:04.303

只需添加

```
body{overflow:hidden;} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-11-24T21:13:06.313

您可以设置`overflow-y`为隐藏以防止垂直滚动条和`overflow-x`隐藏以防止水平滚动条。

```
html, body{
    overflow-y: hidden;
} 
```

# node.js - 寻找在 nodejs 应用程序中管理异步流的主流方法

> ID：12233349
> 
> 赞同：0
> 
> 时间：2012-09-02T04:12:02.953
> 
> 标签：node.js, workflow

我有这个简单的 nodejs 应用程序，它为我的 Web 应用程序生成虚拟日期。它所做的只是：

1.  删除虚拟数据库
2.  填充库存集合
3.  填充发票集合
4.  填充 const 数据集合

当然，所有的动作都是异步的，我想一个接一个地顺序执行。对我来说，写一些东西来管理这种流更简单，但是，我想要一个主流的解决方案，它可以支持其他类型的流。例如，并行运行并在第一次失败时停止所有操作。

供您参考，请在骨架下方找到描述我的解决方案：

```
/*global require, console, process*/

var mongo, db, inventory, createChain;

function generateInventory(count) {
  // returns the generated inventory
}

function generateInvoices(count, inventory) {
  // returns the generated invoices
}

function generateConst() {
  // returns the generated const data
}

mongo = require('mongojs');
db = mongo.connect('dummy', ['invoices', 'const', 'inventory']);

createChain = function () {
  "use strict";
  var chain = [false], i = 0;

  return {
    add: function (action, errMsg, resultCallback) {
      chain[chain.length - 1] = {action: action, errMsg: errMsg, resultCallback: resultCallback};
      chain.push(false);
      return this;
    },
    invoke: function (exit) {
      var str, that = this;
      if (chain[i]) {
        chain[i].action(function (err, o) {
          if (err || !o) {
            str = chain[i].errMsg;
            if (err && err.message) {
              str = str + ": " + err.message;
            }
            console.log(str);
          } else {
            if (chain[i].resultCallback) {
              chain[i].resultCallback(o);
            }
            i += 1;
            that.invoke(exit);
          }
        });
      } else {
        console.log("done.");
        if (exit) {
          process.exit();
        }
      }
    }
  };
};

createChain()
  .add(function (callback) {
    "use strict";
    console.log("Dropping the dummy database.");
    db.dropDatabase(callback);
  }, "Failed to drop the dummy database")
  .add(function (callback) {
    "use strict";
    console.log("Populating the inventory.");
    db.inventory.insert(generateInventory(100), callback);
  }, "Failed to populate the inventory collection", function (res) {
    "use strict";
    inventory = res;
  })
  .add(function (callback) {
    "use strict";
    console.log("Populating the invoices.");
    db.invoices.insert(generateInvoices(10, inventory), callback);
  }, "Failed to populate the invoices collection")
  .add(function (callback) {
    "use strict";
    console.log("Populating the const.");
    db["const"].insert(generateConst(), callback);
  }, "Failed to populate the const collection")
  .invoke(true); 
```

谁能推荐一个相关的nodejs包，它也很容易使用？

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T04:27:36.890

使用该[`async`](https://github.com/caolan/async)模块提供您可能需要的几乎任何类型的流量控制。特别地，该[`series`](https://github.com/caolan/async#series)方法提供顺序流控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T19:32:24.947

实际上，对于顺序流控制，您应该使用瀑布

举个例子：

```
async.waterfall([
  function(cb){
    cb(null,1);
  },
  function(r,cb){
    // r=1
    cb(null,2)
  },
  function(r,cb){
    // r=2
    cb(null,3)
  }
],function(e,r){
    // e=null
    // r=3
}) 
```

这将按顺序执行。如果你提前回调一个错误，（即cb("error")），那么它会直接进入最终的函数（e,r），其中e="error" 和r=undefined 注意function(r,cb)是如何{} 可以预先组合在 util 库中，以处理经常重复使用的块，并使未来的事情变得更容易。

# ruby - 如何为 Ubuntu 打包一个 Ruby 应用程序，包括它的 gem 依赖项？

> ID：12233350
> 
> 赞同：7
> 
> 时间：2012-09-02T04:13:04.827
> 
> 标签：ruby, ubuntu, rubygems, deb

[我有一个名为Maid](https://github.com/benjaminoakes/maid)的命令行实用程序，我目前将它作为[RubyGem 分发](https://rubygems.org/gems/maid)。我还想将它作为一个`.deb`包分发，[以使 Ubuntu 用户更容易安装](https://github.com/benjaminoakes/maid/issues/3-package-for-ubuntu).

现在，Ubuntu 用户不得不手动做很多事情，尤其是对于不熟悉 Ruby 的人：

```
sudo apt-get install ruby
sudo apt-get install rubygems
# Make sure `ruby` and `gem` are in `$PATH`
sudo gem install maid
maid version # example command 
```

理想情况下，我希望在全新的 Ubuntu 安装上安装一个命令：

```
sudo apt-get install maid
maid version # example command 
```

`gem2deb`工具套件（ `gem2tgz`、`dh-make-ruby`等）*几乎*就是我想要的。 **但**默认情况下`gem2deb`不打包任何所需的 gem 依赖项。Maid 真的很简单，只依赖`thor`于运行时。（**编辑：**随着 Maid 的发展，现在有更多的依赖关系。）但是没有这种依赖关系，什么都行不通。

那么，如何为 Ubuntu 打包这个 Ruby 应用程序并包含它的 gem 依赖项？还有其他我可以使用的工具或我可以遵循的教程/示例吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T05:32:00.577

因为`apt-get`和`gem`都是依赖解析，你可以只创建一个依赖的元包`ruby1.9.1`（它本身带来了 Rubygems 和其他所有东西）。然后在安装后脚本中，只需执行`sudo gem1.9.1 install maid`.

我不能在这里列出制作包的整个过程，但是网上有很多关于它的好教程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T16:40:27.653

使用[fpm](https://github.com/jordansissel/fpm)，您可以（除其他外）直接从 gem 中创建 deb。[wiki](https://github.com/jordansissel/fpm/wiki/ConvertingGems)有一个广泛的示例。它的要点是调用

```
cd /tmp
fpm -s gem -t deb maid 
```

# html - 需要一种在不间隔相应边框的情况下间隔垂直 li 的方法

> ID：12233352
> 
> 赞同：0
> 
> 时间：2012-09-02T04:14:19.350
> 
> 标签：html, css, border

我想要做的是在左侧有一个带有实心边框的垂直列表，但每个 li 之间有 1 或 2 px 的空间。我不能使用 margin-bottom ，因为那样边框会破裂。我最终试图在左侧有一个纯色的列表（没有空格），当我将单个 li 悬停在现有边框上时，它实际上向左移动。我不打算使用边框，但是我尝试使用包装器 div 来做到这一点，但我似乎无法做到正确，所以欢迎提出任何建议:)哦，垂直列表的高度会发生变化，所以只需将 div 作为背景没有自动到列表元素的高度是不行的。这是工作链接[http://jsfiddle.net/hDHDF/](http://jsfiddle.net/hDHDF/)，我有以下代码

```
<div id="menu">
<ul class="menu">
<li class="openmaincategory"><span><a href="#">###</a></span></li>
<ul class="categories">
<li class="subcategory"><span><a href="#">###</a></span></li>
<li class="subcategory"><span><a href="#">###</a></span></li>
<li class="subcategory"><span><a href="#">###</a></span></li>
</ul>
<li class="maincategory"><span><a href="#">###</a></span></li>

</ul>
</div> 
```

和相应的CSS：

```
#menu{
    position:absolute;
    right:0px;
    left:0px;
    top:120px;
    height:auto;
    width:190px;
    margin-top: 35px;
    margin-left:67px;
}
.menu {
    list-style-type:none;
    padding-right:10px;
    color:#6c6762;
}

.maincategory{
    background-color:#ada397;
    height:40px;
}
.openmaincategory{
    height:40px;
    background-color:#ada397;
}

.menu li a{
    display:inline-block;
    height:100%;
    width:100%;
}

.menu li{
    border-left:solid #6c6762 40px;
}

.menu li:hover{
    border-left:solid #6c6762 20px;
    padding-left:10px;
}

.menu span a{
    color:#5b5856;
    font-size:20px;
    padding-left:4px;
    padding-top:6px;
}

.menu a{
    text-transform:none;
    text-decoration:none;
    color:#6c6762;
}

.subcategory {
    background-color:#d7d1c9;
    height:40px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T04:29:46.967

听起来您想使用填充而不是边距。我根据您的代码[在这里](http://jsfiddle.net/hQbRK/3/)设置了一个示例。

关键部分是将子类别类从 li 移动到跨度并添加 .last 以便您可以使用最终间距。

```
.categories li span{
    background-color:#d7d1c9;
    height:40px;
    padding-top:2px;
}

.subcategory .last{
    padding-bottom:2px;
} 
```

使用最后一个 li 上的锚点的填充进行更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T05:00:41.307

在列表本身上有边框，而不是在列表项上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T07:51:19.533

我通过将边框添加到列表本身并制作悬停效果 margin-left:-20px 来修复它。

# php - 如何通过 SimpleXMLElement 中的 [@attributes]？

> ID：12233354
> 
> 赞同：3
> 
> 时间：2012-09-02T04:14:36.887
> 
> 标签：php, xml, codeigniter, simplexml, activeresource

目标：使用 PHP/CodeIgniter，我需要在可用数组中获取用户列表及其自定义字段名称和值。如果我能拿到物品，我可以做我需要的。请参阅带有“// <<<”注释的输出，这样您就可以看到我卡在哪里了。我只是无法超越 [@attributes]。

我正在使用 PHP 使用 ActiveResource.php 及其内置的 REST API 连接到 Redmine。我想获得所有用户的列表，并得到下面的输出。

**模型/Employees_model.php：**

```
<?php
require_once ('ActiveResource.php');

class Employees_model extends ActiveResource {
    var $site = 'http://user:password@localhost:8080/redmine/';
    var $element_name = 'user';
    var $request_format = 'xml';

    function __construct() {
        parent::__construct();
    }       
}
?> 
```

**控制器/employees.php：**

```
public function employees () {
    $employees = new Employees_model();     
    $data['employeeList'] = $employees->find('all');        
    $this->load->view('customers/ajaxEmployees', $data);
} 
```

**查看/ajaxEmployees.php：**

```
<?php
//I can get the following with no problem
echo $employee->id . "<br/>";
echo $employee->firstname . "<br/>";
echo $employee->lastname . "<br/>";

//This is where I'm stuck (see OUTPUT for [@attributes] and "// <<<" notes)
echo $employee->custom_fields->custom_field;
?> 
```

**输出：**

```
Array
(
[0] => Employees_model Object
    (
        [id] => 
        [site] => http://user:password@localhost:8080/redmine/
        [element_name] => user
        [request_format] => xml
        [extra_params] => 
        [user] => 
        [password] => 
        [element_name_plural] => users
        [_data] => Array
            (
                [id] => 16
                [login] => jschmoe
                [firstname] => Joe
                [lastname] => Schmoe
                [mail] => joe@example.com
                [created_on] => 2012-08-24T01:58:21Z
                [last_login_on] => SimpleXMLElement Object
                    (
                    )
                [custom_fields] => SimpleXMLElement Object
                    (
                        [@attributes] => Array
                            (
                                [type] => array
                            )

                        [custom_field] => Array
                            (
                                [0] =>     SimpleXMLElement Object
                                    (
                                        [@attributes] => Array
                                            (
                                                [name] => Quality Control //<<< I need this
                                                [id] => 2
                                            )
                                        [value] => 1 //<<< I need this to know that QualityControl = 1
                                    )
                                [1] => SimpleXMLElement Object
                                    (
                                        [@attributes] => Array
                                            (
                                                [name] => Technical Contractor // <<< I need this
                                                [id] => 3
                                            )
                                        [value] => 0  // <<< I need this to know that TechnicalContractor = 0
                                    )
                                [2] => SimpleXMLElement Object
                                    (
                                        [@attributes] => Array
                                            (
                                                [name] => Content //<<< I need this
                                                [id] => 4
                                            )
                                        [value] => 0  // <<< I need this to know Content = 1
                                    )
                            )
                    )
            )
    )
) 
```

非常感谢大家的帮助。在浪费了许多小时四处寻找，尝试了我遇到的所有事情和我能想到的所有事情之后——我想我最好挥动我的小白旗。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:56:26.037

我认为 attributes() 函数是您正在寻找的。例如

```
foreach ($employee->custom_fields->custom_field as $line) {
    echo "[" . $line->attributes()->name . "]" . $line->value . "\n";
} 
```

此外，您可能不得不改用它：

```
foreach ($employee->_data->custom_fields->custom_field as $line) { 
```

（不确定，两个都试试）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T15:57:06.190

`$employee->custom_fields->custom_field;`是一个数组，您可以`foreach`通过它来获取每个`name`属性及其对应的`value`using [`SimpleXMLElement::attributes()`](http://php.net/manual/en/simplexmlelement.attributes.php)。

```
foreach ($employee->custom_fields->custom_field as $cf) {
  // Loop over the custom field nodes and read the name of each
  switch ($cf->attributes()->name) {
    // Load a variable on each matching name attribute
    // or do whatever you need with them.
    case "Quality Control":
      $quality_control = $cf->value;
      break;
    case "Technical Contractor":
      $technical_contractor = $cf->value;
      break;
    case "Content":
      $content = $cf->value;
      break;
  }
} 
```

或者，如果您事先不知道所需的所有内容，请将它们加载到数组中：

```
$employee_attrs = array();
foreach ($employee->custom_fields->custom_field as $cf) {
  // Add an array key of the name, whose value is the value
  $attrs[$cf->attributes()->name] = $cf->value;
}

var_dump($employee_attrs); 
```

# php - Facebook 错误警告 MY.URL.COM 无法访问

> ID：12233355
> 
> 赞同：0
> 
> 时间：2012-09-02T04:14:49.690
> 
> 标签：php, facebook, facebook-graph-api, web-scraping, facebook-comments

我有一个有趣的问题在这里发生。我正在尝试在我的网站上使用 facebook 评论插件，并包含 Facebook 所需的必要元标记（据我所知）才能正常工作。

这个问题的有趣之处在于，我在某些页面和其他页面上没有收到警告，唯一改变的是图片，在某些情况下还有描述。

现在，如果您可以花点时间查看这些页面以了解我的意思：

[http://www.terrybrownmusic.com/photos/photo/146](http://www.terrybrownmusic.com/photos/photo/146)

显示刚刚好，没有错误。

但是当您访问此页面时：

[http://www.terrybrownmusic.com/photos/photo/147](http://www.terrybrownmusic.com/photos/photo/147)

我在评论部分收到错误。这是我的 .htaccess 文件 IDK，如果它与它有关的话。

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(.+)$ index.php?url=$1 [QSA,L] 
```

任何想法都会很棒。感谢您的时间！

[编辑]

我只想补充一点，当我让调试器工作时，它说`og:url`标签不存在，但它存在！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T00:53:49.387

[通过Linter](https://developers.facebook.com/tools/debug/og/object?q=http://www.terrybrownmusic.com/photos/photo/147)查看您的 URL 时，我看到了一个不同的错误。看来您已将页面 ID 添加为管理员。这是不正确的，它应该是您的用户 ID（或管理员的用户 ID 之一）。请参考这里 - [https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)

# jsp - 如何通过servlet在jsp中显示数据库中的数据？

> ID：12233356
> 
> 赞同：0
> 
> 时间：2012-09-02T04:15:09.380
> 
> 标签：jsp, servlets

我正在使用 Hibernate、SERVLET、JSP 和 MySql 数据库开发应用程序。我的项目中使用的表是 BeanRegister。

在这里，我遇到了在我的 jsp 页面中使用 EL 的问题。在这个 JSP 页面中，我想显示从数据库表中获取的一些信息。这是我的代码..

控制器配置文件.java：

```
import java.io.IOException;
import java.util.List;
import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import org.hibernate.Query;

public class ControllerProfile extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        if ((request.getParameter("accsub") != null)) {
            if (request.getParameter("accuser") != null) {
                Session session = null;

                SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();
                session = sessionFactory.openSession();
                org.hibernate.Transaction tx = session.beginTransaction();

                String i = request.getParameter("accuser");
                String Q = " from BeanRegister where userid= :id ";
                Query query = session.createQuery(Q);
                query.setParameter("id", i);

                List<BeanRegister> profile = query.list();
                request.setAttribute("profile", profile);

                tx.commit();
                session.flush();
                session.close();

                RequestDispatcher dispatcher = request.getRequestDispatcher("profile.jsp");
                dispatcher.forward(request, response);
            } else {
                System.out.println("error");

                RequestDispatcher dispatcher = request.getRequestDispatcher("viewprofile.jsp");
                dispatcher.forward(request, response);
            }
        }
    }
} 
```

配置文件.jsp：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://java.sun.com/jstl/core_rt" prefix="c"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        ....
        ....
        <form name="proview" id="proview" action="updateprofile.jsp" method="post" >

            <div align="center">
                <table width="366" border="0" bgcolor="#3333CC">
                    <c:forEach var="pro" items="${profile}">
                        <tr>
                            <td width="171" height="23"></td>
                            <td width="194"><input name="password" id="password" type="hidden" value="${pro.password}"/></td>
                        </tr>
                        <tr>
                            <td width="171" height="23"><div align="center">NAME</div></td>
                            <td width="194"><input name="name" type="text" id="name" value="${pro.name}" readonly="readonly"/></td>
                        </tr>
                        <tr>
                            <td width="171" height="23"><div align="center">USER ID</div></td>
                            <td width="194"><input name="userid" id="userid" type="text" value="${pro.userid}" readonly="readonly"/></td>
                        </tr>
                        <tr>
                            <td width="171" height="23"><div align="center">ADDRESS</div></td>
                            <td><input type="text" name="address" id="address" value="${pro.address}" readonly="readonly"/></td>
                        </tr>
                        <tr>
                            <tr>
                                <td width="171" height="23"><div align="center">GENDER</div></td>
                                <td width="194"><input name="sex" type="text" id="sex" value="${pro.sex}" readonly="readonly"/></td>
                            </tr>
                        </tr>
                        <tr>
                            <td width="171" height="23"><div align="center">MOBILE NUMBER</div></td>
                            <td><input name="number" type="text" id="number" value="${pro.number}" readonly="readonly"/></td>
                        </tr>
                        <tr>
                            <td width="171" height="23"><div align="center">EMAIL ID</div></td>
                            <td><input name="email" id="email" type="text" value="${pro.email}" readonly="readonly"/></td>
                        </tr>

                        <tr>
                            <td width="171" height="23"></td>
                            <td width="185"><input name="password1" id="password1" type="hidden" value="${pro.password1}"/></td>
                        </tr>

                        <tr>
                            <td>
                                <div align="center">
                                    Want To Edit Ur Profile Click Here
                                </div></td>

                            <td >
                                <div align="center">
                                    <input type="submit" name="updateprof" id="updateprof" value="UPDATE" />
                                </div></td>
                        </tr>
                    </c:forEach>  
                </table>
            </div>
        </form>
    </body>
</html> 
```

现在，当我访问我的 servlet 类时，它会调用 profile.jsp。但是，表单的文本字段会显示编码中的 EL 代码。我很困惑为什么这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:20:48.900

```
i think you use Tomcat 7
Tomcat 7 does not come with JSTL jar files by default.
   First, locate the jar files for both JSTL API and JSTL Implementation. They are located on the JSP Standard Tag Library download page. Click into each repository and find the .jar file.

Tomcat 7
           =>Servlet -api-3.0
           =>JSTL-1.2

 refer this link:http://javahelpersin.blogspot.in/2013_01_01_archive.html 
```

# android - CWAC android 无限列表适配器，适用于非常大的列表

> ID：12233358
> 
> 赞同：2
> 
> 时间：2012-09-02T04:16:48.333
> 
> 标签：android, commonsware-cwac

我想知道如何使用 CWAC 的无限适配器来处理非常大的列表。

我主要关心的是内存管理。如果我缓存数千个项目，我最终会出现内存不足的异常。那么我该如何处理那个缓存呢？我可以清除之前的条目吗？

据我了解，当我们向下滚动列表时，无限适配器只会触发其 cacheInBackground() 方法和 appendCachedData() 。如果我想清除不再可见的早期条目（列表顶部）的缓存怎么办？

当我向上滚动时，无尽的适配器将如何表现？换句话说，无限适配器是双向的吗？如果没有，我可以解决这个限制吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T11:36:09.177

`EndlessAdapter`和你的问题关系不大。只要您的底层适配器回收其行，适配器框架就可以像处理“非常大的列表”一样工作。但是，最终，您的模型数据将消耗过多的堆空间。

> 那么我该如何处理那个缓存呢？

首先不要将“数千个项目”`ListView`放在首位。为您的用户提供一些无需筛选大量列表即可查找内容的方法。

> 我可以清除之前的条目吗？

不，不会比你在其他任何`Adapter`.

> 如果我想清除不再可见的早期条目（列表顶部）的缓存怎么办？

编写自己的`AdapterView`框架，该框架在报告某些更大数据集中某些位置范围的内容`Adapter`的原则下工作。`Adapter`

> 当我向上滚动时，无尽的适配器将如何表现？

和任何其他的一样`Adapter`。

# android - 移除 Android 上的切换活动动画

> ID：12233360
> 
> 赞同：2
> 
> 时间：2012-09-02T04:17:13.013
> 
> 标签：android, animation, android-activity

有两个活动。

Activity A 有一个可以切换到 Activity B 的按钮。

Activity B还有一个按钮可以切换到Activity A。

这是我的代码，

```
@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    Log.e("current", context.getClass().toString());
    Log.e("changeto", tab.getTag().toString());
    if(context.getClass()==tab.getTag())
        return;

    Intent intent = new Intent(new Intent(context,(Class<?>) tab.getTag()));
    intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
    intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
    context.startActivity(intent); 
} 
```

我想在切换活动时删除动画，但它不起作用。

但是，如果我删除

```
intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT); 
```

它完美地工作。为什么？

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-02T04:27:12.520

在您要切换到的 Activity 中，尝试 `overridePendingTransition(0,0);`在 onResume 或 onCreate 中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T04:50:03.373

如果您在选项卡开关中调用 startActivity，那么您做错了。选项卡用于在当前活动中切换视图，并且切换选项卡不应创建导航历史记录。考虑切换片段或用新选择的选项卡的内容替换视图层次结构。

你越是追求切换选项卡选择活动的路径，你就越会发现自己在玩“打地鼠”，带有微妙的用户体验错误，这些错误会让你的应用程序简单地感觉“错误”。

使用上面建议的实现，“后退”按钮将返回到先前选择的选项卡，从而打破“从不创建导航历史”规则。您可能认为在开始下一个 Activity 时完成（）当前 Activity 可以解决此问题，但您仍然会遇到许多其他问题。用户期望状态的微妙元素（例如滚动位置）在选项卡中持续存在。从 Android 4.0 开始，用户应该能够在选项卡 ( [http://developer.android.com/design/building-blocks/tabs.html](http://developer.android.com/design/building-blocks/tabs.html) ) 之间水平滑动，如果您是为每个选项卡的内容使用单独的活动。

这只是一个小样本，名单还在继续。不应使用选项卡在不同的活动之间切换。

# r - 从命名空间访问（导出）函数

> ID：12233361
> 
> 赞同：2
> 
> 时间：2012-09-02T04:17:52.513
> 
> 标签：r, namespaces

[我知道之前在 SO 上](https://stackoverflow.com/questions/2165342/r-calling-a-function-from-a-namespace)已经问过类似的问题，但是那里给出的解决方案似乎不适用于我的情况。我试图通过引用从其他命名空间导出的函数并避免`require()`在函数中使用来遵循创建包的约定。我基本上是在试图防止一个函数运行时间过长。例如，

```
fun <- function(i){
require(R.utils)
setTimeLimit(elapsed=10, transient=TRUE) # prevent taking more than 10secs
 return(i^i)
 }
>fun(10) 
```

工作正常，但如果我尝试：

```
require(R.utils)
fun <- function(i){
R.utils:::setTimeLimit(elapsed=10, transient=TRUE) # prevent taking more than 10secs
 return(i^i)
 }
>fun(10) 
```

我得到：

```
Error in get(name, envir = asNamespace(pkg), inherits = FALSE) : 
object 'setTimeLimit' not found 
```

更改`:::`为`::`不会更改此行为。我愿意接受任何更简单的方法来实现相同的目标。`require()`在函数内部进行调用真的很糟糕吗？非常感谢！

编辑：如果导入有效，那就太好了，谢谢。仍在开发中，所以想确保它会没事。

编辑：抱歉，它在基地里。不知道我是怎么错过的；我最初使用`R.utils::evalWithTimeout`并且必须假设两者都在同一个包中。*看起来很害羞*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:11:32.117

我只是发布这个以防止问题显示为未回答，但很高兴接受另一个......

```
isTRUE("setTimeLimit" %in% ls(getNamespace("base"), all.names=TRUE)) 
```

# hibernate - 带有 LIKE % 的休眠 SELECT 查询

> ID：12233362
> 
> 赞同：1
> 
> 时间：2012-09-02T04:18:04.680
> 
> 标签：hibernate, jpql

对于以下查询，我需要 HQL 或 JPQL：

```
select * from customer where customer_name like '%ROB%' 
```

我正在使用查询管理器进行 JPQL 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T04:21:12.863

[http://www.stpe.se/2008/07/hibernate-hql-like-query-named-parameters/](http://www.stpe.se/2008/07/hibernate-hql-like-query-named-parameters/)说您应该`%`在参数本身中包含符号，而不是查询。

例如：

```
String query = "from user u where u.name like :name"
getHibernateTemplate().findByNamedParam(query, "name", '%' + str + '%'); 
```

# html - 绑定到动态创建的 DOM 元素的 jQuery 事件错误地触发

> ID：12233363
> 
> 赞同：-1
> 
> 时间：2012-09-02T04:18:26.443
> 
> 标签：html, click, jquery

我有这个标记。

```
 <form action='xxx.php' method='post'>
      <table>
        <tr>
            <th>Branch Id</th>   
            <td><input id="branchId" type="text" size="15%" name="branchId"></input></td>
         <th>Branch Name</th>
          <td colspan="3"><input id="branchName" type="text" size="75%" name="branchName"></input></td>
            <td>
                <div id="button">
                <input type="button" id="btnAdd" value="Add" name="submit"/>
                </div>
             </td>
         </table>
     </form>

     <!------- Something here--------------->

     <table class="divTable" id="exisBranch">
       <tr><th id="thBranchId">Branch Id</th>
       <th id="thBranchName">Branch Name</th>
       <th class="btn" id="tcEdit">Edit</th>
               <th class="btn" id="tcDelete">Delete</th>
       </tr>

</table> 
```

基本上发生的是我填充通过 AJAX 检索到的第二个表记录。每行都有一个“branchId”、“branchName”和两个“bt”类按钮。当我单击编辑按钮时，我需要将相应的 'branchId' 和 'branchName' 值插入到第一个表中的输入元素中，以便我可以编辑它们，然后当我单击“btnAdd”时，我可以保存它们。

这是我拥有的 jQuery。

```
 function fun(){
                 var branchId=$(this).closest("tr").find("td").eq(0).html();
                 $("#btnAdd").click(function () {
        if($("#btnAdd").val()=='Save')
            {
              alert(branchId);
                          //ajax call

            }

       });
       }

       $(document).ready(function(){
            $("#exisBranch").on('click','.bt',fun);
            $("input[type='button']").click(function(e){
                   e.preventDefault();
            });    
       }); 
```

当我第一次单击“btnAdd”时，一切正常。问题从第二次和连续单击此按钮开始。考虑动态填充的内容中有 6 行，每行的“branchId”是对应的行号。

当我第一次单击第二行的“编辑”按钮，然后单击“btnAdd”时，会弹出一个正确显示 2 的警报。

问题是，如果我继续单击第 6 行的“编辑”，然后单击“btnAdd”，我会收到两个警报。第一个显示 2，然后是 6。我只想要 6。

对于第三轮，它就像 2,6，以及接下来点击的内容。这让我的 AJAX 火了很多。次作为没有。点击次数。

这真是令人生气。我似乎无法弄清楚为什么。我是一个 jQuery 新手，所以如果这是基本的东西并且我搞砸了，请多多包涵。请让我知道如何让它只用最新的值触发一次，而不是堆积在我的调用历史上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T04:30:05.280

The problem is that you are attaching a new `click` handler each time that `fun` is called. These handlers are not unbound after they fire, so the handlers are building up. You could use jquery's `one` to ensure that each event fires only once.

Really though, your entire approach is not ideal. Off the top of my head, one possible improvement which wouldn't take too much re-engineering would be to store the IDs in an array, then when add is clicked, process the array and clear it. This would let you only have one handler on `add` as well as allow for batch ajax calls instead of one per id.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T05:14:15.343

您不应该通过每次编辑单击来绑定您的添加按钮——将其移出到您的文档准备就绪。

```
<script>
   var branchId; //keep track of which branch is under edit

   function fun(){
      branchId = $(this).closest("tr").find("td").eq(0).html();
      var branchName = $(this).closest("tr").find("td").eq(1).html();

      $('#branchId').val(branchId);
      $('#branchName').val(branchName);
   }

   $(document).ready(function(){
      $("#exisBranch").on('click','.btn',fun);

      $("#btnAdd").click(function () {
         if($("#btnAdd").val()=='Save') {
            alert(branchId);
            //ajax call
         }
      });

      $("input[type='button']").click(function(e){
         e.preventDefault();
      });
   });
<script> 
```

*您的堆栈帖子中有许多错别字。

# c++ - dynamic_cast 问题 xcode

> ID：12233370
> 
> 赞同：1
> 
> 时间：2012-09-02T04:20:06.147
> 
> 标签：c++, ios, unity3d, objective-c++, dynamic-cast

我正在将游戏从 Visual Studio 移植到 xcode，该游戏完全是用 C++ 编写的，我遇到了一些在 Visual Studio 中运行时从未遇到过的动态转换问题。我想知道这是编译器问题还是mac环境不支持某些东西，任何帮助将不胜感激。这是我在 xcode 中运行的代码的精简版本，在执行 dynamic_cast 时会崩溃

```
class base {
public:
 int dm;
 virtual void vm(){}
 base(){}
};

class specific : public base {
public:
virtual void vm(){dm++;}
specific (){}
};

specific* sp = new specific();
base* b = (base*) sp;
specific * s = dynamic_cast< specific * >( b ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T08:13:20.917

您可以尝试在您的 xcode 项目中设置 "Enable Runtime Type" = YES Build setting > Apple LLVM 5.0 - Language - C++。

希望这有帮助。

# javascript - Animate.CSS - 添加 IE 支持？

> ID：12233376
> 
> 赞同：1
> 
> 时间：2012-09-02T04:21:32.277
> 
> 标签：javascript, jquery, css, jquery-animate, animated

我正在使用[Animate.CSS](http://daneden.me/animate/)，并且正在使用“铰链”效果使图像从屏幕上掉下来。*在真实*浏览器中效果很好，但在 IE 9 或更低版本中当然不行。有没有办法让这种效果与 jQuery 或 javascript 一起工作？还是我必须添加一个 jQuery 过渡来淡出图像？

谢谢！

代码：

**HTML**

```
<img id="animate" class="fear" src="/2012/images/september/fear-sign.png" /> 
```

**CSS**

```
.fear{
     position:absolute;
     left:150px;
     top:0px;
}

#animate {
    -moz-animation-delay: 5s;
    -webkit-animation-delay: 5s;
    -o-animation-delay: 5s;
    -ms-animation-delay: 5s;
    animation-delay: 5s;
} 
```

**JS**

```
var $j = jQuery.noConflict();
$j(document).ready(function() {
    $j('#animate').addClass('animated hinge');
}); 
```

这是我创建的显示动画效果的[小提琴。](http://jsfiddle.net/Lynda333/FafAH/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T07:18:32.983

虽然不如 Animate.CSS Hinge 效果那么流畅，但我最终使用 jQuery 使图像从屏幕上掉下来（很好地掉下来并淡出。）

我得到了 CoreyRS 的帮助，他的答案和方法可以在[这里](https://stackoverflow.com/questions/12233752/create-a-falling-div-that-works-in-ie#answer-12233902)找到。

# iphone - 为什么被调用者返回自动释放对象而不是返回保留对象并让调用者释放对象？

> ID：12233378
> 
> 赞同：1
> 
> 时间：2012-09-02T04:22:09.467
> 
> 标签：iphone, objective-c, ios, cocoa

例如：我们总是这样写 1：

```
-(NSObject*)giveMeAnObject
{
    return [[[NSObject alloc] init] autorelease];
}

-(void)useObject
{
    NSObject *object = [self giveMeAnObject];
    //use that object
} 
```

但是我们为什么不这样写2：

```
-(NSObject*)giveMeAnObject
{
    return [[NSObject alloc] init];
}

-(void)useObject
{
    NSObject *object = [self giveMeAnObject];
    //use that object
    [object release];
} 
```

Cocoa SDK 做类似方式 1 的事情，我认为这就是我们都使用方式 1 的原因，它已成为一种编码约定。但我只是认为，如果约定是方式 2，我们几乎无法获得性能提升。

那么除了编码约定之外，还有其他原因我们使用方式 1 而不是方式 2 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T04:53:49.300

返回一个自动释放的对象是一种抽象形式——对开发人员来说是一种方便，因此他/她不必考虑返回对象的引用计数——从而导致特定类别中的错误更少（尽管你也可以说自动释放池引入了*新*类别的错误或复杂性）。它可以真正简化客户端代码，虽然是的，但可能会有性能损失。当不需要进行引用操作时，它也可以用作抽象优化 - 考虑何时对象包含返回的实例并且不需要进行保留或复制。虽然链接语句可能会被过度使用，但这种做法对于链接语句也很方便。

此外，确定引用计数错误的静态分析器对于其中一些库和程序来说是相对较新的。自动释放池比 ARC 和 objc 对象引用计数的静态分析早了很多年——现在使用这些工具确保您的引用计数是正确的要简单得多。他们能够检测到许多错误。

当然，使用 ARC，如果您喜欢返回自动释放对象的简单性，那么很多情况都会发生变化——使用 ARC，您可以返回更少的自动释放对象，而不会引入抽象的自动释放池错误。

使用统一所有权语义还可以简化程序。如果一个抽象选择器或选择器集合总是使用相同的语义返回，那么它确实可以简化一些通用形式。例如——如果传递给的一组选择器`performSelector:`具有不同的所有权返回语义，那么它会增加很多复杂性。因此，统一的回报所有权可以真正简化一些更“通用”的实现。

性能：引用计数操作（保留/释放）可能相当重要——尤其是当您习惯于在较低级别工作时。但是，当前的自动释放池实现非常快。它们最近已更新，并且比以前更快。编译器和运行时使用几个特殊的快捷方式来降低这些成本。减少自动释放池的大小也是一个好主意——尤其是在移动设备上。创建自动释放池非常快。在实践中，您可能会看到自动释放操作本身增加了零到几个百分点（即它消耗的时间比`objc_msgSend`+变体）。一些测试甚至跑得更快。这不是许多人会从中受益匪浅的优化。在典型情况下，它不会被认为是唾手可得的成果，而且在实际程序中测量这种变化的影响和局部性实际上是相对困难的——基于我在 bbum 提到下面的变化后所做的一些测试。因此测试范围有限，但在 MRC 和 ARC 中似乎更好/更快。

因此，如果您正在执行自己的引用计数操作，这很大程度上取决于您想要承担的责任级别。对于大多数人来说，它不应该真正改变他们的写作方式。我认为本地化内存问题、*更具*确定性的对象破坏和更可预测的堆大小是如果您在现代系统上运行，人们可能倾向于返回“拥有”（+1）引用计数的主要原因。即便如此，运行时和编译器在许多情况下都会为您减少这种情况（请参阅 bbum 的回答 +1）。尽管自动释放池的速度差不多，但我现在不打算比现在更多地使用它们——所以仍然有合理的理由尽量减少使用它们，但理由正在减少。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T05:56:45.420

您是否衡量过性能优势？您是否有一个可量化的案例，其中`autorelease`CF 风格的 caller-must-release 具有可衡量的性能影响？

如果没有，那就没有意义了。如果是这样，我敢打赌，有一个系统架构问题远远超过自动释放与否。

无论如何，如果您采用 ARC，自动释放的“成本”就会降到最低。编译器和运行时实际上可以优化方法调用之间的自动释放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T12:20:31.870

主要原因有以下三个：

1.  它强加了拥有所有权的概念。
2.  它消除了悬空指针的问题。
3.  它返回在本地自动释放池中创建的对象，从而提高性能。

# asp.net-mvc - 拥有许多 MVC 路由是否有很多开销？

> ID：12233379
> 
> 赞同：0
> 
> 时间：2012-09-02T04:22:31.340
> 
> 标签：asp.net-mvc, asp.net-mvc-3, routes

我有一个应用程序，现在有三个区域，每个区域都有大约八种不同的路线定义。将来我可能需要添加更多。

从性能的角度来看，拥有这么多定义是否有很多开销？

首先出现最常见的路线是否可以获得任何性能优势？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T06:04:32.597

拥有更多路由是正常的，但您需要知道正则**表达式**约束的工作非常缓慢。
您不能首先放置最常见的路线，因为那样所有其他路线将永远无法工作。

# php - curl_multi_add_handle 在第 0 行的文件“未知”中产生错误

> ID：12233380
> 
> 赞同：1
> 
> 时间：2012-09-02T04:22:44.427
> 
> 标签：php, curl

我正在尝试同时`curl_multi_*`获取多个（大约 50 个）URL，因为连续这样做需要很长时间。但是，我在执行时收到以下错误消息`curl_multi_add_handle`。

> **警告**：(null)(): 10 不是第**0**行**未知中的有效 cURL 句柄资源**

 **这是代码：

```
//create the multiple cURL handle
$mh = curl_multi_init();

// Loop over pages and get set the URL to the cURL queue
foreach ($htmltogetlist as $source) {

    [...]

    // Get a cURL handle of the current URL
    $urls[$id]['ch'] = $this->_getCurlHandle($urls[$id]['url']);

    // Success
    if (gettype($urls[$id]['ch']) == 'resource' && get_resource_type($urls[$id]['ch']) == 'curl') {
        curl_multi_add_handle($mh, $urls[$id]['ch']); // << Produces error
    }
} 
```

并且`$this->_getCurlHandle`有：

```
// Set cURL handle
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_ENCODING , "gzip");
curl_setopt($ch, CURLOPT_REFERER, $url);
curl_setopt($ch, CURLOPT_USERAGENT, 'PHP');
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_AUTOREFERER, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_TIMEOUT, 10);

return $ch; 
```

奇怪的是这`$urls[$id]['ch']`是一个有效`resource`的类型`curl`，但我不能将它添加到`$mh`文件中，错误`unknown`在`line 0`. 实际上，我什至可以执行句柄并从中获得正确的响应，所以我肯定它是有效的。我只是无法将其添加到`$mh`.

```
$content = curl_exec($urls[$id]['ch']);
$response = curl_getinfo($urls[$id]['ch']);
print_r($response); // Works 
```

我知道 cURL 适用于多次传输。例如，下面的代码（本质上做同样的事情）有效。我也确定不是导致问题的 URL 数量，因为在将数据库查询限制为 1 时出现相同的错误：

```
$ch1 = curl_init();
$ch2 = curl_init();

// set URL and other appropriate options
curl_setopt($ch1, CURLOPT_URL, "http://lxr.php.net/");
curl_setopt($ch2, CURLOPT_URL, "http://www.php.net/");

curl_setopt($ch1,CURLOPT_ENCODING , "gzip");
curl_setopt($ch1, CURLOPT_REFERER, $url);
curl_setopt($ch1, CURLOPT_USERAGENT, 'PHP');
curl_setopt($ch1, CURLOPT_HEADER, true);
curl_setopt($ch1, CURLOPT_AUTOREFERER, true);
curl_setopt($ch1, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch1, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch1, CURLOPT_TIMEOUT, 10);

curl_setopt($ch2,CURLOPT_ENCODING , "gzip");
curl_setopt($ch2, CURLOPT_REFERER, $url);
curl_setopt($ch2, CURLOPT_USERAGENT, 'PHP');
curl_setopt($ch2, CURLOPT_HEADER, true);
curl_setopt($ch2, CURLOPT_AUTOREFERER, true);
curl_setopt($ch2, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch2, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch2, CURLOPT_TIMEOUT, 10);

//create the multiple cURL handle
$mh = curl_multi_init();

//add the two handles
curl_multi_add_handle($mh,$ch1); // Works
curl_multi_add_handle($mh,$ch2); // Works 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-27T14:05:02.443

我检查了 Richard 在上面的评论中提到的问题 #61141，pierrick 给出的解决方案确实为我解决了这个错误。

这是基本的多卷曲执行设置，如 PHP 手册中所示：

```
while ($active && $mrc == CURLM_OK) {
    if (curl_multi_select($mh) != -1) {
        do {
            $mrc = curl_multi_exec($mh, $active);
        } while ($mrc == CURLM_CALL_MULTI_PERFORM);
    }
} 
```

但是，正确的设置是这样的：

```
while ($active && $mrc == CURLM_OK) {
    if (curl_multi_select($mh) != -1) {
        usleep(100);
    }
    do {
        $mrc = curl_multi_exec($mh, $active);
    } while ($mrc == CURLM_CALL_MULTI_PERFORM);
} 
```

如果`curl_multi_select`返回 -1，则暂停脚本一会儿，然后继续运行`curl_mutli_exec`。

更多详情：[https ://bugs.php.net/bug.php?id=61141](https://bugs.php.net/bug.php?id=61141)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T16:54:19.400

我在 OSX 上使用 PHP 5.3.23，curl 7.30.0 遇到了这个问题。

修复是确保所有 curl_init() 在 curl_multi_init() 之前被调用；

从未在其他平台（即 Linux）上看到过这种情况**

# ruby - Ruby 传递可能为 nil 的属性

> ID：12233382
> 
> 赞同：0
> 
> 时间：2012-09-02T04:23:32.930
> 
> 标签：ruby

```
stanza_class.new(node.attributes if node.attributes) 
```

我正在传递一个方法中可能为 nil 的变量。在 ruby​​ 中有没有一种漂亮的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T08:12:47.187

我会假设它`node`可能是`nil`。这是完全地道的：

```
stanza_class.new(node.attributes if node) 
```

尽管习惯于[Ick](http://ick.rubyforge.org/)的程序员可能会这样写：

```
stanza_class.new(node.maybe.attributes) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T04:25:26.173

如果你使用的是 Ruby on Rails，你可以使用 try 方法：

例如。

```
node.try(:attributes) 
```

这意味着 if `node`is `nil`，它返回`nil`而不是 NilClass 上的缺失方法。

参考：[http ://api.rubyonrails.org/classes/Object.html#method-i-try](http://api.rubyonrails.org/classes/Object.html#method-i-try)

如果你不使用 rails，你可以自己修改 Object 类。猴子修补 Rails 的源代码（在参考 URL 中找到）是：

```
class Object
  def try(*a, &b)
    if a.empty? && block_given?
      yield self
    else
      __send__(*a, &b)
    end
  end
end 
```

如果您的意思是 node 永远不会是 nil，但 node.attributes 可能是 nil，那么您可以这样做：

```
stanza_class.new(node.attributes) 
```

这是因为

```
stanza_class.new(nil) 
```

相当于

```
stanza_class.new() 
```

也就是说，未传递的参数默认设置为 nil。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T15:46:15.533

```
stanza_class.new(*node.attributes) 
```

# java - 接口内的瞬态

> ID：12233385
> 
> 赞同：0
> 
> 时间：2012-09-02T04:24:32.867
> 
> 标签：java, interface

我有一个查询，下面是声明常量的接口，我在这里也可以有瞬态吗？如果没有，那是什么原因我们不能在接口内有瞬态变量，我熟悉瞬态在序列化过程中的作用。 .

```
 interface OlympicMedal {
  static final String GOLD = "Gold";
  static final String SILVER = "Silver";
  static final String BRONZE = "Bronze";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T06:43:56.710

我建议在接口中使用枚举而不是常量。您使用的模式在 pre java 5 代码中很常见。然后引入了枚举。它引入了类型安全，是推荐的方法。

如果您正在序列化并想要瞬态属性，那么这可能有助于[序列化枚举](https://stackoverflow.com/questions/6586667/serializing-enums)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T22:26:04.403

接口中定义的所有变量都是隐式“静态”的；“瞬态”仅对非“静态”字段有意义：因此您所问的没有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T04:32:51.803

All variables declared in an interface are `public`, `static` and `final`. In fact those are the only possible modifiers that are possible in an `Interface`

For the same reason, you really don't have to explicitly specify these modifiers when you're creating a variable in an `interface`. In your example, you could've just said:

```
interface OlympicMedal {
    String GOLD = "Gold";
    String SILVER = "Silver";
    String BRONZE = "Bronze";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T04:33:10.877

Firstly, interface only provides a contract in terms of the operations to be defined by the classes implementing that interface. It doesn't carry state and so you cannot declare member variables in an interface (what you declared in your interface definition are constants). So, there is no possibility of a transient member in an interface.

# php - PHP - 如何确定 X-Sendfile 是否可用并已安装？

> ID：12233386
> 
> 赞同：6
> 
> 时间：2012-09-02T04:25:00.480
> 
> 标签：php, header, x-sendfile

基本上，我想将标头 X-Sendfile 发送到浏览器以发送文件，但如果 X-Sendfile 不可用或未安装在服务器上，我不想调用它。我如何在 PHP 中检查这个？或者如果这不可能在 PHP 中检查，那么如何检查它是否安装了 PERIOD？我宁愿在 PHP 中检查 X-Sendfile 的存在，因为这样做对我来说更容易，因为这是一个也将在其他站点和服务器上运行的包的一部分......也许如果我只是使用它带有PHP`header`函数，如果没有安装它会返回一些东西？？

多谢你们 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T04:35:20.500

The APACHE module [mod_xsendfile](https://tn123.org/mod_xsendfile/) processes the `X-Sendfile` headers

To check if the APACHE module mod_xsendfile is available and installed on the server, you could use [apache_get_modules()](http://in.php.net/apache_get_modules) function.

You cannot just set the header and check if the module is installed or not.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T04:35:21.883

To get a list of apache modules and see if x-sendfile is in the list you could use [http://php.net/manual/en/function.apache-get-modules.php](http://php.net/manual/en/function.apache-get-modules.php) If it's not installed, the x-sendfile header will get to the browser if it is installed, the module will filter out the header.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-13T17:46:04.217

这是不正确的。如果相关位置的 XSendFile 未设置为 On 但模块已加载，它将错误地假设 xsendfile 使用可用，尽管它不可​​用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T07:51:42.883

尝试这个：

```
 if (in_array('mod_xsendfile', apache_get_modules())) {
        header("X-Sendfile: $file");
    } else {
        error_log("Warning! mod-xsendfile is NOT INSTALLED - sending file the old fashion way.....");
        header('Content-Length: ' . filesize($file) );
        print file_get_contents($file);
    } 
```

# c - 矩阵加法/乘法的 pthread 加速

> ID：12233387
> 
> 赞同：2
> 
> 时间：2012-09-02T04:25:02.457
> 
> 标签：c, pthreads

我正在编写一个基本代码来添加两个矩阵并记下单线程和 2 个或更多线程所花费的时间。在该方法中，我首先将给定的两个矩阵（随机初始化）划分为 THREADS 个段，然后将这些段中的每一个发送到由`pthread_create`调用启动的加法模块。并行加法函数的参数如下。

```
struct thread_segment
{
  matrix_t *matrix1, *matrix2, *matrix3;
  int start_row, offset;
}; 
```

指向两个源矩阵和一个目标矩阵的指针。（一旦源和目标可能指向同一个矩阵）。是特定线程应该开始添加的`start_row`行，并且`offset`告诉该线程应该从 开始添加多少`start_row`。

这`matrix_t`是一个简单的结构，定义如下：

```
typedef struct _matrix_t
{
  TYPE **mat;
  int r, c;
} matrix_t; 
```

我已经用 2 个线程编译了它，但是当我使用 10000 x 10000 矩阵运行时（几乎）没有加速。我正在用`time -p`程序记录运行时间。

矩阵随机初始化也像上面一样并行完成。

我认为这是因为所有线程都在同一个矩阵地址区域上工作，可能是因为瓶颈没有产生任何加速。尽管所有线程都将在矩阵的不同段上工作，但它们不会重叠。

以前我实现了一个并行合并排序和一个快速排序，它们也显示出类似的特征，当我将特定线程要工作的数据段复制到新分配的内存时，我能够获得加速。

我的问题是这是因为：

1.  内存瓶颈？
2.  时间基准没有以正确的方式完成？
3.  数据集太小？
4.  编码错误？
5.  其他

在这种情况下，如果是内存瓶颈，那么每个并行程序是否都使用独占内存区域，即使共享内存上的线程的多次访问也可以在没有互斥锁的情况下完成？

**编辑**

当我制作矩阵段时，我可以看到加速

```
 curr = 0;
  jump = matrix1->r / THREADS;

  for (i=0; i<THREADS; i++)
  {
    th_seg[i].matrix1 = malloc (sizeof (matrix_t));
    th_seg[i].matrix1->mat = &(matrix1->mat[curr]);
    th_seg[i].matrix1->c = matrix1->c;
    th_seg[i].matrix1->r = jump;

    curr += jump;
  } 
```

也就是在传递之前，在结构体中分配本线程要处理的矩阵的基地址，并存储行数。所以现在每个矩阵的基地址对于每个线程都是不同的。但只有当我多次添加一些 100 x 100 的小尺寸矩阵时。在每次迭代中调用并行添加之前，我正在重新分配随机值。这里注意到的加速是真的吗？还是由于其他一些现象的chaching 效应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T05:51:53.180

要优化内存使用，您可能需要查看[循环平铺](http://en.wikipedia.org/wiki/Loop_tiling)。这将有助于更新缓存内存。在这种方法中，您将矩阵分成更小的块，以便缓存可以将值保存更长时间，并且不需要经常自我更新。
另请注意，创建多个线程只会增加它们之间切换的开销。

为了了解正确的实现对并发程序的运行时间有多大影响，以下是程序将两个矩阵相乘的结果：

```
seconds  name    
10.72   simpleMul
5.16   mulThread
3.19   tilingMulThread 
```

# java - 如何迭代HashMap >

> ID：12233391
> 
> 赞同：0
> 
> 时间：2012-09-02T04:25:55.783
> 
> 标签：java, hashmap

如何从 HashMap 打印 ArrayList？

```
Map<String, ArrayList<Car>> cars = new HashMap<String, ArrayList<Car>>;

ArrayList<Car> carList = cars.get("bmw");

    for (int i = 0; i < carList.size(); i++) {
        System.out.println(carList.get(i));
    } 
```

代码导致：

```
java.lang.NullPointerException 
```

尽管“bmw”键存在并已填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T04:32:45.423

```
Iterator<String> itr = carList.iterator();
    while (itr.hasNext()) {
      String element = itr.next();
      System.out.print(element + " ");
    } 
```

Inoder to do this carList should not be a null value.
To add values to ArrayList you can use

```
carList.add("Some value"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T04:27:16.280

尝试添加一个

```
System.out.println(cars.get("bmw")); 
```

检查并查看其中的确切内容（在地图和汽车的 ArrayList 中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T10:10:24.457

遍历列表的最简单方法是使用 foreach：

```
ArrayList<Car> carList = cars.get("bmw");  
for (Car car : carList) {
    System.out.println(car.getYourValueToPrint());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T10:43:19.807

遍历 ArrayList 最安全的方法是通过增强每个循环，从而为您省去 a 的痛苦`NullPointerException`：

```
ArrayList<Car> carList = cars.get("bmw");
for(Car car: carList){
    car.doAnyOpertation();
    System.out.println(car.getAnyValue());
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T07:12:11.170

```
ArrayList<Car> carList = cars.get("bmw");
for(Car car: carList){
    car.doAnyOpertation();
    System.out.println(car.getAnyValue());
} 
```

即使在这种情况下，如果 carList 为空，则
`for(Car car: carList)`与 throw NPE一致

# c++ - 用于编译时数学函数的 constexpr vs 模板？

> ID：12233393
> 
> 赞同：9
> 
> 时间：2012-09-02T04:26:13.440
> 
> 标签：c++, templates, c++11, metaprogramming, constexpr

我对 C++2011 的新关键字 constexpr 感到很困惑。当我编写编译时函数（尤其是数学函数）时，我想知道在哪里使用 constexpr 以及在哪里使用模板元编程。例如，如果我们采用整数 pow 函数：

```
// 1 : 
template <int N> inline double tpow(double x)
{
    return x*tpow<N-1>(x);
}
template <> inline double tpow<0>(double x)
{
    return 1.0;
}

// 2 :
constexpr double cpow(double x, int N)
{
    return (N>0) ? (x*cpow(x, N-1)) : (1.0);
}

// 3 :
template <int N> constexpr double tcpow(double x)
{
    return x*tcpow<N-1>(x);
}
template <> constexpr double tcpow<0>(double x)
{
    return 1.0;
} 
```

第二个和第三个功能是等效的吗？什么是最好的解决方案？它是否产生相同的结果：

*   如果 x 在编译时已知
*   如果 x 在编译时未知

何时使用 constexpr 以及何时使用模板元编程？

编辑 1：修改代码以包括模板的专业化

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-02T05:37:40.570

我可能不应该这么晚才回答模板元编程问题。但是，我来了。

首先，constexpr 没有在 Visual Studio 2012 中实现。如果你想为 windows 开发，那就别管它了。我知道，这很糟糕，我讨厌微软不包括它。

除此之外，您可以将很多东西声明为常量，但就“您可以在编译时使用它们”而言，它们并不是真正的“常量”。例如：

```
const int foo[5] = { 2, 5, 1, 9, 4 };
const int bar = foo[foo[2]]; // Fail! 
```

你会认为你可以在编译时从中读取，对吧？没有。但是，如果您将其设为 constexpr，则可以。

```
constexpr int foo[5] = { 2, 5, 1, 9, 4 };
constexpr int bar = foo[foo[2]]; // Woohoo! 
```

Consexpr 非常适合“恒定传播”优化。这意味着如果您有一个变量 X，它是在编译时根据某些条件（可能是元编程）声明的，如果它是一个 constexpr，那么编译器知道它可以在进行优化时“安全地”使用它，例如，删除像 a = (X * y); 这样的指令 并将它们替换为 a = 0; 如果 X 评估为 0（并且满足其他条件）。

显然这很好，因为对于许多数学函数，常量传播可以给你一个容易（使用）的过早优化。

它们的主要用途，而不是相当深奥的东西（例如使我能够更容易地编写编译时字节码解释器），是能够制作可以在编译时调用和使用的“函数”或类-时间和运行时。

基本上，它们只是填补了 C++03 中的一个漏洞，并帮助编译器进行优化。

那么你的三个中哪个是“最好的”？

2 可以在运行时调用，而其他的只能在编译时调用。这很甜蜜。

还有一点。Wikipedia 为您提供了“constexpr 允许这样做”的非常基本的摘要，但模板元编程可能很复杂。Consexpr 使它的某些部分变得容易得多。我希望我有一个明确的例子给你，而不是说从数组中读取。

我想一个很好的数学例子是如果你想实现一个用户定义的复数类。仅使用模板元编程而没有 constexpr 的代码将复杂一个数量级。

那么什么时候不应该使用 constexpr？老实说，constexpr 基本上是“除 MORE CONST 之外的 const”。您通常可以在使用 const 的任何地方使用它，但有一些注意事项，例如在运行时调用时，如果函数的输入不是 const，函数将如何表现非 const。

嗯。好的，这就是现在的全部。我太累了，不能多说。我希望我对您有所帮助，如果我不是，请随时对我投反对票，我将删除此内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T05:02:20.433

~~第 1 和第 3 是不正确的。`tpow<N-1>`编译器将在评估之前尝试实例化`(N>0) ?`，您将获得无限的模板递归。您需要对`N==1`（或`==0`）进行专业化才能使其工作。2nd 将`x`在编译时和运行时工作。~~

在您的专业化`==0`编辑后添加。现在所有功能都将适用于编译时或运行时`x`。1st 将始终返回非 constexpr 值。`x`如果和是 constexpr，则 2nd 和 3rd 将返回`N`constexpr。`N`如果不是 constexpr，则第二个甚至可以工作，其他需要 constexpr `N`（因此，第二个和第三个不等价）。

constexpr 用于两种情况。当您编写`int N=10;`时， N 的值在编译时是已知的，但它不是 constexpr 并且不能用作例如模板参数。关键字 constexpr 明确告诉编译器`N`可以安全地用作编译时值。第二个用途是作为 constexpr 函数。他们使用 C++ 的子集有条件地生成 constexpr 值，并且可以显着简化等效的模板函数。constexpr 函数的一个缺点是您无法保证编译时评估——编译器可以选择在运行时进行评估。使用模板实现可以保证编译时评估。

# c++ - 从 32 位应用程序打开 64 位 regedit

> ID：12233396
> 
> 赞同：1
> 
> 时间：2012-09-02T04:26:24.127
> 
> 标签：c++, windows, winapi, shellexecute

我正在尝试使用 ShellExecute 从我的 32 位应用程序中打开 64 位 Regedit。

我在 Process Explorer 中注意到，如果我正常打开 Regedit，它会说图像是 64 位的，但是如果我`C:\Windows\Regedit.exe`使用 ShellExecute 从我的 32 位应用程序打开，Process Explorer 会说图像是 32 位的。

（它确实在 Windows 目录中打开了 regedit，而不是在 SysWOW64 中）

我发现如果我`Wow64DisableWow64FsRedirection`在调用 ShellExecute 之前使用该函数，它会打开它的 64 位图像。但我的应用程序无法在 32 位 XP 上运行。

令我困惑的是，无论我以哪种方式打开 regedit，它们都驻留在 中`C:\Windows`，并且都是相同的可执行文件。同一个可执行文件怎么会有两种不同的图像类型？我怎么能打开 64 位的没有`Wow64DisableWow64FsRedirection`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T04:36:08.613

You need to detect if you are in a 64 bit process with [Is64BitProcess](http://msdn.microsoft.com/en-us/library/system.environment.is64bitprocess.aspx), if so, access `%windir%\Sysnative` as that points to the "Real" System32 folder for when 32 bit applications need to access the 64 bit System32 folder.

```
string system32Directory = Path.Combine(Environment.ExpandEnvironmentVariables("%windir%"), "system32");
if(Environment.Is64BitOperatingSystem && !Environment.Is64BitProcess)
{
    // For 32-bit processes on 64-bit systems, %windir%\system32 folder
    // can only be accessed by specifying %windir%\sysnative folder.
    system32Directory = Path.Combine(Environment.ExpandEnvironmentVariables("%windir%"), "sysnative");

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-13T07:32:17.960

这是我用来从 32 位应用程序以 64 位启动 regedit 的代码：

```
 [DllImport("kernel32.dll", SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    internal static extern bool Wow64DisableWow64FsRedirection(ref IntPtr ptr);

    [DllImport("kernel32.dll", SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    internal static extern bool Wow64RevertWow64FsRedirection(IntPtr ptr);

    internal int ExecuteCommand64(string Command, string Parameters)
    {

        IntPtr ptr = new IntPtr();
        bool isWow64FsRedirectionDisabled = Wow64DisableWow64FsRedirection(ref ptr);
        if (isWow64FsRedirectionDisabled)
        {

            //Set up a ProcessStartInfo using your path to the executable (Command) and the command line arguments (Parameters).
            ProcessStartInfo ProcessInfo = new ProcessStartInfo(Command, Parameters);
            ProcessInfo.CreateNoWindow = true;
            ProcessInfo.UseShellExecute = false;
            ProcessInfo.RedirectStandardOutput = true;

            //Invoke the process.
            Process Process = Process.Start(ProcessInfo);
            Process.WaitForExit();

            //Finish.
            // this.Context.LogMessage(Process.StandardOutput.ReadToEnd());
            int ExitCode = Process.ExitCode;
            Process.Close();
            bool isWow64FsRedirectionOK = Wow64RevertWow64FsRedirection(ptr);
            if (!isWow64FsRedirectionOK)
            {
                throw new Exception("Le retour en 32 bits a échoué.");
            }
            return ExitCode;
        }

        else
        {
            throw new Exception("Impossible de passer en 64 bits");
        }

    } 
```

我用以下行调用它：

```
ExecuteCommand64(@"c:\windows\regedit", string.Format("\"{0}\"", regFileName)); 
```

其中 regFilename 是我要添加到注册表的注册表文件。

# c# - 激活 Void On 按钮按下

> ID：12233401
> 
> 赞同：1
> 
> 时间：2012-09-02T04:27:33.737
> 
> 标签：c#, button, onclick, void

非常直截了当的问题，我刚刚忘记了正确的编码。我有一个 void 设置，我希望它在我单击按钮时运行。

无效我想执行：

```
 public void giveWeapon(int clientIndex, string weaponName)
    {

        uint guns = getWeaponId(weaponName);

        XDRPCExecutionOptions options = new XDRPCExecutionOptions(XDRPCMode.Title, 0x822728F8);  //Updated
        XDRPCArgumentInfo<uint> info = new XDRPCArgumentInfo<uint>(getPlayerState(clientIndex));
        XDRPCArgumentInfo<uint> info2 = new XDRPCArgumentInfo<uint>((uint)guns);
        XDRPCArgumentInfo<uint> info3 = new XDRPCArgumentInfo<uint>((uint)0);
        uint errorCode = xbCon.ExecuteRPC<uint>(options, new XDRPCArgumentInfo[] { info, info2, info3 });
        iprintln("gave weapon: " + (guns.ToString()));
        giveAmmo(clientIndex, guns);
        //switchToWeapon(clientIndex, 46);

    } 
```

我只希望它在单击按钮时运行：

```
 private void button14_Click(object sender, EventArgs e)
    {
     // Call void here

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T04:31:42.460

`void`是一个关键字，表示您的**函数** `giveWeapon`不返回值。所以你的正确问题是：*“我怎样才能调用一个函数？”*

答案：

```
private void button14_Click(object sender, EventArgs e)
{
    int clientIndex = 5; // use correct value
    string weaponName = "Bazooka"; // use correct value
    giveWeapon(clientIndex, weaponName);
} 
```

如果`giveWeapon`在不同的类中定义，则需要创建一个实例并在该实例上调用该方法，即：

```
ContainingClass instance = new ContainingClass();
instance.giveWeapon(clientIndex, weaponName); 
```

* * *

作为旁注，您的代码可读性将从使用[*隐式类型的局部变量*](http://msdn.microsoft.com/en-us/library/bb383973.aspx)中受益匪浅：

```
public void giveWeapon(int clientIndex, string weaponName)
{
    uint guns = getWeaponId(weaponName);

    var options = new XDRPCExecutionOptions(XDRPCMode.Title, 0x822728F8);  //Updated
    var info = new XDRPCArgumentInfo<uint>(getPlayerState(clientIndex));
    var info2 = new XDRPCArgumentInfo<uint>(guns); // guns is already uint, why cast?
    var info3 = new XDRPCArgumentInfo<uint>(0); // same goes for 0
    uint errorCode = xbCon.ExecuteRPC<uint>(options, new XDRPCArgumentInfo[] { info, info2, info3 });
    iprintln("gave weapon: " + guns); // ToString is redundant
    giveAmmo(clientIndex, guns);
    //switchToWeapon(clientIndex, 46);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T04:29:40.723

简单地去：

```
private void button14_Click(object sender, EventArgs e)
{
    giveWeapon(clientIndex, weaponName);
} 
```

只要`giveWeapon`是在同一个班级，`button14`那么它就可以工作。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T04:30:43.297

然后调用它

```
private void button14_Click(object sender, EventArgs e)
{

   giveWeapon(10, "Armoured Tank");
} 
```

# regex - Error using RegexLiteKit to draw rout on mapview

> ID：12233404
> 
> 赞同：7
> 
> 时间：2012-09-02T04:27:40.010
> 
> 标签：regex, ios4

In one of my iphone projects I have used the RegexLiteKit for drawing rout in my mapview. While compiling the following failures are showing,

```
Undefined symbols for architecture i386:
  "_uregex_start", referenced from:
      _rkl_performRegexOp in RegexKitLite.o
      _rkl_search in RegexKitLite.o
      _rkl_findRanges in RegexKitLite.o
  "_uregex_end", referenced from:
      _rkl_performRegexOp in RegexKitLite.o
      _rkl_search in RegexKitLite.o
      _rkl_findRanges in RegexKitLite.o
  "_uregex_setText", referenced from:
      _rkl_clearCacheSlotSetTo in RegexKitLite.o
      _rkl_setCacheSlotToString in RegexKitLite.o
  "_uregex_find", referenced from:
      _rkl_search in RegexKitLite.o
  "_uregex_findNext", referenced from:
      _rkl_search in RegexKitLite.o
      _rkl_replaceAll in RegexKitLite.o
  "_u_errorName", referenced from:
      _rkl_NSExceptionForRegex in RegexKitLite.o
      _rkl_userInfoDictionary in RegexKitLite.o
  "_u_strlen", referenced from:
      _rkl_userInfoDictionary in RegexKitLite.o
  "_uregex_reset", referenced from:
      _rkl_replaceAll in RegexKitLite.o
  "_uregex_appendReplacement", referenced from:
      _rkl_replaceAll in RegexKitLite.o
  "_uregex_appendTail", referenced from:
      _rkl_replaceAll in RegexKitLite.o
  "_uregex_open", referenced from:
      _rkl_getCachedRegex in RegexKitLite.o
  "_uregex_groupCount", referenced from:
      _rkl_getCachedRegex in RegexKitLite.o
  "_uregex_close", referenced from:
      _rkl_clearCacheSlotRegex in RegexKitLite.o

ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

Is there any way to make RegexLiteKit work? please help..

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-09-15T08:40:35.773

*   转到您的目标构建设置
*   搜索`linker flags`
*   双击附近`other linker flags`并添加`-licucore`

完毕

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-10T07:33:56.960

将 libicucore 框架添加到您的项目中解决此问题，并通过此链接进行参考[http://www.mobisoftinfotech.com/blog/iphone/iphone-regular-expression-tutorial-regexkitlite-framework/](http://www.mobisoftinfotech.com/blog/iphone/iphone-regular-expression-tutorial-regexkitlite-framework/)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-09T05:37:19.883

我通过在我的项目中添加 libicucore 框架解决了这个问题。添加 libicucore 框架的方法**Build Settings-> Linking->Other Linker Flags --> -licucore**

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-03-21T14:20:53.643

您需要在下面设置链接器标志是执行相同操作的步骤。转到构建设置-> 链接-> 其他链接器标志-> **-licucore**

不要忘记在**licucore**上方添加**-**

 *** * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-12T08:28:33.327

如果您没有将 arc 用于项目，请`-fno-objc-arc`为`RegexKitLite.m`.

接下来，您必须添加其他链接器标志，如下所示：

构建设置 > 链接 >**其他链接器标志**

添加：

```
-licucore
-ObjC
-lc++ 
```

谢谢，

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-22T11:35:43.460

对于 iOS 9.2 和 Xcode 7，我解决了如下问题

1.  点击您的项目
2.  点击目标
3.  单击“构建阶段”选项卡
4.  双击 RegexKitLie.m
5.  在打开的框中输入 -fno-objc-arc
6.  完成并享受。**

# php - Preventing session hijacking

> ID：12233406
> 
> 赞同：75
> 
> 时间：2012-09-02T04:28:56.357
> 
> 标签：php, security, session

How do you prevent multiple clients from using the same session ID? I'm asking this because I want to add an extra layer of security to prevent session hijacking on my website. If a hacker somehow figures out another user's session ID and makes requests with that SID, how can I detect that there are different clients sharing a single SID on the server and then reject the hijack attempt?

**EDIT**

I have accepted Gumbo's answer after careful consideration because I've come to the realization that what I'm asking for is impossible due to the restrictions of a *stateless HTTP protocol*. I forgot about what is perhaps the most fundamental principle of HTTP, and now that I think about this question seems a bit trivial.

Let me elaborate what I mean:

After User A logs in on example.com, he is given some random session ID, for simplicity's sake, let it be 'abc123'. This session ID is stored as a cookie on the client side and is validated with a server-side session to ensure the user who logged in remains logged in as he moves from one webpage to another. This cookie of course would not need to exist if HTTP were not stateless. For that reason, if User B steals User A's SID, and creates a cookie on his computer with the value 'abc123', he would have successfully hijacked User A's session, but there is simply no way for the server to legitimately recognize that User B's request is any different from User A's requests, and therefore the server has no reason to reject any request. Even if we were to list the sessions that were already active on the server and try to see if someone is accessing a session that is already active, how can we determine that it is another user who is accessing the session illegitimately and not the same user who is already logged in with a session ID, but simply trying to make another request with it (ie navigate to a different webpage). We can't. Checking the user agent? Can be spoofed - but good as a Defense in Depth measure nevertheless. IP Address? Can change for legitimate reasons - but instead of not checking for the IP address at all, I suggest checking something like the first two octets of the IP, as even a user on a data plan network who constantly has a changing IP for perfectly legitimate reasons would only usually have the last two octets of their IP change.

In consclusion, it is the stateless HTTP that condemns us to never being able to fully protect our websites from session hijacking, but good practices (like the ones Gumbo has provided) will be good enough to prevent a good majority of session attacks. Trying to protect sessions from hijacking by denying multiple requests of the same SID is therefore simply ludicrous, and would defeat the whole purpose of sessions.

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-09-02T08:45:42.353

不幸的是，没有有效的方法来明确地识别来自攻击者的请求，而不是真正的请求。因为大多数反措施检查的属性，如 IP 地址或用户代理特征，要么不可靠（IP 地址可能在多个请求之间更改），要么很容易伪造（例如*User-Agent*请求标头），因此可能产生不必要的误报（即真正的用户切换 IP 地址）或漏报（即攻击者能够成功伪造具有相同*User-Agent 的*请求）。

这就是为什么防止会话劫持的最佳方法是确保攻击者无法找到另一个用户的会话 ID。这意味着您应该设计您的应用程序及其会话管理（1）攻击者无法通过使用足够的熵来猜测有效的会话 ID，以及（2）攻击者没有其他方法可以通过已知攻击获得有效的会话 ID /漏洞，如嗅探网络通信、跨站点脚本、通过*Referer*泄漏等。

也就是说，您应该：

*   使用足够的随机输入来生成会话 ID（参见[*session.entropy_file*](http://php.net/manual/en/session.configuration.php#ini.session.entropy-file)、[*session.entropy_length*](http://php.net/manual/en/session.configuration.php#ini.session.entropy-length)和[*session.hash_function*](http://php.net/manual/en/session.configuration.php#ini.session.hash-function)）
*   在传输过程中使用HTTPS保护会话ID
*   将会话ID 存储在 cookie 中而不是 URL 中，以避免通过*Referer*泄漏（请参阅[*session.use_only_cookies*](http://php.net/manual/en/session.configuration.php#ini.session.use-only-cookies)）
*   `HttpOnly`使用和属性设置 cookie`Secure`以禁止通过 JavaScript 访问（以防 XSS 漏洞）并禁止通过不安全通道传输（请参阅[*session.cookie_httponly*](http://php.net/manual/en/session.configuration.php#ini.session.cookie-httponly)和[*session.cookie_secure*](http://php.net/manual/en/session.configuration.php#ini.session.cookie-secure)）

除此之外，您还应该重新生成会话 ID，同时在某些会话状态更改（例如登录后确认真实性或更改授权/权限）后使旧 ID 无效（请参阅[`session_regenerate_id`函数](http://php.net/session_regenerate_id)），您还可以定期执行此操作以减少时间跨度成功的会话劫持攻击。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-17T14:13:34.857

我们能不能做这样的事情。

将会话 ID 存储在数据库中。还要存储该会话 ID 的 Ip 地址和 HTTP_USER_AGENT。现在，当请求到达包含该匹配会话 id 的服务器时，请检查它来自脚本中的哪个代理和 ip。

可以通过为会话创建通用函数或类来使此基础工作，以便在处理每个请求之前对其进行验证。几乎不需要几微秒。但是，如果许多用户正在访问您的站点，并且您拥有庞大的会话数据库，那么这可能是一个很小的性能问题。但是，与 => 使用重新生成会话等其他方法相比，它肯定会非常安全。

在重新生成会话 ID 时，会话劫持的可能性也很小。

假设，用户的会话 id 被复制，并且该用户有一段时间没有工作或处于活动状态，并且没有向具有旧会话 id 的服务器发出请求重新生成新的请求。然后，如果会话 id 被劫持，黑客将使用该会话 id 并向具有该 id 的服务器发出请求，然后服务器将以重新生成的会话 id 进行响应，以便黑客可以继续使用服务。实际用户将不再能够操作，因为他不知道重新生成的 id 是什么，以及请求中要传递的请求会话 id 是什么。完全消失了。

如果我在某个地方错了，请纠正我。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-02T07:42:37.467

有许多针对会话劫持的标准防御措施。其中之一是将每个会话与单个 IP 地址相匹配。

[其他方案](http://msdn.microsoft.com/en-us/magazine/cc300500.aspx)可能会使用从以下位置生成的 HMAC：

*   客户端IP的网络地址
*   客户端发送的用户代理头
*   识别码
*   存储在服务器上的密钥

仅使用 IP 的网络地址的原因是，如果用户位于公共代理后面，在这种情况下，他们的 IP 地址可以随每个请求而更改，但网络地址保持不变。

当然，为了真正安全，您真的应该对所有请求强制使用 SSL，这样 SID 就不会被潜在的攻击者拦截。但并非所有网站都这样做（*::cough:: [Stack Overflow](https://meta.stackexchange.com/questions/69171/why-doesnt-the-stack-overflow-team-fix-the-firesheep-style-cookie-theft) ::cough::*）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-04-17T21:53:25.940

会话劫持是一个严重的威胁，它必须通过使用安全套接字层来处理涉及事务的高级应用程序或使用简单的技术，如使用 cookie、会话超时和重新生成 id 等，如上所述。
互联网诞生时，HTTP 通信被设计为无状态的；也就是说，两个实体之间的连接仅存在于将请求发送到服务器所需的短暂时间段内，并将结果响应传递回客户端。以下是黑客用来劫持会话的几种方法

*   网络窃听
*   不知情的暴露
*   转发、代理和网络钓鱼
*   反向代理

始终推荐 SSL**安全套接字层**
在脚本开头也 使用**cookie**来遵循 ini_set() 指令，以覆盖 php.ini 中的任何全局设置：

```
ini_set( 'session.use_only_cookies', TRUE );                
ini_set( 'session.use_trans_sid', FALSE ); 
```

使用**会话超时和会话重新生成 ID**

```
<?php
// regenerate session on successful login
if ( !empty( $_POST['password'] ) && $_POST['password'] === $password )         
{       
 // if authenticated, generate a new random session ID
  session_regenerate_id();

 // set session to authenticated
  $_SESSION['auth'] = TRUE;

 // redirect to make the new session ID live

 header( 'Location: ' . $_SERVER['SCRIPT_NAME'] );
}                   
// take some action
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-02T04:45:00.353

一个简单的实现可以通过在数据库中创建一个表来完成，作为已登录的用户，然后在登录时，使用用户名和他的 SID 更新该表，这将防止其他用户作为同一用户登录，现在在注销时，只需运行一个简单的查询，它会删除数据库中的登录数据，这也可以用于一次跟踪您网站上的登录用户。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-18T07:44:54.627

显然，当您在浏览器中设置会话 cookie 时，该 cookie 会在请求中发送。现在，当请求到来时，服务器将检查数据库中的会话 ID 并授予访问权限。为了防止只有存储代理和 ip 很重要，以便在检查服务器之前确保会话访问权限被授予唯一的客户端，而不是可以被劫持的唯一会话 ID。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-02T04:41:47.577

在我看来，您可以在用户登录时将会话 ID 存储在数据库中，并在登录前检查每个人是否相同。在用户注销时删除您存储在数据库中的相同会话 ID。您可以轻松找出每个用户的会话 ID，否则我可以帮助您。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-16T13:26:15.333

I don't know about the coding part well. So I can tell u an algorithm to do this. Setting stuffs like SSL, or setting the session cookie to secure and httpOnly wont work if a user sniffs the session id from a LAN network(Provided user and attacker are in the same LAN).

So what you can do is, once the user successfully logs into the application, set unique token to each and every pages of the web application and keep a track of this at the server side. So that if the valid user sends the request to access a particular page, the token of that page will also be sent to the server side. Since the tokens are unique for a user for a particular session, even if the attacker can get the session id, he cannot hijack the users session as he cannot provide the valid token to the server.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-26T22:42:34.330

@阿南杜 M 达斯：

我相信您可能指的是会话令牌与每个会话 ID 的使用。该站点可以解释令牌与会话的使用：

[https://blog.whitehatsec.com/tag/session-token/](https://blog.whitehatsec.com/tag/session-token/)

尽管会话令牌很容易受到 XSS 攻击的破坏，但这并不意味着它们永远不应该被使用。我的意思是让我们面对现实，如果服务器上的安全漏洞会损害某些东西，那不是方法的错，而是引入该漏洞的程序员的错（强调 Hesson 和 Rook 提出的观点）。

如果您遵循适当的安全约定和实践并保护您的站点免受 SQL 注入、XSS 的攻击，并要求通过 HTTPS 管理所有会话，那么您可以使用存储在会话中的服务器端令牌轻松管理来自 CSRF 的潜在攻击，并在每次用户对其会话进行操作时进行更新（例如提交 $_POST）。此外，切勿将会话或其内容存储在 url 中，无论您认为它们的编码如何。

当您的用户的安全性至关重要时（应该如此），使用会话令牌将允许提供更好或更高级的功能，而不会损害他们的会话安全性。

# blogger - Blogger Atom Output all post feeds

> ID：12233408
> 
> 赞同：3
> 
> 时间：2012-09-02T04:29:19.433
> 
> 标签：blogger

I know the default blogger atom is www.[yourdomian].blogspot.com/feeds/posts/default, but how could get all posts feeds? I found a semi-solution is to add "max-results=500" (or change the number bigger)

Just wondering is there any better solution for all post feeds?

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T19:05:39.047

如果博客的帖子超过500条，那么希望没有一个分类（标签）超过500条，获取每个分类的feed。

[http://support.google.com/blogger/bin/answer.py?hl=en&answer=97933](http://support.google.com/blogger/bin/answer.py?hl=en&answer=97933)

除此之外，您可以使用 start-index 或 published-min 和 published-max。

feedburner 中的大量项目并不是真正的选择，除非每个项目只包含一个非常简短的摘要，以免超过 feedburner 512KB 的限制。

[http://support.google.com/feedburner/answer/79009/?hl=en](http://support.google.com/feedburner/answer/79009/?hl=en)

仅适用于某些基于 Blogger 的博客的东西——那些在第一次发帖后很早就通过 Google Reader 订阅的博客；然后，您可以从一开始就获取 Google Reader 缓存的 atom 提要，每 1000 个项目必须加载不同的 URL。

```
http://www.google.com/reader/atom/feed/http://<BloggerBlog>/feeds/posts/default?n=1000 
```

[https://webapps.stackexchange.com/questions/26567/how-to-raise-google-reader-rss-feed-entry-limit](https://webapps.stackexchange.com/questions/26567/how-to-raise-google-reader-rss-feed-entry-limit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T04:52:58.863

是的，www.[yourdomian].blogspot.com/feeds/posts/default?max-results=500 是唯一的出路。您也可以将您的饲料燃烧到 feedburner。

# iphone - 在 iOS 中返回随机图像

> ID：12233412
> 
> 赞同：0
> 
> 时间：2012-09-02T04:30:23.553
> 
> 标签：iphone, objective-c, ios, xcode

我的 Xcode 项目中有 6 个 .png 图像（例如：image1.png、image2.png 等）。我想创建一个方法，从这组 6 个中返回一个随机图像并将其分配给我的视图背景。我已经有一个返回随机颜色的类似方法：

```
+(UIColor *)randomColor
{
CGFloat red= (CGFloat)random()/(CGFloat)RAND_MAX;
CGFloat blue= (CGFloat)random()/(CGFloat)RAND_MAX;
CGFloat green= (CGFloat)random()/(CGFloat)RAND_MAX;
return [UIColor colorWithRed:red green:green blue:blue alpha:1.0];

} 
```

我的实现文件这样调用这个方法：

```
UIColor *randomColor=[SoundDetail randomColor];
[self.view setBackgroundColor:randomColor]; 
```

如何编辑此方法以从我的 6 个列表中返回随机图像并将其分配给我的背景视图？我将 Xcode 4.4.1 用于通用 iOS 5 项目。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T04:40:23.413

```
UIImage * randomImage = [ UIImage imageNamed:[ NSString stringWithFormat:@"image%u.png", 1+arc4random_uniform(6) ] ] ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T05:31:47.713

假设您在 NSArray 中有 UIImages：

```
- (UIImage *)randomImage
{
    NSArray *imagesArray = // array of images;
    return [imagesArray objectAtIndex:(arc4random() % imagesArray.count];
} 
```

假设您在 NSArray 中有 UIImage 名称：

```
- (UIImage *)randomImage
{
    NSArray *imagesArray = // array of image names;
    NSString *imageName = [imagesArray objectAtIndex:(arc4random() % imagesArray.count];
    return [UIImage imageNamed:imageName];
} 
```

# ruby - parsing rss description with Ruby Parser

> ID：12233414
> 
> 赞同：0
> 
> 时间：2012-09-02T04:30:35.100
> 
> 标签：ruby, parsing

I am trying to parse a nytimes rss feed with Ruby's parser.

```
nyt_url = 'http://www.nytimes.com/services/xml/rss/nyt/World.xml'
open(nyt_url) do |rss|
  @nyt_feed = RSS::Parser.parse(rss)
end 
```

And in the view file:

```
<h2>New York Times Feed</h2>
<% @nyt_feed.items.each do |item| %>
  <p>
    <%= link_to item.title, item.link %>
    <%= item.description %>
  </p>
<% end %> 
```

But what I get out for the description looks something like this:

```
 Since air assaults by the Assad government picked up two weeks ago, 
knocking rebels in the south on their heels, Syrians have been arriving
at refuge camps in Jordan at a rate of about 2,000 a night.<img width='1' height='1' 
src='http://rss.nytimes.com/c/34625/f/642565/s/22f90a36/mf.gif' border='0'/><br/><br/><a 
href="http://da.feedsportal.com/r/139263791500/u/0/f/642565/c/34625/s/22f90a36/a2.htm"><img 
src="http://da.feedsportal.com/r/139263791500/u/0/f/642565/c/34625/s/22f90a36/a2.img" 
border="0"/></a><img width="1" height="1" 
src="http://pi.feedsportal.com/r/139263791500/u/0/f/642565/c/34625/s/22f90a36/a2t.img" 
border="0"/> 
```

I also have a similar situation with the Washington Post feed. How do I get the images to actually display, or at least to get just the description part. Do I have to handle this with regular expressions or is there some method on the parser object that I should be using?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:03:30.660

仅使用正则表达式来解析 XML 或 RSS（或 HTML）并不是一个好主意，因为预测所有可能的标签嵌套并不容易。

通常你会想要使用 XML Gem / library 来解析你的 RSS 或 XML 数据（如 libxml、Nokogiri、Ox），**但是当 XML 提要非常大时，它会占用大量内存**

试试 Ox 或 Nokogiri，看看它是否比正则表达式更适合你。

如果您的提要非常大，并且其中有很多文章，您可以尝试使用正则表达式剪切项目/文章，然后使用 Ox 或 Nokogiri 分别解析它们的内容（这在完成时也很好用用于并行处理的 Resque 作业）。

# c++ - Using GCC's function instrumentation, why does using C++ STL containers or stream I/O cause a segfault?

> ID：12233416
> 
> 赞同：4
> 
> 时间：2012-09-02T04:30:39.370
> 
> 标签：c++, c, gcc, instrumentation

I recently read about using GCC's code generation features (specifically, the [-finstrument-functions](http://gcc.gnu.org/onlinedocs/gcc-4.6.3/gcc/Code-Gen-Options.html#Code-Gen-Options) compiler flag) to easily add instrumentation to my programs. I thought it sounded really cool and went to try it out on a previous C++ project. After several revisions of my patch, I found that any time I tried to use an STL container or print to stdout using C++ stream I/O, my program would immediately crash with a segfault. My first idea was to maintain a `std::list` of `Event` structs

```
typedef struct  
{
    unsigned char event_code;
    intptr_t func_addr;
    intptr_t caller_addr;
    pthread_t thread_id;
    timespec ts;
}Event;

list<Event> events; 
```

which would be written to a file when the program terminated. GDB told me that when I tried to add an `Event` to the list, calling `events.push_back(ev)` itself initiated an instrumentation call. This wasn't terrible surprising and made sense after I thought about it for a bit, so on to plan 2\.

The example in the [blog](http://balau82.wordpress.com/2010/10/06/trace-and-profile-function-calls-with-gcc/) which got me involved in all this mess didn't do anything crazy, it simply wrote a string to a file using `fprintf()`. I didn't think there would be any harm in using C++'s stream-based I/O instead of the older `(f)printf()`, but that assumption proved to be wrong. This time, instead of a nearly-infinite death spiral, GDB reported a fairly normal-looking descent into the standard library... followed by a segfault.

# A Short Example

```
#include <list>
#include <iostream>
#include <stdio.h>

using namespace std;

extern "C" __attribute__ ((no_instrument_function)) void __cyg_profile_func_enter(void*, void*);

list<string> text;

extern "C" void __cyg_profile_func_enter(void* /* unused */, void* /* unused */)
{
    // Method 1
    text.push_back("NOPE");

    // Method 2
    cout << "This explodes" << endl;

    // Method 3
    printf("This works!");
} 
```

# Sample GDB Backtrace

## Method 1

```
#0  _int_malloc (av=0x7ffff7380720, bytes=29) at malloc.c:3570
#1  0x00007ffff704ca45 in __GI___libc_malloc (bytes=29) at malloc.c:2924
#2  0x00007ffff7652ded in operator new(unsigned long) ()
   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#3  0x00007ffff763ba89 in std::string::_Rep::_S_create(unsigned long, unsigned long, std::allocator<char> const&) () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#4  0x00007ffff763d495 in char* std::string::_S_construct<char const*>(char const*, char const*, std::allocator<char> const&, std::forward_iterator_tag) () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#5  0x00007ffff763d5e3 in std::basic_string<char, std::char_traits<char>,  std::allocator<char> >::basic_string(char const*, std::allocator<char> const&) () from  /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#6  0x00000000004028c1 in __cyg_profile_func_enter () at src/instrumentation.cpp:82
#7  0x0000000000402c6f in std::move<std::string&> (__t=...) at     /usr/include/c++/4.6/bits/move.h:82
#8  0x0000000000402af5 in std::list<std::string, std::allocator<std::string>   >::push_back(std::string&&) (this=0x6055c0, __x=...) at   /usr/include/c++/4.6/bits/stl_list.h:993
#9  0x00000000004028d2 in __cyg_profile_func_enter () at src/instrumentation.cpp:82
#10 0x0000000000402c6f in std::move<std::string&> (__t=...) at /usr/include/c++/4.6/bits/move.h:82
#11 0x0000000000402af5 in std::list<std::string, std::allocator<std::string> >::push_back(std::string&&) (this=0x6055c0, __x=...) at /usr/include/c++/4.6/bits/stl_list.h:993
#12 0x00000000004028d2 in __cyg_profile_func_enter () at src/instrumentation.cpp:82
#13 0x0000000000402c6f in std::move<std::string&> (__t=...) at /usr/include/c++/4.6/bits/move.h:82
#14 0x0000000000402af5 in std::list<std::string, std::allocator<std::string> >::push_back(std::string&
... 
```

## Method 2

```
#0  0x00007ffff76307d1 in std::ostream::sentry::sentry(std::ostream&) ()
    from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#1  0x00007ffff7630ee9 in std::basic_ostream<char, std::char_traits<char> >&  std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long) ()
   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#2  0x00007ffff76312ef in std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*) ()
   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#3  0x000000000040251e in __cyg_profile_func_enter () at src/instrumentation.cpp:81
#4  0x000000000040216d in _GLOBAL__sub_I__ZN8GLWindow7attribsE () at src/glwindow.cpp:164
#5  0x0000000000402f2d in __libc_csu_init ()
#6  0x00007ffff6feb700 in __libc_start_main (main=0x402cac <main()>, argc=1, ubp_av=0x7fffffffe268, 
init=0x402ed0 <__libc_csu_init>, fini=<optimized out>, rtld_fini=<optimized out>, 
stack_end=0x7fffffffe258) at libc-start.c:185
#7  0x0000000000401589 in _start () 
```

# Environment:

*   Ubuntu Linux 12.04 (x64)
*   GCC 4.6.3
*   Intel 3750K CPU
*   8GB RAM

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T05:06:38.217

在检测函数中使用的问题`cout`是检测函数被调用，`__libc_csu_init()`这是运行时初始化的一个非常早期的部分——在全局 C++ 对象有机会被构造之前（事实上，我认为`__libc_csu_init()`负责启动那些构造函数——至少是间接的）。

所以`cout`还没有机会被构建并且尝试使用它并不能很好地工作......

`std::List`这很可能是您在修复无限递归（[在 Dave S 的回答中提到](https://stackoverflow.com/a/12233482/12711)）后尝试使用时遇到的问题。

如果您愿意在初始化期间丢失一些仪器，您可以执行以下操作：

```
#include <iostream>
#include <stdio.h>

int initialization_complete = 0;

using namespace std;

extern "C" __attribute__ ((no_instrument_function)) void __cyg_profile_func_enter(void*, void*);

extern "C" void __cyg_profile_func_enter(void* /* unused */, void* /* unused */)
{
    if (!initialization_complete) return;

    // Method 2
    cout << "This explodes" << endl;

    // Method 3
    printf("This works! ");
}

void foo()
{
    cout << "foo()" << endl;
}

int main()
{
    initialization_complete = 1;
    foo();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T04:45:36.123

第一种情况似乎是无限循环，导致堆栈溢出。这可能是因为 std::list 是一个模板，它的代码是作为您使用它的翻译单元的一部分生成的。这也导致它被检测。所以你调用 push_back，它调用处理程序，它调用 push_back，...

第二个，如果我不得不猜测的话，可能是相似的，尽管很难说。

解决方案是单独编译检测函数，而不使用 -finstrument-functions。注意，示例博客单独编译了trace.c，没有选项。

# jquery - Animation in jQuery with play/previous/next

> ID：12233418
> 
> 赞同：0
> 
> 时间：2012-09-02T04:31:00.213
> 
> 标签：jquery, jquery-ui

I am using jQuery to animate and want different "scenes" so people can click on play the whole animation, previous or next scene, also jumping to a specific scene.

I wonder what the best way to do this is.

It seems that you can put animations in a queue in jQuery. Is that for animations like this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T04:48:28.813

你可以试试 jQuery 插件**[Camera slideshow](http://www.pixedelic.com/plugins/camera/)**。可以选择在其中嵌入在线视频。您可以创建缩略图并将其用于场景选择/导航。或者您可以浏览**[70 多个很棒的 jQuery 滑块插件](http://www.tripwiremagazine.com/2012/08/jquery-slider.html)**并为您挑选一个。一些滑块支持其幻灯片上的 HTML 内容，而不仅仅是图像。

# php - 使用 URL 路径作为索引页面的查询字符串，而不显示脚本文件名

> ID：12233420
> 
> 赞同：0
> 
> 时间：2012-09-02T04:31:06.623
> 
> 标签：php, apache, url

我有一个可以从 URL 访问的索引页面`http://mysite.com`。我可以输入查询字符串`?type=small`，`?type=medium`或者`?type=large`显示不同的结果。但是，我希望用户能够使用 URL 访问该站点，`http://mysite.com/small`而`http://mysite.com/medium`无需`http://mysite.com/large`创建单独的页面。

这可以做到吗？怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T04:34:59.777

```
RewriteEngine On
RewriteRule ^(small|medium|large) /?type=$1 
```

# android - cant create handler inside thread that has not called looper prepare

> ID：12233421
> 
> 赞同：2
> 
> 时间：2012-09-02T04:31:12.257
> 
> 标签：android, loops, handler

I am newbie android programmer. just started by seeing some online tutorials, i decided to make a application for myself.. it was working fine till yesterday.. The only change i made today was to add this line "this.requestWindowFeature(Window.FEATURE_NO_TITLE);" and it stated throwing the error. pls provide the solution for this.

```
public class MainActivity extends Activity implements OnClickListener, Runnable {
Context context;

EditText editTextNum, editText, editUserName, editPassword;
Button btnsend;
ProgressDialog pd;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_main);     
    editUserName = (EditText) findViewById(R.id.edit_userName);
    editPassword = (EditText) findViewById(R.id.edit_password);
    editTextNum = (EditText) findViewById(R.id.edit_number);
    editText = (EditText) findViewById(R.id.edit_message);      
    btnsend = (Button) findViewById(R.id.btnsend);
    btnsend.setOnClickListener(this);
}

/** Called when the user clicks the Send button */
public void sendMessage() {
    if (!isOnline()) {
        Toast.makeText(MainActivity.this,"No Internet Access..Cannot Send SMS", Toast.LENGTH_LONG).show();
    } else {
        String userName = editUserName.getText().toString();
        String password = editPassword.getText().toString();
        String number = editTextNum.getText().toString();
        String message = editText.getText().toString();
        String msgreciever = number;
        String testMessage = message;
        try {
            SmsSender.sendMessage(msgreciever, testMessage, userName, password);
        } catch (Exception ex) {
            Toast.makeText(MainActivity.this, "SMS Sending Failed.",Toast.LENGTH_LONG).show();
        }

    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public boolean isOnline() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnectedOrConnecting()) {
        return true;
    }
    return false;
}

public void onClick(View v) {
    // TODO Auto-generated method stub
    if (v == btnsend) {
        if (!isOnline()) {
            Toast.makeText(MainActivity.this,"No Internet Access..Cannot Send SMS",Toast.LENGTH_LONG).show();
        } else {
            pd = ProgressDialog.show(MainActivity.this, "Free Sms","Sending SMS..Please Wait..!!", true);
            Thread t = new Thread(this);
            t.start();
        }

    }
}

public void run() {
    // TODO Auto-generated method stub
    sendMessage();
    mHandler.sendEmptyMessage(0);
}

public Handler mHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        // TODO Auto-generated method stub
        super.handleMessage(msg);
        pd.dismiss();
        Toast.makeText(MainActivity.this, "Message Sent Successfully",Toast.LENGTH_LONG).show();
        editTextNum.setText("");
        editText.setText("");
        editTextNum.requestFocus();
    }
};
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T04:40:54.483

查看我的帖子，其中解释了这背后的原因：http: [//www.levinotik.com/2012/01/10/loopers-handlers-runtimeexceptions-explained/](http://www.levinotik.com/2012/01/10/loopers-handlers-runtimeexceptions-explained/)简而言之，您需要为处理程序提供来自某个线程的 Looper . 你总是可以通过这样做得到这个`new Handler(Looper.getMainLooper()):`

此外，您不应该在活动中管理自己的线程，或者至少不应该经常这样做。你需要做的是创建我展示的 Handler，然后调用 mHandler.post(runnable)，传入你想要运行的 runnable。您不必要地创建一个新线程，以便您可以在其上调用 start 以便执行 Runnable 的 run() 方法。为什么不直接通过让处理程序发布可运行的来直接运行它呢？

所以它应该看起来像：

```
Handler mHandler = new Handler(Looper.getMainLooper());

Runnable myRunnable = new Runnable() {
 public void run() {work here...}
}

...elsewhere

mHandler.post(myRunnable); 
```

事实上，如果你这样做，即使不使用 Looper.getMainLooper(); 它也不起作用，我会感到惊讶。

编辑

我不知道 SmsSender 是什么，但这很可能是导致您访问新线程的原因。如果 SmsSender 正在做一些长时间运行的工作，那么您应该做的是使用 AsyncTask 在后台完成该工作。然后在 onPostExecute 中，您可以使用相关的任何内容更新您的 UI。您似乎正在尝试自己实现 AsyncTask 的功能，尽管没有成功。看看为什么？您正在尝试在后台做一些昂贵的工作，然后通过使用处理程序让 UI 更新状态。这正是 AsyncTask 旨在为您提供帮助的目的，只是它正确地实现了所有这些并让您轻松。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:05:22.137

这对我有用，但我使用的是 ProgressDialog。

```
myProgressDialog = ProgressDialog.show(MyActivity.this,
                getString(R.string.texto1) + "...",
                getString(R.string.texto2) + "...", true);
        myProgressDialog.getWindow().setType(
                WindowManager.LayoutParams.TYPE_KEYGUARD_DIALOG);
        new Thread( new Runnable() {     
            public void run() {     
                runOnUiThread(new Runnable(){
                    public void run() { 

                        Toast t = Toast.makeText(getApplicationContext(), "cadena a mostrar", Toast.LENGTH_SHORT);
                        t.show();

                    }

                });
                myProgressDialog.dismiss();
            }                         
        }).start(); 
```

# java - SpringMVC Annotation Validation - DataBinding data type

> ID：12233424
> 
> 赞同：0
> 
> 时间：2012-09-02T04:31:56.103
> 
> 标签：java, spring-mvc, validation, spring-annotations

When using custom validation under this scenario:

```
if(officer.getBadgeId() == 0){

        errors.rejectValue("badgeId", "badgeId.required");
} 
```

if the POJO/Model officer has a datatype of int for the badgeId can a string be set as the error message for the attribute? Or the datatype of the attribute does not matter when doing validation and returning error messages to the view.

If it is an issue how do you handle this scenario in terms or returning an error message to the user from custom validation

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T04:49:58.677

错误消息将`String`仅为类型。

> void rejectValue(String field, String errorCode, **String** defaultMessage)
> 使用给定的错误描述拒绝当前对象的给定字段。

[春季文档链接。](http://static.springsource.org/spring/docs/1.1.4/api/org/springframework/validation/Errors.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T04:53:08.333

这是一个示例：[http ://alasdoo.com/2011/07/data-validation-conversion-basics-custom-error-messages-in-spring-mvc/](http://alasdoo.com/2011/07/data-validation-conversion-basics-custom-error-messages-in-spring-mvc/)

```
if (user.getBirthYear()!=null)
            if ( user.getBirthYear() <MINI_YEAR || user.getBirthYear() >MAX_YEAR)
                e.rejectValue( "birthYear", "user.birthYear.outOfInterval");
    } 
```

在这里，您可以看到作为日期类型的birthYear 返回了一条存储在 message.properties 文件中的 String 类型的错误消息。

# drupal - Set PHP Variables for Drupal 7 Theme Files

> ID：12233425
> 
> 赞同：1
> 
> 时间：2012-09-02T04:32:08.637
> 
> 标签：drupal, variables, themes

I want to set custom php variables that can be used throughout my drupal theme (html.tpl.php, page.tpl.php etc.) I need the variables set based on the $title of the node. I'm not an expert on how Drupal works, the moduling and hooks, and I just need to know the simplest/easiest way to accomplish this. I keep reading about implementing some sort of hook in the template.php file where you can set variables, but I've been unsuccesful with everything I've tried.

So, basically, how would you accomplish this:

1.  Get $title of Node
2.  Set variables that will be passed along into theme files (for example, to do basic things like: if($title == 'news_page') { $siteSection = "news"; } )
3.  Have $siteSection be available to use in theme files

Any help would be great.. thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T19:46:13.147

在 Drupal 从主题的模板（.tpl.php 文件）构建页面的 HTML 之前，它会运行预处理“钩子”。钩子基本上是让模块和主题覆盖或“挂钩”到 Drupal 核心进程的函数的命名约定。

例如，如果您想在用户登录时向他们显示一条消息，您可以使用[`hook_user_login`](http://api.drupal.org/api/drupal/modules!user!user.api.php/function/hook_user_login/7).

```
function MODULENAME_user_login(&$edit, $account) {
  drupal_set_message("Welcome, ". $account->name);
} 
```

当用户登录时，Drupal 会查找所有以“_user_login”结尾的加载函数并运行它们。如果这个函数在一个启用的模块中，它已经被加载，所以它也会被运行。

如果你想`$site_section`在你的文件中使一个名为的变量可用`page.tpl.php`，你可以挂钩到[`template_preprocess_page`](http://api.drupal.org/api/drupal/includes%21theme.inc/function/template_preprocess_page/7). 这是一个主题挂钩，因此名称略有不同，但功能几乎相同。要从你的主题调用这个钩子，你需要`template.php`在你的主题目录中创建一个名为的文件。在里面`template.php`，我们将添加：

```
<?php
function THEMENAME_preprocess_page(&$vars){
  switch (drupal_strtolower($vars['node']->title)) {
  case "about page":
    $site_section = "about";
    break;
  case "news page":
  case "news page1":
  case "news page2":
    $site_section = "news";
    break;
  default:
    $site_section = "none";
    break;
  }

  $vars['site_section'] = $site_section;
} 
```

`<?php`用于告诉服务器将所有执行代码视为 PHP 。然后我们声明我们的钩子函数，目的是将 Drupal 的页面变量数组加载到一个名为`$vars`. 通过添加`&`before `$vars`，我们将被允许修改在此函数之外使用的值。

switch 语句将让我们有效地测试多个值的页面标题。节点标题的值可能包含大写字母、小写字母和符号，因此为避免区分大小写不匹配，我们将标题转换为小写并仅测试（符号仍将在标题中，但）。在 switch 语句之后，我们将`$site_section`本地值的值设置到引用的`$vars`数组中以供 in 使用`page.tpl.php`。

但是，如果您只是打算将网站分成几个部分以进行主题化，那么还有其他方法可以实现。[几个月前我对类似情况的回答](https://stackoverflow.com/a/11408278/169450)可能会有所帮助。

# php - Check for duplicate rows querying only a substring of the data

> ID：12233431
> 
> 赞同：0
> 
> 时间：2012-09-02T04:33:32.900
> 
> 标签：php, mysql

I have duplicate images saved in *different directories*. Because every image location is stored in the database I want to remove duplicate rows of data. I can use this query to look for duplicate image locations in the *same directory*:

```
SELECT *
FROM page_additional_images
GROUP BY image_loc
HAVING COUNT(image_loc) > 1 
```

But, it won't work for images in *different directories* e.g. `cars` & `cars4`.

```
/images/**cars**/hispano-suiza-k6-pictures-and-wallpapers/hispano-suiza-k6.jpg
/images/**cars4**/hispano-suiza-k6-pictures-and-wallpapers/hispano-suiza-k6.jpg 
```

How can I take the query above and look for duplicates ignoring everything before the last "`/`"?

I want to explode each row by "/" and only query the last element in each array.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T04:44:18.173

据我所知，在 MySQL 中最接近 PHP 风格的爆炸是使用 SUBSTRING_INDEX（delim='/'，带有负数参数，例如 -1 仅获取文件名）： [http://dev。 mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-02T04:37:57.530

你可以给每个条目一个唯一的 id，mysql 可以自动判断是否有重复的条目，并阻止它被查询到数据库中。在 mysql 手册中查找 UNIQUE INDEX

# php - php - comparing two date

> ID：12233436
> 
> 赞同：0
> 
> 时间：2012-09-02T04:34:32.460
> 
> 标签：php

i have following code i am trying to compare two get in order to get into if statement but i something wrong with is code.

**the following code should run if the time is above 23:29 and less then 08:10...**

```
$gettime="04:39"; // getting this from database

$startdate = strtotime("23:29");
$startdate1 = date("H:i", $startdate);

$enddate = strtotime("08:10");
$enddate1 = date("H:i", $enddate);

//this condition i need to run    

if($gettime >= strtotime($startdate1) && $gettime <= strtotime($enddate1))
{
echo"ok working";
} 
```

please help me in dis regard

thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T04:39:52.397

您正在将字符串与日期进行比较。$gettime 是一个字符串，您将它与时间对象进行比较。

您需要通过调用 $gettime = strtotime($gettime) 将 $gettime 转换为时间对象，然后您可以像上面一样使用 > 或 < 进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T04:40:16.393

假设您以`date`格式（而不是 a `string`）从数据库接收时间：

改变：

```
if($gettime >= strtotime($startdate1) && $gettime <= strtotime($enddate1)) 
```

至：

```
if($gettime >= strtotime($startdate1) || $gettime <= strtotime($enddate1)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T04:40:46.030

确保您使用正确类型的数据、带有时间戳的时间戳而不是带字符串等...

```
$gettime= strtotime("22:00"); // getting this from database

$startdate = strtotime("21:00");
//$startdate1 = date("H:i", $startdate);

$enddate = strtotime("23:00");
//$enddate1 = date("H:i", $enddate);

//this condition i need to run    

if($gettime >= $startdate && $gettime <= $enddate)
{
echo"ok working";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T04:44:37.487

`DateTime::diff`您可以在他们的网站[http://php.net/manual/en/datetime.diff.php](http://php.net/manual/en/datetime.diff.php)上参考有关函数的 PHP 文档

您也可以通过这个 stackoverflow 问题**[如何使用 PHP 计算两个日期之间的差异？](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T04:39:02.913

为了比较时间，您应该使用提供的 PHP 类 DateTime::diff 将返回一个带有时差信息的对象： [http ://www.php.net/manual/en/datetime.diff.php](http://www.php.net/manual/en/datetime.diff.php)

# php - Jquery LayerSlider，下面的空间问题

> ID：12233439
> 
> 赞同：0
> 
> 时间：2012-09-02T04:35:08.470
> 
> 标签：php, jquery, html

我在我的网站 dtraffic.biz 中使用 LayerSlider - The Parallax Effect Slider，但我遇到了问题。我不得不删除许多 page.css 行，以便徽标保留在其位置，现在一切似乎都很好，但我想减少 de LayerSlider 和下一部分之间留下的空间（那个说：成员和广告商）。

有什么建议吗？

注意：我的网站是用php设计的，它有一个在主页上分布设计的两个文件，layout_header.php和layout_footer.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T04:40:12.597

在您的 CSS 中添加以下内容

> .dim { 边距底部：-40px; }

这将调整包含滑块的暗 div 下方的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T04:42:03.210

`margin-top`尝试`<div class="bc-w2">`在你的 CSS 中给一个 -ve （否定）

# ruby-on-rails - 奇怪的 Rails 资源路由行为

> ID：12233450
> 
> 赞同：3
> 
> 时间：2012-09-02T04:39:11.013
> 
> 标签：ruby-on-rails, rails-routing

我遇到了奇怪的错误。我不确定这是错误。但是我以前从未遇到过这种奇怪的行为。

```
resource :watches 
```

制作了这样奇怪的路由表：

```
 watches POST   /watches(.:format)                         watches#create
    new_watches GET    /watches/new(.:format)                     watches#new
   edit_watches GET    /watches/edit(.:format)                    watches#edit
                GET    /watches(.:format)                         watches#show
                PUT    /watches(.:format)                         watches#update
                DELETE /watches(.:format)                         watches#destroy 
```

如您所见**，没有 ID 参数和混乱的操作**

同时：

```
resources :mibs 
```

制定正确的路线

```
 mibs GET    /mibs(.:format)                            mibs#index
                POST   /mibs(.:format)                            mibs#create
        new_mib GET    /mibs/new(.:format)                        mibs#new
       edit_mib GET    /mibs/:id/edit(.:format)                   mibs#edit
            mib GET    /mibs/:id(.:format)                        mibs#show
                PUT    /mibs/:id(.:format)                        mibs#update
                DELETE /mibs/:id(.:format)                        mibs#destroy 
```

我认为这可能是某种变形器问题，但尝试使用“火箭”而不是“手表”会得到相同的结果：

```
 rockets POST   /rockets(.:format)                         rockets#create
    new_rockets GET    /rockets/new(.:format)                     rockets#new
   edit_rockets GET    /rockets/edit(.:format)                    rockets#edit
                GET    /rockets(.:format)                         rockets#show
                PUT    /rockets(.:format)                         rockets#update
                DELETE /rockets(.:format)                         rockets#destroy 
```

除了我的前两个资源（服务器和 mibs）之外的任何东西都会产生这样的结果。

可能在某处损坏了路由缓存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T04:44:36.647

`resource`表示单例资源：换句话说，您告诉 Rails 每个用户只有一个手表，因此传递 ID 将毫无用处。

`resources`是获取附加了 ID 的路由的标准调用。

因此，从本质上讲，问题是一个变形器，但对于`resource`or `resources`，而不是您的路线名称。有关更多信息，请查看[Ruby on Rails 路由指南](http://guides.rubyonrails.org/routing.html)。它很好地解释了单例资源和更常见的资源之间的区别。

# mod-rewrite - 多个参数的Mod重写规则

> ID：12233451
> 
> 赞同：2
> 
> 时间：2012-09-02T04:39:33.253
> 
> 标签：mod-rewrite

我有和网址

```
homepage/profile.php?id=15&username=dinesh.kumar 
```

现在我想生成这样的 URL ...

```
homepage/dinesh.kumar 
```

想要永久重定向。有人可以帮我吗...这可能很简单，但我对此的了解为零。

先感谢您..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T04:51:20.030

这可以使用[mod_rewrite](http://www.sitepoint.com/guide-url-rewriting/)

您的规则将类似于：

```
RewriteRule /homepage/(.*)/(.*)$ /homepage/profile.php?id=$1&username=$2 
```

# php - PHP If then 和 switch 语句不起作用

> ID：12233463
> 
> 赞同：1
> 
> 时间：2012-09-02T04:40:55.513
> 
> 标签：php, mysql, zend-framework

好的，首先，这是一个非常特殊的问题。我在 PHP 上工作了很长时间，我不知道为什么会这样。

我有一个功能 adminUpdate。此函数将返回 true。我将它设置为始终返回 true 以进行测试。

然后我有函数得到这个结果。

```
static function result2JSON($result,$options = array()) {

        if($result == "permission") {
            echo "permission";
        }

        if($result == true) {
            echo "true";
        }

        switch ($result) {
            case 'permission':
                die($result."xxx permission");
                $json = self::setJSON("Permission");
                break;
            case 'exist':
                $json = self::setJSON("Exist");
                break;
            case false:
                $json = self::setJSON("Error");
                break;
            case "":
                $json = self::setJSON("Error");
                break;
            case 1 :
                $json = self::setJSON("OK");
                break;
            case true:
                $json = self::setJSON("OK");
                break;
            default:
                $json = self::setJSON("OK");
                break;
        }

        $json = array_merge($json,$options);

        return $json;

    } 
```

这些“Echo”用于测试这种情况。因此，$result 在被此函数采用之前总是 = true。

但这是我得到的输出：

```
permissiontrueResult = 1 IN permission section 
```

这意味着 $result = Permission ，然后 == true，然后 == "permission" on switch。这是为什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T04:48:31.330

您可能想要使用身份检查 === 而不是平等检查。

在 php 中，非空字符串被解释为 true。

```
$result = "permission";
if($result)
     echo 'String interpreted as true'; 
```

看看 php.net 上的布尔页面（短）[http://php.net/manual/en/language.types.boolean.php](http://php.net/manual/en/language.types.boolean.php) 和 PHP 比较运算符页面... [http://www.php.net /manual/en/language.operators.comparison.php](http://www.php.net/manual/en/language.operators.comparison.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T04:47:02.027

如果您尝试将它们视为布尔值，则其中包含内容的字符串评估为真。（好吧，字符串“0”的计算结果为 False。php 很奇怪。）

因此，如果您想查看变量是否真的为真，您必须使用同时检查类型的比较：

```
if ($result === "permission") { ... }

if ($result === True) { ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T04:47:11.170

你应该`==`用`===`

# java - Eclipse 如何对短语/正则表达式的命中执行如此快速的搜索

> ID：12233466
> 
> 赞同：8
> 
> 时间：2012-09-02T04:42:16.253
> 
> 标签：java, regex, eclipse, search

Eclipse 在一个大型项目中搜索与某个短语（甚至是正则表达式短语）的所有匹配项的速度非常快。

他们在`java.util.regex`内部使用吗？
我假设他们没有使用搜索引擎进行索引，因为他们的搜索速度太慢了，但是在启动 eclipse 后第一次进行搜索时会有一些延迟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T16:33:14.290

> Eclipse Helios (3.6) 包括 Eclipse PDT 的改进版本，标记为 2.2。它也包含在当前的 Zend Studio（7.1 及更高版本）中。在其他增强功能中，它显着提高了与代码查找相关的任务的性能，例如搜索引用、创建类型层次结构甚至代码完成。这是由于受 nWire 启发的一种新设计，它使用 h2 数据库引擎作为该数据的持久存储。
> 
> h2 数据库是一种高性能、低配置、Java 原生数据库引擎，它是作为广泛使用的 HSQLDB 的继承者而创建的。它是开源的并且可以免费使用。nWire 从早期就使用 h2。
> 
> 资料来源：[http ://www.nwiresoftware.com/blogs/nwire/2010/09/five-tips-speeding-eclipse-pdt-and-nwire](http://www.nwiresoftware.com/blogs/nwire/2010/09/five-tips-speeding-eclipse-pdt-and-nwire)

简而言之，您似乎看到了这些改进，因为 Eclipse 使用了[h2](/questions/tagged/h2 "显示标记为“h2”的问题")数据库引擎。

然后，如果你再深入一点，这里有一个[H2 源代码的快速采样](https://code.google.com/p/h2database/source/browse/trunk/h2/src/tools/org/h2/jaqu/util/GenerateModels.java?r=4516)；看起来他们确实在利用`java.util.regex`：

```
20 import java.util.regex.Matcher;
21 import java.util.regex.Pattern; 
```

# google-app-engine - AppEngine Python - 如何处理缓存的对象值

> ID：12233469
> 
> 赞同：0
> 
> 时间：2012-09-02T04:43:32.800
> 
> 标签：google-app-engine, python-2.7

新手问题。

所以我有这个处理程序用于附加一些 CSS/JS 文件的页面。问题是后续请求将导致一次又一次地附加值。

例子：

```
def action_index(self):
    self.template = 'index.html'

    extra_styles = ['/media/css/jquery.lightbox-0.5.css']
    extra_scripts = ['/media/js/jquery.lightbox-0.5.min.js', '/media/js/project.js']

    for style in extra_styles:
        self.styles.append(style)

    for script in extra_scripts:
        self.scripts.append(script) 
```

您通常如何在 Google AppEngine 等平台中处理此问题，因为我来自 PHP 背景，其中对象仅存在于当前请求中。

谢谢

根据要求，这是基类：

# 基本控制器

```
from google.appengine.ext.webapp import template 

import os
import config
import datetime

class BaseController(object):

    request = None
    response = None
    action = 'index'
    method = 'get'
    params = []
    template_values = {}
    template_dir = None
    template = None

    default_styles = ['/media/bootstrap/css/bootstrap.min.css', '/media/css/style.css']
    default_scripts = ['/media/js/jquery-1.6.4.min.js']

    styles = []
    scripts = []

    def __init__(self, request, response, *args, **kwargs):
        self.request = request
        self.response = response

        self.action = 'index'
        if 'action' in kwargs and kwargs['action']:
            self.action = kwargs['action']

        self.method = 'get'
        if 'method' in kwargs and kwargs['method']:
            self.method = kwargs['method']

        self.params = []
        if 'params' in kwargs and kwargs['params']:
            if isinstance(kwargs['params'], list):
                self.params = kwargs['params']

        # Initialize template related variables
        self.template_values = {}
        self.styles = list(self.default_styles)
        self.scripts = list(self.default_scripts)

    def pre_dispatch(self):
        pass

    def post_dispatch(self):
        if self.template is not None and self.template_dir is not None:
            # Populate current year
            dt = datetime.date.today()
            self.template_values['current_year'] = dt.year

            # Populate styles and scripts
            self.template_values['styles'] = self.styles
            self.template_values['scripts'] = self.scripts

            path = os.path.join(config.template_dir, self.template_dir, self.template)
            self.response.out.write(template.render(path, self.template_values))

    def run_action(self):
        action_name = 'action_' + self.action
        if hasattr(self, action_name):
            action = getattr(self, action_name)
            action()
        else:
            raise Http404Exception('Controller action not found')

    def dispatch(self):
        self.pre_dispatch()
        self.run_action()
        self.post_dispatch()

class HttpException(Exception):
    """Http Exception"""
    pass

class Http404Exception(HttpException):
    """Http 404 exception"""
    pass

class Http500Exception(HttpException):
    """Http 500 exception"""
    pass 
```

还有孩子班

```
import datetime

from dclab.lysender.controller import BaseController

class ProjectsController(BaseController):

    template_dir = 'projects'

    def action_index(self):
        self.template = 'index.html'
        self.styles.extend(['/media/css/jquery.lightbox-0.5.css'])
        self.scripts.extend([
            '/media/js/jquery.lightbox-0.5.min.js',
            '/media/js/project.js'
        ]) 
```

我的错是我通过引用将列表分配给另一个列表，而不是克隆列表。我不太清楚这种行为，这就是为什么它让我整晚都在挠头。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T21:17:14.167

您在类定义下直接声明了很多变量。这样做不会像您期望的那样定义实例成员，而是定义类变量 - 相当于 Java 等语言中的“静态”。

不要将事物声明为类变量，而是在构造函数中初始化你的值——`__init__`你的类的方法。

我还*强烈*建议使用现有的 web 框架，如 webapp2，而不是自己发明。

# image - 在 KML 中显示纵向图像而不将其旋转为横向

> ID：12233483
> 
> 赞同：0
> 
> 时间：2012-09-02T04:46:06.090
> 
> 标签：image, kml, google-earth, portrait

我正在尝试在 Google 地球的 KML 脚本中引用高度大于宽度（纵向格式）的图像；但是，图像总是以风景形式出现，或向左旋转 90 度，例如

```
<img id="id_photo" src="2012_01_21-dscf03.jpg" width="500"></img> 
```

我已经尝试了我能想到的一切。是否有图像标签来纠正这个问题，例如，`format="portrait"`？

谢谢，沃尔特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:42:21.990

这听起来像是仅 EXIF 旋转的示例。这可能是通用电气不尊重的。

某些相机等通过在 EXIF 数据中设置标志来“旋转”图像，使其正确向上。原始 JPG 本身仍然是横向格式。

一个显示（或转换）程序，应该希望注意到这个“需要旋转”标志，并旋转图像。

但谷歌地球可能不尊重它，所以你只是看到基线图像实际存储（未旋转）

建议尝试这里提到的应用程序之一：http: [//jpegclub.org/losslessapps.html](http://jpegclub.org/losslessapps.html) （许多注意他们有自动更正 - 所以应该“修复”你的 jpg 文件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-14T07:21:30.110

这已经是一个旧线程，但我偶然发现了同样的问题。并没有找到适合我情况的解决方案。最终我找到了解决方法，所以我想我会在这里分享它。

基本上解决方案是将有问题的图像旋转两次，一次向左旋转 90°，然后再旋转一次。您所拥有的是一个宽度大于高度的图像，但带有一个方向标签，告诉应用程序将其旋转 90°（但 Google 地球不会）。将其旋转两次后，它是一个切换了宽度和高度的图像，以及一个表示不旋转它的方向标签。现在任何应用程序，包括 Google 地球，都将正确显示它。

我使用*ExifTool*将我所有图像的标签写入 CSV 文件，从中创建一个包含所有要旋转的图片的列表，并使用该列表告诉*IrfanView*两次旋转它们。

# javascript - 复制 Javascript 日期选择器

> ID：12233485
> 
> 赞同：0
> 
> 时间：2012-09-02T04:46:36.043
> 
> 标签：javascript, datepicker

我想将 Javascript 日期选择器（日历）从一个应用程序复制到另一个应用程序。但我不能那样做。如果我保存原始应用程序页面（我想从中复制的网站），则日期选择器不起作用（特殊）。即使我也复制了 html 和 css 代码，但我没有得到 javascript datepicker。有什么解决办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T04:51:52.247

尝试查看页面源。下载必要的`.js`文件，`.css`文件到你的文件夹/目录。还要从页面中复制相关的 JavaScript、CSS 和 HTML。然后使用下载的文件和复制的脚本在该目录中编译另一个 html 文件。这应该有效。

# python - Python嵌套for循环

> ID：12233488
> 
> 赞同：1
> 
> 时间：2012-09-02T04:47:17.410
> 
> 标签：python

我有一个名为`!input.txt`包含多行的文件，每行是一个从 0 到 10 的随机整数。我想编写一个程序来读取文件并计算每个整数（0-10）在文件中出现的次数。例如，如果我的输入文件中有四个“0”、两个“3”和五个“7”，程序将打印出如下内容：

```
Number of occurrences of 0: 4
Number of occurrences of 1: 0
Number of occurrences of 2: 0
Number of occurrences of 3: 2
Number of occurrences of 4: 0
Number of occurrences of 5: 0
Number of occurrences of 6: 0
Number of occurrences of 7: 5
Number of occurrences of 8: 0
Number of occurrences of 9: 0
Number of occurrences of 10: 0 
```

这是我的代码：

```
mylist = [0,1,2,3,4,5,6,7,8,9,10]
countlist = []
inFile = open("!input.txt", "r")
count = 0

for digit in mylist:
    for line in inFile:
        if digit == int(line):
            count = count + 1
    countlist.append(count)
    count = 0

#Print out the result#
for i in range(11):
    print("Number of occurrences of {0}: {1}".format(i, countlist[i])) 
```

结果是这样的：

```
Number of occurrences of 0: 4
Number of occurrences of 1: 0
Number of occurrences of 2: 0
Number of occurrences of 3: 0
Number of occurrences of 4: 0
Number of occurrences of 5: 0
Number of occurrences of 6: 0
Number of occurrences of 7: 0
Number of occurrences of 8: 0
Number of occurrences of 9: 0
Number of occurrences of 10: 0 
```

我想我的嵌套 for 循环有问题，但我无法弄清楚它是什么。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T05:01:26.517

你的循环的一个问题是你只能循环`inFile` *一次*，因为它是一个打开的文件对象。在你第一次通读它之后，你就在文件的末尾，没有更多的行可以读了。所以变种

```
inFile = open("input.txt", "r").readlines()
for digit in mylist:
    count = 0
    for line in inFile:
        if digit == int(line):
            count = count + 1
    countlist.append(count) 
```

应该管用。但是，这需要将所有行读入内存，并对每个数字进行循环。更有效的是预先分配空间并执行一次：

```
mylist = [0,1,2,3,4,5,6,7,8,9,10]
countlist = [0]*len(mylist)
inFile = open("input.txt", "r")
for line in inFile:
    digit = int(line)
    countlist[digit] += 1 
```

更好的是，使用`defaultdict`or `Counter`：

```
from collections import Counter
inFile = open("input.txt", "r")
count = Counter()
for line in inFile:
    count[int(line)] += 1 
```

通向半魔法：

```
with open("input.txt") as fp:
    count = Counter(int(line) for line in fp) 
```

PS：不要忘记关闭文件对象。我懒得回去自己做，但你应该这样做。:^)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T09:12:35.607

以下应该工作。关键是使用 dict 来跟踪 number 的出现。

```
def calc(rst, x):
    rst[int(x.strip())] +=1
    return rst

with open('input.txt','r') as f:
    result = reduce(calc, f, dict(zip(range(11),[0]*11)))

for k,v in result.items(): print k,v 
```

# java - 如何循环一个try catch语句？

> ID：12233489
> 
> 赞同：5
> 
> 时间：2012-09-02T04:47:19.593
> 
> 标签：java, loops, try-catch

如何循环 try/catch 语句？我正在制作一个使用扫描仪读取文件的程序，它正在从键盘读取它。所以我想要的是如果文件不存在，程序会说“这个文件不存在，请重试。” 然后让用户输入不同的文件名。我尝试了几种不同的方法来尝试这样做，但是我所有的尝试都以程序崩溃告终。

这是我所拥有的

```
 try {
        System.out.println("Please enter the name of the file: ");
        Scanner in = new Scanner(System.in);
        File file = new File(in.next());
        Scanner scan =  new Scanner(file);
    } catch (Exception e) {
        e.printStackTrace();
        System.out.println("File does not exist please try again. ");
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-02T04:51:02.593

如果您想在失败后重试，则需要将该代码放入循环中；例如这样的：

```
boolean done = false;
while (!done) {
    try {
        ...
        done = true;
    } catch (...) {
    }
} 
```

（do-while 是一个稍微优雅的解决方案。）

`Exception`但是，在这种情况下捕捉是不好的做法。它不仅会捕获您期望发生的异常（例如`IOException`），还会捕获意外的异常，例如`NullPointerException`程序中的错误症状等。

最佳实践是捕获您期望（并且可以处理）的异常，并允许任何其他异常传播。在您的特定情况下，捕捉`FileNotFoundException`就足够了。（这就是`Scanner(File)`构造函数声明的内容。）如果您没有使用 a`Scanner`作为输入，则可能需要 catch`IOException`代替。

* * *

我必须纠正投票最多的答案中的一个严重错误。

```
do {
    ....
} while (!file.exists()); 
```

这是不正确的，因为测试文件是否存在是不够的：

*   该文件可能存在，但用户没有读取它的权限，
*   该文件可能存在但是一个目录，
*   该文件可能存在但由于硬盘错误或类似原因而无法打开
*   该文件可能会在`exists()`测试成功和随后尝试打开它之间被删除/取消链接/重命名。

注意：

1.  `File.exists()`仅测试文件系统对象是否以指定路径存在，而不是它实际上是一个文件，或者用户对其具有读取或写入权限。
2.  由于硬盘错误、网络驱动器错误等原因，无法测试 I/O 操作是否*会失败。*
3.  打开与删除/未链接/重命名竞争条件没有解决方案。虽然在正常使用中很少见，但如果有问题的文件对安全性至关重要，*则可以针对这种错误。*

正确的方法是简单地尝试打开文件，并在`IOException`它发生时捕获并处理。它更简单、更健壮，而且可能更快。对于那些会说不应将异常用于“正常流量控制”的人来说，这*不是*正常的流量控制......

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-02T04:50:51.033

不要使用 try catch 块，而是尝试`do while`循环检查文件是否存在。

```
do {

} while ( !file.exists() ); 
```

这种方法在`java.io.File`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T04:50:56.400

您可以简单地将其包装在一个循环中：

```
while(...){

    try{

    } catch(Exception e) {

    }

} 
```

但是，捕获**每个**异常并假设它是由于文件不存在可能不是解决此问题的最佳方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T04:51:36.360

尝试这样的事情：

```
**boolean success = false;

while (!success)
{**
    try {
        System.out.println("Please enter the name of the file: ");
        Scanner in = new Scanner(System.in);
        File file = new File(in.next());
        Scanner scan =  new Scanner(file);
        **success = true;**
    } catch (FileNotFoundException e) {
        e.printStackTrace();
        System.out.println("File does not exist please try again. ");
    }
**}**
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T05:07:13.020

使用 API 检查文件是否存在。

```
String filename = "";

while(!(new File(filename)).exists())
{
    if(!filename.equals("")) System.out.println("This file does not exist.");
    System.out.println("Please enter the name of the file: ");
    Scanner in = new Scanner(System.in);
    filename = new String(in.next();        
}
File file = new File(filename);
Scanner scan =  new Scanner(file); 
```

# function - Ada：用函数重命名属性？

> ID：12233494
> 
> 赞同：3
> 
> 时间：2012-09-02T04:50:08.757
> 
> 标签：function, attributes, ada

*在最近的一个问题中，我询问了该`'`操作，并了解到它用于获取某些类型的语言定义的“属性”。据我所知，没有办法为您的类型创建自己的属性。*

我遇到了这行我不明白的代码：

```
function Image(C: Ada.Containers.Count_Type) return String renames
          Ada.Containers.Count_Type'Image; 
```

这是在做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T07:59:47.790

某些属性，例如 'Read、'Write、'Input 和 'Output，可以被用户定义的子程序覆盖，如下所示：

```
procedure My_Write
   (Stream : not null access Ada.Streams.Root_Stream_Type'Class;
    Item   : in  My_Type);
for My_Type'Write Use My_Write; 
```

'图像属性不能被覆盖。您示例中的函数定义是属性的重命名，允许您像调用普通子程序一样调用该属性：

```
Image(My_Count); 
```

代替

```
Ada.Containers.Count_Type'Image(My_Count); 
```

# java - 这种圆与圆的碰撞有什么问题？

> ID：12233512
> 
> 赞同：1
> 
> 时间：2012-09-02T04:54:36.013
> 
> 标签：java, physics, collision

我有一个简单的 java 应用程序，可以测试 4 个墙壁和 10 个球中的每一个的碰撞...我已经弄清楚了墙壁，但圆到圆似乎对我不起作用。当我与程序的其余部分一起运行该部分时，我得到了 10 个非常摇晃的圆圈（它们似乎在与自己发生碰撞）并且它们根本不动。如果我把这个部分拿出来，我会得到 10 个圆，它们会平稳地移动并从 4 个墙壁上碰撞。有人可以告诉我可能导致问题的原因吗？谢谢

```
for (int j = 0; j < ballnum; ++j) {
    for (int k = 0; k < ballnum; ++k) {
        if (Math.sqrt((Math.pow(balls[j].givebackpoint().x - balls[k].givebackpoint().x, 2))
            + (Math.sqrt(Math.pow(balls[j].givebackpoint().y - balls[k].givebackpoint().y, 2)))) <= 2 * RADIUS) {
            if (balls[j].givebackangle() >= 180) {
                balls[j].setangle(balls[j].givebackangle()-180);
                                        }
            else{
                balls[j].setangle(360-balls[j].givebackangle());
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T04:56:51.637

除非我错过了它，否则您似乎不会跳过 where `j == k`。所以你是对的，他们正在与自己发生冲突。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T04:56:57.580

你正在检查每个球本身。

当 j == k 时，您需要在内部 for 循环的顶部使用这样的一行跳过运行测试：

```
if (j == k)
    continue; 
```

# ajax - ajax表单提交跨服务器

> ID：12233515
> 
> 赞同：0
> 
> 时间：2012-09-02T04:55:43.603
> 
> 标签：ajax, forms, post, get, submit

我在 Intranet 上有几台服务器。我正在从一台服务器传递数据以在另一台服务器上处理。尝试使用ajax，但我是菜鸟。

```
<script type="text/javascript" src="jquery-1.8.0.js"></script>
<script type="text/javascript">
function print(oForm){

var toggle = oForm.elements["toggle"].value;
var ticket_type_id = oForm.elements["ticket_type_id"].value;
var printer_id = oForm.elements["printer_id"].value;
var store_id = oForm.elements["store_id"].value;
var data = oForm.elements["data"].value;

var dataString = "toggle="+ toggle+ "&ticket_type_id="+ ticket_type_id+ "&printer_id="+ printer_id+ "&store_id="+ store_id+ "&data="+ data;
$.ajax(
{
type:"POST", 
url:"http://192.168.12.103/crowncontrol/backend/processes/print.php", 
data:dataString,
success: function(data){
alert("successful");
}
}
);
}
</script> 
```

上面的网址不起作用。但是，如果我制作网址：

```
"../../../backend/processes/print.php" 
```

这是相同的位置，它工作正常。另外，如果我通过 Anchor Get 发送它，它工作正常：

```
href="http://192.168.12.103/crowncontrol/backend/processes/print.php?etc" 
```

我使用 ajax 的原因是，我希望我的 print.php 脚本在没有用户注意的情况下运行。我不能使用 url:"../../../backend/processes/print.php" 的原因是因为我会将信息从一台服务器发送到我的 Intranet 上的另一台服务器。

任何帮助，将不胜感激。我花了太长时间试图让它自己工作。

在下面的答案而不是我使用的整个 ajax 代码的帮助之后：

```
$.getJSON('http://192.168.12.103/crowncontrol/backend/processes/print.php?callback=?',dataString,function(res){
    //alert('Success');
}); 
```

还：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T06:05:23.140

这是[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)的结果。出于安全原因，您不能执行正常的 AJAX 请求跨域请求（请参阅有关同源策略的链接）。

幸运的是，jQuery 包含 JSONP 请求支持，它使用脚本标记注入而不是 XMLHttpRequest。

它不是创建和使用 xhr 对象（XMLHttpRequest 就是 ajax 的完成方式），而是创建一个脚本标记，并将 src 属性设置为您的 URL。它应该工作。

尝试将您的代码更改为：

```
 $.ajax(
{
type:"POST", 
url:"http://192.168.12.103/crowncontrol/backend/processes/print.php?callback=?", 
data:dataString,
success: function(data){
alert("successful");
}
}
); 
```

（注意 ?callback=? 部分）

这是[jQuery的jsonp教程](http://www.jquery4u.com/json/jsonp-examples/)

这里有一些关于[jsonp](http://en.wikipedia.org/wiki/JSONP)的信息和一些关于[同源策略的信息](http://en.wikipedia.org/wiki/Same_origin_policy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T06:21:53.607

处理此问题的简单方法是在您的服务器中创建一个脚本文件，然后通过该服务器请求路由请求。

使用以下逻辑：

1.  不要直接向跨域发出 AJAX 请求，而是向服务器上的新脚本发出 AJAX 请求。
2.  在该脚本文件中，获取请求并进行所需的调用（到该跨域地址）。
3.  然后接收来自跨域服务器的响应并发送给客户端。
4.  从您自己的具有所需数据的服务器接收结果。

该图显示：

![在此处输入图像描述](../Images/2d6252da455bb37a6b59acf745d1ee44.png)

# android - 在标签组android中的特定活动中隐藏标题栏

> ID：12233520
> 
> 赞同：0
> 
> 时间：2012-09-02T04:57:09.923
> 
> 标签：android, titlebar

我有一个包含多个选项卡活动的选项卡主机。对于一项特定活动，我需要隐藏默认标题。这可能吗？即使我使用 requestWindowFeature(Window.FEATURE_NO_TITLE)，选项卡主机标题也会覆盖它。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T05:32:11.700

添加

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

到特定活动以删除标题栏。

# css - 两个 div - 第二个的居中和背景未显示

> ID：12233521
> 
> 赞同：0
> 
> 时间：2012-09-02T04:57:21.217
> 
> 标签：css, html

我正在尝试制作一个网页，其中包含三个具有相同背景的 div，一个在左上角（当您看起来像屏幕时），一个居中右下，一个左下角。我得到了左上角的工作并复制了相同的代码，只是改变了对齐方式。第二个只是将文本放在顶部，没有格式。这让我发疯了。

谢谢

```
 body {
   font-family:  Copperplate / Copperplate Gothic Light, sans-serif; 
  background-image: url(AAHbackground.jpg);
  background-size: cover;
}

    #welcome { 
    padding:   5px; 5px;5px; 5px;      
  padding-left:   10px;      
   margin:             10x 10x 10x 10x;
   text-align:  left;
   color: #191919;
  background-image:    url(Divbackgrounds.jpg);
  background-repeat:   no-repeat; 
  float: left;
  width: 350px;
 p style = "float: left;"
 color : #731D1D;
h1, h2 {
  color:               #FF0066;
 }

    #leed {
      padding:   5px; 5px;5px; 5px;      
  padding-right:   30px;      
   margin:   10x 10x 10x 10x;
   text-align:  center;
   color: #191919;
  background-image:    url(Divbackgrounds1.jpg);
  background-repeat:   no-repeat
  position: absolute; left: 100px; top: 100px;
  width: 350px;
   color : #731D1D;
   h1, h2 {
  color:               #FF0066;
 } 
```

这就是问题所在。它似乎正在移动文本等，但没有将背景图像附加到它上面。这是HTML代码。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
 <link type="text/css" rel="stylesheet" href="AAHStylesheet.css"/>
<title>Appalachian </title>

</head>

<body>

 <div id ="welcome">
<h1> Title </h1>

 <p>text text text</p>

</div>

<div id ="leed">
  <h1>Header/h1>

 <p>text .</p>

</div>

 </body>
</html> 
```

请帮忙 ：）

吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T05:04:09.210

你可以看看**[CSS background-position 属性](http://www.w3schools.com/cssref/pr_background-position.asp)**

# android - NFC - 我可以将 NdfMessage 传递给 iOS 吗？

> ID：12233522
> 
> 赞同：0
> 
> 时间：2012-09-02T04:57:34.133
> 
> 标签：android, ios, nfc, ndef

我正在开发一个使用 NFC 技术的 APP 将一些数据传递给另一个 android 设备

但我可以将 NdfMessage 传递给 iOS 设备吗？

如果 iOS 设备有外部 NFC 芯片

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T08:11:55.263

目前 iOS 设备上没有 NFC 芯片......可能在 iPhone5 或外部配件上

# arduino - 是否可以在板载 Arduino 上以纯文本形式存储 Arduino 草图数据？

> ID：12233523
> 
> 赞同：1
> 
> 时间：2012-09-02T04:57:39.063
> 
> 标签：arduino

我创建了这个 arduino 草图，它工作正常，发生的情况是你按住一个按钮，然后播放一个灯光图案。你可以在底部看到我的模式。每个按钮在按住时都有自己的播放模式。

所以这很好用，但我有一个问题。我对此感到不安，因为我觉得将我的模式保持在程序之外是更好的做法。我想知道，我可以将模式存储在一个也会加载到 arduino 上的文本文件中吗？无论如何将模式放入文本文件中，然后在arduino上将它们全部读取？

```
const int buttonPin[5] = {8,9,10,11,12};
const int LEDPin[5] = {2,3,4,5,6};
int timer =0;
int millisBegin=0;
boolean reset=true;
boolean run[5] = {false,false,false,false,false};
boolean buttonOn = false;

void setup(){
    Serial.begin(57600);
    pinMode(buttonPin[0], INPUT);
    pinMode(buttonPin[1], INPUT);
    pinMode(buttonPin[2], INPUT);
    pinMode(buttonPin[3], INPUT);
    pinMode(buttonPin[4], INPUT);

    pinMode(LEDPin[0], OUTPUT);
    pinMode(LEDPin[1], OUTPUT);
    pinMode(LEDPin[2], OUTPUT);
    pinMode(LEDPin[3], OUTPUT);
    pinMode(LEDPin[4], OUTPUT);
}

void loop()
{
    for (int x=0; x<6; x++)
    {
        if (digitalRead(buttonPin[x]) == HIGH)
        {
            run[x] = true;
        }
    }
    if (run[0] == true)
    {
        buttonOn = pattern1();
        if (buttonOn == false)
        {
            run[0] = false;
        }
    }

    if (run[1] == true)
    {
        buttonOn = pattern2();
        if (buttonOn == false)
        {
            run[1] = false;
        }
    }

    if (run[2] == true)
    {
        buttonOn = pattern3();
        if (buttonOn == false)
        {
            run[2] = false;
        }
    }

    if (run[3] == true)
    {
        buttonOn = pattern4();
        if (buttonOn == false)
        {
            run[3] = false;
        }
    }

    if (run[4] == true)
    {
        buttonOn = pattern5();
        if (buttonOn == false)
        {
            run[4] = false;
        }
    }
}

boolean light(int button, int pattern[][6])
{
    while (digitalRead(buttonPin[button])==LOW)
    {
        reset = true;
        for (int x=0; x<5; x++){
            digitalWrite(LEDPin[x],LOW);
        }
        buttonOn = false;
        return buttonOn;
    }

    while (digitalRead(buttonPin[button])==HIGH)
    {
      if (reset == true)
      {
          millisBegin = millis();
          reset = false;
          Serial.println("reset!");
      }
      timer = millis() - millisBegin;

      for (int x=0; x<10; x++) //Pattern amount
      {
          for (int y=0; y<5; y++) //Lights
          {
              //if else runs pattern with correct time code
              if (timer>pattern[x][5]&&timer<pattern[x+1][5])
              {
                  if (pattern[x][y]==1)
                  {
                      digitalWrite(LEDPin[y], HIGH);
                  }
                  else
                  {
                      digitalWrite(LEDPin[y], LOW);
                  }
              }
          }
      }
      Serial.println(timer);

      if (timer > pattern[10][5]){
          reset = true;
          Serial.println("Over timer!");
      }
    }
}

boolean pattern1()
{
    int pattern[11][6]  = {
        {0, 0, 0, 0, 0,   100},   //0
        {1, 1, 0, 1, 1,  1200},   //1
        {0, 0, 1, 0, 0,  2200},   //2
        {1, 1, 0, 1, 1,  3200},   //3
        {0, 0, 0, 0, 0,  4200},   //4
        {1, 1, 1, 1, 1,  5000},   //5
        {0, 0, 1, 0, 0,  6000},   //6
        {1, 0, 0, 0, 0,  7000},   //7
        {0, 1, 0, 1, 1,  8000},   //8arduin
        {0, 0, 1, 0, 1,  9000},   //9
        {0, 0, 0, 0, 0, 10000}};  //

    buttonOn = light(0,pattern);
    return buttonOn;
}

boolean pattern2()
{
    int pattern[11][6]  = {
        {1, 0, 1, 0, 0, 100},  //0
        {0, 1, 1, 0, 1, 180},  //1
        {1, 0, 0, 0, 0, 230},  //2
        {0, 1, 0, 1, 1, 340},  //3
        {1, 0, 0, 1, 0, 450},  //4
        {0, 0, 1, 1, 1, 500},  //5
        {0, 0, 1, 0, 0, 550},  //6
        {1, 0, 0, 0, 0, 600},  //7
        {0, 1, 0, 1, 1, 680},  //8
        {0, 0, 1, 0, 1, 800},  //9
        {0, 0, 0, 0, 0, 900}}; //

    buttonOn = light(1,pattern);
    return buttonOn;
  }

boolean pattern3()
{
    int pattern[11][6]  = {
        {1, 1, 1, 1, 1, 100},  //0
        {0, 0, 0, 0, 0, 180},  //1
        {1, 1, 1, 1, 1, 230},  //2
        {0, 0, 0, 0, 0, 340},  //3
        {1, 1, 1, 1, 1, 450},  //4
        {0, 0, 0, 0, 0, 500},  //5
        {1, 1, 1, 1, 1, 550},  //6
        {0, 0, 0, 0, 0, 600},  //7
        {1, 1, 1, 1, 1, 680},  //8
        {0, 0, 0, 0, 0, 800},  //9
        {0, 0, 0, 0, 0, 810}}; //

    buttonOn = light(2,pattern);
    return buttonOn;
}

boolean pattern4()
{
    int pattern[11][6]  = {
        {0, 0, 0, 0, 0,  100},  //0
        {0, 0, 0, 0, 1,  500},  //1
        {0, 0, 0, 1, 1,  800},  //2
        {0, 0, 1, 1, 1,  900},  //3
        {1, 1, 1, 1, 1, 1000},  //4
        {1, 1, 1, 1, 1, 1100},  //5
        {1, 1, 1, 1, 0, 1200},  //6
        {1, 1, 1, 0, 0, 1300},  //7
        {1, 1, 0, 0, 0, 1400},  //8
        {1, 0, 0, 0, 0, 1500},  //9
        {0, 0, 0, 0, 0, 1600}}; //

    buttonOn = light(3,pattern);
    return buttonOn;
}

boolean pattern5()
{
    int pattern[11][6]  = {
        {0, 1, 0, 1, 0,  100},  //0
        {1, 0, 1, 0, 1,  500},  //1
        {0, 1, 0, 1, 0,  800},  //2
        {1, 0, 1, 0, 1,  900},  //3
        {0, 1, 0, 1, 0, 1000},  //4
        {1, 0, 1, 0, 1, 1100},  //5
        {0, 1, 0, 1, 0, 1200},  //6
        {1, 0, 1, 0, 1, 1300},  //7
        {0, 1, 0, 1, 0, 1400},  //8
        {1, 0, 1, 0, 1, 1500},  //9
        {0, 1, 0, 1, 0, 1600}}; //

    buttonOn = light(4,pattern);
    return buttonOn;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T09:17:17.657

Arduino 板没有可以存储文件的外部存储设备。当然也有带有 SD 卡插槽的防护罩，您可以将其添加到您的设备中。然而，这将是矫枉过正。

但是 Arduino 有一个内置的 EEPROM，您可以使用 EEPROM 库读取/写入。

我的建议是：

*   扩展您的程序以通过`Serial`. 然后，您可以发明一些简单的基于文本的命令，允许您向 Arduino 发送新模式。

*   当 Arduino 接收到新模式时，它将它们存储在 EEPROM 中。

*   在正常操作模式下，Arduino 从 EEPROM 读取模式并显示它们。

通过这种方式，您可以使用您的 Arduino“独立”*并*使用任何计算机对其进行临时编程。

# java - 使用新输入更新 JList

> ID：12233525
> 
> 赞同：0
> 
> 时间：2012-09-02T04:58:05.677
> 
> 标签：java, swing, user-interface, jlist

基本上，我的项目是创建一个简单的图书馆系统，任何给定的用户一次最多可以拥有三本书。我正在使用 BreezySwing（因为我必须这样做）并使用 JList 列出当前取出的书籍。

要归还书，用户在列表中单击要归还的书，然后单击“归还”按钮。但是，我不知道如何让 JList 正常工作。

如何将新信息添加到列表中？

这是我到目前为止的代码：

```
import java.util.*;
import javax.swing.*;
import BreezySwing.*;

public class ClientGUI extends GBFrame {
    private JButton returnBook, takeOutBook;
    private JLabel title, author;
    private JTextField titleInput, authorInput;
    private int bookCount = 0;
    DefaultListModel books = new DefaultListModel();
    private JList booksOut = new JList(books);

    public ClientGUI(){
        title = addLabel("Title: ",1,1,1,1);
        author = addLabel("Author: ",2,1,1,1);
        titleInput = addTextField("",1,2,2,1);
        authorInput = addTextField("",2,2,2,1);
        returnBook = addButton("Return",3,1,1,1);
        takeOutBook = addButton("Take Out",3,2,1,1);
        booksOut = addList(4,1,2,1);
        returnBook.setEnabled(false);
        books.addElement("Book - Author");
    }

    public void buttonClicked(JButton buttonObj){
        if(buttonObj == takeOutBook){
            if(bookCount < 3){
                String titleAdd = titleInput.getText();
                String authorAdd = authorInput.getText();
                books.addElement(titleAdd + "By: " + authorAdd);
                bookCount++;

                if(bookCount == 0){
                    takeOutBook.setEnabled(true);
                    returnBook.setEnabled(false);
                } else if(bookCount == 3){
                    takeOutBook.setEnabled(false);
                    returnBook.setEnabled(true);
                } else {
                    takeOutBook.setEnabled(true);
                    returnBook.setEnabled(true);
                }
            } else if(bookCount == 3){
                JOptionPane.showMessageDialog(null, "Please return a book first", "Invalid Choice", JOptionPane.INFORMATION_MESSAGE);
            }
        } else if(buttonObj == returnBook){
            //int n = (Integer) books.getSelectedValue();
            //books.remove(n);
            bookCount--;
            if(bookCount == 0){
                takeOutBook.setEnabled(true);
                returnBook.setEnabled(false);
            } else if(bookCount == 3){
                takeOutBook.setEnabled(false);
                returnBook.setEnabled(true);
            } else {
                takeOutBook.setEnabled(true);
                returnBook.setEnabled(true);
            }
        }
    }

    public static void main(String args[]){
        ClientGUI GUI = new ClientGUI();
        GUI.setSize(300,275);
        GUI.setTitle("Library");
        GUI.setVisible(true);
     }
} 
```

基本上，我需要做的是让 JList 正常工作。剩下的我可以完成。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T05:27:10.813

这是一个“空结果”，您可能会一直使用它，直到它中断..

![可扩展列表](../Images/6769a76c9fb0a900eb40d4e54c040bc1.png)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class ExpandableList {

    public static void main(String[] args) {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                final JPanel gui = new JPanel(new BorderLayout());

                String[] listValues = {
                        "Click", "To", "Add", "New", "Values"
                };
                final DefaultListModel model = new DefaultListModel();
                for (String s : listValues) {
                    model.addElement(s);
                }
                JList list = new JList(model);
                MouseListener addListener = new MouseAdapter() {
                    @Override
                    public void mouseClicked(MouseEvent me) {
                        String s = JOptionPane.showInputDialog(
                                gui, "New text..");
                        if (s!=null) {
                            model.addElement(s);
                        }
                    }
                };
                list.addMouseListener(addListener);
                gui.add(new JScrollPane(list));

                JOptionPane.showMessageDialog(null, gui);
            }
        };
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T05:12:02.183

尝试[DefaultListModel.addElement](http://docs.oracle.com/javase/7/docs/api/javax/swing/DefaultListModel.html#addElement%28E%29)

它将触发列表的更新事件以响应

**更新**

在不知道 BreezySwing 的工作原理的情况下，我会专注于这条线......

```
booksOut = addList(4, 1, 2, 1); 
```

鉴于我认为代码中的其他行正在执行的操作，这似乎是“创建”一个新的`Jlist`并返回它（应用布局）。

这意味着所使用的模型`booksOut`不再是`books`模型。

尝试添加

```
booksOut.setModel(books); 
```

上`addList`线后看看是否有帮助

# .net - 自定义控件（组框、图片框、标签） - 鼠标输入时，内部消失

> ID：12233527
> 
> 赞同：3
> 
> 时间：2012-09-02T04:58:26.533
> 
> 标签：.net, vb.net, groupbox

对不起，这个非常混乱的标题，这是我的问题。我有一个自定义的 GroupBox，里面是一个自定义的图片框和标签。

问题是，当我在鼠标进入 GroupBox 时启动表单应用程序时，我的标签字体颜色变为黑色，并且我的图片框似乎“消失”了。我不知道为什么会这样。

组框：

```
Class GhostGroupBox
    Inherits ThemeControl154

    Sub New()
        MyBase.New()
        SetStyle(ControlStyles.ResizeRedraw, True)
        SetStyle(ControlStyles.ContainerControl, True)
        DoubleBuffered = True
        BackColor = Color.Transparent
    End Sub

    Protected Overrides Sub ColorHook()

    End Sub

    Protected Overrides Sub PaintHook()
        G.Clear(Color.FromArgb(60, 60, 60))
        Dim asdf As HatchBrush
        asdf = New HatchBrush(HatchStyle.DarkDownwardDiagonal, Color.FromArgb(35, Color.Black), Color.FromArgb(0, Color.Gray))
        G.FillRectangle(New SolidBrush(Color.FromArgb(60, 60, 60)), New Rectangle(0, 0, Width, Height))
        asdf = New HatchBrush(HatchStyle.LightDownwardDiagonal, Color.DimGray)
        G.FillRectangle(asdf, 0, 0, Width, Height)
        G.FillRectangle(New SolidBrush(Color.FromArgb(230, 20, 20, 20)), 0, 0, Width, Height)
        G.FillRectangle(New SolidBrush(Color.FromArgb(70, Color.Black)), 1, 1, Width - 2, Me.CreateGraphics.MeasureString(Text, Font).Height + 8)

        G.DrawLine(New Pen(Color.FromArgb(90, 90, 90)), 1, Me.CreateGraphics.MeasureString(Text, Font).Height + 8, Width - 2, Me.CreateGraphics.MeasureString(Text, Font).Height + 8)

        DrawBorders(Pens.Black)
        DrawBorders(New Pen(Color.FromArgb(90, 90, 90)), 1)
        G.DrawString(Text, Font, Brushes.White, 5, 5)
    End Sub
End Class 
```

标签和图片框（相同的代码，只是继承各自的）：

```
Public Class TransparentLabel
    Inherits Label

    Public Sub New()
        Me.SetStyle(ControlStyles.Opaque, True)
        Me.SetStyle(ControlStyles.OptimizedDoubleBuffer, False)
    End Sub

    Protected Overrides ReadOnly Property CreateParams() As CreateParams
        Get
            Dim parms As CreateParams = MyBase.CreateParams
            parms.ExStyle = parms.ExStyle Or &H20
            ' Turn on WS_EX_TRANSPARENT
            Return parms
        End Get
    End Property

End Class 
```

有人能看出有什么问题吗？我尝试将 ControlBox 的 OnMouseMove 注释掉，但没有解决。我也没有为 ControlBox 设置任何事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T15:25:42.673

没有工作代码很难说，我有两个建议：

1.  换上so`Invalidate`的孩子们也神清气爽`OnMouseMove`。子控件可能不会收到绘制消息。`Invalidate(True)``GroupBox`

2.  对于透明控件，您应该使用`SetStyle(ControlStyles.SupportsTransparentBackColor Or ControlStyles.UserPaint, True)`In`OnHandleCreated`而不是设置`ExStyle`in `CreateParams`。Plus`&H20`表示`WS_EX_TRANSPARENT`在构造函数中将控件设置为不透明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T00:42:51.680

我有另一个建议——克隆你的项目并尝试在那里简化你的代码，直到它仍然存在问题，但足够通用，你可以在这里发布它。此外，您没有描述所有自定义控件应该做什么。除此之外，您是否尝试过以下方法来减少闪烁？

```
SendMessage(Me.Handle, WM_SETREDRAW, False, 0) ' Turn OFF UI updates 
```

和

```
SendMessage(Me.Handle, WM_SETREDRAW, True, 0) ' Turn ON UI updates 
```

我将它用于我的项目中的自定义下拉控件，并且效果很好。

`DoubleBuffered`根据我的经验，没用。

为了`SendMessage`可用，您需要从以下位置导入它`user32`：

```
Private Const WM_SETREDRAW As Integer = &HB
Private Declare Function SendMessage Lib "user32" Alias "SendMessageA" (ByVal handle As IntPtr, ByVal wMsg As Integer, ByVal wParam As Integer, ByVal lParam As Integer) As Integer 
```

您将在内部进行任何处理（第一行）之前关闭 UI 更新`PaintHook`，并在所有处理完成后重新打开它。还需要调用`Me.Refresh()`after `SendMessage(...True...)`，否则您将根本得不到更新。

# javascript - 有什么办法可以在下一个元素上追加？

> ID：12233528
> 
> 赞同：1
> 
> 时间：2012-09-02T04:58:31.527
> 
> 标签：javascript, jquery

就像，我们有`<div id='target'></div><div id='footer'></div>`

我只想追加`<div id='target'></div>`，结果会像

```
<div id='target'></div><div id='target'></div><div id='footer'></div> 
```

append 只是在元素内附加一些东西，有什么 Jquery 方法我可以做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T05:02:28.793

尝试这个：

```
$("div#target").after($("div#target").clone()); 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T05:05:00.630

```
$('<div />').after($('#target')) 
```

ID 必须是唯一的，否则以后你的选择器会遇到很多问题。上面的解决方案将创建一个新`div`元素并将其附加在您的`#target`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-02T05:00:31.923

```
jQuery('<div />').after('div#targetdiv') 
```

# javascript - 使用 jQuery 搜索和替换整个 HTML 字符串

> ID：12233529
> 
> 赞同：0
> 
> 时间：2012-09-02T04:58:40.420
> 
> 标签：javascript, jquery

我在搜索和替换整个 HTML 字符串时遇到了一些麻烦。

我在这个小提琴中的例子是我试图用它的所有类和标记替换整个 div 标签。

HTML：

```
<ul class="slides">
      <li><div class="flex-caption"><strong>Climb to the Top of Your Potential</strong>&nbsp;</div></li>
      <li><div class="flex-caption"><strong>Reach for the Clouds with Simple Solutions</strong>&nbsp;</div></li>
      <li><div class="flex-caption"><strong>Obtain the Courage to Suceed as a Leader, Team, & Company</strong>&nbsp;</div></li>
</ul> 
```

JavaScript：

```
// This works perfect to search & replace text strings, but not for searching HTML:

jQuery(document).ready(function(){
function makeLink () {
jQuery(".flex-caption").html(function(i, str) {
return str.replace("Climb to the Top of Your Potential", "<div class='caption-align'>Climb to the Top of <a href='http://google.com'>Your Potential</a></div>");
});
}makeLink();
});

// Issue #1: This is my failed attempt to search & replace a large portion of the string:

jQuery(document).ready(function(){
function changeString () {
jQuery(".flex-caption").html(function(i, str) {
return str.replace("<div class='flex-caption'><strong>Reach for the Clouds with Simple Solutions</strong></div>", "<div class='flex-caption'><strong><div class='caption-align caption-right'>REPLACED TEXT! Reach for the Clouds with Simple Solutions</div></strong>&nbsp;</div>");
});
}changeString();
});

// Issue #2: I don't know why the character "&" is break this, so I tried \u0026 & both CDATA with no avail:

jQuery(document).ready(function(){
function changeString2 () {
jQuery(".flex-caption").html(function(i, str) {
return str.replace("<strong>Obtain the Courage to Suceed as a Leader, Team, \u0026 Company", "<i>Obtain the Courage to Suceed as a Leader, Team, \u0026 Company");
});
}changeString2();
}); 
```

[http://jsfiddle.net/LqkNE/](http://jsfiddle.net/LqkNE/)

如您所见，有两个小问题 - 一个带有 & 符号的问题也给我带来了问题。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T05:09:16.040

这是一个工作版本：http: [//jsfiddle.net/Regisc/jeVjn/](http://jsfiddle.net/Regisc/jeVjn/)

如上所述，`&`需要编码，对于第一个问题，您可以只替换强部分，因为其余部分不会改变

编辑：

```
// Issue #1: This is my failed attempt to search & replace a large portion of the string:

jQuery(document).ready(function () {
  function changeString() {
    jQuery(".flex-caption").parent().html(function (i, str) {
      return str.replace(
        '<div class="flex-caption"><strong>Reach for the Clouds with Simple Solutions</strong>&nbsp;</div>', 
        "<div class='flex-caption flex-align'><strong><div class='caption-align caption-right'>REPLACED TEXT! Reach for the Clouds with Simple Solutions</div></strong>&nbsp;</div>"
      );
    });
  }

  changeString();
}); 
```

[http://jsfiddle.net/jeVjn/1/](http://jsfiddle.net/jeVjn/1/)

注意`parent()`, 简单的引号和`&nbsp;`这不起作用，因为`.flex-caption`html`<strong>...`不是`<div class=".flex-caption">...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T05:04:06.937

`&`需要编码为`&amp;`

所以html应该是：

```
 <li><div class="flex-caption"><strong>Obtain the Courage to Suceed as a Leader, Team, &amp; Company</strong>&nbsp;</div></li> 
```

和 JavaScript：

```
jQuery(document).ready(function(){
  function changeString2 () {
    jQuery(".flex-caption").html(function(i, str) {
      return str.replace("<strong>Obtain the Courage to Suceed as a Leader, Team, &amp; Company", "<i>Obtain the Courage to Suceed as a Leader, Team, &amp; Company");
    });
  }
  changeString2();
}); 
```

# javascript - 谷歌可视化addListener调用函数引用错误

> ID：12233532
> 
> 赞同：0
> 
> 时间：2012-09-02T04:59:16.167
> 
> 标签：javascript, google-visualization, dom-events

我正在尝试处理图表的选择事件，我想知道选择了哪一行/列，但是调用的函数出现错误：

> 未捕获的参考错误：未定义图表。

[该代码与饼图](http://code.google.com/apis/ajax/playground/?type=visualization#pie_chart)示例和[选择事件处理程序](http://code.google.com/apis/ajax/playground/?type=visualization#select_event)中的代码非常相似。我希望我需要让图表对象在全球范围内广为人知，但不知道该怎么做。

```
<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Task', 'Hours per Day'],
          ['Work',     11],
          ['Eat',      2],
          ['Sleep',    12]
        ]);
        var options = { title: 'My Daily Activities' };

        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
        google.visualization.events.addListener(chart, 'select', selectHandler);
      }
      function selectHandler() {
          var selection = visualization.getSelection();
          alert("it");
      }

    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T13:14:41.137

你有没有解决过这个问题？如果不 ...

```
google.load("visualization", "1", {packages:["corechart"]});
google.setOnLoadCallback(drawChart);

//declare your variables in the global scope
var chart, data;

function drawChart() {
    data = google.visualization.arrayToDataTable([
        ['Task', 'Hours per Day'],
        ['Work',     11],
        ['Eat',      2],
        ['Sleep',    12]
    ]);
    var options = { title: 'My Daily Activities' };

    chart = new google.visualization.PieChart(document.getElementById('chart_div'));
    chart.draw(data, options);
    google.visualization.events.addListener(chart, 'select', selectHandler);
}

function selectHandler() {
    //"visualization.getSelection();" dos not exist
    //access the global variable chart and its current selection
    var selection = chart.getSelection();
    alert(data.getValue(selection[0].row, 1));
} 
```

...警报 11、2 或 12。

见小提琴-> **[http://jsfiddle.net/7e6Va/](http://jsfiddle.net/7e6Va/)**

# java - JFrame全屏对焦。

> ID：12233533
> 
> 赞同：0
> 
> 时间：2012-09-02T04:59:32.213
> 
> 标签：java, swing, focus, jframe, fullscreen

这就是我将 JFrame 设置为全屏模式的方式：

```
//set full screen            

frame.dispose();
frame.setUndecorated(true);
screenDevice.setFullScreenWindow(frame);
frame.setVisible(true);

//reset to window mode

frame.dispose();
screenDevice.setFullScreenWindow(null);
frame.setUndecorated(false);
frame.setVisible(true); 
```

但是，当我显示任何对话框时，例如设置对话框，对话框和全屏框架都失去了焦点并在屏幕上消失。然后我需要点击任务栏图标来获得焦点。

如何解决这个问题？谢谢你。

编辑：

假设如果在这个全屏窗口的菜单栏中有一个 JMenuItem，那么我通过单击这样的 menuitem 使设置 JDialog 可见：

```
settingsMenuItem.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        settingsDialog.showSettingsDialog();
    }
}); 
```

在全屏模式下，设置对话框和全屏未显示在屏幕上。在窗口模式下它可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T05:03:17.170

如果你想设置你`JFrame`为什么`maximized`不使用这个：

```
frame.setExtendedState(Frame.MAXIMIZED_BOTH); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T15:00:07.867

```
JFrame frame = new JFrame();   
GraphicsDevice window = GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenDevices()[0]; 

//The number in the brackets decides what monitor the window gets "full-screened" to. 0 is the first, 1 is the second, ect.         
frame.setUndecorated(true);    
window.setFullScreenWindow(frame);    
frame.setVisible(true);    
frame.requestFocus(); 
```

# python - 将 PolyModel 与 NDB 相结合

> ID：12233535
> 
> 赞同：0
> 
> 时间：2012-09-02T05:00:23.617
> 
> 标签：python, performance, google-app-engine, app-engine-ndb

我正在尝试将 polymodel 类与 NBD 类结合起来。鉴于以下问题，任何有助于澄清“最佳”方法的帮助都会很好。

我有一个水果的多模型（`Fruit -> Tree-Bearing -> Apples -> Granny Smith`- 作为多模型层次结构的示例），我想将它存储在一个名为 Diet 的 ndb.Model 中。所以很明显我有一个水果类别，一个蔬菜类别等。这应该如何构建？

到目前为止，我有：

```
class Diet(ndb.Model):
    nameOfDiet = ndb.StringProperty()
    fruit = ndb.StructuredProperty(Fruit)
    vegetable = ndb.StructuredProperty(Vegetable) 
```

这个问题 - 我认为我没有看错，饮食中的水果和蔬菜对象是“不可查询的”。我显然希望用户能够搜索与其特定水果相匹配的饮食。我还想利用 ndb 的缓存功能。我怎样才能有效地查询水果，这样如果我想要所有史密斯奶奶的饮食，我就可以得到它，而不会返回任何值为 none 的东西。另外，有没有可能用 NDB 做多边形模型？如果不是，我将如何将水果的结构更改为 A) 匹配我想要的并且 B) 至少在名义上有效？

非常感谢！乔恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T09:14:32.260

我认为您不需要在这种情况下使用 polymodel。您可以使用水果的列表属性，其中包含水果的层次结构。

```
class Diet(ndb.Model):
    name = ndb.StringProperty()
    fruit = ndb.StringProperty(repeated=True)
    vegetable = ndb.StringProperty(repeated=True) 
```

Fruit 属性可以包含 ['Tree-Bearing', 'Apples', 'Granny Smith', 'Tree-Bearing', 'Apples', 'Golden Delicious', 'Tree-Bearing', 'Oranges']。然后，如果您想找到带有“苹果”的饮食，您可以执行以下操作：

```
results = Diet.query(Diet.fruit == 'Apples').fetch(20) 
```

或者，如果您想查找包含“Apples”和“Oranges”的饮食，您可以使用 IN 查询。

```
results = Diet.query(Diet.fruit.IN(['Apples', 'Oranges']) 
```

如果您需要有关每种水果的更多详细信息，例如：糖含量、季节等，您可以为水果创建一个模型，其中 key_name 是水果的名称（以便快速获取有关水果）。如果需要，水果模型可以包含父母的层次结构。

```
class Fruit(ndb.Model):
    name = ndb.StringProperty()
    sugar_content = ndb.FloatProperty() 
```

因此，要获取有关“Golden Delicious”的详细信息，您将构建密钥并获取数据。可以使用 Map 函数异步获取数据。按键获取也会为您缓存数据，因此后续获取直接来自内存缓存。

```
gd =ndb.Key("Fruit", "Golden Delicious").get() 
```

**另一种选择：**将 Fruit 对象存储为结构化属性（如您当前所做的那样），但重复结构化属性。

```
class Diet(ndb.Model):
    name = ndb.StringProperty()
    fruit = ndb.StructuredProperty(Fruit, repeated=True) 
```

可以以类似的方式对饮食模型中的结构化属性进行查询：

```
results = Diet.query(Diet.fruit.name == 'Orange') 
```

最后，ndb 可以使用多模型，请参阅：[https ://developers.google.com/appengine/docs/python/ndb/polymodelclass](https://developers.google.com/appengine/docs/python/ndb/polymodelclass)

有关异步获取数据的一些信息，请参阅：[https ://developers.google.com/appengine/docs/python/ndb/async](https://developers.google.com/appengine/docs/python/ndb/async)

# c# - C# winfom htmleditor - 所见即所得

> ID：12233538
> 
> 赞同：8
> 
> 时间：2012-09-02T05:00:34.177
> 
> 标签：c#, winforms, wysiwyg

我需要一个所见即所得的 html 编辑器，如[**ckeditor**](http://ckeditor.com/demo)或[niceedit](http://nicedit.com/demos.php)用于**C# winform applications**。这样用户就可以编辑html然后我将它插入数据库。

C# winform 应用程序是否有所见即所得？tnx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-18T21:42:40.950

Netrix 组件是最复杂的 WinForm HTML 编辑控件，现在可以在 Github 上作为非商业用途的**开源使用。**这包括所有可用的插件，例如拼写检查器、表格设计器等。

[https://github.com/joergkrause/netrix](https://github.com/joergkrause/netrix)

该项目是一个十多年的商业项目，同时它成熟、稳定、功能齐全。但是，WinForm 世界的吸引力正在放缓，我们认为如果我们将其公开，它将延长项目的生命。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T05:05:53.907

只需将上述编辑器之一放在[`WebBrowser`](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)控件中即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-13T08:20:17.140

您可以尝试 SpiceLogic 中的 .NET WinForms HTML 编辑器控件。它易于使用，开箱即用，具有许多功能和可扩展性的商业组件运动。

[https://www.spicelogic.com/Products/NET-WinForms-HTML-Editor-Control-8](https://www.spicelogic.com/Products/NET-WinForms-HTML-Editor-Control-8)

![SpiceLogic .NET WinForms HTML 编辑器控件](../Images/2714419c7b0a75c5d3dd25532e371f66.png)

# php - PHP shell_exec 不工作

> ID：12233540
> 
> 赞同：1
> 
> 时间：2012-09-02T05:00:45.313
> 
> 标签：php, shell, sweave

我试图在我的 MacOSX 上运行一个 shell 脚本，但它不起作用。我的 report.sh 文件调用存储在 /usr/local/bin 中的另一个 .sh 文件 (Sweave.sh)。

```
<?php

shell_exec("./report.sh");
echo "Hello 123";

?> 
```

它在我的浏览器上打印“Hello 123”，但 report.sh 没有完成它的工作。为什么会这样？这是report.sh：

```
# !/bin/bash
Sweave.sh -ld test_sweave.Rnw 
```

如果如果从终端调用 ./report.sh ，它可以正常工作...感谢您的帮助！

编辑：如果我从终端调用 ./report.php ，它会说：

```
./report.php: line 2: ?php: No such file or directory
./report.php: line 4: syntax error near unexpected token `"./report.sh"'
./report.php: line 4: `shell_exec("./report.sh");' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T05:22:56.637

如果你想通过命令行运行你的脚本，你必须：

a) 用这一行开始文件

```
#!/path/to/php 
```

b) 运行为：

```
php report.php 
```

如果这可行，则可能是由于权限问题，因为您的 Web 服务器在与您不同的用户下运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T06:35:55.367

感谢大家的意见，这是一个*权限*问题。我通过更改服务器的“文档”文件夹的权限来解决它（我确定这不是最安全的方法，但我只是在测试）。

只需添加 rw 访问权限，成为所有者并应用于随附的项目 - 就是这样！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T11:19:56.543

`php -q report.php`将在没有 shebang ( `#!/path/to/php`)的情况下工作

# android - Android自定义LinearLayout和膨胀xml

> ID：12233550
> 
> 赞同：3
> 
> 时间：2012-09-02T05:02:54.987
> 
> 标签：android, android-linearlayout, android-custom-view, layout-inflater

我有一个`xml`布局，当膨胀成一个`View`对象时，布局按预期显示。但是，我创建了一个自定义`LinearLayout`类，并`xml`在创建该类的实例时使用

```
LayoutInflater.from(context).inflate(R.layout.icon_item, this, true); 
```

在构造函数中。我没有`LayoutParams`在自定义`LinearLayout`类上设置任何内容，当我尝试显示自定义类时，似乎放置了一些奇怪的边距，切断了内部布局中的一些文本。

我想知道是否有任何方法可以设置自定义`LinearLayout`，因此它对布局 xml 没有影响，而只是充当一个不可见的容器。我认为在充气时将“attachToRoot”设置为 true 可以解决这个问题，但没有按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:05:35.280

当使用`inflate(..)`attachToRoot = true 时，这相当于将 XML 物理放置在 ViewGroup 中，如下所示：

```
<LinearLayout ..>
  <TextView .. />
</LinearLayout> 
```

也意味着当它被`measure`'d 和布局时，`LinearLayout`它将继承您正在膨胀的 xml 布局中强加的任何布局属性。

因此，如果您`<TextView..>`包含`android:layout_margin="8dp"`或`padding`例如，您`CustomLinearLayout`还将使用这些`Layout`属性来布局视图。

如果您希望我为您修复/创建更好的解决方案，我会发布更多代码。

# ruby-on-rails - ROR DB 协会 - 缺少什么？

> ID：12233553
> 
> 赞同：2
> 
> 时间：2012-09-02T05:03:17.453
> 
> 标签：ruby-on-rails, ruby

我按照“railstutorial.org”示例创建属于“Tickets”的“Logs”。IE。1“票”有许多“日志”。我可以在 CONSOLE 添加“票证”。但是，当我尝试添加“日志”时，我收到错误消息“票证不能为空白”。（请看下面的附图）我想知道你能否给我一些建议/指点？先感谢您。2012-09-03 更新：我添加了模型的图片。非常感谢。 ![图像3](../Images/170a8ad392bc4f90446b5a4dbf9f700b.png) ![图像1](../Images/9ef27b5a06cc8a3e8251b7a9df6be5f1.png) ![img2](../Images/ad900ec57be2a485be6aefee2feb02bc.png) ![模型](../Images/c0e3339ac6c04cc36e621c85b7b4751d.png)

2012-09-05 更新：更新模型以使用整数作为 ticket_id ![20120905](../Images/baa8b6cb5c27aba0102841370db52869.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T06:10:25.797

当您执行 Ticket.new 或 Ticket.first 时，检查正在显示的属性。根据此处显示的代码，对于 Ticket 模型，您创建了一个列 ticket_id，rails 负责 id 的生成，这个属性可以考虑 -

> 约定优于配置

生成的 id 将作为主键，可用于从 Logs 引用 Ticket。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T05:02:34.390

找到了根本原因。这是因为 ":ticket_id" 没有添加到 "log.rb" 中的 "attr_accessible" 中，在 "log.rb" 中将 ":ticket_id" 添加到 "attr_accessible" 后问题就消失了。（请看下图）。

还在下面的链接中了解了“attr_accessible”。 [http://madkingsmusings.blogspot.tw/2011/04/attraccessible-and-security-in-rails.html](http://madkingsmusings.blogspot.tw/2011/04/attraccessible-and-security-in-rails.html) ![1](../Images/0cf8a827db422a3db5ae6145c9210721.png) ![2](../Images/1c9334181bfbed98979192d71b78e6fd.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T06:17:46.733

第一个变化：

更改您的迁移并将外键设为整数。使用`t.integer :ticket_id`使外键命名明显而明确。

```
t.integer :ticket_id 
```

第二：现在尝试保存值

```
obj = Ticket.first
Log.create!(:ticket_id => obj.id) 
```

# mysql - 在Mysql中使用Union在列底部显示列总和

> ID：12233554
> 
> 赞同：0
> 
> 时间：2012-09-02T05:03:28.280
> 
> 标签：mysql

我有一个问题，我想使用`UNION`以下查询在列底部显示最后三列的总和：

```
select a.app_file_id, a.app_fname,a.app_lname, l.tertiary_interest,l.loan_life,l.commit_date,
max(case  when date(r.receipt_date)<='2012-4-01' and r.receipt_date = (select max(r.receipt_date) from receipt_history r where date(r.receipt_date)<='2012-4-01' ) then amount_owed else 0 end),
sum(case when r.receipt_on='Principal' and r.receipt_date >= STR_TO_DATE(CONCAT(2012, '-04-01'),'%Y-%m-%d') and r.receipt_date <=  STR_TO_DATE(CONCAT(2012, '-03-31'), '%Y-%m-%d') + interval 1 year then r.receipt_amount end), 
max(case  when r.receipt_date<=STR_TO_DATE(concat(2013,'-4-01'),'%Y-%m-%d') and r.receipt_date = (select max(r.receipt_date) from receipt_history r where r.receipt_date<=STR_TO_DATE(concat(2013,'-4-01'),'%Y-%m-%d')) then amount_owed else 0 end) 
from applicant a 
left join loan l on l.l_app_file_id=a.app_file_id 
left join receipt_history r on r.r_app_file_id=a.app_file_id 
group by l.loan_id
union
select '', '','','','','',sum(max_pay_april_G),sum(fiscal_Prin_G),sum(final_bal )
from(
a.app_file_id, a.app_fname,a.app_lname, l.tertiary_interest,l.loan_life,l.commit_date,
max(case  when date(r.receipt_date)<='2012-4-01' and r.receipt_date = (select max(r.receipt_date) from receipt_history r where date(r.receipt_date)<='2012-4-01' ) then amount_owed else 0 end) as max_pay_april_G,
sum(case when r.receipt_on='Principal' and r.receipt_date >= STR_TO_DATE(CONCAT(2012, '-04-01'),'%Y-%m-%d') and r.receipt_date <=  STR_TO_DATE(CONCAT(2012, '-03-31'), '%Y-%m-%d') + interval 1 year then r.receipt_amount end) as fiscal_Prin_G, 
max(case  when r.receipt_date<=STR_TO_DATE(concat(2013,'-4-01'),'%Y-%m-%d') and r.receipt_date = (select max(r.receipt_date) from receipt_history r where r.receipt_date<=STR_TO_DATE(concat(2013,'-4-01'),'%Y-%m-%d')) then amount_owed else 0 end) as final_bal
from applicant a 
left join loan l on l.l_app_file_id=a.app_file_id 
left join receipt_history r on r.r_app_file_id=a.app_file_id 
group by l.loan_id
)q; 
```

我知道这可能看起来令人困惑，因为我使用 3 个表并且列名可能会造成问题，但如果有人能帮助我分析查询并查看我出错的地方，我将非常感激一些帮助，到目前为止我收到的错误消息是引导我到第 13 行，我希望我把问题说得足够清楚以获得一些帮助。非常感谢你

# iphone - 在 iphone 中制作弹出图像

> ID：12233558
> 
> 赞同：0
> 
> 时间：2012-09-02T05:04:48.527
> 
> 标签：iphone, objective-c, cocoa-touch, ipad

我正在做一个小游戏，如果你赢了，它会显示一个图像。图像大小为全屏。我想让它成为当我`tap`在它上面时，它会删除和活动或`viewController`做一些事情并重新开始。

我有一个可以添加的想法，`TAP Gesture recognizer`但是我怎样才能`popup`在后台停止活动，然后在录制它之后做一些事情并重新启动`Controller`.

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T05:54:16.010

要“弹出”图像，您只需创建一个以图像为背景的 UIButton 并将其隐藏 -​​ 弹出您只需使其可见。

只需在按下按钮时连接到您喜欢调用的方法即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T08:54:58.867

子类 UIView 以创建 PopupView 显示您需要的内容。重写此函数：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    [self setHidden:TRUE];
    [self removeFromSuperview];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T12:52:35.930

我这里有一个取自 facebook 示例 iphone 代码的代码。它来回弹出一个带有动画的视图。

只需创建一个自定义按钮，链接它，在里面添加图像，调整框架/位置，然后隐藏它。

```
-(void) zoomInWorld{
    buttonImage.hidden = NO;
    buttonImage.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.001, 0.001);
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.2];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(bounce1AnimationStopped)];
    buttonImage.transform = CGAffineTransformScale(CGAffineTransformIdentity, 1.1, 1.1);
    [UIView commitAnimations];

}

- (void)bounce1AnimationStopped {

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.15];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(bounce2AnimationStopped)];
    buttonImage.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.9, 0.9);
    [UIView commitAnimations];
}

- (void)bounce2AnimationStopped {

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDuration:0.15];
    //[UIView setAnimationDidStopSelector:@selector(nextAction)];
    buttonImage.transform = CGAffineTransformIdentity;
    [UIView commitAnimations];
    [a addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlStateNormal];

} 
```

# regex - 在第一个冒号处拆分字符串

> ID：12233562
> 
> 赞同：6
> 
> 时间：2012-09-02T05:05:07.463
> 
> 标签：regex, r, string, gsub

我正在使用`readLines`. 第一个“列”是我不需要的复杂文本。接下来的列包含我确实需要的数据。第一个“列”和数据用冒号 (:) 分隔。我希望在第一个冒号处拆分每一行并删除生成的文本字符串，只保留数据。

下面是一个示例数据文件。一种潜在的并发症是一行数据包含多个冒号。那条线可能会在某个时候成为我的标题。所以，我可能不应该在每个冒号处拆分，只在第一个冒号处拆分。

```
my.data <- "first string of text..:  aa : bb : cc 
            next string ........  :   2    0    2
            third string......1990:   7    6    5
            last string           :   4    2    3"

my.data2 <- readLines(textConnection(my.data))
my.data2 
```

我已经尝试过这里提供的代码：

[拆分字符串中的第一个逗号](https://stackoverflow.com/questions/10309122/split-on-first-comma-in-string)

和这里：

[R：从字符串中删除最后三个点](https://stackoverflow.com/questions/11127010/r-removing-the-last-three-dots-from-a-string)

上面第一个链接的代码似乎只在第一行的第一个冒号处拆分。第二个链接上的代码可能会做我想要的，但是到目前为止我无法成功修改它太复杂了。

这是我希望获得的数据，此时我可以使用一个非常简单的`gsub`语句将第一行中剩余的冒号简单地替换为空格：

```
 aa : bb : cc 
    2    0    2
    7    6    5
    4    2    3 
```

抱歉，如果这是我没有找到的帖子的副本，并感谢您的任何建议或帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-02T05:19:17.407

以下将从字符串的开头开始，然后抓取所有内容，包括第一个冒号和任何其他空格，并将其替换为空（基本上只是删除它）

```
gsub("^[^:]+:\\s*", "", my.data2) 
```

如果你不想删除你可以做的空格

```
gsub("^[^:]+:", "", my.data2) 
```

* * *

有关原始正则表达式在做什么的一些说明。从头开始：

`^`这表示只在字符串的开头找到匹配项

`[^:]`这表示任何不是冒号的字符

`+`这表示匹配前面的字符一次或多次（因此匹配尽可能多的非冒号字符）

`:`这实际上与冒号匹配

`\\s`这匹配一个空格

`*`这表示匹配前面的字符零次或多次（因此我们删除冒号后的任何额外空格）

所以把它们放在一起，我们从字符串的开头开始，然后匹配尽可能多的非冒号字符，然后抓住第一个冒号字符和任何额外的空格，并将所有这些都替换为空（基本上删除了我们没有的所有垃圾）不想要）。

# c# - 使用匿名类型生成动态 LINQ 查询

> ID：12233563
> 
> 赞同：1
> 
> 时间：2012-09-02T05:05:24.903
> 
> 标签：c#, .net, linq, reflection

**以下是提供上下文，问题在底部**

我正在尝试使用 ASP.NET MVC 4 构建一个完全动态的 api。我的数据库由 LINQ to SQL 抽象

我的存储库类收到一个表示休息查询的数组，例如 `http://myUrl.com/countries/states/suburbs/24/street/`
变成数组
`[countries,states,suburbs,24,street]`

我希望我的存储库然后将该数组变成这样的东西（这是伪代码）：
`context.countries.select("states").select("suburbs").where("suburbs.ID == 24").select("street")`

我的想法是用数组外部的一个常量对象循环遍历数组，其中最新的对象是它。

```
object currentContextObj = null;
            object currentUrlPart = null;
            IQueryable<object> queryResult = null;

            for (int i = 0; i < urlArray.Count(); i++)
            { 
```

我使用反射来了解上下文以找出数组的第一位。

```
if (currentContextObj == null)
                {
                    if (currentUrlPart.GetType() != typeof(string))
                        throw new ArgumentException("URL part '" + currentUrlPart + "' is invalid");

                    currentContextObj = ((IEnumerable<object>)context.GetType().GetProperty((string)currentUrlPart).GetValue(context, null)).AsQueryable();
                } 
```

然后它退出循环，下次我用动态 linq 运行一个 select 语句

```
else if (currentUrlPart.GetType() == typeof(string))
                {

                    currentContextObj = ((IQueryable)currentContextObj).Select((string)currentUrlPart).AsQueryable();

                } 
```

这工作正常，直到它再次循环通过，在数组的第三部分 currentContextObj 不是可查询的，它是一个数据查询，如果我在调试时将鼠标悬停在它上面，它会显示生成的 sql 语句，所以当我运行它时`((IQueryable)currentContextObj).Select((string)currentUrlPart).AsQueryable();`它会出错: `No property or field 'Suburbs' exists in type 'EntitySet 1'`.

我正在使用动态 linq，因为这些类型都是匿名的。我的另一个尝试试图找到可枚举类的 select 方法并在 currentContextObj 上调用它。这不起作用，因为 currentContextObj 在它是一个表时试图转换为一个可枚举，而我无法转换为表，因为直到运行时我才知道 T。

**我知道这是很多信息，但我会列出我要问的内容：**

1.  我应该做 .select().select().where().select()... 等等还是应该去 .join().join().where().select()
2.  是否有可能避免我在动态 LINQ 的错误中遇到的这个问题？
3.  这个问题有替代解决方案吗？

# scala - Scala 中的多个 flatMap

> ID：12233566
> 
> 赞同：7
> 
> 时间：2012-09-02T05:06:34.840
> 
> 标签：scala, functional-programming, scala-collections

而不是`xs map f map g`更有效地编写`xs map { x => g(f(x)) }`，并且类似地用于多个`filter`操作。

如果我`flatMap`连续有两个或多个 s，有没有办法将它们组合成一个，这可能更有效？例如

```
def f(x: String) = Set(x, x.reverse)
def g(x: String) = Set(x, x.toUpperCase)

Set("hi", "bye") flatMap f flatMap g  
  // Set(bye, eyb, IH, BYE, EYB, ih, hi, HI) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-02T10:20:23.450

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-02T20:09:54.257

In [scalaz](https://github.com/scalaz/scalaz/blob/scalaz-seven/) there is a way to compose functions like `a -> m b` and `b -> m c` into `a -> m c` (like the function here, from `String` to `Set[String]`). They are called [Kleisli functions](http://www.haskell.org/haskellwiki/Arrow_tutorial#Kleisli_Arrows), by the way. In haskell this is done simply with `>=>` on those functions. In scala you'll have to be a bit more verbose (by the way, I've changed the example a bit: I couldn't make it work with `Set`, so I've used `List`):

```
scala> import scalaz._, std.list._
import scalaz._
import std.list._

scala> def f(x: String) = List(x, x.reverse)
f: (x: String)List[String]

scala> def g(x: String) = List(x, x.toUpperCase)
g: (x: String)List[java.lang.String]

scala> val composition = Kleisli(f) >=> Kleisli(g)
composition: scalaz.Kleisli[List,String,java.lang.String] = scalaz.KleisliFunctions$$anon$18@37911406

scala> List("hi", "bye") flatMap composition
res17: List[java.lang.String] = List(hi, HI, ih, IH, bye, BYE, eyb, EYB) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T06:53:15.110

您为过滤器描述的方法基本上跳过了中间集合的创建。

至少在`flatMap`函数内部创建了内部集合，所以我无法想象有任何方法可以在不更改函数的情况下跳过该创建。

您可以尝试使用视图，尽管我不确定这对 flatMap 是否有用。

或者，您可以`multiFlatMap`直接从函数结果构建最终集合，而不将从函数返回的中间集合填充到新集合中。

不知道这是否可行。我至少看到一些严重的类型挑战即将到来，因为您需要传入一个函数序列，其中每个函数返回一个集合 A，其中 A 是下一个函数的输入类型。至少在任意类型和任意数量的函数的一般情况下，这听起来有些挑战。

# c# - 读取 IIS 错误日志

> ID：12233569
> 
> 赞同：1
> 
> 时间：2012-09-02T05:07:28.990
> 
> 标签：c#, asp.net, iis, error-logging, iis-logs

我需要让所有 IIS 错误显示在网页上。我尝试使用 LogParser，但无法使用 c# 代码使其工作。是否有任何其他方法可以只读取日志中的错误并将它们显示在网页上?

# java - 对象平等 Google guava 和 Apache Commons

> ID：12233570
> 
> 赞同：0
> 
> 时间：2012-09-02T05:07:42.657
> 
> 标签：java, guava, apache-commons

试图理解我从对象相等中得到的结果......好吧，首先让我描述需要从数据库中的两个两个表中过滤重复对象的问题（Hibenate所有的cluses都已设置）预设条件是firstName，lastName，dateOfbirth

```
package com.equality.types;  

import com.google.common.base.Objects;  

import java.util.Date;  

public class AsignoreTypes{  
private String firstname;  
private String lastname;  
private Date doa;  

public String getFirstname() {  
    return firstname;  
}  

public void setFirstname(String firstname) {  
    this.firstname = firstname;  
}  

public String getLastname() {  
    return lastname;  
}  

public void setLastname(String lastname) {  
    this.lastname = lastname;  
}  

public Date getDoa() {  
    return doa;  
}  

public void setDoa(Date doa) {  
    this.doa = doa;  
}  

/*   @Override 
public boolean equals(Object obj) { 
    if (obj instanceof AsignoreTypes == false) { 
        return false; 
    } 

    if (this == obj) { 
        return true; 
    } 
    AsignoreTypes other = (AsignoreTypes) obj; 
    return new EqualsBuilder().append(this.firstname , other.firstname) 
            .append(this.lastname, other.lastname) 
            .append(this.doa , other.doa).isEquals(); 
} 

@Override 
public int hashCode() { 
    return new HashCodeBuilder().append(this.firstname) 
            .append(this.lastname) 
            .append(this.doa) 
            .hashCode(); 
} 
 */  
@Override  
public int hashCode(){  
    return Objects.hashCode(firstname, lastname, doa);  
}  

@Override  
public boolean equals(final Object obj){  
    if(obj instanceof AsignoreTypes){  
        final AsignoreTypes other = (AsignoreTypes) obj;  
           return Objects.equal(firstname, other.firstname)  
                &&Objects.equal(lastname, other.lastname)  
                && Objects.equal(doa, other.doa);  
    } else{  
        return false;  
    }  
} 
```

所以在我的服务类中，我在 2 个表上调用 Query 并创建对象列表迭代它

在其中一个列表中创建一个嵌套迭代和第二个列表

所以在我的服务类中，我在 2 个表上调用 Query 并创建自定义列表迭代列表和对象

所以在我的服务类中，我在 2 个表上调用 Query 并创建自定义列表迭代列表和对象

```
Session session = service.getDataServiceManager().getSession();
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
Query query = session.createQuery("select upper(ass.firstName), upper(ass.lastName), ass.doa from AssignorInfo ass");
List < Object > ass1 = null;
ass1 = query.list();
List < AsignoreTypes > res1 = null;
res1 = new ArrayList < AsignoreTypes > ();
Iterator < Object > it = ass1.iterator();
while (it.hasNext()) {
        Object[] row = (Object[]) it.next();
AsignoreTypes ass = new AsignoreTypes();
if (row[0] != null) ass.setFirstname(row[0].toString());
if (row[1] != null) ass.setLastname(row[1].toString());
if (row[2] != null) ass.setDoa(formatter.parse(row[2].toString()));
res1.add(ass);
}
        log(INFO, "List one size " + res1.size());
Query q = session.createQuery("select upper(g.fname), upper(g.lname), g.doa from  GeneralInfo g where g.arbitrator like '%Bulel%' ");
List < Object > ass2 = null;
ass2 = q.list();
log(INFO, " Size from wizard " + ass2.size());
List < AsignoreTypes > res2 = null;
res2 = new ArrayList < AsignoreTypes > ();
Iterator < Object > iterator = ass2.iterator();
while (iterator.hasNext()) {
        Boolean f = null;
Object[] row = (Object[]) iterator.next();
AsignoreTypes ass = new AsignoreTypes();
if (row[0] != null) ass.setFirstname(row[0].toString());
if (row[1] != null) ass.setLastname(row[1].toString());
if (row[2] != null) ass.setDoa(formatter.parse(row[2].toString()));
for (AsignoreTypes a1: res1) {

        f = ass.equals(a1);
}
        if (f == false) {
        res2.add(ass);
log(INFO, "Got matchig element " + ass.getLastname());
}
        }
        log(INFO, "List tow size " + res2.size() + " List hash set size ");
HashSet < AsignoreTypes > asigors = new HashSet < AsignoreTypes > ();
HashSet < AsignoreTypes > wiz = new HashSet < AsignoreTypes > ();
asigors.addAll(res1);
wiz.addAll(res2);
wiz.removeAll(asigors);

log(INFO, "Added to hash set " + asigors.size());

log(INFO, "Added assignors to the list " + wiz.size()); 
```

所以这是我不理解的部分，我在对象上实现了相等方法，但相等返回一两个匹配项... 2012-09-01 18:49:09,910 INFO [com.equality.service.CopareToServices] - （线程 1008调用 CopareToServices.compareObjects) Equality 方法只找到一个重复记录 >>>

但是当最后我在列表上实现 removeAll 时，结果

这是在 heshSet 2012-09-01 18:49:09,918 INFO [com.equality.service.CopareToServices] 上实施 removeAll 之后 - （线程 1008 调用 CopareToServices.compareObjects）

删除了 171 个听起来正确的重复项...

如何在列表上实现 removeAll 正确过滤列表但相等方法不起作用

尝试使用 apache commons 的 equals builder 也具有相同的输出

真诚地感谢我能得到的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T05:45:31.687

如果我理解得很好，我认为问题是：

```
for (AsignoreTypes a1: res1) {
    f = ass.equals(a1);
} 
```

因为这就像只测试`res1`.

* * *

**编辑：**更正建议：

```
private List<AsignoreTypes> getAssignoreTypesList(final String sql) {
    final List<AsignoreTypes> result = new ArrayList<AsignoreTypes>();
    final SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
    final Session session = service.getDataServiceManager().getSession();
    final Query query = session.createQuery(sql);
    final List<?> rows = query.list();
    for (final Object row : rows) {
        final Object[] columns = (Object[]) row;
        final AsignoreTypes ass = new AsignoreTypes();
        ass.setFirstname((String) columns[0]);
        ass.setLastname((String) columns[1]);
        if (columns[2] != null) {
            try {
                ass.setDoa(formatter.parse(columns[2].toString()));
            } catch (final ParseException e) {
                // ignore?
            }
        }
        result.add(ass);
    }

    return result;
}

public void foo()
{
    final List<AsignoreTypes> assignorInfos = getAsignoreTypesList("select upper(ass.firstName), upper(ass.lastName), ass.doa from AssignorInfo ass");
    log(INFO, "List one size " + assignorInfos.size());

    final List<AsignoreTypes> generalInfos = getAsignoreTypesList("select upper(g.fname), upper(g.lname), g.doa from  GeneralInfo g where g.arbitrator like '%Bulel%' ");
    log(INFO, "Size from wizard " + generalInfos.size());

    final List<AsignoreTypes> filtered = new ArrayList<AsignoreTypes>();
    for (final AsignoreTypes asignoreTypes : generalInfos) {
        if (!assignorInfos.contains(asignoreTypes)) {
            filtered.add(asignoreTypes);
            log(INFO, "Got matching element " + asignoreTypes.getLastname());
        }
    }

    log(INFO, "Filtered : " + filtered.size() + "/" + generalInfos.size());
} 
```

参见[List#contains(Object)](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#contains%28java.lang.Object%29)

# ios5.1 - 如何解决 EXC_BAD_ACCESS

> ID：12233571
> 
> 赞同：1
> 
> 时间：2012-09-02T05:08:02.830
> 
> 标签：ios5.1, xcode4.4

我是 iOS 新手，我 `EXC_BAD_ACCESS`在以下行中遇到了异常

`nextscrn.fullTextValue=self.fulltextFromSecond;`

这个 nextscrn 对象已经以这种方式在上面创建到该行。

`ImageVisible *nextscrn=[[ImageVisible alloc]initWithNibName:nil bundle:nil];`

谁能解释一下这是什么原因以及我该如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T05:12:27.503

如果`nextscrn.fullTextValue=self.fulltextFromSecond;`是您遇到异常的行，那么几乎可以肯定是其中之一`nextscrn`。`self`设置为无效指针。

第一步是确定它是哪一个，然后找出它为什么会这样。

确定问题所在的一种方法是使用调试工具（可能是最好的方法）。如果这不可能，您可以尝试以下方法：

```
void *xyzzy = self.fulltextFromSecond; 
```

看看是否会崩溃（我用过`void *`是因为我不知道你`self`是什么类型，但你可能应该替换“真实”类型）。

如果崩溃了，那`self`就是损坏了，但我认为这种可能性最小。如果没有，请尝试类似的方法`nextscrn.fullTextValue`。

# java - java.io.IOException：服务器返回 HTTP 响应代码：URL https:// 的 403

> ID：12233572
> 
> 赞同：-1
> 
> 时间：2012-09-02T05:08:29.193
> 
> 标签：java

我试图通过浏览器访问 URL 没有问题，但是我的程序抛出： **java.io.IOException: Server returned HTTP response code: 403 for URL:**

这里的 URL 只是我的**Sharepoint Online**服务器上列表项的附件文件路径。我正在尝试获取该文件的内容。它从浏览器中打开，但从代码中抛出异常。

代码：

```
private String getAttachmentContent(String attachmentURL) throws IBSharePointException 
{
    InputStream is = null;

    try 
    {
        String fileName=attachmentURL.substring(attachmentURL.lastIndexOf("/")+1);
        String urlPath=attachmentURL.substring(0, attachmentURL.lastIndexOf("/")+1);
        fileName=URLEncoder.encode(fileName, "UTF-8");

        if(fileName.contains("+"))
            fileName=fileName.replace("+", "%20");          
        URL u=new URL(urlPath+fileName);    

        // Following Line Throws Exception : java.io.IOException: Server returned HTTP response code: 403 for URL:
        is = u.openStream();

        ByteArrayOutputStream bais = new ByteArrayOutputStream();
        byte[] byteChunk = new byte[4096];    
        int n;    
        while ( (n = is.read(byteChunk)) > 0 ) 
            { 
                bais.write(byteChunk, 0, n);                    
            }
    }catch(Exception e)
    {
        throw e;
    }
} 
```

我已经完成了代码中的所有设置，甚至尝试了与该主题相关的所有可能解决方案，但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T05:48:47.333

403 Forbidden 响应具有以下记录的含义：

> *“服务器理解请求，但拒绝执行。授权无济于事，请求不应重复。”*

您将需要联系您尝试交谈的服务器的管理员，以了解该请求被禁止的**原因。**可能是他们没有启用 https，也可能是与使用 https 完全无关的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T05:33:29.763

您无权访问 URL/资源。在这里查看[http://en.wikipedia.org/wiki/HTTP_403](http://en.wikipedia.org/wiki/HTTP_403)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T10:47:03.600

最后我们找到了解决方案，以下是解决问题。

代码：

```
private String getAttachmentContent(String attachmentURL) throws IBSharePointException {
    InputStream inputStream = null;
    URLConnection urlConnection = null;
    URL url = null;
    ByteArrayOutputStream byteOutputStream = new ByteArrayOutputStream();
    byte[] byteChunk = new byte[4096];
    int noOfBytes = 0;
    try {

        String fileName = attachmentURL.substring(attachmentURL.lastIndexOf("/") + 1);
        String urlPath = attachmentURL.substring(0, attachmentURL.lastIndexOf("/") + 1);
        fileName = URLEncoder.encode(fileName, "UTF-8");
        //This line is to fix bug # 966837
        if (fileName.contains("+"))
            fileName = fileName.replace("+", "%20");

        url = new URL(urlPath + fileName);
        urlConnection = url.openConnection();
        urlConnection.addRequestProperty("User-Agent", _Constants.DEFAULT_USER_AGENT_WINDOWS);
        // We need to set cookies as below.
        urlConnection.addRequestProperty("Cookie", _mSharePointSession.cookieNedToken);

        urlConnection.connect();

        inputStream = urlConnection.getInputStream();

        while ((noOfBytes = inputStream.read(byteChunk)) > 0) {
            byteOutputStream.write(byteChunk, 0, noOfBytes);
        }

        return new BASE64Encoder().encode(byteOutputStream.toByteArray());

    } catch (Exception e) {
        throw e;
    }
} 
```

# javascript - 创建jQuery Slider的简单方法

> ID：12233575
> 
> 赞同：-6
> 
> 时间：2012-09-02T05:09:19.463
> 
> 标签：javascript, jquery, html, slider

我想创建一个简单的基于 jQuery 的静态滑块。现在我只有设计。它在右下角有小点作为分页，带有标题、图像和一些内容。它应该能够无限循环，还应该具有播放和暂停的能力。不需要太多功能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T05:09:19.463

今天我尝试了一个带有固定分页的内容滑块。我实现了这一点，我会在它发布后说。我本来可以简单的用一个插件，但是由于一些技术问题，我也想学点东西，所以我在我的onw上做了。

我从 HTML 标记开始，从两个`UL`s 开始。一个是*分页*，另一个*是幻灯片的内容*。

从这个**HTML 标记**开始，我转向**CSS**并*定位*布局元素。

### HTML

```
<ul class="content-pagination">
    <li><a href="0"></a></li>
    <li><a href="1"></a></li>
    <li><a href="2"></a></li>
    <li><a href="3"></a></li>
    <li><a href="4"></a></li>
</ul>

<ul class="content-slides">
    <li>
        <img src="slides/background1.png" alt="" />
        <div class="desc">
            <h3>Heading 1</h3>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s!.</p>
        </div>
    </li>
    <li>
        <img src="slides/background2.png" alt="" />
        <div class="desc">
            <h3>Heading 2</h3>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s!.</p>
        </div>
    </li>
    <li>
        <img src="slides/background3.png" alt="" />
        <div class="desc">
            <h3>Heading 3</h3>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s!.</p>
        </div>
    </li>
    <li>
        <img src="slides/background4.png" alt="" />
        <div class="desc">
            <h3>Heading 4</h3>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s!.</p>
        </div>
    </li>
    <li>
        <img src="slides/background5.png" alt="" />
        <div class="desc">
            <h3>Heading 5</h3>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s!.</p>
        </div>
    </li>
</ul> 
```

我很难解决由我们古老的**Internet Explorer 7**和稍微现代的**Internet Explorer 8**浏览器引起的问题，所以我不得不干预他们专有的*黑客攻击*形式并修复它们！最终的**CSS**是这样来的：

### CSS

```
.slider {padding: 0; height: 150px; position: relative; overflow: hidden; width: 270px;}
.slider .content-slides {position: absolute; top: 0; left: 0; padding: 0; margin: 0;}
.slider .content-slides li {width: 270px; height: 150px; position: relative; float: left; list-style: none;}
.slider .content-slides li img {width: 270px; height: 150px; display: block;}
.slider .content-slides li .desc {position: absolute; font-size: 90%; background: #999; background: rgba(0, 0, 0, 0.5); left: 0; top: 0; width: 100%; overflow: hidden; padding: 0 0 5px;}
.slider .content-slides li .desc * {color: #fff; width: 200px; margin: 5px 10px; line-height: 1.1em;}
.slider .content-pagination {text-align: right; position: absolute; bottom: 10px; right: 10px; z-index: 5;}
.slider .content-pagination li {float: none; display: inline; font-size: 0.75em; padding: 0.25em;}
.slider .content-pagination li a {width: 7px; height: 7px; border-radius: 7px; background-color: #ccc; overflow: hidden; line-height: 10px; font-size: 1px; text-indent: -999em; display: inline-block; *display: inline; *zoom: 1;}
.slider .content-pagination li.active-marker a,
.slider .content-pagination li a:hover {background-color: #08c; color: #fff;} 
```

*是的，背景*图像的宽度和高度是固定的，而且它们是`270px × 150px`.

现在是真正有趣的部分，花了我大约一个小时！JavaScript像任何东西一样消耗时间**！**:) 我不得不承认我在我的 JavaScript 中采用了一种低质量的方法，因为我只关心这**5 个内容**总是**带有分页**并且在未来的滑块类型中**不可扩展。**

### JavaScript

首先，我不知道这些滑块是如何工作的，但我有一个小小的想法，即`UL`它将具有`LI`它所拥有的所有 s 的总和的宽度。所以，这成为了第一个声明：

```
$(".slider .content-slides").width($(".slider .content-slides").children().size() * $(".slider .content-slides").width()); 
```

我需要一个**计数器**来保存当前请求的页面。所以我初始化了一个计数器`index`并给它赋值`0`。很多人都错过了这个部分！！！也加这个！

```
index = 0; 
```

下一步是创建一个**函数**，它为整个滑块设置动画。是的，我用**jQuery**来帮助我！所以，函数是这样的：

```
function slideStart()
{
    curPage = ((index) % $(".slider .content-slides").children().size()) + 1;
    $(".slider .content-slides").animate({
        "left": -($(".slider .content-slides li:nth-child(" + curPage + ")").position().left)
    });
    $(".slider .content-pagination li").removeClass("active-marker");
    $(".slider .content-pagination li:nth-child(" + curPage + ")").addClass("active-marker");
    index++;
} 
```

由于我声明`index`为全局变量，因此我可以随时随地访问它。它的范围通过脚本和内部函数有效。我将当前页面的变量初始化为*计数*的**模**值除以滑块内*的子项数。**`index`*

 **接下来是`animate()`jQuery 提供的很棒的功能。它用于以平滑过渡而不是剧烈或突然的变化来更改*CSS 属性。*此函数现在移动（滑动）列表容器的左侧位置`UL`以适合下一个`LI`元素。

然后是分页的东西。*它使用另一个很棒的CSS / jQuery Selector*添加当前幻灯片，`:nth-child()`它实际上选择了容器的第 n 个子项。加载幻灯片后，`LI`将通过添加一个类将相应的幻灯片标记为活动`active`。

最后，使用*传统方式*`index`将 的值加 1 ！

 *进入下一个功能，即将`click`事件添加到分页按钮。我认为这将是一种复杂的方式，但我设法通过设置`index`值、清除旧计时器并重新启动滑块功能以简单的方式完成。

```
$(".slider .content-pagination li a").click(function(){
    index = $(this).attr("href");
    clearInterval(islider);
    slideStart();
    islider = setInterval("slideStart()", 2500);
    return false;
}); 
```

我`return false;`在末尾添加了一个以防止链接跟随它的 URL，否则它会从其`href`属性中打开 URL。现在是最后一部分，也是最重要的部分。脚本的初始化程序。我们只需要使用该函数启动滑块`slideStart()`并让它运行一个固定的时间间隔，比如*2.5 秒*。由于需要在文档加载后执行，所以在`$(document).ready()`函数内部给出。

```
$(document).ready(function(){
    slideStart();
    islider = setInterval("slideStart()", 2500);
}); 
```

### 最终的 JavaScript

```
$(".slider .content-slides").width($(".slider .content-slides").children().size() * $(".slider .content-slides").width());

function slideStart()
{
    curPage = ((index) % $(".slider .content-slides").children().size()) + 1;
    $(".slider .content-slides").animate({
        "left": -($(".slider .content-slides li:nth-child(" + curPage + ")").position().left)
    });
    $(".slider .content-pagination li").removeClass("active-marker");
    $(".slider .content-pagination li:nth-child(" + curPage + ")").addClass("active-marker");
    index++;
}

$(".slider .content-pagination li a").click(function(){
    index = $(this).attr("href");
    clearInterval(islider);
    slideStart();
    islider = setInterval("slideStart()", 2500);
    return false;
});

$(document).ready(function(){
    index = 0;
    islider = setInterval("slideStart()", 2500);
}); 
```

### 完整演示：http: [//jsbin.com/uhowak/2](http://jsbin.com/uhowak/2)

希望这对某人有帮助！:)***

# android - 如何在显示面板之前加载 web 视图？

> ID：12233577
> 
> 赞同：-1
> 
> 时间：2012-09-02T05:09:21.383
> 
> 标签：android, android-intent, android-widget, android-webview

我有两个面板。第一个面板包含一个按钮，当我按下该按钮时，会出现下一个带有 web 视图的面板。有没有办法在显示它所在的面板之前先加载 webview？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T05:28:03.690

当然，使用 myWebView.setVisibility(View.INVISIBLE); 将 WebView 的可见性设置为不可见；然后当您收到回调时，页面已加载，将可见性设置回可见。

# php - PHP SprintF 枚举值

> ID：12233590
> 
> 赞同：0
> 
> 时间：2012-09-02T05:12:35.040
> 
> 标签：php, parsing, enums, printf

再会。

我在我的本地化系统中使用 SprintF 函数来编写自定义脚本，但我还希望有枚举值，这样可以节省大量代码。

现在我做

```
$string = 'Some localisation string with %s and %s variables.';
$qwe = sprintf($string,'xxx', 'yyy'); //returns: Some localisation string with xxx and yyy variables. 
```

它适用于简单的值，但我有很多情况想使用可枚举的东西。

所以，我想要这样的东西

```
$string = 'Some string %{qwe,zxc,ddd,yyy} blah blah';
$qwe = someFunction($string,1); //would return: Some string zxc blah blah
$qwe = someFunction($string,3); //would return: Some string yyy blah blah 
```

是否可以？有没有可以使用的内置函数？还是我必须自己实施？如果是这样，也许已经有一些解决方案或库？

PS - 请不要建议我使用模板引擎。我只需要这个特定的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T05:28:35.767

没有这样的bulidin功能，需要自己写一个。

```
function someFunction($string, $index) {
    return preg_replace_callback('/%\{([^\}]*)\}/', function($matches) use ($index) {
         $values = explode(',', $matches[1]);
         return isset($values[$index - 1]) ? $values[$index - 1] : $matches[0]; 
    }, $string);
} 
```

# mysql - MySQL 上的错误 1222

> ID：12233591
> 
> 赞同：-1
> 
> 时间：2012-09-02T05:12:35.990
> 
> 标签：mysql, sql, mysql-error-1222

我正面临这个错误...... MySQL 上的错误代码：1222：使用的 SELECT 语句有不同的列数

这是我的代码：

```
CREATE PROCEDURE `test`() 
BEGIN 
   SELECT ID, Name 
   FROM attributes into @resultset; 
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T10:08:44.333

# android - 在 Android 应用程序中将 alpha 应用于 jpeg 的更快方法？

> ID：12233594
> 
> 赞同：1
> 
> 时间：2012-09-02T05:14:31.600
> 
> 标签：android, transparency, jpeg

我使用 png 文件为需要 alpha 的对象启动了我的 android 应用程序，但我很快意识到所需的空间实在是太多了。因此，我编写了一个程序，该程序采用带有 alpha 的 png 并创建了一个 b&w alpha mask png 文件和一个 jpeg。这给了我大量的空间节省，但速度不是很好。

以下是我的 Android 应用程序中的代码，它结合了 jpg 图像（代码中的 origImgId）和 png 掩码（代码中的 alphaImgId）。

它有效，但速度不快。我已经缓存了结果，并且正在编写代码，该代码将在游戏开始之前将这些图像加载到菜单屏幕中，但如果有一种方法可以加快速度，那就太好了。

有没有人有什么建议？请注意，我稍微修改了代码以使其易于理解。在游戏中，这实际上是一个精灵，它按需加载图像并缓存结果。在这里，您只看到加载图像和应用 alpha 的代码。

```
public class BitmapDrawableAlpha
{
    public BitmapDrawableAlpha(int origImgId, int alphaImgId) {
        this.origImgId = origImgId;
        this.alphaImgId = alphaImgId;
    }

    protected BitmapDrawable loadDrawable(Activity a) {
        Drawable d = a.getResources().getDrawable(origImgId);
        Drawable da = a.getResources().getDrawable(alphaImgId);

        Bitmap b = Bitmap.createBitmap(d.getIntrinsicWidth(),d.getIntrinsicHeight(),Bitmap.Config.ARGB_8888);
        {
            Canvas c = new Canvas(b);
            d.setBounds(0,0,d.getIntrinsicWidth()-1,d.getIntrinsicHeight()-1);
            d.draw(c);
        }

        Bitmap ba = Bitmap.createBitmap(d.getIntrinsicWidth(),d.getIntrinsicHeight(),Bitmap.Config.ARGB_8888);
        {
            Canvas c = new Canvas(ba);
            da.setBounds(0,0,d.getIntrinsicWidth()-1,d.getIntrinsicHeight()-1);
            da.draw(c);
        }

        applyAlpha(b,ba);

        return new BitmapDrawable(b);
    }

    /** Apply alpha to the specified bitmap b. */
    public static void applyAlpha(Bitmap b, Bitmap bAlpha) {
        int w = b.getWidth();
        int h = b.getHeight();
        for(int y=0; y < h; ++y) {
            for(int x=0; x < w; ++x) {
                int pixel = b.getPixel(x,y);
                int finalPixel = Color.argb(Color.alpha(bAlpha.getPixel(x,y)), Color.red(pixel), Color.green(pixel), Color.blue(pixel));
                b.setPixel(x,y,finalPixel);
            }
        }
    }

    private int origImgId;
    private int alphaImgId;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T05:57:56.950

如果您要处理每个多个像素，您可以调用[getPixels()](http://developer.android.com/reference/android/graphics/Bitmap.html#getPixels%28int%5B%5D,%20int,%20int,%20int,%20int,%20int,%20int%29)和[setPixels()](http://developer.android.com/reference/android/graphics/Bitmap.html#setPixels%28int%5B%5D,%20int,%20int,%20int,%20int,%20int,%20int%29)来一次获取所有像素。这将防止循环中的其他方法调用和内存引用。

您可以做的另一件事是使用按位或代替辅助方法进行像素加法。防止方法调用应该提高效率：

```
public static void applyAlpha(Bitmap b, Bitmap bAlpha) {
    int w = b.getWidth();
    int h = b.getHeight();
    int[] colorPixels = new int[w*h];
    int[] alphaPixels = new int[w*h];
    b.getPixels(colorPixels, 0, w, 0, 0, w, h);
    bAlpha.getPixels(alphaPixels, 0, w, 0, 0, w, h);
    for(int j = 0; j < colorPixels.length;j++){
        colorPixels[j] = alphaPixels[j] | (0x00FFFFFF & colorPixels[j]);
    }
    b.setPixels(colorPixels, 0, w, 0, 0, w, h);
} 
```

话虽如此，您尝试执行的过程相当简单，但我无法想象这些将提供巨大的性能提升。从这一点来看，我能提供的唯一建议是使用[NDK](http://developer.android.com/tools/sdk/ndk/index.html)转到本机实现。

**编辑：**此外，由于位图不必是可变的，`getPixels()`或者您可以使用[BitmapFactory.decodeResource()](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeResource%28android.content.res.Resources,%20int%29)`getPixel()`获取 alpha 位图：

```
Bitmap ba = BitmapFactory.decodeResource(a.getResources(), alphaImgId); 
```

# ruby - Sinatra 响应“http://sever/func?key1=value1&key2=value”

> ID：12233595
> 
> 赞同：0
> 
> 时间：2012-09-02T05:14:48.243
> 
> 标签：ruby, rest, sinatra

如何让 sinatra 代码响应下面的 GET 方法？

```
http://my.server.address/function?key1=value1&key2=value2&key3=value3 
```

谢谢你的好心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T06:35:53.930

由于路径中唯一的东西是'/function'，所以这是你唯一需要管理的东西。主机将由服务器处理，参数由 Sinatra 处理（它通过`params`方法使它们可用）所以我们可以用这段代码来运行它：

```
require 'sinatra'
get '/function' do
  params.inspect
end 
```

当我们在端口 4567 上本地运行它时，然后转到“http://localhost:4567/function?key1=value1&key2=value2&key3=value3”，它返回我们检查的参数为`{"key1"=>"value1", "key2"=>"value2", "key3"=>"value3"}`

至于“my.server.address”，这取决于您托管应用程序的方式。如果您在这里没有经验，最简单的方法是使用[Heroku](http://www.heroku.com/)。

# c++ - 从文件中读取 CSV 数据

> ID：12233596
> 
> 赞同：6
> 
> 时间：2012-09-02T05:14:49.463
> 
> 标签：c++

如果有人问过这个问题，我很抱歉，但我似乎找不到对我有帮助的解决方案。我正在尝试从文本文件中读取数据，并最终将其存储在一个对象中。

文本文件有 4 个变量，全部用逗号分隔。

我试图这样做如下：

```
string v1, v2, v3, v4;
ifstream afile;
afile.open("thefile.txt");
afile >> v1 >> v2 >> v3 >> v4;
afile.close();
cout << v1 << endl;
cout << v2 << endl;
cout << v3 << endl;
cout << v4 << endl; 
```

该文件有多个记录。我现在尝试只做 1 以确保它有效，但是当它读取数据时，它不会以逗号分隔。

从那里，我想将数据存储到一个对象中。以下工作是否有效： Thing* thing1 = new Thing(v1, v2, v3, v4);

虽然，当我读到 5 条记录时，构造上述代码行的最佳方法是什么？由于每个对象都需要一个唯一的名称，有没有一种方法可以使用 for 循环和向量进行迭代？ie for (int i = 0; i < 5; i++) { // 读入数据 // 存入向量 }

非常感谢任何提示

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-02T05:50:55.120

CSV 格式比逗号分隔符更复杂。它可以包含引号，您应该相应地转义和解释，并且可能允许使用不同的分隔符。如果您的输入文件没有严格格式化，您真的应该使用专用的 CSV 导入/导出库。

分词器类可能会回答您的问题（例如来自[boost](http://www.boost.org/doc/libs/1_37_0/libs/tokenizer/escaped_list_separator.htm)的问题或[更简单的问题](http://www.partow.net/programming/strtk/index.html)可用）。

您应该检查有关此主题的[其他](https://stackoverflow.com/questions/1120140/csv-parser-in-c) [问题。](https://stackoverflow.com/questions/1120140/csv-parser-in-c)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-02T06:08:56.107

如果可以，请注意@Soravux 的回答并使用专门的库。特别是，他建议的 strtk 工具包似乎很有趣，并且只是一个标头。Boost 也可以通过至少 5 种不同的方式来实现，如果你打算使用 C++ 一段时间，它是一个值得学习的库。也就是说，所有这些解决方案都会给你的程序增加一些复杂性，而且你很可能想把这些精力花在其他地方，特别是如果你只需要一个非常简单的数字阅读器。以下是如何使用标准 C++（使用 STL，例如向量和流）：

```
 #include <iostream>
    #include <sstream>
    #include <fstream>
    #include <string>
    #include <algorithm>
    #include <vector>

    using namespace std;

    vector<double> &split(const string &s, 
        char delim, vector<double> &elems) 
    {
        stringstream ss(s);
        string item;
        while (std::getline(ss, item, delim)) {
            stringstream conv( item );
            double number;
            conv >> number;
            elems.push_back(number);
        }
        return elems;
    }

    struct my_record_t{
        double f1, f2, f3, f4;
    };

    typedef vector<my_record_t> my_record_vector_t;

    int main( int argc, char* argv[])
    {
        stringstream  in("10,20,2.0,5\n"
                          "4.,5.,6.,80\n"
                          "4.,2.,6.,70\n"
                          "4.,5.,6.,86\n"
                          "2.,5.,9.,80\n");
        // Or alternatively, :
        //    ifstream in("myfile.csv");

        // Here you store your records
        my_record_vector_t mrv;

        string line;
        vector< double > numbers; 
        while( std::getline( in, line, '\n' ) )
        {
            numbers.clear();
            split( line, ',', numbers);
            my_record_t r;
            r.f1 = numbers[0];
            r.f2 = numbers[1];
            r.f3 = numbers[2];
            r.f4 = numbers[3];
            mrv.push_back( r );
        }

        cout << mrv.size() << " records read" << endl;

        return 0;
    } 
```

也许有点太长了，但它可以节省你的一天。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-27T15:14:12.730

我会看看[使用 ifstream 来读取浮点数](https://stackoverflow.com/questions/22100662/using-ifstream-to-read-floats/22103121#22103121)并从解析逗号开始。CSV 格式更复杂，但该示例应该可以帮助您入门。该示例使用[字符串工具包](http://www.partow.net/programming/strtk)，它非常擅长解析文本并转换为您需要的结构元素。

# c# - 改进 string.Format CallExpression

> ID：12233601
> 
> 赞同：1
> 
> 时间：2012-09-02T05:16:28.353
> 
> 标签：c#, expression-trees, dynamic-language-runtime

我正在尝试`string.Format`使用 Tree 调用

我做了一些工作，因为我的供应与接受`params Expression[] _ParameterExpressions`的签名不匹配，它似乎不会应用隐式转换。`string.Format``object[]`

我目前的解决方案是将我提供的参数转换为`object[]`使用

```
NewArrayExpression _NewArray = Expression.NewArrayInit(typeof(object), _ParameterExpressions.Select(ep => Expression.Convert(ep, typeof(object)))); 
```

并设置我的代理函数以将参数传递给`string.Format`（我需要这个，否则它会说它找不到匹配的签名）

```
static string ReplaceParameters(string format, params object[] obj)
{
    return string.Format(format, obj);
}

static IEnumerable<Expression> ReplaceStringExpression(Expression exp)
{
    yield return exp;
    yield return _NewArray;
} 
```

最后是我的电话

```
ConstantExpression ce = Expression.Constant(orginalString, typeof(string));
MethodCallExpression me = Expression.Call(typeof(RuleParser), "ReplaceParameters", null,
                ReplaceStringExpression(ce).ToArray()); 
```

该表达式有效，但我不太喜欢创建包含额外装箱过程的新数组的想法。我认为在这种简单的函数调用上做得过火了。

我怎样才能改善这个`string.Format`电话？

==========

**编辑**

在我的学习上取得一些进展。我现在可以`ReplaceParameters`放弃但仍然不喜欢创建对象数组`_NewArray`

```
MethodCallExpression me = Expression.Call(
     typeof(string).GetMethod("Format", new Type[2] { typeof(string), typeof(object[]) }),
     ReplaceStringExpression(ce).ToArray()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T12:22:10.047

1.  当 ExpressionTree 由编译器创建时 - 它将包含所有隐式所需的转换以使选定的方法重载工作

    ```
    Expression<Func<string>> compilerFactoredExpressionTree = () => string.Format("{0} and {1} and {2} and {3}", 1, "text", true, 2);
    // test
    // "1 and text and True and 2"
    string s = compilerFactoredExpressionTree.Compile()();
    // ArrayInit(Convert(1), Convert("text", Convert(2)))
    Expression methodArgs = ((MethodCallExpression)compilerFactoredExpressionTree.Body).Arguments[1]; 
    ```

2.  如果您手动构建 ExpressionTree - 您需要自己充当编译器 - 手动插入转换或最初声明具有所需类型的值

    ```
    var parameters = new Expression[]
    {
        Expression.Constant(1, typeof(object)),
        Expression.Constant("text", typeof(object)),
        Expression.Constant(true, typeof(object)),
        Expression.Constant(2, typeof(object)),
    };

    var mi = new Func<string, object[], string>(string.Format).Method;

    var callStringFormat = Expression.Call(mi, Expression.Constant("{0} and {1} and {2} and {3}"), Expression.NewArrayInit(typeof(object), parameters));

    // "1 and text and True and 2"
    var lambda = Expression.Lambda<Func<string>>(callStringFormat);
    var r = lambda.Compile()(); 
    ```

# iphone - 核心数据：如何在两个实体之间建模多个一对多

> ID：12233605
> 
> 赞同：0
> 
> 时间：2012-09-02T05:17:25.093
> 
> 标签：iphone, ios, core-data, relationship

我有两个实体 - **Item**和**Tag**。一个项目可以有一个或多个用户无法编辑的只读（工厂）标签，然后是一个或多个用户可以随时创建的读写（用户）标签。我想知道如何最好地建模这个。

当然，我可以只创建**UserTag**和**FactoryTag**实体，但这意味着维护两个相同实体的冗余。我宁愿只拥有一个**Tag**实体。

**如果我在Item**和**Tag**之间使用单一的一对多关系，我将拥有一个包含只读和读写标签的 NSSet。这并不理想，因为我必须在**Tag**上有一个属性来标识它是只读的还是读写的。

我想知道是否有一种方法可以使用**Item**和**Tag**之间的多个关系来对此进行建模，从而使两种类型的标签彼此分开，即我会有一个 userTags 的 NSSet 和一个 factoryTags 的 NSSet？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T11:54:34.917

您可以在相同实体之间设置多个关系。控制从 Item 到 Tag 的拖动，并在 Item 中调用关系 factoryTags，在 Tag 中调用 itemUsingAsFT。使这个一对多。控制从项目到标签的第二次拖动，并在 Item 中调用此关系 userTags，在 inTag 中调用 itemUsingAsUT。也使这个一对多。这样，您可以使用相同的 Tag 实体将两者分开。

# python - 用于填充 auth_user 失败默认值错误的 Python 脚本

> ID：12233607
> 
> 赞同：0
> 
> 时间：2012-09-02T05:17:44.677
> 
> 标签：python, django

所以这是我的第一个 Django 项目。结果，我似乎每天都在学习关于它如何处理模型的新东西。因此，我的数据库每天都在变化。每次我想更新我的数据库时，我都需要删除它、创建它、运行 syncdb，然后用用户数据填充它。我希望使用 Python 脚本自动执行此过程，以省去不断重新创建数据库的麻烦。

当我尝试运行 INSERT 命令时，MySQL 告诉我 first_name 列没有默认值。我快速查看了源代码（https://github.com/django/django/blob/master/django/contrib/auth/models.py），User 类明确定义了 first_name 列的默认值，以及许多其他人。现在有人为什么我会收到此错误吗？

这是脚本的相关部分：

```
import MySQLdb, os
from django.core.management import call_command

os.environ['DJANGO_SETTINGS_MODULE'] = "DatingWebsite.settings"

db = MySQLdb.connect(user = "project", passwd = "project")
c = db.cursor()

try:
    c.execute("DROP DATABASE projectdb;")
except:
    pass
finally:
    c.execute("CREATE DATABASE projectdb;")
call_command('syncdb', interactive=False)
c.execute("USE projectdb;")

c.executemany("""INSERT INTO auth_user (id, username, email, password)
VALUES (%s, %s, %s, %s)""",
[
(1, 'bob', 'bob@gmail.com', 'pbkdf2_sha256$10000$A3ww6NUZ8TmS$5UA2sXCMS6x7uIGKe20hDckmisBY/rGUK7aye/tMUIw='),
] ) 
```

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T05:53:22.617

您可能会更好地使用[django south](http://south.aeracode.org/)，这样您就不必每次都重新创建数据库。

但是，如果您想重新创建 DB，可以尝试使用[固定装置来填充数据 DB](https://docs.djangoproject.com/en/dev/howto/initial-data/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T14:44:12.950

Neither the source code nor the table in mysql indicates any default non-null value for `first_name` or `last_name` which makes sense. Perhaps you might want to check again?

```
mysql> desc auth_user;
+--------------+--------------+------+-----+---------+----------------+
| Field        | Type         | Null | Key | Default | Extra          |
+--------------+--------------+------+-----+---------+----------------+
| id           | int(11)      | NO   | PRI | NULL    | auto_increment |
| username     | varchar(30)  | NO   | UNI | NULL    |                |
| first_name   | varchar(30)  | NO   |     | NULL    |                |
| last_name    | varchar(30)  | NO   |     | NULL    |                |
| email        | varchar(75)  | NO   |     | NULL    |                |
| password     | varchar(128) | NO   |     | NULL    |                |
| is_staff     | tinyint(1)   | NO   |     | NULL    |                |
| is_active    | tinyint(1)   | NO   |     | NULL    |                |
| is_superuser | tinyint(1)   | NO   |     | NULL    |                |
| last_login   | datetime     | NO   |     | NULL    |                |
| date_joined  | datetime     | NO   |     | NULL    |                |
+--------------+--------------+------+-----+---------+----------------+ 
```

# php - 如何保护 PHP 站点文件夹中的文件？

> ID：12233609
> 
> 赞同：1
> 
> 时间：2012-09-02T05:18:28.463
> 
> 标签：php

我正在使用 PHP。我需要的是在我们输入文件夹的路径时保护文件夹文件不列出文件名。

[http://test.com/admin/free_tmplt](http://test.com/admin/free_tmplt)

这是我的文件夹路径，当我直接使用此路径时，它会显示文件名。如何避免这种情况并显示“受保护页面”之类的消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T05:25:36.363

要阻止它们被列出（这不会保护文件..但这是您提出的问题），只需在该文件夹中创建 index.php 即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T05:29:38.677

在文件夹中创建一个`.htacess`文件并输入`deny from all`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T05:35:32.167

您也可以使该文件夹中的所有文件都具有随机文件名，这些文件名会在人们加载某些页面等时定期更改（并且这些不断变化的文件名将存储在数据库中）-这样没有人可以“猜测”或直接链接到文件，无论它们是否隐藏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T07:25:32.887

您可以创建一个名为 (index.php) 的文件并将其放在您想要隐藏其内容的每个文件夹中（防止它们被列出），然后将下一行代码放入该 (index.php) 文件中：

```
<?php header("Location: http://" . $_SERVER['HTTP_HOST']); ?> 
```

因为这行代码会将用户重定向到网站的主页。

# php - Javascript - 转义特定字符

> ID：12233610
> 
> 赞同：0
> 
> 时间：2012-09-02T05:18:41.713
> 
> 标签：php, javascript, delimiter

我正在使用 php 创建一些我需要使用 javascript 进行 split() 的字符串。

例子：

```
<?php
$string = "Apples";
$string .= "|"; // delimiter
$string .= "Oranges";
$string .= "|"; // delimiter
$string .= "Grapes";
?>

and here I split the string with JS:
<script>
var str = <?php echo $string; ?>
var fruitsArray = str.split('|'); 
for(var i=0; i<fruitsArray.length; i++){
 // do stuff here
}
</script> 
```

在这种情况下，**管道字符**是分隔符。但我可以使用任何特殊字符。我的问题是当**$string**有一个我用来分割的字符并且它也是非分隔符部分的一部分时。

例如：

```
<?php
$string = "Apples";
$string .= "|"; // delimiter
$string .= "Oranges";
$string .= "|"; // delimiter
$string .= "Grapes";
$string .= "|"; // delimiter
$string .= "Berries: blue|black"; // pipe exists, but not meant to be a delimiter
?> 
```

这只是间接的，但确实发生在我身上。我的分隔符有时会进入水果。（虽然我只是以水果为例）

我觉得我需要在 javascript 掌握它之前将我指定的分隔符转换为另一种格式。但我不确定。

有谁知道在这种情况下什么是最好的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T05:23:25.647

尝试使用更成熟的方式将变量编组到 javascript 中。像json。

要将 php 数组转换为 json： http: [//php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

```
echo json_encode(array('Apples', 'Oranges')); 
```

在 javascript 中从 json 获取数组：

*   使用 jQuery： [http ://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)
*   或仅在 javascript 中使用 eval() （**警告**：不安全 - 仅在您信任数据源时使用 - 如果字符串是用户提供的，则不要使用），或隐式 eval：`var fruitArray = <?php echo json_encode(array('Apples', 'Oranges')); ?>;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T05:29:58.383

对我来说，最快的解决方案是设计一个完全唯一的分隔符，即使它是“|%^*”。

对我来说，最好的解决方案是开发一种[上下文无关的语法](http://en.wikipedia.org/wiki/Context-free_grammar)。那就是明确定义所有类型的单词。

例如

```
delimeter :: |
list :: (element |)*
element :: [\w]+ (: list)* 
```

在明确定义所有内容的情况下进行干净的设计将允许您涵盖边界情况。

一个例子是在您的示例中，您在元素中有一个分隔符，但您需要找到一种方法来区分它。我的解决方案是，如果分隔符在一个元素中，它必须在整个列表周围有括号。否则，您不知道元素在哪里结束并且列表继续。

如果我不清楚，您可以随时阅读有关语法的维基百科页面，或在线进行研究。

我希望我很清楚。

# objective-c - 当 NSTokenField 成为第一响应者时，如何执行操作（显示弹出框）？

> ID：12233614
> 
> 赞同：1
> 
> 时间：2012-09-02T05:19:28.760
> 
> 标签：objective-c, cocoa, nstokenfield

一旦控件获得焦点，我正在尝试子类化`NSTokenField`以显示`NSPopover`带有某些选项的菜单。不幸的是，经过几天的试探，我开始认为这是不可能的。

这是我到目前为止所尝试的：

*   `-textDidBeginEditing`and是无用的`-controlTextDidBeginEditing`，因为它们只有在用户输入第一个字母后才会被调用。我需要一些能集中注意力的东西。
*   覆盖`-becomeFirstResponder`并`-resignFirstResponder`显示和隐藏菜单或弹出框也没有用。令牌字段显然将第一响应者状态传递给私有视图 ( `NSTokenFieldView`)，因此在关闭菜单或弹出框后立即`-resignFirsttResponder`被调用。`-becomeFirstReponder`
*   `-currentEditor`在关闭菜单之前，我尝试查看`-resignFirstResponder`. 当`-currentEditor`控件处于编辑模式时，它应该不为零，但不幸的是，它的值仅在`-resignFirstResponder`调用令牌字段后才设置，并且菜单再次立即关闭。
*   我尝试子类化`NSTokenFieldCell`并覆盖其`-editWithFrame:`和`-selectWithFrame:`方法，但我自定义的令牌字段`NSTokenFieldCell`根本没有显示，也没有报告错误或异常。

关于如何做到这一点的任何想法？有人做过吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T07:06:47.563

这行得通。我通过观察`firstResponder`父窗口的属性来做到这一点。如果令牌字段*或其包含的任何`NSResponder`s*成为第一响应者，则显示弹出框。

```
@implementation AppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
    [ self.window addObserver:self forKeyPath:@"firstResponder" options:NSKeyValueObservingOptionNew context:nil ] ;
}

-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if ( object == self.window && [ keyPath isEqualToString:@"firstResponder" ] )
    {
        NSResponder * responder = [ change valueForKey:NSKeyValueChangeNewKey ] ;

        while ( NULL != responder )
        {
            if ( responder == self.tokenField )
            {
                // show popover (if not showing)
                NSLog(@"Show popover!\n") ;
                return ;
            }
            responder = responder.nextResponder ;
        }

        NSLog(@"Hide popover!\n") ;
    }
    else
    {
        [ super observeValueForKeyPath:keyPath ofObject:object change:change context:context ] ;
    }
}

@end 
```

# iphone - iPhone 应用程序中的 XML/RSS... 有什么我必须遵守的规则吗？

> ID：12233618
> 
> 赞同：0
> 
> 时间：2012-09-02T05:20:56.447
> 
> 标签：iphone, xml, rss, appstore-approval

我想使用普通的旧 XML 将数据输入我的应用程序。这是否允许，他们对饲料有任何限制吗？它是否需要是有效的 RSS 提要等，或者我可以使用任何我希望的 XML？

谢谢并恭祝安康

杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T05:52:08.717

只要您不是特别想制作一个 RSS 阅读器应用程序，任何格式良好的有效 XML 都可以解决问题。NSXMLParser 类可以处理任何有效的 XML。但是，如果你想制作一个 RSS 阅读器应用程序，输入需要是有效的 RSS/Atom 提要才能符合这些标准——在这种情况下，你可以在你的应用程序中使用[RSS 解析器库](http://github.com/H2CO3/RSSKit)。

# c# - 如何在 C# 中自动创建子类？

> ID：12233622
> 
> 赞同：0
> 
> 时间：2012-09-02T05:21:49.707
> 
> 标签：c#, oop, composition

我有以下代码：

```
public class Page {
    public string FilePath { get; set; }
    public int RoleNumber { get; set; }
    public class Navigation {
        public string Menu { get; set; }
        public string Breadcrumbs { get; set; }
    }
} 
```

每次创建 Page 类的新实例时，我总是需要 Navigation 类。有没有办法自动创建导航类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T05:25:32.523

看起来在这种情况下最好使用继承。您不想陷入冗余代码的情况。

```
public class Navigation {
    public string Menu { get; set; }
    public string Breadcrumbs { get; set; }
}

public class Page : Navigation {
    public string FilePath { get; set; }
    public int RoleNumber { get; set; }    
} 
```

或者，您可以实例化`Navigation`in`Page`的构造函数的实例：

```
public class Page {
    public Navigation PageNavigation { get; private set; }
    public string FilePath { get; set; }
    public int RoleNumber { get; set; }    

    public Page() {
        PageNavigation = new Navigation();
    }

    public class Navigation {
        public string Menu { get; set; }
        public string Breadcrumbs { get; set; }
    }
} 
```

# android - 手机关机时的AlarmManager - ANDROID

> ID：12233623
> 
> 赞同：7
> 
> 时间：2012-09-02T05:22:22.737
> 
> 标签：android, alarmmanager, android-pendingintent, android-alarms

我正在做一个警报系统但是当手机关闭时我有一个问题..警报不起作用..

我将 de alarm 设置如下：

```
 public void doIntents(Context context, long milis, Tratam trat){
    cal=Calendar.getInstance();
    alarmManager = (AlarmManager) context.getSystemService(Service.ALARM_SERVICE);

    cal.setTimeInMillis(milis);
    Intent intent = new Intent(context, OnAlarmReceiver.class);

    pendingIntent = PendingIntent.getBroadcast(context, trat.getId(), intent, PendingIntent.FLAG_UPDATE_CURRENT);
    alarmManager.set(AlarmManager.RTC_WAKEUP,milis ,pendingIntent);

} 
```

手机开机后闹钟正常..

我能做些什么？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T05:31:59.177

是的，问题是手机重新启动时您的应用程序没有运行。您需要注册一个可以接收 BOOT_COMPLETED 消息的 BroadcastReceiver，以便在手机重启时接收消息。然后在 BroadcastReceiver 中，您可以重新安排这些警报或其他什么。但我不认为你可以做任何事情来让你的闹钟在手机关机时触发..（例如让手机开机）

```
<receiver android:name="MyBootReceiver"
        android:enabled="true"
        android:exported="true"
        android:label="BootReceiver">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED"></action>

        </intent-filter>
    </receiver> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-10T20:49:47.083

当手机关闭并重新启动时，警报会被清除，但您可以使用可以接收 BOOT_COMPLETED 的 BroadcastReceiver 启动警报

```
In Manifest.xml:

 <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
  <application ...>
 <receiver android:name="com.example.receiver.AlarmMonitorReceiver"
              android:enabled="true"
              android:permission="android.permission.RECEIVE_BOOT_COMPLETED">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED"/>
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </receiver>
</application> 
```

爪哇：

```
public class AlarmMonitorReceiver extends BroadcastReceiver{
  public void onReceive(Context context,Intent intent) { 
    if (intent.getAction().equals("android.intent.action.BOOT_COMPLETED")) {
      AlarmManager alarmMgr = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE); 
      Intent intentAlarm = new Intent(context, ExampleReceiver.class); 
      PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intentAlarm, 0);
      Calendar time = Calendar.getInstance();
      time.setTimeInMillis(System.currentTimeMillis());
      time.add(Calendar.SECOND, 10);
      alarmMgr.setRepeating(AlarmManager.RTC_WAKEUP, time.getTimeInMillis(),10000,pendingIntent);         
    }  

  } 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-01-29T15:30:28.087

您可以使用以下内容：

```
private val ACTION_SET_POWEROFF_ALARM = "org.codeaurora.poweroffalarm.action.SET_ALARM"
private val ACTION_CANCEL_POWEROFF_ALARM = "org.codeaurora.poweroffalarm.action.CANCEL_ALARM"
private val POWER_OFF_ALARM_PACKAGE = "com.qualcomm.qti.poweroffalarm"
private val TIME = "time"

private fun setPowerOffAlarm(context: Context, timeInMillis: Long) {
    val intent = Intent(ACTION_SET_POWEROFF_ALARM)
    intent.addFlags(Intent.FLAG_RECEIVER_FOREGROUND)
    intent.setPackage(POWER_OFF_ALARM_PACKAGE)
    val rightNow = Calendar.getInstance()

    rightNow.set(Calendar.SECOND, 0);
    rightNow.set(Calendar.MILLISECOND, 0);

    intent.putExtra(TIME, rightNow.timeInMillis + timeInMillis)

    context.sendBroadcast(intent)
    Log.i { "PWR STATE: pwr off Alarm is set" }
} 
```

这是从位于以下位置的默认时钟应用程序的 Android 源代码复制而来的：`DeskClock/src/com/android/deskclock/alarms/AlarmStateManager.java`

在源代码中搜索这个函数，看看他们是如何做类似的。我们基本上会向`com.qualcomm.qti.poweroffalarm`包发送一个广播，然后它会像在 DeskClock 应用程序中那样创建一个关机警报。

如果我们查看反编译的源代码，`com.qualcomm.qti.poweroffalarm`我们会看到清单声明如下：

```
 <receiver android:name="com.qualcomm.qti.poweroffalarm.PowerOffAlarmDialog$ShutDownReceiver" android:permission="org.codeaurora.permission.POWER_OFF_ALARM">
        <intent-filter>
            <action android:name="org.codeaurora.poweroffalarm.action.ALARM_POWER_OFF"/>
        </intent-filter>
    </receiver> 
```

这意味着我们还需要 qcom 包的此权限才能接受广播的意图。因此，我们将其设置在 AndroidManifest.xml 中：

```
<uses-permission android:name="org.codeaurora.permission.POWER_OFF_ALARM" /> 
```

然后也请求它：

```
 private val PERMISSION_POWER_OFF_ALARM = "org.codeaurora.permission.POWER_OFF_ALARM"

private val CODE_FOR_ALARM_PERMISSION = 1

        if (ContextCompat.checkSelfPermission(this, PERMISSION_POWER_OFF_ALARM)
        != PackageManager.PERMISSION_GRANTED) {
        ActivityCompat.requestPermissions(this,
            arrayOf(PERMISSION_POWER_OFF_ALARM), CODE_FOR_ALARM_PERMISSION);
    } 
```

最后我们要调用 SetAlarm 函数。我们指定从现在到我们希望闹钟响起的时间（以毫秒为单位）。例如在两分钟内：

```
 setPowerOffAlarm(context, 120000) 
```

# django - 如何在 OS X Server 上部署 django 应用程序？

> ID：12233628
> 
> 赞同：6
> 
> 时间：2012-09-02T05:23:01.880
> 
> 标签：django, macos, apache2, mod-wsgi

如何在 OS X Server 2.0 上部署 Django 应用程序而不使用自制软件或与 OS X 10.8.1 附带的不同风格的 python？我在 Django 应用程序中使用 cocoa 绑定，但无法在我的桌面机器（运行 OS X 10.8.1）上使用自制软件；因此请求在系统安装的 Python 版本上部署应用程序。

我有以下 OS X Server 环境，已安装以下内容：

*   OS X 10.8.1
*   OS X 服务器 2.0
*   Python 2.7.2
*   阿帕奇 2.2.22

Django 1.4.1 是使用以下命令安装的：

```
sudo easy_install django 
```

我的第一次尝试是部署一个空网站，一旦成功，就部署一个真正的应用程序以用于生产。该项目是`/Library/Server/Web/Data/WebApps/mysite/`使用以下命令创建的

```
django-admin.py startproject mysite 
```

我使用以下命令运行应用程序。它只是确认应用程序已启动并正在运行。这是标准的“它奏效了！” 首次创建项目时的页面。

```
python manage.py runserver 8080 
```

然后我创建了一个`/Library/Server/Web/Config/apache2/httpd_mysite.conf`包含以下内容的文件：

```
WSGIScriptAlias /mysite /Library/Server/Web/Data/WebApps/mysite/mysite/wsgi.py 
```

我进一步创建了一个`/Library/Server/Web/Config/apache2/webapps/com.example.mysite.wsgi.plist`包含以下内容的文件：

```
<?xml version="1.0" encoding="UTF-7"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
        <key>name</key>
        <string>com.example.mysite.wsgi</string>
        <key>displayName</key>
        <string>Python "My Site" app</string>
        <key>launchKeys</key>
        <array/>
        <key>proxies</key>
        <dict/>
        <key>installationIndicatorFilePath</key>
        <string>/Library/Server/Web/Data/WebApps/mysite/mysite/wsgi.py</string>
        <key>includeFiles</key>
        <array>
                <string>/Library/Server/Web/Config/apache2/httpd_mysite.conf</string>
        </array>
        <key>requiredModuleNames</key>
        <array>
                <string>wsgi_module</string>
        </array>
</dict>
</plist> 
```

该文件`com.example.mysite.wsgi.plist`改编自`com.apple.webapp.wsgi.plist`并`httpd_mysite.conf`改编自`httpd_wsgi.conf`. 当通过服务器管理器配置时，这两个文件都用于成功运行“独立”python 应用程序。

然后我使用服务器管理器创建了一个站点，确认我的应用程序在 Web 应用程序列表中。但是，当我访问[http://example.com/mysite](http://example.com/mysite)时，我收到 500 错误。日志包含以下条目（出于隐私原因，IP 地址更改为 1.2.3.4）：

```
[Sat Sep 01 21:49:17 2012] [warn] Init: Name-based SSL virtual hosts only work for clients with TLS server name indication support (RFC 4366)
[Sat Sep 01 21:49:17 2012] [notice] Apache/2.2.22 (Unix) PHP/5.3.13 with Suhosin-Patch mod_wsgi/3.3 Python/2.7.2 mod_fastcgi/2.4.6 mod_ssl/2.2.22 OpenSSL/0.9.8r DAV/2 configured -- resuming normal operations
[Sat Sep 01 21:50:13 2012] [error] [client 1.2.3.4] (8)Exec format error: exec of '/Library/Server/Web/Data/WebApps/mysite/mysite/wsgi.py' failed
[Sat Sep 01 21:50:13 2012] [error] [client 1.2.3.4] Premature end of script headers: wsgi.py 
```

似乎不是 WSGI 模块正在处理请求，而是可以使用 FCGI 处理请求。但是，日志表明`mod_wsgi/3.3`已加载。

当我创建一个如下所示的标准 Python 应用程序时：

```
def application(environ, start_response):
    status = '200 OK'
    output = 'Hello World!'

    response_headers = [('Content-type', 'text/plain'),
                        ('Content-Length', str(len(output)))]
    start_response(status, response_headers)

    return [output] 
```

并更新文件以指向`/Library/Server/Web/Data/WebApps/helloworld.wsgi`而不是`/Library/Server/Web/Data/WebApps/mysite/mysite/wsgi.py`显示“Hello World”。因此，我假设 wsgi 已正确配置并且能够执行应用程序，并且我的设置有其他问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:11:27.933

我发现自己很难将我的 macports django 迁移到 Mountain Lion Server 10.8.2，出于某种原因，这里的答案帮助我记住了 mod_wsgi.so 的差异。

我用我的/opt/local/apache2/modules/mod_wsgi.so 覆盖了/Applications/Server.app/Contents/ServerRoot/usr/libexec/apache2/mod_wsgi.so。

我希望完全删除 MacPorts apache2，但我认为我最好保留它。目前我仍然更喜欢 MacPorts Python，因为它更容易与数字密集型软件包保持同步。

是的，还要确保将 wsgi.py 更改为 wsgi.wsgi。

我将 httpd_wsgi.conf 复制到 httpd_mywsgi.conf；我将 django.wsgi 添加到 /Library/Server/Web/Data/WebApps。
在 /Library/Server/Web/Config/apache2/webapps 中，我复制了 com.apple.webapp.wsgi.plist。

看起来您选择了相同的 plist 模式。

但是，我仍在研究我的静态内容，我认为 mod_wsgi.so 发现可以帮助其他人从 MacPorts 迁移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T00:47:32.403

一些带有发行版的 Apache 配置将 .py 映射到 CGI 或 FASTCGI，这将与 mod_wsgi 冲突。这就是为什么 mod_wsgi 建议使用 .wsgi 扩展名的原因。因此，将“wsgi.py”重命名为“site.wsgi”，然后在 WSGIScriptAlias 中使用“site.wsgi”。

顺便说一句，您能否确认 Mountain Lion 服务器附带了一个预编译的 mod_wsgi.so。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-04T00:20:34.147

两件事情：

1.  如果你想使用 WSGIScriptAlias 指令，你需要有 mod_wsgi apache 模块。我没有 OS X 服务器，但据我所知，山狮标准的 /usr/libexec/apache2 文件夹中不存在该模块。你必须从[这里](http://code.google.com/p/modwsgi/)下载它。不知道命令行工具是否包含在 OS X 服务器中。我确实需要安装 X 代码才能将它们安装到标准版本上。似乎有一些[关于如何在 macos x 上安装它的说明](http://code.google.com/p/modwsgi/wiki/InstallationOnMacOSX)

2.  看看[Homebrew](https://github.com/mxcl/homebrew)。这是向 Mac 添加额外软件的绝佳方式。你可以安装最新的 python、nginx 和 uwsgi。Nginx 和 uwsgi 是部署 django 应用程序的好方法。我发现它比 mod_wsgi 更灵活、更高效（第二点是非常主观的）。

祝你好运

# python - Python乘法错误

> ID：12233630
> 
> 赞同：-5
> 
> 时间：2012-09-02T05:23:16.187
> 
> 标签：python

我制作了一个程序，其中包含一个整数的单行输入，打印一个该大小的星号三角形。但是我的程序不是这样工作的。所以你能看看我的代码，请确定我的错误。谢谢

```
line = int(raw_input("Number of lines: "))
a = line * '*'
print a 
```

这是我想要产生的输出：

```
Number of lines: 5
*
**
***
****
***** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T05:45:49.583

由于这是自我教育而不是实际的课堂作业，因此最好用代码和详细说明您做错了什么来解释。

你大部分时间都在那里，因为你有输入和输出一定数量星号的方法。您的问题是您只打印了具有*最大星号数量的**一行*。

 *您需要从 1 循环*到该数字，*每次输出相同类型且长度增加的行，例如：

```
line = int (raw_input ("Number of lines: "))
for i in range (1, line + 1):
    print i * '*' 
```

使用此代码（输入 5），您基本上循环`i`包含按顺序包含的变量`{1, 2, 3, 4, 5}`（`range`在低端包含，在高端排除，因此是`line + 1`）。

在该循环中，您输出该数量的星号，为您提供三角形：

```
pax> python testprog.py
Number of lines: 5
*
**
***
****
***** 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T05:55:33.630

既然你这样做是为了学习 Python，我将添加以下内容：

循环很容易弄清楚，但大多数人忘记的是确保您从用户那里得到正确的输入！

您向用户询问了一个号码。对？
如果用户通过按下后一个“a”来回复会发生什么？*

# android - 操作系统重启后是否可以立即运行我的 Android 应用程序？

> ID：12233632
> 
> 赞同：1
> 
> 时间：2012-09-02T05:23:30.473
> 
> 标签：android

> **可能重复：**
> [在 Android 手机启动时自动运行应用程序](https://stackoverflow.com/questions/10613538/automatically-run-an-application-on-android-phone-startup)

我开发了一个 Android 应用程序（不适用于手机）。操作系统重启后是否可以立即运行我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T05:29:44.127

那么你可以在你的清单中声明一个 BroadcastReceiver 来接收 BOOT_COMPLETED 广播，然后在你的 BroadcastReceiver 中响应它并做你喜欢的事情。

```
<receiver android:name="MyBootReceiver"
        android:enabled="true"
        android:exported="true"
        android:label="BootReceiver">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED"></action>

        </intent-filter>
    </receiver> 
```

# c++ - 如何将项目依赖项/引用从一个项目继承到 Visual Studio 中的依赖项目

> ID：12233634
> 
> 赞同：6
> 
> 时间：2012-09-02T05:23:37.927
> 
> 标签：c++, visual-studio-2010, boost, dependencies, dependency-management

我有项目 1，它依赖于 Boost 和 GLM。对于 Boost 和 GLM，我指定了“附加包含目录”来引用每个的 C++ 文件。项目 1 被创建为静态库项目。当我构建项目 1 时，一切正常。项目 2 通过参考管理器引用项目 1，但是当我构建项目 2 时，我得到

`fatal error C1083: Cannot open include file: 'boost/something/etc.`

对于*项目 1*中的文件。为什么我在构建项目 2 时会收到有关项目 1 的错误？项目 1 还使用了 Boost 中的 regex 库，它必须内置到`.lib`使用前内置。如何让我的 Project 1 静态库将内置的 Boost 正则表达式库和 GLM 包含文件合并到其中？仅供参考，项目 2 是项目 1 的测试项目。我想要这样的东西：

（Boost regex lib + GLM 包括）--> Project 1 ==> Project_1.lib

（Boost 单元测试库 + Project_1.lib）--> 项目 2 ==> Project_2.exe

`-->`表示依赖项/引用并`==>`表示输出。

这可能吗？当我在这上面转动轮子时，我得到的编译错误和链接器错误比我能数的还要多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T15:56:22.753

这可能是因为您的项目 2 中的某些代码（头文件和/或实现）包含来自项目 1 的头文件，这反过来又包含了项目 2 的包含路径中没有的外部库头文件。最终效果是展开所有`#include`s 后，您的 Project 2 源文件将有一行内容如下：`#include <boost/something/etc>`它无法展开，因为它不在 Project 2 的包含搜索路径中。

无论您是否已将这些外部库静态编译到您的`project1.lib`.

如果不是问题，只需将外部库包含路径添加到项目 2 的 VC++ 目录 > 包含目录。

解决此问题的一种方法是将尽可能多的外部库包含在 Project 1 标头之外，并通过使用[PIMPL](https://stackoverflow.com/questions/8972588/is-the-pimpl-idiom-really-used-in-practice)模式和前向声明的组合来隐藏它们。但是对于诸如仅标头或模板重的库之类的东西，我相信您将需要包含这些标头路径，除非您封装功能或将实现隐藏在 Project 1 类/接口后面，否则无法绕过它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T00:31:11.273

@PreetKukreti 的答案也是正确的，在你修复你的头文件之后，还有一个对外部库（boost 和 GLM）的依赖，因为默认情况下静态库不会与外部依赖项链接。这是因为我将在这里解释一个简单的错误案例：
您使用`strlen`CRT 中的一个函数，并且您想将它与您的 .lib 输出合并，然后`strlen`将合并到您的 .lib 中，然后在您的测试项目中（ .exe）你`strlen`再次使用，并且你已经知道在静态库中每件事都是公开的，所以当你链接到 CRT 和你的 .lib 时，你必须实现，`strlen`这将产生一个链接器错误。
因此，默认情况下，VisualStudio 不会将库依赖项链接到 .lib 文件中，除非您告诉它这样做（解决方案属性->图书馆员->链接库依赖项），除非您真的知道自己在那里做什么，否则不应将其设置为是并接受你行为的后果！！。
因此，无论如何，最好将外部库（boost & GLM）的路径放入项目 2 的路径中，或者将项目 1 构建为仅公开某些指示对象的 DLL，并尝试使用来自@PreetKukreti 的答案并移动您不必要的包含文件到实现（.cpp）文件中。

# java - 添加多行注释时如何在 Eclipse 中禁用自动星号（插入星号）？

> ID：12233636
> 
> 赞同：20
> 
> 时间：2012-09-02T05:24:30.767
> 
> 标签：java, eclipse, comments

在 Eclipse 中添加多行注释并设置格式（Ctrl+Shift+F）时，它会自动在注释块内的每个新行的开头放置一个星号 (*)。

```
/*
 * this is my comment
 */ 
```

这种行为的原因是什么？

我怎样才能禁用它？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-07T13:30:24.213

在 Eclipse 4.2 及更高版本中，解决方案是：*Window -> Preferences -> Java -> Code Style -> Formatter ->*

**$profileName** *-> Edit... (* ) -> comments ->* **un-check** *[ ] Enable block comment formatting*。

请注意，作者要求提供块注释 ( `/*`) 而不是 Javadoc 注释 ( `/**`)。

要抑制 Javadoc 注释**的前导 *，请取消选中** *[] 启用 Javadoc 注释格式*

* * *

(*) 如果 $profileName -> Edit... 不起作用，请使用“New...”创建一个新模板。

[![查看以黄色突出显示的图像](../Images/c882c257a87f0dfc5bd38a56a7e44e8e.png)](https://i.stack.imgur.com/9DBl6.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-02T05:32:19.293

这是标准的[javadoc 格式](http://en.wikipedia.org/wiki/Javadoc)。eclipse 中的格式化选项在您的项目-> 属性-> Java 代码样式-> 格式化程序-> 编辑-> 注释选项卡上单击鼠标右键，但我没有看到禁用此特定行为的选项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T13:59:05.180

转到`Tools/Options/Editor/Formatting` 并选择`Language = Java`，`Category = Comments`然后取消选中`Add Leading Star`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-04T06:45:36.683

去`Window/Preferences/Code Style/Formatter`。在 Active Profile 而不是**Eclipse[Built-in] 中**创建一个新的配置文件并单击编辑。

单击“ **`Comments`**”下拉菜单并取消选中：

1.  启用 Javadoc 注释格式。
2.  启用块注释格式。
3.  启用行注释格式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T07:12:19.293

请不要那样做。

自 C 编程语言诞生之日起，这就是编写块注释的标准方式。像这样打破约定会使其他人（包括自动化工具）更难阅读您的代码。

如果您需要快速注释/取消注释 Java 代码，您可以尝试使用`Ctrl+/`快捷方式。它将使用单行注释 ( `//`) 注释掉当前行或任意数量的标记代码行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-30T03:13:58.887

在 eclipse 4.2.1 中，我使用了 formatter off / on 功能，请确保不要将 formatter on 标记与注释标记放在同一行，否则星星的噩梦将会回来。

```
// @formatter:off
/*
Eclipse your * are messing up my comments big time and If I used you
more often I'd put a patch together to add back in the "Add Leading Star" option 
*/
// @formatter:on 
```

必须在 Eclipse 首选项中“打开”开/关功能：Java > Code Style > Formatter。单击“编辑”按钮，“关闭/打开标签”，选中“启用关闭/打开标签”。

从

[如何为 Java 代码的某些部分关闭 Eclipse 代码格式化程序？](https://stackoverflow.com/questions/1820908/how-to-turn-off-the-eclipse-code-formatter-for-certain-sections-of-java-code)

还。我将标签更改为 //off //on 以便于使用

类似的帖子是 [如何在 Eclipse 中的多行注释中关闭“*”？](https://stackoverflow.com/questions/1641748/how-do-i-turn-off-in-multi-line-comments-in-eclipse)

# sql-server - Sql Server 2008 中的数据库邮件不起作用

> ID：12233638
> 
> 赞同：1
> 
> 时间：2012-09-02T05:25:25.593
> 
> 标签：sql-server, sql-server-2008, database-mail

我第一次使用 SQL Server 2008 的数据库邮件功能发送邮件。

我按照[示例中的步骤操作](http://blog.sqlauthority.com/2008/08/23/sql-server-2008-configure-database-mail-send-email-from-sql-database/)

一切似乎都很好。发送状态

```
SELECT * FROM sysmail_allitems 
```

已发送。

但是收件人没有收到任何邮件..

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:54:20.893

我可以想到以下一种： 1.设置不正确。2\. 杀毒软件或防火墙阻止了你的邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T14:44:27.870

SqlServer 中有一个名为 DatabaseMailUserRole 的角色，您的用户必须有权访问它才能通过 Sql Server 中的数据库邮件发送邮件

查看哪些用户具有访问权限：EXEC msdb.sys.sp_helprolemember 'DatabaseMailUserRole';

要将用户添加到此必需角色：EXEC msdb.sys.sp_addrolemember @rolename = 'DatabaseMailUserRole' ,@membername = 'userName';

然后执行命令发送邮件。

# xslt - 使用 XSLT 重构节点

> ID：12233641
> 
> 赞同：1
> 
> 时间：2012-09-02T05:26:29.607
> 
> 标签：xslt

我的输入 xml 没有正确分组的节点很少。它们只是串行方式。我需要创建一个父节点并使用 XSLT 将它们放在以下结构中......我正在尝试没有任何运气。反过来似乎很容易。任何人都可以帮助快速 XSLT。

感谢您的时间

**输入.XML**

```
<root>
 <info>
  <name>papa</name>
  <age>10</age>

   <groupkey>1</groupkey>
   <groupkey>2</groupkey>
   <groupkey>2</groupkey>

   <groupname>n1</groupname>
   <groupname>n2</groupname>
   <groupname>n3</groupname>

 </info>
</root> 
```

**愿望输出**

```
<root>
 <info>
  <name>papa</name>
  <age>10</age>

     <groups>

       <group>
          <groupkey>1</groupkey>
          <groupname>n1</groupname>
       </group>

      <group>
          <groupkey>2</groupkey>
          <groupname>n2</groupname>
       </group>

       <group>
          <groupkey>3</groupkey>
          <groupname>n3</groupname>
       </group>

     </groups>

 </info>
</root> 
```

# 添加以下内容

非常感谢诺瓦切夫。我测试了它，正是我想要的。它也是通用的。
最后一个问题请。如果我有另一个名为地址的节点，如下所示，我将如何合并它。请帮忙。谢谢你的时间。

# 输入

```
<root>
 <info>
  <name>papa</name>
  <age>10</age>

    <groupkey>1</groupkey>
    <groupkey>2</groupkey>
    <groupkey>3</groupkey>

    <groupname>n1</groupname>
    <groupname>n2</groupname>
    <groupname>n3</groupname>

    <addresskey>1</addresskey>
    <addresskey>2</addresskey>
    <addresskey>3</addresskey>

    <addressname>a1</addressname>
    <addressname>a2</addressname>
    <addressname>a3</addressname>  

 </info>
</root> 
```

# 输出

```
<root>
 <info>
  <name>papa</name>
  <age>10</age>

     <groups>

       <group>
          <groupkey>1</groupkey>
          <groupname>n1</groupname>
       </group>

      <group>
          <groupkey>2</groupkey>
          <groupname>n2</groupname>
       </group>

       <group>
          <groupkey>3</groupkey>
          <groupname>n3</groupname>
       </group>

     </groups>

      <addresses>

            <address>
               <addresskey>1</addresskey>
               <addressname>a1</addressname>
            </address>

           <address>
               <addresskey>2</addresskey>
               <addressname>a2</addressname>
            </address>

            <address>
               <addresskey>3</addresskey>
               <addressname>a3</addressname>
            </address>

     </addresses>

 </info>
</root> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T06:06:59.617

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*" name="identity">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="age">
  <xsl:call-template name="identity"/>
  <groups>
    <xsl:apply-templates select="following-sibling::groupkey" mode="grouping"/>
  </groups>
 </xsl:template>

 <xsl:template match="groupkey" mode="grouping">
  <group>
    <xsl:variable name="vPos" select="position()"/>
    <xsl:call-template name="identity"/>
    <xsl:apply-templates mode="grouping" select="../groupname[$vPos]"/>
  </group>
 </xsl:template>

 <xsl:template match="groupname" mode="grouping">
   <xsl:call-template name="identity"/>
 </xsl:template>

 <xsl:template match="groupkey|groupname"/>
</xsl:stylesheet> 
```

**当应用于提供的 XML 文档时**（带有更正的 3rd `groupkey`）：

```
<root>
 <info>
  <name>papa</name>
  <age>10</age>

   <groupkey>1</groupkey>
   <groupkey>2</groupkey>
   <groupkey>3</groupkey>

   <groupname>n1</groupname>
   <groupname>n2</groupname>
   <groupname>n3</groupname>

 </info>
</root> 
```

**产生想要的正确结果**：

```
<root>
   <info>
      <name>papa</name>
      <age>10</age>
      <groups>
         <group>
            <groupkey>1</groupkey>
            <groupname>n1</groupname>
         </group>
         <group>
            <groupkey>2</groupkey>
            <groupname>n2</groupname>
         </group>
         <group>
            <groupkey>3</groupkey>
            <groupname>n3</groupname>
         </group>
      </groups>
   </info>
</root> 
```

**更新**：

与此同时，OP 通过添加第二类数据（地址信息）存在于 XML 文档中并且必须以类似方式分组的要求来更新问题。

**这是更新的解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*" name="identity">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="age">
  <xsl:call-template name="identity"/>
  <groups>
    <xsl:apply-templates select="following-sibling::groupkey" mode="grouping"/>
  </groups>
  <addresses>
    <xsl:apply-templates select="following-sibling::addresskey" mode="grouping"/>
  </addresses>

 </xsl:template>

 <xsl:template match="groupkey" mode="grouping">
  <group>
    <xsl:variable name="vPos" select="position()"/>
    <xsl:call-template name="identity"/>
    <xsl:apply-templates mode="grouping" select="../groupname[$vPos]"/>
  </group>
 </xsl:template>

 <xsl:template match="addresskey" mode="grouping">
  <address>
    <xsl:variable name="vPos" select="position()"/>
    <xsl:call-template name="identity"/>
    <xsl:apply-templates mode="grouping" select="../addressname[$vPos]"/>
  </address>
 </xsl:template>

 <xsl:template match="groupname|addressname" mode="grouping">
   <xsl:call-template name="identity"/>
 </xsl:template>

 <xsl:template match="groupkey|groupname|addresskey|addressname"/>
</xsl:stylesheet> 
```

**当此转换应用于新指定的 XML 文档时**：

```
<root>
 <info>
  <name>papa</name>
  <age>10</age>

    <groupkey>1</groupkey>
    <groupkey>2</groupkey>
    <groupkey>3</groupkey>

    <groupname>n1</groupname>
    <groupname>n2</groupname>
    <groupname>n3</groupname>

    <addresskey>1</addresskey>
    <addresskey>2</addresskey>
    <addresskey>3</addresskey>

    <addressname>a1</addressname>
    <addressname>a2</addressname>
    <addressname>a3</addressname>

 </info>
</root> 
```

**再次产生所需的正确结果：**

```
<root>
   <info>
      <name>papa</name>
      <age>10</age>
      <groups>
         <group>
            <groupkey>1</groupkey>
            <groupname>n1</groupname>
         </group>
         <group>
            <groupkey>2</groupkey>
            <groupname>n2</groupname>
         </group>
         <group>
            <groupkey>3</groupkey>
            <groupname>n3</groupname>
         </group>
      </groups>
      <addresses>
         <address>
            <addresskey>1</addresskey>
            <addressname>a1</addressname>
         </address>
         <address>
            <addresskey>2</addresskey>
            <addressname>a2</addressname>
         </address>
         <address>
            <addresskey>3</addresskey>
            <addressname>a3</addressname>
         </address>
      </addresses>
   </info>
</root> 
```

# c++ - 什么是为 osx 制作 C++ GUI 的好程序

> ID：12233645
> 
> 赞同：-4
> 
> 时间：2012-09-02T05:27:16.883
> 
> 标签：c++, c, macos, user-interface

> **可能重复：**
> [使用 c++ 在 Mac OS X 上编写 GUI 应用程序](https://stackoverflow.com/questions/11055249/writing-gui-applicatins-on-mac-os-x-with-c)

我正在寻找一个易于使用的程序/框架来在 mac 上制作 c++ GUI。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T05:32:58.397

Qt 是一个非常流行的 C++ GUI 框架，针对 Mac（以及 Windows 和 Linux 和移动设备）

[http://qt.nokia.com/](http://qt.nokia.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T05:40:58.783

你可以试试 JUCE：

[http://www.rawmaterialsoftware.com/juce.php](http://www.rawmaterialsoftware.com/juce.php)

# ajax - 如何根据国家组合框中的国家选择动态生成组合框？

> ID：12233647
> 
> 赞同：0
> 
> 时间：2012-09-02T05:27:37.237
> 
> 标签：ajax, autocomplete, struts2

我有一种从数据库中获取国家/地区名称列表的方法，以及一种为任何提供的国家/地区获取州名的方法。但不确定如何链接国家和州。

```
 <sx:autocompleter list="countrynames" name="employee.countryname" value="%{employee.countryname}" label="%{getText('label.countryname')}"/>

    <sx:autocompleter list="statenames" name="employee.statename" value="%{employee.statename}" label="%{getText('label.statename')}"/> 
```

我有名称为“countrynames”和类似“statenames”的数组列表，但不确定如何根据在上述国家/地区列表中选择的国家/地区动态生成州名，以及如何将获取的国家/地区名称连接到明确调用的方法该国的州名单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T06:54:52.530

我想给你一些建议

1.  Struts2 Dojo 插件不再处于开发阶段并且已被弃用，因此我建议您不要使用它，否则您可以将普通 DOJO 与 struts2 一起使用。

有一个 Jquery 插件正在积极使用中，它将为您提供您正在寻找的大部分功能，请查看[A_simple_Doubleselect_with_Topics](http://code.google.com/p/struts2-jquery/wiki/SelectTag#A_simple_Doubleselect_with_Topics)。

我不是这个插件的忠实拥护者，因为它在实现上限制了我们很多，尽管它为我们提供了很多好的小部件和功能

我的建议是使用以下方法

1.  添加[Struts2-JSON](http://struts.apache.org/2.2.3/docs/json-plugin.html)插件，以便从 action 中发回 JSOn 数据。
2.  用户使用简单的 Jquery 将数据发送到服务器并取回 JSON，并在 Jquery JSON 解析技术的帮助下填写第二个下拉列表。

将 on-change 事件添加到您的第一个下拉菜单并创建一个函数，您将在其中填充第二个下拉菜单

```
function fill statenames(countryID)
var formInput='country='+countryID;     
$.getJSON('search/getStateNames',formInput,function(data) {
    $("#employee.statename  option:first").val("-1").text("Please select state");
    $('.result').html('' + data.states + '');
    $.each(data.states ,function(index, value){
    var stateid= document.getElementById("state");
    var option=new Option(value,value);
   try{
     stateid.add(option);
    }
    catch(e){
      stateid.appendChild(option);
   }
});
            }); 
```

## 动作类

```
public class StateListAction extends ActionSupport{

   private String country;
   // getter and setter
  private List<String> states;
   //getter and setter

  public String getStateList(){
    states=fillStatebasedonCountry(country);
    return SUCCESS;
  }
} 
```

# windows - 与 x86_64 Windows 调用约定混淆

> ID：12233648
> 
> 赞同：1
> 
> 时间：2012-09-02T05:27:50.517
> 
> 标签：windows, winapi, assembly, 64-bit, x86-64

平台是 x86_64 Windows 7。

这是C源代码：

```
#include<windows.h>
int main(void){
    asm("int3");
    CreateWindowEx(0,NULL,NULL,0,5,6,7,8,NULL,NULL,NULL,NULL);
    return(0);
} 
```

编译为以下程序集：

```
push rbp
mov rbp,rsp
sub rsp,60h
int3
mov qword[rsp+58h],0
mov qword[rsp+50h],0
mov qword[rsp+48h],0
mov qword[rsp+40h],0
mov qword[rsp+38h],8
mov qword[rsp+30h],7
mov qword[rsp+28h],6
mov qword[rsp+20h],5
mov r9d,0
mov r8d,0
mov edx,0
mov ecx,0
call CreateWindowEx
mov eax,0
add rsp,60h
pop rbp
ret 
```

从概念上讲，这就是我在不同执行点的堆栈（地址是任意的）：

```
90 -rsp-

90 old rbp
88 -rsp-

90 old rbp
88 -rsp- -rbp-

90 old rbp
88 -rbp- (never used?)
80 (rsp+58h)
78 (rsp+50h)
70 (rsp+48h)
68 (rsp+40h)
60 (rsp+38h)
58 (rsp+30h)
50 (rsp+28h)
48 (rsp+20h)
40 (shadow)
38 (shadow)
30 (shadow)
28 -rsp- (shadow) (will contain call instruction's return pointer...) 
```

如您所见，根据 C 程序的编译输出，堆栈存在问题。首先，有 8 个字节永远不会被使用，并且 8 个字节的影子空间将被返回指针的调用指令覆盖。似乎所有内容都比应有的向下移动了 8 个字节，因为如果向上移动 8 个字节就可以了。但是 API 调用按预期工作，这是否只是对 Microsoft 调用约定实现的忽视？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T09:43:06.647

当某些东西被压入堆栈时，新项目不会`rsp`在指令开始时指向指向的位置 -`rsp`在存储新项目之前递减（即，`rsp`指向的堆栈位置正在使用中）。

因此，如果`rsp ==0x90`在启动该功能时，旧的`rbp`将位于地址`0x88`（并将`rbp`指向该地址）。

然后当`rsp == 0x28`和`call`指令执行时，返回地址将放在 address 中`0x20`，而不是`0x28`。

# html - CSS将元素的高度设置为自动高度的百分比

> ID：12233654
> 
> 赞同：2
> 
> 时间：2012-09-02T05:29:05.217
> 
> 标签：html, css, input, height

我正在寻找一种在 CSS 中将文本输入的高度设置为正常高度的百分比的方法，如果没有声明高度，它将自然地给定 font-family/font-sizes。我*不是*在寻找它所在容器高度的百分比。就像这样：
CSS：

```
#container {
    height: 100%;
    width: 100%;
}
input {
    width: 100%;
    background: orange;
    height: [I want this 150% of the height normally assigned to the element]
    font-family: inherit;
    font-size: inherit;
}
#results {
    width: 100%;
    background: pink;
    height: auto;
    height: 100%;
} 
```

HTML：

```
<div id="container">
<input type="text">
<div id="results"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T05:41:11.047

如果 jQuery 在起作用，您可以执行以下操作：

`$('input').css('height',parseFloat($('input').css('height'))*1.5)`

工作示例：

[http://jsfiddle.net/ghxh8/](http://jsfiddle.net/ghxh8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T05:59:08.900

使用`em`：

```
(...)
height: 1.5em;
(...) 
```

### 编辑

永远[记住](http://www.w3.org/TR/CSS2/syndata.html#numbers)：

4.3.1 整数和实数

> 某些值类型可能具有整数值（用 表示）或实数值（用 表示）。实数和整数仅以十进制表示法指定。An由一个或多个数字“0”到“9”组成。A 可以是 ，**也可以是零个或多个数字，后跟一个点 (.)**，后跟一个或多个数字。整数和实数前面都可以用“-”或“+”表示符号。-0 相当于 0，不是负数。
> 
> 请注意，许多允许整数或实数作为值的属性实际上将值限制在某个范围内，通常是非负值。

`1,5em`垃圾也是，对不起！

### 编辑

您的评论`em`是正确的，[请参阅](http://www.w3.org/TR/CSS2/syndata.html#length-units)：

> 'em' 单位等于使用它的元素的 'font-size' 属性的计算值。例外情况是当 'em' 出现在 'font-size' 属性本身的值中时，在这种情况下它指的是父元素的字体大小。它可用于垂直或水平测量。（这个单位有时也被称为印刷文本中的四边形。）

# java - 如何在java中设置mp3文件的专辑封面

> ID：12233661
> 
> 赞同：0
> 
> 时间：2012-09-02T05:30:20.453
> 
> 标签：java, android

在我的 Java/Android 音乐播放器中，需要一个功能来设置/更改音乐文件中的专辑封面，直到现在还没有获得任何 api/库，请帮我做这个功能，谢谢，我会感谢所有有效的答案![喜欢这张图片](../Images/3c9f145bd3c806d4b9f09c8e4774df4b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T05:34:58.660

您将需要使用一些 API 来获取与音乐相关的数据。我可以想到 echonest： http: [//developer.echonest.com/](http://developer.echonest.com/)这可以让您获取专辑封面。

# php - 如何在可排序的 jquery 中获取所有值？

> ID：12233666
> 
> 赞同：1
> 
> 时间：2012-09-02T05:31:55.193
> 
> 标签：php, jquery-ui, jquery

jQuery代码

```
 $(function() {
$("#list .sections").sortable({ opacity: 0.5, cursor: 'move',update: function() {

        var order = $(this).sortable("serialize") + '&update=order';

                    $('#form').submit(function()
                    {
                        $.ajax
                        ({
                            type: "POST",
                            url: "update.php",
                            data: order,
                            success: function()
                            {
                            alert(success)
                            }
                        });                        
                    });

    }                                 
    });
}); 
```

HTML 和 PHP 代码

```
 <form action="" method="post" id="form">  
  <div id="list">
    <div class="sections">
    <div id="response"> </div>

      <?php
        include("connection.php");
        $query  = "SELECT * FROM dragdrop ORDER BY listnumber ASC";
        $result = mysql_query($query);
        while($row = mysql_fetch_array($result, MYSQL_ASSOC))
        {
            $id = stripslashes($row['id']);
            $text = stripslashes($row['text']);
        ?>

      <div id="listOrder_<?php echo $id ?>" class="box_inner">
          <div id="section_head">
            <?php echo $text?>  
            <span class="id"><?php echo $id; ?></span>
                            <input type="hidden" name="value" value="need value" />
          </div>
          <div id="section_body">
                            <h2> Drag Me </h2>
          </div>
      </div>
      <?php } ?>

    </div>
          <input type="submit" id="save_element" value="Save element" style="margin-left: 40px" />
        </div>
      </form> 
```

**我的问题是如何通过序列化获取 listOrder_ id 下的所有值？**

我尝试过

```
var value = $('input[name="value"]').val();

$.(value).sortable("serialize"); 
```

但不能让它工作，请帮助我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T06:19:13.373

您不需要使用表单和隐藏字段。

示例标记：

```
<div id="container">
    <span data-name="a"></span>
    <span data-name="b"></span>
    <span data-name="c"></span>
  </div> 
```

脚本：

```
<script>
var obj = {};
$('#container span').each(function(index){
    var name = $(this).data('name');
    obj[index] = [];
    obj[index] = {'name' : name};
});
</script>

$.post('update.php', {'data' : obj}); //update list 
```

如果您只想在每一行中存储一种类型的数据，那么您可以使用一个数组并在循环中推送到它。

# android - 从 AlertDialog 用户输入将 URL 传递到 asynctask，拉 Icy 元数据

> ID：12233677
> 
> 赞同：0
> 
> 时间：2012-09-02T05:34:26.457
> 
> 标签：android, android-asynctask, metadata, android-alertdialog

我有一个 Asynctask 设置来从广播流中提取冰冷的元数据，如果我将 URL 放入代码中效果很好，但我希望 AlertDialog 从用户输入将 URL 传递给 Asynctask。我这样调用 AsyncTask ：

```
MetadataTask1 metadataTask1 = new MetadataTask1();
metadataTask1.execute(uri); 
```

当我将“uri”传递给 Asynctask 时，出现错误，

> “AsyncTask 类型中的方法 execute(URL...) 不适用于参数 (Uri)”

我知道需要一个 URL，但我不知道该怎么做。我对 Android 很陌生，我相信这真的很简单而且很愚蠢。

我在这里发生了两件事：用户输入 URL 启动音乐服务并播放流，并且，相同的用户 URL 应该成为 AsyncTask 中的参数并开始提取冰冷的元数据。就像我说的，如果我在我的代码中手动输入一个 URL，一切都会正常工作，但当然不是这个主意。我的问题是： 1\. 我如何处理用户输入（来自 AlertDialog）......我在哪里将它插入 AsyncTask 以及如何？2\. doInBackground(URL... urls) 中的行呢？我确定这些是错误的：

```
try {
                    streamMeta.setStreamUrl(new URL(
                            "http://sfstream1.somafm.com:8880"));
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
```

3 尝试添加uri时出现Eclipse错误怎么办？

这是我的代码：

```
void showUrlDialog() {

    class MetadataTask1 extends AsyncTask<URL, Void, IcyStreamMeta> {

        @Override
        protected IcyStreamMeta doInBackground(URL... urls)
        {

            try {
                streamMeta.setStreamUrl(new URL(
                        "http://sfstream1.somafm.com:8880")); //I want a variable here from user input
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                streamMeta.refreshMeta();
                Log.e("Retrieving MetaData", "Refreshed Metadata");
            } catch (IOException e) {
                Log.e(MetadataTask1.class.toString(), e.getMessage());
            }
            return streamMeta;
        }

        @Override
        protected void onPostExecute(IcyStreamMeta result) {
            //Toast toast = Toast.makeText(getBaseContext(),
            //      "Electropop and indie dance rock with sparkle and pop.",
            //      Toast.LENGTH_LONG);
            //toast.setGravity(Gravity.BOTTOM, 0, 200);
            //toast.show();

            timer1.schedule(new TimerTask() {
                public void run() {
                    if (timerIsOn1 == true) {
                        try {
                            title_artist = streamMeta.getArtist();
                            title_artist2 = streamMeta.getTitle();
                            Log.e("Retrieved title_artist", title_artist);
                            if (title_artist.length() > 0) {
                                runOnUiThread(new Runnable() {
                                    public void run() {

                                        Main.tx2.setText(title_artist);
                                        Main.tx3.setText(title_artist2);

                                    }

                                });
                            }
                        } catch (IOException e) {
                            Log.e(MetadataTask1.class.toString(),
                                    e.getMessage());
                        }
                        try {
                            streamMeta.refreshMeta();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }

                }
            }, 0, 6000);
        }

    }
    AlertDialog.Builder alertBuilder = new AlertDialog.Builder(this);
    alertBuilder.setTitle("Manual Input");
    alertBuilder.setMessage("URL (must be lowercase http://)");
    final EditText input = new EditText(this);
    alertBuilder.setView(input);

    input.setHint("paste your URL here...");

    alertBuilder.setPositiveButton("Play", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dlg, int whichButton) {
            timerIsOn1 = true;

            Main.tx1.setText("user station...");
            Main.tx2.setText("");
            Main.tx3.setText("");

            // Send an intent with the URL of the song to play. This is expected by
            // MusicService.
            final Intent i = new Intent(MusicService.ACTION_URL);
            Uri uri = Uri.parse(input.getText().toString());

            i.setData(uri);
            startService(i);

            progressDialog = ProgressDialog.show(Main.this, "",
                    "connecting...");
            progressDialog.setCancelable(true);

            MetadataTask1 metadataTask1 = new MetadataTask1();
            metadataTask1.execute(uri);
        }
    });

    alertBuilder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dlg, int whichButton) {}
    });

    alertBuilder.show();

} 
```

如果有人可以帮助我，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T05:38:16.923

您将 AsyncTask 的类型声明为 URL、Void、IcyStreamData，但随后您尝试传递 URI（而不是 URL）。您需要将该 URI 转换为 URL。如果您使用的是 java.net.URI，那么您可以尝试 uri.toURL();

至于从对话框设置 url，创建您自己的自定义对话框，可以将数据从 edittext 发送回您的活动。然后在对话框上设置一个 onDismissListener，当它被关闭时，检查是否有从对话框传回的值并使用它来执行任务。（当然你应该/可以使用正则表达式来验证网址）

我不明白你为什么不首先使用 URL，但你可以尝试使用 Uri.Builder 然后调用 builder.build().toString() 来为 URL 设置一个字符串。或者只是尝试 uri.toString() 看看是否能满足您的需求，例如 URL url = new URL(uri.toString());

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T14:12:58.283

这是我如何让它工作的......我希望这可以节省其他人的时间......

```
 AlertDialog.Builder alertBuilder = new AlertDialog.Builder(this);
 alertBuilder.setTitle("Manual Input");
 alertBuilder.setMessage("URL (must be lowercase http://)");
 final EditText input = new EditText(this);
 alertBuilder.setView(input);
 alertBuilder.setPositiveButton("Play", new DialogInterface.OnClickListener() {
 public void onClick(DialogInterface dlg, int whichButton) {
            //do stuff here 
```

从用户输入中获取 Uri：

```
Uri uri = Uri.parse(input.getText().toString()); 
```

需要将用户输入转换为 URL：

```
URL url = null;
                try {
                    url = new URL(uri.toString());
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();

                } 
```

然后，在 doInBackground 中：

```
@Override
            protected IcyStreamMeta doInBackground(URL... urls)
            {

                try 
                {
                    streamMeta.refreshMeta();
                    Log.e("Retrieving MetaData","Refreshed Metadata");
                } 
                catch (IOException e) 
                {
                    Log.e(MetadataTask1.class.toString(), e.getMessage());
                }
                return streamMeta;
            } 
```

传入 URL 时调用 AsyncTask：

```
streamMeta.setStreamUrl(url);
MetadataTask1 metadataTask1 = new MetadataTask1();
metadataTask1.execute(url); 
```

# java - 将 12 小时系统时间转换为 24 小时并以 Java 显示

> ID：12233681
> 
> 赞同：-1
> 
> 时间：2012-09-02T05:36:07.190
> 
> 标签：java, calendar

我使用 Calendar.getTime() 方法来获取设备时间。返回的时间是 Tue Feb 01 11:33:35 PST 2000"。然后 SimpleDateFormat.format(Calendar.getTime()) 为输入值 19:33（24 小时格式）返回 7:33 PM（到 TIME_ONLY 格式） .

这让我很困惑。后来我使用getTimeInstance() 来检查Calendar.getTime() 返回的时间。值为：上午 11:33:35

我已将时区设置为 SimpleDateFormat 作为设备时区。

现在我需要你的建议。我是否应该使用 DateFormat 解析时间并返回值，尽管 SimpleDateFormat.format(Calendar.getTime())。

我知道 Calendar.getTime() 都在返回设备时间，而 SimpleDateFormat.format() 正在使用设备时间。这可能是 12 小时格式的原因。但是为什么 Calendar.getTime() 在 PST 中返回时间以及为什么 SimpleDateFormat.format() 将其转换为 GMT 并显示相同。

请帮助我理解这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T05:47:20.023

尝试

```
SimpleDateFormat dateFormat= new SimpleDateFormat("h:mm:s  a");
System.out.println(dateFormat.format(new Date())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T05:48:43.280

我已将日期解析为所需的格式。

# java - SwingWorker，从大型方法调用中发布

> ID：12233682
> 
> 赞同：0
> 
> 时间：2012-09-02T05:36:42.713
> 
> 标签：java, swing, concurrency, swingworker

我有一个 swingworker，我想用它从 doInBackground() swingworker 方法中的另一个对象调用一个大而复杂的方法。

它看起来像这样：

```
public class HostGameTask extends SwingWorker<Void, String> {

    @Override
    protected Void doInBackground() throws Exception {
        try {
            SwingGUI.poker.StartGame(true,(SwingGUI.numberOfSlots.getSelectedIndex()+1));
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void process(List<String> messages) {
        String latestMessage = messages.get(messages.size()-1);
    }
} 
```

StartGame 方法内部有一个等待玩家加入的 while 循环。Poker 对象是 SwingGUI 中的一个对象，它具有作为嵌套类的 HostGameTask。

我可以从 StartGame() 函数中发布吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T09:02:59.100

是和不是。

不，你不能给出你编写代码的方式吗？

是的，如果您将引用传递`SwingWorker`给该`StartGame`方法，则可以。

就个人而言，我会编写一个接口，您的`StartGame`方法可以通过该接口与工作人员进行通信。这将您的代码解耦并消除对 的依赖`SwingWorker`（因为您的`StartGame`方法不应该关心谁在使用它的内容，而应该关心它如何将该信息发送给相关方）。

# css - 将绝对定位的 div 向右浮动

> ID：12233686
> 
> 赞同：0
> 
> 时间：2012-09-02T05:37:44.783
> 
> 标签：css, html, position, absolute

我有以下元素：

```
<div>

<div class="top">       
</div>

<div class="content">       
</div>

</div> 
```

我希望两个子 div 都是正确的并定位为绝对位置，以便它们覆盖其他元素。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T05:51:20.560

不是很清楚你想做什么，但如果你想要绝对定位在右边，这里有一个例子可以帮助你开始：

[http://jsfiddle.net/b2yD9/](http://jsfiddle.net/b2yD9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T05:54:01.633

在两个 div 中添加 CSS

`right:10px; and position:absolute`

# javascript - 数据属性是否有更清洁的方法

> ID：12233692
> 
> 赞同：2
> 
> 时间：2012-09-02T05:38:31.853
> 
> 标签：javascript, jquery, html, animation

想知道他们是否是构建此代码的更简洁的方式？我希望将数据属性用于后退和前进按钮的左右值。

谢谢！！！

```
.hover-area { position:relative; width:100%; height:50px; }
.backward, .forward { position:absolute; }
.backward{ left:0px; }
.forward { right:0px; }​ 
```

* * *

```
<div class="hover-area">
  Hover Area
  <div class="backward" data-animate-on='{"left":"20"}' data-animate-off='{"left":"0"}'>
    Previous
  </div>
  <div class="forward" data-animate-on='{"right":"20"}' data-animate-off='{"right":"0"}'>
    Next
  </div>
</div> 
```

* * *

```
 $('.forward').css({
     opacity: 0,
     right: 0
 });
 $('.hover-area').hover(function () {
     $(this).find('.forward').stop().animate({
         right: 20
     }, {
         queue: false,
         duration: 300,
         easing: 'easeOutCubic'
     }).animate({
         opacity: '0.95'
     }, {
         queue: false,
         duration: 400,
         easing: 'easeOutCubic'
     });
 }, function () {
     $(this).find('.forward').stop().animate({
         right: 0
     }, {
         queue: false,
         duration: 550,
         easing: 'easeOutSine'
     }).animate({
         opacity: '0'
     }, {
         queue: false,
         duration: 300,
         easing: 'easeOutSine'
     });
 });

 $('.backward').css({
     opacity: 0,
     left: 0
 });
 $('.hover-area').hover(function () {
     $(this).find('.backward').stop().animate({
         left: 20
     }, {
         queue: false,
         duration: 300,
         easing: 'easeOutCubic'
     }).animate({
         opacity: '0.95'
     }, {
         queue: false,
         duration: 400,
         easing: 'easeOutCubic'
     });
 }, function () {
     $(this).find('.backward').stop().animate({
         left: 0
     }, {
         queue: false,
         duration: 550,
         easing: 'easeOutSine'
     }).animate({
         opacity: '0'
     }, {
         queue: false,
         duration: 300,
         easing: 'easeOutSine'
     });
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T06:12:50.187

1.  您可以组合您的功能并一起运行它们。
2.  然后您可以将类似的动画配置存储在变量中并使用它们。
3.  要获取动画信息，您可以使用 just `$(el).data('animate-on')`，它将返回对象。
4.  您也可以使用`jQuery.each`，因为您对按钮的操作非常相似。

.Demo：http: [//jsfiddle.net/vYvVb/1/](http://jsfiddle.net/vYvVb/1/)

```
$('.forward').css({ opacity: 0, right: 0 });
$('.backward').css({ opacity: 0, left: 0 });

$('.hover-area').hover(function () {
  var conf_1 = { queue: false, duration: 300, easing: 'easeOutCubic' };
  var conf_2 = { queue: false, duration: 400, easing: 'easeOutCubic' };

  $(this).find('.backward, .forward').each(function () {
    $(this).stop()
      .animate($(this).data('animate-on'), conf_1)
      .animate({ opacity: 0.95 }, conf_2);
  });
}, function() {
  var conf_1 = { queue: false, duration: 550, easing: 'easeOutSine' };
  var conf_2 = { queue: false, duration: 300, easing: 'easeOutSine' };

  $(this).find('.backward, .forward').each(function () {
    $(this).stop()
      .animate($(this).data('animate-off'), conf_1)
      .animate({ opacity: 0 }, conf_2);
  });
});​ 
```

# php - 当我刷新页面时，文本会自行删除，php？

> ID：12233694
> 
> 赞同：-1
> 
> 时间：2012-09-02T05:39:02.917
> 
> 标签：php, mysql, post

当我在文本框中键入内容并将其保存在 mysqli 中时，它可以完美运行，但是当我刷新同一页面时，我写的内容会无缘无故消失。我还在该页面中有另一个文本框，它工作得很好。我该如何解决？生物文本框是我遇到的问题。

```
 $getpro = mysql_fetch_assoc(mysql_query("SELECT * FROM `profile` WHERE username = '".$user_data['username']."'  "));$pro = $getpro;
$bios = $pro["bios"];
$realtionship = $pro["realtionship"];
$impmessage = $pro["impmessage"];
if ($_POST['bio']){
$bio = $_POST['bio'] ;
$query;
}
if ($_POST['impmessage']){
$impmessage = $_POST['impmessage'] ;
$query;
}
$query = mysql_query("UPDATE `profile` SET  bios ='$bio',  impmessage = '$impmessage' WHERE username = '".$user_data['username']."'");<form name="bio"action="" method="post">
<p>Important Message</p> <textarea   cols="50" style="resize:none" name="bio"  rows="7" ><? echo $bios; ?></textarea><br />
<input type="submit" value="change">
</form><hr /><form name="impmessage"action="" method="post">
<p>Important Message</p> <textarea   cols="50" style="resize:none" name="impmessage"  rows="7" ><? echo $impmessage; ?></textarea><br />
<input type="submit" value="change">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T06:11:24.973

我重新排列并删除了一些代码并尝试整理一下：

```
<?php
    if ( $_SERVER['REQUEST_METHOD'] == 'POST' ) // if form is submitted using POST method
    {
        if ( isset( $_POST['bio'] ) ){
            $bio = mysql_real_escape_string( $_POST['bio'] ); // escape special characters is user input
            $query = mysql_query("UPDATE `profile` SET  bios ='$bio' WHERE username = '".$user_data['username']."'"); //update bios
        }

        if (isset( $_POST['impmessage'] ) ){
            $impmessage = mysql_real_escape_string( $_POST['impmessage'] ); // escape special characters is user input
            $query = mysql_query("UPDATE `profile` SET impmessage = '$impmessage' WHERE username = '".$user_data['username']."'"); //update impmessage
        }
    }

    $pro = mysql_fetch_assoc(mysql_query("SELECT * FROM `profile` WHERE username = '".$user_data['username']."'  "));
?>

<form name="bio" action="" method="post">
    <p>Bios</p>
    <textarea cols="50" style="resize:none" name="bio" id="bio" rows="7" ><?php echo $pro["bios"]; ?></textarea>
    <br />
    <input type="submit" value="change">
</form>
<hr />
<form name="impmessage" action="" method="post">
    <p>Important Message</p>
    <textarea cols="50" style="resize:none" name="impmessage" id="impmessage" rows="7" ><?php echo $pro["impmessage"]; ?></textarea>
    <br />
    <input type="submit" value="change">
</form> 
```

给你的一些注意事项：

*   首先避免使用 mysql_* 函数。而是使用 mysqli 或 PDO
*   我总是更喜欢在页面的开头编写处理用户输入的代码，即。在输出任何东西之前。因为，如果用户输入对输出进行了任何更改，它会很容易地显示更新，因为我们在输出任何内容之前进行处理。因此，当我们查询数据库时，它会获取更新的数据。此外，如果我们想重定向到另一个页面或必须向浏览器发送一些其他标题，我们可以这样做，因为标题应该始终在输出任何内容之前发送。
*   另一件事是，总是逃避用户输入。否则，容易发生sql注入。最好的办法是使用 mysqli 和 PDO 中可用的准备好的语句。
*   当您`id`在 HTML 中命名元素时，请确保它是唯一的。因为没有相同的 id 可以出现两次。但是类名可以出现任意次数。
*   还要确保您的 PHP 代码不会与 HTML 混淆。`<?php`用&标签正确地包含 PHP 代码`?>`。我总是更喜欢避免速记。
*   由于您使用两种形式，因此输入都不会到达服务器端。只有一个。如果您希望同时访问两个输入，请使用单个表单。
*   我还避免了从获取的数据到其他变量的不需要的赋值操作。
*   此外，您应该始终正确缩进代码以获得更好的可读性。

我希望这会有所帮助。祝您好运。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T05:51:32.523

看起来您在每次页面加载时都在运行更新查询。如果未填充帖子值并且您刷新它将使用空值进行更新。Ps sberry 是正确的，在它投入生产之前还有很多其他的事情需要解决。

# jquery - 在 jQuery Mobile 中显示对话框时页面从 DOM 中删除

> ID：12233695
> 
> 赞同：0
> 
> 时间：2012-09-02T05:39:21.303
> 
> 标签：jquery, dom, jquery-mobile

我有一个页面，其中包含一个`<div data-role="page" ...`和一个`<div data-role="dialog" id="dialog-1" ...`

我用这个链接打开对话框：`<a href="#dialog-1" data-role="button" data-rel="dialog">Open Dialog</a>`

但是，main 中也有一些链接`page`。例如，这是我的 index.html：

```
...
<body>
<div data-role="page" id="Survey">              
    <div data-role="content">
        <a href="page2.html" data-role="button" data-transition="slide">Go to the next page</a>
        <a href="#dialog-1" data-role="button"  data-rel="dialog">Open Dialog</a>
    </div><!-- /content -->      
</div><!-- /page -->  
<div data-role="dialog" id="dialog-1">              
    <div data-role="content">
        Welcome!
    </div><!-- /content -->      
</div><!-- /dialog-->  
</body>
</html> 
```

这是我的 page2.html ：

```
...
<body>
<div data-role="page" id="Survey2">              
    <div data-role="content">
        <a href="#dialog-1" data-role="button"  data-rel="dialog">Also you can open the dialog here</a>
    </div><!-- /content -->      
</div><!-- /page -->  

</body>
</html> 
```

但这就是问题所在：我打开 index.html，然后单击链接转到带有 jQ​​uery mobile 的 Ajax Navigation 功能的 page2.html，然后单击链接`Also you can open the dialog here`。通过单击此链接，**该`Survey2`页面将从 DOM 中删除。**当我关闭对话框时，一个新的 page2.html 下载并位于 DOM 中。

但是，**当对话框打开时，如何防止从 DOM 中删除 page2.html？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:19:44.480

查看此文档：http: [//jquerymobile.com/test/docs/pages/page-cache.html](http://jquerymobile.com/test/docs/pages/page-cache.html)

如果您只想对页面禁用删除`pagehide`，`#Survey2`您可以将属性添加`data-dom-cache="true"`到此页面：

```
<div data-role="page" id="Survey2" data-dom-cache="true">              
    <!-- [...] -->      
</div><!-- /page --> 
```

如果要保留通过 ajax 注入的所有页面，可以全局启用此功能：

```
jQuery.mobile.page.prototype.options.domCache = true; 
```

# c++ - 检测正方形后运行命令的c ++算法

> ID：12233697
> 
> 赞同：1
> 
> 时间：2012-09-02T05:39:46.053
> 
> 标签：c++, opencv

我有用于检测正方形的 opencv 代码。现在我想在检测平方之后，代码运行另一个命令。

这是代码：

```
#include "cv.h"
#include "cxcore.h"
#include "highgui.h"
#include "math.h"
#include <iostream>
#include <stdio.h>
#include <string.h>
#include <sstream>

using namespace std;

double angle( CvPoint* pt1, CvPoint* pt2, CvPoint* pt0 )
{
    double dx1 = pt1->x - pt0->x;
    double dy1 = pt1->y - pt0->y;
    double dx2 = pt2->x - pt0->x;
    double dy2 = pt2->y - pt0->y;
    return (dx1*dx2 + dy1*dy2)/sqrt((dx1*dx1 + dy1*dy1)*(dx2*dx2 + dy2*dy2) + 1e-10);
} // angle

IplImage* findSquares4(  IplImage* img,  CvMemStorage* storage )
{
    double s = 0,  t = 0;
    int sdetect =0, sqdetect = 0,sqt = 0;
    CvSeq* contours;
    CvSeq* result;
    CvSeq* squares  =  cvCreateSeq(  0,  sizeof( CvSeq),  sizeof( CvPoint),  storage );

    IplImage* cny = cvCreateImage(cvGetSize(img), 8, 1);

    cvCanny(img, cny, 5, 100, 3);

    cvNamedWindow("canny",CV_WINDOW_AUTOSIZE);
    cvShowImage("canny",cny);

    cvFindContours(  cny,  storage,  &contours,  sizeof( CvContour),  CV_RETR_LIST,  CV_CHAIN_APPROX_SIMPLE,  cvPoint( 0, 0) );

    while(  contours )
    {
        result  =  cvApproxPoly(    contours,
                                sizeof( CvContour),
                                storage,
                                CV_POLY_APPROX_DP,
                                cvContourPerimeter( contours)*0.02,  0 );

        if(  result->total  == 4 &&
             fabs( cvContourArea( result, CV_WHOLE_SEQ)) > 1000 &&
             cvCheckContourConvexity( result) )
        {
            s  =  0;
            for(  int i = 2; i < 5; i++ )
            {
                {
                    t  =  fabs( angle(
                                ( CvPoint*)cvGetSeqElem(  result,  i ),
                                ( CvPoint*)cvGetSeqElem(  result,  i-2 ),
                                ( CvPoint*)cvGetSeqElem(  result,  i-1 )));
                    s  =  s > t ? s : t;
                    cout << "s = " << s<< endl;
                    cout << "t = " << t<< endl;
                }
            } // for
            if(  s < 0.3 )
                for(  int i  =  0; i < 4; i++ )
                    cvSeqPush(  squares,
                          ( CvPoint*)cvGetSeqElem(  result,  i ));
        } // if

    contours  =  contours->h_next;

    } // while
    if ((squares->total/4) = 1)
    {
        sdetect = 1;
    } / /if
    else
    {
        sdetect = 2;
        sleep(0.5);
    } // else

    if (sqdetect != sdetect)
    {
        sqdetect=sdetect;
        switch(sqdetect)
        {
            case 0 : system(NULL) ; break;
            case 2 : cout<< "no "<< endl; break;
            case 1 : system("./ambil1.sh"); break;
        } // switch
    } // if
    sdetect = 0;

    cout<<"Persegi : "<< squares->total/4 <<endl;

    cvReleaseMemStorage(&storage);
    cvClearSeq(squares);

} // findSquares4

void drawSquares(IplImage *img, CvSeq* squares )
{
    CvFont font;
    cvInitFont( &font, CV_FONT_HERSHEY_SIMPLEX, 0.4f, 0.4f, 0,1, 8 );
    int i,j,sdetect,sqdetect = 0;
    CvSeqReader reader;
    cvStartReadSeq( squares, &reader, 0 );

    for( i = 0; i < squares->total; i += 4 )
    {
        j++;
        CvPoint pt[4], *rect = pt;
        int count = 4;

         // read 4 vertices
        memcpy( pt, reader.ptr, squares->elem_size );
        CV_NEXT_SEQ_ELEM( squares->elem_size, reader );
        memcpy( pt + 1, reader.ptr, squares->elem_size );
        CV_NEXT_SEQ_ELEM( squares->elem_size, reader );
        memcpy( pt + 2, reader.ptr, squares->elem_size );
        CV_NEXT_SEQ_ELEM( squares->elem_size, reader );
        memcpy( pt + 3, reader.ptr, squares->elem_size );
        CV_NEXT_SEQ_ELEM( squares->elem_size, reader );

        cvPutText( img, "SQUARE", pt[i], &font, CV_RGB(20,255,0));

        cvPolyLine( img, &rect, &count, 1, 1, CV_RGB(200,0,0), 4, CV_AA, 0 );
    } // for

cvClearSeq(squares);
}  // drawSquares 
```

但我得到的是程序变得滞后。那么设置执行条件的正确算法是什么`system (./ambil1.sh)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T07:06:45.143

程序一直等到从属命令完成。在此期间它不会响应。

如果这是你需要的，`system`就足够了。

如果您想触发并忘记，您可以使用该`fork/exec`对，或者只使用 shell`&`运算符在后台运行东西。

如果您需要触发，更改程序的行为，然后在从属命令完成时将其更改回来，您几乎必须使用该`fork/exec/SIGCHLD/waitpid`组合。

# ruby-on-rails - 我的标题中的 logo.png 可以忽略我的自定义 CSS 样式表吗？（轨道上的红宝石）

> ID：12233698
> 
> 赞同：0
> 
> 时间：2012-09-02T05:39:51.473
> 
> 标签：ruby-on-rails, graphical-logo

我只想让 png 与我已经构建的（引导）标题重叠，所以基本上忽略它。

我可以修改 app/views/home/index.html.erb 以便 png 独立于 css 的作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T07:20:19.127

您可以使用 css 将 png 放置在您想要的位置。在您的自定义样式表中，尝试以下操作：

```
img#id-of-image {
  position: absolute:
  top: 5px;
  left: 5px;
} 
```

您可以使用 top 和 left 值将其放置在您想要的位置。

如果您需要将它嵌套在某个东西中，您需要将它放在一个容器（即一个 div）中并将该容器的位置设置为“位置：相对；”。然后顶部/左侧将相对于容器的内顶角。

# scipy - 在 Scipy.signal 中拟合传递函数模型

> ID：12233702
> 
> 赞同：3
> 
> 时间：2012-09-02T05:41:23.777
> 
> 标签：scipy

我正在使用`curve_fit`拟合一阶动态系统的阶跃响应来估计增益和时间常数。我使用两种方法。第一种方法是在时域中拟合函数生成的曲线。

```
# define the first order dynamics in  the time domain
def model(t,gain,tau):
    return (gain*(1-exp(-t/tau)))

#define the time intervals
time_interval = linspace(1,100,100)

#genearte the output using the model with gain= 10 and tau= 4 
output= model(t,10,4)

# fit to output and estimate  parameters - gain and tau
par = curve_fit(time_interval, output) 
```

现在检查`par`显示一个完美的 10 和 4 数组。

第二种方法是通过拟合 LTI 系统的阶跃响应来估计增益和时间常数。LTI 系统被定义为具有分子和分母的传递函数。

```
#define function as a step response of a LTI system .
# The argument x has no significance here,
# I have included because , the curve_fit requires passing "x" data to the function

def model1(x ,gain1,tau1):
    return lti(gain1,[tau1,1]).step()[1]

#generate output using the above model
output1 = model1(0,10,4)

par1 = curve_fit(model1,1,output1) 
```

现在检查 par1 显示 [1.00024827, 0.01071004] 的数组是错误的。我的第二种方法有什么问题？是否有更有效的方法通过curve_fit从数据中估计传递函数系数

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T17:02:18.130

curve_fit 的前三个参数是要拟合的函数、xdata 和 ydata。您已通过 xdata=1。相反，您应该给它与 output1 关联的时间值。

一种方法是实际使用函数 model1 中的第一个参数，就像在 model() 中所做的那样。例如：

```
import numpy as np
from scipy.signal import lti
from scipy.optimize import curve_fit

def model1(x, gain1, tau1):
    y = lti(gain1, [tau1, 1]).step(T=x)[1]
    return y

time_interval = np.linspace(1,100,100)

output1 = model1(time_interval, 10, 4)

par1 = curve_fit(model1, time_interval, output1) 
```

正如预期的那样，我得到 [10., 4.] 的参数。

# php - 不太了解SQL注入

> ID：12233703
> 
> 赞同：4
> 
> 时间：2012-09-02T05:41:41.700
> 
> 标签：php, sql, sql-injection

我已经阅读了很多关于 sql 注入的内容，并且我了解它如何导致问题（即：DROP TABLE *_* _ 等）。但我不确定我所遵循的教程实际上是如何防止这种情况发生的。我只是在学习 PDO，我想我理解它。

**这段代码对 SQL 注入安全吗？**为什么会这样？（使用这些准备好的语句需要做更多的工作，所以我想确定我不只是在浪费时间——**如果代码可以改进，请告诉我！**）

```
$conn = new PDO("mysql:host=$DB_HOST;dbname=$DB_DATABASE",$DB_USER,$DB_PASSWORD);

// Get the data
$firstname = $_POST["v_firstname"];
$lastname =  $_POST["v_lastname"];
$origincountry =  $_POST["v_origincountry"];
$citizenship = $_POST["v_citizenship"];
$gender = $_POST["v_gender"];
$dob = $_POST["v_dob"];
$language = $_POST["v_language"];
$landing = $_POST["v_landing"];
$email = $_POST["v_email"];
$phone = $_POST["v_phone"];
$cellphone = $_POST["v_cellphone"];
$caddress = $_POST["v_caddress"];
$paddress = $_POST["v_paddress"];
$school = $_POST["v_school"];
$grade = $_POST["v_grade"];
$smoker = $_POST["v_smoker"];
$referred = $_POST["v_referred"];
$notes = $_POST["v_notes"];

//Insert Data
$sql = "INSERT INTO clients (firstname, lastname, origincountry, citizenship, gender, dob, language, landing, email, phone, cellphone, caddress, paddress, school, grade, smoker, referred, notes) 
        VALUES (:firstname, :lastname, :origincountry, :citizenship, :gender, :dob, :language, :landing, :email, :phone, :cellphone, :caddress, :paddress, :school, :grade, :smoker, :referred, :notes)";
$q = $conn->prepare($sql);
$q->execute(array(':firstname'=>$firstname,
                  ':lastname'=>$lastname,
                  ':origincountry'=>$origincountry,
                  ':citizenship'=>$citizenship,
                  ':gender'=>$gender,
                  ':dob'=>$dob,
                  ':language'=>$language,
                  ':landing'=>$landing,
                  ':email'=>$email,
                  ':phone'=>$phone,
                  ':cellphone'=>$cellphone,
                  ':caddress'=>$caddress,
                  ':paddress'=>$paddress,
                  ':school'=>$school,
                  ':grade'=>$grade,
                  ':smoker'=>$smoker,
                  ':referred'=>$referred,
                  ':notes'=>$notes)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T05:48:26.570

是的，代码是安全的，因为 PDO 会正确转义并为您引用参数数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T07:30:52.070

您的代码不会受到 SQL 注入的影响，因为您使用的是参数化查询，这基本上意味着一旦构建查询并将其发送到 sql 服务器，它就会被转义，同样可以通过使用 php 的内置函数来实现`mysql_real_escape_string()`。

以下视频是关于 OWASP 的 sql 注入的重要信息视频： [SQL 注入](http://www.youtube.com/watch?v=pypTYPaU7mM)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T06:00:40.210

规则是：不要手动构造 sql，你可以在其中执行以下操作：

```
sqlStatement = 'select field1, field2, field3 from mytable where index = '' + myVariable + '' 
```

以上是危险的，因为如果您的应用程序允许用户将数据传递到 myVariable，他们可能会将完整的 SQL 命令发送到您的数据库服务器。

如上所述，使用参数化查询是解决方案。

# sql - 多个计数（*）的 SQL，其中还包括“零记录”信息

> ID：12233705
> 
> 赞同：0
> 
> 时间：2012-09-02T05:42:19.907
> 
> 标签：sql, count, group-by

我需要运行一个查询来查找不同类别的计数。例如：假设路线号：10,20,40 归类为“短线”，路线号：“45,60 和 70”归类为“长线”。不同的公共汽车在其中一条或多条路线上穿行。

**示例：**（A、B、C 为总线编号）

巴士号码 路线

*   一个 10
*   45
*   B 40
*   B 45
*   B 60
*   一个 20
*   C 70

我正在尝试编写一个 sql 查询，该查询将返回**每个**总线层**或**不层的类别计数（由该类别的计数为零表示）：即：

*   巴士号码 短线 长线
*   一个 2 1
*   乙 1 2
*   0 1

C 不在短途路线上（0 计数）的信息是必不可少的。如何让我的查询返回上述结果？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T05:51:30.063

您可以使用 case 语句：

```
SELECT BusNo, 
    SUM (CASE WHEN Route in (10,20,40) THEN 1 ELSE 0 END)) AS ShortRoute,
    SUM (CASE WHEN Route in (45,60,70) THEN 1 ELSE 0 END)) AS LongRoute
FROM RoutesTable
GROUP BY BusNo 
```

如果长/短路线信息包含在另一个表中，假设`RouteInfo`：

```
SELECT BusNo, 
    SUM (CASE WHEN RouteInfo.Route = 'short' THEN 1 ELSE 0 END)) AS ShortRoute,
    SUM (CASE WHEN RouteInfo.Route = 'long' THEN 1 ELSE 0 END)) AS LongRoute
FROM RoutesTable
    INNER JOIN RouteInfo ON RoutesTable.Route = RouteInfo.Route
GROUP BY BusNo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T05:50:31.750

这个查询应该让你走上正轨。它没有经过测试，特别是没有更多的数据库细节，但你需要按巴士号码分组，然后如果它是短途路线，你需要分组。

```
select BusNo, count(*) FROM Routes GROUP BY BusNo, isShortRoute 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T05:58:25.683

您可以使用`CASE`来分配字段是否与条件匹配。在这种情况下，我们将检查短路径是否小于或等于 40，或者长路径是否大于或等于 45。如果为真，它将被分配一个`1`. 然后，我们会选择`SUM`短途和长途路线，您会得到想要的结果。

```
SELECT bus_no AS 'Bus No',
    SUM(CASE
        WHEN route <= 40 THEN 1 ELSE 0 END) AS 'Short Route',
    SUM(CASE
        WHEN route >= 45 THEN 1 ELSE 0 END) AS 'Long Route'
FROM bus GROUP BY bus_no 
```

# python - 什么是更 Pythonic - 函数组合、lambdas 或其他东西？

> ID：12233708
> 
> 赞同：8
> 
> 时间：2012-09-02T05:43:26.917
> 
> 标签：python, function, lambda, functional-programming, composition

给定下面的例子，哪个更pythonic？使用函数组合、lambdas 或*（现在）完全不同的东西*？我不得不说 lambdas 似乎更具可读性，但 Guido 本人似乎想完全删除 lambdas - [http://www.artima.com/weblogs/viewpost.jsp?thread=98196](http://www.artima.com/weblogs/viewpost.jsp?thread=98196)

```
from functools import partial
from operator import not_, ge

def get_sql_data_type_from_string(s):
    s = str(s)

    # compose(*fs) -> returns composition of functions fs
    # iserror(f, x) -> returns True if Exception thrown from f(x), False otherwise

    # Using function composition
    predicates = (
        ('int',     compose(not_, partial(iserror, int))),
        ('float',   compose(not_, partial(iserror, float))),
        ('char',    compose(partial(ge, 1), len)))

    # Using lambdas
    predicates = (
        ('int',     lambda x: not iserror(int, x)),
        ('float',   lambda x: not iserror(float, x)),
        ('char',    lambda x: len(x) <= 1))

    # Test each predicate
    for i, (t, p) in enumerate(predicates):
        if p(s):
            return i, t

    # If all predicates fail
    return (i + 1), 'varchar' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-02T05:53:28.137

没见过 Python 的程序员一眼就能认出 lambda。我已经使用 Python 十多年了，我一直在摸索组合形式，即使与 lambda 版本进行比较也是如此。

去那个不烂的。此外，鉴于 lambda 进行了 3.0 剪辑，我怀疑它是否会被删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T06:09:59.623

这是一种属于“不同”类别的方法：

```
def get_sql_data_type_from_string(s):
    s = str(s)

    def char(x):
        if len(x)<=1:
            return x
        raise RuntimeError('Not a char')

    predicates = (
        ('int',     int),
        ('float',   float),
        ('char',    char)
    )

    # Test each predicate
    for i, (t, p) in enumerate(predicates):
        try:
            p(s)
            return i,t
        except:
            pass

    # If all predicates fail
    return (i + 1), 'varchar' 
```

# c++ - 如何在 C++ 中正确使用 ostringstream？

> ID：12233710
> 
> 赞同：19
> 
> 时间：2012-09-02T05:44:23.497
> 
> 标签：c++, string, ostringstream, sstream

当我的 toString() 方法被调用时，我试图返回一些信息，其中包括一个整数和一些浮点数。我了解到 ostringstream 工作得很好，但是当包含此方法的类被一遍又一遍地调用时，信息会堆积到我之前的输出中。这是我的代码

```
 ostringstream int_buffer, float_buffer, float_buffer2; 
```

在我的课开始时介绍，然后

```
 string toString()
    {

        int_buffer << on_hand;
        float_buffer << price;
        float_buffer2 << generated_revenue;

        string stron_hand = int_buffer.str();
        string strprice = float_buffer.str();
        string strrev = float_buffer2.str();

        string output = "Product name: " + description + " Units left: " + stron_hand + " Price: " + strprice + " Revenue: $" + strrev;
        return output;
    } 
```

我知道我的编码很糟糕，对此我还是很陌生，但是我的输出示例是，

***“产品名称：电影票剩余单位：49 价格：9.99 收入：9.99 美元”***

***“产品名称：电影票剩余单位：4926 价格：9.999.99 收入：9.99239.76 美元”***

第二个应该显示在哪里

***“产品名称：电影票剩余单位：26 价格：9.99 收入：239.76 美元”***

我知道这只是更新的问题，但这就是我迷路的地方。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-02T05:55:21.453

声明`int_buffer`, `float_buffer`, 和`float_buffer2`内部`toString()`函数。因为您在类中声明，所以这些对象被保留，所以每次调用函数时，您都会一遍又一遍地`toString()`连接到`int_buffer`, `float_buffer`, 和。`float_buffer2`如果您在方法内部声明它们将仅在`toString`激活时存在。无论如何，你正在为你想要做的事情做太多的代码。你可以简单地做：

```
std::string toString()
{
    std::ostringstream buffer; 
    buffer << "Product name: "<< description << " Units left: " << on_hand << " Price: "<< price << " Revenue: $" << generated_revenue;
    return buffer.str();
} 
```

# c# - 文件 Mime 类型检查

> ID：12233711
> 
> 赞同：5
> 
> 时间：2012-09-02T05:44:25.743
> 
> 标签：c#, asp.net-mvc, file-upload, mime-types

我允许将文件上传到我的 C# MVC 网站，目前我正在根据扩展名限制这些类型，但我也觉得我需要服务器端检查以确认他们没有重命名它。

有没有一种技术可以用来检查我需要的所有类型，或者我可以使用的库可以在这里提供帮助？

我见过有人检查文件的前几个字节，但我害怕我会错过什么？

谢谢你的帮助。

编辑：

[这里](https://stackoverflow.com/questions/58510/using-net-how-can-you-find-the-mime-type-of-a-file-based-on-the-file-signature)有很多建议。我将调查其中一些作为解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T10:31:44.480

如果您将文件作为 HttpPostedFile 读取，则可以获得等于 mime 类型的内容类型。

因此，您可以执行以下操作：

```
if (myFile.ContentType == "video/mpeg")
{
   // Do your thing
}
else{
   // error
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T10:39:30.663

试试这个解决方案：[使用 .NET，如何根据文件签名而不是扩展名找到文件的 mime 类型](https://stackoverflow.com/questions/58510/using-net-how-can-you-find-the-mime-type-of-a-file-based-on-the-file-signature?lq=1)

它将为您进行文件内容嗅探。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T23:10:27.447

我最终从[这里](https://stackoverflow.com/a/9435701/148998)混合了一些解决方案，因为我没有使用 HttpFileBase 并且只有文件流，我必须读取流的前几个字节以确定 mime 类型。

注意：我不使用注册表技术，因为我不知道服务器上将安装或不会安装什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-31T07:26:01.123

您可以通过以下方式获取 MIME 类型：

```
var fileName = ContentDispositionHeaderValue.Parse(file.ContentDisposition).FileName.Trim('"');

                mimeType = file.ContentType; 
```

一旦获得 MIME 类型，就可以与字符串比较进行比较（如 @ffffff01 所示）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-31T07:32:03.540

为了更安全，您还可以使用ffffff01 所说的*ContentType属性检查 mimeType，以及使用**Path.GetExtension*方法检查文件扩展名。

# ontology - 多语言本体

> ID：12233712
> 
> 赞同：1
> 
> 时间：2012-09-02T05:44:41.207
> 
> 标签：ontology, owl

我是 Protege OWL 4 的新手，对多语言本体感到困惑。我想快速启动一个基于英语的非英语 OWL。我有三个问题：

1.  使用哪些插件？有一个 OntoLing [http://ainlp.info.uniroma2.it/software/OntoLing/UserManual.html#LinguisticEnrichment](http://ainlp.info.uniroma2.it/software/OntoLing/UserManual.html#LinguisticEnrichment)
2.  如果映射，怎么做，有教程吗？
3.  注释属性的标签没有我想要的语言

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:40:25.477

我通常会通过使用原始的英语本体并添加注释标签来解决这个问题。在**Protégé 4中，您可以通过在****添加注释对话框**中直接在`Lang`字段中输入所需的值来将自定义语言添加到标签（参见屏幕截图）。

 **![在此处输入图像描述](../Images/e780e8a4e9aef8b88e9e59c24101f2c2.png)**

# php - 在 PHP 中从另一台服务器传输文件

> ID：12233714
> 
> 赞同：0
> 
> 时间：2012-09-02T05:45:02.070
> 
> 标签：php, apache

我有一个托管在 code.google.com 的可执行文件（比如[http://code.google.com/fold/file1.exe](http://code.google.com/fold/file1.exe)）。当用户浏览到[http://mysite.com/download.exe](http://mysite.com/download.exe)时，我希望他们自动获取文件[http://code.google.com/fold/file1.exe](http://code.google.com/fold/file1.exe)的内容，而无需任何重定向。用户应该认为他/她正在从[http://mysite.com/download.exe](http://mysite.com/download.exe)而不是[http://code.google.com/fold/file1.exe](http://code.google.com/fold/file1.exe)下载文件。

我怎么能做到这一点，使用 PHP？这个过程有什么特殊的说法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T06:16:42.077

您可以使用 URL 重写将文件名作为参数传递给脚本。您的脚本（本例中为 downloadexecutable.php）将响应包含“下载”的 $_GET 参数“q”：

```
<?php
if (isset($_GET['q']) && $_GET['q'] == "download") {
    //you will want to:
    //1) set Content-type to be the correct type...I just set it to octet-stream because I'm not sure what it should be
    header('Pragma: public');   // required
    header('Expires: 0');       // no cache
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Cache-Control: private',false);
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename="'.basename('http://code.google.com/fold/file1.exe').'"');
    header('Content-Transfer-Encoding: binary');
    header('Content-Length: '.filesize('http://code.google.com/fold/file1.exe'));    // provide file size
    echo file_get_contents('http://code.google.com/fold/file1.exe');      // push it out
    exit()
}
?> 
```

然后，您将在根目录中的 .htaccess 文件中启用 Apache 上的 URL 重写，如下所示：

```
RewriteEngine On
RewriteRule ^(.+)\.exe$ /downloadexecutable.php?q=$1 [NC,L] 
```

当用户请求任何以 .exe 结尾的文件时，downloadexecutable.php 应该执行如下：

请求：http: [//yoursite.com/download.exe](http://yoursite.com/download.exe)

PHP实际处理了什么：http: [//yoursite.com/downloadexecutable.php ?q=download](http://yoursite.com/downloadexecutable.php?q=download)

请求：http: [//yoursite.com/this/could/be/a/bug.exe](http://yoursite.com/this/could/be/a/bug.exe)

处理：http: [//yoursite.com/downloadexecutable.php ?q=this/could/be/a/bug](http://yoursite.com/downloadexecutable.php?q=this/could/be/a/bug)

显然它需要一些工作，我还没有测试过上述任何一个，但如果你稍微玩弄一下并且愿意使用谷歌，你应该能够让它工作。

URL重写教程： http: [//www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/](http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/)

php东西的来源： http: [//snipplr.com/view/22546/](http://snipplr.com/view/22546/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T06:17:26.857

您可能想尝试这种方法：

```
<?
function get_file($url) {
$ficheiro = "file.exe";
$fp = fopen (dirname(__FILE__) . "/$ficheiro", 'w+'); //make sure you've write permissions on this dir
//curl magic
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_TIMEOUT, 50);
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_exec($ch);
curl_close($ch);
fclose($fp);
}

//sets the original file url
$url = "http://code.google.com/fold/file1.exe";

//downloads original file to local dir
get_file($url);

//redirect user to the download file hosted on your site
header("Location: $ficheiro");
?> 
```

并将其添加到您的 .htaccess 中：

```
RewriteEngine On
RewriteRule ^download.exe  this_script.php 
```

# javascript - 在线数据库 WebApp / 服务

> ID：12233723
> 
> 赞同：0
> 
> 时间：2012-09-02T05:48:45.727
> 
> 标签：javascript, dropbox

我正在通过安装托管在我的 Dropbox Public 文件夹上的网站来进行试验。我可以访问文件，我使用我的域名重定向到 de index.html 公共 url。我可以运行 javascript、bootstrap、jquery 和那些东西，但不能运行 php（出于保管箱的明显安全原因）。我想保存网站上的数据。我们都知道，JScript 不允许在浏览器或网页本身之外编写文件或任何内容。

我一直在寻找一个 webapp/service，它为我提供了一个数据库或类似的东西，让我可以从 javascript 中保存数据。连接到我的主机并为我提供服务的 API 或类似的东西。

有人听说过这样的事情吗？或者任何其他方式我可以保存数据？（将 JS 对象序列化为文件对我来说就足够了）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T22:37:53.400

从经验来看，

如果您坚持尝试在 Dropbox 上托管某些内容或任何非为此目的的内容，您将不断遇到此类问题。

最后花费（浪费）更多的时间、精力和金钱在变通方法上，而不是在真正的托管环境中获得乐趣（基于云的比 DB 更有趣！）

帮自己一个忙，转移到托管平台，更明智地把精力花在创建网站或产品上（也许这会让你赚钱）

有很多免费的托管平台可以帮助您入门。

Google 上的快速搜索：

[http://appfog.com/](http://appfog.com/)
[https://pagodabox.com/](https://pagodabox.com/)

# jquery - jQuery Ajax Object abort 方法并没有真正取消请求

> ID：12233734
> 
> 赞同：1
> 
> 时间：2012-09-02T05:51:06.183
> 
> 标签：jquery, ajax, abort

我正在尝试使用 ajax 请求预加载一些文件

```
var foo = $.ajax({url:'http://blahblah.com/myfile.jpg'}); 
```

但是，当我调用`foo.abort();`开发人员工具的网络面板（在 FireFox 和 Chrome 中的网络）显示文件仍在下载中，如果通过浏览器或使用`window.stop()`方法停止页面加载，将停止下载。有什么方法可以停止下载吗？

# mysql - 读取文件的 SQL 远程连接

> ID：12233743
> 
> 赞同：0
> 
> 时间：2012-09-02T05:53:31.830
> 
> 标签：mysql, database, windows, sqlcommand

所以我试图重新访问我的服务器数据库并让它运行命令将几个表全部导出到单个 csv 文件。所以我有一个命令行命令参数，如下所示：

```
mysql -h 198.xxx.xxx.xxx -u user-p < file.txt 
```

file.txt 的内容如下所示：

```
SELECT * FROM log
INTO OUTFILE 'C:\USERS\username\Desktop\log.csv'
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n'

SELECT * FROM permission_types
INTO OUTFILE 'C:\USERS\username\Desktop\permission_types.csv'
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n'

SELECT * FROM personal_info_options
INTO OUTFILE 'C:\USERS\username\Desktop\personal_info_options.csv'
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n' 
```

我不确定我是否有这个权利的语法，或者如果这可能的话，我一直在做一堆研究试图获得例子。人们通常会告诉你概念，但似乎从来没有给你测试它们所需的代码，它总是像这样：

```
mysql -h localhost -u user-p < somefile and they don't show you contents 
of a file for example 
```

我正在运行 Windows 7，我安装了 WAMPServer，它具有 MYSQL 版本 5.5.24，我可以通过命令行访问它。我不确定 FILEDS TERMINATED BY 或 ENCLOSED BY 或 LINES TERMINATED BY ... 我需要这些吗？这实际上会保存到我的本地机器吗？我对运行这个脚本很紧张，我不想犯错误并弄乱数据库。.txt 也可以用于脚本文件吗？

你能提供的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T09:50:34.287

1.  > 我不确定我是否有这个权利的语法，或者如果这可能的话，我一直在做一堆研究试图获得例子。

    您的语法是正确的，只是每个`SELECT`语句都应以分号结尾。请注意，您还需要指定您的表所在的数据库——最简单的做法是将其作为 的参数`mysql`：

    ```
    mysql -h 198.xxx.xxx.xxx -u 用户-p mydb < file.txt
    ```

2.  > 我不确定 FILEDS TERMINATED BY 或 ENCLOSED BY 或 LINES TERMINATED BY ... 我需要这些吗？

    如[`SELECT ... INTO`语法](http://dev.mysql.com/doc/en/select-into.html)中所述：

    > 这是一个生成许多程序使用的逗号分隔值 (CSV) 格式的文件的示例：
    > 
    > ```
    > 选择 a、b、a+b 到 OUTFILE '/tmp/result.txt'
    >   以 ',' 结尾的字段可选地由 '"' 包围
    >   以“\n”结尾的行
    >   从测试表；
    > ```

    如[`LOAD DATA`语法](http://dev.mysql.com/doc/en/load-data.html)下所述：

    > 如果您指定 no `FIELDS`or`LINES`子句，则默认值与您编写以下内容相同：
    > 
    > ```
    > 由 '\t' 终止的字段由 '' 封闭由 '\\' 转义
    > 由 '\n' 终止的行由 '' 开始
    > ```

    它继续解释：

    > 相反，[**`SELECT ... INTO OUTFILE`**](http://dev.mysql.com/doc/en/select-into.html)在写入输出时，默认值会导致如下操作：
    > 
    > *   在字段之间写入标签。
    >     
    >     
    > *   不要将字段括在任何引用字符中。
    >     
    >     
    > *   使用“<code>\”转义出现在字段值中的制表符、换行符或“<code>\”实例。
    >     
    >     
    > *   在行尾写下换行符。

    请注意，因为`LINES TERMINATED BY '\n'`是默认值，您可以省略该子句；但这些`FIELDS`子句对于 CSV 输出是必需的。

3.  > 这实际上会保存到我的本地机器吗？

    不。如[`SELECT ... INTO`语法](http://dev.mysql.com/doc/en/select-into.html)中所述：

    > 的形式将选定的行写入文件。该文件是在服务器主机上创建的，因此您必须有权使用此语法。不能是现有文件，除其他外，这可以防止诸如和数据库表之类的文件被破坏。系统变量控制文件名的解释。[**`SELECT ... INTO OUTFILE '*file_name*'`**](http://dev.mysql.com/doc/en/select-into.html)[**`SELECT`**](http://dev.mysql.com/doc/en/select.html)[**`FILE`**](http://dev.mysql.com/doc/en/privileges-provided.html#priv_file)***`file_name`***`/etc/passwd`[**`character_set_filesystem`**](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_character_set_filesystem)
    > 
    > 该[**`SELECT ... INTO OUTFILE`**](http://dev.mysql.com/doc/en/select-into.html)语句的主要目的是让您非常快速地将表转储到服务器计算机上的文本文件中。如果要在服务器主机以外的其他主机上创建生成的文件，通常不能使用[**`SELECT ... INTO OUTFILE`**](http://dev.mysql.com/doc/en/select-into.html)，因为无法写入相对于服务器主机文件系统的文件路径。
    > 
    > 但是，如果 MySQL 客户端软件安装在远程机器上，您可以改为使用客户端命令，例如在客户端主机上生成文件。**`mysql -e "SELECT ..." > *file_name*`**
    > 
    > 如果可以使用服务器文件系统上的网络映射路径访问远程主机上的文件位置，则也可以在服务器主机以外的不同主机上创建结果文件。[*`mysql`*](http://dev.mysql.com/doc/en/mysql.html)在这种情况下，目标主机上不需要存在（或某些其他 MySQL 客户端程序）。

4.  > 我对运行这个脚本很紧张，我不想犯错误并弄乱数据库。

    `SELECT`语句只从数据库中读取数据，不会对其内容进行任何更改：因此它们不能“搞乱数据库”。

5.  > .txt 也可以用于脚本文件吗？

    任何扩展都可以工作：MySQL 客户端和服务器软件都看不到它（您的操作系统读取文件并将其内容发送到客户端程序，客户端程序又将该内容发送到服务器；操作系统与此处的文件扩展名矛盾）。

    在 Windows 上，`.txt`扩展程序会将文件与文本编辑器（例如记事本）相关联，以便可以轻松打开它进行编辑。我个人更喜欢`.sql`它更准确地描述文件的内容，然后我会将该扩展名与合适的编辑器相关联——但这些都不是*必需*的。

# android - 屏幕旋转时重新启动活动

> ID：12233744
> 
> 赞同：3
> 
> 时间：2012-09-02T05:53:43.347
> 
> 标签：android

我想知道为什么 android:configChanges="orientation" 不能用于 android 版本 4.0.3。当屏幕旋转时，活动重新启动。

请就此事提供帮助。

Rgds，维拉克

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T05:59:31.380

还请像这样添加 screenSize：

```
android:configChanges="orientation|screenSize" 
```

这将解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T06:03:34.380

显然使用orientation|screenSize (?) 会阻止Android 4 上的onCreate，并且似乎不会破坏以前的Android 版本中的任何内容。

```
android:configChanges="orientation|screenSize" 
```

不知道为什么这是必要的，我也不太了解有关此新值的文档。

我怀疑在 HONEYCOMB_MR2 中，在方向更改时，活动将其视为两个配置更改：方向和屏幕尺寸。默认情况下，两者都尝试重新创建活动。

# html - HTML：……合法吗？

> ID：12233745
> 
> 赞同：1
> 
> 时间：2012-09-02T05:53:57.080
> 
> 标签：html, internet-explorer, google-chrome, firefox

早在 2009 年，我写了一个页面（[http://www.ikriv.com/dev/dotnet/JavaClone/index.html](http://www.ikriv.com/dev/dotnet/JavaClone/index.html)），其中包含很多这样的片段：

`<sup><a href="#ref14">[14]</a></sup>`

我认为当时在 Firefox 和 IE 中看起来都不错。令我惊讶的是，我今天发现 Firefox 14.0.1 显示了其中一些如预期的那样，而另一些则显示为好像没有`sup`标签一样。

更有趣的是，IE8 在与 Firefox 完全相同的地方也有问题，只是它没有忽略上标，而是插入了一个额外的换行符。

Chrome 与 Firefox 做同样的事情：一些上标很好，而另一些则被忽略。

我找不到任何规律，但有三件事是肯定的：

*   有些片段按预期显示，有些则没有*   所有主要浏览器似乎在完全相同的地方都有问题*   如果我删除 <a> 标签，一切都会恢复正常

是什么赋予了？把 <a> 放在 <sup> 里面是非法的还是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T05:59:45.480

问题不在于`sup`嵌入`a`，而是`a`没有内部文本的标签：

```
<a name="Interfaces" /> 
```

使用 Firebug 进行检查表明 Chrome 不喜欢这样。它忽略自关闭并将之后的所有内容解释为在该`a`标签内。

将其更改为：

```
<a name="Interfaces"></a> 
```

并且上标链接的问题会自行纠正。

# asp.net - asp.net mvc 和 sql 查询

> ID：12233746
> 
> 赞同：4
> 
> 时间：2012-09-02T05:53:56.790
> 
> 标签：asp.net, sql, asp.net-mvc, asp.net-mvc-3

我使用 Web 表单开发网站，现在我有一个项目，我在其中使用 MVC3 框架和 Rzor。我的问题是关于 MVC 中的一些基本设计模式。我有一个网页，在左侧我将从 SQL 表中提取类别，在中心我将查询另一个 Sql 表，以及整个页面的更多内容。

所以我的问题是......将数据带入一个网页的最佳方式是什么，所有这些查询都是完全独立的，我是否需要为每个查询创建新的模型？或者有更好的方法吗？

在 WebForms 中，我使用了用户控件，其中每个用户控件都有自己的设计和 Sql 查询。我听说过在 MVC 中使用部分视图，但我不确定，我想我很难理解如何使用不同的查询将数据带入一个网页并在网页上显示输出。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T06:07:47.550

您应该创建一个`ViewModel`. *看看下面的更新*

这是一个代表您的页面的模型。您要在视图中显示的元素应该存在于您的 ViewModel 中。您将在控制器中填充 ViewModel 并将它们显示在页面上。

我写了一个购物网站页面的示例，左侧是类别，中间是产品。这两个实体将存在于不同的表中。

例子：

```
class MainPageViewModel
{
  //this data is from a different table.
  //and goes on the left of the page
 public string Categories {get; set;}
  //this data is also from a different table.
  //and goes on the center of the page
 public List<Products> Products {get; set;}
} 
```

在您的控制器中：

```
public class HomeController : Controller
{
    // GET: /Home/
    public ActionResult Index()
    {
        MainPageViewModel vm = new MainPageViewModel();
        vm.Categories = GetCategories();
        //use the GetProducts() to get your products and add them.
        vm.Products.Add(...); 
        return View(vm); //pass it into the page
    }
    string[] GetCategories()
    {
     DataTable data = GetDataFromQuery("SELECT * FROM Categories WHERE..");
     //convert the data into a string[] and return it..
    }
    //maybe it has to return something else instead of string[]? 
    string[] GetProducts()
    {
     DataTable data = GetDataFromQuery("SELECT * FROM Products WHERE..");
     //convert the data into a string[] and return it..
    }
    DataTable GetDataFromQuery(string query)
    {
        SqlDataAdapter adap = 
             new SqlDataAdapter(query, "<your connection string>");
        DataTable data = new DataTable();
        adap.Fill(data);
        return data;
    }  
} 
```

然后在您的视图中适当地显示它：

```
@model MainPageViewModel 

@{ ViewBag.Title = "MainPage"; }

<div id="left-bar">
  <ul>
    @foreach (var category in Model.Categories)
    {
        <li>@category</li>
    }
  </ul>
</div>
<div id="center-content">
    <ul>
    @foreach (var product in Model.Products)
    {
        <li>@product.Name</li>
        <li>@product.Price..</li>
        .....
    }
  </ul>  
</div> 
```

* * *

**更新**

这是关于您提到您的数据库表和列定期更改的评论。

我不能肯定，但也许你不应该每天都制作这样的表格，也许你可以拥有更好的数据库设计，或者 RDBMS 不适合你，你应该研究一下 NoSql数据库（如[MongoDB](http://www.mongodb.org/)）

不过，如果您继续使用上面的代码，我建议将其放入自己的数据层类中。

还可以看看[Dapper](http://code.google.com/p/dapper-dot-net/)，它是一个非常薄的数据访问层，它只使用 sql 查询或存储过程从数据库中获取对象。（正是您所需要的）它是由 stackoverflow 制作和使用的。

# javascript - 创建一个下降的 div（适用于 IE）

> ID：12233752
> 
> 赞同：0
> 
> 时间：2012-09-02T05:54:33.587
> 
> 标签：javascript, jquery

以下是我最初的问题和代码，但根据 CoreyRS 的评论，让我添加一些细节。我想创建一个属于页面并消失的 div `like a rock falling through the air`。关键是它必须在 IE 9 和 8 中工作。我发现一些 CSS3 动画在除 IE 之外的所有环境中都很*好用*。任何帮助表示赞赏。请提供代码示例。

*原始问题和代码*

我正在尝试使用 jQuery 中的 slideDown 动画来为 div 设置动画。这个想法是一个 div 将显示然后向下滑动页面然后淡出。最好它会在下降时淡出，但我什至无法让 div 下降。这是我的代码：

**JS：**

```
var $j = jQuery.noConflict();
$j(window).load(function() {
    $j('#loading').fadeOut('slow', function() { //fade out loading div
        $j("#content-wrap").fadeIn("slow", function() { // show content div
            setTimeout( function() { // delay slideDown effect
                $j('#animate').slideDown('slow', function() {
                    // script to fade out or hide animate div
                }, 2000 );
            });    
        });
    });
}); 
```

**HTML：**

```
<div id="loading">
    <h2 class="textcenter">Loading...</h2>
    <img id="loading-image" class="center" src="/images/ajax-loader.gif" />
</div>
<div id="content-wrap" class="hide">
  <div id="animate">
    <img class="fear" src="/sign.png" />
      </div>
    <div class="img-center">
        <img class="feature-image" src="/Prairie-Grass.jpg" />
    </div>
</div> 
```

我做错了什么，我会接受任何会在屏幕上创建一个下降的 div 的建议，该 div*将*在 IE 9 和 8 中工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T06:28:01.450

没有测试，但试试这个。您需要根据需要编辑宽度/高度属性等，如果您有 css 样式表，显然不要使用内联样式。

```
<style>
#animate {
    width:100px;
    height:100px;
    position:fixed;
    top:-100px;
    left:50%;
    margin-left:50px;
    z-index:1;  
}
</style>

<script>
var $j = jQuery.noConflict();
$j(window).load(function() {
    $j('#loading').fadeOut('slow', function() {
        $j("#content-wrap").fadeIn("slow", function() {
            $j('#animate').delay(2000).animate({'top':'50%'}, 500);
            $j('#animate').delay(2000).fadeOut(500);   
        });
    });
});
</script> 
```

# excel - 如何通过宏使用VB代码依次更改具有5秒时间间隔的excel表？

> ID：12233753
> 
> 赞同：-1
> 
> 时间：2012-09-02T05:54:32.940
> 
> 标签：excel

我在为研讨会准备的工作簿中有 10 多张 excel 表格。我必须为这些表格制作幻灯片，以便每张表格都应该自动一个接一张地更改。你能帮我解决这个任务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T08:37:12.917

这可能会帮助您入门。它将每 5 秒显示工作簿中的每个工作表，从工作簿中的第一个工作表开始，到最后一个工作表结束。

```
Sub StartSlideShow()
    Application.OnTime Now + TimeValue("00:00:05"), "ShowNextSheet"
End Sub

Sub ShowNextSheet()
    Dim lastIndex As Integer, nextShtIndex As Integer

    lastShtIndex = Worksheets.Count
    nextShtIndex = ActiveSheet.Index + 1

    If nextShtIndex <= lastShtIndex Then
        Worksheets(nextShtIndex).Select
        StartSlideShow
    Else
        MsgBox "End of slide show"
    End If
End Sub 
```

# c++ - 什么是隐式共享类？

> ID：12233754
> 
> 赞同：6
> 
> 时间：2012-09-02T05:54:38.303
> 
> 标签：c++, oop, qt, memory-management, qt4

在过去的 6 个月里，我一直在使用 Qt，但我仍在努力理解**隐式共享类**的概念。我有以下问题：

1.  什么是隐式共享类以及它们如何工作？
2.  奇趣科技的 Qt 网站称它最大限度地利用了资源并最大限度地减少了复制。请解释一下这是怎么发生的。
3.  谁能举个例子来更好地理解？也欢迎任何网站的链接，用或没有例子来解释这个概念。

感谢所有答案的家伙..关于这个主题，我提出了另一个观点是堆栈对象指向堆分配的共享数据..这是图表......![这个图片..](../Images/d898b1d9af813ec2fc22788d050c96fd.png)

对此有什么看法？？？...引用计数到底是什么？？当对象引用公共共享数据时，它是一种计数器吗？反之亦然？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-02T06:15:58.980

想象一下。您正在使用 C++03 并编写：

```
string a("hello");
string b = a; 
```

此时您有两个字符串对象`a`，`b`每个对象都有自己的缓冲区来存储字符数组。即使缓冲区的内容完全相同，`a`仍然`b`有自己的“hello”副本。这是对内存的浪费。如果他们共享缓冲区，您将不得不使用单个字符数组来存储两个字符串的“hello world”。

现在使用 QString 有点不同：

```
QString a("Hello");
QString b = a; 
```

在这种情况下，只`a`创建了一个 char 数组来存储“hello”。`b`而不是创建自己的 char 数组，而是简单地指向`a`的 char 数组。这样可以节省内存。

现在，如果你这样做`b[0]='M'`，id est，你修改`b`，然后`b`创建它自己的 char 数组，复制`a`'s 数组的内容，然后修改它自己的数组。

在 Java 中，字符串是不可变的对象。换句话说，Java 没有在`String`类上提供任何方法来修改其内容。这样做是为了始终可以共享此类数据。

补充别人提到的东西：

**我怎么知道我可以释放 char 数组？**
这就是“参考计数”的用途。当一个对象被创建并设置为指向 char 数组时，它的引用计数将增加 1，因此它知道有多少对象仍在使用它。当指向它的对象被销毁时，引用计数会减少。当计数器达到零时，char 数组知道没有人在使用它，因此可以释放它。

这是引用计数的一个非常粗略的实现。无论如何，我并不打算准确或正确。我忽略了在 C++ 中实现复制构造函数和赋值运算符的正确方法。我无法检查实施是否有效。认为它是有点像 C++ 的算法描述。我只是想教这个概念。但是想象一下你有这些类：

```
class SharedData{
  private:
    int refcount;
    int data;

  public:
    SharedData(int _data){data=_data;refcount=1;}
    void incRef(){refcount++;}
    void decRef(){--refcount; if(refCount==0) delete this;}
};

class Data{
       SharedData* shared;
    public:
        Data(int i){shared = new Data(i);}
        Data(const Data& data){shared = data.shared; shared->incRef();}
        const Data& operator=(const Data& data){if(shared!=data.shared){
                                       shared->decRef();
                                       shared = data.shared;
                                       shared->incRef();}
        }
        ~Data(){shared->decRef();}
}; 
```

类的两个对象`Data`可以共享同一个`SharedData`对象，所以：

```
void someFunction() {
    Data a(3) //Creates a SharedData instance and set refcount to 1
    if (expression) {
       Data b = a; //b points to the same SharedData than a. refcount is 2
       b = Data(4);// b points to  diferent SharedData. refcount of SharedData of a is decremented to 1 and b's SharedData has refcount 1
       //destructor of b is called. Because shared data of b has now refcount == 0, the sharedData is freed;
    }
    //destructor of a is called, refcount is decremented again
    // because it is zero SharedData is freed
} 
```

因此资源使用最大化，副本最小化。两者都`a`使用`b`相同的`SharedData`（又名 int `3`）。. `4`没有从 复制到`a`，`b`它们只是共享相同的数据。一个 int 没什么大不了的，但想象一下，如果`SharedData`有一些大字符串或任何其他更复杂的数据结构。只复制一个指针比复制几十个字节要快得多。当你真的不需要副本时，它还可以节省大量内存。

**什么是写时复制？**
回想一下我在我们做的时候说过的话`b[0]='M'`。那是*写时复制*。`b`并且`a`共享相同的字符数组。但`b`需要修改字符串。它不能直接这样做，因为那也会修改字符串`a`。因此`b`必须创建自己的 char 数组副本才能更改它。因为它只需要在修改数组时创建副本，所以它被称为*copy-on-write*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T05:57:16.480

根据我对[http://doc.qt.io/archives/qt-4.7/implicit-sharing.html](http://doc.qt.io/archives/qt-4.7/implicit-sharing.html)的阅读...

它基本上只是任何使用引用计数和写时复制以避免不必要地复制由类管理的数据的任何类的通用名称。

### 引用计数

引用计数是一种技术，可确保只要有人对它感兴趣，对象就会一直存在。任何想要保留对象一段时间的代码都会增加引用计数。当它对对象失去兴趣时，它会减少引用，如果引用计数为零，这意味着它是最后一个感兴趣的一方，它也会破坏该对象。

在 Qt 的共享类的情况下，引用计数似乎是完全自动的。引用计数通过相关类的构造函数和析构函数进行管理。

### 写时复制

除了通过引用计数进行共享之外，类还可以通过在对其进行任何修改之前复制底层数据来确保不同的各方不会破坏彼此的对象版本。这称为写时复制或 COW 习语。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T06:06:28.417

（免责声明：我从未使用过 Qt，所以我可能在某些细节上错了 - 欢迎评论和改进......）

[官方文档](http://doc.qt.io/archives/qt-4.7/implicit-sharing.html)写得很好。由此我推断隐式共享类是其实例实际上不复制其底层数据的类（这将是一个 CPU 和内存密集型操作），而是它们只持有对它的引用（即有一个公共支持引用计数数据对象）。这种优化使对象使用更少的内存和 CPU 时间，而对于他们的环境，似乎每个对象都有自己独立的数据。当然，如果对象是可变的，则必须进行实际的逐字节数据复制，并且这些类会自动实现此机制（setter 方法使用该`detach()`方法使对象独立于公共数据并创建自己的实际副本）。

# mysql - 将 MySQL DBDUMP DB 导入 MSSQL

> ID：12233757
> 
> 赞同：0
> 
> 时间：2012-09-02T05:54:54.393
> 
> 标签：mysql, sql-server, mysqldump

我有一个 MySQL 数据库的数据库转储。现在我需要使用 MySQL DBDUMP（将 MySQL DB 导入 MSSQL）将所有这些表和数据添加到 MSSQL。

我已经阅读了一些[帖子](https://stackoverflow.com/questions/9228876/import-mysql-dump-file-into-mssql)和[文章](http://www.codeproject.com/Articles/29106/Migrate-MySQL-to-Microsoft-SQL-Server)，但没有任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T05:57:02.410

我倾向于遵循这个流程：

*   恢复到mysql（简单）
*   使用某种数据泵从 mysql 拉到 sql server（有很多工具，这里有一个[http://www.sqlmanager.net/en/products/mssql/datapump](http://www.sqlmanager.net/en/products/mssql/datapump)）

这些步骤将快速可靠，不会让人头疼....

# silverlight - 使用 Visual State Manager silverlight 和 PRISM 显示/隐藏视图

> ID：12233771
> 
> 赞同：0
> 
> 时间：2012-09-02T05:58:23.450
> 
> 标签：silverlight, prism, visualstatemanager

我有一个使用 radOutlookbar 在屏幕上显示不同数据集（用户、国籍等）的应用程序。我已经设法在每个项目中加载所需的视图以毫无问题地显示数据。

然后，我为每个数据集（用户、国籍等）构建了视图，以显示所显示数据集中每个选定项目（即：用户）的详细信息。

案例：首先，当我单击它的项目时，我需要显示每个数据集的相应视图。其次，显示的视图将有一个选项来编辑/添加显示的详细信息。

我想使用 state-base-navigation 来实现这个场景。

因此，我在 ItemsControl 中有一个 PRISM 区域，其中 ItemsPanelTemplate 网格来托管加载的视图，基本上我为每个数据集加载视图。

问题，我应该如何使用 VSM 根据所选数据集显示/隐藏相应的视图？

问题 2：我是否应该能够在加载的视图中定义另一个嵌套状态以启用每个视图的编辑/添加详细信息的场景？

如果有人对此有任何想法，那么有一个起始代码将有很大帮助。此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:07:25.600

可能还有其他访问 VSM 的方案，但我更喜欢为其创建 AttachedProperty。让我解释。

这是 VisualState 管理器

```
/// <summary>
/// Class will allow to change VisualSate on ViewModel via attached properties
/// </summary>
public static class VisualStateManagerEx
{
    private static PropertyChangedCallback callback = new PropertyChangedCallback(VisualStateChanged);

    /// <summary>
    /// Gets the state of the visual.
    /// </summary>
    /// <param name="obj">The obj.</param>
    /// <returns></returns>
    public static string GetVisualState(DependencyObject obj)
    {
        return (string)obj.GetValue(VisualStateProperty);
    }

    /// <summary>
    /// Sets the state of the visual.
    /// </summary>
    /// <param name="obj">The obj.</param>
    /// <param name="value">The value.</param>
    public static void SetVisualState(DependencyObject obj, string value)
    {
        obj.SetValue(VisualStateProperty, value);
    }

    /// <summary>
    /// DP for 'VisualState'
    /// </summary>
    public static readonly DependencyProperty VisualStateProperty =
        DependencyProperty.RegisterAttached(
            "VisualState",
            typeof(string),
            typeof(VisualStateManagerEx),
            new PropertyMetadata(null, VisualStateManagerEx.callback)
        );

    /// <summary>
    /// Visuals the state changed.
    /// </summary>
    /// <param name="d">The d.</param>
    /// <param name="e">The <see cref="System.Windows.DependencyPropertyChangedEventArgs"/> instance containing the event data.</param>
    public static void VisualStateChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        //Control changeStateControl = d as Control;
        FrameworkElement changeStateControl = d as FrameworkElement;
        if (changeStateControl == null)
            throw (new Exception("VisualState works only on Controls type"));

        if (Application.Current.Dispatcher.CheckAccess() == false)
        {
            // Wrong thread
            System.Diagnostics.Debug.WriteLine("[VisualStateManagerEx] 'VisualStateChanged' event received on wrong thread -> re-route via Dispatcher");
            Application.Current.Dispatcher.BeginInvoke(
                //() => { VisualStateChanged(d, e); }
                VisualStateManagerEx.callback
                , new object[] { d, e });    //recursive
        }
        else
        {
            if (string.IsNullOrEmpty(e.NewValue.ToString()) == false)
            {
                //VisualStateManager.GoToState(changeStateControl, e.NewValue.ToString(), true);
                VisualStateManager.GoToElementState(changeStateControl, e.NewValue.ToString(), true);
                System.Diagnostics.Debug.WriteLine("[VisualStateManagerEx] Visual state changed to " + e.NewValue.ToString());
            }
        }
    }
} 
```

现在 - 在 XAML 中，您将它附加到您的 ViewModel，如下所示：

```
<UserControl
     xmlns:VSManagerEx=clr-namespace:Namespace.namespace;assembly=Assembly01"
     VSManagerEx:VisualStateManagerEx.VisualState="{Binding Path=ViewModelVisualState, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
     ...
     ... 
```

现在，您在 XAML 中的 VSM 已绑定到`ViewModelVisualState`ViewModelBase 中的属性（或将绑定到`DataContext`this 的任何内容`UserControl`。所以实际上在您使用的 ViewModelBase 中是这样的：

```
/// <summary>
/// Base class for all 'view-models'
/// </summary>
[Export(typeof(ViewModelBase))]
public abstract class ViewModelBase : INavigationAware, INotifyPropertyChanged
{
    private SynchronizationContext parentSyncContent;

    #region VisualState
    private string viewModelVisualState = string.Empty;
    /// <summary>
    /// Gets or sets the state of the view model visual.
    /// </summary>
    /// <value>
    /// The state of the view model visual.
    /// </value>
    public virtual string ViewModelVisualState
    {
        get { return viewModelVisualState; }
        set
        {
            viewModelVisualState = value;
            RaisePropertyChanged(this, "ViewModelVisualState");
        }
    }
    #endregion

    /// <summary>
    /// Raises the property changed.
    /// </summary>
    /// <param name="Sender">The sender.</param>
    /// <param name="PropertyName">Name of the property.</param>
    public void RaisePropertyChanged(object Sender, string PropertyName)
    {
        parentSyncContent.Post((state) =>
        {
            if (PropertyChanged != null)
                PropertyChanged(Sender, new PropertyChangedEventArgs(PropertyName));
        }, null);
    }

    ...
    ... 
```

所以 - 在任何从这个 ViewModelBase 继承的 ViewModel 中都可以声明它自己的 VMS 状态并像这样管理它们：

```
 [Export(typeof(IViewModel1))
    public ViewModel1 : ViewModelBase, IViewModel1
    {

          private const string VM_STATE_WORKING = "WorkingState";

          internal void StartWorking()
          {
               this.ViewModelVisualState = VM_STATE_WORKING;
    ...
    ... 
```

关于问题 2：不-您不需要在任何内容中声明任何其他视图。阅读有关导航的 PRISM 文档。关于如何创建支持各种表示逻辑的 View/ViewModel 有很好的示例。

这对您有帮助吗？

# c# - 如何在 C# 中获取 Javascript 变量值

> ID：12233775
> 
> 赞同：3
> 
> 时间：2012-09-02T05:59:18.880
> 
> 标签：c#, javascript

我有两个纬度/长表，每个表 1000 行。我想使用 Google Map API 计算两个纬度/经度之间的距离并将距离存储在 DB 中。代码工作正常，但问题是如何从 javascript 返回计算的距离。我尝试隐藏字段来存储距离，因为我在页面加载中编写了以下代码，但它不起作用：

```
 SqlConnection sql_con = new SqlConnection("Database=myDB;Server=mySever;User Id=myID;password=PWD");
        SqlCommand sql_cmd = new SqlCommand("select Zip,Latitude,Longitude from ZipCodes", sql_con);
        SqlDataAdapter sql_adt = new SqlDataAdapter(sql_cmd);
        DataSet dsZip = new DataSet();
        sql_adt.Fill(dsZip);

        sql_cmd = new SqlCommand("select * from MyPlaceLatLong", sql_con);
        sql_adt = new SqlDataAdapter(sql_cmd);
        DataSet dsStore = new DataSet();
        sql_adt.Fill(dsStore);

        for (int zcnt = 0; zcnt < dsZip.Tables[0].Rows.Count; zcnt++)
        {
            for (int i = 0; i < dsStore.Tables[0].Rows.Count; i++)
            {
                Page.ClientScript.RegisterClientScriptBlock(GetType(), "myScssript", "<script>" +
                 "var origin1 = new google.maps.LatLng("+dsZip.Tables[0].Rows[zcnt]["Latitude"].ToString()+","+ dsZip.Tables[0].Rows[zcnt]["Longitude"].ToString()+");" +
                 "var origin2 = new google.maps.LatLng(" + dsStore.Tables[0].Rows[i]["lat"].ToString() + "," + dsStore.Tables[0].Rows[i]["long"].ToString() + ");" +
                  //"var origin1 = new google.maps.LatLng(55.930385, -3.118425);" +
                  //"var origin2 = new google.maps.LatLng(51.483061, -0.004151);" +
                 "var service = new google.maps.DistanceMatrixService();" +
                 " alert('Made it to calculateDistances');" +
                 "service.getDistanceMatrix(" +
                 "{" +
                   "origins: [origin1]," +
                   "destinations: [origin2]," +
                   "travelMode: google.maps.TravelMode.DRIVING," +
                   "unitSystem: google.maps.UnitSystem.IMPERIAL," +
                   "avoidHighways: false," +
                   "avoidTolls: false" +
                 "}, callback);" +
                 "function callback(response, status)" +
                   "{" +
                    "if (status == google.maps.DistanceMatrixStatus.OK) { " +
                    "var origins = response.originAddresses;   " +
                    "var destinations = response.destinationAddresses;" +
                    "for (var i = 0; i < origins.length; i++) {" +
                    "var results = response.rows[i].elements;" +
                    "for (var j = 0; j < results.length; j++) {" +
                    "var element = results[j];" +
                    "var distance = element.distance.text;" +
                    "var duration = element.duration.text; " +
                    "var from = origins[i];" +
                    "var to = destinations[j];" +
                   "alert('The distance:'+ distance);" +
                    "}}}}" +
               "</script>");

            }
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T02:22:46.340

您需要在 JavaScript 中设置隐藏字段的值，我不相信我在那里看到。在您的 ASP 中声明该字段，如下所示：

```
<input type="hidden" id="txtDistance" runat="server" /> 
```

在您的 JavaScript 中，将其添加到“函数回调（响应，状态）”的末尾：

```
 document.getElementById("txtDistance").value = distance; 
```

然后在你的 C# 代码中，你可以像这样访问这个值：

```
string cDistance = txtDistance.Value; 
```

//原文为字符串 cDistance = txtDistance.value;

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-15T12:42:50.427

这是我完全成功使用的。

[https://stackoverflow.com/a/44570554/7991036](https://stackoverflow.com/a/44570554/7991036)

为了提供更多细节，我编写了一个基于标准的类`WebBrowser`。在这个类中，我添加了以下方法：

```
/// <summary>
/// Execute and get the returned value from the JavaScript into HTML page without appending it.
/// </summary>
/// <param name="strJS">JavaScript to execute.</param>
/// <returns>Dynamic result depending on JavaScript function code.</returns>
public dynamic JSExecuteAndReturnVal(string strJS)
{
    dynamic dynResult = Document.InvokeScript("eval", new[] { strJS });

    return dynResult;
} 
```

每次我需要 JavaScript 代码中的一些值时，我都会使用此方法，因为该类正在导航到相关网页。该方法接受任何类型的纯 JavaScript 代码，因此它可以返回任何类型的值，直接取决于代码。

例如，如何使用该方法：

```
string strClassName = "whatever";
string strJS = "function JSDoIt(){objResult = document.getElementsByClassName('" + strClassName + "')[0]." +
"textContent; return { Result: objResult }; }; JSDoIt();";
dynamic dynJSResult = myWebBrowser.JSExecuteAndReturnVal(strJS);
decimal.TryParse(dynJSResult.Result.ToString(), out decimal nTotal); 
```

诀窍是使用结构化对象来返回值。在 C# 代码方面，您确实需要牢记这一点，才能正确获得正确返回的值。

使用此示例，您无需在任何网页中隐藏任何 HTML 对象即可从任何 JavaScript 函数中获取结果。

# c# - 通过命令行仅构建 VS Setup 项目

> ID：12233780
> 
> 赞同：5
> 
> 时间：2012-09-02T06:00:07.040
> 
> 标签：c#, visual-studio-2010, command-line, setup-project

我有一个包含许多项目和一个安装项目 (.vdproj) 的解决方案。我希望能够通过命令行仅构建安装项目。

我试着用

```
devenv /build Debug "C:\\MySolution\MySolution.sln" /project "CSharpWinApp\CSharpWinApp.vdproj" /projectconfig Debug 
```

但它也构建了我其余的解决方案项目，我想避免它。我连续尝试了几次 - 没有项目发生变化，但它仍然构建了一切。我试图删除 .vdproj 项目依赖项，但没有奏效。我收到消息“此依赖项已由项目系统添加，无法删除”。

有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-20T13:32:02.933

使用以下命令行来构建设置项目。
*注意：对安装项目的支持已从 Visual Studio 2012 中删除。*

```
devenv "c:\your solution file.sln"  /Project "c:\your setup project file.vdproj" /Build "Release" 
```

如果您确实*必须*使用 msbuild，请创建一个 msbuild 项目文件并使用 Exec 任务调用上面的命令行，如 Hassan 的回答中所示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T07:01:22.560

您可以在设置解决方案中隔离您的设置，以确保它不会编译您的应用程序。要构建您的设置项目，您可以使用 TFSBuild 2010 执行此操作，如下所示：

首先，要自动构建 .vdproj 项目，您需要编写自己的 msbuild 文件，因为它们不是 msbuild 格式，因此 TFS Build 不知道如何处理它们。我在网上找到了一些关于如何做到这一点的好例子，但我为 2010 年更新了一些。这里是：

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0"> 
  <Target Name="Build"> 
    <PropertyGroup>
      <DevEnv>$(ProgramFiles)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.com</DevEnv>
      <SolutionFile>$(MSBuildProjectDirectory)\MySolution.sln</SolutionFile>
      <ProjectFile>$(MSBuildProjectDirectory)\MySetupProject\MySetup.vdproj</ProjectFile>
      <Configuration>Release</Configuration>
    </PropertyGroup>
    <Exec Command="$(DevEnv)  $(SolutionFile) /Rebuild $(Configuration)  /Project  $(ProjectFile)  /ProjectConfig  $(Configuration) /Log" ContinueOnError="false" IgnoreExitCode="false" WorkingDirectory="$(MSBuildProjectDirectory)" /> 
  </Target> 
</Project> 
```

感谢伦纳德伍迪

# java - 有没有更快的方法来遍历 Sqlite 查询中的行？

> ID：12233784
> 
> 赞同：14
> 
> 时间：2012-09-02T06:00:40.960
> 
> 标签：java, android, sqlite, android-cursor

我正在使用以下几行来循环 Sqlite 查询的行。

```
this.open(); // opening db
Cursor cursor = db.rawQuery(strQuery, null);

cursor.moveToFirst();
do {    

    // do something    

} while (cursor.moveToNext());

cursor.close(); 
```

当行数约为 15000 时，需要很长时间。**空`while`块**`while`大约需要 4 秒，有一些代码的块大约需要 6 秒。它表明以这种方式对行进行迭代非常耗时。

有没有更快的方法来循环在 android 和 Sqlite 中的行？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T06:27:33.430

优化循环内的操作是提高整个操作速度的唯一方法。例如，如果您`getColumnIndex`在每次迭代中都进行调用，那么您将失去宝贵的时间。做一次，存储价值。

用于`traceView`找到您正在浪费时间的地方并在那里进行改进。遗憾的是我无法给出具体的答案，因为我不知道你在循环中做什么。

* * *

[Traceview 调试](http://developer.android.com/tools/debugging/debugging-tracing.html)

# python - 如何使用reportlab在PDF中添加总页数

> ID：12233787
> 
> 赞同：3
> 
> 时间：2012-09-02T06:01:11.660
> 
> 标签：python, django, reportlab

```
 def analysis_report(request):

       response = HttpResponse(mimetype='application/pdf')
       response['Content-Disposition'] = 'attachment;filename=ANALYSIS_REPORT.pdf'
       buffer = StringIO()
       doc = SimpleDocTemplate(buffer)
       doc.sample_no = 12345
       document = []
       doc.build(document, onLaterPages=header_footer)

   def header_footer(canvas, doc):
       canvas.saveState()

       canvas.setFont("Times-Bold", 11)
       canvas.setFillColor(gray)
       canvas.setStrokeColor('#5B80B2')
       canvas.drawCentredString(310, 800, 'HEADER ONE GOES HERE')
       canvas.drawString(440, 780, 'Sample No: %s' %doc.sample_no)

       canvas.setFont('Times-Roman', 5)
       canvas.drawString(565, 4, "Page %d" % doc.page) 
```

我上面的代码可以显示页码，但我的问题是如何显示“Y 页 X”，其中 Y 是页数，X 是当前页。

我遵循了这个[http://code.activestate.com/recipes/546511-page-x-of-y-with-reportlab/](http://code.activestate.com/recipes/546511-page-x-of-y-with-reportlab/)，但他们使用**canvasmaker**进行了解释，因为我在构建中使用**OnlaterPages**参数。

我如何使用 canvasmaker 实现上述目标，或者是否有任何使用 OnLaterPages 的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T06:57:19.163

这是改进的配方[http://code.activestate.com/recipes/576832/](http://code.activestate.com/recipes/576832/)应该适用于图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-24T12:05:32.917

另一种可能的解决方法是使用 pyPDF（或任何其他具有功能的 pdf-lib）读取之后的总页数`doc.build()`，然后通过交换相应`Paragraph()`的 's. 这种方法可能更hackish，但是没有子类化就可以了。

例子：

```
from pyPdf import PdfFileReader
[...]
story.append(Paragraph('temp paragraph. this will be exchanged with the total page number'))
post_story = story[:] #copy the story because build consumes it
doc.build(story) #build the pdf with name temp.pdf
temp_pdf = PdfFileReader(file("temp.pdf", "rb"))
total_pages = cert_temp.getNumPages()
post_story[-1] = Paragraph('total pages: ' + str(total_pages))
doc.build(post_story) 
```

# python - Python中的reducelist：类似于reduce，但给出中间结果列表

> ID：12233788
> 
> 赞同：12
> 
> 时间：2012-09-02T06:01:14.250
> 
> 标签：python, list, functional-programming, reduce

你知道`reduce`Python 中的方便函数。例如，您可以使用它来总结一个这样的列表（假设没有内置的[sum](http://docs.python.org/library/functions.html#sum)）：

```
reduce(lambda x,y: x+y, [1,2,3,4], 0) 
```

返回 (((0+1)+2)+3)+4 = 10。

现在，如果我想要一个中间金额列表怎么办？在这种情况下，`[1,3,6,10]`。

这是一个丑陋的解决方案。有没有更蟒蛇的东西？

```
def reducelist(f, l, x): 
  out = [x]
  prev = x
  for i in l:
    prev = f(prev, i)
    out.append(prev)
  return out 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-02T06:06:12.623

我最喜欢的，如果你最近的话：

```
Python 3.2.1 (default, Jul 12 2011, 22:22:01) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import itertools
>>> itertools.accumulate([1,2,3,4])
<itertools.accumulate object at 0x1006baad0>
>>> list(itertools.accumulate([1,2,3,4]))
[1, 3, 6, 10] 
```

[累积](http://docs.python.org/dev/library/itertools.html#itertools.accumulate)也接受一个函数参数[甚至更近，虽然 - 3.3]：

```
>>> list(itertools.accumulate([1,2,3,4], lambda x,y: x+y))
[1, 3, 6, 10]
>>> list(itertools.accumulate([1,2,3,4], lambda x,y: x+y+1))
[1, 4, 8, 13] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-02T06:14:35.500

如果您为生成器制作解决方案，它会更短，并且更好地遵循函数式编程风格。我也会为 x 添加一个默认值 0：

```
def reducelist(f, lst, x=0): 
  prev = x
  for i in lst: 
    prev = f(prev, i)
    yield prev 
```

那绝对是更*蟒蛇*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-20T07:41:45.783

注意：在我写这篇文章之前，不知何故我错过了@DSM 的答案。去阅读并投票，而不是，我刚刚做了。如果您想要更长的答案，请回来。

Python 有这个，它被称为累积，它在 Python 3.2 开始的 itertools 标准库模块中实现。可选的第二个参数“func”是在 3.3 中添加的。

```
import itertools

l = [1,2,3,4]
out = itertools.accumulate(l) 
```

在这种情况下`out`是一个可迭代的。如果你需要一份清单，那么

```
out = list(itertools.accumulate(l)) 
```

该`accumulate()`函数可用于生成运行总计或“累计和”。默认功能是加法。我们可以传入一个函数作为第二个参数：

```
import itertools
import operator

l = [1,2,3,4]
factorial = itertools.accumulate(l, operator.mul) 
```

这里我们传入 operator.mul 进行乘法运算以生成运行乘积。该`operator`模块导出了一组与 Python 的内在运算符相对应的高效函数。

当然，我们不仅限于`operator`模块中定义的功能。您可以使用任何接受第一个参数中元素类型的 2 个参数的函数。您可以发挥创意，但在这里我将做相反的事情，并使用 lambda 显式实现默认的加法/求和行为：

```
import itertools

l = [1,2,3,4]
out = itertools.accumulate(l, lambda a, b: a + b) 
```

最后，既然你问了，我认为 using`accumulate`比你的循环示例更 Pythonic。

# facebook - 无法让管理员访问我的网站 Facebook 评论框

> ID：12233789
> 
> 赞同：0
> 
> 时间：2012-09-02T06:01:14.383
> 
> 标签：facebook, facebook-graph-api

我正在开发我的新网站，我想整合 facebook 评论框，以便人们可以留下真实的反馈。

我有网站上的盒子，创建了我的应用程序，得到了我的应用程序 ID 和我的 Facebook ID。将它们放在元标记中，但它仍然不会让我删除人们的评论。我有一个朋友给我写了一个测试评论让我试试。

该页面是 www dot bodmaster dot com/product/Bodology/EFX-10%20Oxygenator

我将鼠标悬停在我的 facebook 显示图片上以从 url 获取我的 FB ID...

![在此处输入图像描述](../Images/b291cbcead99446ae763a416f53ae6f9.png)

这就是我获取应用 ID 并显示所有设置的方式...

![在此处输入图像描述](../Images/4ab8c9e5f671889ec59f25987e7dfebc.png)

我在页面中添加了以下元标记...

```
<meta property="fb:admins" content="10150317838260636" />
<meta property="fb:app_id" content="414103721981616" /> 
```

只是为了彻底，这是添加到页面的 fb 脚本......

```
<!-- facebook script -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=414103721981616";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<!-- end facebook script --> 
```

和评论框的代码......

```
<?php $url = (!empty($_SERVER['HTTPS'])) ? "https://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'] : "http://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI']; ?>

<div class="fb-comments" data-href="<?php echo urlencode($url); ?>" data-num-posts="10" data-width="470"></div> 
```

Facebook 确实说过，“更新服务器可能需要一些时间”

一个小时后还是不行，是我等的时间不够长吗？

您的向导将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:02:29.547

我在这里看到了问题：

> 我有一个朋友给我写了一个测试评论让我试试。该页面是 www dot bodmaster dot com/product/Bodology/EFX-10%20Oxygenator

**改变：**

```
<?php $url = (!empty($_SERVER['HTTPS'])) ? "https://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'] : "http://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI']; ?> 
```

**至：**

```
<?php $url = (!empty($_SERVER['HTTPS'])) ? "http://www.".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'] : "http://www.".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI']; ?> 
```

**原因：**

```
Your **site URL** is: http://www.bodmaster.com (set in your app settings)
Your comments URL is set to: http://bodmaster.com **or** https://bodmaster.com 
```

如上所述更改代码并...

```
Your comments URL is set to: http://bodmaster.com (even if SSL is currently in use) 
```

让我知道这个是否奏效。

# javascript - mootools getElements 失败

> ID：12233792
> 
> 赞同：0
> 
> 时间：2012-09-02T06:03:10.847
> 
> 标签：javascript, mootools

我想使用 mootools 访问表单。我的 html 代码如下所示：

```
 <table border="0">

        <tr>
          <td>username</td>
          <td><input type="text" id="username" value="bla "/></td>
        </tr>
        <tr>
          <td>password</td>
          <td><input type="password" id="password"/></td>
        </tr>
        <tr>
          <td>project</td>
          <td><input type="text" id="project"/></td>
        </tr>
        <tr>
          <td></td>
          <td><input type="submit" id="login" value="login"/></td>
        </tr>
      </table> 
```

我的 JavaScript 喜欢：

```
 window.addEvent('domready', function() {  
        //We are going to fill this with Mootools goodness  

  var jsonReq = new Request.JSON({
  url: 'test.php',
  method: 'post',
  data: {
   username: $('username').value,
    password: $('password').value,
    project : $('project').value
  },
    onSuccess: function( response ) 
    {
       if ( response.status )
       {
        document.location = "home.html"   
       }
       else
       {
          $('response').addClass('error');
           $('response').set('html', response.message);
         alert( "Msg" + response.message ); 
       }
    },
   // onRequest: function() { alert('Request made. Please wait...'); },
    onError: function( response, err ) { alert('Faiure' + response + err); },
    onFailure: function( response ) { alert('Faiure' + response); },

});

$('login').addEvent('click',function( event ){
     event.stop();
     jsonReq.send();
});

    }); 
```

问题是，如果设置了 value 属性，我可以在我的 php 脚本中检索它，但没有任何变化。

所以我总是看到 username=bla 但没有变化...有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:19:50.137

因为数据对象在 domready 状态下被填充。在那个时候，没有任何价值。

您可以在提交处理程序中执行以下操作：

```
jsonReq.setOptions({
    data: document.id('someform')
}).send(); 
```

您可以将实际的表单元素传递给数据，它会为您序列化它。否则，做你上面做的

# mercurial - 两个远程存储库之间的 Mercurial 推送和拉取

> ID：12233793
> 
> 赞同：2
> 
> 时间：2012-09-02T06:03:17.397
> 
> 标签：mercurial

是否可以从一个远程存储库推送到另一个远程存储库？

我有一个案例，我将本地更改推送到远程集成存储库。一旦获得批准，我希望将集成存储库推送到发布存储库（我将从那里构建我的发布）。

这在技术上可行吗？

编辑：第一个存储库在我的磁盘上是本地的。2nd 和 3rd 都是我服务器上的远程存储库，我没有文件系统访问权限。我希望能够从我的电脑从第 2 推到第 3（使用我本地的 HG/TortoisHG 客户端）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T22:06:36.767

简单的方法是登录到您的服务器，登录到`cd`集成存储库，然后推送到发布存储库。

如果您没有这样的登录名，只需保留集成存储库的本地克隆，您*仅*用于本地推送到远程发布存储库：

```
$ hg clone <remote-integration-repo> integration
$ cd integration
$ hg push <remote-release-repo> 
```

对于后续推送，请执行

```
$ cd integration
$ hg pull # optionally with -u option
$ hg push <remote-release-repo> 
```

如果您有多个集成和发布存储库，您可能希望在脚本中自动执行这些步骤。

基本信息是，如果您从本地或远程机器推送到发布存储库，它并没有真正的不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T08:57:57.577

取决于您所说的“远程”是什么意思。如果您可以登录这些机器并且可以在它们之间建立 SSH 连接，那么这很容易实现。

# android - 带有 LIKE 的 SQlite 查询不起作用

> ID：12233798
> 
> 赞同：-2
> 
> 时间：2012-09-02T06:04:45.040
> 
> 标签：android, sqlite

我已经尝试了stackoverflow的一些答案，但我仍然收到错误...请有人告诉我问题是什么以及解决方案...

```
public Cursor getSearchCursor(String query) {
        // TODO Auto-generated method stub
        Cursor cd = notifdb.query(TABLE_NOTIFS, allColumns, COLUMN_NOTIF
                + " LIKE '%" + query + "%'", null, null, null, null);
        return cd;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:38:32.230

试试这个格式...

```
 public Cursor getSearchCursor(String query) { 

            return db.query(true, DB_TABLE, new String[] { KEY_ROWID, KEY_COLUMN1}, KEY_COLUMN1 + " LIKE" + "'%" + query + "%'", 
            null, null, null, null, null); 
        } 
```

# internet-explorer - 我想通过 iframe 显示一个文本文件，但它在 IE 中不起作用

> ID：12233799
> 
> 赞同：0
> 
> 时间：2012-09-02T06:05:08.903
> 
> 标签：internet-explorer, iframe

我想通过 iframe 显示一个文本文件，但它在 IE 中不起作用。它在 Mozilla Firefox 中运行良好。有任何想法吗？

下面是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>   
<meta http-equiv="Content-Type" content="text/plain; charset=ANSI" />
</head>
<body>

<iframe src='http://localhost/button3.txt'
 scrolling='no' frameborder='0'
 style='border:none; width:1300px; height:500px'></iframe>

</body>

</html> 
```

button.txt 包含用 php 编写的脚本。而不是显示它执行它的脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T12:29:43.617

我是 PHP 初学者。以下答案基于我在搜索时发现的内容：

**将 IFrame 的 src 设置为 PHP 文件**：

```
<iframe src='http://localhost/showTxt.php' scrolling='no' frameborder='0' style='border:none; width:1300px; height:500px'></iframe> 
```

**显示文本.php**：

*1.*

```
<?php
echo file_get_contents("test.txt");
?> 
```

或者

*2.*

```
<?php
$output=file_get_contents("test.txt");
highlight_string($output);
?> 
```

# android - 在 Android 中获取年、月和日期

> ID：12233803
> 
> 赞同：45
> 
> 时间：2012-09-02T06:05:48.713
> 
> 标签：android, calendar

我正在尝试使用以下代码获取今天的年份、月份和日期；

```
Calendar calendar = Calendar.getInstance();

int thisYear = calendar.get(Calendar.YEAR);
Log.d(TAG, "# thisYear : " + thisYear);

int thisMonth = calendar.get(Calendar.MONTH);
Log.d(TAG, "@ thisMonth : " + thisMonth);

int thisDay = calendar.get(Calendar.DAY_OF_MONTH);
Log.d(TAG, "$ thisDay : " + thisDay); 
```

但它给出了“2012 年 1 月和 28 年”，这不是今天的日期。我做错了什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-02T06:16:48.060

假设这是在模拟器上运行的，我是否正确？如果是这样，请正确设置模拟器日期，它应该是正确的。

根据记忆，该代码应该符合您的预期。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-11-12T12:26:52.827

```
Calendar calendar = Calendar.getInstance(TimeZone.getDefault());
calendar.get(Calendar.YEAR) 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-10-29T06:24:39.530

```
import java.util.Calendar;
import java.util.TimeZone;
import android.widget.Toast;

Calendar calendar = Calendar.getInstance(TimeZone.getDefault());

int currentYear = calendar.get(Calendar.YEAR);
int currentMonth = calendar.get(Calendar.MONTH) + 1;
int currentDay = calendar.get(Calendar.DAY_OF_MONTH);

Toast.makeText(this,"Today's Date: " + currentYear + currentMonth + currentDay, Toast.LENGTH_SHORT).show(); 
```

如果您的应用程序针对 Android API 27 平台或更高版本，“TimeZone”将非常有用

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-12-22T03:10:06.240

月份从零开始，因此您必须在给定月份加上 1 以显示我们熟悉的月份编号。

```
int thisMonth = calendar.get(Calendar.MONTH);
Log.d(TAG, "@ thisMonth : " + (thisMonth+1)); 
```

这将显示从 1 开始的当前月份。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-01-10T08:13:47.157

试试这个。。

```
 Calendar instance = Calendar.getInstance();
 currentMonth = instance.get(Calendar.MONTH);
 currentYear = instance.get(Calendar.YEAR);

 int month=currentMonth+1; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-02T06:29:12.137

尝试使用：

```
Date dt = new Date(); 
dt.getYear(); 
dt.getMonth(); 
dt.getDay(); 
```

看看你是否得到相同的结果。如果是这样，您的系统日期可能不同步。查看[Date 类文档](http://developer.android.com/reference/java/util/Date.html)以获取更多详细信息：

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-09-02T06:16:04.703

我试过你的代码，它给出了正确的输出。您应该尝试*在您尝试使用此代码的模拟器/手机中检查时间*。

根据 getInstance 文档，它默认设置为当前日期和时间。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-02T06:17:47.920

这给出了你的 android 系统的时间和日期，所以首先检查它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-27T06:53:54.447

您可以使用[SimpleDateFormat](https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

初始化为`@SuppressLint("SimpleDateFormat") final SimpleDateFormat dateAndTime = new SimpleDateFormat("DD-MM-yy", Locale.getDefault());`

和`String timeStamp = dateAndTime.format(new Date());`

# jquery - 停止 ui 选项卡的无限事件处理

> ID：12233807
> 
> 赞同：0
> 
> 时间：2012-09-02T06:06:29.190
> 
> 标签：jquery

如果用户单击第二个棕褐色而不在第一个选项卡上提交表单，我想显示一条警报消息，我面临的问题是用户单击选项卡时显示的无限警报消息，这是我编写的代码

```
 $(function() {
    $('#tabs').tabs({
        selected:<?php echo $param ?>,

        select: function(e, ui) {

            var thistab = ui;
            runMethod();

        }

    });

});
function runMethod(){
    if( $.trim($("#generalImportNo").text()) == "")
    {
        alert("You should fill all main information first.")                     
        $('#tabs').tabs({selected:1 });

    }
} 
```

我尝试使用`stopPropagation`但它不起作用，我怎样才能防止发生无限事件？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T06:13:22.700

你为什么不做这样的事情：

```
...
select: function(e, ui) {
   var thistab = ui;
   return runMethod();
}
...
function runMethod(){
    if( $.trim($("#generalImportNo").text()) == "")
    {
       alert("You should fill all main information first.")                     
       return false;
    }
    return true;
} 
```

如果`select`事件返​​回`false`，则不会选择您的选项卡。~~我现在无法测试，但那是我很久以前所做的。~~此外，您可能会发现 `$('#tabs').tabs({ disabled: [1, 2, 3], ... });`它非常有用，它会阻止您的用户单击不可用的选项卡。要通过代码启用您的选项卡，请使用`$('#tabs').tabs('enable', tabIndexToEnable);`

**UPD**：我创建了一个快速[演示](http://jsfiddle.net/n6FxB/)，似乎工作得很好。

**UPD2**：这是另一个[，](http://jsfiddle.net/n6FxB/3/)只是为了表明一切正常。

# algorithm - 如何从二进制堆中删除元素？

> ID：12233809
> 
> 赞同：10
> 
> 时间：2012-09-02T06:06:45.497
> 
> 标签：algorithm, data-structures, language-agnostic

据我了解，`binary heap`不支持删除随机元素。如果我需要从 a 中删除随机元素`binary heap`怎么办？

显然，我可以删除一个元素并将整个堆重新排列在`O(N)`. 我能做得更好吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-02T06:10:29.817

是和不是。

问题是**二叉堆不支持搜索**任意元素。寻找它本身`O(n)`。

但是，如果你有一个指向元素的指针（而不仅仅是它的值） -**你可以用最右边的叶子交换元素，删除这个叶子，然后重新**堆化相关的子堆（通过筛选新放置的元素尽可能多）。这会导致`O(logn)`删除，但需要指向您正在寻找的实际元素的指针。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-22T01:47:34.863

阿米特的回答是正确的，但这里还有一个细微差别：

可能需要将已删除项目的位置（放置最右边的叶子的位置）冒泡（与父级比较并向上移动直到父级大于您）。有时需要向下冒泡（与孩子比较并向下移动，直到所有孩子都比你小）。这一切都取决于具体情况。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-23T21:05:16.827

取决于“随机元素”的含义。如果这意味着堆包含元素 [e1, e2, ..., eN] 并且想要删除一些 ei (1 <= i <= N)，那么这是可能的。

如果您使用某个库中的二进制堆实现，则可能是它没有为您提供所需的 API。在这种情况下，您应该寻找另一个拥有它的库。

如果您要自己实现它，则需要两个额外的调用：

1.  A procedure deleteAtIndex(heap, i) that deletes the node at index i by positioning the last element in the heap array at i, decrementing the element count, and finally shuffling down/up the new ith element to maintain the heap invariant. The most common use of this procedure is to "pop" the heap by calling deleteAtIndex(heap, 1) -- assuming 1-origin indexing. This operation will run O(log n) (though, to be complete, I'll note that the highest bound can be improved up to O(log(log n)) depending on some assumptions about your elements' keys).

2.  A procedure deleteElement(heap, e) that deletes the element e (your arbitrary element). Your heap algorithm would maintain an array ElementIndex such that ElementIndex[e] returns the current index of element e: calling deleteAtIndex(heap, ElementIndex[e]) will then do what you want. It will also run in O(log n) because the array access is constant.

Since binary heaps are often used in algorithms that merely pop the highest (or lowest) priority element (rather than deleting arbitrary elements), I imagine that some libraries might miss on the deleteAtIndex API to save space (the extra ElementIndex array mentioned above).

# windows-8 - Windows 运行时 UI 组件

> ID：12233812
> 
> 赞同：2
> 
> 时间：2012-09-02T06:07:11.003
> 
> 标签：windows-8, windows-runtime, winrt-xaml

我听说过 Windows 运行时组件，但似乎它们不适用于 UI 组件。是否可以创建跨平台 UI 组件（例如基于 C#+xaml 的组件），它将跨所有投影 C#、C++、javascript 运行？我知道投影非常不同，需要特殊的环境才能运行，但如果可以创建混合非 UI 组件，也许可以创建跨平台的 UI 组件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T06:34:15.317

您可以创建向 XAML 应用程序公开 UI 的组件，但不能创建向 JS 应用程序公开 UI 的组件 - 这是因为 JS UI 堆栈与 XAML 呈现堆栈有很大不同。

# kml - 在关闭缩放级别打开的标签

> ID：12233813
> 
> 赞同：2
> 
> 时间：2012-09-02T06:07:15.667
> 
> 标签：kml

我搜索了各种论坛，找不到这个问题。如果有，请指点我。

我正在生成一个 .KML 文件，其中包含 400 英里区域内的大量点数据。打开文件时，会显示点标签，这使得它非常忙碌。

我想要的是文件只打开点而没有标签。然后，当用户放大到 20 英里时，会显示标签。

我可以控制 KML 文件的生成，因此我可以添加实现此效果所需的任何其他“参数”。

我很感激有人指出我最好的方法来做到这一点。

谢谢，

乙二醇

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T03:21:22.990

将您的每个点*两次*添加到您的 KML 文件中，并将它们放置在不同的[Regions](https://developers.google.com/kml/documentation/regions)中。在外部区域，您可以通过[此技术](https://developers.google.com/kml/faq#hidelabel)隐藏标签。

# regex - Notepad++ 正则表达式

> ID：12233815
> 
> 赞同：2
> 
> 时间：2012-09-02T06:08:31.833
> 
> 标签：regex, notepad++

首先，正则表达式很可能是我处理过的最令人困惑的事情——话虽如此，我无法相信它们能让人生活的效率有多高。

所以我试图理解通配符正则表达式没有运气

**需要转**

```
f_firstname
f_lastname
f_dob       
f_origincountry 
f_landing 
```

**进入**

```
':f_firstname'=>$f_firstname,
':f_lastname'=>$f_lastname,
':f_dob'=>$f_dob,
':f_origincountry'=>$f_origincountry,   
':f_landing'=>$f_landing, 
```

在答案中，您能否简要描述您正在使用的正则表达式，我一直在阅读教程，但它们让我大吃一惊。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T06:14:01.830

**编辑**：正如克里斯指出的那样，您可以通过清理目标字符串中可能存在的任何空白来改进正则表达式。我也将点替换`\w`为他所做的，因为这比使用`.`

```
Search: ^f_(\w+)\s*$
^     # start at the beginning of the line
f_    # look for f_
(\w+) # capture in a group all characters
\s*   # optionally skip over (don't capture) optional whitespace
$     # end of the line

Replace: ':f_\1'=>$f_\1,
':f_    # beginning of replacement string
\1      # the group of characters captured above
'=>$f_  # some more characters for the replace
\1,     # the capture group (again) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T06:17:18.980

```
Find: (^.*)

Replace with: ':$1'=>$$1, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T06:15:07.727

找什么：

```
(f_\w+) 
```

这里我们匹配`f_`后跟一个单词字符`\w+`（加​​号表示一次或多次）。将整个内容括在括号中意味着我们可以在替换模式中引用该组

用。。。来代替：

```
':\1'=>$\1, 
```

这只是您的结果短语，而不是硬编码我`\1`在搜索中引用该组的 f 单词

# java - 从java中的物理路径下载文件

> ID：12233818
> 
> 赞同：1
> 
> 时间：2012-09-02T06:09:12.230
> 
> 标签：java, spring-mvc, download

我已经使用 spring MVC 文件上传功能上传了文件，并且文件正在上传到 /home/myfolder/images/ 文件夹中。现在我想从这个物理路径下载这些文件。为了在我的 jsp 中进行测试，我编写了以下行

```
 <a href="<%=request.getSession().getServletContext().getRealPath("/home/images/image.jpg")%>" >download </a> 
```

但是当我单击此链接时，它会将我重定向到 URL

```
 http://localhost:8080/home/myfolder/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/myproject/home/images/image.jpg. 
```

如何下载保存的图像。如果您还需要我解决此问题，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T07:16:31.777

尝试使用这个：

```
<!-- Handles HTTP GET requests for /resources/ ** by efficiently serving up static resources -->
<mvc:resources mapping="/images/**" location="file:/home/images"/>
<!-- Allows for mapping the DispatcherServlet to "/" by forwarding static resource requests to the container's default Servlet -->
<mvc:default-servlet-handler/> 
```

在jsp中：

```
<img src="/images/image.jpg" /> 
```

这是线程：[Spring：在上下文根之外提供静态资源](https://stackoverflow.com/questions/5456635/spring-serving-static-resources-outside-context-root)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T06:20:05.030

应用程序容器无法提供 Webapps 文件夹之外的文件。

一些可能性：

1) 上传到应用程序容器中 Webapps 文件夹下方的文件夹。例如。

鉴于您的 Webapps 文件夹是 /home/myfolder/Tomcat/webapps/myApp/ 您可以上传到 /home/myfolder/Tomcate/webapps/myApp/upload/

这样上传的文件可以由应用程序容器提供服务。

2）通过符号链接使应用程序容器可以访问上传文件夹。您可能需要更改容器的配置才能使其正常工作。

3）如果您在应用程序容器（如 httpd）前面使用网络服务器，则让网络服务器提供静态文件。

4) 编写您自己的 servlet，该 servlet 从任意文件读取并将内容提供给客户端。

# android - 如何动态更改 TextView 宽度

> ID：12233819
> 
> 赞同：0
> 
> 时间：2012-09-02T06:09:18.530
> 
> 标签：android

我有一个TextView1、buttons1 和buttons2 水平。当 Button2 单击时，Button1 是不可见的。当 Button1 不可见时，我需要增加 textview 的宽度以覆盖 button1 不可见时创建的空间，反之亦然。可以请任何人帮助我如何动态更改 Textview 宽度。

注意：Textview tv.setWidth(pix) 不工作。当我试图找到 tv.getWidth() 的值时，总是为零。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T06:20:09.350

请尝试使用 GONE 而不是 INVISIBLE。使用 INVISIBLE 时，即使您看不到它，它仍然需要一个空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T06:22:44.787

`

```
 <TextView
        android:layout_width="odp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/hello" />

    <Button
        android:id="@+id/btn1"
        android:layout_width="odp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/hello"
        android:visibility="visible" />

    <Button
        android:id="@+id/btn2"
        android:layout_width="odp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/hello" />
</LinearLayout>`you can use weight for three element and button1.setVisibility(View.GONE) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T06:42:13.667

将您的小部件包装在 a 中`RelativeLayout`，然后检查。如果它是隐形的，您将能够将其置于您`textview`的之上。`button`如果您正在使用，则不能这样做，`LinearLayout`因为它水平或垂直设置小部件并且不重叠。

# c# - 使用 C# 的数组算法的字典排序数组

> ID：12233822
> 
> 赞同：0
> 
> 时间：2012-09-02T06:09:39.197
> 
> 标签：c#, sorting, swap, lexicographic

我知道我在处理 vb6 之前已经问过这种问题，而且它太慢了，所以我决定使用 C# 来完成这项工作；现在相同的代码以两倍的速度运行，但仍然太慢了。

它慢的原因是它从每列的末尾开始按字典顺序排序，检查所有行。

我相信会加快这一进程的是，如果我从第一列开始排序过程，检查所有行并按该列的第一个字节检测最低行，并可能检测具有相同第一个低字节的多行并将它们分组以进行下一步它检查第二个（下一个）列，如果它们都相同，则检查第二个字节中的哪个是最低字节，等等。如果它检测到下一行字节不同的地方，那么列代码就完成了第一个字节并继续寻找第二低的字节..这实际上是我认为这个过程应该如何工作以获得良好的速度提升..但不幸的是我对这种排序技术有很大的困惑，最终使用了有人帮助我的东西.

当前代码通过蛮力排序从最后一列开始工作，它对所有行进行排序。然后将一列向左移动并重新对每一行重新排序，直到它到达第一列并对其进行排序。这很慢，因为它没有明显的原因进行迭代。

假设有 256 列和 256 行，总共 65,536 个数组元素.. 使用当前代码并说它必须对每一行进行多次排序，直到每一行得到正确的排序顺序。对于每一列，它可能需要 65,536 次迭代。因此，每次我调用该函数时，总共估计有 256*65536= **16,777,216**次迭代，这就是它运行缓慢的实际原因。

我知道这有很多要求，但如果有人有空闲时间并且可能之前已经这样做过可以帮助我，我将不胜感激。

这是到目前为止我必须使用的代码。

```
byte[] sortArrayOfArraysLexicoGraphically(ref byte[] data) {
    byte[] lexicoGraphicalIndexes;
    long dataSize = data.Length;
    long squareRootMinusOne;
    int squareRoot;
    int row = 0;
    bool rowSwapped;
    byte[] tmpRow;

    squareRoot = (int)Math.Sqrt(dataSize);
    tmpRow = new byte[squareRoot];
    squareRootMinusOne = squareRoot - 1;
    lexicoGraphicalIndexes = new byte[squareRoot];

    for(short column = 0; column < lexicoGraphicalIndexes.Length; column++) {
        lexicoGraphicalIndexes[column] = (byte)column;
    }

    for(long column = squareRootMinusOne; column >= 0; column -= 1) {
        do {
            rowSwapped = false;
            do {
                if(data[(row * squareRoot) + column] > data[((row + 1) * squareRoot) + column]) {
                    //Swaps a full row in a few copies.
                    //Copies full row to tmpRow
                    Buffer.BlockCopy(data, (row * squareRoot), tmpRow, 0, squareRoot);
                    //Replace first row with second row.
                    Buffer.BlockCopy(data, ((row + 1) * squareRoot), data, (row * squareRoot), squareRoot);
                    //Replace second row with tmpRow
                    Buffer.BlockCopy(tmpRow, 0, data, ((row + 1) * squareRoot), squareRoot);
                    swapBytes(ref lexicoGraphicalIndexes, row, row + 1);
                    rowSwapped = true;
                }
                row++;
            } while (row < squareRootMinusOne);
            row = 0;
        } while (rowSwapped != false);
    }
    return lexicoGraphicalIndexes;
}

public void swapBytes(ref byte[] data, long firstIndex, long secondIndex) {
    byte tmpFirstByte = data[firstIndex];
    data[firstIndex] = data[secondIndex];
    data[secondIndex] = tmpFirstByte;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T10:01:28.867

我必须说你的排序算法非常糟糕。即使没有任何优化并使用基本的 linq，您也可以获得数十倍的速度。

我用大小为 N*N 的数据进行了测试，其中 N=200（我不确定以下代码是否与您的完全匹配并且 100% 正确，但至少您可以尝试查看结果）

```
List<byte[]> result = data.Batch(N)
                          .OrderBy(b => b, new ArrayComparer())
                          .Select(b => b.ToArray())
                          .ToList(); 
```

**编辑**

就地排序甚至可以更快。

```
var list = data.Batch(N).Select(x => x.ToArray()).ToList();
list.Sort(new ArrayComparer()); 
```

-

```
public class ArrayComparer : IComparer<IEnumerable<byte>>
{
    public int Compare(IEnumerable<byte> x, IEnumerable<byte> y)
    {
        var xenum = x.GetEnumerator();
        var yenum = y.GetEnumerator();
        while (xenum.MoveNext() && yenum.MoveNext())
        {
            if (xenum.Current != yenum.Current) 
                   return xenum.Current - yenum.Current;
        }
        return 0;
    }
} 
```

PS：`Batch`是[morelinq的扩展方法](http://code.google.com/p/morelinq/source/browse/MoreLinq/Batch.cs?r=f85495b139a19bce7df2be98ad88754ba8932a28)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T00:01:47.187

结束了写这个长怪物，但它似乎做了一些测试运行的伎俩..不确定它是否完美需要更多测试，当我做更多测试时我会更新这个。

```
 int[] sortArrayOfArraysLexicoGraphically(ref byte[] data) {
        int[] lexicoGraphicalIndexes;
        long dataSize = data.Length;
        int squareRoot;
        bool rowSwapped;

        squareRoot = (int)Math.Sqrt(dataSize);
        lexicoGraphicalIndexes = new int[squareRoot];

        for(int column = 0; column < lexicoGraphicalIndexes.Length; column++) {
            lexicoGraphicalIndexes[column] = column;
        }

        byte currentLowestRowByte = 255; //set to highest to avoid unassigned local variable error.
        int previousLowestRowByte = -1; //this is only used after the second pass.
        int lowestRowIndex = -1; //hopefully this won't mess anything up.
        List<int> lowestRowIndexes = new List<int>();
        bool stillSorting = true;
        int startRow = 0; //which row to start with, as the sorting process gets more sorted this number increases.
        int startColumn = 0; //first column

        while(stillSorting) {
            //Resets
            lowestRowIndexes.Clear();
            startColumn = 0;
            currentLowestRowByte = 255;
            lowestRowIndex = -1;

            //first step finds the lowest row in the first column
            for(int row = 0; row < squareRoot; row += 1) {
                if(data[(row * squareRoot) + startColumn] <= currentLowestRowByte && 
                    data[(row * squareRoot) + startColumn] > previousLowestRowByte) {
                    currentLowestRowByte = data[(row * squareRoot) + startColumn];
                    lowestRowIndex = row;
                }
            }

            //Resets for next pass.
            previousLowestRowByte = currentLowestRowByte;

            //Check if sorting process is already finished. (No matches found from step 1).
            if(lowestRowIndex == -1) {
                stillSorting = false;
                break;
            }

            //second step finds all the similar rows with the current lowestRowByte.
            for(int row = 0; row < squareRoot; row += 1) {
                if(data[(row * squareRoot) + startColumn] == currentLowestRowByte) {
                    lowestRowIndexes.Add(row);
                }
            }

            //third step loops through all lowestRowIndexes to find which one comes first, second, third, etc...
            if(lowestRowIndexes.Count > 1) {
                //This sorts the same rows, rows*rows amount of times, until they are sorted correctly.
                rowSwapped = true;
                while(rowSwapped != false) {
                    rowSwapped = false;
                    for (int row = 0; row < lowestRowIndexes.Count; row++)
                    {
                        if((row+1) >= lowestRowIndexes.Count)
                            break;
                        //Current first row byte checked with Next first row byte in lowestRowIndexes.
                        //If both are equal keep going unto next column until a break is found, if any break.
                        startColumn = 1;
                        while(rowSwapped == false) {
                            //Reached beyond the last column.
                            if(startColumn == squareRoot)
                                break;

                            if(data[(lowestRowIndexes[row] * squareRoot) + startColumn] == data[(lowestRowIndexes[row+1] * squareRoot) + startColumn])
                                startColumn++;

                            if(data[(lowestRowIndexes[row] * squareRoot) + startColumn] < data[(lowestRowIndexes[row+1] * squareRoot) + startColumn]) {
                                break; //Sorted already, get out.
                            } else if(data[(lowestRowIndexes[row] * squareRoot) + startColumn] > data[(lowestRowIndexes[row+1] * squareRoot) + startColumn]) {
                                swapBytesRow(ref data, lowestRowIndexes[row], lowestRowIndexes[row+1], squareRoot);
                                swapBytes(ref lexicoGraphicalIndexes, lowestRowIndexes[row], lowestRowIndexes[row+1]);
                                rowSwapped = true; //a swap has occurred.
                                break;
                            }
                        }
                    }
                }

                //forth step re-sorts all the pre-sorted lowestRowIndexes into master array, using startRow variable.
                foreach(int row in lowestRowIndexes) {

                    //First checks if row is already in the proper sorted location.
                    if(row != startRow) {
                        swapBytesRow(ref data, startRow, row, squareRoot);
                        swapBytes(ref lexicoGraphicalIndexes, startRow, row);
                        startRow++; //skip Rows starting from value < startRow as they are perfectly sorted.
                    } else {
                        startRow++; //skip Rows starting from value < startRow as they are perfectly sorted.
                    }                     
                }
            } else {
                //Only one instance of this lowestRowByte existed. so obviously this is the next best sorted match.
                swapBytesRow(ref data, startRow, lowestRowIndex, squareRoot);
                swapBytes(ref lexicoGraphicalIndexes, startRow, lowestRowIndex);
                startRow++; //skip Rows starting from value < startRow as they are perfectly sorted.
            }
        }
        return lexicoGraphicalIndexes;
    } 
```

.

```
 public void swapBytes(ref byte[] data, long firstIndex, long secondIndex) {
        byte tmpFirstByte = data[firstIndex];
        data[firstIndex] = data[secondIndex];
        data[secondIndex] = tmpFirstByte;
    } 
```

.

```
 public void swapBytes(ref int[] data, long firstIndex, long secondIndex) {
        int tmpFirstByte = data[firstIndex];
        data[firstIndex] = data[secondIndex];
        data[secondIndex] = tmpFirstByte;
    } 
```

.

```
 public void swapBytesRow(ref byte[] data, int firstRowIndex, int secondRowIndex, int rowSize) {
        byte[] tmpFirstRowBytes = new byte[rowSize];
        //Copies full row to tmpFirstRowBytes
        Buffer.BlockCopy(data, (firstRowIndex * rowSize), tmpFirstRowBytes, 0, rowSize);
        //Replace first row with second row.
        Buffer.BlockCopy(data, (secondRowIndex * rowSize), data, (firstRowIndex * rowSize), rowSize);
        //Replace second row with tmpFirstRowBytes
        Buffer.BlockCopy(tmpFirstRowBytes, 0, data, (secondRowIndex * rowSize), rowSize);
    } 
```

# java - 突出显示 JTable 中带有图标的单元格

> ID：12233823
> 
> 赞同：2
> 
> 时间：2012-09-02T06:09:41.420
> 
> 标签：java, swing, icons, jtable, jlabel

我有一个包含 3 列的 JTable。1\. 图标，2\. 文件或文件夹的名称，3\. 文件类型或“文件夹”。我在方法中使用 JLabel（我设置背景 + png 图像）绘制图标`getTableCellRendererComponent`。最初，我绘制了 JLable 的“白色”或“灰色”交替背景，因为这些是`JTable`Swing 组件交替绘制表格的颜色。现在，当我选择一行时，图标（第一列）背景不会被重绘为与行的其余部分相同的“深蓝色”。![说明性屏幕截图](../Images/48fc211baff347bb06376cf7dec09140.png)

**以下是我的问题：**

**一般** 1）如何在突出显示行时突出显示图标单元格（指针就足够了，不需要代码）？

**具体的**

1.1) 我必须使用 JLabel 吗？为什么我不能只是例如`.SetValueAt("image.png",0,0)`

1.2）我尝试了，`getColumnClass(...)`但这似乎重绘了给定列中的所有单元格。这是预期的吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T06:16:23.660

1.)调用时`javax.swing.table.TableCellRenderer`获取参数。您可以通过继承（例如）和覆盖`isSelected`来轻松编写自己的：调整对象并返回。拥有自己的渲染器还可以让您设置断点并真正了解正在发生的事情。`TableCellRenderer``JLabel``getTableCellRendererComponent``this`

1.1 + 1.2。）两者`setValueAt`都是`getColumnClass`模型的一部分，并且可能无法解决所选背景的问题。

您不必使用`JLabel`: 如果您查看返回类型，`getTableCellRendererComponent`您会发现它是`Component`（甚至不是`JComponent`）。我猜`JLabel`这只是习惯性的，因为它通常具有渲染器所需的所有功能，并且`DefaultTableCellRenderer`还可以使用`JLabel`. 为了获得最大的自由，我建议您使用`JComponent`和编写自己的`paintComponent`，但在这种情况下，您可能不必这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T08:01:40.077

假设条纹（交替的白色/灰色背景）在您的 LAF（Nimbus？）中自动发生，您不需要自定义渲染器：该表已经为 Icon 和 ImageIcon 类注册了默认渲染器。确保您的 tableModel 将其中一个类作为第一列的 columnClass 返回并享受自动操作:-)

这是一个快速的代码片段：

```
DefaultTableModel model = new DefaultTableModel(0, 2) {

    @Override
    public Class<?> getColumnClass(int columnIndex) {
        if (columnIndex == 0) {
            return Icon.class;
        }
        return super.getColumnClass(columnIndex);
    }

};
File[] files = new File(".").listFiles();
FileSystemView fsv = FileSystemView.getFileSystemView();
for (File f : files) {
    model.addRow(new Object[] {fsv.getSystemIcon(f), fsv.getSystemDisplayName(f)});
}
JTable table = new JTable(model); 
```

# php - 如何在统计信息中获取状态响应

> ID：12233831
> 
> 赞同：-1
> 
> 时间：2012-09-02T06:10:25.760
> 
> 标签：php, statistics

我想在我的统计信息中获得状态响应，以便如果任何页面链接被破坏或我知道它的东西，我知道获得状态响应我可以使用

```
$status = http_response_code (); 
```

然后将`$status`响应存储在数据库中。

这可以给我状态响应`200 Connect ok(and similar)`，因为请求的页面与 stats 文件链接。

但问题是如果有`404 NOT Found(and similar)`错误，那么我不会通过这种方法获得任何状态统计信息，因为错误页面没有与 stats 文件链接。

所以我的问题是如何得到这种类型的错误，任何人都可以建议我正确的方法或教程来实现这一点。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T06:18:53.940

我认为最好解析您的网络服务器/反向代理日志以获取此类信息。例如，通过一些调整，apache 不仅可以[记录](http://httpd.apache.org/docs/2.2/logs.html)源 ip/请求的 url/响应代码，还可以记录处理查询或 cookie 的时间。

# iphone - 如何在ios中自定义键盘

> ID：12233835
> 
> 赞同：0
> 
> 时间：2012-09-02T06:11:34.890
> 
> 标签：iphone, ios, uitextfield, uikeyboard

> **可能重复：**
> [如何在 iOS 中制作其他语言的键盘](https://stackoverflow.com/questions/12192818/how-to-make-a-keyboard-in-other-language-in-ios)

我想做一个具有如下图界面的键盘。我该怎么做？

![高棉键盘](../Images/376c8d9ddf7190697ce8675c7e5b6e96.png)

# python - 查找导入模块的绝对路径

> ID：12233836
> 
> 赞同：22
> 
> 时间：2012-09-02T06:11:42.290
> 
> 标签：python, python-module

如何获取导入模块的绝对路径？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-02T06:23:55.213

正如其他答案所说，您可以使用`__file__`. 但是，请注意，如果其他模块与程序位于同一目录中，这不会给出完整路径。所以为了安全起见，请执行以下操作：

```
>>> import os
>>> import math
>>> os.path.abspath(math.__file__)
'/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/math.so' 
```

这是我调用的一个模块的示例，`checkIP`以说明为什么需要获取 abspath （`checkIP.py`在当前目录中）：

```
>>> import os
>>> import checkIP
>>> os.path.abspath(checkIP.__file__)
'/Users/Matthew/Programs/checkIP.py'
>>> checkIP.__file__
'checkIP.py' 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-03-07T19:24:19.983

如果它是 PYTHONPATH 目录树中的一个模块（并且可以通过`__init__.py`在其目录和父目录中放置 a 来访问），则调用其**路径**属性。

```
>>>import sample_module
>>>sample_module.__path__
['/absolute/path/to/sample/module'] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-02T06:20:55.300

你可以试试：

```
import os
print os.__file__ 
```

查看模块的位置。

# python - 尝试导入 .pyc 模块时出现错误的幻数

> ID：12233837
> 
> 赞同：12
> 
> 时间：2012-09-02T06:11:54.907
> 
> 标签：python

尝试在我的程序中导入某些模块（编译的 .pyc）时遇到一些问题。我知道它是在 Python 2.6.6 (r266:84297) 中编译的，我安装了相同的版本，但是在尝试导入它时出现错误“bad magic number”:(

有人知道我做错了什么吗？或者也许可以在 .pyc 模块中更改幻数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T14:49:13.520

正如[Matthew 链接的答案所](https://stackoverflow.com/questions/514371/whats-the-bad-magic-number-error?rq=1)解释的那样，您的问题几乎可以肯定是由于用于编译和加载模块的 Python 版本不同。您可以像这样确定幻数：

```
with open('pyuca.pyc', 'rb') as f:
    print struct.unpack('<H', f.read(2)) 
```

您可以通过打印来确定您的 Python 版本`sys.version`（它也会在交互式启动时回显）。如果您使用的是 Python 2.6.6，则幻数应为 62161。如果不同，则需要切换到不同的 Python 才能导入模块。

这同样适用于`.pyo`文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-20T21:28:37.913

我通过运行解决了这个问题

```
find . -name '*.pyc' -exec rm {} + 
```

它删除了我目录中的所有 pyc 文件。之后就好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-14T09:37:44.283

如果您正在运行的 python2 和 python3 并删除旧的 *.pyc 文件太混乱，您可以添加以下内容以尝试通过调整字节码文件的代码加载器后缀来修补此 python3 错误。

```
import sys
if(sys.version_info.major>=3): # switch byte files end extension on 3
    import importlib.machinery
    altsuffix = ['.pyc3'] # or some other ending that doesn't create conflicts
    importlib.machinery.BYTECODE_SUFFIXES = altsuffix 
```

# wordpress - 在 WordPress 帖子中格式化 Java 代码，例如在 Eclipse 中

> ID：12233843
> 
> 赞同：4
> 
> 时间：2012-09-02T06:13:52.227
> 
> 标签：wordpress

我即将写一些包含一些 Java 代码的帖子，我想通过为 Java 关键字着色来正确格式化它。就像在[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)中一样。

我正在寻找一些关于使用主题/插件的建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-06-29T08:38:45.297

它现在看起来相当标准：

```
[code language="css"]
   Your code here
[/code] 
```

正如WordPress 本身所描述[的。](https://en.support.wordpress.com/code/posting-source-code/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-02T06:33:53.317

[Chili 代码格式化程序](http://wordpress.org/extend/plugins/wp-chili/)是一个很好的 WordPress 插件。

替代链接：*[WP Chili](http://webscripts.softpedia.com/script/Modules/WordPress-Plugins/WP-Chili-48730.html)*

您可以在[此页面](http://speckyboy.com/2009/02/19/12-wordpress-plugins-to-display-and-highlight-code-within-your-blog/)或此页面中使用[其他](http://faq.wordpress.com/2007/09/03/how-do-i-post-source-code/)一些插件。

但是，它自 2010 年以来就没有更新过。也许你应该使用最近的一个，比如[WP Code](http://wordpress.org/extend/plugins/wp-code/)插件。

似乎新版本的 WordPress 已经[包含了对代码发布的支持](http://en.support.wordpress.com/code/posting-source-code/)。这对我来说也很有趣，哈哈。

# php - 如何以这种方式格式化 mysql 表？

> ID：12233846
> 
> 赞同：4
> 
> 时间：2012-09-02T06:14:15.993
> 
> 标签：php, mysql

假设我有一张这样的桌子：

```
emp_id  work_site   expenses
001     atlanta     $500
001     atlanta     $750
002     boston      $750
002     chicago     $250
003     chicago     $500
003     chicago     $500 
```

现在我想按 emp_id 和唯一城市对费用进行分组，格式如下：

```
emp_id  atlanta boston  chicago
001     $1250    $0     $0
002     $0       $750   $250
003     $0       $0     $1000 
```

在 mysql 或 PHP 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T06:59:45.090

简单地说，你可以这样做：

```
 SELECT emp_id, 
         SUM( if( work_site = 'atlanta', expenses , 0 ) ) AS 'atlanta',  
         SUM( if( work_site = 'boston', expenses , 0 ) ) AS 'boston', 
         SUM( if( work_site = 'chicago', expenses , 0 ) ) AS 'chicago' 
  FROM your_table
  GROUP BY emp_id 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T06:33:20.600

您可以使用它进行旋转，如果不是，您需要先将费用转换为数字

```
 select emp_id
,SUM(CASE  WHEN work_site ='atlanta' THEN expenses else 0 END) as 'atlanta'
,SUM(CASE  WHEN work_site ='boston' THEN expenses else 0 END) as 'boston'
,SUM(CASE  WHEN work_site ='chicago' THEN expenses else 0 END) as 'chicago'
from Table1
group by emp_id 
```

SQL FIDDLE [http://sqlfiddle.com/#!2/dd535/1/0](http://sqlfiddle.com/#!2/dd535/1/0)

# forms - 表单字段验证：包含/排除哪些字符？

> ID：12233850
> 
> 赞同：0
> 
> 时间：2012-09-02T06:14:56.517
> 
> 标签：forms, validation, passwords

谷歌搜索给了我验证表单字段的方法，但我已经可以构建它们了。我的问题是，哪些是可以安全包含的字符，哪些是在表单字段中排除的？具体来说，用户名和密码。

一个简短的解释也很好。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T06:25:00.157

您需要排除数据中永远不会包含的所有字符。如果您的用户名/密码只能包含字母数字字符，您认为使用特殊字符是否有意义？

查看一些用于[JAVA](http://www.regular-expressions.info/java.html)或[PHP的](http://www.expreg.com/)[REGEX](http://en.wikipedia.org/wiki/Regular_expression)。

有一个正则[表达式参考表](http://www.regular-expressions.info/reference.html)也可能很有用。

如果您向我们提供有关您正在使用的语言的更多信息，我们可能会为我们提供更多帮助。祝你有美好的一天！

**[更新]** 有非常好的[安全参考和](http://doc.cenzic.com/sadoc9x14ba847/CPL0001011.htm)[OWASP 网站](http://www.owasp.org/)，它是任何网络安全相关主题的真正参考，请查看[OWASP 备忘单](https://www.owasp.org/index.php/Cheat_Sheets)。

```
#**Cross-Site Scripting Vulnerabilities?**
#for any programming language, the chars you should reject or handle properly are:
>     <   (     )     [     ]     '     "     ;     :     /     |

#for PHP, tools to handle with care:
strip_tags(), utf8_decode(), htmlspecialchars(), strtr()

#do Positive/Negative filtering
#check Encoding

#**SQL Injection ?**
#etc... 
```

**[/更新]**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T17:51:15.903

如果您正确清理输入和输出，则无需担心。

**注意：**我假设您使用 PHP 作为服务器端语言。

首先，将`PDO`（或`MySQLi`）与准备好的语句一起使用，以消除 SQL 注入的风险。

其次，任何*将显示在您网站上的*内容都应该针对 XSS 攻击进行清理（这样用户就不会注册 的用户名`<script>doSomeEvilStuff()</script>`）。

基本上就是这样，如果你真的很偏执，你应该使用白名单（只允许某些字符）而不是黑名单（只禁止某些字符），因为总会有人找到绕过黑名单的方法，但没有可以绕过白名单。

对于用户名，我认为没有必要超出`/[a-zA-Z0-9_.\s!$%^&*\-+=]/`您的想法。无论如何，不​​允许`/[`<>(){}[]]/`

# cordova - PhoneGap 更改页面正在运行，但页面中未显示数据

> ID：12233852
> 
> 赞同：0
> 
> 时间：2012-09-02T06:15:13.210
> 
> 标签：cordova

当我单击链接更改页面功能正在工作但该页面未显示任何数据时。该页面是动态的。有没有人知道这个问题？

下面是我的第一页。

```
<script type="text/javascript" charset="utf-8">

  $(document).ready(function(){

    $('#idLogout').click(function(){

     //alert(' button clicked ');        
     $.ajax({
           type: "POST",
           url: SITE_URL+"logout.php",
           data: "&action=logout",
           success: function(msg){               
               //alert('Response = '+msg);
               var obj = $.parseJSON(msg);
               var rs = obj.result;
               //alert( rs[0] );
               if(rs[0] == 1)
               {
                   //alert('logged out success');
                   window.localStorage.removeItem("cookie_user_id");
                   window.localStorage.removeItem("cookie_profile_id");
                   window.localStorage.clear();

                   window.location.href = "login.html";
               }
               else
               {
                   alert('Could not logout!');
               }    
           }
         });
       return false;
    });

    $.ajax({
           type: "POST",
           url: SITE_URL+"logout.php",
           data: "&action=get_username",
           success: function(msg){               
               //alert('Response = '+msg);

               var obj = $.parseJSON(msg);
               var rs = obj.result;
               //alert( rs[0] );

               if(rs[0] != 0)
               {
                    $('#idspanUsername').html('Logged in as '+rs[0]);                            
               }

           }
         });

  });
  function change_page()
  {
    $.mobile.changePage( "faq_categories.html", { transition: "slideup",reloadPage:true,changeHash:true,type: "post" } );
    $("#list_categories").trigger("pagecreate");
  }
  </script> 
```

```
<div data-role="page" id="more_page">
        <div data-theme="a" data-role="header">
            <h3>
                More...
            </h3>
        </div>
        <div data-role="content">
            <ul data-role="listview" data-divider-theme="b" data-inset="true">
                <li data-theme="c">
                    <a  onclick="change_page();"  href="#"><!-- faq_categories.html -->
                        FAQs
                    </a>
                </li>
                <li data-theme="c">
                    <a href="about.html">
                        About
                    </a>
                </li>
            </ul>
            <div style="margin-top: 80px;">
                <p style="text-align: center; ">
                    <span style="font-size: small; " id="idspanUsername">
                        Logged in as...
                    </span>
                </p>
            </div>
            <a data-role="button" data-theme="b" href="javascript:;" id="idLogout">
                Log Out
            </a>
        </div>
        <div data-theme="e" data-role="footer" data-position="fixed" class="nav-bar">
            <div data-role="navbar" data-iconpos="top" class="nav-bar">
                <ul>
                    <li>
                        <a href="track_dash.html" data-theme="e" data-icon="track" data-corners="false" data-iconshow="true" data-wrapperels="span">
                            <span class="foot_font">Track</span>
                        </a>
                    </li>
                    <li>
                        <a href="calendar.html" data-theme="e" data-icon="cal" data-corners="false" data-iconshow="true" data-wrapperels="span">
                            <span class="foot_font">Calendar</span>
                        </a>
                    </li>
                    <li>
                        <a href="shopping_list_type.html" data-theme="e" data-icon="shop" data-corners="false" data-iconshow="true" data-wrapperels="span">
                            <span class="foot_font">Shopping</span>
                        </a>
                    </li>
                    <li>
                        <a href="profile.html" data-theme="e" data-icon="profile" data-corners="false" data-iconshow="true" data-wrapperels="span">
                            <span class="foot_font">Profile</span>
                        </a>
                    </li>
                    <li>
                        <a href="more.html" data-theme="e" data-icon="more" data-corners="false" data-iconshow="true" data-wrapperels="span" class="ui-btn-active">
                            <span class="foot_font">More</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div> 
```

当我点击第二页下方的常见问题时。

```
 <script>
    $(document).ready(function() { 
        var datastring;
        $.ajax({
            type:'POST',
            url:SITE_URL+'faq_categories.php',
            data:datastring,
            success:function(msg)
            {
                   var data = $.parseJSON(msg);
                   var rs = data.result;
                    var i=0;
                    for(i=0;i<rs.length;i++){
                        var category = rs[i].Name;
                        var category_id = rs[i].ID;
                        $('#list_categories').append('<li data-theme="c"><a href="faq_listing.html?c_id='+category_id+'">'+category+'</a></li>');
                    };
                    $('#list_categories').listview('refresh');

            }
        });
    });

    </script>
    <script src="js/jquery.mobile-1.1.0.min.js"></script> 
```

```
 <div data-role="page" id="faq_categories">
        <div data-theme="a" data-role="header" data-position="fixed">
            <h3>
                FAQ Categories
            </h3>
            <a data-role="button" rel="external"  id="back_history" data-rel="back" data-theme="b" data-icon="arrow-l" data-iconpos="left">
                Back
            </a>
        </div>
        <div data-role="content">
                <p style="margin-left: 15px;">
                    I have a question about...
                </p>
            <ul data-role="listview"  id="list_categories"  data-divider-theme="b" data-inset="true">
            </ul>
        </div>
    </div> 
```

显示此页面，但不显示数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T05:55:17.617

每当我使用更改页面事件时，我总是使用触发事件。请参见下面的示例，

```
$.mobile.changePage($('#listpage'));
$("#listpage").trigger("pagecreate"); 
```

但我不知道它如何与您的代码一起使用。如果仍有问题，请发布完整的源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T16:06:57.603

您可以提供一个参数来重新加载页面，也许这有帮助？

例如

```
$.mobile.changePage('page2.html', { dataUrl : "page2.html?parameter=123", data : { 'paremeter' : '123' }, reloadPage : true, changeHash : true }); 
```

也许这是一个不错的链接[http://ramkulkarni.com/blog/passing-data-between-pages-in-jquery-mobile/](http://ramkulkarni.com/blog/passing-data-between-pages-in-jquery-mobile/)

# php - PHP将文件夹/子文件夹中每个文件的路径放入数组中？

> ID：12233859
> 
> 赞同：7
> 
> 时间：2012-09-02T06:16:39.977
> 
> 标签：php, arrays, multidimensional-array, path, directory

> **可能重复：**
> [PHP SPL RecursiveDirectoryIterator RecursiveIteratorIterator 检索完整树](https://stackoverflow.com/questions/2418068/php-spl-recursivedirectoryiterator-recursiveiteratoriterator-retrieving-the-full)

我不知道从哪里开始。但是我必须获取文件夹中所有文件的路径以及路径中子文件夹的所有内容。例如，如果我有 1 个文件夹，其中有 5 个文件夹，每个文件夹中有 10 个 mp3，等等……这意味着我的数组必须找到这些文件的 50 个路径。

后来假设我添加了一个文件夹，其中有 3 个文件夹，每个文件夹有 10 张图像。

我的代码现在需要找到 80 个路径并将它们存储在一个数组中。

我的问题有意义吗？

更新：

我想要的输出是将所有这些路径存储在一个数组中。

但是我会“喜欢”代码是动态的，这意味着如果我以后再添加 10 个文件夹，每个文件夹都有 17 个子文件夹，每个文件夹都有大量不同的内容。我希望数组保存所有文件的文件路径。我觉得这是有道理的。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-02T06:50:31.373

您正在寻找的也称为*递归目录遍历*。这意味着，您将浏览所有目录并列出其中的子目录和文件。如果有一个子目录，它也会被遍历等等 - 所以它是递归的。

正如您可以想象的那样，这是您在编写软件时所需要的一种常见的东西，而 PHP 会为您提供支持。它提供了一个`RecursiveDirectoryIterator`目录可以递归迭代和`RecursiveIteratorIterator`执行遍历的标准。然后，您可以通过简单的迭代轻松访问所有文件和目录，例如通过`foreach`：

```
$rootpath = '.';
$fileinfos = new RecursiveIteratorIterator(
    new RecursiveDirectoryIterator($rootpath)
);
foreach($fileinfos as $pathname => $fileinfo) {
    if (!$fileinfo->isFile()) continue;
    var_dump($pathname);
} 
```

这个例子首先指定了你要遍历的目录。我一直在服用当前的：

```
$rootpath = '.'; 
```

下一行代码有点长，它确实实例化[了目录迭代器](http://php.net/RecursiveDirectoryIterator)，然后[是迭代器迭代器](http://php.net/RecursiveIteratorIterator)，这样树状结构就可以在单个/平面循环中遍历：

```
$fileinfos = new RecursiveIteratorIterator(
    new RecursiveDirectoryIterator($rootpath)
); 
```

`$fileinfos`然后用一个简单的迭代这些`foreach`：

```
foreach($fileinfos as $pathname => $fileinfo) { 
```

在其中，有一个测试可以跳过所有目录的输出。这是通过使用[`SplFileInfo`](http://php.net/SplFileInfo)被迭代的对象来完成的。它由递归目录迭代器提供，在处理文件时包含许多有用的属性和方法。例如，您还可以返回文件扩展名、关于大小和时间的基本名称信息等等。

```
if (!$fileinfo->isFile()) continue; 
```

最后，我只输出作为文件完整路径的*路径名：*

```
var_dump($pathname); 
```

示例输出如下所示（在 Windows 操作系统上）：

```
string(12) ".\.buildpath"
string(11) ".\.htaccess"
string(33) ".\dom\xml-attacks\attacks-xml.php"
string(38) ".\dom\xml-attacks\billion-laughs-2.xml"
string(36) ".\dom\xml-attacks\billion-laughs.xml"
string(40) ".\dom\xml-attacks\quadratic-blowup-2.xml"
string(40) ".\dom\xml-attacks\quadratic-blowup-3.xml"
string(38) ".\dom\xml-attacks\quadratic-blowup.xml"
string(22) ".\dom\xmltree-dump.php"
string(25) ".\dom\xpath-list-tags.php"
string(22) ".\dom\xpath-search.php"
string(27) ".\dom\xpath-text-search.php"
string(29) ".\encrypt-decrypt\decrypt.php"
string(29) ".\encrypt-decrypt\encrypt.php"
string(26) ".\encrypt-decrypt\test.php"
string(13) ".\favicon.ico" 
```

如果存在不可访问的子目录，则以下将引发异常。实例化时，可以使用一些标志来控制此行为`RecursiveIteratorIterator`：

```
$fileinfos = new RecursiveIteratorIterator(
    new RecursiveDirectoryIterator('.'),
    RecursiveIteratorIterator::LEAVES_ONLY,
    RecursiveIteratorIterator::CATCH_GET_CHILD
); 
```

我希望这是有益的。您还可以将其包装到您自己的类中，您还可以提供一个`FilterIterator`来决定是否应该列出文件`foreach`。

* * *

`RecursiveDirectoryIterator`和组合的力量`RecursiveIteratorIterator`来自于它的灵活性。上面没有提到的是所谓`FilterIterator`的 s。我想我添加了另一个例子，它利用了两个自己编写的，将它们放在一起来组合它们。

*   一种是过滤掉所有以点开头的文件和目录（在 UNIX 系统上这些文件和目录被视为隐藏文件，因此您不应将这些信息提供给外部）和
*   另一个仅将列表过滤为文件的方法。那是以前*在*foreach 中的检查。

此用法示例中的另一个更改是使用从迭代的根路径开始返回子路径的[`getSubPathname()`函数](http://www.php.net/recursivedirectoryiterator.getsubpathname.php)，因此您正在寻找的那个。

此外，我明确添加了防止遍历的[`SKIP_DOTS`标志](http://php.net/class.filesystemiterator#filesystemiterator.constants.unix-paths)`.`和`..`（技术上不是*真正*必要的，因为过滤器会过滤它们以及它们是目录，但我认为它更正确）并作为路径返回，[`UNIX_PATHS`](http://php.net/class.filesystemiterator#filesystemiterator.constants.skip-dots)因此路径字符串始终是 unix-无论底层操作系统如何，都喜欢路径如果稍后通过 HTTP 请求这些值，这通常是一个好主意，就像您的情况一样：

```
$rootpath = '.';

$fileinfos = new RecursiveIteratorIterator(
    new FilesOnlyFilter(
        new VisibleOnlyFilter(
            new RecursiveDirectoryIterator(
                $rootpath,
                FilesystemIterator::SKIP_DOTS
                    | FilesystemIterator::UNIX_PATHS
            )
        )
    ),
    RecursiveIteratorIterator::LEAVES_ONLY,
    RecursiveIteratorIterator::CATCH_GET_CHILD
);

foreach ($fileinfos as $pathname => $fileinfo) {
    echo $fileinfos->getSubPathname(), "\n";
} 
```

此示例与前一个示例类似，尽管`$fileinfos`is build 的配置方式略有不同。特别是关于过滤器的部分是新的：

```
 new FilesOnlyFilter(
        new VisibleOnlyFilter(
            new RecursiveDirectoryIterator($rootpath, ...)
        )
    ), 
```

所以目录迭代器被放入一个过滤器中，过滤器本身被放入另一个过滤器中。其余的没有改变。

这些过滤器的代码非常简单，它们使用的`accept`函数要么是，要么`true`是`false`要采取或过滤掉：

```
class VisibleOnlyFilter extends RecursiveFilterIterator
{
    public function accept()
    {
        $fileName = $this->getInnerIterator()->current()->getFileName();
        $firstChar = $fileName[0];
        return $firstChar !== '.';
    }
}

class FilesOnlyFilter extends RecursiveFilterIterator
{
    public function accept()
    {
        $iterator = $this->getInnerIterator();

        // allow traversal
        if ($iterator->hasChildren()) {
            return true;
        }

        // filter entries, only allow true files
        return $iterator->current()->isFile();
    }
} 
```

又是这样。当然，您也可以将这些过滤器用于其他情况。例如，如果您有另一种目录列表。

还有另一个示例性的输出`$rootpath`：

```
test.html
test.rss
tests/test-pad-2.php
tests/test-pad-3.php
tests/test-pad-4.php
tests/test-pad-5.php
tests/test-pad-6.php
tests/test-pad.php
TLD/PSL/C/dkim-regdom.c
TLD/PSL/C/dkim-regdom.h
TLD/PSL/C/Makefile
TLD/PSL/C/punycode.pl
TLD/PSL/C/test-dkim-regdom.c
TLD/PSL/C/test-dkim-regdom.sh
TLD/PSL/C/tld-canon.h
TLD/PSL/generateEffectiveTLDs.php 
```

没有更多`.git`或`.svn`目录遍历或文件列表，如`.builtpath`或`.project`。

* * *

> **`FilesOnlyFilter`和注意事项`LEAVES_ONLY`：** [过滤器明确拒绝使用基于对象的目录*和*`SplFileInfo`链接（[仅存在的常规文件](http://php.net/splfileinfo.isfile)）。所以它是一个真正的基于文件系统的过滤。由于默认[标志](http://www.php.net/manual/en/recursiveiteratoriterator.construct.php)（示例中也使用了此处） ，因此
> 附带了另一种仅获取非目录条目的方法。此标志不能用作过滤器，并且独立于底层迭代器。它只是指定迭代不应返回分支（*此处：*目录迭代器中的目录）。`RecursiveIteratorIterator`[`LEAVES_ONLY`](http://www.php.net/manual/en/recursiveiteratoriterator.construct.php)]

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-02T06:54:53.280

如果您在 linux 上并且不介意执行 shell 命令，则可以在一行中完成所有操作

```
$path = '/etc/php5/*'; // file filter, you could specify a extension using *.ext
$files = explode("\n", trim(`find -L $path`)); // -L follows symlinks

print_r($files); 
```

**输出：**

```
Array (
       [0] => /etc/php5/apache2
       [1] => /etc/php5/apache2/php.ini
       [2] => /etc/php5/apache2/conf.d
       [3] => /etc/php5/apache2/conf.d/gd.ini
       [4] => /etc/php5/apache2/conf.d/curl.ini
       [5] => /etc/php5/apache2/conf.d/mcrypt.ini
       etc...
      ) 
```

**仅使用 PHP 的下一个最短选择是 glob- 但它不会像您想要的那样扫描子目录**。（您必须遍历结果，使用 is_dir() 然后再次调用您的函数

[http://us3.php.net/glob](http://us3.php.net/glob)

```
$files = dir_scan('/etc/php5/*'); 
print_r($files);

function dir_scan($folder) {
    $files = glob($folder);
    foreach ($files as $f) {
        if (is_dir($f)) {
            $files = array_merge($files, dir_scan($f .'/*')); // scan subfolder
        }
    }
    return $files;
} 
```

其他所有方式都需要更多的代码，然后才需要做一些如此简单的事情

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T06:27:37.797

步骤如下：

和 opendir 将打开目录结构

`$dh = opendir($dir)`

你接下来要做的是阅读里面的任何东西`$dh`

`$file = readdir($dh)`

您可以在 php 手册中找到对应于的所有信息`opendir`

和谷歌搜索阅读结构返回这个

[http://www.codingforums.com/showthread.php?t=71882](http://www.codingforums.com/showthread.php?t=71882)*

# jquery - 当元标记为设备宽度时如何获取正文的大小

> ID：12233868
> 
> 赞同：1
> 
> 时间：2012-09-02T06:18:00.230
> 
> 标签：jquery, web-applications, mobile

我正在尝试获取 html 内容的高度，但我得到了错误的结果。在页面的元标记上，我放了这一行：

```
<meta id="viewport" name="viewport" content="width=device-width, maximum-scale=1" /> 
```

对于移动设备，内容确实适合页面，但我得到的正文高度是内容的真实高度，而不是适合视口后的高度。

# r - 使用 rmongodb 连接到 MongoDB 副本集

> ID：12233874
> 
> 赞同：0
> 
> 时间：2012-09-02T06:20:01.987
> 
> 标签：r, mongodb, rmongodb

有没有人能够使用连接到 MongoDB 副本集`rmongodb`？无论我如何配置`mongo.create`，我都会收到身份验证错误，即使相同的主机/用户名/密码在通过`mongo`shell 连接时工作正常。

我的代码相当于：

```
> mongo.create(c("rs-1.mysite.com:12345","rs-2.mysite.com:12345"), "rsName", "user", "password", "my_db")
Unable to connect to replset
Authentication failed. 
```

**更新：**

查看副本集中所有节点的日志，当我运行上面的代码时，我没有看到任何身份验证尝试。因此，这可能是一个`rmongodb`错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T13:46:22.450

正如 Sim 所指出的，[rmongodb 1.0.3 不解析 hostnames](https://github.com/gerald-lindsly/rmongodb/issues/6)。

但是，可以从 rmongodb 连接到副本集，但需要注意以下几点：

*   您必须包含所有主机名（如果在种子主机列表中找不到主主机，rmongodb 将无法连接）
*   主机名必须作为 IP 提供
*   如果使用管理员用户，您必须首先对管理员数据库进行身份验证（这至少是[预期的行为](http://www.mongodb.org/display/DOCS/Security+and+Authentication#SecurityandAuthentication-Logginginasanadminuser)，但值得注意）
*   我只能通过*不*提供 replSet 名称来使连接正常工作

所以我的工作连接字符串看起来像：

```
mongo.create(c("192.168.1.123:27017","192.168.1.124:27018","192.168.1.125:27017"),"","user","password", "thedb") 
```

注意：我只用 MongoDB 2.2.0 测试过这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T05:06:51.990

查看 C 源代码，似乎`rmongodb`没有将主机名解析为 IP 地址。唯一可行的方法是将 IP 地址字符串传递给驱动程序...

通过传递 IP 地址和端口号，您可以连接到其中一个节点。我仍然无法`rmongodb`成功连接到副本集。

# java - 在孩子点击jquery时隐藏父母

> ID：12233878
> 
> 赞同：-3
> 
> 时间：2012-09-02T06:20:24.637
> 
> 标签：java, html, jquery

> **可能重复：**
> [jQuery onclick 隐藏其父元素](https://stackoverflow.com/questions/12226877/jquery-onclick-hide-its-parent-element)

`<li>`当有人点击它的孩子时，我想隐藏`<a>`。我使用以下 jQuery 代码来执行该操作，但它不起作用。因为如果有人点击`<a>`这是 twitter 按钮，它首先调用类“ **twitter-follow-button** ”。它不适用于 jQuery 动作。使用的 jQuery：

```
$(document).ready(function(e) {
     $('.twitter-follow-button').click(function() {
            $(this).parent().hide();
     });
}); 
```

使用的 HTML：

```
 <ul>
   <li>
       <div>Something</div>
       <p>Something</p>
       <a href="https://twitter.com/'.$uname.'" class="twitter-follow-button">Follow </a>
   </li>
   <li>
       <div>Something</div>
       <p>Something</p>
       <a href="https://twitter.com/'.$uname.'" class="twitter-follow-button">Follow</a>
   </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T06:26:57.503

目前尚不清楚您要解决什么问题。如果您尝试做的是在单击链接时阻止默认操作并且只进行隐藏，那么您可以这样做：

```
$(document).ready(function(e) {
     $('.twitter-follow-button').click(function() {
            $(this).parent().hide();
            return false;   // prevent default action of the click
     });
}); 
```

或者，如果您只想在其他操作运行时将隐藏操作延迟一段时间，您可以这样做：

```
$(document).ready(function(e) {
     $('.twitter-follow-button').click(function() {
            var self = this;
            setTimeout(function() {
                $(self).parent().hide();
            }, 1000);   // you pick the appropriate time here
     });
}); 
```

# linux - 从文件 bash shell 脚本中提取数据

> ID：12233881
> 
> 赞同：1
> 
> 时间：2012-09-02T06:21:51.610
> 
> 标签：linux, bash, shell

我有一个名为 shadow.lab4 的文件，其中包含以下字符并存储在桌面中：

```
$6$bIhKGKp3$LSd47ADZexr.4rBm8y29DLPfd1kxwyuliCea8fExg0ohMT25OAEqUOxKm7t6dj/M50PjACjD.gn.VDD8f4MVy0 
```

现在我正在尝试使用 grep 命令检索加密数据并将其存储在变量 encr 中。然后使用在屏幕上显示检索到的数据

```
echo $encr 
```

我的预期输出应该是

```
LSd47ADZexr.4rBm8y29DLPfd1kxwyuliCea8fExg0ohMT25OAEqUOxKm7t6dj/M50PjACjD.gn.VDD8f4MVy0 
```

您知道我必须使用“grep”来获得预期输出的代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T06:31:58.080

我不知道您为什么将`":"`其用作分隔符`cut`，但输入字符串中根本没有冒号。将脚本的剪切部分更改为

```
cut -d '$' -f 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T08:08:48.120

**编码：**

如果加密始终是字符串中的第 4 个字段：

```
encr=$(awk -F "$" '{ print $4 }' shadow.lab4) 
```

如果加密始终是字符串中的最后一个字段：

```
encr=$(awk -F "$" '{ print $NF }' shadow.lab4) 
```

结果：

```
echo "$encr"
LSd47ADZexr.4rBm8y29DLPfd1kxwyuliCea8fExg0ohMT25OAEqUOxKm7t6dj/M50PjACjD.gn.VDD8f4MVy0 
```

**盐：**

要访问盐，如果它始终是第三个字段：

```
salt=$(awk -F "$" '{ print $3 }' shadow.lab4) 
```

要访问盐，如果它总是倒数第二个字段：

```
salt=$(awk -F "$" '{ print $(NF-1) }' shadow.lab4) 
```

结果：

```
echo "$salt"
bIhKGKp3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T08:34:45.367

`sed`方式：

```
encr = `sed 's/.*\$//' file.txt 
```

# wpf - 更改没有闪烁的 MediaElement 源

> ID：12233887
> 
> 赞同：2
> 
> 时间：2012-09-02T06:23:22.107
> 
> 标签：wpf, mediaelement

我有一个简单的视频播放器，它使用 WPF MediaElement 播放一系列视频。这些视频一起形成一个围绕静止图像移动的连续电影。在每个视频结束时，运动会冻结在当前播放视频的最后一帧。当我按下一个按钮时，下一个视频会播放，它会继续围绕静止图像移动。这是我将用来发表演讲的应用程序。实际上，我有一系列视频，每个视频的最后一帧与下一个视频的第一帧相同。

我正在使用 WPF MediaElement 并在用户单击鼠标时更改 Source 属性。

我遇到的问题是，当我更改 Source 属性时，MediaElement 在加载下一个视频时变得透明。这意味着视频之间存在闪烁。有没有办法防止这种闪烁？我还可以使用哪些其他策略？

这是一些代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        this.x_MediaElement.MouseLeftButtonDown += x_MediaElement_MouseLeftButtonDown;
        this.MouseLeftButtonDown += MainWindow_MouseLeftButtonDown;

        this.WindowStyle = WindowStyle.None;
        this.WindowState = WindowState.Maximized;
    }

    void MainWindow_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        MoveNext();   
    }

    private void MoveNext()
    {
        _sourceIndex++;
        if (_sourceIndex >= _sources.Length)
            _sourceIndex = 0;

        Debug.WriteLine(string.Format("Playing {0}", _sources[_sourceIndex]));

        this.x_MediaElement.Source = new Uri(_sources[_sourceIndex]);
        this.x_MediaElement.Play();

    }

    private int _sourceIndex = -1;

    private string[] _sources = new string[] {
        //SOURCE GO HERE
    };

    void x_MediaElement_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        MoveNext();
        e.Handled = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T09:55:12.120

我会对你说实话。MediaElement 的 bug 比您用手指数得出的还要多。从那开始，mediaElement 在播放 20 个视频后会爆炸（不再有 MediaEnded 事件，它会崩溃或类似的事情）。当然还有表演。它与垂直同步不同步。所以视频实际上可能看起来很滞后。

我建议您研究 DirectShow 技术（本质上是 WPF 的基础，但您可以切换渲染器以避免延迟）。考虑到您不会开发任何专业应用程序，我想 MediaElement 会很好。

但是，MediaElement 是最简单的选择，如果它适合您，请继续使用它。至于您的问题，我认为可能的解决方案很少：

*   有两个 MediaElement 并在它们之间切换。如果一个视频结束，则在另一个 MediaElement 中启动另一个 vid，只要您在第二个 mediaElement 上播放第一帧，隐藏第一个 mediaElement，反之亦然。您可以轮询位置，也许还有 MediaStarted 事件。这样闪烁几乎是不可能注意到的。
*   如果您想要流畅的视频播放，完全没有任何闪烁，可以使用 GMFPlay。你可以检查一下。虽然它不是 MediaElement。但它可以同时播放视频而没有任何闪烁。
*   截取最后一帧的屏幕截图（您可以使用 WPF 截取屏幕截图）并在 MediaElement 秘密加载时将其显示为 Image。

# c++ - 向量字符串的Getline

> ID：12233888
> 
> 赞同：2
> 
> 时间：2012-09-02T06:23:31.627
> 
> 标签：c++, string, vector, getline

我有一个向量字符串：

```
vector <string> name[20][100]; 
```

我想输入`name[0][0]`，但 getline 不起作用。我的代码：

```
cin.getline(name[0][0], sizeof(name[0][0])) 
```

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T06:37:36.310

您的第一个问题是您要声明一个三维结构。我怀疑你只打算两个级别。下一个问题是您正在使用`std::basic_istream<…&gt;::getline`，这取决于您提前准备缓冲区空间（您没有这样做）。自由函数形式 ,`std::getline`更简单、更安全：

```
std::string name[20][100];
for (int i = 0; i < 20; ++i)
    for (int j = 0; j < 100; ++j)
        getline(std::cin, name[i][j]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T06:31:32.820

```
for(int i = 0; i < 20; i++) {
    for(int k = 0; k < 100; k++) {
        getline(std::cin,name[i][k]);
    }
} 
```

如果你想循环它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T06:27:28.730

您需要使用另一种`getline`方法。

```
name[0][0].resize(1);
std::getline(std::cin, name[0][0][0]);

std::cout << name[0][0][0]; 
```

`getline`您使用的方法`char *`不需要`std::string`。

你也有字符串向量数组。我认为您只需要字符串向量。

```
std::vector<std::string> name;
name.resize(20); // will create 20 std::strings (to keep 20 names)

for (int i = 0; i < name.size(); ++i) {
    std::getline(std::cin, name[i]); // fill all of 10 std::strings 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T07:58:35.157

一旦你这样做了 `vector<string> name`，你几乎也可以这样做`name[0]="a name"`，或者这个`name.push_back("a name")`，还有这个 `for (int i = 0; i < 5; ++i) getline(cin,name[i])`

然而，你的意思是这样做吗？

```
#include <iostream>
#include <string>
#include <vector>
using namespace std; 

int main()
{   
    vector<string> name;
    name.resize(21);

    //name.push_back("a name");
    //name[0]="a name";

     for (int i = 0; i < 5; ++i)
     {
        cout<<"input  name (hit enter twice when done) > ";
        getline(cin,name[i]);

        //cin.clear();
        //cin.ignore( 1000, '\n' );
     }

     for (  i = 0; i < 5; ++i)   cout<<"name "<<i+1
                                     <<" = "<<name[i]
                                     <<"\n";

    return 0;
} 
```

# python - 打开新提示以在 python 中运行二进制文件

> ID：12233891
> 
> 赞同：0
> 
> 时间：2012-09-02T06:25:13.480
> 
> 标签：python, python-3.x, cmd

我希望我的 python 脚本运行其他几个可执行文件（所有这些都在 windows cmd 上运行）。

我目前正在使用

```
subprocess.Popen(content) 
```

但这将在运行脚本的同一终端上打开所有可执行文件，并且我需要每个可执行文件在它自己的终端上运行。

我的第一个想法是

```
subprocess.Popen("cmd /C " + content) 
```

但这也只使用一个终端。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T06:46:57.863

```
os.system("start " + content) 
```

成功了

似乎

```
os.startfile(content) 
```

也可以

# javascript - 如何在 JavaScript 中将值从一个 html 页面传递到另一个页面？

> ID：12233892
> 
> 赞同：3
> 
> 时间：2012-09-02T06:25:31.163
> 
> 标签：javascript, html

我知道这个问题问了很多次，但我的问题有所不同。
我有 3 个 html 页面，例如`apply.html`, `personal_info.html`, `resume info.html`.

1.  在 apply.html 页面中：-
    我使用一个 LinkedIn 按钮进行 LinkedIn 登录。当用户单击该按钮并填写登录信息时，它会从 LinkedIn 获取用户数据。并在同一页面上显示（apply.html）。

2.  在personal_info.html 中：-
    我需要分别显示`TextField`我们从LinkdIn 获取的个人信息。

3.  在 Resume_info.html 中：-
    这里我需要显示我们使用 LinkedIn 在 apply.html 页面上获取的职业信息。

我不明白该怎么做？我很新`Html,JavaScript`。
这是我的代码供您参考。

Apply.html 我在其中获取 LinkedIn 日期

```
<html>
<head>    
<script type="text/javascript"> 
function loadData() {
IN.API.Profile("me")
.fields(["id", "firstName", "lastName", "pictureUrl","headline","industry","location:(name)","positions:(title)","emailAddress"])
  .result(function(result) {
  profile = result.values[0];
  profHTML = "<p><a href=\"" + profile.publicProfileUrl + "\">";
  profHTML += "<img class=img_border align=\"left\" src=\"" + profile.pictureUrl + "\"></a>";      
  profHTML += "<a href=\"" + profile.publicProfileUrl + "\">";
  profHTML += "<h2 class=myname>" + profile.firstName + " " + profile.lastName + "</a> </h2>";
  profHTML += "<span class=myheadline>" + profile.headline + "</span>";
  profHTML += "<h3>" + profile.industry + "</h3>";
  profHTML += "<h3>" + profile.location.name + "</h3>";
  profHTML += "<h3>" + profile.positions.values[0].title + "</h3>";
  profHTML += "<h3>" + profile.positions.values[1].title + "</h3>";
  profHTML += "<h3>" + profile.emailAddress + "</h3>";
 $("#profiles").html(profHTML);
  });
 } 
</script>
</head>
<body>
<script type="IN/Login" data-onAuth="loadData"></script>
<div id="profiles"></div>
<div id="profiles1"></div> 
</body> 
```

personal_Info.html 我需要在其中显示 LinkedIn 数据。

```
<body>
<div id="container">
<section>
<div class="results"> 
 <div class="results-head">
  Personal Info
  <div class="pagecount">1/6</div>
  </div>
  <div class="job-des">
   <div class="row">
     <input name="textfield2" type="text" id="textfield1" value="First Name"  class="input-field" onblur="if (this.value == '')">
   </div>
  <div class="row">
    <input name="textfield" type="text" id="textfield2" value="Last Name" class="input-field"> 
  </div>
  <div class="row">
    <input name="textfield" type="text" id="textfield3" value="Street Address" class="input-field"> 
  </div>
   <div class="row">
    <input name="textfield" type="text" id="textfield4" value="City" class="input-field"> 
  </div>
   <div class="row">
   <select name="select2" id="select2" class="input_list2">
      <option value="">  Country  </option>
    </select>
  </div>
   <div class="row">
    <select name="select2" id="select3" class="input_list2">
      <option>State</option>
    </select>
  </div>
   <div class="row">
     <select name="select2" id="select4" class="input_list2">
      <option>Region</option>
    </select>
  </div>
   <div class="row">
    <input name="textfield" type="text" id="textfield5" value="Zip/Postal Code" class="input-field"> 
  </div>
  <div class="row">
    <input name="textfield" type="text" id="textfield6" value="Email Address" class="input-field"> 
  </div>
   <div class="row">
   <input name="" type="checkbox" value="" checked align="bottom"> 
   Authorization to work in U.S.
  </div>

  </div>

</div>
<div class="input-btn-panel">
  <div class="input-btn-wrap"><input type="submit" name="button" id="button" value="Next" class="blue-btn" onClick="updateTxt()"></div>

 <div id="profiles"></div>
</div>
</body> 
```

请给我一些提示。我不明白该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T06:33:20.700

您可以使用 HTML5 本地存储。它让您告诉浏览器将数据保存在用户的机器上。（还有*会话存储*，仅对当前会话有效。）

**保存（在 Apply.html 中）**

```
IN.API.Profile("me")
.fields(["id", "firstName", "lastName", "pictureUrl","headline","industry","location:(name)","positions:(title)","emailAddress"])
  .result(function(result) {
      profile = result.values[0];

      // save all keys to local storage
      for (f in profile) localStorage[f] = fields[f];

      // more stuff ...
  }); 
```

**检索（在personal_Info.html 中）**

```
// retrieve first name from local storage
var firstName = localStorage["firstName"];
if (firstName !== undefined) {
    $("#textfield1").attr(value, firstName);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T06:37:04.150

那么您可以使用 HTML5 会话存储。检查此[链接](http://playground.html5rocks.com/#sessionstorage)。

只需深入研究 HTML5 会话存储，您就会发现很多示例。

# c++ - 用于字典/列表的此 Python 代码的 C++ 等价物？

> ID：12233895
> 
> 赞同：0
> 
> 时间：2012-09-02T06:26:57.757
> 
> 标签：c++, visual-studio-2010, windows-7, python-3.2

在我的 Python 代码中，我有一个问题需要在开始翻译成 c++ 之前加以澄清：如何制作正确的字典/列表，我可以在其中使用相当于“if var in *_* ”的内容。

需要翻译的任意示例：

```
CONFIRMATION = ('yes', 'yeah', 'yep', 'yesh', 'sure', 'yeppers', 'yup')
DECLINATION = ('no', 'nope', 'too bad', 'nothing')

varResponse = str(input('yes or no question'))
if varResponse in CONFIRMATION: 
    doSomething()
elif varResponse in DECLINATION: 
    doSomethingElse()
else:
    doAnotherThing() 
```

使用数组执行类似的任务相当容易，例如：

```
if (userDogName == name[0])
    execute something; 
```

但我需要的是：

```
if (userDogName is one of a population of dog names in a dictionary)
    execute something; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T06:35:20.947

您可以使用 STL 容器类`set`。它使用平衡二叉树：

```
#include <iostream>
#include <set>
#include <string>

int main(int argc, char* argv[])
{
  std::set<std::string> set;
  std::set<std::string>::const_iterator iter;

  set.insert("yes");
  set.insert("yeah");

  iter = set.find("yess");

  if (iter != set.end( ))
  {
    std::cout << "Found:" << *iter;
  }
  else
  {
    std::cout << "Not found!";
  }

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T07:01:00.703

C++11 允许使用与 Python 代码非常相似的解决方案：

```
#include <iostream>
#include <set>
#include <string>

using namespace std;

set<string> CONFIRMATION = {"yes", "yeah", "yep", "yesh", "sure", "yeppers", "yup"};
set<string> DECLINATION = {"no", "nope", "too bad", "nothing"};

int main() {
  cout << "yes or no question";
  string varResponse;
  getline(cin, varResponse);
  if (CONFIRMATION.find(varResponse) != CONFIRMATION.end()) {
    doSomething();
  } else if (DECLINATION.find(varResponse) != DECLINATION.end()) {
    doSomethingElse();
  } else {
    doAnotherThing();
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T07:47:30.687

嗯，C++ 不太适合小型临时程序，因为它没有提供太多的基础结构。您打算在标准库之上创建自己的基础结构（例如，甚至只是简单的集合！）。或者使用一些 3 ^(rd)方库，即*您的选择*。

因此，虽然 Python 附带了电池，但对于 C++，接受特定提供的电池没有很大的压力（因为没有），但您至少必须选择电池。

对于基本代码，Python 片段

```
CONFIRMATIONS = ("yes", "yeah", "yep", "yesh", "sure", "yeppers", "yup")
DECLINATIONS = ("no", "nope", "too bad", "nothing")

response = raw_input( "yes or no? " )
if response in CONFIRMATIONS:
    pass # doSomething()
elif response in DECLINATIONS:
    pass # doSomethingElse()
else:
    pass #doAnotherThing() 
```

在 C++ 中可以看起来像这样：

```
typedef Set< wstring > Strings;

Strings const   confirmations   = temp( Strings() )
    << L"yes" << L"yeah" << L"yep" << L"yesh" << L"sure" << L"yeppers" << L"yup";
Strings const   declinations    = temp( Strings() )
    << L"no" << L"nope" << L"too bad" << L"nothing";

wstring const response = lineFromUser( L"yes or no? " );
if( isIn( confirmations, response ) )
{
    // doSomething()
}
else if( isIn( declinations, response ) )
{
    // doSomethingElse()
}
else
{
    // doAnotherThing()
} 
```

但是，它依赖于已定义的一些基础结构，例如`Set`类：

```
template< class TpElem >
class Set
{
public:
    typedef TpElem      Elem;

private:
    set<Elem>   elems_;

public:
    Set& add( Elem const& e )
    {
        elems_.insert( e );
        return *this;
    }

    friend Set& operator<<( Set& s, Elem const& e )
    {
        return s.add( e );
    }

    bool contains( Elem const& e ) const
    {
        return (elems_.find( e ) != elems_.end());
    }
};

template< class Elem >
bool isIn( Set< Elem > const& s, Elem const& e )
{
    return s.contains( e );
} 
```

我使用了一个，`operator<<`因为截至 2012 年 Visual C++ 不支持 C++11 花括号列表初始化。

这里`set` 来自`std::set`标准库。

而且，嗯，`temp`事情：

```
template< class T >
T& temp( T&& o ) { return o; } 
```

而且，更多的基础设施，`lineFromUser`功能：

```
wstring lineFromUser( wstring const& prompt )
{
    wcout << prompt;

    wstring result;
    getline( wcin, result )
        || throwX( "lineFromUser: std::getline failed" );
    return result;
} 
```

其中，依赖于一个`throwX`函数：

```
bool throwX( string const& s ) { throw runtime_error( s ); } 
```

但这就是全部，除了你必须将我首先展示的 C++ 代码放入某个函数中，比如说，调用 that `cppMain`，然后从你的`main`函数中调用它（甚至更多的基础结构要定义！）：

```
int main()
{
    try
    {
        cppMain();
        return EXIT_SUCCESS;
    }
    catch( exception const& x )
    {
        wcerr << "!" << x.what() << endl;
    }
    return EXIT_FAILURE;
} 
```

所以，要在 C++ 中正确地做事，有一些高昂的开销。

C++ 主要用于大型程序，而 Python（我经常使用）用于小型程序。

是的，我知道有些学生可能会或将会对这种说法做出反应，或者他们觉得说它对小程序没有好处是对 C++ 的诽谤（嘿，我一直在做这些！）和/或这是一个诽谤 Python 说它对大型系统没有好处（嘿，你没听说过 YouTube，你这个愚蠢的无能的人吗？），但事实就是这样。有时用锤子拧螺丝会更方便，所以有时我用 C++ 做一些小任务。但一般来说那是因为在手边的机器上安装 Python 会比较麻烦，而且一般来说，要做一个任务 X，最好使用专为 X 类工作而设计的工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T06:47:34.510

这可以使用`std::find`任何标准模板库容器来解决。

```
std::vector<std::string> answers;
std::string input;
...
if(std::find(answers.begin(), answers.end(), input) != answers.end()) {
    /* input was found in answers */
} else {
    /* input was not found in answers */
} 
```

对于较大的列表，最好将列表存储在`std::set`对象中，如 Tilo 建议的那样。`std::find`将同样工作。

# linux - Linux，修改文件时间戳与当前时间不同

> ID：12233906
> 
> 赞同：5
> 
> 时间：2012-09-02T06:29:31.280
> 
> 标签：linux, datetime, timestamp

我在修改文件的修改日期方面遇到问题。问题是每当我修改文件时，修改日期都会比当前日期提前几分钟设置

```
touch a  
ls -l a
-rw-r--r-- 1 user group 0 2012-09-02 10:49 a

date
Sun Sep  2 10:46:07 IRDT 2012 
```

*当我想做一个制作*时，这似乎造成了麻烦

 *```
make[1]: *** File `Makefile' has modification time in the future 
```

这是在我使用 ssh 连接的 debian 系统上，我没有 root 访问权限。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:05:36.730

如果您的系统管理员无法很快修复它，并且您没有 root，您可以手动触摸具有特定日期 (-t) 的文件。*

# sharedpreferences - Android - 适用于 2.2 和 4.0 的首选项

> ID：12233907
> 
> 赞同：1
> 
> 时间：2012-09-02T06:29:47.380
> 
> 标签：sharedpreferences, preferenceactivity, android-4.0-ice-cream-sandwich, android-2.2-froyo, android-2.3-gingerbread

我想为我的应用程序创建用户首选项。如何创建适用于 2.2 和 4.0 的首选项？

Android 帮助中为 PreferenceActivity 提供的示例需要 API 11 及更高版本。可以选择仅在 onCreate 或类级别应用 @TargetApi。

那么创建分离 PreferenceActivity 类的最佳实践是 - 一个用于 API 11 及更高版本，另一个用于 API 8 及更高版本 - 并根据用户所在的 android 版本调用一个？

# node.js - 使用 Express 具有不同路径的几个单独的静态目录

> ID：12233909
> 
> 赞同：0
> 
> 时间：2012-09-02T06:30:53.190
> 
> 标签：node.js, express

我希望能够让 Express 将多个目录（不仅仅是一个）视为“静态”——也就是说，如果文件在那里，则提供它。

Connect 的 static() 模块似乎是为那些想要在服务器根目录中创建特定目录中的文件的人准备的。然而，这不是我想要的。我所追求的最终是这样的：

*   GET /modules/MODULE1 -> 返回 modules/MODULE1/public 中的文件
*   GET /modules/MODULE2 -> 返回 modules/MODULE2/public 中的文件
*   GET /modules/MODULE3 -> 返回 modules/MODULE3/public 中的文件

我正在查看 的来源`static`，它依次使用`send`，它又定义了`SendStream`，它直接从请求中获取文件路径（这不是我想要的）。

有没有简单的方法可以做到这一点？

默克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T06:33:48.807

怎么了

```
app.use('/modules/MODULE1', express.static('modules/MODULE1/public')) 
```

每个模块？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T03:54:36.517

答案在这里：

[https://groups.google.com/forum/?fromgroups=#!topic/express-js/kK9muR0mjR4](https://groups.google.com/forum/?fromgroups=#!topic/express-js/kK9muR0mjR4)

基本上：

```
var st = express.static(
    __dirname + app.set('path.static'), 
    { maxAge : app.set('static.expiry') }
);

app.get(/^\/static\/(v.+?\/)?(.+$)/, function (req, res, next) {
  req.url = req.params[1];
  st(req, res, next);
}); 
```

基本上，由于静态考虑 req.url，因此只需对其进行破解，以便在/如果路径匹配时“看起来正确”。

我问 TJ 是否会将其添加为选项，他（正确地）回答：

> 这不是 send() 应该做的事情，您已经可以使用 connect/express 和几个 static() 中间件轻松做到这一点，您只需要使用 send() 做同样的事情，但需要更多手动操作

[https://github.com/visionmedia/send/issues/10#issuecomment-8225096](https://github.com/visionmedia/send/issues/10#issuecomment-8225096)

# eclipse - 如何在 RCP App 中获取资源对象

> ID：12233915
> 
> 赞同：1
> 
> 时间：2012-09-02T06:31:52.383
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我使用 CNF 在我的 RCP 应用程序中创建类似于 Project Explorer 的视图。当用户右键单击视图中的项目时，我已完成显示新菜单及其子菜单。 ![在此处输入图像描述](../Images/56eb7eae1fe50112fadf621da1fbf243.png)

但是当用户单击子菜单时（对于这种情况，将创建一个方法库），**我需要知道用户右键单击了哪个项目对象**。

我的问题是我该怎么做？请帮我。

谢谢大家，鹦鹉螺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T08:13:02.567

我认为 wiki 页面[E4/EAS/Selection](http://wiki.eclipse.org/E4/EAS/Selection)应该提供一种查询正确选择的方法。

> 在 Eclipse 3.x 中，org.eclipse.ui.ISelectionService 允许工作台部件查询活动选择，此外还可以附加侦听器以监视选择更改。

（见[这个例子](http://www.eclipse.org/forums/index.php/t/183768/)）

在 e4 世界中，选择通过`ESelectionService`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T09:38:27.793

感谢 VonC，

现在我通过这样做得到了用户右键单击的资源对象：

```
IWorkbenchWindow window = PlatformUI.getWorkbench().getActiveWorkbenchWindow();
    IWorkbenchPage page = window.getActivePage();
    CommonNavigator view = (CommonNavigator)page.findView("spe.ui.navigator.view");
    selection = (IStructuredSelection) view.getSite().getSelectionProvider().getSelection(); 
```

但我真的对这个解决方案并不完全满意。请注意，我在操作后打开了一个 INewWizard。在 INewWizard 我们有`public void init(IWorkbench workbench, IStructuredSelection selection)`. 我真的很想使用这种方法，但我不知道如何使它起作用。

请有人帮助我。谢谢

# c# - 如何创建一个 spotify/itunes 类型的侧边菜单？

> ID：12233925
> 
> 赞同：0
> 
> 时间：2012-09-02T06:34:05.507
> 
> 标签：c#, winforms, visual-studio-2010

我想在我的 Windows 窗体应用程序中创建一个侧边菜单，看起来像 spotify 和 iTunes 样式（参见图片作为示例）实现此目的的最佳方法是什么？我想使用图标并且没有样式限制.. 想只使用 webbrowser 控件吗？

![在此处输入图像描述](../Images/637afaf95ca83da40f1dcd9e61b857d9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T06:52:46.813

我强烈建议您不要使用 Winforms，因为它在自定义样式方面存在严重限制，并建议您更好地使用 WPF，那样做您想要的菜单将花费您不超过 1 小时（自定义控件，一些带有适当图标的网格和标签）。

按照您的建议通过 HTML 执行此操作似乎也过于复杂（由于返回命令路由等）。

# c# - C#混淆中的LuaInterface

> ID：12233927
> 
> 赞同：0
> 
> 时间：2012-09-02T06:34:18.010
> 
> 标签：c#, lua

作为最终用户，我以前曾多次使用过 Lua，我似乎记得能够在 Lua 中创建一个方法，然后通过 RegisterFunction 调用将所述方法注册到程序中。

我知道我必须在我的应用程序中创建 RegisterFunction 调用才能使此设置正常工作，但我的问题是我是否必须自己实现对 Lua 内部方法的支持？

据我所知，此时我唯一的选择是 DoString 和 DoFile，我在任何地方都找不到任何帮助。

我试图将 Lua 添加到所有实体代码的游戏设置中，我设置它允许我将脚本放入每种实体类型的某些事件中，并且我想将 Lua 方法附加到这些事件以调用它们。

例如：

```
OnDamagedEvent += DoLuaMethod(method, Entity ID); 
```

根据我对任何编程如何工作的理解，我认为不可能仅从“DoString”执行整个方法，除非字符串一次包含整个方法，我想它可以，但它应该如何使用？我原本计划一次只向引擎发送一条线。

如果我在 Lua 中定义一个方法，它会永久（在那种情况下）在 lua 中定义以供使用吗？

如果是这样，我怎样才能将该方法访问器获取到 C# 中，然后访问它，发送调用参数所需的信息（我记得的那个有特定的方法类型，你必须从中选择，这样它就知道要发送什么信息方法）

如果我听起来像个菜鸟，我很抱歉，因为我不知道如何设置一些在概念上看起来如此简单的东西，我只是不确定代码应该如何布局以及我应该使用 LuaInterface 中的哪些方法！

在此先感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T07:45:24.430

好吧，我找到了所有问题的答案。

LuaInterface 有一个“LuaFunction”类，你可以用它来引用 lua 中的函数。

脚本运行后，任何已初始化的函数将在脚本运行后保持初始化状态。

您可以使用 Lua.GetFunction(FUNCTION NAME) 设置 LuaFunction 对象，其中 Lua 引用包含该函数的 Lua 实例（运行脚本后）

我在我的公开方法中添加了一些新方法：RegisterEntityEvent 和 RegisterGlobalEvent 以及一些参数，以允许我更具体地了解我想将此方法添加到哪个事件，其设置如下：

```
public static void RegisterEntityMethod(string MethodName, string EntityType, string EventType)
{
    EntityTypes[EntityType].Events[EventType] += CallLuaMethod(LuaEngine.LuaVM.GetFunction(name));
} 
```

///\ 这是ofc的一个例子，未经测试

要调用它，您只需运行 LuaFunction.Call(Parameters);

这允许我从我的游戏中的事件处理程序中调用我的 Lua 脚本中的方法。

这就像我想象的那样简单，只是不容易找到某个地方来学习如何做到这一点：D

这里：http://forum.junowebdesign.com/net-programming/30025-luainterface-explained.html >

# java - 如何为带圆角的 JDialog 设置 3D 边框？

> ID：12233928
> 
> 赞同：4
> 
> 时间：2012-09-02T06:34:23.213
> 
> 标签：java, swing, border, rounded-corners, jdialog

我可以在我的 JDialog 中添加一个圆角边框，如[如何在 Java Swing 中创建圆角标题边框](https://stackoverflow.com/questions/3056089/how-to-create-a-rounded-title-border-in-java-swing)。但它仍然是一种颜色。我想让边框看起来像 3D。

这是我尝试的方法。

```
Graphics2D g2d = (Graphics2D) g;
        Color c1 = getBackground();
        Color c2 = color1.darker();
        int w = getWidth();
        int h = getHeight();

      GradientPaint gp = new GradientPaint(
                0, 0, c1,
                0, h, c2);

        g2d.setPaint(gp);
        g2d.fill3DRect(0,0, w, h,true); 
```

然后，没有 3D 外观，但边框已随着边框颜色变宽。
我怎样才能做到这一点？

任何示例代码或链接将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T08:21:41.893

![3D边框](../Images/c2820d625bb5837de28c99e5161a3616.png)

```
import java.awt.*;
import java.awt.geom.*;
import javax.swing.*;
import javax.swing.border.*;

public class ThreeDimensionalBorder extends AbstractBorder {

    private static final long serialVersionUID = 1L;
    private Color color;
    private int thickness = 8;
    private int radii = 8;
    private Insets insets = null;
    private BasicStroke stroke = null;
    private int strokePad;
    RenderingHints hints;
    int shadowPad = 3;

    ThreeDimensionalBorder(Color color) {
        this(color, 128, 8);
    }

    ThreeDimensionalBorder(Color color, int transparency, int shadowWidth) {
        this.color = color;
        shadowPad = shadowWidth;

        stroke = new BasicStroke(thickness);
        strokePad = thickness/2;

        hints = new RenderingHints(
                RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);

        int pad = radii + strokePad;
        int bottomPad = pad + strokePad + shadowPad;
        int rightPad = pad + strokePad + shadowPad;
        insets = new Insets(pad,pad,bottomPad+shadowPad,rightPad);
    }

    @Override
    public Insets getBorderInsets(Component c) {
        return insets;
    }

    @Override
    public Insets getBorderInsets(Component c, Insets insets) {
        return getBorderInsets(c);
    }

    @Override
    public void paintBorder(
            Component c,
            Graphics g,
            int x, int y,
            int width, int height) {

        Graphics2D g2 = (Graphics2D)g;

        int bottomLineY = height-thickness-shadowPad;

        RoundRectangle2D.Double bubble = new RoundRectangle2D.Double(
                0+strokePad,
                0+strokePad,
                width-thickness-shadowPad,
                bottomLineY,
                radii,
                radii
                );

        Area area = new Area(bubble);

        g2.setRenderingHints(hints);

        g2.setColor(color);
        g2.setStroke(stroke);
        g2.draw(area);

        Area shadowArea = new Area(new Rectangle(0,0,width,height));
        shadowArea.subtract(area);
        g.setClip(shadowArea);
        Color shadow = new Color(color.getRed(),color.getGreen(),color.getBlue(),128);
        g2.setColor(shadow);
        g2.translate(shadowPad,shadowPad);
        g2.draw(area);
        AffineTransform at = g2.getTransform();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                JPanel p = new JPanel();
                String t = "The quick brown fox jumps over the lazy dog!";

                JLabel l1 = new JLabel(t);
                l1.setBorder(new ThreeDimensionalBorder(Color.MAGENTA.darker(),128,4));
                p.add(l1);

                JLabel l2 = new JLabel(t);
                l2.setBorder(new ThreeDimensionalBorder(Color.BLACK,200,5));
                p.add(l2);

                JLabel l3 = new JLabel(t);
                l3.setBorder(new ThreeDimensionalBorder(Color.BLUE,40,6));
                p.add(l3);

                JOptionPane.showMessageDialog(null, p);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-02T07:46:17.387

这样就够了吗？？

![在此处输入图像描述](../Images/e2e63f69922a449c8080735037f59eb7.png)

它远非完美，但基本的想法是有效的......

```
public class MyRoundedBorder implements Border {

    protected static final Insets DEFAULT_INSETS = new Insets(4, 4, 4, 4);

    @Override
    public void paintBorder(Component c, Graphics g, int x, int y, int width, int height) {

        Graphics2D g2d = (Graphics2D) g.create();

        g2d.setStroke(new BasicStroke(3, BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND));
        g2d.setColor(Color.WHITE);
        Shape corner = new RoundedShape(width - 8, height - 8);
        g2d.translate(x + 2, y + 2);
        g2d.draw(corner);
        g2d.transform(AffineTransform.getRotateInstance(Math.toRadians(180), (width - 8) / 2, (height - 8) / 2));
        g2d.setColor(Color.LIGHT_GRAY);
        g2d.draw(corner);

        g2d.dispose();

    }

    @Override
    public Insets getBorderInsets(Component c) {

        return DEFAULT_INSETS;

    }

    @Override
    public boolean isBorderOpaque() {

        return true;

    }

    public class RoundedShape extends Path2D.Float {

        public RoundedShape(int width, int height) {

            moveTo(0, height - 20);
            append(new Arc2D.Float(0, height - 20, 20, 20, 180, 45, Arc2D.CHORD), false);
            lineTo(0, 20);
            curveTo(0, 0, 0, 0, 20, 0);
            lineTo(width - 10, 0);
            append(new Arc2D.Float(width - 20, 0, 20, 20, 90, -45, Arc2D.CHORD), false);

        }

    }

} 
```

# jquery - PrettyPhoto/jQuery 从点击加载

> ID：12233931
> 
> 赞同：1
> 
> 时间：2012-09-02T06:35:07.943
> 
> 标签：jquery, prettyphoto

我对 jQuery 有点陌生，我正在尝试做一些我认为很简单的事情，但我似乎无法破解它。

我想创建一个在您单击按钮时加载不同视频的功能。我看到的所有 PrettyPhoto 示例都在 html 中使用标签，而不是 JS click。

总结一下我的代码，我有以下几点：

```
$("#button1").click(function() {
  openMovie("myMovie.mp4");
}); 

function openMovie(url) {
  //open up the movie at the url passed into the function as a lightbox with PrettyPhoto    
} 
```

我认为这很简单，但我似乎找不到任何关于如何做到这一点的信息。文档都是内联html

我能够在网上找到一些我更改的图像的代码，但它会引发错误：

```
$("a[rel^='prettyPhoto']").prettyPhoto();
$.prettyPhoto.open(['assets/myMovie.mp4'],['Test']); 
```

**

> 无法加载图像。确保路径正确且图像存在。

**

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T18:06:29.423

我能够通过更改代码来完成这项工作：

```
$("a[rel^='prettyPhoto']").prettyPhoto(); 
```

至

```
$("a[rel^='prettyPhoto[movies]']").prettyPhoto(); 
```

# jquery - 示例 getJSON 代码适用于 jQuery 1.4.1.js，但不适用于 jQuery 1.6.4 或更高版本？

> ID：12233938
> 
> 赞同：1
> 
> 时间：2012-09-02T06:36:03.917
> 
> 标签：jquery, jquery-mobile, getjson

我是移动应用程序开发的新手，我已经使用`getJSON`与 jQuery 1.4.1.js 版本非常配合的方法开发了一段代码。

但是这个js文件不兼容jQuery mobile，所以我尝试加载jQuery 1.6.4.js及以上版本。对于这些最新版本，该`getJSON`方法不起作用。

更具体地说，如果我加载：

```
<script src="../Scripts/jquery-1.4.1.js" type="text/javascript"></script> 
```

代码工作正常，但是当我加载时：

```
<script type="text/javascript" src="../Scripts/jquery-1.7.1.js"></script> 
```

它不起作用...

我也用这个`$.ajax`方法试过，但这都不管用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T06:42:32.450

升级 jQuery 的主要问题——从 1.4.x 到 1.6.x：

*   prop() 和 attr()

*   Ajax 和 parseJSON

*   Flash 对象上的 getAttribute

*   插件

我认为[这个链接](http://www.davidtong.me/upgrading-jquery-from-1-4-x-to-1-6-1/)会对你有所帮助。

# algorithm - 查找数组中两个数字之间的最小绝对差的最佳算法

> ID：12233939
> 
> 赞同：16
> 
> 时间：2012-09-02T06:36:05.263
> 
> 标签：algorithm, perl, sorting, binary-search

有一个数组可以包含，比如说，最多`1000`元素。它可以产生的数字范围是 say `1 to 10^10`。现在我必须`minimal absolute difference`在数组中找到两个数字之间的值。我想到了两种算法：

**对于第一个**，我定义了一个`binarysearch`函数，该函数在排序数组中查找要插入的数字的位置。现在我只用给定数组的第一个数字开始排序数组，并从第二个元素开始迭代给定数组。对于每个数字，我找到它在排序数组中的位置。如果那个位置的数字就是这个数字，那么差是0，它是可能的最低值，所以我退出循环。否则，我在该点将数字插入排序数组中，然后检查该数字与该数组中的前一个和下一个数字之间的差异。然后我存储这个结果和上一个结果的最小值，并以这种方式继续。

**第二：我使用 quicksort 对数组进行排序**。（范围太大，所以我认为基数排序不会那么有效）。然后我迭代它，如果两个连续的数字相等，则以 0 的答案打破，否则存储该数字与前一个数字和前一个结果之间的差的最小值。

**哪一个会更有效率？**

**有没有更好的算法？**

Stackoverflow 在这方面有很多帖子，但它们并没有太大帮助。这是我在 Perl 中的代码：

```
sub position {
    my @list   = @{$_[0]};
    my $target = $_[1];

    my ($low,$high) = (0, (scalar @list)-1);

    while ($low <= $high) {
        $mid = int(($high + $low)/2);

        if ( $list[$mid] == $target ) {

            return $mid;
        }
        elsif ( $target < $list[$mid] ) {

            $high = $mid - 1; 
        }
        else {

            $low = $mid + 1;
        }
    }
    $low;
}
sub max { $_[0] > $_[1] ? $_[0] : $_[1]; }
sub min { $_[0] > $_[1] ? $_[1] : $_[0]; }

$ans        = 10_000_000_000;
@numbers    = (234, 56, 1, 34...123); #given array
($max,$min) = @num[0, 0];
@sorted     = ($numbers[0]);

for ( @num[1 .. $#num] ) {
    $pos = position(\@sorted, $_);

    if ( $sorted[$pos] == $_ ) { 

        $ans = 0;
        last;
    }
    splice @sorted, $pos, 0, $_;

    if ( $#sorted == $pos ) { 

        $ans = min($_-$sorted[-2], $ans);
    }
    elsif ( 0 == $pos ) {

        $ans = min($sorted[1]-$_, $ans);
    }
    else { 

        $ans = min(min(abs($sorted[$pos-1]-$_), abs($sorted[$pos+1]-$_)), $ans);
    }
    $max = max($_, $max);
    $min = min($_, $min);
}
print "$ans\n"; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-02T06:55:13.363

您最多有 5k 个元素。

请注意，[沙桥](http://en.wikipedia.org/wiki/Sandy_Bridge_%28microarchitecture%29)处理器具有 32KB [L1-Cache](http://en.wikipedia.org/wiki/CPU_cache)，假设为 4 字节整数 - 这意味着它可以包含 8192 个整数。

我会**尽量避免创建额外的数据**（计数器等除外），并使用相同的数组完成所有操作。这将使[缓存未命中](http://en.wikipedia.org/wiki/CPU_cache#Cache_miss)的数量非常少，并且可能会胜过任何算法。

因此，**就地快速排序而不是迭代**数组中的元素可能会比任何其他解决方案更好，既能提高缓存效率，又能保持`O(nlogn)`.

注意 - 虽然这个解决方案*可能*会更有效（至少在理论上），但规模仍然非常小 - 除非您要多次执行此操作 - 不值得您花时间过度优化它。

* * *

一般提示：当谈论小规模问题（最多 5000 个元素符合此标准）时，大 O 表示法通常是不够的。缓存性能*通常*是这些问题的主要因素。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-02T07:17:01.083

这是一维中[最接近的配对问题。](http://en.wikipedia.org/wiki/Closest_pair_of_points)请注意，解决此问题至少与解决[元素唯一性问题](http://en.wikipedia.org/wiki/Element_uniqueness_problem)一样难，因为如果有任何重复元素，则答案为 0。

元素唯一性问题需要`O(n lg n)`时间来解决，所以这个问题也必须至少有那么难。由于您提出的迭代排序解决方案是`O(n lg n)`，因此没有更好的渐近最坏情况算法可用。

然而，正如 wiki 文章中所指出的，有些算法的最坏情况运行时间更差，但预期运行时间是线性的。[本文](http://rjlipton.wordpress.com/2009/03/01/rabin-flips-a-coin/)介绍了一种这样的方法，看起来很复杂！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-02T07:11:26.907

第二个会更快，原因很简单，在第一个解决方案中，您使用的是您在 Perl 空间中编写的排序，而在第二个解决方案中，您有机会使用 Perl 内置`sort`的C 函数而且非常快。如此小的投入，第一个获胜几乎是不可能的，即使它有可能做更少的工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-02T07:03:56.210

第二种算法可能更好。在第一个算法中，您使用的是插入排序，它比其他一些排序算法效率低。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-02T15:47:24.460

[最近对问题的简单随机筛算法](http://www.cs.umd.edu/~samir/grant/cp.pdf)描述了最近对问题的 O(n) 随机算法，并且它还参考了另一篇论文，该论文给出了一维最近对问题的 O(n log log n) 确定性算法如果您有权访问该`floor`功能，则会出现问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-02T07:13:57.090

因为我们在谈论 Perl，所以我们不应该对最有效的排序算法感到好奇——在 Perl 中自己实现某些东西肯定比使用内置函数要慢。只是为了好玩，我运行了这个小脚本（为了清晰起见）：

```
time perl -e'
    @array = map {rand} 1..100000;
    $lastdiff=10**11;
    for(sort {$a <=> $b} @array){
        unless(defined $last){
            $last=$_;
            next
        }
        $difference = abs($last - $_);
        $last = $_;
        $lastdiff = $lastdiff < $difference ? $lastdiff : $difference;
        last if $lastdiff == 0;
    }
    print $lastdiff, "\n"
' 
```

我设置了一个包含 100,000 个随机数的数组。该脚本在 0.42 秒内终止（在我的慢速笔记本电脑上）。考虑到我使用 ~0.12 秒进行启动和数组初始化，主要算法使用大约 0.3 秒。假设*O(n)*你应该在 < 0.02 秒内完成......哦，等等，这并不多......（有 5000 个元素）

如果您需要更快，请使用 Inline::C 编写算法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-02T06:43:39.487

1.  将数组的数字复制到黑红树中
2.  这将允许您测试 log(n) 的特定间隔中是否有数字
3.  设置 d = inf
4.  使用变量 i 遍历数组
5.  如果区间 (id, i+d) 中有一个数，则设置 d 等于 |i-thatNumber|

它会带你〜n * ln找到d

# python - 使用 python 的 SocketServer 和 Children 将额外的元数据传递给 RequestHandler

> ID：12233940
> 
> 赞同：15
> 
> 时间：2012-09-02T06:36:17.387
> 
> 标签：python, sockets

我正在实现一个正在使用的 python 应用程序`ThreadingTCPServer`和一个`BaseRequestHandler`. 这样做的问题是`ThreadingTCPServer`似乎自动产生线程并创建处理程序的实例，调用它们的`handle()`函数。然而，除了使用全局变量或类变量之外，这让我无法将数据传递给处理程序，这两种变量看起来都很骇人。有没有更好的方法呢？

理想情况下，这应该是这样的：

```
class ThreadedTCPServer(ThreadingTCPServer):
    def process_request(self, *args, **kwargs):
        ThreadingTCPServer.process_request(self, data, *args, **kwargs) 
```

与处理程序一样

```
class ThreadedTCPRequestHandler(BaseRequestHandler):
    def handle(self,data):
        #do something with data 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-11-08T23:10:33.613

我偶然发现了同样的事情。我的解决方案如下：

```
class ThreadedTCPRequestHandler(SocketServer.StreamRequestHandler):
    def handle(self):
        print(self.server.mycustomdata)

class ThreadedTCPServer(SocketServer.ThreadingTCPServer):
    pass

server = ThreadedTCPServer((args.host, args.port), ThreadedTCPRequestHandler)
server.mycustomdata = 'foo.bar.z'
server.serve_forever() 
```

RequestHandler 以服务器对象作为第三个参数调用，并保存为`self.server`属性，因此您可以访问它。如果您将此属性设置为可调用，您也可以轻松调用它：

```
def handle(self):
    mycustomdata = self.server.mycustomdata() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-12T14:23:38.297

第一个答案对我有用，但我认为更改`__init__`方法并在构造函数中传递属性更简洁：

```
class ThreadedTCPServer(socketserver.ThreadingMixIn, socketserver.TCPServer):

    def __init__(self, host_port_tuple, streamhandler, Controllers):
        super().__init__(host_port_tuple, streamhandler)
        self.Controllers = Controllers 
```

注意构造函数中的第三个参数“Controllers”，然后在没有该参数的情况下调用 super，然后将新属性 Controllers 设置为属性 self.Controllers。类的其余部分保持不变。然后，在您的请求处理程序中，您可以使用“服务器”属性访问参数，如上所述：

```
def handle(self):        
    self.Controllers = self.server.Controllers
    <rest of your code> 
```

它与上面的答案大致相同，但我觉得它更简洁一些，因为构造函数被重载，你只需在构造函数中添加你想要的属性：

```
server = ServerInterface.ThreadedTCPServer((HOST, PORT), ServerInterface.ThreadedTCPRequestHandler, Controllers) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T14:03:42.950

由于`handle`是由您的`BaseRequest`子类实现的，因此它可以从自身获取数据，而无需调用者传递数据。（`handle`也可以是请求实例的可调用属性，例如`user_data`lambda——在惯用设计的 python 中通常不需要显式参数。）

查看 SocketServer 代码，`finish_request`将附加数据传递给`BaseRequestHandler`子类型构造函数应该很简单，该构造函数会将其存储在实例中`handle`以供使用。

# android - 在Android中修改相机拍摄的图像大小

> ID：12233944
> 
> 赞同：0
> 
> 时间：2012-09-02T06:37:33.510
> 
> 标签：android, android-camera

我正在尝试拍摄指定尺寸的图像并将其保存在 SD 卡上的所需位置。我正在使用 intent.putExtra 通过默认相机应用程序拍摄图像。

这是代码

```
public void onClick(View v) {
    //Setting up the URI for the desired location
    imageFile = "bmp"+v.getId()+".png";
    File f = new File (folder,imageFile);
    imageUri = Uri.fromFile(f);

    //Setting the desired size parameters
    private Camera mCamera;      
    Camera.Parameters parameters = mCamera.getParameters();
    parameters.setPreviewSize(width, height);
    mCamera.setParameters(parameters);       

    //Passing intent.PutExtras to defaul camera activity
    Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    i.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, imageUri);
    startActivityForResult(i,CAMERA_PIC_REQUEST);   
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode == RESULT_OK){
    return;
} 
```

拍照后相机主动关闭。是否可以通过这种方式修改默认相机活动拍摄的图像大小？

还是需要单独的相机应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T08:27:53.140

如果您的图像保存为文件，请从该文件创建位图并使用此方法减小其大小并将此位图传递给您的 Activity：

```
public static Bitmap decodeFile(File file, int requiredSize) {
    try {

        // Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(file), null, o);

        // The new size we want to scale to

        // Find the correct scale value. It should be the power of 2.
        int width_tmp = o.outWidth, height_tmp = o.outHeight;
        int scale = 1;
        while (true) {
            if (width_tmp / 2 < requiredSize
                    || height_tmp / 2 < requiredSize)
                break;
            width_tmp /= 2;
            height_tmp /= 2;
            scale *= 2;
        }

        // Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        return BitmapFactory.decodeStream(new FileInputStream(file), null,
                o2);
    } catch (FileNotFoundException e) {
    }
    return null;
} 
```

# mod-rewrite - 参数的mod重写规则

> ID：12233947
> 
> 赞同：0
> 
> 时间：2012-09-02T06:37:53.357
> 
> 标签：mod-rewrite

我有以下网址

```
www.localhost.com/profile.php?username=first.last 
```

我想将上面的 url 永久重定向到使用 .htaac​​cess 文件。（阿帕奇服务器）

```
www.localhost.com/first.last 
```

还请考虑那里很少有其他网址，但我不想碰它们..like

```
www.localhost.com/message.php?id=12
www.localhost.com/editprofile.php?editname=first.last
www.localhost.com/uploadphoto.php?username=first.last 
```

谁能帮帮我吗。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T07:15:07.780

您可以尝试处理查询字符串`RewriteCond`并将捕获的匹配传递给`RewriteRule`. 您必须排除`.php`重写规则的任何脚本，否则会在其他 URL 中产生一些问题。

不要忘记在你之后添加 [QSA] 标签，`RewriteRule`否则它不会添加查询字符串参数。

也许做这样的事情：

```
RewriteEngine on

#serve any existing php scripts as usual
RewriteRule ^([a-zA-Z0-9]+\.php) - [L]

#and now handle your specific stuff:
RewriteCond %{QUERY_STRING} ^([a-zA-Z0-9]+\./[a-zA-Z0-9]+)$
RewriteRule ^(%1)$ /profile.php?username=%1 [QSA] 
```

I don't test it but it should be a good beginning. You can read some good stuff [here](http://borkweb.com/story/apache-rewrite-cheatsheet) and inside the docs for [mod_rewrite httpd 2.2](http://httpd.apache.org/docs/2.2/fr/rewrite/) about how to write and handle specific rewriting use cases.

# php - 在 FPDF 中将页面方向更改为从右到左

> ID：12233949
> 
> 赞同：2
> 
> 时间：2012-09-02T06:37:57.547
> 
> 标签：php, fpdf, reportico

我正在使用 php 和 reportico 开发一个基于 Web 的报告应用程序。我想用波斯语（波斯语）制作报告，所以我需要更改 PDF 文件的方向（从左到右，到右到左）。是FPDF中对此有任何支持，或者在reportico中有任何解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T07:23:49.537

看到这个 URL 我认为它很有帮助。

[http://www.fpdf.de/downloads/addons/31/](http://www.fpdf.de/downloads/addons/31/)

**或者试试看。**

描述：此扩展允许打印旋转和剪切（即像斜体一样扭曲）文本。

TextWithDirection(float x, float y, string txt [, string direction])

x：横坐标

y：纵坐标

txt：文本字符串

方向：以下值之一（默认为 R）：

*   R（右）：从左到右
*   U（上）：从下到上
*   D（下）：从上到下
*   L（左）：从右到左

TextWithRotation(float x, float y, string txt, float txt_angle [, float font_angle])

x：横坐标

y：纵坐标

txt：文本字符串

txt_angle：文字的角度

font_angle：剪切角（默认为0）

**资源**

```
 <?php
require('fpdf.php');

class RPDF extends FPDF {

function TextWithDirection($x, $y, $txt, $direction='R')
{
    $txt=str_replace(')', '\\)', str_replace('(', '\\(', str_replace('\\', '\\\\', $txt)));
    if ($direction=='R')
        $s=sprintf('BT %.2f %.2f %.2f %.2f %.2f %.2f Tm (%s) Tj ET', 1, 0, 0, 1, $x*$this->k, ($this->h-$y)*$this->k, $txt);
    elseif ($direction=='L')
        $s=sprintf('BT %.2f %.2f %.2f %.2f %.2f %.2f Tm (%s) Tj ET', -1, 0, 0, -1, $x*$this->k, ($this->h-$y)*$this->k, $txt);
    elseif ($direction=='U')
        $s=sprintf('BT %.2f %.2f %.2f %.2f %.2f %.2f Tm (%s) Tj ET', 0, 1, -1, 0, $x*$this->k, ($this->h-$y)*$this->k, $txt);
    elseif ($direction=='D')
        $s=sprintf('BT %.2f %.2f %.2f %.2f %.2f %.2f Tm (%s) Tj ET', 0, -1, 1, 0, $x*$this->k, ($this->h-$y)*$this->k, $txt);
    else
        $s=sprintf('BT %.2f %.2f Td (%s) Tj ET', $x*$this->k, ($this->h-$y)*$this->k, $txt);
    if ($this->ColorFlag)
        $s='q '.$this->TextColor.' '.$s.' Q';
    $this->_out($s);
}

function TextWithRotation($x, $y, $txt, $txt_angle, $font_angle=0)
{
    $txt=str_replace(')', '\\)', str_replace('(', '\\(', str_replace('\\', '\\\\', $txt)));

    $font_angle+=90+$txt_angle;
    $txt_angle*=M_PI/180;
    $font_angle*=M_PI/180;

    $txt_dx=cos($txt_angle);
    $txt_dy=sin($txt_angle);
    $font_dx=cos($font_angle);
    $font_dy=sin($font_angle);

    $s=sprintf('BT %.2f %.2f %.2f %.2f %.2f %.2f Tm (%s) Tj ET',
             $txt_dx, $txt_dy, $font_dx, $font_dy,
             $x*$this->k, ($this->h-$y)*$this->k, $txt);
    if ($this->ColorFlag)
        $s='q '.$this->TextColor.' '.$s.' Q';
    $this->_out($s);
}

}

?> 
```

**例子**

```
 <?php
define('FPDF_FONTPATH', 'font/');
require('rpdf.php');

$pdf=new RPDF();
$pdf->Open();
$pdf->AddPage();
$pdf->SetFont('Arial', '', 40);
$pdf->TextWithRotation(50, 65, 'Hello', 45, -45);
$pdf->SetFontSize(30);
$pdf->TextWithDirection(110, 50, 'world!', 'L');
$pdf->TextWithDirection(110, 50, 'world!', 'U');
$pdf->TextWithDirection(110, 50, 'world!', 'R');
$pdf->TextWithDirection(110, 50, 'world!', 'D');
$pdf->Output();
?> 
```

输出：- [http://www.fpdf.org/en/script/ex31.pdf](http://www.fpdf.org/en/script/ex31.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T10:23:06.530

它可能不是提供的最佳解决方案，但您始终可以更改方法本身，因为它使用**Cell**方法（支持对齐），您只需在方法上执行 $align 参数，然后更改所有行正在打印文本。

（有六个地方必须更换，**最后**一部分有点棘手）

另外请考虑我刚刚进行了更改并且您可能需要修复一些错误，但这是**Write**方法最终的样子，

```
function Write($h, $txt, $link='', $align='L')
{
    // Output text in flowing mode
    $cw = &$this->CurrentFont['cw'];
    $w = $this->w-$this->rMargin-$this->x;

    $wmax = ($w-2*$this->cMargin);
    $s = str_replace("\r",'',$txt);
    if ($this->unifontSubset) {
        $nb = mb_strlen($s, 'UTF-8');
        if($nb==1 && $s==" ") {
            $this->x += $this->GetStringWidth($s);
            return;
        }
    }
    else {
        $nb = strlen($s);
    }
    $sep = -1;
    $i = 0;
    $j = 0;
    $l = 0;
    $nl = 1;
    while($i<$nb)
    {
        // Get next character
        if ($this->unifontSubset) {
            $c = mb_substr($s,$i,1,'UTF-8');
        }
        else {
            $c = $s[$i];
        }
        if($c=="\n")
        {
            // Explicit line break
            if ($this->unifontSubset) {
                $this->Cell($w,$h,mb_substr($s,$j,$i-$j,'UTF-8'),0,2,$align,0,$link);
            }
            else {
                $this->Cell($w,$h,substr($s,$j,$i-$j),0,2,$align,0,$link);
            }
            $i++;
            $sep = -1;
            $j = $i;
            $l = 0;
            if($nl==1)
            {
                $this->x = $this->lMargin;
                $w = $this->w-$this->rMargin-$this->x;
                $wmax = ($w-2*$this->cMargin);
            }
            $nl++;
            continue;
        }
        if($c==' ')
            $sep = $i;

        if ($this->unifontSubset) { $l += $this->GetStringWidth($c); }
        else { $l += $cw[$c]*$this->FontSize/1000; }

        if($l>$wmax)
        {
            // Automatic line break
            if($sep==-1)
            {
                if($this->x>$this->lMargin)
                {
                    // Move to next line
                    $this->x = $this->lMargin;
                    $this->y += $h;
                    $w = $this->w-$this->rMargin-$this->x;
                    $wmax = ($w-2*$this->cMargin);
                    $i++;
                    $nl++;
                    continue;
                }
                if($i==$j)
                    $i++;
                if ($this->unifontSubset) {
                    $this->Cell($w,$h,mb_substr($s,$j,$i-$j,'UTF-8'),0,2,$align,0,$link);
                }
                else {
                    $this->Cell($w,$h,substr($s,$j,$i-$j),0,2,$align,0,$link);
                }
            }
            else
            {
                if ($this->unifontSubset) {
                    $this->Cell($w,$h,mb_substr($s,$j,$sep-$j,'UTF-8'),0,2,$align,0,$link);
                }
                else {
                    $this->Cell($w,$h,substr($s,$j,$sep-$j),0,2,$align,0,$link);
                }
                $i = $sep+1;
            }
            $sep = -1;
            $j = $i;
            $l = 0;
            if($nl==1)
            {
                $this->x = $this->lMargin;
                $w = $this->w-$this->rMargin-$this->x;
                $wmax = ($w-2*$this->cMargin);
            }
            $nl++;
        }
        else
            $i++;
    }
    // Last chunk
    if($i!=$j) {
        if ($this->unifontSubset) {
            $this->Cell($w, $h,mb_substr($s,$j,$i-$j,'UTF-8'),0,0,$align,0,$link);
            // $this->Cell($l, $h,mb_substr($s,$j,$i-$j,'UTF-8'),0,0,'',0,$link);
        }
        else {
            $this->Cell($w, $h,substr($s,$j),0,0,$align,0,$link);
            // $this->Cell($l, $h,substr($s,$j),0,0,'',0,$link);
        }
    }
} 
```

# ruby-on-rails - Rails 超类不匹配错误与两个控制器

> ID：12233950
> 
> 赞同：4
> 
> 时间：2012-09-02T06:38:10.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有两个控制器

一个被定义为

```
class Admin::Businesses::DealsController < AdminController 
```

它位于`app/controllers/admin/businesses/deals_controller.rb`

另一个

```
class Admin::DealsController < AdminController 
```

位于`app/controllers/admin/deals_controller.rb`

一切都可以在开发环境中找到，但是当我推送到 heroku 并且应用程序在生产环境中加载时，它给了我这个错误

```
 /app/app/controllers/businesses/deals_controller.rb:1:in `<top (required)>': superclass mismatch for class DealsController (TypeError) 
```

我的 routes.rb 中的相关行看起来像这样

```
namespace 'admin' do
    resources :deals do
    end
    resources :businesses do
      resources :deals, module: "businesses"
    end
 end 
```

由于控制器名称相同，为什么它给我这个错误？还是超类不匹配？我怎样才能解决这个问题。我想要两个控制器用于交易，一个在 admin 下，另一个在 admin/businesses 下用于业务特定操作。

这是尝试使用 rails s -e production 在 prod 环境中本地运行应用程序时的完整堆栈跟踪

```
/home/abid/Projects/vocallocal/app/controllers/admin/businesses/deals_controller.rb:1: warning: toplevel constant Businesses referenced by Admin::Businesses
Exiting
/home/abid/Projects/vocallocal/app/controllers/businesses/deals_controller.rb:1:in `<top (required)>': superclass mismatch for class DealsController (TypeError)
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:359:in `require_or_load'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:313:in `depend_on'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:225:in `require_dependency'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:438:in `each'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:438:in `block in eager_load!'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:436:in `each'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:436:in `eager_load!'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `instance_exec'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `run'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `each'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `run_initializers'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/application.rb:136:in `initialize!'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /home/abid/Projects/vocallocal/config/environment.rb:5:in `<top (required)>'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from /home/abid/Projects/vocallocal/config.ru:4:in `block in <main>'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
    from /home/abid/Projects/vocallocal/config.ru:1:in `new'
    from /home/abid/Projects/vocallocal/config.ru:1:in `<main>'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands/server.rb:46:in `app'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands/server.rb:70:in `start'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:55:in `block in <top (required)>'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:50:in `tap'
    from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T09:24:57.780

问题是`admin`您的路线中的命名空间与您`admin`的类层次结构中的模块冲突。有关导致该特定错误的原因的详细信息很复杂，但在[http://code.dblock.org/warning-toplevel-constant-xyz-referenced-adminxyz中有更详细的解释](http://code.dblock.org/warning-toplevel-constant-xyz-referenced-adminxyz)

最简单的解决方案是将您`admin`的其中一个（可能是类名）重命名为其他任何名称。

# r - 使用 ggplot2 根据人口普查数据绘制地图

> ID：12233966
> 
> 赞同：4
> 
> 时间：2012-09-02T06:42:35.517
> 
> 标签：r, ggplot2, geospatial, census

我有一个点列表，我想使用 ggplot2 覆盖在旧金山的地图上。每个点都是一个经度、纬度对。我希望生成的地图位于经度/纬度坐标系中。我设法使用他的示例文件重现了 Hadley Wickham[绘制多边形 shapefile的说明。](https://github.com/hadley/ggplot2/wiki/plotting-polygon-shapefiles)我正在为 Windows 使用 R 2.15.1。

但是，我尝试使用从[UScensus2010cdp package](http://cran.r-project.org/web/packages/UScensus2000cdp/index.html)下载的 cdp 文件。这是我的代码片段：

```
require("rgdal") 
require("maptools")
require("ggplot2")
require("sp")
require("plyr")
gpclibPermit() # required for fortify method
require(UScensus2010)
require(UScensus2010cdp)
data(california.cdp10)
sf <- city(name = "san francisco", state="ca")
sf.points = fortify(sf) 
```

我收到以下错误：

```
Using name to define regions.
Error in unionSpatialPolygons(cp, invert(polys)) : input lengths differ
In addition: Warning message:
In split(as.numeric(row.names(attr)), addNA(attr[, region], TRUE)) :
   NAs introduced by coercion 
```

有谁知道：

1.  给 fortify() 的 region 参数赋予什么好的值？
2.  如果失败了，ggplot2 可以绘制的旧金山未转换纬度/经度坐标的地图数据源？
3.  或者，我在[这里](https://data.sfgov.org/Geography/San-Francisco-Shoreline-Zipped-Shapefile-Format-/kj7y-jjpu)找到了另一张旧金山的地图，其数据已被翻译。你能告诉我如何将这些数据转换为原始纬度/经度或对我的一组点进行反向转换吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T02:06:05.437

# 笔记：

*   无法访问[`UScensus2010cdp`](http://lakshmi.calit2.uci.edu/census2000/censuspackages/UScensus2010cdp_1.00.tar.gz)，所以我正在使用[`UScensus2000cpd`](http://cran.r-project.org/web/packages/UScensus2000cdp/index.html)which 复制错误。

# 问题

问题源于`fortify.SpatialPolygonsDataFrame`依赖于将 转换`row.names`为数字的事实，并且数据的行名是标识符。

```
ggplot2:::fortify.SpatialPolygonsDataFrame 

function (model, data, region = NULL, ...) 
{
    attr <- as.data.frame(model)
    if (is.null(region)) {
        region <- names(attr)[1]
        message("Using ", region, " to define regions.")
    }
    polys <- split(as.numeric(row.names(attr)), addNA(attr[, 
        region], TRUE))
    cp <- polygons(model)
    try_require(c("gpclib", "maptools"))
    unioned <- unionSpatialPolygons(cp, invert(polys))
    coords <- fortify(unioned)
    coords$order <- 1:nrow(coords)
    coords
} 
```

在你的情况下

```
row.names(sf@data)
## [1] "california_586" "california_590" "california_616" 
```

是您希望用作区域参数的标识符，`place` `state`并且`name`不唯一标识三个多边形。

```
# as.character used to coerce from factor
lapply(lapply(sf@data[,c('place','state','name')], unique), as.character)
## $place
## [1] "67000"
## 
## $state
## [1] "06"
## 
## $name
## [1] "San Francisco" 
```

作为元素以字母字符开头的字符向量，当强制为数字时，它变为`NA`

```
as.numeric(rownames(sf@data))
## [1] NA NA NA
## Warning message:
## NAs introduced by coercion 
```

这是给出的警告之一

# 解决方案

1.  定义一列作为行名
2.  将 row.names 设置为`NULL`或`1:nrow(sf@data)`

所以..

```
# rownames
sf@data[['place_id']] <- rownames(sf@data)
row.names(sf@data) <- NULL

# fortify
sf_ggplot <- fortify(sf, region = 'place_id')
# merge to add the original data
sf_ggplot_all <- merge(sf_ggplot, sf@data, by.x = 'id', by.y = 'place_id')
# very basic and uninteresting plot
ggplot(sf_ggplot_all,aes(x=long,y=lat, group = group)) + 
  geom_polygon(aes(fill =pop2000)) + 
  coord_map() 
```

![在此处输入图像描述](../Images/3acb1ca985079acf88b13f4e84c0084d.png)

# math - 数字很 大的除法

> ID：12233968
> 
> 赞同：1
> 
> 时间：2012-09-02T06:43:10.487
> 
> 标签：math, numbers, division

我只是想知道在处理大数字时有哪些不同的除法策略。通过大数字，我的意思是〜50位数字。

例如 9237639100273856744937827364095876289200667937278 / 8263744826271827396629934467882946252671

当两个数字都很大时，长除法似乎失去了它的用处......

我认为一种可能性是通过除数的乘法来计算，直到你超过被除数，但如果它是上面示例中的被除数除以一个小数字，例如 4，那么这就是大量的计算。

那么，有没有简单、干净的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T06:51:17.467

您使用什么语言/平台？这很可能已经解决，因此您无需从头开始实施。例如 Haskell 有`Integer`类型，Java 有`java.math.BigInteger`类，.NET 有`System.Numerics.BigInteger`结构，等等。

如果您的问题真的是理论上的问题，我建议您阅读 Knuth，计算机编程的艺术，第 2 卷，第 4.3.1 节。您正在寻找的东西在那里被称为“算法D”。这是该算法的 C 实现以及简短说明： [http ://hackers-delight.org.ua/059.htm](http://hackers-delight.org.ua/059.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T06:50:38.327

如果您正在使用数字的二进制表示并且可能是最有效的算法，那么[长除法并不是很复杂。](http://en.wikipedia.org/wiki/Long_division)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-02T06:52:24.003

如果您不需要非常精确的结果，则可以使用对数和指数。指数是函数 f(x)=e^x，其中 e 是一个数学常数，等于 2.71828182845...
对数（用 ln 标记）是指数的倒数。

由于 ln(a/b)=ln(a)-ln(b)，要计算 a/b，您需要：
计算 ln(a) 和 ln(b) [通过库函数、对数表或其他方法] 对
它们进行子结构: temp=ln(a)-lb(b)
计算指数 e^temp

# python - 使用 include 动态指向 HTML

> ID：12233971
> 
> 赞同：14
> 
> 时间：2012-09-02T06:44:04.897
> 
> 标签：python, html, jinja2

我想基于变量指向不同的 HTML 文件。我正在使用以下格式的包含：

```
{% include 'templates/case/{{cid}}/intro.html' %} 
```

这会引发错误：

```
TemplateNotFound: templates/case/{{cid}}/intro.html 
```

看着这个我知道 Jinja2 不会在运行时解析变量。`cid = ABC`（ABC 是路径中的文件夹名称）的值，所以我希望总路径为：

```
templates/case/ABC/intro.html 
```

如果我直接在包含中使用这个解析的路径，它就可以工作。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-02-26T10:03:07.773

至少在 Jinja2 2.7.1 这有效：

```
{% include 'templates/case/%s/intro.html' % cid %} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-05-08T13:28:08.757

Here's how to pass the code directly through include

```
{% include "templates/case/"+cid+"/intro.html" %} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-14T21:08:59.940

[在此处](https://stackoverflow.com/questions/6101864/dynamic-use-of-templates-in-jinja2?lq=1)的另一个 Stack Overflow 问题中找到了答案：

```
{% set path = 'templates/case/' + cid + '/intro.html' %}{% include path %} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-02T08:27:39.073

您始终可以在视图代码中计算完整路径并将其传递给模板，此时，删除变量周围的所有引号和花括号。

执行此操作时，请注意[路径遍历攻击](https://www.owasp.org/index.php/Path_Traversal)。

# printing - 需要能够打印我的调查中的所有页面 - 而不仅仅是最后一页

> ID：12233973
> 
> 赞同：1
> 
> 时间：2012-09-02T06:44:22.730
> 
> 标签：printing

我目前正在部署一个包含多个页面的调查，我嵌入了 javascript 打印按钮，但是当我点击它时，我只能得到最后两个分页符之间的内容。我需要我的客户能够打印整个文档而不是最后两页，我可以在 javascript 中添加一些内容以使其在所有分页符之间打印吗？

这是我正在使用的 javascript：

```
 <form> <input type="button" value="Print"  onClick="window.print()"></form> 
```

# objective-c - UITableView 与 NSFetchedResultsController reloadData 但不移动单元格

> ID：12233974
> 
> 赞同：1
> 
> 时间：2012-09-02T06:44:30.267
> 
> 标签：objective-c, uitableview, nsfetchedresultscontroller, nsnotificationcenter

我有一个带有 NSFetchedResultsController 支持的 UITableView。

当控制器离开屏幕时，我按照建议辞去获取的控制器代表的职务。因此我完全依赖上下文通知和 reloadData。

基本上，当在插入/更新/删除的对象中存在表的相关实体和属性时，我分析通知并设置标志需要重新加载=YES。在 viewWillAppear 我检查这个变量并调用 reloadData。

但是 NSFetchedResultsController 对 NSManagedObject 属性“pname”有一个排序顺序。

当在其他视图控制器中我将 pname 说从 0name 更新为 Zname 时，我可以拦截上下文确实更改通知，并且表在下一个 viewWillAppear 时正确重新加载。

问题是我希望单元格由于排序顺序而位于底部，但我想它仍然在顶部更新，因为 reloadData 只更新可见单元格。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T07:05:06.787

如果您将其委托设置为 ，则获取的结果控制器不再跟踪托管对象上下文中的更改`nil`。

因此，在重新分配委托后，您必须调用

```
[self.fetchedResultsController performFetch:&error] 
```

先后

```
[self.tableView reloadData]; 
```

# objective-c - 核心数据需要帮助

> ID：12233978
> 
> 赞同：-4
> 
> 时间：2012-09-02T06:46:58.300
> 
> 标签：objective-c, ios5, core-data, xcode4.3

如何在核心数据中添加 NSDictionary 任何文档或示例代码都会有所帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T09:35:39.333

在新项目窗口中，选择任何模板选项。在窗口的选项部分中，确保选中使用核心数据进行存储旁边的复选框，单击选择

在里面`AppDelegate.h`

```
@class coreDataViewController;

@interface coreDataAppDelegate : NSObject <UIApplicationDelegate> {

NSManagedObjectModel *managedObjectModel;
NSManagedObjectContext *managedObjectContext;
NSPersistentStoreCoordinator *persistentStoreCoordinator;

coreDataViewController *viewController;

UIWindow *window;
 }

@property (nonatomic, retain, readonly) NSManagedObjectModel *managedObjectModel;
@property (nonatomic, retain, readonly) NSManagedObjectContext *managedObjectContext;
@property (nonatomic, retain, readonly) NSPersistentStoreCoordinator    *persistentStoreCoordinator;
@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet coreDataViewController *viewController;
- (NSString *)applicationDocumentsDirectory;
@end 
```

在您的视图控制器：

> // 保存数据

```
- (void) saveData
{
    coreDataAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
    NSManagedObjectContext *context = [appDelegate managedObjectContext];
    NSManagedObject *newContact;
    newContact = [NSEntityDescription insertNewObjectForEntityForName:@"Contacts" inManagedObjectContext:context];
    [newContact setValue:@"anyData" forKey:@"anyKeyInDataBase"];
    [newContact setValue:@"anyData" forKey:@"anyKeyInDataBase"];
    [newContact setValue:@"anyData" forKey:@"anyKeyInDataBase"];
    NSError *error;
    [context save:&error];
 } 
```

> // 检索数据

```
 - (void) findContact
 {
    coreDataAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

    NSManagedObjectContext *context = [appDelegate managedObjectContext];

    NSEntityDescription *entityDesc = [NSEntityDescription entityForName:@"Contacts" inManagedObjectContext:context];

    NSFetchRequest *request = [[NSFetchRequest alloc] init];

    [request setEntity:entityDesc];

    NSPredicate *pred = [NSPredicate predicateWithFormat:@"(yourPrimaryKey = %@)", @"theKeyYouSearchFor"];

    [request setPredicate:pred];

    NSManagedObject *matches = nil;
    NSError *error;

    NSArray *objects = [context executeFetchRequest:request error:&error];

    if ([objects count] == 0) {
             NSLog( @"No matches");
    } else {
            matches = [objects objectAtIndex:0];
             NSLog( @"%@",[matches valueForKey:@"anyKey"]);
             NSLog( @"%@",[matches valueForKey:@"anyKey"]);
             NSLog( @"%@",[matches valueForKey:@"anyKey"]);

    }
    [request release];
} 
```

它可以正常工作

# c# - 以本地用户身份运行时搜索知名安全主体

> ID：12233979
> 
> 赞同：1
> 
> 时间：2012-09-02T06:47:16.753
> 
> 标签：c#, active-directory

--

我的问题与从以本地用户身份运行的 C# 程序中搜索知名安全主体有关。我似乎无法让它工作。

* * *

这是我的代码：

```
DirectoryEntry root = new DirectoryEntry("LDAP://cn=wellknown security principals,cn=configuration,dc=demoDomain,dc=loc", "domainUser", "HIDDEN");
DirectorySearcher searcher = new DirectorySearcher(root);

// Performing the search
SearchResultCollection results = searcher.FindAll(); 
```

IT 以域用户身份运行时工作正常，但以本地用户身份运行时（并使用用户 a domainUser 连接到域）我在尝试 FindAll() 时收到此 COM 异常：“指定的域不存在或无法联系”-2147023541 (8007054B)。

# jquery - jQuery 插件是否应该在文档中定义好？

> ID：12233982
> 
> 赞同：3
> 
> 时间：2012-09-02T06:49:58.947
> 
> 标签：jquery, jquery-plugins

我是 JavaScript 和 jQuery 的新手。在尝试使用我下载的几个 jQuery 插件失败后，我检查了 $.fn，发现在调用文档就绪处理程序时，添加到其中的任何内容都丢失了。它在诸如 onclick 之类的事件处理程序中也会失败。

```
<script type="text/javascript" src="~/Scripts/jquery-1.7.1.min.js"></script>
<script>
    jQuery.fn.myPlugin = function () { alert("success"); };

    //works fine - alerts with "success"
    $(document).myPlugin();

    $(function () {
        //Uncaught TypeError: Object [object Object] has no method 'myPlugin'
        $(document).myPlugin();
    });
</script> 
```

如果我在文档就绪处理程序中移动插件的定义，那么之后一切正常（包括事件处理程序）。这就是它应该做的吗？我在网上找到的一切都清楚地表明并非如此。我正在使用 Chrome 及其内置的开发人员工具。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T06:52:59.397

是的，你是对的。文档就绪回调在那里，以便您知道您的所有 DOM 元素和 jQuery 何时可以使用。实际代码不必在回调中，但您应该只在所有元素都准备好使用后才初始化插件。

例如，`on('click')`处理程序**必须**在文档就绪回调中，但它执行的函数不必是 -

```
$("#button").on('click',function(){
  btnClickHandler(); // this can be defined outside the ready callback.
}); 
```

所以你看，代码本身不需要用 ready 回调封装，但是执行插件的代码*应该*在那里，因为只有这样你才知道你的文档已经准备好被操作......

将代码放在文档就绪回调中总是一个好主意。您还可以在不同的文件中有多个文档就绪回调——一旦您的 DOM 准备好，每个回调都会被调用。如果有多个准备好的回调，您将它们写入页面的顺序将决定首先执行的内容。始终首先引用 jQuery，以便执行您的就绪回调。

*   [`.ready()`](http://api.jquery.com/ready/)

# extjs - Extjs4，如何从视图中调用控制器操作方法？

> ID：12233984
> 
> 赞同：0
> 
> 时间：2012-09-02T06:50:32.357
> 
> 标签：extjs, extjs4.1, extjs-mvc

单击网格中的单元格时，我想从视图中调用控制器中的方法。

```
{ header: "<img src='/Content/images/icons/page_white_acrobat.png'/>", width: 30, dataIndex: 'documents', sortable: true, renderer: this.hasDocument,
    listeners: {
        click: function () {
        //how to call method in controller?
        }
    }
}, 
```

有谁知道，请指教。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T06:58:42.890

在 Sencha 的项目官方论坛上，您将有很多[关于 extjs 4 的教程。](http://www.sencha.com/forum/showthread.php?220596-Sencha-ExtJS-4-Examples-ported-to-MVC)

当我提供一些有用的链接到良好的入门教程时......**带有特定[的](https://github.com/loiane/extjs4-mvc-basic-array-grid)关于网格管理的链接......**我认为人们可以在投票之前真正查看它。看看它，看看自己有一些更好的方法来做提问者想做的事情。

提供直接答案并不总是最好的学习方式。

无论如何......以下将解决问题：

```
var controller = this.getController(Ext.String.capitalize(config.controller));
/* where config was an argument of your callback method) */ 
```

我建议您尽可能将 View 与 Controller 以及 View 与 Model 解耦。如果您查看我链接的项目，您会发现在[Viewport.js](https://github.com/loiane/extjs4-mvc-basic-array-grid/blob/master/app/view/Viewport.js)中是一个很好的方法。它`.callParent(arguments)`在这些简短脚本的末尾使用方法调用调用控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T16:41:01.337

我相信最初的人已经找到了答案或者做了一些事情来解决这个问题。

但是对于可能有同样问题的人来说，这里有一个快速的例子来说明如何做：

不要将侦听器放入应用程序的 (MVC)-VIEW 中。给元素一个 ID（在本例中为网格）

在 (MVC) - CONTROLLER 添加这个函数：

```
init : function(app) {
    this.control({
        'myWindow': {
            afterrender : this.doAfterRender 
            /*SAMPLE*/
        },
        'myWindow #someGrid_ID' : {
            select: this.doSelect 
            /* THIS FUNCTION IS LOCATED in the Controller*/
        }
    });
},
doSelect : function() { 
    /*....*/ 
} 
```

现在控制器将监听事件并对其做出反应。

我希望这可以帮助一些可能与此相关的人。

看着 ：

*   [http://docs.sencha.com/extjs/4.1.0/#!/guide/application_architecture](http://docs.sencha.com/extjs/4.1.0/#!/guide/application_architecture)
*   [http://docs.sencha.com/extjs/4.1.0/#!/api/Ext.dom.Query](http://docs.sencha.com/extjs/4.1.0/#!/api/Ext.dom.Query)

Dom 查询 - 解释：

*   “myWindow #someGrid_ID” - dom 查询注意 # 它指的是元素的 ID。
*   “myWindow” - 指的是我的窗口的别名。
*   “someGrid_ID” - 指的是我的网格 ID。

（网格是“myWindow”的子元素）

希望这可以帮助

# clojure - 线程上的 Clojure 错误：java.lang.IllegalArgumentException：键必须是整数

> ID：12233992
> 
> 赞同：1
> 
> 时间：2012-09-02T06:52:01.510
> 
> 标签：clojure

我对两件事感到困惑。一，错误信息本身。第二，这段代码启动了这么多线程。我以为它会启动 2 或 3 个线程来响应单个请求，但是当我在 localhost 上运行它并将我的浏览器指向它（仅一次）时，它会启动 40 个线程。诚然，我使用的是 Chrome，它在后台发送 3 个请求，出于各种复杂的原因，谷歌将其辩护为“功能”（速度）。

这个错误是什么意思？

```
Exception in thread "Thread-39" java.lang.IllegalArgumentException: Key must be integer
at clojure.lang.APersistentVector.invoke(APersistentVector.java:250)
at serve_pages_from_memory.core$listen_and_respond$fn__51.invoke(core.clj:30)
at clojure.lang.AFn.run(AFn.java:24)
at java.lang.Thread.run(Thread.java:680) 
```

我看到以前在 StackOverflow 上讨论过类似的错误，但我看不出它们与我的问题有什么关系：

[clojure 按键过滤映射](https://stackoverflow.com/questions/7207495/clojure-filter-map-by-keys)

我正在尝试构建一个提供页面的简单应用程序。我这样做主要是为了测试我自己对 Clojure 的了解。这是大部分代码：

```
(defn start-thread [f]
(doto (new Thread f) (.start)))

(defn serve-page [wrt]
(let [content-length (count page-string)] 
(. wrt println "HTTP/1.1 200 OK")
(. wrt println "Content-Type: text/html; charset=UTF-8")
(. wrt println "Connection: Keep-Alive")
(. wrt println (str "Content-Length: " content-length))
(. wrt print "\r\n")
(. wrt print page-string)
(. wrt flush)
(. wrt close)))

(defn listen-and-respond [ss]
(let [client (. ss accept)]
(start-thread #([client]
                  (let [wrt (new PrintWriter (new BufferedWriter (new OutputStreamWriter (. client (getOutputStream)))))]        
                    (serve-page wrt))))))

(defn create-server [port]
(let [ss (new ServerSocket port)]
(start-thread #(when-not (. ss (isClosed))
                 (try (listen-and-respond ss)
                      (catch SocketException e))
                 (recur)))
ss)) 

(defn -main [& args]
(println "Server is starting")
(let [port (Integer/parseInt (first args))]
(create-server port))) 
```

该错误似乎在抱怨这一行：

```
 (serve-page wrt)))))) 
```

但那是一个函数名和一个 PrintWriter 对象。错误消息表明这是关于带有键的地图。该错误没有任何意义。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T06:57:56.667

```
#([client]
   (let [wrt (new PrintWriter (new BufferedWriter (new OutputStreamWriter (. client (getOutputStream)))))]        
     (serve-page wrt))) 
```

是胡说八道。如果您想要一个带有命名参数的 lambda，请使用以下`fn`形式：

```
(fn [client]
  (let [wrt (new PrintWriter (new BufferedWriter (new OutputStreamWriter (. client (getOutputStream)))))]        
    (serve-page wrt))) 
```

# java - 迭代器方法的实现

> ID：12233996
> 
> 赞同：1
> 
> 时间：2012-09-02T06:53:00.940
> 
> 标签：java, collections

我正在处理收藏品。困扰我的一件事是：java.util.Iterator 接口方法的实现在哪里？这些方法在哪个类中实现？

```
 public abstract boolean hasNext();
 public abstract E next();
 public abstract void remove(); 
```

我搜索了java API的源代码，但没有在任何类中找到这些方法的实现。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T06:58:02.173

Iterator 是一个接口，它在 java api 本身中有大约 50 个实现。由于迭代器需要与迭代对象类型相匹配，例如，如果你想迭代一个 ArrayList，你的 iterator() 方法返回的迭代器实例是新的 Itr 类型。请参阅 java.util.AbstractList 类中的实现，该类构成 ArrayList 的基类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T07:17:40.973

JDK中有多个类已经实现。ArrayList 是您关注的一个很好的例子。您可以浏览 openJDK 中的[代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/ArrayList.java)。`iterator`方法定义是-

```
 public Iterator<E> iterator() {
         return new Itr();
     } 
```

这个Itr私有类在哪里实现`Iterator<E>`并定义了所有的iterator方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T07:02:06.600

可以搜索实现Iterator的java api。这些类都实现了上述方法。去浏览jdk源码。这会对你有很大帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T07:06:36.393

如果您使用的是 eclipse 并且您在 eclipse 本身中配置了源代码。

只需选择方法并按 Ctrl + T（显示类型层次结构），您就可以看到所有已实现该方法的类。

# javascript - 在编写 javascript 时我应该使用 K&R 样式是真的吗？

> ID：12233999
> 
> 赞同：12
> 
> 时间：2012-09-02T06:54:05.323
> 
> 标签：javascript, jquery, styling, curly-brackets

直到最近我才意识到这一点，但我在编写 javascript 代码时使用了[Allman 风格。](http://en.wikipedia.org/wiki/Indent_style#Allman_style)

根据[http://encosia.com/in-javascript-curly-brace-placement-matters-an-example/](http://encosia.com/in-javascript-curly-brace-placement-matters-an-example/)我应该使用[K&R 风格](http://en.wikipedia.org/wiki/Indent_style#K.26R_style)。这是因为在某些情况下，将大括号放置在下一行会导致问题。对我来说，问题是我已经越来越喜欢 Allman 风格并且宁愿不改变。

所以，**我的问题**

*   由于javascript中大括号的放置，allman样式是否会导致错误？jquery怎么样？

*   有没有什么技巧可以让我使用 Allman 风格而不会因为大括号而出现问题？

*   使用这些样式是否还有其他问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-02T07:24:56.727

> 由于javascript中大括号的放置，allman样式是否会导致错误？

是的。正如您的链接所解释的，`return`后跟换行符的语句会使解析器在尝试插入分号时感到困惑。但是，此行为不限于返回对象字面量。以下功能：

```
function foo()
{
    return
        "bar";
} 
```

也会回来`undefined`。

> jquery怎么样？

无论是否包含 jQuery，情况都完全相同。

> 有没有什么技巧可以让我使用 Allman 风格而不会因为大括号而出现问题？

是的，不要将 Allman 样式与对象文字一起使用。考虑您要将对象文字分配给变量。你真的要写：

```
var foo =
{
    bar: "quux"
}; 
```

或者你会去：

```
var foo = {
    bar: "quux"
}; 
```

恕我直言，第二个片段比第一个片段更具可读性。您可以继续使用 Allman 样式，其中包含`for`、`if`、`while`、`function`等大括号，但对象字面量除外。

> 使用这些样式是否还有其他问题？

`return`是一个非常特殊的情况，因为它在有或没有参数的情况下都是有效的。当遇到`return`一行单独的语句时，解析器无法判断是应该添加分号以使单行语句有效，还是继续下一行并希望最好。

出于这个原因，我认为这种行为只会成为问题，`return`也许`throw`，而不是其他陈述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T08:25:03.720

请记住[有关自动分号插入的 ECMAScript 规范](http://ecma-international.org/ecma-262/5.1/#sec-7.9)：

> 某些 ECMAScript 语句（空语句、变量语句、表达式语句、`do-while`语句、`continue`语句、`break` 语句、**`return`语句**和`throw`语句）必须以分号结尾。这样的分号可能总是显式地出现在源文本中。*然而，为方便起见，在某些情况下，源文本中可能会省略此类分号*。这些情况是这样描述的，在这些情况下分号会自动插入到源代码令牌流中。

我嘲笑上面的建议是“方便”......

虽然您在技术上可以在上面未涵盖的情况下继续使用 Allman 格式，但我会宣扬一致性。就我个人而言，我是[Google JS 样式指南](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml)的粉丝- 与您的问题相关的部分是[代码格式](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml#Code_formatting)和[分号](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml#Semicolons)。那里列出的示例值得一试。