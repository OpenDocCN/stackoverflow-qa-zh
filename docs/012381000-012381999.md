# StackOverflow 问答 12381000-12381999

# c++ - 动态链接到 visa32.dll 导致崩溃

> ID：12381006
> 
> 赞同：4
> 
> 时间：2012-09-12T03:57:50.067
> 
> 标签：c++

我正在尝试使用 NI-VISA 5.1.1 通过 USB 与示波器通信。我的 32 位应用程序是使用 C++ 和 MinGW 编译器（标准 Qt 4.7 SDK）在 Qt 框架中编写的。

当我静态链接到 visa32.lib 时，我的应用程序与设备通信没有问题。我的动态链接代码在 Windows 7 64 位平台上也可以正常运行，但在运行 Windows XP SP3（32 位）的两台不同计算机上崩溃。我已经追踪了导致崩溃的代码行（这是对 viWrite 的第一次调用）。

该问题似乎与在 DLL 本身中设置全局变量有关。这可以解释为什么它在 Windows 7 中工作，因为在这种情况下，32 位 DLL 文件只是一个调用 64 位 VISA DLL 文件的存根。

这就是我动态链接到导出函数的方式：

```
typedef long (*tviRead)(ViSession, ViPBuf, ViUInt32, ViPUInt32);
typedef long (*tviWrite)(ViSession, ViBuf, ViUInt32, ViPUInt32);

QLibrary visa32("visa32");   // Qt wrapper for LoadLibrary
if (!visa32.load()) throw "Unable to load visa32.dll";
pviWrite = (tviWrite) visa32.resolve("viWrite");
pviRead = (tviRead) visa32.resolve("viRead"); 
```

如果我调用以下内容（其中`vi`前缀函数是静态链接的，而 pvi 是运行时链接的），

```
status = viOpenDefaultRM(&rm);
status = viFindRsrc(rm, query, &list, &itemCnt, desc);
status = viOpen(rm, desc, VI_NULL, VI_NULL, &vi);
status = pviWrite(vi, (ViByte*) idn, 5, &retCnt);       // Crash right here
status = pviRead(vi, (ViByte*) id, sizeof(id), &retCnt); 
```

一切正常。但是，将三个设置函数中的任何一个更改为运行时链接都会在调用 pviWrite 时导致分段错误。没有任何其他由 DLL 导出到“设置全局变量”的函数，事实上我看不到使用[Dependency Walker](http://en.wikipedia.org/wiki/Dependency_Walker)工具导出的 DllMain。有没有人成功链接到 visa32.dll 的运行时？我在互联网上找不到任何示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T09:53:15.297

我怀疑你有以下问题：

[http://msdn.microsoft.com/en-us/library/ms684179(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms684179(v=vs.85).aspx)

向下滚动到备注部分，查找“Visual C++”：如果 DLL 包含 _declspec 样式的线程本地存储，您只能在 Vista 或更高版本中动态加载它。

我正在尝试实现同样的目标，但显然，对于 XP，我们完全不走运......

# sql - oracle 游标值因条件而异

> ID：12381010
> 
> 赞同：2
> 
> 时间：2012-09-12T03:58:29.127
> 
> 标签：sql, oracle, stored-procedures, cursor, conditional

我想问一下是否可以在游标声明上分配一个变量。

```
CURSOR cur_name IS <variable_name> 
```

我想要完成的是，在游标中，select 语句的一些 where 子句和 from 子句根据另一个 select 的结果而有所不同。如下所示：

```
select count(*) from table_name
v_cnt
where cond1; 
```

如果 v_cnt 为 0，则光标为：

```
 cursor cur_name IS 
    select * from tab_name1
    where cond1; 
```

如果 v_cnt > 0，光标将是：

```
 cursor cur_name IS 
    select * from tab_name2
    where cond1
    and cond2; 
```

我想知道我是否可以做一个 if-else 然后 concat 将在光标上分配的选择。

```
 cursor cur_name IS 
    select * from tab_name
    if v_cnt > 0
    where cond2;
    else 
    where cond1; 
```

如果您需要更多详细信息，请告诉我。感谢任何反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T06:41:42.417

有很多方法可以做到这一点，并且涉及许多权衡。

Alexander Tokarev 的回答是最灵活的。但是动态 SQL 可能很棘手，在编译时不会出现依赖问题等。Balaji Sukumaran 的答案不太灵活，但更简单，并将代码分成更小的块。

如果选择的列始终相同，则可以使用如下方法：

```
cursor cur_name(v_cnt number) is
select *
from tab_name1
where 1=1 /*condition 1*/
    and v_cnt > 0
---------
union all
---------
select *
from tab_name2
where 2=2 /*condition 2*/
    and (v_cnt is null or v_cnt <= 0); 
```

它将所有内容放在一起，这可能比巴拉吉的答案更令人困惑。但有时最好将所有逻辑都放在一个 SQL 中。它可能有助于减少重复的逻辑。

（此外，您不必担心 Oracle 实际使用这两个查询，并且运行缓慢。它很聪明，知道有一个绑定变量控制使用哪个查询。这就是`FILTER`解释计划中的步骤所做的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T05:18:47.743

你在寻找这样的东西吗？

```
DECLARE
  V_CNT VARCHAR2(20);

  CURSOR C1
  IS
  SELECT * from Tab1;

  CURSOR C2
  IS
  SELECT * from Tab2;   

BEGIN
  SELECT COUNT(*) INTO V_CNT FROM Table_Name;
    IF V_CNT > 0 THEN
       OPEN C1;
         --code
        Close C1;
    ELSE
       OPEN C2;
          --code
       CLOSE C2;
    END IF;
 END; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T04:01:36.170

为什么不使用类似的东西

```
select  * 
from    tab_name 
WHERE   (v_cnt = 0  AND cond1)
OR      (v_cnt > 0  AND cond2) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T06:01:42.433

如果光标非常动态，请使用以下内容：

```
 declare
  c sys_refcursor;
  <here declare the record you would like fetch results to> 
 begin
  open c for 'you query in quotes as the string that you created before regarding your     conditions';
  loop
   FETCH c INTO your record;
   EXIT WHEN c%NOTFOUND;
  end loop;
 end; 
```

无论如何，看看[http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/sqloperations.htm#BABFEJED](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/sqloperations.htm#BABFEJED)。它以我的观点描述了你的情况。

# java - Eclipse Java 在评论中发现“无法解决”的错误？

> ID：12381014
> 
> 赞同：0
> 
> 时间：2012-09-12T03:59:14.417
> 
> 标签：java, eclipse

在以下代码中：

```
public void connect()
{
/*      
    String selectedPort = "COM1";
    String selectedPort = (String)window.cboxPorts.getSelectedItem();
    selectedPortIdentifier = (CommPortIdentifier)portMap.get(selectedPort);
*/ 
} 
```

Eclipse 抱怨 selectedPort 无法解析。为什么它甚至在评论里面看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T04:26:34.450

首先，您需要刷新项目。

第二，清理和重建。这一定会发生，因为没有为您的 java 文件生成新的类文件，并且 eclipse 仍在查看以前的编译形式。

# python - Django-tastypie：在 POST 中上传文件的任何示例？

> ID：12381016
> 
> 赞同：18
> 
> 时间：2012-09-12T03:59:19.017
> 
> 标签：python, django, tastypie

任何人都可以给出一个完整的例子来使用服务器端和客户端的tastepie FileField吗？

这是我尝试过的：

```
#models.py
class Foo(models.Model):
    img = models.ImageField(upload_to="images", null=True, blank=True)
    body = models.CharField()

#api.py
class FooResource(ModelResource):
    img = fields.FileField(attribute="image", null=True, blank=True)
    class Meta:
        queryset = Foo.objects.all() 
```

如果我尝试使用 curl 创建一个 foo 对象，例如，

```
>>> curl -F "body=test" -F "img=@local_img.png" http://localhost:8000/api/0.1/foo/ 
```

成功创建了一个 foo 对象，但该`img`字段为空。我可以在调试器中看到，当保存捆绑对象时确实有一个包含`InMemoryUploadedFile`对象的 img 字段，所以请求可能没问题。我在哪里做错了？代码片段是最受欢迎的，谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-12T07:42:50.890

您的资源应如下所示：

```
class FooResource(ModelResource):
    img = fields.FileField(attribute="img", null=True, blank=True)
    class Meta:
        queryset = Foo.objects.all() 
```

`attribute`应该对应于模型中的字段。如文档中所述：

> api 字段。**属性**
> 
> 一个字符串，命名由资源包装的对象的实例属性。

# android - android跨活动保存会话状态

> ID：12381020
> 
> 赞同：0
> 
> 时间：2012-09-12T03:59:31.970
> 
> 标签：android

跨多个活动维护会话信息的最佳方式是什么？问题[在 Android 上，在整个应用程序会话的活动死亡/重新启动之间保留数据的最佳实践是什么？](https://stackoverflow.com/questions/2033046/what-is-the-best-practices-on-android-to-keep-data-between-activities-deathes-re?rq=1)有一些想法，但并没有真正帮助我。

*我的应用程序有多个带有 manifest 标签的活动`singleTop`。它们本质上作为不同的选项卡工作——它们各自维护自己的一组片段和返回堆栈，因此将它们全部放入一个活动中会破坏用户的导航。

我目前将会话数据保存为由我的 Application 子类创建的静态单例。这在大多数情况下都可以正常工作，除非整个应用程序被操作系统杀死以节省内存（如上面的链接中所述），例如，当用户在低 RAM 的设备上接到电话时。该应用程序唯一通知它将被杀死（据我所知）是

`Activity.onSaveInstanceState(Bundle outState)`

**所以问题是这样的**：`onSaveInstanceState`最终将在**每个**活动上调用，而不仅仅是最顶层的活动（当用户最终返回我的应用程序时将出现的活动）。当每个非顶级活动恢复时，我可以使用它`Activity.onRestoreInstanceState(Bundle savedInstanceState)`来恢复我的单例会话，但非顶级活动将拥有数据的**旧**副本（它们可能在用户接到电话之前很久就被导航了）。

一种解决方案是仅在单例会话当前为空时才将数据恢复到单例会话，但这依赖于第一个接收 Activity.onRestoreInstanceState 的活动作为顶级活动。情况并非总是如此 - 如果用户接到电话，然后通过启动器图标返回应用程序，则 Main 活动将首先恢复并提前，**而不是**用户接到电话时所在的活动。

Application 类中的一个简单通知，即应用程序正在被操作系统（而不是用户）杀死，这正是我需要的 - 然后我会将会话保存到文件中，并在第一次调用时将其读回`Activity.onRestoreInstanceState`，但是 AFAIK 这个不存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T04:34:30.637

如果您有一些数据要在应用程序关闭时存储并在应用程序启动时重新加载，您可以有一种机制在应用程序关闭和启动时存储和检索它们。为此，要覆盖 Activity 生命周期中的 onStop() 和 onStart() 方法。

![在此处输入图像描述](../Images/50da06bd8182dd33bab135519652d7be.png)

而且我认为在这两种方法中存储和检索数据的最佳方式是[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T04:52:24.253

我只会坚持使用 Application 类来保存会话。使用 Application 类，您将能够在拥有 Context 的任何地方访问会话，因此您可能可以在整个应用程序中访问。应用程序类在您的应用程序关闭后也会保留该值，因此当您的应用程序重新启动时最好清除以前的会话。

由于 Application 类的主要用途是维护变量的全局状态，以便它们可以在整个应用程序中使用更新的值。

# c# - 学习在 .net 中处理音频的资源？

> ID：12381023
> 
> 赞同：0
> 
> 时间：2012-09-12T03:59:52.933
> 
> 标签：c#, .net, audio

我不完全确定我在寻找什么，所以我希望获得一些见解。我正在头脑风暴一个我想写的应用程序，但我从来没有处理过这种类型的项目。我想知道你们中是否有人知道任何资源，包括文献和库/API，它们可以引导我创建一个涉及音频播放、音频可视化（例如显示具有滚动位置的波形）的应用程序，设置播放点，可能是一些效果，如淡入淡出，甚至可能是节拍映射；全部在.net

例如，显示波形并具有随回放移动的位置指示器的应用程序。它允许您直观地设置多个起点和终点等。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T05:04:22.297

查看[http://naudio.codeplex.com/](http://naudio.codeplex.com/)

# javascript - javascript - 打印一个pdf文件

> ID：12381026
> 
> 赞同：1
> 
> 时间：2012-09-12T04:00:26.967
> 
> 标签：javascript, pdf

我的服务器上存储了 pdf 文件。

我希望用户能够单击链接/按钮并弹出打印对话框，以便他们可以打印 pdf。我试图说服他们点击下载没什么大不了的，然后从它打开的浏览器选项卡中打印出来，但他们是善变的。:)

我尝试了一些 javascript 解决方案，主要是我最终得到的是：

```
contentWindow is not defined 
```

我的js片段如下

```
 a = $("a:contains('Download PDF')")
  url = a.attr('href')
  uid = unique_id()
  uid = "abc_" + uid
  ifrm = $("<iframe width='500px' src='" + url + "' id='" + uid + "' name='" + uid + "'  onload='this.contentWindow.print()'></iframe>")
  $('body').append(ifrm) 
```

我也试过

```
 ...
  ifrm = $("<iframe width='500px' src='" + url + "' id='" + uid + "' name='" + uid + "' ></iframe>")
  $('body').append(ifrm)
  pdf = document.findElementById(uid)
  pdf.contentWindow.print(); 
```

以及其他一些具有相同结果的变体。或者我得到一个“关于：空白”的打印，大概是因为在文档加载到 iframe 之前调用了打印。

pdf 在 iframe 中打开并呈现。

有任何想法吗

# html - 如何使用可选的额外元素和相邻匹配列实现垂直居中，在纯 CSS 中，没有表格？

> ID：12381029
> 
> 赞同：1
> 
> 时间：2012-09-12T04:00:43.380
> 
> 标签：html, css, vertical-alignment, multiple-columns

我在布局具有非常严格的布局要求的电子商务页面时遇到了问题。我们希望在产品描述旁边显示产品图片，并在图片下方显示一些关于产品的可选额外信息。宽度受我们整个页面布局的限制，而高度可以是可变的。答案似乎是“你不能用纯 CSS 做到这一点”。

这是一个模拟： ![设计模型](../Images/0ad6affc4b4e7c1b0225984f4125073d.png)

标记的宽度为 372+12+178=562，边框留出 8px。图片和描述区域有2px的边框，总共有8px的水平像素，562+8=570。

我已经对图像的垂直居中进行了大部分排序，破坏设计的是可选的“额外信息”面板。该站点是由 PHP 生成的，`<div>`如果数据可用于产品，PHP 可以选择性地包含该额外信息。如果它有助于解决设计问题，我很乐意始终包含“额外信息”元素并将其设置为不可见，如果它为空的话。

要求：

*   产品图像可以是任何纵横比。有的又瘦又高，有的又宽又短，有的方形。
*   产品图像应水平填充其区域，并按其纵横比自然垂直调整大小。
*   产品图像应在其区域（蓝色）中垂直居中。当额外信息不可见时，图像将在描述区域旁边垂直居中。当额外信息可见时，图像应在剩余空间中垂直居中。
*   额外信息可以是任意数量的文本，并与产品图像区域的底部对齐。所以，不能有固定的高度。
*   产品描述可以是任意数量的文本。
*   “图像和额外信息”列应垂直匹配“描述”列的大小，反之亦然。
*   描述和额外信息框使用 CSS 渐变背景和边框。所有这些 div 都必须相应地调整自己的大小，我无法摆脱这里描述的“人造列” [http://www.alistapart.com/articles/fauxcolumns/](http://www.alistapart.com/articles/fauxcolumns/)。
*   不想使用 Javascript 来对齐元素。是的，我确信我们都是 jQuery 大师，它是一个很棒的工具，但这种布局不应该是必需的。

到目前为止，我的设计使用纯 CSS 并且没有表格，使用表格单元格样式来居中图像，但是当使用不同大小的图像时，最小高度会中断。一个jsfiddle：http: [//jsfiddle.net/GJVbX/](http://jsfiddle.net/GJVbX/)

通过将产品描述文本内容增加三倍或添加“宽度：370 像素；高度：400 像素；”很容易破坏该小提琴。所以它不是一个很好的高度。

我设计的一个很好的例子：

![现场运行良好的屏幕截图](../Images/06f3825a89da23e2b9bd65d23123c8f1.png)

但是，不难找到破坏它的图像大小：

![现场破解截图](../Images/dab731853e1ebb747e017a43faed20f9.png)

请注意高大的产品图像如何使图像 div 垂直扩展并且描述列无法跟上。

我一直在 Freenode 上的#css IRC 频道上，并被告知使用纯 CSS 可以实现这一点，使用表格来完成此布局任务表明我不了解 CSS 布局，应该聘请专业人士，以实现垂直居中我应该使用“显示：表格单元格”。然而，尽管他们非常有帮助，但讨论过于复杂，无法在 IRC 上继续。我知道这`<table>`会带来各种可怕的布局机制，这些机制只是为了准确的页面布局而被破坏，但是，我想不出更好的解决方案，主要是因为我要求保持列的高度相同。

希望有建设性的批评，替代解决方案，甚至只是确认我的困境:)

**编辑**- 这是上面给出的 jsfiddle 中的 HTML 和 CSS 内容，适合那些喜欢包含在 stackoverflow 问题中的内容的人。这是从实时站点中提取的，稍微清理一下缩进，带有虚拟产品图像（由实时站点中使用的缩略图脚本生成）和虚拟文本。

HTML：

```
<div class="productInfo">
  <div class="productTopWrapper">
    <div class="productImgWrapper"><div class="wraptocenter"><span></span><img src="http://nickfenwick.com/hood.jpg"></div></div><div class="extraInfoWrapper gradientBackground"><div class="extraInfoInner">Extra info goes here.</div>
      </div>
      <div class="productDescription gradientBackground"><div class="productDescriptionInner">
          Product Description goes here.<br/>
          Product Description goes here.<br/>
          Product Description goes here.<br/>
          Product Description goes here.<br/>
          Product Description goes here.<br/>
          Yet the gradient ends too soon because this div doesn't fill its space vertically!
          </div>
      </div>
    </div>
</div> 
```

CSS：

```
DIV.productInfo {
    max-width: 570px;
    font-family: Verdana,Geneva,'DejaVu Sans',sans-serif;
    font-size: 12px; /* Just for this fiddle */
}
.productInfo .productTopWrapper {
    overflow: hidden;
    margin-bottom: 12px;
    position: relative;
}
.productInfo .productImgWrapper {
    width: 372px;
    min-height: 353px;
    float: left;
    border: 2px solid #cbcbcb;
    text-align: center;
}

/* BEGIN css wrap from http://www.brunildo.org/test/img_center.html */
.wraptocenter {
    display: table-cell;
    text-align: center;
    vertical-align: middle;
    width: 372px;
    height: 309px;
}
.wraptocenter * {
    vertical-align: middle;
}
/*\*//*/
.wraptocenter {
    display: block;
}
.wraptocenter span {
    display: inline-block;
    height: 100%;
    width: 1px;
}
/**/
*:first-child+html {} * html .wraptocenter span {
    display: inline-block;
    height: 100%;
}

/* END css wrap */

.productInfo .extraInfoWrapper {
    position: absolute;
    left: 0;
    bottom: 0;
    width: 376px;
}
.productInfo .extraInfoInner {
    padding: 5px;
    border: 2px solid #cbcbcb;
    text-align: center;
}

.productInfo .gradientBackground {
    background: #999; /* for non-css3 browsers */

    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#d0d1d3', endColorstr='#fefefe'); /* for IE */
    background: -webkit-gradient(linear, left top, left bottom, from(#d0d1d3), to(#fefefe)); /* for webkit browsers */
    background: -moz-linear-gradient(top, #d0d1d3,  #fefefe); /* for firefox 3.6+ */
    background: -ms-repeating-linear-gradient(top, #d0d1d3,  #fefefe);
    background: repeating-linear-gradient(top, #d0d1d3,  #fefefe);
}.productInfo .productDescription {
    width: 178px;
    min-height: 353px;
    margin-left: 388px;

    border: 2px solid #cbcbcb;
}
.productInfo .productDescriptionInner {
    padding: 5px;
    font-size: 1.2em;
    line-height: 1.2em;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T00:01:39.897

您可以使用带负边距的高高度来执行此操作。（您的高度减去您的 div 的最小高度，在这种情况下为 353px）唯一的问题是边框底部将消失在父级的溢出中（应该保持隐藏）。不确定边界对您有多重要，或者即使那是您正在寻找的东西，但也许它可能会为您指明正确的方向？

```
.productInfo .productDescription {
    width: 178px;
    min-height: 353px;
    margin-left: 388px;
    border: 2px solid #cbcbcb;
    height: 1000px;
    margin-bottom: -647px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T02:26:32.330

不幸的是，您需要支持哪些版本的 IE 不仅仅影响 CSS3。`display: table-cell`，例如，在 IE7 中不可用。其他浏览器中存在的无数其他东西在 IE7 和 IE8 中丢失或存在错误。然而，IE9 是一个相当大的改进。

老实说，即使您将自己限制在所有浏览器的最新版本中，这种布局在纯 CSS 中仍然很困难，无论 IRC 上的人可能会说什么。当新的布局管理器（如灵活框和网格布局）无处不在时，这将很容易，但恐怕我们还需要几年的时间。

无论如何，这是我对您所需布局的尝试：

[http://jsfiddle.net/amtiskaw/tNywn/](http://jsfiddle.net/amtiskaw/tNywn/)

它需要 IE8 及更高版本，因为它用于`display: table-cell`垂直居中产品图像。它还有一个怪癖，即额外信息框的内容永远不会与产品信息框的内容垂直重叠，尽管它们的边框看起来是正确的。

拉伸的边框和渐变是通过使用附加元素来实现的，这些元素的大小使用绝对定位垂直填充产品容器元素，然后使用负 z-index 放置在内容后面。

就个人而言，在这种情况下，我更倾向于使用表格或一些 jQuery 来获得正确的大小，而不是这种 CSS hackery。如果您使用表格，您可以给它一个属性`role="presentation"`，以向屏幕阅读器和其他语义工具指示它正在用于布局目的，而不是表达表格数据。[这种模式得到了 W3C 的认可](http://lists.w3.org/Archives/Public/public-html/2011Mar/0245.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T07:31:43.590

我记得前段时间遇到过这个问题，最后求助于 JS 来解决它。不幸的是，您的限制使得很难用纯 CSS 提出一个工作示例。我看到的问题是，一旦图像大小增加，包含的 div 不再具有特定的宽度或高度，并且仅使用 CSS 就无法进行将描述 div 扩展到正确高度所需的计算。如果大小发生变化的元素不是直接父元素，浏览器不会自动执行此操作，从而将父元素的子元素留在高度/宽度更改前的高度。

是的，表格将解决固定行高的问题，但正如你所说，它们的价格是我尽量避免的。

我假设您已经考虑使用 JS / Jquery 来解决这个问题。

jQuery 示例

```
$(function()
{
    var height = $('.productImgWrapper').innerHeight();

    $('.productDescription').css('height', height);
}); 
```

请注意，这`.innerHeight()`包括填充，但不包括边框或边距。包括边框使用`.outerHeight()`。

我知道这并不理想，但我看不出有任何其他方法可以解决您的问题。也许有比我更强大的 CSS 能力的人想出一个解决方案。

# c# - 如何从 byte[] 文件中读取所有文本？

> ID：12381034
> 
> 赞同：16
> 
> 时间：2012-09-12T04:01:16.667
> 
> 标签：c#, bytearray

我有一个字节 [] 形式的文本文件。

我无法将文件保存在任何地方。

我想从这个“文件”中读取所有行/文本。

谁能指出我如何从 C# 中的 byte[] 读取所有文本的正确方向？

谢谢！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-12T04:06:57.233

我会创建一个`MemoryStream`并用它实例化一个`StreamReader`，即：

```
var stream = new StreamReader(new MemoryStream(byteArray)); 
```

然后一次获取一行文本：

```
stream.readLine(); 
```

或使用完整文件：

```
stream.readToEnd(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-08-10T12:01:40.390

另一种可能的解决方案是`Encoding`：

```
Encoding.Default.GetString(byteArray); 
```

可以选择拆分以获取行：

```
Encoding.Default.GetString(byteArray).Split('\n'); 
```

您还可以选择特定的编码，例如 UTF-8，而不是使用`Default`.

# iis - 在 Windows 7 中找不到 IIS 本地主机页面

> ID：12381036
> 
> 赞同：6
> 
> 时间：2012-09-12T04:01:25.273
> 
> 标签：iis, windows-7-x64

我有 Windows 7 64 位终极操作系统。我需要在我的笔记本电脑上安装 IIS。从打开/关闭 Windows 功能中，我通过选中 IIS 管理控制台前面的复选框来启用 IIS。但它没有成功，然后我通过选中 Web 管理工具下的所有复选框重新启用它。这次成功了，如果我现在输入 inetmgr，我可以找到窗口。但问题是当我在浏览器地址栏页面上键入 localhost 时没有出现（404 页面未找到。）

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T03:41:21.517

我解决了这个问题。问题是默认网站没有运行，因为另一个应用程序使用了端口 80。然后我更改了端口并重新启动了网站。现在它工作正常。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-03T12:36:24.000

1.  关闭所有应用程序，如 Skype、DropBox、GoogleDisk、TeamViewer 等。
2.  输入`iisreset`Windows 控制台并按 Enter
3.  重新启动所有应用程序，如 Skype、DropBox、GoogleDisk、TeamViewer 等。

Whis方式总是为我工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-18T11:39:24.147

在我的系统中，问题不在于端口。当我安装 Apache 时，一些 iis 服务已被卸载。所以我从功能中删除了 IIS 并再次添加，然后它工作正常。

# android - 应用程序在 getInputStream 崩溃

> ID：12381038
> 
> 赞同：0
> 
> 时间：2012-09-12T04:02:15.937
> 
> 标签：android, crash, connection

不知道如何处理。应用程序在 getInputStream() 调用时崩溃。日志消息出现直到

```
 HttpURLConnection conn = null;
        try {

            URL url = new URL(params[0]);   
            Log.d(params[0],"URL"); 

            Authenticator.setDefault (new Authenticator() {
                protected PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication ("username", "password".toCharArray());
                }
            });
            conn = (HttpURLConnection) url.openConnection();
            Log.d("Afer conn", "Connection");   

            conn.setRequestMethod("GET");
            Log.d("Afer conn", "Step1");
            conn.setConnectTimeout(5000);
            Log.d("Afer conn", "Step2");

            //conn.connect();
            return conn.getInputStream().toString();

         } catch (MalformedURLException e) {
              Log.d(e.getMessage(), "Error1");
              return e.getMessage();
          } catch (ProtocolException e) {
              Log.d(e.getMessage(), "Error2");
              return e.getMessage();
          } catch (IOException e) { //It comes here
          Log.d(e.getMessage(), conn.getErrorStream().toString());
              conn.getErrorStream().toString();
              return e.getMessage();
          } catch ( Exception e ) {
              Log.d(e.getMessage(), "Error4");
              return e.getMessage();
          } 
```

出现在 IOException 块的消息是这样的： `Received authentication challenge is null`。

但是用户名和密码是正确的。

# sql - 如何创建视图以过滤掉某些结果并将其分组到 Oracle Reports 中？

> ID：12381041
> 
> 赞同：1
> 
> 时间：2012-09-12T04:02:22.787
> 
> 标签：sql, oracle, parameters, oraclereports

我实际上正在处理 Oracle 报告。我遇到的一种情况是为报告创建一个参数，即费用类型。我有一个名为 type_of_fees 的表，其中一列名为`type_of_fees`

我有几条记录，例如：

*   月租 1
*   月租 2
*   月租 3
*   1个月存款
*   2个月押金
*   冷气收费
*   效用
*   提前 1 个月 - 每周租金

对于参数，我想从下拉列表中选择一个值列表：

1.  月租
2.  存款
3.  空调
4.  实用程序
5.  其他

所以我想当用户选择月租时，它会显示我在表中得到的月租类型_onthly rent 1，monthly rent 2，monthly rent 3。

我还想在选中时将其他记录（例如 1 个月预付款和每周租金）放在“其他”下。现在，如果我没记错的话，我将不得不创建一个视图以使事情变得更容易

我会想象需要像 SELECTION_TYPE 和 TYPE_OF_FEES 这样的列。

我将如何插入自定义记录，例如 SELECTION TYPE 将显示适当类型的费用？

预期视图示例：

```
----------------------------------
selection_type | type_of_fees    |
----------------------------------
Monthly Rental  | monthly rental 1
----------------------------------
Monthly Rental  | monthly rental 2
----------------------------------
Monthly Rental  | monthly rental 3
----------------------------------
Deposits        | 1 month deposit
----------------------------------
Deposits        | 2 months deposit
----------------------------------
Airconditioning | Aircond charges
----------------------------------
Utilities       | Utility
----------------------------------
Others          | 1 month advance
----------------------------------
Others          | weekly rental
---------------------------------- 
```

我如何创建这个？特别是为`selection_type`列创建数据的部分。我对创建视图不是很熟悉。

查询出我打算使用的数据没有问题，但我只需要创建视图，以便我可以使用 selection_type 更轻松地查询出事情：

```
SELECT DISTINCT TYPE_OF_FEES FROM TYPE_OF_FEES
WHERE TYPE_OF_FEES LIKE '%deposit%' 
```

顺便说一句，我在 Oracle 上。请如果有人可以解释和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:59:24.320

我假设您指的是与 Oracle Forms 捆绑在一起的 Oracle Reportwriter / Reportbuilder 产品？

Oracle Reports 您必须从基础开始。创建报表以选择所有数据，而不考虑 selection_type。这将使您能够专注于查询的结构和报告的结构。正确获取报告的结构并将其用作报告向导为您生成报告的基础非常重要。然后，您相应地自定义生成的报告。

确定结构后 - 创建参数表单并将参数添加到查询中。

您可能希望创建两个 LOV 参数字段，第一个是 selection_type，第二个是 type_of_fees。后者取决于在第一个中输入的值。

[Oracle 报表参数表单文档](http://docs.oracle.com/cd/E17904_01/bi.1111/b32122/orbr_howto011.htm#i1069054)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T01:41:11.130

我将回答我自己的问题，因为我找到了一种方法，可以`selection_type`为每个`type_of_fees`我可以使用的 CASE WHEN 创建一个具有特定内容的视图。

使用它，我可以使用新列构建我想要的视图。

# eclipse - 如何安装 Eclipse EPP（例如 3.8 上的 EPP 建模功能）？

> ID：12381044
> 
> 赞同：2
> 
> 时间：2012-09-12T04:02:58.523
> 
> 标签：eclipse, eclipse-plugin, eclipse-emf, eclipse-juno, eclipse-emf-ecore

如何通过 3.8 的软件安装程序安装 Eclipse EPP？我想选择“EPP 建模功能”并安装它的所有包，而不是单独选择它们。

例如，如果我安装 Eclipse Juno “Eclipse Modeling Tools”，然后查看已安装的软件包，我将看到“EPP Modeling Feature 1.5.0.20120620-0855 org.eclipse.epp.package.modeling.feature.group。

如果我还安装了基本的 Eclipse 3.8 并选择“安装新软件”并关闭“按类别分组”，我可以找到 EPP。但是，我无法安装它们，因为它们是根据 4.2 编写的（即使它们的所有软件包也可以在 3.8 上正常运行）。

仅供参考，[Eclipse 3.8：下载站点在哪里？](https://stackoverflow.com/questions/11322349/eclipse-3-8-where-is-the-download-site)提供了有关 Juno 与 3.8 的一些背景，但没有具体回答安装 3.8 基础后如何获取 EPP 的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:50:06.800

取4.2。它在内部模拟 3.8。并且所有插件都可以通过 Juno 更新站点的 General Purpose Tools->MarketPlace Client 安装。

# javascript - Host Typekit JS Locally

> ID：12381045
> 
> 赞同：10
> 
> 时间：2012-09-12T04:03:03.767
> 
> 标签：javascript, typekit

Typekit requires us to include their JS file to render the fonts, e.g.:

```
<script type="text/javascript" src="https://use.typekit.com/random-name.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script> 
```

I have noticed there has been a few instances where their server is slow to response, which caused the page to halt. Unfortunately, some people have had similar experience.

I tried to host the JS file locally and it seemed to work.

```
<script type="text/javascript" src="http://use.typekit.com/random-name.js"></script>
<script type="text/javascript">window.Typekit || document.write('<script type="text/javascript" src="/scripts/js/ext/random-name.js">\x3C/script>')</script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script> 
```

My questions:

1.  Any differences when rendering the fonts from a local JS?
2.  Will the [HTTP referrer](http://blog.typekit.com/2009/07/21/serving-and-protecting-fonts-on-the-web/) be the same between using a remote JS and a local one?

Thank you.

Related:

*   [Loading script asynchronously](https://stackoverflow.com/q/10797262/583539)
*   [Stop Typekit Fonts From Slowing Down Your Site](http://www.webmonkey.com/2011/05/stop-typekit-fonts-from-slowing-down-your-site/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-12T21:05:44.687

This is Ben from Typekit Support.

We can't guarantee that fonts will continue to work as expected if the files are hosted locally and for this reason, we don't recommend hosting the JavaScript file yourself.

To solve any slow response time issues, we recommend loading Typekit asynchronously. You can learn more about this here: [http://help.typekit.com/customer/portal/articles/649336-embed-code](http://help.typekit.com/customer/portal/articles/649336-embed-code)

This code won't block rendering while the Typekit JS is loading, allowing the rest of the page to render immediately.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-17T16:47:16.190

For this, and to eliminate flashes of unstyled text, I implemented a simple script that caches Typekits in localStorage: [https://github.com/morris/typekit-cache](https://github.com/morris/typekit-cache) - maybe this helps future typekit users running into the same problems.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T04:10:18.323

1.  No. Just try to keep JS file up to date
2.  Yes. Request is still made by user browser from your domain name.

# c# - 将从方法返回的对象转换为子类

> ID：12381050
> 
> 赞同：5
> 
> 时间：2012-09-12T04:03:31.393
> 
> 标签：c#, methods, return-value, subclass

我有一个返回类型对象的方法`Bucket`：

```
Bucket Dispense(string typeName); 
```

我有一个名为`Widget`subclasses的类`Bucket`：

```
public class Widget : Bucket {  } 
```

我想做这个：

```
Widget w = Controller.Dispense('widget'); 
```

鉴于 a`Widget`是 a ，我认为这应该是可能的`Bucket`。我可以将返回类型`Dispense(string)`转换为 type `Widget`，但我更愿意在没有转换的情况下这样做。有没有一种别名`Bucket`和`Widget`类型的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T04:31:24.997

您可以使用泛型获得一些您正在寻找的东西：

```
public class BucketDispenser
{
    public TBucket Dispense<TBucket>(string typeName) where TBucket : Bucket
    {
        Bucket widget= new Widget();
        // or
        Bucket widget = new OtherWidget();

        return (TBucket)(object)widget;
    }
} 
```

然后你可以按如下方式使用它：

```
public class MyClass
{
    public MyClass()
    {
        var disp = new BucketDispenser();
        Widget widget = disp.Dispense<Widget>("widget");
        OtherWidget otherWidget = disp.Dispense<OtherWidget>("otherWidget");
    }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T04:41:54.737

另一个简单的选项是您可以使用[动态](http://msdn.microsoft.com/en-us/library/dd264741.aspx)来避免强制转换，它将绕过编译时类型检查：

```
dynamic w = Controller.Dispense('widget'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T04:07:28.433

您可以使用[隐式转换运算符](http://msdn.microsoft.com/en-us/library/85w54y0a.aspx)。这在`Bucket`类中定义如下：

```
public static implicit operator Widget(Bucket bucket)
{
    // return the typecast Widget (can also perform any conversion logic here if necessary)
    return (Widget)bucket;
} 
```

现在您可以按原样“隐式”执行演员表：

```
Bucket b = new Bucket();
Widget w = b; 
```

**请注意**根据 pst 的评论以及 MSDN 链接谨慎使用：

> 转换运算符可以是显式的或隐式的。隐式转换运算符更易于使用，但当您希望运算符的用户知道正在发生转换时，显式运算符很有用。

# batch-file - 用于创建增量子文件夹的批处理代码

> ID：12381051
> 
> 赞同：0
> 
> 时间：2012-09-12T04:03:37.820
> 
> 标签：batch-file

我是批处理脚本的新手，我正在尝试编写一个脚本来创建一个文件夹，其中包含增加了`15`.

到目前为止我的代码：

```
echo off
echo Testing to create a file to a directory and incremental sub folders

cd C:\Batch test
set folder=%date:~10,4%%date:~7,2%%date:~4,2%
mkdir %folder%
cd C:\Batch test\%folder%
set fol=%9810%
md "%fol%"
pause 
```

上面的代码创建了一个带有今天日期的文件夹并创建了一个名为的子文件夹`810`，我想创建更多的子文件夹，增量为`15`例如。`825`, `840`, `855`, ...

任何帮助将不胜感激。

问候

迪利普

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T04:47:40.393

您可以使用循环来执行此操作，如下所示

```
 FOR /L %%I in (810, 15, 900) do (
    md %%I
 ) 
```

细节[`FOR /?`](http://ss64.com/nt/for.html)

# hadoop - hive/hbase 集成上的 MR 划痕错误

> ID：12381052
> 
> 赞同：0
> 
> 时间：2012-09-12T04:03:41.963
> 
> 标签：hadoop, integration, hbase, hive, hdfs

我在 2-node-hadoop 上运行 hive 和 hbase。我正在使用 hadoop-0.20.205.0、hive-0.9.0、hbase-0.92.0 和 zookeeper-3.4.2。

hive 和 hbase 分别工作正常。然后我按照这个手册集成了hive和hbase。 [https://cwiki.apache.org/confluence/display/Hive/HBaseIntegration](https://cwiki.apache.org/confluence/display/Hive/HBaseIntegration)

hive 启动时没有错误，我创建了示例表

```
CREATE TABLE hbase_table_1(key int, value string) 
STORED BY 'org.apache.hadoop.hive.hbase.HBaseStorageHandler'
WITH SERDEPROPERTIES ("hbase.columns.mapping" = ":key,cf1:val")
TBLPROPERTIES ("hbase.table.name" = "xyz"); 
```

`show tables`在 hive 和`list`或`scan`在 hbase 中运行良好。但是当我`select * from hbase_table_1;`在蜂巢中时，我得到了错误

```
2012-09-12 11:25:56,975 ERROR ql.Driver (SessionState.java:printError(400)) - FAILED: Hive Internal Error: java.lang.RuntimeException(Error while making MR scratch directory - check filesystem config (null))
java.lang.RuntimeException: Error while making MR scratch directory - check filesystem config (null)
...
Caused by: java.lang.IllegalArgumentException: Wrong FS: hdfs://10.10.10.15:54310/tmp/hive-hadoop/hive_2012-09-12_11-25-56_602_1946700606338541381, expected: hdfs://hadoop01:54310 
```

它说fs是错误的，但我认为将fs配置到这样的路径是不对的，我应该在哪里配置它？

这是我的配置文件。hadoop01的ip地址是10.10.10.15。

hbase-site.xml

```
<configuration>
<property>
    <name>hbase.zookeeper.property.clientPort</name>
    <value>2222</value>
</property>

<property>
    <name>hbase.zookeeper.quorum</name>
    <value>10.10.10.15</value>
    <description>The directory shared by RegionServers.
    </description>
</property>
<property>
    <name>hbase.zookeeper.property.dataDir</name>
    <value>/home/hadoop/datas/zookeeper</value>
    <description>Property from ZooKeeper's config zoo.cfg.
      The directory where the snapshot is stored.
    </description>
</property>

<property>
    <name>hbase.rootdir</name>
    <value>hdfs://hadoop01:54310/hbase</value>
    <description>The directory shared by RegionServers.
    </description>
</property>
<property>
     <name>hbase.cluster.distributed</name>
     <value>true</value>
     <description>The mode the cluster will be in. Possible values are
       false: standalone and pseudo-distributed setups with managed Zookeeper
       true: fully-distributed with unmanaged Zookeeper Quorum (see hbase-env.sh)
     </description>
</property> 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:37:52.513

我自己解决了。

修改 $HADOOP_HOME/conf/core-site.xml，将`dfs.default.name`ip 改为 hostname。像这样

```
<property>
    <name>fs.default.name</name>
    <value>hdfs://hadoop01:54310/</value>   
</property> 
```

确保此属性和`hbase.rootdir`hbase-site.xml 中的属性使用相同的主机名或 ip。

# ios - 发送到已释放实例的消息

> ID：12381064
> 
> 赞同：1
> 
> 时间：2012-09-12T04:04:58.917
> 
> 标签：ios, object, memory-management, crash

我知道有很多线程在讨论这个问题并相信我，我查看了每一个线程，但没有一个能解决我的问题。

无论如何，在我的应用程序中，我收到一条发送给已释放实例崩溃的消息。对象地址遵循该消息，我尝试使用工具但没有成功。

我想做的是如何使用最新的 Xcode (4.4.1) 正确调试和修复这个问题。我想知道的是**应用程序在哪一行崩溃了**。这样，我可以只专注于那个对象，这样我就可以确保它被分配了。

有谁知道我如何使用最新的 Xcode 做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T04:10:53.263

启用僵尸。它应该告诉您何时您的代码尝试将消息发送到已释放的对象实例。问题是您在释放对象后使用它。它可能是自动释放的对象或您明确释放并在之后使用的对象等。下图是您执行“编辑方案”时 XCode 的屏幕截图

![在此处输入图像描述](../Images/bf921d8d7d052b4c0e8a1008445f63ae.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T07:29:30.877

设置异常断点有时有助于将导致问题的代码的特定行归零。此[Apple 文档](http://developer.apple.com/library/mac/ipad/#recipes/xcode_help-breakpoint_navigator/articles/adding_an_exception_breakpoint.html)向您展示了如何操作。

# c# - 如何在 Ektron 中选择属于某个分类的库项目

> ID：12381065
> 
> 赞同：4
> 
> 时间：2012-09-12T04:05:12.003
> 
> 标签：c#, asp.net, ektron

我正在使用 Ektron CMS 版本 8.5 SP2。

我在分类中有一些项目。有些是实际页面，有些是库项目（Word 文件和 PDF 等文档）。

假设我的分类中有 3 页和 2 个库项目，总共 5 个项目。

我使用以下代码...

```
ContentManager cManager = new Ektron.Cms.Framework.Content.ContentManager();
Ektron.Cms.Content.ContentTaxonomyCriteria ctCriteria = new    Ektron.Cms.Content.ContentTaxonomyCriteria();
ctCriteria.AddFilter(1707, true); // hard coded taxonomy ID
List<ContentData> list = cManager.GetList(ctCriteria);
Label1.Text = list.Count.ToString(); 
```

当此代码运行时，列表中的项目数为 3。如果我输出实际列表，我可以看到它只是分类中的页面，而不是 2 个库项目。

似乎 ContentManager.getList() 函数没有获取库项目，即使这些项目已添加到分类中也是如此。我可以确认在管理工作区中，库项目在分类中可见。

为了澄清起见，这是*检索*已添加到分类中的项目的问题。

有谁知道我如何检索分类中*所有*项目的列表，包括那里的任何图书馆项目。

注意：如果我将文件添加到文档管理系统而不是库中，它会完美运行。但是在实时系统中，我在图书馆中有数百个项目，我希望有一种方法可以通过分类法查看它们，而无需将它们全部移入 DMS。

我也在 E​​ktron 开发者论坛上发布了这个问题，但我没有回复。我希望这里有人可以提供帮助。

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T23:40:27.830

我会看 TaxonomyItemManager 而不是 ContentManager。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T20:19:19.973

前几天我对@nedlud 的回答的评论的后续行动，我觉得这应该得到自己的回答。

根据[框架 API 文档](http://reference.ektron.com/developer/framework/Organization/TaxonomyManager/)：

> 如果打算检索已在分类法中分类的 CMS 项目，请使用**TaxonomyItemManager**。

但正如评论中已经指出的那样，`TaxonomyItemData`此 API 返回的对象具有许多空属性，例如`QuickLink`和`Html`。我发现使用`TaxonomyManager`, 可以成功查询分配给特定分类类别的项目。

这是使用框架 API（版本 >= 8.5）的简短片段；这让人想起使用旧的（版本 <= 8.0）分类 API，其中一个人将创建一个`TaxonomyRequest`并获取一个对象结构，该结构不仅封装了分类本身，还封装了分类到该分类中的项目：

```
//e.g. for a single-level taxonomy

long taxRoot = 1707; //from OP's question
TaxonomyManager taxManager = new TaxonomyManager();
//GetTree overload supplying includeItems parameter
TaxonomyData taxTree = taxManager.GetTree(taxRoot, includeItems: true);

foreach(TaxonomyItemData taxItem in taxTree.TaxonomyItems)
{
    //these should print true
    Response.Write(!String.IsNullOrEmpty(taxItem.QuickLink));
    Response.Write(!String.IsNullOrEmpty(taxItem.Html));
} 
```

我目前正在将一些 8.0 版代码重构为 8.6 版并转换为 Framework API。在 Ektron 修复`TaxonomyItemManager`返回`TaxonomyItemData`null 属性的（错误？）之前，我将使用上述方法 +`LINQ`进行排序/过滤/等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T23:23:48.953

感谢@maddoxej 建议使用 TaxonomyItemManager，我有工作解决方案代码......

```
TaxonomyItemCriteria criteria = new TaxonomyItemCriteria();
criteria.AddFilter(TaxonomyItemProperty.TaxonomyId, CriteriaFilterOperator.EqualTo, 1707);
TaxonomyItemManager taxonomyItemManager = new TaxonomyItemManager();
List<TaxonomyItemData> taxonomyItemList = taxonomyItemManager.GetList(criteria);
Label1.Text = taxonomyItemList.Count.ToString(); 
```

此代码现在显示“5”的预期计数，我可以显示所有项目 :)

Ektron 中有这么多“经理”课程。

# azure - Azure 是否支持构建 F# 3.0/VS2012 项目？

> ID：12381071
> 
> 赞同：6
> 
> 时间：2012-09-12T04:05:56.170
> 
> 标签：azure, f#

我正在尝试将 MVC4 Web 应用程序部署到 Azure。它依赖于 F# 项目（包含 MVC 应用程序的控制器），该项目始终无法构建 w/ 错误：

> C:\DWASFiles\Sites\jbf\VirtualDirectory0\site\repository\JBF.Web\JBF.Web.Controllers\JBF.Web.FSharp.fsproj：错误 MSB4057：项目中不存在目标“构建”。

VS2012 中存在项目，这会强制升级 F# 项目。我想知道这是否是 Azure 尚不支持的依赖项，在 fsproj 的导入语句中找到的所有 4.5 引用：

```
<Import Project="$(MSBuildExtensionsPath32)\..\Microsoft F#\v4.5\Microsoft.FSharp.Targets" Condition="Exists('$(MSBuildExtensionsPath32)\..\Microsoft F#\v4.5\Microsoft.FSharp.Targets')" />

<Import Project="$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.0\Framework\v4.0\Microsoft.FSharp.Targets" Condition="Exists('$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.0\Framework\v4.0\Microsoft.FSharp.Targets')" />

<Import Project="$(MSBuildExtensionsPath32)\..\Microsoft F#\v4.0\Microsoft.FSharp.Targets" Condition="(!Exists('$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.0\Framework\v4.0\Microsoft.FSharp.Targets')) And (Exists('$(MSBuildExtensionsPath32)\..\Microsoft F#\v4.0\Microsoft.FSharp.Targets'))" />

<Import Project="$(MSBuildExtensionsPath32)\FSharp\1.0\Microsoft.FSharp.Targets" Condition="(!Exists('$(MSBuildExtensionsPath32)\..\Microsoft SDKs\F#\3.0\Framework\v4.0\Microsoft.FSharp.Targets')) And (!Exists('$(MSBuildExtensionsPath32)\..\Microsoft F#\v4.0\Microsoft.FSharp.Targets')) And (Exists('$(MSBuildExtensionsPath32)\FSharp\1.0\Microsoft.FSharp.Targets'))" /> 
```

作为记录，如果我预先构建 DLL 并部署它（引用 DLL 而不是项目）它工作得很好。此外，fsproj 对 F# 3.0 没有实际依赖性（它是一个迁移到 VS2012 的 F# 2.0 项目）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T01:45:57.053

更新：此问题由[https://github.com/projectkudu/kudu/issues/137跟踪](https://github.com/projectkudu/kudu/issues/137)

我只是复制了这个。这是示例存储库：[https](https://github.com/KuduApps/WebAppWithFSharpLibrary) ://github.com/KuduApps/WebAppWithFSharpLibrary 。

这绝对是一个错误。您能否在[https://github.com/projectkudu/kudu](https://github.com/projectkudu/kudu)上打开一个问题来跟踪它？最好将那里的问题作为 StackOverflow 问题进行跟踪。谢谢！

# java - 客户端如何知道连接到哪个套接字？

> ID：12381074
> 
> 赞同：1
> 
> 时间：2012-09-12T04:06:10.890
> 
> 标签：java, multithreading, sockets

我正在使用 Java 进行套接字编程，如下所示。

客户端程序如下：

```
 Socket MyClient;
    try {
           MyClient = new Socket("Machine name", PortNumber);
    }
    catch (IOException e) {
        System.out.println(e);
    } 
```

服务器程序如下：

```
ServerSocket MyService;
    try {
       MyServerice = new ServerSocket(PortNumber);
        }
        catch (IOException e) {
           System.out.println(e);
        }

Socket clientSocket = null;
    try {
       clientSocket = MyService.accept();
        }
    catch (IOException e) {
       System.out.println(e);
    } 
```

现在我的问题是，如果我运行多个线程以在一个端口中打开多个套接字（如上面的服务器代码），我的客户端程序如何知道它连接到哪个套接字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T04:16:23.043

您的客户端连接到服务器端口。所以所有客户端都将具有相同的代码 `MyClient = new Socket("Machine name", <port where server is listening>);`
在客户端打开的端口并不重要。客户端将在其操作系统中获得一个可用端口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T04:26:29.600

> 我的客户端程序如何知道它连接到哪个套接字？

这个问题没有意义。它根本不“连接到套接字”，它连接到一个监听端口，而且只有一个。您的服务器只接受一个客户端，因此第二个和后续线程将获得未定义的行为，从 ConnectException 到 ConnectionException 再到什么都没有，很可能是后者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T06:47:47.543

您的应用程序知道这一点，因为您使用特定端口对其进行了设置。TCP/IP 中没有内置“自动发现”，您可以选择服务器端口并确保将客户端设置为连接到该端口。您可以将其硬编码到客户端应用程序中，或者更好的是，将其包含在客户端附带的某个配置文件中。

这就是为什么您有一堆“已知端口”，例如 http 是端口 80。这意味着浏览器将**始终**连接到 Web 服务器上的端口 80，除非您在 URL 中明确指出另一个端口。

# asp.net - SSL - ASP.NET - 使用 Fiddler 检查时以纯文本形式传递的密码

> ID：12381075
> 
> 赞同：2
> 
> 时间：2012-09-12T04:06:19.247
> 
> 标签：asp.net, ssl, https, fiddler

我想用 ASP.NET 实现 SSL。我已经使用 selfssl 生成了一个自签名证书。之后，我在端口 443 上分配了 https 绑定（也尝试了备用端口 8443）。当我使用 https 访问网站并输入凭据时，fiddler 会显示以纯文本形式传递的密码。这是为什么？

我正在做所有应该做的事情。我错过了什么？我一直在搜索引擎中搜索并完成了所有这些，但仍然缺少一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T04:46:33.337

如果您使用 Fiddler 的证书（出于安全原因，您不应该在生产机器上这样做），那么 Fiddler 能够解密并向您显示您的 SSL 流量。如果不是这种情况，请确保您也将表单提交*到*HTTPS 链接。

# iphone - MKAnnotation“标题”属性，使用left/rightCalloutAccessoryView时如何抑制？

> ID：12381080
> 
> 赞同：2
> 
> 时间：2012-09-12T04:07:29.570
> 
> 标签：iphone, mkmapview, mapkit

iOS 5 中的情况似乎是当 id 的标题为 nil 时，不会为 MKAnnotationView 显示标注。MKAnnotationView 类参考：

> （如果注解的 title 方法返回一个空字符串，注解视图将被视为其 enabled 属性设置为 NO。）

我想要做的是显示一个完全由视图组成的标注，没有 NSStrings。我的 leftCalloutAccessoryView 上会有一个字符串，但将它移到标题会弄乱设计。一方面，它不在系统字体中，但必须与应用程序的其余部分匹配。

是否可以使 MKAnnotationView 弹出完全由 leftCalloutAccessoryView 和 rightCalloutAccessoryView 返回的视图组成的标注，之间没有标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T04:26:59.613

尝试这个：-

```
annotation.title=@" "; 
```

不要将`title`字符串设置为空，在字符串中设置一个空格字符，这样标题中将显示无字符串，并且您的标注将正确显示。

# git - git 不获取新的更改

> ID：12381081
> 
> 赞同：1
> 
> 时间：2012-09-12T04:07:30.800
> 
> 标签：git

```
git version 1.7.11.4
3.5.3-1.fc17.x86_64 #1 SMP x86_64 x86_64 x86_64 GNU/Linux 
```

你好，

当我尝试从我们的远程存储库中获取更改时，我输入了密码，然后什么也没发生，提示只是返回。我有需要合并的远程更改，但无法获取这些更改。这就是我所做的。

```
git remote show origin
resource_division pushes to resource_division (local out of date) 
```

当我尝试获取这些更改时，我什么也没得到：

```
$ git fetch origin
dev@10.10.10.18's password: 
$ 
```

我做了以下尝试和清理：

```
git fsck
git clean -f
git gc 
```

这曾经有效，现在已经停止。

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T04:10:11.517

`git fetch`仅从远程服务器检索新修订，但不会将它们应用于您的树。

你必须做一个`git merge origin/resource_division`实际更新你的分支。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T04:16:52.483

更简单的是，a`git pull origin`会获取您的更改*并将其*合并到您的分支。

A[`git pull`](http://git-scm.com/docs/git-pull)是 fetch 和 merge 的组合。

# c++ - C++ 设置 TDateTime 变量

> ID：12381083
> 
> 赞同：0
> 
> 时间：2012-09-12T04:07:57.763
> 
> 标签：c++, c++builder, vcl

我无法将日期设置为 TDateTime 变量。

我试过这个，没有运气：

```
TDateTime Mine;
Mine = ("12/05/1990"); 
```

我怎样才能做到这一点？

* * *

这段代码有什么问题：

```
TDateTime Mine("05/05/1990",Date); 
```

我收到以下错误：

[BCC32 错误] File1.cpp(28): E2285 找不到匹配 'TDateTime::TDateTime(const char *,TDateTime (_fastcall *)())' 完整的解析器上下文 File1.cpp(26): 解析: int主要（int，char * *）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T04:18:21.260

似乎您正试图在第二行调用构造函数。

```
TDateTime Mine("12/05/1990",TDateTime::Date); // construction
// some code using Mine
Mine = TDateTime("13/05/1990",TDateTime::Date); // assignment 
```

如果您只想拥有构造函数的单个参数，那么您还应该在该字符串中拥有时间，例如`TDateTime("12/05/1990 12:00 am")`.

# php - 想根据表格中的字段显示 CGridview 并在显示中区分它们吗？

> ID：12381084
> 
> 赞同：0
> 
> 时间：2012-09-12T04:07:58.787
> 
> 标签：php, css, yii

> 我有由消息列表组成的 CGridview，我想通过网格中的颜色变化来区分它的已读和未读，我不擅长 CSS，所以我对此一无所知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T05:58:02.610

1.  加入 main.css

    ```
    .grid-view table.items tr.unread {
        background: none repeat scroll 0 0 #FF0000 !important; /* red color is unread */
     }

    .grid-view table.items tr.read {
        background: none repeat scroll 0 0 #00FF00 !important; /* green color is read */
    } 
    ```

2.  在消息模型中

    ```
    function isRead()
    {
        return $this->hasRead;
    } 
    ```

3.  在 CGridView 添加行 css 类表达式

    ```
    'rowCssClassExpression' => '$data->isRead()?"read":"unread"', 
    ```

# php - array_intersect 可变数量的数组

> ID：12381085
> 
> 赞同：4
> 
> 时间：2012-09-12T04:08:26.913
> 
> 标签：php, arrays, variables, loops, array-intersect

我正在创建一个多面搜索，我正在尝试使用它`array_intersect`来比较数组并找到匹配的输入。

问题是我将随时根据用户选择的过滤器拥有可变数量的数组：

`$array_1, $array_2, $array_3`ETC...

在这个意义上，我如何创建一个`array_intersect`动态的函数？

这是我尝试过的：

```
$next_array = 0;
for($i = 0; $i < $array_count; $i++) {
    $next_array++;
    if ($i == 0) {
        $full_array = ${array_.$i};
    } else {
        if(!empty(${cvp_array.$next_array})) {
            $full_array = array_intersect($full_array, ${cvp_array_.$next_array});
        }
    }
} 
```

- - - - - - - 编辑 - - - - - - -

我将尝试进一步缩小我的目标：

如果用户单击三个过滤器，则会创建三个数组，每个数组都有单独的结果：

`Array_1 ( [0] => 2, [1] => 4, [2] => 6 )`

`Array_2 ( [0] => 1, [1] => 4, [2] => 6 )`

`Array_3 ( [0] => 6, [1] => 7, [2] => 8 )`

我需要能够找到所有数组中的数字的代码。如果没有共同的数字，那么它将以错误或其他方式结束。在上面的例子中，我需要它来检索 6。如果它只是前两个数组，它将返回 4 和 6。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-08T10:45:47.843

尝试这个：

```
$fullArray = array($array1, $array2, $array3...);
call_user_func_array('array_intersect', $fullArray); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-07-19T08:16:48.547

一个可以使用：

```
$intersect = array_intersect(...$fullArray); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T04:11:13.257

首先，将这些数组变成数组数组。然后，您可以使用[`array_reduce`](http://php.net/array-reduce)组合 with`array_intersect`将可变数量的数组减少到一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T04:29:56.833

`$total_array`您可以将这些数组转换为以 using命名的单个数组`array_combine()`，然后使用`array_intersect($full_array, $total_array)`. 我希望这有用

# android - 找不到活动错误

> ID：12381089
> 
> 赞同：0
> 
> 时间：2012-09-12T04:08:53.327
> 
> 标签：android, android-manifest, android-activity, android-logcat

保存一些数据后，我一直在尝试返回活动。保存所有作品找到。那里没有错误，所有流都已关闭。然后我尝试回到 MainMenu 活动，它似乎不起作用。还有一些我不知道它是否会影响它的东西，但是如果我在课堂上创建了一些 TextFields，我是否需要在进行新活动之前删除它们？

("com.sureclean.versionio.settings") 中新活动的代码：

```
public void onClick(View v) {
        //Saving data code in here
    startActivity(new Intent("com.sureclean.versionioo.MainMenu"));
} 
```

整个清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.sureclean.versionioo"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Splash"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".MainMenu"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="com.sureclean.versionioo.MainMenu" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".checklist"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name=".checklist" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".settings"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="com.sureclean.versionioo.settings" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application> 
```

日志猫：

```
09-12 15:58:03.949: E/AndroidRuntime(1079): FATAL EXCEPTION: main
09-12 15:58:03.949: E/AndroidRuntime(1079): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.surehere.versionioo.MAIN }
09-12 15:58:03.949: E/AndroidRuntime(1079):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1512)
09-12 15:58:03.949: E/AndroidRuntime(1079):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384)
09-12 15:58:03.949: E/AndroidRuntime(1079):     at android.app.Activity.startActivityForResult(Activity.java:3190)
09-12 15:58:03.949: E/AndroidRuntime(1079):     at android.app.Activity.startActivity(Activity.java:3297)
09-12 15:58:03.949: E/AndroidRuntime(1079):     at com.sureclean.versionioo.settings$1.onClick(settings.java:54)
09-12 15:58:03.949: E/AndroidRuntime(1079):     at android.view.View.performClick(View.java:3511)
09-12 15:58:03.949: E/AndroidRuntime(1079):     at android.view.View$PerformClick.run(View.java:14105)
09-12 15:58:03.949: E/AndroidRuntime(1079):     at android.os.Handler.handleCallback(Handler.java:605)
09-12 15:58:03.949: E/AndroidRuntime(1079):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-12 15:58:03.949: E/AndroidRuntime(1079):     at android.os.Looper.loop(Looper.java:137)
09-12 15:58:03.949: E/AndroidRuntime(1079):     at android.app.ActivityThread.main(ActivityThread.java:4424)
09-12 15:58:03.949: E/AndroidRuntime(1079):     at java.lang.reflect.Method.invokeNative(Native Method)
09-12 15:58:03.949: E/AndroidRuntime(1079):     at java.lang.reflect.Method.invoke(Method.java:511)
09-12 15:58:03.949: E/AndroidRuntime(1079):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-12 15:58:03.949: E/AndroidRuntime(1079):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-12 15:58:03.949: E/AndroidRuntime(1079):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T04:15:34.880

如果清单中定义的包中存在此活动...您可以编写 android:name=".MainMenu"

但如果包名是其他人所以写全名

android:name="你的包名.MainMenu"

**使用此清单一次**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.sureclean.versionioo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Splash"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".MainMenu"
            android:label="@string/title_activity_main" >
        </activity>
        <activity
            android:name=".checklist"
            android:label="@string/title_activity_main" >
        </activity>
        <activity
            android:name=".settings"
            android:label="@string/title_activity_main" >
        </activity>
    </application> 
```

**并在按钮上单击**

```
startActivity(new Intent(settings.this,MainMenu.class)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T04:14:35.417

测试这个：

您的清单：

```
<activity
    android:name=".MainMenu"
    android:label="@string/title_activity_main" >
</activity> 
```

你的代码：

```
public void onClick(View v) {
    startActivity(new Intent(this, MainMenu.class));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T04:44:34.840

再次检查您的错误。错误地你得到了包裹

> “ **com.surehere.versionioo.MAIN** ”

并且您已经定义了对您的活动的操作是

> “ **com.sureclean.versionioo.MainMenu** ”

表示包名有问题。检查一次包名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T04:52:26.083

试试上面提到的清单：

```
 Intent intMainMenu=new Intent(this, MainMenu.class);
    intMainMenu.setAction("com.sureclean.versionioo.MainMenu");
    startActivity(intMainMenu); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-18T09:05:54.433

试试这个

```
Intent intent = new Intent();
intent.setClassName("com.sureclean.versionioo", "com.sureclean.versionioo.MainMenu");
            startActivity(intent); 
```

我遇到了同样的问题，这段代码有效

# ruby-on-rails - 具有不同角色但数据离散的用户模型？

> ID：12381094
> 
> 赞同：0
> 
> 时间：2012-09-12T04:09:21.257
> 
> 标签：ruby-on-rails, ruby, inheritance

我正在开发一个 Rails 应用程序，其中用户可以拥有多个角色，例如经理、员工、管理员等。

由于多个角色，STI 在这种情况下不起作用，但如果可能的话，我仍然希望将与角色相关的数据保存在不同的表中。

所以现在，我的架构看起来像这样：

```
create_table :roles do |t|
  t.string   :name
  t.timestamps
end

create_table :users do |t|
  t.string :first_name
  t.string :last_name
  t.string :email, :default => "", :null => false
  t.timestamps
end

create_table :roles_users, :id => false do |t|
  t.references :role, :user
end 
```

我的用户/角色模型彼此之间都有`has_and_belongs_to_many`关系。

因此，例如，如果我需要经理到`have_many`员工，那么这种设置是否可行？具有 Manager 角色的用户是否可以具有特定于 Manager 的属性，例如`secret_manager_information`？还是我需要重新考虑我的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T04:31:31.180

看到经理需要如何跟踪员工（通常其他角色可能需要跟踪其他特殊数据），我想说每个角色都足够不同，他们应该有自己的表格（假设你没有'角色太多）。

例如，我将创建一个 Manager 和一个 Employee 模型：

```
class Manager
    attr_accessible :user_id
    has_many :employees
end

class Employee
    attr_accessible :user_id, :manager_id
    belongs_to :manager
end 
```

任何作为 Manager 的用户都将在 Manager 表中具有 user_id = user.id 的记录。任何属于 Employee 的用户都会在 Employee 表中有一条记录，其中 user_id = user.id 和 manager_id =（对应经理记录的 id）

# c# - 试图从本机 dll 获取字符串值

> ID：12381100
> 
> 赞同：0
> 
> 时间：2012-09-12T04:10:14.250
> 
> 标签：c#, c++, pinvoke

我有一个本机 dll，我需要设置参数的字符串值。下面是 C++ 方法签名

```
 __declspec(dllexport) void __stdcall getDetails(_Out_ LPTSTR lpDetails, _In_ UINT uSize) 
```

c++方法

我已经为 return lpDetails=L"test"; 硬编码了这个。

我的 c# 签名

```
 [return: MarshalAs(UnmanagedType.I1)]
   [DllImport("test.dll",CharSet=CharSet.Auto)]
   static extern bool getDetails(StringBuilder result, System.UInt32 uSize); 
```

c# 代码

```
 StringBuilder b = new StringBuilder(1000);
        getDetails(b, 255);
        m = b.ToString(); //always ""
        Console.WriteLine(m); 
```

当我单步执行代码时，我看到值 (lpDetails) 被设置为正确的值。问题出在 c# 上，我所看到的只是一个空字符串。

我尝试了从其他帖子中找到的东西，但到目前为止还没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:49:17.827

这里有几件事是错误的：

*   本机方法显示为 C 签名，而不是 C++ 签名（我在这里挑剔:)
*   lPDetails 参数是 IN，而不是 OUT，如果您希望函数将详细信息写入预分配的位置（从第二个参数看来，它应该表示分配的缓冲区的长度）
*   你的实现`lpDetails=L"test"`被破坏了。如果您向函数提供预分配的缓冲区（正如您的签名所暗示的那样），您需要`_tcscpy`将详细信息放入 lpDetails。如果您想在函数内分配字符串（正如您的实现所暗示的，您需要将 lpDetails 声明为`LPTSTR*`，但这是一个糟糕的设计，因为调用者现在可能不知道如何释放它（在这种情况下，它确实不能作为“测试”指向数据段中的静态内存而不是堆。

即使没有互操作，这也行不通：

```
LPTSTR pCallerData; // a pointer variable
void getDetails(LPTSTR lpData, /*what do you use second param for? */)
{
  // lpData is a COPY of pCallerData, not a pointer to it, 
  // so you are not modifying pCallerData, but a local variable
  lpData = "test";
  // after the function exits pCallerData still has the same value as before
}_ 
```

更好的实施将是：

```
LPTSTR txt[256]; 
getDetails(txt, 256);
// ----
void getDetails(LPTSTR lpData, int size)
{
_tcscpy(lpDetails, _T("Test")); 
// or more realistically _tcsncpy and properly check 
// if details string is longer than size argument
}_ 
```

# delphi - TFlowPanel 中的 AutoSize 和 AutoWrap 冲突

> ID：12381106
> 
> 赞同：6
> 
> 时间：2012-09-12T04:11:14.130
> 
> 标签：delphi, delphi-xe2, vcl, autosize

我正在尝试以下列方式使用 TFlowPanel 组件：

1.  放置在主窗体`Form1`组件上`FlowPanel1: TFlowPanel`。
2.  设置`Form1.Width = 400`, `FlowPanel1.Align = alTop`, `FlowPanel1.AutoSize = True`, `FlowPanel1.AutoWrap = True`.
3.  放置在`FlowPanel1`5 个 SpeedButton 上并将其设置`Width`为 64。
4.  编译并运行。
5.  减小表格的宽度（关于`Form1.Width = 200`）。

出于某种原因，当用户调整表单大小时，速度按钮不会自动排成两行。`AutoSize = False`虽然，当,时，它们确实排成两排`AutoWrap = True`。
这种行为的原因是什么以及如何解决？

**编辑**：我找到了“快速而肮脏”的解决方案。以下代码是事件的事件处理程序`TFlowPanel.OnResize`：

```
procedure TForm1.FlowPanel1Resize(Sender: TObject);
begin
  with FlowPanel1 do
  begin
    AutoSize := False;
    Realign;            // line up controls
    AutoSize := True;   // adjust TFlowPanel.Height
  end;
end; 
```

但是，我仍然想知道是否有解决问题的标准方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T07:26:11.030

我无法在代码中找到这种行为的确切原因，但基本上你已经挑战了两个大小属性来对抗，[`AutoSize`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Controls.TControl.AutoSize)和[`Align`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Controls.TControl.Align). 问题是，我认为，当您调整表单大小时，[`AutoSize`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Controls.TControl.AutoSize)配置为 True 并[`Align`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Controls.TControl.Align)设置为[`alTop`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Controls.TAlign)的控件将首先尝试自动调整控件大小，然后对齐到其父级的顶部。我可以肯定地说，至少从它们的逻辑含义来看，这两个属性不应该结合在一起。

我建议您的解决方法是默认关闭自动调整大小，并在[`OnResize`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Controls.TControl.OnResize)事件中将其临时打开并重新关闭以自动调整高度。所以在代码中它会简单地更改为：

```
procedure TForm1.FlowPanel1Resize(Sender: TObject);
begin
  // there's no Realign here, since the AlignControls request is called
  // at control resize, so here you have children already aligned, what
  // you then need is to request the control to autosize the height and
  // turn off the autosizing to the default, disabled state
  FlowPanel1.AutoSize := True;
  FlowPanel1.AutoSize := False;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T18:08:30.550

> **tl，dr：**这是`TFlowPanel`.

通常情况下，`AutoSize`和`Align`属性默认情况下很好地结合在一起，因为这已经在`TControl`级别上进行了处理，所以我想知道为什么会发生这种情况。我注意到一个被覆盖的`AlignControls`方法，`TFlowPanel`并考虑绕过它进行测试：

```
type
  TWinControlAccess = class(TWinControl);
  TAlignControls = procedure(Instance: TObject; AControl: TControl;
    var Rect: TRect);

  TFlowPanel = class(Vcl.ExtCtrls.TFlowPanel)
  protected
    procedure AlignControls(AControl: TControl; var Rect: TRect); override;
  end;

  TForm1 = class(TForm)
    ...

procedure TFlowPanel.AlignControls(AControl: TControl; var Rect: TRect);
begin
  // Skip TCustomFlowPanel.AlignControls
  TAlignControls(@TWinControlAccess.AlignControls)(Self, AControl, Rect);
end;

procedure TForm1.FlowPanel1Resize(Sender: TObject);
begin
  // Do my own aligning of the last button
  if FlowPanel1.ClientWidth < Button5.BoundsRect.Right then
  begin
    Button5.Left := 1;
    Button5.Top := Button1.Height + 1;
  end
  else if FlowPanel1.ClientWidth > Button4.BoundsRect.Right + Button5.Width then
  begin
    Button5.Left := Button4.BoundsRect.Right;
    Button5.Top := 1;
  end;
end; 
```

现在，这按预期工作。那么`TFlowPanel`' 的实施有什么问题`AlignControls`？看起来下面的代码片段是原因：

```
if AutoSize then
  Rect := TRect.Create(
    Rect.Left,
    Rect.Top,
    Rect.Left + (ExplicitWidth - (Width - (Rect.Right - Rect.Left))),
    Rect.Top + (ExplicitHeight - (Height - (Rect.Bottom - Rect.Top)))); 
```

当这部分被注释掉时，行为与`Align`set 和预期的一样。现在，我想将此提交给 QC，但也许我忽略了它的某些方面。请编辑或评论何时（以及为什么）确实需要此代码。

# objective-c - Objective-C 属性的类型

> ID：12381108
> 
> 赞同：10
> 
> 时间：2012-09-12T04:11:35.850
> 
> 标签：objective-c, xcode

在 Objective-C 中声明属性时，可以配置哪些自定义选项，这些选项定义了访问器方法的行为方式？

例如，你可以有弱、强、只读。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-12T04:25:02.567

这是简短的答案：

**atomic vs nonatomic**主要确保从合成的 getter 返回完整的值，并确保完整的值由合成的 setter 写入。

**readwrite 与 readonly**确定合成属性是否具有合成访问器（readwrite 有一个 setter 并且是默认值，readonly 没有）。

**分配 vs 弱 vs 保留 vs 复制**决定了合成访问器如何与 Objective-C 内存管理方案交互。

现在是长答案：

**原子与非原子**

假设您正在 @synthesizing 方法实现，原子与非原子会更改生成的代码。如果您正在编写自己的 setter/getter，则 atomic/nonatomic/retain/assign/copy 只是建议性的。

使用 atomic 时，合成的 setter/getter 将确保始终从 getter 返回整个值或由 setter 设置，而不管任何其他线程上的 setter 活动。也就是说，如果线程 A 在 getter 的中间，而线程 B 调用 setter，则实际可行的值——很可能是一个自动释放的对象——将返回给 A 中的调用者。

在非原子中，没有这样的保证。因此，非原子比原子快得多。

atomic 不做的是对线程安全做出任何保证。如果线程 A 同时调用 getter，而线程 B 和 C 使用不同的值调用 setter，则线程 A 可能会返回三个值中的任何一个——在调用任何 setter 之前的那个值或传递给 setter 的值中的任何一个在 B 和 C 中。同样，对象可能以 B 或 C 中的值结束，无法判断。

确保数据完整性——多线程编程的主要挑战之一——是通过其他方式实现的。

**分配、弱化、保留、复制**

简而言之，assign vs weak vs retain vs copy 决定了合成访问器如何与 Objective-C 内存管理方案交互：

*   assign 是默认值，只是执行变量赋值。它不声明所有权，因此如果没有其他人通过保留或其他方式声明所有权，则属性指针指向的对象可能随时消失。在 ARC 环境中，assign 并不能确保指针不会悬空，这意味着如果另一侧的对象已被释放，则指针可能最终指向垃圾。
*   weak 与 assign 相同，只是它将导致释放对象的指针清零以阻止它们悬空。Weak 仅在 ARC 环境中可用。
*   保留指定应发送新值 - 保留分配和旧值发送释放。保留也被称为强大。
*   复制指定应发送新值 - 分配时复制并发送旧值释放。Copy 通常用于属性类型具有可变表亲 (NSArray/NSMutableArray) 的属性，以防止其他人发送可变版本并更改它们/让它们在背后更改等等。

请记住，保留/强是在创建的对象上完成的（它增加了引用计数），而复制创建了一个新对象。那么，区别在于您是要向对象添加另一个保留还是创建一个全新的对象。

# apache-camel - Apache camel multiple file processing with exec

> ID：12381109
> 
> 赞同：1
> 
> 时间：2012-09-12T04:11:37.087
> 
> 标签：apache-camel

I am having trouble fixing this simple route, getting exception right after execute. Seems like execute is acting as Producer and over writing file.

Exception:

> org.apache.camel.component.file.GenericFileOperationFailedException: Cannot store file: C:\camel_tests\stage\Downloads.rar

Route:

Home directory will have a rar file with images, that should be extracted with winrar.exe, each file in the rar is file processed, and eventually moved to arch directory once this route done. Last successful stage is extracting files in the stage directory.

Here `CMD_EXPLODE` = `"\"C:/Program Files/WinRAR/WinRAR.exe\"";`

```
from("file://C:/camel_tests/home?fileName=Downloads.rar&preMove=//C:/camel_tests/stage")
.to("exec:"+Consts.CMD_EXPLODE+"?args=e Downloads.rar&workingDir=C:/camel_tests/stage&outFile=decompress_output.txt")
.to("file://C:/camel_tests/stage?exclude=.*.rar")
.process(new PrintFiles())
.to("file://C:/camel_tests/stage?fileName=Downloads.rar&move=//C:/camel_tests/arch").end(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:21:36.553

你应该把它分成2条路线。第一个执行 from -> exec 和第二个 from -> process -> to

然后第二个将处理从 winrar 提取的每个文件。

# java - dynamically building a datatable vs scriplets

> ID：12381110
> 
> 赞同：2
> 
> 时间：2012-09-12T04:12:14.547
> 
> 标签：java, javascript, jquery, jsp, datatable

Is it better to dynamically build a table then initiate a datatable, or use scriptlets and then build the datatable? I've read and rethought about how I should approach this. I currently have it working both ways, but I've reading about the advantages/disadvantages of ajax/back/forward/state... It's much easier with scriptlets since I really don't have to worry/handle those situations, especially on refresh/backbutton/forward, but with ajax I have to handle all that personally. What would you pick and why?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T04:19:31.317

scriptlet 通常不受欢迎，因为它们破坏了 MVC 模型，

这个网站解释得更好 [https://www.coderanch.com/how-to/java/WhyNotUseScriptlets](https://www.coderanch.com/how-to/java/WhyNotUseScriptlets)

# amazon - How to install pdftk on Amazon Linux AMI release 2012.03

> ID：12381111
> 
> 赞同：3
> 
> 时间：2012-09-12T04:12:17.023
> 
> 标签：amazon, pdftk

I am not able to install the pdftk on Amazon Linux AMI release 2012.03\. pdftk requires gcj2.14 and amazon ami provides gcj2.12 package. If I try to install gcj2.14 getting conflicts with the existing gcj package. Please suggest a way to install pdftk without any need to upgrade amazon ami linux as my application is already setup and running there.

Your help will be appreciated

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-12-04T20:58:08.880

受@marcus 和他的[github repo](https://github.com/lob/lambda-pdftk-example)启发，我这样做了：

```
sudo wget -O /usr/lib64/libgcj.so.10 https://github.com/lob/lambda-pdftk-example/raw/master/bin/libgcj.so.10
sudo wget -O /usr/bin/pdftk https://github.com/lob/lambda-pdftk-example/raw/master/bin/pdftk
chmod a+x /usr/bin/pdftk 
```

奇迹般有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-10T12:14:41.443

因为您可能不想用 pdftk 所需的所有依赖项污染您的生产映像 - 一种方法是在其他地方构建 pdftk 并将其部署到例如通过 S3。

以下是应该让你开始的步骤。从历史记录中复制和粘贴，因此应该显示所需的步骤。

从 AWS（或本地 Centos 6）获取 RedHat 实例

```
sudo su -

yum install gcc
yum install gcc-java
yum install gcc-c++

cd /tmp/
wget http://pkgs.repoforge.org/pdftk/pdftk-1.44-2.rf.src.rpm
rpm2cpio pdftk-1.44-2.rf.src.rpm | cpio -idmv
unzip pdftk-1.44-src.zip 

cd pdftk-1.44-dist/
cd pdftk
make -f Makefile.Redhat 
find / -iname libgcj.so.10.0.0
mkdir -p /tmp/pdftk
cp pdftk /tmp/pdftk
find / -iname libgcj.so.10.0.0
cp /usr/lib64/libgcj.so.10.0.0 /tmp/pdftk
cd /tmp/
tar cvzf pdftk.tar.gz pdftk 
```

确保在目标机器 (Linux AMI) 中复制 tar 包内容，如下所示

```
libgcj.so.10.0.0 install to /usr/lib64

ls -alh /usr/lib64/libgcj.so.*

lrwxrwxrwx 1 root root  27 Sep  6 06:39 /usr/lib64/libgcj.so.10 -> /usr/lib64/libgcj.so.10.0.0

-rwxr-xr-x 1 root root 47M Sep  6 06:38 /usr/lib64/libgcj.so.10.0.0 
```

我只是习惯了 S3 存储桶来传输文件：

```
/usr/bin/s3cmd --force get s3://<your-bucket>/rpm/pdftk.tar.gz  /tmp/

pushd /tmp

/bin/tar xzf pdftk.tar.gz  

/bin/cp pdftk/pdftk /usr/bin/

/bin/cp pdftk/libgcj.so.10.0.0 /usr/lib64/libgcj.so.10.0.0

/bin/ln -s /usr/lib64/libgcj.so.10.0.0 /usr/lib64/libgcj.so.10.0

/sbin/ldconfig

popd 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-16T20:50:16.660

非常老的帖子，但我一直在寻找在亚马逊发行版上安装 pdftk 的方法（这是 OP 正在使用的）。以下是亚马逊代表的回复：

> Amazon Linux AMI 不支持 GCJ，这就是您遇到此问题的原因。
> 
> 为了让您在基于 RPM 的 EC2 实例上尽快前进，我建议您尝试 Fedora，因为 pdftk 已打包在他们的存储库中。
> 
> 感谢您使用 EC2，希望此建议对您有所帮助。

[https://forums.aws.amazon.com/thread.jspa?threadID=96919](https://forums.aws.amazon.com/thread.jspa?threadID=96919)

# r - shorten the time for R CMD check pkg_name

> ID：12381112
> 
> 赞同：2
> 
> 时间：2012-09-12T04:12:46.603
> 
> 标签：r, package

I am developing an R package, and I have the following questions:

1.  I use the roxygen2 package for the development, specifically I use roxygenize("pkg_Name") in R before running R CMD check pkg_Name in the shell mode. I found the time spent on checking the package so long, and wonder if there is any way to "cache" the unchanged results? I often made minor changes for my R functions being developed, and I don't wanna spend that long time for running R CMD check...

Thank you so much!

# php - 我可以使用 simplexml 在表单中找到选定的选项吗？

> ID：12381113
> 
> 赞同：1
> 
> 时间：2012-09-12T04:12:47.393
> 
> 标签：php, simplexml, option, selected

我可以使用以下代码在网站上找到选择的选项：

```
$dom = new DOMDocument();
$dom->loadHTMLFile('http://webseven.com.au/carl/testpage.htm');
$xml = simplexml_import_dom($dom);
//print_r($xml);
$select = $xml->xpath('//table/tr/td/select');
print_r($select); 
```

我得到（例如）

```
[0] => SimpleXMLElement Object
    (
        [@attributes] => Array
            (
                [name] => product_OnWeb
                [tabindex] => 4
            )

        [option] => Array
            (
                [0] => Yes

                [1] => No

            )

    ) 
```

但我无法找到一种方法来找到哪些被选中。

这可以用 SimpleXML 完成还是有其他方法？

谢谢。

卡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:17:25.403

您需要遍历所有选项（使用`foreach ( $node->option ... )`），并检查`selected`属性（使用`$node['selected']`）：

```
$dom = new DOMDocument();
$dom->loadHTMLFile('http://webseven.com.au/carl/testpage.htm');
$xml = simplexml_import_dom($dom);

$selects = $xml->xpath('//table/tr/td/select');
foreach ( $selects as $select_node )
{
    echo $select_node['name'] . ': ';

    foreach ( $select_node->option as $option_node )
    {
        if ( isset($option_node['selected']) )
        {
            echo $option_node['value'] . ' ';
        }
    }

    echo "\n";
} 
```

顺便说一句，如果您用于调试 SimpleXML，您可能会误入歧途`print_r`，因为它不会向您显示对象的真实状态。我写了一个[`simplexml_dump`](https://github.com/IMSoP/simplexml_debug)可能更有用的函数。

# html - dojo 1.8 集成html5 postmessage

> ID：12381115
> 
> 赞同：1
> 
> 时间：2012-09-12T04:13:15.940
> 
> 标签：html, dojo

我试图让一些 html5 发布消息与 dojo 1.8 一起使用，我创建了一个 jsfiddle 来尝试更好地解释它。需要注意的一件事是按钮正在 iframe 中加载。所以基本上，如果在 iframe 中发生点击，那么父节点应该接收并处理该消息。任何指针将不胜感激。

[http://jsfiddle.net/AvPFv/](http://jsfiddle.net/AvPFv/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:47:47.093

基本上，您应该`message`在 iframe 窗口上收听，即`iframe.contentWindow`. 另外，请注意`dojo`您的 iframe 中没有。

我创建了一个 jsFiddle 来展示它是如何工作的：http: [//jsfiddle.net/phusick/H7Zh8/](http://jsfiddle.net/phusick/H7Zh8/)但恐怕将所有内容都放在一个文件中会非常混乱，即在父窗口的上下文中，因为它没有正确解释`window`参考指向的位置，也没有模拟真实世界的使用。我建议您在具有两组脚本的 localhost 上尝试它，一组用于父窗口，一组用于 iframe。

```
require([
    "dojo/dom",
    "dojo/on",
    "dojo/date/locale",
    "dojo/domReady!"        
], function(
    dom,
    on,
    locale    
) {

    var buttonNode = dom.byId("postMessageButton");
    var iframeNode = dom.byId("iframe");
    var iframe = iframeNode.contentWindow;
    var iframeButtonNode = iframe.document.getElementById("postMessageButton");

    on(buttonNode, "click", function() {
        iframe.postMessage("hello from parent", "*");       
    });

    on(iframe, "message", function(event) {
        var msgNode = iframe.document.getElementById("msg");
        msgNode.innerHTML += formatMessage(event);
        event.source.postMessage("echo from iframe", "*");
    });

    on(iframeButtonNode, "click", function() {
        iframe.parent.postMessage("hello from iframe", "*");
    })

    on(window, "message", function(event) {
        dom.byId("msg").innerHTML += formatMessage(event);
    });

    function formatMessage(event) {
        var time = locale.format(new Date(event.timeStamp),{
            selector: "time",
            formatLength: "medium"
        });
        return time + ": " + event.data + "<br>";
    }

}); 
```

# r - 将标题添加到由“write.csv”创建的文件中

> ID：12381117
> 
> 赞同：7
> 
> 时间：2012-09-12T04:13:48.647
> 
> 标签：r, header

我正在尝试自动化一些数据导出，并且我想为每个文件添加一个标题，例如“请引用 Bob 和 Jane 2008”......甚至根据上下文添加几行特定说明。

我查看了 write.csv 和 write.table 文档，但没有看到任何此类功能。

实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-12T04:31:02.123

这里有两种可能的方法 - **EDIT 下使用连接**的解决方案更加灵活和高效。

* * *

# 使用`write.table(...,append = T)` 和 `cat`

*   `append=T`在调用中使用`write.table`，`cat`之前有标题

包裹在自己的功能中....

```
write.table_with_header <- function(x, file, header, ...){
  cat(header, '\n',  file = file)
  write.table(x, file, append = T, ...)
} 
```

请注意，`append`在调用中被忽略`write.csv`，因此您只需调用

`write.table_with_header(x,file,header,sep=',')`

这将产生一个csv文件。

* * *

# 编辑

## 使用连接

（感谢@flodel 的建议）

```
my.write <- function(x, file, header, f = write.csv, ...){
# create and open the file connection
  datafile <- file(file, open = 'wt')
# close on exit
  on.exit(close(datafile))
# if a header is defined, write it to the file (@CarlWitthoft's suggestion)
  if(!missing(header)) writeLines(header,con=datafile)
# write the file using the defined function and required addition arguments  
  f(x, datafile,...)
} 
```

请注意，此版本允许您使用`write.csv`or`write.table`或任何功能并使用文件连接（正如@flodel 在评论中指出的那样）只会打开和关闭文件一次，并自动附加。所以效率更高！

# sql - SQL 触发器和插入的标识

> ID：12381123
> 
> 赞同：1
> 
> 时间：2012-09-12T04:14:21.323
> 
> 标签：sql, sql-server, triggers

我的触发器有问题，我无法弄清楚。

假设我有两个表，Stu_Table2 和 Stu_log。Stu_table2 有一些列，其中之一是自动生成的主键 [stu_id]。两个表之间的链接是 [stu_name]=[user_id]

下面的代码适用于更新和删除（因为主键已经存在）。但是我卡在插入上-如果尚未生成，我如何将自动生成的主键从 stu_name 插入到日志表中？

Stu_name 列，[stu_id] [Stu_name] [Stu_class]

Stu_log 列，[user_id] [stu_name]

显然这不是一个真实世界的例子，只是测试概念证明。

```
 ALTER TRIGGER [dbo].[stu_testtrigger]
    ON [dbo].[Stu_Table2] FOR INSERT, UPDATE, DELETE
    AS 

    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with caller queries SELECT statements.
    -- If an update/insert/delete occurs on the main table, the number of         records         affected
    -- should only be based on that table and not what records the triggers may/may not
    -- select.
    SET NOCOUNT ON;

    --
    -- Variables Needed for this Trigger
    -- 
    DECLARE @stu_ID int
    DECLARE @stu_name varchar(15)
    DECLARE @stu_class int

    --
    -- Determine if this is an INSERT,UPDATE, or DELETE Action
    -- 
    DECLARE @Action as char(1)
    DECLARE @Count as int
    SET @Action = 'I' -- Set Action to 'I'nsert by default.
    SELECT @Count = COUNT(*) FROM DELETED
    if @Count > 0
        BEGIN
            SET @Action = 'D' -- Set Action to 'D'eleted.
            SELECT @Count = COUNT(*) FROM INSERTED
            IF @Count > 0
                SET @Action = 'U' -- Set Action to 'U'pdated.
        END

    if @Action = 'D'
        -- This is a DELETE Record Action
        --
        BEGIN
            SELECT @Stu_id =[stu_id]
                        ,@Stu_name = [stu_name]
            FROM DELETED

            DELETE [dbo].[stu_log]
            WHERE [user_id]=@stu_id
        END
     Else
        BEGIN
                --
                -- Table INSERTED is common to both the INSERT, UPDATE trigger
                --
                SELECT @stu_id =[stu_id]
                    ,@stu_name = [stu_name]
                FROM INSERTED 

             if @Action = 'I'
                -- This is an Insert Record Action
                --

                --THIS IS WHERE I'm STUCK i think!!!
                BEGIN
                    INSERT INTO [stu_log]
                        ([user_id]
                        ,[description])
                    VALUES
                        (@stu_id
                        ,@stu_name)

                END
            else
                -- This is an Update Record Action
                --
                BEGIN
                    UPDATE [stu_log]
                        SET [user_id] = @stu_id
                              ,[description] = @Stu_name
                        WHERE [user_id]=@stu_id
                END
        END 
```

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T06:36:28.927

由于您似乎想要对插入、更新和删除执行截然不同的操作，我不确定您为什么要将所有操作都塞进一个触发器中。我只是有：

```
CREATE TRIGGER [dbo].[stu_testtrigger_I]
ON [dbo].[Stu_Table2] AFTER INSERT
AS
   INSERT INTO stu_log ([user_id],[description])
   SELECT stu_id,stu_name from inserted
GO
CREATE TRIGGER [dbo].[stu_testtrigger_D]
ON [dbo].[Stu_Table2] AFTER DELETE
AS
   DELETE FROM stu_log WHERE [user_id] IN (
   SELECT stu_id from deleted)
GO
CREATE TRIGGER [dbo].[stu_testtrigger_U]
ON [dbo].[Stu_Table2] AFTER UPDATE
AS
   UPDATE l SET user_name = i.user_name
   FROM
      stu_log l
         inner join
      inserted i
         on l.[user_id] = i.stu_id
GO 
```

笔记：

1.  这适用于您原来没有的多行插入、更新和删除
2.  我说`AFTER`的不是`FOR`, 是为了让您更清楚地知道这些动作是在任何活动`Stu_Table2`已经发生之后发生的（例如，身份值已经生成，这似乎是您关心的问题）。
3.  但是，您应该注意，`AFTER`and`FOR`是同义词。`INSTEAD OF`如果我们做一个触发器，你只会得到不同的行为。
4.  我`[user_id] = @stu_id`从`UPDATE`. 鉴于`WHERE`此更新的子句（或上面我的连接等效项），这两个必须已经相等。

# r - 将多个参数传递给 Reduce

> ID：12381126
> 
> 赞同：1
> 
> 时间：2012-09-12T04:14:43.407
> 
> 标签：r, reduce

我有一个 data.frames 列表，并且想使用各种权重对它们的列进行操作。

例如，从第二列中减去第一列（已解决，见下文）；或从第二个的两倍（未解决）中减去第一个和第三个。

感谢在回答[这个](https://stackoverflow.com/questions/12368674/r-enumerate-column-combinations-of-a-matrix)问题时获得的慷慨帮助，我在没有权重的情况下使用`Reduce`.

我希望能够灵活地使用重量 - 并且在更高的维度上。

到目前为止，我所拥有的是：

```
priceList <- data.frame(aaa = rnorm(100, 100, 10), bbb = rnorm(100, 100, 10), 
                        ccc = rnorm(100, 100, 10), ddd = rnorm(100, 100, 10), 
                        eee = rnorm(100, 100, 10), fff = rnorm(100, 100, 10), 
                        ggg = rnorm(100, 100, 10)
                        )

colDiff <- function(x) 
    {
        Reduce('-', rev(x))
    }

tradeLegsList <- combn(names(priceList), 3, function(x) priceList[x], simplify = FALSE)

tradeList <- lapply(tradeLegsList, colDiff) 
```

据我所知，`Reduce`它并非旨在接受多个论点。

我可以用 , 和一些循环来做这个很长的路要走`2* tradeLegsList[[1]]$bbb - tradeLegsList[[1]]$aaa - tradeLegsList[[1]]$ccc`，但它看起来不像*R 方式*。

有没有办法传入权重向量？

`w = c(-1, 2, -1)`理想情况下，我会传递一个参数，例如`colDiff`（或`Reduce`）函数......或类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T04:42:40.220

确实，`Reduce`不适合允许多个参数，每次减少两个参数。因此，最简单的方法是预乘您正在处理的列表中的元素`Reduce`。

以下是`mapply`在您的`colDiff`函数定义中使用此功能的解决方案。

更改 colDiff 的定义以允许权重向量，并使用`mapply` with应用它`SIMPLIFY = F`。

# 编辑

根据评论，权重取决于列数，不需要`rev`

长度加权

> 长度(x) == 1 -> w = 1
> 长度(x) == 2 -> w = c(-1, 1),
> 长度(x) == 3 -> w = c(-1, 2, - 1),
> 长度(x) == 4 -> w = c(-1, 1, -1, +1)

```
weighting <- function(i){
  switch(i, 1, c(-1,1), c(-1,2,-1), c(-1,1,-1, 1))
}
colDiff <- function(x) 
    {
        w = weighting(length(x))
        Reduce('+', mapply('*', x, e2 = w, SIMPLIFY = F))
    } 
```

然后像这样的东西会起作用

```
tradeList <- lapply(tradeLegsList, colDiff) 
```

您还可以保留函数式编程主题并使用它是with`Map`的简单包装器`mapply``SIMPLIFY = F`

```
colDiff <- function(x) 
        {
            w = weighting(length(x))
            Reduce('+', Map('*', x , e2 = w))
        } 
```

您还可以在函数 colDiff 中预定义权重（这可能更容易）。 `weighting[[2]]`当有 2 列时加权，当有 3 列`weighting[[3]]`时。

```
colDiff <- function(x) 
        {
         weighting <- list(1, c(-1,1), c(-1,2,-1), c(-1,1,-1, 1))             
            w = weighting[[length(x)]]
            Reduce('+', Map('*', x , e2 = w))
        } 
```

# regex - 正则表达式 - 在引号 (") 之间匹配字符串，但在字符串之前不匹配 (\")

> ID：12381127
> 
> 赞同：1
> 
> 时间：2012-09-12T04:14:49.020
> 
> 标签：regex

我需要匹配引号中的字符串，但要确保第一个引号没有被转义。

例如：**第一个 \"string\" 是 "Hello \"World\"!"**
应该只匹配**Hello \"World\"！**

我正在尝试修改`(")(?:(?=(\\?))\2.)*?"`

我尝试添加`[^\\"]`to `(")`，这有点工作，但它只匹配 (") 或所有其他不是 (\") 的字母，我想不出一种修改方法`([\\"]")`以仅匹配 (") 如果它是不是 （\”）

这是我到目前为止所拥有的`([^\\"]")(?:(?=(\\?))\2.)*?"`

我一直在尝试使用这两个页面来弄清楚，但仍然无法得到它。
[正则表达式可以用于这种特定的字符串操作吗？](https://stackoverflow.com/questions/138552/can-regex-be-used-for-this-particular-string-manipulation)
[正则表达式：在引号之间抓取值](https://stackoverflow.com/questions/171480/regex-grabbing-values-between-quotation-marks)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T04:26:38.987

您可以像这样使用负面的外观：

```
(?<!\\)"(.*?)(?<!\\)" 
```

[在 regex101 上](http://regex101.com/r/xN2sI8)查看它的实际效果

第一个匹配组包含：

```
Hello \"World\"! 
```

# html - 如何使用 CSS 制作多选框，但标签显示在顶部而不是左侧？

> ID：12381139
> 
> 赞同：0
> 
> 时间：2012-09-12T04:15:37.903
> 
> 标签：html, css, ruby-on-rails-3

我有一个 Rails 3.2.8 应用程序，我正在尝试自定义 simple_form_for gem 附带的一些类。

我有一个页面，上面有许多多个选择框，为了明智地使用空间，我希望标签出现在选择框的顶部。

我不知道该怎么做。我的 CSS 经验很少，我正在尝试深入研究。我已经使用`float`了一些成功，但是当你使用 simple_form_for 时，你最终会得到一堆`<div>`用于表单元素的嵌套标签。所以我的选择框只浮动到包含`<div>`标签的最左边。我希望它与标签一致。这是一个渲染示例：

```
<div id="attribute_value_list" class="attribute_value_list">
  <div class="control-group select required">
    <label class="select required control-label" for="app_attribute1">
      <abbr title="required">*</abbr>
      Vehicle: Make
    </label>
    <div class="controls">
      <select id="app_attribute1" class="select required select_attribute_value" size="10" name="app[attribute1]">
        ...
      </select>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:27:45.800

您将需要应用 position:relative 到包含的 div （选择一个包含标签和控件的），然后 position:absolute 到标签，以及 left 和 top 以将其放置在您想要的任何位置 - 相对于包含 div .

# kohana-3.2 - 我无法登录 Kohana 3.2 ORM Auth 模块？

> ID：12381141
> 
> 赞同：0
> 
> 时间：2012-09-12T04:15:41.940
> 
> 标签：kohana-3.2, kohana-auth

嗯，那就麻烦了。代码很简单：

```
public function action_index()
{

    $post = $this->request->post();

    if ($post) {    
        // if I type it like this, manually - it will work
        $success = Auth::instance()->login('admin','password');

    }

    if (isset($success) and $success) { echo "Пользователь залогинен"; }

} 
```

不幸的是，它只登录数据库中的第一条记录，这是管理员，因为默认配置在表中，如果我创建一个新用户。像这样：

```
$auth = Auth::instance();
        $user = new Model_User();
        $user->username = "Victor";
        $user->$auth->hash_password('psw123');
        $user->email = "me@email.com";
        $user->save(); 
```

而不是像我说的那样使用它，只使用真实数据作为

`$post["email"] or $post["username"] with $post["password"]`

代码：

```
if ($post) {    
    // the values from posts: 'Victor' or 'me@email.com` & 'psw123'
    $success = Auth::instance()->login('me@email.com','psw123');

} 
```

它不会登录我。

**upd**我无法以管理员身份登录，但如果我将角色更改为`login`（它在数据库中为 1），则一切正常。但是如果角色将被设置为`2`（它是一个`admin`角色）它不会接受我，甚至不创建`Auth`.

```
 $post = $this->request->post();

        $success = Auth::instance()->login($post['email'], $post['pass']);

        if ($success)
        {
            echo "SUCCESS!";
        } 
```

再一次，如果角色为 2（这意味着管理员），这将不是 Success me 而不是`login`角色。

这个麻烦的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:51:21.393

I'm assuming you're using a default ORM auth driver. You don't need to hash your password when saving a new user - it is done automatically by a filter in the model. So saving a new user should look something like that:

```
$user = ORM::factory("user");
$user->username = "Victor";
$user->password = "psw123";
$user->email = "me@email.com";
$user->save(); 
```

# c++ - 单排序链表 - 无限循环

> ID：12381143
> 
> 赞同：1
> 
> 时间：2012-09-12T04:16:34.777
> 
> 标签：c++, linked-list, runtime-error, infinite-loop, sortedlist

我正在使用单个链接列表，我想将它从较低的整数值排序到较高的整数值。我虽然有这个想法，但随后执行进入无限循环，我无法清楚地看到原因。这是我使用的代码的一部分：

```
class Node {

    int data;
    Node* next;

public:

    Node() { };
    void SetData(int aData) { data = aData; };
    void SetNext(Node* aNext) { next = aNext; };
    int Data() { return data; };
    Node* Next() { return next; };
};

class List {

    Node *head;

public:

    List() { head = NULL; };
    void Print();
    void Append(int data);
    void Delete(int data);
};

void List::Append(int data) {

    // Create a new node
    Node* newNode = new Node();
    newNode->SetData(data);
    newNode->SetNext(NULL);

    // Create a temp pointer
    Node *tmp = head;

    if ( tmp != NULL ) {
        // Nodes already present in the list
        // Parse to end of list anytime the next data has lower value
        while ( tmp->Next() != NULL && tmp->Next()->Data() <= newNode->Data() ) {
            tmp = tmp->Next();
        }

        // Point the lower value node to the new node
        tmp->SetNext(newNode);
        newNode->SetNext(tmp->Next());
    }
    else {
        // First node in the list
        head = newNode;
    }
}

void List::Print() {

    // Temp pointer
    Node *tmp = head;

    // No nodes
    if ( tmp == NULL ) {
        cout << "EMPTY" << endl;
        return;
    }

    // One node in the list
    if ( tmp->Next() == NULL ) {
        cout << tmp->Data();
        cout << " --> ";
        cout << "NULL" << endl;
    }
    else {
        // Parse and print the list
        do {
            cout << tmp->Data();
            cout << " --> ";
            tmp = tmp->Next();
        }
        while ( tmp != NULL );

        cout << "NULL" << endl;
    }
} 
```

如果列表无限增加或错误来自 Print 函数，我会感到困惑......对不起，也许是虚拟错误。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T04:21:08.897

```
// Point the lower value node to the new node
tmp->SetNext(newNode);
newNode->SetNext(tmp->Next()); 
```

由于您在第一次通话中覆盖`tmp->next`，您的第二次通话实际上`newNode->next`指向`newNode`，从而创建了一个循环。这会在调用时导致您的无限循环`Print`；-)

解决方案是执行如下操作...

```
Node* _next = tmp->Next();
tmp->SetNext(newNode);
newNode->SetNext(_next); 
```

话虽如此，您的代码仍然被破坏。问题是您没有检查是否需要放在列表的头部*之前；*尝试执行以下操作..

```
if ( tmp ) {
    // Check whether to become new head
    if ( tmp->Data() > newNode->Data() ) {
      newNode->SetNext(tmp);
      head = newNode;
    }
    else {
      // Nodes already present in the list
      // Parse to end of list anytime the next data has lower value
      while ( tmp->Next() && tmp->Next()->Data() <= newNode->Data() ) {
          tmp = tmp->Next();
      }

      // Point the lower value node to the new node
      Node* _next = tmp->Next();
      tmp->SetNext(newNode);
      newNode->SetNext(_next);
  }
}
else {
    // First node in the list
    head = newNode;
} 
```

* * *

旁注：您可以使用初始化列表来重写代码，例如...

```
List() : head(NULL) { }; 
```

此外，如果`NULL`等价于`0`，则可以将形式`X == NULL`和`X != NULL`的条件分别简化为`X`和`!X`。

* * *

请参阅我的[ideone paste](http://ideone.com/3qF6f)以获取带有示例的更正版本。

```
int main() {
    List l;
    l.Append(15);
    l.Append(40);
    l.Append(7);
    l.Print();
    return 0;
} 
```

...产生

> 7 --> 15 --> 40 --> 空

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T04:35:42.170

您未能正确链接两个现有节点。看看你的代码片段：

```
tmp->SetNext(newNode);
newNode->SetNext(tmp->Next()); 
```

例如，如果您有此列表：

头 -> 5

并且您想插入一个编号为 4 的节点，您将拥有：

头 -> 5 <- tmp 新节点 -> 4

使用 tmp->SetNext(newNode)

头（和 tmp）-> 5 -> 4 <- newNode

使用 newNode->SetNext(tmp->Next());

头（和 tmp）-> 5 -> 4 <- newNode

因此，任何遍历列表的尝试都将导致无限循环：

5 4 4 4 4 ......永远

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T04:24:53.913

你的问题是这两行：

```
tmp->SetNext(newNode);
newNode->SetNext(tmp->Next()); 
```

你应该扭转它们。现在，您设置 tmp.next = newNode，然后设置 newNode.next = tmp.next (= newNode)，因此 newNode 指向自身。然后遍历 newNode 会导致无限循环。

# ajax - 在 jsp 页面中加载 s:div 中的图像

> ID：12381151
> 
> 赞同：0
> 
> 时间：2012-09-12T04:17:50.207
> 
> 标签：ajax

我在 jsp 页面中有一个 s:div ajax：

```
<s:div 
    theme="ajax" 
    delay="10000" 
    loadingText="Please Wait" 
    errorText="Problem in loading" 
    href="%{yearlyrequestedQuantity}">
</s:div> 
```

在此我想加载图像而不是“请稍候”文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T04:38:15.113

要显示“等待页面加载”图像，您需要：

1.  每次您的页面加载时，`init()`都会加载一个函数。

    ```
    <body onLoad="init()"> 
    ```

2.  定义一个以`loading`节命名的 div。

    ```
    <div id="loading" style="position:absolute; width:100%; text-align:center;
    top:300px;">
    <img src="loading.gif" border=0></div> 
    ```

loading.gif 图像应该是一个动画 gif，表明页面仍在加载。

1.  在定义 div 后立即放置此 javascript 代码。

    ```
    <script>
    var ld=(document.all);
     var ns4=document.layers;
    var ns6=document.getElementById&&!document.all;
    var ie4=document.all;
    if (ns4)
       ld=document.loading;
    else if (ns6)
       ld=document.getElementById("loading").style;
    else if (ie4)
       ld=document.all.loading.style;
    function init()
    {
    if(ns4){ld.visibility="hidden";}
    else if (ns6||ie4) ld.display="none";
    }
    </script> 
    ```

# android - 无法显示单击以编辑文本的按钮的值

> ID：12381162
> 
> 赞同：0
> 
> 时间：2012-09-12T04:19:30.113
> 
> 标签：android, android-edittext, calculator

我正在创建一种应用程序，其中有许多按钮，每个按钮都有不同的数字（0-9）。当我单击一个按钮时，我想将其编号显示到 edittext 字段。有点像一个计算器。下面是我的代码：

```
public class GameActivity extends Activity {

TextView timer;
Button button1;
EditText et;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gameactivity);
    Intent mIntent = getIntent();
    int seconds = getIntent().getIntExtra("seconds", 0);

    EditText et = (EditText) findViewById(R.id.editText1);
    final TextView timer = (TextView) findViewById(R.id.textViewtimer);
    new CountDownTimer(seconds, 1000) {

         public void onTick(long millisUntilFinished) {
             timer.setText("Seconds remaining: " + millisUntilFinished / 1000);
         }

         public void onFinish() {
             Intent intent = new Intent(GameActivity.this, Main.class);
             startActivity(intent);
         }
      }.start();
}

public void one (View v){
int n = 1;
et.setText(n);
} 
```

这是我得到的错误：

```
09-12 12:21:25.778: E/AndroidRuntime(3658): FATAL EXCEPTION: main
09-12 12:21:25.778: E/AndroidRuntime(3658): java.lang.IllegalStateException: Could not execute method of the activity
09-12 12:21:25.778: E/AndroidRuntime(3658):     at  android.view.View$1.onClick(View.java:2144)
09-12 12:21:25.778: E/AndroidRuntime(3658):     at android.view.View.performClick(View.java:2485)
09-12 12:21:25.778: E/AndroidRuntime(3658):     at android.view.View$PerformClick.run(View.java:9080)
09-12 12:21:25.778: E/AndroidRuntime(3658):     at android.os.Handler.handleCallback(Handler.java:587)
09-12 12:21:25.778: E/AndroidRuntime(3658):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-12 12:21:25.778: E/AndroidRuntime(3658):     at android.os.Looper.loop(Looper.java:123)
09-12 12:21:25.778: E/AndroidRuntime(3658):     at android.app.ActivityThread.main(ActivityThread.java:3683)
09-12 12:21:25.778: E/AndroidRuntime(3658):     at java.lang.reflect.Method.invokeNative(Native Method)
09-12 12:21:25.778: E/AndroidRuntime(3658):     at   java.lang.reflect.Method.invoke(Method.java:507)
09-12 12:21:25.778: E/AndroidRuntime(3658):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-12 12:21:25.778: E/AndroidRuntime(3658):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-12 12:21:25.778: E/AndroidRuntime(3658):     at dalvik.system.NativeStart.main(Native Method)
09-12 12:21:25.778: E/AndroidRuntime(3658): Caused by: java.lang.reflect.InvocationTargetException
09-12 12:21:25.778: E/AndroidRuntime(3658):     at java.lang.reflect.Method.invokeNative(Native Method)
09-12 12:21:25.778: E/AndroidRuntime(3658):     at  java.lang.reflect.Method.invoke(Method.java:507)
09-12 12:21:25.778: E/AndroidRuntime(3658):     at  android.view.View$1.onClick(View.java:2139)
09-12 12:21:25.778: E/AndroidRuntime(3658):     ... 11 more
09-12 12:21:25.778: E/AndroidRuntime(3658): Caused by: java.lang.NullPointerException
09-12 12:21:25.778: E/AndroidRuntime(3658):     at com.dtan.mathwiz.GameActivity.one(GameActivity.java:42)
09-12 12:21:25.778: E/AndroidRuntime(3658):     ... 14 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T04:22:39.037

因为这 -

```
....
int seconds = getIntent().getIntExtra("seconds", 0);

EditText et = (EditText) findViewById(R.id.editText1);           // Already declared in global
final TextView timer = (TextView) findViewById(R.id.textViewtimer);
.... 
```

您声明了全局并使用新声明进行了`EditText`初始化。`onCreate`该方法`one`方法仅考虑`EditText`来自全局对象的 ' 对象。所以，它`(et)`是空的。因此，最好删除其中的声明`onCreate`并执行如下代码 -

```
....
int seconds = getIntent().getIntExtra("seconds", 0);

et = (EditText) findViewById(R.id.editText1);
final TextView timer = (TextView) findViewById(R.id.textViewtimer);
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T04:26:17.007

您得到 NullPointerException 因为您的 EditText 是在“one”方法的范围之外定义的。

为避免此异常在类范围内定义（EditText 等）并在 onCreate 方法中删除定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T04:26:44.010

删除方法中的*声明*。由于这个原因，方法中的*声明*和*初始化*已经成为*本地的。*`EditText et``onCreate()`
**`EditText``onCreate`**

# actionscript - 动态调整动作脚本阶段的大小？

> ID：12381169
> 
> 赞同：1
> 
> 时间：2012-09-12T04:20:24.293
> 
> 标签：actionscript, web

我想建立一个基于 actionscript3 的项目。它需要重新调整其舞台区域的大小以适应客户的网络浏览器的查看大小，或者在客户更改网络浏览器的大小时适应它。

没有固定的纵横比，但有最小（例如 640x480）尺寸和最大尺寸（1600x1000）。当客户的网页窗口长度小于最小尺寸时，该尺寸会出现一个滚动条，因此用户可以使用滚动条看到整个舞台。当客户的网页窗口尺寸大于最大尺寸时，会出现flash应用程序在顶部中心。它需要在大多数网络浏览器上工作，包括 IE 6。

当舞台尺寸改变时，舞台上的内容不会缩放。在我的情况下，该项目有几十个视图，每个视图都需要处理尺寸变化并重新排列它们的元素，我认为这将是一项巨大的工作，所以需要任何建议来构建这样的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T04:50:35.960

首先，调整大小将由 JavaScript/CSS 管理，而不是 ActionScript。也就是说，您需要在 ActionScript 中做一些事情来为这种行为做准备。

首先，您提到您不希望 SWF 中的所有内容都随网页缩放。为了应对这种默认行为，您需要更改`scale mode`舞台将使用的：

```
stage.scaleMode = StageScaleMode.NO_SCALE; 
```

我发现使可扩展网站更易于使用的另一件事是将 SWF 的左上角设置为 0,0。默认情况下，如果您放大 SWF，0,0 将保留在同一个位置，其中一些“填充”表示新大小。我的意思是，如果你将 SWF 放大 200 像素，而它最初是 400 像素，0,0 将从左侧下降 100 像素，而不是代表左上角。以下是您可以采取的纠正措施：

```
stage.align = StageAlign.TOP_LEFT; 
```

这两件事将帮助您的嵌入式 SWF 以更符合预期的方式运行，这可能会在整个项目中为您提供帮助。

最后，您提到屏幕上有许多可视对象需要对调整大小的舞台/浏览器窗口做出反应。这很容易使用`Event.RESIZE`. 您可以将侦听器附加到`stage`以处理此事件并将信息传递给反映更改的每个可见对象。

您可以创建一个具有`handleResize()`方法的类，该方法将成为您的视图对象的基类：

```
class ViewComponent extends Sprite
{

    public function handleResize(width:int, height:int):void
    {
        trace(width, height);
    }

} 
```

这些对象中的每一个都可以在另一个管理整体视图的类中列出，如下所示：

```
class ViewManager extends Sprite
{

    public var viewComponents:Vector.<ViewComponent>;

    public function ViewManager(stage:Stage)
    {
        viewComponents = new Vector.<ViewComponent>();
        stage.addEventListener(Event.RESIZE, _manageResize);
    }

    private function _manageResize(e:Event):void
    {
        for each(var i:ViewComponent in viewComponents)
        {
            i.handleResize(e.target.stageWidth, e.target.stageHeight);
        }
    }

} 
```

这样，您可以简单地在 s 中列出您`ViewComponent`的 s，`ViewManager`并通过覆盖在其自己的类中适当地处理每个s `handleResize()`。

# magento - Magento 试图在抛出致命错误的目录中创建 CSV 致命错误：找不到类“Mage_Helper_Data”

> ID：12381171
> 
> 赞同：0
> 
> 时间：2012-09-12T04:20:47.260
> 
> 标签：magento, csv

我有一个创建文件的脚本，目前将其放在媒体文件夹中，但我想将它放在媒体/文件中，所以这是我的代码

$filePath = Mage::getBaseDir('media') 。DS .'文件'。'mycsvfile.csv';

$fileName = 'mycsvfile.csv';

```
 $mageCsv = new Varien_File_Csv();
        $mageCsv->saveData($filePath, $ordersRow);  
        Mage::app()->getFrontController()
                   ->getResponse()
                   ->setRedirect(Mage::helper('adminhtml')->getUrl('mycsvfiles/adminhtml_download/index/', array('file' => $fileName ))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:30:25.427

我在您的代码中看不到任何错误 - 除了

```
$filePath = Mage::getBaseDir('media') . DS .'files'. 'mycsvfile.csv'; 
```

应该是

```
$filePath = Mage::getBaseDir('media') . DS .'files'. DS . 'mycsvfile.csv'; 
```

因为*files*是一个目录。您看到的错误可能是在其他地方抛出的。尝试检查您的 etc 部分 .xml 文件 - 指令**translate** ="label" **module** =" *modulename* " 其中*modulename*是助手别名。前几天我遇到了几个这样的错误。

# asp.net - 当请求具有查询字符串时，Web 服务的缓存不起作用

> ID：12381176
> 
> 赞同：4
> 
> 时间：2012-09-12T04:21:29.027
> 
> 标签：asp.net, web-services, caching, browser-cache, cache-control

我正在尝试实现 Web 服务调用的客户端缓存，并且基于来自 Web 的信息，我能够根据*SetCachingPolicy()*函数来完成它，如下面的*代码 1*所示。

我能够成功地使用 Web 方法 RetrieveX，但不能使用方法 RetrieveY。我注意到 RetrieveX 没有参数，而 RetrieveY 有一个字符串参数，在 Fiddler 下检查时，区别似乎是来自 RetrieveY 的 Web 服务调用的 HTTP GET 请求具有参数的查询字符串。

到目前为止，所有没有查询字符串的 HTTP GET Web 服务调用都在正确地进行缓存，但这个调用中没有查询字符串。

在 Fiddler 下检查表明 RetrieveX 在*输出 1*中具有以下缓存信息，而 RetrieveY 在*输出 2*中具有信息。

这是这种缓存方法的限制，还是我可以做些什么来让 RetrieveY 的客户端缓存工作？

* * *

代码 1：SetCachingPolicy

```
private void SetCachingPolicy()
{
  HttpCachePolicy cache = HttpContext.Current.Response.Cache;
  cache.SetCacheability(HttpCacheability.Private);
  cache.SetExpires(DateTime.Now.AddSeconds((double)30));

  FieldInfo maxAgeField = cache.GetType().GetField(
      "_maxAge", BindingFlags.Instance | BindingFlags.NonPublic);
  maxAgeField.SetValue(cache, new TimeSpan(0, 0, 30));
} 
```

代码 2：RetrieveX

```
[System.Web.Services.WebMethod]
[System.Web.Script.Services.ScriptMethod(UseHttpGet = true)]
public string[] RetrieveX()
{
  SetCachingPolicy();       
  // Implementation details here.
  return array;
} 
```

代码 3：检索

```
[System.Web.Services.WebMethod]
[System.Web.Script.Services.ScriptMethod(UseHttpGet = true)]
public string[] RetrieveY(string arg1)
{
  SetCachingPolicy();       
  // Implementation details here.
  return array;
} 
```

输出 1：RetrieveX 缓存信息

```
HTTP/200 responses are cacheable by default, unless Expires, Pragma, or Cache-Control headers are present and forbid caching.
HTTP/1.0 Expires Header is present: Wed, 12 Sep 2012 03:16:50 GMT

HTTP/1.1 Cache-Control Header is present: private, max-age=30
    private: This response MUST NOT be cached by a shared cache.
    max-age: This resource will expire in .5 minutes. [30 sec] 
```

输出 2：检索缓存信息

```
HTTP/200 responses are cacheable by default, unless Expires, Pragma, or Cache-Control headers are present and forbid caching.
HTTP/1.0 Expires Header is present: -1

Legacy Pragma Header is present: no-cache

HTTP/1.1 Cache-Control Header is present: no-cache
    no-cache: This response MUST NOT be reused without successful revalidation with the origin server. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:18:43.643

我也遇到了这个问题，我想我会分享对我有用的东西。根本问题是响应中没有设置 VaryByParams。如果将此添加到您的 SetCachingPolicy() 方法 RetrieveY 应该开始按预期工作：

```
cache.VaryByParams["*"] = true 
```

# python - 如何在 Django 中创建集成多个应用程序的站点主页？

> ID：12381179
> 
> 赞同：2
> 
> 时间：2012-09-12T04:22:04.170
> 
> 标签：python, django, django-templates, django-views

所以我一直在关注[Django 教程](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)，并成功创建了多个“应用程序”，现在我想开始将它们集成到一个整体网站中（在 Django 中，这似乎被称为一个项目）。

所以这是我的问题：

1.  如何创建一个主要是静态数据（HTML、CSS 和图像）的网站主页，但也包含来自我项目的某些模型的数据？
2.  如何从此主页链接到我的应用程序？因此，如果我有一个名为“polls”的应用程序（如演示中所示），那么链接到投票页面会像链接到一样简单`/polls`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T04:30:33.510

1.  我认为一般的方法是您还必须添加一个应用程序，将所有其他应用程序粘合在一起。因此，如果您需要一个特殊的主页，该主页必须以某种方式对所有其他应用程序具有完全或部分访问权限，您可以为其创建一个应用程序，并将例如您的根 url 指向该应用程序。
2.  之后（取决于您的其他应用程序是否相互共享数据）它真的像你说的那样简单。民意调查应用程序可以`/polls`作为示例访问，具体取决于您在 urlconf 等中如何配置它。

# c++ - 将向量输出到屏幕？

> ID：12381183
> 
> 赞同：1
> 
> 时间：2012-09-12T04:22:47.063
> 
> 标签：c++

你好这是我的第一个问题。我目前正在尝试从文件中输出文本并将其输出到屏幕。我正在使用向量来存储我的字符串。我想知道我可以使用哪些函数来输出向量？

目前我所知道的将文本输出到屏幕的唯一功能是`TextOut()`功能。它使用`LPCTSTR`.

如果没有更好的功能，我该如何将向量转换为 a `LPCTSTR`？或者也许是一个不需要常量变量的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T04:25:30.347

在@john 建议之后

从字符串向量中获取字符串，如下所示：

```
string someString = theVector[0];  //get the first string 
```

从如下字符串中获取 char*：

```
const  char* p = someString.c_str(); 
```

您可以将 char*`TextOutA`作为`LPCTSTR`参数传递给。

# jsf - PrimeFaces 图片上传

> ID：12381187
> 
> 赞同：0
> 
> 时间：2012-09-12T04:23:16.450
> 
> 标签：jsf, primefaces

我正在尝试保存图像文件，但调用不会转到 fileHandler 方法。我们已经在 primefaces 文档中提到的 web.xml 中添加了过滤器。我正在尝试这个[演示。](http://www.primefaces.org/showcase/ui/fileUploadAuto.jsf)我也有 commons-io 和 commons-fileupload。我该如何纠正？

## XHTML 页面

```
<h:form enctype="multipart/form-data">
<p:fileUpload
fileUploadListener="#{fileUploadController.handleFileUpload}"
mode="advanced" update="messages" label="Choose a file"
auto="true" sizeLimit="10485760"
allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
invalidSizeMessage="The maximum file size allowed is 10 Megabytes !"
invalidFileMessage="You are allowed to upload only images !" />
<p:growl id="messages" showDetail="true" life="5000" />
</h:form> 
```

## 豆

```
@ManagedBean(name = "topicUploadBean")
@RequestScoped
public class TopicUploadBean {

    //Primitives
    private static final int BUFFER_SIZE = 6124;

    /** Create a new instance of UploadBean */
    public TopicUploadBean(){
        System.out.println("created FileUploadController instance");

    }

    public void handleFileUpload(FileUploadEvent event){
        ExternalContext extContext = FacesContext.getCurrentInstance().getExternalContext();

        File result = new File(extContext.getRealPath("//WEB-INF//files//"+event.getFile().getFileName()));
        System.out.println(extContext.getRealPath("//WEB-INF//files//"+event.getFile().getFileName()));
        try {
            FileOutputStream fileOutputStream = new FileOutputStream(result);
            byte[] buffer = new byte[BUFFER_SIZE];
            int bulk;
            InputStream inputStream = event.getFile().getInputstream();
            while(true){
                bulk = inputStream.read(buffer);
                if (bulk < 0){
                    break;
                }
                fileOutputStream.write(buffer,0,bulk);
                fileOutputStream.flush();
            }
            fileOutputStream.close();
            inputStream.close();
            FacesMessage msg = new FacesMessage("File Description", "file name: " + event.getFile().getFileName() +" File size: "+ event.getFile().getSize()/1024 +" Kb Content type: "+ event.getFile().getContentType() + " the file was uploaded.");
        } catch(IOException e){
            e.printStackTrace();
            FacesMessage error = new FacesMessage(FacesMessage.SEVERITY_ERROR, " the files were not uploaded!", "");
            FacesContext.getCurrentInstance().addMessage(null, error);
        }
    } 
```

## Web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="3.0"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <display-name>emyed-web</display-name>
    <context-param>
        <param-name>javax.faces.FACELETS_REFRESH_PERIOD</param-name>
        <param-value>1</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.FACELETS_SKIP_COMMENTS</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Production</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.SEPARATOR_CHAR</param-name>
        <param-value>_</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>server</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.VALIDATE_EMPTY_FIELDS</param-name>
        <param-value>false</param-value>
    </context-param>
    <context-param>
        <param-name>primefaces.THEME</param-name>
        <param-value>#{userPreferences.theme}</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.DATETIMECONVERTER_DEFAULT_TIMEZONE_IS_SYSTEM_TIMEZONE</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>com.sun.faces.allowTextChildren</param-name>
        <param-value>true</param-value>
    </context-param>
    <!-- Custom filter to check for user login -->
    <filter>
        <filter-name>EmyEdAccessFilter</filter-name>
        <filter-class>com.zreflect.emyed.filter.EmyEdAccessFilter</filter-class>
    </filter>
    <!-- Filter for uploading files -->
    <filter>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
        <init-param>
            <param-name>thresholdSize</param-name>
            <param-value>10240</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <servlet-name>Faces Servlet</servlet-name>
    </filter-mapping>
    <filter-mapping>
        <filter-name>EmyEdAccessFilter</filter-name>
        <url-pattern>/pages/*</url-pattern>
        <dispatcher>REQUEST</dispatcher>
    </filter-mapping>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <!--servlet> <servlet-name>Resource Servlet</servlet-name> <servlet-class>com.icesoft.faces.webapp.CompatResourceServlet</servlet-class> 
        <load-on-startup>1</load-on-startup> </servlet -->
    <servlet>
        <servlet-name>ImageRenderServlet</servlet-name>
        <servlet-class>com.zreflect.emyed.servlets.ImageRenderServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>DownloadAttachmentServlet</servlet-name>
        <servlet-class>com.zreflect.emyed.servlets.DownloadAttachmentServlet</servlet-class>
    </servlet>

    <!-- Atmos newly added -->
    <servlet>
        <description>MeteorServlet</description>
        <servlet-name>MeteorServlet</servlet-name>
        <servlet-class>org.atmosphere.cpr.MeteorServlet</servlet-class>
        <init-param>
            <param-name>org.atmosphere.servlet</param-name>
            <param-value>com.zreflect.emyed.managedbean.circle.MeteorAtmosphereSharePostServlet</param-value>
        </init-param>
        <init-param>
            <param-name>org.atmosphere.useNative</param-name>
            <param-value>true</param-value>
        </init-param>
        <load-on-startup>0</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>MeteorServlet</servlet-name>
        <url-pattern>/meteor</url-pattern>
    </servlet-mapping>

    <!-- Atmos done -->

    <!--servlet> <servlet-name>Resource Servlet</servlet-name> <servlet-class>org.primefaces.resource.ResourceServlet</servlet-class> 
        <load-on-startup>1</load-on-startup> </servlet> <servlet-mapping> <servlet-name>Resource 
        Servlet</servlet-name> <url-pattern>/primefaces_resource/*</url-pattern> 
        </servlet-mapping -->
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <!--url-pattern>*.iface</url-pattern -->
        <url-pattern>*.jspx</url-pattern>
        <url-pattern>/xmlhttp/*</url-pattern>
        <url-pattern>*.faces</url-pattern>
        <url-pattern>*.jsf</url-pattern>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ImageRenderServlet</servlet-name>
        <url-pattern>/photo/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>DownloadAttachmentServlet</servlet-name>
        <url-pattern>/download/attachment/*</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
    <error-page>
        <error-code>500</error-code>
        <location>/errors/500.xhtml</location>
    </error-page>
    <error-page>
        <exception-type>java.lang.Throwable</exception-type>
        <location>/errors/500.xhtml</location>
    </error-page>
    <!-- error-page> <exception-type>javax.faces.application.ViewExpiredException</exception-type> 
        <location>/errors/viewExpired.xhtml</location> </error-page -->
</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:08:07.337

因为您的托管 bean 是**"topicUploadBean"**，而不是**"fileUploadController"**。请检查您的 bean，或者如果有，也发布您的*fileUploadController bean。*

# php - 自定义表单验证和提交

> ID：12381188
> 
> 赞同：1
> 
> 时间：2012-09-12T04:23:31.283
> 
> 标签：php, javascript, ajax, validation

选择提交按钮时，我运行了表单验证，但我不希望运行默认提交功能。相反，我想运行一个 ajax 发布代码以将数据存储在表单中，并从服务器端发布数据。

我无法找到在哪里取消默认提交并添加 ajax 代码。

这是我的验证码

```
 $("#formEnroll").validate({
    errorElement:"p",
    submitHandler: function(form) {
            var phoneNumber = form.day_phone.value;             
            var phoneParts  = phoneNumber.split("-");
            form.dayArea.value = phoneParts[0];
            form.dayPrefix.value = phoneParts[1];
            form.daySuffix.value = phoneParts[2];               
            form.submit();
    }

}); 
```

这是我要运行的 ajax 代码，而不是默认提交

```
$.ajax({
    type: "POST",
    url: "/php/localProxy.php",
    data: $('#formEnroll').serialize(),
    success: function (response) {
            document.location = 'http://www.xxxx.com/thank-you';

    },
    error: function () {
            alert('There was a problem!');  // handle error
    }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T04:48:16.363

您可以调用 ajax 函数而不是 form.submit(); form.submit(); 将使用默认提交提交您的代码。

```
 $('#formEnroll').on('submit', function(e){
        e.preventDefault(); 

        $(this).validate({
            errorElement:"p",
            submitHandler: function(form) {
                var phoneNumber = form.day_phone.value;             
                var phoneParts  = phoneNumber.split("-");
                form.dayArea.value = phoneParts[0];
                form.dayPrefix.value = phoneParts[1];
                form.daySuffix.value = phoneParts[2];               
                submitform();
            }
        });
    })

    function submitform(){
    $.ajax({
        type: "POST",
        url: "/php/localProxy.php",
        data: $('#formEnroll').serialize(),
        success: function (response) {
                document.location = 'http://www.xxxx.com/thank-you';

        },
        error: function () {
                alert('There was a problem!');  // handle error
        }
    });

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T04:37:10.163

您可以将验证插件包装到通用表单提交函数中以停止标准执行。

```
$('#formEnroll').on('submit', function(e)
{
    e.preventDefault(); // stop form submission

    // Run validation
    $(this).validate({
        errorElement:"p",
        submitHandler: function(form) {
            var phoneNumber = form.day_phone.value;             
            var phoneParts  = phoneNumber.split("-");
            form.dayArea.value = phoneParts[0];
            form.dayPrefix.value = phoneParts[1];
            form.daySuffix.value = phoneParts[2];               
            submitform(); // call your ajax function here
        }
    });
});

function submitform(){
    $.ajax({
        type: "POST",
        url: "/php/localProxy.php",
        data: $('#formEnroll').serialize(),
        success: function (response) {
                document.location = 'http://www.xxxx.com/thank-you';

    },
    error: function () {
        alert('There was a problem!');  // handle error
    }
}); 
```

除了使用事件对象`e`，您还可以`return false;`在`.on`函数末尾停止触发默认事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T05:23:27.617

您可以通过单击提交按钮使用 jquery 中的 click 事件通过 ajax 发送数据，并且该功能应该`return false`通过您可以使用 ajax 发送数据并避免默认提交的方式来避免默认提交。

# jboss - Drools - 更改 Java 编译器级别

> ID：12381190
> 
> 赞同：1
> 
> 时间：2012-09-12T04:23:42.923
> 
> 标签：jboss, drools, rule-engine

我想将 java 编译器级别更改为 1.6，但它似乎对我不起作用。我试图在结果部分使用泛型。

以下是我用来更改编译器级别的代码。

**Drools 版本：5.2.1 GA** * *JDK 版本：1.6* *

```
final Properties properties = new Properties();
properties.setProperty("drools.dialect.java.compiler", "JANINO");
properties.setProperty("drools.dialect.default", "java");
properties.setProperty("drools.compiler.lnglevel", "1.6");

PackageBuilderConfiguration packageBuilderConfiguration =
      new PackageBuilderConfiguration(properties,(ClassLoader[]) null);

final KnowledgeBuilder knowledgeBuilder = KnowledgeBuilderFactory
                .newKnowledgeBuilder(packageBuilderConfiguration); 
```

让我知道我哪里出错了。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:53:24.980

Janino 故意不支持泛型。这似乎是一个有意识的决定，所以新版本不太可能改变。它们也不会支持增强的 for() 循环和枚举，我在 Drools 中也逐渐错过了这两者。

查看[Janino 网页](http://docs.codehaus.org/display/JANINO/Home)，在他们不支持的内容的右下角附近。

如果您从示例中取出“JANINO”行，我会很好奇您是否可以开始使用它们。（默认的编译器是eclipse编译器，至少这是我最后一次检查。

# google-app-engine - 将 google app engine 项目从 eclipse 导入到 intellij

> ID：12381195
> 
> 赞同：2
> 
> 时间：2012-09-12T04:24:07.277
> 
> 标签：google-app-engine, intellij-idea

我正在尝试使用 intellij 来了解开发/维护谷歌应用程序引擎项目是什么感觉。我已经为 eclipse 使用了 GAE 插件几年了，它通常对我来说完美无缺，但我最近听到了很多关于 intellij 的信息，所以我想看看我错过了什么。

我已经阅读了许多网站，这些网站逐步描述了如何在 intellij 中创建新的 GAE 项目，但没有一个网站描述了如何为现有项目创建新的 GAE 项目。我正在苦苦挣扎，我想是一些 intellij 101 主题。我有几个问题要在这里捆绑在一起：

1.  我将 Web/GAE 方面添加到项目中，并指定了适当的 GAE SDK 目录和 appengine 帐户信息。将正确的 SDK jar 与我的项目相关联的正确方法是什么？

2.  IntelliJ 识别出我的 maven 导入并将它们添加到我的外部库中，例如 apache commons、slf4j 等。这些 jar 是如何进入我为项目创建的（爆炸战争）工件的？编译成功后它们会自动复制到那里吗？

3.  我正在使用 JDO，所以我下载了 DataNucleus 插件。如何连接它以增强我的课程？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T05:46:56.323

1.  文件 - 项目结构 - 模块 - AppEngine：右侧是“AppEngine SDK安装目录的路径”。单击右侧的按钮以通过文件选择器选择目录。这是正确的方法——这里 Intellij 将使用您项目中所有需要的 jar，无需手动添加 GAE jar。

2.  文件 - 项目结构 - 神器：你应该在这里有一个战争神器。如果不存在则创建一个 (+)。项目中使用的罐子应该在“可用元素”窗格中。您可以通过在窗格之间拖放它们来添加罐子（如果没有自动添加）。是的，如果 jar 在显示包内容的左侧窗格中，它们将被复制到 war 中。

3.  文件 - 项目结构 - 模块 - AppEngine：选中“为以下类运行增强器..”并选择您的类/包。

# django - Django 应用程序表在管理 UI 中不可见

> ID：12381198
> 
> 赞同：3
> 
> 时间：2012-09-12T04:24:35.543
> 
> 标签：django, django-models, django-admin, django-modeladmin

要点 - 表已从模型成功创建，但在管理 UI 中不可见 - 环境 - Windows 7、Python 2.7、VirtualEnv、SQLite

我在我的 django 应用程序中定义了几个模型。这里是model.py文件的相关内容

```
from django.contrib.auth.models import User, models

class ProviderProfile(models.Model):
    # This field is required.
    user = models.OneToOneField(User)

    # Other fields for Provider here
    number = models.CharField(('Number'), max_length = 30, blank = True)
    street_line1 = models.CharField(('Address 1'), max_length = 100, blank = True)
    street_line2 = models.CharField(('Address 2'), max_length = 100, blank = True)
    zipcode = models.CharField(('ZIP code'), max_length = 5, blank = True)
    city = models.CharField(('City'), max_length = 100, blank = True)
    state = models.CharField(('State'), max_length = 100, blank = True)

    class Admin:
        pass 
```

按照这里的说明 [https://docs.djangoproject.com/en/dev/ref/contrib/admin/#modeladmin-objects](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#modeladmin-objects)，我向这个应用程序添加了一个 admin.py 文件，其中包含以下内容

```
from django.contrib import admin
from UserProfile.apps.ProviderProfile.models import Service, ServiceProvider, ProviderProfile

admin.site.register(Service)
admin.site.register(ServiceProvider)
admin.site.register(ProviderProfile) 
```

[根据这个django 忽略 admin.py](https://stackoverflow.com/questions/4546073/django-ignoring-admin-py)，我还在我的 settings.py 文件中添加了以下内容

```
INSTALLED_APPS = (
        'Path.To.MyApp',
) 
```

现在，当我执行 syncdb 时，django 告诉我它已经创建了表（我使用 SQLiteManager 进行了验证）。不幸的是，我在管理 UI 中看不到它们。我在那里看到其他应用程序的表格。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T04:42:23.213

```
class ProviderProfileAdmin(admin.ModelAdmin):
    pass
admin.site.register(ProviderProfile, ProviderProfileAdmin) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T20:08:06.473

你把`admin.autodiscover()`urls.py放进去了吗？该方法是在您的应用程序中查找 admin.py 文件。

# mongodb - WSO2 数据服务服务器 - 添加新的数据库支持

> ID：12381201
> 
> 赞同：1
> 
> 时间：2012-09-12T04:24:56.300
> 
> 标签：mongodb, wso2, mongodb-java, wso2dss

如何在 2.6.3 版本的 WSO2 数据服务服务器中添加新的数据库支持 (MongoDB)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:14:42.200

如果数据库连接通过 JDBC 公开，则可以将 DSS (2.6.3) 与任何数据库类型一起使用。换句话说，如果您的首选数据库类型公开了一个 JDBC 驱动程序/适配器供用户通过 JDBC 连接到它，那么您可以使用 DSS 将存储在数据存储中的数据公开为 Web 服务。同样，如果 MongoDB 也有一个 JDBC 适配器，那么将它与 DSS 集成不会有任何（或太多:)）问题。但是，在公开平面文件（例如 google 电子表格、excel 表格、csv 文件）时存在一些例外情况，因为 DSS 使用相关的客户端 API（例如 Google gdate 客户端 API、Apache POI 等）连接到这些数据源并提取数据。但是，如果我们考虑一般情况，您需要有一个适配器或类似的机制来通过 JDBC 连接到您的数据源。

但在即将发布的 DSS 版本（v3.0.0）中，计划引入自定义数据源支持，以便您可以轻松地为任何数据源编写适配器并将其与 DSS 一起使用。

问候， 普拉巴斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:19:10.093

我不确定这一点，但我想如果默认情况下不支持，您可以随时下载 MongoDB 的 jar 库并将其放入`CARBON_HOME\repository\components\lib`并重新启动。例如对于mysql，我`mysql-connector-java-5.1.7-bin.jar`在那个文件夹中有。希望这有帮助

# macos - 从命令行（终端）将参数传递给 Package Maker Contents Install Destination

> ID：12381202
> 
> 赞同：0
> 
> 时间：2012-09-12T04:24:57.043
> 
> 标签：macos, command-line, osx-mountain-lion, packagemaker

我正在使用 Mac 10.8 和最新版本的 Package Maker。我的产品目标路径（安装位置）包含我们的产品版本。

`Eg. Test/1.1.0.1/Sample.`

我们已计划使该过程自动化。我们将增加每个自动化的内部版本号。所以我需要在每个自动化中更改目标路径中的版本号。我正在使用以下命令使用终端制作包。

```
PackageMaker –v –d Test.pmdoc –o TestSample.pkg 
```

是否有任何选项可以从此参数传递版本号？我们应该使用预安装脚本来实现它吗？如果 Preinstall Scripts 有任何选项，请提供相同的示例，因为我是 shell 脚本的新手。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:11:44.923

我个人发现这样做更容易：

*   从公共位置复制包文件夹（即/project-redist-master）
*   根据需要修改包内容（见下文）
*   创建包

如果您需要更多个性化，例如包*内*某处的版本号，我发现简单的搜索和替换字符串最方便。例如，您可以写入`___PROJECTVERSION___`使用版本号的任何文本或资源文件（即 pmdoc）。然后，在创建包之前，运行一个小工具（bash 脚本，我个人更喜欢编写 Cocoa 命令行工具）来搜索和替换这些占位符字符串。该工具还会从某个地方获取版本字符串，例如 version.h 标头或源代码管理中的更改列表编号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:40:22.470

PackageMaker 总是有问题，并且在 Mac OS X 10.6 Snow Leopard 中被弃用。

我建议将[pkgbuild 与 productbuild 一起使用](https://stackoverflow.com/questions/11487596/making-os-x-installer-packages-like-a-pro-xcode4-developer-id-mountain-lion-re/11487658#11487658)。

# c++ - 带有 GCC 4.7.0.1 的 Qt 4.8.2 不断崩溃

> ID：12381205
> 
> 赞同：2
> 
> 时间：2012-09-12T04:25:22.347
> 
> 标签：c++, qt

我已经下载了 Qt 4.8.2 库、Qt Creator 2.5.2，并手动安装了带有 w32api 版本 3.13 和 GCC/g++ 版本 4.7.0.1 的 MingW。我的操作系统是 Windows 7 Ultimate x64。

我可以在 Qt Creator 中创建一个示例“Plain C++ 项目”；使用 g++ 编译和运行该控制台应用程序没有任何问题。

但我无法**运行**Qt 应用程序。我使用了 Qt Creator，使用 Creator 的“Qt Gui Application”模板创建了一个虚拟 Qt 应用程序。该项目可以成功编译，没有任何错误或警告。但是当我尝试运行（从`Qt Creator`和`Windows Explorer`）它时，二进制文件不断崩溃。调试和发布版本都会崩溃。它甚至在显示主窗口之前就崩溃了。

MingW`C:\MingW`安装`C:\MingW\bin`在`PATH`. `C:\Qt\4.8.2`Qt安装`C:\Qt\4.8.2\bin`在`PATH`.

我使用 Dependency Walker 分析了生成的 Qt Gui 应用程序输出的 exe，发现它找到了所有必需的 DLL：

*   c:\windows\system32\KERNEL32.DLL
*   c:\windows\system32\MSVCRT.DLL
*   c:\mingw\bin\LIBGCC_S_DW2-1.DLL
*   c:\mingw\bin\LIBSTDC++-6.DLL
*   c:\qt\4.8.2\bin\QTCORE4.DLL
*   c:\qt\4.8.2\bin\QTGUI4.DLL

那么，是什么导致运行时崩溃呢？

**编辑**

我还尝试了 Qt 的示例项目：2dpainting 和地址簿——它们在启动时都崩溃了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T08:13:51.357

您应该使用用于构建应用程序的 MinGW 编译器构建 Qt。GCC 通常对二进制兼容性问题没有 MSVC 敏感，但 Qt 是一个庞大而复杂的框架库。如果有任何东西会暴露这些问题，Qt 可能会在候选名单上。

构建 Qt 非常简单，但它需要很多时间，而且我似乎总是需要制作两三个补丁才能成功构建。

上次我用 MinGW 构建 Qt (4.7.3) 时，我必须制作以下补丁 - 我不确定它们是否仍适用于 Qt 4.8：

*   确保不要在编译器中启用 C++11 模式 - 有几个带有连接字符串文字的宏在新的 C++11 扩展文字语法下会中断
*   MinGW 的某些发行版如何将 Microsoft 扩展整合到其中存在问题`float.h`- 我有时不得不添加以下行：

    ```
    #include_next <float.h> 
    ```

    到 MinGW 特定的末尾，`float.h`以便通用 GCC`float.h`得到正确处理。我必须为 nuwen 4.7.0`lib/gcc/i686-pc-mingw32/4.7.0/include/float.h`和 TDM 4.6.1 32 位发行版执行此操作`lib/gcc/mingw32/4.6.1/include/float.h`（TDM 的 64 位发行版不需要此补丁）。

*   补丁`qmake\Makefile.win32-g++`并`qmake\Makefile.win32-g++-sh`删除`-static-libstdc++`GCC 无法识别的选项（现在错误而不是忽略）

*   补丁将宏中的`mkspecs/win32-g++/qmake.conf`移动到适当的位置：`-Wl,``QMAKE_LFLAGS_EXCEPTIONS_ON``QMAKE_FLAGS`

    ```
    QMAKE_LFLAGS        = -Wl,-enable-stdcall-fixup -Wl,-enable-auto-import -Wl,-enable-runtime-pseudo-reloc
    QMAKE_LFLAGS_EXCEPTIONS_ON = -mthreads 
    ```

*   如果还没有，则复制`make.exe`到`mingw32-make.exe`MinGW 的目录中`bin``mingw32-make.exe`

然后构建 Qt 包括：

```
 set QTDIR=<location of Qt source directory>  # where configure.exe is
  set PATH=%QTDIR%\bin;c:\MinGW\bin;%PATH%
  set INCLUDE=
  set LIB=
  cd %QTDIR%

  mingw32-make confclean    # (this should fail the first time, since there's nothing to clean)
  configure.exe -opensource -debug-and-release -nomake examples -nomake demos -nomake tests -platform win32-g++  # and accept the GPL license
  mingw32-make 
```

这需要一段时间......希望没有其他需要修补。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:37:46.960

我也遇到了这个问题。我是一个 Qt n00b，并且在安装 Qt 库时，“我已经安装了 Mingw，所以我跳过安装 Qt 附带的 Mingw”。这给了我问题。安装 Qt 附带的 mingw 时，一切正常。

所以我对任何在谷歌上搜索这个问题的人的建议（就像我一样）是不要使用你已经安装的 Mingw，而是使用 Qt 安装一个并使用它（否则你必须在你的 Mingw 中构建 Qt 库，就像 Michael 的回答一样毛刺）

# c# - 从数学表达式创建二叉树

> ID：12381210
> 
> 赞同：5
> 
> 时间：2012-09-12T04:26:02.193
> 
> 标签：c#

我有这样的表达`((2+8)*8)-(5*(5+2)) Or + 2 + 1 1`。我想在其中制作一棵二叉树。

```
 +
 / \
2   +
   / \
  1   1 
```

我怎样才能制作这个二叉树？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-12T05:07:26.897

我有一个类似的项目，我就是这样做的：

1.  标记字符串。看看每个符号是什么。例如，该列表可能包含：

    ```
    '(' 打开括号
    '11' 号码
    '+' 运算符等
    ```

2.  将表达式转换为[后缀](http://en.wikipedia.org/wiki/Reverse_Polish_notation)（或前缀，如果需要）表示法。可以做到这一点的一种算法称为[Shutting Yard 算法](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)。后缀表示法的优点是您可以使用基于堆栈的方法（或二叉树，如果需要）更容易地评估表达式。

3.  计算后缀表达式。您可以通过两种方式进行操作，二叉树和堆栈。

### 堆栈评估：

您以后缀表示法转换的示例表达式将如下所示：

```
2 8 + 8 * 5 5 2 + * - 
```

评估工作是这样的：当你遇到一个数字时，将它压入堆栈。当遇到运算符时，从栈中弹出 2 项，进行计算，并将结果压入栈中。最后，您应该得到最终结果。

对于上面的例子，这就是我们要做的：

```
Push 2 [Stack content: 2]
Push 8 [2 8]
Pop 2 and 8 []
Push 2+8 [10]
Push 8 [10 8]
Pop 10 and 8 []
Push 10*8 [80]
Push 5 [80 5]
Push 5 [80 5 5]
Push 2 [80 5 5 2]
Pop 2 and 5 [80 5]
Push 2 + 5 [80 5 7]
Pop 7 and 5 [80]
Push 7 * 5 [80 35]
Pop 80 and 35 []
Push 80 - 35 [45]
Final result is 45. 
```

### 二叉树

我就是这样做的：就像基于堆栈的方法一样，使用一堆节点。当您遇到运算符时，您会从堆栈中弹出 2 个项目，但不是评估，而是使用该运算符创建一个节点，并使其成为 2 个弹出项目的父节点。然后将节点推回堆栈。

这种方法的缺点是您有一个额外的步骤：创建树。

### 最后的笔记

这是我会使用的方法。也许有比这更有效的方法，但这就是我的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T00:42:37.137

这是用于从中缀字符串[创建二进制表达式树的 C++ 代码。](http://cplusplus.kurttest.com/notes/stack.html#binary-expression-tree)

# php - print_r 和 var_dump

> ID：12381216
> 
> 赞同：-1
> 
> 时间：2012-09-12T04:26:39.077
> 
> 标签：php

我注意到每次我使用`print_r`一些数组时，我都无法正确获得显示样式，我的意思是它在浏览器客户端视图中仅显示在一行中。您是否有任何工具、方法或任何方法可以帮助以可读的格式更好地显示它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T04:28:09.613

尝试

```
echo'<pre>';
print_r();
echo'</pre>'; 
```

它会给你一个格式良好的输出

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T04:47:29.500

以管理良好的方式输出数组，html标签`<pre>`很有用尝试

```
<pre>
<?php print_r() ?>
</pre> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-07T19:10:19.377

这个问题也让我很沮丧，每次调试我都会写 3 行代码......

```
echo '<pre>';
print_r($array);
echo '</pre>'; 
```

最后我只写了一个函数（print_a）来为我做这件事。多年来，此功能已扩展，我向您介绍 print_r 类固醇。

![print_a 的示例输出](../Images/bcacaaedf7849f0204bd480f0459b539.png)

如果我进行任何更新或者您有任何要添加的内容，我会在此处发布 - [https://github.com/MikeGarde/smarter-js/blob/master/dev/php/debug.php](https://github.com/MikeGarde/smarter-js/blob/master/dev/php/debug.php)

```
/**
 * Like print_r() but so much better! Removes HTML formatting from an array while using Google Prittify.
 *
 * @author  Mike Garde
 *
 * @param array    $array   Array you want to see.
 * @param boolean  $die     Should this kill the process when done?
 * @param boolean  $return  Do you want this echoed or returned
 *
 * @return string  $string  A view of an array but formatted for easy reading via HTML.
 */
function print_a($array=false, $die=true, $return=false) {

    if(!$return)
        $return = 0;

    if(!$array && !$return)
        $array = $GLOBALS;

    if(!$return) {
        $in = '';
        $dent = '    ';
    } elseif($return) {
        $in = str_repeat(' ', ($return*4));
        $dent = str_repeat(' ', ($return*4)+4);
    }
    $indent = $in.$dent;
    unset($dent);

    $result = ($return) ? ' ' : $in;
    $result.= ((is_array($array)) ? 'Array' : 'stdClass Object')." (\n";
    foreach($array as $key => $value) {

        $result.= $indent.'['. $key .'] => ';

        if(is_array($value) || is_object($value))
            $result.= print_a($value, false, $return+1);
        elseif(strlen($value) == 0)
            $result.= 'null';
        elseif(preg_match("/^[0-9]+$/", $value))
            $result.= $value;
        elseif(preg_match("/[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}/", $value))
            $result.= '<span title="'.date("D, M j, Y, g:i a", strtotime($value)).' | '.clean_time_diff($value).'">'.$value.'</span>';
        else {
            $value = addcslashes(htmlspecialchars($value), '\'');

            if(strlen($value) > 240) {
                $value = str_replace(array("\n", "\r"), array('<br />', ''), $value);
                $result.= '<details><summary>\''.rtrim(substr($value, 0, 80), '\x92').'\'</summary>\''.$value.'\'</details>';
            } else {
                $result.= '\''.$value.'\'';
            }
        }
        $result.= "\n";
    }
    $result.= $in.')';
    $result = str_replace(array('    ', "\t"), '&nbsp;&nbsp;&nbsp;&nbsp;', $result);

    if(!$return) {
        $string = '<script src="//google-code-prettify.googlecode.com/svn/trunk/src/prettify.js"></script>'.
                  '<script src="//google-code-prettify.googlecode.com/svn/trunk/src/lang-css.js"></script>'.
                  '<link rel="stylesheet" type="text/css" href="//google-code-prettify.googlecode.com/svn/trunk/src/prettify.css">'.
                  '<link href="//fonts.googleapis.com/css?family=Ubuntu+Mono" rel="stylesheet" type="text/css">'.
                  '<style>'.
                  'pre { background-color: #fff; font-family: \'Ubuntu Mono\', sans-serif; }'.
                  'li.L0, li.L1, li.L2, li.L3, li.L5, li.L6, li.L7, li.L8 { list-style-type: decimal; }'.
                  'ol { padding: 0 0 0 45px; }'.
                  'details, details summary { display: inline-block; }'.
                  'details[open] summary span { display: none; }'.
                  '</style>'.
                  '<pre class="prettyprint linenums">'. $result .'</pre>'.
                  '<script>prettyPrint();</script>';
        echo $string;

        if ($die) die();

    } else {
        return $result;
    }

}

/**
 * Called by preg_replace_callback
 *
 * @param array  $matches
 */
function addslashes_2_regex($matches){
    return ' => \''.addslashes($matches[1])."'\n";
}

/**
 * Returns an easly readable time difference.
 *
 * @author  Mike Garde
 *
 * @param string  $start  Start time OR previously calculated difference
 * @param string  $end    End time OR leave blank if using previously calculated difference
 *
 * @return string Clean and readable difference in time
 *
 *
 * @example echo clean_time_diff(strtotime('-8 hours -31 minutes'));
 * @example echo clean_time_diff('2013-05-03 10:15:41');
 * @example echo clean_time_diff('2015-01-01 00:00:00', '2013-05-03 10:15:41');
 */
function clean_time_diff($start, $end=false){

    if(!is_int($start)) $start = strtotime($start);
    if(!is_int($end)) $end = strtotime($end);

    $diff   = (($end == false) ? time() : $end) - $start;
    $tense  = ($diff > 0) ? 'ago' : 'in the future';
    $diff   = abs($diff);
    $return = '';

    // Now
    if($diff == 0)
        return 'now';

    // Seconds
    if($diff < 60) {
        $return = $diff.' second'. (($diff==1) ? '' : 's');

    // Minutes
    } elseif($diff < 3600) {
        $minutes = round($diff / 60);
        $return = $minutes .' minute'. (($minutes==1) ? '' : 's');

    // < 4 Hours
    } elseif($diff < 14400) {
        $hours = floor($diff / 3600);
        $minutes = round((($diff / 3600) - $hours) * 60);
        $append = ($minutes > 0) ? ', '.$minutes.' minute'.(($hours==1) ? '' : 's') : '';
        $return = $hours.' hour'.(($hours==1) ? '' : 's').$append;

    // Hours
    } elseif($diff < 86400) {
        $hours = round($diff / 3600);
        $return = $hours .' hours';

    // < 4 Days
    } elseif($diff < 345600) {
        $days = floor($diff / 86400);
        $hours = round((($diff / 86400) - $days) * 24);
        $append = ($hours > 0) ? ', '.$hours.' hour'.(($hours==1) ? '' : 's') : '';
        $return = $days.' day'.(($days==1) ? '' : 's').$append;

    // Days
    } elseif($diff < 2592000) {
        $days = round($diff / 86400);
        $return = $days.' day'.(($days==1) ? '' : 's');

    // < 4 Months
    } elseif($diff < 10511769) {
        $months = floor($diff / 2627942);
        $days = round((($diff / 2627942) - $months) * 30.416);
        $append = ($days > 0) ? ', '.$days.' day'.(($days==1) ? '' : 's') : '';
        $return = $months.' month'.(($months==1) ? '' : 's').$append;

    // Months
    } elseif($diff < 31536000) {
        $months = round($diff / 2627942);
        $return = $months.' month'. (($months==1) ? '' : 's');

    // Years
    } else {
        $years = floor($diff / 31536000);
        $months = round((($diff / 31536000) - $years) * 12);
        $append = ($months > 0) ? ', '.$months.' month'.(($months==1) ? '' : 's') : '';
        $return = $years.' year'.(($years==1) ? '' : 's').$append;

    }
    return $return.' '.$tense;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T04:30:57.180

我喜欢创建一个名为 pr 的包装函数，它在 print_r 的输出之前和之后插入一个 pre 标记

IE

```
function pr($variable) {
    echo '<pre>';
    print_r($variable);
    echo '</pre>';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T04:30:30.053

```
echo'<pre>';
print_r();
echo'</pre>'; 
```

或者，如果您没有其他要输出的内容：

```
header("Content-Type: text/plain");
print_r(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T04:38:47.330

这是因为浏览器在呈现文本时会将空格剥离为单个空格，但您不需要像其他人建议的那样需要三行：

```
echo '<pre>', print_r($var, true), '<pre>'; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-29T00:21:45.327

我用：

```
function view($object) {
   $object = print_r($object, true);
   $lines = explode("\n", $object);

   echo '<pre class="prettyprint linenums"><ol class="linenums">';
       foreach ($lines as $line ) {
           $output = preg_replace('"\[([^;]*)\]"', '<span class="assoc">$0</span>', $line);
           $output = preg_replace('"\=\>"', '<span class="tag">$0</span>', $output);
           echo "<li><span>$output</span></li>";
       }
   echo'</ul></pre>';
} 
```

然后我对其进行一些样式设置...这是我的 CSS：

```
.tag { color: #aaaaaa; }
.assoc { color: teal; }

.prettyprint {
padding: 8px;
background-color: #f7f7f9;
border: 1px solid #e1e1e8;
}
.prettyprint.linenums {
-webkit-box-shadow: inset 60px 0 0 #fbfbfc, inset 61px 0 0 #ececf0;
-moz-box-shadow: inset 60px 0 0 #fbfbfc, inset 61px 0 0 #ececf0;
box-shadow: inset 60px 0 0 #fbfbfc, inset 61px 0 0 #ececf0;
}

ol.linenums {
margin: 0 0 0 53px;
color: #aaaaaa;
}

ol.linenums li > span {
padding-left: 12px;
color: #666666;
text-shadow: 1px 1px 1px white;
line-height: 20px;
text-shadow: 0 1px 0 #fff;
} 
```

# java - 如何使用 Java 纠正 ArrayList 中的覆盖结果？

> ID：12381224
> 
> 赞同：0
> 
> 时间：2012-09-12T04:27:15.523
> 
> 标签：java, mysql

如何纠正 ArrayList 中的覆盖结果？
在我的数据库中有一张表

```
Course

code    cname
 j1      java
 f1      flex 
```

我正在使用下面的代码在 java 程序中获取这些值。

```
------
------
ArrayList<CourseBean> al=new ArrayList<CourseBean>();
ResultSet rs=st.executeQuery("select cname from Course where code IN ('j1','f1')");

while(rs.next())
{
  CourseBean cb=new CourseBean();//Hear CourseBean have setter getter methods of cname                   

  cb.setCname(rs.getString("cname");
  al.add(cb);

} 
```

但我得到了 ANS：

```
flex
flex 
```

但实际上 ANS ：

```
java
flex 
```

有什么解决办法吗？

# python - 卸载源码编译的python

> ID：12381228
> 
> 赞同：1
> 
> 时间：2012-09-12T04:27:56.837
> 
> 标签：python, centos

我的 Centos 安装了两个 python2.7。我想删除一个。我怎样才能做到这一点？请注意，这两个版本都是从源代码构建的 我已经查看了[Uninstall python built from source?](https://stackoverflow.com/questions/3544378/uninstall-python-built-from-source) 但它只谈到了 Ubuntu 中的卸载。

# java - 我如何摆脱这些关于枚举的警告？

> ID：12381229
> 
> 赞同：0
> 
> 时间：2012-09-12T04:27:56.140
> 
> 标签：java, generics, enums, warnings

我想摆脱这些关于未经检查的转换和参数化的警告而不压制它们。

```
interface Switch {
    void toggle();
}
enum A implements Switch {
    a1,a2;
    @Override public void toggle() {
        state=!state;
    }
    boolean state;
}
enum B implements Switch {
    b1,b2;
    @Override public void toggle() {
        state=!state;
    }
    boolean state;
}
public class Warnings {
    public static void main(String[] args) {
        Class<? extends Enum>[] enums=new Class[]{A.class,B.class};
        for(Class<? extends Enum> clazz:enums)
            try {
                Enum s=Enum.valueOf(clazz,args[0]);
                ((Switch)s).toggle();
            } catch(IllegalArgumentException eee) {}
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:01:46.153

不要混合使用数组和泛型。它们不能很好地协同工作，因为 java 中的泛型是使用类型擦除实现的。

这应该有效。

```
interface Switch {
void toggle();
}

enum A implements Switch {

a1, a2;
@Override
public void toggle() {
    state = !state;
}

boolean state;
}
enum B implements Switch {

b1, b2;
@Override
public void toggle() {
    state = !state;
}

boolean state;
}

public class Test {

public static void main(String[] args) {
    List<Class<? extends Switch>> enums = new ArrayList<Class<? extends Switch>>();
    enums.add(A.class);
    enums.add(B.class);

    for (Class<? extends Switch> clazz : enums)
        try {
            Switch s = clazz.getEnumConstants()[0];
            ((Switch) s).toggle();
        } catch (IllegalArgumentException eee) {
    }
} 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T02:54:09.853

你不能不写你自己的`valueOf`。 `Enum`定义为：

```
class Enum<E extends Enum<E>> 
```

并`Enum.valueOf`定义为：

```
public static <T extends Enum<T>> T valueOf(Class<T> enumType,
                                            String name) 
```

请注意递归类型参数化，这意味着您只能`valueOf`使用特定的枚举类（例如`A.class`）调用，但不能使用泛型类调用，因为 a`Class<? extends Enum<?>>`不匹配，因为不假定两个问号表示相同（未知）由编译器键入。

因此，除了使用泛型集合而不是数组之外，您还必须编写自己的`valueOf`方法来接受任何枚举类。

```
public class Warnings {
    public static void main(final String[] args) {
        List<Class<? extends Enum<?>>> enums = new ArrayList<Class<? extends Enum<?>>>();
        enums.add(A.class);
        enums.add(B.class);
        for (Class<? extends Enum<?>> clazz : enums) {
            try {
                Switch s = valueOf(clazz, args[0]);
                s.toggle();
            } catch (IllegalArgumentException eee) {
            }
        }
    }

    private static Switch valueOf(final Class<? extends Enum<?>> enumClass, final String name) {
        Enum<?>[] enumConstants = enumClass.getEnumConstants();
        for (Enum<?> constant : enumConstants) {
            if (constant.name().equals(name)) {
                return (Switch) constant;
            }
        }
        throw new IllegalArgumentException(name + " is not a constant of enum class " + enumClass.getName());
    }
} 
```

# ruby - 如何扩展 redcarpet 以支持自动链接用户提及？

> ID：12381230
> 
> 赞同：7
> 
> 时间：2012-09-12T04:28:08.120
> 
> 标签：ruby, ruby-on-rails-3, markdown, redcarpet

在我的 rails3 应用程序中，我想使用 redcarpet 来处理用户的帖子和用户评论部分。因此，我想扩展 redcarpet 以支持将 @username 转换为指向我网站上用户的链接。我知道 redcarpet 是用 C 编写的，但是有没有简单的方法可以在 ruby​​ 中扩展它？用C编写它有多难？我应该在红地毯之外做这件事吗？

此外，我对 redcarpet 的其他一些扩展很感兴趣，这些扩展将是链接到我的应用程序中其他模型的简写。我还不确定语法，但我猜它类似于 github 处理链接到问题的方式。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-05-10T01:25:13.503

我发现在 Ruby 中为我的 rails 3 应用程序扩展 redcarpet 的解析器非常容易。这一点也不可怕。

首先，首先从 Redcarpet 的 HTML 渲染器派生一个类，并按照文档中的建议覆盖预处理方法。在 Rails 3.2 和 Rails 4 中，这个文件可以放在任何地方，你不需要它。我使用“服务”文件夹来保存这样的代码。

```
# app/services/my_flavored_markdown.rb
class MyFlavoredMarkdown < Redcarpet::Render::HTML
  def preprocess(text)
    text
  end
end 
```

下一步是添加进行所需文本替换的方法。在这里，我使用正则表达式将看起来像“@mention”的文本包装在带有 CSS 类“提及”的 HTML 跨度标记中。

```
# app/services/my_flavored_markdown.rb
class MyFlavoredMarkdown < Redcarpet::Render::HTML

  def preprocess(text)
    wrap_mentions(text)
  end

  def wrap_mentions(text)
    text.gsub! /(^|\s)(@\w+)/ do
      "#{$1}<span class='mention'>#{$2}</span>"
    end
    text
  end

end 
```

您可以轻松地查找用户的个人资料页面并将@mention 包装在锚标记中。就我而言，我还为表情符号和主题标签创建了以相同方式工作的方法，并将这些方法链接在一起。

最后一步是添加一个接受一些文本的帮助程序，创建 Redcarpet 派生类的实例，将文本传递给该类进行处理，然后返回 html 结果。

```
# app/helpers/application_helper.rb
def flavored_markdown_to_html(text)
  renderer = MyFlavoredMarkdown.new()
  # These options might be helpful but are not required
  options = {
    safe_links_only: true,
    no_intra_emphasis: true,
    autolink: true
  }
  Redcarpet::Markdown.new(renderer, options).render(text)
} 
```

在您看来，您可以这样称呼它：

`<%= flavored_markdown_to_html("This is something worth @mentioning") %>`

输出将是：

`This is something worth <span class='mention'>@mentioning</span>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:12:59.723

我曾经尝试过扩展`redcarpet`，但发现它非常困难。如果没有其他依赖项，`redcarpet`我建议您尝试`rpeg-markdown`使用（有点过时的）Ruby gem，提供与优秀[peg-markdown](http://github.com/jgm/peg-markdown)的绑定。

`peg-markdown`是一个以形式语法编写的降价解释器。这意味着很容易用自己的语法扩展它。我已经成功地`peg-markdown`为我自己的项目进行了扩展（请参阅[我的 fork 此处](http://github.com/rekado/peg-markdown)），我发现它比摆弄's 的自定义解析器代码*要简单得多。*`redcarpet`

我还发现`peg-markdown`错误更少。

Ruby 绑定可能必须通过更新 git 子模块来更新。（我打算提交一个拉取请求以更新`rpeg-markdown`到最新版本`peg-markdown`。）

# xml - 错误：无法找到或加载主类 net.sf.saxon.Transform

> ID：12381234
> 
> 赞同：3
> 
> 时间：2012-09-12T04:28:49.400
> 
> 标签：xml, xslt, saxon

**编辑**

我有一个 XSLT 来将我的 xml 转换为 html 格式（我对 XSLT 一无所知，我已经拥有它已经由某人编写了）。

这就是我在命令行中所做的

```
java -Xss2m -Xmx512m -cp <jarfile>.jar net.sf.saxon.Transform <xsltname> <inputfilename> <outputfilename> 
```

用我的 XSLT 转换我的 xml 文件时，我收到以下错误

```
Error: Could not find or load main class net.sf.saxon.Transform 
```

我不知道为什么有人可以帮助我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T07:43:08.397

初步反应：

[你需要准确地告诉我们你在做什么，然后我们就有机会告诉你你做错了什么。

这不是您从命令行调用 Saxon 时遇到的正常错误，因此我怀疑您是从其他应用程序调用它。原因几乎可以肯定是 Saxon JAR 文件不在类路径中（尽管可能是其他一些类似的问题，例如没有加载 JAR 文件的权限）。您设置类路径的方式可能取决于您正在使用的应用程序，例如，如果您运行 Tomcat 与直接从命令行运行，情况就不一样了。]

在提供更多信息后进行了修改：

该错误几乎可以肯定意味着您的路径`<jarfile>.jar`错误。尝试导航到它并复制路径，或使用 shell 自动完成。

# android - android 通过脚本恢复

> ID：12381235
> 
> 赞同：1
> 
> 时间：2012-09-12T04:29:19.883
> 
> 标签：android, recovery, reboot

有没有办法自动重启和恢复备份ROM？

目前我正在使用 CWM 恢复。

我已经可以通过应用程序重新启动以恢复（与此处描述的步骤几乎相同：[Reboot in Recovery Android](https://stackoverflow.com/questions/7111539/reboot-in-recovery-android)）。

但是，一旦它进入 CWM 恢复界面，我就无法控制它。我正在寻找的是当它重新启动到恢复时，它将选择一个预定义的恢复映像并开始从中恢复。这实际上将擦除手机上的所有数据并将其重置为预定义状态。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T06:11:46.213

好吧，您可以使用 Team Win Recovery Projects (TWRP) OpenRecoveryScript ...

可用的脚本选项：[http ://www.teamw.in/OpenRecoveryScript](http://www.teamw.in/OpenRecoveryScript)

更多信息通用 TWRP 信息：[http ://www.teamw.in/project/twrp2](http://www.teamw.in/project/twrp2)

我以前如何使用 TWRP OpenRecoveryScript 的脚本接口的示例：[https ://github.com/JBirdVegas/android_packages_apps_Settings/blob/jb/src/com/android/settings/liquid/installer/OpenRecoveryScriptSupport.java#L265](https://github.com/JBirdVegas/android_packages_apps_Settings/blob/jb/src/com/android/settings/liquid/installer/OpenRecoveryScriptSupport.java#L265)

CyanogenMod gerrit 提交：[http ://review.cyanogenmod.com/#/c/14650/](http://review.cyanogenmod.com/#/c/14650/)

虽然可以检查上次启动的恢复是什么，但我不相信可以查询在运行时安装了什么恢复。

# python - 在 Python 中计算两个字典之间的值

> ID：12381236
> 
> 赞同：3
> 
> 时间：2012-09-12T04:29:30.923
> 
> 标签：python, dictionary

我在python中有两个dict，一个是数量，另一个是价格，两者都有相同的键什么是最好的，并且是计算dict中每个元素的数量*价格的快速方法

例子

```
prices = {'a': '40', 'b': '40', 'c': '35'}
data ={'a': '1', 'b': '2', 'c': '4'} 
```

我想得到260的总和（int）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T04:36:20.920

您可以`sum`像这样使用生成器表达式：

`sum(float(v)*float(prices[k]) for k,v in data.iteritems())`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T04:31:18.837

```
>>> prices = {'a': '40', 'b': '40', 'c': '35'}
>>> data ={'a': '1', 'b': '2', 'c': '4'}
>>> sum(int(prices[x])*int(data[x]) for x in data)
260 
```

# ruby-on-rails - Rails：将参数从一个新的传递到创建

> ID：12381237
> 
> 赞同：0
> 
> 时间：2012-09-12T04:29:37.747
> 
> 标签：ruby-on-rails, controller

我有一个事件控制器，我从另一个控制器（注册）（从注册控制器）重定向到它：

```
format.html { redirect_to new_event_path(:event_count => 15) }

(Event controller)

def new
    logger.info params
    @event = Event.new(:event_count => params[:event_count])
    ......

def create
    @event = Event.new(params[:event])

and inside views/events/new.html.erb
<%= f.hidden_field :event_count %> 
```

但是，当我尝试运行它时，我收到以下消息：

```
unknown attribute: event_count 
```

请注意，当我从新签出日志文件时，我可以看到参数散列在其中 {"event_count":"15"}

请注意，event_count 不在我的事件表中。有什么建议么？

# 更多信息

我的 Event 模型中已经有 event_count 作为虚拟属性：

```
attr_accessible :event_count 
```

这是一个仅在运行时使用的值，从不存储在 DB 中。最初我使用会话变量传递这个值，但我想知道是否有一种更清洁、更安全的方法来完成这项工作。

# 什么有效：

我从 Even 模型中删除了 attr_accessor :event_count 。

在事件控制器中：

```
def new
    @event_count = params[:event_count]
    @event = Event.new

def create
    .....
    @event_count = params[:event][:event_count] 
```

在我的意见/event.html.erb

```
<%= f.hidden.field :event_count, :value => @event_count %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T06:28:51.280

我不确定您要做什么，但是如果您想将其存储`event_count`在数据库中，显然必须将其作为列添加到事件表中。

如果不需要将其存储在数据库中，则必须将`event_count`其作为虚拟属性添加到事件模型中。像这样：

```
class Event < ActiveRecord::Base
  attr_accessor :event_count
  attr_accessible :event_count
end 
```

# python - 在 Google App Engine 中上传图片

> ID：12381238
> 
> 赞同：2
> 
> 时间：2012-09-12T04:29:41.063
> 
> 标签：python, image, google-app-engine, google-cloud-datastore, blobstore

我正在一个网站上工作，用户可以在该网站上上传与某个位置相关的帖子，然后他们可以添加两到三张照片来配合它。我了解如何使用 Datastore 或 Blobstore 进行基本上传，但我想将这些照片链接到帖子和用户，然后能够在连接到帖子和用户的所有页面中显示它们。

这是一般的想法，但更具体地说，我想弄清楚是否只给帖子实体 3 个 db.blob 属性并稍微降低数据成本会更容易，或者是否可以链接Blobstore 实体与我的 Datastore 实体。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T05:15:19.623

这就是[BlobReferenceProprty](https://developers.google.com/appengine/docs/python/datastore/typesandpropertyclasses#BlobReferenceProperty)的用途。您可以将对 blob 的引用添加到模型中，这似乎是您想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T05:39:21.413

这是[上传照片并将其关联到 user 的完整示例](https://developers.google.com/appengine/docs/python/tools/webapp/blobstorehandlers)。

为了关联用户和照片，它使用创建`UserPhoto`链接用户 ID 和照片 blob 键的类。

# java - java中的fopen_s()等价物是什么？

> ID：12381239
> 
> 赞同：1
> 
> 时间：2012-09-12T04:29:46.430
> 
> 标签：java, c++

我想在java中转换这段代码

```
fopen_s(&stream, "path", "w+"); 
```

`w+`打开具有读写功能的空文件。如果给定文件存在，则其内容将被销毁。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T04:45:26.240

nio似乎需要1.7 java，所以我的看法是

```
RandomAccessFile f = new RandomAccessFile(name, "rw");
f.setLength(0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T04:38:49.137

我不是 Java 程序员，但我在网上进行了一次短暂的搜索，似乎 Java 有一个[`RandomAccessFile`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/RandomAccessFile.html)，你用 mode 打开它`"rw"`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T04:42:48.973

真正的等价物是使用[`Files.newByteChannel`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#newByteChannel%28java.nio.file.Path,%20java.nio.file.OpenOption...%29).

```
final SeekableByteChannel channel = Files.newByteChannel(Paths.get("path"),
    StandardOpenOptions.READ, StandardOpenOptions.WRITE,
    StandardOpenOptions.TRUNCATE_EXISTING); 
```

> 和选项确定是否应打开文件进行读取和/或写入`READ`。`WRITE`
> 
> ...
> 
> `TRUNCATE_EXISTING`- 如果存在此选项，则现有文件将被截断为 0 字节大小。当文件只为阅读而打开时，此选项将被忽略。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T04:50:58.157

快速实现您想要的方法：

```
import java.io.*;
// Create a new file output connected to "myfile.txt"
out = new FileOutputStream("myfile.txt");
// Create a new file input connected to "myfile.txt"
in = new FileInputStream("myfile.txt"); 
```

您可能想查看[官方文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/package-summary.html)中的 java.io 包，尤其是[RandomAccessFile 类](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/RandomAccessFile.html)和[本快速指南](http://www.javacoffeebreak.com/java103/java103.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T04:39:18.703

看起来您想要[FileOutputStream](http://docs.oracle.com/javase/6/docs/api/java/io/FileOutputStream.html)或[FileWriter](http://docs.oracle.com/javase/6/docs/api/java/io/FileWriter.html)，具体取决于您要写入的数据类型。它们中的任何一个都可以用文件名实例化。

```
FileOutputStream fis = new FileOutputStream("/path/to/file");
FileWriter fw = new FileWriter("/path/to/file2"); 
```

如果文件已经存在，两者都会破坏文件。（虽然构造函数存在用于追加而不是覆盖）

# php - Mysql意在父子选择视图

> ID：12381241
> 
> 赞同：0
> 
> 时间：2012-09-12T04:29:48.900
> 
> 标签：php, mysql, treeview, parent-child

我有如下表的父子 ID

```
id    name     parent_id
1    parent       0 
2    child-1      1
3    child-1      1 
4    parent2      0
5    child-1      1
6    child-2      4 
```

我需要得到如下结果。

```
 parent
    #child-1
    #child-1
    #child-1
  parent2
    #child-2 
```

这可以在单个查询中完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T04:49:27.833

我*认为*这对你有用，但你没有给我们太多的东西：

在 MySQL 中：`SELECT ... ORDER BY parent_id`

在 PHP 中（这部分是伪代码（ish））：

```
if($parent_id==0) {
    //is a parent; no indent
} else {
    //not a parent; do the indent
} 
```

# android - 可在图像之间绘制的 Android gridview 分隔线

> ID：12381243
> 
> 赞同：0
> 
> 时间：2012-09-12T04:30:04.090
> 
> 标签：android, gridview, divider

我有一个图像网格视图，我需要添加一个可绘制图像作为网格视图中图像之间的分隔符。

谁能帮我添加。？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-12T04:43:23.407

试试这个希望有帮助

**list_item.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:background="@drawable/list_selector">

    <!-- Cell contents -->

</LinearLayout> 
```

**list_selector.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item 
        android:state_selected="true" 
        android:drawable="@drawable/item_border_selected" 
    />
    <item 
        android:state_pressed="true" 
        android:drawable="@drawable/item_border_selected" 
    />
    <item
        android:drawable="@drawable/item_border" 
    />
</selector> 
```

**item_border.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid 
        android:color="@android:color/transparent" 
    />
    <stroke 
        android:width="1px" 
        android:color="@color/list_divider" 
    />
</shape> 
```

**item_border_selected.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid 
        android:color="@color/list_select" 
    />
    <stroke 
        android:width="1px" 
        android:color="@color/list_divider" 
    />
</shape> 
```

**items_view.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<GridView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginLeft="-1px"
    android:layout_marginRight="-1px"
    android:listSelector="@android:color/transparent"
/> 
```

由于所有线条在连接相邻单元格时都会加倍，因此我将分隔线尺寸设为 1px 而不是 1dp，因此在某些屏幕上不会显得太大。此外，我使网格视图具有负边距以隐藏两侧的线条。我希望这对某人有所帮助。从[这里](https://stackoverflow.com/questions/7132030/android-gridview-draw-dividers/7304166#7304166)

# javascript - 在 URL 中传递包含“%”的参数？

> ID：12381244
> 
> 赞同：1
> 
> 时间：2012-09-12T04:30:04.677
> 
> 标签：javascript, jsp, url

例如`something:8000/something.jsp?param1=update&param2=1000&param3=SearchString%&param4=3`，在传递我的网址时，我收到以下错误：

```
Bad Request

Your browser sent a request that this server could not understand. 
```

我知道`SearchString%`我需要将哪个作为参数传递，有问题。那么如何在 URL 中传递一个包含 '%' 的参数呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-12T04:31:58.560

使用 %25 代替 % 在 URL 中 % 作为转义字符具有特殊含义

像 (space) 这样的特殊字符可以像 %20 一样编码（空格/32 的 ascii 代码，十六进制）

因此，百分号本身必须使用 % 的十六进制代码进行编码，恰好是 25

您可以使用[http://www.asciitable.com/](http://www.asciitable.com/)在 hx 列下查找相应的十六进制代码

或者，如果您以编程方式执行此操作（即使用 javascript），您可以使用内置函数`escape()`，如`escape('%')`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-12T04:33:33.880

看到这个：[在 JavaScript 中编码 URL？](https://stackoverflow.com/questions/332872/how-to-encode-a-url-in-javascript)

基本上你需要确保你传递的变量被编码（'%' 字符是 URL 编码中的一个特殊字符）。

任何特殊字符 - %、?、& 等...都需要编码。它们用 '%' 和它们的十六进制数编码。所以'%'应该变成'%25'，'&'变成'%26'，等等。

**更新**：请参阅[何时应该使用转义而不是 encodeURI / encodeURIComponent？](https://stackoverflow.com/questions/75980/best-practice-escape-or-encodeuri-encodeuricomponent)为什么你应该避免使用转义。

# javascript - 在不知道深度或父属性的情况下从对象中删除属性

> ID：12381252
> 
> 赞同：1
> 
> 时间：2012-09-12T04:31:00.463
> 
> 标签：javascript, object, nested

我目前有一个未知深度的嵌套 javascript 对象。该对象是纯粹动态生成的，因此我不知道要删除的属性的父项的名称（如果必须的话，我可以修改一些东西来获取它们，但我试图避免这种情况）。

我目前有一个名为的函数`search_tree(name)`，它搜索对象的所有属性，直到找到一个属性 `name : "name"` ，然后返回该对象以在树的该位置添加数据。

但是，我现在需要从树中删除该对象，但还没有让它工作。我努力了：

```
obj = search_tree(name);
delete obj; 
```

这不起作用，我假设因为 obj 实际上不是树中的对象，而是对它的引用？

```
delete search_tree(name); 
```

也没有结果。这可以通过这种方式完成，还是我需要更改`search_tree`函数以某种方式返回遗产（或者只是制作不同的遗产）？谢谢

**来自 search_tree 的代码**

```
function search_tree(element, matchingName){
     if(element.name == matchingName){
          return element;
      }else if (element.children != null){
            var result = null;
            for(var child in element.children){
                 result = searchTree(element.children[child], matchingName);
            }
            return result;
      } else {
            return null;
      }
} 
```

刚意识到这个功能可能有点不清楚，没有解释。树中的每个对象都有一个称为“children”的子对象，其中将存储任意数量的其他对象。我添加了额外的“子”层，因为这些对象通常具有我不想作为树的一部分搜索的子对象。元素是被搜索的对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T04:40:43.930

您是否要从树中移除对象？这就是你想要做的一切？

如果是这样，则将树的“父”节点存储在搜索中。编写第二个函数——也许`prune_tree`是 ，在其中传入父对象和对象（或具有两者作为属性的对象），然后执行 for ... 搜索父对象。如果 parent[key] === 对象，删除 parent[key];

您现在拥有一个完整的树，其中特定的父对象不再包含该对象（或者您应该）。

鉴于它`search_tree`应该是递归的，再给它一个参数`parent`（一定要考虑到父母是根（因此没有父母）。当你找到你想要杀死的对象时，`return { object : objectNode, parent : parentNode };`

把它放到你的修剪函数中。对 parentNode 的引用意味着当您删除 parentNode.objectNode 时，它​​也会***从***树中删除（因为它毕竟只是一个引用）。

**编辑：**

基于以上：

```
function prune_tree (parent, child) {
    var key = "";
    for (key in parent) { if (parent.hasOwnProperty(key) && parent[key] === child) {
        delete parent[key];
    }
}

function search_tree (name, element, parent) {
    var key = "";
    if (element.name === name) {
        return prune_tree(parent, element);
    } else if (!element.children) {
        return null;
    } else {
        parent = element.children;
        for (key in children) { if (children.hasOwnProperty(key) {
            return search_tree(name, children[key], parent);
        }}
    }
} 
```

我不是 100% 确定你在递归时实际上在做什么（比如你是否依赖于特定的返回值，或者其他什么......我什至不知道是否有多个对象可能在不同的分支上具有相同的名称——包括根节点）。

但是像我在那里的东西应该递归你的树。它设置`parent`为`element.children`（存储孩子的地方），然后循环遍历孩子中的每个对象以再次调用该函数，并传入`parent`下一组。So `element`is 将成为一个子元素，并将`parent`成为`children`持有它的对象。

如果`element.name`与 完全匹配`name`，则调用单独的函数`prune_tree`，并将保存的`parent`元素和当前子元素传递给它`element`。

在 的内部`prune_tree`，只需遍历 的键`parent`，直到找到您要寻找的孩子`element`。然后`delete`它关闭了父母。

这里不应该有任何意外，并且这组特定的函数可能会继续运行，直到每个分支上的每个节点都被访问......所以如果你有超过，比如说，2000节点，您可能需要考虑将其分解为块，否则它将破坏某些浏览器的调用堆栈。假设您只有 1000 个或更少的节点，或者您只针对具有更大堆栈的浏览器，这应该修剪所有具有相同名称的内容。

同样，这一切都归结为这是否是您的预期结果，或者您是否依赖于获取返回值，对它们做一些事情，或者如果您只是希望触发它，将它传递给树的根，并期望净化树枝的功能。

我也不确定你是否想对修剪过的物体做点什么，或者只是为了让一棵树从任何名为“名字”的暴政中清除。

# c# - 我如何使用后台工作人员并以正确的方式向进度条报告？

> ID：12381266
> 
> 赞同：0
> 
> 时间：2012-09-12T04:32:12.453
> 
> 标签：c#

在这种情况下，progressBar 的移动速度比真正的 Dowork 进度更快，然后在 progressChanged 事件中抛出异常，即 progressBar 值超过 100%，那么这里有什么问题我如何以正确的方式计算和报告它？

```
private List<string> webCrawler(string url, int levels , DoWorkEventArgs eve)
        {
            bool already = false;
                HtmlAgilityPack.HtmlDocument doc;
                HtmlWeb hw = new HtmlWeb();
                List<string> webSites;// = new List<string>();
                List<string> csFiles = new List<string>();

                csFiles.Add("temp string to know that something is happening in level = " + levels.ToString());
                csFiles.Add("current site name in this level is : " + url);
                                try
                {
                    doc = hw.Load(url);
                    webSites = getLinks(doc);

                    if (levels == 0)
                    {
                        return csFiles;
                    }
                    else
                    {

                        int actual_sites = 0;
                        for (int i = 0; i < webSites.Count() && i < 20; i++)                         {
                            if ((worker.CancellationPending == true))
                            {
                                eve.Cancel = true;
                                break;
                            }
                            else
                            {

                                string t = webSites[i];
                                                                if ((t.StartsWith("http://") == true) || (t.StartsWith("https://") == true)) // replace this with future FilterJunkLinks function
                                {
                                    for (int e = 0; e < csFiles.Count; e++)
                                    {
                                        if (csFiles[e].Contains(t))
                                        {
                                            already = true;

                                        }
                                    }

                                    if (!already)
                                    {
                                        actual_sites++;
                                        csFiles.AddRange(webCrawler(t, levels - 1,eve));
                                        this.Invoke(new MethodInvoker(delegate { Texts(richTextBox1, "Level Number " + levels + " " + t + Environment.NewLine, Color.Red); }));
                                        worker.ReportProgress(i * 10);
                                                                            }

                                }
                            }
                        }

                        return csFiles;
                    }

                }
                catch
                {
                    return csFiles;
                }

        }

        public void Texts(RichTextBox box, string text, Color color)
        {
            box.SelectionStart = box.TextLength;
            box.SelectionLength = 0;

            box.SelectionColor = color;
            box.AppendText(text);
            box.SelectionColor = box.ForeColor;
        }

        private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            worker = sender as BackgroundWorker;
            webCrawler(guys, 2,e);
        }

        private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            this.progressBar1.Value = e.ProgressPercentage;

        }

        private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {

        }

        private void button1_Click(object sender, EventArgs e)
        {
            backgroundWorker1.RunWorkerAsync();
        } 
```

我在 DoWork 事件中传递了 DoWorkEventsArgs 的变量 e，因此如果我需要取消操作，我可以在 webCrawler 函数中使用工作变量。在 webCrawler 中，我称它为 DoWorkEventArgs 前夕。

问题是向progressBar 的报告不是正确的方法。

尝试报告进度为：

```
for (int i = 0; i < webSites.Count() && i < 20; i++)                         {
                            double incPercent = (1 / webSites.Count()); 
                            if ((worker.CancellationPending == true))
                            {
                                eve.Cancel = true;
                                break;
                            }
                            else
                            {

                                string t = webSites[i];
                                                                if ((t.StartsWith("http://") == true) || (t.StartsWith("https://") == true)) // replace this with future FilterJunkLinks function
                                {
                                    for (int e = 0; e < csFiles.Count; e++)
                                    {
                                        if (csFiles[e].Contains(t))
                                        {
                                            already = true;

                                        }
                                    }

                                    if (!already)
                                    {
                                        actual_sites++;
                                        csFiles.AddRange(webCrawler(t, levels - 1,eve));
                                        this.Invoke(new MethodInvoker(delegate { Texts(richTextBox1, "Level Number " + levels + " " + t + Environment.NewLine, Color.Red); }));
                                        worker.ReportProgress(i * (int)incPercent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T04:42:08.587

```
worker.ReportProgress(i * 10); 
```

只要你有 i > 10（即超过 10 页），你的进度条就会超过 100%。

如果你真的想按百分比来做，我会做这样的事情：

```
double incPercent = (1 / webSites.Count())

.
.
.
.
worker.ReportProgress(i * incPercent ); 
```

作为旁注，您的变量名称和间距似乎..有点偏离

编辑：对不起，当执行两个数字的除法并且您希望结果为双倍时，您必须确保除数或被除数是双倍类型。否则，您正在有效地执行 int / int，这会给您一个 int 返回。您可能知道， int 会截断您的小数点。这就是您在计算中为零的原因。

此外，reportProgress 方法的取值范围为 0 到 100，因此您必须将最终结果乘以 100。

像这样修复您的代码：

```
double incPercent = (1 / (double)webSites.Count())

.
.
.
.
worker.ReportProgress(i * incPercent * 100 ); 
```

# facebook-graph-api - 我试图让所有包含某个字符串的域都无济于事

> ID：12381268
> 
> 赞同：1
> 
> 时间：2012-09-12T04:33:24.253
> 
> 标签：facebook-graph-api, dns, facebook-fql

我试图让所有包含某个字符串的域都无济于事。

我试过了

```
fql?q=SELECT url, id, type, site FROM object_url WHERE strpos(url,'a') >=0 
```

并得到：

```
{
  "error": {
    "message": "Your statement is not indexable. The WHERE clause must contain an indexable column. Such columns are marked with * in the tables linked from http://developers.facebook.com/docs/reference/fql ", 
    "type": "NoIndexFunctionException", 
    "code": 604
  }
} 
```

我试过了

```
fql?q=SELECT domain_name FROM domain WHERE strpos(domain_name,'a') >=0 
```

我得到：

```
{
  "error": {
    "message": "You must specify a domain_id or a domain_name", 
    "type": "NoIndexFunctionException", 
    "code": 604
  }
} 
```

在图形 api 中，没有搜索类型域或仅 url 页面的选项。我需要从 FB 获取域名

首先我应该查询哪个表域或object_url？

# jquery - 防止重复的 ajax 帖子到服务器端的 webmethod

> ID：12381271
> 
> 赞同：0
> 
> 时间：2012-09-12T04:33:50.213
> 
> 标签：jquery, asp.net, ajax, webforms

我正在使用 ASP.Net Web Forms ，我有一个按钮客户端，它通过 jquery ajax 将数据发布到 webmethod 服务器端。我的问题是如何防止 webmethod 收到用户多次单击按钮的多个请求，如果可能的话，我希望此代码位于服务器端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T04:38:22.047

在页面上单击按钮后，将其禁用，以便不会注册第二次单击，然后在收到响应后发送请求并采取适当的操作。

要做到这一点服务器端会很困难，您可能必须序列化请求，然后将每个请求与最近的历史记录进行比较，并确定它是否重复。这可能很困难，因为可能存在合法的重复，并且区分它们可能很困难。

# iphone - CoreText 中的字间距

> ID：12381274
> 
> 赞同：0
> 
> 时间：2012-09-12T04:34:24.783
> 
> 标签：iphone, ios, ipad, core-text

有没有办法在 CoreText 中设置自定义字间距？
我查看了我希望看到的段落属性，但一无所获。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T05:19:16.017

我在这方面没有丰富的经验，但 AFAIK 你无法调整单词之间的间距。所以我可能的解决方案列表是：

*   调整字距值，但这也会调整字母之间的间距，这可能不是您想要的。

*   添加额外的空格。粗略，但您可以通过将单个空格替换为两个来增加单词之间的空格。

*   （真的很高级）开始调整个别字形。我找到的最好的例子是：http: [//invasivecode.tumblr.com/core-text](http://invasivecode.tumblr.com/core-text)大约 2/3 处作者展示了如何访问各个字形并调整它们的设置。

# android - 如何在 480x800 和 1280x760 屏幕上使用不同的字体大小？

> ID：12381277
> 
> 赞同：2
> 
> 时间：2012-09-12T04:34:44.400
> 
> 标签：android, layout, font-size

我已经阅读[了针对不同屏幕尺寸的不同字体大小](https://stackoverflow.com/questions/4713812/different-font-sizes-for-different-screen-sizes)，但我发现这对我来说效果不佳。

我创建了一个`values-hdpi`来定义样式，但我找到了两者`480x800`并`1280x760`使用它——屏幕大小是如此不同！

有没有办法让`480x800`屏幕使用一种字体大小并`1280x760`使用另一种？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T04:41:04.593

是的。

创建特定于屏幕的[尺寸](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)文件，如下所示，

```
values-sw720dp/dimens.xml
values-sw600dp/dimens.xml
values/dimens.xml 
```

第一个适用于 10 英寸平板电脑，第二个适用于 7 英寸平板电脑，最后一个适用于手机。如果这不能为您提供所需的渐变，请阅读[此页面](http://developer.android.com/guide/practices/screens_support.html)以了解针对不同屏幕的其他方法。

在这些文件中，定义一个维度，

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <dimen
        name="my_size">40sp</dimen>
</resources> 
```

根据您的喜好调整每个 dimens.xml 文件中的尺寸值。

现在在你的布局中，

```
<TextView ...
  android:textSize="@dimen/my_size"/> 
```

# php - jQuery - 根据 ID 的值在两个现有元素之间创建新的兄弟元素

> ID：12381279
> 
> 赞同：5
> 
> 时间：2012-09-12T04:34:50.570
> 
> 标签：php, jquery, ajax

我正在创建一个动态事件日历列表，并试图找出一种方法来根据它们的 Id 在两个元素之间添加一个新元素。现有元素有一个被格式化为用作事件日期的 ID。

ID 由 yymmdd 日期创建

例子

```
<li id="120523">
    This would be an event for May 23rd, 2012
</li>

<li id="120525">
    This would be for May 25th, 2012
</li> 
```

我要做的是动态创建一个新事件并将其放置在正确的位置。例如：如果用户为 2012 年 5 月 24 日创建了另一个事件，则应该将它放在两者之间关于 li 的。

它必须是动态的，因为如果列表中有大量事件，每天只有一个事件，它必须抓取 ID 大于它的第一个元素，并且 ID 小于它的第一个元素，并在它们之间创建新元素。

例子：

我正在尝试生成这样的东西：

```
<li id="120504">May 4, 2012<li> 
```

并按 id 以正确的顺序将其放入无序列表中，如下所示：

```
<ul>
<li id="120123">Jan 23, 2012</li>
<li id="120415">April 15, 2012</li>
<li id="120502">May 2, 2012</li>
// new element should go here
<li id="120520">May 20, 2012</li>
<li id="120816">Aug 16, 2012</li>
</ul> 
```

使用 jQuery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:23:25.557

试试这个：http: [//jsfiddle.net/UJdaW/](http://jsfiddle.net/UJdaW/)

```
$(function(){
    $(".date").datepicker();
    $("#add").click(function(){
        var id = parseInt( $.datepicker.formatDate('ymmdd', new Date($(".date").val())));
        var el = $("<li>This would be for " + $(".date").val() + "</li>").attr("id",id)
        var lastLi = null;
        $("li").each(function(){
            var currId = parseInt($(this).attr("id"));
            lastLi = $(this);
            if (currId > id){
                el.insertBefore($(this));
                lastLi=null;
                return false;
            }
        });

        if (lastLi){
            el.insertAfter(lastLi);
        }
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T05:15:54.007

我不太确定你的问题，但就我而言，你想根据它们的 Id 在两个元素之间添加一个新元素......所以你试过 jQuery wrap 在这里找到它[http://api.jquery.com/裹/](http://api.jquery.com/wrap/)

希望这可以帮助...

# facebook - Facebook 点赞数归零

> ID：12381281
> 
> 赞同：3
> 
> 时间：2012-09-12T04:34:54.723
> 
> 标签：facebook

我看过很多有类似问题但没有具体解决方案的帖子。

我的网站上有 38 个赞，有一天它被重置为 0。现在我已经更新了脚本（如 FB 网站上给出的那样），但我失去了所有的赞。

我怎样才能恢复我的喜欢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T09:37:31.343

> 我的网站上有 38 个赞：[http ://www.buildingmanager.com.au](http://www.buildingmanager.com.au)

根据[http://graph.facebook.com/http://www.buildingmanager.com.au/](http://graph.facebook.com/http://www.buildingmanager.com.au/)你现在有 37*股*。

> 有一天它被重置为 0。现在我已经更新了脚本（如 FB 网站上给出的那样），但我失去了所有喜欢的东西。

在您喜欢的按钮代码中，您提供了*不同的 URL*，

```
<div class="fb-like fb_edge_widget_with_comment fb_iframe_widget"
  data-href="http://www.buildingmanager.com.au/sfmportal/" …&gt; 
```

– 并且*该*URL 只有一个共享 ( [http://graph.facebook.com/http://www.buildingmanager.com.au/sfmportal/](http://graph.facebook.com/http://www.buildingmanager.com.au/sfmportal/) )

[通过调试器放置您的基本 URL](https://developers.facebook.com/tools/debug/og/object?q=http://www.buildingmanager.com.au/)表明您正在 a) 重定向到第二个 URL，更重要的是 b) 已将第二个 URL 作为“og:url”元标记的内容。

如果您希望[http://www.buildingmanager.com.au/](http://www.buildingmanager.com.au/)中的点赞可以使用其中任何一个 URL 的“赞”按钮显示 - 那么您必须*将该 URL*指定为“og:url”，这样 Facebook 就知道您了将此视为要喜欢的“实际” Open Graph URL。

如果您不愿意/不能这样做，因为您希望[http://www.buildingmanager.com.au/sfmportal/](http://www.buildingmanager.com.au/sfmportal/)成为您项目的新的实际 URL，那么您现在将有一个新的开始，无论是你喜欢与否;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T04:41:25.067

你确定你身边没有任何改变吗？也许是重定向？Facebook 不太可能将您的点赞数设为零。但是，如果您的 URL 有一个非常轻微的，那么它会。也许您最近安装了一些插件？或移动您的页面/更改帖子的 URL 等。您可以使用[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)上的 Facebook 调试器了解有关您的 URL 的更多信息。希望它有所帮助，因为 Facebook 做这样的事情是不合逻辑的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T14:24:51.813

I had a similar problem with one of my websites.

It was fixed by specifying that "/index.php" part after the ".com" to get the likes/shares back.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-19T11:31:11.913

我曾经有过同样的问题。og:url 中的 url 有**https://...**而 like 按钮元素中的 url 有**http://...**

他们应该匹配。

# php - 如何从 Joomla 视图表单传递数据数组并在 Joomla 控制器中获取数据数组

> ID：12381283
> 
> 赞同：0
> 
> 时间：2012-09-12T04:35:09.860
> 
> 标签：php, arrays, joomla

在`view/default.php`：

```
<form action="<?php echo JRoute::_('index.php?option=com_scheduler&view=report');?>" method="post" name="rform">
<input type="submit" class="button" value="Generate Report" />
<input type="hidden" name="task" value="report.generate" />
<input type="hidden" name="data" value="<?php echo $this->epsiode; ?>" />
</form> 
```

`$this->episode`数据数组在哪里。

在`controllers/report.php`：

```
function generate(){
    $items = JRequest::getVar('data',array(), 'post', 'array');
    print_r($items);
} 
```

输出是

```
Array ( [0] => Array ) 
```

请建议我如何获取数组数据。我正在使用 Joomla 2.5.x 版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T02:18:44.000

尝试这个

```
<?php 
$content = $this->epsiode;
for($i=0;$i<sizeof($content);$i++) { ?>
<input type="hidden" name="data[]" value="<?php echo $content[$i] ; ?>" />
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T06:37:31.893

不清楚隐藏字段数据包含什么，但如果你只是回显一个数组，最终结果并不让我感到惊讶。

我建议其中一种选择（可能有多种解决方案）。

# [序列化](http://php.net/serialize)数组

```
 <input type="hidden" name="data" value="<?php echo serialize(htmlentities($this->epsiode)); ?>" /> 
```

在控制器上，确保对数据进行反[序列化。](http://php.net/unserialize)

# JSON格式

和上面的思路类似，只是用JSON格式来存储数组。检查[json_encode](http://php.net/manual/en/function.json-encode.php)和[json_decode](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T18:23:53.917

在您正在使用的任何控制器中使用`$requestData = JRequest::get('post');`(或相应地)。这应该为您提供从您正在使用的表单发送的所有数据。确保这是您的表单发布到的控制器。Joomla 在从任务重定向到视图时有一些奇怪的行为，这可能会给人一种你在途中丢失数据的印象。`post``get``data`

使用 Joomla 3.1.1

# javascript - Chrome 扩展通知窗口的调试工具

> ID：12381284
> 
> 赞同：4
> 
> 时间：2012-09-12T04:35:14.457
> 
> 标签：javascript, html, google-chrome, google-chrome-extension, google-chrome-devtools

我使用 Chrome 扩展 API 创建了一个通知窗口：

```
var notification = webkitNotifications.createHTMLNotification("notification.html");
notification.show(); 
```

对于我想在通知窗口中运行的所有脚本，还有一个外部 notification.js（因为[清单版本 2](http://developer.chrome.com/extensions/manifestVersion.html)不鼓励内联 javascript）。一切正常，除了我无法打开通知窗口的开发人员工具来检查页面。我可以为背景和弹出页面做到这一点，所以不确定我是否没有找到它，或者我根本无法通过开发人员工具检查通知。我知道我可以在后台和通知之间发送消息，以便输出显示在控制台上，但如果我可以直接检查会很好。

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T08:47:05.187

导航到`chrome://inspect/`，您可以看到所有可以检查的页面。在“扩展”部分下，您应该能够看到您的通知页面并且您可以检查它。

添加此答案以确保完整性，因为@JJin 的答案*可能*以前有效，但在 Chrome 版本 24 和 25 中无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:13:12.687

经过一些试验，我偶然发现开发者工具可用于通知页面。诀窍是

*   首先启动通知窗口并保持打开状态；
*   导航到`chrome://extensions`并应出现在背景页面名称或任何名称`notification.html`旁边， 如屏幕截图所示：`background.html`

![在此处输入图像描述](../Images/ab4bd87d9ca5f2b64694f72c57a054b8.png)

确保通知窗口已打开，否则`notification.html`会消失。

# ember.js - ember.js：选择选项卡并保留内容的正确方法

> ID：12381285
> 
> 赞同：0
> 
> 时间：2012-09-12T04:35:36.177
> 
> 标签：ember.js

我正在尝试使用 emberjs，但我遇到了一些愚蠢的错误。

我没有找到选择标签的好方法。我应该在路线中设置一些变量并在车把中使用 bindAttr 吗？（我试过但没有用）。我需要为需要与模板交互并使用 {{#view}}{{/view}} 的每个元素创建一个 emberjs 视图？

在“导航”出口中，我呈现注册/登录表单，并希望在用户更改所选选项卡时保留填充数据。我怎样才能做到这一点？

这是代码：http: [//jsfiddle.net/alexandrebini/6g7Xu/24/](http://jsfiddle.net/alexandrebini/6g7Xu/24/)

对不起，如果我不清楚，我有点迷茫......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:42:59.117

使用绑定和 Ember 提供了他们的文本字段视图，这些视图非常少......我编辑了你的一些小提琴来解决你的问题，其余的小提琴我认为你可以自己处理，[http://jsfiddle.net/6g7Xu/26/](http://jsfiddle.net/6g7Xu/26/)（编辑了登录部分，使用它来编辑注册视图）

希望这可以帮助 ！

# visual-c++ - 在 ATL 项目中使用 mfc 类库

> ID：12381288
> 
> 赞同：0
> 
> 时间：2012-09-12T04:36:49.103
> 
> 标签：visual-c++, atl

我已经使用 ATL 项目创建了 IE 工具栏，我想对将通过我的工具栏加载到浏览器中的页面进行操作。

谁能告诉我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T06:53:35.260

您必须手动将 MFC 标头添加到您的代码中，请参阅：

*   [ATL 项目中的 MFC 支持](http://msdn.microsoft.com/en-us/library/dd490ke8%28v=vs.100%29.aspx)
*   [我可以将 MFC 支持添加到现有 ATL COM 项目吗](https://stackoverflow.com/questions/3932487/can-i-add-mfc-support-to-an-existing-atl-com-project)
*   [如何在 Visual C++ 中向 ATL 项目添加 MFC 支持](http://support.microsoft.com/kb/173974)

# php - 在javascript函数中使用php变量

> ID：12381293
> 
> 赞同：0
> 
> 时间：2012-09-12T04:37:51.937
> 
> 标签：php, javascript, html

我的问题是我有一个从数据库中检索到的值为 147 的 php 变量 $ba，下面的代码片段不起作用，没有显示图像。如果我添加 $ba=147; 在 fill_div 调用之前它工作得很好。我很困惑为什么当 $ba 从数据库中填充时它不起作用。在这两种情况下，对页面源代码的检查都显示调用被正确填充 fill_div("147");

```
<script type='text/javascript'>
    function fill_div(ba)
    {
        document.getElementById("ba").innerHTML="<img src='admin/images/image.gif'/>"; 
    }
</script>

<script>   
    fill_div("<? echo stripslashes($ba); ?>"); 
</script

<div id="<? echo $ba ?>" style="border:1px solid; width:120px; height:40px"></div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T04:41:02.193

当您需要传递变量时，您将字符串文字传递`"ba"`给`getElementById``ba`

```
document.getElementById(ba).innerHTML="<img src='admin/images/image.gif'/>"; 
```

`$ba`此外，如果其中包含引号，则带斜杠可能不是一个好主意，如果其中`$ba`包含 a `"`，如果未转义，则会导致 JavaScript 出错。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T04:41:19.500

尝试 ..

```
 document.getElementById(ba).innerHTML 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T04:41:08.860

```
document.getElementById("ba") 
```

应该

```
document.getElementById(ba) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T04:43:54.420

尝试将您的 document.getElementById 更改为：

document.getElementById(ba)

如果它有引号（如您的示例代码中所示）“ba”被视为字符串，而不是变量。

# javascript - 为什么不推荐使用`with`？有没有更好的或其他方式“下降”到对象的命名空间？

> ID：12381301
> 
> 赞同：0
> 
> 时间：2012-09-12T04:38:31.380
> 
> 标签：javascript, object, namespaces, scope

来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/with)：

> `with`不推荐使用，并且在 ECMAScript 5 严格模式下被禁止。推荐的替代方法是将要访问其属性的对象分配给临时变量。

这似乎是一个很棒/有用/方便的功能。为什么会被人诟病？还有什么其他方法可以达到这种效果？我不想去：

```
veryLongNS.y = veryLongNS.myFunc(veryLongNS.x);
veryLongNS.z = 6;
veryLongNS.otherFunc();
veryLongNS.a = {
    a:1,
    b:2,
    c:veryLongNS.processThree(3)
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T04:41:51.970

这是一个相关的答案： [JavaScript 的“with”语句是否有合法用途？](https://stackoverflow.com/questions/61552/are-there-legitimate-uses-for-javascripts-with-statement/61676#61676)

另外：http: [//yuiblog.com/blog/2006/04/11/with-statement-considered-harmful/](http://yuiblog.com/blog/2006/04/11/with-statement-considered-harmful/)

以下作为替代方案怎么样？

```
(function(obj) {
    obj.y = obj.myFunc(obj.x);
    obj.z = 6;
    obj.otherFunc();
    obj.a = {a:1,b:2,c:obj.processThree(3)};
})(myAwkwardlyNamedObjectToBeUsedAsANameSpaceThatIWishToModifyAndNotJustRead); 
```

**编辑：**为了清晰和后代，这也是可能的（并且在大多数情况下比上述更可取——我*不*建议在全局范围内执行此操作，但我不建议在全局范围内执行*任何*操作）：

```
function someFunction() {
    // in some function
    var obj = myAwkwardlyNamedObjectToBeUsedAsANameSpaceThatIWishToModifyAndNotJustRead;
    obj.y = obj.myFunc(obj.x);
    obj.z = 6;
    obj.otherFunc();
    obj.a = {a:1,b:2,c:obj.processThree(3)};
    // ... any other stuff in the function
} 
```

# python - 在行的最后一个字符串中找不到正斜杠

> ID：12381304
> 
> 赞同：0
> 
> 时间：2012-09-12T04:38:58.387
> 
> 标签：python

我的代码不是很好，但这是一个非常有趣的问题。在字符串中查找正斜杠时，除了正斜杠在文件的最后一个单词中之外，所有的都可以找到。这是我的代码。

```
#!/usr/bin/python
import sys
if len(sys.argv)!=2:
    print "usage: %s filename\n" % (sys.argv[0]);
    exit(0);
f = open(sys.argv[1]);
lines = [i for i in f.readlines()]
finals = [];
for line in lines:
    words = line.split(",");
    for word in words:
            if word.find("/") != -1:
                    datefixes = word.split("/")
                    if datefixes[2].__len__() == 4:
                            temp = datefixes[2]
                            word = datefixes[0] + "-" + datefixes[1] + "-" + temp[-2:]
            finals += "," + word;
tempstring = ''.join(finals)
finallist = tempstring.split("\r\n")
finalstring = ""
for tmpstrpart in finallist:
    if tmpstrpart != "" or tmpstrpart !="\r\n":
            finalstring += tmpstrpart[1:] + "\r\n"
print finalstring 
```

这是一个示例输入

```
ACPVBF,1930-729,Z729,12/16/2014,6/10/2008,1/5/2003,44-48-46,39-43-41,35-39-37,29-33-31
ACPVGT,1930-729,Z729,25-29-27,19-23-21,14-18-16,7/11/2009,2/6/2004,48-2-0,42-46-44
ACPUQH,1930-729,Z729,32-40-19,26-34-13,21-29-8,14-22-1,9/17/1946,5/13/1942,49-7-36
ACPVOU,1930-729,Z729,42-0-29,36-44-23,31-39-18,24-32-11,19-27-6,15-23-2,9/17/1946 
```

在代码中，这些行用逗号分隔。如果末尾的单词包含 /，则找不到正斜杠。但前提是它在最后。其余的工作正常。

编辑：我目前在这些线上得到的输出是：

```
ACPVBF,1930-729,Z729,12-16-14,6-10-08,1-5-03,44-48-46,39-43-41,35-39-37,29-33-31
ACPVGT,1930-729,Z729,25-29-27,19-23-21,14-18-16,7-11-09,2-6-04,48-2-0,42-46-44
ACPUQH,1930-729,Z729,32-40-19,26-34-13,21-29-8,14-22-1,9-17-46,5-13-42,49-7-36
ACPVOU,1930-729,Z729,42-0-29,36-44-23,31-39-18,24-32-11,19-27-6,15-23-2,9/17/1946 
```

我试图从这些行中获得的输出是：

```
ACPVBF,1930-729,Z729,12-16-14,6-10-08,1-5-03,44-48-46,39-43-41,35-39-37,29-33-31
ACPVGT,1930-729,Z729,25-29-27,19-23-21,14-18-16,7-11-09,2-6-04,48-2-0,42-46-44
ACPUQH,1930-729,Z729,32-40-19,26-34-13,21-29-8,14-22-1,9-17-46,5-13-42,49-7-36
ACPVOU,1930-729,Z729,42-0-29,36-44-23,31-39-18,24-32-11,19-27-6,15-23-2,[9-17-46] 
```

我希望它周围有括号的那个也可以改变。

基于 BrenBarn 的回答的最终工作代码：

```
#!/usr/bin/python
import sys
import re
if len(sys.argv)!=2:
    print "usage: %s filename\n" % (sys.argv[0]);
    exit(0);
f = open(sys.argv[1]);
x = f.read()
f.close()
filename = sys.argv[1]
filename = filename[:-4] + " finished.csv"
f = open(filename, 'w')
f.write(re.sub(r'(\d{1,2})/(\d{1,2})/\d{2}(\d{2})', r'\1-\2-\3', x))
f.close() 
```

感谢所有的帮助。抱歉，我还不能投票。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T05:00:42.440

我不确定问题出在哪里，但我认为只需使用正则表达式就可以更轻松地完成您想要做的事情。

```
>>> print x
ACPVBF,1930-729,Z729,12/16/2014,6/10/2008,1/5/2003,44-48-46,39-43-41,35-39-37,29-33-31
ACPVGT,1930-729,Z729,25-29-27,19-23-21,14-18-16,7/11/2009,2/6/2004,48-2-0,42-46-44
ACPUQH,1930-729,Z729,32-40-19,26-34-13,21-29-8,14-22-1,9/17/1946,5/13/1942,49-7-36
ACPVOU,1930-729,Z729,42-0-29,36-44-23,31-39-18,24-32-11,19-27-6,15-23-2,9/17/1946
>>> print re.sub(r'(\d{1,2})/(\d{1,2})/\d{2}(\d{2})', r'\1-\2-\3', x)
ACPVBF,1930-729,Z729,12-16-14,6-10-08,1-5-03,44-48-46,39-43-41,35-39-37,29-33-31
ACPVGT,1930-729,Z729,25-29-27,19-23-21,14-18-16,7-11-09,2-6-04,48-2-0,42-46-44
ACPUQH,1930-729,Z729,32-40-19,26-34-13,21-29-8,14-22-1,9-17-46,5-13-42,49-7-36
ACPVOU,1930-729,Z729,42-0-29,36-44-23,31-39-18,24-32-11,19-27-6,15-23-2,9-17-46 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T05:11:28.260

我认为您的代码的问题是尾随的新行。我的猜测是每行的最后一个单词都会失败。我建议你在拆分之前做一个 line.strip()

# ipad - iPad safari html5 音频播放

> ID：12381306
> 
> 赞同：1
> 
> 时间：2012-09-12T04:39:02.663
> 
> 标签：ipad, html, audio, safari, nginx

我使用 HTML5 在 iPad 上播放 mp3 文件。

我放了两个音频标签：

1.  [一种使用来自http://www.schillmania.com/projects/soundmanager2/demo/_mp3/office_lobby.mp3](http://www.schillmania.com/projects/soundmanager2/demo/_mp3/office_lobby.mp3)的音频源
2.  另一个来自我的本地 nginx 服务器，mp3 文件是从 [http://www.schillmania.com/projects/soundmanager2/demo/_mp3/office_lobby.mp3下载的](http://www.schillmania.com/projects/soundmanager2/demo/_mp3/office_lobby.mp3)

单击音频播放器控件上的播放按钮后，它们都可以播放。遥控器可以播放；但是我本地 nginx 中的 mp3 无法播放，即使在 mp3 播放完成后，它也总是显示“正在播放...”。

HTML5 代码如下：

```
<p>Remote</p>
<audio controls="controls">
  <source src="http://www.schillmania.com/projects/soundmanager2/demo/_mp3/office_lobby.mp3" type="audio/mpeg" />
  Audio not support!
</audio>
<p>Local Nginx</p>
<audio controls="controls">
  <source src="http://192.168.1.100/office_lobby.mp3" type="audio/mpeg" />
  Audio not support!
</audio> 
```

我想知道为什么两个音频控件的行为不同。是nginx配置问题吗？

![快照](../Images/94752290c30804b06c336cf205207f86.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T02:17:14.413

类似的问题也发生在我身上。

您可以直接在浏览器中查看音频 URL。如果您遇到“403 Forbidden”问题，则表示您的本地 mp3 权限错误。

希望它有帮助。

# asp.net-mvc - 有什么叫做 Execute Non Scalar

> ID：12381310
> 
> 赞同：-2
> 
> 时间：2012-09-12T04:39:47.110
> 
> 标签：asp.net-mvc, ado.net

有什么叫做 ExecuteNonScalar 的吗？在任何编程语言中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T04:44:22.573

不，但是有 ExecuteNonQuery 和 ExecuteScalar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T04:47:06.397

那么在.NET 中有一个名为“ExecuteScalar”的方法。它基本上返回第一个结果行的第一列。

有关更多信息和示例，您可以查看：[链接](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)

# iphone - 标签栏隐藏在基于标签栏的应用程序中

> ID：12381317
> 
> 赞同：1
> 
> 时间：2012-09-12T04:40:58.680
> 
> 标签：iphone, ios, uiviewcontroller, uinavigationcontroller

由于我使用基于选项卡的应用程序启动我的应用程序，现在我想禁用整个选项卡栏，我该如何实现？这是我在 Appdelegate 中的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    UIViewController *viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
    UIViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    UIViewController *viewController3=[[temptable alloc]initWithNibName:@"temptable" bundle:nil];
    UIViewController *viewController4=[[about alloc]initWithNibName:@"about" bundle:nil];
    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2,viewController3,viewController4, nil]; 
    self.window.rootViewController=[self tabBarController];
    //self.window.rootViewController =viewController2;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

我只想隐藏整个标签栏，并希望`viewController2`使用导航控制器作为主页。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T04:47:06.787

尝试使用这两种方法，我用它来隐藏和显示标签栏

```
- (void)hideTabBar {
    UITabBar *tabBar = self.tabBarController.tabBar;
    UIView *parent = tabBar.superview; // UILayoutContainerView
    UIView *content = [parent.subviews objectAtIndex:0]; // UITransitionView
    UIView *window = parent.superview;

    [UIView animateWithDuration:0.5
                 animations:^{
                     CGRect tabFrame = tabBar.frame;
                     tabFrame.origin.y = CGRectGetMaxY(window.bounds);
                     tabBar.frame = tabFrame;
                     //content.frame = window.bounds;
                 }];
}

- (void)showTabBar {
    UITabBar *tabBar = self.tabBarController.tabBar;
    UIView *parent = tabBar.superview; // UILayoutContainerView
    UIView *content = [parent.subviews objectAtIndex:0]; // UITransitionView
    UIView *window = parent.superview;

    [UIView animateWithDuration:0.5
                 animations:^{
                     CGRect tabFrame = tabBar.frame;
                     tabFrame.origin.y = CGRectGetMaxY(window.bounds) - CGRectGetHeight(tabBar.frame);
                     tabBar.frame = tabFrame;

                     CGRect contentFrame = content.frame;
                     contentFrame.size.height -= tabFrame.size.height;
                 }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T04:54:28.457

如果您想保留 UITabBarController 实例并仅全屏显示您添加到 UITabBarController 的视图之一，那么以模态方式在 UITabBarController 上显示视图怎么样？

```
UINavigationController navController = [[UINavigationController alloc] initWithRootViewController:viewController2];
[self.tabBarController presentModalViewController:navController animated:NO]; 
```

# android - 如何为 android 中的微调器创建 9 个补丁图像？

> ID：12381325
> 
> 赞同：0
> 
> 时间：2012-09-12T04:41:26.737
> 
> 标签：android

```
<Spinner 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/spinner"
    android:entries="@array/Nithin"/> 
```

以上是我的 spinner.xml 代码，但我的背景图像不是 9 补丁图像，所以在使用`wrap_content`图像时显示模糊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T06:16:49.150

要在 android 中创建 9patch 图像，您应该使用 draw9patch 工具，该工具在您的 SDK 目录/工具中可用。参考[this](http://developer.android.com/tools/help/draw9patch.html)，希望这会对你有所帮助。

# javascript - Javascript更改li标签文本

> ID：12381326
> 
> 赞同：10
> 
> 时间：2012-09-12T04:41:46.357
> 
> 标签：javascript, html, html-lists

我正在使用以下 HTML：

```
<li id="item1" data="icon: 'base.gif', url: 'page.htm', target: 'Page'">Item 1 Title</li> 
```

我正在尝试将**Item 1 Title**部分更改为其他内容。

我试过使用：

```
document.getElementById("item1").innerHTML = "Item was changed"; 
```

但没有运气。甚至尝试使用：

```
document.getElementById("item1").value = "Item was changed"; 
```

但仍然没有运气。

我只想更改文本并保持其他内容不变。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-12T04:45:33.327

试试这个

```
window.onload = function(){
 document.getElementById("item1").innerHTML = "Item was changed";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T04:55:36.810

您可以在页面加载后创建一个功能和所有功能

```
var changeText = function(text){ 
    document.getElementById("item1").innerHTML = text;
}

window.onload = function() { 
    changeText(' some text '); 
 } 
```

# android - 从 accuweather 获取天气信息源

> ID：12381327
> 
> 赞同：3
> 
> 时间：2012-09-12T04:41:48.797
> 
> 标签：android

我正在开发一个应用程序来显示天气。我想从[accuweather.com](http://www.accuweather.com/)获取数据馈送。我还在 accuweather 购买了高级版本。我尝试了 5 个多小时，但找不到`RSS`获取提要的网址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T14:41:15.767

[http://rss.accuweather.com/rss/liveweather_rss.asp?metric=1&locCode=55116](http://rss.accuweather.com/rss/liveweather_rss.asp?metric=1&locCode=55116)

1.  公制 1 给出摄氏结果
2.  度量 2 给出华氏度结果
3.  根据您的喜好更改邮政编码
4.  将此信息保密；保持安全。他们似乎不想让任何人知道这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T04:54:00.313

[http://rss.accuweather.com/rss/liveweather_rss.asp?locCode=10017](http://rss.accuweather.com/rss/liveweather_rss.asp?locCode=10017)

[http://www.rsssearchhub.com/preview/new-york-ny-accuweather-com-forecast-rss-KPAPDm/](http://www.rsssearchhub.com/preview/new-york-ny-accuweather-com-forecast-rss-KPAPDm/)

以上链接可能会有所帮助，

rsssearchub.com 网站收集了所有的 RSS，就像 RSS 的搜索引擎

我认为这可能会有所帮助

# webchartcontrol - 使用 MsWeb 图表的 AxisLabel 堆积柱形图

> ID：12381330
> 
> 赞同：1
> 
> 时间：2012-09-12T04:41:58.503
> 
> 标签：webchartcontrol

我正在使用 Ms Web Chart 来堆叠柱形图。如果列数 <= 9，则轴标签正确出现。如果超过 9，则标签无法正确出现。

```
for(int pointIndex = 0; pointIndex < 10; pointIndex++)
{
    Chart1.Series["Series1"].Points.AddY(Math.Round((double)random.Next(45, 95),0));
    Chart1.Series["Series2"].Points.AddY(Math.Round((double)random.Next(5, 75),0));
    Chart1.Series["Series3"].Points.AddY(Math.Round((double)random.Next(5, 95), 0));
    Chart1.Series["Series4"].Points.AddY(Math.Round((double)random.Next(35, 95), 0));

    Chart1.Series["Series1"].Points[pointIndex].AxisLabel = "test" + pointIndex;  
}

Chart1.Series["Series1"].ChartType = "StackedColumn";
Chart1.Series["Series2"].ChartType = "StackedColumn";
Chart1.Series["Series3"].ChartType = "StackedColumn";
Chart1.Series["Series4"].ChartType = "StackedColumn"; 
```

如果pointindex小于= 9，那么它会很好，如果它> 9，那么轴标签会正确出现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:38:47.617

```
<AxisX LineColor="64, 64, 64, 64"  Title="Instrument Type" IsLabelAutoFit="true" TitleFont="Microsoft Sans Serif, 15pt, style=Bold" LabelAutoFitStyle="LabelsAngleStep90" Interval="1" > <LabelStyle Font="Microsoft Sans Serif, 7pt, style=Bold" /> </AxisX> 
```

将此添加`LabelAutoFitStyle="LabelsAngleStep90" Interval="1"` 到您的轴信息。您可以查看任意数量的标签

# android - Jelly Bean (4.1) 中的自定义可扩展通知

> ID：12381332
> 
> 赞同：18
> 
> 时间：2012-09-12T04:42:19.717
> 
> 标签：android, android-notifications, android-4.2-jelly-bean

Jelly Bean 添加了对可扩展状态通知的支持。根据[http://developer.android.com/about/versions/jelly-bean.html](http://developer.android.com/about/versions/jelly-bean.html)：

> 除了模板样式之外，您还可以使用任何远程视图创建自己的通知样式。

如何做到这一点？我相信要做到这一点，您需要创建一个自定义[Notification.Style](http://developer.android.com/reference/android/app/Notification.Style.html)。这是一个抽象类，所以我需要对其进行扩展。我找不到任何关于哪些部分需要扩展的文档。

这个[SO question](https://stackoverflow.com/questions/6391870/how-exactly-to-use-notification-builder)提供了一个很好的例子，说明如何将 notificaiton.builder 用于基本通知，我以此为起点。添加

```
.setContent(new RemoteViews(getPackageName(), R.layout.notification)) 
```

为基本通知添加自定义视图，但不可扩展。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-12T05:01:31.430

您需要创建自己的`RemoteViews`，然后表明您希望扩展内容继承您的自定义`RemoteViews`。

```
 RemoteViews expandedView = new RemoteViews(YOUR CONTEXT.getPackageName(), YOUR CUSTOM LAYOUT);
 Notification notification = mBuilder.build();
 notification.bigContentView = expandedView; 
```

请注意，这`bigContentView`就是您要查找的内容。`mBuilder`是一个[Notification.Builder](http://developer.android.com/reference/android/app/Notification.Builder.html)对象。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-14T20:14:26.773

[这里](https://web.archive.org/web/20171215230601/http://falnatsheh.github.io/blog/custom-rich-notification-view-android#)有一个很好的教程，关于如何做到这一点以及如何创建自己的布局。

![在此处输入图像描述](../Images/d3b1102f4a889d1245adc1ae6249d80f.png)

基本上，您需要使用您的布局创建一个 remoteView，然后在 Notification 对象中将其设置为 bigContentView。顺便说一句，确保您还添加了调节器 contentView，因为操作系统在某些情况下会使用较小的 contentView。

# javascript - 检测 iframe 是否跨域的万无一失的方法

> ID：12381334
> 
> 赞同：23
> 
> 时间：2012-09-12T04:42:34.907
> 
> 标签：javascript, html, security, iframe, cross-domain

我正在尝试确定是否有任何 iframe 是跨域的。根据这个问题中接受的答案：[Detect when iframe is cross-domain, then bust out](https://stackoverflow.com/questions/2365822/detect-when-iframe-is-cross-domain-then-bust-out-of-it) it says to put the code access `contentDocument`of iframe in a `try / catch`block. 我在 Chrome 中为跨域 iframe 尝试了这个：

```
try { 
  document.getElementsByTagName('iframe')[0].contentDocument;
} catch(err){
  console.log("called");
} 
```

它仍然抛出跨域错误并且没有捕获错误。

我还尝试检查父页面 url 的协议 + 主机 + 端口是否在`src`iframe 中：

```
function thirdPartyIframe(iframe){
  var url = document.location.protocol + "//" + document.location.hostname + (document.location.port === "" ? "" : ":" + document.location.port);
  var regexp = new RegExp(url.replace(/\//g, "\\/").replace(/\./g, "\\."));
  if (iframe.src === '' || regexp.test(iframe.src)){
    return false;
  } else {
    return true;
  }
} 
```

但这似乎不适用于 Facebook 主页上的第一个 iframe`src`等于（它很长）：

```
"http://www.facebook.com/ai.php?aed=AQLlH2cfdnsnLrDUVyqrQPlWpayw9N09Z_iNuhulevbeEfVa4mcVRcT8cjAZOjQb8y1QXab5Ae3aSEJx49U_Qv35rtSp1VC9cY0_CrpOjMDk40hS_Xm57A996YtRVCcWSuRZ_jZERQ_iA_E4621NAbKHT9dsB7uElkRtTvl5K-zPI0jeH-BEnlZIOXbeEdbRC6qCwoToaltolpe-Ot2KWgkfb_vBZYpzUc3jQoEHzLG6tauO9l_hkXpYpHxnt-KYFKIFZ1PgmrHgb0UcGjeKHl7yBR1AbW2n5XgdgaAhFvBjs5GZlKy566nvl8eLRA60orwkwtWYeN8-gKoAmOLm7-6minsWn8lk1h2Qn3p07HCTSnYHfv1aJ6mF5jmuzP0YYe7Ym9ZbmK-tvax4uPAQJ2OdULilKbEh8M-2V9pVY3AC228OPlrRullZuuOg8DI2A8WeMF-fbbOdOFFVCe5Gj1CaZu3LYXiqdG7mUgY6AEpk9ZzGT4fC2K8DInQo1AypCvzG64C_bEWfODeXe0aGbkWwsUUmO7E5HFg0tvZkK5IAR_xxxQ2rlf5jbcEDo_2gdIDdHe1HT75-SJLUsSA0M8EU01oNNPuWwEC2BW6inepc9QPuqeg42tcEbKLU-rIUnXDBLvgutft8azWPPQ6_LafGjCAmC9uTalagoWLLDMpQOThvPg7YeVd7qg_c9Mzn2GAfuswcxDSxyRIZo9MaOhA6mhfXeE1tmjyBBsMxnx08tO21Jsfgch59fmMxpeJzdsNMPK3FAojfglvCQ2Zrt_6ataexUB4xlM7_PhKrfBPtxb5fe2TE9-nlWruNEpoCrzI05yv4Go3CYEWHob06K_9iICfNVTFkSYGTiJnMXCy_fdgfyzUIn5QJIPRo4-Wnyg444zKAO_nyFW59LqbIanHVfFY6ybiA6KeC3meREWzTPSsrU5d_NbYHlJWb8uPNDR04jaH5e2qiYj3Y8qgLQA5m" 
```

我的函数将其归类为不是第三方 iframe，但当我访问它的`contentDocument`.

我正在寻找一种万无一失的跨浏览器方法来做到这一点。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-12T05:03:11.190

您需要比 try/catch 中的内容多做一点，以处理不同的浏览器并处理浏览器处理跨域访问的不同方式：

```
function canAccessIFrame(iframe) {
    var html = null;
    try { 
      // deal with older browsers
      var doc = iframe.contentDocument || iframe.contentWindow.document;
      html = doc.body.innerHTML;
    } catch(err){
      // do nothing
    }

    return(html !== null);
} 
```

在您的示例中，这将是：

```
var accessAllowed = canAccessIFrame(document.getElementsByTagName('iframe')[0]); 
```

工作演示：http: [//jsfiddle.net/jfriend00/XsPL6/](http://jsfiddle.net/jfriend00/XsPL6/)

在 Chrome 21、Safari 5.1、Firefox 14、IE7、IE8、IE9 中测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-01-27T00:01:22.240

适用于现代浏览器的更短、更易读的功能

```
function canAccessIframe(iframe) {
  try {
    return Boolean(iframe.contentDocument);
  }
  catch(e){
    return false;
  }
} 
```

使用 Chrome 79 和 Firefox 52 ESR 进行测试。

说明：您可以检查任何不可跨域访问的 iframe 属性并转换为布尔值。例如：contentDocument/contentWindow.document/location.href/等。

布尔文档：[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-29T14:56:43.157

这是一个较短的版本，将这两种方法与 ES6 结合在一起。请注意，它仅在您的域和 iframed 域具有相同的安全类型时才有效。在此示例中将 google 链接更改为 http，它将不起作用。

```
let canAccessIFrame = (iframe) => {
       return !!(iframe.contentDocument)
}

let checkIFrameAccess = () => {
        let result = document.getElementById('result')
        let remote = canAccessIFrame(document.getElementById('remote'))
        let local = canAccessIFrame(document.getElementById('local'))

    result.innerHTML = `
        Remote iframe access: ${remote}
        <br>Local iframe access:  ${local}
    ` 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-07T11:35:03.677

我用jquery这样做了。它可能不是 100% 整洁，但对我有用。

```
$(iframe).load(function (e) {
  try
    {
    // try access to check
    console.log(this.contentWindow.document);
    }
  catch (e)
    {
    console.log(e);
    var messageLC = e.message.toLowerCase();
    if (messageLC.indexOf("x-frame-options") > -1 || messageLC.indexOf('blocked a frame with origin') > -1 || messageLC.indexOf('accessing a cross-origin') > -1)
      {
      // show Error Msg with cause of cross-origin access denied
      }
    else
      {
      // Shoe Error Msg with other cause
      }
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-18T16:28:20.570

在加载之前，我的 IFrame 返回一个空字符串时遇到问题。所以我开始使用以下内容：

```
function canAccessIFrame(iframe) {
 try { 
   const doc = iframe.contentDocument || iframe.contentWindow.document;
   const html = doc.body.innerHTML;
   return html !== null && html !== ''
 } catch(err){
   return false
 }
} 
```

# iphone - 为2组经纬度显示不同颜色的注释针

> ID：12381338
> 
> 赞同：0
> 
> 时间：2012-09-12T04:42:51.200
> 
> 标签：iphone

我有 4 个数组，2 个数组由酒店纬度和经度值组成，其余数组由景点纬度和经度值组成。我可以在地图中显示它们。但我无法区分酒店和景点的注释针颜色... ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:18:02.033

我认为您应该在添加到地图视图时使用 settag 进行注释，并且在方法 viewForAnotaion 中，您可以通过使用 if 条件或 switch case 获取 TAG 值来设置不同的图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T05:05:35.170

你可以试试这个：（在这里我相信你可以区分你想要注释的两个不同类型的实体）。

```
MKPinAnnotationView *annView=[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"MyPin"];  
annView.animatesDrop=FALSE;
annView.canShowCallout = YES;
[annView setSelected:YES];

 //YOU CAN CHANGE IMAGE:
if (kSCEntityTypeFirst) {
    annView.image=[UIImage imageNamed:@"SMTL_home_tooltip_red_icon~iphone.png"];
}
else {
    annView.image=[UIImage imageNamed:@"SMTL_home_tooltip_blue_icon~iphone.png"];

}

 //YOU CAN CHANGE COLOR:
if (kSCEntityTypeFirst) {
    annView.pinColor = MKPinAnnotationColorPurple;
}
else {
    annView.pinColor = MKPinAnnotationColorGreen;
} 
```

# php - PHP 搜索产生错误

> ID：12381342
> 
> 赞同：0
> 
> 时间：2012-09-12T04:43:34.140
> 
> 标签：php, mysql, search, mysqli, sql-like

我的网站上有一个搜索字段功能，PHP 代码如下：

```
if(isset($_GET['search_ti']) && $_GET['search_ti'] != "")
{
    $search_ti = preg_replace('#[^a-z 0-9?!-]#i', '', $_GET['search_ti']);

    $sqlCommand = "
    SELECT * FROM page WHERE title LIKE '%$search_ti%' OR body LIKE '%$search_ti%'
    ";

    $result = $mysqli->query($sqlCommand) or die(mysql_error());
    ... 
```

URL 变量`search_ti`是我从 URL 中得到的搜索关键字。例如：

```
searchResult.php?search_ti=home 
```

如果在我的 MySQL 表中找到关键字，则结果显示并且没有错误。

但如果找不到关键字，网络浏览器会生成以下错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '-4,4' at line 1 
```

我的代码有什么问题？

**附加信息：**

完整的 PHP 代码：http: [//jsfiddle.net/eQSZc/](http://jsfiddle.net/eQSZc/)

关键词：家。该错误仅在我的表中未找到该关键字时显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T05:49:12.413

将您更改`pagination_mechanism_and_buttons_variables_for_Search.php`为[http://jsfiddle.net/GsNmw/1/中的那个](http://jsfiddle.net/GsNmw/1/)

`$limit`在您构造和更改之前，我已经添加了以下块`$limit`。

```
$start = ($pn - 1) * $itemsPerPage;

if($start<0){
    $start = 0;
}

$limit = 'LIMIT ' .$start .',' .$itemsPerPage; 
```

这避免了负限制，从而避免了你的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T05:16:51.993

另一种选择是使用**[`PDO`](http://php.net/manual/en/book.pdo.php)**.

```
<?php
$dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass);
$keyword = '%' . search_ti . '%';
$stmt = $dbh->prepare("SELECT * 
                       FROM page 
                       WHERE title LIKE ? OR 
                             body LIKE ?");
$stmt->bindParam(1, $name);
if ($stmt->execute())
{
  while ($row = $stmt->fetch()) 
  {
    print_r($row);
  }
}
?> 
```

这将允许您选择带单引号的记录。

# java - Java：查找用户设置的整数列表中的最大数

> ID：12381346
> 
> 赞同：2
> 
> 时间：2012-09-12T04:43:57.673
> 
> 标签：java, list, loops

下面的代码可以完美编译用户输入的 5 个整数。
我想做的是改变我的代码，这样我就可以作为用户在列表中想要多少个数字。然后程序会要求用户输入那么多整数，然后程序会找到这些整数中最大的一个。谁能帮我修改下面的代码以适应这些新标准？

```
{
    int integer1 = 
    Integer.parseInt(JOptionPane.showInputDialog( "Enter an integer:" ));
    int integer2 = 
    Integer.parseInt(JOptionPane.showInputDialog( "Enter an integer:" ));
    int integer3 = 
    Integer.parseInt(JOptionPane.showInputDialog( "Enter an integer:" ));
    int integer4 = 
    Integer.parseInt(JOptionPane.showInputDialog( "Enter an integer:" ));
    int integer5 = 
    Integer.parseInt(JOptionPane.showInputDialog( "Enter an integer:" ));   

    if (integer1 > integer2 && integer1 > integer3 && integer1 > integer4 && integer1 > integer5)
        JOptionPane.showMessageDialog(null, "The largest number is: " + integer1);
    if (integer2 > integer1 && integer2 > integer3 && integer2 > integer4 && integer2 > integer5)
        JOptionPane.showMessageDialog(null, "The largest number is: " + integer2);
    if (integer3 > integer2 && integer3 > integer1 && integer3 > integer4 && integer3 > integer5)
        JOptionPane.showMessageDialog(null, "The largest number is: " + integer3);
    if (integer4 > integer1 && integer4 > integer3 && integer4 > integer2 && integer4 > integer5)
        JOptionPane.showMessageDialog(null, "The largest number is: " + integer4);
    if (integer5 > integer1 && integer5 > integer3 && integer5 > integer4 && integer5 > integer2)
        JOptionPane.showMessageDialog(null, "The largest number is: " + integer5);
 } 
```

我首先想提示用户

```
how many integers do you want in your list? 
```

那我想说

```
enter an integer: 
```

用户说他想要的次数。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-12T04:48:30.563

这里的关键是使用[`Collections.max`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#max%28java.util.Collection%29).

> 根据元素的*自然顺序*返回给定集合的最大元素。

自然排序`Integer`是从最小到最大，即升序。这使它非常适合在这里使用。

```
int largest = Collections.max(Arrays.asList(integer1, integer2, integer3,
    integer4, integer5)); 
```

或者，您可以只`List`使用循环来构建。有关提示用户输入要输入的整数数量的代码，请参见下文。

```
int n = Integer.parseInt(
    JOptionPane.showInputDialog("How many integers do you want in your list?"));
List<Integer> inputs = new ArrayList<Integer>(n);
for (int i = 0; i < n; ++i) {
  inputs.add(Integer.parseInt(
      JOptionPane.showInputDialog("Enter an integer:")));
}
int largest = Collections.max(inputs);
JOptionPane.showMessageDialog(null, "The largest number is: " + largest); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T04:55:27.053

你知道如何从用户那里获取整数，所以新需求的第一部分很简单：

```
int n = Integer.parseInt(JOptionPane.showInputDialog(
    "how many integers do you want in your list?" )); 
```

然后你需要循环并收集那么多整数。您不需要存储它们，因为您只是在寻找最大的一个。

```
int maxSoFar = Integer.MIN_VALUE;
for (int i = 0; i < n; ++i) {
    int integer = 
        Integer.parseInt(JOptionPane.showInputDialog( "enter an integer:" ));
    if (integer > maxSoFar) {
        maxSoFar = integer;
    }    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T04:51:16.490

**这是完整的解决方案：**

首先从用户那里获取他们想要多少数字，然后使用 list 来存储这些数字，最后使用`Collections.max`（如 建议`@oldrinb`）找到最大的数字。

您可以尝试以下操作：

```
List<Integer> listOfNumbers = new ArrayList<Integer>();
int count = Integer.parseInt(JOptionPane.showInputDialog( "how many integers do you want in your list?" ));

for(int i=1;i<=count;i++){
    int number = Integer.parseInt(JOptionPane.showInputDialog( "Enter an integer::" ));
    listOfNumbers.add(number);
}
JOptionPane.showMessageDialog(null, "The largest number is: " + Collections.max(listOfNumbers)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T04:52:14.863

你可以这样做：

1.  询问用户他想输入的整数个数：

    ```
    int a = Integer.parseInt(JOptionPane.showInputDialog( "Enter the size of the array:" )); 
    ```

2.  创建数组。

    ```
    int [] arr = new int[a]; 
    ```

3.  阅读数字

    ```
    for (int i=0; i<a; i++){
        arr[i] = Integer.parseInt(JOptionPane.showInputDialog( "Enter an integer:" ));
    } 
    ```

4.  计算最大数

    ```
    int max=0;
    for (int i=0; i<a; i++){
        if ( max < arr[i] ) {
            max = arr[i];
        }
    } 
    ```

您将拥有最大的价值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-05T14:55:13.883

我实际上有一个预制类，我设置它来查找任何一组值的最大整数。您可以将此类放入您的项目中，然后在任何类中简单地使用它，如下所示：

```
 System.out.println(figures.getLargest(8,6,12,9,120)); 
```

这将返回值“120”并将其放在输出中。如果您有兴趣使用它，这里是方法源代码：

```
public class figures {

     public static int getLargest(int...f) {
          int[] score = new int[f.length];
          int largest=0;
          for(int x=0;x<f.length;x++) {
                for(int z=0;z<f.length;z++) {
                    if(f[x]>=f[z]) {
                    score[x]++;
                    }else if(f[x]<f[z]) {

                    }else {
                        continue;
                    }
                    if(z>=f.length) {
                    z=0;
                    break;
                    }
              }
       }
for(int fg=0;fg<f.length;fg++) {
    if(score[fg]==f.length) {
        largest = f[fg];
    }
}
return largest;
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-11-27T13:49:07.613

导入 javax.swing.JOptionPane；

public class Largest_String{ public static void main(String[] args){ int integer1 = Integer.parseInt(JOptionPane.showInputDialog( "输入一个整数：" )); int integer2 = Integer.parseInt(JOptionPane.showInputDialog( "输入一个整数：" )); int integer3 = Integer.parseInt(JOptionPane.showInputDialog( "输入一个整数：" )); int integer4 = Integer.parseInt(JOptionPane.showInputDialog( "输入一个整数：" )); int integer5 = Integer.parseInt(JOptionPane.showInputDialog( "输入一个整数：" ));
int integer6= Integer.parseInt(JOptionPane.showInputDialog("输入一个整数")); int integer7= Integer.parseInt(JOptionPane.showInputDialog("输入一个整数")); int integer8= Integer.parseInt(JOptionPane.showInputDialog("输入一个整数")); int integer9= Integer.parseInt(JOptionPane.showInputDialog("输入一个整数")); int integer10= Integer.parseInt(JOptionPane.showInputDialog("输入一个整数"));

```
if (integer1 > integer2 && integer1 > integer3 && integer1 > integer4 && integer1 > integer5 && integer1>integer6 && integer1>integer7 && integer1>integer8 && integer1>integer9 && integer1>integer10)
    JOptionPane.showMessageDialog(null, "The largest number is: " + integer1);
if (integer2 > integer1 && integer2 > integer3 && integer2 > integer4 && integer2 > integer5 && integer2>integer6 && integer2>integer7 && integer2>integer8 && integer2>integer9 && integer2>integer10)
    JOptionPane.showMessageDialog(null, "The largest number is: " + integer2);
if (integer3 > integer2 && integer3 > integer1 && integer3 > integer4 && integer3 > integer5 && integer3>integer6 && integer3>integer7 && integer3>integer8 && integer3>integer9 && integer3>integer10)
    JOptionPane.showMessageDialog(null, "The largest number is: " + integer3);
if (integer4 > integer1 && integer4 > integer3 && integer4 > integer2 && integer4 > integer5 && integer4>integer6 && integer4>integer7 && integer1>integer8 && integer1>integer9 && integer1>integer10)
    JOptionPane.showMessageDialog(null, "The largest number is: " + integer4);
if (integer5 > integer1 && integer5 > integer3 && integer5 > integer4 && integer5 > integer2 && integer5>integer6 && integer5>integer7 && integer5>integer8 && integer5>integer9 && integer5>integer10)
    JOptionPane.showMessageDialog(null, "The largest number is: " + integer5);
if(integer6 > integer1 && integer6 > integer3 && integer6 > integer4 && integer6 > integer2 && integer6>integer7 && integer6>integer8 && integer6>integer9 && integer6>integer10 && integer6>integer5)
    JOptionPane.showMessageDialog(null,"The largest number is:"+integer6);
if(integer7>integer1 && integer7>integer2 && integer7>integer3 && integer7>integer4 && integer7>integer5 && integer7>integer6 && integer7>integer8 && integer7>integer8 && integer7>integer9 && integer7>integer10)
    JOptionPane.showMessageDialog(null,"The largest number is:"+integer7);
if(integer8>integer1 && integer8>integer2 && integer8>integer3 && integer8>integer4 && integer8>integer5 && integer8>integer6 && integer8>integer7&& integer8>integer9 && integer8>integer10)
JOptionPane.showMessageDialog(null,"The largest number is:"+integer8);
 if(integer9>integer1 && integer9>integer2 && integer9>integer3 && integer9>integer4 && integer9>integer5 && integer9>integer6 && integer9>integer7&& integer9>integer8 && integer9>integer10)
      JOptionPane.showMessageDialog(null,"The largest number is:"+integer9);
   if(integer10>integer1 && integer10>integer2 && integer10>integer3 && integer10>integer4 && integer10>integer5 && integer10>integer6 && integer10>integer7&& integer10>integer8 && integer10>integer9)
       JOptionPane.showMessageDialog(null,"The largest number is:"+integer10);
    }
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-09-25T04:51:14.003

不要尝试任何其他方法...您对这个easyone的看法...？

```
import java.util.Scanner;
public class Find_Max_Number{

double input =0;
double number=0;

Scanner in = new 
Scanner(System.in);

System.out.print("Please Enter 
Number or -1 to Quit: ");
input = in.nextDouble;

while(input!=-1){

input = in.nextDouble();

if(input>number){
number=input;
}

System.out.println("The Largest 
Number is: " +number);
}
} 
```

非常容易...

# windows-7 - Windows 任务计划程序如何知道何时执行下一个操作？

> ID：12381351
> 
> 赞同：0
> 
> 时间：2012-09-12T04:44:57.223
> 
> 标签：windows-7, scheduled-tasks

我在 Windows 7 中使用 Windows 任务计划程序设置了任务。它有 3 个操作。第一个动作运行一个程序，但该程序窗口在动作之后仍然打开。不幸的是，这以某种方式阻止了第二个动作的执行。如果我从操作 1 手动关闭程序窗口，则执行操作 2。有什么方法可以让我执行操作 2 而无需操作 1 关闭其窗口？此外，任务调度程序如何准确地知道操作 1 何时完成？

此外，当我在命令提示符下运行一组操作时，它实际上按预期运行。但是，当作为计划任务运行时，操作 1 将挂起，直到其对话窗口关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T03:21:39.297

您必须运行 9x 版本的 Windows。右键单击您正在运行的文件，然后`action 1`单击选项卡，然后在 上打勾。`properties``Program``Close on exit`

![pif](../Images/f69cf5a518243077ee2711f4a55705cd.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T04:51:56.943

您能否详细说明您正在执行哪些任务？您可以在此处找到更多帮助，[http://support.microsoft.com/kb/308558](http://support.microsoft.com/kb/308558)。也可以使用“schtasks /query /fo LIST /v”进行命令行检查

操作 2 和 3 是单独的计划任务吗？我猜不是。为什么不将所有操作放入一个脚本并使用命令行来更新代码（这样它就不会打开一个窗口，因此会给你返回任务的退出代码，成功/失败）

# php - Junction/Simlink 导致 plugin_url() 返回错误的 URL

> ID：12381361
> 
> 赞同：1
> 
> 时间：2012-09-12T04:45:56.727
> 
> 标签：php, version-control, symlink, wordpress

我正在各种 WordPress 版本中测试我的插件并使用符号链接。我使用名为[Junction](http://technet.microsoft.com/en-us/sysinternals/bb896768.aspx) for Windows 的工具。这样我只需要编辑主干文件。但是，WordPress 似乎不能很好地处理符号链接。

例如，如果我使用以下代码运行插件。

```
<?php
/*
    Plugin Name: Junction/Simlink Test
*/
echo __FILE__ . '<br />';
echo plugins_url('junctiontest.php', __FILE__) . '<br />';
?> 
```

并创建一个符号链接，（这适用于 Windows）

> 结 "z:\xampp\htdocs\wp34\wp-content\plugin\junctiontest2" "Z:\xampp\htdocs\wpcurrent\wp-content\plugins\junctiontest"

当我使用 url 打开测试站点的管理页面时`wpcurrent`，我得到

```
Z:\xampp\htdocs\wpcurrent\wp-content\plugins\junctiontest\junctiontest.php
http://localhost/wpcurrent/wp-content/plugins/junctiontest/junctiontest.php 
```

但是，当我使用 url 打开测试站点的管理页面时`wp34`，我得到

```
Z:\xampp\htdocs\wpcurrent\wp-content\plugins\junctiontest\junctiontest.php
http://localhost/wp34/wp-content/plugins/Z:/xampp/htdocs/wpcurrent/wp-content/plugins/junctiontest/junctiontest.php 
```

这会破坏链接的插件。

那么有什么建议可以避免这种情况吗？我不喜欢每次更改主干文件时都将插件复制并粘贴到每个目录中。

我找到了这个页面：[http](http://core.trac.wordpress.org/ticket/16953) ://core.trac.wordpress.org/ticket/16953这似乎是许多插件开发人员持有的一个已知问题，但尚未解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T19:11:12.860

使用文件夹同步工具，例如[DSYNCHRONIZE](http://dimio.altervista.org/eng/)。

# linux - Bash 脚本：将目录复制到外部驱动器 - 如何导航目录？

> ID：12381364
> 
> 赞同：0
> 
> 时间：2012-09-12T04:46:25.100
> 
> 标签：linux, bash, scripting

我刚刚开始研究脚本的世界，特别是使用 bash，并且正在尝试编写一个简单的脚本来将文件夹（包含子文件夹）的内容复制到外部闪存驱动器上的备份位置（试图备份 Thunderbird 的数据）。我看过几个教程，我遇到的是如何导航到脚本中的父目录的问题。我要复制的文件夹存在于我的脚本文件所在的目录 1 中。要访问硬盘驱动器，我必须通过两个父目录进行备份......这是我创建的（我正在运行 ubuntu 12.04）：

```
#! /bin/bash

#this attepmts to copy the profile folder for Thunderbird to the backup drive
echo "...attempting to copy Thunderbird Profile to back-up drive (My Passport)"

#attempt to backup two directories to where media folder (and therefore My Passport is located)
parent=$(dirname $PWD)
grandparent=$(dirname $parent)
greatgrand=$(dirname $grandparent)

#show what directories the variables are set to
echo "...parent: $parent"
echo "...grandparent: $grandparent"
echo "...greatgrand: $greatgrand"

echo "...copying..."

#FIRST SUBSHELL 
#create a subshell and cd to directory to copy && tar directory
#tar: -c = create tarball, -f = tells it what to create " - " = is the unix convention for stdout (this goes with the -f) " . " = means the whole directory.  I the end this first subshell is creating a tarball and dumping it in stdout
# | = pipe
#SECOND SUBSHELL

(cd /mcp/.thunderbird/lOdhn9gd.default && tar -cf - .) | (cd $greatgrand/media/My Passport/Gmail_to_Thunderbird_Backup && tar -xpf -) 
```

当我运行它时，我得到：

```
mcp@mcp-Satellite-A135:~/BashScriptPractice$ ./thunderProfileBU.sh
...attempting to copy Thunderbird Profile to back-up drive (My Passport)
...parent: /home/mcp
...grandparent: /home
...greatgrand: /
...copying...
./thunderProfileBU.sh: line 23: cd: //media/My: No such file or directory
./thunderProfileBU.sh: line 23: cd: /mcp/.thunderbird/lOdhn9gd.default: No such file or directory 
```

我应该从目录“/mcp”开始。我猜我在上面的第一个子脚本（最后一行）中不需要它，但是当我尝试只使用“cd /.thunderbird/lOdhn9g ...”时，我仍然收到错误消息。对于第二个子脚本，我不确定到底发生了什么。我只是误解了文件夹导航语法吗？

此外，这是一个附带问题，但是以这种方式编写脚本是软件开发人员应该知道如何做的事情，还是这种事情更多地留给系统管理员？我没有参加任何脚本课程，或者我知道我的大学提供的任何课程，但是我觉得它很有趣，并且可以看到它是如何非常有用的......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T04:57:02.917

首先，我建议使用`cp -r`而不是更复杂的 tar 管道，这仅在您在网络上复制时才真正有用。

其次，您的脚本有两个问题：您指定的源目录是`/mcp`和不是`/home/mcp`，因此无法找到。第二个问题是您指定的目标目录中有一个空格。该空格必须通过在空格前使用反斜杠 ( `\`) 或用引号括住整个目录来转义：

```
"$greatgrand/media/My Passport/Gmail_to_Thunderbird_Backup" 
```

我不确定您为什么使用相对路径（“greatgrand”）。似乎最好使用绝对路径，只需从`/`. 如果你真的想引用 greatgrand 目录，使用`../../../`. 每个`../`都上升一个级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T04:58:08.087

您可以使用 ,而不是使用`dirname`来获取每个目录的父目录`..`，其中`$greatgrand`只是`../../..`.

现在依赖脚本中的父目录通常是一个坏主意，因为您必须保证它们存在。

您的脚本有两个失败的地方：

```
./thunderProfileBU.sh: line 23: cd: //media/My: No such file or directory 
```

您应该保护目录名称，因为它包含空格，并且空格是参数分隔符。

```
./thunderProfileBU.sh: line 23: cd: /mcp/.thunderbird/lOdhn9gd.default: No such file or directory 
```

您要复制的目录不存在。我猜你想要`~mcp`，或者`/home/mcp`.

如果您想要将您的雷鸟偏好备份到外部驱动器，您应该使用`rsync`：

```
# Make sure directory exists
mkdir -p "/media/My Passport/Gmail_to_Thunderbird_Backup"
# Copy the contents recursively
rsync -av "~/.thunderbird/lOdhn9gd.default/" "/media/My Passport/Gmail_to_Thunderbird_Backup" 
```

# javascript - 从 Javascript 连接到 SOAP Web 服务？

> ID：12381367
> 
> 赞同：1
> 
> 时间：2012-09-12T04:46:43.060
> 
> 标签：javascript, web-services, html, soap

我对 Soap Web 服务和 HTML5 非常陌生，我想使用 html5 和soap webservices 开发应用程序我有soap web-services wsdl 和登录凭证我如何从html5 应用程序连接这些服务。请向我发送任何有用的链接或示例这样我就可以试试了。

提前致谢 是否有任何第三方框架可以连接 Soap Web-services 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:50:01.083

HTML 不是脚本语言。您无法使用它连接到 SOAP。查看具有 SOAP 类的 PHP，然后使用它来生成 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:53:48.060

SOAP 是一种基于 XML 的协议。尽管理论上 Javascript 可以读取和使用 SOAP 回复，但实际上由于浏览器安全限制以及保持互联网作为一个理智的地方，这是不可能的。

您要做的是创建一个中间件，将您的 HTML5 客户端 AJAX 请求转换为服务器上的 SOAP 请求，然后将结果作为翻译后的 JSON 返回。

SOAP 流量最好由服务器到服务器而不是直接从浏览器到服务器来处理。因此，问题是您必须创建和转换 SOAP 请求的服务器资源类型。

# java - 链表实现代码的问题

> ID：12381372
> 
> 赞同：0
> 
> 时间：2012-09-12T04:47:06.680
> 
> 标签：java, list, concatenation, pass-by-reference

在我的链表实现中，有两种方法。当我调用一种方法时，它会影响另一种方法的结果。一种方法是`concatenateLL()`连接两个列表，一种方法是`getNumberOfNodes()`返回链表中的节点数。对于我的方法连接，我应该返回一个新列表，它是两个列表的连接。但在我的代码中，生成的新列表会影响第一个参数中的列表。假设我传递列表`l`和`m`参数，然后返回一个新列表。

问题是新的只是列表`l`，现在包含列表的元素`m`（由于连接）。正因为如此，当我调用`getNumberOfNodes()`list `l`and时`m`，我得到了错误的值。

这是我的代码：

```
public static LinkedList concatenateLL(LinkedList l, LinkedList m) {
    LinkedList a = l;
    Node l_last = a.getTailNode();
    Node m_first = m.getHeadNode();
    l_last.setNext(m_first);
    a.tail = m.getTailNode();
    return a;
}

public int getNumberOfNodes(Node h) {
    if(h == null)
        return 0;
    return 1 + getNumberOfNodes(h.getNext());
}

public static void print(LinkedList l) {
    Node v = l.getHeadNode();
    while(v != null) {
        System.out.print(v.getElement()+" ");
        v = v.getNext();
    }
    System.out.println();
}

public static void main(String[] args) throws IndexOutOfBoundsException {
    // TODO Auto-generated method stub
    LinkedList l = new LinkedList();
    LinkedList m = new LinkedList();
    l.insertFirst(5);
    l.insertFirst(7);
    l.insertFirst(3);
    l.insertFirst(6);
    print(l);
    m.insertFirst(2);
    m.insertFirst(4);
    m.insertFirst(9);
    m.insertFirst(8);
    m.insertLast(10);
    m.insertLast(12);
    print(m);
    LinkedList n = concatenateLL(l, m);
    print(n);
    System.out.println(l.getNumberOfNodes(l.getHeadNode()));
    System.out.println(m.getNumberOfNodes(m.getHeadNode()));
} 
```

在 main 方法中， list 的长度`l`应该返回`4`并且 list`m`应该返回`6`。但是在调用之前调用连接方法之后`getNumberOfNodes()`，我得到`l`as的长度（这是由于 and的连接而导致的 list 的节点数）和 as 的长度`10`（我不知道为什么）。`n``l``m``m``15`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:36:41.197

当我看到你的代码时，我猜你习惯于用 C/C++ 编写（基于命名约定和预期行为）。您的问题在于**制作 deep copy**。在`concatenateLL`方法开始时，您需要制作**两个**列表的深层副本，然后您可以按照当前的方式将它们连接起来。

```
LinkedList a = l; // problem line 
```

在 C/C++ 中，它会调用一个复制构造函数，但 Java 没有类似的东西，所以你需要自己实现它。您可以使用`clone()`声明的方法`java.lang.Object`并覆盖它，但您需要制作**深层副本**而不是浅层副本，因为您还要更改节点之间的引用，而不仅仅是列表。

例如，该方法可能看起来像这样：

```
public static LinkedList concatenateLL(LinkedList l, LinkedList m) {
   LinkedList a = new LinkedList();

   // copy Nodes, you need to create new instance of them
   for ( int i = 0; i < l.getNumberOfNodes(l.getHeadNode()); ++i )
        a.insertLast( l.getNode( i ) );

   // copy Nodes, you need to create new instance of them
   for ( int i = 0; i < m.getNumberOfNodes(m.getHeadNode()); ++i )
        a.insertLast( m.getNode( i ) );

   return a;
} 
```

但我需要提一下，这个实现有一个`O(n^2)`复杂性，因为方法`getNode()`是`O(n)`. 更好的解决方案是使用迭代器，但我不知道你的类是否实现了它。

**编辑：** 为了提高复杂性，`O(n)`我建议您实现标准接口[Iterator](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Iterator.html)无论如何，关键在于保持对当前元素的引用能够简单地获得下一个。如果我举一个简单的例子：

```
Node item = l.getHeadNode();

while( item != null ) {
    // copy the item
    a.insertLast( item );
    item = item.getNext();
} 
```

列表也是如此`m`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T06:01:34.417

```
public static LinkedList concatenateLL(LinkedList l, LinkedList m) {
    LinkedList a = new LinkedList();
    Node l_last = l.getHeadNode();
    Node m_first = m.getHeadNode();
    while(l_last != null) {
        a.insertLast(l_last.getElement());
        l_last = l_last.getNext();
    }
    while(m_first != null) {
        a.insertLast(m_first.getElement());
        m_first = m_first.getNext();
    }       
     return a;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T05:38:42.237

是的，`LInkedList a = l;`不会创建linked-list 的副本`l`。

如果您不想修改`l`.

# mysql - 未找到 MySQL 头文件 MySQL-python db

> ID：12381373
> 
> 赞同：1
> 
> 时间：2012-09-12T04:47:11.747
> 
> 标签：mysql, django, macos

今天我一直试图让 Django 在我的 MAC OS Lion 上运行一段时间，但没有成功。我的 MAC 上预装了 Python 2.7.1。我将 MySQL 安装为 XAMPP 附带的软件包。我已经安装了 Django 1.4.1。

我继续通过 python 在终端中导入 django 确认 django 已成功安装，一切都很好 - 没有错误。

每当我尝试在 MySQL-python-1.2.3 中构建和安装 setup.py 文件时，就会出现问题。当我做：

须藤 python setup.py 构建

在 MySQL-python-1.2.3 目录中，我收到错误：

```
RE_SIGHUP_SIGQUIT -DDONT_DECLARE_CXA_PURE_VIRTUAL
_mysql.c:36:23: error: my_config.h: No such file or directory
_mysql.c:38:19: error: mysql.h: No such file or directory
_mysql.c:39:26: error: mysqld_error.h: No such file or directory
_mysql.c:40:20: error: errmsg.h: No such file or directory
_mysql.c:76: error: expected specifier-qualifier-list before ‘MYSQL’ 
```

（以及更多错误）...（以...结尾）

```
llvm-gcc-4.2: error trying to exec '/usr/bin/../llvm-gcc-4.2/bin/powerpc-apple-darwin11-            llvm-gcc-4.2': execvp: No such file or directory 
```

lipo：无法打开输入文件：/var/tmp//ccShAtAs.out（没有这样的文件或目录）错误：命令“llvm-gcc-4.2”失败，退出状态为 255**

此外，当我尝试做同样的错误时：

须藤 python setup.py 安装

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:22:25.913

MySQL-Python 需要 MySQL C 头文件才能构建，但是它们似乎不包含在 XAMPP 默认安装中。[互联网建议您安装 XAMPP 开发包](http://www.apachefriends.org/f/viewtopic.php?p=152611)。

# mysql - 一个大型 MySQL 表与 20 - 50 个较小的表？

> ID：12381374
> 
> 赞同：2
> 
> 时间：2012-09-12T04:47:11.830
> 
> 标签：mysql, database-design

我正在启动一个项目，其中查询的每个结果的性能（速度）非常重要。

情况：

*   大约 20-50 个产品（随着时间的推移会增加：大约 3 个/年）
*   每个产品都有一个配置文件页面，其中包含大约 20 个需要存储的 VAR
*   每个产品都有一个会改变的定价（插入/添加）**---每天---**
*   每个产品还将有一个每月、3 个月、6 个月、1 年、3 年价格的 VAR，随机更新

*   输出 1（估计每天 5,000 次观看）

所有产品，当日定价，价格差异，百分比差异，上一个价格

*   输出 2（按范围搜索**单个**产品 | 浏览量未知，估计每天 100 次浏览）

日期、价格、差价、百分比差、过往价格

*   上瘾。将需要随机定价。

注意：本项目基于 ExpressionEngine

**我的主要问题是我是否应该制作一张表格，将所有产品信息与产品 ID 一起保存，然后将所有产品的所有每日定价都放在一个表格中。然后是第二张表中所有产品的所有月度定价等，因为每种定价一次只能使用一种类型。**

**或者。我应该制作 20-30 个表格来存储他们自己的每日定价吗？然后在查询时使用 JOIN**

我已经研究了很多类似的问题和答案，但我似乎无法找到足够接近的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:10:52.120

输出 1\. 任何时候执行全表扫描以返回数据库中的所有行都可能会变得很耗时。但是 20-50 个产品是零钱，数据库应该没有问题。如果您开始添加大量产品，您可以随时引入分页并在每页显示 100 个左右的产品。第二种方法是将主页缓存一段时间并定期刷新。

输出 2。只要您有产品 ID 或标题索引单个产品查找应该非常快。

维护 20 到 30 个表听起来像是地狱，做这么多的连接将是一场噩梦。不要试图过早地优化。只有在发现问题时才关注它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T04:52:17.287

我将始终倾向于单表方法而不是一组表。

您应该在表上使用索引，这将大大提高性能。

维护自己的滚动表分区的开销远远超过单表方法。

每个“实体”应该有一个表。

所以一个产品静态数据表，一个定价数据表等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T04:57:40.717

采用父子方法。并确定表的正确关系。此外，您的数据处理将取决于您将在后端使用的软件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T12:46:03.277

首先，您要问的内容并不完全清楚-您是在问是否应该对数据进行非规范化，还是应该对数据进行分区？

其次，这两个问题的答案都是“不”。或者，更准确地说，“不，拜托，拜托，不，以所有神圣的名义——不！”。

您的数据库将会很小 - 50 种产品，每年 365 次价格变化仍然只有 15K 条记录。您甚至还没有接近设计得体的“传统”数据库模式会变慢的地步；非规范化和分区都会产生主要的维护开销，使应用程序更加脆弱，并需要大量的开发时间。

我强烈建议建立一个规范化的数据模型，用大量数据填充它（至少是预期最大值的两倍），运行你期望运行的查询，然后通过测量性能来确定你是否有问题查询。如果这样做，请优化查询。如果它仍然很慢，请购买更大/更好的硬件。如果它仍然很慢，请考虑去规范化。如果这太慢了，那你就是在为 Facebook 工作。

# java - Android +4.0 中的日历

> ID：12381376
> 
> 赞同：0
> 
> 时间：2012-09-12T04:47:15.463
> 
> 标签：java, android, calendar

我想创建日历。这是工作。但是如果安卓版本+4.0。这行不通。我知道我需要使用内容提供者，但我不知道如何。我希望该日历适用于所有版本的 Android。我该怎么做？

```
 private void AddCalendar(int years,int months,int days,int hours,int minutes){
        try{
        // get calendar
        Calendar cal = Calendar.getInstance();     
        Uri EVENTS_URI = Uri.parse("content://com.android.calendar/events");
        ContentResolver cr = getContentResolver();

        Calendar start = Calendar.getInstance();
        start.set(years, months, days, hours, minutes, 0);

        Calendar end = Calendar.getInstance();
        end.set(years, months, days, hours + 1, minutes, 0);

        long startTime = start.getTimeInMillis();       
        long endTime = end.getTimeInMillis();

        // event insert
        ContentValues values = new ContentValues();
        values.put("calendar_id", 1);
        values.put("title", editText1.getText().toString());
        values.put("allDay", 0);
        values.put("dtstart", startTime); 
        values.put("dtend", endTime); 
        values.put("description", editText2.getText().toString());
        values.put("visibility", 0);
        values.put("hasAlarm", 1);
        Uri event = cr.insert(EVENTS_URI, values);

        // reminder insert
        Uri REMINDERS_URI = Uri.parse("content://com.android.calendar/reminders");
        values = new ContentValues();
        values.put( "event_id", Long.parseLong(event.getLastPathSegment()));
        values.put( "method", 1 );
        values.put( "minutes", 10 );
        cr.insert( REMINDERS_URI, values );

        }catch (Exception e){
            Toast.makeText(getApplicationContext(), 
                    R.string.calendar, Toast.LENGTH_LONG).show();
        }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:25:48.630

Calendar Api 在 4.0+ 中发生了变化。您可以使用新的 Calendar Intent api（这是推荐的方法）或修改您的活动以适应新的 api：

values.add("eventTimezone","00"); 删除“可见性”键/值，它不再被接受。

您应该在 ExceptionCatcher 中打印异常，它具有很强的描述性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:01:22.547

> [Here](https://stackoverflow.com/questions/7859005/how-to-read-and-edit-android-calendar-events-using-the-new-android-4-0-ice-cream) it is answered and working!

But change the code to:

`values.put(CalendarContract.Events.CALENDAR_ID, 1);`

*1 instead of 3 in order to select the default calendar.*

But you can't have the same code for all android versions! You will need to make 2 different apps.One for android 4+ and one for android<4

# arrays - MATLAB 中时间戳过滤器的优化 - 处理非常大的数据集

> ID：12381377
> 
> 赞同：3
> 
> 时间：2012-09-12T04:47:23.370
> 
> 标签：arrays, performance, matlab, optimization, filtering

我正在用 MATLAB 编写一个程序（必须使用 MATLAB，不能真正使用 MEX）来过滤大量数据。

我需要实现的过滤器之一要求我将时间戳矢量与其他时间戳不能出现的已知“坏”时间列表进行比较。

一个典型的时间戳向量有大约 2,000,000 个条目，我有一个大约 300,000 个“坏时间”的列表。

这是一个工作示例，如果`TIME=[1, 2.3, 5.5, 9.1, 10];`, 和`BAD_TIMES=[5.2, 9.3];`, 并且我们有一个容差, 那么介于和之间的`tolerance=0.25;`所有时间戳都必须被删除。这意味着清理后的向量应该等于。`TIME``4.95 and 5.45``9.05 and 9.55``TIME_CLEAN``TIME_CLEAN=[1, 2.3, 5.5, 10];`

这个问题很容易解决，我用大约 4 或 5 种不同的方式解决了它。但是，对于一个 1,000,000 时间戳的作业，这个问题很容易需要一个小时来计算。

我希望在典型的 Core-i7 工作站上在 2 分钟内解决此类问题，以使此过滤器在如此多的时间条目下可行。

我已包含此代码的工作版本。我了解代码矢量化和`bsxfun()`可以提供帮助的功能，但相对于我需要的此过滤器的效率类型而言，改进是微不足道的。

有没有非常聪明的方法可以非常有效地解决这个问题？任何帮助将不胜感激。

PS下面的代码是完整的；它生成设置问题所需的所有数据并解决它（尽管非常缓慢！）。将变量更改为`NO_OF_TIMESTAMPS`更大的值（例如 1,000,000）以观察它爬行！

```
clear all %% CLEAR WORKSPACE
close all %% CLOSE FIGURES
clc %% CLEAR COMMAND WINDOW

NO_OF_TIMESTAMPS=10000; %% NUMBER OF TIMESTAMPS IN ORIGINAL DATA

TOLERANCE=2; %% TOLERANCE AROUND TIMESTAMP

A=sort(randi(NO_OF_TIMESTAMPS/10,NO_OF_TIMESTAMPS,1)); %% GENERATE ARTIFICIAL TIMESTAMPS

B=unique(sort(round(randi([NO_OF_TIMESTAMPS/2,NO_OF_TIMESTAMPS*5],[NO_OF_TIMESTAMPS/10,1])/10))); %% GENERATE ARTIFICIAL LIST OF BAD TIMESTAMPS

B_LB=B-TOLERANCE; %% CREATE A LIST OF LOWERBOUND BAD TIMESTAMPS
B_UB=B+TOLERANCE; %% CREATE A LIST OF UPPERBPUND BAD TIMESTAMPS
B_RANGE=[B_LB B_UB]; %% AUGMENTED MATRIX COMPOSED OF VECTORS B_LB and B_UB

A_ROWS=size(A,1); %% SIZE OF A;

B_ROWS=size(B,1); %% SIZE OF B;

tic; %% START TIMER

A_TO_CLEAN=ones(A_ROWS,1); %% BOOLEAN VECTOR TO BE USED IN FILTERING
for ii=1:A_ROWS

    for jj=1:B_ROWS

        if A(ii)>=B_RANGE(jj,1) && A(ii)<=B_RANGE(jj,2) %% CHECK EACH MEMBER OF A VERSUS EACH MEMBER OF B_RANGE

           A_TO_CLEAN(ii)=0; %% SET INDEX VECTOR A_TO_CLEAN = 0 SO THAT WE CAN DELETE LATER

           break; %% A(ii) CAN ONLY BE ERASED ONCE, SO BREAK jj LOOP AND GO TO NEXT ii

        end

    end

end

CLEAN=A(~~A_TO_CLEAN); %% DELETE A VIA LOGICAL INDEXING

toc; %% END TIMER

clearvars -except A B_RANGE CLEAN %% ONLY SHOW RELEVANT VARIABLES 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T06:04:09.600

使这有效的诀窍是首先对两个向量进行排序。然后通过其中一个向量创建一个简单的循环，同时保持对描述最近元素的第二个向量的索引。也就是说，你会有类似的东西

```
for ix1 = 1:length(timestamps)
    while (badTimes(ix2) < timestamps(ix1)
        ix2 = ix2+1;
    end
    %check timestamp(ix1) against badTimes(ix2), and maybe badTimes(ix2 + 1) and  badTimes(ix2 - 1)
end 
```

排序相对有效，尤其是使用内置函数。现在你只需要一个循环。

这现在具有[合并排序](http://en.wikipedia.org/wiki/Merge_sort)算法的相似部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T08:38:13.863

在我的计算机上，这需要 0.025 秒来执行 1e6 个“时间步长”。该方法线性地通过 A，在通过 B_RANGE 时更​​新索引。需要特别注意“数组结束”的情况。

```
BR=B_RANGE';
C=logical(ones(size(A)));
j=1;
i=1;
tic;
while i<=A_ROWS && j<=B_ROWS

    if A(i)==99
        i=1;
    end
    % find start of bad signal
    while A(i)<BR(1,j) && i<A_ROWS
        i=i+1;
    end
    % finish at the end of A    
    if i==A_ROWS
        break;
    end
    ii=i;
    % find end of bad signal
    while A(ii)<=BR(2,j) && ii<A_ROWS
        ii=ii+1;
    end
    % special case for end of array
    if A(ii)==A(ii-1)
        ii=ii+1;
    end
    % mark bad signal entries
    C(i:ii-1)=false;
    i=ii;
    j=j+1;
end
AM=A(C);
toc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T21:09:19.210

这需要 0.3 秒：

```
%% generate random measured and bad time samples
t       = sort(1e4 * rand(2e6, 1));
t_bad   = sort(1e4 * rand(3e5, 1));

%% find bad indexes
tolerance = 0.01;
idx_bad = ismember(round(t / tolerance), round(t_bad / tolerance)); 
```

# cuda - 忽略`CUDA_VISIBLE_DEVICES`环境变量

> ID：12381379
> 
> 赞同：3
> 
> 时间：2012-09-12T04:47:30.313
> 
> 标签：cuda, environment-variables

`CUDA_VISIBLE_DEVICES`从 CUDA 3.1 开始，可以通过设置环境变量来限制对应用程序可见的 GPU 列表。

这会影响 Runtime API 和 Driver API（确保我自己检查过）。似乎设备过滤是在驱动程序级别强制执行的，并且无法忽略它。

但是，我遇到了一个闭源应用程序，它似乎以某种方式忽略了这个变量并总是使用设备 0，即使我们设置`CUDA_VISIBLE_DEVICES`为空字符串，这意味着应用程序不应该看到任何支持 CUDA 的设备。

有问题的应用程序使用与虚拟应用程序相同的 CUDA 库来计算可用设备：

```
$ ldd a.out  # dummy
    linux-vdso.so.1 =>  (0x00007fff7ec60000)
    libcuda.so.1 => /usr/lib64/libcuda.so.1 (0x00007f606783a000)
    libcudart.so.4 => /usr/local/cuda41/cuda/lib64/libcudart.so.4 (0x00007f60675e3000)
    libstdc++.so.6 => /usr/lib64/libstdc++.so.6 (0x00007f60672dd000)
    libm.so.6 => /lib64/libm.so.6 (0x00007f606704e000)
    libgcc_s.so.1 => /lib64/libgcc_s.so.1 (0x00007f6066e37000)
    libc.so.6 => /lib64/libc.so.6 (0x00007f6066aa7000)
    libpthread.so.0 => /lib64/libpthread.so.0 (0x00007f606688b000)
    libz.so.1 => /lib64/libz.so.1 (0x00007f6066674000)
    libdl.so.2 => /lib64/libdl.so.2 (0x00007f6066470000)
    librt.so.1 => /lib64/librt.so.1 (0x00007f6066268000)
    /lib64/ld-linux-x86-64.so.2 (0x00007f6068232000)

$ ldd ../../bin/one.closed.source.application # application in question
    linux-vdso.so.1 =>  (0x00007fffcf99c000)
    libcufft.so.4 => /usr/local/cuda41/cuda/lib64/libcufft.so.4 (0x00007f06ce53a000)
    libcuda.so.1 => /usr/lib64/libcuda.so.1 (0x00007f06cdb44000)
    libcudart.so.4 => /usr/local/cuda41/cuda/lib64/libcudart.so.4 (0x00007f06cd8ed000)
    libz.so.1 => /lib64/libz.so.1 (0x00007f06cd6cb000)
    libdl.so.2 => /lib64/libdl.so.2 (0x00007f06cd4c7000)
    librt.so.1 => /lib64/librt.so.1 (0x00007f06cd2bf000)
    libstdc++.so.6 => /usr/lib64/libstdc++.so.6 (0x00007f06ccfb8000)
    libm.so.6 => /lib64/libm.so.6 (0x00007f06ccd34000)
    libgcc_s.so.1 => /lib64/libgcc_s.so.1 (0x00007f06ccb1e000)
    libc.so.6 => /lib64/libc.so.6 (0x00007f06cc78d000)
    libpthread.so.0 => /lib64/libpthread.so.0 (0x00007f06cc571000)
    /lib64/ld-linux-x86-64.so.2 (0x00007f06d0110000) 
```

我很好奇如何做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T05:00:35.340

[橡皮鸭调试](http://en.wikipedia.org/wiki/Rubber_duck_debugging)确实有效。

原来`unsetenv`在调用`cuInit`or之前使用它就足够了`cudaSetDevice`，环境变量的初始值将被忽略。

```
#include <stdio.h>
#include <stdlib.h>
#include <cuda.h>

int main(int argc, char **argv, char **env) {
  int x;
  unsetenv("CUDA_VISIBLE_DEVICES");
  cuInit(0);
  // Now we see all the devices on machine
  cuDeviceGetCount(&x);
  printf("%d\n",x);
  return 0;
} 
```

# c# - c#从数据库中检索pdf文件

> ID：12381382
> 
> 赞同：1
> 
> 时间：2012-09-12T04:47:40.767
> 
> 标签：c#

朋友们，我创建了一个应用程序，我尝试将 pdf 文件上传到数据库并从数据库中检索。上传已成功完成。但我无法从数据库中检索该 pdf 文件。请查看我的代码并建议我解决此问题的方法。

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        SqlCommand cmd1 = new SqlCommand("select Docdata from SaveDoc where DocID='" + TextBox1.Text + "'", con);
        con.Open();
        byte[] b = null;
        SqlDataAdapter da = new SqlDataAdapter();
        DataTable dt = new DataTable();
        da = new SqlDataAdapter(cmd1);
        da.Fill(dt);
        if (dt.Rows.Count > 0)
        {
            b = ((byte[])dt.Rows[0][0]); // Error has came here
            Response.ContentType = "application/pdf";
            Response.BinaryWrite(b);

        } 
```

错误是“无法将'System.String'类型的对象转换为'System.Byte []'类型。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T04:54:09.013

这样做：

```
 b= Encoding.ASCII.GetBytes(dt.Rows[0][0].ToString()); 
```

# php - 提交后如何将变量从javascript传递给php

> ID：12381390
> 
> 赞同：1
> 
> 时间：2012-09-12T04:49:01.777
> 
> 标签：php, javascript, html

每次单击添加行时，我都有一个脚本将行添加到带有文本字段的表中：

```
<script language = "javascript">

var x = 0;

function addRow(){

    var tbody = document.getElementById(tabID).getElementsByTagName("tbody")[0];
    var row = document.createElement("tr")
    var data1 = document.createElement("td")    
    var data2 = document.createElement("td") 

    var element = document.createElement("input");
    element.setAttribute("type", type);
    element.setAttribute("name", type);
    element.setAttribute("id", "Name"+x);
    element.setAttribute("style","width:95px");

    var element1 = document.createElement("input");
    element1.setAttribute("type", type);
    element1.setAttribute("name", type);
    element1.setAttribute("id", "Address"+x);
    element1.setAttribute("style","width:95px");

    var foo = document.tbody;

    data1.appendChild(element)
    data2.appendChild(element1)

    row.appendChild(data1)
    row.appendChild(data2)
    tbody.appendChild(row)

    x++;
}
</script> 
```

提交后如何将变量 x 的值传递给 php，以便我可以计算我应该执行多少循环？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T04:53:28.597

添加`<input type="hidden" name="count_rows" value="0">`到您的表单，在提交表单时将其值更新为行数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T04:54:15.383

您需要在表单中创建一个输入隐藏字段并使用 counter 的值对其进行初始化。您可以按如下方式使用javascript

```
 var input = document.createElement("input");
 input.setAttribute("type", "hidden");
 input.setAttribute("name", "counter");
 input.setAttribute("value", x); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-31T10:27:25.157

正如Vinay已经建议的那样。利用输入元素的名称和值属性。您可以尝试以下代码片段。

```
<?php
if(isset($_POST['submit'])) 
{ 
    print_r($_POST);
    $counter= $_POST['counter'];   
    print_r("counter value : <b>". $counter. "</b>");

}
?>
<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
   <input type="hidden" name="counter" value="5"><br>
   <input type="submit" name="submit" value="Submit Form"><br>
</form> 
```

# android - 如何检测设备锁定时的事件？

> ID：12381393
> 
> 赞同：1
> 
> 时间：2012-09-12T04:49:25.727
> 
> 标签：android

在我的代码中，我试图了解设备锁定时启动的意图。

例如：假设我的活动正在运行，并且我按下电源按钮来锁定手机。INTENT.ACTION_SCREEN_OFF 启动。活动暂停，屏幕变为空白。

所以我想要的是每当设备被用户锁定时，我不想完成我的活动，但是如果用户按下主页按钮或后退按钮，我正在完成活动。因此，为此我编写了一个代码，但它不起作用。

**我用过的代码**

```
public void onResume()
{
    super.onResume();
    m_ScreenLocked = false;

    // Intent and receiver to listen to screen lock
    m_IntentFilter = new IntentFilter(Intent.ACTION_SCREEN_ON);
    m_IntentFilter.addAction(Intent.ACTION_SCREEN_OFF);
    m_BroadcastReceiver = new ScreenStateBroadcastReceiver();
    registerReceiver(m_BroadcastReceiver, m_IntentFilter);
}

private final class ScreenStateBroadcastReceiver extends BroadcastReceiver 
{
    @Override
    public void onReceive(final Context context, final Intent intent) 
    {
         if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) 
         {
            m_ScreenLocked = true;
         } 
         else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) 
         {
             //other stuff
         }
    }
}

@Override
public void onStop()
{
    super.onStop();
    m_NoteManagerObject.setPageViewRunning(false);

    if (!m_ScreenLocked)
    {
         unregisterReceiver(m_BroadcastReceiver);
         finish();
     }
     else
     {
         unregisterReceiver(m_BroadcastReceiver);
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:02:31.383

当您在活动中以编程方式注册接收器时，当您的活动暂停时它不会得到广播。这里的文档很模糊，因为它们只是“建议”取消注册`onPause()`，但不要说当您的活动暂停时接收器将无法工作。

然而，真正的问题是你为什么要这样做。作为用户，如果我在使用您的应用程序时屏幕关闭，并且当我解锁屏幕时，应用程序消失了，我会很生气。请记住，您无法区分用户按下电源按钮和屏幕只是超时。

无论如何，一个可能的解决方法是注册您的活动以在您的清单中接收这些操作。这不一定有效，因为并非所有意图都可以在清单意图过滤器中注册。如果我记得，不能在您的清单中注册 ACTION_SCREEN_* 意图。

另一种方法是在与您的活动一起运行的服务中侦听这些意图，然后能够向您的活动发送不同的意图以告诉它自己完成。

# mysql - 参数化 Django 原始查询产生与非参数化原始查询不同的结果

> ID：12381396
> 
> 赞同：0
> 
> 时间：2012-09-12T04:49:40.703
> 
> 标签：mysql, django, django-models

我正在使用带有两个参数的 SQL 字符串对 Django 模型进行原始查询。令人头疼的是，如果我使用字符串替换来填充参数，我会得到比使用参数替换更多的结果。在后一种情况下，结果是正确的，只是不完整。代码如下所示，唯一的变化是我省略了确切的 SQL：

```
# I have a long and ornate SQL statement that looks basically like this.
sql = "SELECT blah blah WHERE something = %s AND something_else in (%s)"

# If I do a raw query with string substitution I get more results (22) ...      
sqlInsecureFilled = sql % (divID, storeRestrictStr)
promos_insecured = Promotions.objects.raw(sqlInsecureFilled)

# ... than if I use a parameterized raw query, which produces (10)
promos_secure = Promotions.objects.raw(sql, [divID, storeRestrictStr]) 
```

但它变得更奇怪了。如果我从命令行执行此操作，从 raw_query 对象（即 promos_secure.query）中获取 SQL 并将其复制到 Sequel Pro 终端，那么两个查询都会产生相同数量的结果——22！但是：

```
In [35]: [len(list(promos_insecured)), len(list(promos_secure))]
Out[35]: [22, 10] 
```

总结一下：查询似乎是相同的（它相当长，所以很难准确判断），并且当 promos_xx.query 字符串被复制到 MySQL 终端时，它们会产生完整的结果集。然而，当如上所示执行时，参数化版本返回 10 个结果，而另一个版本返回完整的 22 个结果。

为了完整起见，这里是 promos_secure.query （promos_insecured 是一样的）：

```
SELECT DISTINCT promotion_id, promotion_name, promotion_up_date, promotion_down_date, promotion_asset_id, promotion_notes, promotion_promo_id FROM promotions, promo_detail WHERE promotion_id = promo_detail_promotion_id AND promotion_start_date < now() AND promotion_end_date > now() AND promo_detail_cust_division_id = 1 AND promo_detail_not_expired = 1 AND promo_detail_store_id in (8214, 8217, 4952, 8194, 8198, 8162, 5010, 5011, 5012, 8219, 8182, 5048, 5076, 5095, 5096, 5102, 5109, 5131, 5156, 5160, 5161, 5165, 5166, 5173, 5182, 5198, 5200, 5201, 5202, 5203, 5227, 5228, 5229, 5230, 5232, 5233, 5234, <bunch of other comma-separated numbers omitted>, 9281) ORDER BY promotion_end_date ASC 
```

编辑：也许这是展示正在发生的事情以及为什么它很奇怪的最简洁的方式：

```
promo_u = promotions.models.Promotions.objects.raw(sql % (1, storeRestrictStr))
promo_s = promotions.models.Promotions.objects.raw(sql, (1, storeRestrictStr))

pid_u = [s.promotion_id for s in promo_u]
pid_s = [s.promotion_id for s in promo_s]

In [76]: [len(list(pid_u)), len(list(pid_s))]
Out[76]: [22, 10]

# You can see the smaller number of results is a subset of the larger.
In [77]: [pid in pid_u for pid in pid_s]
Out[77]: [True, True, True, True, True, True, True, True, True, True]

# The larger number results shows no obvious pattern as to why they're missing.
In [87]: [pid in pid_s for pid in pid_u]
Out[87]: [False, False, False, False, True, False, False, False, True, True, True, True,
          True, False, True, False, False, True, False, True, False, True] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T05:17:31.380

字符串替换的问题[是没有正确引用，因为它们在参数替换中。](https://docs.djangoproject.com/en/dev/topics/db/sql/#passing-parameters-into-raw)也就是说，引用可能会做一些你意想不到的事情。一些事情要尝试：

*   现在，您将 ID 列表作为字符串 ( `storeRestrictStr`) 传递。尝试将其作为列表传递。

*   安装[Django Debug Toolbar](https://github.com/django-debug-toolbar/django-debug-toolbar)并使用它来查看正在生成的实际 SQL 及其输出。

*   您还没有说这 10 个结果是否正确而 22 个结果是否有 12 个错误匹配，或者 22 个结果是否正确而 10 个结果是否缺少 12 个，或者介于两者之间。

# c - 此代码实现是否已定义？

> ID：12381398
> 
> 赞同：5
> 
> 时间：2012-09-12T04:49:53.420
> 
> 标签：c, pointers

```
#include<stdio.h>

int main (void)
{
  int i=257;
  int *ptr=&i;

  printf("%d%d",*((char*)ptr),*((char*)ptr+1));
  return 0;
} 
```

上述代码实现的输出是否已定义，并且输出在 little endian 和 big endian 机器之间会有所不同？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T04:55:52.553

是的。在运行时检测字节序的经典方法如下：

```
uint32_t var = 1;
uint8_t *ptr = (uint8_t*)&var;

if(*ptr) puts("Little Endian");
else puts("Big Endian"); 
```

即使 257 => 0x0101，int 很可能是 32 位，在这种情况下，在 BE 机器上它将打印 00，在 LE 上打印 11。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T04:56:18.123

是的，它会的。我总是这样写，因为我不确定运算符优先级：

```
*(((char*)ptr)+1) 
```

并实现你想要的改变你`%d`的`%c`格式字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T05:00:17.547

是的，这将是实现定义的行为。

当您转换`ptr`并`(char *)`访问第一个内存位置时，将访问存储在内存中的第一个字节，这取决于系统是大端还是小端系统。

在调用`printf`函数之前，对参数进行评估。并且如上所述的这种评估对于不同的系统会得到不同的值。因此它是实现定义的。

# mongodb - Mongo shard：如何基于_id（整数）平均平衡服务器

> ID：12381399
> 
> 赞同：0
> 
> 时间：2012-09-12T04:49:54.023
> 
> 标签：mongodb, sharding

*   我们想在一个分片中使用 2 个 mongo 服务器
*   数据库中只有一个集合（约 1.1 亿条记录）。
*   活动主要是写作，添加新记录，更新旧记录
*   记录只有两个字段：_id 和一个数组 { :_id => 12345, :pp => [ stuff, stuff, ... ] }
*   _id其实就是我们的用户id，整数
*   _id 是集合中的唯一索引
*   我们希望分片键基于：_id%2

即 _id=1 到服务器 1，_id=2 到服务器 2，_id=3 到服务器 1，_id=>4 到服务器 2……等等

（因为 _ids 是线性的，我们希望两台服务器在写入时同样平衡）

我们如何为此配置 mongos？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:15:09.603

您可以利用在 Mongo 2.2 版本中添加的标签感知分片功能。 [http://www.mongodb.org/display/DOCS/Tag+Aware+Sharding](http://www.mongodb.org/display/DOCS/Tag+Aware+Sharding)

用例功能用于（地理分布）与您的案例非常不同。

默认情况下（非标签感知选项）Mongo 有效地管理跨集群的数据拆分。提供具有均匀分布值的分片键，并且查询可能必须查看具有连续值的文档，mongo 使用的默认算法是最佳的。它还将重新平衡以确保数据均匀分布（在您可以配置的范围内）。最好不要在不了解其含义的情况下更改它。

默认算法是将分片键值分解为范围块（块），然后将块分配给分片的不同成员。

更多详情请参阅以下页面。

[http://docs.mongodb.org/manual/core/sharding/](http://docs.mongodb.org/manual/core/sharding/)

[http://docs.mongodb.org/manual/core/sharding-internals/#sharding-migration-thresholds](http://docs.mongodb.org/manual/core/sharding-internals/#sharding-migration-thresholds)

# c++ - 使用 libXML2 在 2 个元素之间获取 HTML

> ID：12381400
> 
> 赞同：0
> 
> 时间：2012-09-12T04:49:57.380
> 
> 标签：c++, c, libxml2

我必须在两个元素之间提取 HTML。例如

```
<html>
<head> </head>
<body>
<div>
<span id="start">                
<span> Some text </span>
<span> some other text</span> 
</span>
<span id="parent">                
<span id="target"> target node </span>
<span> some other text</span> 
</span>
</div>
</body>
</html> 
```

现在我想提取从 id 为“start”的 span 到 id 为“target”的 HTML 内容。

结果：

```
<span id="start">                
<span> Some text </span>
<span> some other text</span> 
</span>
<span>                
<span id="target"> target node </span> 
```

我能够使用以下方法提取 HTML：

我正在使用树解析方法。

```
htmlDocPtr xhtmlDoc = htmlReadFile(fileName.c_str(), "UTF-8",            HTML_PARSE_RECOVER|HTML_PARSE_NOERROR|HTML_PARSE_NOWARNING);

htmlNodePtr rootNodePtr = xmlDocGetRootElement(xhtmlDoc); 
```

然后我解析到所需的节点，然后我使用：

```
xmlBufferPtr nodeBuffer = xmlBufferCreate();
xmlNodeDump(nodeBuffer, xhtmlDoc, cur_node, 0, 1);
printf("%s\n",nodeBuffer->content); 
```

注意：cur_node 的类型为 xmlNode *

但问题是，当我到达 id 为“parent”的跨度并提取给定整个 HTML 内容的数据时，我得到：

```
<span id="start">                
<span> Some text </span>
<span> some other text</span> 
</span>
<span id="parent">                
<span id="target"> target node </span>
<span> some other text</span> 
</span> 
```

意味着额外的内容。我怎样才能达到预期的效果？

# sql-server-2008 - sql查询使用id和从给定日期开始的最后7天按数据分组

> ID：12381402
> 
> 赞同：2
> 
> 时间：2012-09-12T04:50:13.963
> 
> 标签：sql-server-2008, group-by

我有一个表，其中有如下列：

```
ItemId   Date        CountUser       CountUserPast7Days
1        20120101    20              null
1        20120102    15              null
1        20120208    12              null
2        20120209    65              null
2        20120611    32              null
2        20120615    20              null
3        20120901    45              null 
```

我想编写一个查询来更新 CountUserPast7Days 基于 - 按两个参数上的数据分组 - ItmeId 和 Date（过去 7 天）并对 CountUser 列求和。所以数据应该看起来像 -

```
ItemId   Date        CountUser    CountUserPast7Days
1        20120101    20           20 
1        20120102    15           35 
1        20120208    12           27 
2        20120209    65           65
2        20120611    32           32
2        20120615    20           52
3        20120901    45           45 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T05:16:42.583

您的示例输出有问题，因为 2012/01/02 和 2012/02/08 之间有一个多月，但我还是明白了您的意思。您正在寻找的是自加入：

```
SELECT S1.Item, S1.Date, SUM(S2.Count) As CountPast7 FROM SlidingHitCount S1
  INNER JOIN SlidingHitCount S2 on S1.Item = S2.Item
WHERE S2.Date BETWEEN DATEADD(dd, -7, S1.Date) AND S1.Date
GROUP BY S1.Item, S1.Date 
```

显然，我将您的表称为“SlidingHitCount”。

# postgresql - 如何改进查询以选择在 PostgreSQL 中使用连接表的具有 MAX 日期的记录？

> ID：12381403
> 
> 赞同：2
> 
> 时间：2012-09-12T04:50:14.833
> 
> 标签：postgresql, join, subquery, relational, maxdate

我有如下三张大桌子......

```
property
--------
property_id
other_prop_data

transfer_property
-----------------
property_id
transfer_id

transfer
--------
transfer_id
contract_date
transfer_price 
```

我想返回在“2012-01-01”和“2012-06-30”之间发生的所有转移的唯一属性 ID 列表。这是我到目前为止的代码......

```
SELECT *
FROM property p
JOIN
(
  SELECT t.transfer_id, t.contract_date, t.transfer_price::integer, tp.property_id
  FROM transfer t
  LEFT JOIN transfer_property tp ON tp.transfer_id = t.transfer_id
  WHERE t.contract_date BETWEEN '2012-01-01' AND '2012-06-30'
) transfer1 ON transfer1.property_id = p.property_id

AND NOT EXISTS
(
  SELECT transfer2.transfer_id
  FROM
  (
    SELECT t.transfer_id, t.contract_date, t.transfer_price::integer, tp.property_id
    FROM transfer t
    LEFT JOIN transfer_property tp ON tp.transfer_id = t.transfer_id
    WHERE t.contract_date BETWEEN '2012-01-01' AND '2012-06-30'
  ) AS transfer2
  WHERE transfer2.property_id = transfer1.property_id
  AND transfer2.contract_date > transfer1.contract_date
) 
```

这有效（我认为）但非常慢。

我在...中发现了几个类似的查询... [https://stackoverflow.com/questions/tagged/greatest-n-per-group](https://stackoverflow.com/questions/tagged/greatest-n-per-group) ...但我发现的大多数查询都是与同一张表的自连接，而不是连接关系表如上。

我知道在 MySQL 中您可以使用用户变量，但我不知道如何在 PostgreSQL 中执行此操作，或者在这种情况下它是否是理想的解决方案。

有没有人对如何改进这个查询有任何建议（或者甚至如何使用与我上面完全不同的方法来做到这一点）？

很感谢任何形式的帮助。谢谢！

问候，

克里斯

PS：也尝试过 DISTINCT 和 MAX 的变体，但不相信他们会以我使用它们的方式选择最近日期的记录。

编辑：对不起伙计们，我还应该补充一点，我正在 PGADMIN 1.12.3 中运行我的查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T06:28:34.797

尝试`ROW_NUMBER() OVER`在 PostgreSQL 中使用。这是一个[SQLFiddle 示例](http://sqlfiddle.com/#!1/e8c25/3)：

```
SELECT *
FROM property p
JOIN
(
  SELECT t.transfer_id, t.contract_date, 
         t.transfer_price::integer, tp.property_id,
         row_number() over 
           (PARTITION BY tp.property_id 
            ORDER BY t.contract_date desc) as rn
  FROM transfer t
  LEFT JOIN transfer_property tp 
        ON tp.transfer_id = t.transfer_id
  WHERE t.contract_date BETWEEN '2012-01-01' 
                            AND '2012-06-30'
) transfer1 
       ON transfer1.property_id = p.property_id
where transfer1.rn = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:07:08.590

Given the skeleton tables:

```
create table property( property_id serial primary key );

create table transfer(
    transfer_id serial primary key,
    contract_date date not null
);

create table transfer_property (
    property_id integer references property(property_id),
    transfer_id integer references transfer(transfer_id)
); 
```

and data:

```
insert into property
select nextval('property_property_id_seq') 
from generate_series(1,10);

insert into transfer 
select nextval('transfer_transfer_id_seq'), 
       DATE '2012-01-01' + x * INTERVAL '1 month'
from generate_series(1,10) x;

-- Repeat this 4 or 5 times to produce a pile of duplicate entries
insert into transfer_property (transfer_id,property_id)
select transfer_id, property_id
from property cross join transfer
order by random()
limit 40; 
```

use:

```
select distinct property_id 
from transfer_property tp inner join transfer t on (tp.transfer_id = t.transfer_id)
where t.contract_date between  '2012-01-01' and '2012-06-30'; 
```

Inadequate/misinterpreted? **Please post sample data and a real schema that shows the meaningful relationships and expected results**.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T11:26:24.947

“我想返回在 '2012-01-01' 和 '2012-06-30' 之间发生的所有转移的唯一属性 ID 列表。”

对我来说，这表现为：

```
SELECT DISTINCT tp.property_id
  FROM transfer t
  JOIN transfer_property tp ON tp.transfer_id = t.transfer_id
  WHERE t.contract_date BETWEEN '2012-01-01' AND '2012-06-30'
     ; 
```

现在把它放在一个 CTE 或子查询中，你就完成了：

```
WITH x1 AS (
      SELECT DISTINCT tp.property_id AS property_id
      FROM transfer t
      JOIN transfer_property tp ON tp.transfer_id = t.transfer_id
      WHERE t.contract_date BETWEEN '2012-01-01' AND '2012-06-30'
      )
SELECT ...
FROM property p
JOIN x1 ON x1.property_id = p.property_id
    ; 
```

我不明白 NOT EXISTS 子查询的目的。你只对MAX感兴趣？

更新：看起来（从标题）你只想要 maxdate。可以通过您不存在的构造或子查询中的此 MAX(...) 来完成；喜欢 ... ：

```
WITH m1 AS (
      SELECT DISTINCT tp.property_id AS property_id
        , MAX(t.contract_date) AS contract_date
      FROM transfer t
      JOIN transfer_property tp ON tp.transfer_id = t.transfer_id
      WHERE t.contract_date BETWEEN '2012-01-01' AND '2012-06-30'
        GROUP BY tp.property_id
      )
SELECT ...
FROM property p
JOIN m1 ON m1.property_id = p.property_id
    ; 
```

# python - Python：在一行中拆分、剥离和连接

> ID：12381408
> 
> 赞同：12
> 
> 时间：2012-09-12T04:51:01.827
> 
> 标签：python, join, split, list-comprehension, trim

我很好奇他们是否是一些我可能不知道完成一点轻浮的蟒蛇魔法

给定行：

```
csvData.append(','.join([line.split(":").strip() for x in L])) 
```

我试图在 上分割一条线`:`，修剪它周围的空白，然后加入`,`

问题是，由于数组是从 中返回的`line.split(":")`，所以

```
for x in L #<== L doesn't exist! 
```

导致问题，因为我没有返回的数组的名称`line.split(":")`

所以我很好奇是否有一种性感的语法可以用来一次性完成这个任务？

干杯!

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-12T04:54:23.213

```
>>> line = 'a: b :c:d:e  :f:gh   '
>>> ','.join(x.strip() for x in line.split(':'))
'a,b,c,d,e,f,gh' 
```

你也可以这样做：

```
>>> line.replace(':',',').replace(' ','')
'a,b,c,d,e,f,gh' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T04:53:56.627

就像是？：

```
>>> L = "1:2:3:4"
>>> result = ",".join([item.strip() for item in L.split(":")])
>>> result
'1,2,3,4' 
```

掌握列表推导需要一段时间。当您分解它们时，它们基本上只是打包的循环。

因此，在学习时，尝试将其分解为正常循环，然后将其转换为列表推导式。

在您的示例中，您没有在`line`任何地方分配变量，因此即使在标准循环中也会出现错误。

```
>>> for x in L:
...     items = line.split(":")
...
Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
NameError: name 'line' is not defined
>>> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T04:55:26.280

给定一个字符串 S：

```
','.join([x.strip() for x in s.split(':')]) 
```

# iphone - IOS 中的警报通知

> ID：12381414
> 
> 赞同：0
> 
> 时间：2012-09-12T04:51:25.727
> 
> 标签：iphone, ios, cocoa-touch, notifications, uialertview

在我的应用程序中，我想显示一个警报，例如用户上线..下线..就像那样。我尝试使用 UIAlertView，但它的大小比我想要的要大。我是IOS新手，我在堆栈溢出中进行了探索也没有得到确切的解决方案。任何人都给出一个想法..我必须为这种情况显示什么样的通知。

需要：没有尺寸更小的没有确定按钮的通知，应该在几秒钟后自动隐藏。（例如：Android 中的 Toast 消息）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T04:57:22.317

查看[AJNotificationView 之类的库](https://www.cocoacontrols.com/controls/ajnotificationview)

[![](../Images/e33a847cd795e6035863c0c9c2d2a52f.png)](https://i.stack.imgur.com/zkd0h.png)

或[JSNotifier](https://www.cocoacontrols.com/controls/jsnotifier)

[![](../Images/176c5b8e6ec74b76d218a94ed6167b73.png)](https://i.stack.imgur.com/MX21c.png)

或 HUD 库，如 SVStatusHUD 或 MBProgressHUD

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T04:58:03.430

如果您只想显示一个带有消息的小警报，那么您可以这样做：

```
UIAlertView *doneAlert = [[UIAlertView alloc] init];
UILabel *lblText = [[UILabel alloc] initWithFrame:CGRectMake(0, 30, 300, 22)];
lblText.text = @"User came Online\n";
lblText.font = [UIFont systemFontOfSize:15.0f];
lblText.numberOfLines = 2;
lblText.textAlignment = UITextAlignmentCenter;
lblText.backgroundColor = [UIColor clearColor];
lblText.textColor = [UIColor whiteColor];
lblText.center = CGPointMake(140, 45);
[doneAlert addSubview:lblText];
[doneAlert show]; 
```

它将显示一个仅包含消息的小警报框。

编辑：

像这样自动隐藏：

```
[NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(closeAlert) userInfo:nil repeats:NO]; 
```

然后方法`closeAlert`

```
-(void)closeAlert {
    [doneAlert dismissWithClickedButtonIndex:0 animated:YES];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T06:28:50.713

Apple 没有提供任何内置 API，我猜它的行为类似于 Android 中的烤消息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-15T02:14:32.187

你可以试试[ALAlertBanner](https://github.com/alobi/ALAlertBanner)。这是我刚刚完成的一个项目。它具有点击关闭、自动隐藏和其他几个不错的功能。

这是一个屏幕截图：

![警报横幅](../Images/b06a16adeec26ed5d606f71211f023c0.png)

# yii - 在 css 文件夹中编辑 css 但显示没有任何变化

> ID：12381415
> 
> 赞同：-1
> 
> 时间：2012-09-12T04:51:31.667
> 
> 标签：yii, yii-extensions

我试图在 yii 中编辑 css，我打开 css 文件夹然后编辑 form.css，但没有任何改变。这怎么会发生？

我试图从 siteController 更改文件 index.php，并在 css 文件夹中打开 css 文件，但所有更改都没有反映在 css 文件中。真的我需要帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:51:37.593

您是否重新发布了资产？删除 assets 文件夹的内容就足够了。

[http://www.yiiframework.com/wiki/148/understanding-assets/](http://www.yiiframework.com/wiki/148/understanding-assets/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T05:38:39.240

首先通过在 yii 入口脚本中进行一些更改来将您的应用程序转换为生产/开发模式。

变化是：

```
/ Enable debug mode for development environment
  defined( 'YII_DEBUG' ) or define( 'YII_DEBUG', true );

// Specify how many levels of call stack should be shown in each log message
defined( 'YII_TRACE_LEVEL' ) or define( 'YII_TRACE_LEVEL', 3 ); 
```

在此之后如果问题仍然存在，您应该删除资产文件夹的内容。我相信这样做之后你的问题就会得到解决。

# c# - 将外部应用程序嵌入 WinCE 平台的 Winform

> ID：12381425
> 
> 赞同：0
> 
> 时间：2012-09-12T04:53:18.893
> 
> 标签：c#, winforms, windows-ce

我想知道是否有人对如何将 Windows 应用程序（notepad.exe）嵌入 Winform 有任何想法。我在网上找到了一个将单词嵌入winform的桌面应用程序示例（http://www.codeproject.com/Articles/11819/Integrating-Microsoft-Word-in-your-NET-application），但不确定我将如何对 notepad.exe 或 Win CE 平台中的任何其他可执行文件执行此操作。它还使用记事本没有的互操作程序集，并且 coredll.dll 缺少 user32.dll 中的一些菜单功能。

我还查看了使用活动 X 和 opennetCF 的 AxHost 库的 MS 示例，但它使用了 DLL 中的公开函数（WMPLib.dll 和 ShockWaveObjects.dll）。我已经尝试过这个示例并将 DLL 复制到我的 windows 文件夹，但它崩溃并出现异常消息“类未注册”。

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T02:22:36.073

您可以通过将可执行文件作为不同的进程运行，然后将进程的父窗口更改为您的 winform 中的一个来实现这一点。这个指向 MSDN 的[链接](http://msdn.microsoft.com/en-us/library/ms961506.aspx)显示 WinCE API 公开了 SetParent 方法。

相同的代码在桌面应用程序中对我有用，所以一切顺利，它也适用于移动平台。

# html - 为此按钮创建渐变

> ID：12381429
> 
> 赞同：4
> 
> 时间：2012-09-12T04:53:55.370
> 
> 标签：html, css

我试图为背景按钮实现这种效果，注意到它的效果就像一个波浪。有什么方法可以定义渐变或 css 函数来完成此任务吗？

![在此处输入图像描述](../Images/a201dbda8f1a2e8f4f8af6879237793a.png)

我能得到的最多的是垂直或水平线的渐变，但不像 Wave

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T07:26:04.527

我不是 CSS 专家，但这是我的解决方案（纯 CSS）。仅在 FF 中测试。

![波浪线纯CSS](../Images/8c85010832c4f88f95b18bb1663b780c.png)

[演示](http://jsfiddle.net/fzUVF/)

* * *

按照例子修改：

![波浪线纯CSS](../Images/85e4cb299496819e0cce924136f3ad4c.png)

[演示](http://jsfiddle.net/YPHKG/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T06:01:32.340

如果仅使用 CSS 就可以做到这一点，也没有简单的方法。你能得到的最接近的是 :before 和 :after 伪类的某种组合，每个伪类都有自己的径向渐变，但即使那样它也不会完全匹配。

您也可以使用堆叠的多个渐变，但又不是完全匹配。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-12T05:17:58.953

我认为这可能会帮助你[CSS Gradient Button](http://webdesignerwall.com/tutorials/css3-gradient-buttons)和[这里](http://www.red-team-design.com/cross-browser-css-gradient-buttons)

# actionscript-3 - As3 设置为 null 和 .dispose() 之间的区别

> ID：12381438
> 
> 赞同：0
> 
> 时间：2012-09-12T04:54:43.723
> 
> 标签：actionscript-3

我来优化我的 Flash 应用程序。

只是一个简单的问题， null 和 dispose 有什么不同？

什么情况下使用哪个？

非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:03:57.940

`null`和的区别`dispose()`：

`null`消除对占用内存的对象的一个​​引用。

`dispose()`调用可以做任何事情的代码，但通常用于设置一个或多个对`null`.

我已经习惯于`dispose()`向任何创建、拥有或管理另一个占用内存并且可能需要在将来某个时候进行垃圾收集的对象的对象添加公共调用。事实上，我创建了一个名为的接口`IDisposable`，以确保我不会忘记添加必要的调用：

```
interface IDisposable
{
    function get isDisposed():Boolean;
    function dispose():void;
} 
```

后来，在任何实现接口的对象中......

```
private var _isDisposed:Boolean = false;
public function get isDisposed():Boolean
{
    return _isDisposed;
}

public function dispose():void
{
    if( isDisposed )  return;
    //  TODO: Call dispose() on any owned objects
    //  and set all complex objects to null.
    _isDisposed = true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T05:08:25.273

设置为 null 更安全，因为它允许 GC 仅在对象从任何地方变为未引用后才收集该对象。例如，如果您 dispose() 仍然引用的 BitmapData，您将收到异常。如果您绝对确定某个对象没有从任何地方引用，例如，如果所讨论的 BitmapData 是临时的，并且只有一个引用，您可以使用 dispose() 来释放内存。在快速分配/释放临时对象的情况下，最好的解决方案是为它们保留内存并在需要时实际重用它们。

# c++ - 在 JUCE C++ 中创建 VST 插件有很好的教程吗？

> ID：12381439
> 
> 赞同：4
> 
> 时间：2012-09-12T04:54:44.020
> 
> 标签：c++, visual-studio-2008, audio, vst, juce

我想用 C++ 制作 VST 插件。我读到 JUCE 库比使用 Steinberg SDK 更好。我的问题是，当我使用 Google 教程时，它仅涵盖与应用程序开发有关的通用主题，而不是该库最初设计的专用音频插件接口。

我正在寻找一个包含使用 JUCE 框架制作 VST 插件（可能是一个简单的效果，如低通滤波器）的教程。或者，如果有人可以告诉我在 Visual Studio (2008) 中开发 VST 插件的更好或更简单的方法，并链接到可以帮助我入门的资源。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T17:04:51.093

开发 VST 插件没有简单的方法，它们需要先进的信号处理和编程知识。

这里有一些链接可以帮助您进行插件开发

[KVR 音频：DSP / 插件 / 主机开发](http://www.kvraudio.com/forum/viewtopic.php?t=30071&sid=702bf56e5331dc6b97c4a7bddce04065)
[KVR 音频：如何创建 VST 插件](http://www.kvraudio.com/forum/viewtopic.php?f=33&t=329696)

对于 JUCE C++ 框架，没有太多功能齐全的教程，因此您必须通过阅读代码和理解它来学习。

对于滤波器设计，我建议查看**vinniefalco**的 DSPFilters。这是用于信号处理的 C++ 类的集合。它使用 JUCE C++ 框架。所以我建议你检查一下。

[https://github.com/vinniefalco/DSPFilters](https://github.com/vinniefalco/DSPFilters)

您还可以查看 TAL 插件。其中一些插件是使用 JUCE C++ 制作的，其源代码可在其网站上免费获得。

对于过滤器，有 Tal-Filter，下载位于源代码部分下方。

[http://kunz.corrupt.ch/Products/TAL-Filter](http://kunz.corrupt.ch/Products/TAL-Filter)

对于减法合成器 Tal-NoiseMaker，源代码下载位于源代码部分下方。

[http://kunz.corrupt.ch/Products/TAL-NoiseMaker](http://kunz.corrupt.ch/Products/TAL-NoiseMaker)

这两个插件源代码都是开源的，并且使用 JUCE C++ 框架。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-05T17:44:59.290

现在我推荐使用[WDL](http://www.cockos.com/wdl/)而不是 JUCE。WDL 可免费用于商业用途，您可以从一个代码库构建 Win/Mac、32/64 位、VST2/VST3/AU/RTAS/AAX 和独立版本。

有一个[教程系列](http://martin-finke.de/blog/tags/making_audio_plugins.html)展示了如何开始。

# bash - 我的 $PS1 \h 显示为“未知”。在 .bash_profile 中设置

> ID：12381442
> 
> 赞同：-1
> 
> 时间：2012-09-12T04:54:54.317
> 
> 标签：bash, command-line, terminal, .bash-profile

我`$PS1`在 Bash 中设置为：

```
\[${BOLD}${MAGENTA}\]\u \[$WHITE\]at \[$ORANGE\]\h \[$WHITE\]in \[$GREEN\]\w\[$WHITE\]\$([[ -n \$(git branch 2> /dev/null) ]] && echo \" on \")\[$PURPLE\]\$(parse_git_branch)\[$WHITE\] 
```

但显示如下：

```
Jesse at unknown2837371d98a2 in ~ 
```

为什么我的主机名 ( `\h`) 显示为未知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:08:33.477

问题是你有这样的主机名。请使用`hostname`.

# python - pygame主循环中的扭曲客户端？

> ID：12381446
> 
> 赞同：6
> 
> 时间：2012-09-12T04:55:10.123
> 
> 标签：python, twisted, pygame, main

我正在尝试使用 pygame-clients 运行一个扭曲的服务器：

```
class ChatClientProtocol(LineReceiver):
    def lineReceived(self,line):
        print (line)

class ChatClient(ClientFactory):
    def __init__(self):
        self.protocol = ChatClientProtocol

def main():
    flag = 0
    default_screen()
    while True:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                return
            elif event.type == pygame.KEYDOWN and event.key == pygame.K_ESCAPE:
               return
            elif event.type == pygame.MOUSEBUTTONDOWN and event.button == 1:
                pos = pygame.mouse.get_pos()
                # some rect.collidepoint(pos) rest of loop... 
```

这是服务器：

```
from twisted.internet.protocol import Factory
from twisted.protocols.basic import LineReceiver
from twisted.internet import reactor

class Chat(LineReceiver):
    def __init__(self, users, players):
        self.users = users
        self.name = None
        self.players = players

    def connectionMade(self):
        new = 'player_' + str(len(self.players) + 1)
        self.players.append(new)
        self.sendLine(str(self.players,))

class ChatFactory(Factory):
    def __init__(self):
        self.users = {} #maps instances to clients 
        self.players = []

    def buildProtocol(self, addr):
        return Chat(self.users,self.players)

reactor.listenTCP(6000, ChatFactory())
reactor.run() 
```

我正在使用没有 reactor.CallLater() 方法和 pygames 代码的客户端代码运行此服务器，并且客户端连接良好。我使用 reactor 方法是错误的还是 pygames 代码在结构上存在问题？任何帮助，将不胜感激。

所以我不知道 pygames 位中的循环是否会再次中断以再次调用反应器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T06:25:04.660

使用twisted 时*不*应该编写自己的主循环（带有）。`while`twisted 必须控制主循环，而 pygame 足够灵活，无需关心（它不需要*自己的*循环）。

您应该将主循环内的所有内容都放入一个函数中，并通过调用`reactor.CallLater()`

```
def main():
    flag = 0
    default_screen()
    reactor.callLater(0.1, tick)

def tick():
   for event in pygame.event.get():
        if event.type == pygame.QUIT:
            reactor.stop() # just stop somehow
        elif event.type == pygame.KEYDOWN and event.key == pygame.K_ESCAPE:
            reactor.stop() # just stop somehow
        elif event.type == pygame.MOUSEBUTTONDOWN and event.button == 1:
            pos = pygame.mouse.get_pos()
            # some stuff
   reactor.callLater(0.1, tick) 
```

这样，您可以确保反应器运行并可以处理网络事件。

* * *

这是客户端的一个小型工作示例，它将仅呈现收到的最后一行：

```
from twisted.internet import reactor
from twisted.internet.protocol import ClientFactory
from twisted.protocols.basic import LineReceiver

import pygame

class ChatClientProtocol(LineReceiver):

    def __init__(self, recv):
        self.recv = recv

    def lineReceived(self,line):
        self.recv(line)

class ChatClient(ClientFactory):
    def __init__(self, recv):
        self.protocol = ChatClientProtocol
        self.recv = recv

    def buildProtocol(self, addr):
        return ChatClientProtocol(self.recv)

class Client(object):

    def __init__(self):
        self.line = 'no message'
        pygame.init()
        self.screen = pygame.display.set_mode((200, 200))
        reactor.callLater(0.1, self.tick)

    def new_line(self, line):
        self.line = line

    def tick(self):
        self.screen.fill((0,0,0))
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                reactor.stop() # just stop somehow
            elif event.type == pygame.KEYDOWN and event.key == pygame.K_ESCAPE:
                reactor.stop() # just stop somehow
        self.screen.blit(pygame.font.SysFont('mono', 12, bold=True).render(self.line, True, (0, 255, 0)), (20,20))
        pygame.display.flip()
        reactor.callLater(0.1, self.tick)

if __name__ == '__main__':
    c = Client()
    reactor.connectTCP('127.0.0.1',6000, ChatClient(c.new_line))    
    reactor.run() 
```

* * *

这是一个使用 的简单示例`LoopingCall`，正如 Glyph 所建议的那样（我省略了协议/工厂类，因为它们与上面相同）：

```
from twisted.internet.task import LoopingCall

class Client(object):

    def __init__(self):
        self.line = 'no message'
        pygame.init()
        self.screen = pygame.display.set_mode((200, 200))

    def new_line(self, line):
        self.line = line

    def tick(self):
        self.screen.fill((0,0,0))
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                reactor.stop() # just stop somehow
            elif event.type == pygame.KEYDOWN and event.key == pygame.K_ESCAPE:
                reactor.stop() # just stop somehow
        self.screen.blit(pygame.font.SysFont('mono', 12, bold=True).render(self.line, True, (0, 255, 0)), (20,20))
        pygame.display.flip()

if __name__ == '__main__':
    c = Client()

    lc = LoopingCall(c.tick)
    lc.start(0.1)
    reactor.connectTCP('127.0.0.1',6000, ChatClient(c.new_line))    
    reactor.run() 
```

# iphone - 将 uitableviewcontroller 设置为情节提要中 uinavigationcontroller 的 rootviewcontroller

> ID：12381453
> 
> 赞同：0
> 
> 时间：2012-09-12T04:55:40.647
> 
> 标签：iphone, objective-c, xcode4, uistoryboard

我正在开发一个我嵌入的 iPhone 应用程序`UITabbarController`和`UINavigationController`我的故事板。当我选择第一个选项卡时，它会加载带有 uitablecontroller 作为其 rootviewcontroller 的导航控制器。我`UITableViewController`再次设置了与`rootviewcontroller`下一个导航控制器对应的下一个选项卡相同的值。但它没有加载任何东西，我看到黑屏。我的问题是我是否可以将单个导航控制器设置`UITableViewController`为`rootviewcontroller`不同的导航控制器，其中每个导航控制器都嵌入在故事板的不同选项卡中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:35:23.800

不，你不能那样做。一个视图控制器最多可以在一个导航控制器的堆栈中。

# asp.net-mvc - 调用是模棱两可的 MVC ViewBag 隐藏输入

> ID：12381455
> 
> 赞同：1
> 
> 时间：2012-09-12T04:56:06.060
> 
> 标签：asp.net-mvc, viewbag

我的应用程序是 asp.net 我将一个变量从控制器传递到一个视图，使用：

```
 public ActionResult Create(long? learnerID)
    {
        learnerID = 211;
        ViewBag.learnerID = learnerID.Value;
        return View();
    } 
```

在视图中：

```
 <input type="text" value="<%=  ViewBag.learnerID %>" id="Learner_ID" name="Learner_ID" /> 
```

值 211 显示在表单中，我可以保存它，但是如果我将输入类型更改为隐藏或使用 style="display:none" 我收到以下错误：

```
The call is ambiguous between the following methods or properties: 'System.IO.TextWriter.Write(string, params object[])' and 'System.IO.TextWriter.Write(char[])' 
```

将不胜感激您的建议。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T04:58:34.027

尝试添加对 ToString() 的调用

```
<input type="text" value="<%=  ViewBag.learnerID.ToString() %>" id="Learner_ID" name="Learner_ID" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T05:03:20.487

使用 <%=HtmL.Hidden("Learner_ID", ViewBag.learnerID)%>。但最好使用强类型视图和类型 Html.HiddenFor(m=>m.LearnerID)

# java - Java Android 示例项目 NoClassDefFoundError

> ID：12381460
> 
> 赞同：1
> 
> 时间：2012-09-12T04:56:24.087
> 
> 标签：java, android, nfc

我正在学习使用 NFC 并简单地浏览 Android 包下载中包含的示例项目。当我去运行应用程序时，我遇到了一个

**09-12 04:51:41.548: W/dalvikvm(336): 异常 Ljava/lang/NoClassDefFoundError; 初始化 Lcom/example/android/nfc/record/UriRecord 时抛出；**

任何人都遇到过同样的问题，这似乎与 NDefMessageParser 类中的此方法有关。

```
public static List<ParsedNdefRecord> getRecords(NdefRecord[] records) 
{
    List<ParsedNdefRecord> elements = new ArrayList<ParsedNdefRecord>();
    for (NdefRecord record : records) {
        if (UriRecord.isUri(record)) {
            elements.add(UriRecord.parse(record));
        } else
        if (TextRecord.isText(record)) {
            elements.add(TextRecord.parse(record));
        } else if (SmartPoster.isPoster(record)) {
            elements.add(SmartPoster.parse(record));
        }
    }
    return elements;
} 
```

![下图显示数据作为参数传递给方法调用。](../Images/b60401b3125b8bbfd09cf1d04efa9120.png)

# c++ - 不使用 memcpy 的 DirectX11 映射顶点

> ID：12381469
> 
> 赞同：0
> 
> 时间：2012-09-12T04:58:03.187
> 
> 标签：c++, directx-11

显然我有一些关于使用 memcpy 将 vertexBuffers 映射到 GPU 的问题

这是我的初始代码

```
 D3D11_MAPPED_SUBRESOURCE MappedResource;
  ID3D11Buffer *pBuffer = s_vertexBuffers.pBuffers[i].Get();
  HRESULT hr = s_d3dContext->Map(pBuffer, 0, D3D11_MAP_WRITE_DISCARD, 0, &MappedResource);

  float *vertices = (float *) MappedResource.pData,
        *data = (float *)s_vertexBuffers.pData[i];
  int len = s_vertexBuffers.pStrides[i];
  if (i != VERTEX_BUFFER::COLOR)
  {
      len *= total;
  }

  memcpy(vertices, data, len);
  s_d3dContext->Unmap(pBuffer, 0); 
```

我要改变的是使用指针进行映射（将数据从缓冲区复制到 GPU）的方式，就像[这里](http://rastertek.com/dx11tut05.html)指出的那样，变成类似于 SetShaderParameters 函数（也在教程中），它使用指针来获取数据在缓冲区中并使用指针直接将数据复制到其中

基本上，行 float *vertices = (float *) MappedResource.pData 直到 memcpy(vertices, data, len);

将更改为类似于上述教程指出的内容

这就是我的代码现在的样子

```
VertexBuffers *dataPtr;
dataPtr = (VertexBuffers *)MappedResource.pData;
dataPtr->pBuffers[i] = s_vertexBuffers.pBuffers[i].Get();
dataPtr->pData[i] = s_vertexBuffers.pData[i];
dataPtr->pSizes[i] = s_vertexBuffers.pSizes[i];
dataPtr->pStrides[i] = s_vertexBuffers.pStrides[i];
if (i != VERTEX_BUFFER::COLOR) 
{
   dataPtr->pStrides[i] *= total;
} 
```

struct VertexBuffers 和 VERTEX_BUFFER 命名空间内容是

```
namespace VERTEX_BUFFER
{
    enum : int
    {
        POSITION,
        COLOR,
        TEXCOORD,
        COUNT
    };
}

 struct VertexBuffers
    {
        ComPtr<ID3D11Buffer>    pBuffers[VERTEX_BUFFER::COUNT];
        void*                   pData[VERTEX_BUFFER::COUNT];
        UINT                    pStrides[VERTEX_BUFFER::COUNT];
        UINT                    pSizes[VERTEX_BUFFER::COUNT];
    }; 
```

我认为问题是每当我尝试使用指针复制数据时，我都没有像 memcpy 那样考虑 len

由于我目前正在学习 DirectX 和编程，如果我的解释有些不对，请纠正我。

对不起，糟糕的代码和糟糕的编程技巧，以及糟糕的英语，干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T06:39:35.473

所以你想要这样的东西吗？

```
VertexBuffers *dataPtr;
dataPtr = (VertexBuffers *)MappedResource.pData;
dataPtr->pBuffers[i] = s_vertexBuffers.pBuffers[i].Get();
dataPtr->pSizes[i] = s_vertexBuffers.pSizes[i];
dataPtr->pStrides[i] = s_vertexBuffers.pStrides[i];
if (i != VERTEX_BUFFER::COLOR) 
{
   dataPtr->pStrides[i] *= total;
}
memcpy(dataPtr->pData[i], s_vertexBuffers.pData[i], dataPtr->pStrides[i]); 
```

正如您所发现的，当您有两个指针（例如 p 和 q）时，`p = q;`所做的就是复制指针。如果要复制指向的数据，则应编写`memcpy(p, q, size_of_data);`.

# python - 如何从日志文件加载所有 cPickle 转储？

> ID：12381471
> 
> 赞同：1
> 
> 时间：2012-09-12T04:58:11.273
> 
> 标签：python, zlib, pickle

我将运行将大量（~1000）相对较小（50 个键：值对字符串）字典写入日志文件的代码。我将通过一个自动执行此操作的程序来执行此操作。我正在考虑运行如下命令：

```
import random
import string
import cPickle as pickle
import zlib

fieldNames = ['AICc','Npix','Nparameters','DoF','chi-square','chi-square_nu']

tempDict = {}
overview = {}
iterList = []

# Create example dictionary to add to the log.
for item in fieldNames:
  tempDict[item] = random.choice([random.uniform(2,5), '', ''.join([random.choice(string.lowercase) for x in range(5)])])

# Compress and pickle and add the example dictionary to the log.
# tried  with 'ab' and 'wb' 
# is .p.gz the right extension for this kind of file??
# with open('google.p.gz', 'wb') as fp: 
with open('google.p.gz', 'ab') as fp:
  fp.write(zlib.compress(pickle.dumps(tempDict, pickle.HIGHEST_PROTOCOL),9))

# Attempt to read in entire log
i = 0
with open('google.p.gz', 'rb') as fp:
  # Call pickle.loads until all dictionaries loaded. 
  while 1:
    try:     
      i += 1
      iterList.append(i)
      overview[i] = {}
      overview[i] = pickle.loads(zlib.decompress(fp.read()))
    except:
      break

print tempDict
print overview 
```

**我希望能够加载写入日志文件（google.p.gz）的最后一个字典，但它目前只加载第一个 pickle.dump**。

另外，有没有更好的方法来做我正在做的所有事情？我四处寻找，感觉就像我是唯一一个做这种事情的人，我发现过去这是一个不好的迹象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:28:37.043

您的输入和输出不匹配。当你输出你的记录时，你单独获取每条记录，腌制它，压缩它，然后将结果单独写入文件：

```
fp.write(zlib.compress(pickle.dumps(tempDict, pickle.HIGHEST_PROTOCOL),9)) 
```

但是当你输入你的记录时，你会读取*整个文件*，解压缩它，然后从中取出一个对象：

```
pickle.loads(zlib.decompress(fp.read())) 
```

所以下次你打电话`fp.read()`时什么都没有了：你第一次阅读了整个文件。

因此，您必须将输入与输出相匹配。如何做到这一点取决于您的确切要求。假设您的要求是：

1.  会有很多记录，需要在磁盘上压缩文件。

2.  所有记录都一次性写入文件（您无需附加单独的记录）。

3.  您不需要随机访问文件中的记录（您总是很乐意阅读整个文件以获取最后一条记录）。

有了这些要求，使用 . 单独压缩每个记录是个坏主意[`zlib`](http://docs.python.org/library/zlib.html)。使用的[DEFLATE 算法](http://en.wikipedia.org/wiki/DEFLATE)`zlib`通过查找重复序列来工作，因此最适用于大量数据。它不会对单张唱片起多大作用。所以让我们使用[`gzip`](http://docs.python.org/library/gzip.html)模块来压缩和解压整个文件。

当我浏览它时，我对您的代码进行了一些其他改进。

```
import cPickle as pickle
import gzip
import random
import string

field_names = 'AICc Npix Nparameters DoF chi-square chi-square_nu'.split()

random_value_constructors = [
    lambda: random.uniform(2,5),
    lambda: ''.join(random.choice(string.lowercase)
                    for x in xrange(random.randint(0, 5)))]

def random_value():
    """
    Return a random value, either a small floating-point number or a
    short string.
    """
    return random.choice(random_value_constructors)()

def random_record():
    """
    Create and return a random example record.
    """
    return {name: random_value() for name in field_names}

def write_records(filename, records):
    """
    Pickle each record in `records` and compress them to `filename`.
    """
    with gzip.open(filename, 'wb') as f:
        for r in records:
            pickle.dump(r, f, pickle.HIGHEST_PROTOCOL)

def read_records(filename):
    """
    Decompress `filename`, unpickle records from it, and yield them.
    """
    with gzip.open(filename, 'rb') as f:
        while True:
            try:
                yield pickle.load(f)
            except EOFError:
                return 
```

# asp.net - 一页丢失会话变量？

> ID：12381472
> 
> 赞同：0
> 
> 时间：2012-09-12T04:58:15.623
> 
> 标签：asp.net, vb.net

我在 asp.net 项目中有一个页面，该页面在加载后丢失了会话变量，并且使用任何浏览器。该项目大约有 50 页，除了这一页之外，其他所有页面都可以正常工作。

页面加载正常，并且会话项目在页面加载时存在（我通过添加一些 asp 标签来查看它们），但在回发时或者如果您离开此页面时则不存在。它只有一个从多个数据库填充的网格视图，都在同一服务器上，还有一个用于导航的 asp 菜单。它是 InProc，不使用网络场，不使用 response.redirect，并且我已经与 fiddler 进行了检查，并且会话没有回收。

我已经注释掉了 aspx 和 vb 页面上的所有代码，并将其替换为项目中另一个工作页面中的代码，这没有任何区别。我还应该看什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:13:35.023

尝试这个。添加新的 aspx 页面。将旧页面中的内容复制到此 aspx 页面。（HTML 和 Javascript）也复制这个新页面的服务器端代码。

看看它是否有帮助。有时只需创建新页面即可解决非常奇怪的问题。

如果问题仍然存在，请注释所有代码并一一取消注释，然后查看您丢失会话的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T18:45:41.287

我更改了页面的名称并且它有效。

事实证明，如果不是回发，母版页加载事件有一行放弃会话，并且请求 url 中有“登录”。有问题的页面是最近登录的视图，称为 LastLogin，因此它在页面加载时放弃了会话。

# android - 当我们再次使用intent再次调用活动而不在android中完成它时，已经创建了多少个实例？

> ID：12381477
> 
> 赞同：3
> 
> 时间：2012-09-12T04:59:21.933
> 
> 标签：android, android-activity

在我的活动中，AI 正在使用 Intent 调用活动 B。在 Activity BI 中覆盖了 onBackPressed() 并且我正在调用 Activity A，但不使用 finish()。那么当我们再次从 A 调用活动 B 时，是使用相同的活动 B 实例还是创建新实例？在没有完成活动的情况下再次调用 n 是不是坏主意？如果是，如何防止每次都创建活动 B 的新实例？在这种情况下，清单中的 android:launchMode="singleTask" 是否有帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T06:09:35.987

您可以在调用活动之前在意图中设置**FLAG_ACTIVITY_REORDER_TO_FRONT标志。**如果已启动，此标志将导致已启动的活动被带到其任务历史堆栈的前面，因此不会创建该活动的新实例。例如

```
Intent settingIntent = new Intent(ActivityA.this, ActivityB.class);                         
settingIntent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
ActivityA.this.startActivity(settingIntent); 
```

# php - 用php创建一个日志文件

> ID：12381479
> 
> 赞同：-1
> 
> 时间：2012-09-12T04:59:51.240
> 
> 标签：php, mysql

我的注册页面是这样的

```
$checkForUser = mysql_query("SELECT id FROM `users` WHERE `username`='{$posts['username']}' OR `email`='{$posts['email']}'");
$checkForUserRows = mysql_num_rows($checkForUser);

$ip = VisitorIP();
$checkForIP = mysql_query("SELECT id FROM `users` WHERE `ip`='{$ip}'");
$checkForIPRows = mysql_num_rows($checkForIP);

if ($checkForUserRows > 0) {
    $error = "Username or email already registered!";
}else if ($checkForIPRows > 0)  {
    $error = "You may only have one account! This attempt has been logged. You will be banned! "; 
```

我想自动禁止ip已经存在的帐户，出现以下错误`$error = "You may only have one account! This attempt has been logged. You will be banned! ";`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T05:05:13.010

只需用 fwrite [http://php.net/manual/en/function.fwrite.php写一个日志文件](http://php.net/manual/en/function.fwrite.php)

要禁止 ip，您需要在代码开头进行 ip 检查。您可能应该向数据库“禁止”添加一个 bool 列。

# mysql - 查询以选择具有相同列值（日期）的最后一条记录

> ID：12381480
> 
> 赞同：1
> 
> 时间：2012-09-12T05:00:04.360
> 
> 标签：mysql, sql

表模式

```
id              date
----            -------
1020            1990-02-15
1020            1990-02-15
1060            1990-02-15
1020            1990-03-15
1020            1990-03-15
1020            1990-02-10 
```

查询以选择具有相同日期且其中 id = 1020 日期格式 yyyy-mm-dd 的最后插入记录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T05:04:06.663

根据最后一条记录，我假设您的意思是日期最新的那个....

```
select * from table where id=1020 order by date desc limit 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T05:06:17.450

~~因为是 MySQL~~

 ~~```
SELECT * 
FROM table 
WHERE id=1020 
ORDER BY `date` desc 
LIMIT 1 
```~~ 

但我还有一个问题要问你，如果你有这样的记录怎么办？

```
1020            1/11/12
1020            1/12/12
1020            1/12/12
1020            1/13/12 
```

它会返回什么？

在您的情况下，`date`当前未格式化（*我猜它已保存为`VARCHAR`*），这就是为什么您需要使用函数将其格式化回日期`STR_TO_DATE`并使用所需格式从该显示中恢复。

```
SELECT DATE_FORMAT(STR_TO_DATE(`date`, '%m/%d/%y'), '%d-%m-%Y') lastDate
FROM table 
WHERE id = 1020 
ORDER BY `date` desc 
LIMIT 1 
```

 ~~**更新 1**

所以你需要具有相同日期的记录吗？试试这个编辑。为此，它创建了一个返回最新日期并具有相同日期的子查询。

```
SELECT *
FROM tablename
WHERE id = 1020 AND
        `Date` = (
                    SELECT  MAX(`date`) maxDate
                    FROM    tableName
                    GROUP BY `date`
                    HAVING COUNT(`DATE`) > 1
                 ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T05:16:01.777

这有帮助吗？

```
select max(date) from table where id=1020; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T05:38:06.260

尝试

```
SELECT * FROM schema WHERE id=1020 ORDERBY date DESC limit 1; 
```

或选择您喜欢的日期的最大值

```
SELECT MAX(date) from schema WHERE id = 1020; 
```~~

# jsf - 在中显示换行符

> ID：12381485
> 
> 赞同：1
> 
> 时间：2012-09-12T05:00:45.430
> 
> 标签：jsf, primefaces, terminal, newline

如何在 中显示换行符`<p:terminal>`？

下面的字符串

```
Id     name         memory
1     process1      234lk
2     process2       456k 
```

显示为

```
Id     name         memory/1     process1     234lk/2     process2     456k 
```

如何显示换行符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:07:36.333

好吧，在您的回复中添加一些 html。如果您在您的情况下使用html标签返回字符串格式，您可以像这样格式化它

```
<pre>Id     name         memory<br/>
1     process1      234lk<br/>
2     process2       456k<br/></pre> 
```

而且您的终端中已经有了换行符，并且您的空间被保留了。

# java - 如何在活动之间创建多任务处理？

> ID：12381489
> 
> 赞同：0
> 
> 时间：2012-09-12T05:01:13.743
> 
> 标签：java, android

我想一次显示两个活动，并且可以同时处理这两个活动。是否可以 ？如果可能的话，请给我一些例子。我正在使用 android 2.2 froyo。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T05:03:27.337

在 android 中，您一次不能显示多个 Activity。所以在活动之间创建多任务是不可能的。

# google-app-engine - Cron 作业计划解析错误

> ID：12381491
> 
> 赞同：1
> 
> 时间：2012-09-12T05:01:56.543
> 
> 标签：google-app-engine, cron

我正在尝试使用以下 cron.xml 文件部署我的应用程序：

```
<cronentries>
  <cron>
    <url>/parse/</url>
    <description>test</description>
    <schedule>every 20 seconds</schedule>
  </cron>
</cronentries> 
```

但是，我不断收到错误消息：

```
An internal error occurred during: "Deploying App to Google". Schedule every 20 seconds failed to parse 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T05:23:07.147

一分钟是您可以设置的最短时间。这是[cron 规则格式](https://developers.google.com/appengine/docs/java/config/cron#The_Schedule_Format)：

```
every N (hours|mins|minutes) ["from" (time) "to" (time)] 
```

# c - 在汇编器 AMD64 中编写 va_list

> ID：12381494
> 
> 赞同：0
> 
> 时间：2012-09-12T05:02:01.643
> 
> 标签：c, assembly, x86-64, variadic-functions

我必须为同事做一份工作，其中我必须用汇编语言为 AMD64 编写所有内容。

我被允许从 C 标准库中导入一些 C 函数（事实上，有些是强制性的），但我不知道如何使 VA_LIST 工作。（我被告知是使其中一些功能正常工作所必需的）

这里有一些 StackOverflow 的其他用户温和地建议我看看： [x86_64 va_list 结构的格式是什么？](https://stackoverflow.com/questions/4958384/what-is-the-format-of-the-x86-64-va-list-structure)

这就是我到目前为止所做的：

```
section .data
va_list: 

    dd 0; gp
    dd 0; fp
    dq 0; overflow
    dq 0; reg

    <code>
    mov [va_list+16], _direction_of_the_int_I_want_to_pass;
    mov rdx, va_list
    call _function_I_want_to_call 
```

由于某种原因，这不起作用。我应该以不同的方式创建 va_list 结构吗？其他数据应该不是0吗？（我的意思是，我的函数上没有使用任何堆栈）

# c# - 在整数数组中查找前 3 个最大重复数

> ID：12381495
> 
> 赞同：0
> 
> 时间：2012-09-12T05:02:22.407
> 
> 标签：c#

我想在整数数组中找到前 3 个最大重复数？

以下是我尝试过但找不到所需结果的代码：

```
static void Main(string[] args)
    {

      int[,] numbers = {
                           {1, 2, 0, 6 },
                           {5, 6, 7, 0 },
                           {9, 3, 6, 2 },
                           {6, 4, 8, 1 }
                        };           
        int count = 0;
        List<int> checkedNumbers = new List<int>();
        foreach (int t in numbers)
        {
            if (!checkedNumbers.Contains(t))
            {
               foreach (int m in numbers)                   
               {
                   if (m == t)                        
                      {   
                         count++;
                      }
                }
                Console.WriteLine("Number {0} is Repeated {1} Times ", t, count);
               count = 0;
                checkedNumbers.Add(t);
            }           
       }
        Console.ReadLine();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T05:09:03.283

您可以使用[`GroupBy`](http://msdn.microsoft.com/en-us/library/bb534501.aspx)LINQ 然后[`OrderByDescending`](http://msdn.microsoft.com/en-us/library/bb534855.aspx)根据每组中的计数：

```
var result = list.GroupBy(i => i)
                 .OrderByDescending(g => g.Count())
                 .Select(g => g.Key)
                 .Take(3); 
```

* * *

**编辑：**使用您的代码，您可以`OfType`用来展平矩阵，然后使用上面的代码：

```
int[,] numbers = {
                       {1, 2, 0, 6 },
                       {5, 6, 7, 0 },
                       {9, 3, 6, 2 },
                       {6, 4, 8, 1 }
                 };

var list = numbers.OfType<int>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T05:07:33.230

**暗示：**

您可以在 LINQ 的帮助下做到这一点。
这是查找最频繁出现的元素的代码：-

```
List<int> list = new List<int>() { 1,1,2,2,3,4,5 };

// group by value and count frequency
var query = from i in list
            group i by i into g
            select new {g.Key, Count = g.Count()};

// compute the maximum frequency
int frequency = query.Max(g => g.Count);

// find the values with that frequency
IEnumerable<int> modes = query
                              .Where(g => g.Count == frequency)
                              .Select(g => g.Key);

// dump to console
foreach(var mode in modes) {
    Console.WriteLine(mode);
} 
```

以同样的方式，您也可以找到其他两个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T05:06:32.630

```
int[] numbers = {1, 2, 3, 5, 6, 32, 2, 4, 42, 2, 4, 4, 5, 6, 3, 4};
var counts = new Dictionary<int, int>();
foreach (var number in numbers)
{
    counts[number] = counts[number] + 1;
}
var top3 = counts.OrderByDescending(x => x.Value).Select(x => x.Key).Take(3); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T05:27:02.603

我看到现有的答案都没有提供解释，所以我将尝试解释。

您需要做的是计算每个项目在数组中出现的次数。为此，有多种方法（字典、linq 等）。可能最容易使用包含数字的字典，以及它出现的次数：

```
int numbers[] = {1, 3, 6, 10, 9, 3, 3, 1, 10} ;
Dictionary<int, int> dic = new Dictionary<int, int>(); 
```

现在遍历数字中的每个元素，并将其添加到字典中。如果已经添加，只需增加计数值。

```
foreach (var i in numbers)
{
    dic[i]++; // Same as dic[i] = dic[i]+1;
} 
```

如果字典不存在，它会自动添加一个新项目，所以我们可以简单地做`dic[i]++;`

接下来，我们需要获得最高的 3 个值。同样，有很多方法可以做到这一点，但最简单的方法是对其进行排序。

```
var sorted_dic = dic.OrderByDescending(x => x.Value); 
```

现在，前 3 个项目`sorted_dic`将成为您要查找的 3 个值。有多种方法可以仅获取这 3 个，例如使用以下`Take`方法：

```
var first_3 = sorted_dic.Take(3); 
```

现在您可以遍历这 3 个值，例如在屏幕上打印它们：

```
foreach (var i in first_3)
{
    Console.Write("{0} appeared {1} times.", i.Key, i.Value);
} 
```

# java - 无法使用自定义表模型通过 table.getColumn 方法获取列索引

> ID：12381497
> 
> 赞同：3
> 
> 时间：2012-09-12T05:02:31.253
> 
> 标签：java, swing, jtable, jbutton, abstracttablemodel

我使用 AbstractTableModel 创建了一个自定义 TableModel。我能够填充我的 JTable。但是我的 JTable 有一个按钮列，显示为“Button1”。所以我使用 CellRenderer 方法将按钮添加到列，使用 CellEditor 添加操作，但我在 LINE:3 处遇到异常。

```
CustomModelForTable customTableModel = new CustomModelForTable(colNames, data);
tableA = new JTable(customTableModel);

**LINE:3** 
tableA.getColumn("Button1").setCellRenderer(new JButtonRendererClass());
tableA.getColumn("Button1").setCellEditor(new ButtonEditor(new JCheckBox())); 
```

我收到以下错误。

```
java.lang.IllegalArgumentException: Identifier not found
at javax.swing.table.DefaultTableColumnModel.getColumnIndex(DefaultTableColumnModel.java:265) 
```

我收到此错误是因为我无法从自定义表中获取列。但是有人可以帮我解决这个问题。

我正在使用以下[**源**](http://www.java2s.com/Code/Java/Swing-Components/ButtonTableExample.htm)来执行此任务。在这个来源中，他们使用的是 DefaultTableModel，而在我的情况下，我使用的是`AbstractTableModel`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T05:11:20.013

为了按标识符检索列，您必须使用[TableColumn.setIdentifier()](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/TableColumn.html#setIdentifier%28java.lang.Object%29)设置一个。

编辑：

请注意，根据规格`TableColumn.getIdentifier()`：

> 如果标识符为 null，则 getIdentifier() 默认返回 getHeaderValue。

这就是它在链接示例中的工作方式。

编辑：

```
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.DefaultTableCellRenderer;
import java.awt.GridLayout;

public class TableDemo extends JPanel {
    public TableDemo() {
        super(new GridLayout(1,0));

        JTable table = new JTable(new MyTableModel());

        JScrollPane scrollPane = new JScrollPane(table);

        add(scrollPane);

        table.getColumn("Column1").setCellRenderer(new TestCellRenderer());
        table.getColumn("Column2").setCellRenderer(new TestCellRenderer());
    }

    class TestCellRenderer extends DefaultTableCellRenderer{ }

    class MyTableModel extends AbstractTableModel {
        private String[] columnNames = { "Column1", "Column2" };
        private Object[][] data = { { "1", "1" }, { "2", "2" } };

        public int getColumnCount() {
            return columnNames.length;
        }

        public int getRowCount() {
            return data.length;
        }

        public String getColumnName(int col) {
            return columnNames[col];
        }

        public Object getValueAt(int row, int col) {
            return data[row][col];
        }
    }

    private static void createAndShowGUI() {
        JFrame frame = new JFrame("TableDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        TableDemo newContentPane = new TableDemo();
        newContentPane.setOpaque(true);
        frame.setContentPane(newContentPane);

        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T05:59:27.227

1.使用@camickr的表格[按钮列](http://tips4java.wordpress.com/2009/07/12/table-button-column/)

2\. `JButton`in`JTable`表示`String value`存储在 中`XxxTableModel`，则必须覆盖`ColumnClass`

```
 public Class getColumnClass(int column) {
        switch (column) {
            case 0:
                return Date.class;
            case 1:
                return Integer.class;
            case 2:
                return Long.class;
            case 3:
                return Double.class;
            case 4:
                return Boolean.class;
            case 5:
                return Icon.class;
            default:
                return String.class;
        }
    } 
```

列中的单元格应该是可编辑的

```
 public boolean isCellEditable(int row, int col) {
        switch (col) {
            case 0:
                return false;
            case 1:
                return false;
            default:
                return true;
        }
    } 
```

3.everything是关于你的`AbstractTableModel`，也许没有理由使用那个，使用`DefaultTableModel`之前，在你理解的情况下 `How XxxTableModel works`，那么你可以覆盖`JTable`with的方法`AbstractTableModel`

# mysql - MySQL触发器：在插入之前将记录与先前的记录进行比较

> ID：12381498
> 
> 赞同：0
> 
> 时间：2012-09-12T05:02:37.393
> 
> 标签：mysql, triggers

当我在 db 中插入数据时，我必须将当前记录与前一个记录进行比较。如果需要，需要修改当前记录的某些值。

我已经尝试了一些类似下面的 SQL，但都给出了 SQL 错误。这给我一个错误，说我选择了超过 1 条记录。

```
DELIMITER $$
 CREATE 
    TRIGGER set_moment_display
     BEFORE INSERT ON data
     FOR EACH ROW

     BEGIN
       DECLARE moment DATETIME;

       SELECT press_moment_1 INTO moment FROM data LIMIT 1;

       IF moment > NEW.press_moment_1 THEN SET NEW.press_moment_1 = moment;
       END IF;
     END$$
DELIMITER ; 
```

我如何实现我上面描述的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T05:18:10.143

您可以使用别名“OLD”。

```
You can refer to columns in the subject table 
(the table associated with the trigger) by using the aliases OLD and NEW. 
OLD.col_name refers to a column of an existing row before 
it is updated or deleted. NEW.col_name refers to the column 
of a new row to be inserted or an existing row after it is updated 
```

**更新**

Jim Garrison 正确地指出了我的错误，“BEFORE INSERT”没有“OLD”。值，此别名仅适用于 UPDATE 和 DELETE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T05:26:19.127

这里的问题是，由于 SQL 数据库没有隐含的行排序概念（您为每个查询提供排序标准），因此触发器没有“前一个”行可供查看。“先前插入的行”在插入触发器的上下文中没有任何意义。

假设它确实这样做了，并且有几个进程在表中插入行。当触发器为进程#1 的插入触发时，哪一行是“前一个”行？先前由进程#1 插入的那个？假设按时间顺序排列的“最新”行实际上是由进程#3 插入的？

如果您需要这样做，则无法在触发器中完成，除非您可以使用已知键值来识别您理解为“最新”的行。否则，它必须在执行插入的应用程序中处理。

# ruby-on-rails - Rails：控制器返回 500 错误，未调用模型

> ID：12381500
> 
> 赞同：0
> 
> 时间：2012-09-12T05:03:02.720
> 
> 标签：ruby-on-rails

我正在使用这个控制器来响应一个 ajax 请求，我想要完成的是，如果用户没有登录，因此 user_id = nil，不尝试保存投票并返回“err”部分.. .但是ajax返回500错误，想不通。具有 user_id 的 create 方法确实可以正常工作

```
def create
  unless params[:user_id].nil?
    @vote = Vote.new(:song_id => params[:song_id], :user_id => params[:user_id])
    @vote.save
    @song = Song.where(:id => params[:song_id])
    render :partial => "votes/ret", :locals => { :song => @song }, :layout => false, :status => :created
  else 
    render :partial => "votes/err", :layout => false
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T06:08:16.577

你的模型中有关联吗？比你解决这个问题要容易得多。

最好的办法是您可以了解关联并发布错误的控制台输出。

你可以改变

```
unless params[:user_id].nil? 
```

至：

```
if params[:user_id] 
```

这是相同的，更容易阅读。

最好的

# bash - 如何在不使用 if else 或 switch 或 while 循环的情况下使用 bash 获取当年每个月的最后一天？

> ID：12381501
> 
> 赞同：17
> 
> 时间：2012-09-12T05:03:03.327
> 
> 标签：bash, unix

我们知道，每年每个月的最大天数如下：

```
Jan - 31 days
Feb - 28 days / 29 days (leap year)
Mar - 31 days
Apr - 30 days
May - 31 days
Jun - 30 days
Jul - 31 days
Aug - 31 days
Sep - 30 days
Oct - 31 days
Nov - 30 days
Dec - 31 days 
```

如何让 bash 在不使用`if else`or`switch`或`while`循环的情况下返回当前年份的值（每个月的最后一天）？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-12T10:42:38.477

我的看法：

```
for m in {1..12}; do
  date -d "$m/1 + 1 month - 1 day" "+%b - %d days"; 
done 
```

解释一下：对于第一次迭代，当 m=1 时，`-d`参数是“1/1 + 1 个月 - 1 天”，“1/1”被解释为 1 月 1 日。所以 1 月 1 日 + 1 个月 - 1 天是 1 月 31 日。下一次迭代“2/1”是 2 月 1 日，加上一个月减去一天得到 2 月 28 日或 29 日。依此类推。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-12T05:27:33.073

```
cat <<EOF
Jan - 31 days
Feb - `date -d "yesterday 3/1" +"%d"` days
Mar - 31 days
Apr - 30 days
May - 31 days
Jun - 30 days
Jul - 31 days
Aug - 31 days
Sep - 30 days
Oct - 31 days
Nov - 30 days
Dec - 31 days
EOF 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-12T05:20:36.213

假设您允许“for”，那么 bash 中的以下内容

```
for m in {1..12}; do
    echo $(date -d $m/1/1 +%b) - $(date -d "$(($m%12+1))/1 - 1 days" +%d) days
done 
```

产生这个

```
 Jan - 31 days
 Feb - 29 days
 Mar - 31 days
 Apr - 30 days
 May - 31 days
 Jun - 30 days
 Jul - 31 days
 Aug - 31 days
 Sep - 30 days
 Oct - 31 days
 Nov - 30 days
 Dec - 31 days 
```

注意：我删除了对`cal`

对于那些喜欢琐事的人：

```
Number months from 1 to 12 and look at the binary representation in four
bits {b3,b2,b1,b0}.  A month has 31 days if and only if b3 differs from b0.
All other months have 30 days except for February. 
```

因此，除了 2 月，此方法有效：

```
for m in {1..12}; do
    echo $(date -d $m/1/1 +%b) - $((30+($m>>3^$m&1))) days
done 
```

结果：

```
Jan - 31 days
Feb - 30 days (wrong)
Mar - 31 days
Apr - 30 days
May - 31 days
Jun - 30 days
Jul - 31 days
Aug - 31 days
Sep - 30 days
Oct - 31 days
Nov - 30 days
Dec - 31 days 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-04-08T21:45:14.480

```
cal $(date +"%m %Y") |
awk 'NF {DAYS = $NF}; END {print DAYS}' 
```

这使用标准[`cal`](http://man7.org/linux/man-pages/man1/cal.1.html)实用程序来显示指定的月份，然后运行一个简单的 Awk 脚本来仅提取最后一天的数字。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-01-08T00:58:46.077

## 返回该月中的天数，以补偿闰年二月的变化，而不使用循环或使用 if 语句，并且只调用 date 一次。

此代码测试日期以查看请求年份的 2 月 29 日是否有效，如果有效，则更新日期偏移字符串中的第二个字符。month 参数选择相应的子字符串并将月差添加到 28。

```
function daysin()
{
   s="303232332323"                                        # normal year
   date -d "2/29/$2" > /dev/null 2>&1 && s="313232332323"  # leap year
   echo $[ ${s:$[$1-1]:1} + 28 ]
}

daysin $1 $2                                               #daysin [1-12] [YYYY] 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-03-04T10:56:36.827

尝试使用此代码

```
date -d "-$(date +%d) days  month" +%Y-%m-%d 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-07-16T07:04:36.093

在具有[BSD 日期](https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man1/date.1.html)功能的 Mac 上，您可以执行以下操作：

```
for i in {2..12}; do date -v1d -v"$i"m -v-1d "+%d"; done 
```

**快速说明**

`-v`代表*调整*。我们将日期调整为：

`-v1d`代表该月的第一天

`-v"$i"m`定义月份，例如（`-v2m`对于二月）

`-v-1d`减去一天（所以我们得到上个月的最后一天）

`"+%d"`打印月份中的哪一天

```
for i in {2..12}; do date -v1d -v"$i"m -v-1d "+%d"; done
31
28
31
30
31
30
31
31
30
31
30 
```

您当然可以添加年份。请参阅手册页中的示例（上面的链接）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-12T06:08:52.320

内容`script.sh`：

```
#!/bin/bash
begin="-$(date +'%-m') + 2"
end="10+$begin"

for ((i=$begin; i<=$end; i++)); do
    echo $(date -d "$i month -$(date +%d) days" | awk '{ printf "%s - %s days", $2, $3 }')
done 
```

结果：

```
Jan - 31 days
Feb - 29 days
Mar - 31 days
Apr - 30 days
May - 31 days
Jun - 30 days
Jul - 31 days
Aug - 31 days
Sep - 30 days
Oct - 31 days
Nov - 30 days 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-04T11:46:07.163

```
for m in $(seq 1 12); do cal  $(date +"$m %Y") | grep -v "^$" |tail -1|grep -o "..$"; done 
```

*   从 1 到 12 迭代（对于...）
*   打印每个月的日历表（cal...）
*   从输出中删除空行（grep -v ...）
*   打印表格中的最后一个数字（尾部...）

没有意义，避免使用cal，因为是POSIX要求的，所以应该有

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-09T03:58:40.850

已接受答案的变体以显示“昨天”的使用

```
$ for m in {1..12}; do date -d "yesterday $m/1 + 1 month" "+%b - %d days"; done
Jan - 31 days
Feb - 28 days
Mar - 31 days
Apr - 30 days
May - 31 days
Jun - 30 days
Jul - 31 days
Aug - 31 days
Sep - 30 days
Oct - 31 days
Nov - 30 days
Dec - 31 days 
```

这个怎么运作？

在添加 1 个月后显示日期“月/1”的昨天日期

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-07-31T11:00:42.803

我需要这个几次，所以当 PHP 中带有简单的 bash 时不是，所以我使用它直到抛出错误“无效的算术运算符”，甚至在拼写检查中出现冲突（“mt”代表月份，“yr”代表年份)

```
last=$(echo $(cal ${mt} ${yr}) | awk '{print $NF}') 
```

所以这很好用......

```
### get last day of month
#
# implement from PHP
# src: https://www.php.net/manual/en/function.cal-days-in-month.php
#
if [ $mt -eq 2 ];then
    if [[ $(bc <<< "${yr} % 4") -gt 0 ]];then
        last=28
    else
        if [[ $(bc <<< "${yr} % 100") -gt 0 ]];then
            last=29
        else
            [[ $(bc <<< "${yr} % 400") -gt 0 ]] && last=28 || last=29
        fi
    fi
else
    [[ $(bc <<< "(${mt}-1) % 7 % 2") -gt 0 ]] && last=30 || last=31
fi 
```

# c# - LINQ 语句根据另一个表从一个表中获取值

> ID：12381508
> 
> 赞同：2
> 
> 时间：2012-09-12T05:03:42.680
> 
> 标签：c#, asp.net-mvc-3, linq

我正在尝试使用 mvc3 和 c# 制作一个小型网站，但我对这个 LINQ 查询有点坚持。

我有两张桌子：

1.  代理（id、firstName、lastName、登录名、密码）

2.  子代理（subAgentsId、agentId）

这里`Agents.id == SubAgents.agentsId`

```
var query = from subAgent in db.SubAgents
                        join agent in Agents on subAgent.AgentID equals agent.ID
                select agent; 
```

我有一个类似的为代理和客户端运行的连接语句。但这运行良好。不幸的是，它一直给我这个错误。

> “用户代码未处理实体命令 ExecutionException”

在我准备将子代理详细信息发送到视图之前，会弹出此错误。

不知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:10:30.397

使用导航属性。

```
var query = from subAgent in db.SubAgents
            select subAgent.agent; 
```

# ios - iOS：代码签名错误，证书身份在钥匙串中出现多次

> ID：12381518
> 
> 赞同：1
> 
> 时间：2012-09-12T05:04:42.350
> 
> 标签：ios, code-signing, xcode4.4

我陷入了这个错误->

> “证书身份‘iPhone Developer:XXXXX’在钥匙串中出现了不止一次。协同设计工具要求只有一个”。

我已经删除了旧证书并建立了一个新证书，但我仍然一次又一次地收到此错误。我没有看到任何重复的证书。请提出任何解决此问题的方法。建议将不胜感激..提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T05:12:30.617

尝试重新启动您的机器。很久以前我曾经发生过这种情况，如果我记得的话，重新启动机器会重新初始化我的钥匙串，所以它只看到一个证书。

# jquery - jQuery - AJAX 调用成功块中的 AJAX 调用

> ID：12381519
> 
> 赞同：-1
> 
> 时间：2012-09-12T05:04:49.637
> 
> 标签：jquery, ajax

我正在使用 jQuery ajax 插件进行 AJAX 调用，在成功块中，我进行了另一个 AJAX 调用。就像是：

```
$.ajax({
    type: "GET",
    url: <someUrl>,
    data: {
        id: <someParam>
    },
    success: function (data) {
        $.ajax({
            type: "GET",
            url: <someOtherUrl>,
            data: {
                id2: <someOtherParam>
            },
            success: function (checkoutData) {
                //do something
            },
            error: function (request, status, error) {}
        });
    },
    error: function (request, status, error) {}
}); 
```

**更新**：代码只是伪代码，我更关心在 AJAX 成功块中调用 AJAX 的概念。

我注意到我的页面上有一些奇怪的行为。似乎第一个 AJAX 调用有时无法调用 URL，但没有返回任何错误（我尝试在错误块中捕获它）。有什么我需要注意的吗？

谢谢，
伊拉克利斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T05:20:22.017

很奇怪，因为 AJAX 是异步的而不是同步的。尝试使用`complete`而不是`success`.

```
var value = null;
$.ajax({
    type: "GET",
    url: <someUrl>,
    data: {
        id: <someParam>
    },
    success: function (data) {
        value = data
    },
    complete: function() {
      $.ajax({
            type: "GET",
            url: <someOtherUrl>,
            data: {
                id2: <someOtherParam>
            },
            success: function (checkoutData) {
                value = checkoutData
            },
            complete: function() {
                //process here
            },
            error: function (request, status, error) {}
        });
    },
    error: function (request, status, error) {}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:14:26.080

似乎它与嵌套的 AJAX 请求无关。这只是错误分配的 ID 和类的组合。我的错，我很抱歉，我感谢大家的回答和你在这个问题上付出的努力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T05:29:49.590

如果我是你，我会明确设置三个属性。在执行 ajax GET 时它们的缺席（尤其是缓存：false）**有时**是导致奇怪行为的原因。

```
dataType: "json",
contentType: "application/json;charset=utf-8",
cache:false 
```

我在这里假设您正在发送 json 并将 json 作为响应返回

# c - 又一个“未定义的 _main 引用”

> ID：12381523
> 
> 赞同：0
> 
> 时间：2012-09-12T05:05:04.803
> 
> 标签：c, gcc, ld

我一直在尝试将我当前的大部分 OS 项目从 x86 Assembly 转换为 C 并使用 NASM 进行组装并使用 MinGW 进行编译。链接时，我收到以下错误：

```
ld: warning: cannot find entry symbol start; defaulting to 00100000
o\main.o:main.c:(.text+0x7): undefined reference to `_main' 
```

这是我正在编译、组装和链接的脚本：

```
gcc -c main.c -o o\main.o -fno-leading-underscore
nasm boot.asm -o o\boot.o -fcoff
ld -o bin\kernel.bin o\boot.o o\main.o -Tlink.ld 
```

...我的链接器脚本如下：

```
ENTRY(start)
SECTIONS
{
    .text 0x100000 :
    {
        code = .;
        _code = .;
        __code = .;
        *(.text)
        . = ALIGN(4096);
    }

    .data :
    {
        data = .;
        _data = .;
        __data = .;
        *(.data)
        *(.rodata)
        . = ALIGN(4096);
    }

    .bss :
    {
        bss = .;
        _bss = .;
        __bss = .;
        *(.bss)
        . = ALIGN(4096);
    }

    end = .;
    _end = .;
    __end = .;
} 
```

当我在 main.o 上使用 nm 时，它表示存在带有符号 '__main' 的东西，但我已将其声明为：

```
int main()
{
    return 0xDEADBABA;
} 
```

这是 boot.asm：

```
MBOOT_PAGE_ALIGN    equ 1<<0    ; Load kernel and modules on a page boundary
MBOOT_MEM_INFO      equ 1<<1    ; Provide your kernel with memory info
MBOOT_HEADER_MAGIC  equ 0x1BADB002 ; Multiboot Magic value
MBOOT_HEADER_FLAGS  equ MBOOT_PAGE_ALIGN | MBOOT_MEM_INFO
MBOOT_CHECKSUM      equ -(MBOOT_HEADER_MAGIC + MBOOT_HEADER_FLAGS)
[bits 32]
[global mboot]
[extern code]
[extern bss]
[extern end]

mboot:
    dd  MBOOT_HEADER_MAGIC
    dd  MBOOT_HEADER_FLAGS
    dd  MBOOT_CHECKSUM
    dd  mboot
    dd  code
    dd  bss
    dd  end
    dd  start

[extern main]
[global start]

start:
    push ebx
    cli
    call main
    jmp $ 
```

我怀疑我遇到的这个问题是因为微软是他们通常的愚蠢自我，需要某种下划线前缀或其他东西。谁能提供这个问题的解决方案？干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:09:14.773

我怀疑问题是您没有在标准 C 库中链接，该库`_main`作为程序的主要入口点实现。`_main`调用`main`并在之前进行一些初始化，然后进行清理。尝试使用`void _main()`and`exit()`而不是 return。

# android - android设计模式-仅包含一项的列表->显示项目而不是列表

> ID：12381524
> 
> 赞同：0
> 
> 时间：2012-09-12T05:05:08.177
> 
> 标签：android, design-patterns, listactivity

我有一个关于 ListActivities 的问题，希望能更清楚地举一个例子。;)

我的应用程序有一个 TitleListActivity，它显示特定作者的已发布标题。此列表可能包含一个或多个标题，具体取决于作者。当列表中只有一个标题时，我想立即启动特定标题的 TitleViewActivity，而不是用一个标题显示无聊的列表。我认为这很常见，到目前为止还没有找到任何解释。

简单的方法是在调用 TitleListActivity 之前检查该作者有多少标题并启动相应的活动。由于 TitleListActivity 调用可以从应用程序的不同部分发生，我想集中决定调用什么 Activity 的逻辑。

我的问题是实现这一目标的最佳实践是什么。可以将此逻辑有效地添加到我的示例中的 TitleListActivity 中。当然，所有历史后退按钮逻辑等都应该有效。

任何建议高度赞赏

谢谢

马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:56:41.030

我可能会使用静态方法创建一个活动启动器类/控制器来启动 TitleList 或 Title。类似于 ActivityLauncher.lauchAuthorActivity(context, auther) ，该函数将决定启动什么活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T06:46:25.793

更好地使用`Intent.putExtra()`而不是静态方法或类。

您一定已经在使用诸如 AuthorId 之类的东西来获取相应作者的标题。

只需再使用 1 个属性 TitleCount

```
intent.putExtra("TitleCount", n); 
```

在 TitleListActivity 中检查它，如果它的 1 finish() TitleListActivity 在 onCreate 的第一行并打开 Title Page。

如果您在 TitleListActivity 中获取所有标题数据（包括标题计数），请检查`Array/ArrayList size`哪些具有这些标题。

# android - android父子自定义视图上的触摸事件处理

> ID：12381527
> 
> 赞同：2
> 
> 时间：2012-09-12T05:05:15.463
> 
> 标签：android, touch, swipe, custom-view, gesturedetector

今天我在 android 自定义视图上处理触摸事件时遇到了问题。在这种情况下，我创建了父视图调用 weekview 和 chiled 调用 weekdayview。我想在子视图中实现像 singleTap、LongPress 这样的触摸事件，并且当我在父视图或子视图上滑动时我想滚动父视图。当我在两个视图中实现触摸事件时它不起作用。

![在此处输入图像描述](../Images/3936d02933e14371d75d123638c75738.png)

任何人都可以帮助我。这对我真的很有帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T05:50:13.803

```
class ChildView extends View {

    public void setGestureDetector (GestureDetector g)
    {
        gesture = g;
    }

    @Override
    public boolean onTouchEvent (....)
    {
        return gesture.onTouchEvent (....); // touch event will dispatch to gesture
    } 
}

class ParentView extends View implements GestureDetector.OnGestureListener {

    gesture = new GestureDetector (this);

    child = new ChildView (...);
    child.setGestureDetector (gesture);

    @Override
    public boolean onTouchEvent (..)
    {
       // handle your parent touch event here
    }

    public boolean onDown (...)
    {
       return true;
    }

    public boolean fling (...) 
    {
       // here to handle child view fling
    }

} 
```

这是比索代码（不是真正的 android java），向您展示使用 GestureDetector 的概念，您可以在父视图中处理来自子视图的所有事件。正如我在我的安卓手机上测试的那样，ChildView 中的 onTouchEvent 并不能很好地识别 ACTION_UP，所以即使你滑动你的 Child View，有时也无法正常工作（这取决于 ACTION_UP）。

所以如果你想在你的子视图上写更准确的滑动，最好写你的 owen Gesture Detect 类，在你的 ChildView 中，你可以这样做 -

```
float oldX;
float distanceX;

public boolean onTouchEvent (MotionEvent event...)
{
     if (event.getAction == MotionEvent.ACTION_DOWN) {
        // handle down
        oldX = event.getX ();
     }

     if (event.getAction == MotionEvent.ACTION_MOVE {
        // handle move
        distanceX = event.getX() - oldX; // more accurate

        gesture.onSwipe (distanceX); // your own gesture class
     }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T05:31:08.513

设置您的滑动速度（以检测用户的滑动意图）并覆盖子视图中的 onTouchEvent()。在这里，调用 super.onTouchEvent() 并返回，它调用你的父视图。处理父视图中的事件。

# permissions - 非root用户的Gem安装错误

> ID：12381532
> 
> 赞同：1
> 
> 时间：2012-09-12T05:05:38.087
> 
> 标签：permissions, gem, centos, rvm

我在我的 CentOS 服务器上以 root 用户身份安装了 RVM 单用户，所以 rvm 位置是 /usr/local.. 但是，现在我们必须使用个人用户帐户。
所以现在如果我尝试安装一个新的 gem，例如 -

1.  > gem install linecache19 -v '0.5.12'
    > 
    > 错误：执行 gem ... (Gem::FilePermissionError) 您没有写入 /usr/local/rvm/gems/ruby-1.9.2-p320@cams 目录的权限。

2.  > sudo gem install linecache19 -v '0.5.12'
    > 
    > /usr/local/rvm/rubies/ruby-1.9.2-p320/bin/gem:12:in `require': 没有要加载的文件——来自 /usr/local/rvm/rubies/ruby 的 ruby​​gems (LoadError) -1.9.2-p320/bin/gem:12

需要注意的一点：我想用个人用户帐户重新安装 rubies 和 rvm，并取消 root 安装。但是我已经在服务器上运行了一些应用程序作为登台，所以想避免这种情况。

我该如何解决这些问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T06:29:47.517

您显然错过了阅读[RVM 安装文档](https://rvm.io/rvm/install)和整体[RVM 文档](https://rvm.io/)。

对于第**1**部分，您需要运行`rvmsudo rvm get stable`并将您的用户添加到**rvm**组。

对于第**2**部分。不要使用`sudo`它会丢失所有环境设置 - 这会导致您看到错误，请将您的用户添加到**rvm**组或使用`rvmsudo`.

# java - 是否可以从 hprof 转储/堆转储中的线程中查看线程

> ID：12381534
> 
> 赞同：9
> 
> 时间：2012-09-12T05:05:48.793
> 
> 标签：java, heap-dump, hprof, eclipse-mat

我有一个大型（5GB）hprof 转储，由应用程序在`OutOfMemoryError`发生时创建。（使用 [XX：HeapDumpOnOutOfMemoryError](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)）。

不幸的是，发生此错误时没有收集任何日志。重新创建这将需要几个小时。我希望某些工具可以显示来自 hprof 的异常堆栈跟踪或所有线程堆栈等。

我目前正在使用[MAT](http://www.eclipse.org/mat/)，看不到获取线程信息的方法。我可以使用哪个工具？

（我不确定 hprof 文件是否有关于 OOM 发生时调用的线程/位置的信息）。

（我知道在正常情况下如何进行线程转储。这里的麻烦是事件已经发生了，我只有 hprof 转储。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-12T06:53:37.633

回答自己的问题。归功于[@RC](https://stackoverflow.com/users/180100/rc)

1.  使用 visualvm 打开转储。这需要一段时间。
2.  单击“堆转储中的线程”

![具有堆转储线程的可视虚拟机](../Images/0d9795deca43b73cefe0116852a3bb98.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-12-20T13:44:07.317

MAT[现在可以直接显示线程](http://help.eclipse.org/neon/index.jsp?topic=%2Forg.eclipse.mat.ui.help%2Ftasks%2Fanalyzingthreads.html)（也许这是在提出问题后添加的）。

> 线程概述
> 
> 要获得堆转储中所有线程的概览，请使用工具栏中的“线程概览”按钮，如下图所示。或者，可以使用 Query Browser > Thread Overview and Stacks 查询：

[![工具栏图标的屏幕截图](../Images/4ef8c8c55308cf32de69ef77c1c23b0d.png)](https://i.stack.imgur.com/2kUS1.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T05:07:52.120

我不认为堆转储包含除 GC root 之外的线程信息。如果您需要线程相关信息，您还需要进行线程转储。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T05:26:03.777

Eclipse MAT 允许您在泄漏嫌疑人报告中查看可疑线程。在应用程序命名空间中查找类及其行号，以了解它们在堆中占用了多少内存。这会给你一些泄漏类的提示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T05:27:54.290

您可以 kill -3 进程 id 以获得标准输出的线程转储。这不会杀死 java 进程，因此您可以根据需要执行多次。

正如 RC 所说，visualVM 是一个很好的工具，它可以按类类型为您提供对象计数以及各种图形和分析工具。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T06:40:29.943

使用视觉虚拟机。

当 perm 堆空间超过时尝试分析图形...您还应该检查内存样本并保存其快照..

分析线程堆栈...将帮助您缩小问题范围。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-12T07:06:24.070

打开您需要的选项`+`并关闭您需要的选项`-`

文档令人困惑的是，它显示了默认设置以使其“清楚”您已经拥有的设置。带 + 的默认开启，带 - 的默认关闭。这意味着如果您从文档中复制任何 + 或 - 选项，它们不应执行任何操作（除非默认值随时间而变化）

-XX:-HeapDumpOnOutOfMemoryError 关闭堆转储，这是默认设置。

-XX:+HeapDumpOnOutOfMemoryError 开启堆转储。

# macos - 如何在 Mac 10.7.3 中启用特定的隐藏文件夹？

> ID：12381537
> 
> 赞同：0
> 
> 时间：2012-09-12T05:06:07.740
> 
> 标签：macos

我是一名 iPhone 开发人员，

要在查找器窗口中启用隐藏文件/文件夹：

1.  打开查找器
2.  打开实用程序文件夹
3.  打开终端窗口
4.  复制并粘贴以下行：

    `defaults write com.apple.Finder AppleShowAllFiles YES`

5.  按回车
6.  现在按住键盘上的“alt”并右键单击 Finder 图标
7.  点击重新启动

使用此步骤，最后所有隐藏文件都显示在所有菜单中，但我希望在 Mac 中激活/启用特定文件夹。在 Windows 中只需右键单击隐藏文件 --> 转到文件夹选项然后激活特定文件夹，类似地如何在 Mac 中执行此操作？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T05:52:28.433

在终端上键入以下命令：
**对于显示隐藏文件夹：** -

```
defaults write com.apple.finder AppleShowAllFiles TRUE
killall Finder 
```

**对于隐藏文件夹：** -

```
defaults write com.apple.finder AppleShowAllFiles FALSE
killall Finder 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T07:07:19.320

使用`chflags`命令行工具（[manpage](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/chflags.1.html)）怎么样？

```
$ cd ~
$ chflags nohidden Library 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T06:13:33.287

不，没有办法在 Mac OS X 中基于每个文件夹启用此功能。

# blackberry - 黑莓 JDE 6 & 7 安装问题

> ID：12381540
> 
> 赞同：2
> 
> 时间：2012-09-12T05:06:24.383
> 
> 标签：blackberry, installation, java, prerequisites

[我从网站https://developer.blackberry.com/java/download/previousjdeversions/](https://developer.blackberry.com/java/download/previousjdeversions/)下载了 Blackberry JDE 6 和 7

下载后我尝试安装，6和7都有同样的问题。我已经重新启动了我的电脑，但仍然没有解决方案。

这就是发生的事情：

在先决条件部分，它显示 3 个文本框

1.  名称 - 版本 - 操作 JDK - 需要 1.5 或更高版本 1.6 1.6.0_26 -**跳过**

2.  直接 X - 必需 4.08 找到 4.09.00.0904 -**跳过**

3.  Microsoft Visual C++ 2008 Redistributable Package (x86) - 必需 任何 什么都找不到 -**安装**

**现在默认情况下，当我单击Next**时会检查 Microsoft Visual C++ 2008 Redistributable Package (x86) ，它会提取包并且状态显示为已安装，但在屏幕底部显示错误消息**“启动所有包后，仍然缺少一些必需的先决条件, 按返回按钮返回到先决条件”**

当我单击**后退**按钮时，它返回到先决条件页面，其中显示 JDK Direct X 和 Microsoft Visual C++ 的复选框并单击**下一步**有相同的问题 - 显示已安装但有错误消息

当我检查另外两个时，对于 JDK 和 Direct X，它会打开带有两个选项卡的浏览器，一个带有 oracle 用于 jdk 下载，另一个带有 Microsoft Direct X

单击**下一步**后，它与以前一样，通过提取 Microsoft Visual C++ 的包，状态显示为已安装，但在屏幕底部显示错误消息**“启动所有包后仍然缺少一些必需的先决条件，按返回按钮回到先决条件”**

在我朋友的电脑上，它安装正常并启动了黑莓模拟器，我的朋友和我的电脑都运行 windows 7。

# asp.net - 如何在单个转发器中绑定两个不同的查询？

> ID：12381542
> 
> 赞同：0
> 
> 时间：2012-09-12T05:06:26.187
> 
> 标签：asp.net, repeater

我需要根据两个不同的查询将数据绑定到转发器中。两个查询的字段不同。如何将两个查询绑定到单个转发器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:06:12.597

我不明白你的要求。如果要绑定嵌套中继器，则可以通过将 Item_Databound 事件中的嵌套中继器绑定到查询来实现。如果您想将同一个中继器中的几个控件绑定到一个查询，而将几个控件绑定到另一个查询，那么请重新考虑您在做什么，也许您可​​以使用一个查询来完成。

如果您更详细地解释您的问题，那就太好了。谢谢。

# html - 在目标设备上支持 html5 视频标签的 webkit

> ID：12381544
> 
> 赞同：1
> 
> 时间：2012-09-12T05:06:44.877
> 
> 标签：html, video, webkit, tags

我正在开发一种在一种 linux 操作系统上运行 Qt 的移动设备，并且需要激活 html5 标签。它的 webbrowser 是 isis-browser，它基于从 Qt Webkit 派生的 webkit，所以我相信它应该支持一定数量的 html5 功能，尤其是 Qt webkit 支持的视频和音频。

但是当我在这个浏览器上看到像 html5test.com 和 videojs.com 这样的网站时，视频标签目前不起作用。

我不擅长这个嵌入层，所以要弄清楚如何让它与标签一起工作并不容易。

1.  据我所知，这应该有 ffmpeg 来解码视频编解码器，但我在 isis-browser 包甚至 qt webkit 中都找不到这些代码。

2.  请指导我任何需要做的事情..

3.  [https://github.com/isis-project](https://github.com/isis-project)

我提前感谢您的帮助。

谢谢君

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T13:41:26.240

在*..\src\3rdparty\webkit\Source\WebCore\features.pri 中*写道：

```
linux-*:!contains(DEFINES, USE_QTMULTIMEDIA=1) {
        !contains(QT_CONFIG, no-pkg-config):system(pkg-config --exists glib-2.0 gio-2.0 gstreamer-0.10): {
            DEFINES -= ENABLE_VIDEO=0
            DEFINES += ENABLE_VIDEO=1 
```

对我来说，帮助安装包*glib-2.0、gio-2.0、gstreamer-0.10*，现在我的基于 qtwebkit 的应用程序支持 html5video。

# javascript - 如何使用javascript在一个函数中调用多个函数？

> ID：12381552
> 
> 赞同：1
> 
> 时间：2012-09-12T05:07:31.717
> 
> 标签：javascript, asp.net

我有很多功能。我正在使用 asp.net 控件。我想在一个（主）函数中调用所有函数。这是一个返回类型函数。这必须使用Javascript。

```
function a(){
    if(b==c){
    return true
}else{
    return false;
}

function b(){
    if(b==c){
        return true;
}else{ 
    return false;
}

function c(){}//return type 
```

函数 a、b 和 c 在主函数中调用函数。

```
 function main()
    {
   //??
    } 
```

这个功能不是作品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T05:11:53.090

你要么想要：

```
function main()
{
  return a() && b() && c() && d(); // all must be true to return true
} 
```

或者

```
function main()
{
  return a() || b() || c() || d(); // at least 1 must be true to return true
} 
```

# iphone - 如何在单行中加载两条记录？

> ID：12381556
> 
> 赞同：0
> 
> 时间：2012-09-12T05:08:24.903
> 
> 标签：iphone, objective-c, uitableview

可以在 tableview 的单行中加载两条记录吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T05:16:11.197

yss 可以使用 descriptionlabel.text 将另一个标签显示为

```
cellobj.textLabel.text=[arr1 objectAtIndex:indexPath.row];
cellobj.descriptionLabel.text=[arr2 objectAtIndex:indexPath.row]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T05:22:28.640

使用带有字幕样式的 UITableViewCell：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *SimpleTableIdentifier = @"SimpleTableIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:SimpleTableIdentifier];

    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:SimpleTableIdentifier] autorelease]; } //did the subtitle style

        NSUInteger row = [indexPath row];
        cell.textLabel.text = record1;
        cell.detailTextLabel.text = record2;
    }
    return cell;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T05:13:12.737

您必须在 UITableViewCell 中创建自己的 UILabel 元素。您可以将新的 UILabel 添加到您的单元格中，（我认为您应该将它们添加到一个内容视图，或者您可以将 UITableViewCell 子类化并让它为您创建标签并使用标签提供对它们的访问。

# javascript - 如何使用 JavaScript 停止浏览器后退按钮？

> ID：12381563
> 
> 赞同：212
> 
> 时间：2012-09-12T05:09:11.440
> 
> 标签：javascript, browser

我正在用 PHP 做一个在线测验应用程序。我想限制用户返回考试。

我尝试了以下脚本，但它停止了我的计时器。

我该怎么办？

计时器存储在文件*cdtimer.js*中。

```
<script type="text/javascript">
    window.history.forward();
    function noBack()
    {
        window.history.forward();
    }
</script>

<body onLoad="noBack();" onpageshow="if (event.persisted) noBack();" onUnload=""> 
```

我有一个考试计时器，它从 MySQL 值中获取考试持续时间。计时器相应地启动，但是当我输入代码以禁用后退按钮时它会停止。我的问题是什么？

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2012-09-12T05:15:51.120

禁用后退按钮不起作用的原因有很多。最好的办法是警告用户：

```
window.onbeforeunload = function() { return "Your work will be lost."; }; 
```

此页面确实列出了您*可以*尝试禁用后退按钮的多种方法，但都不能保证：

[http://www.irt.org/script/311.htm](http://www.irt.org/script/311.htm)

* * *

## 回答 #2

> 赞同：152
> 
> 时间：2012-09-12T05:45:40.193

**覆盖 Web 浏览器的默认行为通常是一个坏主意。**出于安全原因，客户端脚本没有足够的权限来执行此操作。

也有一些类似的问题被问到，

*   [如何防止退格键向后导航？](https://stackoverflow.com/questions/1495219/how-can-i-prevent-the-backspace-key-from-navigating-back)

*   [如何使用 JavaScript 防止浏览器对退格按钮的默认历史返回操作？](https://stackoverflow.com/questions/3850442/how-can-i-prevent-the-browsers-default-history-back-action-for-the-backspace-bu)

您实际上**无法**禁用浏览器后退按钮。但是，您可以使用您的逻辑来做魔术，以防止用户向后导航，这会产生一种好像它被禁用的印象。方法如下 - 查看以下代码段。

```
(function (global) {

    if(typeof (global) === "undefined") {
        throw new Error("window is undefined");
    }

    var _hash = "!";
    var noBackPlease = function () {
        global.location.href += "#";

        // Making sure we have the fruit available for juice (^__^)
        global.setTimeout(function () {
            global.location.href += "!";
        }, 50);
    };

    global.onhashchange = function () {
        if (global.location.hash !== _hash) {
            global.location.hash = _hash;
        }
    };

    global.onload = function () {
        noBackPlease();

        // Disables backspace on page except on input fields and textarea..
        document.body.onkeydown = function (e) {
            var elm = e.target.nodeName.toLowerCase();
            if (e.which === 8 && (elm !== 'input' && elm  !== 'textarea')) {
                e.preventDefault();
            }
            // Stopping the event bubbling up the DOM tree...
            e.stopPropagation();
        };
    }
})(window); 
```

这是在纯 JavaScript 中，所以它可以在大多数浏览器中工作。它还会禁用*退格*键，但该键将在`input`字段和`textarea`.

### 推荐设置：

将此片段放在单独的脚本中，并将其包含在您想要此行为的页面上。在当前设置中，它将执行`onload`DOM 事件，这是此代码的理想入口点。

**[工作演示！](http://output.jsbin.com/yaqaho)**

在以下浏览器中进行了测试和验证，

*   铬合金。
*   火狐。
*   Internet Explorer (8-11) 和 Edge。
*   苹果浏览器。

* * *

## 回答 #3

> 赞同：128
> 
> 时间：2015-12-17T14:57:05.457

我遇到了这个问题，需要一个在各种浏览器上都能正常工作且“很好”的解决方案，*包括 Mobile Safari*（发布时为 iOS 9）。没有一个解决方案是完全正确的。我提供以下服务（在 Internet Explorer 11、Firefox、Chrome 和 Safari 上测试）：

```
history.pushState(null, document.title, location.href);
window.addEventListener('popstate', function (event)
{
  history.pushState(null, document.title, location.href);
}); 
```

请注意以下事项：

*   `history.forward()`（我的旧解决方案）在 Mobile Safari 上不起作用 --- 它似乎什么都不做（即，用户仍然可以返回）。`history.pushState()`确实适用于所有这些。
*   第三个参数`history.pushState()`是一个*url*。传递类似`'no-back-button'`或`'pagename'`似乎工作正常的字符串的解决方案，直到您尝试在页面上刷新/重新加载，此时当浏览器尝试定位以其作为其 URL 的页面时，将生成“找不到页面”错误。（浏览器也可能在页面上的地址栏中包含该字符串，这很难看。）`location.href`应该用于 URL。
*   to 的第二个参数`history.pushState()`是一个*title*。环顾网络，大多数地方都说它“未使用”，而这里的所有解决方案都通过`null`了。但是，至少在 Mobile Safari 中，这会将页面的 URL 放入用户可以访问的历史下拉列表中。但是当它正常添加一个页面访问的条目时，它会放入它的*标题*，这是更可取的。因此，为此传递`document.title`会导致相同的行为。

* * *

## 回答 #4

> 赞同：78
> 
> 时间：2013-12-02T05:37:13.797

```
<script>
    window.location.hash = "no-back-button";

    // Again because Google Chrome doesn't insert
    // the first hash into the history
    window.location.hash = "Again-No-back-button"; 

    window.onhashchange = function(){
        window.location.hash = "no-back-button";
    }
</script> 
```

* * *

## 回答 #5

> 赞同：34
> 
> 时间：2019-02-15T06:09:45.067

用于限制浏览器返回事件：

```
window.history.pushState(null, "", window.location.href);
window.onpopstate = function () {
    window.history.pushState(null, "", window.location.href);
}; 
```

* * *

## 回答 #6

> 赞同：31
> 
> 时间：2014-05-21T21:56:55.990

此代码将禁用支持 HTML5 History API 的现代浏览器的后退按钮。在正常情况下，按下返回按钮会返回上一步，返回上一页。如果您使用 history.pushState()，您将开始向当前页面添加额外的子步骤。它的工作方式是，如果您要使用 history.pushState() 三次，然后开始按下后退按钮，前三次它将在这些子步骤中导航回来，然后第四次将返回上一页。

如果将此行为与事件上的事件侦听器结合起来`popstate`，则基本上可以设置子状态的无限循环。所以，你加载页面，按下一个子状态，然后点击返回按钮，它会弹出一个子状态并按下另一个，所以如果你再次按下返回按钮，它永远不会用完子状态来推送. 如果您觉得有必要禁用后退按钮，这将使您到达那里。

```
history.pushState(null, null, 'no-back-button');
window.addEventListener('popstate', function(event) {
  history.pushState(null, null, 'no-back-button');
}); 
```

* * *

## 回答 #7

> 赞同：26
> 
> 时间：2016-11-24T13:50:26.697

**如何阻止后退功能：**

```
history.pushState(null, null, location.href);
window.onpopstate = function () {
  history.go(1);
};
```

* * *

## 回答 #8

> 赞同：19
> 
> 时间：2020-01-27T17:08:11.857

在**Chrome 79**中，没有一个最受好评的答案对我有用。看起来 Chrome 在 75 版之后改变了其关于“后退”按钮的行为。请参见此处：

[https://support.google.com/chrome/thread/8721521?hl=en](https://support.google.com/chrome/thread/8721521?hl=en)

然而，在那个谷歌线程中，Azrulmukmin Azmi 最后提供的答案确实有效。这是他的解决方案。

```
<script>
    history.pushState(null, document.title, location.href);
    history.back();
    history.forward();
    window.onpopstate = function () {
        history.go(1);
    };
</script> 
```

> Chrome 的问题在于它不会触发 onpopstate 事件，除非您进行浏览器操作（即调用 history.back）。这就是我将这些添加到脚本中的原因。

我不完全理解他写的内容，但显然`history.back() / history.forward()`现在需要额外的内容来阻止 Back in Chrome 75+。

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2013-12-24T17:07:33.253

这是我可以做到的方式。

奇怪的是，更改*window.location*在 Google Chrome 和 Safari 中效果不佳。

碰巧*location.hash*没有在 Chrome 和 Safari 的历史记录中创建条目。所以你将不得不使用 pushstate。

这在所有浏览器中都适用于我。

```
history.pushState({ page: 1 }, "title 1", "#nbb");
window.onhashchange = function (event) {
    window.location.hash = "nbb";
}; 
```

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2020-10-28T12:09:01.040

### 反应

对于 React 项目中的 modal 组件，modal 的*打开*或*关闭*，控制浏览器返回是必要的动作。

*   :`stopBrowserBack`停止浏览器后退按钮功能，也得到一个回调函数。这个回调函数就是**你想要**做的：

    ```
    const stopBrowserBack = callback => {
      window.history.pushState(null, "", window.location.href);
      window.onpopstate = () => {
        window.history.pushState(null, "", window.location.href);
        callback();
      };
    }; 
    ```

*   :`startBrowserBack`浏览器后退按钮功能的复兴：

    ```
    const startBrowserBack = () => {
      window.onpopstate = undefined;
      window.history.back();
    }; 
    ```

在您的项目中的用法：

```
handleOpenModal = () =>
  this.setState(
    { modalOpen: true },
    () => stopBrowserBack(this.handleCloseModal)
  );

handleCloseModal = () =>
  this.setState(
    { modalOpen: false },
    startBrowserBack
  ); 
```

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2018-10-06T16:51:40.733

```
history.pushState(null, null, document.URL);
window.addEventListener('popstate', function () {
    history.pushState(null, null, document.URL);
}); 
```

此 JavaScript 代码不允许任何用户返回（适用于 Chrome、Firefox、Internet Explorer 和 Edge）。

* * *

## 回答 #12

> 赞同：10
> 
> 时间：2013-02-15T12:49:24.037

[jordanhollinger.com](http://jordanhollinger.com/2012/06/08/disable-the-back-button-using-html5)上的这篇文章是我认为的最佳选择。类似于 Razor 的答案，但更清晰一些。代码如下；乔丹霍林格的完整学分：

前一页：

```
<a href="/page-of-no-return.htm#no-back>You can't go back from the next page</a> 
```

不归路的 JavaScript 页面：

```
// It works without the History API, but will clutter up the history
var history_api = typeof history.pushState !== 'undefined'

// The previous page asks that it not be returned to
if ( location.hash == '#no-back' ) {
  // Push "#no-back" onto the history, making it the most recent "page"
  if ( history_api ) history.pushState(null, '', '#stay')
  else location.hash = '#stay'

  // When the back button is pressed, it will harmlessly change the url
  // hash from "#stay" to "#no-back", which triggers this function
  window.onhashchange = function() {
    // User tried to go back; warn user, rinse and repeat
    if ( location.hash == '#no-back' ) {
      alert("You shall not pass!")
      if ( history_api ) history.pushState(null, '', '#stay')
      else location.hash = '#stay'
    }
  }
} 
```

* * *

## 回答 #13

> 赞同：10
> 
> 时间：2013-06-18T18:20:24.290

```
<html>
<head>
    <title>Disable Back Button in Browser - Online Demo</title>
    <style type="text/css">
        body, input {
            font-family: Calibri, Arial;
        }
    </style>
    <script type="text/javascript">
        window.history.forward();
        function noBack() {
            window.history.forward();
        }
    </script>
</head>
<body onload="noBack();" onpageshow="if (event.persisted) noBack();" onunload="">
    <H2>Demo</H2>
    <p>This page contains the code to avoid Back button.</p>
    <p>Click here to Goto <a href="noback.html">NoBack Page</a></p>
</body>
</html> 
```

* * *

## 回答 #14

> 赞同：9
> 
> 时间：2020-01-17T10:51:56.747

此代码已使用最新的 Chrome 和 Firefox 浏览器进行了测试。

```
<script type="text/javascript">
    history.pushState(null, null, location.href);
    history.back();
    history.forward();
    window.onpopstate = function () { history.go(1); };
</script> 
```

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2017-02-07T07:14:35.460

轻松尝试：

```
history.pushState(null, null, document.title);
window.addEventListener('popstate', function () {
    history.pushState(null, null, document.title);
}); 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2017-04-01T16:44:50.707

非常简单和干净的功能，可以在不干扰页面的情况下打破后退箭头。

**好处：**

*   即时加载并恢复原始哈希，因此用户不会因 URL 明显变化而分心。
*   用户仍然可以通过按回 10 次退出（这是一件好事），但不会意外
*   没有像其他解决方案那样使用的用户干扰`onbeforeunload`
*   它只运行一次并且不会干扰进一步的哈希操作，以防您使用它来跟踪状态
*   恢复原始哈希，几乎不可见。
*   使用`setInterval`，因此它不会破坏慢速浏览器并且始终有效。
*   纯 JavaScript，不需要 HTML5 历史，适用于任何地方。
*   不显眼，简单，并且与其他代码配合得很好。
*   不使用`unbeforeunload`模式对话框中断用户。
*   它只是工作而没有大惊小怪。

注意：其他一些解决方案使用`onbeforeunload`. 请**不要**用于`onbeforeunload`此目的，当用户尝试关闭窗口、点击后退箭头等时，它会弹出一个对话框。像这样的模态`onbeforeunload`通常只适用于极少数情况下，例如当他们实际在屏幕上进行了更改并且没有t救了他们，不是为了这个目的。

**这个怎么运作**

1.  在页面加载时执行
2.  保存您的原始哈希（如果在 URL 中）。
3.  按顺序将 #/noop/{1..10} 附加到哈希
4.  恢复原始哈希

就是这样。没有进一步的混乱，没有后台事件监控，没有别的。

**一秒使用**

要部署，只需在页面或 JavaScript 代码中的任意位置添加：

```
<script>
    /* Break back button */
    window.onload = function(){
      var i = 0;
      var previous_hash = window.location.hash;
      var x = setInterval(function(){
        i++;
        window.location.hash = "/noop/" + i;
        if (i==10){
          clearInterval(x);
          window.location.hash = previous_hash;
        }
      }, 10);
    }
</script> 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2015-11-12T19:28:00.090

这似乎对我们禁用浏览器上的后退按钮以及退格按钮使您返回有效。

```
history.pushState(null, null, $(location).attr('href'));
window.addEventListener('popstate', function () {
    history.pushState(null, null, $(location).attr('href'));
}); 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2019-01-16T23:33:31.540

在现代浏览器中，这似乎可行：

```
// https://developer.mozilla.org/en-US/docs/Web/API/History_API
let popHandler = () => {
  if (confirm('Go back?')) {
    window.history.back() 
  } else {
    window.history.forward()
    setTimeout(() => {
      window.addEventListener('popstate', popHandler, {once: true})
    }, 50) // delay needed since the above is an async operation for some reason
  }
}
window.addEventListener('popstate', popHandler, {once: true})
window.history.pushState(null,null,null) 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2019-11-18T06:22:21.520

你可以放一个小脚本然后检查。它不允许您访问上一页。

这是在 JavaScript 中完成的。

```
<script type="text/javascript">
    function preventbackbutton() { window.history.forward(); }
    setTimeout("preventbackbutton()", 0);
    window.onunload = function () { null };
</script> 
```

当您尝试通过浏览器访问后一页或上一页时，window.onunload 函数会触发。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2020-03-13T19:06:02.100

[我对React](https://en.wikipedia.org/wiki/React_(web_framework))（类组件）有这个问题。

我很容易解决了它：

```
componentDidMount() {
    window.addEventListener("popstate", e => {
        this.props.history.goForward();
    }
} 
```

我用过`HashRouter`从`react-router-dom`.

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2020-12-24T05:16:52.507

只需立即运行代码片段并尝试返回

```
history.pushState(null, null, window.location.href);
history.back();
window.onpopstate = () => history.forward();
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2014-07-01T06:22:47.023

```
<script src="~/main.js" type="text/javascript"></script>

<script type="text/javascript">
    window.history.forward();

    function noBack() {
        window.history.forward();
    }
</script> 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2014-09-04T12:23:07.207

你根本不能也不应该这样做。但是，这可能会有所帮助：

```
<script type = "text/javascript" >
    history.pushState(null, null, 'pagename');
    window.addEventListener('popstate', function(event) {
        history.pushState(null, null, 'pagename');
    });
</script> 
```

这适用于我的 Google Chrome 和 Firefox。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2015-04-07T12:14:59.747

尝试这样做以防止 Internet Explorer 中的退格按钮默认充当“后退”：

```
<script language="JavaScript">
    $(document).ready(function() {
    $(document).unbind('keydown').bind('keydown', function (event) {
        var doPrevent = false;

        if (event.keyCode === 8 ) {
            var d = event.srcElement || event.target;
            if ((d.tagName.toUpperCase() === 'INPUT' &&
                 (
                     d.type.toUpperCase() === 'TEXT'     ||
                     d.type.toUpperCase() === 'PASSWORD' ||
                     d.type.toUpperCase() === 'FILE'     ||
                     d.type.toUpperCase() === 'EMAIL'    ||
                     d.type.toUpperCase() === 'SEARCH'   ||
                     d.type.toUpperCase() === 'DATE' )
                ) ||
                d.tagName.toUpperCase() === 'TEXTAREA') {

                     doPrevent = d.readOnly || d.disabled;
                }
                else {
                    doPrevent = true;
                }
            }

            if (doPrevent) {
                event.preventDefault();
            }

            try {
                document.addEventListener('keydown', function (e) {
                    if ((e.keyCode === 13)) {
                        //alert('Enter keydown');
                        e.stopPropagation();
                        e.preventDefault();
                    }
                }, true);
            }
            catch (err) {
            }
        });
    });
</script> 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2016-11-03T11:45:31.497

它基本上将窗口的“onbeforeunload”事件与正在进行的文档“mouseenter”/“mouseleave”事件一起分配，因此警报仅在单击超出文档范围时触发（然后可能是浏览器的后退或前进按钮）

```
 $(document).on('mouseenter', function(e) { 
            window.onbeforeunload = null; 
        }
    );

    $(document).on('mouseleave', function(e) { 
            window.onbeforeunload = function() { return "You work will be lost."; };
        }
    );
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2014-09-26T01:18:09.680

我创建了一个 HTML 页面 ( *index.html* )。*我还在脚本*文件夹/目录中创建了一个（*mechanism.js*） 。然后，我根据需要使用 form、table、span 和 div 标签将所有内容放在 ( *index.html ) 中。*现在，这是让后退/前进什么都不做的技巧！

 **首先，您只有一页的事实！其次，使用带有 span / div 标签的 JavaScript 在需要时通过常规链接在同一页面上隐藏和显示内容！

在'index.html'里面：

```
<td width="89px" align="right" valign="top" style="letter-spacing:1px;">
    <small>
        <b>
            <a href="#" class="traff" onClick="DisplayInTrafficTable();">IN</a>&nbsp;
        </b>
    </small>
    [&nbsp;<span id="inCountSPN">0</span>&nbsp;]
</td> 
```

在“mechanism.js”内部：

```
function DisplayInTrafficTable()
{
    var itmsCNT = 0;
    var dsplyIn = "";
    for (i=0; i<inTraffic.length; i++)
    {
        dsplyIn += "<tr><td width='11'></td><td align='right'>" + (++itmsCNT) + "</td><td width='11'></td><td><b>" + inTraffic[i] + "</b></td><td width='11'></td><td>" + entryTimeArray[i] + "</td><td width='11'></td><td>" + entryDateArray[i] + "</td><td width='11'></td></tr>";
    }
    document.getElementById('inOutSPN').innerHTML =
        "" +
        "<table border='0' style='background:#fff;'><tr><th colspan='21' style='background:#feb;padding:11px;'><h3 style='margin-bottom:-1px;'>INCOMING TRAFFIC REPORT</h3>" +
        DateStamp() +
        "&nbsp;&nbsp;-&nbsp;&nbsp;<small><a href='#' style='letter-spacing:1px;' onclick='OpenPrintableIn();'>PRINT</a></small></th></tr><tr style='background:#eee;'><td></td><td><b>###</b></td><td></td><td><b>ID #</b></td><td></td><td width='79'><b>TYPE</b></td><td></td><td><b>FIRST</b></td><td></td><td><b>LAST</b></td><td></td><td><b>PLATE #</b></td><td></td><td><b>COMPANY</b></td><td></td><td><b>TIME</b></td><td></td><td><b>DATE</b></td><td></td><td><b>IN / OUT</b></td><td></td></tr>" +
        dsplyIn.toUpperCase() +
        "</table>" +
        "";
    return document.getElementById('inOutSPN').innerHTML;
} 
```

它看起来很麻烦，但请注意函数名称和调用、嵌入的 HTML 和 span 标记 id 调用。这是为了展示如何将不同的 HTML 注入同一页面上的同一 span 标签中！后退/前进如何影响此设计？它不能，因为您在同一页面上隐藏对象并替换其他对象！

我们如何隐藏和显示？开始：

根据需要在“mechanism.js”中的内部函数，使用：

```
document.getElementById('textOverPic').style.display = "none"; //hide
document.getElementById('textOverPic').style.display = "";     //display 
```

在'index.html'内部通过链接调用函数：

```
<img src="images/someimage.jpg" alt="" />
<span class="textOverPic" id="textOverPic"></span> 
```

和

```
<a href="#" style="color:#119;font-size:11px;text-decoration:none;letter-spacing:1px;" onclick="HiddenTextsManager(1);">Introduction</a> 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2014-11-03T21:11:11.680

就我而言，这是一个购物订单。所以我禁用了按钮。当用户单击返回时，该按钮仍然被禁用。当他们再次单击返回时，然后单击页面按钮前进。我知道他们的订单已提交并跳到另一页。

在页面实际刷新的情况下，这将使按钮（理论上）可用；然后，我能够在页面加载中做出反应，订单已经提交并被重定向。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-06-17T07:01:50.590

刚设置`location.hash="Something"`。按下后退按钮时，哈希将从 URL 中删除，但页面不会返回。

这种方法可以很好地防止意外返回，但出于安全目的，您应该设计后端以防止重新应答。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2020-10-21T11:08:51.847

这里的一些解决方案不会阻止后退事件的发生 - 他们让后退事件发生（并且浏览器内存中保存的有关页面的数据丢失）然后他们播放前进事件以尝试隐藏后退事件的事实事件刚刚发生。如果页面保持瞬态，则不成功。

我为 React 编写了这个解决方案（当没有使用反应路由器时），它基于 vrfvr 的回答。

除非用户确认弹出窗口，否则它将真正阻止后退按钮执行任何操作：

```
 const onHashChange = useCallback(() => {
    const confirm = window.confirm(
      'Warning - going back will cause you to loose unsaved data. Really go back?',
    );
    window.removeEventListener('hashchange', onHashChange);
    if (confirm) {
      setTimeout(() => {
        window.history.go(-1);
      }, 1);
    } else {
      window.location.hash = 'no-back';
      setTimeout(() => {
        window.addEventListener('hashchange', onHashChange);
      }, 1);
    }
  }, []);

  useEffect(() => {
    window.location.hash = 'no-back';
    setTimeout(() => {
      window.addEventListener('hashchange', onHashChange);
    }, 1);
    return () => {
      window.removeEventListener('hashchange', onHashChange);
    };
  }, []); 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2021-03-04T16:13:38.580

此代码是完整的 javascript。把它放在你的主页上或任何你需要的东西上，当有人回去时，它会把他们带到他们以前所在的页面上。

```
<script type="text/javascript"> 
        function preventBack() { 
            window.history.forward();  
        } 

        setTimeout("preventBack()", 0); 

        window.onunload = function () { null }; 
    </script> 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-07-20T16:42:02.463

这是我对 Google 查询“禁用后退按钮”的第一次点击。我的用例与最初发布的问题略有不同。我需要为已登录安全网站的用户“禁用后退按钮”（即防止用户注销，然后另一个用户可以通过点击后退按钮查看前一个用户的信息）。

简而言之，这里的目标是防止用户在登录用户注销后看到应用程序页面。

这可以通过将下面显示的代码添加到经过身份验证的应用程序的页面来实现。

此处提供了使用 Apache Shiro 的完整示例：

[https://github.com/NACHC-CAD/web-security-example/releases/tag/v2.0.0](https://github.com/NACHC-CAD/web-security-example/releases/tag/v2.0.0)

```
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="-1" />
<meta http-equiv="CACHE-CONTROL" content="NO-CACHE" />

<script>
    if(performance.navigation.type == 2){
        console.log("Doing reload");   
        location.reload(true);
        console.log("Done with reload");
    }
    console.log("Script loaded.")
</script> 
```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2021-07-31T11:39:49.247

这有效：

```
$(document).ready(async function ()
{
    history.pushState(null, null, location.href);
    window.onpopstate = function () {
        history.go(1);
    };
} 
```

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2022-01-17T09:03:49.750

基于答案@Franklin Innocent F

Kotlin/JS (React) 的解决方案：

```
import org.w3c.dom.events.Event
import kotlin.browser.document
import kotlin.browser.window

...
override fun componentDidMount() {
    window.history.pushState(null, "", window.location.href)
    window.history.back()
    window.history.forward()
    window.addEventListener("popstate", browserBackButtonHandler)
}

...
private val browserBackButtonHandler: (Event?) -> Unit = {
    window.history.go(1)
} 
```

* * *

## 回答 #34

> 赞同：-1
> 
> 时间：2020-09-15T11:55:25.437

这是另一种方法。我们可以添加简短的 SessionStorage 条件，而不是仅仅试图避免返回按钮功能（不能可靠地工作）。

假设我们有三个不同的页面（page1、page2 和 page3）。在每一页上，我们都有一个链接可以点击进入下一个页面，我们不希望用户能够返回到上一页。

在第一页 (page1.html) 上，我们创建一个带有虚拟“prev”代码的 SI（sessionStorage Item）和另一个带有“page1”代码（SI “now”）的 SI：

```
 PAGE 1  <button onclick="goto()">PAGE 2</button>

  -------------------

  let thispage = '1' // Or 123456 if preferred or make sense

  // You can replace this fixed 'thispage' value on each page with a script counting the clicks
  // or any other way to increase its value, i.e., thispage++
  // or what you want, even counting the url.length (lol)

  sessionStorage.setItem('prev', '0') // Dummy code
  sessionStorage.setItem('now', thispage)

  // You can here make this page unreachable with page2/page3 SI same conditions

  function goto(){
      window.location = "page2.html"
  } 
```

在 page2.html 上，我们使用通常的 NoBack 脚本（如果它有效），并且仅当我们来自 page1 时才更新 SI：

```
 PAGE 2  <button onclick="goto()">PAGE 3</button>

  -------------------

  // If it works, let it work :-)

  history.pushState(null, null, location.href);
  history.back();
  history.forward();
  window.onpopstate = function () {
      history.go(1);
  };

  // else

  let thispage = '2' // 456789
  let thisprev = sessionStorage.getItem('now')
  if(sessionStorage.getItem('prev')==thispage) {
      console.log('USER is back on PAGE 2')
      setTimeout(function() { goto() }, 1000); // Remove log + setTimeout
  }
  if(thisprev !== thispage) {
      if(thisprev < thispage) {
          console.log('USER is coming from PAGE 1')
          sessionStorage.setItem('prev', thisprev)
          sessionStorage.setItem('now', thispage)
      }
      else {
          console.log('USER try to reload this page')
          setTimeout(function() { goto() }, 1000);
      }
  }

  function goto(){
      window.location = "page3.html"
  } 
```

在 page3.html 上：

```
 PAGE 3  <button onclick="goto()">BACK TO PAGE 1</button>

  -------------------

  history.pushState(null, null, location.href);
  history.back();
  history.forward();
  window.onpopstate = function () {
      history.go(1);
  };

  let thispage = '3' // 999999
  let thisprev = sessionStorage.getItem('now')
  if(sessionStorage.getItem('prev') == thispage) {
      goto()
  }
  if(thisprev !== thispage) {
      if(thisprev < thispage) {
          sessionStorage.setItem('prev', thisprev)
          sessionStorage.setItem('now', thispage)
      }
      else {
          goto()
      }
  }
  function goto(){
      window.location = "page1.html" // Reinit test
  } 
```

优点是即使用户手动重新加载前一页（如果他有时间查看并记住 URL）它仍然有效。它并未在所有设备上进行测试，但似乎在 Firefox + Chrome + Edge Windows 10 和 Firefox + Chrome 在 OS X 上运行良好。

* * *

## 回答 #35

> 赞同：-2
> 
> 时间：2017-07-20T09:57:34.857

```
//"use strict";
function stopBackSpace(e) {
    var ev = e || window.event;
    var obj = ev.target || ev.srcElement;
    var t = obj.type || obj.getAttribute('type');

    var vReadOnly = obj.getAttribute('readonly');
    var vEnabled = obj.getAttribute('enabled');
    // null
    vReadOnly = (vReadOnly == null) ? false : vReadOnly;
    vEnabled = (vEnabled == null) ? true : vEnabled;
    // when click Backspace,judge the type of obj.

    var flag1 = ((t == 'password' || t == 'text' || t == 'textarea') && ((vReadOnly == true || vReadOnly == 'readonly') || vEnabled != true)) ? true : false;

    var flag2 = (t != 'password' && t != 'text' && t != 'textarea') ? true : false;

    if (flag2) {
        e.keyCode = 0;
        e.cancelBubble = true;
        return false;
    }
    if (flag1) {
        e.keyCode = 0;
        e.cancelBubble = true;
        return false;
    }
}
if (typeof($) == 'function') {
    $(function() {
        $(document).keydown(function(e) {
            if (e.keyCode == 8) {
                return stopBackSpace(e);
            }
        });
    });
} else {
    document.onkeydown = stopBackSpace;
} 
```**

# logging - 在 db2diag 中编写我自己的日志

> ID：12381566
> 
> 赞同：0
> 
> 时间：2012-09-12T05:09:31.177
> 
> 标签：logging, db2

我想知道是否可以写入 db2 诊断工具 db2diag。

例如，我有一个存储过程，我想在那个文件中写一些东西。

是否有任何 API 可以访问此设施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:53:11.417

为了直接在 db2diag.log 文件中写入，需要使用 DB2 API，特别是 db2AdminMsgWrite 文件。该日志将表明这是一个用户日志，包含普通 db2 日志的所有组件。

# backbone.js - 使用咖啡脚本的 Trigger.io Backbone 和 OAuth2

> ID：12381571
> 
> 赞同：1
> 
> 时间：2012-09-12T05:11:02.253
> 
> 标签：backbone.js, coffeescript, oauth-2.0, trigger.io

我有一个使用 Doorkeeper gem 在 localhost:3000 上提供数据的 Rails 应用程序以提供安全的 API

客户端是一个 Trigger.io 应用程序，我正在用我的 Android 手机测试，Railscasts Backbone 剧集中的 Raffler。

问题>

1.  我有一个函数可以返回正确的 oauth 令牌和 url 以访问服务器。我很困惑我应该在哪里调用该函数以及我应该如何存储返回值，以便在创建新集合之前它对 Collection 类可用。

2.  当客户端查询服务器时，它返回 200 并且似乎将请求的对象传回，但我的视图没有给出预期的结果 - 它返回零的长度应该是三。

为了测试这一点，我在浏览器中输入了 url，复制了返回的 json 对象并将其直接传递给在 router.coffee/initialize 中实例化 @collection 的函数。这会在视图中获得所需的结果。

我尝试在 Trigger.io 的催化剂调试控制台中获取 json 对象，没有任何乐趣。Fetch 返回一个对象，但长度为 0

不知道如何调试超出我尝试过的，新的咖啡/主干。感谢您的帮助，谢谢！

raffler.coffee

```
window.Raffler ?= {
  Models: {}
  Collections: {}
  Views: {}
  Routers: {}
  init: ->
    new Raffler.Routers.Entries()
    Backbone.history.start()
}

$(document).ready ->
  Raffler.init() 
```

条目.咖啡

```
class Raffler.Collections.Entries extends Backbone.Collection
  url:  'http://192.168.1.14:3000/api/v1/entries?access_token=022f854...
  initialize: -> # this returns a valid url&token for accessing the server 
```

entry_router.coffee

```
class Raffler.Routers.Entries extends Backbone.Router
  routes:
    '': 'index'

  initialize: ->
    @collection = new Raffler.Collections.Entries()
    @collection.fetch()

  index: ->
    view = new Raffler.Views.EntriesIndex(collection: @collection)
    $('#container').append(view.render().el) 
```

entry_index.coffee

```
class Raffler.Views.EntriesIndex extends Backbone.View

  template: _.template( $('#item-template').html() )

  initialize: ->
    @collection.on('fetch', @render, this)

  render: ->
    $(@el).html(@template(entries: @collection))
    this 
```

索引.html

```
.....
<head>
<script id="item-template" type="text/x-underscore-template">
        <h1> Raffler </h1>
        <%- entries.length  %>
</script>
</head> etc... 
```

* * *

RE：问题1这是我目前正在尝试的：

entry_router.coffee

```
initialize: ->
    @collection = new Raffler.Collections.Entries()
    @collection.fetch() 
```

条目.咖啡

```
class Raffler.Collections.Entries extends Backbone.Collection
  url: @url
  @url = () -> 
        return "http://192.168.1.14:3000/api/v1/entries?access_token=#{params.access_token}" 
```

导致“必须指定 url”错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:40:12.670

这里有两种方法可以解决第一个问题。您可以`url`在 Collection 实例上设置属性。因此，您可以执行以下操作，而不是返回您生成的 URL：

```
class Raffler.Collections.Entries extends Backbone.Collection
  initialize: (args...) ->
    @url = 'http://192.168.1.14:3000/api/v1/entries?access_token=022f854'
    super(args...)

entries = new Raffler.Collections.Entries()
  entries.fetch() # will use the url attribute on the collection instance 
```

您还可以将 URL 指定为参数`fetch`：

```
entries.fetch(url: 'http://somewhereelse.com/') # will use a different URL
```

对于第二部分，我怀疑由于来自 JavaScript 的 HTTP 请求的[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，您遇到了问题。使用 Trigger.io Forge 时通常的解决方案是使用[forge.requests](http://docs.trigger.io/en/v1.4/modules/request.html)模块进行跨域请求，填充集合的简单方法是：

```
entries = new Raffler.Collections.Entries()

forge.requests.ajax(
  url: 'http://192.168.1.14:3000/api/v1/entries?access_token=022f854'
  type: 'GET'
  dataType: 'json'
  success: (data) ->
    entries.reset(data)
  error: (e) ->
    forge.logging.error("Failed to get entries: #{e.message}")
) 
```

一种更有用的方法可能是覆盖[Backbone.sync](http://backbonejs.org/#Sync)以返回到`forge.requests.ajax`. 这可能只是更改`Backbone.sync`from的最后一行的情况，`$.ajax`因为这两个 API 非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T20:30:20.903

以防万一它可以帮助任何人 - [https://github.com/martindavis/trigger-backbone.sync](https://github.com/martindavis/trigger-backbone.sync)

# php - 在javascript中设置cookie值并用php显示

> ID：12381573
> 
> 赞同：1
> 
> 时间：2012-09-12T05:11:16.293
> 
> 标签：php, javascript, html

我有一个输出问题，我似乎无法追踪问题，这里是代码：

示例.js

```
var m_names = new Array("January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December");
var cmonth = myDate.getMonth();
var cdate = myDate.getDate();
var temp1 = m_names[cmonth];
var tempo = escape(temp1 + " " + cdate);
document.cookie=fcookie"=" + tempo; 
```

输出.php

```
<?php echo implode($_COOKIE)?> 
```

它显示

713qnihjmdt7mdq8eejvlcd1q1

但我想显示存储在 tempo 变量中的日期，

我尝试直接显示速度变量，它显示了正确的输出，

有什么建议么？我想我需要在 php 端添加一个代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T06:00:57.323

我刚刚更改了以下内容

```
document.cookie='fcookie='+tempo; 
```

和

```
if (isset($_COOKIE["fcookie"])) 
echo $_COOKIE["fcookie"]; 
else 
echo "Cookie Not Set"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T05:25:04.867

你的脚本有几个错误，我已经修改了它们并添加了一些额外的代码，希望这对你有用

```
<script>
    fcookie='mycookie';
    var monthname = new Array("January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December");
    var myDate=new Date();//--->getting today's date
    var cmonth = myDate.getMonth();
    var cdate = myDate.getDate();
    var temp1 = monthname[cmonth];
    var tempo = escape(temp1 + " " + cdate); 
    document.cookie=fcookie+"=" + tempo;//-->missing cookie name and concatenation
    </script>
    <?php
    if (isset($_COOKIE["mycookie"]))
      echo $_COOKIE["mycookie"];
    else
       echo "Cookie Not Set";
    ?> 
```

有关**[Javscript cookie](http://www.w3schools.com/js/js_cookies.asp)**和**[Php Cookie的更多信息](http://www.w3schools.com/php/php_cookies.asp)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T05:18:09.407

首先，您看到的 $_COOKIE 是 PHPSESSID cookie...您没有查看 JS cookie。这篇文章很好地了解了 PHP 和 JS cookie 之间的关系：[http ://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)

# php - opencart中的输出压缩级别

> ID：12381576
> 
> 赞同：5
> 
> 时间：2012-09-12T05:11:20.853
> 
> 标签：php, webserver, opencart

有人可以解释一下 GZIP 输出压缩级别是什么以及它如何影响 OpenCart。我看到您可以在`Admin->System-Settings->Server Tab`. 我猜你可以设置为 0 到 9 之间的值。0 是什么意思，9 是什么意思？我怎样才能知道我的网站应该是什么最佳设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T11:58:14.687

输出压缩是从服务器发送到客户浏览器的 gzip 压缩内容的压缩级别。基本上，如果您客户的浏览器允许压缩内容，它将被发送给他们。这样做的好处是下载量更小，因此数据传输速度更快，节省时间和带宽

至于数字差异，0是不压缩，9是最大压缩。请注意，数字越高，它对服务器性能的影响就越大。根据您的服务器，您可能会或可能不会注意到差异，但建议启用 gzip 输出。这也将提高您的谷歌页面速度分数

# c# - 无法在 C# 中读取 UNICODE URL

> ID：12381578
> 
> 赞同：2
> 
> 时间：2012-09-12T05:11:35.007
> 
> 标签：c#, unicode, web-crawler, idn

以下代码将不起作用：

```
using System;
using System.IO;
using System.Net;
using System.Web;

namespace Proyecto_Prueba_04
{
    class Program
    {
        /// <summary>
        /// 
        /// </summary>
        /// <param name="url"></param>
        /// <returns></returns>
        public static string GetWebText(string url)
        {
            HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);

            request.UserAgent = "A .NET Web Crawler";

            WebResponse response = request.GetResponse();

            Stream stream = response.GetResponseStream();

            StreamReader reader = new StreamReader(stream);

            string htmlText = reader.ReadToEnd();

            return htmlText;
        } // End of the GetWebText method.

        /// <summary>
        /// 
        /// </summary>
        /// <param name="args"></param>
        public static void Main(string[] args)
        {
            string urlPrueba = Uri.UnescapeDataString("http://?????????.??/");
            Console.WriteLine("urlPrueba" + " = " + urlPrueba);

            var encoded = HttpUtility.UrlPathEncode(urlPrueba);
            Console.WriteLine("encoded" + " = " + encoded);

            string codigoHTML = GetWebText(encoded);
            Console.WriteLine("codigoHTML" + " = " + codigoHTML);

            Console.ReadLine();
        } // End of the Main method.
    } // End of the Program class.
} // End of the Proyecto_Prueba_04 namespace. 
```

我不明白如何处理 UNICODE URL。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T05:50:51.263

您可以使用[IdnMapping](http://msdn.microsoft.com/en-us/library/system.globalization.idnmapping%28v=vs.100%29.aspx)类。

```
 string idn = "президент.рф";

  IdnMapping mapping = new IdnMapping();
  string asciiIdn = mapping.GetAscii(idn);
  Console.WriteLine(asciiIdn);    

  var text = GetWebText("http://" + asciiIdn);
  Console.WriteLine(text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:14:43.387

在字符串中使用 System.Uri 而不是 url。

这是有效的，我试过了：

```
using System;
using System.IO;
using System.Net;
using System.Web;

namespace Proyecto_Prueba_04
{
internal class Program
{
    public static string GetWebText(Uri uri)
    {
        var request = (HttpWebRequest)WebRequest.Create(uri);
        request.UserAgent = "A .NET Web Crawler";

        string htmlText = null;
        using (var response = request.GetResponse())
        {
            using (Stream stream = response.GetResponseStream())
            {
                if (stream != null)
                {
                    using (var reader = new StreamReader(stream))
                    {
                        htmlText = reader.ReadToEnd();
                    }
                }
            }
        }

        return htmlText;
    }

    public static void Main(string[] args)
    {
        const string urlPrueba = "http://президент.рф/";
        var uri = new Uri(urlPrueba);

        Console.WriteLine("urlPrueba" + " = " + uri.AbsoluteUri);

        string codigoHTML = GetWebText(uri);
        Console.WriteLine("codigoHTML" + " = " + codigoHTML);

        Console.ReadLine();
    }
}

} 
```

# ios - 如何将 sortDescriptor 用于一对多关系的属性

> ID：12381585
> 
> 赞同：4
> 
> 时间：2012-09-12T05:12:27.137
> 
> 标签：ios, core-data, nspredicate, nssortdescriptor

1.  我有一个歌曲实体和一个播放列表实体。
2.  播放列表可以有多个歌曲，并且歌曲可以链接到多个播放列表。
3.  我有一个 ListToSongs 实体，它维护将歌曲添加到播放列表的顺序。我没有在 ios5 中使用“有序关系”（我知道它的存在并且我需要对我的模型进行更多控制）并且我通过 PlayListToSong 实体中的“sortOrder”字段存储订单。因此模式被建模为（关系名称写在下面的括号中）：

歌曲（播放列表）<<---->（歌曲）ListToSong（播放列表）<---->>（歌曲）列表

我想使用获取请求获取给定播放列表的所有歌曲。

ListToSong 上的以下查询有效。这会获取所有 PlayListToSong obj，我可以使用 obj.song 来获取 Song 对象。还返回在 sortOrder 上排序的数据。效果很好。（为简洁起见，下面的代码片段是使用 MagicalRecord 编写的）。

```
songFilter = [NSPredicate predicateWithFormat:@"playlist == %@", filterList];    
linkObjs = [FRListToSongs MR_findAllSortedBy:@"sortOrder" ascending:YES withPredicate:songFilter inContext:ctxt]; 
```

以下对 Song 实体的查询会导致崩溃。如果我删除排序描述符并仅获取，它可以工作。所以问题在于 sortDescriptor “playlists.sortOrder”，它试图根据 ListToSongs 实体中的属性进行排序。

```
songFilter = [NSPredicate predicateWithFormat:@"ANY playlists.playlist == %@", filterList];    
songs = [FRSong MR_findAllSortedBy:@"playlists.sortOrder" ascending:YES withPredicate:songFilter inContext:ctxt]; 
```

在纯 SQL（如下所示）中，我试图在 Song 和 ListToSong 之间进行连接，并按“sortOrder”字段排序。

```
SELECT DISTINCT 0, t0.Z_PK, t0.Z_OPT, t0.ZNAME, t0.ZSEQ FROM ZSONG t0 JOIN ZFRLISTTOSONGS t1 ON t0.Z_PK = t1.ZSONG  WHERE  t1.ZPLAYLIST = ? order by t1.ZSORTORDER 
```

如何将上述 SQL 映射到 coredata 语法并给出正确的 sortDescriptor？

*请注意，唯一的问题是如何在最后获得“order by t1.ZSORTORDER”，因为我无法正确指定 sortDescriptor。提取请求在没有排序描述符的情况下工作正常。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:35:21.307

我终于在我的问题中继续使用上面提到的“方法 1”。我获取 ListToSong 实体并使用 obj.song 来获取相关的 Song 对象。我使用 relationshipKeyPathsForPrefetching 来预取链接到 ListToSong 对象的歌曲对象。

# html - 在 Django 中的 POST 方法上处理 perl 脚本

> ID：12381587
> 
> 赞同：1
> 
> 时间：2012-09-12T05:12:36.720
> 
> 标签：html, django, perl

我是新手，我正在尝试在 Django 框架中处理 HTML 中提交按钮上的 perl 脚本。我会尽量保持干净和清楚我想要做什么，为我的英语道歉。

我已经使用 Django 框架构建了简单的注册网站。我想调用 perl 脚本并处理新的用户注册表单，而不是使用 Django auth。

我已经为简单的新用户注册表单和 perl 脚本编写了代码，该脚本从 HTML 中获取数据并拆分该数据并将其发送到后端以进行进一步处理。我使用 CGI 服务器成功完成了这项任务。

我想在 Django 框架中调用这个过程。我该怎么做。我试图用子进程来做，但我没有得到解决方案。

谢谢你 Pervez

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T03:16:36.600

将您的 perl 脚本作为 cgi 运行，将注册表单发布到脚本

```
<form action="your-perl-script.cgi" method="POST">
...
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T15:16:11.677

我不太明白您为什么要这样做，但是您可以将 perl 脚本作为系统命令运行，例如：

```
import commands
commands.getstatusoutput('perl /path/to/script.pl arguments') 
```

# php - xampp apache 服务器也支持 Java EE

> ID：12381589
> 
> 赞同：1
> 
> 时间：2012-09-12T05:12:38.667
> 
> 标签：php, jakarta-ee

我正在使用**xampp 服务器**。它是否支持 Jsp 和 Java servlet？如果没有，是否有任何服务器同时支持 ' **php 和 Java EE** ' 以及如何使用它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T05:23:50.080

使用 Apache Tomcat 7.0，它将同时支持 PHP 和 Java EE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T05:30:04.693

如官方xampp网页所述，它支持：随着新版本XAMPP 1.8.0的发布，

*   阿帕奇 2.4.2
*   MySQL 5.5.25a
*   PHP 5.4.4 phpMyAdmin 3.5.2
*   FileZilla FTP 服务器 0.9.41
*   **Tomcat 7.0.28（以 mod_proxy_ajp 作为连接器）**
*   草莓 Perl 5.16.0.1 便携版
*   XAMPP 控制面板 3.0.12（来自
    hackattack142）

[如果java配置（ Java SE JDK 6](http://www.oracle.com/technetwork/java/javase/downloads/index.html)）正确完成，似乎可以使用tomcat服务器部署您的应用程序。在[这个视频](http://www.youtube.com/watch?v=TUV_jPdq7fc)（使用 XAMPP 将 Tomcat 与 Apache 集成第 1 部分）中，它讲述了如何做到这一点，但基本上您可以将您的 jsp 文件放到`/xampp/tomcat/webapps`文件夹中。

在我看来，开始使用 netbeans IDE 并选择 XAMPP 服务器作为默认服务器，您可以轻松地部署您的 javaEE 应用程序，这是一个好的[开始](http://netbeans.org/kb/docs/web/quickstart-webapps.html)。

对于 PHP tomcat 支持以及 XAMMP 对 PHP 项目的配置非常简单，您可以按照此[视频](http://www.youtube.com/watch?v=ae55c6Ds3-g)中的详细信息进行操作。

# drupal - 如何在drupal 7的排序表中添加复选框？

> ID：12381593
> 
> 赞同：2
> 
> 时间：2012-09-12T05:13:14.873
> 
> 标签：drupal, drupal-7, drupal-modules

* * *

我正在drupal 7中编写一个模块，我想在内容管理中制作一个类似表格的表格。我可以制作这样的排序表，但是如何在标题和每一行中添加复选框？

这是我的代码：

```
 $header = array(
    array('data' => 'Title', 'field' => 'title'),
    array('data' => 'Created', 'field' => 'created','sort' => 'desc'),
    array('data' => 'Published', 'field' => 'status'),
    array('data' => 'Action'),
);

$result = db_select('news','n')->extend('PagerDefault')
    ->fields('n')
    ->limit(10) //This is we can change the number of rows
    ->extend('TableSort') //    Sorting Extender
    ->orderByHeader($header)//  Field to sort on is picked from $header
    ->execute()->fetchAll();

$path = drupal_get_path("module","tuan_nguyen");

foreach($result as $row){
    $img = $path."/del.png";
    if($row->status == 1){
        $img = $path."/check.png";
    }
    $date = format_date($row->created,'medium','','Asia/Ho_Chi_Minh');
    $rows[$row->id] = array(
        l($row->title,'admin/tuan_nguyen/news/edit/'.$row->id),
        $date,
        "<img width='30px' height='30px' src='".$img."'/>",
        l('Edit','admin/tuan_nguyen/news/edit/'.$row->id).' / '.l('Del','admin/tuan_nguyen/news/del/'.$row->id),
    );
}

//Create a render array ($build) which will be themed as a table with a pager
$build['tuan_table'] = array(
    '#theme' => 'table',
    '#header' => $header,
    '#rows' => $rows,
    '#empty' =>t('Table is empty'),
);
//attach the pager theme
$build['tuan_pager'] = array('#theme' => 'pager');
return $build; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T11:42:17.813

您可以使用#type 'tableselect' 在每一行中添加一个复选框，包括标题。您的代码进行了以下几处更改可能会正常工作，

```
 function your_form($form,$form_state){
    $header = array(
        array('data' => 'Title', 'field' => 'title'),
        array('data' => 'Created', 'field' => 'created','sort' => 'desc'),
        array('data' => 'Published', 'field' => 'status'),
        array('data' => 'Action'),
    );

    $result = db_select('news','n')->extend('PagerDefault')
        ->fields('n')
        ->limit(10) //This is we can change the number of rows
        ->extend('TableSort') //    Sorting Extender
        ->orderByHeader($header)//  Field to sort on is picked from $header
        ->execute()->fetchAll();

    $path = drupal_get_path("module","tuan_nguyen");
    $options = array();
    foreach($result as $row){
        $img = $path."/del.png";
        if($row->status == 1){
            $img = $path."/check.png";
        }
        $date = format_date($row->created,'medium','','Asia/Ho_Chi_Minh');
        $rows = array();
        $rows[] = array(
              l($row->title,'admin/tuan_nguyen/news/edit/'.$row->id),
              $date,
              "<img width='30px' height='30px' src='".$img."'/>",              l('Edit','admin/tuan_nguyen/news/edit/'.$row->id).'  / '.l('Del','admin/tuan_nguyen/news/del/'.$row->id),

        );
        $options[$row->id] = $rows;
    }

    //Create a render array ($build) which will be themed as a table with a pager
    $form['tuan_table'] = array(
        '#type' => 'tableselect',
        '#header' => $header,
        '#options' => $options,
        '#empty' =>t('Table is empty'),
    );
    //attach the pager theme
    $build['tuan_pager'] = array('#theme' => 'pager');
    return $form;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T02:39:37.120

我做到了，问题是表必须像表单一样初始化。hook_menu() 中的代码如下：

```
$items['admin/tuan_nguyen/news'] = array(
    'title' => 'Management news',
    'page callback' => 'drupal_get_form', // <----I missed here
    'page arguments' => array("tuan_nguyen_manage_news"),
); 
```

函数“tuan_nguyen_namage_news”中的表格如下：

```
$form['tuan_table'] = array(
    '#type' => 'tableselect', // <--'#type', not '#theme'
    '#header' => $header,
    '#options' => $options, // <-- '#options' not '#rows'
    '#empty' =>t('Table is empty'),
); 
```

反正。太感谢了！！

# jquery - Jquery倒计时onExpiry功能

> ID：12381599
> 
> 赞同：0
> 
> 时间：2012-09-12T05:13:55.810
> 
> 标签：jquery, timer

我正在使用来自[http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)的 jquery countdown.js 进行倒计时过程。它工作正常。问题出在 onExpiry 函数中。请参考以下代码，

```
recursivecall = setTimeout(function () {
            get_last_auction();
        }, 10000);

function get_last_auction() {
 jQuery.ajax({
    type: "POST",
    url: "ajax_get_lastauction",
    dataType: 'json',
    success: function (response) { 

    jQuery('.countbox').countdown({
                    layout: '<b>{d<}{dnn}D:{d>}' + '{hnn}:{mnn}:{snn}</b>',
                    timeSeparator: ':',
                    onExpiry: function () { 
                        if(response.val > 10) {
                        //Mycode
                        }
                    },
                    until: response.clock        
                    }); 
    }
  });                       

 } 
```

在这里我注意到，虽然递归调用为每次调用返回不同的“response.clock”值，但计时器只考虑初始值并开始倒计时。

但是，我需要到期函数中“response.val”的当前更新值（来自我的ajax调用）以进行条件检查。但它只考虑“response.val”的初始值（设置定时器时）。是否可以在 onExpiry 中获取新值？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T05:39:18.027

请试试这个，只是尝试使用`complete`而不是`success`因为是异步函数。让我知道现在是否有效。

```
function get_last_auction() {
 var value = null;

 jQuery.ajax({
    type: "POST",
    url: "ajax_get_lastauction",
    dataType: 'json',
    success: function (response) { 
        value = response
    },
    complete: function(){
       jQuery('.countbox').countdown({
                    layout: '<b>{d<}{dnn}D:{d>}' + '{hnn}:{mnn}:{snn}</b>',
                    timeSeparator: ':',
                    onExpiry: function () { 
                        if(value.val > 10) {
                        //Mycode
                        }
                    },
                    until: value.clock        
     }); 
    }
  });                       

 } 
```

**更新**

如果**不起作用**，则使用`alwaysExpire: true`. [在这里](http://keith-wood.name/countdownRef.html#alwaysExpire)阅读。

# c# - 如何检索在 Acrobat 中选择的打印机名称？

> ID：12381600
> 
> 赞同：9
> 
> 时间：2012-09-12T05:14:12.490
> 
> 标签：c#, windows, acrobat, printdialog

我想使用 SendMessage Windows API 获取在 Acrobat PrintDialog 中选择的打印机的名称。

这是示例代码。

```
static string GetWindowText( hwnd_printDialog_in_Acrobat )
{
    int comboBoxCount = 0;
    int HWND_PRINTER_NAME = 1 ;

    List<IntPtr> ChildPtrList = GetChildWindows(hwnd_printDialog_in_Acrobat);
    for( i=0 ;  i < ChildPtrList.Size(); i++)   {
        GetClassName( ChildPtrList[i], sClass, 100);
        if (sClass.ToString() == "ComboBox") {
            comboBoxCount++;
            if (comboBoxCount == HWND_PRINTER_NAME )   {
                 hwnd = ChildPtrList[i];
                 break;
            }
        }
    }
    ChildPtrList.Clear();

    int sSize ;
    sSize = SendMessageW( hwnd, WM_GETTEXTLENGTH, IntPtr.Zero, IntPtr.Zero )+1;
    StringBuilder  sbTitle = new StringBuilder( sSize );
    SendMessageW( hwn, WM_GETTEXT, (IntPtr)sSize, sbTitle);
    return (sbTitle.ToString());
} 
```

sSize的返回值为4；的值为`sbTitle.ToString()`"?-" 等 预期的 resu 有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:24:46.550

以下是我目前对您的问题的猜测：

*   HWND_PRINTER_NAME 不是 1
*   您要查找的类名不是“ComboBox”
*   未列出代码中的问题：
*   *   抓取错误的父窗口或错误地处理句柄
*   *   SendMessageW DllImport 错误，或参数处理不当

您在列出的代码中确实存在一些错误，因此我的代码并不完全相同，但这是我用来尝试解决您的问题的代码。我无法让它表现得像你描述的那样。我的代码根本找不到类名称为“ComboBox”的子窗口。

```
using System;
using System.Collections.Generic;
using System.Runtime.InteropServices;
using System.Text;

namespace PrinterChoosenInAcrobat
{
class Program
{
    public const uint WM_GETTEXTLENGTH = 0x000E;
    private const uint WM_GETTEXT = 0x000D;

    // External OS calls
    [DllImport("user32.dll", EntryPoint = "SendMessage", CharSet = CharSet.Auto)]
    public static extern bool SendMessage(IntPtr hWnd, uint Msg, IntPtr wParam,
        StringBuilder lParam);

    [DllImport("user32.dll", SetLastError = true)]
    public static extern IntPtr SendMessage(IntPtr hWnd, uint Msg, IntPtr wparam,
        IntPtr lparam);

    [DllImport("User32.dll")]
    public static extern Int32 FindWindow(String lpClassName, String lpWindowName);

    [DllImport("user32.dll")]
    static extern int GetClassName(IntPtr hWnd, StringBuilder lpClassName,
    int nMaxCount);

    static void Main(string[] args)
    {
        try
        {
            IntPtr windowHandle = (IntPtr)FindWindow("AcrobatSDIWindow", null);
            string text = GetWindowText(windowHandle);

            Console.WriteLine(text);

        }
        catch (Exception ex)
        {
            Console.Out.WriteLine(ex.Message);
        }

        // Don't close before I get to read the results
        Console.WriteLine();
        Console.WriteLine("Press Enter to quit.");
        Console.ReadLine();
    }

    static string GetWindowText(IntPtr hwnd_printDialog_in_Acrobat)
    {
        int comboBoxCount = 0;
        int HWND_PRINTER_NAME = 1;

        List<IntPtr> ChildPtrList = GetChildWindows(hwnd_printDialog_in_Acrobat);
        IntPtr hwnd = IntPtr.Zero;
        for (int i = 0; i < ChildPtrList.Count; i++)
        {
            StringBuilder sClass = new StringBuilder();
            GetClassName(ChildPtrList[i], sClass, 100);
            if (sClass.ToString() == "ComboBox")
            {
                comboBoxCount++;
                if (comboBoxCount == HWND_PRINTER_NAME)
                {
                    hwnd = ChildPtrList[i];
                    break;
                }
            }
        }
        ChildPtrList.Clear();

        int sSize;
        sSize = (int)SendMessage(hwnd, WM_GETTEXTLENGTH, IntPtr.Zero, IntPtr.Zero) + 1;

        StringBuilder sbTitle = new StringBuilder(sSize);
        SendMessage(hwnd, WM_GETTEXT, (IntPtr)sSize, sbTitle);
        return (sbTitle.ToString());
    }

    #region Code from http://pinvoke.net/default.aspx/user32/EnumChildWindows.html
    [DllImport("user32")]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool EnumChildWindows(IntPtr window, EnumWindowProc callback, IntPtr i);

    /// <summary>
    /// Returns a list of child windows
    /// </summary>
    /// <param name="parent">Parent of the windows to return</param>
    /// <returns>List of child windows</returns>
    public static List<IntPtr> GetChildWindows(IntPtr parent)
    {
        List<IntPtr> result = new List<IntPtr>();
        GCHandle listHandle = GCHandle.Alloc(result);
        try
        {
            EnumWindowProc childProc = new EnumWindowProc(EnumWindow);
            EnumChildWindows(parent, childProc, GCHandle.ToIntPtr(listHandle));
        }
        finally
        {
            if (listHandle.IsAllocated)
                listHandle.Free();
        }
        return result;
    }

    /// <summary>
    /// Callback method to be used when enumerating windows.
    /// </summary>
    /// <param name="handle">Handle of the next window</param>
    /// <param name="pointer">Pointer to a GCHandle that holds a reference to the list to fill</param>
    /// <returns>True to continue the enumeration, false to bail</returns>
    private static bool EnumWindow(IntPtr handle, IntPtr pointer)
    {
        GCHandle gch = GCHandle.FromIntPtr(pointer);
        List<IntPtr> list = gch.Target as List<IntPtr>;
        if (list == null)
        {
            throw new InvalidCastException("GCHandle Target could not be cast as List<IntPtr>");
        }
        list.Add(handle);
        //  You can modify this to check to see if you want to cancel the operation, then return a null here
        return true;
    }

    /// <summary>
    /// Delegate for the EnumChildWindows method
    /// </summary>
    /// <param name="hWnd">Window handle</param>
    /// <param name="parameter">Caller-defined variable; we use it for a pointer to our list</param>
    /// <returns>True to continue enumerating, false to bail.</returns>
    public delegate bool EnumWindowProc(IntPtr hWnd, IntPtr parameter);
    #endregion

}
} 
```

# hadoop - MapReduce 设计

> ID：12381609
> 
> 赞同：0
> 
> 时间：2012-09-12T05:15:28.663
> 
> 标签：hadoop, mapreduce

数据中的每一行都采用以下格式：

用户 ID、性别、年龄

我们需要回答以下2个问题：

1）有多少男性和多少女性。

2) 50 岁以上有多少，50 岁以下有多少。

有没有办法在一个 Map Reduce 工作中同时回答这两个问题？我知道我可以在 2 个单独的 MR 作业中轻松做到这一点，但希望避免两次读取同一个文件。我怎样才能只在一项 MR 工作中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:12:02.593

在映射阶段，您可以为每条记录输出 2 个键：

*   年轻/年老
*   男/女

将 count 1 作为值并在 reduce 阶段求和，这将为您提供您正在寻找的 4 个值，或者输出 1 个带有组合信息的键：

*   年轻男性/老男性/年轻女性/老女性

在减少阶段将计数 1 相加，为您提供 4 个组合值，您可以使用这些值通过添加计数对来获得所需的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T05:47:30.637

假设您的映射器到 reducer 的输出就像**`context.write(CONSTANT_KEY, VALUE);`**key 是 CONSTANT 而 VALUE 是连接字符串一样**`"X,Y"`**。`X`可以在 {1,0} 中保存 1 个值，其中 1 代表男性，0 代表女性。`Y`可以在 {1,0} 中保存 1 个值，其中 1 代表年龄>50，0 代表年龄<50。**现在在 Reducer 类中，您可以使用StringTokenizer**类轻松计算字段 X 和 Y 的 1 和 0 的数量。唯一的缺点是，因为 KEY 是 CONSTANT，所以只有一个 reducer。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T13:55:11.560

我想我回答了我自己的问题。以下会起作用，对吧？

映射器：

```
if (Male)
  emit("Male", 1)
else
  emit("Female", 1)

if (Age > 50)
  emit("Over 50", 1)
else
  emit("Under 50", 1) 
```

现在这些将转到具有 4 个不同键的 4 个不同的减速器：“男性”、“女性”、“50 岁以上”和“50 岁以下”，这就是我的答案，对吧？

# php - mysqli :: mysqli（）：php_network_getaddresses：getaddrinfo失败：名称或服务未知

> ID：12381615
> 
> 赞同：6
> 
> 时间：2012-09-12T05:16:30.023
> 
> 标签：php, mysql, mysqli

```
<?php

function getMysqlConnection($host, $user, $pass, $database) {
    global $mysqli;
    global $Mysqlerror;
    $mysqli = new mysqli('$host', '$user', '$pass', '$database');
    if (empty($mysqli->connect_errorno) == false) {
        $Mysqlerror = "true";
    } else {
        $Mysqlerror = "false";
    }
} 
```

我已经创建了一个如上所述的函数，它在给定的 MySQL 用户凭据上实现连接，我通过使用实现了这个函数

```
<?php
require 'myFunc.php';
getMysqlConnection("localhost", "wronguser", "wrongpass", " test");
echo $Mysqlerror; 
```

虽然我使用了错误的密码和用户名，但 Mysqlerror 是 false 。我也用过 or die 功能什么都没发生

> 警告：mysqli::mysqli(): php_network_getaddresses: getaddrinfo failed: Name or service not known in /opt/lampp/htdocs/mysite/myFunc.php on line 5
> 
> 警告：mysqli::mysqli(): (HY000/2002): php_network_getaddresses: getaddrinfo failed: Name or service not known in /opt/lampp/htdocs/mysite/myFunc.php on line 5

我像往常一样重新启动了lampp，它显示了

```
Starting XAMPP for Linux 1.8.0...
XAMPP: Starting Apache with SSL (and PHP5)...
XAMPP: Starting MySQL...
Warning: World-writable config file '/opt/lampp/etc/my.cnf' is ignored
XAMPP: Starting ProFTPD...
/opt/lampp/share/lampp/alladdons: line 23: /opt/lampp/share/addons/: is a directory
XAMPP for Linux started. 
```

我的代码或我的服务器有问题吗？如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T05:21:53.200

问题在于这条线。

```
$mysqli = new mysqli('$host','$user','$pass','$database'); 
```

将其更改为

```
$mysqli = new mysqli($host,$user,$pass,$database); 
```

在 PHP 中，单引号内的变量不会插入它们的值。

[在这里](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing)查看 PHP 的变量解析机制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T05:20:46.323

首先检查您的 mysql..正确提供用户名和密码（您在 mysql 中提供）.. w3schools.com 和 tizag.com 中提供了示例数据库连接

# c# - 为什么 JSON.NET 在反序列化时不使用继承

> ID：12381636
> 
> 赞同：9
> 
> 时间：2012-09-12T05:18:43.467
> 
> 标签：c#, .net, c#-4.0, json.net

我通过使用以下工作正常的类将 JSON 字符串反序列化为根对象。

```
[Serializable]
    public class MoviesListRootObject
    {
        public int count { get; set; }
        public Pagination pagination { get; set; }
        public List<Response> response { get; set; }
    } 
```

...................................................

```
var json = wc.DownloadString(jsonRequestURL);
var rootObj = JsonConvert.DeserializeObject<MoviesListRootObject>(json); 
```

但是，如果我将根对象泛化为创建父类然后从它继承，那么反序列化后我会得到 null ！！！

```
[Serializable]
    public class RootObject
    {
        public int count { get; set; }
        public Pagination pagination { get; set; }
    }

[Serializable]
    public class MoviesListRootObject:RootObject
    {
        public List<MovieResponse> movieResponse { get; set; }

    } 
```

..................................................

```
 var json = wc.DownloadString(jsonRequestURL);
 var rootObj = JsonConvert.DeserializeObject<MoviesListRootObject>(json); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-14T10:06:44.397

json.net 提供的开箱即用支持非常简单，您只需在序列化和反序列化时使用以下 JsonSettings：

```
JsonConvert.SerializeObject(graph, Formatting.None, new JsonSerializerSettings() {
    TypeNameHandling = TypeNameHandling.All,
    TypeNameAssemblyFormat = System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Simple
}); 
```

并`Deserializing`使用以下代码：

```
JsonConvert.DeserializeObject(Encoding.UTF8.GetString(bData), type,
    new JsonSerializerSettings() {
    TypeNameHandling = TypeNameHandling.All
}); 
```

只需记下 JsonSerializerSettings 对象初始化程序，这对您很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:44:30.660

假设 json 字符串如下所示

```
{"movieResponse":[{"Rating":"Good"}],"count":1,"pagination":{"PageIndex":1}} 
```

我发现它对我很好。我目前正在使用 Json.net 4.5 r11

如果您在类结构看起来像的时候是序列化对象

```
[Serializable]
public class MoviesListRootObject
{
        public int count { get; set; }
        public Pagination pagination { get; set; }
        public List<Response> response { get; set; }
} 
```

json 字符串如下所示

```
{"count":1,"pagination":{"PageIndex":1},"response":[{"Rating":"Good"}]} 
```

现在您正在使用新结构进行反序列化，那么您将获得 null `movieResponse`，因为新结构中的属性已更改。

要解决此问题，请创建一个新的自定义 jsonConverter 派生自`JsonConverter`并以编程方式创建您的对象。请查看链接[json-deserialization-with-jsonnet-class](http://dotnetbyexample.blogspot.in/2012/02/json-deserialization-with-jsonnet-class.html)以获得一些想法。如果您已经知道这一点并且问题仍然存在，那么请使用更多详细信息更新问题，例如使用的 Json.net 版本、json 字符串、完整的类结构等

HTH。

# asp.net-mvc - 使用自定义成员资格/角色提供程序时如何使用自定义 httpcontext 用户

> ID：12381641
> 
> 赞同：1
> 
> 时间：2012-09-12T05:19:07.470
> 
> 标签：asp.net-mvc, membership-provider

大家好，我正在使用自定义会员提供程序和自定义角色提供程序。它正在正确使用这些登录。我还实现了自己的 Membership 用户对象，这样我就可以访问其他用户信息，并且每次更改页面时都不需要加载所有数据，但我目前无法使其正常工作。下面是我的用户对象：

```
public class User : MembershipUser
{
    [Required(ErrorMessage = "Username cannot be blank")]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required(ErrorMessage = "Password cannot be blank")]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [Display(Name = "User ID")]
    public long UserID { get; set; }

    [Display(Name = "Family Name")]
    [StringLength(50, ErrorMessage = "Family name cannot be longer than 50 characters")]
    public string FamilyName { get; set; }

    [Display(Name = "Given Name")]
    [StringLength(50, ErrorMessage = "Given name cannot be longer than 50 characters")]
    public string GivenName { get; set; }

    public Company Company { get; set; }

    public virtual IIdentity Identity { get; set; }
} 
```

当用户登录时，我调用以下登录方法：

```
 [AllowAnonymous]
    [HttpPost]
    public ActionResult Login(User model, string returnUrl)
    {
        FormsAuthentication.SignOut();
        if(Membership.ValidateUser(model.UserName, model.Password))
        {
            FormsAuthentication.SetAuthCookie(model.UserName, true);
            return RedirectToAction("Index", "");
        }
        ViewBag.Message = "Failed to login";
        return View();
    } 
```

但是当我调用`HttpContext.User`索引时，它只包含名称/ID，而不是我的用户对象的其余部分。我需要创建自定义`FormAuthentication`对象吗？还是将所有这些用户信息存储在`HttpContext.Session`对象中的标准过程？或者让我的用户扩展`System.Security.Principle.IPrinciple`？甚至在`Controller.TempData`? 或者其他我不熟悉的地方。我不想每次都访问数据库来加载用户数据。

抱歉，如果这些是明显的问题，我对 Web 开发还很陌生，并且不确定做这些事情的通用方法是什么。尝试使用 in build Authorize 属性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T07:28:37.990

我通过实现自己的身份来做到这一点。这样就可以轻松添加我需要的任意数量的属性。下面是一个带有自定义属性friendlyName 的代码示例

```
public class Identity : IIdentity
    {
        public Identity(int id, string name, string friendlyName, string roles)
        {
            this.ID = id;
            this.Name = name;
            this.FriendlyName = friendlyName;
            this.Roles = roles;
        }

  public Identity(string name, string data)
    {
        if (string.IsNullOrWhiteSpace(data))
            throw new ArgumentException();

        string[] values = data.Split('|');
        if (values.Length != 3)
            throw new ArgumentException();

        this.Name = name;
        this.ID = Convert.ToInt32(values[0]);
        this.FriendlyName = values[1];
        Roles = values[2];
    }

    public string AuthenticationType
    {
        get { return "Custom"; }
    }

    public bool IsAuthenticated
    {
        get { return true; }
    }

    public override string ToString()
    {
        return FriendlyName;
    }

    public string GetUserData()
    {
        return string.Format("{0}|{1}|{2}", ID, FriendlyName, Roles);
    }

    public int ID { get; private set; }
    public string Name { get; private set; }
    public string FriendlyName { get; private set; }
    public string Roles { get; private set; }
}

//in controller on login action:
        Identity id = new Identity(user.ID,  user.Username, "some friendly name", user.Roles);
        DateTime expire = DateTime.Now.AddMinutes(FormsAuthentication.Timeout.TotalMinutes);
        FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(id.ID, user.Username, DateTime.Now, expire, false, id.GetUserData());
        string hashTicket = FormsAuthentication.Encrypt(ticket);
        HttpCookie cookie = new HttpCookie(FormsAuthentication.FormsCookieName, hashTicket);
        HttpContext.Response.Cookies.Add(cookie); 
```

在 global.asax 中，您有：

```
public override void Init()
        {
            base.Init();
            PostAuthenticateRequest += new EventHandler(MvcApplication_PostAuthenticateRequest);
        }

    void MvcApplication_PostAuthenticateRequest(object sender, EventArgs e)
    {
        HttpCookie authCookie = Request.Cookies[FormsAuthentication.FormsCookieName];
        if (authCookie != null)
        {
            FormsAuthenticationTicket authTicket = FormsAuthentication.Decrypt(authCookie.Value);
            if (authTicket == null || authTicket.Expired)
                return;

            Identity id = new Identity(authTicket.Name, authTicket.UserData);
            Principal user = new Principal(id);
            Context.User = user;
            Thread.CurrentPrincipal = user;
        }
    } 
```

# java - Eclipse 说我每天都有错误，但我没有

> ID：12381642
> 
> 赞同：0
> 
> 时间：2012-09-12T05:19:08.960
> 
> 标签：java, android, eclipse

这似乎是动态代码解析器的问题。当我输入一些东西时，eclipse（最新版本）可能会更新以反映我有一个错误。但是当我完成输入该行时，该错误仍将保留在“问题”选项卡中并且永远不会得到修复，无论我对该文件或任何其他文件进行什么更改。解决此问题的唯一方法是转到 Project->Clean... 这当然每次都有效。

我使用快速原型制作技术，我需要在一天中测试我的项目数百次。这个错误大约有 10% 的时间发生在我想运行或调试一个项目的时候，也就是每天 10 次。清理我的项目需要花费大量时间，因为我们有数百个资源需要重新解析。这非常令人沮丧，并且正在扼杀我的生产力。是否有任何修复或补丁来解决这个问题？如果没有，有人知道解决方法吗？

![不会消失的典型解析错误](../Images/37bc2efe2ed0eb9e27cfce7d4c0b2591.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T06:35:07.713

你能扩大错误吗？

我想这一定是由于链接错误..确保添加了所有必需的 jar，这应该可以解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T05:23:09.427

右键单击您的项目并单击刷新。它通常可以工作并且比完全清洁和构建要快得多。

# php - 网络连接凭证

> ID：12381650
> 
> 赞同：1
> 
> 时间：2012-09-12T05:20:22.620
> 
> 标签：php, api, twitter, streaming, phirehose

只是一个菜鸟问题，但实际上是一个障碍。

我正在尝试使用 Twitter 的流媒体 API。我遇到了 PhireHose。

我能够设置并上传到面向网络的网络服务器，但是我的问题是我从哪里获得这个“用户名”和“密码”凭证？我尝试了我的 Twitter 凭据，但它仍然显示

> Phirehose：HTTP 失败 x of 20 连接到流：HTTP 错误 401：未经授权

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:54:24.287

检查事项：

1) 你的 twitter 应用程序是否在 dev.twitter.com 上正确设置，并且你的 API 密钥设置是否正确？

2) 检查您的 arg_separator.output 设置，它应该设置为 '&'，而不是 '&'。

3) 检查 OAuth 签名过程的每个步骤的输出，并查看它是否与 Twitter OAuth 文档中概述的过程相匹配。特别是寻找字符编码差异。

4) 联系 Twitter，看看你的 IP 是否被列入黑名单。

一些实际的代码会很好，并且实际上会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-25T09:43:32.517

您应该与 Phirehose 一起使用的用户名和密码不是您帐户的凭据，而是 Twitter API 生成的令牌。转到[http://developer.twitter.com](http://developer.twitter.com)并生成一个新应用程序。在“密钥和访问令牌”选项卡中，您将能够找到您需要使用的前两个密钥：

```
Consumer Key (API Key)
Consumer Secret (API Secret) 
```

它们对应于 Phihose

```
define("TWITTER_CONSUMER_KEY", "");
define("TWITTER_CONSUMER_SECRET",""); 
```

然后，您必须查看“您的访问令牌”部分，您可以在其中找到

```
Access Token
Access Token Secret 
```

这是您需要使用的 2 个字符串：

```
define("OAUTH_TOKEN", "");
define("OAUTH_SECRET", ""); 
```

希望这会有所帮助，S。

# javascript - Box2D JavaScript 为对象设置最大速度

> ID：12381655
> 
> 赞同：0
> 
> 时间：2012-09-12T05:20:58.277
> 
> 标签：javascript, box2d

我在 box2D 中有一组动态对象，它们受到不同随机力的影响，我想为每个对象设置最大速度（平移和旋转速度）？

我想过一个黑客，但我想知道引擎是否提供了实现这一目标的工具。

预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T06:25:04.340

box2D.Common.b2Settings.b2_maxTranslation = 9000
box2D.Common.b2Settings.b2_maxRotation = 9000

# android - eclipse ping UsageServer 启动失败

> ID：12381658
> 
> 赞同：3
> 
> 时间：2012-09-12T05:21:29.217
> 
> 标签：android, eclipse

我开始日食时遇到问题。那`'Android SDK Ping' has encountered a problem ping UsageServer failed`

我有 Windows 7 32 位系统，我正在使用 eclipse indigo 和 android android ADT 20.0.0 如果有人知道解决方案，请帮助我...

# javascript - 字符串中存在拆分字符时的拆分功能

> ID：12381660
> 
> 赞同：1
> 
> 时间：2012-09-12T05:21:51.700
> 
> 标签：javascript, jquery

这是场景：
我有 6 个具有一些特殊字符的字符串变量。
我将这 6 个字符串分配给这样的数组：

```
arr=[str1,str2,str3.....);
arr=escape(arr); 
```

因为某些字符串变量具有特殊字符。
之后，我将它发送`arr`到其他函数，然后在其他函数中接收它，如下所示：
var`newarr=unescape(arr);`
现在我想从这个**新的 arr**中获取所有六个变量，我该怎么做？
目前我正在使用拆分功能，如：`.split(',');`

但问题是，在我`,`内部的一些变量中，它被拆分了两次，我不希望这样。

我有三个变量

```
img='/cardfinderservice/services/imageservice/?cardVersionId=16682&amp';

desc= '5% Cash Back on up to $1,500 spent at grocery stores and movie theatres from 4/1/12-6/30/12&lt;br /&gt';

details='Unlimited 1% Cash Back on all other purchases&lt;br /&gt;Up to an additional 10% Cash Back when you shop online at select merchants through Chase&lt;br /&gt;No annual fee and rewards never expire&lt;/p&gt';

Var arr=[img,desc,details];   
arr=escape(arr);   
loadabc(arr);   
function loadabc(arr){    
    var newarr=unescape(arr);   
    newarr=newarr.split(',');   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T05:42:29.807

**[jsFiddle 演示](http://jsfiddle.net/3hD2Z/)**

```
var arr=[img,desc,details].join('|||');  // join with something special :)
arr=escape(arr);   
loadabc(arr);

function loadabc(arr){    
    var newarr=unescape(arr);   
    newarr=newarr.split('|||'); // instead of comma split by |||
    alert(newarr[1]);           // test tricky one holding a comma
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T05:53:09.317

让我们停止尝试用非常规战术解决他的问题。显然，不需要转义数组，将其传递给函数，然后取消转义。这是不好的。

如果您不在字符串中使用单引号，则无需转义

[http://jsfiddle.net/n6haN/](http://jsfiddle.net/n6haN/)

控制台日志对我来说看起来不错！

# asp.net - 如何在 asp.net 网络表单中更改命名空间名称

> ID：12381665
> 
> 赞同：1
> 
> 时间：2012-09-12T05:22:13.917
> 
> 标签：asp.net

如何更改 asp.net webform 中的命名空间名称例如，在我的项目中，我在 Master 文件夹中创建了 3 个文件夹 Master、Transaction、Reports，默认情况下有 10 个表单命名空间来自 ProjectName.Master，但是当我手动更改名称时通过添加我的表单名称它不起作用例如：-ProjectName.Master.MasterFormName。此外，当我双击一个按钮时，它不会进入后面的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T05:25:31.280

仅在 c# 代码中更改命名空间是不够的。
您还需要告诉您的 .master 文件它继承自哪个类。
在你的 .master 文件中设置新的命名空间，你会很高兴的。

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="ProjectName.Master.cs"   
    Inherits="ProjectName.Master.MasterFormName.MasterFormName" %> 
```

只是我个人的意见：将你的类名放在命名空间中没有多大意义。

# javascript - 选择经典asp中的所有复选框功能

> ID：12381669
> 
> 赞同：1
> 
> 时间：2012-09-12T05:22:41.843
> 
> 标签：javascript, asp-classic, checkbox, selectall

我有一个全选复选框，后跟对应于来自数据库的每条记录的各个复选框。我如何实现一个javascript函数，这样当一个人选中全选时，所有复选框都会被选中，反之亦然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:31:35.970

尝试这个：

```
function checkAll(id) {
    var checkboxCollection = document.getElementById('<%= chkint.ClientID %>').getElementsByTagName('input');
    for (var i = 0; i < checkboxCollection.length; i++) {
        if (checkboxCollection[i].type.toString().toLowerCase() == "checkbox") {
            checkboxCollection[i].checked = id.checked;
        }
    }
}

function select() {
    var count = 0;
    var chkSelectAll = document.getElementById('<%= selectall.ClientID %>');
    var chkList = document.getElementById('<%= chkint.ClientID %>').getElementsByTagName("input");
    for (var i = 0; i < chkList.length; i++) {
        if (chkList[i].checked == true) {
            count++;
        }
    }
    if (count == chkList.length)
        chkSelectAll.checked = true;
    else 
        chkSelectAll.checked = false;        
} 
```

在这段代码中，`chkint`是 Checkboxlist`selectall`的 ID，是 selectall 复选框的 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T05:27:41.790

首先为您的全选复选框提供一个 ID，例如“selectall”，并为所有其他复选框提供一个类作为 allcheck 并尝试使用此代码。

```
 $("#selectall").click(function() {
    if (!$(this).is(':checked'))
    {
        $('.allcheck').each(function(){
            $(this).prop("checked", false);
        });
    }
    else
    {

        $('.allcheck').each(function(){
            $(this).prop("checked", true);
        });
    }

}); 
```

当用户取消选中所有应取消选中的框时，我想这也是预期的功能

注意：-假设您使用的是 jquery，我已经给出了这个答案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T08:54:32.380

Here is a pure javascript solution:

[jsFiddle here](http://jsfiddle.net/c9FGt/).

Simply attach the function to the onClick event of your 'Select All' checkbox and wrap the rest of your options in a div like so:

```
<script>
    function checkAll() {
        var checkbox_options = document.getElementById("checkbox_options");
        var checkbox_all = document.getElementById("checkbox_all");

        var checkboxes = checkbox_options.getElementsByTagName("input");        
        for (i = 0; i < checkboxes.length; i++) {
            checkboxes[i].checked = checkbox_all.checked;
        }
    }
</script>

<label><input id="checkbox_all" type="checkbox" onclick="checkAll()" />Select All</label><br />
<div id="checkbox_options">
    <label><input type="checkbox" />CheckBox1</label><br />
    <label><input type="checkbox" />CheckBox2</label><br />
    <label><input type="checkbox" />CheckBox3</label><br />
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T08:02:16.203

与 Aravind 类似，使用 jQuery，您可以将所有复选框分组到一个容器中，并为其指定一个 ID，并为您的 SelectAll 复选框指定一个 ID。在该代码很简单之后，请参见[此处的小提琴](http://jsfiddle.net/xDDCC/)：

```
$("#selectall").click(function() {
    if ($(this).is(':checked'))
        $("#selectallcontainer :checkbox").not(this).attr('checked', true);
    else
        $("#selectallcontainer :checkbox").not(this).attr('checked', false);
});​ 
```

# c# - c#字符串到html保留空格？

> ID：12381670
> 
> 赞同：5
> 
> 时间：2012-09-12T05:22:44.490
> 
> 标签：c#, html

我觉得我在搜索时一定错过了一个关键字或其他东西，因为我似乎找不到其他人在寻找这个......

我在 c# 中有一个包含换行符、空格、制表符等的字符串，我想在 MVC 中的 html 页面上显示它，但保留格式而不是丢失所有空格。

我首先使用了一些正则表达式来插入换行符，但在继续尝试用 html 中的赞赏间距替换所有其他可能的空白之前，似乎已经构建了一个类或库来执行此操作。

有谁知道我如何可以轻松地将 ac# 字符串转换为 html 并保留空白？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T05:25:08.550

`<pre>`只需在标签内渲染它

# c# - 如何在c#中将2.0转换为四精度浮点数

> ID：12381684
> 
> 赞同：-1
> 
> 时间：2012-09-12T05:25:05.537
> 
> 标签：c#, .net

我有以下代码：

```
float f = 0.02; 
```

结果等价于：

```
f = 0.0200 
```

如何在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T05:32:52.070

浮点数有一个*值*（例如 0.02）。

打印时，您可以将其格式化为任意数量的不同表示形式，包括“0.002”、“0.00200”和“科学记数法”。它是具有*相同精度的**相同*值- 它只是打印不同（可能小数点后的位数不同）。

 *我相信您的问题是关于“格式化”的：

`String s = String.Format("{0:0.0000}", 0.002);`

这里有更多细节：

*   [http://msdn.microsoft.com/en-us/library/s8s7t687.aspx](http://msdn.microsoft.com/en-us/library/s8s7t687.aspx)

*   [http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

*   [http://www.dotnetperls.com/string-format](http://www.dotnetperls.com/string-format)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T05:33:46.877

在引擎盖下，无论是否显示尾随零，数字仍然相同。您无法更改数字***是***什么，但您可以通过使用 .ToString() 覆盖来更改它的***显示方式。***

特别是[零自定义说明符](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx#Specifier0)。*

# emacs - 如何在emacs python-mode中取消注释代码块？

> ID：12381692
> 
> 赞同：9
> 
> 时间：2012-09-12T05:26:01.980
> 
> 标签：emacs, python-mode

我刚开始在 emacs 中使用 python-mode，我注意到虽然主要模式有注释掉一个区域（`(py-comment-region)`绑定 `(C-c #)`）的选项，但没有选项可以取消注释已经注释的代码块。我在 python 模式下检查了所有活动的键绑定，但找不到任何相关的键。我错过了什么吗？

我确实想到了一些解决方法，例如使用`(delete-rectangular)`(bound to `C-x r d`) 删除评论。另一种方法是将 绑定`(comment-or-uncomment-region)`到某个键并开始使用它。

但是默认情况下python模式本身是否提供了任何选项？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-19T21:57:26.500

不确定您的设置，但我使用`M-;`它，它对我有用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-05-29T01:20:38.613

> # 如何在emacs python-mode中取消注释代码块？

选择代码，例如用`Ctrl`-`Space`标记和光标在所需代码上。

然后，元分号：`Meta`-`;`

那就是`escape`s`;`或按住`Alt`-`;`

同样的方法也会注释代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T09:59:04.947

大多数评论区域功能将取消评论一个区域`C-u comment-region-function`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T06:12:41.927

我正在使用`comment-dwim`它非常聪明，可用于评论和取消评论活动区域。它也适用于 python 模式。

[您可以在emacs 注释命令](http://www.gnu.org/software/emacs/manual/html_node/emacs/Comment-Commands.html)中找到更多信息。

# c++ - 在类中存储数据

> ID：12381696
> 
> 赞同：0
> 
> 时间：2012-09-12T05:26:25.460
> 
> 标签：c++

我有一个从串行端口获取数据的类，并且我收到 LDR 测量的开关数量仅为 1 和 0。

现在我想将它存储在一个类中，只要程序运行我如何使用托管变量来完成这个？

请注意，串行类每秒运行一次，因此当我创建打开一个我现在使用的类时 StoreClass Store

```
Store.Value = LDR_Value; // LDR_Value is the value from the serial bus 
```

当我这样做时，总会创建一个 StoreClass 的副本，但这并不能解决问题。

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:30:38.937

如果我理解正确，您需要一个容器来存储收到的所有值。如果您有一个名为 的类`StoreClass`，则可以创建一个`vector`成员并执行以下操作：

```
class StoreClass
{
  public:
    void AddValue(int v) { m_values.push_back(v); }

  private:
    std::vector<int> m_values; // Stores all values in order of arrival.
} 
```

现在你只需要你的类的一个实例：

```
int main()
{
  StoreClass storage;
  while(StillSerialInput())
  {
    storage.AddValue(GetSerialValue());
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T05:30:04.647

如果您想在容器中累积数据，请使用标准容器。我认为`std::vector`作为你工作的一个很好的容器就足够了：

```
#include <vector>

using namespace std;

int main()
{
   vector<DataType> dataReceived; //define data container

   DataType buffer; //type of your data
   while(recevingFromDevice) //loop that keeps running as long as you're receiving from your device
   {
      buffer = getDataFromDevice(); //buffer what you receive from the device
      dataReceived.push_back(buffer); //add this buffer to the stack of data
   }
   //now dataReceived is an array with all received data
} 
```

# asp.net-mvc-3 - 如何在 mvc3 中使用单个按钮提供验证

> ID：12381700
> 
> 赞同：1
> 
> 时间：2012-09-12T05:26:35.070
> 
> 标签：asp.net-mvc-3

我在单个表单上有两个按钮。第一个按钮用于上传文件，第二个按钮是提交。 **我想要验证，当我单击提交按钮时，应该生成时间验证**。但是在我的应用程序中，当我单击上传按钮时，会生成时间验证。

看法：

```
<% using (Html.BeginForm("Create","Document", null, FormMethod.Post, new { enctype = "multipart/form-data" }))

<table>

 <tr>
                <td >
                  File Name:
                </td>
                <td >
                    <%: Html.EditorFor(model=>model.document.DOCUMENT_NAME) %>
                    <%: Html.ValidationMessageFor(model => model.document.DOCUMENT_NAME) %>
                </td>              
            </tr>
            <tr>
                <td>               
                    Select File:
                </td>
                <td>          
                    <input type="file" name="file" id="file" style="height: 24px" />
                    <input type="submit" name="submitButton" value="Upload" />
                </td>
<tr>
</table>

 <div>
            <input type="submit" name="submitButton" value="Create" />
</div

<%}%> 
```

控制器：

```
 [Required]
    [Display(Name = "DOCUMENT NAME")]
    [ReadOnly(true)]
    public string DOCUMENT_NAME
    {
        get;
        set;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:00:36.360

表单上的任何按钮（你有两个）都会触发验证。一种可能的解决方案是用某些元素替换上传按钮并通过 jquery 上传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:28:59.547

您还可以检查单击哪个按钮，如下所示

看法：

```
<div>          
<input type="file" name="file" id="file" style="height: 24px" />
<input type="submit" id="btnUpload" name="submitButton" value="Upload" />
</div>

 <div>
<input type="submit" id="btnCreate" name="submitButton" value="Create" />
</div 
```

控制器

```
public ActionResult actionName(string btnUpload,string btnCreate)
{
  //now you can easily check here for which button is clicked

if(btnUpload != null || btnUpload !="")
{
 //perform uploading logic here
}
if(btnCreate!=null || btnCreate !="")
{
 //perform your validation here
} 
} 
```

我希望这能帮到您。

# c# - 编码替代变量选择的更好方法

> ID：12381709
> 
> 赞同：0
> 
> 时间：2012-09-12T05:27:58.873
> 
> 标签：c#, c#-4.0

鉴于下面的简单代码块，我想知道是否有更好的方法在 C# 中进行编码

```
 int lowIndex = 0;
        int highIndex = 1;
        if (end[0].X.ConvertToMillimetres() == end[1].X.ConvertToMillimetres())
        {
            if (end[0].Y.ConvertToMillimetres() > end[1].Y.ConvertToMillimetres())
            {
                lowIndex = 1;
                highIndex = 0;
            }
        }
        else
        {
            if (end[0].X.ConvertToMillimetres() > end[1].X.ConvertToMillimetres())
            {
                lowIndex = 1;
                highIndex = 0;
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T05:33:02.150

像这样的东西怎么样

```
int lowIndex = 0; 
int highIndex = 1; 
if ((end[0].X.ConvertToMillimetres() == end[1].X.ConvertToMillimetres() && end[0].Y.ConvertToMillimetres() > end[1].Y.ConvertToMillimetres()) ||
    (end[0].X.ConvertToMillimetres() > end[1].X.ConvertToMillimetres()))
{ 
    lowIndex = 1; 
    highIndex = 0; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T05:34:39.233

也许是这样的：

```
int X0mm = end[0].X.ConvertToMillimetres();
int X1mm = end[1].X.ConvertToMillimetres();
int Y0mm = end[0].Y.ConvertToMillimetres();
int Y1mm = end[1].Y.ConvertToMillimetres();

int lowIndex = (X0mm == X1mm && Y0mm > Y1mm) || (X0mm > X1mm) ? 1 : 0;
int highIndex = lowIndex == 1 ? 0 :1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T05:36:55.683

我认为您要做的是消除设置两次的两条`lowIndex`线`highIndex`。您可以`IF`像这样组合语句。

```
int lowIndex = 0;
int highIndex = 1;
if ( (end[0].X.ConvertToMillimetres() == end[1].X.ConvertToMillimetres() &&
      end[0].Y.ConvertToMillimetres() > end[1].Y.ConvertToMillimetres()) ||
      end[0].X.ConvertToMillimetres() > end[1].X.ConvertToMillimetres() )
{
    lowIndex = 1;
    highIndex = 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T05:53:28.037

当然：

```
int lowIndex = 0;
int highIndex = 1;
if (   end[0].X.ConvertToMillimetres() == end[1].X.ConvertToMillimetres() 
    && end[0].Y.ConvertToMillimetres() >  end[1].Y.ConvertToMillimetres()  
    || end[0].X.ConvertToMillimetres() != end[1].X.ConvertToMillimetres()
    && end[0].X.ConvertToMillimetres() >  end[1].X.ConvertToMillimetres())
{
    lowIndex = 1;
    highIndex = 0;
} 
```

`end[0].X.ConvertToMillimetres() != end[1].X.ConvertToMillimetres() && end[0].X.ConvertToMillimetres() > end[1].X.ConvertToMillimetres()`将始终等价于`end[0].X.ConvertToMillimetres() > end[1].X.ConvertToMillimetres()`，因此：

```
int lowIndex = 0;
int highIndex = 1;
if (   end[0].X.ConvertToMillimetres() == end[1].X.ConvertToMillimetres() 
    && end[0].Y.ConvertToMillimetres() >  end[1].Y.ConvertToMillimetres()  
    || end[0].X.ConvertToMillimetres() >  end[1].X.ConvertToMillimetres())
{
    lowIndex = 1;
    highIndex = 0;
} 
```

最后，我不确定 ConvertToMillimetres 的结果是什么或它有多复杂/如果 ConvertToMillimetres 使用一些局部变量来捕获这些方法的值以减少计算需要大量时间......不是为了节省一点时间而污染您的本地范围可能不值得。很可能，这是一个相当微不足道的功能，所以它不会很有优势。（end[0] 和 end [1](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.100%29.aspx)作为局部变量可能会更好，正如 Krishna 所说的那样。或者甚至 end [1](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.100%29.aspx) .X 和 end [1](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.100%29.aspx) .Y 等。但如果你这样做，不妨保存结果。）

```
//capture values

var end0Xm = end[0].X.ConvertToMillimetres();
var end1Xm = end[1].X.ConvertToMillimetres();
var end0Ym = end[0].Y.ConvertToMillimetres();
var end1Ym = end[1].Y.ConvertToMillimetres();

//define proper lowIndex, highIndex
int lowIndex = 0;
int highIndex = 1;
if (   end0Xm  == end1Xm 
    && end0Ym  >  end1Ym  
    || end0Xm  >  end1Xm )
{
    lowIndex = 1;
    highIndex = 0;
} 
```

保存测试结果以供将来使用可能会很有用，这也消除了 if 块，这样可以减少将来有人搞砸的机会。但是，您仍然必须有条件地做一些事情。下一个代码块假设您知道并理解[C# 的三元运算符](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.100%29.aspx)。

```
var end0Xm = end[0].X.ConvertToMillimetres();
var end1Xm = end[1].X.ConvertToMillimetres();
var end0Ym = end[0].Y.ConvertToMillimetres();
var end1Ym = end[1].Y.ConvertToMillimetres();

//define proper lowIndex, highIndex
bool testCase = (end0Xm  == end1Xm 
    && end0Ym  >  end1Ym  
    || end0Xm  >  end1Xm);

int lowIndex = testCase? 1 : 0;
int highIndex = testCase? 0 : 1; 
```

或者，也许你更喜欢`highIndex = !testcase? 1: 0`，甚至`highIndex = 1 - lowIndex`。

等等等等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-12T08:13:45.707

我更喜欢可读性而不是紧凑的代码！:) 重命名变量，因为它最适合您的代码...

```
int xComparison = end[0].X.ConvertToMillimetres().CompareTo(end[1].X.ConvertToMillimetres());
int yComparison = end[0].Y.ConvertToMillimetres().CompareTo(end[1].Y.ConvertToMillimetres());

bool isMatch = ((xComparison == 0 && yComparison > 0) || xComparison > 0);

int lowIndex = (isMatch ? 1 : 0);
int highIndex = (isMatch ? 0 : 1); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T05:39:04.903

不要认为这是 C# 4.0 特定的，但您可以使其更具可读性：

```
var endOne = end[0];
var endTwo = end[1];

//now, if you would override the == operator for the type of X and Y to compare using ConvertToMillimetres(), you can have something like:

int lowIndex = (endOne.X == endTwo.X && endOne.Y > endTwo.Y) || (endOne.X > endTwo.X) ? 1 : 0;
int highIndex = lowIndex == 1 ? 0 : 1; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-12T06:02:28.970

我会做一个方法：（代码可维护）

```
private void GetValueM(List<EndType> end,out int  lowIndex,out int  highIndex)
    {
         lowIndex = 0;
         highIndex = 1;

         if ((end != null) && (end.Count > 2))
         {
             var x0 = end[0].X;
             var x1 = end[1].X;
             var y0 = end[0].Y;
             var y1 = end[1].Y;

             if (x0 != null && x1 != null && y0 != null && y1 != null)
             {
                 if ((x0.ConvertToMillimetres() == x1.ConvertToMillimetres() && y0.ConvertToMillimetres() > y1.ConvertToMillimetres()) ||
                     (x0.ConvertToMillimetres() > x1.ConvertToMillimetres()))
                 {
                     lowIndex = 1;
                     highIndex = 0;
                 }

             }
             else
             {
                 //Any is null  set your value or throw exception
             }
         }

    } 
```

# cocoa-touch - 预测表视图滚动目标索引路径

> ID：12381711
> 
> 赞同：0
> 
> 时间：2012-09-12T05:28:09.217
> 
> 标签：cocoa-touch, uitableview, uiscrollview

我看到 UIScrollView 有一种预测最终内容偏移量的方法

```
scrollViewWillEndDragging:withVelocity:targetContentOffset: 
```

并且由于 UITableView 也是一个 UIScrollView，所以我想在视图仍在滚动/减速时使用这个值来计算目标 Cell

我正在尝试遍历所有数据并总结部分标题、单元格高度、部分页脚，直到总和超过目标内容偏移量。它会起作用还是有更好的方法来做到这一点？

在此先感谢，任何帮助表示赞赏！

狮子座

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:55:54.427

不要使用该方法来预测您的表格视图将在哪里结束并尝试猜测要为哪些单元格加载内容。优化表格滚动，尤其是图像的加载，是一个众所周知的问题。查看此 WWDC 视频（[需要开发人员注册](https://developer.apple.com/videos/wwdc/2012/?id=211)）和 Apple 的示例[LazyTableImages](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)项目。基本上，您启动后台操作以加载单元格内容，并在加载内容后更新单元格（如果它们仍在屏幕上）。同时，您显示占位符内容。

如果你按照你想要的方式去做，你只会填充目标单元格，当你滚动过去从未成为目标的单元格时，这看起来很奇怪。

# sql-server-2008 - SQL Server 2008 - 打开记录集时崩溃

> ID：12381715
> 
> 赞同：0
> 
> 时间：2012-09-12T05:29:18.530
> 
> 标签：sql-server-2008, mfc

我必须对交付给客户的软件进行一些维护。
该软件正在使用数据库，为了在我的计算机上进行一些调试会话，我必须安装 SQL Server 2008 R2 和该软件使用的两个数据库（MyData 和 MyRecord）。
我在设置（登录、将数据库映射到 sa 用户）时遇到了一些麻烦，但我设法解决了这些问题。
现在我正在尝试运行该软件，但它在尝试打开记录集时在初始化期间崩溃。

首先，我执行以下操作以连接到数据库：

```
::CoInitialize(NULL);
try   
{   
    HRESULT hr = pConnection.CreateInstance("ADODB.Connection");   
    if (SUCCEEDED(hr))   
    {   
        pConnection->ConnectionTimeout = 0;   
        CString strConnect;
        strConnect.Format(_T("Data Source=MyRecord;uid=sa;pwd=sa123456;"));
        hr = pConnection->Open((_bstr_t)strConnect,"","", -1);
    }   
} 
```

pConnection 定义为：

```
_ConnectionPtr pConnection; 
```

之后，我尝试使用以下代码从数据库“MyRecord”中读取一些数据：

```
CString sqlQuery = _T("select * from 通道1设置参数表");
try
{
    pRecordset.CreateInstance(_uuidof(Recordset));
    pRecordset->Open(_bstr_t(sqlQuery ),pConnection.GetInterfacePtr(),adOpenDynamic,adLockOptimistic,adCmdText);
} 
catch(_com_error   *e)  
{  
    AfxMessageBox(e->Description());   
} 
```

pRecordSet 定义为：

```
_RecordsetPtr pRecordset; 
```

运行“pRecordset->Open(...)”行时，软件在 msado15.tli 文件的 Recordset15::Open(...) 函数中崩溃。
在此 Recordset15::Open 函数中，raw_Open(...) 函数返回 DB_E_NOTABLE。
但是，我确信 MyRecord 数据库中存在表 dbo.通道1 设置参数表。

错误是：

![错误信息](../Images/8a749d4c288d12cc73ae9277f78a31f0.png)

我不知道问题出在 SQL Server 配置上还是代码上。
此代码在客户的 PC 上运行良好，因此我会遇到配置问题。提前致谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T06:47:59.117

在此数据库的 ODBC 连接器中，“将默认数据库更改为”设置未设置为 MyRecord 数据库。
我勾选了复选框，选择了数据库，现在它可以正常工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T06:48:56.480

你的 catch 语句应该是 catch(_com_error & e)

MFC 经常通过指针抛出异常，但是 _com_error 是一个引用。

# c++ - ucontext 和线程本地存储

> ID：12381716
> 
> 赞同：4
> 
> 时间：2012-09-12T05:29:20.980
> 
> 标签：c++, linux, gcc, pthreads, thread-local-storage

我要问的平台是linux。我说的线程本地存储is `pthread_xxx`or `__thread`in gcc。

我想在我的程序中使用 ucontext 的东西，即 makecontext、swapcontext 等。所以我的问题是，它如何与线程本地存储一起工作？更具体地说，如果我使用 swapcontext 或 setcontext 切换到另一个纤程，线程本地存储是否也会发生变化，或者线程本地存储不是上下文的一部分？

另一个问题：如果 TLS 将由`setcontext`/更改`swapcontext`，那么无论我如何更改上下文，是否有任何东西会粘在线程上？另一方面，如果 TLS 会坚持上下文，那么是否有任何东西会坚持线程并且不会被 setcontext/swapcontext 更改？

根据[http://en.wikipedia.org/wiki/Fiber_(computer_science)](http://en.wikipedia.org/wiki/Fiber_%28computer_science%29)，Windows 平台确实有线程本地存储和光纤本地存储。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T06:26:52.277

没有很好地指定线程本地存储如何与 setcontext/swapcontext 交互。

在 Linux 上，线程本地存储不受 setcontext/swapcontext 的影响，并且一些软件依赖于这种行为 - 请参阅 netbsd 邮件列表上的最近讨论以获取更多见解：[swapcontext() around pthreads](http://comments.gmane.org/gmane.os.netbsd.devel.kernel/42682)

同样相关的是关于 TLS 与 C++ 中的并行性交互的一些想法：[TLS_and_Parallelism.pdf](http://wiki.edg.com/twiki/pub/PublicRepository/SG1Docs2012/TLS_and_Parallelism.pdf)

**编辑**：还值得指出的是 makecontext/swapcontext 已从 The Open Group Base Specifications Issue 7 中删除，因为它们已被标记为过时一段时间。作为替代方案，[Boost.Context](http://www.boost.org/doc/libs/1_51_0/libs/context/doc/html/context/overview.html)最近已添加到 Boost 库中（尽管它也不支持光纤本地存储）。

# django - Django：无法在 CBV 中保存相关模型

> ID：12381717
> 
> 赞同：2
> 
> 时间：2012-09-12T05:29:24.647
> 
> 标签：django, django-class-based-views

[我有两个与这种情况](https://stackoverflow.com/q/6576375/1061572)非常相似的模型：

```
class Location(models.Model):
    city = models.CharField(max_length=20)
    address = models.CharField(max_length=30)

class Event(models.Model):
    location = models.ForeignKey(Location)    
    date = models.DateField()
    user = models.ForeignKey(User) 
```

我试图以形式保存这些对象：

```
class EventForm(forms.ModelForm):
    city = forms.CharField(label=_('City'), max_length=30)
    address = forms.CharField(label=_('Street'), max_length=30, required=False)

    class Meta:
        model = Event

    def __init__(self, *args, **kwargs)
        super(EventForm, self).__init__(*args, **kwargs)
        try:
            self.fields['city'].initial = self.instance.location.city
            self.fields['address'].initial = self.instance.location.street
        except AttributeError:
            pass

    def save(self, commit=True):
        event = super(EventForm, self).save(commit=False)
        location = event.location
        location.city = self.cleaned_data['city']
        location.address = self.cleaned_data['address']
        location.save()
        return event 
```

这会引发错误`'NoneType' object has no attribute 'city'`

我还尝试在 CBV 中保存位置：

```
class EventEdit(UpdateView):
    model = Event

    def form_valid(self, form):
        event = form.save(commit=False)
        location = event.location
        location.city = self.cleaned_data['city']
        location.address = self.cleaned_data['address']
        location.save()
        event.save()
        return HttpResponseRedirect(self.get_success_url()) 
```

同样的错误`'NoneType' object has no attribute 'city'`

在基于类的视图中保存相关对象的正确方法是什么？

**更新**

我必须补充一点，我正在询问更新分配给事件的现有位置。`EventCreate(CreateView)`完全按照**Rohan**的建议添加新的活动地点。

```
class EventCreate(CreateView):
    def form_valid(self, form):
        self.object = form.save(commit=False)
        location = Location()
        location.address = self.request.POST['address']
        location.city = self.request.POST['city']
        location.save()
        self.object.location = location
        self.object.save()
        return HttpResponseRedirect(self.get_success_url()) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T05:39:50.457

在你的`save`方法`event.location`中将是`None`. 您需要创建`location` 实例，然后保存它。

*更新*：用于保存现有对象：

我不确定您的实现是阅读[通用视图 - 模型](https://docs.djangoproject.com/en/dev/topics/class-based-views/generic-editing/#model-forms)`UpdateView`后的一种方式

我建议将视图更改为：

```
class EventEdit(UpdateView):
    model = Event

    def form_valid(self, form):
        #instance trying to update
        event = form.instance 
        location = event.location
        if location == None:
            location = Location()
        location.city = self.cleaned_data['city']
        location.address = self.cleaned_data['address']
        location.save()
        event.location = location
        #event.save() instead of this do
        super(EventEdit, self).form_valid(form)
        return HttpResponseRedirect(self.get_success_url()) 
```

* * *

旧解决方案：

我会将保存方法更改为

```
def save(self, commit=True):
    event = super(EventForm, self).save(commit=False)
    location = Location()
    location.city = self.cleaned_data['city']
    location.address = self.cleaned_data['address']
    location.save()
    event.location = location
    event.save()
    return event 
```

# c# - 图像重定向到aspx中的另一种形式？

> ID：12381720
> 
> 赞同：0
> 
> 时间：2012-09-12T05:29:49.250
> 
> 标签：c#, asp.net

这是我的aspx代码...

```
<asp:DataList ID="DataList1" runat="server" RepeatColumns="3" RepeatDirection="Horizontal"
        Width="88%" Height="100px">
        <ItemTemplate>
            <table width="0" border="0" cellpadding="0" cellspacing="1">
                <tr>
                    <td>
                        <%#Eval("Coupon_Image")%>'
                    </td>
                </tr>
                <tr>
                    <td height="20px">
                    </td>
                </tr>
                <tr>
                    <td align="center">
                    <%--<asp:LinkButton   ID="Button1" runat="server" Width="145" Height="34" border="0" CommandArgument='<%# Eval("Coupon_Id") %>'
                       CommandName="Get Coupoun"  OnClick="getCoupon_Click"></asp:LinkButton>--%>
                        <asp:Button ID="getCoupon" runat="server" Width="145" Height="34" border="0" CommandArgument='<%# Eval("Coupon_Id")%>' Text="Get Coupon"
                            OnClick="getCoupon_Click" />
                    </td>
                </tr>
            </table>

        </ItemTemplate>
    </asp:DataList> 
```

我的代码在后面的代码中：

```
private void Binddata()
    {

        DataTable dtReport = new DataTable();
        DataColumn Coupon_Id = new DataColumn("Coupon_Id");
        DataColumn Coupon_Image = new DataColumn("Coupon_Image");

        dtReport.Columns.Add(Coupon_Id);
        dtReport.Columns.Add(Coupon_Image);

        string sendquery = "select Coupon_Id,Coupon_Image from Admin where Coupon_Status='Active'";

        SqlDataAdapter da = new SqlDataAdapter(sendquery, connection);
        DataSet dsProfile = new DataSet();
        da.Fill(dsProfile);
        for (int i = 0; i < dsProfile.Tables[0].Rows.Count; i++)
        {
            DataRow row = dtReport.NewRow();
            row["Coupon_Id"] = dsProfile.Tables[0].Rows[i]["Coupon_Id"].ToString();
            string id = dsProfile.Tables[0].Rows[i]["Coupon_Id"].ToString();

            string ImgName = dsProfile.Tables[0].Rows[i]["Coupon_Image"].ToString();
            string Path = "http://localhost:2872/arpita-coupons/Coupon_Image/" + ImgName ;

            row["Coupon_Image"] = "<img  src='" + Path + "' height='200px' width='200px'  />";
            hddnpath.Value = Path + ImgName + id;
            dtReport.Rows.Add(row);

        }

        DataList1.DataSource = dtReport;
        DataList1.DataBind();
    }

protected void getCoupon_Click(object sender, EventArgs e)
    {

        string id = hddnpath.Value;
        string imagename = hddnpath.Value;
        Response.Redirect("deals-forms.aspx?id="+id+" & ImgName="+imagename+" "+"");
    } 
```

我的问题是如果我单击按钮以将特定图像重定向到另一个页面。但我只得到另一个aspx页面的不同图像......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T06:06:31.540

您将`id`和设置`imagename`为相同的值，然后从两者建立链接。我想某处有问题：

```
string id = hddnpath.Value;
string imagename = hddnpath.Value;
Response.Redirect("deals-forms.aspx?id=" + id    // <-- this variable
                + " & ImgName=" + imagename      // <-- and this one both
                + " " + "");                     //     contain hddnpath.Value 
```

# html - 背景图片边框

> ID：12381721
> 
> 赞同：23
> 
> 时间：2012-09-12T05:29:57.860
> 
> 标签：html, css

是否有一个 css 属性可以在背景图像周围设置边框？我一直在寻找它但没有找到它，它是否存在或者我需要在我的背景图像周围手动绘制线条？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-12T05:31:19.700

这可以通过在 div 中添加图像并设置 div 的边框来完成

```
<div style="border:1px solid red;float:left;">
   <div style="background:url("...");float:left;"></div>
<div> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T05:40:48.520

如果没有具体的实现细节，很难（如果不是不可能的话）提供适用于所有情况的解决方案。这里有几个提供约束的解决方案：

## 示例 1 - 固定大小

如果您知道背景图像的高度和宽度，则可以执行以下操作：

HTML

```
<div class="bg"> </div> 
```

CSS

```
div.bg {
  background-image: url('http://www.google.com/images/logo_sm.gif');
  border: 5px solid #000;
  width: 50px;
  height: 50px;
} 
```

工作示例：http: [//jsfiddle.net/WUHmw/](http://jsfiddle.net/WUHmw/)

## 示例 2 - 重复背景图像

如果背景图像重复，您可以执行以下操作：

HTML

```
<div class="bg">
   <p>Here is some text to on top of the background image.</p>
</div> 
```

CSS

```
div.bg {
  background: url('http://i.imgur.com/ikxbnvc.png') repeat;
  border: 5px solid #000;
  box-sizing: border-box;
  width: 100%;
  height: 200px;
} 
```

工作示例：http: [//jsfiddle.net/pLz52/](http://jsfiddle.net/pLz52/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-06-10T11:22:25.483

这也可以使用 css drop-shadow [https://developer.mozilla.org/en-US/docs/Web/CSS/filter-function/drop-shadow来完成](https://developer.mozilla.org/en-US/docs/Web/CSS/filter-function/drop-shadow)

```
 <div class="box">
  <div class="bgImg"></div>
</div>

 .box {
     width:400px;
     height: 400px;
     display: flex;
     justify-content: center;
     align-items:center;
     border: 1px solid red;
       .bgImg{
        width: 300px;
        height: 300px;
        background: url('http://i.imgur.com/ikxbnvc.png');
        background-repeat: no-repeat;
        background-size: contain;
        background-position: center center;
        filter: drop-shadow(0 0 1px black);
    }
 } 
```

[http://jsfiddle.net/wtesuqjz/](http://jsfiddle.net/wtesuqjz/)

浏览器支持不完善

# java - Java：列出局域网中计算机的文件和文件夹

> ID：12381724
> 
> 赞同：1
> 
> 时间：2012-09-12T05:30:05.143
> 
> 标签：java, lan, java-io, directory-browsing

假设我们的局域网中有一台 PC：192.168.1.122，它只与一个文件“Test.txt”共享一个文件夹“Shared”（即 \\192.168.1.122\Shared\Test.txt）。现在，如果我想浏览 \Shared 中的文件和文件夹，我会写：

```
File f = new File("\\192.168.1.122\Shared");
File [] list = f.listFiles(); // Here I've got one item - Test.txt file. OK. 
```

但是当我尝试浏览顶级文件和文件夹时......

```
File f = new File("\\192.168.1.122"); 
```

...我在 list [] 数组中一无所获。请帮助我浏览 LAN 设备的根文件夹。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:54:50.213

正如 vcetinick[建议](https://stackoverflow.com/questions/12381724/java-list-files-folders-for-computers-in-lan#comment16633538_12381724)的那样，从[这个答案](https://stackoverflow.com/a/8480995)扩展，您可以使用from [jCIFS](http://jcifs.samba.org/) to list （根据手册）[`SmbFile.list()`](http://jcifs.samba.org/src/docs/api/jcifs/smb/SmbFile.html#list%28%29)

> 如果此资源是 smb://server/ 形式的服务器 URL，则服务器的所有可浏览共享，包括打印机、IPC 服务或磁盘卷，

这就是你一直在问的。使用 jCIFS 甚至可以在应用程序不在 Windows 上运行，而是在共享访问不采用`\\host\share\path`.

# c - 如何让 Clang 优化掉无用的数组副本

> ID：12381727
> 
> 赞同：2
> 
> 时间：2012-09-12T05:30:19.713
> 
> 标签：c, arrays, llvm, clang

考虑以下 C99 代码（使用 alloca 扩展。）

```
 void print_int_list(size_t size, int x[size]) {
            int y[size];
            memcpy(y, x, size * sizeof *x);

            for (size_t ii = 0; ii < size; ++ii)
                    printf("%i ", y[ii]);
            printf("\n");
    }

    void print_int_list_2(size_t size, int x[size]) {
            for (size_t ii = 0; ii < size; ++ii)
                    printf("%i ", x[ii]);
            printf("\n");
    }

    void print_int(int x) {
            int * restrict const y = alloca(sizeof x);
            memcpy(y, &x, sizeof x);
            printf("%d\n", *y);
    }

    void print_int_2(int x) {
            printf("%d\n", *x);
    } 
```

在代码中，print_int 被优化为与 Clang 版本 3.0 上的 print_int_2 完全相同，但函数 print_int_list 并未优化为 print_int_2。相反，保留了无用的数组副本。

这种事情对大多数人来说不是问题，但对我来说是。我打算通过生成与 Clang 一起使用的 C 代码来构建编译器的原型，（然后直接将其移植到 LLVM），并且我想生成极其愚蠢、简单且明显正确的代码，并让 LLVM 完成代码优化工作.

我需要知道的是如何让 Clang 优化掉无用的数组副本，以便像 print_int_list 这样的愚蠢代码将优化为像 print_int_list_2 这样的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T06:15:07.310

首先，我会更加小心。在您拥有的两种情况之间有一个步骤，即固定大小的数组。我认为现在编译器可以跟踪也用编译时间常数索引的数组组件。

也不要忘记`memcpy`将您的*数组*转换为指向第一个元素的指针，然后使它们`void*`. 所以它丢失了所有信息。

所以我会去

*   尝试固定大小的数组
*   不要使用`memcpy`赋值循环

并尝试从那里失去约束。

# python - 如何使用 python 运行 cmd windows netsh 命令？

> ID：12381733
> 
> 赞同：2
> 
> 时间：2012-09-12T05:31:13.240
> 
> 标签：python, windows

我正在尝试在 Windows 7 上运行以下 netsh 命令，但是它返回的语法不正确

```
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import os
>>> os.system("netsh interface ipv4 set interface ""Conexão de Rede sem Fio"" metric=1")
The syntax of the file name, directory name or volume label is incorrect.

1
>>> 
```

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T05:46:23.323

`os.system`是一个非常古老的选择，并不推荐。

相反，您应该考虑`subprocess.call()`or `subprocess.Popen()`。

以下是如何使用它们：

如果你不关心输出，那么：

```
import subprocess
...
subprocess.call('netsh interface ipv4 set interface ""Wireless Network" metric=1', shell=True) 
```

如果您确实关心输出，那么：

```
netshcmd=subprocess.Popen('netsh interface ipv4 set interface ""Wireless Network" metric=1', shell=True, stderr=subprocess.PIPE, stdout=subprocess.PIPE )
output, errors =  netshcmd.communicate()
if errors: 
   print "WARNING: ", errors
 else:
   print "SUCCESS ", output 
```

# python - 如何使用 elementtree 在 xmlns 中查找文本

> ID：12381734
> 
> 赞同：0
> 
> 时间：2012-09-12T05:31:16.783
> 
> 标签：python, xml, xml-namespaces, elementtree

我有这个xml：

```
<office:body>
<office:text>
<text:sequence-decls>
<text:sequence-decl text:display-outline-level="0" text:name="Illustration"/>
<text:sequence-decl text:display-outline-level="0" text:name="Table"/>
<text:sequence-decl text:display-outline-level="0" text:name="Text"/>
<text:sequence-decl text:display-outline-level="0" text:name="Drawing"/>
</text:sequence-decls>
<text:p text:style-name="Standard">
<office:annotation>...</office:annotation>
foobar
</text:p>
</office:text>
</office:body> 
```

我想用 elementtree 找到文本“foobar”，因为不是“foobar”可以是任何文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:31:28.370

假设 XML 文档如下所示（带有声明的命名空间）：

```
<office:document-content xmlns:office="http://openoffice.org/2000/office"
                         xmlns:text="http://openoffice.org/2000/text">

  <office:body>
    <office:text>
      <text:sequence-decls>
        <text:sequence-decl text:display-outline-level="0" text:name="Illustration"/>
        <text:sequence-decl text:display-outline-level="0" text:name="Table"/>
        <text:sequence-decl text:display-outline-level="0" text:name="Text"/>
        <text:sequence-decl text:display-outline-level="0" text:name="Drawing"/>
      </text:sequence-decls>
      <text:p text:style-name="Standard">
        <office:annotation>...</office:annotation>
        foobar
      </text:p>
    </office:text>
  </office:body>

</office:document-content> 
```

然后，您可以使用此程序获取“foobar”字符串：

```
from xml.etree import ElementTree as ET

root = ET.parse("foobar.xml")
ann = root.find(".//{http://openoffice.org/2000/office}annotation")
print ann.tail.strip() 
```

在这里，该[`ElementTree.find()`](http://docs.python.org/library/xml.etree.elementtree.html#xml.etree.ElementTree.ElementTree.find)方法用于查找`office:annotation`元素，该[`Element.tail`](http://docs.python.org/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.tail)属性返回元素结束标记之后的文本内容。

# android - 想要完全关闭应用程序

> ID：12381736
> 
> 赞同：1
> 
> 时间：2012-09-12T05:31:22.350
> 
> 标签：android, android-intent

我想关闭我的整个应用程序。我已经尝试过`finishActivity()`背压，但它不起作用。我想在`back`新闻发布会上完全关闭我的申请。我该怎么做？

```
 public void onImageViewClicked(View view){
        switch(view.getId()){
            case R.id.viewStk:
intent = new Intent(MainActivity.this,ViewStkActivity.class);
                startActivityForResult(intent, 12);
                break;
            case R.id.about:
                Intent aboutIntent = new  Intent(MainActivity.this,AboutActivity.class);
                startActivity(aboutIntent);
                break;
    } 

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T05:42:55.930

```
public void onClick(View v) {
    finish();
    android.os.Process.killProcess(android.os.Process.myPid());
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T05:35:43.120

我用：

```
@Override
public void onDestroy()
{
    super.onDestroy();
    // Force the process to be killed on finish(), not kept around
    System.runFinalizersOnExit(true);
    System.exit(0);
} 
```

使用后调用`this.finish()`

（这是活动的一个被覆盖的方法）

人们会抱怨并告诉你它破坏了 Android 应用程序的生命周期，但是在开发过程中在我的应用程序上设置一个“退出”按钮立即提高了我的工作效率。

**编辑**

显然，最新版本的 API 指出该`runFinalizersOnExit`功能已弃用且不安全。我在 Gingerbread、ICS 或 JB 上没有任何问题。但为了充分披露，我会指出这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:27:49.933

**这也将有所帮助**

```
Intent i = new Intent(yourScreen.this,Home.class);
        i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        i.putExtra("EXIT", true);
        startActivity(i); 
```

并在 Home 类的 onCreate 中，执行此操作以检查，

```
if (getIntent().getBooleanExtra("EXIT", false)) 
    {
        finish();
    } 
```

这基本上会做的是，无论您从事什么活动，您都可以使用清晰的顶部标志调用主屏幕。在主屏幕中，onCreate 方法中有一个检查条件，这将有助于清除堆栈。现在，如果您按下返回按钮，您将在堆栈被清除时退出应用程序..

让我知道问题是否仍然存在...

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-09-25T18:58:36.583

在需要实现的 activity.java 文件（fx MainActivity.java）中插入：

```
 public void exitProgram(View view){
    finish();
    System.exit(0);
    } 
```

请记住，还要在 .xml 文件 fx 中调用该函数：

```
<Button
...
...
android:onClick="exitProgram"
...
/> 
```

最后在按钮属性中，在“文本”属性处 - 按下字段旁边的小按钮，然后为您要使用的按钮选择一个 - 完成。

一个好方法吗？一点都不。但如果你只想要一个“panic-lets-get-outta-here”按钮，那么就可以了。

有很多不同的方法可以实现退出功能（其中一种显示在这里）——因为有很多方法可以实现简单的“Hello World”程序——每一种都有它们的价值，你应该真正考虑一下，为什么你选择了你拥有的那个。

# c# - 如何使用 Javascript 显示 asp.net 页面的验证摘要

> ID：12381737
> 
> 赞同：2
> 
> 时间：2012-09-12T05:31:24.613
> 
> 标签：c#, javascript, asp.net

我有一个 asp.net 表单。
在其中，我有许多必需的字段。
我想在表单末尾显示所有字段的验证摘要。
我已经检查了输入控件的有效值。
现在我只想总结。

这是我的有效数据输入代码

```
<script language="javascript" type="text/javascript">
        function userCheck(uName) {
            var uName = document.getElementById(uName);
            var letters = /^[A-Za-z0-9]+$/;
            if (uName.value.match(letters) && uName.value.length != 0) {
                uName.style.border = "2px solid #008A2E";
                return true;
            }
            else {
                uName.value = uName.value.replace(/[\W]/g, '');
                uName.style.border = "2px solid #ff0000";
                uName.focus();
                return false;
            }
        }
</script> 
```

这只是用户名检查的一项功能。
我还有很多事情要处理。
按下提交按钮时，有没有办法在最后显示所有字段的摘要？
以下解决方案不起作用。

```
 function ddlcheck(ddlclg) {
            var clg = document.getElementById(ddlclg.id);
            var clgname = document.getElementById('<%= LblCollegeName.ClientID %>');
            clgname.style.display = "block";
            clgname.innerHTML = "Selected College : " + clg.options[clg.selectedIndex].value;
            clg.style.border = "1px solid #008A2E";
            if (clg.options[clg.selectedIndex].value == "Select") {
                clgname.style.display = "none";
                clg.style.border = "1px solid #ff0000";
                validationhtml = validationhtml + "<b>*</b> College" + "</br>";
            }
        } 
```

上面的代码用于下拉列表。

```
 function select() {
            var count = 0;
            var chkSelectAll = document.getElementById('<%= ChkSelectAll.ClientID %>');
            var chkList = document.getElementById('<%= chk.ClientID %>').getElementsByTagName("input");
            for (var i = 0; i < chkList.length; i++) {
                if (chkList[i].checked == true) {
                    count++;
                }
            }
            if (count == chkList.length)
                chkSelectAll.checked = true;
            else {
                chkSelectAll.checked = false;
            }
        } 
```

上面的代码用于选中的复选框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:50:36.143

在所需位置验证摘要处创建一个 div（错误报告），根据需要为其设置样式

在那之后

```
<script language="javascript" type="text/javascript">
    var validationhtml="";
    function userCheck(uName) {
        var uName = document.getElementById(uName);
        var letters = /^[A-Za-z0-9]+$/;
        if (uName.value.match(letters) && uName.value.length != 0) {
            uName.style.border = "2px solid #008A2E";
            return true;
        } else {
            uName.value = uName.value.replace(/[\W]/g, '');
            uName.style.border = "2px solid #ff0000";
            uName.focus();
            validationhtml=validationhtml +"uname is not correct" ;
            return false;
        }
    }

    function validationsummary() {

        // if using jquery
        $(".errorreport").html(validationhtml); 

        //for javascript
        document.getelementbyid("errorreport").innerHTML = validationhtml; 

        if(validationhtml == "") {
            return true;
        } else {
            return false;
        }
    }
</script> 
```

并在提交按钮单击时调用 validationsummary()

# c# - 为文本框 FormView aspx 处的值设置 GUID

> ID：12381738
> 
> 赞同：1
> 
> 时间：2012-09-12T05:31:29.590
> 
> 标签：c#, asp.net, visual-studio-2010, formview

我创建了 FormView 让用户输入数据以保存到数据库中。我需要禁用其中一个文本框并自动将 GUID 设置为文本框。我怎样才能做到这一点？

```
 <InsertItemTemplate>
  RouteGUID:
  <asp:TextBox ID="RouteGUIDTextBox" runat="server" 
  Text='<%# Bind("RouteGUID") %>' Enabled="False" />
   <br /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:56:20.040

您应该在 ..`FormView`上绑定控件，`Page_Load`或者应该在 ... 上调用该`Formview.DataBind()`方法，`page_load`因为我看不到您的完整代码，所以说这是一个假设。

# objective-c - XCode 4 单元测试：在运行时测试游戏

> ID：12381740
> 
> 赞同：0
> 
> 时间：2012-09-12T05:31:42.600
> 
> 标签：objective-c, unit-testing, ios5, xcode4, runtime

是否可以在运行时进行单元测试？怎么做？我已经做了研究，我所能做的就是做逻辑测试。

有些事件会弹出 UI，做这个和那个。我想测试需要这样做的功能，弹出 UI 等。所以我希望它被模拟并测试它是否会通过。

有什么解决办法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:08:49.000

[Calabash](https://github.com/calabash/calabash-ios)也是一个选项，此外，您可以使用默认的 OCUnit 应用程序测试

# jsf - 单击左侧布局上的子菜单在中心打开页面

> ID：12381746
> 
> 赞同：0
> 
> 时间：2012-09-12T05:32:33.477
> 
> 标签：jsf, primefaces

我有一个 jsf 页面 index.xhtml

```
<!DOCTYPE html>
<html lang="en"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:p="http://primefaces.org/ui"
>
    <h:head>
        <title>Index Page</title>
    </h:head>
    <h:body>
        <p:layout fullPage="true">
            <p:layoutUnit position="north" size="100" resizable="false" closable="false" collapsible="false">
                <h:form>
                    <ui:include src="../header.xhtml" />
                </h:form>
            </p:layoutUnit>

            <p:layoutUnit position="west" size="200" resizable="false" closable="false" collapsible="false">
                <h:form>
                    <ui:include src="../leftpanel.xhtml" />
                </h:form>
            </p:layoutUnit>

            <p:layoutUnit position="center">
                <ui:insert name="content">Blank</ui:insert>
            </p:layoutUnit>
        </p:layout>
    </h:body>
</html> 
```

上面页面的布局有点像这样

```
-------------------------------------------------------
|                                                      |
|                  <header>                            |
|______________________________________________________|
|               |                                      |
|               |                                      |
|      <left>   |         <center>                     |
|               |                                      |
|               |                                      |
|_______________|______________________________________| 
```

我正在使用 Primefaces 3.x 和 JSF 2.x。我有一个要求，左侧布局上有链接，例如菜单及其子菜单，单击子菜单项时，页面应该在中心布局中打开。有人可以指导我，怎么做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-12T06:56:47.140

您必须在 xhtml 页面中定义内容

```
...
<h:body>
    <ui:composition template="index.xhtml">
        <ui:define name="content">
    </ui:composition>
</h:body>
... 
```

并且菜单/子菜单中的链接必须返回 faces-config 中定义的结果，例如：

```
<navigation-rule>
    <from-view-id>/*</from-view-id>
    <navigation-case>
        <from-outcome>subemnu1</from-outcome>
        <to-view-id>/submenu1.xhtml</to-view-id>
    </navigation-case>
</navigation-rule> 
```

# c# - 为什么appbar在flipview的不同页面之间打开？

> ID：12381751
> 
> 赞同：0
> 
> 时间：2012-09-12T05:33:06.877
> 
> 标签：c#, xaml, microsoft-metro, windows-runtime, appbar

我正在使用 FlipView 控件来翻阅各种页面，即 *.XAML 页面。我正在使用`ObservableCollection`类`Page`。现在这些页面中的一个页面包含 AppBar，但 AppBar 也可以在集合中的任何其他 XAML 页面中打开。如何防止在所有页面中打开 AppBar？

简单说明：- 我有四个 XAML 页面。

(1) MainPage.xaml (只包含Page类的FlipView和ObservableCollection)

（2）PageWithAppBar.xaml（AppBar在本页）

(3) PageWithoutAppBar.xaml

(4) PageWithoutAppBar2.xaml

现在通过翻转视图，当我打开**PageWithoutAppBar.xaml**或**PageWithoutAppBar2.xaml**并按右键单击时，**PageWithAppBar.xaml的****AppBar**变得可见，所以我不想要那个东西，我该如何防止呢？

 **到目前为止我已经尝试了什么？

我创建了函数来检查 AppBar 应该在哪个页面中可见。我试图设置

`Visibility = Collapsed`,

`IsOpen = false`,

`this.BottomAppBar = null`,

`IsEnable = false`

然后它也出现了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:23:15.220

看起来 Page.BottomAppBar 适用于主容器页面 - 无论它在哪里声明。鉴于此，我不确定以这种方式使用 AppBars 是否是个好主意。

也许您可能想创建自己的控件，其行为类似于应用栏并使其按您想要的方式工作？看看：[Codeplex 上的 WinRT XAML 工具包](http://winrtxamltoolkit.codeplex.com/)。那里有一个**CustomAppBar**控件，它可能对您有用。**

# c# - 有没有可能在 C# Winforms 中使用 MetroUI？

> ID：12381753
> 
> 赞同：3
> 
> 时间：2012-09-12T05:33:17.783
> 
> 标签：c#, winforms, user-interface, microsoft-metro

我想通过使用 MetroUI 来改变 C# winform 的正常外观。有没有可能这样做

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T20:14:01.847

我认为您可以将我的 MetroFramework 用于 .NET winforms 应用程序！ [http://viperneo.github.io/winforms-modernui/](http://viperneo.github.io/winforms-modernui/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T05:38:51.137

试试这个，它在 winforms 上的 Metro UI 示例：

[http://www.codeproject.com/Articles/138661/Metro-UI-Zune-like-Interface-form](http://www.codeproject.com/Articles/138661/Metro-UI-Zune-like-Interface-form)

[http://www.pfgrid.com/Metro_UI_Tiles_WinForms.aspx](http://www.pfgrid.com/Metro_UI_Tiles_WinForms.aspx)

[http://www.devcomponents.com/kb2/?p=1160](http://www.devcomponents.com/kb2/?p=1160)

[http://www.devcomponents.com/dotnetbar/metro-ui-controls.aspx](http://www.devcomponents.com/dotnetbar/metro-ui-controls.aspx)

# python - Django：在 .get() 检索的单个模型实例上调用 .update()？

> ID：12381756
> 
> 赞同：93
> 
> 时间：2012-09-12T05:33:46.550
> 
> 标签：python, django, models

我有一个当前调用的函数`Models.object.get()`，它返回 0 或 1 个模型对象。如果它返回 0，我`except DoesNotExist`在函数的子句中创建一个新的模型实例。否则，我想更新现有实例中的字段，而不创建新实例。我最初试图调用`.update()`找到的实例，但`.update()`似乎只能在 QuerySets 上调用。如何绕过更改十几个字段，而无需调用`.filter()`和比较长度以了解我是否必须创建或更新预先存在的实例？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-09-12T05:38:55.887

随着 Django 1.7 的出现，现在有一个新的[`update_or_create`](https://docs.djangoproject.com/en/3.0/ref/models/querysets/#update-or-create)QuerySet 方法，它应该完全符合您的要求。如果在数据库级别没有强制执行唯一性，请注意潜在的竞争条件。

**文档中的示例：**

```
obj, created = Person.objects.update_or_create(
    first_name='John', last_name='Lennon',
    defaults={'first_name': 'Bob'},
) 
```

> 该`update_or_create`方法尝试根据给定的**kwargs**从数据库中获取对象。如果找到匹配项，它会更新`defaults`字典中传递的字段。

* * *

Django 1.7 之前的版本：

根据需要更改模型字段值，然后调用`.save()`以保留更改：

```
try:
    obj = Model.objects.get(field=value)
    obj.field = new_value
    obj.save()
except Model.DoesNotExist:
    obj = Model.objects.create(field=new_value)
# do something else with obj if need be 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2015-05-20T15:15:56.940

如果您只想更新模型（如果存在）（不创建它）：

```
Model.objects.filter(id = 223).update(field1 = 2) 
```

mysql查询：

```
UPDATE `model` SET `field1` = 2 WHERE `model`.`id` = 223 
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2013-10-10T06:25:30.137

从 Django 1.5 开始，模型保存上有一个 update_fields 属性。例如：

`obj.save(update_fields=['field1', 'field2', ...])`

[https://docs.djangoproject.com/en/dev/ref/models/instances/](https://docs.djangoproject.com/en/dev/ref/models/instances/)

我更喜欢这种方法，因为如果您有多个 Web 应用程序实例更改模型实例的不同部分，它不会产生原子性问题。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2012-09-12T05:49:22.350

我不知道这是好是坏，但是您可以尝试以下方法：

```
try:
    obj = Model.objects.get(id=some_id)
except Model.DoesNotExist:
    obj = Model.objects.create()
obj.__dict__.update(your_fields_dict) 
obj.save() 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-10-16T22:58:54.067

这是一个可以混合到任何模型类中的 mixin，它为每个实例提供一个`update`方法：

```
class UpdateMixin(object):
    def update(self, **kwargs):
        if self._state.adding:
            raise self.DoesNotExist
        for field, value in kwargs.items():
            setattr(self, field, value)
        self.save(update_fields=kwargs.keys()) 
```

`self._state.adding`检查检查模型是否保存到数据库中，如果没有，则引发错误。

*（注意：此方法适用于当您要更新模型并且您知道实例已保存到数据库中时，直接回答原始问题。白金 Azure 答案中`update`的内置方法已经涵盖了其他用例。 `update_or_create`)*

你会像这样使用它（在将它混合到你的用户模型中之后）：

```
user = request.user
user.update(favorite_food="ramen") 
```

除了拥有更好的 API 之外，这种方法的另一个优点是它调用了`pre_save`and`post_save`钩子，同时在另一个进程正在更新同一个模型时仍然避免原子性问题。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-10-12T09:17:59.867

正如@Nils 提到的，您可以使用该方法的`update_fields`关键字参数`save()`来手动指定要更新的字段。

```
obj_instance = Model.objects.get(field=value)
obj_instance.field = new_value
obj_instance.field2 = new_value2

obj_instance.save(update_fields=['field', 'field2']) 
```

该`update_fields`值应该是要更新为字符串的字段列表。

请参阅[https://docs.djangoproject.com/en/2.1/ref/models/instances/#specifying-which-fields-to-save](https://docs.djangoproject.com/en/2.1/ref/models/instances/#specifying-which-fields-to-save)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-12T07:28:17.333

在这种情况下，我使用以下代码：

```
obj, created = Model.objects.get_or_create(id=some_id)

if not created:
   resp= "It was created"
else:
   resp= "OK"
   obj.save() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-15T12:14:32.520

更新：

1 -**单个实例：** 获取实例并手动更新 get() 检索单个对象

```
post = Post.objects.get(id=1)
post.title = "update title"
post.save() 
```

2 -**实例集：** 使用 update() 方法，该方法仅适用于 filter() 方法返回的查询集

```
Post.objects.filter(author='ahmed').update(title='updated title for ahmed') 
```

# list - 寻找单链表的中间

> ID：12381758
> 
> 赞同：0
> 
> 时间：2012-09-12T05:33:54.360
> 
> 标签：list, linked-list

我已经修改了我的函数以处理偶数节点的情况，但因此我的代码不适用于奇数节点。怎么了？

```
public LinkedList findMiddleNode() {
    Node t1 = this.getHeadNode();
    Node t2 = this.getHeadNode();
    LinkedList l = new LinkedList();
    boolean even = false;
    while(t1.getNext() != null) {
        t1 = t1.getNext();
        if(t1.getNext()!= null && t1.getNext().getNext() != null) {
            t1 = t1.getNext();
            t2 = t2.getNext();              
        }
    }
    if(t1.getNext()!=null) 
        l.insertFirst(t2.getElement());
    else {
        l.insertFirst(t2.getElement());
        l.insertLast(t2.getNext().getElement());
    }
    return l;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:24:46.473

@oldrinb：谢谢你的帮助，这是我更新的代码：

```
public LinkedList findMiddleNode() {
    Node t1 = this.getHeadNode();
    Node t2 = this.getHeadNode();
    LinkedList l = new LinkedList();
    boolean even = false;
    while(t1.getNext() != null && t1.getNext().getNext() != null) {
            t1 = t1.getNext().getNext();
            t2 = t2.getNext();              
    }
    if(t1.getNext()==null) 
        l.insertFirst(t2.getElement());
    else {
        l.insertFirst(t2.getElement());
        l.insertLast(t2.getNext().getElement());
    }
    return l;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T05:39:47.797

```
/* determine length of list */
int n = 0;
for (Node cur = getHeadNode(); cur != null; cur = cur.getNext()) {
  ++n;
}

/* go half-way */
int m = n / 2;
Node mid = getHeadNode();
while (m > 0) {
  mid = mid.getNext();
  --m;
}

/* if n is odd, both mid and mid.getNext() are the middle */
if ((n % 2) != 0) {
  Node mid2 = mid.getNext();
  ...
} else {
  ...
} 
```

...或者，或者，

```
Node tortoise = getHeadNode();
Node hare = getHeadNode();

do {
  tortoise = tortoise.getNext();
} while (hare.getNext() != null && (hare = hare.getNext().getNext()) != null);

/* tortoise is the middle */ 
```

# android - 将两个安卓应用合二为一

> ID：12381760
> 
> 赞同：0
> 
> 时间：2012-09-12T05:34:07.267
> 
> 标签：android, apk

我有两个安卓应用程序。我想将它们集成到一个中，但我没有这两个应用程序的源代码。我只有apk文件。那么有什么办法可以做到吗？有关详细信息，我想创建一个包含两个按钮的应用程序，第一个按钮将触发第一个应用程序，第二个按钮将触发第二个应用程序。所以我只需要将这两个应用程序嵌入到我的主应用程序中。没有源代码可以做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T10:22:58.383

```
Intent intent = new Intent(currentActivity.this,nextActivity.class);

this.finish();

startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T05:40:29.097

问：我有两个安卓应用程序。我没有这两个应用程序的源代码。我只有apk文件。我可以将它们集成到一个应用程序中吗？

答：没有。

但是您*可以*编写一个可以*启动*任一应用程序的应用程序。

例如：

*   [如何以编程方式在 Android 中启动特定应用程序？](https://stackoverflow.com/questions/3343432/how-do-i-programmatically-launch-a-specific-application-in-android)

*   [从我们的应用程序中打开另一个应用程序？](https://stackoverflow.com/questions/3342655/open-another-one-application-from-our-application)

    `Intent intent = new Intent("com.twidroid.SendTweet");`

# javascript - 堆栈交换站点列表页面中的盒子重排算法

> ID：12381767
> 
> 赞同：1
> 
> 时间：2012-09-12T05:34:46.923
> 
> 标签：javascript, algorithm, webpage, stackexchange

[我对这个 stackexchange 页面](https://stackexchange.com/sites?view=grid)中的一个有趣且有创意的功能感到好奇，它以网格样式列出了所有 stackexchange 站点。

当我单击一个站点框时，它会变大，并且其周围的框将重新排列以适应整个画面。

重排算法如何工作？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:16:18.340

从源代码来看，他们使用的是[jQuery isotope](http://isotope.metafizzy.co/)插件，它的源代码在[这里](https://github.com/desandro/isotope/blob/master/jquery.isotope.js#L874)。您可能还想看看[masonry](http://masonry.desandro.com/)。

在这里您可以找到一些关于如何完成的解释：http: [//benholland.me/javascript/how-to-build-a-site-that-works-like-pinterest/](http://benholland.me/javascript/how-to-build-a-site-that-works-like-pinterest/)

# ajax - .ajaxform 在验证 submitHandler 中不起作用？

> ID：12381768
> 
> 赞同：1
> 
> 时间：2012-09-12T05:34:49.590
> 
> 标签：ajax, jquery, jquery-plugins

我使用jquery验证插件在submitHandler中提交之前验证表单我使用ajax请求在我使用.ajax发送请求之前使用ajax发布表单但是现在表单有图像并且很难通过正常序列化文件元素ajax 请求，因此我使用了这个插件 [http://www.malsup.com/jquery/form/](http://www.malsup.com/jquery/form/)

现在在使用插件之后，ajax 请求根本不起作用，不知道为什么这是第一个使用普通 ajax 调用的示例

```
$(document).ready(function(){
    $("#categoryForm").validate({
    submitHandler: function() {
            $.ajax({
                type:'POST', 
                url: 'actions/add-category.php', 
                data: $("#categoryForm").serialize(), 
                success: function(response) {
                     $('#status').html(response);
                    }
                });

        return false;
    }
    });
}); 
```

使用插件后的这个

```
$(document).ready(function(){
        $("#categoryForm").validate({
        submitHandler: function() {
                $('#categoryForm').ajaxForm(function() {
                alert('the form was successfully processed');
            });

            return false;
        }
        });
    }); 
```

第二个不工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:25:14.553

尝试反转函数：

```
jQuery('#form_id').ajaxForm({
    beforeSubmit: function() {
        jQuery("#form_id").validate({
            rules: {
                first_name: "required",
                last_name: "required"
            },
            messages: {
                first_name: "Required",
                last_name: "Required"
            }
        });
        return jQuery('#form_id').valid();
    },
    success: function(resp) {
        jQuery('#resp').html(resp).fadeIn('fast');
    }
}); 
```

`#resp`将接收从您`#form_id`发布的文件生成的 HTML 的 ID在哪里

# core-data - NSFetchedResultsController 按部分具有不同的排序描述符？

> ID：12381771
> 
> 赞同：1
> 
> 时间：2012-09-12T05:34:56.683
> 
> 标签：core-data

我有一个 NSFetchedResultsController 我有排序描述符数组的第一个排序描述符与 sectionNameKeyPath 相同，因此给了我不同的部分。但我希望第二个排序描述符是不同的 pr 部分。有没有一种好方法可以做到这一点，而无需我将数据推送到数组中然后再次排序？

干杯

尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T18:48:45.027

您已经建议在内部为每个部分使用不同的数组。这不是一个坏方法，因为实际上您只需要担心显示对象的索引路径与真实对象之间的映射。

换句话说，您知道表格视图显示的项目数量很少，因为它向控制器询问这些项目。您不必直接从 FRC 中获取的结果数组中返回项目。

获取索引路径，找出正在请求的部分，然后获取该部分的预排序行。由于数据非常小，您可以根据要求对它们进行动态排序。

另一种方法是向数据模型添加另一个属性。此属性表示节内的排序顺序，您可以将其设置为所需的任何值，因为整个数组将首先按节排序，然后按该属性。

此外，您可能会发现使用代理对象作为获取结果控制器的前端更容易。与“多个数组”方法类似，您只需使用代理对象，当表格视图请求该部分时，该对象在每个部分上应用唯一的排序描述符，并以自己的排序顺序返回对象。

# ios - 如何将阴影背景白色更改为其他颜色

> ID：12381773
> 
> 赞同：9
> 
> 时间：2012-09-12T05:34:57.853
> 
> 标签：ios, uipageviewcontroller

我正在尝试`UIPageViewController`在进行翻转动画时更改阴影颜色。但总是只显示白色。如何将反面背景颜色白色更改为其他颜色，如（黑色或深褐色）。iBook 也在做同样的事情。

我提到下图有白色背景，我想改变这种颜色。

截屏： ![在此处输入图像描述](../Images/3ea1b3bb382759b9d3fca78857254713.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T20:23:42.057

我一直在尝试做同样的事情一段时间，我终于想通了。事实证明，您不能将背景颜色设置为其他颜色，但您可以提供 UIPageViewController 将添加到后面的另一个视图。这就是这里的秘密。

来自 Apple 的文档：

```
Spine location                                Double sided               What to pass
UIPageViewControllerSpineLocationMid               YES               Left and Right Page.
SpineLocationMin or SpineLocationMax               YES               Front and Back of the page.
SpineLocationMin or SpineLocationMax               NO                Front page only. 
```

因此，基本上，您需要将双面属性设置为 yes 并在两个 Data Source 方法上提供两个 viewController：

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController;
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController; 
```

对于您添加的每个新页面，每个方法都将被调用两次。因此，您需要提供通常会返回的 viewController 以及在执行翻页动画时将添加到后面的新 viewController。

您的“BackViewController”将拥有什么取决于您。您可以简单地拥有一个黑色视图，或者如果您愿意，您可以截取首页的屏幕截图，并从中获取镜像图像。

一旦你了解了它的工作原理，这并不难。我在这里看到的唯一问题是，当您添加黑色视图或任何具有黑色背景的东西时，翻页时的阴影会变成白色。我不知道为什么，但我已经在很多不同的应用程序上看到了这种情况，所以我猜对苹果来说这是正常行为。但它看起来真的很奇怪。

**编辑：**

我添加了一个示例代码，以便更容易理解。 [https://github.com/mattabras/DoubleSidedPageViewController](https://github.com/mattabras/DoubleSidedPageViewController)

阿布拉斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:06:16.180

```
- (void) renderPageAtIndex:(NSUInteger)index inContext:(CGContextRef)ctx {
UIImage *image = [images objectAtIndex:index];
CGRect imageRect = CGRectMake(0, 0, image.size.width, image.size.height);
CGAffineTransform transform = aspectFit(imageRect,
                                            CGContextGetClipBoundingBox(ctx));
CGContextConcatCTM(ctx, transform);
CGContextDrawImage(ctx, imageRect, [image CGImage]);
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-12T06:14:15.997

在 pagecontrol 可选择页面可见性颜色的情况下——

UIPageControl 默认不支持这个。您必须创建自己的页面控件并自己进行绘图。

# c# - Winforms Databinding Combobox 在 lostfocus 上恢复

> ID：12381774
> 
> 赞同：0
> 
> 时间：2012-09-12T05:35:05.940
> 
> 标签：c#, winforms, combobox

我有一个 Employee 对象，它有一个 EmploymentStatusID (int) 字段。

我有一个从就业状态枚举填充并绑定到 Form_Load 中的字段的组合框：

```
List<LookupListItem> EmpStatuses = new List<LookupListItem>();
foreach (EmploymentStatuses m in Enum.GetValues(typeof(EmploymentStatuses)))
{
    EmpStatuses.Add(new LookupListItem((int)m, m.ToString()));
}
cboStatus.DataSource = EmpStatuses; // Enum.GetValues(typeof(CommonLibrary.Lookups.EmploymentStatuses));
cboStatus.ValueMember = "ItemValue";
cboStatus.DisplayMember = "ItemDesc";
cboStatus.DataBindings.Add("SelectedValue", _presenter.SelectedOfficer, "EmploymentStatusID"); 
```

当表单出现时，组合框中会显示正确的值，但是如果用户更改了该值，则会在组合框失去焦点时将其设置回来！

相同表单上的文本框和简单组合框（即带有字符串集合的组合框）都可以。

您可以看到我最初尝试仅在枚举上使用 GetValues，但我将其更改为列表以查看是否有帮助。我试过使用 BindingList，我试过在绑定上使用 DataSourceUpdateMode.OnValidation。我什至尝试在 selectedindexchanged 事件上使用 cboStatus.DataBindings[0].WriteValue。无论我做什么，值都会变回表单打开时的值！有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:28:56.807

我修改了你的代码

```
 List<LookupListItem> EmpStatuses = new List<LookupListItem>();
        foreach (EmploymentStatuses m in Enum.GetValues(typeof(EmploymentStatuses)))
        {
            EmpStatuses.Add(new LookupListItem((int)m, m.ToString()));
        }

EmpStatuses.Add(new LookupListItem(<selectedValue>, "SomeText")); //<- my modified code

        cboStatus.DataSource = EmpStatuses; // Enum.GetValues(typeof(CommonLibrary.Lookups.EmploymentStatuses));
        cboStatus.ValueMember = "ItemValue";
        cboStatus.DisplayMember = "ItemDesc";
        // Remove this part cboStatus.DataBindings.Add("SelectedValue", _presenter.SelectedOfficer, "EmploymentStatusID");

cboStatus.SelectedValue = <selectedValue> //<- my modified code 
```

我希望这个能帮上忙 ：）

# javascript - 如何记录。写报价？

> ID：12381777
> 
> 赞同：0
> 
> 时间：2012-09-12T05:35:28.153
> 
> 标签：javascript, document.write

我正在尝试`document.write`使用 JavaScript 对页面进行某些操作。

我的 HTML 目前看起来像这样：

```
<li data="url: 'page.htm', target: 'Page', item: '4'">item4</li> 
```

我正在尝试将它记录到页面上。

`"`但是，我在将 包含在代码中时遇到了问题。我已经厌倦了使用以下内容，但没有运气。

```
document.write("<li data="url: 'reader.htm', target: 'AccessPage', reader: '4'">4</li>"); 
```

任何想法如何在字符串中包含引号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T05:38:36.660

逃脱它。

```
document.write("<li data=\"url: 'reader.htm', target: 'AccessPage', reader: '4'\">4</li>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T05:38:31.093

```
document.write("<li data="url: 'reader.htm', target: 'AccessPage', reader: \"4\"">4</li>"); 
```

尝试使用转义字符..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T05:38:45.823

您可以通过在 document.write 中转义双引号来做到这一点

```
document.write("<li data=\"url: 'reader.htm', target: 'AccessPage', reader: '4'\">4</li>"); 
```

# html - 边距底部和边距顶部不起作用

> ID：12381784
> 
> 赞同：1
> 
> 时间：2012-09-12T05:37:29.333
> 
> 标签：html, css

这是来源：

```
<div style="border:1px solid red; margin-bottom:10px">test block1,</div>;    
<div style="border:1px solid red; margin-top:10px">test block2</div>; 
```

它总是`10px`在block1和block2之间......

我不确定出了什么问题。请不要说“使用`padding`”和“改变`20px`”

我必须使用`margin-bottom`，`margin-top`而且只有`10px`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T05:39:05.817

这称为**折叠边距**

根据 w3c

> 在 CSS 中，两个或多个框（可能是或不是兄弟）的相邻边距可以组合形成一个边距。以这种方式组合的边距称为折叠边距，由此产生的组合边距称为折叠边距。

阅读此[http://reference.sitepoint.com/css/collapsingmargins](http://reference.sitepoint.com/css/collapsingmargins)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T05:55:00.660

使用`float: left;`and 可能也`clear: both;`用于两个 div，它肯定会工作；）

# python - Python 小数舍入

> ID：12381785
> 
> 赞同：7
> 
> 时间：2012-09-12T05:37:40.240
> 
> 标签：python, decimal

意见 #18，在[20 个有争议的编程意见中](http://programmers.blogoverflow.com/2012/08/20-controversial-programming-opinions/)

让我思考。所以我尝试将 pi 的值打印到小数点后 5 位。

没关系，因为我认为我绝对可以在 Python 中快速完成。在谷歌上几秒钟我就知道了[Python 的 Decimal 模块](http://docs.python.org/release/3.1.5/library/decimal.html)。我完成了。休息是任何人都可以提出来总结系列以获得 Pi 值的基本逻辑。

```
>>>from decimal import *
>>>getcontext().prec = 6
>>>Decimal(22)/Decimal(7) 
```

我写了上面的快速脚本只是为了检查我会得到什么。

但事情是这样的，`getcontext().prec = 6`给了我一个四舍五入的价值！

```
>>>3.14286 
```

确切地说。

我想知道如何确保小数点后第 N 位不四舍五入？我的意思是在这里我希望答案是**3.14285**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-12T05:58:00.860

就像您使用 Decimal 上下文指定精度一样，您也可以指定舍入规则。

```
from decimal import *

getcontext().prec = 6 
getcontext().rounding = ROUND_FLOOR

print Decimal(22)/Decimal(7) 
```

结果将是

```
3.14285 
```

[http://docs.python.org/release/3.1.5/library/decimal.html#decimal.Context](http://docs.python.org/release/3.1.5/library/decimal.html#decimal.Context)

# java - 带负数的 EditText 和 TextWatcher

> ID：12381786
> 
> 赞同：0
> 
> 时间：2012-09-12T05:37:48.190
> 
> 标签：java, android, textwatcher

我在将负整数输入到我的 EditText 时遇到问题，当我这样做时，我得到一个错误的`09-12 06:26:42.025: E/AndroidRuntime(18247): java.lang.NumberFormatException: Invalid int: "-"` xml 文件：

```
<EditText
        android:id="@+id/downAndDistanceStarting"
        android:layout_width="180dp"
        android:layout_height="match_parent"
        android:ems="10"
        android:inputType="numberSigned"
        android:selectAllOnFocus="true"
        android:textSize="@dimen/enterText" > 
```

爪哇代码：

```
end = (EditText) findViewById(R.id.downAndDistanceEnding);
public void afterTextChanged(Editable s) {
int w = Integer.parseInt(end.getText().toString());
} 
```

我假设我的 textWatcher 有问题，它在每次键盘“按下”后“发送”我的输入，所以当我尝试输入 -12 时，它会在我设法完成之前发送“-”用于“解析” ，这就是我的应用程序崩溃的原因，对吗？任何人都知道如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-08T10:04:40.700

我遇到了同样的问题。我在解析之前放置了一个 if 条件。像这样，所以在你输入第二个数字之前它不会解析。

```
end = (EditText) findViewById(R.id.downAndDistanceEnding);
public void afterTextChanged(Editable s) {
  if(!end.getText().toString().equals("-"));
  {
    int w = Integer.parseInt(end.getText().toString());
  } else { //do something  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T05:39:02.297

是的，你是对的。将您的代码包装在 try/catch 块中，然后，当接收到 - 时，它将抛出 NumberFormatException 并被捕获。

```
try
{
int w = Integer.parseInt(end.getText().toString());
}catch(NumberFormatException e)
{

} 
```

# asp.net - 我想在 .Net 中修改 Request 的 URI 但 HttpWebRequest 属性是只读的。我该如何修改这个？

> ID：12381790
> 
> 赞同：1
> 
> 时间：2012-09-12T05:38:09.147
> 
> 标签：asp.net, httpwebrequest, httpwebresponse

我已经讨论过堆栈溢出链接 [Change the Uri of a instance of HttpWebRequest?](https://stackoverflow.com/questions/5015265/change-the-uri-of-a-instance-of-httpwebrequest) 但它建议一些反射黑客。请详细说明一下？

我不能通过仅更改 URI 来处理创建不同的请求，其他所有内容都将保持不变吗？

# php - 动态创建的按钮隐藏在php中

> ID：12381791
> 
> 赞同：1
> 
> 时间：2012-09-12T05:38:26.280
> 
> 标签：php, javascript, jquery

我已经使用这个创建了按钮：

```
$i=1;
while($row=mysql_fetch_array($e))
{   

    echo '<td><img src="'.$path.$row['photo'].'" border="0" width=100 height=50/></td>';
    echo $row['fname'];
    echo "<input type=\"button\" value=\"send request\" name=\"$i\" onclick=\"sendreq('".$row['uname']."')\"/>";
    //echo $i;
    echo "<br/>";
    $i=$i+1;
} 
```

并`username` `onclick`通过函数传递按钮的。这`sendreq()`是`javascript`函数。我只想在`sendreq()`工作完成后隐藏这个按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:41:19.433

您可以使用 javascript 来分配`display:none;`CSS 属性，但我不确定它是否必须应用于封装 div 或者它是否可以直接在图像本身上工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T05:42:41.803

```
$i=1;
while($row=mysql_fetch_array($e))
{   

    echo '<td><img src="'.$path.$row['photo'].'" border="0" width=100 height=50/>
          </td>';
    echo $row['fname'];
    echo "<input id='btnSubmit' type=\"button\" value=\"send request\" name=\"$i\" 
          onclick=\"sendreq('".$row['uname']."');   
          document.GetElementById('btnSubmit').hide(); \"/>";
    //echo $i;
    echo "<br/>";
    $i=$i+1;
} 
```

方法执行后，元素将隐藏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T06:04:43.097

像这样编辑您的输入按钮标签为按钮分配一个ID（例如我在这里使用remove as id）并将此代码添加到函数sendreg的最后一个

```
document.getElementById("remove").style.display='none'; 
```

或使用 jquery 函数，如

```
$("#remove").hide(); 
```

或者`$("#remove").fadeOut(3000);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T05:44:44.970

您可以在函数末尾添加这一行。

```
 <script>
    jQuery("#btnSubmit").hide();
 </script> 
```

希望这可以帮助...

# python - 为什么这两个“x”指的是不同的变量？

> ID：12381793
> 
> 赞同：3
> 
> 时间：2012-09-12T05:38:35.770
> 
> 标签：python

在这段代码中，lambda 中的 x 指的是 for 语句中的 x。所以`y[0]()`返回 2：

```
x = 0
y = [lambda : x for x in range(3)]
y[0]() 
```

但在这段代码中，lambda 中的 x 指的是全局 x，因此`x[0]()`返回全局 x 本身：

```
x = [lambda : x for x in range(3)]
x[0]() 
```

我想知道为什么 lambda 中的 x 在第一段代码中指的是局部 x 而在第二段代码中指的是全局 x。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T05:42:01.120

我猜你在 python 2.x 上，在列表理解中，临时变量“泄漏”到命名空间中。[您可以在Guido](http://python-history.blogspot.com.au/2010/06/from-list-comprehensions-to-generator.html)的这篇博文中了解原因。

> 在 Python 2 中，列表推导将循环控制变量“泄漏”到周围的范围内……这是列表推导的原始实现的产物；多年来，它一直是 Python 的“肮脏小秘密”之一。

这已在 python 3 中修复。

我不确定您为什么将事情与 混淆`lambda`，在这里您将在这个更简单的情况下看到相同的行为：

```
>>> x = 'a'
>>> y = [x for x in 'b','c']
>>> x
'c'
>>> x = [x for x in 'b','c']
>>> x
['b', 'c'] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T05:58:28.413

`x`指的是`x`两段代码中的全局。事实上，在这两段代码中都*只有*一个全局变量。`x`这里没有局部变量，只有全局变量。

在第一个示例中， 的全局值为`x`2，因为这是列表推导分配给它的最后一个值。列表推导式将它们的变量泄漏到@wim 所描述的封闭范围中。由于这里的封闭作用域是全局作用域，因此变量`x`会泄漏到全局作用域中，覆盖您之前设置的值 0。

在第二个示例中，您创建列表推导式，然后将其值分配给（全局）变量 x。这会覆盖 x 中已经存在的任何内容，因此全局变量 x 的值现在是列表。

*在这两种情况下，当您调用列表中的*一个函数（任何一个！）时，它都会`x`返回. 你可以在这里看到这个：

```
>>> y = [lambda : x for x in range(3)]
>>> y[0]()
2
>>> x = 88
>>> y[0]()
88
>>> x = [lambda : x for x in range(3)]
>>> y = x
>>> y[0]()
[<function <lambda> at 0x017789B0>,
 <function <lambda> at 0x01828DB0>,
 <function <lambda> at 0x01828F30>]
>>> x = 88
>>> y[0]()
88 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T05:42:50.733

```
>>> x='a'
>>>x = [lambda : x for x in range(3)] 
```

一旦迭代开始，`x`被分配给`0`，从返回`range()`（并且对'a'的引用被删除）。在最后一次迭代中， 的值`x`变为 2，一旦 LC 退出，LC 就被分配给`x`，所以现在`x`指向 LC。

例子：

```
>>> [x for x in range(3)]
[0, 1, 2]
>>> x     
2
>>> x=[x for x in range(3)]
>>> x
[0, 1, 2] 
```

# android - 带有 Android 问题的 Twitter

> ID：12381804
> 
> 赞同：0
> 
> 时间：2012-09-12T05:39:04.420
> 
> 标签：android, twitter

> **可能重复：**
> [Android 应用程序上的 Twitter 集成](https://stackoverflow.com/questions/1782743/twitter-integration-on-android-app)
> [Android Intent for Twitter 应用程序](https://stackoverflow.com/questions/2077008/android-intent-for-twitter-application)

在这里，我开发了一个 Android 应用程序，我想从我的 Android 应用程序在 Twitter 上发布消息。

我在 Twitter 上注册了我的应用程序，但接下来我该怎么做？我完全糊涂了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T05:46:19.390

您可以使用库 twitter4j 发布消息，或者您可以将您的应用程序与 twitter 应用程序集成，或者您可以通过您的应用程序在浏览器中打开此 url 以发布消息..

[http://twitter.com/?status=message](http://twitter.com/?status=message)

对于 twitter4j 在这里找到代码

[https://github.com/itog/Twitter4j-android-Sample](https://github.com/itog/Twitter4j-android-Sample)

最后一个很容易使用。

# android - Android Proguard - 我可以跳过吗？

> ID：12381806
> 
> 赞同：1
> 
> 时间：2012-09-12T05:39:08.843
> 
> 标签：android, google-play, screenshot

当我打开 proguard 混淆时，我在我的 Android 应用程序上看到一些奇怪的崩溃。我知道我可以对此进行调试并跳过对这些类的混淆，但我的问题是 - 在某些手机或某些我可能没有测试/执行过的代码路径上发生应用程序崩溃的风险是否值得。例如[，此链接](https://stackoverflow.com/questions/7628638/android-proguard-obfuscated-code-is-causing-nullpointerexception-when-it-really)讨论了由于 proguard 导致的一个此类设备特定错误。我即将发布，现在想知道此时是否值得引入 proguard。我知道我应该从一开始就对其进行测试..犯了一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:42:37.457

通常，Proguard 的常见问题是没有为第三方库设置正确的参数。确保您已按照第三方提供商提供的有关添加 proguard.cfg 文件的说明进行操作。无论如何，要禁用 proguard，您可以随时编辑`project.properties`文件并删除该`proguard.config=proguard.cfg`行

# arrays - Vbscript：如何过滤范围内但未在数组集合中找到的那些值？

> ID：12381814
> 
> 赞同：1
> 
> 时间：2012-09-12T05:39:49.443
> 
> 标签：arrays, asp-classic, vbscript

在下面提供的代码中，我有一个测试数组。我想查找那些在 400 到 500 范围内但在 Test 数组 ( `Ex: 410 - Although this value is in the range of 400 to 500, it is not found in the array`)中找不到`set the value of it to 410|New-value`的值网页。

这是代码：

```
Test= Array("1|Name", "2|Place", "400|Animal", "420|Thing")

For Each x in Test
    xSplit=Split(x,"|")
    'Do Something'          
Next    
    'Do Something' 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:04:57.807

显然你在那里有键/值对，所以适当的数据结构可能是一个[字典](http://msdn.microsoft.com/en-us/library/x4k5wbx4%28v=vs.84%29.aspx)：

```
Set dict = CreateObject("Scripting.Dictionary")
For Each x in Test
  xSplit = Split(x, "|")
  dict.Add xSplit(0), xSplit(1)
Next 
```

这样您就可以轻松检查键值是否存在：

```
If dict.Exists(42) Then
  WScript.Echo dict(42)
Else
  WScript.Echo "Index 42 does not exist."
End If 
```

# ios - 将 NSThread 与 NSManagedObject 关联

> ID：12381817
> 
> 赞同：0
> 
> 时间：2012-09-12T05:40:07.513
> 
> 标签：ios, core-data, nsmanagedobject, nsthread

我正在创建具有某些属性的 NSManagedObject （子类）。同时，我正在执行一些代码/一个块，根据我的 NSManagedObject 的属性执行一些网络操作。现在，有时网络操作可能会失败或花费太长时间，所以我想添加取消执行该代码/块的功能。

我正在考虑使代码/块成为 NSThread，然后我可以调用 [theThread cancel]。但是，鉴于我无法将属性添加到 NSManagedObject 类别，如何将 NSThread 与我的 NSManagedObject 关联？将属性添加到 NSManagedObject 本身的定义中是否可以？似乎是合法的，但我猜对核心数据模型的后续更改会覆盖我的代码。

但也许有一种完全不同的更好的方法来完成我想做的事情？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T18:39:02.593

首先，新代码确实应该更喜欢 GCD 或 NSOperationQueue 而不是 NSThread。如果您发现自己正在使用`NSThread`它来放慢速度并重新审视您的设计和实施要求。

其次，跨线程使用 NSManagedObject 非常非常糟糕。如果你只做非常微不足道的事情，那么做正确的事情也会变得非常困难。

最后，无论您如何进行线程网络访问，您都应该更喜欢从托管对象中获取数据并传递它而不是托管对象本身

如果您必须访问托管对象，请确保您的托管对象上下文是`NSMainQueueConcurrencyType`或`NSPrivateQueueConcurrencyType`，并通过调用`performBlock`或`performBlockAndWait`使用托管对象的`managedObjectContext`属性来访问托管对象。

**编辑**

> 好的，让我和你一起检查一下。我目前正在做的是产生一个背景上下文，使用 performBlock 创建一个新的 NSManagedObject，然后保存该背景上下文，切换到父上下文（使用 performblock），使用 existingObjectWithId: 在该上下文中获取新创建的对象。然后，我创建了一个 NSOperation 子类，将 NSManagedObject（来自父上下文）绑定到该 NSOperation 子类（它是子类的一个属性），并将该操作放在 NSOperationQueue 中。在该 NSOperation 中，NSManagedObject 被更改。它似乎工作正常，看起来还可以吗？– 用户 1013725

嗯……也许？？？我没有遵循。你能发布代码吗？那会更精确，更容易理解。

> @JodyHagins所以我没有使用performBlock，但也许没关系，因为managedObjectContext是主要上下文？– 用户 1013725

不。

如果主上下文是使用`alloc] init]`or创建的，`alloc] initWithConcurrencyType:NSConfinementConcurrencyType`则只有在知道自己在主线程上运行时才必须使用它。

如果它是用`alloc] initWithConcurrencyType:NSMainThreadConcurrencyType`然后创建的，那么只有当您知道您在主线程上**或**在其中一种`performBlock`方法中运行时，您才必须使用它。

# mysql - 我想知道当我们不知道我们正在输入的字段时如何在表中插入值

> ID：12381820
> 
> 赞同：0
> 
> 时间：2012-09-12T05:40:15.150
> 
> 标签：mysql, for-loop

我有一个文本字段

```
<form method="post">
<input type="text" name="number">
<input type="submit" value="submit" name="ok">
</form> 
```

我想在此文本字段中输入一个整数，并希望打开其他文本字段等于在该文本字段中输入的数字。

例如。我在 $number 中输入 4 个数字，然后将打开 4 个文本字段。

我用于此的代码。

```
<?php
if(isset($_POST['ok']))
{
  extract($_POST);
  for($i=1;$i<=$number;i++)
  {
     <input type="text" name="">
     //insert mysql query to insert into table
  }
}
?> 
```

但我不知道如何在表中插入这些值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:47:20.700

像这样试试

```
<?php
if(isset($_POST['ok']))
{
   extract($_POST);
   for($i=1;$i<=$number;i++)
   {
      <input type="text" name="text[]">
     //insert mysql query to insert into table
   }
   //Here you insert the text field values with name "text" which is an array.You can implode them with ',' and insert into your database
 }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T05:50:28.873

```
try with this code
//HTML CODE 
<input type="text" name="range" id="range" />
<input type="button" onclick="insertInputBox()" value="Insert TextBox" />
<div id="inputHolder">
</div> 

//JAVASCRIPT
function insertInputBox()
{
    var rangeLimit=document.getElementById('range').value;
    var i=1;
    for(i=1;i<=rangeLimit;i++)
    {
       document.getElementById('inputHolder').innerHTML+='<input type="text" name=i+"range" id=i+"range" /><br />';
    }
} 
```

# iphone - 在 MKMapView 上显示自定义注释视图

> ID：12381824
> 
> 赞同：0
> 
> 时间：2012-09-12T05:40:30.183
> 
> 标签：iphone, mkmapview, mkannotationview

我正在开发地图应用程序。我已完成在特定条件下获取位置、在地图视图上显示注释并显示我的自定义标注气泡。

我的要求是显示注释引脚如下：

*   带有圆角的图像以显示注释
*   在注释的右上角会有一个红色徽章类型的视图。
*   需要访问该红色徽章视图并以某些方法设置文本。

现在我知道我可以将 Image 设置为注释视图并使其圆角如下：

```
pinView.image = [UIImage imageNamed:@"annotationImage"];
[pinView.layer setCornerRadius:8.0];
[pinView setClipsToBounds:YES]; 
```

这`pinView`是一个注释视图。

请让我知道我是否可以创建自定义视图并将其分配给固定视图，以便我可以获得红色徽章并设置图像。

**更新**

我尝试了更多的东西并成功放置了视图。但问题是，如果我`MKAnnotationView`在地图上使用一个对象，我将无法点击它或在其上调用手势识别器。如果我使用`MKPinAnnotationView`，我可以调用 didSelected 方法或添加手势识别器，但我无法在其上设置图像，因为它是 Pin Annotation。请让我知道这是否可能。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T05:43:27.623

您需要将您的 Class 设置为`MKMapViewDelegate`并填写此方法：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {
 CustomMapAnnotationView *annotationView = nil;

 pinView.image = [UIImage imageNamed:@"annotationImage"];
 [pinView.layer setCornerRadius:8.0];
 [pinView setClipsToBounds:YES];

 NSString* identifier = @"CustomMapAnnotation";
 CustomMapAnnotationView *newAnnotationView = (CustomMapAnnotationView *)[self.mapView dequeueReusableAnnotationViewWithIdentifier:identifier];

 if(nil == newAnnotationView) {
    newAnnotationView = [[[CustomMapAnnotationView alloc] initWithAnnotation: pinView reuseIdentifier:identifier] autorelease];
 }

 annotationView = newAnnotationView;
 [annotationView setEnabled:YES];
 [annotationView setCanShowCallout:YES];

 return annotationView;
} 
```

因此，您可以返回一个自定义类、 的子类`MKAnnotationView`，并且您现在可以将徽章添加到您的自定义视图中。

# javascript - 最新产品上的 opencart jcarousel

> ID：12381826
> 
> 赞同：0
> 
> 时间：2012-09-12T05:40:35.427
> 
> 标签：javascript, jquery, css, jcarousel, opencart

现在我正在学习 Opencart，我正在尝试使用 jCarousel 制作我的最新产品展示。我正在使用 Opencart 1.5.4。

这是我已经尝试过的，但仍然失败： http: [//www.packtpub.com/article/opencart-themes-using-jCarousel-plugin](http://www.packtpub.com/article/opencart-themes-using-jCarousel-plugin)

我正在按照教程中的步骤逐步编辑 latest.tpl 文件，但我被困在了第八步。

当我打开 Firefox 并点击刷新时，没有任何反应，没有错误或消息。这是我的 latest.tpl 文件：

```
<script type="text/javascript" src="catalog/view/javascript/jquery/jCarousel/js/jquery.jcarousel.min.js"></script>

<link rel="stylesheet" type="text/css" href="catalog/view/javascript/jquery/jCarousel/skins/tango/skin.css" />

<script type="text/javascript">
jQuery(document).ready(function() {
   jQuery('#latestcarousel').jcarouseljcarousel();
});

</script>

<div class="box">
  <div class="box-heading"><?php echo $heading_title; ?></div>
  <div class="box-content">
    <div id="latestcarousel" class="box-product">
      <?php foreach ($products as $product) { ?>
      <div class="jCarousel-skin-tango">
        <?php if ($product['thumb']) { ?>
        <div class="image"><a href="<?php echo $product['href']; ?>"><img src="<?php echo $product['thumb']; ?>" alt="<?php echo $product['name']; ?>" /></a></div>
        <?php } ?>
        <div class="name"><a href="<?php echo $product['href']; ?>"><?php echo $product['name']; ?></a></div>
        <?php if ($product['price']) { ?>
        <div class="price">
          <?php if (!$product['special']) { ?>
          <?php echo $product['price']; ?>
          <?php } else { ?>
          <span class="price-old"><?php echo $product['price']; ?></span> <span class="price-new"><?php echo $product['special']; ?></span>
          <?php } ?>
        </div>
        <?php } ?>
        <?php if ($product['rating']) { ?>
        <div class="rating"><img src="catalog/view/theme/default/image/stars-<?php echo $product['rating']; ?>.png" alt="<?php echo $product['reviews']; ?>" /></div>
        <?php } ?>
        <div class="cart"><input type="button" value="<?php echo $button_cart; ?>" onclick="addToCart('<?php echo $product['product_id']; ?>');" class="button" /></div>
      </div>
      <?php } ?>  
    </div>
  </div>
</div> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:34:29.887

这就是我对 latest.tpl 文件所做的事情。现在可以了。

```
<link rel="stylesheet" type="text/css" href="catalog/view/javascript/jquery/jCarousel/skins/tango/skin.css" />

<script type="text/javascript">
jQuery(document).ready(function() {
jQuery('#latestcarousel').jcarousel({
scroll: 1,
visible: 3,
auto: 3,
rtl: true,
wrap: 'circular'
});
});

</script>

<div class="box">
  <div class="box-heading"><?php echo $heading_title; ?></div>
  <div class="box-content">
    <div class="box-product">
        <ul id="latestcarousel" class="jcarousel-skin-tango">
        <?php foreach ($products as $product) { ?>
        <li class="carousel-latest">
            <div class="image"><a href="<?php echo $product['href']; ?>"><img src="<?php echo $product['thumb']; ?>" alt="<?php echo $product['name']; ?>" /></a></div>
            <div class="name"><a href="<?php echo $product['href']; ?>"><?php echo $product['name']; ?></a></div>
            <?php if ($product['price']) { ?>
            <div class="price">
                <?php if (!$product['special']) { ?>
            <?php echo $product['price']; ?>
            <?php } else { ?>
            <span class="price-old"><?php echo $product['price']; ?></span> <span class="price-new"><?php echo $product['special']; ?></span>
            <?php } ?>
         </div>
         <?php } ?>
        </li>
        <?php } ?>
        </ul>
    </div>
  </div>
</div> 
```

感谢一切。

# sprite - 如何将指南针生成的精灵用于生成的内容？

> ID：12381827
> 
> 赞同：0
> 
> 时间：2012-09-12T05:40:42.123
> 
> 标签：sprite, compass-sass

是否可以使用指南针生成的精灵来替换下面的图标路径？

`a:before { content: url(/pathto/icon.png); }`

虽然我可以弄清楚如何在其中获取精灵路径，但我不知道是否有可能获得精灵显示的正确位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T07:20:32.467

不要将精灵图加载为“内容”。将内容设置为“”，将精灵加载为背景，并像使用任何其他文本/图像替换精灵一样控制它。

```
a:before {
  @include <map>-sprite(<icon>);
  @include sprite-dimensions(<map>, <icon>);
  content: " ";
} 
```

在哪里`<map>`和`<icon>`由您的特定精灵图和图标名称替换。

# python - 给定字符串中的一组字母，如何在python中获取字符串中剩余的字母

> ID：12381836
> 
> 赞同：1
> 
> 时间：2012-09-12T05:41:25.680
> 
> 标签：python

我有一个像'LETTER'这样的字符串，现在我有另一个字符串“LTR”，当字符串与前一个字符串检查时，剩余的字母是“ETE”我如何从python的主字符串中提取它。字母的顺序无关紧要，我们应该得到剩余的字母

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T07:13:31.373

热门问题:-) 我认为这是一个非常易读的问题：

```
s=list("LETTER")                                  
p=list("LTR")                                         
while p: s.remove(p.pop()) 
```

现在

```
print("".join(s)) 
```

打印“ETE”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T05:56:41.517

`ndiff()`从[`difflib`](http://docs.python.org/library/difflib.html#difflib.ndiff)图书馆使用：

```
>>> from difflib import *
>>> list(ndiff("LETTER","LTR"))
['  L', '- E', '  T', '- T', '- E', '  R']

#so filter out letters which doesn't have '-'

>>> ''.join(x.strip('-').strip() for x in filter(lambda x:'-' in x,ndiff("LETTER","LTR")))
'ETE'

>>> ''.join(x.strip('-').strip() for x in filter(lambda x:'-' in x,ndiff("stack","tc")))
'sak' 
```

您可以使用`Counter()`, 以防字母顺序无关紧要：

```
>>> from collections import Counter
>>> str1="LETTER"
>>> str2="LTR"
>>> c=Counter(str1)-Counter(str2)
>>> c
Counter({'E': 2, 'T': 1})
>>> ''.join(x*c[x] for x in c)
'EET 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T05:49:16.413

这是一个相当简单易读的解决方案，可以正确保留输入字符串的顺序和重复项：

```
def omit(s, discard):
    discard = list(discard)
    for c in s:
        if c not in discard:
            yield c
        else:
            discard.remove(c)

>>> ''.join(omit('LETTER', 'LTR'))
'ETE' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T06:06:13.147

```
>>> x = "LETTER"
>>> r = "LTR"
>>> y = x
>>> for c in r:
...     y = y.replace(c, '', 1)
... 
>>> y
'ETE' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-12T05:44:34.680

```
>>> x = "LETTER"
>>> for c in "LTR":
...     if c in x:
...        p = x.find(c)
...        if p < len(x)-1:
...           x = x[:p]+x[p+1:]
...        else:
...           x = x[:p]
...
>>> x
'ETE' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-12T05:58:21.707

```
#!/bin/env python

def str_diff(s, rem):
    for x in rem:
        pos = s.find(x)
        if pos >= 0: s = s[:pos] + s[pos+1:]

    return s

print str_diff("LETTER", "LTR")    # ETE
print str_diff("LETTER", "LTTR")   # EE
print str_diff("LETTER", "LTRxyz") # ETE 
```

这似乎做了你想做的事。它保留原始顺序，适用于“删除集”中相同字母的倍数，并且如果“删除集”包含不在原始字符串中的字符，则不会出错。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-12T05:51:33.497

```
def remaining(my_string, my_string_2):
    output = ""

    i = 0
    j = 0
    while i < len(my_string) and j < len(my_string_2):
        if my_string[i] != my_string_2[j]:
            output += my_string[i]
        else:    
            j += 1
        i+=1
    if i < len(my_string):
        output+=my_string[i:len(my_string)]

    return output

result = remaining("LETTER", "LTR")

print result 
```

返回“ETE”

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-12T05:59:56.600

```
l1='LETTER'
l2='LTR'
occur=[]
for i in range(0,len(l1)):
    if l1[i] in occur:
        print l1[i]

    if l1[i] in l2:
        occur.append(l1[i])
    else:
        print l1[i] 
```

# java - 仅从字符串中删除空格

> ID：12381840
> 
> 赞同：3
> 
> 时间：2012-09-12T05:41:56.843
> 
> 标签：java, string

我有一个字符串，它是 XML 数据。删除一些节点并添加一些节点后。xml 数据中有很多空格（在节点删除期间创建。）

```
<A>
<B>
</B>

<!-- some node i deleted and lot of white spaces -->

<c>
</c>

<!-- some more node i deleted and lot of white spaces -->

<E>
</E> 
```

字符串操作后所需的输出

```
<A>
<B>
</B>
<c>
</c>
<E>
</E>
</A> 
```

我可以使用 replaceAll("\s","") 但这甚至会删除换行符并使 xml 脱离结构以在 UI 中显示它。

有没有办法在不修剪换行符的情况下修剪它？

编辑：此 XML 数据是 OMElement 的一部分

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T05:46:22.727

你能澄清你的意思吗？如果您指的是换行符以外的空格*，*请尝试以下操作。

```
str = str.replaceAll("[ \t\x0B\f\r]", ""); 
```

...或者，您的意思是要删除无关的新行？

```
str = str.replaceAll("\n{2,}", "\n"); 
```

...或者您只想删除文字`' '`空格？

```
str = str.replace(" ", ""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T05:46:27.313

尝试使用`someString.replaceAll("\\u0020","")` 这个字符串是空格的结束，应该做这个工作

编辑：如果你需要其他看看[这个问题](https://stackoverflow.com/questions/4731055/whitespace-matching-regex-java)。您会在 tchrist 的回答中找到其他人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T05:47:14.500

我建议使用正则表达式`str.replaceAll("(</[^>]+>)\\s+(<[^>]+>)","$1\n$2")`来检测标签之间的空格并删除它们。它只留下一个行尾

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T06:25:06.320

如果您使用[DocumentBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/parsers/DocumentBuilder.html)来修改 XML，那么您也可以使用下面的方法。

[DocumentBuilderFactory.setIgnoringElementContentWhitespace](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/parsers/DocumentBuilderFactory.html#setIgnoringElementContentWhitespace%28boolean%29)

> 指定此工厂创建的解析器必须消除元素内容中的空格（有时松散地称为“可忽略的空格”）

```
factory.setValidating(true);
factory.setIgnoringElementContentWhitespace(true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T11:21:13.187

这样做的成本很高。

```
Scanner scanner = new Scanner(str);
StringBuffer strBuff = new StringBuffer();
while(scanner.hasNextLine()){
       String line = scanner.nextLine();
           if(line.length() > 0 && !line.trim().equals("")){
                 strBuff.append("\n");
         strBuff.append(line);
       }
} 
```

最终，当循环结束时，我们可以从 xml 中删除空行，并且 xml 将形成良好的格式。如您所见，这对于大型 xml 并不理想，因为许多 xml 字符串对象是在内部创建的。

问候
Dheeraj Joshi

# sql-server - 在最小值和最大值之间搜索

> ID：12381847
> 
> 赞同：0
> 
> 时间：2012-09-12T05:42:32.200
> 
> 标签：sql-server

假设我有以下数据库表

```
id     min     max
1        0       0
2        1      90
3       91     180
4      181     365
5      366       0 
```

所以，我需要它发生的是这个；

如果我搜索`0`，我应该得到`id=1 (min=0, max=0);`如果我搜索`95`，我应该得到`id=3 (min=91, max=180);`并且对于任何东西`>=366`，我应该得到`id=5;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:49:33.797

```
SELECT  [Id]
FROM    @Table 
WHERE   (@Value BETWEEN [min] AND [max])
OR      (@Value >= [min] AND [max] = -1) 
```

是否可以将无限数的最大值（ID 5 的最大值）设为-1？

如果是这样，上面的代码会很好用。

您需要一种独特的方式来说明必须包含任何高于 min 的数字，并且在 id 1 和 5 上使用 0 不是唯一的。

编辑->如果您不能更改为-1，这应该可以工作

```
SELECT TOP 1 [Id]
FROM    @Table 
WHERE   (@Value BETWEEN [min] AND [max])
OR      (@Value >= [min] AND [max] = 0)
ORDER BY [MIN] DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T05:49:54.987

你可以试试这个

```
DECLARE @Value INT = 400

SELECT * FROM TABLE 
WHERE (@Value >= 366 AND Min = 366 ) 
OR @Value BETWEEN Min AND MAX 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T05:43:54.873

怎么样

```
SELECT  *
FROM    @Table 
WHERE   (@Value BETWEEN [MIN] AND [MAX])
OR      (@Value >= [MIN] AND [MAX] = 0) 
```

@Value 是您要查找的值。

但是请注意，如果您的 [MIN],[MAX] 范围不是唯一的，则可能会返回超过 1 行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T05:44:15.337

尝试这个：

```
declare @Search_val int=95;

SELECT  Id
FROM   your_table
WHERE   @Search_val between [min]     and [max]
OR      (@Search_val>min and [max]=0 and [min]!=0) 
```

# maven - 我可以摆脱 遗产 在 pom.xml 中依赖？

> ID：12381851
> 
> 赞同：0
> 
> 时间：2012-09-12T05:42:49.757
> 
> 标签：maven

问题如下。

```
No connector available to access repository maven-repository.java.net (
http://download.java.net/maven/1) of type legacy using the available factories 
WagonRepositoryConnectorFactory -> [Help 1] 
```

正如互联网上很多人所说，我删除了 m2 存储库中的文件夹。但它没有用，我花了很多时间解决这个问题。最后在pom.xml中找到了“legacy”部分，在maven3中无法应用。所以我摆脱了它。所以它确实奏效了。

但我想知道它是否可以。请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T06:11:20.587

maven3 不再支持 maven1 存储库。

如果您想使用 maven1 存储库和 maven3，您最好使用诸如 nexus 或 artifactory 之类的存储库管理器。

另请参阅： [https ://cwiki.apache.org/MAVEN/maven-3x-compatibility-notes.html#Maven3.xCompatibilityNotes-LegacystyleRepositories](https://cwiki.apache.org/MAVEN/maven-3x-compatibility-notes.html#Maven3.xCompatibilityNotes-LegacystyleRepositories)

# google-app-engine - 有谷歌应用引擎api吗？

> ID：12381854
> 
> 赞同：1
> 
> 时间：2012-09-12T05:42:59.097
> 
> 标签：google-app-engine

我想为在 App 引擎中实现的 REST API 实现某种形式的访问控制。是否可以获得用户有权在应用引擎控制台中管理或查看的 GAE 应用程序列表。或者用户是否有权管理/查看当前应用程序。

注意：用户 API 对我不起作用，因为这是另一个谷歌应用程序调用的休息服务器，而不是用户从浏览器调用的网络服务。OAuth API 似乎很有希望，但我无法找到用于获取 GAE 相关信息的 OAuth 范围或休息端点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T07:18:45.137

没有 API 可以提供“用户有权管理的 GAE 应用程序列表”。App Engine 上的 Google Cloud Endpoints（Trusted Tester 程序）对于托管具有用户授权的自定义 RESTful API 可能很有用，请在此处阅读更多信息：http: [//endpoints-trusted-tester.appspot.com/](http://endpoints-trusted-tester.appspot.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T13:32:15.340

必须有一个 API，因为 Google Eclipse 插件正在使用它。

[https://developers.google.com/eclipse/docs/signin?hl=de](https://developers.google.com/eclipse/docs/signin?hl=de)

但它没有记录。

# c++ - int8_t* 和 char*

> ID：12381855
> 
> 赞同：3
> 
> 时间：2012-09-12T05:43:04.143
> 
> 标签：c++, char-pointer

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T05:47:20.903

`const signed char*` is not the same as `const char*`. Check your compilation settings, because that would explain it. `int8_t` is always (never say never =) at least everywhere i've seen) defined as `signed char`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T05:48:50.957

According to [18.4 Integer types]:

```
typedef signed integer type int8_t; // optional 
```

And [3.9.1 Fundamental types]:

> Plain char, signed char, and unsigned char are three distinct types

`int8_t` is a signed integer type (on my system defined as `signed char`) and `char` and `signed char` are distinct types, so they are different.

# gmaps4rails - 使用 openlayers 提供程序控制 gmaps4rails 的缩放

> ID：12381860
> 
> 赞同：1
> 
> 时间：2012-09-12T05:44:00.030
> 
> 标签：gmaps4rails

我正在尝试控制使用 openlayers 作为地图提供者的地图的缩放级别。

```
gmaps({
    "map_options" => { "provider" => "openlayers",
                       "auto_zoom" => false, "zoom" => 12 },
    "markers"     => { "data" => @json }
}) 
```

地图（来自 OpenStreetMap）被显示，但无论我为该`zoom`选项使用什么值，缩放级别都保持不变。上面没有该`"provider" => "openlayers"`选项的相同代码对谷歌地图按预期工作。

gmaps4rails 的 wiki 有一个指向电子表格的链接，其中指出 OpenLayers API 支持“缩放”（但不支持“自动缩放”）。

那么，是否支持缩放控制？还是我做错了什么？

# git - 我可以在没有 github 的情况下使用 git 版本控制应用程序吗？

> ID：12381864
> 
> 赞同：14
> 
> 时间：2012-09-12T05:44:27.113
> 
> 标签：git, version-control, open-source, github

> **可能重复：**
> [是否有商业级 Git 服务器产品](https://stackoverflow.com/questions/3299222/is-there-a-commercial-grade-git-server-product)
> [是否有可以在我自己的服务器上运行的 Github 克隆？](https://stackoverflow.com/questions/4988238/is-there-a-github-clone-that-i-can-run-on-my-own-server)

我可以在没有 GitHub 服务的情况下使用 Git 吗？我的意思是，我只是从事该项目的人，不想将项目推入 Git 空间。你怎么看？这会是一个正确的决定吗？或者是否有任何 lite github 之类的服务器应用程序可供内部使用？请分享你的想法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-12T05:47:40.770

是的，git 是独立于 GitHub 的。如果您使用免费帐户将源代码推送到 GitHub，您的项目将需要是“公开的”，这意味着任何人都可以阅读它。其他公司提供免费的私有 git 存储库（我使用`Assembla`）。但是您实际上也可以在没有任何服务器的情况下使用 git 来维护本地版本控制。无论如何，这绝对是一个好习惯。服务器将为您提供异地备份的额外优势。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T06:35:26.513

您可以通过[http://githowto.com/](http://githowto.com/)获得基本的 GIT 技能

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T05:48:32.907

无论我是否与 GitHub 之类的网站共享，我都会使用版本控制。

对我来说，版本控制不仅仅意味着异地备份。

这意味着我能够试验我的任何和所有想法（以及后续代码），而不必担心丢失任何东西（至少在这种情况下我的机器上的东西）并且总是可以根据什么进行分支或回滚需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T06:19:59.617

一般来说，如果你在团队中工作，拥有类似 github 的功能真的很好（但不是绝对必要的）

[gitorious](http://gitorious.org)是一个开源的类似 github（但功能会少很多）的服务器应用程序，您可以在内部安装它。github也有这个选项，但是成本很高。

# jsp - #{param.foo} 在包含的 JSF 页面中不可用

> ID：12381870
> 
> 赞同：2
> 
> 时间：2012-09-12T05:44:54.137
> 
> 标签：jsp, jsf, parameters, el, jsf-1.2

在我的应用程序中，我使用的是 JSF 1.2。我不想使用 facelets taglib，所以我包含了一个使用 jsp:include 属性的 JSP。我想将一个变量传递给子页面，它将决定样式类的值。下面是 parent.jsp 的代码

```
<f:view>
...
    <f:subview id="navigation">
        <jsp:include page="/subpage/child.jsp">
            <jsp:param value="page9" name="pageName"/>
        </jsp:include>
    </f:subview> 
...
</f:view> 
```

子jsp是

```
 <f:subview id="navigation">
    ...
                <t:commandLink id="page9" value="mylink" action="#{manageBean.someAction}" 
                  styleClass="#{param.pageName == 'page9'?'stepLinkActive':'stepLink'}" />
    ...
            </f:subview> 
```

在上面的代码 stepActiveLink 类没有被应用到 myLink。事实上 #{param.pageName} 值是空白的。

我在 SO 上找到了这个[链接](https://stackoverflow.com/questions/9665520/how-to-pass-a-parameter-to-an-included-page-with-jsf-1-2)，如果我使用下面的命令链接，它就可以工作

```
 <c:if test='${param.pagename eq "page9"}'>      
            <t:commandLink id="page9"
                value="#{msgs['DICT.ISSUE_CONTROL.SPECIAL_INFO']} "
                action="#{bondIssueBean.gotoModifyPage9}" styleClass="stepLinkActive" />
        </c:if>
        <c:if test='${param.pagename ne "page9"}'>      
            <t:commandLink id="page9"
                value="#{msgs['DICT.ISSUE_CONTROL.SPECIAL_INFO']} "
                action="#{bondIssueBean.gotoModifyPage9}" styleClass="stepLink" />
        </c:if> 
```

我有很多 commandLinks 需要复制 commandlink 定义来改变样式类。我想知道，如果任何其他参数被传递，那么它可能会增加重复代码。我的问题是

1.  为什么 JSF EL 无法识别参数值 - ${param.paramName}？我也尝试使用 #{param['pageName']} 访问参数变量，但没有运气。
2.  我如何替换上面的 if..else 以便我可以有单个命令链接定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:01:26.963

它“按设计”失败了。有关技术背景故事，另请参阅[JSF issue 629](http://java.net/jira/browse/JAVASERVERFACES-629)，总结如下：

> 在对这个问题进行了一些讨论之后，我们将把这个问题标记为 WONTFIX，原因如下：
> 
> *   主要是，如果不是因为修复的副作用使 RI 在旧版本的 Tomcat 中工作，这在 1.1 中是行不通的。删除该修复程序后， jsp:param 将不再起作用。
> *   1.2 的修复非常危险，添加它可能会产生意想不到的副作用。

然而，有一种可能的解决方法，可以将`<c:set>`它复制到请求范围中，以便它在 JSF EL`#{}`中也可用。

```
<c:set var="param_pageName" value="${param.pageName}" scope="request" />
<t:commandLink id="page9" value="mylink" action="#{manageBean.someAction}" 
    styleClass="#{param_pageName == 'page9' ? 'stepLinkActive' : 'stepLink'}" /> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-12T06:14:52.097

您可以使用**#{request.pageName}** EL 表达式访问传递的参数。这是区分大小写的，传递的参数存储在**请求**对象中。

# ios - 过滤带有部分的 TableView

> ID：12381872
> 
> 赞同：0
> 
> 时间：2012-09-12T05:45:32.433
> 
> 标签：ios, cocoa-touch, uitableview, uikit

我尝试制作一个小程序来了解有关搜索关于搜索栏的 tableview 的更多信息。与此同时，我正在第三周尝试这样做。我在互联网上以不同的方式找到了许多示例。最多使用搜索显示控制器，但这种方式仅适用于视图控制器。我更喜欢一种也适用于 uiview 的方式，因此我使用搜索栏委托方法来过滤我的数据字典。通常我会尝试自己处理这些事情。但这是我的克星。我真的找不到解决这个问题的方法。任何人都可以帮我处理我的代码吗？这里是。

```
#import "FilterDemoTableViewController.h"

@implementation FilterDemoTableViewController

@synthesize filteredTableData;
@synthesize searchBar;
@synthesize isFiltered;

@synthesize tableContents;
@synthesize Keys;

- (void)viewDidLoad
{
    [super viewDidLoad];

    searchBar.delegate = (id)self;

    //-----------------------My TableView Data ------------------------------

    NSArray *array1 = [[NSArray alloc]initWithObjects:@"Berlin",@"München",@"Stuttgart",nil];
    NSArray *array2 = [[NSArray alloc]initWithObjects:@"Paris",@"Bordeaux",@"Marseille",@"Toulouse",nil];
    NSArray *array3 = [[NSArray alloc]initWithObjects:@"London",@"Portsmouth",@"Oxford",@"York",@"Dover",nil];
    NSArray *array4 = [[NSArray alloc]initWithObjects:@"Rom" ,@"Genua",@"Mailand",@"Florenz",nil];
    NSArray *array5 = [[NSArray alloc]initWithObjects:@"Madrid",@"Barcelona",@"Toledo",@"Saragossa",@"Pamplona",nil];
    NSDictionary *dictionary =[[NSDictionary alloc]initWithObjectsAndKeys:array1,@"Deutschland",array2,@"Frankreich",array3,@"Großbritannien",array4,@"Italien",array5,@"Spanien",nil];

    self.tableContents = dictionary;
    self.Keys = [self.tableContents allKeys];

    //--------------------------------------------------------------------------    
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    if (self.isFiltered) {
        return [filteredTableData count];
    } else {
        return [Keys count];}
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{   

    NSArray *listData =[self.tableContents objectForKey:[self.Keys objectAtIndex:section]];

    int rowCount;
    if(self.isFiltered)
        rowCount = filteredTableData.count;
    else
        rowCount = [listData count];

    return rowCount;

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    NSDictionary* sectionDictionary;

    if (isFiltered) {
        sectionDictionary = [filteredTableData objectAtIndex:indexPath.section];
    } else {
        sectionDictionary = [self.tableContents objectForKey:[self.Keys objectAtIndex:indexPath.section]];
    }

    NSArray* sectionEntries = [self.tableContents objectForKey:[self.Keys objectAtIndex:indexPath.section]];

    cell.textLabel.text = [sectionEntries objectAtIndex:indexPath.row]; 
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    return cell;
}

-(void)searchBar:(UISearchBar*)searchBar textDidChange:(NSString*)text
{
    if(text.length == 0)
    {
        isFiltered = FALSE;
    }
    else
    {
     //I think here is something wrong but i don't know what

        isFiltered = true;

        filteredTableData = [[NSMutableArray alloc] init];

        NSMutableArray *searchArray = [[NSMutableArray alloc] init];

        for (NSDictionary *dictionary in tableContents)    //dictionary read
        {
            NSArray *array = [dictionary objectForKey:Keys];  //section of dictionary read
            [searchArray addObjectsFromArray:array];         
        }

        for (NSString *sTemp in searchArray)    
        {
            NSRange titleResultsRange = [sTemp rangeOfString:text options:NSCaseInsensitiveSearch];

            if (titleResultsRange.length != 0)         
                [filteredTableData addObject:sTemp];
        }
    }
    [self.tableView reloadData];
}

- (void)viewDidUnload{
    [self setSearchBar:nil];
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:45:39.443

现在我发布一个完整的刷新代码。我逐步测试了代码的每个组件。它可以工作并且搜索也很好（在 UITableViewController 中）。但在本例中，漏洞代码位于 UIView 中。原因是，通过这种方式可以创建非全尺寸的表格视图和表格视图的实例。对于清晰的 Viewcontroller 来说要好得多。我知道 UIView 没有类似**reloadData**的方法，但这是必要的。在代码末尾附近，您可以看到问题行。对于这最后一步，我不知道如何解决这个问题。**[self.tableView reloadData];**

```
#import "TableView.h"
#import <QuartzCore/QuartzCore.h>

@interface TableView ()

@end

@implementation TableView
@synthesize delegate;
@synthesize dropDownHeight;
@synthesize labelText;
@synthesize enabled;

@synthesize tableContents;
@synthesize Keys;

@synthesize searchBar;
@synthesize isFiltered;
@synthesize filteredTableData;

- (void)__show {
   viewControl.alpha = 0.0f;
   UIWindow *mainWindow = [[UIApplication sharedApplication] keyWindow];
   [mainWindow addSubview:viewControl];
   [UIView animateWithDuration:0.3f
                 animations:^{
                     viewControl.alpha = 1.0f;
                 }
                 completion:^(BOOL finished) {}];
}
- (void)__hide {
   [UIView animateWithDuration:0.2f
                 animations:^{
                     viewControl.alpha = 0.0f;
                 }
                 completion:^(BOOL finished) {
                     [viewControl removeFromSuperview];
                 }];
}
- (void) setLabelText:(NSString *)_labelText{
   [button setTitle:labelText forState:UIControlStateNormal];
}
- (void) setEnable:(BOOL)_enabled{
   enabled = _enabled;
   [button setEnabled:_enabled];
}
- (void) setArrayData:(NSArray *)_arrayData{
   [table reloadData];
}
- (void) buttonPressed{
   [self __show];
}
- (void) controlPressed{
 //[viewControl removeFromSuperview];
   [self __hide];
}

- (id) initWithFrame:(CGRect)frame
{

self = [super initWithFrame:frame];
if (self) {
    // Initialization code
    button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setFrame:CGRectMake(10, 0, 280, 30)];
    [button setTitle:@"--Auswahl--" forState:UIControlStateNormal];
    [button setBackgroundImage:[UIImage imageNamed:@"combo_bg.png"] forState:UIControlStateNormal];
    [button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    [button addTarget:self action:@selector(buttonPressed) forControlEvents:UIControlEventTouchUpInside];
    [button.titleLabel setFont:[UIFont fontWithName:@"Helvetica" size:14]];
    [self addSubview:button];
    dropDownHeight = 706;

    viewControl = [[UIControl alloc] initWithFrame:CGRectMake(0, 0, [UIScreen mainScreen].bounds.size.width, [UIScreen mainScreen].bounds.size.height)];
    [viewControl addTarget:self action:@selector(controlPressed) forControlEvents:UIControlEventTouchUpInside];

    CGFloat x = self.frame.origin.x;
    CGFloat y = (viewControl.frame.size.height - dropDownHeight)/2;

    table = [[UITableView alloc] initWithFrame:CGRectMake(x, y, frame.size.width, dropDownHeight) style:UITableViewStyleGrouped];
    table.dataSource = self;
    table.delegate = self;

    searchBar = [[UISearchBar alloc] init];
    [searchBar sizeToFit];
    searchBar.delegate = (id)self;
    table.tableHeaderView = searchBar;

    CALayer *layer = table.layer;
    layer.masksToBounds = YES;
    layer.cornerRadius = 2.0f;
    layer.borderWidth = 1.0f;
    [layer setBorderColor:[UIColor darkGrayColor].CGColor];
    [viewControl addSubview:table];

    CGAffineTransform rotateTable = CGAffineTransformMakeRotation(M_PI_2);
    table.transform = rotateTable;
    table.frame = CGRectMake(-2, -1, table.frame.size.width, table.frame.size.height);

    UIImageView *tempImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"gradientBackground.png"]];
    [tempImageView setFrame:self->table.frame]; 
    table.backgroundView = tempImageView;

    //----------------------- TableView Daten ------------------------------

    NSArray *array1 = [[NSArray alloc]initWithObjects:@"Berlin",@"München",@"Stuttgart",@"Hamburg",nil];
    NSArray *array2 = [[NSArray alloc]initWithObjects:@"Paris",@"Bordeaux",@"Marseille",@"Toulouse",nil];
    NSArray *array3 = [[NSArray alloc]initWithObjects:@"London",@"Portsmouth",@"Oxford",@"York",@"Dover",nil];
    NSArray *array4 = [[NSArray alloc]initWithObjects:@"Rom" ,@"Genua",@"Mailand",@"Florenz",nil];
    NSArray *array5 = [[NSArray alloc]initWithObjects:@"Madrid",@"Barcelona",@"Toledo",@"Saragossa",@"Pamplona",nil];
    NSDictionary *dictionary =[[NSDictionary alloc]initWithObjectsAndKeys:array1,@"Deutschland",array2,@"Frankreich",array3,@"Großbritannien",array4,@"Italien",array5,@"Spanien",nil];

    self.tableContents = dictionary;
    self.Keys = [self.tableContents allKeys];

    // ---------------------------------------------------------------------
  }
return self;
}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
if ([self tableView:tableView titleForHeaderInSection:section] != nil) {
    return 40;
}
else {
    return 0;
}
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section      {
NSString *sectionTitle = [self tableView:tableView titleForHeaderInSection:section];
if (sectionTitle == nil) {
    return nil;
}

// Create label with section title
UILabel *label = [[UILabel alloc] init];
label.frame = CGRectMake(20, 6, 300, 30);
label.backgroundColor = [UIColor clearColor];
label.textColor = [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:1.0];
label.shadowColor = [UIColor grayColor];
label.shadowOffset = CGSizeMake(0.0, 1.0);
label.font = [UIFont boldSystemFontOfSize:16];
label.text = sectionTitle;

// Create header view and add label as a subview
UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 40)];
[view addSubview:label];

return view;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath    *)indexPath {
return 60.0;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection: (NSInteger)section {

return [self.Keys objectAtIndex:section];

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
if (self.isFiltered)
{
    return 1;
} else {
    return [Keys count];}
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{   
int rowCount;
if(self.isFiltered)
{
    rowCount = [filteredTableData count];
}
else
{
    NSArray *listData =[self.tableContents objectForKey:[self.Keys objectAtIndex:section]];
    rowCount = [listData count];
}
return rowCount;

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *SimpleTableIdentifier = @"SimpleTableIdentifier"; 
UITableViewCell * cell = [tableView dequeueReusableCellWithIdentifier: SimpleTableIdentifier];

if(cell == nil) {

    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:SimpleTableIdentifier];
}

if (isFiltered)
{
    NSString * stadt  = [filteredTableData objectAtIndex:indexPath.row];
    cell.textLabel.text = stadt;
}
else
{
    NSDictionary* sectionDictionary;
    sectionDictionary = [self.tableContents objectForKey:[self.Keys objectAtIndex:indexPath.section]];
    NSArray* sectionEntries = [self.tableContents objectForKey:[self.Keys objectAtIndex:indexPath.section]];
    cell.textLabel.text = [sectionEntries objectAtIndex:indexPath.row];
}

cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

return cell;    
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

NSArray *listData =[self.tableContents objectForKey:[self.Keys objectAtIndex:[indexPath section]]];
NSUInteger row = [indexPath row];
NSString *rowValue = [listData objectAtIndex:row];
[tableView deselectRowAtIndexPath:indexPath animated:YES];

selectedIndex = [indexPath row];

[self __hide];
[button setTitle:[[NSString alloc] initWithFormat:rowValue] forState:UIControlStateNormal];

}

- (NSInteger) selectedIndex {

return selectedIndex;
}

-(void)searchBar:(UISearchBar*)searchBar textDidChange:(NSString*)text
{
if(text.length == 0)
{
    isFiltered = FALSE;
}
else
{
    isFiltered = true;
    [filteredTableData removeAllObjects];

    for (NSString* key in self.tableContents)
    {

        NSArray *staedte = [self.tableContents objectForKey:key];

        for (NSString *stadt in staedte)
        {

            NSRange titleResultsRange = [stadt rangeOfString:text options:NSCaseInsensitiveSearch];

            if (titleResultsRange.length != 0)
            {
                [filteredTableData addObject:stadt];
            }
        }
    }
}
[self.tableView reloadData];  //Here is the error
}

-(void)didChangeTableViewValue:(TableView *)TableView selectedIndex:(NSInteger)selectedIndex {

}

@end 
```

# google-apps-script - 自动调整电子表格列

> ID：12381875
> 
> 赞同：7
> 
> 时间：2012-09-12T05:46:05.327
> 
> 标签：google-apps-script, google-sheets

我在文档中没有看到任何让我认为这是受支持的功能的内容。我正在写几张纸，如果不突出显示所有列并使用鼠标自动调整大小，就很难从视觉上看到所有数据。我宁愿不必每次运行脚本时都这样做。

有没有办法通过应用程序脚本以编程方式执行此操作？我看到了 setColumnWidth 的选项，但是当我的文本可能因列而异时，我怎么知道设置列的宽度。

==感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-14T04:41:33.707

`autoResizeColumn(columnPosition)`

See [the API](https://developers.google.com/apps-script/reference/spreadsheet/sheet#autoResizeColumn%28Integer%29) for more details

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-05-23T23:21:14.897

现在有一个新方法叫做`autoResizeColumn(columnPosition)`

```
var s = SpreadsheetApp.getActive().getActiveSheet();
s.autoResizeColumn(6); 
```

自动调整第 6 列（又名“F”列）。

请参阅此 stackoverflow 答案 [https://stackoverflow.com/a/29930315/8458041](https://stackoverflow.com/a/29930315/8458041)

* * *

还有一种方法可以一次处理多个列：`autoResizeColumns(startColumn, numColumns)`

```
var s = SpreadsheetApp.getActive().getActiveSheet();        
s.autoResizeColumns(6, 3); 
```

自动调整 F、G 和 H 列的大小。

* * *

多行的相应自动调整大小方法是`autoResizeRows(startRow, numRows)`

```
s.autoResizeRows(6, 3); 
```

自动调整第 6、7 和 8 行的大小

没有对应的单行自动调整大小方法（[还没有？](https://developers.google.com/apps-script/reference/spreadsheet/sheet#autoresizerowsstartrow,-numrows)）；要自动调整单行大小，请将行数指定为 1

```
s.autoResizeRows(6, 1); 
```

仅自动调整第 6 行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T07:12:03.957

现在无法从 GAS 自动调整电子表格列的宽度。问题跟踪器中有一个关于它的[主题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1743)。请为此主题加注星标，以向 Google 证明很多人需要此功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-23T01:29:05.663

当尝试遍历指定数量的列并根据列中文本的宽度自动调整大小时，我发现这很有效：

```
 for (var i = 1; i < 9; i ++){ sheet.autoResizeColumn(i);} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-15T19:44:55.677

如果您禁用对范围内的单元格的换行，您可以获得所需的效果。

这是一个对我有用的片段：

```
var dataRange = sheet.getRange(1,1,data.length,headers.length);
dataRange.setValues(data);
dataRange.setWrap(false); 
```

Goolge 应用程序文档： [Range.setWrap](https://developers.google.com/apps-script/class_range#setWrap)

# c# - 如何在 C# 中从列表中连续获取元素？

> ID：12381876
> 
> 赞同：2
> 
> 时间：2012-09-12T05:46:14.300
> 
> 标签：c#

我在 C# 中有整数列表。我需要一种方法来提供`startIndex`和`step`参数并从中获取子列表。当到达结束时，交叉到列表的开始。**像圈子**

```
public List<int> GetSomeInt(List<int> mainList, int startIndex, int step )
{
  ...
} 
```

例如，列表元素是 **4, 2, 85, 6, 7, 89, 1, 0, 36, 47, 11, 75**。我给`startIndex=3`和`step=5`方法，我得到了这样的结果：

```
result1 - 6, 7, 89, 1, 0
result2 - 36, 47, 11, 75, 4
result3 - 2, 85, 6, 7, 89, 1
result4 - 0, 36, 47, 11, 75
result5 - 4, 2, 85, 6, 7
result6 - 89, 1, 0, 36, 47
........................ 
```

我如何获得如此连续的列表子元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T05:58:35.110

这里有一些代码可以完成你想要实现的目标，你不应该把这些代码交出来，它只是一个指南：

```
public List<int> GetSomeInt(List<int> mainList, int startIndex, int step )
{
    return mainList.Skip(startIndex).Take(step);
} 
```

以下是使用的功能：[Skip](http://msdn.microsoft.com/en-us/library/bb358985.aspx) [Take](http://msdn.microsoft.com/en-us/library/bb503062.aspx)

您的老师（？）可能**不会**接受这个答案，所以我建议您对自己的函数进行硬编码，该函数与`Skip`and相同`Take`。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T06:34:42.567

您可以使用`Queue`轮换*然后*通过 LINQ 获得结果`Take` ：

```
public static List<List<int>> GetSomeInt(List<int> mainList, 
                                         int startIndex, int step)
{
    var queue = new Queue<int>();
    mainList.ForEach(queue.Enqueue);

    Enumerable.Range(0, startIndex)
        .ToList()
        .ForEach(i => queue.Enqueue(queue.Dequeue()));

    var result = new List<List<int>>();

    while (true)
    {
        var list = queue.Take(step).ToList();
        list.ForEach(i => queue.Enqueue(queue.Dequeue()));

        if (result.Any(l => l.All(list.Contains)))
            break;

        result.Add(list.ToList());
    }

    return result;
} 
```

# playframework - 映射到 jpa 的 hashmap - playframework

> ID：12381877
> 
> 赞同：1
> 
> 时间：2012-09-12T05:46:16.243
> 
> 标签：playframework, playframework-1.x

这是我的桌子的样本

```
CREATE TABLE elements (
 elementname,
 displaytext
) 
```

我如何使用 jpa 并填充 hashmap 以便我可以将其传递给控制器​​查看

```
HashMap<String, String> hm = new HashMap<String, String>();

render(hm); 
```

在视图中我想遍历并根据元素名称获取显示文本

不是 100% 确定这是否是一种矫枉过正或是否存在更简单的方法。看到这篇[文章](https://stackoverflow.com/questions/7521218/how-do-i-use-jpa-to-persist-a-map-java-util-map-object-inside-an-entity-and-en)

UPDATE1：播放框架工作 1.2.4

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T06:37:47.157

我不认为你需要一个 Map ，而只是一个元素列表。如果我错了，请更清楚地解释您要达到的目标。

* * *

**第一个解决方案**

**您的型号：**

```
@Entity
public class Element extends Model {
   public String name;
   public String text;
} 
```

**在您的控制器中：**

```
public static void findElements(){
   List<Element> elements = Element.findAll();
   render(elements);
} 
```

**在您看来：**

```
<ul>
#{list items:elements, as:element}
   <li>Name: ${element.name}, Text: ${element.text}</li>
#{/list}
</ul> 
```

* * *

**第二个解决方案**

否则，如果您需要实际地图，您可以使用上面的模型并在控制器中填充地图：

```
public static void findElements(){
   List<Element> elements = Element.findAll();
   HashMap<String,String> hm= new HashMap<String,String>();
   for(Element el: elements){
      hm.put(el.name, el.text);
   }
   render(hm);
} 
```

看法：

```
<ul>
#{list items:hm.KeySet(), as:name}
   <li>Name: ${name}, Text: ${elements.get(name)}</li>
#{/list}
</ul> 
```

* * *

**第三种解决方案** 为您的地图创建一个容器：

```
@Entity
public class ElementContainer extends Model {
    @ElementCollection(fetch = FetchType.EAGER)
    @MapKeyColumn(name = "name_key", nullable = false)
    public Map<String, String> hm;
} 
```

控制器：

```
public static void findElements(){
   ElementContainer ec = ElementContainer.find().first();
   Map<String,String> hm = null;
   if(ec!=null)
      hm = ec.hm;
   render(hm);
} 
```

# c++ - 在 C++98 和 C++11 中访问枚举值

> ID：12381880
> 
> 赞同：5
> 
> 时间：2012-09-12T05:46:19.953
> 
> 标签：c++, enums, c++11, c++98

我在“Foo”类（下）中定义了一组枚举值。

```
namespace Fii
{
    class Foo 
    {
        struct Bar
        {
            enum Baz
            {
                BAZ1,
                BAZ2, 
                BAZ3
            };
        };
    };
}; 
```

我正在使用结构来缩小 Baz 枚举值的范围，并显示有一组相关值。

我的目标是将枚举类型中的值分配给变量。使用上面的类定义，可以做到这一点：

```
Fii::Foo::Bar::Baz myValue = Fii::Foo::Bar::BAZ1 (Works in both C++98 and C++11) 
```

但是，我觉得：

*   乍一看，*myValue*似乎被初始化为*Fii::Foo::Bar*但这只是因为 enum 是在父级中对相关常量进行分组的黑客（本例中为*Bar*）

为了提高准备，II 将代码重构为：

```
namespace Fii
{
    class Foo 
    {
        enum Baz
        {
            BAZ1,
            BAZ2, 
            BAZ3
        };
    };
}; 
```

使用这个新的类定义，可以做到这一点：

```
Fii::Foo::Baz myValue = Fii::Foo::Baz::BAZ1 (Works in C++11 only)
Fii::Foo::Baz myValue = Fii::Foo::BAZ1 (Should work on C++98 and C++11 - not tested) 
```

**Q1) 为什么*Fii::Foo::Bar::Baz myValue = Fii::Foo::Baz::BAZ1*只适用于 C++11 ？**

**Q2) 在 C++98 中，有没有办法编写*Fii::Foo::Baz myValue = Fii::Foo::Baz::BAZ1*？您可以在类定义中进行任何您喜欢的更改。**

环境： - 支持 C++11 的 Clang 编译器 - Xcode 4 - Mac OS OS 10.8

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T05:49:10.643

C++11 添加了[类 enums](http://en.wikipedia.org/wiki/C%2B%2B11#Strongly_typed_enumerations)。它还添加了一种访问旧式枚举值的新方法，这就是您在此处看到的。

```
enum Foo { FOO1, FOO2, FOO3 }; // old-style enum

Foo f1 = Foo::FOO1; // OK in C++11, error in C++98.
Foo f2 = FOO1; // OK in C++98 and C++11 (for backward compatibility) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-12T06:09:44.207

juanchopanza 的答案对第一季度有效......

> Q2：在 C++98 中，有没有办法写 Fii::Foo::Baz myValue = Fii::Foo::Baz::BAZ1 ？您可以在类定义中进行任何您喜欢的更改。

就像是：

```
namespace Fii
{
    class Foo
    {
        class Baz
        {
          public:
            enum E { BAZ1, BAZ2, BAZ3 };
            Baz(E e) : e_(e) { }
            operator const E() const { return e_; }
          private:
            E e_;
        };
    };
} 
```

说明：`Fii::Foo::Baz::BAZ1`要成为对 C++03 中枚举的有效引用，`Baz` *必须*是 a`namespace`或`class`/ `struct`/ `union`。但是，我们试图让它看起来好像 Baz 本身就是枚举类型，而 BAZ1 是可用值之一。为此，我们必须使 Baz 成为能够存储在其范围内声明的任何枚举的用户定义类型（类/结构）。因此，我们添加了一个数据成员来记录当前值，一个构造函数来设置值，一个运算符来隐式公开枚举值，这样您就不需要`e_`使用`Baz`对象在代码中对任何地方进行显式引用或调用一些`get() const`功能。

# javascript - 创建新的 Web Workers 对象时，我可以将参数传递给 .js 函数吗？

> ID：12381882
> 
> 赞同：8
> 
> 时间：2012-09-12T05:46:20.363
> 
> 标签：javascript, html, web-worker

当我创建如下的网络工作者时......

```
 var w = new Worker("./Scripts/sample.js"); 
```

sample.js 想要一些来自调用者的参数！！
可能的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-12T05:59:36.323

我还没有大量使用过网络工作者，但根据[这个描述](http://www.html5rocks.com/en/tutorials/workers/basics/)，我相信你可以按照以下方式进行操作：

```
var worker = new Worker("sample.js");
worker.postMessage({ "args": [ ] }); 
```

然后，在 sample.js 中，按照以下几行构建它：

```
self.addEventListener("message", function(e) {
  var args = e.data.args;
  // do whatever you need with the arguments
}, false); 
```

这与传统的参数传递不太一样，因为 postMessage 中的任何内容都必须可格式化为 JSON（例如，没有函数）。但是，很有可能它可以做你需要做的事情。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-04-14T22:14:28.770

# 问题

将 sample.js 用作这样的网络时如何传递参数`var w = new Worker("./Scripts/sample.js");`？

# 回答

您可以在查询字符串中传递参数，并在 sample.js 中从 `location.search`. 您无需调用 postMessage 即可完成此操作。

# 示例代码

调用代码将是

```
var w = new Worker("./Scripts/sample.js?answer=42&question=ultimate"); 
```

这将调用工人。在 sample.js`location.search`中将等于`?answer=42&question=ultimate`. 我们可以用下面的代码优雅的拉出来

```
var parameters = {}
location.search.slice(1).split("&").forEach( function(key_value) { var kv = key_value.split("="); parameters[kv[0]] = kv[1]; })

var question = parameters['question'];
var answer = parameters['answer']; 
```

# 现场示例

[你可以在这里](https://panchishin.github.io/worker/page.html)看到一个活生生的例子

# 最后的想法

如果要发送*大量*数据，请不要使用查询字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-13T00:04:25.473

### 2018-7月

`location`在 WebWorkers 中可用（[根据 MDN](https://developer.mozilla.org/en-US/docs/Web/API/WorkerGlobalScope)），它打开了`location.hash`、`location.search`，甚至`location.pathname`作为传递信息的方式。（在 Mac OSX 的 Chrome、Safari、FireFox 中测试）

此外，hash 和 query 参数在 Chrome 和 FireFox 中有效`URL.createObjectURL(Blob([src]))`，但在 Safari 中无效。

（为 necroposting 道歉；搜索结果永远存在！）

# mysql - MySql查找大于或小于值的行数

> ID：12381886
> 
> 赞同：2
> 
> 时间：2012-09-12T05:46:37.267
> 
> 标签：mysql, sql, math

我正在尝试使用此公式找到百分位数。`(B+0.5E)*100/(N)`为“X”。其中 x 是我在“emp”表中的值。B=x 以下的值数，E=等于 x 的值数，N =该表中值的总数。我在 MySQL 中找不到“B”和“E”时遇到困难。我已经尝试过查询，但它不起作用。是否可以为整个公式运行单个查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T06:02:39.517

将 B 替换为：

```
SUM(IF(column_of_value < 'x', column_of_value, 0)) 
```

和 E：

```
 SUM(IF(column_of_value = 'x', column_of_value, 0)) 
```

和 N 通过：

```
 COUNT(column_of_value) 
```

您的计算变为：

```
((SUM(IF(column_of_value < 'x', column_of_value, 0)) + (0.5 * SUM(IF(column_of_value = 'x', column_of_value, 0)))) * 100) / COUNT(column_of_value) AS result 
```

# 请参阅此处的[SQL Fiddle](http://sqlfiddle.com/#!2/21bf9/5)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T05:57:10.527

如果这不能引导您朝着正确的方向前进，我很抱歉，但我很难理解您的问题。这样的事情会帮助你：

```
select
    emp,
    (
        select
            count(*)
        from
            tableName
        where
            emp=a.emp
    ) as E,
    (
        select
            count(*)
        from
            tableName
        where
            emp<a.emp
    ) as B,
    (
        select
            count(*)
        from 
            tableName
    ) as N
from
    tableName a 
```

它正在制作一系列子选择，这些子选择返回您想要的公式值。

编辑：我完全错过了标题中的mysql（已将标签添加到问题中）。

@Ninsuo 走在正确的轨道上，mysql 支持一个方便的`if`语句，你可以使用它——尽管我认为你需要使用记录计数而不是它们的总和。

这样的事情应该让你走上正确的道路：

```
select
    emp,
    (SUM(IF(column_of_value < emp, 1, 0)) +0.5*SUM(IF(column_of_value = emp, 1, 0)))*100/count(emp) as percentile
from 
    yourTableName
group by
    emp 
```

# recursion - 了解 Postscript 中的递归 Koch Snowflake 函数

> ID：12381887
> 
> 赞同：2
> 
> 时间：2012-09-12T05:46:37.760
> 
> 标签：recursion, postscript, fractals

我在 PostScript 中有以下程序，我很难理解。

```
/kochR
 {
   2 copy ge {dup 0 rlineto}
     {
       3 div
       2 copy kochR
       60 rotate
       2 copy kochR
       -120 rotate
       2 copy kochR
       60 rotate
       2  copy kochR
      } ifelse
     pop pop
  } def

0 0 moveto
27 81 kochR
0 27 moveto
9 81 kochR
0 54 moveto
3 81 kochR
0 81 moveto
1 81 kochR
stroke 
```

我对上述程序的问题是：

1.  这里是什么`2 copy ge { dup 0 rlineto }`意思？
2.  这里是如何`ifelse`工作的，条件是什么？
3.  在这里做什么`3 div`？
4.  该`2 copy KochR`语句在这里执行什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:03:48.717

```
What does 2 copy ge { dup 0 rlineto } mean here? 
```

作为`if`or`ifelse`运算符的 THEN 子句，它表示“if (stack(top-1) > stack(top)) draw_horizo​​ntal_line((current_x, current_y) -> (current_x + stack(top), current_y)。`{ dup 0 rlineto }`是递归的*闭包*：决定何时停止以及做什么而不是递归的部分。`rlineto`绘制一条*相对*线。*相对于 currentpoint*，也就是说。currentpoint 是最后一个路径构造运算符（如`moveto`, `lineto`, 但是not `rotate`, and not `stroke`) 离开了它。

```
How does ifelse work here and what is the condition? 
```

`ifelse`总是以相同的方式工作： booleantype procedure-body procedure-body ifelse：如果布尔值为真，则执行第一个过程主体，否则执行第二个。`gt`条件是应用于堆栈上 2 个数字的运算符的布尔值结果。由于`gt`消耗了它的参数，前置`2 copy`意味着数据不会丢失`gt`。

```
What does 3 div do here? 
```

由于第二个参数（堆栈顶部）控制图形的整体大小，因此它还控制由所有子调用的组合绘图命令表示的部分图形的“大小”。`3 div`意味着在每个递归级别，图形的“大小”小于其父级的“大小”，小 1/3。在叶子调用中，条件 a >= b 成立，b 用作组成图像的各个线段的长度。这意味着 a 本身不是行长，而是一个阈值。一旦 b 在下降到 b/3、b/9、b/27、b/81 的过程中遇到或超过阈值 a，那么就该关闭克隆机并让每个人拿起铅笔。

```
What does the 2 copy KochR statement perform here? 
```

此行执行对 kochR 过程的递归调用，使用相同的阈值和从传递给当前调用的两个参数中减小的大小。使用`2 copy`意味着这两个值在堆栈上持续存在，直到`pop pop`进一步下降。

* * *

这是对 C 的粗略翻译，假设有一个可用的图形库实现了 Adob​​e 图像模型（也称为 Stencil-Mask 或 Path-Paint 模型）。参数似乎分别是线段的大小和图形的整体大小。因此，最大递归级别由等式 a >= b * (1/3)^R 间接控制。

```
void kochR(double a, double b) {
    if (a >= b) {
        // line from currentpoint to currentpoint+(b,0)
        // ie. line of length b along current x-axis
        rlineto(b, 0);
    } else {
        b /= 3;
        kochR(a, b); // recurse with reduced length
        rotate(60);  // rotate x-axis CCW by 60 degrees
        kochR(a, b);
        rotate(-120); // rotate x-axis CW by 120 degrees
        kochR(a, b);
        rotate(60);
        kochR(a, b);
    }
}

int main(void) {
    moveto(0,0);
    kochR(27, 81);
    moveto(0, 27);
    kochR(9, 81);
    moveto(0, 54);
    kochR(3, 81);
    moveto(0, 81);
    kochR(1, 81);
    stroke();
} 
```

所以你应该能够从中看出，所有的`2 copy`东西都是后记必须“保持活力”2个未命名变量的一种手段。每行对应一个过程调用，该调用消耗堆栈中的 2 个变量。如果您在最后一个“程序调用”中`pop pop`也省略了 final ，您应该能够看到 final是不必要的。`2 copy`从*postscript 编程*的角度来看，这都是非常基本的东西。但是递归有界的方式非常复杂。

顺便说一句，如果你喜欢这些分形（我喜欢），你绝对必须看看[http://en.wikipedia.org/wiki/L-system](http://en.wikipedia.org/wiki/L-system)。太奇妙了。

[Cairo Graphics](http://cairographics.org/)是一个流行的实现 Adob​​e 图像模型的 C 库，但我将把创建工作程序的任务留给读者作为练习。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T07:30:42.670

您似乎在相当基本的 PostScript 概念和操作方面遇到了一些问题，您有 PostScript 语言参考手册的副本吗？

1.  copy 复制操作数堆栈上的条目，前面的参数告诉解释器要复制堆栈上的操作数。ge 测试大于或等于，然后是一个可执行数组。

2.  ifelse 以您期望的方式工作，如果条件为真，则执行第一个可执行数组，否则执行第二个可执行数组。

3.  3 div 将堆栈上的操作数除以 3，并将结果放在操作数堆栈上。

4.  2 副本与第 1 点中的相同，“KochR”是一个命名对象，在这种情况下它是一个可执行数组。它必须是先前定义的，否则会出现“未定义”错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T15:15:04.080

`2 copy ge`copy的`KochR`2 个参数（我假设它是一个坐标对）并比较它的分量，得到一个真值。然后`ifelse`根据该真值决定是否执行`{ dup 0 rlineto }`或其他块中的语句。 `3 div`将坐标对的 y 值一分为三，使其沿该轴更接近原点。 `2 copy KochR`创建坐标对的副本（将 y 切成三分之二，或者将其位置旋转），然后递归地使用它们对它们执行相同的操作。

我对该函数所做的最佳估计是，它从当前点沿传递给 的点的方向绘制一个衰减的锯齿形，将点`KochR`列表留在操作数堆栈上。该程序将几个这样的锯齿形附加到当前路径，每个都是自己的子路径，然后将它们全部描边，将整个点列表留在堆栈上（一个可能的问题）。

# html - jQuery 事件属性

> ID：12381888
> 
> 赞同：0
> 
> 时间：2012-09-12T05:46:44.380
> 
> 标签：html, jquery

我想知道jQuery 事件对象`delegateTarget`和键之间的明显区别。`currentTarget`

```
 $(this).on('click',function(event){
       console.log(event.delegateTarget);
       console.log(event.currentTarget);
   }) 
```

两者看起来非常相似
，应该使用哪一个？谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T05:52:22.203

使用事件委托时，您会注意到不同之处。

这是一个更好的例子来说明

```
$(document.body).on('click', 'button', function(event) {
    console.log(event.delegateTarget); // body
    console.log(event.currentTarget); // button
});​ 
```

请参阅[http://jsfiddle.net/PRcte/1/](http://jsfiddle.net/PRcte/1/)和[http://api.jquery.com/on/#direct-and-delegated-events](http://api.jquery.com/on/#direct-and-delegated-events)

# javascript - javascript文件中的IE8未指定错误

> ID：12381896
> 
> 赞同：1
> 
> 时间：2012-09-12T05:47:00.470
> 
> 标签：javascript, internet-explorer-8

我的 jquery-1.3.2.min.js 文件中的 IE8 中的第 19 行有一个未指定的错误；

我不知道如何修复它，因为该文件有很多功能。

有没有解决这个问题的方法来修复这个错误？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T05:52:00.700

它可能不在 jQuery 中，而是在调用它的代码中。

从具有 IE9 或 IE10 的机器上，运行相同的页面，使用 F12 打开开发人员工具，并在 IE 8 浏览器（用户代理）和 DOM 模式（两者）下运行，从那里运行调试器并查看堆栈跟踪你的代码中的调用到达了这一行。

# php - php regex 删除 CSS 供应商前缀地狱

> ID：12381899
> 
> 赞同：4
> 
> 时间：2012-09-12T05:47:15.933
> 
> 标签：php, prefixfree

我正在尝试清理我的 CSS 文档以仅删除那些以供应商为前缀的行：

```
-webkit-......;
-o-.....;
-ms-......;
-khtml-......;
-moz-......; 
```

如您所见，所有行都有相同的模式，以分号结尾，只是不同的供应商。到目前为止，我尝试一一搜索，但应该有更好的方法来实现这一点：

```
preg_match("/(-webkit.*;)/", $css, $webkit);
$css = str_replace($webkit[1], '', $css);
// ... etc 
```

任何提示将不胜感激。谢谢

更新：原因是我将使用[http://leaverou.github.com/prefixfree/](http://leaverou.github.com/prefixfree/)，但我需要一种方法来切换某些开发阶段的状态，例如禁用 JS 时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T05:53:24.120

尝试这个`(-webkit-.*?;)|(-khtml-.*?;)|(-ms-.*?;)|(-moz-.*?;)|(-o-.*?;)`

```
preg_match("/(-webkit-.*?;)|(-khtml-.*?;)|(-ms-.*?;)|(-moz-.*?;)|(-o-.*?;)/", $css, $webkit); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T06:00:58.987

试试这个正则表达式`/^-.*;?/m`匹配以 开头的每一行`-`，并可能`;`在最后
**更新**
`/^(\s|\t)*-.*;?/m` 匹配任何以没有或更多空格或制表符开头，`-`在空格或制表符之后并以一个结尾的内容`;`

# c# - 将表单数据提交到网格视图

> ID：12381909
> 
> 赞同：-1
> 
> 时间：2012-09-12T05:48:22.307
> 
> 标签：c#, asp.net, vb.net

将表单绑定到 Gridview 所需的输入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:53:12.193

我认为您需要教程来说明如何插入数据，编辑gridview而不是谷歌，或者您可以看到这个示例，它可以帮助您进一步移动

[ASP.Net GridView - 插入编辑更新和删除 ADO.NET 方式](http://www.aspsnippets.com/Articles/ASP.Net-GridView--Insert-Edit-Update-and-Delete-the-ADO.NET-way.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T06:49:45.543

按着这些次序

1.  创建数据库表以更新您的文本框数据
2.  编写代码以正确更新数据库
3.  将gridview绑定到表格中。

然后，当您保存数据时，它将显示在数据网格视图中。

希望这会帮助你。

# c# - 使用 LINQ 从表中获取最后一个事务

> ID：12381914
> 
> 赞同：0
> 
> 时间：2012-09-12T05:49:04.503
> 
> 标签：c#, linq-to-sql, join

我正在使用 c# 处理 LINQ 和 MS SQL。我在获取记录时遇到问题。我有 2 个表，销售事务销售主键由事务表引用。数据就像， ![在此处输入图像描述](../Images/fe7687ebf1e008b879847d2164a0c6cc.png)

我要做的是获取金额为 != 0 的所有记录。在此示例中，结果应仅包括 Sales2 和 Sales3，但不包括 Sales1。由于 Sales1 已关闭。

我写了一个查询，例如，

```
List<Sales> lstSales = (from ccs in context.Sales
                        join transactions in context.Transactions 
                             on ccs.SALESID equals  transactions.SALESID            
                        where transactions .AMOUNT !=0 
                       select ccs).ToList(); 
```

它返回了所有 3 条销售记录，因为对于 Sales1 的 1 行，金额！= 0。

请指导我达到预期的结果。

在此先感谢，维杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T06:19:24.313

尽管您的查询过滤掉了已关闭的交易，但结果中仍然有 > 0 个交易，因此您仍然可以获得 Sales1 Id。

试试这个（它应该可以工作，虽然我没有测试过）；

```
IEnumerable<int> closedIds = context.Transactions.Where(t => t.Amount == 0).Select(t=> s.SalesId);
List<Sales> sales = context.Sales.Where(s => !closedIds.Contains(s.SalesId)); 
```

另一种方法是（假设您在上下文中有 Sales 和 Transaction 之间的关联）；

```
List<Sales> sales = context.Sales.Where(s => !s.Transactions.Any(t=> t.Amount == 0)); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-12T05:54:18.303

使用其中之一：

[Enumerable.Any](http://msdn.microsoft.com/de-de/library/bb534972.aspx) [Enumerable.All](http://msdn.microsoft.com/en-us/library/bb548541.aspx)

# ruby - Rails 命令在 ANSICON 安装后不起作用

> ID：12381918
> 
> 赞同：2
> 
> 时间：2012-09-12T05:49:16.780
> 
> 标签：ruby, windows, ruby-on-rails-3, colors, crash

我安装了 ANSICON 来为我的 Rails Cucumber 测试获取彩色输出。[我从https://github.com/adoxa/ansicon/downloads](https://github.com/adoxa/ansicon/downloads)下载了 ansicon，并使用 ansicon -i 命令安装了 x64 ansicon exe（我使用的是 64 位 Windows 7 机器）。之后，无论我在命令提示符中键入什么命令，它都会崩溃，说 "windows notresponsive" 。

例如，如果我运行命令 "rails new myapp" ，错误消息是 "ruby interpreter 1.9.3 has stop working" 。我不明白为什么安装 ansicon 会导致其他进程崩溃。

我尝试卸载 aniscon "ansicon -u" 。在此之后，一切恢复正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:32:03.007

如果有 nVidia 卡，则与加载的其中一个 dll 发生冲突，这将导致此崩溃。将此添加到您的系统环境变量中：

```
set ANSICON_EXC=nvd3d9wrap.dll 
```

让事情为我工作..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-17T13:32:37.150

您需要 1.65 最新版本：[http ://adoxa.hostmyway.net/ansicon/](http://adoxa.hostmyway.net/ansicon/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T06:01:34.627

试试[ConEmu](http://sourceforge.net/projects/conemu/) - 另一个 Windows 终端（我是它的作者）。

它的特点之一是 ansi 转义序列的内部处理。希望，它会让你满意。

# amazon-s3 - Amazon S3 存储桶备份

> ID：12381920
> 
> 赞同：0
> 
> 时间：2012-09-12T05:49:24.480
> 
> 标签：amazon-s3

我想问是否有一种方法可以将标准存储上的 Amazon S3 存储桶直接备份到不同账户中的 Amazon S3 RRS 冗余存储存储桶，而无需在两者之间使用服务器/自定义脚本。

我知道存储具有高冗余，但第二个维护副本将是一个优势，并且不必每晚使用服务器等也是一个优势。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:35:43.957

是的，Glacier 是削片机备份的好选择。但为此，您必须使用此类工具为您提供有关上传存档文件的足够描述，因为 Glacier 不会将文件作为文件名上传，它会将文件保存在其生成的不同字母数字名称中。2.它不会用新的替换你更改的文件，它会用旧的上传新的。

因此，如果您想长时间保留数据并且不想重复检索，请使用它。

Amazon S3 标准存储可确保您的数据安全，但即使您想要备份，您也可以使用任何支持在两个存储桶之间进行复制的工具。然后您可以在桶的所有对象上应用 RRS 存储类型。

我是 Bucket Explorer S3 Tool 的开发者之一。您可以使用 Bucket Explorer 在相同或不同 aws 账户中的两个不同存储桶之间复制数据。并且还提供批量更新元数据选项来更新所有现有文件的 RRS 设置。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T05:58:22.990

如果您想将文件保存在不同的用户帐户下，我认为唯一的方法是编写使用 S3 API 的自定义脚本（例如在 Python 中使用[boto](https://github.com/boto/boto)）。但是，如果您正在寻找长期耐用的存储，我建议您看看[Amazon Glacier](http://aws.amazon.com/en/glacier/)

# java - 如何将json字符串解析为ArrayList

> ID：12381922
> 
> 赞同：1
> 
> 时间：2012-09-12T05:49:46.423
> 
> 标签：java, json, gson

我是 json 新手，需要从服务器向客户端发送一些数据。我在客户端接收数据作为 json 字符串，但需要将其转换为`ArrayList<NameValuePair>`. 我努力了：

```
Type type = new TypeToken<ArrayList<NameValuePair>>() {}.getType();
ArrayList<NameValuePair> arrayList = new Gson().fromJson(response, type); 
```

但我它抛出异常，所以我需要一个更好的方法来做到这一点。我希望我的情况很清楚。所有有效的答案将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T06:27:47.683

我认为下面的代码对你有帮助。

```
Type type = new TypeToken<ArrayList<BasicNameValuePair>>() {}.getType(); 
```

# c# - MYSQL中存储段落数据出错

> ID：12381924
> 
> 赞同：0
> 
> 时间：2012-09-12T05:49:54.057
> 
> 标签：c#, asp.net, mysql

我想将文本编辑器内容存储在 MYSQL 中。该内容可能超过 10 页。现在我将字段数据类型设置为文本。它返回错误消息..

```
ERROR :   Failed to enable constraints. One or more rows contain values violating non-null, unique, or foreign-key constraints. 
```

我该如何解决这个问题..请帮我这样做..

我的表结构是：

```
fldid      int not null auto_increment unique
fldhead    varchar(400)
fldcontent Text 
```

和内容有超过6个字的页面..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T06:37:52.743

您尝试插入的内容似乎没有问题。此外，您似乎正在使用 InnoDB 并指定了与其他表的关系。

Prima facia，您尝试插入的记录与其他表格有一些相关性，并且它所构成的限制没有得到满足，因此它拒绝插入记录。

如果您可以在此处发布与其他表的关系，那将很有帮助。

# c# - 数据网格的数据模板

> ID：12381928
> 
> 赞同：0
> 
> 时间：2012-09-12T05:50:31.447
> 
> 标签：c#, wpf, datatemplate

我看到 DataTemplate 的方式是，您可以将它传递给显示“像这样显示我的东西”的控件。您可以在单个控件（例如 ContentControl）或某种列表控件（例如 ListBox）上使用模板。我一直认为缺少的是一种定义模板的方法，该模板告诉 DataGrid 之类的多列控件一种显示某些内容的方法。假设我想将员工列表传递给 DataGrid，并告诉它在第一列中显示员工 ID，在第二列中显示名称等。我可以为每一列传递一个模板，但这会有点混乱。我想定义一个模板来描述如何在多列控件中显示对象。

为了解决这个问题，我创建了自己的非常粗略的类，我称之为 DataGridTemplate 和 DataGridTemplateColumnTemplate。这很有效，我已经在我的应用程序的几个地方使用了它，但我相当肯定这不是最好的方法。它只是一个类，它不是从 DataTemplate 继承的，如果我需要在网格或网格的列上设置属性，那么我需要复制这些属性中的每一个。无论如何，我的问题是，有没有更好的方法来做到这一点？

```
[System.Windows.Markup.ContentProperty("Columns")]
public class DataGridTemplate
{        
    public List<DataGridTemplateColumnTemplate> Columns { get; set; }

    public Style Style { get; set; }

    public DataGridTemplate()
    {
        Columns = new List<DataGridTemplateColumnTemplate>();
    }

    public IEnumerable<DataGridTemplateColumn> CreateColumns()
    {
        return Columns.Select(c => c.CreateColumn());
    }

    public void ApplyToGrid(DataGrid grid)
    {
        if(Style != null) grid.Style = Style;
        grid.Columns.Clear();
        CreateColumns().AddAllTo(grid.Columns);
    }
}

public class DataGridTemplateColumnTemplate
{
    public object Header { get; set; }
    public DataTemplate CellTemplate { get; set; }
    public double MinWidth { get; set; }
    public double MaxWidth { get; set; }

    public DataGridTemplateColumnTemplate()
    {
        MinWidth = 20.0;
        MaxWidth = double.PositiveInfinity;
    }

    public DataGridTemplateColumn CreateColumn()
    {
        var col = new DataGridTemplateColumn();
        col.Header = Header;
        col.CellTemplate = CellTemplate;
        col.MinWidth = MinWidth;
        col.MaxWidth = MaxWidth;
        return col;
    }
} 
```

# wordpress - WordPress数字帖子不起作用

> ID：12381930
> 
> 赞同：0
> 
> 时间：2012-09-12T05:50:42.030
> 
> 标签：wordpress, wordpress-theming

我是wordpress的新手。我的帖子有问题。我想在主页上显示一个类别的最新 4 个帖子，但它显示的是 5 个帖子，因为我添加了 5 个帖子。

这是我的代码：

```
 <div id="from-categories" class="clearfix">     
        <?php 
        $catName='HomePost';              
        $cat_ID=get_cat_ID($catName);             
        $args = array( 'numberposts' => 4, 'post_status' => 'publish', 'post_type' => 'post', 'orderby' => 'post_date', 'category' => $cat_ID);              
        $postslist = get_posts( $args );                  
        foreach ($postslist as $post) : setup_postdata($post); ?>       
        <div class="recent-cat">            
            <h4 class="title"><?php the_title(); ?></h4>            
            <p><?php the_excerpt(); ?> </p>                         
            <a href="<?php the_permalink(); ?>" class="readmore">Read More</a>          
        </div>      

        <?php endforeach; ?>            
        </div> <!-- end #from-categories --> 
```

请让我知道这段代码有什么问题。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T06:31:22.450

您可以使用

```
<?php
$args = array(
    'posts_per_page' => 4,
    'post_status' => 'publish',
    'post_type' => 'post',
    'orderby' => 'post_date',
    'category_name' => 'HomePost'
);
query_posts( $args );
if (have_posts()) :
    while (have_posts()) : the_post();
        ?>
        <div class="recent-cat">            
            <h4 class="title"><?php the_title(); ?></h4>            
            <p><?php the_excerpt(); ?></p>                         
            <a href="<?php the_permalink();?>" class="readmore">Read More</a>          
        </div> 
        <?php
    endwhile;
    wp_reset_query();
endif;
?> 
```

# sql-server - 通过代理将VS2010连接到在线SQL Server数据库

> ID：12381933
> 
> 赞同：1
> 
> 时间：2012-09-12T05:50:54.883
> 
> 标签：sql-server, visual-studio-2010, proxy

当我在家工作时，我可以通过我的 Visual Studio 连接到我的在线 SQL Server 数据库。但由于我们有代理，我无法从我的办公室连接到在线 SQL Server 数据库。你能建议一个解决方案吗？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T05:55:01.680

您可以使用它的 devenv.exe.config 文件更改 Visual Studio 本身的代理设置。

我在这里展示了一个例子：http:
[//gurustop.net/blog/2010/08/10/visual-studio-2010-extension-manager-online-gallery-behind-internet-proxy/](http://gurustop.net/blog/2010/08/10/visual-studio-2010-extension-manager-online-gallery-behind-internet-proxy/)

您可以`<defaultProxy>`在`<system.net>`标签下添加适用于您的案例的设置。

# html - Windows 8 基于 XAML 的应用程序是否明显快于 HTML/CSS 应用程序？

> ID：12381934
> 
> 赞同：12
> 
> 时间：2012-09-12T05:50:56.290
> 
> 标签：html, xaml, windows-8, microsoft-metro, winrt-xaml

我们正在考虑开发一款 Windows 8 Metro 风格的应用程序，该应用程序将非常注重照片，因此我们担心 UI 性能。在 iOS 上，这是一个简单的决定（Objective-C over HTML 以获得我们需要的 UI 性能），但研究 Windows 8 我很难判断 XAML 将比 HTML5/CSS 快多少。

我已经看到了 XAML 和 HTML5 之间的一般比较（比如[这个](http://blog.jerrynixon.com/2012/05/windows-8-why-i-choose-xaml-metro-over.html)），并且有一个*SO* [answer](https://stackoverflow.com/a/11147439/68707)涉及性能，但没有提供任何数据来支持他的主张或解释为什么 XAML 更快。

 *根据我的阅读，HTML5/CSS 是使用 IE10 的渲染引擎渲染的，这意味着它不是超级原生的，可能会更慢。但我不确定 XAML 是如何呈现的，或者它是多么“原生”。

是否有人对这两种技术进行了性能比较，或者您能否提供链接以进一步解释每种技术的呈现方式（考虑到性能）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-12T06:35:18.743

以下是我对此的看法：

首先 XAML 可以为您提供比 HTML5 更好的性能。如果您将 XAML 与 C++ 结合使用，您将获得最佳的 WinRT 性能，因为 C++ 是本机代码。如果您改用 C#，则依赖于比本机代码慢的 CLR（公共语言运行时）。
-[参考 1](http://geekswithblogs.net/lbugnion/archive/2011/09/17/my-thoughts-about-build-windows-8-winrt-xaml-and-silverlight.aspx)
-[参考 2](https://stackoverflow.com/questions/10031929/what-are-the-pros-and-cons-of-writing-c-xaml-vs-c-xaml-winrt-applications-in)

其次，如果您要包含很多 JavaScript 库（您可能会这样做），它将对性能产生影响。（jQuery、jqQuery 插件、backbone.js、...）

然后，就像你说的，JS 中的 HTML5 是使用 IE 的引擎呈现的。所以这是一个棘手的问题。这实际上取决于您将如何编写代码。有关 XAML 和 JS 的最佳实践，您可以查看[此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh750312.aspx)。

从个人经验。我使用 XAML/C# 编写了一个应用程序。感觉比 Windows Phone 7 和 7.5 更好。主要是因为他们精简了 .NET。新的`async`和`await`模型是相当不错的。在您的情况下，您可以轻松实现对 Web 服务或图像渲染的异步调用。

但我也对数字感兴趣，所以如果有人做过测试，那就太好了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T12:46:51.603

IE10 有一个硬件加速引擎，包括一个 GPU 加速的 HTML5 画布。这意味着在 HTML5 中的渲染可能与在 XAML 中一样快，因为这两种方式都使用 GPU 进行渲染。

逻辑在 JS 中可能会慢几倍，但通常没关系。如果您的应用程序没有受到大量逻辑处理的瓶颈，并且像许多应用程序一样主要是事件驱动而没有繁重的循环，那么 JS 可能就足够快了。

然后您可能需要考虑将 HTML5 移植到其他平台要容易得多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T23:59:02.180

速度并不是一个真正的大问题，除非您正在执行一些需要一些密集处理或需要在特定时间窗口内执行的操作。

实际上，计算已经变得如此之快，花时间在优化上只是花时间来实现新的有用功能。只在需要的地方进行优化。

我会说根据 2 的功能以及您对它们的了解程度做出选择。真的几毫秒并不是很担心。我想说您的大多数最终用户不会对您的应用程序进行基准测试，他们更有可能被特性和功能所吸引。

我们不再在 64kb 的 ram 和 400mhz CPU 上运行。

当然，这是假设您没有做处理器密集型的事情。如果你是，那么你正在一起研究错误的技术。*

# ios - 如何在 Dropbox iPhone 应用程序中集成注销功能？

> ID：12381935
> 
> 赞同：1
> 
> 时间：2012-09-12T05:50:56.703
> 
> 标签：ios, api, dropbox, logout

我在 iPhone 的 Dropbox 应用程序中工作，使用 Dropbox_SDK 开发这个应用程序，我已经从我的 dropBox 帐户上传和下载了一个文件，它运行良好。然后我尝试在 iPhone 中注销 Dropbox 帐户，但我不知道该集成，如何做到这一点？

```
- (void)viewDidLoad
{
    UIButton *Logout =[[UIButton buttonwithtype:UIButtonTypeRoundedRect];
    Logout.frame=cgrectmake(10,10,100,50);
    [Logout setTitle:@"Log Out" Forstate:UIControlStateNormal];
    [Logout addTarget:self action:@selector(Method)ForcontrolEvent:UIControlEventTouchUpInside];
    [Self.view addsubview:Logout];
}

-(void)Method
{

    //Logout Integration

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T07:48:38.503

使用此命令在 iPhone 应用程序中注销投递箱帐户

```
 [[DBSession sharedSession] unlinkAll]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T06:24:41.313

您无法注销，只能使用 取消请求并`- (void)cancelAllRequests;`清除设备的缓存。您将自动注销。

# asp.net - 如何解决 Sys.InvalidOperationException：无法将具有相同 id 的两个组件添加到应用程序中？

> ID：12381936
> 
> 赞同：1
> 
> 时间：2012-09-12T05:51:14.650
> 
> 标签：asp.net, jquery, jquery-plugins

我已经为gridview 实现了jquery 数据表插件。它在整个页面加载时工作正常。在 ajax 更新面板中发生的部分页面加载期间，jquery 数据表功能（例如分页和标题排序）适用于 gridview，但 jquery 数据表 css 没有得到应用，但是 IE 浏览器抛出 Sys.InvalidOperationException: 两个错误无法将具有相同 id ctl00_ctl00_ph1_phGrid_RequestGridView1_RequestSecurityGridView_ctl1_ctl1 的组件添加到应用程序中。我浏览了视图源，但没有找到两个具有相同 ID 的组件。我写的代码是

```
 function pageLoad(sender, args)
     {
      if(args.get_isPartialLoad())
       {
        $(document).ready( function () {
          $('#<%=RequestSecurityGridView.ClientID%>').prepend( $("<thead></thead>").append( $(this).find("tr:first") ) ).dataTable( 
           {
            "bLengthChange": false,
            "bJQueryUI": true,
            "iDisplayLength": 8,
            "sPaginationType": "full_numbers"
        } );
      } );  
     }
    else
    {
    $(document).ready( function () 
{
          $('#<%=RequestSecurityGridView.ClientID%>').prepend( $("<thead></thead>").append( $(this).find("tr:first") ) ).dataTable( 
           {
            "bLengthChange": false,
            "iDisplayLength": 8,
            "sPaginationType": "full_numbers"
        } );
      } );  
} 
```

请
建议我如何解决这个问题。谢谢

# apache - Apache Mod 重写规则与？像谷歌 ie ?hl=en

> ID：12381938
> 
> 赞同：0
> 
> 时间：2012-09-12T05:51:45.343
> 
> 标签：apache, mod-rewrite

我有一个工作*RewriteRule*：

`RewriteRule ^category/?(.*)/([0-9]+)/([0-9]+)/([a-z]+)-([0-9]+)$ category.php?%{QUERY_STRING}&id=$2&paginate=$3&sort=$4&page=$5 [L]`

处理后的*URL*如下所示：

`www.mysite.com/category/hockey/10/18/recent-3`

现在我希望我的*URL*看起来像：

`www.mysite.com/category/hockey?id=10&paginate=18&sort=recent-3`

我试过了：

`RewriteRule ^category/?(.*)?id=([0-9]+)&paginate=([0-9]+)&sort=([a-z]+)-([0-9]+)$ category.php?%{QUERY_STRING}&id=$2&paginate=$3&sort=$4&page=$5 [L]`

但我无法让它工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T06:01:53.283

您无法匹配`?`. `RewriteRule`您必须`%{QUERY_STRING}`使用以下方法对变量和反向引用执行此操作`%`：

```
RewriteCond %{QUERY_STRING} ^id=([0-9]+)&paginate=([0-9]+)&sort=([a-z]+)-([0-9]+)$
RewriteRule ^category/?(.*) category.php?id=%1&paginate=%2&sort=%3&page=%4 [L] 
```

# java - jboss 已启动，但 Web 服务出错

> ID：12381945
> 
> 赞同：0
> 
> 时间：2012-09-12T05:52:26.370
> 
> 标签：java, web-services, jboss

我已经启动了 jboss，但在访问 Web 服务时出现以下错误。这有时会发生。可能是什么问题呢？是不是缺少一些罐子？如果是的话，有时它怎么可能找不到一些jar文件？请指导。Web服务的两个url是“https://203.77.203.196:8447/GetGPRSMtrBillService/services/GetGPRSConBillDataSoapPort”和“https://203.77.203.196:8447/EPaymentWebService/services/NotifyInstaPaymentSoapPort”

## 例外

“javax.servlet.ServletException：Servlet AxisServlet 的 Servlet.init() 抛出异常 org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190) org.jboss.web.tomcat.security.JaccContextValve.invoke (JaccContextValve.java:92) org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126) org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70) org.apache .catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158) org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter .java:330) org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:第828章、运行(Thread.java:595)"

## 根本原因

“java.lang.NoClassDefFoundError: org/apache/axis/SimpleChain org.apache.axis.deployment.wsdd.WSDDChain.makeNewInstance(WSDDChain.java:121) org.apache.axis.deployment.wsdd.WSDDDeployableItem.getNewInstance(WSDDDeployableItem. java:274) org.apache.axis.deployment.wsdd.WSDDDeployableItem.getInstance(WSDDDeployableItem.java:260) org.apache.axis.deployment.wsdd.WSDDTargetedChain.makeNewInstance(WSDDTargetedChain.java:151) org.apache.axis。 deployment.wsdd.WSDDDeployableItem.getNewInstance(WSDDDeployableItem.java:274) org.apache.axis.deployment.wsdd.WSDDDeployableItem.getInstance(WSDDDeployableItem.java:260) org.apache.axis.deployment.wsdd.WSDDDeployment.getTransport(WSDDDeployment. java:410) org.apache.axis.configuration.FileProvider.getTransport(FileProvider.java:257) org.apache.axis.AxisEngine。getTransport(AxisEngine.java:332) org.apache.axis.transport.http.AxisServlet.initQueryStringHandlers(AxisServlet.java:1057) org.apache.axis.transport.http.AxisServlet.init(AxisServlet.java:200) javax. servlet.GenericServlet.init(GenericServlet.java:212) org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190) org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java: 92) org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126) org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70) org.apache.catalina.valves。 ErrorReportValve.invoke(ErrorReportValve.java:102) org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158) org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330) org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:828) org.apache.coyote.http11.Http11Protocol$ Http11ConnectionHandler.process(Http11Protocol.java:601) org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447) java.lang.Thread.run(Thread.java:595)"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:58:11.063

```
java.lang.NoClassDefFoundError: org/apache/axis/SimpleChain 
```

您的类路径中似乎有错误版本的轴 jar。确保类路径中有有效的 jar。

# mysql - 将单个数据库从 mysqldump 还原到另一个数据库

> ID：12381947
> 
> 赞同：1
> 
> 时间：2012-09-12T05:52:33.317
> 
> 标签：mysql, mysqldump, database-restore

我有一个使用 all-databases 选项在我们的生产服务器上创建的 mysqldump 文件。

假设转储包含

*   db1
*   数据库2
*   数据库3

我知道我可以只恢复一个数据库

```
mysql -D db3 -o < backup.sql 
```

但我只想恢复`db3`到我的开发机器但到另一个数据库，可以说`db3_production`因为`db3`我的开发机器上已经有一个我想保留的数据库。

我怎样才能做到这一点？该文件太大，无法使用文本编辑器进行修改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T06:36:29.367

获取另一个文本编辑器。或者通过一个程序过滤你的备份文件，比如`sed`在它进入 mysql 之前，比如

```
cat backup.sql | sed "s/`db3`/`db4`/g" | mysql -D db4 -o 
```

# mysql - 选择每秒最大计数

> ID：12381948
> 
> 赞同：6
> 
> 时间：2012-09-12T05:52:57.543
> 
> 标签：mysql, sql

我有一张这样的桌子

```
CREATE TABLE news
(
Id         INT NOT NULL auto_increment,
Headline   VARCHAR (255) NULL,
InDateTime   DATETIME NULL
) 
```

如何获取每秒记录数（InDateTime）？

我在用着`Mysql`

* * *

样本记录：

```
578921,   'headline1', '8/20/2012 12:01:53 PM' 
578922,   'headline2', '8/20/2012 12:01:53 PM' 
578923,   'headline3', '8/20/2012 12:01:53 PM' 
578924,   'headline4', '8/20/2012 12:01:59 PM' 
578925,   'headline5', '8/20/2012 12:01:59 PM' 
578926,   'headline6', '8/20/2012 12:01:59 PM' 
578927,   'headline7', '8/20/2012 12:01:59 PM' 
578928,   'headline8', '8/20/2012 12:02:03 PM' 
```

预期输出：

```
time,                    count
'8/20/2012 12:01:53 PM', 3
'8/20/2012 12:01:59 PM', 4
'8/20/2012 12:02:03 PM', 1 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-12T05:58:46.240

你厌倦了这个：

```
SELECT COUNT(id), InDateTime
FROM news
GROUP BY InDateTime 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T06:19:51.647

在这里，您要根据`time`. 对于每个`time`您想要的行数。所以你可以使用这个查询。

```
select time, count(*)
from news
group by time 
```

这里`group by time`将创建单独的一组不同的`time`值。 `select time`将在第一列中选​​择时间。并将`count(*)`给出包含该值的行数。

你最好读[这个](http://www.w3schools.com/sql/sql_groupby.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T06:24:18.797

```
SELECT InDateTime AS Time, COUNT(InDateTime) AS Count
FROM NEWS
GROUP BY InDateTime 
```

**结果**

```
Time                     Count
2012-08-20 12:01:53.000   3
2012-08-20 12:01:59.000   4
2012-08-20 12:02:03.000   1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T06:08:37.653

任何转换的最简单方法

```
SELECT `time`, COUNT(*) totalCount
FROM tableName
GROUP by `time 
```

# ios - 预处理器不适用于 iOS 设备中的 xcode 4.4.1

> ID：12381951
> 
> 赞同：0
> 
> 时间：2012-09-12T05:53:11.787
> 
> 标签：ios, xcode, xcode4, preprocessor

我在我的项目目标之一中定义了一个预处理器宏。像这样：

![在此处输入图像描述](../Images/17da77f253426316236fc316d6cdcdaa.png)

我的代码是这样的：

```
#ifdef FREE_VERSION
[[UIApplication sharedApplication]openURL:[NSURL URLWithString:@"http://www.myurl.com"]];
#endif 
```

它在模拟器中运行良好。但在我的设备中，这根本不起作用。

谁能告诉我为什么？谢谢

# jsf - 有什么方法可以转义 h:outputText 标记对特定字符的编码吗？

> ID：12381952
> 
> 赞同：0
> 
> 时间：2012-09-12T05:53:18.870
> 
> 标签：jsf

h:outputText 标签将特殊字符 ê 转换为 & ecirc; 这会引发 xml 解析错误。有什么办法可以让它把ê编码成ê？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T06:49:39.180

这对我有用：

```
<h:outputText value="&#234;" escape="false" /> 
```

# ruby-on-rails - errors(:base) << message 导致 nil:NilClass 的未定义方法 `map'

> ID：12381956
> 
> 赞同：0
> 
> 时间：2012-09-12T05:53:32.073
> 
> 标签：ruby-on-rails, activemerchant

我正在尝试使用 Rails 3.2 将 ActiveMerchant 集成到我的网站中。目前，我有代码可以使用 ActiveMerchant“有效”函数对信用卡进行一般验证，如果卡无效，该函数会返回一些错误消息。如果有错误，那么我想将它们添加到错误中并重新渲染视图以显示带有错误的视图。下面是我的控制器中的代码。

**首先我创建一张信用卡**

```
def credit_card
    first_name = User.find(user_id).first_name
    last_name = User.find(user_id).last_name
    @credit_card ||= ActiveMerchant::Billing::CreditCard.new(
      :brand              => card_type,
      :number             => card_number,
      :verification_value => card_verification,
      :month              => card_expiration.month,
      :year               => card_expiration.year,
      :first_name         => first_name,
      :last_name          => last_name
    )
  end 
```

**接下来我验证卡并尝试将返回的错误添加到视图的基本错误中**

```
# Active Merchant Credit Card validation

def validate_card
    unless credit_card.valid?
      credit_card.errors.full_messages.each do |message|
       errors[:base] << message
      end
    end
end 
```

**最后我在创建时调用 valid_card**

```
validate :validate_card, :on => :create 
```

**但是我收到以下错误**

> 订单中的 NoMethodError#create
> 
> 显示第 18 行引发的 app/views/orders/_form.html.erb：
> 
> nil 的未定义方法“map”：NilClass 提取的源（大约行
> 
> # 18):
> 
> 15: 16: 17: <%= f.label :print_dimension %>
> 18: <%= f.collection_select :print_dimension_id, @print_dimensions, :id, :dimension %> 19: 20: 21: <%= f.label : Delivery_option_id %>

如果您有任何建议，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:03:03.773

您收到此错误是因为您的`@print_dimensions`is`nil`和部分`collection_select`代码是它调用`map`了您应该在那里传递的可枚举对象。

我无法从提供的代码中判断为什么它为零 - 没有提到 print_dimensions。但我的猜测是你在动作的某个地方初始化了这个变量，`#new`而不是在动作的“失败”部分`#create`。但这只是一个猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:16:33.027

我的问题是由于我的 collection_select 数据为 Nil。本质上，当我尝试执行新操作但失败时，它会传递给 Create，它尝试重新呈现新页面，但不再具有 collection_select 数据。

这是一个与我的类似的答案的链接 -[链接](https://stackoverflow.com/questions/10971138/rails-3-undefined-method-map-for-nilnilclass-for-my-own-validation)

# android - 停止在平板电脑上运行的安卓应用

> ID：12381965
> 
> 赞同：1
> 
> 时间：2012-09-12T05:54:46.350
> 
> 标签：android, android-screen-support

我想停止我的 android 应用程序在平板电脑上运行。我在 AndroidManifest.xml 中给出了如下所示

```
<supports-screens 
android:smallScreens="true" 
android:normalScreens="true" 
android:xlargeScreens="false" 
android:resizeable="false" 
android:largeScreens="false"/> 
```

应用程序仍在平板电脑上安装和运行。**如何防止这种情况？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T06:23:22.227

在您的 AndroidManifest.xml 中添加 < **compatible-screens > ...**

看到这个链接...

[http://developer.android.com/guide/google/play/filters.html#advanced-filters](http://developer.android.com/guide/google/play/filters.html#advanced-filters)

[http://developer.android.com/guide/topics/manifest/compatible-screens-element.html](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T06:06:06.690

看看[这个问题](https://stackoverflow.com/questions/8454034/how-to-disable-app-support-for-android-tablet-screen-from-androidmanifest-xml)。我认为它回答了你的场景。

# php - 使用 olap4php 在 PHP 中的 Mondrian Cube 上运行 MDX 查询

> ID：12381966
> 
> 赞同：0
> 
> 时间：2012-09-12T05:54:47.837
> 
> 标签：php, iphone, mdx, olap-cube, mondrian

我正在使用 olap4php 连接到 Mondrian 的默认 FoodMart XML 模式，我需要对其运行 MDX 查询以查看是否可以使其工作。

我当前的代码如下：-

```
require_once( 'olap4php/autoload.php' );
use OLAP4PHP\Provider\XMLA\XMLAConnection;
$endpoint = "http://server:8888/myproject/FoodMart.xml";
$properties = array(
XMLAConnection::PROP_CATALOG => 'FoodMart',
XMLAConnection::PROP_DATASOURCE => 'Provider=Mondrian;DataSource=FoodMart'
);
$connection = new XMLAConnection( $endpoint, $properties );
if ($connection) {
    echo "yes";
} 
```

输出为“是”，所以我相信连接正常。现在我想在它上面运行一个 MDX 查询，一些查询比如

```
SELECT {[Measures].[Unit Sales], [Measures].[Store Sales]} ON COLUMNS,
{[Product].members} ON ROWS
FROM [Sales]
WHERE [Time].[1997].[Q2] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T12:14:49.787

[入门指南](https://github.com/olap4php/olap4php/wiki/Getting-Started)说将您的查询字符串放入 $query 然后：

```
use OLAP4PHP\Provider\XMLA\XMLAStatement;

$statement = new XMLAStatement( $connection );
$cellSet = $statement->executeOlapQuery( $query ); 
```

# android - Android：按钮触摸区域已左移？

> ID：12381970
> 
> 赞同：0
> 
> 时间：2012-09-12T05:54:59.897
> 
> 标签：android, button, touch

我有一个切换按钮列表，要放置在屏幕的右上角，并有一些填充，这样它们就不会非常靠近屏幕边界。

这是我的布局xml：

```
<RelativeLayout
      a:layout_width="fill_parent" 
      a:layout_height="wrap_content">

   <LinearLayout
      a:id="@+id/header"
      a:orientation="horizontal"
      a:layout_width="wrap_content"
      a:layout_height="wrap_content"
      a:paddingTop="5px"
      a:layout_gravity="top"
      a:paddingRight="15px"
      a:layout_alignParentRight="true"
  >

    <ToggleButton a:id="@+id/button1"
        a:layout_width="40px"
        a:layout_height="40px"
        a:background="@drawable/button1"
        a:textOn=""
        a:textOff=""
    />

    <ToggleButton a:id="@+id/button2"
        a:layout_width="40px"
        a:layout_height="40px"
        a:background="@drawable/button2"
        a:textOn=""
        a:textOff=""
    />

  </LinearLayout>
</RelativeLayout> 
```

按钮放置正确。但是，当我触摸右键时，它不会被检查。直到我触摸按钮的左边界，它才被检查。有效的触摸区域左移。为什么会这样？

# android - 从应用程序类启动服务

> ID：12381977
> 
> 赞同：8
> 
> 时间：2012-09-12T05:55:44.503
> 
> 标签：android

> **可能重复：**
> [我可以从 Application#onCreate() 开始服务吗？](https://stackoverflow.com/questions/7198863/can-i-startservice-from-applicationoncreate)

我们可以从应用程序类启动一个服务吗？

我想在我的应用程序启动时启动一项服务。因此，我可以使用我的应用程序类来代替从启动活动启动服务吗？谢谢。

我尝试的是内部应用程序类：

```
public void onCreate() {
    super.onCreate();

    Log.i("Logger", "Service Starting");
    Intent errorLoggerService = new Intent(getApplicationContext(),
            ErrorLoggerService.class);
    getApplicationContext().startService(errorLoggerService);
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-12T06:35:43.220

是的，您可以在 API 标签 26 之前执行此操作，但现在不行了。

**如果您的 API 版本低于 26**

```
public class MyApplication extends Application {
    public void onCreate() {
        super.onCreate();
        startService(new Intent(this, MyService.class));
    }
} 
```

**编辑** 不要调用 getApplicationContext()，只需调用 startService()。此外，请确保您已在清单中声明了该服务。

**API 标签 26 及以上**

**编辑 2** 来自官方谷歌文档：[https ://developer.android.com/guide/components/services.html#StartingAService](https://developer.android.com/guide/components/services.html#StartingAService)

*注意：如果您的应用程序以 API 级别 26 或更高级别为目标，系统会限制使用或创建后台服务，除非应用程序本身位于前台。如果应用需要创建前台服务，应用应该调用 startForegroundService()。该方法创建了一个后台服务，但该方法向系统发出信号，该服务将把自己提升到前台。创建服务后，服务必须在五秒内调用其 startForeground() 方法。*

因此，这些天来，您无法从 Application 启动后台服务。只有 GUI 组件能够启动后台服务。

或者，您可以从应用程序等后台组件启动前台服务。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-12T06:00:43.673

是的，您可以使用 Intent 启动您的服务，

```
Intent serviceIntent = new Intent();
serviceIntent.setAction("packagename.serviceName");
context.startService(serviceIntent); 
```

# ruby-on-rails - 我用于保存具有关系的对象的方法是否正确？

> ID：12381983
> 
> 赞同：0
> 
> 时间：2012-09-12T05:56:48.680
> 
> 标签：ruby-on-rails, ruby, activerecord

我对rails很陌生，所以这可能是一个愚蠢的问题，但我想知道我为保存具有许多关系的对象而采取的方法是否正确。

例如：以一个包含主题、帖子和用户的基本论坛应用为例。该主题有一个用户、一个论坛和许多帖子。如果用户通过表单提交标题和消息，这是在所有表中保存数据的最有效方法，还是有更简单的方法？

```
# init new topic object with forum & user relationships
@topic = Topic.new(
  :title    => params[:topic][:title], 
  :forum_id => params[:topic][:forum_id], 
  :user_id  => current_user.id
)

if @topic.save
  # init new post object with topic & user relationships
  @post = Post.new(
    :content  => params[:post][:content],
    :topic_id => @topic.id,
    :user_id  => current_user.id
  )

  if @post.save
    # update user's post count and last post info
    @user = User.find(current_user.id)
    @user.update_attributes(
      :post_count   => @user.post_count + 1,
      :last_post_at => Time.now,
      :last_post_id => @post.id
    )

    # update the forum stats and last post info
    @forum = Forum.find(@topic.forum_id)
    @forum.update_attributes (
      :topic_count  => @forum.topic_count + 1
      :last_post_id => @forum.recent_post.nil? ? 0 : @forum.recent_post.id
    )

    # redirect user back to the topic
    redirect_to topic_path(@topic.id)
end 
```

有更好的约定还是差不多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T06:15:13.670

不，这不是在 Rails 中编写代码的正确方法。根据轨道，您的控制器与模型相比应该很薄，因此您的业务逻辑进入模型而不是控制器。

检查以下评论代码

```
@user = User.find(current_user.id)
@topic = @user.build_topic(params[:topic])
@post = @topic.posts.build(:content  => params[:post][:content], :user_id  => @user.id)
if @topic.save #Don't need to save posts explicitly if any error (i.e validation fails) is occur neither post nor topic 'll get save
  # redirect user back to the topic
  redirect_to topic_path(@topic.id)
end 
```

Use callback `after_create` in your Post model i.e. post.rb to update the post counts of the user and AND callback `after_create` in your Topic model i.e. topic.rb to update the topic count of the forum.

# c++ - p2p 类型网络/编程入门

> ID：12381984
> 
> 赞同：1
> 
> 时间：2012-09-12T05:56:54.633
> 
> 标签：c++, networking, p2p

我正在学习 C++（例如，我现在正在安装 Visual Studio，我手里拿着 Horton 的书），我这样做的原因是我想编写一个 p2p 类型的客户端/服务器程序，允许用户无需端口转发即可从设备流式传输视频（并节省大量技术支持呼叫时间）。

我希望用户通过设备菜单将设备注册到家庭服务器（工程师将负责），然后在 PC 上，登录客户端并使用密码将设备添加到众所周知的设备“朋友列表”中他们在机器上使用。然后，他们可以随时打开设备并通过网络控制它，而无需端口转发。

我猜是 Skype 的工作方式。用户可以在不知道彼此的 IP 地址或转发任何端口的情况下相互传输音频/视频。

有人可以给我概述一下它是如何工作的，以及在对主服务器和客户端进行编程时需要考虑的网络注意事项吗？我什至不知道从哪里开始……我不需要编程方面的帮助，只需要通信基础设施的外观。客户端如何在 p2p 网络上发现设备并与之通信，而无需事先知道 IP 地址，或者没有任何端口可以让进入远程网络的信息或命令路由到设备？

我一直在阅读 p2p 网络，我了解 p2p 架构的基本思想，但不了解通过 p2p 进行通信的实际理论和方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T06:04:38.750

> 客户端如何在 p2p 网络上发现设备并与之通信，而无需事先知道 IP 地址，或者没有任何端口可以让进入远程网络的信息或命令路由到设备？

如果事先不知道 IP 地址或有一些已知的服务器可以连接到询问，您就无法在 Internet 上创建 p2p IP 连接。即，一方必须主动向另一方查询的某种服务器注册它自己的服务器地址和端口号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T21:28:48.317

如果您的设备仅限于在单个网络中工作，您可以使用[零配置网络](http://en.wikipedia.org/wiki/Zero_configuration_networking)来避免通过服务器进行通信。[多播 DNS](http://en.wikipedia.org/wiki/Multicast_DNS)可能是发现网络中所有设备或服务的不错选择。

如果您希望这些设备在互联网上工作，您的生活将会变得更加艰难。假设您的网络将变得很小，因此您希望每个设备都相互了解，这样您就可以从每个设备流式传输视频。您可以考虑一个集中式组件，它跟踪所有设备并愿意与其他人共享此信息。它可能是一个简单的 http 服务器，您可以在其中查询所有其他设备的地址。每个查询都会自动注册一个查询设备，所有其他设备一旦重新查询服务器就可以发现它。

这基本上就是 BitTorrent 跟踪器的工作原理。但有一个限制 - 只有允许传入连接的对等方才会保留在列表中。这是有道理的，因为关于 NAT 背后的对等点的知识非常无用，因为无论如何您都无法访问它。您只能希望它会查询跟踪器并发现您。

现在，如果两个对等点位于 NAT 后面，它们就无法相互连接。至少在 P2P 协议不太复杂的情况下。BitTorrent 不允许这样做，而 Skype 会。它可以通过通过具有公共 IP 的设备之一或通过一些专用服务器流式传输数据来解决（后者可能更糟糕，因为可扩展性较差）。

我现在就停下来......在互联网上设计这样的协议有很多问题，这取决于你*到底*需要什么。那么，您需要它在 Internet 上工作还是仅在本地网络内工作？如果您提供更多详细信息，我很乐意更深入地讨论它。

# java - 我们如何在互联网断开或用户关闭选项卡/浏览器时调用注销 servlet？

> ID：12381990
> 
> 赞同：3
> 
> 时间：2012-09-12T05:57:31.483
> 
> 标签：java, javascript, jsp, servlets

我想避免使用相同的用户名和密码同时登录，为此我在数据库中设置了一个 isloggedin 选项，如果用户登录它将变为“1”，因此使用该用户名和密码他无法再次登录，如果他打电话注销它将变为“0”，以便他可以登录。一切都很好，但是当网络断开或用户关闭选项卡时我遇到了问题。他无法登录，因为 isloggedin 设置为“1”，应该通过将其设置为一个来避免它，这意味着它应该调用 logout servlet。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T06:04:25.783

当用户关闭选项卡或浏览器时，没有技术可以肯定地通知 Web 服务器。以下技术可以帮助您在用户会话消失后终止它们。

1.  在 web.xml 中配置会话超时。
2.  将 cookie 的年龄（如果您使用任何）设置为 -1。以便在浏览器关闭时将其删除。
3.  您可能有一个 java 脚本，它定期向服务器发送一些数据（心跳），表明会话处于活动状态。（但这将使会话保持活动状态，即使用户长时间处于空闲状态）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T06:02:50.517

您应该使用 spring-security 来验证用户。除了其他好处外，您还可以控制允许多少并发登录，请参阅“并发会话控制”：[http ://static.springsource.org/spring-security/site/docs/3.0.x/reference /ns-config.html](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/ns-config.html) 这样，一旦用户将会话无效（通过使用注销操作）或关闭浏览器页面（您甚至可以捕捉到它，请参阅 onbeforeunload 事件），即使会话将超时，因为它是空闲的太多的 spring-security 框架将为您处理所有情况。这样，您将不再需要维护该 db 值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T06:57:12.357

与其使用数据库标志，不如使用服务器中的列表作为全局参数并将用户名添加到其中。因此，每当用户尝试登录时，将参数添加到列表中。然后，如果用户再次尝试登录会话，请在列表中检查该用户名是否可用，如果可用则从该会话中删除。

如果使用数据库，可能会导致数据库过载。保持数据库免费

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T06:55:07.383

没有一致或 100% 可靠的方法来检测断开/关闭浏览器，它根本没有在 HTTP 协议中解决。如前所述，您可以使用 Javascript `body onunload`（

简短的回答是，您不应该将系统设计为依赖于能够检测到用户离开您的站点的时刻（断开连接/导航离开/关闭窗口），因为您不能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T06:18:58.547

您只需要在浏览器关闭时调用 javascrip 函数。您可以在那里添加逻辑来更改会话或限制用户关闭窗口。全取决于你。这是一些指导您的参考代码

```
<html><head><title>Example</title>
<script language = "JavaScript">
function abc()
{
statements...
}
</script></head>
<body ONUNLOAD = "abc()">
</html> 
```

# iphone - iOS 缓存策略

> ID：12381991
> 
> 赞同：10
> 
> 时间：2012-09-12T05:57:43.647
> 
> 标签：iphone, ios, caching, nsurlconnection, httprequest

我正在连接到 NSURL，我需要创建一个绕过所有缓存策略的请求。我见过这样的例子：

```
NSURLRequest *request = [NSURLRequest requestWithURL:baseURL cachePolicy:0 timeoutInterval:10];
self.urlConnection = [[[NSURLConnection alloc] initWithRequest:request delegate:self] autorelease]; 
```

请问缓存策略0指的是什么？尝试搜索数字代表什么，但我没有得到任何我需要的答案。谢谢！:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T06:07:30.510

你应该看看**NSURLRequestCachePolicy**枚举，这里的 0 表示 NSURLRequestUseProtocolCachePolicy，这意味着 NSURLRequest 不会每次都从服务器加载数据。

```
enum
{
   NSURLRequestUseProtocolCachePolicy = 0,
   NSURLRequestReloadIgnoringLocalCacheData = 1,
   NSURLRequestReloadIgnoringLocalAndRemoteCacheData =4,
   NSURLRequestReloadIgnoringCacheData = NSURLRequestReloadIgnoringLocalCacheData,
   NSURLRequestReturnCacheDataElseLoad = 2,
   NSURLRequestReturnCacheDataDontLoad = 3,
   NSURLRequestReloadRevalidatingCacheData = 5
};
typedef NSUInteger NSURLRequestCachePolicy 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T06:06:06.783

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html)

> NSURLRequestUseProtocolCachePolicy = 0
> 
> 指定协议实现中定义的缓存逻辑（如果有）用于特定的 URL 加载请求。这是 URL 加载请求的默认策略。

示例：如果您使用 HTTP，将评估 HTTP-Header 字段以决定是否应使用缓存。

在您的情况下，正确的政策是：

> NSURLRequestReloadIgnoringLocalCacheData

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-22T09:05:16.900

根据这篇文章：[http](http://blackpixel.com/blog/2012/05/caching-and-nsurlconnection.html) ://blackpixel.com/blog/2012/05/caching-and-nsurlconnection.html ，如果您使用的是 NSURLRequestUseProtocolCachePolicy 并且服务器不返回过期或 max-age，则默认缓存时间间隔是 6 - 24 小时。所以要小心这种情况。使用 NSURLRequestUseProtocolCachePolicy 时设置 max-age 或 expire 是更好的做法。

# java - 在solr中查询两个多值字段

> ID：12381992
> 
> 赞同：0
> 
> 时间：2012-09-12T05:57:46.773
> 
> 标签：java, apache, solr

我有一个关于 solr 查询的问题，它有两个多值字段。流它是模式的一部分：

```
<field name="attribute" type="text" indexed="true" stored="true" multiValued="true"/>
<field name="locale" type="text" indexed="true" stored="true" multiValued="true"/> 
```

它从 xml 读取数据：

```
 <docs>
    <doc>
        <id>01000</id>
        <name>product1</name>
        <price>102.5</price>        
        <attributes name="description">
          <str attribute="this is english description" locale="en_US" />
          <str attribute="this is chinese description" locale="zh_CN" />
        </attributes>
    </doc>
  </docs> 
```

问题是查询条件“q=attribute:english AND locale:en_US”或“q=attribute:english AND locale:zh_CN”可以返回此文档。

我希望只有当条件是“q=attribute:english AND locale:en_US”或“q=attribute:chinese AND locale:zh_CN”时才能返回文档，我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:23:41.807

Christian Lendel 建议的选项可行，另一个选项是加入*属性*和*语言环境*选项并将其索引为一个字符串：“en_US 这是英语描述”。然后你可以查询是这样的：

```
q=attribute:(english en_US) 
```

解决方案可能更简单或更复杂，取决于您想要实现什么。

# google-maps - 在 map.google.com 之外使用 Google Map v3 缩放动画和提示

> ID：12381993
> 
> 赞同：3
> 
> 时间：2012-09-12T05:57:51.110
> 
> 标签：google-maps, google-maps-api-3

我正在使用谷歌地图 v3，并且我按照教程了解地图的基本用法。

但是我发现我创建的地图与 map.google 中的地图完全不同。

1）缩放动画。

在map.google.com中，当我放大和缩小时，瓦片会相应地缩放，然后要加载新的瓦片，很smmoth，但是在我自己创建的地图中，没有平滑的动画飞涨。

2）缩放提示。

在 map.google.com 中，当我放大和缩小时，我可以看到这个（红色提示）：

![在此处输入图像描述](../Images/9c4c57f998fe574efd4ec8592881d61e.png)

3）地图移动的惯性。

在map.google.com中，当我快速移动地图（拖放）时，地图会有惯性，这意味着即使我放下鼠标，地图仍然会移动一定距离然后停止。而且这个距离是相当大的，但是在我创建的地图中，我几乎找不到这个惯性。

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:01:18.410

当我遇到这个问题时，我发现我忽略了在我的脚本标签中指定“版本 3”。

`src="https://maps.googleapis.com/maps/api/js?key=`...`&sensor=false"`

需要改为

`src="https://maps.googleapis.com/maps/api/js?key=`...`&sensor=false&v=3.exp"`

可能我确实使用的是版本 3，而这段代码只是将其更改为版本 3 实验性的，我不确定。

# android - 语音识别android中的错误8

> ID：12381995
> 
> 赞同：1
> 
> 时间：2012-09-12T05:58:01.940
> 
> 标签：android

即使我第一次启动我的应用程序，此代码也会在语音识别中出现错误 8..recognizer 可能很忙，但它应该至少可以工作 1 次..plz 帮助

此应用程序仅用于检测声音并给出结果..

包 com.expense；

```
import android.app.Activity;
import android.app.Dialog;

import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.speech.RecognitionListener;
import android.speech.RecognizerIntent;
import android.speech.SpeechRecognizer;
import android.util.Log;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

import java.text.DateFormat;
import java.util.ArrayList;
import java.util.Date;

public class ExpenseAppActivity extends Activity {
    /** Called when the activity is first created. */
     private SpeechRecognizer sr,sr2;
     Button add;
     String tag="events";
     ListView modeList;
     AlertDialog.Builder builder1;
     int f;
     Button view;
       private static final String TAG = "MyStt3Activity";
       //AlertDialog.Builder builder;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Log.d("rahul","in on create event");
        Log.d("rahul","lllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll");
        modeList= new ListView(this);
        builder1 = new AlertDialog.Builder(this);
        SQLiteAdapter mySQLiteAdapter;
        mySQLiteAdapter= new SQLiteAdapter(this);
        mySQLiteAdapter.openToWrite();
        f=0;
        mySQLiteAdapter.close();
        System.out.println("1");
         add=(Button)findViewById(R.id.add);
        System.out.println("2");
         view=(Button)findViewById(R.id.view);
        System.out.println("3");
        Button others=(Button)findViewById(R.id.others);
        System.out.println("4");

        sr = SpeechRecognizer.createSpeechRecognizer(this);   

        sr.setRecognitionListener(new listener());  

        Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);        
        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
        intent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE,"voice.recognition.test");

        intent.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS,5); 
             sr.startListening(intent);
             Log.i("111111","11111111");

        add.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

                //sr.cancel();

                Intent myIntent = new Intent(ExpenseAppActivity.this,
                        Add.class);

                ExpenseAppActivity.this.startActivity(myIntent);

            }
        });

    view.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Intent myIntent = new Intent(ExpenseAppActivity.this,
                        ViewDetails.class);

                ExpenseAppActivity.this.startActivity(myIntent);

            }
        });

        others.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Intent myIntent = new Intent(ExpenseAppActivity.this,
                        Others.class);

                ExpenseAppActivity.this.startActivity(myIntent);

            }
        });

      }

    public void onStart()
      {
          super.onStart();
          Log.d(tag,"In the onStart() event");

      }

    /* public void onResume()
      {
          super.onResume();

          Log.d(tag,"In the onResume() event");
      }*/
     public void onStop()
      {
          super.onStop();
          Log.d(tag,"In the onStop() eventttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttt");
          sr.stopListening();
          sr.destroy();
      }
     public void onPause()
      {
          super.onPause();
          Log.d(tag,"In the onPause() eventttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttt");
          sr.stopListening();
          sr.destroy();

      }

     public void onRestart()
      {
          super.onRestart();
          Log.d(tag,"In the onRestart() event");

          sr = SpeechRecognizer.createSpeechRecognizer(this);   

            sr.setRecognitionListener(new listener());  

            Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);        
            intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
            intent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE,"voice.recognition.test");

            intent.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS,5); 
                 sr.startListening(intent);
                 Log.i("111111","11111111");
      }
     public void onDestroy()
      {
          super.onDestroy();
          Log.d(tag,"In the onDestroy() event");
      }

    class listener implements RecognitionListener          
    {
             public void onReadyForSpeech(Bundle params)
             {
                      Log.d(TAG, "onReadyForSpeech");
                     // mText5.setText("hi");
             }
             public void onBeginningOfSpeech()
             {
                      Log.d(TAG, "onBeginningOfSpeech");
                      //mText2.setText("1");
             }
             public void onRmsChanged(float rmsdB)
             {
                      Log.d(TAG, "onRmsChanged");
                      //mText3.setText("2");
             }
             public void onBufferReceived(byte[] buffer)
             {
                      Log.d(TAG, "onBufferReceived");
                      //mText4.setText("3");
             }
             public void onEndOfSpeech()
             {
                      Log.d(TAG, "onEndofSpeech");
             }
             public void onError(int error)
             {
                      Log.d(TAG,  "error " +  error);
                      add.setText("error " + error);
                      if(error==8)
                      {
                           func();  
                      }
             }
             public void onResults(Bundle results)                   
             {
                      String str = new String();

                      Log.d(TAG, "onResults " + results);
                      ArrayList data = results.getStringArrayList(SpeechRecognizer.RESULTS_RECOGNITION);
                      final String dat[]=new String[data.size()];
                      for (int i = 0; i < data.size(); i++)
                      {

                                Log.d(TAG, "result " + data.get(i));
                                dat[i]=(String) data.get(i);
                                str += data.get(i);
                      }

                      for(int i=0;i<data.size();i++)
                      {
                          if(dat[i].equalsIgnoreCase("add")|| dat[i].equalsIgnoreCase("view")|| dat[i].equalsIgnoreCase("others"))
                          {
                              f=1;
                              break;
                          }
                          else
                          {
                              f=0;
                          }
                      }

                      if(f==0)
                      {
                          func();
                          view.setText(Integer.toString(f));
                      }

                      for(int i=0;i<data.size();i++)
                      {
                          if(dat[i].equalsIgnoreCase("add"))
                          {
                              Intent myIntent = new Intent(ExpenseAppActivity.this,
                                    Add.class);

                            ExpenseAppActivity.this.startActivity(myIntent);

                          }

                          else if(dat[i].equalsIgnoreCase("view"))
                          {
                              Intent myIntent = new Intent(ExpenseAppActivity.this,
                                    ViewDetails.class);

                            ExpenseAppActivity.this.startActivity(myIntent);
                          }
                      }

                    // func(dat);
                     // mText.setText("results: "+String.valueOf(data.size()));  
                     /* builder.setTitle("Pick a color");

                     builder.setItems(dat, new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int item) {
                                Toast.makeText(getApplicationContext(), dat[item], Toast.LENGTH_SHORT).show();
                            }
                        });*/
                        //AlertDialog alert = builder.create();
                      add.setText("results: "+str);  
                      //mText2.setText(dat[0]);
             }
             public void onPartialResults(Bundle partialResults)
             {
                      Log.d(TAG, "onPartialResults");
             }
             public void onEvent(int eventType, Bundle params)
             {
                      Log.d(TAG, "onEvent " + eventType);
             }

}

   /* void func(String dat[])
    {
         ArrayAdapter<String> modeAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1,dat);

   Log.d("rahul","1");
         modeList.setAdapter(modeAdapter);
Log.d("rahul","2");
        builder1.setView(modeList);
        Log.d("rahul","3");
        final Dialog dialog = builder1.create();

        dialog.show();
    }*/

   void func()
    {
         sr2 = SpeechRecognizer.createSpeechRecognizer(this);   

         sr2.setRecognitionListener(new listener());  

         Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);        
         intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
         intent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE,"voice.recognition.test");

         intent.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS,5); 
              sr2.startListening(intent);
              Log.i("111111","11111111");

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-06T20:57:52.373

不创建`SpeechRecognozer`by s的新实例`r2 = SpeechRecognizer.createSpeechRecognizer(this);`需要一直只保留一个实例

# dynamics-crm-2011 - 使用已保存视图的安全性

> ID：12381998
> 
> 赞同：0
> 
> 时间：2012-09-12T05:58:10.080
> 
> 标签：dynamics-crm-2011

Dynamics CRM 中定义了一个自定义实体，**实体 E**。实体 E 包含两种条目：公开可见的条目（种类**PUBLIC**）和私有条目（种类**PRIVATE**）。

**允许CRM 用户**从 E 中检索这两种条目。另一方面，**站点 A**（面向互联网）的用户只允许检索 E 的 PUBLIC 子集。

以下步骤可以吗？

*   为实体 E 创建一个保存的视图，名为 PUBLIC_E_VIEW
*   创建一个对 PUBLIC_E_VIEW 具有读取权限的安全角色
*   将该安全角色分配给用户，用户 X。
*   来自站点 A 的所有请求都将使用“模拟”(X) 针对 crm Web 服务执行。

先感谢您 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:56:42.253

不，我不认为这会达到你想要的。

Web 服务调用不尊重用户的视图。例如，PUBLIC_E_VIEW 未在 Web 服务调用中使用。

要使 PUBLIC_E_VIEW 工作，用户 X 需要对 E 的读取权限。这意味着任何 Web 服务都将返回用户 X 可以看到的每个 E 记录——在这种情况下是所有记录。

例如，我认为在您需要使用业务部门来分离数据的情况下。

*   两个业务单元 Private 和 Public，公共和私人用户分配给每个
*   私有是公共的父级
*   所有私人用户都可以在其业务单元和子业务单元中读取 E
*   所有公共用户都可以在其业务单元中阅读 E
*   将所有公共和私人 E 记录分配给正确的用户

这意味着当您在公共单元中冒充 X 时，您将不会在私有单元中返回记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:55:52.957

由于您的术语不清楚，我可能误解了您的问题。

> 实体 E 包含两种条目：公开可见的条目……和私人条目。

您的意思是您的“实体 E”（CRM 实体定义）包含可公开访问的*属性*和私有*属性*（**这是我假设的**）还是您的意思是“实体 E”类型的某些*记录*是公开的并且一些私人的？

* * *

我建议您调查 CRM 2011“[现场级安全](http://msdn.microsoft.com/en-us/library/gg309608.aspx)”(FLS) 概念。这允许您保护字段的子集并使其仅对特定用户可用（即它**不**绑定到角色）。这种安全性适用于 CRM 视图和表单，因此它应该适合您的场景，即所有基于 Web 的请求都来自模拟用户。

FLS 确实会对性能产生影响。在大容量场景中，您可能会考虑将“私有”属性移动到新实体，将其与原始公共实体相关联，并单独保护对私有实体的访问。