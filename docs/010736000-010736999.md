# StackOverflow 问答 10736000-10736999

# php - php正则表达式排除

> ID：10736001
> 
> 赞同：0
> 
> 时间：2012-05-24T10:50:12.120
> 
> 标签：php, regex

我用它来清除字体标签中的 html：

```
$html = '<font class="textmiddle" color="red">toto</font>' ;
$clean = preg_replace('/<font[^>]*>/', '', $html) ;
$clean = preg_replace('/<\/font>/', '', $clean) ; 
```

它就像一个魅力。

但是，当 html 字符串是：

```
$html = '<font class="textmiddle" color="<%= color.importanttext %>">toto</font>' ; 
```

那么结果不是预期的：

```
">toto 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:04:10.340

尝试

```
<?php
    $html = '<font class="textmiddle" color="<%= color.importanttext %>">toto</font>' ;
    $clean = preg_replace('/<font\s.*">/SimU', '', $html) ;
    echo $clean;
?> 
```

但请注意你得到

```
toto</font> 
```

在输出中。

# c# - 使用复选框在 GridView 中显示存储过程的结果

> ID：10736004
> 
> 赞同：3
> 
> 时间：2012-05-24T10:50:17.273
> 
> 标签：c#, asp.net, .net, asp.net-mvc

我需要在带有复选框的网格视图中显示存储过程的结果。但是我的结果集没有绑定到 gridview，因为我正在处理现有的门户，该门户已将连接字符串内置为 dll。这是我的代码..

```
protected void Go_Rgn_Click(object sender, EventArgs e)
{
    SecurityController SC = new SecurityController();
    plhTable.Visible = true;
    plhChoose.Visible = false;
    plhForm.Visible = false;
    string Rgn = afRgn.Text;
    DataTable dt = new DataTable();

    dt=SC.BindGridView(Rgn);
    if (dt.Rows.Count > 0)
    {
        gvAll.DataSource = dt;
        gvAll.DataBind();
    }
} 
```

编译器会抛出一个错误

> 无法将类型 void 转换为 System.Data.DataTable

请就此给我建议。

**数据访问层：**

```
public DataTable BindGridView(string rgn)
{
    string spdName = "spd_get_default_region";
    DbCommand cmd = DB.GetStoredProcCommand(spdName);
    DB.AddInParameter(cmd, "Rgn", DbType.String, rgn);
    return  DB.ExecuteNonQuery(cmd);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:53:08.217

当预期的输出是数据表时，您试图返回一个 void：

错误在行：

```
return  m_WorkoutPortal_DB.ExecuteNonQuery(cmd); 
```

ExecuteNonQuery 不返回数据表

编辑：

```
public DataTable BindGridView(string rgn)
{
    string spdName = "spd_get_default_region";

    DbCommand cmd = m_WorkoutPortal_DB.GetStoredProcCommand(spdName);
    m_WorkoutPortal_DB.AddInParameter(cmd, "Rgn", DbType.String, rgn);

    SqlDataAdapter da = new SqlDataAdapter(cmd); // Create a SQL Data Adapter and assign it the cmd value. 

    DataTable dt = new DataTable(); // Create a new Data table
    da.Fill(dt); // Fill the data table with the results from the query

    return dt; // return the data table
 }

protected void Go_Rgn_Click(object sender, EventArgs e)
{
  SecurityController SC = new SecurityController();
  plhTable.Visible = true;
  plhChoose.Visible = false;
  plhForm.Visible = false;
  string Rgn = afRgn.Text;

  gvAll.DataSource = SC.BindGridView(Rgn);
  gvAll.DataBind();
} 
```

# windows - Log4net 无法写入事件日志，只能创建文件

> ID：10736006
> 
> 赞同：-1
> 
> 时间：2012-05-24T10:50:20.197
> 
> 标签：windows, log4net

在本地机器 log4net 写入事件日志，在服务器上它只创建文件但它不写它。
它不能是权限，因为它会创建文件......

有什么建议吗？

```
<configSections>
   <section name="log4net" type="log4net.Config.Log4NetConfigurationS``ectionHandler,log4net"/>
   <section name="activerecord" type="Castle.ActiveRecord.Framework.Config.ActiveRecordSectionHandler, Castle.ActiveRecord"/>
</configSections>

<log4net>
    <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
            <file value="C:\Logs\Services"/>
            <appendToFile value="true"/>
            <staticLogFileName value="false"/>
            <rollingStyle value="Composite"/>
            <datePattern value="yyyyMMdd.lo\g"/>
            <maxSizeRollBackups value="5"/>
            <maximumFileSize value="100MB"/>
            <layout type="log4net.Layout.PatternLayout">
                    <conversionPattern value="%newline %date [%thread] %-5level %logger - %message%newline"/>
           </layout>
    </appender>
    <root>
          <!-- priority value can be set to ALL|INFO|WARN|ERROR -->
      <level value="ALL"/>
      <appender-ref ref="RollingLogFileAppender"/>
      </root>
</log4net> 
```

编辑：我可以给你更多信息

在 LOG4NET 的 DEBUG MODE 上它写在服务器上，我可以看到所有的 DEBUG LOG

并以这些行结束

```
log4net: Type = [3], r0 = [19700101.log], r1 = [19700102.log]  
log4net: curSizeRollBackups starts at [0]  
log4net: reated Appender [RollingLogFileAppender]  
log4net: Adding appender named [RollingLogFileAppender] to logger [root]  
log4net: Hierarchy Threshold []  
log4net: Shutdown called on Hierarchy [log4net-default-repository] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:12:59.673

除非您发布了错误的配置，否则您没有任何 EventLogAppender。

尝试添加：

```
<log4net>
 <appender name="eventlog" type="log4net.Appender.EventLogAppender">
  <param name="ApplicationName" value="yourappname" />
  <param name="LogName" value="yourlognameoneventlog" />
  <param name="Threshold" value="all" />
  <layout type="log4net.Layout.PatternLayout">
    <param name="ConversionPattern" value="%m%n" />
  </layout>
 </appender>

 <root>
      <!-- priority value can be set to ALL|INFO|WARN|ERROR -->
  <level value="ALL"/>
  <appender-ref ref="RollingLogFileAppender"/>
  <appender-ref ref="eventlog" />
 </root>
</log4net> 
```

并根据您的需要更改“ApplicationName”和“LogName”值。

# ms-access - Access 2007：可以使用“按示例查询”创建此查询吗？

> ID：10736007
> 
> 赞同：0
> 
> 时间：2012-05-24T10:50:20.497
> 
> 标签：ms-access, ms-access-2007, query-by-example

## 我确定我可以在 VBA 中编写它，但问题是：我可以在 Access 2007 的 Query By Example 中执行此操作吗？那些将维护我的工作的人比 VBA 更熟悉 Query By Example。

**要求**：

我有两个表，一个表头表和一个明细表

```
Table: Header 
  Field: HeaderID - Primary Key

Table: Detail 
  Field DetailID - Primary Key
  Field HeaderID - Foreign Key
  Field Property (string)
  Field PropertyDescription (string) 
```

**输出要求：** 要求以以下格式将数据输出到 Excel 电子表格：每个标题需要单行。

```
Column 1: HeaderID
Column 2: Property1
Column 3: PropertyDescription1
Column 4: Property2
Column 5: PropertyDescription2
(and so on... Two columns for each Detail record) 
```

约束：每个标题记录有 1 到 19 个详细记录。因此，每行将有 3 到 39 个非空白列。

我尝试过使用交叉表查询，但我不能完全让交叉表查询满足这个要求。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:59:04.370

I reckon you would need two crosstab queries to do this in QBE. The two crosstabs, one for descriptions and one for properties, could then be joined on the ID and the various columns could be selected.

# asp.net - 为什么在我的 aspx 页面中使用 Linq 之前不需要添加 <%@ Import namespace="System.Linq" %>

> ID：10736008
> 
> 赞同：0
> 
> 时间：2012-05-24T10:50:21.570
> 
> 标签：asp.net, linq

客户在我们的 Web 应用程序中遇到错误 - 完整的堆栈跟踪位于底部，但异常消息是

```
 System.Web.HttpParseException (0x80004005): e:\inetpub\wwwroot\Application\Mycontrol.ascx(19): error CS1061: 'System.Collections.Generic.IList<MyClass>' does not contain a definition for 'ToArray' and no extension method 'ToArray' accepting a first argument of type 'System.Collections.Generic.IList<MyClass>' could be found (are you missing a using directive or an assembly reference?) 
```

果然，标记中有这样的代码

```
 <%# MyList.ToArray() %> 
```

并且页面顶部没有要导入的导入指令`System.Linq`。所以我可以看到异常来自哪里，但是（以经典的开发人员风格）它可以在我的机器上运行！它也适用于已安装该软件的所有其他服务器。

我仔细检查了`web.config`它是否不包括`System.Linq`使用 system.web/pages/namespaces 元素（我还检查了 applicationHost.config）。`.Linq`两个文件中 都没有提及。

**编辑#1**

作为快速检查，我在 VisualStudio 中创建了一个新的 .Net 4 Web 应用程序。
香草 web.config 没有提到`System.Linq`或`System.Core.dll`. （我的 applicationHost.config 或 machine.config 文件也没有）。

我将这段 linq 代码添加到 Default.aspx

```
<%= new[] {"harp", "plinth", "uncanny", "donkey"}.ToArray().Count() %> 
```

不添加任何导入指令。我在屏幕上看到了“4”——这意味着正确的 linq 代码正在运行。

因此，不知何故 System.Core.dll 被包含作为参考，并且`System.Linq`在此页面的编译期间正在导入命名空间（显然是魔术！）

**编辑#2**

我们的支持人员刚刚报告说，添加

```
 <%@ Import namespace="System.Linq" %> 
```

进入错误页面可以解决问题。所以我得出的结论是，问题仅限于`System.Linq`命名空间没有在客户的机器上“自动”导入（因为它在我的和其他所有机器上），并且与 System.Core.dll 在期间不可用没有任何关系页面编译。

所以我的问题是双重的 - 有人可以解释为什么它可以在我的机器上运行以及为什么它可能会在客户的机器上失败。

```
 System.Web.HttpParseException (0x80004005): e:\inetpub\wwwroot\Application\Mycontrol.ascx(19): error CS1061: 'System.Collections.Generic.IList<MyClass>' does not contain a definition for 'ToArray' and no extension method 'ToArray' accepting a first argument of type 'System.Collections.Generic.IList<MyClass>' could be found (are you missing a using directive or an assembly reference?) ---> System.Web.HttpCompileException (0x80004005): e:\inetpub\wwwroot\Application\Mycontrol.ascx(19): error CS1061: 'System.Collections.Generic.IList<MyClass>' does not contain a definition for 'ToArray' and no extension method 'ToArray' accepting a first argument of type 'System.Collections.Generic.IList<MyClass>' could be found (are you missing a using directive or an assembly reference?)
   at System.Web.Compilation.BuildManager.PostProcessFoundBuildResult(BuildResult result, Boolean keyFromVPP, VirtualPath virtualPath)
   at System.Web.Compilation.BuildManager.GetBuildResultFromCacheInternal(String cacheKey, Boolean keyFromVPP, VirtualPath virtualPath, Int64 hashCode, Boolean ensureIsUpToDate)
   at System.Web.Compilation.BuildManager.GetVPathBuildResultFromCacheInternal(VirtualPath virtualPath, Boolean ensureIsUpToDate)
   at System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   at System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   at System.Web.Compilation.BuildManager.GetVPathBuildResult(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean ensureIsUpToDate)
   at System.Web.UI.BaseTemplateParser.GetReferencedType(VirtualPath virtualPath, Boolean allowNoCompile)
   at System.Web.UI.BaseTemplateParser.GetUserControlType(VirtualPath virtualPath)
   at System.Web.UI.MainTagNameToTypeMapper.ProcessUserControlRegistration(UserControlRegisterEntry ucRegisterEntry)
   at System.Web.UI.BaseTemplateParser.ProcessDirective(String directiveName, IDictionary directive)
   at System.Web.UI.TemplateParser.ParseStringInternal(String text, Encoding fileEncoding)
   at System.Web.UI.TemplateParser.ProcessException(Exception ex)
   at System.Web.UI.TemplateParser.ParseStringInternal(String text, Encoding fileEncoding)
   at System.Web.UI.TemplateParser.ParseString(String text, VirtualPath virtualPath, Encoding fileEncoding)
   at System.Web.UI.TemplateParser.ParseFile(String physicalPath, VirtualPath virtualPath)
   at System.Web.UI.TemplateParser.Parse()
   at System.Web.Compilation.BaseTemplateBuildProvider.get_CodeCompilerType()
   at System.Web.Compilation.BuildProvider.GetCompilerTypeFromBuildProvider(BuildProvider buildProvider)
   at System.Web.Compilation.BuildProvidersCompiler.ProcessBuildProviders()
   at System.Web.Compilation.BuildProvidersCompiler.PerformBuild()
   at System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)
   at System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   at System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   at System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound)
   at System.Web.Compilation.BuildManager.CreateInstanceFromVirtualPath(VirtualPath virtualPath, Type requiredBaseType, HttpContext context, Boolean allowCrossApp)
   at System.Web.UI.PageHandlerFactory.GetHandlerHelper(HttpContext context, String requestType, VirtualPath virtualPath, String physicalPath)
   at System.Web.HttpApplication.MapHttpHandler(HttpContext context, String requestType, VirtualPath path, String pathTranslated, Boolean useAppConfig)
   at System.Web.HttpApplication.MapHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

# mvvm-light - ISInDesignMode 属性无法正常工作

> ID：10736014
> 
> 赞同：-1
> 
> 时间：2012-05-24T10:50:43.020
> 
> 标签：mvvm-light

在 VS 或 Blend 中运行解决方案时，我遇到了属性 IsInDesignMode 未返回预期值 true 的问题。我的环境由 Win Server 2008 R2、VS2010 Pro、Blend 4 和 MVVM Light V3 组成。我从 VS 和 Blend 在调试模式下运行我的 Silverlight 4 解决方案，而 IsInDesignMode 总是错误的。我错过了一个设置吗？它可能无法适应环境是否有原因？提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-24T10:51:34.330

它应该可以正常工作。我知道 IsInDesignMode 返回错误值的唯一地方是在使用它构建在 Visual Studio 中运行的代码时，例如 VS 插件。这是一个非常难以解决的问题。这听起来不像是你在做什么，虽然......

你有我可以测试的复制品吗？或者，您可以下载 MVVM Light 代码并进行调试吗？

# scroll - 渲染 Backbone 视图后滚动到底部

> ID：10736020
> 
> 赞同：3
> 
> 时间：2012-05-24T10:51:02.490
> 
> 标签：scroll, backbone-views

我目前正在使用 Backbone 开发一个消息传递系统。我想在渲染时滚动到 CollectionView 中的最后一个元素。

单击页面上的链接后，我可以让它工作，但我希望它发生在视图的渲染上。

这是我在链接中使用的，它有效：

```
document.getElementById('message-new-conversation-dialog').scrollIntoView(); 
```

这是视图定义：

```
var ConversationView = LSmixBB.CollectionView.extend({

        itemView: MessageView,
        template: "#message-conversation-template",
        onRender: function(){
            document.getElementById('message-new-conversation-dialog').scrollIntoView();
            document.getElementById('global-column-middle-footer1').scrollIntoView();
        }

    }); 
```

我认为它不起作用，因为 onRender 内的页面上没有任何内容？

我对网络开发很陌生，所以要温柔！

无论如何，我真的很感激任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T00:45:05.793

如果您使用 Backbone，您可以访问 Underscore 的 _defer 函数：[http ://underscorejs.org/#defer](http://underscorejs.org/#defer)

这将等到所有 DOM 操作完成，然后函数将执行，如果您需要对调用者的内部引用，您可以`this`传入

```
_.defer(function(caller){
      //caller is now a reference to the scope where you declared this
}, this); 
```

当我有需要异步创建子视图的视图时，我会使用它，但是这些子视图需要在 DOM 中呈现父视图。如果您可以完全控制子视图，那么最好使用某种类型的回调。

> 注意：你也可以在元素上使用 jQuery 的 .ready 函数，但我还没有玩过，虽然在某些情况下它可能是一个更好的解决方案，因为 _defer 基本上等到调用堆栈完成执行

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T16:34:18.360

万一有人觉得这很有用，我最终使用了超时，这很有效。因此，您可以编写一个使用 scrollIntoView 但延迟 200 毫秒的函数来运行该函数以允许页面呈现。

因为我在这个视图中渲染了一个集合，所以项目没有在 onRender 中渲染。

可能有更好的方法来做到这一点，但到目前为止我还没有找到一个！

# ios - 安装到 iPad 时出现奇怪的崩溃

> ID：10736021
> 
> 赞同：1
> 
> 时间：2012-05-24T10:51:02.837
> 
> 标签：ios, ipad, ios5, titanium

我开发了一个 iPad 应用程序，它在模拟器中运行良好，但是当我尝试在设备上安装它时，它崩溃了`Segmentation fault: 11`

以下是 Titanium 环境详细信息：

**应用类型**：手机

**钛 SDK** : 1.8.3 (04/18/12 10:48 6c2fca1)

**平台和版本**：iOS 5.0

**设备**：物理 iPad 设备（使用 iOS 5.0.1 (9A405)）

**主机操作系统**：OSX 10.6.8

**钛工作室**：2.0.1

我仍然无法调试此问题，因为 Titanium 控制台中没有显示任何日志/错误，它只是没有安装。

当我尝试通过 XCode 安装它时，这就是我在管理器控制台中得到的`Segmentation fault: 11`

```
May 24 03:44:43 unknown kernel[0] <Debug>: lockbot[2021] Builtin profile: gputoolsd (sandbox)
May 24 03:44:44 unknown ReportCrash[2027] <Notice>: Formulating crash report for process installd[2025]
May 24 03:44:44 unknown mobile_installation_proxy[2026] <Error>: handle_install: Installation failed
May 24 03:44:44 unknown com.apple.launchd[1] <Warning>: (com.apple.mobile.installd) Job appears to have crashed: Segmentation fault: 11
May 24 03:44:44 unknown ReportCrash[2027] <Error>: Saved crashreport to /var/mobile/Library/Logs/CrashReporter/xxxx using uid: 0 gid: 0, synthetic_euid: 501 egid: 0 
```

XCode 还会提示

```
"There was an internal API error." 
```

**更新**

这不是证书错误，因为它使用 XCode 成功构建。该错误仅在安装时出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:44:15.570

我用 ios-sim 提出了一个错误。如果没有人事先做，我会在以后修复自己

[https://github.com/phonegap/ios-sim/issues/25](https://github.com/phonegap/ios-sim/issues/25)

# java - 如何从数据库值预填充struts2中的表单

> ID：10736022
> 
> 赞同：0
> 
> 时间：2012-05-24T10:51:03.063
> 
> 标签：java, html, struts2

我想显示一个编辑表单，用户可以在其中更改其旧数据。所以我想用从数据库中提取的值预先填充表单？

请告诉我如何在struts2中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:51:48.127

> 此拦截器在实现 Preparable 的操作上调用 prepare()。对于需要确保某些逻辑在实际执行方法运行之前运行的任何情况，此拦截器都非常有用。

[可准备拦截器](http://struts.apache.org/2.3.3/docs/prepare-interceptor.html)

示例： [类似于预填充逻辑的 Struts2 UI 标签。](http://www.vaannila.com/struts-2/struts-2-example/struts-2-ui-tags-example-1.html)

```
package com.examples;
public class RegistrationAction extends ActionSupport implements Preparable {

    @Override
    public void prepare() throws Exception {
        // get the data that you want to pre-populate
    }

    public String execute() {
        // you action logic
        return SUCCESS;
    }

}

<!-- Calls the params interceptor twice, allowing you to pre-load data for the second time parameters are set -->
<!-- don't forgot to add prepare interceptor to interceptor stack -->
 <action name="someAction" class="com.examples.RegistrationAction">
     <interceptor-ref name="params"/>
     <interceptor-ref name="prepare"/>
     <interceptor-ref name="basicStack"/>
     <result name="success">good_result.ftl</result>
 </action> 
```

# sql - 如何删除前导零

> ID：10736027
> 
> 赞同：-1
> 
> 时间：2012-05-24T10:51:21.300
> 
> 标签：sql, sql-server, sql-server-2000

使用 SQL Server 2000

表格1

```
ID column1 column2  (datatype is nvarchar)

001 08.50 17.50
002 17.20 16.52
003 09.50 01.00
.... 
```

我想从 table1 中删除零，例如 8.5 17.5 ....

预期输出

```
ID column1 column2 

001 8.5 17.5
002 17.2 16.52
003 9.5 1
.... 
```

这个怎么做。

需要 Sql 查询帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T10:55:39.077

重新设计数据库，使列的类型适合其中包含的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T11:01:09.827

例子：

```
select cast (017.50 as float) 
```

你应该使用浮点数，因为如果你使用数字，它需要一个比例，如果比例大于数字的比例，它不会删除结尾的零。例如：

```
select cast (017.50 as numeric(10,2)) = 17.50 
```

如果你这样做`10,1`，它会像 16.52 这样四舍五入，所以浮点数是最好的选择

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T10:53:15.613

执行选择时将您的列转换为编号

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T10:56:37.547

尝试这个 ：

```
 select cast(1234.20 as float   ) //1234.2
  select cast(01.00 as float ) //1  
  select cast(17.5 as float  ) //17.5   
  select cast(00.01 as float  ) //0.01  
  select cast(00.10 as float  ) //0.1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T10:57:44.503

you could always get the values with php and `trim()` the zero's and commas out then update your sql

that is if for some reason you cannot or dont want to change your sql's data types

# ios - 如何在 cocos2d iphone 中做出滑动手势？

> ID：10736029
> 
> 赞同：3
> 
> 时间：2012-05-24T10:51:32.087
> 
> 标签：ios, cocos2d-iphone

如何在`cocos2d`iphone/ipad 中向各个方向进行滑动手势？当滑动触摸（通过）一个精灵时，我想在那个时候执行一个功能，就像我想在那个精灵上滑动时剪切那个对象一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T16:51:25.800

您应该寻找 cocos2d 和手势识别器。检查这个帖子

[cocos2d-iOS - 手势识别器](https://stackoverflow.com/questions/4985917/cocos2d-ios-gesture-recognisers)

谷歌也会提供帮助......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T16:43:12.653

`UISwipeGestureRecognizer`可能会给您带来问题，因为它只为您提供滑动开始位置的坐标（每次滑动只调用一次处理程序）。

请参阅：http: [//developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISwipeGestureRecognizer_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISwipeGestureRecognizer_Class/Reference/Reference.html)

我会用`UIPanGestureRecognizer`. 每次更新平移时（即每次滑动期间手指移动时），这都会调用处理程序。然后，您可以确定您的平移/滑动正在通过哪个精灵。

# java - 使用 Java 一次一个地发送文件

> ID：10736035
> 
> 赞同：0
> 
> 时间：2012-05-24T10:51:50.957
> 
> 标签：java, file-io

我将 java 用于我的服务器端应用程序，将 phonegap 用于我的客户端。当用户登录到我的应用程序时，我需要传输巨大的图像文件。

我将这些图像文件转换为 base64 格式并将其放入 json 对象中。当我将此 json 对象发送到客户端时，我收到 java 内存不足错误。

如何在一个请求中一个一个地发送这些图像文件，因为一次发送所有文件会导致 java 内存不足 error.pl 帮助我。

这是我的代码：

```
File folderName = new File(processingFolder+"/"+f1[i].getName());
File[] folderFiles= folderName.listFiles();

for(int m=0;m<folderFiles.length;m++)
{
 System.out.println("folderFiles are:"+folderFiles[m]);
 String s1 = new String();
 File readfile = new File(folderFiles[m].toString());
 System.out.println(readfile.exists() + "!!");

 FileInputStream fis = new FileInputStream(readfile);
 ByteArrayOutputStream bos = new ByteArrayOutputStream();

 byte[] buf = new byte[1024];
 try {
     for (int readNum; (readNum = fis.read(buf)) != -1;) {
         bos.write(buf, 0, readNum); 
         //no doubt here is 0
         /*Writes len bytes from the specified byte array starting at offset 
         off to this byte array output stream.*/
     }
 }

 catch (IOException ex) {
 }
 byte[] bytes = bos.toByteArray();

 String result2 = Base64.encode( bytes );
 json1.put(folderFiles[m].getName(), result2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T05:15:17.460

我找到了我的问题的解决方案。
我已将所有文件名以 json 格式发送到客户端。通过在客户端循环文件名，我向服务器发送请求并为每个请求获取一个文件。然后我再次在我的客户端写入该文件。

# sql - 表格一列的三个条件

> ID：10736036
> 
> 赞同：0
> 
> 时间：2012-05-24T10:51:51.580
> 
> 标签：sql, sql-server-2008, tsql

以下是示例表的脚本

```
DECLARE @tbl TABLE (ID int)
INSERT INTO @tbl VALUES(1), (2), (NULL), (3), (NULL), (1) 
```

我想要列上的三个条件`ID`

```
SELECT * FROM @tbl WHERE ID -- Can't figure out 
```

1.  如果用户想要所有行
2.  如果用户想要 ID 为 NULL 的行
3.  如果用户想要 ID 不为 NULL 的行

我可以通过将我的查询放在字符串中来做到这一点，但是在长查询中只有一个这样的条件，所以我不想将所有查询都放在字符串中。

编辑：回应@Tim Schmelter。抱歉，我无法明确表达我的观点。用户将从前端选择他/她希望所有行仅给出 ID 的行或未给出 ID 的行

在长查询中，一个条件是这样的

```
@id INT // Value from front end like 'All', 'Products', 'No Products'
WHERE ID = @ID // Here I can't figure out that how to use one of three conditions 
```

如果我仍然无法解释我的问题，请告诉我。我会再试一次。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T10:55:35.440

也许我误解了你的要求，这不是那么容易吗？

```
-- 1.) If User want all rows 
SELECT * FROM @tbl 

-- 2.) If user want rows where ID is NULL
SELECT * FROM @tbl 
WHERE ID IS NULL

-- 3.) If user want rows where ID is NOT NULL
SELECT * FROM @tbl 
WHERE ID IS NOT NULL 
```

**编辑**：所以你想使用一个参数来相应地过滤，看看：

```
SELECT * FROM @tbl 
WHERE   @FilterID = 1                      -- returns all rows
OR    ( @FilterID = 2 AND ID IS NULL)      -- returns all null-rows
OR    ( @FilterID = 3 AND ID IS NOT NULL)  -- returns all not null rows 
```

你也可以`CASE`在 where 子句中使用，虽然[不推荐](http://weblogs.sqlteam.com/jeffs/archive/2003/11/14/513.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:00:51.590

您可以向用户展示选项（例如单选按钮），然后将所选选项的值传递给数据库，例如：

```
SELECT * FROM @tbl 
WHERE 
   (@Option = 1)
   OR (@Option = 2 AND ID IS NULL)
   OR (@Option = 3 AND ID IS NOT NULL) 
```

虽然 OR 可以降低性能，但 SQL Server（或任何 RDBMS）不会短路。CASE WHEN 可以*在一定程度上*强制短路

```
SELECT * FROM @tbl 
WHERE 
   CASE @Option
   WHEN 1 THEN 1
   WHEN 2 THEN 
          CASE WHEN ID IS NULL THEN 1 END
   WHEN 3 THEN
          CASE WHEN ID IS NOT NULL THEN 1 END
   END = 1 
```

# android - 如何通过长按项目在列表视图中执行拖放项目

> ID：10736039
> 
> 赞同：1
> 
> 时间：2012-05-24T10:51:57.163
> 
> 标签：android, listview

我有`ListView`一个图像作为项目列表。现在我想在列表视图中执行拖放项目。因此，为此，我创建了一个扩展类“DragNDropListView” `ListView`，并在该类中覆盖列表视图的 onTouch() 方法并执行拖放操作，它工作正常。

但我的要求是在我的列表视图中长按图像时执行此项目的拖放操作。那么如何做到这一点。我应该像在列表视图的方法中所做的那样做同样的事情，`onTouch()`还是必须修改这个方法。

请帮我解决这个问题。

**我的代码 onTouch 方法**

```
@Override
public boolean onTouchEvent(MotionEvent ev) 
{
    final int action = ev.getAction();
    final int x = (int) ev.getX();
    final int y = (int) ev.getY();  

    if (action == MotionEvent.ACTION_DOWN) 
    {
        mDragMode = true;
    }

    if (!mDragMode) 
        return super.onTouchEvent(ev);

    switch (action) 
    {
        case MotionEvent.ACTION_DOWN:
        mStartPosition = pointToPosition(x,y);
        if (mStartPosition != INVALID_POSITION) 
        {
            int mItemPosition = mStartPosition - getFirstVisiblePosition();
            mDragPointOffset = y - getChildAt(mItemPosition).getTop();
            mDragPointOffset -= ((int)ev.getRawY()) - y;
            startDrag(mItemPosition,y);
            drag(0,y);// replace 0 with x if desired
        }   
        break;

        case MotionEvent.ACTION_MOVE:
        {
            drag(0,y);// replace 0 with x if desired
        }
        break;

        case MotionEvent.ACTION_CANCEL:             
        case MotionEvent.ACTION_UP:

        default:
        mDragMode = false;
        mEndPosition = pointToPosition(x,y);
        stopDrag(mStartPosition - getFirstVisiblePosition());
        if (mDropListener != null && mStartPosition != INVALID_POSITION && mEndPosition != INVALID_POSITION) 
             mDropListener.onDrop(mStartPosition, mEndPosition);
        break;
    }
    return true;
}   

// move the drag view
private void drag(int x, int y) 
{
    if (mDragView != null) 
    {
        WindowManager.LayoutParams layoutParams = (WindowManager.LayoutParams) mDragView.getLayoutParams();
        layoutParams.x = x;
        layoutParams.y = y - mDragPointOffset;
        WindowManager mWindowManager = (WindowManager) getContext()
                .getSystemService(Context.WINDOW_SERVICE);
        mWindowManager.updateViewLayout(mDragView, layoutParams);

        if (mDragListener != null)
            mDragListener.onDrag(x, y, null);// change null to "this" when ready to use
    }
}

// enable the drag view for dragging
private void startDrag(int itemIndex, int y) 
{
    stopDrag(itemIndex);

    View item = getChildAt(itemIndex);
    if (item == null) return;
    item.setDrawingCacheEnabled(true);
    if (mDragListener != null)
        mDragListener.onStartDrag(item);

    // Create a copy of the drawing cache so that it does not get recycled
    // by the framework when the list tries to clean up memory
    Bitmap bitmap = Bitmap.createBitmap(item.getDrawingCache());

    WindowManager.LayoutParams mWindowParams = new WindowManager.LayoutParams();
    mWindowParams.gravity = Gravity.TOP;
    mWindowParams.x = 0;
    mWindowParams.y = y - mDragPointOffset;

    mWindowParams.height = WindowManager.LayoutParams.WRAP_CONTENT;
    mWindowParams.width = WindowManager.LayoutParams.WRAP_CONTENT;
    mWindowParams.flags = WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE
            | WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE
            | WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON
            | WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN
            | WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS;
    mWindowParams.format = PixelFormat.TRANSLUCENT;
    mWindowParams.windowAnimations = 0;

    Context context = getContext();
    ImageView v = new ImageView(context);
    v.setImageBitmap(bitmap);      

    WindowManager mWindowManager = (WindowManager)context.getSystemService(Context.WINDOW_SERVICE);
    mWindowManager.addView(v, mWindowParams);
    mDragView = v;
}

// destroy drag view
private void stopDrag(int itemIndex) 
{
    if (mDragView != null) {
        if (mDragListener != null)
            mDragListener.onStopDrag(getChildAt(itemIndex));
        mDragView.setVisibility(GONE);
        WindowManager wm = (WindowManager)getContext().getSystemService(Context.WINDOW_SERVICE);
        wm.removeView(mDragView);
        mDragView.setImageDrawable(null);
        mDragView = null;
    }
} 
```

**用于监听器**

```
 ListView listView = getListView();

    if (listView instanceof DragNDropListView) 
    {
        ((DragNDropListView) listView).setDropListener(mDropListener);
        ((DragNDropListView) listView).setRemoveListener(mRemoveListener);
        ((DragNDropListView) listView).setDragListener(mDragListener);
    }

private DropListener mDropListener = new DropListener() 
{
    public void onDrop(int from, int to) 
    {
        ListAdapter adapter = getListAdapter();
        if (adapter instanceof ListViewAdapter) 
        {
            ((ListViewAdapter)adapter).onDrop(from, to);
            getListView().invalidateViews();
        }
    }
};

private RemoveListener mRemoveListener = new RemoveListener() 
{
    public void onRemove(int which) 
    {
        ListAdapter adapter = getListAdapter();
        if (adapter instanceof ListViewAdapter) {
            ((ListViewAdapter)adapter).onRemove(which);
            getListView().invalidateViews();
        }
    }
};

private DragListener mDragListener = new DragListener() 
{
    public void onDrag(int x, int y, ListView listView)
    {
    }

    public void onStartDrag(View itemView) 
    {
        itemView.setVisibility(View.INVISIBLE);
        ImageView iv = (ImageView)itemView.findViewById(R.id.image);
        if (iv != null) iv.setVisibility(View.VISIBLE);
    }

    public void onStopDrag(View itemView) 
    {
        itemView.setVisibility(View.VISIBLE);
        ImageView iv = (ImageView)itemView.findViewById(R.id.image);
        if (iv != null) iv.setVisibility(View.VISIBLE);
    }

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:56:43.053

是的，您可以简单地对您的列表视图使用一些侦听器 -

```
public interface DropListener {

/**
 * Called when an item is to be dropped.
 * @param from - index item started at.
 * @param to - index to place item at.
 */
    void onDrop(int from, int to);
} 
```

尝试查看此[示例。](http://www.ziddu.com/download/17692566/DragNDrop.zip.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-17T18:30:56.887

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    return touchHandler(event);
}

private boolean touchHandler(final MotionEvent event) {
    final int action = event.getAction();
    final int x = (int) event.getX();
    final int y = (int) event.getY();
    if (prevY < 0) {
        prevY = y;
    }
    Log.d(TAG, "Motion event " + event.getAction());
    int flatPosition = pointToPosition(x, y);
    dragRatio = getHeight() / screenHeight;
    long packagedPosition = getExpandableListPosition(flatPosition);

    if (action == MotionEvent.ACTION_DOWN
            && getPackedPositionType(packagedPosition) == 1) {
        if (dragOnLongPress) {
            if (pressedItem) {
                mDragMode = true;
                pressedItem = false;
            } else {
                pressedItem = true;
                Runnable r = new Runnable() {
                    @Override
                    public void run() {
                        // y coordinate is changing for no reason ??
                        event.setLocation(x, y);
                        touchHandler(event);
                    }
                };
                handler.postDelayed(r, 200);
                return true;
            }
        } else if (x < dragOffset) {
            mDragMode = true;
        }
    }

    if (!mDragMode) {
        /** when user action on other areas */
        if ((pressedItem && Math.abs(prevY - y) > 30)
                || event.getAction() != MotionEvent.ACTION_MOVE) {
            pressedItem = false;
            handler.removeCallbacksAndMessages(null);
        }
        return super.onTouchEvent(event);
    }
    switch (action) {
    case MotionEvent.ACTION_DOWN:
        mStartFlatPosition = flatPosition;
        mStartPosition[0] = getPackedPositionGroup(packagedPosition);
        mStartPosition[1] = getPackedPositionChild(packagedPosition);
        if (packagedPosition != PACKED_POSITION_VALUE_NULL) {

            int mItemPosition = flatPosition - getFirstVisiblePosition();
            mDragPointOffset = y - getChildAt(mItemPosition).getTop();
            mDragPointOffset -= ((int) event.getRawY()) - y;
            startDrag(mItemPosition, y);
            if (listeners != null) {
                listeners.onPick(mStartPosition);
            }
            drag(x, y);
        }
        break;
    case MotionEvent.ACTION_MOVE:
        int speed = (int) ((y - prevY) * dragRatio);
        if (getLastVisiblePosition() < getCount() && speed > 0) {
            smoothScrollBy(speed, 1);
        }
        if (getFirstVisiblePosition() > 0 && speed < 0) {
            smoothScrollBy(speed, 1);
        }
        drag(x, y);// replace 0 with x if desired
        if (listeners != null) {
            listeners.onDrag(x, y);
        }
        break;
    case MotionEvent.ACTION_CANCEL:
    case MotionEvent.ACTION_UP:
    default:

        mDragMode = false;
        if (getPackedPositionType(packagedPosition) == 0) {
            mEndPosition[0] = getPackedPositionGroup(packagedPosition);
            mEndPosition[1] = 0;
        } else {
            mEndPosition[0] = getPackedPositionGroup(packagedPosition);
            mEndPosition[1] = getPackedPositionChild(packagedPosition);
        }

        stopDrag(mStartFlatPosition);
        if (packagedPosition != PACKED_POSITION_VALUE_NULL) {
            if (adapter != null) {
                adapter.onDrop(mStartPosition, mEndPosition);
            }
            if (listeners != null) {
                listeners.onDrop(mStartPosition, mEndPosition);
            }
        }
        break;
    }
    prevY = y;
    return true;
} 
```

[在这里](https://github.com/sreekumarsh/android/tree/master/Drag%20N%20Drop)长按检查拖放可扩展列表视图，您可以修改它并将其实现到列表视图

# java - android布局固定大小

> ID：10736042
> 
> 赞同：-1
> 
> 时间：2012-05-24T10:52:05.143
> 
> 标签：java, android

我有下一个 xml 代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" 
        android:layout_weight=".10">
        <TextView 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="#aa0000"
            android:text="top"/>    

    </LinearLayout>
    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" 
        android:layout_weight=".70">

        <ScrollView 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="#00aa00">
            <LinearLayout 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical">
                <TextView 

                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"            
                    android:textSize="50pt"
                    android:text="center">
                </TextView>
                <TextView 

                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"            
                    android:textSize="50pt"
                    android:text="center">
                </TextView>
                <TextView 

                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"            
                    android:textSize="50pt"
                    android:text="center">
                </TextView>
                <TextView 

                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"            
                    android:textSize="50pt"
                    android:text="center">
                </TextView>
                <TextView 

                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"            
                    android:textSize="50pt"
                    android:text="center">
                </TextView>
            </LinearLayout>
        </ScrollView>
    </LinearLayout>    
    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" 
        android:background="@android:color/white"
        android:layout_weight=".20">

        <TextView 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="#0000aa"
            android:text="bottom"/> 
       </LinearLayout>        

</LinearLayout> 
```

在主要的线性布局中，我有三个线性布局。对于第一个 LinearLayout，我需要设置 100px。对于第三个 LinearLayout，我需要设置 200px。以及第二个 LinearLayout 的所有其他尺寸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:02:48.063

不建议在 Android 中使用固定大小，因为它可能会破坏您在不同屏幕分辨率下的布局。您应该使用`android:layout_weight`来定义这种类型的屏幕比例。最后，不要使用 px 来定义布局大小，不要使用 pt 来定义文本大小，分别使用 dp 和 sp。

# c++ - 将 std::tr1 导入 std - 合法吗？它是否提高了便携性？

> ID：10736046
> 
> 赞同：14
> 
> 时间：2012-05-24T10:52:11.617
> 
> 标签：c++, compatibility, tr1

我有如下所示的 C++03 代码：

```
#include <boost/tr1/unordered_map.hpp>
...
std::tr1::unordered_map<std::string, int> mystuff;
... 
```

我开始怀疑如果/当我将我的代码转换为 C++11 时，我以后会受苦，（我猜）C++11 没有，`std::tr1::unordered_map`而是有`std::unordered_map`。所以我想出了以下技巧：

```
namespace std
{
    using namespace ::std::tr1;
}
...
std::unordered_map<std::string, int> mystuff; // no tr1 now!
... 
```

合法吗（也许禁止进口东西`std`）？它会让移植/与 C++11 代码互操作变得更容易吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-24T10:55:53.020

你不应该接触`std`命名空间：即使它现在可以工作，它也会在以后引起严重的头痛（使用新版本的编译器，在不同的编译器上，等等）。

更新：引用标准（C++ 2003，第 17.4.3.1 节“保留名称”）（在[此处](https://www.securecoding.cert.org/confluence/display/cplusplus/MSC34-CPP.+Do+not+modify+the+standard+namespace)找到）：

> 除非另有说明，否则C++ 程序**将声明或定义添加到命名空间 std**或命名空间 std 内的命名空间是**未定义的。**程序可以将任何标准库模板的模板特化添加到命名空间 std。标准库模板的这种特化（完全或部分）会导致未定义的行为，除非声明依赖于用户定义的外部链接类型，并且除非特化满足原始模板的标准库要求。[强调我的]

 *** * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-24T11:13:51.943

`::std`C++11 17.6.4.2.1 禁止将内容导入：

> `std`如果 C++ 程序将声明或定义添加到命名空间或命名空间内的命名空间，则 C++ 程序的行为是未定义的，`std`除非另有说明。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T11:15:27.880

我认为[这个问题](https://stackoverflow.com/questions/7095556/how-to-handle-evolving-c-std-namespace-e-g-stdtr1shared-ptr-vs-std)与你所问的非常相似。

特别是，我喜欢“使用 autoconf 来检测符号可用性，然后使用条件定义为具有给定名称的正确命名空间的别名”的答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T11:35:59.837

仅当您有证据证明您无法以更清晰的方式支持特定库时才应尝试这种可移植性，并且理想情况下，您应该用`#ifdef`特定于该特定环境的 s 围绕它。

的重点`tr1`是将您`std`与`tr1`.**

# java - Spring中单例bean的引用

> ID：10736049
> 
> 赞同：0
> 
> 时间：2012-05-24T10:52:17.813
> 
> 标签：java, spring, jakarta-ee, web-applications, application-singleton

我是 Spring 的新手，因此如果问题似乎微不足道，请提前道歉。

当我在春天声明一个 bean 时，它默认是单例的。当 spring 从 config.xml 初始化 bean 时，它使用默认创建者。如果我为一个类声明我的私有创建者和 getInstance 方法，我不会引用在 Spring 初始化期间创建的 bean - 我只是再次创建相同的类，并且稍后调用 getInstance() 时会引用这个类。

我的问题是如何从代码中获取对初始化期间创建的单例（对 config.xml 中定义的 bean）的引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:02:00.140

如果您的代码中有工厂方法，则让 xml 配置调用该工厂方法而不是构造函数。不要`getInstance`从您的 Java 代码中调用。

```
<bean id="fromFactory" class="org.example.MyFactory" factory-method="getInstance" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T11:02:27.160

默认情况下，Spring 将创建您的类的单个实例。它将调用该类的构造函数一次。我认为您已将其与

```
public static void getInstance() 
```

Java 中单例的成语，这是一种尝试在你的类中强制你永远不能拥有多个实例。

Spring 已经构建了您的类的单个实例，并将其存储在 Spring 容器中以供您使用。要获取对 Spring 创建的实例的引用，您需要从 Spring 的应用程序上下文中检索它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T11:02:08.267

我认为这可能与您的问题有关： [为什么 Spring 的 ApplicationContext.getBean 被认为不好？](https://stackoverflow.com/questions/812415/why-is-springs-applicationcontext-getbean-considered-bad)

有很多方法：你可以从 ApplicationContext 获取你的 bean 实例，你可以 @Autowire 它等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T11:02:30.297

如果你的类实现了[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)，那么除了 Spring 创建的之外，没有办法`getInstance()`返回一个实例。

> 如何获得对初始化期间创建的单例的引用

基本上，您应该将它[注入](http://www.vogella.com/articles/SpringDependencyInjection/article.html)到其他需要它的类中。你也可以参考它[`ApplicationContext.getBean()`，虽然它不是那么优雅](https://stackoverflow.com/questions/812415/why-is-springs-applicationcontext-getbean-considered-bad)。

# magento - Magento 付款按钮已禁用

> ID：10736058
> 
> 赞同：0
> 
> 时间：2012-05-24T10:52:57.330
> 
> 标签：magento

我目前刚刚完成了一家magento商店，今天下午上线，

出于某种原因，当您在 OPC 中选择付款方式时，继续（到下一阶段）按钮会自动禁用。

我已尝试启用我将使用的每种付款方式组合以尝试使其再次正常工作，包括仅使用支票/汇票选项跳过。

似乎存在某种验证问题，就好像我将其设置为手动 ccsave 设置并完全验证它将继续进行的表单。

我将为此页面使用贝宝选项并且不知道如何绕过这个禁用按钮，我已经阅读了很多内容：这发生在 1.4 中，但我正在运行 1.6，并且 1.4 的所有修复程序目前都在放在 1.6

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:14:44.683

确保您的结帐页面包含一个名为 ccard.js 的 Javascript 文件

它应该包含在 HTML 的头部，看起来像这样：

```
<script type="text/javascript" src="https://yourdomain.com/js/lib/ccard.js"></script> 
```

如果不包括在内，您将永远无法从验证中获得信用卡（因此该按钮永远不会被禁用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T13:51:38.410

当 html 结构发生变化和元素被移动时，magento 中通常会出现此类问题。打开文件`template/checkout/onepage/payment.phtml`并检查按钮容器是否位于根级别。

```
<!-- This should be on the root level -->
<div class="buttons-set" id="payment-buttons-container">
<!-- Buttons are here -->
</div> 
```

# php - 从数据库中转义 XML 以进行输出

> ID：10736063
> 
> 赞同：0
> 
> 时间：2012-05-24T10:53:29.623
> 
> 标签：php, html, xml, zend-framework, encoding

我正在尝试使用 XML 创建一个 zend_form，传递的 XML 包含所有标签，所以我不能使用`htmlspecialchars()`，因为标签 < > 将被编码，这是我不想要的。是否有任何简单的方法来仅编码作为标签文本值的元素（标签之间的内容）？

```
$xml = sprintf('<?xml version="1.0" encoding="UTF-8"?><form><localhost><formmanager><formpage><elements>%s</elements></formpage></formmanager></localhost></form>',
                                $r['form_template']);
$config = new Zend_Config_Xml($xml, 'localhost');
$form = new Zend_Form($config->formmanager->$formName); 
```

保存在数据库中的 xml 的摘录：

```
<questionTechnicalServices>
<type>MultiCheckbox</type>
<options>
<class>rule2 standard basic2 starter business spotlight</class>
<label>Technical Services</label>
<multioptions>
<item-ContractLaboratoryandtestingServices>Contract Laboratory and testing Services</item-ContractLaboratoryandtestingServices>
<item-ContractRDDesignandEngineering>Contract R&D, Design and Engineering</item-ContractRDDesignandEngineering>
<item-ContractSterilization>Contract Sterilization</item-ContractSterilization>
<item-CoilingRespoolingWinding>Coiling/Respooling/Winding</item-CoilingRespoolingWinding>
<item-OthersTechnicalServices>Others</item-OthersTechnicalServices>
</multioptions>
</options>
</questionTechnicalServices> 
```

来自研发的 & 需要更改`&amp;`为任何 > 或 < 等。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:51:09.560

保存在 DB 中的 XML 无效。元素值在存储之前应该被转义。不这样做会导致您现在遇到的问题。

但是，您可以通过将其作为 HTML 加载到[DOM](http://php.net/manual/en/book.dom.php)中并将其保存回字符串来更正它。尽管由于它已经无效，但不能保证任何解析器都会按照您的意愿行事。

# regex - 正则表达式：在 JAVA 中获取 STYLE 标签的高度和宽度值

> ID：10736064
> 
> 赞同：0
> 
> 时间：2012-05-24T10:53:33.087
> 
> 标签：regex

由于我正在努力使用 REGEX 来获取 img 标签属性 STYLE 元素值，即宽度和高度。我得到了获得 STYLE 和 SRC 价值的方法，

```
<img\\b(?>\\s+(?:style=\"([^\"]*)\"|src=\"([^\"]*)\")|[^\\s>]+|\\s+)*> 
```

现在我也需要获取样式标签的高度和宽度的值，请帮助我。

原始代码：

`style=\"width:100px; height:100px\" height=\"\" src=\".png\" alt=\"87\` 它出现在图像标签内的位置。

我需要输出的地方，

```
width:100px as seperate (i.e, $1) 
```

和

```
height:100px as seperate (i.e, $2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:12:35.870

与往常一样，请确保您对输入数据有非常具体的限制，或者您应该使用 html 解析器。

此外，由于 的内容`style`是 CSS，您需要能够对属性的内容做出相同的强假设，或者您还应该使用解析器。

最好/最简单的方法是使用第二个单独的正则表达式来匹配样式规则。假设您*只有*`height`and ，并假设它们`width`始终存在，并假设它们始终以相同的顺序出现：

```
\s*height\s*:\s*([^;]*);\s*width\s*:\s*([^;"]*);? 
```

看到所有假设了吗？这就是解析器存在的原因。

# javascript - 从浏览器以编程方式打开 VLC 媒体播放器

> ID：10736065
> 
> 赞同：1
> 
> 时间：2012-05-24T10:53:33.500
> 
> 标签：javascript, http, vlc, mkv, matroska

我在我的网站上使用 .mkv 视频，但用于浏览器的 VLC 媒体插件实际上毫无用处。

但是，VLC 媒体播放器可以选择打开网络流，该流是指向我的视频的直接链接。

通过指定视频的直接 HTTP 链接，我可以拥有在 VLC 媒体播放器中观看该 .mkv 视频所需的一切。

现在，如何在某人的计算机上启动 VLC 媒体播放器并自动让 VLC 加载网络链接？

我使用 JavaScript、HTML 吗？如何让客户端的计算机应用程序从浏览器启动？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:00:09.290

您不能从网页启动任意应用程序，这将是一个巨大的安全问题！

幸运的是，您可以使用 HTML5 视频标签在 Chrome 和 FireFox 上播放（无需任何额外软件）

# r - 用R中的NA计算栅格数据的变异函数

> ID：10736070
> 
> 赞同：5
> 
> 时间：2012-05-24T10:53:57.220
> 
> 标签：r, statistics, spatial, geor

**摘要：**我有一个包含 NA 值的栅格数据集，并且想要计算它的变异函数，忽略 NA。我怎样才能做到这一点？

我有一张使用该`readGDAL`函数加载到 R 中的图像，存储为`im`. 为了使这个可重现，`dput`图像上的结果可在[https://gist.github.com/2780792](https://gist.github.com/2780792)获得。我正在尝试显示此数据的变异函数并且正在苦苦挣扎。我将介绍到目前为止我尝试过的内容：

我尝试了该`gstat`软件包，但似乎无法获得有效的函数调用。我已经收集到基本上我需要的是数据值本身（`im@data$band1`）和坐标（`coordinates(im)`）。我尝试了各种命令，例如：

```
> variogram(locations=coordinates(im), y = im@data$band1)
Error in is.list(object) : 'object' is missing 
```

和

```
> variogram(coordinates(im), im@data$band1)
Error in variogram.default(coordinates(im), im@data$band1) : 
  argument object and locations should be lists 
```

我在这里做错了什么？

由于这似乎不起作用，我尝试了这个`geoR`包，我称之为使用：

```
> variog(coords=coordinates(im), data=im@data$band1)
variog: computing omnidirectional variogram
Error in FUN(X[[1L]], ...) : NA/NaN/Inf in foreign function call (arg 4) 
```

该错误看起来与其中包含 NA 的数据有关，因此我尝试使用 删除它们`na.omit`，但这会将所有 NA 留在其中。这有点道理，因为光栅文件*必须*在每个网格正方形中有一些东西。有没有办法以某种方式删除 NA，或者至少让`variog`命令忽略它们？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T11:36:22.643

如果传递给的数据对象`gstat:variogram`是空间对象（您的数据是 a `SpatialGridDataFrame`），那么您不需要指定位置，因为它们包含在数据中。

但是，显然这些`NA`值会导致问题，所以如果我们强制网格对象为 a `SpatialPointsDataFrame`，这将删除这些`NA`值

`im`包含数据[https://gist.github.com/2780792](https://gist.github.com/2780792)

```
library(gstat)
point_data <- as(im, 'SpatialPointsDataFrame')
gstat_variogram <- variogram(band1 ~ 1, data = point_data) 
```

使用`geoR`

```
library(geoR)
geor_variogram <- variog(coords = coordinates(point_data), 
                          data = point_data@data$band1) 
```

甚至更简单（`geoR`与类对象一起使用`geodata`并包含`as.geodata`从 a 转换`SpatialPointsDataFrame`为`geodata`对象的函数

```
geor_variogram <- variog(as.geodata(point_data)) 
```

# c# - 阻止浏览器重命名下载的文件

> ID：10736080
> 
> 赞同：1
> 
> 时间：2012-05-24T10:54:51.687
> 
> 标签：c#, asp.net, caching, browser, rename

我的 asp.net Web 应用程序提供了从服务器下载文件的功能（用户单击按钮，我使用 itextsharp 在服务器上构建 pdf 文件并使用 Response.BinaryWrite 将其发送到客户端）。每个文件都正确命名，例如 2012-00001.pdf、2012-00002.pdf、...

问题是，浏览器将这些文件保存到临时目录，如果用户再次下载相同的文件，那么它会被重命名为 2012-00001 (1).pdf 之类的东西。这是一个问题，因为用户想要将文件附加到新邮件消息（来自 acrobat 阅读器、foxit 阅读器......）并且附加的文档名称显然是错误的......

有什么办法可以防止这种情况发生吗？

编辑 - 我不够清楚。我的问题是：在用户选择“打开”而不是“保存”或“另存为”的情况下，有什么方法可以阻止浏览器将文件保存到临时目录中？

并感谢大家告诉我一个目录不能包含两个同名的文件:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T10:56:46.290

> 有什么办法可以防止这种情况发生吗？

不会。浏览器这样做是为了防止用户意外覆盖同名的现有文件，而您无法控制这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:56:58.410

当然不是。浏览器可以自由地做任何他喜欢的事情（并且实际上做得*很好*，不会覆盖你的文件，除非你想要这样做）。用户有责任谨慎对待附加的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:58:42.653

不，你完全无法控制这一点。

如果他们只是通过电子邮件发送，也许您可​​以提供一个按钮，直接从网站生成 PDF 和电子邮件？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T11:08:17.193

`No you cannot prevent this. You cannot have more than 1 files with same name in a folder.`

这对计算和编程来说是非常基础的。在编程中，命名空间中也不能有两个同名的类。

让我们假设在一个世界上，像你这样的情况是可以接受的。那么用户如何区分哪些文件是正确的文件呢？他会继续打开所有文件吗？

如果有超过 2 个文件怎么办？说 2,10 或 50 个同名文件。

# database - 用于保存 Django 模型的单独线程

> ID：10736082
> 
> 赞同：2
> 
> 时间：2012-05-24T10:54:53.480
> 
> 标签：database, django, postgresql, thread-safety, gil

我正在构建一个使用远程数据库的应用程序 - 它将 A 类型的对象保存**到数据库并****从**数据库中读取 B 类型的对象。

由于[保存模型有可能阻塞和释放 GIL](https://stackoverflow.com/questions/10631419/python-gil-is-django-save-blocking)，并且应用程序本身不使用保存的对象，我想将调用移至`.save()`单独的线程。

我知道 Django 通常不是线程安全的。所以我的问题是 - 在另一个线程保存 A 类型的对象时查询 B 类型的对象是否有任何问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:37:07.073

这实际上并不能回答问题，但我认为您最好设置一个消息队列系统并使用另一个进程来处理消息。

不要保存，而是将新/修改的对象放在本地存储中（最好是 GAE 任务队列或 Amazon SQS 服务，但任何类型的本地存储都可以）并在旁边处理它们。

但是，基本上，您正在实施数据库复制方案（即使使用线程，您的本地存储也是内存），因此您可能应该考虑实际使用全功能复制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T12:01:51.920

[最简单的方法是使用ztask](https://github.com/dmgctrl/django-ztask)将其卸载到单独的进程。

```
from django_ztask.decorators import task

@task()
def delayed_save(obj):
    obj.save()

...

your_object.something = "something"
delayed_save.async(your_object) 
```

# ruby-on-rails - 如何为 DateTime 值编写非脆性 rspec 测试？

> ID：10736085
> 
> 赞同：0
> 
> 时间：2012-05-24T10:55:01.103
> 
> 标签：ruby-on-rails

在 Rails 应用程序中，我有一个模型属性，用于设置用户执行操作时的日期时间。

测试此功能的最佳方法是什么，而不是太脆弱？

例如，我有

```
it "should set the uploaded time" do
  @model.uploaded_at.should == DateTime.now.new_offset(0)
end 
```

我的测试在应该通过时失败了

```
expected: Thu, 24 May 2012 10:32:50 +0000
got: Thu, 24 May 2012 10:32:50 UTC +00:00 
```

所以我的问题是：

1.  我应该如何定义`DateTime.now.new_offset(0)`以便预期 UTC 标记？

2.  我可以看到由于时间的流逝，此测试可能会失败。例如：创建工厂，运行测试，1 秒后`it "should set the uploaded time"`运行，测试因 1 秒差异而失败。有没有更好的方法来测试这个？

感谢您提供任何可以帮助我学习这一点的提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:00:35.423

为此目的有timecop [https://github.com/jtrupiano/timecop](https://github.com/jtrupiano/timecop)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:28:03.887

对于您的第二个问题，如果您不想添加另一个 gem（timecop），您可以存根日期（ ）或基于更改`DateTime.stub(:now).and_return :whatever`的事实（ ）进行测试`uploaded_at``@model.uploaded_at.should_not == the_previous_uploaded_at_value`

# facebook - 在 Facebook 中使用“提要”方法的消息共享未出现在新闻提要中

> ID：10736086
> 
> 赞同：2
> 
> 时间：2012-05-24T10:55:01.800
> 
> 标签：facebook

我尝试使用以下代码从我的网站在 Facebook 上共享一个链接，但它只出现在墙上，我想在 Facebook 的墙上和新闻源中出现共享的东西，有什么方法吗？

```
FB.ui(
  {
    method: 'feed',
    name: 'Facebook Dialogs',
    link: 'http://developers.facebook.com/docs/reference/dialogs/',
    caption: 'Reference Documentation',
    description: 'Dialogs provide a simple, consistent interface for applications to     interface with users.'
  },
  function(response) {
    if (response && response.post_id) {
      alert('Post was published.');
    } else {
      alert('Post was not published.');
    }
  }
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-10T01:31:07.993

尝试更改`method`为`'share'`.

# android - 带照片的 Android 列表视图

> ID：10736100
> 
> 赞同：10
> 
> 时间：2012-05-24T10:55:58.640
> 
> 标签：android, listview

> **可能重复：**
> [Android - 如何在 ListView 中延迟加载图像](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)

美好的一天，我已经完成了一个带有文本、图像和评级栏的列表视图。`ksoap`我通过使用我已经完成的信息获得这些信息，它就像魅力一样！

现在有一个问题，正如我之前提到的，我在列表视图中确实有一个图像，如果我没有删除照片，它会变成这样，`laggy/slow response`但是在我删除图像之后，它会再次变得平滑，只有 textview和评分栏。

如果我想包含图像，如何解决滞后问题。如果你需要一个例子，请告诉我，所以我会发布 android .apk。我希望有一个解决方案。在我的 listview 图像代码下方：

```
String s = strTitle[position];      
System.out.println(s);      
String image_URL = imageURL[position];      
BitmapFactory.Options bmOptions;
bmOptions = new BitmapFactory.Options();
bmOptions.inSampleSize = 1;
Bitmap bm = LoadImage(image_URL, bmOptions);
ivLogo.setImageBitmap(bm);              
return rowView;

private Bitmap LoadImage(String URL, BitmapFactory.Options options)
{
    Bitmap bitmap = null;
    InputStream in = null;       
    try {
        in = OpenHttpConnection(URL);
        bitmap = BitmapFactory.decodeStream(in, null, options);
        in.close();
    } catch (IOException e1) {  }
    return bitmap;               
}

private InputStream OpenHttpConnection(String strURL) throws IOException{
    InputStream inputStream = null;
    URL url = new URL(strURL);
    URLConnection conn = url.openConnection();

    try{
        HttpURLConnection httpConn = (HttpURLConnection)conn;
        httpConn.setRequestMethod("GET");
        httpConn.connect();

        if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) 
        {
            inputStream = httpConn.getInputStream();
        }
    }
    catch (Exception ex){    }
    return inputStream;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T10:58:47.113

你必须利用 LazyLaoding 的概念。在这里，您尝试随时随地下载图像，这使您的列表视图变得迟钝。

链接在这里，

[ListView 中图像的延迟加载](https://stackoverflow.com/q/541966/603744)

您将能够找到关于懒惰的大量讨论，并且您可以在其中看到这个答案，这是最著名的概念。

[https://stackoverflow.com/a/3068012/603744](https://stackoverflow.com/a/3068012/603744)

**编辑 1**

您也可以为此查看无尽的适配器。这是一个示例，

[Android 无尽列表](https://stackoverflow.com/q/1080811/603744)

[https://github.com/commonsguy/cwac-endless](https://github.com/commonsguy/cwac-endless)

# c++ - 按计数对多图进行排序

> ID：10736101
> 
> 赞同：2
> 
> 时间：2012-05-24T10:56:00.017
> 
> 标签：c++, sorting, multimap

请帮我按值的计数对多图进行排序。

例如，

```
multimap<char,int> mymultimap;

mymultimap.insert (pair<char,int>('a',100));
mymultimap.insert (pair<char,int>('a',101));
mymultimap.insert (pair<char,int>('a',111));
mymultimap.insert (pair<char,int>('b',200));
mymultimap.insert (pair<char,int>('b',211));
mymultimap.insert (pair<char,int>('c',300)); 
```

应按以下顺序排序后：

```
c
b
a 
```

我尝试像这样使用自定义比较器：

```
struct comparer
{
    bool operator() (const char& first, const char& second) const
    {
        return mymultimap.count(first) < mymultimap.count(second);
    }
}; 
```

但我无法定义

```
multimap<char, int, comparer> mymultimap; 
```

在`struct comparer`定义之前。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T11:20:27.493

这是不可能的。

除非您继续创建自定义结构，否则您似乎需要一个结构来跟踪所有项目（此处为对），并且需要一个结构来实际计算它们。

实际选择主要取决于排序操作是一次性计算还是您实际上需要保持两者同步。

如果它是一次性计算，那么只需在需要时计算并完成它。

如果您需要维护此顺序，那么我建议您阅读 Boost.MultiIndex 并将其用作开发自定义类的基础。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:36:30.450

这是不可能的。比较器有一个限制，即当比较两个事物时，它们总是比较一致。例如：如果“a”小于“b”，则必须始终为真。

在您的比较器中，您违反了此规则，因为向多图添加更多“a”或“b”可能会突然导致比较结果发生变化。

multimap 使用比较器来组织它在内存中存储元素的方式。如果两个元素可以以一种方式进行比较，然后突然以不同的方式进行比较，则多重映射中元素的整个组织将不得不改变。当您仅插入一个新元素时，multimap 并未实现重新排列其所有现有内容，因为这样做效率非常低。

# javascript - Knockoutjs 设置当前项目

> ID：10736103
> 
> 赞同：3
> 
> 时间：2012-05-24T10:56:18.030
> 
> 标签：javascript, knockout.js, knockout-2.0

在这段代码中：[http://jsfiddle.net/PDwBF/1/](http://jsfiddle.net/PDwBF/1/)
链接到谷歌不起作用。如何修复它？

```
<ul data-bind="foreach: Items">
    <li data-bind="click: $root.SetCurrent">
        <p data-bind="text: id"></p>
        <div>
            <a href="http://google.com" target="_blank">Go to google</a>
        </div>    
    </li>
</ul>    

function ViewModel() 
{ 
  var self = this;
  self.SelectedItem = ko.observable();
  self.Items = ko.observableArray([]);
  self.SetCurrent = function(item) 
  {
      self.SelectedItem(item);
  };
};  

var vm = new ViewModel();
ko.applyBindings(vm); 

vm.Items.push({id: 55});
vm.Items.push({id: 66});
vm.Items.push({id: 77}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:09:49.973

一种选择是返回 true；从您的 SetCurrent 方法中，这将允许默认操作继续进行：http: [//jsfiddle.net/rniemeyer/PDwBF/3/](http://jsfiddle.net/rniemeyer/PDwBF/3/)

感谢`rpn` [https://groups.google.com/group/knockoutjs/browse_thread/thread/6ef1081249377728](https://groups.google.com/group/knockoutjs/browse_thread/thread/6ef1081249377728)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:27:31.187

如果您添加 return true - 它可以工作。

例如

```
function ViewModel() 
{ 
  var self = this;
  self.SelectedItem = ko.observable();
  self.Items = ko.observableArray([]);
  self.SetCurrent = function(item) 
  {
      self.SelectedItem(item);
      return true;
  };
}; 
```

# 3d - 文件转换层到卷

> ID：10736107
> 
> 赞同：0
> 
> 时间：2012-05-24T10:56:42.780
> 
> 标签：3d, webgl, dicom

在放射学领域，有许多方法可以扫描部分甚至整个身体。我需要将许多医学 dicom 文件（> 100 层）转换为一个卷文件以传输 3d 卷而不是 2d 数据。一种格式是此处使用的**.nrrd**格式：

[xtk](http://demos.goxtk.com/daniels_brain/)

我知道有[切片器](http://www.slicer.org/)，但是还有另一种转换文件的方法吗？有人遇到过这个吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T03:13:26.413

您可以`mri_convert`从 freesurfer 包中使用。

[http://surfer.nmr.mgh.harvard.edu/](http://surfer.nmr.mgh.harvard.edu/)

然后，做

```
mri_convert *.dcm output.mgz 
```

你会得到 XTK 可以读取的 .MGZ 格式:)

# iphone - 主线程绘制时的 NSTimer 动画

> ID：10736109
> 
> 赞同：0
> 
> 时间：2012-05-24T10:56:44.223
> 
> 标签：iphone, ios, nstimer, nsthread, nsrunloop

我在 stackoverflow 上阅读了一百万篇关于 nstimers、runloops 和主线程的帖子，但它们似乎没有我正在寻找的相同问题或答案。我的情况：

1.  我正在尝试为一些东西制作动画，同时有一些“正在加载”。动画由几个使用 contentOffset 来回移动的滚动视图组成。我使用 NSTimer 来制作这个动画。
2.  第 1 点的“正在加载”实际上不是一些简单的加载，而是在用户当前不可见的其他一些 UIView 上进行绘制。

所以总而言之，我试图在 UIViews 上同时绘制一些滚动视图的动画。如果它们没有以动画不流畅的方式发生冲突，这甚至可能吗？如果我使用 activityIndi​​catorView 绝对有可能，纺车永远不会结结巴巴，它总是在平稳旋转。我试过使用runloops，但我想不通。到目前为止，这是我的一些代码：

```
-(void)startLoading
{
    [self performSelectorInBackground:@selector(showSpinningCells)];
    [self drawOnViews];
}

-(void)drawOnViews
{
    //HERE A LOT OF VIEWS ARE BEING UPDATED AND CALLED SETNEEDSDISPLAY
}

-(void)spinCells
{
    //HERE I USE PERFORMSELECTORONMAINTHREAD TO SET THE
    //CONTENTOFFSET OF THE SCROLLVIEWS
}

-(void)showSpinningCells
{    
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    spinLoop = [NSRunLoop currentRunLoop];
    spinTimer = nil;
    self.userInteractionEnabled = FALSE;
    spinTimer = [[NSTimer scheduledTimerWithTimeInterval:0.2 
                            target:self 
                          selector:@selector(spinCells) 
                          userInfo:nil 
                           repeats:YES] retain];    
    [spinLoop run]; 
    [pool release];
} 
```

在我进一步尝试之前，请告诉我这是否可能，如果可以，怎么做？目前我从未见过任何旋转。如果我之后不做任何事情，我确实会看到旋转，但是一旦我在 UIViews 上调用绘图，旋转就会完全停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:08:01.283

你可以试试这个

```
-(void)showSpinningCells
{    
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    spinTimer = nil;
    self.userInteractionEnabled = FALSE;
    spinTimer = [[NSTimer timerWithTimeInterval:0.2
                                        target:self
                                      selector:@selector(spinCells) 
                                      userInfo:nil
                                        repeats:YES] retain];
    [[NSRunLoop currentRunLoop] addTimer:spinTimer forMode:NSRunLoopCommonModes];
    [pool release];
} 
```

添加`timer`到`currentRunLoop`_`NSRunLoopCommonModes`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T01:36:28.520

UI 动画只能在您的 drawOnViews 方法退出后发生，以便 UI 运行循环可以获得在主线程中执行动画所需的时间。一种解决方案是将您的 drawOnViews 方法分割成非常短的异步段，每个段快速退出，以便 UI 动画可以在每个段之间继续。

# eclipse - 带有 Scala 的 Android 库项目可以工作，但不可扩展

> ID：10736111
> 
> 赞同：2
> 
> 时间：2012-05-24T10:56:53.717
> 
> 标签：eclipse, scala, build, android-library

我找到了一种解决方法，可以在 scala for Android 中创建库项目和主应用程序，使用 Eclipse，我想与您分享。但是，来自 Eclipse 的晦涩的清理过程（请参阅最后的问题）阻止我在我的更大项目中实现此功能，该解决方法目前无法完全工作。

我假设您已经安装了类似 Eclipse 3.6、Scala 2.8.3 的插件、最新的 Android SDK（我是 18）、treeshaker 插件的配置

## 创建库

*   文件 > 新建 > 项目 > Android 项目
*   项目名称：`TestScalaLibrary`，新建，使用默认位置，下一步
*   目标 2.3.3 API 10，下一个
*   应用程序名称：`TestScalaLibrary`，包名称`com.exampleLibrary`，创建活动命名`TestScalaLibraryActivity`，完成

### 将项目 TestScalaLibrary 配置为 Scala 库

*   项目右键，配置，添加scala性质
*   右键单击项目，添加/删除 Treeshaker。
*   右键项目，properties...android，勾选“Is Library”，ok
*   `TestScalaLibraryActivity2`在 package 中创建一个新的 scala 类`com.exampleLibrary`，其内容如下：

    ```
    package com.exampleLibrary
    import android.app.Activity
    import android.os.Bundle

    class TestScalaLibraryActivity2 extends Activity {
      override def onCreate(savedInstanceState: Bundle) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.main)
      }
    } 
    ```

*   删除文件`TestScalaLibraryActivity.java`

*   通过`AndroidManifest.xml`替换更新`android:name=".TestScalaLibraryActivity"``android:name="com.exampleLibrary.TestScalaLibraryActivity2"`
*   清理项目，让它自动构建。如果在某些时候由于`testscalalibrary.jar`无法删除而出现构建错误，请在 Eclipse 之外手动执行此操作，方法是临时关闭引用此库的项目。

## 创建测试应用程序

*   文件 > 新建 > 项目 > Android 项目
*   项目名称：`TestScala`，新建，使用默认位置，下一步
*   目标 2.3.3 API 10，下一个
*   应用名称：TestScala，包名`com.exampleApplication`，创建活动命名`TestScalaActivity`

### 将项目配置为 Scala 项目

*   项目右键，配置，添加scala性质
*   右键单击项目，添加/删除 Treeshaker。
*   项目右键，properties...android，library，add...将项目添加`TestScalaLibrary`为library项目，ok
*   编辑`AndroidManifest.xml`并将相对名称替换`android:name=".TestScalaActivity"`为其绝对等效名称`android:name="com.exampleLibrary.TestScalaLibraryActivity2"`

在调试模式下启动它（如果需要，自己创建一个新配置），它不起作用。你得到一个 Exception `RunTimeException`。

查看 LogCat，它最终会告诉您问题出在哪里。 `Caused by: java.lang.ClassNotFoundException: com.exampleLibrary.TestScalaLibraryActivity2 in loader dalvik.system.PathClassLoader`

为了解决这个问题，我有以下从[这个博客](http://tiliman.wordpress.com/2010/02/10/android-development-with-scala/)派生的解决方法。

*   在项目 TestScala 中，`TestScalaActivityDummy`使用以下代码创建类：

    ```
    package com.exampleApplication
    class TestScalaActivityDummy {} 
    ```

在调试模式下启动它......它工作！

***现在奇怪的部分。***

*   删除文件`TestScalaActivityDummy.scala`（是的，删除文件），清理项目，让它自动重建。启动它。它仍然有效！
*   再次清理项目，可能多次。然后，如果你启动它，你又会得到一个 RunTimeException。

为什么一清洁一启动一清洁后会出现这些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:36:47.867

解决方案是在没有 treeshaker 的情况下重新开始，而是使用 AndroidProguardScala 插件：

[https://stackoverflow.com/a/11084146/1287856](https://stackoverflow.com/a/11084146/1287856)

# msbuild - 如何通过 TeamBuild 和 MSBuild 将 Web 项目发布到特定的本地文件夹

> ID：10736114
> 
> 赞同：1
> 
> 时间：2012-05-24T10:57:00.087
> 
> 标签：msbuild, web, local, publish, tfsbuild

我一直在安静地寻找解决这个问题 - 但找不到合适的解决方案。
我有一个 C# .NET 解决方案，其中包含大约 16 个项目，并希望通过 TeamBuild 和 MSBuild 每晚构建它。
其中两个项目是 Web 项目，应该在构建解决方案或项目后发布 - 但问题是：它应该在其正常输出路径中编译，并发布到本地文件系统上的特定文件夹。在 Visual Studio 中，这没问题 - 我单击本地文件系统上的发布，项目发布正常。

我已经找到了一些 MSbuild 选项，例如 DelpoyOnBuild 等，但所有示例仅适用于 IIS WebServer 上的发布 - 但在这种情况下我不想使用 IIS。是否可以在 Build 之后让 MSBuild 将 Web 项目发布/部署到指定的本地文件夹？

最好的问候塞巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T08:16:45.093

是的，但您必须稍微调整一下您的流程模板。一个单独的进程可以使用放置文件夹中的文件来处理发布部分。然后，您可以使用任何您喜欢的工具`InvokeProcess`来处理活动，或者开发自己的自定义活动来处理它。

此过程是标准构建过程的一部分还是在单独的模板/构建定义中取决于您希望如何执行它。

我们使用[Community TFS Build Extensions](http://tfsbuildextensions.codeplex.com/)，并且通过这些额外的活动，我们可以使用这些额外的活动`InvokeBuild`来启动其他构建，例如在另一个构建结束时。通过传递当前构建 Uri 然后使用它们的`GetBuildDetail`，任何构建都可以知道它的前任并可以访问它的所有细节（例如`DropFolder`，例如）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:37:21.543

我现在使用构建后事件或调用 msbuild.exe 的简单命令文件来执行此操作。msbuild 是带参数的 startet，以便它部署 Web 服务。这是我的命令：

```
MSBuild.exe /target:Build;PipelinePreDeployCopyAllFilesToOneFolder /p:Configuration=Release;_PackageTempDir=%binfolder% "projectfile.csproj" 
```

# opencl - How to get physical address of GPU memory for DMA? (OpenCL)

> ID：10736116
> 
> 赞同：2
> 
> 时间：2012-05-24T10:57:04.880
> 
> 标签：opencl, gpu, gpgpu, dma

I am writing an OpenCL program and I wish to transfer data from a frame grabber to a GPU using DMA. How can I get the physical address of an OpenCL buffer on the GPU to do that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T19:51:12.910

使用 OpenCL，您无法获取缓冲区的物理 GPU 地址。

但是，您可以将缓冲区的一个区域直接映射到主机内存，从而允许使用标准 C/C++ 代码（例如 memcpy）将内存复制入和复制出。请参阅 clEnqueueMapBuffer。

# z-index - Flash player on top of element despite z-index

> ID：10736119
> 
> 赞同：1
> 
> 时间：2012-05-24T10:57:12.537
> 
> 标签：z-index, flash

The problem is: the search autocomplete drop-down is overlapped by swf object despite its z-index is greater many values for both z-indexes tested - nothing works

```
.ac_results ul {
z-index: 100;
}
#main_banner {
    margin:0 auto;
    padding:0;
    vertical-align: baseline;
    float: left;
    display: block;
    height:385px;
    z-index:-1;
} 
```

how to fix this? [the link to mysite](http://coxcamera.ru/contacts.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:43:49.620

```
<object type="application/x-shockwave-flash" data="http://coxcamera.ru/theme/coxcamera.ru/swf/main.swf" width="100%" height="100%" id="main_banner" style="visibility: visible; "> 

<param name="wmode" value="transparent">

</object> 
```

嗨添加`<param>`对象标签。它的工作正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:03:35.437

```
.ac_results ul {
z-index: 999;
}
#main_banner {
    margin:0 auto;
    padding:0;
    vertical-align: baseline;
    float: left;
    display: block;
    height:385px;
    z-index:1;
} 
```

嗨，您的代码更改如下，

如果不正常，那是你的浏览器有问题。我看到你的网站使用 chrome 我看不到任何问题。

# sql - how to select a record which is present more than once in table

> ID：10736123
> 
> 赞同：3
> 
> 时间：2012-05-24T10:57:40.420
> 
> 标签：sql

i have a table like this:

```
book_no     lang      price      shelf     
----------  --------  ---------  -----
1           eng       20         a  
4           french    34         a  
2           eng       26         b  
7           russian   71         b  
12          german    33         a  
43          french    15         d  
11          eng       43         c  
14          rusian    33         a  
19          eng       20         d  
24          french    40         c  
23          eng       57         a  
27          russian   48         b  
42          german    31         c  
25          french    15         d 
```

from this table i want to fetch book_no, language, shelf.
The languages which are present more than 3 times, only those books are to be shown.
I tried:

```
select book_no,lang,shelf from a where (count(lang)>3) 
```

thanks for help in advance

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T11:05:22.393

```
SELECT book_no, 
       lang, 
       shelf 
FROM   a 
WHERE  lang IN (SELECT lang 
                FROM   A 
                GROUP  BY lang 
                HAVING Count(*) > 3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:01:34.850

不能在 where 子句中使用 count、sum 等分组函数。

使用群组

```
group by book_no -- or the fields you need, depending on sgbd, you can put one or have to put all 
```

和一个有子句

```
Having count(lang) > 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T12:53:53.857

如果你的 DBMS 支持聚合窗口函数，你可以试试这个：

```
SELECT
  book_no,
  lang,
  shelf
FROM (
  SELECT
    *,
    COUNT(*) OVER (PARTITION BY lang) AS book_count
  FROM a
) s
WHERE book_count >= 3 
```

# ruby-on-rails - 延迟在rails 3中执行方法

> ID：10736131
> 
> 赞同：1
> 
> 时间：2012-05-24T10:58:14.150
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, delayed-job

我有一个控制器，它接收消息并将数据发布到第 3 方 url：

```
def create
    @message = Message.new(params[:message])

    if @message.valid?
      post_to_server(@message)
    end
end

private 

def post_to_server
 # Http Post to 3rd Party Url
end 
```

Message 不是 ActiveRecord 对象。它是一个带有一些 ActiveModel 验证的普通 ruby​​ 对象。

现在我担心的是，如果我的应用程序正在等待来自 3rd 方服务器的响应，它可能会显得很慢。推迟执行此方法以便用户可以立即获得响应并且 post_to_server 部分在后台运行的最佳方法是什么？

我用谷歌搜索了一下，发现了这个：[https ://github.com/collectiveidea/delayed_job](https://github.com/collectiveidea/delayed_job)

但这要求我的对象是一个活动的记录对象并保持不变。对于我需要的东西，这似乎有点矫枉过正。

有没有其他方法可以将方法的执行推迟到返回响应之后？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:09:38.803

只有一种简单的方法可以做到这一点，那就是使用延迟作业或 resque 或任何其他提供延迟后台处理的 gem。发送请求是 IO 阻塞，所以如果你在延迟线程的情况下发送这个请求，你会阻塞 ruby​​ mri 中的当前进程。

DelayedJob 将使用 YAML 编组您的对象，然后将其转换回执行，因此您可以传递任何对象。

```
class Message
  def post_to_server
    # long running method
  end
  handle_asynchronously :post_to_server
end 
```

`@message.post_to_server` 或者

```
class Jobs
  def self.post_to_server(message)
    # long running method
  end
  handle_asynchronously :post_to_server
end 
```

`Jobs.post_to_server(@message)`

[https://github.com/collectiveidea/delayed_job](https://github.com/collectiveidea/delayed_job)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T11:09:30.160

我认为delayed_job 不太关心ActiveRecord 对象或持久性。如文档中所述：

*在任何对象上调用 .delay.method(params) ，它将在后台处理。*

[https://github.com/collectiveidea/delayed_job#queuing-jobs](https://github.com/collectiveidea/delayed_job#queuing-jobs)

我们在我们的项目中使用它，效果很好。根据我的研究，delayed_job 是实现您所追求的最简单的方法。还有其他排队机制（RabbitMQ、ZeroMQ）也会有所帮助，但在我看来，这些都将是矫枉过正。

在您的情况下，请尝试以下操作：

```
@message.delay.post_to_server 
```

# php - 在 Codeigniter 中显示自定义错误消息

> ID：10736133
> 
> 赞同：0
> 
> 时间：2012-05-24T10:58:20.853
> 
> 标签：php, codeigniter

我正在运行一个基于 php codeigniter 的 Web 应用程序。我想在我的应用程序中显示自定义错误页面和自定义错误消息。

所以我用我的自定义异常类扩展了codeigniter的核心异常类。我在 application/core 文件夹中添加了一个文件 MY_Exceptions.php 。

似乎该`show_error`方法已被覆盖，但`show_php_error`我的自定义类并未覆盖该方法。它仍在执行来自 system/core/Exceptions.php 而不是 application/core/MY_Exceptions.php （我的自定义类）的 show_php_error 方法。

MY_Exceptions.php 文件如下 -

```
<?php
if (!defined('BASEPATH')) exit('No direct script access allowed');
class MY_Exceptions extends CI_Exceptions
{
public function __construct()
{
    parent::__construct();
}

function show_error($heading, $message, $template = 'error_general', $status_code = 500)
{
    if($template!='error_404'){
        $template = 'custom_error_page';
        $heading = "An Error Occured";
        $message = "We're sorry, but we can not complete the action you requested. A notification has been sent to our customer service team. Please try again later.";
    }else{
        $template = 'custom_error_page';
        $heading = "404 Page Not Found";
        $message = "We're sorry, but we can not load the page you requested. A notification has been sent to our customer service team. Please try again later..";
    }
    set_status_header($status_code);

    $message = '<p>'.implode('</p><p>', ( ! is_array($message)) ? array($message) : $message).'</p>';

    if (ob_get_level() > $this->ob_level + 1)
    {
        ob_end_flush();
    }
    ob_start();
    include(APPPATH.'errors/'.$template.'.php');
    $buffer = ob_get_contents();
    ob_end_clean();
    return $buffer;
}

function show_php_error($severity, $message, $filepath, $line)
{
    $heading = "An Error Occured";
    $message = " We're sorry, but we can not complete the action you requested. A notification has been sent to our customer service team. Please try again later.";
    echo $this->show_error($heading, $message, 'custom_error_php', 404);
    exit;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:51:22.363

为什么不直接更改 /application/errors 中的“error_404.php”和“error_general.php”文件？

That way you can style the pages however you want, and put your generic error messages there, rather than extending a core class?

# iphone - 在两个静态文本之间选择选择

> ID：10736139
> 
> 赞同：0
> 
> 时间：2012-05-24T10:58:36.913
> 
> 标签：iphone, objective-c, ios, ios5

这是我的代码：

```
 NSString *trimfeedback = [FeedbackTxtString stringByReplacingOccurrencesOfString:@"<br><u>Your 
 answer</u>:<ca>#ya#</ca><br><u>Correct answer</u>:<br>" withString:@"<p>"]; 
```

要替换的字符串将是静态的，并且 'FeedbackTxtString' 可以包含文本 'Correct answer' 或 'Correct answers' 。我需要实现 OR 案例，因为我不知道“FeedbackTxtString”中会有什么。如果 FeedbackTxtString 包含“正确答案”，那么要替换的字符串应该是 `<br><u>Your answer</u>:<ca>#ya#</ca><br><u>Correct answers</u>:<br>" withString:@"<p>`，或者如果它包含“正确答案”，那么要替换的字符串应该是 `<br><u>Your answer</u>:<ca>#ya#</ca><br><u>Correct answer</u>:<br>" withString:@"<p>` 我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:19:47.413

做这个：

```
 if([FeedbackTxtString rangeOfString:@"Correct answers"].location != NSNotFound)
  {
    NSString *trimfeedback = [FeedbackTxtString stringByReplacingOccurrencesOfString:@"<br><u>Your answer</u>:<ca>#ya#</ca><br><u>Correct answers</u>:<br>" withString:@"<p>"];
  }
  else if([FeedbackTxtString rangeOfString:@"Correct answer"].location != NSNotFound)
  {
    NSString *trimfeedback = [FeedbackTxtString stringByReplacingOccurrencesOfString:@"<br><u>Your answer</u>:<ca>#ya#</ca><br><u>Correct answer</u>:<br>" withString:@"<p>"];
  } 
```

# iphone - 从 iOS 中的 iPhone 相机库将图像发布到 Facebook

> ID：10736147
> 
> 赞同：0
> 
> 时间：2012-05-24T10:58:50.283
> 
> 标签：iphone, objective-c, ios, facebook-graph-api

我正在使用以下方法将照片发布到 Facebook。它工作正常，但是图像设置如下： `NSURL *url = [NSURL URLWithString:@"http://www.example.com/image.png"];`

我想让用户从他们的 iPhone 相机文件夹中选择图像。我将如何执行此操作 - 从相册中检索图像并通过此方法发送？

谢谢你的帮助

```
- (void)apiGraphUserPhotosPost {
    [self showActivityIndicator];
    currentAPICall = kAPIGraphUserPhotosPost;
    AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    // Download a sample photo
    NSURL *url = [NSURL URLWithString:@"http://www.example.com/image.png"];
    NSData *data = [NSData dataWithContentsOfURL:url];
    UIImage *img  = [[UIImage alloc] initWithData:data];
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   img, @"picture",
                                   nil];
    [img release];

    [[delegate facebook] requestWithGraphPath:@"me/photos"
                          andParams:params
                      andHttpMethod:@"POST"
                        andDelegate:self];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:04:08.343

为此，您应该使用`UIImagePickerController`. 在此处查看 Apple 文档：

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)

PS：对于非URL`-[NSData dataWithContentsOfURL:]`来说不是一个好主意。`file:`它是同步的。而是使用异步 API，例如`-[NSURLConnection sendAsynchronousRequest:queue:completionHandler:]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:05:41.400

如果您已完成从图库中选择图像？

if not then please follow the steps [here in this blog entry](http://www.icodeblog.com/2009/07/28/getting-images-from-the-iphone-photo-library-or-camera-using-uiimagepickercontroller/), once you got the image, then simply do this way:

```
UIImage *img  = yourImageFromLibrary;
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   img, @"picture",
                                   nil];
... //rest of code 
```

# math - 旋转重力矢量以实现逼真的物体移动

> ID：10736148
> 
> 赞同：0
> 
> 时间：2012-05-24T10:58:56.427
> 
> 标签：math, box2d, physics

我有一个世界和一个物体的重力矢量（0，-9.8）。这个对象依附于世界。如果我修改世界的旋转，我如何计算重力？

即，如果我将世界向左旋转 10 度，对象应该开始向左移动。

摩擦力 si 0 所以我们有一个理想的情况。我需要一个真正的解决方案来让世界表现得像现实生活中一样。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:03:00.447

这就是旋转矩阵的用途：[http ://en.wikipedia.org/wiki/Rotation_matrix](http://en.wikipedia.org/wiki/Rotation_matrix)

# php - 使用 jquery ajax 表单提交时处理 PHP 会话

> ID：10736153
> 
> 赞同：1
> 
> 时间：2012-05-24T10:59:05.143
> 
> 标签：php, jquery, session-state, session-variables

我正在一个具有登录注册功能的网站上工作。我已经通过参考和论坛帮助实现了登录注册部分，但现在我遇到了 PHP 会话的问题。这是我的 ajax 表单提交：

```
 $.ajax({
                    type: "POST",
                    url: "userLogin.php",
                    data: "eid="+eid+"&pwd="+pwd+"&rememberme="+remember,
                    dataType: "html",
                    success: function(msg){
                        if($.trim(msg)!="error")
                        {
                            $("#user_status", window.parent.document).html("Welcome "+msg+"&nbsp;&nbsp;|&nbsp;&nbsp;<a href='forum/logout.php'>Logout</a>");

                            if(window.parent.document.getElementById('post_user_name'))
                                $("#post_user_name", window.parent.document).html("<strong style='color:#333333;'>"+msg+"</strong>");

                            parent.$.fancybox.close();
                        }
                        else{
                            $('#error_common').html("Invalid ID or password.Please try again");
                            $('#error_common').show();
                            return false;
                        }
                    }
                }); 
```

这是PHP代码：

```
 if(isset($_POST['eid']) && isset($_POST['pwd']))
          {     
                $userObj = new Model_Users();
                $username= return_fetched_value($_POST['eid']);
                $password= md5(return_fetched_value($_POST['pwd']));
                $getUserDetails = $userObj->getUserValueByUserNameAndPassword($username,$password);
                /*print_r($getUserDetails);
                exit;*/

                if(count($getUserDetails)>0)
                {   

                    $_SESSION['username'] = $getUserDetails['uname'];
                    $displayUser=$getUserDetails['uname'];  
                    echo $displayUser;

                }
                else
                {
                    //echo "entered here";  
                    echo "error";
                }

          }
          else
          {
            $errorMessage = "You have entered invald username password" ;

          } 
```

一切正常，用户登录并在登录页面上获取用户名，如这里[http://www.proptiger.com/](http://www.proptiger.com/,but)，但如果我刷新页面，用户名会消失，但它仍然存在于会话中。我可以如果我做**print_r($_SESSION)**看看它。用户名已使用 jquery ajax 部分设置。

```
 $("#user_status", window.parent.document).html("Welcome "+msg+"&nbsp;&nbsp;|&nbsp;&nbsp;<a href='forum/logout.php'>Logout</a>"); 
```

我认为这并没有**持续存在**，但仍然存在于会话中。我是 jquery ajax 的新手并坚持这一点。任何建设性的意见都会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:39:55.247

这可能听起来很傻，但是您确定在页面加载时使用 php 显示用户名还是只是在有登录 ajax 调用时？

据我所知，您的代码仅在您的 AJAX 调用之后显示用户名，但是`<?php echo $_SESSION['username']; ?>`当您在没有 ajax 的情况下加载页面时没有任何类似的东西。

我希望我的回答足够清楚，但只是总结一下：当有人直接进入您的网站时，请确保您回显用户名，而不仅仅是登录操作。

# javascript - Chrome 扩展 JSONP 请求访问全局变量

> ID：10736157
> 
> 赞同：0
> 
> 时间：2012-05-24T10:59:28.870
> 
> 标签：javascript, jquery, google-chrome-extension, jsonp

我在谷歌浏览器扩展中使用 JSONP。为了使它工作，我不得不添加

```
chrome.extension.onRequest.addListener(onRequest); 
```

然后像这样发出请求：

```
var jsonpURL;
$(document).ready(function(){
   /* i make the "someurl" here from a div's content */
   jsonpURL="someurl";
   chrome.extension.sendRequest({action:'getJSON',url:jsonpURL});
}); 
```

问题是，我无法`jsonpURL`访问请求中的变量：

```
function onRequest(request, sender, callback) {
    alert(jsonpURL);
} 
```

**未定义。**

似乎该`jsonpURL`变量在请求中没有任何值，尽管我仅在我为`jsonpURL`就绪函数中的变量赋值之后才启动它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:10:09.240

request.url 应该等于 onRequest 函数中的 jsonpURL。

# cocoa-touch - iPhone从字符串中删除子字符串

> ID：10736158
> 
> 赞同：30
> 
> 时间：2012-05-24T10:59:28.813
> 
> 标签：cocoa-touch, nsstring

嗨，我有一个这样的字符串

```
NSString *str=@"1,2,3,4"; 
```

**我必须动态地**从中删除任何字符。例如，`@"3,"`。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-05-24T11:02:34.923

```
NSString *str=@"1,2,3,4";
[str stringByReplacingOccurrencesOfString:@"3," withString:@""]; 
```

这将删除所有出现的 @"3," `str`。

如果您只想删除第一次出现的@"3,"：

```
NSString* str = @"1,2,3,4";
NSRange replaceRange = [str rangeOfString:@"3,"];
if (replaceRange.location != NSNotFound){
    NSString* result = [str stringByReplacingCharactersInRange:replaceRange withString:@""];
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-24T11:06:41.650

```
 NSString *str=@"1,2,3,4";
  int numberToRemove = 4;

 str = [str stringByReplacingOccurrencesOfString:[NSString stringWithFormat:@"%d",numberToRemove] withString:@""];
 str = [str stringByReplacingOccurrencesOfString:@",," withString:@","]; 
```

这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-08T14:38:23.077

这对我有用，如果有人会帮忙的话！

```
NSString *newStr = @"";
    newStr = [str stringByReplacingOccurrencesOfString:@"3," withString:@""]; 
```

# android - 为什么 Google 向我收取了两次 Android 开发者注册费？

> ID：10736160
> 
> 赞同：-1
> 
> 时间：2012-05-24T10:59:50.540
> 
> 标签：android, google-play

我的 Android 开发者帐户有问题，我注册成功但支付了 25 美元，谷歌又向我收取了 25 美元，总共是 50 美元。

我的开发者帐户在 3 月 3 日注册成功，我可以发布我的应用程序。但是我直到 5 月 14 日才登录它，当 Android Market 更名为“Google Play Market”时，5 月 14 日我登录并出现问题，Google 再次向我收取 25 美元！

这是我在 Google 电子钱包中的订单历史记录：

*3 月 3 日：您于 3 月 3 日向 Google 下订单。Google Checkout 将此收据的副本发送给 xxx*

*3 月 3 日：Google 收到了您的订单。//==> 收了我 25 美元，注册成功*

*5 月 14 日：Google 向您的 VISA xxx 收取 25.00 美元的费用。Google Play”将出现在您的帐单上。 // ==> 当我登录到我的 Google Play 帐户时，再次向我收取 25 美元！*

现在我不知道为什么，也找不到联系 Google 支持的方式

谢谢（对不起我的英语）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T11:03:09.023

他们不应该向您收取两次费用。我听说它也发生在其他人身上。您需要提出投诉：

[https://support.google.com/googleplay/android-developer/bin/request.py?contact_type=dev_registration](https://support.google.com/googleplay/android-developer/bin/request.py?contact_type=dev_registration)

# php - 图像 GD - 白色背景

> ID：10736164
> 
> 赞同：1
> 
> 时间：2012-05-24T10:59:59.103
> 
> 标签：php

```
$background = imagecreatetruecolor(709,709);

$whiteBackground = imagecolorallocate($background, 255, 255, 255);

imagecopyresampled($whiteBackground, $new_img,(709-$imageWidth)/2,(709-$imageHeight)/2, 0, 0, $imageWidth, $imageHeight, $width, $height);

ImageJpeg ($background,"$path/$newName.$file_ext", 85); 
```

我试图用 GD 创建一个白色背景的图像。但是没有运气，任何想法我做错了什么？我知道如果我取出 whiteBackground 位，法师会抽水，所以创建图像代码没有问题。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:11:04.623

您缺少分配白色的`imagefill()`方法。`$background`

并且您不能从 [color] 到 [image] 重新采样，您应该从 [image] 到 [image] 进行重新采样。

```
$background = imagecreatetruecolor(709,709);
$whiteBackground = imagecolorallocate($background, 255, 255, 255);
imagefill($background,0,0,$whiteBackground);
imagecopyresampled($background, $new_img,(709-$imageWidth)/2,(709-$imageHeight)/2, 0, 0, $imageWidth, $imageHeight, $width, $height);
ImageJpeg ($background,"$path/$newName.$file_ext", 85); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:04:21.653

[http://php.net/manual/en/function.imagecopyresampled.php](http://php.net/manual/en/function.imagecopyresampled.php)声明前两个参数必须是`$dst_image`和`$src_image`。

`$new_img`在您的代码中不存在，需要使用`imagecreatetruecolor();`

我相信默认情况下它应该是白色背景，所以你不应该需要`imagecolorallocate()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:15:23.097

*我希望这有效*

```
$background = imagecreatetruecolor(709,709);
$whiteBackground = imagecolorallocate($background, 255, 255, 255);
imagefill($background,0,0,$whiteBackground);
$use_new_img = imagecreatefromjpeg($new_img);
imagecopyresampled($whiteBackground,$use_new_img,(709-$imageWidth)/2,  (709-$imageHeight)/2, 0, 0,$imageWidth,$imageHeight,$width,$height);
ImageJpeg ($background,"$path/$newName.$file_ext", 85); 
```

# iphone - NIAttributedLabel settextcolor 不起作用

> ID：10736166
> 
> 赞同：4
> 
> 时间：2012-05-24T11:00:06.630
> 
> 标签：iphone, ios, nimbus-ios

我`NIAttributedLabel`用于在文本上显示链接。

```
 NIAttributedLabel *label;
            label = [[NIAttributedLabel alloc] initWithFrame:rect];

            label.delegate = self;
            label.font = [UIFont fontWithName:@"Helvetica" size:MAIN_FONT_SIZE];
            label.textAlignment = UITextAlignmentLeft;
            label.lineBreakMode = UILineBreakModeWordWrap;
            label.numberOfLines = 0;
            label.backgroundColor = [UIColor clearColor];
            label.highlightedTextColor = [UIColor whiteColor];  
            label.text = strEditedText;
            label.textColor = [UIColor blackColor];

            [label setTextColor:[UIColor blueColor] 
                          range:[strEditedText rangeOfString:stringPh]]; 
```

但是最后一行无法正常工作，尽管**stringPh**在**strEditedText**中。所有的文字都是蓝色的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T21:30:49.137

我设置了一个示例，您可以[在此处](http://dl.dropbox.com/u/54072935/NIAttributedLabelTest.zip)下载，我发现它运行良好。
和：

```
NSString * strEditedText= @"I'm text";
NSString *stringPh = @"I'm"; 
```

模拟器正确突出显示文本的右侧部分： ![在此处输入图像描述](../Images/fcace301150ae11e363285f0a1f7ca54.png)

您绝对确定您的字符串`stringPh`是 的实际子字符串`strEditedText`吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T07:23:06.240

这是我的工作代码

```
NSString * strEditedText= @"Please contact abc at 800.493.0016, option #3 for further assistance.";
NSString *stringPh = @"800.493.0016";
NIAttributedLabel *label;
label = [[NIAttributedLabel alloc] initWithFrame:CGRectMake(0, 0, 320, 100)];

label.delegate = self;
label.font = [UIFont fontWithName:@"Helvetica" size:MAIN_FONT_SIZE];
label.textAlignment = UITextAlignmentLeft;
label.lineBreakMode = UILineBreakModeWordWrap;
label.numberOfLines = 0;
label.backgroundColor = [UIColor clearColor];
label.highlightedTextColor = [UIColor whiteColor];  
label.text = strEditedText;
label.textColor = [UIColor blackColor];

[label setTextColor:[UIColor blueColor] 
              range:[strEditedText rangeOfString:stringPh]];  
[self.view addSubview:label]; 
```

# node.js - 如何在 Express.js 中截获多部分文件流？

> ID：10736168
> 
> 赞同：3
> 
> 时间：2012-05-24T11:00:11.963
> 
> 标签：node.js, express, multipartform-data

按照例子

[https://github.com/visionmedia/express/blob/master/examples/multipart/app.js](https://github.com/visionmedia/express/blob/master/examples/multipart/app.js)

Express.js 似乎在幕后完成了所有工作，并保存文件并将其完整地提供给您。如何拦截和操纵原始流？具体来说，我想获取流，以便可以将其连接到写入流。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:10:21.587

你不能，除非你制作一个使用强大的中间件并在那里拦截流（一种解决方案是用自定义的改变 Express 使用的 bodyParser）。

在以下文件中自行检查：[https ://github.com/senchalabs/connect/blob/master/lib/middleware/multipart.js](https://github.com/senchalabs/connect/blob/master/lib/middleware/multipart.js)

请注意，没有可以挂钩的“全局”事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T15:34:42.840

你可以使用这个：

```
app.use(express.multipart({ defer: true })); 
```

然后，在路线中：

```
app.post('/upload', function (request, response, next) {
  request.form.onPart = function (part) {
    // Default handling for non-files
    if (!part.filename) return form.handlePart(part);

    // part is a stream of the file
  };

  request.form.parse(request, function (error) {
    if (error) return next(error);
  });
}); 
```

# visual-c++ - 如何使用 wxPaintEvent 使用 wxWidgets 渲染循环？

> ID：10736170
> 
> 赞同：0
> 
> 时间：2012-05-24T11:00:28.843
> 
> 标签：visual-c++, opengl, windows-xp, wxwidgets

我正在尝试使用 MIL 库获取图像，并且我想使用 OpenGL 将图像渲染到 glCanvas 窗口。但是，问题是我的

```
 OnPaint( wxPaintEvent &event) 
```

方法未在循环中运行以显示图片。我已经在这个方法中添加了代码来使用 MIL 抓取图像，并在显示它们之前将它们设置为纹理。那么，如果**wxPaintEvent**自己在循环中运行，为什么我看不到图像序列，比如视频？当我在不使用 MIL 的情况下检查默认纹理时，它可以正常工作。所以，基本上，我只是设置纹理！

我没有使用进程间和互斥锁，这可能是个问题吗？或者，我需要更加小心这个**事件**的时间安排吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:12:32.903

绘制事件通常仅在窗口被标记为“无效”或“脏”时才会发出，并且被认为需要重绘。如果您想播放动画，请将窗口标记为您自己重绘的主题（[wxWindow::Refresh](http://docs.wxwidgets.org/stable/wx_wxwindow.html#wxwindowrefresh)）。或者，首选方法，注册一个空闲事件处理程序并从那里执行 OpenGL 操作：[http ://wiki.wxwidgets.org/Making_a_render_loop](http://wiki.wxwidgets.org/Making_a_render_loop)

# jquery - CheckAll CheckBox Jquery

> ID：10736172
> 
> 赞同：2
> 
> 时间：2012-05-24T11:00:30.407
> 
> 标签：jquery

我使用此代码检查树视图中的复选框。

*HTML：*

```
<div id="tree">
    <ul>
        <li>
            <input type="checkbox"/> Root
            <ul>
                <li>
                    <input type="checkbox"/> Child 1
                    <ul>
                        <li><input type="checkbox"/> Subchild 1</li>
                        <li><input type="checkbox"/> Subchild 2</li>
                        <li><input type="checkbox"/> Subchild 3</li>
                    </ul>
                </li>
                <li>
                    <input type="checkbox"/> Child 2
                    <ul>
                        <li><input type="checkbox"/> Subchild 1</li>
                        <li><input type="checkbox"/> Subchild 2</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</div>​ 
```

*JavaScript：*

```
$(document).ready(function() {
    $("#tree input:checkbox").change(function() {
        var val = $(this).attr("checked");
        $(this).parent().find("input:checkbox").each(function() {
            if (val) {
                $(this).attr("checked", "checked");
            } else {
                $(this).removeAttr("checked");
            }
        });
    });
});​ 
```

*JSFiddle：http:* [//jsfiddle.net/jRAcq/](http://jsfiddle.net/jRAcq/)

这很好用。但是，如果未选中任何一个子节点，则取消选中根/子根。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:46:35.143

```
 $(document).ready(function () {
                $.extend($.expr[':'], {
                    unchecked: function (obj) {
                        return ((obj.type == 'checkbox' || obj.type == 'radio') && !$(obj).is(':checked'));
                    }
                });

                $("#tree input:checkbox").live('change', function () {
                    $(this).next('ul').find('input:checkbox').prop('checked', $(this).prop("checked"));

                    for (var i = $('#tree').find('ul').length - 1; i >= 0; i--) {
                        $('#tree').find('ul:eq(' + i + ')').prev('input:checkbox').prop('checked', function () {
                            return $(this).next('ul').find('input:unchecked').length === 0 ? true : false;
                        });
                    }
                });
            }); 
```

对于现场演示，请参阅此链接：http: [//jsfiddle.net/nanoquantumtech/JfMCP/](http://jsfiddle.net/nanoquantumtech/JfMCP/)

//或者

```
 $(document).ready(function () {
            $.extend($.expr[':'], {
                unchecked: function (obj) {
                    return ((obj.type == 'checkbox' || obj.type == 'radio') && !$(obj).is(':checked'));
                }
            });

            jQuery.fn.reverse = [].reverse;

            $("#tree input:checkbox").live('change', function () {
                $(this).next('ul').find('input:checkbox').prop('checked', $(this).prop("checked"));

                $('#tree').find("input:checkbox + ul").reverse().each(function () {
                    $(this).prev('input:checkbox').prop('checked', $(this).find('input:unchecked').length === 0 ? true : false);
                });
            });
        }); 
```

//================================================= ===================================//

根据您的 html jquery 代码如下：

```
$(document).ready(function () {
            $.extend($.expr[':'], {
                unchecked: function (obj) {
                    return ((obj.type == 'checkbox' || obj.type == 'radio') && !$(obj).is(':checked'));
                }
            });

            jQuery.fn.reverse = [].reverse;

            $('#PagesTree').find('input:checkbox').live('change', function () {
                $('#' + $(this).attr('name').replace(/CheckBox/g, '') + 'Nodes').find('input:checkbox').prop('checked', $(this).prop("checked"));

                $('#PagesTree').find('input:checkbox').reverse().each(function () {
                    var obj = $('#' + $(this).attr('name').replace(/CheckBox/g, '') + 'Nodes');
                    if (obj.find('input:checkbox').length > 0)
                        $(this).prop('checked', obj.find('input:unchecked').length === 0 ? true : false);
                });
            });
        }); 
```

对于现场演示，请参阅此链接：http: [//jsfiddle.net/nanoquantumtech/GmT7U/](http://jsfiddle.net/nanoquantumtech/GmT7U/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:17:04.293

尝试这个...

```
$(document).ready(function() {
$("#tree input:checkbox").change(function() {
    var val = $(this).attr("checked");
    $(this).parent().find("input:checkbox").each(function() {
        if (val) {
            $(this).attr("checked", "checked");
        } else {
            $(this).removeAttr("checked");
            $(this).parents('ul').each(function(){
                $(this).prev('input:checkbox').removeAttr("checked");
             });
        }
    });
}); 
```

});

# c# - 一种在整个项目中封装类属性的通用/简单方法

> ID：10736177
> 
> 赞同：1
> 
> 时间：2012-05-24T11:00:40.587
> 
> 标签：c#, reflection, properties

我目前正在设计一个 winforms 应用程序，该应用程序需要能够将各种类中各种属性的值输出到串行/udp 端口​​。

我想知道是否有一种简单的方法可以在运行时迭代此项目中的所有类实例，然后向用户显示一个选择的一堆（可能是通过使用属性？）及其相应的字符串值，以便他们可以输出任何这些值的组合。

因此，对于（简化的）示例，假设我有两个类：

```
public class ClassA
{
  public double Price{get;set;}
  public int Units{get;set}
  //other properties that I don't want visible to the user
}

public class ClassB
{
  public string Name{get;set;}
  public string Description{get;set;}
  //other properties not visible to the user
} 
```

我将在运行时实例化这些类的许多实例（它们可能不一定相互链接/引用/相关）。

例如

```
public ClassA Cars = new ClassA();
public ClassB Models = new ClassB();
public ClassA PCs = new ClassA();
//set properties of these instances
//etc.. more of these 
```

我想收集所有这些实例并向用户显示相应的字段：

```
Cars.Price = "1000";
Cars.Units = "3";
Models.Name = "BMW";
Models.Description = "Luxury Car";
PCs.Price = "3000";
PCs.Units = "20"; 
```

请注意，这些值将在运行时发生变化，并且在发送数据时需要更新。我希望有人可以在这里为我指明正确的方向。

编辑

看起来这可能不可行。

有没有办法可以存储对象列表，这些对象指向我的属性/字段，以便我可以检索它的值？当然假设这些类实例只会创建一次，我可以在我的输出类中注册类属性/字段。那么输出类可以遍历这个列表，取回它所指向的对象的值，然后把需要的数据发送出去呢？

例如

```
class OutputData
{
  Dictionary<string,object> OutputDataList = new Dictionary<string,object>();

  public void RegisterData(string displayName, ref object dataField)
  {
    OutputDataList.Add(displayName,dataField);
  }

  //iterate over OutputDataList and get the value of the property/field it points to
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T05:02:51.883

如果所有这些对象在应用程序的生命周期中都存在，并且您只需要跟踪所有这些对象，则可以在每个类的构造函数中执行此操作，例如：

```
public class Tracker
{
  public static List<object> AllObjects = new List<object>();
}

public class ClassA
{
   public ClassA()
   {
      Tracker.AllObjects.Add(this);
   }
   ...
} 
```

这样，您只需要修改要跟踪的类，实例就会在整个列表中得到跟踪。对于要跟踪哪些字段的问题，您可以使用反射，也可以在所有对象中存储更有趣的`Func<List<string>>`内容，也许 a 返回所有感兴趣的值。

然后添加行将是：

```
 Tracker.AllObjects.Add(() => 
          { 
            yield return "Name:" + this.Name; 
            yield return "Description:" + this.Description;
          }); 
```

然后你可以这样做：

```
var ouputLines = Tracker.AllObjects.SelectMany(o => o()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T04:55:34.400

好吧，这看起来像是一些*领域*：

```
public ClassA Cars = new ClassA();
public ClassB Models = new ClassB();
public ClassA PCs = new ClassA(); 
```

所以让我们明确一点：

```
public class Something {
    public ClassA Cars = new ClassA();
    public ClassB Models = new ClassB();
    public ClassA PCs = new ClassA();
} 
```

因此，假设这些是某物中的字段，快速通过反射将找到它们。到现在为止还挺好。

您需要了解的是，该字段的名称（例如“Cars”）与变量的实例无关 - 它与包含该字段的类的实例相关联，在本例中为 some `Something`。

要理解为什么，想象一下这段代码：

```
var a = new Something();
var b = new Something();
b.PCs = a.Cars; 
```

现在我们有一个 ClassA 类型的变量，它存储在 a.Cars*和*b.PCs 中。你会使用哪个标签？

你需要有一本关于这些东西的字典，或者以其他方式限制它们的名称。这样的事情会做：

```
public Dictionary<String, Object> myStuff = new Dictionary<String, Object> { { "Cars", new ClassA() }, { "Models", new ClassB() }, { "PCs", new ClassA() } };

// then, to get the field names and values

var someObject = myStuff["PCs"];
foreach (var fi in someObject.GetType().GetFields()) {
    var fieldName = fi.Name;
    var fieldValue = fi.GetValue(someObject);
    // Do something here
} 
```

# javascript - Javascript函数打开一个没有被调用的文件

> ID：10736181
> 
> 赞同：1
> 
> 时间：2012-05-24T11:00:52.450
> 
> 标签：javascript, asp.net-mvc-3, asp.net-mvc-ajax

我在调用 javascript 函数时遇到问题
我想通过单击链接打开文件。

这是我的代码：

```
<script language="javascript" type="text/javascript">
var refViewer = null;

function OpenViewerWindow(image) {
    return window.open(image, "Viewer", "height=400px,width=550px,menubar=no,scrollbars=yes ,resizable=yes,top=100px,left=234px");

}

function openViewer(image) {

    if (refViewer != null) {
        if (refViewer.closed == false) {
            refViewer.close();
            refViewer = OpenViewerWindow(image);
        }
        else refViewer = OpenViewerWindow(image);
    }
    else
        refViewer = OpenViewerWindow(image);
}   

</script>

<a onclick=javascript:openViewer(@ViewBag.path)><img src="pic.jpg"/></a> 
```

和在控制器中：

```
 public ActionResult ActivityPosting(int HobbyDetailID)
    {
string filepath = Server.MapPath("~/ePortfolio/PortFolioContent/" + HobbyDetailID + "/ReferenceMaterial/" + item.FilePath);
 ViewBag.path = filepath;
    return view();
   } 
```

问题是javascript函数没有被调用。请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:04:57.487

在你的 JavaScript`OpenViewerWindow`函数中试试这个（你需要使用`file://`协议：

```
return window.open("file://" + image, "Viewer", "height=400px,width=550px,menubar=no,scrollbars=yes   ,resizable=yes,top=100px,left=234px") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:06:59.203

确保传递一个字符串：

```
<a onclick=javascript:openViewer('@ViewBag.path')><img src="pic.jpg"/></a> 
```

注意单引号。或者甚至更好地使用 Json.Encode 来确保正确编码传递给您的`openViewer`javascript 函数的值：

```
<a onclick="javascript:openViewer(@Html.Raw(Json.Encode(ViewBag.path)))"><img src="pic.jpg"/></a> 
```

您的代码还有另一个问题。您用于`Server.MapPath`计算 url，但此方法返回服务器上文件的绝对路径。客户端显然无法使用绝对路径访问它。您应该使用帮助程序传递一个 url `Url.Content`：

```
public ActionResult ActivityPosting(int HobbyDetailID)
{
    string filepath = Url.Content("~/ePortfolio/PortFolioContent/" + HobbyDetailID + "/ReferenceMaterial/" + item.FilePath");
    ViewBag.path = filepath;
    return View();
} 
```

# java - EJB 限制：损害组件的可分发性

> ID：10736185
> 
> 赞同：1
> 
> 时间：2012-05-24T11:01:06.333
> 
> 标签：java, jakarta-ee, jboss, ejb, jboss5.x

如此链接中所述，似乎禁止从 EJB 读取文件：

[http://java.sun.com/blueprints/qanda/ejb_tier/restrictions.html#file_access](http://java.sun.com/blueprints/qanda/ejb_tier/restrictions.html#file_access)

> 不允许企业 bean 访问文件主要是因为文件不是事务性资源。允许 EJB 访问文件系统中的文件或目录，或者使用文件描述符，**会损害组件的可分发性，并且会带来安全隐患。**

什么是“妥协组件可分配性”？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:50:17.887

摘自[如何](http://onjava.com/pub/a/onjava/excerpt/java_servlets_ch12/index.html?page=2#how2be)从 Enterprise Servlet 和 J2EE 分发：

> EJB 可以分布在多个后端机器上，并且可以根据容器的判断在机器之间移动。要启用此分发模型，EJB 必须遵循严格的规范定义的规则集，以了解他们可以做什么和不能做什么。

文件系统可能因机器而异，文件描述符肯定是不同的。使用它们可以防止 EJB 迁移和/或钝化。

也可以看看

*   [如何从 EJB 3 访问文件系统？](https://stackoverflow.com/questions/1357667/how-to-access-the-file-system-from-an-ejb-3)
*   [Java EE、EJB 文件处理](https://stackoverflow.com/questions/5286974/java-ee-ejbs-file-handling)

# python - Redis 转储到 PostgreSQL

> ID：10736188
> 
> 赞同：3
> 
> 时间：2012-05-24T11:01:10.123
> 
> 标签：python, postgresql, redis

例如，我希望 Redis 每 5 分钟存储一次数据并在 PostgreSQL 中转储所有信息，或者如果更改了超过 50 个键。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:00:14.293

**1）**你为什么要这样做？Redis 已经具备非常好的[持久化特性](http://antirez.com/post/redis-persistence-demystified.html)。看那些。

**2）**如果您确定要这样做（我不是），则必须将数据从一种方案转换为另一种方案：键值存储（Redis）中的数据必须以完全不同的方式组织方式比在关系数据库（PostgreSQL）中。此转换的复杂性取决于数据的确切性质，并且必须由自定义代码执行。

# java - 将带有时间的字符串转换为毫秒数

> ID：10736190
> 
> 赞同：2
> 
> 时间：2012-05-24T11:01:12.930
> 
> 标签：java

我需要将以下字符串转换为我尝试使用以下代码执行此操作的秒数：

```
String sDuration = "00:00:24.20";
SimpleDateFormat dateFormat = new SimpleDateFormat("HH:mm:ss.SS");
videoLength = dateFormat.parse(sDuration);
Logger.debug("Duration: " + videoLength + " timestamp: " + videoLength.getTime()); 
```

但我得到的回应是：

```
Duration: Thu Jan 01 00:00:24 GMT 1970 timestamp: -3575980 
```

第一个看起来不错，但我需要 .getTime() 进行计算，我得到一个负数？我预计会得到类似 24200 的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T11:05:48.953

不完全确定是否`Date`打算用于持续时间（而不是时间点）。

不过，这是另一种方法：

```
String[] hms = sDuration.split(":");

double sec = Integer.parseInt(hms[0]) * 3600
           + Integer.parseInt(hms[1]) * 60
           + Double.parseDouble(hms[2]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T11:08:28.577

还有一种方法：

```
String sDuration = "00:00:24.20";
SimpleDateFormat dateFormat = new SimpleDateFormat("HH:mm:ss.SS");
Date end = dateFormat.parse(sDuration);
Date start = dateFormat.parse("00:00:00.00");
System.out.println("Duration: " + (end.getTime() - start.getTime())); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T11:18:38.463

我一直在做一些测试，这些背后的原因是你所在的时区。

如果我做

```
Date begin = new Date().setTime(0);
System.out.println(begin); 
```

我得到这个输出：

1970 年 1 月 1 日星期四 01:00:00 CET

因此，对于我的时区，00:00::00 和 01:00:00 之间的任何时间都将具有负毫秒数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T11:28:10.213

不要忘记 SimpleDateFormat**不是**线程安全的，它应该这样调用：

```
 private static final ThreadLocal<SimpleDateFormat> SIMPLE_DATE_FORMAT = new ThreadLocal<SimpleDateFormat>() {
    @Override protected SimpleDateFormat initialValue() { return new SimpleDateFormat("format"); };
    @Override public void set(SimpleDateFormat value) { /*...*/ };
}; 
```

# java - 转换数组列表< > 字符串 android java

> ID：10736191
> 
> 赞同：-2
> 
> 时间：2012-05-24T11:01:18.847
> 
> 标签：java, android

如何将 ArrayList<> 转换为字符串 ...

细节：

step1：发送电子邮件地址到 php mySql 数据库 step2：如果电子邮件地址与数据库内容匹配，则回显成功 step3：检索 php 回显值（“success”） step4：将响应分配给字符串 phpEchoedVal step5：比较 phpEchoedVal 与“成功” step6：将电子邮件写入 sd 卡

这个可以吗//url = 电子邮件地址

ArrayList nameValuePair = new ArrayList(1);

```
 nameValuePair.add(new BasicNameValuePair("url", url));

  try {
        //open an httpclient connection

        HttpClient httpclient = new DefaultHttpClient();

        HttpPost httppost = new HttpPost(strLink);

        httppost.setEntity(new UrlEncodedFormEntity(data));

            //response retrieve "success" echoed from server

        ResponseHandler<String> handleResponse = new BasicResponseHandler();

            //converts server response to string.

        String phpEchoVal = httpclient.execute(httppost, handleResponse);

        txtInfo.setText(phpEchoVal);

        String containEmail = txtInfo.getText().toString();

            //compare response from server with local string

            // if successful write email to sd card

        if ((containEmail.equals("success"))){

            //create a new text file

            File myFile = new File("/sdcard/moLarouteReg.txt");

            myFile.createNewFile();

            FileOutputStream fOut = new FileOutputStream(myFile);

            OutputStreamWriter myOutWriter = new OutputStreamWriter(fOut);

            myOutWriter.append(containEmail);

            //close writer
            myOutWriter.close();

        fOut.close();

        //Open menu

          Intent openMenu = new Intent("com.molaroute.mu.Menu");

            startActivity(openMenu);

            finish();

        Log.d("test","fileWritten: "+myOutWriter);

        }else {

            ...
        }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:02:49.313

```
ArrayList<MyType> l = new ArrayList<MyType>();
// fill

System.out.println(l.toString()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T11:37:50.920

对于您的第一个问题；如何将数组列表（包含名称值对对象）中的字符串与其他字符串匹配：

```
 ArrayList<NameValuePair> lst = new ArrayList<NameValuePair>(); //Instantiate arraylist
    lst.add(new BasicNameValuePair("fruit", "apple")); //add entry
    lst.add(new BasicNameValuePair("animal", "monkey")); //add entry
    String strToCompareAgainst = "apple"; //str to compare to for example
    for(NameValuePair valPair : lst) { //foreach loop
        if(valPair.getValue().equals(strToCompareAgainst)) { //retrieve value of the current NameValuePair and compare
            Log.d("login","moooooo"); //success
        }
    } 
```

您还可以检查一个文本是否包含另一个文本，而不是检查是否相等。

```
String str1 = "I am a success";
String str2 = "success";

if(str1.contains(str2)) {}  //Evaluates to true, because str1 contains the word "success"

if(str1.equals(str2)) {} //Evaluates to false, because str1 does not hold the same value as str2 
```

当然你可以做更多，但这应该给你基本的想法..

对于你的第二个问题：

HttpClient.execute() 返回一个 HttpResponse。从 HttpResponse，您可以调用 getEntity，它返回一个 HttpEntity 从 HttpEntity，您可以调用 getContent，它返回一个 InputStream。

您可以将此 InputStream 转换为字符串。示例转换代码片段在网络上广泛流传。

所以代码：

```
httpResponse = client.execute(post, _httpContext);
        //Set the response code from the request's responst.
        setResponseCode(httpResponse.getStatusLine().getStatusCode());
        //Retrieve the body of the response.
        entity = httpResponse.getEntity();

        if(entity != null) {
            //Retrieve the content from the body.
            _inStream = entity.getContent();
            //Convert the InputStream to String and set the String response to the returned value.
            setStringResponse(IOUtility.convertStreamToString(_inStream));
            //Close the InputStream.
            Log.d(TAG, getStringResponse());
        } 
```

请注意，在这种情况下，IOUtility 是自编写的类。我认为还有其他方法可以将 HttpResponse 转换为字符串，但这就是我的做法。

_inStream 是一个 InputStream，entity 是一个 HttpEntity，其余的应该是不言自明的。

# java - 从垃圾收集日志中确定内存泄漏

> ID：10736196
> 
> 赞同：0
> 
> 时间：2012-05-24T11:01:38.527
> 
> 标签：java, memory-leaks, garbage-collection, profiling

我正在像这样运行我的java文件。

```
java -Xmx8m -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -Xloggc:D:/MyExample/my.log MyJava 
```

我如何从 my.log 的垃圾收集日志中解释我的程序中是否存在内存泄漏？

请不要建议使用工具来阅读我的日志。我想知道如何解读GC日志以确定是否存在内存泄漏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:36:21.230

在 Java 中您可以拥有的是不希望的内存保留。这不是严格意义上的内存泄漏，但仍然可能是一个问题。

最简单的做法是查看一次 FULL GC 后使用了多少内存。这会告诉您保留的内存量。如果保留的数量在您期望它保持稳定后继续增长，那么您就有“泄漏”只有您可以确定您期望它在什么时候保持稳定（不会显着增加或减少）

# c# - 如何使用 EntityFramework 4.0 将 C# 应用程序升级到 4.3.1

> ID：10736197
> 
> 赞同：2
> 
> 时间：2012-05-24T11:01:39.883
> 
> 标签：c#, entity-framework-4.3

我们有一个 ASP.Net 应用程序，它是使用 .Net 4.0 的一部分的 Entity Framework 4.0 构建的。在阅读了许多关于新特性的文章，最重要的是，4.1、4.2 和 4.3 生成的更简洁的 SQL 之后，我们决定借此机会升级我们的应用程序以使用 4.3.1。

我使用 NuGet 将 4.3.1 安装到应用程序中，它成功安装了 EntityFramework.dll；它添加了对它的引用，当我构建时，它被添加到 bin 文件夹中。在运行时，一切都运行良好，但是查看 SQL 分析器并使用 Hibernatine Rhinos 的 Entity Framework Profiler，SQL 似乎是相同的。

由于 NuGet 所做的唯一事情是添加一个引用，我假设我需要做一些其他事情来强制应用程序在运行时使用 4.3.1，但我无法找出我必须做什么。

我很欣赏 SQL 对于正在运行的查询可能是相同的，并且仅查看生成的 SQL 可能不会显示任何差异，但我希望能够确认新版本确实在运行时使用。

我是否需要在 web.config 中添加其他内容以确保使用 4.3.1 或者我所做的是否足够？当然，我需要在某处进行更改，以便让 System.Data.Entity 之类的东西来自新的 EntityFramework.dll 而不是标准的 .Net4.0 库。

感激地收到任何帮助。斯特

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T17:58:33.363

这是对[meetjaydeep](https://stackoverflow.com/users/348971/meetjaydeep)步骤答案的重申。感谢他和[dpblog](http://social.msdn.microsoft.com/profile/dpblogs/)，我从那里获得了大部分信息。

[按照此处](http://msdn.microsoft.com/en-us/data/hh913624.aspx)所述安装 EF 4.3.1 。

**安装 EF 4.3.1**
请注意，在进行升级之前，这将暂时破坏您的代码。所以我建议在继续之前做一个备份。

1.  如果尚未安装 NuGet，请安装它。
2.  打开 NuGet 包管理器控制台（VS2010 菜单栏 > 工具 > 库包管理器）
3.  加载完成后执行此命令，请确保从下拉菜单中选择正确的项目，然后再按 Enter：Install-Package EntityFramework -Version 4.3.1

[按照此处](http://blogs.msdn.com/b/adonet/archive/2011/09/28/ef-4-2-model-amp-database-first-walkthrough.aspx)所述将 EF 4.0 升级到 EF 4.3.1 （我将直接跳到第 4 步）。

**从 EF 4.0 升级到 EF 4.3.1**
请注意 - 仅仅因为您安装了 EF 4.3.1，并不意味着您已经完成。您刚刚所做的只是给自己一个使用新模板的选项（根据我自己这样做后所看到的）。现在是时候使用这些新模板了。

1.  打开您的 EDMX 设计视图。
2.  在设计表面上；右键 > 添加代码生成项
3.  从左侧菜单中选择“在线模板”
4.  搜索“DbContext”
5.  从列表中选择“EF 4.x DbContext Generator”
6.  将此项目的名称与您的 EDMX 名称不同。“_____Model.tt”（填空）。我使用了 ___DBCModel.tt - 示例：FooDBCModel.tt
7.  点击“添加”</li>
8.  验证是否已创建两个文件：例如 FooDBCModel.tt 和 FooDBCModel.Context.tt。

**修复您现在稍微损坏的代码**
您的代码现在无法编译 - 不要绝望 - 那是因为您刚刚所做的是将 System.Data.Objects.ObjectContext 替换为新的和改进的（无论如何对我而言）System.Data。 Entity.DbContext (Yaaaaay...)

*   您需要更新所有 CUD（创建、更新、删除）方法。
*   而不是使用 context.AddToEntityNameHere(...) 使用 context.EntityNameHere.Add(...)
*   示例：context.AddToProducts(product) > context.Products.Add(product)
*   您现在可以访问数据库属性
*   您现在可以访问 Entry(...) 方法。
*   您现在可以明确说明在更新期间要更新哪些属性 (context.SaveChanges())。感兴趣的？看[这里](https://stackoverflow.com/questions/10257360/how-to-update-not-every-fields-of-an-object-using-entity-framework-and-entitysta)。

在我看来，额外的工作是完全值得的。EF 4.0 的局限性太大了。EF 4.3.1 更加灵活，我喜欢它提供的语法糖。我确信 EF 5.0 会更好，但我现在无法实现飞跃。

享受。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T11:42:22.977

要使 EF4.3.1 可用，您应该首先安装 EF4.1 update1 并使用最新的 NuGet。

EF4.0 是数据库优先或模型优先，如果要升级到 EF4.3，最简单的方法是使用“代码生成器”：http: [//blogs.msdn.com/b/adonet/archive/2011/09/ 28/ef-4-2-model-amp-database-first-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2011/09/28/ef-4-2-model-amp-database-first-walkthrough.aspx)

# google-maps - phonegap 本地缓存 google maps 静态图片

> ID：10736200
> 
> 赞同：0
> 
> 时间：2012-05-24T11:01:52.107
> 
> 标签：google-maps, cordova

我正在做一个应用程序，通过他们的静态图像 api 显示谷歌地图。如果用户有连接，则使用通常的 URL“http://maps.google.com/maps/api/staticmap?sensor=false¢er=...”获取地图。然后我将它设置为在后台使用 FileTransfer.download 下载，这样用户下次来的时候，无论有没有连接，都会有地图。

问题是我可以下载很多图片但不能下载谷歌地图，它给出了一个“无效的 url”，我猜这是因为 url 的所有垃圾（很多参数、冒号、管道......）

例如，这是一个错误：

{“来源”：“http://maps.google.com/maps/api/staticmap?sensor=false¢er=42.846452955175835,-1.9212391417618164&zoom=6&size=260x260&markers=color:blue|label:1|42.846452955175835,-1.921239176 color:blue|label:2|40.97136004517963,-5.682259444534338&path=color:0x0000ff|weight:5|42.846452955175835,-1.9212391417618164|40.97136004517963,-5.682259444534338","code":"2","target":"/var/mobile /Applications/5773FF17-42B9-4CA0-9159-E05462140067/Documents/com.test.images/img_place_22.jpg"}

有没有办法处理这个？我看到的唯一选择是在我的服务器上创建一个代理来处理“漂亮的 url”，但这将是很多中间人为这么简单的事情工作。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:21:16.767

实际上我遇到了同样的问题，我通过将[http://maps.google.com](http://maps.google.com)添加到应用程序白名单来解决它（我认为是 android 中的 res/config.xml 文件，iphone 中的 *.plist 文件）

# android - 在 Facebook 上分享文本，而不在应用后台使用 Android Intent

> ID：10736205
> 
> 赞同：0
> 
> 时间：2012-05-24T11:02:06.643
> 
> 标签：android, facebook, future

我做了一个安卓应用。如果我当时选择一种产品，我有产品列表，该产品在 Facebook 上与用户名共享。

有没有可能？如果是，那怎么办？

在我以前的应用程序中，我使用 Android Intent 在 Facebook 上分享。

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:08:06.003

如果您不想使用`Intent`共享。

那么你需要在你的项目中实现用于 facebook 集成的 Graph Api。

更多参考[请看这里](https://developers.facebook.com/docs/mobile/android/build/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T12:02:59.447

您可以使用[Facebook Android SDK](http://developers.facebook.com/docs/mobile/android/build/)。

sdk 使用[SSO](http://developers.facebook.com/docs/mobile/android/build/#sso)，这意味着如果设备安装了 facebook 应用程序，那么该应用程序负责针对 facebook 对用户进行身份验证，这样更好，因为用户不需要输入他的电子邮件/密码（这不是在移动设备上很有趣），但如果您想避免这种情况，它使用了一个意图：[How to disable Facebook single sign on for android - Facebook-android-sdk](https://stackoverflow.com/questions/4521013/how-to-disable-facebook-single-sign-on-for-android-facebook-android-sdk)。

如果您禁用 SSO，则 SDK 将使用其自己的对话框来获取用户的电子邮件/密码。

为了在后台运行，您可以使用[Async API Requests](http://developers.facebook.com/docs/reference/androidsdk/ayncrequest/)

# database - 将 txt 文件拆分为两个文件以插入数据库

> ID：10736208
> 
> 赞同：0
> 
> 时间：2012-05-24T11:02:16.940
> 
> 标签：database

我在拆分从数据库导出的 .txt 文件时遇到问题。

该文件包含经度和纬度坐标，其中每个条目具有以下结构：

```
5d11'25.753"W   39d1'29.733"N 0.000 
```

我需要将此文件拆分为两个单独的文件，一个包含经度，另一个包含纬度。我不需要记录中的 0.000。

关于我如何做到这一点的任何想法，文件很长，我无法手动完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:29:29.030

对于给定的输入文件“input.txt”，这应该使用适当的列创建两个输出（“long.txt”和“lat.txt”）。请注意，如果您再次运行它，您需要删除“long.txt”和“lat.txt”，否则这些列将被简单地附加到现有文件中。

```
for /f "tokens=1,2,3 delims= " %%i in (input.txt) do (
    echo %%i >> long.txt
    echo %%j >> lat.txt
) 
```

基于[这个答案](https://stackoverflow.com/a/98470/592182)。

只需将代码复制到批处理文件（extract.bat）中并运行...

# c# - 如何在 BlockingCollection 中包装 ConcurrentDictionary？

> ID：10736209
> 
> 赞同：6
> 
> 时间：2012-05-24T11:02:18.173
> 
> 标签：c#, concurrency, concurrentdictionary

我尝试通过将 ConcurrentDictionary 包装在 BlockingCollection 中来实现它，但似乎没有成功。

我了解一个变量声明与 BlockingCollection 一起使用，例如`ConcurrentBag<T>`,`ConcurrentQueue<T>`等。

因此，要创建一个包装在 BlockingCollection 中的 ConcurrentBag，我会像这样声明和实例化：

```
BlockingCollection<int> bag = new BlockingCollection<int>(new ConcurrentBag<int>()); 
```

但是如何为 ConcurrentDictionary 做呢？我需要 BlockingCollection 在生产者和消费者端的阻塞功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T14:48:13.817

也许你需要一个blockingCollection的并发字典

```
 ConcurrentDictionary<int, BlockingCollection<string>> mailBoxes = new ConcurrentDictionary<int, BlockingCollection<string>>();
        int maxBoxes = 5;

        CancellationTokenSource cancelationTokenSource = new CancellationTokenSource();
        CancellationToken cancelationToken = cancelationTokenSource.Token;

        Random rnd = new Random();
        // Producer
        Task.Factory.StartNew(() =>
        {
            while (true)
            {
                int index = rnd.Next(0, maxBoxes);
                // put the letter in the mailbox 'index'
                var box = mailBoxes.GetOrAdd(index, new BlockingCollection<string>());
                box.Add("some message " + index, cancelationToken);
                Console.WriteLine("Produced a letter to put in box " + index);

                // Wait simulating a heavy production item.
                Thread.Sleep(1000);
            }
        });

        // Consumer 1
        Task.Factory.StartNew(() =>
        {
            while (true)
            {
                int index = rnd.Next(0, maxBoxes);
                // get the letter in the mailbox 'index'
                var box = mailBoxes.GetOrAdd(index, new BlockingCollection<string>());
                var message = box.Take(cancelationToken);
                Console.WriteLine("Consumed 1: " + message);

                // consume a item cost less than produce it:
                Thread.Sleep(50);
            }
        });

        // Consumer 2
        Task.Factory.StartNew(() =>
        {
            while (true)
            {
                int index = rnd.Next(0, maxBoxes);
                // get the letter in the mailbox 'index'
                var box = mailBoxes.GetOrAdd(index, new BlockingCollection<string>());
                var message = box.Take(cancelationToken);
                Console.WriteLine("Consumed 2: " + message);

                // consume a item cost less than produce it:
                Thread.Sleep(50);
            }
        });

        Console.ReadLine();
        cancelationTokenSource.Cancel(); 
```

通过这种方式，在邮箱 5 中期待某物的消费者将等到生产者将一封信放入邮箱 5 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:19:06.097

您需要编写自己的适配器类 - 例如：

```
 public class ConcurrentDictionaryWrapper<TKey,TValue> : IProducerConsumerCollection<KeyValuePair<TKey,TValue>>
{
    private ConcurrentDictionary<TKey, TValue> dictionary;

    public IEnumerator<KeyValuePair<TKey, TValue>> GetEnumerator()
    {
        return dictionary.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }

    public void CopyTo(Array array, int index)
    {
        throw new NotImplementedException();
    }

    public int Count
    {
        get { return dictionary.Count; }
    }

    public object SyncRoot
    {
        get { return this; }
    }

    public bool IsSynchronized
    {
        get { return true; }
    }

    public void CopyTo(KeyValuePair<TKey, TValue>[] array, int index)
    {
        throw new NotImplementedException();
    }

    public bool TryAdd(KeyValuePair<TKey, TValue> item)
    {
        return dictionary.TryAdd(item.Key, item.Value);
    }

    public bool TryTake(out KeyValuePair<TKey, TValue> item)
    {
        item = dictionary.FirstOrDefault();
        TValue value;
        return dictionary.TryRemove(item.Key, out value);
    }

    public KeyValuePair<TKey, TValue>[] ToArray()
    {
        throw new NotImplementedException();
    }
} 
```

# file - 虽然文件存在于 bash

> ID：10736211
> 
> 赞同：1
> 
> 时间：2012-05-24T11:02:25.630
> 
> 标签：file, shell, while-loop, exists

它几乎检查文件'ok.temp'是否存在。如果不是，它会在再次检查之前进入睡眠循环 2 秒。在文件被认为存在后，它会继续。

不幸的是，我收到以下代码中所述的错误：

```
#!/bin/sh
# Read the sensor values
if [ ! -f saved.txt ]
then
    touch saved.txt
fi 

#saved values count
sCount=0

#value aggregates
vTTemp=0
vTHumid=0
vTLux=0

#previous aggregates
pTTemp=0
pTHumid=0
pTLux=0

while : 
do
vTemp=0
vHumid=0
vLux=0

if [ $sCount -gt 0 ] 
then
    if [ $(( $sCount % 5 )) -eq 0 ]
    then
        #set previous aggregates as current
        pTTemp=$vTTemp
        pTHumid=$vTHumid
        pTLux=$vTLux

        #reset current aggregates
        vTTemp=0
        vTHumid=0
        vTLux=0
    fi
fi

    while [ ! –f ok.temp ]
    do
        sleep 20
    done

    if [ -f logfile.txt ]
    then
        rResult=`tail -1 logfile.txt`
        rSaved=`tail -1 saved.txt`
        if [ $rResult -eq $rSaved ]
        then
            vTemp=`echo $rResult | cut -d" " -f1`
            vHumid=`echo $rResult | cut -d" " -f2`
            vLux=`echo $rResult | cut -d" " -f3`
            echo $rResult >> saved.txt

            # aggregate results
            vTTemp=`expr $vTTemp + $vTemp`
            vTHumid=`expr $vTHumid + $vHumid`
            vTLux=`expr $vTLux + $vLux`
            echo 'Most recent results recieved from sensor has been saved'
        else
            echo 'Most recent result has already been saved, skipping'
        fi
    fi

    echo '[Previous] Temp:'$pTTemp' Humid:'$pTHumid' Lux:'$pTLux
    echo '[Current] Temp:'$vTTemp' Humid:'$vTHumid' Lux:'$vTLux

    sCount=`expr $sCount + 1`
done 
```

我收到这些错误：

第 43 行 = 而 [ ! -f ok.t​​emp]

```
line 43: [: f: unary operator expected 
```

第 52 行 = 如果 [ $rResult -eq $rSaved ]

```
line 52: [: too many arguments 
```

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:14:19.620

这不是第 43 行中的破折号 - 它是一个[破折号](http://www.fileformat.info/info/unicode/char/2013/index.htm)（复制它并在该页面上搜索以查看它）。您是否从博客中复制了该代码？他们经常在不应该的地方进行此类替换。代码应为：

```
while [ ! -f ok.temp ] 
```

`-eq`用于数字，而不是字符串 - 这应该可以解决问题（引号很重要）：

```
if [ "$rResult" = "$rSaved" ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:06:22.117

很可能是因为您使用了在单方括号内为空的未加引号的变量。您可以通过使用首选的双方括号形式或引用变量来解决此问题（两者都不是必需的）。

您已经标记了您的问题[bash](/questions/tagged/bash "显示标记为“bash”的问题")，但是您的 shebang 说`#!/bin/sh`并且您的脚本形式遵循 Bourne shell 约定，而不是使用 Bash 特定的功能。如果您愿意，我可以评论您如何利用这些 Bash 功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T11:10:25.440

脚本中可能未设置某些变量或为空。您可以设置`set -x`打开调试模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T11:16:43.527

您的变量之一为空，或包含多个单词。使用引号：

```
if [ "$rResult" = "$rSaved" ] 
```

# cookies - Cookie 过期不适用于 Symonfy 2

> ID：10736213
> 
> 赞同：1
> 
> 时间：2012-05-24T11:02:28.777
> 
> 标签：cookies, symfony

我正在尝试在 symfony2 项目中设置 cookie。一切正常，除了浏览器关闭后cookie被删除。我试图设置过期时间，但它会引发错误：`Expiry date cannot have a year greater then 9999`

我该如何解决？

这是我的代码：

```
$time = time() * 3600 * 24 * 7;
$response = new Response();
$response->headers->setCookie(new Cookie('lang', $lang, $time));
$response->send(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T13:33:27.913

你的`$time`计算应该是

```
$time = time() + (3600 * 24 * 7); 
```

# java - Javamail 标头解析错误

> ID：10736218
> 
> 赞同：0
> 
> 时间：2012-05-24T11:02:46.817
> 
> 标签：java, jakarta-mail, mime, postfix-mta

我正在使用 Javamail 库从 Postfix 电子邮件服务器检索消息。我遇到了一些交付失败通知的问题。我已将问题追溯到标头解析例程，尝试解析以下标头时会引发异常：

`Content-Type: multipart/mixed; boundary=----=_IMSS7_NDR_MIME_Boundary`

检查了 mail.jar 库（版本 1.4.5）的源代码后，我得到的异常是从`javax.mail.internet.ParameterList(String s)`构造函数中抛出的 - 标题似乎没有像我预期的那样被标记化，它看起来像 EQUALS在四个连字符之后签名会导致问题，因为如果我删除它并将边界更改为`----_IMSS7_NDR_MIME_Boundary`消息解析很好。

这是 Javamail 或我的邮件服务器中的错误吗？我正在考虑后者，因为通过 IETF 验证器[http://tools.ietf.org/tools/msglint/](http://tools.ietf.org/tools/msglint/)运行邮件它告诉我 Content-Type 行有错误。如果它是 Postfix 中的错误，有没有办法修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:14:20.580

是的，这是创建消息的程序中的一个错误。那可能不是您的邮件服务器。尝试将系统属性“mail.mime.parameters.strict”设置为“false”。[在这里](http://javamail.kenai.com/nonav/javadocs/javax/mail/internet/package-summary.html)查看更多关于属性的信息。

# jquery - shadowbox完成打开时如何调用函数

> ID：10736224
> 
> 赞同：0
> 
> 时间：2012-05-24T11:03:00.827
> 
> 标签：jquery, html, shadowbox

当 shadowbox 打开并显示在我的页面中时，我需要调用一个函数。我试试这个：

```
Shadowbox.open({
    content:    contentD,
    player:     "html",
    title:      "Pubblicazione annunci in corso...",
    height:     350,
    width:      350,
    options: { 
            modal:   true,
            onOpen: myOpen
    }
});

function myOpen(){
   alert('ok');
} 
```

我的问题是`alert('ok')`在显示 shadowbox 之前显示，我该怎么办？有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:17:29.567

将 onOpen 更改为 onClose ;)

```
Shadowbox.open({
    content:    contentD,
    player:     "html",
    title:      "Pubblicazione annunci in corso...",
    height:     350,
    width:      350,
    options: { 
            modal:   true,
            onClose: myOpen
    }
}); 
```

# java - 如果按下 Esc 则中断循环

> ID：10736226
> 
> 赞同：3
> 
> 时间：2012-05-24T11:03:01.123
> 
> 标签：java, loops, break

我用 JAVA 语言编写了一个程序，它通过使用 Scanner 类接受来自控制台的输入......

现在我想将此功能添加到我的代码中，以便在用户按下 Esc 按钮时存在循环（while）。到目前为止，我认为键盘类可以帮助我，但它就像扫描仪......我尝试使用事件但不知道如何正确使用它们......

源代码：

```
 package switchCase_v1;

     import cs1.Keyboard;
     import java.util.EventObject;
     import java.awt.AWTEvent;
     import java.awt.event.KeyEvent;
     import java.awt.event.ComponentEvent;
     import java.awt.event.InputEvent;
     import java.util.*;

      public class SwithCase {

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        Scanner input = new Scanner(System.in);
        System.out.println("enter the name or number of month: ");
        int monthNumber = input.nextInt();

        while (true) {
            KeyEvent button;
            if (button.getKeyCode() == 27)
                break;
            else if (monthNumber == '\n') {
                System.out.println("enter a number");
                monthNumber = input.nextInt();
            } else {
                switch (monthNumber) {
                case 1:
                case 2:
                case 3:
                case 4:
                case 5:
                case 6:
                    System.out.println("it has 31 days");
                    monthNumber = input.nextInt();
                    break;
                case 7:
                case 8:
                case 9:
                case 10:
                case 11:
                case 12:
                    System.out.println("it has 30 days");
                    monthNumber = input.nextInt();
                    break;
                default:
                    System.out.println("it is not a valid number");
                    monthNumber = input.nextInt();
                    break;
                }
            }

        }
    }
  } 
```

当我想考虑“Esc”或“Enter”等点击按钮时，我该如何处理？我认为它也应该适用于使用 ASCII 码。

这是我的代码的新版本：

```
public static void main(String[] args) {
    // TODO Auto-generated method stub

    Scanner input = new Scanner(System.in);
    System.out.print("Check number of days");
    KeyEvent e;
    if (e.getKeyCode() == KeyEvent.VK_ENTER)
    {
    System.out.println("enter the name or number of month: ");
    int monthNumber=input.nextInt();
    }
    else if (Keyboard.getEventKey()==Keyboard.KEY_ESCAPE)
    {
        System.out.println("GoodBye");
    }
    } 
```

}

但它有一个错误说 e 对象可能没有被初始化......!!!!!我该怎么办？！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T13:32:09.403

您目前正在制作一个命令行应用程序，它从标准输入读取内容并将内容打印到标准输出。如何处理按钮按下完全取决于您运行程序的终端，并且大多数终端在按下转义时不会向您的应用程序的标准输入发送任何内容。

如果要捕获关键事件，则必须使用 AWT 或 Swing 制作 GUI 应用程序。如果您只想在程序运行时终止程序，请尝试按 Ctrl+C（这适用于大多数终端）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T19:41:58.353

看看这个页面，它可能会对你有所帮助：http: [//docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)

特别是这部分：

> int getKeyCode()
> 
> 获取与此事件关联的键码。键代码标识用户按下或释放的键盘上的特定键。KeyEvent 类为常见的键定义了许多键代码常量。例如，VK_A 指定标记为 A 的键，而 VK_ESCAPE 指定 Escape 键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-21T10:58:52.080

请注意，Keylisteners 可能并不总是您想要的。更完整的答案还包括对添加 keyBINDINGS 的参考，这有点难以设置但也更通用。这就是如何做到这一点的。

首先创建一个新类。如果耦合动作需要参数，请在构造函数中设置它们。让类扩展 AbstractAction 以便我们可以覆盖 ActionPerformed 方法。

```
public class UserAction extends AbstractAction {

String optionalParam;

UserAction(String optionalParam){
this.optionalParam = optionalParam;
}
@Override
public void actionPerformed(ActionEvent e) {

    System.out.println("Action Performed!");

    }

} 
```

然后调用操作使用以下。请注意，getinputmnap 接受一个参数整数，表示对象的焦点状态。三个有效选项是“JComponent.WHEN_IN_FOCUSSED_WINDOW”“JComponent.WHEN_FOCUSSED”（默认）和“JComponent.WHEN_ANCESTER_OF_FOCUSSED_COMPONENT”。

```
JFrame graphicalUI = new JFrame();

JPanel panelWithKeybind = new JPanel();

Action userAction = new UserAction() //add params as constructor requires

panelWithKeybind.getinputmap(int 
focus_Status_Of_Panel).put(KeyStroke.getKeyStroke("ESCAPE"),"submit"); //Key

panelWithKeybind.getActionMap().put("submit",userAction); 
```

# java - Eclipse，配置项目，源文件夹分离

> ID：10736227
> 
> 赞同：1
> 
> 时间：2012-05-24T11:03:01.607
> 
> 标签：java, eclipse

可能是个问题...

我在 Java 项目中有 2 个目录，它们代表（比如说）模型和视图。这两个目录在 eclipse 中映射为两个源文件夹，都在构建路径上。

视图类可以使用模型类，第二个方向（模型使用视图）是不允许的）。

以这种方式配置 Eclispe 是否可行？

示例（在 IDE 中，编码时）：
我可以在视图逻辑中使用模型中的 aClass（可以导入类等）。
我不能从模型逻辑的视图中使用 aClass（Eclipse 生成的 java 错误）。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:57:20.193

如果您打算`OSGi`为 View 和 Model 使用和创建 2 个不同的项目，那么您可以实现这一点。随着特定项目的类`ViewProject`不能被访问（导入）到另一个说`ModelProject`，除非 ViewProject 将包含该类的包标记为*导出包*并且 ModelProject 将其标记为文件中的*导入包*`Menifest.mf`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:44:37.887

您应该考虑使用默认的 Java[包](http://en.wikipedia.org/wiki/Java_package)系统。这将允许您将源代码拆分为两个包（模型和视图），但将所有文件保留在同一个项目中。

为了防止您的模型类访问视图包中的任何内容，您应该确保视图包中的所有类都具有（或更低）的[修饰符。](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)`protected`

为了确保您的视图可以使用模型包中的类，您应该确保模型包中的所有类（或者至少是您希望能够访问的类）都具有[修饰符](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html).`public`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T11:38:54.943

您可以通过拆分为 2 个项目来做到这一点：模型和视图并在它们之间添加依赖关系。我认为在 Eclipse 的一个项目中是不可能的。但是您可以通过 JSR269 编写一个简单的处理器来实现这一点（检查导入）。

# string - AS3 静默电子邮件发送

> ID：10736229
> 
> 赞同：0
> 
> 时间：2012-05-24T11:03:10.030
> 
> 标签：string, actionscript-3, email, mobile

我正在开发一个 actionscript 3 应用程序，该应用程序需要能够在运行时发送电子邮件，但无需征求用户的同意。这个想法是用户在应用程序打开时给予同意，但在应用程序运行期间的任何其他时间都不会。

对我来说最好的方法是什么。理想情况下使用 AS3，但如果需要也可以嵌入其他代码。

电子邮件将包含来自 AS3 的字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:06:21.713

我不认为用户的同意是这里的问题（至少不是开发人员;））。

然而，问题是 Flash/AS3 根本无法在本地发送电子邮件。您将不得不使用执行此操作的服务器。或者用户的本机电子邮件客户端。

看到[这里](https://stackoverflow.com/questions/1364958/how-to-make-a-button-send-an-email-using-as3-automatically)，这个问题并不陌生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T12:09:25.983

已经有一些非常好的 AS3 库可以为您做到这一点：

[http://www.warmforestflash.com/blog/2009/06/flash-as3-contact-form-using-php/](http://www.warmforestflash.com/blog/2009/06/flash-as3-contact-form-using-php/)

除了生成事件来发送电子邮件之外，您不需要用户的同意。

# php - 使用 CURL 在 php 中读取 JSON url 很热门？

> ID：10736230
> 
> 赞同：0
> 
> 时间：2012-05-24T11:03:19.180
> 
> 标签：php, json

> **可能重复：**
> [使用 curl 获取 url 响应的值](https://stackoverflow.com/questions/2001897/get-the-value-of-an-url-response-with-curl)

我有如下的json url

```
www.example.com/hello.php?action=get&id=18&format=json 
```

它将输出返回为`{"id":18,"name":"Dharma"}`.

如何使用 php curl 函数获取 name 属性？

我想要输出为“佛法”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:18:03.150

您不需要 cURL，只需使用

```
$content = file_get_contents('http://www.example.com/hello.php?action=get&id=18&format=json‌'); 
$array = json_decode($str, TRUE); 
echo $array['name']; 
```

# ios - 如何检测iOS中是否存在大文件？

> ID：10736232
> 
> 赞同：0
> 
> 时间：2012-05-24T11:03:23.033
> 
> 标签：ios, nsfilemanager

在运行时，我的应用程序会下载一些大型视频文件并播放它们。它们很大，所以我认为它们可能随时被系统试图恢复内存所擦除。

我在使用时遇到了麻烦`[fileManager fileExistsAtPath: pathOfVideo]`：

然后我找到了一个[答案](https://stackoverflow.com/a/2457782/194309)，说我们不应该*用*它`-fileExistsAtPath`来确定文件是否存在。

建议的解决方案是*打开*文件并查看它是否在打开时失败。即使是 30MB 的文件？我不太担心这里的比赛条件；文件从服务器下载并在 MediaPlayer 中播放。我是否仍应打开 30MB 文件以查看它是否存在而不是使用 fileExistsAtPath？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:06:22.223

可能这会帮助你

```
NSDictionary *fileAttributes = [fileManager fileAttributesAtPath:filePath traverseLink:YES];
    if(fileAttributes != nil)
    {
        NSString *fileSize = [fileAttributes objectForKey:NSFileSize];
    enter code here

        NSLog(@"File size: %@ kb", fileSize);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:28:39.903

如果不考虑竞争条件，请使用 fileExistsAtPath。iOS 设备上的权限问题是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T12:30:03.447

如果您点击讨论为什么不建议使用的链接`fileExistsAtPath`（请参阅[竞争条件和安全文件操作](https://developer.apple.com/library/mac/#documentation/Security/Conceptual/SecureCodingGuide/Articles/RaceConditions.html#//apple_ref/doc/uid/TP40002585)），考虑到 iPhone 应用程序的沙盒，这可能是一个可以接受的风险。

# css - CSS 媒体查询与背景图像宽度

> ID：10736233
> 
> 赞同：1
> 
> 时间：2012-05-24T11:03:25.753
> 
> 标签：css, mobile, background-image, media-queries

我有生以来第一次尝试使用媒体查询。我想要实现的是移动浏览器的在线表格（基本上适用于 Android MDPI / HPDI 和 iPhone 3 到 4）。

我所做的是对具有 320px 宽度背景图像的 320px 屏幕进行媒体查询，这样：

```
@media only screen
and (min-device-width : 120px)
and (max-device-width : 320px)
{

body {
    background-image:url('../img/bg-320.jpg');
    background-repeat: no-repeat;
    width: 320px;
    height: 436px;
    margin:0; padding:0; border:0;
} 
```

并且，在同一个 css 上，另一个针对具有 480 像素宽度背景图像的小屏幕（宽度小于 480 像素）的媒体查询，这样：

```
@media only screen
and (min-device-width : 320px)
and (max-device-width : 480px)
{

body {
    background-image:url('bg-480.jpg');
    background-repeat: no-repeat;
    width: 480px;
    height: 800px;
    margin:0; padding:0; border:0;
} 
```

检测工作正常，但问题是 480 宽的设备会缩放 480 像素的背景，因为它对他们的屏幕来说太大了，这是胡说八道！

更奇怪的是，如果尝试在 480 宽度的设备上加载 320px-CSS-block（上面的第一个），那么它工作正常！没有变焦！但显然，图像有点模糊。

这也发生在我的 iPod Touch 和我的 HTC Desire 上。

任何人都可以帮助我吗？

顺便说一句，我的标题看起来像：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN"
        "http://www.w3.org/TR/html4/frameset.dtd">
<html>

<head>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />  

    <link type="text/css" href="css/styles.css" rel="stylesheet" />

</head> 
```

*编辑：*

我刚刚意识到媒体查询与我的问题无关。

问题基本上是：**为什么在两个 480px 宽度的设备上，一个 320px-width-background-image 被视为全屏，而一个 480px-width-background-image 被缩放？**这简直是​​胡说八道！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T11:18:35.113

回答：

```
<meta name="viewport" content="width=device-width, target-densitydpi=device-dpi, user-scalable=no" /> 
```

[在这篇文章http://developer.android.com/guide/webapps/targeting.html](http://developer.android.com/guide/webapps/targeting.html)上，一切都得到了很好的解释

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:49:29.707

您还可以使用元标记控制目标 dpi。您应该尝试一下或使用不同的密度值：

`<meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0">`

# zend-framework - 不能在zend框架控制器的功能中定义两个查询吗

> ID：10736234
> 
> 赞同：0
> 
> 时间：2012-05-24T11:03:29.653
> 
> 标签：zend-framework

我是 zend 框架的新手，需要在 zend 控制器的函数中定义两个 mysql 查询，但它显示

错误消息为消息：SQLSTATE [42000]：语法错误或访问冲突：1065 查询为空

```
public function addisplayAction()
  {

    $registry = Zend_Registry::getInstance();  
$DB = $registry['DB'];

   $sql = "SELECT cateno,catename,image FROM hl_category ORDER BY`hl_category`.`cateno` ASC LIMIT 0 , 42";
      $result = $DB->fetchAssoc($sql);
    $sql1 = mysql_query("select * from ad where cid=8");
   $result1 = $DB->fetchAssoc($sql1);
  $this->view->assign('title','Member List');
      $this->view->assign('description','Below, our members:');
       $this->view->assign('datas',$result);    
  $this->view->assign('datas1',$result1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:08:01.703

我的天啊！！！！您正在使用 Zend 框架并输入您的代码 mysql_query() ???? :D

您需要使用 Zend_Db ...

[http://framework.zend.com/manual/1.11/en/zend.db.html](http://framework.zend.com/manual/1.11/en/zend.db.html)

# sql - 如何在 SQL 输出语句创建的 csv 文件中添加列名？

> ID：10736235
> 
> 赞同：2
> 
> 时间：2012-05-24T11:03:30.263
> 
> 标签：sql, csv, header, sqlanywhere

我用了这个语句

```
SELECT * FROM SalesOrders; 
OUTPUT TO 'e:\\output\\rule_criteria.csv' WITH COLUMN NAMES; 
```

我收到一条错误消息，提示此处不应出现“WITH”。有什么办法可以解决这个问题？我正在使用 SQL Anywhere 10。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:53:33.193

WITH COLUMN NAMES 是从 12.0.0 版开始添加到 SQL Anywhere 的扩展，因此 SQL Anywhere 10.x 将无法完成此任务。

但是，您可以先将列名输出到文件中，然后附加 select 语句的结果：

IE

```
SELECT LIST("name" ORDER BY column_number ASC) 
FROM sa_describe_query('SELECT * FROM SalesOrders');
OUTPUT TO 'file.csv';

SELECT * FROM SalesOrders;
OUTPUT TO 'file.csv' APPEND; 
```

版本 10 中 OUTPUT TO 的完整文档在这里：

[OUTPUT 语句 [Interactive SQL]](http://dcx.sybase.com/index.html#1001/en/dbrfen10/rf-output-statement.html)

# java - 在 finally 块中，我可以判断是否抛出了异常

> ID：10736238
> 
> 赞同：45
> 
> 时间：2012-05-24T11:03:35.263
> 
> 标签：java, exception, try-catch-finally

> **可能重复：**
> [是否可以在我进入 finally 块之前检测是否发生异常？](https://stackoverflow.com/questions/184704/is-it-possible-to-detect-if-an-exception-occurred-before-i-entered-a-finally-blo)

我有一个工作流方法可以做事，如果发生错误则抛出异常。我想将报告指标添加到我的工作流程中。在下面的 finally 块中，有什么方法可以判断 try/catch 块中的方法之一是否引发了异常？

我可以添加自己的 catch/throw 代码，但更喜欢更简洁的解决方案，因为这是我在项目中重用的模式。

```
@Override
public void workflowExecutor() throws Exception {
  try {
      reportStartWorkflow();
      doThis();
      doThat();
      workHarder();
  } finally {
      /**
       * Am I here because my workflow finished normally, or because a workflow method
       * threw an exception?
       */
      reportEndWorkflow(); 
  }
} 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-05-24T11:05:49.200

Java没有提供自动方式。您可以使用布尔标志：

```
boolean success = false;
try {
  reportStartWorkflow();
  doThis();
  doThat();
  workHarder();
  success = true;
} finally {
  if (!success) System.out.println("No success");
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-24T11:06:34.953

两种解决方案：调用`reportEndWorkflow`两次，一次在一个`catch`块中，一次在末尾`try`：

```
try {
    // ...
    reportEndWorkflow("success");
} catch (MyException ex) {
    reportEndWorkflow("failure");
} 
```

或者你可以引入一个布尔变量：

```
boolean finished = false;
try {
    // ...
    finished = true;
} finally {
    // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T11:06:02.713

您在那里是因为您的 try-block 已完成执行。是否抛出异常。

要区分何时发生异常或您的方法流执行是否成功完成，您可以尝试执行以下操作：

```
boolean isComplete = false;
try
{
  try
  {
    reportStartWorkflow();
    doThis();
    doThat();
    workHarder();
    isComplete = true;
  }
  catch (Exception e)
  {}
}
finally
{
  if (isComplete)
  {
    // TODO: Some routine
  }
} 
```

# android - Android：在 ExpandableListView 中动态标记复选框

> ID：10736241
> 
> 赞同：1
> 
> 时间：2012-05-24T11:04:05.537
> 
> 标签：android, checkbox, expandablelistview

我正在使用 ExpandableListView，每个子行都有一个 textview 和其中的复选框。

我想要做的是，当用户按下按钮时，活动会找出哪些项目被“检查”并对这些项目做一些事情。

我阅读了很多关于 ExpandableListView 和复选框当前如何无法正常工作的帖子，以及我如何需要保留一个额外的数据结构来跟踪已选择的内容，而不是。这篇文章涵盖了这个问题： [ExpandableListView and checkboxes](https://stackoverflow.com/questions/9813584/expandablelistview-and-checkboxes)

完毕！我现在可以跟踪已选择的内容和未选择的内容。

现在我想解决复选框不显示其状态的问题。我注意到复选框在以下情况下随机更改：

*   屏幕旋转变化
*   一组折叠/打开

我知道可以检测到这些事件。

我想知道是否有办法手动设置复选框。我最初尝试过

```
ExpandableListView elv = getExpandableListView();
for(int i = 0; i < elv.getChildCount(); i++) {
  CheckBox checkbox = ... somehow get checbox within the list
  checkbox.setChecked(checkList.at(i, j));
} 
```

其中 i 和 j 指示哪个组和子项，而 checkList 跟踪已选中/未选中的项目。

但是，我注意到 getChildCount() 的值取决于打开了多少组，并且不一定告诉我可以操作哪个列表项。

ExpandableListView 已被使用，一定有人有办法解决这个问题。有一个聪明的解决方案吗？具体来说，我正在寻找方法来检查/取消选中 onGroupExpand 和 onConfigurationChange （或类似事件）列表中的适当项目。

先感谢您！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T11:45:52.210

检查以下示例可扩展列表适配器

```
/**
     * A simple adapter which maintains an ArrayList of photo resource Ids. 
     * Each photo is displayed as an image. This adapter supports clearing the
     * list of photos and adding a new photo.
     *
     */
    public class MyExpandableListAdapter extends BaseExpandableListAdapter {

        // Sample data set.  children[i] contains the children (String[]) for groups[i].
        private String[] groups = { "People Names", "Dog Names", "Cat Names", "Fish Names" };
        private String[][] children = {
                { "Arnold", "Barry", "Chuck", "David" },
                { "Ace", "Bandit", "Cha-Cha", "Deuce" },
                { "Fluffy", "Snuggles" },
                { "Goldy", "Bubbles" }
        };

        private ArrayList<ArrayList<Boolean>> checkboxStatus = new ArrayList<ArrayList<Boolean>>();

        public MyExpandableListAdapter() {
            int groupCount = groups.length;
            for(int i=0; i<groupCount; i++) 
            {
                int childCount = children[i].length;
                ArrayList<Boolean> childStatus = new ArrayList<Boolean>();
                for(int j=0; j<childCount; j++) {
                    childStatus.add(false);
                }
                checkboxStatus.add(childStatus);
            }
        }

        public Object getChild(int groupPosition, int childPosition) {
            return children[groupPosition][childPosition];
        }

        public long getChildId(int groupPosition, int childPosition) {
            return childPosition;
        }

        public int getChildrenCount(int groupPosition) {
            return children[groupPosition].length;
        }

        public TextView getGenericView() {

            // Layout parameters for the ExpandableListView
            AbsListView.LayoutParams lp = new AbsListView.LayoutParams(
                    ViewGroup.LayoutParams.MATCH_PARENT, 64);

            TextView textView = new TextView(ExpandableListCheckboxActivity.this);
            textView.setLayoutParams(lp);
            // Center the text vertically
            textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.LEFT);
            // Set the text starting position
            textView.setPadding(36, 0, 0, 0);
            return textView;
        }

        public View getChildView(int groupPosition, int childPosition, boolean isLastChild,
                View convertView, ViewGroup parent) {

            CheckBox chkbox = new CheckBox(ExpandableListCheckboxActivity.this);
            chkbox.setTag("" + groupPosition + "," + childPosition);
            chkbox.setOnCheckedChangeListener(checkboxListener);
            chkbox.setText(children[groupPosition][childPosition]);

            chkbox.setChecked(checkboxStatus.get(groupPosition).get(childPosition));

            return chkbox;
        }

        public Object getGroup(int groupPosition) {
            return groups[groupPosition];
        }

        public int getGroupCount() {
            return groups.length;
        }

        public long getGroupId(int groupPosition) {
            return groupPosition;
        }

        public View getGroupView(int groupPosition, boolean isExpanded, View convertView,
                ViewGroup parent) {
            TextView textView = getGenericView();
            textView.setText(getGroup(groupPosition).toString());

            return textView;
        }

        public boolean isChildSelectable(int groupPosition, int childPosition) {
            return true;
        }

        public boolean hasStableIds() {
            return true;
        }

        private OnCheckedChangeListener checkboxListener = new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                String positions = buttonView.getTag().toString();
                int groupPosition = Integer.valueOf(positions.split(",")[0]);
                int childPosition = Integer.valueOf(positions.split(",")[1]);
                checkboxStatus.get(groupPosition).set(childPosition, isChecked);
            }
        };

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:31:28.673

如果您只想在单击该行时更改它：

```
elv.setOnChildClickListener(new ExpandableListView.OnChildClickListener() {
    @Override
    public boolean onChildClick(ExpandableListView parent, View v,
            int groupPosition, int childPosition, long id) {
        CheckBox checkbox = (CheckBox) v.findViewById(r.id.yourcheckbox)
        checkbox.setChecked(checkList.at(groupPosition, childPosition));    
        return true;
    }
}); 
```

# c# - 将大型 CLOB 对象转换为 .NET 字符串以放入 DataGridView 单元格

> ID：10736242
> 
> 赞同：3
> 
> 时间：2012-05-24T11:04:06.187
> 
> 标签：c#, .net, oracle, datagrid, datagridview

我在 C# 中创建了一个 Windows 窗体 GUI，它可以在 DataGridView 中显示表格数据（针对 Oracle Server DB 的 SQL 查询的结果）。其中一个字段是 XML，可能非常大，存储为 CLOB（如果我是对的，则为字符大对象）。当然，用户不会直接看单元格，而是双击单元格来查看打印出来的文件。问题是我需要将文件（这是一个 CLOB）转换为 .NET 字符串，否则会产生异常。作为一种解决方法，我尝试使用 Oracle to_char 过程，但它限制为 4000 个字符。所以我取文件的一个子字符串，如下所示：

```
 select to_char(dbms_lob.substr(column_name, 4000, 1 )) 
```

问题是，如果它包含超过 4000 个字符，它不会显示整个文件。我怎样才能绕过这个限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:10:26.790

不要将 CLOB 或结果字符串存储在 DataGridView 中。

相反，捕获 DataGridView 中的单击事件，然后将 CLOB 转换为字符串以供查看。使用适当的编码来自`System.Text.Encoding`.

我假设您的 DataReader 或 DataAdapter（无论您以哪种方式填充 DataSet）都会将您的 CLOB 存储在一个字节数组中。（与 SQLServer 和 Informix 驱动程序一样）。

```
byte[] clob;
// get it from your datarow/datagridview bound item
string thexml = System.Text.Encoding.UTF8.GetString(theclob) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T11:58:20.490

我用了简单的：

```
if (reader.IsDBNull(i))
{
    cellValue = "NULL";
}
else
{
    OracleLob clob = reader.GetOracleLob(i);
    cellValue  = (string) clob.Value;
} 
```

# layout - 黑莓：同时点击经理和按钮字段

> ID：10736244
> 
> 赞同：1
> 
> 时间：2012-05-24T11:04:10.087
> 
> 标签：layout, blackberry

我有一个verticalFieldManager，如图所示。在这个管理器中，我有一些标签字段和一个按钮字段。现在单击经理我必须转到其他屏幕，然后单击该箭头按钮我必须显示详细信息。请给我一些想法，我该怎么做。

![如图。](../Images/2de6e34b1c9d1cccc5beb93c9f350623.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:48:38.837

1.  首先添加一个 Horizo​​ntalFieldManager。

2.  然后将 VerticalFieldManager 和按钮（以显示详细信息）添加到此 Horizo​​ntalFieldManager。

3.  现在将单独的侦听器添加到 Horizo​​ntalFieldManager（转到下一个屏幕）和按钮（以显示详细信息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T22:13:33.097

您需要让[ButtonField](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/ui/component/ButtonField.html)使用单击事件。执行此操作的简单方法是将样式位传递给构造函数：ButtonField.CONSUME_CLICK

# java - AuthenticatorException：AVD 绑定失败

> ID：10736245
> 
> 赞同：4
> 
> 时间：2012-05-24T11:04:10.257
> 
> 标签：java, android, mobile, avd

我正在尝试创建一个使用 Google 的 OAuth 库的 Android 应用程序，[例如这个示例](http://code.google.com/p/google-api-java-client/source/browse/tasks-android-sample/src/main/java/com/google/api/services/samples/tasks/android/TasksSample.java?repo=samples)。

但是，当我调用 getAuthTokenByFeatures 时，我得到一个异常，它会在 LogCat 上打印出来：

```
05-24 10:56:58.224: W/System.err(557): android.accounts.AuthenticatorException: bind failure
05-24 10:56:58.236: W/System.err(557):  at android.accounts.AccountManager.convertErrorToException(AccountManager.java:1563)
05-24 10:56:58.236: W/System.err(557):  at android.accounts.AccountManager.access$400(AccountManager.java:140)
05-24 10:56:58.236: W/System.err(557):  at android.accounts.AccountManager$AmsTask$Response.onError(AccountManager.java:1409)
05-24 10:56:58.236: W/System.err(557):  at android.accounts.IAccountManagerResponse$Stub.onTransact(IAccountManagerResponse.java:69)
05-24 10:56:58.236: W/System.err(557):  at android.os.Binder.execTransact(Binder.java:338)
05-24 10:56:58.236: W/System.err(557):  at dalvik.system.NativeStart.run(Native Method) 
```

但是，实际的 Android 设备不会发生这种情况。我正在模拟 Android 4.0.3，但我终生无法在任何地方找到答案。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-31T13:55:00.577

当您未在清单中声明 Authenticator 时，通常会出现这种情况。请参阅[创建存根验证器](http://developer.android.com/training/sync-adapters/creating-authenticator.html#DeclareAuthenticator)。

```
<service
        android:name="com.example.android.syncadapter.AuthenticatorService">
    <intent-filter>
        <action android:name="android.accounts.AccountAuthenticator"/>
    </intent-filter>
    <meta-data
        android:name="android.accounts.AccountAuthenticator"
        android:resource="@xml/authenticator" />
</service> 
```

# security - 浏览器正在删除应用程序设置的 Cookie

> ID：10736249
> 
> 赞同：1
> 
> 时间：2012-05-24T11:04:20.833
> 
> 标签：security, browser, cookies, p3p

这是一个有趣的问题。据说我要在我现有的应用程序中引入一项功能。应用程序在用户系统上写入 Cookie 之前必须征得用户同意。（暗示我的应用程序在用户系统上写入的 cookie 很少）。

所以设计是这样的，对应用程序的所有请求都被拦截，对于每个请求，我们检查是否有一个标志要求应用程序写入 cookie（这个标志是从一个称为 IP 的特殊页面发送的）或者它检查用户机器上的特殊 cookie 表示同意 cookie。

现在，如果应用程序在用户的机器上没有看到同意 Cookie，它会将用户重定向到带有其 URL 的 IP。在 IP 上有一个接受 Cookie 按钮。如果用户接受 cookie，则 ajax 请求会发送到服务器，代码检测到写入 cookie 的标志并将 cookie 写入用户的浏览器。

我可以看到编写 cookie 的代码已执行，之后的预期行为是以正常方式处理请求。但不幸的是，它会将其重定向回 IP。

我有一种强烈的感觉，即某些浏览器会丢弃 Cookie。请提出这里可能有什么问题。还请让我知道如何在我的浏览器上检查它是否正在丢弃 Cookie。

我也觉得它与P3P标头有关。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:24:20.453

可能有两件事：

1.  无论浏览器如何，您每次都会被重定向到 IP。
2.  在少数浏览器中，您可以与您的应用程序相处融洽，而其他浏览器则不是。

情况 1：您需要将 P3P 标头添加到响应中。请检查[http://viralpatel.net/blogs/2008/12/how-to-set-third-party-cookies-with-iframe.html](http://viralpatel.net/blogs/2008/12/how-to-set-third-party-cookies-with-iframe.html)

情况 2：如果响应状态是重定向，则可能很少有浏览器（例如最新版本的 Mozilla Firefox(12)）缓存响应状态。默认情况下，重定向是永久重定向，即状态码 302。在这种情况下，IP 将继续在 Mozilla 中重定向到自身。

解决方案：您需要使用临时重定向，即状态码 307。

# iphone - 关于以下内存泄漏的任何建议

> ID：10736250
> 
> 赞同：5
> 
> 时间：2012-05-24T11:04:21.520
> 
> 标签：iphone, memory-leaks, nsoperationqueue

我正在使用 NSOPerationqueue 开发应用程序。当我在队列中添加 OperationBlock 时，它显示了泄漏，如下图所示。请帮助我找出泄漏解决方案。如果您需要更多的屏幕截图或详细信息，请告诉我。

您还可以在图像中看到我的代码。

![在此处输入图像描述](../Images/5c91c088b6dd970df19bb56925e3ee1a.png)

![在此处输入图像描述](../Images/b4bceca20a3030c9e6782422497c24b6.png)

![在此处输入图像描述](../Images/a5fb99be800f87f01adf811557e85aa9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:16:55.993

如果您的 [self parsing:tempdata:aregion] 保留 aregion 字符串，则您必须释放 aregion 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:07:57.150

您可以使用 NSString *aregion = [[NSString alloc]initWithFormat:@""]; 而不是使用 stringWithFormat

// 你的操作

[区域发布]；

# php - javascript数组中的php变量

> ID：10736253
> 
> 赞同：-3
> 
> 时间：2012-05-24T11:04:25.827
> 
> 标签：php, javascript, arrays, variables

为什么我的 Javascript 数组是空的？在一个while循环中，我填充了一个变量（$btext）。当我回显 $btext 一切都显示正常：

但是，如果我尝试填充 Javascript 数组，则不会在那里打印任何内容。

这就是我在 php 中填充变量 $btext 的方式：

```
$btext .= "\"".${'name_'.$user}."\","; 
```

这里是Javascript部分：

```
var battletext = new Array(<? echo $btext; ?>); 
```

如果我将 $btext 定义为：

```
$btext = "\"Hallo\", \"Welt\""; 
```

源代码如下所示：

```
<script>
var battletext = new Array("Hallo", "Welt");
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T11:09:41.130

你应该只使用 json 编码：

```
$battletext = array( "Hallo", "Welt" ); 
```

html:

```
<script>
var battletext = <?php echo json_encode( $battletext ); ?>;
</script> 
```

资源：

```
<script>
var battletext = ["Hallo", "Welt"];
</script> 
```

# php - 如何从php中的字符串中删除特殊字符？

> ID：10736260
> 
> 赞同：2
> 
> 时间：2012-05-24T11:05:03.337
> 
> 标签：php, html, filter, special-characters

我正在开发一个 php 网站

从管理面板，我正在使用 wysig 编辑器更新要在页面上显示的内容数据

`<p> </p>`在 mysql 表中插入时默认添加的有开始和结束标签

当我在页面上显示它时

```
 <?> with some black bakground 
```

沿着内容为什么如此我如何在提取记录时动态删除或过滤它

例如

```
 // content goes in to website
      $ a = "<p> this content </p>" ; 
```

我想展示它

```
 "this content" 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T11:06:37.127

试试这个

```
$a = "<p> this content </p>" ;
$var = strip_tags($a);
echo $var 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:07:06.953

如果您只需要删除 HTML 标签，您应该使用`strip_tags()`.

[http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T11:09:58.450

我在猜测并假设您使用的是 TincMCE，如果是这样，请查看`forced_root_block`设置。这可能设置为`p`.

[http://www.tinymce.com/wiki.php/Configuration:forced_root_block](http://www.tinymce.com/wiki.php/Configuration:forced_root_block)

如果您真的想采用 php 方式，请使用其他答案之一；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T11:11:18.257

这将帮助您：

```
$string = "<h1>Heading</h1>"
$string = strip_tags($string);
$echo $tstring; // output ==> Heading 
```

# salesforce - 在 VisualForce 页面中将父 ID 传递给子记录

> ID：10736265
> 
> 赞同：0
> 
> 时间：2012-05-24T11:05:22.137
> 
> 标签：salesforce, apex-code, visualforce, force.com

我正在尝试创建我的第一个 VF 页面。这是一个单项输入表单，允许用户*在单击保存之前输入多个子记录 (Enfants_c)。现在，我正在从父级（Assure* _c）上的自定义按钮打开 VF 页面。但是，当页面打开时，父项的查找字段未填充 - 因此用户必须单击查找以从 Assure__c 中选择父项。有没有办法将上一页的父 id 传递给 VF 页面上的新子记录？

```
//page    

<apex:page standardController="Enfants__c" extensions="insererEnfants" standardStylesheets="true">
<apex:sectionHeader title="Ajouter un enfant"
    subtitle="{!$User.FirstName}" help="/help/doc/user_ed.jsp?loc=help"></apex:sectionHeader>
<apex:form >
    <apex:pageBlock title="Nouveau enfant" id="thePageBlock" mode="edit">
        <apex:pageBlockButtons >
            <apex:commandButton action="{!save}" value="Enregistrer"></apex:commandButton>
            <apex:commandButton action="{!cancel}" value="   Annuler   "></apex:commandButton>
        </apex:pageBlockButtons>

        <apex:pageBlockTable value="{!accts}" var="a" id="table">
            <apex:facet name="footer">
                <apex:commandLink value="Ajouter" action="{!addRow}" rerender="table,error"/>
            </apex:facet>
            <apex:facet name="header">
                <apex:commandLink value="Supprimer" action="{!deleteRow}" rerender="table,error"/>
            </apex:facet>

            <apex:column headerValue="Nom">
                <apex:inputField/> value="{!a.Parent__c}"/>
            </apex:column>
            <apex:column headerValue="Nom">
                <apex:inputField value="{!a.Name}"/>
            </apex:column>
            <apex:column headerValue="Prénom">
                <apex:inputField value="{!a.Prenom__c}"/>
            </apex:column> 
                            <apex:column headerValue="Né le">
                <apex:inputField value="{!a.Date_de_naissance__c}"/>
            </apex:column>   
                            <apex:column headerValue="Lieu de naissance">
                <apex:inputField value="{!a.Lieu_de_naissance__c}"/>
            </apex:column>   
                            <apex:column headerValue="Situation">
                <apex:inputField value="{!a.Situation__c }"/>
            </apex:column>                          
        </apex:pageBlockTable>
        </apex:pageblock>
</apex:form>
</apex:page>

//Controller

public class insererEnfants{

public List<Enfants__c> accts {get; set;}

public insererEnfants(ApexPages.StandardController controller){
    accts = new List<Enfants__c>();
    accts.add(new Enfants__c();

}

public void addrow(){
    accts.add(new Enfants__c());       
}

public PageReference deleteRow(){
   if (accts.size()>1)
   {
      accts.remove(accts.size()-1);
   }
   return null;
}

public PageReference save()
{
    insert accts;
    Assure__c theParent = new Assure__c(id=accts[0].Parent__c);
    PageReference acctPage = new ApexPages.StandardController(theParent).view();
    acctPage.setRedirect(true);
    return acctPage;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:25:58.113

首先，您没有对 Parent 对象的引用。您可以通过两种方式解决此问题：

**解决方案1：**

使用 URL 按钮传递父级的 ID，URL 如下所示：

```
/apex/EnfantsPage?assureid={!Assure_c.Id} 
```

将“EnfantsPage”替换为您的 VF 页面的名称。然后，在控制器内：

```
String assureid = ApexPages.currentPage().getParameters().get('assureid'); 
```

现在您知道了父母的 ID。当您创建一个新的子记录时，将父 id 的值设置为您传递的 id。

```
public insererEnfants(ApexPages.StandardController controller){
  accts = new List<Enfants__c>();
  if (assureid <> null) {
    for (Assure__c assure: [ SELECT Id FROM Assure__c
                             WHERE Id = :assureid] ) {
    accts.add(new Enfants__c( Parent__c = assure.Id ));
  } else {
    accts.add(new Enfants__c());  
  }
}

public void addrow(){
  if (assure.Id <> null) {
    accts.add(new Enfants__c( Parent__c = assure.Id ));
  } else {
    accts.add(new Enfants__c());  
  }      
} 
```

**解决方案2：**

与其扩展子控制器，不如扩展父控制器：

```
public Assure__c parent {get;}
public List<Enfants__c> accts {get; set;}
public insererEnfants(ApexPages.StandardController stdController) {
  this.parent = (Assure__c)stdcontroller.getRecord();
  accts.add(new Enfants__c( Parent__c = parent.id );
}

public void addrow(){
  accts.add(new Enfants__c( Parent__c = parent.id );
} 
```

# ruby - 如何替换块中的字符串

> ID：10736268
> 
> 赞同：1
> 
> 时间：2012-05-24T11:05:33.023
> 
> 标签：ruby, arrays, string, if-statement, block

我想在一个块中使用的 if 条件有问题。更准确地说，我想从数组中获取一个字符串，如果某个条件成立，则更改该字符串并将其保存回数组。

我有一个名为“leuchtturmgesamtheit”的数组，它由字符串组成。大多数字符串如下所示：

ACH-92941100

ACH-92941102

我的目标是聚合这两个字符串。这就是为什么我要重命名字符串以使它们具有相同的名称。为此，我想剪掉最后一个字符。之后我可以使用uniq！阵列上。

这是我所做的：

```
leuchtturmgesamtheit.each { |replace|

  if replace.count("1234567890")==8
    replace=replace[0...-1]
  end

}

leuchtturmgesamtheit.uniq!

print leuchtturmgesamtheit 
```

我希望得到：

> ACH-9294110

但相反，我得到了相同的两个字符串。

RubyMine 告诉我粗体标记的“替换”是分配后未使用的局部变量。所以问题似乎是块内的 if 条件。我做错什么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:11:23.440

`replace=replace[0...-1]`只是更改块中的局部变量引用的字符串，而不是更新数组中的条目。有几个解决方案。

一种是使用`each_with_index`和更新数组中的实际字符串：

例如

```
leuchtturmgesamtheit.each_with_index do |replace, index|
  if replace.count("1234567890") == 8
    leuchtturmgesamtheit[index] = replace[0...-1]
  end
end 
```

另一个是用来`map!`更新数组，例如

```
leuchtturmgesamtheit.map! do |entry|
  if entry.count("1234567890") == 8
    entry[0...-1]
  else
    entry
  end
end 
```

* * *

[steenslag 的答案](https://stackoverflow.com/a/10741383/63034)也适用于可以在修改现有字符串的方法上完成所需的字符串操作的场景，就像这里的情况一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:17:21.737

如果您`each`使用就地更改字符串的方法（而不是生成更改的副本），则可以使用：

```
words = %w[ACH-92941100 ACH-92941102]
words.each{|word| word.chop! if word.count('1234567890') == 8 }
p words  #=> ["ACH-9294110", "ACH-9294110"] 
```

# c# - 将 datetimepicker 的值传递给代码隐藏（c#）

> ID：10736270
> 
> 赞同：3
> 
> 时间：2012-05-24T11:05:40.530
> 
> 标签：c#, jquery, jquery-ui, code-behind, datetimepicker

我想将 datetimepicker 的值传递给我的 Codebehind(C#) 并将其保存到 C# 中的变量中。

我尝试使用隐藏字段，但它不起作用。

这是js代码：

```
var dates = $("#ArrivalStartDatepicker").datetimepicker({
                            defaultDate: "+lw",
                            dateFormat: 'dd-mm-yy',
                            changeMonth: true,
                            numberOfMonths: 2,
                            ampm: true,
                            stepMinute: 10,
                            minuteGrid: 10,
                            onSelect: function (selectedDate) {
                                    document.getElementById("ArrivalStart").value = dates.datetimepicker('getDate');
                                }
                            }); 
```

隐藏区域：

```
<div>
          <input type="hidden" id="ArrivalStart" runat="server"/> 
</div> 
```

当我选择日期或时间时，萤火虫会引发以下错误：

document.getElementById("ArrivalStart") 为空

这告诉我 ArrivalStart-Field 在 JS 中是不可访问的。

我该如何管理？

问候

托比

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T11:21:20.410

代替

```
 document.getElementById("ArrivalStart") 
```

采用

```
 document.getElementById("<%= ArrivalStart.ClientId %>") 
```

这样您就可以注入 ASP.Net 创建的 ID。

**编辑**
此 javascript 片段需要位于 aspx 文件（而不是单独的 js 文件）中，因为 ASP.Net 需要处理该`<%= .. %>`块并需要访问 ArrivalStart 成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:10:20.817

当您制作一个控件 runat=server 时，c# 负责渲染元素。因此，大多数时候它会重写控件的 ID，因为它需要考虑控件的形式以及它是否嵌套在数据重复器或其他一些重复控件中。

如果您运行该页面并单击“查看源代码”，该元素的 ID 是否仍等于“ArrivalStart”或是否已重写 ID？

如果不是，您可以使用 C# 将控件的 ClientID (Control.ClientID) 写入您的 jQuery 脚本

不过我可能会叫错树:)

# java - java中是否有等效的asm nop？

> ID：10736275
> 
> 赞同：43
> 
> 时间：2012-05-24T11:05:54.723
> 
> 标签：java, debugging

当我用 Visual Studio 编写 C/C++ 时，我经常使用`__asm nop;`命令来插入*noop*代码，以便有一些东西可以中断。例如：

```
if (someCondition())
{
  __asm nop;
} 
```

我不知道发生这种情况时该怎么办，但我想停止执行并检查当前状态。有时`someCondition()`创建条件断点很简单，但条件断点会显着减慢执行速度，而且并非总是可行。

`System.Diagnostics.Debugger.Break()`现在，在 C# 中，我通过调用或直接进入调试器`System.Diagnostics.Debugger.Launch()`。

现在我被迫对 Java 进行编程，直到现在我还没有找到比在`System.out.println("bla-bla")`那里设置断点更好的选择。同样，请考虑条件断点不可行的情况。

所以，我想知道 - Java 中是否有替代方案`__asm nop`？`System.Diagnostics.Debugger.Break()`

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-24T11:07:32.497

在字节码中你有一条`nop`指令，但在 Java 语言中没有`nop`语句。

您可以单独在一行上添加一个额外`;`的代码，代码仍然可以编译，但这并不比添加一个空行更有意义。

另一个“什么都不做”的声明可能是：

```
assert true; 
```

它没有任何副作用，并且可以在执行程序时关闭。

事实证明，`assert true`似乎没有生成任何字节码指令，这会导致 assert true 上的断点一起被跳过。然而，Eclipse 能够打破诸如

```
assert Boolean.TRUE; 
```

这是非常相似的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-02-03T16:48:03.837

Java 将其解释为空语句：

```
; 
```

不过，正如评论中所指出的，Eclipse 不会让您在此处设置断点。如果你想要一些无用的东西，你可以在上面设置一个断点，这也很好并且易于输入，我建议：

```
if(false){} 
```

您的编译器可能会警告您这从未被输入，这对于提醒您在编译生产之前将其取出很有用。希望这可以帮助！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-24T11:14:48.113

您可以放入任何不执行任何操作的任意赋值语句，例如

```
if (someCondition()) {
  int t=0;
} 
```

调试器将很乐意打破这一点。由于`t`是块本地的，它不可能有任何副作用（并且会在生产代码中不存在 JIT 编译）。

或者，您可以编写一个静态函数，其中永久设置了一个断点，因此您可以这样做：

```
if (someCondition()) {
  breakPoint();
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-27T13:35:31.600

我把它分成一个新的答案，因为我很惊讶还没有人这么说。**现代 IDE 允许您向断点添加逻辑！**与其编译专门`if`用于调试的语句，不如将断点放在您真正关心的位置，然后右键单击它并选择断点属性！

[![OS X 上的右键菜单，底部有断点属性](../Images/75cd858b8a1de5c023ecd75057838e7b.png)](https://i.stack.imgur.com/G4Cbb.png) [![断点属性对话框，显示命中计数、条件等。](../Images/7dd7879f2d2c2cd5d8f2327ab6f7f51f.png)](https://i.stack.imgur.com/sRqti.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-05-06T08:46:26.167

我没有找到完美的解决方案，但这是我最喜欢的解决方案。可能效率不高，但它允许您放置断点，Eclipse 不会抱怨或警告，并且从代码阅读器的角度来看，您想要做什么很明显。

```
// Silly method that allows me to make noop
private static void noop() {

}

public otherMethod() { 
    // Here I need breakpoint
    noop();
} 
```

如果我想预先设置断点，我将条件放在之前：

```
public otherMethod() { 
    // Here I need breakpoint
    if(someCondition())
        noop();
} 
```

# xml - 如何在 Eclipse 的默认编辑器中打开 XMetal

> ID：10736277
> 
> 赞同：1
> 
> 时间：2012-05-24T11:06:04.350
> 
> 标签：xml, eclipse, eclipse-plugin, eclipse-rcp

我正在与一个开发 Eclipse RCP 程序的团队合作。该程序使用 XML 文件。修改 xml 文件时，我们在由外部工具配置的 XMetal 中打开它们，并在 eclipse 中进行文件关联。现在我们想直接在默认编辑器中打开 XMetal。我的意思是，当我在包资源管理器中双击一个 xml 文件时，我希望它仍会在 XMetal 中打开，但 XMetal 将出现在我活动的 eclipse 工作台的默认编辑器中，与 Word 文档中的完全相同蚀。

我会提供任何帮助

# iphone - 通过变量中的名称引用 UIView

> ID：10736287
> 
> 赞同：1
> 
> 时间：2012-05-24T11:06:45.413
> 
> 标签：iphone, variables, uiview

在我的`UIViewController`后代中，我有一组四个“块”。每个“块”是一个`UIView`四个孩子：两个`UILabel`、一个`UIImageView`和一个`UIView`。所有这些都是在界面生成器中创建的，并使用`IBOutlet`'s 连接到类。

在我的班上，我有相应的成员：

```
IBOutlet UIView      *block1;
IBOutlet UILabel     *title1;
IBOutlet UILabel     *text1;
IBOutlet UIImageView *image1;
IBOutlet UIView      *separator1;

IBOutlet UIView      *block2;
IBOutlet UILabel     *title2;
IBOutlet UILabel     *text2;
IBOutlet UIImageView *image2;
IBOutlet UIView      *separator2;

IBOutlet UIView      *block3;
IBOutlet UILabel     *title3;
IBOutlet UILabel     *text3;
IBOutlet UIImageView *image3;
IBOutlet UIView      *separator3;

IBOutlet UIView      *block4;
IBOutlet UILabel     *title4;
IBOutlet UILabel     *text4;
IBOutlet UIImageView *image4;
IBOutlet UIView      *separator4; 
```

我正在动态地将数据设置到这些 UIViews 中 - 它总是一组四个，所以每个块的初始化是相同的。理想情况下，我想做这样的事情：

```
Block *block;
UIImage *img;

for(int i=1; i<=4; i++)
{
    block = [response blockNumbered:i];

    [<"title"+i> setText:[block getTitle]];
    [<"text"+i> setText:[block getText]];
    img = [block getImage];
    if(img)
    {
        [<"image"+i> setImage:img];
    }

    [<"separator"+i> setHidden:![block needSeparator]];
} 
```

（请注意，这是简化的代码，在现实生活中，这个初始化还有很多，四个块中的每一个都接近 200 行代码 - 但逻辑完全相同。）现在，如果我只能以某种方式引用一个视图在字符串变量中具有名称！..

有什么办法可以做到这一点？

PS 我知道我可以在代码中将所有这些视图创建为相应视图的数组，但是我也必须在代码中进行布局——我宁愿在 IB 中这样做。或者有什么方法可以将`UIViews`'s 的数组声明为`IBOutlet`并连接 IB 中数组中的每个元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:12:00.267

您可以使用[`valueForKey:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/Reference/Reference.html#//apple_ref/doc/uid/20000471-fileAttributes_ClassMethod_NSPathUtilities)：

```
[[self valueForKey:[NSString stringWithFormat:@"title%d", i]] setText:[block getTitle]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:10:34.123

您应该考虑稍微修改您的逻辑并使其依赖于标记。您可以像`subview1.tag = 1001;` `subview2.tag = 1002;`稍后一样标记所有子视图，您可以在标记值上迭代所有子视图。

# ruby-on-rails - 用于在 rails 3r 中更改用户密码的单独视图和控制器操作

> ID：10736293
> 
> 赞同：1
> 
> 时间：2012-05-24T11:07:09.483
> 
> 标签：ruby-on-rails

我有一个用户模型，身份验证由 has_secure_password 提供。我想为密码编辑实现一个单独的视图。

是否有任何体面的教程或学习资源，我可以从中获得更多关于如何最好地实现这一目标的信息？

我的简化模型：

```
class User < ActiveRecord::Base
  attr_accessible :email, :name, :password, :password_confirmation
  has_secure_password

  before_save :create_remember_token

  validates :name, presence: true, length: { maximum: 50 }
  validates :email, presence: true, uniqueness: { case_sensitive: false }, format: { with: /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i }
  validates :password, :length => { :within => 6..40 }
  validates :password_confirmation, presence: true    
end 
```

我想确保密码验证仅在用户编辑 change_password 页面时运行，并且有一个单独的页面用于编辑密码。

我想我需要新的控制器动作，比如`edit_password`and `update_password`。然后我会这样做：`validates :password, on: [:create, :update_password]`？

我有点卡住了，真的很想浏览一些关于这个主题的示例代码或博客文章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T12:40:25.330

如果您只想在以下情况下运行验证

```
1.creating the new user
2.updating the password 
```

您可以进行[条件验证](http://guides.rubyonrails.org/active_record_validations_callbacks.html#using-a-symbol-with-if-and-unless)。

```
class User < ActiveRecord::Base
  attr_accessor :update_password

  validates :password, :length => { :within => 6..40 }, :if => new_record? || update_password
  validates :password_confirmation, presence: true, :if => new_record? || update_password
end 
```

在您的控制器中，您需要将 update_password 设置为 true。

```
class PasswordsController < ActionController::Base

 def edit
   #You will render the password edit view here
 end

 def update
   @user = User.find(params[:id])
   @user.update_password = true
   @user.password = params[:password]
   @user.password_confirmation = params[:password_confirmation]
   if @user.save
      #success redirect here
   else
      render :edit
   end
 end

end 
```

供参考。

```
validates :password, on: [:create, :update_password] 
```

这里 :create, :update_password 不代表控制器动作，它代表用户对象的各种状态。它包括 :create、:update 和 update_password 是无效状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:16:47.757

我认为学习如何做到这一点的最佳方法是查看设计源代码（或任何其他身份验证宝石），例如密码控制器 [https://github.com/plataformatec/devise/blob/master/app/controllers /devise/passwords_controller.rb](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/passwords_controller.rb)

# node.js - node.js：导入模块的范围

> ID：10736295
> 
> 赞同：0
> 
> 时间：2012-05-24T11:07:14.333
> 
> 标签：node.js, mongodb, singleton

我正在玩 node.js，并根据这个[精彩的教程](http://howtonode.org/express-mongodb)创建了两个提供程序（SchemaProvider 和 EntityProvider）。

它们看起来都像：

```
var Db = require('mongodb').Db;
var Connection = require('mongodb').Connection;
var Server = require('mongodb').Server;
var BSON = require('mongodb').BSON;
var ObjectID = require('mongodb').ObjectID;

EntityProvider = function(host, port) {
this.db = new Db('timerange', new Server(host, port, {auto_reconnect: true}, {}));
this.db.open(function() {
    console.log("Schema Provider has connected and may be used as of now.");
});
};

EntityProvider.prototype.getCollection = function(callback) {
this.db.collection('entity', function(error, collection) {
    if (error) {
        callback(error)
    } else {
        callback(null, collection);
    }

});
};

EntityProvider.prototype.findById = function(id /* The id to be found */, callback) {
this.getCollection(function(error, collection) {
    if (error) {
        callback(error);
    } else {
        collection.findOne({_id: id}, function(error, result) {
            if (error) {
                callback (error);
            } else {
                callback(null, result);
            }
        });
    }
});
}; 
```

在 app.js 中，我 require('provider') 定义了两个提供者。

然后我做：

```
schemaProvider = new SchemaProvider('192.168.0.50', 27017); 
entityProvider = new EntityProvider('192.168.0.50', 27017); 
```

现在，我创建了一个名为`dao`（我来自 java/spring 角度 :-)）的模块。因为我没有使用“var”，所以变量和提供者都可以在我的 DAO 中访问。如果我使用“var”，将无法访问提供程序。

我的问题是：

如果我只想在整个应用程序中使用提供程序的一个实例，我该怎么做？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T11:16:17.560

设置全局变量（不使用 var）是一种非常糟糕的做法，您应该始终避免这种做法。

如果您只想在整个应用程序中拥有提供程序的一个实例，您可以执行以下操作：

提供者.js

```
var providerInstance;

// define provider here

module.exports = function() {
  providerInstance = providerInstance || new Provider('192.168.0.50', 27017);
  return providerInstance;
} 
```

这样，提供者对象只会被创建一次，然后在每次需要时重用：

应用程序.js

```
var provider = require('./provider')(); 
```

app2.js

```
// using the same object as in app.js
var provider = require('./provider')(); 
```

# c# - 使用c#导入文件目录，需要文件名列吗？

> ID：10736301
> 
> 赞同：0
> 
> 时间：2012-05-24T11:07:46.210
> 
> 标签：c#, ssis

我有以下 c# 代码用于在文本文件的目录中引入，并且需要在脚本组件的输出中添加一列，以便我可以捕获此循环中的每个文件名并将其添加到名为 FILENAME 的列中的每一行。这是 SSIS 中脚本转换组件的一部分，因此正常的派生列任务将不起作用。

我怎么能做到这一点，因为我似乎无法创建一个列，只是用 var 文件的内容填充它？

```
public override void CreateNewOutputRows()
{
    foreach (var file in Directory.GetFiles(@"C:\Pre\DataSource2_W\TextFiles\Batch1\", "*.txt"))
    { 

        string _nextLine;
        string[] _columns;
        char[] delimiters;

        delimiters = "|".ToCharArray();
        _nextLine = _reader.ReadLine();

        string[] lines = File.ReadAllLines(file, Encoding.UTF8);

        //Start at index 2 - and keep looping until index Length - 2 
        for (int i = 3; i < lines.Length - 2; i++)                  
        { _columns = lines[i].Split('|');    

                // Check if number of cols is 6
            if (_columns.Length > 4)
            {
                JazzORBuffer.AddRow();
                JazzORBuffer.Server = _columns[0];
                JazzORBuffer.Country = _columns[1];
                JazzORBuffer.QuoteNumber = _columns[2];
                JazzORBuffer.DocumentName = _columns[3];
                JazzORBuffer.CompanyNameSoldTo = _columns[4];

            }
            else
            {
                // Debug or messagebox the line that fails

                Thread t = new Thread(() => MessageBox.Show("file" + "Cols:" + _columns.Length.ToString() + " Line: " + lines[i])); 
                t.SetApartmentState(ApartmentState.STA); 
                t.Start(); 

                //MessageBox.Show("file" + "Cols:" + _columns.Length.ToString() + " Line: " + lines[i]);
                //return;
            }   
        }
    } 
} 
```

**编辑**：更新的代码布局

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:08:40.303

您必须`Inputs and Outputs`在脚本转换编辑器窗格中的输出中添加一列。

这将使您的脚本可以访问该列。

# html - 将 div 放在具有可变高度的绝对 div 下面

> ID：10736308
> 
> 赞同：0
> 
> 时间：2012-05-24T11:08:09.493
> 
> 标签：html, css, css-position

我有 2 个 div 需要并排放置。为此，我放置了第一个绝对值，并在第二个中添加了一个左边距。这行得通。但是我的问题是两者都可以有不同的高度，并且下面的元素总是需要低于最高的元素。

```
<div id="header">
    The header
</div>
<div id="contents">
    <div class="sidebar">
        <ul>
            <li><a href="">Link 1</a></li>
            <li><a href="">Link 2</a></li>
            <li><a href="">Link 3</a></li>
            <li><a href="">Link 4</a></li>
            <li><a href="">Link 5</a></li>
        </ul>
    </div>
    <div class="body">
        <p>Some content</p>
    </div>
</div>
<div id="footer">
   The footer
</div> 
```

​ 这是fiddler中的完整代码：

[http://jsfiddle.net/qPtXL/17/](http://jsfiddle.net/qPtXL/17/)

如果没有 Javascript，我该如何解决？并且在页脚添加页边距也不起作用，因为我不知道内容有多高。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:20:27.973

[jsFiddle 示例](http://jsfiddle.net/qPtXL/18/)

html:

```
<div id="header">
    The header
</div>
<div id="contents">
    <div class="sidebar">
        <ul>
            <li><a href="">Link 1</a></li>
            <li><a href="">Link 2</a></li>
            <li><a href="">Link 3</a></li>
            <li><a href="">Link 4</a></li>
            <li><a href="">Link 5</a></li>
        </ul>
    </div>
    <div class="body">
        <p>Some content</p>
    </div>
    <div class="clear"></div>
</div>
<div id="footer">
   The footer
</div> 
```

CSS：

```
#header {
    border: 1px solid red;
    padding: 10px;
    font-size: 20px;
}

#contents .sidebar {
    width: 120px;
    float: left;
    background-color: gray;
}

#contents .body {
    margin-left: 120px;
    border: 1px solid green;
}

#footer {
    border: 1px solid red;
    padding: 10px;
    font-size: 20px;
}

.clear { clear: both; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T11:30:36.287

您可以使用浮动和一个项目集来清除双方

[小提琴](http://jsfiddle.net/qPtXL/19/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T11:15:23.520

这是一个以这种方式具有 2 列样式的纯[CSS 布局的链接。](http://matthewjamestaylor.com/blog/perfect-2-column-left-menu.htm)这种性质的堆叠列也有布局。你遇到困难的原因是因为绝对因素。通过添加 absolute 属性，您已经从该容器中的块元素集合中删除了该元素（及其高度/宽度）。它将相对于容器保持不变，但不会再影响任何周围的元素。它也不会影响容器本身（例如使其更高）。在应用此定位时，您需要更彻底地使用容器，以便元素独立地拉伸容器而不会失去彼此之间的定位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T11:31:49.760

试试这个 CSS

```
#header {
    border: 1px solid red;
    padding: 10px;
    font-size: 20px;
    float: left;
    width: 100%
}

#footer {
    border: 1px solid red;
    padding: 10px;
    font-size: 20px;
    float: left;
    width: 100%
}

#contents {
    width: 100%;
    height: auto;
    float;
    left;
}

#contents .sidebar {
    height: auto;
    width: 220px;
    float: left;
    border: 1px solid red;
} 
```

# c# - 写入 xml 文件 C# WP7

> ID：10736309
> 
> 赞同：0
> 
> 时间：2012-05-24T11:08:11.970
> 
> 标签：c#, xml, linq-to-xml

代码如下......我在最后一行得到错误：loadedData.Save("levelNo.xml");

而且我不明白为什么在 XDocument 中有一种具有该类型参数的方法： Save(String) 将此 XDocument 序列化到文件中，如果存在，则覆盖现有文件。

我得到的错误：
错误 2：参数 1：无法从“字符串”转换为“System.Xml.XmlWriter”
错误1：“System.Xml.Linq.XDocument.Save(System.Xml.XmlWriter) 的最佳重载方法匹配” ' 有一些无效的参数

```
XDocument loadedData = XDocument.Load("levelNo.xml", LoadOptions.None);
        XElement root = loadedData.Root;
        XElement asset = (XElement)root.FirstNode;
        asset.RemoveAll();
        asset.Add(new XElement("level", levelNo));
        asset.Add(new XElement("mana", player.Mana));
        asset.Add(new XElement("score", score));

        loadedData.Save("levelNo.xml"); 
```

我真的需要一些帮助...我已经搜索了几个小时的解决方案...我的目标是修改 levelNo.xml 文件，然后重写它...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:12:01.993

您希望将文件保存到哪里？在 Windows Phone 7 中，您需要使用隔离存储。有一个[WP7 隔离存储指南，](http://www.windowsphonegeek.com/tips/all-about-wp7-isolated-storage--intro-to-isolated-storage)其中包含各种示例，包括读取和写入 XML。

最终，您需要打开一个[`IsolatedStorageFile`](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.aspx)，然后创建一个[`IsolatedStorageFileStream`](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefilestream.aspx)，然后写入：

```
using (var store = IsolatedStorageFile.GetUserStoreForApplication())
{
    using (var stream = store.CreateFile("levelNo.xml"))
    {
        loadedData.Save(stream);
    }
} 
```

# android - 如何解决错误： sqlite 返回：错误代码 = 1，msg = 表 DetailsCustomer 没有名为 Username 的列，

> ID：10736314
> 
> 赞同：1
> 
> 时间：2012-05-24T11:08:26.983
> 
> 标签：android, sqlite

```
public class DBAdapter {
    public static final String COLUMN_ID = "ID";
    public static final String COLUMN_NAME = "NAME";
    public static final String COLUMN_SURNAME = "SURNAME";
    public static final String COLUMN_DATE_OF_BIRTH = "DateOfBirth";
    public static final String COLUMN_ADDRESS = "HomeAddress";
    public static final String COLUMN_EMAIL = "EmailNO";

    public static final String COLUMN_PHONE_NUMBER = "PhoneNumber";
    public static final String COLUMN_CITY = "City";
    public static final String COLUMN_PTYE_PAYMENT = "TypePayment";
    public static final String COLUMN_SHIPPING_TYPE = "ShippingType";
    public static final String COLUMN_CARD_NUMBER = "CardNumber";   
    public static final String COLUMN_username = "Username";
    public static final String COLUMN_Password = "Passwords";   

    public static final String TAG = "DBAdapter";

   private static final String DATABASE_NAME = "Computer_Info.db";
   private static final String USERS_TABLE = "DetailsCustomer";
   private static final int DATABASE_VERSION = 3;

private final Context context;

private DatabaseHelper DBHelper;
private SQLiteDatabase db;

public DBAdapter (Context ctx) 
{
    this.context = ctx;
    DBHelper = new DatabaseHelper(context);
}

private static class DatabaseHelper extends SQLiteOpenHelper
{
    DatabaseHelper(Context context) {
         super (context,DATABASE_NAME,null,DATABASE_VERSION);
    }

@Override
 public void onCreate(SQLiteDatabase db)
{

try {
          //db.execSQL(DATABASE_CREATE);        
         db.execSQL("CREATE TABLE "+ USERS_TABLE + 
                    "("+ COLUMN_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                    COLUMN_NAME + " TEXT, " + COLUMN_SURNAME +" TEXT, " +COLUMN_DATE_OF_BIRTH+

                   " TEXT NOT NULL, " + COLUMN_ADDRESS + " TEXT, " + COLUMN_EMAIL +" TEXT, " + 
                   COLUMN_PHONE_NUMBER + " TEXT, "+ COLUMN_CITY + " TEXT, "+ COLUMN_PTYE_PAYMENT +
                   " TEXT, " + COLUMN_CARD_NUMBER + " TEXT,"+ COLUMN_username + "TEXT ," + COLUMN_Password +" TEXT)");

} 

 catch (SQLException e) {
           e.printStackTrace();

       }
    }

public long insertRecord(String NAME, String SURNAME, String DateOfBirth,
         String HomeAddress,String EmailNO,  String PhoneNumber,  String City,
         long l, long m,String CardNumber,String Username, String Passwords) {
    {

            ContentValues initialValues = new ContentValues();

    initialValues.put(COLUMN_NAME,NAME);
    initialValues.put(COLUMN_SURNAME,SURNAME);
    initialValues.put(COLUMN_DATE_OF_BIRTH,DateOfBirth);
    initialValues.put(COLUMN_ADDRESS,HomeAddress);
    initialValues.put(COLUMN_EMAIL,EmailNO);
    initialValues.put(COLUMN_PHONE_NUMBER,PhoneNumber);
    initialValues.put(COLUMN_CITY,City);
    initialValues.put(COLUMN_PTYE_PAYMENT,l);
    initialValues.put(COLUMN_SHIPPING_TYPE,m);
    initialValues.put(COLUMN_CARD_NUMBER,CardNumber);
    initialValues.put(COLUMN_username,Username);
    initialValues.put(COLUMN_Password,Passwords);

            return db.insert(USERS_TABLE,null, initialValues);

       }

   }

public long insertRecord(String nAME, String sURNAME, String dateOfBirth,
        String homeAddress, String emailNO, String phoneNumber, String city,
        String string, String string2, String cardNumber, String Username, String Passwords) {
    return 0;   

    } 
```

还有我的活动课---------------

```
public void buttonRegister(View v)
    {
        Log.d("test", "adding"); 

        //get data from form
        EditText nametext = (EditText)findViewById(R.id.editTextName);
        EditText Surnametext = (EditText)findViewById(R.id.editTextSurname);
        EditText DOBtext = (EditText)findViewById(R.id.editTextDateBirth);
        EditText Adresstext = (EditText)findViewById(R.id.editTexAddress);
        EditText EmailNotext = (EditText)findViewById(R.id.editTeEmail);
        EditText Phonetext = (EditText)findViewById(R.id.editTexPhone);
        EditText Citytext = (EditText)findViewById(R.id.editTextCITY);
        Spinner PaymentSpinner = (Spinner)findViewById(R.id.spinnerPayment);
        Spinner ShippngMethod = (Spinner)findViewById(R.id.spinnerShipping);
        EditText CardNumbertext = (EditText)findViewById(R.id.editTextCARDNUMBER);
        EditText usernametext = (EditText)findViewById(R.id.txtusername);
        EditText pasword = (EditText)findViewById(R.id.editTexpassword);

db.open();
        long id = db.insertRecord(nametext.getText().toString(), Surnametext.getText().toString(),
                                   DOBtext.getText().toString(),Adresstext.getText().toString(),EmailNotext.getText().toString(),
                                   Phonetext.getText().toString(), Citytext.getText().toString(),
                                   PaymentSpinner.getSelectedItemId(), ShippngMethod.getSelectedItemId(), CardNumbertext.getText().toString(),
                                   usernametext.getText().toString(), pasword.getText().toString());

db.close();

        nametext.setText("");
        Surnametext.setText("");
        DOBtext.setText("");
        Adresstext.setText("");
        EmailNotext.setText("");
        Phonetext.setText("");     
        Citytext.setText("");
        PaymentSpinner.setId(0);
        ShippngMethod.setId(0);
        CardNumbertext.setText("");
        usernametext.setText("");
        pasword.setText("");

Toast.makeText(Regist.this,"Customer has been Registered",Toast.LENGTH_LONG).show();       

       } 
```

我正在尝试插入数据库，但它在列名用户名中告诉我...我不明白为什么会发生请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:13:19.493

这是正确的，该列不存在，因为您创建数据库的字符串中有这个位：

```
COLUMN_username + "TEXT ," 
```

你少了一个空格。它应该是：

```
COLUMN_username + " TEXT ," 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:27:14.577

当您更改数据库结构时，您是否更改了

```
DATABASE_VERSION = 3; 
```

价值？如果您更改数据库版本，您还需要覆盖

```
public void onUpdate(SQLiteDatabase db) 
```

更新数据库的功能。

# html - 文字未显示

> ID：10736319
> 
> 赞同：1
> 
> 时间：2012-05-24T11:08:43.407
> 
> 标签：html, css, text

[http://i.imgur.com/xEUo3.png](http://i.imgur.com/xEUo3.png) 我试图让文本显示在黄色框中。但我无法弄清楚为什么它不起作用。

这是我使用的代码。它只在黄色框中它不起作用。

```
 <div id="Header"></div>
    <div id="Main">
  <ul id="MenuBar1" class="MenuBarHorizontal">
    <li><a href="#">Startsida</a></li>
    <li><a href="#">Medlemmar</a></li>
    <li><a href="#">Galleri</a></li>
    <li><a href="#">Forum</a></li>
    <li><a href="#">Kontakt</a></li>
     </ul>
  <div id="Start">Textytexttext</div>
</div>
<div id="Footer"></div>

@charset "utf-8";

#Header {
    background-color: #F00;
    height: 200px;
    width: 1000px;
    margin: auto;
}

#Main {
    background-color: #0C0;
    height: 700px;
    width: 1000px;
    margin: auto;
}
#Start {
    background-color: #FF0;
    width: 990px;
    height: 690px;
    position: absolute;
    clip: rect(46px,auto,auto,10px);
}
#Footer {
    background-color: #666;
    height: 20px;
    width: 1000px;
    margin: auto;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:12:25.420

与此样式`clip: rect(46px,auto,auto,10px);`有关 如果删除它，则会出现文本。看到这个[jsFiddle](http://jsfiddle.net/DNq5A/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:17:09.633

这条线`clip: rect(46px,auto,auto,10px);`正在做这件事。你为什么用它？我确信有另一种方法可以在不使用它的情况下做到这一点。

编辑：刚刚看到巴里打败了我。

# java - 使用 Hibernate Session.doWork 生成序列 ID

> ID：10736324
> 
> 赞同：1
> 
> 时间：2012-05-24T11:09:12.523
> 
> 标签：java, hibernate, connection, prepared-statement

Hibernate Session'[`doWork()`](http://docs.jboss.org/hibernate/stable/core/api/org/hibernate/Session.html#doWork(org.hibernate.jdbc.Work))方法可以直接访问`java.sql.Connection`.

以下是创建和执行`PreparedStatement`生成序列的方法之一

```
public Long generateId() {
    final Long id[] = { null };

    getSessionFactory().openSession().doWork(new Work() {
        public void execute(Connection connection) throws SQLException {
            PreparedStatement ps = connection
                    .prepareStatement("SELECT HIB_SEQ.nextval FROM DUAL");
            ResultSet rs = ps.executeQuery();
            while (rs.next()) {
                id[0] = rs.getLong(0);
            }
        }
    });
    return id[0];
} 
```

首先，有没有更好的方法来做到这一点？

第二个问题我们需要明确关闭`PreparedStatement`上面创建的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-21T08:55:40.297

1）对于返回值，我们可以使用[`doReturningWork`](https://docs.jboss.org/hibernate/orm/4.0/javadocs/org/hibernate/Session.html#doReturningWork(org.hibernate.jdbc.ReturningWork))

```
public int updateEmployeeStatusWithCount(final List<String> employeeList) throws DBException
{
       Session session = null;
       try
       {
              session = HibernateUtil.getSession();
              session.beginTransaction();
              int cnt = session.doReturningWork(new ReturningWork<Integer>() {
                     @Override
                     public Integer execute(Connection conn) throws SQLException {
                           PreparedStatement pStmt = null;
                           try
                           {
                                  int updatedCnt = 0;
                                  String sqlQry = "UPDATE EMP_DETAILS set IS_ACTIVE='N' WHERE EMP_ID=?";
                                  pStmt = conn.prepareStatement(sqlQry);
                                  for(String empId:employeeList)
                                  {
                                         System.out.println(empId);
                                         pStmt.setString(1, empId);
                                         int cnt = pStmt.executeUpdate();
                                         updatedCnt+=cnt;
                                  }
                                  return updatedCnt;
                           }
                           finally
                           {
                                  pStmt.close();
                           }                                
                     }
              });
              session.getTransaction().commit();
              return cnt;
       }
       catch(HibernateException e)
       {
              throw new DBException("Error occured while updating Employee Status",e);
       }
       finally
       {
              HibernateUtil.closeSession(session);
       }            
} 
```

2）是的，我们必须明确关闭`PreparedStatement` 见下面的例子

```
public void updateEmployeeStatus(final List<String> employeeList) throws DBException
{
       Session session = null;
       try
       {
              session = HibernateUtil.getSession();
              session.beginTransaction();
              session.doWork(new Work() {
                     @Override
                     public void execute(Connection conn) throws SQLException {
                           PreparedStatement pStmt = null;
                           try
                           {
                                  String sqlQry = "UPDATE EMP_DETAILS set IS_ACTIVE='N' WHERE EMP_ID=?";
                                  pStmt = conn.prepareStatement(sqlQry);
                                  for(String empId:employeeList)
                                  {
                                         pStmt.setString(1, empId);
                                         pStmt.addBatch();
                                  }
                                  pStmt.executeBatch();
                           }
                           finally
                           {
                                  pStmt.close();
                           }                                
                     }
              });
              session.getTransaction().commit();
       }
       catch(HibernateException e)
       {
              throw new DBException("Error occured while updating Employee Status",e);
       }
       finally
       {
              HibernateUtil.closeSession(session);
       }            
} 
```

[参考](http://keyurj.blogspot.in/2012/12/dowork-in-hibernate.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T12:33:53.043

的实例`PreparedStatement`是作为方法的一部分创建的`Work.execute`，因此应该在该范围内处理，包括关闭（一旦方法完成其执行，实例本身将由 GC 收集，因为变量`ps`将超出范围，但任何外部资源，例如打开游标需要显式调用`ps.close()`）。

`Connection`另一方面，Hibernate 将一个实例传递给方法，不应手动关闭——这是 Hibernate 的责任。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T11:16:56.413

```
 String query = ((SessionFactoryImplementor)sessionFactory).getDialect().getSequenceNextValString(seqName);
    Session session = sessionFactory.getCurrentSession();
    return (Long) session.createSQLQuery(query).addScalar("nextval", Hibernate.LONG).uniqueResult(); 
```

您可能需要稍微调整标量部分以适应数据库的列名和返回类型。

# c# - 按钮单击事件未在 IIS 上执行

> ID：10736325
> 
> 赞同：0
> 
> 时间：2012-05-24T11:09:26.947
> 
> 标签：c#, asp.net

这很奇怪！下面的代码在 VS2010 中按 F5 时正确运行，但是当我在 IIS7 服务器上运行它时，按钮单击事件不会触发！我这辈子都想不通！这是代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="default.aspx.cs" Inherits="_default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <script type="text/javascript">
        //Put your JavaScript code here.
    </script>
    <div>
        Hi World!<br />
        <br />
        <br />
        <asp:Button ID="button1" Text="Click Here" runat="server" OnClick="button1_Click" />
        <br />
        <br />
        <asp:Button ID="Button3" runat="server" onclick="Button3_Click" Text="Button" />
        <br />
        <br />
        <asp:TextBox ID="results" runat="server" TextMode="MultiLine" Height="350px" Width="500px"></asp:TextBox>
    </div>
    </form>
</body>
</html> 
```

这是代码文件：

```
using System;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

using System.Data;
using System.Configuration;
using System.Web.Security;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using Telerik.Web.UI;

public partial class _default : System.Web.UI.Page 
{
    protected void Page_Load(object sender, EventArgs e)
    {
        this.results.Text += "In Page_Load ";
    }

    protected void button1_Click(object sender, EventArgs e)
    {

        this.results.Text += "Hello! ";

        return;
    }
    protected void Button3_Click(object sender, EventArgs e)
    {
        this.button1_Click(sender, e);
        return;
    }
} 
```

Page_Load() 确实运行，但不是 button1_Click()。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:15:58.300

如果您有设置，您可能还需要`runAllManagedModulesForAllRequests`从您的设置中删除`web.config`（或将其设置为 false）。

# iphone - 为结构访问器返回 nil

> ID：10736332
> 
> 赞同：0
> 
> 时间：2012-05-24T11:09:54.817
> 
> 标签：iphone, objective-c, cocoa-touch, struct

使用对象，我可以编写一个访问器以`nil`在对象无效时返回：

```
- (Weather *)howsTheWeather
{
    if (![WeatherNetwork isAvailable]) {
        return nil;
    }
    Weather *weatherNow = [WeatherNetwork getWeather];
    return weatherNow;
} 
```

我想用 a 来执行此操作`CLLocationCoordinate2D`， a`struct`用于保存纬度和经度。我试过这个：

```
- (CLLocationCoordinate2D)coordinate
{
    CLLocationCoordinate2D coord = CLLocationCoordinate2DMake(self.latitude, self.longitude);
    if (!CLLocationCoordinate2DIsValid(coord)) {
        return nil;
    }
    return coord;
} 
```

但编译器抱怨“从结果类型不兼容的函数中返回 'void *' 'CLLocationCoordinate2D'”

处理这种情况的最佳方法是什么？我正在考虑编写一个单独的方法`-(BOOL)isLocationValid:(CLLocationCoordinate2D)coordinate`。有没有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:15:27.857

结构不能为空。您将需要使用选项 2（根据结构包含的数据检查结构的有效性）。***或者，您可以将您的结构包装在一个能够被***nil'ed的伪对象中，但这似乎需要大量工作才能获得虚假收益。

# wso2 - WSO2 ESB 服务启动导致错误 1067

> ID：10736336
> 
> 赞同：1
> 
> 时间：2012-05-24T11:10:12.023
> 
> 标签：wso2, wso2esb, esb

当我尝试将 WSO2 ESB 作为 Windows 服务启动时，出现错误

> 错误 1067：进程意外终止。

这发生在 Windows Vista 机器和 Windows Server 2008 机器上。有人有想法么？

# android - Android 致命异常主要 nullPointerException

> ID：10736339
> 
> 赞同：-1
> 
> 时间：2012-05-24T11:10:21.760
> 
> 标签：android, achartengine

我是 Android 新手，我必须在 android Tab 或 Phone 上绘制 ECG WAVES，我尝试使用 achartengine 库在 lineGrap 上获取我的数据，但我得到了 NullPointerException。你能帮帮我吗！！！

这是我的 GraphActivity.java

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class GraphActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button strt = (Button) findViewById(R.id.LineGraph);

        strt.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                lineGraph line = new lineGraph();
                Intent lineIntent = line.getIntent(getApplicationContext());
                startActivity(lineIntent);

            }
        });
    } 
```

这是我的 lineGraph.java

```
public class lineGraph {

    static BufferedReader reader ;
    static DataInputStream data_in;

    static int[] x = new int[6000]; // x values
    static int[] y1= new int[6000]; // y1 values
    static int[] y2= new int[6000]; // y2 values
    static int[] y3= new int[6000]; // y3 values
    static int[] y4= new int[6000]; // y4 values
    static int[] y5= new int[6000]; // y5 values
    static int[] y6= new int[6000]; // y6 values
    static int[] y7= new int[6000]; // y7 values
    static int[] y8= new int[6000]; // y8 values

    static int ch =0;

    public  Intent getIntent(Context context){

        try {
            data_in = new DataInputStream(
                        new BufferedInputStream(
                                new FileInputStream(new File("src/data.txt"))));
        } catch (FileNotFoundException e) {

            e.printStackTrace();
        }
        try {
             while(ch<6000){
                 Byte LSB = data_in.readByte();
                 Byte MSB = data_in.readByte();
                  int current= ((MSB<<8)| (LSB & 0xFF));
                y1[ch]=  current; 
                ch++;
                }
                while(ch>=6000 && ch<12000){
                    Byte LSB = data_in.readByte();
                    Byte MSB = data_in.readByte();
                   int current= ((MSB<<8)| (LSB & 0xFF));
                   y2[ch-6000]= current;
                   ch++;
                    }

         }
         catch(EOFException eof) {
             System.out.println ("End of File read");
//             break;
         } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
       try {
        data_in.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }  
//   }
        for(int i=0;i<6000;i++){
         x[i]=i;
        }

        TimeSeries series1 = new TimeSeries("line1");
        for(int i=0;i<x.length;i++){
            series1.add(x[i], y1[i]);
        }
        TimeSeries series2 = new TimeSeries("line2");
        for(int i=0;i<x.length;i++){
            series1.add(x[i], y2[i]);
        }
        TimeSeries series3 = new TimeSeries("line3");
        for(int i=0;i<x.length;i++){
            series1.add(x[i], y3[i]);
        }
        TimeSeries series4 = new TimeSeries("line4");
        for(int i=0;i<x.length;i++){
            series1.add(x[i], y4[i]);
        }
        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
        dataset.addSeries(series1);
        dataset.addSeries(series2);
        dataset.addSeries(series3);
        dataset.addSeries(series4);

        XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();
        XYSeriesRenderer renderer= new XYSeriesRenderer();
        renderer.setColor(Color.GREEN);
        renderer.setPointStyle(PointStyle.CIRCLE);
        renderer.setFillPoints(true);
        mRenderer.addSeriesRenderer(renderer);

        Intent intent = ChartFactory.getLineChartIntent(context, dataset, mRenderer, "Line Graph");
        return intent;

        }
    } 
```

这是我的 Android 清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.praktikum.graph"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".GraphActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="org.achartengine.GraphicalActivity"/>
    </application>

</manifest> 
```

和我的 LogCat

```
 05-24 13:03:41.309: E/AndroidRuntime(21551): FATAL EXCEPTION: main
05-24 13:03:41.309: E/AndroidRuntime(21551): java.lang.NullPointerException
05-24 13:03:41.309: E/AndroidRuntime(21551):    at com.praktikum.graph.lineGraph.getIntent(lineGraph.java:58)
05-24 13:03:41.309: E/AndroidRuntime(21551):    at com.praktikum.graph.GraphActivity$1.onClick(GraphActivity.java:22)
05-24 13:03:41.309: E/AndroidRuntime(21551):    at android.view.View.performClick(View.java:3127)
05-24 13:03:41.309: E/AndroidRuntime(21551):    at android.view.View$PerformClick.run(View.java:12025)
05-24 13:03:41.309: E/AndroidRuntime(21551):    at android.os.Handler.handleCallback(Handler.java:587)
05-24 13:03:41.309: E/AndroidRuntime(21551):    at android.os.Handler.dispatchMessage(Handler.java:92)
05-24 13:03:41.309: E/AndroidRuntime(21551):    at android.os.Looper.loop(Looper.java:132)
05-24 13:03:41.309: E/AndroidRuntime(21551):    at android.app.ActivityThread.main(ActivityThread.java:4126)
05-24 13:03:41.309: E/AndroidRuntime(21551):    at java.lang.reflect.Method.invokeNative(Native Method)
05-24 13:03:41.309: E/AndroidRuntime(21551):    at java.lang.reflect.Method.invoke(Method.java:491)
05-24 13:03:41.309: E/AndroidRuntime(21551):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
05-24 13:03:41.309: E/AndroidRuntime(21551):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
05-24 13:03:41.309: E/AndroidRuntime(21551):    at dalvik.system.NativeStart.main(Native Method)
05-24 13:03:43.319: I/dalvikvm(21551): threadid=4: reacting to signal 3
05-24 13:03:43.319: I/dalvikvm(21551): Wrote stack traces to '/data/anr/traces.txt' 
```

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T12:33:43.433

在android中，您需要将此类文本文件放入asset或raw ....

并以这种方式阅读

[http://www.javacodegeeks.com/2012/02/android-read-file-from-assets.html](http://www.javacodegeeks.com/2012/02/android-read-file-from-assets.html)

```
 // To load text file
        InputStream input;
  try {
   input = assetManager.open("helloworld.txt");

          int size = input.available();
          byte[] buffer = new byte[size];
          input.read(buffer);
          input.close();

          // byte buffer into a string
          String text = new String(buffer);

          txtContent.setText(text);
  } catch (IOException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
  } 
```

和 [阅读一个简单的文本文件](https://stackoverflow.com/questions/5771366/reading-a-simple-text-file)

和

[http://android-er.blogspot.in/2010/07/display-text-file-in-resraw_01.html](http://android-er.blogspot.in/2010/07/display-text-file-in-resraw_01.html)

```
private String readTxt(){

     InputStream inputStream = getResources().openRawResource(R.raw.hello);

     ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

     int i;
  try {
   i = inputStream.read();
   while (i != -1)
      {
       byteArrayOutputStream.write(i);
       i = inputStream.read();
      }
      inputStream.close();
  } catch (IOException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
  }

     return byteArrayOutputStream.toString();
    } 
```

和

[http://androidgps.blogspot.in/2008/10/dealing-with-large-resources.html](http://androidgps.blogspot.in/2008/10/dealing-with-large-resources.html)

# javascript - 从代码创建的 Div 不加载类

> ID：10736346
> 
> 赞同：0
> 
> 时间：2012-05-24T11:10:39.613
> 
> 标签：javascript, jquery

我有 div 容器和内部有类演示和重力的几个 div

```
<div id="container" style="position:relative;width=400px;height=400px;">
<div class="demo gravity" ></div>
<div class="demo gravity"></div>
<div class="demo gravity"></div>
</div> 
```

我从代码中添加新的 div

```
 var temp = $('<div/>');
    temp.attr('id', 'foo');
    temp.css( {
        position : 'absolute',
        top : '0px',
        left : '0px',
        width : '200px',
        height : '40px'
    });
    temp.addClass("gravity");
    temp.addClass("demo");
    $('#container').append(temp); 
```

在 onReady 函数中，我有类似的代码

```
$(.demo).resizable().draggable().droppable() ; 
```

它适用于内部的 div，但不适用于我从代码中添加的 div。代码中的 div 显示在 id="container" 的 div 内，但不可调整大小/可拖动/可放置。有谁知道是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T11:13:33.013

问题是您在调用其所有兄弟姐妹*之后*`resizable().draggable().droppable()`添加新 div 。

您能否在附加之前添加它（顺便说一句，您可以将所有这些调用链接在一起）：

```
 var temp = $('<div/>');
    temp.attr('id', 'foo')
    .css( {
        position : 'absolute',
        top : '0px',
        left : '0px',
        width : '200px',
        height : '40px'
       })
   .addClass("gravity")
   .addClass("demo")
   .resizable().draggable().droppable();
$('#container').append(temp); 
```

这是 jsfiddle 演示新添加的 div 确实有效：http: [//jsfiddle.net/xqakj/](http://jsfiddle.net/xqakj/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T11:12:33.997

你也需要为新创建的 div 做这个：

```
temp.resizable().draggable().droppable(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T11:23:19.850

Here fiddle example for you,似乎工作。

[http://jsfiddle.net/ymutlu/cvZpX/2/](http://jsfiddle.net/ymutlu/cvZpX/2/)

万一删除了小提琴，

```
 var temp = $('<div>');
    temp.append("33");
    temp.attr('id', 'foo');
    temp.css( {
        position : 'absolute',
        top : '0px',
        left : '0px',
        width : '200px',
        height : '40px'
    });​
    temp.addClass("gravity");
    temp.addClass("demo");
    $('#container').append(temp);

var demo = $(".demo");
demo.resizable().draggable().droppable();​ 
```

//在 Jamiec 评论后编辑，您可以使用

```
temp.resizable().draggable().droppable();​ 
```

在哪里添加临时 div。

# ruby-on-rails - Google API Ruby 客户端（gem）错误`未初始化的常量 Google::APIClient::UploadIO`

> ID：10736348
> 
> 赞同：4
> 
> 时间：2012-05-24T11:10:59.610
> 
> 标签：ruby-on-rails, ruby, oauth-2.0, google-drive-api

这肯定让我困惑了几个小时。我已经[按照 Baugues](http://gregandrachel.baugues.com/google-calendar-api-oauth2-and-ruby-on-rails)的详细说明引导了我的应用程序，以至于通过 OAuth2 进行身份验证有效，我只是在`session#create`（回调）操作中测试了一些东西。这是一些代码：

```
class SessionsController < ApplicationController
  def create
    @auth = request.env["omniauth.auth"]
    @token = @auth["credentials"]["token"]
    client = Google::APIClient.new
    client.authorization.access_token = @token
    service = client.discovered_api('drive', 'v1')

    file_content = Google::APIClient::UploadIO.new("foo", "text/plain")

    # @result = client.execute(
    #   :api_method => service.files.get,
    #   :parameters => { 'id' => 1 },
    #   :headers => {'Content-Type' => 'application/json'})
  end
end 
```

在进行身份验证时，上述逻辑在`callback`方法中执行 - 出于此粗略测试的目的，该方法呈现`create.html.erb`. 我已经注释掉了`@result`刚刚回显到视图中的实例变量。

但是，当它显然不应该`Google::APIClient::UploadIO.new("foo", "text/plain")`触发时。`uninitialized constant Google::APIClient::UploadIO`我已经挖掘了这个宝石的来源，并且`UploadIO`课程`required`在`media.rb`宝石中。

建议和帮助表示赞赏！

### 参考：

*   [http://code.google.com/p/google-api-ruby-client/](http://code.google.com/p/google-api-ruby-client/)
*   [https://developers.google.com/drive/v1/reference/files/insert](https://developers.google.com/drive/v1/reference/files/insert)
*   [https://developers.google.com/drive/examples/ruby#saving_new_files](https://developers.google.com/drive/examples/ruby#saving_new_files)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T01:29:01.710

检查您的 Gemfile.lock 以查看它实际使用的 google-api-client 版本。当我执行相同的步骤时，它看起来默认设置为 0.3.0，可能是由于 google-omniauth-plugin 的依赖有点落后。0.3.0 没有媒体支持。

尝试将您的 Gemfile 更改为

```
gem 'google-api-client', '~> 0.4.3', :require => 'google/api_client' 
```

并重新运行“捆绑安装”以强制它使用更新的版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-18T16:18:52.313

在这里您可以看到如何从版本 0.8.* 迁移到 0.9.*

在 0.8.x 中，该库会动态“发现” API，从而引入额外的网络调用和不稳定性。这已在 0.9 中修复。

要在 0.8.x 中获取驱动器客户端，需要这样做：

```
require 'google/api_client'

client = Google::APIClient.new
drive = client.discovered_api('drive', 'v2') 
```

在 0.9 中，同样的事情可以这样完成：

```
require 'google/apis/drive_v2'

drive = Google::Apis::DriveV2::DriveService.new 
```

所有 API 均可立即访问，无需额外的网络调用或运行时代码生成。

**API 方法**

API 方法的调用方式已更改。在 0.8.x 中，所有调用都是通过通用的执行方法。在 0.9 中，生成的服务对所有可用方法都有完全定义的方法签名。

要在 0.8.x 中使用 Google Drive API 获取文件，需要这样做：

```
file = client.execute(:api_method => drive.file.get, :parameters => { 'id' => 'abc123' }) 
```

在 0.9 中，同样的事情可以这样完成：

```
file = drive.get_file('abc123') 
```

可以在生成的目录中找到完整的 API 定义，包括可用的方法、参数和数据类。

[关联](https://github.com/google/google-api-ruby-client/blob/master/MIGRATING.md)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-10T22:10:29.453

对于偶然发现`google-api-client`gem 版本大于或等于 0.9 的人，您将需要使用以下内容：

```
gem 'google-api-client', :require => 'google/apis/analytics_v3' 
```

将“analytics_v3”与您正在使用的生成的 google 服务 api 交换。

有关生成的 API 名称的完整列表，请参阅：[https ://github.com/google/google-api-ruby-client/tree/master/generated/google/apis](https://github.com/google/google-api-ruby-client/tree/master/generated/google/apis)

# datatable - 带有html文本的Primefaces数据表行不调用选择事件

> ID：10736352
> 
> 赞同：1
> 
> 时间：2012-05-24T11:11:09.230
> 
> 标签：datatable, primefaces

我正在尝试在数据表行中显示从服务器接收到的 html 文本。

表格如下所示：

```
<h:form id="carPageForm" prependId="false">

                <p:dataTable var="car" value="#{tableBean.lazyModel}" paginator="true"
                    rows="10" rowKey="#{car.id}" widgetVar="carsTable"
                    paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                    selectionMode="single"
                    selection="#{tableBean.selectedCar}" id="carTable">

                    <f:facet name="header">
                        <p:outputPanel>
                            <p:inputText id="globalFilter" onkeyup="carsTable.filter()" style="float:right"/>
                            <h:outputText value="Search all fields:" style="float: right; margin-top: 2px;" />
                        </p:outputPanel>
                    </f:facet>

                    <p:ajax event="rowSelect" update=":carPageForm:display"
                        oncomplete="carDialog.show()" />

                    <p:column id="idColumn" filterBy="#{car.id}" style="display:none"
                        filterMatchMode="contains">
                        <h:outputText value="#{car.id}" />
                    </p:column>

                    <p:column id="adColumn" filterBy="#{car.ad}" filterStyle="display:none">
                        <h:outputText value="#{car.ad}" escape="true"/>
                    </p:column>
                </p:dataTable>

                <p:dialog header="Car Detail" widgetVar="carDialog"
                    resizable="false" showEffect="scale" hideEffect="explode">

                    <h:panelGrid id="display" columns="2" cellpadding="4">

                        <h:outputText value="Title:" />
                        <h:outputText value="#{tableBean.title}" style="font-weight:bold" />

                        <h:outputText value="Description:" />
                        <h:outputText value="#{tableBean.description}"
                            style="font-weight:bold" />

                        <h:outputText value="Price:" />
                        <h:outputText value="#{tableBean.price}" style="font-weight:bold" />
                    </h:panelGrid>
                </p:dialog>

            </h:form> 
```

现在，如果我单击行上`escape="true"` ![在此处输入图像描述](../Images/c76bf0babdc9da47ae485ae826e23602.png)
的任意位置，将触发 rowSelect 事件并打开对话框。
但是，如果我设置`escape="false"`为使行中的文本像这样既粗体又加下划线： ![在此处输入图像描述](../Images/f5b15a4691ecadd760240f8546e5825a.png)
那么只有当我在文本之后单击空白区域时才会触发 rowSelect 事件。如果我单击文本上的任何位置，则不会发生任何事情。
即使我只是在`<h:outputText>`ie之前添加粗体标记
`<b><h:outputText value="#{car.ad}"/></b>`，即使这样，只有当我单击行中的任意位置时才会调用 select 事件，而是在文本上。
有人可以告诉我如何处理吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:52:05.323

这是因为当您选择不转义 outpuText 的值时，它实际上会在对应的 div 标记中呈现 html 元素。当您单击文本本身时，您实际上是在单击粗体和下划线 HTML 元素，并且 jQuery click 事件未注册到表格行。

此单击事件绑定到类的元素，`ui-dt-c`因此如果您使用具有此类的 div 将文本包装在 html 元素中，则单击文本将触发单击事件。

```
<b><u><div class="ui-dt-c"> e78fe894 Ferrari Blue 1994 </div></u></b> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-17T21:51:09.623

这种情况对我来说也很神奇，但不幸的是，建议的解决方案对我不起作用。最后，我找到了非常简单但有效的解决方案。

```
instead of using <b> tag I have used <span> tag like this:

<span style="font-weight:bold">hello</span> 
```

即使我单击列中的“你好”字样，行选择也会再次起作用。

# ruby - 为什么编译 ruby -1.9.3-p125 时会出现 clang 错误？

> ID：10736359
> 
> 赞同：0
> 
> 时间：2012-05-24T11:11:36.040
> 
> 标签：ruby, macos, compiler-errors, osx-lion, rvm

我刚刚通过运行安装了 Ruby 1.9.3-p194

```
rvm install 1.9.3 --with-gcc=clang 
```

它安装没有问题。

现在，当我想安装 1.9.3-p125 时，我收到以下错误消息：

```
rvm install 1.9.3-p125 --with-gcc=clang
Fetching yaml-0.1.4.tar.gz to /Users/foo/.rvm/archives
Extracting yaml-0.1.4.tar.gz to /Users/foo/.rvm/src
Configuring yaml in /Users/foo/.rvm/src/yaml-0.1.4.
Compiling yaml in /Users/foo/.rvm/src/yaml-0.1.4.
Installing yaml to /Users/foo/.rvm/usr
clang: error: unsupported option '--with-libyaml' 
```

但安装继续进行，最终安装了 1.9.3-p125。

有什么想法我为什么会得到`clang: error: unsupported option '--with-libyaml'`以及如何避免它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:17:42.543

为什么`--with-gcc=clang`选择？我像这样安装了 1.9.3-p125：

```
rvm install ruby-1.9.3-p125 
```

您是否在没有指定该选项的情况下尝试过？

不确定这是否对您有影响，但您可能想查看这个最近处理到 rvm 的拉取请求——它可能是相关的。

[https://github.com/wayneeseguin/rvm/pull/869](https://github.com/wayneeseguin/rvm/pull/869)

# php - 使用 PHP 按文件编号对图像进行排序

> ID：10736362
> 
> 赞同：1
> 
> 时间：2012-05-24T11:11:58.180
> 
> 标签：php, image, sorting

这是我当前使用的代码的简化版本。

```
$files = glob('*.{jpg,png,gif}', GLOB_BRACE);
$counter = 1;
echo '<div id="images">';
foreach($files as $file) {
    if ($counter % $IMGS_PER_ROW == 1)
        echo '<div>';
    echo '<img src="' . $file . '"/>';
    if ($counter % $IMGS_PER_ROW == 0)
    echo '</div>';
    $counter++; 
}
echo '</div>'; 
```

它的作用是搜索一个目录，并且对于它找到的每个图像，它都会内联打印到屏幕上，`$IMGS_PER_ROW`每行最多有图像。

问题在于，假设我们有 15 个图像，它们的标题与图像的编号相对应（即`0.jpg`, `1.jpg`, ... `14.jpg`），它们将根据它们的名称作为字符串按顺序打印。（即`0.jpg`, `1.jpg`, `10.jpg`, `11.jpg`, `12.jpg`, `13.jpg`, `14.jpg`, `2.jpg`, ...）。

显然，我希望它们按数字顺序排列，所以排序算法是不可避免的（我认为）。我对 php 不太擅长，想知道是否有一种简单的 O(n^2) 方法可以按数字顺序而不是字符串比较对这个文件位置数组进行排序。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T11:15:22.380

只需在迭代之前使用[`natcasesort`](http://php.net/manual/en/function.natcasesort.php)or ：[`natsort`](http://php.net/manual/en/function.natsort.php)

```
$files = glob('*.{jpg,png,gif}', GLOB_BRACE);
natcasesort($files);
foreach($files as $file) { /* ... */ } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:17:06.740

```
<?php 
   $a = array("0.jpg", "1.jpg", "10.jpg", "11.jpg", "12.jpg", "13.jpg", "14.jpg", "2.jpg");
   natcasesort ($a);
?> 
```

[http://php.net/manual/en/function.natcasesort.php](http://php.net/manual/en/function.natcasesort.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T11:15:52.990

在 globbing 之后简单地对数组进行数字排序：

```
$files = glob(…);
sort($files, SORT_NUMERIC);
foreach(…) {
  …;
} 
```

# android - 即使在静音模式下，如何让手机响铃？

> ID：10736366
> 
> 赞同：0
> 
> 时间：2012-05-24T11:12:11.810
> 
> 标签：android

有什么办法可以按照标题描述的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:14:47.303

更改铃声音量或更改其配置文件。使用音频管理器

# gwt - GWT、runAsync 和服务器端代码交付预防？

> ID：10736368
> 
> 赞同：1
> 
> 时间：2012-05-24T11:12:24.030
> 
> 标签：gwt

我使用 gwt-platform 和 CodeSplitting。现在我想让用户在未登录的情况下无法获取异步 JS 代码。

换句话说：如果 GWT 试图获取一些 JS 代码，因为代码分裂。服务器应检查用户是否已登录，然后才向客户端发送 JS 代码。

GWT 是否提供了这种可能性？或者有没有可用的插件？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T12:26:08.313

我认为这是一个文件访问问题，与您的 Web 服务器而不是 GWT 应用程序有关，因为代码拆分只会分解您的代码以进行按需加载，并且不提供任何机制来控制您的 js 代码的损坏部分（延迟的js）。因此，如果您想阻止对这些文件的访问，您应该将您的登录机制与您的 Web 服务器集成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T21:36:56.500

您只能在后端执行此操作。例如，在 Spring Security 中，您可以定义只有在存在有效主体（登录用户）时才能加载特定资源（即代码拆分片段）。
但是我不确定你为什么真的想这样做（保护你的客户端代码？）？

# iphone - 重新加载表格时如何清除表格中的文本字段的文本

> ID：10736369
> 
> 赞同：0
> 
> 时间：2012-05-24T11:12:24.587
> 
> 标签：iphone, uitextfield

我在表格的每个单元格中都有文本字段。所以当我调用表格重新加载时，我想清除（无）文本字段文本。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:33:01.927

n cellForRow: method where you create cell set text of textField

```
cell.yourTextField.text = @""; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T11:13:45.150

在 cellForRow: 方法中，您将 textField 的单元格集文本创建为 nil：

```
cell.yourTextField.text = nil; 
```

# java - 如何解决 描述必须只使用 WSDL“import”语句来导入另一个 WSDL？

> ID：10736376
> 
> 赞同：1
> 
> 时间：2012-05-24T11:12:50.417
> 
> 标签：java, web-services, soap, xsd, wsdl

我正在编写一个`SOA/WSDL`Web 服务客户端。

当我使用它时：

```
 Service service = Service.create(this.url, qname);
 Score score = service.getPort(Score.class); 
```

我总是收到这个错误：

```
24.05.2012 12:59:54 com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser parseWSDL
WARNUNG: Import of http://xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx?xsd=2 is violation of BP 1.1 R2001\. Proceeding with a warning.
R2001 A DESCRIPTION MUST only use the WSDL "import" statement to import another WSDL description. 
```

那么 url 和 qname 正确转换为其对象类型的错误是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:19:52.307

该错误很可能不在您的代码中，而是在您正在访问的服务的 WSDL 中。该错误来自您的客户端 WSDL 解析器的验证器。我的猜测是，在 WSDL 的类型定义段内有一个使用该`<xsd:import>`指令的内联 XML Schema，这在 wsdl 定义的上下文中是非法的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-15T07:20:38.077

> 描述必须只使用 WSDL “import” 语句来导入另一个 WSDL 描述

因此，如果您将另一个 WSDL 导入到一个 WSDL 中，那么`<wsdl:import>`是有效标记。但是，如果您使用此标记来导入 XML 模式定义，那么您将在运行时收到提及的警告。例如无效：

```
<wsdl:import namespace="com.my.schema/v2" location="services.xsd"/> 
```

相反，使用`<wsdl:types>`and`<xsd:import>`来导入您的 XML 模式定义。

```
<wsdl:types>
  <xsd:schema>
    <xsd:import namespace="com.my.schema/v2" schemaLocation="services.xsd"/>
  </xsd:schema>
</wsdl:types> 
```

它对我有用，所以想分享！

# openssl - “e 是 65537 (0x10001)”是什么意思？

> ID：10736382
> 
> 赞同：28
> 
> 时间：2012-05-24T11:13:15.883
> 
> 标签：openssl, primes

我想知道输出是什么`e is 65537 (0x10001)`意思。它发生在 RSA 密钥生成期间，使用`openssl genrsa`. 我知道这些点表示该数字已通过探针划分，并且在通过米勒拉宾测试后会打印出加号。但我无法弄清楚打印出 RSA 密钥之前的最后一条信息消息是什么意思。

我在 openssl 文档中找不到它。我可以在关于素数生成的学期论文中使用它。谢谢你的帮助！:)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-24T11:21:30.457

“e”是公共指数，在 中`openssl genrsa`，您可以使用选项`-F4`或`-3`在 65537 和 3 之间进行选择。

有关公共指数的信息，您可以查看以下问题：[https ://security.stackexchange.com/questions/2335/should-rsa-public-exponent-be-only-in-3-5-17-257 -or-65537-due-to-security-c](https://security.stackexchange.com/questions/2335/should-rsa-public-exponent-be-only-in-3-5-17-257-or-65537-due-to-security-c)

# symfony - Symfony2，FOSUserBundle - 在每个请求上获取用户数据

> ID：10736385
> 
> 赞同：2
> 
> 时间：2012-05-24T11:13:18.897
> 
> 标签：symfony, fosuserbundle

在我成功登录并检查我的应用程序后，我还会查看针对数据库运行的查询数量（mysql 之一）。并且总是有一个查询获取用户数据。如何强制 FOSUserBundle 将用户对象存储在会话中，而不是一直从数据库中获取它？

**编辑**

我`security.yml`有这个设置（以及其他关于防火墙的设置）

```
security:
    providers:
        fos_userbundle:
            id: fos_user.user_manager 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:39:49.450

也许您可以将用户提供程序更改为可以满足您需要的自定义提供程序。它有一个`refreshUser()`方法，我怀疑它负责这些请求（我猜你当前的用户提供者必须是这个[https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Entity/UserManager.php](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Entity/UserManager.php)，它扩展了这个[https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Model/UserManager.php](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Model/UserManager.php)，它确实实现了 UserProviderInterface （和另一个））。

# jquery - jquery 代码在 IE8 或更早版本中不起作用

> ID：10736393
> 
> 赞同：0
> 
> 时间：2012-05-24T11:14:04.423
> 
> 标签：jquery, internet-explorer

谁能告诉我为什么这段代码在 IE8 或更早版本中不起作用？它不会抛出错误，只是似乎没有运行。

```
$('<img/>')
.attr('src', $('.my_div img:first').attr('src'))
.load(function(){
   console.log('hello');
       alert('hello');
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:28:52.390

在 IE8 中，加载事件发生在您设置事件处理程序之前。在设置源属性之前设置加载事件：

```
$('<img/>').load(function(){
  console.log('hello');
}).attr('src', $('.my_div img:first').attr('src')); 
```

演示：http: [//jsfiddle.net/Guffa/GRKJE/](http://jsfiddle.net/Guffa/GRKJE/)

相关：[在 IE 8 中使用 jquery 加载事件失败](https://stackoverflow.com/questions/4921712/load-event-with-jquery-fails-in-ie-8)

# design-patterns - 文件和缓存作为进程间通信的软件开发模式

> ID：10736396
> 
> 赞同：0
> 
> 时间：2012-05-24T11:14:35.173
> 
> 标签：design-patterns, ipc

使用数据库或文件作为简单的数据持久层很容易理解。但也有一些方法可以将它们用作通信通道，将数据从一个正在运行的进程传输到另一个进程，甚至发送命令和请求，特别是当这个通道比普通的 Unix 套接字更快时，比如共享内存。

但是你如何有效地使用它呢？我的意思是，一个进程不会因为共享内存的变化而获得一个事件，他总是必须轮询它，对吧？但是，如果所有进程一直在轮询它们的共享内存，这不是太耗费资源了吗？还有哪些其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:36:31.200

为了在 Unix 或 Linux 系统上使用 IPC 获得更改通知，我可以考虑不同的技术，而无需求助于轮询。

**第一次阻塞读取**

可以使用文件描述符（文件、Unix 套接字、管道或命名管道、IPC 队列等）。消费者将以阻塞方式读取此文件（可能建议超时）。一旦生产者更新了共享内存，它就会向这个文件描述符写入一些东西。因此，当这种情况发生时，消费者将从读取中醒来并去读取共享内存。消费者将处于睡眠状态，因此在等待时不会消耗资源（如 CPU）。

甚至可以`select`让消费者同时等待多个文件描述符。

**第二个信号**

消费者将被生产者发送的信号唤醒。一旦更新了共享内存，生产者就会向消费者发送一个信号（例如 SIGUSR1）。消费者之前已经订阅了信号并且可以处理请求。处理起来有点复杂，因为偶数可以随时触发，所以消费者的设计比较困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:36:39.553

文件和数据库是为存储数据而设计的，并且只能将它们用于 IPC，而其他机制（互斥体、事件、信号量等）用于同步对数据的访问并发出有关更改的信号。这些机制正在被“倾听”，等待这样的信号并不消耗资源。另一方面，读取文件试图捕捉更改（这适用于内存映射文件或共享内存）既浪费资源，如果您不同步读写访问（这会让您回到互斥锁和事件等）

# gwt - GWT 中页面底部的 TabLayoutPanel

> ID：10736400
> 
> 赞同：0
> 
> 时间：2012-05-24T11:14:52.707
> 
> 标签：gwt, gwt-tablayoutpanel

我想知道是否可以在 GWT 页面的最底部有一个 TabLayoutPanel，不幸的是，在线文档很少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-17T14:37:28.493

不是很优雅，但它有效：

```
public class BottomLabLayoutPanel extends TabLayoutPanel
{
    public BottomLabLayoutPanel(double barHeight, Unit barUnit)
    {
        super(barHeight, barUnit);

        LayoutPanel panel = (LayoutPanel)getWidget();
        if (panel.getWidgetCount() >= 2)
        {
            Widget w1 = panel.getWidget(0);
            Widget w2 = panel.getWidget(1);
            Element e1 = w1.getElement().getParentElement();
            Element e2 = w2.getElement().getParentElement();
            if (e1 != null)
                e1.setClassName("BottomTabLayoutPanel TabPanel");
            if (e2 != null)
                e2.setClassName("BottomTabLayoutPanel ContentPanel");
        }
    }
} 
```

在 CSS 中：

```
.BottomTabLayoutPanel.TabPanel
{
    top: auto !important;
    bottom: 0px !important;
}

.BottomTabLayoutPanel.ContentPanel
{
    top: 0px !important;
    margin-bottom: 35px !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T18:21:36.923

对的，这是可能的。最简单的方法是使用 DockLayoutPanel 区域。您应该将 TabLayoutPanel 包装在另一个 LayoutPanel 中，以确保您的内容正确显示，否则您必须向 TabLayoutPanel 添加高度。我是从记忆中输入的，但语法应该是正确的。

```
<DockLayoutPanel unit="PX">
  <g:south size="200">
     <g:TabLayoutPanel barHeight="30" barUnit="PX">
        <g:tab>
           <g:header>Tab 1</g:header>
           <g:Label> Tab 1 content</g:Label>
        </g:tab>
        <g:tab>
           <g:header>Tab 2</g:header>
           <g:Label>Tab 2 content</g:Label>
        </g:tab>
    </g:TabLayoutPanel>
  </g:south>
  <g:center>
     <g:FlowPanel>
        <g:Label>Main page content</g:Label>
     </g:FlowPanel>
  <g:center>
</DockLayoutPanel> 
```

# ejb-3.0 - 有状态的 Bean：s erlvet 取错误的值，而 managedBean 没有

> ID：10736401
> 
> 赞同：0
> 
> 时间：2012-05-24T11:14:53.083
> 
> 标签：ejb-3.0, javabeans, managed-bean, stateful-session-bean

我有一个`Stateful Session Bean`保存我的登录会话的 a`JSF Session Bean`和一个`Servlet Filter`.

我需要做的是阻止非登录用户访问我的页面，所以我做了一个过滤器。

它`doFilter()`是这样的：

```
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
    HttpServletRequest req = (HttpServletRequest) request;
    String path = req.getRequestURI().substring(req.getContextPath().length());
    System.out.println(userManager.isLogged());
    if (userManager.isLogged() || path.equals("/") || path.equals("/index.xhtml") || path.startsWith(ResourceHandler.RESOURCE_IDENTIFIER) || path.startsWith("/resources/") || path.startsWith("/admin") || path.equals("/admin/login.xhtml")) {
        chain.doFilter(request, response);
    } else {
        request.getRequestDispatcher("/error.xhtml").forward(request, response);
    }
} 
```

在哪里`userManager`找到：

```
private UserManagerLocal lookupUserManagerLocal() {
    try {
        Context c = new InitialContext();
        return (UserManagerLocal) c.lookup("java:global/UNILIFE/UNILIFE-ejb/UserManager!ejb.UserManagerLocal");
    } catch (NamingException ne) {
        Logger.getLogger(getClass().getName()).log(Level.SEVERE, "exception caught", ne);
        throw new RuntimeException(ne);
    }
} 
```

现在，**总是**`System.out.println(userManager.isLogged());`打印为假，而打印为真。**`#{loginBean.logged}`**

 **请注意，这`loginBean.logged`只是

```
public boolean isLogged() {
    return userManager.isLogged();
} 
```

并且，在我的托管 Bean 中，`userManager`通过

```
@EJB
private UserManagerLocal userManager; 
```

似乎 servlet 不采用与 JSF 托管 Bean 相同的 SFSB。

我究竟做错了什么？

编辑：新代码

小服务程序

```
UserManagerLocal userManager = lookupUserManagerLocal();
private UserManagerLocal lookupUserManagerLocal() {
    try {
        Context c = new InitialContext();
        UserManagerLocal userM = (UserManagerLocal) c.lookup("java:global/UNILIFE/UNILIFE-ejb/UserManager!ejb.UserManagerLocal");
        HttpServletRequest req = (HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest();
        req.setAttribute("userManager", userM);
        return userM;
    } catch (NamingException ne) {
        Logger.getLogger(getClass().getName()).log(Level.SEVERE, "exception caught", ne);
        throw new RuntimeException(ne);
    }
} 
```

jsf豆

```
@PostConstruct
public void init(){
    HttpServletRequest req = (HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest();
    userManager = (UserManagerLocal) req.getSession().getAttribute("userManager");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T17:52:52.960

每次查找有状态会话 bean 时，都会创建一个唯一实例，因此 isLogged 可能会返回默认字段值。您需要以某种方式将有状态会话 bean 实例存储在 HttpSession 中并从您的过滤器中检索它。我缺乏 JSF 专业知识，所以我不知道是否有方便的方法来共享有状态会话 bean 实例，或者您是否需要手动将 JSF bean 链接到有状态 bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:19:26.493

每个 JNDI 查找都会返回一个新的 bean 句柄。因此，您在调用方法时获得默认值，丢弃以前的活动。如其他帖子中所述，您需要保存该引用（HttpSession）以对其进行进一步操作。

下面是在 JSF bean 中访问会话的示例代码。

```
HttpServletRequest req = (HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest(); 
```

根据请求，您可以获得会话然后放入其中。

```
session.setAttribute("userManager", userManager); 
```

现在在过滤器中，您可以从请求中检索 bean。此外，相应地修改代码。**

# .net - Marshal.Copy vs ReadProcessMemory / WriteProcessMemory win32 api - 在同一个过程中

> ID：10736403
> 
> 赞同：0
> 
> 时间：2012-05-24T11:15:18.993
> 
> 标签：.net, winapi, memory, readprocessmemory, interopservices

我想知道是否有人可以概述在 Windows .NET（C#/VB.net）应用程序中使用`ReadProcessMemory`/ `WriteProcessMemory`over`Marshal.Copy`来读取/写入应用程序进程的内存（而不是其他内存）的主要区别、优点和缺点过程）。特别是对于涉及进程内存中任意地址的操作以及将内存块作为字节数组处理（即读/写原始数据）。

在/`Marshal.Copy`工作的所有情况下都可以工作，还是更具限制性？`ReadProcessMemory``WriteProcessMemory`

的实现是否在内部`Marshal.Copy`使用`ReadProcessMemory`/ `WriteProcessMemory`API？

澄清一下：我说的是读取/写入调用（拥有）进程的内存，而不是其他进程的内存！

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T11:56:30.327

`ReadProcessMemory`并且`WriteProcessMemory`是本机 Win32 API，允许您读取和写入*不同*进程的内存。您只需要在尝试在不同进程中读取和写入内存时使用这些 API。正如您可能想象的那样，它们在日常开发中并不经常使用。

`Marshal.Copy`用于在托管和非托管内存之间进行复制，但在同一进程内。

> Marshal.Copy 会在 ReadProcessMemory/WriteProcessMemory 工作的所有情况下工作，还是更具限制性？

不可以，`Marshal.Copy`它仅限于在单个进程中运行。

> Marshal.Copy 的实现是否在内部使用 ReadProcessMemory/WriteProcessMemory API？

不。

> 澄清一下：我说的是读取/写入调用（拥有）进程的内存，而不是其他进程的内存！

在这种情况下，`ReadProcessMemory`并且`WriteProcessMemory`根本与您的需求无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T11:51:23.200

Marshal.Copy()*不能替代*Read/WriteProcessMemory()。它无法进入进程的地址空间并访问该进程拥有的内存。最强烈的暗示是，它没有需要进程句柄的重载。

请记住，Windows 中的每个进程都有自己的虚拟内存地址空间。一个进程中的指针在另一个进程中不可用。这是 Windows 提供的进程隔离的重要组成部分，可防止进程相互破坏。并且提供安全保证，如果进程不属于同一用户，则使用 ReadProcessMemory() 需要管理员权限。必须通过在 OpenProcess() 调用中指定 PROCESS_VM_READ/WRITE 来获取进程句柄，这是一种高权限。

如果您在自己的进程中访问指针，这不是问题。在这种情况下，您只是依赖于 pinvoke 编组器中内置的 Marshal.Copy()。很好地隐藏在视图中，但肯定不会比 Copy() 快，因为您增加了进行 pinvoke 调用和 Windows 执行该函数的开销。Marshal.Copy() 简单快速，相当于 memcpy()。

# python - Sentry + Raven，HTTP 错误 401：未经授权

> ID：10736404
> 
> 赞同：7
> 
> 时间：2012-05-24T11:15:20.167
> 
> 标签：python, django, haproxy, sentry, raven

我有一个[Sentry](http://sentry.readthedocs.org/en/latest/index.html)应用程序，在 url:mydomain.com:11011 上正确运行。

我有一个使用 CDN 创建的项目：[http://XXX:YYY@mydomain.com:11011/2](http://XXX:YYY@mydomain.com:11011/2)

此 url 由 HAProxy 提供，配置如下：

```
listen sentry *:11011
    mode tcp
    server app1 localhost:9005 maxconn 32 
```

哨兵的配置：

```
SENTRY_KEY = 'foo'
SENTRY_PUBLIC = True
SENTRY_URL_PREFIX = 'http://mydomain.com:11011'  # No trailing slash!
SENTRY_WEB_HOST = 'localhost'
SENTRY_WEB_PORT = 9005
SENTRY_WEB_OPTIONS = {
    'workers': 1, # the number of gunicorn workers
    'worker_class': 'gevent',
} 
```

但是当我从同一台服务器尝试 Raven 测试时，我遇到了身份验证问题：

```
$ raven test http://XXX:YYY@mydomain.com:11011/2
HTTPError: HTTP Error 401: UNAUTHORIZED 
```

也失败了：

```
$ raven test http://XXX:YYY@localhost:9005/2
HTTPError: HTTP Error 401: UNAUTHORIZED 
```

可能是什么问题呢？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T19:15:00.960

问题是客户端和服务器上的 raven 版本不同

在哨兵服务器中：

```
raven==1.8.4
sentry==4.4.5 
```

在 django 应用程序中：

```
raven==1.9.1 
```

要解决此问题，请在 django 应用程序中执行以下操作。

```
pip uninstall raven
pip install raven==1.8.4 
```

# jquery - cjuiautocomplete 中的 CreateURL 是什么？

> ID：10736407
> 
> 赞同：0
> 
> 时间：2012-05-24T11:15:23.233
> 
> 标签：jquery, ajax, autocomplete, yii

```
$this->widget('zii.widgets.jui.CJuiAutoComplete', array(
'name'=>'test1',
'value'=>'test21',
'source'=>$this->createUrl('jui/autocompleteTest'),
// additional javascript options for the autocomplete plugin
'options'=>array(
        'showAnim'=>'fold',
),
)); 
```

我是 Yii 框架的新手。

我正在研究自动完成但无法理解上面给出的代码，createUrl 是什么意思？

我们需要按用户创建页面还是该行本身创建页面？

请帮助我。

这是完整的参考代码

```
$this->widget('zii.widgets.jui.CJuiAutoComplete', array(
//'model'=>$model,
//'attribute'=>'name',
'id'=>'country-chain',
'name'=>'country_chain',
'source'=>$this->createUrl('request/suggestCountry'),
'options'=>array(
    'delay'=>300,
    'minLength'=>2,
    'showAnim'=>'fold',
    'select'=>"js:function(event, ui) {
        $('#label').val(ui.item.label);
        $('#code').val(ui.item.code);
        $('#call_code').val(ui.item.call_code);
    }"
),
'htmlOptions'=>array(
    'size'=>'40'
),
)); 
```

来源：[以上代码 Live Example](http://www.eha.ee/labs/yiiplay/index.php/en/site/widget?view=autocomplete)

我需要知道的是在哪里添加模型名称以及在哪里添加数据库字段名称

* * *

我的型号名称是

**详细信息** ，在此字段是：

*   身份证、姓名、邮箱、手机

我想要自动完成下的名称 - 电子邮件和手机应该像上面的例子一样

提前
致谢

![在此处输入图像描述](../Images/ee6e279a9f1cfae7757990bd983dc84d.png)

对不起朋友，

这是结构

型号名称：详情

## 控制器名称是 - DetailsController

在视图 > 详细信息 > _form.php

```
 <div class="form"> <?php $form=$this->beginWidget('CActiveForm', array(
'id'=>'details-form',
'enableAjaxValidation'=>false,)); ?>

<p class="note">Fields with <span class="required">*</span> are required.</p>

<?php echo $form->errorSummary($model); ?>

<div class="row">
    <?php echo $form->labelEx($model,'id'); ?>

    <?php echo $form->textField($model,'id'); ?>
    <?php echo $form->error($model,'id'); ?>
</div>

<div class="row">
    <?php echo $form->labelEx($model,'name'); ?>
    <?php $this->widget('CAutoComplete',
      array(
                     //name of the html field that will be generated
         'name'=>'name', 
                   //replace controller/action with real ids
         'url'=>array('DetailsController/AutoCompleteLookup'), 
         'max'=>10, //specifies the max number of items to display

                     //specifies the number of chars that must be entered 
                     //before autocomplete initiates a lookup

         ));    ?>
            <?php echo $form->error($model,'name'); ?>
</div>

<div class="row">
    <?php echo $form->labelEx($model,'phone'); ?>
    <?php echo $form->textField($model,'phone'); ?>
    <?php echo $form->error($model,'phone'); ?>
</div>

<div class="row">
    <?php echo $form->labelEx($model,'email'); ?>
    <?php echo $form->textField($model,'email'); ?>
    <?php echo $form->error($model,'email'); ?>
</div>

<div class="row buttons">
    <?php echo CHtml::submitButton($model->isNewRecord ? 'Create' : 'Save'); ?>
</div><?php $this->endWidget(); ?> </div><!-- form --> 
```

## 控制器代码是

```
<?php  class DetailsController extends Controller { /**
 * @var string the default layout for the views. Defaults to '//layouts/column2', meaning
 * using two-column layout. See 'protected/views/layouts/column2.php'.
 */
public $layout='//layouts/column2';

/**
 * @return array action filters
 */
public function filters()
{
    return array(
        'accessControl', // perform access control for CRUD operations
    );
}

public function actionAutoCompleteLookup()
    {
       if(Yii::app()->request->isAjaxRequest && isset($_GET['q']))
       {

          $name = $_GET['q']; 

          $criteria = new CDbCriteria;
          $criteria->condition = "name LIKE :sterm";
          $criteria->params = array(":sterm"=>"%$name%");

          $userArray = User::model()->findAll($criteria);
          $returnVal = '';
          foreach($userArray as $userAccount)
          {
             $returnVal .= $userAccount->getAttribute('name').'|'
                                         .$userAccount->getAttribute('id')."\n";
          }
          echo $returnVal;
       }
    }

/**
 * Specifies the access control rules.
 * This method is used by the 'accessControl' filter.
 * @return array access control rules
 */
public function accessRules()
{
    return array(
        array('allow',  // allow all users to perform 'index' and 'view' actions
            'actions'=>array('index','view'),
            'users'=>array('*'),
        ),
        array('allow', // allow authenticated user to perform 'create' and 'update' actions
            'actions'=>array('create','update'),
            'users'=>array('@'),
        ),
        array('allow', // allow admin user to perform 'admin' and 'delete' actions
            'actions'=>array('admin','delete'),
            'users'=>array('admin'),
        ),
        array('deny',  // deny all users
            'users'=>array('*'),
        ),
    );
}

/**
 * Displays a particular model.
 * @param integer $id the ID of the model to be displayed
 */
public function actionView($id)
{
    $this->render('view',array(
        'model'=>$this->loadModel($id),
    ));
}

/**
 * Creates a new model.
 * If creation is successful, the browser will be redirected to the 'view' page.
 */
public function actionCreate()
{
    $model=new Details;

    // Uncomment the following line if AJAX validation is needed
    // $this->performAjaxValidation($model);

    if(isset($_POST['Details']))
    {
        $model->attributes=$_POST['Details'];
        if($model->save())
            $this->redirect(array('view','id'=>$model->id1));
    }

    $this->render('create',array(
        'model'=>$model,
    ));
}

/**
 * Updates a particular model.
 * If update is successful, the browser will be redirected to the 'view' page.
 * @param integer $id the ID of the model to be updated
 */
public function actionUpdate($id)
{
    $model=$this->loadModel($id);

    // Uncomment the following line if AJAX validation is needed
    // $this->performAjaxValidation($model);

    if(isset($_POST['Details']))
    {
        $model->attributes=$_POST['Details'];
        if($model->save())
            $this->redirect(array('view','id'=>$model->id1));
    }

    $this->render('update',array(
        'model'=>$model,
    ));
}

/**
 * Deletes a particular model.
 * If deletion is successful, the browser will be redirected to the 'admin' page.
 * @param integer $id the ID of the model to be deleted
 */
public function actionDelete($id)
{
    if(Yii::app()->request->isPostRequest)
    {
        // we only allow deletion via POST request
        $this->loadModel($id)->delete();

        // if AJAX request (triggered by deletion via admin grid view), we should not redirect the browser
        if(!isset($_GET['ajax']))
            $this->redirect(isset($_POST['returnUrl']) ? $_POST['returnUrl'] : array('admin'));
    }
    else
        throw new CHttpException(400,'Invalid request. Please do not repeat this request again.');
}

/**
 * Lists all models.
 */
public function actionIndex()
{
    $dataProvider=new CActiveDataProvider('Details');
    $this->render('index',array(
        'dataProvider'=>$dataProvider,
    ));
}

/**
 * Manages all models.
 */
public function actionAdmin()
{
    $model=new Details('search');
    $model->unsetAttributes();  // clear any default values
    if(isset($_GET['Details']))
        $model->attributes=$_GET['Details'];

    $this->render('admin',array(
        'model'=>$model,
    ));
}

/**
 * Returns the data model based on the primary key given in the GET variable.
 * If the data model is not found, an HTTP exception will be raised.
 * @param integer the ID of the model to be loaded
 */
public function loadModel($id)
{
    $model=Details::model()->findByPk($id);
    if($model===null)
        throw new CHttpException(404,'The requested page does not exist.');
    return $model;
}

/**
 * Performs the AJAX validation.
 * @param CModel the model to be validated
 */
protected function performAjaxValidation($model)
{
    if(isset($_POST['ajax']) && $_POST['ajax']==='details-form')
    {
        echo CActiveForm::validate($model);
        Yii::app()->end();
    }
} 
```

}

我尝试了上面的代码 - mot 发现任何结果请帮助我的朋友

谢谢德文达

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:44:41.243

看到这个链接..

[http://www.yiiframework.com/wiki/25/using-cautocomplete-to-display-one-value-and-submit-another/](http://www.yiiframework.com/wiki/25/using-cautocomplete-to-display-one-value-and-submit-another/)

根据此链接实现代码...自动完成将正常工作..

或者

```
$this->widget('zii.widgets.jui.CJuiAutoComplete', array(
'name'=>'test1',
'value'=>'test21',
'source'=>$this->createUrl('Your Contoller Name / your function Name'),
// additional javascript options for the autocomplete plugin
'options'=>array(
        'showAnim'=>'fold',
),
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T12:46:19.637

将此添加到您的控制器...

```
public function actionAutoCompleteLookup()
        {
           if(Yii::app()->request->isAjaxRequest && isset($_GET['q']))
           {

              $name = $_GET['q']; 

              $criteria = new CDbCriteria;
              $criteria->condition = "first_name LIKE :sterm";
              $criteria->params = array(":sterm"=>"%$name%");

              $userArray = User::model()->findAll($criteria);
              $returnVal = '';
              foreach($userArray as $userAccount)
              {
                 $returnVal .= $userAccount->getAttribute('first_name').'|'
                                             .$userAccount->getAttribute('user_id')."\n";
              }
              echo $returnVal;
           }
        } 
```

在这样的视图代码中..

```
<?php $this->widget('CAutoComplete',
          array(
                         //name of the html field that will be generated
             'name'=>'first_name', 
                       //replace controller/action with real ids
             'url'=>array('admin/AutoCompleteLookup'), 
             'max'=>10, //specifies the max number of items to display

                         //specifies the number of chars that must be entered 
                         //before autocomplete initiates a lookup

             ));
    ?> 
```

我试过这个它的工作正常......

# git - 获取远程日志，而不是提交

> ID：10736412
> 
> 赞同：8
> 
> 时间：2012-05-24T11:15:38.697
> 
> 标签：git, logging, tortoisegit

如何在不获取更改/提交的情况下获取远程日志？

我只想查看日志，如果自上次`pull`. 基本上避免必须先`stash`或`commit`我的更改。

git帮助文件有这个例子，它以倒置的形式给出我想要的结果：

```
git log master --not --remotes=*/master
Shows all commits that are in local master but not in any remote repository master branches 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T11:42:55.783

您必须获取更改，而不合并它们（即不要使用`pull`）：

```
git fetch origin master 
```

之后，您可以使用`log`（和其他工具）查看远程分支：

```
git log FETCH_HEAD --not master 
```

`FETCH_HEAD`是最新获取的分支的别名，在这种情况下`origin/master`，就像`HEAD`是当前签出分支的最新提交的别名一样。

# magento - Magento，使用 ACL 作为前端。可能的？

> ID：10736413
> 
> 赞同：0
> 
> 时间：2012-05-24T11:15:41.070
> 
> 标签：magento, acl, frontend

是否可以将 Magento ACL 用于前端？找到的所有示例都是特定于后端的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:05:53.263

一切皆有可能。您可以将 Magento 由内而外地破解内核。问题是价格。ACL 是为后端用户和后端事件构建的。因此，使其适用于后端和前端用户/事件......你知道，简短的回答是“不”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-05T19:34:05.670

我知道这是很久以前的事了，但也许这对其他人来说是真实的。

看起来模块“dized/module-front-acl”可能会有所帮助：[https ://github.com/di-zed/m2-front-acl](https://github.com/di-zed/m2-front-acl)

Magento 2 项目前端的 ACL 系统。该模块将允许您充分利用您开发的模块中的前端 ACL 功能。

主要特征：

*   能够通过 XML 文件创建自己的角色和权限。
*   能够为每个角色设置默认权限。
*   能够在管理面板中为每个客户设置必要的角色和权限。
*   能够为新创建的客户（使用插件）自动设置默认角色和权限。
*   能够轻松地将此功能用于控制器/动作和块。

# spring - 如果我们不在 spring 配置文件的 bean 标签中指定 id 和 name 属性会发生什么

> ID：10736419
> 
> 赞同：0
> 
> 时间：2012-05-24T11:16:18.277
> 
> 标签：spring

如果没有放置id和name属性，那么spring容器将如何为该类创建一个对象，如果在spring配置文件中配置了多个相同的类，它将取什么名字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:19:10.003

*@HenriqueMiranda*描述了命名约定。我还要补充一点，当在另一个 bean 中声明时，经常使用这样的 bean（我们称它们为*匿名）：*

```
<bean id="someBean" class="SomeBean">
    <property name="dependency">
        <bean class="Dependency"/>  <!-- anonymous here -->
    </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:30:53.027

如果您没有为类定义名称/标识，spring 将设置一个默认名称，即：

```
com.mypackage.MyClass#0 //For the first object by MyClass
com.mypackage.MyClass#1 //For the second object by MyClass 
```

当您尝试通过请求类型的上下文访问此对象时，spring 将为您返回一个异常（没有唯一的 bean 类型）。但是您可以通过名称访问询问上下文。

```
MyClass m0 = (MyClass)appContext.getBean("com.mypackage.MyClass#0"); // This work
MyClass m1 = (MyClass)appContext.getBean("com.mypackage.MyClass#1"); // This work
MyClass m2 = (MyClass)appContext.getBean(MyClass.class); // This DOES NOT work 
```

# android - Textview不在自定义列表视图中滚动

> ID：10736422
> 
> 赞同：3
> 
> 时间：2012-05-24T11:16:28.977
> 
> 标签：android, listview

我尝试了很多方法来在列表视图中水平滚动文本。
我希望我的一个 textview 像 marquee 一样自动水平滚动 iam 能够设置水平滚动条并在触摸它时滚动

```
TVad.setMovementMethod(new ScrollingMovementMethod()); 
```

这是我的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<TextView
    android:id="@+id/tvinboxname"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/tvinboxmsg"    
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/tvinboxname"
    android:maxLength="10"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/tvtimeStamp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/tvinboxmsg"
    android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/tvadmsg"
        android:layout_width="wrap_content"

        android:layout_height="wrap_content"
        android:layout_below="@+id/tvtimeStamp"
        android:ellipsize="marquee"
        android:focusableInTouchMode="true"
        android:inputType="text"
        android:focusable="true"
        android:marqueeRepeatLimit="marquee_forever"
        android:lines="1"
        android:scrollHorizontally="true"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#330066" /> 
```

在我的 getview 方法中

```
 // @Override
        public View getView(final int position, View convertView,
                ViewGroup parent) {
            convertView = inflater.inflate(R.layout.inboxtextviews, null);
            Tvname = (TextView) convertView.findViewById(R.id.tvinboxname);
            Tvname.setText(VCAESInboxWithOutCheckboxes.Inboxlist.get(position)
                    .getname());
            TVmsg = (TextView) convertView.findViewById(R.id.tvinboxmsg);
            TVmsg.setText(VCAESInboxWithOutCheckboxes.Inboxlist.get(position)
                    .getmessage());
            TVtimeStamp = (TextView) convertView.findViewById(R.id.tvtimeStamp);
            TVtimeStamp.setText(VCAESInboxWithOutCheckboxes.Inboxlist.get(
                    position).getTimeStamp());

            TVad= (TextView) convertView.findViewById(R.id.tvadmsg);

            TVad.setText(VCAESInboxWithOutCheckboxes.Inboxlist.get(
                    position).getAd());

            TVad.setSelected(true);
);
            return convertView;
        } 
```

我在stackoverflow中对此进行了很多搜索，但无法显示滚动文本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T11:35:09.710

使用如下所示的自定义类和

```
 public class MyTextView extends TextView{

 public MyTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
        rotate();
    }

    public MyTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
        rotate();
    }

    public MyTextView(Context context) {
        super(context);
        init();
        rotate();
    }

    private void rotate() {
        // TODO Auto-generated method stub
        setSelected(true);
    }

    private void init() {
        if (!isInEditMode()) {

        }
    }

  } 
```

将其添加到自定义列表视图的 xml 文件中，如下所示

```
 <Your Package Name.MyTextView
    android:layout_marginTop="10dip" android:id="@+id/tv_parse"
    android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:textSize="22px"
        android:textColor="#34A4c5"
        android:ellipsize="marquee"
        android:maxWidth="220dp" 
        android:fadingEdge="horizontal"
        android:marqueeRepeatLimit="marquee_forever"
        android:scrollHorizontally="true"  
        android:singleLine="true"
        android:layout_marginLeft="10dp"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:layout_marginRight="10dp"></Your Package Name.MyTextView> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T22:35:09.390

如果您希望 TextView 在列表处于空闲状态时水平滚动，您需要将 TextView 设置为选中状态。

```
public void bindView....
// Assuming you have a static view holder class

viewHolder.myTextViewToScroll.setSelected(true); 
```

现在它应该滚动:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T11:22:44.240

为此，您使用 XML 从 XML 设计列表视图行`SimpleListAdapter`。`scrollview`在 XML 中连续放置一个。

```
<LinearLayout>
<scrollView>
<textview/>
</scrollView>
</LinearLayout> 
```

# c - c中的字符和字符串与strpbrk

> ID：10736423
> 
> 赞同：0
> 
> 时间：2012-05-24T11:16:33.487
> 
> 标签：c, string

鉴于以下情况：

```
char delimiters1[] = {' ' , '&' , '<' , '>'};

char delimiters2[] =  " &<>"; 
```

如果我将`C`函数`strpbrk`与`delimiters1`and一起使用`delimiters2`，结果会相同吗？

我已经用 20 个输入对它们进行了测试，并且得到了相同的输出。

我错了吗 ？

谢谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:26:51.180

```
char delimiters1[] = {' ' , '&' , '<' , '>'}; 
```

应该：

```
char delimiters1[] = {' ' , '&' , '<' , '>', 0}; 
```

它可能会工作几次。但刺痛应该是空终止的。否则，strpbrk 将如何知道要搜索的字符的结尾？

这是[strbrk()](http://linux.die.net/man/3/strpbrk)的片段：

```
 while (*s1)
    {
      for (c = s2; *c; c++)
    {
      if (*s1 == *c)
        break;
    }
      if (*c)
    break;
      s1++;
    } 
```

其中 c 是指向字符集的指针。正如您可以清楚地看到的那样，在某些时候`*c`应该为 null 以使程序正常工作。

# iphone - 这个 applicationDidEnterBackground 方法有什么问题？

> ID：10736427
> 
> 赞同：0
> 
> 时间：2012-05-24T11:16:48.067
> 
> 标签：iphone, ios, notifications, background-process

我正在尝试在应用程序进入后台时安排一堆通知。以下代码在 iPhone 模拟器中运行良好...

```
- (void)applicationDidEnterBackground:(UIApplication *)application {

NSLog(@"applicationDidEnterBackground");

bgTask = [application beginBackgroundTaskWithExpirationHandler:^{
    // Clean up any unfinished task business by marking where you.
    // stopped or ending the task outright.
    [application endBackgroundTask:bgTask];
    bgTask = UIBackgroundTaskInvalid;
}];

// Start the long-running task and return immediately.
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    // Do the work associated with the task, preferably in chunks.

    // Get notifications count
    int notificationsCount          = [[[UIApplication sharedApplication] scheduledLocalNotifications] count];

    // Calculate the number of possible remaining notifications (maximum 64 per application)
    int notificationsRemaining      = 64 - notificationsCount;

    if (notificationsCount > 0) {       
        // Get the last notification currently scheduled
        UILocalNotification *lastNotif  = [[[UIApplication sharedApplication] scheduledLocalNotifications] lastObject];

        // If the last notification is not repeating notification
        if (lastNotif.repeatInterval == 0) {

            // Get the last notification's values
            NSDictionary *userInfo          = lastNotif.userInfo;
            NSInteger interval              = [[userInfo objectForKey:@"interval"] intValue];
            NSDate *fireDate                = lastNotif.fireDate;
            NSTimeZone *timeZone            = lastNotif.timeZone;
            NSString *alertBody             = lastNotif.alertBody;
            bool hasAction                  = lastNotif.hasAction;
            NSString *alertAction           = lastNotif.alertAction;
            NSString *soundName             = lastNotif.soundName;

            // Schedule the remaining notifications
            for (int i = 1 ; i < notificationsRemaining+1 ; i++) {

                // Allocate new local notification to be scheduled
                UILocalNotification *notif      = [[UILocalNotification alloc] init];

                // If notif is nil go back one step and try again 
                if (notif == nil) {
                    i--;
                } else {                    
                    // Set up the newly created notification
                    notif.fireDate                      = [fireDate dateByAddingTimeInterval: 10 * interval * i];
                    notif.timeZone                      = timeZone;
                    notif.alertBody                     = alertBody;
                    notif.hasAction                     = hasAction;
                    notif.alertAction                   = alertAction;
                    notif.soundName                     = soundName;
                    notif.userInfo                      = userInfo;
                    notif.applicationIconBadgeNumber    += 1;

                    // Schedule the newly created notification
                    [[UIApplication sharedApplication] scheduleLocalNotification:notif];

                    [notif release];

                }

            }           
        }       
    }       

    NSLog(@"notifications: %@", [[UIApplication sharedApplication] scheduledLocalNotifications]);

    [application endBackgroundTask:bgTask];
    bgTask = UIBackgroundTaskInvalid;
}); 
```

}

...但在 iPod Touch 2 中失败并出现错误：

```
Thu May 24 14:03:18 unknown TestApp[599] <Warning>: applicationDidEnterBackground
Thu May 24 14:03:18 unknown TestApp[599] <Warning>: applicationWillTerminate
Thu May 24 14:03:18 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:my.test.TestApplicationWithPhoneGap[0x1c13]) Bug: launchd_core_logic.c:3252 (24226):3
Thu May 24 14:03:18 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:my.test.TestApplicationWithPhoneGap[0x1c13]) Bug: launchd_core_logic.c:2681 (24226):10
Thu May 24 14:03:18 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:my.test.TestApplicationWithPhoneGap[0x1c13]) Working around 5020256\. Assuming the job crashed.
Thu May 24 14:03:18 unknown com.apple.launchd[1] <Warning>: (UIKitApplication:my.testTestApplicationWithPhoneGap[0x1c13]) Job appears to have crashed: Segmentation fault
Thu May 24 14:03:18 unknown com.apple.debugserver-48[597] <Warning>: 1 [0255/1403]: error: ::read ( 4, 0x2fee59f0, 1024 ) => -1 err = Bad file descriptor (0x00000009)
Thu May 24 14:03:18 unknown SpringBoard[24] <Warning>: Application 'TestApp' exited abnormally with signal 11: Segmentation fault
Thu May 24 14:03:24 unknown SpringBoard[24] <Warning>: Unable to cancel system wake for 2012-05-24 11:03:09 +0000\. IOPMCancelScheduledPowerEvent() returned 0xe00002f0 
```

任何想法为什么这在真实设备上不起作用，任何想法如何解决这个问题？

**编辑答案：**
似乎是老一代 iPod Touch 和 iPhone 不支持这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:20:04.257

看看你的设备是否支持后台模式？

# regex - 简单的正则表达式帮助我开始

> ID：10736428
> 
> 赞同：1
> 
> 时间：2012-05-24T11:16:48.667
> 
> 标签：regex

我正在尝试提出一个简单的正则表达式，它将查找第一个“：”，然后是未知数量的字符串，直到一个“。” 找到并返回其间的字符串。

例子

```
test example:IWANTTHISBACK. [8909] test 
```

结果

```
IWANTTHISBACK 
```

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:24:30.433

> 我正在尝试提出一个简单的正则表达式，它将查找第一个“：”，然后是未知数量的字符串，直到一个“。” 找到并返回其间的字符串。

你基本上回答了你自己的问题。如果你把它翻译成正则表达式，它看起来相当简单：

> 为了第一 '：'

```
: 
```

> 后跟未知数量的字符串，直到出现“。”

```
[^.]* matches all non dots and stops at first dot. 
```

因此，如果您将所有这些写在一起：

```
:([^.]*) 
```

反向引用`$1`将有你的字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T11:23:02.413

**尝试这个**

```
(?<=:)([^\.]*?)(?=\.) 
```

**解释**

```
<!--
(?<=:)([^\.]*?)(?=\.)

Options: case insensitive

Assert that the regex below can be matched, with the match ending at this position (positive lookbehind) «(?<=:)»
   Match the character “:” literally «:»
Match the regular expression below and capture its match into backreference number 1 «([^\.]*?)»
   Match any character that is NOT a . character «[^\.]*?»
      Between zero and unlimited times, as few times as possible, expanding as needed (lazy) «*?»
Assert that the regex below can be matched, starting at this position (positive lookahead) «(?=\.)»
   Match the character “.” literally «\.»
--> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T11:24:49.623

在 Java 中

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Main {
    public static void main(String[] args) {
        Pattern pattern = Pattern.compile(":([^.]*)\\.");
        Matcher matcher = pattern.matcher("test example:IWANTTHISBACK. :abc.[8909] test");
        if (matcher.find()) {
            System.out.println(matcher.group(1));
        }
    }
} 
```

输出：

```
IWANTTHISBACK 
```

# android - 保存应用程序资源（如 PDF、演示文件和其他文件）的最佳位置，这些资源将由应用程序读取和显示

> ID：10736433
> 
> 赞同：0
> 
> 时间：2012-05-24T11:17:04.430
> 
> 标签：android, objective-c, xcode, ipad, ios5

我正在开发 iPad 和 Android 应用程序，用于演示目的。App 包含许多 PDF、Presentation 文件，由 App 使用 WebView 读取和显示。

现在的问题是，**我不确定将这些文件保存在哪里.. 1）在（iPAd 应用程序）的 Documents 目录中 2）iPAD 的 SD 卡 3）关于 Android 完全空白 ..donno 将它们保存在 android 的哪里。**

请帮助我，因为**这些文件稍后将由应用程序同步。**将进行**同步以从 iTunes 下载新文件。**

提前致谢。任何帮助将不胜感激 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:21:14.453

对于在 iOS 应用程序中 - 放置此信息的推荐位置是文档目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:26:59.910

对于 Android：您可以将其存储在应用程序包的 /assets 文件夹中。请参阅此链接以了解如何使用资产：

> [http://developer.android.com/guide/topics/resources/index.html](http://developer.android.com/guide/topics/resources/index.html)
> 
> [http://docs.xamarin.com/android/advanced_topics/using_android_assets](http://docs.xamarin.com/android/advanced_topics/using_android_assets)

谢谢 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T11:27:41.890

1）如果您将数据保存在 Documents 目录中，您必须确保它们以“不备份”属性存储，否则您会将所有数据备份到 iCloud（并被应用商店拒绝）。或者，您可以使用 tmp 或缓存文件夹，可以通过从该页面登录找到：[https ://developer.apple.com/devcenter/ios/checklist/](https://developer.apple.com/devcenter/ios/checklist/)

2）我认为你也可以使用SD卡......

3) 在 android 中，您可以在编译时将数据保存在 res/raw 文件夹中，或者在运行时将数据保存在手机存储/sd-card 中。因此，基本上，如果您从某个地方获取文件，我建议将数据保存在 SD 卡上，如果它存在于手机内存中。

# android - 如果没有长按，WebView 将不会在某些设备上滚动

> ID：10736438
> 
> 赞同：2
> 
> 时间：2012-05-24T11:17:28.987
> 
> 标签：android, webview, scroll

我有一个 WebView 设置如下：

```
 //the web view
    _mWebView = (WebView) findViewById(R.id.webView);

    //push the url on to the web view
    _mWebView.loadUrl(buildURL.toString());

    //make the view transparent to get rid of white box while loading
    _mWebView.setBackgroundColor(0x00000000);

    //_mWebView.bringToFront();
    //_mWebView.requestFocus();
    //_mWebView.requestFocusFromTouch(); 
```

在某些手机上，当视图加载后它会滚动正常，但在我的设备上，运行 4.0.3 的 Sensation Xe，视图不会滚动。如果我长按视图，它会选择一些文本，然后会正常滚动。这很烦人，因为对最终用户执行此操作并不明显。我已经尝试了上面概述的一些事情，有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:30:12.587

在您的代码中添加这一行，这可能有助于您尝试，

```
_mWebView.setVerticalScrollBarEnabled(true); 
```

# spring - 带有 maven 的示例 guava 缓存应用程序

> ID：10736439
> 
> 赞同：3
> 
> 时间：2012-05-24T11:17:37.490
> 
> 标签：spring, caching, maven, guava

是否有使用 guava 缓存应用程序和 maven 开发的示例应用程序。我需要对代码进行解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:19:33.277

[在http://www.yusufaytas.com/caching-guava/](http://www.yusufaytas.com/caching-guava/)中有一个相关的帖子。它讲述了有关番石榴缓存的基本功能。文末还给出了源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:18:32.323

这是另一个示例[http://syntx.co/languages-frameworks/java/implementing-google-guava-cache-using-proxy-pattern/](http://syntx.co/languages-frameworks/java/implementing-google-guava-cache-using-proxy-pattern/)，它展示了如何在实现代理设计模式时使用 google guava 缓存。该帖子还列出了番石榴缓存的 Maven 依赖项。

# android - 创建大量联系人的最快方法是什么？

> ID：10736441
> 
> 赞同：0
> 
> 时间：2012-05-24T11:17:45.610
> 
> 标签：android, contacts, android-contacts

在我的应用程序中，我需要创建大量联系人。

我目前使用的代码：

```
 ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
        ops.add(ContentProviderOperation.newInsert(ContactsContract.RawContacts.CONTENT_URI)
                .withValue(ContactsContract.RawContacts.ACCOUNT_TYPE, accounts[0].type)
                .withValue(ContactsContract.RawContacts.ACCOUNT_NAME, accounts[0].name)
                .build());
        ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
                .withValue(ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE)
                        .withValue(ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME, name)
                        .build());
        ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
                .withValue(ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
                        .withValue(ContactsContract.CommonDataKinds.Phone.NUMBER, number)
                        .withValue(ContactsContract.CommonDataKinds.Phone.TYPE, ContactsContract.CommonDataKinds.Phone.TYPE_HOME)
                        .build());
        ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
                .withValue(ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
                        .withValue(ContactsContract.CommonDataKinds.Phone.NUMBER, number)
                        .withValue(ContactsContract.CommonDataKinds.Phone.TYPE, ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE)
                        .build());

        try {
            cr.applyBatch(ContactsContract.AUTHORITY, ops);
        } catch (RemoteException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (OperationApplicationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

对于某些数量的联系人，该代码可以完美运行，但是如果我创建大量联系人，则该代码会变慢。因此我的问题是：创建大量联系人的最快方法是什么？

在此先感谢，欢迎任何想法的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:19:48.517

如果您可以与 gmail 同步，则可以在 gmail.com 中导入联系人（以 CSV 格式）并将它们同步到手机。

或者只是看到这个类似[的问题：使用 applyBatch 插入数千个联系人条目很慢](https://stackoverflow.com/questions/5596354/insertion-of-thousands-of-contact-entries-using-applybatch-is-slow)

# ruby-on-rails - 使用正则表达式验证文本输入中的元音变音

> ID：10736443
> 
> 赞同：0
> 
> 时间：2012-05-24T11:17:50.173
> 
> 标签：ruby-on-rails

有人知道如何将 Umlauts 添加到正则表达式以验证带有 rails 的文本输入的格式吗？

我试过这个，但它完全打破了轨道：

```
validates :first_name, :presence => true, :allow_blank => false, :format => { :with => /\A[a-z A-ZäöüÄÖÜ]+\z/} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:32:00.097

尝试这个：

```
validates :first_name, :presence => true, :allow_blank => false, :format => { :with => /\A[[:alpha:]]+\z/} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:28:43.627

这应该可以，但要确保 ruby​​ 本身知道您在代码中使用的编码，方法是添加为第一行（假设为 utf-8）：

```
# encoding: UTF-8 
```

让我知道是否有帮助

# javascript - Chrome 不显示在 HTML 页面中动态加载的外部 JS 文件的更新内容

> ID：10736444
> 
> 赞同：5
> 
> 时间：2012-05-24T11:17:54.917
> 
> 标签：javascript, html

我有以下简单的 HTML 和 JS 代码。当用户选择意大利语选项时，JS 代码会动态加载外部 JS 文件`language_it.js`。

```
<html>
<head>

<script>
function ChangePageLanguage()
{
var e = document.getElementById("langDD");
var lang = e.options[e.selectedIndex].value;

if (lang == "it")
{
    var scrptE = document.createElement("script");
    scrptE.setAttribute("type", "text/javascript");
    scrptE.setAttribute("language", "JavaScript");
    scrptE.setAttribute("src", "language_it.js");
    var head = document.getElementsByTagName("head")[0];
    head.appendChild(scrptE);
}
}
</script>
</head>

<body>
<select onchange="ChangePageLanguage()" id="langDD">
    <option value="en">English</option>
    <option value="it">Italian</option>
    </select>
</body>
</html> 
```

`language_it.js`有以下代码行：

```
alert ("Italian"); 
```

它在 Firefox 中运行良好，但如果我更改 then 的内容，`language_it.js`则`Chrome`不会显示更新的内容，除非我重新启动 index.html 页面`Chrome`。这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T11:23:16.207

在 Chrome 上开发时，可以禁用缓存

*   按 F12 打开开发者工具。
*   在右下角，单击齿轮图标。
*   选中“禁用缓存”。
*   重新加载页面。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-24T11:32:04.283

如果您的缓存阻止您的脚本正确更新，或者您需要它在生产中始终不缓存，您可以随时执行以下操作：

```
scrptE.setAttribute("src", "language_it.js?" + (Date.now() % 10000)); 
```

这将附加一个基于时间的数字字符串，该字符串几乎总是会在 URI 的末尾为您提供一个唯一的数字，这应该会阻止浏览器从缓存中检索文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T11:29:12.190

如果您只需要在开发期间刷新 .js 文件，请按照 Joseph 的建议禁用缓存。

如果您需要在每次调用 JavaScript 文件时刷新它（例如，如果您正在动态生成它），您可以在文件名中添加一个唯一的查询字符串，这将导致浏览器每次都检索它：

```
scrptE.setAttribute("src", "language_it.js?ticks=" + new Date().getTime());​ 
```

# c# - 列表框中的两列数据绑定麻烦

> ID：10736445
> 
> 赞同：0
> 
> 时间：2012-05-24T11:17:56.853
> 
> 标签：c#, wpf, data-binding

我对 DataBinding 的理解仍处于“研究它”的水平，所以这是我的问题。我有这个数据：

```
private class User
    {
        public string username { get; set; }
        public string real_name { get; set; }
    }

ObservableCollection<User> users = new ObservableCollection<User>();
...adds stuff...
CollectionView view = (CollectionView)CollectionViewSource.GetDefaultView(users); 
```

我希望它显示在两列 ListBox 中。我通过执行以下操作进入了两列 ComboBox：

```
<ComboBox Height="23" HorizontalAlignment="Left" Margin="114,23,0,0" Name="comboBox_client" VerticalAlignment="Top" Width="113" IsEditable="True" ItemsSource="{Binding}" >
        <ComboBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="{Binding username}" Name="left" Width="50" />
                    <TextBlock Text="{Binding real_name}" Name="right" Width="100" />
                </StackPanel>
            </DataTemplate>
        </ComboBox.ItemTemplate>
    </ComboBox> 
```

和

```
comboBox_client.ItemsSource = view; 
```

但我不确定如何跨步到 ListBox，因为我看不到 ItemTemplate，而且我不理解上述 Xaml 实际在做什么背后的概念。如果我取出 ItemTemplate 部分并在 ListBox 上尝试其余部分，我只是一个充满 System.Windows.DataTemplate 的列表框。

请指出正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:24:10.020

ListBox 也有一个`ItemTemplate`属性。我想你只是错过了。

`DataTemplate`您可以使用与`ComboBox`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:28:42.670

列表框：

```
 <ListBox ItemsSource="{Binding}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="{Binding username}" Width="50" />
                    <TextBlock Text="{Binding real_name}" Width="100" />
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

但在我看来，ListView 更适合这个任务：

```
 <ListView ItemsSource="{Binding}">
        <ListView.View>
            <GridView>
                <GridViewColumn Header="User name" DisplayMemberBinding="{Binding username}" Width="50" />
                <GridViewColumn Header="Name" DisplayMemberBinding="{Binding RealName}" Width="100" />
            </GridView>
        </ListView.View>
    </ListView> 
```

# graph - D3.JS - 让我的链接可见

> ID：10736446
> 
> 赞同：0
> 
> 时间：2012-05-24T11:17:58.847
> 
> 标签：graph, tree, d3.js

我想制作一个结构不同信息的图表，有点像“pearltrees”（http://www.pearltrees.com/）。目前，我显示了元素（但尚未与任何类型的数据相关联），并且它们之间有链接（每个元素都附加到之前的元素）。问题是：连接存在但不可见。提示：不是浏览器，一定是代码 ;) 尝试了很多，在网上搜索，但现在我觉得这个问题花费了我很多时间，所以我想问你。

```
<!DOCTYPE html>
<html>
<head>
     <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js?1.25.0">       
     </script>
<script type="text/javascript" src="http://mbostock.github.com/d3/d3.geom.js?1.25.0"></script>
<script type="text/javascript" src="http://mbostock.github.com/d3/d3.layout.js?1.25.0"></script>
 <style type="text/css">
link { stroke: #999; }
</style>
</head>
<body>
<div></div>

<script type="text/javascript">

 var w = 960,
h = 650,
nodes = [],
node,
 i = 0,
 links = [];

var vis = d3.select("body").append("svg:svg")
.attr("width", w)
.attr("height", h);

//create force:
var force = d3.layout.force()           
.nodes(nodes)                           
.links(links)                               
.linkDistance(30)
.charge([-50])                      
.friction([0.98])   
.gravity([0.025])                       
.size([w, h]);

 //apply the force
force.on("tick", function(e) {      
    vis.selectAll("path")
    .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });   
});

//add 15 objects that are connected each to the one before.
setInterval(function(){
if(i<15){ 
    nodes.push({
        size: Math.random() * 300 + 100,
        id: i
    });
    if(i!=0){
        links.push({source: nodes[i], target: nodes[i-1]});
    }
}

i = i+1;    

vis.selectAll("path")
  .data(nodes)
  .enter().append("svg:path")
  .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; })
  .attr("d", d3.svg.symbol()
  .size(function(d) { return d.size; })
  .type(function(d) { return d.type; }))
  .style("fill", "steelblue")
  .style("stroke", "white")
  .style("fill-opacity", "0.9")
  .style("stroke-width", "1.5px")
  .call(force.drag);

// Restart the force layout.
force
  .nodes(nodes)
  .links(links)
  .start();

drawLines(); 

//enter new nodes:
node.enter().append("svg:circle")
  .attr("class", "node")
  .attr("cx", function(d) { return d.x; })
  .attr("cy", function(d) { return d.y; })
  .attr("r", function(d) { return Math.sqrt(d.size) / 10 || 4.5; })
  .style("fill", color)
  .on("click", click)
  .call(force.drag);

// Exit old nodes:
node.exit().remove();
}, 1000);

function drawLines(){
lines = svg.selectAll("line.link")
    .data(links);
lines.enter().insert("svg:line", "circle.node")
    .attr("class", "link")
    .attr("x1", function(d) { return d.source.x; })
    .attr("y1", function(d) { return d.source.y; })
    .attr("x2", function(d) { return d.target.x; })
    .attr("y2", function(d) { return d.target.y; })
    .attr("drawn", 1)
    .style("stroke", "black")
    .style("stroke-width", 1)
    .style("fill", "black");
d3.selectAll("link").style("color", "black");
} 
```

这仍然是来自 D3.js-examples-site 的一组示例代码，但这将在进一步的开发中进行更改。

感谢您的帮助。

编辑：发布更多代码，向您展示整个脚本如何工作/不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:47:40.707

现在你的**节点**和**链接**是空数组——所以你不应该看到任何东西。

您可以像这样添加对象**链接**数组：

```
var link = {};
link.source = <node obj>;
link.target = <node obj>;
links.push(link); 
```

其中 node obj 是对**节点**数组中对象的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:32:42.767

我不确定是什么造成的，但现在它正在工作。

将节点和链接存储在一个变量中，因为 JSON 拒绝工作，现在它按预期执行链接。

```
force
  .nodes(jsonData.nodes)
  .links(jsonData.links)
  .start();

var link = svg.selectAll(".link")
  .data(jsonData.links)
.enter().append("line")
  .attr("class", "link");

var node = svg.selectAll(".node")
  .data(jsonData.nodes)
.enter().append("g")
  .attr("class", "node")
  .call(force.drag);

node.append("image")
  .attr("xlink:href", "../img/perry_rhodan.png")
  .attr("x", -8)
  .attr("y", -8)
  .attr("width", 30)
  .attr("height", 30);

node.append("text")
  .attr("dx", 12)
  .attr("dy", ".35em")
  .attr("fill", "#aa0000")
  .text(function(d) { return d.name });

node.append("title")
    .text(function(d) { return d.skill; });    

force.on("tick", function() {
link.attr("x1", function(d) { return d.source.x; })
    .attr("y1", function(d) { return d.source.y; })
    .attr("x2", function(d) { return d.target.x; })
    .attr("y2", function(d) { return d.target.y; });

  node.attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });
}); 
```

# google-apps-script - onEdit 可以以编程方式创建触发器吗？

> ID：10736454
> 
> 赞同：2
> 
> 时间：2012-05-24T11:18:44.803
> 
> 标签：google-apps-script, google-sheets, triggers

我写了一个简单的脚本，试图以编程方式从 onEdit 函数创建一个脚本

```
function onEdit() {
  test();
}

function test() {
  triggerLater();
}

function customMsgBox() {
  Browser.msgBox("hello world");
}

function triggerLater() {
  var date = new Date();
  date.setMinutes(date.getMinutes() + 1);
  try {
    var oneTimeOnly = ScriptApp.newTrigger("customMsgBox")
      .timeBased()
      .at(date)
      .create();
    return oneTimeOnly.getUniqueId();
  }
  catch (e) {
    var ss = SpreadsheetApp.getActiveSpreadsheet();
    ss.toast("error");
  }
} 
```

如果我尝试从脚本编辑器运行 onEdit，则会创建触发器，但电子表格上的每次编辑都会在*toast中收到“错误”消息*

有人可以帮我理解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T11:34:15.530

The `onEdit` simple event handler function has limited permissions (i.e. it can not send emails, open the calendar, etc). Because it runs without the users permissions. Therefore, it can not set up a trigger (which do not have any restrictions and would be a huge security bug).

If you expected that the trigger should be created under your account, use the installable on edit trigger. First, rename your onEdit function to something else (so it is not triggered as a simple event handler), then go to the Resources menu and pick your function to run on spreadsheet edit events. Take a look at the [docs](https://developers.google.com/apps-script/guide_events) for more.

# google-drive-api - Google 云端硬盘和 Chrome 网上应用店身份验证

> ID：10736455
> 
> 赞同：3
> 
> 时间：2012-05-24T11:18:45.337
> 
> 标签：google-drive-api, chrome-web-store

我正在使用 Google Drive API 构建一个 Chrome Web Store 应用程序，并且想知道我应该如何对用户进行身份验证。

Chrome 网上应用店文档建议使用 OpenID。

Google Drive SDK 文档建议使用 oauth2。

我应该支持两者吗？如果用户使用 OpenID 登录，然后从 Google Drive 打开文件，有没有办法知道 OpenID 和 oauth 身份验证应该链接到同一个帐户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:43:18.683

问题是 Chrome 网上应用店只“推荐”使用 OpenID（我猜是 v2）。但是，当您从云端硬盘创建或打开文件时，云端硬盘会强制使用 OAuth 2.0。我建议您然后使用基于 OAuth 2.0 的身份验证（称为 OpenID Connect），因为它与 Drive 兼容并且您不必使用 Chrome 身份验证。当用户不是来自 Google Drive 而是来自例如 Chrome 中的新标签页时，您可以简单地从您的 Web 应用程序触发 OpenID Connect（基于 OAuth 2.0）身份验证流程。

我能想到的唯一值得注意的例外是，如果您使用的是 Chrome 的计费 API，那么您可能必须使用 OpenID v2。

简而言之：使用[OpenID Connect](https://developers.google.com/accounts/docs/OAuth2Login)（基于 OAuth 2.0），因为 Drive 会强制您使用它，而且它也是一项更新的技术。

# maven - maven-bundle-plugin 中的内部错误。嵌入错误：打开资源

> ID：10736456
> 
> 赞同：2
> 
> 时间：2012-05-24T11:18:47.647
> 
> 标签：maven, osgi

我在使用 maven 构建 OSGi 项目时遇到问题。我开始遇到一个奇怪的错误。

我想某些资源已损坏。但我不知道是哪一个。我试图删除 .m2/repository。但问题仍然存在。关于如何纠正这个问题的任何想法？

```
[ERROR] An internal error occurred
java.io.IOException: Opening resource
at aQute.lib.osgi.AbstractResource.getLocalBytes(AbstractResource.java:35)
at aQute.lib.osgi.AbstractResource.write(AbstractResource.java:46)
at aQute.lib.osgi.Jar.writeResource(Jar.java:445)
at aQute.lib.osgi.Jar.write(Jar.java:224)
at aQute.lib.osgi.Jar.write(Jar.java:192)
at org.apache.felix.bundleplugin.BundlePlugin.execute(BundlePlugin.java:362)
at org.apache.felix.bundleplugin.BundlePlugin.execute(BundlePlugin.java:264)
at org.apache.felix.bundleplugin.BundlePlugin.execute(BundlePlugin.java:255)
at    org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: java.util.UnknownFormatConversionException: Conversion = '�'
at java.util.Formatter.checkText(Formatter.java:2519)
at java.util.Formatter.parse(Formatter.java:2501)
at java.util.Formatter.format(Formatter.java:2430)
at java.util.Formatter.format(Formatter.java:2383)
at java.lang.String.format(String.java:2781)
at aQute.lib.osgi.Processor.formatArrays(Processor.java:1273)
at aQute.lib.osgi.Processor.warning(Processor.java:116)
at aQute.lib.osgi.Macro.replace(Macro.java:144)
at aQute.lib.osgi.Macro.process(Macro.java:71)
at aQute.lib.osgi.Macro.process(Macro.java:58)
at aQute.lib.osgi.Macro.process(Macro.java:53)
at aQute.lib.osgi.Macro.process(Macro.java:964)
at aQute.lib.osgi.PreprocessResource.getBytes(PreprocessResource.java:25)
at aQute.lib.osgi.AbstractResource.getLocalBytes(AbstractResource.java:31)
... 26 more
 [INFO] ------------------------------------------------------------------------
 [ERROR] BUILD ERROR
 [INFO] ------------------------------------------------------------------------
 [INFO] Internal error in maven-bundle-plugin

 Embedded error: Opening resource
 Conversion = '�'
 [INFO] ------------------------------------------------------------------------
 [INFO] Trace
 org.apache.maven.lifecycle.LifecycleExecutionException: Internal error in maven-bundle-plugin
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:719)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.MojoExecutionException: Internal error in maven-bundle-plugin
at org.apache.felix.bundleplugin.BundlePlugin.execute(BundlePlugin.java:412)
at org.apache.felix.bundleplugin.BundlePlugin.execute(BundlePlugin.java:264)
at org.apache.felix.bundleplugin.BundlePlugin.execute(BundlePlugin.java:255)
at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
... 17 more
Caused by: java.io.IOException: Opening resource
at aQute.lib.osgi.AbstractResource.getLocalBytes(AbstractResource.java:35)
at aQute.lib.osgi.AbstractResource.write(AbstractResource.java:46)
at aQute.lib.osgi.Jar.writeResource(Jar.java:445)
at aQute.lib.osgi.Jar.write(Jar.java:224)
at aQute.lib.osgi.Jar.write(Jar.java:192)
at org.apache.felix.bundleplugin.BundlePlugin.execute(BundlePlugin.java:362)
... 21 more
Caused by: java.util.UnknownFormatConversionException: Conversion = '�'
at java.util.Formatter.checkText(Formatter.java:2519)
at java.util.Formatter.parse(Formatter.java:2501)
at java.util.Formatter.format(Formatter.java:2430)
at java.util.Formatter.format(Formatter.java:2383)
at java.lang.String.format(String.java:2781)
at aQute.lib.osgi.Processor.formatArrays(Processor.java:1273)
at aQute.lib.osgi.Processor.warning(Processor.java:116)
at aQute.lib.osgi.Macro.replace(Macro.java:144)
at aQute.lib.osgi.Macro.process(Macro.java:71)
at aQute.lib.osgi.Macro.process(Macro.java:58)
at aQute.lib.osgi.Macro.process(Macro.java:53)
at aQute.lib.osgi.Macro.process(Macro.java:964)
at aQute.lib.osgi.PreprocessResource.getBytes(PreprocessResource.java:25)
    at aQute.lib.osgi.AbstractResource.getLocalBytes(AbstractResource.java:31)
... 26 more 
```

根据要求，maven-bundle-plugin 配置：

```
<plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
            <extensions>true</extensions>
            <configuration>
                <instructions>
                    <Import-Package>*</Import-Package>
                    <Export-Package>org.opennaas.extensions.idb.*;version="${project.version}"</Export-Package>
                    <Meta-Persistence>META-INF/persistence.xml</Meta-Persistence>
                </instructions>
            </configuration>
        </plugin> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T11:14:10.147

这个问题实际上是一个编码问题。可能与persistence.xml 文件有关。我重新保存了资源目录下的所有文本文件，它又开始工作了

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T08:23:32.903

遇到同样的错误，我想分享我的发现，这在诊断信息得到改进之前可能会有所帮助。

添加时出现错误

```
<resources>
  <resource>
    <directory>src/main/resources</directory>
    <filtering>true</filtering>
  </resource>
</resources> 
```

到我的包 pom.xml。我的资源目录中的一个文件存在编码问题，并且通过使用

```
<includes> 
```

一个又一个文件的指令我能够弄清楚它是哪一个。

# perl - 使用单元测试和静态分析构建 Perl

> ID：10736458
> 
> 赞同：1
> 
> 时间：2012-05-24T11:19:10.297
> 
> 标签：perl, build

我对 Perl Build 概念完全陌生。我正在努力在 Windows 7 上创建 Perl BUILD，并且我成功地运行了单个模块的构建。我遵循以下步骤：

1.  我使用 module-starter 来创建新模块。它在 t 目录中有 lib/newmodule.pm 和少量测试 .t 脚本。
2.  然后我跑了`perl Build.pl`，，然后。因此，我最终得到一个存档文件作为输出。我使用了 Module::Build in 。`perl Build``perl Build test``perl Build dist``Build.pl`
3.  这里的模块启动器为您提供了`t`目录中包含 test::more 模块的示例代码。

所以这个过程我已经理解了，但是我对构建的概念不是很清楚。我有几个疑问：

我的开发环境是这样的：

*   `C:\perl`---Activestate perl 5.14.2
*   `C:\development` --- perl 代码的主文件夹
*   `C:\development\project_name\bin\*.pl` ---PL 文件（单个 PL 或 PL 从`lib`下面提到的目录中的 PM 文件中调用函数）
*   `C:\development\project_name\lib\*.pm` ---PM 文件（自定义 PM 具有被上述`bin`目录中的 PL 文件调用的功能）

我的问题：

1.  这个目录结构好吗？
2.  我应该在哪里将构建脚本保留在上述结构中（如果上述结构很好）？
3.  是否会有一个完整的开发文件夹的构建脚本，或者每个 PL/PM 文件应该有多个构建脚本？
4.  Module::Build 是否足以为包括 PL 和 PM 文件在内的整个结构创建构建？
5.  构建代码的结构应该是什么？Module-starter 给你的应该是一样的吗？如果是，那么目录的结构应该是`t`什么？请明确指导我应该如何构建目录以及应该存在哪些文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:41:05.857

我没有时间回答所有这些问题，但我建议你花一点时间简单地看一下其他模块的目录结构。[https://metacpan.org/](https://metacpan.org/)有一个非常好的“浏览”功能（当您查看特定模块时），它可以让您调查分发的结构。

我将直接回答的一个问题是：您可能不必编写任何`TAP::Harness`代码，`Test::More`应该就足够了。

最后一件事让你的问题难以理解，也许你不知道，它`PL`和`pl`文件之间存在差异，所以只有当你的意思时才将它们大写；`Build.PL`可能是您需要的唯一大写字母。

# ffmpeg - ffmpeg + libavfilter 的 drawtext 不打印重音字符

> ID：10736459
> 
> 赞同：2
> 
> 时间：2012-05-24T11:19:12.310
> 
> 标签：ffmpeg, diacritics, drawtext

FFMpeg 的 libavfilter drawtext 过滤器似乎不想打印像 é 这样的重音字符，而只是在它们应该存在的地方留下一个空间。从文件加载文本和从命令行指定文本时都会发生这种情况：

```
ffmpeg -i test.mpg -vf drawtext=text:"Café doesn\\\\\'t print the é" ...
ffmpeg -i test.mpg -vf drawtext=textfile:file_with_accents_inside.txt ... 
```

有什么方法可以让 ffmpeg 正确绘制重音字符？我尝试了几种不同的字体，以确保它们不是罪魁祸首。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:56:19.387

使用为 Windows 编译的 03-25-12 的 ffmpeg 构建，我能够让 drawtext 过滤器使用 Arial 字体打印 é。虽然要这样做，但我不得不使用 Windows CL，而不是 MinGW。MinGW 甚至不会在命令行中打印 é。我现在无法测试 Linux 命令行，但这可能是您的问题。您使用的是什么命令行/ffmpeg 版本？

# javascript - 是否有针对需要条件表达式的作业的在线 javascript 测试？

> ID：10736460
> 
> 赞同：1
> 
> 时间：2012-05-24T11:19:27.863
> 
> 标签：javascript, testing, syntax

我看过 JSLint，但它在 2% 后停止，并带有一堆无害的消息，即使在要求它容忍一切之后也是如此。

目前，我只对在 '==' 或 '===' 应该在哪里找到 '=' 感兴趣，我可以稍后继续。

如果没有这样的测试，有人可以为我提供以下实例的正则表达式：

```
(foo = bar) ? option1 : option2 
```

和

```
if (foo = bar) ... 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:20:54.617

有[JSHint](http://www.jshint.com/)，这是一个更“仁慈”的 JSLint 版本（Crockford 太严格了）

此外，JSLint 对格式错误太过分了。您可能想尝试[JSBeautifier](http://jsbeautifier.org/)以 JSLint 认为合适的方式格式化代码。

# ios - 将 sampleBuffer 保存到 CFArray

> ID：10736462
> 
> 赞同：1
> 
> 时间：2012-05-24T11:19:33.627
> 
> 标签：ios, arrays, avcapturesession

我一直在尝试从来自 AVCaptureOutput 的 60 帧视频中创建一个循环缓冲区，然后我需要在事件发生后将帧写入 AVAssetWriter 。我认为它必须以类似于此应用程序[http://itunes.apple.com/us/app/precorder-video-camera-for/id412558814?mt=8](http://itunes.apple.com/us/app/precorder-video-camera-for/id412558814?mt=8) 在记录按钮之前记录设定数量的方式工作被按下。

我用于循环缓冲区的先前方法是将输出中的 sampleBuffer 添加到 NSArray 中，方法是将其转换为 UIImage。这工作得很好，除了据我所见，阵列过快地填充了未压缩的视频帧（给我内存警告然后崩溃），而且如果视频质量设置高，帧速率太慢，由于到 UIImage 对象的转换。因此，现在我一直在尝试将 sampleBuffer 添加到 CFMutableArray 中——因为这意味着我不必将其转换为 UIImage，从而有望提高帧速率。但是，很少有人这样做的例子。我阅读[了 Save sampleBuffer in array (AVFoundation)](https://stackoverflow.com/questions/7674892/save-samplebuffer-in-array-avfoundation)并了解执行以下操作：

初始化：

```
CFMutableArrayRef arrayOne = CFArrayCreateMutable( NULL, 0, &kCFTypeArrayCallBacks ); 
```

插入：

```
CFArrayInsertValueAtIndex(arrayOne, index, sampleBuffer); 
```

转换回 sampleBuffer：

```
CMSampleBufferRef newSampleBuffer = (CMSampleBufferRef)CFArrayGetValueAtIndex(arrayOne, cfarrIndex); 
```

但是，当我使用“newSampleBuffer”时，它不允许我使用它，通常会停止代码或给出错误的访问错误。

所以我想我的问题是，有谁知道我想做的事情是否可行？或者如果有其他方法可以做到这一点？

提前致谢！

# jquery - 如何使用 jQuery 替换 Div 中的内容

> ID：10736463
> 
> 赞同：1
> 
> 时间：2012-05-24T11:19:36.973
> 
> 标签：jquery, html, css

我正在尝试使用 jQuery 手动更改 div 的内容，具体取决于我单击的图像。每张图片都有它自己的描述，所以当我点击它时，我想做的是像这样改变一个 div 的内容：

```
var url_image = $(this).find('img').attr('src');
$(document).find('#descripcion').append($(this).find('img').attr('alt'));
$(document).find('#containerImage')
    .css('background-image', 'url(' + url_image + ')') 
```

因此，使用此代码，我更改了 div 的背景图像，以及 div`#containerImage`上显示的描述`#descripcion`。问题很明显：当我使用*append(bla bla)*时，每次单击每个图像时，我都会附加它的描述，依此类推，不会删除以前的图像。

我想应该有一种方法，而不是附加，而不是前置，它会删除内容并替换它，但是已经花了几个小时搜索它，但我找不到方法。

所以拜托，如果你能帮我解决这个...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:21:15.263

只需使用[`html`](http://api.jquery.com/html/)or[`text`](http://api.jquery.com/text/)方法：

```
$("#descripcion").html($(this).find('img').attr('alt')); 
```

它将更改`#descripcion`块内的文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T11:23:13.687

只用`.html()`，不要做`$(document).find()`

```
var $img = $(this).find('img');
$('#descripcion').html($img.attr('alt'));
$('#containerImage').css('background-image', 'url(' + $img.attr('src') + ')'); 
```

# web-services - 任何 twitter 引导托管选项

> ID：10736473
> 
> 赞同：1
> 
> 时间：2012-05-24T11:20:06.027
> 
> 标签：web-services, twitter-bootstrap, web-hosting

我想使用 twitter bootstrap framework fort 网站。据我了解，我需要在我的主机上安装节点 js。尽管大多数托管服务不允许您在系统上安装软件。

是否有任何托管服务可以帮助我使用 twitter 引导框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:49:19.703

在服务器上运行 node.js 没有特殊要求。任何普通的共享主机都将支持这个 .js 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-18T11:17:54.880

这是专门用于托管静态 Bootstrap 网站的主机 - [http://www.bootstrap.hosting/](http://www.bootstrap.hosting/)

# spring-webflow - spring webflow 变量未随页面刷新而更新

> ID：10736475
> 
> 赞同：2
> 
> 时间：2012-05-24T11:20:09.140
> 
> 标签：spring-webflow

我在webflow中有一个情况。之后我导航到流程的第一页，然后我使用 Ajax 调用加载所有流程页面，这意味着每次加载新页面但浏览器地址栏中的 URL 保持不变。因此，当用户点击刷新时，用户会返回到 webflow 的第一页。

“/Sample/dcTesting.page？**执行=e1s1** #DcHash1”

现在我想要实现的是，当用户单击刷新时，我将使用表达式检查流程中的一些值，而不是打开到其他信息页面的第一页路由。

这个怎么做？请指导

谢谢，

# php - 如何使用 iframe 在模态窗口中显示内容？

> ID：10736476
> 
> 赞同：0
> 
> 时间：2012-05-24T11:20:12.730
> 
> 标签：php, javascript, jquery, html, iframe

我在[这里](http://helios.hud.ac.uk/u0867587/Mobile_app/QandATable2.php)有一个简单的应用程序（QandATable2.php），当用户单击加号按钮时，它将打开一个模式窗口并显示存储在另一个页面（previousquestions.php）中的详细信息。

现在我遇到的问题是，如果您在文本框为空白时立即单击“搜索”按钮，您将看到它在自己的页面上加载页面，并在该页面上显示详细信息。这是不正确的。

我想要它做的是，如果用户单击了搜索按钮，那么我希望将详细信息存储在模式窗口中，而不是存储在它自己的整个页面上。我听说最好的解决方案是使用 iframe。那么有谁知道如何使用 iframe 来实现这一点？

我使用的模态窗口被称为 SimpleModal，它的网站在[这里](http://www.ericmmartin.com/projects/simplemodal-demos/)

下面是 QandATable2.php 代码，它显示加号按钮并打开模式窗口，将模式窗口的内容链接到 previousquestions.php 页面：

```
<script type="text/javascript">          
    function plusbutton() { 
        // Display an external page using an iframe 
        var src = "previousquestions.php"; 
        $.modal('<iframe src="' + src + '" height="100%" width="100%" style="border:0">');
        return false;
    }   
    function closewindow() {     
        $.modal.close(); 
        return false;
    }         
</script>

<h1>CREATING QUESTIONS AND ANSWERS</h1>
<table id="plus" align="center">
    <tr>
        <th>
            <a onclick="return plusbutton();">
                <img src="Images/plussign.jpg" width="30" height="30" alt="Look Up Previous Question" class="plusimage"/>
            </a>
            <span id="plussignmsg">(Click Plus Sign to look <br/> up Previous Questions)</span>
        </th>
    </tr>
</table> 
```

下面是 previousquestions.php 代码，它在模式窗口中显示详细信息以及存储搜索功能的位置：

```
<?php
    foreach (array('questioncontent') as $varname) {
        $questioncontent = (isset($_POST[$varname])) ? $_POST[$varname] : '';
    }
?>

<div id="previouslink">
    <button type="button" id="close" onclick="return closewindow();">Close</button>
    <h1>PREVIOUS QUESTIONS</h1>

    <p>Search for a previous question by entering in a phrase in the search box below and submitting the phrase</p>

    <form action="previousquestions.php" method="post">
          <p>Search: <input type="text" name="questioncontent" value="<?php echo $questioncontent; ?>" /></p>
          <p><input id="searchquestion" name="searchQuestion" type="submit" value="Search" /></p>
    </form>
</div>

<?php 
    //...connected to DB
    if (isset($_POST['searchQuestion'])) {
        $questionquery = "SELECT QuestionContent FROM Question
              WHERE(QuestionContent = '".mysql_real_escape_string($questioncontent)."')";
        if (empty($questioncontent)){
            echo "Please enter in a phrase in the text box in able to search for a question";
        }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T12:13:00.327

取自[示例](http://www.ericmmartin.com/projects/simplemodal/#examples)：

```
// Display an external page using an iframe
var src = "http://365.ericmmartin.com/";
$.modal('<iframe src="' + src + '" height="450" width="830" style="border:0">', {
    closeHTML:"",
    containerCss:{
        backgroundColor:"#fff",
        borderColor:"#fff",
        height:450,
        padding:0,
        width:830
    },
    overlayClose:true
}); 
```

为了满足您的需求：

```
function plusbutton() {
    // Display an external page using an iframe
    var src = "previousquestions.php";
    $.modal('<iframe src="' + src + '" height="450" width="830" style="border:0">', {
        closeHTML:"",
        containerCss:{
            backgroundColor:"#fff",
            borderColor:"#fff",
            height:450,
            padding:0,
            width:830
        },
        overlayClose:true
    });
} 
```

让表单像往常一样完成它的工作（这里没有事件处理程序），或者如果这不起作用，请尝试添加`target="_self"`表单的属性，这样可以确保页面在 iframe 内打开。

否则，我建议不要使用 iframe，而是使用 ajax 并将它们加载到普通的 div 中，但这取决于你。

**更新**：要在评论中回答您的问题：

> 问题 1：模态框设置为 100% 高度和 50% 宽度，所以我将 iframe 设置为相同，现在宽度是完美的，但 iframe 的高度没有下降到 100%。

尝试`style="width:100%;height:100%;"`代替`width="100%" height="100%"`（我认为将百分比值放入这些属性中是行不通的）

**更新 2**：似乎问题不在这里，但对于`.simplemodel-data`包含 iframe 的类，“hacky”解决方案是添加到您的 css: `.somplemodel-data {height: 100%;}`。检查文档以查看是否有关于此的“官方”内容。

> 问题2：我有一个关闭按钮，如果用户单击“关闭”按钮，它会关闭模态窗口，但现在它不会关闭模态窗口，它一直说它是未定义的。

关闭按钮将不起作用，因为该`closewindow`函数是在您从 iframe 内部调用它时在父窗口中定义的。要克服这个问题，您有 2 个解决方案： 1\. 要么将关闭按钮放在 iframe 之外，其余部分保持原样 2\. 要么调用父窗口的`closewindow`函数。

对于 1：`$.modal('<button type="button" id="close" onclick="return closewindow();">Close</button><iframe src="' + src + '" style="border:0;width:100%;height:100%;">');`在“QandATable.php”中

对于 2：`<button type="button" id="close" onclick="return parent.closewindow();">Close</button>`在“previousquestions.php”中（或者可能替换`parent`为`top`，我认为是一样的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:35:34.523

添加一个`iframe`带有 id ('iframe')`previousquestions.php`的文件并创建一个名为 eg 的新文件`search.php`，该文件接受一个 url 参数作为搜索字符串，并将您的 PHP 搜索代码放在那里。然后在您的表单上设置一个 javascript 事件处理程序

```
<form action="" onsubmit="javascript:document.getElementById('iframe').src =
  'search.php?q='+encodeURI(document.forms[0].questioncontent.value); return false;"> 
```

# ios5 - CSS 动画可见性：可见；适用于 Chrome 和 Safari，但不适用于 iOS

> ID：10736478
> 
> 赞同：3
> 
> 时间：2012-05-24T11:20:22.050
> 
> 标签：ios5, css, mobile-safari, mobile-webkit, css-animations

在 Chrome（WinXP 上为 19.0.1084.46 m）和 Safari（OS X 10.7.4 上为 5.1.7）中，这个小提琴[http://jsfiddle.net/Vkpwm/](http://jsfiddle.net/Vkpwm/)有效；单击谷歌图像显示/隐藏绿色 div，但是在我的 iPhone 和 xCode 中的 iPhone 模拟器上加载它时（通过使用直接页面[http://jsfiddle.net/Vkpwm/show/），div](http://jsfiddle.net/Vkpwm/show/)永远不会再次显示。

删除行“-webkit-transition：0.5s;” 从 css 使它工作，但显然会破坏动画。删除行“可见性：隐藏；” 也使它工作，但意味着 div 仍然存在并且事件被触发（例如，即使 div 完全不透明也会触发警报）。

这是一个iOS错误，还是我做错了桌面浏览器能够解决的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T12:44:59.623

[在 SO: iOS CSS opacity + visibility transition](https://stackoverflow.com/questions/7548833/ios-css-opacity-visibility-transition)上找到这个问题后，我终于找到了解决方案。

我必须仅在设置可见性时将过渡应用于不透明度：可见，但将其应用于可见性：隐藏以使不透明度在隐藏之前具有动画效果。

我更新和工作的小提琴是[http://jsfiddle.net/Vkpwm/3/](http://jsfiddle.net/Vkpwm/3/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T23:17:11.317

只有过渡的不透明度很糟糕。

因为在 iPhone 上，您需要点击才能聚焦元素，这就是我解决问题的方法：

```
.mydiv {
        visibility:hidden;
        opacity: 0;
        transition: all 1s ease-out; 
        -webkit-transition: all 1s ease-out;
        -moz-transition: all 1s ease-out;
        -o-transition: all 1s ease-out;
}
.mydiv:hover {
            visibility:visible;
            opacity: 1;
}
.mydiv:active {
            -webkit-transition: opacity 1s ease-out;
} 
```

我已将不透明度过渡添加到：active。

通过这种方式，它适用于 Chrome、Firefox 和 iPhone（点击）上的所有过渡动画（考虑您想要将动画应用于高度或其他东西）。

感谢 Grezzo 和 Michael Martin-Smucker 发现了不透明度过渡。

# mysql - Wamp 服务器图标为红色

> ID：10736487
> 
> 赞同：3
> 
> 时间：2012-05-24T11:21:03.657
> 
> 标签：mysql, wampserver

我最近在我的系统中安装了 wamp server 2.2。但是由于某种奇怪的原因，该图标是红色的。我可以看到 phpmyadmin 但是当我打开 MySQL(http://localhost/phpmyadmin) 时它说

MySQL 说：

> #2002 - 服务器没有响应（或者本地 MySQL 服务器的套接字配置不正确）

我检查了任务管理器，我只能看到 wampmanager.exe 正在运行。我测试了80端口，它说

> 您的端口 80 实际使用的是：服务器：Apache/2.2.17(Wind32) PHP/5.3.5

同样在 Apache>Service 启动/恢复服务，停止服务，重新启动服务被禁用。

请告诉我是什么问题。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-03T19:45:06.757

单击 WampServer 图标。

*   Apache > 服务 > 安装服务
*   Apache > 服务 > 启动/恢复服务
*   MySQL > 服务 > 安装服务
*   MySQL > 服务 > 启动/恢复服务

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-11-14T13:17:02.360

**对我有用的解决方案：**

1.  访问 services.msc（控制面板 -> 管理工具 -> 服务）；
2.  找到所有以 . 开头的服务`"wamp"`。就我而言：`wampapache64`和`wampmysqld64`;
3.  双击它们中的每一个并将启动类型设置为`"automatic"`：
4.  通过单击其托盘图标并选择选项来重新启动 wamp 的所有服务`"Restart All Services"`。

我不知道为什么，但不知何故，服务启动类型标记为`"Disabled"`. 也许其他一些软件未经我的同意就制作了它。因此，**Wamp**带有一个**红色图标**，但是当将鼠标悬停在它上面时会显示**在线。**

[![wamp 红色图标，但在线原因](../Images/eb5271c4c1b124a525a5b33c76b195cd.png)](https://i.stack.imgur.com/knIfi.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-31T08:11:36.703

好吧，我尝试了所有方法，但效果不佳。经过几次试验后，以下对我有用。

启动任务管理器打开**“服务”**选项卡，然后单击底部的“**服务.. ”。**将显示一个服务窗口。

现在搜索**wampmysqld**并双击它。只需将启动类型设置为自动并通过单击下面的服务状态部分的开始来启动服务。你可以看到你的 wamp 图标黄色。

返回服务窗口并对**wampapache**执行相同的操作。双击它。只需将启动类型设置为自动并通过单击下面的服务状态部分的开始来启动服务。Wamp 图标变为绿色，现在可以使用 localhost。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-24T11:23:27.707

其他一些程序和wampserver有冲突，我也不是很熟，但是我知道skype在运行的时候wampserver不能上线。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-25T18:27:54.607

尝试安装 WAMP 2.1 我也尝试了所有方法，但安装 WAMP 2.1，避免使用 2.2，

[http://sourceforge.net/projects/wampserver/files/WampServer%202/WampServer%202.1/](http://sourceforge.net/projects/wampserver/files/WampServer%202/WampServer%202.1/)

我阅读的一些帖子还建议安装 WAMP 2.1！

有一个 gr8 时间！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-27T14:19:33.453

[![在此处输入图像描述](../Images/e1f01746ac2b3ec6feb23aef8c8d073b.png)](https://i.stack.imgur.com/jM7yA.jpg)

您必须自动为所有三个服务加注星标，然后您会看到 wamp 服务器符号的绿色，这意味着这三个服务都已成功运行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-03T20:01:54.927

你也安装`windows IIS`了吗？如果是，请从添加/删除 Windows 组件中删除它。

如果不试试这个[链接](http://zourbuth.com/2002-the-server-is-not-responding-or-the-local-mysql-servers-socket-is-not-correctly-configured/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-11T23:27:44.210

检查 MySQL 日志文件 单击 wamp 图标>MySQL MySQL 日志。检查文件的最后几行。如果你看到：

> [错误] 无法启动服务器：在 TCP/IP 端口上绑定：没有这样的文件或目录
> [错误] 你是否已经在端口：3306 上运行了另一个 mysqld 服务器？
> [错误] 中止

打开windows的管理工具去服务搜索并停止MySQL服务。然后重启wamp的所有服务。

还有很多应用程序（更常见的 Skype）使用 80 端口进行通信。因此，您可能必须更改本地主机的端口。

哦，别忘了清除浏览器缓存。这也可能有帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-03-05T01:16:35.823

问题可能是因为 SQL Server 进程正在后台运行。转到控制面板并单击管理工具，然后转到服务。禁用所有以 SQL Server 启动的服务。重新启动服务器，它现在应该变成橙色。检查 Apache->Service 中的 Start/Resume Service 是否为绿色。如果不是绿色，则表示 Apache 服务器运行正常。所以现在问题出在MYSQL上。再次转到控制面板->管理工具->服务，禁用 MYSQL 56 进程。重新启动服务器。它现在应该变成绿色了。

我写了一篇博客，进一步解释了这个问题，可能会帮助你解决它。[解决 WAMP 问题](https://rajiv2309.wordpress.com/2016/03/05/fixing-the-wamp-issue-when-the-tray-icon-is-red/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-28T14:01:04.003

如果这对某人有帮助：手动从“服务”wampapache64 和 wampmysql64 运行。然后运行 ​​wamp。

也许您从 msconfig 中的自动加载中删除了此服务。

这对我行得通。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-12-19T12:07:19.343

如果您在端口 80 上侦听 pid 4 的东西，那么这可能会导致 wamp 托盘图标保持红色，并且可能是此服务导致它。

这个服务，如果你让它运行将是罪魁祸首，（我猜它是 ms sql 而不是 mysql，所以不会是 wamp 安装遗留下来的东西，但可能是 ms sql 和 mysql 之间的某种端口冲突）。

打开 Services.msc 并停止此服务“Sql server 报告服务（MSSQLSERVER）”

[![在此处输入图像描述](../Images/bfd998b9139c0cd39b09eeb07658a736.png)](https://i.stack.imgur.com/kLb1c.png)

您可以尝试的其他事情是结束使用端口 80 的 skype 'cos 任务 ..（尽管可以使用另一个端口），可以尝试结束称为 web 部署的服务..可以尝试转到“程序和功能”..打开和关闭 Windows 功能..并取消选中“互联网信息服务”（IIS）。有些人建议尝试 net stop http（尽管有些人提到这可能会比你想要的更多）。不过，这些都不是为我解决的问题。

为我解决的问题是该服务正在运行，因此我不得不停止该服务。一定是 wamp 卸载使该服务运行。我可以看到（从`netstat -aon | find ":80"`）在端口 80 上监听的东西，它刚刚出现了系统进程 pid 4。

因此，在卸载 WAMP 并看到在端口 80 上侦听的内容后，并且无法安装它，因为每次我尝试都得到红色图标。所以我再次卸载了 WAMP，但这次我停止了该服务。然后我能够重新安装 WAMP，它工作了，绿色图标。

# oracle - SELECT 查询引发超时

> ID：10736492
> 
> 赞同：0
> 
> 时间：2012-05-24T11:21:28.677
> 
> 标签：oracle, sql-server-2008, select, timeout

执行`SELECT`查询时遇到一些超时问题。

它是链接到 Oracle 服务器（数据库 AAAA，表 K 和 P）的 SQL Server 2008。我们使用的提供程序是 Microsoft OLE DB Provider for Oracle (MSDAORA)。

```
SELECT     
    I.DOF AS Id, I.DokumentDatumDokumenta, I.DokumentaDatumPrejetja, 
    I.PartnerID, I.PartnerNaziv, I.PartnerNaslov, I.PartnerIdentifikacijskaStevilka, 
    I.PartnerPostnaStevilka, I.PartnerKraj, I.PartnerDrzava,   
    I.PrejemnikInternoPodjetjeId, I.PrejemnikInternoPodjetje,   
    I.PrejemnikOrganizacijskaSkupinaId, 
    I.PrejemnikOrganizacijskaSkupina, I.PrejemnikZaposleni, I.DokumentEksternaOznaka, 
    I.DokumentVrstaDokumenta, I.DokumentZadeva, 
    I.ProcesOpravilo, I.PrejemnikVSkupiniId, I.PrejemnikVSkupiniNaziv, 
    I.PrejmnikVSkupiniWorkflowId, D.Path AS EDokumentPath, I.SkeniranjeUporabnik, 
    I.SkeniranjeTime, I.ReleaseTime, I.WorkflowName, I.NadzornikRacunaId, 
    I.NadzornikRacunaNaziv, I.NadzornikRacunaWorkflowId, I.Znesek, 
    K.SIF_VAL AS Valuta, D.ZagnanProcesTime, I.DatumValute, I.StevilkaNarocila, 
    I.DUR, D.DocId, P.ZNESEK AS ZnesekVeur
FROM         
    dbo.tblAscentIndex AS I 
INNER JOIN
    dbo.tblAscentDoc AS D ON D.DocId = I.DocId 
INNER JOIN
    dbo.AAAA_tblPosiljke AS K ON I.DOF = K.DOF 
INNER JOIN
    OPENQUERY(AAAA, 'SELECT DOF,ZNESEK FROM KDF_INPUT_POD') AS P ON P.DOF = I.DOF 
```

如果有人对此查询有任何优化建议，我将不胜感激。

问题在于它同时从本地 SQL Server 和链接的 Oracle 获取数据，但也许一些查询优化可能会解决问题。

问候。

更新：

索引设置正常，表中的数据量小于 100k。我已将问题追溯到 dbo.AAAA_tblPosiljke，它是 MSSQL 服务器上的一个视图，它从 Oracle 上的表中获取数据。这是查询：

```
SELECT     ID_KIP AS ID_CDS, STATUS, DOF, ST_DOK AS ST_DOKUMENTA, SIF_OE, SIF_PP, IDENTIF_ST_OE, IDENTIF_ST_PP, DAT_DOSPETJA, DAT_DUR, 
                      SIF_VAL, ZNESEK_VAL, OPIS, VR_PREDMETA, PODPISNIK AS SIF_PODPISNIKA, REFERENT AS SIF_REFERENTA, DAT_FAKTURE, ST_NAROCILA, 
                      DAT_ZAPADLOSTI, APLIKACIJA, DAT_OBDOBJA, DAT_ECL, ST_ECL, CAR_POSTOPEK, MODEL, SKLIC, VRSTA_TRR, VEZA_URL, 
                      KPA_STATUS_PRENOSA, KPA_NAPAKA, UPORABNIK, ID_ARH, VK_PGD, ID_PGD, PROJEKT
FROM         OPENQUERY(AAAA, 'SELECT * FROM KDF_INPUT_POD WHERE STATUS NOT IN (9)') AS derivedtbl_1
WHERE     (DAT_DOSPETJA > CONVERT(DATETIME, '2012-03-01 00:00:00', 102)) 
```

此查询的部分执行时间超过 2 分钟，而在 Oracle 上执行相同的查询不到一秒钟。看起来像获取数据的问题。知道如何进行优化吗？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:20:42.620

我通过在本地创建有问题的表解决了这个问题。我定期同步表，并在 sql 服务器端而不是在 oracle 端执行它们。

# php - osCommerce url 重写

> ID：10736493
> 
> 赞同：0
> 
> 时间：2012-05-24T11:21:29.343
> 
> 标签：php, oscommerce

我的 osCommerce 安装正在形成这样的链接：

`http://localhost/payment.php/test/ot_coupon`

而不是这个： `http://localhost/payment.php?test=ot_coupon`

有什么选择吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:19:54.563

告诉 osCommerce 禁用漂亮的 url。连接到管理面板，然后单击“配置”菜单。

在那里，您有 2 个选项，具体取决于您的版本：

*   寻找名为 : 的选项`Use search-engine safe urls for all site links`。这是您必须禁用的。将其设置为`false`。

*   转到模块“SEO URL”并禁用整个模块。

现在 OsCommerce 应该使用经典的 url 模式。

希望这可以帮助！

# vba - 可以使用 VBA 在 MS PowerPoint 中切换幻灯片母版吗？

> ID：10736499
> 
> 赞同：0
> 
> 时间：2012-05-24T11:22:10.093
> 
> 标签：vba, powerpoint, office-2010

我的公司正在从 迁移`Office 2003`到`Office 2010`，同时更新他们的公司 PowerPoint 模板。我的任务是研究是否可以使用 PowerPoint 的现有对象模型编写脚本来处理以下场景：

**1)**在 Office 2010 中，用户打开基于 2003 模板的旧 PowerPoint 演示文稿

**2)**用户可以通过运行宏来更新此旧演示文稿，以去除旧幻灯片母版并用新模板 (2010) 中的幻灯片母版替换它们，然后保存文档 - 这意味着在一个动作中，他们选择的任何旧演示文稿无需从头开始即可更新工作。

如果有人知道这是否可能，或者有任何想法可以分享这个想法，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:44:41.470

此示例将“专业”设计模板应用于活动演示文稿。

应用程序的 Visual Basic

```
Application.ActivePresentation.ApplyTemplate _
    "c:\program files\microsoft office\templates" & _
    "\presentation designs\professional.pot" 
```

# google-maps - 没有无关的 A 标记，好吗？

> ID：10736500
> 
> 赞同：0
> 
> 时间：2012-05-24T11:22:16.113
> 
> 标签：google-maps

如何链接到特定位置而不在最近的已知地址获得 A 标记？
示例：[http](http://maps.google.com/?q=55.80707,12.428284&t=h&z=12)
://maps.google.com/?q=55.80707,12.428284&t=h&z= 12 我只想看到绿色箭头 - 而不是（不相关的）A 标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:36:21.333

谷歌地图不再允许这样做；这种行为只能以有限的方式控制，谷歌对他们的本地搜索感到非常自豪，包括照片和东西。您*可以*做的是强制 A 标记成为您的标记，并在侧边栏中给它一个标签。

将所需的标签括在圆括号中。用于`+`表示空间。

[http://maps.google.com/?q=55.80707,12.428284+(My+point)&t=h&z=12](http://maps.google.com/?q=55.80707,12.428284+(My+point)&t=h&z=12)

# linux - SVN 钩子 pre-revprop-change 不起作用

> ID：10736505
> 
> 赞同：13
> 
> 时间：2012-05-24T11:22:36.907
> 
> 标签：linux, svn, version-control, webdav, selinux

我知道这已经被问过很多次了，但我相信我的情况有所不同。

我正在尝试向我们的 SVN 存储库添加一个 pre-revprop-change 挂钩，以启用对日志消息的更改。

在我添加`pre-revprop-change`文件之前，我收到了这个错误：

```
$ svn propset -r 557 --revprop svn:log "New message!" https://myserver/repos/myrepo
svn: DAV request failed; it's possible that the repository's pre-revprop-change hook either failed or is non-existent
svn: At least one property change failed; repository is unchanged
svn: Error setting property 'log': 
Repository has not been enabled to accept revision propchanges;
ask the administrator to create a pre-revprop-change hook 
```

没问题，我想。我会添加它：

```
$ cd /var/www/svn/myrepo/hooks

$ # Create the simplest hook possible
$ echo '#!/bin/sh' > pre-revprop-change
$ echo 'exit 0' >> pre-revprop-change

$ # Check that it looks correct
$ cat pre-revprop-change
#!/bin/sh
exit 0

$ # Looks good, now make it executable
$ chmod a+x pre-revprop-change

$ # Check the permissions
$ ls -al pre-revprop-change
-rwxr-xr-x 1 apache apache 17 2012-05-24 12:05 pre-revprop-change

$ # Run it, to make sure it runs, and check the error code
$ ./pre-revprop-change 
$ echo $?
0 
```

因此，根据我在 SO 上阅读的所有其他内容，这应该是我让它工作所需的全部内容。但是，当我再次尝试编辑日志消息时，我仍然得到一个错误（这次不同）：

```
$ svn propset -r 557 --revprop svn:log "New message!" https://myserver/repos/myrepo
svn: DAV request failed; it's possible that the repository's pre-revprop-change hook either failed or is non-existent
svn: At least one property change failed; repository is unchanged
svn: Error setting property 'log': 
Revprop change blocked by pre-revprop-change hook (exit code 255) with no output. 
```

**有几点需要注意：**

1) 存储库托管在 SELinux 服务器（Fedora core 10）上。也许我需要对这些权限做些什么？以下是钩子的 SE 权限：

```
$ ls -alZ pre-revprop-change
-rwxr-xr-x  apache apache unconfined_u:object_r:httpd_sys_content_rw_t:s0 pre-revprop-change 
```

2) 正在通过 WebDAV 访问存储库（请注意`https://`存储库名称中的 ）。我需要在 WebDAV 端设置什么以允许 pre-revprop-change 更改吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T13:32:36.140

经过几个小时的尝试，我找到了答案。而且，由于它似乎在互联网上的其他任何地方都不存在，所以我会在这里发布......

这个问题是由 SELinux 引起的（这并不奇怪）。似乎 apache ( `/usr/sbin/httpd`) 没有必要的权限来运行具有上述 SE 权限的钩子脚本。要让它执行，需要更改 SELinux 权限

```
$ chcon -t httpd_exec_t pre-revprop-change 
```

（我首先尝试将其更改为`httpd_sys_script_exec_t`，但这还不足以让脚本执行。但使用它的`httpd_exec_t`类型。）

最后一个问题：这是一件安全的事情吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T14:24:53.907

在 CentOS 上有类似的事情。问题可能出在缓存中，因为当我编辑文件然后将其改回它开始工作时。

因此，如果有人遇到类似问题，只需尝试：

```
touch hooks/pre-revprop-change 
```

# mysql - 如何将 SELECT + WHERE 查询与 INSERT 查询结合使用？

> ID：10736506
> 
> 赞同：0
> 
> 时间：2012-05-24T11:22:41.893
> 
> 标签：mysql, select, insert, where

我想结合以下两个查询，谁能给我一个想法如何做到这一点？（仅当查询有结果`INSERT`时才应运行查询）`SELECT`

**查询 1**：

```
INSERT IGNORE INTO senders(
sender_id,
telephone,
)
VALUES ( 1, 0723355888) 
```

**查询 2**：

```
SELECT student_name
FROM students
WHERE student_id =1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:26:24.910

```
INSERT INTO senders (sender_id, telephone)
SELECT student_id, student_telephone FROM students
WHERE student_id = 1
LIMIT 1 
```

或者如果电话不是学生表的一部分，则对其进行硬编码：这是有效的，因为如果查询 0 行，则根本不执行任何插入。

```
INSERT INTO senders (sender_id, telephone)
SELECT 1, 0723355888 FROM students
WHERE student_id = 1
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:30:20.387

尝试使用此查询 -

```
INSERT IGNORE INTO senders (sender_id, telephone)  
SELECT student_id as sender_id, telephone
FROM students
WHERE student_id=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T11:30:25.623

尝试这个：

```
INSERT IGNORE INTO senders( sender_id, telephone) 
SELECT 1 as sender_id, 0723355888 as telephone 
FROM students WHERE student_id =1 
```

# payment-gateway - 禁用 Paypal Express Checkout 中的地址字段

> ID：10736509
> 
> 赞同：1
> 
> 时间：2012-05-24T11:23:01.653
> 
> 标签：payment-gateway, paypal, payment, express-checkout

我正在努力使 Paypal Express Checkout 体验对我的客户的干扰最小，所以理想情况下我希望他们只提供他们的支付卡信息。

默认情况下，Paypal 也会要求提供完整的客户地址 + 电话号码。

我确实读过这个问题：[Disable shipping address option in PayPal Express Checkout](https://stackoverflow.com/questions/4283251/disable-shipping-address-option-in-paypal-express-checkout)，但现在这个解决方案只是删除了第二页上的地址确认，而不是获取卡信息的页面上的地址字段。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:48:11.113

> 不是获取卡信息的页面上的地址字段。

这是正确的。如果有人使用访客帐户（未注册 PayPal 帐户），这些将用作帐单地址，因此是必需的。

# android - Android 设备与服务器的连接

> ID：10736513
> 
> 赞同：0
> 
> 时间：2012-05-24T11:23:18.797
> 
> 标签：android

我正在开发一个设备扫描二维码的应用程序。二维码包含 id 和一些文本信息。根据某些特定信息，某些按钮会突出显示。当用户单击该按钮时，qrcode id 将存储在 json 中，然后与服务器建立连接。服务器解码此信息，然后将一些信息放入 jason 并发送回设备……然后设备再次解码该信息。服务器应用程序将在 struts 2 中编写。现在我的问题是我应该如何编写设备和服务器之间的连接建立。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:34:29.867

您可以使用内置的 Apache HTTP 客户端。由于格式是 JSON 并且服务器将在 Struts 中，这将是一个简单的 HTTP POST 问题。请参阅此示例：[http ://www.androidsnippets.com/executing-a-http-post-request-with-httpclient](http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient)

# java - 在 TextureView 上播放视频

> ID：10736517
> 
> 赞同：57
> 
> 时间：2012-05-24T11:23:29.693
> 
> 标签：java, android, video, video-streaming

在 Android [TextureView](http://developer.android.com/reference/android/view/TextureView.html)的文档中，它说您可以使用 TextureView 播放视频：但我似乎找不到任何示例来说明如何做到这一点。有人知道吗？

我需要使用 a`textureView`因为我想为视频制作动画。我想播放 .3gp/.mp4 格式的视频，而不是来自相机的视频 :)

任何帮助，将不胜感激..

更新：

解决方案作为社区 wiki 答案发布

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2014-10-20T15:48:53.227

您可以这样做：（问题作者的解决方案，他在问题中作为更新发布）

```
Public class MediaPlayerDemo_Video extends Activity implements TextureView.SurfaceTextureListener {

 private MediaPlayer mMediaPlayer;

 private TextureView mPreview;

 @Override
 public void onCreate(Bundle icicle) {

      super.onCreate(icicle);

      mPreview = new TextureView(this);
      mPreview.setLayoutParams(new FrameLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT));
      mPreview.setSurfaceTextureListener(this);

      extras = getIntent().getExtras();

      setContentView(mPreview);
 }

 @Override
 public void onSurfaceTextureAvailable(SurfaceTexture surface, int width, int height) {
 Surface s = new Surface(surface);

 try {
       mMediaPlayer= new MediaPlayer();
       mMediaPlayer.setDataSource("http://daily3gp.com/vids/747.3gp");
       mMediaPlayer.setSurface(s);
       mMediaPlayer.prepare();
       mMediaPlayer.setOnBufferingUpdateListener(this);
       mMediaPlayer.setOnCompletionListener(this);
       mMediaPlayer.setOnPreparedListener(this);
       mMediaPlayer.setOnVideoSizeChangedListener(this);
       mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
       mMediaPlayer.start();
      } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SecurityException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }   
} 
```

并且动画效果非常好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-27T10:27:41.130

我有同样的问题，并用`TextureView`. 如果这对任何人有帮助，我发现`setScaleX`并且`setScaleY`非常有用。[http://developer.android.com/reference/android/view/View.html#setScaleX%28float%29](http://developer.android.com/reference/android/view/View.html#setScaleX%28float%29)

但是，如果您只针对 API 16+：

```
mediaPlayer.setVideoScalingMode(MediaPlayer.VIDEO_SCALING_MODE_SCALE_TO_FIT_WITH_CROPPING); 
```

应该这样做:)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-05-16T12:12:09.537

您 `setContentView(mPreview);`需要在

```
mPreview = (TextureView) findViewById(R.id.surface);
mPreview.setSurfaceTextureListener(this); 
```

# java - 在Java中计算点积距离

> ID：10736520
> 
> 赞同：0
> 
> 时间：2012-05-24T11:23:42.557
> 
> 标签：java, arraylist, hashmap, dot-product

我需要做的是，计算两个客户评分之间的点积距离。客户的评分记录在哈希图中。

```
private HashMap<String,int[]> ratingmap; 
```

哈希图中的键是客户名称，与之相关的是该客户的评分（他对书籍的评分）

我将如何做到这一点？

```
/**
 * calculate dot product distance between the ratings of two customers
 * @param name1 String name of customer 
 * @param name2 String name of customer 
 * @return int distance or ILLEGAL_INPUT if name1 or name2 are not customers
 */
public int distance(String name1, String name2) 
{
    return 0; //replace with code
} 
```

`RatingsAnalysis`这是课堂上给出的其他细节

```
//collection of rated book titles
private BookList books;
//collection of customers and their ratings
private RatingsMap ratings;
//use a list of customer names from the ratings map for looping through the map
private ArrayList<String> customernames; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:31:45.080

想必是成员字段

```
private RatingsMap ratings; 
```

in`RatingsAnalysis`是`Map`名称 => 评级。您在该`distance`方法中的任务是：

1.  查找评分`name1`并将`name2`它们存储在局部变量中（**提示**：使用接口`get`上定义的方法`Map`）
2.  对上面获得的这两个评级执行点积分析。您要么知道如何执行此操作，要么需要提供有关`Rating`此问题中 a 含义的更多信息。
3.  返回结果

附带说明一下，RatingsMap 可以而且应该是更强类型的：

```
private RatingsMap<String, Rating> ratings; 
```

编辑：添加请求的骨架代码...

```
public int distance(String name1, String name2) 
{
    Rating r1 = this.ratings.get(name1);
    Rating r2 = this.ratings.get(name2);

    if(r1 != null && r2 != null) { 
       return ....
    }
} 
```

# java - 来自 SIP 的多个呼叫

> ID：10736522
> 
> 赞同：0
> 
> 时间：2012-05-24T11:23:44.927
> 
> 标签：java, jain-sip

我想从我的 SIP 拨打多个电话。现在我的程序被编写为进行一次调用。我如何更改它以同时支持多个呼叫？我可以做更多的sipstacks吗？如果是的话会有什么IP地址？我将如何区分它们？或者我可以只在一个 sipstack 中创建多个监听点吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T04:32:45.537

为什么要同时从同一个 sip 电话拨打多个电话？

无论如何，IMO 因为 sip 默认使用端口 5060 进行侦听和发送，所以您不能再次在同一端口上侦听。因此，您可以做的是在另一个端口上侦听并联系另一台服务器。

只需将端口从 5060 更改为 5070，其余代码就可以正常工作，前提是您的 sip 服务器也在该端口上配置；5070在这里...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T12:05:28.510

在 SIP 电话上，同时拨打电话的唯一方法是使用 SkypeConnect 等 VOIP 服务。要进行同时通话，您需要在 SIP 上订阅多个频道。查看[http://www.voicent.com/sip-faq.php](http://www.voicent.com/sip-faq.php)了解更多详情。

# iphone - 如何折叠/折叠 UITableView 的部分？

> ID：10736524
> 
> 赞同：2
> 
> 时间：2012-05-24T11:23:54.737
> 
> 标签：iphone, ios, uitableview

当我点击红色按钮时，我希望折叠 tableview 单元格

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if([[appDelegate.gHomeHeaderArray_AppDelegate objectAtIndex:section] getIsFolded]==true)      
    {       
        return 0;           
    }
    else
    {
       return 1;      
    }
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if([[appDelegate.gHomeHeaderArray_AppDelegate objectAtIndex:section] getIsFolded ]==true)
    {   
       return 0;

    }
    else
    {
        return 1; 
    }
}

-(void)buttonTapped:(id)sender;
{
    if([[appDelegate.gHomeHeaderArray_AppDelegate objectAtIndex:v] getIsFolded])
    {
         [[appDelegate.gHomeHeaderArray_AppDelegate objectAtIndex:v] setIsFolded:false];
    }
    else
    {
        [[appDelegate.gHomeHeaderArray_AppDelegate objectAtIndex:v] setIsFolded:true];
    }
    [listview reloadData];
} 
```

当我录制一个按钮时，它会检查是否将 numberOfRowsInSection 设置为 0

它可以工作，但是 tableview 单元格移动到另一个标题视图下而不是隐藏。

欢迎任何评论

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-24T11:41:14.893

查看以下链接，它描述了 UITableview 的折叠功能

1.  [https://github.com/floriankrueger/iOS-Examples--UITableView-Combo-Box/zipball/master](https://github.com/floriankrueger/iOS-Examples--UITableView-Combo-Box/zipball/master)

2.  [http://www.codeproject.com/Articles/240435/Reusable-collapsable-table-view-for-iOS](http://www.codeproject.com/Articles/240435/Reusable-collapsable-table-view-for-iOS)

3.  [https://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html](https://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T12:55:20.117

这可能是您正在寻找的动画类型：

[http://www.cocoacontrols.com/platforms/ios/controls/mpfoldtransition](http://www.cocoacontrols.com/platforms/ios/controls/mpfoldtransition)

您可能需要稍微调整一下，但如果您喜欢它的外观，这是值得的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-24T12:01:32.913

我使用以下方法在 Swift 中实现了折叠列表。当一个部分被折叠时，我仍然显示单行（标题），因此对于部分行数总是返回至少 1。这意味着折叠时部分不会消失。当折叠状态发生变化时，我们使用 tableView.reloadSections 来更新表格的相关部分（带有动画）

对于此示例，我在下面的代码中使用以下变量：

sectionHeadings[] : 部分标题数组

sectionVisible[] : 指示该部分是否折叠的 Bool 标志数组

sectionSubheadings[][] ：对于每个部分，在展开部分时应该出现的副标题数组。

那么tableView的相关方法如下：

首先根据我们的节标题数组返回节数。

```
override func numberOfSectionsInTableView(tableView: UITableView) -> Int {
    // Return the number of sections.
    return sectionHeadings.count
} 
```

我们根据是否折叠来决定一个部分中有多少行。如果它被折叠，那么我们仍然显示一个单元格 - 这是部分标题，它始终可见：

```
override func tableView(tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
    // Return the number of rows in the section.
    if sectionVisible[section]{
        return sectionSubheadings[section].count + 1
    }else{
        return 1
    }
} 
```

然后，当我们选择一个单元格时，我们会检查当前状态并打开或关闭当前部分。同样的行为也可以附加到按钮上。

```
override func tableView(tableView: UITableView, didSelectRowAtIndexPath indexPath: NSIndexPath) {
    // if we are selecting a sub heading then this means we want to actually process the click
    // if we are selecting a section heading (index 0) then we want to open or close the section
    if indexPath.row == 0{

        // this is a section heading

        // if the section is already open then we don't want to reopen it
        let bOpening = !sectionVisible[indexPath.section]

        // bunch all our updates together
        tableView.beginUpdates()

        // need to close any existing open sections
        // NB this is optional behaviour and ensures there is only one section open at a time
        for (var i:Int = 0;i<sectionVisible.count;i++){
            if sectionVisible[i]{
                sectionVisible[i] = false
                tableView.reloadSections(NSIndexSet(index: i), withRowAnimation: UITableViewRowAnimation.Automatic)
            }
        }

        if bOpening{
            // open this chapter
            sectionVisible[indexPath.section] = true
            tableView.reloadSections(NSIndexSet(index:indexPath.section), withRowAnimation: UITableViewRowAnimation.Automatic)
        }

        tableView.endUpdates()

    }else{

        // we have clicked a visible sub heading so process this as required
    }
} 
```

在 tableView: cellForRowAtIndexPath 中提供单元格时，您可以根据索引值返回标题行或子标题行。Index=0 是标题，Index=n+1 是第 n 个子标题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-12T20:41:31.853

我使用第一个示例：[https](https://github.com/floriankrueger/iOS-Examples--UITableView-Combo-Box/zipball/master) ://github.com/floriankrueger/iOS-Examples--UITableView-Combo-Box/zipball/master 它很简单。这是一个总结

1.  在某处保存部分打开或关闭状态
2.  选择第0行时，使用动画添加或删除行

    ```
    NSMutableArray *indexPathArray = [[NSMutableArray alloc] init];
    for (int i = 1; i < 20; i++) {
        NSIndexPath *path0 = [NSIndexPath indexPathForRow:[indexPath row]+i inSection:[indexPath section]];
        [indexPathArray addObject:path0];
    }
    [self.tableView beginUpdates];
    [self.tableView insertRowsAtIndexPaths:indexPathArray withRowAnimation:UITableViewRowAnimationTop];
    //[self.tableView deleteRowsAtIndexPaths:indexPathArray withRowAnimation:UITableViewRowAnimationTop];
    [self.tableView endUpdates]; 
    ```

3.  获取选定的单元格并切换下拉箭头
4.  取消选择单元格

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T11:42:33.357

```
 //use this method to reload the table,
    - (void)reloadRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation
    //Pass list of indexpaths need to be reloaded, and pass UITableViewRowAnimationBottom this parameter 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-05T00:27:19.850

在 Swift 2 中执行此操作的非常简单的方法（尽管这不是 Swift 独有的；也可以在 Obj-C 中轻松完成）：

```
extension UITableView {
    public func indexPathsForRowsInSection(section: Int) -> [NSIndexPath]? {
        return (0..<self.numberOfRowsInSection(section)).map{NSIndexPath(forRow: $0, inSection: section)}
    }
} 
```

假设`sender`是 a `UISwitch`，但您可以使用任何 Bool 值执行此操作：

```
if let indexPaths = remindersTableView.indexPathsForRowsInSection(section) where !sender.on {
    tableView.deleteRowsAtIndexPaths(indexPaths, withRowAnimation: .Middle)
} else if let indexPaths: [NSIndexPath] = (0..<numberOfRowsYouWantToAdd).map({NSIndexPath(forRow: $0, inSection: section)}) where sender.on {
    tableView.insertRowsAtIndexPaths(indexPaths, withRowAnimation: .Middle)
} 
```

# javascript - 一个滚动条用于三个选项或选择区域

> ID：10736525
> 
> 赞同：0
> 
> 时间：2012-05-24T11:23:58.320
> 
> 标签：javascript, html, scroll

我想实现三个`<select>...</select>`区域或`<option>...</option>`区域，用一个滚动框控制，应该看起来像

```
|-------|  |-------|  |-------| /\ 
|  aas  |  |  aas2 |  |  sdj3 |  | 
|  asd  |  |  asd2 |  | werh3 |  |
|  qwd  |  |  qwd2 |  | qwe3  |  | 
|-------|  |-------|  |-------| \/ 
```

是否可以创建单独的滚动条，如何实现？

我应该使用 jquery 和 javascript 还是其他任何东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:38:22.223

是的，当然：
看看这个：http: [//jsfiddle.net/freealone/eEhky/3/](http://jsfiddle.net/freealone/eEhky/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:04:24.623

我找到了一种如何滚动表格的好方法，因为有必要将表格包含到包装器中，并且包装器应用以下样式：

```
.scroll_wrapper{
  float:left;
  overflow:auto;
  height:266px;    <-- some custom height
  width:100%;
} 
```

这适用于 IE 和 Mozilla 浏览器。

所以我只是创建带有 3 列的包装表，而不是使用 div 标签创建表....

但无论如何，建议确实有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T11:57:49.817

我认为你可以做到。有一个问题你要多选吗？我举个例子。是你想要的吗？当您选择项目时，它会变为红色并选中一个复选框。是纯js

[http://jsfiddle.net/boralp/qQD7U/7/](http://jsfiddle.net/boralp/qQD7U/7/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T11:27:42.227

你所需要的只是一点CSS。只需将三个元素放在一个带有类的 div 中，例如 .main 并添加这个 css：

```
.main {
 max-height: 100px; //or whatever you want
 overflow-y: scroll;
} 
```

看一下[css溢出](http://www.w3schools.com/cssref/pr_pos_overflow.asp)属性

我认为这是您需要的最简单的解决方案：http: [//jsfiddle.net/g3UWu/1/](http://jsfiddle.net/g3UWu/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T11:28:38.787

你不能只制作一个具有指定高度和 CSS 溢出的容器 div:scroll; 并将这三个区域（作为 div）放入容器中？

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-24T11:25:51.377

在这里尝试 15 个最好的 jquery 滚动条

[http://slodive.com/web-development/jquery-scroll/](http://slodive.com/web-development/jquery-scroll/)

# database - Java EE 应用程序中的嵌入式数据库

> ID：10736528
> 
> 赞同：1
> 
> 时间：2012-05-24T11:24:14.550
> 
> 标签：database, jakarta-ee

再会。我对将嵌入式数据库存储在 Java EE 应用程序中感到困惑。我刚刚解决了可以通过 getResource 方法访问的 .properties 文件的问题，但是我应该将我的数据库放在哪里以支持可移植性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:59:17.973

为了可移植性，适当的方法是将嵌入式数据库安装在项目目录中，然后指定相对路径。

通常，您必须提取内容并将相对于当前目录的路径指定为数据库 url。下面是一些例子。

*   **H2 数据库 -** `jdbc:h2:file:relative-database-path`
*   **Apache Derby -**通过在类路径中包含所需的 jar 并相应地配置环境变量。
*   **HSQLDB -** `jdbc:hsqldb:file:relative-database-path`

# internet-explorer - 为什么 kerberos 委派只在 Internet Explorer 中有效？

> ID：10736529
> 
> 赞同：2
> 
> 时间：2012-05-24T11:24:15.130
> 
> 标签：internet-explorer, firefox, google-chrome, kerberos, delegation

我目前在 IIS Web 服务器上设置了 kerberos 委派。

用户连接到 Web 服务器上的网站，并可以要求在 Web 应用程序中生成 SSRS 报告。Web 应用程序通过调用 SSRS Web 服务 ReportExecution2005.asmx 来生成报告，以生成报告并将报告作为 pdf 二进制数组返回，然后显示在屏幕上。

IIS 网站针对使用服务帐户的应用程序池运行。IIS 服务器和服务帐户都受委派信任。

当我在 IE 中查看该站点并请求报告时，一切正常。当我通过 Chrome 或 FireFox 发出相同的调用时，尽管成功发出了 kerberos 票证，但对 SSRS 服务器的调用失败并显示 401。

当我调用 SSRS 服务时，我尝试将调用设置为同时使用 System.Net.CredentialCaceh.DefaultCredentials 和 System.Net.CredentialCaceh.DefaultNetworkCredentials

谁能向我解释为什么当浏览器不是 IE 时 kerberos 委托会失败？

- 更新

我最初的说法是，在所有浏览器中访问该站点会导致发出 Kerberos 票证是错误的。只有当我使用 IE 访问该站点时，它才会生成一张票。Chrome / Firefox 仅解析为 NTLM。

-- 更新 2

我现在已经确定 Firefox 和 Chrome 默认不使用协商协议。为了允许对我的站点进行基于 kerberos 的身份验证，我必须使用 about:config 区域明确声明它是两个浏览器的受信任站点。

如果其他人有同样的问题，请参考[http://blog.webonweboff.com/2010/12/integrated-windows-authentication-and.html](http://blog.webonweboff.com/2010/12/integrated-windows-authentication-and.html)

# c# - 初始化大列表时出现 StackOverflowException

> ID：10736532
> 
> 赞同：8
> 
> 时间：2012-05-24T11:24:20.263
> 
> 标签：c#, .net

我正在执行以下操作：

```
public static class DataHelper
{
  public static List<Seller> Sellers = new List<Seller> {
    {new Seller {Name = "Foo", Location = new LatLng {Lat = 12, Lng = 2}, Address = new Address {Line1 = "blah", City = "cokesville"}, Country = "UK"},
    //plus 3500 more Sellers
  };
} 
```

当我从 MVC 网站内部访问 DataHelper.Sellers 时，我得到了 StackOverflowException。当我使用 Visual Studio 进行调试时，堆栈只有半打帧，并且没有通常明显的堆栈溢出迹象（即没有重复的方法调用）。

应用程序调用可以像这样简单地引发异常：

```
public ActionResult GetSellers()
{
  var sellers = DataHelper.Sellers;
  return Content("done");
} 
```

额外信息：

*   当我从单元测试中运行相同的代码时，它很好
*   如果我删除了一半的卖家（上半部分或下半部分），在网络应用程序中没问题，所以任何特定卖家都没有问题
*   我曾尝试在第一次通话时将卖家更改为属性并初始化列表 - 没有帮助
*   我还尝试将一半添加到一个列表，然后将一半添加到另一个列表并结合 2 - 再次没有帮助

我会对这个问题的正确答案印象深刻！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T11:52:23.507

这是因为实际上，您的内联列表初始化对于堆栈来说太大了 - 请参阅[msdn 论坛上的这个](http://social.msdn.microsoft.com/Forums/en/csharplanguage/thread/76683b44-87ac-4618-8bc4-6ff13256ec03)*非常* 相关的问题，其中场景几乎相同。

.Net 中的方法同时具有堆栈深度和大小。A`StackOverflowException`不仅是由堆栈上的调用次数引起的，而且是每个方法在堆栈中分配内存的总体大小。在这种情况下，您的方法太大了 - 这是由局部变量的数量引起的。

例如，考虑以下代码：

```
 public class Foo
    {
            public int Bar { get; set;}
    }
    public Foo[] GetInts()
    {
        return new Foo[] { new Foo() { Bar = 1 }, new Foo() { Bar = 2 }, 
          new Foo() { Bar = 3 }, new Foo() { Bar = 4 }, new Foo() { Bar = 5 } };
    } 
```

现在查看编译时该方法的引入 IL（这也是发布版本）：

```
.maxstack 4
.locals init (
    [0] class SomeExample/Foo '<>g__initLocal0',
    [1] class SomeExample/Foo '<>g__initLocal1',
    [2] class SomeExample/Foo '<>g__initLocal2',
    [3] class SomeExample/Foo '<>g__initLocal3',
    [4] class SomeExample/Foo '<>g__initLocal4',
    [5] class SomeExample/Foo[] CS$0$0000
) 
```

*注意 - 之前的实际位`/`，即`SomeExample`取决于定义方法和嵌套类的命名空间和类 - 我必须编辑几次才能从我正在编写的一些正在进行的代码中删除类型名工作！*

为什么都是当地人？由于执行内联初始化的方式。每个对象都是新的并存储在“隐藏”本地，这是必需的，以便可以在每个对象的内联初始化上执行属性分配`Foo`（需要对象实例来生成属性集`Bar`）。 *这也说明了内联初始化只是一些 C# 语法糖。*

在您的情况下，正是这些局部变量导致堆栈崩溃（其中至少有几千个仅用于顶级对象 - 但您也有嵌套的初始化程序）。

C# 编译器*也可以*将每个所需的引用数量预加载到堆栈中（为每个属性分配弹出每个引用），但这会滥用堆栈，使用局部变量会执行得更好。

***它也可以使用单个 local***，因为每个都只是写入，然后通过数组索引存储在列表中，不再需要 local 。这可能是 C# 团队需要考虑的一个问题 - 如果 Eric Lippert 偶然发现这个线程，他可能对此有一些想法。

现在，这项检查还为我们提供了一条围绕这种使用本地人的潜在途径来实现***非常庞大的方法***：使用迭代器：

```
public Foo[] GetInts()
{
    return GetIntsHelper().ToArray();
}

private IEnumerable<Foo> GetIntsHelper()
{
    yield return new Foo() { Bar = 1 };
    yield return new Foo() { Bar = 2 };
    yield return new Foo() { Bar = 3 };
    yield return new Foo() { Bar = 4 };
    yield return new Foo() { Bar = 5 };
} 
```

现在，IL`GetInts()`现在只是`.maxstack 8`处于领先地位，没有本地人。查看`GetIntsHelper()`我们拥有的迭代器函数：

```
.maxstack 2
.locals init (
    [0] class SomeExample/'<GetIntsHelper>d__5'
) 
```

所以现在我们已经停止在这些方法中使用所有那些本地人......

**但是**...

查看`SomeExample/'<GetIntsHelper>d__5'`编译器自动生成的 class ——我们看到 locals 仍然存在——它们刚刚被提升为该类的字段：

```
.field public class SomeExample/Foo '<>g__initLocal0'
.field public class SomeExample/Foo '<>g__initLocal1'
.field public class SomeExample/Foo '<>g__initLocal2'
.field public class SomeExample/Foo '<>g__initLocal3'
.field public class SomeExample/Foo '<>g__initLocal4' 
```

所以问题是 - 如果应用于您的场景，该对象的创建也会破坏堆栈吗？可能不会，因为在内存中它应该像尝试初始化大型数组 - 其中百万元素数组是完全可以接受的（假设在实践中有足够的内存）。

所以 - 你*可以*很简单地通过使用每个元素的`IEnumerable`方法来修复你的代码。`yield`

但最佳实践表明，如果您绝对必须对此进行静态定义 - 考虑将数据添加到磁盘上的嵌入式资源或文件（XML 和 Linq to XML 可能是一个不错的选择），然后按需从那里加载。

更好的是 - 将其保存在数据库中:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:41:50.073

你如何在你的控制器中访问 DataHelper.Sellers - 你是在使用 GET 还是 POST 这个控制器？对于如此大量的数据，您应该使用 POST。

您还需要检查 IIS 堆栈大小：http: [//blogs.msdn.com/b/tom/archive/2008/03/31/stack-sizes-in-iis-affects-asp-net.aspx](http://blogs.msdn.com/b/tom/archive/2008/03/31/stack-sizes-in-iis-affects-asp-net.aspx)

尝试在 ASP.NET 的应用程序池中启用 32 位应用程序。

# java - 有没有办法在桌面应用程序中转换安卓应用程序？

> ID：10736534
> 
> 赞同：5
> 
> 时间：2012-05-24T11:24:23.110
> 
> 标签：java, android, simulator

我开发了一个运行良好的 android 应用程序，我想将它迁移到桌面，有什么工具或简单的方法可以做到这一点吗？如果不能，您至少能给我一个在桌面上运行 android 应用程序的解决方案（类似于模拟器，但没有 android os 界面的独立应用程序）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T12:05:45.110

如前所述，Bluestacks 获得了一些好评，因为它是一个无所事事的选项，可以让 Android 应用程序在 Windows 上运行。

但是，我不认为您将能够找到能够为您移植的工具。有太多特定于应用程序的东西可能无法正常迁移。我认为这类似于将程序移植到不同语言的脚本请求。做这种事情并让它始终正常工作是一个非常困难的问题。

话虽如此，您可以采取一系列步骤来帮助自己完成整个过程。我一直在开发一个应用程序，它在桌面上作为 Java 应用程序运行，在手机上作为 Android 应用程序运行。这是我在设计系统时必须经历的事情的清单。

1.  列出您的应用程序使用的所有特定于 Android 的 API。任何 UI 代码、日志记录、数据库访问等。
2.  提出您自己的内部 API，允许您的核心应用程序逻辑独立于它运行的平台工作。其中一些事情不需要你写很多代码就可以实现。例如， [SLF4J](http://www.slf4j.org/)提供了一种抽象，允许您插入许多日志框架，包括 Android 的 Log API。
3.  将所有核心代码移动到自己的库中。这样，只需将库列为依赖项，所有核心功能和逻辑都可以编写一次并在任何平台上使用。
4.  想出一个对您的目标平台有意义的 UI。长滚动列表在手机上效果很好，但对于桌面应用程序来说可能不是最好的主意。屏幕纵横比和分辨率与 IO 设备不同。可以尝试建立一致的外观和感觉，但要根据平台的要求做出基本的 UI 决策。

# orchardcms - Orchard CMS：从视图中获取字段值的正确方法？

> ID：10736535
> 
> 赞同：5
> 
> 时间：2012-05-24T11:24:26.887
> 
> 标签：orchardcms

我有 ContainerWidget 和带有 ShowAllLinkCaption 字段的自定义容器类型。现在我只有一个解决方案，而且看起来很难看。在容器小部件视图上获取此字段值的正确方法是什么？

```
@*Latest news widget*@
@using Orchard.ContentManagement
@using Orchard.Utility.Extensions
@{
    var contentId = (int)Model.ContentItem.ContainerWidgetPart.Record.ContainerId;
    IContentManager contentManager = WorkContext.Resolve<IContentManager>();    
    var customListContentItem = contentManager.Get(contentId);
    var showAllLinkCaptionField = customListContentItem.Parts.SelectMany(p => p.Fields).First(f => f.Name == "ShowAllLinkCaption");
    var showAllLinkCaptionText = showAllLinkCaptionField.Storage.Get<string>(null);   
}
@Display(Model.Content)
@Html.Link(showAllLinkCaptionText, Url.ItemDisplayUrl(customListContentItem)) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-24T17:05:01.633

ContentItem 是一个动态对象，它允许直接访问部件和字段，而无需使用那些丑陋的 Lambda。您只需要知道具有该字段的部分的名称，您可以执行以下操作：

```
someContentItem.ThePartThatHasTheField.TheField.TheNameOfThePropertyYouWantToAccess 
```

# postgresql - 创建一个序列，其值是字符和数字的混合

> ID：10736541
> 
> 赞同：3
> 
> 时间：2012-05-24T11:24:46.173
> 
> 标签：postgresql

我正在使用 Postgres 9.1 并想创建一个可以用作主键的序列，它应该如下所示：

```
| entity_id_seq |
-----------------
|         X0001 |
|         X0002 |
           ....
|         X0123 | 
```

并将`nextval( 'entity_id_seq' )`返回`'X0124'`。

任何想法如何以及是否可以使用纯 Postgres？

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T11:46:17.203

这样的事情应该没问题：

创建序列：

```
CREATE SEQUENCE special_seq; 
```

创建一个函数，或者不创建一个函数：

```
CREATE OR REPLACE FUNCTION
nextval_special()
RETURNS TEXT
LANGUAGE sql
AS
$$
    SELECT 'X'||to_char(nextval('special_seq'), 'FM0000'); 
$$; 
```

现在检查它是否有效：

```
SELECT nextval_special() FROM generate_series(1,10);

 nextval_special 
-----------------
 X0001
 X0002
 X0003
 X0004
 X0005
 X0006
 X0007
 X0008
 X0009
 X0010
(10 rows) 
```

现在您可以使用上述函数创建表：

```
CREATE TABLE test (
    id TEXT PRIMARY KEY DEFAULT nextval_special(),
    a int
); 
```

或者只是通过函数的简单查询没有函数：

```
CREATE TABLE test (
    id TEXT PRIMARY KEY DEFAULT 'X'||to_char(nextval('special_seq'), 'FM0000'),
    a int
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T11:40:33.663

我们可以创建一个函数来使用 nextval 并在其前面加上 X。像这样的东西：

```
CREATE FUNCTION nextseq() RETURNS text
AS 
begin 
return 'X'||lpad(nextval( 'entity_id_seq',4,'0' );
end; 
```

# windows - windows 7下使用clisp/asdf加载cl+ssl

> ID：10736544
> 
> 赞同：1
> 
> 时间：2012-05-24T11:24:55.340
> 
> 标签：windows, common-lisp, clisp, asdf

我正在尝试通过加载“cl+ssl”

```
(asdf:oos 'asdf:load-op :cl+ssl) 
```

导致

```
Component :TRIVIAL-GARBAGE not found, required by #<SYSTEM "cl+ssl"> 
```

是否有人知道这个问题，如果是/否，我该如何解决这个问题，或者我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:16:18.910

`asdf:load-op`不会自动为您安装依赖项（尽管我认为如果您已经安装了它们，它会自动加载它们）。

确实，处理此问题的最佳方法是使用[quicklisp](http://www.quicklisp.org/beta/)。

如果您不想这样做，您可以`trivial-garbage`通过安装`asdf-install`，或从[源](https://github.com/trivial-garbage/trivial-garbage)手动安装。

# web-services - powershell smtp 没有与之关联的邮箱

> ID：10736551
> 
> 赞同：0
> 
> 时间：2012-05-24T11:25:33.903
> 
> 标签：web-services, powershell, calendar, exchange-server-2010

我正在尝试使用 powershell 将约会输入日历以换取 2010 年。但是我在要保存的最后一行出现错误。smtp 没有与之关联的邮箱。我正在使用管理员用户来执行此操作，所以我不明白为什么它不起作用。下面是代码

```
Param ([string]$calInputFile = $(throw "Please provide calendar input file..."))

# Testing
#$calinputfile="d:\calendar_inject.csv"
# Connect to Live@edu
# capture the admin LiveID username in a variable
$Username = "administrator@domainasa.com"
# capture the admin LiveID password in a variable.  Note, that it is stored as a secure string
$Password = ConvertTo-SecureString ‘password’ -AsPlainText -Force
# populate the $Livecred PowerShell credential with $Username and $Password
$Livecred = New-Object System.Management.Automation.PSCredential $Username, $Password
#$Session = New-PSSession -ConfigurationName Microsoft.Exchange -ConnectionUri https://thor.uk.domainasa.com/powershell/ -Credential $LiveCred -Authentication Basic -AllowRedirection
#Import-PSSession $Session
# Load EWS Managed API library
Import-Module -Name "C:\Program Files\Symantec\Backup Exec\Microsoft.Exchange.WebServices.dll"
# Load all Mailboxes
#$exchangeUsers = Get-Mailbox -ResultSize Unlimited | Select UserPrincipalName
#test with just one user
$exchangeusers = get-mailbox "sharif uddin" |select UserPrincipalName
# Load all calendar Entries
$calEntries = Import-Csv $calInputFile
# Identify the folder to save our appointments into
$folderid = new-object Microsoft.Exchange.WebServices.Data.FolderId([Microsoft.Exchange.WebServices.Data.WellKnownFolderName]::Calendar)
# Create Exchange Service object
$service = new-object Microsoft.Exchange.WebServices.Data.ExchangeService([Microsoft.Exchange.WebServices.Data.Exchangeversion]::exchange2010)
$service.Url = new-object System.Uri("https://thor.uk.domainasa.com/EWS/Exchange.asmx")
# Service account must have ApplicationImpersonation ManagementRoleAssignment in Exchange
$service.Credentials = new-object Microsoft.Exchange.WebServices.Data.WebCredentials("administrator@domainasa.com","woki1141")

foreach($mailbox in $exchangeUsers)
{
 # Identify user to which appointment will be added
  $MailboxName = $mailbox.UserPrincipalName
  # Instruct service to use impersonation
  $iUserID = new-object Microsoft.Exchange.WebServices.Data.ImpersonatedUserId([Microsoft.Exchange.WebServices.Data.ConnectingIdType]::SmtpAddress,$MailboxName)
  #Write-Output $iUserID
  $service.ImpersonatedUserId = $iUserID
  Write-Output $service

  # Create new appointment object for each appointment to save
  foreach($entry in $calEntries)
  {
   $appt = New-Object Microsoft.Exchange.WebServices.Data.Appointment($service)
   $appt.Subject = $entry.Subject

   # Convert date
   $x = Get-Date -Date $entry."Start Date"
   $y = Get-Date -Date $entry."End Date"
   $appt.Start = [System.DateTime]( $x )
   $appt.End = [System.DateTime]($y)    #For AllDayEvent, end date must be after start date
   $appt.IsAllDayEvent = $True
   $appt.LegacyFreeBusyStatus = "Free"
   $appt.IsReminderSet = $False   #If you want a reminder then remove this line
   #$appt.Save($folderid)
   $appt.Save()
  }
} 
```

错误：

```
Exception calling "Save" with "0" argument(s): "The SMTP address has no mailbox associated with it."
At C:\exchange.ps1:55 char:14
+    $appt.Save <<<< ()
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : DotNetMethodException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:55:06.787

检查邮箱是否存在以及别名是否正确。

# android - 带有按钮的 Android ExpandableListView 项目不处理事件（单击、长按...），并且没有提供项目状态可见更改

> ID：10736559
> 
> 赞同：0
> 
> 时间：2012-05-24T11:26:12.953
> 
> 标签：android, expandablelistview, expandablelistadapter

我使用 ExpandableListView 从 ExpandableListActivity 扩展了一个活动。我在项目布局中添加了一个按钮。使用 SimpleExpandableListAdapter 派生类，我为我的按钮提供了一个单击侦听器（如果它们不相关，其中一些被置于可见状态）。如果按钮不可见（消失），我可以处理子视图的事件（单击、长按）。但是，如果按钮是可见的，则侦听器没有捕获到任何事件，则孩子的状态更改都不是不可见的（焦点、选择...）。作为子视图，我使用带有多个 TextView 和一个按钮的 RelativeLayout。

我怎样才能捕捉到这些事件？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:27:26.943

您已将按钮的可聚焦设置为 false：

```
android:focusable=false 
```

它的工作原理是这样的，当你有一个可点击类型的元素时，默认情况下它会获得焦点，它不会让你的子视图点击事件响应。解决的办法就是把它的重心放在虚假上，别无他法。但是您仍然可以`ClickListener`为您的按钮工作。那里不会有问题。

# c# - C# MVC3 - file array is null when posting

> ID：10736564
> 
> 赞同：1
> 
> 时间：2012-05-24T11:26:43.267
> 
> 标签：c#, asp.net, asp.net-mvc-3

I am posting multiple files to my controller but it does not seem to find them. It says that `files` variable is `null`. I can't understand where is the problem.

HTML

```
<form action="/gallery/create" enctype="multipart/form-data" method="post" novalidate="novalidate">
    <div class="file-holder">
        <div>
            <input type="file" name="files[]">
            <input type="file" name="files[]">
        </div>
    </div>
    <input type="submit" value="Create">
</form> 
```

Controller

```
[HttpPost]
public ActionResult Create(Gallery g, IEnumerable<HttpPostedFileBase> files)
{
    string t = string.Empty;
    foreach (var file in files)
    {
        t += file.FileName;
    }

    return Content(t);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:31:13.370

Remove the `[]` from the name:

```
<input type="file" name="files">
<input type="file" name="files"> 
```

# android - 在 Android 上，使用 XML 或代码定义接口哪个更好？

> ID：10736567
> 
> 赞同：0
> 
> 时间：2012-05-24T11:26:55.557
> 
> 标签：android, android-layout, interface

在我的第一个项目中，我使用 XML 作为接口。现在我要开始新项目了，它已经足够大了：固定页脚、页眉和带有图片、地图等的内容。
问题：对于我的新项目，哪个更好地构建接口：将 XML 与外部脚本一起使用，还是删除 XML 并从代码中创建所有内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:31:28.287

我想这或多或少是一个偏好问题。如果您更喜欢使用 XML，请坚持使用它，因为它为几乎所有有关布局的内容提供了必要的功能。

如果您的应用程序的某些部分需要以编程方式进行布局，您可以在特定情况下执行此操作。

我的经验是，一旦你掌握了 XML 布局的窍门，它就会变得简单灵活，而代码布局则更难管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T12:17:27.103

XML 布局为您提供了很多通过代码难以实现的灵活性。

*   您可以合并和包含布局。（http://developer.android.com/resources/articles/layout-tricks-merge.html 和[http://developer.android.com/resources/articles/layout-tricks-reuse.html](http://developer.android.com/resources/articles/layout-tricks-reuse.html)）。
*   您可以为不同的本地化和配置创建布局。
*   您可以更轻松地在其他活动、片段和项目中重用布局。例如，Android 提供了各种可以重复使用的布局，例如 android.R.layout.simple_list_item_1（简单文本行的布局）。
*   使用存根 (http://developer.android.com/resources/articles/layout-tricks-stubs.html)。

请注意，您可以通过布局充气器在任何地方使用布局。有时需要编写代码来创建视图，但我尽量避免这种情况。为了避免整个项目的 XML 布局对我来说听起来像是受虐狂，因为你需要编写所有无聊的代码来创建布局参数等。我想你会很快理解为什么 Android 有布局 XML，如果你继续使用一个仅代码项目，用于比“Hello World”更大的东西。

# java - Google App Engine Servlet 中的 ResourceBundle 无法按预期工作

> ID：10736571
> 
> 赞同：2
> 
> 时间：2012-05-24T11:27:10.683
> 
> 标签：java, google-app-engine, internationalization, resourcebundle

有人可以帮助我理解为什么国际化使用`ResourceBundle`在 Google App Engine Servlet 中无法像在命令行 Java 应用程序中那样工作吗？

以下片段：

`ResourceBundle resource_en_US, resource_de_DE, resource_ja_JP;`

`resource_en_US = ResourceBundle.getBundle(bundleBasename, Locale.US);` `resource_de_DE = ResourceBundle.getBundle(bundleBasename, new Locale("de_DE"));` `resource_ja_JP = ResourceBundle.getBundle(bundleBasename, new Locale("ja_JP"));`

`logger.info("resource_en_US:" + resource_en_US.getLocale());` `logger.info("resource_de_DE:" + resource_de_DE.getLocale());` `logger.info("resource_ja_JP:" + resource_ja_JP.getLocale());`

仅`en_US`在 GAE 中记录。

`resource_en_US:en_US`

`resource_de_DE:en_US`

`resource_ja_JP:en_US`

但在命令行 Java 程序中记录适当的语言环境。

`resource_en_US:en_US`

`resource_de_DE:de_DE`

`resource_ja_JP:ja_JP`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T09:18:36.417

确保您的属性文件被复制到 WEB-INF/classes 中。您可以使用命令外壳检查这一点。

# c++ - 静态初始化和智能指针

> ID：10736578
> 
> 赞同：2
> 
> 时间：2012-05-24T11:27:55.473
> 
> 标签：c++

是否保证此函数不会造成任何内存泄漏（中没有额外分配`SomeObject`）：

```
void FreeFunction()
{
   static boost::scoped_ptr<SomeObject> MyStaticObject(new SomeObject);
} 
```

我从未使用过静态分配和智能指针的组合。我的编译器似乎可以正常工作，但我想知道这是否总是清理分配的内存。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T11:34:42.870

是的，没有内存泄漏。
这里的`static`意思是变量`MyStaticObject`在第一次调用时被初始化`FreeFunction()`，然后它在程序的整个生命周期中保持活动状态（就像任何其他静态变量一样）。
C++ 运行时安排并确保它`MyStaticObject`在某个时候被销毁。

# ios - iOS 开发者企业计划会员资格到期前续订

> ID：10736580
> 
> 赞同：2
> 
> 时间：2012-05-24T11:28:06.930
> 
> 标签：ios, membership, ad-hoc-distribution, renewal

我收到了一封来自苹果的关于更新企业会员计划的电子邮件，以下是我对此的问题。

*   如果在到期前更新程序，对分发证书有影响吗？
*   使用分发证书签名的应用程序在到期前更新程序是否会继续运行而没有任何问题？
*   是否需要在到期前续订后再次分发企业应用程序？

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T13:30:38.477

不，是的。不。

在到期前续订不会影响现有的配置文件。提前续订将使您的会员资格在当前到期日期后延长一年。提早续订，您不会失去会员资格的任何日历时间。未能按时续订将使您的分发证书失效，导致您的企业分发应用程序在过期日期后无法安装。

所以在到期前更新。

# android - 我如何开发屏幕在 android 4 中有标签，就像在 Skype 联系人中一样

> ID：10736581
> 
> 赞同：1
> 
> 时间：2012-05-24T11:28:07.150
> 
> 标签：android, android-layout, android-tabhost

我如何在 android 4 中创建屏幕具有图像和选项卡，如 Skype 联系人中的图像，如下图所示：

![在此处输入图像描述](../Images/fb70ec8360f3ed3a718060ea21d9db66.png)

谢谢你的帮助。

# c# - 在可视化 webgui 中创建自己的控件

> ID：10736584
> 
> 赞同：1
> 
> 时间：2012-05-24T11:28:16.813
> 
> 标签：c#, winforms, visual-web-gui

我想在可视化 webgui 中创建一个“仅限数字”按钮（我不想使用蒙面文本框）。

我这样做了：http: [//msdn.microsoft.com/en-us/library/ms229644](http://msdn.microsoft.com/en-us/library/ms229644(v=vs.80).aspx) (v=vs.80).aspx 这个解决方案适用于 WinForms，但不适用于 WebGui。当然，我必须从 Gizmox 控件 TextBox 交付。

所以..我尝试创建一个带有 sets property 的文本框，`Text="OK"`每次失去焦点。像那样：

```
using Gizmox.WebGUI.Forms;

namespace MyControls
{
    public partial class NumTextBox : TextBox
    {
        public NumTextBox()
        {
            InitializeComponent();
        }

        protected override void OnLostFocus(EventArgs e)
        {
            this.Text = "OK";
        }

    }
} 
```

为什么它不起作用？请帮忙，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T08:21:43.300

试试这个

```
public partial class NumTextBox : TextBox
{
    public NumTextBox()
    {
        LostFocus += new EventHandler(NumTextBox_LostFocus);
    }

    private void NumTextBox_LostFocus(object sender, EventArgs e)
    {
        this.Text = "OK";
    }
} 
```

但请注意，vwg 是一个奇怪的地方。您的所有 c# 代码都在服务器端执行，因此此类数字文本框可能会产生一些不需要的流量。也许你会更好：

```
new TextBox { Validator = TextBoxValidation.IntegerValidator }; 
```

这将禁止将非数字字符添加到文本框中。

# c# - DDD 实体持久化场景

> ID：10736590
> 
> 赞同：2
> 
> 时间：2012-05-24T11:28:40.657
> 
> 标签：c#, domain-driven-design

我正在尝试锻炼保持我的域更改的最佳位置。我有以下实体：

```
public class Period
{
   public Guid PeriodId { get; set; }
   public DateTime StartDate { get; set; }
   public DateTime EndDate { get; set; }
}

Trade
{
   public Guid TradeId { get; set; }
   Trader Instigator { get; set; }
   Trader Acceptor { get; set; }
   Period period { get; set; }
   public long Volume { get; set; }
   public decimal Price { get; set; }
} 
```

现在为了创建一个新的交易，我已经把它卸载到一个域服务

```
tradeService.PlaceTrade(Guid periodId, Guid UserId, decimal price. long volume) 
```

地方交易功能似乎很适合上述领域服务，交易服务坚持交易。我传入了一个 ITradeRepository 类以方便使用。

为了接受交易，我想要以下内容，以便交易的域逻辑位于交易实体内。

```
Trade trade = tradeRepository.Get(Guid tradeId)

TradeStatus = trade.Accept(userId); 
```

上述问题是 Trade 实体负责持久化数据，因此依赖于 ITradeRepository。

这是这样做的正确方法吗？感觉很脏？或者更好的方法是为交易类创建一个扩展方法以促进接受交易的相同功能？

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:38:18.703

实体不应该对存储库一无所知。因此，交易应该接受用户 ID 并设置其内部状态以反映它。但随后服务或控制器应将交易添加或保存到存储库。将交易保存到存储库，然后一次性持久化实体（可能还有许多交易聚合的子实体）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T10:09:08.103

正如杰克休斯所说，实体不应该依赖于他们的存储库。另外，我不明白您为什么需要“服务”来获得您的贸易实体？这是存储库的责任。也不确定为什么要将交易对象的引用传递给 get 方法？

这就是我的编码方式：

```
 //This is an application service method    
    public void AcceptTrade(Guid tradeId, Guid acceptingTraderId)
    {
        using (IUnitOfWork unitOfWork = UnitOfWorkFactory.Create())
        {
            Trade trade = _tradeRepository.GetById(tradeId);
            Trader acceptingTrader = _traderRepository.GetById(acceptingTraderId);

            trade.Accept(acceptingTrader);

            _tradeRepository.Save(trade);
        }
    } 
```

# android - 从堆栈中清除后台活动/活动的正确方法是什么？

> ID：10736594
> 
> 赞同：2
> 
> 时间：2012-05-24T11:28:48.997
> 
> 标签：android, android-activity, broadcastreceiver, activity-finish, activity-stack

正如问题标题所说 - 我需要知道“删除”/销毁/完成位于堆栈中间某处且当前处于暂停模式（不是特定实例 - 而是特定派生类）的活动的最佳方法是什么。

例如：
如果堆栈的当前状态如下所示：

```
ActivityD   <-- top of the stack, currently forground
ActivityC
ActivityA
ActivityC
ActivityA 
```

“清除”所有 ActivityC 实例的请求将导致堆栈如下所示：

```
ActivityD  <-- still top of the stack, currently forground.
ActivityA
ActivityA 
```

我不想这样做取决于活动启动模式或意图标志。我知道如何使用它们以及它们的好处。

我目前知道我可以做的是发送广播，所有需要销毁的活动都会收听，并在收到广播时调用 Activity.finish() 。
这是可行的，但即使在他们的托管活动暂停时，它也需要注册接收者，而且我不确定从暂停的活动中调用“finish（）”方法是否正确。

从恢复的活动中调用 Activity.finish() 方法是否正确？

在 OnCreate() 方法中注册接收者并取消注册 OnDestroy() 是否正确？

从恢复的活动中处理广播并从那时起调用 finish() 是否正确？

是否有“Android 方式”或某些我不知道的 API 从堆栈中清除活动？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T05:57:47.550

制作一个自定义广播接收器并将其注册到可以在您选择的事件上触发的每个活动中。在每个活动的 onReceiveMethod 中（可能被选中）只需调用 finish()。在这种情况下，您的活动将从堆栈中删除。此外，您可以访问此以获得更多帮助： [注销时，清除活动历史堆栈，防止“返回”按钮打开仅登录的活动](https://stackoverflow.com/questions/3007998/on-logout-clear-activity-history-stack-preventing-back-button-from-opening-l)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:40:46.160

我也有同样的问题。我所做的是，我保留了一个静态数组列表，每当我从一个活动转到另一个活动时，在新活动的 onCreate() 方法中，我将当前活动的对象添加到该列表中，如下所示：

```
SomeClass.addActivity(CurrentActivity.this); 
```

我在每个活动中添加了上述语句。

添加活动（）：

```
public void addActivity(final Activity activity) {
            activityList.add(activity);
        } 
```

当我想清除堆栈时，我调用了：

```
public boolean clearStack() {
        for (Activity activity : activityList) {
            activity.finish();
        }
        activityList.clear();
        return (activityList.isEmpty());
    } 
```

这样，我清除了我的活动堆栈。

谢谢 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T05:44:42.597

```
 Intent myintent = new Intent(YourCurrentActivity.this, YourNextActivitys.class);
    myintent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(myintent);
    finish(); 
```

我认为这是清除所有先前活动的正确方法...

# iphone - 在 iPhone 中获取 Facebook 朋友的生日字段

> ID：10736596
> 
> 赞同：1
> 
> 时间：2012-05-24T11:28:49.753
> 
> 标签：iphone, ios, facebook-graph-api

我想获取 Facebook 朋友的生日。我正在使用图形 API，我知道我必须使用`me/friends`图形 API。但问题是，每当我传递 url 之类的

```
https://graph.facebook.com/me/friends?[ACCESS TOKEN]&fields=id,name,picture,gender,birthday 
```

它提供的数据仅包含姓名、身份证、图片和性别等字段，但不显示生日字段。任何想法，如何获取所需的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:33:19.230

您应该获得扩展许可`friends_birthday`

然后上面的查询有效。

仅供参考：
[扩展权限](https://developers.facebook.com/docs/authentication/permissions/)
[用户对象 - 检查生日字段](https://developers.facebook.com/docs/reference/api/user/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:25:35.823

您可以`friends_birthday`使用图形 API：

```
[facebook requestWithGraphPath:@"me/friends?fields=id,name,gender,picture,birthday" andDelegate:self]; 
```

并添加这样的权限：

```
_permissions = [[NSArray arrayWithObjects:@"read_friendlists",@"publish_stream ,user_checkins", 
             @"friends_checkins", @"publish_checkins",@"email", nil] retain]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-18T13:09:43.410

```
Now Facebook give permission for user_birthday only if you submit your app in developer.facebook.com for review. If Facebook give permission to your app after successfull review then you will find user_birthday live. 
```

然后使用 NSString *urlString = [NSString stringWithFormat:@" [https://graph.facebook.com/me?access_token=%@&fields=email,name,gender,picture,birthday,relationship_status](https://graph.facebook.com/me?access_token=%@&fields=email,name,gender,picture,birthday,relationship_status) ", token.tokenString];

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-08T10:26:00.113

我/朋友？字段=id，姓名，图片，生日

在 graph api explorer 中尝试，以测试您的权限。

对我来说很好。

附言。不要忘记选择friends_birthday 并生成您的访问密钥。

# asp.net - 安排 URL 请求

> ID：10736597
> 
> 赞同：0
> 
> 时间：2012-05-24T11:28:51.157
> 
> 标签：asp.net, asp.net-mvc, powershell, windows-7, curl

我需要每 15 分钟向我的应用程序的 URL 发出一个请求（不托管计划任务），我不想要任何复杂的东西，只是一些简单的东西，所以我最终得到了这 2 个解决方案：

*   Windows 7 调度程序 + PowerShell 脚本
*   Windows 7 调度程序 + Curl 请求

还有其他类似的事情我可以做吗？

两种方法中哪一种最好？

如果有人能告诉我如何使 PowerShell 脚本执行 URL 请求或如何在 Windows 7 上安排 curl 请求，我真的很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:54:08.627

如果您手头有[PowerShell 3](http://www.microsoft.com/en-us/download/details.aspx?id=27548) ，则可以在计划脚本中使用全新的[Invoke-WebRequest 。](http://technet.microsoft.com/en-us/library/hh849901.aspx)但是在 PowerShell 中拥有[类似于 curl](http://www.jim-melton.com/2012/03/06/use-powershell-instead-of-curl/)的东西相对容易。从提到的文章中：

```
$document = New-Object -ComObject msxml2.ServerXMLHTTP
$document.open("POST", "https://www.somewhere.com", $false)
$document.setRequestHeader("Content-Type", "application/x-www-form-urlencoded")

$postline = " <Blah> "

$document.send($postline) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-30T01:11:17.700

您还可以尝试使用[iHook](https://ihook.us)等基于 Web 的请求调度程序。如果您的应用程序不可公开访问，您可能还需要像[ngrok](https://ngrok.com/)这样的隧道工具。

# javascript - 在java脚本中的浏览器关闭事件上清除缓存？

> ID：10736602
> 
> 赞同：0
> 
> 时间：2012-05-24T11:29:07.630
> 
> 标签：javascript, caching, browser-cache

我设置了自动完成属性。现在，当有人关闭浏览器时，我想清除缓存。

由于自动完成属性，它记录了较早的数据。我想清除数据。它应该只记录该会话的数据。

我知道，这不是一个好习惯。但是，我只是要求知识。

将不胜感激帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:33:54.353

您需要设置该`autocomplete="off"`属性，然后使用 cookie 来存储用户在该会话期间输入的值。

如果您没有为 cookie 提供过期日期/时间，它“应该”在浏览器关闭后自行删除它。

之后，您只需要在用户输入值时实现一个基于 javascript 的自动完成下拉菜单。

# php - 为什么我的网站在 xampp 中运行，但不在我的 Apache 服务器和我在 Ubuntu 上设置的 mySQL 中运行？

> ID：10736609
> 
> 赞同：2
> 
> 时间：2012-05-24T11:29:32.270
> 
> 标签：php, mysql, html, apache, xampp

我的登录站点完全在 Windows 上的 Xampp 中运行。但是现在我将它复制到 Apache 服务器，它运行但是当我输入 id 时，通过并提交。登录不了，总是返回“ID或密码不匹配，再试一次”

我在 Ubuntu 11.10 上安装了 Apache 服务器、MySQL、PHP5，并将我的数据库从 Xampp 复制到 Ubuntu 上的 MySQL。

这是我的代码：

登录.php

```
<?php session_start(); ?>
<?php if(isset($_SESSION['name'])) {
header('location: member.php?id='.$_SESSION['name']);
}?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Login page</title>
<link href="resources/style.css" type="text/css" rel="stylesheet">
</head>

<body>
<?php

require "./references/BLLClass.php";

//Khoi tao doi tuong BLL
$bllObj = new BLLClass();

//Kiem tra truong du lieu trong 2 o nhap
if(isset($_POST['submit'])) {
    $errors = array();
    $required = array('account', 'password');
    foreach($required as $fieldname) {
        if(!isset($_POST[$fieldname]) || empty($_POST[$fieldname])) {
            $errors[] = "The <strong> $fieldname </strong> was left bank.";
        }
    } // end: foreach

    if(empty($errors)) {
        $acc = mysql_real_escape_string($_POST['account']);
        $pword = mysql_real_escape_string($_POST['password']);
        //ket noi lay du lieu xac thuc
        $result = $bllObj->AuthMember($acc, $pword);
        if(mysql_num_rows($result) == 1){
            while($rows = mysql_fetch_assoc($result)){
                $_SESSION['name'] = $rows['member_name'];
                header('Location: member.php');
            }; //end while
        } else {
            $errors[] = "The ID or Password do not match, try again";
        }
    }//end if(empty($errors)

} // end isset($_POST['submit'])
?>
<div id="wrapper">

    <?php
        if(!empty($errors)) {
            echo "<ul>";
            foreach($errors as $error) {
                echo "<li>$error</li>";
            }
            echo "</ul>";
        }
    ?> <!-- Hien thi thong bao loi khi o nhap lieu rong -->

    <?php if(isset($message)) echo $message;?>
    <form action="" method="POST">
    <p>
        <label for="account or id"> Account or ID: </label>
        <input type="text" name="account"/>
    </p> <!-- o nhap ID hoac nick login-->

    <p>
        <label for="password"> Password </label>
        <input type="password" name="password"/>
    </p> <!--o nhap password-->

    <p>
        <input type="submit" name="submit" value="Login"/>
        <a href="register.php">Register</a>
    </p> <!-- nut submit va chuyen trang dang ky-->

<!--        <div class='login'>
        <a href="#">Login</a>
    </div>
--> 
    </div>
</body>
</html> 
```

BLLClass.php

```
<?php

//Business Logic Layer

require_once 'DBClass.php';

class BLLClass {    

    private $dbo;

    function BLLClass(){

    }
    //Check username password
    function AuthMember($username, $pword) {
        $this->dbo =    new DBClass();    
        $hash_pw = sha1($pword);
        $query = "SELECT member_name
                  FROM member
                  WHERE member_ID='$username'
                  OR member_login_name = '$username'
                  AND member_password = '$hash_pw'
                  LIMIT 1
                  ";
        $result = $this->dbo->SqlEx($query);
        return $result;
    }

}

?> 
```

和 DBClass.php

```
<?php

//Data Access Layer
class DBClass{

    private $mysql_hostname = "localhost";
    private $mysql_port = "3306";
    private $mysql_user = "root";
    private $mysql_password = "mypass";
    private $mysql_database = "db.sums01";

    public function DBClass(){

    }

    //khoi tao ket noi
    public function GetConn() {
    $conn = mysql_connect($this->mysql_hostname.":".$this->mysql_port, $this->mysql_user, $this->mysql_password) or die("Could not connect to DB");
    mysql_select_db($this->mysql_database, $conn) or die("Opps some thing went wrong");

    return $conn;
    }

    //gui query len co so du lieu
    public function SqlEx($query) {
        $conn = $this->GetConn();
        $result = mysql_query($query, $conn) or die (mysql_error($conn));
        return $result;
    }
}
?> 
```

这是我的 apache 错误日志

```
[Thu May 24 20:42:27 2012] [error] [client 192.168.40.1] PHP Warning:  mysql_real_escape_string(): Access denied for user 'www-data'@'localhost' (using password: NO) in ~/site/Login.php on line 33, referer: http://192.168.40.130/Login.php
[Thu May 24 20:42:27 2012] [error] [client 192.168.40.1] PHP Warning:  mysql_real_escape_string(): A link to the server could not be established in ~/site/Login.php on line 33, referer: http://192.168.40.130/Login.php
[Thu May 24 20:42:27 2012] [error] [client 192.168.40.1] PHP Warning:  mysql_real_escape_string(): Access denied for user 'www-data'@'localhost' (using password: NO) in ~/site/Login.php on line 34, referer: http://192.168.40.130/Login.php
[Thu May 24 20:42:27 2012] [error] [client 192.168.40.1] PHP Warning:  mysql_real_escape_string(): A link to the server could not be established in ~/site/Login.php on line 34, referer: http://192.168.40.130/Login.php
[Thu May 24 20:42:27 2012] [error] [client 192.168.40.1] File does not exist: ~/site/favicon.ico 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:53:49.770

[mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)使用当前 MySQL 连接来确定要转义的内容：

> 转义 unescaped_string 中的特殊字符，**考虑到连接的当前字符集，**以便将其放在 mysql_query() 中是安全的。如果要插入二进制数据，则必须使用该函数。

如果没有可用的连接，它将尝试创建一个：

> 如果未指定链接标识符，则假定由 mysql_connect() 打开的最后一个链接。**如果没有找到这样的链接，它将尝试创建一个，就好像 mysql_connect() 没有参数被调用一样。**如果未找到或建立连接，则会生成 E_WARNING 级别错误。

这就是为什么您会收到该特定警告的原因-它正在尝试连接到本地主机，因为用户 PHP 以 (www-data) 身份运行而没有密码。

To match the rest of your code, you probably want to create a `DBClass->escape()` function that uses the connection in that class.

# django - 用 {{ compress js }} 和 {{ compress css }} 包装相关标签

> ID：10736612
> 
> 赞同：0
> 
> 时间：2012-05-24T11:29:45.437
> 
> 标签：django, django-compressor

有没有办法用 django_compressor 标签自动包装所有相关标签（即脚本、样式、链接 rel=stylesheet）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T14:41:22.330

编辑：根据 Chris Pratt 的评论更新。谢谢克里斯。

利用 base.html 中的模板块来定义 {% extra_js %} 和 {% extra_css %} 块，然后将*这些*块放入 django-compressor 块中。您可能还希望有 {% extra_js_nocompress %} 和 {% extra_css_nocompress %} 块，用于压缩器内部爆炸的东西（例如 Twitter Bootstrap）

所以，在你的 base.html 中的某个地方（理想情况下，CSS 高，JS 低）：

```
{% compress css%}
   <link rel="stylesheet" href="{{ STATIC_URL }}foo/bar.css">
   <!-- any other global CSS here too -->
{% endcompress %}

{% compress css%}
   {% block extra_css %}{% endblock %}
{% endcompress %}

{% block extra_css_nocompress %}{% endblock %}

{% compress js%}
   <script type="text/javascript" src="{{ STATIC_URL }}js/waa/baa.js"></script>
   <!-- any other global JS here too -->
{% endcompress %}

{% compress js%}
   {% block extra_js %}{% endblock %}
{% endcompress %}

{% block extra_js_nocompress %}{% endblock %} 
```

然后，在您的模板中，如果模板扩展了 base.html，您可以将所有模板内 CSS 和 JS 打乱到这些块中（同时仍将它们保留在需要它们的模板中）

# javascript - 日期选择器的回调函数“beforeshow”上的按钮未禁用。

> ID：10736614
> 
> 赞同：1
> 
> 时间：2012-05-24T11:29:53.830
> 
> 标签：javascript, jquery, html

我想在执行回调函数“beforeShow”时禁用页面上的所有按钮。但这并没有发生。我错过了什么吗？还是我需要添加更多内容？

我的代码是：

```
$(document).ready(function(event){  
    var inputs = $("#containigdiv").find("input[type='button']");           
    $(".datepicker").datepicker({
        changeMonth: true,
        changeYear: true,                               
        beforeShow: function(){                     
            inputs.attr('disabled','disabled');
        },                
        onClose: function(dateText) {                       
            inputs.attr('disabled','');
        }
    });
}); 
```

现在我可以禁用按钮，但是当我尝试在日历上选择落在此按钮上的日期时，禁用的按钮仍然获得焦点，因此没有选择日期。

# android - 在没有视图的情况下导入类扩展活动

> ID：10736615
> 
> 赞同：0
> 
> 时间：2012-05-24T11:29:57.063
> 
> 标签：android, class, import, android-activity

我有一个导入 VersionCheck.java 的 LoginActivity.java。

VersionCheck.java 有一个类 VersionCheck，它扩展了 Activity 以获得对 getPackageManager() 的访问。

在 LoginActivity 中，我得到一个 VersionCheck 类的对象，并运行 getVersionName 方法来检索应用程序的 versionName。

当我运行应用程序时，我在 getVersionName 方法中得到一个java.lang.NullPointerException *。*`pinfo = getPackageManager().getPackageInfo(packageName, 0);`

如果我将 getVersionName 方法放在我的主类中，代码就可以工作，但是我想用这个方法创建一个单独的类，因为我在应用程序中经常使用这个方法。

请参阅下面的代码。

**登录活动.java**

```
package com.itse.htsurvey;

import com.itse.tools.*;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class LoginActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);

        displayVersionName();           

    }

    //---------------------------------------------------------------------------------------------------------
    //retrieves version name and displays it
    //---------------------------------------------------------------------------------------------------------
    private void displayVersionName() {

        //object of class versioncheck
        VersionCheck vc = new VersionCheck();

        TextView tvVersion = (TextView) findViewById(R.id.tvVersion);
        tvVersion.setText("Version " + vc.getVersionName(getPackageName()));
    }

} 
```

**版本检查.java**

```
package com.itse.tools;

import android.app.Activity;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager.NameNotFoundException;

public class VersionCheck extends Activity{

    //---------------------------------------------------------------------------------------------------------
    //Retrieves the version name of the application and returns to method caller
    //---------------------------------------------------------------------------------------------------------
    public String getVersionName(String packageName) {

        PackageInfo pinfo = null;
        try {
            pinfo = getPackageManager().getPackageInfo(packageName, 0);
        } catch (NameNotFoundException e) {         
            e.printStackTrace();
        }

        return pinfo.versionName;    
    }

} 
```

**错误信息**

```
05-24 13:07:23.146: W/dalvikvm(888): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
05-24 13:07:23.166: E/AndroidRuntime(888): FATAL EXCEPTION: main
05-24 13:07:23.166: E/AndroidRuntime(888): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.itse.htsurvey/com.itse.htsurvey.LoginActivity}: java.lang.NullPointerException
05-24 13:07:23.166: E/AndroidRuntime(888):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-24 13:07:23.166: E/AndroidRuntime(888):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-24 13:07:23.166: E/AndroidRuntime(888):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-24 13:07:23.166: E/AndroidRuntime(888):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-24 13:07:23.166: E/AndroidRuntime(888):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-24 13:07:23.166: E/AndroidRuntime(888):  at android.os.Looper.loop(Looper.java:137)
05-24 13:07:23.166: E/AndroidRuntime(888):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-24 13:07:23.166: E/AndroidRuntime(888):  at java.lang.reflect.Method.invokeNative(Native Method)
05-24 13:07:23.166: E/AndroidRuntime(888):  at java.lang.reflect.Method.invoke(Method.java:511)
05-24 13:07:23.166: E/AndroidRuntime(888):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-24 13:07:23.166: E/AndroidRuntime(888):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-24 13:07:23.166: E/AndroidRuntime(888):  at dalvik.system.NativeStart.main(Native Method)
05-24 13:07:23.166: E/AndroidRuntime(888): Caused by: java.lang.NullPointerException
05-24 13:07:23.166: E/AndroidRuntime(888):  at android.content.ContextWrapper.getPackageManager(ContextWrapper.java:86)
05-24 13:07:23.166: E/AndroidRuntime(888):  at com.itse.tools.VersionCheck.getVersionName(VersionCheck.java:16)
05-24 13:07:23.166: E/AndroidRuntime(888):  at com.itse.htsurvey.LoginActivity.displayVersionName(LoginActivity.java:29)
05-24 13:07:23.166: E/AndroidRuntime(888):  at com.itse.htsurvey.LoginActivity.onCreate(LoginActivity.java:16)
05-24 13:07:23.166: E/AndroidRuntime(888):  at android.app.Activity.performCreate(Activity.java:4465)
05-24 13:07:23.166: E/AndroidRuntime(888):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-24 13:07:23.166: E/AndroidRuntime(888):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-24 13:07:23.166: E/AndroidRuntime(888):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:55:02.887

您不能只扩展 Activity 类。您应该将第一个活动的上下文传递给该方法。

喜欢：

```
public static String getVersionName(Context context, String packageName) {

    PackageInfo pinfo = null;
    try {
        pinfo = context.getPackageManager().getPackageInfo(packageName, 0);
    } catch (NameNotFoundException e) {         
        e.printStackTrace();
        // Can not return pinfo.versionName since pinfo wasn't assigned due to exception
        return null;
    }

    return pinfo.versionName;    
} 
```

如果您将其用作活动，则仅扩展 Activity 类：D

# java - Jmeter 监听器显示“javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?”

> ID：10736621
> 
> 赞同：10
> 
> 时间：2012-05-24T11:30:22.397
> 
> 标签：java, jmeter

使用 jmeter 我正在尝试运行使用 HTTP 代理服务器记录的测试。但是在播放测试时，侦听器中会引发以下异常。

```
javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?
    at com.sun.net.ssl.internal.ssl.InputRecord.handleUnknownRecord(InputRecord.java:521)
    at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:355)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:722)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1029)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1056)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1040)
    at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:405)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:170)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:133)
    at org.apache.jmeter.protocol.http.sampler.HTTPSampler.sample(HTTPSampler.java:483)
    at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:965)
    at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:951)
    at org.apache.jmeter.threads.JMeterThread.process_sampler(JMeterThread.java:348)
    at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:243)
    at java.lang.Thread.run(Thread.java:619) 
```

该网站还存在我永久存储异常的证书问题。此错误的原因可能是什么？任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-24T11:49:41.363

错误消息表明您正在尝试使用服务器上的端口建立 SSL/TLS 连接，该端口使用 HTTP 而不是 HTTP **S**。确保您拥有正确的端口 - 通常 443 用于 HTTPS。

# multithreading - 如何在线程之间共享 LWP::UserAgent 对象

> ID：10736626
> 
> 赞同：2
> 
> 时间：2012-05-24T11:30:39.947
> 
> 标签：multithreading, perl, lwp-useragent

是否可以创建可用于不同线程中的 HTTP 请求的共享 LWP::UserAgent 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:13:31.827

最简洁的答案是不。可能有一种方法可以使用共享内存来实现这一点，但即使有可能，我认为你不会想要这样做，因为用户代理本身存储有对象，例如最后一个错误等。如果你想要同步 cookie，您可以通过指定一个持久化和重用的 cookie jar 来处理这个问题（来自 perldoc for LWP::UserAgent）：

$ua->cookie_jar($cookie_jar_obj)

# python - 如何围绕现有产品构建测试套件？

> ID：10736629
> 
> 赞同：2
> 
> 时间：2012-05-24T11:30:44.687
> 
> 标签：python, django, unit-testing, testing

该软件已有将近三年的历史，并且具有 Django 附带的标准测试，但我们希望开始对所有内容进行单元测试并在我们进行时回填测试。这似乎是一项艰巨的任务，主要是因为数据库要求。理想情况下，我们可以使用数据库的副本进行测试，但 Django 要求您使用固定装置，这意味着我们必须将其全部导出并为每个“构建”导入它，这仅需要很长时间。有没有更优雅的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T11:51:41.457

我不会对所有内容进行单元测试，只对无论如何都必须正确的关键位进行单元测试。[Working Effectively with Legacy Code](http://books.google.com/books/about/Working_effectively_with_legacy_code.html?id=CQlRAAAAMAAJ)是一本很棒的书，它讨论了解决这个问题的几种方法。在向旧代码添加单元测试时，我发现它非常有用。

# iphone - 如何根据日期对sqlite数据库进行排序？

> ID：10736631
> 
> 赞同：2
> 
> 时间：2012-05-24T11:30:53.770
> 
> 标签：iphone, sorting, date, sqlite

> **可能重复：**
> [对 Sqlite 数据库中的日期进行排序](https://stackoverflow.com/questions/7161313/sort-the-date-in-sqlite-database)

我正在创建一个使用 SQLite 数据库的 iPhone 应用程序。在这个我有一个包含三列的表，一列是“ReleaseDate”，`DATE`数据类型。我想根据此列中的日期对数据库进行排序。我使用了以下代码。对于插入，

```
 NSDateFormatter *format = [[NSDateFormatter alloc]init];
    [format setDateFormat:@"MM/dd/yyyy"];
    NSDate *dateFromString = [[NSDate alloc] init];
    dateFromString = [format dateFromString:date];
    [format release];
    NSTimeInterval timeInterval = [dateFromString timeIntervalSince1970];

    sqlite3_bind_double(insertStmt, 4, timeInterval); 
```

这里，'date' 是一个保存日期值的字符串值。现在，我怎样才能从数据库的整个列中检索数据？我使用的查询是，

```
select * from ItemTable  order by ReleaseDate desc 
```

但排序没有完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:34:27.543

There should be a format for dates in SQLite called DateTime. Try formatting your date to that as opposed to a String.

[http://metacpan.org/pod/DateTime::Format::SQLite](http://metacpan.org/pod/DateTime::Format::SQLite)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:38:57.043

像这样使用：`select * from ItemTable ORDER BY ReleaseDate ASC/DESC`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-24T18:10:58.053

当您插入数据时，请使用以下代码。

```
NSString *strTimeStamp = [NSString stringWithFormat:@"%lf",[[NSDate date] timeIntervalSince1970]]; 
```

将 strTimeStamp 插入数据库。

当您获取数据时，请使用以下功能

```
NSTimeInterval timeInterval= [self intervalBeforeDays:2];

NSString *query = [NSString stringWithFormat:@"Select * from pictures where date >= %lf",timeInterval];

- (NSTimeInterval)intervalBeforeDays:(NSInteger)day{
    NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateComponents *dateComponents = [gregorian components:(NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit) fromDate:[NSDate date]];
    NSInteger iday = [dateComponents day];
    NSInteger iEarlierDay = iday -day;
    dateComponents.day = iEarlierDay;
    NSDate *date = [gregorian dateFromComponents:dateComponents];
    NSTimeInterval interval = [date timeIntervalSince1970];
    [gregorian release];
    return interval;

} 
```

# ruby - rake db:migrate 不适用于 Mysql 适配器（Windows 7）

> ID：10736632
> 
> 赞同：1
> 
> 时间：2012-05-24T11:30:59.240
> 
> 标签：ruby, ruby-on-rails-3

我是一位经验丰富的 PHP 程序员，正在尝试“Ruby on Rails”，我有 Windows 7 作为我的操作系统，我已经安装了 ruby​​ (1.9.3p125)、rails (3.2.1) 和 gem (1.8.16) , 耙 (0.9.2.2)。

我正在关注 rails 网站上的文档来开发演示应用程序。

我使用“rails new demoApp”创建了新项目。然后在项目中我创建了一个脚手架并尝试了

```
rake db:create 
```

这创建了一个没有表的数据库

然后我尝试使用迁移我的数据库

```
rake db:migrate 
```

这是我的提示冻结并且什么都不做的地方，我的意思是根据我的假设，它应该在 mysql 中创建了我的项目表以及一个名为“schema_migrations”的附加表，但没有任何反应。谁能告诉我我做错了什么？

我用谷歌搜索了我在使用日志说的跟踪命令后收到的日志

```
Rake Aborted !!
Mysql::Error: query: not connected: SHOW TABLES LIKE 'schema_migrations' 
```

我试过了

```
rails dbconsole 
```

它很容易连接到 mysql 提示符，所以没有连接问题我不知道发生了什么谁能告诉我哪里出错了？

我希望我清楚我的问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:32:32.887

你安装了 MySql gem 吗？[https://rubygems.org/gems/mysql](https://rubygems.org/gems/mysql)

如果没有，请将其添加到您的 Gemfile

```
gem 'mysql' 
```

这个 gem 很重要，因为它使用 Active Record（Rails 的 ORM）设置您的数据库。

# excel - VBA - 过滤后只需要报告可查看单元格的单元格格式

> ID：10736635
> 
> 赞同：0
> 
> 时间：2012-05-24T11:31:07.707
> 
> 标签：excel, vba, macos

我对 Excel VBA 中的宏有疑问。我想在 Excel 中获取彩色单元格的数量，所以我编写了以下代码：

```
Application.ScreenUpdating = False
x = Range("D2:Y46").Select

For Each d In Selection 
    d.Select 
    If Selection.Interior.Color = 15773696 Then
        Count = Count + 1 
    End If 
Next

Application.ScreenUpdating = True 
Range("C53").Select 
Selection = Count 
```

它工作正常，但是由于标题过滤器而隐藏了一些行。

当我使用上面的代码时，它也显示隐藏单元格的输出，但我不希望结果包含隐藏单元格。在标题中过滤后，我只需要可查看单元格的结果。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:55:05.520

我已经修改了您的代码以执行您的要求，但也提高了效率；在对它进行操作之前，您通常不需要对`Select`一个单元格进行操作。

```
Option Explicit

Sub CountCellsByColor()

Dim d As Range, x As Range
Dim Count As Integer
Application.ScreenUpdating = False

Set x = Range("D2:Y46")

For Each d In x
    If d.Interior.Color = 15773696 And Not d.Rows.Hidden And Not d.Columns.Hidden Then
        Count = Count + 1
    End If
Next

Application.ScreenUpdating = True
Range("C53").Value = Count

End Sub 
```

如果该行没有被过滤掉（隐藏） ，`Not d.Rows.Hidden`检查将返回。`True`

# jsp - 在jsp中将日期格式化为dd-mm-yyyy

> ID：10736637
> 
> 赞同：1
> 
> 时间：2012-05-24T11:31:20.070
> 
> 标签：jsp, date-format

我需要将格式中的日期格式`dd-mm-yyyy`（`jsp.My database`dd/mm/yyyy-db 中的日期数据类型）读取到 jsp（使用表单 bean，CmFrm.getExpireDate() - 数据类型为字符串）。
它现在`yyyy-mm-dd hh:mm:ss.a`以 jsp 格式读取，我希望它以`dd-mm-yyyy`格式读取。
我试过使用——

```
String txtdate =CmFrm.getExpireDate(); 
SimpleDateFormat pd = new SimpleDateFormat("dd/MM/yyyy");  
SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd"); 
Date date = (Date) pd.parse(txtdate); 
String DisplayDate= df.format(date); 
System.out.println("MyExpireDate.."+DisplayDate); 
```

我得到`unparsable`错误。

我已经单独应用了格式功能 -

```
String txtdate =CmFrm.getExpireDate(); 
SimpleDateFormat df = new SimpleDateFormat("dd/MM/yyyy");  
System.out.println("Date.."+df.format(txtdate)); 
```

这里 jsp 去`blank`。
请帮助如何在.jsp中显示日期`dd-mm-yyyy`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:36:33.150

应该对你好...

```
String MyDate = CmFrm.getExpireDate();
SimpleDateFormat parseDate = new java.text.SimpleDateFormat("dd/MM/yyyy");
SimpleDateFormat formatDdate = new java.text.SimpleDateFormat("yyyy-MM-dd");
Date date = (Date) parseDate.parse(MyDate);
String DisplayDate= formatDate.format(date); 
```

输出示例：2016-11-19

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:38:10.840

我尝试了您的第一个代码，但没有任何异常：

```
String txtdate = "06/06/2012"; 
SimpleDateFormat pd = new SimpleDateFormat("dd/MM/yyyy"); 
SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd"); 

Date date = null;
try {
    date = (Date) pd.parse(txtdate);
} catch (ParseException e) {
    e.printStackTrace();
} 

String DisplayDate= df.format(date); 
System.out.println("MyExpireDate.."+DisplayDate); 
```

当我执行以下操作时，我得到：

```
MyExpireDate..2012-06-06 
```

也许您导入了错误的日期库？我进口了这些：

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date; 
```

# facebook - facebook 应用程序（sinatra/heroku）：访问 localhost 重定向到生产环境

> ID：10736638
> 
> 赞同：0
> 
> 时间：2012-05-24T11:31:21.187
> 
> 标签：facebook, facebook-graph-api, heroku, sinatra

我有一个在 heroku 上运行的 sinatra 应用程序。

我的问题：当我转到本地主机 (http://localhost:5000/) 时，我总是被重定向到生产环境 (https://apps.facebook.com/myapp/)。所以我不能再在本地开发了。

我怀疑我添加的自定义谷歌分析与它有关，见下文（来源：. [http://www.savio.no/blogg/a/104/how-to-track-facebook-iframes-with-谷歌分析](http://www.savio.no/blogg/a/104/how-to-track-facebook-iframes-with-google-analytics)）。它

```
<script type="text/javascript">
// This script is provided AS IS without warranty of any kind.
// See http://www.savio.no/blogg/a/104/ for more information.
// Smacked together by Eivind Savio May 2011

var FacebookURL = 'http://www.facebook.com/YourFacebookPage?sk=app_123456789';

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXXX-X']);
_gaq.push(['_addIgnoredRef', 'static.ak.facebook.com']);

// If Google Analytics is loaded and this page isn't framed inside our Facebook URL, frame the page.
if (_gaq.push && self.location == top.location) {
// Create a fake URL that we can filter in Google Analytics. This pageview also sends the traffic source data to Google Analytics.
_gaq.push(['_trackPageview','/facebook/campaign-tracking/']);
// Tracking done, let's frame the page
setTimeout(top.location.href = FacebookURL, 200);
} else if (self.location == top.location) {
// If Google Analytics doesn't load within 2 seconds, refresh and frame the page anyway. People dislike waiting. Change the time if you like.
setTimeout(top.location.href = FacebookURL, 2000);
} else {
// The Page is Framed. Let's track it.
_gaq.push(['_trackPageview']);
_gaq.push(['_trackPageLoadTime']);
}

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script> 
```

所以我删除了它，但 heroku 仍然使用它，请参见下面的网络控制台输出第 3 行。这里发生了什么，它是一个没有被删除的缓存吗？有任何想法吗？

```
[13:12:16.817] GET http://localhost:5000/ [HTTP/1.1 200 OK 395ms]
[13:12:17.330] GET https://apps.facebook.com/myapp/ [HTTP/1.1 200 OK 782ms]
[13:12:17.357] GET http://www.google-analytics.com/__utm.gif?xxxxxxxxxxxxxxxx [HTTP/1.1 200 OK 14ms]
[13:12:17.500] syntax error @ http://localhost:5000/:108
[13:12:18.326] POST https://xxxx.herokuapp.com/ [HTTP/1.1 302 Moved Temporarily 952ms]
[13:12:19.200] GET https://xxxx.herokuapp.com/ [HTTP/1.1 200 OK 734ms]
[13:12:19.827] GET https://xxxx.herokuapp.com/stylesheets/screen.css [HTTP/1.1 200 OK 262ms]
[13:12:19.829] GET https://xxxx.herokuapp.com/stylesheets/mobile.css [HTTP/1.1 200 OK 398ms]
[13:12:19.831] GET https://xxxx.herokuapp.com/javascripts/jquery-1.7.1.min.js [HTTP/1.1 200 OK 1032ms]
[13:12:20.093] GET https://xxxx.herokuapp.com/stylesheets/reset.css [HTTP/1.1 200 OK 135ms]
[13:12:20.096] GET https://xxxx.herokuapp.com/stylesheets/base.css [HTTP/1.1 200 OK 263ms]
[13:12:21.026] GET https://xxxx.herokuapp.com/images/house_suburb.jpg [HTTP/1.1 200 OK 308ms]
[13:12:21.051] GET https://xxxx.herokuapp.com/images/logo.png [HTTP/1.1 200 OK 295ms]
[13:12:21.109] GET https://www.facebook.com/dialog/oauth?api_key=xxxxxxxxxxxxxxxxcode&sdk=joey [HTTP/1.1 302 Found 192ms] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T00:07:21.310

问题源于此：

```
} else if (self.location == top.location) {
// If Google Analytics doesn't load within 2 seconds, refresh and frame the page anyway. People dislike waiting. Change the time if you like.
setTimeout(top.location.href = FacebookURL, 2000);
} 
```

基本上你是说“如果页面没有框架，重定向到 FacebookURL”

# jquery - 如何接近这个项目？

> ID：10736644
> 
> 赞同：0
> 
> 时间：2012-05-24T11:31:31.327
> 
> 标签：jquery, slider, accordion

我最近一直在学习 jQuery，虽然我可以完成大部分我想做的事情，但我知道我可能会浪费一行行代码并且更新过于复杂，我想这是自学过程的一部分，因为它有我自己学到的一切都发生在我身上，随着时间的推移我可以优化我的工作，但起初我创造了丑陋的东西并浪费了很多时间。

问题是我不是在这里要求代码片段，我想我可以自己弄清楚，我想，作为我学习过程的一个步骤，我只想知道如何处理我想到的这个小项目所以我可以开始建立一个 jQuery 编码器的心态。

我有一个 100% 屏幕宽度的包装器，在该包装器内，隐藏了溢出的滑块，然后在滑块内有许多 250*150 框。

每当您单击这些框中的每一个时，它都会打开显示内容并关闭先前打开的框，这很像带有一点扭曲的手风琴系统。

扭曲的是打开的框将始终位于左侧 = 250px 的位置，因此，如果您单击框 3，它会将滑块向左移动：-500px。

现在，我可以做到，但问题是我这样做的方式，更新将是一场噩梦，所以这里的问题是：你将如何处理这个项目？

我假设你会先创建一些变量吗？也许可以确定它是封闭的还是开放的？为每个 div 编号，以便在为左侧位置设置动画时将其乘以 250？使用子选择器和什么不？

希望有人可以在这里帮助我，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:21:03.610

我会让它只使用[CSS3](http://www.cssplay.co.uk/menus/cssplay-horizontal-accordian.html)工作，然后使用 jQuery 在旧浏览器中模拟 CSS3。在现代浏览器中，jQuery 并不总是必需的，尤其是如果默认情况下可以使用 CSS 将内容隐藏在标记中，而不是从 JavaScript 数据结构生成。

# .net - ActiveBatch ExecutePowerShellScript 将字节数组转换为字符串

> ID：10736646
> 
> 赞同：2
> 
> 时间：2012-05-24T11:31:42.420
> 
> 标签：.net, powershell, encoding, bytearray

我正在尝试使用 ActiveBatch **ExecutePowerShellScript**作业步骤将 a 转换`System.Byte[]`为字符串。ActiveBatch 作业步骤有一个属性来指定`InputObjects`，我将其设置为上一个作业步骤的输出（这只是作业步骤编辑器中的一个字段，而不是 PowerShell 代码）。然后您显然可以访问`$input`在 PowerShell 脚本中调用的变量。

只需`$input`我得到一个转换为整数的字节列表。我得到`$input | gm`：

```
There are 25 output objects generated by the Powershell script

   TypeName: System.Byte[]

Name           MemberType    Definition                                         
----           ----------    ----------                                         
Count          AliasProperty Count = Length     
Address        Method        System.Byte&, mscorlib, Version=2.0.0.0, Culture... 
```

如果我尝试`[System.Text.Encoding]::Unicode.GetString($input)`，我会得到：

> 执行 PowerShell 脚本时发生异常：找不到“GetString”的重载和参数计数：“1”。

如果我尝试`[System.Text.Encoding]::Unicode.GetString(,$input)`，我会得到：

> 执行 PowerShell 脚本时出现异常：方法调用中缺少“)”。

如果我尝试：

```
[byte[]]$bytes = $input
[System.Text.Encoding]::Unicode.GetString($bytes) 
```

我得到：

> 执行 PowerShell 脚本时出现异常：无法将“System.Management.Automation.Runspaces.PipelineReader `1+<GetReadEnumerator>d__0[System.Object]" value of type "System.Management.Automation.Runspaces.PipelineReader`1+d__0[[System.Object, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]”转换为“System.Management.Automation.Runspaces.PipelineReader 1+d__0 。字节[]”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T14:09:48.600

```
$bytes = $input | Select-Object
[System.Text.Encoding]::ASCII.GetString($bytes) 
```

显然你必须使用`Select-Object`，并且字节数组是以 ASCII 而不是 unicode 的形式出现的。

# android - 从 Android Spinner 中选择项目并使用它

> ID：10736649
> 
> 赞同：0
> 
> 时间：2012-05-24T11:31:48.977
> 
> 标签：android, spinner, datamapper

我有一个从枚举填充的微调器：

```
public enum Frequencies
    {
    EVERYDAY("Every day"), EVERYOTHERDAY("Every second day");

    private String friendlyName;

    private Frequencies(String friendlyName)
    {
        this.friendlyName = friendlyName;
    }

    @Override public String toString()
    {
        return friendlyName;
    }
    }; 
```

`toString()`覆盖意味着微调器显示用户友好的名称。

微调器的填充方式如下：

```
 ArrayAdapter<Frequencies> adapter = new ArrayAdapter<Frequencies>(this, android.R.layout.simple_spinner_item, 
            Frequencies.values());
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    newAlarmFreqSpinner.setAdapter(adapter); 
```

所有这一切都运作良好。当用户从微调器中选择频率时，我想使用该值设置一个值来表示一个简单对象`long`中警报之间的间隔。`Alarm`因此，“每天”的值将是一天中的秒数。

但是，我无法完全理解如何优雅地处理从微调器中检索到的频率对象。我最初的想法是使用`switch`语句来打开显示的字符串以确定我需要的长值，但当然你不能`switch`在字符串上。

然后我尝试修改频率枚举，以便每个条目都存储自己的长值：

```
 EVERYDAY("Every day", 86400), EVERYOTHERDAY("Every second day", 86400 * 2);

private String friendlyName;
public final int intervalInSecs;

private Frequencies(String friendlyName, int intervalInSecs)
{
    this.friendlyName = friendlyName;
    this.intervalInSecs = intervalInSecs;
}... 
```

但是开关然后抱怨“案例表达式必须是常量表达式”（即使我已经做了`intervalInSecs final`）：

```
 Object obj = newAlarmFreqSpinner.getSelectedItem();
    switch(((Frequencies)obj).getIntervalInSecs())
{
    case Frequencies.EVERYDAY.intervalInSecs: //Java doesn't like this
    {

        break;
    }... 
```

我敢肯定，我让这件事变得比实际更难！我会很感激任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:46:39.107

那么基本上枚举类型有它的关联间隔。所以不需要开启区间，开启枚举类型即可：

```
Object obj = newAlarmFreqSpinner.getSelectedItem();
switch((Frequencies)obj) {
case Frequencies.EVERYDAY {
    alarm.setInterval(EVERYDAY.getIntervalInSecs());
    break;
}... 
```

# mysql - 连接表上的 MySQL 查询条件

> ID：10736652
> 
> 赞同：0
> 
> 时间：2012-05-24T11:31:50.150
> 
> 标签：mysql, wordpress, where-clause

我有以下 MySQL 查询（查询 wordpress db）：

```
SELECT wp_posts.ID, wp_posts.post_date, wp_posts.post_content, wp_posts.post_title, wp_terms.name, wp_term_taxonomy.taxonomy
FROM wp_posts
LEFT JOIN wp_term_relationships ON ( wp_term_relationships.object_id = wp_posts.ID ) 
LEFT JOIN wp_term_taxonomy ON ( wp_term_taxonomy.term_taxonomy_id = wp_term_relationships.term_taxonomy_id )
LEFT JOIN wp_terms ON ( wp_terms.term_id = wp_term_taxonomy.term_id) 
WHERE 1=1
AND wp_terms.name != 'MyTagName'
AND wp_posts.post_type = 'post'
AND (wp_posts.post_status = 'publish')
ORDER BY wp_posts.post_date DESC 
LIMIT 100 
```

我基本上是在尝试停止所有返回带有标签（db table wp_terms）'MyTagName'的'wp_posts'。但是以上似乎所做的就是从返回的行中删除该标签名称，将 wp_post 条目与它所标记的其他标签条目留在其中。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:39:23.180

```
SELECT wp_posts.ID, wp_posts.post_date, wp_posts.post_content, wp_posts.post_title, wp_terms.name, wp_term_taxonomy.taxonomy
FROM wp_posts
JOIN wp_term_relationships ON wp_term_relationships.object_id = wp_posts.ID
JOIN wp_term_taxonomy ON wp_term_taxonomy.term_taxonomy_id = wp_term_relationships.term_taxonomy_id
JOIN wp_terms ON wp_terms.term_id = wp_term_taxonomy.term_id
WHERE NOT EXISTS (
    SELECT 1
    FROM wp_term_relationships
    JOIN wp_term_taxonomy ON wp_term_taxonomy.term_taxonomy_id = wp_term_relationships.term_taxonomy_id
    JOIN wp_terms ON wp_terms.term_id = wp_term_taxonomy.term_id
    WHERE wp_term_relationships.object_id = wp_posts.ID
        AND wp_terms.name = 'MyTagName'
    )
    AND wp_posts.post_type = 'post'
    AND wp_posts.post_status = 'publish'
ORDER BY wp_posts.post_date DESC 
LIMIT 100 
```

问题是您当前的解决方案没有检查与帖子相关的所有 wp_terms，而只是检查特定的。如果有 5 个术语，其中一个是“MyTagName”，则该单个术语将被排除，但其他 4 个仍将被加入。

现在关于：

```
AND wp_posts.post_type = 'post'
AND wp_posts.post_status = 'publish' 
```

您不需要将它们放在大的 NOT EXISTS 检查中，因为如果其中任何一个为假，则无论如何都不会收到该帖子。

# javascript - Google Map API v3 - 标记中心地图

> ID：10736653
> 
> 赞同：2
> 
> 时间：2012-05-24T11:31:52.130
> 
> 标签：javascript, google-maps, google-maps-api-3, maps

我最近开始使用 Google Maps API v3。

我需要绘制一些位置（可能是 3 个或 4 个），同时将地图集中在这些点上 - 而不是手动设置地图的经度和纬度以使其居中......

有人可以分享一些提示，或者指出我正确的方向吗？

提前致谢！担

```
function initialize() {
      var latlng = new google.maps.LatLng(51.50816, 0.02712);
      var myOptions = {
        zoom: 12,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      };
      var firstmap = new google.maps.Map(document.getElementById("map"),myOptions);
      //EVENT MARKER
      var point = new google.maps.LatLng(51.50816, 0.02712);
      var marker = new google.maps.Marker({
        position:point,
        map:firstmap,
        title: 'ExCel London',
        draggable:false,
        icon:'images/event.png'
      })
      var contentstring = '<div>Hello World</div>'
      var infoWindow = new google.maps.InfoWindow({
        content:contentstring
      });
      //HOTEL 1 MARKER
      var point = new google.maps.LatLng(51.503146, -0.113259);
      var marker = new google.maps.Marker({
        position:point,
        map:firstmap,
        title: 'Waterloo Hotel',
        draggable:false,
        icon:'images/flag.png'
      })
      var contentstring = '<div>Hello World</div>';
      var infoWindow = new google.maps.InfoWindow({
          content:contentstring
      });
      google.maps.event.addListener(marker,'click',function(){
          infoWindow.open(firstmap,marker);
      })
    }; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T11:38:58.103

您需要将标记保存在数组中，然后使用功能中心：

```
function autoCenter(){
    var limits = new google.maps.LatLngBounds();
    $.each(arrayMarkers, function (index, marker){
        limits.extend(marker.position);
    });
    map.fitBounds(limits);
} 
```

# apache - 将代理设置从 Nginx conf 文件重写为 Apache conf 文件

> ID：10736656
> 
> 赞同：0
> 
> 时间：2012-05-24T11:32:01.623
> 
> 标签：apache, proxy, nginx

我试图在互联网上找到解决方案，但没有成功。我需要将 nginx 代理 conf 命令重写为 apache 命令。我需要将以“login”和“logedas_”开头的站点发送到同一服务器上的端口 81。

Nginx 配置文件

```
 location = /login {
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_pass http://127.0.0.1:81 ;
    }

    location /logedas_ {
        access_log off ;
        proxy_pass http://127.0.0.1:81 ;
    } 
```

我刚刚将它写入我的 apache conf 文件，但它不起作用：/

```
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_http_module modules/mod_proxy_http.so
<Proxy *>

Allow from all
</Proxy>

ProxyRequests Off

ProxyPass /login http://127.0.0.1:81
ProxyPassReverse /login http://127.0.0.1:81
ProxyPass /logedas_ http://127.0.0.1:81
ProxyPassReverse /logedas_ http://127.0.0.1:81 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:47:11.680

在 Apache 配置中，ProxyPass 不支持您在 nginx 配置中使用的特殊情况，因此您应该使用：

```
ProxyPass /login http://127.0.0.1:81/login 
```

和

```
ProxyPass /logindas_ http://127.0.0.1:81/logindas_ 
```

反而。

# ios - iOS 应用程序 ExternalHosts

> ID：10736661
> 
> 赞同：0
> 
> 时间：2012-05-24T11:32:12.770
> 
> 标签：ios, cordova

我正在使用 phonegap/cordova (1.7.0) 开发一个应用程序，我不知道如何使我的应用程序使用比`*`. 如果我尝试设置`www.mywebservicedomain.com`或`*.mywebservicedomain.com`它无法再检索数据。我看到很多关于这个的问题，一般的答案就是 set `*`。如果可能的话，我想了解如何限制更多。

预先感谢您的努力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:14:44.497

这确实是可能的。但请注意，服务器上的重定向可能会导致连接到您还必须指定的不同域。幸运的是，这些受限访问出现在 xcode 的调试日志中。在模拟器或 xcode 中的设备上运行项目，然后您将看到对哪些服务器的哪些请求被阻止。

在 cordova.plist 中它应该是这样的：

```
<key>ExternalHosts</key>
<array>
    <string>*.googleapis.com</string>
    <string>*.gstatic.com</string>
</array> 
```

我在我的项目中使用了谷歌地图，它使用了所描述的重定向。因此我不得不添加`gstatic`虽然我的请求最初指向`maps.googleapis.com`（我使用cordova 1.7）。

# c# - Removing words with special characters in them

> ID：10736663
> 
> 赞同：1
> 
> 时间：2012-05-24T11:32:27.887
> 
> 标签：c#, regex, string

I have a long string composed of a number of different words.

I want to go through all of them, and if the word contains a special character or number (except '-'), or starts with a Capital letter, I want to delete it (the whole word not just that character). For all intents and purposes 'foreign' letters can count as special characters.

The obvious solution is to run a loop through each word (after splitting it) and then a loop through each character - but I'm hoping there's a faster way of doing it? Perhaps using Regex but I've almost no experience with it.

Thanks

ADDED:

(What I want for example:)

Input: "this Is an Example of 5 words in an input like-so from example.com"

Output: {this,an,of,words,in,an,input,like-so,from}

(What I've tried so far)

```
List<string> response = new List<string>();

string[] splitString = text.Split(' ');

foreach (string s in splitString)
{
    bool add = true;
    foreach (char c in s.ToCharArray())
    {
         if (!(c.Equals('-') || (Char.IsLetter(c) && Char.IsLower(c))))
         {
             add = false;
             break;
         }
         if (add)
         {
             response.Add(s);
         }
    }
} 
```

Edit 2:

For me a word should be a number of characters (a..z) seperated by a space. ,/./!/... at the end shouldn't count for the 'special character' condition (which is really mostly just to remove urls or the like)

So: "I saw a dog. It was black!" should result in {saw,a,dog,was,black}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:54:55.840

因此，您想查找所有仅包含字符的“单词”`a-z`或`-`, 以空格分隔的单词？

像这样的正则表达式会找到这样的词：

```
(?<!\S)[a-z-]+(?!\S) 
```

为了还允许以单个标点符号结尾的单词，您可以使用：

```
(?<!\S)[a-z-]+(?=[,.!?:;]?(?!\S)) 
```

# 示例（[ideone](http://ideone.com/BA5hX)）：

```
var re = @"(?<!\S)[a-z-]+(?=[,.!?:;]?(?!\S))";
var str = "this, Is an! Example of 5 words in an input like-so from example.com foo: bar?";

var m = Regex.Matches(str, re);

Console.WriteLine("Matched: ");
foreach (Match i in m)
    Console.Write(i + " "); 
```

注意字符串中的标点符号。

输出：

```
Matched: 
this an of words in an input like-so from foo bar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T12:01:10.260

这个怎么样？

(?<=^|\s+)(?[az-]+)(?=$|\s+)

编辑：意思`(?<=^|\s+)(?<word>[a-z\-]+)(?=(?:\.|,|!|\.\.\.)?(?:$|\s+))`

规则：

1.  Word 只能以行首或一定数量的空白字符开头
2.  单词后面只能跟行尾或一定数量的空白字符（Edit 支持以句点、逗号、感叹号和省略号结尾的单词）
3.  Word 只能包含小写（拉丁）字母和破折号

包含每个单词的命名组是“word”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T11:42:33.897

看看微软的[如何：使用正则表达式搜索字符串（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms228595%28v=vs.80%29.aspx) ——它是关于 C# 中的正则表达式的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T11:57:32.337

您可以通过两种方式做到这一点，白名单方式和黑名单方式。使用白名单，您可以定义您认为可以接受的字符集，而使用黑名单则相反。

让我们假设白名单方式，并且您只接受 characters和`a-z`character . 此外，您有规则，单词的第一个字符不能是大写字符。`A-Z``-`

有了这个，你可以做这样的事情：

```
string target = "This is a white-list example: (Foo, bar1)";

var matches = Regex.Matches(target, @"(?:\b)(?<Word>[a-z]{1}[a-zA-Z\-]*)(?:\b)");

string[] words = matches.Cast<Match>().Select(m => m.Value).ToArray();

Console.WriteLine(string.Join(", ", words)); 
```

输出：

```
// is, a, white-list, example 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T11:56:35.350

```
List<string> strings = new List<string>() {"asdf", "sdf-sd", "sdfsdf"};

for (int i = strings.Count-1; i > 0; i--)
{
   if (strings[i].Contains("-"))
   {
       strings.Remove(strings[i]);
   }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-24T11:56:40.857

这可能是一个起点。现在它只检查“。” 作为一个特殊的字符。这输出：“this an of words in an like-so from”

```
 string pattern = @"[A-Z]\w+|\w*[0-9]+\w*|\w*[\.]+\w*";
        string line = "this Is an Example of 5 words in an in3put like-so from example.com";

        System.Text.RegularExpressions.Regex r = new System.Text.RegularExpressions.Regex(pattern);
        line = r.Replace(line,""); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-24T12:03:26.100

您可以使用前瞻和后瞻来执行此操作。这是一个与您的示例匹配的正则表达式：

```
(?<=\s|^)[a-z-]+(?=\s|$) 
```

解释是：匹配一个或多个字母字符（仅小写，加上连字符），只要字符之前是空格（或字符串的开头），只要后面是空格或结尾字符串。

您现在需要做的就是将其插入`System.Text.RegularExpressions.Regex.Matches(input, regexString)`以获取您的单词列表。

参考： http: [//www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet](http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet)

# google-maps - Load KML file into Google maps API

> ID：10736664
> 
> 赞同：1
> 
> 时间：2012-05-24T11:32:29.330
> 
> 标签：google-maps, google-maps-api-3, kml, google-earth

I downloaded a KML file and tried to load it into my project, which uses the Google maps API.

When I load this KML I don't see any results. Other KML files work.

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>Google Maps JavaScript API v3 Example: KmlLayer KML</title>
<link href="/maps/documentation/javascript/examples/default.css" rel="stylesheet"      type="text/css" />
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?     sensor=false"></script>
<script type="text/javascript"   src="http://geoxml3.googlecode.com/svn/branches/polys/geoxml3.js"></script>
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map_canvas { height: 100% }
</style>

<script type="text/javascript">
function initialize() {
var chicago = new google.maps.LatLng(41.875696,-87.624207);
var myOptions = {
zoom: 2,
center: chicago,
mapTypeId: google.maps.MapTypeId.ROADMAP }
var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
   var geoXml = new geoXML3.parser({map: map, singleInfoWindow: true});
   geoXml.parse('doc2.kml'); }
</script>
</head>
<body onload="initialize()">
 <div id="map_canvas"></div>
</body>
</html> 
```

Here's the KML file. I think they look different from the other KML files I found.

```
 <?xml version="1.0" encoding="UTF-8"?>
    <kml xmlns="http://earth.google.com/kml/2.0">
    <Document>
    <name>Continents.kmz</name>
    <Style id="khStyle646">
    <LineStyle id="khLineStyle649">
    <antialias>0</antialias>
    </LineStyle>
    <PolyStyle id="khPolyStyle648">
      <fill>0</fill>
      <outline>0</outline>
    </PolyStyle>
    <IconStyle id="khIconStyle650">
      <Icon>
        <href>root://icons/palette-3.png</href>
        <x>160</x>
        <y>128</y>
        <w>32</w>
        <h>32</h>
      </Icon>
    </IconStyle>
    </Style>
    <Style id="khStyle653">
    <LineStyle id="khLineStyle656">
      <antialias>0</antialias>
    </LineStyle>
    <PolyStyle id="khPolyStyle655">
      <fill>0</fill>
      <outline>0</outline>
    </PolyStyle>
    <IconStyle id="khIconStyle657">
      <Icon>
        <href>root://icons/palette-3.png</href>
        <x>96</x>
        <y>160</y>
        <w>32</w>
        <h>32</h>
      </Icon>
    </IconStyle>
    </Style>
    <Folder>
    <description>All information from www.wikipedia.org</description>
    <name>Continents</name>
    <Placemark>
      <LookAt>
        <longitude>69.34975938772639</longitude>
        <latitude>-85.51850370658478</latitude>
        <range>4660494.527334587</range>
        <tilt>1.489515791197339</tilt>
        <heading>-94.23630609027376</heading>
      </LookAt>
      <styleUrl>#khStyle653</styleUrl>
      <Point>
        <coordinates>80.29122647597791,-85.36965069939549,0</coordinates>
      </Point>
    </Placemark>
    <Placemark>
      <name>North America</name>
      <LookAt>
        <longitude>-92.38030591736974</longitude>
        <latitude>41.60040029662515</latitude>
        <range>6572383.886462871</range>
        <tilt>1.489515791197389</tilt>
        <heading>5.091613582461503</heading>
      </LookAt>
      <styleUrl>#khStyle653</styleUrl>
      <Point>
        <coordinates>-98.11233984563178,45.32023029701742,0</coordinates>
      </Point>
    </Placemark>
    <Placemark>
          <name>South America</name>
      <LookAt>
        <longitude>-62.99013711154147</longitude>
        <latitude>-21.48589474193573</latitude>
        <range>7218561.25099345</range>
        <tilt>1.489515791197348</tilt>
        <heading>14.48258802805428</heading>
      </LookAt>
      <styleUrl>#khStyle653</styleUrl>
      <Point>
        <coordinates>-58.60850163074399,-15.26868557309036,0</coordinates>
      </Point>
    </Placemark>
    <Placemark>
      <description>The primary use of the term Oceania is to describe a continental region (like Europe or Africa) that lies between Asia and the Americas, with Australia as the major land mass. The name Oceania is used, rather than Australia, because unlike the other continental groupings, it is the ocean rather than the continent that links the nations together. Oceania is the smallest continental grouping in land area and the second smallest, after Antarctica, in population.</description>
      <name>Australasia / Oceania</name>
      <LookAt>
        <longitude>149.9280610479762</longitude>
        <latitude>-19.96203640214011</latitude>
        <range>5948094.214726813</range>
        <tilt>1.489515791197347</tilt>
        <heading>-3.233441994279863</heading>
      </LookAt>
      <styleUrl>#khStyle653</styleUrl>
      <Point>
        <coordinates>153.0281098590235,-19.81023956617555,0</coordinates>
      </Point>
    </Placemark>
    <Placemark>
      <name>Europe</name>
      <LookAt>
        <longitude>13.36662252078061</longitude>
        <latitude>47.49923408453745</latitude>
        <range>2926553.150350343</range>
        <tilt>1.489515791197361</tilt>
        <heading>5.315432286214211</heading>
      </LookAt>
      <styleUrl>#khStyle653</styleUrl>
      <Point>
        <coordinates>7.703642655915047,48.19165017141015,0</coordinates>
      </Point>
    </Placemark>
    <Placemark>
      <name>Asia</name>
      <LookAt>
        <longitude>88.44296071080763</longitude>
        <latitude>29.02076366275569</latitude>
        <range>5948094.214726811</range>
        <tilt>1.489515791197341</tilt>
        <heading>4.339173834203948</heading>
      </LookAt>
      <styleUrl>#khStyle653</styleUrl>
      <Point>
        <coordinates>88.87769612972068,35.90237786706015,0</coordinates>
      </Point>
    </Placemark>
    <Placemark>
         <name>Africa</name>
      <LookAt>
        <longitude>20.16987332895207</longitude>
        <latitude>1.368208952904757</latitude>
        <range>8150113.588222869</range>
        <tilt>1.489515791197357</tilt>
        <heading>-4.536422889821256</heading>
      </LookAt>
      <styleUrl>#khStyle646</styleUrl>
      <Style>
        <IconStyle>
          <Icon>
            <href>root://icons/palette-3.png</href>
            <x>96</x>
            <y>160</y>
            <w>32</w>
            <h>32</h>
          </Icon>
        </IconStyle>
      </Style>
      <Point>
        <coordinates>21.06451559663505,6.103658771972451,0</coordinates>
      </Point>
    </Placemark>
  </Folder>
</Document>
</kml> 
```

I think that the file is relevant for Google Earth. Is it possible to convert it to Google maps KML? Could you please advise me why it is not working ?

Regards,

Yossi

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:38:15.960

所以你的 KML 文件已经过时了。查看命名空间，它是一个 KML 2.0 文件，它从来都不是一个真正的编纂规范。KML 2.1 是最早的版本，KML 2.2 是当前版本。所以有很多元素不受支持，例如抗锯齿和 x,y 等。另外一些元素是乱序的。您可以尝试根据架构验证它：http: [//schemas.opengis.net/kml/2.2.0/ogckml22.xsd](http://schemas.opengis.net/kml/2.2.0/ogckml22.xsd)

这将使您了解哪些元素不受支持，哪些元素出现故障。你可以使用像 Oxygen 这样的验证器，它可以免费试用。

此外，您使用的是开源项目 geoxml3，而不是使用 Google 的 KML 地图渲染器 KmlLayer。所以你也可以向 geoxml3 的人寻求帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:48:34.400

也许此链接可以帮助您，不支持 kml 上的某些元素：

[https://developers.google.com/kml/documentation/kmlelementsinmaps](https://developers.google.com/kml/documentation/kmlelementsinmaps)

# dependency-injection - How far to go with IoC

> ID：10736665
> 
> 赞同：3
> 
> 时间：2012-05-24T11:32:29.517
> 
> 标签：dependency-injection, inversion-of-control

I was wondering how far I should take my IoC implementation in terms of loosely coupling my application. I am using constructor injection in my MVC controller but wondered if I should also be resolving all my other dependencies in the controller instead of newing up objects. For example if I was to create a new User object within a controller method would I use?

```
var user = new User();
var user = myContainer.Resolve<IUser>(); 
```

I like the idea of breaking my dependency on User but is that going too far and could possible make my code harder to read?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T19:07:21.093

这是一个非常好的问题，当您阅读和听说 DI 时，这是有道理的，这是下一个自然结论。

首先史蒂文的观点是正确的，你不应该传递容器。如果您需要即时构建 IUser 并且它需要是抽象的，那么您应该注入一个抽象工厂。

塞巴斯蒂安还发布了一个很好的链接。

[实际上，我在此处](https://stackoverflow.com/questions/10313507/dependency-injection-and-development-productivity/10314738#10314738)发布的答案中对此进行了描述。

帖子底部：

并非每个对象和依赖项都需要或应该被依赖注入，首先考虑您正在使用的内容是否实际上被视为依赖项：

什么是依赖项？

```
Application Configuration
System Resources (Clock)
Third Party Libraries
Database
WCF/Network Services
External Systems (File/Email) 
```

上述任何对象或合作者都可能超出您的控制范围，并导致副作用和行为差异，并使其难以测试。现在是考虑抽象（类/接口）和使用 DI 的时候了。

什么不是依赖项，真的不需要 DI？

```
List
MemoryStream
Strings/Primitives
Leaf Objects/Dto's 
```

因此，在您的特定情况下，它实际上取决于构造 IUser 时会发生什么，以及您是否真的需要用不同的实现来替换它。如果不是这种情况，并且用户只有简单的类型，没有外部依赖或副作用，只需新建它。

考虑一下调用 new User() 时会发生什么，看看下图，如果它导致创建其他对象并且看起来像下图中的某些东西，请考虑 IoC。

级联依赖对象图：

![依赖图](../Images/5f9818c6f90c1c4624c6921b9259898e.png)

在这个例子中，对象上的 new 要么需要要么创建一大堆其他依赖项。这些依赖项是什么或做什么很可能是您无法控制的。

当您的对象是一个简单的 dto 时，它不会遇到这个问题，并且 IoC 可能不需要那么多。

# c - Opencv CV ColorHSV error

> ID：10736667
> 
> 赞同：0
> 
> 时间：2012-05-24T11:32:31.793
> 
> 标签：c, xcode, opencv, artoolkit

can anyone tell me why i am getting this error? ![enter image description here](../Images/e578bf5694ab50194b09e3ca7ab9b2c5.png)

because of that I'm getting this error too ![enter image description here](../Images/a1f01bf47772c9289f69a72cc320148d.png)

Trying to integrate opencv with artoolkit

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:01:12.323

鲁本，我们在 Tweeter 上讨论过这个问题。这是一个**编译错误**，告诉您**它不知道什么`colorHSV`是**.

查看您的代码和错误消息，我可以看出这`colorHSV`是一个应该在您的代码或您正在使用的第 3 方库之一中定义的**类。**

我做了一些研究，发现一个[与你的代码非常相似](http://se.cs.ait.ac.th/cvwiki/opencv%3atutorial%3aintegrate_opencv_and_artoolkit)的代码。显然，`colorHSV`是开发人员使用的自定义数据类型，但该页面并未提供应用程序的完整源代码，只是到处提供一些片段来提供指导。换句话说，该帖子中缺少很多代码。

**然而**，他们确实提到了使用一种名为**Occlusion**的增强现实技术。更多的研究向我展示了[ait-occlusion](http://code.google.com/p/ait-occlusion/)，它[实现了一个`colorHSV`](http://ait-occlusion.googlecode.com/svn/trunk/Occlusion/Occlusion/ColorHSV.h). **这似乎与您在代码中使用的类型相同。**

如果你还没有弄清楚，你需要：

*   **在您的系统上**下载/编译/安装 Occlusion ，****
***   添加适当`#include`的 for `ColorHSV.h`,*   最后调整您的项目属性以将您的应用程序与此库链接。**

 **如果您对这些程序中的任何一个有任何疑问，请使用[Google 搜索](https://www.google.com)。**

# sql - In TSQL, how to check a string include "a" followed by "b", and "b" not followed by "c"?

> ID：10736668
> 
> 赞同：0
> 
> 时间：2012-05-24T11:32:39.703
> 
> 标签：sql, sql-server, string, tsql

In TSQL, how to check a string include "a" followed by "b", and "b" not followed by "c"? For example, these strings is what I want:

```
ab
cab
acb 
```

This is not what I want: abc

Note that you can insert any number of characters between the characters in the example(but not break my rule described above).

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T11:36:57.623

使用 SQL 通配符`%`定义字符串中的任何字符（一个或多个），然后将其与`LIKE`运算符组合：

```
WHERE txtcol LIKE '%a%b%' AND txtcol NOT LIKE '%b%c%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:18:22.873

我会这样做没有类似的：

```
where charindex('a', string) < charindex('b', string) and
      charindex('c', string) < charindex('b', string) 
```

如果你需要角色在那里，那么包括：

```
where charindex('a', string) < charindex('b', string) and
      charindex('c', string) < charindex('b', string) and
      charindex('a', string) > 0 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-24T11:35:11.193

```
col1 like '%ab%' and col1 not like '%abc%' 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-24T11:35:01.387

尝试这个：

```
WHERE string LIKE '%ab%' AND string NOT Like '%bc%' 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-05-24T12:58:32.713

尝试这个：

> 字符字母 = 'c';
> 
> if (字母 == 'z') nextChar = 'a'; 否则 if (letter == 'Z') nextChar = 'A';
> 
> 否则 nextChar = (char)((((整数)字母) + 1);

# python - Python missing __exit__ method

> ID：10736671
> 
> 赞同：6
> 
> 时间：2012-05-24T11:32:51.850
> 
> 标签：python

Some background: I work in a large bank and I'm trying to re-use some Python modules, which I cannot change, only import. I also don't have the option of installing any new utilities/functions etc (running Python 2.6 on Linux).

I've got this at present:

In my module:

```
from common.databaseHelper import BacktestingDatabaseHelper

class mfReportProcess(testingResource):
    def __init__(self):
        self.db = BacktestingDatabaseHelper.fromConfig('db_name') 
```

One of the methods called within the 'testingResource' class has this:

```
 with self.db as handler: 
```

which falls over with this:

```
with self.db as handler:
AttributeError: 'BacktestingDatabaseHelper' object has no attribute '__exit__' 
```

and, indeed, there is no `__exit__` method in the 'BacktestingDatabaseHelper' class, a class which I cannot change.

However, this code I'm trying to re-use works perfectly well for other apps - does anyone know why I get this error and no-one else? Is there some way of defining `__exit__` locally?

Many thanks in advance.

EDITED to add:

I've tried to add my own class to setup DB access but can't get it to work - added this to my module:

```
class myDB(BacktestingDatabaseHelper): 
    def __enter__(self): 
        self.db = fromConfig('db_name') 
    def __exit__(self): 
        self.db.close() 
```

and added:

```
self.db = myDB 
```

into my **init** attribute for my main class but I get this error:

```
with self.db as handler:
TypeError: unbound method __enter__() must be called with myDB instance as first argument (got nothing instead) 
```

Any suggestions as to how to do this properly?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T11:45:08.990

使用该`with`协议假定用于`with`实现[上下文管理器协议](http://docs.python.org/library/stdtypes.html#context-manager-types)的对象。

基本上这意味着类定义应该定义`__enter__()`和`__exit__()`方法。如果你使用一个没有这些的对象，python 会抛出一个关于缺少属性的`AttributeError`抱怨。`__exit__`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T11:44:29.807

该错误意味着`BacktestingDatabaseHelper`不是为在`with`语句中使用而设计的。听起来像类`testingResource`并且`BacktestingDatabaseHelper`彼此不兼容（也许您的版本`common.databaseHelper`已过时）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T11:55:29.297

由于您无法更改该`with`语句，因此您必须添加一个派生类，从该类`BacktestingDatabaseHelper`中添加适当的`__enter__()`和`__exit__()`功能并使用它来代替。

这是一个尝试尽可能接近原始示例的示例：

```
class myDB(BacktestingDatabaseHelper): 
    def __enter__(self): 
        return self
    def __exit__(self): 
        self.db.close()
    def fromConfig(self, name):
        x = super(myDB, self).fromConfig(name)
        assert isinstance(x, BacktestingDatabaseHelper)
        x.__class__ = myDB # not sure if that really works
[...]
self.db=myDB.fromConfig('tpbp') 
```

但是，问题是我不确定`__enter__`应该返回什么。`MySQLdb`例如，如果您使用，则连接的上下文管理器会创建一个表示一个事务的游标。如果这里也是这种情况，您必须解决其他问题...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-24T11:49:58.103

'with' 关键字基本上是写出的[快捷方式：](http://effbot.org/zone/python-with-statement.htm)

```
try:
    // Do something
finally:
    hander.__exit__() 
```

`handler`如果您的对象正在使用资源（例如，打开的文件流），这很有用。它确保无论“做某事”部分发生什么，资源都会被干净地释放。

在您的情况下，您的处理程序对象没有`__exit__`方法，因此`with`失败。我会假设其他人可以使用`BacktestingDatabaseHelper`，因为他们没有使用`with`.

至于您现在可以做什么，我建议您忘记`with`并使用`try ... finally`，而不是尝试将您自己的版本添加`__exit__`到对象中。您只需要确保正确释放处理程序（如何执行此操作将取决于`BacktestingDatabaseHelper`应该如何使用），例如

```
try:
    handler = self.db
    // do stuff
finally:
    handler.close() 
```

* * *

**编辑**：因为你不能改变它，你应该做类似@Daniel Roseman[建议](https://stackoverflow.com/a/10736991/920242)的事情 wrap `BacktestingDatabaseHelper`。根据最好的清理方式`BacktestingDatabaseHelper`（如上所述），您可以编写如下内容：

```
from contextlib import contextmanager

@contextmanager
def closing(thing):
    try:
        yield thing
    finally:
        thing.close() 
```

并将其用作：

```
class mfReportProcess(testingResource):
    def __init__(self):
        self.db = closing(BacktestingDatabaseHelper.fromConfig('db_name')) 
```

（这直接来自[文档](http://docs.python.org/library/contextlib.html#contextlib.closing)）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-24T11:54:02.590

您可能想尝试使用[`contextlib.contextmanager`](http://docs.python.org/library/contextlib.html#contextlib.contextmanager)装饰器来包装您的对象，以便它支持上下文管理器协议。

# asp.net-mvc - The following sections have been defined but have not been rendered for the layout page "~/Views/Shared/_Layout.cshtml"

> ID：10736675
> 
> 赞同：8
> 
> 时间：2012-05-24T11:33:19.910
> 
> 标签：asp.net-mvc, mobile, asp.net-mvc-4, razor

I know there are a few questions that have been answered but I didn't find something specific to my case.

I'm using the mobile capabilities of MVC4\. So I created a _layout.mobile.cshtml and the corresponding views.

The error above happens when I go in with a mobile device. As you can see, it is trying to display the regular _layout.cshtml instead of the _layout.mobile.cshtml. So I'm assuming it is also trying to display the view (say Index.mobile.cshtm) which doesn't have the section in question. Basically it is mixing the regular layout with the mobile views.

This doesn't happen all the time. If I recycle the pool it works again for a while and then all of the sudden it goes back to having the error and it will continue until I recycle the pool again.

Has anyone seen this problem before that can shed some light?

Thanks John

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:38:15.153

在 Views 文件夹下的**_ViewStart.cshtml**中，将 Layout 值更改为您的自定义布局。我认为这可能会有所帮助..（确保您返回的是视图而不是部分视图）

例如

```
@{
Layout = "~/Views/Shared/_layout.mobile.cshtml";
} 
```

如果您想更改特定页面的布局，您可以在页面顶部将其显式定义为页面指令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T13:37:18.967

在 index.cshtml 中有一个在原始布局文件“_LayoutHome.cshtml”中定义的部分被称为在新的引导布局中未定义。

具体来说：`@RenderSection("featured", required: false)`

所以解决方案是要么将此部分添加到新布局中（在原始布局中查找并粘贴它），要么直接从 index.cshtml 中删除它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-11T11:12:34.480

我也遇到了同样的问题，我删除了

```
@section featured { 
```

从视图

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-02T13:29:18.173

另一种方法是在 _ViewStart.cshtml 页面中使用条件块。例如，您可能有两种布局，具体取决于设备普通用户。使用伪代码读取设备/浏览器类型位，它看起来像这样：

```
@{
        if(userIsMobile)
        {
            Layout = "~/Views/Shared/_MobileLayout.cshtml";
        }
        else
        { 
             Layout = "~/Views/Shared/_Layout.cshtml";
        }
} 
```

我已经使用它来根据不同类别的用户的需要显示或隐藏部分或菜单项；它应该也适用于特定于设备的布局。

乔伊摩根

# sql-server-2008 - 从 SQL Server 2008 到 SQL Azure 的导入和导出向导

> ID：10736678
> 
> 赞同：3
> 
> 时间：2012-05-24T11:33:31.433
> 
> 标签：sql-server-2008, azure-sql-database

我有一个 SQL Server 2008 数据库。我正在尝试将它放在 SQL Azure 上。我已经将表架构放入 SQL Azure 中。我希望使用导入/导出向导来迁移我的数据库。但是，在 SQL Server 导入和导出向导中选择目标并单击“下一步”后，我收到一条错误消息：

```
TITLE: SQL Server Import and Export Wizard
------------------------------

Cannot get the supported data types from the database connection "Provider=SQLNCLI10;Data Source=tcp:[server],1433;User ID=[userID];Auto Translate=false;Initial Catalog=[dbName]".

Unspecified error
The stored procedure required to complete this operation could not be found on the server. Please contact your system administrator. (Microsoft SQL Server Native Client 10.0) 
```

我究竟做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T03:06:01.677

我相信您可能正在使用其他一些数据提供程序，然后**是用于 SqlServer 的 .Net Framework 数据提供程序作为**SQL Server 导入和导出向导应用程序中的数据源。这是使用 SQL Server 导入/导出向导最常见的问题。请尝试如下所述的修复：

*   [http://mytechworld.officeacuity.com/index.php/2011/10/importing-data-into-sql-azure/](http://mytechworld.officeacuity.com/index.php/2011/10/importing-data-into-sql-azure/)

有关使用 SQL Server 导入/导出向导的更多信息在这里：

1.  [使用 SQL Server 导入和导出向导进行 SQL Azure 数据迁移（英文）](http://social.technet.microsoft.com/wiki/contents/articles/2287.sql-azure-data-migration-using-sql-server-import-and-export-wizard-en-us.aspx)
2.  [将数据和架构迁移到 SQL Azure 的选项概述](http://social.technet.microsoft.com/wiki/contents/articles/overview-of-options-for-migrating-data-and-schema-to-sql-azure.aspx#migrationwiz)

# python - SqlAlchemy，生成的对象 Id 和 Zope 事务

> ID：10736681
> 
> 赞同：2
> 
> 时间：2012-05-24T11:33:42.120
> 
> 标签：python, sqlalchemy, zope

我将 SQLAlchemy 与 Zope 事务一起使用。我的对象是这样的：

```
class MyItem(DeclarativeBase):

    #  ....
    id = Column(Integer, primary_key=True)
    # .... 
```

然后当我创建一个新对象并提交事务时，我想获得生成的 id，例如：

```
mi = MyItem()
DBSession.add(mi)
transaction.commit()
print mi.id # currently object is expired (not persistent with this session) 
```

有没有一些简单的方法来实现这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T12:40:55.467

您可以只使用默认会话模式；添加对象，然后刷新以将对象保存到数据库。不要提交事务，*让*Zope 处理：

```
mi = MyItem()
DBSession.add(mi)
DBSession.flush()
print mi.id 
```

您的对象将在当前事务中添加到数据库中，因此主键将是已知的。

# java - Am I missing a java class?

> ID：10736688
> 
> 赞同：1
> 
> 时间：2012-05-24T11:34:26.990
> 
> 标签：java, android, eclipse

I was trying to include referenced library when this error showed up on a line that apparently made use of the Rectangle2D class. For some reason it seems I'm missing that class.

```
The type java.awt.geom.Rectangle2D cannot be resolved. It is indirectly referenced from required .class files 
```

After some Google searches I figured out I had to simply add Rectangle2D to as a reference, but I can't find it anywhere.

Can anyone point me in the right direction? Do I need to download it separately? Or am I no searching good enough? Where is that file located?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:40:08.943

`java.awt`指的是Java 的[Abstract Window Toolkit](http://en.wikipedia.org/wiki/Abstract_Window_Toolkit)，它不包含在Android 框架中。尝试引用[这个库](http://code.google.com/p/awt-android-compat/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:40:25.857

尝试导入 java.awt.geom.RectangularShape

# android - 在android中将布局的动画从一个位置翻译到另一个位置

> ID：10736695
> 
> 赞同：1
> 
> 时间：2012-05-24T11:34:41.803
> 
> 标签：android, translate-animation

我在 FrameLayout 中有一个线性布局（比如 A - 在右上角）。有一些从中心底部的代码创建的新线性布局并添加到相同的 FrameLayout（比如 l1、l2、l3...l10）。所有布局（布局 A 和 10 个新布局）的宽度和高度都相同。因此，在中心底部位置，布局 l10 显示为其添加的最新布局。其余布局将不会显示，因为它们将在 l10 之后。现在，我想使用 TranslateAnimation 将所有 10 个布局从布局 B 转换为布局 A，我可以毫无问题地做到这一点。

当第一个 layout(l10) 从其位置转换为 Layout A 时，它覆盖了布局 A 区域，并且 i10 现在将显示在布局 A 上（这是预期的）， l9 将显示在底部中心位置。**但是**当下一个 layout(l9) 翻译 layout A 时，它会**低于** l10 。相反，它应该覆盖 l10 并且 l9 现在应该显示在布局 A 区域上。如果有人以前遇到过这个问题并且有相同的解决方案，请分享。

（有清晰的截图，但由于我是新成员无法附上

提前致谢。

**`**CODE**`**

```
int numberOfCardsLeft = 10;
  FrameLayout fl=(FrameLayout)findViewById(R.id.cardsFrameMainLayout);

ArrayList<LinearLayout> animationCardLayouts= new ArrayList<LinearLayout>(10);//used for animation 

           for(int i=0;i<10;i++) //create 10 layouts & add to FrameLayout
        {
        cpuPlayers.add(temp.get(i));
        tempCardLayout = new LinearLayout(this);
        layoutParams=new FrameLayout.LayoutParams(cardLayoutWidth,cardLayoutHeight);
        layoutParams.gravity=Gravity.CENTER_HORIZONTAL|Gravity.BOTTOM;
        //layoutParams.leftMargin=0;
        tempCardLayout.setLayoutParams(layoutParams);
        tempCardLayout.setWeightSum(10);
        tempCardLayout.setOrientation(LinearLayout.VERTICAL);
        tempCardLayout.setGravity(Gravity.CENTER);
        //adding different childs & different background to it
        animationCardLayouts.add(tempCardLayout);
        fl.addView(tempCardLayout);
           }
      cardAnimation = new TranslateAnimation("<to fit area of Layout a>");
                cardAnimation.setFillAfter(true);
                cardAnimation.setDuration(900);
                cardAnimation.setAnimationListener(cardAnimationListener);
                animationCardLayouts.get(numberOfCardsLeft-1).startAnimation(cardAnimation);

        cardAnimationListener= new AnimationListener() {

        @Override
        public void onAnimationStart(Animation animation) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationEnd(Animation animation) {
            // TODO Auto-generated method stub
            numberOfCardsLeft--;
            if(numberOfCardsLeft!=0)
            {
                tempCardAnimation = new TranslateAnimation("<to fit area of Layout a>");
                tempCardAnimation.setFillAfter(true);
                tempCardAnimation.setDuration(900);
                tempCardAnimation.setAnimationListener(cardAnimationListener);
                animationCardLayouts.get(numberOfCardsLeft-1).startAnimation(tempCardAnimation);
            }
        }
    }; 
```

# bash - 唯一元素提取

> ID：10736701
> 
> 赞同：2
> 
> 时间：2012-05-24T11:34:59.557
> 
> 标签：bash, shell, unique

我有一个制表符分隔的文件，如下所示：

```
ABCA2   chr9    139021506   139043195
ABCA2   chr9    139021506   139042561
ABCC1   chr16   15950934    16144431
ABCC1   chr16   15950934    16144431
ABCC1   chr16   15950934    16144431
ABCC1   chr16   15950934    16144431 
```

我想根据 column 提取值，例如第`ABCA2`2,3 列和 4 中的值应该只提取一次，这是名称第一次出现在 column1 中。

理想的输出是：

```
ABCA2   chr9    139021506   139043195
ABCC1   chr16   15950934    16144431 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T11:39:47.640

您的问题的陈述是模棱两可的，但我将其解释为您只希望在尚未看到第一列中的条目时输出一行。我不知道为什么要标记它`python`，因为 awk 显然是正确的工具：

```
awk '{if( !seen[$1]++ ) print }' input-file 
```

或者，更简单地说

```
awk '! a[$1]++' input-file 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-24T11:40:16.217

使用您的示例输入 `file.txt`，`uniq --check-chars=5 file.txt`给出以下输出：

```
ABCA2 chr9 139021506 139043195
ABCC1 chr16 15950934 16144431 
```

如您所见，它仅限于比较每行的前 5 个字符。

*编辑*：

正如 William Pursell 指出的那样，`uniq`假设文件已经排序。另一种方法是使用`sort`：

```
$ sort --key=1,1 --unique file.txt
ABCA2 chr9 139021506 139043195
ABCC1 chr16 15950934 16144431
$ 
```

*请务必注意下面的 William Pursells 评论：*输入数据的排序并不是解决上述问题所必需的。如果速度是一个问题/数据量很大，那么记忆看到的键的线性解决方案（例如`awk`威廉姆斯答案中的灵魂）会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T11:55:11.003

```
>>> d = {}
>>> with open('f.txt') as f:
...    for line in f.readlines():
...        x = line.split()
...        if x[0] not in d.keys():
...           d[x[0]] = x[1:]
...
>>> for k,v in d.iteritems():
...    print k,' '.join(v)
...
ABCA2 chr9 139021506 139043195
ABCC1 chr16 15950934 16144431 
```

# jquery - 如何在 qtip 中加入滚动条？

> ID：10736707
> 
> 赞同：2
> 
> 时间：2012-05-24T11:35:28.550
> 
> 标签：jquery, css, css-tables, qtip

我在这里尝试的是在 qtip 中放置一个表格并显示它。但我希望那张桌子有一个固定的高度，`overflow:auto`然后，如果它超过给定的高度，但不知何故我不能这样做。

这是我所做的

```
#tableId {
    max-height: 100px;
    overflow-x: auto;
    overflow-y: auto;
    width: 100%;
} 
```

但表格似乎没有挂起（请注意，表格显示在“qtip”内。我必须包含 qtip 的某些属性还是需要进行一些 CSS 更改

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T12:04:48.393

将表格放在 a中，使用您为元素`div`指定的 CSS 设置样式。`table`我从未使用过 qtip，但每当我无法使用元素上的属性时，通常`overflow`将其包装在一个元素中。`div`

# android - 在平板电脑或手机上单击主页按钮时如何转到主页菜单？

> ID：10736723
> 
> 赞同：0
> 
> 时间：2012-05-24T11:36:28.253
> 
> 标签：android, android-intent

我开发了一个应用程序，但是当我单击平板电脑或 android 手机（不是后退按钮）中的主页按钮时，它的行为仅类似于后退按钮。我的应用程序中有很多活动。如何解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:43:05.403

因为您没有为当前活动调用 finish()，

因此，每当您通过 Intent 类调用另一个 Activity 时，您都应该完成当前的活动，例如

CurrentActivityClass.finish();

在调用另一个活动类进行导航之前。

# c# - 总是添加一个空的事件处理程序可以吗？

> ID：10736729
> 
> 赞同：6
> 
> 时间：2012-05-24T11:36:42.743
> 
> 标签：c#, .net, events, delegates, null

> **可能重复：**
> [在事件声明中添加匿名空委托是否有不利之处？](https://stackoverflow.com/questions/170907/is-there-a-downside-to-adding-an-anonymous-empty-delegate-on-event-declaration)

在使用事件处理程序（在 C# 中）时，以下模式非常常见：

```
public event Action handler;
…
// some method:
if(handler != null) handler(); 
```

为这个事件分配一个空代表有什么缺点吗？这将在`if !=null`触发事件的任何地方保存条件。当然，这只适用于当我们不能保证事件总是被分配一个适当的委托时。

```
public event Action handler;
…
// in constructor:
handler += ()=>{};
…
// some method:
handler(); 
```

当然，性能会受到轻微影响，但它会使代码更简洁。在这种情况下，最佳做法是什么？有什么技术劣势吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:44:03.927

您可以将处理程序包装在一个函数中，该函数首先检查处理程序是否为空，然后调用它，而不是在构造函数中添加一个空委托。这样做的缺点是如果你有很多事件，你将有很多包装每个事件的函数。

```
private void HandlerWrapper()
{
    Action localHandler = handler;
    if (localHandler != null) handler();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:44:15.220

有趣的想法，我从来没有想过这样做。我执行自定义事件的方式是创建一个 OnCustomEventName 以获取事件的参数，然后在此处检查是否为空。并在我希望触发事件的任何地方从代码中调用 OnCustomEventName。如果每次您希望触发事件时都进行检查，则可以避免任何性能损失并使操作代码比 2 行代码更简洁。

话虽如此，这并没有回答有关技术劣势的问题，而是在触发事件时更多的最佳实践。

线程安全“开启”功能的示例代码。

```
private void OnCustomEventName()
{
    DelegateName localhandler = CustomEventName;
    if (localhandler != null)
        localhandler();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T11:50:33.510

我还没有真正发现这样做的任何重大缺点，通常我更喜欢它而不是检查空值。我想不到的唯一问题是，它可能会在调试时导致代码中出现烦人的步骤（即，每次进入事件时都必须越过空委托）。

我认为性能不是问题——如果应用程序性能因调用事件而显着下降，那么事件可能一开始就不应该存在。

# wpf - 右键单击时 ActiveX 控件没有获得焦点

> ID：10736730
> 
> 赞同：0
> 
> 时间：2012-05-24T11:36:46.467
> 
> 标签：wpf, winforms, focus, activex

我正在开发一个托管在 MFC 和 VB6 应用程序中的 ActiveX 控件。

此 ActiveX 包含一个 WPF 控件，它本身由 WinForms ElementHost 托管，即：

> MFC > .NET ActiveX > WinForms ElementHost > WPF 用户控件

当用户右键单击控件时，他必须能够使用键盘箭头键在上下文菜单中导航。

如果右键单击时我的控件具有焦点，则一切正常。

但是如果当用户右键单击时焦点在宿主应用程序中，则键盘事件会继续发送到宿主 MFC 应用程序。

当我检测到右键单击时，我尝试在我的 WPF 控件上调用 Focus() 方法，但它不起作用。

有人有想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:25:11.880

我找到了一种解决方法。

当`PreviewMouseRightButtonDown`WPF 窗体上发生事件时，我调用`Focus`WinForm 宿主控件上的方法。

我真的不明白为什么，但这让用户可以使用他们的键盘在上下文菜单中导航。

# iphone - CoreLocation 每次都请求许可

> ID：10736735
> 
> 赞同：2
> 
> 时间：2012-05-24T11:37:05.037
> 
> 标签：iphone, core-location

当我试图获取我的当前位置时，IOS 显示警报视图，例如““应用程序”想使用您的当前位置”以及“不允许”和“确定”。我点击了“不允许”。然后，每当我打开应用程序并尝试获取当前位置时，它就不会再次显示上一条消息。是否可以每次都制作警报视图（仅当用户之前选择了“不允许”时）我试过`[CLLocationManager authorizationStatus];`了，它向我显示了类似的错误

**操作无法完成。（kCLErrorDomain 错误 1。）** 我想再次获得相同的“系统生成”警报视图。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:23:12.813

`+ (BOOL)locationServicesEnabled`您可以使用 的方法检查自己代码中的状态[`CLLocationManager`](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)。`- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error`如果用户拒绝为您的应用或整个设备（例如飞行模式）提供位置服务，您将在您的[委托](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html)中收到错误。

我还找到了一个[例子](http://snipplr.com/view/52030/)。看`- (BOOL) isGPSEnabled`方法。

# validation - cakephp flash错误不起作用

> ID：10736737
> 
> 赞同：0
> 
> 时间：2012-05-24T11:37:08.620
> 
> 标签：validation, cakephp, redirect

我在系统中创建了一个登录，激活的用户可以登录，但尚未激活帐户的用户将无法登录。问题是当用户尝试使用已停用的帐户登录时没有输出闪烁消息，所以用户不会知道为什么页面在登录页面上不断刷新。

这是我的登录功能

```
if ($this->request->is('post')){
    if ($this->request->data['User']['password'] == 'qazwsx'){
    if ($this->Auth->login()){
    $username = $this->request->data['User']['username'];
     if (0 === $this->User->find('count',array('conditions'=>array('activated'=>1,'username'=> $username)))) {
         $this->Session->setFlash('Sorry, your account is not validated yet.');
         $this->redirect($this->referer());
    }

        $this->Auth->user('id');
        $this->redirect($this->Auth->redirect('eboxs/home')); 
        }   
    } 
    else {

        $this->Session->setFlash('Username or password is incorrect');
    }
    }else{
    $this->Session->setFlash('Welcome, please login');
    }

} 
```

到目前为止，我还没有将我的观点包含在我不必打电话给他们的闪信中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:03:41.140

你在那里做的奇怪的身份验证方式。

就像你已经在评论中被告知的那样，检查，无论用户被重定向到哪里（$this->redirect），都有一个

```
<?php echo $this->Session->flash(); ?> 
```

在那个观点中。

同样使用该方法，用户无论如何都会登录。您必须再次手动注销该用户，然后再向他显示 Flash 消息/重定向他。

你也可以只写：

```
<?php
  ...
  $this->Auth->scope = array('User.activated' => 1);

  if ($this->Auth->login()) {
    // logged-in logic
  } else {
    // not logged-in logic
  }
?> 
```

这将为您节省一些代码行。

# playframework - fbconnect OAuth2

> ID：10736739
> 
> 赞同：0
> 
> 时间：2012-05-24T11:37:16.840
> 
> 标签：playframework

这是我在浏览器中收到的错误消息，我已经添加了jar文件，现在导入没有错误！！但错误是这样读的

无法编译文件 /app/controllers/FacebookLogin.java。引发的错误是：无法解析 play.modules.facebook.FbGraph

在 /app/controllers/FacebookLogin.java 中（第 4 行附近）

```
 package controllers;

 import com.google.gson.JsonObject;

 import play.modules.facebook.FbGraph;

 import play.modules.facebook.FbGraphException;

 import play.mvc.Scope.Session;

 public class FacebookLogin{

 public static void facebookLogin() {
         try { 
```

请帮帮我，我试图连接到 Facebook 超过一周，我真的被卡住了。请帮助我处理控制器类和查看文件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:52:07.013

遵循[这一点](http://code.google.com/p/play-fbgraph/wiki/GettingStarted)，它就会起作用。

最多30分钟，真的很容易做到。

# javascript - Chrome 中的 Javascript 变量

> ID：10736740
> 
> 赞同：0
> 
> 时间：2012-05-24T11:37:17.167
> 
> 标签：javascript, google-chrome

我的日志中有奇怪的错误，主要来自 Macintosh 中的 Chrome，但有时也来自 Windows。

在 javascript 中，我在页面上有：

```
text =+ '<img src="/pictures/' + url + '" alt="Photos" border="0" class="carousel-photo" />'; 
```

然后我使用轮播添加文本，它应该是并且在所有浏览器中（不幸的是我无法在我的 chrome 中调试它）生成图像：

```
<img src="/pictures/2405.jpg" alt="photos" border="0" class="carousel-photo"> 
```

但我的日志注意到这一点：

```
http://www.mysite.net:80/pictures/' + url + ' 
```

这当然是一个 404 错误，因为它不存在所以我得到了日志。

但是为什么url没有转换成我的变量内容，这个例子中是2405.jpg？？？

**更新 1：**我现在又受到了一次打击Safari/534.57.2

错误 404：

```
/pictures/';text += url;text +=' 
```

**更新 2**放入 CDATA 没有帮助（我有 xhtml 页面），一些 Apple 浏览器解释为好像这是 HTML :-(

**更新 3**

这很奇怪。看来我可以阻止这一点的唯一方法是使用：

```
txt += "<img src='\/pictures\/" + elm.find('url').text()+ "' alt='Photo' border='0' class='carousel-picture'>"; 
```

代替

```
var url = '\/pictures\/' + elm.find('url').text();
txt += "<img src='" + url  +  "' alt='Photo' border='0' class='carousel-picture'>"; 
```

**更新 4**：在其他页面上，构造 img 的类似代码在此浏览器中也失败了。唯一的方法似乎是制作一个 document.createElement("img")。但是我想知道这个浏览器中的其他东西是否还可以，因为图像找不到 404，但链接没有，例如。CDATA 也无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:41:31.930

也许浏览器将此 javascript 部分解释为 html，然后它发现：

```
<img src="/pictures/' + url + '" alt="Photos" border="0" class="carousel-photo" /> 
```

这里的 src 属性值为：

> /图片/'+网址+'

在此处寻找解决方案： [脚本标记中何时需要 CDATA 部分？](https://stackoverflow.com/questions/66837/when-is-a-cdata-section-necessary-within-a-script-tag)

添加 CDATA 部分应该可以解决这些问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:45:53.513

尝试使用

```
console.log(text); 
```

调试。这将显示您的错误日志中传递给文本的内容。尝试：

```
text += '<img src="/pictures/';
text += url;
text += '" alt="Photos" border="0" class="carousel-photo" />'; 
```

所以 URL 不会作为字符串传递，而是作为变量传递......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T12:41:12.683

这可能是因为规范规定浏览器必须在某些情况下处理不带引号的属性，再加上斜线（solidus）字符在极少数情况下会混淆验证处理。这也可能由于“文本”作为变量名的错误选择而变得更加复杂，因为“文本”是某些元素的有效属性。我注意到您没有结束分号，这也可能有所帮助。

```
var fullurl = '/pictures/' + url;
mytext = mytext + '<img src="' + fullurl + '" alt="Photos" border="0" class="carousel-photo" />'; 
```

一种替代方法可能是删除可选的闭合固线：

```
var fullurl = '/pictures/' + url;
mytext = mytext + '<img src="' + fullurl + '" alt="Photos" border="0" class="carousel-photo">' 
```

此外，最好在图像插入流后设置 src 属性：

```
var fullurl = '/pictures/' + url;
mytext = mytext + '<img src="" alt="Photos" border="0" class="carousel-photo" />'; 
```

..插入后，使用`fullurl`uri组件字符串设置src属性。注意：它是一个 uri，而不是作为 src 属性内容给出的 url。

另一个可能是反转单/双引号的使用：

```
var fullurl = "/pictures/" + url;
mytext = mytext + "<img src='" + fullurl + "' alt='Photos' border='0' class='carousel-photo'>"; 
```

特别警告，您不应该在 'q' 元素或块引号内使用此图像字符串。

# php - 从 php://input 回调将 php 会话 ID 插入数据库

> ID：10736745
> 
> 赞同：0
> 
> 时间：2012-05-24T11:38:02.043
> 
> 标签：php, mysql

我有一个回调页面，我用它在数据库中插入数据。当我加载此页面时。并回显 $_SESSION['user_id']。它回显 user_id，并将其插入数据库。但是，当我在执行回调函数时尝试插入数据时，$_SESSSION['user_id'] 被忽略，其他数据被成功插入。为什么是这样？

```
echo $_SESSION['user_id'];    
$decodedJSON = json_decode(file_get_contents('php://input'), true);    
$account = $decodedJSON['account'];    
$query_insert = "insert into video (account,userid) values ($account,$_SESSION['user_id'])";    
$result_insert = mysql_query($query_insert); 
```

当我刷新页面时， $_SESSION['user_id'] 被插入。但是当我尝试运行回调函数时，插入了 $account，但没有插入 $_SESSION['user_id']。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:51:25.530

我不能 100% 确定这一切如何与您的代码示例结合在一起，但是如果您尝试将某些内容传递给标准输入然后运行 ​​PHP，您还需要传递 sessionID。

当您从浏览器调用代码时，cookie 会神奇地为您处理所有这些，会话 ID 会在 cookie 中传递。但是，如果您从其他来源调用，则不会传递 cookie。

我可以解释如何做到这一点，但没有比 PHP 手册更好的了：http: [//php.net/manual/en/session.idpassing.php](http://php.net/manual/en/session.idpassing.php) - 基本上将 SID 附加到 hte URL 的末尾。

但请注意关于“session.use_trans_sid”的注释，默认禁用，需要在 php.ini 中启用

# jquery - Jquery 表分页仅适用于具有多个实例的最后一个表

> ID：10736750
> 
> 赞同：0
> 
> 时间：2012-05-24T11:38:16.037
> 
> 标签：jquery, jquery-plugins, pagination, html-table

我正在构建一个表格分类器和分页脚本。排序工作正常，最后一张桌子上的分页也可以作为一种魅力。分页的上一个和下一个按钮在所有以前的表格上都被破坏了。有人可以告诉我为什么吗？

这是jquery插件：

```
 (function($)
{
    $.fn.tableSorterTwo = function(options)
    {
        var defaults = {
            pagination: 20
        }

        var options = $.extend(defaults, options);

        return this.each(function()
        {
            $(this).find('thead').addClass('noselect');
            $(this).find('thead th').each(function(column)
            {  
                $(this).addClass('sorting').click(function()
                {  
                    var $table = $(this).parent().parent().parent();
                    var findSortKey = function($cell)
                    {  
                        return $cell.find('.sort-key').text().toUpperCase() + ' ' + $cell.text().toUpperCase();  
                    }; 

                    var sortDirection = $(this).is('.sorting_asc') ? -1 : 1;  
                    var $rows = $table.find('tbody tr').get();  

                    $.each($rows, function(index, row)
                    {  
                        row.sortKey = findSortKey($(row).children('td').eq(column));  
                    });  

                    $rows.sort(function(a, b)
                    {  
                        if(!isNaN(a.sortKey) && !isNaN(b.sortKey))
                        {
                            var val = a.sortKey-b.sortKey;
                            if(val < 0) return -sortDirection;
                            if(val > 0) return sortDirection;                       
                        }
                        else if(a.sortKey.indexOf("%") >= 0)
                        {
                            var a = a.sortKey.replace(' %', '');
                            var b = b.sortKey.replace(' %', '');
                            var val = a-b;
                            if(val < 0) return -sortDirection;
                            if(val > 0) return sortDirection;
                        }
                        else
                        {
                            if(a.sortKey < b.sortKey) return -sortDirection;  
                            if(a.sortKey > b.sortKey) return sortDirection;  
                        }
                        return 0;  
                    });  

                    $.each($rows, function(index, row)
                    {  
                        $table.find('tbody').append(row);  
                        row.sortKey = null;  
                    });  

                    $table.find('thead th').removeClass('sorting_asc sorting_desc');  
                    var $sortHead = $table.find('thead th').filter(':nth-child(' + (column + 1) + ')');  
                    sortDirection == 1 ? $sortHead.addClass('sorting_asc') : $sortHead.addClass('sorting_desc');  
                    $table.find('tbody tr').removeClass('sorting').filter(':nth-child(' + (column + 1) + ')').addClass('sorting'); 
                    zebraRows($table);
                });     
            });

            // PAGINATION
            var totalRows = $(this).find('tbody tr').size();
            if(totalRows > options.pagination)
            {
                var totalPages = Math.ceil(totalRows/options.pagination);
                $(this).find('tbody').after('<tfoot><tr><th colspan="3" class="table-pagination"></th></tr></tfoot>');
            }

            var currentLink = 0;
            var numberLinks = ''; 
            if(totalPages > 1)
            {
                while(totalPages > currentLink)
                {
                    var active = (currentLink == 0) ? ' table-pagination-link-active' : '';
                    checkLinks($(this), currentLink, totalPages);
                    numberLinks += '<a href="' + (currentLink+1) + '" class="table-pagination-link' + active + '">' + (currentLink+1) + '</a>';
                    currentLink++;
                }
                $(this).find('tfoot tr th').html('<a href="1" class="table-pagination-link table-pagination-link-first no-active">&#171;</a>' +
                '<a href="1" class="table-pagination-link table-pagination-link-previous no-active">&#8249;</a>' +
                numberLinks +
                '<a href="2" class="table-pagination-link table-pagination-link-next no-active">&#8250;</a>' +
                '<a href="' + totalPages + '" class="table-pagination-link table-pagination-link-last no-active">&#187;</a> | <span class="table-pagination-overview no-active">1</span>/<span class="table-pagination-total no-active">' + totalPages + '</span>');
                $(this).find('tbody tr').hide().slice(0, options.pagination).show();
                $(this).find('.table-pagination-link-previous').hide();
                $(this).find('.table-pagination-link-first').hide();
            }

            $('.table-pagination-link').click(function()
            {
                var table = $(this).parents('table');
                var href = $(this).attr('href');
                $(table).find('.table-pagination-link').removeClass('table-pagination-link-active');
                if(!$(this).hasClass('no-active'))
                {
                    $(this).addClass('table-pagination-link-active');
                }
                if(href == totalPages)
                {
                    markActive(table, totalPages)
                }
                else if(href == 1)
                {
                    markActive(table, href);
                }
                goToPage(table, href, options.pagination);
                return false;
            });
        });
    };

    function zebraRows(table)
    {
        $(table).find('tbody tr:even').removeClass('even').addClass('even');
    }

    function markActive(table, href)
    {
        $(table).find('a[href="' + href + '"]').addClass('table-pagination-link-active');
        $(table).find('.no-active').removeClass('table-pagination-link-active');
    }   

    function goToPage(table, page, pagination)
    {
        var previous = parseInt(page)-1;
        var next = parseInt(page)+1;
        $(table).find('.table-pagination-overview').html(page);
        var page = parseInt(page)-1;
        var start = page*pagination;
        var end = start+pagination;
        $(table).find('tbody tr').hide().slice(start, end).show();
        checkLinks(table, page, $(table).find('.table-pagination-total').html());
        $(table).find('.table-pagination-link-previous').attr('href', previous);
        $(table).find('.table-pagination-link-next').attr('href', next);
        return false;
    }

    function checkLinks(table, currentLink, totalPages)
    {
        if(currentLink == 0)
        {
            $(table).find('.table-pagination-link-previous').hide();
            $(table).find('.table-pagination-link-first').hide();
            $(table).find('.table-pagination-link-next').show();
            $(table).find('.table-pagination-link-last').show();
        }
        else if(currentLink == (totalPages-1))
        {
            $(table).find('.table-pagination-link-next').hide();
            $(table).find('.table-pagination-link-last').hide();
            $(table).find('.table-pagination-link-previous').show();
            $(table).find('.table-pagination-link-first').show();
        }
        else
        {
            $(table).find('.table-pagination-link-previous').show();
            $(table).find('.table-pagination-link-first').show();
            $(table).find('.table-pagination-link-next').show();
            $(table).find('.table-pagination-link-last').show();
        }
    }
})(jQuery); 
```

调用函数：`$('.data-table').tableSorterTwo({pagination: 15})`

我还有一个正在工作的 jsfiddle：http: [//jsfiddle.net/Tra9N/15/](http://jsfiddle.net/Tra9N/15/)

不是这个问题的目的，但如果有人对我的插件有改进或提示，请分享。它还没有完成，我的第一个 jquery 插件，所以任何提示都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T12:04:00.680

在您的 jsfiddle 示例中，每次单击都会触发两次更改页面事件，这导致后退按钮跳过两页而不是一页。

看起来这种情况正在发生，因为您的示例中有两个表，并且您的代码将点击事件`.table-pagination-link`连接到每个循环中的每个链接。您可以通过将范围限制为当前表来解决此问题。所以替换：

```
$('.table-pagination-link').click(function() 
```

有了这个：

```
$('.table-pagination-link', this).click(function() 
```

[工作 jsFiddle 示例](http://jsfiddle.net/ChrisPebble/5t5Xb/)。

# jquery - 使用 jquery 对 jsp 进行服务器端验证

> ID：10736755
> 
> 赞同：-3
> 
> 时间：2012-05-24T11:38:22.417
> 
> 标签：jquery, jsp

我想用 jquery 做服务器端验证。但我不知道如何从这个东西开始。是否有任何很好的示例教程来学习使用 jquery for jsp 进行服务器端验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:26:26.720

如果你无论如何都想这样做，

然后你需要使用 Ajax 框架，如 DWR(Direct Web REmoting) 和 jQuery。通过使用这个 Ajax 框架，你可以调用你的验证器函数（用 Java 编写的服务器端函数）。然后在 jQuery 回调函数中，U 可以呈现错误消息或您想要实现的任何逻辑。

这些链接可能会对您有所帮助。

[http://numberformat.wordpress.com/2010/09/21/direct-web-remoting-dwr-hello-world-example/](http://numberformat.wordpress.com/2010/09/21/direct-web-remoting-dwr-hello-world-example/)

[带有 DWR 的示例程序](https://stackoverflow.com/questions/6623795/sample-program-with-dwr)

[http://directwebremoting.org/dwr/introduction/scripting-dwr.html](http://directwebremoting.org/dwr/introduction/scripting-dwr.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:45:34.097

JQuery 是浏览器端的 Javascript 库。

您只能使用 JQuery 进行客户端验证。

对于服务器端验证，您需要一种服务器端语言。

在您的情况下，您需要在 Java 中进行验证。告诉我们更多关于你目前拥有的框架。

# ios - CGAffineTransformTranslate 正在旋转

> ID：10736756
> 
> 赞同：0
> 
> 时间：2012-05-24T11:38:37.670
> 
> 标签：ios, core-graphics, cgaffinetransform

我有一个视图控制器，加载时应该在视图中的特定点放大（然后动画缩小）。当它被 segue 推到导航堆栈的顶部时，它会很好地显示放大的区域。

但是，如果我转到我的 StoryBoard 并将该视图控制器设置为初始视图控制器，则在加载视图时会放大但旋转 90 度。不知道为什么。这是代码：

```
-(void)viewDidAppear:(BOOL)animated
{        
    //INITIAL TRANSFORM
    CGAffineTransform t1 = CGAffineTransformMakeTranslation(-50, 0); 
    CGAffineTransform t2 = CGAffineTransformTranslate(t1, 0, 250);
    CGAffineTransform t3 = CGAffineTransformScale(t2, 1.7, 1.7);
    self.view.transform = t3;

    //ZOOM OUT
    [UIView animateWithDuration:8
                          delay:1.5
                        options:UIViewAnimationCurveEaseOut animations:^{
                           // self.view.transform = CGAffineTransformIdentity;
                        }completion:nil
    ];
} 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:45:17.343

也许您应该使用视图中的初始转换：

```
 -(void)viewDidAppear:(BOOL)animated
    {        
        //INITIAL TRANSFORM
        CGAffineTransform t0 = self.view.transform;
        CGAffineTransform t1 = CGAffineTransformTranslate(t0, -50, 0); 
        CGAffineTransform t2 = CGAffineTransformTranslate(t1, 0, 250);
        CGAffineTransform t3 = CGAffineTransformScale(t2, 1.7, 1.7);
        self.view.transform = t3;

        //ZOOM OUT
        [UIView animateWithDuration:8
                              delay:1.5
                            options:UIViewAnimationCurveEaseOut animations:^{
                               // self.view.transform = CGAffineTransformIdentity;
                            }completion:nil
        ];
    } 
```

# php - 获取不在另一个表中的数据

> ID：10736758
> 
> 赞同：0
> 
> 时间：2012-05-24T11:38:43.040
> 
> 标签：php, zend-framework

我有两个名为 test 和 result 的表。

*   如果候选人注册，那么它将被插入到测试表中。
*   如果候选人完成了测试，那么详细信息已被插入到结果表中。

现在我需要一个查询来比较两个表并使用候选人 ID 填充未完成测试的详细候选人。我正在使用 zend 框架工作，请指导我我正在使用此代码，但它不起作用

```
$dbTableInfo = $this->getDbTable()->info(); 
$select->from(array(
    'c1' => 'test'),
    array('c1.candidate_id', 
        "CONCAT( c1.first_name,
        ' ', 
        c1.last_name ) AS full_name",
    'c1.active',
    'c1.sendlink', 
    'c1.date_added',
    'c1.username',
    'c1.date_modified', 
    'c1.test_id')
);
$select->joinLeft(array('re'=>'result'));
$select->where("c1.business_id='" . $cid . "' AND 'c1.candidate_id NOT IN(re.candidate_id)'");
$select->order('c1.candidate_id'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T22:13:19.173

来自[zend 文档](http://framework.zend.com/manual/en/zend.db.select.html)：

> 使用 joinLeft(table, condition, [columns]) 方法进行 LEFT JOIN。包括左操作数表中的所有行，包括右操作数表中的匹配行，如果不存在与左表匹配的行，则右操作数表中的列将填充为 NULL。

并且在您的查询中，您既没有指定条件也没有指定要返回的列。

例如，您可以像这样进行加入：

```
$select->from(array(
    'c1' => 'test'),
    array('c1.candidate_id', 
        "CONCAT( c1.first_name,
        ' ', 
        c1.last_name ) AS full_name",
    'c1.active',
    'c1.sendlink', 
    'c1.date_added',
    'c1.username',
    'c1.date_modified', 
    'c1.test_id')
);
$select->joinLeft(
            array('re'=>'result'),
            '"c1".candidate_id = "re".candidate_id',
             "*"
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:49:11.263

也许您忘记在 joinLeft 中指定条件？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T16:58:25.413

很抱歉没有回答你的问题，但你为什么不简单地使用一个带有*鉴别*器字段的表，例如，这将被称为*类型*，并以这种方式使用它：

*   如果候选人注册，他将被插入*类型*设置为*测试*
*   如果候选人完成了测试，那么他的*类型*将更改为已*完成*

# vb.net - 如何使用 vb.net 从验证码图像中提取文本

> ID：10736760
> 
> 赞同：-1
> 
> 时间：2012-05-24T11:38:56.050
> 
> 标签：vb.net, image, extract, captcha, imagemagick.net

使用 vb.net 如何从验证码图像中提取文本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:59:45.253

你的一点研究可以有很长的路要走。为了回答您的问题，有一项名为“验证码死亡”的服务 (http://www.deathbycaptcha.eu)。他们有一个 .NET API，而且非常可靠。

这是用于解码验证码的示例 C# 代码：

```
// Do not forget to reference DeathByCaptcha.dll in your project!
using DeathByCaptcha;

// Put your DBC credentials here.
// Use HttpClient class if you want to use HTTP API.
Client client = (Client) new SocketClient(USERNAME, PASSWORD);

// Put your CAPTCHA file name, stream, or vector of bytes,
// and desired timeout (in seconds) here:
Captcha captcha = client.Decode(CAPTCHA_FILE_NAME, TIMEOUT);
if (captcha.Solved && captcha.Correct) {
    Console.WriteLine("CAPTCHA {0}: {1}", captcha.Id, captcha.Text);

    // Report the CAPTCHA if solved incorrectly.
    // Make sure the CAPTCHA was in fact incorrectly solved!
    if ( ... ) {
        client.Report(captcha);
    }
}

// Repeat for other CAPTCHAs 
```

容易翻译成VB

# git - 致命：推送到远程仓库时对象已损坏

> ID：10736767
> 
> 赞同：4
> 
> 时间：2012-05-24T11:39:36.423
> 
> 标签：git, gitolite

我有一个安装了 Gitolite 的服务器来托管我的存储库我昨天和今天创建了一个新的存储库，当我尝试将更多提交推送到我得到的服务器时：

```
fatal: object 86eeaa0c5a154ff3df34d6a43669930b9c6c7f59 is corrupted
error: unpack failed: unpack-objects abnormal exit
error: failed to push some refs to 
```

由于 repo 很新，我并不太担心丢失以前的提交，所以我删除了本地和远程 repo，但仍然遇到相同的错误。

正如我所说，我不太关心维护我的提交历史，我只想让它再次工作！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T19:26:15.373

如评论中所见，任何额外的回购在其创建过程中都会出现问题（即，当使用声明新回购`gitolite-admin`的文件推回回购时）`gitolite.conf`

> 我之前没有注意到这一点，但是当我创建一个新的仓库时，我收到以下错误：

```
remote: line 1 too long: command="/home/git/gitolite/src/gitolite... 
remote: FATAL: fingerprinting failed for /tmp/Cdug9Itivq 
```

> 但它正在创建回购`/home/git/repositories`

此操作发生在名为的编译后触发器中[**`ssh-authkeys`**](https://github.com/sitaramc/gitolite/blob/master/src/triggers/post-compile/ssh-authkeys)：

```
sub fp_file {
    return $selinux++ if $selinux; # return a unique "fingerprint" to prevent noise
    my $f = shift;
    my $fp = `ssh-keygen -l -f '$f'`;
    chomp($fp);
    _die "fingerprinting failed for '$f'" unless $fp =~ /([0-9a-f][0-9a-f](:[0-9a-f][0-9a-f])+)/;
    $fp = $1;
    return $fp;
} 
```

这意味着`ssh-keygen -l -f <path_to_public_key.pub>`没有遵循正确的模式，如“[自助服务密钥管理](http://sitaramc.github.com/gitolite/sskm.html)”所示。

确保您的密钥生成如下：

```
ssh-keygen -t rsa -f "${H}/.ssh/git" -C "Gitolite Admin access (not interactive)" -q -P "" 
```

* * *

2015 年 4 月更新：

正如[starfry](https://stackoverflow.com/users/712506/starfry)在“ [Gitolite - 远程：致命：'keydir/' 的指纹识别失败”](https://stackoverflow.com/a/29749581/6309)中提到的：

> 在 6.8 版中，OpenSSH 中的密钥指纹格式发生了变化：
> 
> 将`FingerprintHash`选项添加到`ssh(1)`and `sshd(8)`，并将等效的命令行标志添加到其他工具，以控制用于密钥指纹的算法。默认从 MD5 更改为 SHA256，格式从 hex 更改为 base64。
> 
> 指纹现在预先添加了哈希算法。
> 新格式的示例：

```
SHA256:mVPwvezndPv/ARoIadVY98vAC0g+P/5633yTC4d/wXE 
```

> 请注意，视觉主机键也会有所不同。
> 
> 自 2015 年 3 月 18 日以来，gitolite的[最新 git checkout 已意识到这种新格式。](https://github.com/sitaramc/gitolite/commit/ed807a40c6683960e357bc995b3acf721ec088b4)

# sharepoint-2010 - SharePoint 工作流开发

> ID：10736774
> 
> 赞同：0
> 
> 时间：2012-05-24T11:40:09.463
> 
> 标签：sharepoint-2010, sharepoint-workflow

尝试创建类型为“SharePoint 2010 Sequential workflow”的新 Visual Studio 2010 项目时收到一条奇怪的错误消息：

“位于“somesite”的 SharePoint 网站缺少目标、任务或历史列表。这些列表中的每一个都需要关联工作流模板。请创建一个列表，然后启动此向导。

我的 Visual Studio 2010 解决方案中已经有两个项目：定义了许多 SharePoint 自定义列表的 MyListsDef 和定义了站点的 MySiteDef，以便在创建新的 SharePoint 站点时填充这些列表。

我必须在 Visual Studio 2010 中为我的一些列表创建 SharePoint 工作流项目。

在我的解决方案中创建第三个（SharePoint Sequential 工作流）项目之前，我做了一些步骤：

1.  编译并打包 MyListsDef 和 MySiteDef，
2.  在我的 SharePoint 2010 服务器上安装 MyListsDef.wsp 和 MySiteDef.wsp 作为解决方案，
3.  基于 MySiteDef 模板创建新的 SharePoint 2010 站点，
4.  参考在步骤 #3 中创建的 SharePoint 站点创建新的 Visual Studio 2010 项目“SharePoint 2010 顺序工作流”。

但是，我总是收到错误消息“...缺少目标、任务或历史列表”。每次我选择在第 3 步中创建的站点作为第 4 步中 Visual Studio 2010 中顺序工作流向导的参考。

此错误是什么意思，缺少哪些列表？
我做错了什么？
使用自定义列表开发 SharePoint 工作流的典型方法是什么？

在此先感谢，
萨尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:51:10.907

萨尔，

当未创建工作流所需的列表时会发生这种情况。

执行以下操作以使其工作：

1.  **激活**与工作流相关的任何功能（首先在 SITE COLL 级别，然后在 WEB 级别）
2.  转到该站点并选择一个列表
3.  单击功能区中的工作**流程****设置**
***   然后**添加**工作流程，然后选择一些工作流程（例如：批准）*   **保存**它**

 **上述过程将创建工作流处理所需的列表。现在您可以继续使用 Visual Studio 工作。**

# c# - Windows Phone 7 Listbox.ItemContainerGenerator.ContainerFromIndex(i) 返回 null？

> ID：10736775
> 
> 赞同：0
> 
> 时间：2012-05-24T11:40:09.497
> 
> 标签：c#, silverlight, windows-phone-7.1

我正在尝试通过以下代码获取列表框项。基本上我要做的是创建一个 tempdatelist，然后将 Listbox 的 itemsource 设置为 tempdatelist。

```
if (App.Saveholidayplan[App.selectedlistindex].travel.Count > 0)       
    foreach (var dictobj in App.Saveholidayplan[App.selectedlistindex].travel[0].DummyRepository)                
        tempdatelist.Add(dictobj.Key);

lst_mainlist.ItemsSource = tempdatelist; 

ListBoxItem item = this.lst_mainlist.ItemContainerGenerator.ContainerFromIndex(i) as ListBoxItem; 

//* item is alway null, that is the problem
if(item != null) 
```

但在上面的代码项中返回 null。

当我在线查看一些建议调用`ItemContainerGenerator.StatusChanged`事件时。

但我无法在 WP7 中找到此事件？WP7 中是否有 StatusChanged 事件，如果没有，还有什么替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-20T00:00:44.917

我也有这个问题。解决方案是使用调度程序等待 UI 呈现，如下所示：

```
this.Dispatcher.BeginInvoke(() =>
{
   ListBoxItem item = this.lst_mainlist.ItemContainerGenerator.ContainerFromIndex(i);
   //...
}); 
```

# c++ - 用于 Atmel AVR 的车辆 GPS 跟踪

> ID：10736776
> 
> 赞同：0
> 
> 时间：2012-05-24T11:40:15.253
> 
> 标签：c++, gps, gis, tracking, atmel

我已经为车辆跟踪设备制作了电路，现在我陷入了支持闪存的 Atmel AVRmega2561 的代码中。

请告知我应该从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:50:37.177

首先了解一下[卡尔曼滤波器](http://en.wikipedia.org/wiki/Kalman_filter)，它可以让您过滤 GPS 数据。

为了提供更多帮助，我们需要查看电路并了解您尝试过的内容和/或您的经验。

# haskell - 在删除不透明的 FFI 对象之前，我应该期望垃圾收集需要多长时间？有没有可能以某种方式加速它？

> ID：10736780
> 
> 赞同：6
> 
> 时间：2012-05-24T11:40:26.307
> 
> 标签：haskell, garbage-collection, ghc, ffi

我考虑将 Haskell 绑定编写到用 C++（我会编写一个普通的 C 包装器）和 CUDA 编写的量子力学库。一个主要瓶颈始终是 CUDA 部件使用的 GPU 内存。在 C++ 中，这可以非常有效地处理，因为所有对象都有自动内存管理，即一旦它们离开范围就被擦除。此外，我使用 C++11 移动语义来避免复制，这些显然在 Haskell 中是不必要的。

然而，我担心当从垃圾收集的 Haskell 管理对象时它可能不再那么顺利了，我可能需要提出启发式方法将很少使用的对象迁移回主机内存（这往往很慢） . 这种担心是合理的，还是 GHC 垃圾收集如此有效，以至于大多数对象几乎会像在 C++ 中一样迅速消失，即使 Haskell 运行时不认为它需要在内存上经济？是否有任何技巧可以提供帮助，或者有什么方法可以表明某些对象占用了过多的 GPU 内存并且应该尽快删除？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T11:42:21.960

> 即使 Haskell 运行时不认为它需要在内存上经济？

这就是问题所在：GHC GC 不知道您的外来对象有多大，因此它们不会施加任何堆压力，因此不会尽快收集。

`performGC`您可以通过手动调用强制执行主要 GC来缓解这种情况。

# oauth-2.0 - google oauth2：为 Web 服务器应用程序上的授权用户重新获取 refresh_token

> ID：10736781
> 
> 赞同：3
> 
> 时间：2012-05-24T11:40:28.703
> 
> 标签：oauth-2.0, google-contacts-api

我在网络服务器上使用 oauth2 并且流程完美无缺（https://developers.google.com/accounts/docs/OAuth2WebServer）。

但是，在某些情况下，我需要重新获取 refresh_token（例如，refresh_token 已“丢失”）。

在这种情况下，当我再次经历第 1 和第 2 阶段时，我只会得到一个 access_token 而不是一个 refresh_token。如果用户通过他的谷歌帐户控制台撤销权限并再次通过阶段 1 和 2，我将获得一个新的 refresh_token。

这是已知的 oauth2 行为吗？有没有办法强制一个新的 refresh_token 或再次获得相同的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T16:41:30.837

从[https://developers.google.com/accounts/docs/OAuth2WebServer](https://developers.google.com/accounts/docs/OAuth2WebServer)：

重要提示：当您的应用程序接收到刷新令牌时，请务必存储该刷新令牌以供将来使用。如果您的应用程序丢失了刷新令牌，则必须重新提示用户同意，然后才能获取另一个刷新令牌。**如果您需要重新提示用户同意，请在授权码请求中包含approval_prompt参数，并将值设置为强制。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T12:41:31.980

黄油答案在[这里](https://stackoverflow.com/questions/10827920/google-oauth-refresh-token-is-not-being-received)。您必须`approval_prompt=force`在令牌的发布请求中添加参数。

# c# - 在windows mobile中画线

> ID：10736783
> 
> 赞同：1
> 
> 时间：2012-05-24T11:40:36.220
> 
> 标签：c#, windows-mobile, windows-mobile-6

我正在使用 windows mobile 并想在屏幕上画线或写名字？

我搜索了 GDI+ 或相关但无法完成。我怎样才能画线？我的鼠标按下事件代码如下，但它不平滑，并且线条中的间隙不正确的线条绘制。

```
int radius = 3; //Set the number of pixel you wan to use here
                //Calculate the numbers based on radius
                int x0 = Math.Max(e.X - (radius / 2), 0),
                    y0 = Math.Max(e.Y - (radius / 2), 0),
                    x1 = Math.Min(e.X + (radius / 2), pbBackground.Width),
                    y1 = Math.Min(e.Y + (radius / 2), pbBackground.Height);
                Bitmap bm = (Bitmap)pbBackground.Image; //Get the bitmap (assuming it is stored that way)
                for (int ix = x0; ix < x1; ix++)
                {
                    for (int iy = y0; iy < y1; iy++)
                    {
                        bm.SetPixel(ix, iy, Color.Black); //Change the pixel color, maybe should be relative to bitmap
                    }
                }
                pbBackground.Refresh(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T17:29:43.783

执行此操作的最简单方法是使用 Graphics 类实例（尽管您可能必须使用定位来使线条位置与您正在寻找的宽度完全正确）：

```
 int radius = 3; //Set the number of pixel you wan to use here
                //Calculate the numbers based on radius
                int x0 = Math.Max(e.X - (radius / 2), 0),
                    y0 = Math.Max(e.Y - (radius / 2), 0),
                    x1 = Math.Min(e.X + (radius / 2), pbBackground.Width),
                    y1 = Math.Min(e.Y + (radius / 2), pbBackground.Height);
                Bitmap bm = (Bitmap)pbBackground.Image; //Get the bitmap (assuming it is stored that way)
                using (Graphics g = Graphics.FromImage(bm))
                {
                    Pen p = new Pen(Color.Black, radius);
                    g.DrawLine(p, x0, y0, x1, y1);
                    p.Dispose();
                }

                pbBackground.Refresh(); 
```

# jquery - 在一个网站中使用 Google API 获取动态 RSS 链接的多个提要

> ID：10736784
> 
> 赞同：1
> 
> 时间：2012-05-24T11:40:41.447
> 
> 标签：jquery, rss, google-api, hyperlink

我正在使用 Google feed API 在我的网站中加载 rss。[https://developers.google.com/feed/v1/devguide](https://developers.google.com/feed/v1/devguide)
中提到的程序适用于从链接中获取 rss。

```
var feed = new google.feeds.Feed("https://stackoverflow.com/feeds");
//other Codes
google.setOnLoadCallback(myFunction); 
```

我的方案是在我的网站中为动态链接加载多个 rss 提要
例如，如果链接如下：

*   [http://www.codeplex.com/site/feeds/rss](http://www.codeplex.com/site/feeds/rss)
*   [https://stackoverflow.com/feeds](https://stackoverflow.com/feeds)
*   [http://fastpshb.appspot.com/feed/1/fastpshb/rss](http://fastpshb.appspot.com/feed/1/fastpshb/rss)

现在我尝试获取多个动态链接的 Rss。

```
$('li').each(function(index, value)
{
    var text = $(this).text();
    var feed = new google.feeds.Feed(text);
});
//Other Codes
google.setOnLoadCallback(myFunction); 
```

仅获取最后一个链接的 rss。

在此链接[https://developers.google.com/feed/v1/reference#resultFind](https://developers.google.com/feed/v1/reference#resultFind)
上提到
.setOnLoadCallback(callback) 是一个静态函数，它注册要在包含此调用的页面加载后调用的指定处理程序函数，其中 callback 是在加载包含文档并且 API 可供使用时调用的必需函数（例如，在 onLoad 之后）。

这是 .setOnLoadCallback 执行最后一个链接的原因吗？
这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:21:53.317

我不确定回答我自己的问题是否好。
我已经得到了解决方案。我不会删除这篇文章，因为如果将来有人遇到同样的问题，这个解决方案可以帮助他们。
[http://groups.google.com/group/google-ajax-search-api/browse_thread/thread/5a8fe4073f186b53/f33186dce7229905](http://groups.google.com/group/google-ajax-search-api/browse_thread/thread/5a8fe4073f186b53/f33186dce7229905)

# c# - 如何使用 C# 代码访问共享网络驱动器文件

> ID：10736790
> 
> 赞同：4
> 
> 时间：2012-05-24T11:40:47.533
> 
> 标签：c#, asp.net

手动我已将网络驱动器**Y://**映射 到我的系统。驱动器有许多文件夹，每个文件夹都包含与文件夹相同的单个 XMl 文件。

在这里，我正在尝试从网络位置读取 Xml 文件。但它给出了**未找到的异常目录**。下面我正在使用的代码。

```
 Fname = txtwbs.Text;           
                 DirectoryInfo objDir = new DirectoryInfo("Y:\\");    

                 \\Y:\\
                 protected void ImageButton1_Click(object sender, ImageClickEventArgs e)
                 {
                 _xmlpath = objDir + "\\" + Fname + "\\" + Fname + ".xml";           
                 if (File.Exists(_xmlpath ))           
                  {          
                   reader(_xmlpath);          
                  } 
                 } 
```

这里 Fname 是文件夹名称也是 Xml 名称。无论用户输入文件的名称。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-12-10T11:29:14.560

获取此代码： http: [//pastebin.com/RZnydz4Z](http://pastebin.com/RZnydz4Z)

然后在 global.asax 的 Application_Start 上放这个：

```
protected void Application_Start(object sender, EventArgs e) 
{
    Utilities.Network.NetworkDrive nd = new Utilities.Network.NetworkDrive();        
    nd.MapNetworkDrive(@"\\server\path", "Z:", "myuser", "mypwd");
} 
```

然后就像普通的网络驱动器一样使用，像这样：

```
File.ReadAllText(@"Z:\myfile.txt"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T11:53:25.723

您已将此帖子标记为 asp.net 和 asp-classic。从您的代码示例中，我猜 asp-classic 不适用。

如果您在 ASP.Net 中运行，系统将不知道您创建的映射驱动器。您应该改用 UNC 路径。如果您没有使用 Windows 身份验证运行该站点，您还需要模拟有权访问共享的人，因为您的匿名用户很可能会收到“拒绝访问”错误。

最后，我认为您不需要 DirectoryInfo 调用-使用 Path.Combine()

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T11:47:33.080

理想情况下，您应该使用*UNC 路径*来访问文件。`\\server\share\path\to\file`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T15:24:44.543

身份冒充对我有用

```
......

 <system.web>
<identity impersonate="true" userName="yourdomain\yourusername" 
    password="yourpassword" />
......
...... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T11:45:10.940

使用此 API。[http://www.codeproject.com/Articles/6847/Map-Network-Drive-API](http://www.codeproject.com/Articles/6847/Map-Network-Drive-API)

这是我设法在代码中做到这一点的唯一方法。只需修改类，使其适合您的项目。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-24T11:56:05.520

使用 UNC 路径而不是网络驱动器，并确保运行您的应用程序的用户有权访问该文件夹及其内容。“找不到文件”可能意味着权限错误或路径错误。

# c# - jQuery Post 后发送到控制器的空值

> ID：10736795
> 
> 赞同：1
> 
> 时间：2012-05-24T11:41:29.013
> 
> 标签：c#, jquery, asp.net-mvc, asp.net-mvc-3, razor

我有一些代码尝试使用 Ajax 帖子将 Viewmodel 发送回控制器。如果我以一种方式编写代码，它会正确传递，而另一种方式它会在视图模型中返回 null 或 0 值。

工作方式：

```
$(document).ready(function () {
        $(".boxItem").change(function (event) {
            var url = "/Search/GetBoxChangeInfo";
            $.post(url, @Html.Raw(Json.Encode(Model)), function (data) {
                $("#column-1").html(data);
            });
        });
    }); 
```

以及返回空值的方式：

```
$(document).ready(function () {
        $(".boxItem").change(function (event) {
            var url = "/Search/GetBoxChangeInfo";
            $.post(url, { json: @Html.Raw(Json.Encode(Model)) }, function (data) {
                $("#column-1").html(data);
            });
        });
    }); 
```

我需要以第二种方式使用它，因为我还需要将有关所选值和 ID 的参数传回，所以它看起来像：

```
$(document).ready(function () {
        $(".boxItem").change(function (event) {
            var str = $(this).attr('id');
            var num = $(this).val();
            var url = "/Search/GetBoxChangeInfo";
            $.post(url, { json: @Html.Raw(Json.Encode(Model)), id : str, selected : num  }, function (data) {
                $("#column-1").html(data);
            });
        });
}); 
```

我的控制器看起来像这样：

```
[HttpPost]
public ActionResult GetBoxChangeInfo(EventViewModel json)
{ 
     //stuff
} 
```

编辑 - 根据要求，这里是 EventViewModel 结构

```
[JsonObject(MemberSerialization.OptIn)]
public class EventViewModel
{
    public int EventNumber { get; set; }
    public List<EventItemsViewModel> EventItems { get; set; }
    public List<LocationViewModel> Locations { get; set; }
    public int StartLocationID { get; set; }
    public bool Outbound { get; set; }
    public List<int> SelectedEvents { get; set; }
    public List<DurationsViewModel> Durations { get; set; }
} 
```

有谁知道为什么会发生这种情况？以这种方式可以将很多东西发送到控制器是否有限制 - 这是一个非常复杂的视图模型，所以想知道这是否与它有关。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:45:19.387

像这样：

```
$(document).ready(function () {
    $('.boxItem').change(function (event) {
        var str = $(this).attr('id');
        var num = $(this).val();
        var url = '@Url.Action("GetBoxChangeInfo", "Search")';
        $.ajax({
            url: url,
            contentType: 'application/json',
            data: JSON.stringify({ 
                json: @Html.Raw(Json.Encode(Model)), 
                id: str, 
                selected: num  
            }),
            success: function(data) {
                $("#column-1").html(data);
            }
        });
    });
}); 
```

注意事项：

*   `contentType: 'application/json'`
*   `JSON.stringify`将对象转换为 JSON 字符串
*   `var url = '@Url.Action("GetBoxChangeInfo", "Search")';`避免硬编码网址

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:44:56.953

> 以这种方式可以将很多东西发送到控制器是否有限制 - 这是一个非常复杂的视图模型，所以想知道这是否与它有关。

是的，有 1000 个 HTTP 集合密钥，您可以在 web.config 中自己配置。尝试先将值设置为 4000，然后如果您愿意，可以将其降低一点。试试这个：

```
<appSettings>
    <add key="aspnet:MaxHttpCollectionKeys" value="4000" />
</appSettings> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T11:45:15.370

使用这个 [http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

$.ajax({ type: 'POST', url: url, data: data, success: 成功, dataType: dataType });

，我的意思不是速记 Axaj Call。您有“成功”、“错误”、“已完成”等选项，并且可以隔离问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T12:09:53.663

我在 ASP.NET MVC 上遇到了同样的*错误。*在您的模型上，您放置`ConvertEmptyStringToNull = false`模型的属性：

```
[DisplayFormat(ConvertEmptyStringToNull = false)] 
```

例如

```
public class Person
{
    [DisplayFormat(ConvertEmptyStringToNull = false)]
    public string Lastname { get; set; }
    [DisplayFormat(ConvertEmptyStringToNull = false)]
    public string Firstname { get; set; }
    [DisplayFormat(ConvertEmptyStringToNull = false)]
    public string Middlename { get; set; }
} 
```

当我在这篇文章中遇到同样的事情时，我记录了：[http ://www.ienablemuch.com/2011/08/empty-string-is-empty-string.html](http://www.ienablemuch.com/2011/08/empty-string-is-empty-string.html)

# android - 我是否需要 root 我的 Android 手机才能运行我自己的应用程序？

> ID：10736799
> 
> 赞同：2
> 
> 时间：2012-05-24T11:41:39.490
> 
> 标签：android

如果我使用 Android SDK 或 NDK 编写应用程序，我可以简单地将生成的 APK 复制到任何 Android 手机（运行正确版本的操作系统）并运行它吗？或者我是否需要root手机才能运行不是通过市场购买的应用程序？

背景是我可以选择 Galaxy S2 作为 iPhone4 的升级版，我想开始编写自己的东西。*我可以在模拟器*中找到大量编译和运行应用程序的说明和示例，但没有明确说明我可以在 S2 上运行我编译的应用程序。我担心应用程序可能需要经过签名或身份验证才能在其（和其他手机）上运行，我不想过多地使用手机。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:43:05.423

您可以下载它并在没有 root 的情况下运行它。

您甚至可以在您的开发环境中直接在设备上进行调试。

eclipse（以及其他）中的 Android 开发工具环境 (ADT) 和适用于您手机的正确 ADB USB 驱动程序为您提供了不错的选择。也比使用 android 模拟器快得多。

在设置中，您必须允许调试（一个简单的复选框），仅此而已。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T11:44:12.803

不，你不需要root。只需安装驱动程序和 SDK。使用 eclipse 你也可以直接在设备上运行和调试

它也比在模拟器上工作更快

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T11:59:22.163

如果您获得 Galaxy S2，那么您可以安装三星自己的免费应用程序“Kies Air”。这使您可以通过 wifi 将文件从您的 PC 传输到您可以在手机的文件资源管理器中看到的任何地方。如果您以这种方式传输 apk，那么当您在手机的文件资源管理器中单击它时，它将安装该应用程序。该应用程序可以使用调试密钥或发布密钥进行签名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T11:44:54.927

你不需要root。为了在 android 手机上安装，您只需通过 eclipse ADT 工具或仅通过 ADT 终端在手机上安装应用程序。只需记住通过进入设置->程序将手机设置为开发模式，然后允许从未知来源安装。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-24T11:47:21.727

或者，如果您想在您的设备上安装 *.apk，请从市场下载应用程序。按照此链接获取有关此方法和 SDK/调试方法的指南：[http ://www.talkandroid.com/guides/beginner/install-apk-files-on-android/](http://www.talkandroid.com/guides/beginner/install-apk-files-on-android/)

# java - Java小程序/对话框奇怪的行为

> ID：10736800
> 
> 赞同：1
> 
> 时间：2012-05-24T11:41:43.320
> 
> 标签：java, swing, applet, awt, jdialog

我有一个重要的 Java 小程序。它有一个菜单，并通过该菜单小程序显示一个扩展的对话框`JDialog`。使用 显示对话框`setVisible(true)`。当用户完成该对话框的工作时，对话框关闭（在按下“完成”按钮后）使用`this.dispose()`.

现在，有一个奇怪的问题 - 小程序在 Firefox 中运行良好，即使在 IE 中但在 Chrome 中，当小程序显示其他（对话框）窗口时，该窗口显示在小程序**后面**。我必须单击应显示对话框的位置（将其放在前面）。如果我再次单击它（显示时），它将再次消失（转到背景）。按钮点击照常工作，但每当我点击弹出窗口本身（甚至是标题栏）时，它都会改变它的“可见”状态。

请问，有什么问题吗？如何解决该错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T11:48:05.420

```
// the applet will typically appear inside a Window, get a reference to it using:
Window parent = Window.getWindows()[0];
// use the window as the parent of a modal dialog.
JDialog dialog = new JDialog(parent);
dialog.setModal(true);
// ...
dialog.setVisible(true);
// won't be called until the applet is dismissed 
someJComponent.requestFocusInWindow(); 
```

嵌入在网页中的小程序总是会遇到模态和焦点问题。为了获得更好的用户体验，请使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)自由浮动启动小程序，或者更好的是，使用 JWS 启动框架。

# jsf-2 - 动作如何导致带有 h:commandButton 的 div 或面板

> ID：10736803
> 
> 赞同：0
> 
> 时间：2012-05-24T11:42:05.363
> 
> 标签：jsf-2, primefaces

我试图在面板中显示操作结果：

`<p:panel id="pnl" style="margin-bottom:10px;"> <p:commandButton id="addUser" value="Ajouter" action="#{userMB.addUser}" ajax="false" target=":pnl">`

但我无法在同一页面中获得结果，单击后我会进入新页面。

如您所见，我为此使用了目标，有办法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:00:57.010

1.  将“目标”更改为“更新”一词并删除 ajax="false"
2.  确保您的操作方法 addUser 不返回任何内容（方法签名的返回声明为“void”）或返回 null
3.  您可能需要使您的支持 bean 视图作用域（如果您更改为 ViewScoped，请确保您的支持 bean 是可序列化的）

# iphone - 如何在视图中使用 appdelegate 变量

> ID：10736812
> 
> 赞同：1
> 
> 时间：2012-05-24T11:43:01.320
> 
> 标签：iphone

我在 appdelegate 中声明了一个变量`NSString productname`，并从一个视图中赋值。然后`appdelegate.productname = name`我试图从另一个视图中获取这个值`view.lbl.text=appdelegate.productname`。这是错的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T12:30:54.557

你可以在 appdelegate.h 文件中声明变量，这些变量是全局的，你不需要创建 appdelegate 对象来调用它们。

像这样 -

```
#import <UIKit/UIKit.h>

@class ViewController;

// these are your variable, both are global. 
int anyNumber; 
NSString *productname;

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) ViewController *viewController;
@property (strong, nonatomic) UINavigationController *naviCon;

@end 
```

现在您可以在任何您想使用的地方使用这些变量。

只需导入 appdelegate.h 并自由使用。

```
#import "ViewController.h"
#import "AppDelegate.h" 
```

这是您将值分配给 appdelegate 字符串的第一个视图。

```
productname = name; //you can assign it directly, no need to make any object of appdelegate. 
```

现在您可以在任何地方使用它。但请记住您必须导入的小东西

```
#import "AppDelegate.h" 
```

在您的视图控制器中。

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T12:03:49.653

您可以使用以下代码获取它：

```
UIApplicationDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
NSString *productName = appDelegate.productname; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T12:29:51.533

```
UIApplicationDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
NSString * str = appDelegate.yourstr; 
```

# sql - 获取下一个最小值，大于或等于每个组的给定值

> ID：10736813
> 
> 赞同：6
> 
> 时间：2012-05-24T11:43:03.943
> 
> 标签：sql, sql-server-2012, greatest-n-per-group

给出下表1：

```
 RefID  intVal  SomeVal
    ----------------------
        1      10    val01
        1      20    val02
        1      30    val03
        1      40    val04
        1      50    val05
        2      10    val06
        2      20    val07
        2      30    val08
        2      40    val09
        2      50    val10
        3      12    val11
        3      14    val12
        4      10    val13
        5     100    val14
        5     150    val15
        5    1000    val16 
```

和 Table2 包含一些 RefID 和 intVals，例如

```
 RefID  intVal
    -------------
        1      11    
        1      28    
        2       9    
        2      50    
        2      51    
        4      11    
        5       1    
        5     150    
        5     151 
```

需要一条 SQL 语句来为每个 RefID 获取下一个更大的 intValue，如果在 Table1 中找不到，则为 NULL 以下是预期结果

```
 RefID  intVal  nextGt  SomeVal 
    ------------------------------
        1      11      20  val01
        1      28      30  val03
        2       9      10  val06
        2      50      50  val10
        2      51    NULL   NULL
        4      11    NULL   NULL
        5       1     100  val14
        5     150     150  val15
        5     151    1000  val16 
```

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T11:52:00.333

派生表从给定的表 1和表 2 中`a`检索最小值；外部查询仅检索 someValue。`refid``intVal`

```
select a.refid, a.intVal, a.nextGt, table1.SomeVal
from
(
    select table2.refid, table2.intval, min (table1.intVal) nextGt
      from table2
      left join table1
        on table2.refid = table1.refid
       and table2.intVal <= table1.intVal
     group by table2.refid, table2.intval
) a
-- table1 is joined again to retrieve SomeVal 
left join table1
  on a.refid = table1.refid
 and a.nextGt = table1.intVal 
```

[这是带有现场测试的 Sql Fiddle](http://sqlfiddle.com/#!3/34837/2)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T12:00:55.550

您可以使用以下功能解决此问题`ROW_NUMBER()`：

```
SELECT
  RefID,
  intVal,
  NextGt,
  SomeVal,
FROM
  (
    SELECT
      t2.RefID,
      t2.intVal,
      t1.intVal AS NextGt,
      t1.SomeVal,
      ROW_NUMBER() OVER (PARTITION BY t2.RefID, t2.intVal ORDER BY t1.intVal) AS rn
    FROM
      dbo.Table2 AS t2
      LEFT JOIN dbo.Table1 AS t1 ON t1.RefID = t2.RefID AND t1.intVal >= t2.intVal
  ) s
WHERE
  rn = 1
; 
```

派生表将每一`Table2`行与`Table1`具有相同`RefID`和`intVal`大于或等于的所有行匹配`Table2.intVal`。每个匹配子集都被排序，第一行由主查询返回。

嵌套查询使用外连接，因此仍然返回那些`Table2`没有匹配的行（用空值代替列）。`Table1``Table1`

或者，您可以使用`OUTER APPLY`：

```
SELECT
  t2.RefID,
  t2.intVal,
  t1.intVal AS NextGt,
  t1.SomeVal
FROM
  dbo.Table2 AS t2
  OUTER APPLY
  (
    SELECT TOP (1)
      t1.intVal
    FROM
      dbo.Table1 AS t1
    WHERE
      t1.RefID = t2.RefID
      AND t1.intVal >= t2.intVal
    ORDER BY
      t1.intVal ASC
  ) AS t1
; 
```

这种方法可以说更直接：对于每一`Table2`行，根据同一组条件获取所有匹配`Table1`项，按 的升序对匹配项进行排序`Table1.intVal`并取最上面的`intVal`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T13:34:04.750

这可以通过 join、group by、case 语句和一个技巧来完成：

```
select t1.refid, t2.intval,
       min(case when t1.intval > t2.intval then t1.intval end) as min_greater_than_ref,
       substring(min(case when t1.intval > t2.intval
                          then right('00000000'+cast(t1.intval as varchar(255)), 8)+t1.SomeVal)
                     end)), 9, 1000)
from table1 t1 left join
     table2 t2
     on t1.refid = t2.refid
group by t1.refid, t2.intval 
```

所以，诀窍是将整数值添加到 SomeValue，将整数值补零（在本例中为 8 个字符）。你会得到类似的东西：“00000020val01”。此列的最小值基于整数的最小值。最后一步是提取值。

对于此示例，我使用 SQL Server 语法进行连接。在其他数据库中，您可能会使用 CONCAT() 或 ||。

# java - USB加密API

> ID：10736816
> 
> 赞同：-5
> 
> 时间：2012-05-24T11:43:05.730
> 
> 标签：java, usb

我正在为大学做一个项目，我正在创建一个将加密文件和解密文件的网站。

现在我想添加一个功能，该功能将提供从`HTML`表单中选择 USB 驱动器的功能，并使该 USB 密码受到保护。我没有想法。我进行了很多搜索，发现了很多教程`C#`，`C++`但我不知道如何在服务器上进行操作。

是否有任何提供此功能的 java API？我发现：`jUSB`，但它似乎没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T12:17:02.820

一种解决方案可能是使用 https，然后在服务器端加密/解密。

您还可以使用 Javascript 加密/解密。一些示例源代码，使用 RC4（只是为了让您入门）。但是要做到正确非常棘手，我认为您不应该这样做，除非您真的了解加密，并且没有其他方法。或者，如果您并不真正关心安全性。

```
function encrypt(text, password) { 
    for(s=[], i=0; i<256; i++) s[i] = i; 
    for(j=0, len=password.length, t=0, i=0; i<256; i++) { 
        j = (j + s[i] + password.charCodeAt(i % len)) & 255;
        t = s[i]; s[i] = s[j]; s[j] = t; 
    } 
    for(j=0, i=0, len= text.length, x=0, r=[]; x<len; x++) {
        i = (i + 1) & 255; j = (j + s[i]) & 255; t = s[i]; s[i] = s[j]; s[j] = t; 
        r.push(String.fromCharCode(s[(s[i]+s[j]) & 255] ^ text.charCodeAt (x))); 
    } 
    return r.join(''); 
} 
```

# iphone - FFMPEG：从 FLV 转换为 MP4 的视频不能在 iPod 中播放，但可以在 iPhone 中播放

> ID：10736817
> 
> 赞同：3
> 
> 时间：2012-05-24T11:43:13.193
> 
> 标签：iphone, ffmpeg, ipod

我使用以下命令将视频从 FLV、M4V 转换为 MP4。

> ffmpeg -y -i video_1336406262.flv -vcodec libx264 -vpre slow -vpre ipod640 -b 250k -bt 50k -acodec libfaac -ac 2 -ar 48000 -ab 64k -s 480x320 video_1336406262.mp4

从 M4V 转换为 MP4 的视频在 iPhone 和 iPod 中都播放得很好，但从 FLV 转换为 MP4 的视频在 iPod 中不起作用，但在 iPhone 中可以。

在 HTML5 页面的视频区域 iPod 甚至不显示播放符号。

有人可以在这里帮忙吗？

我正在使用相同的命令从 FLV 和 M4V 转换为 MP4。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T14:47:51.783

我建议使用 HandBrakeCLI 将视频转换为 MP4。

Handbrake 有一些内置预设，允许精确的兼容性目标，请参阅[https://trac.handbrake.fr/wiki/BuiltInPresets](https://trac.handbrake.fr/wiki/BuiltInPresets)

内置的 ipod 预设与您需要的格式有一些差异，因此您的调用可以通过以下方式转换为 handrake 调用：

```
HandBrakeCLI -i video_1336406262.flv -e x264 -a 1 -E faac -6 dpl2 -R Auto -D 0.0 -f mp4 -I -m -x level=30:bframes=0:weightp=0:cabac=0:ref=1:vbv-maxrate=768:vbv-bufsize=2000:analyse=all:me=umh:no-fast-pskip=1:subme=6:8x8dct=0:trellis=0 -b 250 -B 64 -R 48 -X 480 -w 480 -l 320 -2 -o video_1336406262.mp4 
```

我无法证明这正是您所需要的，但这应该足够接近。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T21:04:44.620

转换 m4v -> mp4 没有意义。m4v 只是 mp4 的另一个扩展。

Mp4 不是视频格式，而是音频/视频/字幕/元数据的包装器。在我看来，问题来自个人资料。根据 iPhone 的世代，并非所有 h264 配置文件都受支持。

尝试添加`-coder 0`到您的命令中，它应该可以工作。

我想你从[这里](http://rodrigopolo.com/ffmpeg/cheats.html#X264_Presets/)得到你的命令，我注意到还有另一个命令应该做你想做的事：

```
iPod-iPhone 640 width, without presset :
ffmpeg -i INPUT -s 640x480 -r 30000/1001 -b 200k -bt 240k -vcodec libx264 coder 0 -bf 0 -refs 1 -flags2 -wpred-dct8x8 -level 30 -maxrate 10M -bufsize 10M-acodec libfaac -ac 2 -ar 48000 -ab 192k output.mp4 
```

根据我的经验，如果你想要一个好的质量/尺寸比，你应该更喜欢 2-pass encoding ：

```
ffmpeg -y -i input -r 30000/1001 -s 480x272 -aspect 480:272 -vcodec libx264 -b 512k -bt 1024k -maxrate 4M -flags +loop -cmp +chroma -me_range 16 -g 300 -keyint_min 25 -sc_threshold 40 -i_qfactor 0.71 -rc_eq "blurCplx^(1-qComp)" -qcomp 0.6 -qmin 10 -qmax 51 -qdiff 4 -coder 0 -refs 1 -bufsize 4M -level 21 -partitions parti4x4+partp8x8+partb8x8 -subq 5 -f mp4 -pass 1 -an -title "Title" output.mp4 
```

编码过程较长，但值得花时间！

最后一件事，而不是直接使用 ffmpeg，我更喜欢使用 Mencoder，它是 ffmpeg 的包装器（更多编解码器支持）。Mencoder 的一个不错的 GUI 应该是 Windows 的 MeGUI，它确实使编码过程更容易！

# php - 通过递归函数创建结构化数组

> ID：10736824
> 
> 赞同：0
> 
> 时间：2012-05-24T11:43:46.267
> 
> 标签：php, mysql, sql, arrays, recursion

我有一张桌子

![在此处输入图像描述](../Images/232acc8371702fd2737e3bad51406625.png)

我想递归地显示如下图

![在此处输入图像描述](../Images/ffc5393757336e0fce264bda0e2669e0.png)

我在php中使用递归函数

```
function  reccall($cat_id)
 {
   global $no,$recArray;
   $sql = "SELECT a.*
      FROM cat_master   
           WHERE 
        parent_id = $cat_id 
      ORDER BY 
        id ASC
      ";
         $result = mysql_query($sql) or die("Could not fetech Recursively");
    while($row = mysql_fetch_object($result))
    {
      $recArray[$no]['value'] = mysql_real_escape_string($row->value);
      $recArray[$no]['id'] = $row->id;
       ++$no;
      reccall($row->id);
    }
    return $recArray;    
 } 
```

但我无法生成一个结构化数组，就像订单不是图片一样。一个简单的数组一直在创建。任何人都可以帮助我创建结构化数组，如上面显示的顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:49:54.633

```
<?
// I identified this function separately because it is performed only once, for preparing data
// It's collect an array of all parents in the correct order for each id
function dest($array) {
    foreach($array as $key=>$value) {
        if($value['pid']==0) continue;

        $pid = $key;
        $array[$key]['dest'] = array();
        while ( $pid = $array[$pid]['pid'] ) {
            if($key == $pid) exit("this tree is broken");
            $array[$key]['dest'][] = $pid;
        }
    }

    return $array;
}
// Recursive function that puts the items in the correct tree. removes the parameter dest.
function tree($array) {
    foreach($array as $key=>$value) {
        if( is_array($value['dest']) && !empty($value['dest']) ) {
            $pid = array_pop($value['dest']);
            if( empty($value['dest']) ) unset($value['dest']);

            $array[$pid]['childrens'][$key] = $value;
            $array[$pid]['childrens'] = tree($array[$pid]['childrens']);
            unset($array[$key]);
        }
    }

    return $array;
}

$array = array(
    1 => array(
        'title'=>'q',
        'pid'=>0,
        ),
    2 => array(
        'title'=>'w',
        'pid'=>1,
        ),
    3 => array(
        'title'=>'e',
        'pid'=>0,
        ),
    4 => array(
        'title'=>'r',
        'pid'=>2,
        ),
    5 => array(
        'title'=>'t',
        'pid'=>1,
        ),
);

$tree = tree( dest($array) );

echo '<pre>';
print_r($array);
print_r($tree);
?> 
```

顺便说一句，我应该注意到这些数组不是很有用。最好使用函数的结果`dest()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:37:00.187

使用此功能而不是您的功能，我希望您的问题将得到解决

```
function reccall($cat_id)
 {
     $sql = "SELECT a.*
      FROM cat_master   
           WHERE 
        parent_id = $cat_id 
      ORDER BY 
        id ASC
      ";
         $result = mysql_query($sql) or die("Could not fetech Recursively");
    while($row = mysql_fetch_object($result))
    {
      $recArray[$no]['main']['value'] = mysql_real_escape_string($row->value);
      $recArray[$no]['main']['id'] = $row->id;         
      $recArray[$no]['child'] = reccall($row->id);
       ++$no;
    }
    return $recArray;    
 } 
```

# sql-server-2008 - 在新表的单行中显示所有表

> ID：10736828
> 
> 赞同：0
> 
> 时间：2012-05-24T11:43:51.133
> 
> 标签：sql-server-2008

在 SQL Server 中，我编写了一个查询来计算特定列，但我在多个表中显示所有计数，这不是一个好的显示方式。如何在新表中单行显示所有表？

```
 select COUNT(s.AssetSubType) as 'PhysicalServers' from Asset s
      where s.CompanyId = @companyId and
            s.AssetType = 1 and
            s.AssetSubType = 4 

   select COUNT(s.AssetSubType) as 'WorkStations' from Asset s
      where s.CompanyId = @companyId and
            s.AssetType = 1 and
            s.AssetSubType = 1 or s.AssetSubType = 3    

 select COUNT(s.AssetSubType) as 'EmailOnlyUsers' from Asset s
      where s.CompanyId = @companyId and
            s.AssetType = 2 and 
            s.AssetSubType = 16             

 select COUNT(s.OperatingSystem) as '#OfMSServers' from Asset s
      where s.CompanyId = @companyId and
            s.AssetType = 1 and
            s.AssetSubType = 4 and 
            s.OperatingSystem = 1 

 select COUNT(s.OperatingSystem) as '#OfLinuxServers' from Asset s
      where s.CompanyId = @companyId and
            s.AssetType = 1 and
            s.AssetSubType = 4 and 
            s.OperatingSystem = 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:58:44.027

像这样的东西应该适合你

```
select sum(case when s.AssetType = 1 and 
                     s.AssetSubType = 4 
                then 1 end) as 'PhysicalServers',
       sum(case when s.AssetType = 1 and 
                     (s.AssetSubType = 1 or s.AssetSubType = 3) 
                then 1 end) as 'WorkStations',
       sum(case when s.AssetType = 2 and 
                     s.AssetSubType = 16 
                then 1 end) as 'EmailOnlyUsers',
       sum(case when s.AssetType = 1 and 
                     s.AssetSubType = 4 and 
                     s.OperatingSystem = 1 
                then 1 end) as '#OfMSServers',
       sum(case when s.AssetType = 1 and 
                     s.AssetSubType = 4 and 
                     s.OperatingSystem = 2 
                then 1 end) as '#OfLinuxServers'
from Asset s
where s.CompanyId = @companyId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:58:37.377

您可以创建一个计算列“serverType”，它对每个配置类型都有一个唯一的值：

```
ALTER TABLE [Asset]
 ADD [serverType] AS (
    CASE 
     WHEN (AssetType = 1 and AssetSubType = 4) THEN 'PhysicalServers'
     WHEN (AssetType = 1 and AssetSubType = 1 AssetSubType = 3) THEN 'WorkStations'
     [etc..]
     ELSE 'Unknown'
    END
) 
```

然后你可以简单地查询

```
SELECT COUNT(s.OperatingSystem) FROM Asset s
WHERE s.CompanyId = @companyId 
GROUP BY serverType 
```

# asp.net - 仅在本地主机上的 WCF 端点？

> ID：10736831
> 
> 赞同：0
> 
> 时间：2012-05-24T11:44:02.093
> 
> 标签：asp.net, wcf

> **可能重复：**
> [将 WCF 服务访问限制为仅本地主机](https://stackoverflow.com/questions/10333217/restricting-wcf-service-access-to-only-localhost)

我为 .NET 项目设置了 WCF 方法。

我可以让端点在 https 和/或 http 上工作。

但是，我只希望 HTTP 版本 ( `bindingConfiguration="webBinding"`) 在 localhost 上工作。有没有办法在 web.config 中限制这一点？

我的成功设置非常有限，`<endpoint address="localhost/"myproj/mysvc.svc" />`但最终没有奏效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T12:01:15.690

来源：[为仅 LOCALHOST 侦听配置 WCF](https://stackoverflow.com/questions/2360540/configure-wcf-for-localhost-only-listening)

尝试将[BasicHttpBinding.HostNameComparisonMode 属性](http://msdn.microsoft.com/en-us/library/system.servicemodel.basichttpbinding.hostnamecomparisonmode.aspx)设置 为 `HostNameComparisonMode.Exact`.

或在配置文件中..

```
 <bindings>
          <basicHttpBinding>
            <binding name="Binding1"
                     hostNameComparisonMode ="Exact">
              <security mode="None" />
            </binding>
          </basicHttpBinding>
    </bindings> 
```

但更好的是使用命名管道绑定，它应该支持您正在使用的任何消息交换模式（它支持请求-响应，以及 WS 支持的相同并发和会话状态模式）。

来自 MSDN 标题为[“选择传输”的部分](http://msdn.microsoft.com/en-us/library/ms733769.aspx)

希望这有帮助..

# internet-explorer - 在某些 PC 上以文档 IE 7 模式加载页面

> ID：10736833
> 
> 赞同：0
> 
> 时间：2012-05-24T11:44:07.227
> 
> 标签：internet-explorer

我使用以下方法在 href 链接中附加一个跨度： $(this).find("a:first").append(""+ opts.closedSign +""); 工作正常，但在某些 PC 上，跨度似乎被迫换行。浏览器似乎切换到文档 IE 7 模式 尽管页面源相同，并且两台机器的 IE 版本相同（8）。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T12:02:20.243

需要检查两件事：1) 网站可能会被浏览器的兼容性设置强制进入兼容模式，或者 2) 响应中可能有一个 HTTP 标头，告诉浏览器以兼容模式运行。

# javascript - 使用 CSS 的表格列样式

> ID：10736844
> 
> 赞同：3
> 
> 时间：2012-05-24T11:44:40.673
> 
> 标签：javascript, jquery, html, css

我有以下 HTML 表格。我需要为每一列赋予背景颜色（第一列 = 红色，第二列 = 黄色，第三列 = 蓝色）。如何使用 CSS 做到这一点？

注意：这需要在 IE6 及更高版本中工作。

[http://jsfiddle.net/Lijo/kw4yU/](http://jsfiddle.net/Lijo/kw4yU/)

```
 <table id = "myTable">
    <thead>
        <tr>
            <th>
                 Name
            </th>
            <th>
                Address
            </th>
            <th>
                Age
            </th>
        </tr>
    </thead>
    <tr>
        <td>
            Lijo
        </td>
        <td>
            India
        </td>
        <td>
            27
        </td>
    </tr>
</table> 
```

* * *

**编辑：**

我通过将 js 代码放入 document.ready 中使其工作。感谢@Jose Rui Santos [http://jsfiddle.net/Lijo/kw4yU/11/](http://jsfiddle.net/Lijo/kw4yU/11/)

另一个解决方案是[http://jsfiddle.net/Lijo/kw4yU/12/](http://jsfiddle.net/Lijo/kw4yU/12/)

另一种方法：[列宽设置 - HTML 表格](https://stackoverflow.com/questions/12006917/column-width-setting-html-table)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T11:48:24.540

使用`+`选择器

```
​#myTable tr td {            /* makes all columns red */
    background-color: red;
}
#myTable tr td + td {       /* makes 2nd and 3rd columns yellow */
    background-color: yellow;
}
#myTable tr td + td + td {  /* makes 3rd column blue */
    background-color: blue;
} 
```

​<a href="http://jsfiddle.net/kw4yU/1/">演示在这里

**编辑**

上面的 CSS 只改变数据单元格的背景颜色。如果您还想包含表头，只需执行以下操作：

```
#myTable tr th,
#myTable tr td {
    background-color: red;
}

#myTable tr th + th,
#myTable tr td + td {
    background-color: yellow;
}

#myTable tr th + th + th,
#myTable tr td + td + td {
    background-color: blue;
} 
```

**编辑2**

一种[javascript 解决方案是](http://jsfiddle.net/kw4yU/6/)，使用 jQuery

```
$("#myTable th, #myTable td").each(function (i) {
    $(this).css('background-color', ['red', 'yellow', 'blue'][i % 3]);
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-24T11:48:21.417

你可以这样做：

```
td:nth-child(1){
    background-color: #f00;
}
td:nth-child(2){
    background-color: #ff0;
}
td:nth-child(3){
    background-color: #00f;
} 
```

但是，这是使用 CSS3，因此如果您想支持旧版浏览器，则需要使用 JavaScript。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T11:52:20.173

您可以`col`在`table`标签之后添加

```
<table id = "myTable">
<col style="background-color: red;" />
<col style="background-color: yellow;" />
<col style="background-color: blue;" />
<thead>
    <tr>
        <th>
             Name
        </th>
        <th>
            Address
        </th>
        <th>
            Age
        </th>
    </tr>
    </thead>
    <tr>
        <td>
            Lijo
        </td>
        <td>
            India
        </td>
        <td>
            27
        </td>
    </tr>
</table> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-24T11:53:19.787

使用 COL 标签。

```
<style>
table {
    background-color: black;
}
.first {
    background-color: orange;
}
.second {
    background-color: green;
}
.third {
    background-color: pink;
}
</style>

  <table id = "myTable">
  <col class="first" /><col class="second" /><col class="third" />
    <thead>
        <tr>
            <th>
                 Name
            </th>
            <th>
                Address
            </th>
    <th>
                Age
            </th>
        </tr>
    </thead>
    <tr>
        <td>
            Lijo
        </td>
        <td>
            India
        </td>
    <td>
            27
        </td>
    </tr>
</table> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-24T11:49:35.393

```
th,td{background:yellow}
th:first-child,td:first-child{background:red}
th:last-child,td:last-child{background:blue}​ 
```

像这样[http://jsfiddle.net/thebabydino/kw4yU/3/](http://jsfiddle.net/thebabydino/kw4yU/3/)

对于较旧的 IE 版本，请考虑使用兄弟选择器：

```
th,td{background:red}
th+th,td+td{background:yellow}
th+th+th,td+td+td{background:blue}​ 
```

... 或向 HTML 中的每一列添加一个类，然后对列类进行不同的样式设置。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-24T11:49:47.230

您可以为此使用 colgroup 标签

```
<table id="myTable">
  <colgroup span="2" style="background-color:#FF0000;"></colgroup>
  <colgroup style="background-color:#0000FF;"></colgroup>
  <thead>
        <tr>
            <th>
                 Name
            </th>
            <th>
                Address
            </th>
    <th>
                Age
            </th>
        </tr>
    </thead>
    <tr>
        <td>
            Lijo
        </td>
        <td>
            India
        </td>
    <td>
            27
        </td>
    </tr>

</table> 
```

如果你不想要内联 CSS，那么你可以给 colgroups 一个 id 或 class 并在你的样式表中引用它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-24T11:48:20.070

给 td 添加一个类。

HTML： `<td class="first">data</td>`

CSS：

```
td.first {
    background-color: #00FF00;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-24T11:49:21.147

表格不是按列构建的，而是按行构建的。因此，为了进行基于列的样式，每个单元格元素都必须应用一个单独的通用样式。

[小提琴](http://jsfiddle.net/kw4yU/2/)

风格

```
.col1 { background-color: #ffddbb; }
.col2 { background-color: #ddffbb; }
.col3 { background-color: #bbddff; } 
```

HTML

```
<table id = "myTable">
    <thead>
        <tr>
            <th class="col1">
                 Name
            </th>
            <th class="col2">
                Address
            </th>
    <th class="col3">
                Age
            </th>
        </tr>
    </thead>
    <tr>
        <td class="col1">
            Lijo
        </td>
        <td class="col2">
            India
        </td>
    <td class="col3">
            27
        </td>
    </tr>
</table> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-24T11:54:06.963

如果您不想更改 HTML 代码，可以尝试：

```
table tr td {
    background-color: orange;            
}

​table tr td+td {
    background-color: yellow;            
}

table tr td+td+td {
    background-color: green;            
} 
```

# hibernate - Hibernate复杂的集合映射麻烦

> ID：10736846
> 
> 赞同：0
> 
> 时间：2012-05-24T11:44:44.233
> 
> 标签：hibernate, collections, map, annotations, mapping

我有具有复杂映射的实体，我无法正确注释。

以下是实体：

```
@Entity
@Table(name = "bank")
class Bank {
    @Column(name = "type")
    int type

    @ElementCollection
    @CollectionTable(name = "bank_fp", joinColumns = @JoinColumn(name = "bank_id"))
    @MapKeyColumn(name = "finance_percent")
    Map<Double, BankRates>
}

? embeddable or entity ?
class BankRates {
    @ElementCollection
    @CollectionTable(name = "bankrates", joinColumns = @JoinColumn(name = "bfp_id"))
    @MapKeyColumn(name = "track_class")
    Map<String, TrackRates>
}

? embeddable or entity ?
class TrackRates {
    ? how to map ?
    Map<YearsRange, Double>
}

@Embeddable
@Access(AccessType.FIELD)
class YearsRange {
    @Column(name = "from")
    int from
    @Column(name = "to")
    int to
} 
```

在我看来，这些是表格：

```
Bank: id, type
bank_fp: id, bank_id, finance_percent - table for the map in the bank entity
bank_rates: bfp_id, track_class, from, to, rate - table for BankRates, TrackRates, YearsRange all embedded in a single table cuz its only mappings 
```

那些是hibernate映射高手的请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:37:11.840

`@entity class BankRates`因为它有自己的 id

因为`bank_rates`包含很多 (bfp_id, track_class) 的重复项，所以您不能像这样映射它，您必须自己实现映射逻辑

```
class BankRates {
    @ElementCollection
    @CollectionTable(name = "bankrates", joinColumns = @JoinColumn(name = "bfp_id"))
    List<TrackRate>

}

@Embeddable
class TrackRate {
    @Column(name = "track_class")
    String trackClass;
    YearsRange
    Double
}

@Embeddable
@Access(AccessType.FIELD)
class YearsRange {
    @Column(name = "from")
    int from
    @Column(name = "to")
    int to
} 
```

# nosql - 在 Amazon SDB 中搜索项目 ID

> ID：10736852
> 
> 赞同：1
> 
> 时间：2012-05-24T11:45:10.190
> 
> 标签：nosql, amazon-web-services, amazon-simpledb

是否可以在 Amazon SDB 中搜索项目 ID，例如：

```
SELECT * FROM myDomain WHERE ItemName like '1234%' 
```

我是 nosql 的新手，使用 Amazon SimpleDB 制作第一个应用程序，为我的数据找出最佳架构。

正在考虑使 ItemName 成为 userId、topicId 和时间戳的串联 - 例如，对于论坛。因此，获取单个用户的所有帖子将是通过搜索 ItemNames，我想它们已编入索引 - 也许是更快的搜索。

或者我应该只为我的项目分配唯一的 ID，而不必担心它们的排序、命名约定等 - 只通过属性进行搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:48:40.473

是的..您在 Amazon SimpleDB 中搜索项目 ID，甚至可以使用项目 ID 对数据进行排序。以下是一些查询示例 -

```
select * from domain where itemName() like '1234%'
select * from domain limit N
select * from domain where itemName() like '1234%' order by itemName() limit 2500. 
```

有关更多详细信息，请参阅以下文档 -

[http://www.sdbexplorer.com/documentation/simpledb--how-to-run-select-query.html](http://www.sdbexplorer.com/documentation/simpledb--how-to-run-select-query.html) [http://aws.amazon.com/articles/1232](http://aws.amazon.com/articles/1232) [http://aws.amazon.com/articles /1231](http://aws.amazon.com/articles/1231)

披露：我是[SDB Explorer](http://www.sdbexplorer.com/)的开发人员。

# c# - 为什么我的鼠标在 WPF 中的按钮上移动时会变得不稳定

> ID：10736859
> 
> 赞同：0
> 
> 时间：2012-05-24T11:45:21.290
> 
> 标签：c#, wpf

我制作了一个 WPF 应用程序，带有一个窗口、一个网格和一个按钮。在窗口 SizeChanged 事件中，我 scaleTransform 我的 Grid 以最大化它的大小但保持纵横比。

每当我将鼠标移到按钮上时，热轨就会如您所料发生，但鼠标停顿不到半秒钟，这不是一个大问题，但似乎有些不对劲。

**编辑** 我想我从来没有真正问过问题。我想知道的是。这是正常行为，还是我这样做有什么问题。

```
 //Store the initial size of the Grid
    double GridStartWidth;
    double GridStartHeight;

    public MainWindow()
    {
        InitializeComponent();
        //Get the values for the initial size of Grid
        GridStartWidth = MainGrid.Width;
        GridStartHeight = MainGrid.Height;
    }

    private void myMainWindow_SizeChanged(object sender, SizeChangedEventArgs e)
    {
        double min = Math.Min(this.Height / GridStartHeight, this.Width / GridStartWidth);
        Transform tr = new ScaleTransform(min, min, .5, .5);
        MainGrid.LayoutTransform = tr;
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        Application.Current.Shutdown();
    } 
```

不确定您是否需要 Xaml，但在这里

```
<Window x:Class="WpfApplication1.MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="MainWindow" 
Name="myMainWindow"
Width="1280" Height="1024" SizeChanged="myMainWindow_SizeChanged" AllowsTransparency="True" Background="#4FFFFFFF" WindowStyle="None" WindowState="Maximized">
<Grid Name="MainGrid"  Background="#FF8DC78D" Width="800" Height="600">

    <Button Content="Exit" Height="23" HorizontalAlignment="Left" Margin="13,12,0,0" Name="ExitButton" VerticalAlignment="Top" Width="75" Click="button1_Click" />
</Grid> 
```

**编辑#2**我只是尝试从头开始复制这个问题，并在添加功能时逐步测试它。当我将窗口状态设置为最大化时会出现问题。

**编辑#3**另一个测试我删除了 Allow Transparency 属性，并将背景设置为纯色，它工作正常。所以问题与具有透明背景的最大化窗口有关。这有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:06:19.537

在 Windows 中更新屏幕上的鼠标指针具有很高的优先级，鼠标抖动或卡顿是驱动程序问题或严重性能问题的结果。

WPF 在 Windows XP 上可用，但硬件加速并不总是可用，从而导致性能问题。特别是存在影响透明窗口（您使用的）的问题。

Microsoft 的 Dwayne Need 有一篇关于[WPF 中的透明窗口](http://blogs.msdn.com/b/dwayneneed/archive/2008/09/09/transparent-windows-in-wpf.aspx)的博客文章：

> DirectX 确实提供了[IDirect3DSurface9::GetDC](http://msdn.microsoft.com/en-us/library/bb205894%28VS.85%29.aspx)方法，该方法可以返回引用 DirectX 表面的 DC。不幸的是，如果在包含 alpha 通道的表面上调用此方法，则 DX9c 中有一个限制，该方法将失败。当然，我们分层窗口 API 的全部意义在于启用每像素透明度。Vista 取消了此限制，但我们的初始版本强制 WPF 使用其软件渲染回退并渲染到 XP 上的分层窗口。我们也能够解除 XP 的这一限制，我们将其作为[热修复](http://support.microsoft.com/kb/937106/en-us)(KB 937106) 发布。这个热修复也包含在 XP SP3 中，所以[去获取吧](http://windowsupdate.microsoft.com/)！现在，在 XP 上，我们可以通过 DirectX 进行渲染，并将 IDirect3DSurface9::GetDC 的结果直接传递给 UpdateLayeredWindow。在良好的视频驱动程序上，生成的副本将完全保留在视频卡上，从而获得出色的性能。但是，某些视频驱动程序可能会选择通过系统内存执行此复制。此类系统上的性能不会那么好，但对于许多场景来说仍然应该是合理的。

您的体验可能是由于您的计算机上没有热修复程序（但它包含在 SP3 中），或者是 WPF 必须为您的特定应用程序切换到软件呈现的结果。

# java - JPA 嵌套事务和锁定

> ID：10736862
> 
> 赞同：20
> 
> 时间：2012-05-24T11:45:42.040
> 
> 标签：java, jpa, jpa-2.0, java-ee-6

考虑两种方法存在于不同无状态bean中的场景

```
public class Bean_A {
   Bean_B beanB; // Injected or whatever
   public void methodA() {
    Entity e1 = // get from db
    e1.setName("Blah");
    entityManager.persist(e1);
    int age = beanB.methodB();

   }
} 
public class Bean_B {
  //Note transaction
  @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
   public void methodB() {

    // complex calc to calculate age  
  }

} 
```

由 BeanA.methodA 启动的事务将被暂停，新事务将在 BeanB.methodB 中启动。如果 methodB 需要访问由 methodA 修改的同一实体怎么办。这会导致死锁。是否可以在不依赖隔离级别的情况下防止它？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-30T22:28:06.813

嗯，让我们列出所有情况。

`REQUIRES_NEW`并没有真正嵌套事务，但正如您提到的那样暂停当前事务。然后只有两个事务访问相同的信息。（这类似于两个常规并发事务，只是它们不是并发的，而是在同一个执行线程中）。

```
T1 T2          T1 T2
―              ―
|              |
               |
   ―           |  ―
   |           |  |
   |     =     |  |
   ―           |  ―
               |
|              |
―              ― 
```

然后我们需要考虑**乐观**与**悲观**锁定。

此外，我们需要考虑由 ORM 操作的**刷新**。使用 ORM，我们在写入发生时没有明确的控制，因为`flush`它是由框架控制的。通常，在提交之前会发生一次隐式刷新，但如果修改了许多条目，框架也可以进行中间刷新。

1）让我们考虑乐观锁定，其中读取不获取锁，但写入获取排他锁。

T1 的读取不会获取锁。

1a) 如果 T1 确实提前刷新了更改，但它获得了排他锁。当 T2 提交时，它会尝试获取锁但不能。**系统被封锁。**这可能是一种特殊的死锁。完成取决于事务或锁定如何超时。

1b) 如果 T1 没有提前刷新更改，则没有获得锁。当 T2 提交时，它会获取并释放它并成功。当 T1 尝试提交时，它会注意到冲突并失败。

2）让我们考虑悲观锁定，其中读取获取共享锁并写入排他锁。

T1 的读取获取共享锁。

2a) 如果 T1 过早刷新，它将锁变成排他锁。情况**类似于 1a)**

2b) 如果 T1 没有提前刷新，T1 持有共享锁。当 T2 提交时，它会尝试获取排他锁并阻塞。**系统再次被封锁**。

结论：如果没有发生过早刷新，乐观锁定就可以了，这是您无法严格控制的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T01:34:47.523

**传递实体并合并...**

您可以将新实体传递给`methodB()`，并将其合并到新的`EntityManager`. 当方法返回刷新您的实体以查看更改时：

```
public class Bean_A {
  Bean_B beanB; // Injected or whatever
  public void methodA() {
    Entity e1 = // get from db
    e1.setName("Blah");
    entityManager.persist(e1);
    int age = beanB.methodB(e1);
    entityManager.refresh(e1);
  }
} 

public class Bean_B {
  //Note transaction
  @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
  public void methodB(Entity e1) {
    e1 = entityManager.merge(e1);
    // complex calc to calculate age  
  }

} 
```

请注意，当新事务在 之后关闭时，这将提交您的实体`methodB`。

**...或在调用 methodB 之前保存它**

如果您使用上面的方法，实体将与您的主事务分开保存，因此如果您`Bean_A`在调用之前保存它，您不会丢失任何东西`methodB()`：

```
public class Bean_A {
  Bean_B beanB; // Injected or whatever

  @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
  public void createEntity() {
    Entity e1 = // get from db
    e1.setName("Blah");
    entityManager.persist(e1);
  }

  public void methodA() {
    createEntity()   
    int age = beanB.methodB();
  }
} 

public class Bean_B {
  //Note transaction
  @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
  public void methodB() {

    // complex calc to calculate age  
  }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T21:48:39.780

这是[最近一篇](http://www.developerscrappad.com/572/java/java-ee/making-sense-of-ejb3-x-transaction-attributes-part-1-requires_new/)关于使用`REQUIRES_NEW`事务划分的文章。

根据我的经验，标准代码不应该出现死锁：带有限制性`where`子句和少量插入的查询。在某些特定情况下，如果在事务期间在单个表上读取或插入许多行，则某些数据库引擎可能会执行锁升级......在这种情况下，是的，可能会发生死锁。

但在这种情况下，问题不是来自 SQL 设计，`REQUIRES_NEW`而是来自 SQL 设计。如果无法改进该设计，那么您别无选择将隔离级别更改为更松散的级别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T11:52:02.963

`entityManager.persist(e1);` 通过在之后和之前以编程方式提交事务`int age = beanB.methodB();`？

```
public class Bean_A {
   Bean_B beanB; // Injected or whatever
   public void methodA() {
    EntityManager em = createEntityManager();
    Entity e1 = // get from db
    e1.setName("Blah");
    entityManager.persist(e1);
    em.getTransaction().commit();
    int age = beanB.methodB();

   }
} 
public class Bean_B {
  //Note transaction
  @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
   public void methodB() {

    // complex calc to calculate age  
  }

} 
```

**编辑**：[CMT](http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/Transaction3.html)

如果您有 CMT，您仍然可以以编程方式提交，您只需从`EJBContext`. 例如： http: [//geertschuring.wordpress.com/2008/10/07/how-to-use-bean-managed-transactions-with-ejb3-jpa-and-jta/](http://geertschuring.wordpress.com/2008/10/07/how-to-use-bean-managed-transactions-with-ejb3-jpa-and-jta/)

或者您可以添加一个`@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW) public void methodC()`可以执行的操作`e1.setName("Blah"); entityManager.persist(e1);`，也就是说，它将 e1 保留在事务中。那么你`methodA()`会打电话

```
methodC();
beanB.methodB(); 
```

# visual-studio-2010 - 想要从 VS2010 中的 ToolBox 中删除第三方自定义控件，这些自定义控件是在通过 .pkgdef 文件安装 msiinstaller 时创建的

> ID：10736867
> 
> 赞同：1
> 
> 时间：2012-05-24T11:45:59.963
> 
> 标签：visual-studio-2010, custom-controls, toolbox

我有软件，我通过文件向第三方提供控件，`.pkgdef`并允许用户在安装软件时使用这些控件。

但是当我卸载软件时，控件仍然存在于 VS2010 中。我想知道是否有任何解决方案可以在我卸载软件时将其删除。我的 pkgdef 文件看起来像这样

```
Example: [$RootKey$\ToolboxControlsInstaller\TekButtons, Version=6.1.90.105, Culture=neutral, PublicKeyToken=null]
@="Tek Components"
"Codebase"="C:\Program Files\Tek\SYSTEM\TekButtons.dll" 
```

所以当用户安装msi安装程序时，他将能够在ToolBox上看到一些自定义控件。

现在，Quest 是我卸载软件时如何删除它们。

请有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:37:17.180

这是我最近写的一篇关于这个主题的教程文章：

[Visual Studio 工具箱控件集成](http://www.componentowl.com/articles/visual-studio-toolbox-control-integration)

如果您的组件采用 VSIX 包的形式，则使用“VsixInstaller.exe /uninstall:GUID /quiet”（将组件的 GUID 放在单词“GUID”的位置）。

如果您的组件是使用通常与 TCI（工具箱控件安装程序）结合使用的 MSI 安装的，那么只需删除注册表项即可。例如：

```
HKLM\SOFTWARE\Microsoft\VisualStudio\10.0\ToolboxControlsInstaller\SampleControl, Version=3.7.0.0, Culture=neutral, PublicKeyToken=3cc4c7b61201d46c 
```

# windows-phone-7 - 使网络浏览器的背景透明

> ID：10736889
> 
> 赞同：3
> 
> 时间：2012-05-24T11:47:33.487
> 
> 标签：windows-phone-7

我正在尝试使我的网络浏览器的背景像 android 中的 wb.setBackground(Color.transparent) 一样透明。

有可能吗？

谢谢，

雷诺

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T12:12:17.143

WebBrowser 控件不是真正的 Silverlight 控件，因此**不支持**使背景透明的能力。

抱歉，目前可用的工具无法做到这一点。
虽然这是一个非常需要的功能，所以这可能（希望）在未来的版本中改变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T11:53:37.823

是的，根据[Doc](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.webbrowser%28v=vs.92%29.aspx)您可以更改背景的画笔：

```
SolidColorBrush scb = new SolidColorBrush(Colors.Transparent);
wb.Bacground = scb; 
```

或者您可以使整个控件透明

```
wb.Opacity = 0.0; 
```

但问题是：这是个好主意吗？

# ruby - Ruby 中的条件块

> ID：10736892
> 
> 赞同：7
> 
> 时间：2012-05-24T11:47:57.423
> 
> 标签：ruby

假设我有`with_foo`一个需要一个块的函数，并将它包裹在一段代码中，比如

```
with_foo do
  puts "hello!"
end 
```

现在我想让包装有条件，比如

```
if do_with_foo?
  with_foo do
    puts "hello!"
  end
else
  puts "hello!" # without foo
end 
```

有什么方法可以写得更短/更优雅，这意味着无需重复代码`puts "hello!"`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T12:03:31.287

如果您愿意用块指定参数，这是可能的。

上面给出`with foo`的，你可以写这样的片段：

```
whatever = proc {puts "hello"}
#build a proc object with a block
if do_with_foo?
  with_foo &whatever
#pass it to with_foo
else
  whatever.call
#normally call it
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T12:50:30.087

使用代理模式的概念证明：

```
class BlockWrapper
  def initialize(obj, use_wrapper)
    @obj = obj
    @use_wrapper = use_wrapper
  end

  def method_missing(*args, &block)
    @use_wrapper ? @obj.send(*args, &block) : block.call
  end
end

module Kernel
  def wrap_if(use_wrapper)
    BlockWrapper.new(self, use_wrapper)        
  end
end

def with_foo
  puts "with_foo: start"
  yield
  puts "with_foo: end"
end

wrap_if(true).with_foo do 
  puts "hello!"
end

wrap_if(false).with_foo do 
  puts "hello, no with_foo here!"
end 
```

输出：

```
with_foo: start
hello!
with_foo: end
hello, no with_foo here! 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T14:48:26.180

我认为你可以这样做：

```
def without_foo &pr
  pr.call
end

send(do_with_foo?? "with_foo" : "without_foo") do
  puts "hello!"
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T12:03:09.253

您可以将复制代码放入`Proc`对象中并将其作为块传递给方法或直接调用它。

```
hello = proc { puts 'hello' }

with_foo(&hello)
# OR
hello.call 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-24T22:20:04.137

```
def simple_yielder
  yield
end
def maybe_with condition, with_method
  send( condition ? with_method : :simple_yielder ) { yield }
end

#...

maybe_with( do_with_foo?, :with_foo ) do
  puts "Hello?"
end 
```

# cocoa - Xcode中的Interface Builder 4\. 如何生成类文件？

> ID：10736895
> 
> 赞同：1
> 
> 时间：2012-05-24T11:48:04.907
> 
> 标签：cocoa, xcode4, uikit, interface-builder

好的，我从 Xcode 3.x 开始就没有使用过 Interface Builder，但我记得有一个菜单项可以自动为在 IB 中创建的任何对象重新生成带有 IBActions/IBOutlets 的类文件。我似乎无法在 Xcode 4 版本中找到它。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:01:15.243

您可以直接从界面构建器故事板视图生成 IBAction：您必须打开界面 nib 文件，然后您必须打开助手模式，现在在右侧窗格中您将找到 .m 实现，现在您可以控制组件的拖动（例如一个按钮）到代码窗格，这里会出现一个弹出窗口并确认对话框，Xcode将生成相关代码......

在您必须创建一个类（视图控制器）文件并将其链接到 nib 文件之前。

Xcode 4 与 Xcode3 完全不同，工作流程也完全不同，所以看看新的助手视图，这是最具创新性的视图之一，你会发现新的自动化来加速开发过程。

# iphone - 我可以在 iOS 应用程序中创建标准目录以外的目录吗？

> ID：10736897
> 
> 赞同：-1
> 
> 时间：2012-05-24T11:48:09.413
> 
> 标签：iphone, ios, xcode, ipad

我正在开发一个 iPad 应用程序来显示 PDF 和演示文稿。但它们需要保存在特定的目录结构中。我可以在 App 中创建子目录吗？例如

1) 根目录->Dr1098->Sample.pdf

根目录是我的 App 目录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:58:03.230

您可以在 Documents 文件夹中创建子目录。您应该将您创建的大部分内容保存在该文档文件夹（或其子文件夹）中。

[这](http://www.techotopia.com/index.php/Working_with_Directories_on_iOS_4_%28iPhone%29)是在 iOS 中处理目录的一个很好的参考指南

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:57:23.493

是的，这是可能的

请参阅下面的链接。这张图总结的很好。另请注意，您不能仅访问每个应用程序中的某些目录（即文档）的根目录。

[苹果文档](http://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)

# matlab - 更改 Matlabs 默认缺少分号的行为以使用 `datatipinfo` 而不是 `disp`

> ID：10736905
> 
> 赞同：3
> 
> 时间：2012-05-24T11:48:46.010
> 
> 标签：matlab, interactive

Matlab 中一个常见的烦恼是，如果忘记分号，交互式 shell 中可能会充斥着数兆字节的数字。Matlab 调用`disp(...)`任何不受抑制的输出，这可能会非常痛苦。的输出`datatipinfo(...)`更加友好。

*   是否可以将 Matlabs 行为更改为调用`datatipinfo`而不是`disp`在未抑制的输出上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:55:22.823

不，这是不可能的。

如果您正在使用 MATLAB 对象，则可以重载`disp`以使其显示您想要的任何内容，这可能包括使用`datatipinfo`. 但总的来说不，这是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T12:37:11.000

注意修改`disp`Matlab 的命令。它有令人讨厌的副作用，例如它在编译的代码中不起作用。

**我最好的建议就是不要忘记分号。** 如果您需要显示某些内容，只需使用`disp`.

# handlebars.js - Handlebars.js 否则如果

> ID：10736907
> 
> 赞同：269
> 
> 时间：2012-05-24T11:48:54.423
> 
> 标签：handlebars.js

我正在使用 Handlebars.js 进行客户端视图渲染。如果 Else 效果很好，但我遇到了需要 ELSE IF 的 3 路条件：

这不起作用：

```
{{#if FriendStatus.IsFriend }}
    <div class="ui-state-default ui-corner-all" title=".ui-icon-mail-closed"><span class="ui-icon ui-icon-mail-closed"></span></div>
{{else if FriendStatus.FriendRequested}}
    <div class="ui-state-default ui-corner-all" title=".ui-icon-check"><span class="ui-icon ui-icon-check"></span></div>
{{else}}
    <div class="ui-state-default ui-corner-all" title=".ui-icon-plusthick"><span class="ui-icon ui-icon-plusthick"></span></div>
{{/if}} 
```

我如何用车把做 ELSE IF？

* * *

## 回答 #1

> 赞同：421
> 
> 时间：2012-06-04T15:40:12.673

自 3.0.0 起， Handlebars 支持`{{else if}}`块。

车把 v3.0.0 或更高版本：

```
{{#if FriendStatus.IsFriend}}
  <div class="ui-state-default ui-corner-all" title=".ui-icon-mail-closed"><span class="ui-icon ui-icon-mail-closed"></span></div>
{{else if FriendStatus.FriendRequested}}
  <div class="ui-state-default ui-corner-all" title=".ui-icon-check"><span class="ui-icon ui-icon-check"></span></div>
{{else}}
  <div class="ui-state-default ui-corner-all" title=".ui-icon-plusthick"><span class="ui-icon ui-icon-plusthick"></span></div>
{{/if}} 
```

但是，在 Handlebars v3.0.0 之前，您必须定义一个处理分支逻辑的助手或`if`手动嵌套语句：

```
{{#if FriendStatus.IsFriend}}
  <div class="ui-state-default ui-corner-all" title=".ui-icon-mail-closed"><span class="ui-icon ui-icon-mail-closed"></span></div>
{{else}}
  {{#if FriendStatus.FriendRequested}}
    <div class="ui-state-default ui-corner-all" title=".ui-icon-check"><span class="ui-icon ui-icon-check"></span></div>
  {{else}}
    <div class="ui-state-default ui-corner-all" title=".ui-icon-plusthick"><span class="ui-icon ui-icon-plusthick"></span></div>
  {{/if}}
{{/if}} 
```

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2013-10-23T07:53:02.040

我通常使用这种形式：

```
{{#if FriendStatus.IsFriend}}
  ...
{{else}} {{#if FriendStatus.FriendRequested}}
  ...
{{else}}
  ...
{{/if}}{{/if}} 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2015-05-06T16:28:08.003

Handlebars 现在支持`{{else if}}`3.0.0。因此，您的代码现在应该可以工作了。

您可以在“条件”下看到一个示例（此处稍作修改并添加了`{{else}}`：

```
 {{#if isActive}}
      <img src="star.gif" alt="Active">
    {{else if isInactive}}
      <img src="cry.gif" alt="Inactive">
    {{else}}
      <img src="default.gif" alt="default">
    {{/if}} 
```

[http://handlebarsjs.com/block_helpers.html](http://handlebarsjs.com/block_helpers.html)

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2013-11-13T10:41:24.000

车把的精神是“无逻辑”。有时这让我们觉得我们正在与之抗争，有时我们最终会遇到丑陋的嵌套 if/else 逻辑。你*可以*写一个助手；许多人用“更好”的条件运算符来增加车把，或者[认为它应该是核心的一部分](https://github.com/wycats/handlebars.js/issues/616)。不过，我认为，而不是这个，

```
{{#if FriendStatus.IsFriend}}
  <div class="ui-state-default ui-corner-all" title=".ui-icon-mail-closed"><span class="ui-icon ui-icon-mail-closed"></span></div>
{{else}}
  {{#if FriendStatus.FriendRequested}}
    <div class="ui-state-default ui-corner-all" title=".ui-icon-check"><span class="ui-icon ui-icon-check"></span></div>
  {{else}}
    <div class="ui-state-default ui-corner-all" title=".ui-icon-plusthick"><span class="ui-icon ui-icon-plusthick"></span></div>
  {{/if}}
{{/if}} 
```

你可能想在你的模型中安排一些东西，这样你就可以拥有它，

```
{{#if is_friend }}
  <div class="ui-state-default ui-corner-all" title=".ui-icon-mail-closed"><span class="ui-icon ui-icon-mail-closed"></span></div>
{{/if}}

{{#if is_not_friend_yet }}
    <div class="ui-state-default ui-corner-all" title=".ui-icon-check"><span class="ui-icon ui-icon-check"></span></div>
{{/if}}

{{#if will_never_be_my_friend }}
    <div class="ui-state-default ui-corner-all" title=".ui-icon-plusthick"><span class="ui-icon ui-icon-plusthick"></span></div>
{{/if}} 
```

只要确保这些标志中只有一个是真的。很有可能，如果您`if/elsif/else`在视图中使用它，您可能也在其他地方使用它，因此这些变量可能最终不会是多余的。

保持苗条。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-08-14T12:21:24.857

我写了这个简单的助手：

```
Handlebars.registerHelper('conditions', function (options) {
    var data = this;
    data.__check_conditions = true;
    return options.fn(this);
});

Handlebars.registerHelper('next', function(conditional, options) {
  if(conditional && this.__check_conditions) {
      this.__check_conditions = false;
      return options.fn(this);
  } else {
      return options.inverse(this);
  }
}); 
```

这有点像*Handlebars**中的责任链*模式

 *例子：

```
 {{#conditions}}
        {{#next condition1}}
            Hello 1!!!
        {{/next}}
        {{#next condition2}}
            Hello 2!!!
        {{/next}}
        {{#next condition3}}
            Hello 3!!!
        {{/next}}
        {{#next condition4}}
            Hello 4!!!
        {{/next}}
    {{/conditions}} 
```

这不是*else if*但在某些情况下它可能会对您有所帮助）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-09T23:14:26.353

内置助手

```
#if 
```

您可以使用 if 助手有条件地渲染块。如果它的参数返回 false、undefined、null、""、0 或 []，Handlebars 将不会渲染块。

模板

```
<div class="entry">
  {{#if author}}
    <h1>{{firstName}} {{lastName}}</h1>
  {{else}}
    <h1>Unknown Author</h1>
  {{/if}}
</div> 
```

当您将以下输入传递给上述模板时

```
{
  author: true,
  firstName: "Yehuda",
  lastName: "Katz"
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-03T03:38:21.467

您好，我只有一个 MINOR 类名编辑，到目前为止，这就是 iv 泄露它的方式。我想我需要将多个参数传递给助手，

服务器.js

```
app.engine('handlebars', ViewEngine({
        "helpers":{
                isActive: (val, options)=>{
                    if (val === 3 || val === 0){
                        return options.fn(this)
                    }
                } 
        }
})); 
```

header.handlebars

```
<ul class="navlist">
          <li   class="navitem navlink {{#isActive 0}}active{{/isActive}}"
                ><a href="#">Home</a></li>
          <li   class="navitem navlink {{#isActive 1}}active{{/isActive}}"
                ><a href="#">Trending</a></li>
          <li   class="navitem navlink {{#isActive 2}}active{{/isActive}}"
                ><a href="#">People</a></li>
          <li   class="navitem navlink {{#isActive 3}}active{{/isActive}}"
                ><a href="#">Mystery</a></li>
          <li class="navitem navbar-search">
            <input type="text" id="navbar-search-input" placeholder="Search...">
            <button type="button" id="navbar-search-button"><i class="fas fa-search"></i></button>
          </li>
        </ul> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-11T15:36:36.507

在车把中首先注册一个如下所示的函数

```
Handlebars.registerHelper('ifEquals', function(arg1, arg2, options) {
    return (arg1 == arg2) ? options.fn(this) : options.inverse(this);
}); 
```

您可以注册多个功能。添加另一个功能只需添加如下

```
Handlebars.registerHelper('calculate', function(operand1, operator, operand2) {
    let result;
    switch (operator) {
        case '+':
            result = operand1 + operand2;            
            break;
        case '-':
            result = operand1 - operand2;            
            break;
        case '*':
            result = operand1 * operand2;            
            break;
        case '/':
            result = operand1 / operand2;            
            break;
    }

    return Number(result);
}); 
```

并且在 HTML 页面中只包含以下条件

```
 {{#ifEquals day "mon"}}
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
      //html code goes here
    </html>
   {{else ifEquals day "sun"}}
    <html>
     //html code goes here
    </html>
   {{else}}
     //html code goes here
   {{/ifEquals}} 
```*

# php - 编辑后如何获取多边形的新坐标？

> ID：10736915
> 
> 赞同：0
> 
> 时间：2012-05-24T11:49:35.027
> 
> 标签：php, javascript, google-maps-api-3

我只想知道如何在编辑后获取多边形的新坐标？

我确实将`Editable`我的多边形的属性设置为true，并开始更改地图中多边形的边界，当我完成编辑时，我想将新坐标获取到我的多边形中，这样我就可以将它们存储在 MYSQL 数据库中.

这是我的多边形的代码，

PS：我的多边形的坐标是从 MYSQL 数据库中检索的。

```
cordonnees = [<?php echo $Cordinaates; ?>];
        poly_edit = new google.maps.Polygon({
        paths: cordonnees,
        strokeColor: "#0FF000",
        strokeOpacity: 0.8,
        editable:true,
        strokeWeight: 2,
        fillColor: "#0FF000",
        fillOpacity: 0.35
    });
    poly_edit.setMap(map); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:11:24.157

api 参考是你的朋友：[https ://developers.google.com/maps/documentation/javascript/reference#Polygon](https://developers.google.com/maps/documentation/javascript/reference#Polygon)

```
var currentPaths = poly_edit.getPaths(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:22:18.520

答对了，

我找到了，这是我使用的 2 个听众：

第一个听众：

```
google.maps.event.addListener(patths, 'set_at', function() {
        new_paths = poly_edit.getPath();
                ...
}); 
```

第二个听众：

```
google.maps.event.addListener(patths, 'insert_at', function() {
        new_lentgh = patths.getLength();
        new_paths = poly_edit.getPath();
            ...
}); 
```

它就像一个魅力^^

# javascript - JavaScript 上传脚本 - 我如何传递 pId？

> ID：10736918
> 
> 赞同：0
> 
> 时间：2012-05-24T11:49:37.927
> 
> 标签：javascript, ajax, cakephp, upload

我正在使用 CakePHP 的上传插件，我设法修改它以编写路径、调整图像大小并保存图像。但是现在我想将一个 pId 变量（一个 int）传递给我保存图像的函数。

它是这样工作的： 1）有一个 addpictures.ctp 有以下内容：

```
$result = $this->Upload->upload('Projects/'.$projects['Project']['id'], $this->Form->field['Project.id'], $projects['Project']['id']);
    echo $result; 
```

这很好用。（请注意，我添加了第三个参数，即项目 ID。） 2) 被调用的函数如下所示：

```
public function upload($model, $id, $pId){
        $result =  $this->edit($model, $id, $pId);
        return $result;
    } 
```

这是在 Pluging/AjaxMultiUpload/View/Helper/UploadHelper.php 里面

3) 现在编辑功能（在同一个文件中）如下所示：

```
public function edit ($model, $id, $pId) {
    require_once (ROOT . DS . APP_DIR . "/Plugin/AjaxMultiUpload/Config/bootstrap.php");

$dir = Configure::read('AMU.directory');
        if (strlen($dir) < 1) {
                    $dir = "files";
                }

        $webroot = Router::url("/") . "ajax_multi_upload";
        // Replace / with underscores for Ajax controller
        $lastDir = str_replace ("/", "___", 
            $this->last_dir ($model, $id));
        $str = <<<END
            <br /><br />
            <link rel="stylesheet" type="text/css" href="$webroot/css/fileuploader.css" />
            <script src="$webroot/js/fileuploader.js" type="text/javascript"></script>
            <div id="AjaxMultiUpload">
                <noscript>
                     <p>Please enable JavaScript to use file uploader.</p>
                </noscript>
            </div>
            <script src="$webroot/js/fileuploader.js" type="text/javascript"></script>
            <script>        
                function createUploader(){            
                    var uploader = new qq.FileUploader({
                        element: document.getElementById('AjaxMultiUpload'),
                        action: '$webroot/uploads/upload/$lastDir/',
                                                pid: '$pId',
                        debug: true
                    });           
                }
                window.onload = createUploader;     
            </script>
END;
                $str .= $this->view ($model, $id, true);
        return $str;
} 
```

现在这是我添加以下内容的地方：

```
pid: '$pId', 
```

正如您所看到的实例的创建。现在这个脚本是魔法发生的地方，也是我失去概览的地方。剧本真的很长，对不起，但我真的不知道该怎么办......

* * *

## [http://jsfiddle.net/sbX8a/](http://jsfiddle.net/sbX8a/)

在这里的某个地方，我想获得我在 Helper 中传递的 $pId。

我如何实现这一目标？

我完全迷路了，经过 2 天的凝视和纠缠，我迷路了。

问候，伤害。

撞？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:53:26.443

试试这样，编辑你的上传代码

```
 function createUploader(){            
                var uploader = new qq.FileUploader({
                    element: document.getElementById('AjaxMultiUpload'),
                    action: '$webroot/uploads/upload/$lastDir/',
                    debug: true,
                    params: {
                        pid: 123,
                        another: "asd"
                    }
                });           
            } 
```

# string - 从 Bash 脚本中检测操作系统并通知用户

> ID：10736923
> 
> 赞同：7
> 
> 时间：2012-05-24T11:49:49.577
> 
> 标签：string, bash, system, uname

使用 bash，我想找到操作系统并通知用户。我试过：

```
OS='uname -s'
echo "$OS"
if [ "$OS" == 'Linux' ]; then
    echo "Linux"
else 
    echo "Not Linux"
fi 
```

我只是得到

```
uname -s 
Not Linux 
```

在终端上，这是错误的。如何正确地将字符串设置为 uname 返回的内容？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-24T11:52:01.120

而不是单引号，您可能打算使用反引号：

```
OS=`uname -s` 
```

但你真的想要

```
OS=$(uname -s) 
```

此外，您可以考虑使用 case，而不是最终将成为 if/else 系列的 if 语句：

```
case $( uname -s ) in
Linux) echo Linux;;
*)     echo other;;
esac 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-15T02:09:41.180

这将按要求返回操作系统 - 请注意，`uname`不一定在所有操作系统上都可用，因此它不是此答案的一部分。

```
case "$OSTYPE" in
  linux*)   echo "linux" ;;
  darwin*)  echo "mac" ;; 
  msys*)    echo "windows" ;;
  solaris*) echo "solaris" ;;
  bsd*)     echo "bsd" ;;
  *)        echo "unknown" ;;
esac 
```

# php - php-apc for windows xampp

> ID：10736927
> 
> 赞同：16
> 
> 时间：2012-05-24T11:50:04.573
> 
> 标签：php, windows, xampp, apc

我需要在 Windows 上安装 php-apc 库才能继续在 Windows 上开发我的应用程序。

我去了[http://downloads.php.net/pierre/](http://downloads.php.net/pierre/)并下载了`php_apc-3.1.10-5.3-vc9-x86.zip`. 问题是知道在 zip 文件中，有 2 个文件夹包含 php apc 库`nts`和`ts`文件夹！

我应该从哪个将库复制到我的`c:\xampp\php\ext`文件夹中？有什么不同？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-24T12:10:25.333

运行`phpinfo()`并检查`Zend Extension Build`。在我的情况下，它是 API220090626，NTS，VC9，所以它是`nts`. `ts`和之间的区别在[这里](https://stackoverflow.com/questions/3983904/why-php-has-separate-version-of-tsthread-safe-ntsnon-thread-safe-while-it-do)`nts`解释

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-24T12:13:47.407

在 phpinfo() 中查找`Thread Safety`键：

IF `Thread Safety`== `enabled`-> 从 TS 文件夹复制

IF `Thread Safety`== `disabled`-> 从 NTS 文件夹复制

希望这可以帮助 ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T07:38:58.163

这只是关于线程安全和非线程安全的。

在线程安全部分中使用 phpinfo() 检查您的安装。如果它说已启用，则转到 TS 文件夹，否则为 NTS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-21T05:55:28.340

我需要知道关于 ts（线程安全）或 nts（非线程安全）哪个 VC 以及 x86 还是 x64 的类似问题。

此信息的最佳位置是在您的 XAMPP 文件夹中。打开文件 XAMPP/readme_en.txt

在此文件的顶部，您将找到 XAMPP 每个组件的版本和规范。

```
Important! PHP in this package needs the Microsoft Visual C++ 2008     Redistributable package from
http://www.microsoft.com/en-us/download/details.aspx?id=5582\. Please     ensure that the VC++ 2008 runtime
libraries are installed on your system.    

+ Apache 2.4.4
+ MySQL 5.5.32 (Community Server)
+ PHP 5.6.3 (VC11 X86 32bit thread safe) + PEAR `     + PHP 5.4.25 (VC9 X86 32bit [b]thread safe[/b]) + PEAR
... 
```

重要的一行是：

```
+ PHP 5.6.3 (VC11 X86 32bit thread safe) + PEAR 
```

这条线告诉我以下内容：

```
PHP version = 5.6.3
vc# code = VC11 = vc11
os bit sise = X86 32bit = x86
threading model = thread safe = ts 
```

我实际上是在寻找 memcache 并在这里找到它：

```
http://windows.php.net/downloads/pecl/releases/memcache/3.0.8/ 
```

根据我选择的上述信息：

```
php_memcache-3.0.8-5.6-ts-vc11-x86.zip 
```

这分解为：

```
version of Memcahe: php_memcache-3.0.8-
version of php: 5.6-
thread safe: ts-
MS VC Version: vc11-
For 32 bit x86: x86.zip 
```

# php - php 打印页面调出打印机列表

> ID：10736929
> 
> 赞同：0
> 
> 时间：2012-05-24T11:50:21.677
> 
> 标签：php

在php中打印页面时如何调出打印机列表？我有以下代码，但没有显示在电脑上找到的打印机列表。

```
echo "<a href='http://xxx/printme.php?$key' target='_blank' media='print'>Print Now</a>"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:51:58.527

你不能用 PHP 做到这一点。为此，您需要 JavaScript：

```
<a href="javascript:window.print()"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:52:02.383

`window.print()`您应该在您的`onclick`活动中使用 Javascript`<a>`

您只能打印当前页面。

# blackberry - 黑莓中的字符串模式匹配

> ID：10736932
> 
> 赞同：0
> 
> 时间：2012-05-24T11:50:58.380
> 
> 标签：blackberry

我如何在黑莓 OS 6.0 中进行简单的模式匹配。目的是检查输入到用户名编辑字段中的用户名是否包含特殊字符....请帮助我
，谢谢 jibysthomas

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:54:46.923

更好的解决方案是通过在编辑字段中添加适当的 TextFilter 来控制用户输入。这具有修改屏幕键盘以匹配您在这些设备上的过滤器的额外好处。

下面是一个示例，它结合了两个内置文本过滤器的操作来制作一个只允许大写字母和数字的过滤器：

```
import net.rim.device.api.ui.text.TextFilter;
import net.rim.device.api.system.Characters;

/**
* A TextFilter class to filter for station identifiers
*/
private static class StationFilter extends TextFilter {

 // Order of the supporting filters is important, NUMERIC will convert
 // letters to numbers if it gets them first.
 private static TextFilter[]      _tf = {
  TextFilter.get(TextFilter.NUMERIC),
  TextFilter.get(TextFilter.UPPERCASE)
 };

// Convert using the first supporting filter that has a conversion
 public char convert( char character, int status) {
  char c = 0;

  for (int i = _tf.length - 1; i >= 0; i--) {
   c = _tf[i].convert(character, status);
   if (c != 0) {
    return c;
   }
  }

  return 0;
 }

// Validate a space for separator, then by supporting filter
 public boolean validate(char character) {
  if (character == Characters.SPACE) {
   return true;
  }

  for (int i = _tf.length - 1; i >= 0; i--) {
   boolean b = _tf[i].validate(character);
   if (b) {
    return true;
   }
  }

  return false;
 }
} 
```

# c++ - 帧差噪声？

> ID：10736933
> 
> 赞同：1
> 
> 时间：2012-05-24T11:50:59.523
> 
> 标签：c++, image-processing, opencv

我正在尝试使用帧差检测运动。如果有动议，我会进入另一个方法，如果没有，我不会进入那个方法。问题是当我使用 absdiff() 或 bitwise_xor() 进行帧差异时，我得到一个嘈杂的帧，它总是被检测为运动。

我试图通过使用 erode() 和 dilate() 方法来消除噪音，它降低了噪音的影响，但仍然有噪音。我怎样才能消除这种噪音？

我当前代码的一部分：

```
capture >> Frame; // get a new frame from camera

cvtColor(Frame,Frame1,CV_RGB2GRAY);
threshold(Frame1,Frame1,50,255,CV_THRESH_BINARY);

waitKey(500);
capture >> PreFrame;

cvtColor(PreFrame,PreFrame,CV_RGB2GRAY);
threshold(PreFrame,PreFrame,50,255,CV_THRESH_BINARY);

//Result = Frame1 - PreFrame1;
//absdiff(Frame1,PreFrame1,Result);

bitwise_xor(Frame1,PreFrame,Result);
erode(Result,Result,Mat());
dilate(Result,Result,Mat());

imshow("Result",Result);

if (norm(Result,NORM_L1)==0){
    printf(" no change \n")
}
else
{
    // motion detected
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T13:30:48.610

只需在捕获帧后立即应用以下技术之一，即可通过几种不同的方式降低噪声：

## 模糊（帧内平均）

看看一些不同的模糊运算符，例如：

1.  [模糊](http://docs.opencv.org/modules/imgproc/doc/filtering.html#blur)（快速，但不太平滑）
2.  [GaussianBlur](http://docs.opencv.org/modules/imgproc/doc/filtering.html#gaussianblur)（更慢，但更平滑）
3.  [中值模糊](http://docs.opencv.org/modules/imgproc/doc/filtering.html#medianblur)（减少脉冲噪声）

`medianBlur`有利于控制脉冲噪声，同时保留图像中的边缘。

## 帧平均（平均不同帧）

1.  [积累](http://docs.opencv.org/modules/imgproc/doc/motion_analysis_and_object_tracking.html#void%20accumulate%28InputArray%20src,%20InputOutputArray%20dst,%20InputArray%20mask%29)
2.  [累积加权](http://docs.opencv.org/modules/imgproc/doc/motion_analysis_and_object_tracking.html#void%20accumulateWeighted%28InputArray%20src,%20InputOutputArray%20dst,%20double%20alpha,%20InputArray%20mask%29)

使用帧平均只需将累积的结果除以累积的帧数即可获得平均帧。您可能想要一个 5-10 帧的滚动平均窗口来显着降低噪声。然而，更大的窗口尺寸意味着当物体移入和移出视野时更多的运动模糊。如果您的相机静止不动，这将最有效。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T14:30:53.730

如果取灰度图像的绝对差异，然后对结果进行阈值处理以消除小的强度变化，会发生什么？这将允许逐帧像素强度的微小变化，同时在有任何显着变化时仍会触发您的运动检测器。

例如：

```
// Obtain image two images in grayscale
cvtColor(Frame,Frame1,CV_RGB2GRAY);
cvtColor(PreFrame,PreFrame,CV_RGB2GRAY);

// Take the absolute difference, this will be zero for identical
// pixels, and larger for greater differences
absdiff(Frame, PreFrame, Result)

// Threshold to remove small differences
threshold(Result,Result,20,255,CV_THRESH_BINARY);

// Prepare output, using Result as a mask
Mat output = Mat::zeros(Frame.size(), Frame.type());
add(
    Frame,   // Add frame
    0,       // and zero
    output,  // to output
    Result   // Only if result is non-zero
); 
```

你有任何可以分享的示例输入/输出图像吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T15:30:21.763

通过在获取差异之前对图像进行阈值处理，可以大大增加噪声的影响。`absdiff`直接用代替 对灰度图像进行减法运算`bitwise_xor`。

# c# - 如何防止禁用的表单被拖动？

> ID：10736941
> 
> 赞同：0
> 
> 时间：2012-05-24T11:51:25.937
> 
> 标签：c#, .net, winforms

以下代码按预期工作，但如果禁用时“拖动”表单（当记事本退出时），表单将位于新位置。怎么能防止呢？

```
Enabled = false;
Process p = Process.Start("notepad");
p.WaitForExit();
Enabled = true; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T13:37:00.933

好的，我重现这个问题。问题是您在 UI 线程上调用 WaitForExit() 。这会阻止它发送消息循环和处理输入事件。他们将被放入消息队列中。一旦进程退出，您的方法就会返回，并且 UI 线程会再次开始发送消息。并找到缓冲的鼠标消息，执行它们，因为窗口不再被禁用。

在 UI 线程上运行的代码的一般规则是它*永远不*应该阻塞。很多事情都会出错，这只是一个例子。Process 类很容易做到，它有一个在进程退出时触发的事件。所以你不需要使用 WaitForExit()。使您的代码如下所示：

```
 this.Enabled = false;
        var prc = System.Diagnostics.Process.Start("notepad.exe");
        prc.EnableRaisingEvents = true;
        prc.SynchronizingObject = this;
        prc.Exited += delegate { 
            this.Enabled = true;
            this.Activate();
        }; 
```

请注意，Activate() 调用对于将您的窗口放回前台是必要的。这可能并不总是有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T12:06:59.270

您可以尝试从使用 showDialog 调用的第二个表单运行 Process start。

```
Form2 frm2 =new Form2(); 
```

frm2.ShowDialog();

在 Form2 Load 事件中把你的

```
Process p = Process.Start("notepad");
p.WaitForExit();
this.DialogResult=DialogResult.OK; 
```

必须检查所有可能不完美的语法。

您甚至可以将 Form2.Visible 设置为 false，这样用户甚至都看不到它。

**按照 HomeToast 的建议进行编辑**，只要您不介意隐藏表单，这非常有效，如果您想保持表单可见，我会采用我的第一个建议

在此选项中，我们将 Visible=false 主窗体，而不是如果 Enable=false 如果没有要拖动的窗体，则用户无法拖动它。

```
this.Visible = false;
Process p = Process.Start("notepad");
p.WaitForExit();
this.Visible = true; 
```

# ios - 将核心数据捆绑到 tableviewcontroller（他自己在导航控制器中（他自己在 tabbarcontroller 中））

> ID：10736942
> 
> 赞同：0
> 
> 时间：2012-05-24T11:51:35.367
> 
> 标签：ios, ios4, ios-simulator, xcode4.3

我是在 iPhone 上开发的新手，我的项目遇到了很多问题。

该项目基于空应用程序：一个标签栏应用程序（item1，item2）。item1 是一个简单的视图控制器（ProfilViewController），是导航控制器的一部分。来自 item1 的按钮按下 tableviewcontroller (MainMantraViewController)。

另外，我的 CoreData 有一个实体：Mantra，由 3 个属性组成：短语、主题、partage。我尝试在启动时填充它以测试 coredata 和 tableviewcontroller 之间的捆绑。

这是我的appdelegate.m，在didfinishlaunching下：

```
ProfilViewController *rootView =(ProfilViewController *)self.window.rootViewController;
rootView.managedObjectContext=self.managedObjectContext;

//donnée test
Mantra * newMantra=(Mantra *)[NSEntityDescription insertNewObjectForEntityForName:@"Mantra" inManagedObjectContext:self.managedObjectContext];
newMantra.phrase =@"ca pu du cul";
newMantra.theme = @"rire"; 
```

运行应用程序，我得到以下***

*   （已编辑）

*** :

```
**2012-05-24 16:26:09.690 Proto v0[1843:fb03] -[UITabBarController setManagedObjectContext:]: unrecognized selector sent to instance 0x6a4a690
2012-05-24 16:26:09.693 Proto v0[1843:fb03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UITabBarController setManagedObjectContext:]: unrecognized selector sent to instance 0x6a4a690'** 
```

我完全被困在这一点上，我在任何地方都找不到任何确凿的线索。我感谢您的帮助，并将提供任何有用的片段。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:16:44.670

好吧，错误日志很清楚，您在 UITabBarController 的某处调用“topViewController”，但 UITabBarController 没有名为“topViewController”的属性。我想你想使用'selectedViewController'。

# jquery - 如何使用 jQuery SVG 插件设置 SVG 矩形元素的背景图像？

> ID：10736946
> 
> 赞同：12
> 
> 时间：2012-05-24T11:51:49.260
> 
> 标签：jquery, svg, plugins, jquery-plugins

我使用 keith-wood 的 jQuery SVG 插件创建了一个 SVG 矩形。这是代码：

```
svg.graph._wrapper.rect(group, 0, 100, 40, 20,
                       {fill: 'ivory',
                        stroke: 'black',
                        strokeWidth : 2}); 
```

所以我想我可以很容易地改变填充而不是使用“象牙”，我把它改成了“theImageIwantToUse”。但这似乎不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-24T12:04:46.360

您不能直接插入外部图像作为 SVG 对象的背景。

相反，您首先必须创建一个像这样的模式

```
var ptn = svg.pattern(defs, "imgPattern", 0, 0, 100, 100, 0, 0, 10, 10, 
                      {patternUnits: "userSpaceOnUse"});
svg.image( ptn, 100, 50, 200, 200, "./theImageIwantToUse.png"); 
```

然后通过`url()`填充属性中的函数使用此模式

```
svg.graph._wrapper.rect(group, 0, 100, 40, 20,
                       {fill: 'url(#imgPattern)',
                        stroke: 'black',
                        strokeWidth : 2}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-24T12:12:39.243

您可以使用`<image>`元素[http://www.w3.org/TR/SVG/struct.html#ImageElement在您的 svg 中插入图像](http://www.w3.org/TR/SVG/struct.html#ImageElement)

您提到的插件中提供了适当的功能。

```
svg.image(parent, x, y, width, height, ref, settings) 
```

( [http://keith-wood.name/svg.html](http://keith-wood.name/svg.html) )

我怀疑是否可以在图像中使用描边，因此您必须在绘制图像后绘制一个没有填充的矩形以获得您想要的确切结果。

# html - 以 PNG 或 JPEG 格式将画布内容发送到服务器

> ID：10736949
> 
> 赞同：0
> 
> 时间：2012-05-24T11:52:00.953
> 
> 标签：html, jsp

我有这段代码，它在页面中执行嵌入 Flash 并单击它会将 Flash 位图捕获到画布中。这里可以正常工作，但问题是如何将捕获数据发送到画布到服务器以 PNG 或 JPEG 图像格式。我使用 Jquery 网络摄像头插件和 jquery.js 加载 Flash

```
<html>
<body>
<br><br>
<form name="f" id="f" runat="server"><table><tr><!--<td><div id="eflash">
</div></td>-->
<td>
<div id="webcam">
</div></td><td><canvas style="border:2px solid red"  id="canvas" width="320" height="240">
 </canvas>

</td></tr></table>
<br><p><a href="javascript:webcam.capture();void(0);">CLICK</a>**|**<input type="button" id="sendBtn" value="Send" /></p>
</form>
</body></html>

<script type="text/javascript" src="./jquery/jquery.js"></script>

<!--<script type="text/javascript" src="./jquery/jquery.flash.js"></script>-->
<script type="text/javascript" src="./jquery/jquery.webcam.js"></script>

<!--<script>
$(document).ready(
    function() {
        $('#eflash').flash({src: 'jscam.swf',     width: 220,     height: 140     }); 
    }
);
</script>-->

<script type="text/javascript">
var pos = 0;
var ctx = null;
var cam = null;
var image = null;
jQuery("#webcam").webcam({
width: 320,
height: 240,
mode: "callback",
swffile: "jscam_canvas_only.swf",

onTick: function(remain) {
if (0 == remain)
{jQuery("#status").text("Sorria!");
}
else { 
jQuery("#status").text(remain + " segundo(s) restante(s)...");
}
},

onSave: function(data)
{ 
var col = data.split(";");
var img = image;
for(var i = 0; i < 320; i++)
{ 
var tmp = parseInt(col[i]);
img.data[pos + 0] = (tmp >> 16) & 0xff;
img.data[pos + 1] = (tmp >> 8) & 0xff;
img.data[pos + 2] = tmp & 0xff;
img.data[pos + 3] = 0xff;
pos+= 4; 
}

if (pos >= 4 * 320 * 240)
{ 
ctx.putImageData(img, 0, 0);
var canvas = document.getElementById("canvas");
var save_image = canvas.toDataURL("image/jpeg");
save_image = save_image.replace(/^data:image\/(png|jpeg);base64,/, "");
$('input[name=save_image]').val(save_image);
pos = 0;
} 
},

onCapture: function ()
{
jQuery("#flash").css("display", "block");
jQuery("#flash").fadeOut(100, function () {jQuery("#flash").css("opacity", 1);}); 
jQuery("#canvas").show();
webcam.save();
},

onLoad: function ()
{ var cams = webcam.getCameraList();
for(var i in cams) {jQuery("#cams").append("<li>" + cams[i] + "</li>");} 
jQuery("#canvas").hide();}
});    

function getPageSize()
{ 
var xScroll, yScroll; 
if (window.innerHeight && window.scrollMaxY)
{ 
xScroll = window.innerWidth + window.scrollMaxX; 
yScroll = window.innerHeight + window.scrollMaxY;
} 
else 
if (document.body.scrollHeight > document.body.offsetHeight)
{ // all but Explorer Mac
xScroll = document.body.scrollWidth; 
yScroll = document.body.scrollHeight; 
} 
else { // Explorer Mac...would also work in Explorer 6 Strict, Mozilla and Safari
xScroll = document.body.offsetWidth;
yScroll = document.body.offsetHeight;
}

var windowWidth, windowHeight; 
if (self.innerHeight)
{ // all except Explorer 
if(document.documentElement.clientWidth)
{ 
windowWidth = document.documentElement.clientWidth;
}
else 
{ 
windowWidth = self.innerWidth;
} 
windowHeight = self.innerHeight;
}
else 
if (document.documentElement && document.documentElement.clientHeight)
{ // Explorer 6 Strict Mode 
windowWidth = document.documentElement.clientWidth;
windowHeight = document.documentElement.clientHeight;
} 
else 
if (document.body)
{ // other Explorers 
windowWidth = document.body.clientWidth;
windowHeight = document.body.clientHeight;
}

// for small pages with total height less then height of the viewport
if(yScroll < windowHeight)
{
pageHeight = windowHeight;
}
else
{
pageHeight = yScroll;
}
// for small pages with total width less then width of the viewport
if(xScroll < windowWidth)
{
pageWidth = xScroll;
} 
else
{
pageWidth = windowWidth;
}
return [pageWidth, pageHeight];    }

window.addEventListener("load", function()
{
jQuery("body").append("<div id=\"flash\"></div>");
var canvas = document.getElementById("canvas");
if (canvas.getContext)
{
ctx = document.getElementById("canvas").getContext("2d");
ctx.clearRect(0, 0, 320, 240);
var img = new Image();
img.onload = function() {
ctx.drawImage(img, 320, 240);
}
image = ctx.getImageData(0, 0, 320, 240);

}
var pageSize = getPageSize();
jQuery("#flash").css({ height: pageSize[1] + "px" });
}, false); 
window.addEventListener("resize", function() {
var pageSize = getPageSize(); 
jQuery("#flash").css({ height: pageSize[1] + "px" });
}, false);

</script> 
```

# c# - 在 C# 中以图形方式制作进程队列

> ID：10736956
> 
> 赞同：-5
> 
> 时间：2012-05-24T11:52:18.853
> 
> 标签：c#, graphic

我实现了一些 cpu 调度算法。我想以图形方式在 c# 中的 Windows 窗体应用程序中显示它，但我不知道如何？
示例：
我有这些过程：

```
p1,p2,p3,p4,p5,p6,p7,p8,p9,... 
```

p2 在 p1 之前执行它的过程，p1 在 p6 之前和 p6 在 p3 之前执行它......
我想要这样的东西给我看：http:
[//i.stack.imgur.com/zEWbG.jpg](http://i.stack.imgur.com/zEWbG.jpg)
每个进程长度也会发生变化根据自己的进程时间，并显示进程的开始时间和结束时间。
我怎样才能做出这样的事情？
感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T12:21:31.373

我建议使用 WPF。您可以通过许多不同的方式实现这一目标。

一个示例是具有多列的 WPF 网格。您可以将列的宽度设置为比例。例如，“3*”的宽度表示一个进程花费的时间是“6*”宽度的一半

```
<Window x:Class="WpfApplication3.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid Name="MainGrid" Height="80">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="1*"></ColumnDefinition>
        <ColumnDefinition Width="2*"></ColumnDefinition>
        <ColumnDefinition Width="4*"></ColumnDefinition>
    </Grid.ColumnDefinitions>
    <Rectangle Fill="LightBlue"/>
    <Rectangle Grid.Column="1" Fill="LightGreen"/>
    <Rectangle Grid.Column="2" Fill="LightPink"/>
    <Label HorizontalAlignment="Center" VerticalAlignment="Center">P2</Label>
    <Label Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center">P1</Label>
    <Label Grid.Column="2" HorizontalAlignment="Center" VerticalAlignment="Center">P6</Label>
</Grid>
</Window> 
```

这个 XAML 代码会产生这个。

[http://img835.imageshack.us/img835/4742/picturelx.png](http://img835.imageshack.us/img835/4742/picturelx.png)

您可以像这样使用 C# 代码隐藏以编程方式添加列。

```
 private void AddColumn()
    {
        //Create the columndefinition with a width of "3*"
        ColumnDefinition column = new ColumnDefinition();
        column.Width = new GridLength(3, GridUnitType.Star);

        //Add the column to the grid
        MainGrid.ColumnDefinitions.Add(column);

        //Create the rectangle
        Rectangle rect = new Rectangle();
        rect.Fill = new SolidColorBrush(Colors.Beige);
        MainGrid.Children.Add(rect);
        Grid.SetColumn(rect, 3);

        //Create the label
        Label label = new Label();
        label.VerticalAlignment = System.Windows.VerticalAlignment.Center;
        label.HorizontalAlignment = System.Windows.HorizontalAlignment.Center;
        label.Content = "P4";
        MainGrid.Children.Add(label);
        Grid.SetColumn(label, 3);

    } 
```

# javascript - AngularJS ng-style 不随属性改变

> ID：10736957
> 
> 赞同：9
> 
> 时间：2012-05-24T11:52:19.330
> 
> 标签：javascript, angularjs

我似乎无法弄清楚为什么样式属性没有得到更新。在我更大的应用程序中，它似乎工作正常。

```
angular.module('Model', [])
    .factory('SizeModel', function () {
        return {
            width: 200,
            height: 100,
            display:"block",
            getCombined: function() {
                return parseInt(this.width) + parseInt(this.height);
            }
        };
    });

function AlbumCtrl($scope,SizeModel) {
    $scope.master = SizeModel;
    $scope.$watch("master",function(){
    $scope.myprop = { display: $scope.master.display,
                      backgroundColor: "#333",
                      width: $scope.master.width+'px',
                      height: $scope.master.height+'px',
                      color: "#FFF"
                     };
        });

}

function AnoCtrl($scope,SizeModel) {
    $scope.master = SizeModel;

    $scope.toggle = function(){
        $scope.master.display = "none";
    }
}

function EditCtrl($scope,SizeModel) {
    $scope.master = SizeModel;
} 
```

[http://jsfiddle.net/ganarajpr/C2hRa/4/](http://jsfiddle.net/ganarajpr/C2hRa/4/)

这是一个小提琴，它显示了我目前面临的问题。当您更改输入时，您会注意到 div 中的宽度和高度正在更新。但风格本身似乎并没有更新。任何人都可以告诉我我在这里做错了什么？

我已经尝试了以下所有场景

1.  使用 $scope.$apply.. - 抛出一个错误，说明 $apply 已经在进行中..
2.  $rootScope.$apply - 同上。
3.  在另一个控制器中 $watched 的服务中设置另一个变量。- 没有看到任何变化。

如果有人能给我一个答案，那就太好了。如果你能告诉我为什么它没有得到更新，我也会很高兴。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-24T12:02:12.200

您已一次性将宽度和高度值分配给 myprop 样式字段。因此，当您更改宽度或高度时， myprop 并没有改变。

将 myprop 值更改为计算其值的函数...

[http://jsfiddle.net/DyHHJ/](http://jsfiddle.net/DyHHJ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-21T22:17:47.387

您`$scope.$watch`在 AlbumCtrl 中只观察[引用不等式](https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$watch)，这是通过 !== Javascript 运算符的严格比较确定的。因为您只更改对象上的一个属性，所以对的引用`master`仍然是相同的，并且不会触发 $watch。您需要向 $watch 传递一个附加参数才能使用 objectEquality。看到这个[plunkr](http://plnkr.co/edit/wFSqeSiceXtPrO904kJM?p=preview)，下面是相关代码：

```
$scope.$watch("master",function() {
  $scope.myprop = {
    display: $scope.master.display,
    backgroundColor: "#333",
    width: $scope.master.width+'px',
    height: $scope.master.height+'px',
    color: "#FFF"
  };
}, true); 
```

第三个参数`true`告诉 angular 通过 angular.equals 函数确定 watchExpression 的不等式。它正确地确定更新的`master`对象已更改，并更新`myprop`

# php - 如何从在 php 中转换为数组的对象中提取值？

> ID：10736962
> 
> 赞同：3
> 
> 时间：2012-05-24T11:52:23.883
> 
> 标签：php, arrays

我想检索转换为数组然后转换为对象的值..

```
$input = (object)(array) 123;
var_dump($input); 
```

这输出：

```
object(stdClass)#1 (1) {
  [0]=>
  int(123)
} 
```

如何从中检索值 123 `$input`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T12:00:46.740

[https://bugs.php.net/bug.php?id=45959](https://bugs.php.net/bug.php?id=45959)

不幸的是，这是一个已知问题，您对此无能为力。

如果您被外部来源的这种类型的对象卡住，最好的办法是将其转换回数组以获取值：

```
$input = (object)(array) 123;
$array = (array) $input;
echo $array[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T12:11:06.637

试试这个代码：

```
<pre><?php
$input = (object)(array) 123;

$reflection = new ReflectionObject($input);
var_dump($reflection->hasProperty('0'));
?></pre> 
```

这将告诉您，虽然您仍然可以看到 中的值`var_dump($input)`，但它不被视为属性。如果你要求[`getProperties()`](http://www.php.net/manual/en/reflectionclass.getproperties.php)，你根本不会得到任何输出。

还有..你为什么认为你需要这种可憎的东西？好像您要求 SO 修补您针对错误定义问题的损坏解决方案的错误修复。

# git - gitolite-admin 克隆问题

> ID：10736964
> 
> 赞同：5
> 
> 时间：2012-05-24T11:52:27.970
> 
> 标签：git, ubuntu, clone, gitolite

我在克隆 gitolite-admin 存储库时遇到问题。我遵循了这个[http://sitaramc.github.com/gitolite/install.html#migr](http://sitaramc.github.com/gitolite/install.html#migr)并且它很完美。

我跑`ssh-keygen -t rsa`了`scp ~/.ssh/id_rsa.pub morten@ubuntu-server:/tmp/morten.pub`

服务器上的 authorized_keys 如下所示：

```
# gitolite start
command="/home/morten/gitolite/src/gitolite-shell morten",no-port-forwarding,no-X11-forwarding,no-agent-forward$
# gitolite end 
```

哪个AFAIK没问题。

当我`git clone morten@ubuntu-server:gitolite-admin`在我的客户端上运行时，我得到

```
fatal: 'gitolite-admin' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

我不知道我错过了什么！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T13:27:54.527

使用`morten`帐户非常好。

但是，考虑到您当前的`~morten/.ssh/authorized_keys`内容，您的安装很奇怪：

而不是`/home/morten/gitolite/src/gitolite-shell morten`|，你应该有`/home/morten/gitolite/bin/gitolite-shell morten`

这意味着：`gitolite-shell`应该在您的`$PATH`中，并且应该在 bin 目录中，在执行后创建：

```
"${github}/install" -to "${gtl}/bin" 
```

[**（参见“安装 Gitolite**](http://sitaramc.github.com/gitolite/install.html) ”的“实际安装”部分的选项 3 ）

和：

*   `github`您克隆的路径 `https://github.com/sitaramc/gitolite`
*   `gtl`您要安装 gitolite 的路径（在您的情况下，例如，`/home/morten/gitolite`）

然后，更容易保存您的`authorized_keys`and`.gitolite.rc`文件，并重新执行初始化过程：

```
gitolite setup -pk "${HOME}/.ssh/gitoliteadm.pub" 
```

（假设您创建了您的公钥和私钥，将其命名为“ `gitoliteadm`”，使用简单：

```
ssh-keygen -t rsa -f "${H}/.ssh/morten" -C "Gitolite Admin access (not interactive)" -q -P "" 
```

)

请注意，我故意使 'ssh' 帐户名 ( `morten`) 与 gitolite 服务器帐户 ( `gitoliteadm`) 不同。

您仍将使用 进行克隆`git clone morten@ubuntu-server:gitolite-admin`（因为所有 ssh 文件都在 中`~morten/.ssh`），但您将使用 的私钥/公钥进行克隆`gitoliteadm`，提示 gitolite 使用名为“”的 gitolite“帐户”访问其存储库`gitoliteadm`。

这样，如果您更改 gitolite 服务器的物理用户帐户，“逻辑”帐户“ `gitoliteadm`”（指的是*角色*，而不是人或资源）。

# javascript - 从Javascript，Jquery中的类中调用类函数

> ID：10736965
> 
> 赞同：0
> 
> 时间：2012-05-24T11:52:30.317
> 
> 标签：javascript

这就是我想要做的，但它不起作用，它显示的错误是：this.run 不是一个函数。上线（this.xId = window.setInterval('this.run()', 2500);）

```
function(){

   this.run = function(){

      DO SOMETHING;

   }

   this.xId = window.setInterval( 'this.run()', 2500 );

} 
```

可能是什么原因 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:53:18.110

您需要为此传递匿名函数：

```
this.xId = window.setInterval( function() { this.run() }, 2500 ); 
```

或者更好的是将此函数与上下文[绑定：](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind?action=edit)`this`

```
this.xId = window.setInterval( this.run.bind(this) , 2500 ); 
```

请注意，这`bind`是在 ECMA-262 第 5 版中实现的，因此为了实现跨浏览器兼容性，您需要添加以下内容：

```
if (!Function.prototype.bind) {  
  Function.prototype.bind = function (oThis) {  
    if (typeof this !== "function") {  
      // closest thing possible to the ECMAScript 5 internal IsCallable function  
      throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");  
    }  

    var aArgs = Array.prototype.slice.call(arguments, 1),   
        fToBind = this,   
        fNOP = function () {},  
        fBound = function () {  
          return fToBind.apply(this instanceof fNOP  
                                 ? this  
                                 : oThis || window,  
                               aArgs.concat(Array.prototype.slice.call(arguments)));  
        };  

    fNOP.prototype = this.prototype;  
    fBound.prototype = new fNOP();  

    return fBound;  
  };  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:56:21.200

*   首先，超时回调[使用函数引用而不是字符串](https://developer.mozilla.org/en/DOM/window.setTimeout#Passing_string_literals)。`this`when using a string 是全局对象，而不是可能提供它的对象。

*   其次，缓存 的值`this`。回调中的`this`可能与它外部的不同（即带有 的那个`run`）。

    ```
    function(){
        var that = this; //cache "this"

        this.run = function(){
            //DO SOMETHING;
        }

        this.xId = window.setInterval(function(){
            that.run()
        },2500);
    } 
    ```

# google-chrome-extension - 加载谷歌搜索页面后加载扩展

> ID：10736966
> 
> 赞同：0
> 
> 时间：2012-05-24T11:52:38.537
> 
> 标签：google-chrome-extension

我想在谷歌搜索页面完全加载后加载我的 chrome 扩展。我可以知道我们在上面搜索内容后发生的谷歌搜索页面的事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:08:39.973

请看这个：[http ://code.google.com/chrome/extensions/content_scripts.html](http://code.google.com/chrome/extensions/content_scripts.html)

更具体地说，该部分：

run_at
字符串
可选。

控制何时注入 js 中的文件。可以是“document_start”、“document_end”或“document_idle”。默认为“document_idle”。我不会等待 js/浏览器事件，而是 run_at document_idle 或 document_end。这对我有用。

T。

# python - Django Formset.save() 没有保存模型

> ID：10736967
> 
> 赞同：1
> 
> 时间：2012-05-24T11:52:39.843
> 
> 标签：python, django, django-models, django-forms, firebird2.1

我在使用 cursor.callproc(prc,params) 的地方用我自己的方法替换保存方法，当我在 Admin 中保存表单时一切都很好，但是当我将表单集保存在视图中时 - 没有任何反应。

```
class BaseModel(models.Model):
    def save(self):
        proc_name="CLN_%s_EDIT" % self._meta.db_table
        ret=callproc(self,proc_name)
        if not ret:
            super(BaseModel,self).save()
    def delete(self):
        proc_name="CLN_%s_EDIT" % self._meta.db_table
        callproc(self,proc_name,'del')
    class Meta:
        abstract=True

def tarifs(request):
    TarifFormSet = modelformset_factory(TarifPlan)#,form=TarifPlanForm)
    if request.method == 'POST':
        formset = TarifFormSet(request.POST, request.FILES)
        if formset.is_valid():
            #IPShellEmbed()()
            formset.save()
            return HttpResponseRedirect('')
            # do something.
        #else:
            #IPShellEmbed()()
    else:
        formset = TarifFormSet()
    c={"formset": formset,}
    c.update(csrf(request))
    return render_to_response("tarifs.html",c) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:34:08.590

阅读[本文](http://www.python.org/dev/peps/pep-0249/)我发现解决了这个问题 - 只需添加

```
cursor.connection.commit() 
```

后

```
cursor.callproc() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T17:23:55.977

我猜你的表格没有改变，并且在[`formset.save_existing_objects()`](https://github.com/django/django/blob/master/django/forms/models.py#L591)实际保存中被跳过了。

# vb.net - 如何防止我的申请表显示在任务管理器应用程序选项卡中

> ID：10736971
> 
> 赞同：2
> 
> 时间：2012-05-24T11:53:06.273
> 
> 标签：vb.net, forms

我将说明我想这样做的原因，因为我知道有些人不会提供帮助，因为它看起来很可疑。

我想从任务管理器的应用程序选项卡中隐藏我的表单，而不是进程选项卡。

我工作的公司的内网页面中的应用程序强制到所有员工的桌面上，并且不允许他们关闭它。我删除了关闭按钮、任务栏并禁用了 ALT+F4，但一些更精明的用户会使用 CTRL+ALT+DEL。即使是那些用户也不倾向于在进程中挖掘，但应用程序选项卡是显而易见的。

这可以做到吗？

# javascript - 无法从多维数组中检索值

> ID：10736972
> 
> 赞同：0
> 
> 时间：2012-05-24T11:53:07.287
> 
> 标签：javascript, jquery, multidimensional-array

我有一个多维数组，其中存在一些值，我想检索`[0][1]`或`[1][1]`索引值。我得到未定义为数组，如果我尝试直接尝试获取数组值能够获取该值。

这是我想要实现的

我有一个选择下拉菜单，根据所选索引我需要从数组框中检索一条消息。例如，如果索引为 1，那么我必须获取`[1][1]`数组索引值，如果它为零，那么`[0][1]` 数组索引值

这是我所做的小提琴。[http://jsfiddle.net/hTQZ9/](http://jsfiddle.net/hTQZ9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:01:24.753

看到这个更新：http: [//jsfiddle.net/hTQZ9/1/](http://jsfiddle.net/hTQZ9/1/)

```
var MessagesObj = {
    testName: []
}
MessagesObj["testName"].push(["testName_custom_message_Label1val","Custom message for label 1"]);
MessagesObj["testName"].push(["testName_custom_message_Label2val","Custom message for label 2"]);

alert(MessagesObj["testName"][1][1]);

var classChk       = $(".customCheckEnabled").get(0);
var getClassindex  = classChk.selectedIndex;
var getVarName     = classChk.id
var getCstMsgName  = MessagesObj[getVarName];
alert(getCstMsgName);

var getMessage     = getCstMsgName[getClassindex][1];
alert(getMessage); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:59:06.860

getCstMsgName 是一个字符串，而不是一个数组。

一种方法是使用这个

```
$(document).ready(function () {

    var testName_MessagesArray = new Array();
    var cntr = 0;
    testName_MessagesArray[cntr] = new Array("testName_custom_message_Label1val", "Custom message for label 1");
    cntr++;
    testName_MessagesArray[cntr] = new Array("testName_custom_message_Label2val", "Custom message for label 2");
    cntr++;
    alert(testName_MessagesArray[1][1]);

    var classChk = $(".customCheckEnabled");
    alert(classChk);

    this.testName = testName_MessagesArray; //<-- set this with the name
    var getClassindex = classChk.attr("selectedIndex");
    alert(getClassindex);
    var getVarName = classChk.attr("id");
    alert(getVarName);
    var getCstMsgName = this[getVarName]; //<-- reference it from this
    alert(getCstMsgName);
    var getMessage = getCstMsgName[getClassindex][1];
    alert(getMessage);

}); 
```

​ 如果`testName_MessagesArray`在全局范围内，则`window["testName_MessagesArray"]`可以引用它。您当前的示例是本地范围，因此不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T12:07:48.760

你真的应该使用数组文字而不是，呃，`cntr`s：

```
var testName_MessagesArray = [
    ["testName_custom_message_Label1val", "Custom message for label 1"],
    ["testName_custom_message_Label2val", "Custom message for label 2"]
]; 
```

然后，如果要从中检索值，请使用`testName_MessagesArray[x][y]`.

你在做什么：

```
var classChk=$(".customCheckEnabled"); 
// this is a jQuery element, alerted as [object Object]

var getClassindex=classChk.attr("selectedIndex"); 
// this is 0 or 1

var getVarName=classChk.attr("id"); 
// this will be the id of the first selected element, a string

var getCstMsgName=getVarName+"_MessagesArray".toString();
// this will create a string, from the "getVarName"-string and your string-literal-toString

var getMessage=getCstMsgName[getClassindex][1];
// as "getCstMsgName" is a string - not the twodimensional array, 
// getCstMsgName[getClassindex] returns the character at the selected index (as a string)
// and getCstMsgName[getClassindex][1] results in the second character of the one-character-string - undefined 
```

# php - 在 Symfony2 中，如何从 FormBuilder 中获取标签

> ID：10736979
> 
> 赞同：2
> 
> 时间：2012-05-24T11:53:30.093
> 
> 标签：php, symfony, formbuilder

在 Symfony2 中，我使用的是 formbuilder。根据文档，我正在表单中设置标签。

但是，当我在“显示”和“索引”页面上时，我必须将标签复制到 Twig 中。

有没有办法在任何地方都使用相同的标签？我想到的选项：

*   访问 formbuilder 配置，但不实际构建表单
*   有一个中央配置文件，并从 formbuilder 和 twig 文件中查找该文件

然而，无论哪种方式都需要我“做”一些我在 Symfony 中不习惯的事情。似乎这是已经解决的问题，但我不确定如何解决。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T15:03:07.887

您可以利用翻译系统来克服这个问题。确保您已在`config.yml`.

如果您在表单类型中添加了这样的字段

```
$builder->add('title', 'text', array(
    'label'=> 'model.title'
));
//..... 
```

`messages.en.yml`在您的 bundles 目录中创建一个名为的文件`Resources/translations`（替换`en`为您的默认语言环境并根据语言环境创建多个文件。检查本书的[翻译](http://symfony.com/doc/master/book/translation.html)章节。）并输入以下内容

```
#src/YourBundle/Resources/translation/messages.en.yml
model:
    title: "Title"
    field: "Field"
    #.... 
```

添加和编辑表单标签将显示`Title`。在索引和显示页面中，您可以执行

```
{{ "model.title" | trans([], 'messages') }} 
```

虽然这个过程有点长，但它是一次性的，您可以通过更改翻译文件来更改标签的值。

# github - Github配置id_rsa密码

> ID：10736984
> 
> 赞同：0
> 
> 时间：2012-05-24T11:53:45.733
> 
> 标签：github, passwords

对于github的配置，我已经完成了步骤

1.) 创建新的 SSH 密钥 2.) 输入我的 id_rsa.pub 密钥并添加密钥

但是在测试的测试阶段，我进入后

***用户$ ssh -T git@github.com***

一个新窗口（终端外）打开询问：**输入您的密码“id_rsa”**。*我在哪里可以找到这个密码*。仅供参考，我使用的是 Mac OS 10.5.8

即使在我进入之后：

***用户$ ssh -vT git@github.com***

打开相同的新窗口，要求输入“id_rsa”密码。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:39:43.500

在步骤 1) 中创建 ssh 密钥时，请确保没有输入密码。否则设置会更加复杂，因为您需要使用 ssh-agent 之类的东西自动为您输入密码。

# mysql - 如何在mysql中找出一个月的天数

> ID：10736989
> 
> 赞同：39
> 
> 时间：2012-05-24T11:53:53.290
> 
> 标签：mysql, sql, date

我在 mysql 表中有几个日期，使用这些日期我需要找出当月的天数。假设我有 2003-02-05 它应该返回 28。例如

```
date                days_in_month
2003-2-3            28 
```

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-05-24T11:56:46.427

```
SELECT DAY(LAST_DAY(yourdate)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T11:55:46.800

您可以将 LAST_DAY 与字符串函数结合使用

```
SELECT RIGHT( LAST_DAY(  '2003-02-03' ) , 2 ) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T11:55:45.193

试试这个：

```
SELECT DAYOFMONTH(LAST_DAY(your_date)) FROM your_table 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-24T11:57:04.927

切弦的替代方法是使用：

```
SELECT DAY(LAST_DAY('2010-02-1')); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-24T11:57:26.533

使用以下语句

```
SELECT DAY(LAST_DAY(now())) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-24T12:51:52.233

尝试

```
select DAY(LAST_DAY(yourdate)) as days_in_month 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-11T10:32:48.643

我想你是在问一个月要返回的总天数。如果您正在尝试查找当月的总天数，请使用以下查询：

```
select timestampdiff(day,
concat(year(now()),'-',month(now()),'-01'),
date_add( concat(year(now()),'-',month(now()),'-01'), interval 1 month)). 
```

如果您想使用任何编程语言将其外部化，请在代码中外部化年份和月份并将其替换为 now()

# android - 如何创建带有标题的微调器？

> ID：10736990
> 
> 赞同：12
> 
> 时间：2012-05-24T11:54:00.420
> 
> 标签：android, listview, android-listview, spinner, android-spinner

我只是想在微调器中创建如下所示，但我不知道如何使它工作

```
 Fruits (heading unclickable) 
    Apple
    Mango
    Orange
 Cars (heading unclickable)
    BMW
    Lenova 
```

这在 Spinner 中是否可能，或者如果您知道任何其他创建这样的方法，那么它会很棒。

我正在从本地数据库中获取这些详细信息。一张表的标题和一张表的记录。我正在寻找任何示例或解决方案。

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T09:58:03.963

很长一段时间后，我找到了一种方法来做到这一点。我通过结合 a`Button`和来实现`Expandable ListView`。我所做的是我创建了一个像微调器这样的按钮。OnClick 我通过调用它启动了一个带有可扩展列表视图的弹出活动，`startActivityForResult()`它返回选定的值。最后我用选定的值替换了按钮文本。

如果您正在寻找可扩展的 ListView 教程，您可以点击下面的链接。

（[http://androidtrainningcenter.blogspot.co.uk/2012/07/android-expandable-listview-simple.html](http://androidtrainningcenter.blogspot.co.uk/2012/07/android-expandable-listview-simple.html)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T12:02:18.720

[查看Hello Views 教程](http://developer.android.com/resources/tutorials/views/hello-spinner.html)中的 Spinner 示例。他们通过使用 TextView 作为标题，使用微调器作为可选选项列表来实现这一点。

# ruby-on-rails - gmaps4rails 添加缩放控件

> ID：10736997
> 
> 赞同：2
> 
> 时间：2012-05-24T11:54:35.333
> 
> 标签：ruby-on-rails, gmaps4rails

我正在使用最新的 gmaps4rails，我想向地图添加缩放控件。我查看了 API 并尝试设置原始选项，如下所示：

```
= gmaps({"map_options" => { :raw => "{scrollwheel: false, 
         disableDefaultUI: false, zoomControl: true, panControl: true, 
         zoomControlOptions: {style: google.maps.ZoomControlStyle.LARGE }}"},
         :markers => {:data => @json}}) 
```

但是，这不会在地图上显示任何控件。

我必须做什么才能显示地图缩放控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T15:56:03.263

利用：

```
Gmaps.search_map.map_options.raw.zoomControl = true; // yes, raw 
```

更多选项在这里：[https ://developers.google.com/maps/documentation/javascript/reference#MapOptions](https://developers.google.com/maps/documentation/javascript/reference#MapOptions)