# StackOverflow 问答 11647000-11647999

# c# - 在 C# 中模拟多个 IP

> ID：11647006
> 
> 赞同：1
> 
> 时间：2012-07-25T09:46:19.263
> 
> 标签：c#, .net, networking, ip

我想做与此答案[https://stackoverflow.com/a/1309096/1547704](https://stackoverflow.com/a/1309096/1547704)中描述的相同的事情，但在 C# 代码中。

让我解释。我想在一台计算机上动态模拟多个 IP。我想允许我的程序的用户使用自己定义的 IP 地址动态创建客户端。

你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:59:41.813

您可以使用 WMI 执行此操作。查看[Win32_NetworkAdapterConfiguration](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394217%28v=vs.85%29.aspx)类。高温高压

# actionscript-3 - Flex BubbleChart - 如何将最大气泡大小设为当前大小的一半？

> ID：11647007
> 
> 赞同：0
> 
> 时间：2012-07-25T09:46:19.670
> 
> 标签：actionscript-3, apache-flex, charts, flex4

我试图控制 BubbleChart 上气泡的实际像素大小，但没有成功。无论我将 minRadius 和 maxRadius 值设置为什么值，气泡始终约为 2 到 50 像素。

这是代码：

```
 <mx:BubbleChart width="100%" height="200" dataProvider="{dataSet}">
        <mx:series>
            <mx:BubbleSeries radiusField="P" 
                             showDataEffect="{eff}" 
                             xField="A" 
                             yField="B"
                             minRadius="0"
                             maxRadius="10">
            </mx:BubbleSeries>
        </mx:series>
    </mx:BubbleChart> 
```

![图表](../Images/d22f82c7d6ef67623cd42cbab8105967.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:51:12.367

看来我需要在 BubbleChart 而不是系列上设置 minRadius 和 maxRadius

```
 <mx:BubbleChart width="100%" height="200"
                    minRadius="10" maxRadius="20"
                    dataProvider="{dataSet}">
        <mx:series>
            <mx:BubbleSeries radiusField="P" 
                             showDataEffect="{eff}" 
                             xField="A" 
                             yField="B">
            </mx:BubbleSeries>
        </mx:series>
    </mx:BubbleChart> 
```

# blackberry - 如果当前按钮正在聚焦，则无法执行另一个按钮的功能

> ID：11647008
> 
> 赞同：0
> 
> 时间：2012-07-25T09:46:20.417
> 
> 标签：blackberry, touch-event, buttonfield

从这段代码中，

```
public class Custom_TopField extends Manager {
private Bitmap download = Config_GlobalFunction.Bitmap("btn_download.png");
private Bitmap downloadactive = Config_GlobalFunction
        .Bitmap("btn_download_active.png");
private Bitmap refresh = Config_GlobalFunction.Bitmap("icon_refresh.png");
private Bitmap refreshactive = Config_GlobalFunction
        .Bitmap("icon_refresh_active.png");
private Bitmap back = Config_GlobalFunction.Bitmap("btn_back.png");
private Bitmap backctive = Config_GlobalFunction
        .Bitmap("btn_back_active.png");
private Bitmap news = Config_GlobalFunction.Bitmap("icon_news.png");
private Bitmap newsactive = Config_GlobalFunction
        .Bitmap("icon_news_active.png");

private Custom_ButtonField downloadbtn, refreshbtn, backbtn, newsbtn;
private Custom_LabelField title;
private int left, right, fontsize;
private Database_Webservice webservice;

Custom_TopField(final MainScreen mainscreen, final int position,
        final int catsid, final String header, int left, int right) {
    super(Manager.USE_ALL_WIDTH | Manager.NO_VERTICAL_SCROLL
            | Manager.NO_HORIZONTAL_SCROLL);
    this.left = left;
    this.right = right;

    if (Display.getWidth() > 480)
        fontsize = 43;
    else if (Display.getWidth() < 481 && Display.getWidth() > 320)
        fontsize = 33;
    else
        fontsize = 23;

    webservice = new Database_Webservice();
    setBackground(Config_GlobalFunction.loadbackground(Display.getWidth()
            + "_" + "header_bar.png"));

    if (position != 0) {
        title = new Custom_LabelField(Config_GlobalFunction.maintitle,
                DrawStyle.ELLIPSIS | LabelField.USE_ALL_WIDTH
                        | DrawStyle.HCENTER | Field.FOCUSABLE, Color.WHITE) {
            protected boolean navigationClick(int status, int time) {
                Main.getUiApplication().pushScreen(
                        new Custom_LoadingScreen(1));
                Main.getUiApplication().invokeLater(new Runnable() {
                    public void run() {
                        Main.getUiApplication().pushScreen(
                                new Main_AllLatestNews(false));
                    }
                }, 1 * 1000, false);
                return true;
            }

            protected boolean touchEvent(TouchEvent message) {
                int eventCode = message.getEvent();
                if (eventCode == TouchEvent.UNCLICK)
                    Main.getUiApplication().pushScreen(
                            new Menu_PopupMenu(position));

                return true;
            }
        };

    } else {
        title = new Custom_LabelField(Config_GlobalFunction.maintitle,
                DrawStyle.ELLIPSIS | LabelField.USE_ALL_WIDTH
                        | DrawStyle.HCENTER, Color.WHITE);
    }
    title.setFont(Font.getDefault().derive(Font.BOLD, fontsize));
    add(title);

    if (left == 1) {
        newsbtn = new Custom_ButtonField(news, newsactive, newsactive) {
            protected boolean navigationClick(int status, int time) {
                Main.getUiApplication().pushScreen(
                        new Menu_PopupMenu(position));
                return true;
            }

            protected boolean touchEvent(TouchEvent message) {
                int eventCode = message.getEvent();
                if (eventCode == TouchEvent.UP)
                    Main.getUiApplication().pushScreen(
                            new Menu_PopupMenu(position));

                return true;
            }
        };

        add(newsbtn);
    } else if (left == 2) {
        backbtn = new Custom_ButtonField(back, backctive, backctive) {
            protected boolean navigationClick(int status, int time) {
                Main.getUiApplication().popScreen(mainscreen);
                return true;
            }

            protected boolean touchEvent(TouchEvent message) {
                int eventCode = message.getEvent();
                if (eventCode == TouchEvent.UP)
                    Main.getUiApplication().popScreen(mainscreen);
                return true;
            }
        };
        add(backbtn);
    }

    if (right == 1) {
        downloadbtn = new Custom_ButtonField(download, downloadactive,
                downloadactive) {
            protected boolean navigationClick(int status, int time) {
                if (Config_GlobalFunction
                        .Dialog(Config_GlobalFunction.alertdownload)) {
                    if (Config_GlobalFunction.isConnected()) {
                        webservice.UpdateAllCatNews();
                    } else
                        Config_GlobalFunction.Message(
                                Config_GlobalFunction.nowifi, 1);
                } else
                    Config_GlobalFunction.CloseDialog();
                return true;
            }

            protected boolean touchEvent(TouchEvent message) {
                int eventCode = message.getEvent();
                if (eventCode == TouchEvent.UP) {
                    if (Config_GlobalFunction
                            .Dialog(Config_GlobalFunction.alertdownload)) {
                        if (Config_GlobalFunction.isConnected()) {
                            webservice.UpdateAllCatNews();
                        } else
                            Config_GlobalFunction.Message(
                                    Config_GlobalFunction.nowifi, 1);
                    } else
                        Config_GlobalFunction.CloseDialog();
                }
                return true;
            }
        };
        add(downloadbtn);
    } else if (right == 2) {
        refreshbtn = new Custom_ButtonField(refresh, refreshactive,
                refreshactive) {
            protected boolean navigationClick(int status, int time) {
                if (Config_GlobalFunction.isConnected()) {
                    webservice
                            .refreshCatNewsindex(catsid, position, header);
                } else
                    Config_GlobalFunction.Message(
                            Config_GlobalFunction.nowifi, 1);
                return true;
            }

            protected boolean touchEvent(TouchEvent message) {
                int eventCode = message.getEvent();
                if (eventCode == TouchEvent.UP) {
                    if (Config_GlobalFunction.isConnected())
                        webservice.refreshCatNewsindex(catsid, position,
                                header);
                    else
                        Config_GlobalFunction.Message(
                                Config_GlobalFunction.nowifi, 1);
                }
                return true;
            }
        };
        add(refreshbtn);
    }
}
} 
```

`newsbtn`左右各有一个按钮`downloadbtn`。在`newsbtn`对焦的时候，我点了`downloadbtn`，不提示`Dialog`但是会提示`pushscreen`。对了，如果我点击`downloadbtn`，它会提示`Dialog`而不是`pushscreen`。

当两个按钮都未聚焦时，我单击该按钮，该按钮正在聚焦并按预期执行。

我尝试聚焦默认按钮，即`ButtonField`，然后单击另一个字段，它正确执行。

我认为是`custom_buttonfield`阶级问题。

这是我的`Custom_FieldButton`。

```
public class Custom_ButtonField extends ButtonField {
Bitmap mNormal;
Bitmap mFocused;
Bitmap mActive;

int mWidth;
int mHeight;

private int color = -1;
String text;

public Custom_ButtonField(Bitmap normal, Bitmap focused, Bitmap active) {
    super(CONSUME_CLICK | Field.FOCUSABLE | Field.FIELD_HCENTER
            | Field.FIELD_VCENTER);
    mNormal = normal;
    mFocused = focused;
    mActive = active;
    mWidth = mNormal.getWidth();
    mHeight = mNormal.getHeight();
    setMargin(0, 0, 0, 0);
    setPadding(0, 0, 0, 0);
    setBorder(BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    setBorder(VISUAL_STATE_ACTIVE,
            BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
}

public Custom_ButtonField(String text, Bitmap normal, Bitmap focused,
        Bitmap active, int color) {
    super(CONSUME_CLICK | Field.FOCUSABLE | Field.FIELD_HCENTER
            | Field.FIELD_VCENTER);
    this.color = color;
    mNormal = normal;
    mFocused = focused;
    mActive = active;
    mWidth = mNormal.getWidth();
    mHeight = mNormal.getHeight();
    setMargin(0, 0, 0, 0);
    setPadding(0, 0, 0, 0);
    setBorder(BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    setBorder(VISUAL_STATE_ACTIVE,
            BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    this.text = text;
}

public Custom_ButtonField(String text, Bitmap normal, Bitmap focused,
        Bitmap active, int color, long style) {
    super(style);
    this.color = color;
    mNormal = normal;
    mFocused = focused;
    mActive = active;
    mWidth = mNormal.getWidth();
    mHeight = mNormal.getHeight();
    setMargin(0, 0, 0, 0);
    setPadding(0, 0, 0, 0);
    setBorder(BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    setBorder(VISUAL_STATE_ACTIVE,
            BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    this.text = text;
}

public void setText(String text) {
    this.text = text;
    invalidate();
}

public String getText() {
    return text;
}

public void setColor(int color) {
    this.color = color;
}

protected void onFocus(int direction) {
    super.onFocus(direction);
    color = 0x540604;
    this.invalidate();
}

protected void onUnfocus() {
    super.onUnfocus();
    color = Color.WHITE;
    this.invalidate();
}

protected void paint(Graphics graphics) {
    int fontcontent;
    if (Display.getWidth() > 480)
        fontcontent = 28;
    else if (Display.getWidth() < 481 && Display.getWidth() > 320)
        fontcontent = 23;
    else
        fontcontent = 18;

    Bitmap bitmap = null;
    switch (getVisualState()) {
    case VISUAL_STATE_NORMAL:
        bitmap = mNormal;
        break;
    case VISUAL_STATE_FOCUS:
        bitmap = mFocused;
        break;
    case VISUAL_STATE_ACTIVE:
        bitmap = mActive;
        break;
    default:
        bitmap = mNormal;
    }
    setBackground(BackgroundFactory.createBitmapBackground(bitmap));
    graphics.setFont(Font.getDefault().derive(Font.PLAIN, fontcontent));
    graphics.setColor(color);
    graphics.drawText(text, (mNormal.getWidth() - Font.getDefault()
            .getAdvance(text)) / 2, ((mNormal.getHeight() - Font
            .getDefault().getHeight()) / 2) + 10, DrawStyle.HCENTER
            | DrawStyle.VCENTER);
}

public int getPreferredWidth() {
    return mWidth;
}

public int getPreferredHeight() {
    return mHeight;
}

protected void layout(int width, int height) {
    setExtent(mWidth, mHeight);
}
} 
```

**谁能帮我编辑类让按钮的**焦点状态****不会影响功能？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:47:45.857

使用`setFieldChangeListener`将完成所有操作。

```
 if (position != 0) {
        title = new Custom_LabelField(Config_GlobalFunction.maintitle,
                DrawStyle.ELLIPSIS | LabelField.USE_ALL_WIDTH
                        | DrawStyle.HCENTER | Field.FOCUSABLE
                        | ButtonField.CONSUME_CLICK, Color.WHITE) {
            protected boolean navigationClick(int status, int time) {
                Main.getUiApplication().pushScreen(
                        new Custom_LoadingScreen(1));
                Main.getUiApplication().invokeLater(new Runnable() {
                    public void run() {
                        Main.getUiApplication().pushScreen(
                                new Main_AllLatestNews());
                    }
                }, 1 * 1000, false);
                return true;
            }
        };
    } else {
        title = new Custom_LabelField(Config_GlobalFunction.maintitle,
                DrawStyle.ELLIPSIS | LabelField.USE_ALL_WIDTH
                        | DrawStyle.HCENTER, Color.WHITE);
    }
    title.setFont(Font.getDefault().derive(Font.BOLD, fontsize));
    add(title);

    if (left == 1) {
        newsbtn = new Custom_ButtonField(news, newsactive, newsactive);
        newsbtn.setChangeListener(new FieldChangeListener() {
            public void fieldChanged(Field field, int context) {
                Main.getUiApplication().pushScreen(
                        new Menu_PopupMenu(position));
            }
        });
        add(newsbtn);
    } else if (left == 2) {
        backbtn = new Custom_ButtonField(back, backctive, backctive);
        backbtn.setChangeListener(new FieldChangeListener() {
            public void fieldChanged(Field field, int context) {
                Main.getUiApplication().popScreen(mainscreen);
            }
        });
        add(backbtn);
    }

    if (right == 1) {
        downloadbtn = new Custom_ButtonField(download, downloadactive,
                downloadactive);
        downloadbtn.setChangeListener(new FieldChangeListener() {
            public void fieldChanged(Field field, int context) {
                if (Config_GlobalFunction
                        .Dialog(Config_GlobalFunction.alertdownload)) {
                    if (Config_GlobalFunction.isConnected()) {
                        webservice.UpdateAllCatNews();
                    } else
                        Config_GlobalFunction.Message(
                                Config_GlobalFunction.nowifi, 1);
                } else
                    Config_GlobalFunction.CloseDialog();
            }
        });
        add(downloadbtn);
    } else if (right == 2) {
        refreshbtn = new Custom_ButtonField(refresh, refreshactive,
                refreshactive);
        refreshbtn.setChangeListener(new FieldChangeListener() {
            public void fieldChanged(Field field, int context) {
                if (Config_GlobalFunction.isConnected()) {
                    Config_GlobalFunction.Message(
                            Config_GlobalFunction.refreshing, 1);
                    webservice.UpdateMoreCatNews(catsid, position, header);
                } else
                    Config_GlobalFunction.Message(
                            Config_GlobalFunction.nowifi, 1);
            }
        });
        add(refreshbtn);
    }
} 
```

但是，有一个不好的地方是当您单击或使用拨轮单击按钮时，它会显示为蓝色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:43:12.027

我知道您已经发布了答案，但我想建议另一种选择。尝试下载[BlackBerry Advanced UI 示例](https://github.com/blackberry/Samples-for-Java/tree/master/Advanced%20UI)。其中有很多有用的自定义`Field`类，几乎可以满足每个应用程序的需求。

[更多信息在这里](http://supportforums.blackberry.com/t5/Java-Development/Implement-advanced-buttons-fields-and-managers/ta-p/488276)

您拥有的`Custom_ButtonField`类中还没有很多代码，所以我可能建议从**Advanced UI Samples**文件夹（在 下）中的`BitmapButtonField`类开始。**`/src/com/samples/toolkit/ui/component`**

 **如果您需要添加一些颜色绘制代码，看起来您已经对此感到满意了。

我认为关键是对于大多数`Field`子类，**您可能不应该覆盖**该`touchEvent()`方法。你可以，但它比大多数人想象的要棘手。这主要适用于复杂的字段，其中触摸的确切坐标很重要，或者您正在处理自定义滑动手势。

如果你根本不实现一个`touchEvent()`方法，`navigationClick()`或者中的代码`navigationUnClick()`可以用于你想要的。

但是，我认为你在正确的轨道上。通常，您将拥有一个可重用的按钮类（如`BitmapButtonField`），它不知道单击时要做什么。我通常让一个`Manager`类在单击按钮时注册 a`FieldChangeListener`做某事。这就是您将在**高级 UI**示例中看到的内容：

```
 BitmapButtonField one = new BitmapButtonField(
          Bitmap.getBitmapResource("button_back_normal.png"), 
          Bitmap.getBitmapResource("button_back_focus.png") );
    add(one);
    one.setChangeListener(new FieldChangeListener() {
        public void fieldChanged(Field f, int context) {
            Dialog.alert("Hello Button!");
        }
    }); 
```

已经正确设置以处理触摸点击和跟踪滚轮点击，而`BitmapButtonField`不会弄乱焦点状态。

尝试从那开始，看看这是否更好。祝你好运！**

# gwt - GWTP、SmartGWT、将 GWT 小部件添加到 SmartGWT 时出错

> ID：11647010
> 
> 赞同：0
> 
> 时间：2012-07-25T09:46:26.323
> 
> 标签：gwt, smartgwt, gwtp

我正在使用 GWT 2.4、SmartGWT 3.0、GWTP 0.7。

我主要尝试将 SmartGWT 小部件用于我的布局，但我正在尝试将 GWT 小部件（可以是从 MapWidget 到来自 HighCharts 的 ChartWidget 或 GWT 标签的任何东西）添加到 SmartGWT 选项卡集中的选项卡。然后我得到以下异常：

```
Caused by: java.lang.AssertionError: A widget that has an existing parent widget may not be added to the detach list 
```

这仅在开发模式下发生。在生产中，断言已被关闭，并且我的小部件确实出现了，但它无法在开发模式下进行调试。据我了解，这是因为我混合了 SmartGWT 和 GWT 小部件。

在 GWTP 之前，我能够完成这项工作，因为要显示我的 UI，我会调用`draw()`我的根布局，这是一个 VLayout。现在我正在使用 GWTP，它会在我触发时为我显示我的布局`RevealRootContentEvent`，并且它会通过调用添加布局`RootPanel.get().add(...)`，我认为这就是我现在遇到这些问题的原因。我所有的布局仍然在 SmartGWT 中。

有没有人遇到过同样的问题（在相同的设置中），如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T06:50:14.907

所以我想我找到了问题的根源。

我读了这个问题 [http://code.google.com/p/gwt-platform/issues/detail?id=127](http://code.google.com/p/gwt-platform/issues/detail?id=127)

在其中一篇文章中，展示了如何创建自定义 RootPresenter。RootPresenter 还包含一个 RootView，其中放置了上述`setInSlot`方法，并且通过编写自定义视图，可以覆盖该方法，并确保`draw()`在 SmartGWT 布局上调用该方法，而不是添加到`RootPanel.get().add(...);`

我的 impl 看起来像这样：

```
public class CustomRootPresenter extends RootPresenter
{
    public static final class CustomRootView extends RootView
    {
        @Override
        public void setInSlot(Object slot, Widget content)
        {
            if (content instanceof Layout)
            {
                // clear
                RootLayoutPanel.get().clear();
                RootPanel.get().clear();

                Layout layout = (Layout) content;
                layout.draw();
            }
            else
            {
                super.setInSlot(slot, content);
            }
        }
    }

    @Inject
    public CustomRootPresenter(EventBus eventBus, CustomRootView myRootView)
    {
        super(eventBus, myRootView);
    }
} 
```

请记住在您的 GIN 模块中注入自定义根演示者：

```
// don't use install, when using custom RootPresenter
// install(new DefaultModule(ClientPlaceManager.class));

bind(EventBus.class).to(SimpleEventBus.class).in(Singleton.class);
bind(TokenFormatter.class).to(ParameterTokenFormatter.class).in(Singleton.class);
bind(CustomRootPresenter.class).asEagerSingleton();
bind(PlaceManager.class).to(ClientPlaceManager.class).in(Singleton.class);
bind(GoogleAnalytics.class).to(GoogleAnalyticsImpl.class).in(Singleton.class); 
```

它确实解决了我将 GWT 小部件添加到 SmartGWT 布局的问题。

感谢让-米歇尔·加西亚（Jean-Michel Garcia）将我推向正确的方向！:)

# javascript - 向 JavaScript 发送通知

> ID：11647011
> 
> 赞同：0
> 
> 时间：2012-07-25T09:46:26.630
> 
> 标签：javascript, jquery, wcf

我有一个与 WCF RESTful 服务交互的 HTML5/JavaScript Web 应用程序。

我需要的是在服务器机器上发生变化时更新 HTML/JS WebApp UI 的某种方法。

我研究了 Windows 通知服务，但似乎这只适用于 Windows 8 应用程序和 Windwos 电话通知。

是否有标准/支持良好的方式来执行此操作？

编辑：为了澄清我正在寻找可以通过 JS 使用的实时推送服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:51:24.193

看看：[http ://signalr.net/](http://signalr.net/)

这正是为您的问题而构建的。请注意，据我所知，您的服务器需要允许 websockets。

编辑：[示例](http://callumhibbert.blogspot.nl/2012/02/minimal-signalr-example_08.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:51:02.243

你有没有看过[http://pusher.com](http://pusher.com)，我认为这正是你所需要的。

高温高压

# asp.net-mvc - 为什么 Intellisense 在 MVC 视图中不起作用？

> ID：11647015
> 
> 赞同：0
> 
> 时间：2012-07-25T09:46:30.263
> 
> 标签：asp.net-mvc

<%= %> 标签中没有黄线颜色，尽管 @ 在视图中显示为黄色 `<div> the customer id = <%= Model.id %><br /> the customer code is = <%= Model.customercode % ><br/> the customer amount is= <%= Model.amount % > </div>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:51:35.283

如果`@`显示为 server tag 而不是`<% %>`，那么您很可能使用 Razor 作为视图引擎，而不是经典的 ASPX 样式视图引擎。

# android - 如何创建轮播模式

> ID：11647021
> 
> 赞同：2
> 
> 时间：2012-07-25T09:46:53.553
> 
> 标签：android

我想实现以下滑动模式：[http ://www.androidpatterns.com/uap_pattern/carousel](http://www.androidpatterns.com/uap_pattern/carousel)

在过去的 3 天里，我一直在为此苦苦挣扎。谁能帮我实现这一目标并附上一些代码？

# css - 表格的 CSS 分页符

> ID：11647023
> 
> 赞同：0
> 
> 时间：2012-07-25T09:47:05.893
> 
> 标签：css, page-break

这可能会在多个论坛中被问到，但我无法让它工作。

我有 php 从数据库中获取记录并以表格格式输出。

我的示例代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
</head>
<body vspace="0" hspace="0" onload="window.print();">
<Table width="100%" border="1" cellpadding="0" cellspacing="0" align="center" vspace="0">
<thead>
   <tr style=\"background-color:#D8D8D8;color:#000000;font-weight:bold;height:50px;\">
     <td width=\"100\" align=\"center\">Date</td>
     <td width=\"80\" align=\"center\">Adult</td>
     <td width=\"80\" align=\"center\">Child</td>
     <td width=\"80\" align=\"center\">Total</td>
     <td width=\"450\" align=\"center\" colspan=\"2\">Remark</td>
   <tr>
</thead>
<tbody>

  <?php loop scripts 
    <TR>
   // need to have a page break here if record rows is 23 
   // the number records that can fit in a page is 
   // 21 rows per page (laserjet printer selected)
   // 23 rows per page (pdf printer selected) i prefer pdf printer
    </tr>
  ?>
</tbody>
<tfoot>
  <?php "<tr><td>".calculation and displays sum of Adult, sum of Child and sum of Total."</td></tr>" ?>
</tfoot>
</table>
</body>
</html> 
```

我的问题是我在另一个具有表格格式的页面中使用了“page-break-before：always”并且它有效。那是表中的表（带有sql连接语句的每条记录的新表）。我有任何我可以在网上找到的解决方案来做这个分页符，但无济于事。我的下一个问题是使用根本不起作用的表头。它应该重复到下一页，但事实并非如此。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:53:11.317

你有没有试过这个：

```
{
h1 {page-break-before:always}
} 
```

并在每 23 行之后使用 H1？

```
<td><h1>Here we start new page</h1></td> 
```

# sql - EF 4.3 迁移重命名列而不是删除它

> ID：11647025
> 
> 赞同：11
> 
> 时间：2012-07-25T09:47:16.733
> 
> 标签：sql, entity-framework, entity-framework-4, ef-code-first, entity-framework-migrations

我有这堂课：

```
public class HabitDo{
    public int? HabitId { get; set; }
    virtual public Habit Habit { get; set; }

    public int DoId { get; set; }
    virtual public Do Do { get; set; }

    public string Restriction { get; set; }

    public int? ObjectiveId { get; set; }
    public Objective Objective { get; set; }

    public virtual ICollection<DoObjective> Objectives { get; set; }
} 
```

该表很好，但随后我从代码中删除了 Objective 属性：

```
 public class HabitDo{
    public int? HabitId { get; set; }
    virtual public Habit Habit { get; set; }

    public int DoId { get; set; }
    virtual public Do Do { get; set; }

    public string Restriction { get; set; }

    public virtual ICollection<DoObjective> Objectives { get; set; }
} 
```

当从管理器控制台调用 update-database 时，EF 会重命名 ObjectiveId 列而不是删除它：

```
 EXECUTE sp_rename @objname = N'HabitDoes.ObjectiveId', @newname =  N'Objective_Id', @objtype = N'COLUMN' 
```

任何线索为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-25T10:00:56.967

这是因为您可能仍然拥有现有的一对多关系 - 您刚刚删除了关系一侧的导航属性，但另一侧仍然存在。因为那个 EF 必须在你的表中保留 FK 列。EF 只是将隐藏的 FK 列重命名为默认命名约定。

# php - 仅当目录或文件不存在时才重写规则

> ID：11647028
> 
> 赞同：4
> 
> 时间：2012-07-25T09:47:35.053
> 
> 标签：php, .htaccess, redirect

我正在尝试使用 php 和 .htaccess 创建一个 url 处理程序，我的问题是我不知道如何使用重写条件，只有在 url 中输入的文件\目录不存在时。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-25T09:50:08.110

请看一下这个[`RewriteCond`](https://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond)资源。

```
RewriteCond %{REQUEST_FILENAME} !-f
//                                ^ this means file.
RewriteCond %{REQUEST_FILENAME} !-d
//                              ^ this means NOT, "d" means directory.
// Your rewrite rule here. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T09:50:07.060

它与 shell 脚本 -d 和 -f 函数非常相似。

尝试这样的事情：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule XXX 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T09:50:29.013

> '-d' (is directory) 将 TestString 视为路径名并测试它是否存在，并且是一个目录。
> 
> '-f' （是常规文件） 将 TestString 视为路径名并测试它是否存在，并且是常规文件。

以感叹号（'！'）为前缀以否定它们的含义。

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T09:51:12.240

这应该这样做（替换`<filename>`）：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule .* <filename> [L] 
```

如果文件、目录或链接不存在，它会进行重定向。

# objective-c - 添加键盘快捷键

> ID：11647034
> 
> 赞同：0
> 
> 时间：2012-07-25T09:47:58.733
> 
> 标签：objective-c, xcode, macos

我想为我的家制作小应用程序。它应该检测键盘快捷键（例如：`Cmd`++ `C`）`1`并将现在选择的文本发送到我的应用程序（如自动化服务）。

我该怎么做？可以给我教程链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:21:32.770

我想你想要一个`Automator Action`. 在 Xcode 中创建一个`Application Plug-in` `Automator Action`并发布通知到`NSDistributedNotificationCenter`

```
- (id)runWithInput:(id)input fromAction:(AMAction *)anAction error:(NSDictionary **)errorInfo
{
    NSDistributedNotificationCenter *dc = [NSDistributedNotificationCenter defaultCenter];
    [dc postNotificationName:@"aName" object:@"anObject"
                    userInfo:[NSDictionary dictionaryWithObject:input
                                                         forKey:@"aKey"]];
    return input;
} 
```

你需要在你的应用中实现一个观察者

```
[[NSDistributedNotificationCenter defaultCenter] addObserver:self selector:@selector(aSelector:) name:@"aName" object:nil]; 
```

如果您在应用程序中包含 Automator Action 捆绑包，`${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.app/Contents/Library/Automator/` Automator 应该能够找到它。

# c - 嵌入式定时器包装

> ID：11647039
> 
> 赞同：5
> 
> 时间：2012-07-25T09:48:18.477
> 
> 标签：c, timer, embedded

目前，我正在从事一个嵌入式项目，其中大多数子系统都基于时序。

我已经寻找了许多解决方案来避免计时器翻转的问题，但有一件事仍然让我感到困惑。

目前，我正在使用 unsigned long 这样的二进制补码。

```
ulong t1 = tick of last event;
ulong t2 = current tick;
if ( t2 - t1 >= limit ){
 do something
} 
```

其他人建议，有必要将 t2-t1 的结果转换为签名实体，然后才能工作，但我不明白为什么。还有其他见解或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:51:58.220

有时我会这样做：

```
ulong t1 = tick of last event;
ulong t2 = current tick;

if ( t1 > t2 ){
    if ((ULONG_MAX-t1+t2+1)>=limit){
       do something
    }
} else {
if ( t2 - t1 >= limit ){
    do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:59:16.867

如果保证`t2`在概念上总是大于`t1`，则强制转换为已签名实体将是错误的。标准保证无符号整数的算术是正确的模数，因此当计算为s时`UTYPE_MAX + 1`，差异`t2 - t1`将是正确的模数。转换为签名实体时，如果值在目标类型中不可表示，则行为由实现定义。通常这会将大的正值转换为负值。`ULONG_MAX + 1``unsigned long`

考试

```
if ( t2 - t1 >= limit ){ 
```

如果当前滴答计数与前一个不带计时器的滴答计数之间的差异大于`ULONG_MAX`，则会崩溃，否则它会起作用。

但是，如果`t2`可以早于`t1`，则真正的差异`t2 - t1`将是负数，但作为`unsigned long`，它可能是一个很大的正数。然后，在使用无符号类型不能正常工作的情况下，转换为有符号类型可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:01:56.030

您不必将其强制转换为已签名。如果“做某事”是警报处理代码，限制是时间间隔。

定期间隔的最佳做法是：

```
 ulong next_alarm_ticks = 0;

 void poll_alarm()
 {
     if (get_ticks() - next_alarm_ticks < ULONG_MAX/2) { 
         // current time is "greater" than next_alarm_ticks
         handle_alarm();
         next_alarm_ticks += alarm_interval;
     }
 } 
```

# ios - UIButton 类别问题

> ID：11647040
> 
> 赞同：1
> 
> 时间：2012-07-25T09:48:20.963
> 
> 标签：ios, uibutton, objective-c-category

我为 UIButton 类做了扩展。现在，如果我使用它，一切都会很好。但是我有另一个类为我创建带有 UIButton 对象的数组，在这里我遇到了一些问题。

我有 Helper 类，其方法为我返回带有 UIButton 对象的**数组。**

在 viewDidLoad 回调中的 ViewController.m 中，我请求了这个**数组**，并且在 ViewController.m 中，我导入了我的 UIButton+Extension.m

所以，现在我有每个 UIButton 对象的扩展，我将在 ViewController.m 中使用

但是，如果我使用扩展名，我会在调用的方法上遇到错误

```
[thumbButton.titleLabel setFont:[UIFont fontWithName:@"Helvetica" size:11.0]]; 
```

但是如果我不使用扩展这个方法调用正确。

这是我的 UIButton+Extension.h 文件

```
#import <UIKit/UIKit.h>

@interface UIButton (extension_button)

- (void)centerButtonToView:(UIView *)view;
- (UIImage *)cropeImage:(UIImageView *)imageView;

@end 
```

这是我的 UIButton+Extension.m 文件

```
#import "UIButton+Extension.h"

@implementation UIButton (extension_button)

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)centerButtonToView:(UIView *)view {
    CGRect rect = view.frame;
    CGRect rectSelf = self.frame;
    rectSelf.origin.x = (rect.size.width / 2.0f - rectSelf.size.width / 2.0f) + rect.origin.x;
    rectSelf.origin.y = (rect.size.height / 2.0f - rectSelf.size.height / 2.0f) + rect.origin.y;
    self.frame = rectSelf;
}

- (UIImage *)cropeImage:(UIImageView *)imageView {    
    CGRect rect;
    rect.origin.x = self.frame.origin.x - imageView.frame.origin.x;
    rect.origin.y = self.frame.origin.y - imageView.frame.origin.y;
    rect.size.width = self.frame.size.width;
    rect.size.height = self.frame.size.height;    
    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();    
    CGRect drawRect = CGRectMake(-rect.origin.x,-rect.origin.y, imageView.image.size.width, imageView.image.size.height);
    CGContextClipToRect(context, CGRectMake(0, 0, rect.size.width, rect.size.height));
    [imageView.image drawInRect:drawRect];
    UIImage* subImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return subImage; 
}

@end 
```

Helper.m（为我返回数组的方法，这里我在 setFont 方法上有问题）

```
+ (NSMutableArray *)createThumbnailsForCropSize {

    CGFloat width = 0.0f;
    CGFloat start_pos = 0.0f;

    if (IS_IPHONE) {
        width = 320.0f;
        start_pos = 62.0f;
    }
    else {
        width = 768.0f;
        start_pos = 286.0f;
    }

    NSMutableArray *arr = [[NSMutableArray alloc] init];
    NSArray *resolutionArray = [NSArray arrayWithObjects:@"30x40",@"33x48",@"35x40",@"35x45",@"36x47",@"37x47",
                                @"40x50",@"40x60",@"43x55",@"45x50",@"50x50",@"50x70", nil];
    NSInteger pos_x = start_pos;
    NSInteger page = 0;
    for (NSInteger idx = 0; idx < 12; idx++) {
        if (idx%3 == 0 && idx != 0) {
            page++;
            pos_x = start_pos + width * page;
        }
        UIButton *thumbButton = [[UIButton alloc] init];
        [thumbButton setTag:idx];
        [thumbButton setFrame:CGRectMake(pos_x, 13, 60, 60)];
        [thumbButton setTitle:[NSString stringWithFormat:[resolutionArray objectAtIndex:idx]] forState:UIControlStateNormal];
        [thumbButton.titleLabel setFont:[UIFont fontWithName:@"Helvetica" size:11.0]];
        [thumbButton setTitle:@"!00" forState:UIControlStateNormal];
        [thumbButton setBackgroundImage:[UIImage imageNamed:@"block_without_photo.png"] forState:UIControlStateNormal];
        [arr addObject:thumbButton];
        pos_x += 68;
    }
    return arr;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:10:58.083

您需要`initWithFrame:`从您的类别中删除。通过包含它，您将删除正常的实现，这将阻止您的按钮被正确创建，实际上您将返回一个`UIControl`.

调用`super`类别中的实现**不会**调用的实现，而是调用-`UIButton`的超类。类别不同于子类。（而且你也不应该子类化，因为它是一个类集群）。`UIButton``UIControl``UIButton`

如果您确实有专门的初始化代码，则必须将其添加到单独的方法中并在创建循环期间调用它。

# oracle - 使用 pl\sql 逐行读取 clob

> ID：11647041
> 
> 赞同：4
> 
> 时间：2012-07-25T09:48:31.867
> 
> 标签：oracle, plsql, plsqldeveloper

在我的项目中，我使用 oracle 作为主数据库，我遇到了解析 clob 的问题。所以假设我们有一个有价值的 clob

```
 aaaaaa
   cccccc
   bbbbbb 
```

它存储在表测试中...

我需要编写 plsql 程序来获取这个 clob 并将其拆分，以便我将拥有包含三个项目的数组 [aaaaaa，cccccccc，bbbbbbb]。

有没有可能的解决方案？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-28T12:48:47.470

这是一段有效的代码。出于性能目的，我建议您使用显式游标而不是隐式游标（FOR i IN (select...)）。

首先是创建测试用例的脚本。

```
create table test (c clob);

insert into test (c) values (
'azertyuiop
qsdfghjklm
wxcvbn
'); 
```

然后这里是逐行读取 Clob 的脚本：

```
/* Formatted on 28/08/2012 14:16:52 (QP5 v5.115.810.9015) */
declare
    nStartIndex number := 1;
    nEndIndex number := 1;
    nLineIndex number := 0;
    vLine varchar2(2000);

    cursor c_clob is
    select c from test;

    c clob;
    -------------------------------
    procedure printout
       (p_clob in out nocopy clob) is
      offset number := 1;
      amount number := 32767;
      len    number := dbms_lob.getlength(p_clob);
      lc_buffer varchar2(32767);
      i pls_integer := 1;
    begin
      if ( dbms_lob.isopen(p_clob) != 1 ) then
        dbms_lob.open(p_clob, 0);
      end if;
      amount := instr(p_clob, chr(10), offset);
      while ( offset < len )
      loop
        dbms_lob.read(p_clob, amount, offset, lc_buffer);
        dbms_output.put_line('Line #'||i||':'||lc_buffer);
       offset := offset + amount;
       i := i + 1;
      end loop; 
          if ( dbms_lob.isopen(p_clob) = 1 ) then
        dbms_lob.close(p_clob);
      end if; 
    exception
      when others then
         dbms_output.put_line('Error : '||sqlerrm);
    end printout;
    ---------------------------
begin
    dbms_output.put_line('-----------');
    open c_clob;
    loop
       fetch c_clob into c;
       exit when c_clob%notfound;
       printout(c);
    end loop;
    close c_clob;
end; 
```

'amount' 变量用于检测行尾位置。请注意，在某些情况下，行尾是 CHR(10)||CHR(13) (CR + LF)，而在其他一些情况下，它只是 CHR(10)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-06-08T12:50:22.403

虽然 SQL 正则表达式/按级别连接方法可能是最优雅的，但它在性能方面相当糟糕（对于我在 11.2.0.3.0 上的测试用例）。像这样的简单解析要快得多。

```
procedure parse_clob(p_clob in clob) is
l_offset pls_integer:=1;
l_line varchar2(32767);
l_total_length pls_integer:=length(p_clob);
l_line_length pls_integer;
begin
  while l_offset<=l_total_length loop
    l_line_length:=instr(p_clob,chr(10),l_offset)-l_offset;
    if l_line_length<0 then
      l_line_length:=l_total_length+1-l_offset;
    end if;
    l_line:=substr(p_clob,l_offset,l_line_length);
    dbms_output.put_line(l_line); --do line processing
    l_offset:=l_offset+l_line_length+1;
  end loop;
end parse_clob; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-06T11:05:16.210

如果... - 您安装了 APEX - 而且 clob 小于 32K，您可能还需要查看以下代码：

```
declare
  l_text varchar2(32767) := '...';
  l_rows wwv_flow_global.vc_arr2;
begin
  l_rows := apex_util.string_to_table(l_text, chr(10));
  for i in 1 .. l_rows.count loop
    dbms_output.put_line(l_rows(i));
  end loop;
end;
/ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-08T16:12:02.717

一个流水线函数，带有一些额外的选项来驱动行为。在 Windows、Oracle 11g 上测试/工作（我怀疑它在 *nix 环境中可能会失败，因为行终止方式）。

```
CREATE OR REPLACE FUNCTION ETL_HELPER_PARSE
   (P_CLOB NCLOB, P_LINES_TO_SKIP INT DEFAULT 0, P_PUT_EMPTY_LINES CHAR DEFAULT 'N') RETURN SYS.ODCIVarchar2List PIPELINED
AS
  c_top_lines_to_skip  CONSTANT NUMBER  NOT NULL := P_LINES_TO_SKIP;
  c_output_empty_lines CONSTANT CHAR(1) NOT NULL := P_PUT_EMPTY_LINES; 
  --
  l_len     INT := DBMS_LOB.GETLENGTH(P_CLOB);
  l_hit     INT := 0;
  l_offset  INT := 1;
  l_amount  INT;  
  l_buffer  VARCHAR2(32767);
  l_cnt     INT := 1;  
BEGIN  
  WHILE ( l_offset < l_len )
  LOOP
    l_hit := DBMS_LOB.INSTR (
     lob_loc    => P_CLOB           -- IN   CLOB      CHARACTER SET ANY_CS
    ,pattern    => CHR(13)||CHR(10) -- IN   VARCHAR2  CHARACTER SET lob_loc%CHARSET
    ,offset     => l_offset         -- IN   INTEGER := 1
    ,nth        => 1                -- IN   INTEGER := 1
    );
    l_amount := CASE WHEN COALESCE(l_hit, 0) > 0 THEN l_hit - l_offset ELSE l_len - l_offset + 1 END;
    -- `l_amount=0` means a new empty line has been encountered
    IF l_cnt > c_top_lines_to_skip       
    THEN
      IF l_amount > 0
      THEN
        DBMS_LOB.READ(P_CLOB, l_amount, l_offset, l_buffer);
        PIPE ROW (l_buffer);
      ELSIF UPPER(c_output_empty_lines) = 'Y'
      THEN
        PIPE ROW ('');
      END IF;
    END IF;

    l_offset := CASE WHEN COALESCE(l_hit, 0) > 0  THEN l_hit + 2 ELSE l_len END;    
    l_cnt := l_cnt + 1;
  end loop;
EXCEPTION
  WHEN OTHERS THEN
     DBMS_OUTPUT.PUT_LINE('Error : '||SQLERRM);
END ETL_HELPER_PARSE; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-16T07:58:54.987

> * * *
> 
> 动态行长示例
> 
> 以及 UNIX 和 WIN 文件的替代品
> 
> 和 CR/LF 在文件末尾或没有它
> 
> * * *
> 
> ## 为 TEST 创建表
> 
> ```
> drop table pbrev.test_SVT_tmp;
> create table pbrev.test_SVT_tmp (xc clob);
> insert into pbrev.test_SVT_tmp (xc) values (
> --'azertyuiop;11' || chr(13) || chr(10) ||'qsdfghjklm;7878' || chr(13) || chr(10) ||'wxcvbn;0' || chr(13) || chr(10) );
> 'azertyuiop;11' || chr(13) || chr(10) ||'qsdfghjklm;7878' || chr(13) || chr(10) ||'wxcvbn;0' );
> 'azerty jhjh  huiop;11
> qsdfgkj  hjklhhhhhhhhhhhm;7878
> wxcvbn;0
> dkjsk kjdsk5456 4654 5646 54645
> FINISH'
> );
> delete from pbrev.test_SVT_tmp ;
> select xc from pbrev.test_SVT_tmp; 
> ```

```
--SET SERVEROUTPUT ON;
--SET SERVEROUTPUT OFF;
declare
    nStartIndex number := 1;
    nEndIndex number := 1;
    nLineIndex number := 0;
    vLine varchar2(2000);
    cursor c_clob is
    select xc from pbrev.test_SVT_tmp;
    c clob;
    procedure printout
       (p_clob in out nocopy clob) is
      offset number := 1;
      amount number := 32767;
      amount_last number := 0;
      len    number := dbms_lob.getlength(p_clob);
      lc_buffer varchar2(32767);
      line_seq pls_integer := 1;
      -- For UNIX type file - replace CHR(13) to NULL
      CR char := chr(13);
      --CR char := NULL;
      LF char := chr(10);      
      nCRLF number;
      sCRLF varchar2(2);
      b_finish boolean := true;
begin
      sCRLF := CR || LF;
      nCRLF := Length(sCRLF);
      if ( dbms_lob.isopen(p_clob) != 1 ) then
        dbms_lob.open(p_clob, 0);
      end if;
      amount := instr(p_clob, sCRLF, offset);
      while ( offset < len )
      loop
        -- For without CR/LF on end file
        If amount < 0 then
          amount := len - offset + 1;
          b_finish := false;
        End If;
        dbms_lob.read(p_clob, amount, offset, lc_buffer);
        If b_finish then
          lc_buffer := SUBSTR(lc_buffer,1,Length(lc_buffer)-1);  
        End If;
        if (line_seq-1) > 0 then
          amount_last := amount_last + amount;
          offset := offset + amount; 
        else
          amount_last := amount;
          offset := amount + nCRLF;
        end if;
        amount := instr(p_clob, sCRLF, offset);
        amount := amount - amount_last;
        dbms_output.put_line('Line #'||line_seq||': '||lc_buffer);
        line_seq := line_seq + 1;
      end loop; 
      if ( dbms_lob.isopen(p_clob) = 1 ) then
        dbms_lob.close(p_clob);
      end if; 
    exception
      when others then
         dbms_output.put_line('Error : '||sqlerrm);
    end printout;
begin
    open c_clob;
    loop
       fetch c_clob into c;
       exit when c_clob%notfound;
       printout(c);
    end loop;
    close c_clob;
end; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-14T15:07:56.893

这是基于@Pierre-Gilles Levallois 他的回答的后续回答。因为我认为它包含一些错误，所以我试图修复它们。

*   空行导致错误
*   仍在打印输出中的换行符（可能需要）
*   "amount :=" 不在 while 循环内，我认为如果任何值比 CLOB 中的第一行短，这会导致一个大错误

我已经将其实现为相当快速和肮脏的修复。我敢肯定应该有更优雅的解决方案......来吧。示例表：

```
create table test (c clob);

insert into test (c) values (
-- line 1 (empty)
chr(10)||'line 2'
||chr(10) -- line 3 (empty)
||chr(10)||'line 4'
||chr(10)||'line 5'
||chr(10)); -- line 6 (empty) 
```

以及修改后的代码：

```
set serveroutput on;
declare
    cursor c_clob is
    select c from test;

    c clob;
    -------------------------------
    procedure printout
       (p_clob in out nocopy clob) is
      offset number := 1;
      amount number := 32767;
      len    number := dbms_lob.getlength(p_clob);
      lc_buffer varchar2(32767);
      i pls_integer := 1;
    begin
      if ( dbms_lob.isopen(p_clob) != 1 ) then
        dbms_lob.open(p_clob, 0);
      end if;
      while ( offset < len )
          loop
            -- If no more newlines are found, read till end of CLOB
            if (instr(p_clob, chr(10), offset) = 0) then
                amount := len - offset + 1;
            else
                amount := instr(p_clob, chr(10), offset) - offset;
            end if;

            -- This is to catch empty lines, otherwise we get a NULL error
            if ( amount = 0 ) then
                lc_buffer := '';
            else
                dbms_lob.read(p_clob, amount, offset, lc_buffer);
            end if;
            dbms_output.put_line('Line #'||i||':'||lc_buffer);

            -- This is to catch a newline on the last line with 0 characters behind it
            i := i + 1;
            if (instr(p_clob, chr(10), offset) = len) then
                lc_buffer := '';
                dbms_output.put_line('Line #'||i||':'||lc_buffer);
            end if;

            offset := offset + amount + 1;
          end loop; 
     if ( dbms_lob.isopen(p_clob) = 1 ) then
        dbms_lob.close(p_clob);
      end if; 
    exception
      when others then
         dbms_output.put_line('Error : '||sqlerrm);
    end printout;
    ---------------------------
begin
    dbms_output.put_line('-----------');
    open c_clob;
    loop
       fetch c_clob into c;
       exit when c_clob%notfound;
       printout(c);
    end loop;
    close c_clob;
end; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-08T19:29:18.770

[伊曼纽尔的回答](https://stackoverflow.com/a/22555569/1361991)

这是一个优雅的解决方案，可以很好地处理超过 32767 个字符或超过 4K 字符的行。

ANSI 标准查询：

```
DECLARE
  v_tmp clob :='aaaa'||chr(10)||
               'bbb'||chr(10)||
               'ccccc';
BEGIN
  FOR rec IN (WITH clob_table(c) as (SELECT v_tmp c FROM DUAL),
                   recurse(text,line) as (SELECT regexp_substr(c, '.+', 1, 1) text,1 line
                                            FROM clob_table
                                           UNION ALL
                                          SELECT regexp_substr(c, '.+', 1, line+1),line+1
                                            FROM recurse r,clob_table
                                           WHERE line<regexp_count(c, '.+'))
            SELECT text,line FROM recurse) LOOP
    dbms_output.put_line(rec.text);
  END LOOP;
END; 
```

Oracle 特定查询（原帖）：

```
DECLARE
  v_tmp clob :='aaaa'||chr(10)||
               'bbb'||chr(10)||
               'ccccc';
BEGIN
  FOR rec IN (WITH clob_table(c) as (SELECT v_tmp c FROM DUAL)
            SELECT regexp_substr(c, '.+', 1, level) text,level line
             FROM clob_table
          CONNECT BY LEVEL <= regexp_count(c, '.+')) LOOP
      dbms_output.put_line(rec.text);
  END LOOP;
END; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-06T18:19:34.490

我创建了一个名为***lixo_mq***的表：

```
CREATE TABLE LIXO_MQ (CAMPO1 VARCHAR2(4000)) 
```

我复制了*打印输出*程序并将其更改为不同的工作方式：

```
PROCEDURE PRINTOUT (P_CLOB IN OUT NOCOPY CLOB) IS
   V_APARTIR                     NUMBER (20);
   V_CONTAR                      NUMBER (20);
   V_LINHA                       VARCHAR2 (4000);
   V_REG                         NUMBER (20);
   V_CORINGA                     VARCHAR2 (10) := CHR (10);
   V_ERRO                        VARCHAR2 (4000);
BEGIN
   IF (DBMS_LOB.ISOPEN (P_CLOB) != 1) THEN
      DBMS_LOB.OPEN (P_CLOB, 0);
   END IF;

   V_APARTIR                  := 1;
   V_REG                      := 1;

   WHILE DBMS_LOB.INSTR (LOB_LOC                       => P_CLOB
                        ,PATTERN                       => V_CORINGA
                        ,OFFSET                        => 1
                        ,NTH                           => V_REG
                        ) > 0
   LOOP
      V_CONTAR                   :=
                 DBMS_LOB.INSTR (LOB_LOC                       => P_CLOB
                                ,PATTERN                       => V_CORINGA
                                ,OFFSET                        => 1
                                ,NTH                           => V_REG
                                )
               - V_APARTIR;

      IF V_APARTIR > 1 THEN
         V_LINHA                    :=
                         DBMS_LOB.SUBSTR (LOB_LOC                       => P_CLOB
                                         ,AMOUNT                        =>   V_CONTAR
                                                                           - 1
                                         ,OFFSET                        =>   V_APARTIR
                                                                           + 1
                                         );
      ELSE
         V_LINHA                    :=
                                 DBMS_LOB.SUBSTR (LOB_LOC                       => P_CLOB
                                                 ,AMOUNT                        => V_CONTAR
                                                 ,OFFSET                        => V_APARTIR
                                                 );
      END IF;

      INSERT INTO LIXO_MQ
                  (CAMPO1
                  )
           VALUES (   V_REG
                   || ':'
                   || V_LINHA
                  );

      COMMIT;
      V_APARTIR                  :=
                           DBMS_LOB.INSTR (LOB_LOC                       => P_CLOB
                                          ,PATTERN                       => V_CORINGA
                                          ,OFFSET                        => 1
                                          ,NTH                           => V_REG
                                          );
      V_REG                      :=   V_REG
                                    + 1;
   END LOOP;

   IF (DBMS_LOB.ISOPEN (P_CLOB) = 1) THEN
      DBMS_LOB.CLOSE (P_CLOB);
   END IF;
EXCEPTION
   WHEN OTHERS THEN
      V_ERRO                     :=    'Error : '
                                    || SQLERRM;

      INSERT INTO LIXO_MQ
                  (CAMPO1
                  )
           VALUES (V_ERRO
                  );

      COMMIT;
END PRINTOUT; 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-11-16T03:17:06.157

```
 declare
    c_clob clob := empty_clob();
    c_offset number;
    c_len number;
    read_cnt number;
    prev_buf number := 0;
    read_str varchar2(32000);
    BEGIN
   -- Read the clob in to the local variable
        select c into c_clob from test;
        c_offset := 1;
   -- Get the length of the clob
        c_len := dbms_lob.getlength(c_clob);
   -- Read till the current offset is less the length of clob
    while(c_offset <= c_len)
        loop
   -- Get the index of the next new line character
           read_cnt := instr(c_clob, CHR(10), c_offset, 1);
           exit when read_cnt = 0;
   -- Read the clob in the index
           read_str := dbms_lob.substr(c_clob, read_cnt-c_offset, c_offset);                                          
           dbms_output.put_line('Line#' || read_str);
   -- Now the current offset should point after the read line
           c_offset := read_cnt+1;
           end loop;
        END;
    / 
```

# red-black-tree - 每棵有效的红黑树都存在吗？

> ID：11647042
> 
> 赞同：13
> 
> 时间：2012-07-25T09:48:34.770
> 
> 标签：red-black-tree

假设你有[一棵红黑树](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)，它是一个有效的[二叉搜索树](http://en.wikipedia.org/wiki/Binary_search_tree)并且不违反任何这些规则：

*   一个节点要么是红色的，要么是黑色的。
*   根是黑色的。
*   所有叶子 (NIL) 都是黑色的。
*   每个红色节点的两个孩子都是黑色的。
*   从给定节点到其任何后代叶子的每条简单路径都包含相同数量的黑色节点。

这样一棵红黑树看起来像这样： ![在此处输入图像描述](../Images/0dad0cf26c368b0bd56c751ee21ca7cd.png)

**满足这些限制的每棵可能的树是否都有插入和删除的序列，从而生成红黑树？**

[我问这个问题是因为我想写一篇关于红黑树的博客文章，我想举一些例子。]

如果你想测试一个反例：这是[一个在 python 中实现的红黑树，](https://github.com/MartinThoma/algorithms/blob/master/datastructures/redBlackTree.py)其中实现了生成图像的函数。

**澄清问题**：我们制作游戏。

*   我画了一棵符合所有限制的红黑树。
*   你必须找到插入和删除的序列，这样你才能得到我的红黑树。

我可以画一棵红黑树，让你赢不了吗？

**颜色很重要！如果树有不同的形状或不同的颜色，它就不是同一棵红黑树。**

您至少应该知道如何生成这两个红黑树： ![在此处输入图像描述](../Images/a5ae98397a0f8191135225dde3d192aa.png) ![在此处输入图像描述](../Images/8d3dbbccb6022924e32e5cfe4b299042.png)

请注意，这只是对您的检查，如果它可以工作。如果你只知道如何得到这两个红黑树，你是无法回答这个问题的！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T20:37:17.200

我相信以广度优先（级别顺序）遍历插入节点将产生任何红黑树。

[http://en.wikipedia.org/wiki/Tree_traversal#Queue-based_level_order_traversal](http://en.wikipedia.org/wiki/Tree_traversal#Queue-based_level_order_traversal)

因为您按级别顺序插入它们，所以您不能拥有比原始树更不平衡的树。不需要删除，插入过程中也不需要旋转。在您的示例中，您应该按以下顺序插入它们：

```
13,8,17,1,11,15,25,6,22,27 
```

编辑：虽然这将生成具有正确值和形状的二叉搜索树，但这可能不会生成正确的颜色......这取决于插入函数的实现。原因是红黑树的定义允许当树有多个节点并且是完整的并且所有叶子都处于相同深度时节点颜色的变化 - 按照维基百科的定义，这是一棵“完美”的二叉树：

[http://en.wikipedia.org/wiki/Binary_tree#Types_of_binary_trees](http://en.wikipedia.org/wiki/Binary_tree#Types_of_binary_trees)

假设这棵树有三个节点，其值为 {1,2,3}，其中“2”是根节点，根据定义，它是黑色的。节点 {1,3} 既可以是黑色也可以是红色而不违反红黑规则。因此，一个完全有效的红黑插入实现可以检测树何时“完美”并将每个节点着色为黑色。这样的实现将阻止构建一棵树，例如，在每个级别交替黑色和红色。

编辑 2：鉴于两个红黑树都是可能的输入（所有三个节点为黑色，节点 1 和 3 均为红色），这就解决了是否需要删除的问题，如果有解决方案，则需要删除。我现在想到的问题是是否只有一种方法可以实现红黑树插入/删除。如果有不止一个，并且如果它们产生不同的树，那么游戏玩家将必须了解实现，以便指定插入和删除的顺序来构造给定的红黑树。我对红黑树的实现知之甚少，无法回答是否只有一种实现它们的方法或是否有多种方法的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-04T19:32:56.233

我认为您在这里要求的是正式证明是否可以通过一系列插入和删除来构造任意合法的红黑树，前提是在每次操作后重新平衡树。我不打算尝试这样的证明，但我想我知道如何构建这样的证明。

我将详尽地涵盖所有可能的子树，涉及单个节点周围的所有合法排列，并证明它是可以构建的。所以：

*   黑节点
    *   没有父母
        *   左孩子为空
            *   右孩子 null
            *   右孩子不为空
        *   左孩子不为空
            *   右孩子 null
            *   右孩子不为空
    *   是左孩子
        *   和上面一样
    *   是正确的孩子
        *   和上面一样
*   红色节点（不能没有父节点）
    *   是左孩子
        *   和上面一样
    *   是正确的孩子
        *   和上面一样

然后您必须创建一个归纳步骤，表明任何任意树都是上述情况的排列。当我这样说时，这似乎很简单，但就像我在评论中提到的那样，我太生疏了，无法处理实际的证明。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T05:49:04.220

我认为处理这类问题的数学分支是图论，并研究了一些验证红黑树和其他平衡树的属性的图论论文，我被引导到这篇论文：[http://www.math .unipd.it/~baldan/Papers/Soft-copy-pdf/cosmicah05.pdf](http://www.math.unipd.it/~baldan/Papers/Soft-copy-pdf/cosmicah05.pdf)和[http://www.math.unipd.it/~baldan/Papers/Soft-copy-pdf/cosmicah05.pdf](http://www.math.unipd.it/~baldan/Papers/Soft-copy-pdf/cosmicah05.pdf)和这篇论文[http ://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.87.1161&rep=rep1&type=pdf](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.87.1161&rep=rep1&type=pdf)，他们应该能够回答您对抽象属性的查询。或者至少可以帮助您以一种可以带来更好资源的方式来表达您的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-04T06:38:07.140

如果一棵树遵循以下规则：

*   一个节点要么是红色的，要么是黑色的。
*   根是黑色的。
*   所有叶子 (NIL) 都是黑色的。
*   每个红色节点的两个孩子都是黑色的。
*   从给定节点到其任何后代叶子的每条简单路径都包含相同数量的黑色节点。

它将是一棵平衡二叉树，可以称为红黑树。

红黑树的插入和删除有特殊的条件和规则。如果您的示例中的树遵循 RB 树插入和删除算法，则它将始终是 RB 树。在插入和删除过程中，不平衡的二叉树总是会通过改变节点颜色、旋转节点或分支来恢复为平衡树。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-05T22:40:45.510

我不确定答案是否定的，我将在下面说明原因。如果完全可以做到，则有必要插入比需要更多的节点，然后删除其他节点。

您可以删除任意红色叶子节点，树不会改变形状或重新着色。您可以在树底部的黑色父节点下插入任意红色叶子节点，而不会改变树的形状。

如果您需要使树的一侧更茂密，则在该位置插入节点就足够了。这将首先导致树上的重新着色，然后最终重新平衡。

我认为它无法完成的原因是删除具有 2 个子节点的节点，完成的方式是将节点与后继节点或前驱节点交换（任何一个都有效），然后删除它移动到的节点。有继任者或前任者的选择，产生的树会有所不同。因此，您需要控制删除的这一方面并到达某个树，可能需要说“删除节点 A 使用后继”，现在“删除节点 B 使用前任”

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-10-13T14:48:25.817

红黑树被分解为灵活的红色缓存和不变的黑色支持。为了保持黑色高度不变，您必须将红色缓存移动到顶部，这样您就可以调整高度。粗略地说，不移动真实节点就可以轻松移动红色容量。红色容量必须不断换出到黑色树顶，从而生成全局红色瀑布。

红色容量向下移动，黑色分支向上移动。

# ruby-on-rails - ActiveAdmin 过滤布尔值作为单个复选框

> ID：11647043
> 
> 赞同：6
> 
> 时间：2012-07-25T09:48:36.080
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activeadmin

如何使用单个复选框过滤布尔值？

例如，以下为我提供了两个带有`yes`和`no`值的复选框：

```
ActiveAdmin.register User do    
  filter :is_retired, :as => :check_boxes
end 
```

HBTM 关联过滤如下：

```
filter :roles_id, :as => :check_boxes, :collection => proc { Role.all } 
```

但是我的`User`模型中有一个布尔字段，需要一个带有`Is retired`标签的复选框。有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-01-29T07:59:33.310

```
filter :is_retired,
  as: :check_boxes,
  collection: [['Yes', true]],
  label: 'Retired?' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-27T17:58:36.137

正如[其他地方](https://stackoverflow.com/questions/7608788)所建议的那样使用 `filter :enabled, as: :select, collection: [["Yes", true], ["No", false]]`

# xtk - 在 renderer2d 中显示体积以外的对象

> ID：11647045
> 
> 赞同：0
> 
> 时间：2012-07-25T09:48:43.177
> 
> 标签：xtk

我正在使用 xtk 工具包。有没有办法在 renderer2d 中渲染除 1 个体积（带有标签图）以外的对象。例如，我已经能够将球体添加到 3d 渲染器，但不是 2d？

我正在尝试构建一个简单的感兴趣区域功能，该功能通过图集来命名在 ROI 中找到的结构并报告它们。为此，我正在考虑将 atlas 结构加载为 vtk 对象，然后循环遍历球体的点并使用 pick () 对象函数。你认为这种方法会奏效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:07:00.213

现在这是不可能的，但在 2D 中显示其他结构听起来像是一个很棒的功能。也许有点像小部件。

我认为一般来说这会起作用（使用球体的挑选功能），但如果你想要它在 2D 中，你必须在 XTK 方面改变一些东西。2d 渲染器是 HTML5 2d 画布，基本上加载一个体积的切片，并为每个像素设置图像数据（或合并标签图），因此必须在那里完成一些工作以支持球体等。请随时提供帮助：）

# python - 非阻塞套接字，错误总是

> ID：11647046
> 
> 赞同：10
> 
> 时间：2012-07-25T09:48:45.877
> 
> 标签：python, sockets

```
sock.setblocking(0)
try:
    data = sock.recv(1024)
 except socket.error, e:
    if e.args[0] == errno.EWOULDBLOCK: 
          print 'EWOULDBLOCK'
else:            
   if not data:   #recv over
      sock.close()
      print 'close================='       
   else:
      print 'recv ---data---------'
      poem += data 
```

以上所有代码都在一个循环中。使用`non-blocking socket`（只想测试“非阻塞套接字”）来获取数据。但总是打印'EWOULDBLOCK'，我不知道为什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-25T12:10:01.467

套接字是非阻塞的，因此`recv()`如果没有要读取的数据会引发异常。请注意，errno.EWOULDBLOCK = errno.EAGAIN = 11。这是 Python（实际上是操作系统）告诉您稍后再试的方式`recv()`。

我注意到每次遇到此异常时都会关闭套接字。那根本没有帮助。你的代码应该是这样的：

```
import socket, errno, time

sock = socket.socket()
sock.connect(('hostname', 1234))
sock.setblocking(0)

while True:
    try:
        data = sock.recv(1024)
        if not data:
            print "connection closed"
            sock.close()
            break
        else:
            print "Received %d bytes: '%s'" % (len(data), data)
    except socket.error, e:
        if e.args[0] == errno.EWOULDBLOCK: 
            print 'EWOULDBLOCK'
            time.sleep(1)           # short delay, no tight loops
        else:
            print e
            break 
```

对于这类事情，[`select`](http://docs.python.org/library/select.html#module-select)模块通常是要走的路。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T11:52:14.663

异常是由设计引发的，因为您使用的是`non-blocking IO`.

> 主要的机械区别是 send、recv、connect 和 accept 可以在不执行任何操作的情况下返回。你（当然）有很多选择。您可以检查返回码和错误码，通常会让自己发疯。

引用自[Python 文档](http://docs.python.org/howto/sockets.html#non-blocking-sockets)

如果你运行`man errno 3`，你会看到描述`EWOULDBLOCK`。例外是合理的，因为还没有要读取的数据。

# android - Android 设备时间设置为 1980 年 1 月 6 日

> ID：11647047
> 
> 赞同：0
> 
> 时间：2012-07-25T09:48:46.190
> 
> 标签：android, android-intent

我有一部华为 Ideos 安卓手机。有时时钟会自动设置为 1980 年 1 月 6 日。我试图通过尝试以下案例来重现此问题：

1) 将手机电池完全放电。2) 在不关闭手机的情况下从手机中取出电池。3) 即使电池电量极低，也要手动关机。

在实际有意义的情况 3 中永远不会出现问题。但在其他两种情况下，有时会将时间设置为 1980 年 1 月 6 日，但并非总是如此。这种行为也可能发生在我可能没有想到的其他一些情况下。这种行为的原因是什么？

现在，如果时间设置为 1980 年 1 月 6 日，我试图看看如何自动重置它。

1）如果您再次进行适当的手动关机，时间就会变得正确 2）如果您启用使用网络时间选项，那么它会被重置。

有人可以向我解释这种行为的原因吗？还有这个特定日期的意义是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T23:31:21.677

1980 年 1 月 6 日是整个 GPS 时代的第一天，手机用来自动设置日期和时间。我猜它使用该日期作为默认日期，或者这可能是它在寻找卫星时可以抓取的第一个日期，因为那是它们“打开”的第一天。

# c#-4.0 - 将 Salesforce 元数据 API 与 C# 一起使用

> ID：11647053
> 
> 赞同：3
> 
> 时间：2012-07-25T09:49:06.580
> 
> 标签：c#-4.0, salesforce

如何使用 C# 创建 Salesforce 元数据连接？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:13:34.880

找到了答案：

```
Sforceservice binding = new Sforceservice();
binding.url = <salesforceurl>;
LoginResult lr = binding.login(<username>, <password>);

binding.url = lr.serverurl;
binding.sesionheadervalue = new sessionheader();
binding.sessionheadervalue.sessionid = lr.sessionid;

MetaDataService service = new MetaDataService();
service.sesionheadervalue = new sessionheader();
service.sessionheadervalue.sessionid = binding.sessionid; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-30T02:38:15.393

使用企业 API 的元数据 API 示例。**诀窍**是使用 Enterprise API 将登录会话标头更改为 MetaAPI 客户端

```
 string username = "username";
        string password = "password";

        // Create a SoapClient specifically for logging in
        loginClient = new SoapClient();

        LoginResult lr = null;
        try
        {
            Console.WriteLine("\nLogging in...\n");
            lr = loginClient.login(null, username, password);
        }
        catch (Exception e)
        {
            // Write the fault message to the console 
            Console.WriteLine("An unexpected error has occurred: " + e.Message);

            // Write the stack trace to the console 
            Console.WriteLine(e.StackTrace);
        }

        // Check if the password has expired 
        if (lr.passwordExpired)
        {
            Console.WriteLine("An error has occurred. Your password has expired.");
        }

        // end point
        endpoint = new EndpointAddress(lr.metadataServerUrl);
        Console.WriteLine("End point: " + endpoint.Uri);

        // session header
        Metadata.SessionHeader metaSession = new Metadata.SessionHeader();
        metaSession.sessionId = lr.sessionId;

        MetadataPortTypeClient client = new MetadataPortTypeClient("Metadata", endpoint);
        CallOptions callOptions = new CallOptions();
        callOptions.client = lr.userId;

        ListMetadataQuery q = new ListMetadataQuery();
        q.type = "CustomObject";
        FileProperties[] fs = client.listMetadata(metaSession, callOptions, new []{ q} , 39.0);
        foreach (FileProperties f in fs)
        {
            Console.WriteLine("response with message: " + f.fileName);
            Console.WriteLine("response with message: " + f.fullName);
        } 
```

# ruby - 解析字符串以将数据保存在 mongo db 上

> ID：11647054
> 
> 赞同：0
> 
> 时间：2012-07-25T09:49:10.387
> 
> 标签：ruby, string, parsing, hash, mongoid

我有一个 .txt 文件，其中不包含这样的插入查询。我想解析 file.txt 并获取数据，以便为我的 rails 应用程序保存在我的 mongoid db 中。我尝试使用基本的 ruby​​ 方法进行解析，但无法获得正确的格式。我可以从可以直接用于实现批量插入或正则表达式来解析和获取值的数据中获取哈希值。

```
INSERT INTO "venues" ("_id", "postal_code", "lat", "lng", "address", "title", "type") 
VALUES (33, "SW1A 0AA", "51.49984", "-0.124663", "BIG BEN & HOUSES OF PARLIAMENT, House of 
Commons, London, SW1A 0AA","BIG BEN & HOUSES OF PARLIAMENT", 2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:46:01.957

您需要一个正则表达式，它包含一个`INSERT INTO (...)`和`VALUES (...)`部分并且不依赖于新行符号。例如：

```
str.gsub(/(\r|\n)/, '') =~ /INSERT INTO "(\w{1,})" \((.*{1,})\) VALUES \((.*{1,})\)/ 
```

然后你将有下一个变量：

```
table, keys, values = $1, $2, $3 
```

您还可以从额外的符号中清除键和值：

```
keys.split(",").map {|val| val.gsub("\"", '').strip }
values.split(",").map {|val| val.gsub("\"", '').strip } 
```

所以现在您已经拥有了处理迁移到 MongoDB 所需的所有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T19:08:00.830

item.scan(/VALUES\s(.+)/).first.gsub(/VALUES\s(|)|\"/,"").split(", ")

# css - CSS浮动和位置在IE6中不起作用

> ID：11647057
> 
> 赞同：0
> 
> 时间：2012-07-25T09:49:15.340
> 
> 标签：css, internet-explorer, treeview

我对 IE6 中的 CSS Float 和 Position 有问题，当鼠标悬停时，我实现的第 2 级子级树视图不向左显示，这在 IE7-9 和其他浏览器（Mozilla FireFox 和 Chrome）中不会发生，但 IE6 .

请找到我的示例树视图代码片段，如下所示：

```
<style type="text/css">
    .treeView
    {
        font-family: Century Gothic;
        font-size: 13px;
        font-weight: bold;
        color: #ff6500;
    }

    /* hyperlink style */
    .treeView a
    {
        color: #ff6500;
        text-decoration: none;
    }

    /* hyperlink hover style */
    .treeView a:hover
    {
        color: #ff6500;
        text-decoration: underline;
    }

    .treeView ul
    {
        list-style: none;
        margin: 0;
        padding: 0;
        width: 246px;
    }

    .treeView ul li
    {
        height: 100%;
        background: #def0f6;
        position: relative;
        float: left;
        width: 100%;
        z-index: 3;
    }

    /* item background color */
    .treeView li
    {
        background: #def0f6;
        border-top: 1px solid #007dc6;
        border-left: 1px solid #007dc6;
        border-right: 1px solid #007dc6;
    }

    .treeView ul li a, .treeView ul li span
    {
        display: block;
        padding: 5px 8px 5px 15px;
    }

    /* hide and align child item, and child width */
    .treeView ul ul
    {
        position: absolute;
        top: -1px;
        visibility: hidden;
    }

    /* item background color when hover */
    .treeView li:hover
    {
        background: #ffffd8;
    }

    /* display child item when hover parent item */
    .treeView li:hover > ul
    {
        visibility: visible;
    }

    /* align 2nd child item to left when hover parent item */
    .treeView li:hover ul
    {
        display: block;
        left: 246px;
    }
</style>

<div class='treeView'>
    <ul>
        <li><span class='submenu'>Level 1</span>
            <ul>
                <li><a href='#' class='submenu'>Level 2</a>
                    <ul>
                        <li><a href='#'>Level 3</a></li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</div> 
```

我怀疑这是由于 CSS Float:left 和 Position:Relative 造成的。知道 float:left 如何在 IE 6 中工作吗？请帮忙

提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:57:06.650

The child selector `>` does not work in IE6\. You can do it by rewriting your CSS so it applies more generally, or use classes to identify the level you are at. There might be an other problem; you should use `display: none;` instead of `visibility: hidden`. `visibility` changes really only the visibility, but layout etc. is affected. `display: none` takes the element out and is what you really want.

# sql-server-express - 安装安装程序时如何在客户端的 Sqlexpress 中恢复我的数据库 .bak 文件？

> ID：11647062
> 
> 赞同：1
> 
> 时间：2012-07-25T09:49:51.523
> 
> 标签：sql-server-express, setup-project, database-restore

我正在开发我自己的支持数据库的软件，从而创建设置和部署文件以使我的系统的客户端/用户能够安装我的软件。当他们将我的软件安装到他们的系统中时，我想嵌入 sql express 数据库实例以进行安装。

最主要的是我希望用户不要进行任何与数据库相关的活动，也就是说，他们应该只安装软件并准备好开展业务。他们不需要关心数据库连接、脚本运行和其他与数据库相关的任务。

我想从安装和部署项目中嵌入数据库安装逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T16:09:01.790

如果要创建的数据库中没有数据（或只有少量数据），更好的选择可能是在您的安装逻辑中安装 express 实例，然后运行脚本来创建数据库和表等并插入任何默认值作为应用程序安装程序的一部分可能包含在其中的数据。这也应该会导致安装包更小，因为您不需要在安装程序中包含 .bak 文件，只需几个脚本文件。

# java - Spring MVC 2.5：如何加载属性文件

> ID：11647065
> 
> 赞同：2
> 
> 时间：2012-07-25T09:49:55.830
> 
> 标签：java, spring-mvc

我需要加载许多属性文件，它们位于资源文件夹中。

我有一个名为 abc_en.properties 的资源，其内容如下：
`a = x
b = y
c = z`

我需要在 Java 方法中使用属性 sing java.util.Properties：

```
 java.util.Properties reportProperties = new java.util.Properties();   
   ...
  String a = reportProperties.getProperty("a"); 
```

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T09:58:56.687

您需要在上下文文件中定义 propertyConfigurer bean：

```
<bean id="propertyConfigurer"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:abc.properties</value>
            <value>classpath:efg.properties</value>
        </list>
    </property>
</bean> 
```

**编辑：**

为了使用`java.util.Properties`，您需要`PropertiesFactoryBean`在上下文文件中定义 bean：

```
 <bean id="properties" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
          <property name="location">
               <list>
                 <value>classpath:abc_en.properties</value>
                 <value>classpath:abc_fr.properties</value>
               </list>
          </property>
        </bean> 
```

然后在您的类中，您需要定义一个`java.util.Properties`变量并将属性 bean 加载到其中：

```
public class MyClass {

     @Autowired
     private java.util.Properties properties;

     public void myMethod() {
         String a = properties.getProperty("a");
         String b = properties.getProperty("b");
         String c = properties.getProperty("c");
     }
} 
```

还有其他方法可以将属性 bean 加载到您的类中，但是如果您使用`@Autowired`注释，则需要将`<context:annotation-config />`元素放入您的上下文文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:54:20.277

您需要在 xml 文件中定义消息源 bean。

试试这个方法

```
<bean id="messageSource" name="applicationMessageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basenames">
      <list>
          <value>resources.abc.abc</value>
       </list>
    </property>
</bean> 
```

# delphi - 我将如何测试日期是否在日期范围内（两个字符串）？

> ID：11647071
> 
> 赞同：4
> 
> 时间：2012-07-25T09:50:11.900
> 
> 标签：delphi, date-range

我有两个字符串，例如`05.04.2002`and `23.01-2002 - 23.06.2002`。

如何确定我的第一个字符串中的日期是否介于第二个字符串中的日期之间？

我一直在想什么

```
dateString := '05.04.2002';
dateRangeString := '23.01-2002 - 23.06.2002';

date := StrToDate( dateString );
rangeStart := StrToDate( LeftStr(dateRangeString, 10) );
rangeEnd := StrToDate( RightStr(dateRangeString, 10) ); 
```

现在从那里我不知道该怎么办！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T10:07:50.227

您可以使用单位`System.DateUtils`及其功能[DateInRange](http://docwiki.embarcadero.com/Libraries/XE2/en/API:System.DateUtils.DateInRange)：

```
var
  dStart, dEnd, d2Test: TDate;
begin
  dStart := StrToDate('25/07/2012');
  dEnd   := StrToDate('29/07/2012');

  d2Test := StrToDate('26/07/2012');

  if DateInRange(d2Test, dStart, dEnd) then
    ShowMessage('In range!'); 
```

您还可以检查此函数的第四个参数（`AInclusive: Boolean = True`）...根据您的需要...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T09:53:10.773

`TDateTime`变量本质上是一个变量`double`，两个日期时间值（视为日期时间值）之间的顺序与视为实数的值之间的顺序相同。

```
procedure TForm4.FormCreate(Sender: TObject);
var
  d1, d2, d: TDate;
begin
  d1 := StrToDate('2012-07-25');
  d2 := StrToDate('2012-07-29');

  d := StrToDate('2012-07-26');

  if (d1 <= d) and (d <= d2) then
    ShowMessage('In range!');
end; 
```

当然，使用`Math`，你也可以写

```
 if InRange(d, d1, d2) then
      ShowMessage('In range!'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T11:31:58.653

我想补充的唯一一点是，如果日期的格式为 YYYY-MM-DD，那么您可以简单地比较它们以确定它们是否在一个范围内。无需先将它们转换为 TDateTime。

```
R1 := '2012-01-01';
R2 := '2012-01-31';
D := '2012-01-15';

if (D >= R1) and (D <= R2) then
  // within range 
```

# image - drupal 渲染文件

> ID：11647074
> 
> 赞同：1
> 
> 时间：2012-07-25T09:50:20.887
> 
> 标签：image, drupal-7, width, render

我有正在渲染的图像

```
$filename = file_create_url($node->field_main_image['und'][0]['uri']);
print '<img src="<?php print $filename; ?>" />'; 
```

但是，这并没有给我 IE 所需的宽度和高度，我如何使用图像的实际高度和宽度进行主题化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:54:57.820

您应该使用内置渲染。

```
print render($content['field_main_image']); 
```

这将为您输出具有所有高度和宽度的图像。您可以在配置页面中设置图像样式。然后在内容类型显示中，您可以将要输出的图像设置为您设置的图像样式之一。

编辑：

这仅适用于节点页面。如果您想在页面模板中执行此操作：

```
<?='<img src="'.image_style_url('IMAGE_STYLE', $node->field_main_image['und'][$count]['filename']).'" />'?> 
```

您可以将 IMAGE_STYLE 替换为您想要的样式的机器名称。

# php - 查询与本地主机一起工作，而不是在实时服务器中工作

> ID：11647076
> 
> 赞同：0
> 
> 时间：2012-07-25T09:50:24.237
> 
> 标签：php, mysql

大家，这个mysql查询在本地主机上正常工作

```
 $query3 = "SELECT tutor_category_subject.subject_id, GROUP_CONCAT( DISTINCT subject.subjects SEPARATOR ', ') AS teaching_subjects  
                            FROM tutor_category_subject
                            INNER JOIN subject ON tutor_category_subject.subject_id = subject.subject_id
                            WHERE tutor_category_subject.tutor_id = $teacherId"; 
```

但是在将其上传到实时服务器时，它无法正常工作，并且我收到此错误消息。

> 如果没有 GROUP BY 子句，则混合没有 GROUP 列的 GROUP 列 (MIN(),MAX(),COUNT(),...) 是非法的

这是我没有 GROUP BY 子句的查询输出。

```
 +------------+-------------------------------+
| subject_id | teaching_subjects             |
+------------+-------------------------------+
|          8 | Art & Craft                   |
|         10 | Buddhism                      |
|         12 | Catholicism                   |
|         14 | Christianity                  |
|         16 | Dancing                       |
|         34 | Accounting                    |
|         37 | Business Studies              |
|         39 | Conbined Mathematics          |
|         42 | General Infomation Technology |
+------------+-------------------------------+ 
```

有人可以告诉我可能是什么问题吗？

谢谢

描述表格

```
mysql> describe tutor_category_subject;
+-------------+-----------------+------+-----+---------+----------------+
| Field       | Type            | Null | Key | Default | Extra          |
+-------------+-----------------+------+-----+---------+----------------+
| tcs_id      | int(4) unsigned | NO   | PRI | NULL    | auto_increment |
| tutor_id    | int(4) unsigned | NO   |     | NULL    |                |
| category_id | int(2) unsigned | NO   |     | NULL    |                |
| subject_id  | int(4) unsigned | NO   |     | NULL    |                |
+-------------+-----------------+------+-----+---------+----------------+

mysql> describe subject;
+------------+-----------------+------+-----+---------+----------------+
| Field      | Type            | Null | Key | Default | Extra          |
+------------+-----------------+------+-----+---------+----------------+
| subject_id | int(2) unsigned | NO   | PRI | NULL    | auto_increment |
| subjects   | varchar(60)     | NO   | MUL | NULL    |                |
+------------+-----------------+------+-----+---------+----------------+ 
```

我需要为特定的导师选择科目。一位导师可以有更多的科目。这就是我在查询中使用“GROUP_CONTACT()”的原因。没有 group by 子句查询在本地主机上工作。但不是在网上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:52:03.380

错误消息告诉您为什么会发生这种情况：您需要一个[`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html)子句。

在不知道查询应该做什么以及您的数据是什么的情况下，很难说出您想要分组的确切内容。

我不确定我是否正确理解了您想要的内容，请尝试这是否适合您：

```
SELECT s.subject_id, GROUP_CONCAT(DISTINCT s.subjects)
FROM tutor_category_subject AS tcs
INNER JOIN subject as s 
    ON tcs.subject_id = s.subject_id
GROUP BY tcs.category_id
WHERE tcs.tutor_id = $teacherId 
```

注意 SQL 注入`$teacherId`

如您所见，我已经完全删除了`GROUP`ing 的东西。如果您的查询产生一个结果，您希望将多行合并为一个，那么您需要`GROUP_BY my_column`：合并那些在 column 中具有相等值的行`my_column`。[聚合函数](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)用于控制其他列的合并方式。

# java - 如何正确调整和包装工具提示

> ID：11647080
> 
> 赞同：3
> 
> 时间：2012-07-25T09:50:41.680
> 
> 标签：java, javafx-2, groovyfx

我正在向各种 ListCells 添加工具提示，它们可以有很长（或很短）的文本。根据[RT-5313](http://javafx-jira.kenai.com/browse/RT-5313)，如果设置了宽度，则只能让工具提示包裹文本。

*   如果没有设置宽度，短文本上的工具提示看起来不错——但大文本会出现工具提示文本溢出（“text ...”）
*   如果设置了宽度，大文本上的工具提示将换行 - 但在短文本上它将有很多额外的空白空间并且看起来很糟糕

我认为可以只向那些具有大文本的单元格添加工具提示，但无法弄清楚如何查找单元格的当前内容是否被溢出。有什么建议吗？

此外，到目前为止，我编写的大多数 JavaFX 代码都定义了舞台的大小，并将调整单个组件（例如标签）大小的任务留给了布局管理器。这不被认为是一种好习惯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T20:17:14.540

您可能需要检查 API 更新。由于 JavaFX 2.2 支持换行和文本溢出： [http ://docs.oracle.com/javafx/2/api/javafx/scene/control/Tooltip.html](http://docs.oracle.com/javafx/2/api/javafx/scene/control/Tooltip.html)

# ruby-on-rails - 如何优化我的索引？

> ID：11647083
> 
> 赞同：0
> 
> 时间：2012-07-25T09:50:56.030
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, activerecord, indexing

我有一个与 Oracle 对话的 Rails 应用程序。
平均而言，我的请求具有以下完成时间：（从 rails production.log 中提取）

```
Completed 200 OK in 85ms (Views: 8.4ms | ActiveRecord: 17.1ms) 
```

基本上，我有一个速度表：

*   gps_id
*   速度
*   时间戳

=> 它以给定的时间戳存储给定 gps 设备的速度。

我的 ActiveRecord 请求类似于：

```
from = DateTime.strptime(params[:from], "%Y-%m-%dT%H:%M:%S%Z") 
to = DateTime.strptime(params[:to], "%Y-%m-%dT%H:%M:%S%Z") 
@speeds = Speed.where('gps_id = ? and timestamp >= ? and timestamp <= ?', gps.id, from, to).order('id desc') 
```

=> 它检索两个时间戳之间的所有速度信息

由于请求真的很慢，我在 Speed 表上添加了 2 个索引：

*   gps_id 列上的一个索引
*   时间戳列上的一个索引

我想这是第一种基本方法，但是如何优化呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:55:06.500

您可以在 gps_id 和时间戳上添加多列索引。这可能会改善事情。但是，如果您插入数据的频率高于查询数据的频率，则可能会在其他地方产生负面影响。

# java - org.apache.wicket.util.resource.IResourceStream 引发 javascript 错误。不能下载文件

> ID：11647090
> 
> 赞同：1
> 
> 时间：2012-07-25T09:51:11.057
> 
> 标签：java, javascript, jakarta-ee, wicket, wicket-1.5

使用 org.apache.wicket.util.resource.IResourceStream 我在服务器上创建了 zip 文件，并在 outputstream 中写入了相同的 zip 文件。但它会引发以下错误，我正在打破我的头脑。有什么建议吗？

```
Timestamp: 7/25/2012 3:13:28 PM
Error: not well-formed
Source File: XXX
Line: 1, Column: 3
Source Code:
PK 
```

Java 代码

```
 AjaxButton one = new AjaxButton("one"){     
                @Override
                public void onSubmit(AjaxRequestTarget target,Form form) {
                    // TODO Auto-generated method stub
                    try {

                        {
                        IResourceStream iResourceStream  = null;
                        iResourceStream = new AbstractResourceStreamWriter(){

                            @Override
                            public String getContentType() {
                                // TODO Auto-generated method stub
                                return "application/zip";
                            }

                            @Override
                            public void write(OutputStream output) {
                                // TODO Auto-generated method stub
                                File tmpFile = null;
                                String batchFileName = "batch_"+dateFormat.format(new Date())".zip";
                                File zipFile = new File(batchFileName);
                                FileOutputStream zipFileOutputStream = null;
                                ZipOutputStream zipOutputStream = null;
                                try
                                {
                                    zipFileOutputStream = new FileOutputStream(zipFile);
                                    zipOutputStream = 
                                        new ZipOutputStream(zipFileOutputStream);    
                                    zipOutputStream.setLevel(Deflater.DEFAULT_COMPRESSION);
                                    for(XXX)
                                    {
// create tmpFile zip file here                                 
                                                    ZipEntry zipAdd = new ZipEntry(tmpFile.getName());  
                                                    System.out
                                                            .println(tmpFile.getName());
                                                    zipOutputStream.putNextEntry(zipAdd);
                                                    zipOutputStream.write(IOUtils.toByteArray(new FileInputStream(tmpFile)));
                                                    zipOutputStream.closeEntry();
                                                }
                                            }
                                        }
                                    }

                                }
                                catch (Exception e) {
                                    // TODO: handle exception
                                    e.printStackTrace();
                                }
                                finally
                                {
                                    if(zipOutputStream != null){
                                        try {
                                            zipOutputStream.flush();
                                            zipOutputStream.close();
                                        } catch (IOException e) {                   
                                            e.printStackTrace();
                                        }
                                    }

                                    if(zipFileOutputStream != null){
                                        try {
                                            zipFileOutputStream.flush();
                                            zipFileOutputStream.close();
                                        } catch (IOException e) {                   
                                            e.printStackTrace();
                                        }
                                    }
                                    try
                                    {
                                        {
                                            InputStream in = new FileInputStream(zipFile);
                                            byte[] buf = new byte[1024];
                                            int len;
                                            while ((len = in.read(buf)) > 0){
                                                output.write(buf, 0, len);
                                            }
                                            in.close();
                                            output.close();
                                        }
                                    }
                                    catch (Exception e) {
                                        // TODO: handle exception
                                        e.printStackTrace();
                                    }
                                }

                            }

                        };

                        getRequestCycle()
                        .setRequestTarget(new ResourceStreamRequestTarget(iResourceStream)
                        .setFileName("batch.zip"));

                    } else {

                    }

                } catch (Exception e)
{
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:39:35.413

您正在执行 AJAX 请求，但不是发送回 XML（浏览器中的 JS 代码所期望的），而是发送二进制数据。这就是为什么您会收到“格式不正确”的错误 - 它不是格式正确的 xml。

有两种方法可以完成这项工作。一种是根本不进行 AJAX 提交并使用常规 `Button`而不是`AjaxButton`. 我推荐这个。

如果你需要做一些其他的 AJAX 工作（更新面板或类似的东西）然后想要展示下载，看看这个：[https ://cwiki.apache.org/WICKET/ajax-update-and-文件下载-in-one-blow.html](https://cwiki.apache.org/WICKET/ajax-update-and-file-download-in-one-blow.html)

# c# - SharePointWeb.GetFile 方法给了我“无法打开文件”SPException

> ID：11647094
> 
> 赞同：0
> 
> 时间：2012-07-25T09:51:15.987
> 
> 标签：c#, sharepoint

我尝试打开这样的文件

> **fromServerURL = [http://mysite.com/sites/CM](http://mysite.com/sites/CM)**

， 没关系。

但是当我传递像这样的值时它给了我错误

> **fromServerURL = [http://mySite.com/](http://mySite.com/)**

```
SPFile file = oWebsiteFrom.GetFile(fromServerURL + "/" + fromPath + "/" + fileName); 
```

我尝试测试它并查看那些。

```
long length = file .Length; - > it gives me the correct length
byte[] a= file .OpenBinary(); - > it gave me the error
file.Item is also null. 
```

我找到了这个链接来解决这个问题，但是当我不知道确切的文件夹结构时，它适合我的情况。

[http://blogs.msdn.com/b/momalek/archive/2011/02/28/reading-item-attachments-programmatically-spfile-openbinary-exception.aspx](http://blogs.msdn.com/b/momalek/archive/2011/02/28/reading-item-attachments-programmatically-spfile-openbinary-exception.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:59:21.257

更好地描述您的问题将有助于提高答案的质量，但请尝试一下：

不要像现在这样获取文件，只需获取列表项，然后从列表项中获取文件：

```
SPListItem.File 
```

This way you won't have to construct the file url like you're doing now and you can get the listitem by using Linq/Linq2SharePoint/caml...

# extjs4.1 - extjs 4.1 页面在行更新时滚动到 Internet Explorer 中的网格顶部

> ID：11647095
> 
> 赞同：2
> 
> 时间：2012-07-25T09:51:17.360
> 
> 标签：extjs4.1

在我的网格上，我正在使用行编辑。

如果使用 Internet Explorer 10（也可能是其他版本）并且页面有滚动条

当我编辑一行并单击“更新”时，页面向上滚动到网格的开头。

这个问题在（虽然不是特别在 4.1 上）有很好的记录。

我已经看到修复了这样的覆盖 rowModel

```
Ext.override(Ext.selection.RowModel, {
    onRowMouseDown: function(view, record, item, index, e) {
//        view.el.focus();
        this.selectWithEvent(record, e);
    }
}); 
```

我还看到将以下内容添加到网格中。

```
selModel: Ext.create('Ext.selection.Model', { listeners: {} }), 
```

这些选项都不适合我。

*   编辑 *

我已经尝试了“preserveScrollOnRefresh：true”，如下所示。但问题仍然存在。我在 Dropbox 上放了一个例子。要在 Internet Explorer 中重新创建它，您需要最小化浏览器并单击/编辑需要网格页脚的项目。

[https://www.dropbox.com/s/l50d12t3cjq8kef/scrolling.htm](https://www.dropbox.com/s/l50d12t3cjq8kef/scrolling.htm)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T16:22:37.330

标准功能对我有用：

```
Ext.define('My.Grid', {
    extend: 'Ext.grid.Panel',

    viewConfig: {
        preserveScrollOnRefresh: true
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-20T05:51:28.780

如果您使用 CellModel 或对其他解决方案有疑问，此解决方案应该可以工作：

```
Ext.override(Ext.dom.Element, {
    focus: function (defer, dom) {
        var me = this,
            scrollTop,
            body;

        dom = dom || me.dom;
        body = (dom.ownerDocument || DOC).body || DOC.body;
        try {
            if (Number(defer)) {
                Ext.defer(me.focus, defer, me, [null, dom]);
            } else {
                if (dom.tagName != 'DIV') {
                    if (dom.offsetHeight > Ext.dom.Element.getViewHeight()) {
                        scrollTop = body.scrollTop;
                    }
                    dom.focus();
                    if (scrollTop !== undefined) {
                        body.scrollTop = scrollTop;
                    }
                }
            }
        } catch (e) {
        }
        return me;
    }
}); 
```

# windows-7 - 卷曲命令未在 Windows 7 中加载内容

> ID：11647096
> 
> 赞同：0
> 
> 时间：2012-07-25T09:51:21.567
> 
> 标签：windows-7, curl, cygwin

我已经在我的 Windows7 32 位上安装了 Cygwin 和 curl（通过 cygwin 安装程序）。然后打开 cygwin 终端并输入`curl --help`. curl 显示其命令参数列表时一切正常。

但是`curl http://www.google.com`或任何其他 url 需要更多时间和结果

**“卷曲：（52）来自服务器的空回复”**。问题是什么？

更新：我在代理服务器后面。有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:55:46.697

如果您的代理服务器是上网的唯一途径，那么是的，这就是问题所在。Curl 不太关心您在哪个操作系统下运行，因此不会获取特定于操作系统的代理设置（即：Internet Explorer 选项），因此它会尝试进行直接连接。尝试添加`--proxy`选项（`curl --help`将给出格式）。

# java - 在不使用 if else 的情况下计算 Range 的有效方法

> ID：11647105
> 
> 赞同：1
> 
> 时间：2012-07-25T09:51:43.797
> 
> 标签：java, integer, range, if-statement

现金范围------------>税

5,000 - 30,000--------> 700

30,001- 60,000-------- > 1,000

60,001 - 125,000 --------> 1,600

125,001 - 250,000 ---------> 3,000

250,001 - 500,000 -------- > 5,000

500,001 - 1,000,000---------> 9,000

我怎样才能以有效的方式实现这一点？如果我不想为此使用 IF/Else 怎么办。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T09:53:40.990

这是一个很好的`NavigableMap`实现案例。你可以使用它的`ceilKey`方法直接得到你需要的东西。您的键将是范围的上限，值将是税额。

# batch-file - 用于自动挂载和格式化磁盘的 Diskpart 批处理文件

> ID：11647107
> 
> 赞同：0
> 
> 时间：2012-07-25T09:51:44.207
> 
> 标签：batch-file

我的项目中有一个需求，即一个云门户，我们可以在 Windows 虚拟机中动态附加一个额外的磁盘。为了自动安装，我编写了一个批处理文件。该文件可以安装和格式化磁盘。问题是它工作正常，但在 windows server 2008 中虽然在自动确认它格式化磁盘之后。尽管我的挂载和格式化命令有效并且磁盘被附加并转换为 NTFS。但是那个对话框很烦人......请帮助我的批处理文件是这样的

```
@echo off 
rem # the following batch file is used to create dynamic disk , mount it and format it
echo>tempdiskpart.txt List disk
diskpart /s tempdiskpart.txt > tempdiskfilelist.txt
for /f "tokens=3" %%f in ('find /c /i "Disk" "tempdiskfilelist.txt"') do set isComplete=%%f
set /a total = %isComplete%-3

rem # code to find driver letter 
set /a diskNum =1
:loop
set w=s

if exist e:\nul echo. Disk in use

rem for %%p in (d e f g h i j k l m n o p q r s t u v w x y z) do if exist %%p:\nul echo. %%p Disk in use
for %%p in (z y x w v u t s r q p o n m l k j i h g f e d) do if exist %%p:\nul echo. %%p Disk in use
for %%p in (z y x w v u t s r q p o n m l k j i h g f e d) do if not exist %%p:\nul echo. %%p Disk is available
for %%p in (z y x w v u t s r q p o n m l k j i h g f e d) do if not exist %%p:\nul set driveltr=%%p

 echo > tempdiskpart%total%.txt Select Disk %total%
 echo >> tempdiskpart%total%.txt convert dynamic
 echo >> tempdiskpart%total%.txt create volume simple Disk %total%
 echo >> tempdiskpart%total%.txt assign letter=%driveltr%
 diskpart /s tempdiskpart%total%.txt
 del tempdiskpart%total%.txt
 echo >tempdiskvolume%total%.bat 
 echo >>tempdiskvolume%total%.bat format %driveltr%: /v:Newdisk_%diskNum% /FS:ntfs /q
 echo Y |call tempdiskvolume%total%.bat 
 del tempdiskvolume%total%.bat

  set /a diskNum +=1
  set /a total -=1

  if %total% GTR 0 goto loop

   del tempdiskfilelist.txt
   del tempdiskpart.txt 
```

我希望这个文件可以帮助某人自动化这个过程。请帮我完成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:08:36.787

您只需要更改此行：

```
echo >>tempdiskvolume%total%.bat format %driveltr%: /v:Newdisk_%diskNum% /FS:ntfs /q 
```

进入这个：

```
echo >>tempdiskvolume%total%.bat echo y ^| format %driveltr%: /v:Newdisk_%diskNum% /FS:ntfs /q 
```

这就像`echo Y |call tempdiskvolume%total%.bat`行，只是因为我们要生成一个管道字符，我们只需要使用该`^`字符来转义它。

# javascript - Jquery 显示图像一段时间

> ID：11647111
> 
> 赞同：0
> 
> 时间：2012-07-25T09:52:16.170
> 
> 标签：javascript, jquery, jquery-ui

在更改选择选项时，我正在显示图像并且在 ajax 调用成功时隐藏该图像..但这发生得非常快..我想显示图像一段时间，比如 2 秒。怎么做

我的代码

```
 var div_id = $(this).closest('tr').find('.display_image').attr("id");
 $("#"+div_id).empty().html('<img src="${resource(dir:'images',file:'spinner.gif')}"/>');
 $("#"+div_id).show();

  $.ajax({
                type: "POST",
                url:"${createLink(controller:'s2PublicLifecycle',action:'UpdateField')}",
                data: dataString,
                success: function() {
                  $("#"+div_id).hide();
                }
              }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T09:55:23.473

使用 jquery 延迟：

```
$("#"+div_id).delay(2000).hide(1); 
```

这是一个[jsfiddle](http://jsfiddle.net/XPNaD/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T09:54:16.373

尝试`setTimeout(function() { $("#"+div_id).hide(); }, 2000 );`

# python - SOLR - 一次添加一个条目

> ID：11647112
> 
> 赞同：1
> 
> 时间：2012-07-25T09:52:21.057
> 
> 标签：python, search, solr

我正在构建一个系统，其中条目会在一天中偶尔添加到 SQL 数据库中。我正在尝试创建一个系统，每次都将这些条目导入 SOLR。

我似乎找不到任何关于从 SQL 向 SOLR 添加单个记录的信息。谁能指出我正确的方向或给我更多信息让我继续前进？

任何帮助将非常感激，

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:19:13.883

如上所述，数据导入处理程序可以满足您的需求，但是一个重要的限制是它不会对请求进行排队。这样做的结果是，如果 DIH 忙于索引某些内容并且您触发了另一个 DIH 请求，则第二个请求将被忽略并且不会被索引。

正如 Ansari 所建议的，更直接的方法是简单地将数据 HTTP POST 直接发送到 Solr 服务器。他指出了绝对可以正常工作的 XML 方法。但是，我发现使用[http://wiki.apache.org/solr/UpdateJSON/](http://wiki.apache.org/solr/UpdateJSON/)方法更简单，因为它允许我在收集数据时使用本机数据结构。

在使用 UpdateJSON 或 UpdateXMLMessage 方法时，我强烈建议使用“commitWithin”参数而不是“commit”。提交可能是（相对）漫长的过程，需要 Solr 锁定文件，并且 commitWithin 会将多个更新请求批处理到单个提交中，而“提交”需要为每个 POST 锁定文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:53:10.183

您看过[DataImportHandler](http://wiki.apache.org/solr/DataImportHandler#Usage_with_RDBMS)的 wiki 页面吗？我相信它会做你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T21:16:01.127

如果您有权访问将条目添加到 SQL 数据库的代码，只需修改它以另外创建一个 XML 字符串并将其发布到您的 Solr 服务器 URL。这样可以避免很多复杂性。例如，在 PHP 中，您可能会执行以下操作：

```
$url = "http://localhost:7641/solr/update";
$header = array("Content-type:text/xml; charset=utf-8");
$postString = "<add><doc><field name=\"id\">24</field></doc?</add>";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POST, 1); 
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
curl_setopt($ch, CURLINFO_HEADER_OUT, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postString);
$data = curl_exec($ch);
curl_setopt($ch, CURLOPT_POSTFIELDS, "<commit />");
$data = curl_exec($ch); 
```

使用 Python 的 curl 库——它会比上面的代码更简单。

如果您无权访问该代码，请将 last_modified 时间戳字段添加到您的数据库并使用 DataImportHandler 的[增量导入功能](http://wiki.apache.org/solr/DataImportHandler#Using_delta-import_command)来查询新项目并将它们导入 Solr。您必须定期调用 DataImportHandler 请求处理程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T23:22:18.673

除了 DIH，您可以在您的数据库中设置一个触发器来触发 Solr 的 REST 服务，该服务将为所有插入/更新/删除的文档更新更改的文档。

此外，您可以在您的应用程序中设置一个过滤器（javax.servlet 规范）来拦截服务器请求并将它们推送到 Solr，甚至在它们到达数据库之前（它甚至可以在同一个事务中完成，但实际上很少需要这样做，最终的一致性通常对搜索引擎来说很好）。

# javascript - 检测文件输入对话框是否打开

> ID：11647113
> 
> 赞同：9
> 
> 时间：2012-07-25T09:52:22.020
> 
> 标签：javascript, jquery, html

如何检测文件输入对话框当前是否打开？

我正在尝试将一些文件上传功能集成到我正在构建的 Web 应用程序的弹出（引导样式）模型中。作为模型行为的一部分，如果按下退出键，模型将关闭。

这一切都很好，直到我从打开的模型打开一个文件输入对话框，如果我点击转义关闭输入对话框，它也会关闭模型。

我正在尝试实现的超级简化版本 [http://jsfiddle.net/ckevy/1/](http://jsfiddle.net/ckevy/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T16:37:51.363

尝试像这样解决它：

当用户点击文件选择输入时，给它焦点：`$(el).focus()`.

然后，每当用户点击 ESC 时，查看 $(':focus') 元素是否是文件选择输入。在这种情况下， blur() 输入并且不关闭模式。最坏的情况——用户想要关闭模式，按下 ESC 并且没有任何反应 [1]。认为“wtf”，再次按 ESC，模态关闭。只需确保文件选择输入确实在所有可能的情况下都得到关注——通过输入选项卡等。如果您使用第三方上传器并且我所说的不起作用——查看该上传器如何将文件选择包装在自定义链接或按钮，以及在不同情况下实际接收点击事件的内容（例如，当您选项卡时，输入可能会接收事件，当您单击时，它可能是链接）。总的来说，使用我所描述的警告是可以管理的。

这同样适用于扩展的 -s（只需检查按下 ESC 时选择是否没有聚焦）。

`blur()`当您需要文件选择输入时，您将无法检测到所有情况。这不是一个跨浏览器的解决方案。即使是FF也需要调整才能工作。我一直在测试 webkit 并取得了积极的结果，在其他浏览器中它可能无法正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-25T11:03:49.893

就我而言，此代码适用于 jQuery：

```
// esc must close popup
$("body").keyup(function(e) {
    if (27 == e.keyCode) {
        hidepopup();
    }
});

// input in popup
var $file = $("input:file");
// keyup will be catched for input, not for body
$file.bind("click", function(e) {
    $(this).focus();
});
// keyup catching will be changed back to body after selecting file
$file.bind("change", function(e) {
    $(this).blur();
});
// we catched esc keyup, so change esc catching back to the body
$file.keyup(function(e) {
    if (27 == e.keyCode) {
        $(this).blur();
        // i don't know, why it works with return false, because i am not js programmer ), but cancelBubble or e.preventDefault is not working
        return false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T10:13:36.707

我不相信您实际上可以直接控制对话本身。在某些浏览器（例如 FF）中，人们已经能够在一定程度上操纵对话框，但这并不适用于所有浏览器和所有浏览器版本。

最简单的方法是在打开文件窗口之前禁用模型对话框上的快捷键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-06T01:19:21.653

根据尼基塔的回答。如果您在触发代码之前检查输入字段的焦点，它可以解决问题：

```
$('input[type="file"]').on('keydown',function(e){

    //Prevents code from firing if file browser is open
    if($(this).is(':focus')){

        //run code here that should only be applied when the dialog box is closed

    }

}); 
```

# sql-server-2008 - SQL 根据阈值对记录进行分组的最快方法

> ID：11647115
> 
> 赞同：0
> 
> 时间：2012-07-25T09:52:25.187
> 
> 标签：sql-server-2008, tsql

我的记录在一个具有三列的临时表中：

1.  第 1 列：ID（大整数）
2.  Column2：CreationDateTime（日期时间）
3.  Column3：体积（浮点数）

记录根据 CreationDateTime 进行排序。我需要从表中选择卷总和等于 THRESHOLD1 的记录，然后对于 Threshold2 相同。

一种方法是向表中添加一个新列，该表具有先前记录的 Volume 总和。例如 ：

ID - CreationDateTime - 卷 - 总和

1 - 20/07/2012 - 10 - 10

2 - 21/07/2012 - 12 - 22

3 - 22/07/2012 - 7 - 29

然后 Select * from temp where Sum >= Threshold 但是计算总和并不是最快的方法。

我想知道是否有人可以提出更好的方法来执行上述操作。

我正在使用 SQL Server 2008，如果需要，我也可以使用 CLR。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:44:47.967

试试这个解决方案：

您可以通过自我加入表格和分组来找到运行总数

```
with cte as(
select T2.ID, T2.CreationDateTime,SUM(T1.Volume) [SUM]
from test_table T1 join  test_table T2
on T1.id<=T2.id
group by T2.id, T2.CreationDateTime)
select * from cte where [SUM]>= Threshold 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:29:01.390

这是一种使用递归 CTE 的方法，它可能是最快的：

```
select @i=min(ID) from @temp

;with a as 
( 
    select ID, Volume, Volume as RunningTotal 
    from @temp
    where ID=@i 

    union all 
    select b.ID, b.Volume, b.Volume + a.RunningTotal as RunningTotal 
    from @temp b 
        inner join a 
            on b.ID=a.ID+1 

) 
select * from a 
```

与运行总计相关的一些链接：

[http://www.sqlusa.com/bestpractices/runningtotal/](http://www.sqlusa.com/bestpractices/runningtotal/)

[http://www.databasejournal.com/features/mssql/article.php/3112381/SQL-Server-Calculating-Running-Totals-Subtotals-and-Grand-Total-Without-a-Cursor.htm](http://www.databasejournal.com/features/mssql/article.php/3112381/SQL-Server-Calculating-Running-Totals-Subtotals-and-Grand-Total-Without-a-Cursor.htm)

[http://www.mssqltips.com/sqlservertip/1686/calculate-running-totals-using-sql-server-cross-joins/](http://www.mssqltips.com/sqlservertip/1686/calculate-running-totals-using-sql-server-cross-joins/)

[http://social.msdn.microsoft.com/Forums/eu/transactsql/thread/1b4d87cb-ec77-4455-af48-bf7dae50ab87](http://social.msdn.microsoft.com/Forums/eu/transactsql/thread/1b4d87cb-ec77-4455-af48-bf7dae50ab87)

使用函数计算的列：

```
create function dbo.fn_VolumeRunningTotal 
{ 
    @dt datetime 
} 
returns int 
as  
begin 
    declare @total int 
    select @total = sum(volume) 
    from dbo.MyVolumeTable 
    where CreationDateTime <= @dt 

    return @total 
end 
```

计算列公式：

```
dbo.fn_VolumeRunningTotal(CreationDateTime) 
```

选择语句：

```
select * from dbo.MyVolumnTable where RunningTotal <= @Threshold1 
```

# sql - 在 Oracle SQL 结果前添加文本

> ID：11647116
> 
> 赞同：1
> 
> 时间：2012-07-25T09:52:26.673
> 
> 标签：sql, oracle, oracle-sqldeveloper

我有一个查询，我正在检查结果是否为空白（''而不是 NULL），如果不是，那么我想在结果前面加上一些文本。

这是查询...

```
SELECT *, 
CASE my_col 
WHEN '' 
THEN '' 
ELSE 'Blah blah ' + my_col 
END AS my_col2 
FROM table_name 
```

我回来的错误看起来像这样......

`ORA-00905: missing keyword`

我敢肯定，简单的解决方案，但有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:54:35.597

连接字符串 -`||`

在甲骨文世界中`'' is null`= 真

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T10:33:30.943

在 oracle 中，空字符串为空，因此条件`WHEN ''`永远不会为真。你需要检查`NULL`

```
SELECT table_name.*, 
       CASE 
         WHEN my_col IS NULL THEN '' 
         ELSE 'Blah blah ' || my_col 
      END AS my_col2 
FROM table_name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:54:33.973

`+`不会在甲骨文中工作。使用 ||。也尝试列出所有列而不是 *

```
SELECT *,  
CASE my_col  
WHEN ''  
THEN ''  
ELSE 'Blah blah ' || my_col  
END AS my_col2  
FROM table_name 
```

# java - 正则表达式在文本中查找国家？

> ID：11647121
> 
> 赞同：1
> 
> 时间：2012-07-25T09:52:55.967
> 
> 标签：java, regex, country

我有一个文本集合，我想提取列出的所有国家的所有实例。到目前为止，我能够根据以下代码用所有国家/地区填充 Set：

```
 Set<String> countries = new TreeSet<String>();
  Locale[] locales = Locale.getAvailableLocales();
  for (Locale locale : locales) {
        countries.add(locale.getDisplayCountry());
  } 
```

我当然可以为每个国家/地区创建一个正则表达式以在每一行中搜索，但我想知道我是否可以在一个正则表达式中执行此操作，即在给定的文本行中提到了哪个国家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:59:42.873

将所有国家名称连接到一个正则表达式中：

```
String regex = "(";
boolean first = true;

for (String name: countries) {
    regex += (first ? "" : "|") + Pattern.quote(name);
    first = false;
}

regex += ")"; 
```

（您可以使用 编写更高效的代码`StringBuffer`）

您将获得一个形式为: 的正则表达式，`(Country1|Country2|Country3)`如果文本匹配任何国家/地区名称，它将匹配。

此解决方案假定您希望将国家/地区名称完全匹配（直到空格和点）作为您从中获得的名称`getDisplayCountry`。您可以通过添加到正则表达式使其匹配不区分大小写`(?i)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:03:59.413

您可以通过连接由“|”分隔的所有名称来构建单个正则表达式，以表示“其中任何一个都可以”。在您的情况下，您可以构建

```
StringBuilder exp = new StringBuilder();
for (String s : countries) {
  exp.append(exp.length() == 0 ? "(" : "|");
  exp.append(s);
}
Pattern countryPattern = Pattern.compile(exp.append(")").toString()); 
```

而且，给定 countryPattern，您现在可以编写以下代码来遍历所有匹配项

```
Matcher m = countryPattern.matcher(aStringWithCountries);
while (m.find()) {
   System.err.println("Found country " + m.group(1));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-22T10:40:14.533

如果您只是简单匹配（精确字符串匹配），那么实际上有比正则表达式更好的方法。有一种强大的字符串匹配算法，称为[Aho-Corasick 算法](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)。所以你需要做的是创建 Aho-Corasick 树并用国名填充它。然后，您可以在文本中以最佳时间复杂度搜索这些国家。这是python[实现](https://hkn.eecs.berkeley.edu/~dyoo/python/ahocorasick/)，我希望java也有一些。

# java - 匹配表中的字符串以更新数据库

> ID：11647122
> 
> 赞同：0
> 
> 时间：2012-07-25T09:52:58.307
> 
> 标签：java, regex, arrays, string, compare

我有一些 JSON 对象，我从中检索 Twitter 用户的位置。这个位置是一个可能与我需要的相关的文本，例如“伦敦”，但它也可能是一个像“有史以来最棒的地区！”这样的文本。所以，我需要过滤这些文本（位置），使它们对应于英国城市。英国有 69 个城市，所以我可以使用 Java 制作一个数组，并使用正则表达式检查我从位置获得的字符串是否匹配或靠近列出的城市之一。

我的问题是：你认为有没有更有效的方法来做到这一点？我认为一遍又一遍地浏览一个包含 69 个字符串的表（想象一下 120.000 个 JSON 对象）并比较提到的字符串需要很长时间。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:57:33.800

**在您的 JSON 回复中**使用此正则表达式...

 **`[(city_name1)(city_name2)]` **// 这样做直到 69，然后总是使用这个模式来处理你得到的 json 回复，以获取匹配的城市......****

# flash - 函数 AS2 中的动态变量名

> ID：11647128
> 
> 赞同：0
> 
> 时间：2012-07-25T09:53:14.067
> 
> 标签：flash, actionscript-2

我有以下问题：

我有一个接收多个变量的函数：

```
function test( fooValue:String, foobar1:String, foobar2:String, goobar1:String, goobar2:String ) {
//using the values statically
mytext1.text = foobar1;
mytext2.text = foobar2;
mytext3.text = goobar1;
mytext4.text = goobar2;

if ( goobar1 = "problem" ) {
    myProblem.text = this["foo" + fooValue] + this["goo" + fooValue];
}
}
//now here's an example call
test( "bar1","first value ","second value ", "another value", "yet another value"); 
```

鉴于 fooValue 在上述调用中具有“bar1”这一事实，我怎样才能使 myProblem.text 显示“第一个值另一个值”

this[ "foo" + fooValue] 给我 undefined

*   编辑了问题并试图更具体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:51:50.810

简单的。

```
function test( fooValue:String, foobar1:String, foobar2:String, goobar1:String, goobar2:String ) {
//using the values statically
mytext1.text = foobar1;
mytext2.text = foobar2;
mytext3.text = goobar1;
mytext4.text = goobar2;

if ( goobar1 == "problem" ) {
    myProblem.text = this["foo" + fooValue] + this["goo" + fooValue];
}
}
//now here's an example call
test( "bar1","first value ","second value ", "another value", "yet another value") 
```

注意到变化了吗？它是额外`=`的`if(goobar1...`。

`goobar1 = "problem"`设置 goobar1 的值。

`goobar1 == "problem"`返回 goobar1 的值是否为“问题”

菜鸟的错误，有时也是有经验的人犯的:)

**此外**

`this["foo" + fooValue]`等效于`this.foobar1`（这是无效的，因为该`this`对象没有任何名为 的属性`foobar1`）

你这样做：

```
switch(fooValue) {
    case "bar1":
        myProblem.text = foobar1 + goobar1;
        break;
    case "bar2":
        myProblem.text = foobar2 + goobar2;
        break;
} 
```

# ios - UIPickerView 不同的行号 - iOS

> ID：11647131
> 
> 赞同：0
> 
> 时间：2012-07-25T09:53:39.417
> 
> 标签：ios, xcode, uipickerview

我有一个 UIPickerView ，它将根据用户按下的按钮加载两个不同的数据集。一个数组的计数为 10，另一个为 6。是否可以用这两个数据填充同一个选取器视图？当我将 numberOfRow 方法设置为返回 10 时，当我加载计数为 6 的数组时，我最终会出错。有什么办法可以克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:01:07.740

跟踪您正在使用的数组并返回适当的行数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:23:00.760

在 UIpickerview 代表中有某种 if 语句来反映更改

```
if(button1 pressed){
return array
}
else{ return array 2} 
```

对行数和数据源回调执行相同的操作

# php - 浏览忽略 max_matches 的 Sphinx 结果？

> ID：11647132
> 
> 赞同：3
> 
> 时间：2012-07-25T09:53:40.367
> 
> 标签：php, mysql, sphinx

我想使用 Sphinx 浏览大量数据（大约 5000 万行）。显然，将 max_matches 配置设置为 10,000，它最多只能允许我浏览 10,000 行。如果我增加限制，它会大大降低我们的服务器速度，因此目前，在我们的例子中，max_matches 的最佳数量是 10,000。

我正在使用 PHP API 访问 Sphinx，我需要使用它的函数，如 SetFilterRange()、SetFilter()、SetSortMode() 等。

现在，每当我需要从 Sphinx 获取数据时，我都是这样做的：

```
// Some codes here to set filters
$sphinx->SetLimits( 100, 20 ); // Telling sphinx to return page 6
$results = $sphinx->query(''); 
```

这没关系，但是当我尝试浏览超过 10,000 个时，它不会返回任何内容。有没有办法无视限制浏览超过 10,000 个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:55:39.637

这是[Sphinx 的已知行为](http://sphinxsearch.com/docs/1.10/conf-max-matches.html)（CAVEAT EMPTOR 部分），请阅读[此论坛主题](http://sphinxsearch.com/forum/view.html?id=5438)。

一种建议的解决方法可能是在您的配置中将其设置为天文数字的上限，并在使用 SetLimits 时动态降低它。

*从论坛帖子中复制*：

```
$cl->SetLimits(($currentPage-1)*50, 50, max(1000,($currentPage*50)+100)) ); 
```

但是 Sphinx 背后的想法是，您应该在第一页上获得良好的查询结果，因此您不想阅读所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:08:04.350

你使用什么排序顺序？

如果它定义了排序顺序，例如时间戳，甚至文档 ID，则可以重新定义“分页”以用作过滤器。因此不需要使用高偏移量。

正如您所指出的，高报价是邪恶的。实现它们的唯一方法是计算偏移量之前的所有文档，然后丢弃它们。例如，偏移量为 100000，意味着必须计算 100000 行然后丢弃。它几乎否定了能够使用索引。

# asp.net - 打印在 ReportViewer 中不起作用

> ID：11647135
> 
> 赞同：0
> 
> 时间：2012-07-25T09:53:46.280
> 
> 标签：asp.net, .net-4.0, reporting-services, rdlc, report-viewer2010

您好，我正在使用报告服务客户端定义 ( `rdlc`) 在我的`asp.net`Web 应用程序中进行报告。我用 a`reportviwer` 来显示报告。但是在单击报告查看器的打印按钮时，会`following error`发生 ![在此处输入图像描述](../Images/8ac1956558fe257a2613764e4c93e0bb.png)

![在此处输入图像描述](../Images/5936feae1917a1a6b87dd66ad6c8db2b.png) 这是我的 aspx 部分

```
<div>
        <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
        <rsweb:ReportViewer ID="ReportViewer1" runat="server" Visible ="false" Width="100%" Height="100%" ShowPrintButton="true">
        </rsweb:ReportViewer>
    </div> 
```

如果有人知道请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:23:20.153

SSRS 报表查看器的打印按钮是一个 ActiveX 控件。

这仅适用于 IE。如果您使用任何其他浏览器，您将无法加载此控件。众所周知，此 ActiveX 控件也会导致 IE 9 出现问题。

因此，除非您坚持使用 IE7、IE8 的非常旧的环境。不要费心使用报告查看器附带的打印控件。

提供一个按钮以将相同的报告导出为 PDF，并让您的用户从那里打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:25:35.030

在我们看到这个问题的地方，这是因为用户没有权限将 ActiveX 控件安装到 IE 中。

[这里](http://blogs.msdn.com/b/mariae/archive/2010/04/13/error-unable-to-load-client-print-control-when-printing-reports-in-reporting-services-summary-of-all-possible-causes-at-april-2010.aspx)有两个建议的解决方案，其中之一是将 ActiveX 控件手动部署到需要它的每台机器上。

# javascript - 如何选择除第一个 div 之外的所有正文元素

> ID：11647137
> 
> 赞同：3
> 
> 时间：2012-07-25T09:53:59.883
> 
> 标签：javascript, jquery

我有这个 HTML：

```
<body>
    <div id="switcher" class="switcher">
        <h3>Style Switcher</h3>
        <button id="switcher-default">
                Default
        </button>
        <button id="switcher-narrow">
            Narrow Column
        </button>
        <button id="switcher-large">
            Large Print
        </button>
    </div>
    <p>asdfasdfasdfas dsadf</p>
    <p>asd'lfkasdf</p>

    <script src="jquery.js"></script>
    <script src="test.js"></script>
</body> 
```

当我单击 Large print 时，我想为除我的第一个`div`（它具有调用的切换器）之外的所有正文元素添加一个类。`id``button`

我努力了

```
 $(document).ready(function(){
   $("#switcher-large").bind("click", function(){       
    $("body:not(:first-child)").addClass("large");      
    });
}); 
```

和

```
$(document).ready(function(){
   $("#switcher-large").bind("click", function(){       
    $("body:not(div)").addClass("large");       
    });
}); 
```

和

```
$(document).ready(function(){
       $("#switcher-large").bind("click", function(){       
        $("body").not("#switcher").addClass("large");       
        });
    }); 
```

但似乎没有一个工作（该类适用于所有元素）。

我不想找到像只选择`p`元素这样的替代方式。我只是想了解为什么我使用的选择器不起作用...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T09:55:31.990

您需要排除`document.body`自身。喜欢

```
$("body *").not("#switcher").addClass("large"); 
```

这将查询 的所有孩子`body`，不包括`#switcher`。也许更方便：

```
$(document.body).contents().not('#switcher').addClass('large'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:56:58.793

```
$("body").children().not("#switcher").addClass("large"); 
```

# android - http 发帖无反应

> ID：11647140
> 
> 赞同：0
> 
> 时间：2012-07-25T09:54:12.003
> 
> 标签：android, post, httpclient, execute

我使用带有文件的帖子将图像文件上传到网站。我收到错误消息。你能给我一些建议吗？感谢系统：android 4.0.3 `phone:htc x`

`error information`

```
E/dalvikvm(11952): Could not find class 'org.apache.http.entity.mime.content.FileBody', referenced from method tw.tcc.tsvs.www.FileUploadPost.FileUploadPostActivity$1.onClick 
```

代码

```
import java.io.BufferedReader;
import java.io.File;
import java.io.InputStream;
import java.io.InputStreamReader;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.mime.HttpMultipartMode;
import org.apache.http.entity.mime.MultipartEntity;
import org.apache.http.entity.mime.content.FileBody;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

private Button.OnClickListener jclove=new OnClickListener(){
public void onClick(View v) {
try {     
             //file_post
             File file = new File("/sdcard/android.jpg");
             try {
                  HttpClient client = new DefaultHttpClient();  
                  String postURL = "http://latest.tsd2497r1.ext.hipaas.hinet.net/";
                  HttpPost post = new HttpPost(postURL); 
                  FileBody bin = new FileBody(file);
                  MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);  
                  reqEntity.addPart("myFile", bin);
                  post.setEntity(reqEntity);  
                  HttpResponse response = client.execute(post);  
                  HttpEntity resEntity = response.getEntity();  
                  if (resEntity != null) {    
                            Log.i("RESPONSE",EntityUtils.toString(resEntity));
                      }
             } catch (Exception e) {
                 e.printStackTrace();
             }

             //}
        } catch (Exception e) {
            e.printStackTrace();
        }       
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:58:48.053

根据您的代码和错误，我认为您忘记在构建路径中添加[httpmime-4.0.jar](http://www.findjar.com/jar/org/apache/httpcomponents/httpmime/4.0/httpmime-4.0.jar.html?all=true)文件。

**示例代码：**

```
HttpPost httpost = new HttpPost("url for upload file");

MultipartEntity entity = new MultipartEntity();
entity.addPart("myIdentifier", new StringBody("somevalue"));
entity.addPart("myAudioFile", new FileBody(File));

httpost.setEntity(entity);
HttpResponse response;
response = httpclient.execute(httpost); 
```

看看我在这个 SO 问题中的回答。

[在 Android 的一个请求中上传图像和音频](https://stackoverflow.com/questions/7037717/upload-an-image-and-audio-in-one-request-in-android/7038888#7038888)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:01:33.707

```
For uploading you should check with MIME Headers and buffer for file upload.

You can try with code similar to given below :-

 DataOutputStream   dos = new DataOutputStream(conn.getOutputStream());

 String fName = uploadPath.substring(uploadPath
                                    .lastIndexOf("/") + 1);

                            dos.writeBytes(LINE_START + BOUNDRY + LINE_END);
                            dos.writeBytes("Content-Disposition: form-data; name=\"uploaded\";"
                                    + " filename=\"" + fName + "\"" + LINE_END);
                            dos.writeBytes("Content-Type: image/JPEG" + LINE_END);
                            dos.writeBytes(LINE_END);

                            // create a buffer of maximum size
                            bytesAvailable = fileInputStream.available();
                            bufferSize = Math.min(bytesAvailable, maxBufferSize);
                            buffer = new byte[bufferSize];

                            // read file and write it into form...
                            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
                            totalBytes = 0;

                            while (bytesRead > 0) {
                                totalBytes += bytesRead;
                                dos.write(buffer, 0, bufferSize);
                                bytesAvailable = fileInputStream.available();
                                bufferSize = Math.min(bytesAvailable, maxBufferSize);
                                bytesRead = fileInputStream.read(buffer, 0, bufferSize);
                            }

                            // send multipart form data necesssary after file data...
                            dos.writeBytes(LINE_END);
                            dos.writeBytes(LINE_START + BOUNDRY + LINE_START + LINE_END);

                            // close streams
                            fileInputStream.close();
                            dos.flush();
                            dos.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:14:21.357

谢谢大家。我学到更多。下面的链接对我最有用。
[https://groups.google.com/forum/?fromgroups#!topic/android-developers/QQSWZ_sWdgU/discussion](https://groups.google.com/forum/?fromgroups#!topic/android-developers/QQSWZ_sWdgU/discussion)

除了使用 httpmime.jar，第二种方法是将源代码（* .java）复制到 yourproject/src 文件夹中...最终的目录结构应该类似于 yourproject/src/org/apache/http/entity/mime/... 你应该不要混合 jar 库和源文件这些库......Everythihng 对我来说很好，所以小心点。

源代码(*.java) 你可以从[http://hc.apache.org/downloads.cgi](http://hc.apache.org/downloads.cgi)
下载 选择 HttpClient 4.2.1: SOURCE-->4.2.1.zip。

```
File file = new File("/sdcard/android.jpg");
try {
     HttpClient client = new DefaultHttpClient();
     String postURL = "http://192.168.12.90/album/upload.php"; //web site
     HttpPost post = new HttpPost(postURL);  
     FileBody bin = new FileBody(file);    
     MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
     reqEntity.addPart("upf", bin); // first reference name(upf) should be the same as server side
     post.setEntity(reqEntity);  
     HttpResponse response = client.execute(post); 
     HttpEntity resEntity = response.getEntity();  
     } catch (Exception e) {
       e.printStackTrace();
     }
    }

//server side php code
$Destdir="upload";
$tmp_filename=$_FILES['upf']['tmp_name'];//post reference(upf).It must be the same as addPart("upf"
$originalfilename=$_FILES['upf']['name'];//post reference(upf).It must be the same as addPart("upf"
$server_filename= $Destdir. "/" .basename($originalfilename);
move_uploaded_file($tmp_filename,$server_filename); 
```

# joomla - Joomla 中的自定义结果显示

> ID：11647143
> 
> 赞同：0
> 
> 时间：2012-07-25T09:54:17.263
> 
> 标签：joomla

我需要显示我学校的结果，我找不到任何相同的组件，现在我开始使用临时代码来显示结果。我如何将我的临时代码连接到 joomla 模板？

谢谢

# iphone - 通过获取子视图将文本和图像保存在字典中

> ID：11647147
> 
> 赞同：0
> 
> 时间：2012-07-25T09:54:23.923
> 
> 标签：iphone, uiview, uiviewcontroller

我有 scoolViewController 有 UIImageView 和 UITextView.so 我们如何获取 UIImage.it 的 UItextView 文本和图像给出错误...

```
for(UIView *subview2 in [scroolViewController subviews])
{            
    NSLog(@"-----%@",subview2); 
    if([subview2 isKindOfClass:[UIImageView class]])
    {
        [dictImages setValue:subview2.image forKey:@"positionY"];
    }
    if(subview2 isKindOfClass:[UITextView class])
    {
        [dicText setValue:subview3.text forKey:@"text"];
    }
} 
```

或者当我们扭动这个

```
for(UIView *subview2 in [scroolViewController subviews])
{            
     NSLog(@"-----%@",subview2); 
} 
```

然后控制台给出：

```
-----<UITextView: 0xb8791d0; frame = (5 10; 285 340); text = ''; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0xb860a30>; contentOffset: {0, 0}>

-----<UIImageView: 0xb0c9d10; frame = (134 118; 100 100); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0xb0c8600>> 
```

那么我们如何从获取子视图中保存文本和图像字典...????

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:19:49.690

要修复编译器错误，请执行以下操作：

```
[dictImages setValue:((UIImageView*)subview2).image forKey:@"positionY"]; 
```

既然你已经检查过它是正确的类，那么投射它就可以了。

是`dictImages`一个`NSMutableDictionary`？

# c# - Linq 不包含动态查询

> ID：11647148
> 
> 赞同：3
> 
> 时间：2012-07-25T09:54:24.910
> 
> 标签：c#, .net, linq

> **可能重复：**
> [Linq to SQL“不喜欢”运算符](https://stackoverflow.com/questions/3513319/linq-to-sql-not-like-operator)

如何使用不包含编写动态 linq 查询？

我用`.Contains()`而不是喜欢。但是我应该用什么代替`not like`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T09:57:13.957

只需`!`在包含条件之前使用。像

```
 var myProducts = from p in products
                  where !productList.Contains(p.ID)
                  select p; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T09:57:46.947

像这样的东西应该有帮助......

```
YourDataContext dc = new YourDataContext(); 
    var query =     
        from c in dc.Customers     
        where !(from o in dc.Orders     
                select o.CustomerID)     
               .Contains(c.CustomerID)     
        select c; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T09:59:04.800

使用`!`运算符。像这样：

```
private List<int> iList = new List<int>
            {
                1,2,3,4,5,6,7,8,9
            };

    if (!iList.Contains(888))
                {

                } 
```

# symfony - 在 symfony2 中传输数据

> ID：11647151
> 
> 赞同：0
> 
> 时间：2012-07-25T09:54:30.990
> 
> 标签：symfony, twig

我在 Symfony 的控制器中创建了两个函数，如下所示：

首先是`newAction`

```
public function newAction()
{
    return $this->render('AcmeTaskBundle:Default:index.html.twig');
} 
```

然后`subAction`

```
public function subAction()
{
    echo "hello";
} 
```

我想使用一些数据`index.html.twig`进入`subAction`函数。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:06:04.910

您只需要使用

```
$content = $this->renderView('AcmeTaskBundle:Default:index.html.twig') 
```

这将在变量中呈现模板的内容

[http://symfony.com/doc/current/book/controller.html#rendering-templates](http://symfony.com/doc/current/book/controller.html#rendering-templates)

**根据评论**编辑****

 **如果您只需要渲染模板的一部分 - 那么您应该重构您的模板。

**将index.html.twig**中的那部分代码排除到单独的模板文件中，并将其包含在**index.html.twig**中：

```
...
{% include 'AcmeTaskBundle:Default:subpage.html.twig' %}
... 
```

然后在您的**subAction()**调用中：

```
 $content = $this->renderView('AcmeTaskBundle:Default:subpage.html.twig') 
```**

# java - 如何在不调用future.get的情况下查找所有线程是否已完成？

> ID：11647155
> 
> 赞同：1
> 
> 时间：2012-07-25T09:54:46.700
> 
> 标签：java, multithreading, future

我需要知道我所有的线程什么时候完成了他们的工作，但是future.get(); 停止所有其他活动，直到线程完成。那么有没有其他方法可以确定所有线程是否已完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:58:33.470

我会添加一个等待所有期货的任务。这样你的主线程就不会被阻塞等待结果。

一个问题`isDone`是，如果任务被取消，它可能会返回 false。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T09:57:19.550

您也可以使用该`Future.isDone`方法。你可以轮询那些。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T09:57:39.760

你可以调用`future.isDone()`看看future是否已经完成，没有阻塞。

# java - 诺基亚错误代码 217 - jar 清单行尾

> ID：11647160
> 
> 赞同：2
> 
> 时间：2012-07-25T09:55:09.180
> 
> 标签：java, java-me, nokia, midp, j2mepolish

我用 J2ME Polish 开发了一个 J2ME 应用程序。诺基亚现在验证将提交到商店的内容，挑战是在验证我的 JAR 和 JAD 文件期间，我得到 `Error 217 - The JAR manifest does not end with a new line`

我检查了我的 JAR 清单，发现它以新行结尾。有人有任何建议或解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:20:46.527

仔细检查清单的最后一行是否没有不可见的字符，如空格或制表符。

如果清单确实有换行符，则错误消息显然意味着此诺基亚设备中的错误。

不过，您的清单可能有问题，诺基亚仅使用不正确的消息来指示其中存在其他问题。获取这样的消息，请确保您的清单符合 JAR 文件规范（[在线提供](http://docs.oracle.com/javase/1.5.0/docs/guide/jar/jar.html)）的各个部分，特别是：

*   [清单规范](http://docs.oracle.com/javase/1.5.0/docs/guide/jar/jar.html#Manifest%20Specification)
*   [清单和签名文件的注意事项](http://docs.oracle.com/javase/1.5.0/docs/guide/jar/jar.html#Notes%20on%20Manifest%20and%20Signature%20Files)

首先我要检查的是清单行不超过*"72 bytes (not characters), in its UTF8-encoded form"*。

另一件值得尝试的事情是尝试各种指定的行尾样式：`CR LF | LF | CR`. 在您的 IDE / build 中可能有一个设置来管理它，寻找类似“DOS / Unix / Mac 换行符”的东西。规范声明所有这些都可以，但您最好考虑设备中无法识别特定样式换行符的错误的可能性。

还可以考虑在诺基亚论坛上检查/询问这可能是特定设备的已知问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:59:50.537

终于搞定了，我使用java sdk提供的jar工具从jar文件中提取midlet，如下：

```
jar xf myjarfile.jar META-INF/MANIFEST.MF 
```

然后在文本编辑器中编辑文件并更新 jar 文件中的清单

```
jar umf META-INF/MANIFEST.MF myjarfile.jar 
```

谢谢大家的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T06:30:50.957

可选地，您可以使用 winrar 软件打开您的 jar 文件，然后您可以从 META - INI 文件访问清单。从这里您可以使用文本编辑器对其进行编辑，之后您可以保存注意：保存后注意大小将会改变因此，请确保在编辑后检查 jar 的大小，通过右键单击然后查看属性。检查大小，然后通过在文本编辑器中打开 jad 文件将其相应地更改为 jad 文件

就是这样：-0

# jquery - jQuery 写入跨越选择字段选择

> ID：11647168
> 
> 赞同：0
> 
> 时间：2012-07-25T09:55:41.133
> 
> 标签：jquery, html, e-commerce, append

我正在用 simplecartjs 开一家商店，该商店有一些可以购买不同尺寸的产品，但价格会有所增加。所以我尝试了这个，但它没有向跨度写入任何内容。所以我需要它根据选择将价格写入 item_price 跨度，如果用户选择另一个选择，那么价格必须改变。这是我的代码：

```
<?php
include 'nav.php';
?>
<script type="text/javascript">
 $(".item_size").change(function(){
      if ($(this).val() == "25cm") {
            $('.item_price').append("20.00€");
      }
     if ($(this).val() == "50cm") {
            $('.item_price').append("30.00€");
      }
      if ($(this).val() == "100cm") {
            $('.item_price').append("45.00€");
      }
});
</script>
<div class="simpleCart_shelfItem">
    <h2 class="item_name">Quartz-kalvot </h2>
<p>    <select class="item_size">
        <option value="25cm"> 25cm x 30cm </option>
        <option value="50cm"> 50cm x 30xm</option>
        <option value="100cm"> 100cm x 30xm </option>
    </select><br>
    <input type="text" value="1" class="item_Quantity"><br>
    <span class="item_price"></span><br>
<a class="item_add" href="javascript:;"> Add to Cart </a></p>
</div>

<?php
include 'footer.php';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:03:26.220

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:01:17.450

# c++ - 派生类中的复制构造函数

> ID：11647172
> 
> 赞同：1
> 
> 时间：2012-07-25T09:56:00.507
> 
> 标签：c++, copy-constructor

我有一个基类，从它派生的类很少。我没有在基类中编写任何复制构造函数，它使用的是默认构造函数。

所以如果我写这段代码：

```
base* b;
b = new base(*this) 
```

它工作正常，但如果我写这样的东西：

```
base* b;
b = new derive(*this) 
```

它给了我一个错误，因为派生类中没有匹配的函数。

我不能将基类的`this`指针传递给它的派生类复制构造函数来初始化它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:58:10.720

`Derived`复制构造函数`const Derived &`作为它的参数。你不能`const Base &`用作论据。

您正在尝试执行以下操作：

```
Derived *d = new Derived();
Base *b = new Base(*d); //ok, since Derived is subclass of Base

Base *b = new Based();
Derived *d = new Derived(*b); //error, since Base in not subclass of Derived 
```

为了构造你需要自己提供这样的构造函数`Derived`：`Base`

```
Derived(const Base &base) {...} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:01:02.293

使用以基类作为参数的版本重载派生构造函数。那应该行得通。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:01:14.313

不，你不能。可能还有其他子类`base`。如果 class 的复制构造函数`derive`接受 a `const base&`，那么您可以将 . 的另一个子类的实例传递给它`base`。类的复制构造函数`derive`不知道如何处理这样的对象。

# java - 使用 JNDI 加载 .properties 文件

> ID：11647174
> 
> 赞同：4
> 
> 时间：2012-07-25T09:56:06.577
> 
> 标签：java, jndi

我不知道该怎么做。要求是我想使用 JNDI 加载属性文件，然后使用自定义属性解析器和配置解析器来使用其数据。问题是我如何配置 JNDI 来查找这个属性文件。我的配置是：

```
<bean id="MYUrlResource" class="org.springframework.core.io.UrlResource">
    <!-- <constructor-arg value="file:C:\Users\anand_rajneesh\Desktop\SVN Workspace\13MM - Dev\web-app\src\main\resources\application.properties"/> -->
    <constructor-arg>
        <bean class="org.springframework.jndi.JndiObjectFactoryBean">
            <property name="jndiName" value="java:comp/env/url/application.properties" />
            <property name="resourceRef" value="false" />
            <property name="lookupOnStartup" value="true" />
        </bean>
    </constructor-arg>
</bean> 
```

和我的 web.xml ：

```
<resource-ref>
        <description>Property File Url</description>
        <res-ref-name>url/application.properties</res-ref-name>
        <res-type>java.net.url</res-type>
        <res-auth>Container</res-auth>
    </resource-ref> 
```

我不明白我该怎么办？使用此当前配置，我得到以下异常，显然 jndi 名称是错误的

```
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.jndi.JndiObjectFactoryBean#149a794' defined in ServletContext resource [/WEB-INF/classes/application-context.xml]: Invocation of init method failed; nested exception is javax.naming.NameNotFoundException: Name application.properties is not bound in this Context
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:270)
    ... 48 more
Caused by: javax.naming.NameNotFoundException: Name application.properties is not bound in this Context
    at org.apache.naming.NamingContext.lookup(NamingContext.java:774)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:144)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:785)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:144)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:785)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:144)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:785)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:157)
    at org.apache.naming.SelectorContext.lookup(SelectorContext.java:156)
    at javax.naming.InitialContext.lookup(Unknown Source)
    at org.springframework.jndi.JndiTemplate$1.doInContext(JndiTemplate.java:154)
    at org.springframework.jndi.JndiTemplate.execute(JndiTemplate.java:87)
    at org.springframework.jndi.JndiTemplate.lookup(JndiTemplate.java:152)
    at org.springframework.jndi.JndiTemplate.lookup(JndiTemplate.java:178)
    at org.springframework.jndi.JndiLocatorSupport.lookup(JndiLocatorSupport.java:95)
    at org.springframework.jndi.JndiObjectLocator.lookup(JndiObjectLocator.java:105)
    at org.springframework.jndi.JndiObjectFactoryBean.lookupWithFallback(JndiObjectFactoryBean.java:201)
    at org.springframework.jndi.JndiObjectFactoryBean.afterPropertiesSet(JndiObjectFactoryBean.java:187)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
    ... 51 more 
```

我正在使用 Tomcat 7.0 Eclipse Indigo 及其宁静的网络服务 .. 如果这有任何关系

# javascript - 如何通过Java脚本动态改变css

> ID：11647178
> 
> 赞同：1
> 
> 时间：2012-07-25T09:56:23.770
> 
> 标签：javascript, css

我有全局 css 文件包含以下代码

```
#menu_left
 {
  color: #004080;
  width: 225px;
  margin: 0px;
  border-style: solid solid none solid;
  border-color: #ffffff;
  border-size: 1px;
  border-width: 1px;
 }

#menu_left li a
{
 color: #222222;
 height: 26px;
 voice-family: inherit;
 text-decoration: none;
 border-bottom: solid 1px #ffffff;
 background-color:#D3D7D9;
 font-size:12px;
 font-family:tahoma;
}

#menu_left li a:link, #menu_left li a:visited
{
 color: #222222;
 display: block;
 padding: 8px 0 0 10px;
 border-bottom: solid 1px #ffffff;
 background-color:#D3D7D9;
 font-size:12px;
 font-family:tahoma;
}
#menu_left li a:hover
{
 color: #222222;
 padding: 8px 0 0 10px;
 border-bottom: solid 1px #ffffff;
 font-weight:normal;
 background-color:#B9C4CA;
 font-size:12px;
 font-family:tahoma;
} 
```

到目前为止，我将#menuleft id 分配给了我的 div，其中包含 li's(list tag) 并且每个 li 标签都有一个锚标签。我所有的 li 都将作为列表出现在左侧面板中。一旦我选择了任何 li，它应该显示一些 css 样式，而其他应该具有上述 css。

我编写了一个 js 函数来切换这些 css 更改的选择和取消选择。

但是如果执行以下操作，则悬停 css 不适用...

```
function setSelected(selID)//selId is ID for anchor tag in selected li item
{
 //contains all list of anchor tag id's
  var anchorID=['usersAnchor','securityAnchor','passPolAnchor','activeSessAnchor'];
  for(i=0;i<anchorID.length;i++)
   {
     if(selID!=anchorID[i])
     {
        var div = document.getElementById(anchorID[i]);
        div.style.fontWeight = 'bold';
        div.setAttribute('style','color: #222222;height: 26px;voice-family: inherit;text-decoration: none;border-bottom: solid 1px #ffffff;background-color:#D3D7D9;font-size:12px;font-family:tahoma;');
        }
     else

     {
         var div = document.getElementById(selID);
         div.style.fontWeight = 'bold';
         div.setAttribute('style','color: #FFFFFF; display: block;  padding: 8px 0 0 10px; border-bottom: solid 1px #ffffff; background-color:#718296;  font-size:12px;  font-family:tahoma;');
        }
   } 
```

任何人都可以帮助我如何获得所有css属性，使其适用于选择悬停和正常同时切换选择？

问候， 卡梅什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:42:53.920

在您`setSelected`的设置中，您正在覆盖粗体样式。也就是说，您可以更轻松地处理 css。

与其在节点级别设置 css，为什么不使用 css 的发明目的？

您可以设置 aa`selected`类，然后在您的代码中切换`className`

```
.selected {
   color: #222222;
   height: 26px;
   voice-family: inherit;
   text-decoration: none;
   border-bottom: solid 1px #ffffff;
   background-color:#D3D7D9;
   font-size:12px;
   font-family:tahoma;
} 
```

一个简单的 JS 函数负责类交换：

```
function setSelected(selID) {
   var anchorIDs = {
       'usersAnchor': true
       'securityAnchor': true
       'passPolAnchor': true
       'activeSessAnchor': true
   };
   var div = document.getElementById(selID),
   className = div.className;

   if (anchorIDs[selID] === true) {
       div.className = className.replace(/\s+(selected)/, " selected");
   } else {
       div.className = className.replace(/\s+(selected)/, "");
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:07:41.157

### 使用 jQuery 让您的工作更简单！

而不是使用这个：

```
div.setAttribute('style','color: #FFFFFF; display: block;  padding: 8px 0 0 10px; border-bottom: solid 1px #ffffff; background-color:#718296;  font-size:12px;  font-family:tahoma;'); 
```

当你使用 jQuery 时，它会很容易并且跨浏览器兼容。你可以用这种方式做同样的事情：

```
$('div').attr('style','color: #FFFFFF; display: block;  padding: 8px 0 0 10px; border-bottom: solid 1px #ffffff; background-color:#718296;  font-size:12px;  font-family:tahoma;'); 
```

或者

```
$('div').css({
    'color': '#FFFFFF', 
    'display': 'block', 
    'padding': '8px 0 0 10px', 
    'border-bottom': 'solid 1px #ffffff', 
    'background-color': '#718296', 
    'font-size': '12px', 
    'font-family': 'tahoma'
}); 
```

[`.css`](http://api.jquery.com/css/)可以使用 jQuery的属性！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:45:23.413

请看[这个小提琴](http://jsfiddle.net/WMEdN/)。这是你想要的效果吗？它使用 jQuery 来简化 Javascript，但通过切换 CSS 类而不是使用 jQuery 的`.css()`方法来切换样式。这有两个原因……第一个是您应该按目的分隔代码。*HTML 应该是内容，CSS 应该是样式，而 Javascript 应该仅*用于逻辑（如果可能，您不应该在 Javascript 中放置内容或样式）。第二个原因是使用 Javascript 切换类比切换样式要容易得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T10:01:03.823

我推荐使用[`.css`jQuery API。](http://api.jquery.com/css/)

# jquery-ui - 滑块jquery ui中的事件最大值

> ID：11647180
> 
> 赞同：1
> 
> 时间：2012-07-25T09:56:29.697
> 
> 标签：jquery-ui, events

jquery ui中slider的事件是create、start、slide、change和stop

当用户达到最大值时，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:02:14.057

您可以处理[幻灯片](http://jqueryui.com/demos/slider/#event-slide)事件并检查当前滑块值是否等于其`max`选项：

```
$("#yourSlider").slider({
    slide: function(event, ui) {
        if (ui.value == $(this).data("ui-slider").options.max) {
            // Slider has reached maximum value.
        }
    }
}); 
```

# mysql - 计算 MySQL 中每个用户的平均消息质量

> ID：11647182
> 
> 赞同：2
> 
> 时间：2012-07-25T09:56:34.113
> 
> 标签：mysql

考虑下表：

```
users                    messages
-------------------      ----------------------
user_id avg_quality      msg_id user_id quality
-------------------      ----------------------
1                        1      1       1
2                        2      1       0
3                        3      1       0
                         4      1       1
                         5      1       1
                         6      2       0
                         7      2       0
                         8      3       1 
```

`messages.quality`要么`0`要么`1`。我需要计算每个用户的平均消息质量并`users.avg_quality`相应地更新。因此，所需的输出将被修改为`users`如下表：

```
users
-------------------
user_id avg_quality  <-- DECIMAL (8,2)
-------------------
1       0.60         <-- (3x1 + 2x0) / 5
2       0.00         <-- (2x0) / 2
3       1.00         <-- (1x1) / 1 
```

我已经开始这样的查询，我知道语法不正确但没有更好的主意。你？

```
UPDATE messages m, users u
SET avg_quality = (SELECT COUNT(m.msg_id) / SUM(m.quality))
WHERE m.user_id = u.user_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:58:49.930

查看平均函数：

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_avg](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_avg)

您的选择应该是这样的：

```
select user_id, AVG(quality) from messages group by user_id 
```

如果你从一个空的 users 表开始，你可以运行一个像这样的查询来更新它：

```
insert into users (user_id, avg_quality)
select m.user_id, coalesce(AVG(m.quality),0) from messages m group by m.user_id 
```

如果您需要持续的结果，Luc 的建议将为您工作：

```
update users u left join (
    select m.user_id, AVG(m.quality) as average from messages m group by m.user_id  
) as average_result_t on u.user_id = average_result_t.user_id
set u.average = coalesce(average_result_t.average,0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:00:12.037

这应该有效：

```
UPDATE users u
       INNER JOIN (SELECT a.user_id, AVG(quality) avg_quality 
                   FROM messages a
                        INNER JOIN users b
                            ON a.user_id = b.user_id
                   GROUP BY a.user_id
                  ) tmp
                  ON u.user_id = tmp.user_id
SET u.avg_quality = tmp.avg_quality; 
```

# objective-c - 目标 C：使用 .CAF 的 OpenAL

> ID：11647184
> 
> 赞同：0
> 
> 时间：2012-07-25T09:56:41.617
> 
> 标签：objective-c, ios, openal

再会！我对 openAL 路径中的 .caf 文件有疑问...是否可以在 openAL 中使用 .caf 文件？因为当我在文件路径中使用当前的 .wav 文件时它实际运行.. 但是当我使用 .caf .. 它没有错误但是当我运行它时，它说：

```
2012-07-25 17:46:18.314 openALplaybackTRY[20432:10a03] Error setting audio session category! -50
AudioStreamBasicDescription:  2 ch,  44100 Hz, 'lpcm' (0x00000C2C) 8.24-bit little-endian signed integer, deinterleaved
2012-07-25 17:46:18.638 openALplaybackTRY[20432:10a03] Error loading /System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn:  dlopen(/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2012-07-25 17:46:18.668 openALplaybackTRY[20432:10a03] Error loading /System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn:  dlopen(/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2012-07-25 17:46:18.741 openALplaybackTRY[20432:10a03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2012-07-25 17:46:18.753 openALplaybackTRY[20432:10a03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2012-07-25 17:46:18.834 openALplaybackTRY[20432:10a03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2012-07-25 17:46:18.846 openALplaybackTRY[20432:10a03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2012-07-25 17:46:18.869 openALplaybackTRY[20432:10a03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2012-07-25 17:46:18.879 openALplaybackTRY[20432:10a03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2012-07-25 17:46:20.053 openALplaybackTRY[20432:10a03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSURL initFileURLWithPath:]: nil string parameter'
*** First throw call stack:
(0x148f022 0x1aaccd6 0x1437a48 0x14379b9 0xe0a53b 0xe0a4c5 0x6dc4 0x7243 0x68b5 0x6ea135 0x7e9c6e 0x7e98f1 0x7e9383 0x58dfd0 0x6ea135 0x7e9c6e 0x7e9383 0x6e9c76 0x7e9c6e 0x7e967b 0x7e9383 0x6e9105 0x8f2eef 0x8f303e 0x4c7d7a 0x4c7ff8 0x4c717f 0x4d6183 0x4d6c38 0x4ca634 0x3ad0ef5 0x1463195 0x13c7ff2 0x13c68da 0x13c5d84 0x13c5c9b 0x4c6c65 0x4c8626 0x24fd 0x2465)
terminate called throwing an exception(lldb) 
```

> 线程1：信号SIGABRT

这是我的代码：aolPlayback.m @initBuffer（实际上来自苹果）

```
// get some audio data from a wave file
    CFURLRef fileURL = (__bridge CFURLRef)[NSURL fileURLWithPath:[bundle pathForResource:@"Alice01" ofType:@"caf"]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:10:44.447

CAF 是一种容器格式，而不是音频格式。caf 文件中包含的音频数据必须是小端签名的 16 位未压缩 PCM 数据才能直接加载到 OpenAL 中。

如果不是该格式，则需要在加载后进行转换。这是一个执行此操作的类（对于 iOS，但对于 Mac 修改应该足够简单）：[https ://github.com/kstenerud/ObjectAL-for-iPhone/blob/master/ObjectAL/ObjectAL/Support/OALAudioFile.m](https://github.com/kstenerud/ObjectAL-for-iPhone/blob/master/ObjectAL/ObjectAL/Support/OALAudioFile.m)

加载然后转换的好处是您可以将音频数据压缩在磁盘上，从而降低应用程序的分发大小。我对音频数据使用 AAC 压缩。

# qtkit - QTMovie initWithMovie:timeRange:error: 在 10.7 下失败，但在 10.6 下失败

> ID：11647185
> 
> 赞同：0
> 
> 时间：2012-07-25T09:56:51.660
> 
> 标签：qtkit

我有一个从文件创建的 QTMovie 对象。我检查它是否是一部有效的电影，可以很好地播放或写入文件。

然后此行失败并出现错误：

```
Error code: -50 domain: NSOSStatusErrorDomain description: The operation couldn’t be completed. (OSStatus error -50.) 
```

（读取权限？）当电影长于约 15 秒时会发生这种情况（这会有所不同）。时间范围被验证是正确的，无论如何都不应该导致这个错误。

```
[[QTMovie alloc] initWithMovie:movie timeRange:range error:&error]; 
```

该行生成 32 位进程 QTKitServer 几秒钟，直到它失败。

该错误仅发生在 Lion 而不是 Snow Leopard。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:00:06.547

解决了，我使用QTMovie的编辑功能，要么使用旧电影的deleteSegment:，要么创建一个新电影并使用insertSegmentOfMovie:movie将片段从旧电影插入到新电影。请记住将可编辑属性设置为yes :)

```
[movie setAttribute:[NSNumber numberWithBool:YES]
                forKey:QTMovieEditableAttribute]; 
```

# c++ - 在类中定义一个 const 静态对象变量

> ID：11647186
> 
> 赞同：4
> 
> 时间：2012-07-25T09:56:53.783
> 
> 标签：c++, static-members

我需要在类定义中创建一个静态对象。在 Java 中是可能的，但在 C++ 中我得到一个错误：

```
../PlaceID.h:9:43: error: invalid use of incomplete type ‘class
PlaceID’ ../PlaceID.h:3:7: error: forward declaration of ‘class
PlaceID’ ../PlaceID.h:9:43: error: invalid in-class initialization of static data 
```

我的课看起来像这样：

```
#include <string>

class PlaceID {

public:

    inline PlaceID(const std::string placeName):mPlaceName(placeName) {}

    const static PlaceID OUTSIDE = PlaceID("");

private:
    std::string mPlaceName;
}; 
```

是否可以在这个类中创建一个类的对象？它必须具备哪些先决条件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-25T10:00:57.597

您无法定义成员变量，因为该类尚未完全定义。你必须这样做：

```
class PlaceID {

public:

    inline PlaceID(const std::string placeName):mPlaceName(placeName) {}

    const static PlaceID OUTSIDE;

private:
    std::string mPlaceName;
};

const PlaceID PlaceID::OUTSIDE = PlaceID(""); 
```

# jquery - Sortable("cancel") 在接收回调中被忽略

> ID：11647189
> 
> 赞同：1
> 
> 时间：2012-07-25T09:56:59.977
> 
> 标签：jquery, jquery-ui, draggable, jquery-ui-sortable, jquery-ui-draggable

```
$('.batch_listing').sortable({
    forcePlaceholderSize: true,
    forceHelperSize: true,
    placeholder: 'photo_ghost',
    helper: 'clone',
    receive: function(event, ui) 
    { 
        if(!is_in_batch(ui.item.children("a").children("img").attr("data-photo-id"))) 
        { 
            add_to_batch_dispatch(ui.item.children("a").children("img").attr("data-photo-id"));
        } else { 
            //Remove from batch
            $(this).sortable("cancel");
            alert("shouldn't be added");
        }
    },
    sort: function(event, ui) {
        if(placing == false) 
        {
            $(".destory_drop").fadeIn();
        }
    },
    stop: function(event, ui) { 
        if(removing == false)
        {
            $(".destory_drop").fadeOut();
        }
    }
}).disableSelection(); 
```

我有一系列连接到这个 sortable 的可拖动对象。

```
$("#photo_browser li").draggable({
    snap: false,
    revert: 'invalid',
    helper: 'clone',
    appendTo: "body",
    cursor: 'move',
    opacity: 0.5,
    connectToSortable: "ul.batch_listing",
    start: function(e, ui){
        placing = true;
    }, 
    stop: function(e, ui){
        placing = false;
    }
}); 
```

代码本身工作正常，is_in_batch 和 add_to_batch_dispatch，它只记录项目的 ID 并检查它是否已存在于可排序中。但是，每当我调用`$(this).sortable("cancel")`时，可拖动对象仍会放入可排序对象中（并且会调用代码中的测试警报）。

最初，这在它停止的某个地方之前确实有效。我一直在花费数小时试图找出原因，因此非常感谢一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:07:57.217

代替

`$(this).sortable("cancel");`

尝试

```
return false; 
```

# java - 使用 ExecutorService 时如何避免“无法创建本机线程”？

> ID：11647190
> 
> 赞同：0
> 
> 时间：2012-07-25T09:57:00.850
> 
> 标签：java

我是 ExecutorService 的新手。现在我的场景是“有数百万个数据 365*24*7 进来”我有一些处理需要对使用线程进来的数据进行处理。

```
ExecutorService es = Executors.newSingleThread();
es.execute(new ComputeDTask(data)); 
```

我正在向 ComputeDTask 发送数据以执行某些操作。

`new ComputeDTask`每次数据进入时创建一个效率如何？也就是说，如果数据被接收一百万次，那么将创建一百万个 ComputeDTask 对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:04:13.110

创建线程的开销约为 100 微秒。即，如果您完成的工作少于 100 微秒，那么您的开销将比已完成的工作多，并且您的程序可能比单线程更慢。

为现有的 Executor 服务创建任务的开销约为 2 微秒。即，如果任务花费的时间少于 2 微秒，您的开销可能比实际完成的工作要多。

如果您有 CPU 密集型进程，则需要与核心数量大致相同的线程来保持所有核心忙碌，同时最大限度地减少开销。

例如，如果您有 8 个内核，我建议您将完成的工作结合起来，这样您就有 8 个线程，每个线程*总共*有一个任务。您可以有比这更多的任务，但您可能会发现处理时间更长。

当然，您应该在完成后关闭 ExecutorService。您没有在所有示例中看到这样做的原因是，创建**一个**用于应用程序生命周期的 ExecutorService 可能是个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:03:52.477

显然，您正在为每个任务创建一个全新`ExecutorService`的任务，并且永远不会关闭它们。这当然会导致您正在观察的线程泄漏。正确的使用方法`ExecutorService`是创建**一个**为您管理线程池的实例。执行器在管理线程的方式上非常灵活和强大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:13:05.127

On incoming data even create the task using `new ComputeDTask(data)` and then pass this to ThreadPool where you have let say 100 threads and then they can execute task with higher throughput.

```
ExecutorService es = Executors.newFixedThreadPool(100);

onGetData(){

     es.execute(new ComputeDTask(data));

 } 
```

# jakarta-ee - 带有 url-pattern /* 的过滤器未映射到所有 jsp

> ID：11647193
> 
> 赞同：1
> 
> 时间：2012-07-25T09:57:08.310
> 
> 标签：jakarta-ee, servlets, struts2, servlet-filters

我开始学习struts 2。我有3页，FirstLevel.jsp，SecondLevel.jsp，BadGuess.jsp。我想在三个页面中应用过滤器。

**LevelFilter.java**

```
package com.tutorialspoint.struts2;

import java.io.IOException;
import javax.servlet.*;

public class LevelFilter implements Filter{

    @Override
    public void destroy() {
        System.out.println("desroy");
    }

    @Override
    public void doFilter(ServletRequest req, ServletResponse res,
            FilterChain chain) throws IOException, ServletException {
        // TODO Auto-generated method stub
        System.out.println("level filter");
        chain.doFilter(req, res);
    }

    @Override
    public void init(FilterConfig arg0) throws ServletException {
        // TODO Auto-generated method stub
        System.out.println("init here");
    }

} 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns="http://java.sun.com/xml/ns/javaee" 
   xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
   xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
   http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
   id="WebApp_ID" version="3.0">

   <display-name>Struts 2</display-name>
   <welcome-file-list>
      <welcome-file>FirstLevel.jsp</welcome-file>
   </welcome-file-list>

   <filter>
      <filter-name>struts2</filter-name>
      <filter-class>
         org.apache.struts2.dispatcher.FilterDispatcher
      </filter-class>
   </filter>
   <filter>
      <filter-name>Level Filter</filter-name>     
        <filter-class>
            com.tutorialspoint.struts2.LevelFilter
        </filter-class>
   </filter>
   <filter>
      <filter-name>Authentication Filter</filter-name>     
        <filter-class>
            com.tutorialspoint.struts2.AuthenticationFilter
        </filter-class>
   </filter>

   <filter-mapping>
      <filter-name>struts2</filter-name>
      <url-pattern>/*</url-pattern>
   </filter-mapping>
   <filter-mapping>
      <filter-name>Level Filter</filter-name>     
      <url-pattern>/*</url-pattern> 
   </filter-mapping>
    <filter-mapping>
      <filter-name>Authentication Filter</filter-name>     
      <url-pattern>/*</url-pattern> 
   </filter-mapping>

</web-app> 
```

这三个jsp只是由输入的东西组成。当我运行 FirstLevel.jsp 时，控制台中的消息（“LevelFilter”）会堆叠，但是当我提交表单时（如果正确，表单将提交给 Secondlevel.jsp，否则提交给 BadGuess.jsp）控制台不会产生信息。它还应该在控制台中生成一条消息，因为我将过滤器映射到所有 jsps (/*)。非常感谢您的回复。

编辑：

我认为过滤器不适用于struts.xml映射的jsp？因为当我尝试直接运行`BadGuess.jsp`控制台中的消息时，它会应用含义`doFilter`。

**struts.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
   "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
   "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
<constant name="struts.devMode" value="true" />
   <package name="magicwords" extends="struts-default">
      <action name="firstMagicWord" 
            class="com.tutorialspoint.struts2.LevelAction" 
            method="execute">
            <result name="success">/SecondLevel.jsp</result>
            <result name="error">/BadGuess.jsp</result>
      </action>
   </package>
</struts> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:08:51.667

要在通过转发（默认结果类型）到达的 JSP 上运行过滤器，您需要确保过滤器正在为转发的请求运行：

```
<filter-mapping>
  <filter-name>theFilter</filter-name>
  <url-pattern>/the/pattern</url-pattern>
  <dispatcher>REQUEST</dispatcher> 
  <dispatcher>FORWARD</dispatcher>
</filter-mapping> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:53:34.020

尝试更改过滤器的顺序……它们按照映射的顺序被调用。

尝试

```
 <filter-mapping>
      <filter-name>Authentication Filter</filter-name>     
      <url-pattern>/*</url-pattern> 
   </filter-mapping>
   <filter-mapping>
      <filter-name>Level Filter</filter-name>     
      <url-pattern>/*</url-pattern> 
   </filter-mapping>
   <filter-mapping>
      <filter-name>struts2</filter-name>
      <url-pattern>/*</url-pattern>
   </filter-mapping> 
```

当 struts 过滤器出于某种原因停止链时，您的级别过滤器将不会应用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:33:49.797

可能是您的问题与使用不推荐使用的**过滤**器调度程序有关：

FilterDispatcher (org.apache.struts2.dispatcher.FilterDispatcher) 用于早期的 Struts2 开发，自 Struts 2.1.3 起已弃用。

如果您使用的 Struts 版本 >= 2.1.3，则始终建议升级新的过滤器类 - StrutsPrepareAndExecuteFilter (org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter)。

**而不是**：

```
<filter>
   <filter-name>struts2</filter-name>
       <filter-class>
           org.apache.struts2.dispatcher.FilterDispatcher
       </filter-class>
</filter> 
```

**尝试使用**：

```
<filter>
    <filter-name>struts2</filter-name>
        <filter-class>
         org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter
        </filter-class>
</filter> 
```

# c# - LINQ 中是否有 SQL Server PARTITION OVER 功能的等效项？

> ID：11647196
> 
> 赞同：1
> 
> 时间：2012-07-25T09:57:23.143
> 
> 标签：c#, linq

LINQ 中是否有 SQL Server PARTITION OVER 功能的等效项？

```
SELECT Decision_ID ,
       ID
       ROW_NUMBER() OVER ( PARTITION BY Decision_ID 
                           ORDER BY Decision_ID, ID ASC ) calcAmend
FROM   dbo.Decision_Data 
```

它给出了每条记录的排名

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:38:42.830

```
DecisionData
    .GroupBy(d => d.DecisionID,
        (key, dd) => dd
                     .OrderBy(d => d.Id)
                     .Select((d, i) => new {d.DecisionId, d.Id, calcAmend = i}))
    .SelectMany(d => d) 
```

# asp.net - 在 ASP.net 嵌套页面中不显示标签

> ID：11647197
> 
> 赞同：0
> 
> 时间：2012-07-25T09:57:24.097
> 
> 标签：asp.net

我有一个名为`MainMasterPage.master`i have a `contentplaceholder1`and的母版页`contentplaceholder2`。此外，我正在创建一个使用 的嵌套母版页`contentplaceholder1`，在此我放置标签。但是这些标签没有出现。我哪里出错了？

在嵌套母版页中

```
<asp:Content ID="Content1" ContentPlaceHolderID="cntplace1" Runat="Server">
    <table width="100%">
    <tr> <asp:Label runat="server" ID="lblImmu" Text="Immunization Details"></asp:Label></tr>
    <tr><asp:Label runat="server" ID="lblDel"></asp:Label></tr>
    <tr><asp:Label runat="server" ID="lblMal"></asp:Label></tr>
    </table>
</asp:Content> 
```

# c# - OnServerClick 事件未在某些页面上触发

> ID：11647198
> 
> 赞同：0
> 
> 时间：2012-07-25T09:57:29.020
> 
> 标签：c#, .net

在我正在处理的网站中，有一个我无法弄清楚的错误。

错误如下。

我有两个不同的页面（具有不同的功能/控件）。它们都包含相同的页眉，其中包含注销按钮。

```
<form id="Form1" method="post" runat="server">
    <uc1:pageheader id="PageHeader1" title="XXXXX" runat="server"></uc1:pageheader>
    <!-- page content goes here -->
</form> 
```

按钮如下（位于`pageHeader.ascx`）

```
<INPUT type="button" value="Log out" id="btnLogout" name="btnLogout" runat="server" onserverclick="btnLogout_ServerClick"> 
```

具有`btnLogout_ServerClick`处理断开连接的服务器端功能。

在其中一个页面中，按钮的作用很好。在另一个中，该`btnLogout_ServerClick`功能从未达到。

我试图在`page_Load`两个页面的函数中都设置一个断点。它们都从第一个段落开始，其`IsPostBack`值设置为，`True`但在加载页面上的每个控件之后，第一个段落最终进入注销功能，而另一个开始一个新的`page_Load`循环，`IsPostBack`设置为`False`。

对于可能导致此行为的原因，没有任何错误/异常的痕迹，如果有人可以提供帮助，无论是提供解决方案还是提供查找问题的方法，那将是受欢迎的。

而且我知道我可以尝试删除每个控件并一次添加一个以查看它们是否会阻止按钮工作，但是两个页面都有很多控件，如果我能避免这种情况会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:28:06.840

使用浏览器工具（IE 开发工具、Firebug 等）查看两种情况下发布的数据是否相同。如果有任何重定向，请在引发事件之前检查其他代码是否没有进行重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:32:22.020

我要检查的第一件事是按钮的事件处理程序。你确定它注册正确吗？

可能与[回发时丢失的用户控件事件处理程序有关](https://stackoverflow.com/questions/1260163/net-user-control-event-handler-lost-on-postback)

# sql - Google BigQuery CASE 函数

> ID：11647201
> 
> 赞同：11
> 
> 时间：2012-07-25T09:57:35.953
> 
> 标签：sql, case, google-bigquery

我正在尝试运行类似于此处回答的查询， [SQL Selecting multiple sums?](https://stackoverflow.com/questions/821751/sql-selecting-multiple-sums)

```
SELECT  SUM(CASE WHEN order_date >= '01/01/09' THEN quantity ELSE 0 END) AS items_sold_since_date,
    SUM(quantity) AS items_sold_total,
    product_ID
FROM    Sales
GROUP BY product_ID 
```

但如果我尝试这样做，我会收到错误消息

```
"message": "Unrecognized function CASE". 
```

如果我尝试更简单的方法（来自 sql 教程），

```
SELECT CASE 1 WHEN 1 THEN 'one' WHEN 2 THEN 'two' ELSE 'more' END; 
```

然后我得到

```
"message": "searched case expression not supported at: 1.8 - 1.65". 
```

我将在黑暗中大胆尝试，并假设 SQL CASE 函数总体上不支持 BigQuery，但我真的希望我错了，因为它会根据我想要的报告查询产生很大的不同跑步。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-11-22T01:56:03.437

2013 年更新：BigQuery 支持 CASE：

```
SELECT CASE WHEN x=1 THEN 'one' WHEN x=2 THEN 'two' ELSE 'more' END 
FROM (SELECT 1 AS x) 

'one' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-25T16:19:27.987

在 BigQuery 中执行此操作的方法是使用 if(test,then,else) 函数。例如： `SELECT sum(if (revision_id > 10, num_characters, 0)) FROM [publicdata:samples.wikipedia]` 或类似于您的第二个查询：

`SELECT if (revision_id == 1, 'one', (if (revision_id == 2, 'two', 'more'))) FROM [publicdata:samples.wikipedia] limit 100`

# c - 将 CFLAG（例如 -std=gnu99）添加到 autotools 项目的位置

> ID：11647208
> 
> 赞同：26
> 
> 时间：2012-07-25T09:57:56.047
> 
> 标签：c, autotools

我有一个简单的 Autotools C 项目（不是 C++）。

CFLAG（通过检查）似乎是`-g -O2`.

我希望所有生成的 make 文件也`-std=gnu99`附加到 CFLAG，因为我使用`for (int i = 0; i < MAX; i++)`和类似的。

我显然可以破解 Makefile，但这会在`./configure`.

添加（或更改）代码所需的 CFLAG（而不是用户可能想要更改的那些 CFLAG）的正确位置在哪里？

（请注意，这是[在（Eclipse CDT）自动工具项目中添加 CFLAG 的位置的部分副本，例如 -std=gnu99，](https://stackoverflow.com/questions/11633763/where-to-add-a-cflag-such-as-std-gnu99-into-an-eclipse-cdt-autotools-project)因为我得到了我不想要的 Eclipse 特定答案。）

* * *

@DevSolar 的回答还没有帮助。一个`configure.ac`文件（下）生成`configure`脚本（也在下）。

配置.ac：

```
dnl Process this file with autoconf to produce a configure script.

CFLAGS="$CFLAGS -std=gnu99"
AC_PREREQ(2.59)
AC_INIT(tuntest, 1.0)

AC_CANONICAL_SYSTEM
AM_INIT_AUTOMAKE()

AC_PROG_CC

AC_CONFIG_FILES(Makefile src/Makefile)
AC_OUTPUT 
```

$ grep CFLAGS 配置

```
CFLAGS
CFLAGS
To assign environment variables (e.g., CC, CFLAGS...), specify them as
  CFLAGS      C compiler flags
ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
ac_test_CFLAGS=${CFLAGS+set}
ac_save_CFLAGS=$CFLAGS
   CFLAGS="-g"
  CFLAGS=""
     CFLAGS="-g"
if test "$ac_test_CFLAGS" = set; then
  CFLAGS=$ac_save_CFLAGS
    CFLAGS="-g -O2"
    CFLAGS="-g"
    CFLAGS="-O2"
    CFLAGS=
ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5' 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-25T13:09:54.000

autoconf 有一个宏：

只是说：

```
AC_PROG_CC_STDC 
```

在你之后`AC_PROG_CC`，一切都会好起来的。

尤其是当您使用默认情况下没有`-std=gnu99`但在 C99 模式下运行的其他编译器时（或者想到 hpcc 的不同选项`-AC99`）。

我**不会**用于`CFLAGS`那种事情。

从[文档](https://www.gnu.org/savannah-checkouts/gnu/autoconf/manual/autoconf-2.69/html_node/C-Compiler.html)：

```
-- 宏：AC_PROG_CC_STDC
如果 C 编译器无法编译 ISO 标准 C（当前为 C99），
尝试为输出变量“CC”添加一个选项以使其工作。如果
编译器不支持 C99，回退到支持 ANSI
C89 (ISO C90)。

调用该宏后可以检查C编译器是否有
已设置为接受标准 C；如果没有，shell 变量
`ac_cv_prog_cc_stdc' 设置为 `no'。
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-08T16:35:57.623

虽然使用宏 like`AC_PROG_CC_STDC`比向 CFLAGS 添加编译器选项更可取，但 autoconf 目前没有启用 C11 编译器支持的宏——还没有`AC_PROG_CC_C11`，并且`AC_PROG_CC_STDC`只添加了`-std=gnu99`gcc 选项而不是`-std=gnu11`or `-std=c11`。

您可以通过简单地添加编译器标志

```
CFLAGS="$CFLAGS -std=c11" 
```

在configure.ac中。

或者，最好先检查编译器是否支持添加的选项，否则打印警告，告诉用户手动向 CFLAGS 添加适用于其编译器的等效选项：

```
AX_CHECK_COMPILE_FLAG([-std=c11],
  [AX_APPEND_FLAG([-std=c11])],
  [AC_MSG_WARN([-std=c11 not supported, you may have to set CFLAGS to enable C11 support.])
]) 
```

这使用[GNU Autoconf Archive](https://www.gnu.org/software/autoconf-archive/)`AX_CHECK_COMPILE_FLAG`中的和`AX_APPEND_FLAG`宏。要使用它们，请将它们放入子目录并添加到 configure.ac`m4``AC_CONFIG_MACRO_DIR([m4])`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-04T15:05:41.767

这个主题在 Automake 手册[27.6 Flag Variables Ordering](https://www.gnu.org/software/automake/manual/html_node/Flag-Variables-Ordering.html)中有介绍。`configure.ac`和之间存在交互`Makefile.am`，它不仅仅是设置隐式 make 规则中使用的众所周知的 shell 变量。

简而言之，您应该将其设置在一个名为`mumble_CFLAGS`Automake 手册中讨论的新变量中。`mumble`只是您的程序的名称，通常是`foo`或`bar`在其他示例中。稍后，当您的 makefile 被创建时，您的程序（`mumble`或`foo`或`bar`）的配方将用于`$(mumble_CFLAGS) $(CFLAGS)`构建目标。

这是它的外观示例。它不使用`mumble`or`foo`或`bar`，而是`my_prog`用作工件名称。

***配置.ac***：

```
# Perform a compile test using -std=gnu99, set has_gnu99
if test "$has_gnu99" -eq "1"; then
  AC_SUBST([MY_GNU99], [-std=gnu99])
fi 
```

***生成文件.am***：

```
bin_PROGRAMS = my_prog
my_prog_CFLAGS = $(MY_GNU99) $(MY_ANOTHER_FLAG) $(MY_YET_ANOTHER_FLAG) ... 
```

稍后，当生成 makefile 时，它​​将有一个类似于以下的配方，其中`$(MY_PROG_CFLAGS)`应用于所有 build 的对象`my_prog`：

```
my_prog :
    $(CC) $(CPPFLAGS) $(MY_PROG_CFLAGS) $(CFLAGS) -c $< -o $@ 
```

的额外间接`my_prog_CFLAGS`允许您为不同的目标设置多个标志。例如，您可以有 a `my_prog_CFLAGS`、 a`my_archive_CFLAGS`和 a `my_sharedobj_CFLAGS`。

而且它不限于`my_prog_CFLAGS`. 您还可以在 makefile 中隐式使用`my_prog_CPPFLAGS`,和其他变量。`my_prog_CXXFLAGS`

* * *

这是来自[Automake 手册](https://www.gnu.org/software/automake/manual/html_node/Flag-Variables-Ordering.html)：

> ***编译标志变量***
> 
> 本节试图回答上述所有问题。我们将在我们的示例中主要讨论 CPPFLAGS，但实际上答案适用于 Automake 中使用的所有编译标志：CCASFLAGS、CFLAGS、CPPFLAGS、CXXFLAGS、FCFLAGS、FFLAGS、GCJFLAGS、LDFLAGS、LFLAGS、LIBTOOLFLAGS、OBJCFLAGS、OBJCXXFLAGS、RFLAGS、UPCFLAGS和 YFLAGS。
> 
> CPPFLAGS、AM_CPPFLAGS 和 mumble_CPPFLAGS 是三个可用于将标志传递给 C 预处理器的变量（实际上这些变量也用于其他语言，如 C++ 或预处理的 Fortran）。CPPFLAGS 是用户变量（参见用户变量），AM_CPPFLAGS 是 Automake 变量，而 mumble_CPPFLAGS 是特定于 mumble 目标的变量（我们称其为每个目标变量，参见程序和库变量）。
> 
> Automake 在编译 C 源文件时总是使用其中两个变量。当为 mumble 目标编译目标文件时，第一个变量将是 mumble_CPPFLAGS（如果已定义），否则为 AM_CPPFLAGS。第二个变量始终是 CPPFLAGS。
> 
> 在以下示例中，
> 
> ```
> bin_PROGRAMS = foo bar
> foo_SOURCES = xyz.c
> bar_SOURCES = main.c
> foo_CPPFLAGS = -DFOO
> AM_CPPFLAGS = -DBAZ 
> ```
> 
> xyz.o 将使用 '$(foo_CPPFLAGS) $(CPPFLAGS)' 编译，（因为 xyz.o 是 foo 目标的一部分），而 main.o 将使用 '$(AM_CPPFLAGS) $(CPPFLAGS)' 编译（因为目标栏没有每个目标变量）。
> 
> mumble_CPPFLAGS 和 AM_CPPFLAGS 的区别已经很清楚了，让我们关注 CPPFLAGS。CPPFLAGS 是用户变量，即用户有权修改以编译包的变量。与许多其他变量一样，此变量记录在“configure --help”输出的末尾。
> 
> 例如，需要将 /home/my/usr/include 添加到 C 编译器的搜索路径的人会配置一个包
> 
> ```
> ./configure CPPFLAGS='-I /home/my/usr/include' 
> ```
> 
> 并且此标志将传播到所有 Makefile 的编译规则。

# node.js - 在 MongoDB 中存储 socket.io 创建的套接字

> ID：11647211
> 
> 赞同：1
> 
> 时间：2012-07-25T09:58:10.113
> 
> 标签：node.js, mongodb, websocket, socket.io, mongoose

我正在尝试使用 Express、Socket.io 和 MongoDB（通过 mongoose / node mongo 本机驱动程序）创建一个基于 Node.js 的应用程序。

我的问题是，除了通过 WebSockets 建立与客户端的连接外，我还获得了其他信息，即存储和处理将是数据库中最好的。然后随着事件的到来，我正在寻找基于附加信息的客户端，并通过套接字向这些客户端发送通知。

我的问题 - 是否有可能将通过套接字连接创建的对象存储到数据库？

如果没有，我的想法是将它们与一个附加变量一起存储在一个数组中，这将允许他们通过在数据库中找到的项目来查找附加信息。我对吗？

客户端 --> 创建连接 --> 发送数据 --> 服务器 --> 在数据库中搜索匹配数据 --> 将套接字匹配到建立的数据 --> 通过建立的套接字发送通知

真挚地

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T17:08:10.417

For anybody who comes across this via Google, it seems there is now a [socket.io-mongo module](https://github.com/kof/socket.io-mongo) that handles this.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:25:01.153

您可以在 mongodb 中保留套接字列表及其所属的节点进程，然后在需要将消息传递到特定套接字时向该进程发送消息。像每条消息一样的东西

{delivery_to:all} 或 {delivery_to:[1, 2, 3, 4]} 其中数字是套接字 id。

但优雅的方法是在 mongodb 中使用一个有上限的集合，并让所有进程监听该集合并处理属于该进程的任何消息。可以在这里找到使用 mongodb 的队列实现的一个很好的描述。

[http://www.10gen.com/presentations/mongosv-2011/mongodb-as-a-message-queue](http://www.10gen.com/presentations/mongosv-2011/mongodb-as-a-message-queue)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-02T16:37:47.640

好的，我不知道消息队列是否是最好的主意，但正如你提到的猫鼬。从客户端，您可以向服务器发送带有消息和房间 ID（任何唯一的随机 ID，并且必须加入与服务器的初始连接，或者应该注册到服务器，只需创建一个房间）到服务器的 http 请求，并在服务器中使用 mongoose 将消息保存到 mongodb ，现在使用猫鼬模式发布方法，该方法在猫鼬保存后将消息发送到房间后被触发。所以它确实 pub sub

# php - .htaccess - 从 URL 中删除“/demo/”

> ID：11647215
> 
> 赞同：1
> 
> 时间：2012-07-25T09:58:16.203
> 
> 标签：php, .htaccess, redirect, joomla

*我*正在将我的网站更新为演示版的新版本。我只是将我的演示站点保留为`www.domain-name.com/demo/`

现在我要将我的网站保存在演示文件夹中.. 所以如果访问`www.domain-name.com`它将从“演示”文件夹中获取文件

为此，我在下面使用了编码。

```
RewriteRule ^(index.php)$ ./demo/ [L] 
```

它只会影响根路径，而不会影响其他路径。

我需要改变如下

**从**

```
 http://www.domain-name.com/demo/index.php/contact-us
 http://www.domain-name.com/demo/index.php/aboutus
 ....etc 
```

**至**

```
http://www.domain-name.com/index.php/contact-us
http://www.domain-name.com/index.php/aboutus 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:22:55.893

更改 DocumentRoot（在主服务器配置中）

```
DocumentRoot /foo/bar/demo/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:22:39.953

你说这样的话吗？

重写规则 ^(.*)$ /demo/$1 [L]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:14:30.317

对于 .htaccess 这应该工作

```
RewriteEngine on

# redirect direct requests to /demo subfolder  
RewriteCond %{THE_REQUEST} demo/
RewriteRule ^demo/(.*) http://www.domain-name.com/$1 [R=301,L]

# map everything else to subfolder
RewriteRule ^(.*)$ demo/$1 [L] 
```

# c# - 在这两种情况下使用有什么区别

> ID：11647216
> 
> 赞同：1
> 
> 时间：2012-07-25T09:58:17.383
> 
> 标签：c#, asp.net, performance, database-connection, using

我想知道，如果有区别：

```
IfxDataReader ifxDataReaders = ifxCommand.ExecuteReader();
                    using (ifxDataReaders)
                    {
                        if (ifxDataReaders.Read())
                        {
                            item = (int)ifxDataReaders[0];
                        }
                        ifxDataReaders.Close();
                    } 
```

* * *

```
 using(IfxDataReader ifxDataReaders = ifxCommand.ExecuteReader())
                         {

                            if (ifxDataReaders.Read())
                            {
                                item = (int)ifxDataReaders[0];
                            }
                            ifxDataReaders.Close();

                         } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:02:10.177

[诱人的说法是说“第一个不会处理”，但它会。]

[`ExecuteReader`第二个诱人的陈述是说“如果抛出异常，第一个不会处置”，但在这种情况下，*两者都*不会处置。]

如果在 中发生错误`ExecuteReader`，则在*这两种*情况下`ifxDataReaders`都**不会**被分配，因此`Dispose`无论如何调用都不会解决。顺便说一句，`Close`实际上不需要调用 to。

`Dispose`在这两种情况下都会被调用，我相信在相同的情况下。

变量范围会改变。在第二个实例中，`ifxDataReaders`作用域为 ，`using`而在第一个实例中，`ifxDataReaders`可以在 the*之后*使用`using`（尽管此时您将使用已处置的对象）。

第二种形式是首选，对我来说它似乎更明确并且更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:01:35.757

在第一种情况下，您在 using 块的内部和外部都有一个对象 ifxDataReaders。

在第二种情况下，您在 using 块中只有 ifxDataReaders 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T10:01:49.767

只有第一个变量中的变量在没有重新初始化的情况下被使用时才会导致 ObjectDisposed 异常。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-25T10:00:45.813

在第二种情况下`Dispose`将被自动调用。

# objective-c - 向上滚动时在底部显示一个按钮

> ID：11647218
> 
> 赞同：1
> 
> 时间：2012-07-25T09:58:32.193
> 
> 标签：objective-c, uiviewcontroller, uiscrollview, uiscrollviewdelegate

我是 iOS 的新手，我正在尝试开发基于新闻的应用程序。

在我的应用程序中，我有一个**根视图控制器**，它是一个**表视图控制器**，用于显示新闻的标题和新闻的图像。好吧，当用户单击表格单元格时，会显示另一个**视图控制器**，它更详细且可滚动。

在**View Controller**中，用户可以在 Facebook 和 Twitter 上分享新闻，这样我至少有两个按钮。我想要做的是在用户向上滚动时显示这两个按钮。当用户向下滚动时，我想让它们消失。**Pulse News**中有类似的东西。我已经看过**Scroll View 委托方法**，但我没有让它工作。我怎样才能完成我想做的事情？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:35:20.990

根据滚动位置在您想要滚动的位置创建按钮。

*   滚动视图的原点 x：`scroll.frame.origin.x;`
*   滚动视图的原点 y：`scroll.frame.origin.y;`
*   滚动视图的高度：`scroll.frame.size.height;`
*   滚动视图的宽度：`scroll.frame.size.width;`

现在您可以根据需要将按钮放在滚动视图上：

```
button = [[UIButton alloc] initWithFrame:CGRectMake(x,y,x1,y1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:33:01.650

**使用工作代码更新：**除了让按钮滚出页面之外，它们不可见

我知道您说过您查看了滚动视图代表，但这就是您解决此问题的方法。在查看 Pulse 时，唯一棘手的动作是向下滚动时，即看起来像 UIToolbars 的东西消失的时候。您需要拥有的最重要的东西是从 iPhone 可见屏幕底部和顶部的 UIView 继承的任何东西，因此当用户向下或向上滚动时，contentoffset 具有值。

其他每一个动作都会导致它们出现，所以 Pulse 可能做了类似的事情。

```
#import <UIKit/UIKit.h>

@interface C1ViewController : UIViewController
{
    CGPoint _y;
}
@property (weak, nonatomic) IBOutlet UIScrollView *scroller;
@property (weak, nonatomic) IBOutlet UIToolbar *toolbar;

@end

    #import "C1ViewController.h"
@interface C1ViewController ()

@end

@implementation C1ViewController
@synthesize scroller = _scroller;
@synthesize toolbar = _toolbar;

- (void)viewDidLoad
{
        [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
        self.scroller.contentSize = CGSizeMake(self.scroller.frame.size.width, self.scroller.frame.size.height + 100);
        self.toolbar.hidden = TRUE;
        _y = [self.scroller contentOffset];
}
    // this method is getting deprecated, so don't worry about it to much
    // but don't forget to dealloc...which I did not include. 
- (void)viewDidUnload
{
        [self setScroller:nil];
        [self setToolbar:nil];
        [super viewDidUnload];
        // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
        NSLog(@"content offset %f", self.scroller.contentOffset);
        if (_y.y < [self.scroller contentOffset].y){
            self.toolbar.hidden = TRUE;

        } 
        else {
            self.toolbar.hidden = FALSE;
        }
}

@end 
```

我的视图层次结构在 Interface Builder 中的样子 ![在此处输入图像描述](../Images/37bad3706a090c73d269c06d56861bc2.png)

# c++ - void* 指针和指向某些结构（布局）的指针是否兼容？

> ID：11647220
> 
> 赞同：4
> 
> 时间：2012-07-25T09:58:34.517
> 
> 标签：c++, c

换句话说，我可以重新解释（不是转换！）`void*`指针作为指向某种结构类型的指针（假设`void*`指针确实保存正确转换的有效结构地址）

实际上我对以下场景很感兴趣：

```
typedef struct void_struct void_struct_t;

typedef somestruct
{ 
    int member;
    // ... other members ...
}somestruct_t;

union 
{
    void*          pv; 
    void_struct_t* pvs; 
    somestruct_t*  ps; 
}u;

somestruct_t s={};

u.pv= &s;

u.ps->member=1; // (Case 1)  Ok? unspecified? UB? 

u.pvs=(void_struct_t*)&s;

u.ps->member=1;  // (Case 2) )Ok? 
```

我在 C11 标准中发现的对于案例 1 来说相当令人失望：

§6.2.5

> 28 指向 void 的指针应具有与指向字符类型的指针相同的表示和对齐要求。[脚注：相同的表示和对齐要求意味着作为函数的参数、函数的返回值和联合成员的可互换性。 ] 同样，指向兼容类型的合格或不合格版本的指针应具有相同的表示和对齐要求。所有指向结构类型的指针都应具有彼此相同的表示和对齐要求。所有指向联合类型的指针都应具有彼此相同的表示和对齐要求。指向其他类型的指针不需要具有相同的表示或对齐要求。

不过，情况 2 似乎是有效的，但我不是 100% 确定...

这个问题主要是面向 C 的，但我对 C++ 也很感兴趣（我希望代码在由 C++ 编译器编译时是有效的）。老实说，我在 C++11 标准中发现的更少，所以即使案例 2 对我来说似乎也是有问题的……但是，我可能遗漏了一些东西。

**[编辑] 这个问题背后的真正问题是什么？**

我有一组（可能很大）定义为结构的类型。对于每种类型，我需要定义一个伴随类型：

```
typedef struct companion_for_sometype
{
  sometype* p_object;
  // there are also other members
}companion_for_sometype; 
```

显然，伴生类型将是 C++ 中的模板，但我需要 C 的解决方案（更准确地说，对于“干净的 C”，即 C89 和 C++ 的交集，因为我希望我的代码也是有效的 C++ 代码）。

幸运的是，即使在 C 中也不是问题，因为我可以定义一个宏

```
DECLARE_COMPANION(type_name) typedef struct companion_for_##type_name
{
  type_name* p_object;
  // there are also other members
}companion_for_##type_name; 
```

只需为需要伴侣的每种类型调用它。

还有一组对伴随类型的通用操作。这些操作也由宏定义（因为在纯 C 中没有重载）。

其中一项操作，比如说

```
#define op(companion_type_object) blablabla 
```

应该为伴生对象的字段分配一个`void*`指针`p_object`，即应该做这样的事情：

```
(companion_type_object).p_object= (type_name*) some_function_returning_pvoid(..) 
```

但是宏不知道 type_name（只有伴随类型的*对象*被传递给宏），所以宏不能进行适当的指针转换。

这个问题实际上是受到这个问题的启发。

为了解决这个问题，我决定将赋值中的目标指针重新解释为 void* 然后赋值给它。可以通过用指针联合替换伴随声明中的指针来完成（问题是关于这种情况），或者可以直接重新解释目标指针，例如：

```
*(void**) &(companion_type_object).p_object= some_function_returning_pvoid(..) 
```

但是如果不重新解释指针，我找不到任何解决方案（也许我错过了一些可能性）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T10:02:58.670

`void *`是一个可以保存任何对象指针类型的指针，包括所有指向结构类型的指针。因此，您可以将任何指向结构类型的指针分配给`void *`.

但是`void *`并不能保证指向结构类型的指针具有相同的表示形式，因此您的案例 1 是未定义的行为。

> （C11，6.2.5p28）“[...] 指向其他类型的指针不需要具有相同的表示或对齐要求。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T08:56:54.750

在 C 中，`void *`自动转换为任何对象类型，所以这将起作用：

```
(companion_type_object).p_object = some_function_returning_pvoid(..) 
```

在 C++ 中，您需要使用`static_cast`，但您可以使用 找出所需的类型`decltype`：

```
(companion_type_object).p_object = 
    static_cast<decltype(*(companion_type_object).p_object) *>(
        some_function_returning_pvoid(..)) 
```

在 C++03 中，您应该能够使用一些等效于`decltype`. 或者，您可以提供一个宏生成的方法`companion_type_object`来将 a`void *`转换为适当的类型：

```
static type_name *void_p_to_object_p(void *p) { return static_cast<type_name *>(p); }
...
(companion_type_object).p_object = companion_type_object.void_p_to_object_p(
    some_function_returning_pvoid(..)) 
```

# java - 如何将参数传递给 Play 中的 Jobs！框架 1.2.x？

> ID：11647221
> 
> 赞同：3
> 
> 时间：2012-07-25T09:58:45.733
> 
> 标签：java, playframework, playframework-1.x, promise

我有一段我的剧本！(1.2.4) 应用程序从 CSV 文件加载数据，这工作正常，但需要一段时间，我一直在尝试通过 Promise 机制将其移植到 Job 中。问题是，似乎没有办法传递输入参数（CSV 文件和文件类型的字符串），因为 doJobWithResult 是对无参数方法的覆盖。

工作看起来像：-

```
public class ImportCSV extends Job<string> {
public String doJobWithResult()
{
    do stuff...
    return my_string; 
```

}

并被称为：-

```
Promise<String> recordcount = new ImportCSV().now();
String records = await(recordcount); 
```

我尝试在接受这些参数的 Job 类中创建一个构造函数，但是当通过 now() 方法调用它时它不会触发。

关于如何传递实际异步执行工作所需的数据的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T10:09:23.893

你应该：

1.  在您的 ImportCSV 类中创建`private fields`以保存作业所需的参数
2.  在您的 Job 类构造函数 ( `this.param1 = param1`)中初始化这些字段
3.  调用`new ImportCSV(param1, param2)`以初始化您的对象
4.  使用 doJobWithResult() 方法访问私有字段`this.param1`

Promise 的创建是好的，你会得到：

```
Promise<String> recordcount = new ImportCSV(param1, param2).now();
String records = await(recordcount); 
```

如果您的 Job 类的构造函数有问题，请更新您的问题并添加一些代码。

# android - 如何在 Android 应用程序中维护会话超时处理

> ID：11647223
> 
> 赞同：5
> 
> 时间：2012-07-25T09:58:46.483
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

![在此处输入图像描述](../Images/1f5b4262c8849af033d90412f3f97c50.png)我是 Android 应用程序开发的新手。我有一个小问题。在我的 Android 应用程序上工作突然点击“主页”按钮，所以它会在一段时间后再次进入后台转到“主页”并单击我的应用程序图标它再次从我的开始第一个屏幕而不是这个我保留了最后查看的活动，并且应该显示消息，例如“您的会话超时，所以请再次登录带有两个 EditText 框的框”然后检查凭据并允许用户继续或重定向到登录屏幕。如何为达到这个。

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:33:11.407

它在Android中很简单。你需要维护`SharedPreferences`。

阅读[本文](http://developer.android.com/reference/android/content/SharedPreferences.html)以更好地理解该概念。

这将作为

```
 ==> when ever you are trying to maintain login concept save user name in the sharedpreference.
 ==> once data is edited in prefernces.xml , the data in it can be check in any Activity. 
```

例如，要保存用户名、密码和会话 ID，您可以：

```
 SharedPreferences pref = myContexy.getSharedPreferences("Session Data", MODE_PRIVATE);
 SharedPreferences.Editor edit = pref.edit();
 edit.putString("User Name", username);
 edit.putString("Password", password);
 edit.putInt("Session ID", session_id);
 edit.commit(); 
```

并得到他们

```
 SharedPreferences pref = myContexy.getSharedPreferences("Session Data", MODE_PRIVATE);
 username = pref.getString("User Name", "");
 password = pref.getString("Password", "");
 session_id = pref.getInt("Session ID", 0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-22T12:44:28.747

`SharedPreferences`绝对是要走的路，但要更详细地了解超时：

*   将当前时间戳保存在`onPause()`(-> `SharedPreferences`)
*   然后`onResume()`比较它，检查超时

如果您没有超时，请继续，否则显示漂亮的屏幕，只需注销，自毁设备或在这种情况下您想做的任何事情:-)

您也可以考虑实现某种会话管理器类，以在更高级别上处理它： [来自 android hive 的不错的示例/教程](http://www.androidhive.info/2012/08/android-session-management-using-shared-preferences/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T10:05:56.243

有关 Activity 生命周期的说明，请参见此图：http: [//developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

覆盖活动中的适当方法以跟踪它何时失去/重新获得焦点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-27T12:02:39.980

如果您想维护用户登录会话，那么我们可以使用处理程序来执行此操作，而不是在所有活动中拥有偏好。

1.  用户登录后创建Handler
2.  设置 sendMessageAtTime(Message, long)，long 为毫秒值。这将调用定义的注销函数。

# vba - Excel 宏建议

> ID：11647227
> 
> 赞同：1
> 
> 时间：2012-07-25T09:58:51.717
> 
> 标签：vba, excel

我在工作簿上运行以下宏，以将具有特定条件的数据从“主”表复制到“隔离”表；

```
Dim LR As Long, LR2 As Long

Application.ScreenUpdating = False

With Sheets("Quarantined")
    LR2 = .Range("L" & Rows.Count).End(xlUp).Row
    If LR2 > 2 Then
        .Range("A3:I" & LR2).ClearContents
    End If
End With

With Sheets("Master")
    LR = .Cells(Rows.Count, 8).End(xlUp).Row
    LR2 = Sheets("Quarantined").Range("L" & Rows.Count).End(xlUp).Row
    With .Range("L2:L" & LR)
        .AutoFilter Field:=1, Criteria1:="QUARANTINED"
        .Offset(1).Resize(LR).EntireRow.Copy Sheets("Quarantined").Range("A" & LR2 + 1)
        .AutoFilter
    End With
End With

Application.ScreenUpdating = True 
```

它运行良好，但如果我更新主文件并再次运行宏，它会将其粘贴在隔离表上的原始信息下。如何让它覆盖已经存在的信息而不是粘贴在下面？

这里希望

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:09:52.203

它粘贴在原始信息下，因为您告诉它。

您正在清除您的范围，`.Range("A3:I" & LR2).ClearContents`但您正在从 Col L 获取下一个可用行`LR2 = Sheets("Quarantined").Range("L" & Rows.Count).End(xlUp).Row`

将您的代码更改为此

`.Range("A3:L" & LR2).ClearContents`

或基于 Col A 而不是 Col L 取最后一行

# wpf - MediaElement 类未在 WPF 应用程序中播放媒体文件

> ID：11647228
> 
> 赞同：0
> 
> 时间：2012-07-25T09:58:51.780
> 
> 标签：wpf

主窗口.Xaml

```
<MediaElement Margin="10,10,10,0 " Name="McMediaElement" Width="450" Height="250" LoadedBehavior="Manual" Stretch="Fill"
              MediaOpened="Element_MediaOpened" MediaEnded="Element_MediaEnded" UnloadedBehavior="Stop" />
    <Label Grid.Column="1" Grid.Row="1" Height="28" Margin="82,0,99,3.52" 
           Name="FileNameLabel" VerticalAlignment="Bottom" Background="LightGreen">
    </Label>
    <Button Height="23" Name="BrowseButton" Width="113" Grid.Column="1" HorizontalAlignment="Right" 
            Margin="0,0,182,7.04" Grid.Row="1" VerticalAlignment="Bottom" Grid.ColumnSpan="2"
            FontWeight="Bold" Click="BrowseButtonClick">
        Browse a Media
    </Button> 
```

当单击 BrowseButton 它从打开的对话框中获取文件并将其作为 FileNameLabel 放入 Lable 控件中

```
private void BrowseButtonClick(object sender, RoutedEventArgs e)
{
    System.Windows.Forms.OpenFileDialog dlg = new System.Windows.Forms.OpenFileDialog();
    dlg.InitialDirectory = "c:\\";
    dlg.Filter = "Media files (*.wmv)|*.wmv|All Files (*.*)|*.*";
    dlg.RestoreDirectory = true;
    if (dlg.ShowDialog() == System.Windows.Forms.DialogResult.OK)
    {
        string selectedFileName = dlg.FileName;
        FileNameLabel.Content = selectedFileName;
        McMediaElement.Source = new Uri(selectedFileName);
        McMediaElement.UpdateLayout();
        McMediaElement.Play();
    }
}
    private void Element_MediaOpened(object sender, EventArgs e)
    {
        timelineSlider.Maximum = McMediaElement.NaturalDuration.TimeSpan.TotalMilliseconds;
    }

    // When the media playback is finished. Stop() the media to seek to media start.
    private void Element_MediaEnded(object sender, EventArgs e)
    {
        McMediaElement.Stop();
    } 
```

它不播放媒体文件。所以 Plaese 建议代码中的问题。

# sql-server-2008 - 我如何从服务器上的数据库读取数据到另一台服务器上的另一个数据库

> ID：11647230
> 
> 赞同：0
> 
> 时间：2012-07-25T09:58:51.210
> 
> 标签：sql-server-2008

我有两个具有相同架构的类似数据库。但一个用于打印目的。我的窗体应用程序需要从 server1 上的 dby 读取数据到 server2 上的 dby。服务器位于不同的网络上但可以通信。我正在尝试使用子查询，这是
查询：

```
Using main_db
Insert into socio_bio 
select * from socio_bio where receiptno in (
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:06:42.617

您可以使用此存储过程： sp_addlinkedserver()

```
exec sp_addlinkedserver @server = 'yourServerName'
select * from [server].[database].[schema].[table] 
```

在你的例子中

```
select * from [yourServerName].[testdb].[dbo].[table] 
```

# android - wny 单选按钮组在代码中无法正常工作

> ID：11647235
> 
> 赞同：0
> 
> 时间：2012-07-25T09:59:11.180
> 
> 标签：android, user-interface, coding-style

```
<RadioGroup>

                <TableRow>

                    <RadioButton
                        android:id="@+id/a"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:text="lolo"
                        />

                    <RadioButton
                        android:id="@+id/b"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:text="sh"
                         />
                </TableRow>

                <TableRow>

                    <RadioButton
                        android:id="@+id/c"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:text="s"
                        />

                    <RadioButton
                        android:id="@+id/d"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:text="cannot be determined"
                         />
                </TableRow>
            </RadioGroup> 
```

我想从四个单选按钮中选择一个，它就像 4 个单独的单选按钮一样？？？，所有 r 都被选中了，我是 android 开发的新手，所以请指导我thanx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:09:09.260

尝试这个：

```
<RadioGroup
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">

                <TableRow>

                    <RadioButton
                        android:id="@+id/a"
                        android:text="lolo"
                        android:button="@drawable/btn_touch"/>

                    <RadioButton
                        android:id="@+id/b"
                        android:text="sh"
                         android:button="@drawable/btn_touch"/>
                </TableRow>

                <TableRow>

                    <RadioButton
                        android:id="@+id/c"
                        android:text="s"
                        android:button="@drawable/btn_touch"/>

                    <RadioButton
                        android:id="@+id/d"
                        android:text="cannot be determined"
                        android:button="@drawable/btn_touch"/>
                </TableRow>
            </RadioGroup> 
```

`btn_touch`可绘制文件夹中的位置是：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- When selected, use grey -->
    <item android:drawable="@drawable/selected1"
          android:state_checked="true"/>
    <!-- When not selected, use white-->
    <item android:drawable="@drawable/unselected1"/>
</selector> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:51:17.150

`RadioButton`视图必须是 , 的直接子级`RadioGroup`才能正常`group-effect`工作。

因此，如果您在 下添加“TableRow” `RadioGroup`，则应在其上看到的组性质`RadioButton`将不起作用。

对于`RadioButton`'s 分组工作，尝试这样的事情。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center" >

    <RadioGroup
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <RadioButton
            android:id="@+id/a"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:text="lolo" />

        <RadioButton
            android:id="@+id/b"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:text="sh" />

        <RadioButton
            android:id="@+id/c"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:text="s" />

        <RadioButton
            android:id="@+id/d"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:text="cannot be determined" />
    </RadioGroup>

</RelativeLayout> 
```

如果您非常关心行列结构，请使用您自己的布局 XML 文件本身并`setOnCheckedChangeListener(listener)`在单选按钮上实现。当单击任何单选按钮时，将调用相应的侦听器块，然后取消选中其他单选按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T10:03:33.640

我认为您已使用单选组并在该组内定义单选按钮这是正确的，但请参阅此链接[单选按钮组](http://www.mkyong.com/android/android-radio-buttons-example/)这可能有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T11:49:03.550

如果您想将按钮保留在拆分行上，也许这可以帮助您： 1\. 从您的 xml 中删除该组，因为您不需要它：

```
<TableRow>
                    <RadioButton
                        android:id="@+id/a"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:text="lolo" />

                    <RadioButton
                        android:id="@+id/b"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:text="sh" />
                </TableRow>

                <TableRow>
                    <RadioButton
                        android:id="@+id/c"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:text="s" />

                    <RadioButton
                        android:id="@+id/d"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:text="cannot be determined" />
                </TableRow> 
```

2\. 在您的活动中使用它以使其工作：

```
private RadioButton a;
    private RadioButton b;
    private RadioButton c;
    private RadioButton d;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ...
        ButtonChange clRadio = new ButtonChange();
        a = (RadioButton) findViewById(R.id.a);
        b = (RadioButton) findViewById(R.id.b);
        c = (RadioButton) findViewById(R.id.c);
        d = (RadioButton) findViewById(R.id.d);
        a.setOnCheckedChangeListener(clRadio);
        b.setOnCheckedChangeListener(clRadio);
        c.setOnCheckedChangeListener(clRadio);
        d.setOnCheckedChangeListener(clRadio);
        ...
    }
    public class ButtonChange implements OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(CompoundButton radio, boolean isChecked) {
            if(isChecked)
                switch(radio.getId()) {
                case R.id.a:
                case R.id.b:
                case R.id.c:
                case R.id.d:
                    a.setChecked(false);
                    b.setChecked(false);
                    c.setChecked(false);
                    d.setChecked(false);
                    radio.setChecked(true);
                    break;
                default :
                    break;
                }
            }
        }
    } 
```

这应该可以解决问题。

# java - 在Android中将Allready创建的数据库文件插入SQLite

> ID：11647244
> 
> 赞同：0
> 
> 时间：2012-07-25T09:59:28.480
> 
> 标签：java, android, sqlite

我是安卓新手。我已经有所有城市的文本文件和 MySQL 转储中的位置数据库文件。我想将这些文件连接到我的数据库。我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:10:02.893

创建`assests`在您的 Android 项目中调用的文件夹并将您的`txt`文件保存在那里。

您可以在项目中使用这些文件。检查[这个](http://www.41post.com/3985/programming/android-loading-files-from-the-assets-and-raw-folders)_`Android: Loading files from the Assets and Raw folders`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:07:12.017

如果您想将现有的数据库文件添加到应用程序，可以参考以下链接：

[http://zaman91.wordpress.com/2010/09/22/android-how-to-use-own-sqlite-database/](http://zaman91.wordpress.com/2010/09/22/android-how-to-use-own-sqlite-database/)

让我解释一下它是怎么回事，这段代码检查数据库文件是否已经被复制，如果没有，它会从 assets 文件夹中的数据库文件打开一个流，并将这个文件写入应用程序内存的内部存储。然后从中创建一个数据库对象。

# php - 通过 curl 和 php 连接到端口地址

> ID：11647245
> 
> 赞同：1
> 
> 时间：2012-07-25T09:59:35.953
> 
> 标签：php, ssl, curl

我正在使用 CURL 开发一个 php 站点，但它只适用于我的本地服务器而不是实时服务器。它返回错误“无法连接到主机”

CURL iS 安装在实时服务器上，我已经对其进行了测试。

SSL 安装在实时服务器上，我正在使用 curl 连接到端口 9301

即；http://xx.xxx.xx.xxx:9301/test。

这是我的代码：

```
 $request =  'http://xx.xxx.xx.xxx:9301/test'; 
    // The request parameters 
    $context = 'something'; 

    // urlencode and concatenate the POST arguments 
    $postargs = 'xmlRequest='.urlencode($context);
    $session = curl_init($request); 
   // Tell curl to use HTTP POST
    curl_setopt ($session, CURLOPT_POST, true); 
    // Tell curl that this is the body of the POST
    curl_setopt($ch, CURLOPT_PORT, '9301');

    curl_setopt ($session, CURLOPT_POSTFIELDS, $postargs); 
    // Tell curl not to return headers, but do return the response
    curl_setopt($session, CURLOPT_HEADER, false); 
    curl_setopt($session, CURLOPT_RETURNTRANSFER, true);

    $response = curl_exec($session); 
   //echo curl_getinfo($session);   
    echo $err = 'Curl error: ' . curl_error($session);
   curl_close($session); 
   echo $response; 
```

根据我的测试，很明显我无法通过 Curl 连接到端口地址。为了连接到端口地址，需要更改任何服务器设置吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T10:03:50.977

```
curl_setopt($ch, CURLOPT_PORT, '9301'); 
```

那是你的问题。手柄不在`$ch`您的情况下，但是`$session`。

我猜只是一个错字。

**一般来说：**确保在开发过程中显示所有错误。记录它们或将它们放在屏幕上。你会很容易抓住这个的。

# excel - 尽管维度安全，从不同机器到 SSAS 的 Excel 前端显示所有数据

> ID：11647246
> 
> 赞同：0
> 
> 时间：2012-07-25T09:59:36.110
> 
> 标签：excel, ssas, ssas-2008

在与 SSAS 所在的同一台机器上，我可以模拟如下安全性，由于应用了维度安全性而得到不同的结果：

```
runas /user:dom\usr1 "C:\Program Files\Microsoft Office\Office14\EXCEL.EXE"

runas /user:dom\usr2 "C:\Program Files\Microsoft Office\Office14\EXCEL.EXE" 
```

但是，当我在其他机器上运行它们时，我可以看到 Dimension 的所有成员；好像从未设置过安全性。

Dimensional 安全性是通过与具有不同允许的 Dimension 成员的这两个用户创建单个角色来应用的。

应用多维数据集安全性的唯一方法是通过[HTTP](http://www.scoop.it/t/ssas/p/2237470862/configure-http-access-on-iis-7-0)吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:24:16.493

不，HTTP 不是唯一的方法。Windows 身份验证应该可以正常工作。

您能否针对 SSAS 实例运行探查器跟踪，以确认从另一台计算机连接时正在使用哪些凭据？

这是您要在分析器跟踪中捕获的跟踪事件的屏幕截图...“审核登录”是您要查看的主要事件。 ![在此处输入图像描述](../Images/7cbea54cd0f98a72bf205ab4d411358f.png)

# objective-c - iOS查找视图是否正在动画

> ID：11647249
> 
> 赞同：3
> 
> 时间：2012-07-25T09:59:49.417
> 
> 标签：objective-c, ios, animation

我正在尝试为 UILabel 设置动画（淡入/淡出），并且正在使用以下代码：

```
float newAlpha = 0.0;

//TODO:Check if the previous animation has finished

if(answer.alpha==0.0) {
    newAlpha = 1.0;
} else if(answer.alpha==1.0) {
    newAlpha = 0.0;
}
[UIView animateWithDuration:1.0 animations:^{
    answer.alpha = newAlpha;
}]; 
```

TODO 注释在哪里，我想检查上一个动画是否完成，如果没有，则退出该方法。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:24:45.080

**更新＃1：**

你的班级需要一个变量：

```
BOOL _animationFinished; 
```

然后您可以对动画使用以下方式：

```
float newAlpha = 0.0;

//TODO:Check if the previous animation has finished
if (_animationFinished == false) return;

if(answer.alpha==0.0) {
    newAlpha = 1.0;
} else if(answer.alpha==1.0) {
    newAlpha = 0.0;
}

[UIView animateWithDuration:1.0f animations:^{ answer.alpha = newAlpha; _animationFinished = false; } completion:^(BOOL finished){ _animationFinished = true; }]; 
```

它必须是工作。

* * *

**原来的**

在这种情况下，我总是检查动画的主题，如下所示：

```
float newAlpha = 0.0;

//TODO:Check if the previous animation has finished
if (answer.alpha > 0.f || answer.alpha < 1.f) return; // it is always good enough for me
// ...or with AND it will cause the same effect:
// if (answer.alpha > 0.f && answer.alpha < 1.f) return;

if(answer.alpha==0.0) {
    newAlpha = 1.0;
} else if(answer.alpha==1.0) {
    newAlpha = 0.0;
}
[UIView animateWithDuration:1.0 animations:^{
    answer.alpha = newAlpha;
}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T10:06:16.283

如果您使用的是 UIView 那么

```
[UIView setAnimationDidStopSelector:@selector(animationfinished)];
-(void) animationfinished
{
      animationFinished = YES;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T10:06:22.977

使用[animateWithDuration:animations:completion:](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/clm/UIView/animateWithDuration%3aanimations%3acompletion%3a)方法来执行您的“上一个动画”，并在完成处理程序中设置一个标志以指示它是否已完成。然后，在你有 TODO 注释的地方检查相同的标志。

**编辑：**下面的示例

```
-(void) animation1 {
    // assume that alpha was 0 and we want the view to appear
    [UIView animateWithDuration:1.0 animations:^{
        answer.alpha = 1.0;
    } completion:^(BOOL finished){
        fristAnimationFinished = finished;
    }];
}

-(void) animation2 {
    float newAlpha = 0.0;

    if (!firstAnimationFinished)
        return;

    if(answer.alpha==0.0) {
        newAlpha = 1.0;
    } else if(answer.alpha==1.0) {
        newAlpha = 0.0;
    }
    [UIView animateWithDuration:1.0 animations:^{
        answer.alpha = newAlpha;
    }];
} 
```

# spring - 配置类 org.springframework.web.context.ContextLoaderListener 的应用程序侦听器时出错

> ID：11647250
> 
> 赞同：6
> 
> 时间：2012-07-25T09:59:50.210
> 
> 标签：spring, spring-mvc, jboss

我正在尝试通过 IntelliJ IDEA 11.0 部署我的应用程序，它给了我以下错误：

```
09:35:52,997 WARN  [JAXWSDeployerHookPreJSE] Cannot load servlet class: org.springframework.web.servlet.ViewRendererServlet
09:35:52,999 INFO  [TomcatDeployer] deploy, ctxPath=/my-portlet-1.0, warUrl=.../tmp/deploy/tmp555932443707493677my-portlet-1.0-exp.war/
09:35:53,386 ERROR [0]] Error configuring application listener of class org.springframework.web.context.ContextLoaderListener
java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1358)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1204)
    ...
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
09:35:53,391 ERROR [0]] Skipped installing application listeners due to previous error(s)
09:35:53,391 ERROR [StandardContext] Error listenerStart
09:35:53,391 ERROR [StandardContext] Context [/my-portlet-1.0] startup failed due to previous errors
09:35:53,402 WARN  [ServiceController] Problem starting service jboss.web.deployment:war=my-portlet-1.0.war,id=-135869088
org.jboss.deployment.DeploymentException: URL file:/C:/JBOSS/jboss-portal-2.7.2/server/default/tmp/deploy/tmp555932443707493677my-portlet-1.0-exp.war/ deployment failed
    at org.jboss.web.tomcat.service.TomcatDeployer.performDeployInternal(TomcatDeployer.java:386)
    at org.jboss.web.tomcat.service.TomcatDeployer.performDeploy(TomcatDeployer.java:104)
    ...
    at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
09:35:53,407 ERROR [MainDeployer] Could not start deployment: file:C:/Users/Abbas/Projects/my-app/my-portlet/target/my-portlet-1.0.war
org.jboss.deployment.DeploymentException: URL file:/C:/JBOSS/jboss-portal-2.7.2/server/default/tmp/deploy/tmp555932443707493677my-portlet-1.0-exp.war/ deployment failed
    at org.jboss.web.tomcat.service.TomcatDeployer.performDeployInternal(TomcatDeployer.java:386)
    at org.jboss.web.tomcat.service.TomcatDeployer.performDeploy(TomcatDeployer.java:104)
    ...
    at java.lang.Thread.run(Thread.java:662)
[2012-07-25 09:35:53,431] Artifact my-portlet:war: Error during artifact deployment. See server log for details. 
```

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-08T09:30:36.357

其实我也面临同样的问题，浪费了很多时间。我意识到实际上这是一个非常愚蠢的错误。您必须更改了 pom 文件并更新了依赖项。但是一旦我们这样做了，maven 依赖项的 jar 文件就会从部署程序集中删除。

您需要做的就是：

*   右键单击项目文件夹。
*   点击属性。
*   单击 Web 部署程序集。
*   检查是否列出了 Maven 依赖项。
*   如果没有点击添加按钮
*   从列表中选择 Maven 依赖项并完成，应用并确定！

希望这能解决您的问题。如果你还有！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T01:52:02.133

ContextLoaderListener 在 org.springframework.web-3.0.4.RELEASE.jar

您提到了一个名为 org.springframework-3.0.4.RELEASE.jar 的文件，这是不同的。

也许你的依赖文件中有错字？

# sql - 使用多个参数搜索

> ID：11647256
> 
> 赞同：0
> 
> 时间：2012-07-25T10:00:12.590
> 
> 标签：sql, sql-server

我想搜索有关订单详细信息的信息。

```
where @SDateMin as ShipDateMin and @SDateMax as ShipDateMax, 
```

ETC..

但是当我执行我的存储过程时，我得到了错误：

> Msg 137, Level 15, State 2, Line 8
> 必须声明标量变量“@spmin”

我的 T-SQL 代码是：

```
ALTER PROC sp_SearchOrderDetails
@FName NVARCHAR(30) = NULL,
@LName NVARCHAR(30)= NULL,
@Status BIT = NULL ,
@SDateMin nvarchar(50) = NULL,
@SDateMax nvarchar(50) = NULL,
@ODateMin nvarchar(50) = NULL,
@ODateMax nvarchar(50) = NULL
AS
BEGIN
 DECLARE @SqlStr NVARCHAR(MAX), 
         @ParamList NVARCHAR(2000)
 SELECT @SqlStr = 'SELECT O.* FROM dbo.OrderDetails O where (1=1)'
 IF @FName IS NOT NULL
    SELECT @SqlStr = @SqlStr + 'AND ( O.FirstName like''%' + @FName + '%'')'
 IF @LName IS NOT NULL
    SELECT @SqlStr = @SqlStr + 'AND ( O.LastName like''%' + @LName + '%'')'
If @SDateMin IS NOT NULL  AND @SDateMax IS NOT NULL
        DECLARE @spmin DATE =  Convert(DATE,@SDateMin,105)
        DECLARE @spmax DATE =  Convert(DATE,@SDateMax,105)
        SELECT @SqlStr = @SqlStr + 'AND ( O.ShipDate BETWEEN @spmin AND @spmax )'   
If @ODateMin IS NOT NULL AND @ODateMax IS NOT NULL
        DECLARE @odmin DATE =  Convert(DATE,@ODateMin,105)
        DECLARE @odmax DATE =  Convert(DATE,@ODateMax,105)
        SELECT @SqlStr = @SqlStr + 'AND ( O.OrderDate BETWEEN @odmin AND  @odmax )'
If @Status IS NOT NULL
    SELECT @SqlStr = @SqlStr + 'AND ( O.ShipStatus = @Status )'
SELECT @ParamList = '
        @FName nvarchar(30),
        @LName nvarchar(30),
        @Status bit,
        @SDateMin nvarchar(50),
        @SDateMax nvarchar(50),
        @ODateMin nvarchar(50),
        @ODateMax nvarchar(50)'
EXEC SP_EXECUTESQL  @SqlStr,
                    @ParamList,
                    @FName,
                    @LName ,
                    @Status,
                    @SDateMin,
                    @SDateMax,
                    @ODateMin,
                    @ODateMax
END 
```

执行：

```
 DECLARE  @return_value int

EXEC    @return_value = [dbo].[sp_SearchOrderDetails]
        @SDateMin = N'10-10-2011',
        @SDateMax = N'10-10-2012'

SELECT  'Return Value' = @return_value

GO

CREATE TABLE [dbo].[OrderDetails](
    [OrderDetailId] [int] IDENTITY(1,1) NOT NULL,
    [CustomerTitle] [nvarchar](5) NOT NULL,
    [FirstName] [nvarchar](18) NOT NULL,
    [LastName] [nvarchar](22) NOT NULL,
    [PhoneNumber] [nvarchar](15) NOT NULL,
    [Email] [nvarchar](30) NOT NULL,
    [Address] [nvarchar](60) NOT NULL,
    [Country] [nvarchar](20) NOT NULL,
    [ShipStatus] [bit] NOT NULL,
    [OrderDate] [datetime] NOT NULL,
    [ShipDate] [datetime] NOT NULL,
    [PaymentProvider] [nvarchar](20) NOT NULL,
    [Deliver] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_OrderDetails] PRIMARY KEY CLUSTERED 
(
    [OrderDetailId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:24:15.780

@ParamList 包含在过程声明中命名的参数，但稍后您会引入另一个类似命名的变量。我还更改了数据类型，因为`convert`s 表明它们实际上是日期。

```
SELECT @ParamList = '
        @FName nvarchar(30),
        @LName nvarchar(30),
        @Status bit,
        @spmin date,
        @spmax date,
        @odmin date,
        @odmax date' 
```

**编辑：**我不明白你最后的评论。要解决您的问题，您需要在 IF 之后将代码包含在一个`begin ... end`块中。

```
ALTER PROC sp_SearchOrderDetails
@FName NVARCHAR(30) = NULL,
@LName NVARCHAR(30)= NULL,
@Status BIT = NULL ,
@SDateMin nvarchar(50) = NULL,
@SDateMax nvarchar(50) = NULL,
@ODateMin nvarchar(50) = NULL,
@ODateMax nvarchar(50) = NULL
AS
BEGIN
 DECLARE @SqlStr NVARCHAR(MAX), 
         @ParamList NVARCHAR(2000)
 SELECT @SqlStr = 'SELECT O.* FROM dbo.OrderDetails O where (1=1)'
 IF @FName IS NOT NULL
    SELECT @SqlStr = @SqlStr + 'AND ( O.FirstName like''%' + @FName + '%'')'
 IF @LName IS NOT NULL
    SELECT @SqlStr = @SqlStr + 'AND ( O.LastName like''%' + @LName + '%'')'
If @SDateMin IS NOT NULL  AND @SDateMax IS NOT NULL
BEGIN
        DECLARE @spmin DATE =  Convert(DATE,@SDateMin,105)
        DECLARE @spmax DATE =  Convert(DATE,@SDateMax,105)
        SELECT @SqlStr = @SqlStr + 'AND ( O.ShipDate BETWEEN @spmin AND @spmax )'   
END
If @ODateMin IS NOT NULL AND @ODateMax IS NOT NULL
BEGIN
        DECLARE @odmin DATE =  Convert(DATE,@ODateMin,105)
        DECLARE @odmax DATE =  Convert(DATE,@ODateMax,105)
        SELECT @SqlStr = @SqlStr + 'AND ( O.OrderDate BETWEEN @odmin AND  @odmax )'
END
If @Status IS NOT NULL
    SELECT @SqlStr = @SqlStr + 'AND ( O.ShipStatus = @Status )'
SELECT @ParamList = '
        @FName nvarchar(30),
        @LName nvarchar(30),
        @Status bit,
        @spmin date,
        @spmax date,
        @odmin date,
        @odmax date'

EXEC SP_EXECUTESQL  @SqlStr,
                    @ParamList,
                    @FName,
                    @LName ,
                    @Status,
                    @spmin,
                    @spmax,
                    @odmin,
                    @odmax
END 
```

我建议即使 if 后面只有一行，你也这样做，因为你永远不知道什么时候必须扩展它，而且那时很容易忘记在新代码周围放置 begin 和 end，因为你正在解决其他问题，而不是校对。

# python - 创建一个以零为中心的白色颜色图

> ID：11647261
> 
> 赞同：7
> 
> 时间：2012-07-25T10:00:30.943
> 
> 标签：python, matplotlib, scipy

我必须承认，了解如何创建或操作 matplotlib 的颜色图并非易事。因此，我正在寻求一些帮助来解释和设置从蓝色（负）到红色（正）并且白色以零为中心的颜色图。然后我想在以下位置使用这个 cmap `contourf`：

1.  这有效，但颜色相反

    ```
    cs = plt.contourf(longrid, latgrid,
                      ar[window-1]-bkgrd, levels,
                      cmap = cm.get_cmap('BuRd', len(levels)-1)) 
    ```

2.  这里的问题是`BuRd_r`带走了零附近的白色

    ```
    cs = plt.contourf(longrid, latgrid,
                      ar[window-1]-bkgrd, levels,
                      cmap = cm.get_cmap('BuRd_r', len(levels)-1)) 
    ```

我将不胜感激。

这是测试颜色图的函数和数据：

```
def PlotAnomalyCF(ar,hgrid,latgrid,longrid,outfile,levels,units):                        
    window = 1                                                                           
    tsize = 8                                                                            
    plt.close()                                                                          
    plt.figure(figsize=(11.7,4.3) )                                                      
    plt.clf()                                                                            
    plt.cla()                                                                            

    bkgrd = bn.nanmean(ar[:],0)

    for v in hgrid:OA                                                                    
        plt.subplot(1,len(hgrid),window)                                                 
        plt.title(v,fontsize=tsize)                                                      
        plt.subplots_adjust(left=0.07,bottom=0.75,                                       
                            right=0.98, top=0.92,                                        
                            wspace=0.12,hspace=0.98)                                     
        cs = plt.contourf(longrid,latgrid,                                               
                          ar[window-1]-bkgrd,levels,                                     
                          cmap=cm.get_cmap('BuRd_r',len(levels)-1))                      
        cs.cmap.set_over('r')                                                            
        plt.grid(True)                                                                   
        plt.axis('off')                                                                  
        window += 1                                                                      
    ax = plt.gca()                                                                       
    pos = ax.get_position()                                                              
    l,b,w,h = pos.bounds                                                                 
    print l,b,w,h                                                                        
    cax = plt.axes([l-0.848,b-0.05,0.91,0.02]) # setup colorbar axes                     
    cbar = plt.colorbar(cs,cax=cax,orientation='horizontal')                             
    cl = plt.getp(cbar.ax, 'xticklabels')                                                
    plt.setp(cl, fontsize=8)
    # Add units text                                                                     
    plt.figtext(0.012,0.83,units,fontsize=tsize+1)                                       
    print 'outfile.',outfile                                                             
    plt.savefig(outfile,dpi=900,orientation='landscape',format='pdf')                    
    plt.show()

# Data
hgrid = array([-18, -15, -12,  -9,  -6,  -3,   0,   3,   6,   9,  12,  15,  18])
latgrid = array([ 5.61402391,  4.91227095,  4.21051798,  3.508765  ,  2.80701201,
                  2.10525902,  1.40350602,  0.70175301,  0\.        , -0.70175302,
                 -1.40350604, -2.10525907, -2.8070121 , -3.50876514, -4.21051818,
                 -4.91227122, -5.61402427])
longrid = array([-5.625   , -4.921875, -4.21875 , -3.515625, -2.8125  , -2.109375,
                 -1.40625 , -0.703125,  0\.      ,  0.703125,  1.40625 ,  2.109375,
                 2.8125  ,  3.515625,  4.21875 ,  4.921875,  5.625   ])
levels = array([-20, -19, -18, -17, -16, -15, -14, -13, -12, -11, -10,  -9,  -8,
                -7,  -6,  -5,  -4,  -3,  -2,  -1,   0,   1,   2,   3,   4,   5,
                 6,   7,   8,   9,  10,  11,  12,  13,  14,  15,  16,  17,  18,
                 19,  20])
units ='$\mathrm{CC_{200}\,[\%]}$'
ar = shape is (13, 17, 17) with max = 82.4 and min = 45.5\. It would be easier to just
     generate some random data within these intervals. Alternatively just copy one of the 
     array:
ar[1] = array([[ 46.91224792,  46.21374984,  46.86130719,  47.01021234,
     46.72626813,  46.2288305 ,  46.43835451,  45.79325437,
     45.58271668,  46.35872217,  48.08725987,  48.44553638,
     47.76519316,  47.6366742 ,  48.40425078,  48.77756577,
     49.33566712],
   [ 46.83599932,  46.84286989,  47.33453309,  46.55030976,
     46.80566458,  46.53292035,  47.02261763,  47.41084421,
     47.38724565,  47.91122826,  49.21117552,  49.45223641,
     49.97629913,  50.44165439,  51.08080398,  50.79600723,  49.968034  ],
   [ 47.42288313,  47.07674124,  46.7167639 ,  46.11959218,
     46.95814111,  46.88763807,  47.79510368,  48.50213272,
     49.14340301,  50.0550682 ,  50.96554707,  51.70960776,
     52.76304827,  53.13428506,  53.01955687,  52.57951586,
     51.91245273],
   [ 47.71067291,  47.48154219,  47.40131211,  47.45929857,
     48.46118424,  48.65199823,  49.38156691,  49.86137507,
     50.55394084,  51.96604309,  52.60579898,  53.69096203,
     54.22750101,  54.37757099,  54.31517398,  53.47697773,
     53.41809044],
   [ 48.20779565,  48.58856851,  48.75880829,  49.40822878,
     50.03355014,  51.44922083,  52.00567831,  52.99485667,
     53.69339127,  53.58208129,  53.88588998,  55.24096208,
     55.24137628,  55.38338399,  55.30856415,  55.0329081 ,
     54.58041914],
   [ 49.20063728,  49.81223264,  50.2145489 ,  50.54749112,
     51.44252761,  53.1708726 ,  54.48141824,  55.1337493 ,
     55.86338227,  55.80719304,  56.1060897 ,  56.15050406,
     56.10404113,  56.82550383,  57.12370494,  56.79250814,
     57.21656741],
   [ 50.17222332,  50.78494993,  51.47036476,  51.78513471,
     54.07329312,  55.12136894,  56.63202678,  56.77587861,
     57.60688855,  57.31874243,  57.86532727,  58.38753463,
     58.52204736,  58.8451274 ,  59.17282185,  58.93137673,
     58.90977463],
   [ 51.50642331,  51.51055372,  52.44746806,  53.37696513,
     54.86775802,  56.68992167,  57.90624404,  58.76394172,
     59.64662899,  59.80540837,  59.98355254,  60.05761821,
     59.95848562,  60.54540623,  60.4776266 ,  60.11749116,
     59.74209418],
   [ 51.40396463,  51.48043239,  52.89530187,  53.73500868,
     55.39612502,  56.70178532,  58.07064267,  59.56644298,
     60.47288049,  60.59095081,  61.26474813,  61.20278944,
     61.43807574,  61.1942828 ,  60.40014922,  59.78371327,
     59.50410992],
   [ 51.89656984,  52.18725649,  52.57764233,  54.39502415,
     55.61672911,  57.04180061,  58.54357871,  59.76354498,
     60.24155861,  60.59473182,  60.65985503,  60.92762915,
     60.76726905,  60.47166256,  60.42044548,  60.04043031,
     60.06031171],
   [ 51.69698671,  52.39494994,  52.71685017,  53.65488505,
     54.52480831,  56.33091376,  57.87811829,  58.36719736,
     59.31479758,  59.61329074,  59.81807224,  59.44053305,
     59.25522337,  59.5309563 ,  59.68850776,  59.54046914,
     58.60604327],
   [ 50.81523448,  51.5690217 ,  51.81382216,  52.88514118,
     53.27394887,  54.6941369 ,  55.81938471,  56.85401174,
     57.10874072,  58.55074569,  58.45869901,  57.67496274,
     57.3895956 ,  58.05319653,  58.83009123,  57.90678384,
     56.97717781],
   [ 49.61355365,  49.92298625,  50.56281781,  51.22117266,
     51.98020374,  53.0328832 ,  53.76602714,  54.94396421,
     55.16849545,  55.83033544,  56.19720112,  56.9382048 ,
     57.20669361,  56.76351885,  56.93632305,  56.16428665,  54.7570241 ],
   [ 49.17250426,  49.14663096,  49.86504335,  50.24394193,
     50.84671744,  51.21785439,  51.72667942,  52.8287256 ,
     53.65550669,  53.81801262,  54.62490542,  54.88045696,
     55.27367041,  54.89234901,  54.51005786,  53.57284022,
     52.53966996],
   [ 48.55125023,  48.99467099,  49.80237362,  49.67943854,
     49.45569362,  49.3387854 ,  50.129718  ,  49.94784906,
     51.03357894,  51.73021167,  52.0211617 ,  52.55805334,
     52.22956095,  51.88844202,  50.87410618,  50.39506101,
     49.72117909],
   [ 48.37551433,  48.30812683,  48.45300884,  48.50818535,
     47.76798967,  47.21965588,  47.60764424,  48.21327283,
     48.52370448,  49.95221655,  49.7608777 ,  50.1178807 ,
     50.15020093,  49.4369175 ,  49.16839811,  49.31254753,
     48.03208233],
   [ 46.91675497,  46.45280928,  46.37122283,  46.69881125,
     45.95493853,  46.33296801,  46.15091804,  46.09862998,
     46.31676066,  46.6199912 ,  47.60040926,  48.34096053,
     47.78005438,  48.0951173 ,  48.15291404,  47.21140107,
     46.28884057]]) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-25T22:26:32.473

我不会使用股票 cmap，而是彻底了解您自己的制作。

正如您已经发现的那样，为了在使用 cmaps 时对颜色进行绝对控制（不传递颜色数组），cmap 中的颜色数应等于级别数 - 1。

我们可以通过以下示例轻松地证明这一点。让我们用三种原色制作一个颜色图：

```
import matplotlib.pyplot as plt
import matplotlib.colors as mcolors
import numpy

data = numpy.arange(12).reshape(3, 4)

cmap = mcolors.ListedColormap([(0, 0, 1), 
                               (0, 1, 0), 
                               (1, 0, 0)]) 
```

但是，当我们将其与 3+1 级别以外的任何级别一起使用时，我们将得到您可能意想不到的结果：

```
plt.subplot(121)
plt.contourf(data, cmap=cmap, levels=[1, 4, 8, 10])

plt.subplot(122)
plt.contourf(data, cmap=cmap, levels=[1, 4, 8])

plt.show() 
```

![在此处输入图像描述](../Images/0635278333e0965120c118e534ce81b9.png)

所以我已经证明你的关卡必须是长度的`n_colors-1`，但是因为我们想要有 3 种颜色，并且总是显示中间颜色，所以我们还必须有偶数个关卡。

好，现在我们有了一些基本规则，让我们制作一个 LinearSegmentedColormap，它本质上只是一个 ListedColormap，插值到 N 个颜色：

```
levs = range(12)
assert len(levs) % 2 == 0, 'N levels must be even.'

cmap = mcolors.LinearSegmentedColormap.from_list(name='red_white_blue', 
                                                 colors =[(0, 0, 1), 
                                                          (1, 1., 1), 
                                                          (1, 0, 0)],
                                                 N=len(levs)-1,
                                                 )
plt.contourf(data, cmap=cmap, levels=levs)
plt.show() 
```

![在此处输入图像描述](../Images/ef360bf911212e6de35f4b28a92b2e6c.png)

我们可以通过编程验证规范化的 cmap 以白色作为中间颜色：

```
>>> print cmap(0.5)
(1.0, 1.0, 1.0, 1.0) 
```

希望这将为您提供所需的所有信息，以便能够制作您喜欢的任何颜色图并在轮廓绘制中成功使用它。

# jquery - Jquery anchor#1.click 更改anchor#2 的href 并单击anchor#2

> ID：11647266
> 
> 赞同：1
> 
> 时间：2012-07-25T10:00:52.970
> 
> 标签：jquery

这里是 senario

我正在使用 CallTo: 协议让系统拨打电话号码。用户可以更改表单上的数字，因此 href 需要更改为 CallTo:xxxx

我想做以下事情：

1.  当单击 CALL 锚点时，它会触发一个功能（好的）
2.  将第二个锚点 href 更改为 CallTo:xxxx (ok)
3.  在第二个锚点上触发点击事件（这是问题所在）

由于某种原因，.click() 事件不会在第二个链接上触发。

我正在使用以下代码进行测试：

```
<head>
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script>
        $(document).ready(function(){
            $("#mobile").click(function(event){
                event.preventDefault();
                $("#calling_clicker").prop("href", "http://www.google.co.uk").click();
            });
        });
    </script>
</head>
<body>
    <a class="butt call-outbound" href="#" id="mobile">Call</a>

    <a href="http://www.bbc.co.uk" id="calling_clicker">bbc</a>
</body> 
```

Firebug 显示链接正在更改，但点击不会触发。

# python - Python 中的 ActiveMQ 监听器

> ID：11647268
> 
> 赞同：3
> 
> 时间：2012-07-25T10:00:56.703
> 
> 标签：python, python-2.7, activemq

我必须在 python 中为 ActiveMQ 编写一个监听器。

是否有任何可用于编写侦听器的 python 包。还有 Stomp/Openwire 协议是什么。当我启动 activemq 时，我看到三个带有协议的 url，即 tcp、ssl、stomp。

任何帮助将不胜感激

**编辑！**：我的另一个问题是假设我们使用 stomp 和 openwire 协议启动代理。假设代理 URL 现在是 tcp://localhost:61616 和 stomp://localhost:61613。所以现在代理正在监听两个不同的端口。我的问题是，如果生产者在 tcp 端口上发布消息，那么该消息会被 stomp 端口上的订阅者消费吗？另外，如果 tcp 和 stomp 上的两个订阅者分别在同一个队列上等待，他们都会收到消息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:43:07.607

对于 python，您可以使用类似[stomppy](http://code.google.com/p/stomppy/)的东西，它可以让您与任何支持 STOMP 的代理进行互操作。ActiveMQ 本身使用自己的 openwire 协议，但也可以使用 STOMP 和 MQTT。您需要添加一个 STOMP TransportConnector，请参阅 ActiveMQ 的[STOMP 页面](http://activemq.apache.org/stomp.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:03:44.940

最后，我使用 STOMP python 来监听 ActiveMQ 代理。PyActiveMq 使用起来很不稳定，因为它不再被维护。

# prototypejs - 使用 Prototype 更改元素的 id？

> ID：11647270
> 
> 赞同：1
> 
> 时间：2012-07-25T10:00:59.110
> 
> 标签：prototypejs

可以说我有一个这样的元素：

```
<input id="options_14_text" type="text" onchange="something()" name="options[14]" value=""> 
```

例如，如何使用 Prototype 将其 id 更改为 options_15_text？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:03:38.487

您可以选择元素，然后更改其`id`属性：

```
​$("options_14_text").id = "options_15_text";​​​​​​​​​​​​​​​​​​​ 
```

或者你可以使用[`writeAttribute`](http://api.prototypejs.org/dom/Element/prototype/writeAttribute/)：

```
​$("options_14_text").writeAttribute("id", "options_15_text");​​​​​​​​​​​​​​​​​​​​​ 
```

这是一个[工作示例](http://jsfiddle.net/jamesallardice/ZxeTe/)。检查 DOM 以查看`id`值是否已更改。

# jquery - CSS Mega Menu - 在页面加载时打开一个选项卡 - jQuery？

> ID：11647271
> 
> 赞同：0
> 
> 时间：2012-07-25T10:01:01.153
> 
> 标签：jquery, css, megamenu

我正在使用[这个](http://themes.pixelworkshop.fr/?theme=CSS3MegaMenu)超级菜单

我想要的是在页面加载时打开一个选项卡（第二个选项卡），而不必先将鼠标悬停在它上面 - 如果悬停另一个选项卡，我仍然需要它更改为其他选项卡内容。我尝试添加：

```
$(document).ready(function() {
    $('ul.menu li.fullwidth:first div.dropdown_fullwidth').css('left','0px');
}); 
```

它使内容保持打开状态，但没有标签悬停状态，当我将鼠标悬停在另一个上时它也没有改变 - 有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:07:07.453

我只是想问你为什么需要弹出这样的下拉菜单？但可能类似的东西可以解决问题：

```
$("li:first div").show() 
```

编辑：

好的，我看到问题很抱歉：

您需要使用悬停 css 并将其应用于具有相同样式的 .select 类的按钮，然后添加：

```
$("li:first a").addClass("selected"); 
```

然后，您必须在翻转任何其他按钮时将其删除：

```
$("li a").hover(function(){
   $("li:first a").removeClass("selected");
}) 
```

老实说，这真的很hacky和可怕，但我不确定是否有其他方法可以在不大量重写CSS的情况下应用它。我个人建议考虑您为什么要这样做，通过考虑您的导航结构来寻找更好的解决方案。

# mongodb - mongodb数组匹配

> ID：11647274
> 
> 赞同：2
> 
> 时间：2012-07-25T10:01:06.717
> 
> 标签：mongodb, mongodb-query

我如何完成以下任务？

```
db.test.save( {a: [1,2,3]} );

db.test.find( {a: [1,2,3,4]} );  //must match because it contains all required values [1, 2, 3]
db.test.find( {a: [1,2]} );  //must NOT match because the required value 3 is missing 
```

我知道 $in 和 $all 但它们的工作方式不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:57:42.390

有趣..问题是.. $in 和 $or 运算符应用于您要与集合中的每个文档进行比较的数组*元素*，而不是文档中数组的元素..总结您的问题：如果集合中的任何文档恰好是传递数组的*子集，您希望它匹配。*除非您交换输入和输出，否则我想不出办法。我的意思是..让我们接受你的第一个输入：

`db.test.find( {a: [1,2,3,4]} );`

考虑把它放在一个临时集合中说，temp 为：

`db.temp.save( {a: [1,2,3,4]} );`

现在迭代测试集合中的每个文档并在 temp 中“找到”它，使用 $all 运算符确保它完全包含，即，做这样的事情：

`foreach(doc in test)
{ db.temp.find( { a: { $all: doc.a } } ); }`

这绝对是一种解决方法！我不确定我是否缺少任何其他可以完成这项工作的操作员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T22:03:31.650

当前没有运算符可以找到具有子集值的文档。有一个改进的建议是添加一个 $subset 运算符。请随时对 JIRA 中的问题进行投票： [https ://jira.mongodb.org/browse/SERVER-974](https://jira.mongodb.org/browse/SERVER-974)

其他可能不适合您的用例的潜在解决方法可能涉及 map reduce 或新的聚合框架（在 MongoDB 版本 2.2 中可用）： [http ://docs.mongodb.org/manual/reference/aggregation/#_S_project](http://docs.mongodb.org/manual/reference/aggregation/#_S_project)

# android - 在 ListView 内滑动手势 - Android

> ID：11647276
> 
> 赞同：1
> 
> 时间：2012-07-25T10:01:07.793
> 
> 标签：android, android-listview, swipe, android-2.1-eclair, viewswitcher

我是安卓新手。我有一个关于如何实现``listView` [这里](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)的教程：

我实现了它，它工作正常。我需要实现一个`ViewSwitcher`相同的。就像我滑动歌曲时一样，我需要一些选项，比如*播放*、*添加到队列*等，

请仔细阅读该教程并提供帮助。我几乎从 3 周起就在苦苦挣扎。

希望有人能帮助我。

**编辑1**：以下代码是主要活动：

```
import java.util.ArrayList;
import java.util.HashMap;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;

import android.view.GestureDetector;
import android.view.GestureDetector.OnGestureListener;
import android.view.MotionEvent;
import android.widget.ViewSwitcher;

public class CustomizedListView extends Activity implements OnGestureListener{
// All static variables
static final String URL = "http://api.androidhive.info/music/music.xml";
// XML node keys
static final String KEY_SONG = "song"; // parent node
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_ARTIST = "artist";
static final String KEY_DURATION = "duration";
static final String KEY_THUMB_URL = "thumb_url";

private ViewSwitcher switcher1;
private GestureDetector gesturedetector = null;
ListView list;
LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML from URL
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_SONG);
    // looping through all song nodes <song>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
        map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
        map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

        // adding HashList to ArrayList
        songsList.add(map);

    }

    list=(ListView)findViewById(R.id.list);

    // Getting adapter by passing xml data ArrayList
    adapter=new LazyAdapter(this, songsList);        
    list.setAdapter(adapter);

    // Click event for single list row
    list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

        }
    });

}   

@Override
public boolean onTouchEvent(MotionEvent event) {
        return gesturedetector.onTouchEvent(event);
}

public boolean onDown(MotionEvent e) {
    // TODO Auto-generated method stub
    return false;
}
int SWIPE_MIN_VELOCITY = 100;
int SWIPE_MIN_DISTANCE = 100;
//Sá»± kiá»‡n khi báº¡n vuá»‘t mÃ n hÃ¬nh Ä‘Æ°a sang má»™t bÃªn nÃ o Ä‘Ã³

public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,float velocityY) {
    //Get Position
    float ev1X = e1.getX();
    float ev2X = e2.getX();

    //Get distance of X (e1) to X (e2)
    final float xdistance = Math.abs(ev1X - ev2X);
    //Get veclocity of cusor
    //Váº­n tá»‘c = sá»‘ Ä‘iá»ƒm áº£nh (px) / giÃ¢y
   final float xvelocity = Math.abs(velocityX);

   //Váº­n tá»‘c chuyá»ƒn Ä‘á»•i X > 100 vÃ  khoáº£ng cÃ¡ch tá»« Ä‘iá»ƒm kÃ©o Ä‘áº§u Ä‘áº¿n Ä‘iá»ƒm kÃ©o cuá»‘i > 100
   if( (xvelocity > SWIPE_MIN_VELOCITY) && (xdistance > SWIPE_MIN_DISTANCE) )
   {
        if(ev1X > ev2X)//Switch Left
        {
            previousView();
        }
        else//Switch Right
        {
            nextView();
        }
   }

    return false;
}

public void onLongPress(MotionEvent e) {

}

public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,float distanceY) {
    return false;
}

public void onShowPress(MotionEvent e) {

}

public boolean onSingleTapUp(MotionEvent e) {
    return false;
}

//Next, Previous Views
private void previousView() {
    switcher1.showPrevious();
}
private void nextView() {
    switcher1.showNext();
} 
```

下面对 XML 文件进行编码。

```
<?xml version="1.0" encoding="utf-8"?>
  <ViewSwitcher xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/viewSwitcher1"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentLeft="true"
     android:layout_alignParentTop="true" >

   <include
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     layout="@layout/list_row_main" />

   <include
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     layout="@layout/list_row_swipe" />

</ViewSwitcher> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T10:08:14.550

据我了解您的问题，您的问题是检测 ListView 中的触摸手势，对吗？

因此，您必须扩展 ListView 并在[onInterceptTouchEvent](http://developer.android.com/reference/android/view/ViewGroup.html#onInterceptTouchEvent%28android.view.MotionEvent%29)方法中检测水平触摸手势。

下面是一个 ListView 的示例，它不会对水平触摸事件做出反应。这些事件将被分派给您的子视图，这实际上是您的列表项视图，它必须捕获这些事件（使用手势侦听器）并触发 ViewSwitcher。

```
public class SampleListView extends ListView {

.
.
.

@Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        switch (ev.getAction()) {
            case MotionEvent.ACTION_DOWN:
                // reset difference values
                mDiffX = 0;
                mDiffY = 0;

                mLastX = ev.getX();
                mLastY = ev.getY();
                break;

            case MotionEvent.ACTION_MOVE:
                final float curX = ev.getX();
                final float curY = ev.getY();
                mDiffX += Math.abs(curX - mLastX);
                mDiffY += Math.abs(curY - mLastY);
                mLastX = curX;
                mLastY = curY;

                // don't intercept event, when user tries to scroll vertically
                if (mDiffX > mDiffY) {
                    return false; // do not react to horizontal touch events, these events will be passed to your list item view
                }
        }

        return super.onInterceptTouchEvent(ev);
    }

.
.
.

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:10:46.780

你可以用`motionevent`它来做。你只需要追踪速度。

例如。

```
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
        float velocityY) {
    // TODO Auto-generated method stub
       try {
           if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
               return false;
           // right to left swipe
           if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {                  
              Toast.makeText(getApplicationContext(), "Left Swipe", 
              Toast.LENGTH_SHORT).show();                  
            } 
```

# php - 使用 OR 运算符从关键字中检索匹配字段的 SQL 查询

> ID：11647278
> 
> 赞同：0
> 
> 时间：2012-07-25T10:01:14.873
> 
> 标签：php, mysql, sql

我不知道如何解决这种情况。问题在于我用来从 zip_codes 表中检索位置的 OR 运算符。例如，如果有人只输入“NY”作为输入，我只想检索这个字段。

表数据是这样的：

```
+------+-------+--------------------------------------+
| zip  | state | city                                 |
+------+-------+--------------------------------------+
| 12345| NY    | Schenectady                          |
+------+-------+--------------------------------------+ 
```

例如，可能的输入是“NY”，所以我的查询如下所示：

```
SELECT zip, state, city 
  FROM zip_codes 
 WHERE name = 'NY' 
    OR zip = 'NY' 
    OR city ='NY' 
 LIMIT 1 
```

在上述情况下，我只想检索字段状态，因为这意味着用户仅将状态设置为参考。如果他们输入“Schenectady” - 城市字段，如果他们输入“12345” - 只是邮政编码字段等。

是的，我可以从一堆 if 中在 PHP 中设置它，但也许是一些我不知道的 SQL 查询

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T10:06:02.040

```
select *, case when zip = 'NY' 
               then 'zip'
               when name = 'NY' 
               then 'name'
               when city = 'NY' 
               then 'city'
          end as found
from zip_codes
where 'NY' in (name, zip, city)
limit 1 
```

# css - 格式化 YML 文件中的字符串

> ID：11647280
> 
> 赞同：0
> 
> 时间：2012-07-25T10:01:22.563
> 
> 标签：css, ruby-on-rails, ruby, locale, yaml

1.  我使用 YML 文件进行语言转换，但我不知道如何格式化该文件中的文本。例如，如果我说

    `#fourthScreenFive: "В this is string 1 \n this is string 2"`

`\n`不起作用。有谁知道我怎么能做到这一点？

1.  我还希望能够使一些字符串居中，然后 /t 或任何其他命令都不起作用。有人有任何文件吗？

我发现了这个：[http](http://www.yaml.org/YAML_for_ruby.html#three_trailing_newlines_in_literals) ://www.yaml.org/YAML_for_ruby.html#three_trailing_newlines_in_literals但它没有太多关于已经是字符串“”的字符串的信息。

```
 fourthScreenSeven: |+     
                 Оно оказалось настолько вкусным что с тех,      
                 пор мы никогда не меняли рецепт 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:16:11.520

要使用 YAML 在字符串中添加额外的行，您可以使用这样的 yaml：

```
fourthScreenSeven: |
  Оно оказалось настолько вкусным что с тех,
  пор мы никогда не меняли рецепт

fourthScreenFive: |
  В this is string 1
  this is string 2 
```

使用以下红宝石代码：

```
p YAML.load(IO.read('yaml.yml')) 
```

你会得到这样的结果：

```
{"fourthScreenSeven"=>
    "Оно оказалось настолько вкусным что с тех,\nпор мы никогда не меняли рецепт\n",
    "fourthScreenFive"=>"В this is string 1\nthis is string 2\n"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-10T09:38:36.390

我正在 Visual Studio Code 中处理 YAML 文件，我发现我可以使用 \n\r 获得换行符，但前提是字符串在引号中。所以像这样：

"В 这是字符串 1 \n\r 这是字符串 2"

# mysql - 如何使用 Mysqldump 更改 Postgres 格式的单引号转义？

> ID：11647281
> 
> 赞同：2
> 
> 时间：2012-07-25T10:01:25.813
> 
> 标签：mysql, sql, postgresql, mysqldump

我使用 mysqldump 保存表中的数据并将其移动到 Postgres db。
我用以下方式转储：

```
mysqldump --complete-insert --no-create-info --no-create-db --compatible=postgresql -uroot -p music files > music_files.sql 
```

但是在做的时候`psql`：

```
=> \i music_files.sql 
```

有这个错误：

```
music_files.sql:29: ERROR:  syntax error at or near "s"
LINE 1: ...,5,'Impossible',NULL),(33,4103,178,841,198,'Tifa\'s Theme [P... 
```

Postgres 不理解这种转义。它需要 2 个引号`''`之前`s`
我如何使用 mysqldump 来制作它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T10:28:08.910

您可以在`psql`外壳中使用它：

```
=> set backslash_quote = on;
=> set standard_conforming_strings = off;
=> select 'foo\'bar';
 ?column? 
----------
 foo'bar
=> \i ...whatever... 
```

不要通过在某些配置文件或其他方式中设置它*来*使其持久化，`ALTER USER`因为这可能与安全相关。

# c# - 在winform中将一个控件拖放到另一个控件

> ID：11647286
> 
> 赞同：1
> 
> 时间：2012-07-25T10:01:42.283
> 
> 标签：c#, winforms, drag-and-drop

我正在做一些非常非常简单的事情。

我有一个列表框，其事件设置如下：

```
 public Form1()
    {
        InitializeComponent();
        this.listBox1.AllowDrop = true;
        this.listBox1.DragEnter += new DragEventHandler(listBox1_DragEnter);
        this.listBox1.DragDrop += new DragEventHandler(listBox1_DragDrop);
    }

    void listBox1_DragDrop(object sender, DragEventArgs e)
    {
       //code to add labelText to Items of ListBox
    }

    void listBox1_DragEnter(object sender, DragEventArgs e)
    {
        //set DragDropEffects;
    } 
```

现在我有一个标签，代码如下：

```
 private void label1_MouseDown(object sender, MouseEventArgs e)
    {
        DoDragDrop((sender as Label).Text, DragDropEffects.Copy);
        //this.label1.DoDragDrop((sender as Label).Text, DragDropEffects.Copy);
        //used one of them at a time.

    } 
```

但什么也没发生。列表框 DragEnter 事件永远不会触发。事实上，阻力永远不会发生。每当我尝试拖动标签（文本）时，出现不允许的 windows 光标，而不是`DragDropEffects.Copy`' 的光标

拖放不会发生..

当我修改列表框（和相关代码）以接受要从任何其他窗口拖放到其上的文件时，效果很好。

所以..我无法从保持在表单上的控件拖动到保持在同一表单上的另一个控件。

我错过了什么吗？我正在运行 Windows XP。

我经历了[这个](http://codebetter.com/petervanooijen/2007/07/07/basic-drag-and-drop-in-winforms/)，经历了[这个](https://stackoverflow.com/questions/68598/how-do-i-drag-and-drop-files-into-a-c-sharp-application)

请帮忙...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:11:49.563

Your code does work actually. You just have to set the right drag effects in your event handlers.

```
void listBox1_DragDrop(object sender, DragEventArgs e)
{
  e.Effect = DragDropEffects.Copy;
}

void listBox1_DragEnter(object sender, DragEventArgs e)
{
  e.Effect = DragDropEffects.Copy;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T10:05:59.240

检查 ListBox.AllowDrop 是否设置为 TRUE

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-05T00:22:03.700

以下是您需要的示例以及所有代码（将其添加到此处以供找到此帖子的人使用）。

```
#region Initial Values
//Constructor:
public Form1() {
   InitializeComponent();
}

private void Form1_Load( object sender, EventArgs e ) {
   InitialValues();
}

private void InitialValues() {
   PrepareDragAndDrop();
}
#endregion Initial Values

#region Drag & Drop

private void PrepareDragAndDrop() {
   //For the object that receives the other dragged element:
   TheSamplListBox.AllowDrop = true;
   TheSamplListBox.DragEnter += TheSamplListBox_DragEnter;
   TheSamplListBox.DragLeave += TheSamplListBox_DragLeave;
   TheSamplListBox.DragDrop  += TheSamplListBox_DragDrop;

   //For the object that will be dragged:
   TheSampleLabel.MouseDown += ( sender, args ) => DoDragDrop( TheSampleLabel.Text, DragDropEffects.Copy );
}

private void TheSamplListBox_DragEnter( object theReceiver, DragEventArgs theEventData ) {
   theEventData.Effect = DragDropEffects.Copy;

   //Only the code above is strictly for the Drag & Drop. The following is for user feedback:
   //You can use [TheSamplListBox] but this approach allows for multiple receivers of the same type:
   var theReceiverListBox = (ListBox) theReceiver;

   theReceiverListBox.BackColor = Color.LightSteelBlue;
}

private void TheSamplListBox_DragLeave( object theReceiver, EventArgs theEventData ) {
   //No code here for the Drag & Drop. The following is for user feedback:
   //You can use [TheSamplListBox] but this approach allows for multiple receivers of the same type:
   var theReceiverListBox = (ListBox) theReceiver;

   theReceiverListBox.BackColor = Color.White;
}

private void TheSamplListBox_DragDrop( object theReceiver, DragEventArgs theEventData ) {
   //You can use [TheSamplListBox] but this approach allows for multiple receivers of the same type:
   var theReceiverListBox = (ListBox) theReceiver;

   //Get the data being dropped. In this case, a string:
   var theStringBeingDropped = theEventData.Data.GetData( "System.String" );

   //Add the string to the ListBox:
   theReceiverListBox.Items.Add( theStringBeingDropped );

   //Only the code above is strictly for the Drag & Drop. The following is for user feedback:
   theReceiverListBox.BackColor = Color.White;
}
#endregion Drag & Drop 
```

.

# jquery - jQuery prettyPhoto - 为灯箱设置最大高度和宽度

> ID：11647291
> 
> 赞同：0
> 
> 时间：2012-07-25T10:02:03.183
> 
> 标签：jquery, prettyphoto, css

我已经安装了 Pretty Photo jQuery 插件，但我需要设置灯箱的最小和最大高度和宽度，但似乎无法让它工作。

我尝试更改`prettyPhoto.css`文件但没有运气，我尝试查看`prettyPhoto.js`文件但无法确定尺寸的实际设置方式！？

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-24T15:55:12.593

```
 $(document).ready(function(){
      $("a[rel^='prettyPhoto']").prettyPhoto({
        allow_resize: true, /* Resize the photos bigger than viewport. true/false */
        default_width: 500,
        default_height: 344,
        horizontal_padding: 20
      });
    }); 
```

[固定漂亮照片中的窗口大小](https://stackoverflow.com/questions/6469214/fixed-window-size-in-prettyphoto)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T05:22:54.577

在 PrettyPhoto.css 文件中查找 div.pp_pic_holder并使用 Ex`/css/prettyPhoto.css` 应用所需的宽度。`!important``width: 825px !important;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T17:40:54.607

[这](http://forums.no-margin-for-errors.com/discussion/2013/is-there-a-way-to-define-minimum-width/p1)是您的问题的可能解决方法。这是对我帮助最大的。

# vba - XMLHTTP.send 请求带回“Nothing”

> ID：11647297
> 
> 赞同：2
> 
> 时间：2012-07-25T10:02:25.460
> 
> 标签：vba, excel, excel-2010

我有一个电子表格，其中包含数百个指向可以通过网络访问的服务器（具有身份验证）的链接。我一直在寻找电子表格中链接检查器的解决方案，它会告诉我哪些链接已损坏，哪些链接正常。破碎是指该网站根本没有被调用。

我在网上找到了各种解决方案，但没有一个对我有用。我对此感到困惑...

我尝试使用并弄清楚的一个示例在下面重新发布。

当我逐步浏览代码时，我开始意识到该`oHTTP.send`请求带回了“Nothing”。它对电子表格中的所有链接都这样做，无论链接是否有效。

```
Public Function CheckHyperlink(ByVal strUrl As String) As Boolean

    Dim oHttp As New MSXML2.XMLHTTP30

    On Error GoTo ErrorHandler
    oHttp.Open "HEAD", strUrl, False
    oHttp.send

    If Not oHttp.Status = 200 Then CheckHyperlink = False Else CheckHyperlink = True

    Exit Function

ErrorHandler:
    CheckHyperlink = False
End Function 
```

非常感谢任何关于可能是错误或正确的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:42:11.067

几个可能的原因..

1.  你的意思是`oHttp.Open "GET", strUrl, False`代替`oHttp.Open "HEAD", strUrl, False`？
2.  也许 MSXML2.XMLHTTP30 不可用？您可以将 MSXML2.XMLHTTPX 的实例声明为早期绑定或后期绑定，这可能会影响您要使用的版本与可用的版本（例如[http://word.mvps.org/FAQs/InterDev/EarlyvsLateBinding.htm](http://word.mvps.org/FAQs/InterDev/EarlyvsLateBinding.htm)）

例如

```
Option Explicit

'Dim oHTTPEB As New XMLHTTP30 'For early binding enable reference Microsoft XML, v3.0
Dim oHTTPEB As New XMLHTTP60 'For early binding enable reference Microsoft XML, v6.0

Sub Test()
Dim chk1 As Boolean
Dim chk2 As Boolean

 chk1 = CheckHyperlinkLB("http://stackoverflow.com/questions/11647297/xmlhttp-send-request-brings-back-nothing")

 chk2 = CheckHyperlinkEB("http://stackoverflow.com/questions/11647297/xmlhttp-send-request-brings-back-nothing")

End Sub

Public Function CheckHyperlinkLB(ByVal strUrl As String) As Boolean
Dim oHTTPLB As Object

'late bound declaration of MSXML2.XMLHTTP30
    Set oHTTPLB = CreateObject("Msxml2.XMLHTTP.3.0")

    On Error GoTo ErrorHandler
    oHTTPLB.Open "GET", strUrl, False
    oHTTPLB.send

    If Not oHTTPLB.Status = 200 Then CheckHyperlinkLB = False Else CheckHyperlinkLB = True

    Set oHTTPLB = Nothing
    Exit Function

ErrorHandler:
    Set oHTTPLB = Nothing
    CheckHyperlinkLB = False
End Function

Public Function CheckHyperlinkEB(ByVal strUrl As String) As Boolean
'early bound declaration of MSXML2.XMLHTTP60

    On Error GoTo ErrorHandler
    oHTTPEB.Open "GET", strUrl, False
    oHTTPEB.send

    If Not oHTTPEB.Status = 200 Then CheckHyperlinkEB = False Else CheckHyperlinkEB = True

    Set oHTTPEB = Nothing
    Exit Function

ErrorHandler:
    Set oHTTPEB = Nothing
    CheckHyperlinkEB = False
End Function 
```

**编辑：**

我通过在浏览器中打开来测试 OP 的链接，现在我发现它重定向到登录页面，所以它是我正在测试的不同链接。它可能会失败，因为 oHttp 对象尚未设置为允许重定向。我知道可以使用下面的代码为 WinHttp.WinHttpRequest.5.1 设置重定向。我需要调查这是否也适用于 MSXML2.XMLHTTP30。

```
Option Explicit

Sub Test()
Dim chk1 As Boolean

 chk1 = CheckHyperlink("http://portal.emilfrey.ch/portal/page/portal/toyota/30_after_sales/20_ersatzteile%20und%20zubeh%C3%B6r/10_zubeh%C3%B6r/10_produktbezogene%20informationen/10_aussen/10_felgen/10_asa-pr%C3%BCfberichte/iq/tab1357333/iq%20016660.pdf")

End Sub

Public Function CheckHyperlink(ByVal strUrl As String) As Boolean
Dim GetHeader As String

    Const WinHttpRequestOption_EnableRedirects = 6
    Dim oHttp As Object

    Set oHttp = CreateObject("WinHttp.WinHttpRequest.5.1")

    On Error GoTo ErrorHandler
    oHttp.Option(WinHttpRequestOption_EnableRedirects) = True
    oHttp.Open "HEAD", strUrl, False
    oHttp.send

    If Not oHttp.Status = 200 Then
        CheckHyperlink = False
    Else
        GetHeader = oHttp.getAllResponseHeaders()
        CheckHyperlink = True

    End If

    Exit Function

ErrorHandler:
    CheckHyperlink = False
End Function 
```

**编辑2：**

MSXML2.XMLHTTP 确实允许重定向（尽管我相信 MSXML2.ServerXMLHTTP 不允许）。允许/禁止重定向取决于重定向是跨域、跨端口等（请参阅此处的详细信息[http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx) )

由于重定向到登录页面是跨域的，因此实现了 IE 区域策略。打开 IE/工具/Internet 选项/安全/自定义级别并将“跨域访问数据源”更改为启用

原始 OP 的代码现在将正确重定向。

# sql - Java.sql.Date 到 Oracle 数据库日期和时间戳

> ID：11647301
> 
> 赞同：3
> 
> 时间：2012-07-25T10:02:30.863
> 
> 标签：sql, spring, date, jdbc

我正在使用 Spring JDBC 模板进行 jdbc 操作。由于我使用的是 BeanPropertySqlParameterSource，因此 bean 的 START_TIME 变量被分配了 java.sql.date 类型。在 Oracle db 中，该列被称为“DATE”类型（并且没有 TIMESTAMP 类型，即使 db 是 10.2 版本）

现在当我设置

```
bean.setStartTime(new Date(System.currentTime()) 
```

它存储日期和时间戳为 00:00:00

请告诉我如何存储时间戳。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T10:04:32.600

你需要使用`java.sql.Timestamp`

```
 bean.setStartTime(new java.sql.Timestamp(...)) 
```

`java.sql.Date`删除时间部分

[来自 Javadocs：](http://docs.oracle.com/javase/6/docs/api/java/sql/Date.html)

> *为了符合 SQL DATE 的定义，由 java.sql.Date 实例包装的毫秒值必须通过在实例关联的特定时区中将小时、分钟、秒和毫秒设置为零来“规范化” .*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T13:32:21.470

```
java.util.Date today = new java.util.Date();
java.sql.Date d=new java.sql.Date(today.getTime()); 
```

# .net - 有没有简单的方法来等待（一段时间）而不冻结应用程序？

> ID：11647302
> 
> 赞同：1
> 
> 时间：2012-07-25T10:02:36.997
> 
> 标签：.net, timer

现在我有

```
 if blocker then 
        Thread.Sleep(5000)
        do something 
```

它在 while 循环中运行，所以我的整个应用程序都被冻结了。在主应用程序线程中做一些事情对我来说也很重要，所以这就是我不创建新线程的原因。

我认为我需要创建临时计时器，添加经过的事件，处理它然后做一些事情，但我只想知道是否有一些简单的解决方案，我不需要“重新发明自行车”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:12:57.953

我会做这样的事情：

```
 private static Timer _timer;

    static void Main(string[] args)
    {
        _timer = new Timer();
        _timer.Elapsed += TimeEvent;
        _timer.Interval = 5000; 
        _timer.Start(); 

        while (Console.Read() != 'q')
        {
            ;     
        }
    }

    public static void TimeEvent(object source, ElapsedEventArgs e)
    {
        Console.Write("Time event!");
        _timer.Stop();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:15:16.790

您不必重新发明轮子：

```
// create a timer that waits 10 seconds and start it
Timer timer = new Timer(10 * 1000);
timer.Elapsed += this.TimerElapsed;
timer.Start(); 

public void TimerElapsed(object o, ElapsedEventArgs args)
{
    MessageBox.Show("Timer has elapsed");  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:09:50.023

您可以开设一个课程，您可以将问题传递给该课程。并通过线程调用它的方法。在该类中，您可以制作事件，因此当该类完成其工作时，它将引发一个事件，您的应用程序将知道该工作已完成。

# sql - Powershell Get-QADUser 结果到 SQL 表

> ID：11647305
> 
> 赞同：3
> 
> 时间：2012-07-25T10:02:50.723
> 
> 标签：sql, powershell, pipe

我正在使用一个字符串查询 Active Directory，该字符串遍历我们系统中的每个域控制器并返回一组结果。该脚本适用于 export-csv，但因为我们希望保留自定义信息字段中的所有数据（它包含回车符），所以我想将其直接导出到 SQL 表中。

Powershell 报告的错误内容如下：

> 使用“0”参数调用“ExecuteNonQuery”的异常：“插入错误：列名或>提供的值的数量与表定义不匹配。”

这是一个非常冗长的响应，我创建并命名了每个表的列以完全匹配 get-object 的输出。

这是管道的输出：

```
SamAccountName     : testuser
DisplayName        : Test User (COMPANY)
info               : Test Entry 1234567890

                 Test for output.
                 Entering

                 Multiple lines.
whenCreated        : 09/11/2004 09:08:42
whenChanged        : 19/07/2012 09:25:21
AccountExpires     :
pwdLastSet         : 13/06/2012 07:43:43
LastLogonTimestamp : 18/07/2012 15:38:35
userAccountControl : 512
Name               : Test User
LastLogon          :
DC                 : DCNAME1 
```

这是代码：

```
##--AD data output to SQL script, you need the Quest plugin!

$SamAccountName = Read-Host "Enter the username to query for last logon"

##--Query domain for all domain controllers and funnel into a forEach loop

Get-QADComputer -ComputerRole DomainController | Foreach-Object{
$dc = $_.Name

##--Query each domain controller for the user object and retrieve the LastLogon timestamp

$user = Get-QADUser -Service $dc  -SamAccountName $SamAccountName -IncludedProperties info,pwdLastSet,AccountExpires,userAccountControl | Select-Object SamAccountName,displayName,info,whenCreated,whenChanged,accountExpires,pwdLastSet,lastLogonTimestamp,userAccountControl,name,LastLogon,@{n='DC';e={$dc}} |

out-host

##--Open database connection

$conn = New-Object System.Data.SqlClient.SqlConnection("Data Source=SQLSERVER; Initial Catalog=ADomain; Integrated Security=SSPI")
$conn.Open()

##--AAGH! How to grab the results of the Select-Object above?

$cmd = $conn.CreateCommand()
$cmd.CommandText ="INSERT extract VALUES ('$user')"
$cmd.ExecuteNonQuery()

##--Don't forget to close it!

$conn.Close() 
```

现在我搞砸了一些可能很明显的事情，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:54:08.513

假设以下测试对象：

```
$exampleObject = New-Object PSObject -Property @{SamAccountName="TestSAN";DisplayName="TestDN"}

$user = $exampleObject | Select-Object SamAccountName, DisplayName

##--AAGH! How to grab the results of the Select-Object above?
$commandText = "INSERT extract VALUES ('$($user.SamAccountName)','$($user.DisplayName)'" 
```

我还将 sql connect 和 close 移到循环外部并将其放在 try/finally 块中，因此它只执行一次，而不是每个 DC 条目，并且在执行期间出现异常时仍会调用 Close的 try 块。有关在Powershell 中使用 try/catch/finally 块的参考信息，请参见[此处。](http://blogs.technet.com/b/heyscriptingguy/archive/2010/03/11/hey-scripting-guy-march-11-2010.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:05:57.283

这里我使用的是 SqlServerCmdletSnapin，它是 Invoke-sqlcmd。此脚本使用 MSSQL 数据库 EMPLOYEE 和表 EMPLOYEE_DOMAIN。希望能帮助到你。对我来说很好..

```
Add-PSSnapin Quest.ActiveRoles.ADManagement
Add-PSSnapin SqlServerCmdletSnapin100
Add-PSSnapin SqlServerProviderSnapin100

$db_server = "10.3.18.55"
$db = "EMPLOYEE"
$table = "EMPLOYEE_DOMAIN"
$username = "import"
$pwd = "Okinawa84561"

# First, clear existing table
$sql_query_del = "DELETE FROM $table"
Invoke-Sqlcmd -ServerInstance $db_server -Database $db -Username $username -Password $pwd -Query $sql_query_del

# Get users with employeeID only and write their accountname and employeeID to DB
Get-QADUser -IncludeAllProperties | ? {$_.employeeID} | select sAMAccountName, employeeID | foreach {
    $an = $_.sAMAccountName
    $eid = $_.employeeID
    Write-Host " sAMAccountName : $an       employeeID : $eid"

    $sql_query = "INSERT INTO $table (employeeID, domainName) VALUES ('$eid', '$an')"
    Invoke-Sqlcmd -ServerInstance $db_server -Database $db -Username $username -Password $pwd -Query $sql_query

} 
```

# python - Python - 读取/解析二进制文件

> ID：11647306
> 
> 赞同：2
> 
> 时间：2012-07-25T10:02:50.620
> 
> 标签：python, struct, numpy, binaryfiles

我有 .dat 文件，我试图在 python 中读取。文件格式为：

```
1.1 CDR description1 
Field   length(bytes)   Offset 
x   4            0
x1  2            4
x2  1            6
x3  1            7
......
......
......
x4  16          210 
x5  4           226 
x6  70          230
Total length of information     300 
```

这些是 CDR 记录，我正在尝试使用该`struct`模块进行读取，但我不明白如何将它与我的特定文件格式一起使用...有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:36:45.607

您需要知道每个字段中存储了什么*样*`struct`的信息，以便模块理解每个字段。

例如，偏移量 0 处的第一个字段是 4 个字节长，这意味着它可以是一个`int`（范围从 -2,147,483,648 到 +2,147,483,647），也可以是一个`unsigned int`替代（范围从 0 到 4,294,967,295）。它也可以是单精度浮点数。

您可能还需要弄清楚文件格式的[字节顺序。](https://en.wikipedia.org/wiki/Endianness)如果没有明确命名，您需要进行一些试验，或者从上下文推断它会是什么（例如，Windows 文件格式几乎总是小端序）。

如果您只想解压缩前 4 个值，则读取正确的字节数（格式为 8）并将其`struct.unpack`与一组格式化字符一起传递给函数，以告知 struct 预期的类型。如果我们假设 little-endian 数据，并且前四个字段分别代表一个 unsigned int、一个 unsigned short 和两个 unsigned char，那么您将使用：

```
with open('something.cdr', 'rb') as data:
    x, x1, x2, x3 = struct.unpack('<IH2B', data.read(8)) 
```

# c++ - 为什么这个程序的输出在 C 和 C++ 之间不同？

> ID：11647309
> 
> 赞同：21
> 
> 时间：2012-07-25T10:02:58.043
> 
> 标签：c++, c, gcc, g++

> **可能重复：**
> [C/C++ 中字符（'a'）的大小](https://stackoverflow.com/questions/2172943/size-of-character-a-in-c-c)

以下程序

```
#include <stdio.h>

int main()
{
    printf("%d\n", sizeof('\0'));
    printf("%d\n", sizeof(0));
} 
```

使用 gcc 输出编译

```
4
4 
```

和 g++

```
1
4 
```

为什么会这样？我知道这不是编译器的问题，而是 C 和 C++ 之间的区别，但原因是什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-25T10:10:02.240

在 C 中，字符常量**的类型`int`**符合标准的 6.4.4.4(10)，

> 整数字符常量的类型为 int。包含映射到单字节执行字符的单个字符的整数字符常量的值是被解释为整数的映射字符表示的数值。

因此，您打印出`int`两倍的大小。

在 C++ 中，字符常量的类型为`char`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-25T10:05:45.957

字符文字在 C中`\0`被视为 a `int`，因此您实际上最终打印`sizeof(int)`而不是`sizeof(char)`.

`ideone`给出相同的结果（[C](http://ideone.com/e4G6k)，[C++](http://ideone.com/F1CKS)）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-25T10:06:30.633

在 C 中，字符文字是整数。在 C++ 中，它们是字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T16:54:07.307

输出已经依赖于编译器，因为您`size_t`为此使用了错误的格式说明符`%zu`。`size_t`在比这更宽的64 位系统上，`int`可能会给您带来任何类型的垃圾。

否则，此舒尔依赖于编译器。您尝试打印大小的两个值都`int`在 C 和`char`C `int`++ 中。所以在 C 中，这通常应该给你`4 4`or`8 8`和在 C++ 中`1 4`或`1 8`.

# javascript - 我如何使用 jquery 读取简单的 json 结果以及如何发布新的

> ID：11647314
> 
> 赞同：0
> 
> 时间：2012-07-25T10:03:06.340
> 
> 标签：javascript, jquery, json, wcf

我构建了一个生成 JSON 的 WCF 服务。我想制作一个使用此网络服务的外部网站。现在我正在通过 IIS 通过 LAN 执行 WCF 服务，因此我可以通过访问[http://myownaddress/blabla.svc/连接到该服务](http://myownaddress/blabla.svc/)

我试图学习一些 json 并从我的服务中获得一些结果。

例如，如果我想使用这种方法：

```
 [OperationContract]
        [WebInvoke(Method = "GET",
            ResponseFormat = WebMessageFormat.Json,
            BodyStyle = WebMessageBodyStyle.Wrapped,
            UriTemplate = "json/{id}")]
        string JSONData(string id); 
```

我会去[http://myownaddress/blabla.svc/json/123](http://myownaddress/blabla.svc/json/123) 结果我得到： {"JSONDataResult":"You requested product 123"}

现在我尝试使用 JQuery 语句 getJSON 接收这个结果。但我没有看到任何结果。

我的问题是我怎样才能得到这个简单的数据？

其次，如何将数据（使用 javascript）发布回 wcf 服务，是否也可以使用 json？

-编辑-：

我现在已经更新了我的代码并将其放入我的文档就绪函数中，该函数位于`<head> <script>`我页面上的 .... 之间：

```
$.getJSON(
           'http://myownaddress/blabla.svc',
            function(data) 
            {
               alert(data.JSONDataResult);
            }); 
```

但这不会给出结果警报。它甚至不发出警报。除此之外，在函数中我需要提供一个 id 参数，例如 123（请参阅上面的文本）我是否也需要将它放入函数中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:12:59.577

To get data use `getJSON()`:

```
$.getJSON(
    'http://myownaddress/blabla.svc/',
    function(data) {
        alert(data.JSONDataResult);
    }
); 
```

To post data you can use [this](http://api.jquery.com/jQuery.post/):

```
$.post('http://myownaddress/postservice.svc', function(data) {
  $('.result').html(data);
}); 
```

or [this](http://api.jquery.com/jQuery.ajax/) (if you need more control):

```
$.ajax({
  type: 'POST',
  url: url,
  data: data,
  success: success,
  dataType: dataType
}); 
```

You can also use the ajax for getting the data instead of the `getJSON` method .

**UPDATE:**

try using ajax method as it gives you more control:

```
 $.ajax({
      type: 'GET',
      url: "http://myownaddress/blabla.svc/json/123",
      success: function(data){alert(data)},
      dataType: "json",
      complete: function(data){alert(data)},
      error: function(jqXHR, textStatus, errorThrown){alert(errorThrown)}
    }); 
```

Also, if you use firefox, check out [firebug](http://getfirebug.com/) extension, it will help you greatly. If you use chrome then use [chrome developer tools](https://developers.google.com/chrome-developer-tools/docs/overview).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:21:20.010

为了让您使用 Jquery 从网站外部的 WCF 服务获取 json 数据，您需要使用 JSONP。

您可以执行如下所示的调用：

```
$.ajax({
                        url: "http://myownaddress/blabla.svc/",
                        dataType: "jsonp",
                        type: "GET",
                        timeout: 10000,
                        data: null,
                        jsonpCallback: "MyCallback",
                        success: function (data, textStatus, jqXHR) {                           
                            alert(action.toLowerCase());
                        },
                        error: function (jqXHR, textStatus, errorThrown) {alert('error is:' + errorThrown);
                        },
                        complete: function (jqXHR, textStatus) {alert('complete');
                        }
                    }); 
```

当您想使用 Javascript 执行跨域调用时，使用 JSONP。

此外，您的 WCF 服务应该兼容处理 JSONP 调用，方法是使用 URL 中指定的回调方法将结果注入响应流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T11:23:15.817

你为什么改变你的网址？

$.getJSON('http://myownaddress/blabla.svc' ==> 'http://myownaddress/blabla.svc/123', function(data) { alert(data.JSONDataResult); });

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T10:07:35.493

你有这样的代码吗？

```
$.getJSON(
    'http://myownaddress/blabla.svc/',
    function(result) {
        alert(result.JSONDataResult);
    }
); 
```

记住`getJSON`不会立即返回数据，你必须在回调函数中使用结果。

# iphone - 我如何将我的 xml 文件放在 iPhone 的 url 中

> ID：11647320
> 
> 赞同：0
> 
> 时间：2012-07-25T10:03:31.607
> 
> 标签：iphone

我正在开发一个 XCAP 应用程序。在我的应用程序中，我正在开发一个 xml 文件。我的问题是这个 xml 文件，我想放置一个 url。任何人都可以帮助我吗？预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:08:27.040

您可以将 xml 文件添加到您的应用程序资源中。

然后使用

> ```
> NSString *path = [[NSBundle mainBundle] pathForResource:@"myXmlFile" ofType:@"xml"];
> //here is ur URL
> NSURL *url = [NSURL URLWithString:path]; 
> ```

# android - 在地图视图中设置位置

> ID：11647328
> 
> 赞同：0
> 
> 时间：2012-07-25T10:04:01.537
> 
> 标签：android

我正在使用地图视图，我想要标记所有前任。我附近的星巴克。但我不知道该怎么做。现在我能做的就是查看我当前的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:11:39.783

Use ItemizedOverlay to display multiple markers in android, to understand how itemized overlay works, and what it is refer following links, and tutorials:

[https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/ItemizedOverlay](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/ItemizedOverlay)

[http://android-coding.blogspot.in/2011/06/using-itemizedoverlay-to-add-marker-on.html](http://android-coding.blogspot.in/2011/06/using-itemizedoverlay-to-add-marker-on.html)

[https://github.com/commonsguy/cw-advandroid/tree/master/Maps/ILuvNooYawk/](https://github.com/commonsguy/cw-advandroid/tree/master/Maps/ILuvNooYawk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:13:57.243

Try this

```
public class MyMap extends MapActivity{

    MapView mapView;
    MapController mapController;

    /* positon */
    double latitude = Your latitude; 
    double longitude = Your longitude;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.YourLayout);

        mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
        mapView.setSatellite(true);

        mapController = mapView.getController();
        mapController.setZoom(8); 
        GeoPoint pointRabat = new GeoPoint(microDegres(latitude),
                microDegres(longitude));
        mapController.setCenter(pointRabat);
    }

    private int microDegres(double value) {
        return (int) (value * 1000000);
    }

@Override
    protected boolean isRouteDisplayed() {
        return false;
    }

} 
```

for add overlay

```
public void onLocationChanged(Location loc) {
        // TODO Auto-generated method stub
       GeoPoint pointRabat = new GeoPoint(microDegres(latitude),
                    microDegres(longitude));
        OverlayItem overlayitem = new OverlayItem(point, "My Current Location", "My Current Location");
        overlay.addOverlay(overlayitem);
        mapOverlays.add(overlay);

    } 
```

# php - PHP 下载 .jpg 或 .avi

> ID：11647329
> 
> 赞同：1
> 
> 时间：2012-07-25T10:04:06.730
> 
> 标签：php, file, download

我遇到了关于使用 PHP 从服务器下载 .jpg 和 .avi 文件的问题，我有以下代码：

```
$fileName = "Koala.jpg";
$filePath = "./Koala.jpg";
if (!file_exists($filePath)){
    echo "No file";
    return;
}
$fp = fopen($filePath, "r");
$fileSize = filesize($filePath);
header("Content-type: application/octet-stream");
header("Accept-Ranges: bytes");
header("Content-Length: $fileSize");
header("Content-Disposition: attachment;filename=".$fileName);

$buffer = 1024;
while(!feof($fp)){
    $data = fread($fp, $fileSize);
    echo $data;
}
fclose($fp); 
```

代码成功下载.txt文件，下载的文件可以被读取。但是，当涉及到 .jpg 时，无法读取下载的 .jpg 文件。任何人都可以伸出援助之手吗？谢谢

刚刚尝试了另一种方法，效果很好

```
$file = 'Koala.jpg';

if (file_exists($file)) {
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.basename($file));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
ob_clean();
flush();
readfile($file);
exit;
} 
```

但只是想知道是什么原因导致第一种方法失败，即使使用 fopen("xxx", "rb") 代替。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:17:49.907

尝试使用这个——

```
<?php
$filename = "MyImage.jpg";
$handle = fopen($filename, "rb");
$contents = fread($handle, filesize($filename));
fclose($handle);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:34:42.440

而不是您正在使用的以下代码，

```
$buffer = 1024;
while(!feof($fp)){
    $data = fread($fp, $fileSize);
    echo $data;
} 
```

只需使用`readfile`方法

```
readfile($filePath); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:08:26.873

尝试将 application/octet-stream 替换为 image/jpeg 。

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T10:15:19.533

我不是 php 专家（很抱歉），但我记得在 Windows 服务器上使用 php 时遇到了类似的问题。它源于打开没有二进制标志的文件（应该`fopen($filePath, "rb");`在您的示例中）。如果您不设置该标志，则当您从流中读取数据时可能会更改数据，这可能会破坏您的文件（并且您不会在文本文件中注意到它）。

有关可用的不同模式的更多信息，请参阅[http://www.php.net/manual/en/function.fopen.php 。](http://www.php.net/manual/en/function.fopen.php)

# r - `识别`对于`pairs`情节？

> ID：11647331
> 
> 赞同：2
> 
> 时间：2012-07-25T10:04:14.893
> 
> 标签：r, plot

有绘图`identify`功能吗？ 即，从点击进入绘图的函数返回数据矩阵（data.frame）中与该点对应的点的行索引。`pairs`
`pairs`

我知道我可以切换到格子：

```
splom (matrix (rnorm (30), 10))
trellis.focus ()
panel.link.splom ()
## [1] 7 
```

但是，如果存在基本图形版本，我想知道它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-28T05:03:21.497

我认为在基本图形版本中没有等价物`pairs`，但是，[pairsD3](http://cran.r-project.org/web/packages/pairsD3/) R 包提供了一个交互式对图，当鼠标悬停在工具提示上时，它会在工具提示中显示观察的行索引。

鸢尾花数据集的示例：

```
install.packages("pairsD3")
require("pairsD3")
pairsD3(iris) 
```

更多参考[这里](http://github.com/garthtarr/pairsD3)

# iphone - 如何在 iphone 中设计 Android 图案锁屏

> ID：11647338
> 
> 赞同：0
> 
> 时间：2012-07-25T10:05:17.057
> 
> 标签：iphone, objective-c, ios, xcode, lockscreen

我想在我的 iphone 应用程序中创建一个 android Pattern 锁屏......但我不知道该怎么做......我搜索了很多但没有得到..有人知道如何在 iphone 中做到这一点吗？ ?? 请帮我解决我的问题..thanx

```
- (void)viewDidLoad
 {

  tapCount=0;
  attempt=0; 
  password=@"";

tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(cancel:)];
[self.view addGestureRecognizer:tap];
[self.navigationController.navigationBar setHidden:YES];

[super viewDidLoad];
self.passwordSet=NO;
// Do any additional setup after loading the view.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:36:06.007

这就是你要找的东西：http: [//www.cocoacontrols.com/platforms/ios/controls/alunlockpatternview](http://www.cocoacontrols.com/platforms/ios/controls/alunlockpatternview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:49:51.043

好的，可以使用[此处提供的示例代码来完成 IOS 的 android 模式锁定](https://github.com/GrioSF/Android-Pattern-Lock-on-iOS)

# javascript - 如何检查一组都被选中的单选按钮？

> ID：11647340
> 
> 赞同：1
> 
> 时间：2012-07-25T10:05:20.410
> 
> 标签：javascript, jquery

我有一个动态生成的单选按钮列表。单选按钮的名称也是动态生成的。第一行单选按钮名称为 1，第二行单选按钮名称为 2。每行包含三个名称相同但值不同的单选按钮。

提交表单时，如何使用 jquery 检查是否在每一行中选择了一个单选按钮？

```
<tr>
                            <th>1</th>
                            <td> Please select one option </td>
                            <td class='selectable_cell'>
                            <input type="radio" name="2" value="1" />
                            </td>
                            <td class='selectable_cell'>
                            <input type="radio" name="2" value="2" />
                            </td>
                            <td class='selectable_cell'>
                            <input type="radio" name="2" value="3" />
                            </td>
                        </tr>
<tr>
                            <th>2</th>
                            <td> Please select another option </td>
                            <td class='selectable_cell'>
                            <input type="radio" name="3" value="1" />
                            </td>
                            <td class='selectable_cell'>
                            <input type="radio" name="3" value="2" />
                            </td>
                            <td class='selectable_cell'>
                            <input type="radio" name="3" value="3" />
                            </td>
                        </tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:14:11.170

假设每行单选按钮被包装到特定元素（例如 a`<fieldset>`或 a `<tr>`）中，您可以轻松检查（在提交事件中）包装元素的数量是否等于所选单选的数量，使用

```
var group = $('#yourform tr');
if (group.length === group.find('input[type="radio"]:checked').length) {
   /* you choose one radio for each group */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:10:09.580

像这样：

**演示： http:** [//jsfiddle.net/K2WsA/](http://jsfiddle.net/K2WsA/) **并**从您更新的代码和小改动：http: [//jsfiddle.net/K2WsA/1/](http://jsfiddle.net/K2WsA/1/)

行为：在演示中，在两个组中至少选择一个，您将收到警报。

希望能帮助到你！

根据名称对它们进行分组：

```
 if($("input[type=radio][name=foo]:checked").length > 0 &&   
   $("input[type=radio][name=bar]:checked").length > 0)  
{      
/* do something */  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:11:24.823

我认为您可以向#row1、#row2 之类的行添加类或ID。之后它相当容易

```
// 为您提供在第一行中选中的单选按钮的数量
// $('input[type=radio]:checked', '#row1')

// 为您提供第二行中选中的单选按钮的数量
// $('input[type=radio]:checked', '#row2')

if($('input[type=radio]:checked', '#row1').length > 0 和 $('input[type=radio]:checked', '#row2') > 0 ) {

 // 你的代码在这里
}

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T10:11:52.123

试试这个

```
 var names = {};
  $(':radio').each(function() {
      names[$(this).attr('name')] = true;
  });
 var count = 0;
 $.each(names, function() { 
     count++;
  });
if ($(':radio:checked').length === count) {
    //All Checked
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T14:46:12.460

在下面的演示链接上，我已经为上述问题完成了完整的垃圾箱。所以请检查一下它可能对你有帮助。

**演示：** [http ://codebins.com/bin/4ldqp9l](http://codebins.com/bin/4ldqp9l)

**HTML：**

```
<table id="table1" cellpadding="0" cellspacing="0" width="70%">
  <tr>
    <th>
      1
    </th>
    <td>
      Please select one option 
    </td>
    <td class='selectable_cell'>
      <input type="radio" name="rd1" value="1" />
    </td>
    <td class='selectable_cell'>
      <input type="radio" name="rd1" value="2" />
    </td>
    <td class='selectable_cell'>
      <input type="radio" name="rd1" value="3" />
    </td>
  </tr>
  <tr>
    <th>
      2
    </th>
    <td>
      Please select another option 
    </td>
    <td class='selectable_cell'>
      <input type="radio" name="rd2" value="1" />
    </td>
    <td class='selectable_cell'>
      <input type="radio" name="rd2" value="2" />
    </td>
    <td class='selectable_cell'>
      <input type="radio" name="rd2" value="3" />
    </td>
  </tr>
  <tr>
    <th>
      3
    </th>
    <td>
      Please select another option 
    </td>
    <td class='selectable_cell'>
      <input type="radio" name="rd3" value="1" />
    </td>
    <td class='selectable_cell'>
      <input type="radio" name="rd3" value="2" />
    </td>
    <td class='selectable_cell'>
      <input type="radio" name="rd3" value="3" />
    </td>
  </tr>
</table>
<br/>
<input type="button" id="btncheck" name="btncheck" value="Check Radio Selection" />
<div id="result">
</div> 
```

**CSS：**

```
table#table1{
  border:1px solid #225599;
}
table#table1 th{
  border:1px solid #225599;
  padding:2px;
  background:#a48866;
}
table#table1 td{
  border:1px solid #225599;
  padding:2px;
  background:#94dbfd;
}
.error{
  color:#ca1619;
}
.success{
  color:#006633;
} 
```

**查询：**

```
$(function() {
    $("#btncheck").click(function() {
        var result = "";
        $("table#table1").find("tr").each(function() {
            var row = $.trim($(this).find("th").text());
            if ($(this).find("input[type=radio]:checked").length > 0) {
                var opValue = $(this).find("input[type=radio]:checked").val();
                result += "<p class='success'>Row " + row + ": The option with value \"" + opValue + "\" has been selected... :)</p>";
            } else {
                result += "<p class='error'>Row " + row + ": No option has been selected..!</p>";
            }

            if (result != "") {
                $("div#result").html(result);
            }
        });
    });
}); 
```

**演示：** [http ://codebins.com/bin/4ldqp9l](http://codebins.com/bin/4ldqp9l)

# c# - 检查对象是否为空或 NULL

> ID：11647341
> 
> 赞同：0
> 
> 时间：2012-07-25T10:05:25.627
> 
> 标签：c#

我想检查对象是空的还是空的。

首先，我有一个带有输入参数 XML 文档的 web 方法

```
[WebMethod(CacheDuration = 0, EnableSession=true, Description = "Učitaj dokument iz Aurore")]
public System.Xml.XmlDocument Load_DOK(System.Xml.XmlDocument XmlDoc)   //xml doc
{
} 
```

在这种方法中，我必须检查 XmlDoc 是否为空，如果是抛出错误。

我写了这样的东西：

```
try
{
    if( XmlDoc == null)
        errorMessage = "Input parameter is NULL!";
}
catch (Exception ex)
{
    WriteErrors.WriteToLogFile("WS.LOAD_DOK", ex.ToString());

    errorMessage = ex.Message;

    //Error exception
    soapEnvelop.LoadXml(@"<soap:Envelope xmlns:soap=""http://schemas.xmlsoap.org/soap/envelope/"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema""><soap:Body><Response_status>1</Response_status><Description>" + ex.Message + "</Description></soap:Body></soap:Envelope>");
    return soapEnvelop;
} 
```

我想知道这是正确的方法还是有更简单的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T10:11:43.263

您的 try 块应该类似于

```
try 
{ 
    if( XmlDoc == null) 
    {
        throw new ArgumentNullException("XmlDoc");
    } 
    // carry on processing here.
} 
```

# iphone - 如何解决在“AppDelegate”类型的对象上找不到属性数组错误

> ID：11647343
> 
> 赞同：1
> 
> 时间：2012-07-25T10:05:36.170
> 
> 标签：iphone, objective-c, ios, facebook, facebook-graph-api

我正在尝试使用以下代码发布到用户朋友的 FB 墙上。我被困在这条线上：** NSString *post=[[delegate.array objectAtIndex:tag.tag] objectForKey:@"id"];

**
带有错误消息：“在“AppDelegate”类型的对象上找不到属性数组

```
AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

        //Call the request method
        [[delegate facebook] requestWithGraphPath:@"me/friends" andDelegate:self];

        // get the array of friends                
        NSArray *data = [result objectForKey:@"data"];

        // Check that the user has friends
        if ([data count] > 0) {

            NSMutableArray *array = [NSMutableArray array];    
            for (int i = 0; i < data.count; i++){
                id object = [data objectAtIndex:i];
                [array addObject:[object objectForKey:@"name"]];
            }

            NSLog(@"list of friends %@", array);

            NSString *Message = [NSString stringWithFormat:@"-posted via iPhone App"];
            NSMutableDictionary *params1 = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                            Message, @"message", nil];
            NSString *post=[[delegate.array objectAtIndex:tag.tag] objectForKey:@"id"];

            [[delegate facebook] requestWithGraphPath:[NSString stringWithFormat:@"/%@/feed",post] andParams:params1 andHttpMethod:@"POST" andDelegate:self];

            UIAlertView  *alert = [[UIAlertView alloc] initWithTitle:@"Message!" message:@"Message Sent" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
            [alert show];
            [alert release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:39:25.060

过去 3 天，我意识到您在 iphone 中获取 facebook 朋友时遇到了问题。所以我为你做一个演示。希望你喜欢这个。:)

[在此处获取 Facebook 好友](http://www.4shared.com/zip/e2At_-0x/FBFriendDemo.html)

# python - 使用 beautifulsoup 查找下一个兄弟姐妹，直到某个兄弟姐妹

> ID：11647348
> 
> 赞同：13
> 
> 时间：2012-07-25T10:05:57.743
> 
> 标签：python, find, beautifulsoup, scrape, siblings

网页是这样的：

```
<h2>section1</h2>
<p>article</p>
<p>article</p>
<p>article</p>

<h2>section2</h2>
<p>article</p>
<p>article</p>
<p>article</p> 
```

我怎样才能找到其中包含文章的每个部分？即找到h2后，找到nextsiblings

直到下一个 h2。

如果网页是这样的：（通常是这种情况）

```
<div>
<h2>section1</h2>
<p>article</p>
<p>article</p>
<p>article</p>
</div>

<div>
<h2>section2</h2>
<p>article</p>
<p>article</p>
<p>article</p>
</div> 
```

我可以编写如下代码：

```
for section in soup.findAll('div'):
...
    for post in section.findAll('p') 
```

但是，如果我想获得相同的结果，我应该如何处理第一个网页？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T11:35:17.237

我认为你可以这样做：

```
for section in soup.findAll('h2'):
    nextNode = section
    while True:
        nextNode = nextNode.nextSibling
        try:
            tag_name = nextNode.name
        except AttributeError:
            tag_name = ""
        if tag_name == "p":
            print nextNode.string
        else:
            print "*****"
            break 
```

鉴于：

```
<h2>section1</h2>
<p>article1</p>
<p>article2</p>
<p>article3</p>

<h2>section2</h2>
<p>article4</p>
<p>article5</p>
<p>article6</p> 
```

输出：

```
article1
article2
article3
*****
article4
article5
article6
***** 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-01-11T16:48:18.927

next_siblings 迭代器在这里也很有帮助：

```
for i in soup.find_all('h2'):
    for sib in i.next_siblings:
        if sib.name == 'p':
            print(sib.text)
        elif sib.name == 'h2':
            print ("*****")
            break 
```

# javascript - 项目文件预计在

> ID：11647353
> 
> 赞同：8
> 
> 时间：2012-07-25T10:06:03.023
> 
> 标签：javascript, jquery, asp.net-mvc, visual-studio-2010, resharper

我的代码中有这一行

```
<script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"> </script> 
```

这部分

```
jquery-1.7.2.min.js 
```

由 Visual Studio 突出显示并显示错误

> 项目文件预计在`<path>`.

这是什么意思，我该如何解决？

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T11:44:58.777

你在使用 ReSharper 吗？如果是这样，可能是由于这个问题： [http ://devnet.jetbrains.com/thread/287081](http://devnet.jetbrains.com/thread/287081)

总之，确保 jquery 文件实际上包含在项目中，方法是在解决方案资源管理器中右键单击它并选择“包含在项目中”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-29T11:42:35.957

除了 Ian Newson 所说的之外，您还可以直接编辑 .proj 文件。确保你有一条线

```
<Content Include="My\Custom\Path\My.ascx" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-16T19:42:29.737

我正在使用`Source="pack://application:,,,/path/file.svg"`，在我的情况下，我的项目显然搞砸了，所以我不得不清除 ReSharper 的缓存并重新启动 Visual Studio，当 Visual Studio 回来时，资源文件不再包含在项目中，所以我不得不重新-包括它们，并将它们全部标记为“资源”和“请勿复制”。一旦我这样做了，警告就消失了。

# css - 给侧边栏全高

> ID：11647355
> 
> 赞同：0
> 
> 时间：2012-07-25T10:06:04.933
> 
> 标签：css

我的页面中有两个 div：`leftpart`其中`rightpart`有以下 css：

```
.leftpart{ 
       width:280px; 
       background:#0054a6; 
       color:#fff; 
       padding-top:40px; 
       height:100%; 
       min-height:637px; 
       box-shadow:3px 3px 10px #bebebe; 
       position:relative;
}
.rightpart{ 
       width:75%; 
       padding-left:10px;
} 
```

我想要这个侧边栏（左部分）直到我的页面结束（直到底部）。我已将高度设置为 100%，但是当我最小化浏览器时，它会显示栏下方的空白区域，而不是显示蓝色背景。我的意思是它的高度不是 100%。我怎么能得到那个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:07:11.413

对于完整的侧边栏，您最好的选择可能是旧的仿列方法。您可以在 CSS 中执行此操作，但这对您来说可能更容易。

基本上你想要一个带有你的列背景的图像在一个细长的条带中。然后，您将其作为背景图像添加到您的父 div，它充当假装的全高列。

例如。

```
.container {
    background: url(your_image) repeat-y left top;
}

<div class="container">
    <div class="sidebar">SIDEBAR</div>
    <div class="content">CONTENT</div>
</div> 
```

你可以在这里阅读更多关于它的信息 - [http://www.alistapart.com/articles/fauxcolumns/](http://www.alistapart.com/articles/fauxcolumns/)

如果你想在 CSS 中尝试这个，你可以试试负边距技巧。

您将容器设置为隐藏溢出，然后在每个 div 上添加负边距底部和相等的正填充底部。

```
#container { overflow: hidden; }
#container div { float: left; background: #ccc; width: 200px; margin-bottom: -2000px; padding-bottom: 2000px; }
#container .col2 { background: #eee; }

<div id="container">
   <div>
        SIDEBAR
   </div>
   <div class="col2">
        CONTENT
   </div>
</div> 
```

# macos - Mac OS X 上多个 JDK 的含义

> ID：11647357
> 
> 赞同：2
> 
> 时间：2012-07-25T10:06:15.853
> 
> 标签：macos, java

我正在使用 Mac OS X 10.7.4。我的 Java 首选项显示以下内容： ![Java 首选项](../Images/86b1a222d5ad18570fbb2043265cfe53.png)

如果我运行`locate javac`，我会得到：

```
...
/System/Library/Frameworks/JavaVM.framework/Versions/A/Commands/javac
...
/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Commands/javac
/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/javac
...
/usr/bin/javac
... 
```

似乎没有任何东西可以软链接其他东西。

*   如果我只有一个 JDK，为什么这个命令有多个位置？
*   `/System/Library/Frameworks/JavaVM.framework/`和 之间的概念区别是什么`/System/Library/Java/JavaVirtualMachines/`？
*   Mac OS X 中是否有一个可以称为“ `JAVA_HOME`”的文件夹，它将包含所有 JDK 工具以及头文件（例如`jni.h`），类似于在 Windows 中完成的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:08:46.653

我用`/System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home`as `JAVA_HOME`。那是JDK的位置。

# ubuntu - 如何获取属于用户的所有目录/文件的列表

> ID：11647360
> 
> 赞同：2
> 
> 时间：2012-07-25T10:06:26.847
> 
> 标签：ubuntu

1 - 如何获取属于特定用户的具有权限详细信息的所有文件和目录的列表。

2-如何获取文件或目录的所有详细信息，如所有者、组、权限等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T10:30:50.647

使用`find -ls`：

```
find /some/path -user username -ls 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T10:13:16.833

To list all files including their permissions you can use `ls -al` or to do so recursively `ls -alr` You can then filter those results with grep to get particular ones (such as ones owned by a username)

```
ls -alR | grep ' username ' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:17:47.607

要查找属于特定用户的所有文件，请使用 find / -user username。然后，您可以对单个文件使用 ls -al。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T10:06:24.203

```
find /path/to/dir/ -user <user> -name "*.dat" 
```

也适用于 -group 选项来查找属于某个组的文件

# java - 使用java提取.rar文件

> ID：11647362
> 
> 赞同：17
> 
> 时间：2012-07-25T10:06:38.490
> 
> 标签：java, extract, rar

我正在寻找一种`.rar`使用 Java 解压缩文件的方法，并且无论我在哪里搜索，我都会一直使用相同的工具 - `JavaUnRar`. 我一直在研究`.rar`用这个解压缩文件，但我似乎找到的所有方法都很长而且很尴尬，就像在[这个例子中一样](https://github.com/edmund-wagner/junrar/blob/6f32323c983015d96c64084418793853f514b519/testutil/src/main/java/de/innosystec/unrar/testutil/ExtractArchive.java)

我目前能够在 20 行或更少的代码中提取`.tar`、和文件`.tar.gz`，因此必须有一种更简单的方法来提取文件，有人知道吗？`.zip``.jar``.rar`

只要它对任何人都有帮助，这是我用来提取`.zip`和`.jar`文件的代码，它适用于两者

```
 public void getZipFiles(String zipFile, String destFolder) throws IOException {
    BufferedOutputStream dest = null;
    ZipInputStream zis = new ZipInputStream(
                                       new BufferedInputStream(
                                             new FileInputStream(zipFile)));
    ZipEntry entry;
    while (( entry = zis.getNextEntry() ) != null) {
        System.out.println( "Extracting: " + entry.getName() );
        int count;
        byte data[] = new byte[BUFFER];

        if (entry.isDirectory()) {
            new File( destFolder + "/" + entry.getName() ).mkdirs();
            continue;
        } else {
            int di = entry.getName().lastIndexOf( '/' );
            if (di != -1) {
                new File( destFolder + "/" + entry.getName()
                                             .substring( 0, di ) ).mkdirs();
            }
        }
        FileOutputStream fos = new FileOutputStream( destFolder + "/"
                                                     + entry.getName() );
        dest = new BufferedOutputStream( fos );
        while (( count = zis.read( data ) ) != -1) 
            dest.write( data, 0, count );
        dest.flush();
        dest.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-12T01:33:07.253

您可以提取`.gz`, `.zip`,`.jar`文件，因为它们使用 Java SDK 中内置的多种压缩算法。

**RAR**格式的情况有点不同。RAR 是一种**专有**的存档文件格式。[RAR 许可证](http://www.buyrar.com/Prices.asp?Type=License)不允许将其包含在 Java SDK 等软件开发工具中。

[解压缩](https://github.com/edmund-wagner/junrar)文件的最佳方法是使用 junrar 等 3rd 方*库*。

[您可以在 SO question RAR archives with java](https://stackoverflow.com/q/561107/1916110)中找到对其他 Java RAR 库的一些引用。SO问题[How to compress text file to rar format using java program](https://stackoverflow.com/q/8804329/1916110)解释了更多不同的解决方法（例如使用`Runtime`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-19T20:55:36.310

你可以使用图书馆`junrar`

```
<dependency>
   <groupId>com.github.junrar</groupId>
   <artifactId>junrar</artifactId>
   <version>0.7</version>
</dependency> 
```

代码示例：

```
 File f = new File(filename);
            Archive archive = new Archive(f);
            archive.getMainHeader().print();
            FileHeader fh = archive.nextFileHeader();
            while(fh!=null){        
                    File fileEntry = new File(fh.getFileNameString().trim());
                    System.out.println(fileEntry.getAbsolutePath());
                    FileOutputStream os = new FileOutputStream(fileEntry);
                    archive.extractFile(fh, os);
                    os.close();
                    fh=archive.nextFileHeader();
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-19T06:21:45.547

您可以简单地将这个 Maven 依赖项添加到您的代码中：

```
<dependency>
    <groupId>com.github.junrar</groupId>
    <artifactId>junrar</artifactId>
    <version>0.7</version>
</dependency> 
```

然后使用此代码提取 rar 文件：

```
 File rar = new File("path_to_rar_file.rar");
    File tmpDir = File.createTempFile("bip.",".unrar");
    if(!(tmpDir.delete())){
        throw new IOException("Could not delete temp file: " + tmpDir.getAbsolutePath());
    }
    if(!(tmpDir.mkdir())){
        throw new IOException("Could not create temp directory: " + tmpDir.getAbsolutePath());
    }
    System.out.println("tmpDir="+tmpDir.getAbsolutePath());
    ExtractArchive extractArchive = new ExtractArchive();
    extractArchive.extractArchive(rar, tmpDir);
    System.out.println("finished."); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-17T10:58:15.780

您可以使用[http://sevenzipjbind.sourceforge.net/index.html](http://sevenzipjbind.sourceforge.net/index.html)

除了支持大量存档格式外，16.02-2.01 版本还完全支持 RAR5 提取：

*   受密码保护的档案
*   带有加密标题的档案
*   档案分卷

毕业典礼

```
implementation 'net.sf.sevenzipjbinding:sevenzipjbinding:16.02-2.01'
implementation 'net.sf.sevenzipjbinding:sevenzipjbinding-all-platforms:16.02-2.01' 
```

或行家

```
<dependency>
    <groupId>net.sf.sevenzipjbinding</groupId>
    <artifactId>sevenzipjbinding</artifactId>
    <version>16.02-2.01</version>
</dependency>
<dependency>
    <groupId>net.sf.sevenzipjbinding</groupId>
    <artifactId>sevenzipjbinding-all-platforms</artifactId>
    <version>16.02-2.01</version>
</dependency> 
```

和代码示例

```
 import net.sf.sevenzipjbinding.ExtractOperationResult;
import net.sf.sevenzipjbinding.IInArchive;
import net.sf.sevenzipjbinding.SevenZip;
import net.sf.sevenzipjbinding.impl.RandomAccessFileInStream;
import net.sf.sevenzipjbinding.simple.ISimpleInArchiveItem;

import java.io.*;
import java.util.HashMap;
import java.util.Map;

/**
 * Responsible for unpacking archives with the RAR extension.
 * Support Rar4, Rar4 with password, Rar5, Rar5 with password.
 * Determines the type of archive itself.
 */
public class RarExtractor {

    /**
     * Extracts files from archive. Archive can be encrypted with password
     *
     * @param filePath path to .rar file
     * @param password string password for archive
     * @return map of extracted file with file name
     * @throws IOException
     */
    public Map<InputStream, String> extract(String filePath, String password) throws IOException {
        Map<InputStream, String> extractedMap = new HashMap<>();

        RandomAccessFile randomAccessFile = new RandomAccessFile(filePath, "r");
        RandomAccessFileInStream randomAccessFileStream = new RandomAccessFileInStream(randomAccessFile);
        IInArchive inArchive = SevenZip.openInArchive(null, randomAccessFileStream);

        for (ISimpleInArchiveItem item : inArchive.getSimpleInterface().getArchiveItems()) {
            if (!item.isFolder()) {
                ExtractOperationResult result = item.extractSlow(data -> {
                    extractedMap.put(new BufferedInputStream(new ByteArrayInputStream(data)), item.getPath());

                    return data.length;
                }, password);

                if (result != ExtractOperationResult.OK) {
                    throw new RuntimeException(
                            String.format("Error extracting archive. Extracting error: %s", result));
                }
            }
        }

        return extractedMap;
    }
} 
```

PS @BorisBrodski [https://github.com/borisbrodski](https://github.com/borisbrodski)祝你 40 岁生日快乐！希望你有一个伟大的庆祝活动。感谢您的工作！

# android - android MoPub 广告对齐

> ID：11647369
> 
> 赞同：0
> 
> 时间：2012-07-25T10:07:08.413
> 
> 标签：android

你好如何在底部显示mopub广告？

我有这个代码

```
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.MATCH_PARENT);
        params.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
        mopView = new MoPubView(this);
            mopView.setAdUnitId(PUB_ID_320x50);
            mopView.setLayoutParams(params);
            mopView.loadAd();
            mainRelative.addView(mopView, params); 
```

但它显示在屏幕中心，如何与底部对齐？ps我的主要布局是RelativeLayout

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:09:22.890

//将布局高度更改为生病的父级

```
 RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.MATCH_PARENT);
params.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM,RelativeLayout.TRUE); 
```

# c# - PInvoke 用于 DWORD 对齐的内存句柄

> ID：11647374
> 
> 赞同：0
> 
> 时间：2012-07-25T10:07:15.643
> 
> 标签：c#, pinvoke, structlayout

我试图为[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374879%28v=vs.85%29.aspx)[`ACCESS_DENIED_ACE`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374879%28v=vs.85%29.aspx)中定义的 struct编写 C# 等效项：

```
typedef struct _ACCESS_DENIED_ACE {
  ACE_HEADER  Header;
  ACCESS_MASK Mask;
  DWORD       SidStart;
} ACCESS_DENIED_ACE, *PACCESS_DENIED_ACE; 
```

`SidStart`受托人 SID 的第一个 DWORD在哪里。SID 的剩余字节存储在 SidStart 成员之后的连续内存中。

我已经看到了使用它的例子`(PSID) &accessAllowedAce->SidStart` ，

```
if ( EqualSid (pSid, (PSID) &accessDeniedAce->SidStart) )
{
   //
} 
```

现在我`StructLayout`该如何为此编写 C# 以及如何在`EqualSid`函数中使用它，同时解释您的解决方案是如何工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:51:45.933

从子结构开始。

```
[StructLayout(LayoutKind.Sequential)]
struct ACE_HEADER
{
    byte AceType;
    byte AceFlags;
    uint AceSize;
} 
```

DWORD = 单位

```
[Flags]
enum ACCESS_MASK : uint
{
    // ...
} 
```

它是一个基于标志的枚举结构，表示为 32 位（即可以切换多个状态）。您需要按照记录定义这些位。

```
[StructLayout(LayoutKind.Sequential)]
struct ACCESS_DENIED_ACE
{
    ACE_HEADER Header;
    ACCESS_MASK Mask;
    uint SidStart;
} 
```

现在结构简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:27:52.950

当我得到`IntPtr`for `ACCESS_DENIED_ACE`（假设`deniedAceIntPtr`）时，我可以通过添加`SidStart`

IntPtr tempSid = IntPtr.Add(deniedAceIntPtr, 8);的偏移量来获得 ACCESS_DENIED_ACE 中 SID 的 IntPtr。

# c++ - 将嵌套类导入命名空间 - C++

> ID：11647376
> 
> 赞同：25
> 
> 时间：2012-07-25T10:07:23.100
> 
> 标签：c++, namespaces

假设我有这样的课程：

```
class A {
public:
    class B {
        // ...
    };
    static void f();
    // ...
}; 
```

我可以引用`B`as`A::B`和 to `f()`as `A::f()`，但我可以导入`B`和`f()`到全局/当前命名空间吗？我试过

```
using A::B; 
```

但这给了我一个编译错误。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-25T10:35:20.443

以下是针对您的问题的两种解决方法：

**1)** B 类：

```
typedef A::B B; 
```

**2)**函数 f()：

```
inline void f()
{
    A::f();
} 
```

但在使用它们之前要三思而后行。

**编辑：**在 C++11 中你可以这样做`auto f = A::f;`，但这实际上会创建一个指向函数的指针，并且函数指针不能被内联。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-25T10:41:05.363

您应该能够为该类使用命名空间别名：

```
using B = A::B; 
```

但是，您不能使用成员函数执行此操作，即使使用静态成员函数也不行。

**编辑：**根据[this SO answer（What is the difference between 'typedef' and 'using' in C++11）](https://stackoverflow.com/a/10748056/440558)这*应该*是有效的，并且实际上以相同的方式创建了一个类型别名`typedef`。但是，它只是 C++11。

* * *

在 C++11 中有一个静态成员函数的解决方法，通过声明一个指向静态函数的变量：

```
struct Foo
{
    static void bar()
        { }
};

auto bar = Foo::bar; 
```

**编辑：**当然，在旧的 C++ 标准中也可以有一个指向静态成员函数的全局变量，但它比使用`auto`C++11 的关键字更混乱。在上面的示例中，它将是：

```
void (*bar)() = Foo::bar; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-25T10:09:50.273

你可以`typedef`

```
typedef A::B B; 
```

# jquery - Jquery 循环 - 如何在不破坏缩略图寻呼机的情况下将图像包装在跨度标签中？

> ID：11647378
> 
> 赞同：0
> 
> 时间：2012-07-25T10:07:25.137
> 
> 标签：jquery, css, cycle, pager

[http://jsfiddle.net/2gktS/21/](http://jsfiddle.net/2gktS/21/)

基本上那里的 jfiddle 显示正在发生的事情。我在图像周围使用了 span 标签来启用滑块中图像下方的文本字段，以使文本随图像而变化。它可以工作，但现在我使用缩略图作为它已经损坏的寻呼机。

有没有办法让他们使用 span 标签？

编辑-我正在使用我的页面的 js：

```
<script type="text/javascript">
$(document).ready(function() {

$('.slideshow')

.cycle({
    fx: 'fade', speed:  2500, pause:   1, next:   '#next', 
prev:   '#prev',  pager:  '#pagernav',
// callback fn that creates a thumbnail to use as pager anchor 
pagerAnchorBuilder: function(idx, slide) { 
   return '<a href="#"><img src="' + $(slide).attr('rel') + '" width="50" height="26" /></a>'; 
}

});

$('#pauseButton').click(function() { 
$('.slideshow').cycle('pause'); 

});

$('#resumeButton').click(function() { 
$('.slideshow').cycle('resume'); 

});

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:20:49.623

[http://jsfiddle.net/2gktS/25/](http://jsfiddle.net/2gktS/25/)

Slide 是整个幻灯片对象，包括 span 标签。您需要从对象中获取 img 标签。

jQuery 构造函数接受第二个参数，该参数可用于覆盖选择的上下文。

`jQuery("img", slide);`

是相同的

`jQuery(slide).find("img");`

所以对于你的脚本：

```
pagerAnchorBuilder: function(i, slide) {
        var src = $("img", slide).attr("rel");

        return '<a href="#"><img src="' + src + '" width="50" height="50" /></a>';
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:29:36.733

尝试使用[Flow Slider](http://www.flowslider.com/skins)，它超级简单，几乎可以与任何内部 HTML 代码一起使用。

# java - 抛出 Java 异常

> ID：11647383
> 
> 赞同：0
> 
> 时间：2012-07-25T10:07:43.973
> 
> 标签：java, exception, try-catch, throw, throws

当一个方法**抛出**异常时，我们是否需要在方法内部有一个 try 块？

例如，

```
 public void foo() throws SomeException{
        try{
            // content of method
        }
    } 
```

是否需要 try 块？或者，该方法是否能够在没有它的情况下抛出 SomeException ：

```
 public void foo() throws SomeException{
            // content of method
    } 
```

当我们**没有用****throw**显式抛出 SomeException时就是这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:09:27.193

如果`SomeException`是已*检查的异常*，您**必须**要么

*   使用`try{}catch`块*或*
*   声明你的方法抛出它。

您不必两者都做，您在问题中显示的任何一个示例都可以正常工作。

不同之处在于`try`您自己处理子句`SomeException`，而通过声明您自己的方法`throws`，您将处理的责任委托`SomeException`给调用方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:09:51.860

当一个方法抛出一个异常时，它会将处理异常的责任传递给它的调用者。因此，如果您将其放入签名中，则无需处理异常。如下所示。

```
public void foo(){
        try{
            // content of method
        }
    } 
```

但如果你这样写。

```
public void foo() throws SomeException{

    } 
```

您将按如下方式调用您的方法。

```
try{

   foo();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:11:18.557

**1.**如果我们**从程序中调用** `throws an Exception`的方法，**那么我们需要**`try/catch` **在方法调用周围使用。**

**2.**假设我们正在**编写一个方法** `throws an exception`，**那么我们需要使用** `throw new Exception object` **该方法。**

**3\. 异常是 Exception 类型的对象**。我们有`Checked Exception`和`Unchecked Exception (Runtime Exception)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T10:13:20.297

您不需要 try 块。

```
public void foo() throws SomeException {
  // do some stuff
  // you decide to throw the exception by yourself:
  if (throwAnException) throw new SomeException();
  // or you call a method that throws SomeExpection:
  methodThatCanThrowSomeException();
  // do more stuff
} 
```

只要您在签名中声明，就可以了。您的方法的调用者必须处理异常，而不是您。所以调用者可能会这样做：

```
try {
  foo();
} catch (SomeException e) {
  // handle exception
} 
```

或者他可能会自己传递下去。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T10:15:06.213

您经常遇到的最有问题的情况是调用声明检查异常的方法。在现实生活中的绝大多数情况下，当场处理该异常**是不合适**的，而是让它向上传播。不幸的是，Java 让你一直重新声明这个相同的异常，这会造成混乱，暴露实现细节，并且通常还会破坏现有方法的约定。

在这种情况下，继续进行的方法是**包装并重新抛出**：

```
catch (RuntimeException e) {throw e;} catch (Exception e) {throw new RuntimeException(e);} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T10:37:28.540

你基本上不需要在里面有一个 try 块

```
 public void foo() throws SomeException {
// do some stuff
// you decide to throw the exception by yourself:
if (throwAnException) throw new SomeException();
// or you call a method that throws SomeExpection:
methodThatCanThrowSomeException();
// do more stuff
 } 
```

# asp.net - 我可以强制客户端与客户端断开连接吗

> ID：11647385
> 
> 赞同：1
> 
> 时间：2012-07-25T10:07:56.357
> 
> 标签：asp.net, signalr

SignalR 确定客户端断开连接，但需要一段时间......我发现它有时不可靠。例如，我连接，断开连接，再次连接，然后再次断开连接。断开连接同时触发两次（毫秒差异）。

我可以明确声明客户端已断开连接以便事件立即触发吗？

# wpf - 在运行时对齐 WPF 中的控件，如 Visual Studio

> ID：11647386
> 
> 赞同：0
> 
> 时间：2012-07-25T10:08:03.060
> 
> 标签：wpf

我正在尝试开发一个应用程序，让用户能够在运行时编辑控件（按钮、文本框等），它应该像 Visual Studio 一样工作，具有控件的对齐、调整大小等），有人可以告诉我我应该怎么做实施吗？任何想法都可以帮助..谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:10:50.890

每个控件都有 Width、Height 和 afaik Left 或 Top 等属性（名称可能有点不同，这里没有 VS）。当您设置它们时，控件将即时更改。

# trigger.io - 启用 parse.com 选项时无法部署 Trigger.io 解决方案真机

> ID：11647387
> 
> 赞同：2
> 
> 时间：2012-07-25T10:08:05.407
> 
> 标签：trigger.io, parse-platform

我想在 Trigger.io 解决方案中使用 parse.com 推送通知，但是，当我启用合作伙伴 parse.com 选项并选择部署到我的 iPhone（真实设备）时，我收到以下错误：

```
[ 48%] Copying /Users/Brady/forge-workspace/rj/development/ios/device-ios.app//retina.png to device
[ 49%] Copying /Users/Brady/forge-workspace/rj/development/ios/device-ios.app//tabs_modalWebViewController.nib to device
[ 50%] TakingInstallLock
[ 52%] CreatingStagingDirectory
[ 57%] ExtractingPackage
[ 60%] InspectingPackage
[ 65%] PreflightingApplication
[ 70%] VerifyingApplication
[ 70%] InstallingEmbeddedProfile
AMDeviceInstallApplication failed: -402620394 
```

该解决方案成功部署到 iOS 模拟器 - 只是不是真正的设备/iPhone。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T23:03:41.420

您需要按照以下说明正确设置您的证书和权利： [https ://www.parse.com/docs/ios_guide#push](https://www.parse.com/docs/ios_guide#push)

然后，您需要在 Trigger.io 本地配置中指定您的配置文件和证书：http: [//docs.trigger.io/en/v1.4/tools/local-config.html](http://docs.trigger.io/en/v1.4/tools/local-config.html)

如果您仍有问题，请联系 support@trigger.io 发送您的 config.json 和 local_config.json。

# vim - 如果根文件夹中存在文件，则添加文件类型

> ID：11647389
> 
> 赞同：0
> 
> 时间：2012-07-25T10:08:08.553
> 
> 标签：vim

我正在使用`Foo`带有语言的框架，比如说`Ruby`.

`.foo`该项目在根目录中至少有一个带有扩展名的文件。

现在，我希望`.rb`在该会话中打开的每个文件（即使它们位于子文件夹中）的文件类型为`ruby.foo`.

为简单起见，假设我总是在项目的根文件夹中打开 vim 以使其正常工作。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:13:23.857

试试这个（未经测试）：

```
" Check for a *.foo file in the root directory.
if ! empty(glob('*.foo'))
    " For each opened Ruby file, append the "foo" filetype.
    " Use autocmd-nested to do the filetype processing for "foo".
    " Check for current value to prevent endless loop.
    autocmd FileType ruby nested if &filetype ==# 'ruby' | setlocal filetype=ruby.foo | endif
endif 
```

要在任何子目录中进行这项工作，您需要向上爬取目录并`glob()`在每个目录中执行。虽然我会将它委托给[localrc.vim 插件](http://www.vim.org/scripts/script.php?script_id=3393)，它允许特定于文件类型的本地配置。强烈推荐用于此类项目相关设置！

# iphone - 如何在 WebView iphone 上将公共 url 加载到代理网络

> ID：11647391
> 
> 赞同：-1
> 
> 时间：2012-07-25T10:08:14.847
> 
> 标签：iphone, ipad, uiwebview

如何使用凭据在代理网络上加载像 www.google.com 这样的公共 url，以便从代理网络访问 ios sdk 应用程序的公共 url。

我正在尝试

但是它在 webivew 上加载空白页！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:23:14.463

使用这个库：[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/How-to-use)

现在这样做来创建请求：

```
 NSString *strUrlAddress = @"http://www.google.com";
  NSURL *urlAddress = [NSURL URLWithString: [strUrlAddress stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
  ASIHTTPRequest *proxyrequest = [ASIHTTPRequest requestWithURL:strUrlAddress];

 [proxyrequest setUsername:@""];
 [proxyrequest setPassword:@""];

 [proxyrequest startSynchronous];

  NSError *error = [proxyrequest error];
  if (!error) {
   NSString *response = [proxyrequest responseString];
   NSLog(@"Response : %@",response);
  }
   NSLog(@"\nError: %@",[error description]); 
```

[感谢@swdev](https://stackoverflow.com/questions/5885169/how-to-deal-with-proxy-setting-in-uiwebview)他的回答

如果需要，它将提示输入用户名和密码。

# cakephp - Cakephp CMS 插件或组件可用吗？还是 Croogo Cakephp CMS 好？

> ID：11647397
> 
> 赞同：2
> 
> 时间：2012-07-25T10:08:46.057
> 
> 标签：cakephp, content-management-system, cakephp-2.0

cakephp 中是否有任何预定义的内容管理系统？. 我发现一个开源`http://croogo.org/`是 Cakephp CMS。任何人都对这些有想法，因为我找不到有关此**Croogo的任何文档**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T10:27:51.693

看一看： -

[http://blog.dreamcss.com/content-management-system/cakephp-based-cms/](http://blog.dreamcss.com/content-management-system/cakephp-based-cms/)

[http://cakephpcms.com/](http://cakephpcms.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:13:22.247

我在面包店找到了一个……请试试这个……这可能对你有帮助。 [http://bakery.cakephp.org/articles/y2k_2000/2011/10/28/quickapps_cms_-_cakephp_2_0](http://bakery.cakephp.org/articles/y2k_2000/2011/10/28/quickapps_cms_-_cakephp_2_0)

# javascript - 鼠标单击在我的 html5 柱形图中不起作用

> ID：11647401
> 
> 赞同：1
> 
> 时间：2012-07-25T10:08:56.213
> 
> 标签：javascript, html, canvas

大家好，我在 html 5 中的图表构造有问题。这次除了一个部分或模块外，一切都做得很好。我尝试了一些通过互联网获得的代码，用于在单击画布中的矩形时显示一些警报。当我评论模块时，它工作正常，但不是鼠标点击。谁能帮我吗。提前致谢。这是我的小提琴和代码 [fiddle]：http: [//jsfiddle.net/s8kZs/](http://jsfiddle.net/s8kZs/)

```
<!doctype html>
    <html>
        <head>
            <script type="text/javascript">
            window.onload=function() {
                var canvas=document.getElementById('mycanvas');
                var ctx=canvas.getContext('2d');
                var graphInfo=[{data:[120,130,140,160,180,100],color:'purple',label:["a","b","c","d","e","f"]},{data:[100,120,130,140,150,190],color:'green',label:["g","h","i","j","k","l"]}];
                var width=45;
                 function renderGrid(gridPixelSize, color)
        {
            ctx.save();
            ctx.lineWidth = 0.5;
            ctx.strokeStyle = color;
            for(var i = 20; i <= canvas.height-20; i = i + gridPixelSize)
            {
                ctx.beginPath();
                ctx.moveTo(20, i);
                ctx.lineTo(canvas.width-20, i);
                ctx.closePath();
                ctx.stroke();
            }
            for(var j = 20; j <= canvas.width-20; j = j + gridPixelSize)
            {
                ctx.beginPath();
                ctx.moveTo(j, 20);
                ctx.lineTo(j, canvas.height-20);
                ctx.closePath();
                ctx.stroke();
            }
            ctx.restore();
        }
       renderGrid(10, "grey");

                ctx.beginPath();
                ctx.strokeStyle = 'black';
                ctx.moveTo(20, canvas.height-20);
                ctx.lineTo(canvas.width-20, canvas.height-20);
                ctx.closePath();
                ctx.stroke();

                ctx.beginPath();
        ctx.strokeStyle = 'black';
                ctx.moveTo(20, 20);
                ctx.lineTo(20, canvas.height-20);
                ctx.closePath();
                ctx.stroke();
                ctx.font = "bold 16px Arial";

        function getFunctionForTimeout(j){
                    var i=0,currx=30,info=graphInfo[j],x5=j*5;
                    var fTimeout=function(){
                        var h=Math.max(info.data[i]-x5,0);
                        var m=info.label[i];
                        ctx.fillStyle='black'
                        ctx.fillRect(currx+(10*x5)+2,canvas.height-h-20,width+2,h-1);
                        ctx.fillStyle=info.color;                   
                        ctx.fillRect(currx+(10*x5),canvas.height-h-21,width,h);                 
                        ctx.fillText(m, currx+(10*x5)+20, canvas.height-5);
                        currx+=120;  
                        i++;
                        /*var ctx = $('#mycanvas').get(0).getContext('2d');
                        $('#mycanvas').click(function(e) {
        var x = e.offsetX,
            y = e.offsetY;

        for(var k=0;k<j;k++) {
            if(x > currx+(10*x5)
            && x < canvas.height-h-21
            && y > width
            && y < h) {
                alert('Rectangle ' + j + ' clicked');
            }
        }
    });*/
                        if(i<info.data.length)setTimeout(fTimeout,2000);
                    };
                    return fTimeout;
        }

                for(var j=graphInfo.length-1;j>=0;j--) {
                    setTimeout(getFunctionForTimeout(j),2000);
                }
            };
            </script>
        </head>
        <body>
            <canvas id="mycanvas" height="400" width="800" style="border:1px solid #000000;">
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:51:06.930

这是为您提供在画布上单击的鼠标位置的代码，我只是更改了您的代码以针对您期望的警报进行更正，但是您的状况存在一些问题，您将其生成为警报。

Njoy点击并提醒鼠标位置；如果您想要您期望的相同警报，请更改您的 if 条件，您将通过我的位置警报获得它...

```
<!doctype html>
<html>
    <head>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script>
        <script type="text/javascript">
        window.onload=function() {
            var canvas=document.getElementById('mycanvas');
            var ctx=canvas.getContext('2d');
            var graphInfo=[{data:[120,130,140,160,180,100],color:'purple',label:["a","b","c","d","e","f"]},{data:[100,120,130,140,150,190],color:'green',label:["g","h","i","j","k","l"]}];
            var width=45;
            function renderGrid(gridPixelSize, color)
            {
                ctx.save();
                ctx.lineWidth = 0.5;
                ctx.strokeStyle = color;
                for(var i = 20; i <= canvas.height-20; i = i + gridPixelSize)
                {
                    ctx.beginPath();
                    ctx.moveTo(20, i);
                    ctx.lineTo(canvas.width-20, i);
                    ctx.closePath();
                    ctx.stroke();
                }
                for(var j = 20; j <= canvas.width-20; j = j + gridPixelSize)
                {
                    ctx.beginPath();
                    ctx.moveTo(j, 20);
                    ctx.lineTo(j, canvas.height-20);
                    ctx.closePath();
                    ctx.stroke();
                }
                ctx.restore();
            }
               renderGrid(10, "grey");

                        ctx.beginPath();
                        ctx.strokeStyle = 'black';
                        ctx.moveTo(20, canvas.height-20);
                        ctx.lineTo(canvas.width-20, canvas.height-20);
                        ctx.closePath();
                        ctx.stroke();

                        ctx.beginPath();
                ctx.strokeStyle = 'black';
                        ctx.moveTo(20, 20);
                        ctx.lineTo(20, canvas.height-20);
                        ctx.closePath();
                        ctx.stroke();
                        ctx.font = "bold 16px Arial";

            function getFunctionForTimeout(j){
                var i=0,currx=30,info=graphInfo[j],x5=j*5;
                var fTimeout=function(){
                    var h=Math.max(info.data[i]-x5,0);
                    var m=info.label[i];
                    var ctx = $('#mycanvas').get(0).getContext('2d');
                    ctx.fillStyle='black'
                    ctx.fillRect(currx+(10*x5)+2,canvas.height-h-20,width+2,h-1);
                    ctx.fillStyle=info.color;                    
                    ctx.fillRect(currx+(10*x5),canvas.height-h-21,width,h);                    
                    ctx.fillText(m, currx+(10*x5)+20, canvas.height-5);
                    currx+=120;  
                    i++;

                    $('#mycanvas').click(function(e) {
                        var canvas = document.getElementById("myCanvas");
                        var mousePos = getMousePos(canvas, e);
                        var message = "Mouse position: " + mousePos.x + "," + mousePos.y;
                        var x = mousePos.x;
                        var y = mousePos.y;
                        alert(message);

                        for(var k=0;k<j;k++) {
                            if(x > currx+(10*x5)
                            && x < canvas.height-h-21
                            && y > width
                            && y < h) {
                                alert('Rectangle ' + j + ' clicked');
                            }
                        }
                    });
                    if(i<info.data.length)setTimeout(fTimeout,2000);
                };
                return fTimeout;
            }       

            for(var j=graphInfo.length-1;j>=0;j--) {
                setTimeout(getFunctionForTimeout(j),2000);
            }
            function getMousePos(canvas, evt) {
                var rect = canvas.getBoundingClientRect(), root = document.documentElement;

            // return relative mouse position
            var mouseX = evt.clientX - rect.top - root.scrollTop;
            var mouseY = evt.clientY - rect.left - root.scrollLeft;
                return {
                  x: mouseX,
                  y: mouseY
                };
              }
        };
        </script>
    </head>
    <body>
        <canvas id="mycanvas" height="400" width="800" style="border:1px solid #000000;">
    </body>
</html> 
```

只需检查 getMousePos() 中的更改是否与您需要的相同

干杯！！！开心！！！

# php - 使用 location.replace 第二次使用相同的 URL 时，Javascript 不会重新加载页面

> ID：11647402
> 
> 赞同：2
> 
> 时间：2012-07-25T10:09:00.757
> 
> 标签：php, javascript, jquery, html, ajax

我正在使用`location.replace`重新加载使用 GET 变量获取成功消息的页面。

我的问题是，如果 URL 中的 URL`location.replace`完全相同，则页面不会重新加载。我知道，如果我可以使用条件并使用`location.reload()`它，我不知道如何在 a 上使用 IF 语句`location.replace`或任何其他方式来回答我的问题。

因此，当调用`location.replace('?success=1');`while`?success=1`已经在 URL 中时，页面不会重新加载。

任何人都可以对此有所了解吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:13:11.670

```
 if(window.location.href.match(/[?]success=1/))
    window.location.reload();
    else
    window.location.replace('?success=1') 
```

# iphone - 有没有办法限制MKMapView，即一个城市？

> ID：11647412
> 
> 赞同：2
> 
> 时间：2012-07-25T10:09:41.983
> 
> 标签：iphone, mapkit

我正在开发一个 iphone 应用程序来本地化城市周围的服务。我的问题是如何将地图限制在这个城市。例如，关于控制用户位置？我的意思是，如果在开始时，应用程序验证用户离城市足够远，应用程序就会对此进行广告宣传。如何控制这种情况（或者有另一种方法）？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:03:50.290

这简单。

检查坐标，当这些坐标离你的点太远时——使用这个方法

```
- (void)setCenterCoordinate:(CLLocationCoordinate2D)coordinate animated:(BOOL)animated 
```

让他回到你想要他的地方。

# jquery - 对象在 IE8 中不支持此属性或方法

> ID：11647413
> 
> 赞同：1
> 
> 时间：2012-07-25T10:09:44.267
> 
> 标签：jquery, internet-explorer-8

我只在 Ie8 上遇到此错误。调试器指定的行是

```
finally{b=[e,f],c=0}} 
```

**对象不支持此属性或方法 ----- jquery.min.js?ver=latest，第 2 行字符 15738**

PS：请不要将其标记为重复，我有深入的研究，我真的需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-12T11:52:39.517

确保 b 和 c 都已*正确*声明：

```
var b, c; 
```

如果您还没有这样做，那几乎肯定是您看到错误的原因。IE8 查找范围内的现有变量（使用 'var' 关键字定义的变量），如果找不到，您将看到此消息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T07:18:42.253

简单的解决方案是升级到 IE9 并要求您的用户更新他们的浏览器。如果他们使用的是 IE8 或更低版本，那么他们根本不值得查看您的网站 :)

# java - 列表或字符串数 组作为方法参数

> ID：11647421
> 
> 赞同：3
> 
> 时间：2012-07-25T10:10:05.923
> 
> 标签：java, arrays, collections, arguments

我处于奢侈的位置，我可以自由选择是否将以下方法实现为字符串数组：

```
public void addColumns(String[] columns)
{
    for(String column : columns)
    {
        addColumn(column);
    }
} 
```

或作为字符串的集合：

```
public void addColumns(List<String> columns)
{
    for(String column : columns)
    {
        addColumn(column);
    }
} 
```

实现这一点的最佳选择是什么？我正在使用 Java。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:28:11.910

**1.**`Collection`当你使用 Java 时，我更喜欢你使用。

**2.** Java 和处理器已经变得足够快，以至于**您不会注意到 Array 或 Collection 之间的任何性能差异。**

**3.** `Collection`为您提供了很大的**灵活性，以及​​从 List、Set、Maps 等中进行选择的选择**......任何适合您的需要。

**4.** `List<String>`将是我认为要走的路。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T10:12:43.793

Both a `string[]` and a `List<string>` allow the method to mutate them.

You only actually need to use an `Iterable<string>` to achieve what you do in your example.

I'd use `Iterable<string>` because it expresses the minimum that you need (you can iterate over it). This also gives the added benefit that you can pass either a `string[]` or a `List<string>` into the method.

Using the most restricted type you can communicates intent of what the method will do.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T10:13:15.127

It entirely depends on the usage.

If you want to keep it light weight then use `String[]`.

If you are making insertion deletion sorting and other operations or may use them in future then go for `List<String>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T10:29:22.660

首先想想你将如何调用你的方法。您是否已经拥有 String 数组，或者您必须构建它？你打算如何建造它？选择可以减少客户端代码工作量的解决方案。

# android - 如何确保电子邮件应用程序将使用我的应用程序打开文件？

> ID：11647423
> 
> 赞同：2
> 
> 时间：2012-07-25T10:10:11.483
> 
> 标签：android, android-intent, intentfilter

我目前正在构建一个应用程序，允许您从电子邮件加载文件并使用电子邮件导出创建的文件。扩展名为 .lq。我目前正在使用此意图过滤器，但是在尝试打开扩展名为 .lq 的内容时，我在标准电子邮件应用程序中反复收到错误“无法显示此附件”：

```
<intent-filter>
    <action android:name="android.intent.action.VIEW"/>
    <category android:name="android.intent.category.DEFAULT"/>
    <category android:name="android.intent.category.BROWSABLE"/>
    <data android:scheme="file"/>
    <data android:mimeType="*"/>
    <data android:pathPattern=".*\\.lq"/>
    <data android:host="*"/>
</intent-filter> 
```

我尝试了许多不同的解决方案，但没有一个有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:30:03.957

您可以使用[Intent Intercept](https://play.google.com/store/apps/details?id=uk.co.ashtonbrsc.android.intentintercept)应用程序来分析您的邮件应用程序发送的 Intent 并知道您需要创建什么意图过滤器。

从 gmail 应用程序，我得到以下意图：

> 动作：android.intent.action.VIEW
> 
> 数据：内容：//gmail-ls/myemail@gmail.com/messages/471/attachements/0.1/BEST/false
> 
> URI：内容：//gmail-ls/myemail@gmail.com/messages/471/attachements/0.1/BEST/false
> 
> 类型：图片/png

所以问题是您的 .lq 不是标准扩展名，并且您也不能依赖文件名以 .lq 结尾，因为它使用没有扩展名的内部名称。

您可以使用意图过滤器来捕获 content://* URI。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-25T10:26:11.170

我也有这个问题。尝试完全删除`mimetype`属性。

# android - 如何在 Android 的 ListView 中打印一个值？

> ID：11647427
> 
> 赞同：1
> 
> 时间：2012-07-25T10:10:22.810
> 
> 标签：android, listview, arraylist, adapter

我是 Android 开发的新手。我是`ArrayList`用来存储国名，然后在 中显示国名`ListView`，但是赋值错误，下面附上图片供大家参考。如何显示阿富汗（第 1 格）、奥兰岛（第 2 格）等订单...

谢谢

我尝试了以下代码：

```
 private  ArrayList<String> Countryname = new ArrayList<String>(); 
      String dataAll;

      lv1 = (ListView)findViewById(R.id.ListView01);
      for(int i=0;i<allTitles.getLength();i++) {
            dataAll+=allTitles.item(i).getChildNodes().item(0).getNodeValue()+"\n";
            this.Countryname.add(dataAll);
       }

     lv1.setAdapter(new ArrayAdapter<String>(SampleAndroidActivity.
     this,android.R.layout.simple_list_item_1, Countryname)); 
```

![在此处输入图像描述](../Images/0ac238610dc7f9bf04f86991f03a3427.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:12:11.043

试试这个：

```
 String dataAll="";

     lv1 = (ListView)findViewById(R.id.ListView01);
     for(int i=0;i<allTitles.getLength();i++)
     {
         dataAll=allTitles.item(i).getChildNodes().item(0).getNodeValue()+"\n";
         this.Countryname.add(dataAll);
     } 
```

因为您要在 dataAll 中添加新值，所以从前面删除**“+”号。**

```
dataAll=allTitles.item(i).getChildNodes().item(0).getNodeValue()+"\n"; 
```

# ios - IOS分布式应用崩溃

> ID：11647428
> 
> 赞同：0
> 
> 时间：2012-07-25T10:10:24.210
> 
> 标签：ios

我已经开发了一个带有小框架的应用程序。我们处于应用程序的最终版本，之前的版本已分发用于 beta 测试。在我的 iPad 和 iPhone 上使用配置文件测试我的新版本后，我继续通过临时分发向 beta 测试人员分发。问题是，当我将应用程序作为 beta 测试人员下载时，应用程序每次都会在相同的操作中崩溃，而当我测试从 Xcode 安装它的同一个应用程序时，它不会。

我查看了崩溃日志并找到了它所在的行。这是我框架中最近更改的一部分。该框架是我的主项目的目标，就像一个静态库，但每次我清除所有并编译主项目时都应该编译它。有可能，即使当我编译直接安装在我的 iPad 上时它做得很好，当我编译分发时它不会重新编译我的框架？这里会发生什么？知道如何进行吗？

编辑：我添加了崩溃日志的一部分，它所在的行是调用我的框架的新部分的行

```
Exception Type:  EXC_CRASH (SIGSYS)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   APPPOS                      0x00098058 0x8000 + 589912
1   APPPOS                      0x00099434 0x8000 + 594996
2   APPPOS                      0x0009909c 0x8000 + 594076
3   APPPOS                      0x000b75d4 0x8000 + 718292
4   APPPOS                      0x00096e8e 0x8000 + 585358
5   APPPOS                      0x0008009e -[TTServerSingleton initServer] (TTServerSingleton.m:62)
6   APPPOS                      0x0008885c -[TTServerControllPreferencesViewController serverEnabledValueChanged:] (TTServerControllPreferencesViewController.m:61)
7   CoreFoundation                  0x36aa03f6 -[NSObject performSelector:withObject:withObject:] + 46
8   UIKit                           0x36ddafa8 -[UIApplication sendAction:to:from:forEvent:] + 56
9   UIKit                           0x36ddaf64 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 24 
```

# javascript - 通过 HTML 添加到 JavaScript 中的列表

> ID：11647430
> 
> 赞同：0
> 
> 时间：2012-07-25T10:10:28.603
> 
> 标签：javascript, jquery, html

在我的脚本中有一个动态填充网格的单词列表。

有没有办法用通过 HTML 填充网格的单词来填充列表？

我现在有这个...

```
var listOfWords = ["mat", "cat", "dog", "pit", "pot", "fog"]; 
```

有没有办法通过 HTML 而不是脚本在此列表中添加更多单词？

我问是因为可以处理HTML但不能处理脚本的大学需要添加新单词

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:13:20.577

理论上，您可以创建一个 HTML 结构，该结构将创建一个可由 JavaScript 解析的 DOM，该结构将从某些元素（例如列表项）之间提取文本并将这些字符串附加到数组中。

…虽然教人们非常简单的数组语法会更容易。

…就像使用每行一个条目的文本文件一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:22:46.690

如果有人能够用 html 写这个：

```
<ul>
    <li>hello</li>
    <li>hi</li>
    <li>hey</li>
</ul> 
```

您可以将它们添加到单词列表中：

```
[].push.apply( listOfWords, $("ul li").map( function() {
    return $(this).text();
}).get() );

console.log( listOfWords );
//["mat", "cat", "dog", "pit", "pot", "fog", "hello", "hi", "hey"] 
```

虽然我不明白他们怎么会写不出来：

```
["hello", "hi", "hey"] 
```

# vb6 - VB 6.0 中从未保存过恢复类文件

> ID：11647434
> 
> 赞同：-1
> 
> 时间：2012-07-25T10:10:46.170
> 
> 标签：vb6

如何恢复在 vb 6.0 中执行但未保存的类文件？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T12:37:36.793

如果单击`Tools -> Options...`并选择`Environment`选项卡，您会发现一个标题为“程序启动时”的小框。如果选择“提示保存更改”，IDE 会在运行程序之前询问您是否要保存所做的更改。

执行期间的崩溃不一定会导致您的更改丢失。

保存你刚刚失去的东西为时已晚，但它可能会阻止它再次发生。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T10:31:50.830

如果您的意思是您打开了 VB IDE，在类文件中编写了一些代码，运行了代码，然后在没有保存类文件的情况下崩溃或关闭了 IDE，那太糟糕了：您丢失了代码。

# iphone - 坚持创建 Paypal 应用程序 ID 以与 iPhone 应用程序集成

> ID：11647437
> 
> 赞同：1
> 
> 时间：2012-07-25T10:10:57.167
> 
> 标签：iphone

我正在尝试开发 iPhone 购物应用程序。在我的应用程序中，我集成了 Paypay 结帐付款。它请求“Paypal App ID”。

当我尝试在[http://www.x.com](http://www.x.com)中创建“Paypal App ID”时（使用 Paypal 帐户登录并转到“我的帐户”，然后转到“新应用程序”）。它要求“测试信息”，我必须显示“逐步付款流程说明”以供他们审查。

但是我还没有将我的 iPhone 应用程序上传到 Apple 商店，我无法向他们展示演示。他们也没有提供他们的 iphone/ipad 的 UDID 以允许我部署 Ah Hoc 分发给他们看。

我必须做什么才能通过这一步，才能获得“Paypal App ID”？

谢谢！

# javascript - 如何后期绑定 KnockoutJS observable

> ID：11647439
> 
> 赞同：3
> 
> 时间：2012-07-25T10:10:57.733
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin, knockout-2.0

我有一个带有一些可观察对象的 ViewModel 和一个仅在应用绑定后才知道的属性。

例如，我的 UI 包含一个搜索框，它在下方显示匹配项。最初，视图模型内的匹配属性为空，因为没有要附加的数据。但是，一旦搜索框至少包含 3 个字符，它就会进行 AJAX 调用并获取数据。

当我调用映射插件时，将调用中的数据映射到 KO 时，好像 KO 无法后期绑定可观察数组。问题是我没有任何东西可以给它映射以首先设置绑定。

我的代码：

```
 var vm = new function () {
        var self = this;

        self.customers = null;
        self.searchText = ko.observable("");

        self.searchText.subscribe(function (data) {
            if (data.length > 2) {
                // do search
                $.get("/customers/getall", { searchTerms: self.searchText }, function (resp) {

                    if (!self.customers) {
                        // first mapping
                        self.customers= ko.mapping.fromJS(resp.customers);
                    } else {
                        ko.mapping.fromJS(self.customers, resp.customers);
                    }
                });
            } 
        });

    }

    ko.applyBindings(vm, $("#searchCustomersScope")[0]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:22:50.510

一旦绑定运行，KO 就无法知道任何新创建的 observables（除了在模板场景中）。

您最初希望创建`self.customers`一个空的可观察数组，然后您可以允许映射插件对其进行更新。

有几种方法可以做到这一点，但像这样：

```
 self.customers = ko.observableArray();
    self.searchText = ko.observable("");

    self.searchText.subscribe(function (data) {
        if (data.length > 2) {
            // do search
            $.get("/customers/getall", { searchTerms: self.searchText }, function (resp) {
                    ko.mapping.fromJS(resp.customers, {}, self.customers);
            });
        } 
    }); 
```

# cakephp - 下拉菜单不显示

> ID：11647440
> 
> 赞同：0
> 
> 时间：2012-07-25T10:11:01.023
> 
> 标签：cakephp, drop-down-menu

您好，我只想显示一个下拉菜单来选择在我的后台发布文章的时间。所以我在我的表“文章”中创建了一个特殊字段，类型为“时间”。我在 cakephp 框架上工作。这是代码：

```
<?php $this->Form->create(null, array('enctype' => 'multipart/form-data'))) ?>
<?php echo $this->Form->inputs(array('Article.publication_time'/*, array('label' => 'Time')); ?>
<?php $this->Form->end('Submit') ?> 
```

此代码显示一个简单的文本输入。你能解释一下为什么吗？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:20:53.067

试试这个代码

```
echo $this->Form->input('Article.publication_time', array('type'=>'date',
   'dateFormat' => 'DMY', 
   'minYear' => date('Y') - 70,
   'maxYear' => date('Y') ,
 )); 
```

# c++ - Charniak Parser Errors

> ID：11647448
> 
> 赞同：3
> 
> 时间：2012-07-25T10:11:27.453
> 
> 标签：c++, parsing, charniak-parser

I am trying to use Charniak Parser (not reranker) to parse a sentence. I mean I have a sentence like this:

```
It is good to meet you. 
```

And I need it to be parsed by Charniak (I insist on using Charniak parser, because after that I am going to use LTH system and LTH works based on Charniak Parser).

So, the result would be something like:

```
(s (XP(PRP I) (V is) ....) 
```

However, when I try to run "make" command for Charinak Parser, I face these errors:

```
BChartsm.c LeftRightGotIter does not name a type
BChartsm.c in member function double Bchart::pHypgt(const std::string&, int)
BChartsm.c strpbrk was not declared in this scope
BChartsm.c in member function float Bchart::coputeTgT(int,int)
BChartsm.c globalGi was not declared in this scope 
```

I tried to use a patch developed by Madnani, but it did not work for me. Also I tried to use [this solution](http://web.science.mq.edu.au/~mpawel/resources/notes/getting_gplusplus_3.3.htm), but I couldn't understand the last part. I ran all the `sudo dpkg ...` codes, but after that I didn't understand what I should do.

Meanwhile, I would say that I'm using Ubuntu 11.04 and my OS is a 64bit one.

Can anyone explain to me how I can solve the problems?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:23:04.877

您正在编译 C++ 代码，并且它以某种方式驻留在“.c”文件中。GCC 将它们视为 C 源代码，而不是 C++。

您必须使用 GCC 的“-x”选项强制识别 C++ 源代码。

```
gcc -x c++  <your_source> 
```

由于您在谈论 Makefile，请查找 CFLAGS 选项并在`-x c++`此处添加该选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-13T22:13:38.353

从 Charniak 的页面和 Brown 网站链接的版本尚未得到维护。让它与最新的 g++ 一起工作需要相当多的工作。

幸运的是，布朗（BLLIP）确实在 GitHub 上以“BLLIP Parser”的名义维护了一个版本：

[https://github.com/BLLIP/bllip-parser](https://github.com/BLLIP/bllip-parser)

这是我第一次使用 64 位 Ubuntu 编译。请注意，如果您还没有 Flex，您还需要安装它。

# java - 如何使用 xuggler 同步音频和视频

> ID：11647449
> 
> 赞同：6
> 
> 时间：2012-07-25T10:11:35.853
> 
> 标签：java, xuggler

我正在`Screen Recorder with Audio`使用`xuggler`java进行开发。我已经成功地分别创建了视频文件和音频文件。现在我想同步这两个文件。我曾尝试使用“ConcatenateAudioAndVideo.java”，但是当我运行该文件时，它只会生成`44bytes`文件。谁能告诉我有什么问题？提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-09T07:07:57.357

我也遇到了同步两个文件（音频和视频）的问题。在 Internet 上有很多技巧可以做到这一点，但没有完整的代码示例。我通过使用 xuggler 编写代码解决了这个问题。这是代码。如果您有任何问题，请务必提出。我会尽我所能帮助你。这是代码：

```
import com.xuggle.mediatool.IMediaWriter;
import com.xuggle.mediatool.ToolFactory;
import com.xuggle.xuggler.IAudioSamples;
import com.xuggle.xuggler.ICodec;
import com.xuggle.xuggler.IContainer;
import com.xuggle.xuggler.IPacket;
import com.xuggle.xuggler.IStream;
import com.xuggle.xuggler.IStreamCoder;
import com.xuggle.xuggler.IVideoPicture;

 /**
 * This class is used to merge audio and video file.
 *
 * @author Arslaan Ejaz
 */
public class DecodeAndSaveAudioVideo {

 public static void main(String[] args)
  {

    String filenamevideo = "f:/testvidfol/video.mp4"; //this is the input file for video. you can change extension
    String filenameaudio = "f:/testvidfol/audio.wav"; //this is the input file for audio. you can change extension

    IMediaWriter mWriter = ToolFactory.makeWriter("f:/testvidfol/audiovideooutput.flv"); //output file

    IContainer containerVideo = IContainer.make();
    IContainer containerAudio = IContainer.make();

    if (containerVideo.open(filenamevideo, IContainer.Type.READ, null) < 0)
        throw new IllegalArgumentException("Cant find " + filenamevideo);

    if (containerAudio.open(filenameaudio, IContainer.Type.READ, null) < 0)
        throw new IllegalArgumentException("Cant find " + filenameaudio);

    int numStreamVideo = containerVideo.getNumStreams();
    int numStreamAudio = containerAudio.getNumStreams();

    System.out.println("Number of video streams: "+numStreamVideo + "\n" + "Number of audio streams: "+numStreamAudio );

int videostreamt = -1; //this is the video stream id
int audiostreamt = -1;

IStreamCoder  videocoder = null;

    for(int i=0; i<numStreamVideo; i++){
        IStream stream = containerVideo.getStream(i);
        IStreamCoder code = stream.getStreamCoder();

        if(code.getCodecType() == ICodec.Type.CODEC_TYPE_VIDEO)
        {
            videostreamt = i;
            videocoder = code;
            break;
        }

    }

    for(int i=0; i<numStreamAudio; i++){
        IStream stream = containerAudio.getStream(i);
        IStreamCoder code = stream.getStreamCoder();

        if(code.getCodecType() == ICodec.Type.CODEC_TYPE_AUDIO)
        {
            audiostreamt = i;
            break;
        }

    }

    if (videostreamt == -1) throw new RuntimeException("No video steam found");
    if (audiostreamt == -1) throw new RuntimeException("No audio steam found");

    if(videocoder.open()<0 ) throw new RuntimeException("Cant open video coder");
    IPacket packetvideo = IPacket.make();

    IStreamCoder audioCoder = containerAudio.getStream(audiostreamt).getStreamCoder();

    if(audioCoder.open()<0 ) throw new RuntimeException("Cant open audio coder");
    mWriter.addAudioStream(1, 1, audioCoder.getChannels(), audioCoder.getSampleRate());

    mWriter.addVideoStream(0, 0, videocoder.getWidth(), videocoder.getHeight());

    IPacket packetaudio = IPacket.make();

    while(containerVideo.readNextPacket(packetvideo) >= 0 ||
            containerAudio.readNextPacket(packetaudio) >= 0){

        if(packetvideo.getStreamIndex() == videostreamt){

            //video packet
            IVideoPicture picture = IVideoPicture.make(videocoder.getPixelType(),
                    videocoder.getWidth(),
                    videocoder.getHeight());
            int offset = 0;
            while (offset < packetvideo.getSize()){
                int bytesDecoded = videocoder.decodeVideo(picture, 
                        packetvideo, 
                        offset);
                if(bytesDecoded < 0) throw new RuntimeException("bytesDecoded not working");
                offset += bytesDecoded;

                if(picture.isComplete()){
                    System.out.println(picture.getPixelType());
                    mWriter.encodeVideo(0, picture);

                }
            }
        } 

        if(packetaudio.getStreamIndex() == audiostreamt){   
        //audio packet

            IAudioSamples samples = IAudioSamples.make(512, 
                    audioCoder.getChannels(),
                    IAudioSamples.Format.FMT_S32);  
            int offset = 0;
            while(offset<packetaudio.getSize())
            {
                int bytesDecodedaudio = audioCoder.decodeAudio(samples, 
                        packetaudio,
                        offset);
                if (bytesDecodedaudio < 0)
                    throw new RuntimeException("could not detect audio");
                offset += bytesDecodedaudio;

                if (samples.isComplete()){
                     mWriter.encodeAudio(1, samples);

        }
            }

    }

  }
}
} 
```

# php - Double/Triple loading jquery dialog, javascript code inside ajax loaded form

> ID：11647460
> 
> 赞同：1
> 
> 时间：2012-07-25T10:12:22.397
> 
> 标签：php, javascript, jquery, codeigniter

I've getting the following error and I don't know how to fix it. I'm using codeigniter framework, I'm building an admin site, this side has a number of sections to administrate, in each section you can create, edit, translate or delete items. Each time I want to do any of these actions I get a form using Ajax, then I load it on a jquery Dialog, but if I want to include some javascript inside the dialog, it will load a total of 3 times, showing only the header of the dialog in the last 3 times. When I remove the javascript code inside the form, it loads perfect, just one time.

For instance, this is my news form:

```
<div id="create-form">      
<?=form_open('news/'.$action); ?>   
    <?php $sindex = 0?> 
    <table class="table-content-right width800px" border="0" cellpadding="0" cellspacing="0">
        <tr class="not-for-edit">
            <td class="padding-10px" valign="top">
                <span>SELECT LANG:</span>
            </td>
            <td class="padding-10px">
                <select id="cmbTextTranslate" name="cmbTextTranslate">                  
                    <?php foreach($languages as $language) :?>
                        <?php if (($language->active == 1) && ($language->oid != $this->session->userdata('lang'))):?>                                                          
                            <option value='<?= $language->oid?>'><?= strtoupper($language->oid)?></option>
                        <?php endif;?>
                    <?php endforeach;?>
                </select>
                <img class="imgLangTranslate" src="" />
            </td> 
        </tr>           
        <tr class="color-grey-soft-light color-black currentlang" valign="top">
            <td class="padding-10px">TITLE: <img class="not-for-edit" src="<?=base_url()?>img/flags/en.gif" /></td>
            <td class="padding-10px"><input id="title_en" name="title_en" class="input-border" type="text" value="<?= (isset($new) ? $new->title_en : "") ?>" /></td>               
            <td class="padding-10px"><span sindex="<?= $sindex++;?>" class="color-error"></span></td>               
        </tr>
        <?php foreach($languages as $language) :?>
            <?php if (($language->active == 1) && ($language->oid != $this->session->userdata('lang'))):?>
                <tr class="not-for-edit" translateTo="<?= $language->oid?>" valign="top">
                    <td class="padding-10px" valign="top">TITLE_<?= $language->oid?>: <img class="translateToFlag" src="" /></td>
                    <td class="padding-10px" valign="top"><input class="input-border input-translate" id="title_<?= $language->oid?>" name="title_<?= $language->oid?>" type="text" value="<?= (isset($new) ? $new->title_es : "") ?>"/></td>                       
                </tr>
            <?php endif;?>
        <?php endforeach;?>
        <tr class="currentlang" valign="top"><td class="padding-10px">BODY: <img class="not-for-edit" src="<?=base_url()?>img/flags/en.gif" /></td>
            <td id="textarea-td" class="padding-10px">
                <textarea rows="5" id="body_en" class="input-border" name="body_en"><?= (isset($new) ? $new->body_en : "") ?></textarea>
            </td>               
            <td class="padding-10px"><span sindex="<?=$sindex++;?>" class="color-error"></span></td>
        </tr>
        <?php foreach($languages as $language) :?>
            <?php if (($language->active == 1) && ($language->oid != $this->session->userdata('lang'))):?>
                <tr class="not-for-edit" translateTo="<?= $language->oid?>" valign="top">
                    <td class="padding-10px" valign="top">BODY_<?= $language->oid?>: <img class="translateToFlag" src="" /></td>
                    <td id="textarea-td_<?=$language->oid?>" class="padding-10px">
                        <textarea rows="5" id="body_<?=$language->oid?>" class="input-border" name="body_<?=$language->oid?>"><?= (isset($new) ? $new->body_es : "") ?></textarea>
                    </td>
                </tr>
            <?php endif;?>
        <?php endforeach;?>
    </table>
    <input id="oid" name="oid" type="hidden" value="<?= (isset($new) ? $new->oid : "") ?>" />
</form> 
```

And if I add the following block at the end of the file the error start:

```
<script type="text/javascript"> 
```

It doesn't matter if it is empty, or filled with code inside, it always give me the same error.

This is the code I have for calling that form:

```
 $("#btnCreate").click(function(){
    $.ajax({
        type: 'GET',
        dataType: 'html',
        cache: false,
        url: 'news/load_form/create',
        success: function(data) {
            //$(data).dialog(config.dialog);                
            $(data).dialog($.extend(config.dialog, 
                {title: 'CREATE NEW',
                 open: function() {
                     alert('cuantas veces'); 
                 },
                 close: function() {
                     $(this).dialog('destroy');
                 },
                 buttons: [
                      {     text:'CREATE',
                            click: function() {                 
                            if ($("form").submit() === true)                    
                                $(this).dialog("close");
                            }
                        },
                        {   text: 'RESET',
                            click: function() {                             
                                $("#create-form input[type='text']").val("");
                            }
                        },
                        {   text: 'CANCEL',
                            click: function() {                             
                                $(this).dialog("close");
                            }
                        }
                    ]
                })                  
            );
            $('.not-for-edit').hide();

            tinyMCE.init($.extend(config.tinyMCE.writtable,
                {oninit: function(){
                    setTimeout(function(){
                        tinyMCE.execCommand('mceRemoveControl', true, 'body_<?= $this->session->userdata('lang')?>');
                        tinyMCE.execCommand('mceAddControl', true, 'body_<?= $this->session->userdata('lang')?>');
                    }, 1000)}
                })
            );
        }
    });     
}); 
```

I don't really understand the problem, it seems right to me. Thanks in advance.

# objective-c - MP Movie Player Controller orientation

> ID：11647466
> 
> 赞同：0
> 
> 时间：2012-07-25T10:12:50.703
> 
> 标签：objective-c, ios, mpmovieplayercontroller

In my app i need to restrict portrait view for MP movie player. i want to know how can i override shouldAutorotateToInterfaceOrientation function in MP movie player.m file or is it possible?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:55:19.720

是的，有可能，在 shouldAutorotateToInterfaceOrientation 中仅针对纵向方向返回 YES。

# soapui - how to use the properrty

> ID：11647467
> 
> 赞同：0
> 
> 时间：2012-07-25T10:12:50.193
> 
> 标签：soapui

Can anyone assist me to solve this query in the below mentioned scenario…? first of all i’ve created a testsuite for every individual web service, for handling all types of its respective testcases like, request succeeded, internal server error bla bla. My app is login based. and on successful login, login API returns session id and some other values in the response. ive another suite which fetches the latest studies from the server for that sessionid which is generated as a response in testsuite 1\. Can you help me to use this property (sessionid ) as a param while invoking the other APIs (for instance, getlateststudies) being the part of other testsuites….in this case i want to fetch the latest studies for that sessionid. As you know that values for such params, like, sessionid is system generated. so can the wild character (*) be sued in this case. Im sort of new to SOAPUI , have already taken help from soap UI online help links but the entire help is related to using the property as a param in the same testsuite and NOT across the various testsuites. Please elaborate all the steps if you know how to proceed ahead. for more clarity , let me the define the hierarchy which i’ve structured in my workspace. Userlogin /*testsuite 1, represents the login API*/ Request succeeded /*testcase name , represents a scenario*/ teststep1 method1-request1 /*This testcases returns system generated sessionid as a value upon invoking*/ getlateststudies /*test suite 2, represents the API to fetch the latest studies from server for that sessionid */ Request succeeded /*testcase name , represents a scenario*/ teststep1 method1-request1 Do i need to use any groovy script for it ? I’ve already tried using property transefer feature of soap UI within the same testsuite but tell me some suitable solution to use it across the test suites of the same project.

* * *

@ Steve, Thanks for ur reply. i actually followed the steps mentioned in the 2nd most link provided by you as per my last conversation with you, the sessionid param is a server generated id and it couldn't be hard coded.Just want to discuss with you what i did!i defined a property at the project level sessionid and imported its value from an external source, say .txt file and in which ive saved the value of sessionid with a wild character , i-e, *. keeping in view the fact that it will pick the server generated sessionid and i really didn't want to pass the hard-coded value. i later made use of property transfer feature to select the source and target properties names and their values. want to double-check with you is my approach correct , if not , then please provide your valuable comments! or if passing the wild card character is not correct for the server generated id , then what should be the other possible option to represent this ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:19:47.250

您很接近，听起来您只是使用了错误的属性类型。soapUI 有几个级别。

*   全球 - 全球可用
*   项目 - 在整个项目中可用
*   TestSuite - 可在整个套件中使用
*   TestCase - 在测试用例中可用

您需要使用属性转移到项目级别属性，因此在项目级别添加自定义属性，然后使用属性转移到您创建的该属性。使用 xpath 提取您需要的数据。最后，您需要在新请求 ${#Project#PropertyName} 中使用该项目属性

将这些组合在一起的所有工具都可以从soapUI 网站获得。

[http://www.soapui.org/Functional-Testing/xpath-and-xquery-assertions.html#1-the-xpath-match-assertion](http://www.soapui.org/Functional-Testing/xpath-and-xquery-assertions.html#1-the-xpath-match-assertion)

[http://www.soapui.org/Functional-Testing/working-with-properties.html](http://www.soapui.org/Functional-Testing/working-with-properties.html)

[http://www.soapui.org/Functional-Testing/transferring-property-values.html](http://www.soapui.org/Functional-Testing/transferring-property-values.html)

# java - java split gives different array lengths

> ID：11647468
> 
> 赞同：0
> 
> 时间：2012-07-25T10:12:52.820
> 
> 标签：java, split

> **Possible Duplicate:**
> [Java StringTokenizer, empty null tokens](https://stackoverflow.com/questions/2708591/java-stringtokenizer-empty-null-tokens)

Considering this java snippet:

```
public class Test {

    public static void main(String[] args) {
        String s1 = "1;2;3;4;5";
        String s2 = "1;2;;;";

        String[] splits1 = s1.split(";");
        String[] splits2 = s2.split(";");

        System.out.println(splits1.length);
        System.out.println(splits2.length);
    }
} 
```

OUTPUT:

```
5
2 
```

* * *

I need some alternatives to extracting arrays with same lengths.

If there are four semicolons (";") in the searched string (ex s2) then I would like to have length=5 of splited array (splits2) with null elements where appropriate (splits2[2]=null, splits2[3]=null etc).

Can you please provide solutions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:19:25.140

**1.**在“;”之间使用“空格” 具有相同长度的数组。**您将有空格不为空**

例如：

```
 String[] s = "1;2; ; ;" ; 
```

**2.数组是一个**可以为**null**的对象，如果里面包含**引用变量**，则可以为**null**，**但原始类型不能为null。**`So i am using space.`

**//////////////////已编辑///////////////**

**使用下面的代码片段，它的工作......**

```
String a = "1;2;;;;";
        char[] chArr = a.toCharArray();

        String temp = new String();
        String[] finalArr = new String[a.length()];

        for (int i = 0; i < chArr.length; i++) {

            try {
                temp = chArr[i] + "";
                Integer.parseInt(temp);
                finalArr[i] = temp;

            } catch (NumberFormatException ex) {

                finalArr[i] = null;

            }

        }
        for (String s : finalArr){
            System.out.println(s);
        }
             System.out.println(finalArr.length); 
```

# session - 当用户点击返回时，如何显示自定义会话过期页面？

> ID：11647474
> 
> 赞同：3
> 
> 时间：2012-07-25T10:13:07.887
> 
> 标签：session, jakarta-ee, session-state, session-timeout

我有一个线性 Java EE Web 应用程序，它要求用户以线性方式跨多个页面输入数据。我在应用程序上设置了超时。（我在超时之前也有一个 javascript 警报，以警告用户并在他们不想继续时重定向）。

这很好，除了我的问题是，如果用户在会话过期后单击后退按钮，他们可以看到数据。我已经使用这个 SO 答案在一定程度上解决了这个问题：

[防止用户在注销后看到以前访问过的安全页面](https://stackoverflow.com/questions/4194207/prevent-user-from-going-back-to-the-previous-secured-page-after-logout)

但是，这不是自定义页面，如果会话未过期也会发生。

**仅当会话已过期（最好没有 JS）时，如何在用户单击返回后向用户显示自定义页面？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T13:17:12.180

这是一个要求您的 Web 应用程序使用[POST-REDIRECT-GET 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)的选项，该模式在许多 Web 框架（如 Spring Web Flow）中实现。

在这种情况下，会话到期后的*返回单击*`GET`意味着浏览器发送了一个新请求，而您的服务器代码接收到一个新的`HttpSession`. *由于向导*在第一页启动的会话属性，您可以检测到这种情况：如果`GET`请求不是针对第一页并且会话不包含该属性，则意味着会话已因注销或过期超时而丢失。因此，您可以显示一个自定义页面来提醒用户他失去了工作，并将他引导到您的向导的第一页。

使用 POST-REDIRECT-GET 模式，浏览器的后退按钮不可能在不发送我提到的新 GET 请求的情况下显示带有最新输入的前一个表单。

顺便说一句，如果你设计了很多这样的向导，我建议你使用[Spring Web Flow](http://www.springsource.org/spring-web-flow)，它只包含在控制器 servlet 中，这样你就可以使用任何视图技术。

**替代方案：**可以避免数据丢失，这要归功于自定义持久性 cookie，该 cookie 在每次提交到服务器后存储（以明文或编码形式）用户在向导期间提供的所有信息。在这种情况下，即使会话属性也没有用。但实现起来可能很复杂，因为有许多限制，例如最大 cookie 长度、cookie 数量或最大 HTTP 标头行，因为所有 cookie 都在一行上发送......

# magento - Magento v1.7 - Why new contact form is redirected to default contact form after clicking submit button

> ID：11647480
> 
> 赞同：0
> 
> 时间：2012-07-25T10:13:17.173
> 
> 标签：magento

I created a new contact form (i.e. new-contact-form.phtml) and put the following code in CMS->Pages

```
{{block type='core/template' template='contacts/new-contact-form.phtml' form_action="/contacts/index/post"}} 
```

However, the new contact form is redirected to default contact form after clicking submit button.

Can anyone help me? Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:01:25.840

您可以使用自定义 URL 重定向获得表单操作以重定向回您的 cms 页面。例如，尝试输入一个新的自定义 URL 重定向，其中 ID 路径和请求路径都设置为`contacts/index`，目标路径设置为 CMS 页面的 URL 键，例如`contact-us`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:36:45.393

这就是您的 form_action 声明的内容 此表单已发布到`/contacts/index/post`控制器并被重定向到控制器设置的位置

# c# - 检查控制台应用程序C#中是否按下了任何键

> ID：11647486
> 
> 赞同：13
> 
> 时间：2012-07-25T10:13:33.760
> 
> 标签：c#, console-application

我需要检查控制台应用程序中是否按下了任何键。键可以是键盘中的任意键。就像是：

```
if(keypressed)
{ 

//Cleanup the resources used

} 
```

我想出了这个：

```
ConsoleKeyInfo cki;
cki=Console.ReadKey();

if(cki.Equals(cki))
Console.WriteLine("key pressed"); 
```

它适用于除修饰键之外的所有键 - 我如何检查这些键？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-25T10:18:33.503

这可以帮助您：

```
Console.WriteLine("Press any key to stop");
do {
    while (! Console.KeyAvailable) {
        // Do something
   }       
} while (Console.ReadKey(true).Key != ConsoleKey.Escape); 
```

如果你想在一个中使用它`if`，你可以试试这个：

```
ConsoleKeyInfo cki;
while (true)
{
   cki = Console.ReadKey();
   if (cki.Key == ConsoleKey.Escape)
     break;
} 
```

对于任何键都非常简单：删除`if`.

* * *

正如[@DawidFerenczy](https://stackoverflow.com/users/971141/dawid-ferenczy)提到的，我们必须注意这`Console.ReadKey()`是阻塞的。它停止执行并等待直到按下一个键。根据上下文，这可能（不）很方便。

如果您不需要阻止执行，只需 test `Console.KeyAvailable`。它将包含`true`是否按下了某个键，否则将包含`false`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-25T10:15:19.453

[`Console.KeyAvailible`](http://msdn.microsoft.com/en-us/library/system.console.keyavailable.aspx)如果您想要非阻塞，请查看。

```
do {
    Console.WriteLine("\nPress a key to display; press the 'x' key to quit.");

// Your code could perform some useful task in the following loop. However, 
// for the sake of this example we'll merely pause for a quarter second.

    while (Console.KeyAvailable == false)
        Thread.Sleep(250); // Loop until input is entered.
    cki = Console.ReadKey(true);
    Console.WriteLine("You pressed the '{0}' key.", cki.Key);
    } while(cki.Key != ConsoleKey.X);
} 
```

如果要阻止，请使用`Console.ReadKey`.

# java - 强制在接口中指定的方法仅在抽象类之外定义

> ID：11647488
> 
> 赞同：0
> 
> 时间：2012-07-25T10:13:46.413
> 
> 标签：java, abstract-class

这是我一段时间以来一直在挠头的一个。

假设您想在接口中指定一个方法，但您不希望在实现级别之前实际定义它。也就是说，你想在接口中指定一个方法，这样如果它是在抽象类中定义的，编译器就会抛出错误。

```
public interface Thing{   

    public void method1();

    public void method2();

    //method3 should be implementation specific
    public void method3();

} 
```

然后我有一个抽象类：

```
public abstract class BasicThing{

    @Override
    public void method1(){}

    @Override
    public void method2(){}

} 
```

我的实现特定代码：

```
public class ThingImpl{

    @Override
    public void method3(){}

} 
```

（顺便说一句，我知道以这种方式编写它是有效的，但我想要这样做的原因是，如果我正在编写接口并将其传递给其他人，然后将其传递给其他人去做最终的实现，我希望能够对它们强制执行额外的规范）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T10:17:41.583

不，在编译时没有办法做到这一点。IMO，这也是一个非常奇怪的要求。

正如Sheik的回答所示，您当然可以通过抽象类的合作来做到这一点。但是您不能通过在接口中放置特定的东西来*强制抽象类这样做。*

您可能会尝试查找所有相关类并在单元测试中验证您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:17:18.687

您应该在抽象 BasicThing 类中使用抽象方法。

```
public abstract void method3(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T11:41:56.370

```
I think what u need is an anonymous inner-class implementations for your interface.

public class MyClass{

public void do something()
{
    Thing th1=new Thing(){

     @Override
     public void method3(){
     System.out.println("****My Method3***");
     }
    };

    th1.method3();
}
}; 
```

# android - Android 连接相机服务失败

> ID：11647490
> 
> 赞同：2
> 
> 时间：2012-07-25T10:13:58.910
> 
> 标签：android, android-camera

从另一个活动导航到相机活动时出现异常“无法连接到相机服务”。问题发生在 Camera.open()。我搜索了很多并尝试了可用的解决方案。但问题没有解决。请提供一些帮助。在此先感谢。

```
 @Override
    public void surfaceChanged(final SurfaceHolder holder, int arg1,
            int arg2, int arg3) {

        cameraHandler = new Handler() {
            /*
             * (non-Javadoc)
             * 
             * @see android.os.Handler#handleMessage(android.os.Message)
             */
            @Override
            public void handleMessage(Message msg) {
                switch (msg.what) {
                case LOADCAMERA:
                    if (null != mProgress) {
                        if (mProgress.isShowing()) {
                            mProgress.dismiss();
                        }
                    }
                    try {
                        try {

                            mCam = Camera.open(); // attempt to get a Camera
                                                    // instance
                        } catch (Exception e) {
                            Log.e("Exception", e.getMessage());
                        }
                        mCam.setPreviewDisplay(holder);
                        mCameraParameters = mCam.getParameters();
                        if (isFlashLightOn) {
                            mCameraParameters
                                    .setFlashMode(Parameters.FLASH_MODE_TORCH);
                        } else {
                            mCameraParameters
                                    .setFlashMode(Parameters.FLASH_MODE_OFF);
                        }
                        mCameraParameters.setPreviewSize(mVideoWidth,
                                mVideoHeight);
                        mCam.setParameters(mCameraParameters);
                        mCam.startPreview();
                        mCam.unlock();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }

                }
                super.handleMessage(msg);
            }
        };
        Message msg = new Message();
        msg.what = LOADCAMERA;
        cameraHandler.sendMessageDelayed(msg, 700);

    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder arg0) {

        if (mCam != null) {
            mCam.stopPreview();
            mCam.setPreviewCallback(null);
            mCam.release();
            mCam = null;
        }

    }
} 
```

添加了日志猫

```
W/CameraService(   78): CameraService::connect X (pid 623) rejected (camera 0 is still      busy).
E/Exception(  623): Fail to connect to camera service
D/AndroidRuntime(  623): Shutting down VM
W/dalvikvm(  623): threadid=1: thread exiting with uncaught exception(group=0x40015560)
E/AndroidRuntime(  623): FATAL EXCEPTION: main
E/AndroidRuntime(  623): java.lang.NullPointerException
E/AndroidRuntime(  623):    at   com.gui.MainActivity$CameraPreview$1.handleMessage(MainActivity.java:2041)
E/AndroidRuntime(  623):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(  623):    at android.os.Looper.loop(Looper.java:130)
E/AndroidRuntime(  623):    at  android.app.ActivityThread.main(ActivityThread.java:3683)
E/AndroidRuntime(  623):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(  623):    at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(  623):    at    com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:845)
E/AndroidRuntime(  623):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:603)
E/AndroidRuntime(  623):    at dalvik.system.NativeStart.main(Native Method)
W/ActivityManager(  106):   Force finishing activity com.gui/.MainActivity
W/ActivityManager(  106):   Force finishing activity com.gui/.MainActivity
E/v4l2_utils(   78): Error = Try again from dqbuf
E/SEC_Overlay(   78): Failed to DQ/-1
E/CameraHardwareSec(   78): ERR(int    android::CameraHardwareSec::previewThread()):overlay dequeueBuffer fail
I/CameraHardwareSec(   78): int android::CameraHardwareSec::previewThreadWrapper():  calling mSecCamera->stopPreview() and waiting
I/CameraHardwareSec(   78): int android::CameraHardwareSec::previewThreadWrapper(): return from wait
I/CameraHardwareSec(   78): int android::CameraHardwareSec::previewThreadWrapper(): exiting
W/SecCamera(   78): int android::SecCamera::stopPreview(): doing nothing because m_flag_camera_start is zero
I/CameraHardwareSec(   78): virtual void android::CameraHardwareSec::release(): calling mPreviewHeap.dispose()
W/SecCamera(   78): int android::SecCamera::stopRecord(): doing nothing because     m_flag_record_start is zero
I/SecCamera(   78): DeinitCamera: m_cam_fd(15)
I/SecCamera(   78): DeinitCamera: m_cam_fd2(21) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T23:39:08.303

**CameraService::connect X (pid 623) 被拒绝（摄像机 0 仍然忙）。**

这意味着其他一些进程（App）已经调用了“Camera.open”并且没有释放它。在它释放之前，您无法访问相机。

从另一个活动导航到相机活动时，“出现异常”无法连接到相机服务“是什么意思。

这是什么其他活动，它是否访问相机？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-28T08:21:51.773

也许，在您的 MainActivity 中，您可以添加：

```
protected override void OnDestroyed() {
    if (mCam != null) {
        mCam.release();
    }
} 
```

我认为您的错误可能是因为相机在退出之前仍与应用程序保持开放连接。至少，这就是解决我的问题的原因。

# windows-phone-7 - 如何从 Windows Phone WebBrowser 控件中删除所有 Cookie

> ID：11647497
> 
> 赞同：0
> 
> 时间：2012-07-25T10:14:18.203
> 
> 标签：windows-phone-7, cookies

在我的应用程序中，我使用 WebBrowser 控件。用户可以访问[http://mail.google.com](http://mail.google.com)，然后在不从 google.com 注销的情况下访问[http://twitter.com](http://twitter.com)，然后访问[http://abcd.com](http://abcd.com)等。

现在我的要求是重新启动 WebBrowser 控件并重新访问这些网站并强制用户再次登录这些网站。

如何从 WP7 中的 Windows Phone WebBrowser 控件中**清除所有 Cookie ？**我尝试了一些网络中可用的 JavaScript 示例。没有任何效果。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:35:35.310

该控件不是为您提供对 cookie 等的细粒度控制。它旨在用于显示 html 数据。

由于 webbrowser 控件的给定实例会在给定会话中缓存数据，我建议您通过将用户重定向到该页面或执行 onclick 等来创建新实例

# php - 来自 php-mysql 的 RSS 提要限制表中的项目

> ID：11647499
> 
> 赞同：0
> 
> 时间：2012-07-25T10:14:28.783
> 
> 标签：php, mysql

我正在使用此代码从 mysql 表生成我的 rss，现在我从表中提取 rss。它有这么多行，我要修改的只是只拉前 6 个项目，而不是整行。我使用了 index 和 break ==6 但它仍然向我显示所有行。有什么线索吗？

此外，我试图在我拉出每个项目之前回显“#”，但仍然无法正确处理。

解决这两个问题的任何提示

看待

```
<?php
require_once('./config.php');
require_once('dbconnect.php');
header("Content-Type: application/rss+xml; charset=utf-8");

$a=#;

$rssfeed = '<?xml version="1.0" encoding="utf-8"?>';
$rssfeed .= '<rss version="2.0">';
$rssfeed .= '<channel>';
$rssfeed .= '<title>My RSS feed</title>';
$rssfeed .= '<link>http://www.mytest.com</link>';
$rssfeed .= '<description>test.Com RSS</description>';
$rssfeed .= '<language>en-us</language>';
$rssfeed .= '<copyright>Copyright (C) 2012 mytest.com</copyright>';

$query = "SELECT * FROM rss_eng";
$result = mysql_query($query) or die ("Could not execute query");

while($row = mysql_fetch_array($result)) {
    extract($row);
    $index = 0;

    $rssfeed .= '<item>';
    $rssfeed .= '<title>' . $hashtag . '</title>';

    $rssfeed .= '</item>';
}

$rssfeed .= '</channel>';
$rssfeed .= '</rss>';

echo $rssfeed;
$index++;

    if($index==6) break;

 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:22:31.687

限制你的 SQL 查询

```
$query = "SELECT * FROM rss_eng LIMIT 6" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:23:42.710

如果您只需要表中的 6 行，则在 SQL 查询中使用 LIMIT 关键字。
`SELECT * FROM your_table LIMIT 6;`
您可以在此处找到 MySQL SELECT 的其他选择选项：http: [//dev.mysql.com/doc/refman/5.0/en/select.html](http://dev.mysql.com/doc/refman/5.0/en/select.html)

# javascript - 如何在 Javascript 中唯一且高效地合并 2 个日期数组（如果可能，使用 jQuery）？

> ID：11647503
> 
> 赞同：2
> 
> 时间：2012-07-25T10:14:41.870
> 
> 标签：javascript, jquery, arrays, merge

我正在尝试唯一地合并 2 个 Date 对象数组，但不要以正确的方式获得它。这是我的菜鸟解决方案：

```
$old = [new Date('2012-08-01'), new Date('2012-08-02'), new Date('2012-08-03')];
$new = [new Date('2012-08-01'), new Date('2012-08-06')];

$old2 = $.map($old, function(el, idx) {
   for (var i in $new)
   {
      if ($new[i].getTime() == el.getTime()) return null;
   }
   return el;
});

$new2 = $.map($new, function(el, idx) {
   for (var i in $old)
   {
      if ($old[i].getTime() == el.getTime()) return null;
   }
   return el;
});

$final = $.merge($old2, $new2); 
```

这行得通，但它似乎有点笨拙，我猜也是inperformat？我做的另一个尝试是这样的：

```
for (var i in $new)
{
   var found = false;

   for (var j in $old)
   {
      if ($old[j].getTime() == $new[i].getTime())
      {
         found = true;
         $old = $old.splice(j, 1);
      }
   }

   if (found)
   {
      $new = $new.splice(i, 1);
   }
}

$final = $.merge($old, $new); 
```

但这根本不起作用。如何正确和高效地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:49:08.993

这应该有效，假设您希望它们订购：

```
$old = [new Date('2012-08-01'), new Date('2012-08-02'), new Date('2012-08-03')];
$new = [new Date('2012-08-01'), new Date('2012-08-06')];

var second = $old.concat($new);
var sorted_second = second.sort(); // You can define the comparing function here. 
                         // JS by default uses a crappy string compare.
var results = [];
for (var i = 0; i < second.length - 1; i++) {
    if (sorted_second[i + 1] != sorted_second[i]) {
        results.push(sorted_second[i]);
    }
} 
```

其中一些代码取自[这里](https://stackoverflow.com/questions/840781/easiest-way-to-find-duplicate-values-in-a-javascript-array)，以防您需要更深入的排序

# magento - 在外部站点上获取订单信息和客户信息

> ID：11647506
> 
> 赞同：3
> 
> 时间：2012-07-25T10:14:52.933
> 
> 标签：magento, magento-1.4, magento-1.5, http-redirect

我正在为 SaaS (www.openerpengines.com) 开发一个 Magento 站点。

我在成功页面（下订单后出现的页面）上放置了一个按钮。当用户点击按钮时，我想发布或者您可以将客户信息和订单信息发送到外部站点。

谁能帮我吗。从 2 天开始，我一直在努力实现这些目标。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:23:43.087

您可以在单击按钮后向外部站点上的端点发送 JSON 请求。从那里，外部站点可以获取数据并根据需要保存/处理它。

不确定 Magneto 是否提供了这样做的好方法，但原则上这就是我在自定义应用程序中所做的。

# php - PHP中的elasticsearch查询和cURL

> ID：11647507
> 
> 赞同：8
> 
> 时间：2012-07-25T10:14:54.400
> 
> 标签：php, curl, elasticsearch

我刚开始使用弹性搜索。我想在 php 中使用 cURL 进行查询。

此代码没有给出任何内容...（如果我从命令行执行，请参阅下面的错误。我不确定此错误是由控制台中的换行符引起的...）

```
$url = "curl -s -XGET http://<my_url>:9200/idx_occurrence/Occurrence/_search -d '
{
'filtered' : {
    'query' : {
        'term' : { 'kingdom_interpreted' : 'Plantae' }
    }
}

}' ";

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, $url);

curl_setopt($ch, CURLOPT_HEADER, 0);

$return=curl_exec($ch);

var_dump($return); 
```

但如果我使用这个网址`http://<my_url>:9200/idx_occurrence/Occurrence/_search?q=kingdom_interpreted:Plantae`

然后我从 cURL 得到结果。

也许查询过滤器不正确？（我尝试了几个选项都没有成功）

> 解析失败[没有元素解析器[过滤]]]；}]","状态":500}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T15:25:41.127

我一直在使用 Elastica PHP 库进行弹性搜索交互：

[https://github.com/ruflin/Elastica](https://github.com/ruflin/Elastica)

它的学习曲线非常短。这是一个例子：

```
$client = new Elastica_Client();
$index = $client->getIndex('idx_occurrence');
$index->getType('Occurrence');

$query_string = new Elastica_Query_QueryString('Plantae');
$query_string->setFields(array('kingdom_interpreted'));    
$query = new Elastica_Query($query_string);

$index->refresh();
$searchResults = $index->search($query); 
```

这说明了仅限于特定字段的查询字符串搜索。`$searchResults`是一个`Elastica_ResultSet`对象数组。我喜欢 Elastica，因为它可以抽象出任何与 cURL 相关的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-22T06:39:35.220

这是一个简单的请求演示：

```
 $param = "
        {
        'filtered' : {
            'query' : {
                'term' : { 'kingdom_interpreted' : 'Plantae' }
            }
        }

        }";
    $header = array(
        "content-type: application/x-www-form-urlencoded; charset=UTF-8"
    );

    $curl = curl_init();
    curl_setopt($curl, CURLOPT_URL, "http://xxxxx:9200/idx_occurrence/Occurrence/_search");
    curl_setopt($curl,CURLOPT_HTTPHEADER, $header);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl, CURLOPT_POSTFIELDS, $param);
    $res = curl_exec($curl);
    curl_close($curl);
    return $res; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T13:23:34.200

我自己找到了部分问题的答案。我设法通过命令行得到它。

```
curl -XGET my_server:9200/idx_occurrence/Occurrence/_search?pretty=true -d '{ "query": { "query_string" :{"fields" : ["kingdom_interpreted"], "query": "Plantae" } } }' 
```

使用 PHP 执行（正确的）cURL 请求只是发回一个空字符串。PHP 日志中没有错误。

```
$url='curl -XGET http://<my_url>:9200/idx_occurrence/Occurrence/_search?pretty=true
 -d   \'{ "query": { "query_string" :{ "fields" : ["kingdom_interpreted"], 
"query": "Plantae" } } }\'';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, 0);
ob_start();
curl_exec ($ch);
curl_close ($ch);
$data = ob_get_contents();
ob_end_clean();
var_dump($data); 
```

同样，如果不是这个 $url 我发送这个 url my_url:9200/idx_occurrence/Occurrence/_search?q=kingdom_interpreted:Plantae

有用。为什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-27T12:27:57.040

```
$search = 'Plantae'; //search query
$fields = 'kingdom_interpreted'; //fields to look in
$results = file_get_contents('http://server:port/idx_occurrence/Occurrence/_search?q='.$search.'&fields='.$fields); 
```

# internet-explorer - IE 允许您通过 ActiveX 控件打开 Outlook 窗口并设置其 HTML 内容。Chrome 能做到吗？

> ID：11647509
> 
> 赞同：1
> 
> 时间：2012-07-25T10:15:05.367
> 
> 标签：internet-explorer, google-chrome, outlook

IE 允许您通过 ActiveX 控件打开 Outlook 窗口并预填充其 HTML 内容。
这对我们的销售人员非常有用。

有什么办法可以从 Chrome 做到这一点？

# jquery - jquery mobile在按下按钮时拨打电话

> ID：11647513
> 
> 赞同：5
> 
> 时间：2012-07-25T10:15:08.900
> 
> 标签：jquery, mobile, jquery-mobile

我正在使用带有 Query mobile 的 HTML 5 和 CSS 构建移动网站

我有一个这样的按钮

```
<a data-role="button" data-icon="grid" >Contact me for a meeting</a> 
```

我想添加一个“动作”，这样当用户点击时，他可以拨打电话号码。

请注意应用程序正在浏览器中运行，我想知道查询或其他解决方案中是否有内置功能。谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-25T10:23:51.137

看看这里 - [http://jquerymobile.com/demos/1.0a2/docs/pages/link-formats.html](http://jquerymobile.com/demos/1.0a2/docs/pages/link-formats.html)

我认为`tel:`协议会为你做的

# coffeescript - Aptana 3 自动编译咖啡脚本？

> ID：11647516
> 
> 赞同：1
> 
> 时间：2012-07-25T10:15:15.200
> 
> 标签：coffeescript, aptana

使用 Aptana3，是否可以在保存或运行项目时自动编译 .coffee 文件，并使用一些特定规则（例如输出应该去哪里，如果我可以将文件压缩成一个等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:54:55.850

您可以在控制台中使用`-cw`标志，`coffee`例如：

```
coffee -cw file.coffee 
```

这将监视文件`file.coffee`的更改并编译它。您可以使用更多选项，只需运行

```
coffee --help 
```

命令以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T03:03:17.543

这是最好的方法：假设您的工作在“my-project-path”文件夹中。

1.  转到“我的项目路径”的父文件夹
2.  启动终端并输入`coffee -o my-project-path -cw my-project-path`

此行将在“my-project-path”文件夹中监视和编译任何名称为“*.coffee”的内容，即使它位于“my-project-path/scripts/core”或“my-project-path/test/”中core".js 文件将作为 .coffee 文件位于保存文件夹中。

# wordpress - WordPress 重定向

> ID：11647525
> 
> 赞同：0
> 
> 时间：2012-07-25T10:15:47.240
> 
> 标签：wordpress, .htaccess, redirect

我想为我的一些分类创建一系列重定向（没有插件）。

本质上，我希望所有 sitedomain.com/taxonomy1/term 和 sitedomain.com/taxonomy2/term 分别指向 sitedomain.com/page?taxonomy1=term 和 sitedomain.com/page?taxonomy2=term。

我有一个使用 URL 查询的页面，所以我宁愿将用户引导到那里而不是显示“分类”页面。

我假设我可以使用 htaccess 或 Wordpress 的重定向规则来做到这一点，但我不知道怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:14:31.810

Wordpress 不会自动生成术语存档。

为了`sitedomain.com/taxonomy1/term`工作，您需要做的是创建一个名为`taxonomy1-term.php`.

还要确保 wordpress 可以在管理部分的永久链接选项卡下写入（权限）到您的 .htaccess 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:07:49.877

您可以简单地使用 .htaccess ：

```
Redirect 301 /taxonomy1/term /page?taxonomy1=term
Redirect 301 /taxonomy2/term /page?taxonomy2=term 
```

您也可以使用`RedirectMatch`, 或重写规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-22T08:01:07.873

如果您需要一个可以在页面上任何位置工作且没有任何标题重定向问题的重定向功能，请将此功能添加到您的`functions.php`：

```
function once_no_wp_redirect ( $page_id, $form_id ) { 
echo '<form method="post" id="' . $form_id . '" style="display: none;" action="'. get_permalink ( $page_id ) .'">
<input type="submit" />
</form>';
echo '<script>document.getElementById("' . $form_id . '").submit();</script>';
} 
```

而不是`wp_redirect()`使用`once_no_wp_redirect()`.

此外，您可以通过向表单添加更多输入字段来将变量传递到目标页面。示例：在成功提交注册表单后使用`wp_login_url()`重定向 url 自动登录用户。

如果您有任何改进，请随时发表评论。

# javascript - 如何在 raphael JS 文本中换行？

> ID：11647526
> 
> 赞同：3
> 
> 时间：2012-07-25T10:15:46.107
> 
> 标签：javascript, raphael

我试图使用`<br> and \n`，但它似乎不适用于 raphael js 中的文本。

我需要将它放在一个文本中，因为我使用不同语言的多种调整大小效果（一种语言有 3 行，一种有 4 行）。

我的代码不起作用：

```
var mytext = paper.text(150, 250, "Line1<br>Line2"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T10:27:46.267

它适用于`\n`，请参阅[jsFiddle 上的现场演示](http://jsfiddle.net/Nbt5K/)，说明这一点。

还可以查看[Raphaël 参考资料](http://raphaeljs.com/reference.html#Paper.text)，这是来自条目的引文`text()`：

> 绘制一个文本字符串。如果您需要换行符，请在字符串中输入“\n”。

# celery - 可以用芹菜进行分布式/多分支/网关设置吗？

> ID：11647527
> 
> 赞同：0
> 
> 时间：2012-07-25T10:16:11.720
> 
> 标签：celery

我有兴趣尝试 Celery 用于 python 的分布式任务队列。

在我们的场景中，我们有多个分支，每个分支都会运行一个 RabbitMQ 服务器，我希望能够在分支之间执行任务。

例如，在带有 RabbitMQ 实例 C 的分支 AI 队列任务 B 中。现在需要发生的是，任务 B 从实例 C 转发到在另一个分支 E 中运行的 RabbitMQ 实例 D。在分支 E 中，一个工作进程拿起任务，响应完成后返回等。

互联网上是否有示例概述了如何设置它，或者您知道这是否有效？

看起来 RabbitMQ 的 Federation / Shovel 特性是要走的路，但想知道是否有人在这种情况下使用过 Celery / RabbitMQ？

非常感谢，帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T22:32:03.547

我觉得你应该看看

*   联合会 [http://www.rabbitmq.com/federation.html](http://www.rabbitmq.com/federation.html)

*   铲子 [http://www.rabbitmq.com/shovel.html](http://www.rabbitmq.com/shovel.html)

# visual-studio-2010 - 在 Visual Studio 2012 中编译 Moles 时出现错误“类型或命名空间 xxxx 不存在”

> ID：11647530
> 
> 赞同：11
> 
> 时间：2012-07-25T10:16:22.277
> 
> 标签：visual-studio-2010, visual-studio-2012, moles, microsoft-fakes

我正在尝试编译在 Visual Studio 2010 中开发的现有项目（目标 .NET4），现在正在测试迁移到 VS2012。

当我用 moles 编译现有项目时，我经常收到以下错误。

> 命名空间“System.Security.Claims”中不存在类型或命名空间名称“Claim”（您是否缺少程序集引用？） [C:\ProjectPath\Project.Tests.Unit\obj\Debug\Moles\m\ mgcsproj] C:\ProjectPath\Project.Tests.Unit\mgcs

显示此消息的各种类型的巨大列表。

有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T09:11:15.423

根据这篇文章，我们从 mole/stub 生成中排除了一些命名空间和类型：

[Visual Studio 11 / .NET 4.5 中的故障排除](http://research.microsoft.com/en-us/projects/moles/molesdev11.aspx)

现在正在编译（一些测试仍然失败，但它正在编译）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:27:51.367

我们从 VS 2010 升级到 VS 2010 SP1 时遇到了困难。该服务包包含不同的 CLR 方法，最新版本的 Moles 无法理解这些方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:32:21.780

我建议更新您的 Moles 测试以使用[Fakes and Stubs](http://msdn.microsoft.com/en-us/library/tfs/hh549175%28v=vs.110%29.aspx)（Moles 的发布版本）。 [Fakes 和 Stubs](http://msdn.microsoft.com/en-us/library/tfs/hh549175%28v=vs.110%29.aspx)包含在 .NET 4.5 和 C# 5 中，并受 Visual Studio 2012 支持。转换为 Fakes 并不困难，因为它与 Moles 基本相同。

我打算将您指向[@Peter 发布的同一篇文章](http://research.microsoft.com/en-us/projects/moles/molesdev11.aspx)。（好电话，彼得！）所描述的解决方法应该可以解决您的问题。

我认为问题在于 Moles 是为 3.0-4.0 .NET 框架设计的。4.5 .NET Framework 集成了该版本的一些新功能，例如新的异步支持。Moles 没有工具来处理这种新的异步范例，并且会错误地检测代码。为了防止此类问题，编译器通常包含受支持的版本开关，并且根本不会编译未来版本的代码。好像是这样，这里。我不记得了，但检查 Moles 输出窗口；它可能会报告这些命名空间没有编译到一个被合并的程序集中。

**关于升级...**

[Visual Studio 2012 更新 2](http://support.microsoft.com/kb/2797912)为高级 SKU 添加了假货支持。

我建议升级，因为：

*   Moles 框架从未得到官方支持
*   痣不是一个完整的产品
*   Moles 将不会收到未来的更新（例如导致此问题的更新）

如果您是软件公司、开发商店或 IT 部门的员工，您应该能够轻松地向您的工作经理证明 VS2012 Premium MSDN 订阅 SKU 的费用是合理的。如果您为自己付费而不是定期为合同工作计费，或者购买许可证而不是 MSDN 订阅，您可能会发现这是一个昂贵的选择。

# javascript - 需要用javascript创建一个Html表

> ID：11647531
> 
> 赞同：1
> 
> 时间：2012-07-25T10:16:27.363
> 
> 标签：javascript, html

> **可能重复：**
> [从 javascript 数组创建 HTML 表](https://stackoverflow.com/questions/9549595/create-html-table-from-javascript-array)

我得到了一个像这样的数组

```
var univArray = new Array(
        {name: "Stanford University", nick: "Stanford", ownership: "private", sys: "n/a", SATh: 1550, SATl: 1360, tuition: 27204, room: 8680},
        {name: "University of California, Berkeley", nick: "UC Berkeley", ownership: "public", sys: "University of California", SATh: 1440, SATl: 1170, tuition: 4200, room: 10608},
        {name: "University of California, Santa Cruz", nick: "UC Santa Cruz", ownership: "public", sys: "University of California", SATh: 1270, SATl: 1030, tuition: 4384, room: 9708},
        {name: "San Francisco State University", nick: "SFSU", ownership: "public", sys: "CalState", SATh: 1120, SATl: 850, tuition: 1826, room: 6736},
        {name: "San Jose State University", nick: "SJSU", ownership: "public", sys: "CalState", SATh: 1140, SATl: 860, tuition: 1912, room: 7395},
        {name: "Sonoma State University", nick: "Sonoma State", ownership: "public", sys: "CalState", SATh: 1140, SATl: 930, tuition: 2226, room: 9606},
        {name: "California State University, Hayward", nick: "CalState Hayward", ownership: "public", sys: "CalState", SATh: 1050, SATl: 810, tuition: 1800, room: 6435},
        {name: "University of San Francisco", nick: "USF", ownership: "private", sys: "Roman Catholic", SATh: 1240, SATl: 1030, tuition: 21780, room: 9080},
        {name: "Santa Clara University", nick: "SCU", ownership: "private", sys: "Roman Catholic", SATh: 1300, SATl: 1110, tuition: 23445, room: 8904},
        {name: "Mills College", nick: "Mills College", ownership: "private", sys: "n/a", SATh: 1130, SATl: 920, tuition: 19482, room: 7832}
        ); 
```

我应该如何使用 javascript 创建一个表？有人可以帮忙……我是新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:19:48.733

采用`document.createElement("TABLE")`

更多信息请[点击此处](http://msdn.microsoft.com/en-us/library/ie/ms536389%28v=vs.85%29.aspx)或[此处](https://developer.mozilla.org/en/DOM/document.createElement)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:00:33.163

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<TITLE> New Document </TITLE>
<META NAME="Generator" CONTENT="EditPlus">
<META NAME="Author" CONTENT="">
<META NAME="Keywords" CONTENT="">
<META NAME="Description" CONTENT="">
</HEAD>
<script>
function tableView(){
var univArray = new Array(
{name: "Stanford University", nick: "Stanford", ownership: "private", sys: "n/a", SATh: 1550, SATl: 1360, tuition: 27204, room: 8680},
    {name: "University of California, Berkeley", nick: "UC Berkeley", ownership: "public", sys: "University of California", SATh: 1440, SATl: 1170, tuition: 4200, room: 10608},
    {name: "University of California, Santa Cruz", nick: "UC Santa Cruz", ownership: "public", sys: "University of California", SATh: 1270, SATl: 1030, tuition: 4384, room: 9708},
    {name: "San Francisco State University", nick: "SFSU", ownership: "public", sys: "CalState", SATh: 1120, SATl: 850, tuition: 1826, room: 6736},
    {name: "San Jose State University", nick: "SJSU", ownership: "public", sys: "CalState", SATh: 1140, SATl: 860, tuition: 1912, room: 7395},
    {name: "Sonoma State University", nick: "Sonoma State", ownership: "public", sys: "CalState", SATh: 1140, SATl: 930, tuition: 2226, room: 9606},
    {name: "California State University, Hayward", nick: "CalState Hayward", ownership: "public", sys: "CalState", SATh: 1050, SATl: 810, tuition: 1800, room: 6435},
    {name: "University of San Francisco", nick: "USF", ownership: "private", sys: "Roman Catholic", SATh: 1240, SATl: 1030, tuition: 21780, room: 9080},
    {name: "Santa Clara University", nick: "SCU", ownership: "private", sys: "Roman Catholic", SATh: 1300, SATl: 1110, tuition: 23445, room: 8904},
    {name: "Mills College", nick: "Mills College", ownership: "private", sys: "n/a", SATh: 1130, SATl: 920, tuition: 19482, room: 7832}
    );
for (var i = 0; i < univArray.length; i++){addRow("dataTable",univArray[i].name,univArray[i].nick,univArray[i].ownership,univArray[i].sys,univArray[i].SATh,univArray[i].SATl,univArray[i].tuition,univArray[i].room);
//alert(univArray[i].name);
}
}
function addRow(tableID,name,nick,owner,sys,sath,sati,tuition,room) {
var table = document.getElementById(tableID);
var rowCount = table.rows.length;

var row = table.insertRow(rowCount);

var cell1 = row.insertCell(0);
var element1 = document.createElement("input");
element1.type = "text";
cell1.appendChild(element1);
cell1.innerHTML=name;

var cell2 = row.insertCell(1);
var element2 = document.createElement("input");
element2.type = "text";
cell2.appendChild(element2);
cell2.innerHTML=nick;

var cell3 = row.insertCell(2);
var element3 = document.createElement("input");
element3.type = "text";
cell3.appendChild(element3);
cell3.innerHTML=owner;

var cell4 = row.insertCell(3);
var element4 = document.createElement("input");
element4.type = "text";
cell4.appendChild(element4);
cell4.innerHTML=sys;

var cell5 = row.insertCell(4);
var element5 = document.createElement("input");
element5.type = "text";
cell5.appendChild(element5);
cell5.innerHTML=sath;

var cell6 = row.insertCell(5);
var element6 = document.createElement("input");
element6.type = "text";
cell6.appendChild(element6);
cell6.innerHTML=sati;

var cell7 = row.insertCell(6);
var element7 = document.createElement("input");
element7.type = "text";
cell7.appendChild(element7);
cell7.innerHTML=tuition;

var cell8 = row.insertCell(7);
var element8 = document.createElement("input");
element8.type = "text";
cell8.appendChild(element8);
cell8.innerHTML=sath;
}
</script>
<BODY onload='tableView();'>

<TABLE id="dataTable" width="350px" border="1">
<TR>
<TH>name</TH>
<TH>nick</TH>
<TH>ownership</TH>
<TH>sys</TH>
<TH>SATh</TH>
<TH>SATi</TH>
<TH>tuition</TH>
<TH>room</TH>
</TR>

</TABLE>
</BODY>
</HTML> 
```

**这对我来说很好**

# google-app-engine - 数据存储脏读和删除

> ID：11647535
> 
> 赞同：0
> 
> 时间：2012-07-25T10:16:41.610
> 
> 标签：google-app-engine, google-cloud-datastore

我之前在[数据存储区发布了一个问题：删除事务之外的实体，](https://stackoverflow.com/questions/10450936/datastore-deleting-entities-outside-transactions)但没有得到太多运气，也许我在描述问题时太复杂了，所以我会尝试用不同的问题来解决这个问题：

我没有对我的实体使用任何事务，并意识到我可能会因为脏读而丢失提交的更新，并且完全可以接受它（主要是统计数据）。我唯一需要确定的是，如果我在已经进行脏读但没有提交更新之后删除它，它不会写回该实体。我不想通过使用事务来引入争用或性能问题，因为删除很少，更新很多。

```
Servlet A
{
   entity = persistenceManager.getObjectById(Entity.class, key)
   //Stuff
   persistenceManager.deletePersistent(entity);
}

Servlet B
{
   entity = persistenceManager.getObjectById(Entity.class, key) // dirty read made before deletion

   //Updated some fields, after deletion was commited
   persistenceManager.flush(); ? the object would be written back
} 
```

我已经通过在脏读和删除之间在 B 中引入 20 秒睡眠来测试上述情况，它确实将对象写回（实际上这是第一个问题的答案，将更新该问题）。

我可以依靠 memcache 让 Servlet B 在让实体知道 A 即将删除实体之前让我们通过查看从 A 放置的布尔缓存条目“deleting-entity-[KEY]”来说，如果它在那里我不应该读取 servlet B 中的实体，我知道 memcache 不能保证不驱逐数据，但如果它存在，它是否可以从 servlet B 立即访问？

那里有更好的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:19:02.983

在 servlet B 中使用事务来验证实体是否仍然存在，然后再写入。

为什么要避免交易？这就是事务的用途，没有它们，您无法保证任何数据同步。

# php - 有没有办法按时间安排恢复 MySQL 数据库

> ID：11647538
> 
> 赞同：0
> 
> 时间：2012-07-25T10:16:53.103
> 
> 标签：php, mysql, ftp, backup, restore

我一直在创建预定的 MySQL 备份，然后使用 PHP 通过 FTP 将它们发送到另一台测试服务器。我需要知道是否有可以运行的程序来恢复我的其他服务器上的文件，但使用计划的恢复？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T10:28:08.183

您可以创建一个启动 shell 代码的 CRON 作业。

例如，如果你想注入一个备份数据库：

```
mysql -u user -ppassword database < yourbackupfile.sql 
```

现在如果你想创建一个转储：

```
mysqldump -u user -ppassword database > yourbackupfile.sql 
```

# nhibernate - 同时增量更新 Nhibernate 实体值

> ID：11647539
> 
> 赞同：1
> 
> 时间：2012-07-25T10:17:04.693
> 
> 标签：nhibernate, concurrency, fluent-nhibernate

我对 NHibernate 还很陌生——请多多包涵。

所以，我有一个 Nhibernate 实体，它被流畅地映射。它有一个我想要增加的整数属性，仅此而已 - 没有其他内容被更新等。

当两个或多个客户端更新同一个实体时，如何确保并发？NHibernate 是否开箱即用地为我处理这个问题？

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:41:06.753

NHibernate 会有所帮助，这取决于您要使用哪种并发模型。[Ayende](http://ayende.com/blog/3946/nhibernate-mapping-concurrency)有一篇漂亮的帖子，你应该阅读。

# iphone - 如何在 iOS 上的按钮操作上显示忙碌指示器？

> ID：11647540
> 
> 赞同：1
> 
> 时间：2012-07-25T10:17:09.953
> 
> 标签：iphone, ios

我想在按钮操作上启动繁忙指示器，我在 IB 操作中使用以下代码：

```
 busyIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
 busyIndicator.center = self.view.center;
 [busyIndicator setColor:[UIColor redColor]];
 [self.btnInjuryPrevention addSubview:busyIndicator];
 [self.view addSubview:busyIndicator]; // spinner is not visible until started

[busyIndicator startAnimating];
if(![AppStatus isAppOnline]) {
    noInternetViewController = [[NoInternetViewController alloc] initWithNibName:@"NoInternetViewController" bundle:[NSBundle mainBundle]];
    noInternetViewController.view.tag = CHILD_CONTROLLER_TAG;
    [self.navigationController pushViewController:noInternetViewController animated:YES];
    NSLog(@"Yoy are offline..>!!");
}
else
{
    mInjuryPreventionViewController=[[InjuryPreventionViewController alloc] initWithNibName:@"InjuryPreventionViewController" bundle:nil withHeader:@" Injury Prevention" withId:INJURY_PREVENTION_ID];
    mInjuryPreventionViewController.view.tag = CHILD_CONTROLLER_TAG;
    [self.navigationController pushViewController:mInjuryPreventionViewController animated:YES];
    //[mInjuryPreventionViewController release];
}
// [self removeLoadingView];
[busyIndicator stopAnimating]; 
```

我使用上面的代码，但是繁忙的指示器不会启动，所以你能告诉我这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T10:53:17.493

如果您在单个块中启动和停止动画，您将看不到任何内容。您可以认为该`startAnimating`方法的意思是“当控制权返回操作系统时开始制作动画”。

目前尚不清楚为什么你需要一个微调器。创建视图控制器需要很长时间吗？不过，如果您将视图控制器的内容移动到新方法中，您可以执行以下操作：

```
...
// create busy indicator
[busyIndicator startAnimating];
[self performSelector:@selector(createViewController) withObject:nil afterDelay:0]; 

...

// at the end of the createViewController method...
[busyIndicator stopAnimating]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:45:54.530

正如我从你给定的代码中了解到的，首先你在一些 UIViewController 上，你在哪里添加你的 UIActivityIndi​​catorView，毕竟你做了两个条件 if-else 你初始化另外两个 UIViewController 所以在这个视图中（在 if-else 之后生成）你的 UIActivityIndi​​catorView将在您添加时显示为

```
 [self.view addSubview:busyIndicator]; // spinner is not visible until started 
```

请用 if 语句定义你的函数执行。？

继续编码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-18T17:46:01.180

由于您在单个方法中启动和停止 busuInde​​cator，无需任何长时间处理，因此这两个函数都在毫秒内执行，因此您无法在 UI 上看到 busyIndecator。在 UI 上显示 busyIndecator 或任何插座。我应该有一些人类可识别的时间跨度。像：

```
[busyIndicator startAnimating];
//Do EXTREME PROCESSING!!!
[busyIndicator stopAnimating]; 
```

# javascript - 为什么 bindAttr 不适用于数组

> ID：11647543
> 
> 赞同：0
> 
> 时间：2012-07-25T10:17:18.470
> 
> 标签：javascript, ember.js, handlebars.js

我只是好奇为什么在我的[示例](http://jsfiddle.net/sauliuslx/QGUbE/6/) `bindAttr`中不使用数组。它会在未来实施还是故意制造，或者我遗漏了什么？

**车把**

```
<script type="text/x-handlebars">
  <h1>Using bindAttr with objects</h1>
  {{#each App.residents}}
  <div {{bindAttr class="isIrish:irish"}}>{{name}}</div>
  {{/each}}
</script>

<script type="text/x-handlebars">
  <h1>Using bindAttr with arrays</h1>
  {{#each App.residents2}}
  <div {{bindAttr class="[1]:irish"}}>{{[0]}}</div>
  {{/each}}
</script> 
```

​<strong>javascript

```
App = Ember.Application.create({
    residents: [
        {name: "St. Patrick", isIrish: true},             
        {name: "Leprechaun", isIrish: true},        
        {name: "Saulius", isIrish: false},                
    ],
    residents2: [
        ["St. Patrick",true],
        ["Leprechaun",true],
        ["Saulius",false],        
    ]
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:23:18.593

我找到了一种方法来完成这项工作：

```
<script type="text/x-handlebars">
  <h1>Using bindAttr with arrays</h1>
  {{#each resident in App.residents2}}
    <div {{bindAttr class="resident.lastObject:irish"}}>{{resident.firstObject}}</div>
  {{/each}}
</script> 
```

​</p>

# java - 空指针异常 Spring 集成消息传递

> ID：11647547
> 
> 赞同：1
> 
> 时间：2012-07-25T10:17:36.103
> 
> 标签：java, spring, dependency-injection, jms, spring-integration

我正在开始使用 Spring 集成 ....以下代码产生了一个空指针异常。

Spring context.xml（弹簧配置）

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:int="http://www.springframework.org/schema/integration"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/integration
    http://www.springframework.org/schema/integration/spring-integration-2.1.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd">
    <context:component-scan base-package="co.in" />

    <int:channel id="input" />
    <int:channel id="output">
        <int:queue capacity="10" />
    </int:channel>
    <int:service-activator input-channel="input"
        output-channel="output" ref="messageHandler" />
</beans> 
```

app.java（主类）

```
package co.in;

import org.springframework.context.support.ClassPathXmlApplicationContext;
import org.springframework.integration.Message;
import org.springframework.integration.MessageChannel;
import org.springframework.integration.core.PollableChannel;
import org.springframework.integration.support.MessageBuilder;

public class app {
    public static void main(String[] args) {
        ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(
                "classpath:resources/spring-context.xml");
        context.start();

        MessageChannel input = (MessageChannel) context.getBean("input",
                MessageChannel.class);
        PollableChannel output = (PollableChannel) context.getBean("output",
                PollableChannel.class);
        input.send(MessageBuilder.withPayload("Pro Spring Integration Example")
                .build());

        Message<?> reply = output.receive();
        System.out.println("received: " + reply);

    }
} 
```

MessageHandler.java（服务激活器 bean 定义）

```
package co.in;

import org.springframework.integration.annotation.ServiceActivator;

@Component
public class MessageHandler {

    @ServiceActivator
    public String handleMessage(String message) {
        System.out.println("Received message: " + message);
        return "MESSAGE:" + message;
    }
} 
```

错误堆栈

```
Exception in thread "main" org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from class path resource [resources/spring-context.xml]; nested exception is java.lang.NullPointerException
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:420)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:342)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:212)
    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:113)
    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:80)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:123)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:422)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:352)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at co.in.app.main(app.java:11)
Caused by: java.lang.NullPointerException
    at org.springframework.beans.factory.support.BeanDefinitionReaderUtils.generateBeanName(BeanDefinitionReaderUtils.java:115)
    at org.springframework.beans.factory.support.BeanDefinitionReaderUtils.generateBeanName(BeanDefinitionReaderUtils.java:159)
    at org.springframework.beans.factory.support.DefaultBeanNameGenerator.generateBeanName(DefaultBeanNameGenerator.java:31)
    at org.springframework.beans.factory.xml.XmlReaderContext.generateBeanName(XmlReaderContext.java:77)
    at org.springframework.beans.factory.xml.AbstractBeanDefinitionParser.resolveId(AbstractBeanDefinitionParser.java:102)
    at org.springframework.beans.factory.xml.AbstractBeanDefinitionParser.parse(AbstractBeanDefinitionParser.java:59)
    at org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:69)
    at org.springframework.integration.config.xml.AbstractIntegrationNamespaceHandler.parse(AbstractIntegrationNamespaceHandler.java:57)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1297)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1287)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:135)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:92)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:507)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:398)
    ... 14 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:52:02.513

根据堆栈跟踪，您似乎正在使用 Spring Integration 2.0.x。

你用的是什么版本的Spring？

我建议你使用当前版本（2.1.3.RELEASE）。

# c++ - 如何将 c++ 库路径添加到 xcode

> ID：11647555
> 
> 赞同：2
> 
> 时间：2012-07-25T10:17:54.777
> 
> 标签：c++, ios, xcode, shared-libraries

我正在使用 C+ 库 Ex:sample.lib。现在我想将此库路径添加到xcode中的**其他链接器标志中。**

我这样添加

```
-L/(library path) -llibsample 
```

或者

```
-L/(library path) -lsample 
```

或者

```
-L/(library path) -lsample.lib 
```

> ld：找不到-llibsample或-lsample或-lsample.lib collect2的库：ld返回1退出状态命令/Xcode Tools/Platforms/iPhoneSimulator.platform/Developer/usr/bin/llvm-gcc-4.2失败，退出代码为1

如何将我的 lib 文件添加到其他链接器标志中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:04:42.503

请检查 LD_LIBRARY_PATH，因为如果 LD_LIBRARY_PATH 设置不正确，那么也会出现这个问题

# android - 在 EditText android 中自定义 InputType

> ID：11647557
> 
> 赞同：0
> 
> 时间：2012-07-25T10:17:58.003
> 
> 标签：android

我的布局中有一个`EditText`字段，带有`android:inputType="number"`. 困扰我的是，在右下角，有一个按钮说`next`，是否可以将其自定义为`Done`此处有一个按钮，而不是触发键盘“消失”？

![在此处输入图像描述](../Images/f364ea2f6651ebda421ad0969d405835.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:22:39.980

在你的 xml 文件中`android:imeOptions="actionDone"`放入`EditText`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T10:19:21.513

在您的 EditText 属性集`android:imeOptions`属性中

```
android:imeOptions="actionDone" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T10:20:59.720

您需要将相对 EditText 的**android:imeOptions**属性设置`actionDone`为：

```
<EditText 
    android:id="@+id/edittxt_done"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="Enter text"
    android:imeOptions="actionDone"
    /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T13:24:21.503

使用以下代码

```
editText.setImeOptions(EditorInfo.IME_ACTION_DONE); 
```

或 xml 文件中的 android:imeOptions

# jquery - jquery 如果没有从下拉列表中选择

> ID：11647560
> 
> 赞同：1
> 
> 时间：2012-07-25T10:18:17.473
> 
> 标签：jquery

我有这个代码：

```
 $("#source_lang, #targ_lang").each(function(index, element) {

        if ($(this +'option:selected').length== 0) {
        //some code 
        }
        } 
```

当没有选择列表中的任何项目时，我想显示错误消息。这没有给我任何结果（错误消息不显示）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T10:20:18.080

```
$("#source_lang, #targ_lang").each(function() {
    if (this.selectedIndex === 0) {
        //some code 
    }
} 
```

或 - 不使用 each - 你也可以检查

```
if ($("#source_lang, #targ_lang").find('option:selected').length < 2) {
    ...
} 
```

（这意味着*至少有*一个选择没有被选中）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T10:20:35.397

使用`find()`：

```
if ($(this).find('option:selected').length== 0) {
        //some code 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:18:27.963

在这里，我已经为上述解决方案完成了 bins，您可以查看演示链接。

**演示：** [http ://codebins.com/bin/4ldqp9m](http://codebins.com/bin/4ldqp9m)

**HTML**

```
<div id="panel">
  <select id="sel_country" multiple="multiple" size="4" class="select">
    <option value="India">
      India
    </option>
    <option value="USA">
      USA
    </option>
    <option value="UK">
      UK
    </option>
    <option value="England">
      England
    </option>
    <option value="France">
      France
    </option>
    <option value="Australia">
      Australia
    </option>
    <option value="Norvey">
      Norvey
    </option>
    <option value="South Africa">
      South Africa
    </option>
    <option value="Malesiya">
      Malesiya
    </option>
    <option value="Dubai">
      Dubai
    </option>
  </select>
  <br/>
  <input type="button" id="btn1" name="btn1" value="Get Selected Values" />
  <div id="result">
  </div>
</div> 
```

**jQuery：**

```
$(function() {
    $("#btn1").click(function() {
        var seloptions = $("select#sel_country").val() || "";
        if (seloptions != "") {
            $("#result").text(seloptions);
        } else {
            $("#result").text("You have not selected any option(s)..!");
        }
    });
}); 
```

**演示：** [http ://codebins.com/bin/4ldqp9m](http://codebins.com/bin/4ldqp9m)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-14T17:34:31.263

当没有对 HTML SELECT 下拉菜单执行任何操作时， selectedIndex 为 -1。

**HTML**

```
<select name="city" id="select-dropdown">
    <option value="">Select City</option>
    <option value="4856">Mumbai</option>
    <option value="5684">London</option>
    <option value="5983">New York</option>
</select> 
```

**jQuery :**

```
if ($("#select-dropdown")[0].selectedIndex <= 0) {
    alert('Please select City.');
    $("#select-dropdown").focus();
    return false;
} 
```

试一次。它会起作用的。

# security - IE 中的“仅显示安全内容” - 无法解决

> ID：11647565
> 
> 赞同：0
> 
> 时间：2012-07-25T10:18:41.590
> 
> 标签：security, internet-explorer, pdf, https

我工作的网站有一堆 PDF 文档，它们在弹出窗口的 iframe 中加载。由于消息“仅显示安全内容”，我无法在 IE 中打开任何文档。当我单击“显示所有内容”时，弹出窗口关闭，因此文档永远不会显示。

我知道我可以禁用这个客户端，但问题是我们有很多用户，不要指望他们都在 IE 中禁用这个选项，所以它需要真正修复服务器端。

经过一些研究，我得出的结论是，发生这种情况是因为我工作的网站是一个安全的网站 (https)，​​但是加载到 iframe 中的 PDF 文档是从另一个不安全的网站加载的。我不能只在链接中添加 https，否则 PDF 不会加载。所以我需要以某种方式欺骗 IE，让它认为它正在加载安全的内容，而实际上它不是......我认为......

谁能进一步启发我，也许可以提出解决方案：D

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:25:00.000

一种解决方案是在您的应用程序中创建一个后端 servlet/CGI 脚本，该脚本将用作另一个站点中托管的静态内容的包装器。这样，您的内容将被安全交付。

如果您有权访问其配置，您也可以从您的网络服务器执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:57:09.437

您需要从 https 放置 PDF。否则，您需要从异地 URL 读取 PDF，然后从 https 服务器脚本二进制写入。

# java - @Temporal.DATE 未显示全年

> ID：11647568
> 
> 赞同：0
> 
> 时间：2012-07-25T10:18:48.283
> 
> 标签：java

```
@Temporal(TemporalType.DATE)
@Column(name = "CNTRT_ST_DATE")
private Date dtcntrtStDate; 
```

我从数据库中检索这个值并显示到一个`<sj:datePicker>`字段中。我想显示*MM/dd/yyyy*格式，但它显示为*MM/dd/yy*。

我想展示全年。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:22:12.227

如果您有`Date`并且只想打印它：[使用自定义格式格式化日期](http://www.exampledepot.com/egs/java.text/formatdate.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:42:05.583

您可以使用`displayFormat`的属性`datePicker`，如下所示：

```
<sj:datepicker displayFormat="MM/dd/yyyy" value="dtcntrtStDate" id="..." name="...." label="..."/> 
```

如果我在单击日期选择器图像时使用此 displayFormat 其显示日期“July/17/20122012”。所以保存无效..

# c# - c#上windowsform中的动态复选框

> ID：11647573
> 
> 赞同：0
> 
> 时间：2012-07-25T10:19:11.247
> 
> 标签：c#, forms, checkbox

我想要一组复选框，例如具有不同背景颜色的 CheckListBox。有什么方法可以让我拥有这个组并在运行时进行编辑？

我使用下面的代码，但它不能有不同的背景颜色：

```
 foreach (var color in _colors)
            {
                var tmpCheckBox = new CheckBox
                                    {
                                       // Location = objLocation,
                                        BackColor = color,
                                        Text = color.Name
                                    };
                objLocation.X = objOffset;
                objLocation.Y += tmpCheckBox.Height + objOffset;
                clbColorAnalyzeResult.Items.Add(tmpCheckBox);
            } 
```

只是提到这一点：clbColorAnalyzeResult.Controls.Add(tmpCheckBox); 无济于事，因为没有滚动条，我无法使用选定的索引！

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:23:22.513

您必须将复选框添加到`Controls`表单的属性中。

也许您将不得不创建自己的自定义列表框并覆盖 OnDrawItem 方法。像这样的东西：

```
class MyCheckedListBox : CheckedListBox
    {
        protected override void OnDrawItem(DrawItemEventArgs e)
        {

        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:29:24.097

做这个！

您应该将复选框添加到 a`Panel`并设置`AutoScroll`为 true，以获取滚动条。您可以订阅`GotFocus`and`LostFocus`事件以确定选择了哪个复选框。

# php - sqlsrv_fetch_array 在 php 中返回 true

> ID：11647574
> 
> 赞同：0
> 
> 时间：2012-07-25T10:19:11.340
> 
> 标签：php, sql-server

所以，我以前遇到过这个问题，从来没有解决过，但现在我又遇到了，我真的希望它得到解决。

在 PHP 文件中，我执行以下几行：

问题出在 querySelect() 中，您可以在下面看到..

```
$stmt = sqlsrv_query($dbconn, "SELECT * FROM USERS");
$row = sqlsrv_fetch_array( $stmt, SQLSRV_FETCH_ASSOC );
Logger::logg("ROW (not in method): " . var_export($row, true), LV);

querySelect("SELECT * FROM USERS",$dbconn); 
```

我得到以下信息：（第一个输出是正确的并选择了第一个用户，你可以看到返回一个关联数组）。然后在 querySelect $row 中每次都为真。（有更多的输出，因为它为每个用户当然......）

```
07/25/12 12:11:26 - ROW (not in method): array (
  'LopNr' => 1,
  'Mail' => 'xxxx                                                                                            ',
  'Password' => 'xxx',
  'Auth' => '1',
  'DisplayName' => 'xxx            ',
  'sdsd' => xx,
  'sdsd' => 'xxx',
  'ts' => 1342093599,
  'Cell' => NULL,
  'WantsSMS' => xxx,
).
07/25/12 12:11:27 - Query: SELECT * FROM USERS.
07/25/12 12:11:27 - ROW: true.
07/25/12 12:11:27 - ROW: true.
07/25/12 12:11:27 - ROW: true.
07/25/12 12:11:27 - ROW: true.
07/25/12 12:11:27 - ROW: true.
07/25/12 12:11:27 - ROW: true.
07/25/12 12:11:27 - ROW: true.
07/25/12 12:11:27 - ROW: true.
07/25/12 12:11:27 - ROW: true.
07/25/12 12:11:27 - ROW: true.
07/25/12 12:11:27 - ROW: true.
07/25/12 12:11:27 - ROW: true.
07/25/12 12:11:27 - ROW: true.
07/25/12 12:11:27 - ROW: true.
07/25/12 12:11:27 - ROW: true.
07/25/12 12:11:27 - ROW: true.
07/25/12 12:11:27 - ROW: true.
07/25/12 12:11:27 - ROW: true.
07/25/12 12:11:27 - ROW: true.
07/25/12 12:11:27 - ROW: true. 
```

querySelect 是这样实现的：

```
function querySelect($query, $dbconn, $fetchLimit = 1000000)
{
    $stmt = sqlsrv_query($dbconn, $query);
    Logger::logg(LOGG_QRY_ERR_VERBOSE . $query, LV);
    if ( !$stmt )
    {
        Logger::logg(LOGG_QRY_ERR);
        throw new Exception(ERR_QUERY);
    }
    $resultArray = array();
    while ( $row = sqlsrv_fetch_array( $stmt, SQLSRV_FETCH_ASSOC ) && $fetchLimit > 0)
    {
        Logger::logg("ROW: " . var_export($row, true), LV);
        $resultArray[] = $row;
        $fetchLimit--;
    }
    return $resultArray;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:47:52.957

我猜测

```
$row = sqlsrv_fetch_array( $stmt, SQLSRV_FETCH_ASSOC ) && $fetchLimit > 0 
```

被解释为

```
$row = (sqlsrv_fetch_array( $stmt, SQLSRV_FETCH_ASSOC ) && $fetchLimit > 0) 
```

即它包括`&& $fetchLimit > 0`在作业中。请参阅有关运算符优先级[的 PHP 手册](http://www.php.net/manual/en/language.operators.precedence.php)。

尝试将其更改为

```
( $row = sqlsrv_fetch_array( $stmt, SQLSRV_FETCH_ASSOC ) ) && $fetchLimit > 0 
```

或者

```
$row = sqlsrv_fetch_array( $stmt, SQLSRV_FETCH_ASSOC ) and $fetchLimit > 0 
```

(`and`优先级低于`=`)

# css - Flex TabNavigator 选项卡颜色不起作用

> ID：11647575
> 
> 赞同：0
> 
> 时间：2012-07-25T10:19:17.497
> 
> 标签：css, apache-flex, tabnavigator

我正在尝试将 TabNavigator 中的选项卡设置为橙色。我尝试了许多不同的方法，但似乎都不起作用（即背景总是标准灰色）。

```
<fx:Style>
@namespace mx "library://ns.adobe.com/flex/mx";
mx|TabNavigator {
   fillColors: #FBE0CC;
}
</fx:Style> 
```

还...

```
<fx:Style>
@namespace mx "library://ns.adobe.com/flex/mx";
mx|Tab {
   fillColors: #FBE0CC;
}
</fx:Style> 
```

还...

```
.myTabStyle {
    tabStyleName: "myTabs"
}
.myTabs {
    backgroundColor: #ff0000;
    fillColor: #FBE0CC;
} 
```

和

```
<mx:TabNavigator ... styleName="myTabStyle" .. > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:37:09.687

这个怎么样？

```
mx|Tab {
    fillColors: #FBE0CC, #FBE0CC;
    fillAlphas: 1, 1;
} 
```

# python - 用于 python 的 CSS 感知智能 html 解析器

> ID：11647581
> 
> 赞同：2
> 
> 时间：2012-07-25T10:19:39.360
> 
> 标签：python, html, html-parsing, screen-scraping

我正在寻找一个 HTML 解析器，它支持 css 并且工作方式与浏览器呈现 html 的方式相同。我实际上正在寻找 element.innerText (DOM-JS) 的等价物。让我举个例子。考虑以下html，

```
<style>
.AAA { display:inline;}
.BBB { display:none;}
.CCC { display:inline ;}
</style>
<span id="sarim">

    <span class="AAA">a</span>
    <span style="display:none">b</span>
    c
    <span class="CCC">d</span>
    <div style="display:inline">e</div>
    <span class="BBB">f</span>

</span> 
```

现在如果我在浏览器中运行上面的 html 并运行`document.getElementById('sarim').innerText`返回“acd e”。这正是我需要的。但是，如果我使用 html 解析器并剥离 html 标签，它将返回“abcdef”。我需要一个解析器，它会自动忽略读取它们的 css 属性的“b”和“f”。

知道哪个解析器支持这个吗？我试过美丽的肥皂，

```
hiddenelements = sarim.findAll(True, {'style' : 'display:none'})
for p in hiddenelements:
    p.extract() 
```

现在`sarim.text`返回文本，但这仅适用于内联样式，这是手动过程，对于基于 css 类的样式失败，并且由于类将是随机的，我正在寻找一个可以自动执行此操作的智能解析器。

我有一个安全的想法来运行一个无头 wekbit (phantomjs.org) 并使用 element.innerText 来检索可见文本，有更好的主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:12:14.823

[Python-Webkit](http://www.gnu.org/software/pythonwebkit/)怎么样？它是 webkit 的 Python 绑定。

> 在访问和操作 Webkit 可用的全部功能（例如 HTML5）时，Python Webkit DOM 项目使 python 成为 javascript 的完全对等体。所有可以用 javascript 完成的事情，例如 getElementsbyTagName 和 appendChild，通过 onclick 的事件回调，通过 window.setTimeout 的超时回调，甚至使用 XMLHttpRequest 的 AJAX，也可以从 python 完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:15:40.720

我在[https://github.com/JamieMason/Asterisk](https://github.com/JamieMason/Asterisk)使用 PhantomJS 制作了一个 CSS 感知 HTML minifier - 它很容易为您的目的分叉和修改它。

主要工作是使用[https://github.com/JamieMason/Asterisk/blob/master/src/browser.js](https://github.com/JamieMason/Asterisk/blob/master/src/browser.js)完成的，对于我的用例，我检查样式以生成 HTML 输出 - 但您可以返回 innerText 。

# sql - 在从数据表中显示的组合框中选择一个值，并将其作为 INNER JOIN 填充到 datagridview

> ID：11647588
> 
> 赞同：0
> 
> 时间：2012-07-25T10:20:09.850
> 
> 标签：sql, datagridview, combobox

请看一下我的以下代码：

```
private void button2_Click(object sender, EventArgs e)
{
    SqlConnection conn = new SqlConnection("Data Source=localhost; database=KnowledgeEssentials;Trusted_Connection= True;connection timeout=30");

    SqlDataAdapter ad = new SqlDataAdapter("SELECT  distinct Problem FROM ProblemT ORDER BY Problem", conn);
    //ad.SelectCommand = new SqlCommand(@"SELECT  distinct Problem FROM ProblemT", conn);
    DataTable dt = new DataTable();
    ad.Fill(dt);

    for (int i = 0; i < dt.Rows.Count; i++)
    {
        comboBox1.Items.Add(dt.Rows[i]["Problem"]);
    }
}

private void button3_Click(object sender, EventArgs e)
{
    SqlConnection conn = new SqlConnection("Data Source=localhost; database=KnowledgeEssentials;Trusted_Connection= True;connection timeout=30");
    SqlDataAdapter ad = new SqlDataAdapter("SELECT ProblemIDQA, Question FROM dbo.ProblemT INNER JOIN dbo.QuestionAnswer ON dbo.ProblemT.ProblemID = dbo.QuestionAnswer.ProblemIDQA", conn);
    DataTable dt = new DataTable();
    ad.Fill(dt);
    dataGridView1.DataSource = dt;
    comboBox1.DataSource = dt;
    //comboBox1.DataSource = "SELECT  distinct Problem FROM ProblemT ORDER BY Problem"; 
```

按钮 2 只是将数据填充到我的组合框

我需要按钮 3 在我的组合框中有一个选定的项目，以作为 INNER JOIN 填充到我的 datagridview .....例如

我在组合框中选择一个问题我按下按钮 3 它在 datagridview 中填充问题的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:42:08.220

在发布答案之前，我可能会要求进行一些澄清，但显然我还没有评论功能。

一些可能会有所帮助的事情是您的两个表的表模式定义，但我想我明白了您正在尝试做的事情的要点。这就是我要做的。

填充组合框时，我会将数据源绑定到数据表，而不是像您那样添加项目。（您必须将 ProblemID 列添加到您的查询中）

所以代替这个

```
for (int i = 0; i < dt.Rows.Count; i++)
{
    comboBox1.Items.Add(dt.Rows[i]["Problem"]);
} 
```

做这个

```
comboBox1.DisplayMember = "Problem";
comboBox1.ValueMember = "ProblemID"; 
comboBox1.DataSource = dt; 
```

现在在 Button3_Click 中（我实际上可能会在 comboBox1_SelectedIndexChanged 中执行此操作，但无论如何）通过选定的组合框值过滤您的查询。

```
if (comboBox1.SelectedValue != null)
{
  int problemID = (int) comboBox1.SelectedValue;
  SqlDataAdapter ad = new SqlDataAdapter("SELECT ProblemIDQA, Question FROM dbo.ProblemT INNER JOIN dbo.QuestionAnswer ON dbo.ProblemT.ProblemID = dbo.QuestionAnswer.ProblemIDQA WHERE ProblemT.ProblemID = " + problemID.ToString(), conn);
... 
```

不再需要在 button3_Click 中设置您的组合框数据源。此外，如果您想提高效率并且 QuestionAnswer 表的大小不是那么大，我不会在按钮单击中进行数据库查询，例如，我会在表单的加载事件中加载整个数据集所以它只加载一次。然后我会使用 DataView/BindingSource 对网格进行实际过滤。

# javascript - 磁性 div：在绝对定位的 div 内固定 div

> ID：11647593
> 
> 赞同：7
> 
> 时间：2012-07-25T10:20:40.373
> 
> 标签：javascript, jquery, html, scroll, position

我有以下页面：

[[关联]](https://dl.dropbox.com/s/tilydgoo7jcsjbu/Index.html)

该页面设计为水平滚动，因此一系列 div（黑色边框的）出现在一行中。

现在，我将较小的 div（红色）放在里面，这样它们就不会超出父 div，但同时，在滚动页面时，我希望它们像固定位置一样在父 div 内移动。

我会用一张图来解释自己。我希望我的 div 表现得像这样：

[[关联]](https://dl.dropbox.com/s/egipbbeul5b4y8g/IMG.gif)

任何人都可以帮忙吗？谢谢你的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:09:36.740

**更新**

* * *

创建了一些最小/实验性的 jQuery 插件： [https ://gist.github.com/3177804](https://gist.github.com/3177804)

你应该可以像这样使用它：http: [//jsfiddle.net/7q3Zu/2/](http://jsfiddle.net/7q3Zu/2/)

下载并包含插件 [https://raw.github.com/gist/3177804/556074672de8f200327d83f0146d98533c437ac3/jquery.magnetic.js](https://raw.github.com/gist/3177804/556074672de8f200327d83f0146d98533c437ac3/jquery.magnetic.js) 然后像这样调用它：

```
$(function() {

    $('.container').magnetic({  //call it on some scrollable container
        selector: '.object',    //what to fix
        left: 180,              //when to fix (px)
        right: 500              //when to unfix (px)
    });

});​ 
```

atm 这只是一个实验，不保证在任何浏览器中工作

（所以随时抓住要点并改进它：）

* * *

如评论中所述，您可以使用 Javascript 执行此操作。

这是使用[jQuery](http://jquery.com/)的示例：

[http://jsfiddle.net/7q3Zu/](http://jsfiddle.net/7q3Zu/)

**HTML**

```
​&lt;div class="container">
 <div class="object"></div>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**JS**

```
$(function() {
    var obj = $('.object');
    $(document).on('scroll', function() {

        var offset = $(this).scrollLeft()
        //fix the position a some point    
        if (offset >= 200) {
            obj.css('position', 'fixed').css('left', '20px');
        }
        //..and unfix it later       
        if (offset >= 500) {
            obj.css('position', 'absolute').css('left', '500px');
        }

    });
});​ 
```

**CSS**

```
.container{ 
    width: 4000px; 
   padding: 20px; 
    margin: 20px;
    border: 1px solid #ccc;
    height: 400px;
    position: relative;
}
.object{
  position: absolute;
    height: 400px;
    width :100px;
    background: red;
    left: 200px;
} 
```

# actionscript-3 - 获取 flash.display 包的来源

> ID：11647599
> 
> 赞同：0
> 
> 时间：2012-07-25T10:21:02.463
> 
> 标签：actionscript-3

我需要 flash.display 包的源代码，以便更好地了解图形和矢量。所以任何人都可以帮助我得到这个包裹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:50:52.480

该包源不可用作 ActionScript。它只有 ActionScript 接口，而实际实现是本机级别并内置在 Flash Player 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:12:27.490

向[http://adobe.com](http://adobe.com)询问，全球代码不是开源的 :)

# android - 锁定 ListView 或表格或其他东西？

> ID：11647607
> 
> 赞同：0
> 
> 时间：2012-07-25T10:21:43.143
> 
> 标签：android, listview, android-layout

我正在尝试构建公司概览，但在选择创建布局所需的方式时遇到了问题。
我想要的是您可以单击的（非滚动）项目列表。这是一个示例（具有我想要的应用程序的示例）：

![查看示例](../Images/c1ae2208a013c63036a9230acb3cdcda.png)

所以这是我想要的灰名单。

我有所有公司的数据，但有些是空的。因此，如果我有该公司的字符串“网站”，我希望显示网站块，如果您单击它，网站的意图就会启动。当没有电话号码时，我不希望它出现。

但我不清楚如何实现这一点：我应该制作一个`LinearLayout`或`Table`带有按钮，你设置为可见还是不可见？这种方式可能行不通，因为它会留下空洞。或者我应该创建一个`ListView`不滚动的？比创建 listItems 并使它们看起来像这些相当容易，但创建一个非滚动的`ListView`.

还是我错过了一些非常明显的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:25:44.113

> 我应该使用您设置为可见或不可见的按钮制作线性布局或表格吗？这种方式可能行不通，因为它会留下空洞。

=> 除了 View.INVISIBLE 之外，您还可以设置**View.GONE**来隐藏特定视图的位置。（不可见实际上隐藏了视图）。

## 更新：

我同意**user370305**的评论：

> 带有自定义适配器和 setScroll false 的自定义 ListView，现在在您的适配器的 getView() 中根据条件隐藏视图网站名称或电话号码是否可用.. 简单:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:28:46.793

您必须禁用 listView 的滚动

将此添加到 ListView 的 xml 文件中

```
android:scrollbars="none" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:52:07.257

试试这个

```
listview.setOnTouchListener(new OnTouchListener(){
                public boolean onTouch(View v, MotionEvent event) {
                    if(event.getAction() == MotionEvent.ACTION_MOVE){
                        return true;
                    }
                    return false;
                }
            }); 
```

# php - 增加类的变量

> ID：11647608
> 
> 赞同：0
> 
> 时间：2012-07-25T10:21:44.640
> 
> 标签：php, list, class, variables

我有一段代码可以生成列表项。有没有办法让列表项有一个类，并且每次创建一个列表项时，类号可以增加一个？

例如，类将是“listitem1”，然后是第二个“listitem2”，依此类推，这样在创建每个列表项后，变量编号就会增加 1。这是我正在使用的代码：

```
<ul id="servicelist" class="clearfix">
        <?php if(get_field('homepage_service')): ?>
            <?php while(the_repeater_field('homepage_service')): ?>
                <li class="listitem"><img src="<?php the_sub_field('service_image'); ?>" width="144" height="103" /></li>
            <?php endwhile; ?>
        <?php endif; ?>
        </ul> 
```

我可以在 Flash (as3) 中做到这一点，但我不确定它在 PHP 中是如何工作的。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:26:48.387

您需要使用[PHP 变量](http://php.net/manual/en/language.variables.php)：

```
<?php $count = 0; ?>
<ul id="servicelist" class="clearfix">
    <?php if(get_field('homepage_service')): ?>
        <?php while(the_repeater_field('homepage_service')): ?>
            <?php $count++; ?>
            <li class="listitem<?php echo $count; ?>"><img src="<?php the_sub_field('service_image'); ?>" width="144" height="103" /></li>
        <?php endwhile; ?>
    <?php endif; ?>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:27:43.440

只需使用一个简单的计数器 -

```
<ul id="servicelist" class="clearfix">
    <?php if(get_field('homepage_service')):
      $count = 1; 
    ?>
        <?php while(the_repeater_field('homepage_service')): ?>
            <li class="listitem<?php echo $count ?>"><img src="<?php the_sub_field('service_image'); ?>" width="144" height="103" /></li>
            $count++;
        <?php endwhile; ?>
    <?php endif; ?>
    </ul> 
```

# java - 如何使用java将PDF表单（用户填写并提交）数据保存到数据库中

> ID：11647609
> 
> 赞同：2
> 
> 时间：2012-07-25T10:21:48.953
> 
> 标签：java, pdf

这是我的场景，

"用户在网络浏览器中打开 PDF 并填写所需数据并单击提交按钮",

我如何使用java技术将上述PDF数据保存到数据库中，

我尝试使用 iText lib 和 servlets 概念，无法完成任务，

谢谢大家，寻求帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:28:25.093

您可能会看一下[Apache PDFBox](http://pdfbox.apache.org/)库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:10:02.983

您可以创建提交到 URL 的 PDF。在 URL 处，您可以运行处理提交的表单内容的服务器端脚本（PHP 或 ASP.NET）。服务器端脚本可以将表单数据保存到您的数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T03:36:23.350

PDF表单提交按钮有特殊功能，支持http提交，需要编写java代码解析提交的表单并将数据保存到数据库。你可以看看这个例子，[http://rubypdf.appspot.com/demo.pdf](http://rubypdf.appspot.com/demo.pdf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T16:50:49.827

[使用PDFTextStream](http://snowtide.com/?lang=java)从 PDF 文档中提取表单数据很容易。第一个登录页面上有一些示例代码可以帮助您入门；准备好后，您还可以[使用 PDFTextStream 深入了解表单数据提取的详细信息](http://www.snowtide.com/help/extracting-updating-pdf-form-data)。

（披露：我受雇于 PDFTextStream 的制造商 Snowtide。我希望这个指针在任何情况下都有帮助。）

# visual-studio-2010 - Crystal Reports 查看器中的空白参数面板

> ID：11647611
> 
> 赞同：0
> 
> 时间：2012-07-25T10:22:01.213
> 
> 标签：visual-studio-2010, crystal-reports, crystal-reports-xi

我正在构建一个基于 Web 的 (ASP .NET) 应用程序来显示 Crystal Reports。报表本身是在 Crystal Reports XI 中构建的，我在 Visual Studio 2010 中工作。它正在工作，但报表左侧可见的参数面板是空白的，例如。即使报告有一些参数，它也不显示任何参数，并且在生成报告之前提示用户输入它们的值。我发现了一些信息，这可能是由用于生成这些报告的旧版本 Crystal Reports (XI) 引起的，实际上，用 Visual Studio 2010 编写的测试报告的参数显示正确。

我的问题是：如何在不再次重写报告的情况下使其正常工作？我试图在 Visual Studio 中打开一个现有报表并保存它，它给了我一个警告，即当前版本的报表比以前的版本更新，但它并没有解决问题。有任何想法吗？

![参数面板](../Images/4c4d0efb2242b463cbb45969c3da909f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:29:10.337

您可以以编程方式更改每个参数的面板设置。

您将需要枚举 ParameterFields 集合，更改每个参数的 ParameterFieldUsage2 属性：

```
string fileName = null;

ReportDocument reportDocument = new ReportDocument();
reportDocument.Load(fileName, CrystalDecisions.Shared.OpenReportMethod.OpenReportByDefault);

foreach (CrystalDecisions.Shared.ParameterField parameterField in reportDocument.ParameterFields)
{
  parameterField.ParameterFieldUsage2 = ParameterFieldUsage2.ShowOnPanel;
}

CrystalReportViewer1.ReportSource = reportDocument; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T05:18:34.897

如果报表是在以前的版本中设计的，参数VALUE OPTIONS“在（查看器）面板上显示”设置为“不显示”；这就是为什么参数没有显示在面板中的原因。解决这个问题。只需编辑每个参数并相应地设置此属性 1\. 不显示 2\. 可编辑 3\. 只读

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T17:35:30.407

我能够使用以下代码在运行时抑制参数面板：

```
crViewer.ToolPanelView = ToolPanelViewType.None; 
```

希望能防止别人在这上面浪费一个小时:-)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-25T11:02:48.683

我似乎已经找到了解决这个问题的方法（尽管它并不理想）。基本上，在 Crystal Reports => 2008 或 Crystal Reports for Visual Studio 中，通过右键单击参数字段，我们可以选择编辑，然后选择“在（查看器）面板上显示”选项（在 Crystal Reports XI 中不可用）。将此设置为可编辑或只读将在参数面板中显示此参数（默认为“不显示”）。如果有人有更好的想法（比编辑所有报告更好），我将不胜感激。

# google-search-appliance - 是否可以在 GSA 动态导航中包含文件类型及其计数？

> ID：11647621
> 
> 赞同：1
> 
> 时间：2012-07-25T10:22:39.983
> 
> 标签：google-search-appliance

正如标题所说。

我们知道可以通过带有查询前缀的文件类型进行搜索，例如“filetype:pdf”。

但我们希望将其包含在动态导航中，以自动对其进行过滤和计数。

这可能与文件类型有关吗？还是只有元数据才有可能。

[![例子](../Images/61d8a3546a99291d813a30c4500a1d74.png)](https://i.stack.imgur.com/6Q1f5.png)
[（来源：[google.com](https://developers.google.com/search-appliance/documentation/68/admin_searchexp/images/dynamic_nav.png)）]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-03T19:27:56.287

我知道这是一个老问题，但从 GSA v7.0 开始，您可以使用实体识别来创建文件类型实体，然后将其包含在动态导航中。

您可以创建与此类似的实例：

```
 <instance>
   <name>PDF</name>
   <pattern>.*pdf$</pattern>
   <store_regex_or_name>name</store_regex_or_name>
 </instance> 
```

它并不完美，因为 v7.0 这将匹配文档中的 PDF 文件名以及 URL，但这是一个好的开始。

为了只匹配从 v7.2 开始的 PDF 文件名，而不是文档或网页中对“.pdf”的引用，请在添加实体时将“应用程序区域”从“全部”更改为“网址” .

另一种选择是为您感兴趣的每种文件类型创建一个集合，并将它们显示为动态导航上方或下方的过滤器。显然，您需要提前知道要过滤的文件类型，但是这种方法可以让您更好地控制包含的内容和不包含的内容（尽管您将失去显示每种文件类型的文档计数的能力）。

[实体识别文档](http://www.google.com/support/enterprise/static/gsa/docs/admin/70/admin_console_help/crawl_entity_recognition.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:21:32.150

动态导航仅适用于元数据。有一个单独的谷歌代码项目：

[http://code.google.com/p/parametric/](http://code.google.com/p/parametric/)

这将允许您设置一组过滤器，但它会在浏览器中进行计算。

*使用 GSA 7.0更新* ，您可以使用实体提取来创建标题类型元数据并将其包含在您的动态导航中（以及说...源/集合）

# c# - 在javascript函数中设置剃刀@Html.Hidden

> ID：11647623
> 
> 赞同：0
> 
> 时间：2012-07-25T10:22:45.367
> 
> 标签：c#, javascript, razor, hidden

有没有办法在 JavaScript 代码块中设置 razor @HTML.Hidden 控件值？

```
<tbody>

                    @Html.Hidden("customerID")
                    @if (Model != null)
                    {
                        var customers = Model.Customers.ToList();
                        for (var i = 0; i < customers.Count; i++)
                        {
                        <tr class="gradeX">
                            <td>
                                <a href="#"><span onclick="GetCustomerID()">@customers[i].CustomerId.ToString()</span></a>
                            </td>
                            <td>
                                <a href="#">@customers[i].Name</a>
                            </td>                                
                        </tr>
                        }
                    }
                </tbody> 
```

我的 JavaScript 块是

```
<script type="text/javascript">
    var globleCustomerId = null;

    function GetCustomerID() {

        globleCustomerId = $('#customerID').val();

        //globleCustomerId value should be set to @Html.Hidden()

    }
</script> 
```

在这个 JavaScript 块中，我需要将 globleCustomerId 值设置为 @Html.Hidden("customerID")。

如何获得该值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:24:47.853

您可以使用以下[`.val()`](http://api.jquery.com/val/)方法：

```
$('#customerID').val('some value'); 
```

有 2 个重载：一个不带任何参数并允许您读取值（这就是您在问题中显示的内容）和一个带参数并设置值的重载（我已经展示了在我的回答中）。

* * *

更新：

显然，您正试图将点击的客户 ID 的值放在隐藏字段中。在这种情况下，您可以简单地为您的 span 元素提供一个类：

```
<a href="#">
    <span class="customerId">
        @customers[i].CustomerId.ToString()
    </span>
</a> 
```

然后简单地订阅这个元素的点击事件：

```
$(function() {
    $('.customerId').click(function() {
        $('#customerId').val($(this).text());
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T10:38:07.150

```
function GetCustomerID() {

    globleCustomerId = $('#customerID').val();

     //  Use this line to set the globleCustomerId value to @Html.Hidden() field

      $('#customerID').val(globleCustomerId);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T10:33:29.493

纯Javascript版本是；

```
//set
document.getElementById("customerID").value = "new value";
//get
var customerIDValue = document.getElementById("customerID").value; 
```

# java - 如何配置主机名解析以在 Java 中使用自定义 DNS 服务器？

> ID：11647629
> 
> 赞同：17
> 
> 时间：2012-07-25T10:23:02.433
> 
> 标签：java, networking, dns

[java.net.InetAddress](http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html)默认使用本地机器的默认主机名解析器解析主机名：

> 主机名到 IP 地址的解析是通过结合使用本地机器配置信息和网络命名服务（例如域名系统 (DNS) 和网络信息服务 (NIS)）来完成的。默认情况下，正在使用的特定命名服务是**本地计算机配置的一个**。对于任何主机名，都会返回其对应的 IP 地址。^([[来源]](http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html))

我们如何在不修改本地机器的默认主机名解析器的情况下配置此行为？

例如，无论如何配置[java.net.InetAddress](http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html)以便它通过 OpenDNS (208.67.222.222, 208.67.220.220) 或 Google Public DNS (2001:4860:4860::8888, 2001:4860:4860: :8844)?

或者是显式创建 DNS 数据包请求、通过[java.net.DatagramSocket](http://docs.oracle.com/javase/7/docs/api/java/net/DatagramSocket.html)或[java.net.Socket](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html)将它们发送到服务器并解析响应的唯一解决方案？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-27T12:39:23.987

Java 9 删除了此功能。您将需要使用第三方 DNS 客户端库。

如果您使用的是 Java 8 或更早版本，您可以执行以下操作：

[您可以按照本网站](http://docs.oracle.com/javase/8/docs/technotes/guides/net/properties.html)`sun.net.spi.nameservice.nameservers`的说明设置系统属性。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-04-24T11:24:32.980

通过以下接口并允许访问 java.net.*，可以将自己的 DNS 提供程序与 JDK8 和 JDK9 一起使用。新的提供程序通过“INameService.install(new MyNameService());”安装

```
public interface INameService extends InvocationHandler {
    public static void install(final INameService dns) throws IllegalArgumentException, IllegalAccessException, NoSuchFieldException, SecurityException, ClassNotFoundException {
        final Class<?> inetAddressClass = InetAddress.class;
        Object neu;
        Field nameServiceField;
        try {
            final Class<?> iface = Class.forName("java.net.InetAddress$NameService");
            nameServiceField = inetAddressClass.getDeclaredField("nameService");
            neu = Proxy.newProxyInstance(iface.getClassLoader(), new Class<?>[] { iface }, dns);
        } catch(final ClassNotFoundException|NoSuchFieldException e) {
            nameServiceField = inetAddressClass.getDeclaredField("nameServices");
            final Class<?> iface = Class.forName("sun.net.spi.nameservice.NameService");
            neu = Arrays.asList(Proxy.newProxyInstance(iface.getClassLoader(), new Class<?>[] { iface }, dns));
        }
        nameServiceField.setAccessible(true);
        nameServiceField.set(inetAddressClass, neu);
    }

    /**
     * Lookup a host mapping by name. Retrieve the IP addresses associated with a host
     *
     * @param host the specified hostname
     * @return array of IP addresses for the requested host
     * @throws UnknownHostException  if no IP address for the {@code host} could be found
     */
    InetAddress[] lookupAllHostAddr(final String host) throws UnknownHostException;

    /**
     * Lookup the host corresponding to the IP address provided
     *
     * @param addr byte array representing an IP address
     * @return {@code String} representing the host name mapping
     * @throws UnknownHostException
     *             if no host found for the specified IP address
     */
    String getHostByAddr(final byte[] addr) throws UnknownHostException;

    @Override default public Object invoke(final Object proxy, final Method method, final Object[] args) throws Throwable {
        switch(method.getName()) {
        case "lookupAllHostAddr": return lookupAllHostAddr((String)args[0]);
        case "getHostByAddr"    : return getHostByAddr    ((byte[])args[0]);
        default                 :
            final StringBuilder o = new StringBuilder();
            o.append(method.getReturnType().getCanonicalName()+" "+method.getName()+"(");
            final Class<?>[] ps = method.getParameterTypes();
            for(int i=0;i<ps.length;++i) {
                if(i>0) o.append(", ");
                o.append(ps[i].getCanonicalName()).append(" p").append(i);
            }
            o.append(")");
            throw new UnsupportedOperationException(o.toString());
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-05-09T12:37:02.510

对于高达 8 的 Java 版本，这是我编写的代码`foo`，用于在 Java 中硬编码系统名称 DNS 解析，以便通过测试用例。它的优点是将您的特定条目附加到默认的 Java 运行时 DNS 解析。

我建议**不要在生产中运行它**。使用了强制反射访问和 Java 运行时非公共实现类！

```
private static final String FOO_IP = "10.10.8.111";

/** Fake "foo" DNS resolution */
@SuppressWarnings("restriction")
public static class MyHostNameService implements sun.net.spi.nameservice.NameService {
    @Override
    public InetAddress[] lookupAllHostAddr(String paramString) throws UnknownHostException {
        if ("foo".equals(paramString) || "foo.domain.tld".equals(paramString)) {
            final byte[] arrayOfByte = sun.net.util.IPAddressUtil.textToNumericFormatV4(FOO_IP);
            final InetAddress address = InetAddress.getByAddress(paramString, arrayOfByte);
            return new InetAddress[] { address };
        } else {
            throw new UnknownHostException();
        }
    }
    @Override
    public String getHostByAddr(byte[] paramArrayOfByte) throws UnknownHostException {
        throw new UnknownHostException();
    }
}

static {
    // Force to load fake hostname resolution for tests to pass
    try {
        List<sun.net.spi.nameservice.NameService> nameServices =
            (List<sun.net.spi.nameservice.NameService>)
            org.apache.commons.lang3.reflect.FieldUtils.readStaticField(InetAddress.class, "nameServices", true);
        nameServices.add(new MyHostNameService());
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    }
} 
```

希望这会有所帮助，但同样要小心使用！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2021-05-25T07:04:38.103

Java 提供了`jdk.net.hosts.file`用于添加自定义 DNS 记录的新系统参数，如[源代码中所述](https://github.com/openjdk/jdk/blob/jdk-11+28/src/java.base/share/classes/java/net/InetAddress.java#L939)

```
 * The HostsFileNameService provides host address mapping
 * by reading the entries in a hosts file, which is specified by
 * {@code jdk.net.hosts.file} system property
 *
 * <p>The file format is that which corresponds with the /etc/hosts file
 * IP Address host alias list.
 *
 * <p>When the file lookup is enabled it replaces the default NameService
 * implementation
 *
 * @since 9
 */
private static final class HostsFileNameService implements NameService { 
```

示例：我们可以使用 JVM Option 启动 Java 应用程序

*   `-Djdk.net.hosts.file=/path/to/alternative/hosts_file`

`hosts_file`内容可能在哪里：

```
127.0.0.1    myserver-a.local
10.0.5.10    myserver-b.local
192.168.0.1  myserver-c.local 
```

它将根据`hosts_file`

# slickgrid - Slickgrid 按行而不是按列编辑器？

> ID：11647632
> 
> 赞同：0
> 
> 时间：2012-07-25T10:23:18.077
> 
> 标签：slickgrid

是否可以在 slickgrid 中按行而不是按列添加编辑器？如果是这样，它是如何完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:21:17.607

您可以`getItemMetadata(row)`在其中实现并指定一个编辑器。请参阅[https://github.com/mleibman/SlickGrid/wiki/Providing-data-to-the-grid](https://github.com/mleibman/SlickGrid/wiki/Providing-data-to-the-grid)。

# string - 在 Mathematica 中导入和操作 .txt

> ID：11647639
> 
> 赞同：0
> 
> 时间：2012-07-25T10:23:36.797
> 
> 标签：string, list, import, wolfram-mathematica

我有一个巨大的文本文件，我导入到mathematica。它看起来像这样：

```
 In[9]:=import=SplitBy[Import["textfile.txt","List"],"\\t"];

    Out[9]:={{  A   021 2.3 A   002 2.6},{  A   012 2.3 A   001 2.6},{  A   120 2.6 A   111 2.9},{  A   122 2.8 A   121 2.8},{  A   000 1.3 A   121 2.9},{  A   110 2.4 A   111 2.9},{  G   010 2.3 G   001 2.6},{  G   000 2.2 G   001 2.3 G   010 2.4},{  G   010 2.3 G   001 2.6},{  G   110 2.3 G   101 2.6}} 
```

编辑：请注意，所有元素都由一个`\\t`字符分隔。

这是一个字符串列表，使得

```
 In[12]:= Head@import
    Head@import[[1]]
    Head@import[[All, 1]]
    Head@import[[1, 1]]

    Out[12]= List
    Out[13]= List
    Out[14]= List
    Out[15]= String 
```

我的大问题是将此列表转换为可管理的元素列表，以便我可以搜索存在 G 的元素，而不是存在 A 的元素。我尝试用 . 但是我仍然无法按照我的意愿处理数据，因为我不允许我搜索单个 G 元素。理想情况下，我最终想要得到的是

```
 {{G,010,2.3},{G,001,2.6},{G,000,2.2},{G,001,2.3},{G,010,2.4},{G,010,2.3},{G,001,2.6},{G,110,2.3},{G,101,2.6}} 
```

我已经知道我将不得不使用该`Take`命令，该`Partition`命令将子列表拆分为 3 个元素的子列表，依此类推。但是因为我什至无法在列表列表中获取数据，所以我无法做到这一点..

此外，导入时我必须选择`"List"`类型。如果我导入`"Table"`一切都已经完成了一半，但元素“001”将变为“1”。

你们能帮帮我吗？感谢所有帮助！谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T08:10:29.500

将来，如果您可以包含您正在导入的实际文件的样本，那将非常有帮助。尽管如此，我相信我可以足够准确地猜测文件的格式来推荐这个：

```
data = ReadList["textfile.txt", {Word, Number, Number}] 
```

如果文件是我希望它应该返回的格式：

```
{{"A", 21, 2.3}, {"A", 2, 2.6}, {"A", 12, 2.3}, {"A", 1, 2.6}, {"A", 
  120, 2.6}, {"A", 111, 2.9}, {"A", 122, 2.8}, {"A", 121, 2.8}, {"A", 
  0, 1.3}, {"A", 121, 2.9}, {"A", 110, 2.4}, {"A", 111, 2.9}, {"G", 
  10, 2.3}, {"G", 1, 2.6}, {"G", 0, 2.2}, {"G", 1, 2.3}, {"G", 10, 
  2.4}, {"G", 10, 2.3}, {"G", 1, 2.6}, {"G", 110, 2.3}, {"G", 101, 
  2.6}} 
```

从那里获取开始的记录`"G"`可以根据您的喜好使用以下任何一种方式完成：

```
Cases[data, {"G", ___}]

Select[data, "G" === #[[1]] &]

Pick[data, First /@ data, "G"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T10:46:33.657

我在这台机器上没有 Mathematica，所以我的语法可能有点错误。

不

```
niceList = Partition[Flatten[import],3] 
```

生成一个列表列表，其中每个内部级别的列表包含 3 个字符串？然后，像

```
Select[niceList,#[[1]]=="G"&] 
```

`"G"`应该选择以 a作为第一个元素的子列表。

**编辑**

如果我现在理解你，你的意思是在你的变量`import`中有一个列表列表，每个较低级别的列表，例如

```
{  A   021 2.3 A   002 2.6} 
```

包含一个字符串？换句话说

```
FullForm[  A   021 2.3 A   002 2.6] 
```

返回

```
"  A   021 2.3 A   002 2.6" 
```

我会导入数据，用空格替换所有制表符，然后使用`StringSplit[]`（在正确的级别）将每个字符串转换为字符串列表。然后`Flatten`,`Partition`等。您可能会发现最简单的方法是首先将文件的全部内容导入单个字符串

# oracle - PL/SQL 报告文件自动运行并导出结果？

> ID：11647644
> 
> 赞同：3
> 
> 时间：2012-07-25T10:23:44.270
> 
> 标签：oracle, plsql, report, plsqldeveloper, job-scheduling

我正在使用 PL/SQL 开发人员。

我有一个报告文件（.rep），它根据时间段获取一些数据，例如。从 2012 年 7 月 1 日到 2012 年 7 月 2 日。我通过运行此报告来使用它，输入 &date_from 和 &date_to，然后通过相应的按钮将其导出为 HTML。

我想自动化这个任务，因为基本上这个报告需要每天以今天的日期作为参数执行。我稍微修改了一个代码，现在它使用**trunc(current_date, 'DDD')**作为参数，这样我就不必手动输入它了。接下来我需要：

1.  将此报告作为计划任务运行，无需我的交互。
2.  将 HTML 导出复制到文件夹中，该文件夹的日期用作报告内的参数（因此，基本上是 current_date）。

我的愿望脚本的伪代码如下：

```
reportDate = get_current_date_without_time
run my_report.rep
mkdir c:\somefolder\reportDate 
copy my_report_result_as_HTML c:\somefolder\reportDate 
```

可能吗？如果是这样，那怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T12:02:30.107

PLSQL Developer 是一个用于构建 Oracle 存储过程的 IDE，来自第三方 Allround Automations。它的功能包括构建报告的功能。但是，这些报告主要是供开发人员使用，而非平民。因此，报告只能通过 GUI 以交互方式运行。

Allround Automations 还提供 Query Reporter，这是一个免费工具，可以运行用 PLSQL Developer 编写的 .REP 文件。 [了解更多。](http://www.allroundautomations.com/plsqldev.html)

此工具具有用于运行报告的命令行选项。因此，您可以编写一个 .BAT 文件来执行您想要的所有其他操作（获取时间、创建目录），然后使用`QueryReport`命令运行报告并将其保存为 html。这个例子来自我上面链接的页面。

```
QueryReporter userid=scott/tiger@chicago exec=DeptEmp.rep html=DeptEmp.html quit 
```

然后，您将在 Windows 调度程序中创建一个作业来每天运行批处理文件。

# android - 如何使用 JNI 更改 java 类的字段

> ID：11647646
> 
> 赞同：0
> 
> 时间：2012-07-25T10:23:55.143
> 
> 标签：android, java-native-interface, android-ndk-r7

我正在使用 ac 本机函数来更改 java 类的整数字段。基本上我想看看如何使用 JNI 实现引用调用。但我收到错误“没有为本地找到实现”。谁能帮我解决这个问题。我是android和java的新手。以下是我编写的代码。如果有人可以改变这个来满足我想要的，我一定会感谢他的帮助。

**爪哇代码：**

```
class myclass { 

    int a = 1;
    int b = 2;
    public native void callTochangeJNI();

    static {
        System.loadLibrary("sum_jni");
    }
}

public class sum extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_sum);
        myclass myobject = new myclass(); 
        System.out.println("calling the jni native method");
        myobject.callTochangeJNI();
        System.out.println("returned from jni native method one");
        myobject.callTochangeJNI();
        System.out.format(" a = %d%n....", myobject.a);
        System.out.format("b =  %d%n...", myobject.b);
    }
} 
```

**c 本机方法：**

```
void Java_com_kpit_myfirstndkapp_sum_callTochangeJNI(JNIEnv* env, jobject obj )
{

    jfieldID fid;
    jmethodID mid;
    jclass myclass;

    printf(" Inside the JNI native method \n");

    jclass localRefCls = (*env)->FindClass(env, "java/lang/String");
    myclass = (*env)->NewGlobalRef(env, localRefCls);

    fid = (*env)->GetFieldID(env,myclass," a ","I");
    (*env)->SetIntField(env, obj ,fid,3);

    fid = (*env)->GetFieldID(env,myclass," b ","I");
    (*env)->SetIntField(env, obj ,fid,4);

} 
```

下面是我得到的日志：

```
07-25 09:33:07.723: D/dalvikvm(573): Trying to load lib /data/da/com.kpit.myfirstndkapp /lib/libsum_jni.so 0x4129d7b8
07-25 09:33:07.723: D/dalvikvm(573): Added shared lib /data/data/com.kpit.myfirstndkapp/lib/libsum_jni.so 0x4129d7b8
07-25 09:33:07.723: D/dalvikvm(573): No JNI_OnLoad found in /data/data/com.kpit.myfirstndkapp/lib/libsum_jni.so 0x4129d7b8, skipping init
07-25 09:33:07.723: I/System.out(573): calling the jni native method
07-25 09:33:07.723: W/dalvikvm(573): No implementation found for native Lcom/kpit/myfirstndkapp/myclass;.callTochangeJNI ()V
07-25 09:33:07.733: I/dalvikvm(573): Wrote stack traces to '/data/anr/traces.txt'
07-25 09:33:07.804: D/AndroidRuntime(573): Shutting down VM
07-25 09:33:07.804: W/dalvikvm(573): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
07-25 09:33:07.854: E/AndroidRuntime(573): FATAL EXCEPTION: main
07-25 09:33:07.854: E/AndroidRuntime(573): java.lang.UnsatisfiedLinkError: callTochangeJNI
07-25 09:33:07.854: E/AndroidRuntime(573):  at com.kpit.myfirstndkapp.myclass.callTochangeJNI(Native Method)
07-25 09:33:07.854: E/AndroidRuntime(573):  at com.kpit.myfirstndkapp.sum.onCreate(sum.java:27)
07-25 09:33:07.854: E/AndroidRuntime(573):  at android.app.Activity.performCreate(Activity.java:4465)
07-25 09:33:07.854: E/AndroidRuntime(573):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-25 09:33:07.854: E/AndroidRuntime(573):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
07-25 09:33:07.854: E/AndroidRuntime(573):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
07-25 09:33:07.854: E/AndroidRuntime(573):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
07-25 09:33:07.854: E/AndroidRuntime(573):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
07-25 09:33:07.854: E/AndroidRuntime(573):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-25 09:33:07.854: E/AndroidRuntime(573):  at android.os.Looper.loop(Looper.java:137)
07-25 09:33:07.854: E/AndroidRuntime(573):  at android.app.ActivityThread.main(ActivityThread.java:4424)
07-25 09:33:07.854: E/AndroidRuntime(573):  at java.lang.reflect.Method.invokeNative(Native Method)
07-25 09:33:07.854: E/AndroidRuntime(573):  at java.lang.reflect.Method.invoke(Method.java:511)
07-25 09:33:07.854: E/AndroidRuntime(573):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-25 09:33:07.854: E/AndroidRuntime(573):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-25 09:33:07.854: E/AndroidRuntime(573):  at dalvik.system.NativeStart.main(Native Method)
07-25 09:33:08.234: I/dalvikvm(573): threadid=3: reacting to signal 3
07-25 09:33:08.264: I/dalvikvm(573): Wrote stack traces to '/data/anr/traces.txt'
07-25 09:33:08.554: I/dalvikvm(573): threadid=3: reacting to signal 3
07-25 09:33:08.623: I/dalvikvm(573): Wrote stack traces to '/data/anr/traces.txt'
07-25 09:38:07.994: I/Process(573): Sending signal. PID: 573 SIG: 9 
```

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:46:38.713

您的 C 方法的名称和签名错误，名称必须是`Java_PackageName_ClassName_CfunctionName`

如果你从一个名为的类中调用它，`MyClass`并且它的包名是，`com.kpit.myfirstndkapp`那么你的方法必须声明为

```
 JNIEXPORT void JNICALL Java_com_kpit_myfirstndkapp_MyClass_callToChangeJNI(...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:50:49.487

最后，经过一些调试，我得到了将 a 和 b 的值更改为新值的确切代码。这是正确的代码：

```
Java code:

package com.kpit.myfirstndkapp;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

class myclass { 
int a = 1;
int b = 2;

public native void callTochangeJNI();

static {
System.loadLibrary("sum_jni");
}
}

public class sum extends Activity {

public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_sum);

myclass myobject = new myclass(); 

System.out.println("calling the jni native method");

myobject.callTochangeJNI();
System.out.println("returned from jni native method one");

System.out.format(" a = %d%n....", myobject.a);
System.out.format("b =  %d%n...", myobject.b); 
```

} }

```
C native library code:

#include <stdio.h>
#include <stdlib.h>
#include <jni.h>

void Java_com_kpit_myfirstndkapp_myclass_callTochangeJNI(JNIEnv* env,
jobject obj)
{
jfieldID fid;
jmethodID mid;
jclass myclass;

printf(" Inside the JNI native method \n");
jclass cls = (*env)->GetObjectClass(env, obj);

fid = (*env)->GetFieldID(env,cls,"a","I");
(*env)->SetIntField(env, obj ,fid,3);

fid = (*env)->GetFieldID(env,cls,"b","I");
(*env)->SetIntField(env, obj ,fid,4);

}

This works and i get the below log on the screen:
07-26 06:42:30.838: I/System.out(551): calling the jni native method
07-26 06:42:30.859: I/System.out(551): returned from jni native method one
07-26 06:42:30.859: I/System.out(551):  a = 3
07-26 06:42:30.868: I/System.out(551): ....b =  4
07-26 06:42:31.179: I/Process(93): Sending signal. PID: 551 SIG: 3 
07-26 06:42:31.179: I/dalvikvm(551): threadid=3: reacting to signal 3
07-26 06:42:31.269: I/dalvikvm(551): Wrote stack traces to '/data/anr/traces.txt'
07-26 06:42:31.348: D/gralloc_goldfish(551): Emulator without GPU emulation detected.  
07-26 06:42:31.498: I/ActivityManager(93): Displayed com.kpit.myfirstndkapp/.sum: 
```

+2s524ms（总计 +1m25s486ms）07-26 06:42:31.558：I/ActivityManager(93)：显示 com.android.launcher/com.android.launcher2.Launcher：+1m25s544ms

非常感谢stackoverflow.com为像我这样的学习者提供了这样一个帮助平台

# c# - 如何通过互操作公开 COM 库中定义的枚举作为 ac# 函数的返回类型

> ID：11647647
> 
> 赞同：6
> 
> 时间：2012-07-25T10:23:58.093
> 
> 标签：c#, enums, com-interop

希望问题很清楚，但为了清楚起见，请补充一下：

我有一个 VB6 dll，它定义了我在 C# dll 中引用的枚举。C# dll 使用 idispatch 接口以正确的方式定义了 CCW，该接口声明了一个返回类型为枚举的函数。

运行 regasm 时，我收到一个警告，指出枚举不是 COM 可见的，因此不会导出该函数。由于它是在我的 VB6 库中定义的，我会认为它已经是 COM 可见的，因为它是在 COM dll 中定义的。

我意识到我可以停止搞砸并使用 int 来传递枚举并只进行任何一端的转换，但这很令人沮丧，我想知道是否存在一种方法。

根据要求，这里是一些示例代码：

VB6 dll 定义了一个枚举

```
Public Enum myEnum
    first = 0
    second = 1
End Enum 
```

这通过互操作导入到 C# 中，如果您查看元数据，它看起来像这样

```
[Guid("EnumGUID")]
public enum myEnum
{
    first = 0,
    second = 1        
} 
```

然后定义CCW接口

```
[ComVisible(true)]
[Guid("InterfaceGuid")]
[InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
public interface IMyCCWInterface
{
    [DispId(1)]
    myEnum myFunction();
} 
```

Regasm 抱怨 myEnum 不可见。我必须同意它，因为元数据视图没有 com visible 属性。奇怪的是，如果我使用 VB dll 中定义的其他类型作为函数的参数，我没有得到任何抱怨，它似乎是枚举，我猜这是因为我实际上暴露了 VB6 枚举的互操作实现而不是实际枚举。

所以我想我理解这个问题，我想知道的是，是否有一种方法可以使用不涉及破解任何中间或自动生成的代码的枚举来使其工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:11:33.903

看起来解决方案是将 C# 项目中导入的 COM 程序集的“嵌入互操作类型”属性设置为 False。

为了测试这一点，我创建了一个 VB COM dll，`StackOverflow.ExampleCom`其中包含以下代码

```
Public Enum EThing
    eThingOne = 1
    eThingTwo = 2
End Enum
Private mThing As EThing
Private Sub Class_Initialize()
    mThing = eThingOne
End Sub
Public Property Let Thing(newVal As EThing)
    mThing = newVal
End Property
Public Property Get Thing() As EThing
    Thing = mThing
End Property 
```

然后我创建了一个 C# 类项目并导入了这个 StackOverflow COM 库。然后，C# 中的以下代码创建了一个 COM 对象，该对象重新公开了 VB 代码中定义的枚举类型，从而创建了 OP 描述的相同情况。

```
using System;
using System.Runtime.InteropServices;
using System.Runtime.InteropServices.ComTypes;
using StackOverflow;

namespace EnumDemo
{
    [ComVisible(true)]
    [Guid("c30d35fe-2c7f-448b-98be-bd9be567ce70")]
    [InterfaceType(ComInterfaceType.InterfaceIsDual)]
    public interface IEnumDemo
    {
        [DispId(1)]
        EThing Thing
        {
            get;set;
        }
    }

    [ComVisible(true)]
    [Guid("af328c82-08e3-403e-a248-8c46e27b48f3")]
    [ClassInterface(ClassInterfaceType.None)]
    [ProgId("StackOverflow.EnumDemo")]
    public class EnumDemo
    {
        private EThing mThing = EThing.eThingOne;
        public EThing Thing { get { return mThing; } set { mThing = value; } }
    }
} 
```

如果我们构建它，然后尝试从这个程序集创建一个类型库，`regasm /tlb:EnumDemo.tlb bin\Debug\EnumDemo.dll`那么我会收到关于使用非 COM 可见值类型的警告。但是，一旦对 VB COM dll 的引用将“嵌入互操作类型”设置为 false，警告就会消失，并且使用 OleView 检查生成的类型库表明正在使用该类型，并且`importlib`已添加该类型以引用原始 dll。

```
library EnumDemo
{
    // TLib :     // TLib :  : {D482D5CB-EE6C-455A-A28A-D26A5AC579D5}
    importlib("StackOverflow.dll");
    // TLib : mscorlib.dll : {BED7F4EA-1A96-11D2-8F08-00A0C9A6186D}
    ...
    interface IEnumDemo : IDispatch {
        [id(0x00000001), propget]
        HRESULT Thing([out, retval] EThing* pRetVal);
        [id(0x00000001), propput]
        HRESULT Thing([in] EThing pRetVal);
    };
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:12:55.407

你是对的。[问题](https://stackoverflow.com/questions/6578856/problem-creating-com-library-only-containing-enums)是当您将枚举导入代码时，这允许您在代码中使用这些枚举 - 在程序集中。您将无法直接使用它们。您需要在 .NET 中定义枚举并使它们成为 ComVisible。它们将被公开为 EnumType_myEnum 而不仅仅是 myEnum（请参阅[this](https://stackoverflow.com/questions/6578856/problem-creating-com-library-only-containing-enums)）

# c# - Linq 扩展集操作

> ID：11647650
> 
> 赞同：0
> 
> 时间：2012-07-25T10:24:27.890
> 
> 标签：c#, linq, hashset

**现在的情况 ：**

`HashSet<string> MasterSet => {100, 3}`

`HashSet <string> SubSet => {100, 3} or {100} or {100, 3, 1}`

因此，从庞大的子集列表中，基于 MasterSet 我选择了这样的特定集：

`if(MasterSet.SetEquals(subSet) || MasterSet.IsSupersetOf(subSet) || MasterSet.IsSubsetOf(subSet))`

如果它为真，则使用该子集进行处理，否则循环其他可用集。

**重复问题：** 如果业务逻辑想要在主集和子集中包含重复，例如：

`MasterSet => {100, 3, 3}`

`SubSet => {100, 3, 3} or {100, 3} or {100, 3, 3, 1}`

那么 HashSet 的使用就被剥夺了。

如果我将 MasterSet 和 Subset 更改为`List<string>`

**编辑：** “BigYellowCactus”提供的解决方案有效。但是，如果我想使用标题而不是元素的顺序来匹配，过滤集合会更容易吗？

```
MasterSet => {100, 3, 4}
MasterHeaders => {"T","F","V"} //Headers element corresponds to the MasterSet element 
```

情况1：

```
SubSet => {3, 100}
SubSetHeaders => {"F", "T"} //Headers element corresponds to the SubSet element 
```

案例二：

```
SubSet => {4, 3}
SubSetHeaders => {"V", "F"} //Headers element corresponds to the SubSet element 
```

是否可以先通过比较 MasterHeaders 和 SubSetHeaders 的标头进行匹配，然后按值进行匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:57:58.500

您可以使用[All](http://msdn.microsoft.com/en-us/library/bb548541%28v=vs.90%29.aspx)扩展方法。

**描述**

> 确定序列的所有元素是否满足条件。

* * *

**例子：**

```
if (MasterSet.All(e => SubSet.Contains(e)) || SubSet.All(e => MasterSet.Contains(e)))
{
    //do stuff
} 
```

* * *

**选择：**

```
if (!MasterSet.Except(SubSet).Any() || !SubSet.Except(MasterSet).Any())
{
    //do stuff
} 
```

* * *

**编辑：**

正如Iridium 在他的评论中指出的那样，对于您不想匹配的情况，您可以通过简单地计算每个元素的出现`SubSet { 100, 3, 3 }` *来*进行。`MasterSet = { 100, 100, 3 }`

```
if (MasterSet.All(e => MasterSet.Count(r => r==e) <= SubSet.Count(r => r==e))
    || SubSet.All(e => SubSet.Count(r => r==e) <= MasterSet.Count(r => r==e)))
{
    //do stuff
} 
```

（请注意，这可能不是最有效的方法......）

* * *

**编辑2：**

鉴于您基本上在序列中搜索序列，您可以使用以下方法：

```
void Main()
{
    var MasterSet = new List<string>() {"100", "3","4"};

    var SubSets = new[] 
    {
        new List<string>() {"100", "100", "3"},
        new List<string>() {"100", "3", "4"},
        new List<string>() {"32", "3423", "4234", "100", "3", "4", "34234"},
        new List<string>() {"100", "32", "3423", "4234", "100", "3", "4", "34234"},
        new List<string>() {"100", "32", "3", "4234", "100", "4", "34234"},
        new List<string>() {"100", "4", "3"},
        new List<string>() {"100", "3", "3"},
        new List<string>() {"100", "3"},
        new List<string>() {"100", "3", "3", "1"}
    };

    foreach (var SubSet in SubSets)
    {
        if (IsMatch(MasterSet, SubSet))
            Console.WriteLine(String.Join(", ", SubSet) + " is a \"subset\"");
        else if (IsMatch(SubSet, MasterSet))
            Console.WriteLine(String.Join(", ", SubSet) + " is a \"superset\"");
    }
}

bool IsMatch<T>(IEnumerable<T> source, IEnumerable<T> to_test)
{
    using (var enumerator = source.GetEnumerator())
    using (var sub_enumerator = to_test.GetEnumerator())
        while (sub_enumerator.MoveNext())
        {
            if (!enumerator.MoveNext())
                return false;
            if (!enumerator.Current.Equals(sub_enumerator.Current))
                sub_enumerator.Reset();
        }
    return true;
} 
```

**输出：**

> 100, 3, 4 是“子集”
> 32, 3423, 4234, 100, 3, 4, 34234 是“超集”
> 100, 32, 3423, 4234, 100, 3, 4, 34234 是“超集”
> 100, 3 是一个“子集”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:02:54.753

[`ISet<T>`](http://msdn.microsoft.com/en-us/library/dd412081.aspx)are`HashSet<T>`和的当前框架实现`SortedSet<T>`。这两个类都强制成员唯一性并且不允许重复。

虽然这可能首先看起来像是框架中的一个遗漏，但它实际上与数学集的属性和定义有关。正如[这篇文章](http://mathforum.org/library/drmath/view/65580.html)中所解释的，一个数学集没有重复的成员，逻辑`{100, 3}`上等价于`{100, 3, 3}.`

可能可以扩展`List<T>`实现`ISet<T>`，也许调用新类`Sack<T>`，但是，非唯一的实现`ISet<T>`将比框架中现有的实现更具挑战性，无需过多考虑，它似乎让人想起一般的[背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)。

# xslt - XSL 根据 xml 记录文件对一组记录进行子集化

> ID：11647651
> 
> 赞同：0
> 
> 时间：2012-07-25T10:24:29.030
> 
> 标签：xslt

我有一个大型 XML 文件和另一个小型 XML 文件，其名称与某些大型 XML 文件的属性值之一匹配。我想使用小的 XML 文件创建大型 XML 文件的记录子集。我的 XSL 尝试是这样的

```
<xsl:stylesheet xmlns:t="http://www.xyz.com/xml/Fixit" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output method="xml"/>
<xsl:template match="@*|node()">
<xsl:copy>
<xsl:apply-templates select="@*|node()"/>
</xsl:copy>
</xsl:template>
<xsl:template match="t:Fixit[.//t:Name[(@OrganisationName!=document('single_include.xml')//OrganisationName)]]"></xsl:template>
</xsl:stylesheet> 
```

我的名为“single_include.xml”的小 XML 文件是这样的

```
<ListOfOrganisationName>
<OrganisationName>
The first organisation
</OrganisationName>
<OrganisationName>
The second organisation
</OrganisationName>
</ListOfOrganisationName> 
```

它似乎只适用于第一条记录。有任何想法吗？

希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:26:21.980

“排除”模板中的内部谓词

```
(@OrganisationName!=document('single_include.xml')//OrganisationName) 
```

如果有*任何* 不等于当前元素的属性`OrganisationName`，则为真。这将排除“第二个组织”，因为在过滤文件（“第一个组织”）中有一个它不相等。相反，您可能想要`single_include.xml``OrganisationName``OrganisationName`

```
not(@OrganisationName=document('single_include.xml')//OrganisationName) 
```

仅当*没有* 等于当前元素的`OrganisationName`属性时才成立。XPath 规范在[第 3.4 节](http://www.w3.org/TR/xpath/#booleans)中指出了这一点，它说`single_include.xml``OrganisationName`

> **注意：**如果`$x`绑定到一个节点集，那么`$x="foo"`并不意味着与`not($x!="foo")`

# javascript - 如何从 d3js 中折叠的所有节点开始？

> ID：11647653
> 
> 赞同：8
> 
> 时间：2012-07-25T10:24:37.670
> 
> 标签：javascript, d3.js, tree

从这个例子开始[http://bl.ocks.org/1062288](http://bl.ocks.org/1062288)我想要一棵所有节点都折叠的树，所以初始图应该只包含一个节点（根）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T12:13:15.030

**选项 1：修改 JSON**

修改 JSON 文件 ,`readme.json`以使用`_children`而不是`children`.

**选项 2：编辑 Javascript**

编辑 javascript 以切换每个节点的`_children`和`children`属性。这可以这样做

```
var nodes = flatten(root);
nodes.forEach(function(d) {
  d._children = d.children;
  d.children = null;
}); 
```

这是第二个选项的[JSFiddle](http://jsfiddle.net/brantolsen/Khwnp/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-05T13:46:10.427

```
var allnode =  flatten(root);
for (var i=0;i<allnode.length;i++){click(allnode[i])} 
```

对于那些仍在寻找它的人，这里有 2 行代码。紧凑且易于理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T08:34:16.197

把这个放在这里给未来的读者：

```
d3.json("json/results.json", function(json) {
    root = json;
    root.x0 = h / 2;
    root.y0 = 0;
    function toggleAll(d) {
    if (d.children) {
      d.children.forEach(toggleAll);
      toggle(d);
    }
}

root.children.forEach(toggleAll);

toggle(root);
update(root);
}); 
```

[http://jsfiddle.net/chrisloughnane/vV3Sc/](http://jsfiddle.net/chrisloughnane/vV3Sc/)

# asp.net-mvc - mvc 中带有标题标签的 mvc 下拉选项

> ID：11647655
> 
> 赞同：1
> 
> 时间：2012-07-25T10:24:44.797
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, dropdownbox

```
<select id="priority">
    <option value="calendar" title="icons/icon_calendar.gif">Calendar</option>
    <option value="shopping_cart" title="icons/icon_cart.gif">Shopping Cart</option>
    <option value="cd" title="icons/icon_cd.gif">CD</option>
    <option value="email"  selected="selected" title="icons/icon_email.gif">Email</option>
    <option value="faq" title="icons/icon_faq.gif">FAQ</option>
    <option value="games" title="icons/icon_games.gif">Games</option>
</select> 
```

**我想要在 mvc中使用 title 属性**的这种类型的下拉菜单

 **```
 @Html.DropDownListFor(model => model.priority, new SelectList(ViewBag.Priority, "Value", "Text"), "-- Select Priority --", new { @class = "required" }) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T10:32:38.197

内置的 DropDownList 帮助器不允许您在单独的选项（例如标题）上设置额外的 HTML 属性。如果你想实现这一点，你将不得不编写自己的自定义助手。这是一个[相同的实现](https://stackoverflow.com/a/7537628/29407)，您可以看看适应您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:29:06.667

```
@Html.DropDownListFor(model => model.priority, new SelectList(ViewBag.Priority, "Value", "Text"), "-- Select Priority --", new { @class = "required", title="priority" }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-09T11:55:00.080

可能您可以通过 1.create 使用扩展方法创建自定义帮助程序来实现所需的输出，该方法将返回 MvcHtmlString ，这将为下拉菜单创建自定义 HTML 并在您的视图中调用该方法。

像下面

```
public static class CustomDropdown
{
public static string Dropdown(Priority priority)
      {       
           StringBuilder sb=new StringBuilder ();
           sb+="<Select id='drop'>";
           for(int i=0;i<priority.name.length;i++)
       {
           sb+="<option id='dropop' value='"+priority.value[i]+"'                      title='"+priority.title[i]+"'>"+priority.name[i]+"</option>";
       }
        sb+="</select>";
              return Convert.ToString(sb);                   
      }
   }
 } 
```

2.在jquery的帮助下绑定给定选择的选项，例如

```
 var i=0;
$('.drpclass option').each(function(){
$(this).attr('title',Model.priority.title[i])
i++;
}); 
```**

# json - 尝试从 Node.js 将文档插入 CouchDB 时出现“bad_request invalid_json”错误

> ID：11647656
> 
> 赞同：1
> 
> 时间：2012-07-25T10:24:46.467
> 
> 标签：json, node.js, couchdb

我正在尝试将文档插入 CouchDB。执行此代码时，CouchDB 返回以下错误：

```
STATUS: 400    
BODY: {"error":"bad_request","reason":"invalid_json"} 
```

我的代码：

```
var http = require('http')

var options = {
"host": "localhost",
"port": "5984",
"path": "/chinese",
"headers": {"content-type": "application/json"},
"method": "PUT",
"body": JSON.stringify({
    "_id":"rabbit",
    "_rev":"2-c31d8f403d44d1082b3b178ebef8d329",
    "Subject":"I like Plankton"
})
};

var req = http.request(options, function(res) {
  console.log('STATUS: ' + res.statusCode);
  res.setEncoding('utf8');
  res.on('data', function (chunk) {
    console.log('BODY: ' + chunk);
  });
});

req.write('data\n');
req.end(); 
```

怎么了？

编辑：我需要更新数据，所以我将 POST 替换为 PUT。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T12:07:16.690

因为您正在编写`'data\n'`请求的主体，这确实不是有效的 JSON。

大概，你的意思是：

```
req.write(JSON.stringify({"data": "somedata"})); 
```

`body`而不是将此作为选项的参数传递。

# c# - 关于 C# 中的进度条完全冻结

> ID：11647659
> 
> 赞同：-1
> 
> 时间：2012-07-25T10:24:52.460
> 
> 标签：c#, .net, progress-bar

我有大量的数据和 Windows 窗体控件要从文件加载，当文件真的很大时，我必须使用进度条。

问题是，进度条可以工作，但在程序开始构建数据并将其加载到表单的那一刻，它会立即冻结。

那么，无论如何我可以让它工作吗？我将后台工作人员与进度条一起使用。

下面是一些代码：

```
private void openToolStripMenuItem_Click(object sender, EventArgs e)
{
    try
    {
        listBox2.Items.Clear();
        listBox3.Items.Clear();
        dataGridView1.RowCount = 0;
        progressBar1.Visible = true;
        reading.Visible = true;
        backgroundWorker1.RunWorkerAsync();
        setLabels();
        progressBar1.Visible = false;
        reading.Visible = false;
    }
      }

private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    for (int i = 1; i <= 100; i++)
    {
        // Wait 100 milliseconds.
        Thread.Sleep(100);
        // Report progress.
        backgroundWorker1.ReportProgress(i);
    }
}

private void backgroundWorker1_ProgressChanged(object sender,
   ProgressChangedEventArgs e)
{
    // Change the value of the ProgressBar to the BackgroundWorker progress.
    progressBar1.Value = e.ProgressPercentage;
    // Set the text.
    reading.Text += " at " + e.ProgressPercentage.ToString() + "%";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:32:09.193

您应该在单独的线程上进行加载工作，并让您的主线程处理更新 UI。例如：

您可以使用您的文件启动工作人员以通过以下方式处理：

```
bgWorker.RunWorkerAsync(object); 
```

然后连接一个 DoWork 方法，您可以在其中执行长时间运行的任务，这是您将向 UI 报告结果/进度条百分比的地方：

```
private void bgWorker_DoWork(object sender, DoWorkEventArgs e)
{     
      object myObject = (object)e.Argument;
      bgWorker.ReportProgress(//YOUR FORMULA TO WORK OUT PERCENTAGE);
} 
```

调用`ReportProgress`调用`ProgressChanged`事件，您可以使用以下方法从后台线程安全地更新 UI：

```
private void bgWorker_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
        progressBar.Value = e.ProgressPercentage;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T08:52:53.987

一定有什么东西阻止了你的 UI 线程更新。这样做

私人无效更新进度条（整数百分比）

```
 {
        if (ProgressBar.InvokeRequired)
        {
            updateProgressBarCallback cb = new updateProgressBarCallback(updateProgressBar);
            this.Invoke(cb, new object[] { percent });
        }
        else
        {
            ProgressBar.Value = percent;
            ProgressBar.Update();
            ProgressBar.Refresh();
            ProgressBar.Invalidate();
        }
    } 
```

# mongodb - mongodb vs. postgres：建模条件

> ID：11647660
> 
> 赞同：0
> 
> 时间：2012-07-25T10:24:57.250
> 
> 标签：mongodb, postgresql, schema-design, database, nosql

我们现在正在为一个项目选择一个数据库。候选人是 mongodb 和 postgres。我们的用户需要定义条件逻辑，例如用户定义条件（作为字符串）“x 发生”、“y 离开”等，然后可以将它们连接到条件“如果 x 发生 AND（y 离开 OR z 出现）......” .

在单个 json 文档中执行此操作似乎比在关系数据库中更具可读性。

你有什么方法可以在 postgres 中合理地建模吗？我知道 postgres 9.2 将支持 json，但查询功能似乎很笨拙。

在 mongo 中，动词（“x发生”）将在条件之间重复。动词更新将影响多行。你看到这里有问题吗？

编辑： mongo 文件可能如下所示：

```
{
  "where": 
     [1,"x happens"],
     "and": 
     { "where": 
            [2,"y leaves"], 
               "or": 
            [3,"z comes"]
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T02:58:41.963

好的，在这方面 PostgreSQL 和 MongoDB 将是相当不同的，但在你必须如何考虑这一点方面却相当相似。最重要的是摆脱严格的关系观念。您的选择是对象关系的或面向文档的。我会选择前者，因为我更喜欢它。

关键是你必须能够将你的条件减少到可以动态定义的布尔值。如果您在 PostgreSQL 中执行此操作，您将需要进行一些编程。权衡是您获得了在 MongoDB 中很难执行的临时报告。

您可以在 Postgres 中做的关键事情是模型衍生数据。因此，在 PostgreSQL 中，使其易于管理的关键是使用表方法在运行时检查约束。要在 PostgreSQL 中创建表方法，请使用如下形式：

```
CREATE OR REPLACE FUNCTION method_name(table_name) RETURNS return_type .... 
```

您可能会发现这对更多示例很有帮助：http: [//ledgersmbdev.blogspot.com/2012/08/postgresql-or-modelling-part-2-intro-to.html](http://ledgersmbdev.blogspot.com/2012/08/postgresql-or-modelling-part-2-intro-to.html)（是的，那是我的博客）。

事实上，你可以在 PostgreSQL 上构建一些极其复杂的准关系模型，所以我不会在这方面排除它。问题是您是否需要关系端，用于临时查询和报告对象集。如果你这样做，那么单独的 Mongo 不会削减它，你可以从 Mongo 导出到 Postgres 或在 PostgreSQL 中做事。

这并不是说 PostgreSQL 就是答案。如果您从不需要添加新的查询类型，也许 Mongo 会更好。但是，这是您真正想要使用 Pg 为您提供的每个高级功能的情况之一，如果您走这条路，这些功能对您的情况很有用。

# sql - 报告服务添加新语言

> ID：11647663
> 
> 赞同：1
> 
> 时间：2012-07-25T10:25:08.950
> 
> 标签：sql, sql-server-2008, reporting-services

我想为报告服务创建新的语言包，但我不知道我应该做什么。我尝试使用要创建的语言的快捷方式创建文件夹，并从其他文件夹文件复制并将它们放入此文件夹，但这失败了。另一个想法是为英文版本创建备份并更改一些短语，但页面对此没有反应。我试图在这个目录中这样做：

...\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportManager

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:11:55.420

The [report manager](http://msdn.microsoft.com/en-us/library/ms157147%28v=sql.100%29.aspx) will [use your client browser language](http://msdn.microsoft.com/en-us/library/ms156493%28v=sql.100%29.aspx) to determine the localization for the web interface. Some relevant info from the linked article:

> Both the client application (usually a browser) and the operating system of the computer that is running the report server play a part in determining which language resource is used.

The available languages are the ones that are available to SQL server (see the same linked article, further down). As far as I can tell there's no way to extend this list with a new language by providing translations.

An alternative (but far more labor intensive) way to go at that would be to create your own web or windows application with the ReportViewer, and create that app in the locale of your choosing.

# facebook-graph-api - 我们是否允许在我们的移动应用程序中向其他用户显示用户朋友的头像？

> ID：11647667
> 
> 赞同：0
> 
> 时间：2012-07-25T10:25:24.673
> 
> 标签：facebook-graph-api, permissions, photo, profile, image

我们应用程序的用户将使用他的朋友列表创建一个组。他的朋友不必使用该应用程序。是否可以在未经朋友同意的情况下在我们的应用程序中向其他非朋友用户显示朋友的个人资料照片？由于他们的个人资料照片无论如何都是公开的，这是否意味着我们也可以将其显示给我们的用户？姓名、年龄或性别等其他信息呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:30:01.583

我认为您可以在未经许可的情况下从用户个人资料中获取哪些信息是公开的。不过，我建议您放置一个条款和条件页面，其中包含您打算如何处理用户信息。并授权用户阅读并同意。那你就安全了。

# mysql - MySQL日期时间比较

> ID：11647669
> 
> 赞同：1
> 
> 时间：2012-07-25T10:25:28.450
> 
> 标签：mysql, datetime

这是我的问题：

我的 mysql 数据库中有一个表，其中包含一些产品，它有两列称为“date_from”和“date_to”，它们确定产品处于活动状态的时间段。

在我的网站上有一个表单，管理员可以在其中选择两个日期时间值，如果产品的活动期与管理员选择的跨度相交，则页面会更新产品列表。

这是我的查询，我用它来实现我想要的：

```
$sql="SELECT * FROM presents WHERE (date_from>".$date_from." AND date_to<".$date_to.") OR (date_from>".$date_from." AND date_to>".$date_to.") OR (date_from<".$date_from." AND date_to>".$date_to.") OR (date_from<".$date_from." AND date_to<".$date_to.")"; 
```

我得到了这个错误：

> mysql说：My​​Sql错误号：1064 MySql错误说明：你的SQL语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '.26 附近使用的正确语法。12:11:43 和 date_to<2012.07.30。12:11:46) 或 (date_from>2012.07.26\. 12:11:' 在第 1 行

有任何想法吗？

*编辑

我按照建议更改了查询，并为变量添加了单引号。现在我没有收到错误，但查询似乎没有做它应该做的 - 产品列表保持不变......现在是查询：

```
$sql="SELECT * FROM presents WHERE (date_from>'".$date_from."' AND date_to<'".$date_to."') OR (date_from>'".$date_from."' AND date_to>'".$date_to."') OR (date_from<'".$date_from."' AND date_to>'".$date_to."') OR (date_from<'".$date_from."' AND date_to<'".$date_to."')"; 
```

假设我的表中有这一行：

ID 名称 date_from date_to

1 次测试 2012-07-24 16:40:00 2012-07-31 16:40:00

* * *

我需要所有这些时间段来返回该行：

2012-07-23 16:40:00 至 2012-08-01 16:40:00

2012-07-23 16:40:00 至 2012-07-28 16:40:00

2012-07-26 16:40:00 至 2012-07-28 16:40:00

2012-07-26 16:40:00 至 2012-08-01 16:40:00

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:27:27.420

你需要引用你的变量。

但是最好不要连接sql，而是使用占位符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:27:28.167

我确定您需要将日期用单引号括起来：

```
date_from > '".$date_from."' AND 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T10:27:32.460

您应该用引号将日期括起来，例如`'".$date_from."'`

编辑：尝试：

```
$sql="SELECT * FROM presents WHERE '".$date_from."' BETWEEN date_from AND date_to"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T10:28:57.793

如[日期和时间文字](http://dev.mysql.com/doc/en/date-and-time-literals.html)中所述：

> MySQL以这些格式识别[`DATETIME`](http://dev.mysql.com/doc/en/datetime.html)和重视：[`TIMESTAMP`](http://dev.mysql.com/doc/en/datetime.html)
> 
> *   作为一个`'YYYY-MM-DD HH:MM:SS'`或`'YY-MM-DD HH:MM:SS'`格式的字符串。这里也允许使用“宽松”的语法：任何标点符号都可以用作日期部分或时间部分之间的分隔符。例如，`'2012-12-31 11:30:45'`、`'2012^12^31 11+30+45'`、`'2012/12/31 11*30*45'`和`'2012@12@31 11^30^45'`是等价的。
>     
>     
> *   作为在任何一种格式中都没有分隔符的`'YYYYMMDDHHMMSS'`字符串`'YYMMDDHHMMSS'`，前提是该字符串作为日期有意义。例如，`'20070523091528'`and`'070523091528'`被解释为`'2007-05-23 09:15:28'`, 但是`'071122129015'`是非法的（它有一个无意义的微小部分）并且变成`'0000-00-00 00:00:00'`.
>     
>     
> *   作为任一`YYYYMMDDHHMMSS`格式`YYMMDDHHMMSS`的数字，前提是该数字作为日期有意义。例如`19830905132800`和`830905132800`被解释为`'1983-09-05 13:28:00'`。

如果您使用的是字符串格式，则必须确保正确引用您的字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T10:29:54.827

您以 的形式传递日期时间`string`，因此您需要像这样用单引号字符引用它们：

```
... (date_from<'".$date_from."' AND date_to>'".$date_to."') ... 
```

或者，您可以将您使用的变量的格式更改为数字（`YYYYMMDDHHmmss`形式），然后不需要引用

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T10:28:59.073

尝试使用另一种语法，更像：

```
WHERE OrderDate BETWEEN '01/01/2006' AND '01/02/2006' 
```

来源： http: [//www.demiliani.com/blog/archive/2006/01/19/3384.aspx](http://www.demiliani.com/blog/archive/2006/01/19/3384.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-29T07:45:57.277

这是为您提供的完整版 SQL :)。我已经用你提到的字段创建了测试表，这个 SQL 对我来说运行完美——

```
$sql="SELECT * FROM presents WHERE (date_from > STR_TO_DATE('".$date_from."', '%Y-%m-%d %H:%i:%s') AND date_to < STR_TO_DATE('".$date_to."', '%Y-%m-%d %H:%i:%s')) OR (date_from > STR_TO_DATE('".$date_from."', '%Y-%m-%d %H:%i:%s') AND date_to >  STR_TO_DATE('".$date_to."', '%Y-%m-%d %H:%i:%s') ) OR (date_from < STR_TO_DATE('".$date_from."', '%Y-%m-%d %H:%i:%s') AND date_to > STR_TO_DATE('".$date_to."', '%Y-%m-%d %H:%i:%s')) OR (date_from < STR_TO_DATE('".$date_from."', '%Y-%m-%d %H:%i:%s') AND date_to <STR_TO_DATE('".$date_to."', '%Y-%m-%d %H:%i:%s'))"; 
```

附上我在 phpMyAdmin 中运行 SQL 时得到的结果- ![在此处输入图像描述](../Images/a617bb09f295e6bf27439574a48881b2.png)

如果您遇到任何问题，请告诉我。

# ios - Vfr 阅读器从右到左阅读

> ID：11647671
> 
> 赞同：2
> 
> 时间：2012-07-25T10:25:30.277
> 
> 标签：ios, pdf, right-to-left

我是 iPhone 开发的新手。我目前正在开发一个阿拉伯语 iPhone 应用程序，该应用程序有 PDF 文件可供阅读。我目前正在使用按预期工作的 vfr/Reader 开源阅读器。现在客户希望从右向左或相反方向阅读（滚动）PDF 文档。我尝试了一切，但无法得到它。有人可以引导我走向正确的方向或分享一些示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T03:27:52.123

我所知道的 iOS 唯一从右到左的阅读器称为 CloudReaders，它在 iTunes Store 中是免费的。

也许该应用程序的作者可以为您提供建议

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-09T08:59:42.113

`M_PI`您可以通过（ ）转换（旋转）Reader的主视图，即ScrollView`theScrollView.transform = CGAffineTransformMakeRotation(M_PI);`

然后通过（`-M_PI`）旋转到内容视图，如下所示：

```
contentView.transform = CGAffineTransformMakeRotation(-M_PI); 
```

# r - 仅获取控制台输出中的数值

> ID：11647682
> 
> 赞同：1
> 
> 时间：2012-07-25T10:26:21.460
> 
> 标签：r, physics, time-series, finance, fractals

我正在使用分形包并使用 DFA 函数，它在控制台中为我提供了非常完整的输出：

```
 DFA(log(price_1m[1:1024]),detrend="poly2",overlap=0,scale.max=512) 
```

控制台输出：

```
Detrended fluctuation analysis for log(price_1m[1:1024])
--------------------------------------------------------
H estimate             : 0.452347 
Domain                 : Time 
Statistic              : RMSE 
Length of series       : 1024 
Block detrending model : x ~ 1 + t + I(t^2) 
Block overlap fraction : 0 
Scale ratio            : 2 

Scale 6.00000000 1.2000e+01 2.4000e+01 4.8000e+01 96.0000000 1.920e+02 3.8400e+02
RMSE  0.00029362 4.2002e-04 5.2302e-04 8.5258e-04  0.0011629 1.403e-03 1.7068e-03
Message d'avis :
In if (cls == "signalSeries") { :
  la condition a une longueur > 1 et seul le premier élément est utilisé 
```

事实是我只想要并且需要赫斯特指数估计。所以我想摆脱所有的休息。所以我试图获取 DFA 函数的属性（DFA 函数给出一个 fractalBlock 对象），这是我在控制台中得到的：

```
Call:
lm(formula = y ~ 1 + x, data = data.frame(x = xx, y = yy, w = ww), 
    weights = w)

Coefficients:
(Intercept)            x  
    -8.9269       0.4523  

Message d'avis :
In if (cls == "signalSeries") { :
  la condition a une longueur > 1 et seul le premier élément est utilisé 
```

好的，我有一个 lm 对象，我可以从中提取斜率参数估计：

```
attr(DFA(log(price_1m[1:1024]),detrend="poly2",overlap=0,scale.max=512),which="logfit")$coef[2] 
```

这是它在控制台中打印的内容：

```
 x 
0.452347 
Message d'avis :
In if (cls == "signalSeries") { :
  la condition a une longueur > 1 et seul le premier élément est utilisé 
```

重点是：我只想得到 0.452347 的数值。我尝试使用 as.numeric() 函数转换我的数据，但它不起作用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:13:15.773

你只需要这样做：

```
H_values <- DFA(log(price_1m[1:1024]),detrend="poly2",overlap=0,scale.max=512)
H_values["H"] 
```

它适用于虚假数据。如果警告仍然存在：

```
options(warn=-1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:56:48.963

这会给你一个未命名的 Double 结果：

```
attr(DFA(log(price_1m[1:1024]),detrend="poly2",overlap=0,scale.max=512),which="logfit")$coef[[2]] 
```

但可能仍会包括警告。如果你先赋值给一个变量然后打印呢？

```
x <- attr(DFA(log(price_1m[1:1024]),detrend="poly2",overlap=0,scale.max=512),which="logfit")$coef[[2]]
x 
```

如果您仍然收到此警告，您也许可以使用以下命令抑制它`try`：

```
try( x <- attr(DFA(log(price_1m[1:1024]),detrend="poly2",overlap=0,scale.max=512),which="logfit")$coef[[2]], silent = TRUE)
x 
```

# process - 挂接到windows进程

> ID：11647689
> 
> 赞同：1
> 
> 时间：2012-07-25T10:26:53.017
> 
> 标签：process, hook, code-injection, dll-injection

我需要在应用程序启动之后和退出之前执行一些操作（某种使用 UMDH 的自动内存泄漏检测）。

我已经准备好 DLL，它被注入到所有进程中，并且在 DLL_PROCESS_ATTACH 上我正在执行我的第一个操作（就在应用程序启动之后）——所以我的这部分问题得到了解决。

问题在于第二部分 - 在进程即将退出时执行操作。

我已经在 DLL_PROCESS_DETACH 中尝试过，但这为时已晚，我需要早点挂钩。

使用 Windows Hooks 机制，我已经迷上了 WH_GETMESSAGE：

```
hhk = SetWindowsHookEx(WH_GETMESSAGE, (HOOKPROC) &GetMsgProc, NULL , GetCurrentThreadId()); 
```

和 GetMsgProc() 函数：

```
LRESULT CALLBACK GetMsgProc(int nCode,WPARAM wParam,LPARAM lParam)
{
  if( nCode == HC_ACTION )
  {
        PMSG msg = (PMSG) lParam;
        if( msg->message == WM_CLOSE )
        {
              OutputDebugString(L"WM_CLOSE");
        }
        if( msg->message == WM_QUIT )
        {
              OutputDebugString(L"WM_QUIT");
        }
        if( msg->message == WM_DESTROY )
        {
              OutputDebugString(L"WM_DESTROY");
        }
  }
  return CallNextHookEx(hhk, nCode, wParam, lParam);
} 
```

但是使用这种方法，我只检测到 WM_CLOSE 消息（当我将使用“X”按钮关闭应用程序时）。我不知道为什么我没有检测到 WM_QUIT 消息，从来没有。

任何想法，当应用程序即将退出时如何执行一些操作？

（我知道 Detours，但不能在我的项目中使用它们......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:33:51.930

1.  尝试`WH_CALLWNDPROC`除`WH_GETMESSAGE`. 因此，当您收到`WM_DESTROY`主应用程序窗口时 - 这可能是一个标志。

2.  我认为，理想情况下，您必须覆盖主应用程序窗口的窗口过程（如果可能的话）。喜欢

3.  `WM_QUIT`消息不被窗口过程处理。当`GetMessage`看到`WM_QUIT`它返回时`FALSE`。所以，可能这就是问题所在。您可以尝试更改 IAT 表（导入）以覆盖 GetMessage[A/W] 过程。

    ```
    WNDPROC gpfnOldProc = (WNDPROC)SetWindowLongPtr(hWnd, GWLP_WNDPROC, (LONG_PTR)YourWndProc); 
    ```

# javascript - 在 Jquery Mobile 中刷新页面时如何使用 Coldfusion toScript？

> ID：11647690
> 
> 赞同：2
> 
> 时间：2012-07-25T10:26:58.947
> 
> 标签：javascript, jquery, variables, jquery-mobile, coldfusion

我有一个多语言站点，需要将不同语言的错误消息传递给浏览器以进行客户端表单验证。

现在我正在使用一个error.cfc，其中包含：

```
 <cfcomponent displayname="errorMsg" hint="create error msgs">  
      <cffunction name="createErrMsgsLog" output="false" returntype="string">               

           <cfset var allErrMsgs=ArrayNew(2)>
           <cfquery datasource="db" name="texte" cachedWithin="#Session.globalCache#">
                ... query db for snippets and text blocks ...
           </cfquery>
           <cfoutput query="texte"><cfset "#trim(snippet)#" = "#trim(text)#"></cfoutput>
           <cfscript>
                allErrMsgs[1][1] = "comp";
                allErrMsgs[1][2] = tx_validate_comp;
                ...
           </cfscript>
           <cfset Session.errMsgs = serializeJSON(allErrMsgs)>
           <cfreturn Session.errMsgs> 
      </cffunction>
 </cfcomponent> 
```

所以我抓取所有文本，填充一个数组，该数组被序列化并作为字符串返回。

cfc 在 application.cfc 中调用

```
 <cffunction name="onSessionStart" returnType="boolean" output="false" hint="session initalizer">
      ...
      <cfinvoke component="services.errorMsg" method="createErrMsgsLog" returnvariable="errMsgs"></cfinvoke>
      <cfset Session.errMsgs = errMsgs>
      ...
 </cffunction> 
```

在每一页上，我都像这样包含它：

```
 <script type="text/javascript" language="JavaScript">var #toScript(Session.errMsgs, "errorLog")#</script> 
```

我不确定为什么有时会出现**errorLog 未定义**，但它偶尔会在我刷新页面或在应用程序中手动输入页面 URL 时发生（从页面 ABC 转到页面 DEF）。

我正在使用 Jquery Mobile，因此当会话初始化和第一页加载时，errorLog 会在第一页中呈现一次。由于所有后续页面都从该页面中拉入/删除，因此初始错误日志始终处于活动状态。我想当手动更改 URL 时，我丢失了第一页 errorLog，因为我正在加载一个新页面，但我不明白为什么新页面没有得到“它自己的”errorLog 或者为什么它是未定义的突然。

**问题：**
知道如何确保定义了 errorLog = 我如何确保在 Coldfusion 中创建了 errorMessages？

感谢帮助！

**编辑：** 好的。我在 Coldfusion 中添加了一个检查，因此如果 Session 变量未定义，我将重新创建它。然而，到目前为止，它始终存在。似乎只有当我手动更改 URL 并转到另一个页面时才会发生。我可以在 IE8 中重现。奇怪的是，当我检查 IE8 调试器时，errorLog 在那里，但我仍然收到一个错误，告诉我它是未定义的......

**编辑：**
我已将 cfinvoke 移至 application.cfc 中的请求处理程序。

```
 <cfif len( Session.errMsgs ) EQ 0>
        <cfinvoke component="services.errorMsg" method="createErrMsgsLog" returnvariable="errMsgs"></cfinvoke>
        <cfset Session.errMsgs = errMsgs> 
    </cfif> 
```

Coldfusion 部分似乎工作正常，因为我只是在应用程序启动时才进入 if 语句。之后定义了 errMsgs，但问题仍然存在……令人沮丧。

**编辑**：
另一个原因可能是我的 JSON 字符串。我是这样设置的：

```
 <script type="text/javascript">var #toScript(Session.errMsgs, "errorLog")#; alert(errorLog);</script> 
```

警报会提醒它，但如果我稍后尝试像这样抓住它：

```
 err = jQuery.parseJSON(errorLog); 
```

我得到NULL。我的 JSON 看起来像这样（**有效，警告 Session.errMsgs**）

```
 [["firma","Bitte Firmennamen eingeben!"],["firma_re","Bitte Firmennamen eingeben!"],... 
```

或者这个（无效，使用 toScript 输出）：

```
 "[[\"firma\",\"Bitte Firmennamen eingeben!\"],[\"firma_re\",\.... (invalid) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:40:26.053

好吧，我不确定是不是这样，但我注意到了几个错误：

```
<cfif len( Session.errMsgs ) EQ 0>
    <cfinvoke component="services.errorMsg" method="createErrMsgsLog" returnvariable="errMsgs"></cfinvoke>
    <cfset Session.errMsgs = errMsgs> 
</cfif> 
```

应该：

```
<cfif arrayLen( Session.errMsgs ) EQ 0>
    <cfinvoke component="services.error" method="createErrMsgsLog" returnvariable="errMsgs"></cfinvoke>
    <cfset Session.errMsgs = errMsgs> 
</cfif> 
```

Session.errMsgs 应该是一个数组，所以你使用 arrayLen() 函数。此外，您通过文件名而不是显示名称调用组件，因此“services.error”而不是“services.errorMsg”。

另外，我会直接在组件的返回中设置变量，以避免任何变量范围问题：

```
<cfinvoke component="services.error" method="createErrMsgsLog" returnvariable="SESSION.errMsgs"></cfinvoke> 
```

好吧，实际上，我可能根本不会使用 cfinvoke，但这更像是一种风格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:43:26.980

我想我找到了问题所在。我正在使用 RequireJS，并且在代码段上方调用了初始化 requireJS，该代码段将变量输入到页面上。虽然这似乎在第一页上有效，但在后续页面上，requireJS 在重新解析 js 文件时似乎要快得多，因此在页面上设置变量之前解析了查找*errorLog的文件。*在设置 errorLog 后将 requireJS init 移至似乎可以解决问题....一些搜索...

# c - 以下用 C 编写的程序的输出是什么？

> ID：11647692
> 
> 赞同：0
> 
> 时间：2012-07-25T10:27:14.603
> 
> 标签：c

我是 C 语言的新手。但我可以理解为什么下面的代码**输出为 'A'**。

困扰我的一件事是 printf 语句中的数组名称 p。编译器如何处理这个 p？

**p 如何在第 5 行之后被字符数组 "%c\n" 替换**？

我知道这是一个愚蠢的问题，很抱歉发布这只兔子。

谁能帮我理解这背后的概念？

```
 line1:      #include<stdio.h>
 line2:      int main()
 line3:      {
 line4:          char p[]="%d\n";
 line5:          p[1]='c';
 line6:          printf(p,65);
 line7:          return 0;
             } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T10:32:00.550

的第一个参数`printf()`是`const char*`包含格式说明符的 a。更常见的是将其视为字符串文字：

```
printf("%c\n", 65); 
```

但是使用包含字符串的变量是合法的。

的分配`p[1] = 'c'`改变了`d`缓冲区`c`，`p`导致字符`A`（作为`65`十进制值`A`）被写入标准输出（作为`%c`指示`printf()`打印字符，而不是`%d`打印数值）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T10:29:46.590

您不会替换整个数组，只是替换数组偏移量 #1 处的字符（第二个字符）。您将其替换为 'c' 使内容为 "%c\n" 当用作格式化字符串时，将整数 65 格式化为大写拉丁语 A

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T10:33:30.597

在第 6 行：
`printf(p,65);`
将更改为
`printf("%c\n",65);` 'A' 的 Ascii 值为 65。
[http://www.asciitable.com/](http://www.asciitable.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T10:32:34.127

解释如下：

```
char p[]="%d\n"; 
```

上述执行后，P 将包含 -> "%d\n"

```
 line5:          p[1]='c'; 
```

在这里，P 现在将是“%c\n”，因为您正在更改基于零的索引的第 1 个字符。

```
line6:          printf(p,65); 
```

这相当于：

```
printf("%c\n",65) 
```

或者

```
printf("%c\n",'A') 
```

因此你得到**A的输出**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T10:41:25.303

```
 #include<stdio.h>
       int main()
       {
          char p[]="%d\n";   #This is stored at p[1]
          p[1]='c'           # d is replaced by c
          printf(p,65);      # p is taken as p[1] and is replaced by "%c\n"
           return 0;
         } 
```

输出：A#ASCII 值 65

如果您将值设为 66，则输出将为“B”，依此类推。

# java - 使用相等运算符比较两个类

> ID：11647694
> 
> 赞同：8
> 
> 时间：2012-07-25T10:27:20.900
> 
> 标签：java

使用相等运算符比较 Class 实例的陷阱是什么？

```
boolean compareTypes(Class<?> clazz, Class<?> rootClazz) {
    return clazz == rootClazz;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-25T10:31:13.843

真的没有*陷阱*；如果您期望实际行为，它的行为就像您期望的那样:) 此外，对象的`equals()`方法`Class`只是从继承的方法，它无论如何`Object`都使用运算符。`==`

唯一令人惊讶的部分是，如果同一个类文件由两个不同的类加载器加载，您将获得两个单独的类对象，它们将比较为`false`. 这是设计使然。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T10:31:43.737

如果这些类是由不同`ClassLoader`的 s 加载的，那么这些类可能来自同一个文件，但不是由同一个对象表示。在这种情况下，它们也可能具有不同的行为，因为其中一个加载器可能已经执行了字节码修改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T10:31:32.673

没有陷阱。`Class`不会覆盖默认值`Object.equals`，所以它是相同的语义，除了使用实际上**会有**一个陷阱，`equals`因为左操作数`null`会引发 NPE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T10:31:48.133

Class 不会直接覆盖 equals 和 extends Object，equals 和 == 在这种情况下是相同的。

无论如何，最佳实践是尽可能使用 equals。

如果您不知道 == 和 equals 之间的区别，请阅读它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-05-22T18:44:54.890

这样做可能更明智

```
boolean compareTypes(Class<?> clazz, Class<?> rootClazz) {
    return clazz.getName().equals(rootClazz.getName());
} 
```

或某些版本，`getName()`例如`getSimpleName()`

# ember.js - 创建 ArrayController 时 Emberjs 应用程序初始化失败

> ID：11647698
> 
> 赞同：0
> 
> 时间：2012-07-25T10:27:28.347
> 
> 标签：ember.js

当我尝试使用 ArrayController 初始化我的 ember 应用程序时，我遇到了一个问题，但只有在将 ember-data 添加到项目时才会出现问题。这是[http://jsfiddle.net/ySmZr/2/的一个简单示例](http://jsfiddle.net/ySmZr/2/)

```
App = Em.Application.create();
App.customerController = Em.ArrayController.create({});
App.initialize();​ 
```

返回以下错误：

```
Uncaught TypeError: Cannot call method 'get' of undefined  (ember-data-latest.js:3693) 
```

没有 ember-data 我没有错误。我到处看了看，我就是找不到为什么 ember 会这样……有什么想法吗？谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:38:14.660

当调用 initialize() 你必须设置路由器的东西。看到[这个](http://jsfiddle.net/ySmZr/5/)

**从文档：**

> 您可以提供 Ember.Router 的子类作为`Router`应用程序的属性。`initialize`当调用应用程序的方法时，将实例化此 Router 类的实例并启用路由检测 。Router 实例将作为`router`应用程序的属性提供

有2个解决方案：

*   调用initialize()，为Application提供router并使用它的能力
*   不要使用初始化（）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T15:59:06.507

如果您使用的是 Ember Data，则必须创建一个控制器类（大写），然后扩展该方法。所以它应该看起来像：

App.CustomerController = Em.ArrayController.extend({});

然后，您只需在需要使用控制器时调用它的实例。

# android - android - 获取 lon 和 lat 的当前位置并放入 GeoPoint？

> ID：11647703
> 
> 赞同：-1
> 
> 时间：2012-07-25T10:27:49.337
> 
> 标签：android

> 我有以下代码，但有错误。有人可以帮忙吗？

```
public void onLocationChanged(Location loc) {
        // TODO Auto-generated method stub
        GeoPoint point = new GeoPoint(loc.getLatitude(),loc.getLongitude());
        OverlayItem overlayitem = new OverlayItem(point, "My Current Location", "My Current Location");
        overlay.addOverlay(overlayitem);
        mapOverlays.add(overlay);

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T10:32:32.597

实际上，`GeoPoint`以微度存储坐标，因此要转换`Location`为`GeoPoint`您将使用以下代码：

```
GeoPoint point = new GeoPoint((int)(loc.getLatitude() * 1E6), (int)(loc.getLongitude() * 1E6)); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:32:57.353

我正在使用以下方法创建具有度数和/或微度数的 GeoPoints：

```
/**
 * Create a {@link GeoPoint} from float values.
 * @param lat Latitude as float
 * @param lng Longitude as float
 * @return {@link GeoPoint}
 */
public static GeoPoint createGeoPoint( double lat, double lng) {
        return new GeoPoint(degreesToMicrodegrees(lat), degreesToMicrodegrees(lng));
}

/** Convert a float point degree value into a micro deree value */
public static int degreesToMicrodegrees( double deg ) {
        return (int)(deg * 1E6);
} 
```

这应该可以帮助你。

所以你的代码会是这样的：

```
public void onLocationChanged(Location loc) {
    // TODO Auto-generated method stub
    GeoPoint point = createGeoPoint(loc.getLatitude(),loc.getLongitude());
    OverlayItem overlayitem = new OverlayItem(point, "My Current Location", "My Current Location");
    overlay.addOverlay(overlayitem);
    mapOverlays.add(overlay);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:40:56.160

```
GeoPoint pointRabat = new GeoPoint(microDegres(latitude),
                microDegres(longitude));
        mapController.setCenter(pointRabat);

    private int microDegres(double value) {
        return (int) (value * 1000000);
    } 
```

# android - 如何在 android 中阅读带有页面卷曲动画的 PDF 书籍？

> ID：11647706
> 
> 赞同：8
> 
> 时间：2012-07-25T10:27:54.493
> 
> 标签：android, pdf, animation

我是 android 新手.. 我将开发一个与阅读带有页面卷曲动画的 pdf 书籍相关的应用程序。我将此页面卷曲动画应用于存储在可绘制文件夹中的图像，但我无法应用于 pdf 书籍。所以，任何人都可以建议我怎么做？

先感谢您

# php - 尝试所有已知解决方案后无法使 file_get_contents 或 cURL 工作

> ID：11647711
> 
> 赞同：1
> 
> 时间：2012-07-25T10:28:10.053
> 
> 标签：php, curl, file-get-contents

我正在尝试通过 PHP 连接到 IIS Web 服务器上的 smartystreets API（liveaddress）。我从这里复制了 file_get_contents 和 cURL 示例：[SmartyStreets github PHP 示例](https://github.com/smartystreets/LiveAddressSamples/tree/master/php)。它们都不起作用。如果我将 URL 直接粘贴到浏览器中，它确实有效。file_get_contents 示例返回：

```
Warning: file_get_contents(https://api.qualifiedaddress.com/street-address/?street=817+Quail+Ln.+%2312+bakersfield%2C+ca+93309&auth-token=5Nk1%2FA) [function.file-get-contents]: failed to open stream: No such file or directory in C:\Inetpub\includes\myclass.php on line 28 
```

我已经在 phpinfo 中确认 allow_url_fopen 已打开。我也尝试过设置 user_agent。尽管如此，这仍然行不通。

cURL 示例返回 false。

这可能与IIS有关吗？或者可能是由于防火墙设置？如果是这样，我如何找出要打开的端口？还有其他可能吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T21:51:49.883

尝试这个。通常使用它就足够`SSL`了`cURL`（*它是某种 min./default/simple/widespread ;) 用于 API 的*SSL 配置），但无论如何它取决于提供者 SSL 配置。

```
curl_setopt($ch, CURLOPT_SSLVERSION, 3); // OpenSSL issue
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);  // Wildcard certificate
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2); 
```

如果它不起作用，请尝试了解smth。关于`SSL configuration of your provider`，您一定会找到解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:43:28.067

我终于让 cURL 工作了。问题是该链接正在使用 SSL（网址中的 https）。我通过回显 curl_error($ch); 发现了这一点。我添加了这个 cURL 选项，它运行良好：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
```

我不确定 file_get_contents 不起作用的原因是否与此有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:33:08.680

该网络服务需要授权。

有关如何通过身份验证详细信息的详细信息，请参阅[`curl_setopt`手册。](http://php.net/curl_setopt)

# google-analytics - 是否可以手动结束 Google Analytics 会话？

> ID：11647713
> 
> 赞同：8
> 
> 时间：2012-07-25T10:28:12.553
> 
> 标签：google-analytics, session-cookies

我想使用自定义变量来划分注册用户和未注册用户之间的流量。Analytics 文档建议为此目的使用会话级自定义变量。

但是，对于我们的用户来说，很常见的是在使用完我们的服务后退出，因为他们经常在共享计算机上工作。注销时，会话级自定义变量将被“未注册”覆盖，因为这发生在同一个会话中。

当用户注销并开始新会话时，是否可以以某种方式结束 Google Analytics 会话？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-08-20T20:05:05.547

有了`analytics.js`这个现在[就可以做到了](https://developers.google.com/analytics/devguides/collection/analyticsjs/field-reference#session)。

只需运行`ga('send', 'pageview', {'sessionControl': 'start'});`，它就会开始一个新的会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T04:28:31.467

您可以将[_setSessionCookieTimeout](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration#_gat.GA_Tracker_._setSessionCookieTimeout)和[_setVisitorCookieTimeout](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration#_gat.GA_Tracker_._setVisitorCookieTimeout)设置为 0 以强制在浏览器关闭时进行新会话，但如果访问者 A 退出您的站点但保持浏览器打开并且访问者 B 跳到椅子上并登录，则它将不起作用...

您可以做的一件事是在用户注销时删除 GA 的 cookie。这将立即结束会话并在下一页加载时开始新会话。

万一你不知道，有一些关于这些东西的注意事项，因为多人使用同一台计算机。基本上，您不能依赖某些指标，例如访问者和唯一身份访问者。

无论会话是自然超时，还是从第一个选项中强制执行（访问者 cookie 被保留），指标都将显示为同一访问者多次访问。

如果您走第二条路线（删除 cookie），它会将每个新会话都计为新访问者，但是您将破坏能够看到访问者多次访问的能力。

因此，无论您做什么，都没有简单的方法可以在同一台计算机上跟踪多个用户并获得可靠的访问指标。

您可以做一些事情来提供帮助：

指定当访问者登录到您的站点时要填充的自定义变量。使其成为每个用户的唯一价值。警告：在决定使用什么价值之前，请阅读 GA 的隐私政策。例如，您不能使用个人身份信息，也不能使用任何可以直接与您自己网站中的个人身份数据相关联的值。

您还可以在访问者注销时获取 GA 的当前访问者 id cookie 并将其存储，然后在登录时，在输出 GA 代码之前将 GA cookie 设置为该值。它与 GA 的跨域跟踪解决方案的原理基本相同，但奇怪的是，GA 没有提供内置函数来轻松设置其访问者 ID（您可以通过在 URL 参数中传递它而不是通过函数调用来实现 -但是你可以自己直接设置cookie）。

再次警告：如果您保存 GA 的访问者 ID，以便在他们再次登录时弹出 cookie，请确保它不直接与个人身份信息相关联（例如在您的数据库中）。阅读他们的服务条款和隐私政策，咨询律师，blahblah。

但无论如何，如果你这样做，它将为共享同一台计算机的个人访问者提供一些可靠的数据。虽然在他们实际登录之前无法解释，但总比没有好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T19:57:55.950

有两种方法可以适当地做到这一点。

1.  页面级别：如果您保留每个请求的用户状态，最好使用它。
2.  访问者级别：如果您只想在用户登录时设置变量。

清除 Cookie 不是处理此问题的正确方法。会话变量适用于需要在当前会话期间的某个时间点被覆盖的变量。

选择范围时，请考虑它提供的功能：

*   Session 允许覆盖值。
*   页面级别将保留以供下次访问。
*   访问者将逐页跟踪。

# jquery - 如何使用 Django、Ajax、jQuery 在不刷新页面的情况下提交表单？

> ID：11647715
> 
> 赞同：20
> 
> 时间：2012-07-25T10:28:27.770
> 
> 标签：jquery, ajax, django

我是使用 django 的新手。我需要简单的例子。如何使用 Django、Ajax、jQuery 在不刷新页面的情况下提交表单（帖子）？

这是我的表单、视图和模板：

视图.py

```
from django.shortcuts import *
from django.template import RequestContext
from linki.forms import *

def advert(request):
    if request.method == "POST":
        form = AdvertForm(request.POST)

        if(form.is_valid()):
            print(request.POST['title'])
            message = request.POST['title']

        else:
            message = 'something wrong!'

        return render_to_response('contact/advert.html',
                {'message':message},
            context_instance=RequestContext(request))

    else:
        return render_to_response('contact/advert.html',
                {'form':AdvertForm()},
            context_instance=RequestContext(request)) 
```

forms.py（使用“ModelForm”的形式）

```
from django import forms
from django.forms import ModelForm
from linki.models import Advert

class AdvertForm(ModelForm):
    class Meta:
        model = Advert 
```

模板（表单 html 代码）

```
<html>
<head>

</head>
    <body>
    <h1>Leave a Suggestion Here</h1>
        {% if message %}
            {{ message }}
        {% endif %}
        <div>
            <form action="" method="post">{% csrf_token %}
                {{ form.as_p }}
                <input type="submit" value="Submit Feedback" />
            </form>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-27T04:59:23.087

如果您打算使用带有 jquery 的 ajax 提交，则不应从您的视图中返回 html。我建议您改为这样做：

html:

```
<html>
<head>
</head>
<body>
    <h1>Leave a Suggestion Here</h1>
        <div class="message"></div>
        <div>
            <form action="" method="post">{% csrf_token %}
                {{ form.as_p }}
                <input type="submit" value="Submit Feedback" />
            </form>
        </div>
</body>
</html> 
```

js

```
$('#form').submit(function(e){
    $.post('/url/', $(this).serialize(), function(data){ ... 
       $('.message').html(data.message);
       // of course you can do something more fancy with your respone
    });
    e.preventDefault();
}); 
```

意见.py

```
import json
from django.shortcuts import *
from django.template import RequestContext
from linki.forms import *

def advert(request):
    if request.method == "POST":
        form = AdvertForm(request.POST)

        message = 'something wrong!'
        if(form.is_valid()):
            print(request.POST['title'])
            message = request.POST['title']

        return HttpResponse(json.dumps({'message': message}))

    return render_to_response('contact/advert.html',
            {'form':AdvertForm()}, RequestContext(request)) 
```

这样你就可以将响应放在`message`div 中。而不是返回纯 html，你应该返回 json。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-27T05:50:41.787

```
<script type="text/javascript">
$(document).ready(function() {
    $('#form_id').submit(function() { // On form submit event
        $.ajax({ // create an AJAX call...
            data: $(this).serialize(), // get the form data
            type: $(this).attr('method'), // GET or POST
            url: $(this).attr('action'), // the file to call
            success: function(response) { // on success..
                $('#success_div').html(response); // update the DIV
            },
            error: function(e, x, r) { // on error..
                $('#error_div').html(e); // update the DIV
            }
        });
        return false;
    });
});
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T10:32:36.867

```
$('#form-id').submit(function(e){
    $.post('your/url', $(this).serialize(), function(e){ ... });
    e.preventDefault();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-14T06:47:51.687

[这](https://realpython.com/django-and-ajax-form-submissions/)是一个完美的教程。我将包括重要部分：

首先[将此jQuery脚本](https://github.com/realpython/django-form-fun/blob/master/part1/main.js)添加到`main.js`您的页面并将其链接到您的页面。

将此代码添加到`main.js`（我将包括我的版本以发送博客评论）

```
// Submit post on submit
$('#comment-form').on('submit', function(event){
    event.preventDefault();
    create_post();
});

// AJAX for posting
function create_post() {
    $.ajax({
        url : "/blogcomment/", // the endpoint
        type : "POST", // http method
        data : {
            blog_id: blog_id,
            c_name : $('#comment-name').val(),
            c_email:  $('#comment-email').val(),
            c_text:  $('#comment-text').val(),
        }, // data sent with the post request

        // handle a successful response
        success : function(json) {
            $('#comment-name').val(''); // remove the value from the input
            $('#comment-email').val(''); // remove the value from the input
            $('#comment-text').val(''); // remove the value from the input
            $('#comment-form').prepend("<div class='alert alert-success'><button type='button' class='close' data-dismiss='alert'>&times;</button>" + json.result +"</div>");
        },

        // handle a non-successful response
        error : function(xhr,errmsg,err) {
            $('#comment-form').prepend("<div class='alert alert-danger'><button type='button' class='close' data-dismiss='alert'>&times;</button>Oop! Error happend!</div>"); // add the error to the dom
            //console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
        }
    });
} 
```

我`views.py`的评论如下所示：

```
def get_blog_comment(request):
    if request.method == 'POST':
        blog_id = request.POST.get('blog_id') 
        user = request.POST.get('c_name')
        email = request.POST.get('c_email')
        comment = request.POST.get('c_text')
        date = jdatetime.datetime.now().strftime("%Y-%m-%d");
        response_data = {}
        blogcomment = Comments(blog_id = blog_id, date = date, name = user, email = email, comment_text = comment)
        blogcomment.save()

        response_data['result'] = 'Success!!.'

        return HttpResponse(
            json.dumps(response_data),
            content_type="application/json"
        )
    else:
        return HttpResponse(
            json.dumps({"nothing to see": "this isn't happening"}),
            content_type="application/json"
        ) 
```

`urls.py`最后是原始教程中未包含的 url 部分：

```
path('blogcomment/', views.get_blog_comment, name='get_blog_comment'), 
```

# email - Outlook - 将邮件导出到 vba 规则中的文本

> ID：11647717
> 
> 赞同：0
> 
> 时间：2012-07-25T10:28:41.553
> 
> 标签：email, text, outlook, export, rule

我很确定这已经完成了。

有谁知道如何将电子邮件导出到我的 C 盘上的文本文件中，我知道如何将电子邮件移动到 Outlook 中的其他文件夹中，但在我的 C 盘上。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:47:10.883

查看`MailItem.SaveAs`方法。您指定路径和文件类型。

前任：

```
Sub SaveEmail()

Dim msg As Outlook.MailItem

  ' assume an email is selected
  Set msg = ActiveExplorer.Selection.Item(1)

  ' save as text
  msg.SaveAs "C:\MyEmail.txt", olTXT

End Sub 
```

文件类型是一个`OlSaveAsType`常量。在 VBA 编辑器中按 F2 并将其粘贴到可能值列表的搜索框中。

# c# - 在 java 中使用 C# dll

> ID：11647725
> 
> 赞同：1
> 
> 时间：2012-07-25T10:29:01.753
> 
> 标签：c#, java, dll

我试图在 c# 中使用外部 .dll 文件编码，在我的 Java 应用程序中，我对 dll 的了解是它包含具有我们可以使用的功能的接口，我可以将 dll 加载到我的 java 应用程序，但是我如何使用这些接口里面呢？我不知道 JNI 在这种情况下如何提供帮助。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:35:25.027

[您可以使用Robert Giesecke](https://sites.google.com/site/robertgiesecke/Home/uploads/csharpprojecttemplateforunmanagedexports)编写的项目模板从您的 C# DLL 创建本机导出。这允许您在 C# DLL 中创建本机 C 风格的 API 导出，并从 Java 或几乎任何其他语言调用它们。向下滚动到非托管导出库文件的页面底部。

或者，您可以使用[`ComVisible`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.comvisibleattribute.aspx)创建一个 COM 类并从 Java 访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:32:59.693

我怀疑您需要使用诸如[JACOB](http://sourceforge.net/projects/jacob-project/)或[Java Native Access](http://en.wikipedia.org/wiki/Java_Native_Access)之类的 Java/COM 桥接器（您可能必须编写一个桥接器，因为 JNA 仅用于*本机*访问）。

有关更多详细信息，请参阅[此 SO 答案](https://stackoverflow.com/a/6009272/12960)。

# iphone - iPhone：如何识别我在应用商店提交的应用版本

> ID：11647728
> 
> 赞同：0
> 
> 时间：2012-07-25T10:29:15.793
> 
> 标签：iphone, objective-c, ios5

我的应用程序中有电子邮件功能，并且我想在电子邮件中将我的应用程序版本提交到应用程序商店

我怎样才能做到这一点？如果你有，请给我解决方案

提前比

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:30:31.223

```
NSString* version = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:30:20.490

要将版本号作为字符串获取，只需调用：

```
NSString *version = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"]; 
```

如果你想把一些文本放在一起：

```
NSString *version = [NSString stringWithFormat:@"Version %@",  [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:31:21.270

尝试

```
[[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleShortVersionString"] 
```

# swt - 在 TabFolder 中设置 SWT Composite 的大小

> ID：11647730
> 
> 赞同：1
> 
> 时间：2012-07-25T10:29:21.787
> 
> 标签：swt

如何在选项卡文件夹中设置合成的宽度和高度？

PS：`setSize`而且`setBounds`不起作用！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:20:57.047

由于您没有说明何时、何地以及如何设置复合大小，因此，我假设您正在设置事件的大小，并且`setSize`对我有用。

我在 Win7、eclipse 4.2 和 JDK 1.6_b30 上。查看示例代码：

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.TabFolder;
import org.eclipse.swt.widgets.TabItem;
import org.eclipse.swt.widgets.Text;

public class Test 
{
    public static void main(String[] args) throws Exception
    {
        Display display = new Display();
        Shell shell = new Shell(display);
        shell.setLayout(new GridLayout(1, false));

        TabFolder folder = new TabFolder(shell, SWT.TOP);
        folder.setLayout(new GridLayout());
        folder.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

        TabItem item = new TabItem(folder, SWT.NONE);
        item.setText("Tab 1");

        final Composite composite = new Composite(folder, SWT.BORDER);
        composite.setLayout(new GridLayout());
        composite.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, false));
        Text text = new Text(composite, SWT.BORDER);
        text.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, false));
        text.setText("Tab 1");
        Button b = new Button(composite, SWT.PUSH);
        b.setText("Press");
        b.addSelectionListener(new SelectionAdapter() {
            @Override
            public void widgetSelected(SelectionEvent e) {
                composite.setSize(23, 43);
            }
        });

        item.setControl(composite);

        shell.setSize(300, 200);
        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch())
                display.sleep();
        }
        display.dispose();
    }
} 
```

***`Before Pressing the Button`***

![在此处输入图像描述](../Images/bdd2d276cb51ae93cc90f346028bf956.png)

***`After Pressing the Button`***

![在此处输入图像描述](../Images/55b93c203ce0e8a2f7fe9f807ee9f8cf.png)

虽然有捕捉！只要您调整应用程序的大小，复合材料就会恢复到**原来的大小**！

* * *

如果您不使用任何事件来设置大小， 也**可能会出现问题（可能是 SWT 选项卡文件夹中的一些错误或功能）。**一个非常非侵入性**`hack`**（不需要任何用户交互）是使用`PaintListener`. 请参阅以下代码：

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.events.PaintEvent;
import org.eclipse.swt.events.PaintListener;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.TabFolder;
import org.eclipse.swt.widgets.TabItem;
import org.eclipse.swt.widgets.Text;

public class Test 
{
    public static void main(String[] args) throws Exception
    {
        Display display = new Display();
        Shell shell = new Shell(display);
        shell.setLayout(new GridLayout(1, false));

        final TabFolder folder = new TabFolder(shell, SWT.TOP);
        folder.setLayout(new GridLayout());
        folder.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

        TabItem item = new TabItem(folder, SWT.NONE);
        item.setText("Tab 1");

        final Composite composite = new Composite(folder, SWT.BORDER);
        composite.setLayout(new GridLayout());
        composite.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, false));
        Text text = new Text(composite, SWT.BORDER);
        text.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, false));
        text.setText("Tab 1");

        folder.addPaintListener(new PaintListener() {
            public void paintControl(PaintEvent e) {
                composite.setSize(23, 43);
            }
        });

        item.setControl(composite);

        shell.setSize(300, 200);
        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch())
                display.sleep();
        }
        display.dispose();
    }
} 
```

该`PaintListener`解决方案**不是一个非常优雅的解决方案**，但它适用于我的开发环境。

# android - Android 图像未在方向更改时更新，钛移动 sdk v2.1.1

> ID：11647733
> 
> 赞同：0
> 
> 时间：2012-07-25T10:29:34.827
> 
> 标签：android, sdk, orientation, titanium, resolution

我正在更改方向更改时的导航栏背景图像。但它在 sdk 版本 2.1.1 中不起作用。

在 res-land-ldpi 和 res-port-ldpi 中针对不同方向具有不同分辨率的图像。但路径未在方向更改时正确更新，图像未正确更新，即使方向更改事件侦听器正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:44:50.750

尝试在覆盖方法 onConfigurationChanged() 中执行相同操作 在 onConfigChange 上的 android 清单中输入以进行定向

# jquery - 如何在焦点事件上调用已定义的函数？

> ID：11647734
> 
> 赞同：0
> 
> 时间：2012-07-25T10:29:39.570
> 
> 标签：jquery, function, focus, bind

所以我有这个代码：

```
function myOnFocus(){
    $('tr').css("background-color","white");
    $(this).parent().parent().css("background-color","blue");
}

$(".priority").focus(myOnFocus()); 
```

我怎样才能用 jquery .focus() 事件调用 myOnFocus() 但又不写这两个括号之间的整个函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T10:31:29.300

```
$(".priority").focus(myOnFocus); 
```

使用`()`调用函数..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T10:31:21.100

只需`()` 从

```
$(".priority").focus(myOnFocus()); 
```

到

```
$(".priority").focus(myOnFocus); 
```

# arrays - 在LUA中计算二维数组（表）的总和

> ID：11647737
> 
> 赞同：0
> 
> 时间：2012-07-25T10:29:54.030
> 
> 标签：arrays, multidimensional-array, lua, sum

我只是想知道如何计算 lua 中的 2D 数组或表中组件的总和。我试过搜索，但似乎没有任何明确或简单的方法可以做到这一点。

我有一个随机生成的单元格的 5x5 矩阵，我希望知道在给定时间这些值的总和。

lua 中是否有任何内置的东西，例如 sum(matrix) 或 sumof(matrix[][])。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T14:39:12.570

> lua 中内置了任何东西，例如 sum(matrix) 或 sumof(matrix[][])。

不，只需遍历元素并添加：

```
local sum = 0
for ir,row in pairs(matrix) do
  for ic,col in pairs(row) do
    sum = sum + col
  end
end 
```

# asp.net - 连接池已达到最大连接数

> ID：11647747
> 
> 赞同：1
> 
> 时间：2012-07-25T10:30:21.567
> 
> 标签：asp.net, performance, iis-7.5, connection-pooling, informix

此方法会导致错误文件充满此错误：

```
Connection Pool has reached the maximum number of connections 
```

* * *

```
public static int IsValidPortalUser(string p_u, string p_p) {
            int item = 0;
            using (IfxConnection ifxConnection = new IfxConnection(DB_Connection.connectionString))
            {
                IfxCommand ifxCommand = new IfxCommand();
                string str = DB_Connection.My_Decryption_2(p_p);
                try
                {
                    if (ifxConnection.State == 0)
                    {
                        ifxConnection.Open();
                    }
                     DB_Connection.DBCmd = new IfxCommand();
                     DB_Connection.DBCmd.Connection = ifxConnection;
                     DB_Connection.DBCmd.CommandText = "SELECT nvl(emp_num,0) FROM htoemp WHERE username = ? AND DECRYPT_CHAR(password, '78dfdf') = ? ";
                     DB_Connection.DBCmd.Parameters.Add("user_name", p_u);
                     DB_Connection.DBCmd.Parameters.Add("password", str);

                    IfxDataReader ifxDataReaders = ifxCommand.ExecuteReader();
                    using (ifxDataReaders)
                    {
                        if (ifxDataReaders.Read())
                        {
                            item = (int)ifxDataReaders[0];
                        }
                        ifxDataReaders.Close();
                    }
                }
                catch (ApplicationException applicationException)
                {
                }
                ifxConnection.Close();
            }
            return item;
        } 
```

* * *

```
 Error Message:Connection Pool has reached the maximum number of connections.  Stack Trace :    at IBM.Data.Informix.IfxConnectionPool.ReportOpenTimeOut()
   at IBM.Data.Informix.IfxConnectionPool.Open(IfxConnection connection)
   at IBM.Data.Informix.IfxConnPoolManager.Open(IfxConnection connection)
   at IBM.Data.Informix.IfxConnection.Open()
   at DB_Connection_s.DB_Connection.IsValidPortalUser(String p_u, String p_p)
   at LoginSystem.LoginPage_ar.ValidateUser(String UserName, String Password) in H:\LoginSystem\LoginSystem\LoginPage_ar.aspx.cs:line 20
   at LoginSystem.LoginPage_ar.ibtn_login_Click(Object sender, ImageClickEventArgs e) in H:\LoginSystem\LoginSystem\LoginPage_ar.aspx.cs:line 33
   at System.Web.UI.WebControls.ImageButton.OnClick(ImageClickEventArgs e)
   at System.Web.UI.WebControls.ImageButton.RaisePostBackEvent(String eventArgument)
   at System.Web.UI.WebControls.ImageButton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument)
   at System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument)
   at System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData)
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

现在我设置了`Max Pool Size=400`而不是`Max Pool Size=200`

直到现在还没有这种类型的错误。但我想知道为什么这种方法会导致这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:47:49.937

这是在黑暗中的真实拍摄，所以，如果有什么变化，请告诉我

```
public static int IsValidPortalUser(string p_u, string p_p) 
{ 
    int item = 0; 
    using (IfxConnection ifxConnection = new IfxConnection(DB_Connection.connectionString)) 
    { 
        IfxCommand ifxCommand = new IfxCommand(); 
        string str = DB_Connection.My_Decryption_2(p_p); 
        try 
        { 
            if (ifxConnection.State == 0) 
                ifxConnection.Open(); 
            ifxCommand.Connection = idxConnection; 
            ifxCommand.CommandText = "SELECT nvl(emp_num,0) FROM htoemp WHERE username = ? 
                                      AND DECRYPT_CHAR(password, '78dfdf') = ? "; 
            ifxCommand.Parameters.AddWithValue("user_name", p_u); 
            ifxCommand.Parameters.AddWithValue("password", str); 
            IfxDataReader ifxDataReaders = ifxCommand.ExecuteReader(); 
            using (ifxDataReaders) 
            { 
                if (ifxDataReaders.Read()) 
                { 
                    item = (int)ifxDataReaders[0]; 
                } 
                ifxDataReaders.Close(); 
            } 
        } 
    } 
    return item; 
} 
```

此外，根据您的 Informix 版本，字符串密码是[保留关键字](http://publib.boulder.ibm.com/infocenter/idshelp/v10/index.jsp?topic=/com.ibm.sqls.doc/sqls1204.htm)

# android - 解析 Android xml 文件而不是 iOS .strings

> ID：11647754
> 
> 赞同：6
> 
> 时间：2012-07-25T10:30:34.483
> 
> 标签：android, iphone, string, localization

因此，作为移动开发人员，每次翻译我们的一个应用程序时，我们都必须翻译 Android 和 iOS 字符串文件。这些文件包含 90% 的相同字符串，只是文件格式不同。

有谁知道是否有一个 NSLocalizedString 覆盖可以从 Android 兼容的 .xml 文件中读取？或者如果这是可能的？

或者，是否有命令行工具可以在两种格式之间进行转换？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T16:14:24.870

这可以满足您的需要，但不是从命令行。
[http://localise.biz/free/converter/ios-to-android](http://localise.biz/free/converter/ios-to-android)

完整的系统虽然有一个 API。如果您注册，您将能够`.strings`从命令行或通过简单的脚本以编程方式将您的翻译内容提取到 Android XML 文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:48:53.107

所以事实证明这种工具不存在。我创建了一个工具链并将其发布在[这里](https://github.com/paul-delange/cocolize.git)。

如果有活动，我会进一步发展。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T21:55:16.980

对于最近的一个已经有 19 个翻译的项目，我还在寻找一个脚本来将 XCode Localizable.strings 文件转换为 Android Eclipse 格式。

我找到了 convertLocalizable.rb 但我不能使用 ruby​​，所以我创建了一个基于它的 Javascript，请参见下面的链接。您必须剪切和粘贴每个文件，但效果很好。

[Javascript XCode Localizable.strings 和 Android strings.xml 转换器](http://members.home.nl/bas.de.reuver/files/stringsconvert.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T15:01:07.990

这是一个简单的[脚本](https://gist.github.com/3217498)，它将从 Android strings.xml 文件生成 iOS Localizable.strings。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-14T10:35:29.033

试试[Twine](https://github.com/ratana/android-ios-string-utils) - 一个用于转换资源的强大项目。

# android - 如何更改 sencha touch 中文本字段的值？

> ID：11647756
> 
> 赞同：0
> 
> 时间：2012-07-25T10:30:39.290
> 
> 标签：android, cordova, sencha-touch, sencha-touch-2, barcode-scanner

我正在使用 phonegap 中的条形码扫描仪插件扫描条形码。获得值后，我想在文本字段中显示它。以下是我的文本字段代码：

```
{
     xtype : 'textfield',
      id : 'barcodetextfield',
     width : 300,
     margin : '0 0 0 10',
     labelWidth : '40%',
     label : 'Enter Barcode'                                             
} 
```

在控制器中，我试图在文本字段中设置条形码值。

```
window.plugins.barcodeScanner.scan(function(result) {
    this.getBarcodebox.setValue(""+result.text);
 }, function(error) {
     alert("Scanning failed: " + error);
 }); 
```

我把 ref 放在控制器中，如下所示：

```
barcodebox : '#barcodetextfield', 
```

这是我的整个控制器代码:::

```
Ext.define('MyApp.controller.MyController', {
extend : 'Ext.app.Controller',
config : {
    refs : {
        TitlePanel : 'login',
        dashboardpanel : 'dashboard',
        ConsumerSignup : 'consumersignup',
        AddtoWishlog : 'addwishlog',
        wishlogsummary : 'wishlogsummarylist',
        FeedbackSummary : 'feedbacksummarylist',
        ConsumerSignin : 'Consumersignin',
        barcodebox : '#barcodetextfield',
        labelid : 'title'
    },
    views : [ 'TitlePanel', 'dashboardpanel', 'ConsumerSignup',
            'AddtoWishlog', 'wishlogsummary', 'FeedbackSummary',
            'ConsumerSignin' ],

    control : {
        "#LoginBtn" : {
            tap : 'onLoginButtonTap'
        },

        "#wishloghomebutton" : {
            tap : 'onWishlogHomeButtonTap'
        },

        "#feedbacksummaryhomebutton" : {
            tap : 'onFeedbackHomeButtonTap'
        },

        "#wishlogbtn" : {
            tap : 'onWishlogButtonTap'
        },

        "#Feedbackbtn" : {
            tap : 'onFeedbackButtonTap'
        },

        "#signup" : {
            tap : 'onSignupButtonTap'
        },

        "#capturebtn" : {
            tap : 'onCaptureButtonTap'
        },

        "#consumersignuphomebutton" : {
            tap : 'onConsumerSignupHomeButtonTap'
        },

        "#selectphoto" : {
            tap : 'onSelectPhotoButtonTap'
        },

        "#scanbutton" : {
            tap : 'onScanButtonTap'
        }

    }
},

slideLeftTransition : {
    type : 'slide',
    direction : 'left'
},
slideRightTransition : {
    type : 'slide',
    direction : 'right'
},

onLoginButtonTap : function(button, e, options) {

    Ext.Viewport.setActiveItem(this.getDashboardpanel(),
            this.slideLeftTransition);
    // this.getLabelid.setHtml('Dashboard');
},

onWishlogButtonTap : function(button, e, options) {

    Ext.Viewport.setActiveItem(this.getWishlogsummary(),
            this.slideLeftTransition);
},

onFeedbackButtonTap : function(button, e, options) {

    Ext.Viewport.setActiveItem(this.getFeedbackSummary(),
            this.slideLeftTransition);
},

onSignupButtonTap : function(button, e, options) {

    Ext.Viewport.setActiveItem(this.getConsumerSignup(),
            this.slideLeftTransition);
},

onWishlogHomeButtonTap : function(button, e, options) {

    Ext.Viewport.setActiveItem(this.getDashboardpanel(),
            this.slideRightTransition);
},

onFeedbackHomeButtonTap : function(button, e, options) {

    Ext.Viewport.setActiveItem(this.getDashboardpanel(),
            this.slideRightTransition);
},

onConsumerSignupHomeButtonTap : function(button, e, options) {

    Ext.Viewport.setActiveItem(this.getDashboardpanel(),
            this.slideRightTransition);
},

onCaptureButtonTap : function(button, e, options) {
    navigator.camera.getPicture(onPhotoURISuccess, onFail, {
        quality : 100,
        destinationType : Camera.DestinationType.FILE_URI
    });

    function onPhotoURISuccess(imageURI) {
        // console.log(imageURI);
        var largeImage = document.getElementById('capturedimage');
        largeImage.style.display = 'block';
        largeImage.src = imageURI;
    }

    function getPhoto(source) {
        // Retrieve image file location from specified source
        navigator.camera.getPicture(onPhotoURISuccess, onFail, {
            quality : 100,
            destinationType : destinationType.FILE_URI,
            sourceType : source
        });
    }
    function onFail(message) {
        alert('It is failed: ' + message);
    }

},

onSelectPhotoButtonTap : function(button, e, options) {
    navigator.camera.getPicture(onPhotoURISuccess, onFail, {
        quality : 50,
        destinationType : navigator.camera.DestinationType.FILE_URI,
        sourceType : navigator.camera.PictureSourceType.PHOTOLIBRARY
    });

    function onPhotoURISuccess(imageURI) {
        // console.log(imageURI);
        var largeImage = document.getElementById('capturedimage');
        largeImage.style.display = 'block';
        largeImage.src = imageURI;
    }

    function getPhoto(source) {
        // Retrieve image file location from specified source
        navigator.camera.getPicture(onPhotoURISuccess, onFail, {
            quality : 100,
            destinationType : destinationType.FILE_URI,
            sourceType : source
        });
    }
    function onFail(message) {
        alert('It is failed: ' + message);
    }
},

onScanButtonTap : function(button, e, options) {
    window.plugins.barcodeScanner.scan(function(result) {
        this.getBarcodebox().setValue(""+result.text); 
```

// alert("我们得到了一个条形码\n" + // "结果：" + result.text); }, function(error) { alert("扫描失败：" + error); }); } });

当我在对话框中显示值时，它显示正确。但无法在文本框中设置。我如何设置条形码？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:09:40.903

应该：

```
 this.getBarcodebox.setValue(""+result.text); 
```

不是方法调用吗？

```
 this.getBarcodebox().setValue(""+result.text); 
```

这当然是假设您在控制器中添加`barcodebox`了 a ：`ref`

```
 refs: {
        barcodebox: '#barcodtext'
    } 
```

注意`id: #barcodtext`（缺少'e'）中的拼写错误，并确保它等于`ref`选择器指定的值。

- 编辑

看起来这`this`超出了您的回调范围，因此不引用您的控制器。您可以尝试以下方法：

```
window.plugins.barcodeScanner.scan(function(result) {
    var controller = Ext.app.Application.getController('MyController');
    controller.getBarcodebox.setValue(""+result.text);
}, function(error) {
    alert("Scanning failed: " + error);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:12:46.297

而不是`barcodebox : '#barcodetextfield',`在`refs`尝试中使用`getCmp()`

```
var bc = Ext.getCmp('barcodetextfield'); 
```

在那之后`bc.setvalue(''+result.text);`

我希望这有帮助..

# sql-server-2008 - 计算层次结构列

> ID：11647757
> 
> 赞同：2
> 
> 时间：2012-07-25T10:30:45.230
> 
> 标签：sql-server-2008, hierarchy

我有一个使用 ParentID 列的表；表示层次结构的标准方式。

我已经阅读了 hierarchyid 的所有优点，并且需要它来查询具有特定祖先的所有记录。问题是，将表转换为使用 hierarchyid 将需要我目前没有时间进行的许多更改。

是否可以创建：

**类型为 hierarchyid 的计算列**

或者

**具有hierarchyid的该表的索引视图**

我想制作一个递归计算hierarchyid的函数，但这在性能方面并不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:13:15.707

看看使用[reqursive CTE](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx)

# php - 动态网站，同时仍与 SEO 兼容

> ID：11647760
> 
> 赞同：2
> 
> 时间：2012-07-25T10:31:02.083
> 
> 标签：php, .htaccess, seo

> **可能重复：**
> [.htacces 创建友好的 URL。需要帮助](https://stackoverflow.com/questions/3033407/htacces-to-create-friendly-urls-help-needed)

我想创建一个网站，通过 PHP 从 MySQL 数据库加载内容，同时仍针对搜索引擎进行优化。

我已经考虑了一些方法，并正在寻找一些关于哪种方法最好的建议。

我网站上的用户会填写表格并提交，该表格将保存在 SQL 数据库中。我想拥有它，以便可以像这样访问每个新页面：

*   domain.com/plugins/**随便**
*   domain.com/plugins/**另一个页面名称**

一些方法： 1\. 提交表单时，脚本会在 plugins 文件夹中生成一个静态 HTML 页面。当页面被编辑时（会有一个编辑按钮），HTML 页面会被更新的信息覆盖。

2.  domain.com/plugins/whatever和 domain.com/plugins/ **anotherpagename****都会**重定向到 PHP 脚本。

但是，我不知道如何创建一个允许 PHP 脚本获取页面名称的 .htaccess，以便它可以搜索 SQL 数据库并显示正确的信息。

我也不确定搜索引擎将如何处理这些页面？

3.  也许其他人可以为此提出更好的方法？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:45:40.257

对于如何执行此操作，您有几个选项。符合您要求的最简单方法是将以下内容添加到您的 .htaccess 文件中：

```
RewriteEngine on
RewriteRule ^/plugins/(.*)$ /yourscript.php?plugin=$1 [L] 
```

以上将所有请求传递`/plugins/anything`给 yourscript.php，您可以使用 .php 访问插件名称`$_GET['plugin']`。

如果“插件”只是一个示例，并且您希望能够使用`/anything/anything`- 那么您可能希望查看将所有请求传递给您的 PHP 脚本，然后解析请求的 URL。

为此，您将在 .htaccess 文件中使用类似的内容：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule . /yourscript.php [L] 
```

为了打破这一点，上面告诉 Apache 将文件不存在的所有请求（即图像/css/js 等）重写为 yourscript.php。

从那里，您可以通过 访问整个 URL `$_SERVER['REQUEST_URI']`。您可以使用字符串函数、正则表达式等对其进行分解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:40:49.060

为什么不做一个实际的目录？例如。

domain.com/plugins/whatever domain.com/plugins/anotherpagename

任何东西和另一个页面名称都将是目录。然后将html文件写入目录中的index.html。不需要 htaccess，您仍然可以使用与上述相同的 url 访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:49:00.000

我不知道你是否使用任何框架。我有使用`codeigniter`. 可以使用其他框架/核心 PHP 进行相同的模拟。

`codeigniter`具体解决办法：

1.  在 config/routes.php 中定义

    $route['plugins/(:any)'] = "plugins/getPageFromDb/$1"; 在此之后，在浏览器中的 url 将是相同的 'domain.com/plugins/whatever' 但实际上控制会以 'whatever' 作为参数来点击 'plugins' 控制器的 'getPageFromDb' 函数。

2.  In 'getPageFromDb' function you should write your code to get the page from db based on the parameter 'whatever' and echo the output directly or through a view template (depending on your logic / scenario).

And for performance you may keep a static version of the html page and write a relative check in the 'getPageFromDb' function to decide whether to get the page from static or from db.

Considering the url format and the well formed HTML rendering, it should be Search Engine friendly page.

# xaml - 将 TextBlock 前景绑定到 xaml 中的 Global.cs 变量

> ID：11647761
> 
> 赞同：0
> 
> 时间：2012-07-25T10:31:06.277
> 
> 标签：xaml, binding, silverlight-5.0

我一直在网上搜寻类似的问题，但找不到任何可以解决我问题的东西。

我有一个包含全局变量的静态类，其中一些是我希望能够在我的 xaml 控件中绑定的颜色变量，这样我只需更改一个变量即可更改批次（全局变量的原因）。

类命名空间是`MyApp.Assets.Resources`类名是`Global`（.cs）。在我的课堂上，我有名为`DEFAULTCOLOR`和`OKCOLOR`的变量`ALARMCOLOR`。

我的xml：

```
<UserControl
    <!-- ... -->
    xmlns:custom="clr-namespace:InspectionDB.Assets.Resources"
>
    <UserControl.Resources>
        <custom:Global x:Name="global"/> <!-- THIS GIVES AN ERROR SEE BELOW-->

        <common:HierarchicalDataTemplate x:Key="Level1" ItemsSource="{Binding Path=Children}">
            <StackPanel Orientation="Horizontal">
                <Image Source="{Binding Type, Converter={StaticResource localTreeImgConverter}}"/>
                <TextBlock {Binding...} />
                <StackPanel Orientation="Horizontal" Visibility="{Binding Type, Converter={StaticResource localStatusVisibilityConverter}}">
                    <TextBlock Margin="5,0, 0,0" Text="[ " Foreground="{Binding DEFAULTCOLOR, Source={StaticResource global}}" />
                    <TextBlock Text="{Binding Critical}" Foreground="{Binding ALARMCOLOR, Source={StaticResource global}}"/>
                    <TextBlock Text=" | " Foreground="{Binding DEFAULTCOLOR, Source={StaticResource global}}"/>
                    <TextBlock Text="{Binding OK}" Foreground="{Binding OKCOLOR, Source={StaticResource global}}"/>
                    <TextBlock Text=" ]" Foreground="{Binding DEFAULTCOLOR, Source={StaticResource global}}"/>
                </StackPanel>
            </StackPanel>
        </common:HierarchicalDataTemplate>

    </UserControl.Resources>

    <Grid>
        <!-- Where the hierarchical template is used --> 
    </Grid>

</UserControl> 
```

资源中的部分以及绑定都会引发错误：

```
Unable to cast object of type 'ApplicationProxy' to type 'Microsoft.Expression.DesignModel.DocumentModel.DocumentNode'. 
```

我的代码有什么问题，我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:02:44.367

我发现我的问题是什么，因此我找不到任何类似的情况。

我有`public class Global : App`- 不要问我为什么，我确信很久以前就有一个正当的理由，但这意味着它正在进行某种时髦的循环引用。

问题解决了。

# delphi - 将 TPopupMenu 对齐到表单的右侧？

> ID：11647762
> 
> 赞同：10
> 
> 时间：2012-07-25T10:31:06.857
> 
> 标签：delphi, winapi

TPopupMenu 如何与表单的右侧对齐？问题是似乎没有办法在调用之前获取 Popup 菜单的宽度`Popup(X, Y: Integer)`。

我试图获得类似于 Chrome 中系统菜单的行为。

![在此处输入图像描述](../Images/6faacececf2b5c37a04ab6d7631270cf.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-25T11:56:15.957

最简单的解决方案是自己启动弹出菜单：

```
procedure TForm1.Panel1ContextPopup(Sender: TObject; MousePos: TPoint;
  var Handled: Boolean);
var
  PopupPt: TPoint;
begin
  PopupPt := ClientToScreen(Point(ClientWidth, 0));
  TrackPopupMenu(PopupMenu1.Handle, TPM_RIGHTALIGN or TPM_TOPALIGN,
      PopupPt.X, PopupPt.Y, 0, PopupList.Window, nil);
end; 
```

请参阅文档以了解各种标志的含义[`TrackPopupMenu`](http://msdn.microsoft.com/en-us/library/ms648002%28v=vs.85%29.aspx)或[`TrackPopupMenuEx`](http://msdn.microsoft.com/en-us/library/ms648003%28v=vs.85%29.aspx)含义。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-25T12:30:36.597

您也可以设置[`Alignment`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Menus.TPopupMenu.Alignment)为`paRight`并调用

```
with ClientToScreen(Point(ClientWidth - 1, 0)) do
  Popup(X, Y); 
```

# javascript - Android 上的初始 pageYOffset 值（是否已缓存？）

> ID：11647775
> 
> 赞同：2
> 
> 时间：2012-07-25T10:31:38.210
> 
> 标签：javascript, android

我发现了 Android 浏览器的小错误/功能。

如果向下滚动页面然后重新加载，window.pageYOffset 值将不等于 0！

有一个简单的例子： http: [//pastebin.com/bHzc5Ymi](http://pastebin.com/bHzc5Ymi)

如何重现：

1.  复制此代码并在任何安卓设备上打开页面
2.  如果没有滚动条，请单击“显示隐藏内容”链接以加载更多文本 :)
3.  向下滚动浏览器窗口
4.  单击“重新加载”以重新加载页面

在标题下方，您可以看到 的初始值`window.pageYOffset`。在 Android 设备上它将 > 0 :(

有人知道如何`pageYOffset`在Android上清除初始值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:51:01.730

这不是一个错误，这是一个帮助人们在重新加载之前阅读他们阅读的内容的功能。您可以在新选项卡中打开页面而不是重新加载。

# java - 预加载 2 个 jar 时 Java Applet 权限被拒绝

> ID：11647781
> 
> 赞同：0
> 
> 时间：2012-07-25T10:31:56.340
> 
> 标签：java, permissions, jar, applet, archive

`SecurityException Permission denied: file:/d:/Notes/Notes.jar`当我尝试启动我的小程序时出现错误。

我需要在我的小程序中使用 2 个罐子：

1.  Applet.jar - jar 存储小程序的代码（jar 已签名并且工作正常）
2.  Notes.jar - 这是一个允许使用 Lotus Notes 数据库的库。

第一个 jar 从服务器加载，第二个应该从用户的笔记本电脑加载（本地文件存储在应该运行小程序的笔记本电脑上）。

我正在使用html代码：

```
<APPLET CODE = "com.example.AppletClass" WIDTH = 640 HEIGHT = 480
archive="Applet.jar,file:///${user.apiPath}">
<PARAM NAME = "db_path" VALUE ="${user.dbPath}">
<PARAM NAME = "view_name" VALUE ="${user.viewName}">
Your browser doesn't support applets
</APPLET> 
```

问题出在以下行：**archive="Applet.jar,file:///${user.apiPath}"**

`${user.apiPath} = d:/Notes/Notes.jar`

无法加载第二个罐子。但是，如果我将第二个 jar 移动到服务器并将其加载到客户端的笔记本电脑上，一切正常。

不幸的是，该解决方案对我来说不是很好。

有没有可能从不同的地方加载 2 个罐子：服务器和本地？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:33:18.003

刚注意到...

你写作你的路径就像一个

> d:/Notes/Notes.jar

我不太确定，但本地文件路径（至少在 win 中）正在使用反斜杠

> x:\文件夹\file.txt

无论如何，这对您指出哪个操作系统会更有帮助。

还有一件事情...

异常表示小程序正在尝试将 jar 获取为

> file:/d:/*jar's_folder_path*/jar-name.jar

...但你说小程序需要罐子

> d:/Notes/Notes.jar

所以我只想问客户端机器上是否存在 Notes.jar？

# java - Eclipse 可以建议构造函数来实现类型吗？

> ID：11647789
> 
> 赞同：3
> 
> 时间：2012-07-25T10:32:17.573
> 
> 标签：java, eclipse

我可能在这里遗漏了一个技巧，但是在 Eclipse 中，如果我执行以下操作

```
SomeInterface foo = new | 
```

和 hit `Ctrl-space`，我只能选择生成匿名内部类型。我希望 Eclipse 为实现的类型提供一个构造函数*列表* `SomeInterface`。

我很高兴将此作为 Eclipse 的愿望清单错误，但我认为有人可能知道如何解决此问题，或者知道现有的错误（尽管迄今为止我在搜索中未能找到一个错误）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:56:27.893

请针对 JDT/Text 打开一个错误 - [https://bugs.eclipse.org/bugs/enter_bug.cgi?product=JDT](https://bugs.eclipse.org/bugs/enter_bug.cgi?product=JDT)

# optimization - GLSL - 纹理查找是否优化？

> ID：11647793
> 
> 赞同：1
> 
> 时间：2012-07-25T10:32:28.150
> 
> 标签：optimization, opengl, glsl, shader, textures

让我们考虑以下 GLSL 示例：

1.

```
uniform sampler2D t;
...
void main() {
   float val_r = texture2D(t, coords).r;
   float val_g = texture2D(t, coords).g;
   float val_b = texture2D(t, coords).b;
   float val_a = texture2D(t, coords).a; 
```

2.

```
uniform sampler2D t;
...
void main() {
   vec4 data = texture2D(t, coords);
   float val_r = data.r;
   float val_g = data.g;
   float val_b = data.b;
   float val_a = data.a; 
```

3.

```
uniform sampler2D t;
...
void main() {
   vec4 data1 = texture2D(t, coords);
   vec4 data2 = texture2D(t, coords);
   vec4 data3 = texture2D(t, coords);
   vec4 data4 = texture2D(t, coords);
   float val_r = data1.r;
   float val_g = data2.g;
   float val_b = data3.b;
   float val_a = data4.a; 
```

2\. 比 1\. 快吗？或者由于明显的编译器优化，它们是否相等？

3.呢？当然这没有任何意义，但是为了我的着色器代码的清晰，可能会出现这种冗余的纹理查找。我想知道它们是否以某种方式优化/缓存，或者我是否应该避免它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T20:17:10.547

规范中没有提到 GLSL 编译器应该进行任何优化。这意味着更好的方法是避免过早悲观。这段代码

```
uniform sampler2D t;

void main() {
   vec4 val = texture2D(t, coords); 
```

是最好的。没有理由创建浮点变量，因为您始终可以通过`val.x`etc直接访问向量的组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:36:59.280

当然，正如其他人所说，这完全取决于实施。但是，尽管编译器可能能够优化那些明显的情况，但对于您实际的*“现实世界”*问题，情况可能完全不同。

> 我试图通过重新组织源代码来使代码更具可读性和可维护性，但这可能会导致一些冗余的纹理查找。提供的示例是问题呈现的最简单（和综合）可能的方式。他们没有提出我真正的解决方案。

这听起来像您的实际代码与您提供的示例并不真正匹配，因为与简单的示例（是的，甚至是第二个，就像*Sergey*`vec4 val = texture2D(t, coords);`已经解释过的那样）相比，它们三个都完全荒谬，并且没有增加任何可读性或可维护性。

 *所以我猜在你实际的*“真实世界”*代码中，你以更复杂的方式分离出这些纹理调用，可能是不同的函数，或者是条件分支，或者只是通过大量其他指令将它们分开。如果编译器可以优化这个实际代码是一个完全不同的问题，需要为这个特定代码回答。

所以最后你唯一可以肯定的是，例子2永远不会比例子1和3慢。另一方面，你的3个例子的优化行为实际上并没有告诉你任何事情，因为那肯定不是您实际的*“真实世界”*代码，优化器分析起来可能会更加复杂。（如果它确实是您的*“真实世界”*代码，那么您对“真实”的定义与*“真实”**的**真实*定义并不*真正*匹配，而*Sergey*的答案是唯一正确的）。*

# javascript - jQuery .hover(function{}) 仅在实际悬停时

> ID：11647797
> 
> 赞同：-1
> 
> 时间：2012-07-25T10:32:36.777
> 
> 标签：javascript, jquery

我对 jQuery 很熟悉，但我遇到了一点小挫折。我希望仅在我将元素悬停时才调用该函数，而不是在我已经将其悬停并且稍微移动鼠标时才调用该函数。

我只是希望只有当我从外部进入元素区域时才调用该函数。

我希望这是有道理的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:34:57.433

该[`hover`方法](http://api.jquery.com/hover/)绑定了一个事件处理程序 for[`mouseenter`](http://api.jquery.com/mouseenter/)和一个 for [`mouseleave`](http://api.jquery.com/mouseleave/)，因此只要鼠标在元素内移动，它就不会触发任何事件。

这[`mousemove`](http://api.jquery.com/mousemove/)是用于此的事件。也许你也在某个地方绑定它？

如果您只想在鼠标进入而不是离开时处理事件，请使用该`mouseenter`方法而不是`hover`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:34:55.387

也许你需要 mouseenter 而不是整个悬停事件

```
$(div).mouseenter() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:40:45.340

是的，hover 会将 mouseenter 和 mouseleave 绑定到您的选择器：

尝试：

```
$(div).mouseenter(function(){
      //Do whatever you want to do on your mouse enter.
)} 
```

# javascript - 如何将javascript中的文件从源路径复制到目标路径

> ID：11647799
> 
> 赞同：0
> 
> 时间：2012-07-25T10:32:43.593
> 
> 标签：javascript, html

我在一个项目中使用 HTML5 和 javascript。我正在从 Url 加载图像（由用户选择），然后我在画布内移动该图像。在移动时，我正在重绘整个图像。但在运动图像上闪烁。所以我想将该文件从 URL 复制到我的工作目录。这样移动时图像的闪烁就会停止。

有没有其他方法可以做到这一点？如果没有，那么我如何将该图像文件复制到我的工作文件夹（即目标路径）中。

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:48:59.410

[本文](http://www.html5rocks.com/en/tutorials/canvas/performance/)将为您提供一些优化画布代码的好方法。确保仔细阅读标题为：预渲染到屏幕外画布的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:21:44.477

在画布中使用图像时，您可能面临跨域限制。图像和 html 文档必须位于同一服务器/域上，否则您必须将图像作为图像源进行 base64 编码。

# java - du 命令和 apache FileUtils.sizeOfDirectory 的区别

> ID：11647802
> 
> 赞同：2
> 
> 时间：2012-07-25T10:33:05.980
> 
> 标签：java, du, fileutils

我做了一个简单`du -sh`的`/etc/`目录，它显示了 11M。但是当我使用：

```
System.out.println(FileUtils.byteCountToDisplaySize(FileUtils.sizeOfDirectory(new File("/etc/")))); 
```

这告诉我：68 MB。这是错误吗？或者我错过了一些东西。

**[更新]**

当我使用`du -shL`（L 表示取消引用符号链接）时，它显示了 77M。

# c++ - Why is reading not thread-safe?

> ID：11647803
> 
> 赞同：14
> 
> 时间：2012-07-25T10:33:06.560
> 
> 标签：c++, thread-safety

I was wondering why reading from memory is not thread-safe. Among what I've seen so far, inter alia [this](https://stackoverflow.com/questions/2846872/thread-safe-get-accessor-method) question, reading from memory does not appear to be thread-safe.

I've been coding in Python for a while and now getting into C++. I've never heard that reading in Python is not thread-safe.

Please correct me if I'm wrong, but if not, please tell me why reading from memory is not thread-safe.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-25T10:40:21.120

Reading is thread safe, no problems..... until something writes to the location you're reading from, and then... well, hopefully you'll read before the data was changed, or read after the data was changed (in these cases, no worries), but sometimes, just when you really don't want it, you'll read half-way through the write and then you'll get compete garbage data.

The way to mitigate this is to ensure that you only read either before or after any writes, which requires you to check that a write is occurring and thus use a synchronisation lock of some sort. This makes things slower though, as you're obviously checking the lock and then reading instead of reading. If you're working with primitive data types (an int for example) then you can use a CPU synchronisation to speed this up dramatically.

As fr Python, chances are python data is always synchronised for you by the language runtime, if it isn't then you will get the same thread read problems sooner or later. (quick google says yes, [Python will suffer the same problems](http://effbot.org/zone/thread-synchronization.htm) is you're not careful)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-25T10:34:16.507

It is thread safe if many threads are reading the same location, until no one attempts to write there.

Consider if thread A is reading something at the same time as thread B is writing at the memory being read. It will generate a `race condition`. The reading result can become invalid or different from launch to launch

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-25T10:35:51.097

Reading from memory is thread-safe, reading from memory that can be written to at the same time isn't safe though.

In Python this is less of a problem as a lot of objects are immutable, hence only references are modified in those cases, not the memory itself.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-07T18:14:52.857

Reading the same thing simultaneously - is safe. The problem is when something writes to it at the same time.

Consider the following code:

```
int arr_len = 3;
int* arr = new int[arr_len];

void thread_1()
{
    std::cout << arr[arr_len-1];
}

void thread_2(int new_len)
{
    int* temp = new int[new_len];
    for(int i = 0; i < arr_len && i < new_len; ++i)
        temp[i] = arr[i];
    arr_len = new_len;
    delete arr;
    arr = temp;
} 
```

Let's suppose that `arr[arr_len]` is done sequentially (first `arr_len` is read, and then `arr`).

What happens when the 2 threads run interleaved? One of three things can happen:

*   No problem - You're lucky!
*   `arr_len` is larger than `arr` - UB :(
*   `arr` is invalidated (was deleted) - UB :(

# python - 在 SQLAlchemy 中禁用提交对象更改

> ID：11647805
> 
> 赞同：8
> 
> 时间：2012-07-25T10:33:09.163
> 
> 标签：python, mysql, sqlalchemy

我在不是 Web 应用程序的项目中使用 SQLAlchemy。它是一个服务器应用程序，它从数据库加载许多不同的对象并在本地修改它们，但不希望每次提交时都将这些更新保存到数据库中。我以前在一些 Web 项目中使用 Django ORM，发现它更适合我想要实现的目标。在 Django ORM 中，我可以随时 .save() 每个对象，而无需保存我可能不想保存的其他内容。我理解为什么它在 SQLAlchemy 中这样工作，但我想知道如何以类似 Django 的方式做到这一点？

* * *

**更新：** 为了更容易理解我想要实现的目标，我将为您提供一个示例。

它实际上是这样工作的：

```
a = MyModel.query.get(1)
b = MyModel.query.get(1)

a.somefield = 1
b.somefield = 2

# this will save both of changed models
session.commit() 
```

这就是我希望它的工作方式：

```
a = MyModel.query.get(1)
b = MyModel.query.get(1)

a.somefield = 1
b.somefield = 2

a.save()
# I didn't want to save b, changes of b weren't committed 
```

我想更好地控制实际保存的内容。我想每 5 分钟左右保存每个对象的更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T06:27:40.933

我使用类似的东西：

```
class BaseModel(object):
    def save(self, commit=True):
        # this part can be optimized.
        try:
            db.session.add(self)
        except FlushError:
            # In case of an update operation.
            pass

        if commit:
            db.session.commit()

    def delete(self, commit=True):
        db.session.delete(self)

        if commit:
            db.session.commit() 
```

然后我将我的模型定义为：

```
class User(db.Model, BaseModel) 
```

所以，现在我可以这样做：

```
u = User(username='foo', password='bar')
u.save() 
```

这就是您计划实现的目标？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T11:14:24.510

我不确定我是否理解你的困境。

在 Django 中，

```
foo = MyModel(field1='value1', field2='value2')
foo.save() 
```

或者

```
foo = MyModel.objects.create(field1='value1', field2='value2') 
```

在 SQLAlchemy 中，

```
foo = MyModel(field1='value1', field2='value2')
session.add(foo) 
```

此时您只是将对象添加到会话中，它还没有提交事务。只有在完成所需的任何更改后，您才需要提交

```
session.commit() 
```

看看这个[链接](http://lucumr.pocoo.org/2011/7/19/sqlachemy-and-you/)。我认为这将使从 Django ORM 到 SqlAlchemy 的过渡更容易。

**更新**

对于这种情况，您可以使用多个会话。

```
engine = create_engine("postgresql+psycopg2://user:password@localhost/test")
metadata = MetaData(bind=engine)
Session = sessionmaker(bind=engine)
session1 = Session()
session2 = Session()
Base = declarative_base()
class User(Base):
    __tablename__ = 'users'
    id = Column(Integer, primary_key=True)
    name = Column(String)
    age = Column(Integer)
    def __init__(self, name, age):
        self.name = name
        self.age = age
    def __repr__(self):
        return "<User('%s','%s')>" % (self.name, self.age)
Base.metadata.create_all(engine) 
```

在“测试”数据库中创建了一个表“用户”。此外，还初始化了 2 个会话对象 session1 和 session2。

```
a = User('foo','10')
b = User('bar', '20')
session1.add(a)
session1.add(b)
session1.commit() 
```

表用户现在将有 2 条记录

```
1: foo, 10
2: bar, 20 
```

使用 session2 获取 'foo' 记录唱 session1 和 'bar'。

```
foo = session1.query(User).filter(User.name == "foo").first()
bar = session2.query(User).filter(User.name == "bar").first() 
```

更改 2 条记录

```
foo.age = 11
bar.age = 21 
```

现在，如果您希望仅 foo 的更改继续进行，

```
session1.commit() 
```

对于酒吧，

```
session2.commit() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T14:56:49.927

不是为了挑起旧帖，而是

你说：

> 我想每 5 分钟左右保存每个对象的更改。

那么为什么不使用像[Celery](http://www.celeryproject.org/)这样的调度程序。（我使用[pyramid_celery](https://github.com/jpunwin/pyramid_celery)）

有了这个，您可以每 5 分钟保存一次每个对象，即您可以添加一个装饰器：

```
@periodic_task(run_every=crontab(minute="*/5")
def somefunction():
    #your code here 
```

这很好用，尤其是当您需要更新数据库以确保它是最新的时（在有很多用户使用您的系统的情况下）

希望这可以帮助某人，*每 5 分钟节省一次*。

# php - 我想将 .htaccess 文件转换为 web.config

> ID：11647807
> 
> 赞同：-1
> 
> 时间：2012-07-25T10:33:15.000
> 
> 标签：php, .htaccess, iis, web-config

我想将`.htaccess`文件转换为`web.config`.

这是代码

```
AddType application/x-httpd-php .html
RewriteEngine on

RewriteBase /

RewriteCond %{Request_Filename} !-d
RewriteCond %{Request_Filenam}e !-f

RewriteRule ^pages/([0-9A-Za-z_\-~',]+) page_details.html?category_page_title=$1 [NC] 
```

任何人都可以帮我将此 .htaccess 文件转换为 web.config 文件。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:47:47.963

关于整个 `.htaccess`文件的转换，请参阅本手册：[http ://learn.iis.net/page.aspx/557/translate-htaccess-content-to-iis-webconfig/](http://learn.iis.net/page.aspx/557/translate-htaccess-content-to-iis-webconfig/)

它非常全面，并解释了如何转换规则。

* * *

如果您只想重写规则转换，请阅读这篇文章： [http ://learn.iis.net/page.aspx/470/importing-apache-modrewrite-rules/](http://learn.iis.net/page.aspx/470/importing-apache-modrewrite-rules/)

这是一个更循序渐进的 gui 指南，但在您的情况下，它可能就足够了。

* * *

无论如何，您列出的规则可能会以这个（部分）结束`web.config`：

```
 <rewrite>
        <rules>
            <rule name="page details" stopProcessing="true">
                <match url="^/pages/([0-9A-Za-z_\-~',]+)" ignoreCase="true" />
                <conditions>
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
                </conditions>

                <action type="Redirect" redirectType="Permanent" url="/page_details.html?category_page_title={R:1}" />
            </rule>
        </rules>
    </rewrite> 
```

# php - Pinterest API - 纯 json 响应？

> ID：11647809
> 
> 赞同：3
> 
> 时间：2012-07-25T10:33:16.320
> 
> 标签：php, json, api, pinterest

所以我向 Pinterest 的 API 发出了一个简单的 HTTP 请求来获取链接的计数：

```
$this->load->library('rest');
$this->rest->initialize(array('server' => 'http://api.pinterest.com/'));
$return_data = $this->rest->get('v1/urls/count.json?callback=&url=' . $link); 
```

我得到的回应是：

```
receiveCount({"count": 5743, "url": "http://google.com"}) 
```

你可以[在这里自己试试](http://api.pinterest.com/v1/urls/count.json?url=http://google.com)。

我不想要回调，我尝试设置`callback=`但括号仍然存在，所以我无法通过`json_decode`.

有没有更好的方法来获得纯 json 响应而不必自己替换括号？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T10:54:50.807

Pintrest API 目前正在开发中，尚未准备好公开使用；他们不久前删除了自己的文档。[然而， Bolt](http://tijn.bo.lt/pinterest-api)上有一个用于 API v2 的缓存。

现在我只想对响应做一个正则表达式，比如

```
$return_data = preg_replace('/^receiveCount\((.*)\)$/', "\\1", $return_data); 
```

然后`json_decode`就是。

# python - 如何调试用 C 编写的 Python 扩展？

> ID：11647810
> 
> 赞同：1
> 
> 时间：2012-07-25T10:33:19.880
> 
> 标签：python, debugging

如何调试用 C 编写的 Python 扩展？我发现一些链接说我们需要构建 Python 调试，但是如果我们没有 root 访问权限，我们该怎么做呢？我安装了 Python 2.7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:28:00.940

您可以在您的主文件夹中编译启用调试的版本 python 而无需 root 访问权限，并针对该版本开发 C 扩展。

# jquery - jqgrid在标题栏之前设置过滤器工具栏

> ID：11647812
> 
> 赞同：1
> 
> 时间：2012-07-25T10:33:25.090
> 
> 标签：jquery, jqgrid, titlebar

我有一个带有 filterToolbar 的 jqgrid 正确显示：

```
jQuery("#myGrid").jqGrid('filterToolbar',{autosearch:true}); 
```

我希望它显示在标题栏之前，我该如何管理？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:50:18.400

尝试使用[`toolbar`](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions)选项将工具栏放在网格的顶部：

```
toolbar: [true, "top"] 
```

这似乎达到了您正在寻找的效果，如[演示页面](http://www.trirand.com/blog/jqgrid/jqgrid.html)下的演示所示`New in version 3.1`| `Toolbars and userdata`.

这有帮助吗？

# java - 具有 2 个数据源事件处理的 JSlider

> ID：11647813
> 
> 赞同：0
> 
> 时间：2012-07-25T10:33:25.217
> 
> 标签：java, swing, events, jslider

我的框架上有一个 JSlider 组件，它由外部组件（不时设置新值的媒体播放器）不断更新。我希望滑块仅在我操作滑块而不是我的外部组件时处理 stateChanged 事件。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:08:10.367

我会实现我自己的[BoundedRangeModel](http://docs.oracle.com/javase/6/docs/api/javax/swing/BoundedRangeModel.html)，这样你就可以添加额外的标志来指示它是否应该接受更新

**更新示例**

基本思想是实现您自己的模型，这样您就可以控制实际更改值的时间

```
public class MyBoundedRangeModel extends DefaultBoundedRangeModel {

    private boolean updatesAllowed;

    public void setUpdatesAllowed(boolean updatesAllowed) {
        this.updatesAllowed = updatesAllowed;
    }

    public boolean isUpdatesAllowed() {
        return updatesAllowed;
    }

    @Override
    public void setMinimum(int n) {
        setUpdatesAllowed(true);
        super.setMinimum(n);
        setUpdatesAllowed(false);
    }

    @Override
    public void setMaximum(int n) {
        setUpdatesAllowed(true);
        super.setMaximum(n);
        setUpdatesAllowed(false);
    }

    @Override
    public void setExtent(int n) {
        setUpdatesAllowed(true);
        super.setExtent(n);
        setUpdatesAllowed(false);
    }

    @Override
    public void setValue(int n) {
        super.setValue(n);
    }

    @Override
    public void setValueIsAdjusting(boolean b) {
        setUpdatesAllowed(true);
        super.setValueIsAdjusting(b);
        setUpdatesAllowed(false);
    }

    @Override
    public void setRangeProperties(int newValue, int newExtent, int newMin, int newMax, boolean adjusting) {        
        if (isUpdatesAllowed()) {
            super.setRangeProperties(newValue, newExtent, newMin, newMax, adjusting);
        }
    }

} 
```

这将允许您控制“值”属性的更改。您在这里遇到的问题是所有设置的方法都通过该`setRangeProperties`方法，因此您需要决定应该允许什么来影响它。在我的示例中，唯一不控制它的方法是`setValue`方法。

在您的代码中，您需要将其称为...

```
MyBoundedRangeModel boundedRangeModel = new MyBoundedRangeModel();
slider.setModel(boundedRangeModel);

...

boundedRangeModel.setUpdatesAllowed(true);
slider.setValue(value);
boundedRangeModel.setUpdatesAllowed(false); 
```

您唯一的其他选择是扩展`JSlider`自身并`setValue`以类似的方式直接覆盖该方法

# android - 如何使用 Display.getSize 并支持 API 级别 10？

> ID：11647817
> 
> 赞同：1
> 
> 时间：2012-07-25T10:33:30.240
> 
> 标签：android, android-compatibility

我正在尝试支持 API 级别 10 以上的设备。要检查屏幕尺寸，我有这个：

```
Point size = new Point();
Display display = getWindowManager().getDefaultDisplay();
if(android.os.Build.VERSION.SDK_INT < android.os.Build.VERSION_CODES.HONEYCOMB_MR2) {
    size.set(display.getWidth(), display.getHeight());
} else
    getWindowManager().getDefaultDisplay().getSize(size); 
```

但是现在我收到一个错误，因为即使我的最低级别是 10，我也使用 getSize()。
如何正确地做到这一点？

编辑：在应用程序的清单文件中，我有：

```
<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="15" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:42:49.783

您可以将最低 SDK 级别设置为 10，但针对 Android 3.2 构建您的 Android 应用程序（如果您愿意，可以在项目属性中设置它甚至更高）。

只要确保如果您从比最低级别更高的 api 级别调用方法，那么首先像您一样检查设备 SDK 级别。

更多关于它的信息：

[http://simonvt.net/2012/02/07/what-api-level-should-i-target/](http://simonvt.net/2012/02/07/what-api-level-should-i-target/)

还要使用 TargetApi 注释来避免 Lint 错误：

[http://tools.android.com/recent/lintapicheck](http://tools.android.com/recent/lintapicheck)

# c# - 确定和改变 Office 2010 文化？

> ID：11647818
> 
> 赞同：1
> 
> 时间：2012-07-25T10:33:34.873
> 
> 标签：c#, reflection, ms-office, culture

我正在为一家医院编写一个商业程序。因为每个用户都应该使用特定的文化和日期时间女巫是从服务器更新的。它不是 VSTO 应用程序，所以我使用 Process 类和跟踪进程名称来检测 Office 程序，例如 word 已运行，我想更改此进程的日期时间和文化，我知道也许我可以使用更好的方法，但由于某种原因我有这样做。

所以我想知道 Microsoft Office 是否有用于解决此解决方案的 API，或者是否有任何使用反射的建议

# email - 如何将自定义用户字段迁移到用户注册电子邮件中 - drupal 7

> ID：11647819
> 
> 赞同：0
> 
> 时间：2012-07-25T10:33:37.887
> 
> 标签：email, drupal-7, custom-fields

我创建了一个名为 pm-id 的自定义用户字段。我希望将其包含在用户注册电子邮件中。

标准方法 [user:pm_id] 不起作用

谁能帮我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:25:15.417

尝试`[user:field_pm_id]`或`[user:field_pm-id]`。我不确定您所在领域的机器名称是什么，而且绝对不仅仅是`pm-id`.

如果您安装了[Token 模块](http://drupal.org/project/token)，您应该能够看到哪些令牌可供您使用。

# .net - 有没有办法在另一个 .NET 项目中重用 XLAM 插件的功能？

> ID：11647820
> 
> 赞同：1
> 
> 时间：2012-07-25T10:33:38.693
> 
> 标签：.net, vba, dll, dry, code-reuse

我已经在 VBA 中为 Excel 开发了一个 XLAM 插件，并且正在构建另一个 .NET 项目。我需要用完全 XLAM 解决同样的问题，我不想重写这段代码（[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)）。

**有没有办法在另一个 .NET 项目中重用 XLAM 插件的功能？**

例如，之后我可以编译`xlam`并`dll`导入.NET 项目？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T15:18:09.660

达武兹，

将 XLAM 转换为 dll 的方法似乎并不容易获得。在某些情况下，有一些方法可以在不同的应用程序之间共享函数，例如编写可以由 Excel 和 VB.net 共享的 COM 函数。请参阅此 SO 问题，尤其是所涉及的评论以进行更深入的讨论：[XLAM / XLA Addins：有更好的方法吗？](https://stackoverflow.com/questions/5722020/xlam-xla-addins-is-there-a-better-way)

如果您想拥有具有多层功能或共享最大功能数量的插件 - 从而最大限度地减少重复编辑/写入 - 那么我会认为这是一个插件设计问题和一个编码问题. 此 MSDN 链接更清楚地说明了设计加载项：http: [//msdn.microsoft.com/en-us/library/bb384200.aspx](http://msdn.microsoft.com/en-us/library/bb384200.aspx)

因此，我认为您应该考虑如何设计您的插件以与 Windows 应用程序一起使用，然后选择一种可用于尽可能“桥接”首选应用程序之间转换的方法 - 例如上面提到的COM方法。

对于更直接的转换方法，只需将 VB 函数与 .NET 函数进行比较，并通过直接将它们与 .NET 对应项进行比较来重写这些部分——其中许多已被微软高度记录。这当然不是遵循 DRY 原则的完美方式，但它比从头开始要好 - 但我确信你已经知道这种方法。

祝你好运，

~乔尔

# postgresql - PostgreSQL 与子字符串比较不起作用

> ID：11647821
> 
> 赞同：1
> 
> 时间：2012-07-25T10:33:41.317
> 
> 标签：postgresql, select, substring, inner-join

我想从 2 个表中选择，其中 2nd id 与第一个 id 中的前 4 个字符相等

```
SELECT a.*, b.*, substring(a.my_id from 1 for 4)::integer as number
   FROM table1 as a
INNER Join table2 as b ON(b.id_2=number) where my_id = 101
                                 ^
It produces an error here        | 
```

错误：列“编号”不存在

SQL 状态：42703

人物：189

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:37:11.020

你不能使用这样的别名，你需要一个派生表：

```
select *
from (
   SELECT t1.*, 
          substring(t1.my_id::text from 1 for 4)::integer as number
   FROM table1 t1
) as a 
inner join table2 as b ON (b.id_2 = a.number) 
where my_id = 101 
```

将用作外键的数字作为 varchar 列的一部分存储是一个非常非常丑陋的设计。该数字应该是表 1 中自己的一列。

# sql-server - 在 SQL Server 2008 中使用条件更新行

> ID：11647824
> 
> 赞同：2
> 
> 时间：2012-07-25T10:33:59.243
> 
> 标签：sql-server, sql-server-2008

这是我的表结构：

```
CREATE table Credit(id integer, organisationid int, availableCredit int)

INSERT INTO Credit VALUES (1, 1, 1000)
INSERT INTO Credit VALUES (2, 1, 100)
INSERT INTO Credit VALUES (3, 2, 600)
INSERT INTO Credit VALUES (4, 2, 400) 
```

我必须减少可用的信用列值，我有 1050 的金额。我需要从组织 ID = 1 的信用表中减少 1050。这里的组织 ID 1 总共有 1100 个可用信用。条件是应该先更新第一个插入的信用行，然后再更新其余的（FIFO 模型），而且更新应该只发生在 organizationId = 1 的情况下。

我们如何使用单个或多个更新语句来更新它？

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:51:35.507

不幸的是，这在 T-SQL 中是一件相当麻烦的事情——你需要像循环（游标或`WHILE`语句）这样的东西。

有了这里的代码，我可以让它运行——它不漂亮，但它可以工作。

```
-- you want to reduce the total credits by this amount   
DECLARE @AmountToReduce INT = 1050

-- temporary variables    
DECLARE @ID INT, @AvailableCredit INT

-- get the first row from dbo.Credit that still has availableCredit - ordered by id
SELECT TOP 1 @ID = id, @AvailableCredit = availableCredit
FROM dbo.Credit
WHERE availableCredit > 0 AND organisationId = 1
ORDER BY id 

-- as long as we still have credit to reduce - loop..   
WHILE @AmountToReduce > 0 AND @ID IS NOT NULL
BEGIN
    -- if we need to remove the complete availableCredit - do this UPDATE
    IF @AmountToReduce > @AvailableCredit
    BEGIN
        UPDATE dbo.Credit
        SET availableCredit = 0
        WHERE id = @ID

        SET @AmountToReduce = @AmountToReduce - @AvailableCredit
    END
    ELSE BEGIN
            -- if the amount to reduce left is less than the availableCredit - do this UPDATE
        UPDATE dbo.Credit
        SET availableCredit = availableCredit - @AmountToReduce
        WHERE id = @ID

        SET @AmountToReduce = 0
    END

    -- set @ID to NULL to be able to detect that there's no more rows left
    SET @ID = NULL

    -- select the next "first" row with availableCredit > 0 to process    
    SELECT TOP 1 @ID = id, @AvailableCredit = availableCredit
    FROM dbo.Credit
    WHERE availableCredit > 0 AND organisationId = 1
    ORDER BY id 
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:40:46.853

此脚本将“Id 1”`availableCredit`减少 1000，并将“Id 2”`availableCredit`减少 50。

```
UPDATE Credit
SET availableCredit=(availableCredit-1000)
WHERE id=1

UPDATE Credit
SET availableCredit=(availableCredit-50)
WHERE id=2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T04:22:22.330

**以前我只给出了选择查询，这是完成该任务的最终 UPDATE 查询。**

```
DECLARE @balance int=1050

;WITH CTE as (
select id,organisationid,CASE when @balance>availableCredit then 0 else availableCredit-@balance end as availableCredit,
CASE when @balance>availableCredit then @balance-availableCredit else 0 end as balamt from Credit where id=1 and organisationid=1

union all

select t.id,t.organisationid,CASE when c.balamt>t.availableCredit then 0 else t.availableCredit-c.balamt end as availableCredit,
CASE when c.balamt>t.availableCredit then c.balamt-t.availableCredit else 0 end as balamt1 
from Credit t inner join CTE c on t.id-1=c.id --and t.organisationid=1

)

Update c SET c.availableCredit = ct.availableCredit
FROM Credit c inner join CTE ct
on c.id=ct.id

SELECT * FROM Credit 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T12:11:55.847

试试这个查询：

```
CREATE table Credit(id integer, organisationid int, availableCredit int)

INSERT INTO Credit VALUES (1, 1, 1000)
INSERT INTO Credit VALUES (2, 1, 100)
INSERT INTO Credit VALUES (3, 2, 600)
INSERT INTO Credit VALUES (4, 2, 400)

DECLARE @balance int=1050

;WITH CTE as (
select id,organisationid,CASE when @balance>availableCredit then 0 else availableCredit-@balance end as availableCredit,
CASE when @balance>availableCredit then @balance-availableCredit else 0 end as balamt from Credit where id=1 and organisationid=1

union all

select t.id,t.organisationid,CASE when c.balamt>t.availableCredit then 0 else t.availableCredit-c.balamt end as availableCredit,
CASE when c.balamt>t.availableCredit then c.balamt-t.availableCredit else 0 end as balamt1 
from Credit t inner join CTE c on t.id-1=c.id and t.organisationid=1

)
SELECT id,organisationid,availableCredit  FROM CTE 
```

# css - CSS 三栏布局流动性

> ID：11647825
> 
> 赞同：1
> 
> 时间：2012-07-25T10:34:02.177
> 
> 标签：css, html

我目前正在研究 CSS 三列布局（[http://jsfiddle.net/methuselah/rCtGd/](http://jsfiddle.net/methuselah/rCtGd/)），我想问几个问题：

**1）由于某种奇怪的原因，标题、 content-1、content 2-1、content-2-2**之间似乎有 10px 的间隙。这在 jsfiddle 中看不到，但是如果您在任何浏览器中加载代码，它就会很明显。我该如何摆脱它？

2）我想找出一种明确定义流体柱高度的方法。这可能吗？理想情况下，我希望所有 div**标题、内容 1、内容 2-1、内容 2-2、页脚**都拉伸以适应页面。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:42:11.500

### 回答您的有效问题！:P

1.  在 jsFiddle 上找不到 10px 的间隙，因为它们使用[**CSS Reset**](http://meyerweb.com/eric/tools/css/reset/)。重置样式表的目标是减少浏览器在默认行高、页边距和标题字体大小等方面的不一致。
2.  为了更好地了解**CSS 流体布局**，请参考以下链接：
    *   [完美的流体宽度布局](http://css-tricks.com/the-perfect-fluid-width-layout/)
    *   [2 列和 3 列流体 CSS 布局](http://www.vanseodesign.com/css/fluid-layout-code/)

你还有什么澄清吗？在评论中告诉我！:)

# php - 图像作为变量，然后使用 FPDF 和 PHP 将其插入

> ID：11647827
> 
> 赞同：1
> 
> 时间：2012-07-25T10:34:03.407
> 
> 标签：php, image, fpdf

所以，我是 fpdf 的新手。也许有人知道如何获取带有变量的图像，然后将其插入到单元格中。我的语法有问题。

```
$image1 = "../_resources/img/xstampa/stampa_18_grey.png";

$stampanumero = $letterposition[$position].$image1;
$p->Cell(7, 5, $stampanumero, 1,'L'); 
```

问题是 $image1 打印为文本 ../_resources/img/xstampa/stampa_18_grey.png。它不抓取图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T10:36:38.820

试试这个方法：所以创建图像

```
$p->Cell(7, 5,$p->Image('../_resources/img/xstampa/stampa_18_grey.png',10,10,-300), 1,'L'); 
```

# c# - 从数据库中获取数据并以 XML 形式返回

> ID：11647829
> 
> 赞同：1
> 
> 时间：2012-07-25T10:34:04.730
> 
> 标签：c#, asp.net, sql, xml, sqlconnection

我目前正在使用带有变量的存储过程从数据库中获取数据，但我是以 XML 格式返回结果。我可以使用此存储过程从表中获取所有数据，并以 XML 形式返回：

```
public string GetAllPatients()
        {
            string conn = @"Data Source=SNICKERS\SQLEXPRESS;Initial Catalog=VerveDatabase;Integrated Security=True";
            DataSet oDS = new DataSet();
            SqlDataAdapter oCMD = new SqlDataAdapter("getAll", conn);
            oCMD.Fill(oDS, "AllPatients");
            return oDS.GetXml();
        } 
```

但是，当我尝试获取个人患者记录并以 XML 格式返回时，我不确定如何，我目前正在这样做：

```
public void getUser(int ParticipantID)
        {

            SqlConnection oConn = new SqlConnection();
            oConn.ConnectionString = @"Data Source=SNICKERS\SQLEXPRESS;Initial Catalog=VerveDatabase;Integrated Security=True";
            oConn.Open();
            DataSet oDS = new DataSet();
            SqlCommand cmd = new SqlCommand();
            cmd.Connection = oConn;
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.CommandText = "getUser";
            cmd.Parameters.Add(new SqlParameter("@ParticipantID",SqlDbType.Int));
            cmd.Parameters["@ParticipantID"].Value = 1; 
            SqlDataReader dr = cmd.ExecuteReader(); 
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:37:10.723

要从 SQL Server 获取 XML，您的存储过程需要读取类似

```
 SELECT whatever
 FROM thetable
 WHERE ID = @participantID
 FOR XML AUTO 
```

这将生成一个 XML 结果，然后您可以使用

```
 var xmlResult = dr[0]; 
```

**编辑澄清**

将第二个过程的最后一行中的 datareader 替换为与第一个过程类似的代码

```
 SqlDataAdapter oCMD = new SqlDataAdapter(cmd); 
        oCMD.Fill(oDS, "User"); 
        return oDS.GetXml(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:53:15.720

使用`cmd.ExecuteXmlReader()`get `XmlReader`，然后使用其方法（例如`ReadOuterXml`）来获取 xml。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:43:54.987

要从存储过程返回自定义 xml，请使用 Path 方法。以下是来自 ADventure 作品数据库的示例：

```
select c.customerID as "@ID",
c.accountnumber as "@AccountNumber",
c.rowguid as "comment()",
CAST('<Test/>' as XML ) as "node()",
c.CustomerType as "AdditionalInfo/@type",
c.modifieddate as "AdditionalInfo/text()",
c.rowguid as "node()"
from Sales.Customer c
where c.CustomerID in ( 1,2)
for xml path('Customer'),root('Customers');

 output

<Customers>
<Customer ID="1" AccountNumber="AW00000001">
  <!--3F5AE95E-B87D-4AED-95B4-C3797AFCB74F-->
  <Test />
  <AdditionalInfo type="S">2004-10-13T11:15:07.263</AdditionalInfo>3F5AE95E-B87D-4AED-95B4-C3797AFCB74F</Customer>
<Customer ID="2" AccountNumber="AW00000002">
  <!--E552F657-A9AF-4A7D-A645-C429D6E02491-->
  <Test />
  <AdditionalInfo type="S">2004-10-13T11:15:07.263</AdditionalInfo>E552F657-A9AF-4A7D-A645-C429D6E02491</Customer>
 </Customers> 
```

要返回一个简单的 xml，请参阅 podiluska 的答案。

# algorithm - 长度>=N且总和>=S的值的子集

> ID：11647832
> 
> 赞同：2
> 
> 时间：2012-07-25T10:34:22.310
> 
> 标签：algorithm, dynamic-programming

给定一个值列表（例如 10、15、20、30、70）、值 N（例如 3）和 S（例如 100），找到满足的子集：

1.  子集长度 >= N
2.  子集的总和 >= S

子集的总和也应该是最小的（剩余值的总和应该是最大的）（例如结果子集应该是（10,20,70），而不是也满足 1 的（15,20,70）。和 2.)。

我正在研究一些问题和解决方案（背包问题、装箱问题……），但没有发现它们适用。由于某些原因，互联网上的类似问题也不适合（例如子集中的元素数量是固定的）。

有人可以指出我正确的方向吗？除了用尽所有可能的组合之外，还有其他解决方案吗？

编辑 - 我在 ruby​​ 代码中实现的工作算法，我想它可以进一步优化：

```
def find_subset_with_sum_and_length_threshold(vals, min_nr, min_sum)
    sum_map = {}
    vals.sort.each do |v|
      sum_map.keys.sort.each do |k|
        addends = sum_map[k] + [v]
        if (addends.length >= min_nr && k+v >= min_sum)
          return addends
        else
          sum_map[k+v] = addends
        end
      end
      sum_map[v] = [v] if sum_map[v].nil?
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:03:37.780

这与0-1背包问题没有太大区别。

```
Zero-initialize a matrix with S+U rows and N columns(U is the largest list value)
Zero-initialize a bit array A with S+U elements
For each value (v) in the list:
  For each j<S:
    If M[N-1,j] != 0 and M[N-1, j + v] == 0:
      M[N-1, j + v] = v
      A[j + v] = true
  For i=N-2 .. 0:
    For each j<S:
      If M[i,j] != 0 and M[i+1, j + v] == 0:
        M[i+1, j + v] = v
  M[0,v] = v
Find first nonzero element in M[N-1,S..S+U]
Reconstruct other elements of the subset by subtracting found value from its\
  index and using the result as index in preceding column of the matrix\
  (or in the last column, depending on the corresponding bit in 'A'). 
```

时间复杂度为 O(L*N*S)，其中 L 是列表的长度，N 和 S 有限制。

空间复杂度为 O(L*N)。

* * *

```
Zero-initialize an integer array A with S+U elements
i=0
For each value (v) in the list:
  For each j<S:
    If A[j] != 0 and A[j + v] < A[j] + 1:
      A[j + v] = A[j] + 1
      V[i,j + v] = v
      P[i,j + v] = I[j]
      I[j + v] = i
  If A[v] == 0:
    A[v] = 1
    I[v] = i
  ++i
Find first element in A[S..S+U] with value not less than N
Reconstruct elements of the subset using matrices V and P. 
```

时间复杂度为 O(L*S)，其中 L 是列表的长度，S 是给定的限制。

空间复杂度为 O(L*S)。

* * *

也最小化子集大小的算法：

```
Zero-initialize a boolean matrix with S+U rows and N columns\
  (U is the largest list value)
Zero-initialize an integer array A with S+U elements
i=0
For each value (v) in the list:
  For each j<S:
    If A[j] != 0 and (A[j + v] == 0) || (A[j + v] > A[j] + 1)):
      A[j + v] = A[j] + 1
      V[i,N-1,j + v] = v
      P[i,N-1,j + v] = (I[j,N-1],N-1)
      I[j+v,N-1] = i
  For k=N-2 .. 0:
    For each j<S:
      If M[k,j] and not M[k+1, j + v]:
        M[k+1, j + v] = true
        V[i,k+1,j + v] = v
        P[i,k+1,j + v] = (I[j,k],k)
        I[j+v,k+1] = i
  For each j<S:
    If M[N-1, j]:
      A[j] = N-1
  M[0,v] = true
  I[v,0] = i
  ++i
Find first nonzero element in A[N-1,S..S+U] (or the first element with smallest\
  value or any other element that suits both minimization criteria)
Reconstruct elements of the subset using matrices V and P. 
```

时间复杂度为 O(L*N*S)，其中 L 是列表的长度，N 和 S 有限制。

空间复杂度为 O(L*N*S)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:44:05.297

这是[子集和问题](http://en.wikipedia.org/wiki/Subset_sum_problem)的一个轻微变化。看节`Pseudo-polynomial time dynamic programming solution`。除了跟踪给定集合中的特定总和是否可能（即存储真/假）之外，您还需要存储长度以满足：

1.  子集长度 >= N

如果`sum of subset = S`那么它与上述问题完全相似。对于`sum of subset >= S`条件，我想您可以在构建 Wiki 页面中提到的数组时测试此条件。

# android - 每隔一段时间向android中的videoview播放器添加标记

> ID：11647834
> 
> 赞同：2
> 
> 时间：2012-07-25T10:34:25.777
> 
> 标签：android, android-videoview, marker

是否可以在视频查看进度条上定期向视频添加标记，以便视频可以在该点停止并开始另一个活动？例如，在视频播放 10 分钟时，我需要在 videoview 进度条中添加一个标记，当视频播放到 10 分钟时，视频停止并且其他活动开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:53:20.237

**是的，有可能**，（粗略的想法..）

确切的方法我不知道，但你可以做一个 Hack.. 通过使用方法

`public int getDuration()`和 `getCurrentPosition()`MedaiPlayer [类](http://developer.android.com/reference/android/media/MediaPlayer.html)。

**基本理念**，要做的是制作一个 ProgressBar（用于完整的视频持续时间），现在当您向其中添加标记时，只需获取该标记的持续时间（使用一些数学公式）。现在检查您的视频文件的当前位置，如果它是您的标记位置，则使用条件停止您的视频并开始一个新的活动..

（如果我错了，请告诉我）

# apache-poi - 导出到包含大量数据的excel

> ID：11647835
> 
> 赞同：3
> 
> 时间：2012-07-25T10:34:26.370
> 
> 标签：apache-poi

当我正在导出具有大量数据（例如：100 行）的 excel 时，我在打开工作表时遇到了警报。如果我们点击继续，它会在受保护的视图中打开。

当我们保存这个 excel 时，它会警告“无法保存在受保护的视图中”，如果我们继续保存，则样式和字体设置会在保存的 excel 表中更改。

我能做些什么来避免这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T09:06:41.233

```
 //u can call this style method before loops where we are creating cells
   HSSFCellStyle yellowStyle = getYellowColoreBasedOnNewField(workBook);     

  private HSSFCellStyle getYellowColoreBasedOnNewField(HSSFWorkbook workBook) {
    HSSFCellStyle style = workBook.createCellStyle();
    HSSFFont font = createAndSetFontStyle(workBook);
    setYellowColor(style, font);
    return style;
} 

    private HSSFFont createAndSetFontStyle(HSSFWorkbook wb) {
    HSSFFont font = wb.createFont();
    font.setFontName(XSSFFont.DEFAULT_FONT_NAME);
    font.setFontHeightInPoints((short)10);
    return font;
} 
```

# jquery - jQuery 到 ASMX webservice xml 传输

> ID：11647836
> 
> 赞同：1
> 
> 时间：2012-07-25T10:34:31.127
> 
> 标签：jquery, ajax, web-services

我需要一点帮助，我用谷歌搜索了几个小时，我开始有点绝望了。我需要使用方法创建asp.net asmx webservice，它将使用xml中的数据。我的问题是，我不知道如何配置 web 服务，`$.ajax()`有些人告诉我将 xml 编码为字符串并在服务器上对其进行解码，但这对我来说不是一个好的解决方案，因为 web 服务必须是通用的因为它是可能的。所以谁能给我一些简单的`$.ajax()`调用 asmx webservice 的例子，例如`<xml attr='test'>test</xml>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:40:32.847

在服务方面：

```
[WebMethod]
public void Foo(string xml)
{
    ... do something with the XML
} 
```

在客户端：

```
$.ajax({
    url: 'bar.asmx/foo',
    type: 'POST',
    contentType: 'application/json',
    data: JSON.stringify({ xml: '<xml attr="test">test</xml>' }),
    success: function(result) {
        alert('The XML was successfully sent to the web service');
    }
}); 
```

哦，顺便说一下，ASMX 是一种非常不推荐使用的技术。您应该考虑使用 WCF 或 Web API 在 .NET 上开发服务器端 Web 服务。

# ios - 如何制作通用应用程序，如果我错误地删除了 MainStoryboard_iPad

> ID：11647839
> 
> 赞同：1
> 
> 时间：2012-07-25T10:34:39.333
> 
> 标签：ios, ipad, storyboard, ios-universal-app

我首先将 iOS 应用程序设为通用，然后我删除了 MainStoryBoard_iPad，因为客户说所需的应用程序仅适用于 iphone 而不是 ipad。现在客户问我他想在 iPad 上运行相同的应用程序，屏幕右下角有 2x 按钮。现在，当我在 iPad 上运行时，它崩溃了。在 iPad 上顺利运行应用程序的可能解决方案是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:40:45.467

如果您的客户希望应用程序在带有 2x 按钮的 iPad 上运行，他们*不*想要通用应用程序；他们想要一个 iPhone 应用程序。

您可以在项目属性中执行此操作。将类型从“通用”切换到“iPhone”。您可能还想删除 Info.plist 中引用 iPad 版本的一些额外行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:40:13.950

1）即使你是唯一一个做开发的人，总是，**总是**使用源代码控制。

2）转到您的目标，**摘要**选项卡，将**Devices**更改为**Universal**，如果您想生成 iPad 文件，XCode 应该 - 然后修改新文件以满足您的需要。

# jmeter - JMeter：在一个文件中运行所有测试

> ID：11647843
> 
> 赞同：2
> 
> 时间：2012-07-25T10:35:05.790
> 
> 标签：jmeter, stress-testing

我有大约 4 个文件名为：

```
Test_1.csv
Test_2.csv
... 
```

每个测试文件中的每一行都具有以下格式：

```
method;request 
```

在哪里，`method`是我调用的 URL，`request`是我向它发出的请求。一切都配置为获取这些值并形成 URL。

但是，首先`Test_1.csv`必须运行，然后`Test_2.csv`必须运行等等。为此，我在以下层次结构中创建了 5 个线程组：

```
Test Plan
 |
 +- Step 1
     |
     +- HTTP request
     +- CSV Data Set Config <- Reads from Test_1.csv
     +- Uniform Random Timer
 +- Step 2
     |
     +- HTTP request
     +- CSV Data Set Config <- Reads from Test_2.csv
     +- Uniform Random Timer 
```

而且我还在`Run thread groups consecutively`我的测试计划中选择了该选项。每个线程组配置为 20 个线程。现在，我想要它做的是，第 1 步应该运行中的每个测试`Test_1.csv`，然后第 2 步应该执行并运行中的每一行`Test_2.csv`。但是，发生的情况是，第 1 步运行前 20 行`Test_1.csv`，然后第 2 步开始，运行 20 次测试并继续。然后，在完成所有步骤后，第 1 步再次运行并从`Test1.csv`. 我希望它只运行一次，遍历测试文件中的所有行，然后退出并将控制权交给下一个线程。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T23:16:21.607

jMeter Plugins 的[ParameterizedController](http://code.google.com/p/jmeter-plugins/wiki/ParameterizedController)可以帮助您调用部分测试计划，就像调用常规编程语言中的函数一样。更重要的是，您可以使用变量对这些调用进行参数化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:39:00.453

尝试使用以下架构：

```
测试计划
    线程组 #1
    *线程数：N*
        . . .
        而控制器
        *条件：${__javaScript("${request}"!="<EOF>",)}* - 直到 EOF
             CSV 数据集配置
            *文件名：[包含测试数据的文件的路径]* - Test_1.csv 在此case
            *变量名：method,request* 
            HTTP 请求
                统一随机定时器
            . . .           
    线程组 #2
        . . .
        [与 Test_2.csv 相同]
    线程组 #3
        . . .
        [与 Test_3.csv 相同]

```

# ms-access - Sharepoint 链接表索引

> ID：11647844
> 
> 赞同：2
> 
> 时间：2012-07-25T10:35:08.053
> 
> 标签：ms-access

我正在使用 MS Access 2010，并且我已经在数据库中创建了共享点链接表。

我想知道如何在这个链接表上创建索引。当我要设计链接表的视图并单击索引列时，无法在链接表中修改类似此属性的消息。

我实际上是在尝试在链接表之上运行一个查询，并且在执行分析性能然后获取在链接表的几个字段上创建索引的消息时返回结果需要很长时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T11:33:20.747

您当然可以创建和设置从带有链接表的 Access 到 SharePoint 的索引。

你这样做的方式是在表视图（不是设计视图）中显示链接表。然后在功能区中单击索引按钮。这是一个屏幕截图：

![在此处输入图像描述](../Images/d9149983ad2ea2ca84b9dad592cc3cbc.png)

当然，如果您想在 SharePoint 网站上调出表格并以这种方式添加索引，您也可以这样做。

请注意，您还可以使用此布局模式从 Access 向 SharePoint 表添加新列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:44:50.723

您不能在 MS Access 中的链接表上创建索引。您将需要在 sharepoint 中创建新索引或从链接表中导入数据并在其上创建索引。

# jquery - jQuery else 块

> ID：11647846
> 
> 赞同：0
> 
> 时间：2012-07-25T10:35:15.857
> 
> 标签：jquery

我的块有问题`else`。该`if`块运行良好 - 当 的值`#finish_day`小于时，和(select) 中`4`的选项值相同。`#get_car``#return_car`

我可以自动更改 in`#get_car`和 in的选项，`#return_car`并且只有一个处于活动状态（与 in 相同`#get_car`）。

不幸的是，当值`#finish_day`大于`4`（`else`块）时，我无法激活选项`#return_car`- 仍然只有一个选项处于活动状态并且休息被禁用。

这是我的代码：

```
if ( $("#finish_day").val() < 4 ) {
   $('#get_car, #return_car').not(this)
       .children('option[value=' + this.value + ']')
       .attr('selected', true)
       .siblings().attr('disabled', true);
} else {
      $('#get_car, #return_car').attr('selected', false);
} 
```

我不知道怎么了？我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:44:37.273

尝试以下操作：

```
 else {
     $('#get_car > option, #return_car > option').prop('disabled', false)
 } 
```

# variables - 使目标依赖于变量

> ID：11647859
> 
> 赞同：14
> 
> 时间：2012-07-25T10:36:04.090
> 
> 标签：variables, makefile

我希望（GNU）`make`在变量发生变化时重建。我怎样才能做到这一点？

例如，

```
$ make project
[...]
$ make project
make: `project' is up to date. 
```

......应该是这样，但我更喜欢

```
$ make project IMPORTANTVARIABLE=foobar
make: `project' is up to date. 
```

重建部分或全部`project`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-24T09:59:20.090

Make 并非旨在引用可变内容，但 Reinier 的方法向我们展示了解决方法。不幸的是，使用变量值作为文件名既不安全又容易出错。希望 Unix 工具可以帮助我们正确编码值。所以

```
IMPORTANTVARIABLE = a trouble

# GUARD is a function which calculates md5 sum for its
# argument variable name. Note, that both cut and md5sum are
# members of coreutils package so they should be available on
# nearly all systems.
GUARD = $(1)_GUARD_$(shell echo $($(1)) | md5sum | cut -d ' ' -f 1)

foo: bar $(call GUARD,IMPORTANTVARIABLE)
    @echo "Rebuilding foo with $(IMPORTANTVARIABLE)"
    @touch $@

$(call GUARD,IMPORTANTVARIABLE):
    rm -rf IMPORTANTVARIABLE*
    touch $@ 
```

在这里，您实际上将您的目标依赖于一个名为的特殊文件`$(NAME)_GUARD_$(VALUEMD5)`，该文件可以安全地引用并且与变量的值具有（几乎）一对一的对应关系。注意`call`和`shell`是 GNU Make 扩展。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-25T12:35:14.643

您可以使用空文件来记录变量的最后一个值，方法如下：

```
someTarget: IMPORTANTVARIABLE.$(IMPORTANTVARIABLE)
    @echo Remaking $@ because IMPORTANTVARIABLE has changed
    touch $@

IMPORTANTVARIABLE.$(IMPORTANTVARIABLE):
    @rm -f IMPORTANTVARIABLE.*
    touch $@ 
```

运行后`make`，目录中将有一个空文件，其名称以开头`IMPORTANTVARIABLE.`并附加了变量的值。这基本上包含有关变量的最后一个值是什么的信息`IMPORTANTVARIABLE`。

您可以使用这种方法添加更多变量，并使用模式规则使其更加复杂——但这个示例为您提供了它的要点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T11:50:41.343

您可能想要使用`ifdef`或`ifeq`取决于最终目标是什么。有关示例，请参见[此处](http://www.gnu.org/software/make/manual/html_node/Conditionals.html)的手册。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-15T18:49:13.743

[我可能会迟到答案，但这是使用Make 条件语法](https://www.gnu.org/software/make/manual/html_node/Conditional-Syntax.html)进行这种依赖的另一种方法（适用于 GNU Make 4.1、GNU bash、Bash on Ubuntu on Windows 版本 4.3.48(1)-release (x86_64-pc -linux-gnu)):

```
1 ifneq ($(shell cat config.sig 2>/dev/null),prefix $(CONFIG))
2 .PHONY: config.sig
3 config.sig:
4   @(echo 'prefix $(CONFIG)' >config.sig &)
5 endif 
```

在上面的示例中，我们`$(CONFIG)`通过在签名文件的记录值与变量的记录值不同的条件下生成的同名目标来跟踪变量，将其值写入签名文件`$(CONFIG)`。请注意第 1 行和第 4 行的*前缀*：当签名文件尚不存在时，需要区分大小写。

当然，消费者目标指定`config.sig`为先决条件。

# mysql - 存储一棵大树的数据库

> ID：11647863
> 
> 赞同：0
> 
> 时间：2012-07-25T10:36:20.723
> 
> 标签：mysql, database, file, tree

我需要解决的问题是将文件系统树的等价物存储到数据库中（以加快搜索操作）。树包含 +400.000.000 个 inode，对于每个 inode，我需要存储一些元信息（平均文件路径为 100 字节，元信息约为 50 字节）。

将在 C++ 程序中进行以下操作：
1\. SELECT（预期结果：~200.000）
2\. 一次插入 ~20.000 条记录
3\. 一次删除 ~20.000 条记录。

到目前为止，我只考虑了关系数据库：MySQL、MariaDB、PostgresSQL（到目前为止我还没有进行任何测试，我仍处于“信息收集”阶段）并且我阅读了一些关于在这样的数据库中存储树的文档。

**第一个选项**
- 邻接列表模型：表中的每个项目都包含一个指向其父项的指针。
[http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)

**第二个选项**
- 将所有目录存储在一个单独的表中
- 为其余文件创建一个单独的表，并带有指向它们所属目录的指针

所以表格看起来像这样：
DirTable:

```
/home  
/home/test/ 
```

文件表：

```
file1
file2 
```

我的问题：
1\. 你知道另一种适合在关系数据库中存储大树的模型吗？2\. 如果我要搜索 NoSQL DB，我应该从哪里开始？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:30:45.737

听起来您最好使用一种结构，该结构可以通过一次选择为您提供整个子树。有几种方法可以实现这一点，每种方法都有其优点和缺点：

*   在嵌套集中，您向表中添加两列：lft 和 rgt。节点的子树的 lft 和 rgt 值介于节点的 lft 和 rgt 值之间。该模型查询起来很简单，但对树的更改需要重写整个树的 lft 和 rgt 值，因此更新成本可能很高。
*   路径枚举将维护列中文件的绝对路径。该模型查询起来也很简单，但是您只能索引路径的固定长度前缀这一事实限制了可以有效搜索的树的深度。
*   对于闭包表，您将添加一个新表，对于系统上的每个目录，该表都包含子树中某处包含的文件的 ID。同样，查询起来很简单，但是闭包表可能会变得相当大，并且如果目录被移动，则必须更新。

此幻灯片通过图表和示例代码解释了这些模型：[http ://www.slideshare.net/billkarwin/models-for-hierarchical-data](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)

# ffmpeg - 使用 FFMPEG 将视频文件连续流式传输到 RTMP 服务器

> ID：11647868
> 
> 赞同：30
> 
> 时间：2012-07-25T10:36:30.943
> 
> 标签：ffmpeg, streaming, pipe, named-pipes, rtmp

`ffmpeg`将 RTMP 流处理为输入或输出，并且运行良好。

我想将一些视频（由 python 脚本管理的动态播放列表）流式传输到 RTMP 服务器，我目前正在做一些非常简单的事情：使用 FFMPEG 将我的视频一个一个地流式传输到 RTMP 服务器，但这会导致连接中断每次视频结束时，当下一个视频开始时，流就可以开始了。

我想在没有任何连接中断的情况下连续流式传输这些视频，然后可以正确查看流。

我使用此命令将我的视频一一流式传输到服务器

```
ffmpeg -re -y -i myvideo.mp4 -vcodec libx264 -b:v 600k -r 25 -s 640x360 \
-filter:v yadif -ab 64k -ac 1 -ar 44100 -f flv \
"rtmp://mystreamingserver/app/streamName" 
```

我在互联网上寻找了很多天的一些解决方法，我发现有些人在谈论使用命名管道作为输入`ffmpeg`，我已经尝试过它并没有很好地工作，因为`ffmpeg`它不仅在新的时候关闭 RTMP 流视频来了，但也会自行关闭。

有没有办法做到这一点？（将视频的动态播放列表流式传输`ffmpeg`到 RTMP 服务器而不会中断连接

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-03-14T14:57:24.670

**更新（因为我无法删除已接受的答案）：**正确的解决方案是实现一个自定义解复用器，类似于 concat 解复用器。目前没有其他干净的方法。你必须弄脏你的手和代码！

**下面是一个丑陋的黑客。这是一个非常糟糕的方法，只是不要！**

该解决方案使用**concat demuxer**并假设您的所有源媒体文件都使用相同的编解码器。该示例基于 MPEG-TS，但同样适用于 RTMP。

1.  使用以下格式为您的动态播放列表制作一个包含大量入口点列表的播放列表文件：

    `file 'item_1.ts' file 'item_2.ts' file 'item_3.ts' [...] file 'item_[ENOUGH_FOR_A_LIFETIME].ts'`

    这些文件只是占位符。

2.  制作一个脚本来跟踪您当前的播放列表索引并即时创建符号链接`current_index + 1`

    `ln -s /path/to/what/to/play/next.ts item_1.ts`

    `ln -s /path/to/what/to/play/next.ts item_2.ts`

    `ln -s /path/to/what/to/play/next.ts item_3.ts`

    `[...]`

3.  开始播放 `ffmpeg -f concat -i playlist.txt -c copy output -f mpegts udp://<ip>:<port>`

4.  被愤怒的系统管理员追赶并骂人

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-01T06:41:03.583

需要创建两个播放列表文件，并在每个文件的末尾指定一个指向另一个文件的链接。

**list_1.txt**

```
ffconcat version 1.0
file 'item_1.mp4'
file 'list_2.txt' 
```

**list_2.txt**

```
ffconcat version 1.0
file 'item_2.mp4'
file 'list_1.txt' 
```

现在您所需要的只是动态更改下一个播放列表文件的内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-02T10:42:58.593

您可以将循环通过管道传输到缓冲区，然后从该缓冲区传输到流实例。

在 shell 中，它看起来像：

```
#!/bin/bash

for i in *.mp4; do
        ffmpeg -hide_banner -nostats -i "$i" -c:v mpeg2video \
[proper settings] -f mpegts -
done | mbuffer -q -c -m 20000k | ffmpeg -hide_banner \ 
-nostats -re -fflags +igndts \ 
-thread_queue_size 512 -i pipe:0 -fflags +genpts \ 
[proper codec setting] -f flv rtmp://127.0.0.1/live/stream 
```

当然，您可以使用任何类型的循环，也可以循环播放列表。

*   我发现这`mpeg`更稳定一些，然后输入流为 x264。
*   我不知道为什么，但`mpeg`压缩的最少 2 个线程效果更好。
*   输入压缩需要比输出帧速率更快，所以我们得到足够快的新输入。
*   由于不连续的时间戳，我们必须跳过它们并在输出中生成一个新的。
*   缓冲区大小需要足够大，以便循环有足够的时间来获取新剪辑。

我在基于 python 的解决方案上工作，尚未完成，但除了一些警告之外，我的测试流运行了多天：

[ffplayout](https://github.com/jb-alvarado/ffplayout "ffplayout")

这使用`xml`播放列表格式。播放列表是动态的，您可以随时编辑当前播放列表，更改曲目或添加新曲目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-04T21:55:14.400

很晚的答案，但我最近遇到了与上面的海报完全相同的问题。

我通过使用 OBS 和 OBS websockets 插件解决了这个问题。

首先，像现在一样设置您的 RTMP 流媒体应用程序。但流到本地 RTMP 流。

然后让 OBS 将此 RTMP 流作为 VLC 源层加载，并以本地 RTMP 作为源。

然后（在您的应用程序中），使用 OBS websockets 插件，让您的 VLC 源在视频结束时切换到静态黑色视频或 PNG 文件。然后在下一个视频开始后切换回 RTMP 流。这将防止 RTMP 流在视频结束时停止。OBS 在短暂的过渡期间会变黑，但最终的 OBS RTMP 输出将永远不会停止。

确实有一种方法可以通过手动设置一个中间 RTMP 服务器来推送到最终的 RTMP 服务器，但我发现使用 OBS 更容易，而且开销很小。

我希望这对其他人有所帮助，这个解决方案对我来说非常有效。

# c# - 以编程方式将现有项目添加到新的 VS2012 解决方案中失败

> ID：11647869
> 
> 赞同：2
> 
> 时间：2012-07-25T10:36:32.407
> 
> 标签：c#, visual-studio-2012, envdte

我们在向导中有以下代码，可将现有项目添加到新解决方案中：

```
//generating files
if (dte.Solution.Projects.Count < 1) // Solution is empty or doesn't exist
{
    dte.Solution.Create(oneFolderHigher(Params.OutputDir, solutionName),
                        solutionFileName(solutionName));
}

// adding created project to solution
dte.Solution.AddFromFile(Path.Combine(Params.ProjectRootFolder, 
                                      Params.ProjectName + ".csproj")); 
```

它在 MS Visual Studio 2010 下运行良好，但在 2012 下失败（我尝试了第二个参数）：

> System.Runtime.InteropServices.COMException (0x80004004)：Wizard.Generator.NewProjectGenerator.Generate(Action`1 logMessage) 的 EnvDTE.SolutionClass.AddFromFile(String FileName, Boolean Exclusive) 中的操作中止（HRESULT 异常：0x80004004 (E_ABORT)）在 Wizard.Forms.WizardForm.Finish()

在此错误之后，我手动将新项目添加到解决方案中，一切正常。但我们不能只说“对不起，我们无法为您添加新生成的项目，请您自行添加。”

MSDN 建议：

> 如果您想在执行期间禁止其 UI，您可以使用 LaunchWizard 方法而不是 AddFromFile 来执行向导。LaunchWizard 有一个允许您禁用 UI 的参数。

但是这种方法需要一些向导文件，所以不能解决。

有人可以帮忙吗？向导从“新建 -> 项目”菜单运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:11:36.863

这是该问题的解决方法（由我的老板提出）：

```
Before adding the project to solution, project file should be converted to
VS2012 format. 
```

但是代码有点难看：

```
using (StreamReader sr = new StreamReader(newFile))
using (StreamWriter sw = new StreamWriter(projectFile, false, Encoding.UTF8))
{
     while (sr.Peek() >= 0)
     {
         string s = sr.ReadLine();
         if (s.Contains("<Project ToolsVersion=\"4.0\""))
         {
              s = s + Environment.NewLine + importProject;
         }
... and so on 
```

也许有人知道如何做到这一点真棒？我的意思是转换。我会让这个问题在一段时间内无人回答。静候你的评价。

# tsql - 在 PowerShell 中为连接/数据问题捕获不同的 sqlcmd 退出代码

> ID：11647870
> 
> 赞同：2
> 
> 时间：2012-07-25T10:36:32.797
> 
> 标签：tsql, powershell, error-handling, sqlcmd, exit-code

我从 PowerShell 调用 sqlcmd 来执行 T-SQL 脚本。目前，如果使用的数据违反约束等导致错误，我正在使用“：On Error exit”退出脚本。这由PowerShell检测$SqlcmdProcess.ExitCode 1来处理。

但是，如果数据库存在连接问题，sqlcmd 也会给出 1 的 ExitCode。有没有办法将 :On Error ExitCode 设置为 1 以外的值？我知道使用类似 :Exit(SELECT 2) 的东西来执行此操作，但我宁愿仍然使用 :On Error 这样我就不必重写脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:15:38.843

您可以在 Powershell 中使用 exit 关键字。这是一个例子

创建一个名为 sqlcmdexit.ps1 的脚本，其内容如下：

```
$result = sqlcmd -S"missing" -d master -Q "select @@servername"
if ($result[1] -like "*Error Locating Server/Instance Specified*" -or $result[1] -like "*Could not open a connection to SQL Server*") {
    exit 99
} 
```

调用脚本并观察现有代码：

```
C:\Users\Public\bin>.\sqlcmdExit.ps1
Sqlcmd: Error: Microsoft SQL Server Native Client 10.0 : A network-related or instance-specific error has occurred while
 establishing a connection to SQL Server. Server is not found or not accessible. Check if instance name is correct and i
f SQL Server is configured to allow remote connections. For more information see SQL Server Books Online..
Sqlcmd: Error: Microsoft SQL Server Native Client 10.0 : Login timeout expired.

C:\Users\Public\bin>$LASTEXITCODE
99 
```

我不知道有什么方法可以设置默认的 ExitCode。使用 start-process 你可以做类似的事情：

```
$tempFile = [io.path]::GetTempFileName()
$exitCode = (Start-Process -FilePath "sqlcmd.exe" -ArgumentList @"
-S"missing" -d master -Q "select @@servername"
"@ -Wait -NoNewWindow -RedirectStandardOutput $tempFile -Passthru).ExitCode

if ($exitCode -eq 1) {
    $result = get-content $tempfile
    if ($result[1] -like "*Error Locating Server/Instance Specified*" -or $result[1] -like "*Could not open a connection to SQL Server*") {
        remove-item $tempFile
        Exit 99
    }
}
else {
    remove-item $tempfile
    Exit $exitCode
} 
```

# gwt - 在我按下 Delete 键之前如何获取最后一个文本框值？

> ID：11647871
> 
> 赞同：1
> 
> 时间：2012-07-25T10:36:37.633
> 
> 标签：gwt

```
 itemBox.addKeyUpHandler( new KeyUpHandler()
        {
            public void onKeyUp( KeyUpEvent event )
            {
                String currentValue = itemBox.getValue().trim();
                // handle backspace
                if( event.getNativeKeyCode() == KeyCodes.KEY_BACKSPACE )
                {
                    if( "".equals( currentValue ) )
                    {
                        doTheJob( );
                    }
                }
            }
        } ); 
```

预期行为：当文本框为空时，我点击删除，将运行 doTheJob();

当前行为：当有一个字符时，我点击删除，它会触发 doTheJob();

换句话说，在我点击删除键之前有什么方法可以获取文本框内容？我尝试使用 var 来保存最后一个值，但它需要注册另一个侦听器并且 impl 不是那么有效。

感谢您的输入。

////////////////////编辑 //////////////////////

使用 KeyDownHandler 确实解决了上述问题，但导致另一个问题：我使用 itemBox.setValue(""); 清除文本框，但它总是有一个逗号。

```
 itemBox.addKeyDownHandler( new KeyDownHandler()
        {
            public void onKeyDown( KeyDownEvent event )
            {
                // handle backspace
                if( event.getNativeKeyCode() == KeyCodes.KEY_BACKSPACE )
                {
                    String currentValue = itemBox.getValue().trim();
                    if( "".equals( currentValue ) )
                    {
                       doTheJob();
                    }
                }
                // handle comma
                else if( event.getNativeKeyCode() == 188 )
                {
                     doOtherJob();
                    //clear TextBox for new input
                     itemBox.setValue( "" );
                     itemBox.setFocus( setFocus );
                }
            }
        } ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:45:03.110

后

```
itemBox.setFocus( setFocus ); 
```

防止事件冒泡

```
event.preventDefault();
event.stopPropagation(); 
```

因此，在将逗号添加到文本框内容之前，该事件将被取消。

# spring - 一页显示数据表和提交表单 Struts

> ID：11647876
> 
> 赞同：0
> 
> 时间：2012-07-25T10:36:54.217
> 
> 标签：spring, jsp, error-handling, struts

我是 Struts 的新手，目前我正在使用 struts 1.3 来构建简单的联系人应用程序

我想显示包含来自数据库的联系人列表的数据表，在同一页面中我想创建一个用于创建新联系人的表单，然后将其插入数据库。

我正在使用 Spring bean 和 hibernate 来做数据库操作和逻辑。所以这是我的流程，我的action类会调用spring bean，spring bean会调用dao类进行数据库操作做一些逻辑，然后我的action类会将列表放入名为contactList的请求对象中，然后在jsp文件中使用 logicLiterate 标记对其进行迭代。

显示表格并提交一切正常，但是当我在 ActionForm 中进行验证时，我想显示错误消息，出现错误 500。这是因为 jsp 在请求对象中找不到名为contactList 的属性，因为如果有是 ActionForm 类中的错误，Struts 没有在我的 Action 类中调用该方法，该方法将读取数据库并将其放入请求对象中。我可以尝试在我的 ActionForm 中调用 spring bean，但我担心它不合适，因为如果没有错误，那么我会为相同的工作调用 spring bean 两次。你建议我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:25:57.600

我不好不仔细阅读文档，现在我明白 struts-config.xml 中的操作标记具有“输入”属性，该属性指定如果出现错误必须将请求转发到的物理页面。

在我的例子中，我只需要将输入属性指定为当前路径（例如 /contacts.do 等），以便 Action 类可以执行其 Action 方法。

请注意，此请求是转发请求，而不是重定向。

# magento - Magento - 本地购物车控制器不工作

> ID：11647877
> 
> 赞同：1
> 
> 时间：2012-07-25T10:36:59.583
> 
> 标签：magento

我正在尝试覆盖购物车控制器中的 Magento 中的 couponPostAction 函数。

我创建了一个新的本地模块 Nf_Ajaxcoupon。

这是配置文件

```
<?xml version="1.0"?>
<config>
    <modules>
        <Nf_Ajaxcoupon>
            <version>0.1.0</version>
        </Nf_Ajaxcoupon>
    </modules>
    <global>

        <rewrite>

            <Nf_Ajaxcoupon_checkout_cart>
                <from><![CDATA[#^/checkout/cart/#]]></from>

                <to>/Ajaxcoupon/checkout_cart/</to>
            </Nf_Ajaxcoupon_checkout_cart>
       </rewrite>
    </global>

    <frontend>
        <routers>
            <Nf_Ajaxcoupon>

                <use>standard</use>

                <args>

                    <module>Nf_Ajaxcoupon</module>

                    <frontName>Ajaxcoupon</frontName>

                </args>

            </Nf_Ajaxcoupon>

        </routers>

    </frontend>

</config> 
```

这是我的模块激活：

```
<?xml version="1.0"?>
<config>
    <modules>
        <Nf_All>
            <active>true</active>
            <codePool>local</codePool>
        </Nf_All>
    </modules>
</config> 
```

这是我的 CartController.php 文件：

```
<?php

require_once 'Mage/Checkout/controllers/CartController.php';

class Nf_Ajaxcoupon_Checkout_CartController extends Mage_Checkout_CartController

  {

   function couponPostAction()
    {
    var_dump($_POST);
      die('local');

    }
  }

?> 
```

我不明白为什么它不调用本地控制器，当我转到系统->配置->高级时，我看到它已启用。

有什么建议为什么它不起作用或调试它的方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:34:10.590

这是在前端节点的配置中覆盖控制器的正确方法

```
<routers>
    <checkout>
        <args>
            <modules>
                <Nf_Ajaxcoupon before="Mage_Checkout">Nf_Ajaxcoupon_Checkout</Nf_Ajaxcoupon>
            </modules>
        </args>
    </checkout>
</routers> 
```

您还确定您的配置文件不需要用于 Nf_Ajaxcoupon 而不是 Nf_All

```
<?xml version="1.0"?>
<config>
    <modules>
        <Nf_Ajaxcoupon>
            <active>true</active>
            <codePool>local</codePool>
        </Nf_Ajaxcoupon>
    </modules>
</config> 
```

# php - 根据一组标准匹配人员

> ID：11647884
> 
> 赞同：1
> 
> 时间：2012-07-25T10:37:33.980
> 
> 标签：php, mysql, algorithm, matching

我正在创建一个 facebook 应用程序，它根据一组标准匹配人们，我认为查询数据库以搜索完全符合标准的人非常容易，但想知道网站通常如何生成不匹配的结果t 完全符合标准。

我在想一个类似计数系统的东西，我查看第一个参数并找到所有匹配的人并为他们的 id 增加一个计数器，然后查看第二个并为所有匹配的人增加一个计数器等。然后只显示计数器最高的案例的结果。这样做的问题是某些标准可能比其他标准更重要，我想这可以通过给予它们更高的权重来解决，即通过更高的值递增计数器。

所以我的问题是：

1.  网站通常如何做到这一点，是否有任何标准的 php 食谱？
2.  我建议的算法可行吗？
3.  这个一般区域叫什么？（我不知道我应该在谷歌搜索什么......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:42:10.073

我认为搜索词在您的问题中:-) 我会推荐这种方法：

将此视为一个图表，其中“N”个人中的每个人都与其他所有人相连。
根据您的应用程序为边缘分配权重。

然后尝试在[二分图](http://en.wikipedia.org/wiki/Bipartite_graph)中找到最大匹配。
这是一个众所周知的问题。尝试搜索网络流+二分图。

# c# - 在C#中将RadioButton控件转换为复选框控件

> ID：11647888
> 
> 赞同：0
> 
> 时间：2012-07-25T10:37:50.873
> 
> 标签：c#, winforms

我们的链接按钮中有一个菜单条。我添加了一个项目，其中包含单选按钮和复选框的子项目。如果用户在表单上选择了一个单选按钮，并且在菜单条中选择了一个复选框项目，那么它应该转换为复选框控件，包括其所有属性，即前景色、背景色字体大小、字体样式等。

那么，您能否帮助我在表单运行时将单选按钮控件转换为复选框控件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:53:22.030

RadioButton控件无法转换为[Checkbox控件，因为](http://www.google.es/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFUQFjAA&url=http://msdn.microsoft.com/es-es/library/system.windows.forms.checkbox.aspx&ei=jdAPUJDFEOTs0gWp8YB4&usg=AFQjCNGFYD-Nns3NbZ95Ud7q-eenA-SvRw)[它们](http://www.google.es/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFwQFjAA&url=http://msdn.microsoft.com/es-es/library/system.windows.forms.radiobutton%28v=vs.80%29.aspx&ei=pNAPUOPnGYKe0QX8_YGwBg&usg=AFQjCNGBVFlAZeFiH189af7wAx9JoT3i9w)不在继承层次结构中。

但是，如果您需要这样做，您可以创建一个[Checkbox](http://www.google.es/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFUQFjAA&url=http://msdn.microsoft.com/es-es/library/system.windows.forms.checkbox.aspx&ei=jdAPUJDFEOTs0gWp8YB4&usg=AFQjCNGFYD-Nns3NbZ95Ud7q-eenA-SvRw)控件，复制当时常用的属性，并且您需要重用，然后切换它们的可见性：

```
 private CheckBox GetCheckboxFromRadioButton(RadioButton radioButton)
    {
        CheckBox result = new CheckBox();
        //copy text
        result.Text = radioButton.Text;
        //copy colors
        result.BackColor = radioButton.BackColor;
        result.ForeColor = radioButton.ForeColor;
        //copy checked state
        result.Checked = radioButton.Checked;
        //copy parent container
        result.Parent = radioButton.Parent;
        //copy size and location
        result.Bounds = radioButton.Bounds;
        //copy layout behavior
        result.Dock = radioButton.Dock;
        result.Anchor = radioButton.Anchor;
        //enabled property
        result.enabled = radioButton.Enabled;
        // copy other properies you need here
        //...
        return result;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:57:04.207

您可以创建自己的功能

```
CheckBox ConvertControl(RadioButton rb) 
```

并使用您需要的每个属性初始化来实现 Checkbox 创建。由于控件不同，它们具有一些无法自动转换的特定属性——您应该明确它们应该如何被显式初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-18T00:58:29.800

您可以使用此代码

```
 private void RadioButton1_Click(object sender, EventArgs e)
    {
        RadioButton1.Checked = !(bool)RadioButton1.Tag ;
    }

    private void RadioButton1_MouseDown(object sender, MouseEventArgs e)
    {
        RadioButton1.Tag = RadioButton1.Checked;
    } 
```

# java - 对地图进行排序 根据值降序排列

> ID：11647889
> 
> 赞同：36
> 
> 时间：2012-07-25T10:37:54.107
> 
> 标签：java, map, hashmap

> **可能重复：**
> [如何对 Java 中的值对 Map<Key, Value> 进行排序？](https://stackoverflow.com/questions/109383/how-to-sort-a-mapkey-value-on-the-values-in-java)

我正在使用映射接口从文件中读取，然后将其中的值存储为键值对。文件格式如下

```
 A 34
 B 25
 c 50 
```

我将从该文件中读取数据并将其存储为键值对，然后将其显示给用户。我的要求是以这种格式显示结果

```
C 50
A 34
B 25 
```

因此，我需要按值的降序对地图进行排序。这样我就可以将这些显示为我的结果..我已经阅读了这个并找到了下面的代码

```
static <K,V extends Comparable<? super V>> SortedSet<Map.Entry<K,V>> entriesSortedByValues(Map<K,V> map) {
        SortedSet<Map.Entry<K,V>> sortedEntries = new TreeSet<Map.Entry<K,V>>(
            new Comparator<Map.Entry<K,V>>() {
                @Override public int compare(Map.Entry<K,V> e1, Map.Entry<K,V> e2) {
                    int res = e1.getValue().compareTo(e2.getValue());
                    return res != 0 ? res : 1; // Special fix to preserve items with equal values
                }
            }
        );
        sortedEntries.addAll(map.entrySet());
        return sortedEntries;
    } 
```

我希望这会按升序对值进行排序，我只想知道这种方法是否正确或其他一些有效的方法对我有帮助吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-25T10:52:36.407

由于您可以有重复的值，因此您根本不应该使用 a `Set`。改为 a`List`并对其进行排序。你`entriesSortedByValues`会看起来像这样：

```
static <K,V extends Comparable<? super V>> 
            List<Entry<K, V>> entriesSortedByValues(Map<K,V> map) {

    List<Entry<K,V>> sortedEntries = new ArrayList<Entry<K,V>>(map.entrySet());

    Collections.sort(sortedEntries, 
            new Comparator<Entry<K,V>>() {
                @Override
                public int compare(Entry<K,V> e1, Entry<K,V> e2) {
                    return e2.getValue().compareTo(e1.getValue());
                }
            }
    );

    return sortedEntries;
} 
```

*注意：在您的示例输出中，值是递减的。如果您希望它们上升，请`e1.getValue().compareTo(e2.getValue())`改用。*

* * *

## 例子：

```
public static void main(String args[]) {

    Map<String, Integer> map = new HashMap<String, Integer>();
    map.put("A", 34);
    map.put("B", 25);
    map.put("C", 50);
    map.put("D", 50); // "duplicate" value

    System.out.println(entriesSortedByValues(map));
} 
```

输出：

```
[D=50, C=50, A=34, B=25] 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-25T10:55:17.697

编写自己的`comparator`并将其传递给`TreeMap`

```
class MyComparator implements Comparator {

Map map;

public MyComparator(Map map) {
    this.map = map;
}

public int compare(Object o1, Object o2) {

    return ((Integer) map.get(o2)).compareTo((Integer) map.get(o1));

}
} 
```

在测试班

```
Map<String, Integer> lMap=new HashMap<String, Integer>();
    lMap.put("A", 35);
    lMap.put("B", 25);
    lMap.put("C", 50);

    MyComparator comp=new MyComparator(lMap);

    Map<String,Integer> newMap = new TreeMap(comp);
    newMap.putAll(lMap); 
```

**输出：**

```
C=50
A=35
B=25 
```

# sql - 数据库模型 - SQL - 最佳方法

> ID：11647895
> 
> 赞同：2
> 
> 时间：2012-07-25T10:38:23.220
> 
> 标签：sql, database, database-design

我正在寻求有关部分数据库设计的帮助。

我必须为一组联系人和一组分发列表建模数据库。

每个联系人可以在多个分发列表中，并且每个分发列表可以有多个联系人。在一个普通的实例中，我可以使用一个 Junction 表来实现这个解决方案。

但还有一件事要补充。联系人可以选择通过两种不同的方法接收通知，即短信或电子邮件。

联系人可以请求通过一种或两种方法发送通知。

我遇到的问题是联系人可能希望根据特定的分发列表接收不同的通知。

所以我们有一个这样的问题:--

```
CONTACT A is in DL-A - Receives Notification via SMS 
CONTACT A is in DL-B - Recieves Notification via Email & SMS. 
```

我试图避免在我的联系人表中有多个联系人条目，每个联系人都应该是唯一的。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T10:40:18.600

您可以使用另一个联结表：

```
contactid, distributionlistid, messagepreference 
```

Messagepreference 可以是电子邮件或 SMS。如果他们都想要两行。无需更改数据库即可添加新的消息类型。为了安全起见，请在代码中使用常量来表示您将放入列中的值。

或者，将**sendemail**和**sendms**列添加到原始联结表，但这样做的缺点是如果引入新的消息传递类型，则必须更改 DB 结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T10:42:04.240

因此，您可以添加到联结表中的字段：

```
ContactsDistributions(ContactId, DistributionId, SMSFlag, EmailFlag) 
```

为了指定联系人为每个分发选择的通知类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T10:41:58.250

您可以在联结表中再添加一个字段，该字段将表示给定联系人将如何从给定分发列表接收通知。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T10:43:56.610

在这种情况下，我会在联结表 SMS 和 email 中添加两个字段，这两个字段都是布尔值，并且当且仅当他们希望收到有关此事的通知时才设置为 true。这允许为组合列表和联系人设置不同的通知。

另外，根据您希望如何处理从列表中删除的问题，您可以在联结表上添加一个约束，以便两个字段中的至少一个为真，以便始终发送通知，尽管在谷歌群组中说我确实可以访问一些我选择不从中获取通知的列表。

# c++ - 如果没有另外说明，可以假设 get-method 是线程安全的吗？

> ID：11647896
> 
> 赞同：3
> 
> 时间：2012-07-25T10:38:23.217
> 
> 标签：c++, thread-safety, getmethod

如果方法文档中没有另外说明，通常可以假设 get 方法的线程安全吗？还是反过来说，如果没有另外说明，就永远不应该假设线程安全？你怎么看？

**编辑**：

假设一个班级

```
class InfoClass {
  public:
    void Init();
    int  GetInfo();
    void Free();
}; 
```

在线程操作结束后从线程上下文调用`Init()`一次。`GetInfo()``Free()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T10:40:46.160

我认为您应该假设该方法是`not thread-safe`如果没有另外说明的话。

实际上，我看不出有任何理由假设一种方法是`thread-safe`默认的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T10:41:08.697

线程安全**总是**需要额外的工作，所以你唯一可以安全地假设是相反的——在没有直接支持的情况下，**不**支持线程安全。

解释：

假设您有`get`一个简单的 64 位 ter，`long long`并且在 32 位架构上运行。当计算机正在获取该长 64 位值的后半部分（刚刚完成前半部分）时，另一个线程更新了后半部分，现在您所拥有的是不一致 - 因此它不是线程安全的。

**编辑**（以匹配问题中的编辑）：

（旁注 - 您展示课程的方式使其无法使用，因为所有成员都是私人的）

如果您没有**任何**访问方法可以在构建类后更改其状态，那么您*可以*假设线程安全。但这仍然是一个草率的斜坡，因为稍后不了解您的假设的人可能会`set`在课程中增加一个 ter 并在随机错误调试体验中拥有一段美妙的旅程；）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T10:42:58.123

get 方法可以是线程安全的，但也不一定。如果有类：

```
class A {
    int value;

    int getValue() {
        return value;
    }

    void processValue() {
        value += 2;
        value = value*2;
    }
} 
```

在上面的代码中，`getValue`显然不是线程安全的，因为当另一个线程在第二行时可能会调用它`processValue`，因此变量`value`处于不一致状态。所以，这里的 getter 是可重入的（同样，这可能不是这样），但仍然不是线程安全的。

正如其他人在此线程上提到的，除非指定，否则假定它不是线程安全的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T10:41:55.643

`set`如果在调用方法时使用方法更新变量`get`，结果将是垃圾。因此，除非指定，否则不能假定线程安全。

# asp.net-mvc - MVC3 中的 b/w @Html.DropDownList 和 @Html.DropDownListFor 有什么区别

> ID：11647906
> 
> 赞同：0
> 
> 时间：2012-07-25T10:39:33.977
> 
> 标签：asp.net-mvc, razor

`@Html.DropDownList`MVC3和MVC3有什么区别`@Html.DropDownListFor`？

我所知道的`@Html.DropDownList`是用于渲染`dropdownList`a`List`和`@Html.DropDownListFor`a `Model`。

我不确定这是否正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:43:03.750

`DropDownList`绑定到您传入的任意值并生成`input`以您传入的参数命名的值。

`DropDownListFor`绑定到模型中的属性（由传入的表达式定义）并`input`根据定义的模型绑定条件生成以该属性命名。

# mysql - 每个类别的php-sql限制查询

> ID：11647913
> 
> 赞同：1
> 
> 时间：2012-07-25T10:39:59.640
> 
> 标签：mysql, limit, categories

我想限制每个类别的查询，我在这里看到了很多相同的主题，但太复杂了，所以我会问另一个。

例如我有

```
id       title        category
1        one          number
2        two          number
3        three        number  
4        four         number
5        a            letter
6        b            letter
7        c            letter 
```

我想限制我的查询，假设每个类别有 2 个，所以我的输出如下

```
one
two

a
b 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:39:06.387

我从 diff 主题中得到了答案，我会在这里发布给其他会遇到同样问题的人

```
SELECT * FROM (
    SELECT
       table.*,
       @rn := CASE WHEN @category=category THEN @rn + 1 ELSE 1 END AS rn,
       @category := category
    FROM table, (SELECT @rn := 0, @category := NULL) AS vars        
    ORDER BY category
) AS T1
WHERE rn <= 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:07:30.350

使用[此链接](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)创建，那里有解释。这也适用于大量类别，但请注意，如果没有定义正确的键，它可能会变得*非常*慢。

```
set @num := 0, @category := '';

select title, category, @num := if(@category = category, @num +1, 1) as row_number,
@category := category as dummy

from test
group by category, title
having row_number <=2; 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-25T10:44:59.970

告诉我我是否正确 -
那是 sql -

```
SELECT * FROM `categories` ORDER BY `id` ASC LIMIT 0,2 
```

我所做的是：选择类别表中的所有项目并按 id 行对其进行排序，仅将其限制为两个结果并从开始排序

# python - OpenERP模块google_earth地址字段

> ID：11647914
> 
> 赞同：0
> 
> 时间：2012-07-25T10:40:09.967
> 
> 标签：python, openerp

我想使用 openerp google_earth 模块。我成功安装并生成了包含合作伙伴信息的 kml 文件。我想将所有合作伙伴放在谷歌地图上以查看他们在地图上的位置，但问题是由于某种原因，kml 文件仅从 openerp 数据库（res.partners 对象）获取国家和城市。

由于某种原因，字段街道没有被添加到字段地址（出现在 kml 文件中的地址）中，因为它应该是这样的：

```
address=city+country+street 
```

但它是这样的：

```
address=city+country 
```

我什至尝试像这样修改 google_earth.py 文件（我添加了在 res_partner 类中生成地址字段的街道字段）：

```
if add.street:
    address += ',  '
    address += tools.ustr(add.street) 
```

但什么都没有改变。那么是否有可能让它也添加街道字段？因为没有它，这样的模块真的没用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:13:20.457

你把地址放在国家后面吗？Google 可能希望地址出现在城市和国家/地区之前。[firebug](https://stackoverflow.com/a/11648599/4794)链接到的代码将地址放在首位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:23:35.723

在 Google_map 模块中可以找到类似的代码，这将帮助您如何在地图上使用整个地址搜索。检查[这个网址](http://bazaar.launchpad.net/~openerp/openobject-addons/6.0/view/head:/google_map/wizard/google_map_launch.py#L28)

# magento - 在 magento 的管理面板中无法编辑任何内容

> ID：11647921
> 
> 赞同：0
> 
> 时间：2012-07-25T10:40:25.583
> 
> 标签：magento

我无法在管理面板中编辑任何内容。

我有magento网站，点击后我登录了管理面板

cms->page 然后列出的页面，但我无法编辑页面。

当我单击页面菜单时，它会在火灾错误中显示错误：

```
TypeError: hash.__properties is undefined
[Break On This Error]   

if (current.length == hash.__properties.length)

33027d...e309.js (line 8281)

TypeError: Fieldset is undefined
[Break On This Error]   

Fieldset.addToPrefix(1);

/bc/in...3a06aa/ (line 41)

TypeError: Translate is not a constructor
[Break On This Error]   

...ease use only letters (a-z or A-Z), numbers (0-9) or underscore(_) in this field...

/bc/in...3a06aa/ (line 44)

ReferenceError: Calendar is not defined
[Break On This Error]   

...= ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]; // f...

/bc/in...3a06aa/ (line 49)

ReferenceError: Calendar is not defined
[Break On This Error]   

Calendar.setup({

/bc/in...3a06aa/ (line 539)

ReferenceError: Calendar is not defined
[Break On This Error]   

Calendar.setup({

/bc/in...3a06aa/ (line 565)

TypeError: varienGrid is not a constructor
[Break On This Error]   

...d', 'http://localhost/bc/index.php/admin/cms_page/index/key/0681afc112b37ec174e8... 
```

并且没有什么可以正确加载显示错误中的错误。

并且无法在管理面板中编辑任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:29:29.580

因此，请验证您的 javascript 文件是否包含在内：查看源代码并查看它们是否可以直接访问。如果您输入错误的 nonsecure_base_url 有时可能会发生

# ipad - iOS：使用 Instruments 检测字典中的 nil 值插入

> ID：11647936
> 
> 赞同：1
> 
> 时间：2012-07-25T10:41:06.473
> 
> 标签：ipad, nsdictionary, instruments, ios5.1

我正在尝试使用 Instruments 来检测以下错误。有人可以告诉我是否可以使用 Instruments 获取导致此异常的行。谢谢。

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFDictionary setObject:forKey:]: attempt to insert nil value (key: username)' 
```

# java - 获取电话号码

> ID：11647941
> 
> 赞同：1
> 
> 时间：2012-07-25T10:41:18.350
> 
> 标签：java, android

我正在尝试获取用户的电话号码，但问题是根据我的研究到目前为止我得到空响应，我们可以通过使用 TelePhony Manager 的对象和调用函数 getLine1Number()

但我没有得到任何回应，有人建议这是因为服务提供商在我的国家提供的服务不一样对此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:44:36.157

是否添加了权限

```
<uses-permission android:name="android.permission.READ_PHONE_STATE">
</uses-permission> 
```

到您的 AndroidManifest.xml 文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:47:38.727

你试过用

`String phoneNumber = extras.getString(TelephonyManager.EXTRA_INCOMING_NUMBER);`

如果您已经使用过它，我会建议您以更具体的方式详细说明您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:20:08.930

将此权限添加到您的 android 清单文件

```
<uses-permission android:name="android.permission.READ_PHONE_STATE">
</uses-permission> 
```

使用以下代码获取号码

```
number = extras.getString(TelephonyManager.EXTRA_INCOMING_NUMBER); 
```

# c# - C# SQL 数据库 Windows 窗体登录系统

> ID：11647942
> 
> 赞同：-1
> 
> 时间：2012-07-25T10:41:17.807
> 
> 标签：c#, database, sql-server-2008, login

我正在使用 C# 开发一个 SQL 数据库项目。我希望创建一个登录表单，当有人启动应用程序时会显示该表单。

与数据库建立连接，但是他们必须在第一个表单中输入正确的用户名和密码，然后才能继续查看其余部分。

我创建了 2 个文本框，一个按钮 txtusername 和 txtpassword 以及一个按钮登录。

这是我的 SQL 命令：

```
SqlCommand command = new SqlCommand("SELECT * FROM tblUsers WHERE Username ='" + txtUsername + "' AND Password = '" + txtPassword + "'", Program.cs); 
```

我正在寻找一种在标签中显示的方法，如果 sql 命令产生的结果意味着用户名和密码存储在用户表中，那么它会返回 true 或其他内容。如果有更有效或更有效的方法，请告诉我:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:46:50.320

您**永远不**应该通过连接字符串来创建命令文本。使用`SqlParameter`. 那就是把第一件事放在第一位。

在我看来，您没有（或很少）了解数据访问在 .net 中的工作原理。因此，我建议您阅读一些有关该主题的书籍，例如 Microsoft 的“使用 .NET Framework 4 访问数据”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:05:53.653

此代码是您项目中的一个漏洞，请 [参阅此了解详细信息](http://en.wikipedia.org/wiki/SQL_injection)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:52:18.963

**登录页面 b 的强文本**代码***

```
tn_click() //button click event 
{ 
    Sqlconnection con=new
    sqlconnection(Strcon); 

    String sqlquery="select usrname,password from loginpage where username='textname.text' and password='textpassword.text'"; 

    Sqlcommand sqlcom=new Sqlcommand(Sqlquery,con); 
    con.open(); 

    Sqldatareader dr;
    dr=sqlcomm.executereader(commandbehavior close connection);

    if(dr.read()) 
    {  
        session["un"]=dr["username"].Tostring();
        session["pwd"]=dr["userpassword"].Tostring();

        if(dr["userpassword"].Tostring()!=null); 
            respone.redirect("userdetail.aspx"); 
    } 
    else 
    { 
        respone.redirect("login.aspx"); 
    } 
    else 
    {
        lblmsg.text="invalid user"; 
    }
} 
```

* * *

* * *

# php - 使用 php simpleXML 获取值

> ID：11647945
> 
> 赞同：0
> 
> 时间：2012-07-25T10:41:45.197
> 
> 标签：php, xml, simplexml

我正在尝试遍历底部 xml 中的图像节点，但我的代码只显示了许多图像中的第一张图像。我正在使用 foreach 遍历它，任何帮助将不胜感激。

另外，我正在尝试访问产品下的“描述”和“功能”，但我不知道如何访问这些。

```
 <?php 
    $mypix = simplexml_load_file('abc.xml');
    foreach ($mypix->package as $pixinfo):
        $title=$pixinfo->productTitle;
        $link=$pixinfo->url;
        $image=$pixinfo->imageUrl;    
        echo "<a href=\"",$link,"\"><img src=\"",$image,"\" alt=\"",$title,"\" height=\"100\" width=\"100\" /></a>\n";
        foreach ($pixinfo->images as $piximages):
            echo "<img src=\"",$piximages->image,"\" height=\"50\" width=\"50\" />\n";
        endforeach;
        echo "<br />";
    endforeach;
?>

    <?xml version="1.0" encoding="utf-8" ?>
<packages xmlns="http://www.google.com">
    <package>
        <productTitle>Product A</productTitle>
        <url>http://google.com</url>
        <imageUrl>h658279.jpg</imageUrl>
        <images>
            <image>658279.jpg</image>
            <image>658280.jpg</image>
            <image>658283.jpg</image>
        </images>
        <products>
            <product>
                <description>Why choose product</description>
                <locationDescription>Ideally located</locationDescription>
                <features>Buttons 12</features>
            </product>
        </products>
    </package>
</packages> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:00:53.100

试试这个（测试）...

```
<?php
$mypix = simplexml_load_file('abc.xml');
foreach ($mypix->package as $pixinfo):
    $title = $pixinfo->productTitle;
    $link = $pixinfo->url;
    $image = $pixinfo->imageUrl;
    echo "<a href=\"", $link, "\"><img src=\"", $image, "\" alt=\"", $title, "\" height=\"100\" width=\"100\" /></a>\n";
    foreach ($pixinfo->images->image as $img) {
        echo "<img src=\"". $img. "\" height=\"50\" width=\"50\" />\n";
    }
    echo "<br />";
endforeach;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:47:37.120

你有错别字，应该是：

```
 foreach ($mypix->packages as $pixinfo): //packages not package 
```

# c++ - 错误 C2678：二进制“<”：未找到采用左操作数的运算符...（或没有可接受的转换）

> ID：11647954
> 
> 赞同：6
> 
> 时间：2012-07-25T10:42:20.503
> 
> 标签：c++, map

这是我在地图中查找值的代码：

```
bool myclass::getFreqFromCache( plVariablesConjunction& varABC, vector<plFloat>& freq )
{
std::map<plVariablesConjunction, std::vector<plFloat>>::iterator freqItr;
    freqItr = freqCache.find(varABC);

    if (freqItr != freqCache.end())
        {
        freq = freqItr->second;
        return true;
        }
 } 
```

“PlVariablesConjunction”是 ProBT 库数据类型。它包含运算符“==”，如果发现两个变量相同，则返回 true，否则返回 false。

这是错误：

```
C:\Program Files\Microsoft Visual Studio 10.0\VC\include\xfunctional(125): error C2678: binary '<' : no operator found which takes a left-hand operand of type 'const plVariablesConjunction' (or there is no acceptable conversion)
1>          E:\ProBT22\probt-spl-2.2.0-expires-20121130-vc10-dynamic-release\include\plSymbol.h(71): could be 'bool operator <(const plSymbol &,const plSymbol &)' [found using argument-dependent lookup]
1>          while trying to match the argument list '(const plVariablesConjunction, const plVariablesConjunction)'
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\xfunctional(124) : while compiling class template member function 'bool std::less<_Ty>::operator ()(const _Ty &,const _Ty &) const'
1>          with
1>          [
1>              _Ty=plVariablesConjunction
1>          ]
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\map(71) : see reference to class template instantiation 'std::less<_Ty>' being compiled
1>          with
1>          [
1>              _Ty=plVariablesConjunction
1>          ]
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\xtree(451) : see reference to class template instantiation 'std::_Tmap_traits<_Kty,_Ty,_Pr,_Alloc,_Mfl>' being compiled
1>          with
1>          [
1>              _Kty=plVariablesConjunction,
1>              _Ty=std::vector<plProbValue>,
1>              _Pr=std::less<plVariablesConjunction>,
1>              _Alloc=std::allocator<std::pair<const plVariablesConjunction,std::vector<plProbValue>>>,
1>              _Mfl=false
1>          ]
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\xtree(520) : see reference to class template instantiation 'std::_Tree_nod<_Traits>' being compiled
1>          with
1>          [
1>              _Traits=std::_Tmap_traits<plVariablesConjunction,std::vector<plProbValue>,std::less<plVariablesConjunction>,std::allocator<std::pair<const plVariablesConjunction,std::vector<plProbValue>>>,false>
1>          ]
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\xtree(659) : see reference to class template instantiation 'std::_Tree_val<_Traits>' being compiled
1>          with
1>          [
1>              _Traits=std::_Tmap_traits<plVariablesConjunction,std::vector<plProbValue>,std::less<plVariablesConjunction>,std::allocator<std::pair<const plVariablesConjunction,std::vector<plProbValue>>>,false>
1>          ]
1>          C:\Program Files\Microsoft Visual Studio 10.0\VC\include\map(81) : see reference to class template instantiation 'std::_Tree<_Traits>' being compiled
1>          with
1>          [
1>              _Traits=std::_Tmap_traits<plVariablesConjunction,std::vector<plProbValue>,std::less<plVariablesConjunction>,std::allocator<std::pair<const plVariablesConjunction,std::vector<plProbValue>>>,false>
1>          ]
1>          e:\probt22\work\yasin\testmmhcfinalversion\testmmhc_mi_probt_sw\mmhc\slidingWindow.h(55) : see reference to class template instantiation 'std::map<_Kty,_Ty>' being compiled
1>          with
1>          [
1>              _Kty=plVariablesConjunction,
1>              _Ty=std::vector<plProbValue>
1>          ] 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-25T10:49:58.617

`std::map`（通常）实现为二叉搜索树，最常见的是红黑树。它需要为键值定义线性顺序才能在树中找到正确的位置。这就是为什么`std::map`尝试调用`operator<`插入的键值。

您的课程不提供`operator<`. 为您的班级定义`operator<`或为模板提供比较功能：`std::map<plVariablesConjunction, std::vector<plFloat>, my_comparison_function>`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-25T10:49:39.820

要使用地图类，模板需要两种，也可能是三种类型：

`std::map <key_type, data_type, [comparison_function]>`

您需要提供比较函数或重载键类中的 < 运算符。

请注意，比较函数在括号中，表明它是可选的，只要您的 key_type 定义了小于运算符 <

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-25T10:46:19.440

map<> 不`operator==`用于检查插入的值。它需要`operator<`对键值进行比较。

# c - 何时分配静态数据 (.bss)？

> ID：11647956
> 
> 赞同：2
> 
> 时间：2012-07-25T10:42:41.280
> 
> 标签：c, gcc, elf

我一直在研究减少应用程序的内存占用。继上一个问题之后：[GDB - 我可以在内存中找到大型数据元素吗](https://stackoverflow.com/questions/11613713/gdb-can-i-find-large-data-elements-in-memory)？我已经找到并删除了大多数最大的罪魁祸首。

`nm --size-sort`从可执行文件的 .bss 部分中找到大项目是非常宝贵的。

在 pmap 中查看的内存占用量已大幅下降。但是在另一个系统（Ubuntu Pangolin，gcc 4.6.3）上继续这项工作时，我注意到正在运行的进程的内存占用是完全合理的，而且肯定比 .bss 的大小要小得多。

通过调试器运行代码，看起来 .bss 部分中的最大符号在访问数据之前并没有真正被分配（即我可以从一个大符号中设置一个数组元素，并且内存占用增加了 16MB ）。

.bss 部分只是零初始化，所以很容易想象一个实现为它分配虚拟地址空间，但在使用它之前实际上不分配任何实际内存。

这是行为上的真正差异，还是系统之间报告的差异？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:28:48.257

在 Linux 中，零初始化页面都映射到内存中相同的“归零”物理页面。使用写时复制方法，当您写入该页面的内存时，该页面被复制并重新映射到新页面，这反过来又导致应用程序的内存占用增加。正如您所怀疑的，听起来这就是正在发生的事情。这适用于所有 Linux 发行版。

# c# - 使用通用存储库更新实体失败

> ID：11647957
> 
> 赞同：1
> 
> 时间：2012-07-25T10:42:45.603
> 
> 标签：c#, asp.net-mvc, entity-framework, repository, asp.net-mvc-4

我有一个通用存储库：

```
 public class GenericRepository<TEntity> : AbstractRepository<TEntity>, IRepository<TEntity> where TEntity : class
    {
        private DbContext _context;
        [...]
        public GenericRepository(DbContext context)
        {
            _context = context;
            context.Configuration.AutoDetectChangesEnabled = true;
            _dbSet = _context.Set<TEntity>();
        }
        [...]
        public void SaveChanges()
        {
            _context.SaveChanges();
        }
        [...]
    public void Add(TEntity entity)
    {
        if (entity == null)
        {
            throw new ArgumentNullException("entity");
        }

        _dbSet.Add(entity);
    }
        [...]
    public virtual void Update(TEntity entity)
    {
        _context.Entry(entity).State = EntityState.Modified;
    } 
```

在我的控制器中，有以下代码：

```
 [HttpPost]
    public ActionResult Edit(Project project)
    {
          if (ModelState.IsValid)
        {
            if (project.Id == 0)
            {
                ProjectRepository.Add(project);
            }
            else
            {
                ProjectRepository.Update(project);
            }

            ProjectRepository.SaveChanges();
            [...] 
```

选择和插入工作正常，但更新失败：我收到 InvalidOperationException（德语错误消息的英文翻译是“对象状态管理器中已存在具有相同键的对象。对象状态管理器无法跟踪具有相同键的多个对象钥匙。”）。

我不明白，因为我是我的开发机器上唯一的用户，而且我没有在其他地方修改记录。

知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T11:03:06.967

看看这些答案：

*   [ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法使用相同的 key 跟踪多个对象](https://stackoverflow.com/questions/5672255/an-object-with-the-same-key-already-exists-in-the-objectstatemanager-the-object)。

*   [“ObjectStateManager 中已存在具有相同键的对象...”将实体状态设置为已修改时引发异常](https://stackoverflow.com/questions/7221349/an-object-with-the-same-key-already-exists-in-the-objectstatemanager-except)

基本上你需要这样做：

```
 var entity = _context.Projects.Find(project.ProjectId);
 _context.Entry(entity).CurrentValues.SetValues(project); 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:12:26.290

该`project`实例是通过模型绑定创建的，而不是从您的存储库中加载的，因此您需要从存储库中实际加载一个`project`实例，然后更改其属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:24:51.393

*免责声明：我从未使用过实体框架，我是根据我在 ASP.NET MVC 和 nHibernate 方面的经验编写的，但您应该能够应用相同的模式*

好的，首先您的实际问题实际上是双键插入，这是因为传递给您的编辑操作的项目对象与您尝试更新的对象不同（这个对象是从您的基于模型绑定器创建的FormValueProvider 中的值）。它可能具有 excat 相同的值，因此具有相同的 id，但对于您的 ORM，它是一个全新的对象，从未持久化到数据库中。

您可以通过使用以下模式来防止这种情况（快速的脏示例代码）

```
 [HttpPost]
    public ActionResult Edit(Project project)
    {
        if (ModelState.IsValid)
        {
            if (project.Id == 0)
            {
                ProjectRepository.Add(project);
            }
            else
            {
                Project dbProject = ProjectRepository.GetById(project.Id); //or whatever your method to retrieve entities by Id is named
                UpdateModel(dbProject, "project"); //http://msdn.microsoft.com/en-us/library/dd470933.aspx
                ProjectRepository.Update(project);
            }
        }
    } 
```

# php - 如何使用 Simple DOM Parser 解析带有嵌套标签的 HTML？

> ID：11647959
> 
> 赞同：1
> 
> 时间：2012-07-25T10:42:48.467
> 
> 标签：php, html, parsing, dom

我有一个要解析的 HTML 文件。它有一堆像这样的DIV：

```
<div class="doc-overview">
<h2>Description</h2>
<div id="doc-description-container" class="" style="max-height: 605px;">
<div class="doc-description toggle-overflow-contents" data-collapsed-height="200">
<div id="doc-original-text">
Content of the div without paragraph tags.
<p>Content from the first paragraph </p>
<p>Content from the second paragraph</p>
<p>Content from the third paragraph</p>

</div>
</div>
<div class="doc-description-overflow"></div>
</div> 
```

我试过这个：

```
foreach($html->find('div[id=doc-original-text]') as $div) {         
                echo $div->innertext;
            } 
```

您注意到我直接找到了，`doc-original-text`但我也尝试从外部 div 解析到内部 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-08T11:18:10.030

尝试这个，

```
foreach($html->find('div#doc-original-text') as $div) {         
            echo $div->innertext;
        } 
```

# exchange-server - Exchange 2010 日记功能电子邮件内容

> ID：11647962
> 
> 赞同：1
> 
> 时间：2012-07-25T10:42:57.787
> 
> 标签：exchange-server, exchange-server-2010, journaling

我在 Exchange 2010 上使用[日记功能将所有通过集线器传输的电子邮件放在一个邮箱中。](http://technet.microsoft.com/en-us/library/aa998649)在这些电子邮件中，我得到收件人、发件人、主题和消息 ID。怎么可能得到身体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:51:30.983

我没有什么需要做的。从日记中收到的电子邮件是我需要的电子邮件。它包含附件，这是原始电子邮件，因此我可以从中获取电子邮件正文。

# c# - 在 Sharepoint 中隐藏标题字段不起作用

> ID：11647964
> 
> 赞同：2
> 
> 时间：2012-07-25T10:42:58.397
> 
> 标签：c#, sharepoint

我正在尝试执行以下操作以从新表单和编辑表单中隐藏标题字段，但它仍然可见。

请帮忙

```
 /// <summary>
        /// Adds source list and content type.
        /// </summary>
        /// <param name="currentWeb"></param>
        private void AddSourcesList(SPWeb currentWeb)
        {
            currentWeb.AllowUnsafeUpdates = true;

            #region Add Source content type.
            if(currentWeb.ContentTypes[SponsoringCommon.Constants.CONTENTTYPES_SOURCES_NAME] == null)
            {
                #region Hides title column
                    currentWeb.Lists.Add(SponsoringCommon.Constants.LISTNAMES_SOURCES_NAME, string.Empty, SPListTemplateType.GenericList);
                    SPList sourceList = currentWeb.Lists.TryGetList(SponsoringCommon.Constants.LISTNAMES_SOURCES_NAME);
                    SPField titleField = sourceList.Fields.GetField("Title");
                    titleField.Required = false;                    
                    titleField.ShowInEditForm = false;
                    titleField.ShowInDisplayForm = false;
                    titleField.ShowInNewForm = false;
                    titleField.Hidden = true;
                    titleField.Update(); 
                #endregion 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T11:05:25.473

我看不到其余的代码，但我遇到了类似的问题，而我缺少的是`.Update()`列表和网络。因此，在您的情况下，请尝试更新*sourceList*并最后更新*currentWeb*。

希望它将有助于解决您的问题。

# c# - FormClosing 事件中的 Application.DoEvents

> ID：11647973
> 
> 赞同：1
> 
> 时间：2012-07-25T10:43:46.430
> 
> 标签：c#, multithreading, doevents, formclosing

我已经实现了我的习惯`ThreadManager`，在我的测试过程中它一直在完美地工作。当用户想要关闭应用程序时，关闭会暂停，直到所有线程退出或他们选择不等待就结束应用程序（经过 30 秒后）。

我需要澄清的是，如果使用`Application.DoEvents()`可能会很危险`FormClosing`。我应该使用它还是找到另一种等待线程退出的方法？

```
private void MainForm_FormClosing(object sender, FormClosingEventArgs e)
{
    // save settings before exit
    Properties.Settings.Default.Save();

    // Update program about intention
    Program.ApplicationClosing = true;

    try
    {
        // Inform user with friendly message
        ShowModalWaitForm("Application is closing.");

        // Keep the timestamp in order to keep track of how much time has passed since form closing started
        DateTime startTime = DateTime.Now;

        // Wait for all threads to die before continuing or ask user to close by force after 30 seconds have passed
        // In case user prefers to wait the timer is refreshed
        int threadsAlive;
        do
        {
            if (_threadManager.TryCountAliveThreads(out threadsAlive) && threadsAlive > 0)
            {
                Application.DoEvents();
                Thread.Sleep(50);
            }

            TimeSpan timePassed = DateTime.Now - startTime;
            if (timePassed.Seconds > 30)
            {
                if (ShouldNotWaitThreadsToExit())
                {
                    break; // Continue with form closing
                }
                else
                {
                    startTime = DateTime.Now; // Wait more for threads to exit
                }
            }
        } while (threadsAlive > 0);
    }
    catch (Exception ex)
    {
        _logger.ErrorException("MainForm_FormClosing", ex);
    }
    finally
    { 
        HideWaitForm(); 
    }
}

private bool ShouldNotWaitThreadsToExit()
{
    return MessageBox.Show(@"Press ""OK"" to close or ""Cancel"" to wait.", "Application not responding ", MessageBoxButtons.OKCancel) == DialogResult;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:59:12.630

我建议将您的等待条件放在另一个线程中。从 OnFormClosing 方法显示一个模式对话框。在此对话框中启动工作线程，例如使用[BackGroundWorker 类](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)并在等待完成时关闭此对话框。

**奖金主题** 调用[Application.DoEvents 方法的](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.doevents.aspx)[可能缺点](http://www.codinghorror.com/blog/2005/08/is-doevents-evil-revisited.html)

# jquery - 在 jQuery 上使用 Jquery 生成 ck te t

> ID：11647976
> 
> 赞同：0
> 
> 时间：2012-07-25T10:43:57.827
> 
> 标签：jquery

我有一个相对简单的上传表单，人们可以点击一个按钮，因此在不同的 div 中创建了一个额外的上传字段：

```
$("#extraf").click(function(){
  $("#file2").append('<input type="file" name="file[]" id="files2" size="30" />');
}); 
```

但是当人们选择他们的文件时，我希望他们看到文件的名称是什么，我查看了 StackOverflow 上的几个主题并且需要使用“.on()”。但它仍然无法使用以下代码：

```
$("input:file").on("change", function(){
  alert( $(this).text() );
}); 
```

或与

```
$("#files2").on("change", function(){
  alert( $(this).text() );
}); 
```

我什至没有收到警报，所以我认为有问题，有人可以帮我解决这个问题吗？

谢谢， 问候， 雅尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:46:34.563

像这样使用[.on()](http://api.jquery.com/on/)：

```
$("#file2").on("change","input[type=file]",function(){
     alert( $(this).val() );
}); 
```

[[不推荐使用`:file`。](http://api.jquery.com/category/deprecated/)]

[**现场演示**](http://jsfiddle.net/qKtGB/)

# javascript - 将 latlngs 对象转换为 google.map.LatLng 对象以进行多边形构建

> ID：11647979
> 
> 赞同：0
> 
> 时间：2012-07-25T10:44:21.890
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我有一个如下定义的 latlng 值的 javascript 对象，该对象被推送到谷歌地图创建脚本

```
var lat1 = '51.0001';
        var lng1 = '52.0001';
        var lat2 = '61.0001';
        var lng2 = '62.0001';
        google_map_item.coordinates = [
            new polygonLatLng(lat1,lng1),
            new polygonLatLng(lat2,lng2)
        ];

    google_map_items.push(google_map_item);

    function polygonLatLng(lat,lng){
        this.lat = lat;
        this.lng = lng;
    } 
```

正如您所看到的 google_map_item.coordinates 对象基本上只是几个点，我知道这不是完整的多边形，但我已经硬编码了一些简单的值，以便在使用动态之前尝试让脚本工作。

对象 google_map_items 被推送到地图创建脚本，如下所示：

```
 jQuery(document).ready(function($) {       

        var longitude = google_map_items[0].lat;
        var latitude = google_map_items[0].lon;
        var center = new google.maps.LatLng(longitude, latitude);

        var zoomlevel = parseInt(google_map_items[0].zoomlevel);

        var myOptions = {
          zoom: zoomlevel, 
          center: center,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        var bounds = new google.maps.LatLngBounds();
        var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

        for(i = 0; i < google_map_items.length; i++) {
          var latlng = new google.maps.LatLng(google_map_items[i].lat, google_map_items[i].lon);
          bounds.extend(latlng);

          var marker = new google.maps.Marker({
            position: latlng,
            map: map,
            icon: "https://chart.googleapis.com/chart?chst=d_map_pin_letter_withshadow&chld=" + (i + 1) + "|FF8888|000000",
            zIndex: Math.round(latlng.lat()*-100000)<<5
          });

          google.maps.event.addListener(marker, 'click', (function(marker, i) {
            return function() {
              $(".surgery").removeClass("highlighted");
              $("#surgery-" + (i + 1)).addClass("highlighted");
            }
          })(marker, i));

        }

        if (google_map_items.length >1 ) { map.fitBounds(bounds); }

                //check if area to add to map
                //if(google_map_items.coordinates){
                var surgeryArea;

                var areaCoords = [

                ];

                    surgeryArea = new google.maps.Polygon({
                        paths: google_map_item.coordinates,
                        strokeColor: "#FF0000",
                        strokeOpacity: 0.4,
                        strokeWeight: 2,
                        fillColor: "#FF0000",
                        fillOpacity: 0.35,
                        clickable: true
                    });

                    // add an event listener
                    google.maps.event.addListener(surgeryArea, 'click', function() {
                        this.setMap(null);
                    });

                    surgeryArea.setMap(map);

                //}

      }); 
```

areaCoords 有一个空对象，需要使用新的 google.maps.LatLng 构造函数为 google_map_item.coordinates 对象内的每个点构建。我对 javascript 对象和数组操作的了解还不够先进，无法计算出传递它的语法，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T11:13:56.800

更改坐标值：

```
 google_map_item.coordinates = [
        new google.maps.LatLng(lat1, lat1),
        new google.maps.LatLng(lat2, lat2)
    ]; 
```

# mysql - SQL选择多行条件的数据

> ID：11647980
> 
> 赞同：1
> 
> 时间：2012-07-25T10:44:25.687
> 
> 标签：mysql, sql, sql-server, tsql

假设我有一个名为“tblTemp”的表，其中包含以下数据

```
ID        Name  
1           A  
2           B  
3           C  
4           A  
4           B  
5           A  
5           B  
5           C  
6           C  
6           B 
```

我想从 A&B 的名称中获取 ID，而不是 A&B&C，如下所示：

```
4          A 
```

或者

```
4          B 
```

我怎么能在sql中这样做？

我尝试以下 sql 但它也返回第 5 行：

```
SELECT     tblTemp.ID, tblTemp.Name
FROM         tblTemp INNER JOIN
                  tblTemp AS tbltemp_1 ON tblTemp.ID = tbltemp_1.ID
WHERE     (tblTemp.Name = 'A') AND (tbltemp_1.Name = 'B') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:35:17.763

比较集合的一种方法是获取组的计数，按搜索集过滤组，并查看每个组的匹配数是否等于原始组成员数：

```
select tblTemp.ID
  from tblTemp
 inner join
 (
   select ID,
          count(*) GroupCount
     from tblTemp
    group by ID
   having count(*) = 2
 ) g
   on tblTemp.ID = g.ID
 where tblTemp.Name in ('A', 'B')
 group by tblTemp.Id, g.GroupCount
having count (*) = g.GroupCount 
```

这应该适用于 MySql 和 Sql Server。

[您可以使用此代码@Sql Fiddle](http://sqlfiddle.com/#!3/5e6e5/35)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:46:43.557

您是否只想要具有 A 或 B 但没有 C 的不同 ID 的列表？

```
SELECT distinct ID
FROM tblTemp
WHERE Name = 'A' or Name = 'B'

EXCEPT

SELECT distinct ID
FROM tblTemp
WHERE Name = 'C' 
```

我的上述解决方案适用于“A”和/或“B”，但我注意到您实际上想要“A”和“B”而没有或。在这种情况下：

```
SELECT distinct ID
FROM tblTemp as T1
INNER JOIN tblTemp as T2
ON T1.ID = T2.ID
WHERE T1.Name = 'A' and T2.Name = 'B'

EXCEPT

SELECT distinct ID
FROM tblTemp
WHERE Name = 'C' 
```

这是您原始代码的扩展，可能不如@Madhivanan 的解决方案那么优雅，但如果 AB 和 C 更改为例如单词，它会更通用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:54:05.910

尝试：

```
SELECT distinct ID
FROM tblTemp a
     LEFT JOIN tblTemp b
           ON a.ID = b.ID AND 
              b.name  = 'C'
WHERE b.ID IS NULL; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T10:54:36.550

```
select id from table
group by id
having min(Name)='A' and max(Nmae)='B' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T10:55:23.867

```
 SELECT ID, Name FROM tblTemp WHERE (Name = 'A' OR Name = 'B') and ID not in(SELECT ID FROM tblTemp WHERE Name = 'C') 
```

# java - Android MediaPlayer 在 Prepare() 上崩溃

> ID：11647982
> 
> 赞同：0
> 
> 时间：2012-07-25T10:44:32.240
> 
> 标签：java, android, media-player, midi

我正在尝试播放由同一应用程序生成并位于其中的文件 test3.mid `cache directory`（我已使用文件管理器验证该文件存在）

[我在这里](https://stackoverflow.com/questions/9625680/mediaplayer-setdatasource-better-to-use-path-or-filedescriptor)读到可能`setDataSource(string)`会导致错误，所以我选择使用`filedesciptor`. 当我添加`prepare()`方法时，代码只给出错误（见下文）。

我在某处犯了错误吗？我看到' `NullPointerException`'。这是否意味着它找不到文件？我可以尝试什么？

一世

```
 try {
       String filePath = getCacheDir() + "/test3.mid";
       File file = new File(filePath);
       FileInputStream inputStream = new FileInputStream(file);
       mediaPlayer.setDataSource(inputStream.getFD());
       inputStream.close();
    } catch (Exception e1) {
        e1.printStackTrace();
    }
    try {
        mediaPlayer.prepare();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

Logcat 输出为：

```
07-25 10:36:44.264: E/AndroidRuntime(31467): FATAL EXCEPTION: main
07-25 10:36:44.264: E/AndroidRuntime(31467): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.optimuse/com.example.optimuse.MainActivity}: java.lang.NullPointerException
07-25 10:36:44.264: E/AndroidRuntime(31467):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
07-25 10:36:44.264: E/AndroidRuntime(31467):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
07-25 10:36:44.264: E/AndroidRuntime(31467):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
07-25 10:36:44.264: E/AndroidRuntime(31467):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
07-25 10:36:44.264: E/AndroidRuntime(31467):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-25 10:36:44.264: E/AndroidRuntime(31467):    at android.os.Looper.loop(Looper.java:137)
07-25 10:36:44.264: E/AndroidRuntime(31467):    at android.app.ActivityThread.main(ActivityThread.java:4424)
07-25 10:36:44.264: E/AndroidRuntime(31467):    at java.lang.reflect.Method.invokeNative(Native Method)
07-25 10:36:44.264: E/AndroidRuntime(31467):    at java.lang.reflect.Method.invoke(Method.java:511)
07-25 10:36:44.264: E/AndroidRuntime(31467):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-25 10:36:44.264: E/AndroidRuntime(31467):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-25 10:36:44.264: E/AndroidRuntime(31467):    at dalvik.system.NativeStart.main(Native Method)
07-25 10:36:44.264: E/AndroidRuntime(31467): Caused by: java.lang.NullPointerException
07-25 10:36:44.264: E/AndroidRuntime(31467):    at com.example.optimuse.MainActivity.onCreate(MainActivity.java:127)
07-25 10:36:44.264: E/AndroidRuntime(31467):    at android.app.Activity.performCreate(Activity.java:4465)
07-25 10:36:44.264: E/AndroidRuntime(31467):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-25 10:36:44.264: E/AndroidRuntime(31467):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:00:05.327

这完全是愚蠢的，但我忘记了

```
mediaPlayer = new MediaPlayer(); 
```

# powershell - 如何让错误在 TeamCity PowerShell 运行程序中传播

> ID：11647987
> 
> 赞同：28
> 
> 时间：2012-07-25T10:44:43.380
> 
> 标签：powershell, error-handling, teamcity

我有一个 TeamCity 7 构建配置，它几乎只是`.ps1`使用各种 TeamCity 参数调用脚本。

我希望这可能是一个简单的设置问题：

*   **脚本**

    > 文件

*   **脚本文件**

    > %system.teamcity.build.workingDir%/Script.ps1

*   **脚本执行模式**

    > 使用“-File”参数执行 .ps1 脚本

*   **脚本参数**

    > %system.teamcity.build.workingDir% -OptionB %BuildConfigArgument% %BuildConfigArg2%

然后我会期望：

*   如果我弄乱了我的论点并且脚本无法启动，则构建失败
*   如果我的 Script.ps1 脚本抛出，则构建失败
*   如果脚本`exit`具有非`0`错误级别，我希望构建失败（也许这不是惯用的 PS 错误管理 - .ps1 是否应该仅在没有异常的情况下报告成功？）

* * *

问题：它只是行不通。它应该如何工作？有没有我做错了什么可以通过选择不同的选项来解决？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2015-07-03T12:30:01.493

正如[友好的 TeamCity 手册中所述](https://confluence.jetbrains.com/display/TCD9/PowerShell)：

> *将错误**输出设置为`Error`**并添加构建失败条件*
> 
> 如果存在语法错误和异常，PowerShell 会将它们写入 stderr。要使 TeamCity 构建失败，请将错误输出选项设置为错误并添加一个构建失败条件，该条件将使构建在任何错误输出上失败。

完成这项工作的关键是更改**两个**默认值：

1.  在**Build Failure Conditions**的顶层，构建运行器会记录打开***错误消息：***
2.  在 [PowerShell] **Build Step**中，显示高级选项并设置*错误输出：**错误***

* * *

~~在 9.1 中，以下工作（如果它也适用于早期版本，我不会感到惊讶）：~~

 ~~1.  使用默认选项创建 PowerShell 构建步骤
2.  将下拉菜单更改为*脚本：**源代码***
3.  `trap { Write-Error "Exception $_" ; exit 98 }`在脚本顶部添加一个
4.  （对于适合 TeamCity 构建脚本的脚本类型，可选但更正确的 IMO）

    显示高级选项并打开*选项：添加 -NoProfile 参数*

5.  （可选，但对我来说，这应该是默认设置，因为它[按照@Jamal Mavadat 的建议](https://stackoverflow.com/a/27477577/11635)呈现得更清晰）

    显示高级选项并打开*错误输出：**错误***

    （除了@JetBrains：如果标签是“将标准错误输出格式化为”，那么误导性会降低）~~ 

这包括以下情况：

~~*   解析错误[冒泡为异常并立即停止执行]*   异常 [ `throw`n 在您的 PS 代码中直接或间接显示并触发 TC 的退出代码以停止构建]~~
2.  ~~脚本中的显式`exit n`传播到构建（如果非零则失败）~~

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-02T15:19:19.773

TeamCity 中存在一个[已知错误](http://youtrack.jetbrains.com/issue/TW-21554)，导致原始发布者注意到的行为。

然而，这很容易解决。

在 PowerShell 脚本的末尾，添加指示已到达脚本末尾的输出：

```
Echo "Packaging complete (end of script reached)" 
```

然后，在您的构建上设置一个新的*构建失败条件*，如果您回显的文本不存在于输出中，则该条件将失败。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-24T03:55:50.827

你多虑了。试试这个：

*   脚本

    ```
     File 
    ```

*   脚本文件

    ```
     Script.ps1 
    ```

    *你不需要给它一个路径——默认情况下，它是相对于结帐目录的。*

*   脚本执行模式

    ```
     Put script into PowerShell stdin with "-Command -" arguments 
    ```

这正是我用来在 Teamcity 中运行一堆 powershell 脚本的方法。

## 更新

我错过了原始帖子中关于 powershell 脚本失败导致构建失败的内容。道歉！

我以两种不同的方式解决了这部分难题。

### 对于常规的 powershell 脚本

将主代码块包装在`try...catch`; 如果发生异常，则返回一个非零整数值。成功执行，返回 0。

这种为成功返回零的惯例可以追溯到很长一段历史——它被 Unix/Linux 系统、DOS、CP/M 等使用。

### 对于[PSake](http://codebetter.com/jameskovacs/2010/04/12/psake-v4-00/)构建脚本

使用包装器 powershell 脚本调用 psake 并通过[将响应消息写入](http://confluence.jetbrains.net/display/TCD7/Build+Script+Interaction+with+TeamCity#BuildScriptInteractionwithTeamCity-ServiceMessages)标准输出来直接设置 teamcity 构建的结果。

在脚本的开头，定义表示失败的状态消息：

```
$global:buildResult = "#teamcity[buildStatus status='FAILURE' text='It died.'] 
```

在 psake 脚本中，更新`$global:buildResult`以指示最后运行的专用任务成功。

```
$global:buildResult = "#teamcity[buildStatus status='SUCCESS' text='It lives.'] 
```

在包装脚本结束时，输出状态消息

```
write-host $global:buildResult 
```

如果构建脚本中的任何内容失败，则最后一个任务将不会运行，并且将输出默认消息（指示失败）。

无论哪种方式，Teamcity 都会收到消息并适当地设置构建状态。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-09-04T10:43:28.413

在 TeamCity 9 上对我有用的已接受答案的替代方案（我不喜欢更改“构建失败条件”选项，因为它会影响所有构建步骤）：-

我希望 PowerShell 错误使构建步骤失败，但带有漂亮的消息。所以我想抛出一个错误消息并返回一个错误代码....尝试/捕获/最终救援。

**为清楚起见进行编辑**：此脚本应该失败。它表明可以抛出异常并返回退出代码。所以你得到了两个，TeamCity 处理的退出代码，在我的例子中，一个很好的清晰的调试消息，显示问题所在。

我的演示脚本：

```
Try {
    Write-Host "Demoing the finally bit"
    # Make sure if anything goes wrong in the script we get an exception
    $ErrorActionPreference = "Stop"

    # This will fail and throw an exception (unless you add the file)
    Get-Content IDontExist.txt
}
Catch
{
    # Throwing like this gives a pretty error message in the build log
    throw $_
    # These give less pretty/helpful error messages
    # Write-Host $_
    # Write-Host $_.Exception.Message
}
Finally
{
    # 69 because it's more funny than 1
    exit(69)
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-15T04:53:12.840

如果您可以使用较新的 TeamCity 版本，那么值得检查一些[PowerShell 构建](http://confluence.jetbrains.com/display/TCD9/PowerShell)运行程序改进。

特别是，`Error Output`从默认更改`warning`为`error`您可能会感兴趣。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-07-03T12:50:21.677

只需赞美您不需要与 Jenkins 一起工作的法律 .. 不能使用 PowerShell 步骤来解决类似问题。相反，我们需要使用一个“cmd”步骤来调用以下魔法包装器，该包装器将使异常和退出代码步骤失败：

```
%SystemRoot%\sysnative\WindowsPowerShell\v1.0\powershell.exe -ExecutionPolicy Bypass -NoLogo -NonInteractive -NoProfile -WindowStyle Hidden -Command "& { $ErrorActionPreference = 'Stop'; & 'path\to\script.ps1 -arg1 -arg2; EXIT $LASTEXITCODE }" 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-25T10:44:43.380

这已被[9.x 提供的选项所取代](https://stackoverflow.com/a/31206924/11635)，但我将把它留在这里，因为它当时绝对是防弹的，我找不到任何其他我更喜欢的解决方案。

* * *

你可以做一些有效的事情。以下内容已经过测试

*   脚本位中的错误
*   丢失文件
*   脚本以非`0`ERRORLEVEL退出

在 TeamCity Powershell 运行器选项中，进行如下设置：

*   **脚本文件**

    > 源代码

*   **脚本源**

    ```
    $ErrorActionPreference='Stop'
    powershell -NoProfile "Invoke-Command -ScriptBlock { `$errorActionPreference='Stop'; %system.teamcity.build.workingDir%/Script.ps1 %system.teamcity.build.workingDir% --OptionB %BuildConfigArgument% %BuildConfigArg2%; exit `$LastExitCode }"
    ```

    > （未包装版本：`powershell -NoProfile "Invoke-Command -ScriptBlock { `$errorActionPreference='Stop'; %system.teamcity.build.workingDir%/Script.ps1 %system.teamcity.build.workingDir% --OptionB %BuildConfigArgument% %BuildConfigArg2%; exit`$LastExitCode }"`

*   **脚本执行模式**

    > 使用“-Command -”参数将脚本放入 PowerShell 标准输入

*   **附加命令行参数**

    > `-NoProfile`

我希望这不是最好的答案！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-19T09:56:12.590

这将检查最后一个错误代码，如果不为 0，则退出。

```
 If ($LASTEXITCODE -ne 0) {
        Write-Host "The result was of the previous script was " $LASTEXITCODE
        Exit $LASTEXITCODE
    } 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-03-24T11:48:29.737

Powershell v2 至少有一个 -File 选项会弄乱错误代码的问题。有一些关于它如何搞砸的细节。

答案是切换到 -Command 选项和/或用一个 bat 文件包装它，该文件检查 LastErrorCode 并在它应该失败时返回 1+。

[http://zduck.com/2012/powershell-batch-files-exit-codes/](http://zduck.com/2012/powershell-batch-files-exit-codes/)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-04-28T10:05:40.597

使用这样的东西：

```
 echo "##teamcity[buildStatus status='FAILURE' text='Something went wrong while executing the script...']"; 
```

作为参考，请查看Teamcity的[Reporting Build Status](http://confluence.jetbrains.com/display/TCD8/Build+Script+Interaction+with+TeamCity#BuildScriptInteractionwithTeamCity-ReportingBuildStatus)

# objective-c - 将字符串转换为双精度以供坐标使用，Xcode

> ID：11647997
> 
> 赞同：7
> 
> 时间：2012-07-25T10:45:24.423
> 
> 标签：objective-c, string, double, coordinates

我有一个 XML 文件中的经度和纬度列表。我可以将 lat 和 lon 打印为字符串，但是当我将字符串转换为双精度时，我得到 0。

这是我的代码：

```
NSString *latstring = [[NSString alloc] initWithString:theList.lat] ;
NSString *lonstring = [[NSString alloc] initWithString:theList.lon];
NSLog(@"latstring: %@, lonstring: %@", latstring, lonstring);

double latdouble = [latstring doubleValue];
double londouble = [lonstring doubleValue];
NSLog(@"latdouble: %g, londouble: %g", latdouble, londouble); 
```

当我记录'latstring'和'lonstring'时，我得到正确的坐标但是当我记录'latdouble'和'londouble'时，我得到0。

我需要将 lat 和 lon 值作为双精度值，这样我就可以在地图视图中使用它们，因为它不允许我使用字符串作为坐标。

对此可能有一个非常简单的解释，但是我对objective-c相当陌生，似乎无法找到解决方案。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-25T18:49:02.587

解决了这个问题。像菲利普所说的那样计算字符串的长度后，结果发现长度比字符串长 1 个字符。所以我在中间添加了另一个字符串，它与'latstring'和'lonstring'相同，但是它从索引1而不是0开始，因此切断了必须在坐标值前面的任何字符。然后这完美地转换为双倍。

这是使用的代码：

```
NSString *latstring = theList.lat;
NSString *lonstring = theList.lon;
NSLog(@"%@, %@ wooo", latstring, lonstring);

NSString *latcutstring = [latstring substringFromIndex:1];
NSLog(@"cut lat: %@", latcutstring);
NSString *loncutstring = [lonstring substringFromIndex:1];
NSLog(@"cut lon: %@", loncutstring);

double latdouble = [latcutstring doubleValue];
NSLog(@"latdouble: %f", latdouble);
double londouble = [loncutstring doubleValue];
NSLog(@"londouble: %f", londouble); 
```

谢谢 Phillip Mills 和 Tobol 的帮助。

编辑：2012 年 11 月

正如克雷格和菲利普所说，这是空白导致的问题，我找到了一种更安全的方法来避免删除所需的字符。

```
NSString *trimlat = [theList.lat stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
    NSString *trimlon = [theList.lon stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    //Convert to double
    double latdouble = [trimlat doubleValue];
    double londouble = [trimlon doubleValue];

    //Create coordinate
    CLLocationCoordinate2D coord = {(latdouble),(londouble)}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:05:58.953

我认为这些字符串不是很好的格式化程序。数字前只能有空格。lat 和 lon 的格式必须像 'dd.dddddddd'。

```
 NSString *works = @"  12.5431 jdty";
    NSString *doesntWorks = @"E 43.4345";
    NSString *latstring = [[NSString alloc] initWithString:works] ;
    NSString *lonstring = [[NSString alloc] initWithString:doesntWorks];
    NSLog(@"latstring: %@, lonstring: %@", latstring, lonstring);

    double latdouble = [latstring doubleValue];
    double londouble = [lonstring doubleValue];
    NSLog(@"latdouble: %g, londouble: %g", latdouble, londouble); 
```

# scala - 尝试在 scala 测试中运行 Play FakeAplication 时出现片段评估错误

> ID：11647998
> 
> 赞同：0
> 
> 时间：2012-07-25T10:45:24.853
> 
> 标签：scala, playframework-2.0, specs2

有人可以帮忙吗。我有 Play2 项目，我需要在其中测试一些 DAO 代码。我使用了来自 [http://www.playframework.org/documentation/2.0.2/ScalaTest](http://www.playframework.org/documentation/2.0.2/ScalaTest)的文档。测试非常简单：

```
import models.Calendar
import org.specs2.mutable._

import play.api.test._
import play.api.test.Helpers._

class CalendarSpec extends Specification {
"Calendar model" should {

  "be retrieved by id" in {

    val fakeApp = FakeApplication()
    running(fakeApp) {

      lazy val calendarId= Calendar.addCalendar(
        Calendar(subject="test",
          upAccount = "mytest",
          masterId = 1,
          calendarType = 1,
          isAllDayEvent = false,
          hasAttachment = false,
          category = "test",
          instanceType = 1,
        upName = "test" ))
      lazy val Some(calendar) = Calendar.getCalendar(calendarId.get)

      calendar.upAccount must equalTo("mytest")
    }
  }
}
} 
```

当我运行“sbt test”时，出现奇怪的错误：

```
[info] Calendar model should
[error] ! Fragment evaluation error
[error]     ThrowableException: play.api.test.Helpers$.play$api$http$HeaderNames$_setter_$ACCESS_CONTROL_ALLOW_ORIGIN_$eq(Ljava/lang/String;)V (TraversableLike.scala:194)
[error] play.api.http.HeaderNames$class.$init$(StandardValues.scala:195)
[error] play.api.test.Helpers$.<init>(Helpers.scala:16)
[error] play.api.test.Helpers$.<clinit>(Helpers.scala:111)
[error] CalendarSpec$$anonfun$1$$anonfun$apply$1.apply(CalendarSpec.scala:13)
[error] CalendarSpec$$anonfun$1$$anonfun$apply$1.apply(CalendarSpec.scala:10)
[error] play.api.test.Helpers$.play$api$http$HeaderNames$_setter_$ACCESS_CONTROL_ALLOW_ORIGIN_$eq(Ljava/lang/String;)V
[error] play.api.http.HeaderNames$class.$init$(StandardValues.scala:195)
[error] play.api.test.Helpers$.<init>(Helpers.scala:16)
[error] play.api.test.Helpers$.<clinit>(Helpers.scala:111)
[error] CalendarSpec$$anonfun$1$$anonfun$apply$1.apply(CalendarSpec.scala:13)
[error] CalendarSpec$$anonfun$1$$anonfun$apply$1.apply(CalendarSpec.scala:10) 
```

StackOverflow/Google 对此异常一无所知。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:20:01.737

堆栈跟踪让我认为您的类路径中的库不正确或缺失。这就是您看到“Helpers$”的原因。跟踪类构造函数似乎失败的地方。

您可以通过在测试目录中编写一个小应用程序来验证这一点，没有 specs2，但使用 Play2 的帮助程序类，看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:17:56.427

我找到了解决方案 - [https://groups.google.com/forum/#!msg/play-framework/NSN9xfktUks/EwiG1Cc0C9oJ](https://groups.google.com/forum/#!msg/play-framework/NSN9xfktUks/EwiG1Cc0C9oJ)：
`new play.core.StaticApplication(new java.io.File("."))`应该添加到实际启动 Play 应用程序中，以便 DAO 调用可以在测试中工作。