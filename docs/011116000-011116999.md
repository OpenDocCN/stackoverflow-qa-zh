# StackOverflow 问答 11116000-11116999

# c++ - 无法获得加速 OpenMP

> ID：11116003
> 
> 赞同：3
> 
> 时间：2012-06-20T08:54:38.007
> 
> 标签：c++, multithreading, performance, openmp

我正在使用 OpenMP 在 C++ 中编写简单的并行程序。我正在使用 Windows 7 和 Microsoft Visual Studio 2010 Ultimate。我将项目的 Language 属性更改为“Yes/OpenMP”以支持 OpenMP

这里我提供代码：

```
#include <iostream>
#include <omp.h> 

using namespace std;

double sum; 
int i;
int n = 800000000;

int main(int argc, char *argv[])
{               
    omp_set_dynamic(0);
    omp_set_num_threads(4); 

    sum = 0;    
    #pragma omp for reduction(+:sum)
    for (i = 0; i < n; i++)
        sum+= i/(n/10);

    cout<<"sum="<<sum<<endl;        

    return  EXIT_SUCCESS;
} 
```

但是，我无法通过更改`x`in来获得任何加速。`omp_set_num_threads(x);` 不管我是否使用 OpenMp，计算时间都是一样的，大约 7 秒。

有人知道是什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:59:18.183

您的`pragma`陈述缺少说明`parallel`符：

```
#include <iostream>
#include <omp.h> 

using namespace std;

double sum; 
int i;
int n = 800000000;

int main(int argc, char *argv[])
{               
    omp_set_dynamic(0);
    omp_set_num_threads(4); 

    sum = 0;    
    #pragma omp parallel for reduction(+:sum)  //  add "parallel"
    for (i = 0; i < n; i++)
        sum+= i/(n/10);

    cout<<"sum="<<sum<<endl;        

    return  EXIT_SUCCESS;
} 
```

**顺序：**

```
sum=3.6e+009
2.30071 
```

**平行线：**

```
sum=3.6e+009
0.618365 
```

* * *

这是一个使用超线程加速的版本。我不得不将迭代次数增加 10 倍，并将数据类型提高到`long long`：

```
double sum; 
long long i;
long long n = 8000000000;

int main(int argc, char *argv[])
{               
    omp_set_dynamic(0);
    omp_set_num_threads(8); 

    double start = omp_get_wtime();

    sum = 0;    
    #pragma omp parallel for reduction(+:sum)
    for (i = 0; i < n; i++)
        sum+= i/(n/10);

    cout<<"sum="<<sum<<endl;       

    double end = omp_get_wtime(); 
    cout << end - start << endl;
    system("pause");

    return  EXIT_SUCCESS;
} 
```

**主题：1**

```
sum=3.6e+014
13.0541 
```

**主题：2**

```
sum=3.6e+010
6.62345 
```

**主题：4**

```
sum=3.6e+010
3.85687 
```

**主题：8**

```
sum=3.6e+010
3.285 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:19:02.970

除了 Mystical 指出的错误之外，您似乎认为 openMP 可以变魔术。它最多可以**使用您机器上的所有内核**。如果你有 2 个核心，如果你调用`omp_set_num_threads(np)`np>=2 可能会减少 2 个执行时间，但是对于比核心数量大得多的 np，由于并行化开销，代码效率会很低。

Mystical 中的示例显然在 np=4 的至少 4 个内核上运行。

# php - JSON 编码 MySQL 结果然后使用 jQuery 读取

> ID：11116009
> 
> 赞同：0
> 
> 时间：2012-06-20T08:54:58.937
> 
> 标签：php, jquery, json

我有一个数据库表，其中包含一些我想使用 PHP 获取然后使用 JSON 对它们进行编码的行。

目前，我的数据库结构如下：

```
idcomponente | quantidade 
```

在 PHP 中获取值后，我想知道如何使用 JSON（具有多行，使用相同的名称）对它们进行编码，以便我可以使用`jQuery.post()`.

```
$.post('test.php',{id:id},function(data){
    //READ data HERE
}); 
```

提前致谢

**编辑：**

到目前为止，我做了这个：

```
$.post('edit/producomponentes.php',{id:id},function(data){
    console.log(data);
}); 
```

记录这个：

```
[Object { componente="1", quantidade="2"}, Object { componente="3", quantidade="3"}] 
```

现在我怎样才能遍历每一行并获取它们的属性？（data.componente，data.quantidade）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T08:56:20.650

在这里，我试着给你一些想法。

`key => value`使用对在 PHP 中创建关联数组，例如

```
$data = array('id' => 1, 'quat' => 10, 'id' => 2, 'quat' => 20) 
```

然后**[`json_encode()`](http://php.net/manual/en/function.json-encode.php)**像这样发送

```
header('Content-type: application/json');  // don't miss it
echo json_encode(array('data' => $data)); 
```

***在 jQuery 中***

```
$.post('edit/producomponentes.php',{id:id},function(response){
    //READ data HERE.
    console.log(response.data); // you will get a json Object
}, 'json');
     ^-------- set dataType as json, then you don't any extra parse effort 
```

### 根据编辑

```
 $.post('edit/producomponentes.php',{id:id},function(data){
        $.each(data, function(index, value) {
           console.log(value.componente);
           console.log(value.quantidade);
        });
    }, 'json'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T09:10:34.267

在 test.php 中

```
$id = $_POST['id']; // if is 'id' passed to fetch one row
$db = new mysqli(HOST,USER,PASS,DB_NAME);
$q = "SELECT * FROM table WHERE id='$id'";
$result = $db->query($q); 
```

**编辑**正确的标题以获取 json 响应

```
header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Content-type: application/json');
echo json_encode($result->fetch_all(MYSQLI_ASSOC));
$result->close();
$db->close(); 
```

在 JavaScript 中

```
$.post('test.php',{id:id},function(data){
    console.log(data); // data is already a js object
},'json'); // specify the data type you expect 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T08:57:51.103

使用 JSON.parse 将数据作为对象获取

```
var object1 = JSON.parse(data);
alert(object1.property1); 
```

要在 php 上编码，请使用

```
json_encode($result); //assuming you're getting a result set. 
```

编码你的结果集和

```
echo json_encode($result); 
```

将其打印到文档正文，以便您可以使用 jquery 获取结果数据

文档在[这里](http://php.net/manual/en/function.json-encode.php)

您需要对其进行多次测试，耐心等待并在 php 端使用 echo 并在客户端使用 alert() 来检查您的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T08:59:50.707

您可以将每一行放在一个数组中并`json_encode()`在最终数组上运行以获得一个大的 JSON 对象。

参考 - [http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

# gcc - gcc 如何知道要使用哪个库？

> ID：11116012
> 
> 赞同：1
> 
> 时间：2012-06-20T08:55:05.483
> 
> 标签：gcc

在我的电脑中，/usr/lib/gcc/i486-linux-gnu/ 下有两个目录

4.4 & 4.4.3

gcc 如何知道要使用哪个库？是否有配置文件或搜索路径是内置的？

如果使用 4.4.3，我可以更改为 4.4 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:53:58.640

通常，您有一个符号链接`/usr/bin/gcc`指向您要使用的实际 gcc 版本。例如`/usr/bin/gcc`->`/usr/bin/gcc-4.3`
将此符号链接更改为另一个版本的 gcc 以使用它。
可以使用创建符号链接`ln -s gcc gcc-4.3`

# perl - perl 脚本生成随机电子邮件

> ID：11116018
> 
> 赞同：0
> 
> 时间：2012-06-20T08:55:31.503
> 
> 标签：perl, email, random

我需要一个用 perl 编写的脚本，它将生成 100 封随机电子邮件，其中包含 @ 之前的几位数字和之后的静态服务器名称。

示例输出：

```
9374567@someserver.net
94853@someserver.net
83754@someserver.net
4001@someserver.net
0962833@someserver.net
etc. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:01:06.637

```
use strict;
my $i=0;
print int(rand(1000000))."\@email.com\n" while (($i+=1)<101); 
```

你可以在这里玩代码：http: [//ideone.com/D0QN5](http://ideone.com/D0QN5)

或者只是使用单线器（感谢 Phil H 的想法）：

```
print int(rand(1000000))."\@email.com\n" for (1..100); 
```

# ms-access - 将参数从一种形式传递到另一种形式并添加新记录

> ID：11116019
> 
> 赞同：0
> 
> 时间：2012-06-20T08:55:41.757
> 
> 标签：ms-access

我想：

为了能够打开表单，请从控制框中选择一个项目，单击一个按钮以打开一个新表单，并能够输入将先前选择的项目添加到其字段中的新记录。

到目前为止我做了什么：

我制作了两种形式，在两者中都添加了控件，添加了一个命令按钮。我已使用 MS Access 向导添加此代码：

```
Private Sub CommandNext_Click()
  On Error GoTo Err_CommandNext_Click

    Dim stDocName As String
    Dim stLinkCriteria As String

    stDocName = "FormX"
    DoCmd.OpenForm stDocName, , , "[BatchID] = " & Me![ListBatch], acFormAdd

  Exit_CommandNext_Click:

    Exit Sub

  Err_CommandNext_Click:

    MsgBox Err.Description
    Resume Exit_CommandNext_Click

End Sub 
```

第三行是我的。

因此：

*   如果第二个表单**尚未**打开，按下第一个表单上的按钮将打开第二个表单，其中包含空数据（应显示参数值的文本字段为空）。
*   如果第二个表单**已经**打开，按下第一个表单上的按钮会将焦点更改为第二个，它将显示与我选择的参数匹配的旧的现有记录
*   我想打开第二个表单，但不显示任何旧记录，但所选参数出现在指定的文本字段中。

在第二种形式的这两种情况下，*Filter*属性都会填充我使用按钮发送的参数，但这不是我的目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T20:46:41.873

您是否知道 open form 命令的第四个参数是要应用的 where 条件或过滤器？

如果您使用最后一个称为开放参数 (OpenArgs) 的参数，那么您可以在 2nd forms open 事件中编写代码来设置相关列的默认值。

开放式表单代码如下所示：

```
DoCmd.OpenForm stDocName, , , , acFormAdd, , Me![ListBatch] 
```

然后，您可以在此 2nd forms open 事件中放入类似于以下内容的代码：

```
Dim defaultID as Long
defaultID = CLng(Nz(Me.OpenArgs, 0))
If defaultID = 0 Or IsNull(Me.OpenArgs) Then
    Cancel = True
    Exit Sub
End If
Me.TextBoxBatchID.DefaultValue = defaultID 
```

或者，如果您不需要为每条新记录设置 ID，您可以将控件的当前值设置为 defaultID 变量。

```
 Me.TextBoxBatchID = defaultID 
```

请注意，如果 open 参数结果为空或 0，则上面的代码将不会打开表单。

# java - getClass().getResource("/") 在命令行中返回 null

> ID：11116020
> 
> 赞同：4
> 
> 时间：2012-06-20T08:55:44.497
> 
> 标签：java, maven, jar, classpath, classloader

我正在尝试在 /src/main/resources/file.txt 读取我的 maven 项目中的文件。

我正在使用

```
URL url=this.getClass().getResource("/");
String filePath=url.getPath()+"file.txt"; 
```

通过 Eclipse 运行时，url 对象会获得正确的值。

但是，当我打包 jar 并在命令行中运行它时：

```
jar -cp myjar.jar SampleTest 
```

它为 'url' 对象返回 null 并在下一行抛出 NullPointerException。

我已经使用文件浏览器打开了我的 Jar 文件并进行了检查。它在 Jar 内的“/”位置有“file.txt”。

我哪里错了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T08:58:42.440

jar 文件中（通常）没有目录。因此它将返回`null`。

* * *

如果要获取文件，可以直接获取该资源：

```
URL fileUrl = getClass().getResource("/file.txt");
... 
```

或者简单地说：

```
InputStream fileInputStream = getClass().getResourceAsStream("/file.txt"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T09:00:02.250

您应该将该文件移动到您的 CLASSPATH 中并像这样获取它：

```
InputStream is = this.getClass().getResourceAsStream("file.txt"); 
```

# sql - Weblogic 应用程序服务器中的主要 SQLException（XA 相关）

> ID：11116024
> 
> 赞同：1
> 
> 时间：2012-06-20T08:55:51.807
> 
> 标签：sql, jpa, jdbc, weblogic, xa

我们正在使用 Weblogic 应用服务器 (12.1.1.0) 开发软件；我们有一个域和两个应用程序。

我们刚刚从开发数据库升级到预生产数据库（类似于生产），哦，天哪，我们遇到了一个重大问题......
DBA 说数据库运行的是相同的版本 - Oracle 11（我不记得确切的版本）。我们可以看到的唯一区别是 dvlp DB 使用 SID 进行连接，而另外两个使用 service-name。

现在，在我们的域中，我们有两个数据源 X 和 Y。两者都连接到同一个数据库。我们在两者上都使用 XA 驱动程序。我们的两个应用程序都使用相同的“persistence.xml”（和实体），它有两个 PU（持久性单元），每个都使用不同的数据源（X 和 Y）。

问题是这样的：

1.  MDB 开始处理请求。
2.  它使用带有 EntityManagers 的 PU 和带有 DataSource 接口的 Y 数据源，用于获取连接（我们有一些 JDBC 代码）。
3.  它从其他应用程序调用一个 bean。
4.  另一个 bean 尝试使用其中一个 PU（连接到 X 数据源的那个）。
5.  抛出 SQLException：

    `XA error: XAResource.XAER_NOTA start() failed on resource 'x_my_domain': XAER_NOTA : The XID is not valid`

我们在网上搜索了错误，我们发现我们应该将数据源的配置更改为，
`XASetTransactionTimeout=true`
`XATransactionTimeout=0`
但没有奏效。

我们还尝试（很多）调整数据源的配置，最终删除其中一个，因此我们只需要调整其中一个，但没有任何效果。

此外，在反复调整配置时，我们发现了一个不同的 SQLException 并开始弹出，而不是之前的：

```
Internal error: Cannot obtain XAConnection weblogic.common.resourcepool.ResourceDisabledException: Pool X is Suspended, cannot allocate resources to applications 
```

现在这个更令人沮丧，因为我们尝试了一切；重置数据源；删除并重新创建；删除并使用不同的名称重新创建；删除域并使用不同的数据源名称重新创建；使用 dvlp DB 返回；但没什么，例外似乎仍然存在。

我们真的不知道如何解决这个问题，如果不解决这个问题，我们就无法继续前进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T08:29:23.463

我们终于找到了解决问题的方法，但要回答这个问题，我将不得不更多地解释我们的环境；我们实际上有两台托管服务器，每个应用程序都在另一台服务器上运行。管理服务器和其中一个 MS 在一台机器上运行，另一个 MS 在另一台机器上运行（总共两台机器）。

问题是，当我们修改了另一个 MS 也使用的数据源 (X) 时，我们没有重新启动另一个 MS，而只重新启动了数据源。我们猜测这会导致数据源没有更新其他 MS 上的新修改，这导致了我们遇到的错误。

这个问题是由一个相当愚蠢的原因引起的，但很难发现它，因为它在管理服务器 + 第一个 MS 部分的任何环境设置中重复出现，即使在我们自己的 PC 上设置了一个没有定义的管理服务器的机器。它仍然发生的原因是因为包含其他应用程序的机器的地址是写在代码中的（从 XML 配置中读取，但这并没有太大变化）。

好吧，很高兴这一切都结束了。

# java - 如何使用java删除或修改linkedin cookies值？

> ID：11116025
> 
> 赞同：0
> 
> 时间：2012-06-20T08:55:59.193
> 
> 标签：java, cookies, linkedin

如何通过java重置浏览器中的linkedin cookie，我正在使用socialauth登录到linkedin，并且linkedin会话也在应用程序范围之外维护。

所以我想清除浏览器中的linkedin会话，以便不维护会话。

请帮助我如何清除 cookie 或重置 java 中的linkedin cookie。

问候托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:56:02.923

一种解决方案可能是加载[LinkedIn API JavaScript 库](https://developer.linkedin.com/javascript)代码，然后调用该`IN.User.logout(callbackFunction, callbackScope)`函数：

[https://developer.linkedin.com/documents/inauth-inevent-and-inui](https://developer.linkedin.com/documents/inauth-inevent-and-inui)

# c# - 阻止弹出窗口设置在 JavaScript 中关闭弹出窗口时出错

> ID：11116027
> 
> 赞同：0
> 
> 时间：2012-06-20T08:56:04.730
> 
> 标签：c#, javascript, asp.net

我有一个网页，当用户单击按钮（用于计算目的）时，会打开一个弹出窗口（它是一个 aspx 页面作为弹出窗口）。

当用户在弹出窗口上完成计算时，自动弹出窗口关闭。

但是当用户通过浏览器设置阻止弹出窗口时，弹出窗口打开但无法关闭。

即使用户阻止弹出窗口，我也想关闭此弹出窗口。

打开弹出窗口的代码：

```
window.open('frmSelection.aspx?form=' + formname + '&controlname=' + controlname + '&caption=' + caption + '&control1=' + control1 + '&control2=' + control2 + '&control3=' + control3 + '&Filter=' + filter + '', null,
                                    'height=500,width=562,status=yes,toolbar=no,menubar=no,location=center'); 
```

关闭弹窗代码：

```
 protected void dgrdSelection_ItemCommand(object source, DataGridCommandEventArgs e)
        {
            if (e.CommandName == "Select")
            {
                StringBuilder strScriptBuilder = new StringBuilder();
                strScriptBuilder.Append("<script language='javascript' type=text/javascript> ");

                strScriptBuilder.Append(" window.close(); ");
                strScriptBuilder.Append(" </script> ");
} 
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:10:31.850

尝试将[jQuery load()](http://api.jquery.com/load/)与[jQueryUI dialog()](http://jqueryui.com/demos/dialog/)一起使用，就像[这样](http://forum.jquery.com/topic/loading-existing-html-pages-into-a-jquery-dialog-window)。所以弹出窗口拦截器没有问题。

# mysql - 比较 MySQL 中两个表的数据

> ID：11116028
> 
> 赞同：2
> 
> 时间：2012-06-20T08:56:06.947
> 
> 标签：mysql

有两张桌子

## 表格1

```
select * from manage_tcp;
+----+----------+--------+
| id | services | statut |
+----+----------+--------+
|  2 |     1433 | up     |
|  2 |     3389 | up     |
|  3 |     3389 | down   |
|  3 |     1433 | down   |
|  9 |     3389 | up     |
|  8 |     3389 | up     |
|  7 |     1433 | up     |
|  6 |     3389 | up     |
|  5 |     3389 | up     |
|  4 |     3389 | up     |
| 10 |     1433 | up     |
| 11 |     1433 | up     |
| 12 |     3389 | up     |
| 13 |     1433 | up     |
| 14 |     3389 | up     |
| 15 |     1433 | up     |
| 16 |     3389 | up     |
| 17 |     1433 | up     |
| 18 |     3389 | up     |
| 19 |     1433 | up     |
| 20 |     3389 | up     |
| 21 |     1433 | up     |
| 24 |     1433 | up     |
| 23 |     3389 | up     |
| 25 |     3389 | up     |
| 26 |     1433 | up     |
| 29 |     1433 | up     |
| 28 |     3389 | up     |
| 30 |     3389 | up     |
| 31 |       80 | up     |
| 32 |     3389 | up     |
| 33 |       80 | up     |
| 34 |     3389 | up     |
| 35 |       80 | up     |
+----+----------+--------+
34 rows in set (0.00 sec) 
```

## 表 2

```
mysql> select * from manage_host;
+----+------------+-------------+--------+-------+--------------+----------+------+
| id | uptime     | type        | statut | group | thresold_ref | thresold | mail |
+----+------------+-------------+--------+-------+--------------+----------+------+
|  2 |  277248529 | win2003.png | up     |     4 |            1 |        0 | NULL |
|  3 |  277277471 | win2003.png | prob   |     4 |            1 |        0 | NULL |
|  4 |  346159833 | win2003.png | up     |     4 |            1 |        0 | NULL |
|  5 |  930205491 | win2003.png | up     |     5 |            1 |        0 | NULL |
|  6 | 3805663007 | win2003.png | up     |     5 |            1 |        0 | NULL |
|  7 |         -1 | win2003.png | up     |     4 |            1 |        0 | NULL |
|  8 |   29413867 | win2003.png | up     |     5 |            1 |        0 | NULL |
|  9 |  981986401 | win2003.png | up     |     5 |            1 |        0 | NULL |
| 10 |         -1 | win2003.png | up     |     5 |            1 |        0 | NULL |
| 11 |         -1 | win2003.png | up     |     5 |            1 |        0 | NULL |
| 12 | 2230787611 | win2003.png | up     |     7 |            1 |        0 | NULL |
| 13 |         -1 | win2003.png | up     |     7 |            1 |        0 | NULL |
| 14 | 1004161923 | win2003.png | up     |     8 |            1 |        0 | NULL |
| 15 |         -1 | win2003.png | up     |     8 |            1 |        0 | NULL |
| 16 | 1592294954 | win2003.png | up     |     8 |            1 |        0 | NULL |
| 17 |         -1 | win2003.png | up     |     8 |            1 |        0 | NULL |
| 18 | 1449216250 | win2003.png | up     |     4 |            1 |        0 | NULL |
| 19 |         -1 | win2003.png | up     |     4 |            1 |        0 | NULL |
| 20 | 3461945234 | win2003.png | up     |     4 |            1 |        0 | NULL |
| 21 |         -1 | win2003.png | up     |     4 |            1 |        0 | NULL |
| 23 | 3461946968 | win2003.png | up     |     4 |            1 |        0 | NULL |
| 24 |         -1 | win2003.png | up     |     4 |            1 |        0 | NULL |
| 25 | 3462022562 | win2003.png | up     |     4 |            1 |        0 | NULL |
| 26 |         -1 | win2003.png | up     |     4 |            1 |        0 | NULL |
| 35 | 3318333401 | win2003.png | up     |     6 |            1 |        0 |      |
| 28 | 3461879984 | win2003.png | up     |     4 |            1 |        0 | NULL |
| 29 |         -1 | win2003.png | up     |     4 |            1 |        0 | NULL |
| 30 | 1872950109 | win2003.png | up     |     6 |            1 |        0 | NULL |
| 31 | 1872950125 | win2003.png | up     |     6 |            1 |        0 | NULL |
| 32 | 1955232033 | win2003.png | up     |     6 |            1 |        0 | NULL |
| 34 | 3318333401 | win2003.png | up     |     6 |            1 |        0 |      |
| 33 | 1955232049 | win2003.png | up     |     6 |            1 |        0 | NULL |
+----+------------+-------------+--------+-------+--------------+----------+------+
32 rows in set (0.00 sec) 
```

我想比较上面的这两个表，并在表 1 中得到结果，而不是在表 2 中，例如：（**这是我想要的结果**）

```
+----+----------+--------+
| id | services | statut |
+----+----------+--------+
|  2 |     1433 | up     |
|  3 |     3389 | down   |
|  3 |     1433 | down   |
+----+----------+--------+ 
```

我试过了

```
SELECT a.*,b.* 
FROM manage_tcp as a 
LEFT JOIN manage_host as b 
USING(id,statut) 
WHERE b.id is null; 
```

但我得到了

```
+----+----------+--------+
| id | services | statut |
+----+----------+--------+
|  3 |     3389 | down   |
|  3 |     1433 | down   |
+----+----------+--------+ 
```

这不是我想要的。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T09:11:46.710

尝试这个：

```
SELECT m.id, m.services, m.statut 
FROM manage_tcp m
WHERE EXISTS 
(
    SELECT * 
    FROM manage_host mh 
    WHERE mh.id = m.id AND m.statut = mh.statut
) 
```

这将为您提供表格的交集`manage_tcp`以及`manage_host`基于`id`和`status`列。

> 得到表 1 中的结果，而不是表 2 中的结果

如果您需要拖车表之间的差异，请使用`NOT EXISTS`而不是`EXISTS`这样：

```
SELECT m.id, m.services, m.statut 
FROM manage_tcp m
WHERE NOT EXISTS 
(
    SELECT * 
    FROM manage_host mh 
    WHERE mh.id = m.id AND m.statut = mh.statut 
) 
```

通常，这是SQL 标准定义为集合交集和差集运算符的 and 运算符`INTERSECT`的实现。`EXCEPT`但是，不幸的是，大多数数据库系统并没有实现这些运算符。MS SQL Server 确实支持这些运算符，但不支持 MYSQL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T10:17:06.270

试试这个：（假设比较列是**id**和**statut**）

```
SELECT a.id, a.services, a.statut
    FROM manage_tcp a
    WHERE NOT EXISTS(SELECT b.id FROM manage_host b WHERE b.id=a.id AND b.statut=a.statut)
UNION
SELECT a.id, (SELECT services FROM manage_tcp WHERE id=a.id ORDER BY id LIMIT 1), a.statut
    FROM manage_tcp a 
    GROUP BY a.id, a.statut HAVING COUNT(1)>1 
```

第一个查询将产生表 a 中不在表 b 中的结果。

第二个，在 UNION 之后，将为在表 a 中出现两次的 id 生成结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T09:40:01.043

```
SELECT manage_tcp.* FROM 
(
    SELECT a.id,a.statut,a.cnt
    FROM (
        SELECT id, statut, COUNT(1) AS cnt FROM manage_tcp GROUP BY id,statut
    ) AS a
    LEFT JOIN manage_host AS b USING(id, statut)
    GROUP BY a.id, a.statut
    HAVING a.cnt > COUNT(1)
) AS diff
LEFT JOIN manage_tcp USING(id,statut) 
```

或者

```
SELECT a.id,a.statut,a.services,a.cnt
FROM (
    SELECT id,statut,services,COUNT(1) AS cnt FROM manage_tcp GROUP BY id,statut
) AS a
LEFT JOIN manage_host AS b USING(id, statut)
GROUP BY a.id,a.statut
HAVING a.cnt > COUNT(1) 
```

# silverlight - 在单独的项目中引用资源字典

> ID：11116033
> 
> 赞同：3
> 
> 时间：2012-06-20T08:56:26.713
> 
> 标签：silverlight, silverlight-5.0, resourcedictionary

我最近将我的 Silverlight 应用程序拆分为几个较小的项目。

我已将所有包含我的样式的资源字典移到一个单独的项目（“Application.Themes”）中，然后从我的主项目中的 App.xaml 文件中引用这些。

这适用于主项目，但是在这些资源字典中引用样式的所有其他项目在设计器中抛出“对象引用未设置为对象的实例”异常，尽管它们确实编译和运行没有任何问题并且具有正确的样式.

我已经向每个单独的项目添加了一个 App.xaml 文件，它引用了与我的主 App.xaml 文件相同的字典，这没有任何区别。

是否有正确的方法来引用另一个项目中允许使用设计器的资源字典？

**编辑：**

这里有一些更多信息和一些代码片段来演示我遇到的问题

我在这个项目中有一个名为“Themes”的样式项目我有几个定义项目所有样式的字典。

在我的主要 App.xaml 中，我有以下内容

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/Themes;component/Styles/CoreStyles.xaml"/>
            <ResourceDictionary Source="/Themes;component/Styles/Styles.xaml" />
        </ResourceDictionary.MergedDictionaries> 
```

如果我在主项目中引用样式，它们可以正常工作。但是，即使这些项目引用了 Themes 项目，它们也不适用于任何其他项目。

我试图将以下内容放在每个 UserControl 的开头，以便在设计时解析样式，但是它仍然无法解析项目中的样式。

```
<UserControl>
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Themes;component/Styles/CoreStyles.xaml"/>
                <ResourceDictionary Source="/Themes;component/Styles/Styles.xaml" />
            </ResourceDictionary.MergedDictionaries>

    <!-- Additional Control Specific resources -->
    </ResourceDictionary>
</UserControl.Resources>

<!-- The following resources are defined in Styles.XAML and don't resolve at design time  and throw errors -->
<TextBlock Text="Header Test"
           FontFamily="{StaticResource HeaderFontFamily}"
           Foreground="{StaticResource StrongBrush}">

</UserControl> 
```

我的 styles.xaml 看起来与此类似。

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
    xmlns:behaviors="clr-namespace:Minerva.Presentation.Behavior;assembly=Minerva.Presentation"
    xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation">

<SolidColorBrush x:Key="StrongBrush" Color="{Binding Source={StaticResource MetroColors}, Path=Palette.StrongColor}" />
<FontFamily x:Key="HeaderFontFamily">Segoe UI Light, Lucida Sans Unicode, Verdana</FontFamily>

</ResourceDictionary> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:36:59.720

为样式/主题项目创建一个程序集，以便其他项目可以引用它。为了在 app.xaml/page.xaml 中使用 MergedDictionaries 将这些样式合并到应用程序中

```
<Application.Resources>
 <ResourceDictionary>  
   <ResourceDictionary.MergedDictionaries>
         <ResourceDictionary Source="/Assembly;component/Stylesorthemes.xaml"/>             
     </ResourceDictionary.MergedDictionaries>
  </ResourceDictionary>
</Application.Resources> 
```

希望这是有用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:32:21.847

我创建了一个包含资源字典 Theme.xaml 的程序集测试

Theme.xaml 代码

```
<ResourceDictionary
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
<Thickness x:Key="GeneralThickness">10</Thickness>
</ResourceDictionary> 
```

我创建了单独的 silverlight 项目 testreturns

case1.In App.xaml

```
<Application xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
         x:Class="testreturns.App"
         >
<Application.Resources>
    <ResourceDictionary >
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/test;component/Theme.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources>
</Application> 
```

case2.Usercontrol级别

```
<UserControl.Resources>
    <ResourceDictionary >
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/test;component/Theme.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</UserControl.Resources> 
```

并使用它来设置按钮的边框厚度

```
<Button Height="50" Width="150" BorderThickness="{StaticResource GeneralThickness}"/> 
```

在这两种情况下，它都对我有用。这是你想要的吗？您是否在创建程序集时将 theme.xaml 文件属性 BuildAction 设置为 Resource？

# c - 使用c检索linux中的分区信息

> ID：11116039
> 
> 赞同：-4
> 
> 时间：2012-06-20T08:56:53.390
> 
> 标签：c, linux-kernel

我需要程序告诉我信息，例如

> > 分区数。>> 分区类型。>> 该分区的文件系统类型。>> 每个分区的开始和结束大小。Linux PARTED 实用程序的 PRINT 选项显示的输出类型
> > 
> > 分区数。>> 分区类型。>> 该分区的文件系统类型。>> 每个分区的开始和结束大小。Linux PARTED 实用程序的 PRINT 选项显示的输出类型

作为一个例子，输出应该像 dis

编号 开始 结束 大小 类型 文件系统标志 1 32.3kB 10.7GB 10.7GB 主要 reiserfs , , , , , , , , , type=83, , 2 10.7GB 80.0GB 69.3GB 扩展引导, , , , , , lba, , , type=0f, , 5 10.7GB 57.6GB 46.9GB 逻辑 ext3 , , , , , , , , , type=83, , 6 57.6GB 58.8GB 1234MB 逻辑 li​​nux-swap , , , , , , , , , type=82 , , 7 58.8GB 80.0GB 21.2GB 逻辑资源库 , , , , , , , , , type=83, ,

但是通过ac代码。

我知道文件 /proc/partions 和 /sys/block/sda 可以从中获取数据，但我想知道 parted 实用程序的打印选项如何检索 dis 数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:04:09.583

您可以使用 fdisk 源代码来满足此需求： [fdisk.c](ftp://ftp.nluug.nl/pub/os/Linux/distr/slackware/slackware-3.3/source/rescue/fdisk.c) [fdisk.h](http://fossies.org/linux/misc/util-linux-ng-2.18.tar.gz%3aa/util-linux-ng-2.18/fdisk/fdisk.h)

# java - JSF 中的 JAXWS 缓存

> ID：11116044
> 
> 赞同：1
> 
> 时间：2012-06-20T08:57:08.617
> 
> 标签：java, jsf, jax-ws

我们有一个公开大量 Web 服务的应用程序服务器。我们正在运行一个 tomcat，它使用 JSF 应用程序中的那些 web 服务来提供用户界面。假设我们有一个 bean，它有一个方法“getWebservice()”，它返回 jaxws 用来与 web 服务通信的代理类。这使我们能够以最小的努力与 web 服务进行交互：使用 wsimport 生成，然后使用 #{myBean.webservice.myProperty} 等

但是，正如您所看到的，当重用公开的方法时，这将需要*大量的 Web 服务交互。*在我们的用例中，大多数方法都是相当静态的，至少在 @RequestScoped bean 的持续时间内，因此大多数方法的交互应该在调用后被缓存（至少对于一个请求）。

目前我们的设置是在 bean 中创建包装服务，每个包装都做同样的事情：

```
if (methodResponse == null)
     methodResponse = getWebservice().getMethod();
return methodResponse; 
```

您可以看到这很快就会变得非常烦人。有没有办法注释 jaxws 缓存方法？或者我可以基于接口生成我自己的代理类，并以某种方式将其“链接”到 jaxws 使用的代理（并执行通用缓存），还是我可以创建自己的执行缓存的注释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:45:49.000

[`Proxy`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Proxy.html)您可以围绕您的*Web 服务客户端*代理对象创建另一个缓存，并为其提供一个[`InvocationHandler`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/InvocationHandler.html), 来缓存方法调用的结果。

查看[此博客文章](http://www.christianschenk.org/blog/caching-with-dynamic-proxy-classes)以查看完整*的分步*说明并下载示例代码。

# android - 如何使用 BroadcastReceiver 接收传入的短信

> ID：11116045
> 
> 赞同：0
> 
> 时间：2012-06-20T08:57:09.833
> 
> 标签：android

我正在制作扩展广播接收器的二等 SMSReciever。在那我写代码但是在活动类中写什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:17:14.783

请将以下代码写入您的广播接收器类，此处不需要启动器活动。

```
@Override
public void onReceive(Context context, Intent intent) {
     //---get the SMS message passed in---
     Bundle bundle = intent.getExtras();        
     SmsMessage[] msgs = null;
     String str = "";            
     if (bundle != null)
     {
         //---retrieve the SMS message received---
         Object[] pdus = (Object[]) bundle.get("pdus");
         msgs = new SmsMessage[pdus.length];            
         for (int i=0; i<msgs.length; i++){
              msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
              str += "SMS from " + msgs[i].getOriginatingAddress();                     
              str += " :";
              str += msgs[i].getMessageBody().toString();
              str += "\n";        
         }
         //---display the new SMS message---
         Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
     }       

} 
```

并将以下代码写入您的清单文件。

```
<application
        android:icon="@drawable/icon"
        android:label="@string/app_name" >
        <receiver android:name="IncomingSmsCaptureApp" >
            <intent-filter>
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter>
        </receiver>
</application>

<uses-permission android:name="android.permission.RECEIVE_SMS" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:00:36.540

这是要在Activity中编写的代码

```
 receiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            final Bundle bundle = intent.getExtras();        
            String str = "";            
            if (bundle != null) {
                //---retrieve the recent SMS message received---
                final Object[] pdus = (Object[]) bundle.get("pdus");
                final SmsMessage[] msgs = new SmsMessage[pdus.length];

                msgs[0] = SmsMessage.createFromPdu((byte[])pdus[0]);
                str += msgs[0].getMessageBody().toString();
                //---display the new SMS message---

                runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                        final TextView smsContent = (TextView) findViewById(R.id.smsContent);
                        smsContent.setText("Message : " + msgs[0].getMessageBody().toString());

                        final TextView smsFrom = (TextView) findViewById(R.id.smsFrom);
                        smsFrom.setText("SMS from : " + msgs[0].getOriginatingAddress());
                    }
                });
            }
        }
    };
    registerReceiver(receiver, new IntentFilter("android.provider.Telephony.SMS_RECEIVED")); 
```

这是 SMSReceiver 类的代码

```
@Override
public void onReceive(Context context, Intent intent)  {
    //---get the SMS message passed in---
    final Bundle bundle = intent.getExtras();
    String str = "";

    if (bundle != null) {

        //---retrieve the recent SMS message received---
        final Object[] pdus = (Object[]) bundle.get("pdus");
        final SmsMessage[] msgs = new SmsMessage[pdus.length];

        msgs[0] = SmsMessage.createFromPdu((byte[])pdus[0]);
        str += "SMS from " + msgs[0].getOriginatingAddress();
        str += " :";
        str += msgs[0].getMessageBody().toString();
        str += "\n";

        //---display the new SMS message---
        Toast.makeText(context, str, Toast.LENGTH_LONG).show();
    }
} 
```

# mstest - MSTest：从公共目录部署项目的明智方法？

> ID：11116047
> 
> 赞同：2
> 
> 时间：2012-06-20T08:57:16.930
> 
> 标签：mstest, deploymentitem

最近在尝试处理 DeploymentItem 时，我失去了一些头发。

我们有一些本地 dll 的通用目录，许多测试都依赖于这些目录。

对于 C++ 项目，我们使用属性页，其中定义了这些路径。这些甚至可以通过一些手动编辑（因为它们是 MSBuild 文件）导入到 C# 项目中。我仍然不知道如何在测试中使用它们。

不幸的是，DeploymentItemAttribute 不能使用工作表中的属性，但它可以使用环境变量。我希望避免强迫每个人定义全局环境变量......

我在网上看到了各种建议，但还没有真正找到一个简单的解决方案。

有人对此有好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:45:59.880

安德斯的回答是一个很好的解决方案，但就我而言：

1.  我不喜欢将二进制文件保存在源代码树中的想法
2.  许多 dll 没有特定版本，它们会定期更新。

我以某种方式结束了这个解决方案：

首先，我将全局 VC++ 属性页包含在测试项目中。这必须通过`<Project>`在 .csproj 顶部的标记下添加此指令来手动完成：

`<Import Project="$(UserProfile)\AppData\Local\Microsoft\MSBuild\v4.0\Microsoft.Cpp.Win32.user.props" />`

我现在可以访问在我的 C++ 环境中定义 dll 路径的属性/宏。

我那时

1.  在测试项目中添加了一个新的子文件夹，比如说`"NativeDlls"`
2.  将所需的 dll 作为链接添加到 NativeDlls 文件夹中
3.  链接是绝对的，但可以用上面包含的属性表中的宏替换：

`<Content Include="$(MyLibLocation)\GDAL18BIN\gdal18.dll">`

`<Link>NativeDlls\mylib.dll</Link>`

`<CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>`

`</Content>`

然后 dll 就可以部署了：

```
[TestMethod]
[DeploymentItem(@"NativeDlls")]
public void TestSomeStuff()
{
} 
```

而且，正如 Anders 所说：剩下的工作是设置调试/发布和 32/64 条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:22:59.027

如果这些是仅由该项目使用的外部依赖项（不在源代码树之间共享），那么我建议将它们移动到源代码管理中。依赖项应与源一起进行版本控制。理由是您应该能够检查源代码树的修订版（历史中的任何修订版），并且它应该构建。如果您有*不受*源代码控制的二进制依赖项，则在构建特定版本的源代码时，您将无法知道需要哪个版本的依赖项。

如果您可以将依赖项移动到源代码树中（例如 $svnroot/trunk/dependencies），那么您可以使用仅具有相对路径的测试部署。它将在 TeamCity 以及任何开发人员机器上运行。

如果您无法对依赖项进行版本控制，或者由于某些其他原因必须将它们放在存储库之外，那么您可以使用测试部署可以使用的环境变量。[有关示例，](http://blogs.msdn.com/b/rjacobs/archive/2011/07/28/mstest-deploymentitem-and-environment-variables.aspx)请参阅此 msdn 帖子

编辑：在此处移动了有关管理二进制依赖项的评论

对于 csprojs，我只是在项目中有一个 dll 引用，指向源树下 lib 目录中的 dll:s（即对 ..\lib\log4net.dll 的引用）。如果您想为单独的构建引用单独的库，例如 x86/64 或 Debug/Release 不同，那么 VS 不支持它，但 MsBuild 和 csproj 文件支持，因此您可以添加条件引用但您必须编辑 csproj仅当平台为 x86 时手动包含例如 x86 依赖项，依此类推。

# r - 使用 R 中的数据框填充矩阵

> ID：11116049
> 
> 赞同：1
> 
> 时间：2012-06-20T08:57:23.973
> 
> 标签：r, matrix, indexing, dataframe

我有一个空矩阵`m`：

```
m <- matrix(0, nrow = 4, ncol = 2, byrow = TRUE,
            dimnames = list(c("sp1", "sp2", "sp3", "sp4"),
                            c("x", "y"))) 
```

并且需要使用数据框 d 填充​​矩阵

```
d <- data.frame(site = c("x", "y", "u", "v"), 
                species = c("sp1", "sp1", "sp1", "sp1"), 
                freq = c(0.2, 0.3, 0.5, 0.1)) 
```

因此如果`rowname(m)`等于`d[, "species"]`并且`m[, "x"]`等于`d[, "site"]`然后`d[, "freq"]`在矩阵 m 中的正确位置输入，即返回：

```
m <- matrix(c(0.2, 0, 0, 0, 0, 0, 0, 0), nrow = 4, ncol = 2, byrow = TRUE, 
            dimnames = list(c("sp1", "sp2", "sp3", "sp4"),
                            c("x", "y"))) 
```

我试过了：

```
m[d[, c("species", "x")]] <- d[, "freq"] 
```

我怀疑我没有正确地进行数据框索引？有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:39:15.230

这可能不是最好的方法，但这是有效的：

```
for(i in 1:nrow(d)){m[rownames(m)==d[i,2],colnames(m)==d[i,1]] <- d[i,3]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:37:28.020

cast 和 merge 的组合效果很好。

设置数据

```
m <- matrix(0, nrow = 4, ncol = 2, byrow = TRUE,
            dimnames = list(c("sp1", "sp2", "sp3", "sp4"),
                            c("x", "y")))
d <- data.frame(site = c("x", "y", "u", "v"), 
              species = c("sp1", "sp1", "sp1", "sp1"), 
              freq = c(0.2, 0.3, 0.5, 0.1)) 
```

进行计算

```
library(reshape)
dc <- cast(species ~ site, data = d, value = "freq")
md <- as.data.frame(m)
md$species <- rownames(md)
md <- merge(
    md, 
    dc[, c("species", "x")], 
    all.x = TRUE, 
    by = "species", 
    suffixes = c("", ".tmp"))
md$x[!is.na(md$x.tmp)] <- md$x.tmp[!is.na(md$x.tmp)]
md$x.tmp <- NULL 
```

当您将 d$site 转换为包含 rownames(m) 的因子时，您可以简化代码

```
d <- data.frame(
    site = c("x", "y", "u", "v"), 
    species = factor(
        c("sp1", "sp1", "sp1", "sp1"), 
        levels = c("sp1", "sp2", "sp3", "sp4")), 
    freq = c(0.2, 0.3, 0.5, 0.1))
cast(species ~ site, data = d, value = "freq", add.missing = TRUE) 
```

作为奖励，您可以获得 y、u 和 v 的频率。如果您不想要它们，请将它们从先验中删除

```
cast(species ~ site, data = d, value = "freq", add.missing = TRUE, 
    subset = site == "x") 
```

使用填充参数是您想要将 NA 转换为另一个值

```
cast(species ~ site, data = d, value = "freq", add.missing = TRUE, 
    subset = site == "x", fill = 0) 
```

# android - 只要按住一个按钮，如何在android中录制语音？

> ID：11116051
> 
> 赞同：10
> 
> 时间：2012-06-20T08:57:30.517
> 
> 标签：android, voice-recording

只要按住录制按钮，我就想录制声音并将该声音保存到我项目的原始文件夹中。我使用了下面的代码。尽管似乎没有错误，但我无法获得任何输出。可能是什么问题？你有什么建议吗？谢谢，

```
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub

    Runnable mAction = new Runnable() {
        public void run() {
            System.out.println("Performing action...");

            int frequency=11025;
            int channelConfiguration=AudioFormat.CHANNEL_CONFIGURATION_MONO;
            int audioEncoding= AudioFormat.ENCODING_PCM_16BIT;
            File file=new File(Environment.getExternalStorageDirectory(),"raw.pcm");

            try{
                file.createNewFile();
            }catch(IOException e){}

            try{
                OutputStream os=new FileOutputStream(file);
                BufferedOutputStream bos=new BufferedOutputStream(os);
                DataOutputStream dos=new DataOutputStream(bos);

                int bufferSize=AudioRecord.getMinBufferSize(frequency, channelConfiguration,
                        audioEncoding);

                short[] buffer=new short[bufferSize];
                audioRecorder=new AudioRecord(MediaRecorder.AudioSource.MIC,
                        frequency, channelConfiguration, audioEncoding, bufferSize);

                audioRecorder.startRecording();

                isRecording=true;

                while(isRecording){

                    int                                    bufferReadResult=audioRecorder.read(buffer, 0,bufferSize);

                    for(int i=0;i<bufferReadResult;i++){

                        dos.writeShort(buffer[i]);

                    }

                }

                audioRecorder.stop();
                dos.close();

            }catch(Throwable t){}

        }
    };

    switch(event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        if (myHandler != null) return true;
        myHandler = new Handler();
        myHandler.postDelayed(mAction, 500);
        break;
    case MotionEvent.ACTION_UP:

        if (myHandler == null) return true;

        isRecording=false;

        myHandler.removeCallbacks(mAction);
        myHandler = null;
        break;
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-21T05:21:01.707

这是你的答案...

```
import java.io.File;
import java.io.IOException;
import android.app.Activity;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.os.Environment;
import android.view.MotionEvent;
import android.view.View;
import android.widget.Button;

public class AudioOnTouchActivity extends Activity {
    Button b1;
    private static final String AUDIO_RECORDER_FILE_EXT_3GP = ".3gp";
    private static final String AUDIO_RECORDER_FILE_EXT_MP4 = ".mp4";
    private static final String AUDIO_RECORDER_FOLDER = "AudioRecorder";
    private MediaRecorder recorder = null;
    private int currentFormat = 0;
    private int output_formats[] = { MediaRecorder.OutputFormat.MPEG_4,             MediaRecorder.OutputFormat.THREE_GPP };
    private String file_exts[] = { AUDIO_RECORDER_FILE_EXT_MP4, AUDIO_RECORDER_FILE_EXT_3GP }; 
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        b1=(Button)findViewById(R.id.button1);
        b1.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                switch(event.getAction()){
                case MotionEvent.ACTION_DOWN:
                    AppLog.logString("Start Recording");
                    startRecording();
                    return true;
                case MotionEvent.ACTION_UP:
                    AppLog.logString("stop Recording");
                    stopRecording();
                    break;
                }
                return false;
            }
        });
    }

    private String getFilename(){
        String filepath = Environment.getExternalStorageDirectory().getPath();
        File file = new File(filepath,AUDIO_RECORDER_FOLDER);

        if(!file.exists()){
            file.mkdirs();
        }

        return (file.getAbsolutePath() + "/" + System.currentTimeMillis() + file_exts[currentFormat]);
    }

    private void startRecording(){
        recorder = new MediaRecorder();
        recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        recorder.setOutputFormat(output_formats[currentFormat]);
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        recorder.setOutputFile(getFilename());
        recorder.setOnErrorListener(errorListener);
        recorder.setOnInfoListener(infoListener);

        try {
            recorder.prepare();
            recorder.start();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private MediaRecorder.OnErrorListener errorListener = new MediaRecorder.OnErrorListener() {
           @Override
            public void onError(MediaRecorder mr, int what, int extra) {
                AppLog.logString("Error: " + what + ", " + extra);
        }
    };

    private MediaRecorder.OnInfoListener infoListener = new MediaRecorder.OnInfoListener() {
        @Override
        public void onInfo(MediaRecorder mr, int what, int extra) {
                AppLog.logString("Warning: " + what + ", " + extra);
        }
    };

    private void stopRecording(){
        if(null != recorder){
            recorder.stop();
            recorder.reset();
            recorder.release();

            recorder = null;
        }
    }
} 
```

AppLog.java 文件是

```
import android.util.Log;

public class AppLog {
private static final String APP_TAG = "AudioRecorder";

public static int logString(String message){
     return Log.i(APP_TAG,message);
} 
```

xml是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" 
        android:layout_gravity="center"
        android:layout_marginTop="10dp"/>

</LinearLayout> 
```

将这些权限添加到您的清单文件

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>
        <uses-permission android:name="android.permission.RECORD_AUDIO"></uses-permission> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-09-21T00:03:41.540

你可以使用我制作的[RecordView库](https://github.com/3llomi/RecordView)

它易于设置，并且可以模拟与 WhatsApp 相同的行为。

只需添加视图`RecordView`和`RecordButton`

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app="http://schemas.android.com/apk/res-auto"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/parent_layout"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context="com.devlomi.recordview.MainActivity">

<com.devlomi.record_view.RecordView
    android:id="@+id/record_view"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_toLeftOf="@id/record_button"
    app:slide_to_cancel_arrow="@drawable/ic_keyboard_arrow_left"
    app:slide_to_cancel_text="Slide To Cancel"
    app:slide_to_cancel_margin_right="10dp"/>

<com.devlomi.record_view.RecordButton
    android:id="@+id/record_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:background="@drawable/bg_mic"
    android:scaleType="centerInside"
    app:src="@drawable/ic_mic_white"
    /> 
```

然后在你的活动中

```
 RecordView recordView = (RecordView) findViewById(R.id.record_view);
    RecordButton recordButton = (RecordButton) 
     findViewById(R.id.record_button);

    //IMPORTANT
    recordButton.setRecordView(recordView); 
```

最后你可以处理记录状态

*   **onStart**开始录制时
*   **滑动取消时**onCancel****
***   **onFinish**完成记录并返回以毫秒为单位的记录时间*   **onLessThanSecond**当记录时间 <= 1Second

    ```
    recordView.setOnRecordListener(this);

        @Override
        public void onStart() {
            //Start Recording..
            Log.d("RecordView", "onStart");
        }

        @Override
        public void onCancel() {
            //On Swipe To Cancel
            Log.d("RecordView", "onCancel");

        }

        @Override
        public void onFinish(long recordTime) {
            //Stop Recording..
            String time = getHumanTimeText(recordTime);
            Log.d("RecordView", "onFinish");

            Log.d("RecordTime", time);
        }

        @Override
        public void onLessThanSecond() {
            //When the record time is less than One Second
            Log.d("RecordView", "onLessThanSecond");
        } 
    ```** 

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T09:04:50.687

```
save that voice into the raw folder in my project. 
```

**在运行时，您不能将内容保存在 Raw 文件夹中。**

您有 2 个选项可以将其保存在外部存储（如果有）或 getFileDir 即 /data/data/package 目录中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T09:11:49.403

您可以从此代码中获得帮助

**AudioRecorderActivity.java**

```
public class AudioRecorderActivity extends Activity {
    private static final String AUDIO_RECORDER_FILE_EXT_3GP = ".3gp";
    private static final String AUDIO_RECORDER_FILE_EXT_MP4 = ".mp4";
    private static final String AUDIO_RECORDER_FOLDER = "AudioRecorder";
    private MediaRecorder recorder = null;
    private int currentFormat = 0;
    private int output_formats[] = {
        MediaRecorder.OutputFormat.MPEG_4, MediaRecorder.OutputFormat.THREE_GPP
    };
    private String file_exts[] = {
        AUDIO_RECORDER_FILE_EXT_MP4, AUDIO_RECORDER_FILE_EXT_3GP
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        setButtonHandlers();
        enableButtons(false);
        setFormatButtonCaption();
    }

    private void setButtonHandlers() {
        ((Button) findViewById(R.id.btnStart)).setOnClickListener(btnClick);
        ((Button) findViewById(R.id.btnStop)).setOnClickListener(btnClick);
        ((Button) findViewById(R.id.btnFormat)).setOnClickListener(btnClick);
    }

    private void enableButton(int id, boolean isEnable) {
        ((Button) findViewById(id)).setEnabled(isEnable);
    }

    private void enableButtons(boolean isRecording) {
        enableButton(R.id.btnStart, !isRecording);
        enableButton(R.id.btnFormat, !isRecording);
        enableButton(R.id.btnStop, isRecording);
    }

    private void setFormatButtonCaption() {
        ((Button) findViewById(R.id.btnFormat)).setText(getString(R.string.audio_format) + " (" + file_exts[currentFormat] + ")");
    }

    private String getFilename() {
        String filepath = Environment.getExternalStorageDirectory().getPath();
        File file = new File(filepath, AUDIO_RECORDER_FOLDER);

        if (!file.exists()) {
            file.mkdirs();
        }

        return (file.getAbsolutePath() + "/" + System.currentTimeMillis() + file_exts[currentFormat]);
    }

    private void startRecording() {
        recorder = new MediaRecorder();
        recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        recorder.setOutputFormat(output_formats[currentFormat]);
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        recorder.setOutputFile(getFilename());
        recorder.setOnErrorListener(errorListener);
        recorder.setOnInfoListener(infoListener);

        try {
            recorder.prepare();
            recorder.start();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private void stopRecording() {
        if (null != recorder) {
            recorder.stop();
            recorder.reset();
            recorder.release();

            recorder = null;
        }
    }

    private void displayFormatDialog() {
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        String formats[] = {
            "MPEG 4", "3GPP"
        };

        builder.setTitle(getString(R.string.choose_format_title)).setSingleChoiceItems(formats, currentFormat, new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                currentFormat = which;
                setFormatButtonCaption();

                dialog.dismiss();
            }
        }).show();
    }

    private MediaRecorder.OnErrorListener errorListener = new MediaRecorder.OnErrorListener() {@Override
        public void onError(MediaRecorder mr, int what, int extra) {
            AppLog.logString("Error: " + what + ", " + extra);
        }
    };

    private MediaRecorder.OnInfoListener infoListener = new MediaRecorder.OnInfoListener() {@Override
        public void onInfo(MediaRecorder mr, int what, int extra) {
            AppLog.logString("Warning: " + what + ", " + extra);
        }
    };

    private View.OnClickListener btnClick = new View.OnClickListener() {@Override
        public void onClick(View v) {
            switch (v.getId()) {
            case R.id.btnStart:
                {
                    AppLog.logString("Start Recording");

                    enableButtons(true);
                    startRecording();

                    break;
                }
            case R.id.btnStop:
                {
                    AppLog.logString("Start Recording");

                    enableButtons(false);
                    stopRecording();

                    break;
                }
            case R.id.btnFormat:
                {
                    displayFormatDialog();

                    break;
                }
            }
        }
    };
} 
```

**AppLog.java**

```
import android.util.Log;

public class AppLog {
    private static final String APP_TAG = "AudioRecorder";

    public static int logString(String message) {
        return Log.i(APP_TAG, message);
    }
} 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:padding="20dip" >

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:scaleType="fitCenter" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >
        <Button
            android:id="@+id/btnStart"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:text="@string/start_recording" />
        <Button
            android:id="@+id/btnStop"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:text="@string/stop_recording" />
        <Button
            android:id="@+id/btnFormat"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:text="Format (mp4)" />
    </LinearLayout>

</LinearLayout> 
```**

# c# - ASPXScheduler 无法触发更新和删除方法

> ID：11116052
> 
> 赞同：0
> 
> 时间：2012-06-20T08:57:40.097
> 
> 标签：c#, asp.net, devexpress, objectdatasource, scheduler

我有一个`ASPXShceduler`与对象数据源绑定的。它工作正常，但是当我将其更改为过去并尝试删除或更新`ObjectDataSource`方法时不会触发。当我再次更改时，它会起作用...知道问题出在哪里吗？

```
<dxwschs:ASPxScheduler 
                ID="AppointmentsSchaduler" 
                ClientInstanceName="AppointmentsSchaduler"
                runat="server" 
                AppointmentDataSourceID="AppointmentsDataSource" 
                ActiveViewType="TimeLine">
                <Storage EnableReminders="False">
                    <Appointments>
                        <Mappings AppointmentId="ID" Subject="Caption" Description="Note" Label="MarkAsDone"
                            Start="StartDate" End="EndDate" />
                        <labels>
                            <dxwschs:AppointmentLabel Color="255, 194, 190" DisplayName="Not Done" MenuCaption="&amp;Not Done" />
                            <dxwschs:AppointmentLabel Color="193, 244, 156" DisplayName="Done" MenuCaption="&amp;Done"  />
                        </labels>
                    </Appointments>
                </Storage>
            </dxwschs:ASPxScheduler> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:51:16.113

您是否尝试过基于 Devexpress 页面中的演示？这种情况有3个在线演示。他们使用`DemoDataSource`.

[自定义 - 自定义工具提示](http://demos.devexpress.com/ASPxSchedulerDemos/Customization/CustomToolTip.aspx)

[杂项 - 最终用户限制](http://demos.devexpress.com/ASPxSchedulerDemos/Miscellaneous/EndUserRestrictions.aspx)

[模板 - 资源标题](http://demos.devexpress.com/ASPxSchedulerDemos/Templates/ResourceHeaderTemplate.aspx)

Devexpress TV 上也有[4 个视频](http://tv.devexpress.com/#;ASPxScheduler%20Suite.product)，但您应该首先仔细阅读[ASPxScheduler 文档。](http://documentation.devexpress.com/#AspNet/CustomDocument3685)

# html - CSS。与div相关的固定位置

> ID：11116057
> 
> 赞同：0
> 
> 时间：2012-06-20T08:57:53.080
> 
> 标签：html, css

我找到了如何使用 jQuery 修复 div 位置。

这是一个[例子](http://www.wduffy.co.uk/blog/keep-element-in-view-while-scrolling-using-jquery/)。

我可以使用 css 达到相同的效果吗？

**UPD**：我见过这个[解决方案](https://stackoverflow.com/questions/2522114/fixed-position-of-inner-div-related-to-its-container)。如果固定元素不适合窗口，我还希望出现水平窗口滚动条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:23:09.633

您可以在没有酷炫的刘海和动画的情况下实现相同的效果`position: fixed`。固定元素将随之滚动。

至于内容不适合窗口时的水平滚动条，只需为固定元素定义`width: 100%`and `overflow-x: scroll`。

# extjs - ExtJS 4.1 行扩展器和网格。展开指定 item.extjs 网格 Rowexpander

> ID：11116062
> 
> 赞同：1
> 
> 时间：2012-06-20T08:58:22.360
> 
> 标签：extjs, grid

再会！

需要帮助 ExtJS 4.1

有一个组合框。有一个网格。网格插入式行扩展器。ComboBox 和 Grid 从一个数组中获取数据。

**脚本的目的：**在 ComboBox 中选择一个项目后 - 在网格中打开相应的行扩展器。也就是说，用户在 ComboBox «Alcoa Inc» 中选择，并在网格行字段中选择公司名称为 «Alcoa Inc» 的行扩展器。

**问题：**无法翻到表中的记录调用事件expandbody/collapsebody

选择一个 ComboBox'e 后，我得到了所选项目的 id，它对应于 Grid 中的 id 记录，还有如何使用它，有什么吸引力 - 我无法理解。

网格.getView()。getNode (0) - 非常吸引人，但这对我没有帮助。

PS 至此，变量声明为window.grid和window.simpleCombo，以简化调试

剧本：

```
Ext.Loader.setConfig({
    enabled: true
});
Ext.Loader.setPath('Ext.ux', '../examples/ux');

Ext.require([
    'Ext.data.*',
    'Ext.grid.*',
    'Ext.util.*',
    'Ext.ux.RowExpander',
    'Ext.selection.CheckboxModel',
    'Ext.tip.QuickTipManager',
    'Ext.ux.data.PagingMemoryProxy',
    'Ext.toolbar.Paging',
    'Ext.ux.SlidingPager',
    'Ext.form.field.ComboBox',
    'Ext.form.FieldSet'
]);

Ext.onReady(function(){

    Ext.tip.QuickTipManager.init();

    var myData = [
        ['0','3m Co',71.72,'9/1 12:00am'],
        ['1','Alcoa Inc',29.01,'9/1 12:00am'],
        ['2','Altria Group Inc',83.81,'9/1 12:00am'],
        ['3','American Express Company',52.55,'9/1 12:00am'],
        ['4','American International Group, Inc.',64.13,'9/1 12:00am'],
        ['5','AT&T Inc.',31.61,'9/1 12:00am'],
        ['6','Boeing Co.',75.43,'9/1 12:00am'],
        ['7','Caterpillar Inc.',67.27,'9/1 12:00am'],
        ['8','Citigroup, Inc.',49.37,'9/1 12:00am']
    ];

    Ext.define('Company', {
        extend: 'Ext.data.Model',
        idProperty: 'company',
        fields: [
           {name: 'id', type: 'int'},
           {name: 'company', type: 'string'},
           {name: 'price', type: 'float'},
           {name: 'lastChange', type: 'date', dateFormat: 'n/j h:ia'}
        ]        
    });

    Ext.define('State', {
    extend: 'Ext.data.Model',
    fields: [
        {type: 'int', name: 'id'},
        {type: 'string', name: 'name'}
    ]
});

    var store = Ext.create('Ext.data.Store', {
        model: 'Company',
        remoteSort: true,
        pageSize: 3,
        proxy: {
            type: 'pagingmemory',
            data: myData,
            reader: {
                type: 'array'
            }
        }
    });

    // create the data store for combobox
    function createStore() {
    return Ext.create('Ext.data.Store', {
        autoDestroy: true,
        model: 'State',
        data: myData
    });
}

    // create the Grid
    window.grid = Ext.createWidget('gridpanel', {
        title:'Sliding Pager',
        store: store,
        columns: [ {
                id:'company',
                text: 'Company',
                sortable: true,
                dataIndex: 'company',
                flex: 1
            },{
                text: 'Price',
                sortable: true,
                renderer: Ext.util.Format.usMoney,
                dataIndex: 'price',
                width: 75
            },{
                text: 'Last Updated',
                sortable: true,
                dataIndex: 'lastChange',
                width: 75
            }],
        stripeRows: true,
        height:320,
        minHeight: 160,
        width:700,
        frame:true, //+ 
        plugins: [{
            ptype: 'rowexpander',
        id: 'atata',
            rowBodyTpl : [
                '<p>Company: <b>{company}</b></p>',
                '<p><b>$ {price}</b></p>'
            ]
        }],
        collapsible: true,
        animCollapse: false, // end +
        resizable: {
            handles: 's'  
        },
        bbar: Ext.create('Ext.PagingToolbar', {
            pageSize: 3,
            store: store,
            displayInfo: true,
            plugins: Ext.create('Ext.ux.SlidingPager', {})
        })
    });

    grid.render('grid-example');

    function open_some_plus(val) {

    alert(grid.getView().getNode(val));

    }

    // Simple ComboBox using the data store
   window.simpleCombo = Ext.create('Ext.form.field.ComboBox', {
        fieldLabel: 'Select a single state',
        renderTo: 'simpleCombo',
        displayField: 'name',
        width: 700,
        labelWidth: 400,
        store: createStore(),
        queryMode: 'local',
        typeAhead: true
    });

simpleCombo.on('select', function() {
    var v = simpleCombo.getValue();
    var record = simpleCombo.findRecord(simpleCombo.valueField || simpleCombo.displayField, v);
    var index = simpleCombo.store.indexOf(record);
    open_some_plus(index);
});
    store.load();

}); 
```

html代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Sliding Pager Extension Example</title>

    <link rel="stylesheet" type="text/css" href="../resources/css/ext-all.css" />
    <link rel="stylesheet" type="text/css" href="shared/example.css" />

    <style type="text/css">
        body .x-panel {
            margin-bottom:20px;
        }
        .icon-grid {
            background-image:url(../shared/icons/fam/grid.png) !important;
        }
        .add {
            background-image:url(../shared/icons/fam/add.gif) !important;
        }
        .option {
            background-image:url(../shared/icons/fam/plugin.gif) !important;
        }
        .remove {
            background-image:url(../shared/icons/fam/delete.gif) !important;
        }
        .save {
            background-image:url(../shared/icons/save.gif) !important;
        }
    </style>

    <script type="text/javascript" src="../ext-all-debug.js"></script>
    <script type="text/javascript" src="app2.js"></script>
</head>
<body>
 <div id="simpleCombo"></div>
 <div id="mydiv_id"></div>
<br/>
<div id="grid-example"></div>
</body>
</html> 
```

告诉我解决办法，第二天的“墙角”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T00:05:36.700

1.  [opt] 指定`pluginId`而不是`id`
2.  使用 getPlugin() 或`grid.plugins[0]`和“本机” .toggleRow()

    ```
    plugins: [{
        ptype: 'rowexpander',
        pluginId: 'atata',
        rowBodyTpl : [
            '<p>Company: <b>{company}</b></p>',
            '<p><b>$ {price}</b></p>'
        ]
    }],

    function open_some_plus(val) {
        grid.getPlugin('atata').toggleRow(val)
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T06:52:58.480

此代码**有效**：

```
//val = 5 for example
var store = grid.getStore();
var expander = grid.plugins[0];
var page = grid.store.currentPage;
var record = store.getAt(val);
expander.toggleRow(val); 
```

# facebook - 在 Facebook 中弹出“请求权限”时添加备忘录/注释

> ID：11116063
> 
> 赞同：0
> 
> 时间：2012-06-20T08:58:25.463
> 
> 标签：facebook

我想问一些有关在 Facebook 中请求权限的问题...我在 Facebook 中制作了一个应用程序，当有人想要使用这些应用程序时可以弹出权限请求...

我想问的是，在用户单击允许或跳过之前，我可以在弹出对话框中添加一些文本吗？

多谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:33:16.197

编辑您的应用程序设置，“Auth-Dialog”部分。

这是添加徽标、副标题​​和描述的唯一方法。您*不能*在每次登录调用时执行此操作，仅适用于您的应用程序。

使用该设置页面上的“预览当前对话框”来查看它的外观。

# javascript - 已在 parseInt 中使用的字符串 - 再次获取字符串值

> ID：11116065
> 
> 赞同：1
> 
> 时间：2012-06-20T08:58:30.900
> 
> 标签：javascript

简单的问题 -

如何将通过 parseInt 的字符串转换回它的字符串值？

```
var myInt = parseInt('J', 36); //19
var myString = myInt.toString(); //returns "19" I would like it to return "J" 
```

我可以用更长的字符串吗？

```
var myInt = parseInt("Jon o'reiley", 36); //25511 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T09:00:08.177

将字符串转换为 int 时，使用的字符串的基数信息会丢失。解析时被忽略的任何数据也会丢失。

但是，就像`parseInt` `toString`有一个*基本*参数一样：

```
myInt.toString(36); 
```

来自 JS shell 的演示：

```
js> (19).toString(36)
"j"
js> parseInt('abc+foo', 36).toString(36)
"abc" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:00:17.210

你不能。

一旦对象被转换为整数，任何其他信息都会丢失。

`J`如果您希望稍后访问它，则必须将其存储在单独的对象中。

# opengl - 片段着色器使用 Alpha 通道为灰度纹理着色

> ID：11116068
> 
> 赞同：2
> 
> 时间：2012-06-20T08:58:36.797
> 
> 标签：opengl, shader

解决方案：修正错字（glColor -> gl_Color）

我有一个灰度颜色的纹理和一个 0f 或 1f 的 alpha 通道（两者之间没有）。我想以绿色绘制纹理，但仅在 alpha 为 1 时绘制，当 alpha 为 0 时不绘制任何内容。要选择绿色，所以我将 glColor4fv green_opaque 设置为 GLfloat green_opaque .5 1 .5 1

现在，我使用这个片段着色器：

```
const char * fragment_shader_source=
        "uniform sampler2D tex;"
        "void main() {"
        "       vec4 color=texture2D(tex,gl_TexCoord[0].st);"
        "       if (color[3]!=0) {"
#ifdef A
        "               gl_FragColor=color*glColor;"
#else
        "               gl_FragColor=color;"
#endif
        "       } else {"
        "               discard;"
        "       }"
        "}"
; 
```

如果没有 A，着色器会尊重 Alpha 通道，但渲染的纹理显然仍然是灰色的。现在，我定义了 A 并且着色器现在根据需要对纹理进行着色，但是现在忽略了 alpha 通道。

我在这里做错了什么？还是驱动程序/硬件错误？

OpenGL 供应商字符串：Advanced Micro Devices, Inc. OpenGL 渲染器字符串：AMD Radeon HD 6570 OpenGL 版本字符串：4.2.11554 兼容性配置文件上下文 OpenGL 着色语言版本字符串：4.20

回答：

“您是说着色器中的“gl_Color”而不是“glColor”吗？”

正是这个问题 - 顺便说一句，我昨天已经想通了，但由于 java 脚本问题，我还不能发布答案。

添加下划线后，着色器就完成了它应该做的事情。

# asp.net-mvc-3 - MVC3 - Razor：在异常操作上调用错误处理程序两次

> ID：11116077
> 
> 赞同：0
> 
> 时间：2012-06-20T08:59:34.873
> 
> 标签：asp.net-mvc-3, c#-4.0, razor, elmah

我正在开发一个 MVC3 剃须刀应用程序。我创建了一个错误处理功能来记录未处理的异常。如下：

```
public class ErrorHandlingAttribute : HandleErrorAttribute
{
    public override void OnException(ExceptionContext context)
    {           
        base.OnException(context);
        LogException(context);
    }
} 
```

在每个控制器上，我只需要添加错误处理程序，如下所示：

```
[ErrorHandlingAttribute]
public class HomeController : Controller 
```

它记录了错误，但有些如何`OnException`两次击中该方法。然后它会写入重复的日志。

谁能建议我发生了什么。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:49:52.213

您应该删除默认`HandleError`注册在您的`Global.asax`. 您可以将其替换为您的自定义属性。

# android - 如何为 android 应用程序使用安全的内容存储提供商服务器？

> ID：11116079
> 
> 赞同：0
> 
> 时间：2012-06-20T08:59:44.450
> 
> 标签：android, web-services, security, nfc

我想将我的应用程序的机密数据存储在安全的内容提供商服务器中。应用程序处理 NFC 和信用卡。如何在我的应用程序中使用这样的服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:43:05.310

如果您指的是系统范围的服务，它允许您存储受系统保护的应用程序机密（AKA、“钥匙串”、“受保护的存储”等），Android 中没有用于此的公共接口。您可以在最新版本的 Android 上做类似的事情，但不能保证在未来的版本（甚至是高度定制的 Android 版本）上也能正常工作。

# sql - 查找截至该时间的所有记录的列的总和为某个值的时间段

> ID：11116082
> 
> 赞同：3
> 
> 时间：2012-06-20T09:00:01.413
> 
> 标签：sql, postgresql

（我正在使用 PostgreSQL）

我有一个将交易存储到帐户的表。为了这个问题，想象它的结构如下：

```
create table transactions (
    timestamp timestamp with time zone not null,
    amount decimal(6,2) not null
); 
```

任何时间点的余额可以通过以下方式获得：

```
select sum(amount) as balance from transactions where timestamp < 'point in time'; 
```

我怎样才能找到余额（`amount`s 到那个时间点的总和）等于某个值的所有时间段（对我来说最有趣的值是 0，但一般的解决方案会很好）？

我知道涉及非规范化`balance`到自己的列的解决方案。由于其他原因，我不希望这样做，所以我正在寻找使用上述模式的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:43:29.783

试试这个：

```
select sum(amount) over(order by timestamp) as balance, timestamp 
from transactions where timestamp < 'point in time'; 
```

查找全零：

```
with a as
(
   select sum(amount) over(order by timestamp) as balance, timestamp
   from transactions where timestamp < 'point in time'
)
select * from a where balance = 0 
```

# javascript - 为什么我的 javascript 中有一个 $？

> ID：11116086
> 
> 赞同：0
> 
> 时间：2012-06-20T09:00:08.023
> 
> 标签：javascript, jquery

我有以下内容：

```
var doHandler = function (link, form, close) {
    var $form = form;
    var $link = link;
    var dialogTitle = $form.find("#Title").val();
    // some code
} 
```

我想将其更改为：

```
function doTask(??) {
  var dialogTitle = $form.find("#Title").val();
  // some code
}
var doHandler = function (link, form, close) {
    var $form = form;
    var $link = link;
    doTask(??)
} 
```

有人可以解释一下：

*   什么“var $form = form;” 是在做
*   我应该将什么参数传递给 doTask **$form 或 form？**
*   doTask 中的第一行是否应该引用 $form 或 form
*   如果函数在同一个文件中，我需要在调用之前声明函数吗？

抱歉，这真的很令人困惑，有什么区别以及为什么有 $

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T09:02:07.117

这是声明**jQuery 对象的****命名标准**。

 **因此，通过分配一个**$**你让它现在变量将保存例如 jQuery 选择器的结果。

这是一个如何简化流程的简单示例：

[http://jsfiddle.net/YYNeA/16/](http://jsfiddle.net/YYNeA/16/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T09:02:07.167

从您发布的代码中，分配`$form = form`似乎没有做任何事情，但这取决于做什么`// some code`。

变量名前缀的约定`$`用于表示该变量包含一个 jQuery 对象。

如果代码改为阅读

```
var $form = $(form); 
```

那么这将解释一切：`$form`是一个包装的 jQuery 对象`form`（大概是一个普通的 DOM 元素）。

对于您的其他问题：

*   您应该传递`doTask`完成工作所需的任何参数
*   源中是否`doTask`在前面都没有关系`doHandler`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T09:01:46.180

```
var $form = form;
    var $link = link; 
```

这些是定义的变量。您可以声明其中包含 $ 的变量。

$form 是一个变量对象。如果你想让它作为 jquery 对象。用jquery包围。

eg: `$(form)`//现在这是jquery对象

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T09:03:31.373

变量名中的 a 没有什么特别之处`$`，它可以用于任何变量。

但是，正如[@Jon](https://stackoverflow.com/a/11116123/370103)所指出的，前缀 with 的一般约定`$`是声明一个 jQuery 对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T09:02:45.170

该`$`字符只是定义变量时可以使用的有效字符。

`$`当对象本身是 jQuery 对象时，我通常使用附加到我的变量的字符。除此之外，它没有附加任何附加信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T09:04:10.303

`var $form`表示您正在声明一个变量名`$form`

`var $form = form`表示您正在将表单值分配给变量 $form

和你的 $link 一样

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-20T09:07:50.497

该字符`$`可以像任何其他有效字符一样用于变量名，并且包含 a 的变量名`$`在语言中没有特殊含义。

由于表单和链接的变量是局部变量，因此您必须将它们传递给函数才能使用它们。

函数不必在使用它的代码之上定义，只要它位于相同（或前一个）文件或相同（或前一个）脚本块中。

在`doTask`函数中，您既不使用 variable`form`也不使用 variable `$form`，因为它们都是`doHandler`函数的局部变量。您使用发送到函数的参数。此参数也可以命名为`form`or `$form`，但也可以命名为完全不同的名称。

```
var doHandler = function (link, form, close) {
  var $form = form;
  var $link = link;
  doTask($form, $link);
};

function doTask(someForm, someLink) {
  var dialogTitle = someForm.find("#Title").val();
  // some code
} 
```

`link`不过，将参数和复制`form`到局部变量`$link`和似乎毫无意义`$form`。您也可以使用以下参数：

```
var doHandler = function (link, form, close) {
  doTask(form, link);
};

function doTask(someForm, someLink) {
  var dialogTitle = someForm.find("#Title").val();
  // some code
} 
```**

# url - URL 重写不会自动重写

> ID：11116087
> 
> 赞同：1
> 
> 时间：2012-06-20T09:00:08.247
> 
> 标签：url, php

我的网站上有这个简单的重定向，它不会自动重写我的 url，我必须手动输入其他 URL 才能访问它，可能是什么问题，我需要在 php.ini 中启用某些东西，下面是重写规则

```
RewriteEngine On
RewriteRule ^new-page-([^/]*)\.php$ /mypage.php?name=$1 [L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:03:53.323

如果您正在这样做，`.htaccess`您还应该指定`RewriteBase /`. 尝试

```
RewriteEngine On
RewriteBase /
RewriteRule ^new-page-([^/]*)\.php$ mypage.php?name=$1 [L] 
```

这重写`new-page-something.php`为`mypage.php?name=something`内部。

**添加：**

也许你想要这个：

```
RewriteEngine On
RewriteBase /
RewriteRule ^new-page-([^/]*)\.php$ mypage.php?name=$1 [L]
RewriteCond %{THE_REQUEST} ^(GET|POST|HEAD|TRACE)\ /mypage.php
RewriteCond %{QUERY_STRING} name=([^\&]*)
RewriteRule ^mypage.php$ new-page-%1.php? [R,L] 
```

第一个添加的 RewriteCond 检查实际请求是否正在请求`/mypage.php`以防止重定向循环。第二个添加的 RewriteCond 用于匹配查询字符串以在 RewriteRule 中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:04:45.617

检查您的 apache 配置（httpd.conf），看看它是否允许覆盖 htaccess

[http://httpd.apache.org/docs/2.0/howto/htaccess.html](http://httpd.apache.org/docs/2.0/howto/htaccess.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T09:31:45.990

我有以下链接

> www.preparationweb.com/Aptitude/Discussion/index.php?qid=26

我喜欢它显示为

> www.preparationweb.com/Aptitude/Discussion/26

您能否根据提供的链接向我提供要放置在 .htaccess 文件中的代码。我有一个godaddy托管。

# android - 如何解释堆栈跟踪错误报告

> ID：11116093
> 
> 赞同：1
> 
> 时间：2012-06-20T09:00:17.303
> 
> 标签：android

我最近在 android store 上发布了我的应用程序的新版本，并在 2 天后在 android 仪表板中收到了错误报告。我的新功能是添加更多声音，堆栈跟踪似乎表明这是原因。知道下面的堆栈跟踪是什么意思或我该如何解决吗？

```
DALVIK THREADS:
"main" prio=5 tid=1 NATIVE
  | group="main" sCount=1 dsCount=0 s=N obj=0x2aacdf48 self=0xcdd0
  | sysTid=2611 nice=0 sched=0/0 cgrp=unknown handle=1876199472
  at android.media.SoundPool._load(Native Method)
  at android.media.SoundPool.load(SoundPool.java:207)
  at maddy.toddlershapes.d.a((null):-1)
  at maddy.toddlershapes.ToddlerShapes.onCreate((null):-1)
  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
  at android.os.Handler.dispatchMessage(Handler.java:99)
  at android.os.Looper.loop(Looper.java:123)
  at android.app.ActivityThread.main(ActivityThread.java:4627)
  at java.lang.reflect.Method.invokeNative(Native Method)
  at java.lang.reflect.Method.invoke(Method.java:521)
  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
  at dalvik.system.NativeStart.main(Native Method)

"SoundPoolThread" prio=5 tid=8 NATIVE
  | group="main" sCount=1 dsCount=0 s=N obj=0x32d6fef8 self=0x225468
  | sysTid=2618 nice=0 sched=0/0 cgrp=unknown handle=2246400
  at dalvik.system.NativeStart.run(Native Method)

"SoundPool" prio=5 tid=7 NATIVE
  | group="main" sCount=1 dsCount=0 s=N obj=0x32d6fe48 self=0x224a70
  | sysTid=2617 nice=0 sched=0/0 cgrp=unknown handle=2246232
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #2" prio=5 tid=6 NATIVE
  | group="main" sCount=1 dsCount=0 s=N obj=0x32d580c0 self=0x130f18
  | sysTid=2616 nice=0 sched=0/0 cgrp=unknown handle=1230568
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #1" prio=5 tid=5 NATIVE
  | group="main" sCount=1 dsCount=0 s=N obj=0x32d58000 self=0x131f48
  | sysTid=2615 nice=0 sched=0/0 cgrp=unknown handle=1253128
  at dalvik.system.NativeStart.run(Native Method)

"Compiler" daemon prio=5 tid=4 VMWAIT
  | group="system" sCount=1 dsCount=0 s=N obj=0x32d542a0 self=0x131cc8
  | sysTid=2614 nice=0 sched=0/0 cgrp=unknown handle=1249976
  at dalvik.system.NativeStart.run(Native Method)

"Signal Catcher" daemon prio=5 tid=3 RUNNABLE
  | group="system" sCount=0 dsCount=0 s=N obj=0x32d541e8 self=0x131158
  | sysTid=2613 nice=0 sched=0/0 cgrp=unknown handle=1263960
  at dalvik.system.NativeStart.run(Native Method)

"HeapWorker" daemon prio=5 tid=2 VMWAIT
  | group="system" sCount=1 dsCount=0 s=N obj=0x2ff58230 self=0x134818
  | sysTid=2612 nice=0 sched=0/0 cgrp=unknown handle=1276096
  at dalvik.system.NativeStart.run(Native Method) 
```

# python - 在 Ubuntu 12.04 中创建一个 python virtualenv 在本地 venv 包之前访问系统安装的 python 包

> ID：11116094
> 
> 赞同：0
> 
> 时间：2012-06-20T09:00:18.777
> 
> 标签：python, virtualenv, ipython

我正在安装 virtualenv，它似乎在访问本地站点包之前访问了系统站点包。其他一些程序需要 Ipython，所以它是自动安装的。这只是最近才发生的，现在它会找到该版本，而不是在环境中本地找到的版本。

如何告诉环境在全局包之前使用环境中的本地包？您可以在环境中设置 Path 变量吗？

最终成为错误，之前在 .bashrc 中设置了 PYTHON_PATH 变量，因此这是在查看本地目录之前先查看系统构建的目录。有点违背 virtual_env 的目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:18:26.610

如果您使用分发 + pip 来管理依赖项，只需运行`pip -l freeze > requirements.txt`，这将创建所有本地包的依赖项列表。接下来移除当前的virtualenv；重新运行`virtualenv`命令并指定`--no-site-packages`选项。激活您的新环境，最后`pip install -r requirements.txt`从需求文件中下载所有依赖项。

# java - 如何在 Java 和 AWT 中像组件一样在网格中呈现多行数据

> ID：11116098
> 
> 赞同：0
> 
> 时间：2012-06-20T09:00:31.050
> 
> 标签：java, gridview, datagrid

我有几条数据记录（少于 10 条）。每条记录由**几行文本**组成。我想在一种网格中向用户呈现记录，用户可以在其中选择一个记录。

我在考虑 List 组件或 jTable，但我不能让它们显示超过一行的文本。那我应该使用什么组件，或者如何解决这个问题？

在主题中，我建议使用 AWT，因为大小确实很重要，即我想在小程序中使用此功能并希望避免任何额外的库。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:14:10.663

感谢 maksimov 的链接，我找到了如何解决这个问题的示例，以及我以某种方式错过的非常有趣的链接 - [http://docs.oracle.com/javase/tutorial/uiswing/components/html.html](http://docs.oracle.com/javase/tutorial/uiswing/components/html.html)

> 要指定组件的文本具有 HTML 格式，只需将标记放在文本的开头，然后在其余部分使用任何有效的 HTML。下面是在按钮文本中使用 HTML 的示例：

```
button = new JButton("<html><b><u>T</u>wo</b><br>lines</html>"); 
```

在我的情况下，设置行的高度并在要显示的字符串数据之前添加标签就足够了。HTML 标记还允许我使用额外的格式、颜色等，

杰出的，

谢谢马克西莫夫

# ruby-on-rails - 在控制器中设置数据以使其在模型中可用时有哪些优点/缺点？

> ID：11116105
> 
> 赞同：0
> 
> 时间：2012-06-20T09:00:46.420
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, model, agile

我正在使用 Ruby on Rails 3.2.2，我想知道以下代码具有或可能具有的*优点*/*缺点：*

```
class ApplicationController < ActionController::Base
  before_filter :set_current_user_for_models

  private

  def set_current_user_for_models
    User.current_user = User.find(...) # Find the user from cookies.
  end
end

class User < ActiveRecord::Base
  attr_accessible :current_user

  private

  def some_method(user)
    if User.current_user == user
      # Make a thing...
    else
      # Make another thing...
    end
  end
end

class Article < ActiveRecord::Base
  def some_method(user)
    if User.current_user == user
      # Make a thing...
    else
      # Make another thing...
    end
  end
end 
```

你有什么建议吗？您将如何改进代码？

## 在@tokland 对@Wawa Loo 答案的评论后更新

*注意*：主要区别在于`User.current_user`应该在`after_find`, `after_create`,`...`模型回调中更新。像这样的东西：

```
class User < ActiveRecord::Base
  attr_accessible :current_user

  after_initialize :some_method

  private

  def some_method
    if User.current_user == self
      # Make a thing...
    else
      # Make another thing...
    end
  end
end

class Article < ActiveRecord::Base
  after_destroy :some_method

  private

  def some_method
    if User.current_user == self.user
      # Make a thing...
    else
      # Make another thing...
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:11:07.887

你的代码看起来不错。我建议您通读[此 Rails 样式指南](https://github.com/bbatsov/rails-style-guide)，以了解 Rails 开发的概述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:16:48.713

我建议将 存储`current_user`在您的 中`session`，而不是作为 User 类的访问器。该方法`set_current_user_for_models`将随每个请求一起执行。无论如何它如何找到用户 - `User.find(...)`？

# android - UIThread ，无法访问我的 UI 元素

> ID：11116106
> 
> 赞同：0
> 
> 时间：2012-06-20T09:00:53.300
> 
> 标签：android, multithreading, android-layout, user-interface

我正在使用 android-coverflow [http://code.google.com/p/android-coverflow/开发一个coverflow](http://code.google.com/p/android-coverflow/)

项目是从 WebService 加载的，所以我在一个单独的线程中加载日期，如下所示：

```
//(in MyActivityClass onCreate) 

coverFlow1 = (CoverFlow) findViewById(R.id.coverflow); // coverFlow1 is class member 

new Thread(new Runnable() {
            public void run() {

                MyWebServiceClass.getInstance().getCoverFlowData();

                MyActivityClass.this.runOnUiThread(
                        new Runnable() 
                        {
                            public void run() 
                            {

                                        MyActivityClass.getInstance().loadItems();
                            }
                });

            }
          }).start(); 
```

问题是在 loadItems 方法中不能使用coverFlow1（它是 null ，即使我再次加载它：coverFlow1 = (CoverFlow) findViewById(R.id.coverflow);

也许我对 runOnUiThread 的使用不好（我是 Android 开发的新手）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:05:55.030

> 问题是 loadItems 方法中没有coverFlow1

只需添加`coverFlow1`作为方法的参数，不是吗？

```
MyActivityClass.getInstance().loadItems(CoverFlow flow); 
```

你也应该把它称为`MyActivityClass.this.loadItems(CoverFlow flow);`

`getInstance()`没有理由，你真的不需要，这是不正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:11:27.253

当您打电话时，`MyWebServiceClass.getInstance().getCoverFlowData();`您试图获得不正确的静态参考。你需要这个精确的跑步活动，所以你必须添加`this`它。所以它应该看起来像这样`MyWebServiceClass.this.getCoverFlowData();`。

对你的`MyActivityClass.getInstance().loadItems();`方法也这样做

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T09:18:59.420

Coverflow 扩展了画廊。所以你可以创建一个适配器类来加载数据。

将此适配器设置为此coverflow的适配器。

# xpages - 从 Lotus Notes 中 Xpage 上的视图面板访问列标题

> ID：11116109
> 
> 赞同：0
> 
> 时间：2012-06-20T09:01:05.603
> 
> 标签：xpages

有什么方法可以在 Xpage 上获取视图面板的视图列标题的句柄？我有一个视图面板。它有视图列标题和视图列。没有编程方式来处理这些。知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:29:15.423

假设您的视图列标题的 ID 是`viewColumnHeader1`，那么您可以使用以下命令在 SSJS 中获取该列的句柄。

```
var columnHeader:com.ibm.xsp.component.xp.XspViewColumnHeader = getComponent("viewColumnHeader1"); 
```

但我会支持 Simon McLoughlin，也许您可​​以查看 View Column Header 的属性。

# c# - 如何制作依赖于用户的可本地化树视图菜单？

> ID：11116111
> 
> 赞同：0
> 
> 时间：2012-06-20T09:01:07.623
> 
> 标签：c#, sql-server, winforms

我需要开发一个带有树视图菜单的winform，可本地化并在每个用户（基于角色和单用户）的情况下具有不同的选项。

我能想象的唯一解决方案是真的无法维护：

*   从数据库加载和观看的所有内容。
*   用于定义菜单的表（...的子级）。
*   菜单中的每个选项都应该有一个表单名称，以便通过反射查找和打开它。
*   一个表，其中包含与菜单中每个选项相关的每种语言的翻译。
*   具有每个用户和选项（显示或隐藏）权限的表。

有没有更简单的解决方案？？？我真的不想做这种事情 8-)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:17:28.153

我们实际上已经完全实现了您在此处描述的内容（唯一的区别是我们使用的是一种语言）并且效果很好。菜单可以在运行时更改的事实已被多次使用，任何其他实现都需要代码发布。

我不知道你为什么说它不可维护——这个系统已经使用了很多年了，我们几乎不需要花时间在让它全部工作的代码上。

我参与了一个不同的系统，我们在设计时构建菜单，然后在数据库中创建一个包含所有菜单按钮的查找表 - 实际上感觉在那里出错比当一切都在数据库中时容易得多。

# android - 如何在Sqlite Android中使用纬度和经度传递自定义函数以获取距离计算

> ID：11116112
> 
> 赞同：0
> 
> 时间：2012-06-20T09:01:19.837
> 
> 标签：android, sqlite

我正在构建一个 Android 应用程序，它将使用当前位置（纬度、经度）并显示当前位置周围的前 50 个场地，按距离排序。

我们将这些场所存储在 SQLite 数据库中。我们计划将 sqlite DB 与应用程序一起提供。

为了只获取相关的前 50 个最近的地点，我们想要定义一个 db 函数 DIST（计算两点之间的距离）并在我们的查询中使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T09:11:35.257

像这样你可以找到[两点之间的距离。](https://stackoverflow.com/questions/10126404/calculate-distance-between-two-points-directly-in-sqlite)

为了在地图上显示，您可以使用此代码。

[Android MapView 气球](https://github.com/jgilfelt/android-mapviewballoons/tree/master/android-mapviewballoons-example)

![在此处输入图像描述](../Images/4afd0d5f5419aef9adcd0aa3337681ba.png)

# graph - 如何在 GEF 编辑器中使用 prefuse 布局图形

> ID：11116116
> 
> 赞同：1
> 
> 时间：2012-06-20T09:01:52.237
> 
> 标签：graph, data-visualization, eclipse-gef, draw2d, prefuse

是否可以“插入”prefuse 布局（例如[NodeLinkTreeLayout](http://prefuse.org/doc/api/prefuse/action/layout/graph/NodeLinkTreeLayout.html)）以在 GEF 编辑器中布局图形？还是我必须将算法移植到 Draw2D？

# wordpress - Wordpress 自定义 URL 重写

> ID：11116117
> 
> 赞同：0
> 
> 时间：2012-06-20T09:01:55.023
> 
> 标签：wordpress, url, url-rewriting

在 wordpress 中重写 url 我需要一点帮助。

基本上我需要什么：

mydomain.com/mysomewordpresspost

mydomain.com/parentpage/subpage

到

mydomain.com/global/mysomewordpresspost。

mydomain.com/global/subpage

基本上想在 url 以及子页面、类别、帖子等中添加“全局”。

意味着所有长网址都短于“全球”

不想在 url 中显示类别名称，在 url 中显示父页面名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:10:58.530

您可以轻松地做到这一点，只需在您的永久链接设置->自定义结构中添加这样的内容

```
/global/%postname%/ 
```

# javascript - 克隆整个 JavaScript ScriptEngine

> ID：11116120
> 
> 赞同：6
> 
> 时间：2012-06-20T09:02:00.597
> 
> 标签：javascript, java, clone, rhino, scriptengine

[我需要以某种方式深度克隆我的ScriptEngine](http://docs.oracle.com/javase/8/docs/api/javax/script/ScriptEngine.html)对象的整个绑定集。

## 我试过的

*   到目前为止，我已经尝试使用[Cloner 库](http://code.google.com/p/cloning/)来克隆整个 Bindings 结构。如果它有效，那就太好了，因为它可以确保精确的副本，包括私有变量。但这会导致 jvm 堆损坏（jvm 只是崩溃，退出代码为 -1073740940）。有时它不会崩溃，但会发生奇怪的事情，比如`System.out.println()`停止正常工作......

*   我还研究了使用 ScriptEngine 中的 js 代码克隆对象，以便我可以将它们作为 NativeObjects 获取并在一些 java 映射中管理它们。但我发现的所有克隆方法都有缺陷。我想要对象的精确快照。例如，如果两个对象 a 和 b 中的每一个都包含引用同一对象 c 的字段（例如 a.fa 和 b.fb），则当使用（`jQuery.extend()`例如）克隆时，克隆的 a 和 b 将引用不同的克隆c，而不是引用一个相同的克隆。以及许多其他边缘问题。`a.fa``b.fb`

*   我还尝试使用 Cloner 克隆整个 ScriptEngine（不仅是绑定），还尝试使用 Rhino 的 js 引擎并克隆整个范围（而不是捆绑的 ScriptEngine 包装器）。但是堆损坏问题仍然存在。

## 为什么我需要这样做

我需要这个，因为我必须能够将整个 ScriptEngine 绑定的值恢复到以前的某个点。我需要制作绑定的精确快照。

该应用程序是我的博士研究项目的一部分，该项目包括运行带有节点（在 java 中实现）的状态机，这些节点附加了 js 代码。js 代码由最终用户输入，并在运行时进行评估。当无法通过路径到达最终状态时，算法会向后退一步，试图找到替代路径。每向后退一步，它都必须撤消 js 引擎绑定中可能发生的任何更改。

* * *

所有全局变量名称在 js eval-ing 之前都是已知的，并且是对象（用户为节点键入代码，然后（在 java 中）将其组织成具有特定名称模式的 js 对象）。但是它们的内容可以是任何内容，因为这是由用户 js 代码控制的。

所以我想我现在唯一的解决方案是使用 js 代码克隆 js 对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-10T09:52:56.933

除了“边缘情况”之外，jQuery.extend 还可以按照您提到的方式使用。`a` `b`并且它们的克隆都将引用同一个对象`c`。

```
var c = { f:'see' };
var a = { fa: c };
var b = { fb: c };
var cloneA = $.extend({}, a);
var cloneB = $.extend({}, b);
console.log(a.fa === b.fb, cloneA.fa === cloneB.fb, a.fa === cloneB.fb);
// true true true 
```

但是您似乎想克隆所有对象（包括`c`），同时跟踪对象的关系。为此，最好使用对象关系表。

我经常在嵌套的 javascript 对象和 JSON 中看到这一点，因为人们往往会忘记 JSON 纯粹是一种文本格式。JSON 文件中没有实际的 javascript 对象，除了单个字符串 text `instanceof String`。javascript 中没有豆类、泡菜或任何含有大量防腐剂的食物。

在对象关系表中，每个“表”只是一个“平面”对象数组，只有原始值属性和指向表（或另一个表）中其他对象的指针（不是引用）。指针可以只是目标对象的索引。

所以上述对象关系的 JSON 版本可能看起来像

```
{
    "table-1":[
        { "a": { "fa":["table-2",0] } },
        { "b": { "fb":["table-2",0] } }
    ],
    "table-2":[
        { "c": { "name":"see" } },
        { "d": { "name":"dee" } },
        { "e": { "name":"eh.."} }
    ]
} 
```

解析器可能看起来像

```
var tables = JSON.parse(jsonString);
for(var key in tables){
    var table = tables[key];
    for(var i = 0; i < table.length; i++){
        var name = Object.keys(table[i])
        var obj = table[i][name];
        for(var key2 in obj){
            if(obj[key2] instanceof Array && obj[key2][0] in tables){
                var refTable = obj[key2][0];
                var refID    = obj[key2][1];
                var refObj   = tables[refTable][refID];
                var refKey   = Object.keys(refObj)[0];
                obj[key2] = refObj[refKey];
            }
        }
        this[name] = obj;
    }
}

console.log(a.fa === b.fb, b.fb === c);
// true true 
```

我意识到对象关系映射有它的缺点，但是拍摄脚本引擎的快照确实听起来有点疯狂。特别是因为您的意图是能够回忆起之前的每一步，因为这样您就需要为每一步创建一个新快照……这将很快占用大量磁盘空间……除非您只是跟踪快照每个步骤之间的差异，例如 git repo。听起来要实现一个看似简单的“撤消”方法需要做大量的工作。

该死的..想一想，为什么不把每一步都存储在历史文件中呢？然后，如果您需要后退一步，只需在上一步截断历史文件，然后在新环境中再次运行每个步骤。

不确定使用 java 会有多实用（性能方面）。Nodejs（就像今天一样）比任何 Java 脚本引擎都快。事实上，从现在开始我就叫它 ECMAscript。对不起，咆哮，就是这样

Java 很慢，但你已经知道了。
因为它很容易显示，所以速度很快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-11T09:49:23.003

我可以建议一种不同的方法。

*   不要试图克隆 ScriptEngine。它不实现 Serializable/Externalizable 并且 API 不支持克隆。强制克隆的尝试将是可能会在未来的 Java 版本中中断的变通方法。

*   使用[cycle.js](https://github.com/douglascrockford/JSON-js/blob/master/cycle.js)将绑定序列化为 JSON 。它将以形式对对象引用进行编码`{$ref: PATH}`。当您反序列化时，它将恢复引用。

    据我所知，*cycle.js*不会序列化函数，但可以使用 Function.toString() 自己添加函数序列化（见下文和[示例](https://gist.github.com/anvaka/3815296)）

或者，如果使用库不是一种选择，那么实现您自己的序列化以满足您的需求相当简单：

```
var jsonString = JSON.stringify(obj, function(key, val) {
    if (typeof(value) === 'function')
        return val.toString();
    // or do something else with value like detect a reference
    return val
}) 
```

# ios - 从设置用户名和密码首选项登录

> ID：11116124
> 
> 赞同：0
> 
> 时间：2012-06-20T09:02:08.867
> 
> 标签：ios, ipad, webview, settings.bundle

我有一个使用 webView 的应用程序。在网站的主屏幕上，我想使用用户在应用程序设置选项中输入的用户名和密码登录。目前我有这个代码，我在这个论坛上提出的类似问题的解决方案中看到了它。但它不起作用（对另一个人也没有）。

```
-(IBAction)cachepressed:(id)sender{  

    NSString *baseurl=[[NSUserDefaults standardUserDefaults] stringForKey:@"url_preference"];
    NSString *username= [[NSUserDefaults standardUserDefaults] stringForKey:@"name_preference"];
    NSString *password= [[NSUserDefaults standardUserDefaults] stringForKey:@"pswrd_preference"];    
    NSString* content = [NSString stringWithFormat:@"username=%@&password=%@", username, password];
    NSData *data=[content dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
    NSString *postlength=[NSString stringWithFormat:@"%d",[data length]];
    NSString *loginpage= [baseurl stringByAppendingString:@"/index.php?title=Special:UserLogin"];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:loginpage]];
    [request setHTTPMethod:@"POST"];
    [request setValue:postlength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody:data]; 
    NSError *error=nil;
    NSURLResponse *response=nil;
    NSData *result=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
    NSString *HTMLString = [[NSString alloc] initWithData:result encoding:NSUTF8StringEncoding];
    [webView loadHTMLString:HTMLString baseURL:[NSURL URLWithString:loginpage]];    

} 
```

我不太确定以 [request setValue...] 开头的两行代码。有人可以提出解决方案吗？这将是一个很大的帮助。感谢期待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:44:00.250

这在很大程度上取决于如何在网站上进行身份验证。

根据我从您的问题中得出的结论，您发布的代码使用 POST 将名为“用户名”和“密码”的字段的值发送到 index.php?title=Special:UserLogin 页面。

您需要确保所有内容都已相应设置。

**1.你的字段名称在网站上是否相同？**

也许登录表单使用不同的字段名称，而不是用户名和密码。检查源代码，看看输入的名称是否确实是“用户名”和“密码”

**2\. 您的主机是否允许发布来自不同来源的数据？**

我曾经设置过我的，所以如果 POST 请求不是来自我的服务器，则它们不会起作用，因此从 iPad 发布数据将无法正常工作。你也是这种情况吗？

**3\. 登录过程真的是通过向那个页面发布数据来完成的吗？**

也许在网站上，身份验证是在不同的 php 页面上使用 AJAX 完成的，然后您被重定向到 index.php?title=Special:UserLogin，我过去曾见过这种情况。

底线是，在 webview 中进行登录之前，您需要确切地知道在网站上是如何完成登录的。如果我错了，请纠正我，但根据您的帖子，这里似乎并非如此

# php - 注册时获取 Facebook 用户电子邮件

> ID：11116125
> 
> 赞同：-2
> 
> 时间：2012-06-20T09:02:10.147
> 
> 标签：php, facebook, codeigniter, facebook-graph-api

我正在尝试允许用户通过 Facebook 在我的 Web 应用程序上注册。作为我正常注册的一部分，用户必须提供他们的电子邮件地址，我需要将此作为 Facebook 注册的一部分。

我正在使用下面的代码，它工作正常，除了它不返回用户电子邮件地址作为 Facebook 响应的一部分。我知道我需要专门“询问”电子邮件，但我很困惑我在下面的代码中在哪里/如何执行此操作？

*我也知道用户可能会选择不提供他们的电子邮件地址作为流程的一部分，但我能够处理。*

```
 // Grab our facebook details
    $app_id = $this->config->item('fb_app_id');
    $app_secret = $this->config->item('fb_secret_key');
    $my_url = $this->config->item('fb_url');

    session_start();

    if(isset($_REQUEST["code"]))
    {
        $code = $_REQUEST["code"];
    }
    else
    {
        $_SESSION['state'] = md5(uniqid(rand(), TRUE)); //CSRF protection
        $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
        . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
        . $_SESSION['state'];
        echo("<script> top.location.href='" . $dialog_url . "'</script>");
    }

    if ((isset($_REQUEST['state'])) && (($_REQUEST['state'] == $_SESSION['state'])))
    {
        $token_url = "https://graph.facebook.com/oauth/access_token?"
        . "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
        . "&client_secret=" . $app_secret . "&code=" . $code;

        $response = file_get_contents($token_url);
        $params = null;
        parse_str($response, $params);

        $graph_url = "https://graph.facebook.com/me?access_token=". $params['access_token'];

        $user = json_decode(file_get_contents($graph_url));
        if ( ! empty($user))
        {
                            // NO EMAIL HERE?!
            $email = strtolower($user->email);

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:29:41.907

好像以前有人问过这个问题。答案可以在这里找到：

> [Facebook Graph API，如何获取用户电子邮件？](https://stackoverflow.com/questions/3611682/facebook-graph-api-how-to-get-users-email)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:52:44.347

这段代码对我有用......希望它也对你有用

定义（'FACEBOOK_APP_ID'，'YOUR_APP_ID_HERE'）；定义（'FACEBOOK_SECRET'，'YOUR_APP_SECRET_HERE'）；

```
 // No need to change function body
        function parse_signed_request($signed_request, $secret) {
            list($encoded_sig, $payload) = explode('.', $signed_request, 2);

            // decode the data
            $sig = base64_url_decode($encoded_sig);
            $data = json_decode(base64_url_decode($payload), true);

            if (strtoupper($data['algorithm']) !== 'HMAC-SHA256') {
                error_log('Unknown algorithm. Expected HMAC-SHA256');
                return null;
            }

            // check sig
            $expected_sig = hash_hmac('sha256', $payload, $secret, $raw = true);
            if ($sig !== $expected_sig) {
                error_log('Bad Signed JSON signature!');
                return null;
            }

            return $data;
        }

        function base64_url_decode($input) {
            return base64_decode(strtr($input, '-_', '+/'));
        }

        if ($_REQUEST) {
            $response = parse_signed_request($_REQUEST['signed_request'],
                            FACEBOOK_SECRET);
            /*
            echo "<pre>";
            print_r($response);
            echo "</pre>"; // Uncomment this for printing the response Array
            */

            $email = $response["registration"]["email"]; 
```

# firebug - 如何追踪我的萤火虫错误的来源？

> ID：11116126
> 
> 赞同：0
> 
> 时间：2012-06-20T09:02:13.407
> 
> 标签：firebug

例如我的控制台显示以下错误

[https://dl.dropbox.com/u/12337149/firebug.png](https://dl.dropbox.com/u/12337149/firebug.png)

我如何才能将其缩小到特定的代码行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:31:51.533

如果你使用 XHR 使用处理程序。

```
var xhr = new XMLHttpRequest();
xhr.open('GET', "http://www.some.com", true);
xhr.onreadystatechange = handler;
xhr.send(); 

function handler(){

    if (this.readyState == this.DONE)
    {
            if (this.status == 200 && this.responseXML != null )
            {
                var response = xhr.responseXML;

            }
            else{
                console.log("status:" + xhr.status);
                alert("xhr Errors Occured");
            }
    }
    else
        console.log("currently the application is at " + this.readyState);
} 
```

并在处理程序内的 Firebug 中放置断点。

# sql - 在 SQL 中使用 TRIM 更改所有列值

> ID：11116129
> 
> 赞同：1
> 
> 时间：2012-06-20T09:02:37.817
> 
> 标签：sql, sql-server

![在此处输入图像描述](../Images/478a8b9ed3213c43844285ee8cd4a4c8.png)

> 我想修改（删除所有空格） Column "Name" 的所有值。
> 
> 如何使用 TRIM 并修改 Name 的所有列值。
> 
> 例子 ：
> 
> 之前：“rishi.ranka”之后：“rishi.ranka”
> 
> 非常感谢您提前。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T09:04:41.733

使用[LTRIM](http://msdn.microsoft.com/en-us/library/aa933237%28v=sql.80%29.aspx)（左修剪）和[RTRIM](http://msdn.microsoft.com/en-us/library/aa238471%28v=sql.80%29.aspx)（右修剪）的组合：

```
UPDATE [TableName]
SET [Name]=LTRIM(RTRIM([Name])) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T09:16:53.490

如果`name`列的数据类型是`varchar`那么不需要使用`rtrim`函数右侧的空格将被自动修剪。仅使用[LTRIM](http://msdn.microsoft.com/en-us/library/aa933237%28v=sql.80%29.aspx)。

```
update tablename
set    name = ltrim(name)
where  <condition>; 
```

运行这个看看它如何自动修剪正确的空间。

```
DECLARE @mytb table
(
name varchar(20)
);

INSERT INTO @mytb VALUES ('   stackoverflow         ');

SELECT len(name) from @mytb;

SELECT ltrim(name),len(ltrim(name)) from @mytb; 
```

# ruby-on-rails - 用 rails_admin 关联中的文本替换 ID

> ID：11116131
> 
> 赞同：1
> 
> 时间：2012-06-20T09:02:47.213
> 
> 标签：ruby-on-rails, mongoid, rails-admin

当对关联对象（如 has_and_belongs_to）使用 rails_admin 时，它会将对象的 ID 显示为关联。这对用户来说不是什么大问题，所以我想更改它以显示关联对象的文本。

这可以解决吗？

这里有一个小例子：

第一个模型：

```
class Menu
  include Mongoid::Document

  field :date, type: Date

  has_and_belongs_to_many :meal
end 
```

第二种型号：

```
class Meal
  include Mongoid::Document

  field :text, type: String

  has_and_belongs_to_many :menu
end 
```

所以它显示如下：

![所以它显示如下：](../Images/d3f027f6607cd7c6bdb8fd1dd238a213.png)

但我很想看到饭菜的文字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T09:37:57.943

只需定义一个标题方法就可以了：

```
def title
  self.text
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T09:24:33.787

您可以使用[RailsAdmin DSL](https://github.com/sferik/rails_admin/wiki/Railsadmin-DSL) `object_label_method`更改字段呈现给用户的方式。

在你的情况下，这样的事情可能会奏效：

```
RailsAdmin.config do |config|
  config.model Menu do
    list do
      field :meal do
        pretty_value do
          value.text
        end
      end
    end
  end
end 
```

# compiler-construction - Sage 编程特有的问题

> ID：11116132
> 
> 赞同：-2
> 
> 时间：2012-06-20T09:02:47.620
> 
> 标签：compiler-construction, compilation, sage

有这些特定的问题困扰着我和我的朋友。

*   你如何在 sage 中使用 gcc 编译器？
*   如何知道编译是否成功？
*   重新编译源文件时会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:16:50.747

编译对 Sage 的更改就像

*   更改代码
*   跑步`sage -b`
*   尝试您的新代码

请参阅[开发人员指南](http://sagemath.org/doc/developer/walk_through.html#modifying-sage-source-code)，尽管它更侧重于制作补丁。如果它说编译成功，则编译成功。如果该文件只是一个 Python 文件，则将其复制并字节码编译到不同的目录（`local/lib/python/site-packages/sage/`我认为）；否则 Cython 文件首先被翻译成 C，然后编译，然后发送到它所属的地方。

现在，如果您对碰巧在 Sage 中使用 gcc 感兴趣，您必须首先知道它是否已实际构建（而不是使用您的系统 gcc），这仅在 gcc“太旧”或在在某些情况下“太新”，然后调用该二进制文件（我不确定它安装在哪里），然后做你通常做的任何事情。

如果这有点模糊，那是因为您的问题同样模糊；我相信有人会很乐意回答后续问题。例如，许多人创建新的 Cython 文件并使用笔记本对其进行分析。有关所有这些内容的更多信息，请参阅 Sage 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T17:05:06.233

关于 Sage 中的 gcc 编译器：正如 kcrisman 所说，它主要存在，因为已知某些平台上的某些版本的 gcc 存在错误（例如，最近发布的 OS X Lion 上的 Xcode 中的 gcc）。它主要用于构建 Sage 的各个组件：当您运行时`make`，如果 Sage 安装程序确定您的平台需要构建 gcc，它会尽早构建 gcc，然后使用它来构建其他所有内容。

如果 Sage 构建 gcc，那么它也会在（重新）编译 Cython 文件时使用。（如果 Sage 不构建 gcc，则使用系统 gcc。）

当你问“你怎么知道编译是否成功？” 你的意思是Sage本身的编译？最好的办法是

```
$ export SAGE_CHECK=yes
$ make ptestlong 
```

The first line turns on self-tests for every Sage package which has them. The second line builds Sage and then runs its "long" test suite, in parallel. (If you mean compilation of any program using Sage's gcc, this is not really Sage-specific. Sage's installation of gcc should be a fully functional version of gcc.)

# asp.net - IIS8 上的 WCF；*.svc 处理程序映射不起作用

> ID：11116134
> 
> 赞同：287
> 
> 时间：2012-06-20T09:02:50.817
> 
> 标签：asp.net, wcf, iis-8, iis-8.5

我正在尝试在 Windows Server 2012 build 8400 上的 IIS8 中运行 WCF 服务。

安装 Web 角色时，不会像在 Windows Server 2008 中那样找到 WCF 内容（3.51 下）。

安装时缺少 svc 处理程序映射，所以我做了一个：

```
%windir%\Microsoft.NET\Framework\v3.0\WindowsCommunication Foundation\ServiceModelReg.exe –i 
```

现在处理程序映射在那里，但我仍然得到：

```
The resource you are looking for does not have a handler associated with it. 
```

（我删除了静态文件处理程序。）

该站点正在使用经典管道以使用模拟。

* * *

## 回答 #1

> 赞同：579
> 
> 时间：2012-09-20T19:28:27.510

进一步来说：

1.  运行`Server Manager`（在任务栏和开始菜单上）
2.  选择要管理的服务器（可能是本地服务器）
3.  向下滚动到“ `Roles and Features`”部分。
4.  `Add Role or Feature`从任务下拉列表中选择“ ”
5.  在“ `Add Role or Feature Wizard`”对话框中，单击`Features`左侧页面列表中的“ ”。
6.  展开`".Net 3.5"`或`".Net 4.5"`，具体取决于您安装的内容。（如果没有，您可以返回“ `roles`”屏幕添加。
7.  在“ `WCF Services`”下，选中“”复选框`HTTP-Activation`。如果您知道需要它们（tcp、命名管道等），也可以添加非 http 类型。
8.  单击`"Install"`按钮。

* * *

## 回答 #2

> 赞同：227
> 
> 时间：2013-01-23T23:33:31.543

我必须`HTTP Activation`启用`.NET Framework 4.5 Advanced Services`>`WCF Services`

![启用 HTTP 激活](../Images/517c011e4389b728b758a38142094bfa.png)

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2012-08-27T09:17:12.790

在“打开或关闭 Windows 功能”上打开以下选项

a) .Net Framework 3.5 - WCF HTTP 激活和非 Http 激活

b) 全部在 WCF 服务下

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2013-07-30T21:37:33.897

# 带有 IIS8 的 Windows 8

*   打`Windows+X`
*   选择`Programs and Features`（列表中的第一项）
*   `Turn Windows Features on or off`在左侧选择
*   扩张`.NET Framework 4.5 Advanced Services`
*   扩张`WCF Services`
*   使能够`HTTP Activation`

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2014-06-30T09:37:28.060

我现在更喜欢通过脚本来做到这一点

```
REM install the needed Windows IIS features for WCF
dism /Online /Enable-Feature /FeatureName:WAS-WindowsActivationService
dism /Online /Enable-Feature /FeatureName:WAS-ProcessModel
dism /Online /Enable-Feature /FeatureName:WAS-NetFxEnvironment
dism /Online /Enable-Feature /FeatureName:WAS-ConfigurationAPI
dism /Online /Enable-Feature /FeatureName:WCF-HTTP-Activation
dism /Online /Enable-Feature /FeatureName:WCF-HTTP-Activation45

REM Feature Install Complete
pause 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2013-03-11T09:53:32.887

我们设法通过以下方式解决了 Windows Server 2012 下的错误：

1.  从“删除角色和功能向导”中删除 .NET Framework 4.5 功能/ASP.NET 4.5 及其所有相关功能
2.  重新安装已删除的功能。

似乎安装顺序是原因。

此外，请确保您在 WCF 服务下安装了 HTTP 激活。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-01-02T02:53:12.760

对于 Windows 8 机器，没有“服务器管理器”应用程序（至少我找不到它）。

**虽然我能够解决问题**。我不确定我按照哪个顺序执行了以下操作，但看起来以下操作中的一个/几个有帮助：

1.  在“打开或关闭 Windows 功能”上打开以下选项 a) .Net Framework 3.5 - WCF HTTP 激活和非 Http 激活 b) 全部在 WCF 服务下（如该问题的答案之一所述）

2.  在“%windir%\Microsoft.NET\Framework\v3.0\Windows Communication Foundation\”文件夹中执行“ServiceModelReg.exe –i”

3.  通过两个命令注册 ASP.NET 2.0（在文件夹 C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727 中）：

    aspnet_regiis -ga "NT AUTHORITY\NETWORK SERVICE" aspnet_regiis -iru

4.  重新启动 PC...看起来，作为操作 ## 3 和 4 的结果，我的 ASP.NET 配置中出现了问题

5.  **重复动作 #2**

6.  从“程序和功能”安装另外两个选项：.Net Framework 4.5 Advanced Services。我检查了两个子选项：ASP.NET 4.5 和 WCF 服务

7.  重新启动应用程序池。

序列有点疯狂，但这对我有帮助，可能对其他人也有帮助

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-14T17:27:43.280

在 Windows 8 或 Windows Server 2012 上配置 IIS 8 时，安装顺序很重要。

我在配置 IIS 8 时遇到了很多问题，但最后这些链接帮助了我

*   [安装 IIS 8](http://www.iis.net/learn/get-started/whats-new-in-iis-8/iis-80-using-aspnet-35-and-aspnet-45)
*   [配置 WCF](https://gyorgybalassy.wordpress.com/2012/09/24/)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-04-21T15:38:40.803

使用 PowerShell，您可以安装所需的功能：

```
Add-WindowsFeature 'NET-HTTP-Activation' 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-09-06T20:22:09.097

在 Windows 10（客户端）上，您还可以使用

```
Enable-WindowsOptionalFeature -Online -NoRestart -FeatureName WCF-HTTP-Activation45 -All 
```

请注意，这是与服务器 sku 不同的命令

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-10-31T16:50:52.167

它是 .NET 框架的 HTTP 激活功能 Windows 进程激活功能也是必需的

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-10-18T20:05:53.437

这对我来说真的很愚蠢。在此处添加此内容，因为它是 svc 404 问题上更受欢迎的主题之一。

我在我的项目设置'\ Web \ Project URL中粘贴了：

```
http://blah.webservice.local.blahblah.com/Blah.svc 
```

并且由于某种未知的原因（已经这样做了一千次）并没有立即发现 .svc 文件的名称位于末尾。

哦！

我刚刚从我的 WCF 测试客户端粘贴了地址并且没有充分检查它。这在后台所做的是在 .svc 地址上创建一个 IIS 应用程序，而我从 IIS 中什么也得不到。我无法弄清楚我什至无法访问 .svc 文件。

简单的修复，显然，只需在 IIS 中删除应用程序并更改项目 URL。

经过近 20 年的努力，你仍然可以犯小学生错误/菜鸟错误。希望这可以帮助某人。

# ruby-on-rails - rails - activerecord SELECT TOP 1 field_name * FROM table_name

> ID：11116135
> 
> 赞同：3
> 
> 时间：2012-06-20T09:02:50.583
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我有一个这样的sql：

```
SELECT TOP 1 field_name * FROM table_name 
```

我想把它转换成rails中的activerecord。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T09:07:51.717

该代码不起作用？

```
YourModel.select(:field_name).first 
```

或者

```
YourModel.select(:field_name).order('id desc').first 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T09:13:28.747

只需使用`limit(1)`或`first`：

```
Model.select(:field_name).limit(1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-28T19:16:54.473

## 选择（Rails 6+）

从 Rails 6 开始，您可以使用以下内容：

```
YourModel.order(id: :desc).pick(:field_name) 
```

[比pick](https://api.rubyonrails.org/classes/ActiveRecord/Calculations.html#method-i-pick)更有效

```
YourModel.select(:field_name).order('id desc').first 
```

因为，它只会加载实际值，而不是整个记录对象。

有关更多详细信息，请点击此[链接到 docs](https://api.rubyonrails.org/classes/ActiveRecord/Calculations.html#method-i-pick)。

此外，还有[对相应 PR 的引用](https://github.com/rails/rails/pull/31941)。

# java - 来自 PHP 的 SHA256withRSA 签名从 JAVA 验证

> ID：11116143
> 
> 赞同：9
> 
> 时间：2012-06-20T09:03:08.680
> 
> 标签：java, php, cryptography

对于我当前的项目，我必须将签名从 PHP 发送到 Java 应用程序。我现在正在使用 Crypt/RSA 对我的数据进行签名。

对于测试，我使用以下代码仅签署“abc”：

```
$rsa = new Crypt_RSA();
$plaintext = 'abc';

    $rsa->loadKey("MIICXgIBAAKBgQDjh+hNsqJe566JO0Sg7Iq5H1AdkauACdd8QMLp9YNY0HPslVH0
rXaOFo0zgH0Ktu/Ku3lS1lfxbFQAY8b6ywZKvu4eoxlnEwuBwy09CG+3ZiVLBjCj
TZHA/KOkpVLa+tA6KsoP6zv/xI/ACkSCxPGR0q3SiRuhXV/6tacoKxUYnwIDAQAB
AoGBAIC00GOjONYWmFRoglnFdHNjkx4m2KyE5LAUsi1GBBapU+nwTXvq47VcbGNF
u3XkJaC4i9igBv86GApgZp5XWia86On/Lz9NR4fB2EFP6Ydy84GfCDNNvkism4BR
aA+eYdNiQ3Wfyi98ZpUi+rPsoI6Cid4eSkCC4poTUaqzMkiBAkEA9Gn1oIlUEoVI
q/u5Y9vflXRDt95AA9AokJkQj7XTNjsz8ypU8TO6D6ZykpcbK6zjU0UJsQiC3dKj
AgmAR2VzYwJBAO5RETMAyDnR+5g+MtHpwGqGdY4dq0j4y4CsdtOYKWwSTh3VQy+C
eghJoyPRfIpulw2Mk/l+occEI0ohJl0+UJUCQQDSZtjVLwMZwnUx4EvSw/ewL9sP
0Jpo7evNtoaEQDEncUWiYeGnljDowg/FU6FHMtiq2TajmMEXdflvioBMdfAjAkEA
3TB60SbJr/i4Fo6sJm5ZO8W+eAALiTf50VzBERTqZTb8L+5PZFoqn2SROV5mxClu
o5G1idzBlHC/vD7WV7bNnQJAd0FrxaMBurJ4Uv/B8TDP+eeBdB7d9rKw0+TVlcel
cbpIz6BIP6+nmsgy6dbDRnx0eC/MgF2EU0wrCu1DK0PyWA==");
    $rsa->setHash("sha256");
    $signature = $rsa->sign($plaintext);

$signature_encoding = mb_convert_encoding($signature, "UTF-8");
    error_log("signature encoded in UTF-8 :" . $signature_encoding);

    $encoded_sign = base64_encode($signature_encoding);
    error_log("encoded sign for abc: " . $encoded_sign); 
```

我可以从 php 代码验证签名。但是当谈到从 JAVA 进行验证时，我没有成功。这是执行验证操作的java代码：

```
public boolean verify(String signed, String data, PubKey pubKey) throws Exception{

    PublicKey publicKey = jceProvider.generateRSAPublicKeyFromX509(
            base64.decode(pubKey.getEncodedKey())
    );

    byte[] signature = base64.decode(signed);
    byte[] verifier = data.getBytes(Charset.forName("UTF-8"));

    return jceProvider.verify(signature, verifier, publicKey);

}

public class JCEProvider {

    public boolean verify (byte[] signature, byte[] verifier, PublicKey publicKey) throws Exception{

        Signature rsaSignature = Signature.getInstance("SHA256withRSA");

        rsaSignature.initVerify(publicKey);
        rsaSignature.update(verifier);

        return rsaSignature.verify(signature);

    } 
```

我不认为这是因为密钥，我已经可以从 PHP 中验证它，就像我之前所说的那样。关于 PHP 编码或字节流，我有些怀念，但我现在迷路了。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T11:59:23.087

我正在使用像 Whity 已经提到的 openssl。这是我的精简示例。请注意任何字符编码、行尾等。这会导致文本数据的二进制表示发生变化。

**PHP-RSA_SHA256-签名：**

```
<?php

$data = "For my current project I have to send a signature from PHP to Java application. I am using Crypt/RSA right now for signing my data.";

$private_key = <<<EOD
-----BEGIN RSA PRIVATE KEY-----
MIIBOgIBAAJBANDiE2+Xi/WnO+s120NiiJhNyIButVu6zxqlVzz0wy2j4kQVUC4Z
RZD80IY+4wIiX2YxKBZKGnd2TtPkcJ/ljkUCAwEAAQJAL151ZeMKHEU2c1qdRKS9
sTxCcc2pVwoAGVzRccNX16tfmCf8FjxuM3WmLdsPxYoHrwb1LFNxiNk1MXrxjH3R
6QIhAPB7edmcjH4bhMaJBztcbNE1VRCEi/bisAwiPPMq9/2nAiEA3lyc5+f6DEIJ
h1y6BWkdVULDSM+jpi1XiV/DevxuijMCIQCAEPGqHsF+4v7Jj+3HAgh9PU6otj2n
Y79nJtCYmvhoHwIgNDePaS4inApN7omp7WdXyhPZhBmulnGDYvEoGJN66d0CIHra
I2SvDkQ5CmrzkW5qPaE2oO7BSqAhRZxiYpZFb5CI
-----END RSA PRIVATE KEY-----
EOD;

$binary_signature = "";

$algo = "SHA256";
openssl_sign($data, $binary_signature, $private_key, $algo);
print(base64_encode($binary_signature) ."\n");

?> 
```

base64 编码的二进制签名的输出是：

> OnqiWnFQ2nAjOa1S57Du9jDpVr4Wp2nLdMk2FX+/qX1+SAHpVsW1JvQYqQUDlxvbTOE9vg6dlU6i3omR7KipLw==

**JAVA-RSA_SHA256-验证：**

```
import java.security.GeneralSecurityException;
import java.security.KeyFactory;
import java.security.PublicKey;
import java.security.Signature;
import java.security.spec.X509EncodedKeySpec;

import org.apache.commons.codec.binary.Base64;

public class RsaVerify {

    public static void main(String args[]){
        String publicKey = 
//              "-----BEGIN PUBLIC KEY-----"+
                "MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBANDiE2+Xi/WnO+s120NiiJhNyIButVu6"+
                "zxqlVzz0wy2j4kQVUC4ZRZD80IY+4wIiX2YxKBZKGnd2TtPkcJ/ljkUCAwEAAQ==";
//              "-----END PUBLIC KEY-----";

        byte[] data = "For my current project I have to send a signature from PHP to Java application. I am using Crypt/RSA right now for signing my data.".getBytes();
        byte[] signature = Base64.decodeBase64("OnqiWnFQ2nAjOa1S57Du9jDpVr4Wp2nLdMk2FX+/qX1+SAHpVsW1JvQYqQUDlxvbTOE9vg6dlU6i3omR7KipLw==");

        try {
            System.out.println(verify(data, signature, publicKey));
        } catch (GeneralSecurityException e) {
            e.printStackTrace();
        }

    }

    private static boolean verify(byte[] data, byte[] signature, String publicKey) throws GeneralSecurityException{
        X509EncodedKeySpec pubKeySpec = new X509EncodedKeySpec(Base64.decodeBase64(publicKey));
        KeyFactory keyFactory = KeyFactory.getInstance("RSA");
        PublicKey pubKey = keyFactory.generatePublic(pubKeySpec);
        Signature sig = Signature.getInstance("SHA256withRSA");
        sig.initVerify(pubKey);
        sig.update(data);
        return sig.verify(signature);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T13:47:18.777

phpseclib 默认使用更安全的 PSS 填充。Java 可能正在使用 PKCS#1 填充。因此，如果您要走 phpseclib 路线（我建议这样做）……请执行以下操作：

```
$rsa->setSignatureMode(CRYPT_RSA_SIGNATURE_PKCS1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T09:48:28.780

I think u need to improve your PHP solution. According to [http://php.net/manual/en/function.openssl-get-md-methods.php](http://php.net/manual/en/function.openssl-get-md-methods.php) you can use directly [47] => sha256WithRSAEncryption from PHP, probably call openssl from commandline also be possible:

```
openssl dgst -sha256 -sign my.key -out in.txt.sha256 in.txt 
```

# plsqldeveloper - 用于 PL/SQL 的 odbc 连接

> ID：11116144
> 
> 赞同：0
> 
> 时间：2012-06-20T09:03:10.687
> 
> 标签：plsqldeveloper

我正在使用 PL/sql 开发人员创建`table.i`使用过的连接编码，例如

```
Class.forName("oracle.jdbc.driver.OracleDriver");
con = DriverManager.getConnection( "jdbc:oracle:thin:@localhost:1521:test") 
ps = con.createStatement();

SQL_Str="Select * from dhanu_demo where uname like ('" + UName +"')"
rs=ps.executeQuery(SQL_Str);

rs.next();
dbusername=rs.getString(1).toString();
dbpassword=rs.getString(2).toString(); 
```

现在我想通过创建 dsn 名称

控制面板->性能和维护->数据源->系统域->？

我不知道我需要在这里选择哪个驱动程序。谁能告诉我。如何将我的 jsf 页面连接到 PL/SQL 数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:55:10.813

对于您的连接方式，无需创建 dsn。因为它使用了 oracle 的 type 4 驱动程序。此外，在 jsf 中与数据库交互查看以下链接[http://www.mkyong.com/jsf2/jsf-2-0-jdbc-integration-example/](http://www.mkyong.com/jsf2/jsf-2-0-jdbc-integration-example/)

# c# - apns-sharp 作为 IIS 中的 wcf 服务---不工作

> ID：11116146
> 
> 赞同：1
> 
> 时间：2012-06-20T09:03:15.417
> 
> 标签：c#, silverlight, xamarin.ios, apns-sharp

我已经求助于使用**apns-sharp**，虽然它可以完美地作为控制台应用程序和我机器上的基本 httpbinding WCF 服务（使用 wcftestclient 测试），但当我在 IIS 中托管 WCF 服务时，它不会给我任何错误（启用 SSL ）。

由于我使用 monotouch 进​​行开发，因此我使用 slsvcutil 构建了所需的类。我测试了一些异步调用，它们工作正常并返回正确的值。问题是当我打电话发送推送通知时我的应用程序崩溃了。

我像下面的任何其他方法调用一样调用它：

```
 client.PushCompleted += HandlePushCompleted;
        client.PushAsync();

void HandlePushCompleted (object sender, PushCompletedEventArgs e)
    {
        InvokeOnMainThread( delegate{  
        try
        {

            string value = e.Result.ToString();

        }
            catch(Exception ex)
        {
            Console.WriteLine("ERROR IS " + ex.InnerException);
            Console.WriteLine("STACKTRACE IS " + ex.StackTrace);
        }
        } );

    } 
```

这是错误和堆栈跟踪：

```
ERROR IS System.MissingMethodException: No constructor found for 
System.ServiceModel.FaultException`1[[System.ServiceModel.Except   ionDetail
, System.ServiceModel, Version=2.0.5.0, Culture=neutral,     
PublicKeyToken=31bf3856ad364e35]]::.ctor(System.ServiceModel.ExceptionDetail, 
System.ServiceModel.FaultReason,     System.ServiceModel.FaultCode, (unknown)) 
at System.Activator.CreateInstance (System.Type type, BindingFlags bindingAttr, 
System.Reflection.Binder binder, System.Object[] args, 
System.Globalization.CultureInfo culture, System.Object[] 
activationAttributes) [0x00174] 
in /Developer/ MonoTouch/Source/mono/mcs/class/corlib/System/Activator.cs:299 
at System.Activator.CreateInstance (System.Type type, 
System.Object[] args, System.Object[] activationAttributes) [0x00000] 
in /Developer/MonoTouch/Source/mono/mcs/class/corlib/ System/Activator.cs:234 
at System.Activator.CreateInstance (System.Type type, System.Object[] args) 
[0x00000] in 
/Developer/MonoTouch/Source/ mono/mcs/class/corlib/System/Activator.cs:229 
at System.ServiceModel.MonoInternal.ClientRuntimeChannel.Request 
(System.ServiceModel.Description.OperationDescription od, 
System.Object[] parameters) [0x001a6] in 
/Developer/MonoTouch/Source/mono/mcs/class/System.ServiceModel
/System.ServiceModel/ClientRuntimeChannel.cs:557 at 
System.ServiceModel.MonoInternal.ClientRuntimeChannel.DoProcess 
(System.Reflection.MethodBase method, System.String operationName, 
System.Object[] parameters) [0x00038] in 
/Developer/MonoTouch/Source/mono/mcs/class/System.ServiceModel
/System.ServiceModel/ClientRuntimeChannel.cs:502 at 
System.ServiceModel.MonoInternal.ClientRuntimeChannel.Process 
(System.Reflection.MethodBase method, System.String operationName, 
System.Object[] parameters) [0x0001c] in 
/Developer/MonoTouch/Source/mono/mcs/class/System.ServiceModel
/System.ServiceModel/ClientRuntimeChannel.cs:479 
STACKTRACE IS at 
System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary () 
[0x0002d] in /Developer/MonoTouch/Source/mono/mcs/class/System
/System.ComponentModel/AsyncCompletedEventArgs.cs:54 at 
PushCompletedEventArgs.get_Result () [0x00000] in 
/Users/*/Desktop/App/Apps/proxy/Service.cs:273 at 
ElectricityIOSApp.FirstViewController+c_AnonStorey1.<>m_2 () 
[0x00000] in /Users/*/Desktop/App/Apps/AppController.cs:519 
```

非常感谢您的帮助。

# c# - 如何使用角色权限在视图中显示/隐藏内容？

> ID：11116151
> 
> 赞同：1
> 
> 时间：2012-06-20T09:03:37.223
> 
> 标签：c#, asp.net, asp.net-mvc-3, active-directory

我在 ASP .NET MVC3 Web 应用程序中使用 Active Directory 身份验证。

我想控制在视图中呈现哪些组件。我正在考虑的选项是从控制器传递登录用户所属的组，然后使用帮助器对象检查用户是否是所需组的一部分。这是实现这一目标的最佳方法吗？如果是，那么我将如何实现控制器部分？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:15:15.360

如果您使用链接到页面的正确模型（视图模型，而不是您域中的类），这可以实现，如果您遵循这种方法，则视图模型应该包含视图所需的所有信息*，仅此而已*，由于您的视图需要根据当前用户角色知道哪些控件应该可见，因此我将为视图模型中的每个控件创建一个属性，如下所示：

```
public class MyViewModel
{
   public bool ShowMycontrol1 { get; set; }
} 
```

在您的控制器中使用当前用户角色填充此“标志”，最后在视图中检查这些属性以显示或隐藏所需的控件

这只是实现这一目标的一种方法，我相信还有更多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:20:38.293

您可以编写扩展方法。假设您要检查用户是否为管理员。因此，您可以使用这样的扩展方法来做到这一点；

```
public static class AuthHelper
{
    public static bool IsUserAdmin(this HtmlHelper helper)
    {
        return helper.ViewContext.HttpContext.User.IsInRole("Administrator");
    }
} 
```

我希望这有帮助。

# c# - 如何设置sql输出唯一？

> ID：11116153
> 
> 赞同：0
> 
> 时间：2012-06-20T09:03:46.167
> 
> 标签：c#, asp.net, sql

> **可能重复：**
> [使用 INNER JOIN 时出现意外的数据库输出](https://stackoverflow.com/questions/11114987/unexpected-database-output-when-using-inner-join)

你好我有一个这样的sql查询：

```
SELECT DISTINCT r.BEZEICHNUNG AS BEZEICHNUNG, r.ID AS ID, ra.BEZEICHNUNG AS raumBEZEICHNUNG, ra.ID AS raumID 
FROM RAZUORDNUNG rz 
right join RAUMATTRIBUTE ra ON rz.RAUMATTRIBUTE_ID = ra.ID 
right join RAUM r ON rz.RAUM_ID = r.ID
WHERE .... 
```

我将结果写在一个列表中：

```
strasseObject.Add(new RAUM()
                      {
                          RaumName = rdr["BEZEICHNUNG"].ToString(),
                          RaumID = rdr["ID"].ToString(),
                          RaumAttribute = rdr["raumBEZEICHNUNG"].ToString(),
                          RaumAttributeID = rdr["raumID"].ToString()
                      }); 
```

输出看起来像这样

```
<RAUM>
<RaumName>Small Business Room</RaumName>
<RaumID>219</RaumID>
<RaumAttribute>A7OVERHEAD</RaumAttribute>
<RaumAttributeID>168876</RaumAttributeID>
</RAUM>
<RAUM>
<RaumName>Small Business Room</RaumName>
<RaumID>219</RaumID>
<RaumAttribute>Beamer</RaumAttribute>
<RaumAttributeID>168847</RaumAttributeID>
</RAUM>
</ArrayOfRAUM> 
```

您可以看到我得到 2 个具有相同“RaumName”但具有不同“Raumattribute”的结果。我想要这样的输出：

```
<RAUM>
<RaumName>Small Business Room</RaumName>
<RaumID>219</RaumID>
<RaumAttribute>A7OVERHEAD</RaumAttribute>
<RaumAttributeID>168876</RaumAttributeID>
<RaumAttribute>Beamer</RaumAttribute>
<RaumAttributeID>168847</RaumAttributeID>
</RAUM>
</ArrayOfRAUM> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:33:42.980

您是否尝试在另一端开始查询（从 raum 中选择）？

```
SELECT DISTINCT r.BEZEICHNUNG AS BEZEICHNUNG, r.ID AS ID, ra.BEZEICHNUNG AS raumBEZEICHNUNG, ra.ID AS raumID
FROM RAUM r
right join RAZUORDNUNG rz ON rz.RAUM_ID = r.ID
right join RAUMATTRIBUTE ra ON rz.RAUMATTRIBUTE_ID = ra.ID
WHERE .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:44:00.623

从查询中删除`rz.RAUMATTRIBUTE_ID`列，然后运行.... 像

```
SELECT DISTINCT r.BEZEICHNUNG AS BEZEICHNUNG, r.ID AS ID, ra.BEZEICHNUNG AS raumBEZEICHNUNG, ra.ID AS raumID 
FROM RAZUORDNUNG rz 
right join RAUMATTRIBUTE ra ON rz.RAUMATTRIBUTE_ID = ra.ID 
right join RAUM r ON rz.RAUM_ID = r.ID
WHERE .... 
```

**Distinct：**关键字`DISTINCT`可用于仅返回不同（不同）的值。因此， RAUMATTRIBUTE_ID 具有不同的值，这就是它返回 2 行的原因。

# ios - 如何从带有动画的视图中更改视图

> ID：11116154
> 
> 赞同：1
> 
> 时间：2012-06-20T09:03:47.893
> 
> 标签：ios, animation, view

我知道有两种方法，

1.  [self.navigationController pushViewController:siteViewController 动画：YES];

2.  [self presentModalViewController:anotherViewController Animation:YES];

但是，这些方式太无聊了。那么，我该怎么做才能有更多的动画呢？我应该从窗口添加视图？有什么例子吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:49:29.107

看看这些类似的问题：

*   [如何实现具有翻转和缩放的 iPhone 视图过渡动画？](https://stackoverflow.com/questions/1755492/how-to-implement-an-iphone-view-transition-animation-with-both-flipping-and-scal)

*   [两个 UIView 之间的自定义转换](https://stackoverflow.com/questions/5511514/custom-transition-between-two-uiviews/8931492#8931492)

*   [使用 Core Animation 动画视图转换](http://www.cocoabuilder.com/archive/cocoa/220092-animating-view-transitions-with-core-animation-problems-with-basiccocoaanimations-sample.html)

此外，这是一个非常酷的库，可以轻松实现 3D 视图转换： http: [//maniacdev.com/2011/08/open-source-3d-view-transitions-library-include-cloth-and-flip-style-transitions /](http://maniacdev.com/2011/08/open-source-3d-view-transitions-library-including-cloth-and-flip-style-transitions/)

- - - - - - - 更新 - - - - - - -

这也是一个非常简洁的转换库，称为 MPFoldTransition，它允许像这样的转换：

![在此处输入图像描述](../Images/dd0ee564e2c1723864a2ecd1a6136059.png)

你可以[在这里](https://github.com/mpospese/MPFoldTransition)下载。

希望这可以帮助！

# java - 理解递归的流程

> ID：11116157
> 
> 赞同：1
> 
> 时间：2012-06-20T09:04:08.713
> 
> 标签：java, recursion

我知道递归的基础知识，但在给定的代码中，我很难理解流程。
请帮帮我...

```
public ArrayList<String> searchFolders(File fo) {

    if (fo.isDirectory()) {

        String internalNames[] = fo.list();

        for (int i = 0; i < internalNames.length; i++) {
            searchFolders(new File(fo.getAbsolutePath() + "\\"+ internalNames[i]));
            path = fo.getAbsolutePath() + "\\" + internalNames[i];
        }
    }
    if (fo.isFile()) {

        alist.add(fo.toString());

    }

    return alist;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:13:22.070

基本上，这段代码获取目录的所有内容并将它们添加到全局变量`alist`中。

你给它一个目录。如果它是一个文件，那么它将其名称添加到列表中并且该方法返回（文件不能有子文件夹）。

如果它是一个文件夹，那么它会列出文件夹中的所有内容：

```
String internalNames[] = fo.list(); 
```

然后对文件夹中的每个项目执行相同的搜索：

`searchFolders(new File(fo.getAbsolutePath() + "\\"+ internalNames[i]));`

因此，如果您当前正在搜索的项目是一个文件（如果`fo.getAbsolutePath() + "\\"+ internalNames[i]`是一个文件的目录），那么它只是将该文件添加到全局 ArrayList。

否则，如果它是一个文件夹，它就像搜索它刚刚查看的文件夹一样搜索它，并列出该文件夹中的所有文件。

您似乎没有使用变量`path`。

当您返回时`alist`，您将返回迄今为止在文件夹（及其子文件夹）中找到的所有文件。您没有返回文件夹名称，因为什么时候`fo.isDirectory()`，您没有将其名称添加到`alist`.

![在此处输入图像描述](../Images/7b31f48182f5c860d793ea7a7f7cdebf.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:12:39.013

将此递归代码视为树浏览器。searchFolders 方法将扫描当前目录中存在的每个文件/文件夹并列出它，因此您可以说它从根节点获取所有子节点。

获得列表后，它将在根节点的每个子节点中调用自己（再次搜索文件夹和文件），并更新路径以了解它在哪里搜索。

当它找到所有没有要探索的文件夹而只有文件的子节点（甚至下降到 n 级）时，它将停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T09:43:22.810

简而言之，考虑递归退出：

```
if (fo.isFile()) {

    alist.add(fo.toString());

} 
```

当`fo`是文件时，添加文件路径`alist`并退出；如果这个递归退出条件不成立，`fo`是一个目录，然后递归直到递归退出---'fo'是一个文件。

所以这个`searchFolders`方法查找文件夹和子文件夹中的每个文件，将它们的名称作为列表返回！

# visual-studio-2008 - 使用我们刚刚起步的 TeamCity / MSBuild 设置为后续步骤提供建议

> ID：11116159
> 
> 赞同：2
> 
> 时间：2012-06-20T09:04:10.110
> 
> 标签：visual-studio-2008, msbuild, continuous-integration, teamcity

我们现在已经在 TeamCity (6.5) 和 MSBuild 中建立了合理的早期阶段。到目前为止，只有一个解决方案是以这种方式构建的，直到我们在复制之前让事情按照我们想要的方式工作，所以......基本上：

*   一个由两个构建调用的解决方案——一个在签入时检查构建是否被破坏的 CI 构建，以及一个为测试创建工件的测试构建。
*   程序集版本号来自单个 VersionInfo.cs 文件（这是个好主意吗？），该文件是解决方案中所有项目中的链接文件。此方法在此处详细介绍：http: [//www.codeproject.com/Articles/328977/The-Right-Way-to-Version-Your-Assemblies](http://www.codeproject.com/Articles/328977/The-Right-Way-to-Version-Your-Assemblies)
*   两个构建的构建步骤目前仅查看解决方案文件，MSBuild 作为构建运行器

接下来我想做什么：

1.  版本号为 Major.Minor.Release.Build Number。因此我需要将最后一项设置为 TeamCity 内部版本号
2.  仅在测试版本中：将工件复制到一个单独的位置，并使用版本号的名称创建一个文件夹

所以，最后的问题..我需要

1.  使用预构建步骤创建单独的构建项目以修改 VersionInfo.cs AssemblyFileVersion 以反映构建号
2.  在新的构建项目中创建一个构建后步骤，用于将工件复制到单独目录中的新目录中？

我正在努力解决这个问题，因为两个构建都使用相同的解决方案文件，所以 CI 构建如何不会选择这些项目，以及我是否应该创建一个新的构建文件。如果是这样，我是否保留现有的解决方案文件？

你可能会说我有点困惑......非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T19:40:43.463

您不需要创建另一个构建配置来修改版本号。

TeamCity 具有内置的[AssemblyInfo Patcher](http://confluence.jetbrains.net/display/TCD65/AssemblyInfo+Patcher) [构建功能](http://confluence.jetbrains.net/display/TCD65/Adding+Build+Features)，可用于您现有的 CI 构建配置。它将无需自己进行任何程序集信息版本控制，因为它会在执行构建之前将当前构建版本（在 TC 中为该构建配置定义）应用于位于检出目录中的所有 AssemblyInfo.cs 文件。您对单个共享的 VersionInfo.cs 文件所做的并不是一件坏事，在这种情况下只是不必要的（当然，除非您使用它来共享其他 AssemblyInfo 信息，如公司、商标、版权等）。

用于存储工件的几个选项。

*   您可以从 TeamCity[数据目录](http://confluence.jetbrains.net/display/TCD65/TeamCity+Data+Directory)中检索构建工件。要复制到此目录的工件在每个构建配置的常规设置页面上定义。有关详细信息，请参阅[构建工件页面](http://confluence.jetbrains.net/display/TCD65/Build+Artifact)。

*   创建一个运行自定义脚本（msbuild、nant、cmd 行等）的构建步骤，以根据您的要求进行复制。

*   我更喜欢的另一个选择是将工件推回到源代码控制中，在那里它们可以由其他构建直接检出。

（所有链接都指向 TeamCity 6.5.x 文档）

您不需要两个构建配置来实现您正在做的事情；您可以将一个与多个构建步骤一起使用。将解决方案构建和工件集合分解为两个单独的配置似乎并不合乎逻辑。

# android - 按下后退按钮导航到菜单

> ID：11116162
> 
> 赞同：2
> 
> 时间：2012-06-20T09:04:30.270
> 
> 标签：android, android-activity

我从以下位置导航：

*   `Main activity`至`Activity 2`
*   `Activity 2`至`Activity 3`
*   `Activity 3`至`Activity 4`

通过`Intent`.

我还创建了菜单，以便用户可以直接从 导航`Activity 4`到`Main activity`。
但是在使用菜单从`Activity 4`到导航之后，当我按下返回时，它会带我去而不是**退出应用程序**。`Main activity``Activity 3`

 **我试过了：

```
@Override
public void onBackPressed() {
    super.onBackPressed();
    MainActivity.this.finish();
} 
```

但没有收获。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T09:09:21.003

Just try this code when you navigate from 4th Activity to Main Activity.

```
Intent inMain=new Intent(Activity4.this, MainActivity.class);
inMain.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(inMain); 
```

Note:

This code in your case, clears the previous activities and launches the main activity with no activity in the backstack.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T09:09:16.847

You can set flag `Intent.FLAG_ACTIVITY_CLEAR_TOP` to finish all the intermediate activities and your called activity will come to top of the activity stack.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T09:07:36.003

根据您的意图使用标志 Intent.FLAG_ACTIVITY_CLEAR_TOP。有关更多详细信息 -

[FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T09:09:49.810

call startActivity Method using clear top flag

```
 startActivity(new Intent(this, UI.class)
  .setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T09:14:26.053

当你回到`MainActivity`你需要使用`Intent.FLAG_ACTIVITY_CLEAR_TOP`你的`Intent`. `goHome`这是您可以在以下方法中使用的方法示例`Activity`：

```
public void goHome ()
{
    Intent homeIntent = new Intent();
    homeIntent.setClass(this, MainActivity.class);
    homeIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(homeIntent);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-20T09:12:08.760

您需要更仔细地考虑您的“[后台堆栈”。](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)

究竟发生了什么，您的后台堆栈填充如下：

```
Main activity -> Activity 2 -> Activity 3 -> Activity 4 
```

然后从`Activity 4`你开始你的`Main Activity`. 所以你的堆栈变成：

```
Main activity -> Activity 2 -> Activity 3 -> Main Activity 
```

因此，当您向后按时，您会降落在`Activity 3`.

解决方案：

当您离开它们时，请随时调用`finish()`。`Activity`或使用`Intent.FLAG_ACTIVITY_CLEAR_TOP`清除所有中间`Activities`。

有关[Intent.FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)的更多信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-20T09:10:06.200

In activity 2 and 3, after calling `startActivity(intent)`, call `this.finish()`. This will also be one solution.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-20T09:13:12.180

当您转到下一个活动时完成上一个活动意味着`finish();`在`startactivity(intent);`下面编写代码以从第四个活动的按钮单击事件开始第一个活动。

```
Intent in1=new Intent(Act4.this, Act1.class);
startActivity(in1);
finish(); 
```**

# sql-server-2008 - 如何通过zend框架执行存储过程

> ID：11116163
> 
> 赞同：1
> 
> 时间：2012-06-20T09:04:32.287
> 
> 标签：sql-server-2008, zend-framework, stored-procedures

我在存储的 .sql 文件中有一个 SP。有什么办法让我可以用 ZF 执行它吗？我没有任何（？）在里面。

我的代码是：

```
USE [PIS]
GO

/****** Object:  StoredProcedure [dbo].[version]    Script Date: 11/24/2011 12:47:09 ******/
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[version]') AND     type in (N'P', N'PC'))
DROP PROCEDURE [dbo].[version]
GO

USE [PIS]
GO

/****** Object:  StoredProcedure [dbo].[version]    Script Date: 11/24/2011 12:47:09             ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE procedure [dbo].[version]
with encryption

as
select '2.2.213'
GO 
```

顺便说一句，我正在使用 sqlsrv 数据库驱动程序和 SQLSERVER 2008 和 PHP5

# c# - OpenXML 电子表格中的单元格样式 (SpreadsheetML)

> ID：11116176
> 
> 赞同：47
> 
> 时间：2012-06-20T09:05:32.583
> 
> 标签：c#, excel, openxml, spreadsheetml

我使用 OpenXML SDK 在 C# 中生成了一个 .xlsx 电子表格，但不知道如何使单元格样式正常工作。我一直在研究 Excel 生成的文件，但不太清楚它是如何完成的。

现在，我正在创建一个填充，创建一个`CellStyleFormat`指向填充的指向，创建一个`CellFormat`指向 的索引`CellStyleFormat`，然后创建一个`CellStyle`指向`CellFormat`.

这是我用来生成文档的代码：

```
Console.WriteLine("Creating document");
using (var spreadsheet = SpreadsheetDocument.Create("output.xlsx", SpreadsheetDocumentType.Workbook))
{
    Console.WriteLine("Creating workbook");
    spreadsheet.AddWorkbookPart();
    spreadsheet.WorkbookPart.Workbook = new Workbook();
    Console.WriteLine("Creating worksheet");
    var wsPart = spreadsheet.WorkbookPart.AddNewPart<WorksheetPart>();
    wsPart.Worksheet = new Worksheet();

    var stylesPart = spreadsheet.WorkbookPart.AddNewPart<WorkbookStylesPart>();
    stylesPart.Stylesheet = new Stylesheet();
    stylesPart.Stylesheet.Fills = new Fills();

    // create a solid red fill
    var solidRed = new PatternFill() { PatternType = PatternValues.Solid };
    solidRed.AppendChild(new BackgroundColor { Rgb = HexBinaryValue.FromString("FF00FF00") });

    stylesPart.Stylesheet.Fills.AppendChild(new Fill { PatternFill = new PatternFill() { PatternType = PatternValues.None } });
    stylesPart.Stylesheet.Fills.AppendChild(new Fill { PatternFill = solidRed });
    stylesPart.Stylesheet.CellStyleFormats = new CellStyleFormats();
    stylesPart.Stylesheet.CellStyleFormats.AppendChild(new CellFormat { FillId = 0, ApplyFill = false });
    stylesPart.Stylesheet.CellStyleFormats.AppendChild(new CellFormat { FillId = 1, ApplyFill = true });
    stylesPart.Stylesheet.CellFormats = new CellFormats();
    stylesPart.Stylesheet.CellFormats.AppendChild(new CellFormat { FormatId = 0 });
    stylesPart.Stylesheet.CellFormats.AppendChild(new CellFormat { FormatId = 1 });
    stylesPart.Stylesheet.CellStyles = new CellStyles();
    stylesPart.Stylesheet.CellStyles.AppendChild(new CellStyle { Name = "None", FormatId = 0 });
    stylesPart.Stylesheet.CellStyles.AppendChild(new CellStyle { Name = "Solid Red", FormatId = 1 });

    stylesPart.Stylesheet.Save();

    Console.WriteLine("Creating sheet data");
    var sheetData = wsPart.Worksheet.AppendChild(new SheetData());

    Console.WriteLine("Adding rows / cells...");

    var row = sheetData.AppendChild(new Row());
    row.AppendChild(new Cell() { CellValue = new CellValue("This"),  DataType = CellValues.String });
    row.AppendChild(new Cell() { CellValue = new CellValue("is"),    DataType = CellValues.String });
    row.AppendChild(new Cell() { CellValue = new CellValue("a"),     DataType = CellValues.String });
    row.AppendChild(new Cell() { CellValue = new CellValue("test."), DataType = CellValues.String });

    sheetData.AppendChild(new Row());

    row = sheetData.AppendChild(new Row());
    row.AppendChild(new Cell() { CellValue = new CellValue("Value:"),   DataType = CellValues.String });
    row.AppendChild(new Cell() { CellValue = new CellValue("123"),      DataType = CellValues.Number });
    row.AppendChild(new Cell() { CellValue = new CellValue("Formula:"), DataType = CellValues.String });
    row.AppendChild(new Cell() { CellFormula = new CellFormula("B3"),   StyleIndex = 1 }); // 

    Console.WriteLine("Saving worksheet");
    wsPart.Worksheet.Save();

    Console.WriteLine("Creating sheet list");
    var sheets = spreadsheet.WorkbookPart.Workbook.AppendChild(new Sheets());
    sheets.AppendChild(new Sheet() { Id = spreadsheet.WorkbookPart.GetIdOfPart(wsPart), SheetId = 1, Name = "Test" });

    Console.WriteLine("Saving workbook");
    spreadsheet.WorkbookPart.Workbook.Save();

    Console.WriteLine("Done.");
} 
```

这是生成的 XML：

**工作簿.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<x:workbook xmlns:x="http://schemas.openxmlformats.org/spreadsheetml/2006/main">
  <x:sheets>
    <x:sheet name="Test" sheetId="1" r:id="Rbad86b8c80844a16" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" />
  </x:sheets>
</x:workbook> 
```

**样式.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<x:styleSheet xmlns:x="http://schemas.openxmlformats.org/spreadsheetml/2006/main">
  <x:fills>
    <x:fill>
      <x:patternFill patternType="none" />
    </x:fill>
    <x:fill>
      <x:patternFill patternType="solid">
        <x:bgColor rgb="FF00FF00" />
      </x:patternFill>
    </x:fill>
  </x:fills>
  <x:cellStyleXfs>
    <x:xf fillId="0" applyFill="0" />
    <x:xf fillId="1" applyFill="1" />
  </x:cellStyleXfs>
  <x:cellXfs>
    <x:xf xfId="0" />
    <x:xf xfId="1" />
  </x:cellXfs>
  <x:cellStyles>
    <x:cellStyle name="None" xfId="0" />
    <x:cellStyle name="Solid Red" xfId="1" />
  </x:cellStyles>
</x:styleSheet> 
```

**工作表/sheet.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<x:worksheet xmlns:x="http://schemas.openxmlformats.org/spreadsheetml/2006/main">
  <x:sheetData>
    <x:row>
      <x:c t="str"><x:v>This</x:v></x:c>
      <x:c t="str"><x:v>is</x:v></x:c>
      <x:c t="str"><x:v>a</x:v></x:c>
      <x:c t="str"><x:v>test.</x:v></x:c>
    </x:row>
    <x:row />
    <x:row>
      <x:c t="str"><x:v>Value:</x:v></x:c>
      <x:c t="n"><x:v>123</x:v></x:c>
      <x:c t="str"><x:v>Formula:</x:v></x:c>
      <x:c s="1"><x:f>B3</x:f></x:c>
    </x:row>
  </x:sheetData>
</x:worksheet> 
```

最后一行的最后一个单元格是我要添加样式的地方。

当我通过 OpenXML SDK Productivity Tool 运行它时，这一切都得到了正确验证，但是，当我尝试在 Excel 中打开文件时，我收到以下错误：

> 修复的记录：格式来自 /xl/styles.xml 部分（样式）

然后显示电子表格，但未应用填充。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-06-20T11:22:47.120

是的，经过大量实验，我设法弄清楚了这一点。

事实证明，excel 分别为普通单元格和“Gray125”模式填充保留样式 0 和 1。上面的大部分代码都可以去掉，因为我们只需要一个`CellFormat`真的。

工作代码：

```
Console.WriteLine("Creating document");
using (var spreadsheet = SpreadsheetDocument.Create("output.xlsx", SpreadsheetDocumentType.Workbook))
{
    Console.WriteLine("Creating workbook");
    spreadsheet.AddWorkbookPart();
    spreadsheet.WorkbookPart.Workbook = new Workbook();
    Console.WriteLine("Creating worksheet");
    var wsPart = spreadsheet.WorkbookPart.AddNewPart<WorksheetPart>();
    wsPart.Worksheet = new Worksheet();

    var stylesPart = spreadsheet.WorkbookPart.AddNewPart<WorkbookStylesPart>();
    stylesPart.Stylesheet = new Stylesheet();

    Console.WriteLine("Creating styles");

    // blank font list
    stylesPart.Stylesheet.Fonts = new Fonts();
    stylesPart.Stylesheet.Fonts.Count = 1;
    stylesPart.Stylesheet.Fonts.AppendChild(new Font());

    // create fills
    stylesPart.Stylesheet.Fills = new Fills();

    // create a solid red fill
    var solidRed = new PatternFill() { PatternType = PatternValues.Solid };
    solidRed.ForegroundColor = new ForegroundColor { Rgb = HexBinaryValue.FromString("FFFF0000") }; // red fill
    solidRed.BackgroundColor = new BackgroundColor { Indexed = 64 };

    stylesPart.Stylesheet.Fills.AppendChild(new Fill { PatternFill = new PatternFill { PatternType = PatternValues.None } }); // required, reserved by Excel
    stylesPart.Stylesheet.Fills.AppendChild(new Fill { PatternFill = new PatternFill { PatternType = PatternValues.Gray125 } }); // required, reserved by Excel
    stylesPart.Stylesheet.Fills.AppendChild(new Fill { PatternFill = solidRed });
    stylesPart.Stylesheet.Fills.Count = 3;

    // blank border list
    stylesPart.Stylesheet.Borders = new Borders();
    stylesPart.Stylesheet.Borders.Count = 1;
    stylesPart.Stylesheet.Borders.AppendChild(new Border());

    // blank cell format list
    stylesPart.Stylesheet.CellStyleFormats = new CellStyleFormats();
    stylesPart.Stylesheet.CellStyleFormats.Count = 1;
    stylesPart.Stylesheet.CellStyleFormats.AppendChild(new CellFormat());

    // cell format list
    stylesPart.Stylesheet.CellFormats = new CellFormats();
    // empty one for index 0, seems to be required
    stylesPart.Stylesheet.CellFormats.AppendChild(new CellFormat());
    // cell format references style format 0, font 0, border 0, fill 2 and applies the fill
    stylesPart.Stylesheet.CellFormats.AppendChild(new CellFormat { FormatId = 0, FontId = 0, BorderId = 0, FillId = 2, ApplyFill = true }).AppendChild(new Alignment { Horizontal = HorizontalAlignmentValues.Center });
    stylesPart.Stylesheet.CellFormats.Count = 2;

    stylesPart.Stylesheet.Save();

    Console.WriteLine("Creating sheet data");
    var sheetData = wsPart.Worksheet.AppendChild(new SheetData());

    Console.WriteLine("Adding rows / cells...");

    var row = sheetData.AppendChild(new Row());
    row.AppendChild(new Cell() { CellValue = new CellValue("This"),  DataType = CellValues.String });
    row.AppendChild(new Cell() { CellValue = new CellValue("is"),    DataType = CellValues.String });
    row.AppendChild(new Cell() { CellValue = new CellValue("a"),     DataType = CellValues.String });
    row.AppendChild(new Cell() { CellValue = new CellValue("test."), DataType = CellValues.String });

    sheetData.AppendChild(new Row());

    row = sheetData.AppendChild(new Row());
    row.AppendChild(new Cell() { CellValue = new CellValue("Value:"),   DataType = CellValues.String });
    row.AppendChild(new Cell() { CellValue = new CellValue("123"),      DataType = CellValues.Number });
    row.AppendChild(new Cell() { CellValue = new CellValue("Formula:"), DataType = CellValues.String });
    // style index = 1, i.e. point at our fill format
    row.AppendChild(new Cell() { CellFormula = new CellFormula("B3"),   DataType = CellValues.Number, StyleIndex = 1 });

    Console.WriteLine("Saving worksheet");
    wsPart.Worksheet.Save();

    Console.WriteLine("Creating sheet list");
    var sheets = spreadsheet.WorkbookPart.Workbook.AppendChild(new Sheets());
    sheets.AppendChild(new Sheet() { Id = spreadsheet.WorkbookPart.GetIdOfPart(wsPart), SheetId = 1, Name = "Test" });

    Console.WriteLine("Saving workbook");
    spreadsheet.WorkbookPart.Workbook.Save();

    Console.WriteLine("Done.");
} 
```

* * *

一些忠告：

# 如果您想避免这种精神错乱，请使用 ClosedXML。

**如果您正在做这种工作，我不能高度推荐[ClosedXML 。](https://github.com/closedxml/closedxml)**单独使用 OpenXML API 和格式非常乏味，还有各种未记录的案例。ClosedXML 为您做了很多工作。他们也非常擅长快速修复错误。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-03-30T14:47:40.327

一个更通用的答案，所有这些都是我在测试后发现的，所以没有文档可以指出。

在样式表中设置`CellFormats`集合后，Excel 会对其进行更深入的验证。

`CellFormats`不能为空，它必须至少有一个`CellFormat`。

添加后，如果或集合为空`CellFormat`，Excel 会报错。`Fills``Fonts``Borders`

First`Font`用作整个工作簿以及 Excel 中的列/行标题的默认值。

Excel 会先忽略`CellFormat`，所以只需添加一个空的。

如果您的格式需要`Border`or `Fill`，Excel 也将首先忽略`Border`and ，因此还要在and`Fill`中添加空的作为第一个子项。`Borders``Fills`

最后，从第二个`CellFormat`( `s = "1"`) 开始，一切顺利。

在 Excel 2010 中测试。

# objective-c - 你可以在 iOS 上调整 UIImage 的大小同时保持比例吗？用于生成缩略图

> ID：11116186
> 
> 赞同：1
> 
> 时间：2012-06-20T09:05:48.190
> 
> 标签：objective-c, ios, ios5, uiimage, image-scaling

我的应用程序处理从相机拍摄的图像。我希望能够将这些图像调整为缩略图大小，以便可以在表格视图的单元格内显示它们。

“动态”调整大小似乎相当慢，所以我计划在用户将它们导入应用程序时调整它们的大小，并将完整大小和缩略图存储在我的业务对象上，使用缩略图来存储表格视图等内容

这是我用于生成缩略图的代码：

```
#import "ImageUtils.h"

@implementation ImageUtils

+(UIImage*) generateThumbnailFromImage:(UIImage*)theImage
{
    UIImage * thumbnail;
    CGSize destinationSize = CGSizeMake(100,100);

    UIGraphicsBeginImageContext(destinationSize);
    [theImage drawInRect:CGRectMake(0,0,destinationSize.width, destinationSize.height)];
    thumbnail = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return thumbnail;
}

@end 
```

虽然这似乎可以正确调整图像大小，并大大提高了我的表格的响应能力，但图像的缩放比例是关闭的。

以上将创建一个 100 * 100 的 UIImage，如何强制它使用 AspectFit 或 AspectFill 方法？

我的表格单元格上的 UIImageView 是 100 * 100，所以我需要调整图像的大小以适应它，而不会扭曲它。

任何指针都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T01:48:36.023

我意识到这是一个旧线程，但是如果你偶然发现这个，现在 iOS6 中有一个更简单的方法。在我在 Apple 的文档中找到以下内容之前，我在尝试使用此解决方案时浪费了很多时间。

使用任一：

```
+ (UIImage *)imageWithCGImage:(CGImageRef)imageRef 
scale:(CGFloat)scale
orientation:(UIImageOrientation)orientation 
```

或者

```
+ (UIImage *)imageWithCIImage:(CIImage *)ciImage
scale:(CGFloat)scale
orientation:(UIImageOrientation)orientation 
```

如果您想使用它从名为“image”的 UIImage 制作缩略图，可以使用一行代码：

```
UIImage *thumbnail = [UIImage imageWithCGImage:image.cgImage
scale:someScale
orientation:image.imageOrientation]; 
```

我发现大于 1 的数字会缩小图像，小于 1 的数字会扩大图像。它必须使用比例作为基础大小属性的分母。

确保导入必要的框架！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:32:31.013

输入：

```
imageSize // The image size, for example {1024,768}
maxThumbSize // The max thumbnail size, for example {100,100} 
```

伪代码：

```
thumbAspectRatio = maxThumbSize.width / maxThumbSize.height
imageAspectRatio = imageSize.width / imageSize.height

if ( imageAspectRatio == thumbAspectRatio )
{
    // The aspect ratio is equal
    // Resize image to maxThumbSize
}
else if ( imageAspectRatio > thumbAspectRatio )
{
    // The image is wider
    // Thumbnail width: maxThumbSize.width
    // Thumbnail height: maxThumbSize.height / imageAspectRatio
} 
else if ( imageAspectRatio < thumbAspectRatio )
{
    // The image is taller
    // Thumbnail width: maxThumbSize.width * imageAspectRatio
    // Thumbnail height: maxThumbSize.height
} 
```

# svg - SVG 旋转删除元素

> ID：11116189
> 
> 赞同：0
> 
> 时间：2012-06-20T09:05:53.870
> 
> 标签：svg, rotation

我正在尝试在 Web 应用程序中生成 svg-Code。这是一个示例输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink" 
  xmlns:ev="http://www.w3.org/2001/xml-events"
  version="1.1" baseProfile="full"
   width="1000px" height="600px">
  <rect x="147.50198255352893" y="109.43695479777953" width="15.860428231562253" height="295.79698651863595" stroke="rgb(0,0,0)" fill="rgb(255,255,255)" stroke-width="3" transform="rotate(20 155.43219666931006 257.3354480570975)"/>
  <rect x="163.36241078509119" y="405.2339413164155" width="379.85725614591587" height="-23.79064234734335" stroke="rgb(0,0,0)" fill="rgb(255,255,255)" stroke-width="3" transform="rotate(20 353.2910388580491 393.3386201427438)"/>
  <rect x="543.219666931007" y="381.44329896907215" width="22.204599524187188" height="-353.6875495638382" stroke="rgb(0,0,0)" fill="rgb(255,255,255)" stroke-width="3" transform="rotate(20 554.3219666931006 204.59952418715304)"/>
</svg> 
```

应该有三个旋转的矩形，但不知何故，在 Chrome、Safari 和 Inkscape 中只显示了其中一个。我做了谷歌，不知道出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:14:44.087

您的问题是由 second 和 third 的负高度引起的`<rect />`。

如果您自动生成此代码，请确保这些值为正。例如，使用 JavaScript，将它们包装在`Math.abs( height )`.

# iphone - 从 safari 返回后应用程序崩溃

> ID：11116195
> 
> 赞同：0
> 
> 时间：2012-06-20T09:06:26.803
> 
> 标签：iphone, objective-c, ios, xcode

在我的应用程序中，当单击按钮时，我会在 Safari 中加载一个 weburl。

当它被加载并返回应用程序时：当我尝试拖动一个对象（在本例中为箭头视图时，应用程序崩溃并出现 EXC_BAD_ACCESS。

我真的找不到导致这种情况的原因，因为它只在拖动时发生......其他一切都很好。

应用程序在这段代码中崩溃（在 Arrowview 类中）：

```
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{

   self.center = CGPointMake(plateImg.endPoint.x , plateImg.endPoint.y)  ;

   [arrowImage drawAtPoint:CGPointMake(34, 38)];            **<< CRASHES HERE**

} 
```

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:23:13.437

经过深入审查后发现我只是忘记保留arrowImage（在url方法中使用的Image不会保留对象

# java - 在eclipse中的android socket程序中构建错误

> ID：11116197
> 
> 赞同：0
> 
> 时间：2012-06-20T09:06:32.080
> 
> 标签：java, android, eclipse, sockets, network-programming

我有以下代码在 C 服务器和 android 客户端之间建立 TCP 连接。c服务器工作正常。但是下面的代码显示了在 Eclipse 中构建的错误。

```
package com.app.client.app;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

import java.io.BufferedReader;
import java.io.BufferedWriter; 
import java.io.IOException; 
import java.io.InputStream;
import java.io.OutputStreamWriter; 
import java.io.InputStreamReader;
import java.io.PrintWriter; 
import java.net.InetAddress; 
import java.net.Socket; 
import java.net.UnknownHostException; 

import android.util.Log; 

public class my_activity extends Activity
{ 
   private TextView txt;

   @Override 
   public void onCreate(Bundle savedInstanceState) { 
      super.onCreate(savedInstanceState); 
      setContentView(R.layout.main); 
      Button b = (Button)findViewById(R.id.button1);
      txt = (TextView)findViewById(R.id.textView1);
      b.setOnClickListener(new View.OnClickListener()
      {
         @Override
         public void onClick(View v)
         {
            connectSocket("Hello");

        }
      });
} 

private void connectSocket(String a){ 

    try { 
        InetAddress serverAddr = InetAddress.getByName("192.168.1.2"); 
        Log.d("TCP", "C: Connecting..."); 
        Socket socket = new Socket(serverAddr, 4444); 

        message = "1";

        PrintWriter out = null;
        BufferedReader in = null;

        try { 
            Log.d("TCP", "C: Sending: '" + message + "'"); 
            out = new PrintWriter( new BufferedWriter( new OutputStreamWriter(socket.getOutputStream())),true); 
            in = new BufferedReader(new InputStreamReader(socket.getInputStream()));                

            out.println(message);
            while ((in.readLine()) != null) {
                txt.append(in.readLine());
            }

            Log.d("TCP", "C: Sent."); 
            Log.d("TCP", "C: Done.");               

        } catch(Exception e) { 
            Log.e("TCP", "S: Error", e); 
        } finally { 
            socket.close(); 
        } 

    } catch (UnknownHostException e) {
        Log.e("TCP", "C: UnknownHostException", e); 
        e.printStackTrace(); 
    } catch (IOException e) {
        Log.e("TCP", "C: IOException", e); 
        e.printStackTrace(); 
    }       
} 
} 
```

构建时显示的错误是：

```
main cannot be resolved or is not a field   my_activity.java    /Androidclient/src/com/app/client/app   line 29 Java Problem 
```

我该怎么做才能解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:33:59.800

您需要在您的活动中设置您的**AndroidManifest.xml 。**找到它并将您的主要活动添加到其中，如下所示：

```
 <application android:icon="@drawable/icon" android:label="@string/app_name">

    <activity android:name="my_activity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>  
</application> 
```

这将告诉 android 系统这是您的主要活动，它应该在应用程序启动时启动。

如果您是 android 新手，我建议您阅读[本文](http://developer.android.com/guide/topics/manifest/manifest-intro.html)

# python - 笔画宽度变换 (SWT) 实现 (Python)

> ID：11116199
> 
> 赞同：18
> 
> 时间：2012-06-20T09:06:58.450
> 
> 标签：python, opencv, computer-vision, ocr, simplecv

谁能描述我如何使用 opencv 或 simplecv 在 python 中实现 SWT？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-21T16:08:24.693

好的，这里是：

底部有代码下载链接的实现细节链接：[SWT](https://sites.google.com/site/roboticssaurav/strokewidthnokia)

为了完整起见，还提到 SWT 或 Stroke Width Transform 是 Epshtein 等人在 2010 年设计的，并且已证明是迄今为止最成功的文本检测方法之一。它不使用机器学习或复杂的测试。基本上在对输入图像进行 Canny 边缘检测之后，它会计算构成图像中对象的每个笔划的粗细。由于文本具有统一粗笔划，这可能是一个强大的识别功能。

在计算 SWT 步骤之后，链接中给出的实现是使用 C++、OpenCV 和它们用于连接图遍历等的[Boost库。](http://www.boost.org/)就我个人而言，我已经在 Ubuntu 上对其进行了测试，它工作得很好（而且效率很高），尽管准确性并不准确。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-03T15:03:04.353

我实现了类似于“ **ROBUST TEXT DETECTION IN NATURAL-ENHANCED MAXIMALLY STABLE EXTREMAL REGIONS** by *Huizhong Chen, Sam S. Tsai, Georg Schroth, David M. Chen, Radek Grzeszczuk, Bernd Girod* ”中描述的基于距离变换的 SWT .

它与论文中描述的不同，但粗略的近似值符合我的目的。认为我应该分享它，以便有人可能会发现它有用（并指出任何错误/改进）。它用 C++ 实现并使用 OpenCV。

```
 // bw8u : we want to calculate the SWT of this. NOTE: Its background pixels are 0 and forground pixels are 1 (not 255!)
    Mat bw32f, swt32f, kernel;
    double min, max;
    int strokeRadius;

    bw8u.convertTo(bw32f, CV_32F);  // format conversion for multiplication
    distanceTransform(bw8u, swt32f, CV_DIST_L2, 5); // distance transform
    minMaxLoc(swt32f, NULL, &max);  // find max
    strokeRadius = (int)ceil(max);  // half the max stroke width
    kernel = getStructuringElement(MORPH_RECT, Size(3, 3)); // 3x3 kernel used to select 8-connected neighbors

    for (int j = 0; j < strokeRadius; j++)
    {
        dilate(swt32f, swt32f, kernel); // assign the max in 3x3 neighborhood to each center pixel
        swt32f = swt32f.mul(bw32f); // apply mask to restore original shape and to avoid unnecessary max propogation
    }
    // swt32f : resulting SWT image 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-09-17T08:35:38.393

这里有一个完整的库[SWTloc](https://github.com/ag-ds-bubble/swtloc)算法的 Python 3 实现

* * *

**v2.0.0 以上**

### 安装库

```
pip install swtloc 
```

### 变换图像

```
import swtloc as swt
imgpath = 'images/path_to_image.jpeg'
swtl = swt.SWTLocalizer(image_paths=imgpath)
swtImgObj = swtl.swtimages[0]
swt_mat = swtImgObj.transformImage(text_mode='lb_df',
                                   auto_canny_sigma=1.0,
                                   maximum_stroke_width=20) 
```

[![变换显示](../Images/a3fc09288845b94dc7b66f5d24ce8260.png)](https://i.stack.imgur.com/EfOpJ.jpg)

* * *

### 本地化字母

```
localized_letters = swtImgObj.localizeLetters(minimum_pixels_per_cc=100,
                                              maximum_pixels_per_cc=10_000,
                                              acceptable_aspect_ratio=0.2) 
```

[![字母本地化](../Images/65b839af2ab290e357e25ca9d371f739.png)](https://i.stack.imgur.com/1arfM.jpg)

* * *

### 本地化单词

```
localized_words = swtImgObj.localizeWords() 
```

[![在此处输入图像描述](../Images/630b14f3da6cfab9bee6f80d3cc1cd4c.png)](https://i.stack.imgur.com/t21n5.jpg)

完全披露：我是这个库的作者

# php - 从 PHP 脚本在 .dat 文件中写入 UTF8

> ID：11116202
> 
> 赞同：0
> 
> 时间：2012-06-20T09:07:04.250
> 
> 标签：php, utf-8

我在从[MyGallery](http://www.planetluc.com/en/scripts_mygallery.php)（免费 PHP 脚本）的`.dat`文件中写入 utf8 字符时遇到问题。 文件中的 utf8 字符是这样写的：
`.dat`

> Ð�Ð²Ð° Ðµ Ñ�Ð°Ð¼Ð¾ Ð¿Ñ�Ð¾Ð±Ð°</p>

当我尝试`.dat`使用 utf8 字符文本编辑文件时，我能够在 MyGallery 中看到正确的文本，所以问题在于写入`.dat`文件（从文件中读取是可以的）。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:00:23.937

查看[utf8_decode @ PHP 手册](http://php.net/manual/en/function.utf8-decode.php)和[utf8_encode @ PHP 手册](http://php.net/manual/en/function.utf8-encode.php)，你会在几分钟内找到解决方案

# android - 如何获取正确的视频 URL

> ID：11116204
> 
> 赞同：0
> 
> 时间：2012-06-20T09:07:23.180
> 
> 标签：android, android-webview

我试图在 Android 应用程序的 VideoView 中播放视频。问题是我如何从 youtube 获取正确的视频链接，而不仅仅是网页？

```
setContentView(R.layout.videopopup);
VideoView vv = (VideoView)findViewById(R.id.videoElem);

MediaController mc = new MediaController(this);
mc.setEnabled(true);
mc.show(0);
vv.setMediaController(mc); 
vv.setVideoURI(Uri.parse("http://www.youtube.com/v/oFL2rszPmmU?version=3&feature=player_detailpage"));
vv.requestFocus();
vv.showContextMenu();
vv.start(); 
```

在此链接中：[视频视图未播放 youtube 视频](https://stackoverflow.com/questions/5162088/video-view-not-playing-youtube-video)

Evgeny Nacu 解释了它应该是哪个链接，但没有解释如何从给定的 youtube 页面检索它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:25:32.920

使用默认 youtube 应用播放视频的简单方法：

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(your youtube url); 
```

Youtube 应用程序将做一切。你不需要做任何事情。

如果这不能解决，请在代码中使用 webview 而不是 videoview

# c++ - 如何将数组的地址放入变量中

> ID：11116209
> 
> 赞同：1
> 
> 时间：2012-06-20T09:07:28.250
> 
> 标签：c++

如何将数组的地址放入变量中？

```
char * str1 = "Hello";
int add = 0; 
```

现在我想将数组的地址放入`add`. 我知道我可以通过以下方式打印出数组的地址：

```
printf("Address = %p", str1); 
```

但是，我想将地址存储在变量中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T09:10:51.763

如果要将内存地址存储在变量中，正确的方法是将变量键入为`std::intptr_t`or `std::uintptr_t`。这是因为这些类型*保证*足够大以容纳任何内存地址：

```
char * str1 = "Hello";
uintptr_t p = (uintptr_t)str1; 
```

除此之外，请注意 的值`str1`已经是一个内存地址（它指向`H`），尽管它与（指向 ）的值`&str1`不同`str1`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T09:11:54.867

将指针变成数字需要重新解释：

```
add = reinterpret_cast<int>(str1); 
```

但是这种方法存在各种问题：

*   如果 sizeof(int) < sizeof(char*) 则部分指针丢失，您将无法恢复它。
*   由于意外的别名，某些优化可能会使您的代码无效。

如果您需要一个可以保存指针*或*整数的变量，最好使用联合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T09:12:03.367

使用`reinterpret_cast`（见 5.2.10/p4）：

> 4 指针可以显式转换为任何大到足以容纳它的整数类型。映射函数是实现定义的。[注意：对于那些知道底层机器的寻址结构的人来说，这并不奇怪。——尾注]

```
static_assert( sizeof( unsigned int ) >= sizeof( &str1[ 0 ] ),  "warning: use a wider type!" );
unsigned int add = reinterpret_cast< unsigned int >( &str1[ 0 ] ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T09:55:55.467

根据您对乔恩接受的答案的评论：

```
char str1[] = "Hello";
char* str2 = &str1[0];
uintptr_t p = (uintptr_t)str2;
std::cout << std::hex << p << std::endl;
p = (uintptr_t)&str1[1];
std::cout << std::hex << p << std::endl;
p = (uintptr_t)&str1[0];
std::cout << std::hex << p << std::endl; 
```

这意味着您的目标是能够以可读格式流式传输指针值。该标准以实现定义的方式对此进行了如下规定：

```
basic_ostream<charT,traits>& operator<<(const void* p); 
```

因此，也许您真正想要的是 C++ 风格或（简洁但较少自我记录和编译器检查的）C 风格代码：

```
std::cout << static_cast<void*>(str1) << '\n';
std::cout << (void*)str1 << '\n'; 
```

（但是，如果您特别想要一个数字版本，或者确保它以十六进制显示，没有前导 0x 或实现可能决定的任何其他内容，那么您将回到 Jon 的建议或您自己的（可能是编译时检查）逻辑找到一个足够大的整数类型。

# php - 需要 preg_match_all 链接

> ID：11116215
> 
> 赞同：0
> 
> 时间：2012-06-20T09:08:08.767
> 
> 标签：php, regex

我有一个这样的字符串：

```
$string = "some text
  http://dvz.local/index/index/regionId/28
        http://stuff.kiev.ua/roadmap_page.php http://192.168.3.192/roadmap_page.php
         http://192.168.3.192/roadmap_page.php#qwe"; 
```

需要获取所有链接。

我试过这样：`/http:\/\/(.*)[|\s]?/`

返回：

```
array(2) {
  [0] =>
  array(3) {
    [0] =>
    string(42) "http://dvz.local/index/index/regionId/28\r\n"
    [1] =>
    string(77) "http://stuff.kiev.ua/roadmap_page.php http://192.168.3.192/roadmap_page.php\r\n"
    [2] =>
    string(41) "http://192.168.3.192/roadmap_page.php#qwe"
  }
  [1] =>
  array(3) {
    [0] =>
    string(34) "dvz.local/index/index/regionId/28\r"
    [1] =>
    string(69) "stuff.kiev.ua/roadmap_page.php http://192.168.3.192/roadmap_page.php\r"
    [2] =>
    string(34) "192.168.3.192/roadmap_page.php#qwe"
  }
} 
```

编辑1：期望：

```
array(2) {
  [0] =>
  array(3) {
    [0] =>
    string(42) "http://dvz.local/index/index/regionId/28"
    [1] =>
    string(77) "http://stuff.kiev.ua/roadmap_page.php"
    [2] =>
    string(77) "http://192.168.3.192/roadmap_page.php"
    [3] =>
    string(41) "http://192.168.3.192/roadmap_page.php#qwe"
  }
  [1] =>
  array(3) {
    [0] =>
    string(34) "dvz.local/index/index/regionId/28"
    [1] =>
    string(69) "stuff.kiev.ua/roadmap_page.php"
    [2] =>
    string(69) "192.168.3.192/roadmap_page.php"
    [3] =>
    string(34) "192.168.3.192/roadmap_page.php#qwe"
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T09:18:07.700

试试这个：

```
/http:\/\/([^\s]+)/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T09:22:24.093

尝试这个：

```
preg_match_all('|http://([^\s]*)|', $string, $matches);

var_dump($matches); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-22T02:57:57.373

许多页面只有到主文档的相对链接，（因此没有 http(s):// ... 解析），对于以下工作正常，按`href`属性拆分：

```
preg_match_all('|href="([^\s]*)"><\/a>|', $html, $output_array); 
```

或者更简单：

```
preg_match_all('|href="(.*?)"><\/a>|', $html, $output_array); 
```

示例输出：

```
 [0]=>
    string(56) "/broadcast/bla/xZr300"
    [1]=>
    string(50) "/broadcast/lol/fMoott" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-24T14:49:34.840

来自文本的所有链接

http[s]?[^\s]*

# jquery - jQuery / JavaScript HTML5 响应式视频库插件播放列表 youtube？

> ID：11116217
> 
> 赞同：0
> 
> 时间：2012-06-20T09:08:17.013
> 
> 标签：jquery, youtube, responsive-design, html5-video, lightbox

有谁知道一个简单的 jQuery 视频播放器，它可以像漂亮的照片一样在灯箱中打开，并播放带有小画廊的视频和附加的其他视频的播放列表。

我想通过单击和图像链接到一个视频，它将在灯箱中打开并显示第一个视频，下面还有一个小画廊，也许这也将包含在灯箱中。

我一直在看这个 - [http://codecanyon.net/item/responsive-video-gallery-html5-youtube-vimeo/2918602?WT.ac=search_thumb&WT.seg_1=search_thumb&WT.z_author=Tean](http://codecanyon.net/item/responsive-video-gallery-html5-youtube-vimeo/2918602?WT.ac=search_thumb&WT.seg_1=search_thumb&WT.z_author=Tean)

但是下面的开发人员给了我一个叫做 twitter bootstrap 的东西，它看起来很灵活但是有没有办法让响应性与正确的滚动条一起工作？ [http://brightmist.co.uk/test/bootstrap.html](http://brightmist.co.uk/test/bootstrap.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:40:15.757

操作，

检查这个 Plunk：[http ://plnkr.co/edit/YKoTWH?p=preview](http://plnkr.co/edit/YKoTWH?p=preview)

### 细节

总之，我们向 youtube API 询问有关特定播放列表的 JSONP 响应，循环遍历结果并构建列表。

在幕后，我们将集合附加到[Twitter Bootstrap modal](http://twitter.github.com/bootstrap/javascript.html#modals)中。

用户单击模态显示按钮->触发加载第一个视频->用户单击其他视频缩略图->该视频在其位置加载。

这绝对可以优化/清理，但这应该是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:29:14.313

结帐[videolightbox](http://videolightbox.com/) ..

它有各种各样的视频播放器风格，可能你正在寻找 mac 风格。

它易于实现，也适用于移动设备。

或者

还有一个像[sublimevideo这样的老质量视频播放器](http://sublimevideo.net)

实际上，我推荐 sublimevideo，因为它的质量比周围所有其他视频播放器高得多，并且具有显示有多少人观看了您的视频的分析页面。

# c# - 如何在 SharePoint 2010 托管代码中存储临时文件？

> ID：11116218
> 
> 赞同：1
> 
> 时间：2012-06-20T09:08:20.717
> 
> 标签：c#, .net, sharepoint, sharepoint-2010

我在 SharePoint 2010 中有一个托管 Web 服务，可以上传和下载到 sharepoint。因为文件可能很大（100MB+），我宁愿使用临时文件作为代码通过的流而不是内存流，以避免每次下载/上传时分配 100mb 内存。

问题是我可以在服务器中找到一个位置来存储临时文件。System.IO.Path.GetTempFileName() 引发错误，因为经过身份验证的用户没有对服务器中 %TEMP% 文件夹的权限。"%systemroot%\temp" 允许写入文件但不能删除它们。

知道我是否可以从任何经过身份验证的用户可以访问的共享点获取位置来存储文件？

几点注意事项：

1.  这些文件是临时的，需要立即删除，因此无需考虑集群问题。

2.  我不想要一个需要在服务器中执行任何主动操作的解决方案，因为该插件可能部署在具有大量服务器的场中，并且我不想让客户通过每台服务器。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:35:35.697

您需要访问 SharePoint 的“系统帐户”下的文件。是的， System.IO.Path.GetTempFileName() 是正确的位置。

起点 - [SPSecurity.RunWithElevatedPrivileges](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spsecurity.runwithelevatedprivileges.aspx)。

笔记

*   如果您可以将文件打开为“临时 + 关闭时删除”（检查 FileStream 类中的适当标志）。
*   在 RunWithElevatedPrivileges 委托中运行代码时，请特别注意不要执行对其他 SharePoint 资源 (SPFile/SPItem...) 的访问。
*   您可能只需要在 RunWithElevatedPrivileges 下打开文件，读/写可能在外部工作 - 请验证自己。我会保留使用 RunWithElevatedPrivileges 运行的委托中的所有文件访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:36:52.260

它可能不是最好的地方，但我之前使用过配置单元中的 _layouts 目录（C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\TEMPLATE\LAYOUTS）来做类似的事情。

您可以使用 Microsoft.SharePoint.Utilities.SPUtility.GetGenericSetupPath() 获取此位置，并且您应该能够在目录中读取/写入。您可能需要以提升的权限运行。

# php - PHP preg_match with ' doesn't work

> ID：11116225
> 
> 赞同：0
> 
> 时间：2012-06-20T09:08:46.543
> 
> 标签：php, preg-match

I need to filter out strings that contain anything other than letters, numbers, dots, hyphens, apostrophes or spaces.

Strings with letters, numbers, dots, hyphens and spaces pass the test, but when they contain an apostrophe it fails. (The escape characters on the dot and hyphen don't seem to be making any difference so I put them in just to be sure)

Any thoughts on this?

```
if (preg_match("/[^a-zA-Z0-9\.\-\'\\s]/", $some_var)){
    echo "Invalid characters";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:28:19.537

由于某些字符的转义（在传递到 preg_match 函数之前，作为字符串的一部分转义），您的答案无法编译。

您可以尝试双重转义：

```
if (preg_match("/[^a-zA-Z0-9\\.\\-\\'\s]/", $some_var)){ 
    echo "Invalid characters"; 
} 
```

但不需要转义点、连字符和撇号，因此您可以简化：

```
if (preg_match("/[^a-zA-Z0-9.'\s-]/", $some_var)){ 
    echo "Invalid characters"; 
} 
```

请注意，连字符被移到末尾，以免误认为是字符范围。就个人而言，我更喜欢对其进行转义，以防止其他开发人员不小心将新字符添加到列表末尾并导致意外行为。

所以：

```
if (preg_match("/[^a-zA-Z0-9.\\-'\s]/", $some_var)){ 
    echo "Invalid characters"; 
} 
```

最后，您可能想要检查您的输入（`$some_var` 变量） - 这实际上是否包含反斜杠，因为 PHP 有时会添加它（例如，用户键入“can't”，但作为“can\'t”发送 -你可能需要`stripslashes`先）。

例如。

```
if (preg_match("/[^a-zA-Z0-9.\\-'\s]/", stripslashes($some_var))){ 
    echo "Invalid characters"; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:17:12.037

尝试这个：

```
if (preg_match("/[^a-zA-Z0-9.'\s-]/", $some_var)){
      echo "Invalid characters";
} 
```

# asp.net - 对部分成功发布到 Web API 的响应

> ID：11116229
> 
> 赞同：0
> 
> 时间：2012-06-20T09:09:01.940
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-web-api

如果将许多对象发送到我的 Web api 控制器以插入到我的数据库中，那么最好的响应是什么，其中有些可能成功，有些可能失败？我认为一个正常的 HTTP 响应是不够的 - 找到某种方法来返回一个成功的 JSON 字符串会更好，什么没有？如果是这样，我该怎么做？

我的 Post 控制器如下所示。

谢谢你的帮助，

标记

```
 public HttpResponseMessage PostBooking(Booking[] bookings)
    {
        if (ModelState.IsValid)
        {
            foreach (var booking in bookings)
            {
                // check if there are any bookings already with this HID and RID...
                var checkbooking = db.Bookings.Where(h => h.HID == booking.HID && h.RID == booking.RID).ToList();
                // If so, return a response of conflict
                if (checkbooking.Count != 0 || checkbooking.Any())
                {
                    throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.Conflict));
                }
                else
                {
                    // If not add the booking to the database and return a response of Created
                    db.Bookings.Add(booking);
                    db.SaveChanges();
                }
            } 
            HttpResponseMessage response = Request.CreateResponse(HttpStatusCode.Created);
            return response;
        }
        else
        {
            // Model is not valid, so return BadRquest
            return Request.CreateResponse(HttpStatusCode.BadRequest);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:13:14.837

您可以返回一个 JSON 列表，其中包含未能插入的对象的 id：

```
{
    "failedIds": [
        4,
        7,
        9
    ]
} 
```

由于请求未成功完成，500 HTTP 响应状态代码似乎也很合适。

您甚至可以更进一步，并解释为什么每个特定 id 的插入失败：

```
{
    "failed": [
        {
            "id": 4,
            "reason": "database unavailable"
        },
        {
            "id": 7,
            "reason": "network cable unplugged"
        },
        {
            "id": 9,
            "reason": "a thief is currently running away with our server"
        }
    ]
} 
```

# ruby - Unicode characters in Ruby 1.9.3 IRB with RVM

> ID：11116230
> 
> 赞同：8
> 
> 时间：2012-06-20T09:09:05.617
> 
> 标签：ruby, unicode, osx-lion, rvm, irb

**Update**: I found almost exact [similar question](https://stackoverflow.com/q/4590725/80851), yet it has slightly different prerequisites and thus doesn't help much.

Given:

*   **MacOS Lion 10.7.3**
*   **rvm 1.14.2**
*   **ruby 1.9.3p194** (2012-04-20 revision 35410) [x86_64-darwin11.3.0]

    Ruby was installed with the following line:

    `rvm install 1.9.3 --with-readline-dir=/usr/local/Cellar/readline/6.2.2/`

When I fire up `irb` or `rails c` and start typing unicode characters, I get:

`\U+FFD0\U+FFBF\U+FFD1\U+FFD0\U+FFB8\U+FFD0\U+FFBC\U+FFD0\U+FFB5\U+FFD1`

**How do I get unicode characters displayed correctly when typing on Ruby/Rails consoles?**

P.S. Typing same characters in bash session of Terminal result in proper output.

P.P.S. Just to be clear -- in console I am typing russian characters: are they considered unicode symbols?

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-20T09:23:14.843

RVM 存在通过自制软件安装的 readline[问题。](https://github.com/wayneeseguin/rvm/issues/1016)[这个](https://gist.github.com/1968562)要点对我来说非常有用：

```
$ rvm get latest
$ rvm pkg install readline
$ rvm install 1.9.3 --with-readline-dir=$rvm_path/usr 
```

而不是`install`你可以使用`reinstall`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T11:59:51.643

只`rvm reinstall all --force`帮了我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T14:55:27.560

其他解决方案是使用[http://railsinstaller.org](http://railsinstaller.org)它已经提供了为 Ruby 和 Rails 编译的所有内容，我正在努力解决所有库编译问题并提供一个包。

# android - Android - Download and Install apk file in Webview

> ID：11116232
> 
> 赞同：7
> 
> 时间：2012-06-20T09:09:09.367
> 
> 标签：android, webview, download, installation, apk

I am trying to make a simple webview for my mobile website. There are app link `.apk` on that website and I need to detect when user click on those link. After clicking file will be downloaded to SD card, then form user to install if want to..

I have read many solutions but did not get working solution yet.

Now all good at step to detect the `.apk` file, but it seem open default browser for those download link in second then go off, and I don't know how to auto-form install after downloaded.

[My Code](http://pastebin.com/igRzbLyc) that I used.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T05:51:00.200

通常，嵌入式 webview 不会具有普通浏览器具有的所有功能。因此，一旦您点击了 apk，您就必须执行以下操作之一

1.  通过 Android DownloadManager 下载文件（此处为[http://www.vogella.com/blog/2011/06/14/android-downloadmanager-example/](http://www.vogella.com/blog/2011/06/14/android-downloadmanager-example/)示例）
2.  通过自己下载文件`HttpUrlConnection`

下载完成后，您可以尝试通过 Intent（很可能是 Intent.ACTION_VIEW）开始安装，或者直接通过`PackageManager`. 请参阅此处[以编程方式安装/卸载 APK（PackageManager 与 Intents）](https://stackoverflow.com/questions/6813322/install-uninstall-apks-programmatically-packagemanager-vs-intents)

# asp.net-mvc-3 - 枚举在 ajax 调用时与模型解除绑定

> ID：11116239
> 
> 赞同：0
> 
> 时间：2012-06-20T09:09:31.340
> 
> 标签：asp.net-mvc-3, model, enums

我正在从数据库中读取枚举值，然后将其绑定到模型。当我使用 ajax 发布表单时，以某种方式枚举未绑定或模型属性为 null 或零，但它在视图上正确显示。我在下面发布了代码。我使用实体框架和 mvc3

```
//model code constructor
public CarModel(Car car)
{
State=(CarState)car.State;
//car.State comes in as an int
//etc setting other variables
}

//CarState property
public CarState {get;set;}

//model code
@Html.DisplayFor(m=>m.CarState)

//Controller code()
Save(CarModel car)
{
//I have code that saves the changes
} 
```

我到达“汽车”的那一刻，CarState 没有任何价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:20:49.747

目前尚不清楚您如何将此值传递给控制器​​操作。您只显示了一些`@Html.DisplayFor(m=>m.CarState)`，但显然这只在视图中显示了一个标签。它不会将任何内容发送回服务器。如果您想发回一些值，则必须在表单中使用输入字段。

例如：

```
@Html.EditorFor(m => m.CarState) 
```

`HiddenFor`或者如果您不希望用户编辑它，请使用字段。

In any case you need to send that value to the server if you expect the model binder to be able to retrieve it. The model binder is not a magician. He cannot invent values. He binds values to your model from the Request.

# iphone - 当另一个视图显示时，如何使我的背景视图变暗？

> ID：11116241
> 
> 赞同：0
> 
> 时间：2012-06-20T09:09:38.460
> 
> 标签：iphone, ios

我有一个 iphone 应用程序，在该应用程序中单击按钮，我正在显示一个类似于 alertview 的视图。当时我希望我剩余的视图（背景）是一个阴影，就像我们在显示 alertview 时看到的背景一样。任何人都可以帮我实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:13:33.437

这很简单，让您的新视图成为覆盖全屏的视图的子视图，alpha 设置为 0.7 或其他值以及您选择的颜色，然后呈现此视图，后面的所有内容都应该变暗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:13:24.567

您可以使用主视图的框架分配一个视图，并将背景颜色设置为灰色，当您单击按钮时，添加此视图，然后添加指定的视图，或者您可以在此灰色视图中添加指定的视图....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T09:14:33.203

您可以简单地将 UIView 添加为控制器视图的子视图。将黑色设置为它的背景颜色，alphaValue 介于 0 和 1 之间。记住将框架设置为等于 viewcontroller 视图

在您的 alertview 回调中，只需删除视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T09:14:49.567

当单击按钮以显示视图时：

```
-(void)yourButtonAction
{
  [self.view setAlpha:0.3];
} 
```

现在，当删除像警报视图这样的视图时。

```
[self.view setAlpha:1.0]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T09:46:21.090

最好的方法是创建一个新图像（黑色半透明背景补丁）并添加到superview的背景中，并将superview的背景颜色设置为clearcolor。

# asp.net-mvc-3 - MVC post with file not working

> ID：11116242
> 
> 赞同：0
> 
> 时间：2012-06-20T09:09:40.077
> 
> 标签：asp.net-mvc-3, http-post

I have a program that is developed in MVC 3 Razor Syntax but whenever I am posting to the controller with a file it doesn't work but if I just post to the controller without a file it works. What could be the problem ? Here's my Code:

```
@using (Html.BeginForm("UpdateFile", "AdministerFiles", FormMethod.Post, 
new {enctype = "multipart/form-data"})) 

 {
    string title = null;
    string description = null;
    string filename = null;
    int dataid = 0;
    int filesize = 0;
    string filepath = null;
    foreach (var fileDetails in ((RefDataLinks_mst[])@Model[1]))
    {
        title = fileDetails.DataTitle;
        description = fileDetails.Description;
        filename = fileDetails.DataFileName;
        dataid = fileDetails.DataID;
        filesize = fileDetails.FileSize;
        filepath = fileDetails.DataFilePath;
    }

    <div id="updateLeftTopPart">
        <label class="addFileLabel"for="title">Title : </label><textarea rows="3" cols="50" name="title" required>@title</textarea> <br /> <br />    
    </div>

    <div id="updateRightTopPart">
        <label for="description">Description : </label><textarea rows="2" cols="50" name="description" required>@description</textarea>

    </div>
    <div id="updateLeftPart">
        <label>Existing File : </label><label><a href="/BrowseData/DownloadFile?catID=@catid&filename=@filename&filepath=@filepath">@filename</a></label>
    </div>

    <div id="updateUploadFile">
        <label for="file">Upload New File Here :</label><input type="file" name="file" id="file"/>
    </div> 

        <input type="hidden" value="@catid" name="catid"/> 
        <input type="hidden" value="@filename" name="existingFile"/> 
        <input type="hidden" value="@dataid" name="dataid"/> 
        <input type="hidden" value="@filesize" name="filesize"/> 
    <div id="updateActions">
        <input type="submit" value="Update File" />
        <input type="reset" value="Reset" />
    </div>           
 } 
```

These are the parameters of my Controller:

```
public ActionResult UpdateFile(HttpPostedFileBase file, int catid, int dataid, string title, string existingFile, string description, int filesize) 
```

Whenever I post, The browser is saying that The connection to the server was reset while the page was loading. What could be the problem ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T09:31:17.963

> 每当我发布时，浏览器都会说在页面加载时与服务器的连接已重置。可能是什么问题呢 ？

您可以使用该[`<httpRuntime>`](http://msdn.microsoft.com/en-us/library/e1f13641.aspx)元素在 web.config 中增加的默认 4MB 限制。

```
<!-- Allow files up to 100MB to be uploaded -->
<!-- Also increase the execution timeout as uploading
100 MB files could take some time and ASP.NET won't wait that long -->

<httpRuntime maxRequestLength="102400" executionTimeout="3600" /> 
```

顺便说一句，如果您在 IIS 7+ 中托管应用程序，您还需要将 调整`requestLimits`为相同的值（这次以字节为单位）：

```
<system.webServer>
    <security>
        <requestFiltering>
            <!-- Limit file uploads to 100MB -->
            <requestLimits maxAllowedContentLength="104857600" />
        </requestFiltering>
    </security>
</system.webServer> 
```

# android - Resource not found exception after running proguard

> ID：11116243
> 
> 赞同：7
> 
> 时间：2012-06-20T09:09:41.733
> 
> 标签：android, proguard

I got an app that runs ok, after running proguard the app won't start, I get the following

```
 UNCAUGHT EXCEPTION : java.lang.RuntimeException: Unable to start activity
 ComponentInfo{com.**/com**Activities.MainActivity}: 
 android.content.res.Resources$NotFoundException: Resource ID #0x0 stack =  
 java.lang.RuntimeException: Unable to start activity  
 ComponentInfo{com.**/com.**.Activities.MainActivity}: 
 android.content.res.Resources$NotFoundException: Resource ID #0x0 
```

Any leads will be helpful.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-19T07:59:17.427

我不是 100% 确定，那是很久以前的事了，但我想我需要告诉 proguard 保留一些类的名称，并且不要混淆它们的命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-14T09:05:18.367

如果您尝试访问不存在的资源（通常是错误的）并且与 MainActivity 无关，则会发生这种情况。在这种情况下，错误消息非常具有误导性。

# c# - Socket c# chat over internet?

> ID：11116246
> 
> 赞同：2
> 
> 时间：2012-06-20T09:09:57.283
> 
> 标签：c#, sockets

I am having trouble with sockets connecting from an external source

See below my constructor.

//Using UDP sockets

```
clientSocket = new Socket(AddressFamily.InterNetwork,
                          SocketType.Dgram, ProtocolType.Udp);
EndPoint ourEP = new IPEndPoint(IPAddress.Any, 1450);
//Listen asynchronously on port 1450 for coming messages (Invite, Bye, etc).
clientSocket.Bind(ourEP);

//Receive data from any IP.
EndPoint remoteEP = (EndPoint)(new IPEndPoint(IPAddress.Any, 0));

byteData = new byte[1024];
//Receive data asynchornously.
clientSocket.BeginReceiveFrom(byteData,
                           0, byteData.Length,
                           SocketFlags.None,
                           ref remoteEP,
                           new AsyncCallback(OnReceive),
                           null); 
```

this is connect button function:

```
private void btnCall_Click(object sender, EventArgs e)
{
    //Get the IP we want to connect.
    otherPartyIP = new IPEndPoint(IPAddress.Parse(txtCallToIP.Text), 1450);
    otherPartyEP = (EndPoint)otherPartyIP;
} 
```

I make chat application peer to peer over internet. i opened port 1450 firewall and add port forward but it's not connecting. Please can you help?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:42:59.150

使用 UDP 时，您必须确保正确设置数据包可以传输的 HOPS 数量。

我不确定，但我认为默认值是 0 或 1。

使用套接字上的 Ttl 属性进行试验。如果您在很短的路径上进行测试，请尝试将其设置为 10。

或者将其设置为更高的字节，因为数据报的 ttl 属性表示数据包可以通过到达其目的地的点/路由器（实际上是跃点）的数量。

取值范围可以是 0 到 255。

希望这可以帮助

# java - waiting Thread never wakes up

> ID：11116247
> 
> 赞同：1
> 
> 时间：2012-06-20T09:09:59.840
> 
> 标签：java, multithreading, wait, notify

I have a ThreadManager with two Threads. One for gui-relevant requests and one for measurement-relevant requests. The are both running and checking their queue of requests, if there is any, they are processing the request. One can add requests at any time, using the static `ThreadManager.addGuiRequest(eGuiRequest)` and `ThreadManager.addMeasRequest(eMeasRequest)` methods. Now both of those need to be initialized which is done by adding a `INIT` request to the corresponding queue. But the initialization of the measurement is depending on the fact that the gui is already initialized. I tried to solve this using `wait()/notify()`, but I can not get it working.

Here is a SSCCE. At startup, both queues have a INIT request added and are then started. The measurement initialization detects that the gui is not yet initialized and perfomrs a `wait()`. The gui initializes (simulated by sleeping for 5s). This all works fine.

After the gui initialized, it tries to wake up the measurement thread, but the measurement thread does not wake up... I based my `wait()/notify()` code on [this article](http://www.exampledepot.com/egs/java.lang/PauseThread.html). What is going wrong here?

```
import java.util.LinkedList;
import java.util.NoSuchElementException;

public class ThreadManager {    
    public static void main(String[] args) {
        new ThreadManager();
        ThreadManager.addMeasRequest(eMeasRequest.OTHER_STUFF);
    }

    public enum eGuiRequest { INIT, OTHER_STUFF; }
    public enum eMeasRequest { INIT, OTHER_STUFF; }

    private static LinkedList<eGuiRequest> guiQueue = new LinkedList<eGuiRequest>();
    private static LinkedList<eMeasRequest> measQueue = new LinkedList<eMeasRequest>();
    private static Thread guiThread, measThread;
    protected boolean initialized = false;

    public ThreadManager() {
        final int waitMs = 200;    
        guiThread = new Thread(new Runnable() {
            @Override
            public void run() {
                while (true) {
                    try {
                        if (guiQueue.isEmpty()) sleepMs(waitMs);
                        else {
                            eGuiRequest req = guiQueue.getFirst();
                            processGuiRequest(req);
                            guiQueue.removeFirst();
                        }
                    } catch (NoSuchElementException e) {}
                }
            }

            private void processGuiRequest(eGuiRequest req) {
                System.out.println("T: " + "Processing Gui request: " + req);
                switch (req) {
                case INIT:
                    // do some initializiation here - replaced by a wait:
                    sleepMs(5000);
                    System.out.println("I: " + "guiThread finished, waking up measThread");
                    synchronized (measThread) {
                        initialized = true;
                        measThread.notify();
                    }
                    break;
                case OTHER_STUFF:
                    // do other stuff
                    break;
                }
            }
        });
        measThread = new Thread(new Runnable() {
            @Override
            public void run() {
                while (true) {
                    try {
                        if (measQueue.isEmpty()) sleepMs(waitMs);
                        else {
                            eMeasRequest req = measQueue.getFirst();
                            processMeasurementRequest(req);
                            measQueue.removeFirst();
                        }
                    } catch (NoSuchElementException e) {}
                }
            }

            private void processMeasurementRequest(eMeasRequest req) {
                if (req == eMeasRequest.INIT) { // if init, wait until GUI is initialized
                    synchronized (this) {
                        while (!initialized) {
                            System.out.println("I: " + "measThread waits for guiThread to finish initializiation");
                            try {
                                wait();
                            } catch (Exception e) {}
                            System.out.println("I: " + "measThread awakes");
                        }
                    }
                }
                System.out.println("T: " + "Processing Measurement request: " + req);
                // process request here:
                sleepMs(5000);
            }
        });

        addGuiRequest(eGuiRequest.INIT);
        addMeasRequest(eMeasRequest.INIT);

        guiThread.start();
        measThread.start();
    }

    public static void sleepMs(int ms) {
        try {
            Thread.sleep(ms);
        } catch (InterruptedException ee) {}
    }

    public static void addGuiRequest(eGuiRequest req) {
        guiQueue.add(req);
    }

    public static void addMeasRequest(eMeasRequest req) {
        measQueue.add(req);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T09:16:01.410

GUI 线程调用`notify()`on `measThread`（类型为 Thread），`processMeasurementRequest()`方法调用`wait()`on `this`，这是由`measThread`.

我建议使用由两个线程共享的特定对象来等待和通知：

```
private static final Object GUI_INITIALIZATION_MONITOR = new Object(); 
```

此外，我将使用 BlockingQueue，而不是使用 LinkedList 并在请求之间睡眠任意时间：这将允许消费线程在有请求时立即处理请求，并避免从睡眠状态中不必要的唤醒。

此外，您可以使用初始化为 1 的 CountDownLatch 来代替低级等待/通知。GUI 线程`countDown()`在初始化时将进行闩锁，而测量线程将`await()`在 GUI 线程调用之前进行闩锁`countDown()`。这会将复杂的同步和通知内容委托给更高级、经过良好测试的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:34:01.623

主要问题是您调用，但在匿名类上调用`notify()`。解决此问题的最简单方法是创建一个特殊对象进行同步。例如，您创建一个字段：`measThread``wait()`

```
private static final Object LOCK = new Object(); 
```

然后你使用这个对象编写同步块并像这样调用它的方法：

```
synchronized (LOCK) {
    while (!initialized) LOCK.wait();
} 
```

另外我不得不说，这段代码根本没有对从不同线程访问的字段使用任何同步，这意味着它可以随时中断。这两个队列都是在您创建的线程之外访问的，这意味着您应该始终使用锁定来访问它们，或者您可以使用内置的同步列表使它们成为线程安全的：

```
quiQueue = Collections.synchronizedList(new LinkedList<eGuiRequest>()); 
```

`initialized`是从同步块访问的，但现在它们在不同的锁上同步（我在回答开始时已经描述了这个问题）。如果你解决了这个问题，`initialized`它也将正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T09:40:35.710

只是不要在启动时发送初始化请求来测量。在执行 init gui 请求后从 processGuiRequest() 发送它。然后不需要等待/通知的东西。

# c++ - Creating a code editor for javascript with Qt 4.8 (C++)

> ID：11116248
> 
> 赞同：-2
> 
> 时间：2012-06-20T09:10:06.317
> 
> 标签：c++, qt, editor

I want to create an intelligent code editor for javascript (like notepad++) using C++ in Qt 4.8

What are your suggestions?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:13:45.850

懒惰问题的懒惰回答：

QtCreator 有一个 JavaScript 编辑器，带有语法高亮和所有花哨的东西。QtCreator 是用 Qt 编写的。如果您只想使用编辑器，请使用 QtCreator；如果您想创建自己的编辑器，请查看源代码。

# python - create_string_buffer how to get used size

> ID：11116252
> 
> 赞同：3
> 
> 时间：2012-06-20T09:10:13.847
> 
> 标签：python, ctypes, string-length

How can I determine the used size/length of a buffer created with create_string_buffer?

```
buffer = create_string_buffer(1000) 
```

e.g. in buffer I have 3 values and 997 unused -> how it's possible to get the 3?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T10:13:49.080

你有什么理由不能做`len(buffer.value)`吗？

为了纯粹的理论上的乐趣——如果你可以使用上述方法，我认为没有理由这样做——我会提到你也可以做`buffer.raw.find("\x00")`or `list(buffer).index("\x00")`。但是，如果字符串未正确以空值结尾，则这些失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T04:40:05.270

你可以：

1.  让填充缓冲区的函数返回使用的缓冲区量。
2.  查找缓冲区的终止条件，例如*nul*。
3.  使用数据中从未使用过的值初始化缓冲区，然后查找*终止*数据的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T09:54:08.577

```
In [1]: from ctypes import *

In [2]: s = create_string_buffer(1000)

In [3]: s[0] = '1'

In [4]: s[1] = '2'

In [5]: s[2] = '3'

In [6]: s
Out[6]: <ctypes.c_char_Array_1000 at 0x8ca126c>

In [7]: for i, c in enumerate(s):
   ...:     if c == '\x00':
   ...:         break
   ...:         

In [8]: i
Out[8]: 3 
```

C 字符串以空值结尾，因此循环遍历字符串，直到找到 '\x00'。

# c# - linq 查询检查现有选择的任何方式？

> ID：11116254
> 
> 赞同：0
> 
> 时间：2012-06-20T09:10:22.683
> 
> 标签：c#, .net, linq

我有一个报价，可以是任意数量的类别。但是，我不希望该提议出现两次或更多。

我想知道是否有可能有一个 where 子句来确定该提议是否已经存在于该 select 语句中，如果是这样显然可以忽略它。

这是 linq 查询：

```
Offers = from o in offerCategories
         orderby o.RewardCategory.Ordering, o.Order  
         where o.RewardOffer.IsDeleted == false
         select new OfferOverviewViewModel
         {
             Partner = o.RewardOffer.Partner,
             Description = String.Format("{0} {1}", o.RewardOffer.MainTitle, o.RewardOffer.SecondaryTitle),
             OfferId = o.OfferId,
             FeaturedOffer = o.RewardOffer.FeaturedOfferOrder.HasValue,
             Categories = from c in offerCategories.Where(oc => oc.OfferId == o.OfferId)
                          orderby c.RewardCategory.Ordering
                          select new CategoryDetailViewModel
                          {
                              Description = c.RewardCategory.DisplayName
                          }

         }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:33:43.327

你可以使用 Distinct()，但是你的 viewmodel 应该覆盖 Equals，或者你需要一个 EqualityComparer：

```
public class OfferEqualityComparer: IEqualityComparer<OfferOverviewViewModel> {

   public bool Equals(OfferOverviewViewModel x, OfferOverviewViewModel y) {
      return Equals(x.OfferId, y.OfferId);
   }

   public int GetHashCode(OfferOverviewViewModel x) {
      return x.OfferId.GetHashCode();
   }

}

Offers = (from o in offerCategories
                     orderby o.RewardCategory.Ordering, o.Order  
                     where o.RewardOffer.IsDeleted == false
                     select new OfferOverviewViewModel
                     {
                         Partner = o.RewardOffer.Partner,
                         Description = String.Format("{0} {1}", o.RewardOffer.MainTitle, o.RewardOffer.SecondaryTitle),
                         OfferId = o.OfferId,
                         FeaturedOffer = o.RewardOffer.FeaturedOfferOrder.HasValue,
                         Categories = from c in offerCategories.Where(oc => oc.OfferId == o.OfferId)
                                      orderby c.RewardCategory.Ordering
                                      select new CategoryDetailViewModel
                                      {
                                          Description = c.RewardCategory.DisplayName
                                      }

                     })
   .Distinct(new OfferEqualityComparer()); 
```

# iphone - C++ forward reference in IOS Project (forward references to 'enum' type)

> ID：11116260
> 
> 赞同：2
> 
> 时间：2012-06-20T09:10:51.053
> 
> 标签：iphone, objective-c, ios, xcode

I'm using a SDK in one of my projects and when adding in the libraries etc, I get an error from this line of code, which is from inside a .h file. I cannot change the .m since its not available to me. Its inside .a (lib)

```
-(enum scanDeviceID)ID; 
```

And the error message is:

Semantic Issue ISO C++ forbids forward references to 'enum' types

Are there any compilier/build setting that I can modify to make this work?

Failing that, I know very little C++, is there something on the line of code I can change to make it work?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:32:10.413

这行代码说这个方法返回一个在`scanDeviceID`枚举中命名的元素。问题是编译器没有看到该枚举的声明。在 .h 文件中的某处，您应该有该声明。导入文件应该可以修复它。

# javascript - 如果屏幕低于 480 像素，则阻止 Javascript 继续执行功能

> ID：11116262
> 
> 赞同：4
> 
> 时间：2012-06-20T09:10:56.473
> 
> 标签：javascript, jquery, css, cross-platform, media-queries

首先，我不是 javascript 专家。我正在疯狂地试图弄清楚如何有条件地执行某个 javascript。我正在使用 JQuery 将我的块绝对居中在浏览器页面中，但前提是屏幕尺寸大于 480 像素（换句话说，我不希望此脚本在智能手机上运行）。我正在使用 CSS 媒体查询来表明我的请求。问题是，这个脚本适用于所有智能手机、Safari 5+、IE10、Firefox 13。但它不适用于 IE6-9 和 Opera 12（据我了解，它们不支持转换）。谁能帮我弄清楚我做错了什么？如果有更好的方法来做到这一点？（我在 CSS 中尝试了@media 查询，但无论如何脚本都会继续运行）......我非常感谢您的帮助。

```
 <script>
    if (matchMedia('only screen and (max-device-width:800px) and ' + '(orientation: portrait)').matches) {
        // smartphone/iphone... maybe run some small-screen related dom scripting?
        event.preventDefault(); 
    } else{

        //Absolute Content Center
        function CenterItem(theItem){
            var winWidth=$(window).width();
            var winHeight=$(window).height();
            var windowCenter=winWidth/2;
            var itemCenter=$(theItem).width()/2;
            var theCenter=windowCenter-itemCenter;
            var windowMiddle=winHeight/2;
            var itemMiddle=$(theItem).height()/2;
            var theMiddle=windowMiddle-itemMiddle;
            if(winWidth>$(theItem).width()){ //horizontal
                $(theItem).css('left',theCenter);
            } else {
                $(theItem).css('left','0');
            }
            if(winHeight>$(theItem).height()){ //vertical
                $(theItem).css('top',theMiddle);
            } else {
                $(theItem).css('top','0');
            }
        }
        $(document).ready(function() {
            CenterItem('.content');
        });
        $(window).resize(function() {
            CenterItem('.content');
        });
    } //end of "else" (normal execution)

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:40:22.183

如果媒体查询不匹配，最简单的事情是不附加事件处理程序。

```
$.fn.extend({
    centerItem: function () {
        return this.each(function () {
            var $this   = $(this),
                hCenter = ( $(window).width() - $this.width() ) / 2,
                vCenter = ( $(window).height() - $this.height() ) / 2;

            $this.css({
                left: hCenter > 0 ? hCenter : 0,
                top:  vCenter > 0 ? vCenter : 0
            });
        });
    }
});

$(function() {
    var bigScreen = 'only screen and (max-device-width:800px) and (orientation: portrait)';

    if ( matchMedia(bigScreen).matches ) {
        $(window).resize(function() {
            $('.content').centerItem();
        });
    }
}); 
```

笔记

*   `$()`替换`$(document).ready()`. 见[http://api.jquery.com/ready/](http://api.jquery.com/ready/)
*   按照惯例，只有对象构造函数以大写字母开头，所以你的`CenterItem()`函数实际上应该被调用`centerItem()`。
*   我已经把你的函数变成了一个 jQuery 插件。如果您觉得这令人困惑，您当然可以继续使用您自己的实现。
*   该`.css()`函数可以接受一个对象参数，因此您可以一步设置多个 CSS 属性。
*   我已经使用三元运算符 ( `expression ? ifTrue : ifFalse`) 来替换`if`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T09:23:41.223

你可以试试这个：-

```
<script>
    var screenWidth = screen.width;

    if (screenWidth > 480 ) {

    //Absolute Content Center
    function CenterItem(theItem){
        var winWidth=$(window).width();
        var winHeight=$(window).height();
        var windowCenter=winWidth/2;
        var itemCenter=$(theItem).width()/2;
        var theCenter=windowCenter-itemCenter;
        var windowMiddle=winHeight/2;
        var itemMiddle=$(theItem).height()/2;
        var theMiddle=windowMiddle-itemMiddle;
        if(winWidth>$(theItem).width()){ //horizontal
            $(theItem).css('left',theCenter);
        } else {
            $(theItem).css('left','0');
        }
        if(winHeight>$(theItem).height()){ //vertical
            $(theItem).css('top',theMiddle);
        } else {
            $(theItem).css('top','0');
        }
    }
    $(document).ready(function() {
        CenterItem('.content');
    });
    $(window).resize(function() {
        CenterItem('.content');
    });
}

</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T09:24:18.727

由于 IE，要在所有浏览器中获得准确的高度和宽度是相当重要的，但不用担心是所有浏览器的解决方案，包括 IE 6 到最新版本。

这是这两个功能：

```
 if (matchMedia('only screen and (max-device-width:800px) and ' + '(orientation: portrait)').matches) {
        // smartphone/iphone... maybe run some small-screen related dom scripting?
        event.preventDefault(); 
    } else{

        //Absolute Content Center

        $(document).ready(function() {
            CenterItem('.content');
        });
        $(window).resize(function() {
            CenterItem('.content');
        });
    } //end of "else" (normal execution)

function CenterItem(theItem){
                  var winWidth=getWindowWidth();
                  var winHeight=getWindowHeight();
                  var windowCenter=winWidth/2;
                  var itemCenter=$(theItem).width()/2;
                  var theCenter=windowCenter-itemCenter;
                  var windowMiddle=winHeight/2;
                  var itemMiddle=$(theItem).height()/2;
                  var theMiddle=windowMiddle-itemMiddle;
                  if(winWidth>$(theItem).width()){ //horizontal
                      $(theItem).css('left',theCenter);
                  } else {
                      $(theItem).css('left','0');
                  }
                  if(winHeight>$(theItem).height()){ //vertical
                      $(theItem).css('top',theMiddle);
                  } else {
                      $(theItem).css('top','0');
                  }
              }

function getWindowHeight() {
  var myHeight = 0;
  if( typeof( window.innerWidth ) == 'number' ) {

    myHeight = window.innerHeight;
  } else if( document.documentElement && ( document.documentElement.clientWidth || document.documentElement.clientHeight ) ) {

    myHeight = document.documentElement.clientHeight;
  } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {

    myHeight = document.body.clientHeight;
  }
  return myHeight;
}
function getWindowWidth() {
  var myWidth = 0;
  if( typeof( window.innerWidth ) == 'number' ) {

    myWidth = window.innerWidth;
  } else if( document.documentElement && ( document.documentElement.clientWidth || document.documentElement.clientHeight ) ) {

    myWidth = document.documentElement.clientWidth;
  } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {

    myWidth = document.body.clientWidth;
  }
  return myWidth;
} 
```

这将帮助您在任何浏览器中获得准确的高度，这样您就可以应用您的逻辑。希望这有帮助！！！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T09:15:13.847

你可以做

```
window.innerHeight
window.innerWidth 
```

获取视口的尺寸。现在你可以这样做：

```
var width = window.innerWidth
if (width > 480){
      /* do desktop stuff*/
} 
```

作为替代方案，您可以使用 UserAgentString 和/或操作：

```
window.navigator 
```

（[更可靠的检测脚本](http://www.quirksmode.org/js/detect.html)）

但是，在某些情况下，任何一种尝试都可能失败。

`match-media`编辑：如果你发布你的功能会很好。

edit2：使用脚本进行正确的视口检测：[https ://stackoverflow.com/a/2035211/1047823](https://stackoverflow.com/a/2035211/1047823)

然后更改您的代码：

```
if ( getViewport()[0] < 480 ) {
        // smartphone/iphone... maybe run some small-screen related dom scripting?
        event.preventDefault(); 
    } else{
        // your desktop code
} 
```

# macos - 在基于视图的 Tableview 中重新排序 NSTableview 行

> ID：11116265
> 
> 赞同：4
> 
> 时间：2012-06-20T09:11:05.550
> 
> 标签：macos, cocoa, nstableview

根据苹果文档，拖放`NSTableView`委托方法仅适用于基于单元格的 TableViews，而不是基于 View 的。所以没有办法使用基于视图的拖放对行进行重新排序`NSTableView`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-24T08:01:03.140

我创建了一个[小型示例项目](https://github.com/besi/mac-quickies/tree/master/OutlineView)，`NSOutlineView`您可以在其中添加和删除项目以及重新排序它们。这不是一个，`NSTableView`但拖放协议的实现基本相同。

我一口气实现了拖放，所以最好看看[这个 commit](https://github.com/besi/mac-quickies/commit/e8d2c2506349fa00a342c291a0031c40a1f598e3)。

![截屏](../Images/83e455f395c1d6009ab4731fa2c52e92.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T09:17:24.173

拖放委托方法在基于视图的`NSTableView`. WWDC '11 中有一个关于基于视图的表格视图的精彩演示，其中包含关于拖放的冗长讨论。值得一看。

链接[在这里](https://developer.apple.com/videos/play/wwdc2011/120/)- 需要登录。

# ruby-on-rails - Rails 中的 Webrick 服务器错误

> ID：11116274
> 
> 赞同：2
> 
> 时间：2012-06-20T09:11:42.183
> 
> 标签：ruby-on-rails

> **可能重复：**
> [Ruby On Rails 3 和 Webrick 问题](https://stackoverflow.com/questions/5690200/ruby-on-rails-3-and-webrick-issue)

```
$ rails server
/Users/Vineeth/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug-base19-0.11.25/lib/ruby-debug-base.rb:1:in `require': dlopen(/Users/Vineeth/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug-base19-0.11.25
/lib/ruby_debug.bundle, 9): Symbol not found: _ruby_current_thread (LoadError)
  Referenced from: /Users/Vineeth/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug-base19-0.11.25/lib/ruby_debug.bundle
  Expected in: flat namespace
 in /Users/Vineeth/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug-base19-0.11.25/lib/ruby_debug.bundle - /Users/Vineeth/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug-base19-0.11.25/lib/ruby_debug.bu
ndle
        from /Users/Vineeth/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug-base19-0.11.25/lib/ruby-debug-base.rb:1:in `<top (required)>'
        from /Users/Vineeth/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug19-0.11.6/cli/ruby-debug.rb:5:in `require'
        from /Users/Vineeth/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug19-0.11.6/cli/ruby-debug.rb:5:in `<top (required)>'
Vineethsfrom /Users/Vineeth/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.4/lib/bundler/runtime.rb:68:in `require'
        from /Users/Vineeth/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.4/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
        from /Users/Vineeth/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.4/lib/bundler/runtime.rb:66:in `each'
        from /Users/Vineeth/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.4/lib/bundler/runtime.rb:66:in `block in require'
        from /Users/Vineeth/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.4/lib/bundler/runtime.rb:55:in `each'
        from /Users/Vineeth/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.4/lib/bundler/runtime.rb:55:in `require'
        from /Users/Vineeth/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.4/lib/bundler.rb:119:in `require'
        from /Users/Vineeth/QA4/config/application.rb:7:in `<top (required)>'
        from /Users/Vineeth/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands.rb:53:in `require'
        from /Users/Vineeth/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands.rb:53:in `block in <top (required)>'
        from /Users/Vineeth/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands.rb:50:in `tap'
        from /Users/Vineeth/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands.rb:50:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

当我尝试从 Aptana studio 启动服务器时，它显示如上......请帮我解决这个错误......谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T09:15:47.527

将您的调试器更改为

```
gem 'debugger' 
```

在您的 Gemfile 中。

消除

```
gem 'ruby-debug19' 
```

不要忘记`bundle install`再次运行。

# sql - 增加组的行号

> ID：11116275
> 
> 赞同：59
> 
> 时间：2012-06-20T09:11:46.410
> 
> 标签：sql, sql-server, sql-server-2005

我正在处理 SQL Server 2005 的查询，该查询需要返回带有两个“索引”字段的数据。每次“shade”列更改时，第一个索引“t_index”应该递增，而第二个索引在“shade”列中的值的分区内递增：

```
t_index s_index shade
1       1       A
1       2       A
1       3       A
1       4       A
1       5       A
2       1       B
2       2       B
2       3       B
2       4       B
2       5       B 
```

要获取 s_index 列，我使用以下内容：

```
Select ROW_NUMBER() OVER(PARTITION BY [shade] ORDER BY [shade]) as s_index 
```

我的问题是如何让第一个索引仅在“阴影”列中的值发生变化时才增加？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-06-20T09:20:54.077

这可以通过以下`DENSE_RANK()`功能来完成：

```
 DENSE_RANK() OVER(Order By [shade]) as t_index 
```

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2012-06-20T09:21:00.227

您可以尝试使用`DENSE_RANK()`：

```
SELECT
    shade,
    s_index = ROW_NUMBER() OVER(PARTITION BY [shade] ORDER BY [shade]),
    t_index = DENSE_RANK() OVER (ORDER BY [shade])
FROM dbo.YourTableNameHEre 
```

给出输出：

```
shade  s_index  t_index
  A      1        1
  A      2        1
  A      3        1
  A      4        1
  A      5        1
  B      1        2
  B      2        2
  B      3        2
  B      4        2
  B      5        2 
```

# xml - 寻找具有继承性的数据映射格式

> ID：11116279
> 
> 赞同：1
> 
> 时间：2012-06-20T09:12:00.373
> 
> 标签：xml, actionscript-3, inheritance, serialization, xml-serialization

现在，我有许多**XML**描述所有游戏对象，并设置了属性。例如：

```
<gameObject id="commonEnemy">
    ...
    <data>
        <life>100</life>
        <speed>12</speed>
    </data>
    <tags>
        <tag>KILLABLE</tag>
        <tag>COLLIDABLE</tag>
    </tags>
    ...
</gameObject> 
```

所有文件都有不同的*“组件”*（如上例中的**数据**和**标签**）。这些文件有近数千个，占用了大量磁盘空间。但是由于某些**游戏对象与其他对象** *“共享”*某些属性，因此我可以创建一个*默认*文件并从中继承其他文件，从而仅更改所需的内容。就像是：

```
<gameObject id="badassEnemy" import="commonEnemy">
    ...
    <data>
        <life>200</life> <!-- I'm increasing the life -->
    </data>
    <tags>
        <tag>KILLABLE</tag>
        <!-- And is not more collidable. Totally weird XML syntax, but just to make a point -->
        remove <tag>COLLIDABLE</tag>
    </tags>
    ...
</gameObject> 
```

但据我所知，XML默认不支持继承，对合并节点也不是很友好。

**我需要**的是某种格式，它允许我：

*   从一个对象继承
*   添加简单类型和数组类型
*   修改简单类型和数组类型
*   删除简单类型和数组类型

该数组应该通过索引或类似的东西来访问。我查看了**[diff](http://en.wikipedia.org/wiki/Diff)**格式，但我不能使用它，因为如果我更改默认类型，所有的孩子都会被破坏。我知道**自定义二进制**文件将是节省磁盘空间的方法，但该对象**必须可以**使用简单的记事本应用程序进行编辑。我还查看了**JSON**和**YAML**，它们似乎都没有考虑继承。

是否有一些数据格式可以让我做我想做的事？还是我需要编写自己的数据格式和解析器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:09:40.070

如果您担心磁盘空间，请考虑将其压缩：) 归档器大大减少了 XML。

很难实现继承，但可能但认为效率不高，这意味着所有这些 XML 共享相同的结构（和标签名称）。

然后你有 XML a 和 XML b 并迭代 b 并将它的孩子添加到 a。如果不添加而无需进一步检查，则必须检查标签是否存在，但如果发现相同，则必须合并它们（迭代）。

您是否绑定到 XML 格式？也许值得检查转换是否适当（转换为您提到的另一种格式，例如 JSON。转换它的构建工具比构建基于 XML 所需的功能要快得多。

此致

# android - 将字符串转换为int，制作一个地理点

> ID：11116282
> 
> 赞同：0
> 
> 时间：2012-06-20T09:12:09.540
> 
> 标签：android, string, int, geo

我在每一行都有一个带有 gps 坐标的文件：

```
9.34669876098644,48.2405319213867
9.36384963989269,48.2296714782715
9.3639497756958,48.2259712219238
9.36956977844238,48.2260589599609
9.36404991149908,48.2222709655763
9.36975955963135,48.2186508178712 
```

现在我想解析文件并制作地理点。首先，我打开文件并读取该行，然后拆分该行并将字符串转换为 int。但是在 Log.d("4:",point_t[0] + " - " + point_t[1]); 之后我得到了 NullPointerException

```
try{
    InputStream koord = getAssets().open("bib.txt");
    if (koord != null) {
        InputStreamReader input = new InputStreamReader(koord);
        BufferedReader buffreader = new BufferedReader(input);
        Log.d("2: ", "Read File");
        String line;
        while (( line = buffreader.readLine()) != null) {
            Log.d("3: ", line);
            String[] point_t = line.split(",");
            Log.d("4:",point_t[0] + " - " + point_t[1]);
            int x = Integer.parseInt(point_t[0]);
            int y = Integer.parseInt(point_t[1]);
            Log.d("Geopoint:",x + " - " + y);
            points.add(new GeoPoint((int)(x*1e6), (int)(y*1e6)));
            Log.d("5:","saved");
        }
        koord.close();
        polygon = new Polygon(points);
    }
}catch (Exception e) {
    // TODO: handle exception
}  

06-20 08:45:21.701: E/ActivityThread(231): Failed to find provider info for com.google.settings
06-20 08:45:21.711: E/ActivityThread(231): Failed to find provider info for com.google.settings
06-20 08:45:21.721: E/ActivityThread(231): Failed to find provider info for com.google.settings
06-20 08:45:21.971: D/dalvikvm(231): GC freed 3008 objects / 190136 bytes in 60ms
06-20 08:45:22.071: D/Checkpoint:(231): Start ArrayList
06-20 08:45:22.081: I/global(231): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
06-20 08:45:22.081: D/Checkpoint:(231): Read File
06-20 08:45:22.081: D/Checkpoint:(231): 9.34669876098644,48.2405319213867
06-20 08:45:22.081: D/Point:(231): 9.34669876098644 - 48.2405319213867
06-20 08:45:22.161: I/MapActivity(231): Handling network change notification:CONNECTED
06-20 08:45:22.171: E/MapActivity(231): Couldn't get connection factory client
06-20 08:45:22.381: D/dalvikvm(231): GC freed 983 objects / 342808 bytes in 62ms
06-20 08:45:22.391: D/AndroidRuntime(231): Shutting down VM
06-20 08:45:22.401: W/dalvikvm(231): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
06-20 08:45:22.401: E/AndroidRuntime(231): Uncaught handler: thread main exiting due to uncaught exception
06-20 08:45:22.425: E/AndroidRuntime(231): java.lang.NullPointerException
06-20 08:45:22.425: E/AndroidRuntime(231):  at com.google.android.maps.OverlayBundle.draw(OverlayBundle.java:42)
06-20 08:45:22.425: E/AndroidRuntime(231):  at com.google.android.maps.MapView.onDraw(MapView.java:476)
06-20 08:45:22.425: E/AndroidRuntime(231):  at android.view.View.draw(View.java:6535)
06-20 08:45:22.425: E/AndroidRuntime(231):  at android.view.ViewGroup.drawChild(ViewGroup.java:1531)
06-20 08:45:22.425: E/AndroidRuntime(231):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
06-20 08:45:22.425: E/AndroidRuntime(231):  at android.view.ViewGroup.drawChild(ViewGroup.java:1529)
06-20 08:45:22.425: E/AndroidRuntime(231):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
06-20 08:45:22.425: E/AndroidRuntime(231):  at android.view.View.draw(View.java:6641)
06-20 08:45:22.425: E/AndroidRuntime(231):  at android.widget.FrameLayout.draw(FrameLayout.java:352)
06-20 08:45:22.425: E/AndroidRuntime(231):  at android.view.ViewGroup.drawChild(ViewGroup.java:1531)
06-20 08:45:22.425: E/AndroidRuntime(231):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
06-20 08:45:22.425: E/AndroidRuntime(231):  at android.view.View.draw(View.java:6538)
06-20 08:45:22.425: E/AndroidRuntime(231):  at android.widget.FrameLayout.draw(FrameLayout.java:352)
06-20 08:45:22.425: E/AndroidRuntime(231):  at android.view.ViewGroup.drawChild(ViewGroup.java:1531)
06-20 08:45:22.425: E/AndroidRuntime(231):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
06-20 08:45:22.425: E/AndroidRuntime(231):  at android.view.ViewGroup.drawChild(ViewGroup.java:1529)
06-20 08:45:22.425: E/AndroidRuntime(231):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
06-20 08:45:22.425: E/AndroidRuntime(231):  at android.view.View.draw(View.java:6538)
06-20 08:45:22.425: E/AndroidRuntime(231):  at android.widget.FrameLayout.draw(FrameLayout.java:352)
06-20 08:45:22.425: E/AndroidRuntime(231):  at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1830)
06-20 08:45:22.425: E/AndroidRuntime(231):  at android.view.ViewRoot.draw(ViewRoot.java:1349)
06-20 08:45:22.425: E/AndroidRuntime(231):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1114)
06-20 08:45:22.425: E/AndroidRuntime(231):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1633)
06-20 08:45:22.425: E/AndroidRuntime(231):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-20 08:45:22.425: E/AndroidRuntime(231):  at android.os.Looper.loop(Looper.java:123)
06-20 08:45:22.425: E/AndroidRuntime(231):  at android.app.ActivityThread.main(ActivityThread.java:4363)
06-20 08:45:22.425: E/AndroidRuntime(231):  at java.lang.reflect.Method.invokeNative(Native Method)
06-20 08:45:22.425: E/AndroidRuntime(231):  at java.lang.reflect.Method.invoke(Method.java:521)
06-20 08:45:22.425: E/AndroidRuntime(231):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
06-20 08:45:22.425: E/AndroidRuntime(231):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
06-20 08:45:22.425: E/AndroidRuntime(231):  at dalvik.system.NativeStart.main(Native Method)
06-20 08:45:22.442: I/dalvikvm(231): threadid=7: reacting to signal 3
06-20 08:45:22.461: I/dalvikvm(231): Wrote stack trace to '/data/anr/traces.txt'
06-20 08:45:24.701: I/Process(231): Sending signal. PID: 231 SIG: 9 
```

@stuckless

```
Log.d("1: ", "Start ArrayList");
ArrayList<GeoPoint> points = new ArrayList<GeoPoint>();
try{
    InputStream koord = getAssets().open("bib.txt");
    if (koord != null) {
        InputStreamReader input = new InputStreamReader(koord);
        BufferedReader buffreader = new BufferedReader(input);
        Log.d("2: ", "Read File");
        String line;
        while (( line = buffreader.readLine()) != null) {
            Log.d("3: ", line);
            String[] point_t = line.split(",");
            Log.d("4:",point_t[0] + " - " + point_t[1]);
            double x = Double.parseDouble(point_t[0]);
            double y = Double.parseDouble(point_t[1]);
            Log.d("Geopoint:",x + " - " + y);
            points.add(new GeoPoint((int)(x*1e6), (int)(y*1e6)));
            Log.d("5:","saved");
        }
        koord.close();
        polygon = new Polygon(points);
    }
}catch (Exception e) {
    Log.e("APP","Failed", e);
    }        
    mapView.getOverlays().clear();
    mapView.getOverlays().add(polygon);
    mapView.invalidate();
} 
```

错误：

```
06-20 09:47:27.382: E/ActivityThread(324): Failed to find provider info for com.google.settings
06-20 09:47:27.382: E/ActivityThread(324): Failed to find provider info for com.google.settings
06-20 09:47:27.392: E/ActivityThread(324): Failed to find provider info for com.google.settings
06-20 09:47:27.702: D/dalvikvm(324): GC freed 3148 objects / 195472 bytes in 68ms
06-20 09:47:27.822: D/1:(324): Start ArrayList
06-20 09:47:27.822: I/global(324): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
06-20 09:47:27.822: D/2:(324): Read File
06-20 09:47:27.822: D/3:(324): 9.34669876098644,48.2405319213867
06-20 09:47:27.822: D/4:(324): 9.34669876098644 - 48.2405319213867
06-20 09:47:27.952: E/APP(324): Failed
06-20 09:47:27.952: E/APP(324): java.lang.NumberFormatException: 
06-20 09:47:27.952: E/APP(324):     at org.apache.harmony.luni.util.FloatingPointParser.parseDblImpl(Native Method)
06-20 09:47:27.952: E/APP(324):     at org.apache.harmony.luni.util.FloatingPointParser.parseDouble(FloatingPointParser.java:283)
06-20 09:47:27.952: E/APP(324):     at java.lang.Double.parseDouble(Double.java:285)
06-20 09:47:27.952: E/APP(324):     at de.bodprod.rettinfo.BOSLstItemDetail.onCreate(BOSLstItemDetail.java:93)
06-20 09:47:27.952: E/APP(324):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-20 09:47:27.952: E/APP(324):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
06-20 09:47:27.952: E/APP(324):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
06-20 09:47:27.952: E/APP(324):     at android.app.ActivityThread.access$2200(ActivityThread.java:119)
06-20 09:47:27.952: E/APP(324):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
06-20 09:47:27.952: E/APP(324):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-20 09:47:27.952: E/APP(324):     at android.os.Looper.loop(Looper.java:123)
06-20 09:47:27.952: E/APP(324):     at android.app.ActivityThread.main(ActivityThread.java:4363)
06-20 09:47:27.952: E/APP(324):     at java.lang.reflect.Method.invokeNative(Native Method)
06-20 09:47:27.952: E/APP(324):     at java.lang.reflect.Method.invoke(Method.java:521)
06-20 09:47:27.952: E/APP(324):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
06-20 09:47:27.952: E/APP(324):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
06-20 09:47:27.952: E/APP(324):     at dalvik.system.NativeStart.main(Native Method)
06-20 09:47:28.043: I/MapActivity(324): Handling network change notification:CONNECTED
06-20 09:47:28.052: E/MapActivity(324): Couldn't get connection factory client
06-20 09:47:28.272: D/dalvikvm(324): GC freed 1440 objects / 382480 bytes in 66ms
06-20 09:47:28.292: D/AndroidRuntime(324): Shutting down VM
06-20 09:47:28.292: W/dalvikvm(324): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
06-20 09:47:28.292: E/AndroidRuntime(324): Uncaught handler: thread main exiting due to uncaught exception
06-20 09:47:28.302: E/AndroidRuntime(324): java.lang.NullPointerException
06-20 09:47:28.302: E/AndroidRuntime(324):  at com.google.android.maps.OverlayBundle.draw(OverlayBundle.java:42)
06-20 09:47:28.302: E/AndroidRuntime(324):  at com.google.android.maps.MapView.onDraw(MapView.java:476)
06-20 09:47:28.302: E/AndroidRuntime(324):  at android.view.View.draw(View.java:6535)
06-20 09:47:28.302: E/AndroidRuntime(324):  at android.view.ViewGroup.drawChild(ViewGroup.java:1531)
06-20 09:47:28.302: E/AndroidRuntime(324):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
06-20 09:47:28.302: E/AndroidRuntime(324):  at android.view.ViewGroup.drawChild(ViewGroup.java:1529)
06-20 09:47:28.302: E/AndroidRuntime(324):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
06-20 09:47:28.302: E/AndroidRuntime(324):  at android.view.View.draw(View.java:6641)
06-20 09:47:28.302: E/AndroidRuntime(324):  at android.widget.FrameLayout.draw(FrameLayout.java:352)
06-20 09:47:28.302: E/AndroidRuntime(324):  at android.view.ViewGroup.drawChild(ViewGroup.java:1531)
06-20 09:47:28.302: E/AndroidRuntime(324):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
06-20 09:47:28.302: E/AndroidRuntime(324):  at android.view.View.draw(View.java:6538)
06-20 09:47:28.302: E/AndroidRuntime(324):  at android.widget.FrameLayout.draw(FrameLayout.java:352)
06-20 09:47:28.302: E/AndroidRuntime(324):  at android.view.ViewGroup.drawChild(ViewGroup.java:1531)
06-20 09:47:28.302: E/AndroidRuntime(324):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
06-20 09:47:28.302: E/AndroidRuntime(324):  at android.view.ViewGroup.drawChild(ViewGroup.java:1529)
06-20 09:47:28.302: E/AndroidRuntime(324):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258)
06-20 09:47:28.302: E/AndroidRuntime(324):  at android.view.View.draw(View.java:6538)
06-20 09:47:28.302: E/AndroidRuntime(324):  at android.widget.FrameLayout.draw(FrameLayout.java:352)
06-20 09:47:28.302: E/AndroidRuntime(324):  at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1830)
06-20 09:47:28.302: E/AndroidRuntime(324):  at android.view.ViewRoot.draw(ViewRoot.java:1349)
06-20 09:47:28.302: E/AndroidRuntime(324):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1114)
06-20 09:47:28.302: E/AndroidRuntime(324):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1633)
06-20 09:47:28.302: E/AndroidRuntime(324):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-20 09:47:28.302: E/AndroidRuntime(324):  at android.os.Looper.loop(Looper.java:123)
06-20 09:47:28.302: E/AndroidRuntime(324):  at android.app.ActivityThread.main(ActivityThread.java:4363)
06-20 09:47:28.302: E/AndroidRuntime(324):  at java.lang.reflect.Method.invokeNative(Native Method)
06-20 09:47:28.302: E/AndroidRuntime(324):  at java.lang.reflect.Method.invoke(Method.java:521)
06-20 09:47:28.302: E/AndroidRuntime(324):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
06-20 09:47:28.302: E/AndroidRuntime(324):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
06-20 09:47:28.302: E/AndroidRuntime(324):  at dalvik.system.NativeStart.main(Native Method)
06-20 09:47:28.323: I/dalvikvm(324): threadid=7: reacting to signal 3 
```

**解决方案：**

现在它可以工作了，我在 eclipse new 中使用坐标创建文件并现在使用它：

```
ArrayList<GeoPoint> points = new ArrayList<GeoPoint>();
try{
    InputStream koord = getAssets().open("biberach");
    if (koord != null) {
        InputStreamReader input = new InputStreamReader(koord);
        BufferedReader buffreader = new BufferedReader(input);
        String line;
        while (( line = buffreader.readLine()) != null) {
            String[] point_t = line.split(",");
                double y = Double.parseDouble(point_t[0]);
                double x = Double.parseDouble(point_t[1]);
                points.add(new GeoPoint((int)(x*1e6), (int)(y*1e6)));
        }
        koord.close();
        polygon = new Polygon(points);
    }
}catch (Exception e) {
    Log.e("APP","Failed", e);
} 
```

文件有错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:27:41.250

由于您正在捕获并忽略该块中的任何异常，因此请尝试在空捕获区域中注销异常，您会看到您得到一个`NumberFormatException`

```
Exception in thread "main" java.lang.NumberFormatException: For input string: "9.34669876098644"
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
    at java.lang.Integer.parseInt(Integer.java:481)
    at java.lang.Integer.parseInt(Integer.java:514)
    at TestParseInt.main(TestParseInt.java:4) 
```

你不能`parseInt`使用双数（即使它确实有效，你最终只会得到整数部分，这不是你想要的）。尝试`Double.parseDouble()`改用。

换句话说

```
 double x = Double.parseDouble(point_t[0].trim());
        double y = Double.parseDouble(point_t[1].trim()); 
```

而不是这个

```
}catch (Exception e) {
    // TODO: handle exception
} 
```

尝试使用

```
}catch (Exception e) {
    Log.e("APP","Failed", e);
} 
```

**UPDATE1：** 也许确保你已经删除了空格，所以使用 `split("\\s*,\\s*)`然后`.trim()`在字符串上。不过，Double.parseDouble() 应该允许空格。

**UPDATE2：** 在你的`locale`，是`decimal`一个有效的分隔符，还是一个`comma`？如果是这样，那么您可能必须使用`DecimalFormat`来解析值并强制使用`US`语言环境

我从您的个人资料中看到您在德国，但您解析的数字不是德语。所以，试试这个..

```
DecimalFormat parser = (DecimalFormat)DecimalFormat.getInstance(Locale.US);
double x = (Double)parser.parse("48.2405319213867"); 
```

这迫使解析器使用美国语言环境来解析数字（即，. 是十进制）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:33:33.553

您做错了。因为在您的文本文件字符串中，首先将其以**空间**为基础，然后以**“ ;”** 为基础：

```
 String line="";
    while (( line = buffreader.readLine()) != null) {
        Log.d("3: ", line);
        line +=line;
    }
    String[] point_arr = line.split(" ");
    for (int i = 0; i <= point_arr.Length - 1; i++)
    {
        String[] point_t = point_arr[i].split(",");
        Log.d("4:",point_t[0] + " - " + point_t[1]);
        int x = Integer.parseInt(point_t[0]);
        int y = Integer.parseInt(point_t[1]);
        Log.d("Geopoint:",x + " - " + y);
        points.add(new GeoPoint((int)(x*1e6), (int)(y*1e6)));
        Log.d("5:","saved");
    } 
```

**编辑：**或者它可能首先在**“;”**的基础上分割你的字符串，然后在你放入文件中的**空间基础上**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:23:48.137

首先，您必须获取所有行 String[]。然后，如您所见，您必须用“”（空格）拆分以获得两个坐标，然后将这些字符串再次用“，”拆分以获得 logtitude 和 latitute。所以用一条线你会得到两个坐标，而不是一个

还有，这部分

```
 int x = Integer.parseInt(point_t[0]);
        int y = Integer.parseInt(point_t[1]);
        Log.d("Geopoint:",x + " - " + y);
        points.add(new GeoPoint((int)(x*1e6), (int)(y*1e6))); 
```

不好，应该是：

```
 double x = Double.parseDouble(point_t[0]);
        double y = Double.parseDouble(point_t[1]);
        Log.d("Geopoint:",x + " - " + y);
        points.add(new GeoPoint((int)(x*1e6), (int)(y*1e6))); 
```

因为，当你有 20.123456 数字时，你得到 20000000，而我的方法得到 20123456

另外，在 catch 之前，再添加一个 catch

```
catch(NumberFormatException e) {
    //this occurs when can't convert String to specified number format, so it means, that you give bad number to parse
} 
```

它不能回答您的确切问题，但可以帮助您完成工作

# c++ - std::regex_match 在传递右值参数时给出错误的匹配结果

> ID：11116283
> 
> 赞同：1
> 
> 时间：2012-06-20T09:12:10.640
> 
> 标签：c++, visual-c++, c++11

希望有人能回答这个问题。这是一些示例代码。

```
namespace std {
#ifdef UNICODE
typedef wstring tstring;
typedef wstringstream tstringstream;
#define tcout std::wcout
#else
typedef string tstring;
typedef stringstream tstringstream;
#define tcout std::cout
#endif
typedef regex_iterator<std::tstring::const_iterator> TRegexIterator;
}

std::TRegexIterator::regex_type nPattern(_TEXT("-?[0-9]+(\\.[0-9]+)?((e|E)(\\+|-)[0-9]+)?"));
std::match_results<std::tstring::const_iterator> theMatches;
std::tstring test(_TEXT("-1.323E-23"));

tcout << _TEXT("Lvalue target string") << std::endl;
if (std::regex_match(test, theMatches, nPattern))
{
    for (auto i= 0; i < theMatches.size(); ++i)
        tcout << theMatches[i] << std::endl;
}

tcout << _TEXT("Rvalue target string") << std::endl;
if (std::regex_match(std::tstring(_TEXT("-1.323E-23")), theMatches, nPattern))
{
    for (auto i= 0; i < theMatches.size(); ++i)
        tcout << theMatches[i] << std::endl;
} 
```

好的，所以我遇到的问题是带有右值目标字符串的第一个匹配结果是
“1.323E-23”（是的，带有起始空格）而不是预期的“-1.323E-23”。我认为这是因为“std::match_results”存储指针而不是数据，但在这种情况下，为什么“std::regex_match”的第一个参数是“const std::string&”？（这是我从 Intellisense 验证的）。“std::string&”似乎更合适。我正在使用 VS11 beta C++ 编译器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:48:31.390

是的，

> 这是因为“std::match_results”存储的是指针而不是数据。

例如，测试以下代码：

```
tcout << _TEXT("Lvalue target string") << std::endl;
if (std::regex_match(test, theMatches, nPattern))
{
    test = _TEXT(""); // change 'test' to invalidate 'theMatches' pointers
    for (auto i= 0; i < theMatches.size(); ++i)
        tcout << theMatches[i] << std::endl; // MEMORY ERROR!!!
} 
```

但是，为什么你相信

> “std::string&”似乎比“const std::string&”更合适。

我认为“const std::string&”似乎更合适，因为“std::regex_match”不需要更改此参数。

# spring - Spring服务器启动事件

> ID：11116285
> 
> 赞同：0
> 
> 时间：2012-06-20T09:12:22.180
> 
> 标签：spring, startup

我面临一个问题。我正在为我的 spring maven 项目使用 tomcat 服务器，并且我想在服务器启动时将我的应用程序订阅到 facebook。我已经尝试过 ApplicationListener ContextRefreshedEvent。它在应用程序上下文初始化时被调用，但问题是当时我的服务器尚未完全启动，因此我的应用程序不可公开访问，这在我的情况下是必需的，因为 facebook 订阅需要使用应用程序公共 URL 进行验证。所以我想在我的服务器完全启动而不是在应用程序上下文初始化时进行订阅。知道我该怎么做吗？我有没有可以告诉我服务器已完全启动的应用程序级事件侦听器？

问候贾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:15:10.870

您可以像这样注释 bean 方法：

```
@PostConstruct
public void yrSubscribeLogic() {} 
```

应用程序上下文只能在服务器完全启动后加载。

# regex - 如何在 find 命令下使用正则表达式

> ID：11116286
> 
> 赞同：0
> 
> 时间：2012-06-20T09:12:25.340
> 
> 标签：regex, linux, find

我需要列出所有具有 alien.digits 数字的文件名可以从 1 到多个，但如果它是任何其他东西的混合物，如 alien.htm、alien.1php、alien.1234.pj.123、外星人.123.12，外星人.12.12p.234htm

我写道： find home/jassi/ -name "alien.[0-9]*" 但它不工作并且它匹配一切。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:20:05.100

我想你想要的是

```
find home/jassi/ -regex ".*/alien\.[0-9]+" 
```

使用`-name`选项，您无需指定*正则表达式*，而是指定*glob 模式*。

请注意，find 期望整个路径与正则表达式匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:24:22.737

试试这个：`find home/jassi/ -name "alien\.[0-9]+$"` 它将匹配所有包含`alien.`并以至少一位数字结尾但仅以数字结尾的文件。该`$`字符表示*字符串的结尾*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T09:15:21.287

`*`修饰符表示前一个匹配的 0 个或多个，并且表示`.`任何字符，这意味着它正在匹配`alien`。

试试这个：

```
alien\.[0-9]+$ 
```

`+`修饰符表示前一个匹配项的 1 个或多个，并且已`.`转义为文字字符，`$`末尾的 the 表示“字符串结尾”。

`^`如果您想确保只有与您的正则表达式完全匹配的文件，您还可以在正则表达式的开头添加一个。该`^`字符的意思是“字符串的开头”，所以`^alien\.[0-9]+$`会匹配`alien.1234`，但不会匹配`not_an_alien.1234`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T10:27:42.993

它对我有用：find home/jassi/ type -f -regex ".*/alien.[0-9]+"

我必须提供 type -f 来检查它是否是一个文件，否则它会显示同名的目录。

谢谢bmk。我只是想通了，同时你的反应完全一样。伟大的！

# android - Android Gesture API，需要更好的响应 onGesturePerformed()

> ID：11116287
> 
> 赞同：2
> 
> 时间：2012-06-20T09:12:28.070
> 
> 标签：android, android-gesture

Android Gesture API 是一个真正的帮助，它消除了重新实现一个相当复杂的轮子的需要。

然而，我需要 API 更加“响应”。

作为一个例子。假设我定义了一个手势，例如“圆圈”，其中一个手指手势事件被定义为，是的，你猜对了，一个手指圆圈。

如果用户连续执行此手势，而不抬起手指，我希望重复调用“onGesturePerformed()”，即用户继续执行相同的手势。

我想要一个大概 1/4 秒的发射粒度。我看到了一个类似的问题，但在这种情况下，用户想要更长的延迟，而不是更短的延迟，即用户不抬起手指。

提前谢谢了。

保罗

# ios - 为什么我必须在头文件中定义两次变量？

> ID：11116289
> 
> 赞同：3
> 
> 时间：2012-06-20T09:12:40.763
> 
> 标签：ios, objective-c, cocoa-touch

为什么我必须在头文件中定义两次变量？这些变量之间有什么区别？

第一个定义在这里：

```
@interface MyController: UIViewController
{
    NSInteger selectedIndex;
} 
```

第二个定义在这里：

```
@property (nonatomic) NSInteger selectedIndex; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T09:24:07.587

> 您所看到的在早期版本的 Objective-C 中是必需的，但现在不再需要了。
> 
> 在 NeXT 使用的 Objective-C 的第一个版本中，直到引入新的运行时（在 Mac OS X 上使用 Objective-C 2.0），所有实例变量都必须在其`@interface`. 原因是如果你对一个类进行子类化，编译器需要知道类的实例变量布局，以便它可以看到放置子类的实例变量的偏移量。
> 
> 当引入属性时，综合属性必须由类结构中的实例变量“支持”。因此，您必须同时声明实例变量和属性。
> 
> 以上所有都不再正确。较新的 Objective-C 在查找实例变量偏移的方式上不那么脆弱，这意味着一些变化：
> 
> *   并非所有实例变量都需要在`@interface`. 它们现在可以在`@implementation`: 中定义，但由于可能发生冲突和其他问题而不能在类别中定义。
> *   可以根据属性定义推断和创建合成属性的实例变量。
> *   您可以以编程方式将实例变量添加到您在运行时创建的类中（仅在您将该类注册为系统可用之前）。
> 
> 因此，重申一下，您只需要在旧版本的 Objective-C 语言中同时声明实例变量和综合属性。您所看到的内容是多余的，不应被视为“最佳实践”。

^([[资源]](https://stackoverflow.com/a/11034032/916299))

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T09:42:56.643

正如其他人指出的那样，不再需要在标头中为合成属性声明支持实例变量。

不过为了更清楚一点：您看到的不是同一个变量的两个声明，而是一个变量声明和一个*属性*声明。

属性基本上是一组通常用于访问实例变量的方法（在本例中为`selectedIndex`和）。`setSelectedIndex:`属性和实例变量之间是有区别的。属性的 setter/getter 可以做的不仅仅是设置变量，在您的示例中，它还可以例如更新 UI 以反映所选索引的更改，或者 getter 可以从其他变量推断索引（在这种情况下，有可能是选择索引路径）等。

合成一个属性可以让您从自己实现这些方法中解放出来，并为您提供简单地设置变量的默认实现，但您也可以像任何其他方法一样实现`selectedIndex`和自己，在这种情况下，您可能需要实例变量本身或完全省略它`setSelectedIndex:`（在推断属性的情况下）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T09:21:03.130

在现代运行时，您不需要两次声明它们。只需使用：

在你.h

```
@property (nonatomic) NSInteger selectedIndex; 
```

{} 之间的部分是 iVar 的声明。并使用您的 @property 声明 getter 和 setter。在现代运行时，如果你只使用上面的代码，你说的基本相同（你的 iVar 现在是 _selectedIndex）。

# c# - 单击 DataGridView 中的行标题的事件

> ID：11116290
> 
> 赞同：4
> 
> 时间：2012-06-20T09:12:44.723
> 
> 标签：c#, .net, winforms, datagridview

专门处理仅在 DataGridView 的行标题上进行的鼠标单击的事件是什么？

如果没有，那么处理此类事件的替代方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T11:28:26.950

有一个新的 Winforms 项目并复制粘贴下面的代码：-

![在此处输入图像描述](../Images/87bd2924be2891c6bdd7d22bc01b026d.png)

```
public partial class Form1 : Form
{
    public Form1()
    {
        var list = new List<Books>
                       {
                           new Books() {Title = "Harry Potter", TotalRating = 5},
                           new Books() {Title = "C#", TotalRating = 5}
                       };
        InitializeComponent();
        dataGridView1.AutoGenerateColumns = true;
        dataGridView1.DataSource = list;
        dataGridView1.RowHeaderMouseClick += new DataGridViewCellMouseEventHandler(OnRowHeaderMouseClick);
    }

    void OnRowHeaderMouseClick(object sender, DataGridViewCellMouseEventArgs e)
    {
        MessageBox.Show("Clicked RowHeader!");
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T09:27:47.993

您可以通过以下代码获取行标题：

```
Private Sub dataGridView1_RowHeaderMouseClick( _
    ByVal sender As Object, ByVal e As DataGridViewCellMouseEventArgs) _
    Handles dataGridView1.RowHeaderMouseClick

    Me.dataGridView1.SelectionMode = _
        DataGridViewSelectionMode.RowHeaderSelect
    Me.dataGridView1.Rows(e.RowIndex).Selected = True

End Sub 
```

或者

```
void dataGridView1_CellDoubleClick(object sender, DataGridViewCellEventArgs e)
    {
        //
        // Do something on double click, except when on the header.
        //
        if (e.RowIndex == -1)
        {
        //this is row header...
            some code here.
        }
       Code...
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T08:38:00.633

有两个与单击行标题相关的事件。

1.  [`RowHeaderMouseClick`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rowheadermouseclick.aspx)
2.  [`RowHeaderMouseDoubleClick`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rowheadermousedoubleclick.aspx)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-11-15T07:20:48.037

```
private void dataGridView1_RowHeaderMouseClick(object sender, DataGridViewCellMouseEventArgs e)
        {
            try
            {
                DataGridViewRow dr = dataGridView1.SelectedRows[0];
                this.Hide();
                frmStock frm2 = new frmStock();
                frm2.Show();
                frm2.txtStockID.Text = dr.Cells[0].Value.ToString();
                frm2.txtConfigID.Text = dr.Cells[1].Value.ToString();
                frm2.txtProductname.Text = dr.Cells[2].Value.ToString();
                frm2.txtFeatures.Text = dr.Cells[3].Value.ToString();
                frm2.txtPrice.Text = dr.Cells[4].Value.ToString();
                frm2.txtQty.Text = dr.Cells[5].Value.ToString();
                frm2.txtTotalPrice.Text = dr.Cells[6].Value.ToString();
                frm2.dtpStockDate.Text = dr.Cells[7].Value.ToString();
                frm2.btnUpdate.Enabled = true;
                frm2.btnDelete.Enabled = true;
                frm2.btnSave.Enabled = false;
                frm2.label8.Text = label1.Text;
           }

            catch (Exception ex)
            {
                MessageBox.Show(ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        } 
```

# java - 关于 String#substring() 方法

> ID：11116292
> 
> 赞同：3
> 
> 时间：2012-06-20T09:12:50.360
> 
> 标签：java, string, performance

如果我们看一下`String#substring`方法实现：

```
new String(offset + beginIndex, endIndex - beginIndex, value); 
```

我们看到使用**相同**的原始内容（参数*char [] value*）创建了一个新 String。

因此解决方法是使用 `new String(toto.substring(...))`删除对原始 char[] 值的引用并使其符合 GC 条件（如果不存在更多引用）。

我想知道是否有特殊原因可以解释此实现。为什么该方法不为自己创建新的较短的字符串，以及为什么她保留完整的原始值？

`new String(...)`另一个相关的问题是：在处理子字符串时我们应该总是使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:14:06.637

因为`String`是[不可变](https://stackoverflow.com/questions/279507/what-is-meant-by-immutable)类

**另见**

*   [http://javarevisited.blogspot.it/2010/10/why-string-is-immutable-in-java.html](http://javarevisited.blogspot.it/2010/10/why-string-is-immutable-in-java.html)（礼貌：Luca Geretti）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T09:20:09.400

> 我想知道是否有特殊原因可以解释此实现。为什么该方法不为自己创建新的较短的字符串，以及为什么她保留完整的原始值？

因为在**大多数**`substring()`用例中，以这种方式工作会更快。至少，这就是 Sun / Oracle 的经验测量所显示的。通过这样做，实现避免了分配支持数组并将字符复制到数组。

如果您必须复制字符串以避免内存泄漏问题，这只是非优化。在绝大多数情况下，子串在比较短的时间内就变成了垃圾，并且没有长期的内存泄漏。

* * *

假设，Java 设计者可以提供两个版本的`substring`，一个与当前行为相同，另一个创建一个带有自己的支持数组的 String 。但这会鼓励开发人员浪费脑力循环考虑使用哪个版本。然后是建立在子字符串上的实用方法的问题......例如`Pattern`/`Matcher`类。所以我认为他们没有这样做是件好事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T09:22:17.417

这种实现的原因是效率。通过指向与`char[]`原始字符串相同，不需要复制任何数据。

不过，这确实有一个缺点，正如您已经暗示过自己的那样。如果原始字符串很长，你只想得到它的一小部分，之后不再需要原始字符串，那么完整的原始数组仍然被引用，不能被垃圾收集。您已经知道如何避免这种情况 - 做`new String(original.substring(...))`。

> `new String(...)`我们应该在处理子字符串时总是使用吗？

不，并非*总是*如此。只有当您知道它可能会导致问题时。在许多情况下，参考原始`char[]`数据而不是复制数据更有效。

# java - 客户端是否需要担心多个 memcache 服务器？

> ID：11116293
> 
> 赞同：3
> 
> 时间：2012-06-20T09:12:57.143
> 
> 标签：java, windows, memcached, spymemcached

问题：- java 客户端是否需要担心多个服务器？

含义：- 我在 memcached 客户端中提供了两台服务器，但是当我从缓存中设置或获取密钥时，我是否需要向它提供任何与服务器相关的信息或 memcache 本身会处理它？

我的知识：- 由于一致的哈希，Memcache 本身会很小心。

但是 spymemcached 2.8.0 是否提供一致的哈希？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T09:18:32.380

Memcached 服务器是**池化**服务器。这意味着您定义了一个服务器池（一个列表），并且当 Java 客户端尝试写入时，它会写入该池。

客户端的工作是决定池中的哪个服务器将接收和存储值以及它将如何从该池中检索值。

基本上，这允许您从一个 Memcached 服务器开始（可能在同一台机器上），如果需要推送，您可以在不接触应用程序代码的情况下向池中添加几十个服务器。

由于客户端负责在服务器池中分发数据（客户端必须选择正确的 memcached 服务器来存储/获取数据），因此很少有分发算法。

最简单的方法之一是[modula](http://docs.oracle.com/cd/E17952_01/refman-5.0-en/ha-memcached-using-hashtypes.html)。该算法根据池中 memcached 服务器的数量分配密钥。如果池中的服务器数量发生变化，客户端将无法找到存储的数据，就会出现缓存未命中。在这种情况下，最好使用[一致的散列](http://weblogs.java.net/blog/tomwhite/archive/2007/11/consistent_hash.html)。

最流行的 java memcached 客户端[spymemached](http://code.google.com/p/spymemcached/)和[xmemcached](https://code.google.com/p/xmemcached/)支持一致性哈希。

[在某些用例中，可以使用simple-spring-memcached](http://code.google.com/p/simple-spring-memcached/)或[Spring 3.1 Cache Abstraction](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/cache.html)通过 AOP（拦截器）将缓存添加到 Spring 应用程序中，而不是直接使用 memcached 客户端。Spring Cache 目前不支持 memcached，但[simple-spring-memcached](http://code.google.com/p/simple-spring-memcached/)在快照构建和即将发布的 3.0.0 版本中提供了这种[集成。](http://code.google.com/p/simple-spring-memcached/issues/detail?id=3&colspec=Stars%20ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T09:39:50.683

MemCached 服务器将自行管理存储和检索键/值。在使用哈希存储时生成密钥并存储它。在再次检索给定密钥的哈希值并查找它已存储在哪个服务器上然后获取它时，这将需要一些时间。

相反，有一种方法可用于存储和检索。

创建一个 HashMap 并以服务器地址作为值存储键。现在下次如果需要获取相同的键而不是搜索，您将直接从 HashMap 获取服务器地址，并且您只需要从那里获取值。因此，您可以节省 MemCahce 服务器的搜索时间。

希望你明白我的意思。

# android - 如何在android中对twitter进行身份验证后重定向到twitter主页

> ID：11116294
> 
> 赞同：0
> 
> 时间：2012-06-20T09:12:58.187
> 
> 标签：android, android-layout

嗨，在我的应用程序中，我想将页面重定向到 twitter 的主页。我查看了 web 视图，在那个 webview 中我给了 url "http://twitter.com/home?status=" 但它会默认我的登录页面是谁可能已登录。它本身将进入我的主页。请帮助我如何在 twitter 身份验证后重定向到主页。这是我的网页视图代码

```
 browser=(WebView)findViewById(R.id.webkit);
    browser.getSettings().setDomStorageEnabled(true);
    browser.loadUrl("http://www.twitter.com?status="); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:40:29.577

您必须在验证时检查浏览器的回调 url，然后它会重定向到主页。用这个，

```
browser.setWebViewClient(new TwitterWebViewClient());

private class TwitterWebViewClient extends WebViewClient {

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        Log.d(TAG, "Redirecting URL " + url);

        if (url.startsWith(CALLBACK_URL)) {
            browser.loadUrl(TWITTER_HOME_URL);              
            return true;
        }  else if (url.startsWith("authorize")) {
            return false;
        }

        return true;
    }
    @Override
    public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) { }
    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) { }
    @Override
    public void onPageFinished(WebView view, String url) { }
} 
```

# c# - 从 GAC 中注册的应用程序访问事件日志

> ID：11116295
> 
> 赞同：1
> 
> 时间：2012-06-20T09:12:58.733
> 
> 标签：c#, .net, gac, event-log

我有从全局程序集缓存注册和执行的 .dll。当我尝试访问事件日志时

> EventLog.SourceExists("源名称")

我收到一个错误：

> 未找到源，但无法搜索部分或全部事件日志。无法访问的日志：安全性。

有没有办法避免这个错误？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:18:12.913

尝试访问事件日志的应用程序的身份没有读取安全日志的权限。默认情况下，该`Administrators`组的成员拥有此权限。您最好的选择是授予相关身份（或该身份所属的组都应该拥有此权利）的上述权利。[这是一篇关于它的文章](http://blogs.technet.com/b/janelewis/archive/2010/04/30/giving-non-administrators-permission-to-read-event-logs-windows-2003-and-windows-2008.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:18:17.867

您正在混合 2 个安全系统 - Windows 和 .Net。GAC 是纯粹的 .Net 概念，但您在访问事件日志时面临 Windows 权限限制。以管理员身份运行应用程序将允许访问，在您的情况下也可能不可接受。

# hibernate - 根据关联是否为空进行分组

> ID：11116296
> 
> 赞同：0
> 
> 时间：2012-06-20T09:13:03.487
> 
> 标签：hibernate, jpa, criteria-api

我有一个 entityA，它与 entityB 具有可选的多对一关系。

我想找到 entityA 的计数与 entityB 和一个查询中的总计数有关。我怎么做。

例如实体A类型的实例a1、a2、a3、a4和实体B类型的b1、b2和b3。

a1 与 b1 相关。a2 和 a3 与 b2 相关。a4 不相关。

所以我想要一个标准，它会给我一个结果

实体总数=4 与实体B相关的实体总数=3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:49:21.887

我可以说你对代码进行了相当多的抽象，但你想要这样的东西。

```
 Criteria criteria = session.createCriteria(EntityA.class);
    criteria.createAlias("entityBList", "entityB")
        .setProjection(Projections.rowCount())
        .add(Restrictions.eq("entityB", 3); 
```

# asp.net - 如何使用 json、ajax、jquery 从 httphandler 发送连续消息

> ID：11116297
> 
> 赞同：0
> 
> 时间：2012-06-20T09:13:11.323
> 
> 标签：asp.net, json, jquery

我正在尝试使用 JSON、AJAX 和 JQUERY 从 httphandler 文件向客户端发送两条连续消息。但是，仅显示第二条消息。可能是什么原因？你如何显示这两条消息？

## .ASHX

```
using Newtonsoft.Json;
using Newtonsoft.Json.Serialization;
using Newtonsoft.Json.Converters;

public class Gen_BLL : IHttpHandler {
  public void ProcessRequest (HttpContext context) {
string ename = JsonConvert.SerializeObject("Message1..");
context.Response.Clear();
context.Response.ContentType = "application/json; charset=utf-8";
context.Response.Write(ename);

ename = JsonConvert.SerializeObject("Message2..");
context.Response.Clear();
context.Response.ContentType = "application/json; charset=utf-8";
context.Response.Write(ename); 
```

}

```
public bool IsReusable {
get {return false;} 
```

}

```
} 
```

## .JS 文件：

```
function funGenAst(usro){
 $.ajax({
type: "GET",    
url: "Gen_BLL.ashx",
contentType: "application/json; charset=utf-8",
data: { "uso": usro },
dataType: "json",
success: OnComplete,        
error: OnFail
});
 return false;
}

function OnComplete(result) {
  alert(result);
}

function OnFail(result){
  alert("fail...');
} 
```

只显示一个警报，即“Message2..”。“Message1..”警报根本没有弹出。您如何一个接一个地提醒这两条消息？

谢谢 bsc

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:50:04.460

You simple can not do that.

There is a protocol of http communication, and this is break it, from the moment you send some header and some content, there is not prediction to clear the header, and send a second (or new) message.

About Hypertext Transfer Protocol (HTTP): [http://www.w3.org/Protocols/rfc2616/rfc2616-sec1.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec1.html)

Alternative way: Merge your message to one response, or after you receive the first message, make new request to get the second one.

# java - Windows 上的 Java Runtime 不同版本

> ID：11116305
> 
> 赞同：0
> 
> 时间：2012-06-20T09:13:28.293
> 
> 标签：java

我在 Windows 7 64 位上安装了 2 个不同版本的 Java。一个版本 6 和另一个版本 7。

我从 http 运行的一个应用程序似乎使用版本 7，但我希望它是版本 6。

如何更改使用版本 6 的路径？请注意，我是技术人员，但不是甲骨文..所以一步一步可能会有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:44:32.060

将您更改`JAVA_HOME`为 7 版本，`Path`如果变量像`c:\Program Files\java\bin`.

# caching - 当 Web 应用程序在 Window Azure 中有多个 Web 角色实例时，应用程序变量是否共享？

> ID：11116308
> 
> 赞同：1
> 
> 时间：2012-06-20T09:13:35.027
> 
> 标签：caching, web-applications, azure, azure-web-roles

当Web应用程序在window azure中有多个角色实例时，Application变量是否共享？我正在使用专用缓存工作者角色。应用程序变量是否保留在缓存中？如果不是那么我们怎么能做到呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:01:06.767

Application 变量存储在内存中（请参阅[此 MSDN 参考文章](http://msdn.microsoft.com/en-us/library/94xkskdf.aspx)）。无法将其持久化或将其外部化，因此无法跨 Web 角色实例共享应用程序状态。文章指出了这一点，因为无法在 Web 场中的服务器之间共享应用程序状态。

正如[这个 SO answer](https://stackoverflow.com/a/10769301/272109)所暗示的，您需要为应用程序级内容使用一些可共享的资源。换句话说，就是不要使用 Application 变量。您可以轻松地将应用程序级变量存储在 Windows Azure 表或缓存中（专用缓存角色或 Web 角色中的共享缓存）。

# c++ - IDispatch 从 COM 服务器返回 NULL 到客户端（C++ 中的客户端和服务器）

> ID：11116310
> 
> 赞同：2
> 
> 时间：2012-06-20T09:13:54.810
> 
> 标签：c++, com

我有一个作为 .exe 运行的 com 服务器。这个 COM 服务器有两个 COM 实现。COM1 中有接口说“interface1”，COM2 有“interface2”。在“interface1”的一种方法中，比如 XYZ(IDispatch **pIDispatch)，我使用“CoGetClassObject()”和“CLSCTX_LOCAL_SERVER”实例化了 COM2，并创建了“interface2”并通过该方法传递了它的“IDispatch”指针。

同一台机器上的客户端使用 COM Proxy DLL 与 COM Server 进行通信。客户端调用“interface1”方法 XYZ()，函数执​​行成功，但返回的 IDispatch 对客户端为 NULL。

机器是32位的。

有人能告诉我为什么会这样，或者我想要得到的东西是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:19:22.703

问题已解决，我没有在 idl 文件中为参数 IDispatch 使用关键字 [out, retval]。将其放入接口方法后。IDispatch 值已由 COM 服务器成功返回给客户端。

# jquery - 更改yii中注册脚本文件的顺序

> ID：11116312
> 
> 赞同：7
> 
> 时间：2012-06-20T09:14:00.163
> 
> 标签：jquery, yii

我正在为 Yii 应用程序制作一个小部件。主布局视图注册了所有常见的脚本文件，例如 jQuery 和 jQueryUI。在我的小部件中，我想使用一个 jQueryUI 插件，该插件依赖于已加载的 jQueryUI。

我知道我可以指定脚本包含在页面上的哪个位置，但是在“结束”处简单地包含它似乎有点命中注定 - 如果我有其他脚本需要在该插件之后加载怎么办？我如何确保它们以正确的顺序加载 - 有人有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T02:49:32.883

你可以使用 Yii[脚本包](http://www.yiiframework.com/doc/api/1.1/CClientScript#packages-detail)中的依赖特性。我[之前遇到过类似的问题](https://stackoverflow.com/questions/8904761/registerpackage-depends-on-registerscriptfile)。

例如，您有如下脚本包配置，

```
'clientScript' => array(
  'packages' => array(
     'package1' => array(
          'basePath' => 'path.to.package1',
          'js' => array(
              'package1.js',
          ),
          'css' => array(
              'package1.css'
          ),
      ),
     'package2' => array(
          'basePath' => 'path.to.package2',
          'js' => array(
              'package2.js',
          ),
          'css' => array(
              'package2.css'
          ),
          'depends' => array(
                'package1',
          )
      ),
     'package3' => array(
          'basePath' => 'path.to.package3',
          'js' => array(
              'package3.js',
          ),
          'css' => array(
              'package3.css'
          ),
          'depends' => array(
                'package2',
          )
      ),
   )
) 
```

在上面的示例中，`package2`requires (depends)`package1`和`package3`requires `package2`. 假设在您的情况下，一个小部件使用`package2`，而另一个脚本使用`package3`. 即使您不渲染小部件，如果您使用`Yii::app()->clientScript->registerPackage('package3');`，它也会自动安装`package2`which 然后安装`package1`之前的（或者如果之前某些脚本已经需要，`package2`则不会安装。）。`package1`

# java - 使用 Java 修改 XML 中的几个字段的最佳方法是什么

> ID：11116314
> 
> 赞同：1
> 
> 时间：2012-06-20T09:14:04.820
> 
> 标签：java, xml, parsing, xslt, xpath

我有一个包含大约 300 个元素的大型 XML。我需要使用 Java 修改此 xml 中的 2 或 3 个元素。我不想进行传统的编组和解组，因为它涉及整个 XML 的解析。XPath/XSLT 如何操作？我知道我可以轻松读取数据，但我需要修改相同的数据并将其放回相同的 XML 中。这里主要关注的是性能。好心提醒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:36:14.290

使用 XPath/XSLT 意味着在开始转换之前将整个文档加载到内存中。如果这是一个问题（例如文档太大而无法存储），那么您需要使用另一种解决方案。也就是说，300 个元素听起来并不是很“大”。

一种替代方法是使用 StAX 解析器来查找和更改目标元素。看看[有没有办法构建 StAX 过滤器链？](https://stackoverflow.com/q/5566836/127035)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T13:33:21.400

听起来 XSLT 对于这个问题来说可能太重了。你想稍微重写一个文件。如果您可以轻松描述每个更改（例如，您想删除“bar”元素上的“foo”属性），请考虑应用正则表达式替换。像这样的东西：

`String fileContents = ...`

`fileContents.replaceAll("<bar foo=\"\\w+\"", "<bar");`

# javascript - 设置高图表边距

> ID：11116318
> 
> 赞同：0
> 
> 时间：2012-06-20T09:14:17.023
> 
> 标签：javascript, highcharts, margin

我已经建立了一些 highcharts 图表，我在鼠标悬停时一次显示一个。jquery 创建一个带有边框线的浮动 div（取决于光标）

```
1px solid black 
```

然后调用 highchart 方法绘制图表。

问题是highcharts超出了边界并且没有显示左下边界。

我试过'保证金'：

```
chart:
    {
      renderTo: 'graph',
      defaultSeriesType: 'line',
      zoomType: 'x',
      margin: [ 10, 10, 10, 10]
    }, 
```

它仍然做同样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:36:02.460

You would need to set the margins to at least 70 in order for the highchart to display decently. Also, if you are using and you know the size of the div you may want to specify the [**height**](http://www.highcharts.com/ref/#chart--height) and [**width**](http://www.highcharts.com/ref/#chart--width) of the chart as well. I would make it slightly smaller than the div. Here is an [**example**](http://jsfiddle.net/xP6j9/).

# asp.net - Ado.net ExecuteReader 在与数据网格绑定时给出重复

> ID：11116322
> 
> 赞同：0
> 
> 时间：2012-06-20T09:14:33.370
> 
> 标签：asp.net, vb.net, ado.net

我正在使用下面提到的 Ado.net 函数和结果集与网格视图绑定，但是我在结果集中得到了重复的行。

请帮帮我。

谢谢

```
Private _products As New List(Of Product)
  Public Property Products As List(Of BusinessObjects.Product)
    Get
        Return _products
    End Get
    Set(ByVal value As List(Of BusinessObjects.Product))
        _products = value
    End Set
End Property

Public Function GetProductDetails() As List(Of Product)
    Dim product As New BusinessObjects.Product

    Using connection As New SqlConnection

        connection.ConnectionString = ConfigurationManager.ConnectionStrings("ConnectionString").ConnectionString
        connection.Open()
        Using Command As New SqlCommand("select * from T_product", connection)

            Dim rdr As SqlDataReader
            rdr = Command.ExecuteReader
            While rdr.Read()
                product.ProductID = rdr("ProductID")
                product.ProductName = rdr("ProductName")
                Products.Add(product)
            End While

            GridView1.DataSource = Products
            GridView1.DataBind()

        End Using

    End Using

    Return Products
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:18:24.690

问题是您每次都在更新和添加相同的产品。在 While 循环中创建产品对象，如下所示。

```
Public Function GetProductDetails() As List(Of Product)

    Using connection As New SqlConnection

    connection.ConnectionString = ConfigurationManager.ConnectionStrings("ConnectionString").ConnectionString
    connection.Open()
    Using Command As New SqlCommand("select * from T_product", connection)

        Dim rdr As SqlDataReader
        rdr = Command.ExecuteReader
        While rdr.Read()
            Dim product As New BusinessObjects.Product ' product object create here
            product.ProductID = rdr("ProductID")
            product.ProductName = rdr("ProductName")
            Products.Add(product)
        End While

        GridView1.DataSource = Products
        GridView1.DataBind()

    End Using

End Using

Return Prod 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:19:30.880

您应该`Dim product As New BusinessObjects.Product`在读取`SqlDataReader`实例时在内部进行初始化

```
Set(ByVal value As List(Of BusinessObjects.Product))
        _products = value
    End Set
End Property

Public Function GetProductDetails() As List(Of Product)

    Using connection As New SqlConnection

        connection.ConnectionString = ConfigurationManager.ConnectionStrings("ConnectionString").ConnectionString
        connection.Open()
        Using Command As New SqlCommand("select * from T_product", connection)

            Dim rdr As SqlDataReader
            rdr = Command.ExecuteReader
            While rdr.Read()
                Dim product As New BusinessObjects.Product
                product.ProductID = rdr("ProductID")
                product.ProductName = rdr("ProductName")
                Products.Add(product)
            End While

            GridView1.DataSource = Products
            GridView1.DataBind()

        End Using

    End Using

    Return Products
End Function 
```

# drupal-7 - Drupal：这个组件是如何命名的？

> ID：11116324
> 
> 赞同：0
> 
> 时间：2012-06-20T09:14:37.467
> 
> 标签：drupal-7

我想创建一个看起来/行为类似于在编辑内容类型时管理字段的表。

![截屏](../Images/1fb1f9382839c04d5cc03f6960132af4.png)

这个是怎么命名的？这是表单 API 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T19:10:35.860

如果您正在寻找拖放排序行为，那么您应该查看[`drupal_add_tabledrag`](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_add_tabledrag/7).

也许本教程可能会有所帮助：[http ://aswapathy.com/d78tu/tabledrag/theme_the_form_doc](http://aswapathy.com/d78tu/tabledrag/theme_the_form_doc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:35:57.563

我将使用 Forms API 和表格来实现它。如果你是表单 API 的新手，这个逐步介绍真的很好： [http ://drupal.org/node/262422](http://drupal.org/node/262422)

# javascript - 不使用任何框架的跨域 POST 请求

> ID：11116332
> 
> 赞同：0
> 
> 时间：2012-06-20T09:15:14.673
> 
> 标签：javascript, ajax, cross-domain

我想在不使用任何框架（如 jquery）的情况下使用 js 中的脚本 hackup 来发出跨域请求。我想将 json 发布到跨域服务并使用回调检索结果。可以用普通的javascript吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:26:10.883

你可以使用这样的东西。

```
var url = "http://sitename.com";
var params = "params1=value&params2=value2";
var httpc = new XMLHttpRequest();
httpc.open("POST", url, true);
httpc.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
httpc.onreadystatechange = function() {
    if(httpc.readyState == 4 && httpc.status == 200) {
            var responseType = httpc.getAllResponseHeaders();
            if(responseType.indexOf("application/json") != -1) {
                alert(httpc.responseText);
            }
    }
}
httpc.send(params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:18:51.197

框架做到了，所以你可以做到。别人写的代码不能做你写的代码不能做的事情（只要你愿意学习所有需要的东西）。

如果您想向其他来源发出 post 请求（假设您没有通过自己的服务器代理请求），则必须使用[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)（但请注意[browser support](http://caniuse.com/#search=cors) .

（无论如何，对于“纯 JavaScript”的某些价值，您需要由不属于核心语言的浏览器提供的 API。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:01:40.480

我今天一直在解决同样的问题，并且遇到了一些关于 CORS 的很棒的教程。

[http://www.html5rocks.com/en/tutorials/cors/](http://www.html5rocks.com/en/tutorials/cors/)

[http://websitez.com/javascript-cross-domain-post-get/](http://websitez.com/javascript-cross-domain-post-get/)

基本上，当 javascript 即将发送一个 XMLHttpRequest 请求（我们将假设 POST 用于此示例）时，跨域首先发送一个 OPTIONS 请求，其中包含它想要在 POST 请求中发送的方法和标头。远程域应以适当的标头响应，告诉您的客户端它将接受您的请求。这称为“预检”请求。请记住，需要在 POST 请求中返回相同的响应标头，否则您将获得 200 响应代码，但您的代码会将其视为错误。

# python - pyparsing中的python正则表达式

> ID：11116336
> 
> 赞同：3
> 
> 时间：2012-06-20T09:15:26.267
> 
> 标签：python, regex, pyparsing

您如何使以下正则表达式用于 pyparsing？它应该返回给定正则表达式的令牌列表。

任何帮助将不胜感激！谢谢！

**shell中的python正则表达式示例：**

```
>>> re.split("(\w+)(lab)(\d+)", "abclab1", 3)
>>> ['', 'abc', 'lab', '1', ''] 
```

我在 pyparsing 中尝试了这个，但我似乎无法弄清楚如何正确处理它，因为第一个匹配是贪婪的，即第一个标记将`'abclab'`代替两个标记`'abc'`和`'lab'`.

**pyparsing 示例（高级，即非工作代码）：**

```
name = 'abclab1'
location = Word(alphas).setResultsName('location')
lab = CaselessLiteral('lab').setResultsName('environment')
identifier = Word(nums).setResultsName('identifier')
expr = location + lab + identifier
match, start, end = expr.scanString(name).next()
print match.asDict() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T12:53:04.900

Pyparsing 的类几乎是从左到右的，使用显式表达式实现前瞻，如 FollowedBy（用于正前瞻）和 NotAny 或“~”运算符（用于负前瞻）。这使您可以检测通常与正在重复的项目匹配的终止符。例如，`OneOrMore(Word(alphas)) + Literal('end')`永远不会在诸如“start blah blah end”之类的字符串中找到匹配项，因为终止的“end”将被 OneOrMore 中的重复表达式所吞噬。解决方法是在重复的表达式中添加负前瞻：`OneOrMore(~Literal('end') + Word(alphas)) + Literal('end')`- 也就是说，在阅读另一个由字母组成的单词之前，首先确保它不是单词“end”。

当重复在 pyparsing 类（如 Word）中时，这种情况就会崩溃。`Word(alphas)`只要没有空格来停止单词，它将继续读取字母字符。您将不得不使用非常昂贵的东西来打破这种重复，例如`Combine(OneOrMore(~Literal('lab') + Word(alphas, exact=1)))`- 我说昂贵，因为使用复杂的组合表达式组合简单标记会使解析器变慢。

您可以通过使用包装在 pyparsing Regex 对象中的正则表达式来妥协：

```
>>> labword = Regex(r'(\w+)(lab)(\d+)')
>>> print labword.parseString("abclab1").dump()
['abclab1'] 
```

这会进行正确的分组和检测，但不会暴露组本身。为此，为每个组添加名称 - pyparsing 会将这些名称视为结果名称，并允许您访问各个字段，就像您调用了 setResultsName 一样：

```
>>> labword = Regex(r'(?P<locn>\w+)(?P<env>lab)(?P<identifier>\d+)')
>>> print labword.parseString("abclab1").dump()
['abclab1']
- env: lab
- identifier: 1
- locn: abc
>>> print labword.parseString("abclab1").asDict()
{'identifier': '1', 'locn': 'abc', 'env': 'lab'} 
```

我能想到的唯一其他非正则表达式方法是定义一个表达式来读取整个字符串，然后在解析操作中分解各个部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:30:04.387

如果你去掉子组符号（括号），你会得到正确的答案：）

```
>>> re.split("\w+lab\d+", "abclab1")
['', ''] 
```

# actionscript-3 - 将数组集合传递给 PHP

> ID：11116338
> 
> 赞同：0
> 
> 时间：2012-06-20T09:15:33.223
> 
> 标签：actionscript-3, apache-flex, flash-builder

我尝试将 Arraycollection 传递给 php。为此，我使用此功能：

```
 public function arrayCollectionToString( myArrayCollection:ArrayCollection ):String  
    {  
        var collStr:String = new String();  
        for each( var obj:Object in myArrayCollection )  
        {  
            collStr += "[";  
            var i:int=0;
            for each( var obj2:Object in obj )  
            {  i++;

                if(i==1){
                    collStr += obj2.toString();  

                }else{
                    collStr +=", "+ obj2.toString();  

                }
            }  
            collStr += "]";  
        }  
        return collStr;  
    } 
```

此函数将数组集合转换为字符串，但如何知道女巫顺序键出现？或者如果不可能，如何将键名传输到 php 并在 php 脚本中拆分字符串以将字符串转换为数组？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T09:51:08.093

在 Flash 应用程序和 php 脚本之间交换数据的最佳方法是使用 json。您可以在此处查看更多详细信息： http: [//digitalmemo.neobie.net/2009/10/22/passing-object-from-flash-as3-to-php/](http://digitalmemo.neobie.net/2009/10/22/passing-object-from-flash-as3-to-php/)和此处[http://digitalmemo.neobie.net /2009/10/22/passing-object-from-flash-as3-to-php/](http://digitalmemo.neobie.net/2009/10/22/passing-object-from-flash-as3-to-php/)。您使用 as3corelib (http://code.google.com/p/as3corelib/) 将您的 flash 本机数组转换为 json，并通过 php 中的 json_decode() 方法处理 json。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:01:47.897

我找到了一个在我的函数中包含数组 ok 键的解决方案：

```
var keys:Array = ["idLien", "codeRDV", "nomRDV"];

var sGrpRDV:String = new ArrayFunction().arrayCollectionToString2(DP_GRP_RDV_D,keys); 

  public function arrayCollectionToString2( myArrayCollection:ArrayCollection, myOrderKey:Array ):String  
    {  
        var collStr:String = new String();  
        for each( var obj:Object in myArrayCollection )  
        {  
            collStr += "[";  
            var i:int=0;
            for each (var k:String in myOrderKey)
            {
                i++;
                if(i==1){
                    collStr += obj[k];  

                }else{
                    collStr +=", "+ obj[k];  

                }
            }

            collStr += "]";  
        }  
        return collStr;  
    } 
```

# javascript - Internet Explorer 不通过 JavaScript 更新标签

> ID：11116339
> 
> 赞同：1
> 
> 时间：2012-06-20T09:15:34.920
> 
> 标签：javascript, jquery, ajax, internet-explorer

我有这个奇怪的问题，我将尝试尽可能具体地描述。

我正在使用 ASP.NET 4.0、jQuery 和使用 Ajax 开发一个 Web 模块，我有 Web 服务器的 getter 和 setter。

我有一个产品选择器，在选择产品时，我将通过 Ajax 调用获取数据。我在详细信息窗格中修改了产品名称、图像、描述...

它在 FireFox 和 Chrome 中运行良好，但在 Internet Explorer 中，产品名称（并且只有产品名称 - 图像和描述，来自同一对象工作）拒绝更新。

当我在 Visual Studio 中放置换行符并等待几秒钟并按 F5（我看到正确的产品名称）时，标签已更改。但是当我在 F5 上打得非常快时，事实并非如此。所以，我放置了`setTimeout()`一个延迟为 50 毫秒的代码，它适用于 IE。

任何人都知道为什么在 Internet Explorer 中会发生这种行为？

一些代码：

```
success: function (msg) {
        $("#tblHardwareOptions tr").remove();
        var tempDevice = JSON.parse(msg.d[3]);

        $("#imgDevice").attr("src", tempDevice.image);
        $("#deviceDescription").html(unescape(tempDevice.description));
        //=> setTimeOut works, added the "" to be sure it is empty
        //            setTimeout(
        //                function () {
        //without timeout it won't work in IE, even emptying the string
        //                    $(lblMachineName).text("");
        //                    $(lblMachineName).text(unescape(tempDevice.modelname));
        //                }
        //            , 50);
        //Tried without jQuery, but doesn't work neither
        document.getElementById(lblMachineName.replace("#", "")).innerText = unescape(tempDevice.modelname); 
```

# php - 检索信息的Mysql问题

> ID：11116340
> 
> 赞同：0
> 
> 时间：2012-06-20T09:15:39.120
> 
> 标签：php, mysql

我有这个查询，这给了我一些问题......

我正在尝试将查询导出到文本文件中，并且此函数创建一个 data.txt 文件，但它返回为空。

我得到的错误信息是：

> mysql_fetch_array(): 提供的参数不是有效的 MySQL 结果资源 .... 第 87 行

代码是：

```
$fh = fopen('data.txt', 'w');
$result1 = mysql_query("SELECT $checked FROM hostess;");
while ($row = mysql_fetch_array($result1)) {
    $last = end($row);
    foreach ($row as $item) {
        fwrite($fh, $item);
        if ($item != $last)
            fwrite($fh, "\t");
    }
    fwrite($fh, "\n");
}
fclose($fh); 
```

第 87 行是：

```
while ($row = mysql_fetch_array($result1)) { 
```

这有什么问题？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:17:46.643

你应该听错误，`mysql_query()`看看出了什么问题。在测试环境中，这可能如下所示：

```
$result1 = mysql_query("SELECT $checked FROM hostess");
if ( !$result1 ) { echo mysql_error(); }
// rest of the code 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:28:51.330

您应该在使用 mysql 方法跟踪错误时使用 mysql_error() 。

即使在这里，您也没有创建 mysql 连接。首先在该代码的开头添加以下行。

```
 $link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
 if (!$link) {
    die('Could not connect: ' . mysql_error());
 }
 mysql_select_db('db'); 
```

然后运行您的代码，不要忘记使用 add [mysql_error()](http://www.php.net/manual/en/function.mysql-error.php)。:):)

```
$result1 = mysql_query("SELECT checked FROM hostess");
if ( !$result1 ) { 
    echo mysql_error();
}else{
     // your code
} 
```

# ruby-on-rails - Active Record 查询最新更新记录

> ID：11116343
> 
> 赞同：0
> 
> 时间：2012-06-20T09:15:56.537
> 
> 标签：ruby-on-rails, activerecord, mysqli

我遇到了一个小问题，我现在无法解决 ^_^ 并希望看到您的建议。问题只是关于从 mysql 表中获取最新更新的几条记录。这是样本数据，但真实数据有数千条记录。

```
Id  site_id      updated_at               value
1   1            "2012-05-14 09:04:02"    5
2   2            "2012-05-14 09:04:02"    8
3   2            "2012-05-15 09:04:02"    9
4   3            "2012-05-16 09:04:02"    7
5   1            "2012-05-17 09:04:02"    5
6   1            "2012-05-18 09:04:02"    3 
```

我想要有 XXXX 函数，它将返回

```
Id  site_id      updated_at               value
6   1            "2012-05-18 09:04:02"    3
4   3            "2012-05-16 09:04:02"    7
3   2            "2012-05-15 09:04:02"    9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:20:53.147

假设您的模型被称为`Account`：

```
Account.joins("LEFT OUTER JOIN accounts a 
    ON a.site_id = accounts.site_id AND a.value > accounts.value").
  where("a.value IS NULL").order("accounts.updated_at DESC").limit(3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:18:32.297

像这样的东西？

```
YourModel.order("updated_at desc").limit(3) 
```

# php - PHP - 在字符串中查找数字

> ID：11116345
> 
> 赞同：-3
> 
> 时间：2012-06-20T09:16:01.143
> 
> 标签：php, string, search, numbers

我想从这个字符串中得到**16 ：**

`request id is 16 (group id 1) for host localhost`

以及 JID No. **10**的状态消息（在这种情况下`Kill time expired`）

```
JID  Pri S  Owner Number       Pages Dials      Status
11   127 D   root 0xxxxxx     1:1   1:12         
16   116 F www-da 0xxxxxx     0:1  12:12         No carrier detected; too 
15   127 D   root 0xxxxxx     1:1   1:12         
10   127 F   root 0xxxxxx     0:0   0:12         Kill time expired
9    127 F   root 0xxxxxx     0:0   0:12         Job aborted by request
8    127 F   root 0xxxxxx     0:0   0:12         Job aborted by request 
```

**编辑**：我设法解决了第一个问题。答案是`(\d+)`。我需要第二次搜索的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:30:35.123

对于第二个，您可以查找以“10”开头的行，然后是“something”，然后是 9 个连续的空格。在空格之后是您需要捕获的内容。正则表达式是`^10.+\s{9}(.*)`

# javascript - 传入raphael拖动函数的对象引用

> ID：11116347
> 
> 赞同：0
> 
> 时间：2012-06-20T09:16:04.643
> 
> 标签：javascript, raphael

我正在创建一个模块来使用 raphael 以图形方式可视化工作流程，该模块从数据库中获取数据。为此，我创建了一个名为“FlowEdit”的类，并根据 raphael 创建了移动、向上和拖动功能。

但是在移动功能中，当我尝试使用对象引用访问连接列表时，我无法引用它，它给出了未定义的错误。

该课程的代码是这样的：-

```
 //class definition
        function FlowView(list) {
        this.list = list;
        this.connections = [];
        this.r = Raphael("holder", 1400, 500);
        this.shapes = [];
        this.texts = [];
        this.y_center = 500 / 2;
        //box size
        this.r_width = 60;
        this.r_height = 40;
        // To define virtual regions
        this.x_offset = 50;
        this.y_offset = 40;
        this.x_start = 40;
        //this.color, this.tempS, this.tempT;
        //Define position in y direction
        this.top_count = [0];
        this.bottom_count = [0];
        //Initialize Top_count & Bottom_Count Arrays
        for (var i = 0; i < this.list.length; i++) {
            this.top_count.push(0);
            this.bottom_count.push(0);
        }
    }
    ;

    // Give starting points from list
    FlowView.prototype.start_point = function () {
        var start_list = [];
        for (var i in this.list) {
            if (this.list[i][1] == this.list[i][2][0]) {
                start_list.push(this.list[i][1]);
            }
        }
        return start_list;
    };

    //For Finding index of an element in list
    FlowView.prototype.index_of = function (curr_point) {
        for (var i in this.list) {
            if (this.list[i][1] == curr_point) {
                return i;
            }
        }
    };

    //add next function
    FlowView.prototype.add_next = function () {
        for (var i in this.list) {
            if (this.list[i][3][0] == "NULL") {
                //For all last nodes add same to their next
                this.list[i][3][0] = this.list[i][1];
            }
            if (this.list[i][3].length == 0) {
                //For all last nodes add same to their next
                this.list[i][3].push(this.list[i][1]);
            }
        }
    };

    //For given next of all nodes add previous to those nodes
    FlowView.prototype.add_previous = function () {
        for (var i in this.list) {
            for (var j in this.list[i][3]) {
                //For all next add current node to their previous list
                var curr_index = this.index_of(this.list[i][3][j]);
                if (this.list[curr_index][2].indexOf(this.list[i][1]) == -1 && (curr_index != i)) {
                    this.list[curr_index][2].push(this.list[i][1]);
                }
            }
        }
        //Add previous of all start node
        for (var i in this.list) {
            if (this.list[i][2].length == 0) {
                this.list[i][2].push(this.list[i][1]);
            }
        }
    };

    //Region update recursively
    FlowView.prototype.region_update = function (curr_index) {
        if (this.list[curr_index][1] != this.list[curr_index][3][0]) {
            for (var i in this.list[curr_index][3]) {
                var next_index = this.index_of(this.list[curr_index][3][i]);
                if (this.list[next_index][0] < this.list[curr_index][0] + 1) {
                    this.list[next_index][0] = this.list[curr_index][0] + 1;
                    this.region_update(next_index);
                }
            }
        }
    };

    //Draw the workflow for given data structure
    FlowView.prototype.construct = function () {
        var open = this.start_point();
        var close = [];

        while (open.length != 0) {
            var curr_point = open.shift();
            var curr_index = this.index_of(curr_point);
            //document.write(curr_index);
            //draw box
            var curr_region = this.list[curr_index][0];
            //document.write(curr_region);
            var x_cord = parseInt(curr_region) * (this.x_offset + this.r_width) + this.x_start;
            //document.write(x_start);
            var y_cord = 0;

            if (this.top_count[curr_region] == 0 && this.bottom_count[curr_region] == 0) {
                y_cord = this.y_center - this.r_height / 2;
                this.top_count[curr_region] = 1;
                this.bottom_count[curr_region] = 1;
            }
            else if (this.top_count[curr_region] <= this.bottom_count[curr_region]) {
                y_cord = this.y_center - this.r_height / 2 - this.top_count[curr_region] * (this.y_offset + this.r_height);
                this.top_count[curr_region] = this.top_count[curr_region] + 1;
            }
            else {
                y_cord = this.y_center + this.r_height / 2 + this.bottom_count[curr_region] * (this.y_offset + this.r_height) - this.r_height;
                this.bottom_count[curr_region] = this.bottom_count[curr_region] + 1;
            }

            //drawing the box
            this.shapes[this.list[curr_index][1]] = this.r.rect(x_cord, y_cord, this.r_width, this.r_height, 10);
            this.texts[this.list[curr_index][1]] = this.r.text(x_cord + this.r_width / 2, y_cord + this.r_height / 2, this.list[curr_index][1]);
            // Adding next nodes to open list
            for (var i in this.list[curr_index][3]) {
                //If not in open than add to open
                if (this.list[curr_index][3][0] != this.list[curr_index][1]) {
                    if (open.indexOf(this.list[curr_index][3][i]) == -1 && close.indexOf(this.list[curr_index][3][i]) == -1) {
                        open.push(this.list[curr_index][3][i]);
                    }
                }
            }
            //Increasing region index for each next node
            this.region_update(curr_index);
            close.push(curr_point);
            //document.write(open.toString()+"</br>");
            //document.write(close.toString()+"</br>");
        }
        for (var j in this.list) {
            if (this.list[j][1] != this.list[j][3][0]) {
                for (var i in this.list[j][3]) {
                    //make link for each previous
                    if (close.indexOf(this.list[j][3][i]) != -1) {
                                 this.connections.push(this.r.connection(this.shapes[this.list[j][1]], this.shapes[this.list[j][3][i]], "bcd"));
                    }
                }
            }
        }
    };

    FlowView.prototype.dragger = function () {
        // Original cords for main element
        this.ox = this.type == "ellipse" ? this.attr("cx") : this.attr("x");
        this.oy = this.type == "ellipse" ? this.attr("cy") : this.attr("y");
        if (this.type != "text") this.animate({"fill-opacity":.2}, 500);

        // Original co-ords for pair element
        this.pair.ox = this.pair.type == "ellipse" ? this.pair.attr("cx") : this.pair.attr("x");
        this.pair.oy = this.pair.type == "ellipse" ? this.pair.attr("cy") : this.pair.attr("y");
        if (this.pair.type != "text") this.pair.animate({"fill-opacity":.2}, 500);
    };

    FlowView.prototype.move = function (dx, dy) {
        // Move main element
        var att = this.type == "ellipse" ? {cx:this.ox + dx, cy:this.oy + dy} :
        {x:this.ox + dx, y:this.oy + dy};
        this.attr(att);
        // Move paired element
        att = this.pair.type == "ellipse" ? {cx:this.pair.ox + dx, cy:this.pair.oy + dy} :
        {x:this.pair.ox + dx, y:this.pair.oy + dy};
        this.pair.attr(att);
        //document.write("adass");
        //document.write(x_offset);
        // Move connections
        for (var i = this.connections.length; i--;) {
             this.r.connection(this.connections[i]);
        }
        this.r.safari();
    };

    FlowView.prototype.up = function () {
        // Fade original element on mouse up
        if (this.type != "text") this.animate({"fill-opacity":0}, 500);

        // Fade paired element on mouse up
        if (this.pair.type != "text") this.pair.animate({"fill-opacity":0}, 500);
        // Move connections
    };

    FlowView.prototype.drag_initialize = function () {

        for (var i in this.shapes) {
            var color = Raphael.getColor();
            var tempS = this.shapes[i].attr({fill:color, stroke:color, "fill-opacity":0, "stroke-width":2, cursor:"move"});
            var tempT = this.texts[i].attr({fill:color, stroke:"none", "font-size":15, cursor:"move"});
            this.shapes[i].drag(this.move, this.dragger, this.up);
            this.texts[i].drag(this.move, this.dragger, this.up);

            // Associate the elements
            tempS.pair = tempT;
            tempT.pair = tempS;
        }
    }; 
```

使用上面的代码，我可以绘制图形并拖动项目，但是当我拖动项目时，连接的路径不会沿着它拖动。所以我做错了。为了建立连接，我使用了 raphael 演示中给出的相同代码..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:41:10.740

这是一个常见的烦恼，幸运的是，有一个非常简单的解决方案！

问题：Raphael 正在使用您指定的函数（this.move、this.dragger 和 this.up），但它没有在对象的上下文中调用它们。因此，this 变量实际上不是指您的对象，而是指窗口。绝对没有帮助。

解决方案：使用函数闭包来绑定对对象实例的引用。用这个更新你的 drag_initialize 函数：

```
var self = this;
this.shapes[i].drag(function(){ self.move(); }, function() { self.dragger(); }, function() { self.up(); } );
this.texts[i].drag(function() { self.move(); }, function() { self.dragger(); }, function() { self.up(); } ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:37:47.050

嗨，我找到了问题的答案。在移动函数中，我返回另一个函数，在调用拖动时，我在移动函数中给出对象参数，因此传递了当前对象的上下文。现在更改的移动功能是：-

```
 FlowView.prototype.move = function (obj) {

        // Move main element
        return function(dx, dy){
            var att = this.type == "ellipse" ? {cx:this.ox + dx, cy:this.oy + dy} :
            {x:this.ox + dx, y:this.oy + dy};
            this.attr(att);
            // Move paired element
            att = this.pair.type == "ellipse" ? {cx:this.pair.ox + dx, cy:this.pair.oy + dy} :
            {x:this.pair.ox + dx, y:this.pair.oy + dy};
            this.pair.attr(att);
            // Move connections
            for (var i = obj.connections.length; i--;) {
                obj.r.connection(obj.connections[i]);
            }
            obj.r.safari();
        }
    }; 
```

并用

```
 this.shapes[i].drag(this.move(this), this.dragger, this.up);
    this.texts[i].drag(this.move(this), this.dragger, this.up); 
```

# c# - VB网中的这段代码

> ID：11116348
> 
> 赞同：0
> 
> 时间：2012-06-20T09:16:08.580
> 
> 标签：c#, vb.net, encryption, reflector, decompiler

我用反射器反编译了一个 vb.net 应用程序

所有字符串都使用此方法加密：

```
Public Shared Function smethod_0(ByVal string_0 As String) As String
    Dim length As Integer = string_0.Length
    Dim chArray As Char() = New Char(length  - 1) {}
    Dim i As Integer
    For i = 0 To chArray.Length - 1
        Dim ch As Char = string_0.Chars(i)
        Dim num3 As Byte = CByte((ch Xor (length - i)))
        Dim num4 As Byte = CByte(((ch >> 8) Xor i))
        chArray(i) = DirectCast(((num4 << 8) Or num3), Char)
    Next i
    Return String.Intern(New String(chArray))
End Function 
```

此方法接收如下输入字符串：

```
"j" & ChrW(354) & ChrW(623) & ChrW(868) 
```

并返回一个可读的字符串。

如何在 vb.net 或 c# 中转换此代码？

Vb.net 编译器抱怨此代码不正确，因为未为 char/int 组合定义 xor。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T00:39:05.067

我以这种方式解决了：

```
 public static string encrypt(string string_0)
    {
        int length = string_0.Length;
        char[] chArray = new char[length];
        for (int i = 0; i < chArray.Length; i++)
        {
            char ch = string_0[i];
            byte num3 = (byte)(ch ^ (length - i));
            byte num4 = (byte)((ch >> 8) ^ i);
            chArray[i] = (char)((num4 << 8) | num3);
        }

        File.AppendAllText("decript.txt", Environment.NewLine + string_0 + "  =  " + string.Intern(new string(chArray))); 
```

return string.Intern(new string(chArray));

```
 } 
```

感谢帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:33:03.910

C# 版本（仅出于教育原因 - 尽可能保留类似的代码）：

```
public static string encrypt(string s)
{
    int length = s.Length, i = 0;
    char[] chArray = new char[length];
    byte b1, b2;
    char ch;
    for (i = 0; i <= chArray.Length - 1; i++)
    {
        ch = s[i];
        b1 = Convert.ToByte((ch ^ (length - i)));
        b2 = Convert.ToByte(((ch >> 8) ^ i));
        chArray[i] = (char)((b2 << 8) | b1);
    }
    return string.Intern(new string(chArray));
} 
```

# java - 如何在这种 Map 上迭代或获取特定值？

> ID：11116350
> 
> 赞同：0
> 
> 时间：2012-06-20T09:16:13.987
> 
> 标签：java, android, map, for-loop, iterator

```
Map<Integer, Map<String, String>> movie = new HashMap<Integer,Map<String, String>>();
Map<String,String> sub = new HashMap<String,String>(); 
```

我这样做是为了填充并尝试迭代它：

```
Iterator<Element> releases = doc.select(
                    "div.pmovie > div.releases > div.release").iterator();
        Iterator<Element> subt = doc.select(
                "div.release-info > div.section > div.links > div > a")
                .iterator();
        int movindex = 1;
        while (subt.hasNext()) {
            Element rel = releases.next();
            Element subti = subt.next();
            release = rel.text();
            Log.v("RELEASES", release);
            subtitulo = subti.attr("href");
            Log.v("SUBTITULO", subtitulo);
            sub.put(release,subtitulo);
            movie.put(movindex, sub);
            movindex++;

        }

for (Entry<Integer, Map<String,String>>  entry : movie.entrySet()) {    
             key = entry.getKey();
             sub = entry.getValue();
                    for (Entry<String,String> entrada : sub.entrySet()) {

                        subtitle = entrada.getKey();
                        ruta = entrada.getValue();
               Log.v("SUB ITERATOR", key+" "+subtitle);

            } 
```

我遇到的问题是内在的“for”。当我只需要外部 Map 键值引用的对 (K,V) 时，它正在获取所有“子”映射值。在 Map 中迭代此 Map 的正确方法是什么？如何使用外部地图的键从内部地图到达特定的（K，V）？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:25:41.087

您要达到的目标不是很清楚。但问题可能在于您填充地图的方式。您`sub`对所有键都使用相同的键，因此它们都指向包含所有记录的同一个映射。`new HashMap<String, String>()`每次递增时，您可能应该将 a 分配给 sub `movieIndex`。

But if you do that, based on your code sample, each key (movieindex) will point to a map that contains only one entry.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:28:39.267

First of See this one [Java Hashmap: How to get key from value?](https://stackoverflow.com/questions/1383797/java-hashmap-how-to-get-key-from-value)

And then like this you can get that :

```
for (Map.Entry<String, List<String>> entry : map.entrySet()) {
    List<String> list = entry.getValue();
    // Do things with the list
} 
```

We can iterate over keys by calling `map.keySet()`, or iterate over the entries by calling `map.entrySet().`

# ant - Ant的rsync的任何模拟？

> ID：11116363
> 
> 赞同：12
> 
> 时间：2012-06-20T09:17:02.177
> 
> 标签：ant, rsync

我需要一些`rsync`蚂蚁的类似物。问题是将文件从源目录复制到以前使用脚本完成的子目录集

```
rsync -r --ignore-existing $BASE_DIR/common/config/* $BASE_DIR/config 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T10:47:23.160

您可以使用[exec](http://ant.apache.org/manual/Tasks/exec.html)[从 Ant](http://www.lightcubesolutions.com/blog/?p=104)调用rsync ，您可以使用[java](http://ant.apache.org/manual/Tasks/java.html)任务来调用[Jarsync](http://jarsync.sourceforge.net/)或[java-sync](https://code.google.com/p/java-rsync/)，或者您可以创建[自定义 ant 任务](http://ant.apache.org/manual/develop.html)来调用这些库中的任何一个。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-06T15:59:43.183

僵尸问题，但发布[https://gist.github.com/garethr/878364](https://gist.github.com/garethr/878364)以防我自己再次搜索它。粘贴要点内容以防万一。

```
<project name="{{ name }}" default="help" basedir=".">
<property name="username" value="{{ username }}"/>
<property name="host" value="{{ host }}"/>
<property name="dir" value="/srv/{{ path }}/"/>

<tstamp>
    <format property="TODAY_UK" pattern="yyyyMMddhhmmss" locale="en,UK"/>
</tstamp>

<target name="help" description="show available commands" >
<exec executable="ant" dir="." failonerror="true">
<arg value="-p"/>
</exec>
</target>
<target name="deploy-to" description="show where we are deploying to" >
<echo>${username}@${host}:${dir}</echo>
</target>

<target name="deploy" description="deploy usng rsync" >
<exec executable="rsync" dir="." failonerror="true">
<arg value="-r"/>
<arg value="."/>
<arg value="${username}@${host}:${dir}"/>
<arg value="--exclude-from=rsync.excludes"/>
<arg value="-v"/>
</exec>
</target>

<target name="deploy-test" description="test deploy usng rsync with the dry run flag set" >
<exec executable="rsync" dir="." failonerror="true">
<arg value="-r"/>
<arg value="."/>
<arg value="${username}@${host}:${dir}"/>
<arg value="--exclude-from=rsync.excludes"/>
<arg value="--dry-run"/>
<arg value="-v"/>
</exec>
</target>

<target name="backup" description="backup site" >
<exec executable="scp" dir="." failonerror="true">
<arg value="-r"/>
<arg value="${username}@${host}:${dir}"/>
<arg value="backups/${TODAY_UK}"/>
</exec>
</target>

</project> 
```

# php - 通过比较值从数组中返回键

> ID：11116365
> 
> 赞同：0
> 
> 时间：2012-06-20T09:17:07.420
> 
> 标签：php, arrays, comparison, sorting

我有 3 个数组，一个具有低值权重，另一个具有高值权重，第三个：该权重“括号”的实际值：

```
Array 1
(
    [0] => 0.00
    [1] => 2.00
    [2] => 5.00
    [3] => 20.00
    [4] => 50.00
    [5] => 100.00
)
Array 2
(
    [0] => 1.90
    [1] => 4.90
    [2] => 20.00
    [3] => 50.00
    [4] => 100.00
)
Array 3
(
    [0] => 30
    [1] => 50
    [2] => 100
    [3] => 200
    [4] => 500
    [5] => 1000
) 
```

我需要从数组 3 中找到相应的 KEY，其中我的值（比如说 5.30）大于数组 1 中的值但小于数组 2 中的对应值（大于 5 但小于 20）。此示例的结果将从数组 3 生成数组键 [2] 和值 100。

我可以遍历每个数组并找到键，但我希望有一种更快的方法来做到这一点，通过某种方式合并数组：

```
 [2] =>  
        [0] => 5.00
        [1] => 20.00
        [2] => 100 
```

...然后查看我的值是否在 [0] 和 [1] 之间，如果是，则返回 [2] 基本上 [2][0] 是“从”重量，[2][1] 是“到”重量和该“括号”的值为 [2][2]。

使用示例代码合并数组：

```
Array
(
    [0] => Array
        (
            [0] => 0.00
            [1] => 1.90
            [2] => 30
        )

    [1] => Array
        (
            [0] => 2.00
            [1] => 4.90
            [2] => 50
        )

    [2] => Array
        (
            [0] => 5.00
            [1] => 20.00
            [2] => 100
        )

    [3] => Array
        (
            [0] => 20.00
            [1] => 50.00
            [2] => 200
        )

    [4] => Array
        (
            [0] => 50.00
            [1] => 100.00
            [2] => 500
        )

    [5] => Array
        (
            [0] => 100.00
            [1] => 
            [2] => 100
        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:23:32.477

如果您的输入数据没有以这种不幸的方式结构化，那将会容易得多。

无论如何，如果您想*快速*执行此操作，那么适当的解决方案可能是手动循环：

```
// possibly add some error checking
foreach($lows as $i => $low) {
    if ($value >= $low && isset($highs[$i]) && $value <= $highs[$i]) {
        return $values[$i];
    }
} 
```

要执行您的要求（合并数组），您可以使用`array_map`：

```
$merged = array_map(
          function($low, $high = null, $value) {
              return func_get_args();
          },
          $lows, $highs, $values); 
```

进而：

```
foreach($bands as $band) {
    if($value >= $band[0] && $band[1] && $value <= $band[1]) {
        return $band[2];
    }
} 
```

# method-chaining - 链接 jQuery.each()

> ID：11116370
> 
> 赞同：4
> 
> 时间：2012-06-20T09:17:30.960
> 
> 标签：method-chaining, jquery

我正在尝试将对象的结果添加到新创建的 HTML 元素中：

```
*long chain of newly created elements*.append(
    $("<div />").append(
        $.each(myObj.results, function( intIndex, objValue ){
            return objValue.description;
        })
    )
); 
```

如果我使用带有 for 循环而不是 each() 的 function() 调用，它可以工作，但是有没有办法通过 each() 来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T09:25:45.840

.each 只是遍历一个集合，你需要一个匿名函数来返回一些东西，所以试试这个：

```
$("<div />").append(function(){
        var string = "":
        $.each(myObj.results, function( intIndex, objValue ){
               string += objValue.description;
            })
        return string;
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T09:23:03.973

`.each`用于迭代列表并执行操作，您可以使用[$.map](http://api.jquery.com/jQuery.map/)实现您想要的，它在每次迭代中从返回的元素构建一个数组。

```
*long chain of newly created elements*.append(
    $("<div />").append(function(){
        var des = $.map(myObj.results, function( objValue ){
                     return objValue.description;
                  });
        return des.join(' ');
      });
); 
```

# jquery - 在 i18n 化的 Rails 3.2 应用程序中用 timeago jQuery 插件替换 time_ago_in_words

> ID：11116372
> 
> 赞同：4
> 
> 时间：2012-06-20T09:17:37.580
> 
> 标签：jquery, ruby-on-rails-3, internationalization, railstutorial.org, timeago

[通过Rails Best Practices](http://railsbp.com/)运行我完成的 Rails 教程应用程序给我一个警告，[不要使用该`time_ago_in_words`方法](http://rails-bestpractices.com/posts/105-not-use-time_ago_in_words)，因为“在服务器端计算时间太贵了”，因此他们提供了一些示例代码来更改您的实现以使用[timeago jQuery 插件](http://timeago.yarp.com/). 听起来它会做出有趣的改变，所以我尝试了一下。我使用的原始代码`time_ago_in_words`在两个地方：

**app/views/shared/_feed_item.html.haml**

```
# ...
%span.timestamp
  = t('.time_posted_ago', time: time_ago_in_words(feed_item.created_at) ) 
```

**app/views/microposts/_micropost.html.haml**

```
# ...
%span.timestamp
  = t('.time_posted_ago', time: time_ago_in_words(micropost.created_at)) 
```

我使用 HTML5 标记将代码更改为使用 timeago，如下所示`time`：

**app/views/shared/_feed_item.html.haml**

```
# ...
%time.timeago{ datetime: feed_item.created_at.getutc.iso8601 }
  = t('.time_posted_ago', time: feed_item.created_at.to_s) 
```

**app/views/microposts/_micropost.html.haml**

```
# ...
%time.timeago{ datetime: micropost.created_at.getutc.iso8601 }
  = t('.time_posted_ago', time: micropost.created_at.to_s) 
```

我想，我只需要将 timeago() 方法添加到我的咖啡脚本文件中：

**应用程序/资产/javascripts/application.js.coffee**

```
$(document).ready ->
  $("time.timeago").timeago() 
```

这不起作用，所以我尝试将声明移至**microposts.js.coffee**和**users.js.coffee**，无论有无，但`$(document).ready ->`仍然不行。然后我想也许 timeago 所需的库默认情况下不包含在 中`jquery-rails`，所以我添加了它们：

**应用程序/资产/javascripts/application.js.coffee**

```
//= require jquery
//= require jquery_ujs
//= require jquery.min
//= require jquery.timeago
//= require bootstrap
//= require_tree . 
```

在此处添加`jquery.min.js`and`jquery.timeago.js`声明不起作用，而且我还假设我的语法已关闭，因为它们破坏了我依赖于 javascript 的其他页面元素。

所以，据我了解，我认为我的 haml 文件中的实现代码是正确的，但我只是不知道：

1.  我应该在哪个咖啡脚本文件中`$("time.timeago").timeago()`调用以及如果我所拥有的不正确我应该如何编写它
2.  `timeago`rails-jquery 中是否包含库
3.  如果不是，如何正确包含它们

在花了很多时间在这之后，我最终尝试了[rails-timeago](https://github.com/jgraichen/rails-timeago) gem，它除了有一些不错的助手外，确实可以让时间正确显示。但是，它似乎不能很好地与`t()`上面的 rails 方法实现配合使用，以便仅以文字形式获取时间，然后将其插入到 i18n 字符串中。

那么，如何`time_ago_in_words`在带有 i18n 的 Rails 3.2 应用程序中使用 timeago JQuery 插件获得预期的效果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T20:10:58.223

我设法使用[rails-timeago gem](https://github.com/jgraichen/rails-timeago)破解了一个解决方案。这不是最优的，但它似乎得到了想要的 timeago 效果，这非常好。我想知道如何仅使用[timeago jQuery 插件](http://timeago.yarp.com/)和`%time.timeago`标签在 Rails 中获得相同的效果。无论如何，希望这对某人感兴趣。

### 设置

**宝石文件**

```
gem 'rails-timeago', '1.3.0' 
```

**配置/初始化程序/timeago.rb**

```
Rails::Timeago.default_options limit: proc { 20.days.ago }, nojs: true
Rails::Timeago.locales = [:en, :it, :ja] 
```

创建**app/assets/javascripts/locales**目录以将自定义设置到 timeago i18n 字符串。为了完整起见，我从[jQuery-timeago Github 存储库](https://github.com/rmm5t/jquery-timeago/tree/master/locales)中为我的应用程序获取了我想要的三个语言环境并将它们放在目录下，但实际上只是最终更改了 ja 语言环境文件。

**应用程序/资产/javascripts/application.js.coffee**

```
# ...
//= require jquery
//= require jquery_ujs
//= require rails-timeago 
```

**应用程序/视图/布局/application.html.haml**

```
# ...
%head
  # ...
  = javascript_include_tag "application"
  = timeago_script_tag 
```

### 执行

**app/views/microposts/_micropost.html.haml**

```
# ...
%span.timestamp
  = t('.time_posted_prefix')
  %time<
    = timeago_tag(micropost.created_at)
    = t('.time_posted_suffix') 
```

**app/views/shared/_feed_item.html.haml**的代码是相同的：只需`micropost`替换`feed_item`.

### i18n

**配置/语言环境/en.yml**

```
microposts:
  micropost:
    time_posted_prefix: Posted
    time_posted_suffix: "" 
```

**配置/语言环境/it.yml**

```
microposts:
  micropost:
    time_posted_prefix: Pubblicato
    time_posted_suffix: "" 
```

**配置/语言环境/ja.yml**

```
microposts:
  micropost:
    time_posted_prefix: ""
    time_posted_suffix: に投稿された。 
```

`shared.feed_item`i18n 文件中的字符串是相同的。

我找不到`t()`动态使用`timeago_tag`（例如`t('.time_posted_ago', time: timeago_tag(micropost.created_at))`）结果的方法，所以我将结果放在前缀和后缀之间。timeago 提供了与时间相关的前缀/后缀，但不提供与“发布”相关的前缀/后缀，因此在上面添加了它们。
为了消除 and 的输出之间的空格`timeago_tag`（`time_posted_suffix`特别是对于日语），我将这两个标签包装在一个`%time<`带有 a 的标签中，`<`以[删除标签中的所有空格](http://haml.info/docs/yardoc/file.HAML_REFERENCE.html#whitespace_removal__and_)。这是一件小事，但对我来说很烦人，所以我想把它放进去，但如果你不使用需要键值的语言，这绝不是必要的`time_posted_suffix`。我还假设有更好的方法来做到这一点。

### 问题

我最初在**app/assets/javascripts/locales**目录下有**jquery.timeago.en.js**、**jquery.timeago.it.js**和**jquery.timeago.ja.js**，但是我遇到了 en 文件没有的问题为 en 语言环境加载；相反，目录中按字母顺序排列的最后一个文件 ja 将与 en 语言环境一起使用。因此，我将 en 文件重命名为**jquery.timeago.xx.js**，它可以显示英文。我尝试将 en 文件移到 locales 目录之外，但它似乎从未被拾取，所以它变成了 xx。

 ****### 更新

我遇到的 i18n 问题现在已经解决了。有关详细信息，请参阅[此 Github 问题](https://github.com/jgraichen/rails-timeago/issues/5)。总之，我摆脱了我的**app/assets/javascripts/locales**目录，只将**jquery.timeago.ja.js**（我真正想要自定义的唯一文件）放在**lib/assets/javascripts/locales**目录下，这意味着`:it`和`:en`locales,`timeago`的默认翻译被使用，并且`:en`翻译按预期显示。`rails-timeago`所以，我确实得到了我认为用gem解决这个问题的好方法。

### 更新 2

此解决方案目前在本地工作，但由于资产预编译问题无法正确部署到 Heroku...

### 更新 3

找到了一个似乎可以在本地和 Heroku 中使用的配置解决方案：

**配置/初始化程序/timeago.rb**

```
Rails::Timeago.default_options limit: proc { 20.days.ago }, nojs: true
Rails::Timeago.locales = [:en, :it, :ja]
Rails::Timeago.map_locale "en", "jquery.timeago.js"  # default
Rails::Timeago.map_locale "it", "locales/jquery.timeago.it.js"  # default
Rails::Timeago.map_locale "ja", "timeago/jquery.timeago.ja.js"  # customized 
```

**配置/环境/production.rb**

```
# ...
config.assets.precompile += %w( jquery.timeago.js locales/jquery.timeago.it.js timeago/jquery.timeago.ja.js ) 
```

而且，在这种情况下，唯一需要的自定义文件是**app/assets/javascripts/timeago/jquery.timeago.ja.js**

更多细节可以在[相关的 Github issue](https://github.com/jgraichen/rails-timeago/issues/4)中找到。****

# gwt - 我需要将 Gwt 编译输出传输到 phonegap“www”文件夹中的哪些文件夹或文件？

> ID：11116378
> 
> 赞同：1
> 
> 时间：2012-06-20T09:18:11.307
> 
> 标签：gwt, cordova

我需要传输哪些文件夹或文件才能在 phonegap 中正常工作。我在 GWT 中取得了成功，但问题是：我只将 GWT 中的“war”文件夹转移到 Phonegap 的“www”文件夹中。而且它不像在 GWT 中那样工作。（我猜javascript应用程序不起作用）。我的项目是默认的 GWT 第一个教程。无论如何，有没有办法先在 GWT 中创建并在 phonegap 平台上运行应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:27:14.837

您可以在 phonegap 中运行您的 GWT 应用程序（查看[http://www.m-gwt.com](http://www.m-gwt.com)）。这个开源项目是关于运行移动 gwt 的。

基本上，您需要做的是将 GWT 输出复制到 phonegap 项目的 www 文件夹。

假设您的模块的名称为“greet”。然后 gwt 编译器将创建一个文件夹“greet”作为其输出文件夹，其中包含运行应用程序所需的所有文件。

您还想做的是将 index.html 文件从 phonegap 更改为包含您的 GWT 应用程序。

所以之后的某个地方：

```
<script type="text/javascript" language="javascript" src="cordova-version.js"></script> 
```

您需要包含您的 gwt 模块：

```
 <script type="text/javascript" language="javascript" src="greet/greet.nocache.js"></script> 
```

如果您想查看[http://www.m-gwt.com](http://www.m-gwt.com)，那里有很多关于如何开始使用 GWT / Phonegap 的文档。

# jquery - 重定向后如何调用jQuery函数（由提交引起）？

> ID：11116381
> 
> 赞同：0
> 
> 时间：2012-06-20T09:18:18.920
> 
> 标签：jquery, ruby-on-rails, jquery-validate

我有这样的问题：我正在使用 rails、devise gem 和 jQuery 验证插件。我有注册路径后，但我需要用祝贺消息调用模态。所以当我调用提交时 - 它正在调用，但在一秒钟内它被关闭，因为重定向到其他页面。

我需要在重定向后调用模态，我该怎么做？这是我的js代码：

**编辑：如何使它工作？如果 notice=... 则调用模态**

```
 $(document).ready(function(){
      if($('.notice').val() == 'Welcome! You have signed up successfully.')
     $('#congrats').show();

     $('.sign_up').validate({

    rules: {

        "user[email]":{
            email: true,
            required: true
        },

        "user[first_name]":{
            required: true
        },

        "user[last_name]":{
            required: true
        },

        'user[password]': {
            required: true,
            minlength: 6
        },
        'user[password_confirmation]': {
            required: false,

        }
    },
    success: "valid"
});
$(".sub a").click(function() {
    $(this).siblings("div").show("fast");
});//code for showing hidden areas 
```

警报的HTML代码：

```
 <div class="alert alert-notice">Signed out successfully.</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:33:20.723

您应该放入`$('#congrats').show();`重定向后呈现的视图，并在某些条件下调用它。例如，如果`flash[:notice]`设置了 a，您可以在 jQuery 中检查它的值并选择显示`#congrats`。

**更新**

```
$('document').ready(function() {
  if($('.alert').html().indexOf('Welcome! You have signed up successfully.') != -1) 
    $('#congrats').show();
}); 
```

我试过了，它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:35:22.780

在提交/验证表单时，只需打开对话框，如

`$('#congrats').show(); return false;`

并在关闭对话框时执行

`form.submit();`

# java - Java GTK+ 原生外观和感觉看起来又粗又粗

> ID：11116386
> 
> 赞同：1
> 
> 时间：2012-06-20T09:18:28.117
> 
> 标签：java, swing, gtk, look-and-feel

在将原生外观应用到我的 JFrame 时，我遇到了一个问题，所有文本（HTML 格式的 JLabel 除外）都有丑陋的粗体字体。

以下代码中非常简单的 UI 总结了我在 L&F 中看到的所有差异：

```
import java.awt.BorderLayout;
import java.awt.Dimension;

import javax.swing.Box;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.UIManager;

public class HelloWorld extends JFrame {
    public HelloWorld() {
        Box b = Box.createVerticalBox();

        // Labels
        JLabel bold = new JLabel("I'm bold !");
        JLabel notBold = new JLabel("<html><em>I'm not bold !</em></html>");
        b.add(bold);
        b.add(notBold);

        // Scrollbars example
        JPanel scrollViewPort = new JPanel();
        scrollViewPort.setPreferredSize(new Dimension(400, 400));

        JScrollPane scroll = new JScrollPane(scrollViewPort);
        b.add(scroll);

        add(b, BorderLayout.CENTER);

        // Bold menu
        JMenuBar menubar = new JMenuBar();
        JMenu menu = new JMenu("Menu");
        JMenuItem item = new JMenuItem("Item");
        menu.add(item);
        menubar.add(menu);

        setJMenuBar(menubar);
        setPreferredSize(new Dimension(200, 200));
        pack();
    }

    public static void setNativeLAF() {
        // Native L&F
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Exception e) {
            System.out.println("Unable to set native look and feel: " + e);
        }
    }

    public static void main(String[] args) {
        // setNativeLAF();

        HelloWorld app = new HelloWorld();
        app.setVisible(true);
    }
} 
```

看到不同 ：

原生 L&F (GTK+)

[![原生 L&F (GTK+)](../Images/748ff7757fe248d2c73e3413ee335fad.png)](https://i.stack.imgur.com/xakxP.png)

与金属 L&F

[![与金属 L&F](../Images/e4ecd85c6b42f97600dbec1591f602b4.png)](https://i.stack.imgur.com/9hyYe.png)

通过注释掉`setNativeLAF()`通话。

当我的应用程序启动时，在任何窗口出现之前，我正在应用本机外观。这`UIManager`给了我`GTK+ (com.sun.java.swing.plaf.gtk.GTKLookAndFeel)`原生的外观和感觉，这没关系，因为我使用的是 Gnome 3 桌面。

我现在有三个问题：

1.  GTK+ 的外观和感觉不像 GTK 主题（请参阅滚动条）
2.  JMenuBar 似乎已禁用*（Metal L&F 不是这种情况）*
3.  字体是粗体！*（与金属 L&F 相同的问题，但可以修复）*

任何有关 GTK+ L&F 为什么在我的系统上执行此操作的帮助或解释都将不胜感激。

编辑：这是 Eclipse 中我的系统上的“经典”应用程序的样子。

![蚀](../Images/cb843a6cc01541077b58e471e0c6b21d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T18:54:50.547

我看到有几件事值得一提：

1.  您可以将派生字体应用到标签，如下所示。

2.  组件系统中[HTML](http://docs.oracle.com/javase/tutorial/uiswing/components/html.html)的相关[规范“](http://www.w3.org/TR/REC-html32) **EM基本强调通常以***斜体字体*呈现”。

****   另请参见*[初始线程](http://download.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)*。*** 

 ***![在此处输入图像描述](../Images/c47b75e4c6d4098916cd47397421c395.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Font;
import javax.swing.Box;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JScrollPane;

public class HelloWorld extends JFrame {

    public HelloWorld() {
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        Box b = Box.createVerticalBox();

        // Labels
        JLabel bold = new JLabel("I'm bold !");
        bold.setFont(bold.getFont().deriveFont(Font.BOLD));
        JLabel notBold = new JLabel("<html><em>I'm not bold !</em></html>");
        b.add(bold);
        b.add(notBold);

        // Scrollbars example
        JPanel scrollViewPort = new JPanel();
        scrollViewPort.setPreferredSize(new Dimension(400, 200));
        JScrollPane scroll = new JScrollPane(scrollViewPort);
        b.add(scroll);
        add(b, BorderLayout.CENTER);

        // Bold menu
        JMenuBar menubar = new JMenuBar();
        JMenu menu = new JMenu("Menu");
        JMenuItem item = new JMenuItem("Item");
        menu.add(item);
        menubar.add(menu);
        setJMenuBar(menubar);

        pack();
        setLocationRelativeTo(null);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                HelloWorld app = new HelloWorld();
                app.setVisible(true);
            }
        });
    }
} 
```***

# android - 带有 assyncTask 图像下载器的 Android 适配器（回收器视图）

> ID：11116389
> 
> 赞同：0
> 
> 时间：2012-06-20T09:18:34.613
> 
> 标签：android, listview, adapter

我使用带有回收视图（支架）的适配器。这是代码：

```
@Override
public View getView(int position, View convertView, ViewGroup parent)  {

    ViewHolder holder;

    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.playlists_item, null);

        holder          = new ViewHolder();

        holder.picture  = (ImageView)   convertView.findViewById(R.id.playlist_picture);
        holder.name     = (TextView)    convertView.findViewById(R.id.playlist_name);
        holder.desc     = (TextView)    convertView.findViewById(R.id.playlist_desc);
        holder.play_bt  = (ImageView)   convertView.findViewById(R.id.playlist_play);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.picture.setImageResource(R.drawable.placeholder);

    ...

if(messages.get(position).containsKey("IMAGE"))
            {
                if(global.isInCache(messages.get(position).get("IMAGE")))
                    holder.picture.setImageBitmap(global.getBitmap(messages.get(position).get("IMAGE")));
                else{
                    holder.picture.setTag("http://**********" + messages.get(position).get("IMAGE"));
                    new loadImageTask().execute(holder.picture,cache,messages.get(position).get("IMAGE"),"********/upload/********/");
                }
            } 
```

这是我的下载器：

```
public class loadImageTask extends AsyncTask< Object , Void, Void>
{
    ...

    @Override
    protected void onPreExecute() {

    }

    @Override
    protected Void doInBackground(Object... params) {
        imagem = (ImageView) params[0];
        image_tag = (String)imagem.getTag();
        caminho = (String) params[3];
        name = (String) params[2];
        imgLoad = LoadImageFromWeb(caminho+name);

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {

        if (imgLoad instanceof BitmapDrawable) { 
            bitmap = ((BitmapDrawable)imgLoad).getBitmap();
        }

        bitmap = getResizedBitmap(bitmap, 100, 100);

        global.putCache(name, bitmap);

        imagem.setImageBitmap(bitmap);
    }
} 
```

事实证明，当我在`listview`下载完成后滚动时，它`image`会加载到我可见的位置（并且在快速滚动时的相同位置，`listview`每次下载完成时总是会更改图像）。

我希望，如果您正在下载要完成的图像的位置不再可见，那就没有完成`setImageBitmap`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-16T16:40:21.620

试试 Picasso 或 Glide 库

```
 Picasso.get().load(url)
     .placeholder(R.drawable.iconname)
     .error(R.drawable.iconname)
      .into(/*your image view*/);

    Glide.with(context)
     .load("http://inthecheesefactory.com/uploads/source/glidepicasso/cover.jpg")
     .into(ivImg); 
```

# java - Java 中的自然语言处理 (NLP)

> ID：11116390
> 
> 赞同：3
> 
> 时间：2012-06-20T09:18:49.087
> 
> 标签：java, nlp

> **可能重复：**
> [Java：有没有好的自然语言处理库](https://stackoverflow.com/questions/870460/java-is-there-a-good-natural-language-processing-library)

谁能告诉我有关 Java 中的 NLP 库的信息？如果也有适当的记录，那就太好了。我曾尝试使用 lingpipe，但我无法完全理解它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T09:23:05.057

你应该试试[Stanford-NLP](http://nlp.stanford.edu/software/index.shtml)。它有许多用于 NLP 的实用程序和库，例如词性标注器，所有这些都非常好用且易于理解。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T06:16:19.520

现在可能有点晚了，我想你一定已经继续你的项目了。但是你无论如何都可以查看[这个](http://rajvardhan.wordpress.com/)博客。它有一系列关于 nlp with java 的帖子。[正如其他人所建议的， Stanford-NLP](http://nlp.stanford.edu/software/)是一个很好的库。

大多数库将在词法分析阶段（句子分割、标记化、POS 标记、解析等）为您提供帮助，这样您就不必从头开始编写代码。祝一切顺利 ！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T09:22:37.943

这些是您可以使用的其他 2 个 NLP 库。

*   [开放式自然语言处理](http://opennlp.apache.org/)
*   [斯坦福自然语言处理](http://nlp.stanford.edu/)

斯坦福 NLP 集团有效地将复杂而深入的语言建模和数据分析与 NLP 的创新概率和机器学习方法相结合。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-14T10:55:08.983

我已经用 jRuby对[Apache OpenNLP进行了一些试验。](http://opennlp.apache.org/)它非常好和可靠，但当时我写这个记录很差。如果您尝试 OpenNLP，我建议您阅读以下文章：

*   [OpenNLP（自然语言处理）入门](http://danielmclaren.com/2007/05/11/getting-started-with-opennlp-natural-language-processing/)
*   [使用 Hadoop 和 Pig 挖掘维基百科以进行自然语言处理](http://dev.blogs.nuxeo.com/2011/01/mining-wikipedia-with-hadoop-and-pig-for-natural-language-processing.html)
*   [OpenNLP 教程](http://www.programcreek.com/2012/05/opennlp-tutorial/)
*   [使用 OpenNLP 的 UIMA 句子注释器](http://sujitpal.blogspot.com/2011/04/uima-sentence-annotator-using-opennlp.html)

[OpenNLP 的文档](http://opennlp.apache.org/documentation.html)可以在[这里](http://opennlp.apache.org/documentation.html)找到。

这是我使用 OpenNLP进行**命名实体识别的项目中的代码。**它是用 jRuby 编写的。OpenNLP 模型存储在数据库中，因为代码在 Heroku 上运行，您无法在其中的文件系统上编写代码。

*   [带有 OpenNLP、jRuby 和 Grape 的 Politiki 命名实体识别 API](https://github.com/otobrglez/politiki-ner/blob/master/api.rb)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-23T20:43:01.633

实际上有一个安静的好[NLP 工具列表](http://www.ling.uni-potsdam.de/~kolb/nlp-tools.html)。它是德语的，但应该与谷歌翻译一起使用。但我还是列出了一些：

*   [配合工具 (GPL V2)](http://code.google.com/p/mate-tools/)
*   [OpenNLP（Apache 许可证 V2）](http://opennlp.apache.org/)
*   [斯坦福 NLP（双重许可，GPL V2）](http://nlp.stanford.edu/)
*   [树标记器](http://www.ims.uni-stuttgart.de/projekte/corplex/TreeTagger/)

如果您想要最好的英语，请选择斯坦福，但它的 GPL v2。对于不那么流行的语言，Treetagger 更好（它只需要一个较小的训练语料库就可以工作）。例如，您使用 TreeTagger 在德语文本上获得更好的结果，不再了解该调查，但如果您需要，我可以搜索它。OpenNLP 不如其他工具好，但它在 Apache License v2 下，您也应该考虑这一点。

# c#-4.0 - SoundCloud - 401 未经授权的错误 - 在没有 SoundCloud 连接屏幕的情况下进行身份验证

> ID：11116394
> 
> 赞同：0
> 
> 时间：2012-06-20T09:18:52.110
> 
> 标签：c#-4.0, oauth-2.0, soundcloud

我是 SoundCloud 的新手，一直在关注[Authenticating without SoundCloud screen](http://developers.soundcloud.com/docs#authenticated-user)中的开发人员文档。

但是，当我的应用程序发送请求时，我收到 401 Unauthorized 错误。在文档中，它指定检查 client_id 或 access_token 是否没有丢失。

我无法弄清楚这里有什么问题。我检查了以下内容：

1.  注册申请 - 检查
2.  传递 client_id 和 client_secret - 检查

这是我调用声音云服务器的代码：

```
response = (HttpWebResponse)request.GetResponse(); 
```

以下是请求对象的值：

AuthenticationLevel MutualAuthRequested
CachePolicy {Level:BypassCache}
ConnectionGroupName null
ContentLength -1
ContentType "application/json"
Credentials null
Headers {Content-Type: application/json}
ImpersonationLevel 委派
方法 "POST"
PreAuthenticate false
代理 {System.Net.WebRequest.WebProxyWrapper}
RequestUri {https://api.soundcloud.com/oauth2/token?client_id=############&client_secret=###########&grant_type=password&username=#### ###&密码=########}
超时 100000
UseDefaultCredentials false

通话后我收到 401 Unauthorized 错误，我什至尝试关注[Geek Life 的](http://www.geeklife.ch/dev/soundcloud-client-c/)博客，但收到同样的错误。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:33:52.997

我认为这里的问题是您在请求的查询字符串中发送客户端凭据。您必须改为在请求正文中发送它们。

# soap - 如何在 SOAPUI 中定义密钥库

> ID：11116396
> 
> 赞同：1
> 
> 时间：2012-06-20T09:18:55.473
> 
> 标签：soap, wsdl, soapui

如何在 SoapUI 中定义密钥库，它给出了错误无效的密钥库格式。我要为此定义哪个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:50:07.033

就我而言，我使用 .pfx 文件。在 SSL 选项卡上，我输入 .pfx 的路径和密码。然后它“正常工作”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:48:58.780

v4.5 显然存在问题，因为一些用户（包括同事）正在使用以前工作的密钥库获得“无效的密钥库格式”。请参阅此链接： [http ://www.eviware.com/forum/viewtopic.php?f=4&t=13181&p=33196&hilit=p12#p33196](http://www.eviware.com/forum/viewtopic.php?f=4&t=13181&p=33196&hilit=p12#p33196)

我在 4.5 中遇到了一个不同的错误，所以我回到了 4.0，这对我来说很好用。如果您改用 4.0，您的问题可能会消失。

# linux - crt1.o：在函数“_start”中：-Linux 中未定义对“main”的引用

> ID：11116399
> 
> 赞同：48
> 
> 时间：2012-06-20T09:19:00.680
> 
> 标签：linux, main, undefined-reference

我正在将应用程序从 Solaris 移植到 Linux

链接的目标文件没有定义 main()。但是编译和链接在 Solaris 中正确完成并生成了可执行文件。在 Linux 中我得到这个错误

```
 /usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../lib64/crt1.o: In function `_start':
(.text+0x20): undefined reference to `main' 
```

我的问题是，我不能包含新的 .c/.o 文件，因为它是一个巨大的应用程序并且已经运行了多年。我怎样才能摆脱这个错误？

makefile 的代码摘录：

```
RPCAPPN = api
LINK = cc 

    $(RPCAPPN)_server: $(RPCAPIOBJ)
            $(LINK) -g $(RPCAPIOBJ) -o $(RPCAPPN)_server $(IDALIBS) $(LIBS) $(ORALIBS) $(COMMONLIB) $(LIBAPI) $(CCLIB) $(THREADLIB) $(DBSERVERLIB) $(ENCLIB) 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-20T10:41:21.003

尝试添加`-nostartfiles`到您的链接器选项，即

```
$(LINK) -nostartfiles -g ... 
```

从[gcc 文档](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)：

```
-nostartfiles
    Do not use the standard system startup files when linking. The standard system libraries are used normally, unless -nostdlib or -nodefaultlibs is used. 
```

这会导致`crt1.o`不链接（默认情况下通常是链接的） - 通常仅在您实现自己的`_start`代码时使用。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-09-16T10:33:58.323

`-shared`编译时必须使用链接选项`.so`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-08-21T18:56:01.853

对我来说，问题是，我错误地放入`int main()`了命名空间。确保不要这样做，否则你会得到这个恼人的链接错误。

希望这对任何人都有帮助:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-06T07:07:52.530

在尝试使用 boost 构建一个新的测试项目时，我得到了类似的结果，结果发现我缺少一个声明：

```
#define BOOST_TEST_MODULE <yourtestName> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-25T08:57:33.193

在编译链接了 C++ 组件的 Fortran 程序时，我得到了类似的结果。就我而言，CMake 未能检测到应该将 Fortran 用于最终链接。然后返回的消息`make`以

```
[100%] Linking CXX executable myprogram
/lib/../lib64/crt1.o: In function `_start':
(.text+0x20): undefined reference to `main'
make[3]: *** [myprogram] Error 1
make[2]: *** [CMakeFiles/myprogram.dir/all] Error 2
make[1]: *** [CMakeFiles/myprogram.dir/rule] Error 2
make: *** [myprogram] Error 2 
```

解决方案是添加

```
set_target_properties(myprogram PROPERTIES LINKER_LANGUAGE Fortran) 
```

到 CMakeLists.txt，这样`make`打印出来：

```
[100%] Linking Fortran executable myprogram
[100%] Built target myprogram 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-07T19:32:15.097

我在创建我的 c 项目时遇到了同样的问题，我忘记保存我的 main.c 文件，所以没有 main 函数。

# sql - 时间参数在oracle sql查询中不起作用

> ID：11116402
> 
> 赞同：1
> 
> 时间：2012-06-20T09:19:12.270
> 
> 标签：sql, oracle

我通过这个进行 sql 查询，我想计算`05:00:00 PM`前后 的记录。`05:00:00 PM`这里是 smy 查询，但是通过这个我得到错误的结果，如果有任何逻辑错误，请任何人检查一下

```
Select trunc(gross_weight_date) date1,
count(*) before5 
from wbg.WBG_01_01
where to_char(gross_weight_date,'HH:MI:SS PM')>'05:00:00 PM'
and item_cod = 16
and trunc(gross_weight_date)='05-JAN-2012' 
group by trunc(gross_weight_date)
order by date1 
```

任何帮助都可以赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T09:31:51.640

1.  不要使用 VARCHAR2 比较日期，因为字符的排序顺序与数字不同（“12”在“5”之前）。
2.  不要将苹果与橙子进行比较（`trunc(gross_weight_date)`是日期，`'05-JAN-2012'`而是 VARCHAR2）。

处理日期时，您可以使用日期函数和日期算术，而无需求助于转换，例如：

```
Select trunc(gross_weight_date) date1, count(*) before5 
  from wbg.WBG_01_01
 where item_cod = 16
   and gross_weight_date > to_date('05-01-2012', 'DD-MM-YYYY') + 17/24 
   and gross_weight_date < to_date('05-01-2012', 'DD-MM-YYYY') + 1 
 group by trunc(gross_weight_date)
 order by date1 
```

或者

```
Select trunc(gross_weight_date) date1, count(*) before5 
  from wbg.WBG_01_01
 where item_cod = 16
   and gross_weight_date > to_date('05-01-2012', 'DD-MM-YYYY') 
                           + numtodsinterval(17, 'HOUR') 
   and gross_weight_date < to_date('05-01-2012', 'DD-MM-YYYY')
                           + numtodsinterval(1, 'DAY')
 group by trunc(gross_weight_date)
 order by date1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T09:22:01.020

您`chars`用于比较日期。那将无法正常工作。

* * *

由于您只想在下午 5 点之后进行比较，因此这里有一个更简单的解决方案：

```
Select trunc(gross_weight_date) date1,
count(*) before5 
from wbg.WBG_01_01
where to_number(to_char(gross_weight_date, 'HH24MISS')) > 150000
and item_cod = 16
and trunc(gross_weight_date)='05-JAN-2012' 
group by trunc(gross_weight_date)
order by date1 
```

它将日期的值传递给一个字符 ('171212')，然后传递给一个数字 (171212)，并将其与 150000 进行比较。

# xml - 如何在 BizTalk 中处理此 XML

> ID：11116403
> 
> 赞同：1
> 
> 时间：2012-06-20T09:19:17.017
> 
> 标签：xml, xsd, schema, biztalk, biztalk-2010

我被传递了一大块用于在 BizTalk 中处理的 XML。xml主要是以下形式：

```
<FieldItem>
    <Name>EmploymentStatus</Name>
    <Value xsi:type="xsd:string">1</Value>
</FieldItem> 
```

但是，有时名称值对会变得更复杂，看起来像这样：

```
 <FieldItem>
        <Name>EducationAndQualifications</Name>
        <Value xsi:type="RepeatingFieldArray">
            <Fields>
                <RepeatingField>
                    <Items>
                        <FieldItem>
                            <Name>Qualification</Name>
                            <Value xsi:type="xsd:string">umbraco</Value>
                        </FieldItem>
                        <FieldItem>
                            <Name>Establishment</Name>
                            <Value xsi:type="xsd:string">IBM</Value>
                        </FieldItem>
                        <FieldItem>
                            <Name>DateAchieved</Name>
                            <Value xsi:type="xsd:string">June 2011</Value>
                        </FieldItem>
                    </Items>
                </RepeatingField>
            </Fields>
        </Value>
    </FieldItem> 
```

我曾尝试通过 BizTalks 生成项目向导生成架构，但它无法应对类型的变化以及可能存在或不存在的其他重复字段。

因此，我正在寻找有关此方面最佳前进方式的建议/指导。是否可以创建 BizTalk 愿意处理的架构？或者，我目前偏爱的解决方案，是否应该创建一个自定义管道组件，将其拆分为单独的消息？

谢谢你的时间。

更新

如果我创建以下架构：

```
<?xml version="1.0" encoding="utf-16" ?> 
<xsd:schema xmlns:b="http://schemas.microsoft.com/BizTalk/2003" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<xsd:element name="FormData">
    <xsd:complexType>
        <xsd:sequence>
          <xsd:element name="FormName" type="xsd:string" /> 
          <xsd:element name="FormInstanceId" type="xsd:string" /> 
          <xsd:element name="Status" type="xsd:string" /> 
          <xsd:element name="Data">
              <xsd:complexType>
                  <xsd:sequence>
                      <xsd:element maxOccurs="unbounded" name="FieldItem">
                          <xsd:complexType>
                              <xsd:sequence>
                                  <xsd:element name="Name" type="xsd:string" /> 
                                  <xsd:element minOccurs="0" maxOccurs="unbounded" name="Value" nillable="true" type="xsd:anyType" /> 
                              </xsd:sequence>
                          </xsd:complexType>
                      </xsd:element>
                  </xsd:sequence>
              </xsd:complexType>
          </xsd:element>
      </xsd:sequence>
  </xsd:complexType> 
```

我收到以下错误：

这是一个无效的 xsi:type 'RepeatingFieldArray'

所以我仍然倾向于编写一些代码来解决这一切......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:22:52.803

我决定沿着自定义管道组件路由将重复数据提取到通用模式中，该模式也与通用重复键/值对匹配。我添加了其他字段，以便可以通过其部分识别每条消息。见下文：

```
<?xml version="1.0" encoding="utf-16" ?> 
    <xs:schema xmlns:b="http://schemas.microsoft.com/BizTalk/2003" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ns0="https://BizTalk.Interfaces.INT034.Schemas.PropertySchema" attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:annotation>
    <xs:appinfo>
    <b:imports xmlns:b="http://schemas.microsoft.com/BizTalk/2003">
      <b:namespace prefix="ns0" uri="https://BizTalk.Interfaces.INT034.Schemas.PropertySchema" location=".\PropertySchema.xsd" /> 
      </b:imports>
      </xs:appinfo>
      </xs:annotation>
    <xs:element name="Root">
    <xs:annotation>
    <xs:appinfo>
    <b:properties>
      <b:property name="ns0:Interface" xpath="/*[local-name()='Root' and namespace-uri()='']/*[local-name()='Interface' and namespace-uri()='']" /> 
      </b:properties>
      </xs:appinfo>
      </xs:annotation>
    <xs:complexType>
    <xs:sequence>
      <xs:element name="Interface" type="xs:string" /> 
      <xs:element name="Type" type="xs:string" /> 
      <xs:element name="FormName" type="xs:string" /> 
      <xs:element name="FormInstanceId" type="xs:string" /> 
      <xs:element name="Status" type="xs:string" /> 
    <xs:element name="Data">
    <xs:complexType>
    <xs:sequence>
    <xs:element maxOccurs="unbounded" name="FieldItem">
    <xs:complexType>
    <xs:sequence>
      <xs:element name="Name" type="xs:string" /> 
      <xs:element name="Value" type="xs:string" /> 
      </xs:sequence>
      </xs:complexType>
      </xs:element>
      </xs:sequence>
      </xs:complexType>
      </xs:element>
      </xs:sequence>
      </xs:complexType>
      </xs:element>
      </xs:schema> 
```

# css - magento：菜单类不激活

> ID：11116406
> 
> 赞同：0
> 
> 时间：2012-06-20T09:19:21.913
> 
> 标签：css, magento, menu, admin

我在 magento admin 中制作了自己的模块，并添加了一个带有 config.xml 文件的菜单：

```
 <adminhtml>
        <!-- The <layout> updates allow us to define our block layouts in a separate file so are aren't messin' with the Magento layout files.  -->
        <layout>
            <updates>
                <ineractivebanner>
                    <file>adminbanner.xml</file>
                </ineractivebanner>
            </updates>
        </layout>
        <!-- The <acl> section is for access control. Here we define the pieces where access can be controlled within a role. -->
        <acl>
            <resources>
                <admin>
                    <children>
                        <ineractivebanner>
                            <title>Banner Menu Item</title>
                            <children>
                                <interactivebannermenu>
                                    <title>Banner Menu Item</title>
                                </interactivebannermenu>
                            </children>
                        </ineractivebanner>
                    </children>
                </admin>
            </resources>
        </acl>
      <menu>
        <interactivebanner>
            <title>Banners</title>
            <sort_order>71</sort_order>
            <children>
                <interactivebannermenu>
                    <title>Manage Banners</title>
                    <sort_order>1</sort_order>
                    <action>interbanner/adminhtml_banner/index</action>
                </interactivebannermenu>
            </children>
       </interactivebanner>
    </menu>
    </adminhtml> 
```

一切正常，但菜单类在我的模块中没有变为活动状态！

```
<li class="parent level0" onmouseout="Element.removeClassName(this,'over')" onmouseover="Element.addClassName(this,'over')">
<a class="" onclick="return false" href="#">
<span>Banners</span>
</a>
<ul>
</li> 
```

感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:15:45.430

我找到了：

```
protected function _initAction() {
    $this -> loadLayout() -> _setActiveMenu(' ') -> _addBreadcrumb(' ', ' ');
    return $this;
} 
```

在 Adminhtml 控制器中使用它！

# java - 解释 Java VM 非标准选项的好资源

> ID：11116412
> 
> 赞同：1
> 
> 时间：2012-06-20T09:19:59.867
> 
> 标签：java, jvm, jvm-hotspot

我想知道是否有任何好的资源（在线或书籍）来解释 Java VM 非标准选项。

通过解释，我的意思不仅仅是说一个选项的作用，而是提供关于何时应该使用它来提高应用程序性能的指南/示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:27:37.813

据我所知，[Java Performance](https://rads.stackoverflow.com/amzn/click/com/0137142528)是最近出版的最全面的一本书（参见第 7 章）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T09:24:22.507

请阅读[这篇](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)文章这是 Oracle 的 VM 规范，也许这对你有帮助。

[Java SE 6 HotSpot[tm] 虚拟机调优](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)

# diff - notepad++ 是否有差异突出显示？

> ID：11116414
> 
> 赞同：3
> 
> 时间：2012-06-20T09:20:02.380
> 
> 标签：diff, notepad++

是否可以在notepad ++中突出显示差异，同时保持java突出显示......或者根本没有？我正在使用的是一个直接的控制台输出ala：

```
-
-                if (model.asMap().get("deanOffice") == null) {
-                    model.addAttribute("deanOffice", deptNames.get(1));
-                }
-            }
+ 
```

当我只有一个控制台输出时，你能推荐另一个让我舒适地查看差异的程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:25:47.667

试试 KDiff3 [http://kdiff3.sourceforge.net/](http://kdiff3.sourceforge.net/)

# ios - AJAX 服务被 Google 屏蔽了？

> ID：11116415
> 
> 赞同：0
> 
> 时间：2012-06-20T09:20:02.500
> 
> 标签：ios

我正在开发一个应用程序，为一组客户在世界地图上创建图钉。我正在使用谷歌位置服务来获取所有客户坐标，您可以在下面看到示例：

```
NSString *locationString = [NSString stringWithFormat:@"%.6f,%.6f"];
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://ajax.googleapis.com/ajax/services/search/local?v=1.0&rsz=8&sll=%@&q=%@", locationString, [cusName stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil]; 
```

然而，我正在使用一个程序为大约 1000 名客户执行此操作，然后我被谷歌阻止了。

然后我意识到这不应该被谷歌允许： [https](https://developers.google.com/errors/) ://developers.google.com/errors/ “我们收到了自动请求，例如抓取和预取。禁止自动请求；所有请求都必须作为结果发出最终用户操作”

在我看来，我被阻止再提出任何请求，即使是对单个客户也是如此。

有谁知道，我应该怎么做才能解除封锁？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:22:58.397

谷歌在您链接的页面下面提到了如何解除封锁。

> 在大多数情况下，确认遵守使用条款并执行上述步骤将在短时间内自动解除封锁。但是，如果您在解决上述问题后的几个小时内仍未恢复对 API 的访问，请使用下面的表格与我们联系，我们将很乐意进一步调查。

如果您在几个小时内没有恢复，页面下方会有一个表格。您可能首先要检查您的应用程序，看看它是否满足 API 列出的所有要求。

Google 建议发送带有用户 IP 地址的 userip 参数，这样它就不太可能显示为自动机器人（您可以使用一些低级网络代码在 Objective C 中获取 IP 地址。请参阅[以编程方式检索 iPhone 的 IP 地址](http://blog.zachwaugh.com/post/309927273/programmatically-retrieving-ip-address-of-iphone)）

# api - 测试 Sinatra REST API 方法

> ID：11116417
> 
> 赞同：0
> 
> 时间：2012-06-20T09:20:08.400
> 
> 标签：api, rest, testing, rspec, sinatra

我想知道测试 REST API 的最佳实践（在这种情况下，使用 Sinatra 和 Rspec）。明显的问题是，如果您有一个检查`GET /users`用户列表的测试，您会希望经历创建用户、运行测试、然后销毁用户的各个阶段。但是，如果创建/销毁步骤也依赖于 API，那么您最终要么打破基于有序的测试规则，要么在一个测试中测试多个事物（例如，它是否添加了一个用户？......确实`GET /users`返回了一个用户列表...是否删除了用户？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:43:03.977

您可以使用 FactoryGirl。在您的测试中，您可以通过 API 创建用户或使用 FG 创建存根，然后删除、修改等。FG 是一个非常灵活的 ORM 测试助手，非常适合这类东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T21:11:28.330

我也同意@three - 使用[FactoryGirl](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md)！

举个例子（首先，定义一个示例对象）：

```
FactoryGirl.define do

   sequence(:random_ranking) do |n|
      @random_rankings ||= (1..10000).to_a.shuffle
      @random_rankings[n]
   end

   factory :todo do
      title { Faker::Lorem.sentence}
      id { FactoryGirl.generate(:random_ranking) }
      completed [true, false].sample
      completed_at Time.new
      created_at Time.new
      updated_at Time.new
   end

end 
```

在您的规范测试中，描述您的列表操作：

```
describe 'GET #index' do

    before do

      @todos = FactoryGirl.create_list(:todo, 10)

      @todos.each do |todo|
        todo.should be_valid
      end

      get :index, :format => :json

    end

    it 'response should be OK' do
      response.status.should eq(200)
    end

    it 'response should return the same json objects list' do

      response_result = JSON.parse(response.body)

      # these should do the same
      # response_result.should =~ JSON.parse(@todos.to_json)
      response_result.should match_array(JSON.parse(@todos.to_json))

    end

end 
```

# jquery - jQuery 循环：每张幻灯片内有更多 scrollHorz 效果

> ID：11116421
> 
> 赞同：1
> 
> 时间：2012-06-20T09:20:17.743
> 
> 标签：jquery, slider, jquery-cycle, jquery-effects

我创建了[scrollHorz 幻灯片](http://jsfiddle.net/kubedan/pHUXB/)，我希望在幻灯片中设置 div 动画。

我想要这个 jquery 伪代码
`$(".item .top").startSlideHorz();`
`$(".item .middle .left").delay(100).startSlideHorz();`
`$(".item .middle .right").delay(200).startSlideHorz();`
`$(".item .bottom").delay(300).startSlideHorz();`

我的灵感来自[http://www.goldmansachs.com](http://www.goldmansachs.com)

我的 HTML：

```
<div class="wrap">
  <div class="slideshow">
    <div class="item">
      <div class="itemInner">
        <div class="top">First top</div>
        <div class="middle">
          <div class="left">First left</div> 
          <div class="right">First right</div>
        </div>
        <div class="bottom">First bottom</div>

      </div>
    </div>
    <div class="item">
      <div class="itemInner">
        <div class="top">Second top</div>
        <div class="middle">
          <div class="left">Second left</div> 
          <div class="right">Second right</div>
        </div>
        <div class="bottom">Second bottom</div>
      </div>
    </div>
    <div class="item"> 
      <div class="itemInner">
        <div class="top">Third top</div>
        <div class="middle">
          <div class="left">Third left</div> 
          <div class="right">Third right</div>
        </div>
        <div class="bottom">Third bottom</div>
      </div>
    </div>
  </div>
</div> 
```

我很感激任何想法谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T13:15:11.643

=) ... [http://jsfiddle.net/4B49x/1](http://jsfiddle.net/4B49x/1)

# arrays - 如何在一个巨大的数字列表中找到 xi=xj 的两个数字？

> ID：11116422
> 
> 赞同：1
> 
> 时间：2012-06-20T09:20:19.990
> 
> 标签：arrays, algorithm, hash

我有以下问题，它向我尖叫着寻求哈希的解决方案：

**问题 ：**

给定一个巨大的数字列表`x1........xn`where `xi <= T`，我们想知道是否存在两个索引`i,j`where `x_i == x_j`。在运行时
找到一个算法，并且该问题的期望值为 。`O(n)``O(n)`

**我目前的解决方案**：我们使用散列，我们将在其中`h(x)`使用`chaining`.

首先 - 我们构建一个新数组，我们称之为它`A`，其中每个单元格都是一个链表 - 这将是目标数组。

现在 - 我们在所有`n`数字上运行，并使用散列函数将 中的每个元素映射`x1........xn`到其应有的位置。这需要`O(n)`运行时间。

之后，我们将继续运行`A`，并寻找碰撞。如果我们会找到一个单元格，`length(A[k]) > 1` 然后我们将返回`xi`和`xj`映射到存储的值`A[k]`- 这里的总运行时间将是`O(n)`最坏的情况，如果两个数字的映射值（如果它们确实存在）在最后的细胞`A`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T09:32:38.950

同样的方法可以快两倍（平均而言），仍然`O(n)`平均 - 但具有更好的常数。

无需将所有元素映射到哈希中然后遍历它 - 更快的解决方案可能是：

```
for each element e:
  if e is in the table:
      return e
  else:
    insert e into the table 
```

另请注意，根据[鸽巢原理](http://en.wikipedia.org/wiki/Pigeonhole_principle)，如果 ，则第一个元素`T < n`内必须存在欺骗。 同样对于小型，您可以使用大小为 T 的简单数组，不需要散列。[初始化 T 可以](http://eli.thegreenplace.net/2008/08/23/initializing-an-array-in-constant-time/)包含零作为初始值。`T+1`
`T``(hash(x) = x)`[`O(1)`](http://eli.thegreenplace.net/2008/08/23/initializing-an-array-in-constant-time/)

# php - Doctrine/Symfony 不会更新所有实体

> ID：11116424
> 
> 赞同：0
> 
> 时间：2012-06-20T09:20:29.130
> 
> 标签：php, symfony1, doctrine-orm

由于某种原因，我的所有实体都不是在数据库中创建的。跑步时`php app\console doctrine:schema:create --dump-sql`。输出显示了一些表的创建，但不是全部。我缺少一个`MeetingGroup`表单 PastonVerBundle

教义配置：

```
# Doctrine Configuration
doctrine:
    dbal:
        driver:   %database_driver%
        host:     %database_host%
        port:     %database_port%
        dbname:   %database_name%
        user:     %database_user%
        password: %database_password%
        charset:  UTF8
        types:
            json: Sonata\Doctrine\Types\JsonType

    orm:
        auto_generate_proxy_classes: %kernel.debug%
        #auto_mapping: true
        entity_managers:
            default:
                mappings:
                    ApplicationSonataUserBundle: ~
                    SonataUserBundle: ~    
                    FOSUserBundle: ~
                    SonataNotificationBundle: ~
                    PastonVerBundle: ~ 
```

输出：

```
CREATE TABLE fos_user_group (
    id INT AUTO_INCREMENT NOT NULL,
    name VARCHAR(255) NOT NULL,
    roles LONGTEXT NOT NULL COMMENT '(DC2Type:array)',
    UNIQUE INDEX UNIQ_58 3D1F3E5E237E06 (name),
    PRIMARY KEY(id)) ENGINE = InnoDB;

CREATE TABLE fos_user_user (
    id INT AUTO_INCREMENT NOT NULL,
    username VARCHAR(255 ) NOT NULL,
    username_canonical VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL,
    email_canonical VARCHAR(255) NOT NULL,
    enabled TINYINT(1) NOT NULL,
    salt VARC HAR(255) NOT NULL,
    password VARCHAR(255) NOT NULL,
    last_login DATETIME DEFAULT NULL,
    locked TINYINT(1) NOT NULL,
    expired TINYINT(1) NOT NULL,
    expires_at DATETIM E DEFAULT NULL,
    confirmation_token VARCHAR(255) DEFAULT NULL,
    password_requested _at DATETIME DEFAULT NULL,
    roles LONGTEXT NOT NULL COMMENT '(DC2Type:array)',
    cr edentials_expired TINYINT(1) NOT NULL,
    credentials_expire_at DATETIME DEFAULT NULL,
    created_at DATETIME NOT NULL,
    updated_at DATETIME NOT NULL,
    date_of_birth DA TETIME DEFAULT NULL,
    firstname VARCHAR(64) DEFAULT NULL,
    lastname VARCHAR(64) DE FAULT NULL,
    website VARCHAR(64) DEFAULT NULL,
    biography VARCHAR(255) DEFAULT NULL,
    gender VARCHAR(1) DEFAULT NULL,
    locale VARCHAR(8) DEFAULT NULL,
    timezone VARC HAR(64) DEFAULT NULL,
    phone VARCHAR(64) DEFAULT NULL,
    facebook_uid VARCHAR(255) DEFAULT NULL,
    facebook_name VARCHAR(255) DEFAULT NULL,
    facebook_data LONGTEXT DE FAULT NULL,
    twitter_uid VARCHAR(255) DEFAULT NULL,
    twitter_name VARCHAR(255) DEFAULT NULL,
    twitter_data LONGTEXT DEFAULT NULL,
    gplus_uid VARCHAR(255) DEFAULT NULL,
    gplus_name VARCHAR(255) DEFAULT NULL,
    gplus_data LONGTEXT DEFAULT NULL,
    toke n VARCHAR(255) DEFAULT NULL,
    two_step_code VARCHAR(255) DEFAULT NULL,
    UNIQUE IND EX UNIQ_C560D76192FC23A8 (username_canonical),
    UNIQUE INDEX UNIQ_C560D761A0D96FB F (email_canonical),
    PRIMARY KEY(id)) ENGINE = InnoDB; 

CREATE TABLE fos_user_user_group (
    user_id INT NOT NULL, group_id INT NOT NULL,
    INDEX IDX_B3C77447A76ED395 (user_id),
    INDEX IDX_B3C77447FE54D947 (group_id),
    PRIMARY KEY(user_id, group_id)) 
    ENGINE = InnoDB; 

CREATE TABLE notification__message (
    id INT AUTO_INCREMENT NOT NULL,
    type VARCHAR (255) NOT NULL,
    body LONGTEXT NOT NULL,
    state INT NOT NULL,
    created_at DATETIME NOT NULL,
    updated_at DATETIME DEFAULT NULL,
    started_at DATETIME DEFAULT NULL,
    co mpleted_at DATETIME DEFAULT NULL,
    INDEX state (state),
    INDEX createdAt (created_ at),
    PRIMARY KEY(id)) ENGINE = InnoDB;

ALTER TABLE fos_user_user_group ADD CONSTRAINT FK_B3C77447A76ED395 FOREIGN KEY ( user_id) REFERENCES fos_user_user(id); 
ALTER TABLE fos_user_user_group ADD CONSTRAINT FK_B3C77447FE54D947 FOREIGN KEY ( group_id) REFERENCES fos_user_group(id) 
```

实体：

```
<?php

namespace Paston\VerBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Paston\VerBundle\Entity\MeetingGroup
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="Paston\VerBundle\Entity\MeetingGroupRepository")
 */
class MeetingGroup
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string $name
     *
     * @ORM\Column(name="name", type="string", length=200)
     */
    private $name;

    /**
     * @var string $pattern
     *
     * @ORM\Column(name="pattern", type="string", length=210)
     */
    private $pattern;

    /**
     * @var datetime $creationDate
     *
     * @ORM\Column(name="creationDate", type="datetime")
     */
    private $creationDate;

    /**
     * @var boolean $deleted
     *
     * @ORM\Column(name="deleted", type="boolean")
     */
    private $deleted;

    /**
     * @var integer $number
     *
     * @ORM\Column(name="number", type="integer")
     */
    private $number;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set name
     *
     * @param string $name
     */
    public function setName($name)
    {
        $this->name = $name;
    }

    /**
     * Get name
     *
     * @return string 
     */
    public function getName()
    {
        return $this->name;
    }

    /**
     * Set pattern
     *
     * @param string $pattern
     */
    public function setPattern($pattern)
    {
        $this->pattern = $pattern;
    }

    /**
     * Get pattern
     *
     * @return string 
     */
    public function getPattern()
    {
        return $this->pattern;
    }

    /**
     * Set creationDate
     *
     * @param datetime $creationDate
     */
    public function setCreationDate($creationDate)
    {
        $this->creationDate = $creationDate;
    }

    /**
     * Get creationDate
     *
     * @return datetime 
     */
    public function getCreationDate()
    {
        return $this->creationDate;
    }

    /**
     * Set deleted
     *
     * @param boolean $deleted
     */
    public function setDeleted($deleted)
    {
        $this->deleted = $deleted;
    }

    /**
     * Get deleted
     *
     * @return boolean 
     */
    public function getDeleted()
    {
        return $this->deleted;
    }

    /**
     * Set number
     *
     * @param integer $number
     */
    public function setNumber($number)
    {
        $this->number = $number;
    }

    /**
     * Get number
     *
     * @return integer 
     */
    public function getNumber()
    {
        return $this->number;
    }
} 
```

`doctrine:mapping:info`也不显示MeetingGroup

```
`
Found 7 entities mapped in entity manager default:
[OK]   Application\Sonata\UserBundle\Entity\Group
[OK]   Application\Sonata\UserBundle\Entity\User
[OK]   Sonata\UserBundle\Entity\BaseGroup
[OK]   Sonata\UserBundle\Entity\BaseUser
[OK]   FOS\UserBundle\Entity\Group
[OK]   FOS\UserBundle\Entity\User
[OK]   Sonata\NotificationBundle\Entity\Message
` 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-25T12:05:35.937

Hat 将类转换为 XML 而不是 Annotation。

# php - Symfony 2：使用理论查询构建器在非相关表上进行 INNER JOIN

> ID：11116428
> 
> 赞同：45
> 
> 时间：2012-06-20T09:20:42.893
> 
> 标签：php, mysql, symfony, doctrine, query-builder

我正在尝试使用教义查询构建器构建一个查询，该查询构建器连接一个不相关的表，如下所示：

```
$query = $this->createQueryBuilder('gpr')
        ->select('gpr, p')
        ->innerJoin('TPost', 'p')
        ->where('gpr.contentId = p.contentId') 
```

但这不起作用。我仍然收到一个错误：

> 错误：连接路径表达式中使用了标识变量 TPost，但之前未定义。

我搜索了此错误消息，每个人都回答使用表别名 + 属性，如 p.someAttribute。但是我要加入的表与我开始选择的表无关。

作为一个普通的mysql查询，我会这样写：

```
SELECT * FROM t_group_publication_rel gpr 
INNER JOIN t_post p 
WHERE gpr.content_id = p.content_id 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-05-28T11:06:20.827

今天我正在处理类似的任务，并记得我打开了这个问题。我不知道它是从哪个学说版本开始工作的，但现在您可以轻松地将子类加入继承映射中。所以像这样的查询没有任何问题：

```
$query = $this->createQueryBuilder('c')
        ->select('c')
        ->leftJoin('MyBundleName:ChildOne', 'co', 'WITH', 'co.id = c.id')
        ->leftJoin('MyBundleName:ChildTwo', 'ct', 'WITH', 'ct.id = c.id')
        ->orderBy('c.createdAt', 'DESC')
        ->where('co.group = :group OR ct.group = :group')
        ->setParameter('group', $group)
        ->setMaxResults(20); 
```

我在使用继承映射的父类中开始查询。在我之前的帖子中，如果我没记错的话，这是一个不同的起点，但同样的问题。

因为当我开始这个问题时这是一个大问题，我认为对于其他不了解它的人来说也可能很有趣。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-09-04T23:09:21.857

在版本 2.4 之前，没有关联的实体之间的连接是不可能的，您可以使用以下语法生成任意连接：

```
$query = $em->createQuery('SELECT u FROM User u JOIN Blacklist b WITH u.email = b.email'); 
```

参考：[http ://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-20T14:56:32.757

```
$dql = "SELECT 
    a, md.fisrtName , md.LastName, mj
    FROM MembersBundle:Memberdata md
        INNER JOIN MembersBundle:Address a WITH md = a.empID
        INNER JOIN MembersBundle:Memberjob mj WITH md = mj.memberData
            ...
    WHERE
        a.dateOfChange IS NULL
    AND WHERE
        md.someField = 'SomeValue'";

return $em->createQuery( $dql )->getResult(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T19:41:12.427

只有在映射中定义了关联时，DQL 连接才有效。[在您的情况下，我会说执行本机查询并使用ResultSetMapping](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/native-sql.html#the-resultsetmapping)填充您的对象要容易得多。

# javascript - 在谷歌地图中控制图像标记大小和阴影的不同方法

> ID：11116435
> 
> 赞同：1
> 
> 时间：2012-06-20T09:21:13.973
> 
> 标签：javascript, jquery, google-maps-api-3

我们目前正在显示可以正常工作的谷歌地图 v3 标记，但我有兴趣了解如何使用相同的构造控制标记大小（并可能添加阴影）。

现有代码如下所示：

```
 var marker28790607x = new google.maps.Marker({
              map: map, 
              pop_title: 'hello',
              position: new google.maps.LatLng(47.9996, -4.5586),
              draggable: false,
              title: 'Hello',
              zIndex: 999,
              icon: 'images/map_icons/s6.png'
            }); 
            google.maps.event.addListener(marker28790607x, 'click', onMarkerClick);
            }); 
```

我需要添加什么来控制标记的大小并添加阴影图像？（我可以看到有一些方法可以使用不同的构造，但这需要重写大量现有代码）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:38:01.537

这是一种方法。您需要为图标和阴影创建和使用[MarkerImage](https://developers.google.com/maps/documentation/javascript/reference#MarkerImage)`setIcon`类，然后在活动期间使用标记和`setShadow`方法将它们与放大版本交换。放大的`MarkerImage`类需要使用该`scaledSize`属性。这会将图像拉伸到您的`MarkerImage` `size` 属性的大小

这是一个实际的小提琴示例：http: [//jsfiddle.net/bryan_weaver/jDgGD/](http://jsfiddle.net/bryan_weaver/jDgGD/)

```
 var beachFlagUrl = "https://developers.google.com/maps/documentation/javascript/examples/images/beachflag.png";
    var beachflagShadowUrl = "https://developers.google.com/maps/documentation/javascript/examples/images/beachflag_shadow.png";

    // Origins, anchor positions and coordinates of the marker
    // increase in the X direction to the right and in
    // the Y direction down.
    var image = new google.maps.MarkerImage(
    beachFlagUrl,
    // This marker is 20 pixels wide by 32 pixels tall.
    new google.maps.Size(20, 32),
    // The origin for this image is 0,0.
    new google.maps.Point(0, 0),
    // The anchor for this image is the base of the flagpole at 0,32.
    new google.maps.Point(0, 32));

    var shadow = new google.maps.MarkerImage(
    beachflagShadowUrl,
    // The shadow image is larger in the horizontal dimension
    // while the position and offset are the same as for the main image.
    new google.maps.Size(37, 32), 
    new google.maps.Point(0, 0), 
    new google.maps.Point(0, 32));

    var marker = new google.maps.Marker({
        position: new google.maps.LatLng(-33.9, 151.2),
        map: map,
        shadow: shadow,
        icon: image,
        title: "Test Marker"
    });

    //double the size of the marker when the mouse is pressed.
    google.maps.event.addListener(marker, 'mousedown', function() {
        //The new Marker Image with the scaled Size
        var newIcon = new google.maps.MarkerImage(
            //marker image url
            this.icon.url, 
            //marker image size
            new google.maps.Size(this.icon.size.width * 2, 
                                 this.icon.size.height * 2), 
            //marker image origin
            this.icon.origin, 
            //marker image anchor
            new google.maps.Point(0, 64), 
            //marker image scaledSize
            new google.maps.Size(this.icon.size.width * 2, 
                                 this.icon.size.height * 2)
        );
        var newShadow = new google.maps.MarkerImage(
            this.shadow.url, 
            new google.maps.Size(this.shadow.size.width * 2,
                                 this.shadow.size.height * 2), 
            this.shadow.origin, 
            new google.maps.Point(0, 64), 
            new google.maps.Size(this.shadow.size.width * 2, 
                                 this.shadow.size.height * 2)
        );

        //set the new properties on the marker.
        this.setIcon(newIcon);
        this.setShadow(newShadow);

    });

    //return marker to original size when mouse is released.
    google.maps.event.addListener(marker, 'mouseup', function() {
        this.setIcon(image);
        this.setShadow(shadow);
    }); 
```

# sql - MS SQL 2008 连接 - 从多个结果中选择一个

> ID：11116438
> 
> 赞同：4
> 
> 时间：2012-06-20T09:21:23.190
> 
> 标签：sql, sql-server-2008, join

我正在尝试运行以下查询，但不确定如何将其限制为仅一个结果。在下面的查询中，clientcontactid 21901 工作的客户端有 2 个地址，这意味着返回 2 个结果。

询问：

```
select  cc.contactpersonid,
    cc.clientcontactid,
    ad.city,
    ad.addressid
from SavedList sl
inner join ClientContacts cc on cc.ContactPersonId = sl.ObjectId
inner join Clients c on c.ClientID = cc.ClientId
inner join Address ad on c.ClientID = ad.ObjectId
where sl.SavedListId = 2117 
```

结果：

```
contactpersonid clientcontactid city    addressid
87934           21901                   145186
87934           21901           London  1130705
89778           17275           Leeds   145368 
```

我需要为客户联系人返回其中一个结果**21901**，优先级是其中包含城市的结果。我试过 select **top (1)**但我认为这归结为强制多条记录返回的连接。任何有关如何仅返回 1 个结果以及如何控制该结果的帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T09:28:45.890

尝试：

```
;WITH a AS (
select  cc.contactpersonid,
    cc.clientcontactid,
    ad.city,
    ad.addressid,
    ROW_NUMBER() OVER (PARTITION BY cc.clientcontactid ORDER BY ad.city DESC) AS RowNum
    from SavedList sl
    inner join ClientContacts cc on cc.ContactPersonId = sl.ObjectId
    inner join Clients c on c.ClientID = cc.ClientId
    inner join Address ad on c.ClientID = ad.ObjectId
    where sl.SavedListId = 2117
)

SELECT  *
FROM    a
WHERE   RowNum = 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T09:26:41.077

我通常对结果进行优先排序的方法是实际分配一个优先值列。在这种情况下，它可以保持简单，因为只有一个优先级：有城市的记录排在没有城市的前面：

```
with q as(
select  cc.contactpersonid,
    cc.clientcontactid,
    ad.city,
    ad.addressid,
    case when ad.city is null then 0 else 1 end prior
from SavedList sl
inner join ClientContacts cc on cc.ContactPersonId = sl.ObjectId
inner join Clients c on c.ClientID = cc.ClientId
inner join Address ad on c.ClientID = ad.ObjectId
where sl.SavedListId = 2117
)
select top 1 * from q order by prior desc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T09:27:08.487

大但有效：

```
select  cc.contactpersonid,
        cc.clientcontactid,
        ad.city,
        ad.addressid
from SavedList sl
inner join ClientContacts cc on cc.ContactPersonId = sl.ObjectId
inner join Clients c on c.ClientID = cc.ClientId
inner join Address ad on c.ClientID = ad.ObjectId
where sl.SavedListId = 2117 and (ad.city is not null or ad.city <> '')
UNION
select  cc.contactpersonid,
        cc.clientcontactid,
        ad.city,
        ad.addressid
from SavedList sl
inner join ClientContacts cc on cc.ContactPersonId = sl.ObjectId
inner join Clients c on c.ClientID = cc.ClientId
inner join Address ad on c.ClientID = ad.ObjectId
where sl.SavedListId = 2117 and (ad.city is null or ad.city = '')
and cc.clientcontactid not in (
  select  cc.clientcontactid
  from SavedList sl
  inner join ClientContacts cc on cc.ContactPersonId = sl.ObjectId
  inner join Clients c on c.ClientID = cc.ClientId
  inner join Address ad on c.ClientID = ad.ObjectId
  where sl.SavedListId = 2117 and (ad.city is not null or ad.city <> '')
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T09:24:33.080

您可以尝试`select top 1 record`通过添加条件 where `city is not NULL`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T09:33:30.647

试试这个：

```
;WITH cte
     AS (SELECT cc.contactpersonid,
                cc.clientcontactid,
                ad.city,
                ad.addressid,
                Row_number() OVER (PARTITION BY cc.clientcontactid ORDER BY CASE WHEN ad.city <> '' THEN 1 ELSE 0 END) rn
         FROM   SavedList sl
                INNER JOIN ClientContacts cc
                  ON cc.ContactPersonId = sl.ObjectId
                INNER JOIN Clients c
                  ON c.ClientID = cc.ClientId
                INNER JOIN Address ad
                  ON c.ClientID = ad.ObjectId
         WHERE  sl.SavedListId = 2117)
SELECT contactpersonid,
       clientcontactid,
       city,
       addressid
FROM   cte
WHERE  rn = 1 
```

# ios - NSString 格式在 UIImage 中没有正确转换

> ID：11116439
> 
> 赞同：0
> 
> 时间：2012-06-20T09:21:23.673
> 
> 标签：ios, nsstring, uiimage

我正在将 NSString 转换为 UIImage，我的字符串是动态的，所以内容会更少或更多。当我在 Log 中看到我的字符串时，它正确显示了字符串格式，但是当它将它转换为 UIImage 时，格式没有保持正确。下面是我的字符串。

新德里

新德里

印度

99XXXXXXXXX

2012-06-20 13:55:11

订单编号：291

项目数：4

1 个汉堡 $5.00

```
Cheese                         $0.10

Modifier Item 1                $2.00

Modifier Item 3                $0.50

Modifier Item 4                $0.60

Amount                         $8.20 
```

1 x 修改器项目 3 $2.00

```
Amount                         $2.00 
```

1 x 修改器项目 4 $2.00

```
Amount                         $2.00 
```

1 x 定制价格 78 $2.70

```
A a a a a a a a a a a a a a a a a a a a a a a a a a a a ma a a a a a a a a a a a a a a a a a. Aa aa a a. A anvhvhvhvb.  Hbghghvhvhmvjhvhjvhjftysfjhv.  

Amount                         $2.70 
```

小计：14.90 美元

税：$1.49

总计：16.39 美元

付款方式：现金

支付金额：16.39 美元

我无法在这里发布图片。请从此字符串创建图像，这样您会发现格式不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:28:56.633

据我所知，您不能将 NSString 对象转换为 UIImageObject。它们代表了非常不同的事物。

据我了解，您想根据您的应用生成的文本生成图像。如果是这样，试试这个[将文本转换为图像](https://stackoverflow.com/questions/1636492/converting-text-to-image)

# c - “动态加载库文件”和“在 Makefile 中指定 .so 路径”之间的区别？

> ID：11116440
> 
> 赞同：2
> 
> 时间：2012-06-20T09:21:27.307
> 
> 标签：c, gcc, shared-libraries, dynamic-loading

我最近遇到了一个代码，它使用 dl_open() 加载 .so 文件并使用 dlsym() 等。我知道 dl_open() 这将加载动态库文件。动态加载库文件和在 Makefile 中指定 .so 路径有什么区别？

另一个问题是，如果我想动态加载一个库文件，我需要用 -rdynamic 选项编译它吗？

这两个不是用`-fPIC`标志编译的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:27:59.147

动态加载库文件经常用于实现软件插件。与在 Makefile 或静态链接中指定 .so 路径不同，动态链接将允许计算机程序在没有这些库的情况下启动，发现可用的库，并可能获得额外的功能。

[关联](http://en.wikipedia.org/wiki/Dynamic_loading)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:20:02.277

如果您在 Makefile 中静态链接 .so 文件，那么除非它存在，否则您将无法构建应用程序。它的优点是在运行时不会出现令人讨厌的意外。

创建共享对象时，假设您正在使用`gcc`，那么`-fpic`仅意味着代码可以在运行时重新定位，您也需要`-shared`。我不知道`-rdynamic`选项，但编译器不同。

在运行时加载模块允许模块加载是可选的。例如，假设您有一个包含 300 个模块的大型应用程序，每个模块代表不同的功能。当用户可能只使用其中的 10% 时，映射所有 300 个是否有意义？（无论如何，代码都是按需加载的）它也可以用于在运行时从不同的库中加载版本，从而提供灵活性。缺点是您最终可能会加载不兼容的版本。

# security - Paypal API 凭证，安全问题

> ID：11116441
> 
> 赞同：1
> 
> 时间：2012-06-20T09:21:32.277
> 
> 标签：security, api, paypal, credentials

考虑多个开发人员在一个项目上合作的情况。在开发服务器上进行测试，然后在准备好后移到网络服务器上的项目。

该项目与 paypal API 对话，因此在开发模式下使用 Sandbox 凭据，在线时使用 LIVE api 凭据。

问题是安全性，因为我希望只有团队负责人才能访问包含实时 API 数据的文件。

到目前为止，我唯一的解决方案是将对网络服务器的 FTP 访问限制为一个人，而这个人是唯一可以访问凭据文件的人。但这可能不是很实用。由于不会与开发服务器同步....

我想这是一种常见的模式，敏感数据必须放在安全的地方，并且只能从 ProjectLeader 和 Live Web 应用程序访问。

我需要一个想法……有什么建议吗？

# vb.net - 查找 VB.Net 数据表的最大值

> ID：11116445
> 
> 赞同：2
> 
> 时间：2012-06-20T09:21:37.860
> 
> 标签：vb.net, datatable, integer, max

我已经被这个难住了。我有一个相当大（~1500 x ~1000）的正整数和负整数数据表，*只是*我从 .csv 文件中获取的。*对于我的程序，我需要找到整个表格*的最大值，而不仅仅是单行或单列。最理想的情况是，代码会短小精悍，但情况并非总是如此；)。

我的 DataTable 的名称是`BeamMap`，我试图返回一个值`MaxValue`（已经声明为整数）。我可以根据要求发布用于创建 DataTable 的代码。

额外的信用：（不是真的）

有没有办法*快速*找到所述最大值的位置（即行、列）？到目前为止，我看到的所有示例都逐个单元格地检查预定值，这对于我拥有的数据点数量来说效率很低。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-06-16T18:19:15.970

您还可以使用 Compute("MAX(columnName),"") 方法来查找列上的最大值

```
Private Function FindMaxDataTableValue(ByRef dt As DataTable) As Integer

    Dim currentValue As Integer, maxValue As Integer
    maxValue = 0

    For c As Integer = 0 To dt.Columns.Count - 1
        currentValue = dt.Compute("MAX(c)", "")
        If currentValue > maxValue Then maxValue = currentValue
    Next
    Return maxValue

End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:22:01.210

这段代码会做到这一点。我没有尝试过使用巨大的数据表，所以你必须看看需要多长时间：

```
Private Function FindMaxDataTableValue(ByRef dt As DataTable) As Integer
    Dim currentValue As Integer, maxValue As Integer
    Dim dv As DataView = dt.DefaultView
    For c As Integer = 0 To dt.Columns.Count - 1
        dv.Sort = dt.Columns(c).ColumnName + " DESC"
        currentValue = CInt(dv(0).Item(c))
        If currentValue > maxValue Then maxValue = currentValue
    Next
    Return maxValue
End Function 
```

它依次对每一列进行排序，如果第一个值大于当前最大值，它会更新它。

为了获得额外的功劳，您可以这样做，但在`IndexOf`查找以下内容时可能会影响性能`rowIndex`：

```
Private Function FindMaxDataTableValue(ByRef dt As DataTable) As Integer
    Dim currentValue As Integer, maxValue As Integer
    Dim rowIndex As Integer, colIndex As Integer
    Dim dv As DataView = dt.DefaultView
    For c As Integer = 0 To dt.Columns.Count - 1
        dv.Sort = dt.Columns(c).ColumnName + " DESC"
        currentValue = CInt(dv(0).Item(c))
        If currentValue > maxValue Then
            rowIndex = dt.Rows.IndexOf(dv(0).Row)
            colIndex = c
            maxValue = currentValue
        End If
    Next
    Debug.WriteLine("Max value found at Col:" + colIndex.ToString + " Row:" + rowIndex.ToString)
    Return maxValue
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-06T13:48:25.900

我无法让 user3549709 的代码正常工作，因为不断收到“聚合参数中的语法错误：需要一个带有可能的 'Child' 限定符的单列参数。” 错误。我所有的表格都是手动填写的，并且没有从数据库中获取数据——我不知道这是否会有所不同。

这是我用来查找最小值和最大值的方法：

```
 Dim intcurrentValue As Integer
    Dim intmaxValue As Integer
    Dim intMinValue As Integer

    intmaxValue = 0
    intMinValue = 0

    For Each colMyColumn As DataColumn In dtDelta_E.Columns
        intcurrentValue = dtDelta_E.Compute("MAX([" & colMyColumn.ColumnName & "])", "")
        If intcurrentValue > intmaxValue Then intmaxValue = intcurrentValue
        intcurrentValue = dtDelta_E.Compute("MIN([" & colMyColumn.ColumnName & "])", "")
        If intcurrentValue < intMinValue Then intMinValue = intcurrentValue
    Next 
```

注意：如果列名中有空格等，则只需要方括号 []

# r - 如何使用 R 将“空格”转换为“%20”

> ID：11116446
> 
> 赞同：6
> 
> 时间：2012-06-20T09:21:50.050
> 
> 标签：r, curl, rcurl

参考标题，我正在考虑如何将单词之间的空格转换为 %20 。

例如，

```
> y <- "I Love You" 
```

怎么做`y = I%20Love%20You`

```
> y
[1] "I%20Love%20You" 
```

非常感谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-20T09:32:18.400

另一种选择是`URLencode()`：

```
y <- "I love you"
URLencode(y)
[1] "I%20love%20you" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-20T09:24:54.323

`gsub()`是一种选择：

```
R> gsub(pattern = " ", replacement = "%20", x = y)
[1] "I%20Love%20You" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-30T20:25:27.190

`curlEscape()`包中的函数`RCurl`完成了工作。

```
library('RCurl')
y <- "I love you"
curlEscape(urls=y)
[1] "I%20love%20you" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-28T16:28:58.840

我喜欢`URLencode()`，但请注意，如果您的 url 已经包含 a 和一个真实空间，有时它不会按预期工作`%20`，在这种情况下，甚至`repeated`选项都不能满足`URLencode()`您的需求。

在我的情况下，我需要同时运行`URLencode()`并`gsub`连续运行以获得我需要的东西，如下所示：

```
a = "already%20encoded%space/a real space.csv"

URLencode(a)
#returns: "encoded%20space/real space.csv"
#note the spaces that are not transformed

URLencode(a, repeated=TRUE)
#returns: "encoded%2520space/real%20space.csv"
#note the %2520 in the first part

gsub(" ", "%20", URLencode(a))
#returns: "encoded%20space/real%20space.csv" 
```

在这个特定的示例中，`gsub()`单独使用就足够了，但`URLencode()`当然不仅仅是替换空格。

# html - IE8 不显示 div 内容

> ID：11116451
> 
> 赞同：0
> 
> 时间：2012-06-20T09:21:59.787
> 
> 标签：html, internet-explorer-8

我有一些内容，由于某种原因，在 IE8 中没有显示（但在 Firefox 中运行良好）。

源代码显示代码已创建，内容框存在且正确，但其中的所有内容（在 中`<div class="inside">`）未显示。该类`.inside`是可见的，如其上方正在填充的框所示。

我已经录制了一个简短的视频，以便可以看到问题。我完全失去了想法，任何建议都得到了认可。谢谢。

[http://screencast-o-matic.com/watch/cl1YQFHO5](http://screencast-o-matic.com/watch/cl1YQFHO5)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:38:47.373

这是我的文本编辑器（Total Edit）损坏文件的问题。将内容复制到新文件并覆盖原始文件解决了该问题。

# ios - CoreData 中的文本并不总是被绘制

> ID：11116461
> 
> 赞同：0
> 
> 时间：2012-06-20T09:22:37.110
> 
> 标签：ios, uitableview, core-data, ios5

我一直在使用 CoreData，但似乎我还没有完全理解它——我的应用程序正在从中加载一些数据`CoreData`并用它填充`UITableView`。一切似乎都很好，只是有时没有绘制文本。其他数据是图像，并且始终绘制。在用户滚动表格之前，不会显示任何文本。

我试图将我的请求设置为不返回错误：

```
[request setReturnsObjectsAsFaults:NO]; 
```

然而，问题仍然存在，尽管它并不常见。

图像是在背景中构建的`NSData`。文本只是设置为 some `UILabel`。也应该以某种方式操纵文本吗？如何？

由于文本在控制台中正确显示，问题可能是 in`UITableView`而不是 in `CoreData`，但我找不到任何原因。

谢谢你的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:26:13.457

根据您的描述，我怀疑这不是核心数据问题。故障在这里不能成为一个因素，因为 Core Data 会往返于持久存储以按需获取属性。

您是使用带有 textLabel 和 detailTextLabel 的标准 UITableViewCells 还是有自定义单元格布局？

难道是你需要设置setNeedsDisplay？我是否正确理解在您的 tableView:cellForRowAtIndexPath: 方法 NSLog 语句中成功显示您的文本？

# opayo - 为什么设置 SagePay 交易需要账单和送货地址字段？

> ID：11116464
> 
> 赞同：2
> 
> 时间：2012-06-20T09:22:45.120
> 
> 标签：opayo

正如标题所说，我对注册服务器集成事务所需的强制值有一些疑问。

**问题**

1.  为什么从协议版本 2.23 开始需要帐单地址字段和交货地址字段？（似乎很奇怪，因为交易是为了支付已经提供/交付的服务）

2.  是否有可用于避免提供这些字段的替代 SagePay 集成方法？

**关于集成需求的快速背景**

我正在为“客户 A”开发网站账单支付网关。他们的客户会收到纸质发票，并且可以选择在线支付账单。客户将输入他们的账单详细信息，并且对“客户 A”提供的网络服务的查找将返回账单和账单总额。

然后，我将允许客户查看他们的账单并选择通过 SagePay 支付账单。当客户选择支付账单时，我打算通过发送字段（VendorTxCode 作为账单 ID）和账单总额来向 SagePay 注册交易。

然后，“客户 A”将生成成功 SagePay 交易的报告，并将（作为账单 ID 的供应商 TxCode）与他们的系统相匹配，以将支付标记为完成。

谢谢亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:31:48.333

我相信您可以使用 SagePay 令牌，但您必须在第一次点击时通过电汇发送此信息，然后您可以使用它提供给您的令牌。

# wcf - 不添加服务代理的 WCF 路由

> ID：11116471
> 
> 赞同：0
> 
> 时间：2012-06-20T09:23:05.733
> 
> 标签：wcf, wcf-client

我的服务启动并运行，最近我试图在中间添加路由器。我的问题是只要我的服务代理在客户端一切正常，但是，我不想将服务代理添加到客户端。有没有办法只添加一个路由器代理并在客户端拥有来自服务的所有方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:31:45.257

您必须使用**WCF 路由服务**来实现这一点。路由服务帮助您将服务与客户端解耦，您不再需要客户端中的服务代理，当然也需要路由服务的代理。

要了解有关路由服务的更多信息，请查看此。

[http://www.prideparrot.com/blog/archive/2011/8/routing_service_and_content_based_routing](http://www.prideparrot.com/blog/archive/2011/8/routing_service_and_content_based_routing)

[http://msdn.microsoft.com/en-us/library/ee517421.aspx](http://msdn.microsoft.com/en-us/library/ee517421.aspx)

# java - eclipse 3.7 属性编辑器？

> ID：11116475
> 
> 赞同：0
> 
> 时间：2012-06-20T09:23:26.623
> 
> 标签：java, eclipse, plugins

我的属性

```
#\u6700\u5927\u8bf7\u6c42\u5b57\u8282\u6570(1*1024*1024)
MAX_REQUEST_BYTES= 1048576
#\u7167\u7247\u5899\u6700\u5927\u641c\u7d22\u7528\u6237\u6570 
MAX_SEARCH_USERS_NUMS= 192 
```

我无法安装之前在 eclipse 中使用的 propedit 来查看和编辑 unicode 字符。

任何其他插件可以做到这一点？

# oracle11g - Oracle查询优化的最佳方式

> ID：11116480
> 
> 赞同：0
> 
> 时间：2012-06-20T09:23:45.013
> 
> 标签：oracle11g

在我的一个项目中，我正在使用 dblink 对 View 进行直接查询，但经过性能检查后发现它的成本很高（很多嵌套循环，高 CPU 使用）。

现在我们找到了一种解决方案，即使用函数在视图中触发这些查询。那么它是正确的解决方案还是有更好的方法来执行此操作。

示例查询和性能报告：

1.  不使用函数：

询问 ：

```
SELECT t1.,
       t2.
FROM   table1 t1
       join table2 t2
         ON t1.id = t2.id
WHERE  t1.bookingId = '0250014547' 
```

业绩报告：

```
SQL> explain plan for SELECT t1., t2\. FROM table1 t1 JOIN table2 t2 ON t1.id = t2.id WHERE t1.bookingId = '0250014547'; 
```

* * *

```
SQL> select * from table(dbms_xplan.display);

-------------------------------------------------------------------------------------------
| Id  | Operation                        | Name                     | Rows  | Bytes | Cost (%CPU)| Time     |
-------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                 |                          |     1 |   331 |     6   (0)| 00:00:01 |
|   1 |  NESTED LOOPS                    |                          |     1 |   331 |     6   (0)| 00:00:01 |
|   2 |   NESTED LOOPS                   |                          |     1 |   299 |     5   (0)| 00:00:01 |
|   3 |    NESTED LOOPS                  |                          |     1 |   210 |     4   (0)| 00:00:01 |
|   4 |     NESTED LOOPS                 |                          |     1 |   185 |     3   (0)| 00:00:01 |
|   5 |      NESTED LOOPS                |                          |     1 |   156 |     2   (0)| 00:00:01 |
|*  6 |       TABLE ACCESS BY INDEX ROWID| GENERAL_ACCT_MAST_TABLE  |     1 |    66 |     1   (0)| 00:00:01 |
|*  7 |        INDEX UNIQUE SCAN         | IDX_GAM_FORACID          |     1 |       |     1   (0)| 00:00:01 |
|   8 |       TABLE ACCESS BY INDEX ROWID| SERVICE_OUTLET_TABLE     |  1694 |   148K|     1   (0)| 00:00:01 |
|*  9 |        INDEX UNIQUE SCAN         | IDX_SERVICE_OUTLET_TABLE |     1 |       |     1   (0)| 00:00:01 |
|  10 |      TABLE ACCESS BY INDEX ROWID | GEN_SCHM_PARM_TABLE      |   356 | 10324 |     1   (0)| 00:00:01 |
|* 11 |       INDEX UNIQUE SCAN          | IDX_GEN_SCHM_PARM_TABLE  |     1 |       |     1   (0)| 00:00:01 |
|* 12 |     TABLE ACCESS BY INDEX ROWID  | ACCT_STATEMENT_TABLE     |    12M|   309M|     1   (0)| 00:00:01 |
|* 13 |      INDEX UNIQUE SCAN           | IDX_ACCT_STATEMENT_TABLE |     1 |       |     1   (0)| 00:00:01 |
|  14 |    TABLE ACCESS BY INDEX ROWID   | CUST_MAST_GEN_TABLE      |    24M|  2119M|     1   (0)| 00:00:01 |
|* 15 |     INDEX UNIQUE SCAN            | IDX_CUST_MAST_GEN_TABLE  |     1 |       |     1   (0)| 00:00:01 |
|  16 |   TABLE ACCESS BY INDEX ROWID    | BRANCH_BIC_TABLE         | 65258 |  2039K|     1   (0)| 00:00:01 |
|* 17 |    INDEX UNIQUE SCAN             | IDX_BRANCH_BIC_TABLE     |     1 |       |     1   (0)| 00:00:01 |
------------------------------------------------------------------------------------------- 
```

1.  使用功能：

询问：

```
SELECT Funquery1('0250014547')
FROM   dual; 
```

业绩报告：

```
SQL> explain plan for select gtt('0252050014577') from dual;

SQL> select * from table(dbms_xplan.display);

-----------------------------------------------------------------
| Id  | Operation        | Name | Rows  | Cost (%CPU)| Time     |
-----------------------------------------------------------------
|   0 | SELECT STATEMENT |      |     1 |     2   (0)| 00:00:01 |
|   1 |  FAST DUAL       |      |     1 |     2   (0)| 00:00:01 |
----------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:14:38.623

第二个查询实际上运行得更快吗？

通常，SQL 优化器不知道函数内部发生了什么，函数内部发生的事情不是查询计划的一部分。这意味着您可以在函数内部隐藏大量复杂性，以使查询计划看起来更高效。然而，这并不意味着查询实际上会运行得更快，使用更少的 CPU，执行更少的 I/O 操作等。如果您在函数中放置完全相同的逻辑，则函数执行的查询将具有与原始查询完全相同的计划。除了几个额外的 PL/SQL 到 SQL 上下文转换的（次要）开销之外，您将获得相同的性能。

表上的统计数据是否准确？查询计划中的基数估计是否合理地接近现实？`t1.bookingId = '0250014547'`谓词的选择性如何？`bookingID`主键是`t1`?

您的问题文本谈到了数据库链接，但您发布的查询和查询计划似乎都没有引用远程数据库中的对象。您的问题文本涉及视图，但您发布的查询未提及任何视图。您发布的查询正在连接两个表，查询计划正在连接 7。这些不一致通常会使提供任何建议变得更加复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:25:44.943

贾斯汀 (+1) 完全正确。EXPLAIN PLAN 向您显示对函数的调用，而不是向您显示函数内部发生的任何事情。

在 SQLPlus 中，使用

```
set autotrace on 
```

这将为您提供语句执行的实际统计信息，包括任何递归 SQL，这未显示在 EXPLAIN PLAN 输出中。

对于更高级的调整，您可以使用 Oracle 跟踪事件 10046。但 SQLPlus“自动跟踪”可能足以满足您的目的。

调整涉及远程数据库上的表/视图的语句（通过 DB_LINK）可能很麻烦，因为您必须调整您提交的语句和发送到远程数据库的语句。

# php - Urlencode 正斜杠 404 错误

> ID：11116482
> 
> 赞同：4
> 
> 时间：2012-06-20T09:23:50.707
> 
> 标签：php

```
http://localhost/foo/profile/%26lt%3Bi%26gt%3Bmarco%26lt%3B%2Fi%26gt%3B 
```

上面的网址给了我一个`404 Error`，网址代码是这样`urlencode(htmlspecialchars($foo));`的：，至于`$foo`：`<i>badhtml</i>`

当没有任何东西可以编码时，该 url 可以正常工作，例如`marco`.

谢谢。=D

更新：我应该在 uri 的编码部分捕获片段，因此不应该出现 404。

那里没有任何文档，`marco`只是我需要从 db 获取该人信息的字符串。如果用户不存在，它无论如何都不会抛出那个丑陋的错误。

**有点想法出了什么问题：**我发现如果我使用`<i>badhtml<i>`它，它工作得很好但`<i>badhtml</i>`不会，我该怎么做才能`/`保持`<i>`？

它可能将请求视为`http://localhost/foo/profile/<i>badhtml<**/**i>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:52:08.780

由于参数中有一个斜杠`/`，这被解释为路径名分隔符。

因此，解决方案是将所有出现的斜杠替换为不会被解释为分隔符的东西。`\u2044`或者其他的东西。并且在重新读取参数时，将所有`\u2044`s 改回正常的斜杠。

（我选择`\u2044`这个字符是因为这个字符看起来非常像一个普通的斜线，但是你可以使用参数中永远不会出现的东西，当然。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:28:12.690

负责处理 URL 重写的正则表达式很可能不喜欢 URL 编码字符串中的某些字符。这很可能是 httpd/apache 问题，而不是 PHP。您最好的猜测是从查看`.htaccess`（包含 URL 重写规则的文件）开始。

此问题假定您正在尝试通过 URL 传递参数，而不是访问名为`<i>badhtml</i>`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-09-04T14:35:40.453

李斯特先生，你震撼了。

“因此，解决方案是用不会被解释为分隔符的东西替换所有出现的斜线。\u2044 或其他东西。当读回参数时，将所有 \u2044 改回正常的斜线。”

# ios - 使用 Titanum 和 xCode 分发 - 这种存档无法签名

> ID：11116490
> 
> 赞同：0
> 
> 时间：2012-06-20T09:24:17.687
> 
> 标签：ios, app-store, titanium, google-play

我已经使用 Titanium Studio 制作了一个应用程序，现在是时候使用 PlayStore 和 AppStore 进行分发了。它已经出现在 PlayStore 上，这很容易 - 但苹果对我来说很难通过。

我为存档创建了一个 iTunes 连接应用程序。

我已经使用 Distribute -> IOS Appstore 归档了该应用程序。

现在，当我按下 xCode 中的验证按钮，使用我的 Apple ID 登录，选择我在 iTunes Connect 上创建的“应用程序”时，它会在身份旁边显示：

`"This kind of archive cannot be signed"`

当我单击下一步时，我收到此错误：

```
"The archive is invalid. You must specify a path to the archive" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T02:23:40.037

转到项目目录中的 iphone 本机项目，使用 XCode 打开它并尝试从那里发布。

# android - Android 中的 OsmAnd

> ID：11116498
> 
> 赞同：1
> 
> 时间：2012-06-20T09:24:40.143
> 
> 标签：android, maps, osmdroid

我正在开发一个使用 OsmAnd 作为地图的项目。我正在通过提供的 wiki 链接进行相关的研发。但我对如何在 android 项目中使用这个库没有一个明确的想法。

我也搜索了教程，但没有运气。任何人都可以通过将我引导到一些教程以进行基本理解或提供在 android 应用程序中使用 OSMANd 的步骤来帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:32:11.053

OsmAnd 是一个独立的应用程序，它不打算用作库。

这是给开发人员的建议，以允许这样做和他们的答案。[https://groups.google.com/forum/?fromgroups#!topic/osmand/7q83Mrc449Y](https://groups.google.com/forum/?fromgroups#!topic/osmand/7q83Mrc449Y)

# java - JTable 未从 .txtfile 填充

> ID：11116499
> 
> 赞同：0
> 
> 时间：2012-06-20T09:24:44.363
> 
> 标签：java, swing, user-interface, file-io, jtable

我有一个包含以下数据的 .txt 文件（注意：文件中的数据会定期更新，所以我不知道确切的行数）。我的 Java 应用程序在 JTable 中显示这些数据。这是我的txt文件：

```
root         1     0  0 09:49 ?        00:00:00 init [5]  
root         2     0  0 09:49 ?        00:00:00 [kthreadd]
root         3     2  0 09:49 ?        00:00:00 [ksoftirqd/0]
root         4     2  0 09:49 ?        00:00:00 [kworker/0:0]
root         6     2  0 09:49 ?        00:00:00 [migration/0]
root         7     2  0 09:49 ?        00:00:00 [watchdog/0] 
```

我为它编码的是：

```
import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Map;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.event.TableModelListener;
import javax.swing.table.TableModel;
public class Reader {

    public Reader(){
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel();
        BufferedReader reader;
        try {
            reader = new BufferedReader(new InputStreamReader(new FileInputStream("ProcessList.txt")));
            Map<String, Object[]> result = new LinkedHashMap<String, Object[]>();
            while(reader.ready()){
                String line = reader.readLine();
                String[] values = line.split("\\s+");
                String key = values [0] +"&"+values[4] +"&"+values[5]+"&"+values[6]+"&"+values[7];
                String uid = values [0];

                String strtime = values [4];
                String tty = values [5];
                String etime = values [6];
                String command =  values [7];
                Integer pid = 0;
                Integer pri = 0;
                Integer uti = 0;
                if (result.containsKey(key)) {
                    pid = (Integer) ((Object[]) result.get(key))[1];
                    pri = (Integer) ((Object[]) result.get(key))[2];
                    uti = (Integer) ((Object[]) result.get(key))[3];
                }
                else {}
                result.put(key, new Object[]{uid,pid,pri,uti,strtime,tty,etime,command});
            }
            ArrayList arrayList = new ArrayList(result.values());
            JTable table = new JTable(new PTablemodel(arrayList));
            panel.add(new JScrollPane(table));
            reader.close();
            frame.setContentPane(panel);
            frame.setVisible(true);
            frame.pack();
        }
        catch (FileNotFoundException e) {
            e.printStackTrace();        
        }
        catch(IOException e) {
            e.printStackTrace();
        }

    }
    public static void main (String [] args){
        new Reader();
    }
    public class PTablemodel implements TableModel{

        final Class[] ColumnClass = new Class[]{String.class, Integer.class, Integer.class,Integer.class, String.class, String.class,String.class, String.class};

        final String[] columnname = new String[]{"User","PID","Priority","Utilization","TTY","StartTime","EndTime","Command"};
        List values = null;
        public PTablemodel (List values){
            this.values = values;
        }
        @Override
        public void addTableModelListener(TableModelListener l) {
        }

        @Override
        public Class<?> getColumnClass(int columnIndex) {
            return ColumnClass[columnIndex];
        }

        @Override
        public int getColumnCount() {
            return ColumnClass.length;
        }

        @Override
        public String getColumnName(int columnIndex) {
            return columnname[columnIndex];
        }

        @Override
        public int getRowCount() {
            return values.size();
        } 

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            return ((Object[]) values.get(rowIndex))[columnIndex];
        }

        @Override
        public boolean isCellEditable(int rowIndex, int columnIndex) {
            return false;
        }

        @Override
        public void removeTableModelListener(TableModelListener l) {
        }

        @Override
        public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
        }
    }
} 
```

我得到的实际上不是错误，而是捕获了异常。任何人都可以指导我吗？我使用“&”作为分词器。

注意：这是编译器所说的：

```
 Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 4
at Reader.<init>(Reader.java:30)
at Reader.main(Reader.java:65) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:46:53.337

You are getting a `NullPointerException` in your `while-loop` that reads the input. You should test that `reader.readLine()` does not return `null`. If it does, it means you have reached the end of the input.

You could do something like this:

```
while((String line = reader.readLine())!=null) {
     ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T09:42:19.967

此代码是基于您的 SSCCE，表明它是文件读取代码中的内容。

![读者](../Images/6917867d60240c1aa00e3e5f9ca95128.png)

### 输出

```
File - exists: true I:\projects\eclipse\Test\ProcessList.txt
Frame is visible
File - exists: false I:\projects\eclipse\Test\ProcessList1.txt
java.io.FileNotFoundException: ProcessList1.txt (The system cannot find the file specified)
     ... 
```

### 代码

```
package test.t100.t001;

import java.io.*;
import java.util.*;

import javax.swing.*;
import javax.swing.event.TableModelListener;
import javax.swing.table.TableModel;
public class Reader {

    static String name = "ProcessList";

    public Reader(String name){
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel();
        BufferedReader reader;
        try {
            File f = new File(name);
            System.out.println("File - exists: " + f.exists() + " " + f.getAbsolutePath());
            reader = new BufferedReader(
                    new InputStreamReader(
                            new FileInputStream(f)));
            Map<String, Object[]> result = new LinkedHashMap<String, Object[]>();
            while(reader.ready()){
                String line = reader.readLine();
                String[] values = line.split("\\s+");
                String key = values [0] +"&"+values[4] +"&"+values[5]+"&"+values[6]+"&"+values[7];
                String uid = values [0];

                String strtime = values [4];
                String tty = values [5];
                String etime = values [6];
                String command =  values [7];
                Integer pid = 0;
                Integer pri = 0;
                Integer uti = 0;
                if (result.containsKey(key)) {
                    pid = (Integer) ((Object[]) result.get(key))[1];
                    pri = (Integer) ((Object[]) result.get(key))[2];
                    uti = (Integer) ((Object[]) result.get(key))[3];
                }
                else {}
                result.put(key, new Object[]{uid,pid,pri,uti,strtime,tty,etime,command});
            }
            ArrayList arrayList = new ArrayList(result.values());
            JTable table = new JTable(new PTablemodel(arrayList));
            panel.add(new JScrollPane(table));
            reader.close();
            frame.setContentPane(panel);
            frame.setVisible(true);
            frame.pack();
            System.out.println("Frame is visible");
        }
        catch (FileNotFoundException e) {
            e.printStackTrace();        
        }
        catch(IOException e) {
            e.printStackTrace();
        }

    }
    public static void main (String [] args) throws IOException{
        String s = 
                "root         1     0  0 09:49 ?        00:00:00 init [5]\n" +  
                "root         2     0  0 09:49 ?        00:00:00 [kthreadd]\n" +
                "root         3     2  0 09:49 ?        00:00:00 [ksoftirqd/0]\n" +
                "root         4     2  0 09:49 ?        00:00:00 [kworker/0:0]\n" +
                "root         6     2  0 09:49 ?        00:00:00 [migration/0]\n" +
                "root         7     2  0 09:49 ?        00:00:00 [watchdog/0]\n";
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        FileOutputStream fos = new FileOutputStream(name + ".txt");
        fos.write(s.getBytes());
        new Reader(name + ".txt");
        new Reader(name + "1.txt");
    }
    public class PTablemodel implements TableModel{

        final Class[] ColumnClass = new Class[]{String.class, Integer.class, Integer.class,Integer.class, String.class, String.class,String.class, String.class};

        final String[] columnname = new String[]{"User","PID","Priority","Utilization","TTY","StartTime","EndTime","Command"};
        List values = null;
        public PTablemodel (List values){
            this.values = values;
        }
        @Override
        public void addTableModelListener(TableModelListener l) {
        }

        @Override
        public Class<?> getColumnClass(int columnIndex) {
            return ColumnClass[columnIndex];
        }

        @Override
        public int getColumnCount() {
            return ColumnClass.length;
        }

        @Override
        public String getColumnName(int columnIndex) {
            return columnname[columnIndex];
        }

        @Override
        public int getRowCount() {
            return values.size();
        } 

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            return ((Object[]) values.get(rowIndex))[columnIndex];
        }

        @Override
        public boolean isCellEditable(int rowIndex, int columnIndex) {
            return false;
        }

        @Override
        public void removeTableModelListener(TableModelListener l) {
        }

        @Override
        public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:23:05.423

如果您收到 FileNotFoundException - 请确保将 ProcessList.txt 文件保留在项目根目录中。

![在此处输入图像描述](../Images/11bb1ea7cf50f6ea4063328488d07f8a.png)

如果您从命令提示符编译和运行它们，请确保 ProcessList.txt 文件位于 .class 文件所在的相同位置。

![在此处输入图像描述](../Images/d5ac7f710c3eed10f501b60b2cd4116f.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T18:06:05.017

这个页面似乎已经改变了很多。按照我写这篇文章时的样子，你在第 30 行有一个错误的数组索引。具体来说，你正试图获取数组的元素 4 `value`，而且奇怪的是，它没有元素。我*不是*正则表达式专家，但可能是您在`line.split("\\s+")`. 如果这是正确的，那么您正在读取的数据有问题。您可以从打印输出`line`（或在调试器中检查）开始，或者只是处理实际情况。可能只是输入中有一个或多个空白或空行，当*您*查看文件时看不到这些行，但`readLine()`不幸的是，确实如此。

（我经常自己写`readLine`，这样我就可以去掉不可打印的字符和多个换行符等等——所以我不会对任何写文件的人或他们用来写文件的软件的仁慈。但在这里你甚至可能想要忽略像“aaa”这样的行，它会通过我强迫性的 readLine。）

# javascript - 删除字符串中某个位置的字符 - javascript

> ID：11116501
> 
> 赞同：79
> 
> 时间：2012-06-20T09:24:54.203
> 
> 标签：javascript, string

有没有一种简单的方法可以删除javascript中某个位置的字符？

例如，如果我有字符串`"Hello World"`，我可以删除位置 3 的字符吗？

我要寻找的结果如下：

```
"Helo World" 
```

这个问题不是[如何使用 JavaScript 从字符串中删除字符？](https://stackoverflow.com/questions/9932957)，因为这个问题是关于删除特定位置的字符，而这个问题是关于删除字符的所有实例。

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-06-20T09:26:49.213

这取决于您找到以下内容的*难易*[`slice()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/slice)程度，这些内容使用简单的 String 方法（在本例中）。

```
var str = "Hello World";
str = str.slice(0, 3) + str.slice(4);
console.log(str)
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-20T09:33:11.860

你可以这样试试！！

```
var str ="Hello World";
var position = 6;//its 1 based
var newStr = str.substring(0,position - 1) + str.substring(postion, str.length);
alert(newStr); 
```

这是现场示例：http: [//jsbin.com/ogagaq](http://jsbin.com/ogagaq)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-04-10T11:37:40.960

将字符串转为数组，在指定索引处剪切一个字符并转回字符串

```
let str = 'Hello World'.split('')

str.splice(3, 1)
str = str.join('')

// str = 'Helo World'. 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-05-03T12:57:54.263

如果您省略特定的索引字符，则使用此方法

```
function removeByIndex(str,index) {
      return str.slice(0,index) + str.slice(index+1);
}

var str = "Hello world", index=3;
console.log(removeByIndex(str,index));

// Output: "Helo world" 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-20T09:32:32.500

```
 var str = 'Hello World';
                str = setCharAt(str, 3, '');
                alert(str);

function setCharAt(str, index, chr)
        {
            if (index > str.length - 1) return str;
            return str.substr(0, index) + chr + str.substr(index + 1);
        } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-20T09:46:10.293

你可以使用`substring()`方法。前任，

```
var x = "Hello world"
var x = x.substring(0, i) + 'h' + x.substring(i+1); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-04T10:52:58.570

嗨starbeamrainbowlabs，

您可以使用以下方法执行此操作：

```
var oldValue = "pic quality, hello" ;
var newValue =  "hello";
var oldValueLength = oldValue.length ;
var newValueLength = newValue.length ;
var from = oldValue.search(newValue) ;
var to = from + newValueLength ;
var nes = oldValue.substr(0,from) + oldValue.substr(to,oldValueLength);
console.log(nes); 
```

我在我的 javascript 控制台中对此进行了测试，因此您也可以查看一下 谢谢

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-06-20T09:33:43.447

```
var str = 'Hello World',
    i = 3,
    result = str.substr(0, i-1)+str.substring(i);

alert(result); 
```

的值`i`不应该小于那么`1`。

# spring - 在 JSF Bean 中注入客户端代理

> ID：11116503
> 
> 赞同：0
> 
> 时间：2012-06-20T09:25:04.917
> 
> 标签：spring, jsf, jax-ws

在我的项目中，Web 服务是使用 JAX WS - RI 实现的。

我想从 JSF 托管 bean 中调用 Web 服务方法。

我的意思是说我需要在托管 bean 中注入客户端代理。

对于 CXF，我读过我们可以在 spring 应用程序上下文 xml 中使用 jaxws:client 标记。

但对于 JAXWS RI，我不知道。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:03:43.837

为此，您需要在 Spring XML 配置文件的顶部包含以下序言

```
xsi:schemaLocation="http://jax-ws.java.net/spring/servlet
http://jax-ws.java.net/spring/servlet.xsd" 
```

并使用 WebServiceServlet(WSS) 标签。

更多信息：[链接](http://jax-ws-commons.java.net/spring/)

# android - 嵌套视图未呈现

> ID：11116504
> 
> 赞同：2
> 
> 时间：2012-06-20T09:25:09.103
> 
> 标签：android, view, nested

如果这个问题不合适，或者在错误的部分中，这个网站的新手非常抱歉。

安卓：

我编写了一个自定义按钮类，它扩展了 View 并且工作得很好。现在我想创建一个数字键盘类，它使用以特定方式排列的几个自定义按钮，然后我可以在电话拨号器应用程序中使用它们。我可以从应用程序的主要活动中构建键盘，看起来还可以，但我想在它自己的类中构建这个键盘以便于重用。当我将代码移动到它自己的类中时，我会得到错误或屏幕上什么也没有。我认为问题的一部分是子视图被添加到哪个类。

这是我在主要活动中的代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    LinearLayout layout = new LinearLayout(this);
    layout.setOrientation(1);
    LcarsButton numericPad[] = new LcarsButton[10]; //array of buttons

    LinearLayout rows[] = new LinearLayout[3];

    for(int i=0;i<=2;i++)
    {
        rows[i] = new LinearLayout(this);
        for(int j=1;j<=3;j++)
        {
            int k = (i * 3) + j;
            numericPad[k] = new LcarsButton(this);
            numericPad[k].label = "" + k;
            rows[i].addView(numericPad[k]); 
        }
        layout.addView(rows[i]);
    } 
```

它循环遍历数组 numericPad，将 3 个按钮分配给每个“行”，然后将 3 个“行”分配给“布局”。这工作正常。这是在类构造函数中看到的代码：

```
 public class LcarsNumPad extends LinearLayout {

    public LcarsNumPad(Context context) {
    super(context);
    this.setOrientation(VERTICAL);

    LinearLayout layout = new LinearLayout(context);
    LcarsButton numericPad[] = new LcarsButton[10];

    layout.setOrientation(1);
    LinearLayout rows[] = new LinearLayout[3];

    for(int i=0;i<=2;i++)
    {
        rows[i] = new LinearLayout(context);
        for(int j=1;j<=3;j++)
        {
            int k = (i * 3) + j;
            numericPad[k] = new LcarsButton(context);
            numericPad[k].label = "" + k;
            rows[i].addView(numericPad[k]); 
        }
        layout.addView(rows[i]);
    } 
```

如您所见，代码中的唯一区别是适应每个特定代码段的上下文。谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:36:27.277

我猜错误的原因是您使用`layout`的是在`onCreate()`. 您需要将`rows`数组传递给主要活动，然后您可以从那里将其添加到布局中。

# c# - 如何从 Windows Phone 7 调用 Java Servlet

> ID：11116505
> 
> 赞同：0
> 
> 时间：2012-06-20T09:25:12.047
> 
> 标签：c#, json, windows-phone-7, servlets

我已经搜索了很长一段时间，对于如何从 windows phone 7 API 调用 java servlet 无法得到任何直接的答案？我已经阅读了有关“WebClient”和“HttpWebRequest”的信息，但是对于普通的 C# 和 windows phone，实现似乎有所不同。

我拥有的方法（或者更确切地说是空壳）如下所示：

```
public Login(string userName, password){

   string servletUrl = "http://172.12.5.35:8080/SomeService/login?u="+userName+"&p="+password;

   //Somehow to call the servlet>>

} 
```

我是一名 Java 编码员，虽然语法几乎相同，但我已经陷入了为 windows phone 编码的深层次。

还可能值得一提的是 servlet 返回 JSON。在 C# 中如何处理？

在此先感谢您朝着正确的方向前进！

* * *

我使用 HttpWebRequest 的尝试：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(servletUrl);
HttpWebResponse response = (HttpWebRequest)request.BeginGetResponse(); 
```

但我看到“BeginGetResponse()”需要 2 个参数，即 AsyncCallback 和对象状态。这两个论点是什么，在这种情况下我的论点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:30:12.847

> 我已经阅读了有关“WebClient”和“HttpWebRequest”的信息，但是对于普通的 C# 和 windows phone，实现似乎有所不同。

好吧，它不支持同步 API，仅此而已。WP7 API（和一般的 Silverlight）有很多方面是完整桌面框架的子集。您需要异步思考 - 您将*开始*发出请求，并在收到响应时触发回调。

请注意，这与您正在与之交谈的 Web 服务器的实现无关。无论您是在与 Java servlet、Rails 应用程序还是其他任何东西对话，您都将编写相同的代码。

> 还可能值得一提的是 servlet 返回 JSON。在 C# 中如何处理？

我个人喜欢[Json.NET](http://json.codeplex.com)，并在 Windows Phone 7 上成功使用了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:39:46.210

这是发出 Web 请求以获取 JSON 数据的示例代码

```
WebClient client = new WebClient();
client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);
client.DownloadStringAsync(new Uri("http://api.twitter.com/1/statuses/public_timeline.json", UriKind.Absolute)); 
```

DownloadStringCompleted 处理程序是，

```
void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    var jsonResponse= e.Result; // To check whether the json response is obtained or not
    var jsonData = JsonConvert.DeserializeObject<SomeObject>(e.Result);
} 
```

在上面的代码中，`SomeObject`是您要将 JSON 数据转换为的类。

[此外，在此链接](http://json2csharp.com/)中粘贴您的 json URL 或 json 数据以生成适合您的类。

# android - Android 应用内结算 - 仅接收一次 IN_APP_NOTIFY

> ID：11116506
> 
> 赞同：3
> 
> 时间：2012-06-20T09:25:14.183
> 
> 标签：android, in-app-billing, notify

在[In-App Billing Overview](http://developer.android.com/guide/market/billing/billing_overview.html "应用内结算概览")中，说明应用程序应发送 CONFIRM_NOTIFICATIONS 消息以确认购买，如果没有此消息，Google Play 将重复发送 IN_APP_NOTIFY 消息。但是，我碰巧只收到一次。

但是当我进行新购买时，我还会收到其他待处理购买的通知（我每次购买有 3 个 IN_APP_NOTIFY，其中 2 个似乎是针对以前的产品）。这意味着我的购买没有得到确认，因此它按预期工作。但是，为什么我没有定期收到 IN_APP_NOTIFY 消息？有什么特别的事情要做吗？

提前致谢！

# java - JDBC SQL Server：插入后不出现行

> ID：11116507
> 
> 赞同：0
> 
> 时间：2012-06-20T09:25:16.243
> 
> 标签：java, sql-server, jdbc, insert

我正在尝试使用 JDBC 驱动程序在 SQL Server 上插入行。

该查询适用于 SQL Server，我可以看到该行。

但是，在我的代码中，我没有收到任何错误，但没有出现该行。

更奇怪的是，我的自动增量字段增加了，即假设我的自动增量字段的值为 3，我运行我的代码，什么也没有出现。我在 SQLServer 上运行查询，新行的值为 5。

```
 String query = "insert into SSSI_ADMIN.NBSIUSER(UserName,UserDomain) values('test4','domain4')";
    Statement stmnt = null;

    String driver = "com.microsoft.sqlserver.jdbc.SQLServerDriver";
    try {
        Class.forName(driver);
        String url = "jdbc:sqlserver://dt112654:1433;databaseName=SIBD;user=u;password=*****";
        Connection conn = DriverManager.getConnection(url);

        conn.setAutoCommit(false);
        stmnt = conn.createStatement();

        stmnt.execute(query);
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } finally {
        if ( stmnt != null)
        {
            stmnt.close();
        }
    } 
```

问候，努诺。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T09:27:50.930

你没有提交你的改变。

你必须打电话`conn.commit()`后`stmnt.execute(query);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:32:32.733

因为这是代码“conn.setAutoCommit(false);”；一种方法是“conn.setAutoCommit(true)”或删除此代码“conn.setAutoCommit”；另一种方法是在执行查询后添加另一个代码“conn.commit()”。

# parsing - 哪个解析器最适合 [生物医学] 关系提取？

> ID：11116508
> 
> 赞同：4
> 
> 时间：2012-06-20T09:25:19.067
> 
> 标签：parsing, nlp, information-extraction

我已阅读有关连续性解析器和依赖解析器的信息。但困惑这可能是最好的选择。

我的任务是从英文维基百科文本中提取关系（以后也可能包括其他来源）。我需要的是两个有趣的实体之间的语义路径（只有最重要的信息）。例如，

格式文本： ***“在美国，众所周知，糖尿病是一种常见病。”***

*我需要信息： **“糖尿病就是疾病”***

你会建议哪种解析器实现？斯坦福？麦芽解析器？或其他？

任何线索表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T17:14:31.130

您的意思是语法解析器与依赖解析器？[在线斯坦福解析器](http://nlp.stanford.edu:8080/parser/)向您展示了这些解析的不同之处。

句法分析

```
(ROOT
  (S
    (PP (IN In)
      (NP (NNP America)))
    (, ,)
    (NP (NNP diabetes))
    (VP (VBZ is) (, ,)
      (PP (IN as)
        (NP (NN everybody) (NNS knows)))
      (, ,)
      (NP (DT a) (JJ common) (NN disease))))) 
```

依赖解析（折叠）

```
prep_in(disease-13, America-2)
nsubj(disease-13, diabetes-4)
cop(disease-13, is-5)
nn(knows-9, everybody-8)
prep_as(disease-13, knows-9)
det(disease-13, a-11)
amod(disease-13, common-12)
root(ROOT-0, disease-13) 
```

它们实际上并没有那么不同（有关更多详细信息，请参见 Collins 的论文或 Nieve 的书），但我发现依赖解析更易于使用。如您所见，您与糖尿病 -> 疾病有直接关系。然后你可以连接系词。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T23:59:23.053

当然，像斯坦福依赖解析器这样的依赖解析器将是您的正确选择。我建议使用[BLLIP reranking parser](https://github.com/BLLIP/bllip-parser)和[David McClosky 的生物医学模型](http://nlp.stanford.edu/~mcclosky/biomedical.html)来获取短语结构，然后使用[Stanford Dependencies](http://nlp.stanford.edu/software/stanford-dependencies.shtml)转换为依赖项。这样，您将获得更好的生物医学文本依赖树/图。

# c++ - 无法在 C++ 映射容器中输入正确的元素

> ID：11116511
> 
> 赞同：0
> 
> 时间：2012-06-20T09:25:34.050
> 
> 标签：c++, map

我有代码：

```
string key = "", value = "", type = "";
while(in)
{
    getline(in, key, '=');
    getline(in, value, '\n');
    getline(in, type, '\n');
    in.get(); // get the dividing empty line
    CommonParamValue *paramValue = CreateParamValue(type);
    paramValue->SetValue(value);
    params.insert(make_pair(key, *paramValue)); // PROBLEM
    delete paramValue;
} 
```

当我打电话时，`params.insert(make_pair(key, *paramValue));`我得到一个具有正确键端 EMPTY 值的地图元素。当我检查

```
paramsIter = params.find(paramKey);
    if (paramsIter != params.end())
    {
        if( ("" == paramsIter->second.GetValue())
        ...
    } 
```

所有的时间条件`"" == paramsIter->second.GetValue()`都是真实的，但它一定不是这样的！附加信息：

```
class CommonParamValue
{
public:
    virtual void SetValue(string value){}
    virtual string GetValue(){ return ""; }
};
class StringParamValue : public CommonParamValue
{
    string str;
public:
    StringParamValue(){}
    virtual void SetValue(string value){str = value;}
    virtual string GetValue() {return str;}
};
CommonParamValue* Report::CreateParamValue(const string &strType) const
{
    if (strType == "int")
    {
        return (new IntParamValue());
    }
    else if(strType == "string")
    {
        return (new StringParamValue());
    }
    else
    {
        // error
        exit(1);
    }
} 
```

问题是为什么当我这样做时，`params.insert(make_pair(key, *paramValue));`我总是得到一个具有正确键和 EMPTY 值的元素？怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T09:29:36.947

我怀疑`map`被声明为：

```
std::map<std::string, CommonParamValue> params; 
```

插入将导致将值切片到`CommonParamValue`始终返回 a `""`from的 a `GetValue()`。为了获得所需的行为， 中的值`map`需要是指向 a 的指针`CommonParamValue`，最好是智能指针：

```
std::map<std::string, std::shared_ptr<CommonParamValue> > params; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:45:34.307

插入到地图中的对象`CommonParamValue`不是 a `StringParamValue`，这意味着插入到地图中的对象的副本会被*切片*`CommonParamValue`。

更改地图定义以映射（智能）指针或引用。

# java - 使用 jsp/taglibs 与模板引擎

> ID：11116514
> 
> 赞同：0
> 
> 时间：2012-06-20T09:25:44.157
> 
> 标签：java, php, templates, web

我做过一些 php 开发，这种语言的大趋势是使用 smarty 或其他模板引擎之类的东西。

它通常大致运行如下：

将模板加载为常规字符串，查找其 {tags} 将每个 {tag} 替换为某些代码的结果。带有输入参数的缓存页面呈现结果页面。（有时会添加一些OO原则比如模板变成对象……）

当我查看 jsp 时，我看到了 scriplets、taglibs 的使用以及复杂的东西，比如

```
<%@ taglib uri="/tags/struts-logic" prefix="logic" %>
<%@ page import="ghhghjjgj"%> 
```

然后 ：

```
<logic:if>some html </logic:if> 
```

或更糟：

```
<%= if (blabal) {%>
some html
<%}else ...%> 
```

等等。

好的，tile 使我能够将一些 jsp 页面粘合在一起，这非常方便（就像 php 中的包含一样）

在我看来，php 方法在以下方面要好得多：

*   它完全分离了 gui 和模型处理。
    - 当你在后面工作时更容易更改页面内容，你在一个真正的 java 类中，没有像 % @ <%= 这样复杂的东西。（谁说 ala C# 背后的代码；）？）

C# 方法也很有趣，但我只想解决我的问题中的模板部分，而不是开始任何 C# 与 Java 巨魔大战。我也不想说php更好。

我只是想知道为什么 java 中没有安装好的模板引擎以及为什么我们仍然使用 scriplets/taglibs。

所以我想我一定错过了什么。一些 Java EE Web 专家能否向我展示我推理的缺陷？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T09:30:14.560

J2EE 很久以前就变成了 Java EE。去掉“2”。

没有人应该使用scriptlet。这是1999年的技术。如果你在书中看到它，那是因为这些书很旧。现在写另一本 servlet/JSP 书的理由并不多。

*自定义*标签库已经失宠。JSTL 是标准。您不太可能需要更多。

模板很常见 - 看看[Velocity](http://velocity.apache.org/)。我正在处理的一个项目专门使用它来将 HTML 流式传输到浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:30:47.243

Java 有很多模板引擎，例如 Velocity。JSP 编译为 Java 字节码。它允许非常快速的执行。这个因素对您是否重要，取决于您的任务，因为大多数网站模板处理都不是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T13:18:49.033

我真的不明白为什么写作很棒的含义

```
{if blabal} some html{/if} 
```

而且不太好写

```
<logic:if test="blabal"> some html</logic:if> 
```

而且写起来更糟糕

```
<% if (blabal) { %> some html <% } %> 
```

但写起来很好

```
#if ( blabal )
    some html
#end 
```

我个人喜欢用java编写我的逻辑。

*   输入保存
*   我知道语法

然而，对我来说，混合模板代码和逻辑是好事还是坏事都不是语法问题。因此我更喜欢[Snippetory](http://www.jproggy.org/snippetory)。我从模板中获取逻辑，同时保持模板中的一致性（[转义](http://www.jproggy.org/snippetory/Encodings.html)内容等）、外观（[格式](http://www.jproggy.org/snippetory/Formats.html)...）和[国际化](http://www.jproggy.org/snippetory/ExtensionExample.html)的责任。绑定逻辑变得可测试，易于组织和重用。数据模型可以按原样使用，无需将其转换为足以用于某种外星技术的模型。在这种情况下，模板更像是一种模型，您可以将必要的数据复制到其中，而不是从上下文中自助服务的过程。

现在，在这种情况下，我们需要用软件来表达同样的事情，因为它总是会发生，因为人们使用[关注点分离](http://snippetory.wordpress.com/separation-of-concerns/)的原则来使软件更易于维护。

模板：

```
<t:named-region> some html with a {v:value} </t:named-region> 
```

逻辑：

```
if (blabal) {
  template.get("named-region").set("value", value).render();
} 
```

现在，当我们看这个时，它的代码要多得多。同样，这对于关注点分离来说是典型的。但是，快速浏览一下这些步骤可能是有意义的：

1.  获得该地区的访问权。
2.  数据绑定到模板。这发生在细粒度上，就像填写 from 一样。
3.  完成的表单绑定到输出。

最后一步似乎是可以分配的。我向它填充数据，所以很明显我想使用它。但是你要知道，`render()`是一条捷径`render(template, "named-region")`。所以这是一个描述它是**如何**使用的。由于这种机制，您可以轻松地将一个文件甚至多个文件的构建块组合到您选择的输出中。这导致这些块的重复使用非常方便。

它让我更加专注：当我努力获得正确的 html、css 和 javaScript 时，我不必处理“访问数据的确切路径如何？” 或“显示此按钮的确切情况是什么？”。它只是关于'有逻辑，所以它有一个名字'。很简单，很干净。

当然还有一些其他引擎支持模板和逻辑的分离，比如 jByte（我用了一段时间）或 JTPL 只是为了命名一个视图。但是，它们似乎都缺少一些功能，我决定编写 Snippetory。

# html - 在 Opera 12 上运行 Web 套接字服务器

> ID：11116515
> 
> 赞同：0
> 
> 时间：2012-06-20T09:25:45.463
> 
> 标签：html, node.js, websocket, opera

我按照这里的说明在我的 WXP 上安装 web socket node.js 服务器

我有一个客户端和服务器编写如下： [http](http://cjihrig.com/blog/creating-your-own-websocket-echo-client/) ://cjihrig.com/blog/creating-your-own-websocket-echo-client/ (ws_server.js)

请让我知道如何使网络套接字连接工作......？
当我运行客户端时，警报显示如下：
1.“支持Web套接字” 2.“关闭时：事件/数据：未定义”。

那么我如何让nodejs在opera上工作？它在谷歌浏览器上运行良好？？

我在 Opera 配置中启用了网络套接字

谢谢斯内哈
_

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:42:34.360

Opera 12 的当前发行版本是

```
Opera/9.80 (Macintosh; Intel Mac OS X 10.7.4; U; fr) Presto/2.10.289 Version/12.00 
```

正如您在用户代理字符串中看到的那样：**Presto/2.10.289**。WebSocket 协议的最新版本[已经](http://www.opera.com/docs/specs/presto2.11/index.dml#m211-337)在 Opera 的 CORE 引擎中实现。

> WebSocket API 将 WebSocket 实现更新为 RFC 6455
> ( **Presto/2.11.337** )
> 
> *   请参阅：WebSocket API
> *   请参阅：RFC 6455 - WebSocket 协议

但正如您在**Presto/2.11.337**中看到的那样，Opera 12 中尚不可用。它将在未来的版本中提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:21:43.520

根据[协议支持部分](https://github.com/einaros/ws#protocol-support)， Opera 使用非常旧的**Hixie 草案 76**。也许当您使用[ws](http://einaros.github.com/ws/)时，您会有更多的运气。此外，我认为您需要一个支持多种传输（websockets/longpolling 等）的项目，例如[faye.js](http://faye.jcoglan.com/)或[socket.io](http://socket.io)

# qt - QMenu 过长怎么办

> ID：11116518
> 
> 赞同：0
> 
> 时间：2012-06-20T09:25:52.003
> 
> 标签：qt

我想我们都遇到过这种情况，当菜单太长，或者菜单项太多时，屏幕不能一次显示所有项目。我可以用 Qt 做什么？MFC 有一个通用的解决方案，我们在这个菜单中添加一个新的项目，并暂时隐藏一些项目，当用户点击这个项目时，然后显示更多的项目。谁能给我一个好的解决方案？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:20:59.407

你应该明确地重组你的菜单。使用子菜单将相似的项目分组为一组项目。您一次在一个菜单中不应有超过（比方说）15 个项目。

例如：

```
Edit
    Delete
    Cut
    Copy
    Copy as vector graphics
    Copy as low resolution raster graphics
    Copy as high resolution raster graphics
    Copy as custom resolution raster graphics
    Copy text
    Paste
    Paste into new layer
    Paste into new document
    ... 
```

可以重组为

```
Edit
    Delete
    Cut
    Copy
    Copy as...
        Vector graphics
        Raster graphics
            Low resolution
            High resolution
            Custom...
        Text
    Paste
    Paste into...
        New layer
        New document
    ... 
```

# javascript - Javascript区分对象中的函数

> ID：11116519
> 
> 赞同：2
> 
> 时间：2012-06-20T09:25:57.973
> 
> 标签：javascript, object, typeof

有这样的对象：

```
var a = {

  b: "string",
  c: function(){
    return "i return a string"; 
  }    
} 
```

正在做

```
for (var key in a) {
    console.log(typeof key);
}; 
```

返回“string”、“string”，因为 b 是一个字符串，而 c 返回一个字符串。

是否有返回 c -> 函数的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T09:27:31.473

如果要查看属性的类型而不是其键，应将值与`typeof`运算符一起使用。

```
for (var key in a) {
    console.log(typeof a[key] );
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T09:29:11.850

> 返回“string”、“string”，因为 b 是一个字符串，而 c 返回一个字符串。

**没有**。它返回的原因`string`，是属性名`b`和属性名`c`都是字符串；您现在正在迭代对象的键，而不是它们的值。

你可以引入 attribute `d`，这是一个返回数字或布尔值的函数，你仍然会得到`string`.

相反，枚举值本身；

```
for (var x in a) {
    console.log(typeof a[x] );
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T09:28:07.040

基本上，您将始终通过**遍历对象的键来获取****字符串**，因为它们是这样表示的。

 **但是，例如，如果您这样做， `console.log(typeof a[key]);`那么您将获得预期的输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T09:29:10.800

改成：

```
for (var key in a) {
    console.log(typeof a[key]);
};​ 
```

[**现场演示**](http://jsfiddle.net/NEsLQ/)

```
console.log(typeof key); // gives you the key - "c"
console.log(typeof a[key]); // gives you the value of the "c" key - function. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T09:56:11.147

让我稍微解释一下，这样任何人都很容易理解。（无论如何，这是我在这里的第一篇文章。）

试试下面的代码，它说它是一个**函数**。

```
console.log(typeof(a.c)) 
```

但是您所写的是读取属性名称。请尝试以下代码以了解您的代码有什么问题。

```
for (var key in a) {
    console.log(key);
}; 
```

所以基本上你得到的是正确的。因为所有属性名称都是字符串。请记住 JSON 对象有几个限制，例如区分大小写、遍历属性所需的完整路径等。

如下更改您的代码以获取您的属性的类型，

解决方案1：

```
console.log(typeof(a[key])); 
```

解决方案2：

```
console.log(typeof(eval('a.'+ key))); 
```**

# c# - 在 Windows 窗体应用程序中动态增加/减少视频的速度

> ID：11116522
> 
> 赞同：5
> 
> 时间：2012-06-20T09:26:08.557
> 
> 标签：c#, winforms, performance, video

我正在 VS 2010 中构建一个 Windows 窗体应用程序，它可以根据用户输入的速度平滑地增加或减少视频播放的速度。

我尝试了几种途径..

1.) 使用 AudioVideoPlayback DirectX 类 - 我通过基​​于计时器设置视频的当前位置来设置视频的速度.. 并根据用户输入增加或减少该值。虽然这在我的 PC 上有效，但在我们的低端目标 PC 上却落后很多。谁能想到一个更有效的方法来增加/减少使用这个类的播放速度？

2.) 我尝试过 Windows Media Player ActiveX 控件，并尝试动态设置速率/位置，但即使在我的开发 PC 上，这也非常不稳定和滞后

3.) 我试过VS 2010自带的Apple QuickTime Control 2.0 COM Component，也很卡。

4.) 我想弄清楚如何在 Shockwave Flash Object 控件上设置速度，但还没有发现

任何人都可以建议其他探索途径吗？我只需要能够根据用户输入平滑地增加/减少视频播放的速度而不会出现延迟。我不在乎视频需要采用什么格式，所有视频都可以转换为所需的格式。

任何帮助/想法将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T00:57:19.100

最终的方法是从视频中解码位图，并自己处理帧。

尝试 DirectShow.NET 中的 CaptureNET 示例。它允许您从每一帧中捕获位图。之后，编写自己的播放控件来处理刷新率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T04:15:44.663

在尝试了许多不同的格式/库和组件后，我发现 VLC 媒体播放器 ActiveX 控件是减慢/加速视频的最有效方法，没有任何明显的延迟。

# validation - 抛出验证器异常时显示错误详细信息

> ID：11116525
> 
> 赞同：3
> 
> 时间：2012-06-20T09:26:21.407
> 
> 标签：validation, jsf, xpages

我在托管 bean 中有代码：

```
public void setTestProp(String newProp) {
   FacesMessage yourFailure = new FacesMessage();
   yourFailure.setDetail("Really you need to promise to never do that again!");
   yourFailure.setSummary("Stop here, now!");
   yourFailure.setSeverity(FacesMessage.SEVERITY_FATAL);
   throw new ValidatorException(yourFailure);
} 
```

在 XPage 中：

```
<xp:messages id="messages1" layout="table" showSummary="false"
    showDetail="true" globalOnly="false">
</xp:messages> 
```

但我得到了结果消息（如预期的那样很好地在黄色框中，而不是在错误页面中）：

`Error setting property 'testProp' in bean of type com.ibm.sg.demo.Test: javax.faces.validator.ValidatorException: Stop here, now!`

我想：

*   没有技术部分
*   见摘要

我想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T19:34:15.807

问题是属性解析器从托管 bean 的 get/set 方法中捕获所有*java.lang.Throwable*。“原始” *facesMessage*被替换为新的（附加上一条消息）。

你有三种可能：

1.  创建您自己的属性解析器
2.  创建您自己的验证器并将其附加到绑定到托管 bean 的字段
3.  将验证方法添加到您的 bean

希望这可以帮助

斯文

**编辑：**

*如何向 bean 添加验证方法*

a) 向您的 bean 添加验证方法

```
public void validate(FacesContext context, UIComponent toValidate,  Object value){

    // Do your validation with value
    // if everything is ok, exit method

    // if not, flag component invalid...
    ((UIInput)toValidate).setValid(false);

    // ... create your message ...
    FacesMessage yourFailure = new FacesMessage();
    yourFailure.setDetail("Really you need to promise to never do that again!");
    yourFailure.setSummary("Stop here, now!");
    yourFailure.setSeverity(FacesMessage.SEVERITY_FATAL);

    context.addMessage(toValidate.getClientId(context),  yourFailure);
} 
```

b）将您的验证器添加到该字段

```
<xp:inputText id="inputText1"
value="#{TBean.test}"
validator="#{TBean.validate}"> 
```

（您可以随意命名该方法。）

此验证器**不必**添加到 faces-config.xml 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:26:38.127

一旦您确定您的字段验证失败，您需要做的就是执行此操作，您将得到您想要的：

```
throw new javax.faces.validator.ValidatorException(new javax.faces.application.FacesMessage("Stop here, now!")); 
```

# jquery - Internet Explorer 8 在响应式网站中不显示固定菜单

> ID：11116530
> 
> 赞同：0
> 
> 时间：2012-06-20T09:26:52.030
> 
> 标签：jquery, html, css, internet-explorer-8, responsive-design

我正在制作一个预告片微型网站，向非专业人士简要解释响应式设计。

浏览器的解释一切正常。也适用于移动 Safari。

但像往常一样：微软的人类祸害，Internet Explorer 是 $*#§ing。在这种情况下，它涉及版本 8。对于版本 9，一切正常。

IE 8 不显示固定导航，因此用户无法在屏幕之间滑动。

我一直在寻找解决方案很长一段时间，但我找不到。也许你能帮帮我。

该网站可以在以下位置找到：

[http://www.nerdcraft-design.de/teaser/](http://www.nerdcraft-design.de/teaser/)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:52:42.790

很确定这只是一个定位问题 - IE 很容易混淆，所以最好是明确的 - 尝试添加`left: 0;`到导航 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:52:05.837

您需要包含 HTML5 shiv 以在旧 IE 中注册新的 HTML5 元素。没有它它们仍然会显示，但任何包含这些元素的 CSS 选择器（在您的情况下为 nav）都不会应用 CSS。

[http://code.google.com/p/html5shiv/](http://code.google.com/p/html5shiv/)

编辑：正如所指出的，您正在填充这些元素，但您的页面上似乎有一个 javascript 错误，可能会阻止它执行：

```
SCRIPT438: Object doesn't support property or method 'addEventListener' 
teaser, line 50 character 3 
```

# soundcloud - 如何让用户在每个页面重新加载时“重新连接”soundcloud？

> ID：11116532
> 
> 赞同：2
> 
> 时间：2012-06-20T09:26:57.123
> 
> 标签：soundcloud

我在 node.js (Express) 应用程序中使用 Javascript SDK。

连接用户工作正常，但连接不会在页面重新加载之间持续存在。这是默认行为，还是用户应该在新请求中保持联系？

我是否必须使用 OAuth 令牌身份验证，如果是，如何使用 JS-SDK 来完成？不过，在“权限”-弹出窗口中，用户已经使用 soundlcoud 登录。（每次只需点击“连接”按钮）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-20T19:47:36.717

想我会为那些对自动 oauth 的当前答案不满意的人分享我的答案：

检索 access_token：

我必须定义 get 和 set cookie 函数，然后我使用这些函数来设置和检索保存访问令牌的函数。为了简洁起见，我不会给出这些函数，但您可以通过 google 搜索轻松找到它们。然后我使用这行代码来获取 SC 访问令牌（一旦用户第一次通过身份验证）

```
SC.accessToken() 
```

设置令牌：

所以在我看来，这只是房间里的一头大象，出于某种原因，没有人提到过。您如何使用访问令牌与 SC 连接？您是否将其设置为 oauth 参数？每次通话都通过吗？好吧，在尝试将参数放在我能想到的每个地方之后，我发现你必须做这样的事情：

```
 SC.initialize({
              client_id: '[removed for security reasons]',
              client_secret: '[removed for security reasons]',
              redirect_uri: '[removed for security reasons]',
              access_token: getCookie("sc_lm2"),
              scope: 'non-expiring'
            }); 
//Where "sc_lm2" is the name of my cookie 
```

希望有帮助！我花了一段时间才弄清楚这么简单的事情

**编辑**

使用 PHP 和 Wordpress：

```
$json = wp_remote_get("http://api.soundcloud.com/users/[user_id]/tracks.json?client_id=[client_id]");
$soundcloudData = json_decode($json['body'],true); 
```

（如果您不使用 Wordpress，请替换 cURL 功能）。@krafty 我假设您只需将端点从“/tracks”更改为“/users”，但我不能说我真的需要使用 Soundcloud API 来抓取任何东西，而不是轨道。希望这会有所帮助，尽管我不确定我是否完全理解您要完成的工作（或者更确切地说，您打算如何做）-您是否尝试允许用户登录？如果您想充分解释您要完成的工作以及您正在采取的步骤，我很乐意尝试一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T16:40:04.443

是的，这是官方的做法。:)

对于 Next SoundCloud 站点，我们将令牌存储在 localStorage 中（当然，直到用户注销）。在前端对 API 的每个 AJAX 请求中，我们将 oauth 令牌放在请求标头中：

```
jqXHR.setRequestHeader('Authorization', 'OAuth ' + the_oauth_token); 
```

# actionscript-3 - Prezi.com：如何通过单击 swf 对象来防止缩放

> ID：11116535
> 
> 赞同：0
> 
> 时间：2012-06-20T09:27:14.703
> 
> 标签：actionscript-3, flash, mouseevent, prezi

我需要使用带有 Prezi 的交互式 Flash 剪辑，但此剪辑中的鼠标事件会使 prezi 放大。我希望我的剪辑能够防止 prezi-stage 的反应。有一个很好的解决方案：[http](http://tjoadesign.nl/blog/?p=303) ://tjoadesign.nl/blog/?p=303但现在它不再起作用了，我不知道为什么......感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:01:28.093

隐藏内置上下文菜单项

[关于 ContextMenuBuiltInItems 的 Adob​​e 文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/ui/ContextMenuBuiltInItems.html "ContextMenuBuiltInItems")

# shell - 如何过滤标准输出

> ID：11116537
> 
> 赞同：0
> 
> 时间：2012-06-20T09:27:25.120
> 
> 标签：shell, stdout

我使用 mysqldump 工具来创建我的数据库的转储，例如

```
mysqldump database > database.sql 
```

尽管添加了选项“--lock-tables=FALSE”，.sql 文件包含如下行：

```
LOCK TABLES "tableXYZ" WRITE;
UNLOCK TABLES; 
```

是否可以在将这些行写入 .sql 文件之前过滤掉它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:06:12.987

```
mysqldump database | sed  -r '/^(UN)?LOCK/d' > database.sql 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:02:24.143

使用`sed`你可以这样做：

```
mysqldump database |sed -e "/LOCK/d"> database.sql 
```

此命令将在放入之前删除所有包含“LOCK”的行`database.sql`

# java - 在 Java 小程序中运行 OrientDB

> ID：11116540
> 
> 赞同：3
> 
> 时间：2012-06-20T09:27:33.357
> 
> 标签：java, applet, orientdb

编辑：找到解决方案。在 Maven 构建过程中缩小代码是一个问题。在 Java Applet 中运行 OrientDB 是可能的。

我在 Java Applet 中启动内存 OrientDB 时遇到问题。我使用带有 OrientDB 版本 1.0.1 的签名 Applet。有人在 Applet 中实现了 OrientDB 并且可以验证这是可能的，或者可以帮助我解决这个异常吗？

我得到的例外：

```
2012-06-20 11:22:24:734 INFO OrientDB Server v1.0.1 is starting up... [OServer]Exception in thread "thread applet-de.test.all.Applet-1" sun.misc.ServiceConfigurationError: com.orientechnologies.orient.core.sql.OCommandExecutorSQLFactory: Provider com.orientechnologies.orient.core.sql.ODefaultCommandExecutorSQLFactory not found
at sun.misc.Service.fail(Service.java:129)
at sun.misc.Service.access$000(Service.java:111)
at sun.misc.Service$LazyIterator.next(Service.java:273)
at com.orientechnologies.orient.core.sql.OSQLEngine.getCommandFactories(OSQLEngine.java:186)
at com.orientechnologies.orient.core.sql.OSQLEngine.getCommandNames(OSQLEngine.java:216)
at com.orientechnologies.orient.core.sql.OSQLEngine.getCommand(OSQLEngine.java:239)
at com.orientechnologies.orient.core.sql.OCommandExecutorSQLDelegate.parse(OCommandExecutorSQLDelegate.java:41)
at com.orientechnologies.orient.core.sql.OCommandExecutorSQLDelegate.parse(OCommandExecutorSQLDelegate.java:31)
at com.orientechnologies.orient.core.storage.OStorageEmbedded.command(OStorageEmbedded.java:62)
at com.orientechnologies.orient.core.command.OCommandRequestTextAbstract.execute(OCommandRequestTextAbstract.java:60)
at com.orientechnologies.orient.core.metadata.schema.OSchemaShared.createClass(OSchemaShared.java:218)
at com.orientechnologies.orient.core.metadata.schema.OSchemaShared.createClass(OSchemaShared.java:164)
at com.orientechnologies.orient.core.metadata.schema.OSchemaShared.createClass(OSchemaShared.java:145)
at com.orientechnologies.orient.core.metadata.schema.OSchemaShared.createClass(OSchemaShared.java:116)
at com.orientechnologies.orient.core.metadata.schema.OSchemaProxy.createClass(OSchemaProxy.java:65)
at com.orientechnologies.orient.core.metadata.security.OSecurityShared.createMetadata(OSecurityShared.java:259)
at com.orientechnologies.orient.core.metadata.security.OSecurityShared.create(OSecurityShared.java:202)
at com.orientechnologies.orient.core.metadata.security.OSecurityProxy.create(OSecurityProxy.java:37)
at com.orientechnologies.orient.core.metadata.OMetadata.create(OMetadata.java:68)
at com.orientechnologies.orient.core.db.record.ODatabaseRecordAbstract.create(ODatabaseRecordAbstract.java:171)
at com.orientechnologies.orient.core.db.ODatabaseWrapperAbstract.create(ODatabaseWrapperAbstract.java:53)
at com.orientechnologies.orient.core.db.ODatabaseRecordWrapperAbstract.create(ODatabaseRecordWrapperAbstract.java:54)
at com.orientechnologies.orient.server.OServer.loadStorages(OServer.java:451)
at com.orientechnologies.orient.server.OServer.loadConfiguration(OServer.java:394)
at com.orientechnologies.orient.server.OServer.startup(OServer.java:152)
at com.orientechnologies.orient.server.OServer.startup(OServer.java:143)
at com.orientechnologies.orient.server.OServer.startup(OServer.java:132)
at de.test.all.Applet$1.run(Applet.java:132)
at de.test.all.Applet$1.run(Applet.java:125)
at java.security.AccessController.doPrivileged(Native Method)
at de.test.all.Applet.init(Applet.java:124)
at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Plugin2Manager.java:1639)
at java.lang.Thread.run(Thread.java:680) 
```

我启动数据库的 Applet 代码：

```
 public class Applet extends java.applet.Applet {

    OrientDbConfigurationLoader configLoader = null;
    OServer server = null;
    ODatabaseDocumentTx db = null;

    @Override
    public void init() {
        AccessController.doPrivileged(new
                PrivilegedAction<OServer>() {

            public OServer run() {
                configLoader = new OrientDbConfigurationLoader("db/", "test");

                try {
                    server = OServerMain.create();
                    server.startup(configLoader.loadDefaultConfig());
                    server.activate();
                } catch (InstanceAlreadyExistsException e) {
                    server = OServerMain.server();
                } catch (Exception e) {
                    System.out.println("Something went wrong while the server should start");
                    e.printStackTrace();
                }

                try {
                    db = new ODatabaseDocumentTx("memory:temp");
                    db = db.open(OrientDbConfigurationLoader.USERNAME, OrientDbConfigurationLoader.PASSWORD);
                } catch (Exception e) {
                    System.out.println("Can't init the in-memory db.");
                    e.printStackTrace();
                }
                return null;
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:39:14.057

问题似乎是 Java Service Registry 的使用。看着：

```
OClassLoaderHelper.lookupProviderWithOrientClassLoader() 
```

它调用：

```
ServiceRegistry.lookupProviders(clazz); 
```

我刚刚在 SVN 中继（r5909）中添加了这个检查：

```
 try {
          factories.add(ite.next());
        } catch (Exception e) {
          OLogManager.instance().warn(null, "Cannot load OCommandExecutorSQLFactory instance from service registry", e);
        } 
```

In this way a WARN is dumped but you can continue to configure your own factories if needed.

# c# - 如何在 Kendo UI MVC 的网格中设置和获取下拉列表的值？

> ID：11116542
> 
> 赞同：10
> 
> 时间：2012-06-20T09:27:36.357
> 
> 标签：c#, razor, telerik-mvc, kendo-ui

我正在 MVC3 中使用 KendoUI MVC。

我设法在网格列中获得了一个下拉列表。但是我不知道如何设置选定的值，并且当我保存它时不会保存我的选定值。

网格

```
@using Perseus.Areas.Communication.Models
@using Perseus.Common.BusinessEntities;

<div class="gridWrapper">
    @(Html.Kendo().Grid<CommunicationModel>()
        .Name("grid")
        .Columns(colums =>
        {
            colums.Bound(o => o.communication_type_id)
                .EditorTemplateName("_communicationDropDown")
                .ClientTemplate("#: communication_type #")
                .Title("Type")
                .Width(180);
            colums.Bound(o => o.sequence).Width(180);
            colums.Bound(o => o.remarks);
            colums.Command(command => command.Edit()).Width(50);
        })
        .Pageable()
        .Sortable()
        .Filterable()
        .Groupable()
        .Editable(edit => edit.Mode(GridEditMode.InLine))
        .DataSource(dataSource => dataSource
            .Ajax()
            .ServerOperation(false)
            .Model(model => model.Id(o => o.communication_id))
                .Read(read => read.Action("AjaxBinding", "Communication", new { id = @ViewBag.addressId }))
                .Update(update => update.Action("Update", "Communication"))
            .Sort(sort => { sort.Add(o => o.sequence).Ascending(); })
            .PageSize(20)
        )
    )
</div> 
```

EditorTemplate "_communicationDropDown

```
@model Perseus.Areas.Communication.Models.CommunicationModel

@(Html.Kendo().DropDownListFor(c => c.communication_type_id)
        .Name("DropDownListCommunication")
            .DataTextField("description1")
            .DataValueField("communication_type_id")
            .BindTo(ViewBag.CommunicationTypes)) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-20T15:25:27.077

我认为这是需要指出的重要一点是 DropDownList 名称应该与列名属性匹配。html 属性 name=""，而不是列的标题。名称属性必须与之匹配才能工作，因为您正在用来自编辑器模板的另一个控件替换默认编辑器控件，以在编辑操作期间取代它。如果在将 DOM 序列化回模型以进行更新操作时名称不匹配，则来自编辑器模板控件的值将被忽略。默认情况下，它是出现在模型类中的属性变量名称，除非在标记中被覆盖。

（编辑答案以包括插入记录操作）。

这是一个工作示例：

型号类：

```
public class Employee
{
    public int EmployeeId { get; set; }
    public string Name { get; set; }
    public string Department { get; set; }
} 
```

看法：

```
@(Html.Kendo().Grid<Employee>()
     .Name("Grid")
     .Columns(columns =>
     {
         columns.Bound(p => p.Name).Width(50);
         columns.Bound(p => p.Department).Width(50).EditorTemplateName("DepartmentDropDownList");
         columns.Command(command => command.Edit()).Width(50);
     })
     .ToolBar(commands => commands.Create())
     .Editable(editable => editable.Mode(GridEditMode.InLine))
     .DataSource(dataSource => dataSource
         .Ajax() 
         .Model(model => model.Id(p => p.EmployeeId))
         .Read(read => read.Action("GetEmployees", "Home")) 
         .Update(update => update.Action("UpdateEmployees", "Home"))
         .Create(create => create.Action("CreateEmployee", "Home"))
     )
) 
```

局部视图编辑器模板，文件名为“DepartmentDropDownList”，位于特定于该视图的 EditorTemplates 文件夹中。IE。主页\视图\EditorTemplates\DepartmentDropDownList.cshtml

```
@model string

@(Html.Kendo().DropDownList()
    .Name("Department")  //Important, must match the column's name
    .Value(Model)
    .SelectedIndex(0)
    .BindTo(new string[] { "IT", "Sales", "Finance" }))  //Static list of departments, can bind this to anything else. ie. the contents in the ViewBag 
```

读取操作的控制器：

```
public ActionResult GetEmployees([DataSourceRequest]DataSourceRequest request)
{
    List<Employee> list = new List<Employee>();
    Employee employee = new Employee() { EmployeeId = 1, Name = "John Smith", Department = "Sales" };
    list.Add(employee);
    employee = new Employee() { EmployeeId = 2, Name = "Ted Teller", Department = "Finance" };
    list.Add(employee);

    return Json(list.ToDataSourceResult(request));
} 
```

更新操作的控制器：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult UpdateEmployees([DataSourceRequest] DataSourceRequest request, Employee employee)
{
    return Json(new[] { employee }.ToDataSourceResult(request, ModelState));
} 
```

创建操作的控制器：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult CreateEmployee([DataSourceRequest] DataSourceRequest request, Employee employee)
{
    employee.EmployeeId = (new Random()).Next(1000);  
    return Json(new[] { employee }.ToDataSourceResult(request, ModelState));
} 
```

# php - Elgg过滤器计算答案和喜欢

> ID：11116554
> 
> 赞同：0
> 
> 时间：2012-06-20T09:28:08.833
> 
> 标签：php, elgg

我尝试开发两个过滤器，它们根据答案的数量和喜欢的数量对 groupforumtopics 列表进行排序。我知道函数：countAnnotations('likes') 和 countComments()，但我不知道如何使用它们。我使用一个开关盒，并根据输入创建 $options 数组。

```
 $options = array(
   'type' => 'object',
   'subtype' => 'groupforumtopic',
   'limit' => 10,
   'container_guid' => $guid,
   'full_view' => FALSE,
 );
 $content = elgg_list_entities($options); 
```

有人有提示或更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:24:04.813

Elgg 的点赞和回复都是注释。所以你必须使用[elgg_list_entities_from_annotation_calculation()](http://reference.elgg.org/annotations_8php.html#a2c50117d7de8cc544b2df6c575adc2cf)。最好在 elgg 社区论坛中提出这类问题，这样对其他人也有帮助。

# iphone - 我的所有配置文件都是以错误状态创建的

> ID：11116555
> 
> 赞同：3
> 
> 时间：2012-06-20T09:28:10.113
> 
> 标签：iphone, xcode, provisioning, provisioning-profile

这里正在发生一些非常奇怪的事情。上周我买了一台新 Mac，现在我正在这台新机器上编码。我完全忘记了从我的旧 Mac 中导出我的开发者配置文件，现在它已经一去不复返了，所以我无法将它导出以导入到这台新机器上。因此，我在供应门户中撤销了我的分发和开发证书。

然后我按照[这些](https://developer.apple.com/library/ios/#technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1-TNTAG6)步骤“重新开始”。

现在，我有从我的新 Mac 生成的新证书，在 Organizer > Devices > “Teams”（左侧）中，我可以在那里看到 iOS Development 和 Distribution。我还可以在 Keychain Access 中看到我的新证书。

这就是我迷路的地方。在配置门户中，我创建的每个新配置文件以及*iOS 团队配置配置文件*（由 Xcode 管理）都有状态“**错误**” -*而不是“无效”。*因此，我无法创建任何配置文件来 a) 提交到应用商店或 b) 在我的设备上进行测试。

还有一些注意事项（不确定这些是否与问题有关）-

*   在 Xcode 中，当尝试提交到 App Store 时，我得到“没有可用于签名的身份”并且单击“从 Xcode 下载身份”无济于事
*   自从更改我的证书后，我没有更改任何应用程序 ID

再次感谢您的帮助，尽管阅读时间很长！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T09:45:38.537

我从早上开始也面临这个问题，并收到了来自 Apple 的消息：

> **我们正在对 Provisioning 服务进行维护。在维护完成之前，所有供应请求都将保持挂起状态，届时将自动处理所有挂起的请求。**

所以保持耐心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:43:57.630

您的证书未正确安装在您的新 Mac 上，或者安装的配置文件来自您之前已撤销的证书。您是否使用新证书更新了您的配置文件？

# apache - .htaccess 中的双重规则不起作用

> ID：11116557
> 
> 赞同：0
> 
> 时间：2012-06-20T09:28:15.780
> 
> 标签：apache, .htaccess, url-rewriting

这是我第一次使用stackoverflow，我通常会在谷歌或一些朋友的帮助下找到我关于开发问题的答案。这次不行 ！

我遇到了要定义双重规则的 .htaccess 文件。最初我有这个 URL 重写代码：

```
 RewriteEngine on
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*) /index.php?query=$1&%{QUERY_STRING} [L] 
```

它就像一个魅力，但我看到谷歌索引的网站的许多页面在我网站的子域上重复，所以我决定在 .htaccess 中添加这段代码：

```
RewriteCond %{HTTP_HOST} !mydomain.com/$
RewriteRule ^(.*) http://www.mydomain.com/$1 [R=301,L] 
```

请注意，我在 RewriteEngine 之后添加了此代码。结果几乎是我所期望的，来自 mail.domain.com/mypage.html 等子域的 301 重定向正在工作并导致 www.domain.com/mypage.html 但 URL 重写页面的第二条规则就像取消了！所以所有使用第二条规则的页面都会出现 404 错误。

我已经测试了许多不同的东西，但不知道如何解决这个问题？有人有帮助我成功的秘诀吗？

提前谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:35:22.827

```
RewriteCond %{HTTP_HOST} !mydomain.com/$ 
```

此条件*始终*匹配，因为您要求的主机名不以`mydomain.com/`;结尾。`%{HTTP_HOST}`永远*不会*以斜杠结尾，因为它只包含没有路径的主机名。由于条件始终匹配，因此它`RewriteRule`始终有效，并被标记为`[L]`（最后一条规则）。我不知道为什么它不会导致重定向循环，可能是一些短路逻辑在`mod_rewrite`URL 未更改时停止重写。

你可能想要的是这样的：

```
RewriteCond %{HTTP_HOST} !=www.mydomain.com
RewriteRule ^(.*) http://www.mydomain.com/$1 [R=301,L] 
```

# ruby-on-rails - Rails 3 部署：多个 Rails 应用程序单域错误：没有这样的文件或目录 - config/environment.rb

> ID：11116561
> 
> 赞同：1
> 
> 时间：2012-06-20T09:28:24.370
> 
> 标签：ruby-on-rails, ruby-on-rails-3, apache

昨天，我在 Linode 上购买了一台服务器。[我按照http://library.linode.com/frameworks/ruby-on-rails-apache/ubuntu-10.04-](http://library.linode.com/frameworks/ruby-on-rails-apache/ubuntu-10.04-lucid)的一个很好的指南设置了 Apache、RVM、Rails、MySQL 并在域上托管了一个单一的 Rails 应用程序[清醒](http://library.linode.com/frameworks/ruby-on-rails-apache/ubuntu-10.04-lucid)。它还解释了如何将多个 Rails 应用程序放在同一个域中，但是当我尝试访问我的域 our-portal.com/adm 时出现错误：

```
No such file or directory - config/environment.rb

Application root: /srv/www/our-portal.com/public_html 
```

这里出了点问题……有人有什么想法吗？我可以很好地托管一个应用程序，但不能托管多个...这是我的虚拟主机设置

```
<VirtualHost *:80>
   ServerAdmin webmaster@our-portal.com
   ServerName  our-portal.com
   ServerAlias www.our-portal.com
   DocumentRoot /srv/www/our-portal.com/public_html/
   RailsBaseURI /adm
   RailsBaseURI /matrix
   ErrorLog  /srv/www/our-portal.com/logs/error.log
   CustomLog /srv/www/our-portal.com/logs/access.log combined
 </VirtualHost> 
```

我的应用程序路径在 /srv/www/our-portal.com/adm/ 中，我使用链接

```
ln -s /srv/www/our-portal.com/adm/public/ /srv/www/our-portal.com/public_html/adm/
ln -s /srv/www/our-portal.com/matrix/public/ /srv/www/our-portal.com/public_html/matrix/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:10:21.720

Try by setting the `DocumentRoot` to the public folder of your application:

```
DocumentRoot /srv/www/our-portal.org/app/public 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:51:33.633

我得到它的工作，这些是我所做的改变。

```
 <VirtualHost *:80>
   ServerAdmin webmaster@our-portal.com
   ServerName  our-portal.com
   ServerAlias www.our-portal.com
   DocumentRoot /srv/www/our-portal.com/public_html
   <Directory /srv/www/our-portal.com/public_html>
         Allow from all
   </Directory>

   RailsBaseURI /adm
   RailsBaseURI /matrix
   <Directory /srv/www/our-portal.com/public_html/adm>
         Options -MultiViews
   </Directory>
   <Directory /srv/www/our-portal.com/public_html/matrix>
         Options -MultiViews
   </Directory>
   ErrorLog  /srv/www/our-portal.com/logs/error.log
   CustomLog /srv/www/our-portal.com/logs/access.log combined
 </VirtualHost> 
```

我也相信我的链接没有正确创建。它有助于打字

```
ln -s 
```

并双击选项卡（不执行命令）查看 Unix 处理此函数路径的正确方式。我的链接看起来像这样

```
ln -s /srv/www/our-portal.com/adm/public/ our-portal.com/public_html/adm
ln -s /srv/www/our-portal.com/sitedb-pro/public/ our-portal.com/public_html/matrix 
```

请注意与我的旧链接的区别。使用双击选项卡，我能够正确引用这些文件夹。

# git - 是否有任何用于 mercurial 和 git 的文本用户界面（TUI/ncurses）前端？

> ID：11116563
> 
> 赞同：17
> 
> 时间：2012-06-20T09:28:36.633
> 
> 标签：git, mercurial, tui

我正在为`mercurial`和寻找 TUI（文本用户界面） `git`？

我需要两者的解决方案，但不必相同。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-20T09:30:51.813

[tig](http://jonas.nitro.dk/tig/)是我偶尔使用的那个。那是为了`git`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-21T17:22:57.900

您可以尝试使用 mercurial 的[hgview](http://www.hgview.org/)。这个`hgview-curses`包是我用来满足'tig for mercurial'需要的。

# iphone - 执行警报时如何使背景变暗？

> ID：11116566
> 
> 赞同：1
> 
> 时间：2012-06-20T09:28:44.177
> 
> 标签：iphone

我有一个 iphone 应用程序，在该应用程序中单击按钮，我正在显示一个类似于 alertview 的视图。当时我希望我剩余的视图（背景）是一个阴影，就像我们在显示 alertview 时看到的背景一样。任何人都可以帮我实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:37:00.960

您可以为此使用透明背景补丁。

# javascript - 根据表格数据对表格行进行排序

> ID：11116568
> 
> 赞同：4
> 
> 时间：2012-06-20T09:28:46.060
> 
> 标签：javascript, jquery, html

例如，我有一个代码：

```
<table>
    <tr>
        <th>name</td>
        <th>price</td>
    </tr>
    <tr>
        <td>a</td>
        <td class="sort">5</td>
    </tr>
    <tr>
        <td>b</td>
        <td class="sort">3</td>
    </tr>
    <tr>
        <td>c</td>
        <td class="sort">8</td>
    </tr>
    <tr>
        <td>c</td>
        <td class="sort"></td>
    </tr>
    <tr>
        <td>h</td>
        <td class="sort">2</td>
    </tr>
    <tr>
        <td>p</td>
        <td class="sort">6</td>
    </tr>
    <tr>
        <td>b</td>
        <td class="sort">20</td>
    </tr>
    <tr>
        <td>b</td>
        <td class="sort"></td>
    </tr>
</table> 
```

我希望这样排序：

```
<table>
    <tr>
        <th>name</td>
        <th>price</td>
    </tr>
    <tr>
        <td>h</td>
        <td class="sort">2</td>
    </tr>
    <tr>
        <td>b</td>
        <td class="sort">3</td>
    </tr>
    <tr>
        <td>a</td>
        <td class="sort">5</td>
    </tr>
    <tr>
        <td>p</td>
        <td class="sort">6</td>
    </tr>
    <tr>
        <td>c</td>
        <td class="sort">8</td>
    </tr>
    <tr>
        <td>b</td>
        <td class="sort">20</td>
    </tr>
    <tr>
        <td>c</td>
        <td class="sort"></td>
    </tr>
    <tr>
        <td>b</td>
        <td class="sort"></td>
    </tr>
</table> 
```

我使用了这段代码：

```
function sortNum(a, b) {
    return 1 * $(a).find('.sort').text() < 1 * $(b).find('.price').text() ? 0 : 1;
}
function sortTheTable(){
    $(function() {
        var elems = $.makeArray($('tr:has(.price)').remove())
        elems.sort(sortNum)
        $('table#information').append($(elems));
    });
} 
```

这可行，但问题是，输出是这样的：

```
<table>
    <tr>
        <th>name</td>
        <th>price</td>
    </tr>
    <tr>
        <td>c</td>
        <td class="sort"></td>
    </tr>
    <tr>
        <td>b</td>
        <td class="sort"></td>
    </tr>
    <tr>
        <td>h</td>
        <td class="sort">2</td>
    </tr>
    <tr>
        <td>b</td>
        <td class="sort">3</td>
    </tr>
    <tr>
        <td>a</td>
        <td class="sort">5</td>
    </tr>
    <tr>
        <td>p</td>
        <td class="sort">6</td>
    </tr>
    <tr>
        <td>c</td>
        <td class="sort">8</td>
    </tr>
    <tr>
        <td>b</td>
        <td class="sort">20</td>
    </tr>
</table> 
```

空的到顶部。我想要底部的空的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:43:27.860

您有许多插件可以对其进行排序，为什么要重新发明轮子。这是一个这样的插件

[关联](http://tablesorter.com/)

```
<script type="text/javascript" src="/path/to/jquery-latest.js"></script> 
<script type="text/javascript" src="/path/to/jquery.tablesorter.js"></script> 

$("#myTable").tablesorter(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T09:52:52.300

代替

```
return 1 * $(a).find('.sort').text() < 1 * $(b).find('.sort').text() ? 1 : 0; 
```

插入

```
return 1 * $(a).find('.sort').text() < 1 * $(b).find('.price').text() ? 0 : 1; 
```

[http://jsfiddle.net/E56j8/](http://jsfiddle.net/E56j8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T09:51:40.930

看看[排序 - 我们做错了](http://blog.rodneyrehm.de/archives/14-Sorting-Were-Doing-It-Wrong.html)。一个简单的用于排序的 jQuery 插件在[这里](https://gist.github.com/2818576)可用。

* * *

关于您的代码的一些注释：

```
// you're binding a document ready event within a function call? 
// looks the wrong way 'round, to me
function sortTheTable(){
    $(function() {
        // 1) you probably want to use .detach() over .remove()
        // 2) "tr:has(.price)" will match ALL table rows 
        // containing an element with the class .price
        // even if they're children of different <table>s!
        // 3) $('.selector') is already "an array", at least it's sortable right away.
        // there's no need for $.makeArray() here
        var elems = $.makeArray($('tr:has(.price)').remove())
        elems.sort(sortNum)
        // "#information" is a sufficient (and more efficient) selector, 
        $('table#information').append($(elems));
    });
} 
```

# git - Git Rebase 期间的 Git Commit - 到底发生了什么？

> ID：11116572
> 
> 赞同：11
> 
> 时间：2012-06-20T09:29:06.270
> 
> 标签：git, commit, rebase, git-rebase, git-commit

我正在寻找一个很好的描述，如果一个人在变基期间提交会发生什么，以及如何以一种简单的方式“恢复”。

让我们考虑一个场景，其中大型提交被重新设置。在 rebase 期间会出现冲突，并且用户开始合并更改。现在，想象一下你几乎完成的场景，但你没有调用*git rebase --continue* - 无论出于何种原因（无论是长周末还是这样）。下周你刚刚恢复工作，仍然在 rebase 期间。最后，您调用*git commit --amend*将更改附加到最后一次提交，并且......它们最终会出现在您要重新定位的提交中。

自然地，您总是可以检查您开始变基的提交并“破解您的方式” - 例如，通过尝试从您的修改中复制所有文件，但这可能会放弃同时引入的更改。

有没有一个干净的好方法来解决这个问题？这是我应该小心的一种特殊状态，我不想最终陷入这种状态，但它仍然偶尔会发生——我最终花了一整天的时间试图把事情弄清楚。

我真的很感激所有的帮助和建议。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T11:58:01.963

针对这种情况提出了两种解决方案。

*   第一个解决方案是将**最终结果重新设置为原始基本提交**。这将要求您再次解决类似的合并冲突，但是当您完成后，您的提交应该回到正轨。

*   对我有用的替代解决方案是分支与您修改的提交相同的点（它带有 SHA，应该用作结帐基础）。然后创建一个新分支并调用`git merge --no-ff --no-commit --strategy=theirs other_branch`，其中 *other_branch* 是提交不幸的分支。

# java - 如何使用 Java 在 Selenium2 (Webdriver) 中键入 Gmail 正文文本

> ID：11116577
> 
> 赞同：3
> 
> 时间：2012-06-20T09:29:10.877
> 
> 标签：java, gmail, webdriver, selenium-webdriver, testng

我尝试通过 Gmail (https://accounts.google.com/ServiceLogin?service=mail&passive=true&rm=false&continue=http://mail.google.com/mail/&scc=1<mpl=default<mplcache=2) 自动发送电子邮件在 Java 中使用 Selenium WebDriver。首先，我尝试使用 Selenium IDE 记录测试。IDE 未能记录电子邮件的正文。我尝试通过以下方式输入正文，但不幸的是失败了。

driver.findElement(By.xpath("//textarea[@name='body']")).sendKeys("正文");

错误是：失败：testSendingEmail org.openqa.selenium.ElementNotVisibleException：元素当前不可见，因此可能无法与命令持续时间或超时交互：30.02 秒

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T10:31:50.747

是的..您不能使用**Selenium IDE记录****电子邮件的正文**。

 **在您的项目中包含以下方法并调用该方法发送电子邮件。（无需登录 gmail）

```
import java.util.*;
import javax.mail.*;
import javax.mail.internet.*;
import javax.activation.*;

public void SendEmail()
{

  // Recipient's email ID needs to be mentioned.
  String to = "abcd@gmail.com";

  // Sender's email ID needs to be mentioned
  String from = "web@gmail.com";

  // Assuming you are sending email from localhost
  String host = "localhost";

  // Get system properties
  Properties properties = System.getProperties();

  // Setup mail server
  properties.setProperty("mail.smtp.host", host);

  // Get the default Session object.
  Session session = Session.getDefaultInstance(properties);

  try{
     // Create a default MimeMessage object.
     MimeMessage message = new MimeMessage(session);

     // Set From: header field of the header.
     message.setFrom(new InternetAddress(from));

     // Set To: header field of the header.
     message.addRecipient(Message.RecipientType.TO,
                              new InternetAddress(to));

     // Set Subject: header field
     message.setSubject("This is the Subject Line!");

     // Now set the actual message
     message.setText("This is actual message");

     // Send message
     Transport.send(message);
     //System.out.println("Sent message successfully....");
  }
catch (MessagingException mex) {
     mex.printStackTrace();
  }
} 
```

您还可以发送带有**附件的****邮件**

 **有关更多信息，请参阅[此链接](http://www.tutorialspoint.com/java/java_sending_email.htm)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-08T10:37:02.743

使用类时，它会抛出并且找不到错误元素，最好使用表索引。

```
 WebElement frame1 = driver.findElement(By.xpath("//iframe[@tabindex='1']"));
    driver.switchTo().frame(frame1);
    WebElement editable = driver.switchTo().activeElement();
    String mailBody = "Hi," + '\n' + "Gmail Body";
    editable.sendKeys(mailBody);
    driver.switchTo().defaultContent(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T08:42:16.400

以下是用于输入 gmail 正文的 HTML 代码：

```
<iframe frameborder="0" style="padding: 0pt; height: 218px; background-color: white;" class="Am Al editable" id=":4z" tabindex="1"></iframe> 
```

我在 WebDriver 中编写了以下 java 代码来输入 gmail 正文，它运行良好。（我很开心）

```
WebDriver driver = new FirefoxDriver();
WebElement frame1 = driver.findElement(By.xpath("//iframe[@class='Am Al editable']"));
driver.switchTo().frame(frame1);
WebElement editable = driver.switchTo().activeElement();
String mailBody = "Hi," + '\n' + "I'm Ripon from Dhaka, Bangladesh.";
editable.sendKeys(mailBody);
driver.switchTo().defaultContent(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-11T17:52:06.043

WebDriver 驱动=新的 FirefoxDriver();

WebElement text=driver.findElement(By.className("LW-avf"));

文本.click(); text.sendKeys("你好");

请尝试使用上面的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T09:51:10.220

试试下面的代码写在正文区域

```
driver.findElement(By.cssSelector("body[class='editable  LW-avf']")).clear();
driver.findElement(By.cssSelector("body[class='editable  LW-avf']")).sendKeys("body text"); 
```****

# git - Git 拉取远程仓库

> ID：11116579
> 
> 赞同：1
> 
> 时间：2012-06-20T09:29:14.247
> 
> 标签：git, pull

1.  我在我的机器上克隆了一个 git 存储库（位于我们的本地服务器中）。
2.  我想先将远程存储库中的最新更改同步到我们的本地服务器，然后再同步到我的机器上；因为服务器存储库也将被其他同事使用。
    1.  我可以直接登录到服务器并在那里执行 git pull ，但它受到限制，因为现在对服务器的命令级别访问受到限制。
    2.  我可以从我的本地机器上执行第 1 步活动吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:34:29.800

如果您不登录，则无法从服务器中提取。但是，您可以从本地存储库中提取，然后推回服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:35:53.423

如果您可以从您自己的机器上访问此本地服务器上的 Windows/Samba 共享，我认为您可以从您的机器上执行此操作。您可以毫不费力地从您的机器上在该共享中运行 git，除非您没有从您的机器直接访问远程存储库的权限。

或者你可以像 CharlesB 说的那样做，这更“笨拙”。从本地机器获取远程，然后推送到本地服务器。对于其他同事，他们不会看到任何差异。

# javascript - 如何将 JavaScript OOP 转换为函数式

> ID：11116580
> 
> 赞同：-1
> 
> 时间：2012-06-20T09:29:17.173
> 
> 标签：javascript, oop, node.js, functional-programming

我很好奇我的游戏在功能风格而不是 OOP 中会是什么样子。

以下是 Node.js 中的核心代码行：

```
if (!player.owns(flag) && player.near(flag)  && flag.isUnlocked()) {
    player.capture(flag);
} 
```

我的猜测是，它可能看起来像这样：

```
var canCapture = [not(owns), isNear, canUnlock].every(function(cond) {
    return cond(playerData, flagData);  
});

if(canCapture) {
    // how to capture?
} 
```

但不确定，因为没有经验丰富的功能编码器。我对接近该主题的每个答案都感兴趣（甚至可以是其他编程风格）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:22:15.210

它可能看起来像这样：

```
if (!player.owns(flag) && player.near(flag)  && flag.isUnlocked()) {
    capturingPlayer = player.capture(flag);
} 
```

where`capturingPlayer`是一个*新*对象，其不同之处`player`在于它捕获了一个标志。`player`没有被调用修改`capture`。

如果您更喜欢“非 OO”语法（无论这意味着什么）

```
if (!owns(player, flag) && near(player, flag)  && isUnlocked(flag)) {
    capturingPlayer = capture(player, flag);
} 
```

* * *

扩展并希望澄清一下：

在函数式编程社区所采用的意义上，函数式编程*不仅仅*意味着“函数/过程是一流的对象”。

它*的*意思是函数是*数学*意义上的函数，即

*   所有函数都返回一个值。
*   每个函数每次传递相同的参数时都返回相同的值。
*   函数没有任何副作用——没有可变对象或赋值。

所以，只要你的对象的方法没有改变对象，你就不需要做太多的改变来以“函数式”编程。

* * *

编辑：

Unfortunately both "functional" and "object-oriented" (in particular) are pretty ill-defined concepts.
Try and find a definition of "object-oriented" - there are at least as many definitions as there are people attempting to define it.
To get an understanding of functional programming, read [*Why functional programming matters*](http://www.cse.chalmers.se/~rjmh/Papers/whyfp.html) by John Hughes, at least twice.

# r - 从R中的data.frame中删除每个间隔的重复行

> ID：11116582
> 
> 赞同：1
> 
> 时间：2012-06-20T09:29:26.150
> 
> 标签：r, dataframe

我需要帮助来删除 data.frame 的相同间隔值中的所有重复行。

例如，我有一个 data.frame 像：

```
Time                X   Y   Z
01/01/2011 00:00    101 200 302
01/01/2011 00:05    101 200 302
01/01/2011 00:10    101 200 302
01/01/2011 00:20    100 200 303
01/01/2011 00:25    100 200 303
01/01/2011 00:30    100 200 303
01/01/2011 00:35    101 200 302
01/01/2011 00:40    100 200 303
01/01/2011 00:45    100 200 303 
```

在删除重复的行值 (x,y,z) 后，我将得到如下结果：

```
Time                X   Y   Z
01/01/2011 00:00    101 200 302
01/01/2011 00:20    100 200 303
01/01/2011 00:35    101 200 302
01/01/2011 00:40    100 200 303 
```

我尝试过的是：独特或重复的功能，但它们给出了不同的结果。

前任/`eliminate <- data[!duplicated(data[,c("X","Y","Z")]),]`

此代码只是删除所有 data.frame 中的所有重复值。

有人可以帮助我找到解决方案吗？

之前谢谢， 问候，

尤吉兹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:10:35.460

可能不是最优雅的方式：

```
data  <- within(data, C <- paste(X, Y, Z, sep = ""))
rl <- rle(data$C)$lengths
data <- data[c(1, cumsum(rl)[-length(rl)] + 1), 1:(ncol(data)-1)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T10:25:38.153

以下代码使您感兴趣的三列成为单个向量。然后，我只是测试向量之间的相等性和它的偏移量 1。当它为假时，你已经过渡到一个新的 XYZ 项目。

```
n <- nrow(ss)
xyz <- with(ss, paste0(X, Y, Z))
sel <- xyz[1:(n-1)] !=  xyz[2:n]
ss[c(TRUE,sel),] #the first one would always be true 
```

这比朱利叶斯的回答快了大约 3 倍。随着数据集的增长，优势应该会变得更大。

# c++ - while(true) 可能发生的最坏情况是什么？

> ID：11116583
> 
> 赞同：0
> 
> 时间：2012-06-20T09:29:30.800
> 
> 标签：c++, visual-c++, while-loop

我正在通过 Visual C++ Express 和 Youtube 上的教程练习 C++。我按照一段很酷的视频制作了一个计算器，但我不希望程序在你完成一个方程式后立即结束，所以我搜索了要做什么并尝试了 while(true)。

问题是，当程序提示我输入数字时，我输入了“blah”，然后按回车，程序开始变得疯狂，所以我很快退出了。

如果没有 while(true)，如果我输入“blah”，那么程序会立即转到“按任意按钮退出...”短语。所以我想知道的是，while(true) 有多危险？另外，如果这个问题不恰当，我真的很抱歉-_-

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T09:34:23.527

将发生的最糟糕的事情`while(true){}`是您将进入无限循环。

如果你在这些括号中写了一些东西，而不是打破循环的指令，那将一遍又一遍地重复。

这回答了你的问题。如果您想知道您的计算器出了什么问题，请针对特定问题创建一个新问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T09:38:57.970

`while(true)`显然可以创建一个“无限”循环，这只是意味着进程内部没有任何东西能够导致循环终止。操作系统仍然有可能决定（例如在 CPU 使用配额用完之后）或被要求（例如`kill -HUP processid`在 UNIX/Linux 上）终止进程。

值得考虑包含以下内容的无限循环之间的区别：

*   阻塞 (I/O?) 请求，例如等待新的网络客户端连接或数据或键盘输入，甚至只是等待特定的时间间隔过去，然后是有限数量的周期性或 I/O 相关处理，以及
*   非阻塞分支和数据处理指令，只是围绕着燃烧 CPU 和/或颠簸 CPU/内存缓存（例如`x += array[random(array.size())];`）

前一种情况实际上可能在某些情况下被故意使用，例如不需要执行任何有序关闭的服务器进程，因此可以让操作系统在不运行任何后循环代码的情况下将其关闭，但第二种情况通常是编程错误：只有`while(true)`在循环控制的处理过程中出现退出条件或错误以中断循环时，才会出现这样的错误。例如，可能有一个`if (condition) break;`, 或者在出现错误时会抛出异常的东西。这可能并不明显 - 例如，如果可能是某个被调用函数的异常 - 即使将标准 iostream 的函数设置为在转换失败或 EOF 时抛出 - 而不是`throw`循环内源代码中的可见语句。

值得注意的是，许多其他事情也可以创建无限循环——例如`while (a < b)`，如果没有条件`a`可以成为`>= b`. 因此，您必须考虑循环如何退出，而不是语言的安全性问题，这是编程的一个普遍方面。对于输入，通常执行以下操作：

```
while (std::cin >> my_int)
{
    // can use my_int...
}

// failed to convert next input from stdin to an int and/or hit EOF 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T09:37:38.567

如果您编写控制台应用程序，您希望它在控制台中运行。

*不要* `while`，`cin.get()`或任何事情，只使用你的程序，因为它打算被使用。

# jquery - 从 div 类中提取特定值

> ID：11116587
> 
> 赞同：0
> 
> 时间：2012-06-20T09:29:42.657
> 
> 标签：jquery, jquery-selectors

我有一个`div`看起来像这样的标签：

```
<div id="some id here" class="portlet portlet_15 portlet_content_15 new" >some content here</div> 
```

我知道我可以像这样使用 jquery 得到`id`这个`div`：

```
$(this).closest("div").attr("id") 
```

但是我如何`portlet_15`从上面`class`提取`15`任何数字？

这是代码的摘录，显示了我当前获取和发送的`id`位置`div`：

```
$.ajax({
    url: 'some web service,
    type: 'POST',
    data: { strID:$(that).closest("div").attr("id"), strClass:"need to send the class value too right here, in this case it would be portlet_15" },
    error: function(xhr, status, error) {
        //some error message;
    },
    success: function() {
        //some success task
    }
}); 
```

我在`data`上面的代码部分中包含了一个注释`class`应该去的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:36:25.530

您现有的代码有点混乱，因为您不知道`this`指的是什么。如果它引用您的特定`div`元素，那么 using`closest`是不正确的，因为它已经遍历了 DOM 层次结构。

但除此之外，如果您想获取特定元素的所有这些 CSS 类，则必须调用以下代码：

```
$(this).attr("class").split(" ");
// in your case this would return an array of classes:
// ["portlet", "portlet_15", "portlet_content_15", "new"] 
```

`this`当然是指有问题的元素。然后您可以轻松地以您喜欢的方式解析各个类。如果您想提取数字，您可能会使用正则表达式：

```
/portlet_(\d+)/i; 
```

## 使用`data-`属性

但正如其他人所建议的那样，如果您使用数据属性来获取数据会更好，如下所示：

```
<div id="some id here"
     class="portlet new"
     data-portlet="15"
     data-portlet-content="15">
         some content here
</div> 
```

在这种情况下，两个与 portlet 相关的类都作为数据属性提供，您可以使用以下方法轻松访问：

```
$(this).data("portlet"); // would return 15
$(this).data("portletContent"); // would return 15
$(this).data("portlet-content"); // would return 15 
```

最后两个是使用连字符名称访问相同数据属性的变体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:39:08.837

尝试这个：

```
var c = $('#here').attr("class").split(' ')[1];
var cls = c.substr(-2); 
```

[http://jsfiddle.net/caCPv/1/](http://jsfiddle.net/caCPv/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T09:45:11.810

Maibe 使用正则表达式：

```
var element = $(that).closest("div");
var strClass = element.attr("class").match(/portlet_\d+/i); 
```

在你的 ajax 中：

```
data: { strID: element.attr("id"), strClass: strClass[0] }, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T09:44:09.933

你也可以像这样做一个正则表达式：

```
var found = $('#here').attr("class").match(/portlet_\d{1,3}/); 
```

# android - 地理位置不能在手机上工作，但在模拟器上工作正常

> ID：11116590
> 
> 赞同：0
> 
> 时间：2012-06-20T09:29:50.393
> 
> 标签：android, geolocation

Belwo 是我用来在手机上获取位置更新的代码。当我在模拟器上运行它并从模拟器手动输入纬度和经度时，它可以正常工作，但是当我尝试在手机上运行这个应用程序时，它没有显示任何坐标。请帮忙..

清单文件具有所需的权限 -

```
<uses-sdk android:minSdkVersion="8" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

我已检查并且 GPS 已打开我的手机

```
 LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    LocationListener ll = new myLocationListener();
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0,ll);   
}
    class myLocationListener implements LocationListener{

        @Override
        public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub
            if(location!=null)
            {
                double lo = location.getLongitude();
                double la = location.getLatitude();                 
                lati.setText(Double.toString(la));
                longi.setText(Double.toString(lo));
            }

        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStatusChanged(String provider, int status,
                Bundle extras) {
            // TODO Auto-generated method stub

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:46:25.553

检查您的设备中的 GPS 是否已打开。GPS 提供商无法在建筑物内工作。在建筑物内，您需要使用 WiFi 提供商。

# wpf - 从 X 和 Y 位置获取网格行和列

> ID：11116595
> 
> 赞同：2
> 
> 时间：2012-06-20T09:30:14.673
> 
> 标签：wpf, grid, row

我有一个网格，我知道我用鼠标单击的位置的 X 值和 Y 值。

示例：X：235，Y：235 --> 这应该是列：3 和行：3

如何获得 x,y 坐标上的列和行？

我真的需要添加行/列的每个宽度直到达到所需的 x/y 值吗？

我正在使用 WPF（用于我的网格）和 c#（用于 x 和 y 位置）

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T09:50:24.007

Math.Floor 函数，例如：

```
Math.Floor(235/scale)
where scale is the the width or height of the grid cell. 
```

定义：返回小于或等于指定数的最大整数。Math.ceil 正好相反。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T12:22:06.613

为此，请考虑...

1.  您的网格设置了一些背景颜色（甚至`Transparent`可以）。这是为了命中测试（鼠标点击空白网格区域）工作。
2.  `GridSplitter`本身就是网格中的一个成员。了解这一点很重要，因为单击网格拆分器还会显示网格拆分器所在的相应单元格索引（列、行）。
3.  我们不关心`ColumnSpan`和`RowSpan`这里。

**XAML ...**

```
<Window x:Class="WpfApplication3.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Window1" Height="300" Width="300">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid Mouse.PreviewMouseDown="Grid_MouseDown"
              Background="Transparent">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>

            <GridSplitter ResizeDirection="Rows"
                          Width="{Binding ActualWidth,
                                    RelativeSource={RelativeSource
                                          AncestorType=Grid}}"
                          Height="4" Grid.ColumnSpan="3"
                          Background="Red" Grid.Row="1" />                
            <TextBox Height="60" AcceptsReturn="True" 
                     Text="Element1"
                     ScrollViewer.VerticalScrollBarVisibility="Visible" />
            <Button Content="Element2" Grid.Column="1"/>
            <TextBlock Text="Element4" Grid.Row="2" Width="100"
                       Height="40" HorizontalAlignment="Left"
                       VerticalAlignment="Center"/>
            <ComboBox SelectedIndex="0" Height="20"
                      Grid.Column="1" Grid.Row="2">
                <ComboBoxItem Content="Element5"/>
            </ComboBox>
            <CheckBox Content="Element3" Grid.Column="2"/>
            <RadioButton Content="Element6" Grid.Row="2"
                         Grid.Column="2" VerticalAlignment="Center"
                         HorizontalAlignment="Center"/>
        </Grid>
        <StackPanel Orientation="Horizontal" Grid.Row="1">
            <TextBlock Text="Selected Column and Row is ... " Margin="5"/>
            <TextBlock x:Name="StatusTextBlock" FontSize="12"
                       FontWeight="SemiBold" Margin="5"/>
        </StackPanel>
    </Grid>
</Window> 
```

**代码背后..**

```
 private void Grid_MouseDown(object sender, MouseButtonEventArgs e)
    {
        int selectedColumnIndex = -1, selectedRowIndex = -1;
        var grid = sender as Grid;
        if (grid != null)
        {
            var pos = e.GetPosition(grid);
            var temp = pos.X;
            for (var i = 0; i < grid.ColumnDefinitions.Count; i++ )
            {
                var colDef = grid.ColumnDefinitions[i];
                temp -= colDef.ActualWidth;
                if (temp <= -1)
                {
                    selectedColumnIndex = i;
                    break;
                }
            }

            temp = pos.Y;
            for (var i = 0; i < grid.RowDefinitions.Count; i++)
            {
                var rowDef = grid.RowDefinitions[i];
                temp -= rowDef.ActualHeight;
                if (temp <= -1)
                {
                    selectedRowIndex = i;
                    break;
                }
            }
        }

        StatusTextBlock.Text = selectedColumnIndex + ", " + selectedRowIndex;
    } 
```

# c# - 重命名抽象测试方法 (Visual Studio / c#)

> ID：11116598
> 
> 赞同：1
> 
> 时间：2012-06-20T09:30:38.820
> 
> 标签：c#, visual-studio, unit-testing, abstract-methods, method-names

问题：有没有办法手动命名测试方法而不是使用方法名？

背景：我目前是 BizTalk 开发人员，我们使用 BizUnit 框架来测试我们的项目。

为了让这些单元测试运行，我们使用 c# 在 Visual Studio 中构建单元测试的内部功能，从中我们调用 bizunit 框架来进行实际的（特定于 biztalk 的）测试。

令人讨厌的是，我们需要几行“样板”代码来创建 BizUnit 所需的测试用例；执行这些步骤的抽象类的使用促进了我们需要做的实际开发。此外，抽象类允许我们执行一些关于文档结构的“内部策略”（通过使用几个模板方法）。

抽象基类“IBaseTestScenario”包含称为“test”的实际方法：

```
 [TestClass]
public abstract class IBaseTestScenario
{
     private enum Phases { describeTestCase, addSetupSteps, addExecuteSteps, addCleanupSteps, persistTestCase, runTestCase };

     private Phases currentPhase
     {
         get;
         set;
     }

     [TestMethod]
     public void test()
     {
         // construct an empty testcase
         TestCase testCase = new TestCase();

         // loop each phase and perform the appropriately actions
         foreach (Phases phase in Enum.GetValues(typeof(Phases)))
         {
             try
             {
                 currentPhase = phase;
                 MethodInfo phaseMethod = this.GetType().GetMethod(currentPhase.ToString());
                 phaseMethod.Invoke(this, new object[] { testCase });
             }
             catch (Exception) { }
         }    
     }
     #endregion

    #region Describe TestCase
    public void describeTestCase(ref TestCase testCase)
    {
        // required descriptions
        testCase.Name = getName();
        testCase.Description = getDescription();
    }
    protected abstract string getName();
    protected abstract string getDescription();
    #endregion

    ...
} 
```

使用这种结构，我们可以强制执行步骤的顺序，我们可以“提醒”开发人员提供一个体面的名称和描述（因为方法是抽象的，他们将被迫提供信息）以及执行该操作的实际代码测试（特定于每个场景）从样板代码中分离出来。

当我们想要创建一个场景时，我们只需要扩展这个基类并实现包含场景特定信息的抽象方法。

```
[TestClass]
public class TestTest : IBaseTestScenario
{
    protected override string getName()
    {
        return "TestSCTest: Testing the tests";
    }

    protected override string getDescription()
    {
        StringBuilder sb = new StringBuilder();
        sb.AppendLine("This is a test for testing the testinterface.");
        sb.AppendLine("[SETUP]");
        sb.AppendLine("-+-- Add a delay of 1 second");
        sb.AppendLine("[EXECUTE]");
        sb.AppendLine("-+-- Add a delay of 2 second");
        sb.AppendLine("[CLEANUP]");
        sb.AppendLine("-+-- Add a delay of 1 second");
        return sb.ToString();
    }

    protected override void constructSetup(ref TestCase testCase)
    {
        DelayStep delay = new DelayStep
        {
            DelayMilliSeconds = 1000
        };
        add(delay);
    }

    protected override void constructExecute(ref TestCase testCase)
    {
        DelayStep delay = new DelayStep
        {
            DelayMilliSeconds = 2000
        };
        add(delay);
    }

    protected override void constructCleanup(ref TestCase testCase)
    {
        DelayStep delay = new DelayStep
        {
            DelayMilliSeconds = 1000
        };
        add(delay);
    }
} 
```

在您运行测试之前，这一切看起来都很整洁......

在测试结果窗口中，所有测试都称为“测试”，您需要将“类名称”列添加到视图中以便能够区分它们。

解决这个问题的快速（而且相当肮脏的方法）是删除接口中的 TestMethod 注释，并在每个单独的实现中放置以下“调用者”

```
[TestClass]
public class TestTest : IBaseTestScenario
{
    #region Invoker

    [TestMethod]
    public void GiveMeaningfulName()
    {
        test();
    }

    #endregion

    ...
} 
```

有谁知道更改测试方法名称的（更好的）方法？使用接口的现有抽象方法“getName()”将是理想的......

亲切的问候，

斯蒂金

# iphone - 即使 ARC，iPhone 应用程序也会崩溃...请帮助我找到问题

> ID：11116600
> 
> 赞同：-2
> 
> 时间：2012-06-20T09:30:42.220
> 
> 标签：iphone, ios, automatic-ref-counting

我正在为 iPhone 和 iPad 开发一个刽子手游戏，但有时它会崩溃。这是 Xcode 的崩溃日志：

```
Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Last Exception Backtrace: 
0   CoreFoundation              0x353e788f `__exceptionPreprocess`+ 163 
1   libobjc.A.dylib                 0x3778e259 objc_exception_throw + 33 
2   CoreFoundation                  0x353e7789 +[NSException raise:format:] + 1 
3   CoreFoundation                  0x353e77ab +[NSException raise:format:] + 35
4   CoreFoundation                  0x35354fed`-[__NSCFString characterAtIndex:]`+ 89
5   Poke Hangman                    0x000e41f5 -[ViewController setStringWithDatabase::](ViewController.m:194)
6   Poke Hangman                    0x000e388b -[ViewController preparaStringhe:] (ViewController.m:39)
7   Poke Hangman                    0x000e4685 -[ViewController cambia] (ViewController.m:248)
8   Poke Hangman                    0x000e3bc5 -[ViewController checkChar:] (ViewController.m:81)
9   Poke Hangman                    0x000e6155 -[ViewController ButtonG:] (ViewController.m:579)
10  CoreFoundation                  0x353413fd -[NSObject performSelector:withObject:withObject:] + 53
11  UIKit                           0x32e36e07 -[UIApplication sendAction:to:from:forEvent:] + 63
12  UIKit                           0x32e36dc3 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 31
13  UIKit                           0x32e36da1 -[UIControl sendAction:to:forEvent:] + 45
14  UIKit                           0x32e36b11 -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 493
15  UIKit                           0x32e37449 -[UIControl touchesEnded:withEvent:] + 477
16  UIKit                           0x32e3592b -[UIWindow _sendTouchesForEvent:] + 319
17  UIKit                           0x32e35319 -[UIWindow sendEvent:] + 381
18  UIKit                           0x32e1b695 -[UIApplication sendEvent:] + 357
19  UIKit                           0x32e1af3b _UIApplicationHandleEvent + 5827
20  GraphicsServices                0x36fda22b PurpleEventCallback + 883
21  CoreFoundation                  0x353bb523 <br>`__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__`+ 39
22  CoreFoundation                  0x353bb4c5 __CFRunLoopDoSource1 + 141
23  CoreFoundation                  0x353ba313 __CFRunLoopRun + 1371
24  CoreFoundation                  0x3533d4a5 CFRunLoopRunSpecific + 301
25  CoreFoundation                  0x3533d36d CFRunLoopRunInMode + 105
26  GraphicsServices                0x36fd9439 GSEventRunModal + 137
27  UIKit                           0x32e49cd5 UIApplicationMain + 1081
28  Poke Hangman                    0x000e3263 main (main.m:16)
29  Poke Hangman                    0x000e3208 start + 40

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x35c9d32c __pthread_kill + 8
1   libsystem_c.dylib               0x327e9208 pthread_kill + 48
2   libsystem_c.dylib               0x327e2298 abort + 88
3   libc++abi.dylib                 0x3579ff64 abort_message + 40
4   libc++abi.dylib                 0x3579d346 _ZL17default_terminatev + 18
5   libobjc.A.dylib                 0x3778e350 _objc_terminate + 140
6   libc++abi.dylib                 0x3579d3be _ZL19safe_handler_callerPFvvE + 70
7   libc++abi.dylib                 0x3579d44a std::terminate() + 14
8   libc++abi.dylib                 0x3579e81e __cxa_rethrow + 82
9   libobjc.A.dylib                 0x3778e2a2 objc_exception_rethrow + 6
10  CoreFoundation                  0x3533d506 CFRunLoopRunSpecific + 398
11  CoreFoundation                  0x3533d366 CFRunLoopRunInMode + 98
12  GraphicsServices                0x36fd9432 GSEventRunModal + 130
13  UIKit                           0x32e49cce UIApplicationMain + 1074
14  Poke Hangman                    0x000e325c main (main.m:16)
15  Poke Hangman                    0x000e3200 start + 32

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x35c8d3a8 kevent + 24
1   libdispatch.dylib               0x34277f04 _dispatch_mgr_invoke + 708
2   libdispatch.dylib               0x34277c22 _dispatch_mgr_thread + 30

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib          0x35c8d004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x35c8d1fa mach_msg + 50
2   CoreFoundation                  0x353bb3ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x353ba124 __CFRunLoopRun + 876
4   CoreFoundation                  0x3533d49e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x3533d366 CFRunLoopRunInMode + 98
6   WebCore                         0x3123cc9c _ZL12RunWebThreadPv + 396
7   libsystem_c.dylib               0x327aa72e _pthread_start + 314
8   libsystem_c.dylib               0x327aa5e8 thread_start + 0

Thread 0 crashed with ARM Thread State:
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000001      r3: 0x00000000
    r4: 0x00000006    r5: 0x3e9f4d98      r6: 0x00000002      r7: 0x2fee09f0
    r8: 0x002ad500    r9: 0x00000000     r10: 0x3ee51bc0     r11: 0x00000001
    ip: 0x00000148    sp: 0x2fee09e4      lr: 0x327e920f      pc: 0x35c9d32c
  cpsr: 0x00000010 
```

解决了这个问题，但有了一个新问题：

这是崩溃日志：

```
Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                  0x39ee717b`__exceptionPreprocess +`163
1   libobjc.A.dylib                 0x34ea095b objc_exception_throw + 31
2   CoreFoundation                  0x39ee709d -[NSException initWithCoder:] + 1
3   CoreFoundation                  0x39e4bd5b -[__NSCFString characterAtIndex:] + 87
4   Poke Hangman                    0x00077493 0x74000 + 13459
5   Poke Hangman                    0x0007644b 0x74000 + 9291
6   Poke Hangman                    0x00077a35 0x74000 + 14901
7   Poke Hangman                    0x00076839 0x74000 + 10297
8   Poke Hangman                    0x0007aa7b 0x74000 + 27259
9   UIKit                           0x32e4dd09 -[UIApplication sendAction:to:from:forEvent:] + 73
10  UIKit                           0x32e4dcbb -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 31
11  UIKit                           0x32e4dc95 -[UIControl sendAction:to:forEvent:] + 45
12  UIKit                           0x32e4d9eb -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 503
13  UIKit                           0x32e4e369 -[UIControl touchesEnded:withEvent:] + 489
14  UIKit                           0x32e4c791 -[UIWindow _sendTouchesForEvent:] + 525
15  UIKit                           0x32e3a72d -[UIApplication sendEvent:] + 381
16  UIKit                           0x32e3a009 _UIApplicationHandleEvent + 6057
17  GraphicsServices                0x33f04603 _PurpleEventCallback + 591
18  GraphicsServices                0x33f04233 PurpleEventCallback + 35
19  CoreFoundation                  0x39eb7873 `__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__`+ 35
20  CoreFoundation                  0x39eb7817 __CFRunLoopDoSource1 + 139
21  CoreFoundation                  0x39eb6611 __CFRunLoopRun + 1385
22  CoreFoundation                  0x39e33be5 CFRunLoopRunSpecific + 357
23  CoreFoundation                  0x39e33a71 CFRunLoopRunInMode + 105
24  GraphicsServices                0x33f0334b GSEventRunModal + 75
25  UIKit                           0x32e607f5 UIApplicationMain + 1121
26  Poke Hangman                    0x00075f65 0x74000 + 8037
27  Poke Hangman                    0x00075f00 0x74000 + 7936 
```

请帮我找到问题..

这是我认为它崩溃的部分：isPresent 告诉用户字符是否存在于单词中，如果用户字符存在于正确的单词中，在被批评的单词中，它会在位置 i 处交换。如果没有字符，分数会降低 20。对不起我的英语不好，希望你能帮助我；）

bool isPresent = NO;

```
for (int i = 0; i < correctWord.length; i++)

    if (userCharFromButton == [correctWord characterAtIndex:i])
    {
        criptedWord = [criptedWord stringByReplacingCharactersInRange:NSMakeRange(i, 1.0) withString:[NSString stringWithFormat:@"%c", userCharFromButton]];
        isPresent = YES;
    }    

word.text = criptedWord;

if (isPresent == NO)
    currentlyScore -= 20;

//check if the word is complete
bool complete = YES;

for (int i = 1; i < criptedWord.length; i++)
    if ([criptedWord characterAtIndex:i] == '-')
        complete = NO; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:37:42.857

崩溃日志显示已被符号化的回溯。从那里，您可以在 Last Exception Backtrace 的第 5 项中看到

```
5   Poke Hangman                    0x000e41f5 -[ViewController setStringWithDatabase::](ViewController.m:194) 
```

它位于第 194 行的 ViewController 类中的 setStringWithDatabase:: 中，导致异常。

在上面的行中，您可以看到

```
4   CoreFoundation                  0x35354fed`-[__NSCFString characterAtIndex:]`+ 89 
```

所以你的 setStringWithDatabase:: 必须调用一个 CoreFoundation characterAtIndex: 方法，你直接调用你自己或者你调用的东西在你的 ViewController 类的第 194 行附近调用它。常见原因是您的字符串为 nil/空，或者您试图获取超出范围的字符。

该问题似乎与使用 ARC 无关。

*[以下是第二位的解决方案]*

正如我的回答中提到的，您的第二个问题似乎也与第一个问题相似。您需要确保您的字符串 criptedWord 不是 nil 并且没有与该变量相关的其他内容导致它崩溃。为了进一步诊断，您需要先符号化您的崩溃日志。

# python - Python：给定 pid 获取用户进程的开始时间

> ID：11116605
> 
> 赞同：2
> 
> 时间：2012-06-20T09:31:06.243
> 
> 标签：python, windows, process

继续问题标题，假设我有 2 次正在进行的 ftp 传输，并且我想有选择地杀死（在 Windows 中使用 taskkill）较旧的传输。在解析 tasklist 命令的输出后，我将获得 pid。我不知道如何根据开始时间来区分它们 - 用户过去启动它们的时间。这可以在python中完成吗？

我所知道的是 pid 可以是随机的，即较新的进程可能具有比旧进程更小/更大的 pid。所以必须看开始时间。

请帮忙

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T09:51:01.887

您可以使用[psutils](http://code.google.com/p/psutil/wiki/Documentation)做到这一点：

直接来自文档：

```
>>> import os, psutil, datetime
>>> p = psutil.Process(os.getpid())
>>> p.create_time
1307289803.47
>>> datetime.datetime.fromtimestamp(p.create_time).strftime("%Y-%m-%d %H:%M")
'2011-03-05 18:03' 
```

# excel - 如何知道使用 php 在 pc 上使用了哪个 csv 分隔符？

> ID：11116607
> 
> 赞同：0
> 
> 时间：2012-06-20T09:31:13.203
> 
> 标签：excel

我正在生成一个 csv 文件。我想动态设置分隔符，即获取pc上设置的list-separator的值，然后在我的csv中使用。

可能吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:57:55.730

> 我确实使用“，”作为分隔符生成了一个 CSV。但在我的客户端，它不起作用。我用';'替换了分隔符 它在客户端工作。

这意味着客户期望`;`而不是`,`. 除非他告诉你，否则你无法知道客户的期望。使用 CSV 格式的程序不计其数，没有通用的方法来确定他们期望的分隔符。通常它的工作方式相反：您创建 CSV 并向客户端指定您使用的分隔符。虽然没有技术协议可以做到这一点，但 CSV 太不正式，无法拥有任何这样的通用规范。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:44:09.393

不，这不对。您希望您的 csv 在 Excel 中打开。正确的？然后使用 [TAB] 并指示要保存的文件“.xls”而不是“.csv”。最坏的情况是在打开时出现有关用户文件格式的警告消息，但数据肯定会在单元格中可见。

excel文件的另一种方法是使用Excel(X)ML；原始数据非常简单（http://office.microsoft.com/en-us/excel-help/overview-of-xml-in-excel-HA010206396.aspx）

# php - 服务器结果带有错误

> ID：11116609
> 
> 赞同：-1
> 
> 时间：2012-06-20T09:31:16.900
> 
> 标签：php

我在 php 中做一个 post 请求，当 post 完成时服务器发回一些文本。这是代码：

```
<?php  // Create map with request parameters
$params = array ('username' => 'loginapi', 'password' => 'myapilogin', 'term'=>  'tema'     );

// Build Http query using params
$query = http_build_query ($params);

// Create Http context details
$contextData = array (
            'method' => 'POST',
            'header' => "Connection: close\r\n".
                        "Content-Length: ".strlen($query)."\r\n",
            'content'=> $query );

// Create context resource for our request
$context = stream_context_create (array ( 'http' => $contextData ));

// Read page rendered as result of your POST request
$result =  file_get_contents (
              'http://infolinetest.nandiclient.com/search/searches/requestData.xml',  // page url
              false,
              $context);

// Server response is now stored in $result variable so you can process it

var_dump($result);

?> 
```

问题是即使我想要的结果如下，也会发生以下错误：

```
Notice: file_get_contents() [function.file-get-contents]: Content-type not specified      
assuming application/x-www-form-urlencoded in C:\xampp\htdocs\directory               \Search_Result.php on line 49
string(269) " Nandimobile
19 Banana Street, American House East legon
IT Software products and services0302503313 0244709575 " 
```

提前感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T09:36:52.747

您需要为 POST 指定内容类型。

```
$contextData = array (
            'method' => 'POST',
            'header' => "Connection: close\r\n".
                        "Content-Type: application/x-www-form-urlencoded\r\n".
                        "Content-Length: ".strlen($query)."\r\n",
            'content'=> $query ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:37:34.657

1，你没有收到你说的错误，只是通知（你可以在php.ini配置中禁用它）

2，您可以通过像这样设置 content-type 标头来简单地避免这个问题：

```
$contextData = array (
        'http'=>array(
            'method' => 'POST',
            'header' => "".
                "Connection: close\r\n".
                "Content-Length: ".strlen($query)."\r\n".
                "Content-type: "."application/x-www-form-urlencoded"."\r\n",
            "content"=> $query )
         ); 
```

更多信息在这里： http: [//php.net/manual/en/function.stream-context-create.php](http://php.net/manual/en/function.stream-context-create.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T09:35:10.780

`@`在之前添加`file_get_contents`并尝试

```
$result =  @file_get_contents (
              'http://infolinetest.nandiclient.com/search/searches/requestData.xml',  // page url
              false,
              $context); 
```

# c# - 从 MVC 放置/发布后如何获得 JSON 响应

> ID：11116611
> 
> 赞同：2
> 
> 时间：2012-06-20T09:31:20.550
> 
> 标签：c#, json, asp.net-mvc-3

我有一个调用 MVC 操作的 jquery 例程，该操作将对 API url 执行 PUT/POST。来自 jQuery 的调用很好，并且与使用 C# 对 API 的调用一样有效。通过 Firebug/Fiddler 检查时，会从 API 收到 JSON 格式的响应。

我如何将该响应发送回调用 jQuery？

我的 C# 代码是：

```
 public string callAPIPut(string ApiUrl, string JsonString)
    {
        WebRequest request = WebRequest.Create(ApiUrl);

        ASCIIEncoding encoding = new ASCIIEncoding();
        byte[] data = encoding.GetBytes(JsonString);

        request.ContentType = "application/json; charset=utf-8";
        request.Method = WebRequestMethods.Http.Put;
        request.ContentLength = JsonString.Length;

        Stream newStream = request.GetRequestStream();
        newStream.Write(data, 0, JsonString.Length);
        newStream.Close();

        return ""; // How do I return the JSON response from the API?
    } 
```

执行 GET 时，我可以使用以下内容将响应返回给调用 jQuery：

```
response = (HttpWebResponse)request.GetResponse();
using (StreamReader sr = new StreamReader(response.GetResponseStream()))
{
   serviceResponse = sr.ReadToEnd();
}
return serviceResponse; 
```

我不知道在执行 Put/Post 时如何返回响应？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T09:55:39.433

```
public ActionResult CallAPIPut(string ApiUrl, string JsonString)
{
    using (var client = new WebClient())
    {
        client.Headers[HttpRequestHeader.ContentType] = "application/json";
        byte[] data = Encoding.Default.GetBytes(JsonString);
        byte[] result = client.UploadData(ApiUrl, "PUT", data);
        return Content(Encoding.Default.GetString(result), "application/json");
    }
} 
```

或者通过包装自定义和可重用的操作结果来使其更智能，以避免基础设施管道使您的控制器混乱：

```
public class ApiResult : ActionResult
{
    public ApiResult(string apiUrl, string jsonData)
        : this(apiUrl, jsonData, "PUT")
    {
    }

    public ApiResult(string apiUrl, string jsonData, string method)
    {
        ApiUrl = apiUrl;
        JsonData = jsonData;
        Method = method;
    }

    public string ApiUrl { get; private set; }
    public string JsonData { get; private set; }
    public string Method { get; set; }

    public override void ExecuteResult(ControllerContext context)
    {
        var response = context.HttpContext.Response;
        var contentType = "application/json";
        response.ContentType = contentType;
        using (var client = new WebClient())
        {
            client.Headers[HttpRequestHeader.ContentType] = contentType;
            byte[] data = Encoding.Default.GetBytes(JsonData);
            byte[] result = client.UploadData(ApiUrl, Method, data);
            response.Write(Encoding.Default.GetString(result));
        }
    }
} 
```

现在你的控制器动作就变成了：

```
public ActionResult CallAPIPut(string apiUrl, string jsonString)
{
    return new ApiResult(apiUrl, jsonString);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:49:26.180

```
 Stream newStream = request.GetRequestStream();
 newStream.Write(data, 0, JsonString.Length);
 newStream.Close(); 
```

您将 JSON 发布到服务器。要获取 JSON，您需要发布/放置并使用 ResponseStream 来读取服务器返回的数据。

一个样品：

```
using System;
using System.IO;
using System.Net;
using System.Text;

namespace Examples.System.Net
{
    public class WebRequestGetExample
    {
        public static void Main ()
        {
            // Create a request for the URL. 
            WebRequest request = WebRequest.Create (
              "http://www.contoso.com/default.html");
            // If required by the server, set the credentials.
            request.Credentials = CredentialCache.DefaultCredentials;
            // Get the response.
            WebResponse response = request.GetResponse ();
            // Display the status.
            Console.WriteLine (((HttpWebResponse)response).StatusDescription);
            // Get the stream containing content returned by the server.
            Stream dataStream = response.GetResponseStream ();
            // Open the stream using a StreamReader for easy access.
            StreamReader reader = new StreamReader (dataStream);
            // Read the content.
            string responseFromServer = reader.ReadToEnd ();
            // Display the content.
            Console.WriteLine (responseFromServer);
            // Clean up the streams and the response.
            reader.Close ();
            response.Close ();
        }
    }
} 
```

[来自http://msdn.microsoft.com/en-us/library/456dfw4f.aspx](http://msdn.microsoft.com/en-us/library/456dfw4f.aspx)的示例

**编辑：**您将返回 responseFromServer 并在您的 Javascript 回调中使用它。

# html - 将画布坐标转换为像素

> ID：11116613
> 
> 赞同：1
> 
> 时间：2012-06-20T09:31:26.800
> 
> 标签：html, canvas

我正在尝试在线转换愤怒的小鸟的xy坐标，但我不知道如何计算y坐标！

这是来自游戏的数据：http: [//120403-1305-dot-latest-dot-project-slingshot-hr.appspot.com/fowl/json/Level1-1.json](http://120403-1305-dot-latest-dot-project-slingshot-hr.appspot.com/fowl/json/Level1-1.json)

x坐标由x - 项目宽度/ 2计算，每个对象都获得右左位置。

我不知道如何计算 y 坐标到像素。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:44:04.970

这很简单：我用它来查找像素的坐标，我想它也适用于愤怒的小鸟；）

y = 索引/高度

在这里查看我的答案： [从坐标转换为像素](https://stackoverflow.com/questions/10917326/convert-from-coordinates-to-pixels/13044662#13044662)

# android - Android IPC远程服务调用显示错误

> ID：11116614
> 
> 赞同：0
> 
> 时间：2012-06-20T09:31:27.913
> 
> 标签：android, ipc, aidl, inter-process-communicat

我想制作一个关于 IPC 通信的演示应用程序。（服务之间的通信）。我正在使用`AIDL` 它。

我发现大部分教程`RemoteService`和客户端都在同一个包中。

我实际上是分开做的，在传递对象时我正在使用`Parcelable`方法并面临错误......

**它说就像`RemoteService Signature` 找不到您的课程。。** 我还在下面显示了我的Logcat：如果您有任何解决方案，请指导我...或任何相互依赖的服务器客户端服务教程或文档..

***日志猫：***

```
06-20 14:47:53.973: W/dalvikvm(4465): VFY: unable to find class referenced in signature (Lcom/sam/zserver/IQRemoteService;)
06-20 14:47:54.003: I/dalvikvm(4465): Could not find method com.sam.zserver.IQRemoteService.getCounter, referenced from method com.quip.zclient.ZIPCClientActivity.invokeService
06-20 14:47:54.003: W/dalvikvm(4465): VFY: unable to resolve interface method 53: Lcom/sam/zserver/IQRemoteService;.getCounter ()I
06-20 14:47:54.023: D/dalvikvm(4465): VFY: replacing opcode 0x72 at 0x0011
06-20 14:47:54.023: D/dalvikvm(4465): VFY: dead code 0x0014-0054 in Lcom/quip/zclient/ZIPCClientActivity;.invokeService ()V
06-20 14:47:54.273: I/ActivityManager(61): Displayed com.quip.zclient/.ZIPCClientActivity: +588ms
06-20 14:47:59.363: D/dalvikvm(226): GC_EXPLICIT freed 10K, 55% free 2595K/5703K, external 716K/1038K, paused 53ms
06-20 14:48:05.073: D/dalvikvm(245): GC_EXPLICIT freed 6K, 54% free 2543K/5511K, external 716K/1038K, paused 36ms
06-20 14:48:10.122: D/dalvikvm(306): GC_EXPLICIT freed 4K, 54% free 2537K/5511K, external 716K/1038K, paused 71ms
06-20 14:48:15.113: D/dalvikvm(4129): GC_EXPLICIT freed 14K, 53% free 2579K/5379K, external 716K/1038K, paused 49ms 
```

谢谢;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:23:07.860

我不确切知道，但您似乎没有将aidl 放入您的客户端应用程序中。您应该将aidl 放入Service 和Client 应用程序中。

# objective-c - Objective c - 带有 2 个子视图的翻转动画

> ID：11116618
> 
> 赞同：1
> 
> 时间：2012-06-20T09:31:49.480
> 
> 标签：objective-c, animation, uiview, flip

我有一张`UIView`里面的图片（65x65），我想`UIView`用空白“翻转”它，`UIView`但它不起作用。我只能用相同的视图翻转我的视图，当我添加空白视图时，它可以工作，但不能与翻转动画一起使用。

这是我的工作代码：

```
 [UIView transitionWithView:myView
                  duration:0.5
                   options:UIViewAnimationOptionTransitionFlipFromLeft
                animations:^{
                    //[myView removeFromSuperview];
                    // [self.view addSubview:tmp];
                }
                completion:^(BOOL finished){
                    [myView removeFromSuperview];
                }]; 
```

注释部分是我想要做的，“tmp”是空白的 UIView（init with `myView.frame`），当然我删除了“完成”部分中的行。

我究竟做错了什么 ？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:01:33.840

尝试这个

```
[UIView transitionFromView:myView toView:tmp duration:0.5  
  options:UIViewAnimationOptionTransitionFlipFromLeft   
  completion:^(BOOL finished) {
    [myView removeFromSuperview];
}]; 
```

# mysql - 如何在不使用 MySql 中的自动增量的情况下增加主键

> ID：11116625
> 
> 赞同：0
> 
> 时间：2012-06-20T09:32:27.920
> 
> 标签：mysql, linq-to-sql

我有一个名为 Tl 的表，其中包含字段 ID、名称和课程。在我看来，当我单击添加详细信息按钮时，我应该能够填写名称和课程并将其保存为数据库。
这里我的 ID 是主键。但我没有为这个字段使用 AutoIncrement。不使用增量选项我应该能够保存新添加的值。
任何人都可以建议我如何使用 linq 查询来实现这一点。
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:04:19.857

我假设您正在使用 EntityFramework

```
var dbMaxId = context.TIs..Max(m => (int?) m.ID);
model.ID = dbMaxId + 1; 
```

# git - 无论大小写如何，我如何忽略 git 中的文件扩展名？

> ID：11116636
> 
> 赞同：44
> 
> 时间：2012-06-20T09:33:06.063
> 
> 标签：git, gitignore

我想告诉 git 忽略例如 jpg 文件，无论扩展名是如何编写的。

例如

> *.jpg

应该忽略

> .jpg、.JPG.、.JPG

等等

如果不告诉 git 完全忽略大小写，这可能吗？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-06-20T09:41:31.937

Git ignore 理解 glob 模式，所以你可以使用它

```
*.[jJ][pP][gG] 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-20T09:44:24.057

您可以告诉 git 在大多数情况下忽略大小写，包括在您的 .gitignore 文件中。所有你需要的是：

```
git config core.ignorecase true 
```

从实际的角度来看，可能会涉及取舍。git-config(1) 手册页说：

```
 core.ignorecase
       If true, this option enables various workarounds to enable git to
       work better on filesystems that are not case sensitive, like FAT.
       For example, if a directory listing finds "makefile" when git
       expects "Makefile", git will assume it is really the same file, and
       continue to remember it as "Makefile".

       The default is false, except git-clone(1) or git-init(1) will probe
       and set core.ignorecase true if appropriate when the repository is
       created. 
```

因此，如果您使用区分大小写的文件系统，您可能会遇到麻烦。你的旅费可能会改变。

# javascript - 鼠标悬停时（缓慢）增加导航宽度

> ID：11116641
> 
> 赞同：0
> 
> 时间：2012-06-20T09:33:21.547
> 
> 标签：javascript, navigation

我是 JavaScript 新手。我被要求做一些类似[http://www.samsung.com/global/galaxys3/feature.html#smartstay上的导航节目的事情](http://www.samsung.com/global/galaxys3/feature.html#smartstay)

我有一个名为 .container 的类，其中包含许多子类。我需要在鼠标悬停时增加 .menu 的宽度。目前，在 mouseover 事件期间，有 2 个元素受到影响。是否可以更改代码以便仅影响当前的鼠标悬停元素？

我听说补间能够完成这项工作。目前正在使用 tween.js。

下面是我的代码：

```
 $('.menu').mouseover(function(){
            var i=0;

            //case sensitive
            $('.menu').width('50px');
            tweenTA2 = new Tween(new Object(),'xyz',Tween.regularEaseOut,0,100,1);
            var myelem = $(this);

            tweenTA2.onMotionChanged = function(event){ 
                $(this).text('here');
                        setTimeout(function(){
                            i= i+1;
                            if (i < 100)
                            {

                                myelem.width(i);
                                myelem.css("background-color", "yellow");
                            }

                        },100);
            };
            tweenTA2.onMotionStarted = function(event){ 
                        $('.menu').width('50px');
            };
            //tweenTA2.onMotionResumed = function(event){
            //  $('.menu').width('50px');
            //};    
            tweenTA2.start();       

        }); 
```

我也不确定补间（例如开始，结束。持续时间）

你能协助复制我发布的网站上的效果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:32:09.650

如果您不需要支持较旧的浏览器，那么我建议您完全忘记 JavaScript，并使用 CSS3 过渡来完成此操作，而无需任何外部库。

就像是

```
#menu {
    width:100px;
    transition:width 1s ease-in-out;
    }

#menu:hover {
    width:300px;
    transition:width 1s ease-in-out;
    } 
```

一旦你添加了供应商前缀，这将适用于大多数现代浏览器，而对于旧浏览器，它将优雅地降级为在悬停时立即显示全宽。

# razor - umbraco razor - 从内容中获取字段

> ID：11116644
> 
> 赞同：2
> 
> 时间：2012-06-20T09:33:31.670
> 
> 标签：razor, field, umbraco, umbraco-webforms

我有 6 个相同内容类型的项目“新闻”，在每个项目中我都有一个字段 newsIntro。我想将字段放在另一个页面上的特定页面中，因此我需要定位一个特定字段，因此它可能是节点 1702 上的 newsIntro。我尝试了一些类似的方法

@1720.newsIntro

如何定位特定领域

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-20T12:43:00.497

在学习 Razor 时，您应该查看一些很棒的资源：

1.  [Umbraco Razor Feature Walkthrough](http://umbraco.com/follow-us/blog-archive/2011/2/23/umbraco-47-razor-feature-walkthrough-%E2%80%93-part-1.aspx) - 由八部分组成的博客文章系列，其中包含 Umbraco 4.7 中的许多新 Razor 功能以及示例。

2.  [Razor DynamicNode 备忘单](http://our.umbraco.org/projects/developer-tools/razor-dynamicnode-cheat-sheet)`DynamicNode`- Razor对象（包括`@Model`）可用的所有属性和方法的 PDF 。

3.  [Cultiv Razor 示例](http://our.umbraco.org/projects/developer-tools/cultiv-razor-examples)- 一个 Umbraco 网站，您可以下载并使用 WebMatrix 或 IIS 打开，并查看使用 Razor 访问属性的各种方法。

4.  [Razor 片段](http://our.umbraco.org/wiki/reference/code-snippets/razor-snippets)- 来自 Our Umbraco 的不同片段、示例等的汇编。

但在回答您的问题时，要获取特定节点的属性，您必须首先获取实际`DynamicNode`对象，然后使用属性别名来访问属性值。例子：

```
@{
    //Get the node
    dynamic node = Library.NodeById(1720);

    // Display the property
    @node.newsIntro
} 
```

要从当前页面访问属性，您只需使用`Model`：

```
@Model.newsIntro 
```

或者

```
@Model.bodyText 
```

或者

```
@Model.Name 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-23T19:08:06.023

首先，从 TypedContent 方法中获取一个 IPublishedContent 对象，然后使用 GetPropertyValue 检索该字段的值。

```
@{
  int nodeId = 1720;
  IPublishedContent contentNode = Umbraco.TypedContent(nodeId);
  var newsIntro = contentNode.GetPropertyValue("newsIntro");
}

<p>@newsIntro</p> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-29T08:05:46.360

使用 Umbraco 7，我使用此代码从不同页面获取属性：

```
@Umbraco.Content(1720).newsIntro 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-05T10:09:08.237

如果内容项 1720 是要使用该值的页面的父级或祖先，则可以像这样递归地获取它：

```
@Umbraco.Field("newsIntro", recursive: true) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-01T20:03:59.407

要从内容中获取字段，我使用了这个：

```
@{
    var selection = Umbraco.TypedContent(contentId).Children()
                        .Where(x => x.IsVisible())
                        .OrderBy("CreateDate");
}
@foreach(var item in selection){
            @item.GetPropertyValue("fieldName1")
            @item.GetPropertyValue("fieldName2")
            @item.GetPropertyValue("fieldName_N")
} 
```

# c# - 如何在 C# 中浏览本地虚拟文件夹？

> ID：11116654
> 
> 赞同：5
> 
> 时间：2012-06-20T09:33:57.440
> 
> 标签：c#, virtual, directory

在我的 C# 程序中，我必须浏览目录。所以我使用该方法 `System.IO.Directory.GetFiles(directory)`，当目录是像“C：\ Program File”这样的真实目录但它是虚拟目录（例如：librairie目录）时，它工作得很好，目录值看起来像这样：“::{031E4825-7B94- 4dc3-B131-E946B44C8DD5}\Pictures.library-ms" 我不知道怎么浏览。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-06T08:45:47.690

我知道这已经很老了，但如果有人想要解决方案，这就是我在过去半天的调查中发现的。[如果您给它提供虚拟文件夹的 XML 位置的路径，那么](https://stackoverflow.com/a/27465364/277601)有几种解决方案可以为您获取文件夹名称，但我没有看到任何东西可以让您从那里获得`::{031E4825-....}`。[在另一个问题的答案](https://stackoverflow.com/a/21329499/277601)中有使用 WindowsAPICodePack 的 KnownFoldersBrowser 示例的提示。所以我通读了其中的源代码并提出了以下内容：

这是我用来获取文件夹的对话框，我为 AllowNonFileSystemItems 启用了它，它允许选择库文件夹：

```
Microsoft.WindowsAPICodePack.Dialogs.CommonOpenFileDialog dlg = new Microsoft.WindowsAPICodePack.Dialogs.CommonOpenFileDialog();
dlg.Title = "Pick Folder";
dlg.IsFolderPicker = true;
dlg.InitialDirectory = Environment.SpecialFolder.Personal.ToString();  // If default setting does not exist, pick the Personal folder

dlg.AddToMostRecentlyUsedList = false;
dlg.AllowNonFileSystemItems = true;
dlg.DefaultDirectory = dlg.InitialDirectory;
dlg.EnsurePathExists = true;
dlg.EnsureFileExists = false;
dlg.EnsureReadOnly = false;
dlg.EnsureValidNames = true;
dlg.Multiselect = true;
dlg.ShowPlacesList = true;

if (dlg.ShowDialog() == Microsoft.WindowsAPICodePack.Dialogs.CommonFileDialogResult.Ok)
{
    foreach ( string dirname in dlg.FileNames )
    {
        var libFolders = ExpandFolderPath(dirname);
        if ( libFolders == null )
        {
            MessageBox.Show("Could not add '" + dirname + "', please try another.");
        }
        else
        {
            foreach ( string libfolder in libFolders )
            {
                DoWork(libfolder);
            }
        }
    }
} 
```

然后我迭代`allSpecialFolders`找到相同`::{031E4825-...}`的，它是 SpecialFolder 的 ParsingName（是的，可能是一种更优雅的方式）。之后，使用从其他解决方案中读取的 XML（[我使用了一个相同的 CodeProject 示例](http://www.codeproject.com/Articles/143038/Parsing-Windows-Libraries-Without-NET-or-the-W)）来获取该库文件夹中的文件夹：

```
 /// <summary>Gets the folders associated with a path</summary>
    /// <param name="libname"></param>
    /// <returns>Folder, or List of folders in library, and null if there was an issue</string></returns>
    public List<string> ExpandFolderPath(string foldername)
    {
        List<string> dirList = new List<string> { };
        // If the foldername is an existing directory, just return that
        if ( System.IO.Directory.Exists(foldername) )
        {
            dirList.Add(foldername);
            return dirList;
        }

        // It's not a directory, so check if it's a GUID Library folder
        ICollection<IKnownFolder> allSpecialFolders = Microsoft.WindowsAPICodePack.Shell.KnownFolders.All;
        Regex libguid = new Regex(@"\b([A-F0-9]{8}(?:-[A-F0-9]{4}){3}-[A-F0-9]{12})\b");
        var match = libguid.Match(foldername);
        if ( match == null )
            return null;

        string fpath = "";
        // Iterate over each folder and find the one we want
        foreach ( var folder in allSpecialFolders )
        {
            if ( folder.ParsingName == foldername )
            {
                // We now have access to the xml path
                fpath = folder.Path;
                break;
            }
        }
        if ( fpath == "" )
        {
            // Could not find it exactly, so find one with the same prefix, and
            // replace the filename
            foreach ( var folder in allSpecialFolders )
            {
                if ( folder.ParsingName.Contains(match.Groups[1].Value) )
                {
                    string sameDir = System.IO.Path.GetDirectoryName(folder.Path);
                    string newPath = System.IO.Path.Combine(sameDir, match.Groups[2].Value);
                    if ( System.IO.File.Exists(newPath) )
                        fpath = newPath;
                    break;
                }
            }
        }

        if ( fpath == "" )
            return null;

        var intFolders = GetLibraryInternalFolders(fpath);

        return intFolders.Folders.ToList();

    }

    /// <summary>
    /// Represents an instance of a Windows 7 Library
    /// </summary>
    public class Win7Library
    {
        public Win7Library()
        {

        }

        public string Name { get; set; }

        public string[] Folders { get; set; }
    }

    [DllImport("shell32.dll")]
    static extern int SHGetKnownFolderPath( [MarshalAs(UnmanagedType.LPStruct)] Guid rfid, uint dwFlags, IntPtr hToken, out IntPtr pszPath );

    //Handles call to SHGetKnownFolderPath
    public static string getpathKnown( Guid rfid )
    {
        IntPtr pPath;
        if ( SHGetKnownFolderPath(rfid, 0, IntPtr.Zero, out pPath) == 0 )
        {
            string s = System.Runtime.InteropServices.Marshal.PtrToStringUni(pPath);
            System.Runtime.InteropServices.Marshal.FreeCoTaskMem(pPath);

            return s;
        }
        else return string.Empty;
    }

    private static string ResolveStandardKnownFolders( string knowID )
    {
        if ( knowID.StartsWith("knownfolder:") )
        {
            return getpathKnown(new Guid(knowID.Substring(12)));
        }
        else
        {
            return knowID;
        }
    }

    private static Win7Library GetLibraryInternalFolders( string libraryXmlPath )
    {
        Win7Library newLibrary = new Win7Library();
        //The Name of a Library is just its file name without the extension
        newLibrary.Name = System.IO.Path.GetFileNameWithoutExtension(libraryXmlPath);

        List<string> folderpaths = new List<string>();

        System.Xml.XmlDocument xmlDoc = new System.Xml.XmlDocument(); //* create an xml document object.
        xmlDoc.Load(libraryXmlPath); //* load the library as an xml doc.

        //Grab all the URL tags in the document, 
        //these point toward the folders contained in the library.
        System.Xml.XmlNodeList directories = xmlDoc.GetElementsByTagName("url");

        foreach ( System.Xml.XmlNode x in directories )
        {
            //Special folders use windows7 Know folders GUIDs instead 
            //of full file paths, so we have to resolve them
            folderpaths.Add(ResolveStandardKnownFolders(x.InnerText));
        }

        newLibrary.Folders = folderpaths.ToArray();
        return newLibrary;
    } 
```

希望这对将来的人有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:36:19.987

您需要将虚拟路径转换为物理路径，尝试：

```
DirectoryInfo directoryInfo = new DirectoryInfo(Server.MapPath("your virtual folder here")); 
```

您可能想阅读[DirectoryInfo](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.aspx)。如果那没有用，请尝试一下：

```
DirectoryInfo info = new DirectoryInfo("virtual folder here");
FileInfo[] files = info.GetFiles("*.*", SearchOption.AllDirectories); 
```

# java - 接收正常，但是当我在游戏中调用 updateChat() 方法时它不会显示

> ID：11116659
> 
> 赞同：0
> 
> 时间：2012-06-20T09:34:21.033
> 
> 标签：java, sockets, methods, client-side, client-side-data

我知道我的程序的客户端接收良好，因为当我 system.out.println(message); 它在 cmd 提示符中显示消息。唯一的问题是，当我调用更新游戏框架（在 JPanel 中）上的聊天的方法时，消息不会显示。这是一些代码片段，看看你能不能告诉我为什么它不会更新。

客户端接收数据包方法：

```
public void receivePackets(int packetID, String line, int colon) throws IOException{
switch(packetID) {
    case 0: //player sending a message
    String token = line.substring(colon+1);
    chatHandler.updateChat(message);
    System.out.println(message);//this prints out
    break;
    case 1: //player position update
    int comma = line.indexOf(",");
    int playerX = Integer.parseInt(line.substring(colon+1, comma));
    int playerY = Integer.parseInt(line.substring(comma+1));
    break;
}
} 
```

ChatHandler 发送聊天的方法：

```
public void updateChat(String next) {
allChat[4] = allChat[3];
allChat[3] = allChat[2];
allChat[2] = allChat[1];
allChat[1] = allChat[0];
allChat[0] = next;
     System.out.println(next);//this also prints out
} 
```

这是问题所在。我知道 updateChat 方法没有任何问题，因为当我从 ChatHandler 类中调用它时，它会更新 JPanel 上的聊天。当从客户端类调用它时，它只是出于某种原因不会更新聊天。我什至尝试在 ChatHandler 类中使用此方法：

```
public void receiveChat(String message) {
    updateChat(message);
} 
```

我希望你能帮助我。老实说，这应该有效，因为 println 方法有效，但 update chat 方法无效，但是哦，好吧，只要有解决方案，我不在乎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:44:50.343

如果您收到消息，那么这不是套接字问题，更有可能是重绘问题。确保在负责显示它的 JComponent 上设置文本。然后，如有必要，强制重新绘制。

# iphone - UIScrollView 捏放大到 CGContextStrokePath 而不改变线宽

> ID：11116660
> 
> 赞同：2
> 
> 时间：2012-06-20T09:34:22.700
> 
> 标签：iphone, ios, uiscrollview, quartz-graphics, quartz-2d

我有一个包含自定义 UIView 的 UIScrollView。在我的 UIView 中，我重写 drawRect 以使用 CGContextStrokePath 绘制路径。我想稍微改变变焦的工作方式。捏拉缩小将在屏幕上显示更多路径。这就是我想要的，但我希望线宽保持不变而不是缩小，以便用户仍然清楚它们。

我以为我会这样做（myUIView 缩放目标称为_lineView）

```
-(void)scrollViewDidZoom:(UIScrollView *)pScrollView
    {
      _lineView.zoomScale = _scrollView.zoomScale;
      [_lineView setNeedsDisplay];
    } 
```

然后在我的 _lineView drawRect 方法中计算适当的线条笔触大小，以在缩小时产生恒定线条宽度的效果。

这真的很慢，我已经读过这是预期的，因为 drawrect 没有优化为每秒调用多次。

然后我开始考虑改用 GLKView 并直接在 opengl 中渲染整个东西。问题是我必须自己实现所有的缩放和平移（你可以在 UiScrollView 中免费获得所有可爱的缩放和平移反弹效果）。我还必须实现我想在 opengl、按钮等中使用的所有控件。

有没有办法在仍然使用 Quartz2d 的同时做到这一点？我觉得 opengl 会给我很大的力量，但如果我走这条路，我需要更长的时间才能完成我的应用程序的其余部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:11:08.177

我想通了。我找到了一种简单的方法来做到这一点，它根本不会减慢缩放/弹跳动画的速度，而且非常快速和流畅。

Quartz 有一个名为 CAShapeLayer 的类，它可以让你做一些很酷的事情。其中包括能够设置 CGPath 属性并指定线宽。更改会反映在视图中。

所以我基本上从我的 scrollViewDidZoom 方法中调用 shapeLayer.lineWidth ，它正是我需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:40:06.837

如果我是你，我会做的是在缩放时使用默认缩放行为（它不会重绘，而只是对缩放视图应用变换，这可以由 GPU 非常非常快地完成，但正如你已经注意到的那样会导致质量下降）。

然后，当用户完成缩放时，像现在一样重绘整个视图。适当的委托方法是`scrollViewDidEndZooming:withView:atScale:`.

这样，您可以快速（但略微难看）缩放，并且在缩放完成后显示漂亮（但稍微，可能不明显，较慢）。

# jquery - 如何“不处理”来自子元素的点击

> ID：11116669
> 
> 赞同：2
> 
> 时间：2012-06-20T09:34:49.143
> 
> 标签：jquery

这是我的[代码](http://jsfiddle.net/dpajH/)：

# HTML：

```
<div id="container">
    <div id="box">
        Content
    </div>
</div>​ 
```

# CSS：

```
#container
{
    position:relative;
    width:400px;
    height:400px;
    background-color:red;
}

#box
{
    position:absolute;
    width:200px;
    height:200px;
    top:100px;
    left:100px;
    background-color:blue;
}
​ 
```

# jQuery :

```
$('#container:not(#box)').click(function (e) {
    e.preventDefault();
    $('#container').fadeOut(300);
});​ 
```

我只想`fadeOut`单击父级（红色 div）。如果我点击蓝色的（孩子），什么都不会发生。我怎么能用 jQuery 做到这一点？尝试过，`:not`但似乎这不是正确的解决方案......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T09:37:39.690

您只需检查事件源自 ( `e.target`) 的元素是否是`#container`( `this`)：

```
$('#container').click(function (e) {
    if (e.target === this) {
        $('#container').fadeOut(300);
    }
});​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T09:38:39.773

当您单击 时`#box`，该`click`事件也会在父`#container`元素上注册，因为该事件会冒泡。

有两种方法可以防止这种情况发生。

首先是阻止冒泡的发生。您可以通过调用点击处理程序`e.stopPropagation()`来做到这一点。`#box`但是，当然，您没有`#box`事件处理程序，所以下一个更有吸引力。

其次是从`#container`事件处理程序中检查您是否单击了实际`#container`或某个子项，并且该事件刚刚冒泡。您可以通过检查`e.target`元素并将其`this`与`#container`事件处理程序中的元素进行比较来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T09:45:23.167

```
$('#container').click(function () {
    $('#container').fadeOut(300);
});

$('#box').click(function (e) {
    e.stopPropagation()
}); 
```

# c# - 待机/休眠后不再在控制台应用程序中触发 SerialPort

> ID：11116670
> 
> 赞同：0
> 
> 时间：2012-06-20T09:34:55.923
> 
> 标签：c#, windows, serial-port, console-application, .net

所以基本上我有一个控制台应用程序在后台运行，监听指定的串行端口（设备：通过 USB 连接的条形码扫描仪，映射为串行端口）。附加的 SerialDataReceivedEventHandler 按预期工作。但是，一旦计算机进入待机/休眠状态并重新激活，显然不再发送数据（SerialDataReceivedEventHandler 不会触发）。如果我检查 SerialPort 对象，一切似乎都很好（相同的属性、相同的事件处理程序、连接仍然打开）。我还注意到无论如何连接似乎超时（几个小时后）。

联系

```
...
{
  SerialPort serialPort = new SerialPort(port);
  serialPort.BaudRate = 9600;
  serialPort.Parity = Parity.None;
  serialPort.StopBits = StopBits.One;
  serialPort.DataBits = 8;
  serialPort.Handshake = Handshake.None; // tried RequestToSend as well, no difference

  serialPort.DataReceived += new SerialDataReceivedEventHandler(MySerialPortHandler);

  serialPort.Open();

  ...
}

static void MySerialPortHandler(object sender, SerialDataReceivedEventArgs e)
{
  SerialPort serialPort = (SerialPort)sender;
  string inData = serialPort.ReadExisting();

  ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:58:56.500

我向我的应用程序添加了逻辑，该逻辑在电源模式更改时进行监听。

```
Microsoft.Win32.SystemEvents.PowerModeChanged += OnPowerModeChanged; 
```

在暂停时我关闭了我的 SerialPort 并清理了它，在恢复时我重新建立了连接。

# c++ - 从转储的调用堆栈的几乎所有帧中获取 this 指针 NULL 意味着什么？

> ID：11116673
> 
> 赞同：0
> 
> 时间：2012-06-20T09:35:00.360
> 
> 标签：c++, this, heap-corruption

我有一种情况，我们的一位客户看到产品（Windows）崩溃。我有他们的转储，我已经分析了这些核心。崩溃似乎是在从函数返回字符串后发生的。该功能对我来说看起来非常好，尽管有微调的余地。我使用 Windbg 来分析内核。我发现的一件事是，在故障线程的调用堆栈的每一帧中，this 指针都是 NULL，除了值良好的第一帧。所以，我想知道这是堆损坏的情况还是有其他可能性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:50:11.883

它可能表明，调试优化的发布模式构建并不完全有效。我不熟悉细节，但至少有一种优化模式（“/Oy - 帧指针省略”）在调试时会影响堆栈的视图。

# eclipse - Eclipse Indigo 在 HTML4 片段中 生成 HTML5 警告

> ID：11116676
> 
> 赞同：3
> 
> 时间：2012-06-20T09:35:06.167
> 
> 标签：eclipse, doctype, html4

我为一家主要客户仍在使用 Internet Explorer 7（NHS 等）的公司工作。

在我们的代码中，我们在不同的地方生成 HTML 片段，Eclipse 正在生成大量与 HTML5 中已过时的标记相关的警告。

我知道设置 HTML4 的有效 doctype 可以解决平面 html 文件的问题，但是当我们在几个 PHP 文件上构建代码时，我们无法在片段中设置 doctype。

有没有办法将“默认”文档类型全局或按项目更改为 HTML4，因为我不想关闭警告，因为这可能会导致我错过实际问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T18:38:55.903

也让我发疯，直到我找到答案......

[http://www.eclipse.org/forums/index.php/t/219788/](http://www.eclipse.org/forums/index.php/t/219788/)

脚步：

1.  在 PHP Explorer 中选择一个 HTML 文件。如果没有 HTML 文件，请创建一个新文件。
2.  右键单击 > 属性 > Web 内容设置。
3.  在*文档类型*列表中选择*首选文档类型。*
**   单击确定并退出 Eclipse。*   `{your_workspace}/{your_project}/.settings/org.eclipse.wst.html.core.prefs`使用文本编辑器打开。*   替换`document-type/{your_file_name}=...`为`document-type/<project>=...`（不要修改`<project>`，按原样粘贴）*   启动 Eclipse。*

# java - 第三次进入上一个活动时出现错误

> ID：11116684
> 
> 赞同：-1
> 
> 时间：2012-06-20T09:35:29.720
> 
> 标签：java, android, tabs, android-activity

我正在尝试做一个按钮，而不是它的功能是转到 TabWidget 中的上一个活动

```
 btnVolver.setOnClickListener(new OnClickListener() 
        {
            @Override
            public void onClick(View arg0) 
            {
                String className = getIntent().getStringExtra("webpush");
                Class<?> webpushClass = null;
                try {
                    webpushClass = Class.forName(className);
                } catch (ClassNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                 Intent intent = new Intent(getApplicationContext(), webpushClass); 
                 intent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
//               intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
//               intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);  
//               webPushActivity.this.finishActivity(RESULT_OK);
                 View vista = getLocalActivityManager().startActivity("prueba",
                         intent)
                            .getDecorView();
                       setContentView(vista); 
```

A--> 实际活动。B--> 上一个活动

但是当我从 A 到 B，从 B 到 A，从 A 到 B（第三次点击）时，我得到下一个错误：

```
 06-20 09:23:20.256: E/AndroidRuntime(554): FATAL EXCEPTION: main
 06-20 09:23:20.256: E/AndroidRuntime(554):
 java.lang.StackOverflowError
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.text.Styled.measureText(Styled.java:430)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.text.Layout.measureText(Layout.java:1655)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.text.Layout.getLineMax(Layout.java:689)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.text.Layout.draw(Layout.java:340)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.text.BoringLayout.draw(BoringLayout.java:365)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.widget.TextView.onDraw(TextView.java:4050)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.View.draw(View.java:6740)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.drawChild(ViewGroup.java:1640)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.View.draw(View.java:6743)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.drawChild(ViewGroup.java:1640)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.drawChild(ViewGroup.java:1638)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.drawChild(ViewGroup.java:1638)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.View.draw(View.java:6743)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.widget.FrameLayout.draw(FrameLayout.java:352)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.drawChild(ViewGroup.java:1640)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.drawChild(ViewGroup.java:1638)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.View.draw(View.java:6743)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.widget.FrameLayout.draw(FrameLayout.java:352)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.drawChild(ViewGroup.java:1640)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.drawChild(ViewGroup.java:1638)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.View.draw(View.java:6743)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.widget.FrameLayout.draw(FrameLayout.java:352)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.drawChild(ViewGroup.java:1640)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.drawChild(ViewGroup.java:1638)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.View.draw(View.java:6743)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.widget.FrameLayout.draw(FrameLayout.java:352)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.drawChild(ViewGroup.java:1640)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.drawChild(ViewGroup.java:1638)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.View.draw(View.java:6743)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.widget.FrameLayout.draw(FrameLayout.java:352)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.drawChild(ViewGroup.java:1640)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.drawChild(ViewGroup.java:1638)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.View.draw(View.java:6743)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.widget.FrameLayout.draw(FrameLayout.java:352)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.drawChild(ViewGroup.java:1640)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.drawChild(ViewGroup.java:1638)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.drawChild(ViewGroup.java:1638)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.drawChild(ViewGroup.java:1638)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.drawChild(ViewGroup.java:1638)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.drawChild(ViewGroup.java:1638)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.View.draw(View.java:6743)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.widget.FrameLayout.draw(FrameLayout.java:352)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.drawChild(ViewGroup.java:1640)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.View.draw(View.java:6743)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.widget.FrameLayout.draw(FrameLayout.java:352)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1842)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewRoot.draw(ViewRoot.java:1407)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewRoot.performTraversals(ViewRoot.java:1163)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.view.ViewRoot.handleMessage(ViewRoot.java:1727)

 06-20 09:23:20.256: E/AndroidRuntime(554):     at
 android.os.Handler.dispatchMess 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:49:36.020

您`StackOverflowError`可能是由太多嵌套视图引起的（您的 logcat 内容也暗示了这一点）。

查看以下链接以获取更多参考：

[Android StackOverflow 错误](https://stackoverflow.com/questions/5724758/android-stackoverflow-error)

[java.lang.StackOverFlow 错误。怀疑浏览量过多？](https://stackoverflow.com/questions/2762924/java-lang-stackoverflow-error-suspected-too-many-views)

[Stackoverflow：由嵌套视图引起？](https://stackoverflow.com/questions/9946368/stackoverflow-caused-by-nested-views)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:54:36.717

我不确定，但您是否尝试开始另一个活动并将视图设置为当前活动？

# java - 使用restful方法重定向到页面？

> ID：11116687
> 
> 赞同：10
> 
> 时间：2012-06-20T09:35:53.680
> 
> 标签：java, rest, redirect

我创建了一个页面，要求用户填写一些表单字段，当他提交时，表单被发送到一个 Restful 方法，您可以在下面看到：

```
@POST
@Path("addUser")
@Consumes(MediaType.APPLICATION_FORM_URLENCODED)
public void addUser(@FormParam("username") String username,
        @FormParam("password") String password,
        @FormParam("id") String id,
        @FormParam("group_name") String groupName,
        @FormParam("authority_name") String authorityName,
        @FormParam("authority_id") String authorityId
        )
{
    //Something will be done here
} 
```

如何在此函数结束时将用户重定向到（比方说）index.jsp？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-05-07T10:25:40.013

像这样更改您的代码， addUser() 应该返回一个响应对象

```
public Response addUser(@FormParam("username") String username,
        @FormParam("password") String password,
        @FormParam("id") String id,
        @FormParam("group_name") String groupName,
        @FormParam("authority_name") String authorityName,
        @FormParam("authority_id") String authorityId
        )
{
    //Something will be done here

    java.net.URI location = new java.net.URI("../index.jsp?msg=A_User_Added");
    return Response.temporaryRedirect(location).build()

} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-20T09:40:56.337

`javax.ws.rs.core.UriBuilder`使用映射您要保留的参数和其他数据的 URI 创建一个 URI 。然后用于`Response.temporaryRedirect`向客户端返回重定向并将您构建的 URI 传递给它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-28T05:56:03.390

最后我得出这个结论，除了我所做的之外别无他法：
所以这是我的解决方案：

```
try {
        java.net.URI location = new java.net.URI("../index.jsp?msg=A_User_Added");
        throw new WebApplicationException(Response.temporaryRedirect(location).build());
    } catch (URISyntaxException e) {
        e.printStackTrace();
    } 
```

通过将此块添加到我的代码中，我得到了我需要的东西。希望它也能帮助你。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-18T10:00:14.417

请参阅以下 Web 服务中重定向的用法：

```
public class LoginWebService {

    @POST
    @Path("/check")
    public Response checkDetails(@FormParam("name") String name,@FormParam("pass") String pass ) throws URISyntaxException  {

        URI uri = new URI("/login/success");
        URI uri2= new URI("http://localhost:9090/NewWebServiceproject/new/login/failure");

        if(name.equals("admin") && pass.equals("pass"))
    //@Path("http://localhost:8010/NewWebServiceproject/new/login/success");
            {
            return Response.temporaryRedirect(uri).build();
            //Response.seeOther(uri);
            //return Response.status(200).entity("user successfully login").build();
            }
        else
        {
            return Response.temporaryRedirect(uri2).build();
            //Response.seeOther(uri2);
            //return Response.status(200).entity("user logon failed").build();
            }
    }
    @POST
    @Path("/success")
    public Response successpage()
    {
    return Response.status(200).entity("user successfully login").build();
    }
    @POST
    @Path("/failure")
    public Response failurepage()
    {
    return Response.status(200).entity("user logon failed").build();
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-29T11:21:02.313

使用“WebApplicationException”来重定向请求不是一个好主意。在 Jersey (2.4.1) 中，您应该能够通过正常的 servlet 方式重定向请求，（request.getServletContext().getRequestDispatcher().forward() 或只是 response.sendRedirect()）

以下是 Jersey 处理请求的方式

```
org.glassfish.jersey.servlet.ServletContainer.service(HttpServletRequest request, HttpServletResponse response)
      requestScope.runInScope
           final ContainerResponse response = endpoint.apply(data)
                  methodHandler.invoke(resource, method, args);
           Responder.process(ContainerResponse); 
```

该**methodHandler**是您的 REST 服务类，**方法**是该服务类中的函数。

重定向页面的步骤变得严格

1.  通过Jersey注入（@Context HttpServletRequest request，@Context HttpServletResponse response）在类字段或函数参数中获取（request，response）

2.  调用 request.getServletContext().getRequestDispatcher() 以获取“转发”的调度程序或使用 Response.sendRedirect(url)

一旦您的应用程序被返回（只是 null），Jersey 将尝试在“Responder.process(ContainerResponse)”中处理结果。在这一步中，它将使用响应来设置状态（204 没有内容为您的 null 返回）。

所以这里的关键是你必须在从你的服务函数返回之前完成/关闭响应对象。否则，Jersey 可能会覆盖您的输出。

关于为什么“WebApplicationException”可以覆盖 Jersey 响应的小提示。这是因为 org.glassfish.jersey.server.ServerRuntime.mapException() 将使用“webApplicationException.getResponse()”作为返回响应结果。

# c# - 每秒百万次迭代

> ID：11116689
> 
> 赞同：3
> 
> 时间：2012-06-20T09:35:57.083
> 
> 标签：c#, performance

我有一个我们实现的解析器，我想将它与其他一些商业解析器进行比较。其他解析器以“每秒百万次迭代”来衡量它们的速度。如何在 C# 中测量解析器的迭代次数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:55:56.903

我要做的是，查看商业解析器的代码，看看如何使用像[dotPeek](http://www.jetbrains.com/decompiler/)或[Reflector](http://www.reflector.net/)这样的工具来完成性能测量。然后以**完全相同**的方式实现它以使其具有可比性。否则你的结果将毫无意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:46:03.333

这是如何在 Visual Studio [http://www.dotnetperls.com/benchmark上执行此操作的示例](http://www.dotnetperls.com/benchmark)

还要获得准确的结果 编译到一个 Exe 并作为一个独立的控制台应用程序运行，不要从 Visual Studio 内部运行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T09:39:01.420

为了使测量具有可比性，您需要知道商业解析器中的那些“迭代”是什么。

校准后，使用[StopWatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)类来测量执行时间。在与商业解析器（相同应用程序）相同的上下文中运行解析器，计算解析器中的“迭代次数”（无论您的上下文中的内容），并通过将计数除以测量时间来计算“每秒迭代次数”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T09:39:39.833

在解析器中添加一些计数器。“[迭代](http://en.wikipedia.org/wiki/Iteration)”本身是什么？是重复过程的oart。例如，如果您的解析器专用于解析电话，那么从给定数据中解析出的一个电话号码就是迭代本身。计算这个迭代。

# css - 带有滚动的垂直 div 填充所有可用的垂直空间

> ID：11116695
> 
> 赞同：2
> 
> 时间：2012-06-20T09:36:14.533
> 
> 标签：css, html

我想创建这样的布局：

> +-----------集装箱-----------+
> | +-----固定高度-div-------+|
> | +-------固定高度------+|
> | +-填充高度-可滚动-div-+|
> | +-固定高度-底部-div-+|
> +---------端容器-------+

问题是如何使*fill-height-scrollable-div*适应所有可用空间。有关更多详细信息，请参见示例。

这是一个例子：http: [//jsfiddle.net/SkeLLLa/fz2C7/](http://jsfiddle.net/SkeLLLa/fz2C7/)

是否有任何**非javascript**方法来设置*div.chat-user-list-cnt*以适应所有可用高度并使*div.chat-bot-btns-cnt*粘在*div.chat-list*的底部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:43:26.523

在您的演示中，除了“可滚动的 div”之外，所有内容都有固定的高度，并且您的外部 div 是绝对定位的（嗯`position: fixed`，但足够接近）。

您需要做的是利用您可以`position: absolute; top: 50px; bottom: 50px`在“可滚动 div”上进行设置的事实。

**见： http:** [//jsfiddle.net/thirtydot/UPG6A/](http://jsfiddle.net/thirtydot/UPG6A/)（简化版）

# python - 如何为 scikit-learn 分类器获取信息量最大的特征？

> ID：11116697
> 
> 赞同：73
> 
> 时间：2012-06-20T09:36:19.457
> 
> 标签：python, machine-learning, classification, scikit-learn

liblinear 和 nltk 等机器学习包中的分类器提供了一种方法`show_most_informative_features()`，这对调试功能非常有帮助：

```
viagra = None          ok : spam     =      4.5 : 1.0
hello = True           ok : spam     =      4.5 : 1.0
hello = None           spam : ok     =      3.3 : 1.0
viagra = True          spam : ok     =      3.3 : 1.0
casino = True          spam : ok     =      2.0 : 1.0
casino = None          ok : spam     =      1.5 : 1.0 
```

我的问题是是否为 scikit-learn 中的分类器实现了类似的功能。我搜索了文档，但找不到类似的东西。

如果还没有这样的功能，有人知道如何获得这些值的解决方法吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-06-20T09:51:55.117

分类器本身不记录特征名称，它们只看到数字数组。但是，如果您使用`Vectorizer`/ `CountVectorizer`/ `TfidfVectorizer`/提取特征`DictVectorizer`，*并且*使用线性模型（例如`LinearSVC`或朴素贝叶斯），那么您可以应用[文档分类示例](http://scikit-learn.org/stable/auto_examples/text/document_classification_20newsgroups.html)使用的相同技巧。示例（*未经测试*，可能包含一个或两个错误）：

```
def print_top10(vectorizer, clf, class_labels):
    """Prints features with the highest coefficient values, per class"""
    feature_names = vectorizer.get_feature_names()
    for i, class_label in enumerate(class_labels):
        top10 = np.argsort(clf.coef_[i])[-10:]
        print("%s: %s" % (class_label,
              " ".join(feature_names[j] for j in top10))) 
```

这是用于多类分类；对于二进制情况，我认为你应该`clf.coef_[0]`只使用。您可能需要对`class_labels`.

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-06-21T14:55:49.690

在 larsmans 代码的帮助下，我为二进制案例提出了以下代码：

```
def show_most_informative_features(vectorizer, clf, n=20):
    feature_names = vectorizer.get_feature_names()
    coefs_with_fns = sorted(zip(clf.coef_[0], feature_names))
    top = zip(coefs_with_fns[:n], coefs_with_fns[:-(n + 1):-1])
    for (coef_1, fn_1), (coef_2, fn_2) in top:
        print "\t%.4f\t%-15s\t\t%.4f\t%-15s" % (coef_1, fn_1, coef_2, fn_2) 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-08-13T07:31:42.823

添加更新，`RandomForestClassifier`现在支持`.feature_importances_`属性。该[属性](http://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html)告诉您该特征解释了多少观察到的方差。显然，所有这些值的总和必须 <= 1。

我发现这个属性在执行特征工程时非常有用。

感谢 scikit-learn 团队和贡献者的实现！

编辑：这适用于 RandomForest 和 GradientBoosting。所以`RandomForestClassifier`, `RandomForestRegressor`,`GradientBoostingClassifier`都`GradientBoostingRegressor`支持这一点。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-11-24T17:42:54.873

我们最近发布了一个库（[https://github.com/TeamHG-Memex/eli5](https://github.com/TeamHG-Memex/eli5)），它允许这样做：它处理来自 scikit-learn、二进制/多类案例的各种分类器，允许根据特征值突出显示文本, 与 IPython 等集成。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-06-12T06:42:28.140

实际上，我必须在我的 NaiveBayes 分类器上找出特征重要性，尽管我使用了上述函数，但我无法根据类获得特征重要性。我浏览了 scikit-learn 的文档并稍微调整了上述功能，以发现它可以解决我的问题。希望对你也有帮助！

```
def important_features(vectorizer,classifier,n=20):
    class_labels = classifier.classes_
    feature_names =vectorizer.get_feature_names()

    topn_class1 = sorted(zip(classifier.feature_count_[0], feature_names),reverse=True)[:n]
    topn_class2 = sorted(zip(classifier.feature_count_[1], feature_names),reverse=True)[:n]

    print("Important words in negative reviews")

    for coef, feat in topn_class1:
        print(class_labels[0], coef, feat)

    print("-----------------------------------------")
    print("Important words in positive reviews")

    for coef, feat in topn_class2:
        print(class_labels[1], coef, feat) 
```

> 请注意，您的分类器（在我的情况下是 NaiveBayes）必须具有属性 feature_count_ 才能正常工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-01T14:55:15.973

您还可以执行以下操作来按顺序创建重要性特征图：

```
importances = clf.feature_importances_
std = np.std([tree.feature_importances_ for tree in clf.estimators_],
         axis=0)
indices = np.argsort(importances)[::-1]

# Print the feature ranking
#print("Feature ranking:")

# Plot the feature importances of the forest
plt.figure()
plt.title("Feature importances")
plt.bar(range(train[features].shape[1]), importances[indices],
   color="r", yerr=std[indices], align="center")
plt.xticks(range(train[features].shape[1]), indices)
plt.xlim([-1, train[features].shape[1]])
plt.show() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-28T18:35:13.777

`RandomForestClassifier`还没有`coef_`属性，但我认为它将在 0.17 版本中。但是，请参阅[使用 scikit-learn 对随机森林进行递归特征消除中](https://stackoverflow.com/questions/24123498/recursive-feature-elimination-on-random-forest-using-scikit-learn)`RandomForestClassifierWithCoef`的课程。这可能会给您一些解决上述限制的想法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-28T22:19:40.673

不完全是您正在寻找的东西，而是一种快速获取最大幅度系数的方法（假设 pandas 数据框列是您的特征名称）：

您对模型进行了如下训练：

```
lr = LinearRegression()
X_train, X_test, y_train, y_test = train_test_split(df, Y, test_size=0.25)
lr.fit(X_train, y_train) 
```

获取 10 个最大的负系数值（或更改为 reverse=True 以获得最大的正值），例如：

```
sorted(list(zip(feature_df.columns, lr.coef_)), key=lambda x: x[1], 
reverse=False)[:10] 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-09T18:33:24.483

首先做一个列表，我给这个列表命名标签。之后提取所有特征名称和列名称，我将其添加到标签列表中。这里我使用朴素贝叶斯模型。在朴素贝叶斯模型中，feature_log_prob_ 给出特征的概率。

```
def top20(model,label):

  feature_prob=(abs(model.feature_log_prob_))

  for i in range(len(feature_prob)):

    print ('top 20 features for {} class'.format(i))

    clas = feature_prob[i,:]

    dictonary={}

    for count,ele in enumerate(clas,0): 

      dictonary[count]=ele

    dictonary=dict(sorted(dictonary.items(), key=lambda x: x[1], reverse=True)[:20])

    keys=list(dictonary.keys())

    for i in keys:

      print(label[i])

    print('*'*1000) 
```

# c# - ftp 文件下载在本地主机上工作但在服务器上不工作

> ID：11116699
> 
> 赞同：1
> 
> 时间：2012-06-20T09:36:20.663
> 
> 标签：c#, ftp, download

```
string HostName = System.Configuration.ConfigurationSettings.AppSettings["HostName"];
string strUser = System.Configuration.ConfigurationSettings.AppSettings["BasicAuthenticationUser"];
string strPWD = System.Configuration.ConfigurationSettings.AppSettings["BasicAuthenticationPWD"];

strFile = "9788191073072.zip";

FtpWebRequest request = (FtpWebRequest)WebRequest.Create(HostName + strFile);
request.Method = WebRequestMethods.Ftp.DownloadFile;
request.Credentials = new NetworkCredential(strUser, strPWD);
request.UsePassive = true;
request.UseBinary = true;
request.KeepAlive = false;

FtpWebResponse response = (FtpWebResponse)request.GetResponse();
Stream responseStream = response.GetResponseStream();

Response.AddHeader("content-disposition", "attachment;filename=" + strFile);

byte[] buffer = new byte[2 * 1024];
int read;

while ((read = responseStream.Read(buffer, 0, buffer.Length)) > 0) { Response.OutputStream.Write(buffer, 0, read); }

responseStream.Close();
response.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:35:13.970

```
string HostName = System.Configuration.ConfigurationSettings.AppSettings["HostName"];
string strUser = System.Configuration.ConfigurationSettings.AppSettings["BasicAuthenticationUser"];
string strPWD = System.Configuration.ConfigurationSettings.AppSettings["BasicAuthenticationPWD"];

FtpWebRequest request = (FtpWebRequest)WebRequest.Create(HostName + strFile);
request.Method = WebRequestMethods.Ftp.DownloadFile;
request.Credentials = new NetworkCredential(strUser, strPWD);
request.UsePassive = true;
request.UseBinary = true;
request.KeepAlive = false;

FtpWebResponse response = (FtpWebResponse)request.GetResponse();
Stream responseStream = response.GetResponseStream();

Response.ContentType = "application/octet-stream";
Response.AddHeader("content-disposition", "attachment;filename=" + _AudiobookName + ".zip");
int read;
byte[] buffer = new byte[2 * 1024];
while ((read = responseStream.Read(buffer, 0, buffer.Length)) > 0)
{
    Response.OutputStream.Write(buffer, 0, read);
    Response.Flush();
}
responseStream.Close();
response.Close();
Response.Flush();
Response.End(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:42:51.743

如果没有任何真正的细节可以继续，这可能必须在生产服务器上进行 Mime 类型设置。

这也可能是由于您和服务器之间可能存在的透明代理过滤策略。

同样，您确实应该通过 Fiddler 进行细粒度跟踪，以查看服务器真正返回的内容以及请求是否成功完成。

假设这是一个 IIS 服务器，查看服务器事件日志还可以告诉您应用程序池是否正在崩溃并重新启动，这看起来好像没有任何问题但响应不正确。

# mysql - 用于数据库模式关系和常规关系的工具

> ID：11116700
> 
> 赞同：1
> 
> 时间：2012-06-20T09:36:24.027
> 
> 标签：mysql, sql-server, database

你使用什么工具来绘制数据库关系图，例如表、存储过程、函数？无论是商业的还是免费的。

我对 SQL Server 和 MySql 都感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:37:04.720

管理工作室和 mysql 工作台。

如果你对图表不感兴趣，你可以使用 heidisql for mysql

mssql 有很多功能，你会越发现惊奇。您可以选择一个查询，右键单击并单击编辑，然后为该选择打开查询生成器。这些非常有用，以至于我对地摊粉丝很感兴趣。

# linux - 检查 VT-x 是否已激活而无需在 Linux 中重新启动？

> ID：11116704
> 
> 赞同：45
> 
> 时间：2012-06-20T09:36:32.997
> 
> 标签：linux, virtualization, virtualbox

我有一台配备 Intel Core i5 M 450 @ 2.40GHz 的笔记本电脑，它显然有 VT-x 但没有 VT-d。我有 Ubuntu 12.04 32 位，但希望在其上运行基于虚拟 64 位终端的 Linux。我如何知道 BIOS 是否已激活此 VT-x 功能而无需重新启动？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-20T11:01:58.310

您可以使用*msr-tools中的**rdmsr*来读取寄存器*IA32_FEATURE_CONTROL*（地址*0x3a*）。为此，必须加载内核模块*msr 。*

 ***在大多数 Linux 系统上：

```
sudo modprobe msr
sudo rdmsr 0x3a 
```

值`3`和`5`意味着它已被激活。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-07-31T13:17:50.357

您可以使用

```
sudo kvm-ok 
```

来自[cpu-checker](https://launchpad.net/cpu-checker)。在逻辑最复杂的 Intel 上，kvm-ok[检查](https://bazaar.launchpad.net/~cpu-checker-dev/cpu-checker/trunk/view/head:/kvm-ok#L78)是否设置了（锁定位）的第 0`rdmsr 0x3a`位，也必须设置第 2 位（允许 virt 在 SMX 模式之外使用，与可信引导有关） . 如果 的输出`rdmsr 0x3a`不是**1**或**3**，您将能够使用 kvm。如有必要，kvm 将设置 msr 的第 2 位，我希望 virtualbox 和其余的具有相同的逻辑。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-10-19T08:44:57.600

安装 cpu-checker 并运行“kvm-ok”

如果 CPU 已启用，您应该会看到如下内容：

```
INFO: /dev/kvm exists
KVM acceleration can be used 
```

否则

```
INFO: /dev/kvm does not exist
HINT:   sudo modprobe kvm_intel
INFO: Your CPU supports KVM extensions
INFO: KVM (vmx) is disabled by your BIOS
HINT: Enter your BIOS setup and enable Virtualization Technology (VT),
   and then hard poweroff/poweron your system
KVM acceleration can NOT be used 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-07-31T14:30:30.953

您可以使用：

```
sudo apt-get update
sudo apt-get install cpu-checker
kvm-ok 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-06-20T12:08:04.300

在linux中，您可以检查cpuinfo：

```
cat /proc/cpuinfo| egrep "vmx|svm" 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-07-10T19:22:43.470

我发现 scai 的答案在我的 AMD Ryzen 系统上不起作用。

然而，这对我来说非常有效，即使在英特尔上也是如此：

```
if systool -m kvm_amd -v &> /dev/null || systool -m kvm_intel -v &> /dev/null ; then
    echo "AMD-V / VT-X is enabled in the BIOS/UEFI."
else
    echo "AMD-V / VT-X is not enabled in the BIOS/UEFI"
fi 
```

（在大多数发行版`systool`的包中都可以找到。）`sysfsutils`

对于 Intel 的 VT-D / AMD 的 IOMMU，我想出了这个解决方案：

```
if compgen -G "/sys/kernel/iommu_groups/*/devices/*" > /dev/null; then
    echo "AMD's IOMMU / Intel's VT-D is enabled in the BIOS/UEFI."
else
    echo "AMD's IOMMU / Intel's VT-D is not enabled in the BIOS/UEFI"
fi 
```

（如果没有设置 iommu 内核参数，它甚至对我有用。）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-17T13:07:33.087

确认在 BIOS 中启用 Vt-D 的简单方法是通过 Linux 系统。如果在 BIOS 中启用了 VT-D `Iommu=on`，`grub.cfg`那么会自动创建以下文件夹结构来保存虚拟设备。

`/sys/kernel/iommu_groups/0/devices/0000:00:00.0`

而如果未配置/启用选项 VT-D 或 Iommu 之一，则不会创建上述文件夹结构。此行为在 CentOS 7.4 和 Ubuntu 中得到确认。希望这种行为对于其他操作系统也是类似的，但这需要得到确认。***

# ios - 旋转 UIKit 元素而不弄乱框架

> ID：11116705
> 
> 赞同：2
> 
> 时间：2012-06-20T09:36:35.647
> 
> 标签：ios, rotation, slider, uikit

我需要通过其超类属性转换来旋转 UISlider，方法是通过以下方式更改旋转矩阵：

```
self.slider.transform = CGAffineTransformMakeRotation(45); 
```

在 UIView 的文档中，我可以看到一条警告：

> 警告 如果此属性不是恒等变换，则 frame 属性的值未定义，因此应被忽略。

所以，问题是，我怎样才能在不弄乱框架矩形的情况下旋转标准 UIKit 元素？（我理解为未定义，他们的意思是，完全搞砸了，不仅仅是放大到足以包含整个旋转对象）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-26T06:53:27.433

基本上，当您在视图上设置变换时，您需要使用 bounds 和 center 属性来设置其大小和位置。在视图上设置框架时，UIKit 实际上会在您的视图上设置边界/中心/变换。

因此，无需设置转换，您就可以像这样设置框架。

```
self.slider.frame = CGRectMake(10, 20, 300, 50); 
```

使用转换时，您必须这样做：

```
self.slider.transform = CGAffineTransformMakeRotation(45);
self.slider.bounds = CGRectMake(0, 0, 300, 50);
self.slider.center = CGRectMake(10, 20, 300, 50); 
```

# ios - 是否有可能我们有一些中间拨号屏幕 iphone？

> ID：11116706
> 
> 赞同：-1
> 
> 时间：2012-06-20T09:36:44.867
> 
> 标签：ios, iphone, phone-call

我正在使用此代码电话从 iPhone 直接呼叫特定号码。我的问题是是否有可能有一些中间拨号屏幕，所以当我单击此按钮时，它会通向该屏幕，通过单击呼叫按钮，我可以进行call.Dial 屏幕
应该像图像。
![](../Images/e4b773b86a96ce29c11b440bee4da4bf.png)

```
-(IBAction)call{

    NSString *StrNumber = @"15553451290";
    [[UIApplication sharedApplication] ![enter image description here][1]openURL:[NSURL URLWithString:[NSString stringWithFormat:@"tel:%@",StrNumber]]];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:47:10.433

你可以通过使用icarousel来做到这一点。只需创建临时视图，其中包含带有数字和调用符号的按钮集合。然后为按钮定义一个函数来加载视图，如弹出和弹出，你可以执行其余的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:40:10.470

是的，有可能。您将必须创建一个带有数字按钮和呼叫按钮的新屏幕。您必须通过这些数字/按钮获取电话号码。并得到结果全数并在上述函数中使用。当用户按下呼叫按钮时，该函数将被调用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-20T09:53:52.957

没有@zink。我认为这个功能在 ios 中不可用。您可以像这样制作自定义视图，然后从那里您可以放置​​ [[UIApplication sharedApplication] ![enter image description here][1]openURL:[NSURL URLWithString:[NSString stringWithFormat:@"tel:%@",StrNumber] ]];

# java - RESTful Web 应用程序是什么意思？

> ID：11116708
> 
> 赞同：9
> 
> 时间：2012-06-20T09:36:51.750
> 
> 标签：java, php, web-services, rest

Web 服务是其他程序可以通过 Web (Http) 访问的功能。澄清一点，当您在 PHP 中创建一个输出 HTML 的网站时，它的目标是浏览器，并且通过扩展，人类正在浏览器中阅读页面。Web 服务不是针对人类，而是针对其他程序。

1.  SOAP 和 REST 是创建 WebServices 的两种方式。如果我错了，请纠正我？
2.  我可以通过哪些其他方式创建 WebService？
3.  完全 RESTful Web 应用程序是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T10:35:43.933

1.  正确的
2.  W3C 将“ [Web 服务](https://en.wikipedia.org/wiki/Web_service)”定义为“旨在支持网络上可互操作的机器对机器交互的软件系统”。
3.  完全 RESTful 服务是遵循Roy Fielding 的论文《[架构风格和基于网络的软件架构设计》中列出的](http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm)*所有*架构约束的服务。读起来很长，有很多解释。熟悉[理查森成熟度模型](http://martinfowler.com/articles/richardsonMaturityModel.html)是一个好的开始。**注意：**大多数声称是 RESTful 的 Web 服务在该模型中仅处于[第 2 级。](http://martinfowler.com/articles/richardsonMaturityModel.html#level2)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T23:37:23.523

我认为要了解什么是完全 RESTful 服务，您必须了解 RESTful 服务和标准 Web 服务之间的区别。Oracle 在 JEE6 教程中很好地解释了这一点：

> NonRESTful WebServices（在 Java 中为 JAX-WS）：大型 Web 服务使用遵循简单对象访问协议 (SOAP) 标准的 XML 消息，这是一种定义消息架构和消息格式的 XML 语言。这样的系统通常包含由服务提供的操作的机器可读描述，用 Web 服务描述语言 (WSDL) 编写，WSDL 是一种用于在语法上定义接口的 XML 语言。SOAP 消息格式和 WSDL 接口定义语言已得到广泛采用。许多开发工具（例如 NetBeans IDE）可以降低开发 Web 服务应用程序的复杂性。基于 SOAP 的设计必须包括以下元素。
> 
> ■ 必须建立正式合同来描述 Web 服务提供的接口。WSDL 可用于描述合同的细节，其中可能包括消息、操作、绑定和 Web 服务的位置。您还可以在 JAX-WS 服务中处理 SOAP 消息，而无需发布 WSDL。
> 
> ■ 架构必须解决复杂的非功能性需求。许多 Web 服务规范解决了这些要求并为它们建立了一个通用词汇表。示例包括事务、安全、寻址、信任、协调等。
> 
> ■ 架构需要处理异步处理和调用。在这种情况下，标准提供的基础设施（如 Web 服务可靠消息传递 (WSRM)）和 API（如 JAX-WS）及其客户端异步调用支持可以开箱即用。
> 
> RESTful Web 服务（在 Java 中作为 JAX-RS） 在 Java EE 6 中，JAX-RS 为 Representational State Transfer (RESTful) Web 服务提供了功能。REST 非常适合基本的即席集成场景。RESTful Web 服务通常比基于 SOAP 的服务更好地与 HTTP 集成，不需要 XML 消息或 WSDL 服务-API 定义。Project Jersey 是 JAX-RS 规范的生产就绪参考实现。Jersey 实现了对 JAX-RS 规范中定义的注释的支持，使开发人员可以轻松地使用 Java 和 Java 虚拟机 (JVM) 构建 RESTful Web 服务。
> 
> Web 服务的类型 因为 RESTful Web 服务使用现有的著名 W3C 和 Internet 工程任务组 (IETF) 标准（HTTP、XML、URI、MIME），并且具有允许使用最少工具构建服务的轻量级基础架构，因此开发 RESTful Web服务价格低廉，因此采用的门槛非常低。您可以使用 NetBeans IDE 等开发工具来进一步降低开发 RESTful Web 服务的复杂性。当满足以下条件时，RESTful 设计可能是合适的。
> 
> ■ Web 服务是完全无状态的。一个很好的测试是考虑交互是否可以在服务器重新启动后继续存在。
> 
> ■ 可以利用缓存基础架构来提高性能。如果 Web 服务返回的数据不是动态生成的并且可以缓存，则可以利用 Web 服务器和其他中介固有的缓存基础结构来提高性能。但是，开发人员必须小心，因为此类缓存仅限于大多数服务器的 HTTP GET 方法。
> 
> ■ 服务生产者和服务消费者对传递的上下文和内容有相互理解。因为没有正式的方式来描述 Web 服务接口，所以双方必须就描述正在交换的数据的模式以及有意义地处理它的方式达成一致。在现实世界中，大多数将服务公开为 RESTful 实现的商业应用程序还分发所谓的增值工具包，这些工具包用流行的编程语言向开发人员描述接口。
> 
> ■ 带宽特别重要，需要加以限制。REST 对于配置有限的设备特别有用，例如 PDA 和移动电话，必须限制 XML 有效负载上的标头和附加层 SOAP 元素的开销。
> 
> ■ 使用 RESTful 风格可以轻松实现 Web 服务交付或聚合到现有网站。开发人员可以使用诸如 JAX-RS 和带 XML 的异步 JavaScript (AJAX) 之类的技术以及诸如 Direct Web Remoting (DWR) 之类的工具包来使用其 Web 应用程序中的服务。无需从头开始，服务可以使用 XML 公开并由 HTML 页面使用，而无需显着重构现有的网站架构。现有的开发人员将更有效率，因为他们正在添加他们已经熟悉的东西，而不是必须从头开始使用新技术。
> 
> 决定使用哪种类型的 Web 服务
> 
> 基本上，您会希望使用 RESTful Web 服务进行 Web 集成，并在具有高级服务质量 (QoS) 要求的企业应用程序集成场景中使用大型 Web 服务。
> 
> ■ WebServices：解决企业计算中常见的高级QoS 要求。[..]
> 
> ■ RESTfull：使编写应用 REST 样式的部分或全部约束以在应用程序中引入所需属性的 Web 应用程序变得更容易，例如松散耦合（在不破坏现有客户端的情况下更容易发展服务器）、可伸缩性（从小处着手）和增长）和架构简单性（使用现成的组件，例如代理或 HTTP 路由器）。您会选择将 JAX-RS 用于您的 Web 应用程序，因为许多类型的客户端更容易使用 RESTful Web 服务，同时使服务器端能够发展和扩展。客户可以选择使用服务的部分或全部方面，并将其与其他基于 Web 的服务混合。**

# emacs - 在组织模式捕获模板中使用属性

> ID：11116712
> 
> 赞同：10
> 
> 时间：2012-06-20T09:36:58.427
> 
> 标签：emacs, org-mode

[`org-mode`手册中提到了一些可以控制捕获模板行为的](http://orgmode.org/manual/Template-elements.html#Template-elements)属性，但我不确定如何使用它们。手册本身不包含任何使用它们的模板示例，而且一点谷歌搜索也没有发现任何东西。

我正在尝试特别使用其中的两个属性：`:kill-buffer`或者`:prepend`（如果它适用于表格），或者我正在尝试为在表格*顶部*`:table-line-pos.`添加新行的书写日志设置模板。

 *我首先尝试的是，将它们视为标签，是这样的：

```
("w" "Writing log" table-line (file "~/Dropbox/workrecord.org")
 "|%U|%A||%?|" :prepend:kill-buffer) 
```

但是两个财产都没有。如果我只包含`:killbuffer`. 如果我需要使用`:table-line-pos`，了解包含参数的语法会增加难度`I+1`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T20:37:49.740

您需要为`:kill-buffer`,`:prepend`和朋友分配一个值。

你的代码片段

```
("w" "Writing log" table-line (file "~/Dropbox/workrecord.org")
 "|%U|%A||%?|" :prepend:kill-buffer) 
```

在语法上不正确。它应该是：

```
("w" "Writing log" table-line (file "~/Dropbox/workrecord.org")
 "|%U|%A||%?|" :prepend t :kill-buffer t) 
```

这样捕获内容将被添加并终止缓冲区（如果在调用捕获之前它不存在。）

如果这不起作用，请尝试设置`:table-line-pos`为“II-3”之类的合理值，如手册中所示（Org 7.8.11）。双引号在这里很重要，它们意味着属性的值`:table-line-pos`是一个字符串。

高温下，*

# java - Cassandra Astyanax 文档

> ID：11116714
> 
> 赞同：2
> 
> 时间：2012-06-20T09:36:59.070
> 
> 标签：java, cassandra, astyanax

我正在尝试将 Astyanax 用于带有 Java 的 Cassandra。[我在https://github.com/Netflix/astyanax/wiki/Getting-Started](https://github.com/Netflix/astyanax/wiki/Getting-Started)尝试了这个例子。我有我刚刚从这个链接复制的代码：

```
package def;

import com.netflix.astyanax.AstyanaxContext;
import com.netflix.astyanax.Keyspace;
import com.netflix.astyanax.MutationBatch;
import com.netflix.astyanax.connectionpool.NodeDiscoveryType;
import com.netflix.astyanax.connectionpool.OperationResult;
import com.netflix.astyanax.connectionpool.exceptions.ConnectionException;
import com.netflix.astyanax.connectionpool.impl.ConnectionPoolConfigurationImpl;
import com.netflix.astyanax.connectionpool.impl.CountingConnectionPoolMonitor;
import com.netflix.astyanax.impl.AstyanaxConfigurationImpl;
import com.netflix.astyanax.model.Column;
import com.netflix.astyanax.model.ColumnFamily;
import com.netflix.astyanax.model.ColumnList;
import com.netflix.astyanax.serializers.StringSerializer;
import com.netflix.astyanax.thrift.ThriftFamilyFactory;

public class sample {

    public static void main(String[] args) throws Exception{
    AstyanaxContext<Keyspace> context = new AstyanaxContext.Builder()
    .forCluster("Test Cluster")
    .forKeyspace("KeyspaceName")
    .withAstyanaxConfiguration(new AstyanaxConfigurationImpl()      
        .setDiscoveryType(NodeDiscoveryType.NONE)
    )
    .withConnectionPoolConfiguration(new ConnectionPoolConfigurationImpl("MyConnectionPool")
        .setPort(9160)
        .setMaxConnsPerHost(10)
        .setSeeds("127.0.0.1:9160")
    )
    .withConnectionPoolMonitor(new CountingConnectionPoolMonitor())
    .buildKeyspace(ThriftFamilyFactory.getInstance());

    context.start();
    Keyspace keyspace = context.getEntity();

    ColumnFamily<String, String> CF_USER_INFO =
              new ColumnFamily<String, String>(
                "Standard1",              // Column Family Name
                StringSerializer.get(),   // Key Serializer
                StringSerializer.get());  // Column Serializer

    // Inserting data
    MutationBatch m = keyspace.prepareMutationBatch();

    m.withRow(CF_USER_INFO, "acct1234")
      .putColumn("firstname", "john", null)
      .putColumn("lastname", "smith", null)
      .putColumn("address", "555 Elm St", null)
      .putColumn("age", 30, null);

    m.withRow(CF_USER_INFO, "acct1234")
      .incrementCounterColumn("loginCount", 1);

    try {
      OperationResult<Void> result = m.execute();
    } catch (ConnectionException e) {
    }

    System.out.println("completed the task!!!");

    OperationResult<ColumnList<String>> result =
              keyspace.prepareQuery(CF_USER_INFO)
                .getKey("Key1")
                .execute();
            ColumnList<String> columns = result.getResult();

            // Lookup columns in response by name 
            int age        = columns.getColumnByName("age").getIntegerValue();
            long counter   = columns.getColumnByName("loginCount").getLongValue();
            String address = columns.getColumnByName("address").getStringValue();

            // Or, iterate through the columns
            for (Column<String> c : result.getResult()) {
              System.out.println(c.getName());
            }
    }

} 
```

但是当我运行它时，我遇到了一个异常：

```
log4j:WARN No appenders could be found for logger (com.netflix.astyanax.connectionpool.impl.ConnectionPoolMBeanManager).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
completed the task!!!
Exception in thread "main" com.netflix.astyanax.connectionpool.exceptions.BadRequestException: BadRequestException: [host=127.0.0.1(127.0.0.1):9160, latency=0(0), attempts=1] InvalidRequestException(why:Keyspace KeyspaceName does not exist)
    at com.netflix.astyanax.thrift.ThriftConverter.ToConnectionPoolException(ThriftConverter.java:159)
    at com.netflix.astyanax.thrift.ThriftSyncConnectionFactoryImpl$1.execute(ThriftSyncConnectionFactoryImpl.java:119)
    at com.netflix.astyanax.connectionpool.impl.AbstractExecuteWithFailoverImpl.tryOperation(AbstractExecuteWithFailoverImpl.java:52)
    at com.netflix.astyanax.connectionpool.impl.AbstractHostPartitionConnectionPool.executeWithFailover(AbstractHostPartitionConnectionPool.java:229)
    at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$1.execute(ThriftColumnFamilyQueryImpl.java:180)
    at def.sample.main(sample.java:68)
Caused by: InvalidRequestException(why:Keyspace KeyspaceName does not exist)
    at org.apache.cassandra.thrift.Cassandra$set_keyspace_result.read(Cassandra.java:4874)
    at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:78)
    at org.apache.cassandra.thrift.Cassandra$Client.recv_set_keyspace(Cassandra.java:489)
    at org.apache.cassandra.thrift.Cassandra$Client.set_keyspace(Cassandra.java:476)
    at com.netflix.astyanax.thrift.ThriftSyncConnectionFactoryImpl$1.execute(ThriftSyncConnectionFactoryImpl.java:109)
    ... 4 more 
```

谁能告诉我这有什么问题？也没有适当的文档可用于此。所以，你能不能帮帮我。甚至给我一些链接，我可以在其中获得更多示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T04:25:58.147

```
why:Keyspace KeyspaceName does not exist 
```

上面的错误是不言自明的。当应用程序连接到 localhost 时，keyspace 不存在。因此，请确保您创建了密钥空间，然后重新运行您的应用程序。

* * *

从评论中，我认为您想对此进行[调查](https://github.com/Netflix/astyanax/issues/9)。摘自线程，

> Keyspace 仅用作客户端，不会在 cassandra 上创建 keyspace 或列族。您可以使用 AsytanaxContext.Builder 构建一个 Cluster 接口，通过它您可以实际创建键空间和列族。

此[链接](https://github.com/Netflix/astyanax/blob/master/src/test/java/com/netflix/astyanax/thrift/ThrifeKeyspaceImplTest.java)中的此单元测试应为您提供有关如何在集群中创建密钥空间的足够信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:04:57.677

您编写的代码示例是为了与 localhost 上 127.0.0.1 上正在运行的 Cassandra 服务器实例进行通信。如果您有 Cassandra 在其他地方运行，或者根本没有，那么您需要在执行代码之前安装并设置该服务器环境。

# assembly - 如何从 CUDA C 调用 ptx 函数？

> ID：11116722
> 
> 赞同：3
> 
> 时间：2012-06-20T09:37:29.243
> 
> 标签：assembly, cuda, inline-assembly

我正在尝试找到一种从 CUDA C 调用 ptx 函数 (.func) 的方法。假设我有一个这样的 ptx 函数：

```
.func (.reg .s32 %res) inc_ptr ( .reg .s32 %ptr, .reg .s32 %inc )
{
    add.s32 %res, %ptr, %inc;
    ret;
} 
```

我知道我可以像这样从 ptx 调用它：

```
call (%d), inc_ptr, (%s, %d); 
```

但我不知道如何从 CUDA C 调用它。我知道我可以使用 asm() 内联 ptx 程序集，但我还没有找到内联函数的方法。希望有人能帮忙！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-17T11:32:02.270

这可以使用 CUDA 5.0 引入的单独编译工具来完成。我不相信有办法在“完整”程序编译模式或 CUDA 5.0 之前的工具包版本或 3.1 之前的 PTX 版本中执行此操作。

用一个工作示例来说明如何做到这一点可能是最容易的。让我们从一个用于递增指针的简单 PTX 函数开始，类似于您的示例：

```
.version 3.1
.target sm_30
.address_size 32
.visible .func inc_ptr(.param .b32 ptr, .param .b32 inc)
{
    .reg .s32   %r<6>;
    ld.param.u32 %r1, [ptr];
    ld.param.u32 %r2, [inc];
    ld.u32 %r3, [%r1];
    ld.u32 %r4, [%r3];
    add.s32 %r5, %r4, %r2;
    st.u32  [%r3], %r5;
    ret;
} 
```

这可以使用编译成一个可重定位的设备对象`ptxas`，然后打包到一个胖二进制容器文件中。后一步似乎很关键。默认`ptxas`输出只是一个可重定位的`elf`对象，没有产生 fatbinary 容器。似乎 nvcc 运行的设备代码链接阶段（至少在 CUDA 5 中）期望所有设备代码都存在于 fatbinary 容器中。否则链接将失败。结果如下所示：

```
$ ptxas -arch=sm_30 -c -o inc_ptr.gpu.o inc_ptr.ptx
$ fatbinary -arch=sm_30 -create inc_ptr.fatbin -elf inc_ptr.gpu.o 
$ cuobjdump -sass inc_ptr.fatbin 

Fatbin elf code:
================
arch = sm_30
code version = [1,6]
producer = <unknown>
host = mac
compile_size = 32bit

    code for sm_30
        Function : inc_ptr
    /*0008*/     /*0x0040dc8580000000*/     LD R3, [R4];
    /*0010*/     /*0x00301c8580000000*/     LD R0, [R3];
    /*0018*/     /*0x14001c0348000000*/     IADD R0, R0, R5;
    /*0020*/     /*0x00301c8590000000*/     ST [R3], R0;
    /*0028*/     /*0x00001de790000000*/     RET;
    /*0030*/     /*0x00001de440000000*/     NOP CC.T;
    /*0038*/     /*0x00001de440000000*/     NOP CC.T;
    /*0040*/     /*0xe0001de74003ffff*/     BRA 0x40;
    /*0048*/     /*0x00001de440000000*/     NOP CC.T;
    /*0050*/     /*0x00001de440000000*/     NOP CC.T;
    /*0058*/     /*0x00001de440000000*/     NOP CC.T;
    /*0060*/     /*0x00001de440000000*/     NOP CC.T;
    /*0068*/     /*0x00001de440000000*/     NOP CC.T;
    /*0070*/     /*0x00001de440000000*/     NOP CC.T;
    /*0078*/     /*0x00001de440000000*/     NOP CC.T;
        ........................ 
```

您可以看到 fatbinary 包含来自组装 PTX 的微码。准备好设备函数 fatbin 后，您可以在 CUDA C 代码中执行以下操作：

```
extern "C" __device__ void inc_ptr(int* &ptr, const int inc);

__global__
void memsetkernel(int *inout, const int val, const int N)
{
    int stride = blockDim.x * gridDim.x;
    int *p = inout;
    inc_ptr(p, threadIdx.x + blockDim.x*blockIdx.x);

    for(; p < inout+N; inc_ptr(p, stride)) *p = val;
}  

int main(void)
{
    const int n=10;
    int *p;
    cudaMalloc((void**)&p, sizeof(int)*size_t(n));
    memsetkernel<<<1,32>>>(p, 5, n);

    return 0;
} 
```

在单独编译模式下，设备代码工具链将尊重`extern`声明，并且（只要您控制符号修改），设备函数 fatbinary 可以与其他设备和主机代码链接以生成最终对象：

```
$ nvcc -arch=sm_30 -Xptxas="-v" -dlink -o memset.out inc_ptr.fatbin memset_kernel.cu 

ptxas info    : 0 bytes gmem
ptxas info    : Compiling entry function '_Z12memsetkernelPiii' for 'sm_30'
ptxas info    : Function properties for _Z12memsetkernelPiii
    8 bytes stack frame, 0 bytes spill stores, 0 bytes spill loads
ptxas info    : Used 20 registers, 332 bytes cmem[0]

$ cuobjdump -sass memset.out 

Fatbin elf code:
================
arch = sm_30
code version = [1,6]
producer = <unknown>
host = mac
compile_size = 32bit
identifier = inc_ptr.fatbin memset_kernel.cu 

    code for sm_30
        Function : _Z12memsetkernelPiii
    /*0008*/     /*0x10005de428004001*/     MOV R1, c [0x0] [0x44];
    /*0010*/     /*0x20105d034800c000*/     IADD R1, R1, -0x8;
    /*0018*/     /*0x00019de428004005*/     MOV R6, c [0x0] [0x140];
    /*0020*/     /*0x10101c034800c000*/     IADD R0, R1, 0x4;
    /*0028*/     /*0x8400dc042c000000*/     S2R R3, SR_Tid_X;
    /*0030*/     /*0x90041c0348004000*/     IADD R16, R0, c [0x0] [0x24];
    /*0038*/     /*0x94001c042c000000*/     S2R R0, SR_CTAid_X;
    /*0048*/     /*0xd0009de428004000*/     MOV R2, c [0x0] [0x34];
    /*0050*/     /*0x91045d0348004000*/     IADD R17, R16, -c [0x0] [0x24];
    /*0058*/     /*0x40011de428000000*/     MOV R4, R16;
    /*0060*/     /*0xa0015ca320064000*/     IMAD R5, R0, c [0x0] [0x28], R3;
    /*0068*/     /*0x01119c85c8000000*/     STL [R17], R6;
    /*0070*/     /*0xa0209ca350004000*/     IMUL R2, R2, c [0x0] [0x28];
    /*0078*/     /*0x0001000710000000*/     JCAL 0x0;
    /*0088*/     /*0x0110dc85c0000000*/     LDL R3, [R17];
    /*0090*/     /*0x20001de428004005*/     MOV R0, c [0x0] [0x148];
    /*0098*/     /*0x00049c4340004005*/     ISCADD R18, R0, c [0x0] [0x140], 0x2;
    /*00a0*/     /*0x4831dc031b0e0000*/     ISETP.GE.U32.AND P0, pt, R3, R18, pt;
    /*00a8*/     /*0x000001e780000000*/     @P0 EXIT;
    /*00b0*/     /*0x1004dde428004005*/     MOV R19, c [0x0] [0x144];
    /*00b8*/     /*0x0034dc8590000000*/     ST [R3], R19;
    /*00c8*/     /*0x40011de428000000*/     MOV R4, R16;
    /*00d0*/     /*0x08015de428000000*/     MOV R5, R2;
    /*00d8*/     /*0x0001000710000000*/     JCAL 0x0;
    /*00e0*/     /*0x0110dc85c0000000*/     LDL R3, [R17];
    /*00e8*/     /*0x4831dc03188e0000*/     ISETP.LT.U32.AND P0, pt, R3, R18, pt;
    /*00f0*/     /*0x000001e74003ffff*/     @P0 BRA 0xb8;
    /*00f8*/     /*0x00001de780000000*/     EXIT;
    /*0100*/     /*0xe0001de74003ffff*/     BRA 0x100;
    /*0108*/     /*0x00001de440000000*/     NOP CC.T;
    /*0110*/     /*0x00001de440000000*/     NOP CC.T;
    /*0118*/     /*0x00001de440000000*/     NOP CC.T;
    /*0120*/     /*0x00001de440000000*/     NOP CC.T;
    /*0128*/     /*0x00001de440000000*/     NOP CC.T;
    /*0130*/     /*0x00001de440000000*/     NOP CC.T;
    /*0138*/     /*0x00001de440000000*/     NOP CC.T;
        .....................................

        Function : inc_ptr
    /*0008*/     /*0x0040dc8580000000*/     LD R3, [R4];
    /*0010*/     /*0x00301c8580000000*/     LD R0, [R3];
    /*0018*/     /*0x14001c0348000000*/     IADD R0, R0, R5;
    /*0020*/     /*0x00301c8590000000*/     ST [R3], R0;
    /*0028*/     /*0x00001de790000000*/     RET;
    /*0030*/     /*0x00001de440000000*/     NOP CC.T;
    /*0038*/     /*0x00001de440000000*/     NOP CC.T;
    /*0040*/     /*0xe0001de74003ffff*/     BRA 0x40;
    /*0048*/     /*0x00001de440000000*/     NOP CC.T;
    /*0050*/     /*0x00001de440000000*/     NOP CC.T;
    /*0058*/     /*0x00001de440000000*/     NOP CC.T;
    /*0060*/     /*0x00001de440000000*/     NOP CC.T;
    /*0068*/     /*0x00001de440000000*/     NOP CC.T;
    /*0070*/     /*0x00001de440000000*/     NOP CC.T;
    /*0078*/     /*0x00001de440000000*/     NOP CC.T;
        ........................ 
```

工具链可能还有其他技巧可以实现这一点，但这种方法确实有效。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T10:12:49.453

据我所知，CUDA C支持asm，安装cuda工具包后在doc目录中有一个doc。

# embed - 具有后备功能的 HTML5 视频标签

> ID：11116730
> 
> 赞同：2
> 
> 时间：2012-06-20T09:37:51.200
> 
> 标签：embed, html5-video, flv

我正在寻找一种在 html 中嵌入视频和音频的解决方案。新的视频标签支持 .ogg 和 .mp4，但有 .flv 和其他格式的备用解决方案吗？
例如，如果我想嵌入一个 .ogg，它会检查是否支持 html5，如果不支持，它会使用回退。如果我想嵌入一个 .flv 是使用后备。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T12:58:05.327

如果浏览器无法解释视频标签，html5 标签支持回退到任何元素。这里是一个回退到 Flash 文件的快速示例。

```
<video controls width="500">  
  <!-- if Firefox -->  
  <source src="video.ogg" type="video/ogg" />  
  <!-- if Safari/Chrome-->  
  <source src="video.mp4" type="video/mp4" />  

  <!-- If the browser doesn't understand the <video> element, then reference a Flash file. -->  
  <embed src="your_flash_file" type="application/x-shockwave-flash" width="1024" height="798" allowscriptaccess="always" allowfullscreen="true"></embed>  
</video> 
```

您可以使用任何 html 元素来代替 embed 标记（fe 一个带有文本“您的浏览器无法解释 html5 ..”的跨度或图片或任何您想要的东西）。基本上，html5 浏览器采用他们可以播放的视频源，而非 html5 浏览器忽略视频和源标签，并在最后采用后备元素。

# javascript - GWT、DOM、Internet Explorer 中的新窗口

> ID：11116731
> 
> 赞同：0
> 
> 时间：2012-06-20T09:37:51.610
> 
> 标签：javascript, gwt, dom, new-window

我正在尝试使用 GWT 创建新窗口，如下所示：[https ://stackoverflow.com/a/4205058/898588](https://stackoverflow.com/a/4205058/898588)

这适用于 FF、Chrome，但不适用于 IE（在我的情况下为 IE9）。我在开发中看到异常。模式：

**（空）：DOM 异常：HIERARCHY_REQUEST_ERR (3)**

所以，这个字符串：

```
bdElement.getOwnerDocument().getElementById("mainbody").appendChild(config.getElement()); 
```

抛出此异常。

我试过了：

```
bdElement.appendChild(config.getElement()); 
```

但没有成功。

如何让它在 IE 中运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:57:24.540

更具体地说，您只需要使用 setInnerHTML() 而不是 appendChild()，因此据我所知，以下代码在 IE9 和 Chrome 中也可以正常工作：

```
bdElement.getOwnerDocument().getElementById("mainbody").setInnerHTML(config.getElement().getString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:45:23.717

找到了解决办法：

`bdElement.getFirstChildElement().setInnerHTML(config.getElement().getString());`

这适用于 IE、Opera、Chrome、FF

# javascript - 如何从回调中访问成员变量？

> ID：11116734
> 
> 赞同：0
> 
> 时间：2012-06-20T09:37:59.423
> 
> 标签：javascript, jquery-ui, backbone.js

我有一个使用 jQuery UI 按钮的简单 Backbone 视图。

例如，我有一个删除按钮，它应该删除模型（和视图）。我设法使用以下方法将按钮添加到渲染方法中的视图：

```
var self = this;
$(this.el).find("#deleteButton").button({text : false});
$(this.el).find("#deleteButton").bind( "click", self.deleteView); 
```

然后我在视图中有相应的方法：

```
deleteView: function(){
    console.log(this.model);
} 
```

“deleteView”方法被调用，但它会在控制台打印“undefined”，因为“this”指的是按钮而不是视图。用“self”替换“this”也不起作用。此外，将模型或视图作为参数传递给方法似乎不起作用，因为参数将是点击事件。

用主干处理此类回调的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:40:21.827

函数的上下文在绑定为 jQuery 事件时会发生变化。

使用另一个函数，您在其中使用`self`或[`jQuery.proxy`](http://api.jquery.com/jQuery.proxy/)。
通过以下方式维护上下文的示例：http `$.proxy`: [//jsfiddle.net/bAeQZ/](http://jsfiddle.net/bAeQZ/)

```
var self = {
    deleteView: function(){console.log(this.model)},
    model: '...some model...'
};
$(document).click($.proxy(self.deleteView, self));​
// Alternative without $.proxy:
$(document).click(function(){self.deleteView();});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:47:13.757

您可能想改用`backbone.view`events 属性。这是建议的方法，而不是在渲染期间手动使用 jQuery 将事件绑定到子元素。 [http://documentcloud.github.com/backbone/#View-delegateEvents](http://documentcloud.github.com/backbone/#View-delegateEvents)

就像将它添加到您的视图一样简单：

```
events: {
    "click #deleteButton": "deleteView",

  }, 
```

# fast-esp - 多个匹配器输出到同一字段

> ID：11116737
> 
> 赞同：0
> 
> 时间：2012-06-20T09:38:08.177
> 
> 标签：fast-esp

我们正在寻找一种具有多个匹配器的解决方案，这些匹配器都输出到同一字段。

背景是在我们的初始测试中，每个匹配器都会覆盖前一阶段的输出。

例子：

Machter A 输出“red,blue,organge”到字段 meta_keywords Matcher B 输出“soft,hard,whobbly”到字段 meta_keywords

预期结果：在所有阶段之后，字段 meta_keywords 包含：red,blue,organge,soft,hard,whobbly

实际结果：meta_keywords 包含“soft,hard,whobbly”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:27:01.060

当将多个匹配器输出到单个字段时，请确保该字段在索引配置文件中设置为多值字段。该字段需要有一个分隔符集，例如：

```
 <field name="locations" separator=";"/> 
```

这是每个匹配器的输出都附加到该字段。

# java - 如果通过 java 代码访问 URL，则 Spring 身份验证失败

> ID：11116738
> 
> 赞同：0
> 
> 时间：2012-06-20T09:38:11.940
> 
> 标签：java, spring, jakarta-ee, servlets, spring-security

目前我正在通过 Spring Filter 和 Servlet 使用 Spring Security Authentication。

```
<servlet-mapping>
    <servlet-name>remoting</servlet-name>
    <url-pattern>/remoting/*</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>remoting</servlet-name>
    <url-pattern>/admin</url-pattern>
</servlet-mapping>

<!-- Enables Spring Security -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>
        org.springframework.web.filter.DelegatingFilterProxy
    </filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<!-- End Spring Security --> 
```

在我的 spring-security.xml 里面

```
<authentication-manager alias="authenticationManager">
    <authentication-provider ref="myAppAuthenticationProvider"/>
</authentication-manager>

<beans:bean id="myAppAuthenticationProvider"
        class="com.filter.MyAppAuthenticationProvider">
    <beans:property name="repository" value="#{deployment['globalregistry.repository']}"/>
</beans:bean> 
```

现在，当我点击例如 URL 时：`http://localhost:8080/context/admin?action=authenticate`

j_username：用户
j_password：密码

我得到一个输入用户和密码的屏幕，该屏幕由 spring-security 验证。

现在，当我尝试通过 HTTPPost API 通过 Java 程序访问上述 URL 时，我收到重定向错误响应为 302。现在如何绕过登录屏幕进行验证并直接进行身份验证而不重定向到网页。并且还使用我的 java 程序提供 j_username 和 j_password。

请注意，当我点击 URL 时，页面会被重定向到类似这样的内容`http://localhost:8080/context/spring_security_login`。

您的帮助将非常感谢伙计们。！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:10:04.463

您应该传入用于身份验证的 URL `j_username`。`j_password`

例如：

```
http://localhost:8080/yourAppContext/j_spring_security_check?j_username=user&j_password=pass 
```

# css - 表格列文本溢出省略号（宽度以 % 为单位）

> ID：11116739
> 
> 赞同：3
> 
> 时间：2012-06-20T09:38:15.650
> 
> 标签：css, html

我有这个移动标记。

```
<table>
<tr>
<td style="width:60%">
<div class="ellipsis">
Test bla bla
</div>
</td>
<td style="width:40%">
</td>
</tr> 
```

**CSS**

```
.ellipsis { 
width : 100%;
text-overflow: ellipsis;
-o-text-overflow: ellipsis;
overflow: hidden;
white-space: nowrap;
word-break: break-all;
word-wrap: break-word;
} 
```

截断不能按预期工作，而是根据内容扩展列。

表格布局：固定使两列相等。

有什么建议么 ？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T10:42:18.703

请使用以下 css 使 css3 截断适用于表格

```
table {
   width: 200px; /*specify a width*/
   table-layout:fixed;
} 
```

属性“table-layout:fixed”对于表格内任何块级元素的文本截断似乎很重要。

# android - 可滚动的 textview 文本变黑

> ID：11116740
> 
> 赞同：3
> 
> 时间：2012-06-20T09:38:19.283
> 
> 标签：android

我目前正在为拉脱维亚旅行者开发电子指南。我有一个可滚动的“textview”，它将显示有关所选对象的信息。所以问题是当我触摸文本并开始滚动时，它看起来[不错](http://i.stack.imgur.com/xkJY2.png) ，但是当我触摸它的时间长一点时，它变成黑色，并且在我滚动它三行之后，文本颜色再次变为白色。[坏的](http://i.stack.imgur.com/DnS9h.png)

所以问题是如何让它在长按上保持白色或者问题可能出在哪里？

我的文本视图代码：

```
 <TextView
        android:id="@+id/textView2"
        android:layout_width="300dp"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/imageView1"
        android:layout_below="@+id/imageView1"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="5dp"
        android:maxLines="5"
        android:scrollbars = "vertical"
        android:background="@drawable/rect"
        android:text="Text"
        android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:04:14.267

我刚刚遇到了这个问题，所以也许有人会利用这个答案：将`TextView`颜色属性明确定义为白色，它不会在触摸事件中改变。

# magento - magento 跟踪像素

> ID：11116742
> 
> 赞同：0
> 
> 时间：2012-06-20T09:38:26.380
> 
> 标签：magento, tracking

跟踪像素中需要两个变量，需要放置在类别、产品信息、购物车和确认页面上。

我已经设法让 Prod 列表和 Prod 工作，但是，后两个给我带来了问题。

我可以回显购物车中的 sku，但是，产品是可配置的产品，因此它在输出中复制了 sku。我正在使用的代码如下：

```
<?php
// $items = Mage::getModel('checkout/cart')->getQuote()->getAllItems();
$items = Mage::getSingleton('checkout/session')->getQuote()->getAllItems();foreach($items as $item) { echo ''.$item->getSku().'&nbsp;';}
?> 
```

我如何将其更改为仅显示一个可配置的 SKU？

第二个元素是产品所在的类别名称，有人对此有任何想法吗？我尝试了多种变体，但它们要么破坏了页面，要么什么也没返回。

任何帮助，将不胜感激。如果有人也可以给我一些例子来说明这些在确认页面上是如何工作的，那就太好了。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:57:02.707

检查产品可见性（附加到可配置的简单产品将不可见）：

```
$items = Mage::getSingleton('checkout/session')->getQuote()->getAllItems();
foreach($items as $item) {
    if ($item->getProduct()->isVisibleInSiteVisibility()) {
        echo ''.$item->getSku().'&nbsp;';
    }
} 
```

关于类别名称，一个产品可以出现在多个类别中，所以我不确定你想如何处理它。此外，还担心您开始跨多个模板文件复制代码。您将需要考虑将这一切移到一个街区。

无论如何，在这里获取产品所属的类别名称至少是一种方法......

```
$categoryCollection = $item->getProduct()->getCategoryCollection()
                            ->addAttributeToSelect('name');

    foreach($categoryCollection as $category) {
       echo $category->getData('name') . "<br/>";
    } 
```

# iphone - 如何删除不可见的 tableview 单元格的下载图像。在ios中

> ID：11116748
> 
> 赞同：0
> 
> 时间：2012-06-20T09:39:01.813
> 
> 标签：iphone, ios, tags, tableviewcell

当我滚动表格视图时，我想在不可见的表格视图单元格中删除下载的图像。

所以我设置了一个标签

```
- (void)appImageDidLoad:(NSIndexPath *)indexPath
{
 int row=(int)indexPath
 UITableViewCell *cell;
 cell=[self.gamesTableView cellForRowAtIndexPath:indexPath];

 OneItemCell *cell1=(OneItemCell*) cell;   //custom cell

 cell1.imageview.tag= row+100;

 } 
```

I set remove downloaded image when selected row is last row cell(=add cell).

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{  
     if(row==nArrayCount)
   {

  if(row>19) 
  {

    for(int i=1;i<row-8;i++)
    {

        [[self.gamesTableView viewWithTag:i+100] removeFromSuperview]; 

    }
 }

} 
```

但它不工作。因为 [[self.gamesTableView viewWithTag:i+100] 为 NULL。

另一种方法是我通过 NSMutableDictionary(=imageRemoveInProgress) 为单元格的 imageView 设置一个键

```
 - (void)appImageDidLoad:(NSIndexPath *)indexPath
   {                   .
                       .

        [imageRemoveInProgress setObject:cell1.imageView forKey:[NSNumber numberWithInt:row+100]];

   }

   - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {                     .
                       .
    [[imageRemoveInProgress objectForKey:[NSNumber numberWithInt:row+100]] removeFromSuperview];

 } 
```

它也不起作用。因为[[imageRemoveInProgress objectForKey:[NSNumber numberWithInt:row+100]] 也是NULL。

[[imageRemoveInProgress objectForKey:[NSNumber numberWithInt:row+100]] 在 appImageDidLoad 中有值。

但在 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath

它有 NULL。

为什么标记和设置键值单元格的 imageView 变为 NULL？

如何删除 tableViewcell 的 imageview？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:16:59.020

我不知道确切的方法，但我可以提供一个提示

你可以使用这样的东西

NSArray *visiblePaths = [self.tableView indexPathsForVisibleRows];

visiblePaths 是当前可见单元格的 indexPaths 数组，您可以检查要删除图像的单元格是否在此数组中。

# ckeditor - mathjax 可以与 ckeditor 集成吗？

> ID：11116749
> 
> 赞同：2
> 
> 时间：2012-06-20T09:39:02.577
> 
> 标签：ckeditor, integration, mathjax

我想将 mathjax 与 ckeditor 集成，这可能吗？如果是，请帮帮我。我在互联网上搜索，但没有发现任何有用的东西。

请做必要的事，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-10T20:36:45.463

这个问题有点过时，但遇到了一个集成了 mathjax 和 coeditor 的优秀 coeditor 示例：[https](https://github.com/ckeditor/ckeditor-dev/tree/master/plugins/mathjax) ://github.com/ckeditor/ckeditor-dev/tree/master/plugins/mathjax 。示例包括插件实现。简单而基本，但一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-09T22:47:53.223

它与 CKEditor 4.3 集成得很好，请参阅[此处](http://docs.ckeditor.com/#!/guide/dev_mathjax) 安装数学公式 CKEditor 插件，并确保将路径设置为 MathJax 库。`config.mathJaxLib = '//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML';`按照他们的指示。

插件在[这里](http://ckeditor.com/addon/mathjax) 另请注意，您需要编辑器中的 Widget、Line Utilities、Dialog、Clipboard 插件才能使 MathJax 工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T07:20:37.127

在网上查了一些例子和实验，最后发现不能在ck编辑器中集成mathjax。

# cuda - 推力是同步的还是异步的？

> ID：11116750
> 
> 赞同：5
> 
> 时间：2012-06-20T09:39:06.243
> 
> 标签：cuda, thrust

我是使用 Thrust 的新手，有一件事我不明白。Thrust 是异步的还是同步的？

如果我编写以下代码，则花费的时间不是`0`. 但是在其他标签中，其他用户报告了`0`. 真相是什么？

```
clock_t start,end;

start=clock(); 
thrust::sort_by_key(vettore.begin(), vettore.end(), counter.begin()); 

end=clock();

double time=((double)(end-start))/CLOCKS_PER_SEC; 

cout<<"execution time"<<time<<endl;// the result is 0.327 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T03:04:37.380

内核启动一直是异步的——即使在 CUDA 1.0 中——所以任何只导致内核启动的 Thrust 调用都是异步的。

正如 marina.k 所暗示的，由于缺乏流支持，任何隐式触发 memcpy 的 Thrust 代码都将是同步的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:15:09.120

clock() 函数的粒度并不像您在 Windows 中想象的那样好。而在 Windows XP 中，它的粒度高达 16 毫秒。

不要使用clock()，而是使用高分辨率计时器或Cutil 库的计时函数（通常是首选）。

Windows中高分辨率定时器的讨论：Windows中的 [C++高精度时间测量](https://stackoverflow.com/questions/1825720/c-high-precision-time-measurement-in-windows)

关于 CUtil 库用于计时的讨论： [CUDA: CUtil timer - 对经过时间的混淆](https://stackoverflow.com/questions/11704681/cuda-cutil-timer-confusion-on-elapsed-time)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T03:20:01.723

您可以手动将 time.h 添加到索引器，转到 Preferences -> C/C++ -> Indexer 并将其放在现有的“要预先编制索引的文件”之前，如下所示：

```
time.h, cstdarg, stdarg.h, ..... 
```

它会起作用的

# jquery - 警报时奇怪的 ajax 错误响应

> ID：11116755
> 
> 赞同：0
> 
> 时间：2012-06-20T09:39:28.970
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4, publish

```
function girisAjaxKontrol() {
var kullanici = { 'kullaniciAdi': $('#username').val(), 'sifre': $('#password').val() };

$.ajax({
    url: '/Giris/GirisGecerliMi',
    type: 'POST',
    data: kullanici,
    success: girisAjaxReturn,
    error: function (error) {
        alert(error.toString());            
    }
}); 
```

}

调试 asp .Net MVC4 项目时一切正常。但是，在发布之后，上面的代码块会返回一条警告消息作为“[object Object]”。为什么错误消息不是字符串，为什么它在发布后不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:43:45.180

`error`返回的延迟对象的事件处理程序`$.ajax()`采用三个参数：

```
error : function (jqXHR, textStatus, errorThrown) { } 
```

由于您只`function (error) { }`为您的错误处理程序声明，您实际上是在提醒 AJAX 调用中使用的原始 XHR 对象。

如果您想检查整个对象，可以尝试`console.log(error)`使用您的函数，或尝试使用 将其转换为 JSON 字符串`JSON.stringify(error)`，然后发出警报。

或者，您还可以检查传递给错误处理程序的第二个或第三个参数。就我个人而言，为了简洁起见，我喜欢签署我的错误函数`function (x,s,e) {}`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:52:27.660

jQuery.ajax() 的 .error() 事件接受三个参数：

> jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象，一个描述发生的错误类型的字符串和一个可选的异常对象（如果发生）。- 更多关于 jQuery.ajax()[的信息](http://api.jquery.com/jQuery.ajax/)。

您的 .error() 事件正在接受一个由 jQuery 自动读取为 jQXHR 对象的参数。要在警报中看到它，请尝试执行以下操作：

```
alert(JSON.stringify(error)); 
```

或者，您可能希望返回错误描述：

```
error: function(error, textStatus) {
     alert(textStatus);
} 
```

仅当发生 HTTP 错误时才返回异常对象。

# sql-server-2008 - 如何设置列值等于行号？

> ID：11116757
> 
> 赞同：4
> 
> 时间：2012-06-20T09:39:33.540
> 
> 标签：sql-server-2008, sql-update, row-number

如何在 sql server 2008 中将更改表后添加的列的值设置为等于 no 行。也就是说，我希望列的值等于 no。的行。我也希望这个字段允许 NULL 值。所以它就像自动增量但允许空值，这就是为什么不想使用具有自动增量的标识或主键列。那么如何将其设置为行号呢？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-08T11:13:11.920

如果您尝试使用 ROW_NUMBER() 直接更新列，您将得到...

> 窗口函数只能出现在 SELECT 或 ORDER BY 子句中。

...所以改为 INNER JOIN 表自身...

```
UPDATE
    [test123]
SET
    [row_number] = [x].[rn]
FROM
    [test123]
INNER JOIN
    (
        SELECT
            [test_id],
            ROW_NUMBER() OVER (ORDER BY [test_id]) AS rn
        FROM
            [test123]
    ) AS x
ON 
    [test123].[test_id] = [x].[test_id] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T21:14:49.573

怎么样：它会将所需列的值更新为行号。

```
select  'Update myTable set row_No = ' + 
CAST(ROW_NUMBER() over (order by ID) as varchar) + ' Where ID = ' +  
cast(ID as varchar) from myTable 
```

--结果将产生一个更新语句，当您运行它时，它将所需列的值更新为行号。

# coldfusion - 从可用日期列表中获取最小和最大日期

> ID：11116758
> 
> 赞同：4
> 
> 时间：2012-06-20T09:39:35.587
> 
> 标签：coldfusion

我有以下格式的日期列表：

```
09-2012,10-2012,01-2013 
```

从列表中访问最小和最大日期的更好方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T10:04:37.690

我不确定哪个更快。下面是我的仅列表解决方案，或者您可以将列表转换为数组并使用它。

不过，这可以完成工作：

```
<CFSET dates = "" />
<CFLOOP list="09-2012,10-2012,01-2013" index="date">
    <CFSET dates = listappend(dates,DateFormat(createDate(listlast(date,"-"),listfirst(date,"-"),1), "yyyy-mm-dd")) />
</CFLOOP>
<CFSET dates = listsort(dates,"numeric") />
<CFSET min_date = listfirst(dates) />
<CFSET max_date = listlast(dates) /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T09:56:37.777

我建议将列表中的日期转换为 yyyy-mm-dd。

然后您可以使用 ListSort 对列表进行排序，您将通过 listfirst 和 listlast 获得第一个和最后一个日期

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T14:07:26.717

与 Seybsen 的回答类似，只是沿着正则表达式路径：

```
<cfscript>
var data = "09-2012,10-2012,01-2013";
data = listSort( reReplace( data, '([0-9][0-9])-([0-9][0-9][0-9][0-9])', '\2-\1', 'all' ), 'numeric', 'asc' );
var minDate = listFirst( data );
var maxDate = listLast( data );
</cfscript> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-15T19:32:49.840

我修改了@Seybsen 的答案，以便在不进行查询查询的情况下从查询中找到最大日期：

```
<cfset maxCompletedDate = ListLast(ListSort(ValueList(queryName.completedDate), "numeric")) /> 
```

我想如果其他人正在寻找同样的东西，我会把它放在那里，但再次感谢@Seybsen。

顺便说一句，数据库中格式化的日期`yyyy-mm-dd H:mm:ss`。时间戳像`2013-09-15 18:43:17`

# javascript - 将 Json 保存在 Javascript 变量中

> ID：11116760
> 
> 赞同：6
> 
> 时间：2012-06-20T09:39:42.463
> 
> 标签：javascript, html, json, variables

这些天我正在学习javascript，我有疑问。我有一个包含 url 的变量。我想将我的变量指向的 url 的内容保存在另一个变量中......

第一个变量类似于：

```
var Link = "http://mysite.com/json/public/search?q=variabile&k=&e=1"; 
```

如果我打开链接，我会看到如下内容：

```
{

"count": 1,
"e": 1,
"k": null,
"privateresult": 0,
"q": "gabriel",
"start": 0,
"cards": [
    {
        "__guid__": "cdf8ee96538c3811a6a118c72365a9ec",
        "company": false,
        "__title__": "Gabriel Butoeru",
        "__class__": "entity",
        "services": false,
        "__own__": false,
        "vanity_urls": [
            "gabriel-butoeru"
        ]
    }
]
} 
```

如何将 json 内容保存在另一个 javascript 变量中？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-20T09:50:26.407

您需要一个简单的 AJAX 请求才能将内容放入变量中。

```
var xhReq = new XMLHttpRequest();
xhReq.open("GET", yourUrl, false);
xhReq.send(null);
var jsonObject = JSON.parse(xhReq.responseText); 
```

请注意，AJAX 受[same-origin-policy](http://en.wikipedia.org/wiki/Same_origin_policy)约束，如果 URL 不同，则会失败。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T09:49:54.053

你可以这样使用

```
 var savings_data = JSON.stringify(your_json_object); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T09:44:59.763

**您可以通过这种方式将json保存为对象**

参考：[Json](http://www.json.org/js.html)

```
var obj = {};

 obj.name = "test";
 obj.no   = "1234"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T09:50:00.327

我认为这可能会帮助你，使用 jQuery ... :)

```
$.ajax({
    beforeSend: function() { DO HERE WHATEVER }, //Show spinner

            complete: function() { DO HERE WHATEVER  }, //Hide spinner

            type: 'POST',
            url: Link,
            dataType: 'JSON',
            success: function(data){
                                var data = data;
                               OR IF YOU WANT SEPARATE THE VALUES...
                                var count = data.count;
                                var e = data.e;
                                var k = data.k;
                                ...
             }                               
          }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-26T20:11:48.307

此示例考虑了请求的状态，并允许您使用点运算符访问 JSON 格式的数据。

```
var request = new XMLHttpRequest();
request.open("GET", "mysite.com/json/public/search?q=variabile&k=&e=1", true); 
request.setRequestHeader("Content-type", "application/json"); 
request.send(); 
request.onreadystatechange = function(){
     if(request.ready == 4 && request.readyState == 200){
          var response = request.responseText; 
          var obj = JSON.parse(response);
          alert(obj.count); // should return the value of count (i.e Count = 1) 
          alert(obj.e); // should return the value of e (i.e. e = 1) 
          var count = obj.count;  //store the result of count into your variable
          var e = obj.e; //store the result of e into your variable
          //...and so on 
     }
} 
```

# multithreading - 线程、ansi c 信号和 Qt

> ID：11116765
> 
> 赞同：1
> 
> 时间：2012-06-20T09:40:07.430
> 
> 标签：multithreading, qt, signals

我正在编写一个基于多线程插件的应用程序。我不会成为插件作者。所以我希望避免主应用程序崩溃导致插件中的分段错误。是否可以？或者插件中的崩溃肯定也会影响主要应用程序状态？我使用 qt 编写了一个草图程序，因为我的“真实”应用程序强烈基于 qt 库。正如你所看到的，我强迫线程在未分配的 QString 上调用修剪函数时崩溃。信号处理程序被正确调用，但在线程被迫退出后，主应用程序也崩溃了。我做错什么了吗？或者就像我之前说的那样，我想做的事情是无法实现的？请注意，在这个简化版本的程序中，我避免使用插件，而只使用线程。引入插件将增加一个新的关键级别，我想。我想一步一步走下去。而且，总的来说，我想了解我的目标是否可行。非常感谢每个人都会尝试给我的任何帮助或建议。

```
#include <QString>
#include <QThread>
#include<csignal>
#include <QtGlobal>
#include <QtCore/QCoreApplication>

class MyThread : public QThread
{
public:
    static void sigHand(int sig)
    {
        qDebug("Thread crashed");
        QThread* th = QThread::currentThread();
        th->exit(1);
    }

    MyThread(QObject * parent = 0)
    :QThread(parent)
    {
        signal(SIGSEGV,sigHand);
    }

    ~MyThread()
    {
        signal(SIGSEGV,SIG_DFL);
        qDebug("Deleted thread, restored default signal handler");
    }

    void run()
    {
        QString* s;
        s->trimmed();
        qDebug("Should not reach this point");
    }
};

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    MyThread th(&a);
    th.run();
    while (th.isRunning());
    qDebug("Thread died but main application still on");
    return a.exec();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:56:27.457

我目前正在处理同样的问题，并通过谷歌找到了这个问题。

您的来源无法正常工作有几个原因：

*   没有新线程。只有调用 QThread::start 时才会创建线程。相反，您调用 MyThread::run，它在主线程中执行 run 方法。

*   您调用 QThread::exit 来停止线程，这不应该直接停止线程，而是向线程事件循环发送一个 (qt) 信号，请求它停止。由于既没有线程也没有事件循环，因此该函数无效。即使你调用了 QThread::start，它也不起作用，因为编写一个 run 方法不会创建一个 qt 事件循环。为了能够在任何 QThread 中使用 exit，您需要先调用 QThread::exec。
    但是， QThread::exit 无论如何都是错误的方法。为了防止 SIGSEGV，必须立即调用线程，而不是在其事件循环中接收到 (qt) 信号之后。因此，尽管通常不赞成，但在这种情况下，必须调用 QThread::terminate

*   但通常认为从信号处理程序调用复杂函数（如 QThread::currentThread、QThread::exit 或 QThread::terminate）是不安全的，因此您永远不应该在那里调用它们

*   由于线程仍在信号处理程序之后运行（而且我不确定 QThread::terminate 是否会足够快地杀死它），信号处理程序退出到它被调用的位置，因此它重新执行导致 SIGSEGV 的指令，并且下一个 SIGSEGV 发生。

因此我使用了另一种方法，信号处理程序将包含指令地址的寄存器更改为另一个函数，然后在信号处理程序退出后运行该函数，而不是崩溃指令。像：

```
void signalHandler(int type, siginfo_t * si, void* ccontext){
    (static_cast<ucontext_t*>(ccontext))->Eip = &recoverFromCrash;
}

struct sigaction sa;
memset(&sa, 0, sizeof(sa)); sa.sa_flags = SA_SIGINFO;
sa.sa_sigaction = &signalHandler; 
sigaction(SIGSEGV, &sa, 0); 
```

然后通常在导致 SIGSEGV 的线程中调用 recoverFromCrash 函数。由于从所有线程中为所有 SIGSEGV 调用信号处理程序，因此该函数必须检查它在哪个线程中运行。

但是，我认为简单地杀死线程并不安全，因为可能还有其他东西，这取决于正在运行的线程。因此，我没有杀死它，而是让它在无限循环中运行（调用 sleep 以避免浪费 CPU 时间）。然后，当程序关闭时，它会设置一个全局变量，并终止线程。（请注意，recover 函数永远不能返回，否则执行将返回到导致 SIGSEGV 的函数）

另一方面，从主线程调用，它启动一个新的事件循环，让程序运行。

```
if (QThread::currentThread() != QCoreApplication::instance()->thread()) {
    //sub thread
    QThread* t = QThread::currentThread();
    while (programIsRunning) ThreadBreaker::sleep(1);
    ThreadBreaker::forceTerminate();
} else {
    //main thread
    while (programIsRunning) {
        QApplication::processEvents(QEventLoop::AllEvents);
        ThreadBreaker::msleep(1);
    }
    exit(0);
} 
```

ThreadBreaker 是 QThread 的一个简单的包装类，因为 QThread 的 msleep、sleep 和 setTerminationEnabled（必须在终止之前调用）受到保护，无法从恢复函数中调用。

但这只是基本情况。还有很多其他的事情需要担心：捕捉 SIGFPE，捕捉堆栈溢出（检查 SIGSEGV 的地址，在备用堆栈中运行信号处理程序），有一堆平台独立性定义（64 位、arm、mac )，显示调试消息（尝试获取堆栈跟踪，想知道为什么调用 gdb 会导致 X 服务器崩溃，想知道为什么调用 glibc 回溯会导致程序崩溃）...

# php - PHP-Jquery图像上传不起作用

> ID：11116766
> 
> 赞同：0
> 
> 时间：2012-06-20T09:40:10.487
> 
> 标签：php, jquery

我正在尝试通过 ajax 发布表单数据

**form1.php**

我使用请求获取所有 URL 参数数据

```
$_REQUEST["Ename"];
$_REQUEST["eImg"]; 
```

要上传图片，我使用此代码[http://www.9lessons.info/2011/08/ajax-image-upload-without-refreshing.html](http://www.9lessons.info/2011/08/ajax-image-upload-without-refreshing.html)

在上面的链接中，你可以看到源代码，在 $_FILES['photoimg']['name']; 的地方，我使用 $_FILES['image']['name']; 但它没有上传文件并给出成功消息。

```
include('db.php');
session_start();
$session_id='1'; // User session id
$path = "uploads/"; 
```

我删除了标有 ** 的脚本

```
$valid_formats = array("jpg", "png", "gif", "bmp","jpeg");
    **if(isset($_POST) and $_SERVER['REQUEST_METHOD'] == "POST")
    {**

$name = $_FILES['image']['name'];
$size = $_FILES['image']['size'];
if(strlen($name)) {
  list($txt, $ext) = explode(".", $name);
  if(in_array($ext,$valid_formats)) {
    if($size<(1024*1024)) { // Image size max 1 Mb
      $actual_image_name = time().$session_id.".".$ext;
      $tmp = $_FILES['image']['tmp_name'];
      if(move_uploaded_file($tmp, $path.$actual_image_name)) {
        mysql_query("UPDATE users SET profile_image='$actual_image_name' WHERE uid='$session_id'");
        echo "<img src='uploads/".$actual_image_name."' class='preview'>";
      } else {
        echo "failed";
      } 
    } else {
      echo "Image file size max 1 MB";
    }
  } else {
    echo "Invalid file format.."; 
  }
}  **else {
  echo "Please select image..!";
  exit();
}** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:02:27.993

For upload image by ajax you should use an iframe and set its id to form target.

Please have a look at [http://www.coursesweb.net/ajax/upload-images](http://www.coursesweb.net/ajax/upload-images)

It is very simple code to upload image

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:01:46.487

您根本*无法*通过[`$.ajax()`](http://api.jquery.com/jQuery.ajax/).

您将不得不使用一些棘手的 iframe-stuff 或类似的东西来完成这项工作。幸运的是，有现成的 jquery 插件可以为您处理这个问题（[`$.ajaxForm()`](http://jquery.malsup.com/form/)例如，这似乎是您正在阅读的教程中使用的插件）。

**编辑：**
该插件还允许添加表单本身不存在的额外数据。引用[文档](http://jquery.malsup.com/form/#options-object)：

> **data**
> 一个包含额外数据的对象，应该与表单一起提交。
> 
> ```
> data: { key1: 'value1', key2: 'value2' } 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:06:23.983

那是行不通的！图像的处理方式与 Ajax 中的文本数据不同，因此您需要做的不仅仅是使用 $.ajax({}) 方法发布它。

但是，您可以使用 jquery.form.js 插件，它可以完美运行[http://jquery.malsup.com/form/#download](http://jquery.malsup.com/form/#download)[这里](http://www.9lessons.info/2011/08/ajax-image-upload-without-refreshing.html)有一个关于如何使用它的教程

我自己使用它的任何方式，所以让我为你详细说明。

**JavaScript 代码在这里**

```
$('.uploadForm').live('click', function(evt){   
     $('#feedback').html(' ');
     $('#feedback').html('<img src="images/loader_image.gif" alt="Uploading...."/>');
     $("#formID").ajaxForm({
           target: '#feedback'
           }).submit();
    evt.preventDefault();   
 }); 
```

如果您的 PHP 代码没问题，这应该可以工作......只需以正常方式发布其余的表单字段这应该适合您。如果 PHP 代码没问题

例如，如果您在这样的表单中有其他表单字段，例如名字和姓氏

```
<div class="form">
 <fieldset class="ui-corner-all">
   <h3 class="ui-widget-header ui-corner-top" align="center">Client information</h3>
     <form action="save_new_client.php" enctype="multipart/form-data" id="clientForm" method="POST">
     <label>First Name</label>

      <input name="firstname" type="text" id="firstname" class="required" minlength="3"/>
      <label>Lastname</label>
      <input name="date_added" type="text" id="date_added" class="dateEst" />
       <label>Image</label>
       <input name="photo" type="file" id="photo" />

      <input type="submit" name="button" id="button" value="Save" class="uploadForm"/>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
       <input type="reset" name="reset" id="button" value="Cancel" /></td>
   </form>
 </fieldset>
<div id="feedback"></div>
</div> 
```

在它下面你只需要添加一个 div 或段落来保存你的反馈信息....然后剩下的就可以了（就像我说的，如果你的 PHP 代码没问题）我还没有看过很多

# c - 如何将两个 __m128 值组合到 __m256？

> ID：11116769
> 
> 赞同：21
> 
> 时间：2012-06-20T09:40:17.830
> 
> 标签：c, x86, sse, simd, avx

我想将两个`__m128`值合并为一个`__m256`。

像这样的东西：

```
__m128 a = _mm_set_ps(1, 2, 3, 4);
__m128 b = _mm_set_ps(5, 6, 7, 8); 
```

类似于：

```
__m256 c = { 1, 2, 3, 4, 5, 6, 7, 8 }; 
```

有什么内在函数可以用来做到这一点吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-20T09:54:35.863

这应该做你想要的：

```
__m128 a = _mm_set_ps(1,2,3,4);
__m128 b = _mm_set_ps(5,6,7,8);

__m256 c = _mm256_castps128_ps256(a);
c = _mm256_insertf128_ps(c,b,1); 
```

如果顺序与您想要的相反，则只需切换`a`和`b`。

* * *

感兴趣的本质是`_mm256_insertf128_ps`它可以让您将 128 位寄存器插入 256 位 AVX 寄存器的下半部分或上半部分：

[http://software.intel.com/sites/products/documentation/studio/composer/en-us/2011/compiler_c/intref_cls/common/intref_avx_insertf128_ps.htm](http://software.intel.com/sites/products/documentation/studio/composer/en-us/2011/compiler_c/intref_cls/common/intref_avx_insertf128_ps.htm)

他们的完整家族在这里：

*   [`_mm256_insertf128_pd()`](http://software.intel.com/sites/products/documentation/studio/composer/en-us/2011/compiler_c/intref_cls/common/intref_avx_insertf128_pd.htm)
*   [`_mm256_insertf128_ps()`](http://software.intel.com/sites/products/documentation/studio/composer/en-us/2011/compiler_c/intref_cls/common/intref_avx_insertf128_ps.htm)
*   [`_mm256_insertf128_si256()`](http://software.intel.com/sites/products/documentation/studio/composer/en-us/2011/compiler_c/intref_cls/common/intref_avx_insertf128_si256.htm)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-12-20T04:36:05.560

英特尔[文档](https://software.intel.com/sites/landingpage/IntrinsicsGuide/#techs=SSE,SSE2,SSE3,SSSE3,SSE4_1,SSE4_2,AVX,AVX2,AVX_512,Other&text=_mm256_set_m128&expand=5223,5222,4919) **`__m256 _mm256_set_m128(__m128 hi, __m128 lo)`**并`_mm256_setr_m128(lo, hi)`作为`vinsertf128`指令的内在函数，这就是您想要的¹。（当然也有`__m256d`和`__m256i`版本，使用相同的指令。__m256i版本`vinserti128`如果有AVX2可以使用，否则它会使用f128。）

如今，所有 4 个主要 x86 编译器（gcc、clang、MSVC 和 ICC）的当前版本都支持这些内在函数。但不是旧版本；与英特尔文档中的其他一些辅助内在函数一样，广泛的实施一直很缓慢。（通常 GCC 或 clang 是最后一个没有你希望可以便携使用的东西的坚持。）

如果您不需要移植到旧 GCC 版本，请使用它：它是表达您想要的内容的最易读的方式，遵循众所周知的`_mm_set`模式`_mm_setr`。

在性能方面，它当然与手动强制转换 +`vinsertf128`内在函数（@Mysticial 的回答）一样有效，而且对于 gcc，至少这实际上是内部`.h`实际实现的方式`_mm256_set_m128`。

**编译器版本支持`_mm256_set_m128`/ `_mm256_setr_m128`：**

*   铿锵声：3.6 及更新版本。（主线，关于 Apple 的 IDK）
*   **GCC：8.x 和更新版本，不像 GCC7 那样出现**！
*   ICC：至少从ICC13开始，Godbolt上最早的。
*   MSVC：至少从 19.14 和 19.10 (WINE) VS2015 开始，最早在 Godbolt 上。

[https://godbolt.org/z/1na1qr](https://godbolt.org/z/1na1qr)有所有 4 个编译器的测试用例。

```
__m256 combine_testcase(__m128 hi, __m128 lo) {
    return _mm256_set_m128(hi, lo);
} 
```

他们都将此函数编译为 one `vinsertf128`，除了 MSVC ，即使最新版本也浪费了`vmovups xmm2, xmm1`复制寄存器。（我曾经`-O2 -Gv -arch:AVX`使用 vectorcall 约定，因此 args 将在寄存器中，以便为 MSVC 提供有效的非内联函数定义。）如果 MSVC 可以将结果写入第三个寄存器，则推测 MSVC 可以内联到更大的函数中，而不是调用约定强制它读取 xmm0 并写入 ymm0。

* * *

**脚注 1：**
`vinsertf128`在 Zen1 上非常高效，与`vperm2f128`其他具有 256 位宽 shuffle 单元的 CPU 一样高效。它还可以从内存中取出高半部分，以防编译器溢出它或将 a 折叠`_mm_loadu_ps`到其中，而不需要单独将 128 位加载到寄存器中；`vperm2f128`的内存操作数将是您不想要的 256 位负载。

[https://uops.info/](https://uops.info/) / [https://agner.org/optimize/](https://agner.org/optimize/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-11T01:11:16.533

即使这个也可以：

```
__m128 a = _mm_set_ps(1,2,3,4);
__m128 b = _mm_set_ps(5,6,7,8);

__m256 c = _mm256_insertf128_ps(c,a,0);
c = _mm256_insertf128_ps(c,b,1); 
```

由于 c 未初始化，您将收到警告，但您可以忽略它，如果您正在寻找性能，此解决方案将使用比另一个解决方案更少的时钟周期。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-21T22:15:11.540

也可以使用置换内在函数：

```
__m128 a = _mm_set_ps(1,2,3,4);
__m128 b = _mm_set_ps(5,6,7,8);
__m256 c = _mm256_permute2f128_ps(_mm256_castps128_ps256(a), _mm256_castps128_ps256(b), 0x20); 
```

我不知道哪种方式更快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-20T03:43:20.583

我相信这是最简单的：

`#define _mm256_set_m128(/* __m128 */ hi, /* __m128 */ lo) \ _mm256_insertf128_ps(_mm256_castps128_ps256(lo), (hi), 0x1)`

`__m256 c = _mm256_set_m128(a, b);`

请注意`__mm256_set_m128`已在 msvc 2019 中定义，如果您`#include "immintrin.h"`

# java - 尽管拒绝权限加载小程序

> ID：11116773
> 
> 赞同：2
> 
> 时间：2012-06-20T09:40:27.097
> 
> 标签：java, security, applet, digital-signature

我有一个在浏览器中运行的小程序。

我希望当用户拒绝小程序运行的权限时，它不应该运行并给出一个`AccessControlEception`或类似的东西。

然而，令人惊讶的是，即使用户拒绝了权限，小程序仍然继续运行。这是来自 Java 控制台的跟踪的一部分。

```
security: Checking if certificate is in Deployment denied certificate store
security: Checking if certificate is in Deployment permanent certificate store
security: Checking if certificate is in Deployment session certificate store
security: User has denied the priviledges to the code
security: Adding certificate in Deployment denied certificate store
security: Added certificate in Deployment denied certificate store
basic: Applet loaded.
basic: Applet resized and added to parent container 
```

不是期望用户拒绝权限后，小程序不应该加载吗？这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T16:41:41.270

如果请求了其他权限但被拒绝，则小程序将继续正常运行。否则你会破坏页面的区域。小程序的作者可能决定继续使用标准小程序功能或显示某种权限被拒绝消息。不幸的是，许多小程序的质量非常差（这对于应该受信任的代码来说有点令人担忧），以至于它们只是无法抛出异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:23:56.470

> ..认为我得到了解决方案。如果用户拒绝权限，小程序仍然以有限的权限加载，如果用户授予权限，小程序以所有权限加载

你想错了。如果[Iced Tear JRE](https://stackoverflow.com/questions/5356850/does-this-applet-work-in-an-iced-tea-jre)请求扩展权限而用户拒绝，它根本不会加载小程序。这是由 JRE 的制造商决定的。

# .net - “无法找到应用程序文件 [程序名称].msi”重启后出错

> ID：11116777
> 
> 赞同：0
> 
> 时间：2012-06-20T09:40:36.883
> 
> 标签：.net, visual-studio-2010, windows-installer

有什么办法可以避免出现这个错误？有人说这是因为重启后msi文件被清除了，这就是为什么setup.exe无法从%TEMP%文件夹中找到那个msi文件。那么，我该怎么做才能确保系统重启后 msi 文件仍然存在？有什么建议么？谢谢。

# iphone - 是否可以在不使用电话间隙或快速连接的情况下开发混合应用程序？

> ID：11116778
> 
> 赞同：1
> 
> 时间：2012-06-20T09:40:37.080
> 
> 标签：iphone

我是这个 iPhone 开发的新手。我想创建一个混合应用程序或 iPhone。我想知道是否可以在不使用任何外部框架或库（如 phonegap 或 quickconnect 或钛）的情况下开发混合应用程序。我只是想知道是否可以仅使用 HTML 文件 JavaScript 文件和 CSS 文件以及 x 代码创建混合应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:46:02.493

phonegap 背后的想法（不能强调这个钛是不一样的），是在应用程序中创建一个 web 视图，并将 HTML、CSS、javascript 等添加到其中。然后一些其他逻辑允许您访问一些底层功能，如相机。

因此，创建一个原生 iPhone 应用程序，在其中创建一个 web 视图并编写 HTML 代码基本上是相同的想法（因为 phonegap 不是钛，钛交叉符合原生代码）。

# android - 在 android/eclipse 中的 Tabhost 上显示结果

> ID：11116785
> 
> 赞同：0
> 
> 时间：2012-06-20T09:41:27.863
> 
> 标签：android, android-tabhost

![在此处输入图像描述](../Images/170167f9c6b2cfe82d5c5674095c6805.png)

上面的仿真器图像只是从用户那里获取输入并在同一页面的编辑文本中显示答案。但是我需要在 Tabhost 上显示该答案（希望在下一页上），如下图所示。

![在此处输入图像描述](../Images/d742a3c453d39a44bb89f74779b9c5ca.png)

如何实现这个概念..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:30:35.887

当你调用活动时，你可以调用同一个选项卡，只需将 id 放入当前选项卡并在调用活动时调用选项卡——将其放入 TabActivity

```
public void switchTab(int tab) {
tabHost.setCurrentTab(tab);
} 
```

在活动中调用 TabActivity

```
TabsActivity ParentActivity;
ParentActivity = (TabsActivity) activity.getParent();
ParentActivity.switchTab(0);// 0 is a current tab id and u can used what ever tab id u want to shift 
```

我希望这可以帮助你

# html - 如何使用溢出自动使页眉和页脚之间的 div 高度自动

> ID：11116787
> 
> 赞同：0
> 
> 时间：2012-06-20T09:41:30.950
> 
> 标签：html, css

[jsfiddle 演示](http://jsfiddle.net/centerwow/c6ABa/51/)

**我有 3 个 div：**

1 -`<div id="header">`红色

2 -`<div id="main">`使用#FFF2D2color

3 -`<div id="footer">`红色

我需要`<div id="main">`自动高度和自动溢出。谢谢

```
 <body>
    <div id="header">
      <h1>Well came to abc: Club</h1>
    </div>
    <div id="main">

<a href="index.php">&laquo; Back</a><br />
<br />

<h2>Log File</h2>

<p><a href="logfile.php?clear=true">Clear log file</a><p>

<ul class="log-entries">
</li><li>2012-06-20 10:13:18 | Login: aa logged in.
</li><li>2012-06-20 10:19:56 | Login:  logout.
</li><li>2012-06-20 10:22:14 | Login:  logged in.
</li><li>2012-06-20 10:22:16 | Login:  logout
</li><li>2012-06-20 10:26:58 | Login: dgf logged in.
</li><li>2012-06-20 10:26:59 | Login: 35 logout
</li><li>2012-06-20 10:28:03 | Login: aa logged in.
</li><li>2012-06-20 10:28:05 | Login:  logout
</li><li>2012-06-20 10:32:53 | Login: aa logged in.
</li><li>2012-06-20 10:32:55 | Login:  logout
</li><li>2012-06-20 10:35:54 | Login: aa logged in.
</li><li>2012-06-20 10:35:56 | Login: aa logout
</li><li>2012-06-20 10:36:58 | Login: rye logged in.
</li></li><li>2012-06-20 10:13:18 | Login: aa logged in.
</li><li>2012-06-20 10:19:56 | Login:  logout.
</li><li>2012-06-20 10:22:14 | Login:  logged in.
</li><li>2012-06-20 10:22:16 | Login:  logout
</li><li>2012-06-20 10:26:58 | Login: dgf logged in.
</li><li>2012-06-20 10:26:59 | Login: 35 logout
</li><li>2012-06-20 10:28:03 | Login: aa logged in.
</li><li>2012-06-20 10:28:05 | Login:  logout
</li><li>2012-06-20 10:32:53 | Login: aa logged in.
</li><li>2012-06-20 10:32:55 | Login:  logout
</li><li>2012-06-20 10:35:54 | Login: aa logged in.
</li><li>2012-06-20 10:35:56 | Login: aa logout
</li><li>2012-06-20 10:36:58 | Login: rye logged in.
</li>
    <li>2012-06-20 10:37:02 | Login: rye logout
</li><li>2012-06-20 10:39:03 | Login: aa logged in.
</li><li>2012-06-20 10:39:07 | Login: aa logout
</li><li>2012-06-20 10:44:49 | Login: aa logged in.
</li><li>2012-06-20 10:45:00 | Login: aa logout
</li><li>2012-06-20 10:46:10 | Login: aa logged in.
</li><li>2012-06-20 10:46:11 | Login: aa logout
</li><li>2012-06-20 10:53:45 | Login: aa logged in.
</li><li>2012-06-20 11:10:04 | Login: aa logout
</li><li>2012-06-20 11:10:18 | Login: aa logged in.
</li><li>2012-06-20 11:13:16 | Login: aa logged in.
</li><li>2012-06-20 11:48:51 | Login: aa logout
</li><li>2012-06-20 11:49:16 | Login: aa logged in.
</li><li>2012-06-20 11:49:48 | Login: aa logout
</li><li>2012-06-20 11:52:31 | Login: aa logged in.
</li><li>2012-06-20 11:56:13 | Login: aa logout
</li><li>2012-06-20 11:56:26 | Login: aa logged in.
</li><li>2012-06-20 11:56:36 | Login: aa logout
</li><li>2012-06-20 11:57:07 | Login: aa logged in.
</li></ul>
    </div>
    <div id="footer">Copyright 2012, centerwow</div>
  </body> 
```

CSS代码：

```
​html { height: 800px; width: 100%;overflow: hidden; }
body { height: 100%; width: 100%; margin: 0; padding: 0; border: 0; background: #FFFFFF;
  font: 13px/15px Verdana,Arial,Helvetica,sans-serif; }
img { border: none; }

#header { height: 95px; text-align: center; background: red; color: #D4E6F4; }
#header h1 {float:left; padding: 1px;height: 69px; margin: 1px;;width: 100%;clear: both;background: green;}

/* Note: IE 5 & 6 won't understand min-height */

#main { max-height: 100%; 
    height: auto !important; /*Cause footer to stick to bottom in IE 6*/

    margin: 0 auto -100px; /*Allow for footer height*/
    vertical-align:bottom;
    width: 300Px;
    background:#FFF2D2;
    margin:1px;
    overflow:auto;}

#footer { width:100%; height: 2em; padding: 1em; text-align: center; 
  background: red;  color: #D4E6F4;position: absolute;bottom:0; }

​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:25:55.360

您总是可以“欺骗”一点，并在您的 3 个主要 div 上使用绝对位置：http: [//jsfiddle.net/c6ABa/71/](http://jsfiddle.net/c6ABa/71/)

```
#header { position: absolute; top: 0; height: 95px; }
#main { position: absolute: top: 95px; bottom: 40px; }
#footer { position: absolute; bottom: 0; height: 40px; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:28:12.253

好吧，我有适合你的工作版本，我使用 Jquery 来实现这一点，下面是代码和小提琴链接..

```
 $(document).ready(function(){
    var windowHeight = $(window).height();
    var mainBlockHeight = windowHeight - $('#footer').height() - $('#header').height() - 28;
    $('#main').height(mainBlockHeight);

}); 
```

这是小提琴，[http://jsfiddle.net/meetsubhajit/c6ABa/73/](http://jsfiddle.net/meetsubhajit/c6ABa/73/)

编辑：在这里我已经动态地获取页脚和页眉的高度，如果页眉和页脚的高度增加或减少，您将不需要再次编辑脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T10:15:47.530

尝试这个：

JS：

```
$(document).ready(function() {
    $('#main').height($(window).height() - 150);

    $(window).resize(function(){
        $('#main').height($(window).height() - 150);
    });
}); 
```

它将`#main`在窗口调整大小期间自动调整大小。

编辑：这是你更新的小提琴：http: [//jsfiddle.net/c6ABa/53/](http://jsfiddle.net/c6ABa/53/)

# php - Yii 应用程序如何保护连接字符串？

> ID：11116794
> 
> 赞同：6
> 
> 时间：2012-06-20T09:41:58.330
> 
> 标签：php, mysql, yii, connection-string, password-protection

我和我的一些朋友在共享主机上托管了一个 Yii 应用程序，并将数据库保存在私有 MySQL 服务器中。`protected\config\main.php`如您所知，另一个主机所有者（我的朋友等）可以很容易地找到数据库信息：

```
'db'=>array(
     'connectionString' => 'mysql:host=211.113.2.45;dbname=FamilyBook',
     'emulatePrepare' => true,
     'username' => root,
     'password' => 'xcute445',
     'charset' => 'utf8',
), 
```

**是否有任何解决方案可以将连接信息隐藏为 IP mySQL 服务器、用户名、密码？**

MySQL服务器可以提供[RSA](http://en.wikipedia.org/wiki/RSA_%28algorithm%29)机制来保护数据库信息吗？

例如，任何人都可以看到如下但无法理解或使用：

```
'db'=>array(
     'connectionString' => '57bf064b2166366a5ea61109006b8d5c',
     'emulatePrepare' => true,
     'username' => '63a9f0ea7bb98050796b649e85481845',
     'password' => 'e04ccf211208f8c97e4a36e584926e60',
     'charset' => 'utf8',
), // value by MD5 function, example only 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T09:46:27.300

不，只要您使用[本机 MySql 身份验证](http://dev.mysql.com/doc/refman/5.5/en/native-authentication-plugins.html)，您就不能向有权访问您的源的人隐藏凭据。那是因为您的代码需要将凭据以明文¹的形式传递给服务器，因此它需要能够在连接之前“解密”它们。有权访问您的源的人也可以按照相同的程序对其进行解密。

您可以依靠某种类型的[PAM 身份验证](http://dev.mysql.com/doc/refman/5.5/en/pam-authentication-plugin.html)而不是用户提供的凭据来保护您的系统，但 Yii 不支持这种方式。

* * *

¹注意：这实际上不是真的。客户端将*哈希*传递给服务器，但它需要访问原始密码才能对其进行哈希处理。这意味着就本次讨论的目的而言，它没有任何区别（对于正在网络上收听的人来说会有所不同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-24T08:54:13.810

使用 Yii 1.x 我使用下面的方法做到了。

1.  创建一个类，`DbConnection`内部`protected/components` 扩展自`CDbConnection` `class DbConnection extends CDbConnection { public function createPdoInstance() { // Decrypt the password used in config file // e.g.: $this->password = mydecrypt($this->password); return parent::createPdoInstance(); } }`

2.  调整配置文件 ( `protected/config/main.php`) `'db' => array( 'class' => 'DbConnection', // Use above classname 'password' => 'encryptedpassword', ),`

# facebook - 如何使用 FQL 从 Facebook 流中获取“喜欢”的帖子

> ID：11116795
> 
> 赞同：2
> 
> 时间：2012-06-20T09:42:02.873
> 
> 标签：facebook, stream, facebook-like, facebook-fql, feed

我可以在我的提要中（在网络 FB 页面上）看到“User_Name like some_link”的帖子。我也可以在 Android 的 Facebook 应用程序 (com.facebook.katana) 中看到它。但我无法使用流表中的 FQL “SELECT post_id, actor_id, target_id, message FROM stream WHERE filter_key in (SELECT filter_key FROM stream_filter WHERE uid=me() AND type='newsfeed') AND is_hidden = 0”。它也不在类似的表中。我怎样才能得到那些“喜欢”的帖子？

# unit-testing - 如何构建系统进行单元测试？

> ID：11116796
> 
> 赞同：3
> 
> 时间：2012-06-20T09:42:03.247
> 
> 标签：unit-testing, ant, makefile, build-system

当您在修补 Make、ant 或任何其他构建工具时，您实际上是在编写代码。

为什么没有“MUnit”或“ANTUnit”来测试这些代码？这样做是有意义的，因为项目构建系统中的任何错误都会给使用它的人带来巨大的延迟和挫败感。

一个例子（*注意：这甚至可能不起作用 - 未经测试，这也不是我的重点*）：

```
#makefile v0
all: main.out

main.out: main.o x.o y.o
    g++ $^ -o main.out

%.o: %.cpp
    g++ -Wall $? 
```

但现在我希望我的目标文件在一个单独的构建文件夹中：

```
#makefile v1
all: main.out

main.out: $(addprefix build/,main.o x.o y.o)
    g++ $^ -o main.out

build/%o: %.cpp
    g++ Wall $< -o $@ 
```

哦是的！这样可行！犯罪！犯罪！

（但是......持续集成服务器*还*没有“构建”文件夹......）

哦不……团队的构建失败了……我应该受到责备……愚蠢！

如果能够指定一个模拟项目、一个模拟文件夹结构，然后调用`make all`，并验证 main.out 是否存在（并且可以运行） ，那就太好了

所以这里的问题：

我有哪些选项可以“单元测试”我的 make 脚本？我注定要编写大量的测试外壳脚本，还是已经存在某些东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T10:41:16.597

如果您使用的是 Ant，那么就有[AntUnit](http://ant.apache.org/antlibs/antunit/)。我使用它并且它有效。

我不知道也找不到 Make 的单元测试框架。您可以考虑创建自己的。

# c# - 将现有 XML 文件复制到新 XML 文件

> ID：11116797
> 
> 赞同：0
> 
> 时间：2012-06-20T09:42:09.203
> 
> 标签：c#, xml, c#-4.0

我有一个现有的 XML 文件，它具有以下起始元素：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mynms SYSTEM 'mynms20.dtd'>
<mynms version="2.0" xmlns="mynms20.xsd"> <!-- This is the troublesome line-->
<cmData type="actual">
   <header>
      <log dateTime="2011-10-17T06:07:07" action="created" appInfo="ActualExporter">InternalValues are used</log>
   </header>
 .....
 </cmData> 
```

我正在使用 c# 的**XMLReader**读取此文件，然后如上所述更改文件的某些元素，并使用 c# 的**XMLWriter**在另一个文件中输出新的 xml 。

因此，当 XMLReader 读入一个元素时，我有以下内容：

```
writer.WriteStartElement(xmlReader.Prefix, xmlReader.Name, null);
writer.WriteAttributes(xmlReader, true);   <!-- This causes the assertion. Take this out then everything is OK --> 
```

但我得到一个异常说明**前缀''不能在同一个开始元素标记中从''重新定义为'mynms20.xsd'。**<--- 这是什么意思，我怎样才能将命名空间和属性复制到另一个文件？

非常感谢。

# actionscript-3 - as3 找出 as3 是否正忙于任何事情

> ID：11116800
> 
> 赞同：0
> 
> 时间：2012-06-20T09:42:21.467
> 
> 标签：actionscript-3, sdk, adobe-indesign

我想知道 as3 正在做的是在 bakground 中做任何事情。我的确切问题是我正在尝试使用 indesign sdk 打包文档，就在此之前我正在导入 xml，问题是打包时无法保存文档，我很确定这是因为导入还没有准备好。这是代码：

```
 IDScriptingEventAdapter.getInstance().addEventListener(Document.AFTER_IMPORT, afterImport);         
    document.xmlElements.item(0).xmlElements.item("test").importXML(File.applicationStorageDirectory.resolvePath("temp/styles.xml"));

public function afterImport(event:ImportExportEvent):void {
            var docPackaged:Boolean=app.activeDocument.packageForPrint(packagePath, true, true, true, true, true, true, true);
        } 
```

如您所见，使用`Document.AFTER_IMPORT`侦听器调用该函数，但由于某种原因，它很快就会被触发。

经过一些测试后，我注意到导入已完成，但在处理程序执行时 xmlElements 尚未到位。结果，文档在打包时还没有准备好，因此无法保存文档。

我得到的正确错误是：

```
Cannot save a copy of “CataloogCS5.indd”.\n 
```

那么有没有办法可以查看 AS 是否不再做任何事情（添加了所有 xmlElements）或其他解决方案来解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:06:42.873

也许您可以尝试使用 while 循环检查工作流程中最后一个 xmlElement 的有效性，或者尝试在无法保存文档的情况下保存文档，然后一旦可以进行打包？

您可以添加一个计时器以在打包过程中添加暂停。

或者

while ( !doc.xmlElements[0].xmlElements[-1].isValid ){ //wait }

或者

函数 checkIfPackageable() { 尝试 { doc.save(); 返回; } 捕捉（e） { checkIfPackageable（）; } }

不过可能是更好的选择。

希望能帮助到你，

洛伊克

# itunes - iTunes 应用程序 - 映射国家和语言

> ID：11116801
> 
> 赞同：1
> 
> 时间：2012-06-20T09:42:34.527
> 
> 标签：itunes, app-store-connect

Itunes 允许开发人员以大约十几种语言自定义标题、描述和屏幕截图。现在，苹果如何选择为哪个国家/地区显示哪种语言？

其中一些是直截了当的——比如在美国或澳大利亚使用英语。但是法国的法语和英语选项怎么样？还是西班牙的西班牙语或英语？使用的默认语言是什么？

我不知道它是在哪里指定的，如果是这样的话。

# iphone - 在 iPhone 上运行时内存泄漏

> ID：11116804
> 
> 赞同：0
> 
> 时间：2012-06-20T09:42:44.943
> 
> 标签：iphone, objective-c, ios, xcode, memory-leaks

我的 Iphone 应用程序通过 url 运行 HTTP Live Stream，当我在我的 Iphone 上播放它时，它显示内存泄漏。

这是泄漏显示。

```
Leaked Object = GeneralBlock-64 (64 bytes size)

Responsible Library = UIKit

Responsible Frame = GetContextStack 
```

只有当我在 IPHONE 上运行它时，如果模拟器没有泄漏。

请帮忙....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:12:39.683

检查您是在主线程还是子线程中运行代码，如果您正在使用 UI 元素，则必须仅在 UIThread 上运行代码。所以检查您的代码一次

# excel - vba中的数字上下控制

> ID：11116808
> 
> 赞同：10
> 
> 时间：2012-06-20T09:43:14.773
> 
> 标签：excel, vba, excel-2010, numericupdown

vba 中是否有内置的数字 updown 控件，或者我们是否需要创建这样的控件？

如果有这样的控件，那么我们可以使用哪些事件。

请建议。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-20T09:47:29.560

您可以使用该`SpinButton1`控件

**快照**

![在此处输入图像描述](../Images/a952050697076eff78b7061c54007ba9.png)

**代码**

您可以设置`SpinButton1`设计时或运行时的最小值和最大值，如下所示。

```
Private Sub UserForm_Initialize()
    SpinButton1.Min = 0
    SpinButton1.Max = 100
End Sub

Private Sub SpinButton1_Change()
    TextBox1.Text = SpinButton1.Value
End Sub 
```

**跟进**

如果您想根据用户在文本框中输入的内容来增加或减少文本框的值，请使用它。这也使文本框成为“仅数字”文本框，仅满足您的其他要求；）

```
Private Sub SpinButton1_SpinDown()
    TextBox1.Text = Val(TextBox1.Text) - 1
End Sub

Private Sub SpinButton1_SpinUp()
    TextBox1.Text = Val(TextBox1.Text) + 1
End Sub

Private Sub TextBox1_KeyPress(ByVal KeyAscii As MSForms.ReturnInteger)
    Select Case KeyAscii
      Case vbKey0 To vbKey9, 8
      Case Else
        KeyAscii = 0
        Beep
    End Select
End Sub 
```

# listview - Metro style & winJS：有没有办法知道元素是否在屏幕之外？

> ID：11116819
> 
> 赞同：1
> 
> 时间：2012-06-20T09:43:59.700
> 
> 标签：listview, microsoft-metro, winjs

在水平 listView 中 - 是否有可能知道某个片段是否在屏幕“外部”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:38:32.677

因为 WinJS 本质上是在 IE 10 中运行，所以您可以像处理常规 Web 问题一样处理此问题。其中一些是从 [Check if element is visible after scrolling借来的](https://stackoverflow.com/q/487073/428823)

使用 JQuery，您可以执行以下操作：

```
function isScrolledIntoView(elem)
{
    var docViewTop = $(window).scrollTop();
    var docViewBottom = docViewTop + $(window).height();

    var elemTop = $(elem).offset().top;
    var elemBottom = elemTop + $(elem).height();

    return ((elemBottom >= docViewTop) && (elemTop <= docViewBottom)
      && (elemBottom <= docViewBottom) &&  (elemTop >= docViewTop) );
} 
```

您也可以在纯“WinJS”（Internet Explorer 10 + JavaScript）中执行此操作，它看起来像：

```
function isScrolledIntoView(elem)
{
    var docViewTop = window.pageXOffset;
    var docViewBottom = docViewTop + window.innerHeight;

    var elemTop = =  document.getElementById(elem).offsetTop
    var elemBottom = elemTop + =  document.getElementById(elem).offsetHeight

    return ((elemBottom >= docViewTop) && (elemTop <= docViewBottom)
      && (elemBottom <= docViewBottom) &&  (elemTop >= docViewTop) );
} 
```

# symfony - 将文件添加到子模板中的样式表标签

> ID：11116823
> 
> 赞同：0
> 
> 时间：2012-06-20T09:44:04.053
> 
> 标签：symfony, twig

我的问题也相关： [扩展样式表块](https://stackoverflow.com/questions/11114033/extending-stylesheet-block)

我想知道是否可以将其他 CSS 文件添加到基本模板的样式表标签中声明的文件“数组”中，因此，例如，所有文件将合并到一个链接标签中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:55:01.147

不，目前不可能。

我想您可以完全覆盖主样式表标签，因此您可以将整个样式表标签数组从基本文件复制/粘贴到模板中，并将所需的文件添加到其中。

但是为什么不首先将文件添加到主标签呢？如果您担心的是优化-相信我，这是最小的..

# jquery - 我想设置关于 jquery UI 日期选择器中第一个值的第二个日期选择器值

> ID：11116824
> 
> 赞同：0
> 
> 时间：2012-06-20T09:44:05.287
> 
> 标签：jquery

如果有两个日期选择器 1 用于签入日期，另一个用于结帐我想要如果我在签入中选择 28-06-2012 它在结帐日期选择器中自动禁用日期在 2012 年 6 月 29 日之前这是代码

```
$(document).ready(function () {
    function getDateYymmdd(value) {
        if (value == null)
            return null;
        return $.datepicker.parseDate("yy-mm-dd", value);
    }

    $('.date').datepicker({ minDate: 1, dateFormat: "dd-mm-yy" });

    $('.date').each(function () {
        var minDdate = getDateYymmdd($(this).data(""));
        var maxDate = getDateYymmdd($(this).data("val-rangedate-max"));
        $(this).datepicker({

            maxDate: maxDate
        });
    });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:51:58.697

使用“ **Jquery Ui 日期选择器**”，[带有日期范围演示的 DatePicker](http://jqueryui.com/demos/datepicker/#date-range)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-30T10:03:21.517

您正在使用引导日期纠察队，有一些默认函数定义，

我有这样的事情：愿这对你也有帮助

```
jQuery(".dateone").datepicker({
         dateFormat:"yy-mm-dd",
         changeMonth: true,
         changeYear: true,
         minDate: 1,
     });

     jQuery(".datetwo").datepicker({
         dateFormat:"yy-mm-dd",
         changeMonth: true,
         changeYear: true,
         minDate: new Date($('.dateone').val()),
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T09:48:16.927

```
$( "#frmDateStatusLog").datepicker({
    onSelect: function(dateText, inst){
          $("#toDateStatusLog").datepicker("option","minDate",$("#frmDateStatusLog").datepicker("getDate"));
    }
  });
  $( "#toDateStatusLog").datepicker({
    minDate: $("#frmDateStatusLog").datepicker("getDate")
  }); 
```

[Demo](http://jsfiddle.net/ankur20us/2KzGS/)

# sql-server-2008 - SharePoint2010 中的内容系统管理

> ID：11116827
> 
> 赞同：0
> 
> 时间：2012-06-20T09:44:19.107
> 
> 标签：sql-server-2008, sharepoint-2010

最近好吗 ？我是 SharePoint 2010 的新手。我的经理告诉我，我们需要安装 SP 2010 服务器来为我们拥有的经理管理一些内容。我安装了 SP2010（独立）。现在的事情是，我的老板需要允许公司管理层（总经理、人力资源、薪资、IT 经理）将内容发送给他们可以选择的特殊经理，他们会收到打开该内容的通知。我要问的是：

*   有关这在 SharePoint 2010 中的名称的一些具体细节，请在 Google 上搜索并尝试了解它。请注意，这些管理员将使用 Active Directory 登录。并且这些内容将被保存到 Microsoft SQL Server 2008 谢谢你们，对不起，长篇大论；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:50:34.380

我相信您正在寻找这个 --> [http://office.microsoft.com/en-us/outlook-help/CH001050210.aspx](http://office.microsoft.com/en-us/outlook-help/CH001050210.aspx)

它们在 SharePoint 的世界中被称为“警报”

用户可以“订阅”以关注特定项目或完整列表的内容

# css - div输入标签值改变颜色

> ID：11116830
> 
> 赞同：0
> 
> 时间：2012-06-20T09:44:24.350
> 
> 标签：css, html, input, tags

我的 html 标记中的代码存在以下问题：

```
<div id="searchbar"><input name="searchbar" type="text" id="searchfield" value="some text" onfocus="
if(this.value==this.defaultValue) 
    this.value=''; 
    this.style.color='#11111'" 
onblur="
if(this.value=='') 
    this.value=this.defaultValue;
    this.style.color='#22222'
if(this.value==this.defaultValue) 
    this.style.color='#111111'" 
```

好的，主要目标是批准在我的搜索字段中使用“某些文本”给出标准值应该只为新条目更改颜色。

单击该消息“某些文本”将消失。现在，新值的颜色应该从标准 #222222 更改为 #111111。其次，当离开这个领域时，必须有两种不同的看待方式。第一种可能性应该是，如果新值与带有“一些文本”的标准值不同，则颜色应保持在 #222222。第二种可能性是，如果新条目与标准值相同，或者甚至没有输入，则颜色应更改回默认值 #222222。所以上面的代码一直工作到最后一点。

如果有人可以就如何解决问题给我建议，我将不胜感激。多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:58:03.767

你可以使用`:focus` **伪类**

css on focus 像这样改变 css

**CSS**

```
input[type="text"]{
color:white;
    background:red;
    padding:5px;
}

input[type="text"]:focus{
color:black;
    background:yellow;
} 
```

现场演示[http://jsfiddle.net/VQ99D/](http://jsfiddle.net/VQ99D/)

更多信息[http://www.cssdrive.com/index.php/examples/exampleitem/focus_pseudo_class/](http://www.cssdrive.com/index.php/examples/exampleitem/focus_pseudo_class/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-20T10:01:17.317

无需使用冗长复杂的代码，只需使用 HTML5`placeholder`

[**Jsfiddle 示例**](http://jsfiddle.net/libinvbabu/RWkyK/)

**HTML**

```
<div id="searchbar">
<input name="searchbar" type="text" id="searchfield" placeholder="Some Text" />
</div> 
```

**CSS**

```
#searchbar input {
    color: green;
}
input::-webkit-input-placeholder {
    color: red;
}
input:-moz-placeholder {
    color: red;
}​ 
```

根据您的意愿更改颜色。

注意：[占位符](http://www.w3schools.com/html5/att_input_placeholder.asp)在 IE 中不支持。

**更新**

如果你想使用一个占位符来支持所有浏览器，请使用这个[**占位符——一个 jQuery 插件**](https://github.com/danbentley/placeholder)和 tweek`style.css`来实现你的结果。

# android - Android中的GridView行背景图像

> ID：11116831
> 
> 赞同：1
> 
> 时间：2012-06-20T09:44:25.757
> 
> 标签：android, gridview, background, row

我想为 GridView 的所有行设置背景图像。我使用了这段代码：

```
GridView gv = (GridView) findViewById(R.id.grid);

    ArrayAdapter<String> aa = new ArrayAdapter<String>(
            this,
            R.layout.row,
            items);

    gv.setAdapter(aa);
    gv.setOnItemClickListener(this); 
```

main.xml：（我这里设置了GridView设计）

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent" 

   >
<TextView
    android:id="@+id/selection"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
  android:textSize="14pt"
  android:textStyle="bold"

    />
<GridView
    android:id="@+id/grid"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:verticalSpacing="65px"
    android:horizontalSpacing="5px"
    android:numColumns="auto_fit"
    android:columnWidth="100px"
    android:stretchMode="columnWidth"
    android:gravity="center"
    android:fastScrollEnabled="true"
    /> 
```

row.xml：（我在这里设置了网格视图设计的行）

```
<LinearLayout
 xmlns:android = "http://schemas.android.com/apk/res/android"
 android:layout_width  = "fill_parent"
 android:layout_height = "wrap_content"
 android:orientation   = "horizontal" 
 android:background="@drawable/rowbg"
 >

<TextView
android:id = "@+id/label"
android:layout_width  = "wrap_content"
android:layout_height = "wrap_content"
android:textSize      = "40sp" /> 
```

当我运行项目时，它会强制关闭程序。但是当我如下更改第二行时，它运行良好，ofcorse 没有任何行设计：

```
ArrayAdapter<String> aa = new ArrayAdapter<String>(
            this,
            android.R.layout.simple_list_item_1,
            items); 
```

我的代码的哪一部分应该改变？

谢谢

* * *

用 Eclipse 运行程序后，会出现一个对话框：“应用程序已异常停止。请重试。” 并在 LogCat 中出现此消息：“06-21 12:05:25.724: E/dalvikvm(305): Unable to open stack trace file '/data/anr/traces.txt': Permission denied”

我也尝试在 Galaxy S 上运行应用程序，我看到了同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:53:36.017

创建一个扩展 ArrayAdapter 的适配器类。

在该类的 getView 方法中，为行扩展布局，访问应设置数据的文本视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:12:35.200

一个好的解决方案是对 gridview 进行子类化，如下所述：

[http://erikw.eu/android-row-background-in-gridview/](http://erikw.eu/android-row-background-in-gridview/)

并转载如下：

```
public class MyGridView extends GridView {

    private Bitmap background;

    public MyGridView(Context context, AttributeSet attrs) {
        super(context, attrs);
        background = BitmapFactory.decodeResource(getResources(), R.drawable.bg);
    }

   @Override
    protected void dispatchDraw(Canvas canvas) {
        int count = getChildCount();
        int top = count &gt; 0 ? getChildAt(0).getTop() : 0;
        int backgroundWidth = background.getWidth();
        int backgroundHeight = background.getHeight();
        int width = getWidth();
        int height = getHeight();

        for (int y = top; y &lt; height; y += backgroundHeight){
            for (int x = 0; x &lt; width; x += backgroundWidth){
                canvas.drawBitmap(background, x, y, null);
            }
        }

        super.dispatchDraw(canvas);
    }
} 
```

用法

```
<your.package.name.MyGridView
    android:id="@+id/mygridview"
    <!-- other GridView configuration parameters -->
    /> 
```

# android - 我可以做些什么来避免我的 Android 应用程序中的内存泄漏？

> ID：11116834
> 
> 赞同：4
> 
> 时间：2012-06-20T09:44:38.623
> 
> 标签：android, memory-leaks

随着时间的推移，我的 android 应用程序占用了越来越多的内存。我进行了堆转储并使用 MAT 对其进行了分析。

这是主要的泄漏嫌疑人：[![](../Images/d2143c9cbbacc90d27147327829f2287.png)](https://i.stack.imgur.com/kXP59.png)

因此，在我退出应用程序（使用后退按钮）之后，我的一项活动似乎没有从内存中清除，然后当我重新启动应用程序时，会创建一个新实例并填充内存。

现在，如果它们是 PhantomReferences，为什么一段时间后或当我退出应用程序时内存没有被清除？即使我使用其他应用程序等，内存也永远不会清除。完全关闭应用程序的唯一方法是使用任务管理器手动终止应用程序。

我能做些什么来避免这种无政府状态的内存消耗？

编辑：

我发现了问题！每个活动都使用 Thread.setDefaultUncaughtExceptionHandler() 设置 CustomExceptionHandler，并且 CustomExceptionHandler 保持对上下文的引用。所以我摆脱了上下文引用，并在 onDestroy() 方法中“取消”了 DefaultUncaughtExceptionHandler。现在真的好多了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T10:13:53.470

我通常遵循的一些减小应用程序大小的通用方法是：

*   在将 Intent 传递给下一个活动的下方调用 finish()，这将避免堆栈堆积并有助于 gc（垃圾收集）
*   如果您没有使用共享首选项来保存数据，请在退出时通过调用 System.exit() 刷新它们
*   如果您发现任何未在最终程序中使用的可绘制图像/布局 xmls/java 类，请确保将它们从项目中删除
*   图像必须是 .png，因为 JPEG 图像占用大量内存。
*   在使用数据库（sqlite、内部数据库等）的情况下，更好的方法是使用“try/catch/finally”块，在尝试打开数据库时，在最后关闭它，这将避免由于不使用而导致的内存泄漏关闭游标或数据库。
*   使用 AsyncTask 而不是线程。在 onPostExecute() 函数中，关闭进度对话框（如果有）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T10:21:35.240

我会使用 MAT 的支配树功能来找出这些引用之上的内容，这可能会让你知道哪个`Activity`是罪魁祸首。

确保你没有通过`Context`任何地方并持有对它的引用，这是一个经典的 android 内存泄漏，它真的很容易做到！

尽管一些静态分析工具对此不以为然，但在您的`onDestroy()`方法中，您`Activity`可以使用`null`所有局部变量（基元除外），它有时有助于轻推垃圾收集器，并且可以更轻松地分析 MAT 中的堆转储。

# html - 元素仅在打印页面上可见

> ID：11116836
> 
> 赞同：14
> 
> 时间：2012-06-20T09:44:52.793
> 
> 标签：html, css, printing

我在打印页面上仅显示某些元素时遇到问题。例如，我有一个页面，用户可以在其中看到打印预览（简单的 javascript）。在该打印页面上，我只显示页面中的一些元素（不是全部），用于：

```
@media print {
  .noPrint {
      display:none;
  }
} 
```

现在，当我将 .noPrint 应用于元素时，它不会显示在打印页面中。但是，如何在页面上创建例如 div，这将在“打印页面”上可见，但在常规页面上不可见。

这是否足够，并且大多数浏览器都支持？

```
@media screen, projection, tv {

 .dontShowThis {
    display:none
  }
} 
```

现在，如果我想在打印页面上显示元素而不是在常规页面上，我会这样做

```
<div class="dontShowThis printIt">Some content goes here</div> 
```

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-20T09:55:10.793

不久前我做了类似的事情，这就是我的做法：

```
@media screen
{
    .noPrint{}
    .noScreen{display:none;}
}

@media print
{
    .noPrint{display:none;}
    .noScreen{}
}

<div class="noScreen">Some content goes here</div> 
```

AFAIK 所有主流浏览器都支持这一点，甚至 IE8 也开始支持它。

# c - 这是编译器错误还是 C 语言功能？

> ID：11116838
> 
> 赞同：5
> 
> 时间：2012-06-20T09:45:05.863
> 
> 标签：c, winapi, hyperlink, cl.exe

我的环境是 Windows XP SP3 + 'Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 14.00.50727.762 for 80x86'。过程如下：

> F:\workshop\vc8proj\console> 输入 tc

```
int main(void) {

    // Do some thing.
    {
        int i;
        {
            i = 3;
            goto abc111;
        }

        abc111:
    }
    return 0;
} 
```

> F:\workshop\vc8proj\console> cl /MD tc Microsoft (R) 32-bit C/C++ 优化编译器版本 14.00.50727.762 for 80x86
> 
> 版权所有 (C) 微软公司。版权所有。
> 
> tc tc(10)：错误 C2143：语法错误：缺少 ';' 前 '}'
> 
> F:\workshop\vc8proj\console>vim tc
> 
> F:\workshop\vc8proj\console>type tc

```
int main(void) {
    // Do some thing.
    {
        int i;
        {
            i = 3;
            goto abc111;
        }

        abc111: 5201314;
    }
    return 0;
} 
```

> F:\workshop\vc8proj\console> cl /MD tc Microsoft (R) 32-bit C/C++ 优化编译器版本 14.00.50727.762 for 80x86
> 
> 版权所有 (C) 微软公司。版权所有。
> 
> tc Microsoft (R) 增量链接器版本 8.00.50727.762 版权所有 (C) Microsoft Corporation。版权所有。
> 
> /out:t.exe t.obj
> 
> F:\workshop\vc8proj\console>

Linux操作系统下也是一样的情况？？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T09:48:04.243

It's a language feature. A label can only be part of a *labeled statement*, and the statement needs a terminating `;`. Just putting a semicolon behind the label suffices.

```
int main(void) {

    // Do some thing.
    {
        int i;
        {
            i = 3;
            goto abc111;
        }

        abc111: ;

    }
    return 0;
} 
```

works too.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:38:05.387

嗯，这是一个语言特性。必须有一个我们提到标签的声明。

如果标签后没有任何声明，则只需放一个';' 终止语句，或者您可以仅在标签后编写返回语句。

# javascript - Javascript Object.prototype 未定义

> ID：11116840
> 
> 赞同：1
> 
> 时间：2012-06-20T09:45:13.417
> 
> 标签：javascript, oop, class, object

我正在尝试在 javascript 中创建一个简单的可扩展“类”，但是在原型中设置属性时，它告诉原型未定义：

```
Class = {};
Class.extend = function(obj) {
    var result = Object.create(this);

    if (obj) {
        for (var key in obj) {
          if(typeof obj[key] == 'function'){
            console.log(result);
            result.protorype[key] = obj[key];
          }else{
            result[key] = obj[key];
          };
        };

        result.prototype.constructor = result;
    }

    return result;

}

var a = Class.extend({
    username: "matteo",
    password: "nn te la dico",
    getByUsername: function() {
        return this.username;
    }
});

console.log(a, Class.isPrototypeOf(a));​ 
```

尝试设置定义“a”时传递的属性“getByUsername”时会出现问题，如果您查看控制台，它将报告：

```
Uncaught TypeError: Cannot set property 'getByUsername' of undefined 
```

记录的“结果”具有“用户名”和“密码”属性。

PS 它只适用于 IE > 8

这是一个小提琴[http://jsfiddle.net/paglia_s/z62eA/](http://jsfiddle.net/paglia_s/z62eA/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:50:12.763

你有一个错字。`result.protorype[key]`应该`result.prototype[key]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T10:00:34.560

只是不要使用创建对象：Class = {};

但是通过使用： Class = function(){};

它创建了一个带有原型的新对象..

您的代码将如下所示：

```
Class = function(){};

Class.extend = function(obj) {
    var result = Object.create(this);

    if (obj) {
        for (var key in obj) {
          if(typeof obj[key] == 'function'){
            console.log(result);
            result.prototype[key] = obj[key];
          }else{
            result[key] = obj[key];
          };
        };

        result.prototype.constructor = result;
    }

    return result;

}

var a = Class.extend({
    username: "matteo",
    password: "nn te la dico",
    getByUsername: function() {
        return this.username;
    }
});

console.log(a, Class.isPrototypeOf(a));​ 
```

# windows-phone-7.1 - Windows Phone 7 中 Bing 地图上的路线图方向？

> ID：11116845
> 
> 赞同：0
> 
> 时间：2012-06-20T09:45:30.840
> 
> 标签：windows-phone-7.1

如何在 WP7 中使用 bingmaps 显示从一个地方到另一个地方的 Route 路径？我有用户开始纬度，经度和目的地纬度，经度值...请告诉我....任何样品请让我知道...

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:57:34.520

这将取决于您的需求以及您是否希望自定义“地图”。

有两种选择：

1.  [使用 Bing 地图方向任务](http://msdn.microsoft.com/en-us/library/hh394024%28v=vs.92%29.aspx)- （非常好，快速教程）
2.  [在您的应用程序中使用 Bing 地图控件](http://www.microsoft.com/maps/developers/mobile.aspx)- （您需要注册一个开发者帐户，然后按照有关如何调用各种服务的教程来获取基于起点和终点的路线信息，然后最终将它们显示在地图上)

2 号更具挑战性，但将提供更高级别的定制

# c++ - 使用 BFS 的最短距离

> ID：11116846
> 
> 赞同：0
> 
> 时间：2012-06-20T09:45:32.390
> 
> 标签：c++, algorithm, shortest-path, breadth-first-search

我正在尝试解决[这个 SPOJ 问题](http://www.spoj.pl/problems/BITMAP/)。该问题要求找到每个黑色（1​​）像素的最短路径。

因为它是一个未加权的图，所以我使用了 BFS。

输入：

```
3 3
010
000
000 
```

它给了：

```
323
434
343 
```

代替：

```
101
212
323 
```

这是我的代码

```
#include<iostream>
#include<queue>
#include<string.h>
using namespace std;
typedef pair < int, int >ii;
int R, C, i, j;
queue < ii > myQueue;

int visit[100][100];
int dist[100][100];
void bfs(ii s)
{
    int i, j;
    int count = 0;
    ii node;
    memset(visit, 0, sizeof(visit));
    memset(dist, 0, sizeof(dist));
    myQueue.push(s);
    dist[node.first][node.second] = 0;

    while (!myQueue.empty()) {
        node = myQueue.front();
        myQueue.pop();
        if (visit[node.first][node.second])
            continue;
        visit[node.first][node.second] = 1;

        //cout << node.first << " " << node.second << "\n";
        i = node.first;
        j = node.second;

        if (j - 1 < R && j - 1 >= 0) {
            myQueue.push(make_pair(i, j - 1));
            if(dist[i][j - 1] == 0)
            dist[i][j - 1] = dist[i][j] + 1;
        }
        if (j + 1 < R && j + 1 >= 0) {
            myQueue.push(make_pair(i, j + 1));
            if(dist[i][j+1] == 0)
            dist[i][j + 1] = dist[i][j] + 1;
        }
        if (i - 1 < C && i - 1 >= 0) {
            myQueue.push(make_pair(i - 1, j));
            if(dist[i-1][j] == 0)
            dist[i - 1][j] = dist[i][j] + 1;
        }
        if (i + 1 < C && i + 1 >= 0) {
            myQueue.push(make_pair(i + 1, j));
            if(dist[i+1][j] == 0)
            dist[i + 1][j] = dist[i][j] + 1;
        }
    }
}

int main()
{
    char input[100][100];
    scanf("%d %d", &R, &C);
    for (i = 0; i < R; i++)
        scanf("%s", &input[i]);
    int GRID[R][C];
    for (i = 0; i < R; i++)
        for (j = 0; j < C; j++)
            GRID[i][j] = input[i][j] - '0';
    for (i = 0; i < R; i++)
        for (j = 0; j < C; j++) {
            if (GRID[i][j] == 1)
                bfs(make_pair(i, j));
        }
    for (i = 0; i < R; i++) {
        for (j = 0; j < C; j++) {
            printf("%d", dist[i][j]);
        }
        printf("\n");
    }
} 
```

[ideone](http://ideone.com/MLDMr)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T10:04:28.380

试试这个：

```
if (j - 1 < R && j - 1 >= 0) {
    myQueue.push(make_pair(i, j - 1));
    if(dist[i][j - 1] == 0)
    dist[i][j - 1] = dist[i][j] + 1;
} 
```

对所有 dist[][] 执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:08:01.407

您的结果加倍可能是因为您在配对顶点之间运行了两次 BFS。

但我不确定。

# sql-server-2008 - 发生了无效的浮点运算

> ID：11116849
> 
> 赞同：3
> 
> 时间：2012-06-20T09:45:36.987
> 
> 标签：sql-server-2008

我的 SQL 查询有问题，我已将其范围缩小到以下代码

```
SELECT ACOS( (SIN(PI()* 52.9519918465976/180)*SIN(PI()* 52.9519918465976/180))+(COS(PI()*   52.9519918465976/180)*cos(PI()* 52.9519918465976/180)*COS(PI()* -1.14304013581239/180-PI()* -1.14304013581239/180))) AS test 
```

我收到以下错误消息“发生了无效的浮点操作”

有人能看出是什么问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T09:52:21.047

你的结果`ACOS()`比`1`不可能的大。

那是因为浮点数不准确。例如，可能是`1.00000001`这样。把它放在下面一点`1`是这样的：

```
SELECT ACOS( 
             (SIN(PI()* 52.9519918465976/180.0)* SIN(PI()* 52.9519918465976/180.0))
             + (COS(PI()* 52.9519918465976/180)*cos(PI()* 52.9519918465976/180.0)*COS(PI()* -1.14304013581239/180.0-PI()* -1.14304013581239/180.0)) 
             - 0.0000001
           ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-02-15T18:34:57.927

我正在使用 ACOS 来计算地理点之间的距离。'- 0.0000001' 的减法足以使我的结果有些偏差。所以我改为使用 MIN 函数（由 Craig[在此处发布），如下所示：](https://stackoverflow.com/a/32209528/10239655)

```
SELECT ACOS( 
        (SELECT MIN(x) FROM (VALUES (
             (SIN(PI()* 52.9519918465976/180.0)* SIN(PI()* 52.9519918465976/180.0))
             + (COS(PI()* 52.9519918465976/180)*cos(PI()* 52.9519918465976/180.0)*COS(PI()* -1.14304013581239/180.0-PI()* -1.14304013581239/180.0)) 
         ),(1)) AS value(x))
   ) 
```

这样，在 0 和 1 之间的浮点数的 ACOS 仍然可以准确计算。

# sql-server - 主键名称是必填字段？

> ID：11116851
> 
> 赞同：1
> 
> 时间：2012-06-20T09:45:51.360
> 
> 标签：sql-server, constraints

SQL Server 200x/2012 中的以下 2 个 CREATE TABLE 语句之间有什么区别吗？我从两个不同的表生成了这个脚本，一个定义了一个键名（PK_Table1），而另一个有某种随机生成的数字与之关联（PK_Table1_1084F446）。

```
CREATE TABLE [dbo].[Table1](
    [ID] [uniqueidentifier] NOT NULL,
    <<Other Column declaration here>>
PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
Few more non-clustered indexes declaration here

CREATE TABLE [dbo].[Table1](
    [ID] [uniqueidentifier] NOT NULL,
    <<Other Column declaration here>>
 CONSTRAINT [PK_Table1] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
Few more non-clustered indexes declaration here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:53:21.070

它的工作方式相同，但自然名称更方便：

1) 更改约束时，您可以轻松引用它（如果您给出了合理的名称）；

2）当查询由于约束而失败时，会显示该约束的名称，因此您可以轻松了解导致错误的原因（如果您给出了合理的名称）。

# java - 声明抛出异常的方法和该异常的子类

> ID：11116853
> 
> 赞同：6
> 
> 时间：2012-06-20T09:45:58.810
> 
> 标签：java, exception-handling

声明一个抛出异常的方法和这个异常的子类，例如*IOException*和*FileNotFoundException*是否有意义？

我猜想它是用来通过调用者方法以不同的方式处理这两个异常的。但是，如果该方法**只**抛出最通用的异常，即*IOException* ，是否可以同时处理这两个异常？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T09:48:11.887

> 但是，如果方法只抛出最通用的 IOException，是否可以同时处理这两个异常？

绝对地。您仍然可以单独*捕获*它们：

```
try {
  methodThrowingIOException();
} catch (FileNotFoundException e) {
  doSomething();
} catch (IOException e) {
  doSomethingElse();
} 
```

*因此，如果方法声明两者，调用者可以*做什么没有区别- 这是多余的。但是，它可以*强调*您可能要考虑的例外情况。这可以在 Javadoc 中完成，而不仅仅是 throws 声明。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T09:49:59.593

> 声明一个抛出异常的方法和这个异常的子类，比如IOException和FileNotFoundException，有意义吗？

通常不会——我知道的大多数 IDE 甚至会针对此类声明发出警告。您可以而且应该做的是记录 Javadoc 中抛出的不同异常。

> 但是，如果方法只抛出最通用的 IOException，是否可以同时处理这两个异常？

是的，您只需要确保捕获块的顺序正确，即首先更具体。Catch 块按照它们定义的顺序进行评估，所以在这里

```
try {
  ...
} catch (FileNotFoundException e) {
  ...
} catch (IOException e) {
  ...
} 
```

如果抛出的异常是 a `FileNotFoundException`，则会被第一个`catch`块捕获，否则会掉到第二个并作为一般处理`IOException`。相反的顺序不会像`catch (IOException e)`捕获所有`IOException`s 一样起作用，包括`FileNotFoundException`. （事实上​​，后者会导致编译错误 IIRC。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T09:47:48.890

> 但是，如果该方法只抛出最通用的即 >IOException，是否可以同时处理这两个异常？

```
catch(IOException ex){
 if(ex instanceof FileNotFoundException){}
} 
```

但这看起来不太干净，抛出两个异常看起来不错，甚至调用者也会知道这个方法可能会抛出这些异常，所以他们会正确处理它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T09:48:40.870

是的，如果方法只抛出 IOException，则可以同时处理这两种情况。

回答此类问题的最佳方法是编写一个测试来演示并尝试一下。让JVM告诉你答案。它会比在这里问更快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T09:48:57.203

是的。当某些特殊异常可以正确处理时。是，如果您按以下方式处理异常：

```
try {
} catch (FileNotFoundException f) {
//Try a different file
} catch (IOException ioe) {
//Fatal, Maybe bad blocks ... Bail out... 
} catch (Exception e) {
//Something went wrong, see what it is...
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T09:51:02.880

声明该方法可能会抛出（更*通用*）`IOException`和（更*具体*）`FileNotFoundException`通常是一件好事 - 对于以后使用您的代码的人来说，这是一个额外的信息。请注意，您应该在 JavaDoc 中明确说明在什么情况下会引发每个异常。

他们仍然能够区分异常，并使用像这样的 catch 构造以不同方式处理它们：

```
try {
    yourAwesomeMethod()
} catch (FileNotFoundException ex) {
    // handle file-not-found error
} catch (IOException ex) {
    // handle other IO errors
} 
```

# objective-c - C 结构的大小

> ID：11116856
> 
> 赞同：3
> 
> 时间：2012-06-20T09:46:07.187
> 
> 标签：objective-c, struct, sizeof

> **可能重复：**
> [为什么结构的 sizeof 不等于每个成员的 sizeof 之和？](https://stackoverflow.com/questions/119123/why-isnt-sizeof-for-a-struct-equal-to-the-sum-of-sizeof-of-each-member)

我有一个简单的 C 结构定义如下：

```
typedef struct LMWinData {
    UInt8   itemTypeID;
    UInt16  serviceID;
    UInt16  methodID;
} LMWinData; 
```

稍后在代码中，我定义了一个这种类型的变量，如下所示：

```
LMWinData   lmWinData; 
```

现在，如果我打印出这个变量的大小：

```
NSLog(@"data has size of %lu bytes", sizeof(lmWinData)); 
```

我没有得到预期的值（5 个字节）。我得到了 6 个字节的大小。

那么，这里有什么问题？

非常感谢！

（我使用的是 Mac OS X Lion。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T09:55:26.373

您在这里看到对齐问题。在处理试图有效地使软件访问位置的编译器时，这可能是一个棘手的问题。特别是，您有一个结构，其中两个 16 位整数跟随一个 8 位，导致 16 位整数从奇数位置开始，这通常很慢。

但是，在某些情况下这是必要的，用于控制对齐和填充的 clang/llvm 方法是`__attribute__((packed))`.

或者，在您的结构上使用：

```
typedef struct LMWinData {
    UInt8   itemTypeID;
    UInt16  serviceID;
    UInt16  methodID;
} __attribute__((packed)) LMWinData; 
```

我认为这也适用于现代 gcc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:50:34.003

看结构填充，对齐。有一些方法可以在某些编译器中强制对齐：

```
typedef struct LMWinData {
    UInt8   itemTypeID;
    UInt16  serviceID;
    UInt16  methodID;
} LMWinData __attribute__ ((aligned (1))); 
```

# facebook - facebook 提要对话框重定向

> ID：11116857
> 
> 赞同：0
> 
> 时间：2012-06-20T09:46:07.130
> 
> 标签：facebook, dialog, feed

我已经建立了一个 facebook 应用程序。我已经使用了在 Feed Dialog Page 中找到的 Direct Url

[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

```
https://www.facebook.com/dialog/feed?
  app_id=123050457758183&
  link=https://developers.facebook.com/docs/reference/dialogs/&
  picture=http://fbrell.com/f8.jpg&
  name=Facebook%20Dialogs&
  caption=Reference%20Documentation&
  description=Using%20Dialogs%20to%20interact%20with%20users.&
  redirect_uri=http://www.example.com/response 
```

我的问题是即使访问者点击“取消”它也会重定向到相同的网址！？？我只想在他们单击“共享”时将他们重定向到下载页面，如果他们单击“取消”，则将他们重定向到他们登陆的同一页面

请任何帮助将不胜感激，因为我不是编码员！

请问我如何收集用户的电子邮件地址？是否可以通过提要对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:45:02.903

> 我的问题是即使访问者点击“取消”它也会重定向到相同的网址

它**仅**`redirect_uri`在用户取消时重定向到。如果他完成了分享，那么对话*应该*重定向到在 Facebook 上创建的新帖子。

> 请任何帮助将不胜感激

不要通过 URL 调用对话框，而是使用 JavaScript SDK 调用它（FB.ui）。

> 因为我不是编码员！

然后学习一些基础知识……或获得有偿支持。

> 请问我如何收集用户的电子邮件地址？是否可以通过提要对话框？

不，当然不是——*提要*对话框用于在用户*提要*上发布内容。

要获取用户信息，您必须将用户登录到您的应用程序，请求必要的权限，然后查询 Graph API 以获取您想要的信息。请先阅读 Facebook 文档中的相关章节。

# facebook - 如何获取facebook用户的登录历史

> ID：11116866
> 
> 赞同：0
> 
> 时间：2012-06-20T09:46:34.133
> 
> 标签：facebook, api

如何获取 Facebook 用户的登录历史记录？

我想得到一个时间戳；当用户使用 facebook.com 成功登录 facebook 时。有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:21:16.667

没有可用于检索该信息的 Facebook API

# android - Is there any way to show content of stack in Android framework code

> ID：11116868
> 
> 赞同：0
> 
> 时间：2012-06-20T09:46:50.783
> 
> 标签：android, android-ndk

Is there any way to show the content of a method stack in Android framework jni code at any point of time. As we have dump_stack() method in kernel, is there any substitute for this method in Android Framework jni code.

# asp.net - Update asp.net datalist field, without refreshing , when value changes in database

> ID：11116872
> 
> 赞同：0
> 
> 时间：2012-06-20T09:47:11.750
> 
> 标签：asp.net, asp.net-ajax, real-time, datalist

I have an aspx page that shows a list of students in a databound datalist in card view layout ( i.e repeatcolumns = 5 and repeatdirection=horizontal ).

The properties displayed are - Student Name, Id and Status. The Status field is constantly updated by another external service.

Is it possible to show the new status of the particular student for whom the status has changed in the DB without having to refresh the entire page?

What i'm trying to achieve is a real time monitoring system that a tutor could use to view student activity in a lab.

Thanks Arvind

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:52:31.787

您可以使用更新面板，然后设置一个计时器来刷新更新面板并将数据网格与新数据重新绑定。

# ios - 在 cocos2d 中制作 Drawable 图层

> ID：11116874
> 
> 赞同：0
> 
> 时间：2012-06-20T09:47:14.010
> 
> 标签：ios, cocos2d-iphone

我想为我的应用程序的一部分制作一个粉笔板，我想知道如何做到这一点？

我在想我可以创建一个精灵并将其图像设置为非常小的东西（可能是一个小点），然后在用户触摸的任何地方添加该精灵的新实例以模拟绘图事件。每个触摸位置的东西`[self addChild:someSprite];`。

但这似乎是非常低效的内存。必须有比这更好的方法，也许画出实际的线条？我可能忽略了一些方法。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:16:32.513

您需要使用 CCRenderTexture 进行黑板绘画。[查看这篇文章和项目](http://www.learn-cocos2d.com/2011/12/how-to-use-ccrendertexture-motion-blur-screenshots-drawing-sketches/)以获取绘图示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:15:05.740

您的变体并不像您想象的那样“内存效率低下”。无论您将使用相同的纹理创建多少精灵，您的纹理只会被放置到内存中一次。所有的精灵都将使用指向它的指针。防止许多不必要的调用的一件事是使用 CCBatchNode。它将通过一次`draw`调用来绘制它的所有孩子。不使用它，`draw`就会被召唤到每一个孩子身上。

# perl - Perl：打开命名管道时 sysopen() 挂起

> ID：11116877
> 
> 赞同：2
> 
> 时间：2012-06-20T09:47:24.257
> 
> 标签：perl, named-pipes

我正在使用以下代码打开位于“/tmp/xyz”的命名管道以进行只读访问：

```
#!/usr/bin/perl
use strict;
use Fcntl;
...
sysopen(FIFO, "/tmp/xyz", O_RDONLY) or die ("opening named pipe failed: $!\n");
... 
```

问题是，sysopen 在调用时挂起。调用执行后，它既不会“死亡”，也不会编码。

ls -la /tmp/xyz 的输出：

```
prw-r--r-- 1 user group 0 Jun 20 11:45 /tmp/xyz 
```

任何人有一个想法，发生了什么？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T09:58:33.650

您以阻塞模式打开它，程序将不会继续，直到有人写入 FIFO。

您可能希望以非阻塞方式打开它：

```
O_RDONLY | O_NONBLOCK 
```

# c# - 如何更新sql数据库中的表数据

> ID：11116882
> 
> 赞同：1
> 
> 时间：2012-06-20T09:47:50.667
> 
> 标签：c#, asp.net, sql-server-express

我正在为我的项目使用 asp.net，并且我正在使用以下代码，但它无法正常工作

```
 SqlConnection con = new SqlConnection("Data Source=.\\SQLEXPRESS;AttachDbFilename=E:\\WEB_PROJECT\\App_Data\\ASPNETDB.MDF;Integrated Security=True;User Instance=True");
 SqlCommand cmd = new SqlCommand();
 cmd.Connection = con;
 con.Open();
 cmd.CommandText = "UPDATE info SET fname = @fn, lname = @fl, phone= @ph, recoveryq=@rq, recoverya=@ra WHERE username = @un";  

 cmd.Parameters.AddWithValue("fn", TextBox3.Text);
 cmd.Parameters.AddWithValue("fl", TextBox4.Text);
 cmd.Parameters.AddWithValue("ph", TextBox5.Text);
 cmd.Parameters.AddWithValue("rq",TextBox6.Text);
 cmd.Parameters.AddWithValue("ra",TextBox2.Text);
 cmd.Parameters.AddWithValue("un",line);        
 cmd.ExecuteNonQuery();
 con.Close(); 
```

建议plzz我很困惑！:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T12:18:06.537

正如我之前在这个网站上所说的那样——整个*User Instance 和 AttachDbFileName=*方法是有缺陷的——充其量是！Visual Studio 将在`.mdf`文件周围进行复制，并且**很可能**，您的`UPDATE`工作正常 - 但您最终只是查看了**错误的`.mdf`文件**！

如果您想坚持使用这种方法，请尝试在`con.Close()`调用上设置断点 - 然后`.mdf`使用 SQL Server Mgmt Studio Express 检查文件 - 我几乎可以肯定您的数据在那里。

**我认为真正的解决**方案是

1.  安装 SQL Server Express（反正你已经完成了）

2.  安装 SQL Server Management Studio Express

3.  **在SSMS Express**中创建您的数据库，给它一个逻辑名称（例如`ASPNETDB`）

4.  使用它的逻辑**数据库名称**（在服务器上创建它时给出）连接到它——不要乱用物理数据库文件和用户实例。在这种情况下，您的连接字符串将类似于：

    ```
    Data Source=.\\SQLEXPRESS;Database=ASPNETDB;Integrated Security=True 
    ```

    其他一切都和以前**完全**一样......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T09:57:18.473

`cmd.Parameters.AddWithValue("@fn", TextBox3.Text);`

您必须指定参数名称以及 '@' 。

# sql - T-SQL to loop through records in one table and modify field value based on another table

> ID：11116884
> 
> 赞同：1
> 
> 时间：2012-06-20T09:48:08.013
> 
> 标签：sql, sql-server-2008, tsql

I have 2 tables. `TableA` has a series of products with costs and `TableB` has a series of multipliers based on dates. For example:

**TableA** (Key: Product)

```
Product ID     Cost   Multiplier Code
ProductA       100    ABC
ProductB       200    DEF
ProductC       300    ABC
ProductD       400    JKL 
```

**TableB** (Key: Date, Code)

```
Date        Code   Multiplier
01/01/12    ABC    100
01/01/12    DEF    200
01/01/12    GHI    300
01/01/12    JKL    400
16/03/12    ABC    300
20/06/12    ABC    900
15/05/12    DEF    700 
```

**Desired results:**

**TableA** (Key: Product)

```
Product ID     Cost      Multiplier Code
ProductA       90000     ABC
ProductB       140000    DEF
ProductC       270000    ABC
ProductD       160000    JKL 
```

What I would like to do is write a T-SQL script which loops through ALL of `TableA` and at the same time, ***multiply up*** the `Cost` column using `TableB` multipliers. So in the example of **ProductA** above, `Cost` should become `100 x 900 = 90,000`.

It needs to use the latest modifier based on the date in `TableB` hence using 900 as the modifier.

Is this possible?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:07:49.397

尝试：

```
UPDATE  a
SET     Cost *= _b.Multiplier
FROM    a
JOIN    (
    SELECT  Code,
            Multiplier,
            ROW_NUMBER() OVER (PARTITION BY Code ORDER BY Date DESC) RowNum
    FROM    b
) _b ON _b.Code = a.Code AND _b.RowNum = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:21:26.690

尝试这个：

```
UPDATE Product 
SET COST = COST *
(
    SELECT TOP 1 Multiplier 
    FROM Date_Code 
    WHERE Product.MultiplierCode = Date_Code.Code
    ORDER BY CodeDate DESC
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:01:56.507

```
update TableA
set a.Cost = a.Cost * aux2.Multiplier
from TableA a
inner join 
(select b.Code, b.Multiplier from TableB b
 inner join
    (select max(Date) as 'Date', Code
    from TableB
    group by Code) aux on b.Date = aux.Date and b.Code = aux.Code
) aux2 on aux2.Code = a.MultiplierCode 
```

`aux`获取给定代码的最大日期。 `aux2`获取 中日期的乘数`aux`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T09:58:47.560

```
select p.productid,
       p.cost * m.multiplier,
       p.multiplier_code
from tableA p
  join (
    select b1.multiplier, b1.code
    from tableB b1
    where b1.date = (select max(b2.date)
                     from tableB b2
                     where b2.code = b1.code)
  ) m on p.multiplier_code = m.code 
```

# jquery - auto update a jsp page when data is updated to database

> ID：11116885
> 
> 赞同：0
> 
> 时间：2012-06-20T09:48:10.633
> 
> 标签：jquery, jsp

I've a home.jsp (displays data in tabular form) inside a form which opens a pop up window to update data (editUser.jsp).

```
<form method ="post" action="editUser.jsp"  onsubmit="target_popup(this)"> 
```

editUser.jsp has a form to update data

```
<form method="post" action="edit.jsp">

/*HTML FORM*/ 
```

after clicking on submit button it goes to edit.jsp page to update data to the database. *In the edit.jsp page contains only java code for updating data and nothing else*.

**Now i've to auto refresh home.jsp page after the data is inserted to database or when the submit button is pressed in editUser.jsp?** How can I do it?? Till now I've to manually refresh the page.**control flow of webpages**

> home.jsp ->editUser.jsp -> edit.jsp

```
$(function(){
               $("#submit").click(function(){

                  var a=$("#ID").val();
                  var b=$("#NAME").val();
                  var c=$("#PWD").val();
                  var datastring='ID=' + a + '&NAME=' + b+'&PWD='+c ;

                        $.ajax
                        ({
                                type: "POST",
                                url: "edit.jsp",
                                data: datastring,
                                success: function(){

                                        window.close();
                                        window.location.href="home.jsp";

                                                        }
                        });
               });
            }); 
```

but this code is not working. How can I do it????

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:52:48.607

您可能有兴趣为您的用例实现类似[Knockout的功能。](http://knockoutjs.com/)它是一个 Javascript MVVM 框架，支持可观察对象，可在服务器更改时在客户端自动刷新。这样，您就不必进行硬页面刷新/重新加载。

# xml - 有没有办法使用 VBA 和 XML 根据文件名中的字符串向 Office 2010 功能区添加按钮？

> ID：11116890
> 
> 赞同：4
> 
> 时间：2012-06-20T09:48:29.433
> 
> 标签：xml, vba, ms-word, ribbon, office-2010

我使用 XML、VBA 的组合 - 使用自定义 UI 编辑器，对 Microsoft Word 中的 Office 2010 功能区进行了一些相当广泛的自定义。

我要确定的是，是否可以根据在当前文件名中是否找到某个字符串来向功能区添加按钮。例如：

*   如果 fileName 包含“PM”（可能使用 InStr 方法）
*   将按钮添加到功能区

任何指针、示例或文章将不胜感激。我已经进行了一些挖掘，但还没有找到合适的方法。

我希望使用 XML 中的 Onload 属性来触发检测文件名并相应地操作功能区的相关子。

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T10:48:09.637

是的。您可以在运行时使用 VBA 更改功能区的布局。

您必须在 customUI-xml 中添加控件，然后在引用 VBA 函数的控件中添加 getVisible-tag - 您可以从自定义 UI 编辑器中获取 VBA 函数的正确签名。然后该函数返回一个布尔值，如果您希望控件显示，则返回 True，否则返回 False。您可以评估文件名或您想要的任何其他内容，然后返回所需的值。

示例自定义UI：

```
<button id="btnTest" label="Try me" imageMso="FileMarkAsFinal" size="large" supertip="I dare you!" getVisible="GetBtnTestVisible" /> 
```

示例 VBA：

```
'Callback for btnTest getVisible
Sub GetBtnTestVisible(control As IRibbonControl, ByRef returnedVal)
    'Evaluate and set returnedVal accordingly
    returnedVal = True  'Control visible
    returnedVal = False 'Control hidden
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:15:38.273

通过抓取命令行获取文件名： [我对超级用户的回答](https://superuser.com/questions/438842/excel-workbook-desktop-shortcut-with-auto-password/438888#438888)
然后您应该能够根据从该例程返回的内容设置工具栏按钮的可见状态

# android - Set volume using seekbar

> ID：11116893
> 
> 赞同：0
> 
> 时间：2012-06-20T09:48:37.783
> 
> 标签：android, seekbar

> **Possible Duplicate:**
> [Using SeekBar to Control Volume in android?](https://stackoverflow.com/questions/10134338/using-seekbar-to-control-volume-in-android)

How can i set the volume using seekbar in my android application?? I want to accurate the ringer volume from my application rather to set it from phone. Any thoughts ??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:00:28.647

干得好

```
AudioManager audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
    volumeSeekbar.setMax(audioManager.getStreamMaxVolume(AudioManager.STREAM_RING));
    volumeSeekbar.setProgress(audioManager.getStreamVolume(AudioManager.STREAM_RING));

    volumeSeekbar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
        @Override
        public void onStopTrackingTouch(SeekBar arg0) {}

        @Override
        public void onStartTrackingTouch(SeekBar arg0) {}

        @Override
        public void onProgressChanged(SeekBar arg0, int progress, boolean arg2) {
            audioManager.setStreamVolume(AudioManager.STREAM_RING, progress, 0);
        }
    }); 
```

# .net - 需要 firebird 事件侦听器第二次连接到 .NET 上的服务器吗？

> ID：11116894
> 
> 赞同：2
> 
> 时间：2012-06-20T09:48:38.690
> 
> 标签：.net, events, firebird

我正在编写 .NET 4 应用程序，同步数据。我想使用 Firebird (v2.5) 事件，就像在[这个例子](http://www.firebirdsql.org/en/net-examples-of-use/#firebird_events)中一样。

我的问题：我是否需要一个额外的连接来监听事件和第二个连接来传输数据？我在示例中看到，事件侦听器的连接保持打开...

谢谢你的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:33:59.100

理论上，您可以使用用于启动事件的连接来侦听数据传输。事件在后台使用不同的渠道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T16:45:23.020

所以，我只是用客户端的最新版本（v 2.7.7）做了一些测试，看起来连接必须保持打开状态。如果我关闭连接，侦听线程会因此异常而终止（来自调试输出）：

```
A first chance exception of type 'System.InvalidOperationException' occurred in FirebirdSql.Data.FirebirdClient.dll
A first chance exception of type 'System.Threading.ThreadAbortException' occurred in FirebirdSql.Data.FirebirdClient.dll
An exception of type 'System.Threading.ThreadAbortException' occurred in FirebirdSql.Data.FirebirdClient.dll but was not handled in user code
The thread 'FirebirdClient - Events Thread' (0x1e8c) has exited with code 0 (0x0) 
```

# python - Python: Why is __getattr__ catching AttributeErrors?

> ID：11116896
> 
> 赞同：14
> 
> 时间：2012-06-20T09:48:45.313
> 
> 标签：python, exception, exception-handling, python-3.x, python-2.7

I'm struggling with `__getattr__`. I have a complex recursive codebase, where it is important to let exceptions propagate.

```
class A(object):
    @property
    def a(self):
        raise AttributeError('lala')

    def __getattr__(self, name):     
        print('attr: ', name)
        return 1      

print(A().a) 
```

Results in:

```
('attr: ', 'a')
1 
```

Why this behaviour? Why is no exception thrown? This behaviour is not documented ([`__getattr__` documentation](http://docs.python.org/reference/datamodel.html?highlight=__getattribute__#object.__getattr__)). `getattr()` could just use `A.__dict__`. Any thoughts?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T10:08:21.960

我只是将代码更改为

```
class A(object):
    @property
    def a(self):
        print "trying property..."
        raise AttributeError('lala')
    def __getattr__(self, name):     
        print('attr: ', name)
        return 1      

print(A().a) 
```

而且，正如我们所看到的，确实首先尝试了该属性。但由于它声称不存在（通过提高`AttributeError`），`__getattr__()`因此被称为“最后的手段”。

它没有明确记录，但可以计入“当属性查找未在通常位置找到属性时调用”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-17T10:03:51.050

在同一个类中使用`__getattr__`和属性是危险的，因为它可能导致非常难以调试的错误。

如果属性的 getter 抛出`AttributeError`，则 会`AttributeError`被静默捕获并被`__getattr__`调用。通常，这会导致`__getattr__`失败并出现异常，但如果您非常不走运，则不会，您甚至无法轻松地将问题追溯到`__getattr__`.

除非你的属性 getter 是微不足道的，否则你永远不能 100% 确定它不会抛出`AttributeError`. 异常可能会被抛出几个级别。

这是您可以执行的操作：

1.  `__getattr__`避免在同一个类中使用属​​性。
2.  `try ... except`为所有不平凡的属性获取器添加一个块
3.  保持属性 getter 简单，这样你就知道他们不会抛出`AttributeError`
4.  编写您自己的`@property`装饰器版本，将其捕获`AttributeError`并重新抛出为`RuntimeError`.

另见[http://blog.devork.be/2011/06/using-getattr-and-property_17.html](http://blog.devork.be/2011/06/using-getattr-and-property_17.html)

编辑：如果有人正在考虑解决方案 4（我不推荐），可以这样做：

```
def property_(f):
    def getter(*args, **kwargs):
        try:
            return f(*args, **kwargs)
        except AttributeError as e:
            raise RuntimeError, "Wrapped AttributeError: " + str(e), sys.exc_info()[2]

    return property(getter) 
```

然后在覆盖的类中使用`@property_`而不是。`@property``__getattr__`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-20T10:46:11.267

[`__getattribute__`文档](http://docs.python.org/dev/reference/datamodel.html#object.__getattribute__)说：

> 如果该类还定义了`__getattr__()`，则不会调用后者，除非`__getattribute__()`显式调用它或引发`AttributeError`.

我读到这个（通过*inclusio unius est exclusio alterius*）说属性访问**将**调用`__getattr__`if `object.__getattribute__`（这是“*无条件地调用以实现属性访问*”）碰巧引发`AttributeError`- 无论是直接还是在描述符内部`__get__`（例如属性 fget）；请注意，[`__get__`](http://docs.python.org/dev/reference/datamodel.html#object.__get__)应该“*返回（计算的）属性值或引发`AttributeError`异常*”。

作为一个类比，运算符特殊方法可以引发`NotImplementedError`其他运算符方法（例如`__radd__`for `__add__`）将被尝试。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-20T10:11:49.543

`__getattr__`当属性访问失败并出现 AttributeError 时调用。也许这就是您认为它“捕获”错误的原因。但是，它没有，它是 Python 的属性访问功能捕获它们，然后调用`__getattr__`.

但`__getattr__`它本身并没有捕捉到任何错误。如果您提出 AttributeError ，`__getattr__`您将获得无限递归。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-13T11:20:11.210

经常遇到这个问题，因为我实现`__getattr__`了很多并且有很多`@property`方法。这是我想出的一个装饰器，以获得更有用的错误消息：

```
def replace_attribute_error_with_runtime_error(f):
    @functools.wraps(f)
    def wrapped(*args, **kwargs):
        try:
            return f(*args, **kwargs)
        except AttributeError as e:
            # logging.exception(e)
            raise RuntimeError(
                '{} failed with an AttributeError: {}'.format(f.__name__, e)
            )
    return wrapped 
```

并像这样使用它：

```
class C(object):

    def __getattr__(self, name):
        ...

    @property
    @replace_attribute_error_with_runtime_error
    def complicated_property(self):
        ...

    ... 
```

底层异常的错误消息将包括其实例引发底层的类的名称`AttributeError`。如果你愿意，你也可以记录它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-07T15:36:00.503

`@property`无论如何，当您与以下内容结合时，您注定要失败`__getattr__`：

```
class Paradise:
    pass

class Earth:
    @property
    def life(self):
        print('Checking for paradise (just for fun)')
        return Paradise.breasts
    def __getattr__(self, item):
        print("sorry! {} does not exist in Earth".format(item))

earth = Earth()
try:
    print('Life in earth: ' + str(earth.life))
except AttributeError as e:
    print('Exception found!: ' + str(e)) 
```

给出以下输出：

```
Checking for paradise (just for fun)
sorry! life does not exist in Earth
Life in earth: None 
```

当你真正的问题是打电话时`Paradise.breasts`。

`__getattr__`总是在 an`AtributeError`上升时被调用。异常的内容被忽略。

可悲的是，给定的这个问题没有解决方案`hasattr(earth, 'life')`将返回`True`（只是因为`__getattr__`已定义），但仍然会通过属性 'life' 到达，因为它不存在，而真正的潜在问题是 with `Paradise.breasts`。

`@property`我的部分解决方案涉及在已知会遇到`AttributeError`异常的块中使用 try-except 。

# ruby-on-rails - 不使用 Tmail 解析电子邮件

> ID：11116897
> 
> 赞同：0
> 
> 时间：2012-06-20T09:48:48.280
> 
> 标签：ruby-on-rails, parsing

如果不使用像 TMail 这样使用 Ruby on Rails 为您解析的库，您将如何解析电子邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:17:10.293

由于这是一个作业，我将用一些概述电子邮件应该采用的格式的资源来回答：

有几个电子邮件规范

*   [https://www.rfc-editor.org/rfc/rfc822](https://www.rfc-editor.org/rfc/rfc822) - 概述第一个版本（1982 年）
*   [https://www.rfc-editor.org/rfc/rfc2822](https://www.rfc-editor.org/rfc/rfc2822) - 更新了这个（2001）
*   [https://www.rfc-editor.org/rfc/rfc5322](https://www.rfc-editor.org/rfc/rfc5322) - 是最新更新（2008 年）

根据您实际需要实现多少，我建议从第一个开始，因为它是最简单的。这些概述了消息将采用的模式和格式。

首先，您会找到标头，然后是两个回车，然后是消息正文。这里有几个选项。很有可能从正则表达式开始，甚至只是模式匹配，但可能值得更详细地研究 Parsing Expression Grammars（[例如树顶](http://treetop.rubyforge.org/)）。

我希望这能让你开始。

# php - jquery post with $.ajax，如何避免多个帖子？

> ID：11116908
> 
> 赞同：2
> 
> 时间：2012-06-20T09:49:39.497
> 
> 标签：php, jquery, http-post

仍在寻找解决方案但尚未找到，我有一个功能来管理相同/不同页面上的不同表单

```
function formStantardAction(correctAnswer,addCustomData){
        addCustomData = (typeof addCustomData == "undefined")?'':addCustomData;
    correctAnswer = (typeof correctAnswer == "undefined")?'Saved.':correctAnswer;
    $('form.standard').submit(function(event){
        event.preventDefault();
        var modalWin = $(this).parent();
        var values = $('form.standard').serialize() + addCustomData;
        $.ajax({
        url: "inc/gateway.php",
        data: values,
        type: "POST",
        success: function(data){
            if (data == "OK"){
                $(modalWin).html(correctAnswer).delay(500).fadeOut(500);
                setTimeout(function() {
                    mw_close();
                }, 1000);
            }else{
                alert(data);
            }
        }
        });

    });
    } 
```

在使用名为 SEND 的输入 type="button" 加载页面和表单后

```
$('form.standard [name="SEND"]').click(function(){
            var str = $('#sortableTo').serializelist();
        formStantardAction('New train inserted.',str);
            $('form.standard').submit();
        }); 
```

所有值都通过 POST 到达一个 php 页面，该页面完成了所有操作（验证、插入数据库、更新日志...），如果一切正常，则用“OK”回答（因此模式窗口中的表单被自定义消息替换，并且淡出）或...如果出现错误，php 会回答一些文本，这些文本会弹出 js 并发出警报，使模式窗口与表单一起打开。

没关系，但是，如果 php 回答错误，则第二次单击 SEND 按钮，帖子将被发送 2 次。如果我在第二次发送时再次出错，然后再次单击发送按钮，则帖子值将发送三次......等等。

我能做些什么？我的错误在哪里？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:27:10.073

尝试排除提交块：

```
 function formStantardAction(correctAnswer,addCustomData){
        addCustomData = (typeof addCustomData == "undefined")?'':addCustomData;
    correctAnswer = (typeof correctAnswer == "undefined")?'Saved.':correctAnswer;
    //$('form.standard').submit(function(event){
     //   event.preventDefault();
//change 'this' to form.standard
        var modalWin = $('form.standard').parent();
        var values = $('form.standard').serialize() + addCustomData;
        $.ajax({
        url: "inc/gateway.php",
        data: values,
        type: "POST",
        success: function(data){
            if (data == "OK"){
                $(modalWin).html(correctAnswer).delay(500).fadeOut(500);
                setTimeout(function() {
                    mw_close();
                }, 1000);
            }else{
                alert(data);
            }
        }
        });

    });
   // } 
```

并在加载页面后：

```
 $('form.standard [name="SEND"]').click(function(){
                var str = $('#sortableTo').serializelist();
            formStantardAction('New train inserted.',str);
//excluding submit event
               // $('form.standard').submit();
            }); 
```

因为带有 type:"Post" 的 $.ajax {} 已经是一个提交过程，然后当脚本调用提交时它会重新提交。

希望这是正确的和帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:55:31.447

每次从 ajax 请求取回数据时，是否有可能在代码中的某个地方将提交事件绑定到表单？

我无法在您在此处提交的代码中检查这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T09:58:20.277

创建一个全局变量作为标志

```
var flag = 0; 
```

并在发布时检查此标志并在完成后将其重置

```
function formStantardAction(correctAnswer,addCustomData){
       **if(flag == 1){
           return false;
       }
       flag = 1;**
        addCustomData = (typeof addCustomData == "undefined")?'':addCustomData;
    correctAnswer = (typeof correctAnswer == "undefined")?'Saved.':correctAnswer;
    $('form.standard').submit(function(event){
        event.preventDefault();
        var modalWin = $(this).parent();
        var values = $('form.standard').serialize() + addCustomData;
        $.ajax({
        url: "inc/gateway.php",
        data: values,
        type: "POST",
        success: function(data){
           **flag = 0;**
            if (data == "OK"){
                $(modalWin).html(correctAnswer).delay(500).fadeOut(500);
                setTimeout(function() {
                    mw_close();
                }, 1000);
            }else{
                alert(data);
            }
        }
        });

    });
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T09:58:46.013

我在提交函数的开头放置了一些自定义代码 - 基本上，如果正在进行提交，则不应执行任何操作，否则会像往常一样返回错误消息。

```
var submitting = false; //initialise the variable, this needs to be out of the function!
function formStantardAction(correctAnswer,addCustomData){
    addCustomData = (typeof addCustomData == "undefined")?'':addCustomData;
correctAnswer = (typeof correctAnswer == "undefined")?'Saved.':correctAnswer;

$('form.standard').submit(function(event){
    if (submitting) {
        return false; //if a submit is in progress, prevent further clicks from doing anything
    } else {
        submitting = true; //no submit in progress, but let's make one now
    }
    event.preventDefault();
    var modalWin = $(this).parent();
    var values = $('form.standard').serialize() + addCustomData;
    $.ajax({
    url: "inc/gateway.php",
    data: values,
    type: "POST",
    success: function(data){
        if (data == "OK"){
            $(modalWin).html(correctAnswer).delay(500).fadeOut(500);
            setTimeout(function() {
                mw_close();
            }, 1000);
        }else{
            alert(data);
        }
    }
    });

});
} 
```

# pdf - PdfBox text width greater than page width

> ID：11116911
> 
> 赞同：0
> 
> 时间：2012-06-20T09:49:55.130
> 
> 标签：pdf, pdf-generation, pdfbox

I am working with PdfBox. I have a very long string, i want to write that string to Pdf file. I want to check if the length of the string is greater than page width.

```
PDPage page = new PDPage();
page.setMediaBox(PDPage.PAGE_SIZE_A4);
PDSimpleFont font = PDType1Font.HELVETICA;
float titleWidth = (font.getStringWidth(pdfLine) ) / 1000 * fontSize;
int width = PDPage.PAGE_SIZE_A4.getWidth();

if(titleWidth > width)
{
 //do something
} 
```

The problem that I am getting is that the width is not correct. When I get the width I divide the string into parts of that length so that it is within the page width. I guess I need to convert the width of the text into the length of the Java string that the page can hold. But I don't know how to do it.

# spring - Spring + Hibernate + Maven NullPointerException

> ID：11116912
> 
> 赞同：0
> 
> 时间：2012-06-20T09:49:55.837
> 
> 标签：spring, hibernate, unit-testing, jpa, hibernate-entitymanager

我认为在我的项目中添加一些测试是个好主意，但在这个过程中，我不知何故设法让真正的交易破裂。

我正在使用带有 JPA（休眠）的 Spring MVC。entityManager 无法再正确加载：

```
INFO - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@3aa1e2da: defining beans [dataSource,org.springframework.context.support.PropertySourcesPlaceholderConfigurer#0,signatureBlobService,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0,org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#0,org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver#0,org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver#0,org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter,org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter,validator,emf,org.springframework.security.filterChains,org.springframework.security.filterChainProxy,org.springframework.security.web.PortMapperImpl#0,org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0,org.springframework.security.authentication.ProviderManager#0,org.springframework.security.web.context.HttpSessionSecurityContextRepository#0,org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy#0,org.springframework.security.web.savedrequest.HttpSessionRequestCache#0,org.springframework.security.web.access.expression.DefaultWebSecurityExpressionHandler#0,org.springframework.security.access.vote.AffirmativeBased#0,org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0,org.springframework.security.web.access.DefaultWebInvocationPrivilegeEvaluator#0,org.springframework.security.authentication.AnonymousAuthenticationProvider#0,org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint#0,org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0,org.springframework.security.userDetailsServiceFactory,org.springframework.security.web.DefaultSecurityFilterChain#0,org.springframework.security.provisioning.InMemoryUserDetailsManager#0,org.springframework.security.authentication.dao.DaoAuthenticationProvider#0,org.springframework.security.authentication.DefaultAuthenticationEventPublisher#0,org.springframework.security.authenticationManager]; root of factory hierarchy
INFO - Hibernate Validator 4.2.0.Final
INFO - Building JPA container EntityManagerFactory for persistence unit 'default'
INFO - HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
INFO - HHH000412: Hibernate Core {4.1.4.Final}
INFO - HHH000206: hibernate.properties not found
INFO - HHH000021: Bytecode provider name : javassist
INFO - HHH000204: Processing PersistenceUnitInfo [
    name: default
    ...]
INFO - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@3aa1e2da: defining beans [dataSource,org.springframework.context.support.PropertySourcesPlaceholderConfigurer#0,signatureBlobService,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0,org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#0,org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver#0,org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver#0,org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter,org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter,validator,emf,org.springframework.security.filterChains,org.springframework.security.filterChainProxy,org.springframework.security.web.PortMapperImpl#0,org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0,org.springframework.security.authentication.ProviderManager#0,org.springframework.security.web.context.HttpSessionSecurityContextRepository#0,org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy#0,org.springframework.security.web.savedrequest.HttpSessionRequestCache#0,org.springframework.security.web.access.expression.DefaultWebSecurityExpressionHandler#0,org.springframework.security.access.vote.AffirmativeBased#0,org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0,org.springframework.security.web.access.DefaultWebInvocationPrivilegeEvaluator#0,org.springframework.security.authentication.AnonymousAuthenticationProvider#0,org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint#0,org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0,org.springframework.security.userDetailsServiceFactory,org.springframework.security.web.DefaultSecurityFilterChain#0,org.springframework.security.provisioning.InMemoryUserDetailsManager#0,org.springframework.security.authentication.dao.DaoAuthenticationProvider#0,org.springframework.security.authentication.DefaultAuthenticationEventPublisher#0,org.springframework.security.authenticationManager]; root of factory hierarchy
ERROR - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'emf' defined in ServletContext resource [/WEB-INF/spring/root-context.xml]: Invocation of init method failed; nested exception is java.lang.RuntimeException: error trying to scan <jar-file>: file:/Users/XXX/Documents/Coding/Webapps/.metadata/.plugins/org.eclipse.wst.server.core/tmp2/wtpwebapps/XXX/WEB-INF/classes/
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.RuntimeException: error trying to scan <jar-file>: file:/Users/david/Documents/Coding/Webapps/.metadata/.plugins/org.eclipse.wst.server.core/tmp2/wtpwebapps/payworkssign/WEB-INF/classes/
    at org.hibernate.ejb.Ejb3Configuration.scanForClasses(Ejb3Configuration.java:855)
    at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:597)
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:73)
    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:268)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 22 more
Caused by: java.lang.RuntimeException: java.lang.NullPointerException
    at javassist.bytecode.AnnotationsAttribute.getAnnotations(AnnotationsAttribute.java:230)
    at javassist.bytecode.AnnotationsAttribute.getAnnotation(AnnotationsAttribute.java:184)
    at org.hibernate.ejb.packaging.AbstractJarVisitor.checkAnnotationMatching(AbstractJarVisitor.java:256)
    at org.hibernate.ejb.packaging.AbstractJarVisitor.executeJavaElementFilter(AbstractJarVisitor.java:212)
    at org.hibernate.ejb.packaging.AbstractJarVisitor.addElement(AbstractJarVisitor.java:173)
    at org.hibernate.ejb.packaging.ExplodedJarVisitor.getClassNamesInTree(ExplodedJarVisitor.java:126)
    at org.hibernate.ejb.packaging.ExplodedJarVisitor.getClassNamesInTree(ExplodedJarVisitor.java:134)
    at org.hibernate.ejb.packaging.ExplodedJarVisitor.getClassNamesInTree(ExplodedJarVisitor.java:134)
    at org.hibernate.ejb.packaging.ExplodedJarVisitor.getClassNamesInTree(ExplodedJarVisitor.java:134)
    at org.hibernate.ejb.packaging.ExplodedJarVisitor.getClassNamesInTree(ExplodedJarVisitor.java:134)
    at org.hibernate.ejb.packaging.ExplodedJarVisitor.doProcessElements(ExplodedJarVisitor.java:92)
    at org.hibernate.ejb.packaging.AbstractJarVisitor.getMatchingEntries(AbstractJarVisitor.java:149)
    at org.hibernate.ejb.packaging.NativeScanner.getFilesInJar(NativeScanner.java:192)
    at org.hibernate.ejb.Ejb3Configuration.addScannedEntries(Ejb3Configuration.java:504)
    at org.hibernate.ejb.Ejb3Configuration.scanForClasses(Ejb3Configuration.java:852)
    ... 28 more
Caused by: java.lang.NullPointerException
    at javassist.bytecode.ConstPool.getUtf8Info(ConstPool.java:616)
    at javassist.bytecode.annotation.Annotation.addMemberValue(Annotation.java:205)
    at javassist.bytecode.annotation.Annotation.addMemberValue(Annotation.java:185)
    at javassist.bytecode.AnnotationsAttribute$Parser.memberValuePair(AnnotationsAttribute.java:625)
    at javassist.bytecode.AnnotationsAttribute$Walker.memberValuePair(AnnotationsAttribute.java:355)
    at javassist.bytecode.AnnotationsAttribute$Walker.annotation(AnnotationsAttribute.java:348)
    at javassist.bytecode.AnnotationsAttribute$Parser.annotation(AnnotationsAttribute.java:620)
    at javassist.bytecode.AnnotationsAttribute$Walker.annotation(AnnotationsAttribute.java:343)
    at javassist.bytecode.AnnotationsAttribute$Parser.annotationArray(AnnotationsAttribute.java:610)
    at javassist.bytecode.AnnotationsAttribute$Walker.annotationArray(AnnotationsAttribute.java:330)
    at javassist.bytecode.AnnotationsAttribute$Walker.annotationArray(AnnotationsAttribute.java:325)
    at javassist.bytecode.AnnotationsAttribute$Parser.parseAnnotations(AnnotationsAttribute.java:588)
    at javassist.bytecode.AnnotationsAttribute.getAnnotations(AnnotationsAttribute.java:227)
    ... 42 more 
```

跑步时

```
mvn test 
```

一切都贯穿。在那里我使用嵌入式 H2 数据库删除与测试相关的东西（依赖项等）并没有解决问题。

如果我理解正确的话，Javassist 在这种情况下负责注释。我的问题是我不知道在哪里继续寻找。这真的是UTF8问题吗？为什么它试图扫描`/classes`目录，同时认为它是一个 jar 文件？

其他可能与该问题相关的列表：

1.  我在 eclipse 中玩了一下项目配置（为 maven、wst 添加）。我确实再次删除了此配置以尝试是否有所作为。我也曾经`mvn package war:war`在本地 tomcat 上部署应用程序。同样的错误发生在这里。再次`mvn test`工作正常

2.  我将 hibernate-validator 和 hibernate-entitymanager 更新到了最新版本。但是，再次降级仍然存在问题。

定位问题可能需要的其他一些信息：

我的 root-context.xml 的相关部分

```
<!-- Enable JPA Support -->
<!-- Enable Annotation driven declaration -->
<tx:annotation-driven transaction-manager="transactionManager"/>
<!-- Define transaction Manager -->
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="emf"/>
</bean>
<bean id="emf" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />
    </property>
    <property name="packagesToScan" value="com.payworksmobile.dev.jpa"/>
    <property name="jpaProperties">
        <props>
            <prop key="hibernate.dialect">
                org.hibernate.dialect.MySQLDialect
            </prop>
            <prop key="hibernate.max_fetch_depth">3</prop>
            <prop key="hibernate.jdbc.fetch_size">50</prop>
            <prop key="hibernate.jdbc.batch_size">10</prop>
            <prop key="hibernate.show_sql">true</prop>
        </props>
    </property>
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:06:48.300

我什至无法猜测可能是什么问题。

在这种情况下，当您不知道出了什么问题时，您可以这样做（我希望您的源代码在存储库中（svn/git 等））。

您只需将项目签出/克隆到一个新位置并构建它，看看它是否正常。您有可能没有提交破坏它的更改。

如果问题仍然存在，那么您只需返回旧版本，依此类推，直到您到达最后一个工作版本。然后，您将上一个工作版本与下一个（损坏的）版本进行比较，然后 tada！，您将首先看到导致问题的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:49:35.093

在发布这个问题之前尝试了很多事情之后，我实际上只是偶然发现了解决方案：

`WEB-INF/classes`我从我的文件夹中的测试用例中找到了两个类。这些类实际上是我的测试的配置类。删除它们后，一切都像魅力一样运行。在提取我的战争文件并从我的测试中寻找剩余部分后，我在那里找到了这些类。

为什么会这样？（这只是我的猜测）在 eclipse 中创建一个新的测试文件夹时，我花了一些时间来修改我的 pom.xml 以将此文件夹视为`<testSourceDirectory>`. Eclipse 在两者之间构建项目，将类文件从我的测试配置类复制到`WEB-INF/classes`. 这不知何故弄乱了 Spring 和 Hibernate。我的学习：检查只有相关的类被复制到战争文件中，并且 WEB-INF/classes 不包含任何剩余部分。

# android - OutofMemoryError ImageView

> ID：11116913
> 
> 赞同：0
> 
> 时间：2012-06-20T09:49:56.110
> 
> 标签：android, out-of-memory, viewflipper

I have a problem with imageview, i have 77 picture jpg and have 126 quote text, just simple app i want is i want show all quote with background picture and i use viewflipper so when i swipe left/right get into next quote. I give you my code that i use now. Hope that anyone can help me.. Really wasting my time to fix it. My picture : 320x480.

```
 vf = (ViewFlipper) findViewById(R.id.pages);
            for (i = 0; i<totalphrase;i++) {
                Log.i("ID",""+i);
                var = arrayphrase.get(i);

                //iv.setBackgroundColor(Color.rgb((int)Math.ceil(Math.random()*100), (int)Math.ceil(Math.random()*100), (int)Math.ceil(Math.random()*100)));
                FrameLayout a = new FrameLayout(this);
                FrameLayout.LayoutParams lp = new FrameLayout.LayoutParams(FrameLayout.LayoutParams.FILL_PARENT, FrameLayout.LayoutParams.FILL_PARENT); 
                a.setLayoutParams(lp);

                b = new ImageView(this);
                LinearLayout.LayoutParams lp1 = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.FILL_PARENT);
                FrameLayout.LayoutParams lp2= new FrameLayout.LayoutParams(740, 800,Gravity.CENTER);
                //b.setBackgroundColor(Color.rgb((int)Math.ceil(Math.random()*100), (int)Math.ceil(Math.random()*100), (int)Math.ceil(Math.random()*100)));

   // i got outofmemoryerror with this, Imgid[] -> my picture in drawable there ara 77picture
    b.setBackgroundResource(Imgid[(int)(Math.random()*Imgid.length)]);
    // -- ERROR --  outofmemory             
                b.setLayoutParams(lp1);
                a.addView(b);

                c = new ScrollView(this);
                c.setLayoutParams(lp2);
                //c.setBackgroundColor(Color.CYAN);
                c.setBackgroundColor(Color.argb(65, 53, 52, 52));
                //idsc = c.getId();
                a.addView(c);

                LinearLayout d = new LinearLayout(this);
                d.setLayoutParams(lp1);
                //d.setBackgroundResource(R.drawable.background0);
                c.addView(d);

                TextView e = new TextView(this);
                LinearLayout.LayoutParams lp3 = new LinearLayout.LayoutParams(730, 800);
                e.setLayoutParams(lp1);
                e.setText(var.phraseKey);

                d.addView(e);

                vf.addView(a);

            }

        } 
```

The result that i want like this : [example that i want to build in android](http://img577.imageshack.us/img577/7577/20120620163458.jpg)

and this is xml

```
 <?xml version="1.0" encoding="utf-8"?>

    <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"

        android:orientation="vertical"

        android:layout_width="fill_parent"

        android:layout_height="fill_parent"

        android:id="@+id/fl1"
        >

        <ViewFlipper

            android:id="@+id/pages"

            android:layout_width="fill_parent"

            android:layout_height="fill_parent" 

            android:background="@android:color/transparent"

            android:layout_gravity="top"
            >
        </ViewFlipper>

    </FrameLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:02:50.730

我建议创建一个包含评论和图片路径的 2 dim 数组。对于图片，创建一个缩略图。我正在用这段代码做

```
BitmapFactory.Options options=new BitmapFactory.Options();
options.inSampleSize = 4;
pic = BitmapFactory.decodeFile(strPicPath, options);
image.setImageBitmap(pic); 
```

我不确定图像是否会随着更大的 inSampleSize 变小......你必须尝试

图像采用 XML 格式：

```
<ImageView
                android:id="@+id/imagePreview"
                android:layout_width="134dp"
                android:layout_height="146dp"
                android:layout_weight="0.36"
                android:onClick="imageClick" />
</LinearLayout> 
```

我使用点击方法在图库中打开图像，但您可以进行缩放或您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T11:38:40.197

尝试在更改图像之前放置此代码：

```
imageView.getDrawable().getBitmap().recycle(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:07:54.880

要修复 OutOfMemory，您应该执行以下操作：

这是我参考的代码，它很好用，检查一下

```
BitmapFactory.Options options=new BitmapFactory.Options();
options.inSampleSize = 8;
Bitmap preview_bitmap=BitmapFactory.decodeStream(is,null,options); 
```

这个 inSampleSize 选项减少了内存消耗。

这是一个完整的方法。首先它读取图像大小而不解码内容本身。然后它找到最好的 inSampleSize 值，它应该是 2 的幂。最后图像被解码。

```
//decodes image and scales it to reduce memory consumption
private Bitmap decodeFile(File f){
    try {
        //Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //The new size we want to scale to
        final int REQUIRED_SIZE=70;

        //Find the correct scale value. It should be the power of 2.
        int scale=1;
        while(o.outWidth/scale/2>=REQUIRED_SIZE && o.outHeight/scale/2>=REQUIRED_SIZE)
            scale*=2;

        //Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {}
    return null;
} 
```

# ruby - rb_gc_mark()：未知数据类型 0x12(0x7fd31213aeb0) 非对象（带有 libgit2 和坚固的 gem）

> ID：11116920
> 
> 赞同：2
> 
> 时间：2012-06-20T09:50:02.537
> 
> 标签：ruby, git

我正在使用坚固的 gem，它使用 libgit2 在 git 存储库上运行。它工作正常，但扩展做了一些奇怪的事情并干扰了其他库的功能。在我的情况下 net/http 开始抛出异常。

就我而言，这是测试代码：

```
require 'net/http'
require 'uri'

require 'rugged'
@repo = Rugged::Repository.new(".")
@commits = []
@i = 0
walker =  @repo.walk(@repo.head.target)
  walker.each { |c|
     @commits << c
     break if @i > 2
     @i += 1
}

while true
    resource_uri = URI.parse("http://twitter.com/BigDataSG/status/182426904740102144")
    response = Net::HTTP.start(resource_uri.host, resource_uri.port) do |http|
          http.get(resource_uri.path, {'X-Token' => "TacoBell"}).....
    end
    puts response.body[0...140]
end 
```

结果是

```
/Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/protocol.rb:141: [BUG] rb_gc_mark(): unknown data type 0x12(0x7fd31213aeb0) non object
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.3.0]

-- Control frame information -----------------------------------------------
c:0020 p:---- s:0095 b:0095 l:000094 d:000094 CFUNC  :read_nonblock
c:0019 p:0025 s:0091 b:0090 l:000089 d:000089 METHOD /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/protocol.rb:141
c:0018 p:0090 s:0087 b:0087 l:000086 d:000086 METHOD /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/protocol.rb:92
c:0017 p:0067 s:0079 b:0079 l:000078 d:000078 METHOD /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:2755
c:0016 p:0102 s:0074 b:0074 l:000073 d:000073 METHOD /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:2710
c:0015 p:0043 s:0068 b:0068 l:001ee0 d:000067 BLOCK  /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:1029
c:0014 p:0017 s:0064 b:0064 l:000048 d:000063 BLOCK  /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:1322
c:0013 p:0042 s:0062 b:0062 l:000061 d:000061 METHOD /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:2671
c:0012 p:0106 s:0057 b:0057 l:000048 d:000056 BLOCK  /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:1321
c:0011 p:---- s:0055 b:0055 l:000054 d:000054 FINISH
c:0010 p:---- s:0053 b:0053 l:000052 d:000052 CFUNC  :catch
c:0009 p:0025 s:0049 b:0049 l:000048 d:000048 METHOD /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:1316
c:0008 p:0097 s:0043 b:0043 l:000042 d:000042 METHOD /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:1293
c:0007 p:0094 s:0036 b:0036 l:001ee0 d:001ee0 METHOD /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:1026
c:0006 p:0026 s:0028 b:0028 l:0015d8 d:000027 BLOCK  test.rb:19
c:0005 p:0057 s:0025 b:0025 l:000024 d:000024 METHOD /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:745
c:0004 p:0182 s:0022 b:0022 l:000021 d:000021 METHOD /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:557
c:0003 p:0174 s:0009 b:0009 l:0015d8 d:000610 EVAL   test.rb:18
c:0002 p:---- s:0004 b:0004 l:000003 d:000003 FINISH
c:0001 p:0000 s:0002 b:0002 l:0015d8 d:0015d8 TOP   

-- Ruby level backtrace information ----------------------------------------
test.rb:18:in `<main>'
/Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:557:in `start'
/Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:745:in `start'
test.rb:19:in `block in <main>'
/Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:1026:in `get'
/Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:1293:in `request'
/Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:1316:in `transport_request'
/Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:1316:in `catch'
/Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:1321:in `block in transport_request'
/Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:2671:in `reading_body'
/Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:1322:in `block (2 levels) in transport_request'
/Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:1029:in `block in get'
/Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:2710:in `read_body'
/Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:2755:in `read_body_0'
/Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/protocol.rb:92:in `read'
/Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/protocol.rb:141:in `rbuf_fill'
/Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/protocol.rb:141:in `read_nonblock'

-- C level backtrace information -------------------------------------------

   See Crash Report log file under ~/Library/Logs/CrashReporter or
   /Library/Logs/CrashReporter, for the more detail of.

-- Other runtime information -----------------------------------------------

* Loaded script: test.rb

* Loaded features:

    0 enumerator.so
    1 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.3.0/enc/encdb.bundle
    2 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.3.0/enc/trans/transdb.bundle
    3 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/defaults.rb
    4 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.3.0/rbconfig.rb
    5 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/deprecate.rb
    6 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/exceptions.rb
    7 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb
    8 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems.rb
    9 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.3.0/socket.bundle
   10 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/socket.rb
   11 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb
   12 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/protocol.rb
   13 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/common.rb
   14 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/generic.rb
   15 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/ftp.rb
   16 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/http.rb
   17 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/https.rb
   18 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/ldap.rb
   19 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/ldaps.rb
   20 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/mailto.rb
   21 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri.rb
   22 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.3.0/zlib.bundle
   23 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.3.0/stringio.bundle
   24 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb
   25 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/version.rb
   26 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/requirement.rb
   27 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/platform.rb
   28 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb
   29 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/path_support.rb
   30 /Users/me/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb
   31 /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rugged-0.16.0/lib/rugged/rugged.bundle
   32 /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rugged-0.16.0/lib/rugged/index.rb
   33 /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rugged-0.16.0/lib/rugged/objects.rb
   34 /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rugged-0.16.0/lib/rugged/version.rb
   35 /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rugged-0.16.0/lib/rugged/repository.rb
   36 /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rugged-0.16.0/lib/rugged/walker.rb
   37 /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rugged-0.16.0/lib/rugged/tree.rb
   38 /Users/me/.rvm/gems/ruby-1.9.3-p194/gems/rugged-0.16.0/lib/rugged.rb

[NOTE]
You may have encountered a bug in the Ruby interpreter or extension libraries.
Bug reports are welcome.
For details: http://www.ruby-lang.org/bugreport.html

Abort trap: 6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T07:07:08.743

发生此问题是因为本机扩展是针对旧的 libgit2 编译的。您需要做的是克隆最新的坚固存储库，rake 编译，然后“gem build rough.gemspec”。最后只需使用“gem i rough-xxxgem”安装生成的 gem

# python - 如何告诉 tox 不要从依赖项中收集测试？

> ID：11116926
> 
> 赞同：1
> 
> 时间：2012-06-20T09:50:17.513
> 
> 标签：python, unit-testing, tox

默认情况下，tox 也会从您的依赖项中收集测试，我希望它只从我的包中收集测试。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T03:02:14.933

Tox 是一个工具，它为您配置的每个 python 版本创建一个新的 virtualenv，安装您正在运行的模块，然后运行用户指定的命令来运行测试。它实际上并没有收集要运行的测试。这取决于您使用的任何测试工具：py.test、nose 等。要使用 tox 执行此操作，您将编辑/创建一个 tox.ini 以使用正确的命令将测试集合限制为您想要的任何内容.

**带鼻子：**

```
[tox]
envlist = py26,py27
[testenv]
deps=nose
commands=nosetests test.module 
```

**使用 py.test：**

```
[tox]
envlist = py26,py27
[testenv]
deps=pytest
commands=py.test test.module 
```

# .net - 动态关键字示例

> ID：11116927
> 
> 赞同：1
> 
> 时间：2012-06-20T09:50:18.813
> 
> 标签：.net, c#-4.0

我无法理解动态关键字（直到最近才使用 .net 2）。

有人可以解释一下它的用途吗？也许举一个简单但真实的例子，并解释在什么情况下可以使用，优点和缺点等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:27:21.057

在实践中，动态的正确使用很少发生，因为只有在没有（方便的）类型安全的方式来做同样的事情时才使用它。

例如：

1.  ASP.NET MVC ViewBag（一般不如自定义 ViewModel 类）
2.  从 C# 访问 Javascript 对象
3.  在一些罕见的情况下，您知道对象具有某种方法，但该方法不能静态使用。想想按照约定都具有`ID`属性的数据库实体

这些是有效的用例，但并不常见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:53:38.633

这是一种在运行时解析某些类型的方法。

```
dynamic obj = new A();
obj.method(); 
```

# asp.net - 使用 openxml 编辑 PresentationML

> ID：11116931
> 
> 赞同：3
> 
> 时间：2012-06-20T09:50:27.610
> 
> 标签：asp.net, openxml, presentationml

大家好，我正在做一个项目，我必须在单击按钮时**使用 openxml**将一些数据导出到 ppt 。这是我的 aspx 页面代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using DocumentFormat.OpenXml.Presentation;
using ODrawing = DocumentFormat.OpenXml.Drawing;
using DocumentFormat.OpenXml;
using DocumentFormat.Extensions1;
using DocumentFormat.OpenXml.Packaging;
using System.IO;

namespace TableInPPT
{
    public partial class _Default1 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_Click(object sender, EventArgs e)
        {

            string templateFile = Server.MapPath("~/Template/Sample.potm");
            string presentationFile = Server.MapPath("~/Template/SmapleNew.pptx");

            PotxToPptx(templateFile, presentationFile);
            //using (PresentationDocument themeDocument = PresentationDocument.Open(templateFile, false))
            using (PresentationDocument prstDoc = PresentationDocument.Open(presentationFile, true))
            {
                AddImage(prstDoc);
                AddTable(prstDoc);

            }
            string itemname = "SmapleNew.pptx";
            Response.Clear();

            Response.ContentType = "pptx";
            Response.AddHeader("Content-Disposition", "attachment; filename=" + itemname + "");
            Response.BinaryWrite(System.IO.File.ReadAllBytes(presentationFile));
            Response.Flush();
            Response.End();
        }
        private  void PotxToPptx(string templateFile, string presentationFile)
        {

            MemoryStream presentationStream = null;

            using (Stream tplStream = File.Open(templateFile, FileMode.Open, FileAccess.Read))
            {
                presentationStream = new MemoryStream((int)tplStream.Length);
                tplStream.Copy(presentationStream);
                presentationStream.Position = 0L;
            }

            using (PresentationDocument pptPackage = PresentationDocument.Open(presentationStream, true))
            {
                pptPackage.ChangeDocumentType(DocumentFormat.OpenXml.PresentationDocumentType.Presentation);
                PresentationPart presPart = pptPackage.PresentationPart;
                presPart.PresentationPropertiesPart.AddExternalRelationship("http://schemas.openxmlformats.org/officeDocument/2006/relationships/attachedTemplate",
                   new Uri(templateFile, UriKind.RelativeOrAbsolute));

                presPart.Presentation.Save();
            }

            File.WriteAllBytes(presentationFile, presentationStream.ToArray());
        }

        private void AddTable(PresentationDocument prstDoc)
        {

            // Add one slide
            Slide slide = prstDoc.PresentationPart.InsertSlide1("Custom Layout", 2);
            Shape tableShape = slide.CommonSlideData.ShapeTree.ChildElements.OfType<Shape>()
                                    .Where(sh => sh.NonVisualShapeProperties.NonVisualDrawingProperties.Title.Value == "TableHolder").SingleOrDefault();
            if (tableShape == null) return;

            // Create Graphic Frame
            OpenXmlCompositeElement gElement = GetGraphicFrame(tableShape);

            // Create a (6x3)Table
            ODrawing.Table openXmlTable = GetSmapleTable();

            // add table to graphic element
            gElement.GetFirstChild<ODrawing.Graphic>().GetFirstChild<ODrawing.GraphicData>().Append(openXmlTable);

            slide.CommonSlideData.ShapeTree.Append(gElement);
            slide.CommonSlideData.ShapeTree.RemoveChild<Shape>(tableShape);

            prstDoc.PresentationPart.Presentation.Save();
        }
        private void AddImage(PresentationDocument prstDoc)
        {
            string imgpath = Server.MapPath("~/Template/xxxx.jpg");
            Slide slide = prstDoc.PresentationPart.InsertSlide("Title and Content", 2);
            Shape titleShape = slide.CommonSlideData.ShapeTree.AppendChild(new Shape());
            titleShape.NonVisualShapeProperties = new NonVisualShapeProperties
           (new NonVisualDrawingProperties() { Id = 2, Name = "Title" },
           new NonVisualShapeDrawingProperties(new ODrawing.ShapeLocks() { NoGrouping = true }),
           new ApplicationNonVisualDrawingProperties(new PlaceholderShape() { Type = PlaceholderValues.Title }));
            titleShape.ShapeProperties = new ShapeProperties();

            // Specify the text of the title shape.
            titleShape.TextBody = new TextBody(new ODrawing.BodyProperties(),
                    new ODrawing.ListStyle(),
                    new ODrawing.Paragraph(new ODrawing.Run(new ODrawing.Text() { Text = "Trade Promotion Graph " })));
            Shape shape = slide.CommonSlideData.ShapeTree.Elements<Shape>().FirstOrDefault(
                sh => sh.NonVisualShapeProperties.NonVisualDrawingProperties.Name.Value.ToLower().Equals("Content Placeholder 2".ToLower()));
            Picture pic = slide.AddPicture(shape, imgpath);
            slide.CommonSlideData.ShapeTree.RemoveChild<Shape>(shape);
            slide.Save();
            prstDoc.PresentationPart.Presentation.Save();
        }
        private ODrawing.Table GetSmapleTable()
        {

            ODrawing.Table table = new ODrawing.Table();

            ODrawing.TableProperties tableProperties = new ODrawing.TableProperties();
            ODrawing.TableStyleId tableStyleId = new ODrawing.TableStyleId();
            tableStyleId.Text = "{5C22544A-7EE6-4342-B048-85BDC9FD1C3A}";
            //tableStyleId.Text = "{D27102A9-8310-4765-A935-A1911B00CA55}";

            tableProperties.Append(tableStyleId);

            ODrawing.TableGrid tableGrid = new ODrawing.TableGrid();
            ODrawing.GridColumn gridColumn1 = new ODrawing.GridColumn() { Width = 2600000L};
            ODrawing.GridColumn gridColumn2 = new ODrawing.GridColumn() { Width = 2600000L };
            //ODrawing.GridColumn gridColumn3 = new ODrawing.GridColumn() { Width = 1071600L };
            //ODrawing.GridColumn gridColumn4 = new ODrawing.GridColumn() { Width = 1571600L };
            //ODrawing.GridColumn gridColumn5 = new ODrawing.GridColumn() { Width = 771600L };
            //ODrawing.GridColumn gridColumn6 = new ODrawing.GridColumn() { Width = 1071600L };

            tableGrid.Append(gridColumn1);
            tableGrid.Append(gridColumn2);
            //tableGrid.Append(gridColumn3);
            //tableGrid.Append(gridColumn4);
            //tableGrid.Append(gridColumn5);
            //tableGrid.Append(gridColumn6);

            table.Append(tableProperties);
            table.Append(tableGrid);
            for (int row = 1; row <= 5; row++)
            {
                string text1 = "PARAMETERS";
                string text2="VALUES";
                if (row == 2)
                {
                    text1 =Label1.Text ;
                    text2 = TextBox1.Text;
                }
                if (row == 3)
                {
                    text1 = Label2.Text;
                    text2 = TextBox2.Text;
                }
                if (row == 4)
                {
                    text1 = Label3.Text;
                    text2 = TextBox3.Text;
                }
                if (row == 5)
                {
                    text1 = Label4.Text;
                    text2 = TextBox4.Text;
                }
                ODrawing.TableRow tableRow = new ODrawing.TableRow() { Height = 370840L };
                tableRow.Append(new ODrawing.TableCell(
                                    new ODrawing.TextBody(
                                        new ODrawing.BodyProperties(),
                                    new ODrawing.Paragraph(
                                        new ODrawing.Run(
                                            new ODrawing.RunProperties() {Language = "en-US", Dirty = false, SmartTagClean = false , FontSize = 3000},                                         
                                            new ODrawing.Text(text1)))),
                                    new ODrawing.TableCellProperties()));

                tableRow.Append(new ODrawing.TableCell(
                                   new ODrawing.TextBody(
                                       new ODrawing.BodyProperties(),
                                   new ODrawing.Paragraph(
                                       new ODrawing.Run(
                                            new ODrawing.RunProperties() {Language = "en-US", Dirty = false, SmartTagClean = false , FontSize = 3000 }, 
                                           new ODrawing.Text(text2)))),
                                   new ODrawing.TableCellProperties()));

                ODrawing.SolidFill solidFill = new ODrawing.SolidFill();

                ODrawing.SchemeColor schemeColor = new ODrawing.SchemeColor() { Val = ODrawing.SchemeColorValues.Accent6 };
                ODrawing.LuminanceModulation luminanceModulation = new ODrawing.LuminanceModulation() { Val = 75000 };

                schemeColor.Append(luminanceModulation);

                solidFill.Append(schemeColor);

                table.Append(tableRow);
            }
            //for (int row = 1; row <= 3; row++)
            //{
                     //  ODrawing.TableRow tableRow = new ODrawing.TableRow() { Height = 370840L };

            //    for (int column = 1; column <= 6; column++)
            //    {
            //        ODrawing.TableCell tableCell = new ODrawing.TableCell();

            //        TextBody textBody = new TextBody() { BodyProperties = new ODrawing.BodyProperties(), ListStyle = new ODrawing.ListStyle() };

            //        ODrawing.Paragraph paragraph = new ODrawing.Paragraph();

            //        ODrawing.Run run = new ODrawing.Run();
            //        ODrawing.RunProperties runProperties = new ODrawing.RunProperties() { Language = "en-US", Dirty = false, SmartTagClean = false };
            //        ODrawing.Text text = new ODrawing.Text();
            //        text.Text = "Smaple Text";

            //        run.Append(runProperties);
            //        run.Append(text);
            //        ODrawing.EndParagraphRunProperties endParagraphRunProperties = new ODrawing.EndParagraphRunProperties() { Language = "en-US", Dirty = false };

            //        paragraph.Append(run);
            //        paragraph.Append(endParagraphRunProperties);

            //        textBody.Append(paragraph);

            //        ODrawing.TableCellProperties tableCellProperties = new ODrawing.TableCellProperties();

            //        ODrawing.SolidFill solidFill = new ODrawing.SolidFill();

            //        ODrawing.SchemeColor schemeColor = new ODrawing.SchemeColor() { Val = ODrawing.SchemeColorValues.Accent6 };
            //        ODrawing.LuminanceModulation luminanceModulation = new ODrawing.LuminanceModulation() { Val = 75000 };

            //        schemeColor.Append(luminanceModulation);

            //        solidFill.Append(schemeColor);

            //        tableCellProperties.Append(solidFill);

            //        tableCell.Append(textBody);
            //        tableCell.Append(tableCellProperties);

            //        tableRow.Append(tableCell);
            //        if (column == 1 && row == 1)
            //        {
                       // tableRow.Append(CreateTextCell("category"));
            //        }
            //    }

           // }

            return table;
        }
        static ODrawing.TableCell CreateTextCell(string text)
        {
            ODrawing.TableCell tc = new ODrawing.TableCell(
                                new ODrawing.TextBody(
                                    new ODrawing.BodyProperties(),
                                new ODrawing.Paragraph(
                                    new ODrawing.Run(
                                        new ODrawing.Text(text)))),
                                new ODrawing.TableCellProperties());

            return tc;
        }

        private static OpenXmlCompositeElement GetGraphicFrame(Shape refShape)
        {
            GraphicFrame graphicFrame = new GraphicFrame();
            int contentPlaceholderCount = 0;
            UInt32Value graphicFrameId = 1000;
            NonVisualGraphicFrameProperties nonVisualGraphicFrameProperties = new NonVisualGraphicFrameProperties();
            NonVisualDrawingProperties nonVisualDrawingProperties = new NonVisualDrawingProperties()
            {
                Id = ++graphicFrameId,
                Name = "Table" + contentPlaceholderCount.ToString(),
            };

            NonVisualGraphicFrameDrawingProperties nonVisualGraphicFrameDrawingProperties = new NonVisualGraphicFrameDrawingProperties();
            ODrawing.GraphicFrameLocks graphicFrameLocks = new ODrawing.GraphicFrameLocks() { NoGrouping = true };
            nonVisualGraphicFrameDrawingProperties.Append(graphicFrameLocks);
            ApplicationNonVisualDrawingProperties applicationNonVisualDrawingProperties = new ApplicationNonVisualDrawingProperties();
            PlaceholderShape placeholderShape = new PlaceholderShape() { Index = graphicFrameId };

            applicationNonVisualDrawingProperties.Append(placeholderShape);
            nonVisualGraphicFrameProperties.Append(nonVisualDrawingProperties);
            nonVisualGraphicFrameProperties.Append(nonVisualGraphicFrameDrawingProperties);
            nonVisualGraphicFrameProperties.Append(applicationNonVisualDrawingProperties);

            Transform transform = new Transform()
            {
                Offset = new ODrawing.Offset() { X = refShape.ShapeProperties.Transform2D.Offset.X, Y = refShape.ShapeProperties.Transform2D.Offset.Y },
                Extents = new ODrawing.Extents() { Cx = refShape.ShapeProperties.Transform2D.Extents.Cx, Cy = refShape.ShapeProperties.Transform2D.Extents.Cy }
            };

            ODrawing.Graphic graphic = new ODrawing.Graphic();
            ODrawing.GraphicData graphicData = new ODrawing.GraphicData() { Uri = "http://schemas.openxmlformats.org/drawingml/2006/table" };
            graphic.Append(graphicData);
            graphicFrame.Append(nonVisualGraphicFrameProperties);
            graphicFrame.Append(transform);
            graphicFrame.Append(graphic);
            return graphicFrame;
        }
    }
} 
```

**请注意，使用的模板是仅包含两张幻灯片的示例模板，即一张标题幻灯片和另一张空白面，上面有一个文字艺术，上面写着一些随机文本。**

**该表还填充了来自 aspx 页面上的 4 个文本框的数据。**

这是课程：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using DocumentFormat.OpenXml.Packaging;
using System.IO;
using DocumentFormat.OpenXml.Presentation;
using ODrawing = DocumentFormat.OpenXml.Drawing;
using Drawing = DocumentFormat.OpenXml.Drawing;
using DocumentFormat.OpenXml;

namespace DocumentFormat.Extensions1
{
    public static class Extensions1
    {

        internal static Slide InsertSlide(this PresentationPart presentationPart, string layoutName, int absolutePosition)
        {
            int slideInsertedPostion = 0;

            UInt32 slideId = 256U;
            slideId += Convert.ToUInt32(presentationPart.Presentation.SlideIdList.Count());
            Slide slide = new Slide(new CommonSlideData(new ShapeTree()));
            SlidePart sPart = presentationPart.AddNewPart<SlidePart>();
            slide.Save(sPart);

            SlideId newSlideId = presentationPart.Presentation.SlideIdList.AppendChild<SlideId>(new SlideId());
            newSlideId.Id = slideId;
            newSlideId.RelationshipId = presentationPart.GetIdOfPart(sPart);
            slideInsertedPostion = presentationPart.SlideParts.Count();
            presentationPart.Presentation.Save();

            var returnVal = ReorderSlides(presentationPart, slideInsertedPostion - 1, absolutePosition - 1);
            return GetSlideByRelationshipId(presentationPart, newSlideId.RelationshipId);
        }
        public static Slide InsertSlide1(this PresentationPart presentationPart, string layoutName, int absolutePosition)
        {
            int slideInsertedPostion = 0;

            UInt32 slideId = 256U;
            slideId += Convert.ToUInt32(presentationPart.Presentation.SlideIdList.Count());
            Slide slide = new Slide(new CommonSlideData(new ShapeTree()));
            SlidePart sPart = presentationPart.AddNewPart<SlidePart>();
            slide.Save(sPart);
            SlideMasterPart smPart = presentationPart.SlideMasterParts.First();
            SlideLayoutPart slPart = smPart.SlideLayoutParts.SingleOrDefault(sl => sl.SlideLayout.CommonSlideData.Name.Value.Equals(layoutName));
            //SlideLayoutPart slPart = smPart.SlideLayoutParts.SingleOrDefault(sl => sl.SlideLayout.CommonSlideData.Name.Value.Equals(layoutName));
            sPart.AddPart<SlideLayoutPart>(slPart);
            sPart.Slide.CommonSlideData = (CommonSlideData)smPart.SlideLayoutParts.SingleOrDefault(sl => sl.SlideLayout.CommonSlideData.Name.Value.Equals(layoutName)).SlideLayout.CommonSlideData.Clone();
            SlideId newSlideId = presentationPart.Presentation.SlideIdList.AppendChild<SlideId>(new SlideId());
            newSlideId.Id = slideId;
            newSlideId.RelationshipId = presentationPart.GetIdOfPart(sPart);
            slideInsertedPostion = presentationPart.SlideParts.Count();
            presentationPart.Presentation.Save();

            var returnVal = ReorderSlides(presentationPart, slideInsertedPostion - 1, absolutePosition - 1);
            return GetSlideByRelationshipId(presentationPart, newSlideId.RelationshipId);

        }
        internal static int ReorderSlides(PresentationPart presentationPart, int currentSlidePosition, int newPosition)
        {
            int returnValue = -1;

            if (newPosition == currentSlidePosition) { return returnValue; }
            int slideCount = presentationPart.SlideParts.Count();
            if (slideCount == 0) { return returnValue; }
            int maxPosition = slideCount - 1;
            CalculatePositions(ref currentSlidePosition, ref newPosition, maxPosition);
            if (newPosition != currentSlidePosition)
            {
                DocumentFormat.OpenXml.Presentation.Presentation presentation = presentationPart.Presentation;
                SlideIdList slideIdList = presentation.SlideIdList;
                SlideId sourceSlide = (SlideId)(slideIdList.ChildElements[currentSlidePosition]);
                SlideId targetSlide = (SlideId)(slideIdList.ChildElements[newPosition]);
                sourceSlide.Remove();
                if (newPosition > currentSlidePosition)
                {
                    slideIdList.InsertAfter(sourceSlide, targetSlide);
                }
                else
                {
                    slideIdList.InsertBefore(sourceSlide, targetSlide);
                }
                returnValue = newPosition;
            }
            presentationPart.Presentation.Save();
            return returnValue;
        }

        private static void CalculatePositions(ref int originalPosition, ref int newPosition, int maxPosition)
        {
            if (originalPosition < 0)
            {
                originalPosition = maxPosition;
            }
            if (newPosition < 0)
            {
                newPosition = maxPosition;
            }
            if (originalPosition > maxPosition)
            {
                originalPosition = maxPosition;
            }
            if (newPosition > maxPosition)
            {
                newPosition = maxPosition;
            }
        }
        private static Slide GetSlideByRelationshipId(PresentationPart presentationPart, DocumentFormat.OpenXml.StringValue relId)
        {
            SlidePart slidePart = presentationPart.GetPartById(relId) as SlidePart;
            if (slidePart != null)
            {
                return slidePart.Slide;
            }
            else
            {
                return null;
            }
        }
        internal static Picture AddPicture(this Slide slide, Shape referingShape, string imageFile)
        {
            Picture picture = new Picture();

            string embedId = string.Empty;
            UInt32Value picId = 10001U;
            string name = string.Empty;

            if (slide.Elements<Picture>().Count() > 0)
            {
                picId = ++slide.Elements<Picture>().ToList().Last().NonVisualPictureProperties.NonVisualDrawingProperties.Id;
            }
            name = "image" + picId.ToString();
            embedId = "rId" + (slide.Elements<Picture>().Count() + 915).ToString(); // some value

            NonVisualPictureProperties nonVisualPictureProperties = new NonVisualPictureProperties()
            {
                NonVisualDrawingProperties = new NonVisualDrawingProperties() { Name = name, Id = picId, Title = name },
                NonVisualPictureDrawingProperties = new NonVisualPictureDrawingProperties() { PictureLocks = new Drawing.PictureLocks() { NoChangeAspect = true } },
                ApplicationNonVisualDrawingProperties = new ApplicationNonVisualDrawingProperties() { UserDrawn = true }
            };

            BlipFill blipFill = new BlipFill() { Blip = new Drawing.Blip() { Embed = embedId } };
            Drawing.Stretch stretch = new Drawing.Stretch() { FillRectangle = new Drawing.FillRectangle() };
            blipFill.Append(stretch);

            ShapeProperties shapeProperties = new ShapeProperties()
            {
                Transform2D = new Drawing.Transform2D()
                {
                    Offset = new Drawing.Offset() { X = 1554691, Y = 1600200 },
                    Extents = new Drawing.Extents() { Cx = 6034617, Cy = 4525963 }
                }
            };
            Drawing.PresetGeometry presetGeometry = new Drawing.PresetGeometry() { Preset = Drawing.ShapeTypeValues.Rectangle };
            Drawing.AdjustValueList adjustValueList = new Drawing.AdjustValueList();

            presetGeometry.Append(adjustValueList);
            shapeProperties.Append(presetGeometry);
            picture.Append(nonVisualPictureProperties);
            picture.Append(blipFill);
            picture.Append(shapeProperties);

            slide.CommonSlideData.ShapeTree.Append(picture);

            // Add Image part
            slide.AddImagePart(embedId, imageFile);

            slide.Save();
            return picture;
        }
        private static void AddImagePart(this Slide slide, string relationshipId, string imageFile)
        {
            ImagePart imgPart = slide.SlidePart.AddImagePart(GetImagePartType(imageFile), relationshipId);
            using (FileStream imgStream = File.Open(imageFile, FileMode.Open))
            {
                imgPart.FeedData(imgStream);
            }
        }
        private static ImagePartType GetImagePartType(string imageFile)
        {
            string[] imgFileSplit = imageFile.Split('.');
            string imgExtension = imgFileSplit.ElementAt(imgFileSplit.Count() - 1).ToString().ToLower();
            if (imgExtension.Equals("jpg"))
                imgExtension = "jpeg";
            return (ImagePartType)Enum.Parse(typeof(ImagePartType), imgExtension, true);
        }
        public static void Copy(this Stream source, Stream target)
        {
            if (source != null)
            {
                MemoryStream mstream = source as MemoryStream;
                if (mstream != null) mstream.WriteTo(target);
                else
                {
                    byte[] buffer = new byte[2048];
                    int length = buffer.Length, size;
                    while ((size = source.Read(buffer, 0, length)) != 0)
                        target.Write(buffer, 0, size);
                }
            }
        }
    }
} 
```

现在这是我的查询： 1.在 aspx 页面中，如果我尝试用我自己的模板（与示例相同）替换 templateFile，它会在这一行给我一个错误**“**对象**引用未设置为对象的实例”** **(sh => sh.NonVisualShapeProperties.NonVisualDrawingProperties.Title.Value == "TableHolder")**在 AddTable.Otherwise 它工作正常。

2.Also 在第二张幻灯片中，我得到了所需的表格，但在页面顶部写了 5 次“**图像”一词。**

3.同样在生成的powerpoint文件中，除了第一张和最后一张幻灯片（即模板中的幻灯片），模板样式不显示在幻灯片上。

谢谢你。

# java - 在调用方法中检索自定义异常消息

> ID：11116933
> 
> 赞同：0
> 
> 时间：2012-06-20T09:50:28.840
> 
> 标签：java, jsp, spring-mvc

我故意在 DAO 方法中将电子邮件设置为 null。它转到 DAO 类中持久方法中的异常块，我在自定义异常类中放置自定义错误消息“无法添加员工”；如何在控制器中捕获该错误消息。如果我使用 e.getMessage() 在控制器异常块中获取整个消息，但我只想要自定义错误消息。

调用方法（控制器）

* * *

```
try {                  
    employeeDao.persist(employees);
}  
catch (SpringUtilException ex) {    
    System.out.println("..at line 87......."+ex.getErrorMessage());
}
catch (Exception e) {
    System.err.println("Exception returned message: " + e.getMessage());
} 
```

被调用方法（DAO）

* * *

```
public void persist(Employees employee) throws SpringUtilException {
    try {
        employee.setEmail(null);
        em.persist(employee);
    } 
    catch (EntityExistsException e) {
        throw new SpringUtilException(e, "Employee Duplicate");
    } 
    catch (Exception ex) {
        System.out.println("at line 31 in DAO..");
        throw new SpringUtilException("Failed to add Employee"); 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:20:28.237

`em.persist()`只是使瞬态实体持久化。它不发出任何插入语句。

导致您获得异常的插入语句在刷新时发出。并且刷新是在事务结束时完成的（在这种情况下），此时 DAO 方法已经返回。

不要依赖数据库约束来验证您的对象。`persist()`明确地验证它们，如果实体无效，甚至不要调用。数据库约束是最后的检查。

# c# - 数据绑定 HyperlinkBut ton 事件在 WP7 中不起作用

> ID：11116940
> 
> 赞同：0
> 
> 时间：2012-06-20T09:50:49.347
> 
> 标签：c#, windows-phone-7

以下代码不起作用：

```
private void fileNameLinkButton_Click(object sender, RoutedEventArgs e)
{
    HyperlinkButton clickedLink = (HyperlinkButton)sender;
    string uri = String.Format(
        "/IsolatedStorageListing;component/SecondPage.xaml?id={0}",
        clickedLink.Content);
    NavigationService.Navigate(new Uri(uri, UriKind.Relative));
}

<ListBox Height="183"
     Width="460"
     HorizontalAlignment="Right"
     VerticalAlignment="Top"
     Name="fileListBox">
     <ListBox.ItemTemplate>
            <DataTemplate>
                <HyperlinkButton Name="fileNameLinkButton"
                                 Content="{Binding}"
                                 Click="fileNameLinkButton_Click" />         
            </DataTemplate>
     </ListBox.ItemTemplate>
</ListBox> 
```

当我单击 HyperlinkBut​​ton 时，我的应用程序将关闭/退出。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:56:54.270

我怀疑您是否需要添加`/IsolatedStorageListing;component`导航`Uri`。尝试删除它并简单地离开`/SecondPage.xaml?id={0}`

顺便说一句，使用`Content`导航参数真的很奇怪，而且是错误的。我建议您将`Tag`财产用于此类目的。

# android - TextView 椭圆和损坏的符号

> ID：11116942
> 
> 赞同：9
> 
> 时间：2012-06-20T09:51:00.867
> 
> 标签：android, android-layout

我对标准的 android ellipsize 机制有一些问题。

接下来是我的 textview xml 布局：

```
<TextView
        android:id="@+id/something"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/message_test_text"
        android:lines="2"
        android:ellipsize="end"
        android:textColor="@drawable/dialogs_text_selector"
 /> 
```

然后在代码中，我将 Helvetica 字体设置为此字段。然后，在第二行的末尾，我看到点后的破符号：

![破碎的符号](../Images/ff974fd37edbc2470919e250b822d818.png)

因为它在列表中使用，所以我看到了一个正方形列表。

我可以在没有大量代码的情况下删除它吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T13:59:07.003

[这里记录了](http://code.google.com/p/android/issues/detail?id=882)一个问题。许多人在使用`TextView`ellipsize时会遇到一些或其他问题`ListView`。有许多解决方法建议将 textview 更改为单行，但您不能使用它。

尝试设置`android:maxLines="2"`属性。

## 更新：

在将字符串设置为 textview 之前，使用[TextUtils.ellipsize API 手动省略字符串的大小。](http://developer.android.com/reference/android/text/TextUtils.html#ellipsize%28java.lang.CharSequence,%20android.text.TextPaint,%20float,%20android.text.TextUtils.TruncateAt%29)查看此 API 返回的椭圆字符串是否在末尾包含方形字符。

使用示例代码：

```
TextPaint tp = new TextPaint();
tp.setTextSize(float textSize);
tp.setTypeface(Typeface typeface);
Charsequence elipText;
elipText = TextUtils.ellipsize ( text, tp, avail, TextUtils.TruncateAt.END);
textview.setText(elipText); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T08:07:08.927

这里的问题我不认为这是你的代码。问题是您的`.tff`文件缺少`ellipsize`字符，因此`square`显示 。你的字体不是......比方说`mobile optimized`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-24T17:30:41.153

[在这里](https://stackoverflow.com/a/6763689/1271424)上课很好解决问题

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-28T14:11:23.040

> 然后在代码中，我将 Helvetica 字体设置为此字段

希望你已经为这个字体支付了许可证。否则，请勿分发。

> 然后，在第二行的末尾，我看到点后的破符号：

这个之前已经讲过了，比如：[Android How to get rid of question mark at end of ellipsize](https://stackoverflow.com/questions/5794488/android-how-to-get-rid-of-question-mark-at-end-of-ellipsize)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-20T10:17:27.883

Hey Roman 在 XML 文件中使用此属性并检查

```
android:singleLine="true" 
```

# paypal - How to allow only paypal to access my website?

> ID：11116950
> 
> 赞同：0
> 
> 时间：2012-06-20T09:51:19.417
> 
> 标签：paypal, paypal-sandbox

I want deny access to my website form all websites other than PayPal. But since they are having dynamic IP addresses which may change in later time, i need some wat to do it dynamically. Any help in this regard will be greatly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:15:06.903

Paypal use to provide a range of IP addresses here [https://cms.paypal.com/fr/cgi-bin/?cmd=_render-content&content_ID=developer/howto_api_golivechecklist](https://cms.paypal.com/fr/cgi-bin/?cmd=_render-content&content_ID=developer/howto_api_golivechecklist)

Btw, They just change their developper portal, and this information is not available in the new one. So it may be more secure to make a reverse DNS call and check on *.paypal.com as all the ip above, are linked to this domain.

# android - AsyncTask 有时会在 doInBackround 中使我的应用程序崩溃 (ViewRoot$CalledFromWrongThreadException)

> ID：11116952
> 
> 赞同：0
> 
> 时间：2012-06-20T09:51:30.840
> 
> 标签：android, android-asynctask

谁能告诉我为什么我的异步任务有时会像这样失败？我在 3 台设备上对其进行了测试，但我从未发生过此错误。我上传到 GooglePlay，**下载 200 次**后有**3 个错误**报告，我不知道错误的主要来源是什么...

```
java.lang.RuntimeException: An error occured while executing doInBackground()
    at android.os.AsyncTask$3.done(AsyncTask.java:200)
    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
    at java.lang.Thread.run(Thread.java:1019)
    Caused by: android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
    at android.view.ViewRoot.checkThread(ViewRoot.java:3225)
    at android.view.ViewRoot.invalidateChild(ViewRoot.java:760)
    at android.view.ViewRoot.invalidateChildInParent(ViewRoot.java:786)
    at android.view.ViewGroup.invalidateChild(ViewGroup.java:2511)
    at android.view.View.invalidate(View.java:5498)
    at android.view.View.setBackgroundDrawable(View.java:7845)
    at android.view.View.setBackgroundResource(View.java:7754)
    at com.KeySoft.NewPilates.Activities.LatestActivity.parseXml(LatestActivity.java:1106)
    at com.KeySoft.NewPilates.Activities.LatestActivity.access$1(LatestActivity.java:964)
    at com.KeySoft.NewPilates.Activities.LatestActivity$DownloadXml.doInBackground(LatestActivity.java:354)
    at com.KeySoft.NewPilates.Activities.LatestActivity$DownloadXml.doInBackground(LatestActivity.java:1)
    at android.os.AsyncTask$2.call(AsyncTask.java:185)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306) 
```

我看到我**的 AsyncTaks 的*** *doInBackground* * 函数有一个**setBackgroundDrawable**和**setBacktroundResource**函数，它们做得不太好......有什么想法吗？

编辑：

从检查的答案中得到解决方案：

我必须使用新的 Runnable 来修改 doInBackround 内部的视图。

```
runOnUiThread(new Runnable() {
             public void run() {

                 LinearLayout hatterLayout = (LinearLayout)findViewById(R.id.hatterLayout);
                hatterLayout.setBackgroundResource(R.drawable.nonet);

            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T09:54:12.427

您正在尝试`View`在后台线程上执行与 UI 相关的工作（操作 s）。`setBackgroundDrawable()`并且`setBackgroundResource()`是`View`类的方法，而不是`ASyncTask`.

你不能这样做。在一般情况下，看看[`runOnUiThread()`](http://goo.gl/B97AM)作为从后台线程发起 UI 更新的一种方式。

但`ASyncTask`特别是，已经有方便的钩子让你在 UI 线程上做一些事情。你应该考虑覆盖`onProgressUpdate()`and `onPostExecute()`，并在那里做你的 UI 工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:57:14.533

您必须在 UIThread 上执行 setBackgroundDrawable。

所以在asynctask的onPostExecute方法中执行setBackgroundDrawable。

# android - 处理列表视图的项目点击问题

> ID：11116954
> 
> 赞同：0
> 
> 时间：2012-06-20T09:51:39.137
> 
> 标签：android

我在点击 listView 项目时遇到异常..

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.listview);
    adapter = new MyAdapter(this,R.layout.list_item);
    listView = (ListView)findViewById(R.id.listView);
    listView.setAdapter(adapter);
    listView.setOnItemClickListener(this);
}
@Override
public void onItemClick(AdapterView<?> adaptr, View arg1, int position, long arg3) {

    Times times = (Times)adaptr.getItemAtPosition(position);
    //Times times = (Times)MyXMLHandler.array.get(position);
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage(times.getDescription());
    builder.setTitle("Description");
    builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {

            finish();
        }
    });
} 
```

错误.......

```
06-20 14:55:13.137: ERROR/AndroidRuntime(848): FATAL EXCEPTION: main
06-20 14:55:13.137: ERROR/AndroidRuntime(848): java.lang.IndexOutOfBoundsException: Invalid index 4, size is 0
06-20 14:55:13.137: ERROR/AndroidRuntime(848):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
06-20 14:55:13.137: ERROR/AndroidRuntime(848):     at java.util.ArrayList.get(ArrayList.java:311)
06-20 14:55:13.137: ERROR/AndroidRuntime(848):     at android.widget.ArrayAdapter.getItem(ArrayAdapter.java:298)
06-20 14:55:13.137: ERROR/AndroidRuntime(848):     at android.widget.AdapterView.getItemAtPosition(AdapterView.java:740) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:53:45.953

您忘记在适配器中填写数据**，**您的**适配器为空**..

```
adapter = new MyAdapter(this,R.layout.list_item); 
```

填写一些数据，例如`String[]`或`ArrayList`...

**更新：**

```
@Override
public void onItemClick(AdapterView<?> adaptr, View arg1, int position, long arg3) {

    Times times = MyXMLHandler.array.get(position);
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage(times.getDescription());
    builder.setTitle("Description");
    builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {

            finish();
        }
    });
   builder.show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:55:27.697

你在这里有错误

```
adapter = new MyAdapter(this,R.layout.list_item); 
```

您的适配器是空的。

# java - 如何在 solr 中配置多个数据源？

> ID：11116959
> 
> 赞同：1
> 
> 时间：2012-06-20T09:51:53.770
> 
> 标签：java, solr

我的 db-data-config.xml 是这样的：

```
<dataSource name="192.168.5.206" driver="com.mysql.jdbc.Driver" url="jdbc:mysql://192.168.5.206:3306/editor_app" user="root" password="tvmining" />
<dataSource name="localhost" driver="com.mysql.jdbc.Driver" url="jdbc:mysql://192.168.4.49/titans_myself" user="editor" password="tvm_editor" />

<document>
    <entity dataSource ="192.168.5.206" name="product_info" query="SELECT t.id, t.title, t.keyword, t.update_time FROM product_info t" deltaQuery="SELECT t.id FROM product_info t where t.update_time &gt; '${dataimporter.last_index_time}'" deltaImportQuery="SELECT t.id, t.title, t.keyword, t.update_time FROM product_info t where t.id='${dataimporter.delta.id}'">
        <field column="id" name="id" />
        <field column="title" name="title" />
        <field column="keyword" name="keyword" />
        <field column="update_time" name="update_time" />
    </entity>

    <entity dataSource ="localhost" name="log_info" query="SELECT t.id, t.operation_content FROM log_info t " deltaQuery="SELECT t.id, t.operation_content FROM log_info t where t.update_time &gt; '${dataimporter.last_index_time}'" deltaImportQuery="SELECT t.id, t.operation_content FROM log_info t where t.id='${dataimporter.delta.id}'">
        <field column="id" name="id" />
        <field column="operation_content" name="operation_content" />
    </entity>
</document> 
```

但是当我输入'http://192.168.4.40:8080/solr/update/database?command=full-import'时，总是导入第一个实体数据。如何导入两个实体数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:01:40.860

这应该按原样工作，以便导入两个实体。现在，如果 id 相同，也许您希望在 solr 中有一个包含来自两个实体的字段的单个文档？如果这是您正在寻找的，您需要以某种方式加入表，并使用单个实体

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:24:23.903

试试这个网址：

```
http://192.168.4.40:8080/solr/update/database?command=full-import&entity=log_info 
```

我刚刚添加了实体参数，并将实体名称作为值。

# delphi - 自动调整备忘录大小

> ID：11116961
> 
> 赞同：2
> 
> 时间：2012-06-20T09:51:58.607
> 
> 标签：delphi, autosize, memo

> **可能重复：**
> [我可以为它包含的文本设置一个 TMemo 大小吗？](https://stackoverflow.com/questions/935859/can-i-make-a-tmemo-size-itself-to-the-text-it-contains)

需要做自动调整大小的备忘录：高度和宽度。

我按如下方式自动调整高度：

```
function TForm1.AutoSizeMemoY(Memo: TMemo): word;
begin
  Canvas.Font := Memo.Font;
  Result := Canvas.TextExtent(Memo.Lines.Strings[0]).cy * Memo.Lines.Count +
    Canvas.TextExtent(Memo.Lines.Strings[0]).cy;
end; 
```

但我不知道如何自动调整宽度。我有一个想法：如果滚动条被激活，则增加宽度直到它变为非活动状态，但我不知道如何实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:39:16.453

不是最好的解决方案，但它有效：

```
function GetTextWidth(F: TFont; s: string): integer;
var
  l: TLabel;
begin
  l := TLabel.Create(nil);
  try
    l.Font.Assign(F);
    l.Caption := s;
    l.AutoSize := True;
    result := l.Width + 8;
  finally
    l.Free;
  end;
end; 
```

[并将以下代码添加到此答案](https://stackoverflow.com/a/936092/62313)中 Memo1.Onchange 事件的末尾

```
 LineInd := Memo1.Perform(EM_LINEFROMCHAR, Memo1.SelStart, 0);//focused Memo1 line Index
  Wd := GetTextWidth(Memo1.Font, Memo1.Lines[LineInd]);
  //MaxWidthLineInd = index of the line which has the largest width. 
  //Init value of MaxWidthLineInd = 0
  if MaxWidthLineInd = LineInd then 
    Memo1.Width := Wd
  else begin
    if Wd > Memo1.Width then
    begin
      Memo1.Width := Wd;
      MaxWidthLineInd := LineInd;
    end;
  end; 
```

# mysql - Unicode CSV 文件中未显示孟加拉语文本

> ID：11116963
> 
> 赞同：9
> 
> 时间：2012-06-20T09:52:02.870
> 
> 标签：mysql, excel, unicode, internationalization

我有一个孟加拉语的 Excel 文件。要正确显示孟加拉语文本，我需要在 PC 上安装孟加拉语字体。

我使用 Office 2010 将 Excel 文件转换为 CSV。但它只显示“？” 标记而不是孟加拉语字符。然后我使用谷歌文档进行转换，同样的问题，但不可读的字符而不是'？'。我将该文件的摘录粘贴到一个 HTML 文件中，并试图在我的浏览器中查看它，但没有成功。

我应该怎么做才能从孟加拉语的 .xlsx 文件中获取 CSV 文件，以便将其导入 MySQL 数据库？

**编辑：**[这个 SO](https://stackoverflow.com/questions/4221176/excel-to-csv-with-utf8-encoding?rq=1) question中接受的答案让我去 Google Docs。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T10:28:21.617

[根据Excel to CSV with UTF8 encoding](https://stackoverflow.com/questions/4221176/excel-to-csv-with-utf8-encoding)问题的答案，Google Docs 应该正确保存 CSV，这与 Excel 不同，Excel 会破坏正在使用的“ANSI”编码中无法表示的所有字符。但也许他们改变了这一点，或者出了什么问题，或者对情况的分析不正确。

对于在 MS Office 程序中处理的正确编码的孟加拉语（孟加拉语），应该不需要任何“孟加拉字体”，因为 Arial Unicode MS 字体（随 Office 提供）包含孟加拉字符。那么数据实际上是在一些依赖于特殊编码字体的非标准编码中吗？在这种情况下，应首先将其转换为 Unicode，尽管可能可以使用始终使用该特定字体的程序以某种方式对其进行管理。

在 Excel 中，当使用另存为时，您可以选择“Unicode 文本 (*.txt)”。它将数据保存为 UTF-16 编码的 TSV（制表符分隔值）。然后，您可能需要将其转换为使用逗号而不是制表符作为分隔符，和/或从 UTF-16 转换为 UTF-8。但这只有在原始数据被正确编码的情况下才有效。

# python - App Engine SDK PIL 错误

> ID：11116977
> 
> 赞同：0
> 
> 时间：2012-06-20T09:53:01.640
> 
> 标签：python, image, google-app-engine, python-imaging-library

我正在为 MacOS 上的 Google App Engine 开发 Python 应用程序，但在尝试为本地开发设置 PIL 时遇到了麻烦。我在 virtualenv 中运行 Python 2.5，我还使用 pip 在 vi​​rtualenv 中安装了 PIL 1.1.7：

```
pip install PIL 
```

我可以在 python 解释器中导入它，一切似乎都很好，但是当它被 App Engine SDK 使用时，会引发以下错误：

```
File "/Users/user/Development/src/virtualenv/lib/python2.5/site-packages/PIL/PngImagePlugin.py", line 564, in _save
SystemError: Parent module 'PIL' not loaded 
```

PIL导入ICCProfile时似乎会出现此错误，但它也应该被except捕获并正确处理。这是来自 PngImagePlugin.py 的代码：

```
try:
    import ICCProfile
    p = ICCProfile.ICCProfile(im.info["icc_profile"])
    name = p.tags.desc.get("ASCII", p.tags.desc.get("Unicode", p.tags.desc.get("Macintosh", p.tags.desc.get("en", {}).get("US", "ICC Profile")))).encode("latin1", "replace")[:79]
except ImportError:
    name = "ICC Profile" 
```

在搜索解决方案时，我得到的建议是我应该创建带有 PIL 路径的 PIL.pth 文件，但是该文件已经存在于 site-packages 文件夹中的 virtualenv 中，并且文件的内容是：

```
PIL 
```

有没有人对如何修复它有任何建议，或者我还能尝试什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:55:37.630

尝试使用[Pillow](http://pypi.python.org/pypi/Pillow)而不是 PIL。

## 更新 1

请参阅此线程[http://code.activestate.com/lists/python-image-sig/6543/](http://code.activestate.com/lists/python-image-sig/6543/)

# android - 使用 Ksoap2 将参数从 Android 发送到 Web 服务 PHP 时出错

> ID：11116980
> 
> 赞同：1
> 
> 时间：2012-06-20T09:53:21.757
> 
> 标签：android, ksoap2

我使用 ksoap2 在 android 中向 webservice PHP 发送了一个请求：

```
 String NAMESPACE="http://www.localhost:81/wsdl";
             String METHOD_NAME="insertUser";
             String SOAP_ACTIONS="http://www.localhost:81/wsdl#insertUser";
             String URL="http://10.0.2.2:81/phpWebservice/pgsql.php";
             SoapObject request=new SoapObject(NAMESPACE, METHOD_NAME);
             **request.addProperty("name","地獄");**       
             request.addProperty("birthday", "2012/02/01");     
             SoapSerializationEnvelope envelope=new   SoapSerializationEnvelope(SoapEnvelope.VER11);
             //envelope.dotNet=true;
             envelope.setOutputSoapObject(request);
             HttpTransportSE androidhttpTranport=new HttpTransportSE (URL);
androidhttpTranport.call(SOAP_ACTIONS, envelope); 
```

网页服务 php 为：

```
 require("nusoap.php");
  $server = new soap_server();
  $server->register('insertUser',                    // method name     
  array('name' => 'xsd:string','birthday'=>'xsd:string'),          // input parameters
  array('return' => 'xsd:int'),    // output parameters
  $namespace,                         // namespace
  $namespace . '#insertUser',                   // soapaction
  'rpc',                                    // style
  'encoded',                                // use
  'Get all user id dua vao =0'        // documentation
);  

function insertUser($name,$birthday)
{
value of $name=?? Why
} 
```

来自 android 的 'name' 的值是“地狱”，但 webserver $name='??' webservice 中 $name 的值是错误的。你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T03:34:29.640

您可以编码和解码

```
String encoded =URLEncoder.encode("地獄", "UTF-8"); at app            
String de= URLDecoder.decode(encoded, "UTF-8"); at server 
```

（[http://php.net/manual/en/function.urldecode.php](http://php.net/manual/en/function.urldecode.php)）

# c++ - 有哪些符合 C++ std 标准的自定义分配器可用？

> ID：11116982
> 
> 赞同：5
> 
> 时间：2012-06-20T09:53:28.753
> 
> 标签：c++, memory-management, user-interface, c++11, allocation

我想以派生自的类的形式使用一些符合 C++ std 标准的内存管理`std::allocator`，但能够分配内存块并在较小的部分中释放和释放它们。我只找到了 boost::pool，但这在上述意义上不符合标准。周围有什么更有用的，还是我必须自己编写代码？

（请注意，`std::allocator`对于分配许多小对象，即使用 . 时，通常是无用的`std::list`。）

**编辑**澄清。

说，我想使用`std::list`许多小对象中的一个，然后`std::allocator`分配每个对象的实现使用`::new`会导致运行时的显着开销（但我认为还有内存）。分配大块对象并一一分发会效率更高。为此，我需要一个`std`兼容的分配器（不需要派生自`std::allocator`，但必须实现相同的概念），它可以与任何`std`库容器一起使用并提供所需的内存管理，理想情况下允许我告诉它有多少个对象我可能会单独分配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:23:00.587

GCC 提供了一些[扩展分配器](http://gcc.gnu.org/onlinedocs/libstdc++/manual/memory.html#allocator.ext)作为`std::allocator`.

您还没有真正说出您的要求是什么，因此无法说其中任何一个是否适合您。

编辑以下 OP 的编辑：

> 说，我想使用`std::list`许多小对象中的一个，然后`std::allocator`分配每个对象的实现`::new`在运行时会导致显着的开销（但我认为还有内存）。

为什么还要记忆？`std::list`无论内存来自`new`还是自定义分配器，都会出现每个节点中额外指针的开销。你的意思是堆做的簿记来跟踪所有的小分配吗？

> 分配大块对象并一一分发会效率更高。

你量过吗？

如果您不想要分配大量单独节点的开销，您确定`std::list`是正确的容器吗？`vector`或呢`deque`？

`boost::stable_vector`仍然是基于节点的，但每个节点的内存开销比`std::list`.

A`boost::flat_map<int, T>`不是基于节点的，可以用来代替`std::list<T>`

分配器很棘手，并不总是（真实或感知的）问题的最佳答案。

# ajax - HtmlUnit Axaj 文件下载

> ID：11116989
> 
> 赞同：-1
> 
> 时间：2012-06-20T09:53:51.913
> 
> 标签：ajax, download, htmlunit

我正在尝试从此页面下载 XLS 文件：[http](http://www.nordpoolspot.com/Market-data1/Elspot/Area-Prices/ALL1/Hourly/) ://www.nordpoolspot.com/Market-data1/Elspot/Area-Prices/ALL1/Hourly/ （单击“导出到 XLS”链接）。

但是这样做：

```
page.getAnchorByText("Export to XLS").click().getWebResponse().getContentAsStream(); 
```

返回网页的 html，而不是预期的文件。

你有什么建议吗？

我已经在这里尝试了 3 点[http://htmlunit.sourceforge.net/faq.html#AJAXDoesNotWork](http://htmlunit.sourceforge.net/faq.html#AJAXDoesNotWork)没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:01:28.457

以下：

```
webClient = new WebClient(BrowserVersion.FIREFOX_3_6); 
```

解决了我的问题。

# iphone - 将照片上传到 Facebook 页面

> ID：11116990
> 
> 赞同：-2
> 
> 时间：2012-06-20T09:53:52.317
> 
> 标签：iphone, facebook-graph-api

我想将图像发布在页面墙上，并且我知道如何将图像发布到相册和用户提要上，但是对于页面它会给出一些问题

我正在使用 FBGraph API 并希望将照片上传到 facebook 页面，您能否通过提供任何教程或任何代码库的链接来指导我。

目前我发布的所有图像都显示在我的墙上，而不是我要发布的页面。

我使用了下面的代码

```
-(void)postPictureToWall
{
    NSMutableDictionary *variables = [[NSMutableDictionary alloc] init];

    //创建一个 FbGraphFile 对象实例并设置我们希望在其上发布的图片
    UIImage *frontImageNew=self.imgvgalleryImage.image;

    FbGraphFile *graph_file = [[FbGraphFile alloc] initWithImage:frontImageNew];

    //最后，将 FbGraphFile 对象设置到我们的变量字典中......
    [变量 setObject:graph_file forKey:@"file"];

    NSDateFormatter *df = [[NSDateFormatter alloc]init];
    [df setDateStyle:NSDateFormatterMediumStyle];
    [df setTimeStyle:NSDateFormatterMediumStyle];

    NSString *bodyString=[NSString stringWithFormat:@"%@",[df stringFromDate:[NSDate date]]];

    [变量 setObject:bodyString forKey:@"message"];

 FbGraphResponse *fb_graph_response = [objFBGraph doGraphPost:@"pageid_here/feed" withPostVars:variables];
SBJSON *parser = [[SBJSON alloc] init];
NSDictionary *facebook_response = [parser objectWithString:fb_graph_response.htmlResponse error:nil];   
    NSLog(@"fb 响应 = %@",facebook_response);

}

```

我正在使用上面的代码在页面墙上成功发布文本但不是图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:14:06.817

您可以使用 ASIHTTPRequest 来实现。试试这对我的代码有效。

-(IBAction)shareClicked:(id)sender {

```
//    if (selectedImage) {
//        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Social Plus"
//                                                       message:@"Please select an image to share"
//                                                      delegate:self
//                                             cancelButtonTitle:@"OK"
//                                             otherButtonTitles:nil];
//        [alert show];
//    }
//    else {
//        

    NSString *filePath = [[NSBundle mainBundle]pathForResource:@"f_selected" ofType:@"png"];
    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"https://graph.facebook.com/me/photos"]];
    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
    request.delegate = self;
    [request addFile:filePath forKey:@"file"];
    [request setPostValue:@"here will be the caption" forKey:@"message"];
    [request setPostValue:[[NSUserDefaults standardUserDefaults]objectForKey:@"access_token"] forKey:@"access_token"];
    [request setAllowCompressedResponse:NO];
//    [request setTimeOutSeconds:60];

    [request setDidFinishSelector:@selector(uploadRequestFinished:)];
    [request startAsynchronous];
//    }
}

-(void)uploadRequestFinished:(ASIHTTPRequest *)request
{

    NSString *responseStr = [request responseString];
    NSLog(@"%@",responseStr);
} 
```

# mod-rewrite - mod_rewrite 将文件夹重定向到 URL

> ID：11116992
> 
> 赞同：-1
> 
> 时间：2012-06-20T09:53:58.417
> 
> 标签：mod-rewrite

在过去的几个小时里，我一直在尝试做一些看似简单的事情..

```
http://www.mydomain.com/u/username 
```

重定向到

```
http://www.mydomain.com/goto.php?u=username 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:01:00.957

在 Apache 或 IIS 中？

在 apache 中，您可以使用 .htaccess（在 u 文件夹中）

```
RewriteEngine on
RewriteRule ^([^/]*)/([^/]*)/$ goto.php?u=$2 [L] 
```

如果在 IIS 上并且您拥有最新版本，则可以使用随附的工具轻松地将 .htaccess 导入其中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:57:31.097

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^u/(.*)$ goto.php?u=$1 [L]
</IfModule> 
```

**编辑：**要使用 HTTP 302/301 响应重定向，请使用：

```
RewriteRule ^u/(.*)$ goto.php?u=$1 [R=301,L] 
```

或者

```
RewriteRule ^u/(.*)$ goto.php?u=$1 [R,L] 
```

# c# - SQLCLR 项目中的 SqlDecimal 问题

> ID：11116994
> 
> 赞同：2
> 
> 时间：2012-06-20T09:53:59.523
> 
> 标签：c#, sql-server, precision, sqlclr, overflowexception

使用 SqlDecimals 时，我得到了一些意想不到的结果。最后，在划分 2 个 SqlDecimal 时，它似乎归结为规模问题。

c# 示例代码如下所示：

```
[Microsoft.SqlServer.Server.SqlFunction]
[return: SqlFacet(Precision = 38, Scale = 8)]
public static SqlDecimal fn_divide([SqlFacet(Precision = 38, Scale = 8)]SqlDecimal x, [SqlFacet(Precision = 38, Scale = 8)]SqlDecimal y)
{
    var r = SqlDecimal.Divide(@x, @y);

    return r;
} 
```

SQL 测试代码如下所示：

```
DECLARE @x numeric(38, 8),
        @y numeric(38, 8)

SELECT @x = Replicate('1', 28) + '.12345678',
       @y = '0.25896314'

SELECT via = 'TSQL', x = @x, y = @y, r = Convert(numeric(38, 8),  @x / @y)
SELECT via = 'SQLCLR', x = @x, y = @y, r = dbo.fn_divide(@x, @y) 
```

第二个选择返回我以下错误：

```
A .NET Framework error occurred during execution of user-defined routine or aggregate "fn_divide": `
System.OverflowException: Arithmetic Overflow.
System.OverflowException: 
   at System.Data.SqlTypes.SqlDecimal.MultByULong(UInt32 uiMultiplier)
   at System.Data.SqlTypes.SqlDecimal.AdjustScale(Int32 digits, Boolean fRound)
   at System.Data.SqlTypes.SqlDecimal.op_Division(SqlDecimal x, SqlDecimal y)
   at System.Data.SqlTypes.SqlDecimal.Divide(SqlDecimal x, SqlDecimal y)
  at UserDefinedFunctions.fn_divide(SqlDecimal x, SqlDecimal y) 
```

在网上搜索时，我发现很多与将 SqlDecimal 转换为 Decimal 时的舍入错误相关的问题，但在我的情况下，从头到尾一切都是 SqlDecimal，因为我想避免这种情况。同样，我“希望”结果与在 SQL 中本地实现的方式相同。但是，唉。即使它没有溢出，它也会在“边界情况”中给我不同的结果。

任何人都有关于如何解决这个问题或至少解决它的任何提示？SqlDecimal 是否在内部使用（.Net）小数，因此不能将信息塞进它的 3 个字节中？！？！？

PS：我无法预测数字（p，s）的哪些组合将传递给函数，但 38,8 是“可接受的”。我希望为我的原始 UDF 制作一个更快的 SQLCLR 版本（它所做的不仅仅是除法 =）。诚然，它更快，但它应该适用于相同的数字范围。