# StackOverflow 问答 11662000-11662999

# python - Python 不会导入数学模块。它正在获取一个甚至不存在的文件。我该怎么办？

> ID：11662001
> 
> 赞同：0
> 
> 时间：2012-07-26T03:37:26.507
> 
> 标签：python

```
# quadratic.py
# A program that computes the real roots fo a quadratic equation.
# Illustrates the use of the math library
# Note: This program crashes if the equation has no real roots

import math # math makes the library available

def main():
    print "This program finds the real solutions to a quadratic"
    print

    a, b, c = input("Please enter the coefficients (a, b, c): ")
    discRoot = math.sqrt(b * b - 4 * a * c)
    root1 = (-b +discRoot) / (2 * a)
    root2 = (-b +discRoot) / (2 * a)

    print
    print "The solutions are: ", root1 , root2 

main() 
```

她是我得到的错误：

> Macintosh-7:python andrewmetersky$ python quadratic.py
> 我作业问题的答案：什么是 i+x+j =
> Traceback（最近一次调用最后一次）：
> 文件“quadratic.py”，第 6 行，在
> import math #math make可用的库
> 文件“/Users/andrewmetersky/Desktop/Programming/Python/math.py”，第 5 行，在
> NameError：未定义名称'jp'

问题是，math.py 甚至不是该位置的文件。是的，但我删除了它，因为我认为 Python 试图获取它而不是数学模块。在那个位置有一个名为 math.pyc 的文件……那是模块吗？为什么它不获取它。

谢谢

PS-另外，我如何使我刚刚粘贴的那部分显示为带有堆栈溢出的代码，而不必为每行按空格 4 倍。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T03:41:34.993

您还需要删除 .pyc 文件。那是原始 .py 文件的编译版本，如果它在路径中，python 将使用它。仅当源 (.py) 文件存在且较新时，它才会更新（重新编译）。

当您`import`第一次使用本地文件时，Python 将该文件转换为字节码并标记它`.pyc`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T03:41:11.977

您有一个名为“math.py”的文件，位于：/User/andrewmetersky/Desktop/Programming/Python”之前，它位于 Python 自己的数学模块之前。重命名您的文件并删除匹配的 .pyc 文件，一切都应该再次运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T04:04:22.630

python import "/Users/andrewmetersky/Desktop/Programming/Python/math.py" 重命名它，或者将 quadratic.py 移动到另一个目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T03:45:23.473

math 是一个标准的 Python 库，因此您的代码应该按原样工作。

确认运行：

`$python`

`>>import math`

看看你得到了什么。

似乎您在本地目录中使用自己的定义来屏蔽数学库。

删除任何看起来像 math.py 或 math.pyc 的本地内容，然后重试。

跑

# r - 在 R 中处理月份和星期几变量

> ID：11662004
> 
> 赞同：-1
> 
> 时间：2012-07-26T03:38:12.233
> 
> 标签：r, time-series, mode, timeserieschart

我正在尝试对一个数据集进行一些数据分析，该数据集除其他外有一列用于月份（记录为`"jan",..., "dec"`）和星期几（`"mon",...,"fri"`）。我有两个问题。我的第一个问题是如何使用包`mfv`中的函数获取这些变量的模式`modeest`。我有一种感觉，这与我需要制作的变量类型有关（因子、字符等）。我宁愿不将数据重新编码为数字变量。

如果我制作变量因子，我可以通过 go 得到一个情节`plot(data$month)`，但现在我的情节是按字母顺序而不是时间顺序，我该如何改变这个？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T04:11:13.637

> 如果我制作变量因子，我可以通过 plot(data$month) 得到一个情节，但现在我的情节是按字母顺序而不是时间顺序，我该如何改变这个？

关于那个，诀窍是制作一个与旧因子相同的新因子，但级别的顺序不同：

```
data$month <- factor(data$month, levels=tolower(month.abb)) 
```

关于使用`mfv`. `?mfv`明确指出

> 此函数返回给定*数值*向量中出现频率最高的值

但是在函数调用中将一个因子强制为数字

```
mfv(as.numeric(data$month)) 
```

# git - 如何设置并将 repo 推送到 github？

> ID：11662008
> 
> 赞同：2
> 
> 时间：2012-07-26T03:38:37.377
> 
> 标签：git, github

我在我的 Linux Ubuntu 10.10 服务器上安装了 git 和 git-core，以便编译我拥有的服务器。我按照 github 站点上的教程设置了所有内容，但是当我执行 git remote add origin 时，出现以下错误

```
error: could not lock config file .git/config: Disk quota exceeded 
```

我在服务器用户和root用户下都试过了。我继续尝试推送 repo，并在接下来的所有步骤中得到了相同的信息。我尝试卸载并重新安装，但仍然出现错误。

注意：购买此 Linux 服务器时，我没有设置任何配额。

提前谢谢。

编辑：看起来我所有的 inode 都被消耗掉了。我正在删除文件以重新获得这些 inode。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T03:41:43.900

看起来您的磁盘空间不足。删除一些文件，然后重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:43:50.213

`.git`目录通常会占用巨大的磁盘空间。首先在一个小目录中尝试，以确保您的步骤是正确的。

# java - 图像未显示在 DynamicReports 中

> ID：11662009
> 
> 赞同：0
> 
> 时间：2012-07-26T03:38:38.750
> 
> 标签：java, jasper-reports, dynamic-reports

我刚刚从[http://dynamicreports.sourceforge.net/index.html](http://dynamicreports.sourceforge.net/index.html)下载了 DynamicReports 库。我目前在 Tomcat 5.5 下使用 Servlet。

我采用了他们的两个示例代码，当报告生成为 PDF 时一切正常。

以 HTML 格式生成报告时会出现问题。没有加载所有图像间隔，因此在浏览器中获取 X。同样，报告正在使用 Servlet 进行查看。

我检查了 html 源代码，下面是图像路径：

```
<img alt="" src="nullpx" style="width: 60px; height: 1px;"/> 
```

数据显示正确，唯一的问题是图像。

任何人都知道 DynamicReports 正在使用 Image Servlet 吗？我在他们的网站上找不到任何配置。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:16:11.297

我想通了。您实际上需要一个 Image Servlet。它基本上使用我相信 Jasper Reports 附带的相同 Image Servlet。

有一个完整的示例 Servlet。我只需要修改图像路径，它就生成了一个很棒的报告！！！。下面是链接：

[http://sourceforge.net/tracker/?func=detail&aid=3065668&group_id=313754&atid=1320348](http://sourceforge.net/tracker/?func=detail&aid=3065668&group_id=313754&atid=1320348)

# android - 从 DragEvent 的 getX() 和 getY() 方法返回的数字究竟如何？

> ID：11662012
> 
> 赞同：3
> 
> 时间：2012-07-26T03:39:12.510
> 
> 标签：android, drag-and-drop

`DragEvent`是一个与 Android 中的拖放 api 一起使用的类。2它的方法要具体，`getX()`而且`getY()`特别重要。我想确切地知道`View`被拖过来的另一个视图的哪个部分。

例如，在我的情况下，知道用户是否拖动非常重要，比如将 TextView 放在另一个 TextView 上，但我需要知道它是否更接近下半部分或上半部分。问题是，我不知道这些数字是如何与屏幕放置相关的。我很感激在这个问题上的任何帮助。

编辑：希望我清楚我在问什么。如果需要澄清，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-30T05:44:26.387

getX() 和 getY() 方法返回相对于您需要放置的目标视图的坐标。您可以使用 Toast 进行测试，如下所示：

```
Toast.makeText(getApplicationContext(), "X:" + (int)event.getX() + ", Y:" + (int)event.getY(), Toast.LENGTH_SHORT).show(); 
```

当我测试它时，我的目标视图从屏幕的一半开始。在此目标视图的起始边缘放置视图时，toast 消息显示 getY() 值约为 1。

# c# - 如何在 C# 中获取音频/视频和捕获设备列表？

> ID：11662015
> 
> 赞同：2
> 
> 时间：2012-07-26T03:39:24.410
> 
> 标签：c#, audio, video, webcam, capture

在过去的两周里，我一直在到处寻找，甚至试图获得关于如何做到这一点的提示。这是我第一次询问，当我说我不喜欢寻求帮助时请相信我。

但我已经走到了尽头，我所能找到的只是如何在 C# 中使用别人的框架列出可用的音频和视频设备。我要做的就是列出从 C# 中连接到一台计算机的可用音频和视频设备，而无需任何额外的 3rd 方框架。

如果你们中的任何人对此有帮助，我将不胜感激。就像我说的那样，我已经走到尽头，试图弄清楚如何做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:31:49.653

试试 aForge.net [http://www.aforgenet.com/](http://www.aforgenet.com/) 这样做非常简单，或者如果对你来说足够的话，你可以使用他们现成的对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:45:21.557

在谷歌搜索[“C#获取视频捕获设备”](http://www.google.com/search?q=c#%20get%20video%20capture%20devices)之后。我最终阅读了这两篇 CodeProject 文章：

*   [DirectShow.NET](http://www.codeproject.com/Articles/2615/DirectShow-NET)
*   [DirectX.Capture 类库](http://www.codeproject.com/Articles/3566/DirectX-Capture-Class-Library)

您会看到其中涉及到很多 COM 互操作。从它的声音来看，我不确定你是否准备好直接投入其中，因为这可能是很多乏味的工作。我会考虑使用现有的东西，而不是重新发明轮子。毕竟，它们都属于[公共领域](http://creativecommons.org/licenses/publicdomain/)。

此外，StackOverflow 上有这篇文章，其中有一些有趣的链接：

*   [获取默认音频/视频设备](https://stackoverflow.com/questions/6438628/get-default-audio-video-device)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-10-02T10:36:46.407

```
 /// <summary>
        /// The DirectSoundEnumerate function enumerates the DirectSound Odrivers installed in the system.
        /// </summary>
        /// <param name="lpDSEnumCallback">callback function</param>
        /// <param name="lpContext">User context</param>
        [DllImport("dsound.dll", EntryPoint = "DirectSoundEnumerateA", SetLastError = true, CharSet = CharSet.Unicode, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
        static extern void DirectSoundEnumerate(DevicesEnumCallback lpDSEnumCallback, IntPtr lpContext);

        /// <summary>
        /// The DirectSoundEnumerate function enumerates the DirectSound Input drivers installed in the system.
        /// </summary>
        /// <param name="lpDSEnumCallback">callback function</param>
        /// <param name="lpContext">User context</param>
        [DllImport("dsound.dll", EntryPoint = "DirectSoundCaptureEnumerateA", SetLastError = true, CharSet = CharSet.Unicode, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
        static extern void DirectSoundCaptureEnumerate(DevicesEnumCallback lpDSEnumCallback, IntPtr lpContext); 
```

# smtp - smtp.SendMail 在 EOF 10 分钟后失败

> ID：11662017
> 
> 赞同：8
> 
> 时间：2012-07-26T03:40:20.773
> 
> 标签：smtp, go

我正在尝试通过标准库 SMTP 包发送邮件，它在整整 10 分钟内什么都不做，然后失败并出现我无法理解的无用的文件结束错误。

```
// excerpt from the calling function
// --- snip ---
if e := mailNotify(board, validPosts, ipMinusPort, delTime); e != nil {
    errorPage(w, tmpl, "Contact Administrator",
        "Email notification failed, please contact archive admin.")
    log.Println("ERROR: Failed to send notification email: " + e.Error())
}
// --- snip ---

func mailNotify(board *config.Board, validPosts []int64, 
                        ip string, delTime time.Time) error {

    addresses := strings.Split(board.NotifyAddr, ",")
    if len(addresses) < 1 {
        return nil
    }

    msg := new(bytes.Buffer)
    type values struct {
        IP      string
        Posts   []int64
        DelTime time.Time
    }
    t.ExecuteTemplate(msg, "post_reported", &values{ip, validPosts, delTime})
    auth:= smtp.PlainAuth("", board.NotifyAddr, board.NotifyPass,
        strings.Split(board.SMTPServer, ":")[0])
    return smtp.SendMail(board.SMTPServer, auth,
        board.FromEmail, addresses, msg.Bytes())
} 
```

记录的确切消息是：

> 2012/07/25 22:57:58 错误：无法发送通知电子邮件：EOF

我已经`log.Printf`调试了这个函数并验证了此时发送的值是有效的。电子邮件地址是 gmail.com 上的真实地址，密码正确，并且`board.SMTPServer`是`smtp.googlemail.com:465`. 我尝试将 msg.Bytes() 的结果存储在一个单独的变量中，并获取长度以确保它正在生成要发送的字节数组，并且长度确实非零。我猜 EOF 是从标准库中比 SendMail 函数本身更深的地方冒出来的，但我不知道它在哪里窒息，我不知道我做了什么来扰乱它。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-26T07:08:24.277

Gmail 的 465 端口用于通过 TLS 进行连接，但 SendMail 需要普通的旧 TCP。尝试连接到端口 587。SendMail 将在可用时自动升级到 TLS（在这种情况下）。

# magento - Magento 1.4.1.1 数据库

> ID：11662018
> 
> 赞同：0
> 
> 时间：2012-07-26T03:40:21.617
> 
> 标签：magento

我有来自 magento 1.4.1.1 的数据库备份。现在我想将它导入 Magento v1.7.0.2。

它适用于下一个 Magento 版本吗？以这种方式使用它是否有任何技术问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:26:15.100

1.  从备份创建数据库
2.  将 1.7.0.2 添加到您的网络服务器文件系统
3.  从 1.4.1.1 安装创建/复制 local.xml 文件，将其指向新数据库。
4.  当您加载任何页面时，Magento 将运行任何必要的升级脚本
5.  利润

# excel - 在 olap 多维数据集的 excel 中的工具提示属性中显示图像

> ID：11662019
> 
> 赞同：1
> 
> 时间：2012-07-26T03:40:24.727
> 
> 标签：excel, ssas, olap

我有一个 olap 立方体，可以发送工具提示数据。当最终用户（使用 excel）查询数据时，我希望他/她可以显示/隐藏工具提示或包含在报告中的图片中。

我可以将 URL 发送到图片，但是我希望 exel 将其显示为图片而不是 URL。

这可能吗？

# titanium - 钛地图视图无法正常工作

> ID：11662020
> 
> 赞同：1
> 
> 时间：2012-07-26T03:40:28.483
> 
> 标签：titanium, titanium-mobile

我正在使用地理编码器来翻译通过文本字段给出的地址，根据纬度和经度，然后将地图区域设置为该位置，如下所示。

```
var location = Titanium.UI.createTextField({...});
var btnSearch = Titanium.UI.createButton({...});
var mapview = Titanium.Map.createView({
    top: 75,    height: 350,
    mapType: Titanium.Map.SATELLITE_TYPE,
    animate: true,  regionFit: true,    userLocation: true
});
btnSearch.addEventListener('click',function(e){
    if(location.value != '') {
        Ti.Geolocation.forwardGeocoder(location.value, function(e){
            Ti.API.info(location.value + '\'s co-ordinates are: ' + e.latitude + ' lat, ' + e.longitude + ' lon');
            mapview.region = {latitude: e.latitude, longitude: e.longitude, latitudeDelta:0.1, longitudeDelta:0.1};
        });
    } 
    else {
        alert('You must provide a start address!');
    }
}); 
```

翻译过程工作正常，但地图区域未设置为地图视图中的新坐标。如果有人知道这个问题的原因，请帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T05:11:11.277

试试这个
`mapview.setLocation({latitude: e.latitude, longitude: e.longitude, latitudeDelta:0.1, longitudeDelta:0.1});`

# apache-flex - BubbleChart 未使用标签功能

> ID：11662023
> 
> 赞同：0
> 
> 时间：2012-07-26T03:41:07.640
> 
> 标签：apache-flex, charts

我创建了一个 BubbleChart 并设置了标签函数，如下所示。但是，它没有被调用。

```
 <mx:BubbleChart width="100%" height="100%"
                    minRadius="3" maxRadius="16"
                    color="#ffffff"
                    dataProvider="{dataSet}">

        <mx:series>
            <mx:BubbleSeries >
                <mx:verticalAxis>
                    <mx:LinearAxis labelFunction="axisLabelFunction"/>
                </mx:verticalAxis>
            </mx:BubbleSeries>
        </mx:series>

    </mx:BubbleChart> 
```

和函数调用：

```
 public function axisLabelFunction(labelValue:Object, previousValue:Object, axis:IAxis):String {

            if (labelValue) { // breakpoint here - never triggered
                trace("value");
            }
            return "";
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:34:46.557

我想到了！我在 BubbleSeries 的垂直轴中定义了标签函数，它应该在 BubbleChart 的垂直轴中：

```
 <mx:BubbleChart width="100%" height="100%"
                    minRadius="3" maxRadius="16"
                    color="#ffffff"
                    dataProvider="{dataSet}"
                    >

        <mx:series>
            <mx:BubbleSeries />
        </mx:series>

        <mx:verticalAxis>
            <mx:LinearAxis labelFunction="axisLabelFunction" />
        </mx:verticalAxis>

    </mx:BubbleChart> 
```

# android - 谷歌分析 trackEvent 没有登录到分析

> ID：11662025
> 
> 赞同：1
> 
> 时间：2012-07-26T03:41:23.793
> 
> 标签：android, google-analytics

我使用了 Android 的 Google Analytic`trackEvent`并使用 Google 的演示代码对其进行了测试：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

 tracker = GoogleAnalyticsTracker.getInstance();

// Start the tracker in manual dispatch mode...
  tracker.startNewSession("UA-33260404-1", this);

// ...alternatively, the tracker can be started with a dispatch interval (in seconds).
// tracker.startNewSession("UA-33260404-1", 20, this);

setContentView(R.layout.main);
Button createEventButton = (Button)findViewById(R.id.NewEventButton);
createEventButton.setOnClickListener(new OnClickListener() {
  @Override
  public void onClick(View v) {
    tracker.trackEvent(
        "Clicks",  // Category
        "Button",  // Action
        "clicked", // Label
        77);       // Value
  }
});

Button createPageButton = (Button)findViewById(R.id.NewPageButton);
createPageButton.setOnClickListener(new OnClickListener() {
  @Override
  public void onClick(View v) {
    // Add a Custom Variable to this pageview, with name of "Medium" and value "MobileApp"
    tracker.setCustomVar(1, "Medium", "Mobile App");
    // Track a page view. This is probably the best way to track which parts of your application
    // are being used.
    // E.g.
    // tracker.trackPageView("/help"); to track someone looking at the help screen.
    // tracker.trackPageView("/level2"); to track someone reaching level 2 in a game.
    // tracker.trackPageView("/uploadScreen"); to track someone using an upload screen.
    tracker.trackPageView("/TestActivity");
  }
}); 
```

我在移动设备上对其进行了测试，我可以找到示例访客计数器的基本数据，但我看不到 trackPageView("/TestActivity") 和 trackEvent。我可以在报告中看到 tracker.setCustomVar，所以我的问题是如何查看 trackEvent。我需要在后台设置吗？Google 的文档对在 Android 中执行此操作不是很详细。

编辑：我找到了 trackPageView 和 trackEvent 的位置，但我还有另一个问题：trackEvent 正在记录 Clicks、Button 和 clicked，但我在日志中找不到 77 值。我在哪里可以找到 77？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:59:15.397

你没有打电话`tracker.dispatch()`。如果您在调用时未设置调度间隔，则`tracker.startNewSession()`需要`dispatch`在某个时候调用，可能在您的`onPause`生命周期方法中：

[https://developers.google.com/analytics/devguides/collection/android/devguide#startingTheTracker](https://developers.google.com/analytics/devguides/collection/android/devguide#startingTheTracker)

# asp.net - 返回 XML 的 WebAPI

> ID：11662028
> 
> 赞同：56
> 
> 时间：2012-07-26T03:41:56.067
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api

我希望我的 WEB API 方法将 XML 对象返回给调用应用程序。目前它只是将 XML 作为字符串对象返回。这是不可以吗？如果是这样，您如何告诉 webapi get 方法它正在返回 XML 类型的对象？

谢谢

编辑：Get 方法的一个例子：

```
[AcceptVerbs("GET")]
public HttpResponseMessage Get(int tenantID, string dataType, string ActionName)
{
   List<string> SQLResult = MyWebSite_DataProvidor.DB.spReturnXMLData
            ("SELECT * FROM vwContactListing FOR XML AUTO, ELEMENTS").ToList();
   string AllResults = "";
   for (int i = 0; i < SQLResult.Count - 1; i++)
   {
       AllResults += SQLResult[i];
   }
    string sSyncData = "<?xml version=\"1.0\"?> " + AllResults;
    HttpResponseMessage response = new HttpResponseMessage();
    response.Content = new StringContent(sSyncData);
    return response;          
} 
```

它有点hacky，因为我仍处于原型设计阶段。当我可以证明它是可行的时会重构。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2014-04-14T09:00:15.360

如果您不希望控制器决定返回对象类型，则应将方法返回类型设置为`System.Net.Http.HttpResponseMessage`并使用以下代码返回 XML。

```
public HttpResponseMessage Authenticate()
{
  //process the request 
  .........

  string XML="<note><body>Message content</body></note>";
  return new HttpResponseMessage() 
  { 
    Content = new StringContent(XML, Encoding.UTF8, "application/xml") 
  };
} 
```

这是始终从 Web API 返回 XML 的最快方式。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-07-26T04:06:35.050

如果您返回一个可序列化的对象，WebAPI 将根据您的客户端发送的 Accept 标头自动发送 JSON 或 XML。

如果你返回一个字符串，你会得到一个字符串。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2014-04-22T15:08:38.803

这是与 IHttpActionResult 返回类型兼容的另一种方式。在这种情况下，我要求它使用 XML 序列化程序（可选）而不是数据协定序列化程序，我正在使用`return ResponseMessage(`以便获得与 IHttpActionResult 兼容的返回：

```
return ResponseMessage(new HttpResponseMessage(HttpStatusCode.OK)
       {
           Content = new ObjectContent<SomeType>(objectToSerialize, 
              new System.Net.Http.Formatting.XmlMediaTypeFormatter { 
                  UseXmlSerializer = true 
              })
       }); 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2012-07-26T03:43:07.500

您应该简单地返回您的对象，而不应该关心它是 XML 还是 JSON。从 web api 请求 JSON 或 XML 是客户端的责任。例如，如果您使用 Internet Explorer 进行调用，则请求的默认格式为 Json，而 Web API 将返回 Json。但是如果你通过谷歌浏览器发出请求，默认的请求格式是 XML，你会得到 XML。

如果您使用[Fiddler](http://www.fiddler2.com/fiddler2/)发出请求，则可以将 Accept 标头指定为 Json 或 XML。

```
Accept: application/xml 
```

您可能想看这篇文章：[ASP.NET MVC4 Web API Beta 中的内容协商 - 第 1 部分](http://blogs.msdn.com/b/kiranchalla/archive/2012/02/25/content-negotiation-in-asp-net-mvc4-web-api-beta-part-1.aspx)

编辑：根据您用代码编辑的问题：

字符串的简单返回列表，而不是将其转换为 XML。尝试使用 Fiddler。

```
public List<string> Get(int tenantID, string dataType, string ActionName)
    {
       List<string> SQLResult = MyWebSite_DataProvidor.DB.spReturnXMLData("SELECT * FROM vwContactListing FOR XML AUTO, ELEMENTS").ToList();
       return SQLResult;
     } 
```

例如，如果您的列表如下：

```
List<string> list = new List<string>();
list.Add("Test1");
list.Add("Test2");
list.Add("Test3");
return list; 
```

并且您指定`Accept: application/xml`输出将是：

```
<ArrayOfstring xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
  <string>Test1</string>
  <string>Test2</string>
  <string>Test3</string>
</ArrayOfstring> 
```

如果您在请求中指定“接受：应用程序/json”，则输出将是：

```
[
  "Test1",
  "Test2",
  "Test3"
] 
```

所以让客户端请求内容类型，而不是你发送自定义的 xml。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-21T11:05:10.223

在我的 netcore 2.2 项目中，我使用以下代码：

```
[HttpGet]
[Route( "something" )]
public IActionResult GetSomething()
{
    string payload = "Something";

    OkObjectResult result = Ok( payload );

    // currently result.Formatters is empty but we'd like to ensure it will be so in the future
    result.Formatters.Clear();

    // force response as xml
    result.Formatters.Add( new Microsoft.AspNetCore.Mvc.Formatters.XmlSerializerOutputFormatter() );

    return result;
} 
```

它只强制控制器中的一个操作返回一个 xml，而不影响其他操作。此外，此代码不包含作为一次性对象的 HttpResponseMessage 或 StringContent 或 ObjectContent，因此应适当处理（如果您使用任何提醒您的代码分析器，这尤其是一个问题）。

更进一步，您可以使用如下方便的扩展：

```
public static class ObjectResultExtensions
{
    public static T ForceResultAsXml<T>( this T result )
        where T : ObjectResult
    {
        result.Formatters.Clear();
        result.Formatters.Add( new Microsoft.AspNetCore.Mvc.Formatters.XmlSerializerOutputFormatter() );

        return result;
    }
} 
```

你的代码会变成这样：

```
[HttpGet]
[Route( "something" )]
public IActionResult GetSomething()
{
    string payload = "Something";

    return Ok( payload ).ForceResultAsXml();
} 
```

此外，这个解决方案看起来像是一种强制返回为 xml 的明确而干净的方法，并且很容易添加到您现有的代码中。

PS 我使用完全限定名称 Microsoft.AspNetCore.Mvc.Formatters.XmlSerializerOutputFormatter 只是为了避免歧义。

# spring - 从不同的应用程序注销用户.. Spring Security

> ID：11662029
> 
> 赞同：0
> 
> 时间：2012-07-26T03:41:58.930
> 
> 标签：spring, spring-security

我在两个不同的站点上部署了两个单独的 Web 应用程序 X 和 Y。Y 负责信用卡处理，X 负责其余功能。

用例：如果 A 想购买订阅，他会做以下事情

(i) A 登录到 X

(ii) A 添加订阅

(iii) 添加订阅后，他登录 Y 并添加他的信用卡信息

(iv) 他回到 X 并为此付出代价。

**现在我的问题是，当他在 X 中时，如何从 Y 手动注销 A..？粗略地说，如何从其他应用程序中注销用户？**

我确实为 Y 配置了会话失效期，并且我也在 Y 中使用注销过滤器..

我在 X 和 Y 中都使用**Spring Security**、Hibernate、Spring、Spring MVC..

我也在这里发过

[http://forum.springsource.org/showthread.php?128741-Logging-out-a-user-from-a-different-application-Spring-Security&p=420136#post420136](http://forum.springsource.org/showthread.php?128741-Logging-out-a-user-from-a-different-application-Spring-Security&p=420136#post420136)

谢谢，

维韦卡南德·阿兰帕利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:33:31.707

我只是重写场景

1.  A 登录 X
2.  在某个进程 X 重定向到 Y 之后
3.  A 登录到 Y
4.  在 Y 完成一个进程后，A 应该从 Y 注销并再次重定向到 X

现在，在第 4 步中，完成过程后，您必须从 SessionRegistry 获取当前用户主体，并使该用户的所有会话信息过期，而不仅仅是重定向到 Y。

# c++ - OpenGL - VAO、VBO、IBO、glDrawElements 不显示

> ID：11662030
> 
> 赞同：6
> 
> 时间：2012-07-26T03:42:14.753
> 
> 标签：c++, opengl, vbo

我无法让我的关卡数据出现在屏幕上。我有我的着色器在使用正确渲染一个立方体但不是水平。

这是我的 VBO、VAO 和 IBO 的设置：

```
void ZoneMesh::buildData()
{
    // Create the VBO for this mesh
    glGenBuffers(1, &vbo);
    glBindBuffer(GL_ARRAY_BUFFER, vbo);
    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);

    // Create the IBO
    glGenBuffers(1, &ibo);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ibo);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, numPoly * 3 * sizeof(short), indices, GL_STATIC_DRAW);

    // Create the VAO
    glGenVertexArraysAPPLE(1, &vao);
    glBindVertexArrayAPPLE(vao);

    // Bind the VBO to the buffer and set up the attributes
    glBindBuffer(GL_ARRAY_BUFFER, vbo);
    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), BUFFER_OFFSET(0));
    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, sizeof(Vertex), BUFFER_OFFSET(sizeof(float)*3));
    glVertexAttribPointer(2, 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), BUFFER_OFFSET(sizeof(float)*5));

    //Bind the IBO to the VAO
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ibo);
} 
```

这是我的顶点结构：

```
struct Vertex
{
    float x;
    float y;
    float z;
    float u;
    float v;
    float normX;
    float normY;
    float normZ;
}; 
```

以下是 ZoneMesh 类中的相关数据项：

```
Vertex* vertices;
short* indices;

GLuint vbo;
GLuint vao;
GLuint ibo; 
```

顶点着色器：

```
#version 120

attribute vec3 position;

uniform mat4 camera;

void main()
{
    gl_Position = camera * vec4(position, 1.0f);
} 
```

片段着色器：

```
#version 120

void main(void)
{
    gl_FragColor = vec4(0.0, 0.6, 0.7, 1.0);
} 
```

渲染：

```
 shader.Use();

    // Testing - render the first 50 meshes
    for(int i = 0; i < 50; i++)
    {

        glUniformMatrix4fv(shader("camera"), 1, GL_FALSE, glm::value_ptr(MVPMatrix));

        glEnableVertexAttribArray(shader["position"]);
        glBindVertexArrayAPPLE(zone.getVAO(i));
        glDrawElements(GL_TRIANGLES, 500, GL_UNSIGNED_SHORT, NULL);

    }

    shader.UnUse(); 
```

渲染/着色器的使用不是问题。MVP 矩阵是正确的。我在其上方正确渲染了一个立方体。该区域不渲染。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T05:08:36.723

`GL_LINE`不是`glDrawElements`你想要的有效原语`GL_LINES`。

在你的代码中使用`glGetError()`来发现这些类型的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-27T09:26:14.660

我遇到了同样的问题...看看那里：[glbindvertexarrays 的作用是什么...](https://stackoverflow.com/questions/21652546/what-is-the-role-of-glbindvertexarrays-vs-glbindbuffer-and-what-is-their-relatio) 按照所有 Gen/Bind/Data 的步骤逐步使其工作。此外，它解决了几个版本的OpenGL引入的各种方言之间的混淆......

# c++ - 不简单，从 char[8] 转换 long long

> ID：11662039
> 
> 赞同：2
> 
> 时间：2012-07-26T03:43:45.167
> 
> 标签：c++, types

我有一个 char 数组，有 8 个位置（char data[8];），这个数组上有一个 unsigned long long int 值（8 个字节大小）... data[0] 有 long long 的第一个字节int, data[1] 有第二个，依此类推。我的问题是如何将该值再次放在 unsigned long long 变量上？

我试过换班，但值不等于原始值，我怎么能在不改变原始数组的情况下做到这一点......

字节的顺序是 little endian 变量的正常顺序（从高位到低位）

这是一个打印与预期不同的值的代码。

```
char vec[8]={0,0,0,0,0,0,0,1};

unsigned long long value = *((unsigned long long*) vec);

std::cout<<value;

return 0; 
```

结果应该是 1，而是 72057594037927936。感谢您的耐心等待。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T03:47:46.213

`data`假设数组的字节顺序与结果`long long`值相同

```
unsigned long long ll;
assert(sizeof ll == sizeof data);
memcpy(&ll, data, sizeof ll); 
```

避免基于演员表的解决方案。它们违反了严格的别名语义，因此不能保证有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T03:45:32.410

你可以做：

```
unsigned long long value = *((unsigned long long*) data); 
```

但这假设：

1.  `data`正确对齐以作为`long long`. 例如，如果`long long`需要 8 字节对齐但`data`仅 4 字节对齐，它可以做坏事。
2.  的字节`data`存储顺序与当前机器的字节顺序相同`long long`。请参阅[字节顺序](http://en.wikipedia.org/wiki/Endianness)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T03:50:28.483

取决于硬件表示，直接转换可能不起作用，这在大多数情况下应该起作用：

```
long long to_llong(unsigned char *data) {
    long long v = 0;
    for (int i = 0; i < 8; i++) {
      v = (v << 8) | data[i];
    }
    return v;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T04:07:40.333

你说的第一个字节是什么意思？它是最低有效字节还是最高有效字节？

该问题的答案决定了数值是小端还是大端。[维基百科链接](http://en.wikipedia.org/wiki/Endianness)

如果 value 的 endian 样式与您的系统相同，您可以直接将第一个字节的地址转换为“unsigned long long *”，如果不一样则必须转换其 endian 样式。

# caching - Azure 缓存预览 - 提前到期

> ID：11662045
> 
> 赞同：1
> 
> 时间：2012-07-26T03:44:42.483
> 
> 标签：caching, azure, azure-caching

我们在并置模式下运行 Azure 缓存（预览版），我们注意到有时无法在缓存中找到项目或过早过期。

为了更好地理解我的问题，请查看我们日志中的以下输出

```
2012-07-26 03:14:15,093 [13] DEBUG XXX.CacheBase - Update: XXX-CacheKey-XXX | Abs Exp: 07/26/2012 04:15:15 +00:00 | Sli Exp: 00:00:00
2012-07-26 03:14:17,452 [22] DEBUG XXX.CacheBase - PessimisticFetch - XXX-CacheKey-XXX
2012-07-26 03:24:32,229 [23] DEBUG XXX.CacheBase - PessimisticFetch - XXX-CacheKey-XXX
2012-07-26 03:24:32,245 [23] DEBUG XXX.SomeClass - Item not found in cache: XXX-CacheKey-XXX 
```

说明：

1.  第 1 行：插入到具有绝对过期时间的缓存中，注意绝对 ex
2.  第 2 行：大约一分钟后获取 - 确定
3.  第 3 行：大约 10 分钟后获取 - 未找到
4.  第 4 行：报告的项目在缓存中未找到

简而言之，我们使用 GetAndLock / PutAndLock 来存储这些特定项目。这些项目有一个绝对过期时间（1 小时），但从 5 到 10 分钟后，该项目不再在缓存中。

我的 CacheItemPolicy 更令人不安的是我设置了一个删除通知，但这永远不会被触发

```
//---
cacheItemPolicy.RemovedCallback = ItemRemoved;
//---    

static void ItemRemoved(CacheEntryRemovedArguments args)
{
    _log.DebugFormat("Item evicted from cache: {0}. Reason: {1}", args.CacheItem.Key, args.RemovedReason);
} 
```

我还附上了我们缓存设置的屏幕截图参见图片-> [http://i.stack.imgur.com/4ORQQ.jpg](http://i.stack.imgur.com/4ORQQ.jpg)

我已经没有什么想法了......任何线索解释，WTF的将不胜感激:)

# oracle - 为托管在不同服务器中的数据库中的表创建同义词

> ID：11662047
> 
> 赞同：6
> 
> 时间：2012-07-26T03:44:44.207
> 
> 标签：oracle, synonym, netezza

在 oracle 中，如果另一个数据库在同一服务器内，我做了以下创建同义词

```
CREATE SYNONYM synonymName FOR databaseName.schema.table; 
```

我应该怎么做才能为托管在不同服务器中的数据库中的表创建同义词，以便我可以提供服务器连接凭据。

我对 oracle 和 netezza 都需要这个。

编辑：通过参考下面的答案尝试（对于 Oracle）时，当远程链接包含 IP 地址或链接名称中的“-”时出现语法错误。例如。

```
CREATE PUBLIC DATABASE LINK abc-def.xyz.com CONNECT TO user IDENTIFIED BY pw USING 'databaseName'; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T04:27:45.413

对于 Oracle，您将创建一个到远程数据库的数据库链接：

```
CREATE PUBLIC DATABASE LINK rmt CONNECT TO user IDENTIFIED BY pw USING 'remotedb'; 
```

然后创建同义词：

```
CREATE SYNONYM syn FOR schema.table@rmt; 
```

然后简单地 SELECT x,y,z FROM syn;

不确定netezza。

编辑：

您不能在数据库链接名称中使用“-”字符。

如果您选择在链接名称中使用 IP 地址，则必须用双引号将链接名称括起来。不知道你为什么要这样做——如果你的远程数据库的 IP 地址改变了怎么办？对我来说，数据库链接名称应该是远程数据库的助记符。IP地址告诉我很少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-21T09:49:23.890

除了@DCookie

如果要创建远程数据库的同义词。

```
CREATE PUBLIC DATABASE LINK rmt CONNECT TO user IDENTIFIED BY pw USING 
'HOST_NAME:PORT/SERVICE_NAME_SID' 
```

# java - 调用方法时出现IOException错误

> ID：11662048
> 
> 赞同：0
> 
> 时间：2012-07-26T03:44:58.577
> 
> 标签：java, exception, file-io

我正在尝试写入文件。

我在 writeHtmlFile 方法中声明了一个异常，但是当我尝试调用 writeHtmlFile 方法时，仍然出现错误“必须捕获或声明要抛出未报告的异常 java.io.IOException”？

```
public class PartB extends ChangeDrawer
{

  public static ChangeDrawer cd = new ChangeDrawer();
  static int[] floatDrawer = {8,5,4,4,5,20,20,6,10,3,8};

   {
      String selection="";
      Scanner scan = new Scanner (System.in); 

      System.out.println ("Enter P to make a purchase and receive your change");
      System.out.println ("Enter L to load the Change drawer");
      System.out.println ("Enter H to write the contents of the Change Drawer to a web page");
      System.out.println ("Enter E to exit the program");

    while (selection.compareTo("E")!=0)
    {
      selection = scan.next();
      if (selection.compareTo("P")== 0)
         makeChange();
      else if (selection.compareTo("L")==0)
         loadFloat();
       else if (selection.compareTo("H")==0)
         writeHtmlFile(); //unreported exception java.io.IOException must be caught or
                          //declared to be thrown

    }
        System.out.println ("Ending .............................. ");
    }

    //more code exists between these two sets

   public static void writeHtmlFile() throws IOException
   {
    FileWriter fwriter = new FileWriter("ChangeDrawer.html");
    PrintWriter outputFile = new PrintWriter(fwriter);
    outputFile.println("This should work!");

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T03:47:34.450

*调用* 的代码`writeHtmlFile`必须捕获（或重新声明以抛出）`IOException`. 由于调用代码在静态初始化程序中，因此它必须是前者。

# java - PHP 中的 3DES 与 Java 不同

> ID：11662052
> 
> 赞同：0
> 
> 时间：2012-07-26T03:45:21.147
> 
> 标签：java, php, encryption, 3des

我有一个来自 java 服务的 3DES 加密字符串 -

```
30BA1A87B3B08F8A6F69BF0E2EC7539B 
```

当我在 PHP 中应用 3DES 加密来检查结果时，我得到一个非常不同的字符串，它是 -

```
ªã;Îù1ù@yq—ÿÃÓ"Õó[ûñüM“ƒº5fá$!Ø5JºÝ7 
```

我正在使用开源 PHP 库进行加密，它是来自[http://sourceforge.net/projects/phpseclib/](http://sourceforge.net/projects/phpseclib/)的 Crypt_TripleDES 。

有人可以帮助我，了解什么是错的，在哪里？

请问我是否遗漏了什么。

谢谢

PHP 代码 -

```
require_once 'Crypt/TripleDES.php';
$tdes = new Crypt_TripleDES();
$tdes->setKey($key);
$enc_text = $tdes->encrypt($text);
echo 'Encrypted text - '.($enc_text).'<br />'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:51:56.597

这很像您显示信息的方式。

在您的第一行中，您似乎将字符串输出为十六进制。即数据的每个字节都被转换成两个十六进制字符。

在您的第二行中，您似乎只是想将原始二进制文件转储到输出中。也就是说，每个字节都被解释为一个 ASCII 字符，这就是为什么它看起来像地狱的原因。

我们能否获得有关您的 Java 输出的更多信息？你是怎么得到它的？

* * *

查看库后，似乎是的，它正在返回原始二进制字符串。要将其转换为十六进制，您只需调用内置[`bin2hex()`](http://php.net/manual/en/function.bin2hex.php)函数：

```
require_once 'Crypt/TripleDES.php';
$tdes = new Crypt_TripleDES();
$tdes->setKey($key);
$enc_text = $tdes->encrypt($text);
echo 'Encrypted text - ' . bin2hex($enc_text) . '<br />'; 
```

# python-3.x - PyQt4：self.hide() 只隐藏内容

> ID：11662056
> 
> 赞同：0
> 
> 时间：2012-07-26T03:45:46.390
> 
> 标签：python-3.x, pyqt4

当最小化事件被捕获时，我尝试继承 QMainWindows 并调用 self.hide() 。当我按下最小化按钮时，它被最小化到任务栏，当我在任务栏按下它以使其再次出现在屏幕上时，我发现它不是不可见的。只有 QMainWindows 的内容是隐藏的，框架仍然存在。

这是 self.hide() 应该表现的吗？

我想让它最小化到系统托盘，但是我从这个[问题](https://stackoverflow.com/q/758256/248296)中找到的许多答案都不起作用。

![在此处输入图像描述](../Images/db92a9c7a8da06ca11f57a6e42a1cea8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T05:31:57.597

> 当最小化事件被捕获时，我尝试继承 QMainWindows 并调用 self.hide() 。当我按下最小化按钮时，它被最小化到任务栏，当我在任务栏按下它以使其再次出现在屏幕上时，我发现它不是不可见的。只有 QMainWindows 的内容是隐藏的，框架仍然存在。
> 
> 这是 self.hide() 应该表现的吗？

我相信这是正确的行为。当您这样做时，`self.hide()`您不是隐藏**窗口**（如链接问题的已接受答案中所建议的那样），而是隐藏窗口中的小部件。这就是为什么当您恢复时您会看到框架，但看不到小部件。

在您链接的问题中，请查看其他答案并尝试它们 - 有代码示例。

更新：

这是您链接问题的一个工作示例（在 KDE 中使用 Python 2.7 测试）：

```
import sys
from PyQt4 import QtGui, QtCore 
from PyQt4.QtGui import QDialog, QApplication, QPushButton, QLineEdit, QFormLayout,QSystemTrayIcon

class Example(QtGui.QWidget):

    def __init__(self):
        super(Example, self).__init__()     
        self.initUI()

    def initUI(self):               
        self.icon = QSystemTrayIcon()
        r = self.icon.isSystemTrayAvailable()
        print r 
        self.icon.setIcon(QtGui.QIcon(':/trolltech/styles/commonstyle/images/networkdrive-16.png'))
        self.icon.show()
        #self.icon.setVisible(True)
        self.setGeometry(300, 300, 250, 150)
        self.setWindowIcon(QtGui.QIcon(':/trolltech/styles/commonstyle/images/networkdrive-16.png'))          
        self.setWindowTitle('Message box')    
        self.show()
        self.icon.activated.connect(self.activate)
        self.show()

    def closeEvent(self, event):

        reply = QtGui.QMessageBox.question(self, 'Message', 
                    "Are you sure to quit?\n(choose No to minimize to tray, and double click to restore)", 
                    QtGui.QMessageBox.Yes | QtGui.QMessageBox.No, QtGui.QMessageBox.No)
        if reply == QtGui.QMessageBox.Yes:
            event.accept()    
        else:
            self.icon.show()    
            self.hide()
            event.ignore()

    def activate(self, reason):
        print reason 
        if reason == 2:
            self.show()

    def __icon_activated(self, reason):
        if reason == QtGui.QSystemTrayIcon.DoubleClick:
            self.show()   

def main():

    app = QtGui.QApplication(sys.argv)
    ex = Example()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

# c++ - 通过地址/参考传递的问题

> ID：11662059
> 
> 赞同：1
> 
> 时间：2012-07-26T03:46:02.663
> 
> 标签：c++

下面是我的程序的主文件。我在第 44 行遇到了问题。当我输入递延收益（defr）的数字时，程序正常运行。但是，如果我将递延收益 (defr) 保留为“0”，我的输出就会偏离应有的水平。任何人都可以为我指出正确的方向吗？我不相信包含的文件会有任何问题。它们是独立的功能。谢谢！

编辑：抱歉，第 44 行是：`InputEmployeeData(r.firstname,r.lastname,&r.payrate,&r.defr,&r.hours);//Call 3.3`

```
#include <stdio.h>
#include <stdlib.h>
#include "EmployeeRecord.h"
#include "CalcTaxes.o"
#define ADDR(var) &var
#define REPORTCOLUMNHEADINGS1 "Employee           Pay    Reg Hrs  Gross    Fed     SSI     Net\n"
#define REPORTCOLUMNHEADINGS2 "Name               Rate   OVT Hrs  Pay      State   Defr    Pay\n"
#define BARS                  "========           =====  =======  =======  ======  ======  =======\n\n"  
#define REPORTCOLUMN1         "%s, %s\t%8.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n"
#define REPORTCOLUMN2         "%32.2f%18.2f%8.2f\n\n"

void PrintReportHeadings(FILE * ReportFile); //3.1
void InputEmployeeData(char * lastname,char * firstname,float * hours,float * payrate,float * defr); //3.3
extern void CalculateTaxes(float gross, float defr, float *ft, float *st, float *ssit); //3.5
void PrintSummaryReport(float pr,float reg,float ovt,float gp,float fedt,float stt,float sst,float def,float np,float avgpr,float avgreg,float avgovt, 
                        float avggp,float avgfedt,float avgstt,float avgsst,float avgdef,float avgnp,FILE * ReportFile); //3.7

int main()
    {
     EmployeeRecord r; // Call Employee Record Definitions
     float reghours,ovthours; 
     float ft,st,ssit;
     float pr,reg,ovt,gp,fedt,stt,sst,def,np;
     float avgpr,avgreg,avgovt,avggp,avgfedt,avgstt,avgsst,avgdef,avgnp;
     char answer;
     int empCount;
     FILE * ReportFile;

     PrintReportHeadings(ReportFile); //Call 3.1    

     empCount = 0;// count initializations  
     pr = reg = ovt = gp = fedt = stt = def = sst = np = 0;
     do
       {
         InputEmployeeData(r.firstname,r.lastname,&r.payrate,&r.defr,&r.hours);//Call 3.3

         if (r.hours > 40)
           {
             reghours = 40;
             ovthours = r.hours - 40;
           }
         else {
             reghours = r.hours;
             ovthours = 0;
         }      
          r.gross = (reghours * r.payrate)+(ovthours * r.payrate * 1.5);
          CalculateTaxes(r.gross,r.defr,&ft,&st,&ssit);//Call 3.5 CalculateTaxes 
          r.net = r.gross - ft - st - ssit;
          printf(REPORTCOLUMNHEADINGS1);
          printf(REPORTCOLUMNHEADINGS2);
          printf(BARS); 
          printf(REPORTCOLUMN1,r.lastname,r.firstname,r.payrate,reghours,r.gross,ft,ssit,r.net); 
          printf(REPORTCOLUMN2,ovthours,st,r.defr);   
              ReportFile = fopen("report.txt", "a");
              fprintf(ReportFile,REPORTCOLUMN1,r.lastname,r.firstname,r.payrate,reghours,r.gross,ft,ssit,r.net); 
              fprintf(ReportFile,REPORTCOLUMN2,ovthours,st,r.defr); 
              fclose(ReportFile);
          empCount = empCount + 1;
          pr = pr + r.payrate;
          fedt = fedt + ft;
            if (r.hours > 40)
              {
                   reghours = 40;
                   ovthours = r.hours - 40;
              }
              else {
                   reghours = r.hours;
                   ovthours = 0;
              }
          reg = reg + reghours;    
          ovt = ovt + ovthours;
          gp = gp + r.gross;
          stt = stt + st;
          sst = sst + ssit;
          np = np + r.net;
          def = def + r.defr;
          avgpr = pr / empCount;
          avgfedt = fedt / empCount;
          avgreg = reg / empCount;
          avgovt = ovt / empCount;
          avggp = gp / empCount;
          avgstt = stt / empCount;
          avgsst = sst / empCount;
          avgnp = np / empCount;
          avgdef = def / empCount;

              fflush(stdin);
              printf(" Repeat (Y/N)? : ");
              scanf("%c",ADDR(answer)); 
        } while (answer == 'Y' || answer == 'y');
            printf("\n"); // print one line for spacing 
       printf("\nTotals %17.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n",pr,reg,gp,fedt,sst,np); 
       printf("%32.2f%18.2f%8.2f\n",ovt,stt,def); 
       printf("\nAverages %15.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n",avgpr,avgreg,avggp,avgfedt,avgstt,avgnp); 
       printf("%32.2f%18.2f%8.2f\n",avgovt,avgsst,avgdef);

       PrintSummaryReport(pr,reg,ovt,gp,fedt,stt,sst,def,np,avgpr,avgreg,avgovt,
                        avggp,avgfedt,avgstt,avgsst,avgdef,avgnp,ReportFile); //Call 3.7       

        fflush(stdin);
        getchar();
        return 0;
}

void PrintReportHeadings(FILE * ReportFile) //3.1
{
    ReportFile = fopen("report.txt", "w");
    fprintf(ReportFile,REPORTCOLUMNHEADINGS1);
    fprintf(ReportFile,REPORTCOLUMNHEADINGS2);
    fprintf(ReportFile,BARS);
    fclose(ReportFile);
}

void InputEmployeeData(char * lastname,char * firstname, float * hours, float * payrate, float * defr) //3.3
{
     printf("Enter employee's name: ");  // input section
     scanf("%s%s",firstname,lastname);
     printf("Enter hourly pay rate: ");
     scanf("%f",payrate);
     printf("Enter deferred amount: ");
     scanf("%f",defr);
     printf("Enter hours worked this pay period: ");
     scanf("%f",hours);
}

void PrintSummaryReport(float pr,float reg,float ovt,float gp,float fedt,float stt,float sst,float def,float np,float avgpr,float avgreg,float avgovt, 
                        float avggp,float avgfedt,float avgstt,float avgsst,float avgdef,float avgnp,FILE * ReportFile) //3.7
{
     ReportFile = fopen("report.txt", "a");
     fprintf(ReportFile,"\nTotals %17.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n",pr,reg,gp,fedt,sst,np); 
     fprintf(ReportFile,"%32.2f%18.2f%8.2f\n",ovt,stt,def); 
     fprintf(ReportFile,"\nAverages %15.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n",avgpr,avgreg,avggp,avgfedt,avgsst,avgnp); 
     fprintf(ReportFile,"%32.2f%18.2f%8.2f\n",avgovt,avgstt,avgdef);
     fclose(ReportFile);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:55:50.590

你为什么不这样做呢？

```
void InputEmployeeData(EmployeeRecord& r)
{
     printf("Enter employee's name: ");  // input section
     scanf("%s%s", r.firstname, r.lastname);
     printf("Enter hourly pay rate: ");
     scanf("%f", &r.payrate);
     printf("Enter deferred amount: ");
     scanf("%f", &r.defr);
     printf("Enter hours worked this pay period: ");
     scanf("%f", &r.hours);
} 
```

调用站点：

```
EmployeeRecord record;
InputEmployeeData(&record); 
```

# php - PHP 会话和重定向

> ID：11662062
> 
> 赞同：1
> 
> 时间：2012-07-26T03:46:29.323
> 
> 标签：php, session, session-variables

```
<?php require_once('./includes/connection.php'); ?>
<?php require_once('./includes/sql_func.php');?>
<?php 
    if(isset($_POST['submit']))
    {
        $isValid = verify_account($_POST['username'],$_POST['password']);
        if($isValid){
            session_name($_POST['username']);
            session_start();
            $_SESSION['isLoggedIn'] = true;
            session_write_close();
            redirect_to("user_panel.php");

        }else{
            echo "Invalid Username and password";
        }
    }
?>
<?php require_once('./includes/header.php');?> 
```

假设用户输入了有效的用户名和密码，它将创建一个会话变量并将不同的值存储在会话数组中。但是当我将用户重定向到另一个页面时

```
<?php require_once('./includes/connection.php'); ?>
<?php require_once('./includes/sql_func.php');?>
<?php 
    session_start();
?>
<?php require_once('./includes/header.php');?>
    <?php 
        if(isset($_SESSION['isLoggedIn'])){
            echo "Hello User";
        }
    ?>

<?php require_once('./includes/footer.php');?> 
```

上面代码中的这一行

```
 isset($_SESSION['isLoggedIn']) 
```

是不是被认为是真的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:51:44.050

您正在第一页中创建会话`session_name($_POST['username']);`，然后在第二页中开始没有名称的会话。这实质上意味着第二页使用与第一页不同的会话。

查看 PHP 手册以[`session_name`](http://www.php.net/session-name)获取更多信息，但最简单的解决方法可能是完全删除该行。

# python - python中的详细级别到底是什么？（每个级别之间的差异）

> ID：11662063
> 
> 赞同：2
> 
> 时间：2012-07-26T03:46:52.953
> 
> 标签：python, unit-testing, logging

python中的详细程度是多少。我在单元测试中看到它。

在文档中，它只是简单地说，更高的详细程度，更多的信息会打印出来。但 **更多**意味着什么？也就是说，哪个消息会在更高的层次上打印出来，哪个不会呢？

还可以在日志记录中找到详细程度。

我认为它们是不同的，因为日志详细级别在 [0, 50] 中，而 unittest 只是一个单元号。我只想找出单元测试中每个详细级别之间的区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:02:00.083

详细级别仅与日志记录有关。在单元测试中，您可以找到它来记录信息。

注意：将级别用作常量名称（而不是数字）更符合`logging.INFO`Pythonic `logging.DEBUG`。

这些级别决定了您将获得的信息量。例如，将`ERROR`运行单元测试的级别设置为将仅显示单元测试失败的情况。将其设置为`DEBUG`将为您提供更多（实际上是）信息，例如变量的值是什么（在断言语句等中）。

在您的程序具有不同级别的日志记录并且您希望您的用户看到不同级别的信息的情况下，它会更有用。例如。通常你不希望用户看到内部细节，除了致命错误。因此用户将在 FATAL 或 CRITICAL 模式下运行程序。但是当发生一些错误时，您将需要这些详细信息。在这种情况下，您将在调试模式下运行程序。您也可以使用这些级别发出自定义消息。例如，如果您提供与旧版本程序的向后兼容性，您可以使用 WARN 警告它们`logging.warn()`，仅当日志记录级别为警告或更低时才会发出。

* * *

文档：

## 关卡相关的东西

默认级别和级别名称，这些可以替换为具有相应名称的任何正值集。有一个伪级别 NOTSET，它只是作为用户定义级别的下限而存在。处理程序和记录器使用 NOTSET 初始化，以便它们记录所有消息，即使在用户定义的级别。

```
CRITICAL = 50 
FATAL = CRITICAL
ERROR = 40 
WARNING = 30 
WARN = WARNING
INFO = 20 
DEBUG = 10 
NOTSET = 0 
```

# asp.net-mvc - 将字符串发布到 ASP.NET 4.5 和 VS 2012 RC 中的 Web API 控制器

> ID：11662064
> 
> 赞同：11
> 
> 时间：2012-07-26T03:46:53.763
> 
> 标签：asp.net-mvc, asp.net-web-api, .net-4.5

我是 WebAPI 的新手并试图学习它。我有一个 WebAPI 控制器，我正在尝试使用我的单元测试中的 WebClient 向其发布一个字符串。

我正在使用下面的代码向我的 WebAPI 发布一个字符串。

```
using (var client = new WebClient())
{
   client.Headers.Add("Content-Type", "application/x-www-form-urlencoded");
   var result = client.UploadString(_webapiUrl, "POST", "hello");
} 
```

这是我的控制器。

```
[HttpPost]
public byte[] Post(string value)
{
   // Do something with value
} 
```

我可以在我的控制器上打一个断点，但它似乎没有发布任何字符串，我总是得到 NULL 值。我应该怎么做才能获得价值？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T10:03:38.787

如果您只需要接收一个值，`=`请在值之前使用：

```
var result = client.UploadString(_webapiUrl, "POST", "=hello"); // NOTE '=' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T04:22:04.473

请注意为将值发送回服务器而形成的键值对。Key 应该与您在操作方法参数中所期望的相同。在这种情况下，您的密钥是“VALUE”

```
[HttpPost]
public byte[] Post(string value) 
```

使用以下代码发布值。

```
string URI = "http://www.someurl.com/controller/action";
string myParamters = "value=durbhakula";

using (WebClient wc = new WebClient())
{
    wc.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
    string HtmlResult = wc.UploadString(URI, myParameters);
} 
```

**更新**

我感谢 Aliostad 指出我的错误。在 Web API 中发布表单数据时，参数名称应为空。

```
string myParamters = "=durbhakula"; 
```

您还需要将 [FormBody] 属性放入您的操作方法中。FromBody属性告诉 Web API 从请求正文中读取**值**

```
[HttpPost]
[ActionName("Simple")]
public HttpResponseMessage PostSimple([FromBody] string value)
{
..
..
} 
```

请看这个[链接](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-1)

# file - ocaml input_char

> ID：11662073
> 
> 赞同：0
> 
> 时间：2012-07-26T03:47:55.700
> 
> 标签：file, input, ocaml

我正在尝试从通过 ocaml 中的 stdinput 传入的文件中读取字符。我想知道为什么当我可以 print_char 我在以下代码中收到的字符时，我一直得到一个单位。另外，我正在尝试列出这些目前无法使用的字符。

```
let () =
let charList = [] in 
let inchar = open_in Sys.argv.(1) in
    try 
            while true do
                let c = Char.uppercase(input_char inchar) in
                    print_char c; print_int (List.length charList);c::charList
            done
    with End_of_file -> close_in inchar;(*; print_int (List.length charList); printTest charList;*) 
```

;;

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T05:45:34.270

您的代码不会修改`charList`，因此`charList`在整个执行过程中仍然是一个空列表。

此外，如果您定义 `let charList = []`then`charList`是不可变的。

您可以尝试以下方法：

```
let () =
    let charList = ref [] in
    let inchar = open_in Sys.argv.(1) in
  try
    while true do
      let c = Char.uppercase (input_char inchar) in
            charList := c :: !charList
    done
  with End_of_file ->
        charList := List.rev !charList;
        close_in inchar;
        print_int (List.length !charList);
        List.iter print_char !charList 
```

还有一些评论：

*   通过 char 读取输入 char 效率非常低，例如使用`input_line`.
*   你的帖子提到`Sys.argv.(1)`和标准输入，但这是两个不同的东西
*   如果要读取整个文件并将其存储在内存中，请搜索“ocaml 输入文件”，网上有很多示例，例如[https://groups.google.com/forum/?fromgroups#!msg/fa .caml/EEinP7-yAko/dPSaR0eOkw4J](https://groups.google.com/forum/?fromgroups#!msg/fa.caml/EEinP7-yAko/dPSaR0eOkw4J)或[http://camltastic.blogspot.fr/2008/09/tip-read-all-lines-from-file-most.html](http://camltastic.blogspot.fr/2008/09/tip-read-all-lines-from-file-most.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T10:07:36.173

你应该尝试一些更实用的东西：

```
let rec read inchar char_list =
  try
    read inchar ((Char.uppercase (input_char inchar))::char_list)
  with End_of_file -> char_list

let () =
  let inchar = open_in Sys.argv.(1) in
  let char_list = read inchar [] in
  close_in inchar 
```

# asp.net - 导出 excel 后显示的 Mojibake 字符

> ID：11662076
> 
> 赞同：0
> 
> 时间：2012-07-26T03:48:20.320
> 
> 标签：asp.net, excel, encoding, export, mojibake

我不确定是否有人遇到过这个问题。以下是复制问题的步骤。

步骤： 1\. 进入列表 --> 联系人页面。2\. 单击“导出”按钮为联系人列表生成 .XLS 报告。3\. 关闭 .XLS 报告并导航到其他页面，例如联系人列表。4\. 在联系人列表中，单击“关闭”按钮重定向回“联系人”列表页面。

预期： - 页面应显示联系人列表页面。

实际： - 显示包含 mojibaki 字符的奇怪页面。请查看此网址中的图片[http://i.imgur.com/dIsZc.png](http://i.imgur.com/dIsZc.png)

以下是使用活动报告生成 excel 的代码：

私有静态无效 PushContentToHttp（ActiveReport 报告，MemoryStream msData，字符串文件名，字符串 url）{

```
 report.Run();
        XlsExport xls = new XlsExport();
        xls.DisplayGridLines = true;
        xls.AutoRowHeight = true;
        xls.Export(report.Document, msData);

        HttpContext.Current.Response.Clear();
        HttpContext.Current.Response.ClearContent();
        HttpContext.Current.Response.ClearHeaders();
        HttpContext.Current.Response.Buffer = true;

        HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache);
        HttpContext.Current.Response.ContentType = "application/vnd.ms-excel";
        HttpContext.Current.Response.AddHeader("Content-Length", msData.Length.ToString());
        HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment; filename= \"" + fileName + ".xls\"");
        HttpContext.Current.Response.AddHeader("Refresh", "3; url=" + url);
        HttpContext.Current.Response.Charset = "utf-8";
        HttpContext.Current.Response.ContentEncoding = System.Text.Encoding.GetEncoding(1252);
        //HttpContext.Current.Response.ContentEncoding = System.Text.Encoding.GetEncoding("windows-1250");
        HttpContext.Current.Response.BinaryWrite(msData.ToArray());
        HttpContext.Current.Response.End();
 //       HttpContext.Current.Response.Redirect(url,true);

    } 
```

任何帮助将不胜感激！太感谢了！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:49:07.090

我打赌这是因为 Excel 的默认编码是 ANSI 125x，而您正试图将其写入 UTF-8。

请参阅这个相关的 SO 问题：[Excel 电子表格中的字符编码（以及用于解码它的 Java 字符集）](https://stackoverflow.com/questions/7449285/character-encoding-in-excel-spreadsheet-and-what-java-charset-to-use-to-decode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T01:48:10.263

实际上，造成这种情况的原因是您的页面尝试重定向回浏览器缓存的 Excel 页面。我可以建议你做一个完整的重定向，而不是只做一个浏览器，这样前一页就会完全加载，而不是加载缓存的 Excel 页面。与ANSI编码无关，等等，只是重定向不正确。

# iphone - 带有静态导航栏的 UINavigationController

> ID：11662080
> 
> 赞同：1
> 
> 时间：2012-07-26T03:49:03.983
> 
> 标签：iphone, ios, cocoa-touch

我正在开发一个教育 iPhone 应用程序，并正在寻找有关我的应用程序特定部分的最佳架构的建议。

我正在使用 iOS 5，所以我可以使用容器视图控制器。我想在故事板中做尽可能多的事情。

这是我想要做的：

*   一些数据项列在表视图控制器中。
*   当用户点击这些项目之一时，我们通过模态显示其主视图控制器来开始学习会话。
*   一个学习会话由 4 个视图控制器组成，这些控制器一个接一个地从右侧推送。
*   这四个屏幕有一个导航栏：
    *   相同的标题。
    *   相同的左侧项目：一个“关闭”按钮，它将关闭整个模态研究会话。
    *   其中两个有一个特定于屏幕的正确项目，另外两个没有。
*   这四个屏幕之间的转换应该以 UINavigationController 样式动画，但导航栏不应该动画。

这是我正在考虑实现此行为的一种方式：

以模态方式显示自定义容器视图控制器，其中包含：

*   一个没有导航栏的 UINavigationController，我会在其中推送我的屏幕
*   一个单独的 UINavigationBar 将保持在导航控制器上方。

屏幕将定义其导航栏的正确项目（如果有），并且容器视图控制器将负责将其放入导航栏中。

有人对这种方法有意见，或者建议的优雅替代方案吗？

谢谢。祝你有美好的一天！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:00:05.393

为此，您可以使用基于单一视图的项目。添加导航控制器以在用户单击 tableview 内容时推送。通过推动动画，您的视图将从 tableview 转换到另一个视图控制器。

现在您可以显示您的第一章并向视图添加滑动手势以更改页面。

# objective-c - 为什么存档？它如何提高性能？

> ID：11662082
> 
> 赞同：0
> 
> 时间：2012-07-26T03:49:07.887
> 
> 标签：objective-c, ios

我已经看到了一些使用 NSCoder 归档应用程序中的内容的示例

```
@interface MyApplicationData : NSObject <NSCoding, NSCopying> {
    NSMutableArray* items;
    NSMutableArray* categories;
} 
```

请看这个线程。[如何使用 NSCoder](https://stackoverflow.com/questions/1701582/how-to-use-nscoder)

为什么这会提高您的应用程序的性能？这不是在您的应用程序中做更多的事情吗？谁能告诉我为什么以及何时要使用存档？

已编辑：引用一本书，iOS 5 编程突破极限-在存储缓存的方法下：“缓存或保存数据可以通过将其存储为数据模型的存档（使用 NSKeyedArchiver）或使用更高级别的数据库来完成像原始 SQLite 或使用像 Core Data 这样的对象序列化框架..." "....NSKeyedArchiver 是通过实现 NSCoding 协议来实现的。"

我认为 NSCoding 或 NSCoder 可以用于缓存，它会提高性能。那么将它用于缓存不是一个好习惯吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T04:06:29.050

`NSCoding`与性能无关，它是一种序列化对象或对象图的技术，因此您可以将其保存到持久存储或通过网络发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T04:50:35.000

为什么存档：

我正在做一个需要记住用户累积操作的项目。这些动作涉及在屏幕上移动许多自定义对象。自定义对象的属性包括当前位置、颜色、邻居等。所以这些对象被存储在一个数组中。所以 NSCoding 被用来序列化和归档数组。下次我需要调用用户的最后状态时，我只是从存档文件中读取。如果没有这种能力，我想我需要创建某种类型的带有表和字段的数据库来单独存储这些属性数据，并在需要重新创建用户的当前状态时执行相反的操作，如我的示例所示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T05:37:51.593

> 为什么这会提高您的应用程序的性能？

好吧，您需要一些上下文——序列化可能会也可能不会“提高性能”。它可以提高替代序列化表示的性能。这可能会有所不同，或者可能并不重要。

> 这不是在您的应用程序中做更多的事情吗？

好吧，如果你有一个在 xml/plist 中表示的复杂结构而不是序列化对象，那么不——知道如何编码/解码自身的对象*可能*比 xml 或 json 或其他一些中间表示（对于多种原因）。它还可以更容易管理，更容易表示复杂的结构（与中间序列化表示相比）。

> 谁能告诉我为什么以及何时要使用存档？

通常当您想要将对象或对象图的状态保存到磁盘或传输到另一台机器时。

假设您有文档数据，并且您希望在重新打开文档时恢复该文档——您的程序必须创建一个表示，以便稍后正确重建对象或对象图的状态。

# clojure - 为什么 Clojure 区分符号和变量？

> ID：11662084
> 
> 赞同：36
> 
> 时间：2012-07-26T03:49:33.237
> 
> 标签：clojure, lisp, symbols

我已经看到了[这个问题](https://stackoverflow.com/questions/9113387/explanation-about-symbols-and-vars-and-their-differences-in-clojure)，但它并没有解释我在想什么。

当我第一次从 Common Lisp 来到 Clojure 时，我很纳闷为什么它把符号和关键字当作不同的类型，但后来我想通了，现在我觉得这是一个绝妙的想法。现在我想弄清楚为什么符号和变量是独立的对象。

据我所知，Common Lisp 实现通常使用一个结构来表示一个“符号”，该结构具有 1）名称的字符串，2）在函数调用位置评估时指向符号值的指针，3）指向其值的指针评估外部呼叫位置，以及 4) 属性列表等。

忽略 Lisp-1/Lisp-2 的区别，事实仍然是在 CL 中，“符号”对象直接指向它的值。换句话说，CL 将 Clojure 所称的“符号”和“变量”组合在一个对象中。

在 Clojure 中，要计算一个符号，首先必须查找相应的 var，*然后*必须取消引用该 var。为什么 Clojure 会这样工作？这样的设计可能有什么好处？我知道 var 具有某些特殊属性（它们可以是私有的、常量或动态的……），但这些属性不能简单地应用于符号本身吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-27T02:34:32.250

其他问题涉及符号的许多真实方面，但我会尝试从另一个角度解释它。

**符号是名称**

与大多数编程语言不同，Clojure 区分*事物*和事物的*名称*。在大多数语言中，如果我说类似 的话`var x = 1`，那么说“x 为 1”或“x 的值为 1”是正确且完整的。但是在 Clojure 中，如果我说`(def x 1)`，我已经做了*两*件事：我创建了一个 Var（一个价值持有实体），并且我用符号 来*命名*`x`它。说“x 的值为 1”并不能说明 Clojure 的全部内容。一个更准确（虽然很麻烦）的陈述是“由符号 x 命名的 var 的值是 1”。

符号本身只是名称，而 vars 是承载值的实体，它们本身没有名称。如果扩展前面的示例并说`(def y x)`，我还没有创建一个新的 var，我只是给了我现有的 var 一个第二个名字。这两个符号`x`和`y`都是同一个 var 的名称，其值为 1。

一个类比：我的名字是“卢克”，但这与我不同，与我作为一个人的身份不同。这只是一个词。在某个时候我可以更改我的名字并非不可能，而且还有很多其他人共享我的名字。但是在我的朋友圈中（在我的命名空间中，如果你愿意的话），“Luke”这个词的意思是我。在幻想的 Clojure 领域，我可以成为一个为你带来价值的 var。

**但为什么？**

那么为什么这个额外的名称概念不同于变量，而不是像大多数语言那样将两者混为一谈呢？

一方面，并​​非所有符号都绑定到变量。在本地上下文中，例如函数参数或 let 绑定，代码中符号引用的值实际上根本不是 var - 它只是一个本地绑定，当它遇到编译器。

不过，最重要的是，它是 Clojure “代码即数据”理念的一部分。这行代码`(def x 1)`不仅仅是一个表达式，它也是一个数据，特别是一个由值`def`、`x`和组成的列表`1`。这非常重要，特别是对于将代码作为数据进行操作的宏。

但是*如果* `(def x 1)`是一个列表，那么列表中的值是什么？特别是，这些值的*类型是什么？*显然`1`是一个数字。但是`def`和`x`呢？当我将它们作为数据进行操作时，它们的*类型是什么？*答案当然是符号。

这就是符号在 Clojure 中是一个独特实体的主要原因。在某些情况下，例如宏，您希望获取名称并对其进行操作，与运行时或编译器授予的任何特定含义或绑定分离。名字一定是某种东西，它们是某种东西，就是符号。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-27T01:58:06.700

在对这个问题进行了深思熟虑之后，我可以想到区分符号和变量的几个原因，或者正如 Omri 所说的那样，使用“将符号映射到其基础值的两个间接级别”。我会把最好的留到最后...

1：通过分离“变量”和“可以引用变量的标识符”的概念，Clojure 使事情在概念上更清晰。在 CL 中，当读者看到 时`a`，它会返回一个符号对象，该对象携带指向顶级绑定的指针，*即使* `a` 在当前范围内是本地绑定的。（在这种情况下，评估器将不会使用那些顶级绑定。）在 Clojure 中，符号只是一个标识符，仅此而已。

这与一些海报提出的观点有关，即符号也可以引用 Clojure 中的 Java 类。如果符号带有绑定，那么在符号引用 Java 类的上下文中可以忽略这些绑定，但在概念上会很混乱。

2：在某些情况下，人们可能希望使用符号作为地图键等。如果符号是可变对象（就像它们在 CL 中一样），它们就不能很好地适应 Clojure 的不可变数据结构。

3：在（可能很少见）符号用作映射键等，甚至可能由 API 返回的情况下，Clojure 符号的相等语义比 CL 符号更直观。（见@amalloy 的回答。）

4：由于 Clojure 强调函数式编程，所以很多工作都是使用高阶函数完成的，如`partial`、`comp`、`juxt`等。即使你不使用这些，你仍然可以将函数作为你自己函数的参数，等等。

现在，当您传递`my-func`给高阶函数时，它不会*保留*对名为“my-func”的变量的任何引用。它只是捕捉现在的*价值*。如果您`my-func`稍后重新定义，更改将不会“传播”到使用 的值定义的其他实体`my-func`。

即使在这种情况下，通过使用`#'my-func`，您也可以明确要求*每次*调用派生函数时`my-func`都应查找的当前值。（大概是以小幅性能损失为代价的。）

 *在 CL 或 Scheme 中，如果我需要这种间接方式，我可以想象将函数对象存储在 cons 或 vector 或 struct 中，并在每次调用时从那里检索它。实际上，任何时候我需要一个可以在代码的不同部分之间共享的“可变引用”对象，我都可以使用 cons 或其他可变结构。但在 Clojure 中，列表/向量/等。都是不可变*的*，因此您需要某种方式来明确引用“可变的东西”。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-26T04:04:04.377

```
(ns a)

(defn foo [] 'foo)
(prn (foo))

(ns b)

(defn foo [] 'foo))
(prn (foo)) 
```

该符号`foo`在两个上下文中是完全相同的符号（即为`(= 'foo (a/foo) (b/foo))`真），但在两个上下文中它需要携带不同的值（在这种情况下，是指向两个函数之一的指针）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-26T06:30:16.950

我从您的帖子中推测了以下问题（如果我不在基地，请告诉我）：
**为什么将符号映射到它们的基础值有两个间接级别？**

当我第一次回答这个问题时，过了一会儿我想出了两个可能的原因：动态“重新定义”，以及相关的[动态范围](http://info.rjmetrics.com/blog/bid/51652/Lexical-vs-Dynamic-Scope-in-Clojure)概念。但是，以下内容使我确信这些都不是使用这种双重间接的原因：

```
=> (identical? (def a 0) (def a 10))
=> true

=> (declare ^:dynamic bar)
=> (binding [bar "bar1"]
     (identical? (var bar)
                 (binding [bar "bar2"]
                   (var bar))))
=> true 
```

对我来说，这表明“重新定义”和动态范围都不会对命名空间限定符号和它指向的 var 之间的关系产生任何改变。

在这一点上，我要问一个新问题：
**命名空间限定符号是否总是与它所指的 var 同义？**

如果这个问题的答案是肯定的，那么我根本不明白为什么应该有另一个级别的间接性。

如果答案是否定的，那么我想知道在什么情况下命名空间限定符号会在同一程序的单次运行期间指向不同的变量。

总而言之，我想这是个好问题：P

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-07-26T07:06:23.533

主要好处是它是一个额外的抽象层，在各种情况下都很有用。

作为一个具体的例子，符号可以在创建它们引用的 var 之前愉快地存在：

```
(def my-code `(foo 1 2))     ;; create a list containing symbol user/foo
=> #'user/my-code

my-code                      ;; confirm my-code contains the symbol user/foo
=> (user/foo 1 2)

(eval my-code)               ;; fails because user/foo not bound to a var
=> CompilerException java.lang.RuntimeException: No such var: user/foo...

(def foo +)                  ;; define user/foo
=> #'user/foo

(eval my-code)               ;; now it works!
=> 3 
```

元编程方面的好处应该是显而易见的——您可以在需要实例化代码之前构造和操作代码，并在完全填充的命名空间中运行它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-01-01T12:31:33.790

奇怪的是没有人提到这一点，但即使这种 var 间接寻址肯定有不止一个原因，一个重要原因是在运行时更改引用的可能性，*同时*在 repl 中开发。因此，您可以在修改运行程序时看到更改后的效果，这允许具有即时反馈的开发风格（或诸如实时编码之类的东西）。

这家伙解释得比我好得多：[https](https://www.youtube.com/watch?v=8NUI07y1SlQ) ://www.youtube.com/watch?v=8NUI07y1SlQ （诚然，在这个问题发布近两年后）。他还讨论了一些性能影响，并举了一个例子，这个额外的间接成本大约是 10% 的性能。虽然考虑到你得到的回报，但这并不是那么糟糕。最大的损失是额外的堆使用和较长的 Clojure 启动时间，我认为这仍然是一个大问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-26T04:03:50.550

对于 Common Lisp 或其他 lisp，请查看：`Differences with other Lisps`来自[http://clojure.org/lisps](http://clojure.org/lisps)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-26T14:50:09.200

Clojure 是我迄今为止的第一个（也是唯一一个）lisp，所以这个答案是一个猜测。也就是说，clojure 网站上的以下讨论似乎是相关的（强调我的）：

> Clojure 是一种实用的语言，它认识到偶尔需要保持对变化值的持久引用，并提供了 4 种不同的机制来以受控方式执行此操作 - Vars、Refs、Agents 和 Atoms。Vars 提供了一种机制来引用可变存储位置，该存储位置可以在***每个线程的基础上***动态反弹（到新的存储位置） 。每个 Var 都可以（但不是必须）有一个根绑定，它是由所有没有每个线程绑定的线程共享的绑定。因此，Var 的值是其每个线程绑定的值，或者，如果它未在请求该值的线程中绑定，则为根绑定的值（如果有）。

因此，将符号间接指向 Vars 允许*线程安全*的动态重新绑定（也许这可以通过其他方式完成，但我不知道）。我认为这是 clojure 核心哲学的一部分，即严格和普遍地区分身份和状态以实现强大的并发性。

我怀疑与重新考虑不需要线程特定动态绑定的问题相比，这种工具很少（如果有的话）提供真正的好处，但如果你需要它，它就在那里。*

# javascript - Nodejs，Express GET POST 参数

> ID：11662085
> 
> 赞同：8
> 
> 时间：2012-07-26T03:49:40.817
> 
> 标签：javascript, node.js, express

我是 Node/Express 的新手。我看到 GET 参数可以像这样被捕获：

```
app.get('/log/:name', api.logfunc); 
```

像这样发布：

`app.post('/log', ...` （req.body 中可用的表单变量。）

我知道 app.all，但有没有一种方法可以在使用 app.all 时获取 GET 和 POST 的所有变量？（我太习惯 php 中的 $_REQUEST 了！:)

谢谢，

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-26T06:16:09.907

您正在处理三种不同的参数传递方法：

1) 路径参数，`req.param`当您在路由中使用冒号前缀的组件或正则表达式捕获时，express 的路由器捕获。这些可以出现在 GET 和 POST 请求中。

`req.query`2) URL 查询字符串参数，如果您使用`express.query`中间件，将被捕获。这些也可以出现在 GET 和 POST 请求中。

`req.body`3）正文参数，如果使用`express.bodyParser`中间件，将被捕获。这些只会出现在具有`Content-Type`“x-www-form-urlencoded”的 POST 请求中。

因此，您需要做的是将所有三个对象（如果存在）合并为一个。没有本地`Object`方法可以做到这一点，但有很多流行的解决方法。例如，[underscore.js](http://underscorejs.org)库定义了一个`extend`函数，它允许您编写

```
req.params=_.extend(req.params || {}, req.query || {}, req.body || {}). 
```

如果您不想使用库并想使用自己的方式扩展对象，请查看[此博客文章](http://onemoredigit.com/post/1527191998/extending-objects-in-node-js)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-30T06:03:34.117

个人而言，我将`req.params`, `req.body`,合并`req.query`到一个对象`req.props`中`Object.assign()`

**在 ES6 中：**

你只需要在你的路线中写下这个：

```
 app.all('/myroute/:myparam', (req, res, next) => {
        // merge all req data in one
        req.props = Object.assign(req.query, req.params, req.body);
        // optional :
        // delete req.query;
        // delete req.params;
        // delete req.body;
    }); 
```

**在 ES5 中：**

```
 app.all('/myroute/:myparam', function(req, res, next){
        // merge all req data in one
        req.props = {};
        if(req.query)  for (var attrname in req.query)  { req.props[attrname] = req.query[attrname]; }
        if(req.params) for (var attrname in req.params) { req.props[attrname] = req.params[attrname]; }
        if(req.body)   for (var attrname in req.body)   { req.props[attrname] = req.body[attrname]; }
        // optional :
        // delete req.query;
        // delete req.params;
        // delete req.body;
    }); 
```

Now, you can access easily to your GET, POST, PUT params with `req.props` in all your routes, be careful about similars name if you decide to delete the old req.

Also, you can do a middleware/functions to make it more useful yet.

More about `Object.assign()`: [https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Object/assign](https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Object/assign)

# python - 当我在 win7 中使用 pyside-uic 时，突破并告诉我：ImportError: No module named pkg_resources

> ID：11662086
> 
> 赞同：2
> 
> 时间：2012-07-26T03:49:46.777
> 
> 标签：python, pyside

当我在 win7 中使用 pyside-uic 时，突破并告诉我：

```
ImportError: No module named pkg_resources.
Traceback (most recent call last):
  File "C:\Python27\Scripts\pyside-uic-script.py", line 5, in <module>
    from pkg_resources import load_entry_point
ImportError: No module named pkg_resources 
```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:16:15.040

您需要安装[setuptools](http://pypi.python.org/pypi/setuptools/)。

# php - WordPress：自定义网址

> ID：11662090
> 
> 赞同：-1
> 
> 时间：2012-07-26T03:50:16.110
> 
> 标签：php, wordpress

在前端，我从 mysql db 表中获取一些链接，例如：

```
<a href="http://localhost/my_site/detail/Link-1">Link 1</a>
<br />
<a href="http://localhost/my_site/detail/Link-2">Link 2</a>
<br />
<a href="http://localhost/my_site/detail/Link-3">Link 3</a> 
```

并从管理员端**设置 - > 固定链接**我设置`http://localhost/sparcs/sample-post/` 并创建一个页面和命名**详细信息**，其 url 正是**http://localhost/my_site/detail/**

但是当我点击任何链接时 WP 说

> 抱歉，找不到您请求的页面。也许搜索会有所帮助。

虽然我可以使用`<a href="http://localhost/my_site/detail/3">Link 3</a>`并且它工作正常并且我可以使用`pathinfo($_SERVER['REQUEST_URI']);`.

实际上，我在 db 表中创建了自定义 url，然后在我的 WP 页面左栏上显示这些 url，如果我点击它 wp 显示页面，我可以用它来捕获 url 信息`pathinfo($_SERVER['REQUEST_URI']);`

我还使用**了自定义结构**并设置`http://localhost/my_site/detail/url`但不起作用。

我认为这可能是解决使用

> 重写.php 在`wp-includes/rewrite.php`

但我不知道应该如何修改哪个函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T14:27:46.693

最后我发现了解决方案：

[http://webspot-msajid.blogspot.com/2012/07/creating-seo-friendly-urls-with-merger.html](http://webspot-msajid.blogspot.com/2012/07/creating-seo-friendly-urls-with-merger.html)

# php - 检查项目数组（）的isset时在php中使用unserialize（）时出错？

> ID：11662092
> 
> 赞同：0
> 
> 时间：2012-07-26T03:50:42.123
> 
> 标签：php

我有一个示例代码：

```
$text = 'a:3:{s:2:"id";s:18:"nokiainternal_ver1";s:10:"user_agent";s:13:"NokiaInternal";s:9:"fall_back";s:13:"nokia_generic";}';
$text = unserialize($text);
if(isset($text['model_name'])) {
   $text['model_name'] = 'Nokia'; 
}
echo $text['model_name'];
echo $text['user_agent']; 
```

但结果错误`Notice: Undefined index: model_name ...`如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T03:52:30.693

下面的代码：

```
if(isset($text['model_name'])) {
   $text['model_name'] = 'Nokia'; 
} 
```

检查是否`model_name`已设置，如果已设置，请将其设置为“诺基亚”

这意味着您没有设置`model_name`任何东西的密钥，这会导致您的`Undefined index`错误。

尝试：

```
if(!isset($text['model_name'])) {
   $text['model_name'] = 'Nokia'; 
} 
```

# asp.net - 在asp.net中动态添加图表控件

> ID：11662094
> 
> 赞同：1
> 
> 时间：2012-07-26T03:51:32.623
> 
> 标签：asp.net

我需要在运行时动态添加图表。实际上是多个图表。例如：我必须从数据库中获取 14 周的记录并在每周的图表中显示记录。（即 14 个图表）。但是数字周可能因用户和图表而异。那么，我该如何克服这个问题呢？

我很感谢有关此的任何想法。

图表 Chart1 = new Chart();

```
 Chart1.Series.Add(new Series());

          Chart1.ChartAreas.Add(new ChartArea());
          Chart1.ChartAreas[0].Area3DStyle.Enable3D = false;

           Chart1.Series[0].YValueMembers = "Value";
           Chart1.Series.Add(new Series());
           Chart1.Series[1].YValueMembers = "AnotherValue";
           Chart1.DataSource = lsttest;
           Chart1.DataBind();

           Chart1.Series[0].Color = Color.Blue;
           Chart1.Series[1].Color = Color.DarkGreen;

           Chart1.ChartAreas["ChartArea1"].AxisY.Title = "Count";
           Chart1.ChartAreas["ChartArea1"].AxisX.Title = "Status";
           Chart1.Series[0].IsValueShownAsLabel = true;
           Chart1.Series[1].IsValueShownAsLabel = true;

        Chart1.ImageType = System.Web.UI.DataVisualization.Charting.ChartImageType.Jpeg;

        Chart1.Width = new System.Web.UI.WebControls.Unit(300, System.Web.UI.WebControls.UnitType.Pixel);
        Chart1.Height = new System.Web.UI.WebControls.Unit(200, System.Web.UI.WebControls.UnitType.Pixel); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T08:03:36.630

你的代码是正确的，你需要做的就是把它放在一个循环中，让它运行你想要的任意次数。在创建新图表时，使用循环计数器。

所以在这一行之后添加循环：

```
Chart Chart1 = new Chart();
for(int i=1;i<=n;i++)
{
     Chart1.ID="Chart "+i;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-21T12:35:16.843

使用 PlaceHolder 并将图表控件附加到它。

```
for(int i=1;i<=n;i++)
{
     Chart1.ID="Chart "+i;
     Chart chart1 = new Chart();
     createChart(dt.Tables[0],chart1); // function to create charts
     chartPlaceHolder.Controls.Add(chart1);
}

private void createChart(DataTable dt, Chart chart1)
{
          Chart1.Series.Add(new Series());

          Chart1.ChartAreas.Add(new ChartArea());
          Chart1.ChartAreas[0].Area3DStyle.Enable3D = false;

           Chart1.Series[0].YValueMembers = "Value";
           Chart1.Series.Add(new Series());
           Chart1.Series[1].YValueMembers = "AnotherValue";
           Chart1.DataSource = dt;
           Chart1.DataBind();

           Chart1.Series[0].Color = Color.Blue;
           Chart1.Series[1].Color = Color.DarkGreen;

           Chart1.ChartAreas["ChartArea1"].AxisY.Title = "Count";
           Chart1.ChartAreas["ChartArea1"].AxisX.Title = "Status";
           Chart1.Series[0].IsValueShownAsLabel = true;
           Chart1.Series[1].IsValueShownAsLabel = true;

    Chart1.ImageType = System.Web.UI.DataVisualization.Charting.ChartImageType.Jpeg;

    Chart1.Width = new System.Web.UI.WebControls.Unit(300, System.Web.UI.WebControls.UnitType.Pixel);
    Chart1.Height = new System.Web.UI.WebControls.Unit(200, System.Web.UI.WebControls.UnitType.Pixel);

}
```

# php - 在 URL 中使用 PHP 将 / 转换为 _xF8FF_

> ID：11662095
> 
> 赞同：3
> 
> 时间：2012-07-26T03:51:34.793
> 
> 标签：php, character-encoding, urlencode, exchangewebservices

我正在尝试通过 PHP 中的 URL 通过 Exchange Server 2003 阅读电子邮件。文件名中包含不允许字符的文件将它们转换为某种形式的 Unicode。例如 / 被转换为*xF8FF*并且 \ 被转换为*xF8FE*

如何使用 PHP 将这些字符转换为正确的编码？我知道我可以花很长时间来使用 str_replace，但我知道其他字符，例如 : ; * < > 也会有同样的问题。PHP 本身是否支持这种编码？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T17:56:19.907

尼克，你应该看看这个问题：[MSExchange URL encoding](https://stackoverflow.com/questions/10423116/msexchange-url-encoding)

OP 与您有完全相同的问题，其中一个答案提供了一些有关如何进行转换的提示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T19:30:04.000

从 Microsoft Exchange 的 Ximian 连接器的[源代码](http://fossies.org/dox/evolution-exchange-3.5.2/e2k-uri_8c_source.html)（用 C 编程语言编写）开始，我编写了这个 PHP 代码示例：

```
<?php

class myExchange {
    private $uri_encoded_char = array(
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,  /* 0x00 - 0x0f */
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,  /* 0x10 - 0x1f */
        1, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 2,  /*  ' ' - '/'  */
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 2,  /*  '0' - '?'  */
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  /*  '@' - 'O'  */
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 1, 1, 0,  /*  'P' - '_'  */
        1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  /*  '`' - 'o'  */
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 2, 1,  /*  'p' - 0x7f */
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1
    );

    /**
     * e2k_uri_append_encoded: 
     *  
     * Appends $in to $str, encoding URI-unsafe characters as needed
     * (optionally including some Exchange-specific encodings).
     * When appending a path, you must append each segment separately;
     * e2k_uri_append_encoded() will encode any "/"s passed in.
     *  
     * @param string $str               a string containing part of a URI
     * @param string $in                data to append to $str
     * @param bool   $wss_encode        whether or not to use the 
     *                                  special Web Storage System
     *                                  encoding rules
     * @param string $extra_enc_chars   additional characters beyond 
     *                                  the normal URI-reserved
     *                                  characters to encode when
     *                                  appending to $str
     * @return string  
     **/
    public function e2k_uri_append_encoded($str, $in, $wss_encode, $extra_enc_chars) {
        $len = strlen($in);
        for ($i = 0; $i < $len; $i++) {
            $s = $in[$i];
            $c = ord($s);
            if ($extra_enc_chars && strchr($extra_enc_chars, $s)) {
                $str .= sprintf("%%%02x", $c);
            } else {
                switch ($this->uri_encoded_char[$c]) {
                    case 2:
                        if (!$wss_encode) {
                            $str .= sprintf("%%%02x", $c);
                        } else {
                            switch ($s) {
                                case '/':
                                    $str .= "_xF8FF_";
                                    break;
                                case '?':
                                    $str .= "_x003F_";
                                    break;
                                case '\\':
                                    $str .= "_xF8FE_";
                                    break;
                                case '~':
                                    $str .= "_x007E_";
                                    break;
                            }
                        }
                        break;
                    case 1:
                        $str .= sprintf("%%%02x", $c);
                        break;
                    default:
                        $str .= $s;
                        break;
                }
            }
        }
        return($str);
    }
}

$filename = "@#£¤$%&/{([)]=}+?'`|~,;.:-_<>æøåäâãëêïîöôõüûÿ\\.EML";

$e = new myExchange();
echo $e->e2k_uri_append_encoded("", $filename, true, null);
echo "\n";

?> 
```

这是输出：

```
@%23%a3%a4$%25%26_xF8FF_%7b(%5b)%5d=%7d+_x003F_'%60%7c_x007E_,;.:-_%3c%3e%e6%f8%e5%e4%e2%e3%eb%ea%ef%ee%f6%f4%f5%fc%fb%ff_xF8FE_.EML 
```

不幸的是，我没有 Exchange Server，所以我无法判断它是否真的有效，但我希望它可以成为一个好的起点。

# javascript - 使用一点 javascript 拖放 HTML5 图像

> ID：11662096
> 
> 赞同：0
> 
> 时间：2012-07-26T03:51:41.060
> 
> 标签：javascript, image, html

我正在尝试这样做，以便在 html5 中，当图像被拖动时，它将被放置在标题中的一个框中，并且数据也将传输到该框。我需要一个标签来说明图片的名称，然后将其余图片“隐藏”，除非他们按下我的重置按钮，但这应该重置整个页面。

那样的东西会是什么样子？或者至少将我指向一个我可以学习它的网站。我正处于最后期限，并且在让类似的东西工作时遇到了一些问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:04:14.190

多年来，我们一直在使用 JQuery 和 Dojo 等库来简化复杂的 UI 元素，例如动画、圆角和拖放。毫无疑问，视觉效果对于在网络上制作丰富、身临其境的体验很重要。但是为什么所有开发人员都在使用的常见任务需要一个库呢？

拖放 (DnD) 是 HTML5 中的一等公民！该规范定义了基于事件的机制、JavaScript API 和附加标记，用于声明几乎任何类型的元素都可以在页面上拖动。我认为没有人可以反对本机浏览器对特定功能的支持。本机浏览器 DnD 意味着更快、响应更快的 Web 应用程序。

有关更多详细信息，请参阅这篇[**文章**](http://www.html5rocks.com/en/tutorials/dnd/basics/)。这将对您有所帮助。

# php - 登录 symfony2 时出错

> ID：11662098
> 
> 赞同：0
> 
> 时间：2012-07-26T03:51:47.787
> 
> 标签：php, symfony, doctrine-orm

昨天一切正常，但现在我明白了

```
Unable to find the controller for path "/login_check". Maybe you forgot to add the matching route in your routing configuration? 
```

我有这个代码

```
secured_area:
            pattern:    ^/admin
            anonymous: ~
            form_login:
                login_path:  /login
                check_path:  /login_check 
```

这个路由

```
xxxxxxxx:
    resource: "@myBundle/Controller"
    type:     annotation

xxxxxxxx:
    resource: "@myBundle/Controller"
    type:     annotation
    prefix:   /secured 
```

我需要做更多设置吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:15:34.187

检查您的路由中是否有

```
_security_check:
    pattern: /login_check 
```

并检查，如果这条路线没有被任何其他的覆盖

**编辑**：

您必须将 check_path 放在防火墙后面。方法：

```
check_path:  /admin/login_check 
```

# android - 需要帮助创建 YouTube 视频列表

> ID：11662100
> 
> 赞同：0
> 
> 时间：2012-07-26T03:52:05.363
> 
> 标签：android, youtube, android-listview

我想访问 Youtube 视频并在 ListView 中显示视频的缩略图及其标题。单击缩略图时，应播放视频。任何人都可以建议一些与我的需要或链接相关的示例程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:18:40.017

这是我使用 Urls 播放 youtube 视频的代码。这可能无法提供您的完整要求，但您可以使用它。

我的 VideoPlayActivity.class（活动）

```
import java.io.File;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Context;
import android.content.SharedPreferences.Editor;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.media.MediaPlayer.OnErrorListener;
import android.os.Bundle;
import android.view.Gravity;
import android.view.View;
import android.webkit.WebChromeClient;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.FrameLayout;
import android.widget.FrameLayout.LayoutParams;
import android.widget.RelativeLayout;
import android.widget.Toast;
import android.widget.VideoView;

@SuppressLint("SetJavaScriptEnabled")
public class VideoPlayActivity extends Activity {

    RelativeLayout a;
    VideoView video;
    WChromeClient chromeClient;

    WebView mWebView;

    WebViewClient wvClient;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        a = (RelativeLayout) findViewById(R.id.web);
        chromeClient = new WChromeClient();
        wvClient = new WebViewClient();
        mWebView = (WebView) findViewById(R.id.webView1);

        mWebView.setWebChromeClient(chromeClient);
        mWebView.setWebViewClient(wvClient);
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.getSettings().setDomStorageEnabled(true);

         mWebView.loadUrl("http://www.youtube.com/embed/"+"YCR7F6h3q2c"+"?autoplay=0");

    }

    class WChromeClient extends WebChromeClient {

        @Override
        public void onShowCustomView(View view, CustomViewCallback callback) {
            // TODO Auto-generated method stub
            super.onShowCustomView(view, callback);
            if (view instanceof FrameLayout) {
                FrameLayout frame = (FrameLayout) view;
                if (frame.getFocusedChild() instanceof VideoView) {
                    mWebView.setVisibility(View.GONE);
                    video = (VideoView) frame.getFocusedChild();
                    FrameLayout.LayoutParams par = new FrameLayout.LayoutParams(
                            LayoutParams.MATCH_PARENT,
                            LayoutParams.MATCH_PARENT);
                    par.gravity = Gravity.CENTER_HORIZONTAL;
                    video.setLayoutParams(par);
                    frame.removeView(video);
                    a.addView(video);
                    video.setOnCompletionListener(new OnCompletionListener() {

                        @Override
                        public void onCompletion(MediaPlayer mp) {
                            Toast.makeText(VideoPlayActivity.this,
                                    "Video complited", Toast.LENGTH_LONG)
                                    .show();

                        }
                    });

                    video.setOnErrorListener(new OnErrorListener() {

                        @Override
                        public boolean onError(MediaPlayer mp, int what,
                                int extra) {
                            Toast.makeText(VideoPlayActivity.this,
                                    "Encountered some error", Toast.LENGTH_LONG)
                                    .show();
                            return true;
                        }
                    });
                    video.start();
                }

            }

        }
    }

    @Override
    protected void onDestroy() {
        android.os.Process.killProcess(android.os.Process.myPid());
        Editor editor = getSharedPreferences("clear_cache",
                Context.MODE_PRIVATE).edit();
        editor.clear();
        editor.commit();
        trimCache(this);
        super.onDestroy();
    }

    public static void trimCache(Context context) {
        try {
            File dir = context.getCacheDir();
            if (dir != null && dir.isDirectory()) {
                deleteDir(dir);

            }
        } catch (Exception e) {
            // TODO: handle exception
        }
    }

    public static boolean deleteDir(File dir) {
        if (dir != null && dir.isDirectory()) {
            String[] children = dir.list();
            for (int i = 0; i < children.length; i++) {
                boolean success = deleteDir(new File(dir, children[i]));
                if (!success) {
                    return false;
                }
            }
        }

        // <uses-permission
        // android:name="android.permission.CLEAR_APP_CACHE"></uses-permission>
        // The directory is now empty so delete it

        return dir.delete();
    }

} 
```

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:id="@+id/web">

    <WebView
        android:id="@+id/webView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"

       />

</RelativeLayout> 
```

清单文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.webviewchromclient"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" android:hardwareAccelerated="true">
        <activity
            android:name=".VideoPlayActivity"
             >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T03:23:08.807

你可以试试 [FinchVideo](https://github.com/bmeike/ProgrammingAndroidExamples/tree/master/12/FinchVideo/src/com/oreilly/demo/pa/finchvideo)。它是一个带有缓存存储结果的完整示例。

# playframework - 如何将 IronMQ 添加到我的 Play！java项目？

> ID：11662102
> 
> 赞同：4
> 
> 时间：2012-07-26T03:52:14.303
> 
> 标签：playframework, ironmq

我在 java 中遇到 IronMQ 问题。找不到如何从 maven 获取它。所以将jar下载到我的lib文件夹中。然后不断收到运行时错误。

```
[NoClassDefFoundError: com/google/gson/JsonSyntaxException] 
```

现在我坚持这一点。等待支持的答复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T03:52:14.303

这个答案来自他们的支持。

您使用这些 Maven 设置并将它们添加到您的 build.scala 文件中。

它使用 gson，所以你也需要它。

```
<repositories>
<repository>
<id>iron-io-repo</id>
<name>Iron.io Maven repository on GitHub</name>
<url>http://iron-io.github.com/maven/repository/</url>
</repository>
</repositories>

<dependencies>
<dependency>
<groupId>com.google.code.gson</groupId>
<artifactId>gson</artifactId>
<version>2.1</version>
<scope>compile</scope>
</dependency>
<dependency>
<groupId>ironmq</groupId>
<artifactId>ironmq</artifactId>
<version>0.0.8</version>
<scope>compile</scope>
</dependency>
</dependencies> 
```

这是我的 build.scala ：

```
val appDependencies = Seq(
            // Add your project dependencies here,
            "com.google.code.morphia" % "morphia" % "0.99",
            "org.mongodb" % "mongo-java-driver" % "2.7.3",
            "com.google.code.morphia" % "morphia-logging-slf4j" % "0.99",
            "com.github.mumoshu" %% "play2-memcached" % "0.2.1-SNAPSHOT",
            "com.rabbitmq" % "amqp-client" % "2.8.4",
            "com.google.code.gson" % "gson" % "2.1",
            "ironmq" % "ironmq" % "0.0.8"
    )

    val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
            // Add your own project settings here
            resolvers += "Maven repository" at "http://morphia.googlecode.com/svn/mavenrepo/",
            resolvers += "MongoDb Java Driver Repository" at "http://repo1.maven.org/maven2/org/mongodb/mongo-java-driver/",
            resolvers += "Spy Repository" at "http://files.couchbase.com/maven2",
            resolvers += "Iron.io Maven repository on GitHub" at "http://iron-io.github.com/maven/repository/"
    ) 
```

当然，在那之后运行重新加载和更新。它应该成功运行。

# excel - 在幻灯片中显示时，PowerPoint 中的链接 Excel 对象不会更新

> ID：11662108
> 
> 赞同：0
> 
> 时间：2012-07-26T03:53:05.917
> 
> 标签：excel, object, linked-list, slideshow, powerpoint

我是新手，基本上我想做的是：

-我有 2 个 excel 文件和 1 个 powerpoint 演示文稿 -所有文件都在共享网络中 -我将我的 excel 文件链接到 powerpoint -我有 office 2003 和 2007 版本

问题：

我播放 powerpoint 的幻灯片并将其设置为在一台计算机上循环播放以在工作时在大 LCD 上显示它，然后我在另一台计算机上访问 excel 文件并从那里更新它，问题是正在播放的幻灯片不会自动显示我的更改。我必须手动停止显示并单击幻灯片上的（更新链接）以显示我刚刚输入的更新。

有没有办法让幻灯片在节目中显示我更新的数据，而我不必手动停止它并单击更新链接。

我在这里发现了一个有点相似的问题，但没有回答到可以帮助我推进我的问题的地步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:53:53.537

我已经使用此代码解决了上述问题

```
Sub OnSlideShowPageChange(ByVal SSW As SlideShowWindow)
    If SSW.View.CurrentShowPosition = 2 Then
        ActivePresentation.UpdateLinks
    End If
End Sub 
```

假设我在节目中有 2 张幻灯片，当在幻灯片 2 上传递时，它将触发更新链接并使用更新的 OLE 链接循环回幻灯片 1。我花了很多时间才读到这一部分，但是当我开始演出时，我无法让它运行。我必须手动按 alt+F8 并单击运行，这样代码就会在每张幻灯片 2 中循环播放。

编辑：终于让它工作而无需运行一次宏。我只是打开PowerPoint并播放节目。当节目通过幻灯片 2 或刚刚开始时，更新会动态更新。现在有一些仍然没有解决这个问题的方法，希望这对你有帮助。

[我使用了在http://skp.mvps.org/autoevents.htm](http://skp.mvps.org/autoevents.htm)找到的 autoevent.zip 。我将 zip 中包含的 AutoEvents.ppa 作为插件安装并在 PPT2007 和 PPT2003 中激活它。然后使用此代码创建一个普通的模块/宏。

```
Sub Auto_ShowBegin()
ActivePresentation.UpdateLinks
End Sub
Sub OnSlideShowPageChange(ByVal SSW As SlideShowWindow)
'
' AUTO UPDATE OF OLE LINKS MACRO
'
    If SSW.View.CurrentShowPosition = 2 Then
        ActivePresentation.UpdateLinks
    End If
End Sub 
```

你完成了。请确保您以启用宏的格式保存 2003 和 2007 的 powerpoint，这是因为我有两个版本的 ms office。并勾选 ckeck 框说 - 信任对 VBA 项目对象模型的访问。还循环播放您的幻灯片，以便当它通过幻灯片 2 或刚刚开始放映时，它将更新所有 OLE 链接。

如果我错过了什么，请发表评论。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:02:35.503

我认为您需要为此编写代码。

在您的演示文稿中添加一个新的类模块并将其命名为“clsEvents”。添加此代码：

```
Public WithEvents PPTEvent As Application

Sub PPTEvent_SlideShowNextSlide(ByVal Wn As SlideShowWindow)
   Dim objSld As Slide, shp As Shape

   Set objSld = Wn.Presentation.Slides(Wn.View.CurrentShowPosition)

   For Each shp In objSld.Shapes
      If shp.Type = msoLinkedOLEObject Then
         shp.LinkFormat.Update
      End If
      Next shp

End Sub 
```

在普通模块中放置：

```
Dim app As clsEvents

Sub SetUpEvents()

    Set app = New clsEvents
    Set app.PPTEvent = Application

End Sub 
```

在开始幻灯片放映之前运行 setupevents。

# android - Android：如何从 CallLog 中删除重复项？

> ID：11662110
> 
> 赞同：0
> 
> 时间：2012-07-26T03:53:12.973
> 
> 标签：android, duplicates, calllog

```
mCursor = getContentResolver().query(
            CallLog.Calls.CONTENT_URI,
            new String []{ "max(date) as max_date", "name", "date","type", "number" },
            " 1=1) group by(number ", null,
            CallLog.Calls.DEFAULT_SORT_ORDER); 
```

我的查询是错误的，

没有人做过类似的查询，

如何查询结果没有重复？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:06:15.977

尝试这个：

```
String strGroupBy = " 1=1) group by( "+android.provider.CallLog.Calls.NUMBER; 
```

# android - 在 Android 中创建 TextView 的列表

> ID：11662112
> 
> 赞同：0
> 
> 时间：2012-07-26T03:53:36.123
> 
> 标签：android, android-layout

我正在尝试在名称和组织的 Android 应用程序中创建一个 TextView 列表。但是，整个列表是相同的，例如：

```
Joe's work for Construction Co.
15hrs of 60hrs
Joe's work for Construction Co.
15hrs of 60hrs
Joe's work for Construction Co.
15hrs of 60hrs
... 
```

在应用程序的列表中重复五次。以下是相关代码：

```
class IconicAdapter extends ArrayAdapter<Long> {
private ArrayList<Long> items;
private FakeIDO ido;

public IconicAdapter(Context context,int textViewResourceId, ArrayList<Long> ids, FakeIDO ido){
    super(WorkList.this, R.layout.feed_list, ids);
    this.items = ids;
    this.ido = ido;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;
    if (v == null) {
        LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.row, null);
    }
    for(long id : items){ 
        TextView tt = (TextView) v.findViewById(R.id.toptext);
        TextView bt = (TextView) v.findViewById(R.id.bottomtext);
        if (tt != null) {
              tt.setText(ido.getName(id) + "'s work for " + ido.getOrganization(id));
        }
        if(bt != null){
              bt.setText( ido.totalWorked(id) + "hrs of " + ido.estimatedHours(id) + "hrs");
        }
    }
    return v;
} 
```

这是此类正在使用的 xml 视图：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="?android:attr/listPreferredItemHeight"
android:padding="6dip">
<ImageView
    android:id="@+id/icon"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_marginRight="6dip"
    android:src="@drawable/icon" />
<LinearLayout
    android:orientation="vertical"
    android:layout_width="0dip"
    android:layout_weight="1"
    android:layout_height="fill_parent">
    <TextView
        android:id="@+id/toptext"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:gravity="center_vertical"
    />
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1" 
        android:id="@+id/bottomtext"
        android:singleLine="true"
        android:ellipsize="marquee"
    />
</LinearLayout> 
```

现在，我知道当我调用“TextView tt = (TextView) v.findViewById(R.id.toptext);”时会返回相同的实例，但我不知道要更改什么来获得一个新的实例对象时间。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T04:11:51.640

`getView`像这样使用你

```
 public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;
    if (v == null) {
        LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.row, null);
    }

        TextView tt = (TextView) v.findViewById(R.id.toptext);
        TextView bt = (TextView) v.findViewById(R.id.bottomtext);
        // get the 'id' for position.
        int id = items.get(position);
        if (tt != null) {
              tt.setText(ido.getName(id) + "'s work for " + ido.getOrganization(id));
        }
        if(bt != null){
              bt.setText( ido.totalWorked(id) + "hrs of " + ido.estimatedHours(id) + "hrs");
        }

    return v;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T04:00:40.743

我会尝试改变

```
TextView tt = (TextView) v.findViewById(R.id.toptext); 
```

到

```
TextView tt = new TextView(this);
CharSequence text = ((TextView)v.findViewById(R.id.toptext)).getText();
tt.setText(text); 
```

这将实例化一个具有相同内容的新 TextView，我认为这就是你所说的根本问题。

希望有帮助！

# audio - SDL_CloseAudio() 在 Windows 中挂起

> ID：11662114
> 
> 赞同：0
> 
> 时间：2012-07-26T03:54:01.570
> 
> 标签：audio, sdl

通过使用SDL，我需要连续播放音频/视频，因此，在播放音频/视频后，我必须调用`SDL_CloseAudio()`关闭音频线程，或者在播放连续的音频/视频时，使用`SDL_OpenAudio()`，我会得到错误，因为上次播放还没有关闭设备。

应该有一个回调，你必须在 call 之前挂钩到 SDL `SDL_OpenAudio()`，然后麻烦就来了。

我注意到您无法访问由 SDL 内部直接创建的音频线程（它确实创建了线程）。关闭音频的唯一方法是`SDL_CloseAudio()`，在调用它之前，您最好先调用它`SDL_LockAudio()`。`SDL_LockAudio()`确保音频回调未被其内部线程调用，然后是调用的安全点`SDL_CloseAudio`。

通过使用一个标志，我们可以确保回调没有被 SDL 内部音频线程调用，然后我们尝试通过调用来锁定音频`SDL_LockAudio()`，我认为这是非常安全的，有时它确实运行良好，但其他时候，仍然暂停`SDL_CloseAudio()`通话。

我试图改变`SDL_CloseAudio()`. 在 SDL 源代码中，音频模块是一个单例，我们可以访问它的音频线程（是一个`SDL_Thread`实例），通过使用`SDL_KillThread()`，我们可以终止音频线程，这确实是*完全安全的*，但我不确定这样的*暴力力*会导致任何其他问题。

我的问题是为什么锁操作成功，但关闭操作仍然挂起？

# android - 传递数组列表 进入另一个类并转换为 Bitmap[]

> ID：11662123
> 
> 赞同：1
> 
> 时间：2012-07-26T03:55:20.980
> 
> 标签：android

我从我的 PHP 和 MySQL 数据库中获取图像 URL。这里的一切都很好，因为它`Log.d`显示了带有有效图像 URL 的结果。

```
if (success == 1) {
    JSONArray comments = json.getJSONArray("photos");
    for (int i = 0; i < comments.length(); i++) {
        JSONObject m = comments.getJSONObject(i);
        final String filename = m.getString("filename");
        final String extension = m.getString("extension");
        String upload_at = m.getString("upload_at");
        String uid = m.getString("uid");

        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                Bitmap mThumbIds = fetchImage(filepath_min
                + filename + "." + extension);
        Log.d("Photo URL", filepath_min + filename + "." + extension);
                List<Bitmap> l = Arrays.asList(mThumbIds);
                photoList = new ArrayList<Bitmap>(l);
            }
        });
    }
}

// Instance of ImageAdapter Class
mHandler.postDelayed((new Runnable() {
    public void run() {
        imgGrid.setAdapter(new ImageAdapter(
        PhotoViewerActivity.this, photoList));
    }
}), 1000); 
```

在此下方用于从给定的 URL 获取图像并作为位图返回。这里没什么问题，仅供参考想表明返回的是Bitmap。

```
public Bitmap fetchImage(String urlstr) {
    try {
        URL url;
        url = new URL(urlstr);

        HttpURLConnection c = (HttpURLConnection) url.openConnection();
        c.setDoInput(true);
        c.connect();
        InputStream is = c.getInputStream();
        Bitmap img;
        img = BitmapFactory.decodeStream(is);
        return img;
        } catch (MalformedURLException e) {
        Log.d("RemoteImageHandler", "fetchImage passed invalid URL: "
        + urlstr);
        } catch (IOException e) {
        Log.d("RemoteImageHandler", "fetchImage IO exception: " + e);
    }
    return null;
} 
```

这是我在 GridView 中查看图像的 ImageAdapter。

```
public class ImageAdapter extends BaseAdapter {
    private Context mContext;
    List<Bitmap> list = new ArrayList<Bitmap> l;

    public ImageAdapter(Context c, ArrayList<Bitmap> l) {
        mContext = c;
        list = l;
    }

    public Bitmap[] mThumbIds = list.toArray(new Bitmap[list.size()]);

    @Override
    public int getCount() {
        return mThumbIds.length;
    }

    @Override
    public Object getItem(int position) {
        return mThumbIds[position];
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView = new ImageView(mContext);
        imageView.setImageBitmap(mThumbIds[position]);
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setLayoutParams(new GridView.LayoutParams(130, 130));
        return imageView;
    }

} 
```

这是我的问题。活动中未显示任何图像。当我尝试在 Bitmap[] mThumbIds 中使用 fetch 数组硬编码 URL 时，它是成功的。

```
Bitmap[] mThumbIds = { fetchImage("http://...jpg"),
                       fetchImage("http://...jpg") } 
```

我不知道怎么了。我试图`Bitmap[] mThumbIds = list.toArray(new Bitmap[list.size()]);`将 ArrayList 转换为 Array。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:15:56.453

据我所知，您在 runOnUiThread 方法中将 mThumbIds 声明为常规位图而不是位图数组。

```
Bitmap mThumbIds = fetchImage(filepath_min + filename + "." + extension); 
```

尝试将其更改为

```
Bitmap[] mThumbIds = fetchImage(filepath_min + filename + "." + extension); 
```

否则为 Bitmap 数组使用不同的变量名，这样您就不会有冲突的变量名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:17:24.537

尝试[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList) 并在 LazyAdapter 的“getView”中稍作改动，

代替 `imageView.setImageResource(mThumbIds[position]);`

至 `imageLoader.DisplayImage(data.get(position), imageView);`

这里的**data**是`ArrayList`你提供给适配器的 URL。

在 ImageLoader 类中，有一个方法可以`private Bitmap decodeFile(File f)`根据需要设置位图的大小。

# android - 从 android 的 sqllite 数据库存储和检索 blob

> ID：11662127
> 
> 赞同：1
> 
> 时间：2012-07-26T03:56:04.057
> 
> 标签：android, database, eclipse, image, recording

我需要知道在 Eclipse 中定义 blob 数据类型。我正在为 android 开发一个应用程序，我想将图像和记录保存在数据库中。我知道必须使用 blob 作为数据类型。我的问题是如何在类和 DBhandler 类中定义它。有人可以为我提供代码帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T04:45:04.167

Blob 用于在 sqlite 中保存字节数组。

要将位图转换为字节数组，请使用以下代码：

```
Bitmap image = BitmapFactory.decodeResource(getResources(), R.drawable.thumbnail);

ByteArrayOutputStream out = new ByteArrayOutputStream();

image.compress(Bitmap.CompressFormat.PNG, 100, out);

byte[] buffer=out.toByteArray(); 
```

要将字节数组保存为 blob 类型，请使用以下代码：

```
 ContentValues cv=new ContentValues();
   cv.put(CHUNK, buffer);       //CHUNK blob type field of your table
   long rawId=database.insert(TABLE, null, cv); //TABLE table name 
```

[通过此链接](http://lunarmonk.wordpress.com/2011/06/13/android-sqlite-story-of-a-blob/)阅读有关 Blob 的更多信息

# php - php mysql 更新基于表单中的变量

> ID：11662129
> 
> 赞同：0
> 
> 时间：2012-07-26T03:56:40.897
> 
> 标签：php, mysql

我是 php 新手，认为这应该可以工作，但我不知道我是否在语法上做错了什么。这是处理我从表单提交的数据的脚本。

我将php变量设置为表单中发布的数据，它在变量中回显正确的数据，问题是更新数据库中的记录，它没有......

DB中的表有3个属性，adID、iconURL、webURL。

该表单有 2 个输入文本字段和一个隐藏字段、iconPath、webPath 和 recordN。

```
<?php
$recNum = $_POST["recordN"];
$iconU = $_POST["iconPath"];
$webU = $_POST["webPath"]; 
echo 'Number of record updated: ' . $recNum;
echo '<br />New Icon Path: ' . $iconU;
echo '<br />New Web Path: ' . $webU;

$con = mysql_connect("localhost","admin","pass");
if (!$con)  {   die('Could not connect: ' . mysql_error());   }

mysql_select_db("DBNAME", $con);

mysql_query("UPDATE adSources set iconURL = $iconU, webURL = $webU 
WHERE adID = $recNum");

mysql_close($con);

echo '<br /><a href="http://mydomain.com/thePage.html" target="_blank">Return to main page</a>' . "\n"; 
?> 
```

所以在 adID = recNum 的地方，我想覆盖 iconURL = $iconU 和 webURL = $webU

我在 $iconU 和 $webU 中有我想要使用的值，iconURL 和 webURL 是数据库中字段的名称。我很好地阅读了它们并且可以通过这些名称显示它们就好了，我只是无法更新它。

我在数据库中为用户授予了完全权限以及所有这些权限。

有什么帮助吗？与其他语言相比，Php 看起来非常丑陋。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:58:43.157

您错过了变量名中的引号。尝试：

```
mysql_query("UPDATE adSources set iconURL = '$iconU', webURL = '$webU'
            WHERE adID = $recNum"); 
```

如果您还可以转义变量，那就更好了：

```
mysql_query("UPDATE adSources set iconURL = '".mysql_real_escape_string($iconU).
            "', webURL = '".mysql_real_escape_string($webU).
            "' WHERE adID = $recNum"); 
```

这使它好一点，但`mysql_real_escape_string()`实际上不鼓励使用。[`PDO`](http://php.net/manual/en/class.pdo.php)一旦掌握了它，您应该检查并替换它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T04:00:53.253

要调试，请使用 mysql_error()。您的语法会出错，因为您需要将字符串（$iconU 等）用引号括起来。

**BUT...** you'll be much better off learning PDO; this will handle the wrapping and making safe of variables for you. mysql functions are being depreciated, so don't start with the old stuff, start with the new! [http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

```
$sth = $dbh->prepare('UPDATE adSources set iconURL = :iconU, webURL = :webU WHERE adID = :recNum');
$sth->bindValue(':iconU', $iconU , PDO::PARAM_STR);
$sth->bindValue(':webU', $webU , PDO::PARAM_STR);
$sth->bindValue(':recNum', $recNum , PDO::PARAM_INT);
$sth->execute(); 
```

Edit: responding to your comment about "freaking ugly". Not intending to start a debate, but yes, it starts ugly. Then you wrap this up into a nice class, get your error handling right (wrap in try/ctach) and you're laughing. So Start with the ugly and you'll soon learn how to clean it up.

# android - 如何减小应用程序的大小？

> ID：11662130
> 
> 赞同：1
> 
> 时间：2012-07-26T03:56:41.767
> 
> 标签：android, android-layout

在我的应用程序中，我使用 54 个图像。为了支持多个屏幕，我创建了这样的文件夹

```
drawable-hdpi
drawable-mdpi
drawable-xdpi
drawable-mdpi 
```

并将所有图像粘贴到每个文件夹中。因此，应用程序大小增加了很多....然后我尝试喜欢这种方式...只使用一个可绘制的文件夹保留所有 54 个图像，删除所有可绘制的图像-mdpi、drawable-hdpi、drawable-mdpi 和 drawable-xdpi 文件夹。在我的清单文件中，我提到了

```
"<supports-screens 
android:anyDensity="true" 
android:largeScreens="true" 
android:normalScreens="true" 
android:resizeable="true" 
android:smallScreens="true" />" 
```

但它给了我这样的错误

```
07-25 15:04:25.928: ERROR/dalvikvm-heap(13963): 2764800-byte external allocation too large for this process.
07-25 15:04:25.928: ERROR/GraphicsJNI(13963): VM won't let us allocate 2764800 bytes
07-25 15:04:25.928: DEBUG/AndroidRuntime(13963): Shutting down VM
07-25 15:04:25.928: WARN/dalvikvm(13963): threadid=1: thread exiting with uncaught exception (group=0x4001d7e0)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963): FATAL EXCEPTION: main
07-25 15:04:25.967: ERROR/AndroidRuntime(13963): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.jacksonville.alenseventapp/com.jacksonville.alenseventapp.HomeActivity}: android.view.InflateException: Binary XML file line #1: Error inflating class <unknown>
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.os.Looper.loop(Looper.java:123)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.app.ActivityThread.main(ActivityThread.java:4627)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at java.lang.reflect.Method.invokeNative(Native Method)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at java.lang.reflect.Method.invoke(Method.java:521)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at dalvik.system.NativeStart.main(Native Method)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963): Caused by: android.view.InflateException: Binary XML file line #1: Error inflating class <unknown>
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.view.LayoutInflater.createView(LayoutInflater.java:513)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.view.LayoutInflater.inflate(LayoutInflater.java:385)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.app.Activity.setContentView(Activity.java:1647)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at com.jacksonville.alenseventapp.HomeActivity.onCreate(HomeActivity.java:12)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     ... 11 more
07-25 15:04:25.967: ERROR/AndroidRuntime(13963): Caused by: java.lang.reflect.InvocationTargetException
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.widget.LinearLayout.<init>(LinearLayout.java:115)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at java.lang.reflect.Constructor.constructNative(Native Method)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.view.LayoutInflater.createView(LayoutInflater.java:500)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     ... 21 more
07-25 15:04:25.967: ERROR/AndroidRuntime(13963): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.graphics.Bitmap.nativeCreate(Native Method)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.graphics.Bitmap.createBitmap(Bitmap.java:468)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.graphics.Bitmap.createBitmap(Bitmap.java:435)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:340)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:488)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:462)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:323)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.content.res.Resources.loadDrawable(Resources.java:1709)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.view.View.<init>(View.java:1885)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.view.View.<init>(View.java:1834)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     at android.view.ViewGroup.<init>(ViewGroup.java:285)
07-25 15:04:25.967: ERROR/AndroidRuntime(13963):     ... 25 more 
```

如果有人知道这个请帮助我...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T04:39:49.790

您的应用程序中有四个主要错误

```
java.lang.RuntimeException: Unable to start activity 
   **ComponentInfo{com.jacksonville.alenseventapp/com.
   jacksonville.alenseventapp.HomeActivity}: 
```

和

```
** android.view.InflateException: Binary XML file line #1:
       Error inflating class <unknown>
       07-25 15:04:25.967: ERROR/AndroidRuntime(13963):    
       at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663) 
        and 07-25 15:04:25.967: ERROR/AndroidRuntime(13963): Caused by: 
        android.view.InflateException: Binary XML file line #1: 
        Error inflating class <unknown> 
```

这两个错误表明您指的是一个不存在的包，这可能是由于您遵循执行此代码的教程，您在应用程序中使用了该代码的包名称

第三个错误

```
 07-25 15:04:25.967: ERROR/AndroidRuntime(13963): Caused by: 
java.lang.reflect.InvocationTargetException 
```

看到这些问题也有同样的问题

[如何消除此错误？java.lang.reflect.InvocationTargetException](https://stackoverflow.com/questions/9110939/how-to-remove-this-error-java-lang-reflect-invocationtargetexception)

[InvocationTargetException on inflating an x​​ml - android](https://stackoverflow.com/questions/2417341/invocationtargetexception-on-inflating-an-xml-android)

也看到这个

[http://developer.android.com/reference/java/lang/reflect/InvocationTargetException.html](http://developer.android.com/reference/java/lang/reflect/InvocationTargetException.html)

这是由于内存不足引起的

```
Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
```

为避免这种情况，您可以使用此方法显示

```
// here path is from  where you are picking the image 

Bitmap myBitmap = ShrinkBitmap(Path, 300, 300);

MyImageView.setImageBitmap(myBitmap );

private Bitmap ShrinkBitmap(String file, int width, int height) {
        // TODO Auto-generated method stub
        BitmapFactory.Options bmpFactoryOptions = new BitmapFactory.Options();
        bmpFactoryOptions.inJustDecodeBounds = true;
        Bitmap bitmap = BitmapFactory.decodeFile(file, bmpFactoryOptions);

        int heightRatio = (int)Math.ceil(bmpFactoryOptions.outHeight/(float)height);
        int widthRatio = (int)Math.ceil(bmpFactoryOptions.outWidth/(float)width);

        if (heightRatio > 1 || widthRatio > 1)
        {
         if (heightRatio > widthRatio)
         {
          bmpFactoryOptions.inSampleSize = heightRatio;
         } else {
          bmpFactoryOptions.inSampleSize = widthRatio;
         }
        }

        bmpFactoryOptions.inJustDecodeBounds = false;
        bitmap = BitmapFactory.decodeFile(file, bmpFactoryOptions);
     return bitmap;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T04:11:42.710

[Google I/O 2011：Android 应用程序的内存管理](http://www.youtube.com/watch?v=_CruQY55HOk)- 该视频非常值得花时间观看。你会学到很多关于位图和内存管理的知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T04:02:06.250

[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)看起来它可以帮助你。

[https://stackoverflow.com/a/8251471/229631](https://stackoverflow.com/a/8251471/229631)详细介绍了如何在不耗尽内存的情况下加载位图。

# mysql - 如何创建只显示一条特定记录之前和之后的mysql查询？

> ID：11662136
> 
> 赞同：2
> 
> 时间：2012-07-26T03:57:59.883
> 
> 标签：mysql, sql

我有一个按字母顺序排列的查询

```
select id, color_name from colors order by color_name 
```

输出

```
| 4 | 蓝色的
| 1 | 红色的
| 2 | 紫色
| 3 | 黄色

```

我想查询特定记录的前后记录。示例：红色

所需的输出：

```
| 4 | 蓝色的
| 1 | 红色的
| 2 | 紫色

```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T04:11:05.260

尝试使用 UNION：

```
SELECT  A.id, A.color_name FROM  (
   (
      SELECT  id, color_name FROM colors
      WHERE color_name <= 'red'
      ORDER BY color_name DESC
      LIMIT 2
   )
  UNION
   (
      SELECT id, color_name FROM colors
      WHERE color_name > 'red'
      ORDER BY color_name ASC
      LIMIT 1
   )

 ) as A
ORDER BY A.color_name 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T04:47:00.927

您可以使用变量对结果集进行排名，然后将相同的结果集连接到其自身，其中颜色名称为红色且排名编号在“红色”排名的 1 个位置内：

```
SELECT b.id, b.color_name
FROM
(
    SELECT a.*, @rn:=@rn+1 AS rn 
    FROM colors a
    CROSS JOIN (SELECT @rn:=0) AS var_init
    ORDER BY a.color_name
) a
INNER JOIN
(
    SELECT a.*, @rn2:=@rn2+1 AS rn 
    FROM colors a
    CROSS JOIN (SELECT @rn2:=0) AS var_init
    ORDER BY a.color_name
) b ON a.color_name = 'red' AND a.rn IN (b.rn-1, b.rn, b.rn+1) 
```

如果您碰巧正在搜索位于列表开头或结尾的颜色，那么当然只会显示两个结果。

* * *

## [在SQLFiddle](http://www.sqlfiddle.com/#!2/81c90/20/0)上查看演示

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T05:36:05.670

```
select id, color_name from (
          select rowno, id, color_name from (
              select @rownum:=@rownum+1 rowno, id, color_name from 
                  colors, (select @rownum:=0) t1 
              order  by color_name
          ) t2
where rowno in (@row:=( 
          select rowno from (
              select @rownum:=@rownum+1 rowno, color_name 
              from colors, (
                        select @rownum:=0) t3 
              order  by color_name
              ) t4 
          where color_name = "red"), @row + 1, @row -1 )) t5 
```

# java - java中的instanceof

> ID：11662137
> 
> 赞同：-1
> 
> 时间：2012-07-26T03:58:12.463
> 
> 标签：java, instanceof

> **可能重复：**
> [Java：冒号 (:) 运算符有什么作用？](https://stackoverflow.com/questions/2399590/java-what-does-the-colon-operator-do)

```
for (CreditCard cc : credit1) 
```

&

```
if (index instanceof RewardCard) 
```

“：”和instanceof一样吗？所以我可以使用？

```
if (index : RewardCard) 
```

或者

```
for (CreditCard cc instanceof credit1) 
```

如果没有，有人可以解释“：”是什么意思吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T04:00:42.973

它们不一样：`instanceof`检查 Object 的实例是否属于某种类型。`:`in是循环列表（循环）的`for (CreditCard cc : credit1)`一种简短方法。`foreach`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T04:01:08.697

一点也不，它们完全不同。

*   `for (.. : ..)`是一个[for-each 循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)
*   `instanceof`检查运行时类型

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T04:01:39.383

```
for (CreditCard cc : credit1) 
```

它的意思是

```
for each CreditCard IN credit1, lets call it cc and use it somehow 
```

并且只要它与为给定集合声明的类相同，您就可以使用类 CreditCard。

```
 List<Parent> list = new ArrayList<Parent>();
    list.add(new Parent());
    list.add(new Child());

    for (Child parent : list) { // compilation error!  - Type mismatch: cannot convert from element type Parent to Child
        System.out.println(parent);
    } 
```

所以`instanceof`和`for (SomeType obj : SomeCollection)`甚至不相似

# delphi - 使用 Firemonkey 将数据与 MS Word 文档合并

> ID：11662144
> 
> 赞同：0
> 
> 时间：2012-07-26T03:59:49.450
> 
> 标签：delphi, delphi-xe2, firemonkey, office-automation

我即将编写一个 Windows 应用程序，它将数据库数据与 ms word docs 合并。我想知道我是否能够用 Firemonkey 做到这一点，所以将来我可以在 Mac 中重用非 Windows 特定的代码。我可以在 Firemonkey 中使用 MS Office 自动化吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:02:25.337

Firemonkey 只是一个可视化框架，与非可视化文件处理等无关。

底层语言是 Delphi/Pascal（或 C++），非常强大和灵活。

我不知道办公自动化涉及什么，但我认为它是 COM，Delphi（和 C++）完全可以使用它。

# javascript - 从数组中删除项目，为什么输出中的 for 和 for 不同？

> ID：11662148
> 
> 赞同：0
> 
> 时间：2012-07-26T04:00:28.493
> 
> 标签：javascript, arrays, for-loop, for-in-loop

```
var arr = ["a", "b", "c",null,undefined];

delete arr[0];

for (var i = 0,j=arr.length; i < j; i++) {
    console.log(arr[i]);
    /*
    undefined
    b
    c
    null
    undefined
    */
}

for (var o in arr) {
    console.log(arr[o]);
    /*
    b
    c
    null
    undefined
    */
} 
```

谁能告诉我为什么输出不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T04:36:36.320

实际上`delete`不会从数组中删除元素它只是将元素设置为未定义，从数组中删除一个项目使用`splice`如下

```
var arr = ["a", "b", "c",null,undefined];
arr.splice(0, 1); 
```

现在你的数组如下

```
["b", "c", null, undefined] 
```

但是您曾经`delete`按如下方式从数组中删除第一项

```
delete arr[0]; 
```

之后你的数组如下所示

```
[undefined × 1, "b", "c", null, undefined] 
```

因此，在您使用的第一个循环中

```
for (var i = 0,j=arr.length; i < j; i++) {
    console.log(arr[i]);
} 
```

它使用数组的索引迭代数组，所以（第一次在循环中）`arr[i]`意味着`arr[0]`在`undefined`你使用的第二个循环中

```
for (var o in arr) {
    console.log(arr[o]);
} 
```

这实际上是与要循环的对象一起使用的理想选择，但是您使用了数组，我认为它还应该显示数组的其他属性，并且真的很困惑除非您使用，否则您是如何仅获得这些`(b c null undefined)`值的`hasOwnProperty`

```
for (var o in arr) {
    if(arr.hasOwnProperty(o)) console.log(arr[o]);
} 
```

无论如何，它会迭代对象的所有可用属性，并且不应该与数组一起使用。检查[**this fiddle**](http://jsfiddle.net/heera/GdJzA/)以了解在迭代using`hasOwnProperty`时不使用此方法的工作原理以及您应该得到什么。`array``for in`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T04:05:12.147

您可以通过密钥访问；

数组索引是数组对象的键

使用 delete 关键字，删除对象键，因为

```
delete arr[0]; // key "0" deleted! 
```

好？

看到这个

```
var arr = ["a", "b", "c",null,undefined];
delete arr[0]; // key "0" deleted!

// access by i,  with key : 0
for (var i = 0,j=arr.length; i < j; i++) {
    console.log(i);
    /*
    0 
    1 
    2 
    3 
    4 
    */
}

// access by object key, without key : 0
for (var o in arr) {
    console.log(o);
    /*
    1
    2
    3
    4 
    */
}​​​​​​​​​​ 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T04:06:40.703

给定一个空数组`array = []`，`array[0]`返回`undefined`，因为位置 0 中没有存储项目。删除后`arr[0]`，那里没有数据。循环`for .. in ..`遍历数组中的所有元素，所以它返回`b c null undefined`. 更具体地说，`for .. in ..`循环对象中的属性。因此，如果您分配一个新属性，比如`name`, `arr`，`arr.name = "an array"`它将被`for .. in ..`循环打印。

# php - 链式选择的问题

> ID：11662151
> 
> 赞同：2
> 
> 时间：2012-07-26T04:00:48.760
> 
> 标签：php, javascript, jquery, mysql

我正在使用[Mika Tuupola Chained Selects jQuery 插件](http://www.appelsiini.net/projects/chained)为我的网站构建一个链式选择/下拉列表。

我动态地从两个数据库类别和子类别中提取选项，如下所示：

类别：

```
<?php
  $query="SELECT * FROM categories";
  $result = mysql_query ($query);
  echo"<select name='cselect1' id='cat'><option value=''>Please Select A Category</option>";
  // printing the list box select command
  while($catinfo=mysql_fetch_array($result)){//Array or records stored in $nt
  echo "<option value=\"".htmlspecialchars($catinfo['number'])."\">".$catinfo['cat']."</option>";

  }

  echo"</select>";
?> 
```

和子类别

```
<?php
  $query="SELECT * FROM subcategories";
  $result = mysql_query ($query);
  echo"<select name='sselect1' id='subcat'><option value=''>Sub Category</option>";
  // printing the list box select command
  while($catinfo=mysql_fetch_array($result)){//Array or records stored in $nt
  echo "<option value='".htmlspecialchars($catinfo['subcat'])."' class='".$catinfo['catnumber']."'>".$catinfo['subcat']."</option>";
  }

  echo"</select>";
?> 
```

这呼应了这样的事情：

```
<select id="cat" name="cselect1">
    <option value="0">Please Select A Category</option>
    <option value="1">Restaurants</option>
    <option value="2">Food</option>
    <option value="3">Nightlife</option>
    <option value="4">Shops</option>
</select>

<select id="subcat" name="sselect1">
    <option value="">Sub Category</option>
    <option class="1" value="American">American</option>
    <option class="2" value="Specialty Food">Specialty Food</option>
    <option class="3" value="Bars">Bars</option>
    <option class="4" value="Computers">Computers</option>
</select> 
```

这是我的jQuery：

```
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<script src="../public/scripts/chain.js" type="text/javascript"></script>
<script type="text/javascript">
        $("#subcat").chained("#cat");
</script> 
```

但由于某种原因，它不起作用？为什么是这样？

感谢您对此的所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:12:08.470

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#subcat").chained("#cat");
    });
</script> 
```

在您的情况下，您一直在做：

```
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<script src="../public/scripts/chain.js" type="text/javascript"></script>
<script type="text/javascript">
        $("#subcat").chained("#cat");
</script> 
```

在`$("#subcat").chained("#cat");`被调用的时候，文档还在被下载并解析成 DOM，jQuery 文件，chain.js 可能还没有下载。

和`<select id="cat" name="cselect1">`另一个 div 目前也没有被解析。所以做`$("#subcat")`是指将来会存在的东西。所以你的代码失败了。

存在的一种解决方案是在 HTML 中的元素之后执行所有此类访问元素的操作，因此在关闭正文之前将此类脚本移动到文件末尾会有所帮助。

但不建议这样做，因为您现在有更好的解决方案，大多数现代浏览器都支持 DOMready 事件，一旦所有内容下载、解析并且 DOM 准备就绪，就会触发该事件。$`(document).ready(function(){..});`是 jQuery 对这个 DOM rady 事件的跨浏览器实现。

以下都是 Document.ready 的变体，但做同样的事情。

```
$(document).ready(function () {
});  

$().ready(function () {
}); 

$(function () {
});     

jQuery(function ($) {
}); 
```

简而言之，在内部编写代码`$(document).ready(function(){..});`可以确保所有内容都已完成下载，并且在我们的代码执行时 DOM 已准备就绪。

注意：当我说所有内容都已下载时，它不包括准备 DOM 不需要的图像和其他数据。`window.load(function(){...});`是在下载包括图像在内的所有内容并且页面已完全加载后触发的事件。

# asp.net - 在 umbraco 中使用 listview/datagrid 会大大增加加载时间

> ID：11662154
> 
> 赞同：0
> 
> 时间：2012-07-26T04:01:00.990
> 
> 标签：asp.net, datagrid, viewstate, umbraco, page-load-time

我正在使用 listview 控件，并且我在用户控件中有 4 个列表视图控件。它与 VS2010 完美配合并在 4 秒内加载页面，但是当我将控件移动到 umbraco（创建宏）并使用它构建页面时，umbraco 几乎需要 1 分钟来加载页面。

挖掘后，我发现这是导致问题的视图状态。因此，如果我禁用视图状态 umbraco 会在 6 秒内加载页面，这非常好，但问题是表单字段没有持久化，这很明显。

那么有没有解决方法来解决这个问题？我希望打开视图状态（或以任何方式保留数据）并且 umbraco 应该能够在不到 5 秒的时间内加载页面。

请帮忙。

万分感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:49:36.837

视图状态有多大？

您是否意识到数据是由 JS 在运行时从视图状态中提取的，这取决于视图状态很多并不快。

viewstate 和整个 .net 回发模型都应该成为历史……

# ios - iOS – 平铺背景的分组 UITableView 显示不正确

> ID：11662157
> 
> 赞同：1
> 
> 时间：2012-07-26T04:01:33.983
> 
> 标签：ios, uitableview, background-image

我正在尝试通过以下方式使用平铺背景`UITableView`：`tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"gradient_squares.png"]];`

但它不会正确显示，因为每个部分都会显示与背景重叠的背景图块`UITableView`。

我尝试将我`UITableViewCell`的 backgroundColor 设置为清除颜色无济于事。

编辑：添加屏幕截图和图块

![在此处输入图像描述](../Images/ed038bdc5d3e763c86b68f3684de1a11.png)

![在此处输入图像描述](../Images/3298ee566973e972714cc0e8633d0df9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:52:50.583

这篇文章对我有用：[https ://stackoverflow.com/a/5480535/294661](https://stackoverflow.com/a/5480535/294661)

在 UIViewController 中设置每个视图的 backgroundColor 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:42:04.327

如果您有全尺寸背景图像（不是图案图像），以下代码可以解决您的问题。

```
[[self tableView] setBackgroundView:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"background_image.png"]]]; 
```

# c# - Azure 初始化期间未处理异常的日志信息？

> ID：11662161
> 
> 赞同：1
> 
> 时间：2012-07-26T04:02:45.657
> 
> 标签：c#, azure, error-handling, azure-storage

我已经使用 VS 2010 的**发布**功能在 Azure 中部署了一个站点。在 VS 说部署成功后，我转到旧的 Azure 仪表板，对于它的状态，它会循环几个不同的状态（初始化、恢复、回收等），但它们最后都有**未处理的异常**。我看过[其他](http://blogs.staykov.net/2009/12/another-common-reason-for-windows-azure.html)[一些](http://blogs.staykov.net/2009/12/windows-azure-role-stuck-in.html) 关于此类错误的帖子，但不幸的是他们还没有为我解决这个问题，所以现在我只想看看这个异常。

我如何查看异常是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:57:36.240

您应该激活远程桌面。即使它是骑自行车，如果您尝试连接几次，您将能够连接。

连接后，只需执行以下操作：

1.  开始
2.  跑
3.  事件vwr.exe
4.  选择**应用程序**日志

然后您会看到错误（甚至可能是警告），并且您将能够看到发生了什么。大多数情况下，这仅仅是由于缺少装配造成的。

# eclipse-plugin - 有没有办法根据 Eclipse 项目中扩展的节点（不一定选择）来确定项目？

> ID：11662167
> 
> 赞同：0
> 
> 时间：2012-07-26T04:03:59.470
> 
> 标签：eclipse-plugin, eclipse-pde

我以编程方式向我的项目添加了一个 javascript 库。我在项目创建期间根据用户偏好添加不同版本的库。

我能够做到这一点，但是一旦库创建完成，我就无法保留项目信息。

这是必需的，因为您的工作区中可能有多个项目具有不同的库版本，因此当用户在我添加我的库的 javascript 资源下展开树节点时，了解哪个是有问题的项目变得至关重要。如果用户选择一个项目然后展开树节点我可以通过

```
PlatformUI.getWorkbench().getActiveWorkbenchWindow()
                    .getSelectionService(); 
```

但是如果用户只是展开树节点而不选择项目，我怎么知道它属于哪个项目？...

在这方面的任何帮助将不胜感激。

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T02:13:39.610

如果他们扩展节点，而不是项目，那么我假设您有一个对扩展节点的引用，该节点将是该实例上的 IResource 类型，您可以调用 .getProject() 它返回包含选择的项目。如果确实如此不适用，你在节点扩展上有什么类型的对象引用？

# emacs - 根据Windows注册表制作Emacs dired运行程序

> ID：11662174
> 
> 赞同：0
> 
> 时间：2012-07-26T04:04:57.537
> 
> 标签：emacs, dired

当我使用 Emacs dired 时，它会打开 emacs 中的所有文件。如何使其执行.exe文件，在pdf查看器中打开pdf等。

所以它不能替代 Windows 资源管理器和总指挥官。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T09:49:32.177

采用 ！接下来是shell命令：

cmd /c 开始""

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T04:25:12.627

我自己不使用“dired”，但这[表明](http://www.gnu.org/software/emacs/manual/html_node/emacs/Dired.html)您可以在文件上运行 shell 命令。

参考[文献](http://www.gnu.org/software/emacs/manual/html_node/emacs/Shell-Commands-in-Dired.html#Shell-Commands-in-Dired)提到使用 & 或 ! 后跟 shell 命令以对一个或多个文件执行命令。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T18:00:46.237

开始执行，如果尚未完成，请按`control`+ `x` `d`。选择要运行的文件，只需使用`control`+ `n`/导航到它`p`。按 & `ENTER`。希望您选择的文件应该在异步模式下运行。

# ruby-on-rails - HABTM 3 深嵌套

> ID：11662175
> 
> 赞同：0
> 
> 时间：2012-07-26T04:05:06.763
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

**错误：未知属性：size_id**

**项目型号**

```
has_many :sizeables
has_many :sizes, through: :sizeables, :dependent => :destroy

accepts_nested_attributes_for :sizes,  :reject_if => lambda { |a| a.values.all?(&:blank?) }, :allow_destroy => true 
```

**尺寸型号**

```
has_many :sizeables
has_many :items, through: :sizeables

has_one :centimeter
accepts_nested_attributes_for :centimeter,  allow_destroy: true 
```

**厘米型号**

```
belongs_to :size 
```

**物品控制器**

```
def new 
    @item = Item.new
    @size = @item.sizes.build
    @size.build_centimeter  
end 
```

**项目新视图**

```
<%= f.fields_for :sizes do |s| %>
<%= s.fields_for :centimeter do |c| %>
<%= c.text_field :height %>
<% end %>
<% end %> 
```

**错误：未知属性：size_id**

# java - BorderLayout 隐藏 JPane

> ID：11662178
> 
> 赞同：1
> 
> 时间：2012-07-26T04:05:57.613
> 
> 标签：java, swing, layout, netbeans, border-layout

我正在使用一个边框布局，它似乎隐藏了一个 JScrollPane，其中包含一个位于中心的 JTextPane。如何强制显示 Center JScrollPane？

```
package net.bounceme.dur.usenet.swing;

import java.util.Observable;
import java.util.Observer;
import java.util.logging.Logger;
import javax.mail.Folder;
import javax.swing.ListModel;
import net.bounceme.dur.usenet.controller.Controller;
import net.bounceme.dur.usenet.controller.MessageBean;
import net.bounceme.dur.usenet.controller.MessagesDefaultListModel;

public class MessageSelect extends javax.swing.JPanel implements Observer {

    private static final Logger LOG = Logger.getLogger(MessageSelect.class.getName());
    private Controller controller = Controller.getInstance();
    private ListModel messages = new MessagesDefaultListModel();
    private MessageBean messageBean = new MessageBean();

    public MessageSelect() {
        controller.addObserver(this);
        initComponents();
        messageContent.setText("hello world");
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        center = new javax.swing.JScrollPane();
        messageContent = new javax.swing.JTextPane();
        south = new javax.swing.JPanel();
        commentJButton = new javax.swing.JButton();
        west = new javax.swing.JScrollPane();
        messagesJList = new javax.swing.JList();

        setLayout(new java.awt.BorderLayout());

        messageContent.setContentType("text/html"); // NOI18N
        center.setViewportView(messageContent);

        add(center, java.awt.BorderLayout.CENTER);

        south.setLayout(new java.awt.BorderLayout());

        commentJButton.setText("comment");
        commentJButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                commentJButtonActionPerformed(evt);
            }
        });
        south.add(commentJButton, java.awt.BorderLayout.CENTER);

        add(south, java.awt.BorderLayout.SOUTH);

        messagesJList.setModel(new javax.swing.AbstractListModel() {
            String[] strings = { "Item 1", "Item 2", "Item 3", "Item 4", "Item 5" };
            public int getSize() { return strings.length; }
            public Object getElementAt(int i) { return strings[i]; }
        });
        messagesJList.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                messagesJListMouseReleased(evt);
            }
        });
        messagesJList.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                messagesJListKeyReleased(evt);
            }
        });
        west.setViewportView(messagesJList);

        add(west, java.awt.BorderLayout.WEST);
    }// </editor-fold>

    private void commentJButtonActionPerformed(java.awt.event.ActionEvent evt) {                                               
        LOG.fine("button clicked" + messageBean);
    }                                              

    private void messagesJListKeyReleased(java.awt.event.KeyEvent evt) {                                          
        userSelectedRow();
    }                                         

    private void messagesJListMouseReleased(java.awt.event.MouseEvent evt) {                                            
        userSelectedRow();
    }                                           
    // Variables declaration - do not modify
    private javax.swing.JScrollPane center;
    private javax.swing.JButton commentJButton;
    private javax.swing.JTextPane messageContent;
    private javax.swing.JList messagesJList;
    private javax.swing.JPanel south;
    private javax.swing.JScrollPane west;
    // End of variables declaration

    @Override
    @SuppressWarnings("unchecked")
    public void update(Observable o, Object arg) {
        LOG.fine("trying folder:  " + arg);
        //Folder folder = null;
        try {
            Folder folder = (Folder) arg;
            messages = new MessagesDefaultListModel(folder);
            LOG.fine("how many messages? " + messages.getSize());
            messagesJList.setModel(messages);
            LOG.fine("loaded messages..");
        } catch (Exception e) {  //err, class cast exception?
            LOG.fine("not a valid folder " + arg);
        }
    }

    private void userSelectedRow() {
        messageBean = (MessageBean) messagesJList.getSelectedValue();
        LOG.fine(messageBean.toString());
        messageContent.setText(messageBean.getContent());
        LOG.fine("..gotMessageBean: " + messageBean);
    }
} 
```

下面的第一个选项卡允许选择 USENET 组，一些组比其他组表现更好。android 组的独特之处在于常规大小的窗口不显示 CENTER JScrollPane：

![在此处输入图像描述](../Images/a8f72b0b88da59555c94a119208bec4f.png)

但最大化窗口允许 CENTER JSCrollPane 正确显示：

![在此处输入图像描述](../Images/c0df54107711eddc828d51533393a253.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T04:47:01.887

我认为这是将`JList`自身调整到最长的行。尝试

```
messageList.setPrototypeCellValue("XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"); 
```

确定宽度。您还可以尝试为`JScrollPane`容纳`JList`并启用水平滚动的 设置首选宽度。

# python - 如何在 django admin 中过滤由外键字段设置的 django 查询？

> ID：11662179
> 
> 赞同：1
> 
> 时间：2012-07-26T04:05:57.350
> 
> 标签：python, django

我想知道如何过滤由外键字段设置的 django 查询？

以下适用于没有外键的模型。例如。

```
codes = Code.objects.extra(where=['CHAR_LENGTH(code_key) = 10']) 
```

但它不适用于具有外键的模型。例如。

```
codes_fk = CodeRegistry.objects.extra(where=['CHAR_LENGTH(code__code_key) = 10']) 
```

我只想在“CodeRegistry”管理列表中显示长度为 10 个字符的代码。提前致谢！

**模型.py**

```
class Code(models.Model):
    id = models.AutoField(primary_key=True)
    code_key = models.CharField(max_length=20,unique=True)
    redemption_date = models.DateTimeField(null=True, blank=True)
    user = models.ForeignKey(User, blank=True, null=True)
    movie = models.ForeignKey(Movie, blank=True, null=True)

class CodeRegistry(models.Model):
    code = models.ForeignKey(Code, blank=False, null=False, unique=True)
    view_count = models.IntegerField(default=0)
    last_watch_date = models.DateTimeField(null=True, blank=True)
    ip = models.IPAddressField(null=False,blank=False) 
```

**管理员.py**

```
class CodeAdmin(admin.ModelAdmin):
    fields = ['code_key','redemption_date','user','movie']

    #
    list_display = ('code_key','redemption_date','user','movie')

    #
    search_fields = ('code_key','user__email','movie__title')

    def queryset(self, request):
        """
        Filter the objects displayed in the change_list to only
        display those for the currently signed in user.
        """
        codes = Code.objects.extra(where=['CHAR_LENGTH(code_key) = 10'])
        return codes

class CodeRegistryAdmin(admin.ModelAdmin):
    fields = ['code','view_count','last_watch_date','ip']

    list_display = ('code','view_count','last_watch_date','ip')

    #
    search_fields = ['code']

    def queryset(self, request):
        """
        Filter the objects displayed in the change_list to only
        display those for the currently signed in user.
        """
        codes_fk = CodeRegistry.objects.extra(where=['CHAR_LENGTH(code_key) = 10'])
        return codes_fk 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T06:57:29.580

`CHAR_LENGTH(code__code_key)`是 SQL。它不知道`code__`前缀。

一种可能的解决方案是：

```
code_regs = CodeRegistry.objects.filter(
    code__in=Code.objects
                 .extra(where=['CHAR_LENGTH(code_key) = 10'])) 
```

# eclipse - Eclipse未解决外部与geopy

> ID：11662180
> 
> 赞同：0
> 
> 时间：2012-07-26T04:05:59.120
> 
> 标签：eclipse, pydev, geopy

```
import csv
from geopy import geocoders
import time

g = geocoders.Google()

spamReader = csv.reader(open('locations.csv', 'rb'), delimiter='\t', quotechar='|')

f = open("output.txt",'w')

for row in spamReader:
a = ', '.join(row)
#exactly_one = False
time.sleep(1)

try:
    place, (lat, lng) = g.geocode(a)
except (ValueError, geocoders.google.GQueryError, geocoders.google.GeocoderResultError, geocoders.google.GBadKeyError, geocoders.google.GTooManyQueriesError):
    #print("Error: geocode failed on input %s with message %s"%(a, error_message)
    f.write("exception")
    continue

b = str(place) + "," + "[" + str(lat) + "," + str(lng) + "]" + "\n"
print b
f.write(b) 
```

我上面的代码在命令提示符下效果很好。我想知道为什么当我尝试通过 Eclipse 运行脚本时，我不断收到“未解决的导入：geopy”。我试图以某种方式在 Project->properties->PYTHONPATH 下添加它，但我有时间找出如何让 Eclipse 识别 Geopy 安装到'C:\Python27\Lib\site-packages\ geopy-0.94.2-py2.7.egg'。我的 Eclipse 版本是在 Windows 7 上运行的 Juno，由 JDK7u4 驱动。这个问题我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:11:50.247

似乎在 Project->Properties->PyDev - PYTHONPATH 下有一个区域带有一个名为“External Libraries”的选项卡。然后有一个添加 zip/jar/egg 的按钮。有问题的“鸡蛋”实际上是一个目录，在我的安装中位于：

C:\Python27\Lib\site-packages\geopy-0.94.2-py2.7.egg

因此添加了它，然后 Eclipse Juno 将允许在代码中使用该模块。

# javascript - HTTPS：在 javascript 中发送客户端证书

> ID：11662182
> 
> 赞同：3
> 
> 时间：2012-07-26T04:06:12.560
> 
> 标签：javascript, ajax, cordova, https

我有一个客户端证书，我计划在 HTML5 移动应用程序中使用它来进行用户身份验证。是否可以选择客户端证书并使用 phonegap 或任何框架发送 HTTPS Ajax 调用。

谢谢

# vbscript - VBScript 如何修改（或组合）二进制数据以使用 ADODB.Stream 命令提示符/cscript 写入文件

> ID：11662187
> 
> 赞同：1
> 
> 时间：2012-07-26T04:06:43.450
> 
> 标签：vbscript, stream, binaryfiles

我正在尝试读取二进制文件并编辑数据，然后将文件作为新文件写回。读取文件，写入文件不是问题......它工作正常。

但是，无论我尝试修改二进制数据的任何方式，都会出现错误：“VBScript 运行时错误：类型不匹配”

例如，我正在读取一个文件并将第三个字节修改为“@”（at-sign）。

```
Option Explicit

Const ADTYPEBINARY = 1
Const ADSAVECREATEOVERWRITE = 2

Dim gstrInputFileName 
Dim gstrOutputFileName 
Dim gobjBinaryInputStream
Dim gobjBinaryOutputStream
Dim gbytearrayReadBinaryFile

    gstrInputFileName =  "some-binary-file.bin"
    gstrOutputFileName = "output-binary-filename.bin"

WScript.Echo "Reading the file data"
    Set gobjBinaryInputStream = CreateObject("ADODB.Stream")
    gobjBinaryInputStream.Type = ADTYPEBINARY
    gobjBinaryInputStream.Open
    gobjBinaryInputStream.LoadFromFile gstrInputFileName
    gbytearrayReadBinaryFile = gobjBinaryInputStream.Read
    gobjBinaryInputStream.Close
    Set gobjBinaryInputStream = Nothing

WScript.Echo "Modifying the file data"
'   These all fail... "Type mismatch"
 '' pwwqbytearrayReadBinaryFile(3) = &H40
 '' pwwqbytearrayReadBinaryFile(3) = ChrB(65)
 '' pwwqbytearrayReadBinaryFile(3) = Chr(65)
 '' pwwqbytearrayReadBinaryFile(3) = AscB("@")
 '' pwwqbytearrayReadBinaryFile(3) = Asc("@")
 '' pwwqbytearrayReadBinaryFile(3) = "@"
 '' pwwqbytearrayReadBinaryFile(3) = 65

WScript.Echo "Writing the file data"
    Set gobjBinaryOutputStream = CreateObject("ADODB.Stream")
    gobjBinaryOutputStream.Type = ADTYPEBINARY
    gobjBinaryOutputStream.Open
    gobjBinaryOutputStream.Write gbytearrayReadBinaryFile
    gobjBinaryOutputStream.SaveToFile gstrOutputFileName, ADSAVECREATEOVERWRITE
    gobjBinaryOutputStream.Close
    Set gobjBinaryOutputStream = Nothing

WScript.Echo 
WScript.Quit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T10:06:21.617

问题是：二进制流传递并期望字节数组（TypeName“Byte()”，VarType 8209）不能用 VBScript 操作。您的示例任务的解决方案是：

```
' read first byte from input, write it to output
gobjBinaryOutputStream.Write gobjBinaryInputStream.Read(1)
' skip second byte from input
gobjBinaryInputStream.Position = gobjBinaryInputStream.Position + 1
' use .NET to get a byte array containing '@' and write it to output
gobjBinaryOutputStream.Write CreateObject("System.Text.ASCIIEncoding").GetBytes_4("@")
' copy rest of input to output
gobjBinaryOutputStream.Write gobjBinaryInputStream.Read 
```

显然，这种方法不适用于现实世界的任务。所以你应该考虑使用原生支持二进制数据的语言。

# ruby-on-rails-3 - 奇怪的删除空错误

> ID：11662189
> 
> 赞同：3
> 
> 时间：2012-07-26T04:06:52.367
> 
> 标签：ruby-on-rails-3

我正在尝试从我创建的连接表中删除，但我遇到了一个我无法弄清楚的奇怪错误。

这是我的模型

```
class ArticlesUser < ActiveRecord::Base
 # attr_accessible :title, :body
 belongs_to :user
 belongs_to :article
end

class Article < ActiveRecord::Base
 attr_accessible :title
 belongs_to :user

 has_many :articles_users
 has_many :likes, :through => :articles_users, :class_name => 'User', :source => :user    
end

class User < ActiveRecord::Base 
 has_many :articles, :order => 'id DESC'
 has_and_belongs_to_many :badges

 has_many :articles_users
 has_many :likes, :through => :articles_users, :class_name => 'Article', :source => :article
end 
```

在 Rails 控制台中测试可以看到错误：

```
> a = Article.find(13) 
> a.articles_users #works fine, returns an array of users who "like" the article
> a.articles_users.where(user_id: 3) #works as well
> a.articles_users.where(user_id: 3).first.destroy #this is where the error is thrown! 
```

这里有错误：

```
 ActiveRecord::StatementInvalid: Mysql2::Error: Unknown column 'articles_users.' in 'where clause': DELETE FROM `articles_users` WHERE `articles_users`.`` = NULL 
```

为什么它似乎完全忽略了 where 哈希？请帮助我解决这个问题，我今天花了几个小时试图弄清楚。

谢谢！

**编辑：**

该`articles_users`表有 2 列：`article_id`和`user_id`

**编辑：**

这是从控制台复制和粘贴的：

```
1.9.3p194 :004 > a.articles_users.where(user_id: 3).first
ArticlesUser Load (0.7ms)  SELECT `articles_users`.* FROM `articles_users` WHERE    `articles_users`.`article_id` = 13 AND `articles_users`.`user_id` = 3 LIMIT 1
=> #<ArticlesUser user_id: 3, article_id: 13> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:56:34.517

我尝试并复制了您的问题。

从您的输出看来，您在 ArticlesUser 中没有 id 列，这是问题的原因。

```
=> #<ArticlesUser user_id: 3, article_id: 13> 
```

我尝试将 id 列添加到表中，它就像魅力一样。创建了一个新的迁移并添加它

```
 add_column :articles_users, :id, :primary_key 
```

当您销毁记录时，rails 使用它的 id 作为参考从数据库中删除它。

检查示例。

```
 DELETE FROM `articles_users` WHERE `articles_users`.`id` = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-06T13:06:07.927

如果您有兴趣，我找到了一个没有主键的解决方案。

**编辑**：这非常接近：[仅删除 Ruby on Rails 中的连接表记录](https://stackoverflow.com/questions/6831313/deleting-just-a-join-table-record-in-ruby-on-rails)，但我相信我的解决方案更加对称。

首先，我遵循了其中的一部分：[http](http://ngauthier.com/2010/11/restful-many-to-many-relationships-in-rails.html) ://ngauthier.com/2010/11/restful-many-to-many-relationships-in-rails.html 我只在我的 config/routes.rb 中更改了这一行：

```
resources :users 
```

进入这个：

```
resources :users do
  resources :articles, :controller => 'ArticleUsers', :only => [:index, :create, :destroy]
end 
```

然后生成您的 ArticleUsers 控制器并创建如下方法：

```
def delete_article
  @user.articles.delete(@article)
  redirect_to user_articles_path
end 
```

好吧，你还需要像 @user 这样的过滤器：

```
def find_user
  @user = User.find(params[:user_id]
end 
```

和@article 类似（注意，如果您按照上面的链接进行操作，您可能需要使用 params([:id]) 而不是 params([:article_id])）

然后在你的 routes.rb 添加：

```
match '/users/:user_id/articles/delete_article/:id', :controller => 'ArticleUsers', :action => 'delete_article' 
```

请注意，如果您使用的不是 Rails 3，而是 Rails 4，则应将“match”替换为“map.connect”。

然后在你的索引中，如果你用 slim 写，如果你的 @items 包含所有用户的文章：

```
 - @items.each do |articleuser|
   tr
     td= articleuser.article.title

     td
       = link_to "article/delete_article/#{articleuser.article_id}",\
         data: { confirm: 'Confirm ?' } do
         i.icon-trash.icon.icon-large 
```

这适用于我必须在表格中显示链接的情况，但您可以轻松地将其适应您的情况。

这种方法避免使用真正需要ID的destroy方法。

我花了一些时间和几个资源来解决这个问题，我希望它对其他人有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T08:10:54.097

快速浏览一下..我也遇到了同样的问题，但我在我的代码中尝试了这个-：

```
@cart = Cart.where(:user_id => current_user.id).first
@item = @cart.cart_items.where(:product_id => params[:product_id]).first
@item.destroy 
```

或者在你的代码中你可以尝试使用这个

```
@a=a.articles_users.where(user_id: 3).first
@a.destroy 
```

试试看

# closures - 在创建对象的函数中引用 var

> ID：11662191
> 
> 赞同：0
> 
> 时间：2012-07-26T04:07:06.647
> 
> 标签：closures, javascript-objects, javascript

这是我想要工作的测试代码。

```
 function test() {
        var val = 'var ref',
            tobj = new testObj(this);

        tobj.alertParentVal(); //alert 'var ref'
        val = 'new val';
        tobj.alertParentVal(); //alert 'new val'
    }
    function testObj(o) {
       this.alertParentVal = function() {
            alert(o.val);
        }
    } 
```

如果不将“val”的值传递给新的 testObj，我如何引用“val”。如果这是不可能的。有没有办法保留对 test() 函数变量的引用，以便如果函数中的值发生变化，我可以使用对象中的新值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T04:12:11.167

变量不能作为属性访问，除了全局对象。

您需要为对象提供一个引用该变量的函数，以便从变量范围之外读取它...

```
function test() {
    var val = 'var ref',
        tobj = new testObj(this);

    this.getVal = function() { return val; }; // accessor for the val variable

    tobj.alertParentVal(); //alert 'var ref'
    val = 'new val';
    tobj.alertParentVal(); //alert 'new val'

}
function testObj(o) {
   this.alertParentVal = function() {
        alert(o.getVal()); // get the variable
    }
} 
```

***演示：http:*** [//jsfiddle.net/a2HfG/1/](http://jsfiddle.net/a2HfG/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T04:44:30.397

作为替代方案，由于您已经将 this 传递给 testObj，因此您也可以将 val 指定为 this 的属性。你可以这样做：

```
function test() {
    this.val = 'var ref';
    var tobj = new testObj(this);

    tobj.alertParentVal(); //alert 'var ref'
    this.val = 'new val';
    tobj.alertParentVal(); //alert 'new val'
}

function testObj(o) {
   this.alertParentVal = function() {
        alert(o.val); // get the variable
    }
} 
```

# google-maps-api-3 - 基于 Derek Eder 的模板在 Google Fusion Tables 地图上显示标记？

> ID：11662194
> 
> 赞同：0
> 
> 时间：2012-07-26T04:07:15.440
> 
> 标签：google-maps-api-3, google-fusion-tables

我正在根据 Derek Eder 在[http://derekeder.com/searchable_map_template/](http://derekeder.com/searchable_map_template/)上找到的模板制作地图。

数据来自 Google Fusion Table。这是我到目前为止所拥有的：http: [//andyinman.com/derekeder/index.html](http://andyinman.com/derekeder/index.html)。

问题是只有前四种犯罪类型（复选框）在地图上显示为标记。黑色文本中的那些不显示。为什么是这样？它们是从融合表中称为“类型”的列中提取的，并分配了一个从 1 到 11 的数值。

结果显示为“找到的结果”，但未显示在地图上。任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:54:37.897

这是[Google Maps 的 FusionTablesLayer 功能的](https://developers.google.com/maps/documentation/javascript/layers#FusionTables)限制：

*   您最多可以在地图中添加 5 个 FusionTablesLayer（您目前正在为每个搜索设置一个新的，效率不是很高，但我认为这不是问题）
*   您可能只有一个样式层
*   在该样式层上，您最多可以有 5 个样式规则

我认为您在第三个限制中运行，因为您试图为每种类型的标记设置不同的样式（即不同的颜色）。如果您限制样式，它应该可以工作。

另一种解决方案是自己[添加标记](https://developers.google.com/maps/documentation/javascript/overlays#Markers)，那么您就没有这些限制，但是对于这么多的标记，这将是一个性能问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T16:07:19.370

看起来你的代码是正确的。我认为问题出在您的 Fusion Table ( [https://www.google.com/fusiontables/DataSource?dsrcid=4695503](https://www.google.com/fusiontables/DataSource?dsrcid=4695503) ) 上。

您正在使用“位置”列进行搜索，但该列似乎只进行了部分地理编码。我会尝试进入 Fusion Tables 并在“位置”列上尝试 File => Geocode，看看是否有效。

如果失败，请尝试将“locationColumn”变量从“Location”设置为“lat”

# iphone - 在 init 中调试内存泄漏

> ID：11662195
> 
> 赞同：0
> 
> 时间：2012-07-26T04:07:19.643
> 
> 标签：iphone, objective-c, ios, ipad

我试图弄清楚为什么以下代码会导致泄漏。所以我有以下自定义初始化方法：

```
@property (nonatomic, retain) NSString *userId;
@property (nonatomic, retain) NSString *text;
@property (nonatomic, retain) NSString *username;
@property (nonatomic, retain) NSString *creatorName;
@property (nonatomic, retain) NSString *profilePicture;
@property (nonatomic, retain) NSString *imageId;
@property (nonatomic, retain) NSString *imageLink;
@property (nonatomic, retain) NSString *createdTime;
@property (nonatomic, retain) NSMutableArray * imageLikes;
@property (nonatomic, retain) NSMutableArray * imageComments;
@property (nonatomic, retain) NSDictionary *image;
@property (nonatomic, assign) int commentsCount;
@property (nonatomic, assign) int likesCount;
@property (nonatomic, assign) int index;
@property (nonatomic, assign) int numberOfRows;
@property (nonatomic, assign) BOOL increaseHeight;
@property (nonatomic, assign) BOOL userHasLiked;
@property (nonatomic, assign) BOOL canResetHeight;

-(id)initWithData:(NSDictionary *)data
{
    self = [super init];
    if (!self) {
        return nil;
    }

    self.text = [[data valueForKey:@"caption"] valueForKey:@"text"];

    self.createdTime = [[data valueForKey:@"caption"] valueForKey:@"created_time"];
    self.imageId = [data valueForKey:@"id"];
    self.imageLink = [data valueForKey:@"link"];
    NSDictionary *from = [data valueForKey:@"user"];
    self.username = [from valueForKey:@"username"];
    self.profilePicture = [from valueForKey:@"profile_picture"];
    self.creatorName = [from valueForKey:@"full_name"];
    self.userId = [from valueForKey:@"id"];

    self.userHasLiked = [[data objectForKey:@"user_has_liked"] boolValue];

    self.commentsCount = [[[data valueForKey:@"comments"] valueForKey:@"count"] intValue];
    self.likesCount = [[[data valueForKey:@"likes"] valueForKey:@"count"] intValue];

    self.image = [data valueForKey:@"images"];

    self.increaseHeight = NO;
    self.numberOfRows = -1;

    return self;
}

-(void) dealloc
{
    [createdTime_ release];
    [imageLink_ release];
    [imageId_ release];
    [imageLikes_ release];
    [imageComments_ release];
    [username_ release];
    [userId_ release];
    [profilePicture_ release];
    [text_ release];
    [creatorName_ release];
    [super dealloc];
} 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T04:22:15.237

```
-(void) dealloc
{
    [createdTime_ release];
    [imageLink_ release];
    [imageId_ release];
    [imageLikes_ release];
    [imageComments_ release];
    [username_ release];
    [userId_ release];
    [profilePicture_ release];
    [text_ release];
    [creatorName_ release];
    [image_ release]; // add a code
    [super dealloc];
} 
```

# javascript - 浏览器自行加载时自动刷新

> ID：11662199
> 
> 赞同：0
> 
> 时间：2012-07-26T04:07:44.197
> 
> 标签：javascript, html

有人可以告诉我如何让页面自动刷新。（示例）我使用frontpage access2002 数据库和asp 页面制作了一个留言簿。现在，当您填写表格并返回查看您的输入时，您必须手动刷新页面以显示新输入。当您回复或开始新线程时，我希望它像本网站一样自动刷新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T04:11:43.787

使用 javascript`window.location`转到同一页面。

```
window.location = window.location; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T04:12:01.833

在这里，我们在页面加载 5 秒后刷新页面。这导致页面每 5 秒不断刷新一次。

```
function autoRefresh(timePeriod) {
    setTimeout("location.reload(true);",timePeriod);
} 
```

# php - php mysql选择重复

> ID：11662200
> 
> 赞同：0
> 
> 时间：2012-07-26T04:07:46.017
> 
> 标签：php, mysql

这是我的桌子

```
id    name    score   date
1     John    5       2012-01-14
2     smith   7       2012-01-12
3     mariah  9       2012-03-22
4     John    8       2012-05-23 
```

好吧，我想选择每个人的分数，但是 with`limit 1`表示如果 John 有两个或多个分数，我想选择一个最近的女巫。像这样

输出：

```
id    name    score   date
2     smith   7       2012-01-12
3     mariah  9       2012-03-22
4     John    8       2012-05-23 
```

我应该使用 Group by 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:11:04.100

像这样的东西怎么样

```
SELECT  mt.*
FROM    MyTable mt INNER JOIN
        (
            SELECT  Name,
                    MAX(date) date
            FROM    MyTable
            GROUP BY    Name
        ) lastDate  ON  mt.Name = lastDate.Name
                    AND mt.date = lastDate.date 
```

# asp.net - System.Web.Security.RoleManagerModule.OnEnter() 中的 NullReferenceException

> ID：11662201
> 
> 赞同：0
> 
> 时间：2012-07-26T04:08:20.260
> 
> 标签：asp.net, nullreferenceexception, asp.net-roles

我遇到了一个错误，我无法在网上找到答案。我用 IIS 角色和 ASP.NET 角色服务创建了一个新的虚拟 Server 2008 R2 Standard 框。服务器用于生产。我将一个网站复制到服务器，但它已经停止工作；具体来说，RoleManagerModule 正在引发 NullReferenceException。这发生在任何 *.aspx 页面上，但不会发生在 robots.txt 等静态页面上。即使对于没有任何授权规则的页面，也会发生此错误。以下是应用程序事件日志中错误的相关片段：

```
Exception information: 
    Exception type: NullReferenceException 
    Exception message: Object reference not set to an instance of an object. 

Request information: 
    Request URL: ******** 
    Request path: / 
    User host address: ******** 
    User:  
    Is authenticated: False 
    Authentication Type:  
    Thread account name: ******** 

Thread information: 
    Thread ID: 8 
    Thread account name: ******** 
    Is impersonating: False 
    Stack trace:    at System.Web.Security.RoleManagerModule.OnEnter(Object source, EventArgs eventArgs)
   at System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

仅当在 web.config 中启用角色管理器时才会发生这种情况：

```
<roleManager defaultProvider="EWRO" enabled="true"> 
```

如果我删除或设置为 false 启用的属性，aspx 页面会正确响应。我已经尽可能地匹配网站当前运行的服务器的配置和安装服务。您可能会注意到我有一个自定义角色提供程序，但是即使我删除了 defaultProvider 属性也会发生相同的异常。AspNetSqlRoleProvider 无论如何都会失败，但它没有达到这一点。

一个解决方案或找到解决方案的步骤将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:05:00.097

我最终重新安装了 IIS 服务器角色，它解决了这个问题。抱歉，对于发现此问题的任何其他人，我无法提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-26T11:05:59.997

发生此错误是因为 RoleManager 找不到用户身份，通常是在启用匿名身份验证时。

要解决它，请尝试编辑

c:\windows\system32\inetsrv\config\applicationHost.config

并将 DefaultAuthenticationModule 放在 RoleManagerModule 之前

```
<add name="DefaultAuthentication" type="System.Web.Security.DefaultAuthenticationModule" preCondition="managedHandler" />
<add name="RoleManager" type="System.Web.Security.RoleManagerModule" preCondition="managedHandler" /> 
```

# forms - grails 以表格形式更新 td

> ID：11662202
> 
> 赞同：0
> 
> 时间：2012-07-26T04:08:37.717
> 
> 标签：forms, grails, action, html-table

我有一个按钮可以更新 fieldset 或 td 之类的标签以显示渲染的模板：

```
 <td id="tdBtn"><g:submitToRemote name="showFieldSet" value="Edit" update="fieldSet" action="setPwdTxtVisible" onComplete="hideBtn(3)" /></td>

 <fieldset id="fieldSet">
<-- this will be the section where the template will be rendered upon btn click name="showFieldSet" -->

    </fieldset> 
```

那个行动：

```
def setPwdTxtVisible=
    {
        def employeeId= params.employeeId
        MySession session = MySession.getMySession(request, params.employeeId)
        session.profileInstance.isEditPwd = true
        render(template:"/layouts/passwordProfile")

    } 
```

有没有办法在 def 方法而不是按钮中进行更新？问题是当保存数据时验证失败时，页面被重新加载并且更新的 td 再次返回到没有呈现的模板。我想更新 catch 内的 td （在 SAVE 方法中的 try catch 语句中），以便模板仍然存在。喜欢这样编码：以及如何在不使用 javascript 的情况下访问第一个位置的 td？这可能吗？

```
 def setPwdTxtVisible=
    {
        def employeeId= params.employeeId
        MySession session = MySession.getMySession(request, params.employeeId)
        session.profileInstance.isEditPwd = true
        render(template:"/layouts/passwordProfile")
        update fieldset //<<------

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:56:37.343

如果没有 javascript，您将无法做到这一点。控制器无权访问 DOM。

修改您的控制器操作，使其返回失败或成功消息，然后您可以在更新方法中使用映射 - update="[success: 'message', failure: 'error']"

如果你这样做，它基本上说如果你的 AJAX 调用失败，它会在名为 error 的 div 上呈现客户端的错误。

您还可以通过 http 状态消息控制错误消息的流向，因此在您的 submitToRemote 方法中，您可以添加一个 on501="error" ，它使用您的 501 的内容更新错误 div 或使用特定的服务器操作。

[http://grails.org/doc/latest/ref/Tags/submitToRemote.html](http://grails.org/doc/latest/ref/Tags/submitToRemote.html)

你的控制器不应该操纵 DOM 元素。

# c# - 如何使用 C# 应用程序对我的 web 应用程序进行压力测试？

> ID：11662206
> 
> 赞同：0
> 
> 时间：2012-07-26T04:09:09.693
> 
> 标签：c#, http, stress-testing

这是[粘贴中的代码](http://pastie.org/4334335)

我正在使用此代码对我的服务器进行压力测试。我试过了`webpound X 1000 http://local_dev.com`。

该代码似乎可以工作并且很好。它<100 行，不难理解。简而言之，它使用 webclient 在阻塞和异步模式下访问站点一次（因此它旁边的 while 循环）。然后它反复点击网站计算有多少成功。

问题出在两台不同的机器上，我在异步模式下得到 600-850（使用 0 作为第一个参数），在单线程模式下随机得到 160-350。

运行此应用程序时，我的 CPU 处于空闲状态。根据任务管理器，我的 webapp 从未达到 1%，webpound 不超过 2%，而 cpu 总量从未超过 5%。

这里有什么问题？服务器是使用 fastcgi 的 nginx。我怀疑问题出在 webclient/C# 上。有什么我可以使用的具有相同想法的另一个工具？或者我如何修改它以便我可以每秒击中更多？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Diagnostics;
using System.IO;

namespace webpound
{
    class Program
    {
        static long count = 0;
        static void Main(string[] args)
        {
            var s = new Stopwatch();
            var wc = new WebClient();
            int time = 100, mthread=0;

            if (args.Count() == 0)
            {
                Console.WriteLine("[1 (for single) [ms time]] url");
                return;
            }
            string url = null;
            bool useSingle = false;
            if (args.Count() == 1)
            {
                url = args[0];;
            }
            else if (args.Count() == 2)
            {
                useSingle = args[0] == "1";
                url = args[1];
            }
            else if (args.Count() == 3)
            {
                useSingle = args[0] == "1";
                time = int.Parse(args[1]);
                url = args[2];
            }
            else
            {
                throw new Exception();
            }

            var uri = new Uri(url);
            wc.Headers["User-Agent"] = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1";
            wc.DownloadStringCompleted += DownloadStringCompletedEventHandler;
            //wc.DownloadProgressChanged += DownloadProgressChangedEventHandler;
            wc.DownloadString(uri);
            wc.DownloadStringAsync(uri);

            while (System.Threading.Interlocked.Read(ref count)==0)
            {
                System.Threading.Thread.Sleep(1);
            }
            count = 0;
            WebException ex1 = null;
            s.Start();
            try
            {
                while (s.ElapsedMilliseconds < time)
                {
                    if (useSingle)
                    {
                        wc.DownloadString(url);
                        count++;
                    }
                    else
                    {
                        var wwc = new WebClient();
                        wwc.Headers["User-Agent"] = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1";
                        wwc.DownloadStringCompleted += DownloadStringCompletedEventHandler;
                        var url2 = url + mthread.ToString();
                        wwc.DownloadStringAsync(new Uri(url2));
                        mthread++;
                        System.Threading.Thread.Sleep(1);
                    }
                }
            }
            catch(WebException ex)
            {
                ex1 = ex;
            }
            var mycount = count;
            s.Stop();
            if (ex1 == null)
            {
                Console.WriteLine("Finished with {0}/{1} in {2}", mycount,mthread, s.ElapsedMilliseconds);
            }
            else
            {
                var aa = new StreamReader(ex1.Response.GetResponseStream()).ReadToEnd();
                Console.WriteLine(ex1.Message);
                Console.WriteLine("Finished with {0}/{1} in {2}", mycount, mthread, s.ElapsedMilliseconds);
            }
        }

        static void DownloadProgressChangedEventHandler(object sender, DownloadProgressChangedEventArgs e)
        {
        }
        static void DownloadStringCompletedEventHandler(object sender, DownloadStringCompletedEventArgs e)
        {
            System.Threading.Interlocked.Increment(ref count);
        }
    }
} 
```

# linux - Linux crontab 没有执行？

> ID：11662209
> 
> 赞同：1
> 
> 时间：2012-07-26T04:09:22.787
> 
> 标签：linux, cron, crontab

我在运行 Ubuntu 12.04 的机器上使用自定义 Linux Kernel 3.2.1 已经有一段时间了，今天我想安排一个 cron 任务并意识到 crontab 中的 crons 没有被执行。

该`cron`服务正在运行，所以我认为这可能是我错过的某些内核配置选项的问题，但不知道可能是什么。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T04:25:46.343

我认为自定义内核不会有太大的不同。也许......但不是我要看的第一件事。

首先，检查运行 cron 的用户是否有本地邮件（检查 /var/spool/mail/）。如果有错误，可能会写在那里。如果没有，请尝试将程序的 stderr 和 stdout 重定向到文件。例如添加到您的 cron：

```
SHELL = /bin/bash
PATH = /usr/bin/:/bin

* * * * * ls /tmp > $HOME/ls_tmp.log 2>&1 
```

我认为 ubuntu 上 cron 的默认 shell 是 sh 而不是 bash，所以我喜欢将其设置为 bash 以避免 bash/sh 问题。我也喜欢明确说明路径（并将 ~/bin 添加到它的开头，用于我的本地脚本）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T12:05:05.637

日志文件必须包含失败描述：

```
cat /var/log/syslog | grep cron -C 1 
```

# java - 递归java星号

> ID：11662212
> 
> 赞同：3
> 
> 时间：2012-07-26T04:09:46.867
> 
> 标签：java, recursion

我正在研究应该是一个相对简单的 java 递归问题，尽管我似乎无法在任何地方找到一个简单的、单一方法的解决方案。

我正在尝试按降序打印星号，然后按升序打印，这样当用户输入 3 时，打印输出将如下所示：

```
*
**
***
**
* 
```

编辑：感谢@dasblinkenlight 的帮助，这已经演变为：

```
public void patternMaker(int start, int max, int direction){
    if(start == 0){
        return;
    }
    for(int i = 0; i < start; i++){
        System.out.print("*");
    }
    System.out.println();
    if(start == max){
        direction = -1;
    }
    patternMaker(start + direction, max, direction); 
```

现在，它以正确的顺序打印正确数量的星号：

```
*
**
***
**
* 
```

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T04:25:53.407

我不确定您是否*可以*使用一个参数进行递归。我想你需要两个。这是想法：

```
stars(2, 4) 
```

会打印

```
**
***
****
***
** 
```

和

```
stars(5, 6) 
```

会打印

```
*****
******
***** 
```

这自然是递归的。为什么？因为

```
stars(n, n) 
```

只打印 n 颗星。这是基本情况。现在递归步骤怎么样？好吧，让我们试试

```
stars(k, n) 
```

其中 k < n。这样做是这样的

```
draw a line of k stars
call stars(k + 1, n)
draw a line of k stars 
```

就这些。当然，检查 k < n 是很好的，但我们相信您可以解决这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T04:15:45.347

你需要另一个参数来告诉你你要去哪条路。您还需要测试结束条件以了解何时从上升切换到下降。

```
public void patternMaker(int x, int direction){
    // Direction is either +1 or -1, depending on whether you go up or down
    // at the moment. Once you reach 3, switch the sign;
    // Once you reach zero, stop.

    // Pseudocode:
    // If x is zero, we're done
    // Print x asterisks followed by newline
    // if x == 3, make direction -1
    // Perform the recursive call with (x+direction, direction)
} 
```

在递归之前绘制星星可能会更容易，尽管这两种方式都是可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T04:40:09.177

```
static String patternMaker(int x, String result){
    String curStr ="";
    for (int i=0; i<x; i++)
        curStr += "*";
    curStr += "\n";
    if (result == null){             
         return patternMaker(x-1,curStr);
    }else if (x > 0){           
          return patternMaker(x-1, curStr+result+curStr); 
    }
    else 
        return result;
}

//test with :
System.out.println(patternMaker(3,null)); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-26T04:59:57.340

```
public class pattern {

public void patternMaker(int x){
    if(x > 0){
        for(int i = 0; i < x; i++){
            for(int j=0;j<=i;j++){
                System.out.print("*");
            }
            System.out.print("\n");
        }
        for(int i = x-1; i > 0; i--){
            for(int j=i;j>0;j--){
                System.out.print("*");
            }
            System.out.print("\n");
        }
    }
}
public static void main(String[] ar){
    new pattern().patternMaker(3);
}
} 
```

# jquery - 代码在 Firefox 中有效，但在 IE 和 Chrome 中均无效

> ID：11662217
> 
> 赞同：-1
> 
> 时间：2012-07-26T04:10:32.687
> 
> 标签：jquery, html, animation

我正在创建一个具有很多效果并响应一些用户操作的 jquery 动画，但代码在 Firefox 中运行良好，而不是在 ie 或 chrome 中这是我的代码

```
 (function($) {
            $(document).ready(function() {
                $('#wires').effect("shake", { times:3000,  distance:31  }, 300).css('z-index','-1');
                //$('#wires').css('z-index','-1');
                $('#baccha').css('z-index','99999999999999999999');
                $("#saman1").live('click',function(){
                    alert("s");
                                $('#i1').attr('src','char2.gif');
                                $('#i1').addClass('run');
                                $('#i1').removeClass('stand');
                    });
                $("#bird").live('click',function(){
                                $('#i1').attr('src','char1.gif');
                                $('#i1').addClass('stand');
                                $('#i1').removeClass('run');
                    });
                $('#wires').sparks([ {
                                         number: 10,
                                         speed:  5,
                                         img:    'spark.png'
                                      }]);

                $('#bird')
                    .sprite({
                        fps: 3, 
                        no_of_frames:3,
                        start_at_frame: 1

                    });
                     $('#light')
                    .sprite({
                        fps: 20, 
                        no_of_frames:3,
                        start_at_frame: 1

                    });

            });
        })(jQuery);

    </script> 
```

在 IE 中，我的电线 div 隐藏在无处我试过空白 bg 我看不到它，如果我把 z-index 0 然后它会出现在 baccha div 的前面，它隐藏了所有东西，在 chrome 中我的点击功能不起作用我得到了一些错误资源中断的文本/简单的事情如果你愿意我会发布错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T04:19:27.080

尝试从这两个部分中删除多余的逗号：

```
 $('#bird').sprite({
        fps: 3,
        no_of_frames: 3,
        start_at_frame: 1, //remove this comma
    }) //put ; here, good practice

    $('#light').sprite({
        fps: 20,
        no_of_frames: 3,
        start_at_frame: 1, //remove this comma
    }) //put ; here, good practice 
```

**EDIT1：**错过了一个部分，您可以从中删除多余的逗号并重试吗？

```
 $('#wires').effect("shake", {
        times: 3000,
        distance: 31, // remove this comma
    }, 300); 
```

**EDIT2：**在结束标签`</div>`上方的末尾有一个额外的。`body`删除它，然后重试。

**EDIT3：**问题在于您的 HTML 元素堆栈和 CSS。只是为了说明我的观点，`margin-top: -60px`从您的`floor`div 样式中删除，然后单击即可`saman1`。

# python - 有没有办法在 Python 中以特定用户的身份执行命令？

> ID：11662219
> 
> 赞同：2
> 
> 时间：2012-07-26T04:10:39.073
> 
> 标签：python, linux, shell, operating-system, command

据我所知，在 Python 中执行系统命令大约有 3 种方法：

1.  `os.system(command) -> exit_status`

2.  `os.popen(command [, mode='r' [, bufsize]]) -> pipe`

3.  `commands.getoutput(command)-> string`

现在我需要控制系统命令的执行器，除了：

`os.system('su xxx;' + command)`

有没有其他更优雅的方式来达到同样的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T04:16:51.570

您提到的所有事情（顺便说一下，模块已经继承了`subprocess`这些事情）都是产生进程的方式。你听起来像是在寻找`setuid`。您可以调用一个函数来执行此操作（例如`os.setuid`），或者，通常情况下，取决于您的脚本所做的事情，您可以以提升的用户身份运行整个脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:56:53.777

`subprocess`使用模块以其他用户身份运行命令（实施[@Julian 的建议](https://stackoverflow.com/a/11662267/4279)）。它类似于[@tMC 的代码](https://stackoverflow.com/a/11676563/4279)，但级别更高：

```
import os
import pwd
from subprocess import check_output as qx

def change_user(uid, gid=None):
    if gid is None:
        gid = uid
    def preexec_fn():
        os.setgid(gid)
        os.setgroups([gid])
        os.setuid(uid)
    return preexec_fn

print(qx(['id']))
print(qx(['id'], preexec_fn=change_user(pwd.getpwnam('nobody').pw_uid), env={}))
print(qx(['id'])) 
```

在旧的 Python 版本中，您可能需要添加`close_fds=True`子进程调用以避免 fd 泄漏。

您可以使用`cwd`参数来指定运行命令的目录，例如用户的主目录。

填充`env`字典以设置子进程的环境变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T19:21:45.547

虽然对于大多数实现来说可能是“低级”的，但对于一些人来说了解这在更高级别的模块中是如何真正发生的可能是有教育意义的。

```
import os
import pwd

pout, pin = os.pipe()                                # Creates an anonymous pipe used to communicate with the child process

if not os.fork():                                    # The fork() syscall duplicated the process retuning 0 to the new child process.
    os.closerange(0, 2)                              # Closing stdin, stdout and stderr- they were inherited from the parent process
    os.dup2(pin, 1)                                  # Copy the input side of the IPC pipe to stdout (always fd 1)
    os.setuid(pwd.getpwnam('nobody').pw_uid)         # Change our user id to that of the user `nobody`.  Also see `setgid()`
    os.execl('/bin/whoami', 'whoami')                # Now that we've connected out stdout to the pipe connected to the parent process
                                                     #     and changed our user id to that of the user we want to run the command with
                                                     #     we can `exec()` the new process; replacing our currently running process, 
                                                     #     inheriting the env.
    os._exit(0)                                      # Since we called `exec` above, this is never eval'd, but is good form

os.wait()                                            # Back at the parent process- `wait()` will, well, wait until the child process exits.
os.close(pin)                                        # Close the input side of the pipe, the parent shouldn't write to. (bi-dirctional IPC
                                                     #     would require 2 pipes.  One in each direction
child_stdout_pipe = os.fdopen(pout, 'r')             # Open the output side of the IPC pipe
child_process_output = child_stdout_pipe.read()      # ...and read from the pipe.  This should include anything that came from the stdout of
                                                     #     the child process.  Since we closed the input side of the pipe, the `read()` 
                                                     #     will read an EOF after all the data in the pipe is returned.

print child_process_output                           # Win! (`write()`ing out the parent stdout want we found in the pipe from the child proc 
```

# cloud-foundry - cloudfoundry_controller 无法启动

> ID：11662220
> 
> 赞同：0
> 
> 时间：2012-07-26T04:10:57.830
> 
> 标签：cloud-foundry

我想问一些关于 cloudfoundry 的问题。我使用本教程在本地系统上安装了 cloudfoundry。[如何](http://blog.dustinkirkland.com/2011/08/howto-install-cloudfoundry-server-paas.html)在 ubuntu 12.04 上从 ppa 存储库安装 cloudfoundry 服务器 paas。

然后我用语法运行它：`$ sudo /etc/init.d/cloudfoundry-server start` 结果是：

```
router              :    RUNNING

cloud_controller    :    RUNNING

dea                 :    RUNNING

health_manager      :    RUNNING 
```

但是当我重新启动时，它说 cloud_controller 已停止

我从语法手动重新启动它：`$ /opt/cloudfoundry-server/vcap/bin/cloud-controller restart`

结果是：

> 暂存环境验证失败：sinatra 运行时 ruby​​18 版本为 1.9.3p0，预计匹配 1.8.7

有谁能够帮我 ？请 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T04:58:09.290

我们建议您按照[https://github.com/cloudfoundry/vcap/](https://github.com/cloudfoundry/vcap/)自述文件中的说明在Ubuntu 10.04 上进行安装，尽管从源代码安装需要更长的时间，但这将确保您获得可用的最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:03:59.423

该网址适用于 Ubuntu 11。查看[Andy 的](http://andypiper.co.uk/2012/04/26/ubuntu-12-04-and-cloud-foundry/)关于 Ubuntu 12.04的博客

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T19:11:25.087

该错误来自您的 cloud_controller 和暂存清单之间的信息不一致。查找 sinatra.yml 文件（位置取决于您的设置，但您可以在 cloud_controller.yml 中找到它）。

# .net - 在表单加载期间跳过子例程

> ID：11662225
> 
> 赞同：0
> 
> 时间：2012-07-26T04:11:30.173
> 
> 标签：.net, vb.net, routines

我在这里有一个表单加载子例程，问题是程序执行第一个（即`LoadProgrammes()`）然后跳过子例程的其余部分。子程序有一些东西`LoadProgrammes()`使“表单加载”的其余部分不会被调用。

也是如此`ListActiveClasses()`。只有`DisplayGroups()`被正确调用并调用下一行代码。

我真的不知道为什么，而且很难找到谷歌的解决方案。提前感谢任何可以提供帮助的人。

```
Private Sub frmEnroll_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    LoadProgrammes()
    ListActiveClasses()
    DisplayGroups()

End Sub

Private Sub LoadProgrammes()
    Dim strLoadSQL As String
    Dim dsLoad As New DataSet
    Dim daLoad As OleDb.OleDbDataAdapter

    Using con As New OleDbConnection(My.Settings.ConnectionPath)

        strLoadSQL = "SELECT Programme FROM Programmes"
        daLoad = New OleDb.OleDbDataAdapter(strLoadSQL, con)
        daLoad.Fill(dsLoad, "LoadProgrammes")

        'Add items to the combobox
        For i = 0 To dsLoad.Tables("LoadProgrammes").Rows.Count
            cmbProgramme.Items.Add(dsLoad.Tables("LoadProgrammes").Rows(i).Item(0))
        Next

    End Using
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T04:15:19.323

我所看到的是，在某些事件处理程序（可能像您的 Form.Load 处理程序）中，执行期间抛出的任何异常都将被简单地吞下并忽略。您很可能在 OleDb 代码中遇到了一些异常，这导致它退出。

我建议用[Try...Catch 块](http://msdn.microsoft.com/en-us/library/fk6t46tz.aspx)包装所有 _Load 子例程，并手动打印出异常，或调用[Debugger.Break](http://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.break.aspx#Y0)。

您是否尝试过单步执行代码？我建议您在 的开头设置一个断点`frmEnroll_Load`，然后开始单步执行，直到出现问题，或者代码继续运行（如果异常被吞没，您会看到这一点。）

* * *

相关问题/页面：

*   [C# 中的静默失败，看似未处理的异常，不会使程序崩溃](https://stackoverflow.com/questions/1583351/silent-failures-in-c-seemingly-unhandled-exceptions-that-does-not-crash-the-pr)
*   [为什么表单加载无法捕获异常？](https://stackoverflow.com/questions/3209706/why-the-form-load-cant-catch-exception)
*   [为什么我的异常被我的表单加载处理程序吞没了？](http://blog.adamjcooper.com/2011/05/why-is-my-exception-being-swallowed-in.html)

# php - 不能在 IF 语句中回显？

> ID：11662227
> 
> 赞同：1
> 
> 时间：2012-07-26T04:11:36.910
> 
> 标签：php, if-statement, conditional, echo

我遇到了最严重的错误......下面的代码按预期运行并按预期访问`if`语句的两半（我可以说是因为我将“TRUE”和“FALSE”都添加到错误日志中并得到它们在导致它们的条件的输出上方添加）。

但是当我访问 的`TRUE`部分时`if`，由于某种原因它没有回显。我知道代码部分没有被跳过（因为`error_log("TRUE");`仍然运行）。

## 代码摘要：

遍历状态列表，输出 HTML 标记的一半（有条件地添加中间位），然后输出结束的一半。

```
function createStateOptions($country, $state) {
    $sql = "SELECT * FROM tbl_state WHERE disabled != true AND deleted != true AND country = :country ORDER BY state ASC";
    $result = executeSQL($sql, array(':country' => $country));
    if (is_array($result)) {
        foreach ($result as $record) {
            echo '<option value="' . htmlentities($record["state"], ENT_QUOTES) . '" ';
            if($state == $record["state"]) {
                echo " selected";
                error_log("TRUE");
            } else {
                error_log("FALSE");
            }
            echo '>' . htmlentities($record["state"], ENT_QUOTES) . '</option>';
            error_log("'".$state."' == '".$record["state"]."'"); 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:44:37.270

尝试构建一个字符串，然后在最后回显

```
function createStateOptions($country, $state) {
  $output = '';
  $sql = "SELECT * FROM tbl_state WHERE disabled != true AND deleted != true AND country = :country ORDER BY state ASC";
  $result = executeSQL($sql, array(':country' => $country));
  if (is_array($result)) {
    foreach ($result as $record) {
        $output = '<option value="' . htmlentities($record["state"], ENT_QUOTES) . '" ';
        if($state == $record["state"]) {
            $output .= " selected";
            error_log("TRUE");
        } else {
            error_log("FALSE");
        }
        $output .= '>' . htmlentities($record["state"], ENT_QUOTES) . '</option>';
        error_log("'".$state."' == '".$record["state"]."'"); 
        echo $output;
    }
  }
} 
```

# ruby-on-rails - 在创建模型实例时更新它的字段？（导轨）

> ID：11662238
> 
> 赞同：0
> 
> 时间：2012-07-26T04:12:33.067
> 
> 标签：ruby-on-rails, activerecord, crud, database-schema

我有 3 个模型/表：用户、任务和任务实例。Task 表就像任务的主列表，不与任何特定用户耦合，而 TaskInstance 表包含指示用户完成特定任务的记录。换句话说，TaskInstance 有一个 User id、一个 Task id 和一个状态布尔值。一个用户有许多任务实例。用户不共享 TaskInstances，他们每个人都有自己的集合。

当用户首次在网站上注册帐户时，我希望为该`User.task_instances`字段填充主列表中存在的每个任务的新任务实例。

根据我的阅读，我认为我必须使用 来执行此操作`before_create`，因为这应该在用户第一次保存之前更新它。到目前为止，我有：

```
class User < ActiveRecord::Base

    has_many :task_instances    

    before_create :populate_task_instances

    private

        def populate_task_instances
            #something here
        end
end 
```

到目前为止，我不确定该`populate_task_instances`方法中的内容。如何遍历 Task 表中的每条记录并为每条记录创建一个 TaskInstance，然后确保将 TaskInstances 的集合保存到用户的`task_instances`字段中？

我知道这很简单，但这是我第一次涉足 Rails。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T04:41:30.520

这是我认为的一种解决方案

```
def populate_task_instances
  self.task_instances = Task.all.map {|task| TaskInstance.new task_id: task.id}
end 
```

# r - 将一些行更改为列，将一些行保留在 R 数据框中的行中

> ID：11662241
> 
> 赞同：0
> 
> 时间：2012-07-26T04:13:08.793
> 
> 标签：r, dataframe

每当我看到这个问题时，我的大脑就会关闭。我认为对其他人来说会很简单。
我有一个非常大的数据框，可以这样简化：

```
day subject y variable
1   a   2.1
1   b   3.5
1   c   2.2
2   a   3.3
2   b   4.5
2   c   3.8
3   a   5.1
3   b   2.8
3   c   2.3
4   a   4.2
4   b   1.9
4   c   2.5
5   a   4.9
5   b   3.8
5   c   3.4 
```

我想要按主题列，例如：

```
a     b     c
2.1   3.5   2.2
3.3   4.5   3.8
5.1   2.8   2.3
4.2   1.9   2.5
4.9   3.8   3.4 
```

如果有人让我走到这一步，我可以轻松地创建一个新专栏好几天。我在数据处理方面做得越来越好，但有时我仍然会被这样的事情困住。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T04:22:52.583

使用基地：

```
dat <- structure(list(day = c(1L, 1L, 1L, 2L, 2L, 2L, 3L, 3L, 3L, 4L, 
4L, 4L, 5L, 5L, 5L), subject = structure(c(1L, 2L, 3L, 1L, 2L, 
3L, 1L, 2L, 3L, 1L, 2L, 3L, 1L, 2L, 3L), .Label = c("a", "b", 
"c"), class = "factor"), y.variable = c(2.1, 3.5, 2.2, 3.3, 4.5, 
3.8, 5.1, 2.8, 2.3, 4.2, 1.9, 2.5, 4.9, 3.8, 3.4)), .Names = c("day", 
"subject", "y.variable"), class = "data.frame", row.names = c(NA, 
-15L))

unstack(dat, y.variable~subject)

    a   b   c
1 2.1 3.5 2.2
2 3.3 4.5 3.8
3 5.1 2.8 2.3
4 4.2 1.9 2.5
5 4.9 3.8 3.4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T04:38:18.933

以一种简单的方式，您可以这样做：

```
df <- data.frame(Subject = c("a","b","c","a","b","c","a","b","c","a","b","c","a","b","c"), y.variable = c(2.1, 3.5, 2.2, 3.3, 4.5,3.8, 5.1, 2.8, 2.3, 4.2, 1.9, 2.5, 4.9, 3.8, 3.4))
ind.a <- which(df$Subject == "a")
ind.b <- which(df$Subject == "b")
ind.c <- which(df$Subject == "c")

data.frame(a=df$y.variable[ind.a],b=df$y.variable[ind.b],c=df$y.variable[ind.c])
    a   b   c
1 2.1 3.5 2.2
2 3.3 4.5 3.8
3 5.1 2.8 2.3
4 4.2 1.9 2.5
5 4.9 3.8 3.4 
```

# exception - SQLAlchemy 错误处理 - 它是如何完成的？

> ID：11662244
> 
> 赞同：25
> 
> 时间：2012-07-26T04:13:34.320
> 
> 标签：exception, sqlalchemy

我想处理存在主键或唯一键冲突的情况，即重复条目。为此，我正在捕获`IntegrityError`，它可以很好地捕获错误。问题是，我似乎找不到任何简单的错误消息或错误代码来检查。我得到的只是`IntegrityError.message`属性，它是一个如下所示的字符串：

> （IntegrityError）（1062，“重复条目'foobar'键'name'”）

这不是很有帮助。使用它，我将不得不开始为他们的代码和消息解析错误消息。调用`dir`异常仅显示以下属性：

> 'args'、'connection_invalidated'、'instance'、'message'、'orig'、'params'、'statement'

`args`只是一个包含上述字符串的单项元组，并且`params`是我尝试插入的数据。我似乎找不到任何方法来确定这实际上是一个重复的键错误，而不必开始使用正则表达式或其他东西解析错误消息。

任何人都可以对这个问题有所了解吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-26T04:13:34.320

通过更仔细地阅读文档，我在编写问题时发现了这一点。我仍然会发布这个，因为它可能对某人有帮助。

在 SQLAlchemy [DBAPIError的文档中，](http://docs.sqlalchemy.org/en/latest/core/exceptions.html#sqlalchemy.exc.DBAPIError) [IntegrityError](http://docs.sqlalchemy.org/en/latest/core/exceptions.html#sqlalchemy.exc.IntegrityError)是从该文档中继承的，它解释了异常只是底层数据库 API 错误的包装，并且原始错误保存为`orig`异常。果然，调用`e.orig.args`我得到一个组织良好的元组：

> （1062，“重复条目 'foobar' 键 'name'”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-13T11:24:44.123

据我所知，唯一的方法是解析异常中的错误字符串。我找不到任何指定错误的元组、违反唯一性约束的列和值。

具体来说，可以使用子字符串搜索运算符或正则表达式来搜索异常消息。例如：

```
 db.session.add(SupplierUser(supplier_id=supplier_id, username=username, password=password, creator=user))
    try:
        db.session.commit()
    except IntegrityError as err:
        db.session.rollback()
        if "UNIQUE constraint failed: user.username" in str(err):
            return False, "error, username already exists (%s)" % username
        elif "FOREIGN KEY constraint failed" in str(err):
            return False, "supplier does not exist"
        else:
            return False, "unknown error adding user" 
```

但是，这些字符串可能会很长，因为包含 SQL 语句，例如：

```
(sqlite3.IntegrityError) UNIQUE constraint failed: user.username [SQL: 'INSERT INTO user (username, password_hash, created_time, creator_id, role, is_active, supplier_id) VALUES (?, ?, ?, ?, ?, ?, ?)'] [parameters: ('bob', ... 
```

因此，如果您搜索数据库错误消息，您将最小化解析异常的错误处理延迟，而无需从 sqlalchemy 添加信息。这可以通过检查 err.args 来完成，它应该更小：

```
'(sqlite3.IntegrityError) UNIQUE constraint failed: supplier_user.username',) 
```

更新的示例：

```
 db.session.add(SupplierUser(supplier_id=supplier_id, username=username, password=password, creator=user))
    try:
        db.session.commit()
    except IntegrityError as err:
        db.session.rollback()
        err_msg = err.args[0]
        if "UNIQUE constraint failed: supplier_user.username" in err_msg:
            return False, "error, supplier username already exists (%s)" % username
        elif "FOREIGN KEY constraint failed" in err_msg:
            return False, "supplier does not exist"
        else:
            return False, "unknown error adding user" 
```

注意我在这里使用的错误语法是针对 sqlite3 的。解析 mysql 异常错误消息，例如：

```
(1062, "Duplicate entry 'usr544' for key 'username'") 
```

可以使用适当的正则表达式来完成。请注意，它看起来像一个元组，但它实际上是一个字符串（sqlalchemy 版本 1.1.3 和 mysql 5.5）。

例如：

```
 except IntegrityError as err:
        db.session.rollback()
        if re.match("(.*)Duplicate entry(.*)for key 'username'(.*)", err.args[0]):
    .... etc .... 
```

# android - 如何在 android 4.0.3 中解析 SOAP？

> ID：11662245
> 
> 赞同：0
> 
> 时间：2012-07-26T04:13:34.927
> 
> 标签：android, parsing, soap, android-4.0-ice-cream-sandwich

我想在 android 4.0.3 中解析一个 SOAP，我尝试使用 SOAP 解析它的正常方式在 2.3.6[Device] 中运行良好，但在 4.0.3[emulator] 中运行良好。请提供您对此的专业知识。我已添加以下代码供您参考。谢谢。

```
String CallWebService(String url, String soapAction, String envelope) {
    final DefaultHttpClient httpClient = new DefaultHttpClient();
    // request parameters
    HttpParams params = httpClient.getParams();
    HttpConnectionParams.setConnectionTimeout(params, 10000);
    HttpConnectionParams.setSoTimeout(params, 15000);
    // set parameter
    HttpProtocolParams.setUseExpectContinue(httpClient.getParams(), true);
    // POST the envelope
    HttpPost httppost = new HttpPost(url);
    // add headers
    httppost.setHeader("soapaction", soapAction);
    httppost.setHeader("Content-Type", "text/xml; charset=utf-8");
    String responseString = "";
    try {
        // the entity holds the request
        HttpEntity entity = new StringEntity(envelope);
        httppost.setEntity(entity);
        // Response handler
        ResponseHandler<String> rh = new ResponseHandler<String>() {
            // invoked when client receives response
            public String handleResponse(HttpResponse response)
                    throws ClientProtocolException, IOException {
                // get response entity
                Log.v(TAG, "01");
                HttpEntity entity = response.getEntity();
                // read the response as byte array
                StringBuffer out = new StringBuffer();
                byte[] b = EntityUtils.toByteArray(entity);
                // write the response byte array to a string buffer
                out.append(new String(b, 0, b.length));
                return out.toString();
            }
        };
        responseString = httpClient.execute(httppost, rh);
    } catch (Exception e) {
        Log.v("exception", e.toString());
    }
    // close the connection
    httpClient.getConnectionManager().shutdown();
    return responseString;
} 
```

DocumentBuilder解析不生成，这是代码

```
 @SuppressWarnings("unused")
    public final static Document XMLfromString(String xml) {

        Document doc = null;

        try {
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is);

        } catch (ParserConfigurationException e) {
            System.out.println("XML parse error: " + e.getMessage());
            return null;
        } catch (SAXException e) {
            System.out.println("Wrong XML file structure: " + e.getMessage());
            return null;
        } catch (IOException e) {
            System.out.println("I/O exeption: " + e.getMessage());
            return null;
        }

        return doc;

    } 
```

# ios - 将 UIScrollView 复制到 UIScrollView

> ID：11662248
> 
> 赞同：0
> 
> 时间：2012-07-26T04:13:44.253
> 
> 标签：ios, uiscrollview

我有一个相机视图，用户可以使用滚动视图放大和缩小，没问题。

问题是当我需要将相同的精确缩放和位置应用到另一个滚动视图时，一切都出错了。我不仅不太确定如何准确地做到这一点，而且它呈现出一些奇怪的行为。

所以我有

previewScrollView - 用于预览相机图像的滚动视图。

scrollview - 所拍摄照片的滚动视图。

我有两个单独的视图，一个是 UIView 类型的预览相机层，然后再拍照

以及拍摄照片后的 UIPictureView

所以我有这样的东西。

```
_viewToScroll = photoImage;
[_scrollView setZoomScale:[_previewScrollView zoomScale]];
[_scrollView setContentScaleFactor:[_previewScrollView contentScaleFactor]];
[_scrollView zoomToRect:CGRectMake(-160, -240, 320 / _scrollView.zoomScale, 480 / _scrollView.zoomScale)animated:NO];

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    return _viewToScroll;
} 
```

没有任何结果，只是坐在那里未缩放。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T03:38:30.890

我用以下方法解决了

```
[_scrollView setZoomScale:[_previewScrollView zoomScale]];
[_scrollView setContentOffset:[_previewScrollView contentOffset]]; 
```

并在协议功能中

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    return scrollView;
} 
```

# perl - 从哈希中删除第一个键值对

> ID：11662249
> 
> 赞同：2
> 
> 时间：2012-07-26T04:13:58.263
> 
> 标签：perl

我有一个这样的哈希：

```
%hash = ('test' => 1,
     'test1' => 2,
     'test2' => 3,); 
```

我想对此哈希进行排序并从哈希中删除第一个键值对。如果我这样做，（排序键 %hash）[0]，我可以访问第一个键。但是，如何删除该键值对？

如果我做

```
delete (sort keys %hash)[0] 
```

Perl 抛出一个错误，

> 删除参数不是 HASH 或 ARRAY 元素

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-26T04:17:51.413

该表达式`(sort keys %hash)[0]`返回一个字符串，因此您不能将其传递给`delete`. 你必须告诉`delete`你要从哪个哈希中删除。它应该是这样的：

```
delete $hash{(sort keys %hash)[0]}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T04:17:48.013

首先，哈希没有“顺序”，但如果你想删除按字母顺序排在第一位的条目，你可以这样做：

```
delete $hash{(sort keys %hash)[0]}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T08:18:18.683

如果您希望多次执行此操作，那么您应该保留一个排序的哈希键数组。

像这样

```
use strict;
use warnings;

use Data::Dump;

my %hash = (
  testA => 1,
  testB => 2,
  testC => 3
);

my @keys = sort keys %hash;

dd \%hash;
while (@keys) {
  delete $hash{shift @keys};
  dd \%hash;
} 
```

**输出**

```
{ testA => 1, testB => 2, testC => 3 }
{ testB => 2, testC => 3 }
{ testC => 3 }
{} 
```

# asp.net - ASP.NET 模拟中的域名

> ID：11662250
> 
> 赞同：0
> 
> 时间：2012-07-26T04:14:03.410
> 
> 标签：asp.net

在 ASP.NET 中，我们可以模拟域而不是用户吗？我知道以下是可能的：

```
<identity impersonate="true" userName="domain\userid" password="Password"/>

Can I perform something like following:
 <identity impersonate="true" userName="domain"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:21:22.053

我不认为这是可能的。为了模拟，您需要一个密码，而域组并不完全有密码。这显然违背了架构。

只是想知道，为什么您需要模拟整个域？如果您分享它，可能会有更好的方法来解决您的问题。:)

# java - Android：在其他线程中操作 UI 控件，但是

> ID：11662254
> 
> 赞同：0
> 
> 时间：2012-07-26T04:15:08.437
> 
> 标签：java, android

```
beginButton.setOnClickListener(new Button.OnClickListener() {
    @Override
    public void onClick(View v) {
        PlayThread playThread = new PlayThread();
        Thread thread = new Thread(playThread);

        thread.start();
    }
});

public class PlayThread implements Runnable {
    @Override
    public void run() {
        beginButton.setClickable(false);
        pauseButton.setClickable(true);
        messageBool = true;
        int maxProgressBar = playProgressBar.getMax();
        int currentInt = playProgressBar.getProgress();

        for(; currentInt <= maxProgressBar; ++currentInt)
        {
            if(messageBool == false)
            {
                break;
            }
            playProgressBar.incrementProgressBy(1);
            try {
                Thread.sleep(400);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

        if(currentInt > maxProgressBar)
        {
            playProgressBar.setProgress(0);
            beginButton.setClickable(true);
            pauseButton.setClickable(false);
        }
    }
}; 
```

大家好。这段代码有问题吗？我知道我们**不能在除***UI thread*之外的其他线程中操作 UI 的控件。但是这段代码运行**正常**。那么有什么问题或者我想念什么？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T04:57:15.580

如果您不`View`以需要在屏幕上重新绘制的方式修改它，那么您是安全的。`setClickable`仅在您要设置文本或修改其属性时才修改其属性之一`LayoutParams`，`View`这将导致无效的操作，*从错误线程触摸*`View`的可怕异常...等将出现。

 *它`ProgressBar`是线程安全的，可以从任何线程中使用。*

# javascript - Javascript 代码 - 代码检查

> ID：11662255
> 
> 赞同：0
> 
> 时间：2012-07-26T04:15:12.743
> 
> 标签：javascript

我是 Javascript 新手，正在尝试学习一些基础知识。

您能否检查我是否正确执行了以下操作？如果没有，请概述我还没有做什么。

我不得不：

*   将用户的出生月份计算为从 1 月 = 0 到 12 月 = 11 的数字。
*   取输入的字符串
*   获取作为前三个字符的子字符串
*   转换为大写
*   在月份缩写字符串中查找三个字母缩写的起始位置
*   将此除以 3
*   （这不是找到月份编号的唯一方法，但它允许我们练习在字符串中搜索）

我的代码：

```
var year = prompt('Enter year of birth as a 4 digit integer');  

var month = prompt('Enter the name of the month of birth');
// Chop everything after the first 3 characters and make it lowercase
month = month.substr(0,3).toLowerCase();
// Store your array in months, differently named than the month input
var months = ["jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct",
"nov", "dec"];  

// We then use array.indexOf() to locate it in the array
var pos = months.indexOf(month);
if (pos >= 0) {
// valid month, number is pos
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:37:48.830

因为你只是想知道你的代码是否正确，但我认为你写得很好，如果你仍然想使用 javascript 的最佳实践，你可以参考下面的链接，你会在 google 上找到很多链接。

[http://www.javascripttoolbox.com/bestpractices/](http://www.javascripttoolbox.com/bestpractices/)

[http://net.tutsplus.com/tutorials/javascript-ajax/24-javascript-best-practices-for-beginners/](http://net.tutsplus.com/tutorials/javascript-ajax/24-javascript-best-practices-for-beginners/)

顺便说一句，你的功能的一行代码也可以写成：

```
if(months.indexOf(month.substr(0,3))>=0) alert("present") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T04:38:48.963

“月份缩写字符串”应该是`"JANFEBMARAPRMAYJUNJULAUGSEPOCTNOVDEC"`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T04:58:36.530

您的代码显然不遵循给定的说明：

*   转换为大写
*   在月份缩写字符串中查找三个字母缩写的起始位置
*   将此除以 3
*   ...练习在字符串中搜索

但确实满足将*用户的出生月份计算为数字*的要求。我认为数组搜索甚至优于字符串搜索（通过在月份名称（`"anf"`等）之间查找字符串没有害处，并且由于不检查这些可能性也更快），但他们似乎希望你用他们的方式来做。

# php - yii 如何在 BootDetailView 显示来自另一个模型的数据

> ID：11662261
> 
> 赞同：1
> 
> 时间：2012-07-26T04:15:53.487
> 
> 标签：php, yii, yii-extensions

问：我怎样才能像这样显示 BootDetailView。

```
Users

name : aa
company : test
department : dep1
section : sec1.1
team : team1.1.1 
```

我有 2 tbls（部门和用户）

这是部门tbl结构

```
department
id | name      | p_id | company_id
1  | dep1      | 0    | 1
2  | dep2      | 0    | 1
3  | sec1.1    | 1    | 1
4  | sec2.1    | 2    | 1
5  | team1.1.1 | 3    | 1
6  | team1.1.2 | 3    | 1
7  | team2.1.1 | 4    | 1 
```

这是用户 tbl 结构

```
user
id | name | company_id | team_id
1  | aa   | 1          | 5
2  | bb   | 1          | 5
3  | cc   | 1          | 7
4  | dd   | 1          | 6
5  | ee   | 1          | 6 
```

我在用户模型中添加了关系

```
public function relations()
    {
        // NOTE: you may need to adjust the relation name and the related
        // class name for the relations automatically generated below.
        return array(
            'ranks' => array(self::BELONGS_TO, 'Rank', 'rank_id'),
            'companies' => array(self::BELONGS_TO, 'Company', 'company_id'),
            'departments' => array(self::BELONGS_TO, 'Department', 'team_id'),
        );
    } 
```

此视图（CGridView 在 index.php（视图）中使用）

```
<?php $this->widget('bootstrap.widgets.BootDetailView', array(
            'data'=>$model,
            'attributes'=>array(
                //array('name'=>'id', 'label'=>'ID'),
                array('name'=>'login_name', 'label'=>'Name'),
                array('name'=>'first_name', 'label'=>'First Name'),
                array('name'=>'last_name', 'label'=>'last Name'),
                array('name'=>'email', 'label'=>'Email'),
                array('name'=>'created', 'label'=>'Created'),
                array('name'=>'ranks.name', 'label'=>'Rank'),
                array('name'=>'companies.name', 'label'=>'Company'),
                array('name'=>'departments.name', 'label'=>'Team'),
            ),
        )); ?> 
```

这是控制器

```
public function actionView($id)
{
    $model = $this->loadModel($id);
    $sql = 'SELECT id, name FROM rank r WHERE r.id = '. $model->rank_id;
    $rank = Yii::app()->db->createCommand($sql)->queryAll();

    $sql = 'SELECT id, name FROM company c WHERE c.id = '. $model->company_id;
    $company = Yii::app()->db->createCommand($sql)->queryAll();         

    $dst = $this->getDST($model->team_id);

    $this->render('view',array(
        'model'=>$model,
        'rank'=>$rank[0]['name'],
        'company'=>$company[0]['name'],
        'department'=>$dst['department'],
        'section'=>$dst['section'],
        'team'=>$dst['team'],
    ));
}

public function getDST($team_id) // Getting the Department, Section and Team
{
    $records = Department::model()->find('id=:id', array(':id'=>$team_id));
    if($records->p_id == 0 ) {
    $dst['department'] = $model->team_id;
        $dst['section'] = NULL;
        $dst['team'] = NULL;
    } else {
        $records = Department::model()->find('id=:id', array(':id'=>$records->p_id));
        if($records->p_id == 0 ) {
            $dst['department'] = $records->id;
            $dst['section'] = $model->team_id;
            $dst['team'] = NULL;
        } else {
            $dst['section'] = $records->id;
            $dst['team'] = NULL;
            $records = Department::model()->find('id=:id', array(':id'=>$records->p_id));
            if($records->p_id == 0 ) {
                $dst['department'] = $records->id;
                $dst['team'] = $model->team_id;
            }
        }
    }   
    return $dst;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:20:11.560

在 Yii 中关系很简单：

```
// User model
public function relations()
{
    return array(
        'rank' => array(self::BELONGS_TO, 'Rank', 'rank_id'),
        'company' => array(self::BELONGS_TO, 'Company', 'company_id'),
        'department' => array(self::BELONGS_TO, 'Department', 'team_id'),
    );
} // User have only one rank, company and department

// Department model
public function relations()
{
    return array(
        'parent'   => array(self::BELONGS_TO, 'Department', 'p_id'),
        'children' => array(self::HAS_MANY, 'Department', 'p_id'),
        'company'  => array(self::BELONGS_TO, 'Company', 'company_id'),
        'users'    => array(self::HAS_MANY, 'User', 'team_id'),
    );
} 
```

因为 : class BootDetailView extends CDetailView
就足够了：

```
// usercontroller
function actionView($id)
{
    $this->render('view', array('model' => $this->loadModel($id));
    // or for optimize sql query
    $this->render('view', array('model' => User::model()->with(array('rank', 'company', 'department'))->findByPk($id));
}

// view.php
$details = array(
         'login_name',
         'first_name',
         'last_name',
         'email',
         'rank.name',
         'company.name',
     );
$departments = array();
$d = $model->department;
$departments[] = 'department.name';
$s = 'parent.';
while ($d->parent != null) {
    $departments[] = 'department.'.$s.'name';
    $s .= 'parent.';
    $d = $d->parent;
}

$this->widget('bootstrap.widgets.BootDetailView', array(
    'data'=>$model,
    'attributes'=> array_merge($details, $departments),
)); 
```

# mysql - Lion上的MYSQL - 设置root密码

> ID：11662268
> 
> 赞同：1
> 
> 时间：2012-07-26T04:17:03.150
> 
> 标签：mysql, osx-lion

我刚刚在lion中安装了mysql，现在正在尝试设置root密码。只需键入以下内容，我就可以毫无问题地进入 mysql：

```
mysql 
```

但是，当我尝试以 root 用户身份进入时，这应该让我毫无问题地进入，因为我还没有通过键入设置 root 密码，但我被拒绝了：

```
mysql -u root 
```

错误：

连接到“localhost”的服务器失败错误：“用户“root”@“localhost”的访问被拒绝（使用密码：否）”

我在这个问题上做了很多搜索，但没有一个能解决这个问题。无论是否设置了密码，我都被拒绝...我之前确实安装了XAMPP，我刚刚删除了我设置root密码的位置，但我无法想象两者之间会有任何冲突安装...特别是因为 XAMPP 版本已被删除。我已经尝试过像 -u root -p root 这样的默认凭据。

为什么这很难做到。我想继续我的训练。跆拳道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T08:19:20.947

正如你提到的那样`mysql -u root -p`并`mysql_secure_installation`抛出同样的错误。所以尝试安装`mysql-server`为

```
apt-get install mysql-server 
```

# javascript - Enter 在 Internet Explorer 和 Firefox 中不起作用

> ID：11662276
> 
> 赞同：0
> 
> 时间：2012-07-26T04:18:22.227
> 
> 标签：javascript, jquery

此功能在 Internet Explorer 和 Firefox 中不起作用。在 Firefox 中，它返回以下错误：

> TypeError: e is undefined
> [Break On This Error]
> ...e.which == "number") ？e.which : e.keyCode; keyCodeEntered = (e.which) ? e.哪个...

功能：

```
function onSearchPhraseKeyDown(e) {
    var buttonId = '<%=SearchButton.ClientID %>';
        if (!e)
            var e = (typeof e.which == "number") ? e.which : e.keyCode;
        keyCodeEntered = (e.which) ? e.which : window.event.keyCode;

        if ((keyCodeEntered == 13) || (keyCodeEntered == 13)) {
            document.getElementById(buttonId).click();
            return false;
        } else {
            return true;
        }
} 
```

任何人都可以看到有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T04:27:41.753

试试这个代码：

```
function onSearchPhraseKeyDown(e) {
    var buttonId = '<%=SearchButton.ClientID %>';
    var e = e || event;
    var key = e.keyCode || e.which;
    if (key===13) {
        document.getElementById(buttonId).click();
        return false;
    }
} 
```

如果您使用`return false`取消此事件的默认行为，我建议您改为使用`e.preventDefault()`，如下所示：

```
if (key===13) {
    document.getElementById(buttonId).click();
    e.preventDefault();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T04:33:29.703

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<TITLE> New Document </TITLE>
<META NAME="Generator" CONTENT="EditPlus">
<META NAME="Author" CONTENT="">
<META NAME="Keywords" CONTENT="">
<META NAME="Description" CONTENT="">
</HEAD>
<script>
function checkEnter(event) {
if(event && event.which && event.which == 13) {

    alert("enter pressed");
}else if(event && event.keyCode && event.keyCode == 13) {

    alert("enter pressed");

}
return true;
}
</script>
<BODY  >
<div contenteditable id="temp"  style ="height:220px;background:white;width:545px;text-align:left;overflow:auto;margin:0px;border:solid 1px #999999;font-family:Arial;font-size: 10pt;color: black;" onKeyPress="return checkEnter(event)">

</BODY>
</HTML> 
```

**请试试这个**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T05:02:42.927

这是基于我认为您要完成的任务的另一种选择：

如果您尝试在用户在某些输入字段中按 Enter 时进行表单回发，则可以使用面板控件或 HtmlForm 的 DefaultButton 属性。这是使用 HtmlForm.DefaultButton 属性的示例：

**默认.aspx**

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="Default.aspx.vb" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server" defaultbutton="SubmitButton">
    <div>
        <asp:TextBox ID="InputTextBox" runat="server" />
        <asp:Button ID="SubmitButton" runat="server" Text="Submit" />
        <asp:Label ID="InputValue" runat="server" />
    </div>
    </form>
</body>
</html> 
```

**默认.aspx.vb**

```
Partial Class _Default
    Inherits System.Web.UI.Page

    Protected Sub SubmitButton_Click(sender As Object, e As System.EventArgs) Handles SubmitButton.Click
        InputValue.Text = InputTextBox.Text
    End Sub
End Class 
```

运行此示例，标签将包含文本框的值，作为证明回发发生的简单方法。这种方法有一些注意事项，即 DefaultButton 属性的目标必须是 Button 或 ImageButton。不允许使用链接按钮。更多信息在以下链接：

[system.web.ui.webcontrols.panel.defaultbutton](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.panel.defaultbutton.aspx)

[system.web.ui.htmlcontrols.htmlform.defaultbutton](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlform.defaultbutton.aspx)

# java - 通过 xslt 将其转换为 HTML 时更改 xml 内容

> ID：11662278
> 
> 赞同：1
> 
> 时间：2012-07-26T04:18:42.493
> 
> 标签：java, xslt

我需要通过 XSLT 和 java 将 XML 文件转换为 HTML 格式。其中一个标签包含 Intranet 页面的链接，例如：

http://mycompany.com&mypage=xyz&version=999

现在我想在生成的 html 的 href 属性中使用这个值。

在使用这个值之前，我想去掉“amp;” 并更改网址，例如将其附加用户名。

我可以通过一些 XSLT 函数来做到这一点，还是必须用 java 代码替换它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T04:31:39.947

> 我可以通过一些 XSLT 函数来做到这一点，还是必须用 java 代码替换它？

这在 XSLT 中是微不足道的。

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:param name="pUserName" select="'someUser'"/>

 <xsl:template match="someLink">
     <a href="{substring-before(., '?')}/{$pUserName}">someLink</a>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于此 XML 文档时**：

```
<someLink>http://mycompany.com?mypage='xyz'&amp;version='999'</someLink> 
```

**产生想要的正确结果**：

```
<a href="http://mycompany.com/someUser">someLink</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T04:35:27.543

尝试 fn:replace(string,pattern,replace) 和 fn:concat(string,string,...)

返回通过用替换参数替换给定模式创建的字符串示例：replace("Bella Italia", "l", " *") 结果：'Be* *a Ita*ia'

示例：replace("Bella Italia", "l", "") 结果：'Bea Itaia'

fn:concat(string,string,...) 返回字符串的串联 示例：concat('XPath ','is ','FUN!') 结果：'XPath is FUN!'

参考：[http ://www.w3schools.com/xpath/xpath_functions.asp](http://www.w3schools.com/xpath/xpath_functions.asp)

注意：确保您使用的是 XSLT 2.0 版，因为替换功能仅在 XSLT 2.0 版中可用，在 1.0 版中不可用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T04:31:38.353

首先，您给定的链接不起作用，

> [http://mycompany.com?mypage=xyz&version=999。](http://mycompany.com?mypage=xyz&version=999.)

我认为您只是想将您的 xml 转换为 java 中的 html。

对于那次访问这个讨论。 [基于 java 的模板引擎的建议](https://stackoverflow.com/questions/174204/suggestions-for-a-java-based-templating-engine)

这是由模板引擎完成的，java中广泛使用的模板引擎是Freemarker和velocity。其他的也可以。

这是 Java 模板引擎的列表。 [Java 模板引擎](http://en.wikipedia.org/wiki/Template_engine_%28web%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T04:44:34.530

如果您想按原样在 URL 中写入 & 字符而不是 & 使用禁用输出转义。使用 concat 函数将您想要的任何其他内容附加到 url。

```
<xsl:value-of select="$url" disable-output-escaping="yes"/> 
```

# jquery - 如何使用 jquery 显示数据库中的数据？

> ID：11662280
> 
> 赞同：0
> 
> 时间：2012-07-26T04:19:06.543
> 
> 标签：jquery, codeigniter

这是我学习 jquery 的第一周，我使用这个 jquery 在我的页面上插入多行

```
$(document).ready(function() {
        var count = 0;

        $("#add_btn").click(function(){
                count += 1;
            $('#container').append(
                         '<tr class="records">'
                     + '<td ><div id="'+count+'">' + count + '</div></td>'
                     + '<td><input id="task_' + count + '" name="task_' + count + '" type="text"></td>'
                     + '<td><input id="person_' + count + '" name="person_' + count + '" type="text"></td>'
                     + '<td><input id="time_' + count + '" name="time_' + count + '" type="text"></td>'
                     + '<td><a class="remove_item" href="#" >Delete</a>'
                     + '<input id="rows_' + count + '" name="rows[]" value="'+ count +'" type="hidden"></td></tr>'
                );
            });

            $(".remove_item").live('click', function (ev) {
            if (ev.type == 'click') {
            $(this).parents(".records").fadeOut();
                    $(this).parents(".records").remove();
        }
        });
    }); 
```

这就是我在页面上加载 jquery 的方式

```
<table>
        <tr>
        <td><input type="button" name="add_btn" value="Add" id="add_btn"></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
    </tr>
        <tr>
            <td>No</td><td>Task</td><td>Person Responsible</td><td>Due Date</td><td>&nbsp;</td>
        </tr>
        <tbody id="container">

    </tbody>
    <tr>
      </tr>
    </table> 
```

但我想更改人员行`'<td><input id="person_' + count + '" name="person_' + count + '" type="text"></td>'`以显示我数据库中人员的列表数据

有人可以给我举个例子吗？我使用 codeigniter 来构建这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T04:58:48.587

您可以使用[jquery.get()](http://api.jquery.com/jQuery.get/)（或 $.ajax()，参见示例）来调用服务器上的方法。服务器上请求的方法从数据库中收集数据并将其传递给 jquery.get() 函数。如果返回的数据是 json 格式，可以使用[jquery.getJSON()](http://api.jquery.com/jQuery.getJSON/)代替。

# c++ - 字符串中的子字符串计算

> ID：11662288
> 
> 赞同：0
> 
> 时间：2012-07-26T04:19:50.747
> 
> 标签：c++, string, algorithm, suffix-array

对于以下问题，我很难找到比 O(n^2) 更好的方法。

我得到一个字符串，例如`xyxxz`.

现在我需要在给定字符串的每个前缀中找到匹配字符的总数。

在这里，字符串的可能前缀是：

```
 xyxxz : matching characters is 5
 yxxz  : matching characters is 0 (since 1st character doesnt match)
 xxz   : matching characters is 1
 xz    : matching characters is 1
 z     : matching characters is 0 
```

这应该是输出。我做了以下代码：

```
cin>>str;
len=str.length();
for(i=0;i<len;i++){
    sum=0;
    k=i;
    for(int j=0;j<len;j++)
    {
        if(str[k] == str[j]){
           sum++;
           k++;
        }
        else
            break;
    }
    cout<<sum<<"  ";  //I get the output 5 0 1 1 0
} 
```

但它是 O(n^2)。我想要一个更好的方法：可能是 O(n) 或 O(nlogn)。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T05:24:06.003

这可以使用以下过程在线性时间内完成：

1.  构造后缀数组 SA 以及 LCP 数组（最长公共前缀数组）。后缀数组是字符串所有后缀的字典排序列表（类似于您在示例中给出的列表，但按字典顺序排序。请注意，每个后缀由其在原始字符串中的起始位置表示，即每个后缀一个整数） . LCP 也是一个整数数组，长度与后缀数组相同。在每个位置 i>0 处，LCP[i] 是后缀数组的第 i 个后缀与第 (i-1) 个后缀共有的最长前缀；我们设置 LCP[0]:=0。

    可以使用 Skew 算法（也称为 DC 算法）在线性时间内构造后缀数组，并且可以在 O(n) 时间内在后缀数组旁边构造 LCP 数组。有关进一步的想法和实现，请参阅有关[最先进的后缀数组算法的 SO 帖子。](https://stackoverflow.com/questions/7857674/whats-the-current-state-of-the-art-suffix-array-construction-algorithm)

2.  确定后缀数组中完整字符串的位置（例如，通过线性扫描后缀数组以查找包含整数 0 的条目）。

3.  从该位置开始，沿着 LCP 数组向左和向右移动，以识别每个后缀与完整字符串共有的最长前缀。我已经在[这个较早的 SO 帖子](https://stackoverflow.com/a/11096280/777186)中详细描述了这个过程。

**备注**虽然这需要不超过 O(n) 的内存和时间，因此理论上是最优的，但这是一个非常复杂的过程，并且只有在字符串非常长时才会在实践中有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T05:16:02.303

使用后缀数组。后缀数组 DC3 将在 O(N) 时间内完成，其中 N 是原始字符串中的字符数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T04:44:39.513

如果为字符串构建后缀树，则可以遍历后缀树以查找匹配项的长度。与第一个字符不匹配的根节点的任何子节点的值都将为零，它的所有后代也是如此。然后，根节点的子节点的所有后代都至少有一个匹配，该匹配等于该边的匹配长度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T05:14:29.753

我不擅长计算 O 值。但这是您需要的另一种实现。我觉得效率高一点。

```
cin >> str;

len=str.length();
for(i=0;i<len;i++)
{
    sum=0;
    k=0;

    while(str[k + sum] == str[i + sum])
    {
            sum++;
    }
    cout << sum ;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T04:42:09.770

```
int strcoll (register const char *s1, register const char *s2)
{
    while (*s1 == *s2++) {
        if (*s1++ == '\0') {
            return 0;
        }
    }
    return *s1 - *--s2;
} 
```

此函数开始比较每个字符串的第一个字符。如果它们彼此相等，则继续下一个对，直到字符不同或直到到达表示字符串结尾的空字符。

> 返回一个整数值，表示字符串之间的关系：零值表示两个字符串相等。大于零的值表示第一个不匹配的字符在 str1 中的值大于在 str2 中的值；小于零的值表示相反。

# iphone - 自定义键盘建议

> ID：11662289
> 
> 赞同：0
> 
> 时间：2012-07-26T04:19:53.100
> 
> 标签：iphone, objective-c, ios, ios5, ios4

我正在尝试制作一个像下面这样的自定义键盘，他们在其中添加那一行键。您能否明智地指出某种方向代码。我已经阅读了文档。谢谢。

![在此处输入图像描述](../Images/40630b89dfaaef8c35f2c5feac30356d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T04:27:05.953

它不是自定义键盘，而是`UIView`附加到键盘的子类。您可以通过将`inputAccessoryView`您的属性设置为`UITextView`包含额外按钮的视图来执行此操作。

# php - list() 的 PHP 语法错误

> ID：11662294
> 
> 赞同：-5
> 
> 时间：2012-07-26T04:20:32.163
> 
> 标签：php

我以前从未在 php 中编码过，对此我有点陌生，我正在帮助我当地的社区中心修复他们的社区网站，我在尝试修复但没有的脚本上遇到了问题线索如何谁能提供解决方案？如果不是他们，如果你能指出我正确的学习方向，我也愿意这样做。

```
 if ( JmrphpbbHelper::getparam( "article_terms" ) && $view == "user" && $mode == "terms" )
{
    list(  ) = template  list ) = template    
} 
```

我从这一行得到语法错误：

```
 list(  ) = template  list ) = template 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T04:26:54.743

一件事是它缺少一个分号。如果这不起作用，我猜是'list（）=模板；' ?

如果你告诉我们那条线应该做什么，那也会帮助我们更好地帮助你

# php - php.ini 更改，但在 Ubuntu 上无效

> ID：11662295
> 
> 赞同：44
> 
> 时间：2012-07-26T04:20:44.097
> 
> 标签：php, linux, ubuntu, apache2

我想更改 PHP 上传文件大小的限制

这是输出 my [phpinfo](https://www.php.net/manual/en/function.phpinfo.php)的一些信息：

```
Configuration File (php.ini) Path    /etc/php5/apache2
Loaded Configuration File    /etc/php5/apache2/php.ini 
```

这是我的*php.ini*文件的内容：

```
upload_max_filesize = 50M
post_max_size = 50M
memory_limit = 128M 
```

然后我重新启动 Apache 2，但显示的 phpinfo 仍然是：

```
upload_max_filesize    2M 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-26T15:47:39.353

我已经解决了我的问题。

*php.ini*第 109 行有语法错误，所以接下来的 all 语法不执行。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-26T04:35:34.453

很有可能您没有修改*php.ini*文件的权限。如果您只是通过普通文件夹窗口浏览到它并单击它，[Gedit](https://en.wikipedia.org/wiki/Gedit)（或任何您的默认文本编辑器）将无法使用写入权限打开它。

您应该能够通过`sudo nano /etc/php5/apache2/php.ini`（然后在提示符处输入密码）然后更改变量来逃脱。然后确保*写出*( `Ctrl`+ `O`) 或确保在退出时确认保存。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-01-21T04:51:27.950

对于任何想知道为什么即使在所有指令都很好并在 ubuntu 上重新启动 apache 后仍未应用 php.ini 修改的人，请尝试使用 sudo 重新启动 apache

```
sudo service apache2 restart 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-05-07T22:39:13.463

我有同样的问题，这解决了我在文件夹 /etc/php5/cli/php.ini 中有 foound php.ini 我对其进行了更改

## 并重新启动 apache sudo apache2ctl restart

我已经更改 /etc/php5/apache2/php.ini 并使用 sudo service apache2 restart 重新启动 apache 但 symfony 没有看到更改

我写的，它可以帮助任何人

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-08-15T10:40:52.493

经过大约三个小时的调试（PHP 7），这是我在 Ubuntu 上解决此问题的方法

脚步

1.  运行[phpinfo()](https://www.php.net/manual/en/function.phpinfo.php)函数并观察加载的 PHP 配置文件 ( *php.ini* )在哪里

    [![在此处输入图像描述](../Images/95e5702819450b28bee518378b673067.png)](https://i.stack.imgur.com/zwF8J.png)

2.  'cd' 进入该目录并将其更新为新值

3.  重启你的服务器

4.  有用！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-11-30T13:20:21.980

我怀疑很多这样的问题正在经历，因为现在在许多新的 Apache 安装中默认使用[FastCGI 进程管理器(php-fpm)。](https://en.wikipedia.org/wiki/PHP#Installation_and_configuration)进行更改后，您需要重新启动快速 CGI 守护程序，而不是*httpd*。

请参阅*[何时 php.ini 似乎被忽略](https://www.citylinux.com/?topic=notes/php.ini.html)*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-29T14:16:40.030

我在 ubuntu 14.10 上使用命令：

须藤 /etc/init.d/apache2 重启

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-28T09:09:05.623

我也有同样的问题，但后来发现编辑 php.ini 文件需要 root 权限，所以打开终端并写了以下内容

```
gksudo gedit /etc/php5/apache2/php.ini 
```

它完美地工作！

# iphone - Xcode - 获取所有方法头的列表

> ID：11662299
> 
> 赞同：2
> 
> 时间：2012-07-26T04:21:32.770
> 
> 标签：iphone, ios, xcode, ipad

我有一个这样的 .m 文件：

```
- (void) myMethod1 {
  // bla bla
}

- (int) rotate:(int)value {
  // bla bla
}

- (myClass *) processObject:(myClass *)object {
  // bla bla
} 
```

我想得到这个：

```
- (void) myMethod1;
- (int) rotate:(int)value;
- (myClass *) processObject:(myClass *)object; 
```

或者换句话说，从 .m 中提取所有方法头。

在 Xcode/OSX 中可以做到这一点吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:34:05.273

您必须查看[Objective-c 运行时参考](https://developer.apple.com/library/mac/#documentation/cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)才能完成此类工作。这是获取此信息的示例[项目。](http://x-cake.ning.com/profiles/blogs/browsing-the-objc-runtime-on?xg_source=activity)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T04:45:38.260

正如评论中提到的，objc-runtime 方法对于面向人类的声明不是很有用（尽管如果结果是面向机器/代码生成的，它可能很有用）。

另一种选择是编写一个快速脚本/程序来从 .m 文件生成这些声明——只是一个快速的字符串解析器。如果你的写作风格是一致的，写起来不会花很长时间。

# encryption - 你有没有从代码中提取存储的加密密钥

> ID：11662300
> 
> 赞同：1
> 
> 时间：2012-07-26T04:21:37.640
> 
> 标签：encryption, obfuscation

我一直在研究如何最好地在代码中存储加密密钥。许多人给出的答案和建议是不要这样做，因为它可以从代码中获得。例如... [http://bit.ly/16wpVU](http://bit.ly/16wpVU)。

所以我的问题是，你做过这个吗？或者至少您已经完成了执行此操作所需的技术，但可能用于其他目的？它究竟是如何完成的，以便如果决定在代码中隐藏加密密钥，人们可以更好地为此做好准备？

谢谢何塞

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T15:47:51.943

我曾经对我们的 Suite-B 密钥协商与 Microsoft 的协商进行兼容性测试，结果密钥与某些密码套件不匹配。

使用 WinDBG，我能够逐步完成反汇编，识别它们 DLL 中的关键入口点，找到各种关键组件的来源，并准确找出它们的代码与 rfc 的差异。（奇怪的是，结果证明 rfc 是错误的。）

您当然希望避免在代码中明文输入密钥。我建议使用其他一些数据的哈希作为您的密钥。

在那之后，我担心的是一个有调试器的人。

我敢肯定还有其他人花时间思考如何使事情变得不可调试，但我个人认为难以调试的是在不同上下文中发生的操作：每次执行都会提前一点的状态机、不同的进程、中断处理程序等。当您无法在源代码中插入调试中断时，很难在其中安装调试器。

# ruby-on-rails - 在 Rails 方法中使用 Shell 命令切换服务/任务

> ID：11662301
> 
> 赞同：0
> 
> 时间：2012-07-26T04:21:41.753
> 
> 标签：ruby-on-rails, ruby-on-rails-3, shell, service, system

我的控制器中有一个由 Rails 应用程序中的链接触发的方法。一切都在开发模式下完美运行，但无论出于何种原因，它都无法在生产模式下运行。每当我调用其中一个命令时，它都会像试图做某事一样转动它的齿轮，但实际上从不做任何事情。然而，奇怪的是太阳黑子的 REINDEX 确实有效。我正在查看我的生产日志并监控每个服务创建的 PID 文件。此外，如果我在我的 SSH 终端会话中正常运行这些命令，它们工作正常。

```
 def toggle_service
    command = params[:string].to_s
    if command == 'stop_mailman_server'
      system("ruby #{::Rails.root}/script/mailman_daemon.rb stop")
    elsif  command == 'start_mailman_server'
      system("ruby #{::Rails.root}/script/mailman_daemon.rb start")
    elsif  command == 'start_search_server'
      system("rake sunspot:solr:start RAILS_ENV=#{Rails.env}")
    elsif  command == 'stop_search_server'
      system("rake sunspot:solr:stop RAILS_ENV=#{Rails.env}")
    elsif  command == 'reindex_search_server'
      system("rake sunspot:reindex RAILS_ENV=#{Rails.env}")
    end    
    redirect_to :back
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T22:45:46.977

我弄清楚了这个问题。在 mailman 和 sunspot solr 的这两种情况下，我的生产环境都需要对它正在创建文件的 pid 文件夹进行写访问。当我运行命令在终端中启动/停止服务时，它可以找到，但必须将该文件夹的权限提升到 rails/apache 用户。

# c# - 转换为四元数并返回的矩阵结果是否翻转了值？

> ID：11662306
> 
> 赞同：0
> 
> 时间：2012-07-26T04:22:39.780
> 
> 标签：c#, 3d, matrix, quaternions

我有一个 4x4 矩阵（行优先）类和一个四元数类，我正在尝试提供在两种表示之间转换以进行旋转的转换方法。

这是我从四元数转换为矩阵的转换函数，其中 _2 是 System.Math.Pow：

```
/// <summary>
/// Converts the quaternion to it's matrix representation.
/// </summary>
/// <returns>A matrix representing the quaternion.</returns>
public Matrix ToMatrix()
{
    return new Matrix(new double[,] {
        {
            _2(W) + _2(X) - _2(Y) - _2(Z),
            (2 * X * Y) - (2 * W * Z),
            (2 * X * Z) + (2 * W * Y),
            0
        },
        {
            (2 * X * Y) + (2 * W * Z),
            _2(W) - _2(X) + _2(Y) - _2(Z),
            (2 * Y * Z) + (2 * W * X),
            0
        },
        {
            (2 * X * Z) - (2 * W * Y),
            (2 * Y * Z) - (2 * W * X),
            _2(W) - _2(X) - _2(Y) + _2(Z),
            0
        },
        {
            0,
            0,
            0,
            1
        }
    });
} 
```

这是我从矩阵转换为四元数的两个转换函数。请注意，在考虑 X 旋转时，它们都不起作用。

```
/// <summary>
/// Converts the matrix to a quaternion assuming the matrix purely
/// represents rotation (any translation or scaling information will
/// result in an invalid quaternion).
/// </summary>
/// <returns>A quaternion representing the rotation.</returns>
public Quaternion ToQuaternion()
{
    /* http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm
        */
    double tr = this.m_Data[0, 0] + this.m_Data[1, 1] + this.m_Data[2, 2];
    if (tr > 0)
    {
        double s = _N2(tr + 1) * 2;
        return new Quaternion(
            (this.m_Data[2, 1] - this.m_Data[1, 2]) / s,
            (this.m_Data[0, 2] - this.m_Data[2, 0]) / s,
            (this.m_Data[1, 0] - this.m_Data[0, 1]) / s,
            0.25 * s
        );
    }
    else if ((this.m_Data[0, 0] > this.m_Data[1, 1]) && (this.m_Data[0, 0] > this.m_Data[2, 2]))
    {
        double s = _N2(1 + this.m_Data[0, 0] - this.m_Data[1, 1] - this.m_Data[2, 2]) * 2;
        return new Quaternion(
            0.25 * s,
            (this.m_Data[0, 1] + this.m_Data[1, 0]) / s,
            (this.m_Data[0, 2] + this.m_Data[2, 0]) / s,
            (this.m_Data[2, 1] - this.m_Data[1, 2]) / s
        );
    }
    else if (this.m_Data[1, 1] > this.m_Data[2, 2])
    {
        double s = _N2(1 + this.m_Data[1, 1] - this.m_Data[0, 0] - this.m_Data[2, 2]) * 2;
        return new Quaternion(
            (this.m_Data[0, 1] + this.m_Data[1, 0]) / s,
            0.25 * s,
            (this.m_Data[1, 2] + this.m_Data[2, 1]) / s,
            (this.m_Data[0, 2] - this.m_Data[2, 0]) / s
        );
    }
    else
    {
        double s = _N2(1 + this.m_Data[2, 2] - this.m_Data[0, 0] - this.m_Data[1, 1]) * 2;
        return new Quaternion(
            (this.m_Data[0, 2] + this.m_Data[2, 0]) / s,
            (this.m_Data[1, 2] + this.m_Data[2, 1]) / s,
            0.25 * s,
            (this.m_Data[1, 0] - this.m_Data[0, 1]) / s
        );
    }
}

/// <summary>
/// This is a simpler form than above, but doesn't work for all values.  It exhibits the
/// *same results* as ToQuaternion for X rotation however (i.e. both are invalid).
/// </summary>
public Quaternion ToQuaternionAlt()
{
    double w = System.Math.Sqrt(1 + this.m_Data[0, 0] + this.m_Data[1, 1] + this.m_Data[2, 2]) / 2;
    return new Quaternion(
        (this.m_Data[2, 1] - this.m_Data[1, 2]) / (4 * w),
        (this.m_Data[0, 2] - this.m_Data[2, 0]) / (4 * w),
        (this.m_Data[1, 0] - this.m_Data[0, 1]) / (4 * w),
        w
    );
} 
```

**现在我的测试套件有一个简单的测试，如下所示：**

```
[TestMethod]
public void TestMatrixXA()
{
    Matrix m = Matrix.CreateRotationX(45 / (180 / System.Math.PI));
    Assert.AreEqual<Matrix>(m, m.ToQuaternion().ToMatrix(), "Quaternion conversion was not completed successfully.");
} 
```

这是我从测试套件中得到的结果：

```
Expected:
{ 1, 0, 0, 0 }
{ 0, 0.707106781186548, -0.707106781186547, 0 }
{ 0, 0.707106781186547, 0.707106781186548, 0 }
{ 0, 0, 0, 1 }

Actual:
{ 1, 0, 0, 0 }
{ 0, 0.707106781186547, 0.707106781186547, 0 }
{ 0, -0.707106781186547, 0.707106781186547, 0 }
{ 0, 0, 0, 1 } 
```

您会注意到矩阵中的两个值是倒置的。我已经对其进行了测试，并且在每次来回转换时（所以 .ToQuaternion().ToMatrix()）这些字段都被反转了。即如果我进行两次四元数/矩阵转换，我得到正确的矩阵。

由于正确值和结果之间的差异是如此简单，我假设它很简单，比如负号在错误的位置，但由于我不是矩阵和四元数数学方面的专家，我遇到了麻烦找出问题所在。

*有谁知道数学有什么问题吗？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:01:27.547

将四元数转换为矩阵的其他解决方案之一似乎有效：

```
/// <summary>
/// Converts the quaternion to it's matrix representation.
/// </summary>
/// <returns>A matrix representing the quaternion.</returns>
public Matrix ToMatrix()
{
    if (!this.Normalized)
        return this.Normalize().ToMatrix();

    double xx = X * X;
    double xy = X * Y;
    double xz = X * Z;
    double xw = X * W;

    double yy = Y * Y;
    double yz = Y * Z;
    double yw = Y * W;

    double zz = Z * Z;
    double zw = Z * W;

    return new Matrix(new double[,]
    {
        { 1 - 2 * (yy + zz), 2 * (xy - zw), 2 * (xz + yw), 0 },
        { 2 * (xy + zw), 1 - 2 * (xx + zz), 2 * (yz - xw), 0 },
        { 2 * (xz - yw), 2 * (yz + xw), 1 - 2 * (xx + yy), 0 },
        { 0, 0, 0, 1 }
    });
} 
```

我敢肯定，如果您重新排列每个值以使其成为第一种形式，则可能会发现其中存在细微的数学差异，但是对我而言，这很有效，我对此感到满意。

# php - 将值从数据库保存并获取到页面上

> ID：11662307
> 
> 赞同：0
> 
> 时间：2012-07-26T04:22:42.893
> 
> 标签：php, javascript, mysql, ajax

这是我用来调用查询以更新数据库中的值的函数：

```
function updatabout($detailsarr)
    {

        $query = "UPDATE User_details SET Marital_status='" . 
                 $detailsarr['m_status'] . "', Ethnicity='" . 
                 $detailsarr['ethinicity'] . "', Primary_language='" .            
                 $detailsarr['language'] . "', Education_level='" .
                 $detailsarr['education'] . 
                 "' WHERE User_id=".$_SESSION['uid'];
        $queryresult = mysql_query($query);
        echo mysql_error().'<br />'.$query;

} 
```

这里所有数据都保存到我的数据库中，除了“爱好”字段并且爱好字段的值在我的数据库中显示为“未定义”，以及单击保存按钮后，我收到警报并查询什么我在这里使用过，但只有在刷新页面后才会在页面上显示这些值...谁能告诉我我在此代码中的错误...提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:56:22.700

***更新**好的，现在我看到您已经编辑并更正了相关代码中的错误。但对我来说仍然`<?php =$hobby ?>`没有意义。它告诉 PHP 解析器什么都不做。`echo`如我的回答中所述，在此处使用。*

您的问题的唯一可能解释是用于生成`hobby`输入字段的代码，特别是这个片段`value=&lt;?=$hobby?&gt;`有问题。

原因：
PHP 处理 a`&lt;?`和`<?`不同。前者按原样回显，后者告诉 PHP PHP 代码此时已启动，并对其进行处理。然后是一个 unneccesarry`=`和 missing `;`。

解决方案：
首先`value="<?php echo $hobby; ?>"`使用完整的PHP标签（）总是推荐使用短标签（）然后你需要告诉PHP`$hobby`通过使用来回显/打印here的值`echo`。现在输出 HTML 应该是`value="_Some_Hobby_"`

现在，如果输出的 HTML 仍然是`value=""`空的，那么您需要检查是否`$hobby`实际包含一个值。

如案例 3中的[http://codepad.org/dvf9bwSd所示，](http://codepad.org/dvf9bwSd)

```
 value="&lt;?php echo $hobby; ?&gt;" 
```

PHP Parser 只是`&lt;php .... ?&gt;`按原样分块。所以使用文字`<`& `>`。

现在，在案例 1 中，

```
value="<?php echo $hobby; ?>"
<?php
var_dump($hobby);
?> 
```

回显`$hobby`变量**而不**为其分配任何值不会打印任何内容。并且`var_dump`还返回`NULL`

继续案例 2，

```
<?php
$hobby = "Coding";
?>
value="<?php echo $hobby; ?>"
<? var_dump($hobby); ?> 
```

定义/分配一个值`$hobby`然后回显它会给我们想要的结果`value="Coding"`，并且`var_dump`还说它`String`是`length=6`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:52:55.640

也许您的代码没有按预期执行的原因是因为您没有转义在服务器端脚本上传递的数据。

尝试使用`escape`javascript 函数。

试试这个：

```
"m_status=" + escape(barr[0]) + "&ethinicity=" + escape(barr[1]) + "&language=" + escape(barr[2]) +" &education=" +escape( barr[3]) + "&hobby=" + escape(barr[4]) 
```

您可能还想使用 firebug(firefox) 或 console(chrome) 工具，以便能够知道在服务器端脚本上传递的值。

# c# - C# 或任何其他不等于运算符的语言如何执行

> ID：11662310
> 
> 赞同：-3
> 
> 时间：2012-07-26T04:23:07.777
> 
> 标签：c#, oop, operators

你好，哪个更快

```
 int a = 100;
        //First Way
        if (a != 100)
        {
            //Do something when a is not equal to 100
        }
        else
        {
            //Do something when a is equal to 100
        }

        //Second Way
        if (a == 100)
        {
            //Do something when a is equal to 100

        }
        else
        {
            //Do something when a is not equal to 100
        } 
```

我认为第二种方法更快，但我很想知道如何解决 NOT EQUAL (!=) 运算符。是不是首先它实现了 equal(==) 操作，然后结果像 !(a==100) 一样被否定？任何帮助都将受到高度重视。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T04:26:51.367

两者之间没有任何区别。对于 an `int`，这一切都归结为 x86 上的两个汇编指令之一：

*   `je`- 如果相等则跳转
*   `jne`- 跳它不相等

这些或任何`jxx`指令都需要相同的时间。

另请参阅[我与您的问题相关的其他答案](https://stackoverflow.com/questions/12135518/is-faster-than/12135533#12135533)。

* * *

既然你似乎真的很在乎，我建议你自己测试一下。编写两个循环，一个使用`==`，一个使用`!=`。然后通过将它们包装在对and[`System.Diagnostics.Stopwatch`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)的调用中，为它们计时。然后比较。通过循环进行足够多的迭代（以最小化其他时序错误，如上下文切换、中断等），您将看不到任何差异。[`Start()`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.start.aspx)[`Stop()`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.stop.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T04:26:41.367

我认为在二进制级别上，这是一个单一的操作（不要引用我的话），所以两者都差不多。

也就是说，如果您尝试在此级别进行优化，那么您做错了什么。这不是组装。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-26T04:32:30.237

在我看来，一般来说，NOT EQUAL 操作 (!=) 应该比 EQUAL (==) 快，因为 NOT EQUAL 操作将在有一些块值时立即返回结果（它基于您的操作系统是 32 位或64 位等）不相等。

在您的情况下，2 个操作应该更快相等，因为 100 是一个 4 字节整数。

而且我认为 2 运营商没有相同的实现。

# iphone - cocos2d glview vs scene，glview和scene是什么关系？

> ID：11662312
> 
> 赞同：0
> 
> 时间：2012-07-26T04:23:43.583
> 
> 标签：iphone, objective-c, ios5, cocos2d-iphone

我是 Cocos2d 的新手，我想了解 glview 如何与场景交互？更新新问题：

例如，AppDelegate.m 中的 glview，我可以看到。但是对于 IntroLayer 和 HelloWorldLayer，则没有。代表中的那个glview是唯一一个在屏幕上绘制所有内容的人吗？如果我向这个 glview 添加一个 UIButton，它会出现在每个场景中吗？

我见过很多代码使用“添加子视图”将glview添加到shareDiector（cocos2d 2.0），然后推送场景。那我很好奇，哪个会在前面？场景还是 glview ？还是glview用于保存场景？

如果我在glview的子视图中添加一个手势怎么办，图层（在场景中）会吞下触摸事件吗？

谁可以帮我这个事？多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:48:47.497

glView 是在屏幕上呈现 OpenGL 内容的 OpenGL 视图。它是从 UIView 派生的。

CCScene 是 cocos2d 的一个抽象概念。它是从 NSObject 派生的 CCNode 派生的。CCScene 是 cocos2d 场景的根节点，而不是必然。它允许向其添加更多节点，例如精灵和标签。

Cocos2D 使用这个场景层次来确定向 glView 发出 OpenGL 绘制命令的顺序。将其视为图像程序（Photoshop 或类似程序）中的图层，而 glView 表示正在绘制的整个图片，所有图层都呈现在彼此之上。

# jquery - JQueryUI弹跳效果：动画发生时div消失

> ID：11662314
> 
> 赞同：0
> 
> 时间：2012-07-26T04:24:04.580
> 
> 标签：jquery, jquery-ui, html-lists, bounce

我已经对列表中的一些图像实现了 JQuery 反弹效果。该列表设置为水平的，具有以下 css：

```
 #sociallinks li{
    list-style:none;
    display: inline;
} 
```

反弹效果与`mouseover()`. 但是，当我将鼠标悬停在列表中的图像上时，列表会恢复到正常垂直状态（即`<li>'s`松散的位置）。一旦反弹动画结束，图像就会恢复其正常位置。

有谁知道在动画发生时如何保持元素的位置？

谢谢！

我的完整代码：

```
 #sociallinks li{
    list-style:none;
    display: inline;
    padding: 5px;
    width: 40px;
}

<script>
$(function(){
    $('.socialicon').mouseover(function () {
          $(this).effect("bounce", { times:5 }, 300);
    });

});
</script>

<ul>
<li class="socialicon"><img src="assets/images/facebookicon.png"></li>
<li class="socialicon"><img src="assets/images/twittericon.png"></li>
<li class="socialicon"><img src="assets/images/pinteresticon.png"></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T00:13:19.300

似乎是使用`<li>`s 和反弹的问题。将它们更改为左浮动的 div，似乎没问题

# tridion - 我如何在 tridion 中右键单击时有一个选项（作为文本/图像）

> ID：11662316
> 
> 赞同：-1
> 
> 时间：2012-07-26T04:24:40.710
> 
> 标签：tridion, tridion-2011

如何在主页级别，页面视图中右键单击 tridion 获得选项（作为文本/图像）。

非常类似于功能区中的按钮，我如何将其作为右键单击（作为文本/图像）的选项，以便在选择时，我将拥有自己的功能。

任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T07:42:42.707

如果右键单击您需要的项目时已经有一个选项菜单，您可以使用扩展配置中的正确视图和控件简单地扩展它。

例如，这里是我用来扩展发布队列上下文菜单的配置片段（在其自己的子菜单中添加一个发布和取消发布按钮，它可以从[SDL Tridion World](http://sdltridionworld.com/community/2011_extensions/publishfrompublishingqueue.aspx)下载）。

```
<ext:contextmenus>
  <ext:add>
    <ext:extension assignid="cm_pq" insertbefore="cm_sep_0" name="PublishQueuePublishing">
      <ext:menudeclaration>
        <cmenu:ContextMenuItem id="cm_pq_sep_0" type="separator"/>
        <cmenu:ContextMenuItem id="cm_pq_pub" name="{Resources: Tridion.Web.UI.Strings, Publishing}" type="submenu">
          <cmenu:ContextMenuItem id="cm_pq_publish" command="PqPublish" name="{Resources: Tridion.Web.UI.Strings, Publish}" />
          <cmenu:ContextMenuItem id="cm_pq_unpublish" command="PqUnPublish" name="{Resources: Tridion.Web.UI.Strings, UnPublish}" />
        </cmenu:ContextMenuItem>
      </ext:menudeclaration>
      <ext:dependencies>
        <cfg:dependency>PublishFromPublishingQueue.Theme</cfg:dependency>
        <cfg:dependency>PublishFromPublishingQueue.Commands</cfg:dependency>
      </ext:dependencies>
      <ext:apply>
        <ext:view name="*">
          <ext:control id="PublishQueueContextMenu" />
        </ext:view>
      </ext:apply>
    </ext:extension>
  </ext:add>
</ext:contextmenus> 
```

如果没有上下文菜单，那么我认为您是一个人，这意味着您需要自己在 JavaScript 代码中创建一些东西

# ios5 - iOS通用应用程序不使用分配的启动图像Xcode 4.4

> ID：11662318
> 
> 赞同：1
> 
> 时间：2012-07-26T04:24:49.713
> 
> 标签：ios5, xcode4, ios-universal-app

我想知道是否有其他人遇到过这个问题。我在这里阅读了一些关于正确命名和在 plist 中添加密钥的主题。我能够在 iPhone 和 iPad 的模拟器以及实际的 iPhone 设备上而不是 iPad 上让它工作。

这是我所拥有的：

```
iPhoneLaunchImage~iPhone.png
iPhoneLaunchImage@2x~iPhone.png

iPadLaunchImage-Portrait~iPad.png
iPadLaunchImage-Portrait@2x~iPad.png
iPadLaunchImage-Landscape~iPad.png
iPadLaunchImage-Landscape@2x~iPad.png 
```

在我的 MyApp-Info.plist 中，这是我所拥有的：

```
<key>UILaunchImageFile~ipad</key>
<array>
    <string>iPadLaunchImage-Portrait~iPad.png</string>
    <string>iPadLaunchImage-Portrait@2x~iPad.png</string>
    <string>iPadLaunchImage-Landscape~iPad.png</string>
    <string>iPadLaunchImage-Landscape@2x~iPad.png</string>
</array>
<key>UILaunchImageFile~iphone</key>
<string>iPhoneLaunchImage~iPhone.png</string> 
```

我还尝试通过仅使用 iPad 的字符串值而不是数组来执行此操作，并且只放置

```
<string>iPadLaunchImage</string> 
```

它再次在模拟器中工作，但在实际的 iPad 上却没有。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T01:07:49.117

如果有人遇到这个问题并且像我一样受到挑战，这实际上非常简单。我不敢相信我让它变得如此困难。我只需要仔细阅读文档并按照它所说的去做。

创建您的启动图像，从 iOS 5 开始，至少四个用于 iPad，两个用于 iPhone。为您的图像命名如下：（我使用的名称只是一个示例，您可以使用任何您想要的名称。）

```
iPadLaunchImage-Portrait.png
iPadLaunchImage-Portrait@2x.png
iPadLaunchImage-Landscape.png
iPadLaunchImage-Landscape@2x.png

iPhoneLaunchImage.png
iPhoneLaunchImage@2x.png 
```

确保为每个设备使用不同的名称。您有更多适用于 iPad 的选项，您可以在文档中了解这些选项。链接在另一个答案中提供。

将所有这些图像放在应用程序包目录的顶部。然后你要做的就是向 YourApp-Info.plist 添加两个键。

```
Launch Image(iPad) string iPadLaunchImage
Launch Image(iPhone) string iPhoneLaunchImage 
```

而已。两个设备的图像都将正确加载。请注意，在 Info-plist 文件中，您没有放置 .png，只有您用于图像的基本名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T04:38:22.030

以下链接可能对您有所帮助

[http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html)

# php - 这个符号叫什么=>

> ID：11662320
> 
> 赞同：4
> 
> 时间：2012-07-26T04:24:52.340
> 
> 标签：php, symbols

这是什么 => 符号在 PHP 中调用。我知道它可以解释为等号直角括号。| 可以称为管道或或。但我的教授要求另一个术语调用 => 符号。它用于为数组类中的键分配值。有谁知道这叫什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T04:30:39.630

它被正式称为`T_DOUBLE_ARROW`。

参考： http: [//php.net/manual/en/tokens.php](http://php.net/manual/en/tokens.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T04:32:35.720

它是一个[赋值运算符](http://www.php.net/manual/en/language.operators.assignment.php) 没有正式名称，但是，如果您遇到任何引用非关联键的 PHP 错误，那么 PHP 错误将其[称为 T_DOUBLE_ARROW](http://php.net/manual/en/tokens.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T04:29:44.213

它是一个赋值运算符。正确的关联性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T04:29:14.157

我经常听到它（至少在 perl 世界中）被称为“双筒箭”。

# sql - SQL - 连接 3 个或更多表的传统方法

> ID：11662322
> 
> 赞同：0
> 
> 时间：2012-07-26T04:25:07.997
> 
> 标签：sql, oracle, join

我正在学习一些 SQL，我想知道加入 3 个或更多表的传统方式是什么。

我知道使用 NATURAL JOIN 和 JOIN ON。我在想 JOIN USING 也是可能的吗？但是我听说有一种传统的方法可以做到这一点，但是我想不通。

我尝试了以下方法：

```
SELECT c#, fn, ln, cat
FROM TABLE1, TABLE4
WHERE (TABLE1.c# = TABLE2.c#
AND TABLE3.o# = TABLE2.o#
AND TABLE4.i = TABLE3.i); 
```

但我总是收到错误 ORA-00904: invalid identifier %s

有人愿意帮助我，或指出我正确的方向吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T04:37:03.840

在您的示例中：

```
SELECT c#, fn, ln, cat
FROM TABLE1, TABLE4
WHERE (TABLE1.c# = TABLE2.c#
AND TABLE3.o# = TABLE2.o#
AND TABLE4.i = TABLE3.i); 
```

...您的 WHERE 子句引用缺少的表 TABLE2 和 TABLE3。

你会想要这个：

```
SELECT c#, fn, ln, cat
FROM TABLE1, TABLE4
WHERE TABLE1.c# = TABLE4.c#; 
```

或者

```
SELECT c#, fn, ln, cat
FROM TABLE1, TABLE2, TABLE3, TABLE4
WHERE (TABLE1.c# = TABLE2.c#
AND TABLE3.o# = TABLE2.o#
AND TABLE4.i = TABLE3.i); 
```

...我猜你正在使用甲骨文？带有“#”的列标识符有效吗？

# google-drive-api - 代码：尝试使用 Google Drive API v2 插入新权限时出现 400 错误

> ID：11662325
> 
> 赞同：2
> 
> 时间：2012-07-26T04:25:15.310
> 
> 标签：google-drive-api

我正在为我的 Rails 应用程序使用 google-api-client (0.3.0) gem 来通过 Google Drive API v2 访问用户的数据。

我成功地按标题搜索了一个文件，然后尝试使用搜索结果中的文件 ID 插入新权限。我想以编程方式允许“任何知道链接的人”对文件发表评论。

按照此处的示例代码： [https](https://developers.google.com/drive/v2/reference/permissions/insert) ://developers.google.com/drive/v2/reference/permissions/insert ，我编写了以下代码：

```
new_permission = gDriveApi.permissions.insert.request_schema.new({ 
                         'role' => "reader",
                         'type' => "anyone",
                         'value' => "",
                         'additionalRoles' => ["commenter"], 
                         'withLink' => true })

result = client.execute(:api_method => gDriveApi.permissions.insert,
                        :body_object => new_permission,
                        :parameters => { 'fileId' => file_id }) 
```

我收到 400 错误。这是哈希转储：

```
--- !ruby/object:Google::APIClient::Schema::Drive::V2::Permission 
data: 
  error: 
    errors: 
    - domain: global reason: parseError 
      message: This API does not support parsing form-encoded input.
    code: 400 
    message: This API does not support parsing form-encoded input. 
```

根据gem源代码中的errors.rb，4xx错误是客户端错误。

任何修复此错误的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:08:31.257

该版本的客户端库中可能存在问题，并且在 0.3 和 0.4 之间发生了重大变化。我在当前版本 0.4.4 上运行了相同的代码段，它运行良好。如果可能，建议更新您的依赖项。

# android - 使用地图控制器和地理位置更新谷歌地图

> ID：11662328
> 
> 赞同：0
> 
> 时间：2012-07-26T04:25:35.040
> 
> 标签：android, google-maps

我又来了。我有另一个关于 android 中的谷歌地图的问题。我正在尝试更新地图视图中显示的地图，这样当用户的位置通过 gps 更新时，地图将显示该位置的地图。

我目前正在使用 GeoPoint 和 MapController 但我没有得到结果。相反，它动画到错误的位置。我尝试交换经度和纬度值，但结果仍然相同。

这是我的活动的源代码。

```
public class MyActivity extends MapActivity {

LocationManager manager;
Location currentLocation;

MapController mapController;

TextView locationView;

MapView mapView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    locationView = (TextView) findViewById(R.id.textView);

    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);

    mapController = mapView.getController();
    mapController.setZoom(5);

    manager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
}

@Override
protected void onPause() {
    super.onPause();
    manager.removeUpdates(listener);
}

@Override
protected void onResume() {
    super.onResume();
    if (!manager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Location Manager");
        builder.setMessage("We want to use your location, but GPS is currently disabled.\nWould you like to change these settings now?");
        builder.setPositiveButton("Yes",
                new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        Intent i = new Intent(
                                Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                        startActivity(i);
                    }
                });
        builder.setNegativeButton("No",
                new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        finish();
                    }
                });
        builder.create().show();
    }

    currentLocation = manager
            .getLastKnownLocation(LocationManager.GPS_PROVIDER);
    updateDisplay();
    int minTime = 5000;
    float minDistance = 0;
    manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, minTime,
            minDistance, listener);
}

private void updateDisplay() {
    if (currentLocation == null) {
        locationView.setText("Determining your location...");
    } else {
        locationView.setText(String.format("Your location:\n%.2f, %.2f",
                currentLocation.getLatitude(),
                currentLocation.getLongitude()));

    }

}

private LocationListener listener = new LocationListener() {

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

    @Override
    public void onProviderEnabled(String provider) {

    }

    @Override
    public void onProviderDisabled(String provider) {

    }

    @Override
    public void onLocationChanged(Location location) {

        currentLocation = location;

        GeoPoint point = new GeoPoint((int) currentLocation.getLatitude(),
                (int) currentLocation.getLongitude());

        mapController.setCenter(point);
        updateDisplay();
    }
};

@Override
protected boolean isRouteDisplayed() {
    return false;
}
} 
```

我很确定 xml 和清单中没有问题，因为谷歌地图本身正在显示。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:29:34.497

Did you remember to convert to microdegrees? From the documentation:Constructs a GeoPoint with the given latitude and longitude, measured in microdegrees (degrees * 1E6). So, you need to multiply the lat and long you got from the location listener by 1E6 otherwise it will animate most likely to a location off the coast of Africa.

# objective-c - 不显示自定义标签 [core-plot]

> ID：11662333
> 
> 赞同：0
> 
> 时间：2012-07-26T04:25:57.113
> 
> 标签：objective-c, core-plot

我正在尝试使用 core-plot 绘制折线图并且遇到 x 轴标签问题。这是我的代码：

```
graph = [[CPTXYGraph alloc] initWithFrame:self._graphView.bounds];

CPTTheme *theme = [CPTTheme themeNamed:kCPTPlainWhiteTheme];

[graph applyTheme:theme];

CPTGraphHostingView *hostingView = (CPTGraphHostingView *)self._graphView;

[hostingView setHostedGraph:graph];

[self.view addSubview:hostingView];

graph.paddingLeft = 10.0;
graph.paddingTop = 10.0;
graph.paddingRight = 10.0;
graph.paddingBottom = 10.0;

graph.plotAreaFrame.paddingLeft = 55.0;
graph.plotAreaFrame.paddingTop = 50.0;
graph.plotAreaFrame.paddingRight = 20.0;
graph.plotAreaFrame.paddingBottom = 90.0;

CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;

plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromInt(0) length:CPTDecimalFromInt([examValues count])];

plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromInt(0) length:CPTDecimalFromDouble([self getYRange] + 10)];

CPTMutableLineStyle *lineStyle = [CPTMutableLineStyle lineStyle];
lineStyle.lineColor = [CPTColor blackColor];
lineStyle.lineWidth = 2.0f;

CPTXYAxisSet *axisSet = (id)graph.axisSet;
axisSet.xAxis.labelingPolicy = CPTAxisLabelingPolicyEqualDivisions;
axisSet.xAxis.orthogonalCoordinateDecimal = CPTDecimalFromString(@"0");
axisSet.xAxis.majorTickLineStyle = lineStyle;
axisSet.xAxis.minorTickLineStyle = lineStyle;
axisSet.xAxis.axisLineStyle = lineStyle;

NSMutableArray *customLabels = [NSMutableArray arrayWithCapacity:[examValues count]];
static CPTMutableTextStyle *labelTextStyle = nil;
labelTextStyle = [[CPTMutableTextStyle alloc] init];
labelTextStyle.color = [CPTColor blackColor];
labelTextStyle.fontSize = 10.0f;

int index = 1;
for (SmartAssetInspectionResultHistoryDTO *result in examValues) {
    CPTAxisLabel *newLabel = [[CPTAxisLabel alloc] initWithText:result._inspectiondate textStyle:labelTextStyle];
    newLabel.tickLocation = CPTDecimalFromInt(index);
    newLabel.offset = axisSet.xAxis.labelOffset + axisSet.xAxis.majorTickLength;
    newLabel.rotation = M_PI / 4;
    [customLabels addObject:newLabel];
    [newLabel release];

    index ++;
}

axisSet.xAxis.axisLabels = [NSSet setWithArray:customLabels];

axisSet.yAxis.majorIntervalLength = CPTDecimalFromString(@"20");
axisSet.yAxis.orthogonalCoordinateDecimal = CPTDecimalFromInt(0);
axisSet.yAxis.majorTickLineStyle = lineStyle;
axisSet.yAxis.minorTickLineStyle = lineStyle;
axisSet.yAxis.axisLineStyle = lineStyle;
axisSet.yAxis.labelOffset = 3.0f;

CPTScatterPlot *plot = [[[CPTScatterPlot alloc] init] autorelease];

CPTMutableLineStyle *dataLineStyle = [CPTMutableLineStyle lineStyle];
plot.identifier = @"Date Plot";

dataLineStyle.lineWidth = 1.0f;
dataLineStyle.lineColor = [CPTColor redColor];
plot.dataLineStyle = dataLineStyle;
plot.dataSource = self;

CPTPlotSymbol *greenCirclePlotSymbol = [CPTPlotSymbol ellipsePlotSymbol];
greenCirclePlotSymbol.fill = [CPTFill fillWithColor:[CPTColor greenColor]];
greenCirclePlotSymbol.size = CGSizeMake(5.0, 5.0);
plot.plotSymbol = greenCirclePlotSymbol;

[graph addPlot:plot]; 
```

一些评论：

```
examValues <--- A NSMutableArray storing some data .
SmartAssetInspectionResultHistoryDTO <--- Detail info object stored in examValues .
result._inspectiondate <--- Date info I want to display in the x axis' labels . 
```

我的麻烦：x 轴下方没有显示日期，但是浮动值，例如 '1.0' ， '2.0' ...谁能告诉我问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:22:23.450

只需尝试将您的 labelingPolicy 更改为 none..“ `axisSet.xAxis.labelingPolicy = CPTAxisLabelingPolicyNone`”

# javascript - 为什么我的 Node 应用程序在此 POST 请求中返回 404？

> ID：11662334
> 
> 赞同：2
> 
> 时间：2012-07-26T04:26:13.103
> 
> 标签：javascript, node.js, express

我很确定我在我的应用程序的某个地方犯了一些愚蠢的错误，但我似乎无法找到它。

这就是我的 Express 应用程序的样子。我的路线设置如下：

```
var routes = require('./routes');
...
app.get('/', routes.index);
app.get('/embed', routes.embed);
app.post('/upload', routes.upload); 
```

在我的路线文件夹中，我有两个文件。index.js 文件导出两个请求处理程序`.index`和`.embed`. 知道`.embed`创建要在`/embed`页面上使用的 CSRF 令牌可能会有所帮助：

```
exports.embed = function(req, res){
  var csrf = req.session._csrf;
  res.render('embed', { token: csrf });
};

form#secret-form(name="secret-form", method="post", action="/upload", style="")
  input(type="hidden", name="_csrf", value="#{token}")
  input(type="hidden", name="image")
  input#send-button(type="submit") Upload 
```

如果它导致了这个问题，只是一个简短的说明：我确实`.submit`在这个表单上附加了一个 jQuery 处理程序；它只是从该页面上的画布对象中获取数据 URL，并将其作为值放入名为“image”的输入字段中。

路由在`.upload`routes/upload.js 文件中处理。它看起来像这样：

```
exports.upload = function(req, res) {
  console.log("Receiving upload...");
  var imageURL = req.body.image;
  // snippet of code that grabs a canvas data URL and stores it in a file
}; 
```

我认为这个函数的内容并不重要，因为我得到了以下`/upload`来自`/embed`表单的请求的日志输出。它甚至不打印“接收上传...”行；它只是返回一个显示“无法发布/上传”的页面：

```
127.0.0.1 - - [Thu, 26 Jul 2012 04:07:41 GMT] "POST /upload HTTP/1.1" 404 - "http://0.0.0.0:3000/embed" 
```

那么，我在这里可能做错了什么？是我的应用配置吗？我怀疑可能是这样，因为在我添加 CSRF 支持后 POST 请求停止工作。但现在我只是猜测...

```
app.configure(function(){
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  //app.use(express.limit('1mb'));
  app.use(express.query());
  app.use(express.logger());

  // CSRF stuff
  app.use(express.cookieParser());
  app.use(express.session({ secret: "secret", cookie: { maxAge: 60000 } }));
  app.use(express.csrf());

  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:49:58.793

您的`index.js`文件应该看起来像这样，`routes.upload`实际上是指以下内容的`upload`导出`upload.js`：

```
exports.upload = require('./upload').upload;

exports.index = function(...

exports.embed = function(... 
```

# magento - 如何将 magento 1.4 1.1 升级到 1.7.0.2

> ID：11662347
> 
> 赞同：10
> 
> 时间：2012-07-26T04:28:48.250
> 
> 标签：magento, upgrade, magento-1.4, magento-1.7

我有一个 magento 网站`1.4.1.1`。

现在我想将网站升级到`magento 1.7.0.2`.

我已经做了以下步骤：

```
1.system->magento connet->magento connect manager
2.Then i enter the extension key as "magento-core/Mage_All_Latest"
3.Then pressed "Check for Upgrades" button. 
```

现在我的窗户爆炸了：

![在此处输入图像描述](../Images/942ecf0dbbfc4a5a35ed290340e22e8f.png)

那我接下来怎么办？

那么如何使用 magento 连接管理器进行升级呢？

我如何升级 magento 网站？

有人有解决方案吗？

我在本地服务器中的 magento 站点。

编辑： ![在此处输入图像描述](../Images/a6d3f0ec01023052e18451f9673d1f2c.png)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-27T11:43:21.747

数据库结构从 1.4.1.1 到 1.4.2 有很大的变化，所以你需要先升级到 1.4.2，然后你可以直接升级到 1.7.0.2。

我喜欢命令行所以我通常通过命令行升级系统，这是我的程序：

用补丁版本替换文件下载器/pearlib/php/Archive/Tar.php（它有一个错误）：[http ://www.mediafire.com/?35no55xuoeek20a](http://www.mediafire.com/?35no55xuoeek20a)

准备 Magento 升级

让您想象一下您拥有 Magento 1.4.1.1。网上商店，您需要将其升级到 1.5。或 1.6 版本。首先，强烈建议备份您的实时存储文件和数据库。

接下来，您需要从托管服务提供商处获得 SSH 访问权限，并通过 SSH 协议连接到您的服务器。通过 SSH 连接后，转到您的商店文件夹并执行以下命令：

1 – 将 lib/pear 文件夹的权限更改为可写（递归）：

```
chmod -R 777 lib/PEAR 
```

2 – 执行此命令准备 Magento 进行升级：

```
./pear mage-setup 
```

很可能你会在命令执行后看到这个结果：

```
Channel “connect.magentocommerce.com/core” is already initialized 
```

从 Magento 1.4.1.x 升级到 Magento 1.4.2.0

即使您将 Magento 商店升级到 1.5 或 1.6 版本，此步骤也是必要的。

3 – 执行 Magento 升级命令：

```
./pear upgrade -f magento-core/Mage_All_Latest-stable 
```

该命令的输出将显示升级了哪些核心包：

```
…
upgrade ok: channel://connect.magentocommerce.com/core/Mage_Centinel-1.4.2.0
upgrade ok: channel://connect.magentocommerce.com/core/Interface_Frontend_Base_Default-1.4.2.0
upgrade ok: channel://connect.magentocommerce.com/core/Phoenix_Moneybookers-1.2.3
upgrade ok: channel://connect.magentocommerce.com/core/Find_Feed-1.0.7
upgrade ok: channel://connect.magentocommerce.com/core/Interface_Adminhtml_Default-1.4.2.0 
```

4 – 这部分升级完成后，输入以下命令：

```
chmod 550 ./mage
./mage mage-setup . 
```

命令执行后你会看到这个结果：

```
Successfully added: http://connect20.magentocommerce.com/community 
```

这意味着 Magento connect 2.0 频道已成功添加到频道列表中。

5 – 接下来，输入以下命令：

```
./mage sync 
```

结果将是：

```
…
Successfully added: community/Mage_Locale_en_US-1.4.2.0
Successfully added: community/Interface_Install_Default-1.4.2.0
Successfully added: community/Phoenix_Moneybookers-1.2.3
Successfully added: community/Mage_Downloader-1.5.0.0
Successfully added: community/Lib_Google_Checkout-1.4.2.0 
```

升级到 Magento 1.4.2.0 已完成，现在您可以继续升级到 Magento 1.5.1.0 或 1.6.0.0 版本。

空 var/cache 和 var/session 文件夹 空浏览器缓存

访问您的网站以触发更新

更新时间 15min

* * *

* * *

* * *

从 Magento 1.4.2.0 升级到 Magento 1.5.10 或 Magento 1.6.0.0

现在您可以将您的商店升级到版本 1.5 或 1.6。

在继续进行 Magento 升级的这一部分之前，查看 Magento 升级脚本将升级您的商店的版本非常重要。输入此命令以检查：

```
./mage list-upgrades 
```

如果你会看到这个结果：

```
Updates for community:
Mage_All_Latest: 1.4.2.1 => 1.6.0.0
Lib_Js_Mage: 1.4.2.0 => 1.6.0.0
Lib_Varien: 1.4.2.0 => 1.6.0.0
Lib_Phpseclib: 1.4.2.0 => 1.5.0.0 
```

这意味着您的 Magento 将升级到 1.6.0.0 版本。如果这不是您需要的，您可以将升级通道更改为“稳定”并将您的 Magento 升级到版本 1.5.1.0。

6 – 输入此命令将升级通道更改为稳定：

```
./mage config-set preferred_state stable 
   or
./mage install http://connect20.magentocommerce.com/community Mage_All_Latest --force 
```

在此之后，“./mage list-upgrades”命令将显示以下结果：

```
Updates for community:
Mage_All_Latest: 1.4.2.1 => 1.5.1.0.1
Lib_Js_Mage: 1.4.2.0 => 1.5.1.0
Lib_Varien: 1.4.2.0 => 1.5.1.0
Lib_Phpseclib: 1.4.2.0 => 1.5.0.0
Mage_Core_Adminhtml: 1.4.2.0 => 1.5.1.0
Mage_Core_Modules: 1.4.2.0 => 1.5.1.0 
```

7 – 选择频道后，您可以使用以下命令将 Magento 升级到 1.5.1.0（或 Magento 1.6.0.0）：

```
./mage upgrade-all –-force 
```

您将在屏幕上看到升级的软件包：

```
…
Package upgraded: community/Mage_Locale_en_US 1.6.0.0
Package upgraded: community/Lib_Mage 1.6.0.0
Package upgraded: community/Lib_ZF 1.11.1.0
Package upgraded: community/Lib_Js_Prototype 1.7.0.0.1
Package upgraded: community/Lib_ZF_Locale 1.11.1.0 
```

现在升级已完成，您可以在浏览器中访问您的 Magento 商店执行数据库升级。如果一切都正确升级，您将在浏览器中看到升级的商店。

您可以在 Magento 管理面板的页脚中查看商店的版本。

空 var/cache 和 var/session 文件夹 空浏览器缓存

访问您的网站以触发更新

更新时间 60 分钟取决于您的硬件

这适用于我的许多客户。

我希望这可以帮助你

如果您需要帮助，我是一名自由职业者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T06:17:37.007

使用 MagentoConnect 管理器升级 Magento

```
Go to http://<YOUR_SERVER>/downloader
Log in using a user who has full permissions
Make sure to select “Clear all sessions after successful install or upgrade” 
```

这将帮助你。

# css - 什么内容：“。”；在css里做什么？它看起来像 clear:both 和/或 display:block by iteself

> ID：11662350
> 
> 赞同：1
> 
> 时间：2012-07-26T04:28:59.593
> 
> 标签：css, magento

在标准的 Magento 样式表中，有大量的 css 类，然后是

```
{
    clear: both;
    content:".";
    display: block;
    font-size: 0;
    height: 0;
    line-height: 0;
    overflow: hidden;
} 
```

为了测试它的作用，我删除了这一行，并在至少一个块上将所有内容向上移动了大约 300 像素，并允许到处浮动。这是我只删除内容的时候：“。” 线。它几乎看起来像是在充当 display:block 或 clear:both - 或与它们一起工作。

我不知道它做了什么 - 有人可以启发我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T04:37:24.000

这种风格的块被称为`clear fix`。当页面中的包含元素（例如 div）仅包含浮动元素时，它将折叠，因为浮动元素已从页面流中删除。这将导致包含元素失去其高度。

clear 修复的作用是插入一个无意义的内容，在大多数情况下是一个点，使用 CSS 伪类`:after`并通过将高度设置为 0 来隐藏。这将强制包含元素自行清除，它不会松开它的高度。

在此处阅读有关它的更多信息： [css-tricks clear fix 解释](http://css-tricks.com/snippets/css/clear-fix/)

# php - 为 PHP 数组中的元素分配不同的 HTML 类

> ID：11662353
> 
> 赞同：0
> 
> 时间：2012-07-26T04:29:28.183
> 
> 标签：php

我正在处理一些图像，并希望为它们批量分配不同的类。

这是我的简单代码

```
$image_dir = 'images';
$showimage = scandir($image_dir, 0);
unset($showimage [0],$showimage [1]);
print_r ($showimage ); 
```

结果是

```
Array ( 
    [2] => exmapleiamge1.png 
    [3] => exmapleiamge1_1.png 
    [4] => exmapleiamge1_2.png 
    [5] => exmapleiamge2_1.png 
    [6] => exmapleiamge2_2.png 
    [7] => exmapleiamge2_3.png 
    [8] => exmapleiamge3_1.png 
    [9] => exmapleiamge3_2.png 
) 
```

我想要实现的是，将 div class=no1 分配给 exmapleiamge1_1 到 exmapleiamge1_2 的所有图像，并将 exmapleiamge2_1 中的 class=no2 图像分配给 exmapleiamge2_3，以及类 no3.... 等；

我认为关键是过滤数字，是否有人可以帮我一把，因为我是 php 初学者并且热衷于学习如何做到这一点。

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T04:43:52.603

这是您可以做到的一种方法：

```
foreach ($showimage as $image) {
    // Extract the number first
    $no = substr($image, strlen('exmapleiamge'), 1);

    $class = 'no'.$no;

    // Echo the HTML elements
    echo "<div class='$class'>";
    echo "<img src='$image'>";
    echo "</div>";
} 
```

# c# - C#更快的方法来比较两个图像之间的像素并且只写出差异

> ID：11662354
> 
> 赞同：4
> 
> 时间：2012-07-26T04:29:29.490
> 
> 标签：c#, image

只需对两个非常相似的图像（一个是另一个的编辑版本）进行逐个像素的比较，然后将差异写入一个新文件。

```
for (int y = 0; y < height; y++)
{
    for (int x = 0; x < width; x++)
    {
        pix1 = src.GetPixel(x, y);
        pix2 = comp.GetPixel(x, y);
        if (pix1 != pix2)
        {
            dest.SetPixel(x, y, pix1);
        }
    }
} 
```

`src`并且`comp`是要比较的两个图像，并且`dest`只是一个新图像。这需要相当长的时间。

有什么更快的方法来做到这一点？
也许没有必要为了比较它而实际获取像素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T04:39:06.850

要比较像素，您需要读取它们。但是，`GetPixel()`这是一种非常缓慢的方法，不推荐使用，除非您只是检查非常少量的数据。

为了获得更好的性能，最好的方法是使用不安全代码并使用指针。互联网上有很多这样的示例，下面是我发现的一个，它稍微解释了问题并为此提供了两种不同的解决方案。

[http://davidthomasbernal.com/blog/2008/03/13/c-image-processing-performance-unsafe-vs-safe-code-part-i](http://davidthomasbernal.com/blog/2008/03/13/c-image-processing-performance-unsafe-vs-safe-code-part-i)

一定要检查第二部分，他有一些基准和完整源代码的链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-28T08:38:46.790

这段代码与我使用的类似。绝对，在这种情况下，不安全的代码是唯一的出路。没有必要在内存周围编组一个充满像素的位图，您必须这样做两次才能进行比较！

但是，比较像素应该被视为比较两个数字。由于一个像素对于颜色的红色、绿色和蓝色分量中的每一个都是 3 个字节，当然还有 Alpha（通常被忽略），您可能希望将值作为 UInt32 进行比较。这将有利于将一个数字（一个像素）与另一个进行比较，如果它们相同，那么您继续前进。

为此，您不需要一个字节*，而是一个 UInt32*。其次，上面的代码没有考虑我可以看到的步幅，这是图像的每条水平线实际上使用的字节数可能与像素本身的总和不同。由于您可能正在处理 24 位 (rgb) 和 alpha (a)，这意味着像素应该已经对齐，因此上面的代码应该可以工作。然而，不能保证它会 100% 的发生。

听起来我真的很挑剔，但我猜性能对你来说很重要——而且来自游戏背景，对我也很重要。

（摘自上述第 1 部分的链接，感谢 Karl-Johan Sjögren）

```
BitmapData bData = b.LockBits(new Rectangle(0, 0, _image.Width, _image.Height), ImageLockMode.ReadWrite, b.PixelFormat); 
```

当您点击这条线时，您真的需要小心 - 您锁定的 PixelFormat 应该与您的源图像的 PixelFormat 之一匹配。否则事情可能不会像你期望的那样表现。

从 LockBits 中，您将获得需要深入研究的 BitmapData。

```
byte* scan0 = (byte*)bData.Scan0.ToPointer(); 
```

这就是我所指的行 - 我将其设为 UInt32*，因此您不是每条指令读取一个字节，而是一次性读取 4 个字节，作为 UInt32。

我将把这个内存作为一个数组来访问——我通过识别步幅等于一个 Y 像素来计算一维数组的偏移量，因此将步幅乘以 Y。但是，你会陷入同样的​​境地在这一点上我有很多次陷阱！

```
int stride = bData.Stride / 4;  // the width is expressed in bytes, yet we need it as UInt32's.  As there's 4 bytes per UInt32, this makes sense of the divide by 4. 
```

因此可以通过这种方式读取像素：

```
int x = 123;
int y = 321;
UInt32 pixelColour = scan0[(y * stride) + x]; 
```

最后，完成后不要忘记解锁位图。一个容易忘记的。此外，如果您希望将更改的像素保存到另一个位图，您需要以相同的方式写入像素。我认为我的示例使用指针作为数组来读取像素应该很明显如何执行相同的操作来写入像素。

另一种想法——我希望你不要试图比较 Jpeg 或其他有损压缩图像——因为这些变化可能非常不可预测，而且与你想象的不完全一样。相反，您需要使用无损图像格式，例如 BMP 和 PNG。

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T09:24:55.313

你可以看看这个类：它是一个开源代码，提供基于指针的快速方法来比较像素，我找不到链接，所以我把代码贴给你：

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Drawing;
using System.Drawing.Imaging;

namespace SampleGrabberNET
{
    public unsafe class UnsafeBitmap
    {
        Bitmap bitmap;

  // three elements used for MakeGreyUnsafe
  int width;
  BitmapData bitmapData = null;
    Byte* pBase = null;

  public UnsafeBitmap(Bitmap bitmap)
  {
     this.bitmap = new Bitmap(bitmap);
  }

        public UnsafeBitmap(int width, int height)
    {
        this.bitmap = new Bitmap(width, height, PixelFormat.Format24bppRgb);
        }

  public void Dispose()
  {
     bitmap.Dispose();
  }

  public Bitmap Bitmap
  {
 get
     {
    return(bitmap);
     }
  }

  private Point PixelSize
  {
     get
     {
    GraphicsUnit unit = GraphicsUnit.Pixel;
    RectangleF bounds = bitmap.GetBounds(ref unit);

    return new Point((int) bounds.Width, (int) bounds.Height);
     }
  }

  public void LockBitmap()
  {
     GraphicsUnit unit = GraphicsUnit.Pixel;
     RectangleF boundsF = bitmap.GetBounds(ref unit);
     Rectangle bounds = new Rectangle((int) boundsF.X,
    (int) boundsF.Y,
    (int) boundsF.Width,
    (int) boundsF.Height);

     // Figure out the number of bytes in a row
     // This is rounded up to be a multiple of 4
     // bytes, since a scan line in an image must always be a multiple of 4 bytes
     // in length.
     width = (int) boundsF.Width * sizeof(PixelData);
if (width % 4 != 0)
     {
    width = 4 * (width / 4 + 1);
 }
     bitmapData =
    bitmap.LockBits(bounds, ImageLockMode.ReadWrite, PixelFormat.Format24bppRgb);

     pBase = (Byte*) bitmapData.Scan0.ToPointer();
  }

  public PixelData GetPixel(int x, int y)
  {
            PixelData returnValue = *PixelAt(x, y);
     return returnValue;
  }

        public void SetPixel(int x, int y, PixelData colour)
        {
            PixelData* pixel = PixelAt(x, y);
            *pixel = colour;
        }

  public void UnlockBitmap()
  {
     bitmap.UnlockBits(bitmapData);
     bitmapData = null;
     pBase = null;
  }
        public PixelData* PixelAt(int x, int y)
        {
            return (PixelData*)(pBase + y * width + x * sizeof(PixelData));
        }
    }
    public struct PixelData
    {
        public byte blue;
        public byte green;
        public byte red;
    } 
```

}

# android - 我的手机中禁用了 wifi-direct (4.0.3)

> ID：11662360
> 
> 赞同：0
> 
> 时间：2012-07-26T04:30:02.493
> 
> 标签：android, android-wifi, wifi-direct

我手机的android版本是4.0.3，我用4.0.3 api构建的应用程序可以在这个手机上运行。但是，当我尝试运行 wifi direct 示例时，该应用程序不断提醒我“从上方的操作栏按钮或系统设置启用 P2P”。但是我的手机上没有这样的“P2P设置”，所以不知何故我可能无法直接使用wifi。顺便说一句，wifi 支持 b/g/n。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-29T06:12:14.963

P2P 功能可能“隐藏”
在“设置”>“Wi-Fi 设置”中点击选项键以显示 Wi-Fi Direct

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:35:14.677

即使我面临同样的问题。我有两台平板电脑，一台是 Sony Tablet S，另一台是三星 Galaxy II——两者都在 ICS 4.0.3 上运行。这是我通过互联网浏览时发现的。Wifi Direct P2P 适用于三星，但不适用于索尼。

> 这取决于设备使用的 wifi 芯片。据我所知，Broadcom bcm4329/4330、Atheros 6005 和 Ti 1281 可以在 ICS 上支持此功能。但是，您需要为 wifi direct 移植合适的驱动程序和固件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T18:32:48.243

不想这么说，但这取决于您的手机及其与 ICS 的集成。

例如，我有两个运行 4.03 的设备，motorola razr maxx 和 samsung galaxy IIIs。razr maxx 没有 Wifi-Direct 的设置。虽然，razr maxx 确实通过标准 wifi 管理器和设置来显示 adhoc P2P 网络连接。三星 Galaxy III 确实有 Wifi-Direct 设置，但似乎在使用传统的 adhoc 网络时遇到了更多问题。

希望这可以帮助。

# jquery - jquery 全局滚动条，而不是每个 div

> ID：11662361
> 
> 赞同：0
> 
> 时间：2012-07-26T04:30:03.347
> 
> 标签：jquery, html, css

我正在寻找一种在全球范围内设置滚动条样式的方法！基本上样式滚动条只会显示而不是默认滚动条

举个例子，webkit 滚动条样式基本上是你将代码添加到你的 CSS 中，它适用于整个边，无论在哪里，无论是什么 div，当滚动条出现时，它就会显示样式！我知道这仅适用于 webkit 浏览器，并且我知道有许多 jquery 脚本可以让您单独设置 div 的样式，但是有没有办法添加 jquery 并让它自动全局设置站点上任何滚动条的样式？

我的网站很大，我几乎不可能为每个 div 做这件事。

我现在正在使用的插件叫做[nicescroll](http://areaaperta.com/nicescroll/)，但是你们可能建议的任何其他插件都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T04:58:07.077

我认为您正在找到这个：[Nicescroll](http://areaaperta.com/nicescroll/)。

试试看，非常好用，而且非常流畅。

示例（单数使用，但对其他人有用）：

```
$(document).ready(function() {  
    $("#example_div").niceScroll();
}); 
```

# c++ - 从 C++ 中的排序整数向量中获取连续范围

> ID：11662367
> 
> 赞同：0
> 
> 时间：2012-07-26T04:31:11.097
> 
> 标签：c++

从整数向量中提取连续范围

我已经像这样 [1,2,3,6,7,8,12,15] 对向量（具有非重复值）进行了排序

我需要从像 1-3,6-8,12-15 这样的向量中提取每个范围到像这样的字符串：

**"0-3,6-8,12,15"**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:36:38.667

我最近煮了这段代码。它从文件中读取，而不是输出到文件的字符串。我相信你可以修改它以满足你的需要。

```
#include <iostream>
#include <fstream>
#include <sstream>
#include <string>

using namespace std;

template <typename T>
inline T convert(string &s)
{
 T out;
 istringstream ss(s);
 ss >> out;
 return out;
}

int main()
{
 ifstream infile("input.txt");
 ofstream outfile("output.txt");

 string cur_line, last_line;
 int cur, last;

 if (infile.good()) {
  getline(infile, cur_line);
  cur = convert<int>(cur_line);
  outfile << cur_line << ',';
  last = cur;
 }

 while(getline(infile, cur_line))
 {
  cur = convert<int>(cur_line);

  if (cur != last + 1) {
   outfile << last_line << '\n';
   outfile << cur_line << ',';
  }

  last = cur;
  last_line = cur_line;
 }

 outfile << last_line;

 infile.close();
 outfile.close();

 return 0;
} 
```

# javascript - jQuery – 解析页面加载后插入的 iframe

> ID：11662368
> 
> 赞同：2
> 
> 时间：2012-07-26T04:31:16.830
> 
> 标签：javascript, jquery, iframe

我是 jQuery 新手，遇到了一些麻烦。A 有一个`iframe`在页面加载后插入的页面。我需要在内容中找到锚链接`iframe`并将它们`href`与 URL 进行比较。仅仅尝试纯 JavaScript`getElementById()`是行不通的，因为它`iframe`是在加载后插入的。我读到我应该使用 jQuery 的`live()`、`delegate()`或`on()`，但我不确定它们是如何工作的。此外，如果有一个纯 Javascript 解决方案也会很棒。

`iframe`我需要解析的是：

```
<iframe src="http://assets.tumblr.com/iframe.html?10&src=http%3A%2F%2Fstaff.tumblr.com%2F&amp;lang=en_US&amp;name=staff"
    scrolling="no" width="330" height="25" frameborder="0" 
    style="position:absolute; z-index:1337; top:0px; right:0px; 
           border:0px; background-color:transparent; overflow:hidden;" 
           id="tumblr_controls">
</iframe> 
```

它被附加到每个 Tumblr 博客（请参阅[Tumblr 员工博客](http://staff.tumblr.com)）。

我感兴趣的 iframe 内容部分如下所示：

```
<div style="position:absolute; top:3px; right:3px; white-space:nowrap; height:20px;">
    <form action="/follow" method="post" style="display:block; float:left;" onsubmit="_gaq.push(['_trackEvent', 'Iframe', 'Follow', 'staff');">
    <input type="hidden" name="form_key" value="8W0r1XnbOEtpTF0q8oe96BmGMJg"/>
    <input type="hidden" name="id" value="staff"/>
    <input type="image" src="http://assets.tumblr.com/images/iframe_follow_alpha.png 1018" style="width:58px; height:20px; border-width:0px; display:block; margin-left:3px; cursor:pointer;" alt="Follow"/>
    </form>
    <a target="_top" href="http://www.tumblr.com/dashboard">
    <img src="http://assets.tumblr.com/images/iframe_dashboard_alpha.png?1018" alt="Dashboard" style="height:20px; width:81px; border-width:0px; display:block; float:left; cursor:pointer;"/>
</a> 
```

我需要比较此内容中所有可能的锚链接，并将它们的 href 与 URL 进行比较。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T04:37:13.380

```
function getHref() {

  var src = false,
      iframe = $('iframe#tumblr_controls');  // keep reference of iframe;
  // check that iframe loaded
  if( iframe.length) { 
     src = iframe.find('a[target=_top]').attr('href');
  }
} 
```

现在您可以调用`getHref()`以获取`href`iframe 中的 of 链接并将其用于比较。

您也可以尝试如下：

```
$('iframe#tumblr_controls').load(function() {
   var href = $(this).find('a[target=_top]').attr('href');
}); 
```

如果您`a`的内容中有多个标签，请尝试：

```
function compareHrefs() {
  var iframe = $('iframe#tumblr_controls');  // keep reference of iframe;
  // check that iframe loaded
  if( iframe.length) { 
     // looping over each  tag
     iframe.find('a').each(function() {
          if ( this.href == TARGET_URL ) {
             // do something
          }
     });
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T04:43:17.993

插入 iframe 后，您可以像在 jquery 中一样从其 id 获取 iframe

```
$('#tumblr_controls') 
```

并获取源网址只需使用`attr`jquery 之类的

```
var source = $('#tumblr_controls').attr('src'); 
```

[jsfiddle.net](http://jsfiddle.net/adn97/)上的工作演示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T04:44:12.450

你的 iframe 是另一个文件，所以你应该这样对待它......

```
$(document).ready(function(){
  $("#iframe).load(function(){
   //do stuff
  })
}); 
```

# objective-c - 添加到视图的子视图的 UIButton 不会响应

> ID：11662377
> 
> 赞同：0
> 
> 时间：2012-07-26T04:32:55.927
> 
> 标签：objective-c, ios, uiview, uikit, addsubview

一直在寻找这个答案，但没有运气。从谷歌到 StackOverflow。到目前为止，我发现的唯一答案告诉人们在视图中调用 initWithFrame 而不仅仅是 init。我用 initWithFrame 替换了我在 UIViews 中对 init 的所有调用，但我没有任何运气。

我没有使用IB。

这是我的全部代码：

```
@interface UnlockKeyboard : UIView
{
    NSArray *buttons;
    UITextField *passcodeFields;

    UIImage *buttonBackgroundImage;
    UIImage *buttonBackgroundHighlightedImage;
    UIImage *middleButtonBackgroundImage;
    UIImage *middleButtonBackgroundImageHighlighted;
    UIImage *screenBackgroundImage;
    UIImage *keypadViewBackgroundImage;

    UIView *infoView;
    UIView *keypadView;
}
@property(nonatomic, retain)UIImage *buttonBackgroundImage;
@property(nonatomic, retain)UIImage *buttonBackgroundHighlightedImage;
@property(nonatomic, retain)UIImage *screenBackgroundImage;
@property(nonatomic, retain)UIImage* keypadViewBackgroundImage;

@end

@implementation UnlockKeyboard
@synthesize buttonBackgroundImage = _buttonBackgroundImage;
@synthesize buttonBackgroundHighlightedImage = _buttonBackgroundHighlightedImage;
@synthesize screenBackgroundImage = _screenBackgroundImage;
@synthesize keypadViewBackgroundImage = _keypadViewBackgroundImage;
-(id)init
{
    if((self = [super initWithFrame:CGRectMake(0, 0, 320, 480)]))
    {
        _unlockKeyboardBundle = [NSBundle bundleForClass:[self class]];
        buttonBackgroundImage = [UIImage imageWithContentsOfFile:[_unlockKeyboardBundle pathForResource:@"button" ofType:@"png"]];
        middleButtonBackgroundImage = [UIImage imageWithContentsOfFile:[_unlockKeyboardBundle pathForResource:@"middleButton" ofType:@"png"]];
        buttonBackgroundHighlightedImage = [UIImage imageWithContentsOfFile:[_unlockKeyboardBundle pathForResource:@"pushedButton" ofType:@"png"]];
        middleButtonBackgroundImageHighlighted = [UIImage imageWithContentsOfFile:[_unlockKeyboardBundle pathForResource:@"pushedButtonMiddle" ofType:@"png"]];
        keypadView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 200)];
        NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

        NSMutableArray *tempButtons = [NSMutableArray array];
        //self.frame = CGRectMake(320, 480, 0, 0);
        self.backgroundColor = [UIColor lightGrayColor];
        self.opaque = YES;

        UIButton *button1 = [UIButton buttonWithType:UIButtonTypeCustom];
        [button1 setTitle:@"1" forState:UIControlStateNormal];
        button1.frame = CGRectMake(0, 261, 106, 50);

        UIButton *button4 = [UIButton buttonWithType:UIButtonTypeCustom];
        [button4 setTitle:@"4" forState:UIControlStateNormal];
        button4.frame = CGRectMake(0, 311, 106, 50);

        UIButton *button7 = [UIButton buttonWithType:UIButtonTypeCustom];
        [button7 setTitle:@"7" forState:UIControlStateNormal];
        button7.frame = CGRectMake(0, 361, 106, 50);

        UIButton *hint = [UIButton buttonWithType:UIButtonTypeCustom];
        [hint setTitle:NSLocalizedString(@"Hint", @"Hint string") forState:UIControlStateNormal];
        hint.frame = CGRectMake(0, 411, 106, 50);

        UIButton *button2 = [UIButton buttonWithType:UIButtonTypeCustom];
        [button2 setTitle:@"2" forState:UIControlStateNormal];
        button2.frame = CGRectMake(106, 261, 108, 50);

        UIButton *button5 = [UIButton buttonWithType:UIButtonTypeCustom];
        [button5 setTitle:@"5" forState:UIControlStateNormal];
        button5.frame = CGRectMake(106, 311, 108, 50);

        UIButton *button8 = [UIButton buttonWithType:UIButtonTypeCustom];
        [button8 setTitle:@"8" forState:UIControlStateNormal];
        button8.frame = CGRectMake(106, 361, 108, 50);

        UIButton *button0 = [UIButton buttonWithType:UIButtonTypeCustom];
        [button0 setTitle:@"0" forState:UIControlStateNormal];
        button0.frame = CGRectMake(106, 411, 108, 50);

        UIButton *button3 = [UIButton buttonWithType:UIButtonTypeCustom];
        [button3 setTitle:@"3" forState:UIControlStateNormal];
        button3.frame = CGRectMake(214, 261, 106, 50);

        UIButton *button6 = [UIButton buttonWithType:UIButtonTypeCustom];
        [button6 setTitle:@"6" forState:UIControlStateNormal];
        button6.frame = CGRectMake(214, 311, 106, 50);

        UIButton *button9 = [UIButton buttonWithType:UIButtonTypeCustom];
        [button9 setTitle:@"9" forState:UIControlStateNormal];
        button9.frame = CGRectMake(214, 361, 106, 50);

        UIButton *cancelOrDelete = [UIButton buttonWithType:UIButtonTypeCustom];
        [cancelOrDelete setTitle:@"<-" forState:UIControlStateNormal];
        cancelOrDelete.frame = CGRectMake(214, 411, 108, 50);

        [tempButtons addObject:button1];
        [tempButtons addObject:button2];
        [tempButtons addObject:button3];
        [tempButtons addObject:button4];
        [tempButtons addObject:button5];
        [tempButtons addObject:button6];
        [tempButtons addObject:button7];
        [tempButtons addObject:button8];
        [tempButtons addObject:button9];
        [tempButtons addObject:button0];
        [tempButtons addObject:hint];
        [tempButtons addObject:cancelOrDelete];

        for(UIButton *theButton in tempButtons)
        {
            if([theButton.currentTitle isEqualToString:@"2"] || [theButton.currentTitle isEqualToString:@"5"] || [theButton.currentTitle isEqualToString:@"8"] || [theButton.currentTitle isEqualToString:@"0"])
            {
                [theButton setBackgroundImage:middleButtonBackgroundImage forState:UIControlStateNormal];
                [theButton setBackgroundImage:middleButtonBackgroundImageHighlighted forState:UIControlStateHighlighted];
            }else
            {
                [theButton setBackgroundImage:buttonBackgroundImage forState:UIControlStateNormal];
                [theButton setBackgroundImage:middleButtonBackgroundImageHighlighted forState:UIControlStateHighlighted];
            }
            [keypadView addSubview:theButton];
        }
        [self addSubview:keypadView];

        [pool drain];
    }
    return self;
}
-(void)dealloc
{
    [buttons release];
    [passcodeFields release];
    [buttonBackgroundImage release];
    [buttonBackgroundHighlightedImage release];
    [screenBackgroundImage release];
    [infoView release];
    [keypadView release];
    [super dealloc];
} 
```

如您所见，我将 UIView 子类化为 UnlockKeyboard。UnlockKeyboard 应该有另一个包含所有 UIButtons 的子视图 (keypadView)。所以总而言之keyboardView是UnlockKeyboards的一个子视图，所有这些按钮都应该在keyboardView里面。我可以很好地添加它们，但是当我尝试点击它们时，它们的控制状态不会改变。是的，就像你看到的那样，我在创建 UIView 时用 initWithFrame 替换了所有对 init 的调用。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T04:38:23.487

您需要为按钮添加目标，以便它们知道在您按下它们时要调用什么方法。它看起来像这样

```
[button addTarget:self action:@selector(method) forControlEvents:UIControlEventTouchUpInside]; 
```

其中 self 是包含方法的实例，method 是单击按钮时运行的方法。

希望这对你有用

干杯，

〜约翰

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T04:40:44.413

您需要设置控制状态的图像，而不是控制状态的背景图像：

```
[btn setImage: [UIImage imageNamed: @"image.png"] forState: UIControlStateNormal]; 
```

所以它看起来像：

```
[theButton setImage:middleButtonBackgroundImage forState:UIControlStateNormal];
            [theButton setBackgroundImage:middleButtonBackgroundImageHighlighted forState:UIControlStateHighlighted]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T04:38:37.067

由于没有为按钮定义目标或操作，因此按钮不知道您想要做什么。如果你确实有一个动作，你可以使用 action 方法来改变发送者的状态（发送者是按钮）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T05:26:28.220

弄清楚了。我设置关于 keypadView 的按钮框架的方式完全搞砸了。当我决定将按钮添加到超级视图时，我忘记对按钮进行一些框架更改，因此按钮显示正确，“但它们的坐标不正确”就其触摸事件而言。所以实际的按钮例如在 (3,4) 中，但它的接触点在 (10,20) 中。

修复框架以更好地使用 superview 解决了我的问题

# php - 如何使 stmt_fetch 将结果转换为 mysqli 中的数组

> ID：11662379
> 
> 赞同：1
> 
> 时间：2012-07-26T04:33:21.130
> 
> 标签：php, mysql, mysqli

我对此感到非常沮丧。我正在尝试使用 mysqli 创建一个包含列值的数组。现在，当我回显返回的内容时，它什么也没打印。我已经尝试了很多事情，我无法弄清楚这一点。

```
<?php 
class Database {

    public $dbHost = '';
    public $dbUser = '';
    public $dbPass = '';
    public $dbName = '';

    public $db;

    public function __construct(){ 
        $this->dbConnect();
    }

    public function dbConnect(){

        $this->db = new mysqli($this->dbHost, $this->dbUser, $this->dbPass, $this->dbName);

        /* check connection */
        if (mysqli_connect_errno()){
            printf("Connect failed: %s\n", mysqli_connect_error());
            exit();
        }else{
            echo 'connection made';
        }
    }

    public function q($sql){
        $query = $sql;
        self::preparedStatement($query);
    }

    public function preparedStatement($query){
        $i= 0; //index
        $result = array();

        if ($stmt = $this->db->prepare($query)){ 

            /* execute statement */
            if($stmt->execute()) {
                $stmt->bind_result($name);
                while($stmt->fetch()) {
                    $result[0] = $name;
                }
            } else
                echo "error";

            /* close statement */
            $stmt->close();
        } else {
            echo "Prepare failed: (" . $stmt->errno . ") " . $stmt->error;
        }

        return $result;
    }

    public function __destruct(){}

}

### Test code

$db = new Database();
$res = $db->q("SELECT name FROM test");
echo $res[0];

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T04:43:24.833

首先，删除循环`0`中的。`while`您希望将值一个接一个地存储在一个数组中，您所做的总是覆盖数组中的第一个值，并且您需要将您从中获得的值存储`fetch()`在一个临时数组中。

```
while($row = $stmt->fetch(MYSQLI_ASSOC)) {
   $result[] = $row['name'];
} 
```

其次，您需要您的`q()`函数返回一些值，因此将最后一条语句更改为

```
return self::preparedStatement($query); 
```

请花一些时间在谷歌上搜索这个并查看其他人如何做的例子。

# c++ - 如何在 C++ 中优化对象返回？

> ID：11662384
> 
> 赞同：2
> 
> 时间：2012-07-26T04:34:09.007
> 
> 标签：c++, optimization, object, compiler-construction, return

考虑下面的代码。

```
// Consider that MyObject receives three integers in it's constructor.
MyObject createObject()
{
    MyObject result(1, 2, 3);
    return result;
} 
```

据我所知，当您在 C++ 中返回一个对象（如在此函数中）时，编译器将在堆栈中为客户端创建一个新对象（作为局部变量）。在此示例中，它将是一个新`MyObject`对象，将使用带有`result`as 参数的复制构造函数创建。这意味着机器的冗余处理：对象`result`将在堆栈​​中创建，然后将创建并返回第二个对象。避免这种情况的另一种方法是动态创建对象（不在堆栈中），然后返回它的指针。但这会导致内存泄漏或强制客户端在使用后删除对象。因此，我找到的解决方案是使用智能指针，如下所示：

```
// Consider that MyObject receives three integers in it's constructor.
boost::smart_ptr<MyObject> createObject()
{
    boost::smart_ptr<MyObject> result(new MyObject(1, 2, 3));
    return result;
} 
```

这可行，但智能指针仍然是一个将被重新创建的对象（即使成本很低，因为基本上它只包含一个指针）。我在猜测是否有一种方法可以更轻松地做到这一点；或者如果编译器还没有实现优化这项工作的方法或类似的东西。是否有语法告诉编译器做我想做的事？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T04:39:32.007

首先分析您的代码，我 99% 确定复制没有开销。

NRVO 存在并且很可能会在这种情况下发挥作用。

如果不是复制省略，返回集合（like`std::vector`和 likes）会导致大量问题。

> 当您在 C++ 中返回一个对象时（如在此函数中），编译器将在堆栈中为客户端创建一个新对象（作为局部变量）。

并不真地。它可能会直接在调用上下文中创建，正是为了防止额外的副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T04:57:59.007

如果你愿意使用 C++11，你可以使用“移动语义”。让我先举一个例子来解释：

```
class expensive {
public:
     expensive() : n(0), V(NULL) {}
     expensive(int _n) {
         n = _n;
         V = new int[_n];
         for (int i = 0; i < n; ++i) V[i] = i*i;
     }

     expensive(const expensive& rhs) { // copy constructor
          n = rhs.n;
          V = new int[n];
          for (int i = 0; i < n; ++i) V[i] = rhs.V[i];
     }
     expensive(expensive&& rhs) { //move constructor
          n = rhs.n;
          V = rhs.V;
          rhs.n = -1;
          rhs.V = NULL;
          printf("Moving\n");
     }
     ~expensive() {
          if (n == -1) printf("Destroying 'moved' instance\n");
          if (V) delete [] V;
     }
private:
     int *V;
     int n;
};
expensive f(int x) {
    expensive temp(50);
    expensive temp2(temp); // Copy temp to temp2, both are valid now
    expensive temp3(std::move(temp)); // Move temp to temp3, temp is not valid anymore
    return std::move(temp2); // move temp2 to the return 
}
int main() {
    expensive E = f(30);
    return 0;
} 
```

这个程序的输出是：

```
Moving
Moving
Destroying 'moved' instance
Destroying 'moved' instance 
```

所有普通的 STL 容器都支持移动语义。此外， std::swap 使用它（因此也使用 std::sort ）。

编辑：如前所述，如果正在使用 NRVO，则最后一个 std::move 是不必要的。让我举一个更复杂的例子。这是一个玩具示例，但它应该表明我的观点。

```
class expensive {
    ... // Same definition as before
}
expensive g(int x) {
    vector<expensive> V;
    V.reserve(2*x);
    for (int i = 1; i <= x; ++i)
         V.push_back(expensive(i)); // Here the objects are moved to the vector
    for (int i = 1; i <= x; ++i)
         V.emplace_back(i); // Here the objects are constructed directly in the vector
    return std::move(V[x/2]); // V[x/2] is moved to the answer
}
int main() {
    expensive x(g(2)); // 3 objects should be moved, 2 in push_back and one on the return
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T05:18:33.347

来源：http: [//blogs.msdn.com/b/slippman/archive/2004/02/03/66739.aspx](http://blogs.msdn.com/b/slippman/archive/2004/02/03/66739.aspx)

编译器优化器足够聪明，可以弄清楚发生了什么，所以在优化时它会在内部重写调用：

```
void CallingFunction()
{
    // Call to createObject() gets eliminated through transformation
    // since in this case it's only code was the initialization
    MyObject obj(1, 2, 3);

    // ... do stuff
} 
```

# java - 随机内部 500 服务器错误

> ID：11662386
> 
> 赞同：1
> 
> 时间：2012-07-26T04:34:46.347
> 
> 标签：java, apache, internal

我在生产环境中收到一个随机的内部 500 服务器错误。

我们试图在测试环境中复制相同的内容，但无济于事。

错误消息通常显示在网页的末尾，它不会经常出现，但在任何页面中偶尔会出现一次，然后它会消失，就像它从未发生过一样，并且在日志文件中没有任何条目。

我们已经浏览了错误显示的页面上的代码，但它们在那里并没有错。

但是，主要问题是错误消息中的详细信息，例如服务器信息和其他详细信息。

```
HTTP/1.1 500 Internal Server Error Date:Tue,26 Jun 2012 02:33:47 GMT Server:Oracle-Application-Server-10g Last-Modified: Sat. 16 Jun 2012 11:29:47 GMT ETag: "1cb1e-49d-2fed6e2b" Accept-Ranges: bytes Content-Length:729 Connection:close Content-Type: text/html 
```

我们尝试过但无法阻止这些细节的出现。

如果有人能告诉我要添加的配置参数以阻止这些细节出现，那就太好了。

如果有人遇到同样的问题并且可以指出解决方案，那就太好了。

谢谢和欢呼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:38:52.050

您的问题不清楚。但是“HTTP/1.1 500 Internal Server Error”导致无法完成请求。[这](http://www.addedbytes.com/for-beginners/http-status-codes/)是学习服务器错误的参考。如果您想获得更正确的答案，请完全支持您的问题（例如.support服务器日志文件或代码示例）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:39:03.233

您可以使用 Java 过滤器来抑制内部 500 错误。我在生产环境中遇到了同样的错误。您可以将 java 过滤器用于特定页面或整个应用程序。从过滤器中收到的响应中找出Java过滤器中的内部500错误，并用空白将其抑制。

# ruby-on-rails - 如果模型已经存在，如何仅为控制器和视图制作脚手架？

> ID：11662392
> 
> 赞同：28
> 
> 时间：2012-07-26T04:35:53.513
> 
> 标签：ruby-on-rails, ruby-on-rails-3, scaffolding, scaffold

我已经设置了`Devise`我的应用程序。
所以用户模型已经生成，并且通过安装存在`Devise`

现在我想添加我自己的控制器`users_controller.rb`及其视图`index`和`show`.
如何在不影响已经存在的用户模型的情况下制作脚手架？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-04-16T06:04:31.160

试试这个 ，

```
rails g scaffold_controller controller_name 
```

您将通过以下方式找到更多选择

```
rails generate -h 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-26T04:46:57.313

对于只有“名称”列的脚手架：

```
rails g scaffold User name --skip 
```

只需添加一些列。

查看`rails g scaffold -h`输出以获取更多信息。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-26T05:30:30.133

如果您只想要控制器和视图而没有整个脚手架，您可以这样做：

```
rails generate controller Users index show 
```

# cocos2d-iphone - CCMenuItemLabel 不在模拟器中运行选择器

> ID：11662396
> 
> 赞同：0
> 
> 时间：2012-07-26T04:36:36.530
> 
> 标签：cocos2d-iphone, selector, ccmenuitem

我不能在我的手机上测试这个，因为我很穷，而且是一个新的 iOS 程序员，所以我不知道这只是模拟器的问题还是什么。cocos2d 也很新，所以请多多包涵。我正在为我的游戏制作一个开始屏幕。我在左上角和右上角制作了一个带有云的背景图像。然后在每个云上放一个CCMenuItemLabel，让它看起来很漂亮。它非常有效....直到您尝试单击任何一个按钮，在这种情况下什么都没有发生！这是我现在拥有的代码。

**主菜单：CCScene**

```
@implementation MainMenu

-(id) init {

  // Play Label to left cloud
  CCLabelTTF * playLabel = [CCLabelTTF labelWithString:@"Play" fontName:@"Marker Felt" fontSize:24];
  playLabel.color = ccBLACK;
  CCMenuItemLabel * play = [CCMenuItemLabel itemWithLabel:playLabel target:self selector:@selector(playGame)];
  CCMenu * playmenu = [CCMenu menuWithItems:play, nil];
  playmenu.position = ccp(s.width/5,s.height - 55);
  [self addChild:playmenu z:10];

  // Options label to right cloud
  CCLabelTTF * optionsLabel = [CCLabelTTF labelWithString:@"Options" fontName:@"Marker Felt" fontSize:24];
  optionsLabel.color = ccBLACK;
  CCMenuItemLabel * options = [CCMenuItemLabel itemWithLabel:optionsLabel target:self selector:@selector(options)];
  CCMenu * optmenu = [CCMenu menuWithItems:options, nil];
  optmenu.position = ccp(s.width - s.width/5,s.height - 55);
  [self addChild:optmenu z:10];

  // Add background at z:-1 plus other

}

@end 
```

s 是我的屏幕尺寸，其余的似乎很简单。这都在扩展 CCScene 的 MainMenu.m 中。截至目前，我的选择器只是 NSLogs，以确保点击有效。他们中的任何一个都不会运行。

**我试过的：**

根据 cocos2d 论坛的建议，我将两个选择器更改为`@selector(playGame:)`，然后将方法更改为，`-(void)playGame:(id) sender`但这也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T19:47:12.870

最后，我使用相同的模板开始了一个新项目。我从上面输入完全相同的代码并运行它。它适用于这个项目。所以我开始将旧项目中的东西复制并粘贴到这个项目中，试图看看是什么让它坏了，最后没有任何东西坏了它。我想它一定是在构建阶段或其他东西，但现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:08:09.103

现在我在 cocos2D 2.0 示例中使用了相同的代码。它工作正常。

我猜你没有为你的图层启用触摸。在 CCLayer 的 init 方法中使用此代码。

```
 self.isTouchEnabled = YES; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-11T07:43:53.257

我知道它是一个旧线程，但我今天遇到了同样的问题。

这是我必须做的，让它工作，

*   设置`CCMenuItemLabel * play`to的位置`ccp(s.width/5,s.height - 55)`
*   将位置更改`CCMenu *playmenu`为`CGPointZero`。

例子

```
play.position = ccp(s.width/5,s.height - 55);
playmenu.position=CGPointZero; 
```

# snmp - nagios 被动检查配置

> ID：11662400
> 
> 赞同：0
> 
> 时间：2012-07-26T04:37:18.893
> 
> 标签：snmp, nagios

我编写了一个在 linux 上运行并在出错时发送 snmptraps 的 C++ 程序。使用 nsca 配置陷阱以到达运行 nagios 的中央 linux 机器。中央 nagios 服务器配置了一个用于被动检查的命令 - check_command check_dummy!0 “无来自被动检查的数据”。当陷阱进入时，它会显示在服务部分。然后 nagios 立即（10 秒内）显示“No Data from passive check”。然后查看陷阱的唯一方法是检查报告部分的通知、警报等。有没有办法配置 nagios 以使收到的陷阱显示至少 2 到 3 分钟？理想情况下，我希望显示陷阱，直到收到下一个陷阱为止。

感谢任何帮助/指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:09:03.897

Nagios 在被动检查期间有如下记录。你检查过 Nagios.log 吗？

例如，这是我的成功被动检查的 Nagios.log：

> $ tail /var/log/nagios/nagios.log
> [1342862795] 外部命令：PROCESS_SERVICE_CHECK_RESULT；adserver；CPU 负载；0；OK CPU 负载正常。|'5m'=0%;80;90 '1m'=1%; 80;90 '30s'=3%;80;90
> [1342862805] 被动服务检查：adserver；CPU 负载；0；OK CPU 负载正常。
> [1342862825] 外部命令：PROCESS_SERVICE_CHECK_RESULT;adserver;CPU 负载;0;OK CPU 负载正常。|'5m'=0%;80;90 '1m'=2%;80;90 '30s'=2%;80; 90
> [1342862835] 被动服务检查：adserver；CPU 负载；0；OK CPU 负载正常。
> [1342862855] 外部命令：PROCESS_SERVICE_CHECK_RESULT;adserver;CPU 负载;0;OK CPU 负载正常。|'5m'=0%;80;90 '1m'=2%;80;90 '30s'=2%;80; 90
> [1342862865] 被动服务检查：adserver；CPU 负载；0；OK CPU 负载正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T17:32:01.063

在 services.cfg 中将以下内容添加到您的服务中

> ```
> check_freshness                1
> freshness_threshold            300
> check_command check_dummy!0 "No Data from passive check" 
> ```

这将使服务显示您的输出 5 分钟，除非您在此期间再次发送 SNMP 陷阱。

# mysql - Mysql：如何在不知道ID的情况下将数据添加到行中？

> ID：11662405
> 
> 赞同：1
> 
> 时间：2012-07-26T04:37:50.093
> 
> 标签：mysql, sql

所以我正在编写一个脚本，希望可以用新值填充我的数据库。数据按它们所在的顺序一一对应。数据存储在 PHP 中的一个数组中。所以第一行将映射到我拥有的第一个元素，第二行和第二个数据，依此类推。

我打算只是回显它并从命令提示符传递 sql ALTER 语句。所以我的问题是，如何在不知道 ID 的情况下通过向某个列添加/更改新数据来更改一行。我所拥有的只是按照它们所在的顺序进行的 1 对 1 对应。

谢谢，非常感谢任何帮助。

编辑：

```
| id  | key                               | name               | address             

+-----+-----------------------------------+--------------------+----------------
|   1 | quests_buildloggingcamp_type      | Build              |                            
|
|   3 | quests_buildquarry_type           | Build              | 
```

所以我在另一个文档中有这些数据。

```
1\. 394 cakeville road.       
2\. 2912 mark street.
3\. more addresses... 
```

我想将第一个地址添加到第一行（id = 1），将第二个地址添加到第二行（id = 3）。我可以每次增加 ID，但是因为我删除了一行，所以缺少 ID=2，我想正确添加它们而不跳过任何地址，因为我的行数与地址相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T04:44:05.587

如果你有一个`PRIMARY KEY`or`UNIQUE KEY`在桌子上，那么这样的东西对你有用：

例如，如果您有一个`UNIQUE KEY`on 列`a`，则执行以下操作：

```
INSERT INTO table (a,b,c) VALUES (1,2,3)
ON DUPLICATE KEY 
       UPDATE b = 2,
              c = 3; 
```

有关语法和示例，请访问[此处](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

编辑：在脚本内部循环尝试此查询，以将每条记录更新到下一行：

一次外循环：

```
UPDATE table
SET address = ''; 
```

内循环：

```
UPDATE table
SET address = 'new address'
WHERE address = ''
ORDER BY id ASC
LIMIT 1; 
```

# mercurial - Mercurial 合并问题

> ID：11662409
> 
> 赞同：0
> 
> 时间：2012-07-26T04:38:22.393
> 
> 标签：mercurial

这就是发生的事情。

克隆原始目录以创建功能。

克隆目录在原始目录提交更改之前被推送到原始目录。

然后原件被提交。

我不知道如何将两者合并在一起的更改。无论我尝试了什么，都只是在两者之间切换。我可以选择要恢复的单个文件，但我似乎无法进行实际的合并。Mercurial 似乎认为不需要合并。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:28:02.897

如果您在同一个命名分支中有两个头，您只需运行`hg merge`以合并它们。

如果您收到一条消息，告诉您没有要合并的内容，这意味着您在该分支中只有一个头。你可以用`hg heads`.

分支已经合并，或者它们位于不同的命名分支中。如果是这种情况，您必须显式键入要合并的分支名称：

1.  转到将接收更改的分支：`hg update <branch>`
2.  告诉 mercurial 与另一个分支的更改合并：`hg merge <other_branch>`

检查图表也是一个很大的帮助。您可以使用 TortoiseHg 之类的 GUI 或在终端中使用[GraphLog 扩展](http://mercurial.selenic.com/wiki/GraphlogExtension/)来完成。如果没有图形视图来检查发生了什么，我就无法工作。

# ios - Facebook SDK 登录问题

> ID：11662415
> 
> 赞同：0
> 
> 时间：2012-07-26T04:38:56.280
> 
> 标签：ios, facebook, login, sdk

使用 Hackbook Facebook 代码，我在用户登录 Facebook 后屏幕出现问题。用户登录后，他/她会立即获得相同的登录前屏幕。当按下登录按钮时，她/他会进入正确的 (showLoggedIn) 屏幕。下面是使用的代码，但我还没有弄清楚必要的更改。

有没有什么方法可以中断登录 Facebook 的代码，然后在登录序列（通过浏览器）之后继续下一个序列（showLoggedIn）？谢谢你。

```
- (void)login {
    HackbookAppDelegate *delegate = (HackbookAppDelegate *)[[UIApplication sharedApplication] delegate];
    if (![[delegate facebook] isSessionValid]) {
        [[delegate facebook] authorize:permissions];
    } else {
        [self showLoggedIn];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:57:13.363

试试这个托德

```
- (void)login {

// Check and retrieve authorization information
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"FBAccessTokenKey"] && [defaults objectForKey:@"FBExpirationDateKey"]) {
    facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
    facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
}
if (![facebook isSessionValid]) {
    facebook.sessionDelegate = self;
    NSArray *permissions = [[NSArray alloc] initWithObjects:
                            @"user_likes", 
                            @"read_stream",
                            //@"user_about_me",
                            //@"email",
                            //@"publish_stream",
                            @"publish_actions", 
                            @"offline_access",
                            nil];
    [facebook authorize:permissions];
    //  [permissions release];
} else {
    [self showLoggedIn];
}
} 
```

我正在使用 ARC，这就是我评论许可发布的原因，我希望这能满足您的需求

# c# - 适用于 64 位机器的 .NET 扫描 API

> ID：11662418
> 
> 赞同：2
> 
> 时间：2012-07-26T04:39:21.753
> 
> 标签：c#, scanning, twain

是否有 .Net 扫描 API 可用于 64 位机器从扫描仪扫描文档或图像？谁能给我这个示例代码。

谢谢阿西夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T11:28:03.810

我们使用leadtools sdk 来满足类似的需求。他们确实有 64 位版本，但我们实际上发现许多硬件制造商并没有提供 64 位驱动程序。也许自从我们上次检查以来，情况发生了变化。我们使用本 [教程](http://www.leadtools.com/help/leadtools/v175/dh/tw/leadtools.twain~leadtools.twain.twainsession~acquire.html)开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-13T05:03:16.640

您的项目中很可能有一个“x86”（32 位）引用，例如 DotTwain。“任何 CPU”意味着 .NET 框架将其作为“x64”运行，因为您已经告诉它一切正常。然后它尝试加载一个引用，发现它是 32 位的并给出一个“BadImageFormatException”（通常）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T05:34:48.147

对不起，我没有看标签。开源/免费，最著名的 TWAIN API 已被另一位用户提及。[http://www.codeproject.com/Articles/1376/NET-TWAIN-image-scanner](http://www.codeproject.com/Articles/1376/NET-TWAIN-image-scanner)

但是，Atalasoft 的以下 URL 提供了用于 Web 和桌面环境的最佳付费 TWAIN 组件。

[Atalasoft TWAIN 扫描 SDK](http://www.atalasoft.com/products/dotimage/dottwain)

它非常灵活、快速且可靠。我已经使用了多年。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T05:11:46.760

您可以通过 DllImport 使用 WIA（Windows 图像采集）或 TWAIN。

这是 WIA 的一个示例：http: [//miljenkobarbir.com/using-a-scanner-without-dialogs-in-net/](http://miljenkobarbir.com/using-a-scanner-without-dialogs-in-net/) 该帖子包含大量评论以帮助您理解它。

这是关于使用 TWAIN 的代码项目文章：http: [//www.codeproject.com/Articles/1376/NET-TWAIN-image-scanner](http://www.codeproject.com/Articles/1376/NET-TWAIN-image-scanner)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-18T08:37:15.557

与许多其他库不同，[适用于 TWAIN 扫描仪的 Asprise C# VB.NET Scanning & Imaging SDK](http://asprise.com/c%23-vb.net-scanner-api/twain-wia-scan-pdf-library-overview.html)适用于 64 位和 32 位应用程序。默认情况下，几乎所有供应商都只提供 32 位 TWAIN 驱动程序，因此大多数扫描仪不会出现在 64 位环境中。

> Asprise Scanning SDK 可能是唯一适用于 64 位和 32 位应用程序的扫描库，这要归功于我们创新的正在申请专利的技术和质量实施。

[![在此处输入图像描述](../Images/10b1d01a08e152ea42b75afe6efbf9b0.png)](https://i.stack.imgur.com/SHXJX.png)

*   *免责声明：我为 Asprise 工作*

# iphone - 在包含 AudioToolbox 框架的 Objective-C iOS 项目中找不到 AudioServices.h

> ID：11662426
> 
> 赞同：4
> 
> 时间：2012-07-26T04:39:46.110
> 
> 标签：iphone, ios, audiotoolbox

根据苹果文档，AudioServices.h 应该是 AudioToolbox 框架的一部分。

即使我已将 AudioToolbox 框架添加到我的 Xcode 项目中，但当我 #import AudioServices 时出现错误：未找到 AudioServices.h 文件。

无论我输入 #import "AudioServices.h" 都会发生这种情况

或 #import "AudioToolbox/AudioServices.h" 。

以防万一，我尝试删除然后重新添加 AudioToolbox 框架，但没有效果。AudioServices 文件会以某种方式损坏吗？（如果是这样，有谁知道我可以在哪里下载另一个副本？）

我正在使用 XCode 4.2，但是当我转换一些旧的开源代码时，该项目设置为与 XCode 3.2 兼容。这可能是问题吗？

我确定我错过了一些简单的东西。我对编程完全陌生......任何帮助表示赞赏！

-----编辑（见下面我的评论）-----

在 AudioServices.h 中，有问题的两个函数：

```
extern OSStatus
AudioSessionInitialize( CFRunLoopRef                        inRunLoop, 
                        CFStringRef                         inRunLoopMode, 
                        AudioSessionInterruptionListener    inInterruptionListener, 
                        void                                *inClientData)              

extern OSStatus
AudioSessionAddPropertyListener(    AudioSessionPropertyID              inID,
                                    AudioSessionPropertyListener        inProc,
                                    void                                *inClientData) 
```

在 SpeakHereController.mm （来自示例 Apple 代码）中，我试图将其转换为 ARC 以使其与我项目中的其他文件更好地协作：

```
- (void)awakeFromNib
{       

// Allocate our singleton instance for the recorder & player object
recorder = new AQRecorder();
player = new AQPlayer();

OSStatus error = AudioSessionInitialize(NULL, NULL, interruptionListener, self);
if (error) printf("ERROR INITIALIZING AUDIO SESSION! %ld\n", error);
else 
{
    UInt32 category = kAudioSessionCategory_PlayAndRecord;  
    error = AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(category), &category);
    if (error) printf("couldn't set audio category!");

    error = AudioSessionAddPropertyListener(kAudioSessionProperty_AudioRouteChange, propListener, self);
    if (error) printf("ERROR ADDING AUDIO SESSION PROP LISTENER! %ld\n", error);
    UInt32 inputAvailable = 0;
    UInt32 size = sizeof(inputAvailable);

    // we do not want to allow recording if input is not available
    error = AudioSessionGetProperty(kAudioSessionProperty_AudioInputAvailable, &size, &inputAvailable);
    if (error) printf("ERROR GETTING INPUT AVAILABILITY! %ld\n", error);
    btn_record.enabled = (inputAvailable) ? YES : NO;

    // we also need to listen to see if input availability changes
    error = AudioSessionAddPropertyListener(kAudioSessionProperty_AudioInputAvailable, propListener, self);
    if (error) printf("ERROR ADDING AUDIO SESSION PROP LISTENER! %ld\n", error);

    error = AudioSessionSetActive(true); 
    if (error) printf("AudioSessionSetActive (true) failed");
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-09T14:47:31.293

问题是当您使用 ARC 时，系统无法自动将*self转换为 void *。*Self 用于 AudioSessionInitialize 函数（和其他）的最后一个参数。

您需要告诉 ARC 如何通过使用 __bridge 手动将其强制转换为 void * 来控制内存的所有权。这表示“不要更改内存的所有权”。

因此，在调用 AudioSession 函数时将 self 更改为 (__bridge void *)self。

例如

```
OSStatus error = AudioSessionInitialize(NULL, NULL, interruptionListener, (__bridge void*)self); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T04:46:34.583

试试“ `#import <AudioToolbox/AudioServices.h>`”，看看你的问题是否消失了。

< 和 > 字符会有所不同。在“”中使用双引号`#import`意味着您希望编译器搜索“用户标头”，其中尖括号表示您希望编译器在系统框架中搜索。

# html - 文本对齐：中心不影响显示：内联块

> ID：11662434
> 
> 赞同：1
> 
> 时间：2012-07-26T04:41:02.597
> 
> 标签：html, css, web

我对此很陌生，所以如果我需要更具描述性，请原谅我。我的网站上有一个副标题，我希望以标题为中心。但是，我也想给字幕一个底部边框。我希望边框与字幕的长度相同，所以我想我会显示：inline-block 和 text-align: center。然后，通过底部边框应用。但是，它不起作用。字幕保持与左侧对齐。我在下面附上了我的 HTML 和 CSS：

[我的 HTML](http://i.stack.imgur.com/liIFo.png)

[我的 CSS](http://i.stack.imgur.com/Z2WO2.png)

[我的页面目前的样子](http://i.stack.imgur.com/m9aBE.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T04:58:12.067

我想你正在寻找这个：[**SEE DEMO**](http://jsfiddle.net/akhurshid/PjARh/)

通过应用**padding-bottom**你可以实现这一点。

**CSS：**

```
h2 {
    font-family: Georgia;
    font-style: italic;
    font-size: 25px;
    color: black;
    padding-bottom:5px;
    border-bottom: 1px solid #000;
    display: inline-block;    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T04:47:53.703

解决问题的快速方法是摆脱`display: inline-block;`和`border-bottom`添加`text-decoration: underline`属性。[检查此 JSFiddle](http://jsfiddle.net/Tbp69/)以查看结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T04:50:43.660

只给出`text-decoration:underline;`而不是边界底部；

**HTML**

```
<h1>tittle</h1>
<h2>subtittle</h2> 
```

**CSS**

```
h1 {
text-align:center;
}

h2 {
text-align:center;
text-decoration:underline;
} 
```

看演示：- [http://tinkerbin.com/7LQqmXkZ](http://tinkerbin.com/7LQqmXkZ)

**更新的答案**

您可以使用`span`下面的标签`h2`并给予标签`border-bottom`而`span`不是给予`padding-bottom`，所以我希望你能得到你想要的结果....

**HTML**

```
<h1>tittle</h1>
<h2><span>subtittle</span></h2> 
```

**CSS**

```
h1 {
text-align:center;
}

h2 {
text-align:center;
}

h2 span {
border-bottom:1px solid red;
padding-bottom:5px;
} 
```

[http://tinkerbin.com/gUQO8U7u](http://tinkerbin.com/gUQO8U7u)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T05:15:35.030

您需要应用`text-align: center`到包含`h2`而不是`h2`本身的块，因为当元素变成内联块时（为了将其宽度设置为内容所需的最小宽度），将其内容居中是没有用的。（这只会使包含在与文本宽度相同的框中的文本居中。）

问题可以简化为：

```
<!DOCTYPE html>
<style>
h2 {
  display: inline-block;
  border-bottom: 1px solid black;
  text-align: center;
}
</style>
<hgroup>
<h1>Ken Fedor</h1>
<h2>Designer. Developer. Dreamer.</h2>
</hgroup> 
```

此处的修复是将以下内容添加到样式表中：

```
hgroup {
  text-align: center;
} 
```

（这就是使 A.K 的答案中的 jsfiddle 演示起作用的原因：此代码存在，尽管答案文本中未提及。填充的使用与问题无关。）

# php - HTML页面没有使用php脚本从数据库中获取价值

> ID：11662436
> 
> 赞同：-1
> 
> 时间：2012-07-26T04:41:11.550
> 
> 标签：php, javascript, mysql

我正在使用 php 脚本从 mysql 数据库中获取数据问题是表中有数据但是当我获取返回时 NO 仅

它显示以下错误

```
Warning: mysql_fetch_assoc(): supplied argument is not a valid MySQL result resource in /home/content/i/h/u/ihus235/html/cs/emrapp/surveyDescription.php on line 73 
```

[]

代码

```
 <html<body>
   <INPUT TYPE = "Text" VALUE ="user_id" NAME = "user_id"> This form allows you to connect to the server.<br>
   <form action="surveyDescription.php" method="post" enctype="multipart/form-data"><br>

   Type (or select) Filename: 
    <input type="submit" value="submit">
    </html> 
```

PHP代码

```
 <?php 
   $host = "********"; 
   $user = "********"; 
   $pass = "********"; 
   $database = "****"; 

   $linkID = mysql_connect($host, $user, $pass) or die("Could not connect to host."); 
   mysql_select_db($database, $linkID) or die("Could not find database."); 

  if (!function_exists('json_encode'))
  {
   function json_encode($a=false)
  {
  if (is_null($a)) return 'null';
  if ($a === false) return 'false';
  if ($a === true) return 'true';
  if (is_scalar($a))
   {
    if (is_float($a))
    {
    // Always use "." for floats.
    return floatval(str_replace(",", ".", strval($a)));
    }

    if (is_string($a))
    {
    static $jsonReplaces = array(array("\\", "/", "\n", "\t", "\r", "\b", "\f", '"'), array('\\\\', '\\/', '\\n', '\\t', '\\r', '\\b', '\\f', '\"'));
    return '"' . str_replace($jsonReplaces[0], $jsonReplaces[1], $a) . '"';
    }
    else
    return $a;
    }
    $isList = true;
    for ($i = 0, reset($a); $i < count($a); $i++, next($a))
    {
    if (key($a) !== $i)
    {
     $isList = false;
     break;
     }
     }
     $result = array();
     if ($isList)
     {
     foreach ($a as $v) $result[] = json_encode($v);
     return '[' . join(',', $result) . ']';
     }
     else
     {
     foreach ($a as $k => $v) $result[] = json_encode($k).':'.json_encode($v);
     return '{' . join(',', $result) . '}';
     }
     }
     }

   $user_id=$_POST['user_id'];
   $query = mysql_query("SELECT s.*, u.user_id FROM survey_master AS s 
   JOIN user_profile AS u on u.user_id = s.user_id where s.user_id=$user_id");

   $rows = array();
 while($row = mysql_fetch_assoc($query)) {
 $rows[] = $row;
 }
echo json_encode($rows);

  ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:07:33.110

放入`<input>`你的`form`标签

```
<body>

   <form action="surveyDescription.php" method="post" enctype="multipart/form-data"><br>
   <INPUT TYPE = "Text" VALUE ="user_id" NAME = "user_id"> This form allows you
    to connect to the server.<br>
   Type (or select) Filename: 
   <input type="submit" value="submit">
    </form>

</body> 
```

更多语法错误：

`<html>`标签丢失 ">" 并且您没有`<body>`在最后关闭标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T04:49:48.197

问题在

```
$query = mysql_query("SELECT s.*, u.user_id FROM survey_master AS s 
JOIN user_profile AS u on u.user_id = s.user_id where s.user_id=$user_id"); 
```

可能是 $user_id 没有任何价值。请检查。

# c# - 我们是否应该使用单例模式来创建连接？

> ID：11662442
> 
> 赞同：3
> 
> 时间：2012-07-26T04:41:48.443
> 
> 标签：c#, java, asp.net, singleton

我见过有人说可以在数据访问层使用单例模式来创建连接。其他人说我们不应该使用单例模式。双方给出的论点在一定程度上是有效的，但从软件工程的角度来看，什么是正确的。对于 Web 应用程序的示例，我们应该对数据访问层使用单例模式。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:25:00.227

1）使用框架提供的连接池api，如Hibernate或服务器如Tomcat。通过使用它们，您已经在您的应用中拥有了最佳实践。

2）如果要创建自定义连接提供程序类。最好通过将构造函数设为私有来使其不可实例化。没有 getInstance 方法。仅提供接受连接配置的静态辅助方法。URL、用户名等参数，传递并返回 java.sql.DataSource 或 java.sql.Connection 对象。

# sql-server - 通过为自己的数据集/数据表提供值来生成 ssrs 报告 (.rdl)

> ID：11662443
> 
> 赞同：2
> 
> 时间：2012-07-26T04:41:51.377
> 
> 标签：sql-server, ssrs-2008, reporting-services, reportingservices-2005

通常在 SSRS 报告中，要创建报告，我们定义数据源，然后定义查询、选择报告布局和其他属性。然后在运行时报告服务触发设计时提供的查询并获取数据集/数据表并将数据与报告结构/网格绑定。

我的 rdl 报告已经托管在服务器上，在运行时我想用我的数据替换报告引擎在报告中获取的数据。由于一些限制，我不能让报告引擎查询我的数据库。

现在我可以自己从任何数据源获取数据，创建值的数据集/数据表并将此数据集/数据表传递给报告引擎以将其与报告绑定吗？所以基本上我想从报告引擎中得到的是：不要在设计时触发查询定义，而是将我的数据集/数据表在结构和除数据值之外的所有内容上都放在报告引擎在触发后将获得的数据集/数据表中询问。

有没有办法使用 RDLobjectModel 或 ReportService2010 或 ReportExection 服务或这些服务的组合或可能是其他东西来实现上述目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:40:55.520

好吧，我得到了解决方案：自定义数据处理扩展 [http://msdn.microsoft.com/en-us/library/ms152816(v=sql.105](http://msdn.microsoft.com/en-us/library/ms152816(v=sql.105) )

DPE 负责从数据源获取数据并将其返回给 ssrs 服务器。SSRS 中有几个内置的 DPE，如 SQL、OLEDB、XML 等。同样，我们可以编写自己的自定义 DPE 并将其注册到 SSRS 以及 BI studio。在自定义 DPE 中，我将编写自定义代码以获取具有实际值的 system.data.dataset 并将其返回给 SSRS。

或者，我可以在创建报表时使用 XML DPE 并使用嵌入式 XML 作为数据源，并且在运行时我可以使用 ReportService 和 RDLObjectModel 将这个嵌入式 XML 替换为表示数据集的 XML。

# python - python中的库、包、模块和脚本是什么意思

> ID：11662449
> 
> 赞同：-2
> 
> 时间：2012-07-26T04:42:43.063
> 
> 标签：python

我已经阅读了 python 的文档和许多关于 含义的资料`package, library, module and script`，我得到了一些，我知道这是一个基本问题，但它令人困惑并且了解它们之间的区别非常重要。我知道这是基本问题，但请不要投反对票，因为肯定这对其他人有用。

包：有 `__init__.py`文件

模块：由 Python 代码组成的 Python 文件

任何人都可以很容易地解释而不会混淆它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:15:15.447

对于初学者来说，这个怎么样：

一个[模块](http://docs.python.org/tutorial/modules.html)通常是一段 Python 代码（即*脚本*），它不是由 PVM 在顶层解释/执行的，即 with `__name ='__main__'`，而是从调用脚本中导入的。因此，来自模块的定义存在于它自己的命名空间中。

换句话说，您的任何*脚本*都可以从您的其他代码片段中导入，从而充当*模块*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:19:02.603

它们基本上都意味着相同的东西，一个文件或一组文件包含 python 代码，python 使它们之间的区别变得透明，因此不那么重要。但它们的含义确实略有不同。

“脚本”是主要用于执行的 .py 文件，而“库”是主要用于由另一个脚本导入的 .py 文件。但是，单个 .py 文件可以并且通常同时作为脚本和库编写。timeit 模块就是这种脚本/库对偶性的一个例子，如果你从命令行执行 timeit 模块，它会接受一个命令行参数，其中包含你想要进行微基准测试的 python 代码；但您也可以将 timeit 模块导入微基准测试函数或要评估/执行的字符串。

模块与库相同，因为它主要用于导入，但有时人们使用模块一词来引用 .py 文件，而不必暗示该文件是否可执行（因此是脚本）或可导入（因此是图书馆）。如果您不确定文件是要执行还是要导入，使用这个词会更安全；或者如果您想减少对文件性质的重视；或者，如果您想引用包含可执行脚本和库的文件集合以进行导入。从这个意义上说，它是更中性的词。

包专门指`a folder containing an __init__.py`至少一个或多个其他 .py 文件（从技术上讲，仅包含**init** .py 的文件夹也是一个包，但它们应该只转换为单个 .py 模块）。因此，包是比模块/库更高的层次结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T05:43:40.663

我想你需要一个非常基本的解释。

您自己编写的所有内容都可以称为**脚本**。

您在脚本中导入的所有内容都可以称为**modules**。还请记住，您可以将脚本作为可导入的模块，方法是将其放入 python 路径中的目录并在其中包含一个`__init__.py`文件，考虑到您的脚本文件不包含`__name='__main__'`Klaus 提到的。现在这个目录可以像Lie 所说的那样作为一个**包来调用。**

另一种表示 -**包或库**是 pypi 或其他 git 存储库中可用的源文件集，可以针对本地 python 版本构建和安装，并且可以作为脚本中的模块导入。

> 总的来说，您可以编写一个脚本，创建一个相同的包（库），将其托管在 pypi 中，使用 pip 将其下载并安装到您的 python 中，作为模块导入到另一个脚本中。

# android - 图片不适合我的 android avd？

> ID：11662450
> 
> 赞同：-1
> 
> 时间：2012-07-26T04:42:43.703
> 
> 标签：android, android-layout, dpi

好吧，我正在为 android 模拟器使用这些设置

分辨率 - 480x800

抽象 LCD 密度 - 320

最大 VM 应用程序堆大小 - 48

设备内存大小 - 512

并且我的图像大小与 480x800 的 android 模拟器分辨率完全相同，但图像在模拟器上不能水平放置，而且图像的宽度似乎很短，结果是

[http://cubixshade.com/images/img.jpg](http://cubixshade.com/images/img.jpg)

[http://cubixshade.com/images/img2.jpg](http://cubixshade.com/images/img2.jpg)

我不想在 ImageView 上使用 android:background，当分辨率保持与模拟器分辨率相同时，不需要拉伸图像的宽度或高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:48:51.363

您没有考虑状态栏或根据我在图像中可以看出的操作栏。这两者都会减小您的垂直像素大小。请注意，由于 Android 有许多设备尺寸，因此您必须考虑具有许多不同屏幕尺寸的设备，例如 320x480、480x800、480x854、540x960 等。最好的办法是获取图像中的元素并使其适合 Android UI 元素小部件，以便您可以处理多种分辨率。

# javascript - Crockford 的关于构造函数调用模式的代码

> ID：11662451
> 
> 赞同：5
> 
> 时间：2012-07-26T04:43:14.777
> 
> 标签：javascript, function-prototypes

下面的代码几乎与 Douglas Crockford 的名著 JavaScript: The Good Parts 第 29-30 页中的一些代码相同。唯一的区别是他像这样添加了 get_status 属性：

```
Quo.prototype.get_status=function() {
  this.status=string;
} 
```

我的问题是为什么他的代码运行正常，但我在下面的小改动导致了一个错误，说 myQuo 没有 get_status 方法？

```
<script>
  var Quo=function(string) {
    this.status=string;
  }
  Quo.get_status=function() {
    return this.status;
  }
  var myQuo=new Quo("confused");
  alert(myQuo.get_status());
</script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T05:28:19.503

您将方法添加到`Quo`函数对象，而不是其原型，因此它不会被使用创建的实例继承`new Quo()`。以这种方式添加的函数有点像经典 OOP 语言中的静态方法——它可以用 调用`Quo.get_status()`，但它不会被实例继承，而是`this`引用`Quo`函数本身。

```
Quo.status = "foo";
Quo.get_status(); // "foo" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:06:09.430

函数是 JavaScript 中的对象。当您向函数添加属性时，它们不会被该函数的实例继承。但是，当您将属性添加到函数的原型时，它们就会被继承。要了解基于原型的继承如何在 JavaScript 中工作，请阅读[以下答案](https://stackoverflow.com/a/8096017/783743 "JavaScript继承和构造函数属性 - 代码日志")。

# android - 如何使用 sleep [android] 更新 setBackground？

> ID：11662456
> 
> 赞同：0
> 
> 时间：2012-07-26T04:43:34.747
> 
> 标签：android, background, thread-sleep

好吧，我想用 setBackground() 设置一个按钮，但是在这次更新之后，我想在 500 毫秒时让线程休眠，并且在同一个按钮上设置另一个背景之后，所有这些都在一个 onTouch 方法中。例子

```
public boolean onTouch(View v,MotionEvent event){
switch(event.getAction()){
case MotionEvent.ACTION_UP:
   button.setBackground(R.drawable.bckg1);
   try{
      Thread.sleep(500);
      button.setBackground(R.drawable.bckg2);
   }catch(Exception e){}
   break;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:57:14.000

您永远不应该让主 (UI) 线程休眠。android 线程模型有两个规则 1）不要阻塞主线程超过 5 秒（否则你会得到一个 App Not Responding 崩溃）2）不要从主线程操作 UI。即使你只睡了 500 晚，你也试图违反这些规则中的第一条。

相反，使用处理程序并在 5000 毫秒处发布延迟的可运行对象，然后在可运行对象内部更新按钮的背景。

# kerberos - 您如何以编程方式判断 Kerberos 凭证何时到期？

> ID：11662460
> 
> 赞同：1
> 
> 时间：2012-07-26T04:43:56.840
> 
> 标签：kerberos, credentials

当用户执行 kinit 时，会创建 /tmp/krb5cc_* 凭证缓存。在 Linux 上，我如何知道它何时到期？（我使用 C 或 C++ 编程。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:15:29.087

查看 Kerberos V5 API 文档[http://cryptnet.net/mirrors/docs/krb5api.html](http://cryptnet.net/mirrors/docs/krb5api.html) 您还可以查看 klist.c，它是列出凭据的命令行工具实现。

# sql-server-2008 - SQL Server XPath 实现是基于 SAX 还是基于 DOM

> ID：11662465
> 
> 赞同：0
> 
> 时间：2012-07-26T04:44:20.333
> 
> 标签：sql-server-2008, xml-parsing

一个新手问题：

说，我有一个这样的 T-SQL：

```
 DECLARE @xml XML
         SET @xml = '<r><b>123</b></r><r><b>456</b></r>'
      SELECT row.col.value('(b/text())[1]', 'integer') AS b_id
        FROM @xml.nodes('//r') row(col) 
```

在运行 XPath 表达式时，我们是否知道 MS Sql Server 是使用基于 SAX 的解析器还是基于 DOM 的解析器？想要澄清这一点，因为我们正在考虑使用它来将大量数据暂存到临时表中并在临时表上进行进一步处理。为了对数据服务器有礼貌（在消耗 CPU 周期方面），我们希望确保不会引起问题。我尝试在网上搜索，但无法得到明确的答案。

另外，我们应该使用 OPENXML 吗？它比 adhoc 有什么好处吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:45:52.230

我无法回答您的 SAX/DOM 查询，但您的真正问题似乎是如何有效地将 XML 加载到 SQL Server 中。[这个问题](https://stackoverflow.com/questions/868647/how-to-load-huge-but-simple-hierarchical-xml-file-into-an-sql-table)提到了一种方式，SQL Server 文档有[其他](http://msdn.microsoft.com/en-us/library/ms191184%28v=sql.100%29.aspx)方式。

`OPENXML()`可能不是最好的方法，因为您首先必须将整个 XML 文档作为参数传递给[sp_xml_preparedocument](http://msdn.microsoft.com/en-us/library/ms187367.aspx)，这意味着它不是批量加载数据的有用方法。

但是，对您来说，最好和最简单的方法可能是开始测试并查看不同的批量加载解决方案在您的环境中的执行情况。

# javascript - 是否可以将其转换为外部 .js

> ID：11662470
> 
> 赞同：0
> 
> 时间：2012-07-26T04:44:37.380
> 
> 标签：javascript, external

我可以把它变成一个外部脚本吗？

```
<center>
Users online:

<blink>
<sup>
<form>
<TABLE style="background-color:white" border="2"> 
<TD><div id="text"></div></TD>
</TABLE>
</form>
</sup>
</blink>
</center>
<script type="text/javascript">
Function.prototype.allowSleep = function(n) {
  var i, f;
  if (!/^[$\w]+$/.test(n)) return;
  i = 0;
  f = this.toString().replace(/sleep\((.*?)\);/g , function(f,t) {i++; return n+".f"+i+" = function() {"+n+".func"+i+"();};\nsleep("+t+","+n+".f"+i+");\n"+(i==1?"":"}\n")+n+".func" + i +" = function() {";});
  eval(n+'='+f+'\n}');
}
sleep = function(t,f) {
  if (f === undefined) return;
  setTimeout(f,t);
}

afunc = function() {
  document.getElementById('text').innerHTML = '1';
  sleep(2000);
  document.getElementById('text').innerHTML = '2';
  sleep(2030);
  document.getElementById('text').innerHTML = '3';

}
afunc.allowSleep('afunc'); // comment
afunc();
</script> 
```

我另存为 .js 但在第 2 行出现错误...

什么是 .js 以及如何制作它们？xD

我只想能够基本上隐藏我的代码

我必须单击一个按钮才能显示它还是会出现在页面上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T04:47:30.550

**您不能将 html 保存在 .js 文件中，只需将以下部分放入您的。js 并包含它：**

```
<script type="text/javascript">
Function.prototype.allowSleep = function(n) {
  var i, f;
  if (!/^[$\w]+$/.test(n)) return;
  i = 0;
  f = this.toString().replace(/sleep\((.*?)\);/g , function(f,t) {i++; return n+".f"+i+" = function() {"+n+".func"+i+"();};\nsleep("+t+","+n+".f"+i+");\n"+(i==1?"":"}\n")+n+".func" + i +" = function() {";});
  eval(n+'='+f+'\n}');
}
sleep = function(t,f) {
  if (f === undefined) return;
  setTimeout(f,t);
}

afunc = function() {
  document.getElementById('text').innerHTML = '1';
  sleep(2000);
  document.getElementById('text').innerHTML = '2';
  sleep(2030);
  document.getElementById('text').innerHTML = '3';

}
afunc.allowSleep('afunc'); // comment
afunc();
</script> 
```

# c# - 制作条件循环条件？

> ID：11662473
> 
> 赞同：1
> 
> 时间：2012-07-26T04:44:52.440
> 
> 标签：c#, loops, while-loop, conditional-statements

我想创建一个while循环，它将在两个条件之一下继续运行，其中选择的一个被确定为条件。例如，它将是类似的东西`while(if (c = true) a<b else b<a)`。有什么简单的语法吗？还是我必须采取蛮横的方式并执行以下操作？

```
if (c = true) 
{ 
   while(a<b)
   {
   }
} 
else 
{
   while(b<a)
   {
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T04:47:45.833

您可以利用布尔求值的短路特性，并且：

```
while ((c && a < b) || (!c && b < a)) {
    // ...
} 
```

但是，您可能会发现这很难阅读。另一种方法可能是使用条件运算符：

```
while (c ? (a < b) : (b < a)) {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T04:49:53.460

最简单的方法是：

```
while( c && a<b || !c && b<a )
{
  ...
} 
```

抱歉，如果我的 C# 语法不正确。我是一个 C++ 迷。=)

# c# - 具有多个返回字符串和 int 的 C# 类

> ID：11662475
> 
> 赞同：2
> 
> 时间：2012-07-26T04:45:12.937
> 
> 标签：c#

我不知道如何描述这一点，但我会尽我所能。我有一个 C# 应用程序，它采用我的 Web 应用程序的 API 并将它的 JSON 响应用作应用程序的数据。当用户单击按钮时，它会从 url 中提取响应并对其进行解析，以便可以使用它：

```
 var client = new WebClient();
        client.Headers.Add("User-Agent", "Nobody");
        var response = client.DownloadString(new Uri("http://localhost:45035/api/products/1"));
        var responsestring = response.ToString();
        JObject o = JObject.Parse(responsestring);

        Int32 Id = (int)o["Id"];
        string Name = (string)o["Name"];
        string Category = (string)o["Category"];
        float Price = (float)o["Price"];
        string Website = (string)o["Website"];

        label1.Text = Name;
        label2.Text = "$" + Price.ToString();
        label3.Text = "Category: " + Category;
        label4.Text = Id.ToString(); 
```

这很好用。问题是，当我有数千种产品时，这个应用程序将有上千个代码块，就像这样，只更改了 DownloadString Uri。我想把它变成一个类，这样我就可以插入适当的 Uri（例如[http://example.com:45035/api/products/1](http://example.com:45035/api/products/1)或[http://example.com:45035/api/products/2](http://example.com:45035/api/products/2)等）并从中获取名称、类别、ID 等，这样我的代码会更干净，但我不知道该怎么做。

我试过类似的东西：

```
 public static object responseinfo(string url)
    {
        var client = new WebClient();
        client.Headers.Add("User-Agent", "Nobody");
        var response = client.DownloadString(new Uri(url));
        var responsestring = response.ToString();
        JObject o = JObject.Parse(responsestring);

        Int32 Id = (int)o["Id"];
        string Name = (string)o["Name"];
        string Category = (string)o["Category"];
        float Price = (float)o["Price"];
        string Website = (string)o["Website"];
    } 
```

这允许我调用： jsonfind("http://localhost:45035/api/products/1") 但我不知道如何取出字符串，所以我可以像以前一样在文本框中使用它们。

我希望这种制作自始至终。这是我的第一个问题，所以如果我需要更改一些或很多，请告诉我。

作为记录，我正在使用 Json.NET 处理 JSON 响应。

谢谢，

米切尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T04:48:32.143

解决您的问题的最直接方法是使用[`out`参数](http://msdn.microsoft.com/en-us/library/ee332485.aspx)：

```
public void GetTwoNumers(out int num1, out int num2) {
    num1 = 4;
    num2 = 2;
} 
```

* * *

更好的解决方案是将`WebClient`代码提取到一个单独的函数中，该函数返回 a `JObject`：

```
public static JObject WebRequest(string url) {
    var client = new WebClient();
    client.Headers.Add("User-Agent", "Nobody");
    var response = client.DownloadString(new Uri(url));
    var responsestring = response.ToString();
    return JObject.Parse(responsestring);
} 
```

然后，在许多其他 API 调用函数中使用该函数，每个函数都返回自己的类和相关字段：

```
public class Item {
    public int Id { get; private set; }
    public string Name { get; private set; }
    public string Category { get; private set; }
    public float Price { get; private set; }
    public string Website { get; private set; }

    private Item() {
    }

    public static Item GetFromUrl(string url) {
       var o = WebRequest(url);

        return new Item() {
            Id = (int)o["Id"],
            Name = (string)o["Name"],
            Category = (string)o["Category"],
            Price = (float)o["Price"],
            Website = (string)o["Website"],
        };
    }
} 
```

然后调用这段代码：

```
private void button1_Click(object sender, EventArgs e) {
    string url = "...";
    var item = Item.GetFromUrl(url);

    MessageBox.Show("You found item #" + item.Id + " named " + item.Name);

    txtBoxName.Text = item.Name;
    txtBoxCat.Text = item.Category;
} 
```

注意我在这里使用了静态工厂方法`GetFromUrl`，并将构造函数设为私有。因此，您只能通过该静态方法获取实例。不是完全必要的，但这里是一个很好的技术，IMO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T04:51:47.470

我能想到几个选择：

1）创建自己的类型并返回它：

```
class JObjectReturned {
    public int Id { get; set; }
    public string Name { get; set; }
    public string Category { get; set; }
    public float Price { get; set; }
    public string Website { get; set; }
}

public static JObjectReturned responseinfo(string url)
{
    var client = new WebClient();
    client.Headers.Add("User-Agent", "Nobody");
    var response = client.DownloadString(new Uri(url));
    var responsestring = response.ToString();
    JObject o = JObject.Parse(responsestring);

    return new JObjectReturned() { 
        Id = (int)o["Id"],
        Name = (string)o["Name"],
        Category = (string)o["Category"],
        Price = (float)o["Price"],
        Website = (string)o["Website"]
    };
} 
```

然后你可以像这样使用它：

```
for (int i = 0; i < urls.Length; i++) { 
    JObjectReturned obj = responseInfo(urls[i]);
    // obj.Name, obj.Price, etc..
} 
```

2) 返回 JObject。

.. 只是不要返回元组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T04:51:53.363

你有没有想过使用一个类，让一个产品，来存储和检索值？

```
puclic class Product
{
   int ID;
   string Name;
   string Category;
   string Website;
   float Price;
} 
```

如果你真的想的话，你甚至可以使用[DataTable 。](http://msdn.microsoft.com/en-us/library/system.data.datatable%28v=vs.100%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T04:54:25.263

也许是这样的：

```
public class ProductDTO
{
    public ProductDTO(string SourceURI)
    {
        this.SourceURI = SourceURI;
    }

    public void GetReady()
    {
        var client = new WebClient();
        client.Headers.Add("User-Agent", "Nobody");
        var response = client.DownloadString(new Uri(this.SourceURI));
        var responsestring = response.ToString();
        JObject o = JObject.Parse(responsestring);

        this.Id = (int)o["Id"];
        this.Name = (string)o["Name"];
        this.Category = (string)o["Category"];
        this.Price = (float)o["Price"];
        this.Website = (string)o["Website"];
    }

    public int Id { get; private set; }
    public string Name { get; private set; }
    public string Category { get; private set; }
    public float Price { get; private set; }
    public string Website { get; private set; }
    public string SourceURI { get; private set; }
} 
```

问候

# google-image-search - ESP 游戏 / Google 图片贴标机

> ID：11662478
> 
> 赞同：1
> 
> 时间：2012-07-26T04:45:36.443
> 
> 标签：google-image-search

制作 ESP Game / Google Image Labeler 之类的最佳/最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T19:34:21.927

你可以试试这个软件。看起来它将涵盖标记图像的基础知识。

[http://beta.fromthepage.com/](http://beta.fromthepage.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:57:15.873

实现有目的的游戏 (GWAP) 需要花费大量时间和精力。在前端使用纯 HTML 和 Javascript 之前，我实现了一个基于 Web 的 GWAP（我广泛使用了 JQuery 库）。您可以使用任何您想要处理玩家之间的同步、得分和收集数据的后端技术。我使用了 Google App Engine (w/python)

# c# - 处理基于不同屏幕分辨率和图像拉伸的每像素碰撞的背景

> ID：11662480
> 
> 赞同：0
> 
> 时间：2012-07-26T04:46:02.713
> 
> 标签：c#, image, image-processing, xna, collision-detection

我一直在用 C# 构建一个游戏引擎，使用 XNA 作为我第一次涉足编程，我想用它来更全面地理解我需要知道如何解决的问题。

我目前正在研究的引擎部分是碰撞检测。我正在研究的模式是基于图像的主动碰撞系统。

角色有一个位置（XNA Rectangle），背景是2个纹理，角色有一个Vector2运动属性。一个是显示纹理，另一个是第一个纹理中碰撞区域的两色图。我显示纹理 1，并在加载背景时使用纹理的 GetData 例程将纹理 2 加载到 Color[] 数组中。输入解析例程不会直接更改位置，它会添加到运动属性中。

因此，每次更新：检查输入解析器，并添加到运动 Vector2。将玩家的 position.X/Y 沿每个表面的 position.Width/Height 与运动的方向进行比较。如果运动会将其带到碰​​撞区域（通过与 Color[] 数组的比较检测到），则运动将归零（重力子程序除外），并且在该特定方向上不会进行任何运动。

这让我不会停止所有的运动，就像在超级马里奥这样的游戏中，跳到一个街区的一侧不会结束你的 Y 轴运动。

现在，我的问题（那个描述很快就失控了）......

我应该如何处理不同的分辨率？我不明白如何缩放图像以填充所需区域，然后将其设置为可用于提取 GetData 的格式？我不想让游戏为每种分辨率加载不同的背景碰撞检测器。我觉得这是一份编码工作，而不是艺术/设计工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:01:57.767

使用比例方法...

假设您的背景纹理具有大小（Wbk，Hbk），并且您将其绘制到具有大小（Wvp，Hvp）和偏移量（Xvp，Yvp）的视口。

视口是屏幕内的一个矩形，您可以在其中绘制背景。

现在你想在你绘制精灵的屏幕位置（Xs，Ys）的背景纹理中获得正确的坐标（Xc，Yc）......

然后，您需要计算背景纹理大小乘以相对于视口的坐标除以视口大小。

```
 Xc= Wbk * (Xs-Xvp)/Wvp;
   Yc= Hbk * (Ys-Yvp)/Hvp; 
```

# shell - 识别执行 .sh 创建的进程

> ID：11662481
> 
> 赞同：1
> 
> 时间：2012-07-26T04:46:31.790
> 
> 标签：shell, unix, grep, ps

我是 Unix 新手。如何找到执行 agent.sh 时创建的进程。

ps -ef | grep 代理

不返回任何东西。

谢谢，基兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:05:24.383

您可以轻松识别子进程，例如，使用类似的工具`pstree`（这是一个用于制作人类可读输出的非标准程序）。

```
 ~ $ pstree -ps "$PPID"
init(1)───tmux(9707)─┬─bash(9708)─┬─bash(9742)───trayer(9743)
                     │            └─weechat-curses(10594)
                     ├─bash(10729)───su(10746)───bash(10752)───vim(10761)
                     ├─bash(10818)───ksh(1748)
                     ├─bash(15133)───pstree(15474)
                     ├─bash(17879)───man(15076)───sh(15079)───sh(15080)───vimmanpager(15084)───vim(15088)
                     ├─bash(17900)───su(17917)───bash(17922)
                     ├─bash(20076)───man(20095)───sh(20098)───sh(20099)───vimmanpager(20103)───vim(20109)
                     ├─bash(20116)───man(20135)───sh(20138)───sh(20139)───vimmanpager(20143)───vim(20147)
                     └─tmux-mem-cpu-lo(15472) 
```

如果你需要原始数据，至少在 Linux 下，你可以`/proc/<pid>/stat`递归地爬取。你也可以使用`ps`，但解析它的输出不是我喜欢做的事情。

但是您的问题是“您能否识别外壳创建的所有进程”。从技术上讲，没有。如果您使用`disown`或运行`nohup`，特别是如果父进程死亡，子进程可能成为`init`从另一个 shell 派生的进程的子进程并且无法区分。

这种情况下的解决方案是特定于平台的。在 Linux 下，如果您已将支持内置到内核中，则可以使用[cgroups 。](http://www.kernel.org/doc/Documentation/cgroups/cgroups.txt)我相信的 BSD 等价物被称为“监狱”。

此外，如果您出于开发和测试以外的原因尝试将流程作为脚本的一部分进行跟踪，您应该使用适当的[流程管理](http://mywiki.wooledge.org/ProcessManagement)。`ps`永远不应该在脚本中使用。

# encryption - 打开 SSL 解密问题

> ID：11662483
> 
> 赞同：0
> 
> 时间：2012-07-26T04:46:34.230
> 
> 标签：encryption, openssl, aes

我正在使用以下命令使用脚本加密文件：

`openssl enc -aes-256-cbc -k mysecretpass -in 'source.jpg' -out 'source.enc'`

到目前为止，我已经尝试了 15 种不同的解密方式，但无法弄清楚。我得到了各种各样的错误......而且我已经按照其他所有在线教程进行操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:06:50.800

我相信你正在寻找的命令是

```
 openssl enc -d -aes-256-cbc -k mysecretpass -in source.enc -out pr0n.jpg 
```

带有 -d 标志的 enc 解密。

这将更适合[Security SE 站点。](http://security.stackexchange.com)

# c++ - 在结构错误上键入 int

> ID：11662485
> 
> 赞同：1
> 
> 时间：2012-07-26T04:46:46.957
> 
> 标签：c++

我得到以下结构：

```
struct Packet
{
    short PacketSize;
    short Type;
};

struct SizeValidity
{
    short SizeEnc;
};

struct SendEncSecureCode
{
    Packet header;
    short EncSecurityToken;
    int lTime;
    SizeValidity ending;
}; 
```

在我的代码中，我想使用 sizeof 运算符获取结构的大小，如下所示：

```
SendEncSecureCode sendpacket;
sendpacket.header.PacketSize = sizeof SendEncSecureCode; 
```

问题是我总是得到大小 0x10 而不是 0x0C，所以我将 INT 类型更改为 DWORD 仍然是同样的问题，后来我尝试使用 DWORD32 仍然相同，编译器将其设置为 8 个字节。我正在开发 VC11 Beta，软件的目标是 x86 而不是 x64。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T04:49:09.960

这称为填充。编译器用零字节填充结构的不同成员之间的空间，以更好地将成员与 CPU 可以更快读取的地址对齐。您可以（但除非您有充分的理由，否则不应）使用 pragma 覆盖[此`pack`行为](http://msdn.microsoft.com/en-us/library/2e70t5y1%28v=vs.80%29.aspx)：

```
#pragma pack(push, 0)
struct {...};
#pragma pack(pop) 
```

这会强制此结构的填充为零字节。你可以改变零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T04:52:18.327

要获得您期望的大小，您可以告诉编译器使用 1 字节打包：

```
#pragma pack(push, 1)
struct Packet
{
    short PacketSize;
    short Type;
};

struct SizeValidity
{
    short SizeEnc;
};

struct SendEncSecureCode
{
    Packet header;
    short EncSecurityToken;
    int lTime;
    SizeValidity ending;
};
#pragma pack(pop) 
```

请参阅[http://vcfaq.mvps.org/lang/11.htm](http://vcfaq.mvps.org/lang/11.htm)

# mysql - 如何在共享数据库环境中为 mysql my.ini 文件提供自定义配置

> ID：11662489
> 
> 赞同：0
> 
> 时间：2012-07-26T04:47:27.827
> 
> 标签：mysql

嗨，我正在使用的 mysql 数据库服务器托管了其他几个数据库。我想给出这样的配置：

```
[mysqld]
ft_min_word_len=2
ft_stopword_file="" 
```

仅适用于特定数据库。我不会影响对其他数据库的这些更改。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T04:54:34.253

不，你不能因为，它是一个`GLOBAL`变量看[这里](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_ft_min_word_len)

因此，您甚至不能在该数据库的每个会话中都设置它。

```
Alternatively you can install separate instance of MySQL on the same server. 
```

# python - 使用存储为字符串的整数键的字典和复合字段格式（）

> ID：11662492
> 
> 赞同：2
> 
> 时间：2012-07-26T04:47:39.570
> 
> 标签：python, string, dictionary

如果字典有一个**整数键存储为字符串** `{'0': 'foo'}`，您将如何在[复合字段名称](http://getpython3.com/diveintopython3/strings.html#compound-field-names)中使用`.format()`？

我知道拥有这样的键的字典可能是非pythonic *（和糟糕的编程）* ......但在这种情况下，也不可能使用这种方式：

```
>>> a_dict = {0: 'int zero',
...           '0': 'string zero',
...           '0start': 'starts with zero'}
>>> a_dict
{0: 'int zero', '0': 'string zero', '0start': 'starts with zero'}
>>> a_dict[0]
'int zero'
>>> a_dict['0']
'string zero'
>>> " 0  is {0[0]}".format(a_dict)
' 0  is int zero'
>>> "'0' is {0['0']}".format(a_dict)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
KeyError: "'0'"
>>> "'0start' is {0[0start]}".format(a_dict)
"'0start' is starts with zero" 
```

`{0[0]}.format(a_dict)``int 0`即使没有密钥，也将始终引用密钥，因此至少这是一致的：

```
>>> del a_dict[0]
>>> a_dict
{'0': 'string zero', '0start': 'starts with zero'}
>>> "{0[0]}".format(a_dict)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
KeyError: 0L 
```

（是的，我知道`'%s' % a_dict['0']`如果需要我可以这样做。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2021-02-11T20:56:22.713

`str.format`，不像例如["f-strings"](https://www.python.org/dev/peps/pep-0498/)，不使用完整的解析器。[要提取语法](https://docs.python.org/3/library/string.html#format-string-syntax)的相关位：

```
replacement_field ::=  "{" [field_name] ["!" conversion] [":" format_spec] "}"
field_name        ::=  arg_name ("." attribute_name | "[" element_index "]")*
element_index     ::=  digit+ | index_string
index_string      ::=  <any source character except "]"> + 
```

`field_name`用方括号括起来的A是`element_index`，它可以是：

1.  一个或多个数字（`digit+`，例如`0`- 但仅当它们*都是*数字时，这就是`0start`属于第二种情况的原因）；或者
2.  *“任何源字符，除了“]”*的序列。

因此`0['0']`对于`field_name`is `"'0'"`，**not** `'0'`。

> ...表单的表达式`'[index]'`使用 `__getitem__()`.

因为`"'0' is {0['0']}".format(a_dict)`替换 is `a_dict.__getitem__("'0'")`，并且在语法中无法选择实际的`a_dict['0']`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T04:55:48.993

你不能。您需要向 format 传递一个附加参数。

```
>>> "'0' is {0[0]} {1}".format(a_dict, a_dict['0']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T05:01:42.610

编辑：我发现了问题。它正在调用dict。**getitem**带有字符串“'0'”，而不是预期的“0”。因此这是不可能的。对不起。

# couchdb - 在 nano 中更新 CouchDB 文档

> ID：11662496
> 
> 赞同：6
> 
> 时间：2012-07-26T04:47:52.003
> 
> 标签：couchdb, couchdb-nano

我需要获取一个文档，更改/插入/删除一些字段并将其放回原处。

“*放置”*操作需要文档的当前修订版，但在 nano 中，我找不到任何将修订版作为参数并将文档插入数据库的函数。

我怎么能用纳米做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T07:15:02.240

*注意：这是通用算法，它并不特定于任何库，因为[nano 的`insert()`](https://github.com/dscape/nano#dbinsertdoc-docname-callback)方法不提供任何自动更新文档的功能。*

获取文档，保存当前版本，应用您的更改并尝试使用保存的版本号发送文档。

确保处理同时更改文档时可能发生的 409 冲突响应。

在这种情况下，您应该重新获取文档，保存修订号，重新应用您的更改，然后尝试使用新修订再次发送它。

所以这里是算法：

1.  获取文件
2.  保存_rev
3.  应用更改
4.  尝试使用保存的 _rev 发送更新的文档
5.  如果是 409，请转到步骤 1

查看[CouchDB HTTP 文档 API 的 PUT 部分](http://wiki.apache.org/couchdb/HTTP_Document_API#PUT)和 CouchDB 的[Replication and Conflicts](http://wiki.apache.org/couchdb/Replication_and_conflicts) wiki 页面以获取有关该问题的更多信息。您可能还会发现[如何使用 Nano（Node.js 的 CouchDB 客户端）更新文档](http://writings.nunojob.com/2012/07/How-To-Update-A-Document-With-Nano-The-CouchDB-Client-for-Node.js.html)很有帮助。

# c# - 如何通过命令行向 WebSetup 项目发送参数

> ID：11662498
> 
> 赞同：1
> 
> 时间：2012-07-26T04:47:59.553
> 
> 标签：c#, .net, asp.net-mvc, visual-studio-2010, c#-4.0

我创建了一个 Web 设置项目。在设置的 UI 中有要填写的字段，有些是文本框，有些是下拉列表框（默认）。示例字段：虚拟目录、应用程序池等

我需要设置这些参数并通过命令提示符安装设置。安装程序必须是静默安装。

我尝试使用 msiexec 的 /quiet /a /i 等命令，但我无法发送参数，也无法静默安装设置。

如何通过命令提示符发送参数？以及如何同时运行设置（静默安装）？

引导我走上正确的道路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:40:07.490

如果这对任何人都有帮助，这就是我实现这一目标的方法：

您可以在默认安装程序中设置三项内容：

1.  要安装到的网站
2.  要安装到的虚拟目录（在所选站点下方）
3.  要使用的应用程序池

所有这三个都暴露在命令行上使用，如下所示：

```
msiexec.exe /i Installer.msi /q TARGETSITE="/LM/W3SVC/1" TARGETVDIR="VDIR" TARGETAPPPOOL="APPPOOL" 
```

唯一棘手的是`TARGETSITE`财产。要找出要使用的参数，请运行 *.msi 文件一次，如下所示：

```
installer.msi /l* 
```

这将输出一个文本日志文件，然后您可以阅读该日志以找出您应该使用的参数。看起来还有很多其他可能的参数——但这三个是我需要的。

# java - 如何从Java中的Html中提取Div标签中的文本

> ID：11662505
> 
> 赞同：0
> 
> 时间：2012-07-26T04:48:52.940
> 
> 标签：java, java-me, html-parsing

你好，

我想提取`div`标签之间的文本

```
<div class="innercontenttxt"> 
<p>img border="1" align="left" height="170" width="324" vspace="3" hspace="2" src="/tmdbuserfiles/ramdev-balakrishna(1).jpg" alt="ramdev aide remanded, lakrishna acharya judicial remand, ramdev aide fake passport case, baba ramdev assistant judicial custody, balakrishna sent to judicial custody, yoga guru ramdev assistant remanded, yoga guru ramdev assistant balakrishna" />
Yoga guru Ramdev's aide Balakrishna Acharya remanded to 14 days judicial custody in a fake passport on Saturday. He was arrested yesterday after he failed to appear at a Dehradun court.
    <br />
    <br />
     Balakrishna Acharya, who is basically a Nepalese citizen, 
     is alleged to have submitted fake documents to procure a passport. 
     When he failed to appear in Dehradun court in connection with the case,
</p>  
</div> 
```

提取后的结果应该是：

> ramdev 助手 alakrishna Acharya 周六以假护照被还押候审 14 天。他昨天因未能在德拉敦法院出庭而被捕。据称，基本上是尼泊尔公民的巴拉克里希纳·阿查里亚（Balakrishna Acharya）提交了伪造文件以获取护照。当他未能就该案出庭时，法院已发出不可保释令，随后于昨天逮捕了他。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T04:52:56.433

您可能想尝试一些 Java HTML 解析器库

HTML 解析器 - [http://htmlparser.sourceforge.net](http://htmlparser.sourceforge.net)

jsoup - [http://jsoup.org/](http://jsoup.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:59:55.117

这个问题似乎与[其他问题](https://stackoverflow.com/questions/11626040/how-to-do-parsing-in-j2mejava/11630153#11630153)相似。

假设您已经将 html 源代码存储在名为 htmlPage 的字符串变量中。

```
int divIndex = htmlPage.indexOf("<div");
divIndex = htmlPage.indexOf(">", divIndex);

int endDivIndex = htmlPage.indexOf("</div>", divIndex);
String content = htmlPage.substring(divIndex + 1, endDivIndex); 
```

# asp.net-mvc - FullCalendar 不会显示数据库事件

> ID：11662506
> 
> 赞同：0
> 
> 时间：2012-07-26T04:48:55.330
> 
> 标签：asp.net-mvc, fullcalendar

我有`FullCalendar`（1.5.1 版）在`.net`网络表单应用程序中完美运行。我正在尝试在我的新`asp.net-mvc`应用程序中部署 1.5.3 版。出于某种原因，我无法在动态提供事件时显示这些事件。

我必须完全控制每个事件（颜色、边框、属性等），并且我正在传递一个`JSON`包含所有相关细节的字符串。如果我手动输入`JSON`结果`events:`，它会按预期显示。但是当我尝试动态设置它时，我什么也得不到。

对于简单的测试，我在数据调用中硬编码了开始和结束时间段，如下所述：

```
$.ajax({
    url: rootUrl + "../Schedule/GetCal?&start=1341129400&end=1344146400",
    type: 'POST'
}).success(function(data){
    $('#calendar').fullCalendar({
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,basicWeek,basicDay'
        },
        titleFormat: { day: '' },
        defaultView: _thisView,
        events: [data]
    }); 
```

以下是`data`从 Chrome 复制的值：

```
{id:"5BFAA9C3-9437-49B0-A657-5DA47CDEA409",projectId:"5BFAA9C3-9437-49B0-A657-5DA47CDEA409",title:"Orem City Parking Lot",start:"2012-07-11",end:"",allDay:"true",type:"goal",textColor:"white",backgroundColor:"green",borderColor:"black",crew:""},
{id:"33910A42-C5F0-42FA-AB36-C315BDDAF964",projectId:"33910A42-C5F0-42FA-AB36-C315BDDAF964",title:"Thanksgiving Point - Buster",start:"2012-07-28",end:"",allDay:"true",type:"goal",textColor:"white",backgroundColor:"green",borderColor:"black",crew:""} 
```

如果我采用相同的信息并将原始调用更改为以下内容：

```
 $.ajax({
    url: rootUrl + "../Schedule/GetCal?&start=1341129400&end=1344146400",
    type: 'POST'
}).success(function(data){
    $('#calendar').fullCalendar({
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,basicWeek,basicDay'
        },
        titleFormat: { day: '' },
        defaultView: _thisView,
        events: [
           {id:"5BFAA9C3-9437-49B0-A657-5DA47CDEA409",projectId:"5BFAA9C3-9437-49B0-A657-5DA47CDEA409",title:"Orem City Parking Lot",start:"2012-07-11",end:"",allDay:"true",type:"goal",textColor:"white",backgroundColor:"green",borderColor:"black",crew:""},
           {id:"33910A42-C5F0-42FA-AB36-C315BDDAF964",projectId:"33910A42-C5F0-42FA-AB36-C315BDDAF964",title:"Thanksgiving Point - Buster",start:"2012-07-28",end:"",allDay:"true",type:"goal",textColor:"white",backgroundColor:"green",borderColor:"black",crew:""}
        ]
    }); 
```

一切都按预期显示。

为什么手动设置时有效，而动态设置无效？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:19:46.023

我终于弄明白了。警报（数据）非常有帮助。

从数据库获取数据时，我需要将其格式化为数组。

这篇文章对于使其在[John's McBlog](http://jrmcconnell.com/2010/07/19/asp-net-mvc-jquery-and-fullcalendar/)中发挥作用至关重要。

我没有将序列化为`DataTable`字符串`JSON`，而是将其放入 a`List<>`并转换`.ToArray()`如下：

```
DataTable projSchDt = BLL.Project.getProjectsSchedule(ccUser.CompanyId, start, end, ccUser.Id, true);
var events = new List<BLL.Event>();

foreach (DataRow row in projSchDt.Rows)
{
    events.Add(new BLL.Event(){
       id = row["id"].ToString(),
       projectId = row["projectId"].ToString(),
       title = row["title"].ToString(),
       start = row["start"].ToString(),
       end = row["end"].ToString(),
       allDay = Convert.ToBoolean(row["allDay"]),
       type = row["type"].ToString(),
       textColor = row["textColor"].ToString(),
       backgroundColor = row["backgroundColor"].ToString(),
       borderColor = row["borderColor"].ToString(),
       crew = row["crew"].ToString()
    });
}
var rows = events.ToArray();
return Json(rows, JsonRequestBehavior.AllowGet); 
```

`Bll.Event`只是定义事件的自定义类。

我修改了这样的js：

```
$('#calendar').fullCalendar({
    header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month,basicWeek,basicDay'
    },
    titleFormat: { day: '' },
    defaultView: _thisView,
    events: rootUrl + "../Schedule/GetCal"
}); 
```

现在一切都按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:28:08.623

我猜你的`data`变量已经是一个数组。所以试试：

```
events: data 
```

而不是`events: [data]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T23:38:59.997

从 $.ajax() 帖子返回的数据可能只是 javascript 对象的字符串表示形式，而不是 javascript 对象，

尝试添加 'json' 的 dataType 选项以从 ajax 请求返回一个 javascript 对象，

```
$.ajax({
    url: rootUrl + "../Schedule/GetCal?&start=1341129400&end=1344146400",
    type: 'POST',
    dataType: 'json',
    success: function(data){
        $('#calendar').fullCalendar({
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,basicWeek,basicDay'
            },
            titleFormat: { 
                day: '' 
            },
            defaultView: _thisView,
            events: data
        });
    }
}); 
```

# html - 为什么 Sharepoint 不断地重新格式化 HTML？

> ID：11662508
> 
> 赞同：0
> 
> 时间：2012-07-26T04:49:02.340
> 
> 标签：html, internet-explorer, sharepoint

我是第一次使用 Sharepoint CMS，我对不断重写我的内容以包含像“？”这样的疯狂跳跃字符感到困惑。和“nbsp”。有人可以告诉我如何摆脱这种滋扰。

这种现象的一个例子是[http://techfests.com/NWA/2012/Speakers/JeffAmerine/default.aspx](http://techfests.com/NWA/2012/Speakers/JeffAmerine/default.aspx)

你会注意到撇号变成了问号。空格变成 nbsp 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:09:52.373

尝试对页面上的内容使用单独的 Web 部件（来自媒体和内容类别），例如：用于照片的图像查看器和用于文本的内容编辑器。

# sql - 内连接与连接

> ID：11662509
> 
> 赞同：0
> 
> 时间：2012-07-26T04:49:03.697
> 
> 标签：sql

> **可能重复：**
> [JOIN 和 INNER JOIN 之间的区别](https://stackoverflow.com/questions/565620/difference-between-join-and-inner-join)

读过这个....但是如果你看我的问题就会有所不同。我问过为什么这不起作用......那个链接只有所有的解释......

```
String sql ="SELECT s.text, s.postdate,"+
        "d.Fname FROM Wall s " +
        "join Kid_Register d on d.id=s.fromsl";// this works

String sql ="SELECT s.text, s.postdate,"+
        "d.Fname FROM Wall s " +
        "inner join Kid_Register d on d.id=s.fromsl"; // this does not 
```

我能知道原因吗？就我在网上的研究而言，它说内部连接和连接是相同的，并且作为一个放在 SO 中的差异只是“语法糖”部分......

# c# - 修改文件时，是否总是需要重写整个文件？

> ID：11662523
> 
> 赞同：2
> 
> 时间：2012-07-26T04:50:33.740
> 
> 标签：c#, file-io

修改文件时，是否总是需要重写整个文件，或者是否可以找到并更改文件的一小部分而无需重写整个文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T04:57:17.057

如果您不插入或删除数据，则无需重写文件。您将用新值替换现有字节，或附加到文件中。

如果您需要插入或删除，您只需要从那时起重写文件。唯一需要重写整个文件的情况是在开头插入字节。

打开具有读写权限的文件是可以的。这样您就可以在文件中搜索您要查找的任何内容，一旦您有了位置，您就可以寻找它（从内存中，写指针与读指针是分开的）并将数据覆盖到您心中的内容=）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T04:57:24.800

如果你不改变数据的*长度*，你总是可以在文件中寻找合适的位置，并写入一组新的字节。这将替换最初存在的任何字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T04:57:33.547

有两种可能的方式：

*   当您使用`StreamWriter sw = new StreamWriter`它时，它将从文件中删除数据。
*   仅更改，您可以将文件数据存储在`List<string>`. 这对我很有效：

    ```
    List<string> lines_list = new List<string>();
    int file_l = 0

    StreamReader sr_temp = new StreamReader(_path);
    string line;

    while ((line = sr_temp.ReadLine()) != null)
    {
         lines_list.Add(line);
         file_l++;
    }

    sr_temp.Close();
    StreamWriter sw = new StreamWriter(_path);
    for (int i = 0; i < file_l; i++)
    {
          sw.WriteLine(lines_list[i]);
    }

    //here you add some data
    sw.Close(); 
    ```

# java - 在java中使用正则表达式匹配确切的单词

> ID：11662524
> 
> 赞同：0
> 
> 时间：2012-07-26T04:50:33.943
> 
> 标签：java, regex

我需要一个正则表达式来匹配一个确切的单词。

例如：

有一个字符串`"draft guidance allerg Excellence"`，我想搜索`allerg`然后我写了`\ballerg\b`. 它给了我完全匹配。但是当我传递字符串时`"draft guidance 12=allerg Excellence"`它也返回true，但这是错误的。

我需要哪个正则表达式只匹配确切的单词？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T04:56:33.483

`\b`边界通常会处理这种情况，即使在您的情况下`"draft guidance 12=allerg Excellence"`; 但是，您说的`=`是单词的一部分（在普通英语中，情况并非如此）。

我假设“整个单词”是指一个被空格或普通句子标点符号包围的单词。在这种情况下，应该使用如下的正则表达式：

```
(?:^|[\s\.;\?\!,])allerg(?:$|[\s\.;\?\!,]) 
```

显然，您可以根据需要添加或删除字符。

正则表达式解释：

```
(?:                     # non-matching group
    ^                   # beginning of string
    | [\s\.;\?\!,]      # OR a space, period, and other misc. punctuation
)
allerg                  # string to match
(?:                     # non-matching group
    $                   # end of string
    | [\s\.;\?\!,]      # OR a space, period, and other misc. punctuation
) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T04:55:14.643

如果我正确理解了这个问题，你想匹配一个单词 "allerg" 。一个单词用空白字符括起来，并且“=allerg”具有您不想匹配的“=”字符。

要匹配单词“allerg”，您可以使用以下正则表达式：

```
\s+allerg\s+ 
```

# qt - 在 Ubuntu Linux 上构建 QT 库

> ID：11662529
> 
> 赞同：13
> 
> 时间：2012-07-26T04:51:04.923
> 
> 标签：qt, ubuntu, build

我正在尝试按照[文档](http://qt-project.org/doc/qt-4.8/install-x11.html)中提到的说明在 Ubuntu Linux 上构建 QT 库 4.8.2 。

这是我第二次尝试构建......我之前也尝试过，即使在 12-13 小时后构建过程也没有完成，我认为有问题所以我从头开始。

我发出 make 命令已经快 24 小时了（在第二次尝试中），构建过程仍在继续。终端也没有显示任何错误。

在 Ubuntu Linux 上构建 QT 库真的需要这么多时间，或者我错过了一些东西。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-26T08:44:28.027

如果您只执行默认的非并行构建，即使在快速系统上构建 Qt 也需要几个小时。默认情况下，它还会引入许多您可能不需要的库。

所以首先要尝试的是`make -j`进行并行构建。如果这仍然花费太长时间，那么尝试精简 Qt 生成的库。例如，您需要 QtWebKit 吗？如果您计划在您的应用程序中使用嵌入式 Web 浏览器，那么您会想要它。如果没有，那么您可以将构建时间减半。键入`configure --help`以查看[选项](http://doc.qt.nokia.com/4.7-snapshot/configure-options.html)。一些可以减少构建时间的有用方法是：

注意：以下某些选项在 Qt5 中不再适用

*   -fast - 如果您只是使用 Qt 而不是开发 Qt 本身，请使用此选项
*   -no-webkit - 如果您不需要嵌入式网络浏览器，这将产生巨大的影响
*   -release - 如果您不需要调试库，那么这可以更快
*   -no-qt3-support - 新项目不需要这个
*   -nomake 示例 - 不要构建示例
*   -nomake 演示 - 不构建演示
*   -no-declarative - 如果您不使用 QtQuick API，则省略此
*   -nomake docs - 不要构建文档（这可以节省大量时间）

如果您必须为这个 Amazon 实例中的时间付费，那么另一种选择是创建一个本地 Ubuntu 机器（在备用机器或虚拟机中）并在那里调整选项，直到您得到一些有用的东西，然后使用它在您的 Amazon 实例上构建配置。

编辑：

在 Qt5 中，项目更改为使用 git 子模块，因此如果您从 git checkout 构建，则默认行为是克隆所有子模块，如果有您不需要的模块，这将大大增加您的构建时间。有一个脚本`init-repository`是 qt5 存储库的一部分。您可以使用它来修剪本地存储库以仅包含您需要的子模块。例如：

```
git clone https://git.gitorious.org/qt/qt5.git
cd qt5
./init-repository --module-subset="qtbase qtdeclarative qtquick1"
configure --your-options-here
make -j 
```

在我的机器上，我可以在大约 10 分钟内完成 qtbase 的基本构建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-02T17:21:26.187

编译 Qt 4.7 的内存要求为**1.2 Gb**（主要由 QWebKit 链接阶段要求），如果您没有足够的内存，请创建一个额外的交换文件（请参阅[https://www.centos.org/docs/5/html/5.2/ Deployment_Guide/s2-swap-creating-file.html](https://www.centos.org/docs/5/html/5.2/Deployment_Guide/s2-swap-creating-file.html) )

# jquery - json响应在IE中不起作用

> ID：11662530
> 
> 赞同：1
> 
> 时间：2012-07-26T04:51:21.503
> 
> 标签：jquery, ajax, json

这是我的代码。这是为了使用 json 将值传递给 jsoncall.php 文件并需要获取响应。

```
 var url = 'jsoncall.php';  
    var calltype = "signin";    
    parameters = 'call='+calltype;
    var email = document.getElementById('email').value;
    var pass = document.getElementById('password').value; 
    var serverurl = document.getElementById('s_url').value;
    var reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;

    if(email == "") {
        alert("Plese enter your email address!");
        return false;   
    }else if(email != ""){

       if(reg.test(email) == false) {    
          alert('Invalid Email Address!');
          return false;
       }
    }else if(pass == "") {
        alert('Please enter your password!');
        return false;   
    }

    setTimeout( function() {
        jQuery.getJSON(serverurl+url+'?callback=?',
            {call:calltype, txtEmail: email, txtPassword: pass, login: ""}, 
                function(data) {
                    console.log(data);
                    //alert(data.result);
                    if(data.result == 0){                       
                        alert("Invalid email or password!");
                        return false;
                    }else {                        
                        window.location = data.result; 
                    }

            });
      }, 100); 
```

这项工作在 Crome、Firefox 中。但这在 IE 中不起作用。当我按 f12 并在 IE 中获取开发人员工具时，它开始在 IE 中工作。否则它将无法正常工作。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T04:59:56.400

评论该行`console.log`，它将起作用。最好用`alert`在`IE`. 但是如果你想使用，`console`请参考这个[http://www.we-are-gurus.com/blog/1578-avoid-console-log-error-with-ie](http://www.we-are-gurus.com/blog/1578-avoid-console-log-error-with-ie)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T04:55:31.117

那是因为`console.log`只有在您启动开发人员工具后才可用。您可以使用 try/catch 块来吸收错误，或者`console`如果它不存在则创建一个虚拟对象。

# jaxb - 使用 jaxb 将复杂的 xml 解析为 java

> ID：11662533
> 
> 赞同：1
> 
> 时间：2012-07-26T04:51:47.857
> 
> 标签：jaxb

任何人都可以建议一段代码，用于使用 jaxb 将 xml 转换为 java。我的 xml 文件看起来像

```
 <Customer>
    <Operation>Sample</Operation>
    <head>
        <sub>
            <value>
                <att>
                    <req>
                        <name>sample</name>
                        <value>
                            <string> sample values </string>
                        </value>
                    </req>
                </att>
            </value>
        </sub>
        <sub>
            <value>
                <att>
                    <req>
                        <name>var</name>
                        <value>
                            <string>var value</string>
                        </value>
                    </req>
                </att>
            </value>
        </sub>
    </head>
</Customer> 
```

我使用了以下代码，但我得到空值

```
File file = new File("C:\\xml.xml");
JAXBContext jaxbContext = JAXBContext.newInstance(Customer.class);
Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
Customer customer = (Customer) jaxbUnmarshaller.unmarshal(file);
System.out.println(customer.name);
System.out.println(customer.string); 
```

我的预期输出应该是

```
Sample
sample values
var
var value 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:44:26.333

如何通过相同的标签名称获取多个值。例如，如果 xml 就像

xml文件

```
 <customer>
      <sample>
      <name>name</name>
      <value>
      <string> value </string>
      </value> 
      </sample>
      <sample>
      <name>name</name>
      <value>
      <string> value </string>
      </value> 
      </sample>
</customer> 
```

我正在使用以下代码

```
File file = new File("C:\\sample.xml");
JAXBContext jaxbContext = JAXBContext.newInstance(Customer.class);
Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
Customer customer = (Customer) jaxbUnmarshaller.unmarshal(file);
System.out.println(customer.value.string);
System.out.println(customer.sample.name); 
```

# css - 使用 CSS 垂直拆分页面

> ID：11662536
> 
> 赞同：40
> 
> 时间：2012-07-26T04:52:17.953
> 
> 标签：css, html

抱歉，伙计们提出了一个非常简单的问题，但我试图以预定义的宽度沿这些线向左浮动一个 div 和向右浮动一个 div

```
<div style="width: 100%;">
    <div style="float:left; width: 80%">
    </div>
    <div style="float:right;">
    </div>
</div> 
```

虽然这“大部分”有效，但它似乎把下面页面上的其他元素弄乱了。

那么，为什么要使用 CSS 将 HTML 页面垂直分成两部分而不影响页面上的其他元素，正确的做法是什么？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-26T04:55:42.190

您可以使用..

```
<div style="width: 100%;">
   <div style="float:left; width: 80%">
   </div>
   <div style="float:right;">
   </div>
</div>
<div style="clear:both"></div> 
```

现在这个下面的元素不会受到影响。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-26T04:55:15.997

只需添加溢出：自动；到父 div

```
<div style="width: 100%;overflow:auto;">
    <div style="float:left; width: 80%">
    </div>
    <div style="float:right;">
    </div>
</div> 
```

**[工作演示](http://jsfiddle.net/G6N5T/3/)**

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-26T04:57:34.343

我猜你页面上的元素搞砸了，因为你没有清除你的浮动，检查一下

[**演示**](http://jsfiddle.net/G6N5T/)

**HTML**

```
<div class="wrap">
    <div class="floatleft"></div>
    <div class="floatright"></div>
    <div style="clear: both;"></div>
</div> 
```

**CSS**

```
.wrap {
    width: 100%;
}

.floatleft {
    float:left; 
    width: 80%;
    background-color: #ff0000;
    height: 400px;
}

.floatright {
float: right;
    background-color: #00ff00;
    height: 400px;
    width: 20%;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-21T17:39:15.010

也可以通过两者`float`来解决`left`。

试试这个：

[工作演示](http://jsfiddle.net/sUtvd/3/)

PS这只是Ankit的答案的改进

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-08-19T17:11:25.330

看看这个小提琴：

[http://jsfiddle.net/G6N5T/1574/](http://jsfiddle.net/G6N5T/1574/)

# ***CSS/HTML 代码***：

```
.wrap {
    width: 100%;
    overflow:auto;
}

.fleft {
    float:left; 
    width: 33%;
background:lightblue;
    height: 400px;
}

.fcenter{
    float:left;
    width: 33%;
    background:lightgreen;
    height:400px;
    margin-left:0.25%;
}

.fright {
float: right;
    background:pink;
    height: 400px;
    width: 33.5%;

}
```

```
<div class="wrap">
    <!--Updated on 10/8/2016; fixed center alignment percentage-->
    <div class="fleft">Left</div>
    <div class="fcenter">Center</div>
    <div class="fright">Right</div>
</div>
```

这将 CSS属性用于页面上 s 的`float`左对齐、右对齐和居中对齐。`div`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-01T07:48:39.783

或者，您还可以使用称为**linear-gradient()**函数的特殊函数将浏览器屏幕分成相等的两半。查看以下代码片段：

```
body
{
  background-image:linear-gradient(90deg, lightblue 50%, skyblue 50%);
} 
```

这里，**linear-gradient()**函数接受三个参数

1.  `90deg`用于屏幕的**垂直**分割。（同样，您可以`180deg`用于屏幕的水平分割）
2.  `lightblue`颜色用于表示屏幕的左半部分。
3.  `skyblue`颜色已用于表示分屏的右半部分。在这里，`50%`一直用于对浏览器屏幕进行**等分**。如果您不想**等分**屏幕，您可以使用任何其他值。希望这可以帮助。:) 快乐编码！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-11T09:24:56.020

**这是弹性盒方法：**

**CSS**

```
 .parent {
  display:flex;
  height:100vh;
  }
  .child{
    flex-grow:1;
  }
  .left{
    background:#ddd;
  }
  .center{
    background:#666;
  }

  .right{
    background:#999;
  } 
```

**HTML**

```
<div class="parent">
    <div class="child left">Left</div>
    <div class="child center">Center</div>
    <div class="child right">Right</div>
</div> 
```

[您可以在js fiddle](https://jsfiddle.net/ojLb254z/)中尝试相同的操作。

# mod-rewrite - wordpress 的 Mod_rewrite 帮助

> ID：11662540
> 
> 赞同：0
> 
> 时间：2012-07-26T04:52:57.110
> 
> 标签：mod-rewrite

我有一个 wordpress 网站，它有一个非常大的数据库。标题和标题中有很多拼写错误的情况。我通常会进行搜索和替换以纠正错别字。

任何人都可以在 mod_rewrite 规则中帮助我将我的旧 URL 301 重定向到正确的 URL 吗？

我的网站使用以下结构：

www.domain.com/shop/xxx- **blackk** -xx-xx
www.domain.com/shop/ **blackk** -xx-xxx
www.domain.com/shop/xxx-xx- **blackk**

如何将上面的旧 URL（有错字）重定向到新 URL（更正为**黑色**后）。

非常感谢您的帮助！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:09:06.057

你不能只在 url 上使用查找和替换吗？

`RewriteRule ^(.*)blackk(.*)$ $1black$2 [R=301]`

# objective-c - xCode 4.3 将结果保存在缓存中

> ID：11662541
> 
> 赞同：0
> 
> 时间：2012-07-26T04:53:25.343
> 
> 标签：objective-c, xcode, cocoa, xcode4, xcode4.3

我正在 xCode 4.3 for Mac 中开发项目。最近我用 Lion 购买了新的 Mac，但在我从事 Snow Leopard 之前。我的应用程序连接到服务器并从服务器读取文件，应用程序根据文件中显示的内容运行。然而，服务器是运行应用程序的同一台机器，所以我使用调用“localhost”或 LAN IP 的 url 连接。我对连接没有任何问题。问题是当我更改文件中的结果时。X Code 以某种方式记住了几个小时前的旧结果。我从 Xcode 的 Product 下拉菜单中清理了应用程序文件，我去了 ~/Library/Developer/XCode/DerivedData 并手动删除了那里的所有内容，还打开了 Organizer 并从那里删除了文件。我相信他们都一样，但是，当我重新运行应用程序时，服务器文件显示的结果仍然是旧的 - 未更改。我从网络浏览器调用这个特定的服务器文件，它是最新的 - 改变了它应该的方式。Xcode 必须将此文件的结果隐藏在某个地方。我应该采取什么步骤来强制 Xcode 直接读取文件而不是将它们存储在某处？顺便说一句，在 Snow Leopard 上，它与 Xcode 4.1 完美配合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:11:29.440

与其使用类似 " 的方式从服务器获取 XML 字符串`[NSString initWithContentsOfURL:]`，不如尝试执行以下操作：

```
NSData* data = [[NSData alloc] initWithContentsOfURL:url options:NSUncachedRead error:&error];
NSString *dataFromInternet = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
```

[我通过查看这个密切相关的问题找到了答案](https://stackoverflow.com/questions/7225334/how-to-purge-flush-cache-of-nsstring)。

重要的是`NSUncachedRead`选项中的“”位。

# java - 在局部变量声明语句中，在块语句内部，声明语句的哪一部分是声明符？

> ID：11662545
> 
> 赞同：0
> 
> 时间：2012-07-26T04:53:51.837
> 
> 标签：java, variables, variable-assignment

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html)

14.4.1\. 局部变量声明器和类型

局部变量声明中的每个声明符声明一个局部变量，其名称是出现在声明符中的标识符。

```
{  
     int x = 10;
} 
```

局部变量声明语句的哪一部分是声明符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T05:15:21.903

从您正在查看的页面：

```
LocalVariableDeclaration:
    VariableModifiersopt Type VariableDeclarators 
```

换句话说，声明器是声明的名称和可选的初始化器：`x = 10`。

# web-services - 限制对公共 API 的访问

> ID：11662546
> 
> 赞同：0
> 
> 时间：2012-07-26T04:53:55.080
> 
> 标签：web-services, api, web-applications, rate-limiting

我有一个我想提供公共访问的 API，但我希望能够限制访问。

我一直在思考 Twitter 的模型：

*   Twitter 允许开发人员使用 api 密钥访问数据（我认为）。
*   Twitter 还必须从他们的网站访问数据，以允许您发布推文/搜索。
*   所以 Twitter 必须能够阻止开发人员冒充 twitter 并基本上使用他们的 api 密钥。

他们是怎么做到的呢？还有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:12:53.103

Twitter 不使用他们的 REST API 来支持他们的网站，他们直接查询他们的数据库。因此，没有 API 密钥可以窃取。[您可以在此处](http://www.infoq.com/news/2009/06/Twitter-Architecture)了解 Twitter 的 API 和网站数据库查询（大约 2009 年）之间的区别。

Twitter 用来限制其 API的[基本技术](https://dev.twitter.com/docs/rate-limiting)也可能是您想要考虑的技术：

> 每小时允许未经身份验证的呼叫 [更少] 请求。未经身份验证的呼叫是根据发出请求的服务器或设备的面向公众的 IP 来衡量的。
> 
> OAuth 调用每小时允许 [更多] 请求，并根据请求中使用的 oauth_token 进行测量。

[实现的机制取决于您的服务器平台（您应该使用它更新您的原始帖子），但您可以在他们的网站](http://oauth.net/documentation/getting-started/)上了解 OAuth（上面的第二种技术）。

# php - 从每 5 分钟加载一次的 XML 文件本地保存 700 张图像

> ID：11662551
> 
> 赞同：0
> 
> 时间：2012-07-26T04:54:35.823
> 
> 标签：php

我有一个应用程序，它每 5 分钟读取一个 xml 文件（使用 cronjob）并将大约 700 个 url 保存到数据库中的图像中。5 分钟后，大部分图像被删除，该过程再次开始。

如果我将图像保存在本地，我的网站会分配得更快，但我想要一些关于如何做到这一点的建议。

1.  我尝试使用 fopen、curl - 但一次写这么多图像只会让一切都停止。
2.  将它们保存为bloob怎么样？这对速度有多大影响？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:05:01.417

如果您不需要重命名它们，那么为什么不按照这些方式做一些事情（假设 $images 是一个 URL 数组）：

```
foreach($images as $image) {
    exec("wget $image");
} 
```

它比创建和写入文件要快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:10:53.403

我不建议存储为 blob，而是您可以将本地存储的图像名称保存到数据库中。在 blob 中存储如此多的图像将不必要地占用大量资源。

你可以试试这个。当您访问该 xml 文件时，获取所有 url 并存储到临时表中，例如`unsaved_images_url`使用 a`id`和`url`as 列。

然后在本地从上面的表中获取行并将图像保存在磁盘上。这可以通过 shell 脚本或我不确定的东西来完成。并在本地保存图像后，从数据库中删除该行。

# bitmap - - LISP - 如何通过脚本创建位图文件？

> ID：11662554
> 
> 赞同：2
> 
> 时间：2012-07-26T04:54:44.800
> 
> 标签：bitmap, lisp, common-lisp, creation

我是这里的新手所以请对我温柔=）

我正在尝试用 LISP（对不起，没有其他语言）开发一个脚本来创建一个位图文件。我在不同的网站上访问了有关位图格式的信息，但我担心的是程序本身。

使用 LISP（和 perl / awk，我的环境是 Linux RHEL5）我只能使用“常规”ASCII 代码（我的意思是可打印/可显示）创建一个文本文件。

我的问题是关于不可打印的字符。例如，如果我想在位图标题中放入十六进制链 00 00 00 00，那么对应的 ASCII 码是什么？

我怎样才能在文件中打印它们？

非常感谢您的帮助和澄清！

最好的，

P-chan

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T06:05:08.453

Common Lisp 可以读/写任何你喜欢的二进制数据。

您需要将流作为二进制流打开，并使用、`READ-BYTE`和等函数。`WRITE-BYTE``READ-SEQUENCE``WRITE-SEQUENCE`

例子：

```
(with-open-file (s "temp-bytes" 
                   :direction :output
                   :element-type 'unsigned-byte)
  (write-byte 101 s)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T20:48:32.917

除了按字节操作（请参阅 Rainer 的回答），您还可以使用类似`opticl`.

# c# - 在 appendchild xml c# 中添加新项目

> ID：11662555
> 
> 赞同：0
> 
> 时间：2012-07-26T04:55:03.580
> 
> 标签：c#, xml, dom

我需要添加一个新项目。这个新项目将作为子项添加。但似乎它将所有数据输入组合在一个子项中。下面是我的代码。

```
XmlDocument xmlDoc = new XmlDocument();
                    xmlDoc.Load("C:\\Users\\HDAdmin\\Documents\\SliceEngine\\SliceEngine\\bin\\Debug\\saya.xml");
XmlElement contentElement = xmlDoc.CreateElement("Name");
XmlElement itemEl = xmlDoc.CreateElement("item");
XmlText xmlText = xmlDoc.CreateTextNode(textBox1.Text.Trim());
itemEl.AppendChild(xmlText);
contentElement.AppendChild(itemEl);
xmlDoc.DocumentElement.AppendChild(contentElement);                

XmlElement thumbEl = xmlDoc.CreateElement("thumb");
XmlText xmlThumb = xmlDoc.CreateTextNode(textBox2.Text.Trim());
itemEl.AppendChild(xmlThumb);
contentElement.AppendChild(thumbEl);
xmlDoc.DocumentElement.AppendChild(contentElement);
                    xmlDoc.Save("C:\\Users\\HDAdmin\\Documents\\SliceEngine\\SliceEngine\\bin\\Debug\\saya.xml"); 
```

出现输出

```
<Name>
 <item>werasd</item>
 <thumb/> </Name> 
```

但输出应该出现

```
<Name>
     <item>wer</item>
     <thumb>asd<thumb/> 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T05:05:05.770

使用[`XmlElement.InnerText`](http://msdn.microsoft.com/en-us/library/system.xml.xmlelement.innertext.aspx). 它获取或设置节点的连接值。所以你的代码应该是这样的：

~~`XmlText xmlThumb = xmlDoc.CreateTextNode(textBox2.Text.Trim()); itemEl.AppendChild(xmlThumb);`~~

```
// new code
thumbEl.InnerText = textBox2.Text.Trim(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T05:08:38.523

您将其附加到错误的项目更改此

```
itemEl.AppendChild(xmlThumb); 
```

对此

```
thumbEl.AppendChild(xmlThumb); 
```

# xml - 为什么在 XSD 命名空间中声明 Urls 而不是任意字符串？

> ID：11662561
> 
> 赞同：0
> 
> 时间：2012-07-26T04:55:30.620
> 
> 标签：xml, xsd

为什么在 XSD 命名空间中声明 Urls(http://ebay.in/data/typee) 而不是任意字符串(ebay.in.data.types)？它是否需要有效的 url 作为命名空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:31:00.977

命名空间规范对此有点矛盾。它说它必须是一个 URI（或命名空间 1.1 中的 IRI），但它还说解析器不应该拒绝不是 URI 的文档。奇怪的是，尽管允许使用不是 URI 的字符串，但它非常热衷于弃用相对 URI（例如 'blablabla'）。

XML 家族中的其他规范对要求命名空间为 URI（例如 XML 规范化）更为严格，并且还有一些产品（尤其是 XOM）强制执行此限制。所以最好顺势而为，为你的命名空间使用合法的 URI。

顺便说一句，规范说的是 URI 而不是 URL。还有其他类型的 URI，例如 URN。微软尤其热衷于使用 URN 作为命名空间。一个优点是它们看起来不像是对网页的引用，所以人们不会想象解析器会从网络上获取任何东西。

# iphone - NSOperation 在下载大量数据时如何处理网络连接丢失？

> ID：11662566
> 
> 赞同：1
> 
> 时间：2012-07-26T04:55:58.980
> 
> 标签：iphone, objective-c, nsoperationqueue

在我的应用程序中创建了 NSOperation 的 NSOperationQueue 以在后台下载多个图像。我想知道如果在下载数据时网络连接丢失会发生什么。是否所有这些仍在队列中的操作都被标记为已完成并从队列中删除或将再次建立网络或其他原因时，仍处于队列中并再次开始下载过程？

谁能解释 NSOperationQueue 在这种情况下是如何工作的？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T05:16:53.697

当前的 NSOperation 将在收到失败信号时继续使用剩下的任何逻辑，然后正常终止，从而导致 NSOperationQueue 开始运行下一个 NSOperation。如果互联网仍然没有恢复，它也会失败，并且无论网络是否重新连接，它都会继续在队列中移动，除非网络重新连接，否则所有连接都会失败。

可能有很多不同的方法来处理这个问题，因为需要考虑很多。例如，您可以在代码中添加一些逻辑，以在 NSOperation 由于网络中断而失败时将其标记为不成功，并将失败的 NSOperation 重新添加回队列中。但是，如果网络长时间停机怎么办？您的实现是否可以继续尝试永久下载图像，或者您是否应该让它重新尝试下载特定文件几次，然后放弃，直到下次使用该功能？

您还可以使用一系列网络可达性检查，例如在将 NSOperation 添加到队列之前，在 NSOperation 本身启动 NSURLConnection 之前等。如果失败，您可以让 NSOperation 等待直到网络重新连接并且继续。（这样做并不理想，但因为您在后台线程上运行它，所以至少不会冻结用户的应用程序界面）。

如果您愿意，您甚至可以实现您在问题中询问的功能。也就是说，在网络中断时，取消 NSOperationQueue 中的所有剩余操作，通知用户他们必须在网络恢复时重试。然后下次调用该功能时，重新添加所有剩余的 NSOperations。

# php - array_merge() 后的 PHP 额外空间

> ID：11662567
> 
> 赞同：3
> 
> 时间：2012-07-26T04:56:13.173
> 
> 标签：php, arrays, array-merge

我正在尝试合并从多行文本文件导入的数组元素，用逗号分隔：

```
$ cat input.txt 
one,two,three,four
red,blue,green
human,klingon,dolphin 
```

我想要得到的是一个包含 10 个项目的数组。我试过的代码是这样的：

```
<?php

$fa=file("input.txt");
$w=array();
foreach($fa as $combo) {
    $w=array_merge($w,explode(",",$combo));
}
print_r($w);

?> 
```

问题是，我似乎在行尾后得到回报：

```
Array
(
    [0] => one
    [1] => two
    [2] => three
    [3] => four

    [4] => red
    [5] => blue
    [6] => green

    [7] => human
    [8] => klingon
    [9] => dolphin

) 
```

为什么那里有空格？我该如何摆脱它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T04:57:44.453

`trim()`在插入到数组之前添加 a以*去除*字符串开头和结尾的空白字符。

对于您的情况，您必须先保存在一个临时变量中：

```
$words = explode(',', $combo);

// Trim away white spaces for each words
$words = array_map('trim', $words);

// Now they're trimmed, array_merge them
$w = array_merge($w, $words); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T05:00:25.733

将`FILE_IGNORE_NEW_LINES`标志添加到您的[`file()`](http://php.net/file)通话中。

```
$fa=file("input.txt", FILE_IGNORE_NEW_LINES); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T04:57:37.337

它们不是空格，而是换行符 ( `\n`)。

输入文件中的所有内容都在您的数组中表示，它只是分成数组元素。该`file()`函数逐行解析您的文件，并且被拉入的每一行都`file()`包含一个结束该行的字符。

听起来你想[`trim()`](http://php.net/trim)去掉空格。请注意，这具有删除尾随空格和制表符的额外好处。

```
 $w=array_merge($w,explode(",",trim($combo))); 
```

这会给出你想要的结果吗？

# javascript - 对带有构造函数的 JavaScript 原型继承感到困惑

> ID：11662573
> 
> 赞同：2
> 
> 时间：2012-07-26T04:57:01.020
> 
> 标签：javascript, class, inheritance, constructor, prototype

我已经阅读了有关 JavaScript 原型继承的页面和页面，但我没有找到任何使用涉及验证的构造函数来解决的问题。我已经设法让这个构造函数工作，但我知道它并不理想，即它没有利用原型继承：

```
function Card(value) {
    if (!isNumber(value)) {
        value = Math.floor(Math.random() * 14) + 2;
    }

    this.value = value;
}

var card1 = new Card();
var card2 = new Card();
var card3 = new Card(); 
```

这会产生三个具有随机值的 Card 对象。但是，我理解它的方式是，每次我以这种方式创建一个新的 Card 对象时，它都会复制构造函数代码。我应该改用原型继承，但这不起作用：

```
function Card(value) {
    this.value = value;
}

Object.defineProperty( Card, "value", {
    set: function (value) {
        if (!isNumber(value)) {
            value = Math.floor(Math.random() * 14) + 2;
        }

        this.value = value;
    }
}); 
```

这也不起作用：

```
Card.prototype.setValue = function (value) {
    if (!isNumber(value)) {
        value = Math.floor(Math.random() * 14) + 2;
    }

    this.value = value;
}; 
```

一方面，我不能再打电话了`new Card()`。相反，我必须调用`var card1 = new Card(); card1.setValue();`这对我来说似乎非常低效和丑陋。但真正的问题是它将每个 Card 对象的 value 属性设置为相同的值。帮助！

* * *

# 编辑

根据 Bergi 的建议，我将代码修改如下：

```
function Card(value) {
    this.setValue(value);
}

Card.prototype.setValue = function (value) {
    if (!isNumber(value)) {
        value = Math.floor(Math.random() * 14) + 2;
    }

    this.value = value;
};

var card1 = new Card();
var card2 = new Card();
var card3 = new Card(); 
```

这会产生三个具有随机值的 Card 对象，这很好，我可以稍后调用 setValue 方法。但是，当我尝试扩展课程时，它似乎没有转移：

```
function SpecialCard(suit, value) {
    Card.call(this, value);

    this.suit = suit;
}

var specialCard1 = new SpecialCard("Club");
var specialCard2 = new SpecialCard("Diamond");
var specialCard3 = new SpecialCard("Spade"); 
```

我现在得到错误`this.setValue is not a function`。

* * *

# 编辑 2

这似乎有效：

```
function SpecialCard(suit, value) {
    Card.call(this, value);

    this.suit = suit;
}

SpecialCard.prototype = Object.create(Card.prototype);
SpecialCard.prototype.constructor = SpecialCard; 
```

这是一个好方法吗？

* * *

# 最终编辑！

感谢 Bergi 和 Norguard，我终于找到了这个实现：

```
function Card(value) {
    this.setValue = function (val) {
        if (!isNumber(val)) {
            val = Math.floor(Math.random() * 14) + 2;
        }

        this.value = val;
    };

    this.setValue(value);
}

function SpecialCard(suit, value) {
    Card.call(this, value);

    this.suit = suit;
} 
```

Bergi 帮助我确定了我无法继承原型链的原因，Norguard 解释了为什么最好完全不要使用原型链。我喜欢这种方法，因为代码更干净，更容易理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T05:09:09.083

> 我理解的方式是，每次我以这种方式创建一个新的 Card 对象时，它都会复制构造函数代码

不，它正在执行它。没问题，你的构造函数完美运行——这就是它的样子。

只有当你创造价值时，问题才会出现。函数的每次调用都会创建自己的一组值，例如私有变量（您没有任何变量）。它们通常会被垃圾收集，除非您创建另一个特殊值，即*特权方法*，这是一个公开的函数，包含对其所在范围的引用。是的，每个对象都有自己的此类函数的“副本”，即为什么你应该将所有不访问私有变量的东西推送到原型。

```
 Object.defineProperty( Card, "value", ... 
```

等等，没有。在这里，您在构造函数上定义了一个属性 function `Card`。这不是你想要的。您可以在实例上调用此代码，是的，但请注意，在评估时`this.value = value;`它会递归调用自身。

```
 Card.prototype.setValue = function(){ ... } 
```

这看起来不错。`Card`当您稍后要使用验证代码时，您可能需要在对象上使用此方法，例如在更改`Card`实例的值时（我不这么认为，但我不知道？）。

> 但后来我不能再调用 new Card()

哦，当然可以。该方法由所有`Card`实例继承，包括应用构造函数的实例（[`this`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this#As_a_constructor)）。你可以很容易地从那里调用它，所以像这样声明你的构造函数：

```
function Card(val) {
    this.setValue(val);
}
Card.prototype... 
```

> 但是，当我尝试扩展课程时，它似乎没有转移。

是的，它没有。调用构造函数不会建立原型链。使用[`new`关键字](https://developer.mozilla.org/en/JavaScript/Reference/Operators/new)实例化具有其继承性的对象，然后应用构造函数。使用您的代码，`SpecialCard`s 从`SpecialCard.prototype`对象继承（它本身继承自默认的 Object 原型）。现在，我们既可以将它设置为与普通卡片相同的对象，也可以让它继承自该对象。

```
SpecialCard.prototype = Card.prototype; 
```

所以现在每个实例都继承自同一个对象。这意味着，`SpecialCard`s 将没有普通`Card`s 所没有的特殊方法（来自原型）......此外，[`instanceof`运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/instanceof)将不再正常工作。

所以，有一个更好的解决方案。让`SpecialCard`s 原型对象继承自`Card.prototype`! 这可以通过使用[`Object.create`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create/)（并非所有浏览器都支持，您可能需要一种[解决方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create/#Cross-browser_compatibility)）来完成，它旨在完成这项工作：

```
SpecialCard.prototype = Object.create(Card.prototype, {
    constructor: {value:SpecialCard}
});
SpecialCard.prototype.specialMethod = ... // now possible 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T05:53:24.163

就构造函数而言，每张卡片都有自己的、构造函数内部定义的任何方法的唯一副本：

```
this.doStuffToMyPrivateVars = function () { }; 
```

或者

```
var doStuffAsAPrivateFunction = function () {}; 
```

他们获得自己唯一副本的原因是，只有与对象本身同时实例化的函数的唯一副本才能访问封闭的值。

通过将它们放入原型链中，您可以：

1.  将它们限制为一个副本（除非在创建后手动覆盖每个实例）
2.  删除该方法访问任何私有变量的能力
3.  *通过更改每个*实例、程序中间的原型方法/属性，让让朋友和家人感到沮丧变得非常容易。

实际情况是，除非您打算制作在旧版 Blackberries 或旧版 iPod Touch 上运行的游戏，否则您不必太担心封闭功能的额外开销。

此外，在日常的 JS 编程中，正确封装的对象带来的额外安全性，加上模块/显示模块模式和带闭包的沙箱的额外好处，***远远超过***了将方法的冗余副本附加到函数的成本。

此外，如果您真的非常担心，您可能会查看实体/系统模式，其中实体几乎只是数据对象（如果需要隐私，则具有自己独特的 get/set 方法）...... ...并且每个特定类型的实体都注册到为该实体/组件类型定制的系统中。

IE：您将有一个 Card-Entity 来定义一副牌中的每张牌。每张卡片都有 a `CardValueComponent`、 a `CardWorldPositionComponent`、 a `CardRenderableComponent`、 a`CardClickableComponent`等。

```
CardWorldPositionComponent = { x : 238, y : 600 }; 
```

然后将这些组件中的每一个注册到系统中：

```
CardWorldPositionSystem.register(this.c_worldPos); 
```

每个系统都包含***所有***通常在组件中存储的值上运行的方法。系统（而不是组件）将根据需要来回聊天，以便在同一实体共享的组件之间来回发送数据（即：黑桃 A 的位置/值/图像可能会从不同的系统中查询，以便每个人都保持最新）。

然后不是更新每个对象——传统上它会是这样的：

```
Game.Update = function (timestamp) { forEach(cards, function (card) { card.update(timestamp); }); };
Game.Draw = function (timestamp, renderer) { forEach(cards, function (card) { card.draw(renderer); }); }; 
```

现在更像是：

```
CardValuesUpdate();
CardImagesUpdate();
CardPositionsUpdate();
RenderCardsToScreen(); 
```

在传统的更新中，每个项目都负责自己的输入处理/移动/模型更新/Spritesheet-动画/AI/等等，您正在一个接一个地更新每个子系统，每个子系统都在经历每个在该子系统中具有注册组件的实体，一个接一个。

因此，独特功能的数量会占用更少的内存。但在思考如何做到这一点方面，这是一个非常不同的宇宙。

# php - 计算html+css显示高度的函数

> ID：11662574
> 
> 赞同：3
> 
> 时间：2012-07-26T04:57:06.403
> 
> 标签：php, html, css

（以下问题：[宽度根据内容自动更改的html列](https://stackoverflow.com/questions/11536806/html-columns-whose-width-automatically-changes-according-to-their-content)）

从 PHP 脚本中，我打印了一些 HTML 代码，我想知道结果的高度是多少（用于分页计算）。假设我有以下输入：

*   我要打印的 $html 代码（字符串）；
*   $css 代码，包含 HTML（字符串）中出现的所有项目的字体和大小的完整详细信息；
*   所有相关的浏览器设置（字体、大小等）；
*   页面 $width，以像素 (int) 为单位。

我创建了一个如下所示的页面：

```
<html>
  <head>
    <style>$css</style>
  </head>
  <body style='width:$width'>
    $html
  </body>
</html> 
```

我想从 PHP 脚本中知道从页面顶部到文本底部的像素数。

*编辑：我需要在显示内容之前*在服务器端执行此操作，因为我使用它来计算要放置的内容。例如，如果内容太高，我可能会决定只放前半部分，等等。

另一种可能的用途是计算达到特定高度所需的宽度。比如我可能会尝试把它放在一个宽度为 200px 的 div 中，但结果可能太高了；然后我尝试宽度 400px 等，直到我找到给出我想要的高度的宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:55:08.323

如果您想创建自己的服务器端浏览器，您将遇到加载时间问题。如果这不是一个大问题，您可以解析 css（类似于：[link](https://stackoverflow.com/questions/236979/parsing-css-by-regex)）以找出`$html`变量中使用的填充、边距、字体、行高等，然后，如果您知道字体细节，您可以尝试计算内容高度（自然给出，来自用户输入的浏览器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-25T22:40:37.790

您也许可以使用[TCPDF 类](https://tcpdf.org/)来执行此操作。根据[这个线程](https://stackoverflow.com/questions/11395171/why-does-tcpdf-ignore-my-inline-css)，该类对 CSS 的支持有限，但如果支持您的样式，则想法是在 writeHTML 方法调用之前和之后检查当前位置（GetX() 和 GetY()）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-26T04:59:38.133

HTML 呈现在客户端完成，而 PHP 驻留在服务器端。
因此，PHP 无法从服务器端确定 HTML 元素的高度。

但是，您可以使用 JavaScript 获得它。
请参阅：[获取剪裁 DIV 的全高](https://stackoverflow.com/questions/4612992/get-height-of-a-div)

# gdi - 如何检测我的鼠标位置是否在矩形 c# 内？

> ID：11662584
> 
> 赞同：1
> 
> 时间：2012-07-26T04:57:34.580
> 
> 标签：gdi

我正在尝试编写一个应用程序来绘制包含矩形、线条和圆形的示意图。现在我想添加另一个功能来将矩形拖动到不同的位置。我面临的问题是检测我是否在矩形内单击过。我知道有一个像`Rectangle.Contains(Point)`. 要使用这种方法，我需要使用 for 循环来检查每个矩形。如果我有大量的矩形，那么使用这种方法是不明智的。有没有其他方法可以完成这项任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T05:36:10.163

你需要一本计算机图形学教科书，经常讨论这个和类似的问题。

如果没记错的话，请确保该点位于矩形顶部边缘下方、底部边缘上方、右侧边缘左侧和左侧边缘右侧。

关于在循环中测试一堆矩形。考虑有一个每个矩形都适合的圆，一个边界圆。首先测试该点是否比圆的半径更远。如果是这样，则无需测试矩形，那就是错过了。好的，这是一个非常理论的答案。实际上计算点到原点的距离可能是一个非常昂贵的计算，它涉及一个平方根，在矩形检查中进行点的四次比较可能会更快。同样，如果内存为我服务，我们并不真正关心与原点的距离是多少，只有当它大于半径时。所以只执行部分距离计算，省略最终的平方根，并与半径的平方进行比较。**并且**您需要确保您将有足够的未命中来抵消最终会同时进行边界圆和矩形检查的命中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-30T20:04:36.600

您需要使用空间索引来快速找到鼠标在哪个矩形中。我建议使用 R-tree，这是理论部分：

[http://en.wikipedia.org/wiki/R-tree](http://en.wikipedia.org/wiki/R-tree)

而c#，实现：

[http://sourceforge.net/projects/cspatialindexrt/](http://sourceforge.net/projects/cspatialindexrt/)

创建一个 rtee，添加您的矩形，然后使用鼠标坐标调用 rtree.nearest 方法以了解包含鼠标光标的矩形。您可以使用距离参数。

希望能帮助到你，

安本潘格罗斯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T05:11:57.397

我会将显示区域划分为一个象限。然后将矩形放入左上角、右上角、左下角、右下角的网格中。放置它们意味着为每个象限创建一个列表并将矩形放置在其中。

单击该点后，确定它属于哪个季度并仅在这些矩形中搜索。这种方法将您的线性搜索减少了 4 倍。

请记住，您还需要注意重叠点可以属于许多矩形。在这里，矩形的 z 顺序很重要。因此，虽然列表是为一个象限维护的，但它应该以它的 z 顺序作为键进行排序。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-28T03:53:59.073

可能是这样的吗？

```
 public bool isRectangelContainPoint(RectangleF rec, PointF pt)
    {
        if (pt.X >= rec.Left && pt.X <= rec.Right && pt.Y <= rec.Bottom && pt.Y >= rec.Top)
            return true;
        else
            return false;
    } 
```

# bundler - 如何防止捆绑器生成 binstub？

> ID：11662586
> 
> 赞同：40
> 
> 时间：2012-07-26T04:57:41.127
> 
> 标签：bundler, zsh

我在[我](https://github.com/robbyrussell/oh-my-zsh/)的. 所以，我不需要 bundler 来生成 binstubs。但是捆绑器无论如何都会这样做。`plugins=(git bundler)``.zshrc`

```
➜ 捆绑
使用 rake (0.9.2.2)
...
您的捆绑包已完成！使用 `bundle show [gemname]` 查看捆绑的 gem 的安装位置。

```

```
✗ ls bin
erubis haml nokogiri rails rake2thor rdoc resque-web sass scss thor tt
守卫 html2haml rackup rake rdiscount resque ri sass-convert 薄倾斜

```

为什么会生成 binstubs - 我没有通过要求它们的选项。至少，我不认为我是：

```
➜ 哪个捆绑
/Users/david/.rbenv/shims/bundle
➜ 猫 /Users/david/.rbenv/shims/bundle

```

```
#!/usr/bin/env bash
设置-e
导出 RBENV_ROOT="/Users/david/.rbenv"
exec rbenv exec "${0##*/}" "$@"
```

我的也没有`~/.bundle/config`。

请帮我把卡波什放在不需要的垃圾箱上！

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-07-26T19:37:28.547

Bundler 在每个应用程序的基础上生成 binstub。如果您`bundle install --binstubs`在过去的某个时间运行过，Bundler 会记住这一点，并在您再次运行 install 时生成 binstubs。要禁用它们，您可以运行`bundle install --no-binstubs`或运行`rm -rf .bundle/config`。无论哪种方式，这都会禁用 binstub 生成。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-03-23T10:38:06.017

该选项`--no-binstubs`不会删除 bundler 1.5.3 中记住的选项**！**

而是使用`bundle config --delete bin`, 或编辑`.bundle/config`并从文件中删除 BUNDLE_BIN 行，然后从本地 binstubs 目录中删除不需要的文件。

例子：

```
ianh$ cat .bundle/config 
--- 
BUNDLE_CACHE_ALL: "true"
BUNDLE_BIN: bin

ianh$ bundle install --no-binstubs
Using rake (10.1.1)
... etc etc ...
Using bundler (1.5.3)
Updating files in vendor/cache
Your bundle is complete!
Use `bundle show [gemname]` to see where a bundled gem is installed.

ianh$ cat .bundle/config 
--- 
BUNDLE_CACHE_ALL: "true"
BUNDLE_BIN: bin

# see ... it didn't remove the option.

ianh$->(15) bundle config --delete bin

ianh$ cat .bundle/config 
--- 
BUNDLE_CACHE_ALL: "true"

ianh$ bundle -v
Bundler version 1.5.3 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-25T19:12:04.790

如果您在更改`$HOME/users/.bundle/config`文件后仍然得到 binstubs，则很可能您在某个地方有另一个配置。为了弄清楚在哪里执行以下命令

```
$ bundle config
Settings are listed in order of priority. The top value will be used.
gem.coc
Set for the current user (/Users/username/.bundle/config): "true"

gem.mit
Set for the current user (/Users/username/.bundle/config): "true"

gem.test
Set for the current user (/Users/username/.bundle/config): "rspec"

build.libv8
Set for the current user (/Users/username/.bundle/config): "--without-system-v8"

disable_multisource
Set for the current user (/Users/username/.bundle/config): "true"

bin
Set for your local app (/Users/username/apps/ruby/rails_application/.bundle/config): "bin"
Set for the current user (/Users/username/.bundle/config): "false" 
```

您正在寻找的是`bin`信息。此信息为您提供了包含配置信息的文件的路径。为了解决这个问题，你可以做的是进入配置文件并删除说明这`BUNDLE_BIN: bin`一点的行或将 bundle bin 更改为 false`BUNDLE_BIN: 'false'`

```
vi /Users/username/apps/ruby/rails_application/.bundle/config 
```

如果你`bundle config`再次运行不应该看到 bin 配置，或者你应该看到它被设置为 false。在这个例子中，我将我的设置为 false，所以我得到了这个新结果。

```
bin
Set for your local app (/Users/username/apps/ruby/gscs_ci/.bundle/config): "false"
Set for the current user (/Users/username/.bundle/config): "false" 
```

需要注意的是，每个响应 bundle 的 ruby​​ 应用程序都可以有自己的自定义 .bundle/config

如果你更新所有`.bundle/config`你不应该有新的文件在你 ruby​​ 时在 bin 目录中创建`bundle`或`bundle install`

有时会发现其他东西，它认为 false 是一个目录，因此最好删除`BUNDLE_BIN`可能更简单的行。

# c#-4.0 - 通过 AWS S3 MultiPart 上传到使用 C# 和 .Net 开发工具包的命名目录

> ID：11662595
> 
> 赞同：3
> 
> 时间：2012-07-26T04:58:17.307
> 
> 标签：c#-4.0, amazon-s3, amazon-web-services

以下失败并显示此错误消息：“指定的上传不存在。上传 ID 可能无效，或者上传可能已中止或完成。”

```
UploadPartRequest uploadRequest = new UploadPartRequest()
.WithBucketName(IniValues.Instance.TargetBucketName)
.WithKey("junk/20070125.log")
.WithUploadId(initResponse.UploadId)
.WithPartNumber(i)
.WithPartSize(partSize)
.WithFilePosition(filePosition)
.WithFilePath("C:\\InetTemp\\Logs\\20070125.log"); 
```

问题出在“.WithKey("junk/20070125.log")”上。如果我去掉“垃圾/”它就完美了。

那么问题来了，**如何将文件上传到特定的 AWS 目录？**我找到的所有文档都显示了在目录名称和正斜杠之前添加正确的方法。我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T19:41:37.357

事实证明，我在调用 InitiateMultipartUploadRequest 后将文件夹名称添加到字符串中。一旦我将键值更改为在上传调用中保持一致，它就开始工作了。

# mysql - Mysql：当缺少 id 时如何增量获取更新行？

> ID：11662597
> 
> 赞同：1
> 
> 时间：2012-07-26T04:58:21.693
> 
> 标签：mysql, sql

我有一个都有唯一 ID 的数据库。它们按升序排列，我想做..

```
update text SET name = 'hello french man' where id=1; 
```

并将每一行的名称更改为我拥有的数据。所以我可以不断增加

```
id = id + 1; 
```

但是问题出现在这里，我过去删除了一些行，所以缺少ID。例如，有第 1、2、3、5 行。第 4 行丢失是因为我已将其删除，那么如何在不跳过名称的情况下更新每一行，因为更新第 4 行无济于事？

至关重要的是，我必须与它们进行 1-1 映射，并且不要跳过任何名称，因为顺序很重要。

谢谢，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T05:07:15.263

您可以使用此解决方案：

```
UPDATE tbl a
INNER JOIN
(
    SELECT id, @rn:=@rn+1 AS rn
    FROM tbl
    CROSS JOIN (SELECT @rn:=0) var_init
    ORDER BY id
) b ON a.id = b.id
LEFT JOIN
(
    SELECT id, @rn2:=@rn2+1 AS rn
    FROM tbl
    CROSS JOIN (SELECT @rn2:=-1) var_init
    ORDER BY id
) c ON b.rn = c.rn
SET a.id = COALESCE(c.id, a.id + 1) 
```

* * *

## [查看 SQLFiddle 演示](http://www.sqlfiddle.com/#!2/ad398/1/0)

# c# - TcpListener：检测客户端断开连接，而不是客户端暂时不发送任何数据

> ID：11662598
> 
> 赞同：6
> 
> 时间：2012-07-26T04:58:28.120
> 
> 标签：c#, tcplistener

我正在寻找使用 TcpListener 时如何检测“客户端断开连接”。

所有的答案似乎都与这个相似： [TcpListener：如何检测客户端断开连接？](https://stackoverflow.com/questions/1202154/tcplistener-how-can-i-detect-a-client-disconnect)

基本上，从流中读取，如果 Read() 返回 0，则客户端已断开连接。

但这是假设客户端在它发送的每一个数据流之后断开连接。我们在 TCP 连接/断开开销既慢又昂贵的环境中运行。

我们建立一个连接，然后我们发送一些请求。

伪代码：

```
client.Connect();
client.GetStatus();
client.DoSomething();
client.DoSomethingElse();
client.AndSoOn();
client.Disconnect(); 
```

Connect 和 Disconnect() 之间的每次调用都会向服务器发送一个数据流。服务器知道如何分析和处理流。

如果让 TcpListener 在没有断开连接的情况下循环读取，它会读取并处理所有消息，但是在客户端断开连接后，服务器无法知道这一点，它永远不会释放客户端并接受新的消息。

```
var read = client.GetStream().Read(buffer, 0, buffer.Length);

if (read > 0) 
{
   //Process
} 
```

如果我让 TcpListener 在 read == 0 时删除客户端，它只接受第一个数据流，然后立即删除客户端。

当然，这意味着新客户端可以连接。

调用之间没有人为的延迟，但是就计算机时间而言，两次调用之间的时间当然是“巨大的”，所以总会有一段时间 read == 0 即使这并不意味着客户端已经或应该被断开。

```
var read = client.GetStream().Read(buffer, 0, buffer.Length);

if (read > 0) 
{
   //Process
}
else
{
   break;   //Always executed as soon as the first stream of data has been received
} 
```

所以我想知道......有没有更好的方法来检测客户端是否已断开连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T07:01:59.000

艾伦的回答为我解决了这个问题。如果其他人面临同样的问题，这里有一些使用 Socket.Receive 方法的“示例”代码：

```
private void AcceptClientAndProcess()
{
    try
    {
        client = server.Accept();
        client.ReceiveTimeout = 20000;
    }
    catch
    {
        return;
    }

    while (true)
    {
        byte[] buffer = new byte[client.ReceiveBufferSize];
        int read = 0;

        try
        {
            read = client.Receive(buffer);
        }
        catch
        {
            break;
        }

        if (read > 0)
        {
            //Handle data
        }
        else
        {
            break;
        }
    }

    if (client != null)
        client.Close(5000);
} 
```

您在某处循环调用 AcceptClientAndProcess() 。

以下行：

```
read = client.Receive(buffer); 
```

将阻塞直到

*   接收到数据，（读取> 0）在这种情况下您可以处理它
*   连接已正确关闭（读取 = 0）
*   连接突然关闭（抛出异常）

最后两种情况中的任何一种都表明客户端不再连接。

Socket.Accept() 方法周围的 try catch 也是必需的，因为如果客户端连接在连接阶段突然关闭，它可能会失败。

请注意，它确实为读取操作指定了 20 秒的超时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T05:15:53.133

`NetworkStream.Socket`您可以使用该属性获取底层套接字并使用它的[Receive](http://msdn.microsoft.com/en-us/library/w3xtz6a5.aspx)方法进行读取。

与 不同`NetworkStream.Read`，链接的重载`Socket.Receive`将阻塞，直到已读取指定的字节数，并且仅在远程主机关闭 TCP 连接时才返回零。

* * *

**更新：** @jrh 的评论是正确的，它`NetworkStream.Socket`是受保护的属性，在此上下文中无法访问。为了获取客户端`Socket`，您可以使用[TcpListener.AcceptSocket](https://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.acceptsocket%28v=vs.110%29.aspx)方法返回`Socket`与新建立的连接对应的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-04T14:42:10.990

[的文档`NetworkStream.Read`](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.read.aspx)没有反映这一点，但根据我的经验，如果端口仍然打开并且没有数据可用，则“NetworkStream.Read”会阻塞，但如果端口已关闭，则返回 0。

我从另一边遇到了[这个问题，](https://stackoverflow.com/questions/10719256/networkstream-read-is-blocking/)如果当前没有数据可用，`NetworkStream.Read`它不会立即返回 0。您必须使用`NetworkStream.DataAvailable`以确定是否`NetworkStream.Read`可以立即读取数据。

# html - wordpress 小部件覆盖文本

> ID：11662600
> 
> 赞同：-1
> 
> 时间：2012-07-26T04:58:37.557
> 
> 标签：html, wordpress

我有一个 Wordpress 网站，新的小部件位于旧文本之上。我需要把我所有的下一个并以某种方式转换它以占用更少的空间，以便文本不会覆盖在小部件下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:25:13.727

看到我在说这样的话：

给你的`<p>`元素宽度

[**我的小提琴**](http://jsfiddle.net/aTm2d/1/)

或将所有段落包装在一个`<div>`

[**我的小提琴**](http://jsfiddle.net/aTm2d/2/)（包裹在一个`<div>`）

# java - jar 文件无法在 64 位机器上运行

> ID：11662603
> 
> 赞同：-3
> 
> 时间：2012-07-26T04:58:59.837
> 
> 标签：java, netbeans, jar

我为我的大学项目开发​​了一个桌面应用程序。我在 64 位机器上使用 32 位的 NetBean IDE 7.0.1 开发，我有 32 位的 JDK，项目从 NetBean 完美运行，但是当我转换成`.jar`它时不起作用，但相同`.jar`的文件在 32 位机器上工作。任何人都对此有想法提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:12:17.220

在正常情况下，您可以将在 64 位机器和/或 64 位 JVM 上开发的代码，并在 32 位 JVM 上运行它……反之亦然。无论您是否使用 JAR，这都适用。

你遇到麻烦的事实表明你做错了什么。但是，如果没有更多信息，我们将浪费时间推测可能是什么。“它没有工作”是不够的。（这就像去看医生并说“我不好”并期望他仅凭此就能治愈你。）

# sql-server-2008 - sql server 2008 r2中windows认证模式的登录名是什么？

> ID：11662608
> 
> 赞同：1
> 
> 时间：2012-07-26T04:59:22.927
> 
> 标签：sql-server-2008, sql-server-2008-r2

我正在使用 sql server 2008 R2，在一种情况下，我需要将默认数据库从“master”更改为“Test”，只要我点击 New Query，它将选择默认数据库为“Test”。为此，我使用以下查询来更改数据库优先级，

```
Exec sp_defaultdb @loginame='sa',@defdb='Test' 
```

我可以将默认数据库更改为 Test for sa Login 但我想在 Windows 身份验证模式下更改它，我正在使用（本地）连接数据库。当我们使用 Windows 身份验证模式登录 SSMS 时，任何人都可以知道默认用户是什么。或任何其他将数据库的优先级更改为测试的解决方案？谢谢！在先进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T05:19:24.543

在 Windows 身份验证模式下，您对 SQL Server 的凭据是相同的，就像在您的系统中一样。例如，在非域环境中，如果您的计算机名称是 CPU，登录名是 USER，那么 Windows 身份验证凭据将为：CPU\USER。如果您尝试从其他 PC 连接，凭据会有所不同。

因此，为了回答您的问题：当我们使用 Windows 身份验证模式登录 SSMS 时，没有默认用户。

对于第二个问题：您可以像此示例中那样为 Windows 身份验证用户执行此操作：

```
EXEC sp_defaultdb @loginame = 'CPU\USER' (Domain or Computer Name\Windows Login ) @defdb = 'Test' 
```

# html - 用马拉雅拉姆语创建网站

> ID：11662610
> 
> 赞同：3
> 
> 时间：2012-07-26T04:59:33.673
> 
> 标签：html, css, utf-8

这是我在网页设计方面的第一份工作。我必须开发一个网站，其中包含马拉雅拉姆语内容和英文菜单。任何人都请帮助我这样做。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T07:06:03.770

对于网站中的多语言支持，您基本上需要处理三件事。

**1.元标签**

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

**2.字体**

```
@font-face {
    font-family: 'Malayalam';
    src: url('../fonts/meera.eot');
    src: url('../fonts/meera.eot?#iefix') format('embedded-opentype'),
         url('../fonts/meera.woff') format('woff'),
         url('../fonts/meera.ttf') format('truetype'),
         url('../fonts/meera.svg#Malayalam') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

如果您只有 .ttf 文件，则可以使用[Font Squirrel 字体生成器](http://www.fontsquirrel.com/fontface/generator)

**3\. 文档类型**

如果您使用 HTML5 doctype `<!DOCTYPE html>`，它有时会不起作用。

利用

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T05:05:26.743

我将假设您想知道如何让字符显示在您的 HTML 中，因为您的问题不太清楚。为了让浏览器正确显示马拉雅拉姆语字符，您需要将网页编码为 UTF-8。此外，由于浏览器的怪癖，您需要在标题内容类型中声明 UTF-8 编码，或者某些浏览器尝试发送 HTML 转义字符。

如果您使用的是 HTML 5 `<meta charset="utf-8">`：. 否则：`<meta http-equiv="Content-Type" content="text/html; charset=utf-8">`。这将进入您的`<head>...</head>`标签。

# css - CSS 弹出位置（顶部和左侧不起作用）

> ID：11662617
> 
> 赞同：0
> 
> 时间：2012-07-26T05:00:37.337
> 
> 标签：css, popup, positioning

我已经按照[教程 url](http://www.pat-burt.com/web-development/how-to-do-a-css-popup-without-opening-a-new-window/)来获得一个弹出窗口：

我有一个警告。有时它会弹出的页面非常非常长。教程中的代码在中心弹出。从纵向来看，这是不可接受的。我试图让它在中心弹出，但在最顶部。我用过 top: 0px; 并出于测试目的离开：0px；（和其他一些人）但这似乎无关紧要。总是出现在中间。

你可以看看我在[这里做的最新的](https://www.gamengai.com/popup.php#)

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:06:18.867

问题是您的顶部和左侧值在 CSS 中被忽略了，因为无论您使用什么脚本来使弹出窗口发生，都将内联样式直接应用于弹出窗口。因此，您应该查看该脚本并找到它应用样式的位置，然后在那里进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:06:49.440

### 你的技术太老了，而且方法不对！

在您的情况下发生的情况是，您已经考虑了页面的高度和宽度来计算中心位置。如果你可以改变它：

```
popUpDiv.style.top = '10%'; 
```

试一试，让我知道。

### 最佳建议：使用 jQuery！:)

但是，我所遵循的是来自Queness，这仍然更简单。

**教程：** [简单的 jQuery 模态窗口教程](http://www.queness.com/post/77/simple-jquery-modal-window-tutorial)和[现场演示](http://www.queness.com/resources/html/modal/jquery-modal-window.html)。

希望能帮助到你！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T05:16:41.767

在你的`css`for `#popUpDiv`do 中`top : 0 !important`，你会在顶部找到你的弹出框。这是因为 javascript 正在计算`top`位置并覆盖您的 css 样式。希望这可以帮助。

# excel - 尝试将图表另存为图像的无效维度（Office2010 相关）

> ID：11662618
> 
> 赞同：1
> 
> 时间：2012-07-26T05:00:46.340
> 
> 标签：excel, vba

我正在尝试将 excel-vba 中的图表保存为图像。为此，我使用下面的代码。这适用于 Excel 2007，但 Excel 2010 需要更大的尺寸来处理需要放大的图表对象。所以我使用 + 4 而不是 + 1。这样做我在底部和右侧有一条线（看起来像一个框架）。有人知道如何摆脱这些线条吗？

```
 '1\. copy to clipboard
        '2\. create new chart object with greater dimensions (office 2010 requirement), round because shape size is double (e.g. 200.5px)
        '3\. Paste clipboard content
        '4\. export chart, delete afterwards
        Dim shp As Shape
        Dim sht As Worksheet
        Set sht = Application.ActiveWorkbook.Sheets(shtName)
        Set shp = sht.Shapes(chrtName)
        shp.CopyPicture xlScreen, xlBitmap
        Dim objChart As ChartObject
        Set objChart = sht.ChartObjects.Add(200, 200, Round(shp.Width + 1, 0), Round(shp.Height + 1, 0))

        'Set objChart = sht.ChartObjects.Add(200, 200, Round(shp.Width + 4, 0), Round(shp.Height + 4, 0))

        objChart.Activate
        ActiveChart.Paste
        ActiveChart.Export Filename:=fullPath, Filtername:=Right(fullPath, 3)
        objChart.Delete 
```

# multithreading - 在 x86 上，如果 [mem] 不是 32 位对齐的，“lock inc [mem]”还能正常工作吗？

> ID：11662624
> 
> 赞同：6
> 
> 时间：2012-07-26T05:01:32.280
> 
> 标签：multithreading, assembly, x86, multiprocessing

在 x86 上，如果 mem 是 32 位对齐的，则 mov 操作保证是原子的。

如果 [mem] 不是 32 位对齐的，`lock inc [mem]`sill 可以正常工作吗？

工作正常：提供原子性而不是获得部分价值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T05:12:27.930

x86 和 x64的[Intel 指令集参考](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html/)没有提及 INC 指令的对齐要求。它所指的`LOCK`只是：

> 该指令可以与 LOCK 前缀一起使用，以允许指令以原子方式执行。

`LOCK`前缀文档指出：

> LOCK 前缀的完整性不受内存字段对齐的影响。对于任意未对齐的字段，会观察到内存锁定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T05:15:49.787

锁定前缀将为未对齐的内存访问提供原子性。在 QPI 系统上，这可能非常慢。请参阅英特尔网站上的这篇文章：

如何解决同时未对齐的内存访问的错误

[http://software.intel.com/en-us/forums/showthread.php?t=75386](http://software.intel.com/en-us/forums/showthread.php?t=75386)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T23:02:56.713

虽然硬件可能对未对齐的访问很好，但代码实现可能依赖于窃取指针的低 2 位或 3 位（对于 32 位或 64 位对齐的指针，始终为零）。

例如，(Win32) InterlockedPushSList 函数不存储指针的低 2 位或 3 位，因此任何推入或弹出未对齐对象的尝试都不会按预期工作。无锁代码通常会将额外信息塞入指针大小的对象中。大多数时候这不是问题。

英特尔的处理器一直具有出色的未对齐访问性能。在 Nehalem (Core I7) 上，他们一路走来：完全在高速缓存行内的任何未对齐访问都没有惩罚，而跨越高速缓存行边界的未对齐访问平均有 4.5 个周期的惩罚 - 非常小。

# c++ - 清除缓冲区-Winsock

> ID：11662625
> 
> 赞同：1
> 
> 时间：2012-07-26T05:01:34.640
> 
> 标签：c++, sockets, client, buffer, winsock

这是我在 C++ 中使用 Windows 中的 winsock 制作的客户端程序的代码。

```
#include <iostream>
#include <winsock2.h>
#include <ws2tcpip.h>
#include<sstream>
#define DEFAULT_PORT "27015"
#define DEFAULT_BUFLEN 512
#pragma comment(lib,"WS2_32.lib");

struct addrinfo *result = NULL,
         *ptr = NULL,
         hints;

int main()
{
WSAData wsadata;
int iResult;
int recvbuflen = DEFAULT_BUFLEN;
char *sendbuf = "1,2,3,4!!";
char recvbuf[512];

iResult=WSAStartup(MAKEWORD(2,2),&wsadata);
if(iResult!=0)
{
    std::cout<<"WSAStartup failed"<<iResult<<std::endl;
    getchar();
    return 1;
}

ZeroMemory( &hints, sizeof(hints) );
hints.ai_family = AF_UNSPEC;
hints.ai_socktype = SOCK_STREAM;
hints.ai_protocol = IPPROTO_TCP;

char arr[20]="localhost";

iResult = getaddrinfo(arr, DEFAULT_PORT, &hints, &result);
if (iResult != 0)
{
    std::cout<<"getaddrinfo failed: "<<iResult;
    getchar();
    WSACleanup();
    return 1;
}

SOCKET ConnectSocket = INVALID_SOCKET;
ptr=result;
ConnectSocket = socket(ptr->ai_family, ptr->ai_socktype, 
ptr->ai_protocol);

if (ConnectSocket == INVALID_SOCKET)
{
    std::cout<<"Error at socket(): "<<WSAGetLastError();
    getchar();
    freeaddrinfo(result);
    WSACleanup();
    return 1;
}

iResult = connect( ConnectSocket, ptr->ai_addr, (int)ptr->ai_addrlen);
if (iResult == SOCKET_ERROR)
{
    closesocket(ConnectSocket);
    ConnectSocket = INVALID_SOCKET;
}

freeaddrinfo(result);

if (ConnectSocket == INVALID_SOCKET) 
{
    std::cout<<"Unable to connect to server!"<<std::endl;
    getchar();
    WSACleanup();
    return 1;
}

for(;;)
{
int i=15;
int x=12;
int z=1;
iResult = recv(ConnectSocket, recvbuf, DEFAULT_BUFLEN, 0);
std::cout<<"Recieved data: "<<recvbuf<<std::endl;
}

iResult = shutdown(ConnectSocket, SD_SEND);

if (iResult == SOCKET_ERROR) 
{
    std::cout<<"shutdown failed: "<<WSAGetLastError();
    getchar();
    closesocket(ConnectSocket);
    WSACleanup();
    return 1;
}

if (iResult == 0)
    std::cout<<"Connection closed\n";
else
    std::cout<<"recv of client failed: "<<WSAGetLastError();

iResult = shutdown(ConnectSocket, SD_SEND);
if (iResult == SOCKET_ERROR) 
{
    std::cout<<"shutdown failed: "<<WSAGetLastError();
    closesocket(ConnectSocket);
    WSACleanup();
    return 1;
}

closesocket(ConnectSocket);
WSACleanup();
getchar();
return 0;
} 
```

我收到的信息很好。唯一的问题是我想在每次收到一些数据时清除缓冲区。如果我发送 a,b,c,d，当前代码的输出类似于

A B C D

aa,bb,cc,dd

aaa,bbb,ccc,ddd

虽然我希望我的输出是 a,b,c,d，因为它会一次又一次地接收这些信息。这该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:44:14.160

您提供的这段代码看起来像一个无限循环：

```
for(;;)
{
int i=15;
int x=12;
int z=1;
iResult = recv(ConnectSocket, recvbuf, DEFAULT_BUFLEN, 0);
std::cout<<"Recieved data: "<<recvbuf<<std::endl;
} 
```

最重要的是，它`recvbuf`就像一个字符串一样输出，但不能保证它会被终止，并且如果您实际读取数据的完整字节，`\0`可能会导致未定义的行为。`DEFAULT_BUFLEN`我建议`string`在打印前进行转换。但在此之前，`recv`应该检查 的返回值。

```
iResult = recv(ConnectSocket, recvbuf, DEFAULT_BUFLEN, 0);
if (iResult <= 0) break;
std::cout<<"Received data: " <<std::string(recvbuf,iResult)<<std::endl; 
```

# asp.net - 使用 windbg/PSSCOR2 进行 Asp.Net 调试

> ID：11662630
> 
> 赞同：0
> 
> 时间：2012-07-26T05:01:47.243
> 
> 标签：asp.net, debugging, windbg

我在 windbg 中运行 finalize queue 命令，得到以下结果：

```
0:121> !finalizequeue
SyncBlocks to be cleaned up: 0
MTA Interfaces to be released: 0
STA Interfaces to be released: 0
----------------------------------
generation 0 has 9 finalizable objects (150a70a8->150a70cc)
generation 1 has 4 finalizable objects (150a7098->150a70a8)
generation 2 has 187422 finalizable objects (14ff0020->150a7098)
Ready for finalization 0 objects (150a70cc->150a70cc)
0x09489498    2,146       42,920 Foo.DataLayer.Doo
0x09488cd4    2,163       43,260 Foo.DataLayer.Daa
0x6523d7a0    2,146      120,176 System.Data.SqlClient.SqlConnection
0x6524534c    2,173      234,684 System.Data.DataView
0x65244194    4,368      419,328 System.Data.DataSet
0x04f9a32c   10,966      482,504 System.Threading.ReaderWriterLock
0x04f9a2d4   30,735      491,760 System.WeakReference
0x6746e70c   13,048    1,043,840 System.EnterpriseServices.ServicedComponentProxy
0x094850d0    2,176    1,584,128 Foo.BusinessLayer.All
0x65242d0c   10,957    3,243,272 System.Data.DataTable
0x65244ff8  100,264   14,839,072 System.Data.DataColumn
Total 187,435 objects, Total size: 22,721,440 
```

第 2 代有 187422 个可终结对象，是不是太多了？

运行 !dae 时，我看到很多 OutOfMemoryException。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:16:37.850

输出中实际上有两个重要的数字。*可终结对象*是指具有终结器的任何类型的实例。许多这些类型也将实现`IDisposable`，如果`Dispose`被调用，那么它们将在不运行终结器的情况下被垃圾收集（假设`Dispose`正确实现）。

另一个号码已*准备好敲定*。这是在收集之前必须为其运行终结器的对象的数量。在输出中该数字为 0，所以这里没有什么可担心的。

至于`OutOfMemoryException`该异常始终存在于堆上，因为它是由运行时预先分配的。如果没有抛出异常，您不必担心这一点。

# sql - Access 数据库上的 SQL 查询错误

> ID：11662633
> 
> 赞同：0
> 
> 时间：2012-07-26T05:02:00.847
> 
> 标签：sql, ms-access

这是问题所在：

```
UPDATE school_new 
  SET school_new.school_id = school.[School ID], 
      school_new.school_address = school.[School Address]
FROM school_new
INNER JOIN school on school_new.school_name = school.[School Name] 
```

我得到这个错误，我不知道是什么问题

> 查询表达式 'school.[School ID] FROM school_new INNER JOIN school on school_new.school_name = school.[School Name] 中的语法错误（缺少运算符）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T05:15:34.773

访问时加入的更新查询略有变化

```
UPDATE school_new 
INNER JOIN school on school_new.school_name = school.[School Name]
  SET school_new.school_id = school.[School ID], 
      school_new.school_id = school.[School ID] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T05:19:45.337

在 SET 关键字之前列出表和连接条件。

```
UPDATE school_new
INNER JOIN school
    ON school_new.school_name = school.[School Name]
SET school_new.school_id = school.[School ID] 
```

在您的示例中，您`school_new.school_id = school.[School ID]`分配了两次；我`SET`只做过一次。这一点很重要，因为如果列出两次，db 引擎会抛出错误...

```
Duplicate output destination 'school_new.school_id'. 
```

根据您的问题的更新...

```
UPDATE school_new
INNER JOIN school
    ON school_new.school_name = school.[School Name]
SET school_new.school_id = school.[School ID], 
    school_new.school_address = school.[School Address] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T05:11:02.610

我知道这听起来很奇怪，但尝试创建一个示例表，例如 school_new_Test 并且不要用空格给出名称，并且以同样的方式创建学校的重复表，例如 school_ORG_Test 也不要给出空格，然后尝试使用新表进行上述查询和不带空格的列名。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-26T05:10:06.773

通常，“更新”语句不能有连接。因此使用嵌套查询

```
update school_new
set school_new.school_id = (select school.[school ID]
from school where school.[school name] = school_new.school_name) 
```

# java - 将 Spring tx 与任务混合

> ID：11662635
> 
> 赞同：1
> 
> 时间：2012-07-26T05:02:25.887
> 
> 标签：java, spring, transactions, scheduled-tasks

在 Spring 3.0 中，计划任务方法是否`@Scheduled`已使用事务性注释？如果没有，注释与工作相同的方法`@Transactional`吗？也就是说，调度程序会尊重事务注释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T05:07:26.667

据我所知，答案是否定的，`@Scheduled`不关心交易。手动添加`@Transactional`，它应该可以工作（你也可以通过启用调试消息和观察日志来自己检查）。

# android - 使用 gnu libstdc++ 编译 NDK 代码

> ID：11662644
> 
> 赞同：6
> 
> 时间：2012-07-26T05:03:06.777
> 
> 标签：android, c++, c, android-ndk

我想使用 gnu libstdc++ 编译我的 NDK 代码，任何线索如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T08:32:00.727

您应该添加一行到`Application.mk`

```
APP_STL := gnustl_static 
```

如果你想静态链接它，并且

```
APP_STL := gnustl_shared 
```

如果您想将其用作共享库。

这是典型的示例`Application.mk`（它应该放在您所在的同一文件夹中`Android.mk`）：

```
APP_OPTIM := release
APP_PLATFORM := android-7
APP_STL := gnustl_static
APP_CPPFLAGS += -frtti 
APP_CPPFLAGS += -fexceptions
APP_CPPFLAGS += -DANDROID
APP_ABI := armeabi-v7a 
```

更多信息`Application.mk`可以在您的 NDK 文档中找到：`docs/APPLICATION-MK.html`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T06:20:51.840

将以下行添加到您的 Application.mk：

```
APP_STL := gnustl_static 
```

（或者`gnustl_shared`如果您不想静态链接它）。

# sql - 链接表错误：“找不到列或用户定义的函数或聚合”

> ID：11662648
> 
> 赞同：2
> 
> 时间：2012-07-26T05:03:53.850
> 
> 标签：sql, sql-server-2008, date, view

这是我第一次发帖，因为我通常可以通过以前的帖子找到答案，这就是我喜欢 StackOverFlow 的原因。

无论如何，我有两个 SQL Server 2008 实例，并希望将一个表`server1`从`server2`. 我以前没有问题地这样做过，但我现在收到以下错误：

> 找不到列“DateOnly”或用户定义的函数或聚合“DateOnly.ToString”或名称不明确

尝试执行视图时。请注意，视图非常简单

```
Select * From Server1.catalog.dbo.table1 
```

有问题的列是*date*数据类型，而不是*datatime*，所以我想知道这是否是原因，如果是，为什么？

谢谢你的帮助。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:12:43.263

如果我们能看到 Your View 的完整定义，那就更容易了。也许您在表或视图中“选择”此列的权限被拒绝？

# c# - 使用 LINQ 列出的 XML

> ID：11662649
> 
> 赞同：2
> 
> 时间：2012-07-26T05:04:21.297
> 
> 标签：c#, .net, xml, linq, linq-to-xml

有一个这样的 XML 文件：

```
<VS>
  <Fields>
    <Field Id="$1*">Column1</Field>
    <Field Id="$2*">Column2</Field>
    <Field Id="$3*">Column3</Field>
  </Fields>
</VS> 
```

当我使用以下语句使用 LINQ to XML 时：

```
 XDocument doc = XDocument.Parse(s);
var q = doc.Descendants("Fields").ToList(); 
```

我在列表中得到一个条目作为 Column1Column2Column3，而我希望它作为 3 个单独的实体，如 Column1、Column2、Column3。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T05:36:08.760

使用`Field`代替`Fields`：

```
var q = doc.Descendants("Field").ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:12:32.933

您应该使用**XElement.Parse(BuildNode.InnerXml)**而不是只传入原始属性。

[检查这个](https://stackoverflow.com/a/2607043/1358004)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T05:45:30.093

只需使用以下返回字符串列表的代码。

**var q = doc.Descendants("Field").Select(x => x.Value);**

感谢您的所有建议！

# c - 将 Lua 表转换为 C 数组？

> ID：11662650
> 
> 赞同：1
> 
> 时间：2012-07-26T05:04:33.110
> 
> 标签：c, arrays, lua

我正在寻找的是这样的：

**lua脚本**

```
MY_ARRAY = {
00, 10, 54, 32,
12, 31, 55, 43,
34, 65, 76, 34,
53, 78, 34, 93
} 
```

**c代码**

```
lua_Number array[] = lua_getarray("MY_ARRAY"); 
```

这可能吗？有什么类似的东西可以让在 C 中处理 lua 表更容易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T05:53:33.203

你可以自己写这样的函数！行数不宜过多。但最好使用指针而不是数组，因为它们可以指向任意数量的元素。界面可能是这样的：

```
lua_Number *values;
size_t nvalues;
values = luaGetNumbers("MY_ARRAY", &nvalues);
/* the number of values is now nvalues */
for (int i=0; i<nvalues; i++) {
     /* do something with values[i] */
}
free(values); 
```

并且实现应该使用以下函数（来自[http://www.lua.org/manual/5.2/manual.html](http://www.lua.org/manual/5.2/manual.html)）：

```
void lua_getglobal (lua_State *L, const char *name); 
```

> 将全局名称的值压入堆栈。

* * *

```
void lua_gettable (lua_State *L, int index); 
```

> 将值 t[k] 压入堆栈，其中 t 是给定有效索引处的值，k 是堆栈顶部的值。
> 
> 此函数从堆栈中弹出键，并将结果值放在其位置）。与在 Lua 中一样，此函数可能会触发“索引”事件的元方法（参见 §2.4）。

* * *

```
lua_Number lua_tonumberx (lua_State *L, int index, int *isnum); 
```

> 将给定可接受索引处的 Lua 值转换为 C 类型 lua_Number（参见 lua_Number）。Lua 值必须是数字或可转换为数字的字符串（参见第 3.4.2 节）；否则，lua_tonumberx 返回 0。
> 
> 如果 isnum 不为 NULL，则为其所指对象分配一个布尔值，指示操作是否成功。

* * *

```
void lua_len (lua_State *L, int index); 
```

> 返回给定可接受索引处的值的“长度”；它等价于 Lua 中的 '#' 运算符（参见第 3.4.6 节）。结果被压入堆栈。

# sql - 在 t-SQL 中将值与 NULL 进行比较

> ID：11662651
> 
> 赞同：6
> 
> 时间：2012-07-26T05:04:35.923
> 
> 标签：sql, sql-server, tsql, null

我很好奇在 t-SQL 中将 NULL 与值进行比较是否合法？

例如，如果我有：

```
WITH ctx AS(SELECT 123 AS n0, NULL AS n1)
SELECT n0 FROM ctx
WHERE ctx.n1 < 130 
```

在这种情况下，WHERE 子句总是被评估为 FALSE。这是我可以依靠的东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T05:10:16.947

您不能将 NULL 与任何其他值进行比较，它将导致`'UNKNOWN'`.

来自[msdn 源码](http://msdn.microsoft.com/en-us/library/ms191504%28v=sql.105%29.aspx)

> NULL 值表示该值未知。NULL 值不同于空值或零值。没有两个空值是相等的。两个空值之间或 NULL 与任何其他值之间的比较返回未知，因为每个 NULL 的值都是未知的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T05:10:11.447

T-Sql 中所有具有 null 值的布尔运算都返回“UNKNOWN”，在子句中被识别为 false。当你想设置一些默认值时，你可以使用 ISNULL 函数。例如在你的情况下：

```
WITH ctx AS(SELECT 123 AS n0, NULL AS n1)
SELECT n0 FROM ctx
WHERE isnull(ctx.n1,0) < 130 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T05:11:09.083

它取决于 ANSI_NULLS 的值。

[http://msdn.microsoft.com/en-us/library/ms191270%28v=sql.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms191270%28v=sql.90%29.aspx)

> 当 SET ANSI_NULLS 为 ON 时，一个或多个表达式为 NULL 的比较不会产生 TRUE 或 FALSE；它产生未知。
> 
> Transact-SQL 支持允许比较运算符在与空值进行比较时返回 TRUE 或 FALSE 的扩展。此选项通过设置 ANSI_NULLS OFF 来激活。当 ANSI_NULLS 为 OFF 时，当 ColumnA 包含空值时，如 ColumnA = NULL 之类的比较返回 TRUE，而当 ColumnA 包含除 NULL 之外的某个值时，则返回 FALSE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T10:42:42.557

下面的 WHERE 子句`=`也是 FALSE。您需要非常小心 NULL

```
WITH ctx AS
(
SELECT 123 AS n0, NULL AS n1
) 
SELECT *
FROM ctx 
WHERE ctx.n1 = NULL 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-09T23:20:49.557

我一直像这样使用 EXISTS 关键字和 EXCEPT

```
SELECT 1
WHERE EXISTS ((SELECT 1) EXCEPT (SELECT NULL)) 
```

# php - 将 Javascript 变量发布到 PHP

> ID：11662659
> 
> 赞同：0
> 
> 时间：2012-07-26T05:05:16.863
> 
> 标签：php, javascript

我使用 Facebook JavaScript SDK。我想知道如何使用 GET 或 POST 或任何其他方式将 Javascript 变量发布到另一个页面。例如我有：

```
userInfo = document.getElementById('user-info'); 
```

如何将其发布到新页面？

```
location.href="http://www.walla.com/?info=" + info.id; 
```

不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:22:23.617

最好为此使用ajax ..

这是一个例子。

```
<script type="text/javascript">
$(document).ready(function() {
   $('#submit-btn').click(function() {
     $.ajax({
       type:'POST',  //POST or GET depending if you want to use _GET or _POST in php
       url:'your-page.php', //Effectively the form action, where it goes to.
       data:$('#txtName').val(),  //The data to send to the page (Also look up form serialise)
       success:function(e) {
            // On success this fill fire, depends on the return you will use in your page.
       }
     });
     return false;
   });
});
</script>

<form>
  <input type="text" id="txtName" />
  <input type="submit" id="submit-btn" value="Send" />
</form> 
```

希望它对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:07:01.610

看起来没问题。您应该能够通过`$_GET['info']`PHP获取 info.id。

但是，这是假设`userInfo`是一个简单的字符串。

如果不是，您可能必须先将其转换为字符串。一种方法是通过 JSON，因为 JSON 可以在 PHP 端使用`json_decode()`.

# vb.net - 当用户输入的值大于实际值时显示警告

> ID：11662667
> 
> 赞同：0
> 
> 时间：2012-07-26T05:06:24.420
> 
> 标签：vb.net

谁能给我一些想法如何编写代码以在用户输入大于实际值的值时显示警告，但它仍然可以输入其他字段的值。我使用 VB.net 并访问数据库。我认为它可以使用 onchange 但我仍然不知道编写代码

这是示例 ![在此处输入图像描述](../Images/fa65da2d150c2e1792ec3474ced05c15.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:23:19.527

使用内置的验证方案。此处示例：http:
[//msdn.microsoft.com/en-us/library/system.windows.data.binding.validatesondataerrors.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.validatesondataerrors.aspx)

# groovy - 在 groovy 中为詹金斯预发送脚本

> ID：11662669
> 
> 赞同：0
> 
> 时间：2012-07-26T05:06:37.460
> 
> 标签：groovy, hudson, jenkins, hudson-plugins, jenkins-plugins

我有两个依赖的工作。我需要 jenkins 中 groovy 脚本的帮助，用于为`email-ext`插件编写预发送脚本。

我想检查购买原因是否是上游原因，然后设置取消`variable=true`

但我不知道如何在 groovy 中为 jenkins 编写 if 条件。对于单独的工作，jenkins 中是否会有任何单独的类（所以我可以创建实例并调用上游原因）

有什么方法可以检查下游作业的构建原因是由于上游..

请在此代码段上帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:03:24.560

使用[Build.getCauses()](http://javadoc.jenkins-ci.org/hudson/model/Run.html#getCauses%28%29)方法。它将返回构建原因的列表。循环它并检查其中是否存在[hudson.model.Cause.UpstreamCause](http://javadoc.jenkins-ci.org/hudson/model/Cause.UpstreamCause.html)的对象。

要获取构建对象，请使用以下代码片段：

```
def thr = Thread.currentThread()
def build = thr?.executable 
```

仅供参考，这里是完整[Jenkins 模块 API](http://javadoc.jenkins-ci.org/)的链接。

# visual-c++ - Vc++ 树视图控件

> ID：11662675
> 
> 赞同：0
> 
> 时间：2012-07-26T05:07:02.710
> 
> 标签：visual-c++

![在此处输入图像描述](../Images/79297aab68efe947f83a1bf95d2f36b4.png)我使用树形控件创建了一个 MFC 应用程序，它显示了我系统中的所有目录和文件夹。现在我想把图像留给驱动器和文件夹。电流输出已给出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:20:46.690

如果你想要这种类型的结构，你可以去这个[链接](http://www.functionx.com/visualc/treeview/tvdlg1.htm)

![在此处输入图像描述](../Images/becd871e96c26996021e1e7e0fcdb1d8.png)

**编辑**

如果要在树视图中填充目录结构，则可以使用[DirectoryInfo 类](http://msdn.microsoft.com/en-us/library/8s2fzb02%28v=vs.90%29)

# asp.net - 没有 SQL Server Management Studio 的 SQL Server 集成安全性

> ID：11662676
> 
> 赞同：0
> 
> 时间：2012-07-26T05:07:10.887
> 
> 标签：asp.net, sql-server-2008, security, web-config, integrated-security

我在 ASP.net 应用程序中使用集成安全性，IIS 和 SQL Server 都托管在运行 Windows Server 2008 R2 的同一台服务器上。

是否可以允许用户通过网络访问应用程序并登录用户，但不允许他们直接或通过 SQL Server Management Studio 访问数据库？

我正在尝试保护数据库访问，因为我的应用程序将部署在客户端的服务器上。

这是我目前正在使用的连接字符串

```
<add connectionString="Server=.\sqlexpress;Database=DB89akwA;Integrated Security=true" name="LocalSqlServer" providerName="System.Data.SqlClient" />

<add connectionString="Server=.\sqlexpress;Database=DB89akwA;Integrated Security=true" name="MainAppConnectionString" providerName="System.Data.SqlClient" /> 
```

这是我当前使用的两个连接字符串，一个用于 ASP.net 身份验证，第二个用于我的应用程序。这两个字符串是相同的并且属于同一个数据库。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T05:29:15.920

不可能“保护”在客户场所运行的数据库。客户端的工作人员可以从 ASP.Net 连接字符串中获取密码。域管理员**始终**可以访问数据库（有一篇实际的 MSDN 文章描述了该过程：[当系统管理员被锁定时连接到 SQL Server](http://msdn.microsoft.com/en-us/library/dd207004.aspx)）。

如果您想隐藏您认为您的数据库具有的知识产权，那么您唯一的解决方案是不在客户端部署数据库（例如使用 SQL Azure 之类的托管数据库）。

如果您只是想防止客户端干扰数据库，您可以在合同中规定。审计和检测干扰**是**可能的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-26T05:20:50.347

是的，这是完全可能的。使用集成安全性登录到 ASP.NET 的人员无法使用相同的凭据登录到 SQL Server。两者完全断开。仅当 SQL Server 已设置为允许他们访问时才有可能。

我的建议是创建 SQL 登录名和用户，并且只允许他们访问 SQL Server。在你的应用程序中，当你创建连接字符串时，不要将integrated security设置为true，让用户输入自己的Sql用户名和密码来访问数据库。

# javascript - 客户端可以是 Javascript 客户端时的 WCF 服务安全性

> ID：11662680
> 
> 赞同：2
> 
> 时间：2012-07-26T05:07:33.120
> 
> 标签：javascript, .net, wcf, rest, wcf-security

如何保护 Javascript 客户端可以使用的 WCF 服务？对此有任何特定的安全模型吗？

我的理解是 WCF 支持使用传输和消息安全对数据进行有线加密。但是 WCF 仍然不完全安全，因为任何人都可以使用该服务（缺少身份验证）。只有“来回”移动的数据在通道上被加密。这还不够。因此，我们引入了相互身份验证并选择了证书作为凭证。客户端需要做的是：连同所有 SOAP 请求，他应该发送一个有效的证书（客户端凭证也包含公共和私人密钥，并且由 WCF 管理员颁发）这是由我的服务器信任的 CA 颁发。

我们使用 basicHttpBinding 因为我们的客户端可以是 Javascript/Ipad/.Net/DBL 客户端。我们可以使用 .Net/SOAPUI/JAVA 客户端来使用这些服务。所以我们很擅长这种方法。

但是今天在分析过程中，我们发现 JavaScript 客户端无法使用我们的服务，因为它不支持相互身份验证（如果我错了，请纠正我）。即使它支持相互身份验证并向服务器发布有效证书，我们也无法让所有客户端（Web 浏览器）都提供客户端证书，因为它还包含一个公钥和一个私钥（请注意 PRIVATE KEY AS WELL！！）和我的服务器盲目信任。

现在我有点困惑。有人可以建议一些 JavaScript 支持的安全模型，而不会影响任何安全性。类似 RESTful WCF 的东西。

我知道 JavaScript 不支持消息安全，它只支持传输安全。我不在乎数据是如何通过网络加密的。我关心的是客户端如何通过我的 WCF 服务进行身份验证。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T05:18:52.760

如果您已经在为您的网站使用表单身份验证，则可以利用 ASP.NET 管道通过将 AspNetCompatibilityRequirementsMode 启用为必需来检查 FormAuthentication Cookie。更多细节可以在这个[SO 线程中找到](https://stackoverflow.com/questions/3508802/how-to-authenticate-user-while-calling-wcf-service-using-ajax)

如果您的服务是独立服务并且它只是由您无法控制的不同客户端使用，那么您可以使用 oauth 身份验证，其中将有一个消费者密钥，该密钥将共享给所有经过身份验证的客户端。调用者将使用此密钥对一些信息进行签名，服务器也将使用相同的密钥对其进行签名，然后进行比较。实现细节请看这篇[优秀的文章](http://www.cleancode.co.nz/blog/523/oauth-dot-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T11:23:00.540

哦，我明白了...我正在对 tou ie OAuth 建议的组件进行研发...到目前为止我能做的是：通过 SSL 公开一个 webHttpBinding 端点，我的 javascript 客户端可以使用 $Ajax 调用 SSL Secure 服务使用 JSONP ......这意味着通道是加密的......现在我需要的是在 WCF 中应用 OAuth......你能指导我 Javascript 客户端如何理解 OAuth 吗？我的意思是我从这里（http://oauth.googlecode.com/svn/code/csharp/OAuthBase.cs）下载了用于 OAuth 的服务器代码，但是如何使用 javascript 调用此类服务​​？在这一点上我正在做研发，如果我得到任何答案，我会发布。

这是我通过 SSL 配置的 REST WCF 希望对某人有所帮助：

```
<?xml version="1.0"?>

<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>

  <system.serviceModel>
    <bindings>
      <webHttpBinding>
        <binding name="jsonpSsl" crossDomainScriptAccessEnabled="true">
          <security mode="Transport" />
        </binding>
      </webHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="JsonServiceBehaviors">
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceMetadata httpsGetEnabled="true"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="webHttpBehavior">
          <webHttp />
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <services>
      <service name="WCFTransportSecurity.TransportSecurityService" behaviorConfiguration="JsonServiceBehaviors">
        <endpoint address="" binding="webHttpBinding" bindingConfiguration="jsonpSsl" contract="WCFTransportSecurity.ITransportSecurityService" behaviorConfiguration="webHttpBehavior"/>
      </service>
    </services>
  </system.serviceModel>

  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

这是对服务的 JQuery AJAX 调用（希望对某人有所帮助）

```
 $.ajax(
            {
                type: "GET",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "jsonp",
                url: "https://localhost/WCFTransportSecurity/TransportSecurityService.svc/getdata/" + $("#TextBox1").val(),
                success: function (a) { $("#lblResponse").text(a); },
                error: function (a) {$("#lblResponse").html("Error while Processing: Error Code: " + a.status + "<br/>and Error Message: <span style='color:red'>" + a.statusText + "</span>"); }
            }); 
```

# maven - MyEclipse 8.5 创建 'maven-archetype-quickstart' 遇到了问题？

> ID：11662681
> 
> 赞同：0
> 
> 时间：2012-07-26T05:07:43.710
> 
> 标签：maven, myeclipse

我使用 MyEclipse 8.5 的内置 maven 来创建 maven 项目。它显示以下错误：图像在这里：[图片](http://imageshack.us/photo/my-images/38/e824b899a9014c082f9ec03.jpg/)

对不起，因为我是新人，所以我还不能在这里发布图片。

我在两台计算机上做了两次（都是 MyEclipse 8.5），但错误是一样的。我使用 Eclipse 来做同样的工作并且它是成功的。

但是在使用MyEclipse 8.5进行工作时，如果在过程中勾选“创建一个简单的项目（跳过原型选择）”，可以创建项目并且没有错误发生，但是创建的项目中没有“Maven Dependencies”文件夹在包资源管理器中。这是这个版本的 MyEclipse 的错误吗？因为 Eclipse Indigo 在这方面工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:50:06.217

如果您创建一个简单项目，则缺少 Maven Dependencies 文件夹只是因为简单项目中没有 Maven 依赖项。只需添加一个依赖项，文件夹 Maven Dependencies 应该会在其中创建您的依赖项。

# php - 与 Facebook 保持联系

> ID：11662684
> 
> 赞同：1
> 
> 时间：2012-07-26T05:07:57.343
> 
> 标签：php, facebook

我目前正在 zend 框架中开发社交引擎。社交引擎有这个内置插件，即使您已注销 Facebook 网站，也可让您与 Facebook 保持联系。因此，当您在我的社交引擎网站上发布状态时，即使您没有登录 facebook 网站（我的意思是在 facebook.com 中），它仍然会发布在您的墙上，但我不知道该怎么做我在社交引擎中的自定义小部件，这就是为什么我认为我应该只使用 Facebook SDK。

我成功使用了 Facebook SDK，但问题是每次脚本检测到用户未登录 facebook.com 时，它都会要求用户登录。这个怎么解决？？

我实际上可以检索诸如 openid、facebookemail 之类的用户详细信息。是的，这只是我知道的:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T10:02:15.010

我在 Zend-Framework 中开发了相同类型的应用程序。我已经将 Facebook/PHP-SDK 与 oAuth 2.0 一起使用。

在这种情况下，您需要在数据库中为特定用户保存访问令牌。并且使用该访问令牌，您可以获得任何数据以及发布到。是的，您需要为您的 Facebook APP 授予用户必要的许可。

这是我在应用程序中用于获取访问令牌、扩展它并存储在数据库中的两个函数。

```
 /**
     * Getting User Acess Tocken , extended it and save it in to database......
     */
    public function getAccessToken($user_id,$fb_account_id)
    {
         $access_token=$this->facebook->getAccessToken();               
         $extended_access_token=$this->getExtendedAccessToken($access_token);                
        /** 
         * To save Access tocken and other necessary option
         */  
        $usr_bus_model = new Application_Model_UserBusinessAccounts;

        $usr_bus_model->loadAccount($user_id,'Facebook',(int)$fb_account_id);

        $usr_bus_model->details=$extended_access_token;
        $usr_bus_model->save();

        return $extended_access_token;
    }

     /**
     * Exrending User Acess Tocken.....
     */

    public function getExtendedAccessToken($access_token)
    {       

        $token_url="https://graph.facebook.com/oauth/access_token";
        $params=array('client_id'=>self :: appId,'client_secret'=>self :: appSecretId,'grant_type'=>'fb_exchange_token','fb_exchange_token'=>$access_token);

          $response = $this->curl($token_url,$params);
          $response = explode ('=',$response);
          $response = explode ('&',$response[1]);
          $response = $response[0];       
          return $response;

    } 
```

希望能帮助到你。

# php - php：从文件中获取内容并插入mysql db，避免再次插入已经插入的数据

> ID：11662687
> 
> 赞同：0
> 
> 时间：2012-07-26T05:08:19.637
> 
> 标签：php, mysql

我正在从 txt 文件中获取简单的数据。文本文件由国家列表组成。例如：美国英国非洲我正在获取内容，在换行符上将其分解并插入到 mysql 中。到这里为止，一切都很顺利。现在我真正想要的是，如果我在该 txt 文件列表中再添加两个国家/地区。所以已经插入的数据不应该再次插入，只应添加两个新行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:11:39.770

如果你有一个`PRIMARY KEY`或`UNIQUE KEY`在一张桌子上，那么你可以使用`INSERT IGNORE`子句：

例如，如果您有一个`UNIQUE KEY`on 列`country`，则执行以下操作：

```
INSERT IGNORE INTO table (country) VALUES ('America'); 
```

要强制删除重复项，[请参见此处](https://stackoverflow.com/questions/11557757/cleaning-up-db-of-redundant-data/11557812#11557812)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:27:53.887

`array_unique()`是你的朋友吗？

前任。

```
$filecontents = '...';
$countries = explode("\n", $filecontents);
$countries = array_unique($countries); 
```

然后您可以将这些国家/地区添加到您的数据库中。如果您正在谈论数据库中已经存在的数据，请按照@Omesh 所说的去做。

# javascript - 如何从 URL 中获取片段标识符（哈希 # 后的值）？

> ID：11662693
> 
> 赞同：234
> 
> 时间：2012-07-26T05:08:43.760
> 
> 标签：javascript, jquery, url, url-fragment

例子：

```
www.site.com/index.php#hello 
```

使用 jQuery，我想将值`hello`放在一个变量中：

```
var type = … 
```

* * *

## 回答 #1

> 赞同：625
> 
> 时间：2012-07-26T05:11:14.853

不需要 jQuery

```
var type = window.location.hash.substr(1); 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-07-26T05:13:27.143

您可以使用以下代码来做到这一点：

```
var url = "www.site.com/index.php#hello";
var hash = url.substring(url.indexOf('#')+1);
alert(hash); 
```

**[看演示](http://jsfiddle.net/akhurshid/6zVZA/)**

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-07-26T05:15:11.643

```
var url ='www.site.com/index.php#hello';
var type = url.split('#');
var hash = '';
if(type.length > 1)
  hash = type[1];
alert(hash); 
```

[在jsfiddle](http://jsfiddle.net/ghk64/1/)上工作演示

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-09-01T09:30:59.600

这很容易。试试下面的代码

```
$(document).ready(function(){
  var hashValue = location.hash.replace(/^#/, '');  
  //do something with the value here  
}); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-01-29T07:25:22.143

使用以下 JavaScript 从 URL 获取哈希 (#) 之后的值。你不需要为此使用 jQuery。

```
var hash = location.hash.substr(1); 
```

我从这里得到了这段代码和教程 - [How to get hash value from URL using JavaScript](http://www.codexworld.com/how-to-guides/get-hash-value-from-url-using-javascript/)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-06-26T11:23:07.833

我有运行时的 URL，下面给出了正确的答案：

```
let url = "www.site.com/index.php#hello";
alert(url.split('#')[1]); 
```

希望这可以帮助

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-03-03T01:25:16.280

根据 AK 的代码，这里有一个 Helper Function。JS 小提琴在这里（[http://jsfiddle.net/M5vsL/1/](http://jsfiddle.net/M5vsL/1/)）...

```
// Helper Method Defined Here.
(function (helper, $) {
    // This is now a utility function to "Get the Document Hash"
    helper.getDocumentHash = function (urlString) {
        var hashValue = "";

        if (urlString.indexOf('#') != -1) {
            hashValue = urlString.substring(parseInt(urlString.indexOf('#')) + 1);
        }
        return hashValue;
    };
})(this.helper = this.helper || {}, jQuery); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-12-26T22:10:15.497

**获取当前文档位置的片段**

```
var hash = window.location.hash; 
```

**从字符串中获取片段**

```
// absolute
var url = new URL('https://example.com/path/index.html#hash');

console.log(url.hash);

// relative (second param is required, use any valid URL base)
var url2 = new URL('/path/index.html#hash2', 'http://example');

console.log(url2.hash);
```

# haskell - Haskell：映射 runST

> ID：11662696
> 
> 赞同：14
> 
> 时间：2012-07-26T05:08:56.813
> 
> 标签：haskell, state-monad

我有一个类型的绑定`[ST s (Int, [Int])]`，我正在尝试`runST`使用 map 应用到每个元素，如下所示：

```
name :: [ST s (Int, [Int])] --Of Course there is a real value here
map runST name 
```

这给了我一条错误消息

```
Couldn't match expected type `forall s. ST s b0'
    with actual type `ST s0 (Int, [Int])'
Expected type: [forall s. ST s b0]
  Actual type: [ST s0 (Int, [Int])]
In the second argument of `map', namely `name'
In the expression: map runST name 
```

我一定有什么误解。我知道[runST 和 function composition](https://stackoverflow.com/questions/9468963/runst-and-function-composition)，但不确定这是否适用。

感谢大家的时间！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-26T05:51:43.520

每次使用 运行状态转换器时`runST`，它都会在与所有其他状态转换器分开的某个本地状态上运行。 `runST`创建一个*新*的状态类型并使用该类型调用其参数。因此，例如，如果您执行

```
let x = runST (return ())
    y = runST (return ())
in (x, y) 
```

那么第一个`return ()`和第二个`return ()`将有不同的类型：`ST s1 ()`和`ST s2 ()`，对于一些未知类型`s1`和`s2`由`runST`.

您正在尝试`runST`使用具有 state 类型的参数进行调用`s`。这不是`runST`创建的状态类型，也不是您可以选择的任何其他类型。要调用`runST`，您必须传递一个可以具有*任何*状态类型的参数。这是一个例子：

```
r1 :: forall s. ST s ()
r1 = return () 
```

因为`r1`是多态的，所以它的状态可以有任何类型，包括被 . 选择的任何类型`runST`。您可以映射`runST`多态`r1`s 的列表（使用`-XImpredicativeTypes`）：

```
map runST ([r1, r1] :: [forall t. ST t ()]) 
```

但是，您不能映射`runST`非多态`r1`s 的列表。

```
map runST ([r1, r1] :: forall t. [ST t ()]) -- Not polymorphic enough 
```

该类型`forall t. [ST t ()]`表示所有列表元素都有状态类型`t`。但是它们都需要具有独立的状态类型，因为`runST`每个状态类型都被调用。这就是错误消息的含义。

如果可以为所有列表元素赋予相同的状态，那么您可以调用`runST`一次，如下所示。不需要显式类型签名。

```
runST (sequence ([r1, r1] :: forall t. [ST t ()])) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-26T05:51:57.810

你`name`的多态性不够。你的陈述

```
name :: [ST s (Int, [Int])] 
```

表示“返回 (Int, [Int]) 的有状态计算列表，它们具有*完全相同的* `s`”。但看看类型`runST`：

```
runST :: (forall s. ST s a) -> a 
```

这种类型的意思是“一个进行有状态计算的函数，它`s` *可以是你能想象到的任何东西*”。这些类型的计算不是一回事。最后：

```
map runST :: [forall s. ST s a] -> [a] 
```

你看，你的列表应该比现在包含更多的多态值。`s`列表的每个元素中的类型可能不同，它可能与中的类型不同`name`。更改 的类型签名`name`，一切都应该没问题。它可能需要启用一些扩展，但 GHC 应该能够告诉您哪些扩展。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-26T23:01:54.073

我将尝试解释`runST`' 类型的原因：

```
runST :: (forall s. ST s a) -> a 
```

为什么它不像这个简单的：

```
alternativeRunST :: ST s a -> a 
```

请注意，这`alternativeRunST`对您的程序有效。

`alternativeRunST`还允许我们从`ST`monad 中泄漏变量：

```
leakyVar :: STRef s Int
leakyVar = alternativeRunST (newSTRef 0)

evilFunction :: Int -> Int
evilFunction x =
  alternativeRunST $ do
    val <- readSTRef leakyVar
    writeSTRef leakyVar (val+1)
    return (val + x) 
```

然后你可以进入 ghci 并执行以下操作：

```
>>> map evilFunction [7,7,7]
[7,8,9] 
```

`evilFunction`不是参照透明的！

顺便说一句，要自己尝试一下，这是运行上述代码所需的“坏 ST”框架：

```
{-# LANGUAGE GeneralizedNewtypeDeriving #-}
import Control.Monad
import Data.IORef
import System.IO.Unsafe
newtype ST s a = ST { unST :: IO a } deriving Monad
newtype STRef s a = STRef { unSTRef :: IORef a }
alternativeRunST :: ST s a -> a
alternativeRunST = unsafePerformIO . unST
newSTRef :: a -> ST s (STRef s a)
newSTRef = ST . liftM STRef . newIORef
readSTRef :: STRef s a -> ST s a
readSTRef = ST . readIORef . unSTRef
writeSTRef :: STRef s a -> a -> ST s ()
writeSTRef ref = ST . writeIORef (unSTRef ref) 
```

真实`runST`不允许我们构造这样的“邪恶”功能。它是如何做到的？这有点棘手，见下文：

试图运行：

```
>>> runST (newSTRef "Hi")
error:
    Couldn't match type `a' with `STRef s [Char]'
...

>>> :t runST
runST :: (forall s. ST s a) -> a
>>> :t newSTRef "Hi"
newSTRef "Hi" :: ST s (STRef s [Char]) 
```

`newSTRef "Hi"`不适合`(forall s. ST s a)`。使用一个更简单的例子也可以看出，GHC 给了我们一个非常好的错误：

```
dontEvenRunST :: (forall s. ST s a) -> Int
dontEvenRunST = const 0

>>> dontEvenRunST (newSTRef "Hi")
<interactive>:14:1:
    Couldn't match type `a0' with `STRef s [Char]'
      because type variable `s' would escape its scope 
```

注意我们也可以写

```
dontEvenRunST :: forall a. (forall s. ST s a) -> Int 
```

它相当于`forall a.`像我们之前所做的那样省略了。

注意 的范围`a`比的要大`s`，但在情况下`newSTRef "Hi"`它的值应该取决于`s`。类型系统不允许这样做。

# nsis - 如何在 NSIS 中制作结构数组

> ID：11662699
> 
> 赞同：1
> 
> 时间：2012-07-26T05:09:32.997
> 
> 标签：nsis

我有一个 XML 文件....现在我想根据我在 NSIS SCRIPT 中的要求解析它并将数据存储到结构数组中。

```
 This is my XML:-

  <?xml version="1.0" ?> 
- <request>
- <software>
  <id>1</id> 
  <name>software</name> 
  <description>is a file archiver with a high compression ratio.</description> 
  <download_url>http://surfnet.dl.sourceforge.net/project/sevenzip/7-Zip/9.20/7z920.exe</download_url> 
  <image_url>http://assets.airinstaller.com/graphics/software/7zip/left_side.bmp</image_url> 
  </software>
- <offers>
- <offer>
  <rank>1</rank> 
- <options>
- <option>
 <text>Install Facemoods1</text> 
  <value>/TOOLBAR</value> 
  <required>true</required> 
  </option>
- <option>
  <text>Set Facemoods as my default search provider1</text> 
  <value>/DEFAULTSEARCH</value> 
  <required>false</required> 
  </option>
  </options>
  <install_location>{pf}/IssPro c.dll</install_location> 
   <name>1</name> 
  <tagline>The Ringtone Maker</tagline> 
  <description>makes creating ringtones really easy.</description> 
  <exe_cmd /> 
  <download_url>http://174.36.153.163/silent-ringtonejunkiez-installer.exe</download_url> 
  <conversion_url>http://api.airinstaller.com/get/installed.php?session=9649922a0d879d92752f3925e07153c3&app=2&aff=1&off=1</conversion_url> 
     <image_url>http://assets.airinstaller.com/graphics/offers/ringtonejunkiez/logo.bmp</image_url> 
  <privacy_url>http://www.google.com/intl/en/privacy/privacy-policy.html</privacy_url> 
  <terms_url>http://www.google.com/accounts/TOS</terms_url> 
  </offer>
- <offer>
  <rank>2</rank> 
- <options>
- <option>
  <text>Install Facemoods</text> 
  <value>/TOOLBAR</value> 
  <required>true</required> 
  </option>
- <option>
  <text>Set Facemoods as my default search provider</text> 
  <value>/DEFAULTSEARCH</value> 
  <required>false</required> 
  </option>
- <option>
  <text>Set Facemoods as my default home and new tab page</text> 
  <value>/DEFAULTSTART</value> 
  <required>false</required> 
  </option>
  </options>
  <name>Ringtone 2</name> 
  <tagline>The Ringtone Maker</tagline> 
  <description>makes creating ringtones really easy.</description> 
   <exe_cmd /> 
  <download_url>http://174.36.153.163/silent-ringtonejunkiez-installer.exe</download_url> 
  <conversion_url>http://api.airinstaller.com/get/installed.php?session=9649922a0d879d92752f3925e07153c3&app=2&aff=1&off=1</conversion_url> 
   <image_url>http://assets.airinstaller.com/graphics/offers/ringtonejunkiez/logo.bmp</image_url> 
   <privacy_url>http://www.google.com/intl/en/privacy/privacy-policy.html</privacy_url> 
   <terms_url>http://www.google.com/accounts/TOS</terms_url> 
  </offer>
- <offer>
  <rank>3</rank> 
  <id>13</id> 
  <install_location>{pf}/Real/RealPlayer/f ixrjb.exe</install_location> 
  <name>3</name> 
  <description>makes creating ringtones really easy.</description> 
  <exe_cmd /> 
  <download_url>http://174.36.153.163/silent-ringtonejunkiez-installer.exe</download_url> 
  <conversion_url>http://api.airinstaller.com/get/installed.php?session=9649922a0d879d92752f3925e07153c3&app=2&aff=1&off=1</conversion_url> 
   <image_url>http://assets.airinstaller.com/graphics/offers/ringtonejunkiez/logo.bmp</image_url> 
   <privacy_url>http://www.google.com/intl/en/privacy/privacy-policy.html</privacy_url> 
   <terms_url>http://www.google.com/accounts/TOS</terms_url> 
   </offer>
   </offers>
   </request> 
```

请任何人帮助我解析它并存储到 NSIS 脚本中的结构数组中......

我被严重困在这里......

感谢您的回复，但我没有得到这个.......
我已经用这个方法解析了 XML

```
${XML::GotoPath} "/request/software" $0 

        ${XML::NextSiblingElement} "" $0 $1
                        DetailPrint "Next Sibling Element of Root Element=$0"          ; SIBLING OF SOFTWARE (SECOND CHILD OF ROOT)

           ${XML::XPathString} "count(//offer)" $0 $1
           StrCpy $ccount_offer $0
             ;${If} $0 != ""
           ; IntOp $count_offer $count_offer + 1
            ; DetailPrint "Count= $0 and $count_offer"
           ;Goto for
            ;${Else}
           ;Goto next
           ;${EndIf}

   ${For} $R1 1 $ccount_offer
         ${If} $R1 == 1
           ${XML::FirstChildElement} "" $0 $1
                 DetailPrint "Element in Offers=$0"                                ; FIRST ElEMENT    IN OFFERS
           ${xml::ElementPath} $0
     StrCpy $ccurrent_path $0
         ${Else}
           ${XML::NextSiblingElement} "" $0 $1
           DetailPrint "Element in offer=$0"
             ${xml::ElementPath} $0
     StrCpy $ccurrent_path $0
                ${EndIf}

          ${XML::XPathString} "count(child::*)" $0 $1
          ;DetailPrint "count======$0"
     StrCpy $ccount_offer_child  $0
       ${XML::FirstChildElement} "" $0 $1                       ;first child of offer
      DetailPrint "Element in Offer=$0"
          ${XML::GetText} $0 $1
     DetailPrint "Text in it=$0"
       IntOp $ccount_offer_child $ccount_offer_child - 1
  ${For} $R2 1 $ccount_offer_child

            ;${If} $R2 == 1

       ;${Else}

          ${XML::NextSiblingElement} "" $0 $1
     DetailPrint "Element in Offer=$0"

           ${If} $0 == "options"                                  ; options for loops

             ${xml::ElementPath} $0
       StrCpy $llast_current_path $0

          ${XML::XPathString} "count(child::*)" $0 $1
          StrCpy $ccount_options  $0

    ${If} $0 != 0

    ${For} $R3 1 $ccount_options
         ${If} $R3 == 1
          ${XML::FirstChildElement} "" $0 $1
        DetailPrint "Element in Options=$0"

          ${xml::ElementPath} $0
          StrCpy $llast_last_current_path $0

          ${XML::XPathString} "count(child::*)" $0 $1
          StrCpy $ccount_options_option  $0

      ${For} $R4 1 $ccount_options_option
            ${If} $R4 == 1

         ${XML::FirstChildElement} "" $0 $1
     DetailPrint "Element in Option=$0"

  ${XML::GetText} $0 $1
          DetailPrint "Text in it=$0"
          ${Else}

         ${XML::NextSiblingElement} "" $0 $1
     DetailPrint "Element in Option=$0"

 ${XML::GetText} $0 $1
         DetailPrint "Text in it=$0"

${EndIf}

    ${Next}

         ${XML::GotoPath} $llast_last_current_path $0

${Else}

      ${XML::GotoPath} $llast_last_current_path $0

        ${XML::NextSiblingElement} "" $0 $1
      DetailPrint "Element in Options=$0"

          ${XML::XPathString} "count(child::*)" $0 $1
         StrCpy $ccount_options_option  $0

  ${For} $R4 1 $ccount_options_option
          ${If} $R4 == 1

        ${XML::FirstChildElement} "" $0 $1
      DetailPrint "Element in Option=$0"

  ${XML::GetText} $0 $1
         DetailPrint "Text in it=$0"

           ${Else}

        ${XML::NextSiblingElement} "" $0 $1
     DetailPrint "Element in Option=$0"

 ${XML::GetText} $0 $1
         DetailPrint "Text in it=$0"

    ${EndIf}

${Next}

         ${EndIf}

${Next}

   ${EndIf}
                 ${XML::GotoPath} $llast_current_path $0          ;end of options      for loops

     ${ElseIf} $0 == "exe_cmd"
     ${Else}
     ${XML::GetText} $0 $1
     DetailPrint "Text in it=$0"
         ${EndIf}

        ; ${EndIf}

${Next}

        ${XML::GotoPath} "$ccurrent_path" $0

${Next} 
```

现在我希望将数据存储到结构数组中而不是简单的数组中......因为 XML 是动态的并且大小（标签）可以增加所以我认为将数据存储到结构数组中（不单独数组）将是更好的方法.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:20:06.957

NSIS 没有对数组的本机支持，但您可以使用[此处](http://nsis.sourceforge.net/Arrays_in_NSIS)列出的备选方案之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T04:37:12.250

首先，您需要使用一些 XML 插件（例如： http: [//nsis.sourceforge.net/XML_plug-in](http://nsis.sourceforge.net/XML_plug-in)）从 XML 中解析数据。

[然后使用一些http://nsis.sourceforge.net/Arrays_in_NSIS](http://nsis.sourceforge.net/Arrays_in_NSIS)插件将数据保存在数组中（推荐使用 nsArray 插件）。

你想把整棵树保存在数组中吗？我想这确实是一项艰巨的任务，因为有很多可能性：您要保存所有元素还是只保存非空元素？或者您只是想读取一些值？

请更具体地说明数组的外观。

编辑：（示例）

只需循环遍历加载的树并保存数据：

```
 IntOp $R1 0 + 0 ; Set $R1 to zero at beginning

  ${While} End_Of_XML_Tree

    ; Fill $your_value with the data you want (element name, value or even whole node path)

    nsArray::Set your_array /key=$R1 $your_value ; Save value to your_array at key = $R1
    IntOp $R1 $R1 + 1 ; Increase $R1 (next key)
  ${EndWhile} 
```

nsArray::Set 添加`value`at `key`，用该键替换任何现有值。

# ios - iOS 应用加载时使用对象初始化数组

> ID：11662700
> 
> 赞同：0
> 
> 时间：2012-07-26T05:09:34.263
> 
> 标签：ios, xcode, viewdidload

我一直在网上浏览一些 iOS 示例，我遇到了一个应用程序，该应用程序初始化一个数组，然后在 iOS 应用程序启动时向其中添加对象。在我的实现文件中使用时初始化有效，`(void) viewDidLoad` 但在我使用时初始化数组不起作用

`- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil`

有人能告诉我为什么会这样吗？谢谢！

这是代码 -

```
(void) viewDidLoad
{
if (self) {
    questions = [[NSMutableArray alloc] init];
    answers = [[NSMutableArray alloc] init];

    // Add objects to the arrays
    [questions addObject:@"What is 1+1"];
    [answers addObject:@"2"];

    [questions addObject:@"What is 2+2"];
    [answers addObject:@"4"];

    [questions addObject:@"What is 3+3"];
    [answers addObject:@"6"];
}

[super viewDidLoad]; 
```

和 initWithNibName 的代码

```
 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {

    // Create two arrays and make the pointers point to them
    questions = [NSMutableArray array];
    answers = [NSMutableArray array];

    // Add questions and answers to the arrays
    [questions addObject:@"From what is cognac made?"];
    [answers addObject:@"Grapes"];

    [questions addObject:@"What is 7 + 7?"];
    [answers addObject:@"14"];

    [questions addObject:@"What is the capital of Vermont?"];
    [answers addObject:@"Montpelier"];

}
return self;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:24:25.643

我认为当您使用情节提要时，会调用 initWithCoder 而不是 initWithNibName:bundle:，因此请将数组初始化放在那里。

# c# - 如何从电子邮件地址获取 SMTP 主机名？

> ID：11662701
> 
> 赞同：0
> 
> 时间：2012-07-26T05:09:39.193
> 
> 标签：c#, .net, vb.net, smtp

我正在开发一个应用程序，该应用程序会在特定时间间隔自动向有效电子邮件发送电子邮件。通过互联网搜索，我发现大多数代码使用现有的电子邮件帐户（例如 gmail.com）通过作为 SMTP 客户端登录来发送电子邮件。但我的问题是我不会知道用户电子邮件的 smtp 服务器名称（因为用户通常不知道这些事情，尽管他会知道登录名/密码）。例如，

someone@gmail.com 应该提供 smtp.gmail.com 和端口号 (465)

someone@nextek.net 应该提供 mail.nextek.net 和端口号 (?)

someone@screaming.Net smtp.tiscali.co.uk 和端口号 (?)

我使用电子邮件地址的域名获得了 MX 记录，但我意识到它实际上提供了可用的传入 SMTP 服务器名称。

例如，如果我在命令提示符下使用 nslookup 进行 ping，gmail.com 将提供 gmail-smtp-in.l.google.com 以及其他四个服务器名称。

另外，与通过 dns 查找电子邮件服务器名称直接发送相比，使用现有的 SMTP 支持电子邮件发送电子邮件有什么优势？还是不可能？

如果我错了，请纠正我，因为我对协议不太熟悉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:06:28.553

如果您不熟悉协议，那么尝试实现该协议是没有意义的。

通常，像您这样的应用程序不需要担心 SMTP 协议的细节。您将为您的平台使用现有的 SMTP 客户端库（我确信您可以使用一个用于 .NET 的客户端库），并连接到 MTA（*您的*MTA，而不是收件人的），给它发送电子邮件，然后您'重做。MTA 将处理所有 SMTP 协议细节，以确定如何将电子邮件发送给收件人。

发送电子邮件非常类似于将一封信放在角落的邮箱中，然后让邮局弄清楚如何投递。您不需要知道将它放在哪辆车上，或者收件人的当地邮局配送中心在哪里，或者任何这些细节。

您可以选择使用[Postfix](http://postfix.org)之类的工具设置自己的 MTA ，或者您可以通过自己的 Gmail 帐户发送电子邮件（当然，在 Gmail 允许您这样做之前，您需要一个 Gmail 帐户和密码）。

# android - 检查 Android 上是否可以访问 Internet

> ID：11662707
> 
> 赞同：1
> 
> 时间：2012-07-26T05:10:18.973
> 
> 标签：android

我如何检查互联网是否有。但我找到了这段代码，但是当 wifi 连接时它返回 true，但我知道没有互联网。不能访问网络。

```
 public boolean chechInternet_con(){
    ConnectivityManager connec = (ConnectivityManager)
    context.getSystemService(Context.CONNECTIVITY_SERVICE);
    android.net.NetworkInfo wifi =connec.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
    android.net.NetworkInfo mobile = connec.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

    // Here if condition check for wifi and mobile network is available or not.
    // If anyone of them is available or connected then it will return true, otherwise false;

    if (wifi.isConnected() || mobile.isConnected()) {
        return true;
    } 
    return false;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:11:27.880

试试这个，

```
public boolean isInternetOn(Context ctx) {
        this.mContext = ctx;
        ConnectivityManager Connect_Manager = (ConnectivityManager) mContext
                .getSystemService(Context.CONNECTIVITY_SERVICE);
        State connected = NetworkInfo.State.CONNECTED;
        State connecting = NetworkInfo.State.CONNECTING;
        State disconnected = NetworkInfo.State.DISCONNECTED;

        State info0 = Connect_Manager.getNetworkInfo(0).getState();
        State info1 = Connect_Manager.getNetworkInfo(1).getState();

        // ARE WE CONNECTED TO THE NET
        if (info0 == connected || info0 == connecting || info1 == connecting
                || info1 == connected) {

            Log.d("Internet", "Connected");
            return true;
        } else if (info0 == disconnected || info1 == disconnected) {
            Log.d("Internet", "DisConnected");
            return false;
        }
        return false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:14:10.737

见下面的代码

```
 public static boolean checkConnection(Context context) {

    final ConnectivityManager mConnectivityManager = (ConnectivityManager) context
            .getSystemService(Context.CONNECTIVITY_SERVICE);

    final NetworkInfo netInfo = mConnectivityManager.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnectedOrConnecting()) {
        return true;
    } else
        return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T05:24:28.473

因此，它连接到 wi-fi 网络但无法访问互联网。对？

尝试 ping 8.8.8.8 或 google.com 以了解是否可以访问 Internet。 [这](https://stackoverflow.com/questions/3905358/how-to-ping-external-ip-from-java-android)将对您有所帮助。

# java - 顺序搜索

> ID：11662711
> 
> 赞同：2
> 
> 时间：2012-07-26T05:10:54.683
> 
> 标签：java, search, sequential

好的，我对 Java 编程比较陌生，但以前有 C++ 经验。我想在数组中搜索特定项目，但是如果有多个相同的特定项目怎么办？最好使用临时数组将所有找到的项目存储在数组中并返回临时数组吗？

注意：我正在尝试通过内存管理和速度找到最好的方法。而且它不适合家庭工作:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T05:27:24.770

如果您能够跳过 Java，那么在 Scala 中会容易得多：

```
scala> val a = Array(4, 6, 8, 9, 4, 2, 4, 2)
a: Array[Int] = Array(4, 6, 8, 9, 4, 2, 4, 2)

scala> a.filter(_ == 4)
res0: Array[Int] = Array(4, 4, 4) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T09:59:55.647

使用 apache commons lib，解决了很多问题。如果要按谓词过滤并选择子数组，请使用此选项

```
 CollectionUtils.filter(
            Arrays.asList(new Integer[] {1,2,3,4,5}),
            new Predicate() {
                public boolean evaluate(final Object object) {
                    return ((Integer) object) > 2;
                }
            }
    ); 
```

如果您想选择项目，请使用

```
CollectionUtils.select(Collection inputCollection, Predicate predicate) 
```

使用真正的 java 方式 - 可导航集和地图

```
NavigableSet<E> subSet(E fromElement, boolean fromInclusive,
                       E toElement,   boolean toInclusive); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T10:13:54.580

只需使用番石榴库作为最简单的解决方案：

[http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Iterables.html](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Iterables.html) 或 [http://docs.guava-libraries.googlecode.com/git/javadoc/com/ google/common/collect/Collections2.html](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Collections2.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T05:26:20.853

只需使用`ArrayList`. 例子：

```
/** Returns all strings starting with the letter a.*/
public static List<String> getStartsWithA(String[] strs) {
  List<String> ret = new ArrayList<String>();
  for (String s: strs) {
    if (s.startsWith("a") || s.startsWith("A")) {
      ret.add(s);
    }
  }
  return ret;
} 
```

`ArrayList`的内部数组将随着需要更多空间而动态增长。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T05:32:22.623

我会使用像 HashMap 这样的“即用型”实现。你说“搜索”，所以我相信你有一个搜索键（在我的建议中是字符串），你可以在它下面存储你的数据（例如一个整数）。

```
Map<String, List<Integer>>  map = new HashMap<String, List<Integer>>(); 

    void storeValue(final String key, final Integer value) {
        List<Integer> l = this.map.get(key);
        if (l == null) {
            synchronized (this.map) {
                if (l == null) {
                    l = new Vector<Integer>();
                    this.map.put(key, l);
                }
            }
        }
        l.add(value);
    }

    List<Integer> searchByKey(final String key) {
        return this.map.get(key);
    } 
```

有了这个，您可以存储多个整数@一个键。当然，您可以存储除整数以外的其他对象。

# asp.net-mvc-4 - 如何使用 asp MVC 4 添加 google 1 按钮并添加到 Internet 应用程序中

> ID：11662713
> 
> 赞同：-1
> 
> 时间：2012-07-26T05:11:05.783
> 
> 标签：asp.net-mvc-4, google-plus-one

如何使用 asp MVC 4 添加 google +1 按钮并添加到 Internet 应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:51:13.793

首先：[https ://developers.google.com/+/plugins/+1button/](https://developers.google.com/+/plugins/+1button/)

添加 Google +1 按钮与 MVC 4 本身没有太大关系，但潜在的实现如下所示：

## 在视图/局部视图中

```
<footer>
    <ul>
        <li>
            <div class="g-plusone" data-annotation="none"></div>
        </li>

        @* other buttons/links/whatever *@

    </ul>
</footer> 
```

## 在View对应的_Layout.cshtml中

```
<script>
    (function() {
        var po = document.createElement( 'script' ); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName( 'script' )[0]; s.parentNode.insertBefore( po, s );
    } )();
</script> 
```

请注意，您可以有条件地加载此脚本，将其放在 a`@section`中，等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:30:12.027

为此，首先您必须创建 opnID 身份验证密钥以获取更多信息，您可以查看此链接： http: [//net.tutsplus.com/tutorials/building-an-asp-net-mvc4-application-with-ef-and- webapi/](http://net.tutsplus.com/tutorials/building-an-asp-net-mvc4-application-with-ef-and-webapi/)

# javascript - 将值从一个输入字段复制到另一个输入字段

> ID：11662715
> 
> 赞同：5
> 
> 时间：2012-07-26T05:11:09.037
> 
> 标签：javascript, html

我需要一个 javascript 函数，用于根据复选框选择将一个输入字段的值复制到另一个输入字段。但是我在点击时做了一些javascript代码，

```
<script>    
function copyTextValue() {
    var text1 = document.getElementById("Name1").value;
    document.getElementById("Name2").value = text1;
    document.getElementById("Name3").value=text1;
}
</script>

<input type="checkbox" name="check1" onclick="copyTextValue();"/> 
```

现在我需要在取消选中的那两个框中删除复制的值。我坚持这一点。有什么帮助吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-26T05:16:10.473

```
function copyTextValue(bf) {
  var text1 = bf.checked ? document.getElementById("Name1").value : '';
  document.getElementById("Name2").value = text1;
  document.getElementById("Name3").value = text1;
}
```

```
<input type="checkbox" name="check1" onchange="copyTextValue(this);" />
<input id="Name1"><input id="Name2"><input id="Name3">
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-20T05:15:02.670

通过使用upper ans，我将账单地址复制到woocommerce中的送货地址

```
 function copyTextValue(bf) {
        var billing_first_name = bf.checked ? document.getElementById("billing_first_name").value : '';
        var billing_last_name = bf.checked ? document.getElementById("billing_last_name").value : '';
        var billing_address_1 = bf.checked ? document.getElementById("billing_address_1").value : '';
        var billing_address_2 = bf.checked ? document.getElementById("billing_address_2").value : '';
        var billing_city = bf.checked ? document.getElementById("billing_city").value : '';
        var billing_state = bf.checked ? document.getElementById("billing_state").value : '';
        var billing_postcode = bf.checked ? document.getElementById("billing_postcode").value : '';
        document.getElementById("shipping_first_name").value = billing_first_name;
        document.getElementById("shipping_last_name").value = billing_last_name;
        document.getElementById("shipping_address_1").value = billing_address_1;
        document.getElementById("shipping_address_2").value = billing_address_2;
        document.getElementById("shipping_city").value = billing_city;
        document.getElementById("shipping_state").value = billing_state;
        document.getElementById("shipping_postcode").value = billing_postcode;

      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-25T06:41:52.420

这就是我取消选中的方法：

```
 document.getElementById("Name2").value ="";
    document.getElementById("Name3").value=""; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-16T07:19:32.500

```
function copyTextValue() {

    if(document.getElementById('check1').checked){
        let text1 = document.getElementById('Name1').value;        
        document.getElementById('Name2').value = text1;
        document.getElementById('Name3').value = text1;
    }
    else{
        document.getElementById('Name2').value = "";
        document.getElementById('Name3').value = "";
    }    
}
```

```
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <input type="text" id="Name1" name="Name1">
  <input type="text" id="Name2" name="Name2">
  <input type="text" id="Name3" name="Name3">  

  <input type="checkbox" id="check1" name="check1" onclick="copyTextValue();"/>

</body>
</html>
```

# c# - 锁内引发的事件的处理程序会在锁外执行吗？

> ID：11662720
> 
> 赞同：0
> 
> 时间：2012-07-26T05:11:31.703
> 
> 标签：c#, .net, events

锁内引发的事件的处理程序会在锁外执行吗？在引发事件的方法完成后，处理程序何时迭代？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T05:19:27.690

事件处理程序只是委托，将立即在`lock`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T05:20:32.467

如果你同步触发事件，同一个线程执行事件处理程序的代码，并且只有在执行后才返回起点并从锁块中存在

# php - PHP 循环和奇怪的 HTML 输出

> ID：11662729
> 
> 赞同：-1
> 
> 时间：2012-07-26T05:12:31.723
> 
> 标签：php, html, loops, html-table

当我创建一个循环来格式化一些像这样的 html 时：

```
$pieces = Equipment::find_all();
foreach($slots as $slot) { 
    echo "<h3>".ucfirst($slot)."</h3>";
    echo "<table class=\"eq_table\"><th><td>Name</td><td>P.AC</td><td>M.AC</td><td>Saves</td><td>Dex</td><td>Str</td><td>Int</td><td>Wis</td><td>Con</td><td>Hit</td><td>Dam</td><td>Hp</td><td>Mana</td></th>";
    foreach($pieces as $piece) {
        if($piece->slot == $slot) {
            echo "<tr><td>$piece->name</td><td>$piece->p_ac</td><td>$piece->m_ac</td><td>$piece->saves</td><td>$piece->dev</td><td>$piece->dex</td><td>$piece->str</td><td>$piece->intel</td><td>$piece->wis</td><td>$piece->con</td><td>$piece->hit</td><td>$piece->hit</td>$piece->dam</td><td>$piece->hp</td><td>$piece->mana</td></tr>";
        }
    }
} 
```

我得到这个明显不需要的输出：

[截图 http://db.tt/mtFD7Pec](http://db.tt/mtFD7Pec)

页面底部有一个没有标题的额外表格。是什么导致了这种行为，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:18:15.007

尝试这个

```
echo "<table class=\"eq_table\">
        <th>
            <td>Name</td>
            <td>P.AC</td>
            <td>M.AC</td>
            <td>Saves</td>
            <td>Dex</td>
            <td>Str</td>
            <td>Int</td>
            <td>Wis</td>
            <td>Con</td>
            <td>Hit</td>
            <td>Dam</td>
            <td>Hp</td>
            <td>Mana</td>
       </th>";

foreach($slots as $slot) { 
    echo "<h3>".ucfirst($slot)."</h3>";

    foreach($pieces as $piece) {
        if($piece->slot == $slot) {
            echo "<tr>
                    <td>$piece->name</td>
                    <td>$piece->p_ac</td>
                    <td>$piece->m_ac</td>
                    <td>$piece->saves</td>
                    <td>$piece->dev</td>
                    <td>$piece->dex</td>
                    <td>$piece->str</td>
                    <td>$piece->intel</td>
                    <td>$piece->wis</td>
                    <td>$piece->con</td>
                    <td>$piece->hit</td>
                    <td>$piece->hit</td>
                    <td>$piece->dam</td>
                    <td>$piece->hp</td>
                    <td>$piece->mana</td>
              </tr>";
        }
    }
}

echo '</table>' 
```

# php - 如何在屏幕上显示 symfony2 中的“instanceof”

> ID：11662730
> 
> 赞同：0
> 
> 时间：2012-07-26T05:12:31.527
> 
> 标签：php, symfony

我想知道我的对象是哪个类的实例。

像

```
class user {  } 
```

```
class driver extends user {} 
```

我想知道当用户登录时，symfony 是否创建了用户或驱动程序的实例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:18:24.760

`get_called_class()`功能应该为您解决问题。

# android - 列出所选帐户支持的授权

> ID：11662732
> 
> 赞同：9
> 
> 时间：2012-07-26T05:12:33.027
> 
> 标签：android, sync, android-contentresolver, accounts

我正在尝试开发一个应用程序，它只使用`ContentResolver.requestSync(account, authority, extras);`.

我能够通过分别使用和作为来**同步**联系人和日历。`com.android.contacts``com.android.calendar``authority`

但是，有什么办法可以得到**特定帐户支持**的权限列表？****

 **另外，使用`null`as 有什么作用`authority`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T09:25:03.230

使用[getSyncAdapterTypes()](http://developer.android.com/reference/android/content/ContentResolver.html#getSyncAdapterTypes%28%29)获取有关`SyncAdapters`系统已知的信息。

```
SyncAdapterType[] types = ContentResolver.getSyncAdapterTypes();
for (SyncAdapterType type : types) {
    if (yourAccount.type.equals(type.accountType)) {
        boolean isSyncable = ContentResolver.getIsSyncable(yourAccount, type.authority) > 0;
        if (isSyncable) {
            ContentResolver.requestSync(yourAccount, type.authority, extras);
        }
    }
} 
```

不要忘记[getIsSyncable()](http://developer.android.com/reference/android/content/ContentResolver.html#getIsSyncable%28android.accounts.Account,%20java.lang.String%29)方法需要[READ_SYNC_SETTINGS](http://developer.android.com/reference/android/Manifest.permission.html#READ_SYNC_SETTINGS)权限。**

# git - Git 完成和 PS1 不工作：Ubuntu 12.04 上的“sudo -s”或“sudo su”上的“__git_ps1：找不到命令”

> ID：11662735
> 
> 赞同：10
> 
> 时间：2012-07-26T05:12:53.920
> 
> 标签：git, bash, bash-completion

我安装了 git 和 git-flow 完成，将这些行添加到 .bashrc 的 root 和 Ubuntu 12.04 机器上的 normal_user：

```
source /etc/git-completion.bash
source /etc/git-flow-completion.bash
GIT_PS1_SHOWUPSTREAM="verbose"
GIT_PS1_SHOWDIRTYSTATE=true
PS1='\[\033[32m\]\u@\h\[\033[00m\]:\[\033[34m\]\w\[\033[31m\]$(__git_ps1)\[\033[00m\]\$ ' 
```

当我以 root 或 normal_user 身份登录时，git 完成工作。但是，如果我使用“sudo -s”或“sudo su”，则 git 完成功能不起作用，并且每次按回车键时都会不断收到“__git_ps1：找不到命令”。我试图删除“源”命令并使用“apt-get install bash-completion”（bash-completion 已经安装）。因此，即使没有 2 个来源，我也会得到完全相同的行为。

任何人都知道问题是什么以及如何使其工作？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-26T11:56:39.123

当您这样做时`sudo su`，它不会获取 users `.bashrc`。PS1 是从您执行此操作的用户继承的`sudo su`，但新的 shell 不知道在哪里可以找到`___git_ps1`

您需要通过执行来模拟登录`sudo su -l`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-11T14:09:43.970

在您的情况下，它发生是因为 git-prompt.sh 文件未在终端启动时启动，可以`find contrib/completion/git-prompt.sh`在初始 git-core 文件中启动。

机器可能已经存在，用于搜索：

> 找到 ~ -name git-prompt.sh

可能会花费很多时间，因此最好指定而不是 / 搜索更准确，可能您猜到了可以找到的位置。什么时候可以找到，在你的 promt 更改表达式之前添加到 .bashrc 中，因为它是由我制作的，并说明了方法：

> 如果 [ -f $HOME/git/1.8.0/contrib/completion/git-prompt.sh ]; 然后
> 
> . $HOME/git/1.8.0/contrib/completion/git-prompt.sh
> 
> 菲

毕竟做：

> . ~/.bashrc

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-30T20:18:34.237

[提示功能于 2012 年 5 月 22 日从 git-completion.bash 拆分为 git-prompt.sh](https://github.com/git/git/commit/af31a456b4cd38f2630ed8e556e23954f806a3cc)；你也需要`source`那个。Git 1.7.12 是第一个看到这一变化的版本。我在更新 git-completion.bash 时遇到了同样的问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-02-28T00:58:43.627

假设您在以`root`via登录时没有 git 完成没有问题`sudo su`，那么避免尝试评估只是一点点 bash 功夫`__git_ps1`。

您可以在提示中放置任何您想要的条件`PS1`（因此在 git 目录中它可以如何替换分支名称）。因此，只需将 git 内容包装在条件检查中，即您不是用户 id 0 ( `root`)。

`PS1`在您的导出语句中替换：

```
$(__git_ps1) 
```

和

```
$(if [ $(id -u) -ne 0 ]; then echo  $(__git_ps1) ; fi) 
```

您在 OP 中的整个提示现在看起来像这样：

```
 PS1='\[\033[32m\]\u@\h\[\033[00m\]:\[\033[34m\]\w\[\033[31m\]$(if [ $(id -u) -ne 0 ]; then echo  $(__git_ps1) ; fi)\[\033[00m\]\$ ' 
```

现在在 shell 中，您应该能够`sudo su`没有错误消息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-05T16:50:43.487

如果您不想添加额外的标志`-l`（或不想别名 su 等），您也可以将 root 的 bashrc 更改为不使用`__git_ps1`.

例如，在我的`/root/.bashrc`我有（我喜欢让 root 是红色的）：

```
export PS1='\[\e[1;31m\][\u@\h \W]# \[\e[0m\]' 
```

基本上，只需复制`PS1`您`~/.bashrc`或类似文件中的内容`/root/.bashrc`并删除对 __git_ps1 的任何引用。

理想情况下，您很少以 root 身份进行开发，因此不需要`__git_ps1`. 如果这样做（不建议），您可以将执行所需的所有代码复制`__git_ps1`到`/root/.bashrc`.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-03-04T17:40:16.490

也许有点晚了，但是您可以在 PS1 中替换：

```
(__git_ps1) 
```

和

```
(type -t __git_ps1 >& /dev/null && __git_ps1) 
```

这将禁用调用 __git_ps1 当它不可用时，你可能无论如何都不需要超级用户。

# asp.net - 如何使用 ASP.net MVC4 就地输出条件信息？

> ID：11662737
> 
> 赞同：1
> 
> 时间：2012-07-26T05:13:10.933
> 
> 标签：asp.net, asp.net-mvc-4

我对 ASP.net 和 MVC 完全陌生。我有一个`foreach`循环来创建一些信息行（显示为水平列表）。我想为每一行（深色和浅色）交替使用类名。

但是，我已经阅读过`Response.Write()`，当我使用它时，它似乎将其添加到输出的顶部（立即在文档的顶部`<!DOCTYPE>`）：

> `darklightdarklightdarklightdarklightdark...`

这是我到目前为止所拥有的：

```
@{
    // Dummy data.
    for (int i = 1; i <= 20; i++)
    {
        <ul class="leader @{ Response.Write(i % 2 == 0 ? "light" : "dark"); }">
            <li class="rank">@i</li>
            <li class="challenger"><img alt="Photo" src="~/Content/Textures/Photo/temp-face.jpg" /> James Winters</li>
            <li class="date">01 Sept 2012</li>
            <li class="venue">NSW - Woolloomooloo Bay Hotel</li>
            <li class="points">2999</li>
        </ul>
    }
} 
```

你会注意到我假设`Response.Write()`它会以与 PHP 相同的方式工作`echo()`。我应该怎么做？

（请注意，有其他方法可以实现我在这里所做的事情，我主要以此为例来询问如何在 HTML 中就地输出信息，就像我正在尝试的那样）。

这是通过 Visual Studio 2012 RC 实现的 MVC4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:26:43.887

使用 Html.Raw 帮助器进行纯文本输出：

```
@for (int i = 1; i <= 20; i++)
{
        <ul class="leader @Html.Raw(i % 2 == 0 ? "light" : "dark")">
            <li class="rank">@i</li>
            <li class="challenger"><img alt="Photo" src="~/Content/Textures/Photo/temp-face.jpg" /> James Winters</li>
            <li class="date">01 Sept 2012</li>
            <li class="venue">NSW - Woolloomooloo Bay Hotel</li>
            <li class="points">2999</li>
        </ul>
} 
```

# memory - 内存 - AVAIL 位 VS PRESENT 位

> ID：11662738
> 
> 赞同：2
> 
> 时间：2012-07-26T05:13:14.750
> 
> 标签：memory, memory-management

众所周知，在某些系统中，我们有一个位来指示物理地址是否在内存中 - AVAIL 位和 PRESENT 位。它们之间有什么区别？有一种情况，当当前位它打开时，但 AVAIL 不是？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:39:40.850

这些位强烈依赖于架构。使用这两者可能有用的一个例子是：

*   **AVAIL**：该页面在易失性内存（即 RAM，...）中可用。如果不是，则必须从非易失性存储器（即 HDD，...）加载。这通常称为*交换*。
*   **PRESENT**：页面条目（如果实际存在于 TLB 中）。您可能知道，一些架构使用软件维护的 TLB，并且可以很方便地知道页面是否已经加载到其中。

# php - 在 hook_submit 中使用 &$form_data 或 $form_state 时日期值的格式发生变化

> ID：11662741
> 
> 赞同：1
> 
> 时间：2012-07-26T05:13:27.697
> 
> 标签：php, ajax, drupal, date, drupal-7

我最近更改了我的表单以使用 Ajax 提交数据。我的表单接受来自用户的 (mm-dd-yyyy) 格式的日期，并且在此更改之前，我的 hook_submit 将代表我将其转换为 (yyyy-mm-dd) 格式，然后再将其发送到数据库. 更改后，它会跳过该步骤并将日期值按原样发送到数据库。

我不介意找到或编写自己的函数来进行转换，但在我这样做之前，我首先想了解它的本质。也许我以后会学到一些对我有帮助的东西。

任何帮助，将不胜感激。

我的问题是，为什么我的日期值是用 $form_data 而不是 $form_state 转换的？

使用 Drupal 7。

模块：日期 API、CTools、

```
//Original submit handler
//Format sent to DB: yyyy-mm-dd <--This is what I want for the Ajax version
function fsa_roster_form_submit($form_id, &$form_data){
$dcc_table = 'dcc_'.$form_data['values']['sid'];
$insertDaycare = db_insert($dcc_table)
    ->fields(array(
        'entered' => $form_data['values']['date_entered'],
        'exited' => $form_data['values']['date_exited'],
    ))
    ->execute();
}

//Ajaxed submit handler:
//Format sent to DB: mm-dd-yyyy
function fsa_roster_form_ajax_submit($form, $form_state) {
    $dcc_table = 'dcc_'.$form_state['input']['sid'];
    $insertRoster = db_insert($dcc_table)
    ->fields(array(
        'entered' => $form_state['input']['date_entered'],
        'exited' => $form_state['input']['date_exited'],
    ))
    ->execute();
}
$form['submit'] = array(
    '#type' => 'submit',
    '#value' => t('Save Entry'),
    '#prefix' => '<div id="modalSubmit">',
    '#ajax' => array(//Remove this from your imagination for original submit handler
        'callback' => 'fsa_daycare_roster_form_ajax_submit',
        'wrapper' => 'msgBox',
        'method' => 'replace',
        'effect' => 'fade',
    ),
    '#suffix' => '</div><script>addValidationEvents();</script>'
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:56:46.337

原因是您`$form_state['input']`在 AJAX 提交回调和`$form_state['values']`常规提交回调中使用。`input`数组始终包含处理和验证之前的表单数据，而数组`values`包含应用处理和验证后的值。

因此，要在您的 AJAX 提交回调中实现相同的效果，请使用以下内容，就像您在常规提交回调中所做的那样：

```
function fsa_roster_form_ajax_submit($form, $form_state) {
  $dcc_table = 'dcc_'.$form_state['values']['sid'];
  $insertRoster = db_insert($dcc_table)
  ->fields(array(
    'entered' => $form_state['values']['date_entered'],
    'exited' => $form_state['values']['date_exited'],
  ))
  ->execute();
} 
```

此外，对于它的价值，您的常规提交回调和 AJAX 提交回调都接受相同的参数：`$form`和`$form_state`. 尽管您在两个函数中使用不同的变量名来调用它们，但它们实际上（或多或少）相同。

# python - 如何在 Python 中复制 zlib 压缩器对象的内部状态

> ID：11662745
> 
> 赞同：2
> 
> 时间：2012-07-26T05:13:55.050
> 
> 标签：python, compression, zlib

我必须压缩一长串字符串。我必须单独压缩它们。每个字符串的长度小于 1000 个字符。然而，许多这些字符串都有一个共同的前缀。因此，我想知道是否可以通过首先压缩公共前缀然后存储压缩器的状态并将其提供字符串的后缀来分摊压缩成本。

如果您对如何在 Python 中完成此任务有任何建议，那就太好了。尽管我在标题中提到了 zlib，但任何其他标准模块也可以使用。在这个应用程序中解压速度并不重要，所以我可以承受解压速度相当慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:44:06.063

zlib的[Python 接口](http://docs.python.org/library/zlib.html)相当简陋，并且不提供对[zlib 的所有功能](http://zlib.net/manual.html)的访问。如果您可以构建自己的 zlib 接口，那么您可以做您所要求的，等等。

“以及更多”与您单独压缩非常短的字符串这一事实有关，这从本质上限制了您可以获得多少压缩。由于这些字符串有一些共同的内容，你应该使用`deflateSetDictionary()`和`inflateSetDictionary()`zlib 的功能可以利用这一事实，并可能显着改善压缩。公共内容可以是您提到的公共前缀，也可以是字符串中其他任何地方的公共内容。您将定义一个固定字典，用于包含在字符串中常见的字节序列的最大 32K 的所有字符串。您会将最常见的序列放在 32K 的末尾，而将不太常见的序列放在前面。如果这些字符串的多个类具有不同的公共序列，您可以根据需要创建一组字典并使用第一次调用返回的字典 id`inflate()`来选择字典。对于一个或多个字典，您只需要确保相同的字典存储在压缩和解压缩端。

至于存储压缩状态，您可以使用`deflateCopy()`. 这是在 Python 中与`copy()`方法一起提供的。我不确定这会给你带来多大的速度优势，尽管对于小字符串。

**更新：**

从最近添加的评论来看，我相信您的用例是您根据请求将许多字符串中的一些发送给接收者。在这种情况下，可能有一种方法可以使用微不足道的 Python 接口获得更好的压缩。您可以使用`flush`with 方法`Z_SYNC_FLUSH`将到目前为止已压缩的内容强制输出。这将允许您将请求的一系列字符串视为单个压缩流。

该过程将是您使用 启动一个压缩对象`compressobj()`，`compress()`在该对象上使用请求的第一个字符串，收集该对象的输出（如果有），然后`flush(Z_SYNC_FLUSH)`对该对象执行 a 操作，收集剩余的输出。`compress()`将和的组合输出发送`flush()`到已启动 a 的接收器，`decompressobj()`然后将其用于`decompress()`该对象及其发送的内容，这将返回原始字符串。（减压端无需冲洗。）

到目前为止，结果与仅压缩第一个字符串没有太大区别。好的部分是您重复该过程而无需创建新的压缩或解压缩对象。只需将`compress()`and`flush()`用于下一个字符串，然后`decompress()`在另一端获取它。第二个字符串以及所有后续字符串的优点是它们可以使用先前字符串的历史进行压缩。然后你不需要构建或使用任何固定的字典。您可以只使用先前请求的字符串的历史记录来提供良好压缩所需的素材。如果您的字符串平均长度为 1000 字节，那么最终发送的每个字符串都将受益于最近发送的 32 个字符串的历史记录，因为用于压缩的滑动窗口是 32K 长。

完成后，只需关闭对象。

# android - Android GPS 定位，不会提供位置

> ID：11662748
> 
> 赞同：0
> 
> 时间：2012-07-26T05:14:46.973
> 
> 标签：android, gps, location, latitude-longitude

目标：确定一次 GPS 位置，然后将纬度/经度放入两个单独的 EditText 框中以显示给用户。

问题：我已经测试了我的方法，它在模拟器中运行良好，我向它发送 GPS 坐标，它运行良好且花花公子。我在两个单独的设备（v2.1 手机、v4.0 ICS 平板电脑）上尝试了它，并且 GPS 图标出现在通知中（一切都很好），但只是停留在那里试图确定位置。我已经测试了很多次，每次测试都给了足够的时间。*编辑：当我外出时在电话上工作正常，所以我可以把它划掉。平板电脑还是有问题。*

我在布里斯班市中心，所以我怀疑这是位置问题——此外，通过 GPS 定位我时，谷歌地图工作得很好。

如果我关闭 GPS 使其默认返回网络定位，它会很好地工作并为我提供位置。

方法：

（我调用的方法）；

```
public void locateCoordinates(EditText latitudeInput, EditText longitudeInput) {
    // Find coordinates, place them in EditText boxes.

    // Create the locating services if needed
    if(locManager == null) {
        locManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    }
    if(locListener != null) {
        // Unregister listener from locManager (in case of double click of Locate button)
        locManager.removeUpdates(locListener);
    }
    locListener = new LocListenerImpl(locManager, latitudeInput, longitudeInput);

    if(locManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
        locManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, 0, 0, locListener);
    } else if(locManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) {
        locManager.requestLocationUpdates(
                LocationManager.NETWORK_PROVIDER, 0, 0, locListener);
        Toast.makeText(this,
                "GPS unavailable, trying network-based location instead.",
                Toast.LENGTH_SHORT).show();
    } else {
        Toast.makeText(this,
                "No locating methods enabled", Toast.LENGTH_SHORT).show();
    }

} 
```

（监听器实现类）；

```
public class LocListenerImpl implements LocationListener {

    private LocationManager locManager = null;
    private EditText latitudeInput = null;
    private EditText longitudeInput = null;

    public LocListenerImpl(LocationManager locManager, EditText latitudeInput, EditText longitudeInput) {
        this.latitudeInput = latitudeInput;
        this.longitudeInput = longitudeInput;
        this.locManager = locManager;
    }

    public void onLocationChanged(Location location) {
        if(location != null) {
            latitudeInput.setText(String.valueOf(location.getLatitude()));
            longitudeInput.setText(String.valueOf(location.getLongitude()));
            locManager.removeUpdates(this); // Location found, unregister listener
        }
    }

    public void onProviderDisabled(String provider) {}
    public void onProviderEnabled(String provider) {}
    public void onStatusChanged(String provider, int status, Bundle extras) {}
} 
```

我正在努力查看我做错了什么或可能导致这种情况的原因。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:25:52.507

尝试将 locManager.removeUpdates(this) this 放在其他方法中，例如 onStop() 或在同一方法内的 else 循环中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:28:45.087

您的代码看起来完全正常，因此您的设备一定有问题..

有时需要 10 分钟左右才能正确锁定 GPS。当您没有互联网连接时，它无法从互联网下载有关卫星星历表的粗略数据，因此需要很长时间才能找到卫星。即使你可以清楚地看到天空。

网络提供商在另一边是即时的，所以请尝试等待更长的时间..或尝试重新启动您的设备，或尝试取消选中并选中位置设置中的位置服务复选框（这有助于一些无法获得 GPS 修复的人)，或尝试下载[GPS 状态](https://play.google.com/store/apps/details?id=com.eclipsim.gpsstatus2&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5lY2xpcHNpbS5ncHNzdGF0dXMyIl0.)应用程序，您可以在其中查看有关 GPS 的一些更具体的数据（上次修复时间、首次修复时间、aGPS 数据状态、卫星详细信息……）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T05:34:48.740

设备无法获取位置的一个可能原因是，在没有清晰的天空视野的情况下，它们无法连接到卫星。您通过网络（小区三角测量）获取位置，因为它只需要运营商提供商来确定位置。谷歌地图混合使用所有可用的方法（wi-fi、网络、GPS）来定位。在真机上进行测试，我建议你去开阔的天空呼吸一些新鲜空气:)

# python - 将文件分成块

> ID：11662749
> 
> 赞同：3
> 
> 时间：2012-07-26T05:15:09.227
> 
> 标签：python, sha256

正在为我正在学习的密码学自学课程做作业（我没有收到这门课的学分）。我需要在一个大文件上计算哈希值，其中哈希是逐块完成的。我现在被难住的事情是如何将文件分解成这些块？我正在使用python，我对它很陌生。

```
f = open('myfile', 'rb')
BLOCK_SIZE = 1024
m = Crypto.Hash.SHA256.new()
thisHash = ""
blocks = os.path.getsize('myfile') / BLOCK_SIZE #ignore partial last block for now

for i in Range(blocks):
    b = f.read(BLOCK_SIZE)
    thisHash = m.update(b.encode())
    f.seek(block_size, os.SEEK_CUR) 
```

我正确地接近这个吗？代码似乎一直运行到该`m.update(b.encode())`行执行为止。我不知道我是否离基地很远，或者该怎么做才能完成这项工作。任何建议表示赞赏。谢谢！

（注意：正如您可能注意到的那样，这段代码目前并没有真正产生任何东西——我只是设置了一些脚手架）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T05:47:30.307

您必须做一些事情才能使此示例正常工作。这里有几点：

*   `Crypto.Hash.SHA256.SHA256Hash.update()`（你调用它`m.update()`）没有返回值。要从对象中提取人类可读的散列，`.update()`它会多次调用，然后调用`.hexdigest()`
*   `.update()`在将二进制数据提供给函数之前，您不需要对其进行编码。只需传递包含数据块的字符串。
*   文件指针前移`file.read()`. 您不需要单独的`.seek()`操作。
*   `.read()`如果您已经点击 EOF，将返回一个空字符串。这完全没问题。随意拉入那个部分块。
*   变量名区分大小写。`block_size`不是同一个变量`BLOCK_SIZE`。

进行这些小的调整，并假设您拥有所有正确的导入，您将走在正确的轨道上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T18:20:46.190

替代解决方案是先将文件分成块，然后逐块执行散列

This will break the file into chunks of 1024 bytes

```
with open(file,'rb') as f:
    while True:
        chunk = f.read(1024)
        if chunk:
            fList.append(chunk)
        else:
            numBlocks = len(fList)
            break 
```

`Note: last block size may be less than 1024 bytes`

Now you can do the hash in whichever you want to.

# php - 在 Internet Explorer 的情况下，是否可以通过中级 Internet 安全中的会话传递变量

> ID：11662761
> 
> 赞同：-1
> 
> 时间：2012-07-26T05:15:45.377
> 
> 标签：php, phpmyadmin

[我已经使用视频http://www.youtube.com/watch?v=hAkKC8DKN9A](http://www.youtube.com/watch?v=hAkKC8DKN9A)中的逻辑显示创建了一个登录页面，但不幸的是，在我的一个站点中使用相同的逻辑完成整个代码并将其托管在我们的办公室服务器之后我意识到这个特定的代码在 Internet Explorer 的中级 Internet 安全中不起作用。

问题是在使用会话将变量传递到另一个页面时，我发现存储在会话中的变量永远不会传递，这是我的代码中最重要的事情。我在 mozilla 和 google chrome 中没有遇到这个问题。

是否有任何方法可以使用视频中显示的相同代码将存储在会话中的变量传递到 Internet Explorer 中的中等安全级别。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:35:19.700

我一直在考虑这些东西，并且一直在网上搜索登录系统的一些教程，但我找不到一个能适当涵盖所有内容的教程。我认为最好单独阅读它的各个方面。

例如; 我见过的大多数教程甚至都不知道加密或散列之间的区别。你用过的那个甚至用来`md5(md5($pw));`做“更好的加密”，只是想到实际使用它的生产代码让我畏缩。

所以我认为你应该做的是想想你需要什么样的东西来建立一个好的、安全的登录系统。提出以下问题；“如何安全地存储密码？”、“重定向用户的最佳实践是什么？”、“什么是 SQL 注入以及如何防止它？” 和“GET 和 POST 请求有什么区别，什么时候应该使用哪个？”。如果您尝试一一获得这些问题的答案，您会找到更好的答案。然后，对这些东西的工作原理有了很好的理解，就很容易拼凑出一个安全且用户友好的登录系统。

# php - 如何使用 Javascript 或 Jquery 检测服务器中是否存在图像

> ID：11662762
> 
> 赞同：0
> 
> 时间：2012-07-26T05:15:47.347
> 
> 标签：php, javascript, jquery

> **可能重复：**
> [如何检查 jQuery 或 Javascript 中是否存在文件？](https://stackoverflow.com/questions/3646914/how-do-i-check-if-file-exists-in-jquery-or-javascript)

我需要使用 javascript 找出服务器上特定路径中存在的图像。

如果图像存在于服务器上的特定路径中，我需要显示默认图像而不显示错误。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T05:21:58.363

您可以为该图像发送 Ajax 请求。为了简单起见，我将使用 jQuery

```
var request = $.ajax("http://www.goggle.com/fdsf.png")​​​​​​​​​​​​​;

request.done(function(msg) {
  console.log("Exists");
});

request.fail(function(jqXHR, textStatus) {
  // You check the jqXHR status object for the HTTP status so you can know 
  // why it failed
  console.log("Doesn't");
});​ 
```

# javascript - 如何在使用 ui-jquery 时对角调整大小

> ID：11662769
> 
> 赞同：0
> 
> 时间：2012-07-26T05:16:16.990
> 
> 标签：javascript, jquery-ui, jquery-ui-resizable

我正在使用 javaScript 和 jquery-ui 并想问一个关于调整大小的问题。是否可以只调整对角线的大小，即假设我有一个宽度为 200 和高度为 100 的矩形，我想通过抓住它的一个角来调整它的大小这样高度和宽度都会一起增加，保持**宽度/高度比**相同，我不能只增加高度或宽度。

我已经尝试使用可调整大小的句柄选项

```
$("#resizable").resizable({
    handles: 'se'
});​ 
```

JSFiddle 示例在这里[仅对角调整大小](http://jsfiddle.net/bx2mk/764/) 但我仍然能够仅增加高度或仅增加宽度来改变我的**宽度/高度比**。如果我不清楚，我很抱歉。

谢谢任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:33:37.913

用户喜欢

```
 <script>
    $(function() {
        $( "#resizable" ).resizable({
            aspectRatio: 16 / 9 //(in your case it should be 2/1)
        });
    });
    </script> 
```

[http://jqueryui.com/demos/resizable/aspect-ratio.html](http://jqueryui.com/demos/resizable/aspect-ratio.html)

更新的演示

[http://jsfiddle.net/bx2mk/765/](http://jsfiddle.net/bx2mk/765/)

# cocos2d-iphone - Cocos2D 2.0 - 数以万计的 OpenGL 错误

> ID：11662770
> 
> 赞同：9
> 
> 时间：2012-07-26T05:16:19.693
> 
> 标签：cocos2d-iphone

我正在将 Cocos2D 项目转换为 2.0。

我使用 Cocos2D 2.0 模板（没有物理的简单模板）创建了一个空白项目，并将所有文件从旧项目转移到空白项目。

我也将其转换为 ARC。

我编译，我没有看到任何错误。我运行该应用程序，它似乎运行正常，但我在控制台上有这些错误...

```
MyApp[1266:707] cocos2d: animation stopped
MyApp[1266:707] cocos2d: animation started with frame interval: 60.00
MyApp[1266:707] cocos2d: surface size: 640x960
MyApp[1266:707] cocos2d: surface size: 640x960
MyApp[1266:707] cocos2d: animation stopped
MyApp[1266:707] cocos2d: animation started with frame interval: 60.00
MyApp[1266:707] failed to call context
MyApp[1266:707] cocos2d: surface size: 640x960
MyApp[1266:707] Failed to make complete framebuffer object 0x8CDD
OpenGL error 0x0506 in -[CCSprite draw] 532
OpenGL error 0x0502 in -[CCGLView swapBuffers] 280
MyApp[1266:707] failed to call context
MyApp[1266:707] cocos2d: surface size: 640x960
MyApp[1266:707] Failed to make complete framebuffer object 0x8CDD
OpenGL error 0x0506 in -[CCSprite draw] 532
OpenGL error 0x0502 in -[CCGLView swapBuffers] 280
OpenGL error 0x0506 in -[CCSprite draw] 532
OpenGL error 0x0502 in -[CCGLView swapBuffers] 280
OpenGL error 0x0506 in -[CCSprite draw] 532
OpenGL error 0x0502 in -[CCGLView swapBuffers] 280
OpenGL error 0x0506 in -[CCSprite draw] 532
OpenGL error 0x0502 in -[CCGLView swapBuffers] 280
OpenGL error 0x0506 in -[CCSprite draw] 532
OpenGL error 0x0502 in -[CCGLView swapBuffers] 280 
```

正如我所说，这是从空白模板创建的。

我该如何解决？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-26T06:16:33.903

OpenGL 错误 0x506 = GL_INVALID_FRAMEBUFFER_OPERATION

Cocos2D 2.0 和 Cocos2D 1.0 的主要区别在于 OpenGLES 版本。Cocos2D 2.0 使用 OpenGLES 2.0，而 Cocos2D 1.0 使用 OpenGLES 1.0。

我猜你可能使用了在 OpenGLES 1.0 中发现的 OpenGLES2.0 中没有的 API

示例：GLBegin()、GLLineWidth() 等

使用此绘图功能：

```
-(void) draw
{
    [super draw];
    ccGLEnableVertexAttribs( kCCVertexAttribFlag_Position );
    kmGLPushMatrix();
    self.world->DrawDebugData();    
    kmGLPopMatrix();
} 
```

而不是这个：

```
-(void) draw
{
    glDisable(GL_TEXTURE_2D);
    glDisableClientState(GL_COLOR_ARRAY);
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);

    world->DrawDebugData();

    // restore default GL states
    glEnable(GL_TEXTURE_2D);
    glEnableClientState(GL_COLOR_ARRAY);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);

} 
```

也使用来自 Cocos2D 2.0 的 GLES-Render.h 和 GLES-Render.m

# asp.net-mvc-3 - 在 MVC 3 Razor 和 EntityFramework 中对类似 SO 的博客帖子进行分页

> ID：11662772
> 
> 赞同：0
> 
> 时间：2012-07-26T05:16:21.513
> 
> 标签：asp.net-mvc-3, entity-framework

我正在使用 MVC 3、Razor 和实体框架。我正在使用 MVC 3 制作博客，所以博客上有很多帖子。在我现在显示的主页上说 10 个帖子。

我正在使用以下代码来显示帖子。

```
 <h1 class="postTitle">@Html.ActionLink(post.PostTitle, "SinglePost", "Post", new { postID = post.PostID}, null)</h1>

 <div class="postDateTime"><b>Posted on :</b> @post.PostDateTime</div>
 <br/>
 @if(post.PostContent.Length > 500)
 {
     <span>@post.PostContent.Substring(0, 500) [Read More...]</span>
 }
 else
 {
     <span>@post.PostContent</span>
 }

 <hr class="postSeparator"/>
 </div> 
```

我有点困惑如何为此实现分页，或者更好地在 SO 实现类似的东西。请指导我这个家伙。

![在此处输入图像描述](../Images/125ea614378adcfc1349b4839535542c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T05:49:03.900

关键点是在查询模型时使用 Skip() 和 Take() LINQ 方法：

例如

```
int page;
int pageSize;
var postsToDisplay =db.Posts.Where(x => x.Tag == "EF")
                            .Skip((page -1) * pageSize)
                            .Take(pageSize); 
```

您应该将它放在 ViewModel 中，然后使用对您的 ViewModel 进行强类型化的 View。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:48:01.763

您可以尝试类似[PagedList](https://github.com/TroyGoode/PagedList)

查看自述文件，它有一个很好的例子来说明你正在尝试做什么。它也可以在[Nuget上使用](http://nuget.org/packages/PagedList)

一旦您开始分页工作，您就可以设置分页器的样式，使其看起来像 SO。

# objective-c - XCode 4.4 .strings 文件添加新的本地化选项不见了

> ID：11662775
> 
> 赞同：22
> 
> 时间：2012-07-26T05:16:37.237
> 
> 标签：objective-c, ios, xcode, localization

今天升级到 Xcode 4.4，当单击我的字符串文件并查看实用程序窗口时，我不再看到允许我添加新语言的加号按钮。

这去哪儿了？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-26T05:49:59.510

从 Xcode 4.4 开始删除了 +/-。添加本地化的方法是转到您的项目设置窗格（您将更改项目的构建设置的同一位置），然后单击*项目*标题下的项目名称。然后，您可以在 Localizations 部分添加本地化。

![本地化截图](../Images/1715376b5de53c8bf4938dd62564af5a.png)

# php - 声明对象的值并输出值

> ID：11662778
> 
> 赞同：0
> 
> 时间：2012-07-26T05:16:49.033
> 
> 标签：php, oop, object, properties, methods

我需要一些关于如何执行此操作的指南或参考。我应该做的是，有一个名为 Cat 的类结构，并有一个输出新对象的静态方法。

```
class Cat{
    public $name;
    public $age;
    public $string;

    static public function ToData($Cat) {
        $input = "";
        foreach ($Cat as $key => $value) {
            $input .= "object: " . $key . "</br>";
        }
        return $input;
    }
}

$name = "meow";
$age = "12";
$string = "'test', 'sample', 'help'";
$Cat = array($name, $age);
$output = Cat::ToData($Cat);
echo $output; 
```

这是我能想到的最好的事情就是问题，他们说我只使用了一个数组而不是一个对象。我使用数组是因为我必须将值放在 $Cat 上，以便可以将其传递给参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:38:08.803

看起来这是一个关于 PHP 中面向对象编程概念的作业。我相信这就是您要完成的工作，并附有解释步骤的评论。

```
class Cat{
    public $name;
    public $age;

    // Output the attributes of Cat in a string
    public function ToData() {
        $input = "";
        $input .= "object: name :".": ".$this->name." </br>";
        $input .= "object: age :".": ".$this->age." </br>";
        return $input;
    }
}

$name = "meow";
$age = "12";

// Instantiate Cat
$Cat = new Cat();
$Cat->name = $name;
$Cat->age = $age;

// Output Cat's attributes
$output = $Cat->ToData();
echo $output; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T05:33:17.990

如果您想将这些值设置为对象，这就是您要做的

```
...
foreach ($Cat as $key => $value) {
    $this->$key = $value;
}
...

$name = "meow";
$age = "12";
$Cat = array("name"=>$name,"age"=> $age);

$cat = new Cat();
$cat->toData($Cat);

echo $cat->name;
// meow 
```

**更新**：

现在我对您要做什么有了更好的了解，这就是您的班级的样子：

```
class Cat{
    public $name;
    public $age;
    public $string;

    static public function ToData($Cat) {
        $obj = new self();
        $obj->name = $Cat["name"];
        $obj->age  = $Cate["age"];
        $obj->string  = $Cate["string"];
        return $obj;
    }

    // echo 
    public function __toString(){
       return "$this->name - $this->age - $this->string";
    }
} 
```

现在你可以设置你的价值观

$name = "喵喵"; $年龄=“12”；$string = "'测试', '样本', '帮助'"; $Cat = 数组($name, $age,$string); $output = Cat::ToData($Cat); 回声$输出；

注意这`$output`是一个对象

# linux - 什么时候 clone() 和 fork 比 pthreads 更好？

> ID：11662781
> 
> 赞同：18
> 
> 时间：2012-07-26T05:17:26.550
> 
> 标签：linux, pthreads, clone, fork

我是这方面的初学者。

我研究过`fork()`,`vfork()`和`clone()`pthreads 。

我注意到这`pthread_create()`将创建一个线程，这比使用`fork()`. 此外，线程将与父进程共享文件描述符、内存等。

但是什么时候`fork()`比`clone()`pthreads 更好？你能通过给出现实世界的例子向我解释一下吗？

提前致谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-26T05:28:57.943

[clone(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/clone.2.html)是 Linux 特定的[系统调用](http://en.wikipedia.org/wiki/System_call)，主要用于*实现*线程（特别是用于`pthread_create`）。使用各种参数，`clone`也可以具有类似[fork(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/fork.2.html)的行为。很少有人直接使用`clone`，使用pthread库更便携。`clone(2)`只有在实现自己的线程库（Posix 线程的竞争对手）时，您才可能需要直接调用syscall，这*非常*棘手（特别是因为锁定可能需要在机器调整的汇编编码例程中使用[futex(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/futex.2.html) syscall ，见[futex(7)](http://man7.org/linux/man-pages/man7/futex.7.html) )。您不想直接使用`clone`或`futex`因为 pthread 使用起来要简单得多。

^(`libpthread.so`（其他 pthread 函数需要在 a `clone`during a之后在内部完成一些簿记`pthread_create`）)

正如[Jonathon](https://stackoverflow.com/a/11662833/841108)回答的那样，进程有自己的地址空间和文件描述符集。[并且一个进程可以使用execve](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html)系统调用执行一个新的可执行程序，它基本上初始化地址空间、堆栈和寄存器以启动一个新程序（但文件描述符可以保留，除非使用*close-on-exec*标志，例如`O_CLOEXEC`通过[打开](http://www.kernel.org/doc/man-pages/online/pages/man2/open.2.html)）。

在类Unix系统上，所有进程*（*除了`init`pid 1的第一个进程，通常是`fork``vfork``clone``fork`

^(（从技术上讲，在 Linux 上，您可以忽略一些奇怪的异常，特别是内核进程或线程以及一些罕见的内核启动的进程启动，例如`/sbin/hotplug`....）)

`fork`和`execve`系统调用是 Unix 进程创建的核心（带有waitpid[和](http://www.kernel.org/doc/man-pages/online/pages/man2/waitpid.2.html)相关的系统调用）。

多线程进程有多个线程（通常由 创建`pthread_create`），它们都共享相同的地址空间和文件描述符。当您想在同一地址空间内并行处理相同数据时，您可以使用线程，但是您应该关心同步和锁定。阅读[pthread 教程](https://computing.llnl.gov/tutorials/pthreads/)了解更多信息。

我建议您阅读一本好的 Unix 编程书籍，例如[Advanced Unix Programming](http://basepath.com/aup/)和/或（免费提供）[Advanced Linux Programming](http://advancedlinuxprogramming.com/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-26T05:42:33.543

（和公司）的优势和劣势`fork`在于他们创建了一个新流程，该流程是现有流程的克隆。

这是一个弱点，因为正如您所指出的，创建一个新流程会产生相当多的开销。这也意味着进程之间的通信必须通过一些“批准的”通道（管道、套接字、文件、共享内存区域等）来完成。

这是一种优势，因为它在父母和孩子之间提供了（更多）更大的隔离。例如，如果一个子进程崩溃，您可以将其杀死并相当容易地启动另一个。相比之下，如果一个子线程死了，杀死它充其量是有问题的——不可能确定该线程独占的资源，所以你不能在它之后进行清理。同样，由于进程中的所有线程共享一个公共地址空间，遇到问题的一个线程可能会覆盖所有其他线程正在使用的数据，因此仅仅杀死一个线程不一定足以清理混乱.

换句话说，使用线程有点像赌博。只要您的代码都是干净的，您就可以通过在单个进程中使用多个线程来获得一些效率。使用多个进程会增加一些开销，但可以使您的代码更加健壮，因为它限制了单个问题可能造成的损害，并且可以在进程遇到重大问题时轻松关闭和替换进程问题。

就具体示例而言，Apache 可能是一个相当不错的例子。它将为每个进程使用多个线程，但为了限制出现问题时的损害（除其他外），它限制了每个进程的线程数，并且可以/将产生多个同时运行的单独进程。例如，在一台体面的服务器上，您可能有 8 个进程，每个进程有 8 个线程。大量线程有助于它在一个主要受 I/O 绑定的任务中为大量客户端提供服务，并且将其分解为多个进程意味着如果确实出现问题，它不会突然变得完全无响应，并且可以关闭并重新启动一个过程而不会损失很多。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-26T05:22:15.353

这些是完全不同的事情。`fork()`创建一个新[进程](http://theunixgeek.wordpress.com/2009/04/19/understanding-linux-processes/)。`pthread_create()`创建一个新线程，该线程在同一进程的上下文中运行。

线程共享相同的虚拟地址空间、内存（无论好坏）、一组打开的文件描述符等等。

流程（本质上）彼此完全分离，并且不能互相修改。

你应该阅读这个问题：

*   [进程和线程有什么区别？](https://stackoverflow.com/questions/200469/what-is-the-difference-between-a-process-and-a-thread)

* * *

举个例子，如果我是你的 shell（例如`bash`），当你输入一个类似的命令时`ls`，我将进入`fork()`一个新进程，然后`exec()`是`ls`可执行文件。（然后我`wait()`在子进程上，但这超出了范围。）这发生在完全不同的地址空间中，如果`ls`爆炸，我不在乎，因为我仍在自己的进程中执行。

另一方面，假设我是一个数学程序，我被要求将两个 100x100 矩阵相乘。我们知道矩阵乘法是一个[令人尴尬的并行](http://en.wikipedia.org/wiki/Embarrassingly_parallel)问题。所以，我有记忆中的矩阵。我产生了 N 个线程，每个线程都对相同的源矩阵进行操作，将它们的结果放在结果矩阵中的适当位置。请记住，它们是在同一个过程的上下文中运行的，所以我需要确保它们不会在彼此的数据上打上烙印。如果 N 为 8 并且我有一个八核 CPU，我可以有效地同时计算矩阵的每个部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-09T04:17:48.453

使用 fork() （和家族）在 unix 上的进程创建机制非常有效。此外，大多数 unix 系统不支持内核级线程，即线程不是内核识别的实体。因此，此类系统上的线程无法从内核级别的 CPU 调度中受益。pthread 库所做的不是 kerenl 而是某些进程本身。同样在这样的系统上，pthreads 是使用 vfork() 实现的，并且仅作为轻量级进程。因此，除了在此类系统上的可移植性外，使用线程没有任何意义。

据我了解，Sun-solaris 和 windows 具有内核级线程，而 linux 系列不支持内核线程。

使用进程管道和 unix 域套接字是非常有效的 IPC，没有同步问题。我希望它清楚为什么以及何时应该实际使用线程。

# jquery - 修改 jquery 验证插件以在输入字段中显示消息

> ID：11662787
> 
> 赞同：0
> 
> 时间：2012-07-26T05:18:20.270
> 
> 标签：jquery, jquery-plugins, jquery-validate

请问有谁知道我如何在jquery验证插件的Remember the Milk示例（http://jquery.bassistance.de/validate/demo/milk/#）中获取错误/成功消息以显示在输入字段中.

我的表格在非常小的盒子里。我做了一些研究并弄乱了网站上使用的脚本。我看到消息被附加到表单标签的位置，但我不知道获取错误/成功消息以显示在输入字段中所需的 jquery 方法。另请记住，Milk used table for their form，这是我没有做的。我的表单与 jquery 验证页面上的演示几乎相同。

jquery 验证插件：[http ://docs.jquery.com/Plugins/Validation#demo](http://docs.jquery.com/Plugins/Validation#demo)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:50:24.900

您可以在该输入元素之外放置一个 div 或 span 。最初 div 将被隐藏，根据验证您可以显示或隐藏 div 将显示错误消息。

我只是尝试一个样本..

**html**

```
<input type="text" name="email" id="email"/>
<div id="errorDiv" style="display:none">Error Message</div>
<div id="okDiv" style="dispaly:none">Ok</div> 
```

**脚本**

```
$(document).ready(function(){
  $("#myForm").validate({
    rules: {
               email:{
                  required: function (element) {
                      if($(element).text()=="")
                      {
                          $('#errorDiv').show();
                          $('#okDiv').hide();
                      }
                      else
                      { 
                          $('#errorDiv').hide();
                          $('#okDiv').show();
                      } 
                  }
           }
  });
}); 
```

试试这样

# c# - Window 服务中的 C# 线程创建问题

> ID：11662796
> 
> 赞同：0
> 
> 时间：2012-07-26T05:19:07.953
> 
> 标签：c#, multithreading, windows-services

我对电子邮件发送窗口服务有疑问。该服务在每三分钟延迟后启动，并获取要从数据库发送的消息，然后开始发送。代码如下所示：

```
 MessageFilesHandler MFHObj = new MessageFilesHandler();
        List<Broadcostmsg> imidiateMsgs = Manager.GetImidiateBroadCastMsgs(conString);
        if (imidiateMsgs.Count > 0)
        {

           // WriteToFileImi(strLog);

            Thread imMsgThread = new Thread(new             ParameterizedThreadStart(MFHObj.SendImidiatBroadcast));              
            imMsgThread.IsBackground = true;
            imMsgThread.Start(imidiateMsgs);
        } 
```

这会将消息发送到大型列表，并且需要很长时间才能完成发送到更大的列表。现在问题发生在消息仍在发送并且服务获取要发送的新消息时，先前的发送被拖拽并且新消息发送开始，虽然我正在使用线程，但每次服务获取消息发送它都会启动一个新线程。你能帮我在代码中出错的地方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:39:17.603

看起来要求是建立一个消费者生产者队列。其中生产者将继续将消息添加到列表中，而消费者将从该列表中选择项目并对其进行一些工作 *唯一让我担心的是，您每次都创建一个新的线程来发送电子邮件，而不是从线程池中选择线程*。如果您继续创建越来越多的线程，您的应用程序的性能将由于上下文切换产生的开销而降低。

如果您使用的是 .Net framwe work 4.0，那么灵魂将变得非常容易。您可以使用[System.Collections.Concurrent.ConcurrentQueue](http://www.codethinked.com/net-40-and-system_collections_concurrent_concurrentqueue)对您的项目进行排队和出队。它的线程安全，因此不需要锁定对象。使用[任务](http://www.codethinked.com/blockingcollection-and-iproducerconsumercollection)来处理您的消息。

BlockingCollection 在其构造函数中采用 IProducerConsumerCollection，或者如果您调用其空构造函数，它将默认使用 ConcurrentQueue。

因此，将您的消息排入队列。

```
//define a blocking collectiom
var blockingCollection = new BlockingCollection<string>();

//Producer
Task.Factory.StartNew(() =>
{
    while (true)
    {
        blockingCollection.Add("value" + count);
        count++;                    
    }
});

//consumer
//GetConsumingEnumerable would wait until it find some item for work
// its similar to while(true) loop that we put inside consumer queue
Task.Factory.StartNew(() =>
{
    foreach (string value in blockingCollection.GetConsumingEnumerable())
    {
        Console.WriteLine("Worker 1: " + value);
    }                
}); 
```

**更新**

由于您使用的是 FrameWork 3.5。我建议你看看 Joseph Albahari 的[Consumer/Producer Queue](http://www.albahari.com/threading/part4.aspx#_Wait_and_Pulse)实现。它是你会发现的最好的之一。

直接从上面的链接获取代码

```
public class PCQueue
{
  readonly object _locker = new object();
  Thread[] _workers;
  Queue<Action> _itemQ = new Queue<Action>();

  public PCQueue (int workerCount)
  {
    _workers = new Thread [workerCount];

    // Create and start a separate thread for each worker
    for (int i = 0; i < workerCount; i++)
      (_workers [i] = new Thread (Consume)).Start();
  }

  public void Shutdown (bool waitForWorkers)
  {
    // Enqueue one null item per worker to make each exit.
    foreach (Thread worker in _workers)
      EnqueueItem (null);

    // Wait for workers to finish
    if (waitForWorkers)
      foreach (Thread worker in _workers)
        worker.Join();
  }

  public void EnqueueItem (Action item)
  {
    lock (_locker)
    {
      _itemQ.Enqueue (item);           // We must pulse because we're
      Monitor.Pulse (_locker);         // changing a blocking condition.
    }
  }

  void Consume()
  {
    while (true)                        // Keep consuming until
    {                                   // told otherwise.
      Action item;
      lock (_locker)
      {
        while (_itemQ.Count == 0) Monitor.Wait (_locker);
        item = _itemQ.Dequeue();
      }
      if (item == null) return;         // This signals our exit.
      item();                           // Execute item.
    }
  }
} 
```

这种方法的优点是您可以控制为优化性能而需要创建的线程数。使用线程池方法，虽然它是安全的，但您无法控制可以同时创建的线程数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:43:41.670

**我认为您在等待新消息**的循环中使用您的代码，您是否管理了这些等待？让我们来看看：

```
while(imidiateMsgs.Count == 0)
{
    //Wait for new Message
}

//Now you have a new message Here

//Make a new thread to process message 
```

该等待有不同的方法，我建议使用 BlockingQueues：

公共区域：

```
BlockingCollection<Broadcostmsg> imidiateMsgs = new BlockingCollection<Broadcostmsg>(); 
```

在您的消费者（生成消息的线程）中：

```
SendImidiatBroadcast = imidiateMsgs.Take();//this will wait for new message
//Now you have a new message Here

//Make a new thread to process message 
```

在生产者（回答消息的线程）中：

```
imidiateMsgs.Add(SendImidiatBroadcast); 
```

而且每次回复消息都必须使用线程池创建新线程，不要每次都初始化新线程。

# jquery - Jquery 插件 gif 播放器

> ID：11662800
> 
> 赞同：0
> 
> 时间：2012-07-26T05:19:42.540
> 
> 标签：jquery, fullscreen, gif

使用[https://github.com/private-face/gif-player](https://github.com/private-face/gif-player)插件。试图让播放器在启动时通过自动播放全屏显示，但全屏选项没有运气，阅读了文档但没有运气。

我知道我选错了，并且尝试了许多不同的组合 - 最后一个在下面；

```
<script>
$(function() {
$('.gif-player').gifPlayer(){
fullscreen,true}
});
</script> 
```

我正在使用 zip 中提供的测试示例，但无法在页面加载时全屏显示，感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:37:29.067

你调用错误的代码，

调用代码的正确方法；

```
 $(function() {
        $('.gif-player').gifPlayer({
            fullscreen:true                
        });
    }); 
```

自动播放；

```
$(function() {
        $('.gif-player').gifPlayer({
            fullscreen:true,
            play:true                
        });
    }); 
```

# selenium - 如何使用 Firefox 驱动程序读取警报消息？

> ID：11662803
> 
> 赞同：3
> 
> 时间：2012-07-26T05:19:49.923
> 
> 标签：selenium, selenium-webdriver, selenium-firefoxdriver

我需要使用 java 阅读弹出窗口中显示的警报和确认消息并将其打印在控制台上。在将 IDE 中的 selenium 记录导出为*Junit4* (WebDriver) java 文件时，我的代码是：

```
private WebDriver driver;
private String baseUrl;
private StringBuffer verificationErrors = new StringBuffer();

@Before
public void setUp() throws Exception {
driver = new FirefoxDriver();
} 
```

现在当我尝试使用`getAlert`或`getConfirmation`功能如图所示：

```
@Test
public void testSample() throws Exception {
Alert alert = driver.switchTo().alert();
message = alert.getText();
System.out.println("message is "+message);
} 
```

我收到以下错误：

```
java.lang.NullPointerException
at com.example.tests.Sample.testSample(Sample.java:40)
at com.example.tests.Sample.main(Sample.java:149)
Exception: null 
```

我该如何处理？还有其他阅读弹出消息的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T14:09:05.837

在 testSample() 方法中，当您使用 - 导航到任何页面时

```
driver.get("URL"); 
```

之后，您能否解释一下警报消息是如何出现在第一位的。

您确定出现的弹出消息是一个`javascript alert`或任何正在打开的窗口。

如果它是一条警报消息，那么您可以使用 -

```
driver.switchTo().alert(); 
```

但是，如果弹出窗口是另一个窗口，那么您将不得不使用 -

```
driver.switchTo().window("windowName"); 
```

[您可以从这里](http://code.google.com/p/selenium/wiki/NextSteps#Moving_Between_Windows_and_Frames)获得更多信息。

# php - 循环问题 PHP

> ID：11662804
> 
> 赞同：1
> 
> 时间：2012-07-26T05:19:54.290
> 
> 标签：php

这是代码：

```
$TopFive = array_slice($counts,0,5);    
{
  foreach($TopFive as $key => $tops)
{

for($i=0; $i<$tops; $i++)
{
  echo "*";
}

$b=0;   
for($a=0; $a<5; $a++)
{
  $b++; 
}

echo "{$b}";        
echo "#:{$key} - {$tops} <br/>";    

                }
            } 
```

目前，输出看起来是这样的：

```
*********5#:THE - 9 
*****5#:OF - 5 
*****5#:TO - 5 
***5#:AND - 3 
***5#:THEM - 3 
```

但我真正想要的是：

```
********* #1: THE - 9
***** #2: OF - 5
***** #3: TO - 5
*** #4: AND - 3
*** #5: THEM - 3 
```

我似乎无法弄清楚如何安排循环。有任何想法吗？我很抱歉这个简单的问题，我的想法用完了。我只希望数字从 1 到 5。

我只是想要一些关于如何安排 $b 循环的建议，以便计数从 1 到 5，而不仅仅是 5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T05:28:15.410

如果：

```
$TopFive = array('THE' => 9, 'OF' => 5, 'TO' => 5, 'AND' => 3, 'THEM' => 3); 
```

然后：

```
$number = 1;

foreach ($TopFive as $word => $count)
{
    echo str_repeat('*', $count); // Outputs '*' characters
    echo " #{$number}: {$word} - {$count}\n";
    $number++; // increment your number
} 
```

[这是一个例子](http://codepad.org/RdLI3618)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:24:23.920

你的这条线有问题 `for($a=0; $a<5; $a++)`

`$b`总是递增到`5`

`$x`要解决这个问题，只需`foreach`用`1`. 取消`$b`并简单地`echo $x; $x++;`在适当的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T05:29:07.757

您可以将代码更改为：

```
$b=1;
foreach($TopFive as $key => $tops)
{                                   
    for($i=0; $i<$tops; $i++)
    {
        echo "*";
    }          
    echo "#$b:{$key} - {$tops} <br/>";    
    $b++;
 } 
```

但是所有的内部循环都是多余的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T05:31:13.500

在您的代码中，请更改此部分：

```
echo "{$b}";        
echo "#:{$key} - {$tops} <br/>"; 
```

至：

```
// echo "{$b}";        
echo "#$i:{$key} - {$tops} <br/>"; 
```

并使用`str_repeat('*', $count)`而不是`for`循环！:)

# ipad - 使用 iPad 客户端重用 salesforce Apex 方法（使用 pocketsoap 框架）

> ID：11662805
> 
> 赞同：0
> 
> 时间：2012-07-26T05:19:56.127
> 
> 标签：ipad, salesforce, apex-code

一些 iPad 客户端通过[pocketsoap](http://www.pocketsoap.com)框架访问我​​的“salesforce”应用程序。谁能告诉我该客户端是否可以使用“pocketsoap”调用（重用）我的 Apex 服务方法。我已经将这些方法公开为 WebServices，如下所示。谢谢。

```
// Job service 
global class ServiceJob {
       WebService static String jobConfirm(String jobId) {}   
}

// Sample registration service 
global with sharing class ServiceSampleRegistration {
       WebService static Sample_Registration__c registerWS(Job_c job, ID userId) {}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T02:22:35.310

这应该很好 — 如果您进入 Salesforce 组织内的 Apex 类列表，您应该会在编辑链接旁边看到指向您的类的 WSDL 的链接。您可以将其用作对自定义 Web 服务方法的 SOAP 调用的基础。

# javascript - Phonegap 相机应用程序崩溃

> ID：11662808
> 
> 赞同：2
> 
> 时间：2012-07-26T05:20:08.400
> 
> 标签：javascript, android, cordova

我正在使用 PhoneGap (Cordova 1.6.1) 为 Android 开发一个应用程序。当我调用相机 API 时，我的应用程序崩溃并且我收到诸如“showStatusIcon on inactive InputConnection”之类的日志消息。我使用以下方法来调用相机：

```
function capturePhoto() {
      // Take picture using device camera and retrieve image as base64-encoded string
      navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50,
        destinationType: destinationType.DATA_URL });
    }

 function onPhotoDataSuccess(imageData) {        
      var smallImage = document.getElementById('smallImage'); 
      smallImage.style.display = 'block';      
     smallImage.src = "data:image/jpeg;base64," + imageData;    
    }

function onFail(message) {
  alert('Failed because: ' + message);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:41:42.503

我已经像这样使用它，它对我来说很好用。请检查 -

```
document.addEventListener("deviceready",onDeviceReady,false);

function onDeviceReady() {

console.log("CORDOVA IS WORKING:::");
}

        function capturePhoto()
{
navigator.camera.getPicture(onSuccess, onFail, { quality: 50, 
destinationType: Camera.DestinationType.FILE_URI }); 
}

function onSuccess(imageURI) {
var image = document.getElementById('myImage');
image.src = imageURI;
}

function onFail(message) {
alert('Failed because: ' + message);
}    
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T10:22:43.950

在我的活动类的 onCreate 方法中，我设置了一个 Javascript 接口：

```
appView.addJavascriptInterface(this, "GC"); 
```

我创建了一种清理垃圾收集器的方法：

```
public void cleanGC() {
        System.gc();
    } 
```

在我的 .js 文件中，我调用了之前的方法来调用相机或图片库：

```
GC.cleanGC(); 
```

# php - FPDF 类 - 太大的列在单行中无法管理

> ID：11662814
> 
> 赞同：0
> 
> 时间：2012-07-26T05:20:37.330
> 
> 标签：php, pdf-generation, fpdf

我使用内置的 FPDF 来生成 PDF。

我遇到了显示大约的问题。单行 40 列。这些列既不会显示在下一行，也不会被包装，它们在页面末尾被剪切。我通过使用以下方法解决了这个问题：

```
// Array to set page size
$a = array(312,1200);

//Add first page
$pdf->AddPage('L',$a); 
```

根据我的要求，这使得我的表格的分辨率非常小，但是我在打印此页面时遇到了问题。因为我可以提高查看 PDF 的分辨率，但不能在打印时提高分辨率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T06:52:47.337

如果您之前声明了单位，则可以创建用户定义的页面大小：

```
$pdf = new FPDF('L', 'in', array(100, 50));// page 100"x50"
$pdf->addPage(); 
```

或者

```
$pdf = new FPDF('L', 'in');// inches defined
$pdf->addPage('L', array(100, 50));// page 100"x50" 
```

用户手册：

[http://www.fpdf.org/en/doc/fpdf.htm](http://www.fpdf.org/en/doc/fpdf.htm)

[http://www.fpdf.org/en/doc/addpage.htm](http://www.fpdf.org/en/doc/addpage.htm)

# php - 上传发送按钮ID

> ID：11662820
> 
> 赞同：0
> 
> 时间：2012-07-26T05:20:52.103
> 
> 标签：php, uploadify

我想要多个上传按钮，并且能够知道点击了哪些文件输入。有没有办法获取被点击的按钮的 id 或其他方式来识别文件？例如，我想知道如果我有输入，则单击了 ID 为“job_1237_1”的第一个输入：

```
 <input class="file_selector" type="file" name="file_upload" id="job_1237_1" /><br />
    <input class="file_selector" type="file" name="file_upload" id="job_1237_2" /> 
```

与 JS：

```
$('.file_selector').uploadify({
// options...
}); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-23T16:43:51.920

我将“自动”选项设置为 false。当我单击提交表单按钮时，我会遍历文件输入 HTML：

```
<input class="file_selector" type="file" name="file_upload" id="job_1237_1" /><br />
<input class="file_selector" type="file" name="file_upload" id="job_1237_2" /> 
```

jQuery：

```
$(".file_selector").each(function () {
    var inputId = $(this).attr("id");
    $(this).uploadify('settings', 'formData', {input_id: inputId});
    $(this).uploadify('upload');
}); 
```

这会将带有文件的 id 发送到发布页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-16T10:27:49.513

```
'onUploadStart' : function(){
$('#file_selector').uploadifySettings(
    'postData', 
    {
        "name": $("#job_1237_1").val(),
        "userId": $("#job_1237_2").val()
    }
);
}, 
```

# jquery - 拉斐尔设置事件

> ID：11662821
> 
> 赞同：1
> 
> 时间：2012-07-26T05:20:52.577
> 
> 标签：jquery, raphael

我有一份包含多组的 Raphael 论文。每组都有一个矩形，矩形上方的路径和两个文本，其中一个是不可见的，另一个在矩形内。当鼠标悬停在整个矩形（包括文本）上时，我想更改光标。如果我对 text 和 rect 使用不同的事件处理程序并将两者中的光标更改为相同的值，它会显示文本鼠标移出的闪烁。这种闪烁使鼠标悬停不那么流畅。

当鼠标悬停在整个集合上时，我想将光标变为手形。光标中的一次更改并且在再次越过矩形边界之前不会闪烁。

如果您有任何解决方案，请帮助我 Kavita

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:36:55.377

假设您希望悬停影响整个集合，包括您的矩形、矩形上方的路径和两个文本......

```
var container = $(id to your Raphael container);
var yourSet = paper.set();  //assuming you have pushed all four elements into your set....
yourSet.mouseover(function(){
        container.css('cursor','pointer');
}
yourSet.mouseout(function(){
        container.css('cursor','default');
} 
```

希望对你有所帮助......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T12:30:24.107

为了避免将鼠标从文本移动到周围的框时出现闪烁，我建议使用处理 mouseover 事件的覆盖元素。

当您已经拥有包含所有元素的集合时，您可以使用来自集合中的 getBBox 的信息轻松创建一个新的覆盖元素。

这是一个小片段，这是如何工作的。

```
<script type="text/javascript">
        function drawPreview(){
            var preview = Raphael("preview", 200, 100);
            var box1 = preview.rect(20,20,160,40);
            box1.attr({'fill':'#ccc','stroke-opacity' : 0, 'opacity':0.5});
            var box2 = preview.rect(50,10,30,80);
            box2.attr({'fill':'#999','stroke-opacity' : 0, 'opacity':0.5});
            var line = preview.text(100, 30, "My Text");

            var mySet = preview.set();
            mySet.push(box1,box2,line);

            var bb = mySet.getBBox();
            var overlay = preview.rect(bb.x,bb.y,bb.width,bb.height);
            overlay.attr({'fill':'#fff','stroke-opacity' : 0, 'opacity':0});
            overlay.mouseover(function(){
                this.attr({'cursor':'pointer'});
            });
            overlay.mouseout(function(){
                this.attr({'cursor':'default'});
            });
        }
</script> 
```

![在此处输入图像描述](../Images/5174e017efc488594353e620d005e7d4.png)

# css - CSS 在 ie 中是错误的，而在 Chrome 中是正确的

> ID：11662822
> 
> 赞同：3
> 
> 时间：2012-07-26T05:20:53.053
> 
> 标签：css

我有一个 div 的规则：

```
#dividerTabs {
    height: 5px;
    background-color: #FFB4A1;
    border-top-left-radius: 15px;
    border-top-right-radius: 15px;
    -moz-border-radius: 15px;
    -moz-border-top-left-radius: 15px;
    -moz-border-top-right-radius: 15px;
    width: 100%;
    position: absolute;
    z-index: 9999;
    bottom: -40px;
} 
```

html:

```
 <div id="dividerTabs"></div> 
```

在查看 chrome 调试器时，适用于 div 的其他规则是：

```
* {
    margin: 0px;
    padding: 0px;
} 
```

问题是 div 向下 2px，向右约 60px，从它应该在 chrome 中的位置。

为什么会这样，我该如何纠正？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T05:29:46.170

浏览器以不同的方式呈现 CSS，或者可能具有不同的 CSS 属性默认值。尝试在您的网页中使用 CSS 重置。

试试这个： http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

或者这个： [http ://www.cssreset.com/](http://www.cssreset.com/)

确保在使用任何 CSS 之前先使用 CSS Reset。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T05:32:54.743

`border-radius`和可能有问题`height`。你`height`是`5px`，你`border-radius`是`15px`。这将导致边框反转，这可能会导致偏移。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T05:36:39.850

使用[Normalize CSS](http://necolas.github.com/normalize.css/)将有助于在所有主流浏览器中正确呈现 HTML 页面

或者

[HTML5 Boilerplate](http://html5boilerplate.com/)默认模板。这是坚实的！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T05:41:12.953

它可能与 parent `div`s 有关。检查CSS。这`border-radius`也可能导致您出现问题，我之前在 IE 中也发生过类似的事情。

# .net - dt.rows.add() 方法是否总是将行添加到数据表的底部？

> ID：11662825
> 
> 赞同：1
> 
> 时间：2012-07-26T05:21:28.393
> 
> 标签：.net, datatable

datatable.rows.add() 方法是否总是将数据行添加到数据表的末尾？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:28:00.073

据我所知， `datatable.rows.add()`将新行添加到数据表的末尾。

如果要在第一行插入行，则必须这样做：

```
dTable.Rows.InsertAt(dRow, 0); 
```

# java - 在 JUnit4 中向 TestSuite 添加测试

> ID：11662827
> 
> 赞同：1
> 
> 时间：2012-07-26T05:21:34.947
> 
> 标签：java, junit

有没有办法以编程方式将测试添加到 JUnit4 中的测试套件？

在 Junit3 中你可以这样做

```
TestSuite ts = new TestSuite();
ts.addTestSuite(a.class);
ts.addTestSuite(b.class); 
```

在 JUnit4 中怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:18:54.997

一种方法是使用[Request#classes()](http://kentbeck.github.com/junit/javadoc/latest/org/junit/runner/Request.html#classes%28java.lang.Class...%29)：

```
public static void main(String[] args) throws Exception {
    Request request = Request.classes(new Class<?>[] {Test1.class, Test2.class});

    JUnitCore jUnitCore = new JUnitCore();
    RunListener listener = new RunListener() {

        @Override
        public void testFailure(Failure failure) throws Exception {
            System.out.println("failure=" + failure);
        }

    };
    jUnitCore.addListener(listener);
    jUnitCore.run(request);
} 
```

在 RunListener 中，您可以覆盖的不仅仅是 testFailure。

如果您希望您的测试更多地集成到您的构建中，请扩展套件

```
public static class DynamicSuite extends Suite {
    public DynamicSuite(Class<?> klass, RunnerBuilder builder) throws InitializationError {
        super(builder, klass, new Class<?>[] {Test1.class, Test2.class});
    }
} 
```

您使用的构造函数取决于调用套件的方式。以上在 Eclipse 中有效。

然后只需注释一个空类`@RunWith(DynamicSuite.class)`：

```
@RunWith(DynamicSuite.class)
public class DynamicTestSuite {
} 
```

# android - 我应该在哪里使用 OnActivityResult ？

> ID：11662835
> 
> 赞同：0
> 
> 时间：2012-07-26T05:22:18.830
> 
> 标签：android

当我进行调试时，它没有去 try 块而不是 catch 块，这是我的代码，请帮助我！

```
public void onClick(View v) {
               try {

                 path = Environment.getExternalStorageDirectory()+"/audio_meena.AMR";
                 File newFile = new File(path);
                 Uri uri =Uri.fromFile(newFile);
                 Intent audioIntent=new Intent(MediaStore.Audio.Media.RECORD_SOUND_ACTION);
                 startActivityForResult(audioIntent, RQS_RECORDING);
                 mr.setAudioSource(MediaRecorder.AudioSource.MIC);
                 mr.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
                 mr.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
                 FileDescriptor PATH_NAME = null;
                 mr.setOutputFile(PATH_NAME);

                } catch (Exception e) {
                // TODO: handle exception
            }
}
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:58:00.017

将“onClick”属性设置为您想要的视图（通过布局），或者在“setContentView”之后使用“findViewById”找到它，然后对视图使用“setOnClickListener”。

关于“OnActivityResult”，你需要把它作为一个独立的方法放在活动本身中。

# css - 刚上线的网站，Internet Explorer 出现问题

> ID：11662836
> 
> 赞同：-1
> 
> 时间：2012-07-26T05:22:19.390
> 
> 标签：css, wordpress

我刚刚为客户启动的网站在 Internet Explorer 中无法正确呈现。它适用于除 IE 之外的所有浏览器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T05:35:03.233

在第 1 行`<link rel>`中定义了标签，因此您的浏览器不会检测到 doctype 并进入[**quirks mode**](http://www.quirksmode.org/css/quirksmode.html)。

**见下文：**

```
 <link rel="shortcut icon" href="http://pacayamountaincoffee.com/wp-content/themes/pacayamountaincoffee/favicon.ico" />
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

**您的`<link rel>`标签应该在`<head>`标签内**

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">    
 <head>    
    <link rel="shortcut icon" href="http://pacayamountaincoffee.com/wp-content/themes/pacayamountaincoffee/favicon.ico" />
 </head> 
```

# javascript - hidden()是javascript的保留函数吗

> ID：11662843
> 
> 赞同：0
> 
> 时间：2012-07-26T05:22:37.300
> 
> 标签：javascript, hidden, reserved

在这两个中，只有 gidden() 有效。

```
<span onclick="hidden()">hello</span>
<span onclick="gidden()">world</span>

<script type="text/javascript"><!--
    function hidden() {
         alert("hello");
    }
    function gidden() {
         alert("world");
    }
--></script> 
```

hidden() 是 javascript 的保留函数吗？因为这是我能想到的唯一有意义的事情。如果是这样，它有什么作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:30:59.467

**是**的，它是一个保留字。您最好避免使用**[以下标识符](http://www.javascripter.net/faq/reserved.htm)**作为 JavaScript 变量的名称。这些是依赖于实现的 JavaScript 对象、方法或属性的预定义名称。

**这是所有[JavaScript 保留字的列表](http://www.quackit.com/javascript/javascript_reserved_words.cfm)**

希望这可以帮助。

# java-native-interface - 在 ubuntu 中运行 JNI 程序

> ID：11662844
> 
> 赞同：1
> 
> 时间：2012-07-26T05:22:39.230
> 
> 标签：java-native-interface, runtime-error

我在 ubuntu 中运行我的第一个程序。

但是当我尝试运行它时出现错误：

```
 Exception in thread "main" java.lang.UnsatisfiedLinkError: no foo in  java.library.path
  at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1681)
  at java.lang.Runtime.loadLibrary0(Runtime.java:840)
  at java.lang.System.loadLibrary(System.java:1047)
  at JNIFoo.<clinit>(JNIFoo.java:6)
  Could not find the main class: JNIFoo. Program will exit. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:56:56.850

这些行取自[来自 SUN 站点的 Getting Stated JNI](http://java.sun.com/docs/books/jni/html/start.html)

> 确保本机库位于本机库路径中的目录之一中。如果您在 Solaris 系统上运行，则 LD_LIBRARY_PATH 环境变量用于定义本机库路径。确保它包含包含 libHelloWorld.so 文件的目录的名称。如果 libHelloWorld.so 文件在当前目录中，您可以在标准 shell (sh) 或 KornShell (ksh) 中发出以下两个命令来正确设置 `LD_LIBRARY_PATH`环境变量：
> 
> ```
> LD_LIBRARY_PATH=.
> export LD_LIBRARY_PATH 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T05:26:27.997

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: no foo in  java.library.path 
```

修复您的库路径，然后重试。

# objective-c - Objective-C 异步 NSURLConnection 到 Ruby 服务器

> ID：11662850
> 
> 赞同：2
> 
> 时间：2012-07-26T05:23:08.700
> 
> 标签：objective-c, ruby, asynchronous, nsurlconnection, restkit

我无法将异步 NSURLRequests 发送到 Ruby 服务器。当我使用以下内容时，永远不会建立连接：

```
self.data = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:@"http://domain.com/app/create_account.json"]];
[request setHTTPMethod:@"POST"];
[request addValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request addValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request addValue:@"form-data" forHTTPHeaderField:@"Content-Disposition"];
[request setHTTPBody:[data dataUsingEncoding:NSUTF8StringEncoding]];
[[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

但是，当我交换最后一行时：

```
NSData *returnData = [NSURLConnection sendSynchronousRequest:request   returningResponse:nil error:nil]; 
```

一切都很好。但我确实需要异步建立这个连接......

**编辑工作示例**

```
NSURL *url = [NSURL URLWithString:@"http://domain.com/app/create_account.json"];
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request setPostValue:data forKey:@"data"];
[request setDelegate:self];
[request startAsynchronous]; 
```

在这种情况下，RESTful 服务似乎需要自己的第三方框架。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T08:56:58.600

你可以尝试使用 restkit api

```
- (void)sendAsJSON:(NSDictionary*)dictionary {

RKClient *client = [RKClient clientWithBaseURL:@"http://restkit.org"];        

// create a JSON string from your NSDictionary 
id<RKParser> parser = [[RKParserRegistry sharedRegistry] parserForMIMEType:RKMIMETypeJSON];
NSError *error = nil;
NSString *json = [parser stringFromObject:dictionary error:&error];

// send your data
if (!error)
     [[RKClient sharedClient] post:@"/some/path" params:[RKRequestSerialization serializationWithData:[json dataUsingEncoding:NSUTF8StringEncoding] MIMEType:RKMIMETypeJSON] delegate:self];
 } 
```

参考：

1.  [https://github.com/RestKit/RestKit/wiki/Tutorial-%3A-Introduction-to-RestKit](https://github.com/RestKit/RestKit/wiki/Tutorial-%3A-Introduction-to-RestKit)
2.  [https://github.com/RestKit/RestKit/wiki/Posting-NSDictionary-as-JSON](https://github.com/RestKit/RestKit/wiki/Posting-NSDictionary-as-JSON)

谢谢尼基尔

# javascript - setAttribute() 不工作？

> ID：11662851
> 
> 赞同：0
> 
> 时间：2012-07-26T05:23:09.347
> 
> 标签：javascript, css, shadowbox

[我正在尝试在我的网站](http://www.element17.com/)上向 Shadowbox 添加几个导航“窗格” 。我发现以下代码可以做到这一点，它是有效的，但依赖于相当多的内联 CSS。我正在尝试将其移至 shadowbox.css，但似乎无法使其正常工作。这是代码：

```
var cssNavButtons = {cursor:"pointer", position:"absolute", width:200, height:"100%", top:0, "z-index":400};
var navBtnRight = $("<div/>").css(cssNavButtons).css({right: 0, background:"url('images/nav-right.png') center center no-repeat"}).click(function(){Shadowbox.next();});
var navBtnLeft = $("<div/>").css(cssNavButtons).css({left: 0, background:"url('images/nav-left.png') center center no-repeat"}).click(function(){Shadowbox.previous();});
$("#sb-body-inner").prepend(navBtnRight).prepend(navBtnLeft); 
```

我试图将 vars navBtnRight 和 navBtnLeft 设置为像这样使用外部 CSS 文件，但无济于事：

```
var navBtnRight = $("<div/>").setAttribute("class","sb-bignav").setAttribute("id","sb-bignav-right").click(function(){Shadowbox.next();}); 
```

谁能让我知道为什么这不起作用？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T05:26:22.787

您似乎正在使用 jQuery，在这种情况下，您需要[`.attr()`方法](http://api.jquery.com/attr/)（适用于 jQuery 对象），而不是[`.setAttribute()`方法](https://developer.mozilla.org/en/DOM/element.setAttribute)（适用于 DOM 元素）。

虽然要添加一个我会使用[`.addClass("sb-bignav")`](http://api.jquery.com/addClass/)而不是`.setAttribute("class","sb-bignav")`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T06:06:12.190

尝试使用

```
element.setAttributeNS("null","attribute_name",value) . 
```

# facebook - Facebook 获取数据错误，使用 Graph API

> ID：11662855
> 
> 赞同：0
> 
> 时间：2012-07-26T05:23:22.137
> 
> 标签：facebook, facebook-graph-api, limit

使用 Graph API Explorer 访问[https://graph.facebook.com/me/home](https://graph.facebook.com/me/home)时，有时会得到 4 个页面数据（limit=25），有时会得到 2 个页面数据（limit=25），为什么差别这么大, 两次访问之间的间隔小于 3 秒。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:42:52.207

根据我在返回 API 调用结果时使用 FB API 的经验，FB 有点不一致。您面临的问题可归因于几个原因。原因之一可能是 FB 服务器在特定时间经历的负载类型。请注意，您不是当时唯一向 FB 服务器发出请求的用户，当时有数百个应用程序在做同样的事情。**所以最好的选择是在处理回调时**使用分页，并尝试增加你指定的限制它可能没有太大帮助，但它会改善结果。希望这可以帮助。

# syntax-highlighting - DokuWiki 中的内联代码

> ID：11662856
> 
> 赞同：38
> 
> 时间：2012-07-26T05:23:23.933
> 
> 标签：syntax-highlighting, wiki, markup, inline-code, dokuwiki

我正在寻找一种将代码作为段落的一部分包含在 DokuWiki 中的方法，就像我可以通过在 StackOverflow 中添加反引号转义一样`like _so_`。只需添加`<code>bla</code>`将代码放在它自己的行上。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-07-26T14:17:45.893

您可能想使用`''%%here is code%%''`. 这会将其格式化为等宽 ( `''`) 并防止对可能的 wiki 标记 ( `%%`) 进行任何解释。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-26T05:41:58.660

我能够找到自己问题的答案。在文本代码周围添加引号`''like this''`。简单，简短，效果很好。

# java - JavaFX 2.1 消息框

> ID：11662857
> 
> 赞同：16
> 
> 时间：2012-07-26T05:23:25.583
> 
> 标签：java, javafx, javafx-2

再会！
我正在使用 JavaFX SDK 开发一个程序。我想要一个像 C# 一样的消息框：

```
DialogResult rs = MessageBox.showDialog("Message Here...");
if (rs == ....) {
    // code
} 
```

我想使用 JavaFX SDK 来实现这样的功能。非常感谢答案。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-10-23T17:17:53.257

[https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Alert.html](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Alert.html)

> Alert 类是 Dialog 类的子类，并提供对许多预构建对话框类型的支持，这些类型可以很容易地显示给用户以提示响应。

所以代码看起来像

```
Alert alert = new Alert(AlertType.INFORMATION);
alert.setTitle("Message Here...");
alert.setHeaderText("Look, an Information Dialog");
alert.setContentText("I have a great message for you!");
alert.showAndWait().ifPresent(rs -> {
    if (rs == ButtonType.OK) {
        System.out.println("Pressed OK.");
    }
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-26T06:02:16.973

*更新*

从 Java8u40 开始，核心 JavaFX 库包括对话框（消息框）功能。请参阅以下类的文档：

*   [警报](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Alert.html)
*   [对话框](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Dialog.html)（和子类）

有关如何使用`Alert`该类的快速信息，请参阅此问题的其他答案：

*   [by user 有限赎罪](https://stackoverflow.com/a/33308051/1155209)
*   [由用户 Andrei Krasutski](https://stackoverflow.com/a/36137669/1155209)

如需更长的教程，请参阅[Makery JavaFX 对话框教程](https://code.makery.ch/blog/javafx-dialogs-official/)（*强烈*推荐本教程）。

*原始答案*

[这是模态确认](https://gist.github.com/1887631)对话框的示例。它的工作原理是创建一个包含带有对话内容的场景的舞台，然后在场景上调用 show()。

如果您希望主处理线程在显示新舞台时暂停并且您使用的是 JavaFX 2.2+，那么您可以在舞台上调用 showAndWait() 而不是显示。修改为使用 show 和 wait 并仅显示消息和确定按钮，然后处理应该与 C# MessageBox 非常相似。

如果您想要一个具有专业外观的 Java 8 消息框，我建议使用[ControlsFX 库](http://fxexperience.com/controlsfx/)中的对话框，这是 blo0p3r 的答案中提到的 JavaFX UI 控件沙箱中对话框的后续迭代。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-21T04:11:46.857

OSS 在 JavaFX 2.2 上的 MessageBox 在[这里](http://sourceforge.jp/projects/jfxmessagebox/wiki/)

我想它会对你有所帮助。

```
MessageBox.show(primaryStage,
    "Message Body",
    "Message Title", 
    MessageBox.ICON_INFORMATION | MessageBox.OK | MessageBox.CANCEL); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-03-21T17:19:10.177

使用命名空间：

```
import javafx.scene.control.Alert; 
```

从主线程调用：

```
public void showAlert() { 
    Alert alert = new Alert(Alert.AlertType.INFORMATION);
    alert.setTitle("Message Here...");
    alert.setHeaderText("Look, an Information Dialog");
    alert.setContentText("I have a great message for you!");
    alert.showAndWait();
} 
```

从非主线程调用：

```
public void showAlert() {
    Platform.runLater(new Runnable() {
      public void run() {
          Alert alert = new Alert(Alert.AlertType.INFORMATION);
          alert.setTitle("Message Here...");
          alert.setHeaderText("Look, an Information Dialog");
          alert.setContentText("I have a great message for you!");
          alert.showAndWait();
      }
    });
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-06T13:27:56.910

这是另一个简单的选择：[https ://sites.google.com/site/martinbaeumer/programming/open-source/fxmessagebox](https://sites.google.com/site/martinbaeumer/programming/open-source/fxmessagebox)

令人惊讶的是，JavaFX 2.2 中仍然没有可用的标准消息框

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-18T15:28:37.857

这是我最终使用的，它是FX Experience 上宣布[的](http://fxexperience.com/2012/10/announcing-the-javafx-ui-controls-sandbox/)[JavaFX UI Controls Sandbox的一部分：](http://hg.openjdk.java.net/openjfx/sandbox-8/controls/rt)

*   教程链接：[http ://code.makery.ch/blog/javafx-2-dialogs](http://code.makery.ch/blog/javafx-2-dialogs)
*   源代码链接：[https ://github.com/marcojakob/javafx-ui-sandbox/tree/master/javafx-dialogs](https://github.com/marcojakob/javafx-ui-sandbox/tree/master/javafx-dialogs)

这是一个不错且易于使用的对话框。无法与其他人比较，因为这是我唯一使用过的。没有问题。

代码非常简洁。看起来像这样：

```
//calling from a different controller and don't have the scene object loaded.
Stage stage = (Stage)deleteButton.getScene().getWindow();
DialogResponse response = Dialogs.showConfirmDialog(stage, "Are you sure ...", "Confirm deletion","Delete?", DialogOptions.OK_CANCEL);
if(response == DialogResponse.OK) {
    //...
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-29T19:27:42.553

目前我使用这个库来显示对话框。也许它对你有用：

[https://github.com/4ntoine/JavaFxDialog](https://github.com/4ntoine/JavaFxDialog)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-26T12:07:13.233

这是一个非常简单的例子：Alert alert = new Alert(AlertType.CONFIRMATION, "Are you sure you want to continue?");

# java - 在构造函数中泄漏这个

> ID：11662858
> 
> 赞同：1
> 
> 时间：2012-07-26T05:23:39.403
> 
> 标签：java, memory-management, observer-pattern, observable

该类`Controller`是一个单例，这似乎是一种允许安全传递`this`到`Controller`.

Netbeans 给

> 配置“在构造函数中传递可疑参数”提示

这让`controller.addObserver(this);`我问更好的技术是什么，尽管我[认为这不是一个好方法](https://stackoverflow.com/a/9851843/262852)。

```
package net.bounceme.dur.usenet.swing;

import java.util.Observable;
import java.util.Observer;
import java.util.logging.Logger;
import javax.mail.Folder;
import javax.swing.ListModel;
import net.bounceme.dur.usenet.controller.Controller;
import net.bounceme.dur.usenet.controller.MessageBean;
import net.bounceme.dur.usenet.controller.MessagesDefaultListModel;

public class MessageSelect extends javax.swing.JPanel implements Observer {

    private static final Logger LOG = Logger.getLogger(MessageSelect.class.getName());
    private Controller controller = Controller.getInstance();
    private ListModel messages = new MessagesDefaultListModel();
    private MessageBean messageBean = new MessageBean();

    @SuppressWarnings("unchecked")
    public MessageSelect() {
        controller.addObserver(this);
        initComponents();
        messagesJList.setPrototypeCellValue("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T05:31:08.060

当对象尚未完全构造时，您将传递`this`给外部类 ( )。然后可以在其构造尚未完成时引用您的对象。`Controller``Controller`

大多数人通过使用工厂方法来解决这个问题，该方法首先创建对象，然后从`this`外部传递。

```
// private to force clients to use the static factory method
private MessageSelect() {
  initComponents();
  messagesJList.setPrototypeCellValue("xxx");
}

public static MessageSelect createInstance() {
  MessageSelect instance = new MessageSelect();
  instance.controller.addObserver(instance);
  return instance;
} 
```

看看[这篇](http://www.ibm.com/developerworks/java/library/j-jtp0618/index.html)关于安全对象构造的优秀 Brian Goetz 文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T05:33:10.500

> 在构造函数中使用它作为参数可能很危险，因为对象没有完全初始化

来自[http://wiki.netbeans.org/Java_Hints](http://wiki.netbeans.org/Java_Hints)

我想重点是，超类可能会尝试访问尚未初始化的类的一部分（或者您稍后在自己的构建过程中进行更改）

# dojo - 在调整浏览器大小之前，不会绘制 titlePane 中的 Dojo 网格

> ID：11662862
> 
> 赞同：1
> 
> 时间：2012-07-26T05:24:05.120
> 
> 标签：dojo, dojox.grid, dojox.grid.datagrid

我在标题窗格中有一个道场增强网格，该网格又在 Tabcontainer 中。我正在动态创建一个选项卡容器并绘制包含网格的标题窗格。第一次正确绘制网格，但是如果我关闭选项卡并再次尝试打开 tabcontainer 标题窗格已绘制但标题窗格内的网格未绘制（或者更确切地说它不可见），直到我调整浏览器大小。那么有人遇到过类似的问题吗？请让我知道解决方案。我在网格上尝试了 resize()、update() 和 startup() 方法，但没有成功。

我有点卡住了，请分享您对此的想法。

谢谢，维克拉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:41:41.180

我遇到了同样的问题，并通过执行 dojo 连接找到了解决方法，例如：

```
dojo.connect(Datagrid,"_onFetchComplete",DataGrid,"_resize"); 
```

因此，当 DataGrid 完成加载数据时，它应该自动调整大小。

希望我能帮上忙。

问候，西蒙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-13T23:15:23.743

我的解决方案太简单了：在网格声明中定义粗体参数写在这里：

```
grid = new EnhancedGrid({id: 'MyIDgrid',
store: dataStore = new ObjectStore({objectStore: myStore}),
        structure: structureGrid,
        plugins: pluginGrid,
        style : 'width: 725px; height: 350px',
        autoWidth : true,
**autoHeight : false,height:'200px',**
        elasticView : '2'
}, document.createElement('div')); 
```

这一切都解决了！享受！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T22:00:17.910

`TabContainer.layout()`每次其容器更改大小时，您都必须调用。为此，您可以 1) 在包含 DOMNode 或 2) 容器变得可见时监视 DOMEvents onunderflow 和 onoverflow (once-n-forall)。

window.onresize 事件修复它的原因是 TabContainer 挂钩所述事件并调用其自己的布局。

在您的情况下，TabController 摆弄 TabContainer 的窗格，可能在某处缺少“layoutChildren”。最佳情况下，您应该将网格作为唯一子选项卡上的第一个。

部署网格后，它将采用绝对的计算高度 - 从 TabContainer '继承'。一旦 TabContainer 选择调整大小或指示这样做，就会触发此事件。

手动，您应该能够实现这些行 - 在重新打开选项卡后。脚本取自_Grid.js来说明

```
var grid = dijit.byId('MYGRIDID');
require(["dijit/layout/utils"], function(layerUtils) {
   layoutUtils.layoutChildren(grid.domNode,
               grid._contentBox, 
              [grid.tablist, {
                  domNode: grid.tablistSpacer,
                  layoutAlign: titleAlign
              }, {
                  domNode: grid.containerNode,
                  layoutAlign: "client"
              }]);
   grid._containerContentBox = layoutUtils.marginBox2contentBox(grid.containerNode,
              {
                  domNode: grid.containerNode,
                  layoutAlign: "client"
              });
   // note this line in particular
   grid.selectedChildWidget.resize(grid._containerContentBox);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T07:36:55.733

您是否尝试过在 Grid 上设置绝对高度？您尝试过哪些浏览器？（我在使用 IE 的 TabCointainer 中遇到了 DataGrid 的各种问题）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T22:59:53.023

## 我的问题

我遇到了和你*类似*的情况：

*   网格位于标题窗格中（默认关闭）。
*   网格可以在运行中被销毁和重新创建。
*   当用户出现问题时：
    1.  打开窗格。
    2.  关闭窗格。
    3.  重新创建网格。
    4.  重新打开窗格。
    5.  **网格不可见，直到调整浏览器窗口的大小！**

## 我的解决方案

`resize()`我的方法是在打开标题窗格时在我的网格上强制 a 。我在可以访问网格和窗格的地方使用了这样的代码：

```
var titlePane = registry.byId("title-pane-id");
var handle = aspect.after(titlePane, "toggle", function(deferred) {
    if (titlePane.open) {
        grid.resize();
    }
}); 
```

*   [dojo/方面文档](http://dojotoolkit.org/reference-guide/1.8/dojo/aspect.html)
*   如果你破坏它，不要忘记[从你的网格中删除它。](http://dojotoolkit.org/reference-guide/1.8/dojo/on.html#removing-an-event-handler)
*   我在 dojo v1.8.1 上做了这个

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-27T10:11:43.060

`style="height: auto;"`将符合目的。

# html - 输入（提交）元素在 Firefox 中占用额外空间

> ID：11662864
> 
> 赞同：5
> 
> 时间：2012-07-26T05:24:07.550
> 
> 标签：html, css

带有链接、输入（提交）和跨度的网页。所有的样式都具有相同的外观，实际上输入的样式与超链接和跨度具有相同的外观。

![](../Images/db56b761326e3e4b2829f96493832fc4.png)

测试使用：Firefox 3.0、3.6、4.0、14.0.1

出于某种原因，输入比其他输入稍大。此外，输入的文本与链接和跨度的文本不对齐。这是一个现场演示。

[http://jsfiddle.net/LGftW/](http://jsfiddle.net/LGftW/)

这是我的CSS：

```
a{
    text-decoration:none;
}

input[type="submit"]{
    border:0 none;
    background:transparent;
}

a, input[type="submit"], span{
    border:solid 1px green;
    font-size:64px;
    font-family:Arial;
    font-weight:bold;
    float:left;
    padding:0;
    margin:0;
} 
```

标记：

```
<a href="#">LINK</a>
<input type="submit" value="INPUT" />
<span>SPAN</span> 
```

那么我怎样才能让输入看起来像一个普通的链接或跨度呢？是浏览器的奇怪行为还是我错过了一些 CSS？我已经解决了一天了。

**编辑**

似乎该问题仅发生在 Firefox 中。IE8-9 和 Chrome 显示正确。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T05:50:39.323

`input::-moz-focus-inner`通过在您的 CSS中使用来删除 Firefox 中的按钮填充：

```
input::-moz-focus-inner /*Remove button padding in FF*/ 
{
    border: 0;
    padding: 0;
} 
```

**已编辑：使用上述代码更新了演示链接。**

[](http://jsfiddle.net/RuBQY/)**在 Firefox 中[**查看演示**](http://jsfiddle.net/RuBQY/)**

# windows - 当我在 Windows 上克隆带有符号链接的存储库时会发生什么？

> ID：11662868
> 
> 赞同：64
> 
> 时间：2012-07-26T05:24:16.503
> 
> 标签：windows, git, symlink, msysgit

关于在 Windows 上添加对符号链接的支持存在很多问题。但是，当我在 Windows 上克隆[带有符号链接的存储库时，实际上会发生什么？](https://github.com/ariofrio/symlink-test)

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-07-26T07:27:26.207

从本机 Git 客户端[版本 1.5.3](https://raw.github.com/git/git/master/Documentation/RelNotes/1.5.3.txt)`git clone`开始，`git init`将探测目标文件系统的符号链接支持，并相应地设置本地存储库配置`core.symlinks`，即`false`FAT 或 NTFS。**这使得在 Linux 下创建和提交的符号链接显示为纯文本文件，其中包含 Windows 下的链接文本**（有关详细信息，请参阅[core.symlinks 上的 git config 文档](http://www.kernel.org/pub/software/scm/git/docs/git-config.html)）。

从[Git for Windows 版本 2.10.2](https://github.com/git-for-windows/git/releases/tag/v2.10.2.windows.1)开始，安装程序有[一个明确的选项来启用符号链接支持](https://github.com/git-for-windows/git/issues/921)。

在旧版本的 Git for Windows 中，您可以手动设置`core.symlinks`启用`true`的 Git 在以下约束下创建符号链接：

*   符号链接仅适用于 Windows Vista 及更高版本。
*   符号链接仅适用于 NTFS，不适用于 FAT。
*   您需要成为管理员和/或拥有`SeCreateSymbolicLinkPrivilege`权限。
*   默认情况下禁用远程文件系统上的符号链接。
*   键入 Windows 的符号链接。
*   许多程序不理解符号链接（包括旧版本的 Windows 资源管理器）。

Git for Windows wiki 中提供了更多[详细信息。](https://github.com/git-for-windows/git/wiki/Symbolic-Links)

在旧版本的 Git for Windows 中手动设置`core.symlinks`为`true`在克隆和重置工作树之后，您会收到类似于以下内容的错误消息

```
$ git reset --hard HEAD
error: unable to create symlink directory (Function not implemented)
error: unable to create symlink linux-links/this_is_a_symbolic_link_to_file (Function not implemented)
fatal: Could not reset index file to revision 'HEAD'. 
```

附带说明一下，JGit 客户端直到 3.3 版才探测目标文件系统的符号链接支持，因此`core.symlinks`设置回退到系统/全局 Git 配置。从[3.3 版](http://wiki.eclipse.org/JGit/New_and_Noteworthy/3.3#Features)开始， JGit 探测符号链接支持，但似乎过于保守，`core.symlinks = false` [在某些情况下设置实际上支持符号链接](https://issues.jenkins-ci.org/browse/JENKINS-22391)。

您可以查看[https://github.com/sschuberth/git-playground](https://github.com/sschuberth/git-playground)，其中包含在 Linux 上创建的用于测试的一堆链接。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-26T07:19:43.440

一种解决方案是使用过滤器来检测 Git 存储的符号链接并将其替换为 Windows 符号链接。
这在“ [Windows 中的 Git 符号链接](https://stackoverflow.com/questions/5917249/git-symlinks-in-windows)”中有详细说明

然而，真正的符号链接支持不仅限于现在：
请参阅[第 224 期](http://code.google.com/p/msysgit/issues/detail?id=224)和 GitHub 上最近（2012 年 7 月）的[讨论](https://github.com/msysgit/msysgit/pull/4)（您查看过）：

> 以下是 Windows 上的三种文件系统链接：硬链接、联结和符号链接。
> 
> *   自 NT 以来，硬链接和结点可用。硬链接只能指向文件，连接只能指向目录（在同一卷上）。
> *   自 Vista 以来可用的符号链接可以指向文件或目录，也可以指向不同的卷。
> *   `mklink`，自 Vista 以来发布，可以创建上述所有内容。但是在脚本中调用它的方式使它只创建符号链接（这很好，恕我直言，因为它们最接近 Linux 符号链接）。
> 
> 对于Vista 之前的版本，我们需要一个后备，使用“ `fsutil hardlink`”为文件创建硬链接（但可能只有在没有“”的情况下调用“ln” `-s`）并使用“”为目录创建连接`fsutils reparsepoint`，或者简单地调用原始的`ln.exe`.
> 
> 除了破坏 Windows XP 设置之外，这样的更改也会破坏标准 Windows 7 设置，因为**`mklink`默认情况下需要管理员权限**。这可以通过检查它是否有效，并在这种情况下恢复复制来解决。
> 
> 仅作记录：我最近尝试在 Git for Windows 本身中支持符号链接，但最终得出结论，Windows 7 及更高版本中的“符号链接支持”对于模拟 Unix 符号链接几乎没有用处。

有一个项目声称“ [Open Source, 100% Compatible ln for Windows (and Junction Point library)](http://neosmart.net/blog/2011/open-source-100-compatible-ln-for-windows-and-junction-point-library/) ”，但是：

> 不幸的是，普通用户默认没有在 Windows 上创建符号链接所需的权限。将这一点与您无法以 POSIX 要求的相同方式更改符号链接指向的事实相结合，使它们或多或少对我们无用。这个我上面已经写过了。
> 
> 现在，作者可以声称这是“100% 兼容”的，我所关心的，但快速查看源代码会发现它不是。它们不提供任何回退，甚至不`CreateSymbolicLink`动态加载函数。因此，非符号链接功能的 Windows 版本的结果将是一个缺少符号错误的崩溃。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-03T04:31:43.390

我一直在 msysgit 中处理 Symlink 支持：

[https://github.com/frogonwheels/git](https://github.com/frogonwheels/git) （分支 mrg/symlink-v* .. 当前为 v2）

测试还**没有**完成，我的工作时间有限，也没有真正的短期目标来激励我。如果能在 msysgit 下使用 git-annex 之类的项目就好了。

我的工作也因 msys shell 中缺乏符号链接支持而受到阻碍。

有一个命令行用于授予 cygwin ln 命令建议的权限。（您需要以管理员身份运行它）。

> 编辑权限 -a SeCreateSymbolicLinkPrivilege -a $YOUR_USER

目录与文件符号链接的整个问题是一个大问题。

目前我认为，我们尽可能地限制自己使文件符号链接工作......并且不允许在 msysgit 中使用目录符号链接。这并不理想，但现实情况是任何解决方案都有点杂乱无章，试图将 possix 链接强加到 NTFS 与 possix 链接不兼容的现实上是痛苦的。

我们可以尝试检测目标是文件还是目录，但我可以想到一些问题，尤其是实体创建顺序的整个问题。

# html - 使用任何网络语言，如何在我的页面中保留 iframe？

> ID：11662878
> 
> 赞同：1
> 
> 时间：2012-07-26T05:25:11.173
> 
> 标签：html, iframe

好的，所以我正在尝试 iFrame 网页。我不知道为什么，但它不会留在我的页面中（它会弹出并转到主页）。我正在使用的代码是：

```
<iframe>http://mywebsite.com</iframe> 
```

如何将其保存在我的网站中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T05:28:29.527

试试这个：

```
<iframe src="http://mywebsite.com"></iframe> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T05:29:28.013

您需要使用该`src`属性。

```
<iframe src="http://mywebsite.com"></iframe> 
```

放置在 iframe 标记内的 HTML/文本内容被视为“后备”内容，仅当浏览器不支持 iframe 时才会显示。有关完整详细信息，请参阅[MDN 文档](https://developer.mozilla.org/en/HTML/Element/iframe)。

```
<iframe src="http://mywebsite.com">
    This sentence only shows up if the browser doesn't support iframes!
</iframe> 
```

因此，您正在创建一个 iframe，它不指向任何具有其`src`属性的页面（因此它保持空白），并且将文本“ `http://mywebsite.com`”作为后备文本出现在不支持 iframe 的浏览器中。

**编辑：**

如果您不控制该站点，则框架站点可能具有某些逻辑，例如：

```
// if we are not the highest frame, someone is try to frame this site
if(window.parent != window)
    // redirect the framing parent site to our site
    window.parent.location.href = 'http://iframedsite.com'; 
```

此逻辑检测站点是否被其他人（例如，您自己的站点）嵌入并重定向父框架。您可以通过简单地构建 IANA 的网站`https://www.iana.org/`（或只是`http://www.example.com`）来确认这是否是问题所在，它在被构建时可以很好地播放并且不执行父框架重定向。

# android - 从重定向的 URL 中检索位图

> ID：11662881
> 
> 赞同：3
> 
> 时间：2012-07-26T05:25:29.760
> 
> 标签：android, facebook-graph-api

我正在使用以下 void 方法从 URL 获取位图图像：

```
public static Bitmap downloadBitmap(String url) {
        final AndroidHttpClient client = AndroidHttpClient.newInstance("Android");
        final HttpGet getRequest = new HttpGet(url);

        try {
            HttpResponse response = client.execute(getRequest);
            final int statusCode = response.getStatusLine().getStatusCode();
            if (statusCode != HttpStatus.SC_OK) { 
                Log.w("ImageDownloader", "Error " + statusCode + " while retrieving bitmap from " + url); 
                return null;
            }

            final HttpEntity entity = response.getEntity();
            if (entity != null) {
                InputStream inputStream = null;
                try {
                    inputStream = entity.getContent(); 
                    final Bitmap bitmap = BitmapFactory.decodeStream(inputStream);
                    return bitmap;
                } finally {
                    if (inputStream != null) {
                        inputStream.close();  
                    }
                    entity.consumeContent();
                }
            }
        } catch (Exception e) {
            // Could provide a more explicit error message for IOException or IllegalStateException
            getRequest.abort();
            Log.e("ImageDownloader", "Error while retrieving bitmap from " + url);
        } finally {
            if (client != null) {
                client.close();
            }
        }
        return null;
    } 
```

我用这种方法提供的最常见的 URL 是：http: [//graph.facebook.com/+FACEBOOK_USER_ID+/picture](http://graph.facebook.com/+FACEBOOK_USER_ID+/picture)，但是这个 URL 重定向到[http://profile.ak.fbcdn.net/static-ak/rsrc。 php/v2/y9/r/xxxxx.gif](http://profile.ak.fbcdn.net/static-ak/rsrc.php/v2/y9/r/xxxxx.gif)。这就是为什么我没有得到位图图像，我得到的是与 302 重定向相关的错误。如何处理重定向的 URL，并获取位图文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:32:04.697

为什么不直接请求图像 URL 并直接获取它呢？

而不是`https://graph.facebook.com/[object id]/picture`

要求 `https://graph.facebook.com/[object id]?fields=picture`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T05:33:18.137

您需要在 URL 中附加 ?type=large 以获取图片...

例如，以下代码显示了如何使用 imageview...

> ImageView 用户图片；
> 
> userpicture=(ImageView)findViewById(R.id.userpicture);
> 
> 网址 img_value = null;
> 
> img_value = new URL("http://graph.facebook.com/"+id+"/picture?type=large");
> 
> 位图 mIcon1 = BitmapFactory.decodeStream(img_value.openConnection().getInputStream());
> 
> userpicture.setImageBitmap(mIcon1);

尝试在 URL 中添加**?type=large**并告诉我您的结果。

# php - YouTube 嵌入和 PHP

> ID：11662883
> 
> 赞同：0
> 
> 时间：2012-07-26T05:25:45.817
> 
> 标签：php, youtube-api

我允许用户上传一个 YouTube 嵌入链接，该链接将在他们的个人资料页面上显示视频。但是，当我当前的代码运行时，它不起作用。我从保存 youtube 嵌入链接的数据库中成功地回显了该字段，因此我知道 php 代码在提取链接方面正在工作。然后我替换 PHP 代码并将实际链接放在 src 属性中，但它仍然不起作用。这是下面的代码。

```
<iframe width="420" height="315"
    src="<?php echo $detailed_profile_data['video_1'];?>" 
    frameborder="1" allowfullscreen>
</iframe> 
```

函数detailed_profile_data 获取用户提交到数据库的链接。这是它返回的内容。youtu.be/yWk7FOnFvGs

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:30:35.187

您可能希望使用 oEmbed 从用户提交的 URL 中找出实际的可嵌入 URL。

这篇 Stack Overflow 文章可能会有所帮助：[如何使用 PHP 从视频 URL 中检索 YouTube 视频详细信息？](https://stackoverflow.com/questions/10896233/how-can-i-retrieve-youtube-video-details-from-video-url-using-php)

# macos - VI 编辑器：将整个文件复制到剪贴板（特定于 OS X）

> ID：11662884
> 
> 赞同：16
> 
> 时间：2012-07-26T05:25:47.227
> 
> 标签：macos, vim

有什么方法可以将文件中的所有行复制到 VI 编辑器中的剪贴板。我已经尝试过SO中以前的帖子中的 、`*yG`和，但在 OS X 中没有任何作用。`+yG``"+yG``:%y+`

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-26T07:30:28.627

Mac OS X 附带的默认 Vim`/usr/bin/vi[m]`编译时不支持剪贴板。

你有三个选择：

1.  **`pbcopy`从命令行使用，不使用Vim**

    ```
     $ cat filename | pbcopy 
    ```

2.  **`pbcopy`从 Vim使用**

    ```
     :%w !pbcopy 
    ```

3.  **获得您自己的带有剪贴板支持的 Vim**

    您可以通过[MacPorts](https://www.macports.org/)或[Homebrew](https://brew.sh/)、下载[MacVim](https://github.com/macvim-dev/macvim)或[从源代码](https://www.vim.org/download.php#unix)构建来做到这一点。

使用特定寄存器的正确方法`y`是`"{register}y`.

`$ man pbcopy`在您的终端和`:help clipboard`Vim`:help !`中查看。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T12:42:02.237

`G`只是意味着“转到文件末尾”，并且您需要在前面加上引号`*`或`+`使它们作为剪贴板寄存器有效。您正在寻找更像的东西`gg"*yG`，这意味着：

`gg`- 转到文件顶部

`"*`- 使用`*`寄存器

`y`- 开始猛拉

`G`- 转到文件底部

或者您可以使用`:!cat % | pbcopy`与 romainl 提供的精细解决方案没有什么不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-18T08:46:19.410

vim --版本 | grep 剪贴板，如果你看到“-clipboard”，你就不会那样做。你的 vim 不支持它。需要重新编译源代码。</p>

# 编译

```
$./configure \ --enable-gui=auto --with-features=huge --with-x
$ make && sudo make install 
```

# exception - Grails 2.0.4 webflow“类型不匹配”异常

> ID：11662886
> 
> 赞同：0
> 
> 时间：2012-07-26T05:25:49.277
> 
> 标签：exception, grails, parameters, spring-webflow, type-mismatch

我对 Grails 还是很陌生，我正在开发一个在线调查。我决定使用网络流，但我遇到了很多问题。我正在尝试将调查 ID 从 gsp 页面传递到流控制器。这在任何其他控制器操作上都可以正常工作，但是每当我对流的开始状态的操作执行此操作时，我总是会遇到相同的错误。我已经按照教科书中的教程进行了完全相同的操作，但我的想法已经不多了。

这是gsp页面的链接：

```
<g:link controller="surveyPage" action="beginTest" id="${survey.id}">
${survey.surveyName}
</g:link> 
```

这是开始状态的流程

```
def beginTestFlow = {

    showSurvey{

        def survey = Survey.get(params.id)

        on("cancel").to "cancelSurvey"
        on("continueSurvey").to "nextQuestion"

    }

    cancelSurvey { redirect(controller:"surveyPage") }
} 
```

它总是抛出异常：

参数类型不匹配与

```
def survey = Survey.get(params.id) 
```

我也试过：

```
flow.survey = Survey.get(params.id) 
```

甚至：

```
flow.survey = Survey.get(session.survey.id) 
```

总是同样的错误。另外，我确保类 Survey 实现了 Serializable。我已经将相同的代码复制并粘贴到具有相同控制器的不同操作中，并且它可以完美运行。对 Web 流程有什么不同的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:30:51.783

您不能将这样的代码直接放在状态定义中，您需要使用动作状态或`onEntry`块

```
def beginTestFlow = {
    showSurvey{
        onEntry {
            flow.survey = Survey.get(params.id)
        }
        on("cancel").to "cancelSurvey"
        on("continueSurvey").to "nextQuestion"
    }

    cancelSurvey { redirect(controller:"surveyPage") }
} 
```

`onEntry`每次进入状态时都会触发该块`showSurvey`。相反，如果您希望某些逻辑在整个流程开始时只运行一次（例如，如果稍后的转换可能重新进入初始状态），您可以使用流程级`onStart`块代替：

```
def beginTestFlow = {
    onStart {
        flow.survey = Survey.get(params.id)
    }
    showSurvey{
        on("cancel").to "cancelSurvey"
        // ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:09:07.933

Ivo Houbrechts 写了一篇关于 grails 2.0 webflow 的优秀教程。你可以在这里阅读它：

[http://livesnippets.cloudfoundry.com/docs/guide/](http://livesnippets.cloudfoundry.com/docs/guide/)

# android - VideoView 不播放 mp4 视频

> ID：11662888
> 
> 赞同：-1
> 
> 时间：2012-07-26T05:26:00.650
> 
> 标签：android, video

我有一个 1200*780 分辨率的 mp4 视频，我无法在我的 android 设备上播放。我正在使用 android 2.1 设备来测试应用程序。我正在使用视频视图在我的模拟器上播放视频。但我在某处读过该视频视图有一个限制，它不会播放 320 像素以上的视频。如果我想在我的 android 设备上播放大视频，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:30:41.807

您应该调整视频大小。为此，您已经为 VideoView 创建了一个自定义类并覆盖了 onMeasure 方法。[此链接](https://stackoverflow.com/questions/7031598/resize-video-to-fit-the-videoview)将为您提供帮助。其详细。

# objective-c - 未调用 UISwipeGestureRecognizer 方法？

> ID：11662889
> 
> 赞同：1
> 
> 时间：2012-07-26T05:26:09.197
> 
> 标签：objective-c, ios, cocoa-touch, cocos2d-iphone

在我的 Box2d 游戏中，我尝试使用 uiswipegesture 来获得滑动手势，当我在测试项目中这样做时它工作正常，但是当我在 box2d 游戏中实现时，它不调用滑动动作这里是代码

```
{UISwipeGestureRecognizer *swipeGestureup = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(oneFingerSwipeUp)];
    [swipeGestureup setDirection: UISwipeGestureRecognizerDirectionUp ];

    [[[CCDirector sharedDirector] openGLView] addGestureRecognizer:swipeGestureup];

    [swipeGestureup release];} 
```

方法是

```
-(void)oneFingerSwipeUp:(id)sender{

NSLog(@"swipe auction called");

[player jump]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:47:14.437

```
{
  UISwipeGestureRecognizer *swipeGestureup = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(oneFingerSwipeUp:)];
  [swipeGestureup setDirection: UISwipeGestureRecognizerDirectionUp ];

  [[[CCDirector sharedDirector] openGLView] addGestureRecognizer:swipeGestureup];

  [swipeGestureup release];
 }

- (void)oneFingerSwipeUp:(UISwipeGestureRecognizer *)recognizer{
  NSLog(@"swipe auction called");

  } 
```

# c++ - 从抽象基类的多个部分实现继承？

> ID：11662890
> 
> 赞同：13
> 
> 时间：2012-07-26T05:26:09.673
> 
> 标签：c++, multiple-inheritance, virtual-inheritance

是否可以有多个抽象接口的**部分实现**，然后通过使用多重继承将这些部分实现**收集到一个****具体的类中？**

我有以下示例代码：

```
#include <iostream>

struct Base
{
    virtual void F1() = 0;
    virtual void F2() = 0;
};

struct D1 : Base
{
    void F1() override { std::cout << __func__ << std::endl; }
};

struct D2 : Base
{
    void F2() override { std::cout << __func__ << std::endl; }
};

// collection of the two partial implementations to form the concrete implementation
struct Deriv : D1, D2
{
    using D1::F1; // I added these using clauses when it first didn't compile - they don't help
    using D2::F2;
};

int main()
{
    Deriv d;
    return 0;
} 
```

这无法编译并出现以下错误：

```
main.cpp: In function ‘int main()’:
main.cpp:27:11: error: cannot declare variable ‘d’ to be of abstract type ‘Deriv’
main.cpp:19:8: note:   because the following virtual functions are pure within ‘Deriv’:
main.cpp:5:18: note:    virtual void Base::F1()
main.cpp:6:18: note:    virtual void Base::F2() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T05:31:37.617

尝试从[虚拟继承](http://en.wikipedia.org/wiki/Virtual_inheritance)`Base`：

```
struct D1 : virtual Base
{
    void F1() override { std::cout << __func__ << std::endl; }
};

struct D2 : virtual Base
{
    void F2() override { std::cout << __func__ << std::endl; }
}; 
```

如果没有虚拟继承，您的多重继承方案看起来就像从两个独立且不完整的基类继承，`D1`并且`D2`两者都不能被实例化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T05:58:54.627

> 是否可以有多个抽象接口的部分实现，然后通过使用多重继承将这些部分实现收集到一个具体的类中？

是的。

每个`Base`基类子对象都带来两个纯虚函数。你想要多少这些基础子对象`Deriv`？

*   如果您想要 2 个`Base`基类子对象，`Deriv::D1::Base`并且`Deriv::D2::Base`（因此从`Deriv&`to 的转换`Base&`将是模棱两可的）那么您将在`Deriv`: `Deriv::D1::Base::F1()`, `Deriv::D1::Base::F2()`, `Deriv::D2::Base::F1()`,中拥有 4 个不同的虚函数`Deriv::D2::Base::F2()`。只实现了第一个和最后一个，所以中间的两个是纯虚拟的：`Deriv::D1::Base::F2()`, `Deriv::D2::Base::F1()`. 你有**两个完全独立的继承关系：`Deriv`继承自`D1`和`Deriv`继承自`D2`。**
*   如果您只想要一个`Base`基类子对象`Deriv::Base`，那么您将只有 2 个不同的虚函数在`Deriv`: `Base::F1()`, `Base::F2()`.

C++ 中的非虚拟继承是“具体的”继承，就像包含：`struct D : B`意味着对于每个`D`对象都只有一个`B`基类子对象，就像`struct C { M m; }`意味着对于每个对象`C`都只有一个`M`类成员子对象。这些关系是一对一的。

OTOH，虚拟继承是一个更“抽象”的东西：`struct D : virtual B`意味着对于每个`D`对象都与一个`B`基类子对象相关联，但这种关系是多对一的，例如`struct C { M &m; }`.

通常，对于任何派生类`D`（此处`Deriv`）和（此处）的任何虚拟基`B`类，虚拟派生自（此处`D`，）`Base`的所有基类都有助于覆盖基类中的虚函数：`D``B``Deriv::D1``Deriv::D2`

*   `Base::F1()`被覆盖`Deriv::D1::F1()`
*   `Base::F2()`被覆盖`Deriv::D2::F2()`

非虚拟和虚拟继承是非常不同的继承关系，就像非虚拟成员函数和虚拟函数在派生类和基类中具有相同签名的函数之间引入不同的关系（隐藏与覆盖）。

与虚拟和非虚拟函数一样，虚拟和非虚拟基类必须在不同的情况下使用（通常一个并不比另一个“更好”）。

## 如何在没有虚拟继承的情况下“修复”你的代码？

> ```
> struct Deriv : D1, D2
> {
>     using D1::F1; // I added these using clauses when it first didn't compile - they don't help
>     using D2::F2;
> }; 
> ```

是的：使用声明控件名称查找，因此它们会影响可见性和歧义问题，而不是覆盖虚函数。

使用您最初的基于非虚拟继承的设计，为了创建`Deriv`一个具体的类，您必须显式地实现`F1()`和`F2()`虚函数签名（有 4 个虚函数`Deriv`，但只有 2 个不同的签名），所以您需要 2 个函数定义：

```
struct Deriv : D1, D2
{
    void F1() override { D1::F1(); }
    void F2() override { D2::F2(); }
}; 
```

请注意，`Deriv::F1()`覆盖`Deriv::D1::F1()`和`Deriv::D2::F1()`.

# joomla - Virtuemart - 产品在源代码中，但在页面中不可见

> ID：11662896
> 
> 赞同：0
> 
> 时间：2012-07-26T05:26:26.017
> 
> 标签：joomla, virtuemart

我是 Joomla 的新手，在 Virtuemart 试试运气。

[我在http://anuskincare.com/anuskincare/](http://anuskincare.com/anuskincare/)的“产品”下发布了一些产品，但我根本看不到任何产品。但是，我可以在页面源中看到它们。我怀疑它是模板问题。请分享您对如何解决此问题的宝贵意见和意见。

万分感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:04:00.497

您肯定在加载 jQuery 时遇到问题。一个很可能的可能性是您的 meadowmart 配置没有指定加载 jquery 库。尝试更改这些设置，看看是否会为您加载库。

如果不这样做，你会看到第一个 JS 错误是：`jQuery is not defined`- 如果你没有使用 Firebug，我会先得到它，然后访问 JED 并查看是否有任何[jQuery 插件](http://extensions.joomla.org/extensions/core-enhancements/performance/jquery-scripts)会提供帮助与问题。

# html - 如何保存网站源代码中的所有文件？

> ID：11662902
> 
> 赞同：26
> 
> 时间：2012-07-26T05:27:21.917
> 
> 标签：html, google-chrome

我想从一个网站下载所有文件（html、图像、js、css）。我可以单独下载每个文件。

我在谷歌浏览器中尝试，点击后`view source`，`ctrl + s`然后保存为`sample.html`然后我得到一个`sample.html`，还有一个示例文件夹包含所有文件，如 css、js、图像等。但我再次尝试做同样的事情，但事实并非如此。

那么更早它是如何工作的呢？为什么它现在不起作用？

**注意：**仅供学习使用，不用于复制任何网站的网页内容。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-26T05:47:38.067

试试[Winhttrack](http://www.httrack.com/)

> ...离线浏览器实用程序。
> 
> 它允许您将万维网站点从 Internet 下载到本地目录，递归地构建所有目录，将 HTML、图像和其他文件从服务器获取到您的计算机。HTTrack 安排原始站点的相对链接结构。只需在浏览器中打开“镜像”网站的一个页面，您就可以从一个链接到另一个链接浏览该站点，就好像您在在线查看它一样。HTTrack 还可以更新现有的镜像站点，并恢复中断的下载。HTTrack 是完全可配置的，并具有集成的帮助系统。
> 
> WinHTTrack 是 HTTrack 的 Windows 2000/XP/Vista/Seven 版本，而 WebHTTrack 是 Linux/Unix/BSD 版本...

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-07-26T06:01:32.793

在 Chrome 中，转到选项（自定义和控制，右上角的 3 个点/条）---> 更多工具 ---> 将页面另存为

```
save page as  
filename     : any_name.html 
save as type : webpage complete. 
```

然后你会得到`any_name.html`和`any_name folder`。

# mongodb - MongoDB 断言错误

> ID：11662908
> 
> 赞同：3
> 
> 时间：2012-07-26T05:27:52.600
> 
> 标签：mongodb

我开始在我的 mongodb 生产数据库日志中看到这个

```
ns:my_app_production.artists query:{ $query: {}, $orderby: { semester: 1, name: 1 } }
Wed Jul 25 19:20:59 [conn199] Assertion: 10334:Invalid BSONObj spec size: -286331154 (EEEEEEEE) first element:_id: "agelio-batle" 
Wed Jul 25 19:20:59 [conn199] assertion 10334 Invalid BSONObj spec size: -286331154 (EEEEEEEE) first element:_id: "agelio-batle" 
```

首先我尝试进行维修

```
mongo --repair
...
Wed Jul 25 22:20:39 [initandlisten] Assertion: 10334:Invalid BSONObj spec size: -286331154 (EEEEEEEE) first element:_id: "agelio-batle" 
0x467eaa 0x4183ca 0x62dd82 0x643478 0x532b22 0x64d196 0x6578b7 0x65ac31 0x65cd75 0x65d6d9 0x51a419 0x6195f5 0x61b0c5 0x61bd3d 0x4914c8 0x47ad9a 0x5e2e7c 0x5e60b9 0x5e78ad 0x6346a2 
 [0x467eaa]
 # several more what i assume memory addresses omitted
 [0x6346a2]
Wed Jul 25 22:20:39 [initandlisten] assertion 10334 Invalid BSONObj spec size: -286331154 (EEEEEEEE) first element:_id: "agelio-batle"  ns:my_app_production.artists query:{}
Wed Jul 25 22:20:39 [initandlisten] exception in initAndListen std::exception: nextSafe(): { $err: "Invalid BSONObj spec size: -286331154 (EEEEEEEE) first element:_id: "a...", code: 10334 }, terminating
Wed Jul 25 22:20:39  dbexit: 
... 
```

我也尝试`db.repairDatabase();`从 mongo shell 运行，结果相同。

我以前从未见过这种情况。通常使用 mongodb 修复可以修复大多数问题，所以我不确定如何继续或解决此问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:15:43.573

如果整体修复失败，您可以使用 --repair 选项 mongodump 出单个集合并尝试隔离问题。您甚至可以传入查询以从损坏的集合中过滤掉损坏的数据，本质上是在处理坏数据，但这是一个增量且通常很慢的过程。这就是为什么总是建议进行备份并在副本集中运行以避免留下可能损坏的数据集的情况。

也就是说，如果您无法从备份或另一个副本集成员中恢复，那么您可以尝试类似（关闭数据库）：

```
mongodump --dbpath /path/to/source/data/files --repair --db <dbname> --out /path/to/repaired 
```

如果这不起作用，那么跳过索引读取（这可能会让你绊倒）：

```
mongodump --forceTableScan --dbpath /path/to/source/data/files --repair --db <dbname> --out /path/to/repaired 
```

感谢 Ren 在评论中，您可以尝试的另一件事是删除/重建索引。表扫描选项（默认情况下 mongodump 遍历 _id 索引）将避免使用转储索引。因此，假设您获得了正确的路径和数据库名称，则第二个选项应该可以工作。

# php - Magento 分层导航 PHP - 删除 URL 中的过滤器

> ID：11662916
> 
> 赞同：0
> 
> 时间：2012-07-26T05:28:21.933
> 
> 标签：php, url, magento, magento-1.5

我正在操作内置的分层导航过滤器以使用复选框代替使用过滤器时出现的“当前购物”部分。我已成功设置复选框系统以使用以下方式添加过滤器：

```
<input type="checkbox" id="filter-checkbox-<?php echo $_item->getLabel() ?>" class="filter-checkbox" onclick="setLocation('<?php echo $this->urlEscape($_item->getUrl()) ?>');"/> 

 <a href="<?php echo $this->urlEscape($_item->getUrl()) ?>" class="m-notselected-ln-item" title="<?php echo $_item->getLabel() ?>">

<?php echo $_item->getLabel() ?>

</a> 
```

将过滤器添加到未选中的项目（在 else 语句中）很好。最后我得到一个这样的 URL：

```
category/category.html?filtered_attribute=97&filtered_attribute=105 
```

取消选中该框时，我只是在使用用于 onclick 的 php 时遇到问题。`filtered_attribute=xx`即从 URL中删除哪个。

查看标准模板文件 - 删除过滤器按钮使用：

```
<?php echo $_filter->getRemoveUrl() ?> 
```

但这会破坏页面并导致分层导航的其余部分无法加载。

（我知道它仍然很乱，我将清理复选框/锚标记等的双 URL，并在一切正常后转换为 SEO URL）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T03:26:21.693

解决了：

需要使用`<?php echo $this->urlEscape($_item->getRemoveUrl()) ?>`

# c# - 如何修改此 SearchAndReplace 例程以处理大文件

> ID：11662928
> 
> 赞同：1
> 
> 时间：2012-07-26T05:29:16.763
> 
> 标签：c#, performance, file-io, large-files

我想修改以下代码以处理大文件。

```
 public static void Replace(string filePath, string searchText, string replaceText)
    {
        StreamReader reader = new StreamReader(filePath);
        string content = reader.ReadToEnd();
        reader.Close();

        content = Regex.Replace(content, searchText, replaceText);

        StreamWriter writer = new StreamWriter(filePath);
        writer.Write(content);
        writer.Close();
    } 
```

我在想我需要打开一个文件流来写入一个新的文件名，然后删除原始文件并在完成后用新文件替换它。那个听起来是对的吗？

另外......我喜欢这个例程的简单性，除了必要的文件 i/o 代码行之外，只有一行代码来处理文件。但是，我也想知道我是否为了简单而牺牲性能...... Regex.Replace 是否非常高效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:33:19.617

**首先**：您可以尝试**`Regex with Stream`**（似乎更快，内存需求更少）：

*   [使用 .NET Framework 构建正则表达式流搜索](http://www.developer.com/design/article.php/3719741/Building-a-Regular-Expression-Stream-Search-with-the-NET-Framework.htm)

或见**`Mono-Project Regex`**。它具有带流式传输的正则表达式。

请参阅这篇文章了解正则表达式的性能：

*   [C# 正则表达式性能](http://www.dotnetperls.com/regex-performance)（来自*dotnetperls*）

或者如果`Regex`不需要使用，请使用`String.Replace`并尝试这一行代码：

```
File.WriteAllText(filePath, 
                  File.ReadAllText(filePath).Replace(searchText, replaceText)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T05:37:46.620

加快 Regex 的一种方法是传递 RegexOptions.Compiled 选项，该选项将使用您的 regex 并将状态机编译为 IL。这对编译步骤有一些开销，但是一旦编译，正则表达式将执行得更快。显然，您应该对代码进行计时，以查看 Regex 编译是否有助于或损害您的方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:07:49.263

[您也可以使用File](http://msdn.microsoft.com/en-us/library/3z2ck8eh)类在没有正则表达式的情况下做到这一点

```
public static void Replace(string filePath, string searchText, string replaceText)
{
   string newText = File.ReadAllText(filePath).Replace(searchText, replaceText));
   File.Delete(filePath);
   File.WriteAllText(newFilePath, newText);
} 
```

# serialization - 反序列化对象图时如何解决依赖关系

> ID：11662935
> 
> 赞同：1
> 
> 时间：2012-07-26T05:29:33.793
> 
> 标签：serialization, graph, deserialization

当我通过对象本身（面向对象的方式）恢复所有每个节点和边来反序列化对象图时，我发现存在严重的依赖问题。

例如，如果一个对象`A`引用自己`A`，（自循环引用）这意味着，它希望自己`A`在恢复时处于*完整的原始状态。*因为它在被序列化的时候就是那个状态。

对于自引用的情况，它可以被检测到，因为它知道自己正在被恢复。但是如果`A`需要另一个对象`B`，它也应该期望另一个对象`B`处于完整的原始状态。如果对象`B`还引用了`A`，那么现在又出现了循环引用 ，并且在不知道现在正在恢复`A`的情况下，它变成了同样的问题。**如果****想使用****while反序列化的一些属性，不保证存在。**`A`**`B``A`**

从根本上说，这个问题的发生是因为一个对象需要其他对象的完整状态，尽管它本身处于不完整状态。这没有意义。我曾考虑将恢复过程分为多个阶段，但这并没有真正的区别，因为实际上对象将保持不完整状态，直到所有阶段完成。

我可以为这个问题提供一些建议或好的解决方案吗？

PS。我开始编写代码来替代 Cocoa 的`NSKeyedArchiver`. 所以我假设对象的编码是由对象本身完成的。（对于它的内部状态）所以它可能与一般图形问题不同。但我不能排除对象本身可以获得的隐藏状态......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:05:28.247

供以后参考...

发布这个问题后，我对这个问题进行了很多研究。我意识到这个问题根本不可能解决。（这个问题与一般图不同，因为在我的情况下，每个节点都可以隐藏边，并且每个节点在恢复时必须从自身解决边信息。）

核心问题是依赖。所有每个节点都取决于其在反序列化时无法访问的原始状态。但是如果它不依赖于不存在的状态，它可以完全被序列化。保证这一点的唯一方法是放弃一般的图结构。

所以我决定把我所有的数据结构都转换成树形结构。这对结构造成了很大的限制。因为它没有循环依赖，所以所有节点都可以用完全恢复的子节点信息来恢复。

我发现了这个。达格。[http://en.wikipedia.org/wiki/Directed_acyclic_graph](http://en.wikipedia.org/wiki/Directed_acyclic_graph) 这只是一个有共享孩子的有向树。我认为 DAG 结构也很好。因为依赖关系也可以完全解决。

DAG 有很大的局限性。引用不能是循环的。我考虑过弱引用的概念，但它在反序列化时需要完整的原始状态是相同的。这是一个巨大的限制，但我决定用强大的反序列化算法来权衡这一点。我认为共享儿童参考对我来说就足够了。实际上，失去健壮性对我来说是不可接受的，所以我决定走这条路。

有了这些东西，我想我可以完全序列化/反序列化我的数据结构。感谢互联网和维基百科。

# android - android中的日期检索

> ID：11662939
> 
> 赞同：1
> 
> 时间：2012-07-26T05:29:54.080
> 
> 标签：android, date

在我的应用程序中，我有 2 个字段，1 个是日期，另一个是数据库表中的 recc（是一个整数）。

现在我将解释我的要求：

考虑假设用户输入今天的日期（26-07-2012）并且recc为10。这意味着从今天的日期到那个+10的日期。我从今天的日期得到了第10个日期。但我想要的是今天的第10天意味着它肯定也会到下个月（26-07-2012----5-08-2012），但我必须知道这个特定月份的日期计数，（即）26-07- 2012----5-08-2012 这个月有多少天。我想我已经清楚地解释了我的问题，如果没有，我准备给出更多解释。提前谢谢。

日期值：

```
 EditText date=(EditText)findViewById(R.id.startdateexp);       
             String startdate=date.getText().toString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:52:07.077

如果您使用的是 Date 类，则可以通过转换为毫秒的天数来抵消它以创建新的 Date：

```
Date datePlusRecc = new Date(oldDate.getTime() + recc*86400000);  // 86400000 = 24*60*60*1000 
```

请注意，这仅在 recc 相对较小（< 大约 20）时可用，否则乘法将溢出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:53:32.963

只需使用 java.util.Date 类与您的日期相结合，以毫秒为单位。

在 for 循环中，以毫秒为单位将一天添加到一个版本并将其转换回日期。从日期对象中获取月份并将其与当前月份进行比较。一旦月份是新月份，您就会知道当月的总天数。

```
Date currentDate = new Date(currentMillis);
long countingMillis = currentMillis;
int daysInSameMonth = 0;
while(true){
    daysInSameMonth++; // if the actual date schould not count move this line at the button of the while
    countingMillis += 1000*60*60*24;
    Date dt = new Date(countingMillis);
    if(currentDate.getMonth() != dt.getMonth())
         break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:50:20.330

您可以通过以下方式做到这一点： 1\. 从数据库中获取日期。

现在通过以下方法从日期获取月份中的日期：

```
DateFormat iso8601Format = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    try {
    date = iso8601Format.parse(dateTime);
    } catch (ParseException e) {
    Log.e(TAG, "Parsing ISO8601 datetime failed", e);
    }
    Calendar cal=Calendar.getInstance();
    cal.setTime(date);
    int currentDay= cal.get(Calendar.DAY_OF_MONTH); 
```

通过以下方式计算每月的最后一天：

```
 int lastDay = cal.getActualMaximum(Calendar.DAY_OF_MONTH); 
```

# javascript - jQuery 对话框不关闭

> ID：11662940
> 
> 赞同：4
> 
> 时间：2012-07-26T05:30:00.273
> 
> 标签：javascript, jquery-ui, jquery

这是我的对话框 jquery

```
</script>
<script type="text/javascript">
    $.ajaxSetup({ cache: false });
    $(document).ready(function () {
        $(".openDialog").live("click", function (e) {
            e.preventDefault();
            $("<div></div>")
            .addClass("dialog")
            .attr("id", $(this)
                .attr("data-dialog-id"))
            .appendTo("body")
            .dialog({
                title: $(this).attr("data-dialog-title"),
                minWidth: 200,
                minHeight: 100,
                resizable: false,
                close: function () { $(this).remove() },
                modal: true
//                        buttons:{ 
//                            close:function(e){
//                               e.preventdefault();
//                               $(this).closest(".dialog").dialog("close"); 
//                            }}
            })
            .load(this.href);
        });
        $(".close").live("click", function (e) {
            e.preventDefault();                  
            $(this).closest(".dialog").dialog("close");
        });
        $(".refresh").live("click", function (e) {
            e.preventDefault();
            location.reload();
        });
    });          
</script> 
```

这是我的删除视图

```
@using (Html.BeginForm()) {
    <div>
    <p>Are you sure you want to delete?</p>
       @Html.HiddenFor(model=>model.UId)
   <table border=0>
    <tr>
   <td>Name:</td>
    <td>@Html.DisplayFor(model =>model.FName)
    @Html.DisplayFor(model => model.LName)</td>
    </tr>
    <tr>
    <td>PAddress:</td>
    <td>@Html.DisplayFor(model => model.PAddress)</td>                                        

    </tr>
    </table>
     <input type="submit" value="Yes"/>
    <button  class="close">No</button>

 </div>
} 
```

问题是当我从按钮调用关闭类时，对话框不会关闭。但是当我删除 preventDefault 时，对话框关闭。任何帮助请为什么对话框没有关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:25:03.977

```
$(".close").live("click", function (e) { 
    e.preventDefault();                   
    $('#yourdivId').closest(".dialog").dialog("close"); 
}); 
```

试试这个...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T05:36:05.277

你能试试这个吗

```
$(".close").live("click", function (e) {
                e.preventDefault();                  
                $(this).closest(".dialog").dialog("close");
            }); 
```

将此代码放入

```
$(document).ready(function () { 
```

这可能对你有用...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T05:43:52.757

在这里你不需要使用 preventDefault() 函数。preventDefault() 用于防止事件的不需要的默认操作。

例如，当您单击一个链接时，它会将您重定向到另一个页面。如果您希望该链接执行其他操作，则需要防止默认并编写您的操作。

由于此按钮没有默认操作（使用“type”属性定义），因此您无需使用 preventDefault()。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T05:46:06.433

首先你把`$.ajaxSetup({ cache: false });`文件准备好的功能放在里面。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T05:22:12.227

您可以像这样更改删除视图。

```
<div>
@using (Html.BeginForm()) {
   <p>Are you sure you want to delete?</p>
       @Html.HiddenFor(model=>model.UId)
   <table border=0>
    <tr>
   <td>Name:</td>
    <td>@Html.DisplayFor(model =>model.FName)
    @Html.DisplayFor(model => model.LName)</td>
    </tr>
    <tr>
    <td>PAddress:</td>
    <td>@Html.DisplayFor(model => model.PAddress)</td>                                        

    </tr>
    </table>
     <input type="submit" value="Yes"/>
}
<button  class="close">No</button>
</div> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-19T12:38:17.677

```
 $(".ui-dialog").hide();
    $(".ui-widget-overlay").hide(); 
```

# php - 使用自定义 $_GET 变量重写 Wordpress URL

> ID：11662941
> 
> 赞同：0
> 
> 时间：2012-07-26T05:30:01.580
> 
> 标签：php, wordpress

我正在寻找一种方法来重写类似于 wordpress 的 URL，其中：

```
http://www.example.com/?p=5 
```

变成

```
http://www.example.com/some-page-with-that-title 
```

我想要

```
http://www.example.com/events/?event_id=23 
```

成为

```
http://www.example.com/events/some-event-title 
```

我发现了 wordpress rewrite api，并成功获得了以下内容来使用和事件模板页面重写 url。

```
add_action( 'init', 'events_permalinks' );
function events_permalinks() {
    add_rewrite_rule(
        'events/([^/]+)/?',
        'index.php?pagename=events&event_name=$matches[1]',
        'top'
);
}

add_filter( 'query_vars', 'events_query_vars' );
function events_query_vars( $query_vars ) {
    $query_vars[] = 'event_name';
    return $query_vars;
} 
```

并使用 get_query_var( 'event_name' ) 获取变量

我知道我需要在非 wordpress 事件表中查找 event_id 以获取名称，但我不确定将查询放在哪里，以便将其交换到 url。希望我没有混淆事情。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:32:49.077

你这样做是错的。

WordPress 中的 URL 可以在您的仪表板中轻松自定义。请参阅 WordPress Codex 中的[使用永久链接](http://codex.wordpress.org/Using_Permalinks)文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-02T11:53:30.093

我不是真正的重写专家，但如果你只使用一个 $_GET var，这个片段对你有用（至少它对我有用）。如您所见，重写 sintax 在您引用 $_GET 参数的方式上略有不同。

您的代码也适用于多个 $_GET var 上下文，而不是单个上下文。希望这对你有用，记住更新你的永久链接去设置→永久链接屏幕→保存更改。

更多信息：[Wordpress 重写 API](https://codex.wordpress.org/Rewrite_API/add_rewrite_rule) | [Wordpress 永久链接 Codex](https://codex.wordpress.org/Using_Permalinks#Automatically_updating_.htaccess)

```
 add_action('init', 'events_permalinks');

    function events_permalinks(){
    add_rewrite_rule(
            '^events/([^/]*)$',
            'index.php?pagename=events&event_name=$matches[1]',
            'top'
            );
    }

    add_filter( 'query_vars', 'events_query_vars' );
    function events_query_vars( $query_vars ) {
        $query_vars[] = 'event_name';
        return $query_vars;
    } 
```

# linux - 逻辑与运算混乱

> ID：11662942
> 
> 赞同：0
> 
> 时间：2012-07-26T05:30:02.460
> 
> 标签：linux, operators, cc

我对以下表达式的工作方式有些困惑。

```
cc file_name.c  && ./a.out 
```

当 filename.c 编译成功时，其存在状态将为 0（零）。因此，根据逻辑 && 操作，第二个表达式（ ./a.out ）不应该被执行。但它仍然有效并给了我结果。这个怎么运作 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T05:32:19.480

`0`在shell中意味着成功。它与 C 中的不同。从[`bash`手册页](http://linux.die.net/man/1/bash)中：

> **AND 和 OR 列表分别是由&&**和**││**控制运算符分隔的多个管道之一的序列。AND 和 OR 列表以左结合性执行。AND 列表具有以下形式
> 
> ***命令1 &&** *命令**2**
> 
>  **当且仅当*command1*返回退出状态为零时，才会执行*command2 。***

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T05:34:30.243

执行 shell 命令时，返回值为 0 表示命令执行成功。非零值表示处理命令时出错。因此，如果上一个命令成功，它将继续执行下一个命令，否则中止。**

# lucene - Lucene：从未存储的字段中获取术语

> ID：11662945
> 
> 赞同：1
> 
> 时间：2012-07-26T05:30:15.253
> 
> 标签：lucene

有什么方法可以检索不幸未存储的特定字段中的所有术语。我无法重建索引。不需要基于位置的信息。我只需要术语列表。

*更新*

我已经建立了一个示例索引，其中包含一个存储字段，另一个未存储字段，并使用 Luke 对其进行了测试。我想知道我是否可以像卢克一样访问所有条款。这可能不是最聪明的想法，但可能会奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T07:24:05.020

Lucene 使用两个不同的概念：索引和存储。如果要提取术语，则不需要存储任何内容。您可以使用 luke，也可以通过 API 对术语进行迭代。对于 java API，您可以使用 [1]：[如何从 Lucene 的特定字段中获取唯一术语列表？](https://stackoverflow.com/questions/8910008/how-can-i-get-the-list-of-unique-terms-from-a-specific-field-in-lucene/13911747#13911747).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:46:12.470

Luke 是开源的，所以看看 Luke 是如何做到的。

# php - 为不同的搜索选项调用不同的函数

> ID：11662946
> 
> 赞同：0
> 
> 时间：2012-07-26T05:30:20.450
> 
> 标签：php

亲爱的朋友，我有两个功能，也许我将来可能会有更多功能，但重点是当用户在同一文本字段上根据邮政编码搜索酒店时，应该调用函数 hotel_by_postel_code($textvalue) 并且当我根据国家搜索，然后应该调用函数 hotel_by_country($textvalue)。以下是应该显示结果的代码，但它根本没有显示结果。

```
<?php require_once("includes/header.php");?>
<?php require_once("includes/connection.php")?>
<?php    
     if(isset($_POST['submit'])){
          $message =""; 
          $textvalue = $_POST['search'];
          if(empty($allhotels = hotel_by_postel_code($textvalue)) || empty($allhotels = hotel_by_country($textvalue))){
             $message = "There is no record in the database";
          } 

      }else{    
          $allhotels = select_all_hotels();
      } 
?>

<div class="cBoth"></div>
<div id="sep"></div>
<div id="mainContentSection" class="Calign">

<div id="detaillist">

<div id="searching" class="Calign">

  <form action="list2.php" method="POST" id="searchForm">
  <fieldset>
  <input type="text"  name="search" />
  <input type="submit" name ="submit" value="Search" /></fieldset>
  </form>      
</div><!--End of searching-->

<?php 
if(isset($message)){
echo"<div id=\"listtitle\">";
echo"<h2>".$message."</h2>";
echo"</div>";//End of listtitle div
}else{
echo"<div id=\"listtitle\">";
echo"<h2>Property Name</h2> <h2>Location</h2> <h2>Guest Rating</h2><h2>Hotel Rank</h2><h2>Per night</h2>";
echo"</div>";
}
?><!--End of listtitle-->

<div class="cBoth"></div>       
    <?php
    $i=0;
    while($hotels_set = mysql_fetch_array($allhotels)){
          $room_rate =  rateforhotel($hotels_set['hotel_id']);
            if(!empty( $hotels_set['hotel_name']) && ($room_rate['hotel_id'] == $hotels_set['hotel_id'] )  ){
                      if($i % 2 == 0) { echo "<div id=\"innerlisteven\">"; } 
                       else 
                       {
                       echo"<div id=\"innerlistodd\">"; 
                       }   
                       echo"<h2><a href =\"#\">". $hotels_set['hotel_name'] ."</a></h2>";
                       echo"<h2>". $hotels_set['country'] ."</h2>";
                       if(!intval($hotels_set['star'])){
                       echo"<h2>". $hotels_set['star'] ."</h2>";
                       }else{
                       echo"<h2>". $hotels_set['star'] . "<img src=\"img/repetimg/star.png\"/></h2>";
                       }
                       echo"<h2>". $hotels_set['star'] . "</h2>";
                       echo"<h2>". $room_rate['rate'] . "</h2>";
                       echo"</div>";
                       $i++;

           }//end of if()
    }//end of hotel while

        mysql_close($con);
       ?>
</div><!--End of details-->
<div id="advertlisting">

          <div id="search">search menu</div>

</div><!--End of adverts left-->

</div><!--End of end of maincontent-->
<div class="cBoth"><!-- clear Both--></div> 

<?php require_once("includes/footer.php"); ?> 
```

以下代码是函数本身

```
function hotel_by_country($country){
   global $connection;
   $query = "SELECT * FROM Hotels WHERE country ='{$country}'";
   $hotel_set = mysql_query($query,$connection);
   confirm_query($hotel_set);
   return $hotel_set;

 }

 function hotel_by_postel_code($postal){
   global $connection;
   $query = "SELECT * FROM Hotels WHERE hotel_postal_code ='{$postal}'";
   $hotel_set = mysql_query($query,$connection);
   confirm_query($hotel_set);
   return $hotel_set;
 }

function select_all_hotels(){
 global $connection;
   $query = "SELECT *
             FROM Hotels";

   $hotel_set = mysql_query($query,$connection);
   confirm_query($hotel_set);
   return $hotel_set;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:40:59.627

`)`您缺少函数的右括号`empty`- 一个在 OR 之前，一个在条件末尾）。
改变：

```
if(empty($allhotels = hotel_by_postel_code($textvalue) OR empty($allhotels = hotel_by_country($textvalue)) 
```

到：

```
if(empty($allhotels = hotel_by_postel_code($textvalue)) OR empty($allhotels = hotel_by_country($textvalue))){ 
```

接下来，我会将这一行分成几行：

```
$allhotels1 = hotel_by_postel_code($textvalue);
$allhotels2 = hotel_by_country($textvalue);
echo "allhotels1 = $allhotels1; allhotels1 = $allhotels1\n";//for debug
if(empty($allhotels1) OR empty($allhotels2){... 
```

最后一件事 - 你确定它应该是`OR`而不是`AND`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:50:01.557

```
if(is_numermic($textvalue))
   hotel_by_postel_code($textvalue)
else
  hotel_by_country($textvalue) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:14:05.497

我认为你的问题在于这段代码

```
if(empty($allhotels = hotel_by_postel_code($textvalue)) || empty($allhotels = hotel_by_country($textvalue))){
    $message = "There is no record in the database";
} 
```

首先你填写`$allhotels`. `hotel_by_postel_code($textvalue)`然后你用`$allhotels = hotel_by_country($textvalue)`.

此外，您应该替换为`||`，`&&`因为您只需要两个函数都没有返回值时的消息。

**尝试**

```
$allhotels = hotel_by_postel_code($textvalue);
if(empty($allhotels)) {
    $allhotels = hotel_by_country($textvalue);
    if(empty($allhotels)) {
         $message = "There is no record in the database";
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-29T00:01:56.677

经过多次跟踪和错误后，我能够找到解决方案，以下是我发现的最佳选择，也许将来有人会遇到同样的问题。要记住的一件事是 IF 和 Else 中的选项可以很容易地移动到单独文件上的函数中。我还添加了一个 Html 菜单来选择我要搜索的选项类型，在这种情况下它是过滤器菜单。

```
<?php 
error_reporting(E_ALL);
ini_set('display_errors','1');?>
<?php require_once("includes/header.php");?>
<?php require_once("includes/connection.php")?>
<?php

     if(isset($_POST['search']) &&  $_POST['search']!= "") {

                 if($_POST['filter'] == "HotelName"){
                 $search = $_POST['search'];

                  $sqlquery = "SELECT * FROM Hotels WHERE hotel_name LIKE '%$search%' OR description LIKE '%$search%'";
                  $allhotels = mysql_query($sqlquery, $connection) or die("Sorry Something wrong".mysql_error());

                 }else if($_POST['filter'] == "country"){

                 $search = $_POST['search'];

                  $sqlquery = "SELECT * FROM Hotels WHERE country LIKE '%$search%' OR hotel_address LIKE '%$search%'";
                  $allhotels = mysql_query($sqlquery, $connection) or die("Sorry Something wrong".mysql_error());

                 }else if($_POST['filter'] == "Postal"){
                 $search = $_POST['search'];

                  $sqlquery = "SELECT * FROM Hotels WHERE hotel_postal_code LIKE '%$search%'";
                  $allhotels = mysql_query($sqlquery, $connection) or die("Sorry Something wrong".mysql_error());
                 }

      }   

?>

<div class="cBoth"></div>
<div id="sep"></div>
<div id="mainContentSection" class="Calign">

<div id="detaillist">

<div id="searching" class="Calign">

  <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="POST" id="searchForm">
  <fieldset>
  <input type="text"  name="search" />
  <select name="filter">
  <option value="HotelName">Hotel Name</option>
  <option value="country">Country</option>
  <option value="Postal">Postal Code</option>
  </select>
  <input type="submit" name ="submit" value="Search" />
  </fieldset>
  </form>      
</div><!--End of searching-->

<div id="listtitle">
     <h2>Property Name</h2> <h2>Location</h2><h2>Hotel Rank</h2><h2>Guest Rating</h2><h2>Per night</h2>
</div><!--End of listtitle-->

<div class="cBoth"></div>       
    <?php
    if(!isset($allhotels)){
    $allhotels = select_all_hotels();
    }
    $i=0;
    while($hotels_set = mysql_fetch_array( $allhotels)){
          $room_rate =  rateforhotel($hotels_set['hotel_id']);
            if(!empty( $hotels_set['hotel_name']) && ($room_rate['hotel_id'] == $hotels_set['hotel_id'] )  ){
                      if($i % 2 == 0) { echo "<div id=\"innerlisteven\">"; } 
                       else 
                       {
                       echo"<div id=\"innerlistodd\">"; 
                       }   
                       echo"<h2><a href=\"desti_list.php?details=" . urlencode($hotels_set["hotel_id"]).
                      "\">" . $hotels_set['hotel_name'] ."</a></h2>";
                       echo"<h2>". $hotels_set['country'] ."</h2>";
                       if(!intval($hotels_set['star'])){
                       echo"<h2>". $hotels_set['star'] ."</h2>";
                       }else{
                       echo"<h2>". $hotels_set['star'] . "<img src=\"img/repetimg/star.png\"/></h2>";
                       }
                       echo"<h2>". $hotels_set['star'] . "</h2>";
                       echo"<h2>". $room_rate['rate'] . "</h2>";
                       echo"</div>";
                       $i++;

                /*
                 echo"<h3><a href=\"desti_list.php?details=" . urlencode($hotels_set["hotel_id"]).
                      "\">Find Out More</a></span></h3>";

                */       

           }//end of if()
    }//end of hotel while

        mysql_close($connection);
       ?>
</div><!--End of details-->
<div id="advertlisting">

          <div id="search">search menu</div>

</div><!--End of adverts left-->

</div><!--End of end of maincontent-->
<div class="cBoth"><!-- clear Both--></div> 

<?php require_once("includes/footer.php"); ?> 
```

# javascript - 如何在 POST 方法之后使用 javascript 更改 HTML 内容

> ID：11662954
> 
> 赞同：0
> 
> 时间：2012-07-26T05:30:57.303
> 
> 标签：javascript, html, events, post, onsubmit

在使用 POST 方法提交表单后，我无法使用 javascript 更改 HTML 文档中的内容。我需要将我的 HTML 文档中的 div 的颜色更改为黄色，我已经完成了，但问题是在它更改为黄色之后，HTML 网站在导航器中刷新，然后它恢复正常（白色）。它有点闪烁黄色，然后又变成白色。

这是我的 HTML 代码：

```
<form action="" method="post" onSubmit="return changeColor()">
.
.
.
<div id="divColor">
.
. 
```

这是我更改 div 颜色的 javascript 代码：

```
function changeColor()
{
    var div = document.getElementById("courselist");
    div.style.backgroundColor='yellow';
} 
```

我需要这样做，因为这是作业的一部分，所以我不能用 CSS 改变颜色，到目前为止我们只能使用 HTML 和 javascript。如果有人认为我想作弊，这不是全部任务，这是我坚持的部分。在导航器在 POST 方法之后刷新 HTML 网站后，我无法使 div 保持黄色。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:40:13.263

当您提交表单时，它会转到 中指定的下一页`action=""`。因此，当您单击提交按钮时，它会更改颜色，然后加载下一页。由于缺少 中指定的页面`action=""`，它正在重新加载同一页面，因此它变成黄色，然后刷新。

这可能是您正在寻找的。您使用 AJAX 将信息提交到 POST，而无需实际加载不同的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:01:18.857

有三种方法可以实现您的目标。

1.  使用ajax提交信息，使页面不刷新，保持状态。或者你可以像下面这样，和ajax的效果一样：

    <iframe name="myIfr" style="display:none"></iframe> <form method="post" target="myIfr">...</form>

2.  改变“”的“action”，在url中记录状态，像这样：“mypage.php?status=1”，页面刷新后，可以从url中获取状态。

3.  使用 Cookie。我认为这不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T05:45:17.630

您可以将其分开，以便仅在满足其他条件时才打印出表单。使用一个名为 $output_form 的变量（或任何您喜欢的名称）并将其设置为 false，然后让代码在发送 POST 之前打印出一件事，并在发送 POST 之后打印出一些内容。这是我不久前完成的一些代码的真正精简版本，可能会帮助您了解您可以做什么：

```
<?php

if(isset($_POST['Submit'])){

{SOME CODE HERE}

        $output_form = true;
    }

}
else{
    $output_form = true;
}

if (!$output_form){
    {SOME CODE HERE}
}
else{
    {OTHER STUFF HERE}
    $output_form = true;

    mysqli_close($dbc);
}
}

if ($output_form){
?>

<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T14:32:19.443

大家好，我终于解决了我的问题。我必须在我的 changeColor() 函数中返回 false，网站会改变颜色，但不会自行刷新。我喜欢使用 cookie 的方法。

感谢您的帮助，我无法使用 AJAX 或 PHP，因为他们还没有教我们。

# c - Apache APR 函数 apr_procattr_cmdtype_set 混淆

> ID：11662957
> 
> 赞同：0
> 
> 时间：2012-07-26T05:31:08.433
> 
> 标签：c, apache

我一直在关注 C 编码的在线教程，代码使用的是 Apache APR 库。它使用 apr_proc_t 结构来执行外部应用程序。我对这个功能感到困惑，有人可以解释一下这个功能的含义：

```
apr_status_t apr_procattr_cmdtype_set   (   apr_procattr_t *    attr,
        apr_cmdtype_e   cmd 
    )       

Set what type of command the child process will call.

Parameters:
    attr    The procattr we care about.
    cmd The type of command. One of:

                APR_SHELLCMD     --  Anything that the shell can handle
                APR_PROGRAM      --  Executable program   (default) 
                APR_PROGRAM_ENV  --  Executable program, copy environment
                APR_PROGRAM_PATH --  Executable program on PATH, copy env 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:16:04.027

该`apr_procattr_cmdtype_set`函数用于告诉 APR 你想如何执行外部命令，它可能只是设置一个内部标志并做一些簿记。

让我们看看[`enum apr_cmdtype_e`](http://apr.apache.org/docs/apr/0.9/group__apr__thread__proc.html#gdcb981d7748c580eb69ac11dbf709060)：

> `APR_SHELLCMD`
> 使用 shell 调用程序
> 
> `APR_PROGRAM`
> 直接调用程序，不复制环境
> 
> `APR_PROGRAM_ENV`
> 调用程序，复制我们的环境
> 
> `APR_PROGRAM_PATH`
> 在 PATH 上找到程序，使用我们的环境
> 
> `APR_SHELLCMD_ENV`
> 使用 shell 调用程序，复制我们的环境

第一个和最后一个选项（`APR_SHELLCMD`和`APR_SHELLCMD_ENV`）几乎说“使用可移植版本[`system`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/system.html)”（无论是否将当前环境变量复制到新进程）。其他只是 Unix [`fork`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fork.html)/[`exec`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/exec.html)对的变体，带有选择使用哪个`exec`函数系列的标志。

# python - IOError：[Errno 22] 读取/写入大字节串时参数无效

> ID：11662960
> 
> 赞同：12
> 
> 时间：2012-07-26T05:31:23.183
> 
> 标签：python, macos, python-3.x

我越来越

```
IOError: [Errno 22] Invalid argument 
```

当我尝试使用 将大字节串写入磁盘时`f.write()`，`f`使用模式打开的位置`wb`。

我在网上看到很多人在使用 Windows 网络驱动器时遇到此错误，但我使用的是 OSX（我最初问这个问题时是 10.7，但现在是 10.8，带有标准的 HFS+ 本地文件系统）。我正在使用 Python 3.2.2（同时出现在 python.org 二进制文件和自制软件安装上）。我没有看到系统 Python 2.7.2 存在这个问题。

我还尝试`w+b`了基于[此 Windows 错误解决方法](http://support.microsoft.com/default.aspx?scid=kb;en-us;899149)的模式，但这当然没有帮助。

数据来自一个大型 numpy 数组（几乎 4GB 的浮点数）。如果我手动循环字符串并将其分块写出，它工作正常。但是因为我不能一口气把它全部写完，所以`np.save`失败`np.savez`了——因为他们只是使用`f.write(ary.tostring())`. 当我尝试将其保存到现有的 HDF5 文件中时，出现类似的错误`h5py`。

请注意，在读取使用以下命令打开的文件时，我遇到了同样的问题`file(filename, 'rb')`：`f.read()`给出了这个`IOError`，而`f.read(chunk_size)`对于合理的`chunk_size`工作。

有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-12T19:19:06.213

这似乎是带有 fread / fwrite 的一般 OSX 错误，因此 Python 用户无法真正修复。见[numpy #3858](https://github.com/numpy/numpy/issues/3858)，[这个 torch7 commit](https://github.com/torch/torch7-distro/commit/40e65934e071e452f194a9d8c0fd740131babefa)，[这个 SO question/answer](https://stackoverflow.com/a/7938180/344821)，....

据说它已在 Mavericks 中得到修复，但我仍然看到这个问题。

Python 2 可能已经解决了这个问题，或者它的 io 模块可能总是缓冲大量的读/写；我没有仔细调查。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-29T22:55:20.100

也许尝试不使用 b 标志打开，我认为并非所有操作系统/文件系统都支持它。

# iphone - 获取当前国家/地区时出错

> ID：11662966
> 
> 赞同：0
> 
> 时间：2012-07-26T05:32:04.407
> 
> 标签：iphone, locale

我正在使用以下代码获取当前国家

```
NSLocale *locale = [NSLocale currentLocale];
NSString *countryCodes = [locale objectForKey:NSLocaleCountryCode];
NSString *countryName = [locale displayNameForKey:NSLocaleCountryCode value:countryCodes];
NSLog(@"%@",countryName); 
```

我在阿联酋，但这显示的是美国，我在我的 iPod 上进行测试，请帮助我如何获得当前国家/地区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:19:48.773

```
-(void)viewWillAppear:(BOOL)animated
{
    CLLocationManager *locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    [locationManager startUpdatingLocation];
    [super viewWillAppear:animated];
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
{
    MKReverseGeocoder *geoCoder = [[MKReverseGeocoder alloc] initWithCoordinate:newLocation.coordinate];
    geoCoder.delegate = self;
    [geoCoder start];
}

- (void)reverseGeocoder:(MKReverseGeocoder *)geocoder didFindPlacemark:(MKPlacemark *)placemark
{
    NSLog(@"Detail is:--> %@",placemark);

    NSString *strCountry = [NSString stringWithFormat:@"Current Cuntry %@",[placemark.addressDictionary objectForKey:@"Country"]];

    NSLog(@"label detail is:--> %@",strCountry);

    lblAddress.text = strCountry;
} 
```

试试这个代码......这肯定会为您提供当前国家/地区的详细信息。

# java - 休眠的故障转移连接URL？

> ID：11662971
> 
> 赞同：1
> 
> 时间：2012-07-26T05:32:30.943
> 
> 标签：java, hibernate

我正在使用 Hibernate 4 使用 Java 1.7 连接到 Oracle 10g 数据库

这是一个独立的程序，它有一个我每天通过批处理作业运行的主要方法。

我的休眠配置具有以下连接 URL 条目：

```
 ...
 <property name="hibernate.connection.url" value="jdbc:oracle:thin:@192.168.0.6:1521:tango" />
 <property name="hibernate.connection.username" value="nde" />
 <property name="hibernate.connection.password" value="nde" />
 ... 
```

现在，我也对 Oracle 服务器进行了故障转移。在哪里可以指定此故障转移服务器的连接 URL，以便如果 192.168.0.6:1521 的服务器出现故障，我可以指向此故障转移服务器？

谢谢

# android - 如何在 android 应用程序中提供选择 wi-fi 或 GPRS 进行网络连接的选项

> ID：11662978
> 
> 赞同：9
> 
> 时间：2012-07-26T05:33:01.553
> 
> 标签：android, android-wifi, gprs

在我的应用程序中，我想为用户提供选择 wi-fi / GPRS 以连接到 Web 服务器的选项。可能是以下问题的答案解决了我的问题... 1.如何检查当前启用的默认网络连接选项。2\. 如何在用户选择时启用 wi-fi/GPRS 或（如果用户选择 GPRS，则禁用 wi-fi - 如果 GPRS 工作仅需要此选项）

还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-26T05:50:25.693

试试这个：

```
ConnectivityManager connManager = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
NetworkInfo mWifi = connManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);

if (mWifi.isConnected())
    //if wifi connected
}

ConnectivityManager connManager1 = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
NetworkInfo mMobile = connManager1.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

if (mMobile.isConnected()) {
    //if internet connected
} 
```

不要忘记在清单文件中添加这些权限；

```
android.permission.CHANGE_WIFI_STATE
android.permission.ACCESS_WIFI_STATE
android.permission.UPDATE_DEVICE_STATS
android.permission.CHANGE_NETWORK_STATE
android.permission.ACCESS_NETWORK_STATE
android.permission.MODIFY_PHONE_STATE
android.permission.READ_PHONE_STATE 
```

要启用或禁用 Wifi，请使用`mWiFi.setWifiEnabled(true|false)`

要启用/禁用 GPRS/3G，请使用以下代码片段。

```
void turnData(boolean ON) throws Exception
{

if(bv == Build.VERSION_CODES.FROYO)
{

    Log.i("version:", "Found Froyo");
    try{ 
        Method dataConnSwitchmethod;
        Class telephonyManagerClass;
        Object ITelephonyStub;
        Class ITelephonyClass;
        TelephonyManager telephonyManager = (TelephonyManager) getApplicationContext().getSystemService(Context.TELEPHONY_SERVICE);

        telephonyManagerClass = Class.forName(telephonyManager.getClass().getName());
    Method getITelephonyMethod = telephonyManagerClass.getDeclaredMethod("getITelephony");
    getITelephonyMethod.setAccessible(true);
    ITelephonyStub = getITelephonyMethod.invoke(telephonyManager);
    ITelephonyClass = Class.forName(ITelephonyStub.getClass().getName());

    if (ON) {
         dataConnSwitchmethod = ITelephonyClass.getDeclaredMethod("enableDataConnectivity"); 

    } else {
        dataConnSwitchmethod = ITelephonyClass.getDeclaredMethod("disableDataConnectivity");
    }
    dataConnSwitchmethod.setAccessible(true);
    dataConnSwitchmethod.invoke(ITelephonyStub);
    }catch(Exception e){
          Log.e("Error:",e.toString());
    }

}
 else
{
   Log.i("version:", "Found Gingerbread+");
   final ConnectivityManager conman = (ConnectivityManager) getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);
   final Class conmanClass = Class.forName(conman.getClass().getName());
   final Field iConnectivityManagerField = conmanClass.getDeclaredField("mService");
   iConnectivityManagerField.setAccessible(true);
   final Object iConnectivityManager = iConnectivityManagerField.get(conman);
   final Class iConnectivityManagerClass =  Class.forName(iConnectivityManager.getClass().getName());
   final Method setMobileDataEnabledMethod = iConnectivityManagerClass.getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
   setMobileDataEnabledMethod.setAccessible(true);
   setMobileDataEnabledMethod.invoke(iConnectivityManager, ON);
} 
```

}

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T05:50:35.267

您可以使用以下代码块在屏幕上为用户提供选项......

```
 public static ShowAvailable() 
 {
   ConnectivityManager connectivityMgr = (ConnectivityManager)
   getSystemService(Context.CONNECTIVITY_SERVICE);
   NetworkInfo[] nwInfos = connectivityMgr.getAllNetworkInfo(); 
       for (NetworkInfo nwInfo : nwInfos)  
          {  
             Log.d(TAG, "Network Type Name: " +
             nwInfo.getTypeName());   Log.d(TAG, "Network available: " +
             nwInfo.isAvailable());   Log.d(TAG, "Network c_or-c: " +
             nwInfo.isConnectedOrConnecting());   Log.d(TAG, "Network connected: "
             + nwInfo.isConnected()); 
          }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-30T22:20:30.447

Continuing the @rIHaN JiTHiN answer, it should be noted that two permissions `android.permission.UPDATE_DEVICE_STATS` and `android.permission.MODIFY_PHONE_STATE` are only granted to system app (as it is initially set in Eclipse or Android Studio). So if someone will be faced with this issue, look at [this solution](https://stackoverflow.com/questions/13801984/permission-is-only-granted-to-system-app).

# uitableview - Xcode 表查看单元格 twitter

> ID：11662979
> 
> 赞同：-1
> 
> 时间：2012-07-26T05:33:04.433
> 
> 标签：uitableview, uitabbarcontroller, xcode4.3

我刚刚下载了 Xcode 4.4 并开始学习应用程序开发。我想制作一个表格视图，其中的行被划分为 Twitter 应用程序中的第二行，如下图所示：http: [//i.stack.imgur.com/oGFkl.jpg](http://i.stack.imgur.com/oGFkl.jpg) 我正在使用情节提要。我在 youtube 上看了一些书，但没有运气。我在做的另一个问题。由于我使用的是故事板，我该如何处理 AppDelegate？我不完全确定它们的用途以及如何将它们与情节提要一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:25:59.640

[https://github.com/vicpenap/PrettyKit](https://github.com/vicpenap/PrettyKit)希望这是您正在寻找的。

# python - 使用支持多种颜色的 wm_iconbitmap 和图像文件类型

> ID：11662987
> 
> 赞同：3
> 
> 时间：2012-07-26T05:33:48.350
> 
> 标签：python, image, icons, tkinter, imageicon

我使用 file.xbm 为我的程序创建了一个图标。我意识到这只是一张黑白图像。有没有办法在linux中有一个彩色的（即两种以上的颜色）？

```
from Tkinter import * 

root = Tk() 
root.title("My Window")
bitmap = PhotoImage(file="tv.gif")
b=Button(root,image=bitmap).pack()

root.wm_iconbitmap('@/home/brandon/Show Tracker/tv.xbm')

root.iconbitmap('@/home/brandon/Show Tracker/tv.xbm')

root.mainloop() 
```

# android - 如何将所选图像保留在视图中

> ID：11662994
> 
> 赞同：0
> 
> 时间：2012-07-26T05:34:33.233
> 
> 标签：android

我在这里有一个图像选择代码，我想为我的 imgview 选择 3 个或更多图像，但我的代码只显示我选择的图像，当我选择另一个图像时，我的 imgview 会根据我的选择而改变。这是我的代码，我希望有人可以帮助我。提前致谢。

```
public class BodyPartsGallery extends Activity {

    private Gallery gallery;
    private ImageView imgView;

    private Integer[] Imgid = {
            R.drawable.abdomen, R.drawable.bladder, R.drawable.kidney,      R.drawable.liver, R.drawable.lungs, R.drawable.stomach, 
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        if(Imgid[0] == (Imgid[0])){

        imgView = (ImageView)findViewById(R.id.ImageView01);

        imgView.setImageResource(Imgid[0]);
        }
        else

            imgView = (ImageView)findViewById(R.id.ImageView02);

        imgView.setImageResource(Imgid[0]);

         gallery = (Gallery) findViewById(R.id.examplegallery);
         gallery.setAdapter(new AddImgAdp(this));

         gallery.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView parent, View v, int position, long id) {
                imgView.setImageResource(Imgid[position]); 
            }
        });

    }

    public class AddImgAdp extends BaseAdapter {
        int GalItemBg;
        private Context cont;

        public AddImgAdp(Context c) {
            cont = c;
            TypedArray typArray = obtainStyledAttributes(R.styleable.GalleryTheme);
            GalItemBg = typArray.getResourceId(R.styleable.GalleryTheme_android_galleryItemBackground, 0);
            typArray.recycle();
        }

        public int getCount() {
            return Imgid.length;
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            ImageView imgView = new ImageView(cont);

            imgView.setImageResource(Imgid[position]);
            imgView.setLayoutParams(new Gallery.LayoutParams(80, 70));
            imgView.setScaleType(ImageView.ScaleType.FIT_XY);
            imgView.setBackgroundResource(GalItemBg);

            return imgView;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:50:10.357

[根据从先前活动中选择的 Gridview 显示图像](https://stackoverflow.com/questions/6740470/display-image-based-on-gridview-selection-from-previous-activity)

看看这篇文章，不完全是你在看的东西，而是类似的东西。

# php - 在 CodeIgniter 中使用 APC 而不是 session，这是个好方法吗？

> ID：11662995
> 
> 赞同：0
> 
> 时间：2012-07-26T05:34:43.203
> 
> 标签：php, codeigniter, session, apc

我正在通过 CodeIgniter 开发高流量网站，由于安全性，会话存储在数据库中。

使用 apc 而不是 session 来存储登录用户和其他安全信息是一种好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:48:19.243

我会说这是一个坏主意，因为 APC 缓存[不在各个 php 进程之间共享](https://bugs.php.net/bug.php?id=57825)（php-fpm 可能是一个例外）。此外，如果不将用户链接到您希望在集群环境中避免的某个前端（损害负载平衡，防止故障转移），他们将无法支持多个集群环境。

查看[memchace 会话处理程序](http://php.net/manual/en/memcached.sessions.php)，它速度很快，并且可以轻松集群，并且可能已经内置到您的 php 安装中。当然，你必须在你的服务器上安装一个 memcached。