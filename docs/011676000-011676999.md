# StackOverflow 问答 11676000-11676999

# javascript - Ruby MySQL 格式化程序

> ID：11676002
> 
> 赞同：0
> 
> 时间：2012-07-26T18:46:05.150
> 
> 标签：javascript, mysql, ruby

我需要“漂亮地打印”一个 mysql 查询。查询非常长且复杂，在代码中执行此操作很麻烦。语言无关紧要，但我正在编写一个网络应用程序，所以 javascript（做客户端）或 ruby​​（服务器端）将是理想的。

有没有图书馆可以为我做这件事？

我想它会做这样的事情......

```
 s = "select foo, bar from baz join bif on baz.id = bif.id where bar = 10"

   f= format( s ) # this would return something like the following.

   f = "SELECT
         foo,
         bar
       FROM baz
       JOIN bif
       ON baz.id = bif.id
       WHERE bar = 10" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T20:41:43.277

如果您确实与语言无关，那么 Perl 模块[`SQL::Beautify`](http://search.cpan.org/~jkramer/SQL-Beautify-0.04/lib/SQL/Beautify.pm)将漂亮地打印您上面的示例查询。

一旦安装（例如通过发出`cpan SQL::Beautify`），您可以使用类似于以下的 oneliner 格式化您的查询字符串：

```
echo "select foo, bar from baz join bif on baz.id = bif.id where bar = 10" |\
perl -ne 'use SQL::Beautify; print SQL::Beautify->new(query => $_)->beautify;' 
```

这将产生：

```
select
    foo,
    bar
from
    baz
    join bif on baz.id = bif.id
where
    bar = 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:15:14.603

我使用appspot 提供的sqlformat Web 服务解决了这个问题。我本可以使用上面的 Sql Beautify 方法编写自己的 Web 服务，但我不想在我们的代码库中引入一种新语言（我们只使用 ruby​​、python 和 javascript）。

```
# Hits the following web-service
# http://sqlformat.appspot.com/format/

# Github page
# https://github.com/andialbrecht/sqlparse/

# Documentation
# http://sqlformat.appspot.com/api/
# data - The SQL statement to format.
# remove_comments - Set to 1 to remove comments.
# keyword_case - How to convert keywords. Allowed values are 'lower', 'upper', 'capitalize'.
# identifier_case - How to convert identifiers. Allowed values are 'lower', 'upper', 'capitalize'.
#  - while this is an option I found it capitalizes table names which breaks the query. BE CAREFUL
# n_indents - An integer indicating the indendation depth.
# right_margin - An integer indicating the maximum line length.
# output_format - Transfer the statement into another programming language. Allowed values are 'python', 'php'

# {
#   :data => query,
#   :format => 'text',
#   :remove_comments => 1,
#   :keyword_case => 'upper',
#   :n_indents => 2,
# }

# or, just pass in a the query as a string and the above params will be the default

def DB::format_sql( params )
    if( params.class == String )
        params = {
            :data => params,
            :format => 'text',
            :remove_comments => 1,
            :keyword_case => 'upper',
            :n_indents => 2,
        }
    end

    res = Net::HTTP.post_form(URI.parse('http://sqlformat.appspot.com/format/'), params )
    return res.body
end 
```

# php - Mysql更新和插入空白字段的问题

> ID：11676004
> 
> 赞同：0
> 
> 时间：2012-07-26T18:46:09.590
> 
> 标签：php, mysql

我正在建立一个允许用户编辑业务信息的网站。有 6 个选择，3 个用于类别，3 个用于子类别。我正在使用隐藏字段来获取每个类别和子类别之前的值，然后如果选择 isset，则插入选择/下拉列表的值。这是我的代码：对于 MYSQL 更新：

```
<? 
include('../config.php'); 
if (isset($_GET['id']) ) { 
   $id = (int) $_GET['id']; 
   if (isset($_POST['submitted'])) { 
       foreach($_POST AS $key => $value) { $_POST[$key] = mysql_real_escape_string($value); }

       if(isset($_REQUEST['cselect1'])){
       $cselect1 = $_REQUEST['cselect1'];

       $query="SELECT cat FROM cat WHERE id='$cselect1'";
       $result = mysql_query ($query);
       while($catselect=mysql_fetch_array($result)){
      $catselect1 = $catselect['cat'];
       }
       } else {
       $catselect1 = $_REQUEST['beforecat1'];
       }
       if(isset($_REQUEST['cselect2'])){
       $cselect2 = $_REQUEST['cselect2'];

       $query="SELECT cat FROM cat WHERE id='$cselect2'";
       $result = mysql_query ($query);
       while($catselect=mysql_fetch_array($result)){
          $catselect2 = $catselect['cat'];
       }
       } else {
       $catselect2 = $_REQUEST['beforecat2'];
       }
       if(isset($_REQUEST['cselect3'])){
       $cselect1 = $_REQUEST['cselect3'];

       $query="SELECT cat FROM cat WHERE id='$cselect3'";
       $result = mysql_query ($query);
       while($catselect=mysql_fetch_array($result)){
       $catselect1 = $catselect['cat'];
       }
       } else {
       $catselect3 = $_REQUEST['beforecat3'];
       }

   $sql = "UPDATE `company` SET  `name` =  '{$_POST['name']}' ,  `phone` =  '{$_POST['phone']}' ,  `cat1` =  '$catselect1' ,  `cat2` =  '$catselect2' ,  `cat3` =  '$cselect3' ,  `zipcode` =  '{$_POST['zipcode']}' ,  `city` =  '{$_POST['city']}' ,  `address` =  '{$_POST['address']}' ,  `address2` =  '{$_POST['address2']}' ,  `website` =  '{$_POST['website']}' ,  `product1` =  '{$_POST['product1']}' ,  `product2` =  '{$_POST['product2']}' ,  `product3` =  '{$_POST['product3']}' ,  `product4` =  '{$_POST['product4']}' ,  `product5` =  '{$_POST['product5']}' ,  `product6` =  '{$_POST['product6']}' ,  `product7` =  '{$_POST['product7']}' ,  `subcat1` =  '{$_POST['sselect1']}' ,  `subcat2` =  '{$_POST['sselect2']}' ,  `subcat3` =  '{$_POST['sselect3']}'   WHERE `id` = '$id' "; 
   mysql_query($sql) or die(mysql_error());
   $sql = "UPDATE `company_secondary` SET  `company_description` =  '{$_POST['description']}' ,  `since` =  '{$_POST['since']}' ,  `smoking` =  '{$_POST['select3']}' ,  `delivery` =  '{$_POST['select5']}' ,  `alcohol` =  '{$_POST['select6']}' ,  `kids` =  '{$_POST['select1']}' ,  `wheelchair` =  '{$_POST['select2']}' ,  `twitter` =  '{$_POST['twitter']}' ,  `facebook` =  '{$_POST['facebook']}' ,  `youtube` =  '{$_POST['youtube']}' ,  `premium` =  '{$_POST['premium']}' ,  `creditcards` =  '{$_POST['select4']}' ,  `outdoor` =  '{$_POST['select7']}' ,  `featured` =  '{$_POST['featured']}' ,  `shortdesc` =  '{$_POST['shortdesc']}' WHERE company_id = '$id' "; 
   mysql_query($sql) or die(mysql_error());
   echo "Edited Row<br/>";
   echo "<a href='allbiz.php'>Back To Listing</a>"; 
  } 

  $row = mysql_fetch_array ( mysql_query("SELECT * FROM `company` WHERE `id` = '$id' "));

?> 
```

这是具有隐藏输入的表单（仅发布了其中的一部分，如果需要可以发布更多！）

```
<form action='' method='POST'> 
    <p><b>Name:</b><br /><input type='text' name='name' value='<?= $row['name'] ?>' /> 
    <p><b>Phone:</b><br /><input type='text' name='phone' value='<?= stripslashes($row['phone']) ?>' />
    <?php
        $cat1 = stripslashes($row['cat1']);
        $cat2 = stripslashes($row['cat2']);
        $cat3 = stripslashes($row['cat3']);
        $subcat1 = stripslashes($row['subcat1']);
        $subcat2 = stripslashes($row['subcat2']);
        $subcat3 = stripslashes($row['subcat3']);
    ?>
    <input type='hidden' value='<?php echo $cat1;?> name='beforecat1'/>
    <input type='hidden' value='<?php echo $cat2;?> name='beforecat2'/>
    <input type='hidden' value='<?php echo $cat3;?> name='beforecat3'/>
    <input type='hidden' value='<?php echo $subcat1;?> name='beforesubcat1'/>
    <input type='hidden' value='<?php echo $subcat2;?> name='beforesubcat2'/>
    <input type='hidden' value='<?php echo $subcat3;?> name='beforesubcat3'/>
    <p><b>Cat1:</b><br />
   <?php
       $query="SELECT * FROM cat";
       $result = mysql_query ($query);
       echo"<select name='cselect1' id='cat1'><option value='0'>Please Select A Category</option>";
       // printing the list box select command
       while($catinfo=mysql_fetch_array($result)){//Array or records stored in $nt
            echo "<option value=\"".htmlspecialchars($catinfo['number'])."\">".$catinfo['cat']."</option>";

       }
       echo"</select>";
   ?>
   <?php
       $query="SELECT * FROM subcat";
       $result = mysql_query ($query);
   echo"<select name='sselect1' id='subcat1'><option value=''>Sub Category</option>";
   echo $subcat1;
   echo"'>$sucat1</option>";
       // printing the list box select command
       while($catinfo=mysql_fetch_array($result)){//Array or records stored in $nt
           echo "<option value='".htmlspecialchars($catinfo['subcat'])."' class='".$catinfo['catnumber']."'>".$catinfo['subcat']."</option>";
       }

       echo"</select>";
  ?>

  <p><b>Cat2:</b><br />
  <?php
      $query="SELECT * FROM cat";
      $result = mysql_query ($query);
  echo"<select name='cselect2' id='cat2'><option value='0'>Please Select A Category</option>";
      // printing the list box select command
      while($catinfo=mysql_fetch_array($result)){//Array or records stored in $nt
          echo "<option value=\"".htmlspecialchars($catinfo['number'])."\">".$catinfo['cat']."</option>";

      }
     echo"</select>";
   ?>
   <?php
     $query="SELECT * FROM subcat";
     $result = mysql_query ($query);
 echo"<select name='sselect2' id='subcat2'><option value=''>Sub Category</option>";
 echo $subcat1;
 echo"'>$sucat1</option>";
     // printing the list box select command
     while($catinfo=mysql_fetch_array($result)){//Array or records stored in $nt
         echo "<option value='".htmlspecialchars($catinfo['subcat'])."' class='".$catinfo['catnumber']."'>".$catinfo['subcat']."</option>";
     }

     echo"</select>";
  ?>
  <p><b>Cat3:</b><br />
  <?php
     $query="SELECT * FROM cat";
     $result = mysql_query ($query);
 echo"<select name='cselect3' id='cat3'><option value='0'>Please Select A Category</option>";
     // printing the list box select command
     while($catinfo=mysql_fetch_array($result)){//Array or records stored in $nt
         echo "<option value=\"".htmlspecialchars($catinfo['number'])."\">".$catinfo['cat']."</option>";

     }
     echo"</select>";
  ?>
  <?php
     $query="SELECT * FROM subcat";
     $result = mysql_query ($query);
 echo"<select name='sselect3' id='subcat3'><option value=''>Sub Category</option>";
     // printing the list box select command
     while($catinfo=mysql_fetch_array($result)){//Array or records stored in $nt
     echo "<option value='".htmlspecialchars($catinfo['subcat'])."' class='".$catinfo['catnumber']."'>".$catinfo['subcat']."</option>";
     }

     echo"</select>";
  ?> 
```

我的希望是，如果用户更改了 Cat 和 Subcat 选择/下拉菜单，那么它将在 mysql 查询中更新。否则，如果它们保持不变，那么从数据库中选择的隐藏输入将像以前一样在 mysql 表中更新。但是有些东西不起作用，当您提交表单而不触摸选择/下拉菜单时，猫和子猫就会被清除干净。我该如何解决？

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:17:27.093

我认为为您的表单寻找客户端解决方案，例如 Jquery 将解决您的问题。

# mysql - 省略 SQL 中的某些记录

> ID：11676006
> 
> 赞同：1
> 
> 时间：2012-07-26T18:46:18.957
> 
> 标签：mysql, sql

我有一个如下表（记录）。

```
ID           Status
AA124         Pass
AA125         Pass
Z_AA134       Fail
Z_AA135       Pass
P4235         Fail 
```

我想隐藏所有以 Z_ 开头的记录，但不隐藏以 Z_ 开头且状态为 Fail 的记录并显示其他记录。

因此我想选择

```
ID           Status
AA124         Pass
AA125         Pass
Z_AA134       Fail
P4235         Fail 
```

从上表。

我的选择查询只产生 Z_ 而不是其他的（显然）

```
Select * from table where ID like 'Z_%' and status = 'Fail' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T18:47:37.033

```
select  *
from    YourTable
where   ID not like 'Z|_%' escape '|' or Status = 'Fail' 
```

[SQL Fiddle 的工作示例。](http://sqlfiddle.com/#!3/cef24/1/0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T18:51:44.707

你并不总是需要使用like，所以我想提供：

```
select *
from t
where status = 'Fail' or left(id, 2) <> 'Z_' 
```

# macos - 如何从终端打开一个新的 Mac OS X 终端并将其放在同一目录中？（雪豹）

> ID：11676007
> 
> 赞同：25
> 
> 时间：2012-07-26T18:46:18.350
> 
> 标签：macos, terminal

我想从当前窗口打开一个新的终端窗口。（就像 command+n 打开一个新的终端窗口，它与我生成它的窗口位于同一目录中）。这一直困扰着我，所以今天我想解决它。一些 bash 脚本，例如

```
start /Applications/Utilities/Terminal.app -D CurrentDirectory 
```

可能会奏效。

此外，我的 Lion 机器会自动执行此操作。我有雪豹，我已经搜索了所有终端偏好和互联网。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-26T19:16:38.763

尝试：

```
open -a Terminal "`pwd`" 
```

这对我有用（在 Lion 上），但如果你可以运行该命令，我相信它应该适用于 Snow Leopard。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T19:54:32.253

在您当前的终端窗口中

> 密码 | pbcopy

Command-N 创建一个新窗口

> cd "`pbpaste`"

如果路径中有空格，双引号是必需的，尽管我没有测试它。

内部单引号是反引号字符。如果您从我的答案中复制并粘贴命令，它应该可以工作。

如果您在终端上花费大量时间，请考虑使用[iTerm 2](http://www.iterm2.com/)。它比 Apple 的 Terminal.app 有了一些很大的改进。

# vb.net - 在执行主窗口窗体应用程序类之前执行其他类

> ID：11676009
> 
> 赞同：1
> 
> 时间：2012-07-26T18:46:28.317
> 
> 标签：vb.net

我得到了一个用 VB 编写的 Windows 窗体应用程序。由于某些原因，我需要在第一类中的表单应用程序之前执行第二类。表单类必须是文件中的第一个类。我不能简单地继承第二个类并调用函数，因为它已经用完了唯一允许的继承。我做了一些研究，发现有一个叫做主程序的东西决定了哪些代码首先执行？它是为任何 Windows 窗体应用程序自动生成的，但我根本找不到该文件。对此有什么想法吗？或我这样做的任何其他方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T08:12:42.390

关注[使用 Sub Main 或表单启动对象启动 VB.NET GUI 应用程序？](https://stackoverflow.com/questions/311346/start-vb-net-gui-app-using-sub-main-or-form-startup-object)以获得更好的选择。

但如果您真的需要从 Main() 开始，请按照以下步骤操作。

1.  打开应用程序设置。
2.  取消选中“启用应用程序框架”
3.  将启动对象设置为“Sub Main”

![在此处输入图像描述](../Images/9be9109e578abf64f8474907d1b3f87b.png)

然后添加一个新的源文件 (.vb) 并在其中包含 Main()

```
 Module MainModule
        Sub Main()
            'Your code here
        End Sub
    End Module 
```

# php - 来自 html 表单的 $_POST 数组

> ID：11676011
> 
> 赞同：23
> 
> 时间：2012-07-26T18:46:30.840
> 
> 标签：php

我正在尝试从多个复选框（id []）发送数据并在 php 中创建一个数组“info”，以允许我为每个值运行一个脚本（但是值的数量可能每次都会改变）但是首先我试图显示每个数组值的内容。我不太确定如何放置我的数组填充行以将所有内容保存到数组中。

HTML

```
echo("<input name='id[]' type='checkbox' value='".$shopnumb."'>"); 
```

我目前有希望的处理代码是 -

```
$info=$_POST['id[]'];
Echo(array_values($info)); 
```

我需要做什么才能使表单复选框中的邮寄发送的内容填充数组信息

任何帮助是极大的赞赏

为澄清而编辑。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-26T18:50:12.300

改变

```
$info=$_POST['id[]']; 
```

到

```
$info=$_POST['id']; 
```

通过添加`[]`到表单字段名称的末尾，PHP 会自动将这些变量转换为数组。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-26T18:54:37.360

你应该得到像 $_POST['id'] 这样的数组。所以你应该能够做到这一点：

```
foreach ($_POST['id'] as $key => $value) {
    echo $value . "<br />";
} 
```

输入名称应该相同：

```
<input name='id[]' type='checkbox' value='1'>
<input name='id[]' type='checkbox' value='2'>
... 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-26T18:52:05.040

```
<input name='id[]' type='checkbox' value='".$shopnumb."\'>
<input name='id[]' type='checkbox' value='".$shopnumb."\'>
<input name='id[]' type='checkbox' value='".$shopnumb."\'>

$id = implode(',',$_POST['id']);
echo $id 
```

你不能回显一个数组，因为它只会打印出 Array. 如果你想打印出一个数组，请使用`print_r`.

```
print_r($_POST['id']); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-26T18:56:15.620

我不知道我是否理解你的问题，但也许：

```
foreach ($_POST as $id=>$value)
    if (strncmp($id,'id[',3) $info[rtrim(ltrim($id,'id['),']')]=$_POST[$id]; 
```

有助于

也就是说，如果您真的想在 html 表单的每个复选框上使用不同的名称（id[key]）（效率不是很高）。如果不是，您可以将它们全部命名为相同的名称，即“id”并迭代数组的（选定）值，例如：`foreach ($_POST['id'] as $key=>$value)...`

# ruby-on-rails - 获取到错误控制器的路由的表单

> ID：11676014
> 
> 赞同：0
> 
> 时间：2012-07-26T18:46:41.893
> 
> 标签：ruby-on-rails, form-for

我有这个表格：

```
 <%= form_for @account, :as => :account, :url => current_account_path, :html => { :class => 'block' } do |f| %>
    <%= f.text_field :name %>

    <%= f.submit 'Update', :class => 'button' %>
  <% end %> 
```

正在从用户加载#edit

但是，我希望它提交给帐户#update。但是，无论我做什么，它总是提交给 users#update。我没有正确指定它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:55:51.947

您正在使用哈希中的键指定要提交到的 URL `:url`：如果这不是正确的路由，则应在此处指定它。所以运行`rake routes`，在该列表中找到正确的 URL，然后将正确的路径助手放在那里，它应该可以工作。

# cocoa - NSUserNotification 未显示操作按钮

> ID：11676017
> 
> 赞同：40
> 
> 时间：2012-07-26T18:46:48.613
> 
> 标签：cocoa, osx-mountain-lion, nsusernotification

我正在使用这段代码：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
    NSUserNotification *notification = [[NSUserNotification alloc] init];
    [notification setTitle: @"Title"];
    [notification setSubtitle: @"Subtitle"];
    [notification setInformativeText: @"Informative Text"];

    [notification setHasActionButton: YES];
    [notification setActionButtonTitle: @"Action Button"];
    [notification setOtherButtonTitle: @"Other Button"];

    [notification setSoundName: NSUserNotificationDefaultSoundName];

    [notification setDeliveryDate: [NSDate dateWithTimeIntervalSinceNow: 10]];
    [[NSUserNotificationCenter defaultUserNotificationCenter] scheduleNotification: notification];
} 
```

我得到，没有失败，

![在此处输入图像描述](../Images/01dc4c9b85d6730df8a6eab70e09b5f8.png)

没有操作按钮或其他按钮。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-17T20:45:43.303

As already stated in a previous answer, the notification type needs to be set to alert for the action button to be shown. If you want to set the default notification style of your app to alert, you need to define the key **NSUserNotificationAlertStyle** in info.plist with the value **alert**.

See Apple's [info.plist keys reference](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW1) for more details:

> **NSUserNotificationAlertStyle** Specifies whether the notification style should be **banners**, **alerts**, or **none**. The default value is banners, which is the recommended style.

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-26T19:29:28.330

这就是答案。

再次感谢 freenode 上的#macdev。

![在此处输入图像描述](../Images/2ab2a98c0103761f00976536a5c14c9b.png)

选择需要是“警报”才能有按钮。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-04-15T15:02:39.870

作为其他答案的相反实例，我们可以使用 iTunes - 即使我们为横幅设置警报样式，它仍然显示“跳过”按钮。所以我继续搜索并找到[了这个 github repo](https://github.com/indragiek/NSUserNotificationPrivate)，其中[Indragie Karunaratne](https://github.com/indragiek)在 NSUserNotification 私有标头中提供了一些有用的附加属性。您可以检查*NSUserNotification_Private.h*文件中的完整属性列表，但实际以横幅通知样式显示按钮的是

```
@property BOOL _showsButtons; // @dynamic _showsButtons; 
```

所以你可以将这一行添加到你的代码中

```
[notification setValue:@YES forKey:@"_showsButtons"]; 
```

并且您的通知操作按钮将独立于警报样式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-22T08:26:04.363

基于 PARTISAN 回复的魔术命令是：

```
notification.set_showsButtons_(True) 
```

查清 :)

# shell - macvim shell (:sh) 只显示字符代码/转义序列

> ID：11676026
> 
> 赞同：4
> 
> 时间：2012-07-26T18:47:23.993
> 
> 标签：shell, vim, zsh, macvim

刚刚用自制软件编译了 MacVim。这是我 :sh 然后输入 ls 时的样子：

[http://cloud.jtmkrueger.com/image/2N0S0T3k3l1J](http://cloud.jtmkrueger.com/image/2N0S0T3k3l1J)

如您所见，它只是字符代码。

**更新**

我运行 oh-my-zsh

尝试安装此处命名的插件：

[http://vim.1045645.n5.nabble.com/ANSI-colors-td1219411.html](http://vim.1045645.n5.nabble.com/ANSI-colors-td1219411.html)

似乎没有帮助

**另一个更新**

删除我的[zsh 语法高亮插件](https://github.com/zsh-users/zsh-syntax-highlighting/)后，它似乎工作正常。仅当它是vim“哑终端”时才使用oh-my-zsh时有没有办法关闭zsh插件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T19:32:56.890

当您`:sh`在 GVim 或 MacVim 中进行操作时，您不会获得真正的终端仿真器。

它是“愚蠢的”，**没有**办法让它理解那些转义序列。你最好习惯它或在 vim-dev 邮件列表上询问（带有令人信服的论据和现成的补丁）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T20:12:01.427

你可能想试试[ConqueTerm 插件](http://www.vim.org/scripts/script.php?script_id=2771)，它尽最大努力解释 ANSI 序列，即使在 MacVim 中也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T19:07:43.233

您看到的实际上不仅仅是字符代码，而是您通常的包含颜色代码的 shell 提示符。您可以通过重新定义`PS1`或删除您修改的定义来禁用它`~/.bashrc`。

如果您想在命令行上使用颜色提示，而不是在 MacVim 中，您可以`~/.bashrc`通过在 vim 中以不同方式设置 PS1 来解决此问题（来自[此处](http://www.linuxquestions.org/questions/linux-general-1/change-ps1-when-shing-in-vim-808913/)）

```
if [ $VIM ]; then
        export PS1='\h:\w\$ '
fi 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-06T08:09:50.207

仅供参考，`:h guioptions` [现支持](https://groups.google.com/forum/#!topic/vim_dev/VcyMs-s1l-M)以下标志：

```
 '!'   External commands are executed in a terminal window.  Without
        this flag the MS-Windows GUI will open a console window to
        execute the command.  The Unix GUI will simulate a dumb
        terminal to list the command output.
        The terminal window will be positioned at the bottom, and grow
        upwards as needed. 
```

设置`:set go+=!`、运行`:sh`并感到惊讶:)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T20:14:46.353

您可以尝试以下操作，而不是 ls，输入`command ls`; 它不应该显示转义码。如果可行，您可以简单地在路径中的文件夹中创建一个新文件，例如 vls，其内容如下：

```
#!/bin/sh
command ls $@ 
```

在那之后`chmod +x vls`，如果它在你的路径中，你应该可以从 vim 中使用它。

# syntax-highlighting - Jekyll 页面在 github 上失败，但使用 --safe 标志在本地成功运行

> ID：11676027
> 
> 赞同：3
> 
> 时间：2012-07-26T18:47:23.957
> 
> 标签：syntax-highlighting, jekyll, liquid, github-pages

我有一个基于 Jekyll 的帖子，该帖子在打开`--safe`标志的情况下在本地运行时可以成功运行。但是，页面构建在 github 页面上失败。我也没有使用任何插件。有人可以帮我弄清楚什么与github不兼容吗？他们的页面不是很有帮助。我已经在遵循他们关于非插件的建议，并`--safe`在提交之前使用本地进行测试。

链接到我的帖子：[https ://raw.github.com/danishm/danishm.github.com/master/_posts/2012-07-23-maintaning-read-more-links-when-moving-from-drupal-to -jekyll.md](https://raw.github.com/danishm/danishm.github.com/master/_posts/2012-07-23-maintaning-read-more-links-when-moving-from-drupal-to-jekyll.md)

会不会是 的用法`{% raw %}`？或者我试图谈论流动模板代码本身并试图用语法突出显示它的事实

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:42:52.527

问题是由于 github 页面使用`liquid 2.2.2`而我的本地安装使用的是`liquig 2.3.0`. 该过滤器`{% raw %}`在 2.3 中是新的，在 2.2.2 中不可用。在 2.2.2 版本中，您需要改为使用`{% literal %}`。

一旦我进行了更改，该页面就在 github 页面上成功构建，现在可以在我的博客上看到。

我还能够通过安装`Jekyll 0.11.0`和在本地重现该问题`liquid 2.2.2`，这是 github 页面使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T07:06:19.570

如果您一开始使用 Jekyll 1.0 版，您可以在 _config.yml 文件中配置 'auto' 选项。但是 Jekyll 的当前版本是 1.2.x，所以这个选项被贬低了。就我而言，它犯了我的错误：在本地成功但在 git 页面中不起作用。解决方案非常简单，只需评论这一行：“auto:true”。一切似乎都很好。更详细地说，您必须注释该行以打开自动重新生成功能，该功能允许服务器自动重新生成 html 页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T07:02:58.837

不确定，但 GitHub 上可能有问题，[他们的状态页面](https://status.github.com/)显示 Pages 存在一些问题（2012 年 7 月 25 日），现在*应该*修复，但我仍然有和你一样的问题，页面无法编译，和本地运行 w/`jekyll --pygments --safe`工作正常。

# css - 防止沿 y 轴滚动的 CSS 样式

> ID：11676033
> 
> 赞同：4
> 
> 时间：2012-07-26T18:47:50.900
> 
> 标签：css

有没有办法在表格中定位一列，使其不沿 x 轴滚动，但沿 y 轴滚动？也许某种方式使用仅影响一个的绝对定位（如电子表格。标题保持在顶部，如绝对定位）？

*注意：我想避免使用 Javascript*

*编辑：我需要让表格溢出来滚动*

好的，我找到了一个按我想要的方式工作的示例： http: [//cross-browser.com/x/examples/xtable.php](http://cross-browser.com/x/examples/xtable.php)，或者这个：[http://www.disconova.com/open_source/files/freezepanes。 htm](http://www.disconova.com/open_source/files/freezepanes.htm)但我不知道他们做了什么来使它工作。

* * *

无论如何，我最终还是使用了 Javascript。

对于固定列，我发现了一个很棒的 Javascript 工具包，称为 DataTables，它有一个名为 FixedColumns 的插件，允许固定列。[链接](http://www.datatables.net/extras/fixedcolumns/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:52:31.187

我很确定你用

```
overflow-y: hidden; 
```

例如，看看这个网站。

[http://www.brunildo.org/test/Overflowxy2.html](http://www.brunildo.org/test/Overflowxy2.html)

在下面的示例中，我们可以在表中创建一个表，这不是最简洁的想法，但它应该可以工作。

```
<TABLE BORDER="2" CELLPADDING="5" CELLSPACING="5">
<TD>
<div style="width:325px; height:48px; overflow-y:scroll;">
<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="3">
           <TD>inside the first one<br />
           we can add text and enable<br />
           overflow-y for vertical<br />
           scrolling.</TD>
</TABLE>
</div>
</TD>
<TD> This is a different table. You can edit this to fit your needs.</TD>
</TABLE> 
```

**注意：**前往 w3schools 即时试用，这样您就可以对其进行测试并从中学习 ;) - [http://www.w3schools.com/cssref/css3_pr_overflow-y.asp](http://www.w3schools.com/cssref/css3_pr_overflow-y.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:12:08.600

如果你想用表格来做，你必须做这样的事情

```
<table>
    <tr><td>col1 name</td><td>col2 name</td></tr>
</table>
<div>
    <table>
        <tr><td>col1 row1 data</td><td>col2 row1 data</td></tr>
        <tr><td>col1 row2 data</td><td>col2 row2 data</td></tr>
        <tr><td>col1 row3 data</td><td>col2 row3 data</td></tr>
    </table>
</div> 
```

然后您需要设置适当的样式，确保标题中每个单元格的宽度与您为第二个表格中的每列设置的宽度相同，这将使您的标题和数据表对齐。使 div 可滚动，这样表格的数据部分将滚动，而标题部分保持静态。

您也可以对行标题做类似的事情，方法是在数据表的左侧放置一个表格，并确保将列标题表适当地向右偏移。

我不会写出所有的 css，因为我相信你可以弄清楚这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:56:43.543

您可以将表格包装在具有固定宽度的容器中并设置它的溢出属性。

```
<div id="foo">
    <table>
      <tr>
        <td>a</td><td>b</td><td>c</td><td>d</td>
      </tr>
      <tr>
        <td>a</td><td>b</td><td>c</td><td>d</td>
      </tr>
      <tr>
        <td>a</td><td>b</td><td>c</td><td>d</td>
      </tr>
    </table>
</div> 
```

CSS

```
#foo {
  width: 100px;
  overflow: auto;
} 
```

您的表格显然需要按宽度显示数据。添加更多行不会导致它滚动，除非您也指定容器的高度。

[演示](http://jsbin.com/iyuxoj)

# java - 使用 SHA1 的 Java

> ID：11676035
> 
> 赞同：0
> 
> 时间：2012-07-26T18:48:05.600
> 
> 标签：java, encryption, cryptography, sha1

我尝试实现一个 SHA1 解码器，但我在互联网上找不到有用的东西。谁能帮我找到有关如何实现 SHA1 解密的信息。我想将加密数据转换为字符串。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T18:49:00.267

> 我尝试实现一个 SHA1 解码器，但我在互联网上找不到有用的东西。

[SHA-1](http://en.wikipedia.org/wiki/SHA-1)是一个[*散列函数*](http://en.wikipedia.org/wiki/Cryptographic_hash_function)。这是单向的：你对数据进行散列，然后得到一个散列。如果你散列相同的数据，你会得到散列；如果你散列不同的数据，你将“几乎肯定”得到不同的散列。

如果你可以“解密”它，它就不会做它的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:55:11.760

如果您弄清楚如何破解 sha1 道具给您。我认为政府可能能够做到，但你很难找到一个公共图书馆，它有一个不需要大量资源来破解的智能算法。

[他们声称他们可以破解并解密它，我怀疑它是否适用](http://www.md5decrypter.co.uk/sha1-decrypt.aspx) [于另一个声称他们可以解密它的来源，我怀疑他们的代码是公开可用的](http://crackstation.net/)

您尝试解密它是否有特定原因，也许您的设计存在缺陷或解决问题的其他方法？

[这是一个关于sha1](http://johans.livejournal.com/3834.html)进程的简洁对话

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:58:56.643

哈希函数被设计为单向的。所以你不能简单地从输出中计算输入。这样做称为前映像攻击。如果消息本身无法猜测，那么这样的攻击需要大约 2^159 次尝试，这是不可行的。

反转 SHA-1 的最佳方法是猜测输入。对于典型的用户密码，这种攻击经常会成功，因为密码不够复杂。例如，典型的 GPU 将能够每秒尝试 >100mio 密码。

这就是我们不使用普通 SHA-1 进行密码散列的原因。我们故意使用慢速方案，例如具有足够工作因子的 PBKDF2、bcrypt 或 scrypt。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T19:06:13.867

如果您需要找到 SHA1 哈希背后的密码，请将 Hash 放在 google 上。如果密码是常见的，并且哈希不是“SALTED”，那么您就有机会获得密码。

其他阅读： [https ://en.wikipedia.org/wiki/Rainbow_table](https://en.wikipedia.org/wiki/Rainbow_table)

# xml - vim：保存文件时停止 xml 验证

> ID：11676037
> 
> 赞同：2
> 
> 时间：2012-07-26T18:48:17.637
> 
> 标签：xml, vim, dtd

每次我在 vim 中保存一个 xml 文件（通常是一个 maven pom 文件）时，它都会报告这个错误：

```
(1 of 1) error: Validation failed: no DTD found !
Press ENTER or type command to continue 
```

这很烦人。我想告诉 vim 在保存时停止验证 xml 文件，但我对其他解决方案持开放态度。该错误似乎来自 xmllint，但摆弄 xmllint.vim 文件没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:55:02.930

原来是进行验证的 eclim 插件。

# ruby - 如何使用 Selenium 在 Firefox 中处理安全警报

> ID：11676049
> 
> 赞同：3
> 
> 时间：2012-07-26T18:48:42.373
> 
> 标签：ruby, firefox, selenium, selenium-webdriver

我正在使用 selenium-webdriver 和 ruby​​ 来编写自动化测试。

Chrome 和 chromedriver 二进制文件工作得非常好，但我遇到了与浏览器配置相关的 Firefox 问题，这导致我的测试失败，而 Chrome 却通过了。

在 Firefox 中执行测试时，有时我会收到一条带有以下消息的警报：

> 尽管此页面已加密，但您输入的信息将通过未加密的连接发送，并且很容易被第三方读取

它破坏了执行。有没有办法在最近的 Firefox 版本（10+）中禁用此警告或使用 Selenium 处理此行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:07:39.720

在为此寻找解决方案的过程中，我想我可能在 Capybara (v1.1.2) 中发现了一个错误。

我设法使用以下方法解决了这个问题，而不是使用`click`from capybara （这不允许我捕获异常），我开始使用`click`selenium-webdriver 中的方法。

似乎当 Firefox 触发此警报框时，带有消息的字符串

> 尽管此页面已加密，但您输入的信息将通过未加密的连接发送，并且很容易被第三方读取

作为 的结果返回`object.native.click`，否则返回字符串

> 行

被退回。

```
# Define the click method in ruby and call it when you're executing a 'click'

  # Public: Click the object.
  #
  # object - Capybara::Node::Element object to click.
  def click object
    return_string = object.native.click
    check_firefox_alertbox if return_string == "ok"
  end

  def check_firefox_alertbox
    if @current_browser == :firefox 
     @session.driver.browser.switch_to.alert.accept
    end
  rescue Exception => e
    puts e
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:24:29.800

这是你可以做的。输入`about:config`火狐。您将看到许多选项（一旦您通过警告消息）。

你必须寻找**security.warn_leaving_secure; 和 security.warn_leaving_insecure**。让他们两个都是假的。你会很高兴去的。

请注意：这仅适用于您已对其进行修改的 FF 实例，因此您需要使用 firefox 配置文件来启动此实例。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T08:45:08.530

实际上，这意味着要发表评论，但我需要超过 50 才能发表评论。我想“破坏”执行是指 Ruby 脚本的执行，对吗？火狐会发生什么？需要点击继续吗？如果是这种情况，您可以通过在 BEGIN 和 RESCUE 子句之间插入敏感代码（中断的地方）后捕获 Ruby 错误来即兴创作。像这样的东西..

```
 BEGIN
   .
   .
  Code that is giving you a headache
   .
   .
  RESCUE
   .
  Capture the exception and give Ruby a chance to continue the script normally.
   .
   .
  END 
```

或者，如果您不喜欢上述解决方案，您可以转到 Firefox，然后在地址框中输入**about:config**。**按“ security.warn** ”过滤并将您在那里看到的所有布尔变量设置为false。好摆脱，手指交叉;）

# javascript - javascript Object.assign() 功能

> ID：11676055
> 
> 赞同：2
> 
> 时间：2012-07-26T18:49:19.573
> 
> 标签：javascript, object, pointers, variable-assignment, assign

我想从该函数的范围内直接更新函数参数引用的对象。一个例子：

```
var thisObj = { "val" : "original value" }; 
function modFunc(objRef) {
    objRef = { "val" : "modified" };
    console.log(objRef);  // { "val" : "modified" }
}
console.log(thisObj);  // { "val" : "original value" }; 
```

我理解为什么会发生这种情况，并且我意识到我本可以使用

```
 objRef.val = "modified"; 
```

在 modFunc 中执行修改。不过，由于我的项目特定的原因，我希望能够完成类似的事情：

```
function modFunc(objRef) {
    objRef.self = { "val" : "modified" };  // Of course this will not work, 
    // but is there an Object property or method that allows one to access 
    // the actual memory pointer being referenced by the variable?
} 
```

我可以指定我想直接修改 thisObj 以引用我在 modFunc 中实例化的新对象。这可能吗？我知道我可以使用 Object.assign() 之类的工具来执行此操作，但它不受普遍支持，或者我可以在导入库时使用诸如 bind() 之类的库工具，但似乎可能有一些本机语法可以让我做到这一点，而我只是找不到它？..

我花了一些时间寻找，否则我尽量不问这样的问题。我也知道还有其他与此类似的帖子，但与我所要求的完全不一样，而且我在这里没有能够直接回复帖子等的“声誉”，所以我没有看到一个简单的集中讨论的方式。无论如何，感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:51:31.473

本质上，您要求的是**按引用调用**机制，或显式创建对变量的引用的能力。在 JavaScript 中，这是不可能的。您可以（正如您所注意到的）传递对*对象*的引用并使用它们来修改对象属性值（甚至添加和删除属性），但这并不完全相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:51:46.817

这将是 javascript 不支持的真正的引用分配。它只支持错误的、被误解的引用赋值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:52:14.057

由于您无法处理引用，因此您可以简单地创建`objRef`一个全局变量，而根本不将其作为 arg 传递。那么你正在更新原始对象。

# c - Damn Vulnerable Linux 中缓冲区溢出的工作示例

> ID：11676056
> 
> 赞同：2
> 
> 时间：2012-07-26T18:49:25.930
> 
> 标签：c, security, buffer-overflow, linux-distro

从头到尾，我在通过缓冲区溢出漏洞利用方面遇到了很多麻烦。我最终得到一个 sigsegv 错误，而不是预期的结果。我刚刚下载了该死的易受攻击的 Linux，我从评论中看到的所有关于它的内容都是“有效地教授 sql 注入......，其他的，缓冲区溢出”。

但是我找不到任何有关 DVL 缓冲区溢出的教程或示例。有谁知道任何工作的？我努力了：

[http://www.damnvulnerablelinux.org/](http://www.damnvulnerablelinux.org/)

从字面上看，该网站上没有任何内容。

我用谷歌搜索了很多，只在评论中找到了 DVL。

如果有人能指出我正确的方向，将不胜感激。特别是如果有人执行了缓冲区溢出示例 iv DVL。

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T18:52:16.520

[http://www.linuxjournal.com/article/2902](http://www.linuxjournal.com/article/2902)

这是一个缓冲区溢出的工作示例，来自《剥削的艺术》这本书，我试过了。顺便说一句很棒的书

# android - android中的for循环停止并重新启动

> ID：11676060
> 
> 赞同：0
> 
> 时间：2012-07-26T18:49:33.263
> 
> 标签：android, for-loop, restart

下面的循环似乎停止了，然后重新启动。它不在另一个循环内。第一个 Log 调用打印 36，因此外部 for 循环应该运行 36 次。不过，循环内部的 Log 调用（用于打印循环运行的次数）会打印“0”到“4”，这意味着循环只运行了 5 次。这个过程是否有任何理由重新开始，以便第一次 Log 调用再次触发，并且循环再次运行仅 5 次？根据我的 Logcat 输出，这发生了两次。

```
ArrayList<RunData_L> rdUP = t.getMyPositiveRunData();
ArrayList<RunData_L> rdDOWN = t.getMyNegativeRunData();
Log.d("rdUP size", rdUP.get(0).getMyMeasurementData().size() + "");
for (int i = 0; i < rdUP.get(i).getMyMeasurementData().size(); i++) {
   Log.d("i", i + "");
   ArrayList<BigDecimal> tempUP = new ArrayList<BigDecimal>(), tempDOWN = new ArrayList<BigDecimal>();
   for(int j = 0; j < rdUP.size(); j++) {
      tempUP.add(rdUP.get(j).getMyMeasurementData().get(i));
      tempDOWN.add(rdDOWN.get(j).getMyMeasurementData().get(i));
   }
   pdUP.add(tempUP);
   pdDOWN.add(tempDOWN);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:57:44.713

I suspect as per my comment that the use of `rdUP.get(j)` in the inner loop is causing the problem.

You first test to see the size of `rdUP.get(i).getMyMeasurementData()` in the outer loop as your bounding condition for the loop and so *i* runs from 0 to the size of `rdUP.get(i).getMyMeasurementData()`.

Your inner loop then says go through each element of *rdUP* and get the *i* th value from `rdUP.get(j).getMyMeasurementData()`. How do you know that the *j* th *rdUP* has enough elements to satisfy your `get(i)` ?

# c++ - Qt 应用程序在从 QtCreator 启动时找到库，但不是从命令行启动

> ID：11676062
> 
> 赞同：2
> 
> 时间：2012-07-26T18:49:35.413
> 
> 标签：c++, qt, shared-libraries, qt-creator

我需要在我在项目目录中创建的文件夹（'shared'）中发布一个带有共享库（Ubuntu）的产品——即*不在*`/usr/lib`,等中的共享库`/usr/local/lib`。为此我已经完成了这个在`.pro`文件中，即

```
LIBS += -Lshared/gsl -lgsl -lgsl_cblas 
```

注意可执行文件与“共享”文件夹位于同一目录中。当我从 QtCreator 以调试模式启动程序时，一切正常。此外，如果我删除或重命名“共享”中的库，程序将无法启动，而且我已经验证该应用程序在其他任何地方都找不到这些库。但是当我从命令行启动时，我得到

> 加载共享库时出错：libgslcblas.so.0：无法打开共享对象文件：没有这样的文件或目录

这是怎么回事？

**编辑**：该解决方案是下面 lionbest 的变体，如评论中所述。出于某种原因，事实证明，在我的平台上`qmake`/`QMAKE_FLAGS`只允许链接器选项的特定格式，而不是您在谷歌上搜索人们使用过的其他实例的那种格式`QMAKE_FLAGS`。即，

```
QMAKE_FLAGS += "-Wl,-rpath,\'\$$ORIGIN/shared/gsl\'"
QMAKE_LFLAGS_RPATH= 
```

具体来说，问题在于解析器（或链接器）不会接受`-rpath=...`，尽管这似乎对其他人有用。Ubuntu 12.04、gcc 4.6.3、Qt 4.8.0、QtCreator 2.4.1“基于 Qt 4.7.4”。希望这次经历可以拯救其他人同样的挫败感。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T19:48:54.120

使用环境变量启动程序`LD_LIBRARY_PATH=shared/gsl`或将 RPATH 添加到链接器设置：

```
LIBS += -Wl,-rpath=shared/gsl 
```

如果您想为您的应用程序创建快捷方式，大多数发行版（基于 Gnome、KDE、LXDE 和 XFCE）都使用 .desktop 文件。QtCreator 可能为您生成了一个。您需要编辑或生成它，并在安装过程中放入 $HOME/.local/applications 或 /usr/share/applications/。在桌面文件中，您可以添加环境变量和起始目录，如下所示：

```
Exec=/usr/bin/env LD_LIBRARY_PATH=/<path_to_libs>/ /<path>/app -extra_options 
```

如果您需要在特定目录中运行您的应用程序，请添加以下行：

```
Path=/<path_to_your_application_working_dir> 
```

您可以在路径中使用 ${}。

# iphone - 代码签名中缺少 iphone 分发标识

> ID：11676063
> 
> 赞同：2
> 
> 时间：2012-07-26T18:49:36.423
> 
> 标签：iphone, code-signing, identity

代码签名中缺少 iphone 分发标识，但在配置文件下的 iOS 开发中心具有两个证书。

现在让 iPhone 分发标识出现在代码签名中。

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:53:33.827

转到您的目标设置，代码符号部分，然后选择分发配置文件。 ![在此处输入图像描述](../Images/b67b31d24d6a8682c61033b46c0e6873.png)

# ssis - SSIS将MSMQ消息发送到远程服务器专用队列

> ID：11676065
> 
> 赞同：1
> 
> 时间：2012-07-26T18:49:51.710
> 
> 标签：ssis, msmq, nservicebus

我是 SSIS 的新手。我正在尝试将 MSMQ 文本消息发送到***远程专用***MSMQ 队列。

我有以下问题

1.  MSMQ 连接管理器中远程专用队列的路径应该是什么？

    1.  我尝试使用`XYZ\private$\remoteprivatequeue`其中*XYZ*是远程服务器的机器名称，而“ *remoteprivatequeue* ”是队列的名称。
2.  有可能是远程服务器MSMQ队列上的权限不正确，如何判断确实是权限问题

3.  私有队列是由 NServiceBus 创建的（因此问题的 NServiceBus 标记），这是否会以任何方式影响队列。当我去时，我在本地和远程服务器上都收到以下错误

> 计算机管理 -> 服务和应用程序 -> 消息队列
> ->（右键单击）属性
> -> 安全选项卡

错误 ：

> 无法获取安全描述符。
> 错误：在工作组模式下安装的消息队列不支持此操作

我尝试将消息发送到本地计算机上的私人队列，*在单击上述属性选项卡时*出现相同的错误，但发布消息**有效**！

我尝试使用此处提到的任务：[http](http://technet.microsoft.com/en-us/library/ms403349.aspx) ://technet.microsoft.com/en-us/library/ms403349.aspx但出现连接错误。

编辑 ：

使用格式测试连接时出现以下错误`XYZ\private$\remoteprivatequeue`

```
Program Location:

   at System.Messaging.MessageQueue.ResolveFormatNameFromQueuePath(String queuePath, Boolean throwException)
   at System.Messaging.MessageQueue.Exists(String path)
   at Microsoft.DataTransformationServices.Design.MsmqConnectionManagerForm.buttonTest_Click(Object sender, EventArgs e) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:31:26.027

与这些队列交谈时，您需要包含格式名称：

```
FormatName:DIRECT=TCP: IPAddress\QueueName
FormatName:DIRECT=OS: MachineName\QueueName 
```

# php - 在 Eclipse 中移动文件会破坏程序 - 有什么方法可以解决这个问题？

> ID：11676068
> 
> 赞同：0
> 
> 时间：2012-07-26T18:50:05.153
> 
> 标签：php, eclipse, ide

全部，

我是 Eclipse 的初学者。我目前正在将它用于 PHP 项目。我的项目下开始有很多 PHP 文件，所以我在项目中创建了一个文件夹来重新定位一些文件。但是，这会破坏程序，因为当我移动文件时，调用这些文件的函数不会更新以反映它们的新位置。

有没有办法在 Eclipse 中自动执行此操作？我原以为这将是一个核心功能（但话又说回来，我以前从未使用过 IDE。）

谢谢，

杰拉格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:09:27.817

不，如果不重构代码，你就无法做到这一点。不过，全局查找/替换可以为您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:54:49.717

您可以尝试删除您的 .metadata 目录。（备份后）

```
/YourProjectDirectory/.metadata 
```

并重新启动您的 IDE。

或者最终尝试使用参数“-clean”运行 eclipse

`"C:\ecplipse.exe -clean"`（来自 CMD）

# ios - ios - 在运行模拟器时设置标准用户默认值不会保存数据

> ID：11676070
> 
> 赞同：1
> 
> 时间：2012-07-26T18:50:09.533
> 
> 标签：ios, ios5

我正在使用模拟器，当应用程序开始检查它是​​否第一次打开时，我正在做这样的事情：

然后检查该键/值是否为空，以便此代码仅执行一次：

```
 NSUserDefaults *standardUserDefaults = [NSUserDefaults standardUserDefaults];

    if([standardUserDefaults objectForKey:@"first_time_cookie"] == nil)
    {
        [standardUserDefaults setBool:YES forKey:@"first_time_cookie"];
        [[NSUserDefaults standardUserDefaults] synchronize];
    } 
```

但是每次我运行程序时，它都会再次执行。知道这里出了什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:56:09.293

只是一个猜测：`standardUserDefaults`是零？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:01:39.433

你可以做不同的！

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:NO], @"first_time_cookie"];
[defaults registerDefaults:dict];

if ([defaults boolForKey:@"first_time_cookie"] == NO){
   [defaults setBool:YES forKey:@"first_time_cookie"];
   [defaults synchronize];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:59:11.943

a bool is not an object. This should work

```
if([standardUserDefaults boolForKey:@"first_time_cookie"] == NO)
{
    [standardUserDefaults setBool:YES forKey:@"first_time_cookie"];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T19:07:23.117

尝试使用

```
if ([[NSUserDefaults standardUserDefaults] boolForKey:@"first_time_cookie"] == false) 
```

让我知道它是否有效，

贡浩

# linq - Linq 分配给 List<> 列表绑定

> ID：11676073
> 
> 赞同：1
> 
> 时间：2012-07-26T18:50:21.770
> 
> 标签：linq, entity-framework, list, binding

我在运行时收到此错误：

> 异常详细信息：System.InvalidOperationException：未处理的绑定类型：ListBinding

*   Choice_A、_b、_C 是字符串
*   “选择”是列表

* * *

```
 var qs = (from questions in dc.Survey_Questions
                      where questions.Survey_ID == surveyid                     
                      select new SQuestions
                      {
                          QuestionID = questions.Question_ID,                          
                          Description = questions.Description,
                          Choice_A = questions.Choice_A,  
                          Choice_B = questions.Choice_B,  
                          Choice_C = questions.Choice_C,
                         **Choices =  {questions.Choice_A, questions.Choice_B,
          questions.Choice_C}**
   }).ToList(); 
```

基本上我想知道我如何分配给Choice_A、Choice_B、Choice_C 的List Choices 值。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T19:41:37.103

你可以试试这个。如果你已经有以下两个类

```
public class Question
{
    public int Question_ID { get; set; }
    public int Survey_ID { get; set; }

    public String Description { get; set; }
    public String Choice_A { get; set; }
    public String Choice_B { get; set; }
    public String Choice_C { get; set; }
}

public class SQuestions
{
    public int QuestionID { get; set; }
    public String Description { get; set; }
    public String Choice_A { get; set; }
    public String Choice_B { get; set; }
    public String Choice_C { get; set; }

    public List<String> Choices { get; set; }
} 
```

> 然后 LINQ 查询将是

```
var qs = (from question in dc.Survey_Questions
where question.Survey_ID == surveyid
select new SQuestions
{
   QuestionID = question.Question_ID,
   Description = question.Description,
   Choice_A = question.Choice_A,
   Choice_B = question.Choice_B,
   Choice_C = question.Choice_C,
   Choices = new List<string>(new String[] { question.Choice_A,question.Choice_B, question.Choice_C })
}).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:10:49.123

LINQ to Entities 不支持此绑定语法。不过，您应该能够做到这一点：

```
qs = (from questions in dc.Survey_Questions
                  where questions.Survey_ID == surveyid                     
                  select new SQuestions
                  {
                      QuestionID = questions.Question_ID,                          
                      Description = questions.Description,
                      Choice_A = questions.Choice_A,  
                      Choice_B = questions.Choice_B,  
                      Choice_C = questions.Choice_C,
                     Choices = new List<string> {questions.Choice_A, questions.Choice_B,
      questions.Choice_C}
}).ToList(); 
```

# jquery - 在边界内显示文本

> ID：11676074
> 
> 赞同：1
> 
> 时间：2012-07-26T18:50:23.490
> 
> 标签：jquery, css, tooltip

如何结束一个段落？我想使用工具提示来显示一些东西。但是，如果您查看第一个单元格，则某些内容超出了工具提示的边界。

[http://jsfiddle.net/zhshqzyc/4hN2M/21/](http://jsfiddle.net/zhshqzyc/4hN2M/21/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:52:09.110

将您的更改`line-height`为 not `125px`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:55:07.440

[http://jsfiddle.net/6MCFR/1/](http://jsfiddle.net/6MCFR/1/)

问题是您正在使用`line-height`使文本居中。如果您摆脱这方面并允许工具提示的高度是有机的，那么无论有多少行文本，工具提示都会扩展以适应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:58:48.863

```
#tooltip { 
    position:absolute;
    background: #CCC630;
    color: #AACBA;
    text-align: center;
    border-radius: 14px;
    border: 2px solid red;
    margin-top:30px;

    } 
```

Make this change. I basically removed height and width and let it adjust accordingly. Hope this helps

# java - 在 Spring MVC 中为所有带有附加标头的字体文件提供服务？

> ID：11676075
> 
> 赞同：0
> 
> 时间：2012-07-26T18:50:23.310
> 
> 标签：java, spring, http, spring-mvc, http-headers

我想将以下 HTTP 标头添加到源自 Spring MVC 中对字体文件的请求的所有响应中：

`Access-Control-Allow-Origin: *`

所以，我知道如何设置一个简单的静态请求映射......

`<mvc:resources mapping="/fonts/**" location="/fonts/" />`

但是如何添加必要的标题？我知道我可以实现一个控制器来响应所有`/fonts/`请求并添加标头，但这似乎有点矫枉过正。有没有更简单/更轻量级的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T00:43:39.557

没有必要为此实现一个特殊的控制器。您可以使用扩展的拦截器`HandlerInterceptorAdapter`。

postHandle 方法被传递给`HttpServletResponse`. 您可以在那里设置标题。此拦截器可以配置为应用于特定路径的请求。

[请参阅此处](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-handlermapping-interceptor)的 Spring 文档。

# ruby-on-rails - 如何中止 ActionMailer 请求的传递？

> ID：11676079
> 
> 赞同：0
> 
> 时间：2012-07-26T18:50:38.050
> 
> 标签：ruby-on-rails, actionmailer

我正在运行问答服务。管理员可以做的一件事是将问题标记为离题。当他们这样做时，会向提出问题的人发送一封电子邮件，告诉他们他们的电子邮件偏离主题。

电子邮件通知通过delayed_job 发送：

```
QuestionMailer.delay.notify_asker_of_offtopic_flag question 
```

但是，有时有人可能会不小心将问题标记为离题或改变主意。为了避免向最初询问它的人发送不正确的通知，我想创建一个短暂的延迟，并在邮件请求运行时评估问题是否仍然是题外话：

*延迟致电邮寄者：*

```
QuestionMailer.delay(run_at: Time.now + 3.minutes).notify_asker_of_offtopic_flag(question) 
```

*邮寄者：*

```
class QuestionMailer
  ...
  def notify_asker_of_offtopic_flag question
     if question.offtopic?
       # do mailing
     end
  end
end 
```

不幸的是，这并不是那么简单，因为该`if`块只会导致一个错误，然后导致 delay_job 一次又一次地重试该作业。

我现在正在尝试一些非常迂回的方法来达到同样的目的，但我真的很想找到一些方法来中止`QuestionMailer`操作而不触发错误。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:24:39.103

然后不要延迟邮寄。也许在您的 Question 类中延迟另一个类方法？传递问题的 id 并在该延迟方法中检查问题是否仍然是题外话，如果是，则同步发送电子邮件。

本质上，您的 notify_asker_of_offtopic_flag 可以移动到您的问题模型，然后邮件是同步的（我相信您会重命名您的方法）。

关于通过在核心的邮件操作本身中将 perform_deliveries 设置为 false 来防止传递的讨论正在进行，但我不是 100% 会在哪里或如何结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T11:20:12.167

@Aditya 的回答基本上是正确的，但是我想将我的方法保留在 Mailer 对象上以保持整洁。这需要一些额外的技巧。

**在可以延迟的邮件程序中创建一个新的 Class 方法**

尝试取消实例 Mailer 方法的问题在于它固有地触发渲染和其他阻止该方法被中止的事情。但是，我仍然想将我所有的 Mailer 逻辑放在一起。

我这样做的方法是使用类方法而不是实例方法。这避免了在实例上调用方法时出现的所有钩子，`ActionMailer`但仍然允许我保持代码整洁和统一

```
class QuestionMailer
  ...
  def notify_asker_of_offtopic_flag question
    ...
  end

  def self.notify_asker_of_offtopic_flag question_if question
    if question.offtopic?
      QuestionMailer.notify_asker_of_offtopic_flag question
    end
  end
end 
```

**NB 修复使用延迟作业**

除了处理`delayed_job`.

处理 Mailer 时，delayed_job 将始终调用`.deliver`返回的对象以传递邮件。当我们返回一个邮件对象时这很好，但在这种情况下我们返回 nil。`delayed_job`因此试图打电话`.deliver`，`nil` 一切都失败了。

为了解决这个问题，我们简单地返回一个包含 dupe`.deliver`方法的虚拟邮件对象：

```
class QuestionMailer
  ...
  class DummyMailer
    def deliver
      return true
    end
  end

  def notify_asker_of_offtopic_flag question
    # do mailing stuff
  end

  def self.notify_asker_of_offtopic_flag question_if question
    if question.offtopic?
      QuestionMailer.notify_asker_of_offtopic_flag question
    else
      DummyMailer.new
    end
  end
end 
```

# perl - Hash / Foreach 中的 Perl 变量引用

> ID：11676081
> 
> 赞同：0
> 
> 时间：2012-07-26T18:50:42.347
> 
> 标签：perl, reference

我想更改存储在哈希中的变量，但我一直收到错误消息：
`"Can't use the string ("SCALAR(0x30f558)") as a SCALAR ref while "strict refs" in use at - line 14.`

我的简化代码如下：

```
#!/usr/bin/perl

use strict;
use warnings;

my $num = 1234;
my $a = 5;

my %hash = (\$num => "value");

foreach my $key (keys %{hash}){
    print "Key: $key\n";
    #OPTION1: $a = $$key;
}

my $ref = \$num ;
print "Ref: $ref\n";
#OPTION2: $a = $$ref ;

print $a; 
```

运行此打印：

```
Key: SCALAR(0x30f558)
Ref: SCALAR(0x30f558)
5 
```

表明 $key 和 $ref 都指向同一个变量 - $num
此外，如果 $key 和 $ref 相同，则 OPTION1 和 OPTION2 上的代码相同。

当我取消注释 OPTION2 时，$a 打印为 1234。
但是，当我取消注释 OPTION1 时，我收到上面显示的错误。

问题：如何使用我在 OPTION1 中尝试做的哈希将 $a 更改为 $num？为什么这不能按原样工作？

* * *

参考资料： [http](http://cpansearch.perl.org/src/CHIPS/perl5.004_05/t/pragma/strict-refs)
://cpansearch.perl.org/src/CHIPS/perl5.004_05/t/pragma/strict-refs 我密切关注这段代码：

```
use strict 'refs' ;
my $fred ;
my $b = \$fred ;
my $a = $$b ; 
```

在我引入哈希之前，它没有造成任何错误。

谢谢您的帮助。

* * *

原始代码（不起作用）：

```
#User Defined - here are the defaults
my $a = 122160;
my $b = 122351;
my $c = 'string';
my $d = 15;
my $e = 123528;
#etc.

#Create variable/print statement hash
my %UserVariables = (
\$a =>  "A: (Default: $a): ",
\$b =>  "B: (Default: $b): ",
\$c =>  "C: (Default: $c): ",
\$d =>  "D: (Default: $d): ",
\$e =>  "E: (Default: $e): ",
);

#Allow user to change variables if desired
foreach (keys %UserVariables){
    print $UserVariables{$_};
    chomp (my $temp = <>);
    print "$_\n";
    $$_ = $temp unless ($temp eq '');
    print "$temp\n" unless ($temp eq '');
}; 
```

效率较低但有效的方法：

```
#Alternate Method without loops (not ideal)
my $temp;
print $UserVariables{\$a};
    chomp ($temp = (<>));
    $a= $temp unless ($temp eq '');
print $UserVariables{\$b};
    chomp ($temp = (<>));
    $b= $temp unless ($temp eq '');
print $UserVariables{\$c};
    chomp ($temp = (<>));
    $c= $temp unless ($temp eq '');
print $UserVariables{\$d};
    chomp ($temp = (<>));
    $d= $temp unless ($temp eq '');
print $UserVariables{\$e};
    chomp ($temp = (<>));
    $e= $temp unless ($temp eq ''); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T19:14:25.143

Perl hash keys can only be string. You don't have reference as key, but what your reference automatically stringified to: a verbatim string "SCALAR(0x30f558)" instead. Obviously, string won't work as reference.

You should rethink the way you store data and maybe explain in little more details **what** you want to do instead on focusing on **how**.

In your particular case illustrated by example just use plain hash for those values you want to be overridable:

```
my %config = (
   a => 122160,
   b => 122351,
   c => 'string',
   d => 15,
   e => 123528,
); 
```

...and then overwrite values in this hash.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:31:29.933

> 我想更改存储在哈希中的变量

就像您不能将变量存储在标量中一样，您也不能将变量存储在哈希中。您可以将值（包括对变量的引用）存储在哈希中。（例如`value`代码中的字符串。）

> 显示 $key 和 $ref 都指向同一个变量 - $num

不，它表明 和 的值`$key`具有`$ref`相同的字符串化。

> 但是，当我取消注释 OPTION1 时，我收到上面显示的错误。

哈希表键必须是字符串，就像数组键必须是非负整数一样。

> 我密切关注这段代码：

不，与哈希相同的工作正常。

```
use strict 'refs' ;
my %hash = ( fred => undef );
my $b = \$hash{fred} ;
my $a = $$b ; 
```

我无法提供解决方案，因为您没有说您要做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T12:55:16.070

您在评论中一直说您想修改通过 STDIN 传递的变量，但是不清楚您的意思是什么。您是在传递命令行参数或请求用户输入，还是将另一个程序的输出通过管道传输到您的程序中，或者完全是其他什么？理想的方法会根据您要执行的操作而略有不同。

要读取命令行参数，您可以访问`@ARGV`数组：

```
$foo = $ARGV[0]; #read the first argument 
```

要从 STDIN 中读取一行：

```
print "Enter a number: ";
$foo = <STDIN>; 
```

# extjs4 - ExtJS 4.1 如何更改网格面板标题高度

> ID：11676084
> 
> 赞同：3
> 
> 时间：2012-07-26T18:50:42.630
> 
> 标签：extjs4, gridpanel

我想更改 Ext.grid.Panel 标题高度。

网格面板标题的高度被强制设置为 28px。

1.  没有 sass 设置
2.  面板上的标题配置对我不起作用
3.  配置 < 28px 时，修改网格列的高度似乎有效。28px 似乎是最小值。

这是我到目前为止所拥有的（并且有效），但我不喜欢这个解决方案。

```
Ext.define('Ext.grid.Panel', {
    listeners: {
        beforerender: function (cmp, eOpts) {
            cmp.headerCt.setHeight(25);
        }
    }
}); 
```

此外，列标题似乎也固定为 28px。将标题的高度设置为 25 不会将列标题设置为 25。您还需要在 scss/css 中覆盖它。否则，您的列标题菜单将显示 28px 高度。

```
.x-column-header
{
    height: 25px;
} 
```

**此解决方案不起作用：如果拖动列标题，更改列的索引位置，它将中断 -.-**

推荐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:56:32.140

要设置列标题的高度，必须在它们编译后设置高度。同样，列配置的高度值不能设置高度 < 28，但可以设置 > 28。

我发现在编译后修改高度可以正确设置高度并允许列可拖动（一切正常）。

```
Ext.define('Ext.grid.Panel', {
    listeners: {
        beforerender: function (cmp, eOpts) {
            cmp.columns[0].setHeight(25);
        }
    }
}); 
```

我的解决方案无法使用它，因为我创建了一个动态网格。在网格的动态部分，我使用 GRID.reconfigure(); - 通过销毁在渲染前状态下创建的任何内容。

```
Ext.define('Ext.grid.Panel', {
    listeners: {
        reconfigure: function (cmp, eOpts) {
            cmp.columns[0].setHeight(25);
        }
    }
}); 
```

重新配置功能在重新配置后触发，所以这就是我解决动态网格重新配置的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T14:26:22.677

您还可以为该网格面板使用 sass 子样式并设置“ui”配置：

添加`ui:'custom-height-item'`到您的配置中

```
@include extjs-panel-ui(
    'custom-height-item',
    $ui-header-line-height: 28px,
    $ui-header-padding: 2px;
    ) 
```

# asp.net-mvc - 从数据库格式化 FullCalendar 事件的 JSON 字符串的正确方法是什么

> ID：11676085
> 
> 赞同：0
> 
> 时间：2012-07-26T18:51:00.023
> 
> 标签：asp.net-mvc, fullcalendar

我正在尝试`FullCalendar`在我的 MVC 应用程序中呈现 (1.5.3)，如下所示：

```
$('#calendar').fullCalendar({
    header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month,basicWeek,basicDay'
    },
    titleFormat: { day: '' },
    defaultView: 'month',
    events: "/Schedule/GetCal"
}); 
```

生成的`JSON`字符串`/Schedule/GetCal`如下所示：

```
{id:"5BFAA9C3-9437-49B0-A657-5DA47CDEA409",projectId:"5BFAA9C3-9437-49B0-A657-5DA47CDEA409",title:"Orem City Parking Lot",start:"2012-07-11",end:"",allDay:"true",type:"goal",textColor:"white",backgroundColor:"green",borderColor:"black",crew:""},
{id:"33910A42-C5F0-42FA-AB36-C315BDDAF964",projectId:"33910A42-C5F0-42FA-AB36-C315BDDAF964",title:"Thanksgiving Point - Buster",start:"2012-07-28",end:"",allDay:"true",type:"goal",textColor:"white",backgroundColor:"green",borderColor:"black",crew:""} 
```

它不会在页面上呈现任何事件。但是，当我这样称呼它时：

```
$('#calendar').fullCalendar({
    header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month,basicWeek,basicDay'
    },
    titleFormat: { day: '' },
    defaultView: 'month',
    events: [{id:"5BFAA9C3-9437-49B0-A657-5DA47CDEA409",projectId:"5BFAA9C3-9437-49B0-A657-5DA47CDEA409",title:"Orem City Parking Lot",start:"2012-07-11",end:"",allDay:"true",type:"goal",textColor:"white",backgroundColor:"green",borderColor:"black",crew:""},
            {id:"33910A42-C5F0-42FA-AB36-C315BDDAF964",projectId:"33910A42-C5F0-42FA-AB36-C315BDDAF964",title:"Thanksgiving Point - Buster",start:"2012-07-28",end:"",allDay:"true",type:"goal",textColor:"white",backgroundColor:"green",borderColor:"black",crew:""}
   ]
}); 
```

它按预期工作。我需要更改`JSON`字符串的格式吗？或者，我怎么称呼它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T11:31:29.907

您的`/Schedule/GetCal`脚本需要返回一个事件数组 - 由 JSON 字符串中事件集周围的方括号表示。

目前，您似乎只是返回了一个逗号分隔的事件列表，而这些事件并没有按照您的期望进行解释。

您的输出需要如下所示：

> ["0",{"allDay":"","title":"去上班","id":"821","end":"2011-06-06 14:00:00","start ":"2011-06-06 06:00:00"},"1",{"allDay":"","title":"Party at Toms","id":"822","end": "2011-06-10 21:00:00","开始":"2011-06-10 16:00:00"}]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T18:49:07.117

这篇文章帮助我弄清楚：[ASP.Net MVC、jQuery 和 FullCalendar](http://jrmcconnell.com/2010/07/19/asp-net-mvc-jquery-and-fullcalendar/)

显然在`FullCalendar`1.5.3 中，`asp.net mvc`您需要返回一个`List<>`已转换`.ToArray()`的，然后在`JSON`. 一旦我这样做了，结果就如我预期的那样出现在日历中。

我曾经`alert(data)`在浏览器中看到结果，而不是我在上面发布的字符串

```
{Object},{Object} 
```

# google-apps-script - 电子表格上的工作表副本

> ID：11676086
> 
> 赞同：0
> 
> 时间：2012-07-26T18:51:04.010
> 
> 标签：google-apps-script

我的程序中有一个电子表格“ECO”，其中有几张名为“a”、“b”、“c”、“d”的工作表。当我将工作表“a”复制到新的电子表格“NEWECO”时，就可以了。

```
var g2= ECO.getSheetByName("a")            
    g2.copyTo(NEWECO) 
```

但是当我想复制另一张纸时，它不起作用

例子：

```
var g4= ECO.getSheetByName("c")            
    g4.copyTo(NEWECO) 
```

节目说，（法语）：“Une erreur s'est produite sur le serverur。Nous chargeons actuellement votre feuille de calcul...”

这意味着由于工作表“c”而导致服务器端出现错误，但对于工作表“a”则正常。

那么，问题是来自工作表还是谷歌的内存问题？

太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:46:54.403

如果这两个片段是一个脚本的一部分，则尝试插入 SpreadsheetApp.flush(); 它们之间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-21T15:18:59.250

如果您只是想将一张表的数据复制到另一张表，请尝试以下脚本：

```
function CopyDataToNewFile() {
  var sss = SpreadsheetApp.openById('SOURCE'); // sss = source spreadsheet
  var ss = sss.getSheetByName('SOURCE_SHEET'); // ss = source sheet
  //Get full range of data
  var SRange = ss.getDataRange();
  //get A1 notation identifying the range
  var A1Range = SRange.getA1Notation();
  //get the data values in range
  var SData = SRange.getValues();

  var tss = SpreadsheetApp.openById('TARGET'); // tss = target spreadsheet
  var ts = tss.getSheetByName('TARGET_SHEET'); // ts = target sheet
  //set the target range to the values of the source data
  ts.getRange(A1Range).setValues(SData);

} 
```

`SOURCE`只需将, `SOURCE_SHEET`, `TARGET`, 和替换`TARGET_SHEET`为适合您需要的内容即可。

# asp.net - 服务器上的 ASP.net Web 服务有时无法加载

> ID：11676087
> 
> 赞同：0
> 
> 时间：2012-07-26T18:51:07.550
> 
> 标签：asp.net, web-services

我们的服务器上有一个 ASP.net Web 服务 (.asmx)，我们的一个客户使用它从我们那里获取数据。

他们一直在抱怨时不时出现超时问题。我决定检查我的代码，看看是否有什么可能导致问题。

我使用 Internet Explorer 访问了我们的 .asmx 网址，发现它一直在加载。这是我第二次注意到这种情况发生。我就是无法连接到 .asmx 页面。我没有收到错误消息，只是继续加载。

现在很明显，这会导致他们的客户端程序出现超时错误，因为服务无法访问。知道为什么会发生这种情况吗？

另外，asp.net 错误日志通常存储在服务器的什么地方？？？它与.asmx 在同一目录中吗？这些错误日志是自动生成的还是我必须在我的代码中添加一些东西？

**编辑：忘了提到我的 Web 服务所在的服务器是基于 Linux 的服务器。我不得不使用 MonoDevelop 来打包它。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:06:41.827

查看服务器上的应用程序事件查看器。如果服务级别出现任何错误，您会看到它们发布在那里。超时进程可能很难调试。如果有其他应用程序池正在争夺服务器资源，则此应用程序可能会得到轴。我会首先查看服务器上内存和 cpu 的进程使用情况。如果一切正常，请检查 IIS 并查看您的服务中驻留的其他应用程序。如果那里一切都好，那么我会研究您的代码以寻找长期运行的可能性。

# java - 构造函数中泛型的 Java 类型错误

> ID：11676090
> 
> 赞同：1
> 
> 时间：2012-07-26T18:51:12.527
> 
> 标签：java, generics, constructor, undefined

我有一个关于 Java 泛型的（可能很简单）问题。我有以下课程：

```
public class ValueCollection<Y> implements Collection<Y>
{
    private Set<Entry<?, Y>> entries;

    public ValueCollection(Set<Entry<?, Y>> entries)
    {
        this.entries = entries;
    }
    ...
} 
```

当我这样调用构造函数时：

```
return new ValueCollection<V>(entries); 
```

我收到以下编译器错误：

```
The constructor ValueCollection<V>(Set<Map.Entry<K,V>>) is undefined 
```

如果我把我的班级改成这样：

```
public class ValueCollection<X, Y> implements Collection<Y>
{
    private Set<Entry<X, Y>> entries;

    public ValueCollection(Set<Entry<X, Y>> entries)
    {
        this.entries = entries;
    }
    ...
} 
```

我的构造函数调用这个：

```
return new ValueCollection<K, V>(this.entries()); 
```

编译错误消失了。我只是想知道为什么会这样。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T20:16:41.877

A`Set<Entry<?, V>>`是*一组具有任何键类型和值类型`V`*的条目，或者*是一组具有某些特定但未知的键类型`K`和值类型`V`*的条目。由于后者，编译器拒绝您原来的构造函数调用。

A`Set<? extends Entry<?, V>>`是*一组条目，它们是具有任何键类型和值类型的条目`V`*。这正是您想要的，将您的构造函数参数类型重新定义为`Set<? extends Entry<?, V>>`.

`this.entries = Collections.unmodifiableSet(entries)`您可以使用或将参数分配给您的字段`this.entries = new HashSet<Entry<?, V>>(entries)`。右手边都`Set<Entry<?, V>>`以某种方式生成 a 以使编译器相信它意味着*一组具有任何键类型和值类型的条目`V`*。

# asp.net - 如何使用 SharePoint Web Service Access 发送电子邮件？

> ID：11676091
> 
> 赞同：0
> 
> 时间：2012-07-26T18:51:15.747
> 
> 标签：asp.net, email, sharepoint-2007, wss-3.0

我正在开发一个将位于 SharePoint 网站内的外部 ASP.NET 应用程序。我可以使用 SharePoint 服务发送电子邮件吗？该应用程序将指定电子邮件内容（主题、收件人、发件人和正文）。我只想调用 SharePoint 服务上的一个方法，让它发送电子邮件。

我正在使用 WSS 3.0（不是 MOSS）。这可能吗？如果不是，有哪些可能的替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:10:41.603

您可以使用[SPUtility.SendEmail](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.utilities.sputility.sendemail%28v=office.12%29.aspx)方法发送电子邮件。添加对 SharePoint DLL 的引用，然后您可以使用此方法。这样您将使用 WS 站点的电子邮件配置。

# java - 在 Planner 中将字符串写入文本文件

> ID：11676093
> 
> 赞同：0
> 
> 时间：2012-07-26T18:51:28.113
> 
> 标签：java, string, file, text

** 我是 Java 的初学者，我正在做一个计划者，我需要编写他们事件的日期、时间、名称和描述的字符串，然后稍后找到它并显示有关他们的事件的信息。如何写入文本文件，然后再找到它？谢谢！**

```
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.util.Scanner;
import javax.swing.JOptionPane;
public class Test {

    /**
     * @throws IOException 
     * @param args
     * @throws 
     */
    public static void main(String[] args) throws IOException {
        Scanner input = new Scanner ( System.in );
        String choice;
        String password = null;
        String time = null, name = null, dateview = null, dateedit, description = null, dateadd = null;
        FileWriter ostream;

        JOptionPane.showMessageDialog(null, "Welcome To The Pocket Planner!");
        System.out.println("");
        password = JOptionPane.showInputDialog("Please Enter Your Password");
        while (!password.toUpperCase().equals("PASSWORD"))
        {
            JOptionPane.showMessageDialog(null, "Try Again", "Incorrect Password", JOptionPane.ERROR_MESSAGE);
            password = JOptionPane.showInputDialog("Please Enter Your Password");
        }

        {
            do{
                do{
                    do{

                        choice = JOptionPane.showInputDialog("Type \"View\" To View Your Schedule" + "\n" + "Type \"Edit\" To Edit Your Schedule" + "\n" + "Type \"Add\" To Add To Your Schedule");

                        if (choice.equals("View")){
                            dateview = JOptionPane.showInputDialog("Enter the date you want to view in this format: MM/DD/YY");
                            while(dateadd != null){
                                FileInputStream istream = new FileInputStream("filename.txt");
                                DataInputStream in = new DataInputStream(istream);
                                BufferedReader br = new BufferedReader(new InputStreamReader(in));String strLine;
                                dateadd = br.readLine();
                            if(dateadd.equalsIgnoreCase(dateview)){
                                JOptionPane.showMessageDialog(null, (time + ":" + "\n" + name + " -" + " " + description));
                            }
                            else 
                            {
                                JOptionPane.showMessageDialog(null, "Try Again", "Event Not Found", JOptionPane.WARNING_MESSAGE);
                            }
                            }
                        }
                        else if (choice.equals("Edit")){
                            dateedit = JOptionPane.showInputDialog("Enter the date you want to edit in this format: MM/DD/YY");
                        }
                        else if (choice.equals("Add")) {
                            name = JOptionPane.showInputDialog("Enter the name of the event you want to add.");
                            dateadd = JOptionPane.showInputDialog("Enter the date you want to add in this format: MM/DD/YY");
                            time = JOptionPane.showInputDialog("Enter the time of your event");
                            description = JOptionPane.showInputDialog("Enter the description of your event");

                        }
                        else
                        {
                            JOptionPane.showMessageDialog(null, "Try Again", "Invalid Entry", JOptionPane.ERROR_MESSAGE);   
                        }
                    }while(!choice.toUpperCase().equals("Edit"));
                }while(!choice.toUpperCase().equals("View"));
            }while(!choice.toUpperCase().equals("Add"));

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:03:31.250

您可以将日期、时间、名称等字符串与诸如 $$$ 之类的分隔符连接起来（此分隔符不应出现在名称中，因此请相应地使用一个分隔符）。

然后

```
File file = new File("textfile.txt");
// This is the file in which you want to write all planner entries
output = new BufferedWriter(new FileWriter(file));
output.write(text); 
```

要阅读，请像这样打开文件

```
FileInputStream fstream = new FileInputStream("textfile.txt");
DataInputStream in = new DataInputStream(fstream);
BufferedReader br = new BufferedReader(new InputStreamReader(in));
String strLine;

while ((strLine = br.readLine()) != null)   { // Until file has content, keep reading
String[] temp;
temp = strLine.split("$$$");

//using string.split() with the delimiter to get back all the sub-strings.

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:50:30.167

从长远来看，我建议看看 Java 的 XML 功能

看一眼

*   [http://www.mkyong.com/tutorials/java-xml-tutorials/](http://www.mkyong.com/tutorials/java-xml-tutorials/)
*   [http://java.sun.com/xml/tutorial_intro.html](http://java.sun.com/xml/tutorial_intro.html)

同时，您可能想查看[http://docs.oracle.com/javase/tutorial/essential/io/](http://docs.oracle.com/javase/tutorial/essential/io/)

# php - 如何使用php远程访问Xeround的数据库？是否可以在本地主机上显示？

> ID：11676097
> 
> 赞同：0
> 
> 时间：2012-07-26T18:51:44.223
> 
> 标签：php, mysql, xeround

我是 Php 和 Xeround 的新手。我想远程创建一个数据库，因为我正在使用[Xeround 服务](http://www.xeround.com)，现在我想在我的系统上创建一个 php 文件并想访问在 xeround 上创建的数据库。它的帮助说我们可以使用：

```
<?php
  $con = mysql_pconnect("instance123.db.xeround.com:4567","john","malon");
  if (!$con)
    die('Could not connect: ' . mysql_error());
  mysql_select_db("mydb");

  // rest of the code . . .
?> 
```

我的问题是：

如何从我的电脑访问它？我需要安装什么来运行 php 页面？我要安装 WAMP 吗？但是当我远程访问 PHPMyAdmin for MySQL 时，WAMP 有什么用，或者我只需要安装 Apache Server 吗？或者我该怎么办？我很困惑。

我基本上想通过访问 xeround 的数据库从我的计算机上运行一个查询。我没有网站，因此将使用 localhost 来访问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:17:56.067

要使用 PHP 远程访问 Xeround 上的数据库，您必须首先验证您是否安装了 php-mysql 模块。要在 Linux 中安装它，请运行以下命令：

```
yum install php-mysql 
```

要验证您是否拥有该`php-mysql`模块，您需要准备一个包含`phpinfo.php`以下内容的文件：

```
<?php phpinfo(); 
```

现在，运行

```
php -f phpinfo.php 
```

您可以考虑的另一个选项是从 Xeround UI 访问 phpMyAdmin（然后将到数据库的连接字符串发送到 phpMyAdmin）。

祝你好运 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:29:04.150

你知道你可以在[phpfog](https://phpfog.com/)获得一个帐户，它基本上是相同的云数据库，但包括 php 应用程序托管。如果你是新的，也许这对你来说是一条更好的路线。您还可以将您[的 Xeround](http://www.appfog.com/products/phpfog/add-ons/)作为插件添加到 phpfog。

> 如何从我的电脑访问它？我需要安装什么来运行 php 页面？我要安装 WAMP 吗？

是的，您也可以使用[WAMP](http://www.wampserver.com/en/)。您可以在本地 apache/php 中运行脚本。或者您可以运行 PHPmyadmin（安装 WAMP 后通过 apache/php），这可能更容易。甚至是一些本地软件，如[MySQL Workbench](http://www.mysql.com/products/workbench/)，但对于所有这些，可能需要[GRANT](http://dev.mysql.com/doc/refman/5.1/en/grant.html)访问您的 IP 地址。

您发布的代码直接进入 php 脚本。你知道php吗？

# jquery - 在表单中提交自定义复选框的值

> ID：11676101
> 
> 赞同：1
> 
> 时间：2012-07-26T18:51:52.580
> 
> 标签：jquery, asp.net, html, asp.net-mvc-3

我有一个带有自定义复选框图像的 div。它是一种形式。单击时，我将图像更改为“单击图像”。我还调整了将提交到表单的复选框输入的值。问题是即使“真实”复选框的值出现选中，它总是提交为未选中。

```
 if (fakeCheck.hasClass('btn-palette-checkbox')) {
        fakeCheck.removeClass('btn-palette-checkbox');
        fakeCheck.addClass('btn-palette-checkbox-unchecked');
        $("#realCheck").attr("checked", false);
    }
    else {
        fakeCheck.addClass('btn-palette-checkbox');
        fakeCheck.removeClass('btn-palette-checkbox-unchecked');
        $("#realCheck").attr("checked", true);
    } 
```

编辑：仅供参考，真正的复选框是隐藏的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T18:53:28.507

尝试这样将其标记为已选中：

```
$("#realCheck").attr("checked", "checked"); 
```

像这样取消选中它：

```
$("#realCheck").removeAttr("checked"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T19:09:36.487

来自 jQuery 文档[prop](http://api.jquery.com/prop/)。如果您使用的是 jQuery 1.6+

> 应该使用 .prop() 方法来设置禁用和检查，而不是 .attr() 方法。.val() 方法应该用于获取和设置值。

```
$("#realCheck").prop("checked", true);
$("#realCheck").prop("checked", false); 
```

在此处阅读有关使用 .prop 与使用 .attr 的更多信息 [.prop() 与 .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T18:54:07.333

`Checked`, 像`disabled`, 是二元属性，而不是属性。你需要使用：

```
$("#realCheck").attr("checked", "checked"); 
```

# iphone - 重绘通过类创建的 Rect

> ID：11676102
> 
> 赞同：0
> 
> 时间：2012-07-26T18:51:56.427
> 
> 标签：iphone, objective-c, xcode, ipad

我的应用程序的一个方面是绘制饼图。因此，一旦用户点击一个按钮，我就会启动一个我创建的 pieDrawing 类。

```
mPieClass=[[PieClass alloc]initWithFrame:CGRectMake(10+PosX, 10, 320, 230)]; 
```

然后我将一些数据填充到类变量、半径、颜色、值等（并且类本身创建一些标签），然后将其添加为子视图。

```
[self.view addSubview:mPieClass]; 
```

到目前为止一切都很好，馅饼也很好。现在由于更改了 iPad 方向，我需要重新绘制它并将其放置在不同的位置。

我的问题是我应该怎么做，目前我只是再次调用绘图/创建方法，它会在不同的位置绘制另一个饼图，但我之前的饼图仍在显示。我想如果我打电话

```
 mPieClass=[[PieClass alloc]initWithFrame:CGRectMake(10+PosX, 10, 320, 230)]; 
```

它会使用 PosX 的新值在别处重新绘制它，但它仍然存在旧的饼图。我需要dealloc或其他东西来清除旧馅饼吗？

如果您需要更多详细信息，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:19:23.767

从`UIView`文档中：

> *框架*定义了视图在其父视图坐标系中的原点和尺寸，通常在布局时用于调整视图的大小或位置。

要将视图放置在新位置，请分配新框架：

```
mPieClass.frame = CGRectMake(newX, newY, newWidth, newHeight); 
```

# php - 使用 htaccess 限制访问，但允许从网页访问

> ID：11676111
> 
> 赞同：1
> 
> 时间：2012-07-26T18:52:16.850
> 
> 标签：php, javascript, .htaccess, post, restriction

如何限制使用 .htaccess 文件`Deny from all`但所有 $.post 请求、$.get 请求等的访问。我如何仍然从页面访问文件，但仅通过在浏览器中访问它来撤销直接访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:07:16.523

您可以通过 mod_rewrite 和类似条件使用 HTACCESS 禁用浏览器访问

```
RewriteCond %{HTTP_USER_AGENT} ^.*Firefox/4.*$
RewriteRule . - [R=404,L,NS]

ErrorDocument 404 /error.php?e=404 
```

要访问该页面，您可以使用带有选项的 cURL，例如

```
curl_setopt($ch, CURLOPT_USERAGENT, "allowed_agent"); 
```

# c++ - 添加时不显示 ListView 项

> ID：11676112
> 
> 赞同：-2
> 
> 时间：2012-07-26T18:52:18.690
> 
> 标签：c++, mfc

我想在我的 ListCtrl 中插入一些项目。这是我的代码。我似乎无法在程序中发现错误。不幸的是，并非所有项目都显示在列表中，我不知道为什么会这样。请帮我。

```
 LVITEM lItem;

    lItem.mask=LVIF_TEXT;
    lItem.iItem = 1 + (nColNum - 1) * 3;
    lItem.iSubItem=0;
    lItem.pszText = W2T(L"");
    pDlgSportNews->m_List.InsertItem( 1 + (nColNum-1 ) * 3 , lItem.pszText);

    WCHAR szzText[MAX_PATH];

    lItem.iItem = 1 + (nColNum - 1) * 3;
    lItem.iSubItem = 1;
    lItem.pszText = W2T(m_arData[nColNum - 1].szGameName);
    pDlgSportNews->m_List.SetItemText(1 + (nColNum - 1) * 3 , 1 , lItem.pszText);

    lItem.mask=LVIF_TEXT;
    lItem.iItem = 2 + (nColNum - 1) * 3;
    lItem.iSubItem = 0;
    lItem.pszText = W2T(m_arData[nColNum - 1].szGameTime);
    pDlgSportNews->m_List.InsertItem(2 + + (nColNum - 1) * 3 , lItem.pszText);

    lItem.iItem = 2 + (nColNum - 1) * 3;
    lItem.iSubItem = 1;
    lItem.pszText = W2T(m_arData[nColNum - 1].szA_Team);
    pDlgSportNews->m_List.SetItemText( 2 + (nColNum - 1) * 3 , 1 , lItem.pszText);

    lItem.iItem = 2 + (nColNum - 1) * 3;
    lItem.iSubItem = 2;
    if (m_arData[nColNum - 1].bFT_HDP)
    {
        swprintf(szzText , L"%s   %s" , m_arData[nColNum - 1].szFT_HDP , m_arData[nColNum - 1].szFT_A_HDP);
        lItem.pszText = W2T(szzText);
    }
    else
        lItem.pszText = W2T(m_arData[nColNum - 1].szFT_A_HDP);
    pDlgSportNews->m_List.SetItemText( 2 + (nColNum - 1) * 3 , 2 , lItem.pszText);

    lItem.iItem = 2 + (nColNum - 1) * 3;
    lItem.iSubItem = 3;
    swprintf(szzText , L"%s   %s" , m_arData[nColNum - 1].szFT_UO , m_arData[nColNum - 1].szFT_A_UO);
    lItem.pszText=W2T(szzText);
    pDlgSportNews->m_List.SetItemText( 2 + (nColNum - 1) * 3 , 3 , lItem.pszText);

    lItem.iItem = 2 + (nColNum - 1) * 3;
    lItem.iSubItem = 4;
    lItem.pszText = W2T(m_arData[nColNum - 1].szFT_S_Odd);
    pDlgSportNews->m_List.SetItemText( 2 + (nColNum - 1) * 3 , 4 , lItem.pszText);

    lItem.iItem = 2 + (nColNum - 1) * 3;
    lItem.iSubItem = 5;
    if (m_arData[nColNum - 1].bHT_HDP)
    {
        swprintf(szzText , L"%s   %s" , m_arData[nColNum - 1].szHT_HDP , m_arData[nColNum - 1].szHT_A_HDP);
        lItem.pszText=W2T(szzText);
    }
    else
        lItem.pszText = W2T(m_arData[nColNum - 1].szHT_A_HDP);      
    pDlgSportNews->m_List.SetItemText( 2 + (nColNum - 1) * 3 , 5 , lItem.pszText);

    lItem.iItem = 2 + (nColNum - 1) * 3;
    lItem.iSubItem = 6;
    swprintf(szzText , L"%s   %s" , m_arData[nColNum - 1].szHT_UO , m_arData[nColNum - 1].szHT_A_UO);
    lItem.pszText=W2T(szzText);
    pDlgSportNews->m_List.SetItemText( 2 + (nColNum - 1) * 3 , 6 , lItem.pszText);

    lItem.iItem = 2 + (nColNum - 1) * 3;
    lItem.iSubItem = 7;
    lItem.pszText = W2T(m_arData[nColNum - 1].szHT_S_Odd);
    pDlgSportNews->m_List.SetItemText( 2 + (nColNum - 1) * 3 , 7 , lItem.pszText);

    lItem.pszText = W2T(L" ");
    pDlgSportNews->m_List.InsertItem( 3 + (nColNum-1 ) * 3 , lItem.pszText);

    lItem.iItem = 3 + (nColNum - 1) * 3;
    lItem.iSubItem = 1;
    lItem.pszText = W2T(m_arData[nColNum - 1].szB_Team);
    pDlgSportNews->m_List.SetItemText( 3 + (nColNum - 1) * 3 , 1 , lItem.pszText);

    lItem.iItem = 3 + (nColNum - 1) * 3;
    lItem.iSubItem = 2;
    if (!m_arData[nColNum - 1].bFT_HDP)
    {
        swprintf(szzText , L"%s   %s" , m_arData[nColNum - 1].szFT_HDP , m_arData[nColNum - 1].szFT_B_HDP);
        lItem.pszText=W2T(szzText);
    }
    else
        lItem.pszText = W2T(m_arData[nColNum - 1].szFT_A_HDP);
    pDlgSportNews->m_List.SetItemText( 3 + (nColNum - 1) * 3 , 2 , lItem.pszText);

    lItem.iItem = 3 + (nColNum - 1) * 3;
    lItem.iSubItem = 3;
    lItem.pszText = W2T(m_arData[nColNum - 1].szFT_B_UO);
    pDlgSportNews->m_List.SetItemText( 3 + (nColNum - 1) * 3 , 3 , lItem.pszText);

    lItem.iItem = 3 + (nColNum - 1) * 3;
    lItem.iSubItem = 4;
    lItem.pszText = W2T(m_arData[nColNum - 1].szFT_D_Odd);
    pDlgSportNews->m_List.SetItemText( 3 + (nColNum - 1) * 3 , 4 , lItem.pszText);

    lItem.iItem = 3 + (nColNum - 1) * 3;
    lItem.iSubItem = 5;
    if (!m_arData[nColNum - 1].bHT_HDP)
    {
        swprintf(szzText , L"%s   %s" , m_arData[nColNum - 1].szHT_HDP , m_arData[nColNum - 1].szHT_B_HDP);
        lItem.pszText=W2T(szzText);
    }
    else
        lItem.pszText = W2T(m_arData[nColNum - 1].szHT_B_HDP);
    pDlgSportNews->m_List.SetItemText( 3 + (nColNum - 1) * 3 , 5 , lItem.pszText);

    lItem.iItem = 3 + (nColNum - 1) * 3;
    lItem.iSubItem = 6;
    lItem.pszText = W2T(m_arData[nColNum - 1].szHT_B_UO);
    pDlgSportNews->m_List.SetItemText( 3 + (nColNum - 1) * 3 , 6 , lItem.pszText);

    lItem.iItem = 3 + (nColNum - 1) * 3;
    lItem.iSubItem = 7;
    lItem.pszText = W2T(m_arData[nColNum - 1].szHT_D_Odd);
    pDlgSportNews->m_List.SetItemText( 3 + (nColNum - 1) * 3 , 7 , lItem.pszText);

    pDlgSportNews->m_List.UpdateData();

    UpdateData(FALSE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:26:22.390

可能会在这里四处走动，但是：

`lItem.iItem = 1 + (nColNum - 1) * 3;`

为什么要这样计算商品编号？这可能是未添加所有项目的原因。

将项目添加到 CListCtrl 的样板：

```
// First item  (first row)
VITEM item;
item.mask = LVIF_TEXT;
item.pszText = "Column Text";
item.iItem = 0;      // Item number
item.iSubItem = 0;         // Sub item number (column number)
m_CListCtrl.InsertItem(&item);

// Second item (second row)
//...
item.iItem = 1;
//... 
```

正如有人建议的那样，您应该使用循环。

# entity-framework - 实体框架中模型定义的函数和部分类中的函数有什么区别？

> ID：11676118
> 
> 赞同：0
> 
> 时间：2012-07-26T18:52:37.833
> 
> 标签：entity-framework

我正在阅读以下书：[Programming Entity Framework](https://rads.stackoverflow.com/amzn/click/com/059652028X)，我很难区分 CSDL 中定义的“模型定义函数”和我将在我自己的 Partial 类中创建的函数（即我的 Partial 类）之间的区别我创建的“客户”实体）。

所以书中的例子是一个连接并返回某人全名的函数，如下所示：

```
<DefiningExpression>
   Trim(c.LastName) + ", " + Trim(c.FirstName)
</DefiningExpression> 
```

我可以在我的部分客户类中创建一个可以做同样事情的属性或函数吗？在实体框架数据模型的 CSDL 中创建这些模型定义的函数，而不是在我的 Partial 类中创建这些模型定义的函数有什么优势或主要吸引力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:55:07.050

不同之处在于模型定义函数是模型的一部分，您可以在 ESQL 或 Linq-to-entities 查询中使用它，因为 EF 知道如何将其转换为 SQL。在部分类中创建通用 .NET 函数时，不能在 Linq-to-entities 或 ESQL 查询中使用它，因为 EF 不知道如何翻译它们。

# c - 字符串中的布斯算法

> ID：11676119
> 
> 赞同：4
> 
> 时间：2012-07-26T18:52:48.377
> 
> 标签：c, string, algorithm

我尝试在 O(n) 时间内使用[Booth 算法](http://en.wikipedia.org/wiki/Lexicographically_minimal_string_rotation)在 SPOJ 中解决这个[问题](http://www.spoj.pl/problems/BEADS/)，但它失败了，尽管它适用于我尝试过的所有测试用例。 然后我在 O(n^2) 时间内以蛮力方式做了，它奏效了。我已经附上了这两种情况的代码，告诉我哪里出错了，或者 Booth 算法是解决这个问题的正确方法吗？

不是问题，找到字典最小字符串的最小旋转

对于第一种方法，布斯算法： http: [//ideone.com/J5gl5](http://ideone.com/J5gl5)
对于第二种方法，蛮力：http: [//ideone.com/ofTeA](http://ideone.com/ofTeA)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T19:23:46.350

例如，您的算法对字符串“ABAED”给出了错误的答案。

您的算法返回 7（即使这比字符串长！）。

正确答案是 0。

（请注意，此错误也可能出现在您找到算法描述的任何地方！如果您查看[维基百科文章](http://en.wikipedia.org/wiki/Lexicographically_minimal_string_rotation)的历史/讨论，则有很多修复错误的编辑 - 都声称修复了原始论文中的错误，并且修复错误修复中的错误...）

如果你更换它似乎工作得更好：

```
if( lst[i] < lst[ans+i+1] ) 
```

和

```
if( lst[j] < lst[ans+i+1] ) 
```

# clojure - 为什么 when-let 和 if-let 默认不支持多个绑定？

> ID：11676120
> 
> 赞同：25
> 
> 时间：2012-07-26T18:52:54.023
> 
> 标签：clojure

为什么默认不`when-let`支持多个绑定？`if-let`

所以：

```
(when-let [a ...
           b ...]
  (+ a b)) 
```

...代替：

```
(when-let [a ...
  (when-let [b ...
    (+ a b))) 
```

我知道我可以编写自己的宏或使用 monad（如此处所述：http: [//inclojurewetrust.blogspot.com/2010/12/when-let-maybe.html](http://inclojurewetrust.blogspot.com/2010/12/when-let-maybe.html)）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-26T19:00:50.533

因为（`if-let`至少）对于“其他”情况如何处理并不明显。

至少，出于[更好的方式在 clojure 中嵌套 if-let 的](https://stackoverflow.com/questions/11673825/better-way-to-nest-if-let-in-clojure)动机，我开始编写一个宏来执行此操作。给定

```
(if-let* [a ...
          b ...]
  action
  other) 
```

它会产生

```
(if-let [a ...]
  (if-let [b ...]
    action
    ?)) 
```

我不清楚如何继续（“其他”有两个地方）。

你可以说任何失败都应该有一个替代方案，或者没有一个替代方案`when-let`，但如果任何测试改变状态，那么事情仍然会变得一团糟。

简而言之，它比我预期的要复杂一些，所以我想当前的方法避免了对解决方案的要求。

另一种说法是：你假设`if-let`应该像`let`. 更好的模型可能是`cond`，它不是“嵌套 if”，而是更多“替代 if”，因此不适合范围......或者，另一种说法：`if`不处理这种情况好点。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-03-22T17:13:41.210

**这是当-让*：**

```
(defmacro when-let*
  "Multiple binding version of when-let"
  [bindings & body]
  (if (seq bindings)
    `(when-let [~(first bindings) ~(second bindings)]
       (when-let* ~(vec (drop 2 bindings)) ~@body))
    `(do ~@body))) 
```

**用法：**

```
user=> (when-let* [a 1 b 2 c 3]
                (println "yeah!")
                a)
;;=>yeah!
;;=>1

user=> (when-let* [a 1 b nil c 3]
                (println "damn! b is nil")
                a)
;;=>nil 
```

**这是 if-let*：**

```
(defmacro if-let*
  "Multiple binding version of if-let"
  ([bindings then]
   `(if-let* ~bindings ~then nil))
  ([bindings then else]
   (if (seq bindings)
     `(if-let [~(first bindings) ~(second bindings)]
        (if-let* ~(vec (drop 2 bindings)) ~then ~else)
        ~else)
     then))) 
```

**用法：**

```
user=> (if-let* [a 1 
                 b 2 
                 c (+ a b)]
              c
              :some-val)
;;=> 3

user=> (if-let* [a 1 b "Damn!" c nil]
              a
              :some-val)
;;=> :some-val 
```

**编辑：原来绑定不应该以 else 形式泄露。**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-14T11:46:34.897

如果您使用[`cats`](http://funcool.github.io/cats/latest/)，那么`mlet`您可能会发现一个有用的功能：

> ```
> (use 'cats.builtin)
> (require '[cats.core :as m])
> (require '[cats.monad.maybe :as maybe])
> 
> (m/mlet [x (maybe/just 42)
>          y nil]
>   (m/return (+ x y)))
> ;; => nil 
> ```
> 
> 如您所见，mlet 在遇到 nil 值时会短路。

（来自第 6.5.1 节无）

# javascript - 在 ExtJS 中使用 XML 加载组合框

> ID：11676123
> 
> 赞同：1
> 
> 时间：2012-07-26T18:53:02.247
> 
> 标签：javascript, extjs, extjs3

我想用 XML 加载组合框，但我无法在组合框中获取任何值，这是我到目前为止所做的

```
var getMessageDomain = function () {
    var store = new Ext.data.Store({
        url: 'zport/getDomainFilters',
        autoLoad: true,
        reader: new Ext.data.XmlReader({
            record: 'Domain'
        }, [{
            name: 'name',
            mapping: '@name'
        }, ])
    });
    var combo = new Ext.form.ComboBox({
        width: 250,
        xtype: 'combo',
        mode: 'local',
        allowBlank: false,
        triggerAction: 'all',
        forceSelection: true,
        editable: false,
        fieldLabel: 'Message Domain',
        name: 'titlez',
        hiddenName: 'titlez',
        displayField: 'name',
        valueField: 'name',
        editable: false,
        store: store
    });
    return combo;
}; 
```

我的xml是这样的：

```
<TDSmessagedomain xmlns="">
  <Domain name="AEPL" /> 
  <Domain name="APAP" /> 
  <Domain name="BCP" /> 
  <Domain name="BTCI" /> 
  <Domain name="BGSET" /> 
  <Domain name="COLLCLIENT" /> 
  <Domain name="COLLINT" /> 
  <Domain name="CPL" /> 
  <Domain name="DBWS" /> 
......................... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:23:17.147

1) 我鼓励你使用 XmlStore，它会自动为你配置一个 XmlReader。

```
var store = new Ext.data.XmlStore({
    autoLoad: true,
    url: 'zport/getDomainFilters',
    fields: ['name'],
    record: 'Domain'
}); 
```

2) 这未经测试，但我认为您需要稍微修改一下您的 XML 结构。我不知道它是否会在记录标识符中查找属性。

```
<TDSmessagedomain xmlns="">
  <Domain>
    <name>AEPL</name>
  </Domain>
  <Domain>
    <name>APAP</name>
  </Domain>
</TDSmessagedomain> 
```

# python - 组合列表以创建一个列表，其中每个元素是单个元素的总和

> ID：11676125
> 
> 赞同：2
> 
> 时间：2012-07-26T18:53:16.880
> 
> 标签：python

我有 3 个列表：

```
['1','2']

['a','b','c']

['X','Y'] 
```

我希望得到的结果：

```
['1aX','1bX','1cX','2aX','2bX','2cX','1aY','1bY','1cY','2aY','2bY','2cY'] 
```

有没有办法快速设置？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T18:54:36.940

您可以使用`itertools.product()`：

```
map("".join, itertools.product(list1, list2, list3)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T19:19:25.233

```
>>> x,y,z=['1','2'],['a','b','c'],['x','y']
>>> s=[a+b+c for c in z for a in x for b in y]
>>> s
['1ax', '1bx', '1cx', '2ax', '2bx', '2cx', '1ay', '1by', '1cy', '2ay', '2by', '2cy'] 
```

这样你就可以选择你想要的顺序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T19:04:33.717

要获得您指定的确切结果，您可以使用以下命令：

```
import operator
import itertools

list1 = ['1','2']
list2 = ['a','b','c']
list3 = ['X','Y']
getter = operator.itemgetter(1, 2, 0)
result = [''.join(getter(seq)) for seq in itertools.product(list3, list1, list2)] 
```

的最后一个参数`itertools.product()`将是第一个更改的，因此根据您的示例输出，我们希望`list2`成为最后一个，然后是`list1`，然后是`list3`，因为首先中间元素前进，然后是第一个元素，然后是最后一个。该`operator.itemgetter()`调用用于对元素进行重新排序，以便元素 from`list1`首先出现，等等。

我发现列表推导在这里更容易阅读，但这里有一个单行替代方案，它使用`map()`：

```
map(''.join, map(operator.itemgetter(1, 2, 0), itertools.product(list3, list1, list2))) 
```

（您也可以在一行中进行列表理解，但您不应该这样做，因为这样`operator.itemgetter()`调用将在每次迭代中执行）

# objective-c - 将响应从 AFHTTPRequestOperation 传递到 UIWebview

> ID：11676126
> 
> 赞同：4
> 
> 时间：2012-07-26T18:53:24.027
> 
> 标签：objective-c, xcode, uiwebview, afnetworking

我的代码正在向服务器发出两个请求。一个直接进入 uiwebview，另一个使用 AFHTTPRequestOperation。我想使用 AFHTTPRequestOperation 并将响应传递到我的 uiwebview 中。将响应传递到 uiwebview 而不再次加载它的正确语法是什么？如何在不从服务器调用两次的情况下做到这一点？我仍然希望能够测试加载请求的成功或失败，并发送用户名和密码以连接到 url。

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
[itemField resignFirstResponder];

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *userName = [defaults objectForKey:@"storedUserName"];
NSString *passWord = [defaults objectForKey:@"storedPassWord"];

NSURL *url = [NSURL URLWithString:@"http://www.example.net/"];
AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL: url];

[client setAuthorizationHeaderWithUsername:userName password:passWord];

NSMutableURLRequest *request = [client requestWithMethod:@"GET" path:[@"/example/itemlookup.php?item=" stringByAppendingString:itemField.text] parameters:nil];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {

    //calling again here was the only way I could figure out to get this into my webview
    //need to get response from above and put into the uiwebview
    [webView loadRequest:request];
    NSLog(@"Success");
} failure: ^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Failure"); 
}];

NSOperationQueue *queue = [[NSOperationQueue alloc] init];
[queue addOperation:operation];

return YES; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-07T05:07:52.343

我建议使用 AFNetworking 的 UIWebView 类别，它正是这样做的；使用 an`AFHTTPRequestOperation`加载网页内容，然后将其作为 HTML 字符串加载到 Web 视图中。

否则，我建议您查看该类别，看看您是否可以调整其代码以供您使用。[https://github.com/AFNetworking/AFNetworking/blob/master/UIKit%2BAFNetworking/UIWebView%2BAFNetworking.m](https://github.com/AFNetworking/AFNetworking/blob/master/UIKit%2BAFNetworking/UIWebView%2BAFNetworking.m)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:09:44.397

如果该 URL 返回 HTML，您可以使用 UIWebView 的 - (void)loadHTMLString:(NSString *)string baseURL:(NSURL *)baseURL 方法。

就像是：

```
[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    [webView loadHTMLString:responseObject baseURL:url]; //If responseObject is HTML 
    NSLog(@"Success");
} failure: ^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Failure"); 
}]; 
```

唯一可能改变的是响应对象。你可能没有得到一个字符串，而是一个 NSURLResponse 或类似的东西。

# php - 在 mysql 查询中使用 NOT IN 的正确方法

> ID：11676133
> 
> 赞同：0
> 
> 时间：2012-07-26T18:53:46.860
> 
> 标签：php, sql

我有一个引发错误的 mysql 查询，我猜这是因为我明智地使用了“NOT IN”这个短语：

```
$sqlGetCountry = mysqli_query($link, "SELECT * FROM locations WHERE country='$country' AND CURTIME() > time AND '$state' NOT IN state ORDER BY time desc LIMIT 20");
$sqlNumCountry = mysqli_num_rows($sqlGetCountry); 
```

我有一张包含城市、州和国家/地区的表格，我基本上是在尝试查找结果中没有给定州（在本例中为 $state，可能是德克萨斯、夏威夷等）的查询。我得到错误：

```
mysqli_num_rows() expects parameter 1 to be mysqli_result, boolean given 
```

有人有线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:56:07.127

您不能将表传递给`in`，但可以传递子查询：

```
SELECT  * 
FROM    locations 
WHERE   country='$country' 
        AND CURTIME() > time 
        AND '$state' NOT IN (select state from state)
ORDER BY 
       time desc 
LIMIT  20 
```

# jpa - 如何忽略 JPQL 中的一对一关系？

> ID：11676141
> 
> 赞同：0
> 
> 时间：2012-07-26T18:54:19.903
> 
> 标签：jpa, jpql

我正在一起处理一个查询，该查询需要加载与另一个实体具有多对一关系的实体列表，该实体本身与另一个实体具有多对一关系。我不需要关联加载的任何数据，但是在查看查询日志时，我发现 JPA 无论如何都会自动加载它。我的理解是，发生这种情况是因为我的 JPA 实现无法创建代理来表示关联实体，就像它对集合所做的那样。

假设我的实体是 Ham，它与 Sandwich 具有多对一的关联。我获取火腿列表的 JPQL 可能如下所示：

```
Select H from Ham H 
```

有没有办法在 JPQL 中显式忽略 Ham 与三明治的关联，这样我的数据库就不会在不诉诸连接提取的情况下受到一系列多余的选择三明治查询的影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:00:08.187

在定义 ManyToOne 关系时，将其标记为“延迟加载”（通过使用注释，它类似于）：

```
@ManyToOne(fetch=FetchType.LAZY) 
```

这样，上面的 PQL 将按预期工作。但是，当您需要加载 Sandwich 时，您必须添加一个 FETCH JOIN

# ios - 蓝牙徽标是否可作为 iPhone 上的字符使用？

> ID：11676143
> 
> 赞同：17
> 
> 时间：2012-07-26T18:54:29.647
> 
> 标签：ios, bluetooth

iOS上是否有一种字体有蓝牙标志的字形？也许是一些 Dingbats，还是 Emoji？WiFi标志怎么样？

编辑：有这样一个字符的第三方字体怎么样，我可以许可和运送的字体？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T18:41:56.937

不，蓝牙徽标不是字形或字体字符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-11T20:06:42.783

正如 Seva 所说，它是符文 Hagall (ᚼ) 和 Bjarkan (ᛒ) 的组合。我试图通过组合这两个符号来做同样的事情。

我通过首先找到具有这两个字符的字体来实现这一点。我最终使用了 LeedsUni。你可以在这里下载：[http](http://www.personal.leeds.ac.uk/~ecl6tam/) ://www.personal.leeds.ac.uk/~ecl6tam/ 。

您需要在 info.plist 中引用字体所在的路径。

```
 <key>UIAppFonts</key>
  <array>
    <string>Fonts/LeedsUni10-12-13.ttf</string>
  </array> 
```

然后我创建了两个相互重叠的`UIView`对象（`UIButton`在我的例子中是对象），以便两个字符正确排列。根据您使用的字体，您可能需要调整 UIView 框架的 x 和 y 值。

我的代码在 C# 中，因为我使用的是 Xamarin，但您应该能够在 Objective C 或 Swift 中做同样的事情。

```
UIView bleView = new UIView(new CGRect(0, 0, 34.0f, 34.0f));

string fontName = "LeedsUni";

UIButton bluetoothToSerialButton = new UIButton(UIButtonType.RoundedRect);
bluetoothToSerialButton.Frame = new CGRect(0, 0, 34.0f, 34.0f);
bluetoothToSerialButton.SetTitleColor(UIApplication.SharedApplication.Delegate.GetWindow().TintColor, UIControlState.Normal);
bluetoothToSerialButton.SetTitle("ᛒ", UIControlState.Normal);
bluetoothToSerialButton.Font = UIFont.FromName(fontName, 34.0f);

UIButton bluetoothToSerialButton2 = new UIButton(UIButtonType.RoundedRect);
bluetoothToSerialButton2.Frame = new CGRect(-3.5f, 0, 34.0f, 34.0f);
bluetoothToSerialButton2.SetTitleColor(UIApplication.SharedApplication.Delegate.GetWindow().TintColor, UIControlState.Normal);
bluetoothToSerialButton2.SetTitle("ᚼ", UIControlState.Normal);
bluetoothToSerialButton2.Font = UIFont.FromName(fontName, 34.0f);

bleView.AddSubviews(new UIView[] { bluetoothToSerialButton, bluetoothToSerialButton2 }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-06-27T17:47:07.347

**在 Swift 4.1 中使用 Quartz2D**

如果您讨厌使用外部字体或添加一堆 .png 文件，您可能更喜欢使用 Quartz2D 获得相同效果的简单类。

这适用于我的 20x20 点徽标。您可能想要优化几何图形或线宽。另请注意，框架的宽度应等于高度。

请注意，如果大小发生变化，您将需要使用 setNeedsDisplay。

[![在此处输入图像描述](../Images/93b6688e5f5106923e35671af6fd551d.png)](https://i.stack.imgur.com/E1dD6.png)

```
import UIKit
class BluetoothLogo: UIView {
    var color: UIColor!
    convenience init(withColor color: UIColor, andFrame frame: CGRect) {
        self.init(frame: frame)
        self.backgroundColor = .clear
        self.color = color
    }
    override func draw(_ rect: CGRect) {
        let context = UIGraphicsGetCurrentContext()
        let h = self.frame.height
        let y1 = h * 0.05
        let y2 = h * 0.25
        context?.move(to: CGPoint(x: y2, y: y2))
        context?.addLine(to: CGPoint(x: h - y2, y: h - y2))
        context?.addLine(to: CGPoint(x: h/2, y: h - y1))
        context?.addLine(to: CGPoint(x: h/2, y: y1))
        context?.addLine(to: CGPoint(x: h - y2, y: y2))
        context?.addLine(to: CGPoint(x: y2, y: h - y2))
        context?.setStrokeColor(color.cgColor)
        context?.setLineCap(.round)
        context?.setLineWidth(2)
        context?.strokePath()
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-02T16:46:53.300

这些是来自谷歌材料设计的图标，你可以从这里下载它们[https://material.io/tools/icons/?icon=bluetooth&style=baseline](https://material.io/tools/icons/?icon=bluetooth&style=baseline) [![在此处输入图像描述](../Images/14877d05e7a520f239356d1ca812d4ae.png)](https://i.stack.imgur.com/v4h5o.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T17:14:18.990

没有表情符号，只是在我的 iPad 上查看过。

如果您不希望它可扩展，只需使用蓝牙徽标的 PDF 或 EPS，否则只需使用 png。

# javascript - Mac/Windows 在 Javascript 中弹出虚拟键盘

> ID：11676145
> 
> 赞同：2
> 
> 时间：2012-07-26T18:54:34.077
> 
> 标签：javascript, windows, macos

我正在开发一个专为在大型触摸屏显示器上使用而设计的 web 应用程序。它不是移动应用程序；它将在 Mac OS X 和 windows 上的 FireFox 和 Chrome 中运行。我正在寻找一种方法来以编程方式从 javascript 弹出操作系统的本机屏幕键盘。在 Win 7 中，当用户专注于文本区域时（就像 iOS 和 Android 一样），这会自动发生，但对于旧版本的 Windows 和 OS X，用户必须手动将其拉起，这很麻烦我想排除。

理想情况下，它会像 Win7/iOS/Android 一样工作，并在用户关注文本区域时自动弹出，但我会满足于弹出键盘的任何 javascript，即使我必须为每个文本框添加它。

如果这是可能的，我敢肯定 Mac 和 Windows 是不同的，所以我想这真的是两个问题合而为一。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T21:27:31.410

好的，我已经在我自己的 Mac（版本 10.6.8）和 Windows XP 上进行了本地测试，所以好消息是它可以工作（而且非常简单）。

基本思想是：

1.  知道如何从命令行打开屏幕键盘
2.  设置浏览器以允许从 JavaScript 执行命令行
3.  编写您的 HTML :-)

两个平台的说明如下。

**苹果电脑**

对于 Mac，下载并构建这个 Xcode 项目：

*   [https://github.com/nriley/keyboardViewer](https://github.com/nriley/keyboardViewer)

确保您的构建目标与客户端 Mac 相同（例如 64 位 Intel 等）。输出将是一个名为`keyboardViewer`. 这将在执行时弹出打开屏幕键盘。

假设您已经保存`keyboadViewer`到用户的桌面上，那么您要执行的命令是（在我的情况下）：

*   `/Users/Oliver/Desktop/keyboardViewer`.

**视窗**

在 Windows 上，从命令行打开屏幕键盘要容易得多。以下（或类似的）将做到这一点：

*   `C:\WINDOWS\system32\osk.exe`

**火狐**

接下来，您将不得不从浏览器执行此文件（或 Windows 命令）。因此，请在此处安装 Firefox 插件：

*   [https://addons.mozilla.org/en-US/firefox/addon/commandrun/](https://addons.mozilla.org/en-US/firefox/addon/commandrun/)

这个附加组件将允许您从 JavaScript 执行操作系统命令（例如执行文件）。在您可以从附加组件执行此操作之前，您需要将此命令添加到允许的命令列表中。

为此，请转到`about:config`浏览器地址栏中。右键单击首选项列表并选择新建 > 字符串。您要添加的新首选项的名称是`extensions.commandrun.allowedcommands`。对于值，输入以下内容：

*   在 Mac 上：`["/Users/Oliver/Desktop/keyboardViewer"]`
*   在 Windows 上：`["C:\\WINDOWS\\system32\\osk.exe"]`

**HTML**

现在，您将能够使用 HTML 格式从 Firefox 中打开屏幕键盘，如下所示：

```
<script language="javascript">
function openKeyboard(){
    CommandRun.run("/Users/Oliver/Desktop/keyboardViewer", []);
}
</script>

<input type="text" onfocus="javascript:openKeyboard();" /> 
```

在 Windows 上，替换为以下内容：

```
CommandRun.run("C:\\WINDOWS\\system32\\osk.exe", []); 
```

**选择**

另一种方法是用 Adob​​e Air 之类的东西编写您自己的浏览器。使用该方法，您的 JavaScript 会调用您的 Air 应用程序，然后您的 Air 应用程序会执行`keyboardViewer`（或 Windows 等效程序）。

# c# - JSON.NET 如何删除节点

> ID：11676159
> 
> 赞同：22
> 
> 时间：2012-07-26T18:55:24.337
> 
> 标签：c#, json, json.net, jsonpath

我有一个如下的json：

```
{
  "d": {
    "results": [
      {
        "__metadata": {
        },
        "prop1": "value1",
        "prop2": "value2",
        "__some": "value"
      },
      {
        "__metadata": {
        },
        "prop3": "value1",
        "prop4": "value2",
        "__some": "value"
      },
    ]
  }
} 
```

我只想将此 JSON 转换为不同的 JSON。我想从 JSON 中删除“_ *metadata”和“* _some”节点。我正在使用 JSON.NET。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-26T21:46:46.720

我刚刚反序列化为 JObject 并递归地循环遍历它以删除不需要的字段。这是感兴趣的人的功能。

```
private void removeFields(JToken token, string[] fields)
{
    JContainer container = token as JContainer;
    if (container == null) return;

    List<JToken> removeList = new List<JToken>();
    foreach (JToken el in container.Children())
    {
        JProperty p = el as JProperty;
        if (p != null && fields.Contains(p.Name))
        {
            removeList.Add(el);
        }
        removeFields(el, fields);
    }

    foreach (JToken el in removeList)
    {
        el.Remove();
    }
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-07-23T08:25:19.107

基于@[Mohamed Nuur] 的回答，我将其更改为我认为效果更好的扩展方法：

```
 public static JToken RemoveFields(this JToken token, string[] fields)
    {
        JContainer container = token as JContainer;
        if (container == null) return token;

        List<JToken> removeList = new List<JToken>();
        foreach (JToken el in container.Children())
        {
            JProperty p = el as JProperty;
            if (p != null && fields.Contains(p.Name))
            {
                removeList.Add(el);
            }
            el.RemoveFields(fields);
        }

        foreach (JToken el in removeList)
        {
            el.Remove();
        }

        return token;
    } 
```

这是单元测试：

```
[TestMethod]
     public void can_remove_json_field_removeFields()
     {
        string original = "{\"d\":{\"results\":[{\"__metadata\":{},\"remove\":\"done\",\"prop1\":\"value1\",\"prop2\":\"value2\",\"__some\":\"value\"},{\"__metadata\":{},\"prop3\":\"value1\",\"prop4\":\"value2\",\"__some\":\"value\"}],\"__metadata\":{\"prop3\":\"value1\",\"prop4\":\"value2\"}}}";
        string expected = "{\"d\":{\"results\":[{\"prop1\":\"value1\",\"prop2\":\"value2\",\"__some\":\"value\"},{\"prop3\":\"value1\",\"prop4\":\"value2\",\"__some\":\"value\"}]}}";
        string actual = JToken.Parse(original).RemoveFields(new string[]{"__metadata", "remove"}).ToString(Newtonsoft.Json.Formatting.None);
        Assert.AreEqual(expected, actual);
     } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T20:56:35.833

我将创建一个仅包含所需信息的新数据结构，并从第一个数据结构中复制数据。通常这是最简单的方法。只是一个想法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-04-18T13:49:42.683

如果您有一个带有 JTokens 而不是 JObjects 的 JArray，则此答案适用：

这是一个例子：

```
string json = "[null, null, \"x\", null, null, null, 0,[],[[\"x\"], null,[0],[\"x\"]]]";

    JArray array = JArray.Parse(json);

    // Keep first 3 elements, remove the rest
    int max = array.Count;
    for (int i = 0; i < max - 3; i++)
    {
        JToken elem = array[3];
        array.Remove(elem);
    }

    json = array.ToString(Newtonsoft.Json.Formatting.None);

    Console.WriteLine(json); 
```

# c# - 将云服务从本地转换为托管在 Windows Azure 上

> ID：11676169
> 
> 赞同：0
> 
> 时间：2012-07-26T18:56:09.643
> 
> 标签：c#, visual-studio-2010, web-services, windows-phone-7, azure

我正在尝试在 Azure 上托管一个非常简单的数据库，但这样做却让我发疯了。我已经设法让本地服务运行并与我的 WP7 应用程序进行通信就好了:)。

通过遵循本教程，我做到了这一点：http: [//breathingtech.com/2011/how-to-use-wcf-services-to-access-sql-azure-database-from-windows-phone-7-app-part -1/](http://breathingtech.com/2011/how-to-use-wcf-services-to-access-sql-azure-database-from-windows-phone-7-app-part-1/)

本教程提供了将服务发布到 Azure 的步骤，但我的 Visual Studio (2010 Professional SP1) 版本不同，我无法完成最后一步（将其托管在 Azure 上）。

当我按照教程点击“发布...”时，我得到了这个（接下​​来我该怎么做？）： ![在此处输入图像描述](../Images/64ec0a9a701773da3e6ee1293e551dfc.png)

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:27:59.990

好吧，如果您想学习该教程，则应右键单击该项目，但不应选择**Publish**您应该选择**Package**。打包后，这将打开一个新的资源管理器窗口，其中包含 2 个文件（包和 cscfg）。

然后，您可以简单地继续并按照本教程的其余部分进行操作。

或者，您可以在问题中显示的屏幕中将环境从**暂存**更改为**生产，然后单击发布。**这会打包应用程序并将其部署到选定的托管服务（在您的情况下是**apprehensive3months**）。如果您这样做，则无需在门户中手动上传文件（如教程中所述）。

# html - 在 Safari 6 中，位置：固定停止工作

> ID：11676172
> 
> 赞同：3
> 
> 时间：2012-07-26T18:56:18.047
> 
> 标签：html, css, safari, position, css-position

过去几周我一直在开发一个网站，当我升级到 Safari 6 时，`position:fixed`几个 div 停止工作。它在 Chrome 20 和 Firefox 14 中仍然可以正常工作。我发现了与移动 Safari 相关的问题，但对此一无所知。有没有其他人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:29:56.417

你试过`position:static`吗？我记得很久以前在 Mobile Safari 中阅读过这个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-25T13:23:19.427

**具有负 z-index 值可能是问题所在！**

我遇到了这个问题。在 safari 5 上一切正常，但在 6 上突然固定位置的 div 停止工作。

我当时正在处理背景视频。

我注意到将背景视频放置在固定位置和 -100（负值）的 z-index 会使所有其他固定 div 在滚动时移动。

所以我的结论是，负 z-index 值是不好的。我将其更改为 1 并且一切正常。

# java - 从 Warework PC-MAC Distribution 中的另一个 JAR 加载资源

> ID：11676174
> 
> 赞同：0
> 
> 时间：2012-07-26T18:56:22.117
> 
> 标签：java, jar, software-distribution, warework

我正在用 Warework Connected Distribution for PC-MAC 编写一个程序，它由三个 JAR 组成：一个是我的应用程序的 Java 代码，另一个是应用程序的资源，最后一个是 Warework JAR。

带有 Java 代码的 JAR 包含默认配置，而资源 JAR 包含应用程序的主要配置（在大多数情况下使用）。

由于两个 JAR 中的许多资源具有相同的名称，我如何告诉 Warework 从特定 JAR 加载配置文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:29:38.313

您可以在资源 JAR 中创建一个虚拟类（一个空类，没有任何内容），并将 Warework 配置为使用该类从资源 JAR 加载应用程序的配置。只需在创建 Scope 时提供虚拟类，例如：

```
ScopeFacade system = ScopeFactory.createFacade(Dummy.class, "config", "app-name"); 
```

或者：

```
ScopeFacade system = ScopeFactory.createTemplate(Dummy.class, "full", "app-name"); 
```

就是这样。现在您应该能够从资源 JAR 中读取资源。

# .net - 遍历类属性以获取子类值

> ID：11676176
> 
> 赞同：0
> 
> 时间：2012-07-26T18:56:35.270
> 
> 标签：.net, reflection

好的，我正在尝试使用反射来遍历一个类以获取该类和子类的所有属性和值。我遇到的问题是获取一个类的值，该类是我正在使用的对象的子类。例如。我想在下面的示例中获取 Teacher 对象的 ClassRoom 属性。

我遇到的另一个问题是如何确定何时到达可包含的属性，例如学生列表，这样我就可以让它遍历列表。

前任：

```
public class Teacher 
{
    public int ID {get;set;}
    public string FullName {get;set;}
    public ClassRoom HomeRoom {get;set;}
    public List<Student> Students {get;set;}
}
public class ClassRoom
{
    public int ID {get;set;}
    public string RoomNumber {get;set;}
}
public class Student
{
    public int ID {get;set;}
    public string FullName {get;set;}
}

private void LoadTeacher()
{
    Teacher thisTeacher = Session["Teacher"] as Teacher;
    Type type = thisTeacher.GetType();

    PropertyInfo[] props = type.GetProperties();
    foreach (PropertyInfo prop in props)
    {
        if (prop.PropertyType.IsClass && prop.PropertyType != typeof(string))
        {
            Type headerType = prop.PropertyType;
            PropertyInfo[] headerProps = headerType.GetProperties();
            //Instantiate an object of the headerType
            object headerObj = Activator.CreateInstance(headerType);
            foreach (PropertyInfo childProp in headerProps)
            {
                if (!childProp.PropertyType.IsClass || childProp.PropertyType == typeof(string))
                {
                    //This object always get loaded with default values, Why?
                    object value = childProp.GetValue(headerObj, null);                                                    
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T23:29:19.893

```
 var teacher = new Teacher()
    {
      HomeRoom = new ClassRoom { ID = 12, RoomNumber = "7-1" },
      Students = new List<Student> { new Student{ID =1, FullName = "Smith1"}, new Student{ID=2, FullName = "Smith2"} }
    };
    Console.WriteLine("Teacher");
    Browse(teacher, 1);

 static void Browse(object item, int level = 0)
  {
    if (item == null)
      return;
    var prefix = new string(' ', level * 2);

    var type = item.GetType();
    foreach (var prop in type.GetProperties())
    {
      var value = prop.GetValue(item, null);
      if (value is System.Collections.IEnumerable && !(value is string))
      {
        Console.WriteLine("{0}{1}", prefix, prop.Name);
        foreach (var index_entry in ((System.Collections.IEnumerable)value).OfType<object>().Select((entry, index) => new { entry, index }))
        {
          Console.WriteLine("{0}[{1}]: {2}", prefix, index_entry.index, index_entry.entry);
          Browse(index_entry.entry, level + 1);
        }
      }
      else if (value != null && !value.GetType().IsPrimitive && !(value is string))
      {
        Console.WriteLine("{0}{1}: {2}", prefix, prop.Name, value);
        Browse(value, level + 1);
      }
      else
      {
        Console.WriteLine("{0}{1}: {2}", prefix, prop.Name, value);
      }

    }
  } 
```

### 输出

```
Teacher
  ID: 0
  FullName:
  HomeRoom: Program+ClassRoom
    ID: 12
    RoomNumber: 7-1
  Students
  [0]: Program+Student
    ID: 1
    FullName: Smith1
  [1]: Program+Student
    ID: 2
    FullName: Smith2 
```

# visual-studio - Visual Studio 2008 中的其他项目类型为空

> ID：11676177
> 
> 赞同：0
> 
> 时间：2012-07-26T18:56:36.737
> 
> 标签：visual-studio

在我的系统中，当我单击添加-> 新项目-> 并转到其他项目类型时，我看不到任何项目类型。我实际上想将我的 c# 项目转换为可执行文件。

安装过程中是否缺少任何组件？我正在使用 Visual Studio 2008 专业版请帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-16T14:23:31.820

在我查看我实际使用的软件之前，我遇到了同样的问题 - 检查你是否真的在使用 Microsoft Visual Studio 2008 - 我以为我是，直到我意识到我使用的是 Visual Studio 2008 Shell（集成模式）不同的。

Microsoft Visual Studio 2008 Shell（集成模式）是 SQL Server 2008 Management Studio 的一部分，因此可用的项目类型与 MSVS 2008 不同... Microsoft 开发的 Shell 具有与 Visual Studio 相同的外观，因此用户很舒服，熟悉布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:59:06.790

Go to Tools>>Import and Export Settings>>Reset all settings>>Choose yes or no to save current settings>>

Then choose Visual C# Development Settings or General Development Settings.

So that you can have templates you need.

You can reopen your VisualStudio ISO and try to repair or you can install VisualStudio Express to make sure you can install all templates.

My guess is you didn't make a full installation and forgot to install some components.

# jquery - 通过jquery将html分配给div

> ID：11676178
> 
> 赞同：1
> 
> 时间：2012-07-26T18:56:38.533
> 
> 标签：jquery

我想使用 jQuery 将 html 内容分配给 div。我已经使用了代码，但它没有将值分配给 div。

```
$(document).ready(function(){
    $("#oneclickorder").click(function()
    {
        $.ajax({
            type:'POST',
            url:'modules/oneclickorder.php?divid=NFS',
            success:function(data){
               var onclickdata=data;
               $('#oneclickorder1').html(onclickdata);
            }
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:05:39.777

检查是否

```
$('#oneclickorder1').length 
```

大于 0。可能选择器没有返回任何元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:06:23.920

检查您的控制台是否有 JavaScript 错误。您`});`在代码末尾缺少 a ，这可能是整个问题。

[http://jsfiddle.net/MGeP3/](http://jsfiddle.net/MGeP3/)

# r - 在 R 中分配数据框时使用“=”与“<-”运算符的不同行为

> ID：11676179
> 
> 赞同：2
> 
> 时间：2012-07-26T18:56:41.323
> 
> 标签：r, dataframe, columnname

我想知道为什么使用`=`和`<-`分配`dataframe`.

案例一：使用`=`

```
set.seed(100);a <- data.frame(a1=rnorm(10),a2=sample(c(1,0),10,replace=TRUE)) 
```

案例 b：使用`<-`

```
set.seed(100);b <- data.frame(b1 <- rnorm(10),b2 <- sample(c(1,0),10,replace=TRUE)) 
```

为什么会有以下区别？为什么第二种方法不保留变量/列名？

```
> a
           a1 a2
1 -0.50219235  0
2  0.13153117  0
3 -0.07891709  1
4  0.88678481  1
5  0.11697127  0

>b
  b1....rnorm.5\. b2....sample.c.1..0...5..replace...TRUE.
1    -0.50219235                                        0
2     0.13153117                                        0
3    -0.07891709                                        1
4     0.88678481                                        1
5     0.11697127                                        0 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T19:04:09.293

如果您查看`?'data.frame'`，您将看到第一个参数的以下内容：

“...这些参数的形式为 value 或 tag = value。组件名称是根据标签（如果存在）或已解析的参数本身创建的。”

如果您使用 '<-' 而不是 '='，data.frame() 会将您的输入作为*表达式*读取（将 rnorm(10) 分配给 a1），而不是作为分配给 a 的*值*(rnorm(10))*标签*(a1)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-26T19:34:01.823

只是为了添加@Paul 和@Edward 之前的（非常好的）答案，这是您使用 of`<-`而不是`=`inside的结果`data.frame()`。即，您创建了两个新对象：

```
> b1
Error: object 'b1' not found
> b2
Error: object 'b2' not found
> set.seed(100);b <- data.frame(b1 <- rnorm(10),b2 <- sample(c(1,0),10,replace=TRUE))
> 
> b1
 [1] -0.50219235  0.13153117 -0.07891709  0.88678481  0.11697127  0.31863009 -0.58179068  0.71453271 -0.82525943 -0.35986213
> b2
 [1] 0 0 0 0 1 1 0 0 0 1 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-26T19:13:16.283

Within functions '=' is used as naming or referring the function to a variable of a particular name and <- refers to the assignment function. When R runs it will first resolve '<-" functions within your function parameters. It will then name the variable wither the thing to the left of the equal sign or the full expression in this case "b1 <- rnorm(10)". Finally it will resolve the function (in this case data.frame).

You almost always want to use the '=' within a function. There can be cases where you may want to nest an assignment "<-" but normally this will make your code ridiculous to read.

# c - C中两毫秒之间的差异

> ID：11676185
> 
> 赞同：1
> 
> 时间：2012-07-26T18:56:58.427
> 
> 标签：c, time

我想知道 C 中是否有一个函数需要以下格式的时间（当前日期和时间以秒为单位是 Epoch 格式）

```
a.1343323725
b.1343326383 
```

并将结果作为两个时间之间的差返回给我，为 hrs:mins:secs

* * *

抱歉有任何混淆，为了澄清我的观点，我编写了一个代码，该代码获取用户的当前时间，执行一些代码块并再次获取时间。我想知道是否可以将差异转换为 hrs:mins:sec 作为字符串文字。

```
#include <sys/time.h>
#include <stdio.h>
int main(void)
{
        struct timeval tv = {0};
        gettimeofday(&tv, NULL);
        printf("%ld \n", tv.tv_sec);
        //Execte some code
         gettimeofday(&tv, NULL);
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:10:09.537

```
 unsigned diff = b-a;
 printf("%u:%u:%u", diff/3600, (diff % 3600)/60, diff % 60); 
```

*   `diff / 3600`是小时。
*   `(diff % 3600) / 60`是剩余分钟数
*   `(diff % 3600) % 60`等`diff % 60`于是剩余秒数

限制：此代码不适用于大于约 136 年的差异。

注意：使用 gettimeofday 作为性能计量器是个坏主意。最好使用的函数是带有 CLOCK_MONOTONIC 时钟 id 的 clock_gettime（它不受挂钟时间变化的影响）。但要注意 CLOCK_MONOTONIC 在 2.6 之前的 Linux 内核中不起作用。使用前检查时钟可用性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:32:11.733

首先，您想从这些函数返回的 timeval 结构中获取以秒为单位的时间差，使用如下所示：

```
int diff = a.tv_sec-b.tv_sec; 
```

其中 a 和 b 是 gettimeofday 返回的值。

接下来，您要将其分解为小时、分钟和秒的单位。

```
int hours=diff/3600;
int minutes=(diff/60)%60;
int seconds=diff%60; 
```

最后，我们希望使用来自的 snprintf 函数将该数据转换为字符串

```
#include <stdio.h>
char output[10];
snprintf(output, 10, "%d:%d:%d", hours, minutes, seconds); 
```

sprintf 单词与 printf 完全一样，除了输出进入字符串，而不是标准输出，并且 snprintf 是相同的，只是它不会将超过 n 个字符写入字符串，以防止缓冲区溢出。把它们缝合在一起，你就完成了工作。

# objective-c - 如何在objective-c库中隐藏对象

> ID：11676186
> 
> 赞同：5
> 
> 时间：2012-07-26T18:57:01.867
> 
> 标签：objective-c, static-libraries

我正在尝试创建一个用 Objective-C 编写的静态库。我想对这个库的消费者隐藏所有实现细节。在这个例子中，“OneThing”对象使用了库内部的其他功能，包括“SecretThing”，它可以被库中的许多东西使用（并且不能隐藏在 OneThing 中）。但是，我不希望库的用户看到 OneThing 使用 SecretThing，或者 SecretThing 甚至存在，即使他们在 .a 文件中四处寻找。

```
@interface OneThing
+ (void) do;
@end
@interface SecretThing
+ (void) undo;
@end
@implementation OneThing
+ (void) do
{
    [SecretThing undo];
}
@end
@implementation SecretThing
+ (void) undo { }
@end 
```

如果我们编译它，并检查符号表：

```
% cc -c onething.m
% nm onething.o | grep Thing
0000000000000000 t +[OneThing do]
00000000000002f8 s +[OneThing do].eh
0000000000000040 t +[SecretThing undo]
0000000000000320 s +[SecretThing undo].eh
0000000000000078 S _OBJC_CLASS_$_OneThing
0000000000000050 S _OBJC_CLASS_$_SecretThing
00000000000000a0 S _OBJC_METACLASS_$_OneThing
00000000000000c8 S _OBJC_METACLASS_$_SecretThing
0000000000000128 s l_OBJC_$_CLASS_METHODS_OneThing
00000000000001d8 s l_OBJC_$_CLASS_METHODS_SecretThing
0000000000000190 s l_OBJC_CLASS_RO_$_OneThing
0000000000000240 s l_OBJC_CLASS_RO_$_SecretThing
0000000000000148 s l_OBJC_METACLASS_RO_$_OneThing
00000000000001f8 s l_OBJC_METACLASS_RO_$_SecretThing
% 
```

正如我们所料，我们看到 OneThing 和 SecretThing 同样暴露在外。现在，如果能以某种方式解决 SecretThing 的内部对库的使用，并且只将 OneThing 暴露给外部世界，那就太好了。我想要做的是这个（只选择一种方法来尝试和管理）：

```
% ld -r onething.o -exported_symbol "+[OneThing do]" -o onlyonething.o 
```

我希望这会将“+ [OneThing do]”标记为“T”类型（全局文本），然后它将在“条带”中存活下来。它不是。这让我很烦恼，因为我认为这在某个时间点有效，也许当我更新工具链时，我得到了一个新版本的 ld（“ld -v”==ld64-133.3），它的工作方式不同。

除了获取链接器的源代码并编写自己的新标志来做我想做的事情之外，我没有其他想法。我希望我只是愚蠢，有一些我不明白的东西使这更容易。

* * *

在答案中建议这从根本上是不可能的，因为您需要在运行时可用的所有链接信息来进行方法分派。我相信这个实验证明这不是真的。

```
# Move OneThing and SecertThing into their own files, with their own .h
% cat c_api.m
#include "OneThing.h"

void one_thing_do()
{
    [OneThing do];
}
% cc -c c_api.c
% cat main.m
int main(int argc, char**argv)
{
    extern void one_thing_do();

    one_thing_do();
}
% cc main.m c_api.o onething.o secretthing.o -framework Foundation
% ./a.out
% ( runs to completion, no errors ) 
```

现在我们尝试隐藏我们不想让世界看到的部分：

```
% ld -r c_api.o onething.o secretthing.o -o strip_c_api.o -exported_symbol "_one_thing_do"
% strip -x c_strip_c_api.o
% nm strip_c_api.o
0000000000000118 s EH_Frame1
0000000000000098 s EH_Frame1
00000000000000d8 s EH_Frame1
                 U __objc_empty_cache
                 U __objc_empty_vtable
                 U _objc_msgSend
0000000000000000 T _one_thing_do
0000000000000130 s func.eh
00000000000000f0 s func.eh
00000000000000b0 s func.eh
0000000000000020 t l001
0000000000000060 t l002
0000000000000170 s l003
0000000000000190 s l004
00000000000001d8 s l005
0000000000000220 s l006
0000000000000240 s l007
0000000000000288 s l008
00000000000002f0 s l009
0000000000000318 s l010
0000000000000340 s l011
0000000000000368 s l012
% clang main.m strip_c_api.o -framework Foundation
% ./a.out
% nm a.out
0000000100001280 S _NXArgc
0000000100001288 S _NXArgv
0000000100001298 S ___progname
0000000100000000 T __mh_execute_header
                 U __objc_empty_cache
                 U __objc_empty_vtable
0000000100001290 S _environ
                 U _exit
0000000100000db0 T _main
                 U _objc_msgSend
0000000100000de0 T _one_thing_do
0000000100001000 s _pvars
                 U dyld_stub_binder
0000000100000d70 T start 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T19:06:45.627

由于 Objective-C 运行时的动态工作方式，这是不可能的。运行时需要这些信息来实例化类并向其发送消息，因此实际上没有办法在不破坏库的情况下隐藏这些信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T20:04:38.293

来自 Apple 的 Documentaion，更多详细信息：[C++ Runtime Environment Programming Guide](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/CppRuntimeEnv/Articles/SymbolVisibility.html#//apple_ref/doc/uid/TP40001670-98807-CJBDHDIC)

符号可见性和 Objective-C

Objective-C 是 C 的严格超集，Objective-C++ 是 C++ 的严格超集。这意味着所有关于 C 和 C++ 中符号可见性的讨论也适用于 Objective-C 和 Objective-C++。您可以使用编译器标志、可见性属性和可见性杂注来隐藏 Objective-C 代码文件中的 C 和 C++ 代码。

在 32 位 OS X 项目中，这些可见性控件仅适用于代码的 C 或 C++ 子集。它们不适用于 Objective-C 的类和方法。Objective-C 类和消息名称受 Objective-C 运行时的约束，而不是链接器，因此可见性的概念不适用于它们。**没有任何机制可以向该库的客户端隐藏在动态库中定义的 Objective-C 类或方法。**

在为 x86_64 OS X 或 iOS 构建时，符号可见性确实会影响 Objective-C 类。隐藏类不是安全灵丹妙药——有进取心的开发人员可以通过 Objective-C 运行时调用访问任何类——但如果你直接引用一个其可见性隐藏在你链接到的库中的类，你会得到一个链接器错误。这意味着，如果给定的类打算在库之外使用或在其定义的可执行文件中使用，则需要确保正确的符号可见性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-13T05:39:23.197

有一种方法可以混淆这些！您可以使用 NSInvocation 或 performSelector 来调用您的方法调用。这样，您可以加密方法/类名称，然后在运行时解密，以便可以调用它们。

# c# - TreeView_NodeMouseClick 处理程序

> ID：11676188
> 
> 赞同：2
> 
> 时间：2012-07-26T18:57:06.547
> 
> 标签：c#, winforms, treeview

如何使鼠标右键选择节点？我用鼠标右键点击了它，如下所示：

```
private void myTreeView_NodeMouseClick(object sender, TreeNodeMouseClickEventArgs e) 
        {
            if (e.Button == System.Windows.Forms.MouseButtons.Right)
            {
                this.myTreeView.SelectedNode = e.Node;
            }
        } 
```

我希望节点不是通过单击来选择的，而只是按下按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:11:00.840

我猜你正在寻找这样的东西：

```
void myTreeView_MouseDown(object sender, MouseEventArgs e) {
  if (e.Button == MouseButtons.Right) {
    TreeNode tn = myTreeView.GetNodeAt(e.Location);
    if (tn != null) {
      myTreeView.SelectedNode = tn;
    }
  }
} 
```

订阅 TreeView 的 MouseDown 事件并注释掉 NodeMouseClick 代码。

# php - Disallow variable overwrite in PHP

> ID：11676193
> 
> 赞同：4
> 
> 时间：2012-07-26T18:57:17.117
> 
> 标签：php, variables, overwrite

Is it possible to prevent variables from being overwritten in PHP? I am making a system that has some reserved variables and I don't want them to be replaced with something else after a certain point. It is possible? If not, what can I do to approach something close to this?

Some of these vars are instantiated classes so I can't define them as constants.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T19:00:22.110

看看[这个](https://stackoverflow.com/questions/1198237/whats-the-php-equivalent-of-a-final-variable-in-c)问题。此外，PHP 手册中有关[常量](http://php.net/manual/en/language.constants.php)的信息可能会有所帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T19:00:41.213

是的，它们被称为**[常量](http://il.php.net/manual/en/language.constants.php)**。

如果你不能使用它们，假设你正在运行最新的 PHP 版本，你可以使用**[namespaces](http://il.php.net/manual/en/language.namespaces.php)**，使用命名空间，你可以在不同的命名空间上拥有 2 个同名的变量。这样你就不会发生碰撞。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T19:00:25.853

在这种情况下（我知道）你能做的最好的事情就是在类中将它们设为私有变量。然后，您必须使用 getter 和 setter 来分配值或构造。这样，其他人的代码就不太可能与您的代码发生冲突。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T19:00:39.637

不可能找出在您的情况下它是最简单的，因为根本没有可用的代码，但更好的选择可能是

1.  将它们作为私有成员变量隐藏在一个类中。
2.  通过吸气剂暴露它们。

如果需要，使它们成为静态的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T19:10:57.720

也许您可以实现冻结状态之类的东西，如果类被冻结，则无法修改：

```
class Test
{
    private $variable;
    private $frozen = false;

    public function freeze() {
        $this->frozen = true;
    }

    public function setVariable($value) {
        if ($this->frozen)
            throw new Exception("...");

        $this->variable = $value;
    }
} 
```

# java - i want to execute .exe from a button using netbeans

> ID：11676195
> 
> 赞同：0
> 
> 时间：2012-07-26T18:57:24.973
> 
> 标签：java, netbeans6.8

i want to open another program which is not in windows path. below are code to open notepad which is in windows path.

```
Process process = Runtime.getRuntime().exec( "cmd.exe /C start notepad" ); 
```

and i want to open an exe file from the path below:

```
C:\Users\midi\Documents\Downloads\Compressed\ARToolKit-2.72.1-bin-win32\ARToolKit\bin 
```

please help me. thanks in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:01:30.217

您拥有执行可执行文件的代码。您需要做的就是避开路径中的斜线。

```
Process process = Runtime.getRuntime().exec("C:\\Users\\midi\\Documents\\Downloads\\Compressed\\ARToolKit-2.72.1-bin-win32\\ARToolKit\\bin"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T19:09:40.747

假设可执行文件称为“Executable.exe”，它应该只是

```
Process process = Runtime.getRuntime().exec("cmd.exe /C start C:\\Users\\midi\Documents\\Downloads\\Compressed\\ARToolKit-2.72.1-bin-win32\\ARToolKit\\bin\\Executable.exe" ); 
```

如果硬编码绝对路径是一个明智的决定，那就是另一个问题了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-21T12:55:19.517

如果没有任何效果，请使用记事本创建一个批处理文件并将其重命名为 someName.bat。对于您的问题，它应该如下所示；

```
@echo on
cd C:\Users\midi\Documents\Downloads\Compressed\ARToolKit-2.72.1-bin-win32\ARToolKit\bin 
run cnext 
```

然后假设 bat 文件在桌面上，在按钮单击侦听器后面包含下面的代码。

```
 try {
                Process pr=Runtime.getRuntime().exec("cmd /c start C:\\Users\\Labuser\\Desktop\\someName.bat");
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } 
```

# mysql - Best mysql structure for my data table

> ID：11676197
> 
> 赞同：0
> 
> 时间：2012-07-26T18:57:37.233
> 
> 标签：mysql, database, schema

Im very new to mysql, and any help would be much appreciated!

I have my main table with product information. (9000+ products)

```
 id       name          size     color
    9809355  product one   small    blue
    0109425  product two   large    black 
```

I also have cron script that that gets the following data of **each product** every hour (from ebay or amazon):

```
 id       price     timestamp
    9809355  $672.00   07/26/2012 @ 2:00pm
    0109425  $82.00    07/26/2012 @ 2:00pm 
```

(prices are allways changing)

**What is the best way to store this data?**

my options seem to be creating a table for each product, or placing all my data into one table for product prices.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-26T19:00:42.103

为每个产品创建一个表格很少是正确的方法。这会不必要地使连接复杂化——如果您想获得所有产品的列表，您将如何使用单独的表来实现呢？

如果您想将价格数据与价格明细分离，您可以创建一个与产品信息表具有一对一关系的价格表。我一般不提倡一对一的关系，但有时这是正确的方法。

# php - 如何在 PHP 中优化这个“彩票”功能？

> ID：11676203
> 
> 赞同：0
> 
> 时间：2012-07-26T18:57:46.570
> 
> 标签：php, optimization, combinations

早些时候，我在 Matlab 中为这种彩票功能编写了一个代码，只是为了测试它是否可能。但是，我实际上在 PHP 中需要它，所以我刚刚重写了代码，它似乎确实有效，但由于它涉及大量循环，我想确保我尽可能高效地完成它。

代码的作用：

您可以调用该函数`$lotto -> type($users,$difficulty)`，它将返回两个数字。这是解释，`$users`是在网站上注册的用户数量，即可能会买票的人。`$difficulty`是一个介于 1 和 10 之间的数字，其中 5 表示正常，1 表示容易，10 表示困难。这里的难度意味着匹配彩票上的所有数字有多难。

那么函数返回的数字是多少？那将是`$n`和`$r`。`$n`是彩票上的`$r`号码数量，是您可以从彩票中选择的号码数量。例如，在英国，一张国家彩票有 49 个号码，如果您选择 6。即`$n = 49`和`$r = 6`。

该函数如何计算这两个数字？在英国国家彩票中，有 13,983,816 种可能的彩票组合。如果我要运行`$lotto -> type(13983816,1)`它会返回`array(49,6)`。基本上，它试图做到这一点，所以有注册用户的数量就有尽可能多的票组合。

tl;博士，这是代码：

```
<?php
class lotto {
    public function type($users,$difficulty){
        $current_r = $r = 2;
        $current_n = 0;
        $difficulty = ($difficulty + 5) / 10; // sliding scale from 1 - 10
        $last_tickets_sold = 200; // tickets sold in last lotto
        $last_users = 100; // how many users there were in the last lotto
        $last_factor = $last_tickets_sold / $last_users; // tickets per user
        $factor = $last_factor * $difficulty;
        $users *= $factor;
        while($r <= 10){
            $u = 0;
            $n = $r;
            while($u < $users && $n < 50){
                $u = $this -> nCr(++$n,$r);
            }
            if($r == 2){
                $current_n = $n;
            } elseif(abs($this -> nCr($n,$r) - $users) < abs($this -> nCr($current_n,$current_r) - $users)){
                // this is a better match so update current n and r
                $current_r = $r;
                $current_n = $n;
            }
            $r++;
        }
        return array($current_n,$current_r);
    }
    private function nCr($n,$r){
        return $this -> factorial($n) / (
            $this -> factorial($r) * $this -> factorial($n - $r)
        );
    }
    private function factorial($x){
        $f = $x;
        while(--$x){
            $f *= $x;
        }
        return $f;
    }
}
$lotto = new lotto;
print_r($lotto -> type(1000,5));
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:30:53.267

我进行了快速扫描，发现了一些可以进一步优化的地方。

**组合**
您的算法是蛮力算法，可以进一步优化

```
private function nCr($n,$r){
    return $this -> factorial($n) / (
        $this->factorial($r) * $this->factorial($n - $r)
    );
} 
```

到

```
function nCr($n,$r) {
    $top = 1;
    $sub = 1;

    for($i = $r+1; $i <= $n; $i++)
        $top *= $i;

    $n -= $r;
    for($i = 2; $i <= $n; $i++)
        $sub *= $i;

    return $top / $sub;
} 
```

**太多的组合计算**
计算组合是昂贵的。

```
$u = 0;
$n = $r;
while($u < $users && $n < 50){
    $u = $this -> nCr(++$n,$r);
} 
```

到

```
$n = $r + 1;
$u = nCr($n, $r);

while ($u < $users && $n < 50) {
    $n++;
    $u *= $n;
    $u /= ($n - $r);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:01:06.397

立即观察到您可能会出现除以 0 错误

```
$last_factor = $last_tickets_sold / $last_users; 
```

可以通过在它周围放置一个简单的 if 语句来解决

```
$last_factor = ($last_users == 0) ? 0 : $last_tickets_sold / $last_users; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T19:05:22.437

无论对您的代码进行详细检查，您确定您的循环不需要继续或中断吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T23:05:54.187

**算法中factorial()**的范围是 [0,50]，那么为什么不静态地预先计算呢？

```
private static $factorial=array(1);

private static genFactorial($max) {
    if( count( self::$factorial ) > $max ) return;
    foreach ( range(count(self::$factorial), $max) as $n ) {
        self::$factorial[$n] = $i*self::$factorial[$n-1];
    }
} 
```

现在添加`self::genFactorial(50);`to`__construct()`或 to`type()`并替换对`$this -> factorial($n)`by 的引用`self::$factorial[$n]`。

这只是一个快速的代码转储；甚至没有进行编译检查，因此请原谅任何拼写错误等，但这样做是用数组元素获取替换函数调用（包括 while 循环）。

# delphi - Delphi Form Minimize and Restore using Timer

> ID：11676204
> 
> 赞同：2
> 
> 时间：2012-07-26T18:57:49.813
> 
> 标签：delphi, delphi-xe2

I am a delphi learner. I am having one Delphi Progect with "MainForm", "MinimizeTimer" and "RestoreTimer". I have defined the following codes.

**Minimize Timer :**

```
 if MainForm.AlphaBlendValue >= 225 then
  begin
    MinimizeTimer.Enabled := true;
    MainForm.AlphaBlendValue := MainForm.AlphaBlendValue - 5;
  end; 
```

**Restore Timer :**

```
 if MainForm.AlphaBlendValue >= 0 then
  begin
    RestoreTimer.Enabled := true;
    MainForm.AlphaBlendValue := MainForm.AlphaBlendValue + 5;
  end; 
```

My requirement is that the MainForm will be first fadeout using "MinimizeTimer" and then will be minimized when "**_**" Button on Caption Bar is pressed. And also be fadein using "RestoreTimer" and then will be restored after clicking on taskbar. So I defined again the following codes:

```
 private
    { Private declarations }
    procedure WMSysCommand(var Msg: TWMSysCommand) ; message WM_SYSCOMMAND;
..
..
..
..
..
procedure TMainForm.WMSysCommand(var Msg: TWMSysCommand) ;
begin
  if Msg.CmdType = SC_MINIMIZE then MinimizeTimer.Enabled := true;
  DefaultHandler(Msg);
  if Msg.CmdType = SC_RESTORE then RestoreTimer.Enabled := true;
  DefaultHandler(Msg);
end; 
```

But I am not getting the expected result. The MainForm is Minimized and Restored as in regular way. Please remember in my project I have one "FormCloseQuery" event also.

Please help me.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T20:49:55.167

您对您的要求使用了错误的逻辑。试试这个：

```
procedure TMainForm.MinimizeTimerTimer(Sender: TObject);
begin
  if AlphaBlendValue > 0 then
  begin
    AlphaBlendValue := AlphaBlendValue - 5;
  end
  else
  begin
    MinimizeTimer.Enabled := False;
    Perform(WM_SYSCOMMAND, SC_MINIMIZE, 0);
  end;
end;

procedure TMainForm.RestoreTimerTimer(Sender: TObject);
begin
  if AlphaBlendValue < 255 then
  begin
    AlphaBlendValue := AlphaBlendValue + 5;
  end else begin
    RestoreTimer.Enabled := False;
  end;
end;

procedure TMainForm.WMSysCommand(var Msg: TWMSysCommand);
begin
  case Msg.CmdType of
    SC_MINIMIZE: begin
      if AlphaBlendValue > 0 then
      begin
        MinimizeTimer.Enabled := True;
        Exit;
      end;
    end;
    SC_RESTORE: begin
      if AlphaBlendValue < 255 then begin
        RestoreTimer.Enabled := True;
      end;
    end;
  end;
  inherited;
end; 
```

# android - 空指针异常（定位服务）

> ID：11676208
> 
> 赞同：0
> 
> 时间：2012-07-26T18:58:04.817
> 
> 标签：android, eclipse, google-maps, geolocation, maps

我正在尝试学习如何定位服务，当我尝试在地图上标记我的位置时出现空指针异常。请帮我删除这个例外。

日志猫 -

```
07-27 00:02:08.169: E/AndroidRuntime(304): FATAL EXCEPTION: main
07-27 00:02:08.169: E/AndroidRuntime(304): java.lang.NullPointerException
07-27 00:02:08.169: E/AndroidRuntime(304):  at com.google.android.maps.PixelConverter.toPixels(PixelConverter.java:71)
07-27 00:02:08.169: E/AndroidRuntime(304):  at com.google.android.maps.PixelConverter.toPixels(PixelConverter.java:61)
07-27 00:02:08.169: E/AndroidRuntime(304):  at com.sanjay.map.Map$MyLocationOverlay.draw(Map.java:116)
07-27 00:02:08.169: E/AndroidRuntime(304):  at com.google.android.maps.OverlayBundle.draw(OverlayBundle.java:42)
07-27 00:02:08.169: E/AndroidRuntime(304):  at com.google.android.maps.MapView.onDraw(MapView.java:494)
07-27 00:02:08.169: E/AndroidRuntime(304):  at android.view.View.draw(View.java:6740)
07-27 00:02:08.169: E/AndroidRuntime(304):  at android.view.ViewGroup.drawChild(ViewGroup.java:1640)
07-27 00:02:08.169: E/AndroidRuntime(304):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
07-27 00:02:08.169: E/AndroidRuntime(304):  at android.view.ViewGroup.drawChild(ViewGroup.java:1638)
07-27 00:02:08.169: E/AndroidRuntime(304):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
07-27 00:02:08.169: E/AndroidRuntime(304):  at android.view.View.draw(View.java:6743)
07-27 00:02:08.169: E/AndroidRuntime(304):  at android.widget.FrameLayout.draw(FrameLayout.java:352)
07-27 00:02:08.169: E/AndroidRuntime(304):  at android.view.ViewGroup.drawChild(ViewGroup.java:1640)
07-27 00:02:08.169: E/AndroidRuntime(304):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
07-27 00:02:08.169: E/AndroidRuntime(304):  at android.view.ViewGroup.drawChild(ViewGroup.java:1638)
07-27 00:02:08.169: E/AndroidRuntime(304):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
07-27 00:02:08.169: E/AndroidRuntime(304):  at android.view.View.draw(View.java:6743)
07-27 00:02:08.169: E/AndroidRuntime(304):  at android.widget.FrameLayout.draw(FrameLayout.java:352)
07-27 00:02:08.169: E/AndroidRuntime(304):  at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1842)
07-27 00:02:08.169: E/AndroidRuntime(304):  at android.view.ViewRoot.draw(ViewRoot.java:1407)
07-27 00:02:08.169: E/AndroidRuntime(304):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1163)
07-27 00:02:08.169: E/AndroidRuntime(304):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
07-27 00:02:08.169: E/AndroidRuntime(304):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-27 00:02:08.169: E/AndroidRuntime(304):  at android.os.Looper.loop(Looper.java:123)
07-27 00:02:08.169: E/AndroidRuntime(304):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-27 00:02:08.169: E/AndroidRuntime(304):  at java.lang.reflect.Method.invokeNative(Native Method)
07-27 00:02:08.169: E/AndroidRuntime(304):  at java.lang.reflect.Method.invoke(Method.java:521)
07-27 00:02:08.169: E/AndroidRuntime(304):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-27 00:02:08.169: E/AndroidRuntime(304):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-27 00:02:08.169: E/AndroidRuntime(304):  at dalvik.system.NativeStart.main(Native Method) 
```

活动 -

```
package com.sanjay.map;

import java.util.List;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Point;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;  
import android.os.Bundle;
import android.widget.TextView;
import android.widget.Toast;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;

public class Map extends MapActivity {

MapController mapController;
MapView mapview;
 GeoPoint p=null;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mapview = (MapView)findViewById(R.id.mapview);
    mapview.setBuiltInZoomControls(true);
    mapController = mapview.getController();
    mapController.setZoom(16);

    LocationManager locationManager = (LocationManager)getSystemService(LOCATION_SERVICE);

    LocationListener locationListener = new LocationListener() {

        private TextView locationDetails;

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onLocationChanged(Location location) {
            makeUseOfNewLocation(location);
            //Toast.makeText(getApplicationContext(), "New Locationdd", Toast.LENGTH_LONG).show();

        }

        private void makeUseOfNewLocation(Location location) {

            double lon = (double) (location.getLongitude() * 1E6);
            double lat = (double) (location.getLatitude() * 1E6);

            int lontitue = (int)lon;
            int latitute = (int)lat;

            Toast.makeText(getApplicationContext(), "New Lontitue = "+ lontitue +"\n New Latitute = "+ latitute, Toast.LENGTH_LONG).show();
            locationDetails = (TextView)findViewById(R.id.textViewMap);
            locationDetails.setText("New Lontitue = "+ lontitue +"\n New Latitute = "+ latitute);

            GeoPoint geopoint = new GeoPoint(latitute, lontitue);
            mapController.animateTo(geopoint);

            MyLocationOverlay myLocationOverlay = new MyLocationOverlay();
            List<Overlay> list = mapview.getOverlays();
            list.add(myLocationOverlay);

            //mapview.invalidate();
        }
    };

    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0,locationListener);
    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,0,0,locationListener);
}

@Override
protected boolean isRouteDisplayed() {
    return false;
}

public class MyLocationOverlay extends com.google.android.maps.Overlay {

@Override
public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {
    Paint paint = new Paint();

    super.draw(canvas, mapView, shadow);
    // Converts lat/lng-Point to OUR coordinates on the screen.
    Point myScreenCoords = new Point();
    mapView.getProjection().toPixels(p, myScreenCoords);

    paint.setStrokeWidth(1);
    paint.setARGB(255, 255, 255, 255);
    paint.setStyle(Paint.Style.STROKE);

    Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.marker);

    canvas.drawBitmap(bmp, myScreenCoords.x, myScreenCoords.y, paint);
    canvas.drawText("You are here!", myScreenCoords.x, myScreenCoords.y, paint);
    return true;
}
}
} 
```

显现 -

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.sanjay.map"
android:versionCode="1"
android:versionName="1.0" >

 <uses-permission android:name="android.permission.INTERNET" /> 
 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
 <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <uses-library android:name="com.google.android.maps" />

    <activity
        android:name=".Map"
        android:label="@string/title_activity_map" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

布局 -

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<TextView android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="Waiting for location..."
android:id="@+id/textViewMap"/>

 <com.google.android.maps.MapView
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/mapview"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:clickable="true"
  android:apiKey="/*My_KEY*/">

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:07:10.083

您`GeoPoint`在班级顶部创建的称为 p 是`null`. 你从来没有把它设置为别的东西。所以你实际上是在打电话`toPixels(null, myScreenCoords);`

# git - git log the difference between 1 branch from another

> ID：11676210
> 
> 赞同：67
> 
> 时间：2012-07-26T18:58:22.077
> 
> 标签：git, git-merge, git-log

I have 2 branches A and B.

Whenever I run a build, Branch A gets merged into Branch B. I want to be able to email out all the updates made in A, since the last time the build was ran. How can I use `git log` to be able to copy all the commits made in A since the last A -> B merge?

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-07-26T19:02:13.257

那会

```
git log B..A 
```

例如“显示所有在 A 中但不在 B 中的提交”或者如果您希望针对非本地分支执行此操作

```
git log origin/B..origin/A 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-06-09T19:48:09.093

An alternative syntax would be to use:

```
$ git log refA refB --not refC 
```

or in your case of comparing only two branches

```
$ git log A --not B 
```

Also from the [GIT SCM Commit Ranges Docs](http://git-scm.com/book/en/v2/Git-Tools-Revision-Selection#Commit-Ranges)

When comparing two branches it really comes down to preference. I just find this a bit more readable and don't have to worry about confusing `A...B` with `A..B` (also mentioned in the docs).

# objective-c - Multi-threaded core-data iOS crashing

> ID：11676212
> 
> 赞同：1
> 
> 时间：2012-07-26T18:58:22.310
> 
> 标签：objective-c, ios, core-data, nsmanagedobjectcontext, nsoperation

I am developing an iOS app that uses a SQLLite core data db. The app runs a sync loop in a background thread that grabs data from a web service and writes it to the db. The foreground (UI) thread continues while this happens, allowing the user to run searches against the db.

I am stress-testing the app and it is crashing. I am running searches against the db in the foreground while the background sync task runs. There are approx 10,000 records in the db, so it is not huge.

The background thread is created using NSOperation and it creates an NSManagedObjectContext in the main method of the NSOperation.

The foreground thread uses a different NSManagedObjectContext object initialised within (and made available by) the appDelegate.

The background sync thread writes a thousand records at a time to the db, then its managedobjectcontext performs a save.

The NSOperation main method looks like this:

```
-(void) main {

    NSDictionary* dictionary = [ HPSJSON getDictionaryFromData:_data ];

    // NEED to create the MOC here and pass to the methods.
    NSManagedObjectContext* moc = [[NSManagedObjectContext alloc] init];
    [moc setUndoManager:nil];
    //[moc setMergePolicy:NSMergeByPropertyStoreTrumpMergePolicy];
    //[moc setMergePolicy:NSOverwriteMergePolicy];
    [moc setPersistentStoreCoordinator:getApp().persistentStoreCoordinator];

    if (dictionary==nil){

        [ getApp().operationManager performSelectorOnMainThread: [ self getFailedFunction ] withObject:nil waitUntilDone:NO ];    
        return;
    }

    NSString* rc = [self processData: dictionary andMOC:moc ]; // Writes lots of records to the db and saves the moc

    // performSelectorOnMainThread invokes a method of the receiver on the main thread using the default mode.
    // i.e. call the method within HPSOperationManager as specified by the getSuccessFunction of the specialised sub-class
    [ getApp().operationManager performSelectorOnMainThread: [ self getSuccessFunction ] withObject:rc waitUntilDone:NO ];        

} 
```

The processData method (called by main) contains lots of code, but here is the snippet that does the save:

```
@try {
            NSLog(@"HPSDbOperation%@ about to save Indexes moc",objectName);

            if (rcHappy==YES)
            {
                // register for the moc save notification - this is so that other MOCs can be told to merge the changes
                [[NSNotificationCenter defaultCenter] 
                 addObserver:getApp() 
                 selector:@selector(handleDidSaveNotification:)
                 name:NSManagedObjectContextDidSaveNotification 
                 object:moc];

                NSError* error = nil;
                if ([moc save:&error] == YES)
                {
                    NSLog(@"HPSDbOperation%@ Indexes SAVED",objectName);

                }else {
                    NSLog(@"HPSDbOperation%@ Indexes NOT saved ",objectName);
                }

                // unregister from notification
                [[NSNotificationCenter defaultCenter] 
                 removeObserver:getApp() 
                 name:NSManagedObjectContextDidSaveNotification 
                 object:moc];

            }

        }
        @catch (NSException * e) {
            NSLog(@"HPSDbOperationBase save Indexes Exception: %@", e);
            rcHappy=NO;
        } 
```

The appDelegate contains the following method to handle the ManagedObjectContext merge:

```
- (void)handleDidSaveNotification:(NSNotification*) note 
{

    @try {

        NSLog(@"appDelegate handleDidSaveNotification about to run");
        [__managedObjectContext mergeChangesFromContextDidSaveNotification:note];
        NSLog(@"appDelegate handleDidSaveNotification did run");

    }
    @catch (NSException * e) {
        NSLog(@"appDelegate handleDidSaveNotification Exception: %@", e);
    }

} 
```

I let the sync run, and then I stress the foreground UI thread by running successive searches. After a minute or three of syncing and searching, the app crashes. It doesn't seem to get caught by any of my try-catch constructs. The crash log in Xcode shows the following:

```
libobjc.A.dylib`objc_msgSend:
0x34d92f68:  teq.w  r0, #0
0x34d92f6c:  beq    0x34d92faa               ; objc_msgSend + 66
0x34d92f6e:  push.w {r3, r4}
0x34d92f72:  ldr    r4, [r0]  <-- exception here Thread1 EXC_BAD_ACCESS (Code=1)
0x34d92f74:  lsr.w  r9, r1, #2
0x34d92f78:  ldr    r3, [r4, #8]
0x34d92f7a:  add.w  r3, r3, #8
0x34d92f7e:  ldr    r12, [r3, #-8]
0x34d92f82:  and.w  r9, r9, r12
0x34d92f86:  ldr.w  r4, [r3, r9, lsl #2]
0x34d92f8a:  teq.w  r4, #0
0x34d92f8e:  add.w  r9, r9, #1
0x34d92f92:  beq    0x34d92fa6               ; objc_msgSend + 62
0x34d92f94:  ldr.w  r12, [r4]
0x34d92f98:  teq.w  r1, r12
0x34d92f9c:  bne    0x34d9317e               ; objc_msgSendSuper_stret + 34
0x34d92f9e:  ldr.w  r12, [r4, #8]
0x34d92fa2:  pop    {r3, r4}
0x34d92fa4:  bx     r12
0x34d92fa6:  pop    {r3, r4}
0x34d92fa8:  b      0x34d92fb0               ; objc_msgSend_uncached
0x34d92faa:  mov.w  r1, #0
0x34d92fae:  bx     lr 
```

I am very new to iOS and objective-c and core-data. I'm a bit stuck on how to progress this issue. How can I tell exactly where/why the app is going wrong? Anyone have any idea why it might be crashing? I have done a bit of reading on multi-threading in core data and I believe that by creating the MOCs in the main method of NSOperation I am following guidelines, and by using handleDidSaveNotification I am also merging my MOCs correctly.

Help! Thank you.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:11:56.637

多线程核心数据使用的主要规则是托管对象上下文和持久存储的“线程限制”。这意味着，拥有线程本地托管对象上下文是安全的，但不会将它们从一个线程传递到另一个线程。如果这样做，您必须自己处理锁定和同步。

似乎您在辅助线程中创建了一个托管对象上下文，然后将其传递给主线程。我理解正确吗？如果是这样，这可以解释你崩溃。

我正在考虑的一种可能性是：

1.  后台线程保存；发送通知；

2.  主线程开始合并；

3.  在合并进行时，后台线程会进行另一次保存。

而不是在第 3 点“保存”，它可能是您在`processData`方法中执行的任何操作，将 moc 置于不同的状态。

在我看来，您应该能够通过您已有的日志跟踪轻松验证此事件是否是导致崩溃的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:12:53.610

You aren't creating the context with a concurrency type, or merging changes through a parent child context relationship, so your likely problem is a threading issue. Contexts are not thread-safe, and must be accessed or mutated on the same thread that created them

# c# - Find and Replace XML file

> ID：11676215
> 
> 赞同：0
> 
> 时间：2012-07-26T18:58:28.047
> 
> 标签：c#, xml

I have a XML sitemap file which looks like this

```
<?xml version="1.0" encoding="UTF-8" ?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
<url>
<loc>http://www.example.com/web/201/hello_world1.html</loc>
</url>
<url>
<loc>http://www.example.com/web/202/hello_world2.html</loc>
</url>
<url>
<loc>http://www.example.com/web/203/hello_world3.html</loc>
</url>
</urlset> 
```

and I want to change it to like

```
<?xml version="1.0" encoding="UTF-8" ?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
<url>
<loc>http://www.example.com/web2/1/hello_world1.html</loc>
</url>
<url>
<loc>http://www.example.com/web2/1/hello_world2.html</loc>
</url>
<url>
<loc>http://www.example.com/web2/1/hello_world3.html</loc>
</url>
</urlset> 
```

I want to change the different IDs 201, 202, 203 with just 1 ID, normal find and replace don't do that, Any idea how to do that in C# or suggest me a Regular Expression to do it in efficient way. Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:09:22.103

将 XML 视为字符串并用正则表达式替换：

```
new Regex("web/[0-9]+/").Replace(youxmlstr, "web2/1/"); 
```

# java - ActiveMQ 代理如何结束连接？

> ID：11676219
> 
> 赞同：1
> 
> 时间：2012-07-26T18:58:43.300
> 
> 标签：java, connection, activemq

事情是这样的：在客户端连接到代理而不结束其连接后，即使我在代理端更改了身份验证，它也永远不会被踢出。

那么经纪人有没有办法在**不**重新启动服务器的情况下结束他与客户端之间的连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T19:00:35.010

您可以通过 JMX 手动进入并找到连接并终止它（我认为）。但是如果您在代理端更改身份验证，您是否不需要重新启动代理以获取这些更改？

# collections - Adding a model to Collection in Backbone

> ID：11676223
> 
> 赞同：0
> 
> 时间：2012-07-26T18:58:56.820
> 
> 标签：collections, backbone.js, model

> **Possible Duplicate:**
> [Backbone.js Empty Array Attribute](https://stackoverflow.com/questions/11459244/backbone-js-empty-array-attribute)

I've been working on a backbone project and came to a problem, so I mocked it up simply, but then ran into some things I didn't understand. Here is the code:

```
(function(){
    myModel = Backbone.RelationalModel.extend({
        idAttribute: 'id',
        relations: [{
            type: Backbone.HasMany,
            key: 'mysubmodels',
            relatedModel: 'mySubmodel',
            reverseRelation: {
                key: 'mymodel',
                includeInJSON: 'id',
            },
        }],
    });
    mySubmodel = Backbone.RelationalModel.extend({
        idAttribute: 'id',
    });
    myCollection = Backbone.Collection.extend({
        model: myModel,
    }); 
    myView = Backbone.View.extend({
        initialize: function(){
            this.collection.bind('add', this.doSomething);
        },
        doSomething: function(){
            console.log('a model has been added')
        },
    });
}());

$(document).ready(function(){   
    var data = {
        id:1,
        data: 'this is one',
        mysubmodel: {
            data: 'hello'
        }           
    };

    var cltn = new myCollection();
    console.log(cltn);
    var vw = new myView({collection: cltn});

    var mdl = new myModel(data);
    cltn.add(mdl);
    console.log(cltn);
}); 
```

Essentially, the part that is confusing me is that the two 'console.log(cltn)' at the bottom are both registering that a model has been added despite the fact that the model is added *after* the first log.

# java - 使用相同的支持 bean 将数据从 page1 传递到 page2 的最佳方法是什么？

> ID：11676224
> 
> 赞同：3
> 
> 时间：2012-07-26T18:58:58.263
> 
> 标签：java, jsf, jsf-2, primefaces

我在 page1 上创建了一个简单的搜索表单，在 page2 上我将显示结果。

我想知道使用 @ViewScoped 支持 bean 的最佳方法是什么。以前我不得不使用@SessionScope 来实现这一点。

Page1 - 搜索页面：

```
<h:form id="documents">

    <h4 class="dkblue u-case">Documents Search</h4>

    <h:outputLabel for="mainNum" value="mainNumber" />
    <p:inputText id="mainNum" value="#{documentBacking.document.mainNumber}"/>

    <h:outputLabel for="secNum" value="secNumber" />
    <p:inputText id="secNum" value="#{documentBacking.document.secNumber}"/>

    <h:outputLabel for="formType" value="Form Type" />
    <p:inputText id="formType" value="#{documentBacking.document.formType}"/>

    <p:commandButton value="Search" action="#{documentBacking.search}" />
    <p:commandButton id="clear" value="Clear" type="reset"/>

</h:form> 
```

Page2 - 结果页面：

```
<p:dataTable value="#{documentBacking.results}" var="results">
    <p:column headerText="Main Number">
        <h:outputText value="#{results.mainNumber}" />
    </p:column>

    <p:column headerText="Secondary Number">
        <h:outputText value="#{results.secNumber}" />
    </p:column>

    <p:column headerText="Form Type">
        <h:outputText value="#{results.formType}" />
    </p:column>
</p:dataTable> 
```

@ViewScoped 支持 Bean：

```
@ManagedBean
@ViewScoped
public class DocumentBacking {

    private Document document = new Document();
    private List<Document> results = new ArrayList<Document>();

    public Document getDocument() {
        return document;
    }

    public void setDocument(Document document) {
        this.document = document;
    }

    public List<Document> getResults() {
        return results;
    }

    public void setResults(List<Document> results) {
        this.results = results;
    }

    public String search() {
        results = new ArrayList<Document>();

        // dummy data
        Document doc = new Document();
        doc.setMainNumber("1111");
        doc.setSecNumber("2222");
        doc.setFormType("OTHER");
        doc.setSubFormType("TEST");
        results.add(doc);
        doc = new Document();
        doc.setMainNumber("1234");
        doc.setSecNumber("4321");
        doc.setFormType("SOMETHING");
        doc.setSubFormType("TESTER");
        results.add(doc);

        return "results.xhtml?faces-redirect=true";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:06:13.793

使用自定义范围对您的代码更可靠。[这](https://blogs.oracle.com/rlubke/entry/custom_managed_bean_scopes)是 JSF 2.0 自定义范围的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:59:52.067

我决定使用`f:viewParam`'s 和`f:event type="preRenderView"`. 这样，我通过查询字符串参数获得了可收藏的页面，并且我在 preRenderView 侦听器的结果页面上生成了结果。

我正在使用与我的问题相同的搜索页面。

结果页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets">
<f:metadata>
    <f:viewParam name="mainNumber" value="#{documentBacking.document.mainNumber}" />
    <f:viewParam name="secNumber" value="#{documentBacking.document.secNumber}" />
    <f:viewParam name="formType" value="#{documentBacking.document.formType}" />
    <f:viewParam name="subFormType" value="#{documentBacking.document.subFormType}" />
    <f:event type="preRenderView" listener="#{documentBacking.generateResults}" />
</f:metadata> 
...
<p:dataTable value="#{documentBacking.results}" var="results">
    <p:column headerText="Main Number">
        <h:outputText value="#{results.mainNumber}" />
    </p:column>

    <p:column headerText="Secondary Number">
        <h:outputText value="#{results.secNumber}" />
    </p:column>

    <p:column headerText="Form Type">
        <h:outputText value="#{results.formType}" />
    </p:column>
</p:dataTable> 
```

@ViewScoped 支持 Bean：@ViewScoped 公共类 DocumentBacking {

```
private Document document = new Document();
private List<Document> results = null;

public Document getDocument() {
    return document;
}

public void setDocument(Document document) {
    this.document = document;
}

public List<Document> getResults() {
    return results;
}

public void setResults(List<Document> results) {
    this.results = results;
}

public void generateResults() {
    results = new ArrayList<Document>();

    // dummy data
    Document doc = new Document();
    doc.setMainNumber("9343");
    doc.setSecNumber("71254");
    doc.setFormType("OTHER FORMS");
    doc.setSubFormType("CALGB");
    results.add(doc);
    doc = new Document();
    doc.setMainNumber("1234");
    doc.setSecNumber("4321");
    doc.setFormType("SOMETHING");
    doc.setSubFormType("MAYO");
    results.add(doc);
}

public String search() {
    return "results.xhtml?faces-redirect=true&amp;includeViewParams=true";
} 
```

}

# javascript - Underscore.js _.isElement 函数

> ID：11676225
> 
> 赞同：0
> 
> 时间：2012-07-26T18:58:59.427
> 
> 标签：javascript, underscore.js

我一直在寻找 underscore.js 库函数，我注意到一个函数返回元素是否是 DOM 元素。函数如下。

```
_.isElement = function(obj) {
    return !!(obj && obj.nodeType == 1);
}; 
```

你能告诉我为什么`!!`被使用而不是仅仅返回`(obj && obj.nodeType == 1)`。我想知道是否`!!`增加了任何性能改进。任何的想法...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T19:01:53.487

`!!`强制结果为布尔值。

`null`例如，如果您通过，`&&`则将返回`null`。将其`!!`转换为`false`.

如果`obj`是“真实的”，你会得到`obj.nodeType == 1`一个布尔值的结果。

# tsql - TSQL Count 'Where' Condition

> ID：11676226
> 
> 赞同：18
> 
> 时间：2012-07-26T18:59:05.290
> 
> 标签：tsql, count, conditional, distinct

How do I implement the 'meaning' of the following psuedo-SQL statement:

```
COUNT(distinct id where attribute1 > 0) 
```

In other words, how do I make conditional, distinct counting statements?

Thanks!

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-26T19:05:40.837

好吧，如果您可以过滤整个查询，那么 LittleBobbyTables 已经为您提供[了答案](https://stackoverflow.com/a/11676249/621962)。如果没有，您可以像这样获得该列：

```
count(distinct case when attribute1 > 0 then id end) -- implicit null-else, iirc 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T19:00:30.163

你几乎拥有它：

```
SELECT COUNT(DISTINCT [ID]) AS DistinctID
FROM YourTable
WHERE attribute1 > 0 
```

# .net - 从客户端发送电子邮件的最佳实践或方法是什么（使用.net）

> ID：11676228
> 
> 赞同：0
> 
> 时间：2012-07-26T18:59:09.247
> 
> 标签：.net

这**不是**关于如何在 .net 中发送电子邮件的问题。我只需要一些关于什么是发送电子邮件的最佳方法的意见。

作为诊断过程的一部分，我需要从安装在各种客户端上的 .net 程序自动发送电子邮件。

我使用 GMAILs SMTP 服务器发送邮件，我知道我很快就会达到每天 500 封电子邮件的限制。所以我想知道我是否可以在我的托管系统上拥有一个 WebService 并让客户端程序调用我的 Web 服务来发送电子邮件。这样我就可以使用自己的 SMTP 服务器了。

请让我知道这种方法是否可扩展或任何其他替代解决方案。TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:02:28.290

这是一种有效的方法（集中发送邮件），它有助于提高防火墙级别的安全性（更少的机器可以访问端口 25）。但是您只需要注意该服务对公众的开放程度。发送电子邮件的公共服务很快就会成为垃圾邮件的中继站。在实现这一点时，对服务的委托访问、身份验证等应该是您的首要任务。它是可扩展的，因为将来，如果需要，您可以在客户端不知道的情况下将大量邮件排队。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:03:04.433

对于它的价值，我们通过我们的网络服务发送我们所有的电子邮件（至少来自我们内部编写的应用程序）。我们每天处理超过 500 封电子邮件，没有任何问题。

我们的 Web 服务使用 IIS Pickup Directory 来处理它们，因为我们发现它更安全。

# javascript - A good tutorial for jQuery or JavaScript Sticky Elements

> ID：11676231
> 
> 赞同：0
> 
> 时间：2012-07-26T18:59:15.290
> 
> 标签：javascript, jquery, css, plugins

I am trying to find a decent tutorial or code sample of how to achieve a common effect I see around the web. Essentially its having an element attach itself to the top of the window when it meets the element while scrolling. Quite frankly I have no idea what to call this functionality, or how to go about searching for the specifics of achieving it.

Here is on example, from the [Twitter Bootstrap Docs](http://twitter.github.com/bootstrap/components.html). The bar under the heading & sub-heading will attach itself to the window as it scrolls past to help you navigate the page.

Another example is on the [Android Developers Pages](http://developer.android.com/sdk/win-usb.html). The left side navigation element will attach itself to the window on scroll.

Any assistance in this is greatly appreciated.

Thanks in advance & cheers!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T19:01:43.517

查看[jquery-waypoints](http://imakewebthings.com/jquery-waypoints/)和[Sticky Elements Example](http://imakewebthings.com/jquery-waypoints/shortcuts/sticky-elements/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:44:10.897

用于`position:sticky`粘性元素。

这是解释的文章。

[http://updates.html5rocks.com/2012/08/Stick-your-landings-position-sticky-lands-in-WebKit](http://updates.html5rocks.com/2012/08/Stick-your-landings-position-sticky-lands-in-WebKit)

[粘性位置演示](http://html5-demos.appspot.com/static/css/sticky.html)

# ruby-on-rails - Omniauth-facebook 并不总是注销用户

> ID：11676233
> 
> 赞同：3
> 
> 时间：2012-07-26T18:59:17.663
> 
> 标签：ruby-on-rails, facebook, omniauth

我正在尝试根据 railscast #360 中显示的说明让我的注销按钮注销应用程序和 Facebook。当我单击它时，该应用程序似乎要注销，但我的 Facebook 会话仍然存在。每隔五次，用户就会退出 Facebook。我怀疑这与调用 FB.logout() 函数时 facebook cookie 没有被破坏有关，因为当我手动删除该 cookie 时，用户将退出 facebook。也许这是一个时间问题，因为这是异步的？有什么建议么？以下是相关代码：

**应用程序.html.erb**

```
 <div id="fb-root"></div>
    <script>

    window.fbAsyncInit = function() {
        FB.init({
            appId      : '(**myappid**)', // App ID
            status     : true, // check login status
            cookie     : true // enable cookies to allow the server to access the session
        });

        $('#sign_in').click(function(e) {
            e.preventDefault();
            return FB.login(function(response) {
                if (response.authResponse) {
                    return window.location = '/auth/facebook/callback';
                }
            });
        });

        return $('#sign_out').click(function(e) {
            FB.getLoginStatus(function(response) {
                if (response.authResponse) {
                    return FB.logout();
                }
            });
            return true;
        });
    };
     </script> 
```

**session_controller.rb**

```
class SessionsController < ApplicationController

      def create
        user = User.from_omniauth(env["omniauth.auth"])
        session[:user_id] = user.id
        redirect_to root_url
      end

      def destroy
        session[:user_id] = nil
        redirect_to root_url
      end
    end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:44:20.547

通过添加解决此问题：

```
 def destroy
    session[:user_id] = nil
    sleep 3
    redirect_to root_url
  end 
```

到会话控制器

# html - Toggle between multiple divs jQuery

> ID：11676237
> 
> 赞同：3
> 
> 时间：2012-07-26T18:59:36.727
> 
> 标签：html, toggle, alternate

Between alternate divs with id's 1-3 how do I show the visability between each one when the user clicks the corresponding link? I only want one div to be shown at a time. Thanks.

```
<a>Link 1</a><br>
<a>Link 2</a><br>
<a>Link 3</a><br>

<div id="1">
    <p align="left">Content 1</p>
    </p>
</div>
<div id="2">
    <p align="left">Content 2</p>
    </p>
</div>
<div id="3">
    <p align="left">Content 3</p>
    </p>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T19:05:50.520

将 id 添加到您的链接中，以便您可以添加事件处理程序。假设您将链接 ID 设置为 Link1、Link2、Link3，请使用以下代码连接事件处理程序：

```
$("#Link1").bind("click", function() {
   $("#1").show();
   $("#2").hide();
   $("#3").hide();
}); 
```

为其他链接（2 和 3）编写上面的事件处理程序，调整逻辑使其显示相应的 div，并隐藏其他链接。

更强大的解决方案：

```
<a class="myLink" divId="1">Link 1</a>

$(".myLink").bind("click", function() {
   $(".myDiv").hide();
   var divId = $(this).attr("divId");
   $("#" + divId).show();
}); 
```

假设您将“myDiv”类添加到所有 div 并将“myLink”类添加到所有链接。

工作示例：http: [//jsfiddle.net/8XZKx/1/](http://jsfiddle.net/8XZKx/1/)

# python - Freezing of threads that doesn't allow to recognize a pattern

> ID：11676238
> 
> 赞同：1
> 
> 时间：2012-07-26T18:59:41.310
> 
> 标签：python, wxpython, python-imaging-library

I have a Python application that uses wxPython and some additional threads. One thread uses [`PIL.Image.open`](http://www.pythonware.com/library/pil/handbook/image.htm). Under certain circumstances the application freezes so that you see an uncomplete GUI. I found out that it hangs at `PIL.Image.open`. When I put debug `print`s in the PIL module, I can see one time it hangs here, one time there ... -- which I can't understand. It seems totally unrelated.

Is there anything a thread can do in Python, that causes other threads to stop at actually unproblematic lines like `import string`? Or is wxPython able to give such influence?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T19:18:07.327

长时间运行的任务将冻结 GUI，例如 wxPython 或 Tkinter。不过，将长时间运行的进程放入线程通常可以解决问题。我猜您正在线程中以非线程安全的方式与 wxPython 进行通信。如果您**没有**使用 wx.CallAfter、wx.CallLater 或 wx.PostEvent 从线程与 wxPython 通信，那么这就是问题所在。您必须使用其中一种方法。

否则，我们将需要一个小的可运行示例来诊断问题。

# c# - Regex between quotes

> ID：11676240
> 
> 赞同：0
> 
> 时间：2012-07-26T18:59:45.773
> 
> 标签：c#, regex, string

I have to parse as part of a project a playlist file:

The layout looks like this:

```
{
         "info" : "",
         "time" : "05:00",
         "url_stream" : "http://loopstream01.apa.at/?channel=oe1&id=20120726_0500_1_2_nachrichten_XXX_w_",
         "day_label" : "26.07.2012",
         "short_title" : "Nachrichten",
         "url_detail" : "",
         "url_json" : "/programm/308178/konsole",
         "parts" : [],
         "tag" : "",
         "id" : "308178",
         "title" : "Nachrichten",
         "url_playlist" : "/programm/308178/playlist"
      },........... and so on 
```

now i want to get the values of the "properties". I tried this one

```
"info" : "(?<info>(([^"]*)))", .... 
```

but it is buggy because the it is possible that there is something like this:

"info" : "Hello "World" this was a test",

you see that "World" is also in "" and so it gets buggy. Does anyone has a good and clean solution for me?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:10:09.107

使用`JavaScriptSerializer`Microsoft[在此处](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)记录的类来反序列化 JSON。这将比 RegEx 容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:38:06.287

我在互联网上找到了两个相似的页面。可以使用[Json.Net](http://json.codeplex.com/)解析它们，如下所示：

```
using (var wc = new WebClient())
{
    string url = "http://derruki.dyndns.org/oe1rip/json-list-source.php";
    string json = wc.DownloadString(url);

    dynamic dynObj = JsonConvert.DeserializeObject(json);
    foreach(var item in dynObj)
    {
        Console.WriteLine("INFO:{0}\nTITLE:{1}\nURL:{2}\n\n",
            item.info, item.short_title, item.url_stream);
    }
} 
```

因为`http://oe1.orf.at/programm/konsole/tag/20120726`您应该将 for 循环更改为

```
foreach(var item in dynObj.list) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:15:45.393

试试这个：

```
(?<=[\n\r])[^\S\n\r]*"info"[^\S\n\r]*:[^\S\n\r]*"(?<info>.*?)",?[^\S\n\r]*(?=[\n\r]) 
```

# web-services - 在CXF JAX-WS单向方法调用中获取客户端IP地址的可靠方法

> ID：11676248
> 
> 赞同：12
> 
> 时间：2012-07-26T19:00:26.250
> 
> 标签：web-services, jakarta-ee, soap, jax-ws, cxf

我正在使用以下代码来获取 JAX-WS 单向方法调用的客户端 IP 地址：

```
protected HttpServletRequest getServletRequest() {
    MessageContext ctx = wsContext.getMessageContext();
    return (HttpServletRequest) ctx.get( MessageContext.SERVLET_REQUEST );
}

protected synchronized String getClientIp() {
    String clientIp = "";
    HttpServletRequest request = getServletRequest();
    if ( request != null ) {
        clientIp = request.getRemoteAddr();

        // Handle proxy
        String header = request.getHeader( "x-forwarded-for" );
        if( header != null && !header.isEmpty() ) {
            clientIp = header.split( "," )[0];
        }
    }
    return clientIp;
} 
```

当多个客户端连接时，为请求检索到的 IP 地址有时是来自先前请求的不正确缓存值。获取单向呼叫发起方的 IP 地址的可靠方法是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-20T21:42:09.990

您可以使用以下代码片段来查找客户端 IP

```
Message message = PhaseInterceptorChain.getCurrentMessage();
HttpServletRequest request = (HttpServletRequest)message.get(AbstractHTTPDestination.HTTP_REQUEST);
request.getRemoteAddr() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:34:53.617

如果您的目的是建立一个 Web 服务连接，那么[WS-Addressing](http://jax-ws.java.net/nonav/jax-ws-21-ea2/docs/why-wsaddressing.html)可能会有所帮助。

除了替代的寻址方案， `HttpServletRequest.getRemoteAddr`与`getHeader`替代的 IP 地址相结合被指定为正确的。如果他们不是，那么就没有多少追索权（是的，我可以想象各种扭曲，但原则仍然存在）。

那么，您是否拥有平台的最新/最稳定版本？这听起来更像是您的平台的问题 - 您没有提供任何详细信息。

# php - 我需要具有一组特定功能的本地站点搜索

> ID：11676252
> 
> 赞同：1
> 
> 时间：2012-07-26T19:00:35.873
> 
> 标签：php, database, geolocation, directory, search-engine

我必须建立一个目录类型的网站，该网站在搜索方面的功能相当密集。

里面会有很多医生（医生的姓名、地址、传记、专业等）。所有这些都将存储在数据库中。将会有一些首选的成员医生，当他们作为搜索结果出现时，他们将在搜索结果中排在所有其他人的首位。

我需要用户能够通过在一个字段中输入他们的查询来进行搜索，并可以选择通过搜索将他们的邮政编码添加到第二个字段（但不是必需的）。如果他们添加邮政编码，搜索将首先显示离他们最近的医生（如谷歌本地搜索）。如果他们不输入邮政编码，我可以对他们进行地理定位并仍然使用相同的功能首先显示离他们最近的医生吗？

我正在将所有医生信息输入到数据库表中，因为我不想为每个医生手动创建一个页面，因为有超过 4,000 名医生，这将花费很长时间。我将创建一个页面，他们每个人都可以登录以在字段中输入他们的信息并点击提交并将其放置在我的表格中。（这个我很好，我可以处理）。

谁能建议我可以使用的搜索引擎或搜索工具/程序，我可以对其进行调整以使这一切正常工作？

我在几个站点上使用过 Sphider 并且非常喜欢它，但我无法想象如何使用它并获得所有这些功能。我知道这是一个非常雄心勃勃的项目，因此任何地方的帮助都是无价的。

谢谢你们！祝我好运！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:14:06.813

我只需要了解一件事，正如您所说，医生数据列在您数据库的表格中，那么为什么您需要额外或第三方工具来搜索？您可以轻松地为您的表格编写搜索脚本。

据我了解，您的表包含大约 4000 条记录，我有一个应用程序有一个包含 6236 条记录的表，古兰经经文，我很容易通过它管理自己的搜索。

# c++ - 正常阻塞后检测到堆损坏

> ID：11676259
> 
> 赞同：5
> 
> 时间：2012-07-26T19:00:50.267
> 
> 标签：c++, memory, memory-leaks

我有以下代码，但不确定为什么在遇到 Myclass 的析构函数时会收到堆损坏检测错误。我相信我正在正确地释放内存？？

```
#include <iostream>
#include <vector>
using namespace std;

class MyClass{
private:
    char* mp_str;
public:
    MyClass():mp_str(NULL){}
    ~MyClass(){
        delete [] mp_str;
    }

    void setString(const char* str);
    void printString();
};

int main(){
    MyClass* a = new MyClass();
    std::vector<MyClass> myVector;

    myVector.push_back(*a);

    a->setString("Hello World");
    myVector[0].setString("Goodbye world");

    a->printString();
    myVector[0].printString();

    return 1;
}

void MyClass::setString(const char* const str){
    if(!str)
        return;

    size_t len = strlen(str);

    if(!this->mp_str){
        this->mp_str = new char[len];
        memset(mp_str, 0, len+1);
    }
    strncpy(mp_str, str, len);
}

void MyClass::printString(){
    if(this->mp_str)
        cout << mp_str;
    else
        cout << "No string found";
} 
```

**编辑**：（固定代码）

```
void MyClass::setString(const char* const str){
    if(!str)
        return;

    size_t len = strlen(str);

    if(!this->mp_str){
        this->mp_str = new char[len+1];
        memset(mp_str, 0, len+1);
    }
    strncpy(mp_str, str, len);
} 
```

在 main() 中，我还添加了

```
delete a; 
```

在调用 return 1 之前；

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T19:03:49.683

您需要分配字符串 +1 的长度，以考虑空值。你是正确的。

```
if(!this->mp_str){
    this->mp_str = new char[len+1];
    memset(mp_str, 0, len+1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:34:30.850

（在拉斐尔的回答被接受后发布，应该是这样。）

缓冲区溢出绝对是这次特定崩溃的根本原因，但可以通过简化实现同时调整遵守[三规则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)来避免崩溃。也就是说，既然您实现了一个析构函数（处理`mp_str`），那么您还应该实现一个复制构造函数和一个赋值运算符。

但是，坚持 TRoT 的另一种方法是完全避免需要实施任何这些事情。在这种情况下，使用 a`std::string`而不是 a`char *`将解决崩溃并符合 TRoT：

```
class MyClass{
private:
    std::string mp_str;
public:
    void setString(const char* str) { mp_str = str ? str : ""; }
    void printString() {
        if (mp_str.size()) std::cout << mp_str;
        else std::cout << "(mp_str is empty)";
    }
}; 
```

# python - 网站上的 Python 模块导入失败

> ID：11676261
> 
> 赞同：0
> 
> 时间：2012-07-26T19:00:58.613
> 
> 标签：python, import, module

我有一个要在远程服务器（网络主机）上使用的模块（pyScss），并且由于我没有安装在通常目录中的权限，因此我安装在另一个（`/home/private/lib/python`）中并修改了`$PYTHONPATH`. 现在问题在于尝试导入我的模块。

在解释器和命令行中，一切正常。我可以导入模块并使用它和一切。即使我说`> python -S`，我可以使用`site.addsitedir('/home/private/lib/python')`并且一切正常。

现在假设我有一个`/home/public/test.py`使用模块的文件`scss`。`> python /home/public/test.py`在命令行上键入有效，但加载`http://mywebsite.com/test.py`失败 - “没有名为 scss 的模块”。`sys.path`和的值`sys.executable`在这两种情况下都是一致的。

这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T01:54:28.883

对于其他有此问题的人，我不久前为此制作了一个视频教程：[http ://www.youtube.com/watch?v=pf2HS9gGI7k&list=UUJ_3fstMOH-g4yBxtvgAWkw&index=1&feature=plcp](http://www.youtube.com/watch?v=pf2HS9gGI7k&list=UUJ_3fstMOH-g4yBxtvgAWkw&index=1&feature=plcp)

我认为它应该涵盖您采取的步骤！

# css - 一个简单的 CSS 边距问题

> ID：11676272
> 
> 赞同：5
> 
> 时间：2012-07-26T19:01:33.463
> 
> 标签：css

我一直认为 CSS 边距背后的基本理论非常简单。一个边距为 10px 的 div 将在该元素周围创建一个 10px 的缓冲。当两个 div 并排放置时，两者都有 10px 的边距，导致 div 相距 20px；两个元素都有 10px 的边距，导致元素之间的距离为 20px。这似乎是正确的，也是我一直相信的事实。

但是，我最近发现，如果不是将两个 div 并排放置，并将一个放在另一个下方，那么两个元素之间的边距现在只有 10px。另一个 div 给出的 10px 边距发生了什么？为什么并排和垂直堆叠之间没有一致性？

边距本质上是说“不要在我的 x 像素内放置任何东西”。通过“任何东西”，这是否包括其他元素的边距？在并排的情况下，答案似乎是肯定的，边距说“不要在我的 x 像素内放置任何东西，包括你自己的边距”。在垂直的情况下，似乎允许后者？

请有人澄清一下，这样我就可以把它放在床上继续我的晚上:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:14:34.240

这与它们何时`inline`或`inline-block`更改其属性有关，以便它们彼此相邻堆叠而不会将边距折叠在一起（这是正常的，但不直观的行为）。

[http://jsfiddle.net/xeCZJ/3/](http://jsfiddle.net/xeCZJ/3/)

当它们处于默认`display:block`属性时，边距会折叠。您可以使用`inline-block`它们来使它们按预期运行，但是您必须使用`br`包含元素的宽度或宽度来手动控制换行符。

或者您可以使用填充而不是边距。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:14:46.450

看起来`display:inline`忽略所有顶部/底部边距，`display:block`允许边距折叠，`display:inline-block`并将它们加在一起以获得巨大的边距。签出这个 jsFiddle 例如：http: [//jsfiddle.net/Z2nUN/4/](http://jsfiddle.net/Z2nUN/4/)

```
<p>Some content</p>
<p>some more content</p>
<p class="wideMargin">some more extra content</p>
<p class="narrowMargin">less extra content</p>
<p>Some content</p>
<p>some more content</p>
<p class="wideMargin">some more extra content</p>
<p class="narrowMargin">less extra content</p>

<hr />
<div class="allBlock">
<p>Some content</p>
<p>some more content</p>
<p class="wideMargin">some more extra content</p>
<p class="narrowMargin">less extra content</p>
</div>

<hr />
<div class="allInlineBlock">
<p>Some content</p>
<p>some more content</p>
<p class="wideMargin">some more extra content</p>
<p class="narrowMargin">less extra content</p>
<p>Some content</p>
<p>some more content</p>
<p class="wideMargin">some more extra content</p>
<p class="narrowMargin">less extra content</p>
</div>​

p{ margin:10px; background:#ccc; display:inline;}
.wideMargin{ margin:30px;}
.narrowMargin{ 0px; }
.allBlock p{ display:block;}
.allInlineBlock p{ display:inline-block;}​ 
```

从来没有注意到这一点。今天我学会了，我猜。

编辑：添加了 display:block 和 inline-block

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T19:26:20.297

看来您自己找到了答案：折叠边距是[CSS2.1 推荐](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)和[CSS3 工作草案](http://www.w3.org/TR/css3-box/#margins)的一部分。后者取决于[`block-progression`](http://www.w3.org/TR/2003/CR-css3-text-20030514/#Progression)，默认情况下为`'tb'`(top -> bottom)。这将导致仅顶部/底部边距折叠。为了折叠左边距/右边距，必须使用`block-progression:lr`or `block-progression:rl`：

> *   如果边距相邻且 B 为“rl”或“lr”，则框 A 的左边距与其父框 B 的左边距折叠。
> *   如果边距相邻且 B 为“rl”或“lr”，则框 A 的右边距与其父框 B 的右边距折叠。

不幸`block-progression`的是，它不在[最新的工作草案](http://www.w3.org/TR/css3-text/)中，并且不太可能被任何浏览器实现。CSS3 box 模块自 2007 年以来就没有更新过，所以不清楚什么时候你会得到一个明确的答案。

# c# - 如果我在祖先方法中，如何找到后代类的名称？

> ID：11676278
> 
> 赞同：3
> 
> 时间：2012-07-26T19:02:05.710
> 
> 标签：c#, .net, reflection

我们记录我们的进程以进行调试，并使用反射来获取记录的方法名称。目前，我使用 System.Reflection.MethodInfo 参数调用 logging 方法，并在 logging 方法内部解析该参数以使用 Method.DeclaringType.Name 来获取该方法所在的类的名称（以及 Method.Name ，目前这不是问题）。我从中得到的是祖先名称，我想要后代（即使正在使用的方法没有被覆盖并且直接从祖先运行）。这可能吗？我浏览了反射信息，但在任何地方都没有找到后代名称。

我不关心Reflection的性能问题，如果有必要，我愿意在logger方法中添加额外的参数来获取我需要的信息。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T19:07:37.263

不，你不会从`MethodInfo`. 您应该传入`this`，此时日志记录代码可以调用`GetType()`以查找对象的*实际*类型。

# android - 重复调用方法上的android线程

> ID：11676280
> 
> 赞同：0
> 
> 时间：2012-07-26T19:02:19.793
> 
> 标签：android, multithreading, geolocation

我`checkUpdate`在这个方法中调用了一个线程：

```
public void onLocationChanged(Location location)
    checkUpdate = new Thread() {
        public void run() {
          try {
               // do some long staff using location variable            
              } catch (Exception e) {}
          handler.sendEmptyMessage(0);
        }
     };
    checkUpdate.start(); 
```

问题是`onLocationChanged()`系统调用该方法，有时在线程完成之前，这会导致我的应用程序出现不可预测的行为。

如果已经在运行或类似的东西，有什么方法可以不运行线程？

* * *

解决方案：

我知道发生了什么，你需要调用`locationManager.removeUpdates(locationListener);` 并设置`locationManager=null`你的销毁活动，否则即使应用程序关闭，服务仍在运行并获取位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:03:59.923

> 如果已经在运行或类似的东西，有什么办法不运行线程

您可以使用 an`AtomicBoolean`来设置一个值，该值告诉您是否启动线程。然后在`run()`方法结束时，您可以将标志重置为假。

像下面这样的东西应该可以工作：

```
private final AtomicBoolean threadStarted = new AtomicBoolean(false);
...
public void onLocationChanged(Location location) {
    if (threadStarted.compareAndSet(false, true)) {
        // start the thread
        checkUpdate = new Thread() {
            public void run() {
                try {
                    // do thread stuff here
                } finally {
                    // when the thread finishes, set the started flag to false
                    threadStarted.set(false);
                }
            }
        };
        checkUpdate.start();
    }
} 
```

# php - Mysql Date_format 错误

> ID：11676285
> 
> 赞同：0
> 
> 时间：2012-07-26T19:02:43.407
> 
> 标签：php, syntax-error

我总是收到此错误消息：
Parse error: syntax error, unexpected T_STRING in /myroot/public_html/test.php on line 5
这是第 5 行的样子：

```
$sql = mysql_query("SELECT date_format(active,'%a/%b/%Y') AS active FROM members")  
or die mysql_error(); 
```

我从另一个 stackoverflow 问题复制代码时找不到任何问题
这是整个脚本：
$sql = mysql_query("SELECT date_format(active,'%a/%b/%Y') AS active FROM members" )
或死 mysql_error();
while ($results = mysql_fetch_assoc($sql)) {
$date = $results["active"];
$user = $results["user"];
}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:07:02.313

这是一个 PHP 错误，但无论如何.. 尝试更改

```
or die mysql_error(); 
```

至

```
or die (mysql_error()); 
```

编辑（忘记了强制性的“不要使用 mysql_*”，所以在这里）：
请不要在新代码中使用 mysql_ 函数，它们已被弃用。

# d3.js - d3 追加和输入问题

> ID：11676286
> 
> 赞同：8
> 
> 时间：2012-07-26T19:02:45.660
> 
> 标签：d3.js, svg

所以我在遵循一个非常简单的 d3 教程时遇到了问题。本质上，我试图通过将数据绑定到当前的 svg 圆元素然后调用 enter.append 来添加 SVG 圆元素，如下所示：

```
var svg =d3.select("body").selectAll("svg");
var circle = svg.selectAll("circle");
var w=window.innerWidth;
console.log(circle);
circle.data([500,57,112,200,600,1000]);

circle.enter().append("circle")
    .attr("cy",function(d) {
        return (d)
        })
    .attr("cx", function(i){
        return (i*100)
    })
    .attr("r", function(d) {
        return Math.sqrt(d);
        }) 
```

这似乎会添加 3 个新的圆形元素（因为我已经创建了 3 个）。但是，我没有添加这 3 个新的圆形元素，而是遇到了这个错误：

> 未捕获的类型错误：对象 [object SVGCircleElement]、[objectSVGCircleElement]、[object SVGCircleElement] 没有方法“输入”

我对段落做了基本相同的事情，它似乎工作正常：

```
var p =d3.select("body").selectAll("p")
.data([4, 8, 15, 16, 23, 42])
.text(function(d) { return "I'm number " + d + "!"; });

 //Enter    
 p.enter().append("p")
.text(function(d) { return "I'm number " + d + "!"; })
.style("color", function(d, i) {
 return i % 2 ? "#000" : "#eee";
}); 
```

但是，一旦我尝试将 SVG 元素添加到其中，我就会继续收到相同的错误。

看起来应该只是语法错误什么的，但是我已经将代码浏览了 5 万亿次，并且找不到任何东西。

非常感谢您的任何帮助，并感谢您抽出宝贵的时间。

艾萨克

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-26T19:05:49.377

你想调用`enter`结果`circle.data`而不是`circle`它本身。

```
var circle = svg.selectAll("circle");
circle.data([500,57,112,200,600,1000]).enter().append("circle"); 
```

通过将返回值存储在变量中，您在`p`示例中正确地做到了这一点。而在您的示例中，您将返回值存储在变量中。`data``p``circle``d3.select.selectAll``circle`

# c# - 基于 GUI 的 IoC 容器？

> ID：11676287
> 
> 赞同：9
> 
> 时间：2012-07-26T19:02:46.983
> 
> 标签：c#, .net, inversion-of-control

是否有一个 IoC 容器，其中配置是实时的，并通过类似图表的 gui 而不是通过代码或类似 xml 的配置完成？

我正在考虑类似[Simulink](http://www.mathworks.com/products/simulink/)的东西，图中的每个框都代表一个 C# 对象，链接代表依赖注入。

我看到很多非常酷的用例，但我找不到任何看起来像这样的东西。

# ruby-on-rails - 从 ActiveRecord 模型继承时防止 STI

> ID：11676288
> 
> 赞同：32
> 
> 时间：2012-07-26T19:02:54.323
> 
> 标签：ruby-on-rails, ruby, sti

在 Rails 3.2.6 上，我有一个继承自 ActiveRecord::Base 的类：

```
class Section < ActiveRecord::Base
  ...
end 
```

当我从这个类继承时，Rails 会假设我想要 STI：

```
class AnotherSection < Section
   ..Rails assumes I have a type field, etc...
end 
```

我希望能够从`Section`该类继承并将子类用作普通的 Ruby 子类，而不需要 Rails STI 魔法。

从模型子类化时有没有办法防止 STI `ActiveRecord::Base`？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-26T19:10:39.313

您可以通过禁用`inheritance_column`模型来实现这一点，如下所示：

```
class AnotherSection < Section
  # disable STI
  self.inheritance_column = :_type_disabled

end 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-06-17T23:55:00.610

接受的答案肯定会起作用，但推荐的（我敢说“正确”:)方法是设置`abstract_class`：

```
class Section < ActiveRecord::Base
  self.abstract_class = true
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-21T17:17:14.800

在 ActiveRecord 上存储继承的唯一完全支持的策略是 STI。但是，您可以自担风险模拟具体的类表继承。正如 smathy 所指出的，具有抽象超类的具体类表继承工作正常。

但是...如果您想要使*AnotherSection*只是一个普通类（不会在数据库中持久化），您可以禁用鉴别器列（如 Veraticus 所建议的那样）。但是，如果您保存*AnotherSection*，它将与 Section 保存在同一个表中，您将无法区分它们。此外，如果您使用*AnotherSection*查找*Section*，它将返回*AnotherSection*，从而破坏原始实例化：

```
 #create a Section and saves it
    sect = Section.create()
    sect.save() 
    #retrieve the Section as a AnotherSection, breaking polymorphism... 
    sect = AnotherSection.find(sect.id)
    # another section is more than a section, it is inconsistent. 
```

如果*AnotherSection*不打算被持久化，它覆盖持久化操作的最安全路径，例如 save() 和 find()：

```
 class AnotherSection < Section
       # disable STI, as pointed by Veraticus
       self.inheritance_column = :_type_disabled
       # disable save and finding
       def save(*args)
         #exception? do nothing?
       end
       def find(*args)
         #exception? do nothing?
       end
       def find_by(*args)
         #exception? do nothing?
       end
       # this does not stops here! there is first, last, and even a forty_two finder method! not to mention associations...
    end 
```

简而言之，你可以这样做，但你不应该这样做。风险很高。您应该考虑另一种选择，例如使用 MIXIN 而不是继承。

# php - Zend Framework DB Complex Where 或条件

> ID：11676291
> 
> 赞同：3
> 
> 时间：2012-07-26T19:03:03.117
> 
> 标签：php, mysql, sql, zend-framework

如何使用 Zend Framework Table 进行这样的 SELECT。

`SELECT * FROM table WHERE (field1 = 0 AND field2 = 1) OR (field2 = 0 AND field3 = 1)`

使用只是`$table->orWhere()`不允许我在括号内执行多个条件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:08:04.843

构建复杂查询：

```
// Zend_Db_Table
$this->getAdapter()->quoteInto('(field1 = 1 AND field2 =2) OR ...'); 
```

[这](http://blog.motane.lu/2009/05/21/zend_db-quoteinto-with-multiple-arguments/)是一篇全面的文章以获取更多信息。

# c# - 匿名输入的列表或对象列表

> ID：11676294
> 
> 赞同：2
> 
> 时间：2012-07-26T19:03:11.640
> 
> 标签：c#, asp.net-mvc, json, list, object

我有以下问题（简化）。

我有一张狗的名单：

```
public List<Dog> dogs { get; set; } 
```

我目前通过在视图中将其转换为 json 对象来访问此列表：

```
@(new HtmlString(@Json.Encode(@ViewBag.dogs))) 
```

然后我使用 javascript 遍历这个 json 对象并将其显示在页面上。

我想将汽车添加到此列表中。

但是，由于列表是强类型列表，`dogs`我的第一个想法是将列表创建为一个事物`dogs`并`cars`具有共同点，**它们都是 objects**。

当我尝试将我的狗列表更改为 列表时`objects`，我收到以下错误

```
Cannot implicitly convert type 'System.Collections.Generic.List<object>' to System.Collections.Generic.List<dog> 
```

我对此进行了研究，发现[这个](https://stackoverflow.com/q/6557/1324019)问题对我没有多大帮助，只是告诉我我无法列出狗和汽车。然而，就我的目的而言，这并不合适。我需要我的列表同时包含狗和汽车，以便我可以在我的应用程序中访问它们。

我预计会建议的一种解决方案是我有两个单独的列表，并发出两个单独的 ajax 请求。但是，我需要按特定顺序（基于它们的创建时间）混合汽车和狗，这样解决方案并不理想。

简而言之，我想知道实现这一目标的最佳方法是什么。也许我走错了方向，所以如果有意义的话，我不反对做一些完全不同的事情。

感谢您一如既往的帮助！

编辑：我已经尝试过演员表并且有效。但是，我需要访问 dog 的属性（我们称之为“毛皮”），我似乎无法做到这一点（我需要再次施法吗？）

```
'object' does not contain a definition for 'fur' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T19:09:39.743

只有当狗和汽车实现相同的接口或扩展相同的类（例如对象，然后您可以在条件下使用 typeof 对它们执行一些操作）时，您才能制作同时包含狗和汽车的列表。

**编辑：**

简单的例子

```
using System;
using System.Collections.Generic;

namespace Polymorphism
{
    class Program
    {
        public class Car
        {
            public string Drive()
            {
                return "Wrrrr!";
            }
        }

        public class Dog 
        {
            public string Talk()
            {
                return "Woof";
            }
        }

        static void Main()
        {
            var car = new Car();
            var dog = new Dog();

            List<object> list = new List<object>();
            list.Add(car);
            list.Add(dog);

            foreach (object o in list)
            {
                if (o is Car)
                    Console.WriteLine((o as Car).Drive());
                else
                    Console.WriteLine((o as Dog).Talk());
            }
        }
    }
} 
```

我很抱歉该代码，但我从[Wikipedia](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming#Examples)复制了它并使用[Ideone进行了编辑](http://ideone.com/Ft3Jv)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T19:06:23.003

我不太清楚汽车从哪里进来，为什么你不能把你的财产改成一`List<object>`开始，但你可以这样做：

```
List<object> objects = foo.Dogs.Cast<object>().ToList(); 
```

或者在 C# 4 中，您可以使用泛型协方差并编写：

```
List<object> objects = foo.Dogs.ToList<object>(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T19:18:10.367

在列表中拥有不同对象并访问它们共有的属性的最简单方法是在类上使用接口。

例如：

```
public interface ICoated {
    string Coating { get; set; }
}

public class Dog : ICoated {
    public string Coating {
        get { return Fur; }
        set { Fur = value; }
    }
}

public class Car: ICoated {
    public string Coating {
        get { return PaintJob; }
        set { PaintJob = value; }
    }
} 
```

然后，您将使用 a`List<ICoated>`来访问都涂有某种东西的对象。显然，如果您有许多共同的属性，那么您将适当地扩展此模型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-26T19:18:27.787

尝试找出两个对象之间的共同点并使用基类或接口。如果你使用了一个界面，你可能会看到它看起来像这样：

```
public interface IAnimal{
   Fur Fur{ get; set; }
   bool CanBark { get; set;}
}

public class Dog : IAnimal {
   public Fur Fur{ get; set; }
   public bool CanBark { get; set;}
}

public class Cat: IAnimal {
   public Fur Fur{ get; set; }
   public bool CanBark { get; set;}
}

public class Fur{
    public string Color {get;set;}
    public int Length {get;set}
} 
```

等等等等

那么，您的列表可以是：

```
public List<IAnimal> dogs { get; set; }
public List<IAnimal> cats{ get; set; } 
```

(宠物) 深思熟虑

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-26T19:25:03.837

我可能会创建一个具有共享属性和“类型”属性的接口。

```
public enum CrazyObjectType
{
    Dog,
    Car
}

public interface ICrazyObject
{
    DateTime Date { get; }
    CrazyOjbectType MyObjectType { get; }
}

public class Dog : ICrazyObject
{
    public Dog()
    {
        MyObjectType = CrazyObjectType.Dog;
    }

    public DateTime Date { get; }
    public CrazyObjectType MyObjectType { get; }
}

public class Car : ICrazyObject
{
    public Car()
    {
        MyObjectType = CrazyObjectType.Car;
    }

    public DateTime Date { get; }
    public CrazyObjectType MyObjectType { get; }
} 
```

然后，`List<object>`您可以`List<ICrazyObject>`在投射到汽车或狗之前检查类型，而不是使用它。

```
foreach (var myObject in myObjects)
{
    if (myObject.MyObjectType == CrazyObjectType.Car)
    {
        var myCar = (Car)myObject;
        //Do Stuff with myCar here.
    }
} 
```

这使您可以安全地在投射之前了解您的类型。然后，您在类型汽车中具有与狗不同的任何属性。您可以轻松、安全地访问！

# dart - Dart 中是否有任何类型的事件支持？

> ID：11676300
> 
> 赞同：2
> 
> 时间：2012-07-26T19:03:41.463
> 
> 标签：dart

我想在我的类中触发事件以让其他类得到通知，但是尝试查看文档后我似乎找不到任何东西。

我应该创建自己的 Observable 类吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T19:45:05.577

Dart 事件模型主要关注 HTML DOM 事件。有几个社区努力实现了更通用的事件模型：

[Dartlib 事件模型 (Kevin Moore)](https://github.com/kevmoo/dartlib/tree/master/lib/dartlib/events)

[DartNet 事件模型（我的项目），受 .net 启发](https://github.com/prujohn/DartNet-Event-Model)

在 Buckshot 库中，还有一个使用事件模型的 ObservableList 实现，但这不是我见过的唯一浮动的 ObservableList，因此您可能会找到更适合您需要的东西。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T20:16:05.537

按照此错误进行更新：[http ://code.google.com/p/dart/issues/detail?id=1873](http://code.google.com/p/dart/issues/detail?id=1873)

# php - Opendir 在子文件夹中的文件之前获取文件数组

> ID：11676313
> 
> 赞同：0
> 
> 时间：2012-07-26T19:04:45.590
> 
> 标签：php, opendir

我有一个函数，它以递归方式返回文件夹中的文件数组。

```
protected function getFiles($base) {

    $files = array();       
    if(!is_dir($base)) return $files;

    if (($handle = opendir($base)) != false) {
        while (false !== ($file = readdir($handle))) {
            if ($file == "." || $file == "..") continue;

            if(is_dir("$base/$file")) {                 
                $subfiles = $this->getFiles("$base/$file");
                $files = array_merge($files, $subfiles);                    
            } else {                    
                if(File::type($file,false) == "xml") 
                    $files[] = "$base/$file";
            }
        }
        closedir($handle);
    }

    return $files;
} 
```

我该如何修改它，以便它总是在任何子文件夹之前首先列出根文件？目前默认情况下，文件夹总是排在第一位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:16:30.517

您可能想查看 PHP SPL DirectoryIterator 类。您可以实例化该对象，然后快速迭代以分割目录、文件和链接，并为每个对象获取完整的 SplFileInfo 对象（这使得获取您想要的有关文件的任何信息变得非常容易）。

```
$directory = '/path/to/directory';
$iterator = new DirectoryIterator($directory);
$dirs = array();
$files = array();
$links = array();

foreach($iterator as $obj) {
    if($obj->isFile()) {
        $files[] = $obj;
    } else if ($obj->isDir()) {
        $dirs[] = $obj;
    } else if ($obj->isLink()) {
        $links[] = $obj;
    }
} 
```

抱歉刚刚意识到您想递归地执行此操作。好吧，使用 RecursiveDirectoryIterator ，但概念大致相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:10:35.683

只需在循环目录指针时创建一个子目录数组，并在最后迭代目录数组：

```
protected function getFiles($base) {

    $files = $dirs = array();       
    if(!is_dir($base)) return $files;

    if (($handle = opendir($base)) != false) {

        while (false !== ($file = readdir($handle))) {
            if ($file == "." || $file == "..") continue;

            if(is_dir("$base/$file")) {    
                $dirs[] = "$base/$file";
            } else {                    
                if(File::type($file,false) == "xml") 
                    $files[] = "$base/$file";
            }
        }
        closedir($handle);

        foreach ($dirs as $dir) {
            $subfiles = $this->getFiles($dir);
            $files = array_merge($files, $subfiles);                    
        }

    }

    return $files;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T19:11:33.710

使用两个数组，一个用于当前文件夹中的文件，一个用于子文件夹中的文件，然后合并它们。

```
protected function getFiles($base) {

    $files = array();       
    $subFiles = array();        
    if(!is_dir($base)) return $files;

    if (($handle = opendir($base)) != false) {
        while (false !== ($file = readdir($handle))) {
            if ($file == "." || $file == "..") continue;

            if(is_dir("$base/$file")) {                 
                $subFiles = array_merge($subFiles, $this->getFiles("$base/$file"));                 
            } else {                    
                if(File::type($file,false) == "xml") 
                    $files[] = "$base/$file";
            }
        }
        closedir($handle);
    }

    return array_merge($files, $subFiles);
} 
```

# php - 仅保留 Array PHP 中存在的值

> ID：11676324
> 
> 赞同：2
> 
> 时间：2012-07-26T19:05:44.003
> 
> 标签：php, arrays

我有两个数组，比方说

```
$array1 = array(0 => 10, 1 => 21, 2 => 34, 'somekey' => 45, 'otherkey' => 15);
$array2 = array(0 => 9, 1 => 10, 2 => 14, 'otherkey' => 15, 'somekey' => 43); 
```

我需要返回一个数组，其中仅包含两个数组包含的值，与它们的键无关。在这种情况下，结果数组将在键 0 处包含值 10，在键 1 处包含值 15

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T19:06:59.500

使用[`array_intersect()`](http://php.net/array_intersect)：

```
$array3 = array_intersect( $array1, $array2); 
```

如果您想摆脱键，请通过以下方式运行该数组[`array_values()`](http://php.net/array_values)：

```
$array3 = array_values( $array3); 
```

这[将设置](http://codepad.org/fqvu1tb6) `$array3`为：

```
Array
(
    [0] => 10
    [1] => 15
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:19:45.233

```
 <?php

    $array1 = array(0 => 10, 1 => 21, 2 => 34, 'somekey' => 45, 'otherkey' => 15);
    $array2 = array(0 => 9, 1 => 10, 2 => 14, 'otherkey' => 15, 'somekey' => 43);

    $array1 = array_values($array1);
    $array2 = array_values($array2);
    $array3 = array_merge($array1,$array2);

    echo '<pre>';
    print_r($array3);
    echo '</pre>';

?> 
```

# css - DIV background-image 在滚动 2 列 CSS 设计后停止

> ID：11676330
> 
> 赞同：0
> 
> 时间：2012-07-26T19:06:11.290
> 
> 标签：css, height, background-image

我用 CSS 制作了一个包含 2 列的模板，就像这张图片。

![我的模板](../Images/03fa2136e3a88cc55c51a880b2d0403a.png)

主 div 是**main**。它内部有 2 次潜水。DIV **sider**有一个背景图像。我想一直展示它。现在，我有两个问题。首先，默认情况下它不会覆盖屏幕的高度，除非我`min-height=...`为它设置了一个。其次，如果我这样做，滚动页面后，背景图像不会重复覆盖整个屏幕高度。

```
html {
    margin:0 0 0 0;
    height: 100%
}

body {
    font-family:Arial;
    font-size:9pt;
    color:#333333;
    line-height:200%;
    margin:0 0 0 0;
    background: #f0f0f0 url('../images/bg-radial-gradient.gif') fixed 230px top no-repeat;
    width:100% !important;
    height: 100%
}

#main {
    width:100%;
    min-height: 100%
}

#sidebar {
    width:231px !important;
    float:left;
    background-image:url('../images/sidebar_bg.PNG');
    min-height: 100%;
}

#container {
    float:left;
    padding:25px 25px 25px 25px;
    width:70%;
    min-height: 100%
} 
```

## 有什么问题？

编辑：这是我的背景图片
![在此处输入图像描述](../Images/cee300c7336123d135b2e44041e5757c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T19:42:29.943

试试这个 -[**演示 1：不需要的空白**](http://jsfiddle.net/4dYYb/3/)

底部的额外空间是因为您的`padding:25px;`( 相同 `padding:25px 25px 25px 25px;`)。有一个额外的顶部填充 + 底部填充，它为您的 div 提供了额外的空间`50px`。

如果您不想要额外的空间 - 试试这个 => [**DEMO 2：没有空格**](http://jsfiddle.net/4dYYb/4/)

您可以使用以下方法复制顶部和边框 25px 的相同效果：

```
padding:0 25px;
margin:25px 0; 
```

以避免多余的多余空间。

**编辑：**

额外的空间是由 造成的`margin:25px 0;`，如果你删除它 - 你不会有额外的空间。检查这个 [**DEMO 3 删除由 Margin 引起的不需要的空间**](http://jsfiddle.net/4dYYb/5/)

**编辑 2：**

您的问题是一个有据可查的问题 - 匹配列问题。您可以尝试很多解决方案，这里有一些：

1) [**javascript**](http://javascript-reference.info/the-matching-columns-script-matching-css-div-heights-with-javascript.htm)

2）[**改变图像（Hacky）**](http://www.alistapart.com/articles/fauxcolumns/)

3）[**纯CSS**](http://matthewjamestaylor.com/blog/equal-height-columns-2-column.htm)

我的最爱 => 选项 2

我还没有亲自探索过最后一个，但试试看.. :)

希望能帮助到你..

# javascript - 如何限制 setInterval 完成的迭代次数

> ID：11676331
> 
> 赞同：15
> 
> 时间：2012-07-26T19:06:11.340
> 
> 标签：javascript, cookies

我向我的用户展示视频广告。顺便说一句，我不主持这些广告；我从另一家公司得到它们。

每当点击广告时，它都会在用户的浏览器中留下一个 cookie。我创建了一个函数，每 10 秒检查一次 cookie 的存在。

我想做的是限制这个函数可以运行的次数或它可以运行的秒数。

下面是函数：

```
function checkCookie()
{
var cookie=getCookie("PBCBD2A0PBP3D31B");
  if (cookie!=null && cookie!="")
  {
  alert("You clicked on an ad" );
  }

setInterval("checkCookie()", 10000); 
```

所以回顾一下。我想限制`setInterval("checkCookie()", 10000);`可以进行的迭代次数

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-26T19:08:33.293

当您调用时[`setInterval`](https://developer.mozilla.org/en/DOM/window.setInterval)，它会返回一个间隔 ID，然后您可以通过调用来停止它[`clearInterval`](https://developer.mozilla.org/en/DOM/window.clearInterval)。因此，您需要计算变量中的迭代次数，一旦达到一定的计数，就[`clearInterval`](https://developer.mozilla.org/en/DOM/window.clearInterval)使用[`setInterval`](https://developer.mozilla.org/en/DOM/window.setInterval).

```
var iterations = 0;
var interval = setInterval(foo, 10000);
function foo() {
    iterations++;
    if (iterations >= 5)
        clearInterval(interval);
} 
```

**[活生生的例子](http://jsfiddle.net/PJsJC/)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T19:09:03.260

这应该这样做：

```
function checkCookie() {
    var cookie = getCookie("PBCBD2A0PBP3D31B");
    if (cookie != null && cookie != "") {
        alert("You clicked on an ad");
    }
    if (counter > 10) clearInterval(clr);
    counter++;
    clr = setInterval(function(){checkCookie()}, 10000);​
}
var counter = 0;
checkCookie(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-03T19:01:27.700

[`WindowTimers.setInterval(func, delay[, param1, param2, ...])`](https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setInterval)

第三个参数和后面的^(参数)`setInterval`是传递给区间函数的可选参数。请注意，IE9 和更早版本不支持这些可选参数。

我们可以通过避免使用全局或外部范围来利用这一点。如下所示。间隔函数通过参数跟踪计数器的限制和当前增量`opts`。

该`runTask`函数接受一个强制`fn`参数，该参数返回一个布尔值以确定计时器的任务是否已完成。在下面的示例中运行了两个任务，每个任务的运行速度和要满足的条件都不同。

前两个任务完成，但最后一个任务在满足条件之前用完了尝试。

```
function writeLine(el, text) {
  el.innerHTML += [].slice.call(arguments, 1).join(' ') + '\n';
}

function runTask(options, interval, limit) {
  var interval = setInterval(function(opts) {
    opts.incr = (opts.incr || 0) + 1;    
    if (opts.fn(opts)) {
      clearInterval(interval);
      writeLine(opts.el, '>> Task finished...');
    } else if (opts.incr > limit) {
      clearInterval(interval);
      writeLine(opts.el, '>> Exceeded limit of ' + limit);
    } else {
      writeLine(opts.el, '>> Attempt: ' + opts.incr + '/' + limit);
    }
  }, interval, options);
}

// 5 atttempts to reach 4 in 250ms.
runTask({
  fn : function(opts) { return opts.incr === 4; },
  el : document.querySelectorAll('div.col')[0]
}, 250, 5);

// 10 atttempts to reach 7 in 100ms.
runTask({
  fn : function(opts) { return opts.incr === 7; },
  el : document.querySelectorAll('div.col')[1]
}, 100, 10);

// 10 atttempts to reach 15 in 50ms.
runTask({
  fn : function(opts) { return opts.incr === 15; },
  el : document.querySelectorAll('div.col')[2]
}, 50, 10);
```

```
.col {
  display: inline-block;
  width: 175px;
  font-family: monospace;
  white-space: pre;
  border: thin solid black;
  vertical-align: top;
  padding: 4px;
}
```

```
<div class="col"></div>
<div class="col"></div>
<div class="col"></div>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T19:08:00.307

您只需要某种全局计数器变量来跟踪。例如，以下代码在每次页面加载时最多只会运行 cookie 检查 20 次。

```
var numChecks = 0;

function checkCookie()
{
    ...

    numChecks++;
    if (numChecks < 20) setTimeout("checkCookie()", 10000);
}

setTimeout("checkCookie()", 10000); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-10T14:17:17.273

将回调传递给 Interval 函数，后者又会更新全局范围内的计数器：

```
var countIntervals = 0,
    intervalFunc = function(_callback){

        console.log(countIntervals);

        if(countIntervals > 5) {            
            clearInterval(setIntervalVar);
        } else {
            // do stuff
            _callback();
        }
    };

setIntervalVar = setInterval(intervalFunc.bind(null, function(){
    countIntervals++;
}), 500); 
```

# .net - 如何使用带有 SQLite 的 SQL 语句插入和检索 TIMESTAMP 字段？

> ID：11676334
> 
> 赞同：0
> 
> 时间：2012-07-26T19:06:14.143
> 
> 标签：.net, sqlite, delphi-prism, oxygene

我能够将 TIMESTAMP 作为字符串插入到我的表中，但是当我读出它时，我的程序引发了一个错误，提示“字符串未被识别为有效的 DateTime”。

这是我将值插入表中的方法。

```
sqlstr := 'INSERT INTO ALARMS (ALARMTIME) VALUES ("'+DateTime.Now.ToString+'");';
cnn := new SQLiteConnection('Data Source=AlarmLog.s3db');
cnn.Open;
var mycommand := new SQLiteCommand(cnn);
mycommand.CommandText := sqlstr;
var info := mycommand.ExecuteNonQuery;
cnn.Close; 
```

这是我读出来的方法。

```
 sqlstr := 'SELECT * from ALARMS';
    var dt := new DataTable;
    cnn := new SQLiteConnection('Data Source=AlarmLog.s3db');
    cnn.Open;
    var mycommand := new SQLiteCommand(cnn);
    mycommand.CommandText := sqlstr;
    var reader := mycommand.ExecuteReader;
    dt.Load(reader); <---------------------Here is where I am getting the error, "String was not recognized as a valid DateTime."
    reader.Close;
    cnn.Close; 
```

我知道为什么我会收到错误，但为什么我不能将 TIMESTAMP 作为日期和时间而不是字符串或文本类型插入。如果您在我的 SQL 查询中注意到，我在 DateTime.Now.ToString 语句周围有引号。这是它接受我的 SQL 语句的唯一方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:08:54.690

传递 SQLite 识别的日期格式，例如：

```
DateTime.Now.ToString("yyyy-MM-ddTHH:mm") 
```

[此 SQLite 手册页上的其他有效格式。](http://www.sqlite.org/lang_datefunc.html)

更好的是使用参数，例如：

```
sqlstr := 'INSERT INTO ALARMS (ALARMTIME) VALUES ($dt);';
...
mycommand.Parameters.AddWithValue("$dt", DateTime.Now); 
```

# c# - 有没有办法在空格上做一个 string.Split

> ID：11676337
> 
> 赞同：0
> 
> 时间：2012-07-26T19:06:32.583
> 
> 标签：c#, string

我有一个字符串`"mystring theEnd"` ，但我想做一个字符串。在空格上拆分，而不仅仅是在空格上，因为我想得到一个`string[]`在“mystring”和“theEnd”之间包含“mystring”和“theEnd”的字符串，数量未知空格，这就是为什么我需要在空格上分割。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T19:08:38.057

怎么样：

```
string[] bits = text.Split(new[] {' '}, StringSplitOptions.RemoveEmptEntries); 
```

（或者`text.Split`指定要分割的确切空白字符，或者`null`按照 Henk 的建议使用。）

或者您可以使用正则表达式来处理*所有*空白字符：

```
Regex regex = new Regex(@"\s+");
string[] bits = regex.Split(text); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T19:08:46.143

最简单的做法是：

```
a.Split(new [] {' ', '\t'},StringSplitOptions.RemoveEmptyEntries) 
```

谢谢乔恩：）

# c++ - 登录 C++（性能考虑）

> ID：11676344
> 
> 赞同：1
> 
> 时间：2012-07-26T19:07:00.463
> 
> 标签：c++, performance, debugging, logging

我是 cpp 的新手（来自 Java）。我正在编写一个 cpp 应用程序。该应用程序对性能至关重要。我寻找了一个日志框架，我 在上面链接的末尾找到了[log4cxx ，有性能部分解释：](http://logging.apache.org/log4cxx/index.html)

> 当日志完全关闭或仅关闭一组级别时，日志请求的成本包括方法调用和整数比较

我记得在大学的时候，我们用它`#ifndf`来包装日志记录。

问题：

1.  包装日志`#ifndf`仍然是标准做法吗？

2.  有没有类似下面的伪代码？

```
logger.Log_Debug(() => { "My complicated log message " + thisFunctionTakesALongTime() + " will take no time" }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T19:09:34.123

您可以创建自己的宏，在发布模式下不执行任何操作：

```
#ifdef _DEBUG
#define LOG_DEBUG(x) logger.Log_Debug(x)
#else
#define LOG_DEBUG(x)
#endif 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T19:18:02.807

创建一个有条件地编译注销的宏并不等同于在运行时将其关闭和打开。当然，如果您使用条件编译关闭日志记录，您将节省方法调用，但您将无法随意重新打开日志记录。

让您节省方法调用的一种解决方案是将日志记录在一个宏中，其中包含一个`if`检查日志记录是否启用的语句，如果未启用则跳过调用。这将为您节省调用成本，在大多数情况下，这将比简单的条件检查更昂贵：

```
#define LOG(X) if(logger.is_enabled) do {logger.log(X);}while(0) 
```

如果`logger.log`有多个重载，您可能需要为每组参数定义一个单独的宏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T19:14:58.990

我可以建议你`boost::logging`。[http://boost-log.sourceforge.net/libs/log/doc/html/index.html](http://boost-log.sourceforge.net/libs/log/doc/html/index.html)但现在它不是提升的一部分。如果您不需要登录发布版本，
这是常见的做法。`#ifdef`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-26T18:36:52.323

[https://logging.apache.org/log4cxx/latest_stable/usage.html](https://logging.apache.org/log4cxx/latest_stable/usage.html)：

**关闭日志记录时的日志记录性能。**

当日志完全关闭或仅关闭一组级别时，日志请求的成本包括方法调用和整数比较。如果请求未启用，LOG4CXX_DEBUG 和类似的宏会抑制不必要的表达式评估。

# c# - 在 .NET 3.5 WPF 应用程序的某些部分使用 Prism 2x

> ID：11676346
> 
> 赞同：0
> 
> 时间：2012-07-26T19:07:04.840
> 
> 标签：c#, wpf, prism

我有现有的 WPF 应用程序。在这个应用程序中，我有主 TabControl，在这个 TabControl 下我有多个选项卡。

我只想在一个选项卡中应用 Prism 架构。我想将 Shell 创建为一个选项卡。

是否可以申请？如果是，我如何才能为该特定选项卡挂钩 BootStrapper。在这种情况下，我想按需加载此选项卡。当用户单击此选项卡时。我想通过 BootStrapper 加载所有 UI 元素，然后我想运行 Shell

我可以使用 UserControl_Loaded 事件来触发我的引导程序吗？如果是，我该如何实例化引导程序？

我希望问题是可以理解的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:42:54.907

它可以工作，但你必须手动做一些事情（特别是如果你想让模块工作）。请按照以下步骤使您的事情正常工作：

首先使用 Bootstrapper、Shell 等创建一个常用的 Prism 项目。然后当你想显示它时，以这种方式获取带有区域的 UserControl：

```
ServiceLocator.Current.GetInstance<TestUc>(); 
```

在 UserControl 的构造函数中，让 ServiceLocator 给您 RegionManager 作为参数，并在 InitializeComponent() 之后执行以下操作

```
RegionManager.SetRegionManager(this, regionManager);
RegionManager.UpdateRegions(); 
```

这将附加的依赖属性设置为在 Xaml 中用作 RegionManager.RegionName="..."。现在您可以通过 RegionManager 设置区域，也可以拉起整个 Prism 基础设施来从配置加载一些模块。假设你想走艰难的路。在 UserControl 的构造函数底部添加此代码，模块将从 App.config 加载：

```
var catalog = new ConfigurationModuleCatalog
{
    Store = new ConfigurationStore()
};

var logger = new TextLogger();
var moduleInitializer = new ModuleInitializer(ServiceLocator.Current, logger);
var moduleManager = new ModuleManager(moduleInitializer, catalog, logger);

moduleManager.Run(); 
```

我在我的 ftp 服务器上为你上传了一个小测试项目：http: [//compositedevtec.tk/upload/prismTest.zip](http://compositedevtec.tk/upload/prismTest.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:25:05.697

我不确定这是否会像您期望的那样工作，因为引导程序用于启动 shell。您可以通过让您的应用程序成为外壳程序并通过启动引导程序并将外壳程序设置为主应用程序来完成此操作。然后，主应用程序将是您的 WPF 应用程序，但在应用程序内部的某个地方，您定义了要使用的一个区域。

但是，我不认为只是将区域添加到选项卡项然后启动您的应用程序会起作用。为了让所有 IoC 魔法发生，引导程序需要成为起始目标。

简短的回答：是的，但需要注意如何编写 shell。

# python - python装饰器丢失参数定义

> ID：11676348
> 
> 赞同：1
> 
> 时间：2012-07-26T19:07:16.827
> 
> 标签：python, decorator, xml-rpc, functools

我正在使用这样的块：

```
def served(fn) :    
    def wrapper(*args, **kwargs):
        p = xmlrpclib.ServerProxy(SERVER, allow_none=True )
        return (p.__getattr__(fn.__name__)(*args, **kwargs)) # do the function call
    return functools.update_wrapper(wrapper,fn)

@served
def remote_function(a, b):
    pass 
```

将一系列 XML-RPC 调用包装到 python 模块中。在存根函数上调用“服务”装饰器以公开远程服务器上的操作。

我正在创建这样的存根，以便以后能够检查它们以获取有关函数的信息，特别是它的参数。

如所列，上面的代码不会将参数信息从原始函数传输到包装器。如果我检查，`inspect.getargspec( remote_function )`那么我基本上得到一个空列表，而不是`args=['a','b']`我所期望的。

我猜我需要`functools.update_wrapper()`通过可选`assigned`参数为调用提供额外的指导，但我不确定要向该元组添加什么以获得我想要的效果。

名称和文档字符串已正确传输到新函数对象，但有人可以告诉我如何传输参数定义吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:17:43.370

以前的问题[here](https://stackoverflow.com/questions/3729378/how-can-i-programmatically-change-the-argspec-of-a-function-in-a-python-decorato)和[here](https://stackoverflow.com/questions/3995815/is-it-possible-to-modify-the-return-value-of-a-function-without-defining-new-fun)表明[装饰器模块](http://pypi.python.org/pypi/decorator/)可以做到这一点。

# regex - 在 bash 中抓取一个 20g 的文件

> ID：11676350
> 
> 赞同：3
> 
> 时间：2012-07-26T19:07:22.767
> 
> 标签：regex, performance, bash, unix, grep

关于代码性能的问题：我正在尝试针对 ~20g 文本文件运行 ~25 条正则表达式规则。脚本应该输出匹配到文本文件；每个正则表达式规则都会生成自己的文件。请看下面的伪代码：

```
regex_rules=~/Documents/rulesfiles/regexrulefile.txt
for tmp in *.unique20gbfile.suffix; do
    while read line
    # Each $line in the looped-through file contains a regex rule, e.g.,
    # egrep -i '(^| )justin ?bieber|(^| )selena ?gomez'
    # $rname is a unique rule name generated by a separate bash function
    # exported to the current shell.
        do
        cmd="$line $tmp > ~/outputdir/$tmp.$rname.filter.piped &"
        eval $cmd
    done < $regex_rules
done 
```

夫妻心得：

*   有没有办法只循环一次文本文件，评估所有规则并一次性拆分为单个文件？这会更快吗？

*   我应该为这项工作使用不同的工具吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T19:43:29.340

这就是`grep`有`-f`选项的原因。减少你`regexrulefile.txt`的正则表达式，每行一个，然后运行

```
egrep -f regexrulefile.txt the_big_file 
```

这会在单个输出流中生成所有匹配项，但是您可以在之后对其执行循环操作以将它们分开。假设匹配的组合列表并不大，这将是性能上的胜利。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T20:07:45.933

一个快速（！= 太快）的 Perl 解决方案：

```
#!/usr/bin/perl
use strict; use warnings; 
```

我们预加载正则表达式，以便我们只读取一次它们的文件。它们存储在数组中`@regex`。正则表达式文件是作为参数给出的第一个文件。

```
open REGEXES, '<', shift(@ARGV) or die;
my @regex = map {qr/$_/} <REGEXES>;
# use the following if the file still includes the egrep:
# my @regex = map {
#     s/^egrep \s+ -i \s+ '? (.*?) '? \s* $/$1/x;
#     qr{$_}
# } <REGEXES>;
close REGEXES or die; 
```

我们遍历作为参数给出的每个剩余文件：

```
while (@ARGV) {
  my $filename = shift @ARGV; 
```

我们预先打开文件以提高效率：

```
 my @outfile = map {
     open my $fh, '>', "outdir/$filename.$_.filter.piped"
       or die "Couldn't open outfile for $filename, rule #$_";
     $fh;
  } (1 .. scalar(@rule));
  open BIGFILE, '<', $filename or die; 
```

我们将所有符合规则的行打印到指定文件。

```
 while (not eof BIGFILE) {
    my $line = <BIGFILE>;
    for $ruleNo (0..$#regex) {
      print $outfile[$ruleNo] $line if $line =~ $regex[$ruleNo];
      # if only the first match is interesting:
      # if ($line =~ $regex[$ruleNo]) {
      #     print $outfile[$ruleNo] $line;
      #     last;
      # }
    }
  } 
```

在下一次迭代之前清理：

```
 foreach (@outfile) {
    close $_ or die;
  }
  close BIGFILE or die;
}

print "Done"; 
```

调用：`$ perl ultragrepper.pl regexFile bigFile1 bigFile2 bigFile3`等等。任何更快的东西都必须直接用 C 语言编写。您的硬盘数据传输速度是极限。

这应该像 bash 挂件一样运行得更快，因为我避免重新打开文件或重新解析正则表达式。此外，不必为外部工具生成新流程。但是我们可以产生几个线程！（至少 NumOfProcessors * 2 个线程可能是明智的）

```
local $SIG{CHLD} = undef;
while (@ARGV) {
    next if fork();
    ...;
    last;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T20:37:21.203

我做了类似的事情`lex`。当然，它每隔一天运行一次，所以 YMMV。它非常快，甚至在远程 Windows 共享上的数百兆字节文件上也是如此。处理只需几秒钟。我不知道你破解一个快速`C`程序有多舒服，但我发现这是解决大规模正则表达式问题的最快、最简单的解决方案。

部分编辑以保护有罪者：

```
 /************************************************** 
        start of definitions section

    ***************************************************/

%{
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <getopt.h>
#include <errno.h>

char inputName[256];
// static insert variables

//other variables
char tempString[256];
char myHolder[256];
char fileName[256];
char unknownFileName[256];
char stuffFileName[256];
char buffer[5];

/* we are using pointers to hold the file locations, and allow us to dynamically open and close new files */
/* also, it allows us to obfuscate which file we are writing to, otherwise this couldn't be done */

FILE *yyTemp;
FILE *yyUnknown;
FILE *yyStuff;

// flags for command line options
static int help_flag = 0;

%}

%option 8bit 
%option nounput nomain noyywrap 
%option warn

%%
    /************************************************ 
        start of rules section
    *************************************************/

(\"A\",\"(1330|1005|1410|1170)\") { 
    strcat(myHolder, yytext);
    yyTemp = &(*yyStuff);
} //stuff files

. { strcat(myHolder, yytext); }

\n  {
    if (&(*yyTemp) == &(*yyUnknown))
        unknownCount += 1;
    strcat(myHolder, yytext); 
    //print to file we are pointing at, whatever it is
    fprintf(yyTemp, "%s", myHolder);
    strcpy(myHolder, "");
    yyTemp = &(*yyUnknown);
}

<<EOF>> {
    strcat(myHolder, yytext); 
    fprintf(yyTemp, "%s", myHolder);
    strcpy(myHolder, "");
    yyTemp = &(*yyUnknown);

    yyterminate();
}

%%
    /**************************************************** 
        start of code section

    *****************************************************/

int main(int argc, char **argv);

int main (argc,argv)
int argc;
char **argv;
{
    /****************************************************
        The main method drives the program. It gets the filename from the
        command line, and opens the initial files to write to. Then it calls the lexer.
        After the lexer returns, the main method finishes out the report file,
        closes all of the open files, and prints out to the command line to let the
        user know it is finished.
    ****************************************************/

    int c;

    // the gnu getopt library is used to parse the command line for flags
    // afterwards, the final option is assumed to be the input file

    while (1) {
        static struct option long_options[] = {
            /* These options set a flag. */
            {"help",   no_argument,     &help_flag, 1},
            /* These options don't set a flag. We distinguish them by their indices. */
            {0, 0, 0, 0}
        };
           /* getopt_long stores the option index here. */
        int option_index = 0;
        c = getopt_long (argc, argv, "h",
            long_options, &option_index);

        /* Detect the end of the options. */
        if (c == -1)
            break;

        switch (c) {
            case 0:
               /* If this option set a flag, do nothing else now. */
               if (long_options[option_index].flag != 0)
                 break;
               printf ("option %s", long_options[option_index].name);
               if (optarg)
                 printf (" with arg %s", optarg);
               printf ("\n");
               break;

            case 'h':
                help_flag = 1;
                break;

            case '?':
               /* getopt_long already printed an error message. */
               break;

            default:
               abort ();
            }
    }

    if (help_flag == 1) {
        printf("proper syntax is: yourProgram.exe [OPTIONS]... INFILE\n");
        printf("splits csv file into multiple files")
        printf("Option list: \n");
        printf("--help                  print help to screen\n");
        printf("\n");
        return 0;
    }

    //get the filename off the command line and redirect it to input
    //if there is no filename then use stdin

    if (optind < argc) {
        FILE *file;

        file = fopen(argv[optind], "r");
        if (!file) {
            fprintf (stderr, "%s: Couldn't open file %s; %s\n", argv[0], argv[optind], strerror (errno));
            exit(errno);
        }
        yyin = file;
        strcpy(inputName, argv[optind]);
    }
    else {
        printf("no input file set, using stdin. Press ctrl-c to quit");
        yyin = stdin;
        strcpy(inputName, "\b\b\b\b\bagainst stdin");
    }

    //set up initial file names

    strcpy(fileName, inputName);
    strncpy(unknownFileName, fileName, strlen(fileName)-4);
    strncpy(stuffFileName, fileName, strlen(fileName)-4);

    strcat(unknownFileName, "_UNKNOWN_1.csv");
    strcat(stuffFileName, "_STUFF_1.csv");

    //open files for writing

    yyout = stdout;
    yyTemp = malloc(sizeof(FILE));
    yyUnknown = fopen(unknownFileName,"w");
    yyTemp = &(*yyUnknown);

    yyStuff = fopen(stuffFileName,"w");

    yylex();

    //close open files

    fclose(yyUnknown);

    printf("Lexer finished running %s",fileName);

    return 0;

} 
```

要构建这个 flex 程序，安装 flex，并使用这个 makefile（调整路径）：

```
TARGET = project.exe
TESTBUILD = project
LEX = flex
LFLAGS = -Cf
CC = i586-mingw32msvc-gcc
CFLAGS = -O -Wall 
INSTALLDIR = /mnt/J/Systems/executables

.PHONY: default all clean install uninstall cleanall

default: $(TARGET)

all: default install

OBJECTS = $(patsubst %.l, %.c, $(wildcard *.l))

%.c: %.l
    $(LEX) $(LFLAGS) -o $@ $<

.PRECIOUS: $(TARGET) $(OBJECTS)

$(TARGET): $(OBJECTS)
    $(CC) $(OBJECTS) $(CFLAGS) -o $@

linux: $(OBJECTS)
    gcc $(OBJECTS) $(CFLAGS) -lm -g -o $(TESTBUILD)

cleanall: clean uninstall

clean:
    -rm -f *.c
    -rm -f $(TARGET)
    -rm -f $(TESTBUILD)

uninstall:
    -rm -f $(INSTALLDIR)/$(TARGET)

install:
    cp -f $(TARGET) $(INSTALLDIR) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T19:48:08.570

反转结构：读入文件，然后循环规则，以便您只在单独的行上执行匹配。

```
regex_rules=~/Documents/rulesfiles/regexrulefile.txt
for tmp in *.unique20gbfile.suffix; do
while read line ; do 
 while read rule
    # Each $line in the looped-through file contains a regex rule, e.g.,
    # egrep -i '(^| )justin ?bieber|(^| )selena ?gomez'
    # $rname is a unique rule name generated by a separate bash function
    # exported to the current shell.
        do
        cmd=" echo $line  | $rule  >> ~/outputdir/$tmp.$rname.filter.piped &"
        eval $cmd
    done < $regex_rules
done < $tmp 
```

完毕

在这一点上，尽管您可以/应该使用 bash（或 perl 的）内置正则表达式匹配，而不是让它为每个匹配启动一个单独的 egrep 进程。您也许还可以拆分文件并运行并行进程。（注意我也将 > 更正为 >>）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T02:12:56.687

我还决定回到这里编写一个 perl 版本，然后才注意到 amon 已经完成了。既然已经写好了，那就是我的：

```
#!/usr/bin/perl -W
use strict;

# The search spec file consists of lines arranged in pairs like this:
# file1
# [Ff]oo
# file2
# [Bb]ar
# The first line of each pair is an output file. The second line is a perl
# regular expression. Every line of the input file is tested against all of
# the regular expressions, so an input line can end up in more than one
# output file if it matches more than one of them.

sub usage
{
        die "Usage: $0 search_spec_file [inputfile...]\n";
}

@ARGV or usage();

my @spec;

my $specfile = shift();
open my $spec, '<', $specfile or die "$specfile: $!\n";
while(<$spec>) {
        chomp;
        my $outfile = $_;
        my $regexp = <$spec>;
        chomp $regexp;
        defined($regexp) or die "$specfile: Invalid: Odd number of lines\n";
        open my $out, '>', $outfile or die "$outfile: $!\n";
        push @spec, [$out, qr/$regexp/];
}
close $spec;

while(<>) {
        for my $spec (@spec) {
                my ($out, $regexp) = @$spec;
                print $out $_ if /$regexp/;
        }
} 
```

# google-chrome-extension - 添加一个java脚本文件到浏览器使用谷歌扩展？

> ID：11676359
> 
> 赞同：0
> 
> 时间：2012-07-26T19:08:03.943
> 
> 标签：google-chrome-extension

如何使用 Google 扩展将 Java 脚本文件添加到浏览器

我需要使用 JavaScript 和 CSS 以及必要的文件向 Facebook 添加 CSS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:28:58.233

您可以使用[内容脚本](http://code.google.com/chrome/extensions/content_scripts.html)。内容脚本允许在网页上插入 JS 和 CSS 文件。然后可以使用 JS 加载其他对象。

# jquery - 39TypeError：“未定义”不是函数.ajaxform

> ID：11676360
> 
> 赞同：0
> 
> 时间：2012-07-26T19:08:09.337
> 
> 标签：jquery, ajax, ajaxform

我试图在 ajaxForm 的帮助下使用预览功能进行图像上传。一切正常，除了预览部分，我收到错误消息：

```
39TypeError: 'undefined' is not a function (evaluating '$("#imageform").ajaxForm(
{
target: "#preview"
})') 
```

我正在使用的代码是这样的：

```
<script type="text/javascript" src="http://ajax.googleapis.com/
ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="jquery.form.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('#photoimg').live('change', function() {
        $("#preview").html('');
        $("#preview").html('<img src="loader.gif" alt="Uploading...."/>');
        $("#imageform").ajaxForm({
            target: "#preview"
        }).submit();
    });
});
</script>

<div id="preview">
Upload image
</div>
<form id="imageform" method="post" enctype="multipart/form-data" action='ajaximage.php'>
<input type="file"name="photoimg" id="photoimg" />
</form>
</div> 
```

任何可能知道问题是什么的人？非常感谢您的帮助！

谢谢

/C

# mysql - SELECT 语句细化

> ID：11676361
> 
> 赞同：2
> 
> 时间：2012-07-26T19:08:14.630
> 
> 标签：mysql

对于 MySQL 和关系数据库，我还是个新手，但是我正在从事的一个项目要求我编写一些复杂`SELECT`的语句，此时我有点困惑。我有三个表来存储有关各种产品的信息。Table1 存储每个产品的页面内容，table2 存储关于每个产品的特定标准（型号、材料、颜色等），table3 是一个链接表，用于在 T1 和 T2 之间建立多对多关系。

这是我的选择语句给我的：

```
Array
(
    [name] => color
    [value] => Red
    [title] => Product 1
)
Array
(
    [name] => material
    [value] => Wood
    [title] => Product 1
) 
```

例如，我对如何选择既是“红色”又是“木头”的产品感到困惑——基本上都有每种产品的记录及其描述。

```
Array
(
    [material] => Wood
    [color] => Red
    [title] => Product 1
) 
```

选择语句：

```
SELECT table2.name, table3.value, table1.title
FROM table2

INNER JOIN table3
ON table2.id=table3.varid

INNER JOIN table1
ON table1.id=table3.contentid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:12:17.123

您必须再次加入其他表。您需要给表起别名以将它们区分开来：

```
SELECT table2.name, table3.value, table1.title, t3.value, t1.title
FROM table2
JOIN table3 ON table2.id=table3.varid and value = 'Wood'
JOIN table1 ON table1.id=table3.contentid
JOIN table3 t3 ON table2.id=t3.varid and value = 'Red'
JOIN table1 t1 ON t1.id=t3.contentid; 
```

您可以将值测试放在`WHERE`子句中，但这种方式更有效，因为谓词在连接时执行，而不是在整个连接结果上执行。

请注意`INNER JOIN`和`JOIN`含义相同（`INNER`隐含）

# mongodb - 在 Grails 中使用 MongoDB GORM 插件时是否应该触发事件侦听器？

> ID：11676364
> 
> 赞同：3
> 
> 时间：2012-07-26T19:08:20.837
> 
> 标签：mongodb, grails, grails-orm

当使用 Grails MongoDB GORM Plugin (v 1.0.0.GA) 独立（即没有 Hibernate jars）时，监听器事件应该工作吗？

我有带有 afterInsert、afterUpdate 等的域类，但事件要么没有触发，要么方法没有被调用。

我在插件文档中没有看到任何具体的指导。有谁知道应该发生什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:27:40.533

为了其他可能找到它的人的利益，回答我自己的问题：

显然，当在没有 Hibernate 的情况下使用 MongoDB/GORM 时，GORM 通过查找域对象类上的方法签名来找到事件侦听器。闭包不起作用（尽管它在使用 Hibernate 时会起作用）。

因此，您不能使用这样的模式：

```
class A {
    int blah
    String foo

    def afterInsert = { ... }
} 
```

相反，请执行以下操作：

```
class A {
    int blah
    String foo

    def afterInsert() { ... }
} 
```

# php - 返回多个结果 mysql & php

> ID：11676368
> 
> 赞同：0
> 
> 时间：2012-07-26T19:08:49.167
> 
> 标签：php, mysql

您好，基本上我正在尝试返回 category_name 表中的 3 个值。然而这被证明是不可能的......当我做 var dump 我得到但`array(2) { [0]=> string(3) "one" ["category_name"]=> string(3) "one" }`我不知道我做错了什么

```
$connection = mysql_connect("localhost","admin","");
mysql_select_db("test",$connection);
$result = mysql_query("SELECT category_name FROM category ");
$result2 = mysql_fetch_array ($result);
var_dump ($result2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:11:44.753

您需要一个循环，因为一次`mysql_fetch_array()`只能获取**一行**：

```
$cats = array();
while( $row = mysql_fetch_array ($result)) {
    $cats[] = $row;
}

var_dump( $cats); // This will have all three categories in it 
```

上述循环`mysql_fetch_array()`直到没有数据为止，将从数据库返回的行添加到`$cats`数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:12:22.547

首先 - 你必须切换到**mysqli**或**PDO**

其次 - 您必须遍历返回的数据。在您当前的脚本中，您只将一个结果提取到您的数组中。

```
$connection = mysql_connect( "localhost", "admin", "" );
mysql_select_db( "test", $connection );
$result = mysql_query( "SELECT category_name FROM category" );

while( $row = mysql_fetch_array($result) ) {
    echo $row['category_name'], "<br />";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T19:16:41.157

您正在从结果集中获得第一行。

对 mysql_fetch_array 的后续调用将返回下一个结果行。

尝试使用：

```
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
   var_dump($row);
} 
```

似乎使 OP 感到困惑的其他答案的问题是，它告诉 mysql_fetch_array 使用列名作为索引而不是默认值（使用数字和命名数组索引）`MYSQL_ASSOC`返回一个数组。`MYSQL_BOTH`

希望有帮助！

# r - R lattice 包，auto.key 边框的边距

> ID：11676372
> 
> 赞同：0
> 
> 时间：2012-07-26T19:09:11.950
> 
> 标签：r, lattice

lengend(auto.key) 周围的边框在底部太紧。我该如何增加它？

```
library(lattice)
    arr<- array(replicate(10, rnorm(10)), dim =c(10,10,10) )
dotplot(arr, type = "b", horizontal = F, col = techColor
        , main =list( " Centrality", cex=1.5), xlab.top="",as.table=T,
        ylab =list( "Centralities", cex=1.3), 
        xlab = list("Proportion Cutpoints"), 
        scale=list(y=list(cex=1.2,  alternating =1), cex =1),
        auto.key=list(  points = F, border= "grey",
                          space = "top", lines = T, columns=4,height=10,
                          title = "Technologies"),
        par.settings = list(superpose.line = list(col = techColor, lwd=2, lty=1:6 ),
                            layout.heights= list(xlab.key.padding = 1), 
                            layout.widths = list(key.ylab.padding = 1)),
        par.strip.text = list(cex=1.5)) 
```

# qt - 在 qt 中使用 QPainter::drawPixmap 绘制像素图

> ID：11676375
> 
> 赞同：0
> 
> 时间：2012-07-26T19:09:13.507
> 
> 标签：qt, user-interface, qpainter, pixmap

我可以使用 QPainter::drawPixmap 绘制像素图，但我在调整大小时遇到​​了问题。像素图被绘制到许多不同的场景上。有的场景很大，有的场景很小。这会导致绘制的像素图看起来非常大或非常小，具体取决于场景（或视口，无论其名称如何）的大小。我需要像素图每次看起来都一样大小，无论它被放置到的场景的尺寸如何。

基本上，我希望它的工作方式类似于 drawPoint，您可以在其中指定点的长度和宽度（以*像素*为单位），因此该点每次看起来都具有相同的大小。

以下代码行在我子类化的 QGraphicsItem 的绘制函数中：

```
painter_p->drawPixmap( pos(), MYPIXMAP ); 
```

使用 pos() 返回 QPointF 我需要在其上绘制像素图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:09:35.353

你不能用[`QGraphicsPixmapItem`](http://qt-project.org/doc/qt-4.8/qgraphicspixmapitem.html)吗？它会做你想要的。

# asp.net - 按 F12 键后显示登录表单

> ID：11676384
> 
> 赞同：0
> 
> 时间：2012-07-26T19:09:45.457
> 
> 标签：asp.net, winforms

我在 Winforms 中有一个应用程序。VS 2010 C#。我想要做的是当用户登录时。按 F12 键登录表单显示，另一个用户输入用户名和密码并登录。

我附上了我的 Login.cs、Program.cs 和 Form1.cs

在我的主表单（Form1.cs）中，当用户按下 F12 键时，我可以显示登录表单，但是当我输入用户名和密码时，什么也没有发生。

现在我正在捕获用户第一次登录时的用户名。我还想在按下 F12 键并登录时捕获新用户。

我在标签中显示用户名

label1.Text = myuser.getUserName();

我在 Keypress 事件下尝试了 FORM.CS 中的一些代码，但它不起作用

```
//////////**Program.CS**////////////////

namespace BusinessLayer
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);

            DialogResult result;
            var loginForm = new Login();
            result = loginForm.ShowDialog();
            if (result == DialogResult.OK)
            {
                // login was successful

                Application.Run(new Form1(loginForm.usr));
            }
        }
    }
}
///////////////////////////////////**Login.CS**/////////////////////

namespace BusinessLayer
{
    public partial class Login : Form
    {
        UserName myuser;
        public Login()
        {
            InitializeComponent();
        }

        private void btnLogin_Click(object sender, EventArgs e)
        {

            if (CheckPasswordManager.CheckPassword(txtUserID.Text, txtPassword.Text) > 0)
            {
                usr = new UserName(txtUserID.Text);
                DialogResult = DialogResult.OK;
            }

            else
            {
                MessageBox.Show("wrong");

            }

        }

        public UserName usr
        {
            get
            {
                return myuser;
            }
            set
            {
                myuser = value;
            }
        }

    }
}

//////////////////////**Form1.CS**////////////////

namespace BusinessLayer
{
    public partial class Form1 : Form
    {
        UserName myuser;
        public Form1(UserName usr)
        {
            myuser = usr;
            InitializeComponent();

        }

        private void Form1_Load(object sender, EventArgs e)
        {
            dataGridView1.DataSource = BookingManager.GetList();
            label1.Text = myuser.getUserName();

            int GetBookEntryID = Int32.Parse(this.dataGridView1.CurrentRow.Cells["booking_entry_id"].Value.ToString());

           dataGridView2.DataSource = ProcessManager.GetList(GetBookEntryID);

          }

        private void Form1_KeyDown(object sender, KeyEventArgs e)
        {

            String s = e.KeyCode.ToString();

            switch (s)
            {
                case "F12":
                    var loginForm = new Login();

                    this.Hide();
                    var loginForm = new Login();
                    loginForm.Show();

            }

        }

}

}

////////////////username.cs

namespace PassUsername
{
    public class Username
    {
        string userName;

        public Username(string uName)
        {
            userName = uName;

        }
        public string getUserName()
        {
            return userName;
        }
    }
} 
```

# iphone - 通过调用 CFRelease 与使用 CGColorSpaceRelease 释放 CGColorSpaceRef 的区别？

> ID：11676386
> 
> 赞同：1
> 
> 时间：2012-07-26T19:09:59.070
> 
> 标签：iphone, ios, memory, memory-management, core-graphics

假设我正在使用`CGColorSpaceRef`. 我想知道`CGColorSpaceRef`通过调用`CFRelease`和使用释放之间是否有区别`CGColorSpaceRelease`？

即，这之间的区别：

```
CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();

// do stuff

CFRelease(colorspace); 
```

与做：

```
CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();

// do stuff

CGColorSpaceRelease(colorspace); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T19:21:00.327

从[CGColorSpace 参考](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGColorSpace/Reference/reference.html)：

> 此函数等价于 CFRelease，不同之处在于如果 cs 参数为 NULL，它不会导致错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T19:34:14.427

任何一个都可以接受。但是，第二个将检查`NULL`，因此它可以让您跳过一行代码。您必须*始终*`NULL`在致电前进行检查`CFRelease()`。如果你不这样做并且`NULL`被传入，它将崩溃。

# .net - 如何将使用 ODAC 的 .Net 应用程序部署到带有安装程序打包的 tsnames.ora 文件的干净计算机

> ID：11676389
> 
> 赞同：1
> 
> 时间：2012-07-26T19:10:16.373
> 
> 标签：.net, database, oracle, tnsnames

所以这就是问题所在。我拥有的这个应用程序使用 ODAC 组件，但我不想在必须安装应用程序的所有计算机上安装 oracle 客户端。所以我把这篇文章放在下面：

[使用 Oracle 客户端 11 部署 .NET 应用程序所需的最低设置是什么？](https://stackoverflow.com/questions/923283/what-is-the-minimal-setup-required-to-deploy-a-net-application-with-oracle-clie)

本文适用于安装了某种 oracle 或至少 tnsnames.ora 位于正确位置的计算机。但是在新机器上我收到错误 ORA-12645：参数不存在。我尝试将 tnsnames.ora 与 sqlnet.ora 一起打包，但 .dll 找不到它们。下面的代码是错误的来源：

```
 g_Db.ConnectionString = "Data Source=(DESCRIPTION= (ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=osw-rmoradev)(PORT=1523))) (CONNECT_DATA=(SERVER=DEDICATED)(SID=RML3A))); User Id=RM_Level3;Password="passowrd";"
            g_Db.Open() 
```

关于如何打包 .ora 文件的任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:17:08.497

您是否尝试过使用 Oracle 数据提供程序而不是安装客户端？我记得偶然发现了这个项目，然后不需要安装 Oracle 客户端。 [链接到 ODP](http://docs.oracle.com/html/E10927_01/InstallODP.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:44:08.887

似乎通过将程序实例的环境变量设置为 .ora 数据文件的位置似乎已经解决了这个问题。

```
nvironment.SetEnvironmentVariable("PATH", "c:\Documents and Settings\" & currentUserName & "\Local Settings\Apps\2.0;" + "c:\Documents and Settings\" & currentUserName & "\Local Settings\Apps\2.0\Data\\R5MG416O.62T\77DKVOW4.TWH\rct...tion_7a1a328dbe52217b_0002.0000_f2dbb34fd1c05e8d\Data;", EnvironmentVariableTarget.Process)
                    Environment.SetEnvironmentVariable("ORACLE_HOME", "c:\Documents and Settings\" & currentUserName & "\Local Settings\Apps\2.0", EnvironmentVariableTarget.Process) 
```

# linux - 重定向linux模块构建的输出

> ID：11676391
> 
> 赞同：1
> 
> 时间：2012-07-26T19:10:25.060
> 
> 标签：linux, module, makefile, kernel

我想重定向我的模块构建的输出以将工件与源隔离。

我的makefile看起来像：

```
 obj-m += hello-1.o

all:
    make ARCH=arm CROSS_COMPILE=arm-eabi- -C /work/TI-Android-ICS-4.0.3_AM37x_3.0.0/kernel M=$(PWD) modules

clean:
    make ARCH=arm CROSS_COMPILE=arm-eabi- -C /work/TI-Android-ICS-4.0.3_AM37x_3.0.0/kernel M=$(PWD) clean 
```

这可以正常工作，除了模块输出恰好在我的源目录中。我尝试在每一行中添加 O={path to my output dirctory} ，但是它无法使用类似...

> 错误：内核配置无效。缺少 include/generated/autoconf.h 或 include/config/auto.conf。在内核 src 上运行“make oldconfig && make prepare”来修复它。
> 
> 警告：符号版本转储 /work/development/linux/driver/blah/Module.symvers 丢失；模块将没有依赖项和 modversions。

我认为这源于这样一个事实，即模块构建中使用了内核构建中的一些输出文件，并且使用“O =”更改输出目录会与之发生冲突。

有没有一种方法可以使用现有的构建基础设施来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:47:32.840

这个 Makefile 将解决您的查询

```
 obj-m += hello-1.o

all:
make ARCH=arm CROSS_COMPILE=arm-eabi- -C /work/TI-Android-ICS-4.0.3_AM37x_3.0.0/kernel M=$(PWD) modules_install INSTALL_MOD_PATH=<output directory for modules>

clean:
make ARCH=arm CROSS_COMPILE=arm-eabi- -C /work/TI-Android-ICS-4.0.3_AM37x_3.0.0/kernel M=$(PWD) clean 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T05:52:39.420

查看[模块系统](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=tree;h=25918f9811eae1d657db2bccdfcb077038d9454c;hb=25918f9811eae1d657db2bccdfcb077038d9454c)的文档，看起来不太好。也许您可以复制`.config`到您的构建目录并执行`make oldconfig && make modules-prepare`with `O=`set。

* * *

或者，如果您`make`从另一个目录运行会发生什么？

```
/somewhere/else$ make -C /path/to/kernel ARCH=arm CROSS_COMPILE=arm-eabi- M=/your/module/dir modules 
```

# php - 如何在 PHP 中使用 SSL 证书发送 SOAP 请求？

> ID：11676392
> 
> 赞同：6
> 
> 时间：2012-07-26T19:10:29.247
> 
> 标签：php, web-services, soap, ssl, ssl-certificate

我正在尝试发送带有 DER 证书的 SOAP - PHP 请求（这意味着证书没有 privateKey）但没有成功。

```
$local_cert = FULL_PATH_TO_MY_CERT;

   $client = new SoapClient($wsdl, array(
                'local_cert' => $local_cert,
                'trace' => 1,
                'exceptions' => 1,
                'soap_version' => SOAP_1_1,
                'encoding' => 'ISO-8859-1',
                'compression' => (SOAP_COMPRESSION_ACCEPT | SOAP_COMPRESSION_GZIP),
                'location' => 'https://webserviceurl:port/ws/servlet/ws'
            )); 
```

只有我收到此错误：

警告 (2)：SoapClient::SoapClient() [soapclient.soapclient]：无法设置私钥文件 `PATHTOMYLOCALCERT' [APP\Vendor\WebServices\MyWS.php，第 206 行]

警告 (2)：SoapClient::SoapClient() [soapclient.soapclient]: 未能创建 SSL 句柄 [APP\Vendor\WebServices\MyWS.php，第 206 行]

警告 (2): SoapClient::SoapClient() [soapclient.soapclient]: 无法启用加密 [APP\Vendor\WebServices\MyWS.php，第 206 行]

警告 (2): SoapClient::SoapClient(https://webserviceurl:port/ws/servlet/ws?wsdl) [soapclient.soapclient]: 无法打开流: 操作失败 [APP\Vendor\WebServices\MyWS.php,第206行]

警告 (2): SoapClient::SoapClient() [soapclient.soapclient]: I/O 警告: 未能加载外部实体 "https://webserviceurl:port/ws/servlet/ws?wsdl" [APP\Vendor\WebServices \MyWS.php，第 206 行]

但我发现了一个使用函数 file_get_contents($local_cert); 的小技巧（在 php.net 中）；错误消失了。

但是一个新的错误又来了。

结果：字符串（773）“读取前缀错误：Action.Execute”

我的意思是......上面的这个错误......来自WebService？因为它无法通过我的请求进行身份验证？

谢谢大家。（感谢您的回答）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T04:14:54.647

我在我的肥皂电话中使用 SSL 证书。

在我的情况下，我在我的服务器上给出了绝对路径，`wsdl`因为`local_cert` 我已经在我的班级中定义了这些路径。请注意，我正在使用`.pem`格式的证书。

```
public $local_cert = "/var/www/.../webroot/cert.pem";
public $wsdl = "/var/www/.../webroot/my_wsdl.wsdl";

$this->client = new SoapClient($this->wsdl, array(
        "trace"         => 1, 
        "exceptions"    => true, 
        "local_cert"    => $this->local_cert, 
        "uri"           => "urn:xmethods-delayed-quotes",
        "style"         => SOAP_RPC,
        "use"           => SOAP_ENCODED,
        "soap_version"  => SOAP_1_2 ,
        "location"      => $this->location
    )
); 
```

在我的证书中有 2 个部分。证书和 RSA 私钥。

```
(1)-----BEGIN CERTIFICATE-----
MIIFjzCC....
....
-----END CERTIFICATE-----
(2)-----BEGIN RSA PRIVATE KEY-----
MIIEpAI....
....
ww==
-----END RSA PRIVATE KEY---- 
```

最重要的是，您应该使用`https`链接拨打肥皂电话。这对我来说很好。

希望这会帮助你。

# android - 来自 http 调用的随机禁止 (403) 响应

> ID：11676396
> 
> 赞同：1
> 
> 时间：2012-07-26T19:10:46.357
> 
> 标签：android, apache, http

我在我的 Android 应用程序中进行了很多 http 调用。http 调用大部分是同步的。每隔一段时间，我就会连续收到许多 403 禁止响应，点击相同的 URL。我在导致 403 的调用之前直接进行了登录调用。登录调用返回 200 ok。403 也更多地出现在较新的 Android 平台上。

我如何创建客户端：

```
 // Create and initialize HTTP parameters
    HttpParams params = new BasicHttpParams();
    ConnManagerParams.setMaxTotalConnections(params, 200);
    ConnPerRoute cpr = new ConnPerRoute() {
        public int getMaxForRoute(HttpRoute httpRoute) {
            return 50;
        }
    };
    ConnManagerParams.setMaxConnectionsPerRoute(params, cpr);
    HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);

    // Create and initialize scheme registry 
    SchemeRegistry schemeRegistry = new SchemeRegistry();
    schemeRegistry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));

    // Create an HttpClient with the ThreadSafeClientConnManager.
    ClientConnectionManager cm = new ThreadSafeClientConnManager(params, schemeRegistry);
    _client = new DefaultHttpClient(cm, params); 
```

http调用：

```
CookieStore cookie_store = HttpSupport.getCookieStoreInstance();   
HttpContext http_context = HttpSupport.getHttpContextInstance(); 
HttpGet get = new HttpGet(StaticFields.DEVICES_RESOURCE);
http_context.setAttribute(ClientContext.COOKIE_STORE, cookie_store);
response = client.execute(get, http_context);
status_code = response.getStatusLine().getStatusCode(); 
```

我正在使用我的类 HttpSupport 中包含的静态 CookieStore 和 HttpContext。

# spring - 无法从控制器移动到 Spring MVC 中的视图

> ID：11676404
> 
> 赞同：0
> 
> 时间：2012-07-26T19:11:07.423
> 
> 标签：spring, spring-mvc

我正在为我的项目使用 Spring MVC 框架。
我无法让我的代码从控制器运行到查看。

在这里分享重要的代码块.....

AdminController.java 控制器内部

```
 System.out.println("controller returning");
        return new ModelAndView("dataFrame_","frameData",dataString); 
```

里面`dispatcher-servlet.xml`

```
 <bean name="/dataFrame.htm"
        class="com.organization.dept.spec.proj.module.controller.DataFrameController" >
         </bean>
     <bean id="dataFrameViewResolver"
        class="com.organization.dept.spec.proj.module.view.DataFrameViewResolver">
        <property name="dataFrameView">
            <bean class="com.organization.dept.spec.proj.module.view.DataFrameView" />
        </property>
        <property name="dataFramePrefix" value="dataFrame_"></property>      
    </bean> 
```

在 DataFrameViewResolver.java 里面

```
 public class DataFrameViewResolver extends AbstractCachingViewResolver {

 private String dataFramePrefix;

 private View dataFrameView;

 @Override
 protected View loadView (String viewName, Locale locale) throws Exception {
        View view = null;
           if(viewName.startsWith(this.dataFramePrefix)){
                view = dataFrameView;
           }
            return view;
        } 
```

和

```
public String getDataFramePrefix() {
    return dataFramePrefix;
}

public void setDataFramePrefix(String dataFramePrefix) {
    this.dataFramePrefix = dataFramePrefix;
}

public View getDataFrameView() {
    return dataFrameView;
}

public void setDataFrameView(View dataFrameView) {
    this.dataFrameView = dataFrameView;
}

} 
```

在 DataFrameView.java ...

```
public class DataFrameView extends AbstractView {

    @Override
protected void renderMergedOutputModel(Map map, HttpServletRequest request,HttpServletResponse response) throws Exception {
    System.out.println("RenderMergeoutputModel");  //line 99 
```

我无法获得上述 system.out.println 即无法执行我的代码直到第 99 行。tomcat
的 localhost 日志文件显示了一些异常`java.lang.ClassNotFoundException: javax.servlet.jsp.jstl.core.Config`
，我将 jstl-1.2.jar 放在 lib 中，这可以让我摆脱但是仍然无法获取第 99 行的 DataFrameView 的 sysout。

# c# - WCF 数据服务条件查询拦截器

> ID：11676405
> 
> 赞同：0
> 
> 时间：2012-07-26T19:11:11.490
> 
> 标签：c#, c#-4.0, wcf-data-services

我有一个 wcf 数据服务，我的组织内的应用程序正在使用它。它包含以下实体：

```
Client
User
Membership 
```

数据设置为多租户，目前需要我们称之为客户端字符串或客户端唯一 ID 的字符串表示形式作为路径的一部分传入，我将其提取并添加到查询拦截器作为过滤器。直到最近，当我们有一个新客户加入时，这一直很有效，它的父客户字符串有很多孩子。因此，结果是一个查询，其中包含作为“in (.....)”为所有查询传入的 clientids 列表。还不错，但是当这个客户端现在尝试查询成员时，他们传入了 9k+ 的客户端 ID。单独执行时，生成的查询似乎运行得相当快，但整个数据库事务始终花费 > 30 秒。

如果提供了特定的用户 ID，我最终希望找到一种方法来绕过此类查询的此过滤器。URL 如下所示：

[http://service.com/clienta/Users(1234)/memberships](http://service.com/clienta/Users(1234)/memberships)

如果为用户或成员提供了特定的 ID，我可以避免过滤器，因为它有效地实现了相同的最终结果。我们不能拥有的是有人在做这样的事情：

[http://service.com/clienta/memberships](http://service.com/clienta/memberships)

没有任何过滤器。

我意识到这可能是分散的并且需要更多细节，因为这有点匆忙。请提出任何问题。非常感谢任何帮助或指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:20:52.633

您可以使用查询拦截器来拦截请求，然后如果满足您的条件以避免过滤，只需忽略它吗？

您还可以转到服务方法并传递您的参数，然后做任何您想做的事情。

# web-services - 基于肥皂的服务中的错误代码与肥皂故障

> ID：11676407
> 
> 赞同：1
> 
> 时间：2012-07-26T19:11:23.843
> 
> 标签：web-services, soap

我开发了一个基于肥皂的网络服务。它返回包含数据字段以及错误代码和错误消息字段的 java 对象，以防发生任何错误或存储任何异常。

我听说过应该用于错误和异常的soap错误消息。

我的问题是我应该坚持当前的方法还是应该使用肥皂故障消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T19:15:24.330

使用 SOAP 错误。这就是它们被发明的原因。

使用故障，您的 wsdl2java 或等效工具将为每种故障类型创建一个 Java 异常类。当故障发生时，服务的调用者可以使用 try/catch 块来捕获它。这使得使用该服务变得更加容易，因为无需在每次调用时检查错误代码。

这也意味着代码不能只是忘记检查错误代码。

# internet-explorer - 在 IE 中执行命令时如何避免格式化所有文本

> ID：11676408
> 
> 赞同：3
> 
> 时间：2012-07-26T19:11:25.113
> 
> 标签：internet-explorer, execcommand

我有一个我正在研究的项目，当用户在某种形式的 HTML/javascript 输入中键入时，需要自动格式化文本。现在输入被实现为一个内容可编辑的 HTML 元素。我处理这个问题的方法是使用 keyDown 来确定要添加的内容，并使用 execcommand 在为键事件添加文本之前设置正确的格式。这适用于 Chrome、Firefox 和 Safari。但我在 IE 中遇到了一个相当奇怪的问题。当光标位于可编辑内容的末尾或开头时，对选择使用 execcommand 或切换其值非常有效。问题是，当没有选择任何内容并且光标不在文本的末尾或开头时，execcommand 会影响所有 contenteditable 内容，而不仅仅是当前事件添加的文本。

这是一个快速编码的示例，它相当清楚地显示了这个问题：

```
<!DOCTYPE html>
<html>
  <head>
    <script>
      function styleActive(style) {
        var isActive = false;
        if(style) {
          isActive = document.queryCommandState(style);
    }
        return isActive;
      }
      function setStyle(style, desiredState) {
        if(style) {
          if(styleActive(style) != desiredState) {
            document.execCommand(style, false, null);
          }
        }
      }
      function autoFormat(e) {
        var keynum;
        var keychar;
        var numcheck;
        if(e.which) {
          keynum = e.which;
        }
        keychar = String.fromCharCode(keynum);
        numcheck = /\d/;
        if(numcheck.test(keychar)) {
          setStyle("subscript", true);
        } else {
          setStyle("subscript", false);
        }
      }
    </script>
    <style type="text/css">
      p._editable, p._editable p {margin:0px;}
      p._editable {margin-left:6px; margin-right:6px; margin-top:3px; margin-bottom:3px;}
    </style>
  </head>
  <body>
    <button type="button" onclick='document.getElementById("editable").focus(); document.execCommand("subscript", false, null);'>Sub</button>

    <button type="button" onclick='document.getElementById("editable").focus(); document.execCommand("superscript", false, null);'>Sup</button>
    <div>
      <div style="display:inline-block;min-width:30px;border-style:solid; border-width:5px;">
        <p id="editable" class="_editable" contenteditable="true" onkeydown="autoFormat(event);"></p>
      </div>
    </div>
    <script>document.getElementById("editable").focus();</script>
  </body>
</html> 
```

基本上，它只是两个 div 中的 ap 元素，随着它的扩展，它会随着它的扩展而扩展，并且格式状态会根据来自 p 元素的 keyDown 事件而改变。它所做的只是确保如果键是数字，则下标是活动的，否则它确保它是不活动的。重现此问题的最简单方法是键入一些数字，然后使用箭头键将光标移回它们。我所看到的是，在初始移动之后，所有下标数字现在都变得正常，因为正在调用下标的 execcommand，因为箭头键不是数字键。导致它发生的另一种方法是在文本中间没有选择任何内容时单击 sub 或 sup 按钮。

理想情况下，如果可能的话，最好了解正在发生的事情，以及一种在没有选择任何内容的情况下切换格式的方法不会影响一切，这样我就可以继续使用这种处理方式。如果这是不可能的，任何有关处理此问题的方法的建议将不胜感激。所需的最终结果是 javascript/HTML 中的文本输入，当有人点击时我会弹出，然后当他们键入时，我可以确定文本的内容以及将要添加的内容并相应地格式化输出，保持光标位置为文本输入通常会。我只担心较新的浏览器，例如 IE9 和支持 HTML5 的主要浏览器的较新版本。

目前我能想出的最好的主意是在我看到问题并尝试通过 DOM 操作插入字符的情况下在 keyDown 处吞下键输入。

# ios - 访问 CIImage 字节，应用程序崩溃

> ID：11676415
> 
> 赞同：0
> 
> 时间：2012-07-26T19:11:49.053
> 
> 标签：ios, bitmap, ciimage

我正在将一些 OSX 代码移植到 iOS 并且需要访问 CIImage 的字节。OSX 版本使用 NSBitmapImageRep 执行此操作，但在 iOS 上我需要跳过一些障碍。

这是我要运行的代码

```
CIContext *context = [CIContext contextWithOptions:nil];
CGImageRef cgImage = [context createCGImage:image fromRect:image.extent];
CGDataProviderRef provider = CGImageGetDataProvider(cgImage);
CFDataRef data = CGDataProviderCopyData(provider);

CGRect extent = [image extent];
//png.Load((UInt8*)CFDataGetBytePtr(data), extent.size.width, extent.size.height, true);

CFRelease(data);
//CGDataProviderRelease(provider); 
```

它按预期工作，但一段时间后应用程序崩溃。我不知道为什么。我正在猜测内存泄漏/超出范围的内存。据我所知，一切都被正确释放了......如果我将这些行注释掉，没有任何崩溃。如果我在应用程序中评论 CGDataProviderRelease 几乎立即崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:25:06.463

我认为您需要 CFRelease(cgImage) - 您使用“创建”来创建它吗？

# javascript - IE 表中的额外空间

> ID：11676430
> 
> 赞同：1
> 
> 时间：2012-07-26T19:12:42.940
> 
> 标签：javascript, internet-explorer, html-table, whitespace

**问题 #1 -** 我已经阅读了所有关于在表格中消除 IE 中的“空白”的不同解决方案，但到目前为止还没有任何效果！我正在处理的页面在 Firefox 和所有其他浏览器中显示正常。我已经尝试过 height=100% 命令，但这让事情变得更糟并且间隔开来，我还尝试删除不同 table 和 td 标签之间的空格，但这也没有改变任何东西。这些图像正好是 115px 正方形或水平或垂直图像的两倍。

**问题 #2 -** 我有一个图像库，用于单击图像时应该出现的每个图像。它在 Firefox 和 Chrome 中看起来不错，但 IE 不会显示图片库。帮助使该 javascript 工作？

[您可以在www.tracystonearchitect.com](http://www.tracystonearchitect.com)上看到我们的“实时”站点（它只是主页 - 站点的其余部分在 flash 中......我们正在努力转换） - 它在 Chrome 中显示为 100% 正确，间距问题和图片库问题出现在 IE 中，而在 Firefox 中，我使用的字体无法正确加载。这是我可能已经在本地发现的另一个问题，但尚未发布更新。

我对所有这些编码内容还是很陌生，所以可能是用户错误。我也一直在尝试不同的技术来解决这些问题，所以根据我尝试不同的解决方案，事情可能会有点不对劲。我很感激任何关于如何修复空间的想法或想法——或任何其他代码技术评论！

请帮忙，我真的需要一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:48:20.723

根据问题 #1

你有 IE 的开发者工具吗？这对我对网页进行故障排除和调试至关重要。我看了你的页面。在开发工具中查找菜单中的查找并通过单击选择选择元素。对几个 img 执行此操作。查看开发屏幕的右侧并选择布局。我注意到不同图片之间的偏移量不同。请参阅其他 SO 主题[如何使用 CSS 消除元素的偏移量？](https://stackoverflow.com/questions/4817745/how-do-i-get-rid-of-an-elements-offset-using-css). 我在您的代码中看到的 css 重置您在正确的轨道上。尽管继续。文章提到定位是一个可能的原因。

根据问题 #2，我希望我有更多的时间来深入研究这个问题。我研究了这个错误，发现很多命中很可能是语法错误。请参阅此 SO 主题[Javascript 错误的可能情况：“预期的标识符、字符串或数字”](https://stackoverflow.com/questions/2149762/possible-cases-for-javascript-error-expected-identifier-string-or-number)

我希望这能为您指明正确的方向。

# jquery - 用 jquery 手风琴跳跃

> ID：11676435
> 
> 赞同：2
> 
> 时间：2012-07-26T19:12:50.620
> 
> 标签：jquery, accordion

我已经继续创建了一个 jquery 手风琴，当它打开时它一直在跳跃。我认为这可能是 .content div 上的边距/填充问题，但在删除它之后，这似乎不是问题。我看不出还有什么会导致问题。

我已经上传了，大家可以看看

[http://sites.lukespoor.com/accordion/](http://sites.lukespoor.com/accordion/)

我已经查看了其他线程，有些人说要申请

```
display:block; 
```

到 li 等，但这并没有解决我的问题:(

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T19:27:18.560

虽然手风琴使事物具有动画效果，但它会在一小段时间内`position:absolute`将`div.content`a 赋予 ，同时计算`height`. 此时`div.content`的宽度大于`li`，结束于 的末尾`body`。所以`height`计算是错误的，这个你试试就可以看`absolute positioning`出来`.content`。

解决的办法是把父级`li`设为`relative positioned`，所以即使在计算时`div.content`设置为，它也需要父级的，你得到正确的。`absolute``height``width``li``height`

```
.accordion li {
    border-bottom: 1px dotted #D4D4D4;
    display: block;
    position: relative;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:20:11.183

看看这个教程。它似乎为跳转问题提供了解决方案：

[http://jqueryfordesigners.com/slidedown-animation-jump-revisited/](http://jqueryfordesigners.com/slidedown-animation-jump-revisited/)

# java - How can I send massive mail in java?

> ID：11676440
> 
> 赞同：3
> 
> 时间：2012-07-26T19:13:16.450
> 
> 标签：java, email

I have made a site where the users can subscribe to a workshop.

I want the teacher of each workshop to be able to send a mail to all his students (app 30 to 100 mail) , and sometimes I want to send a global mail to all the students (app 1000 to 3000 mail).

Now I use the library javamail with gmail, but I can't send a massive email (sending one email with many email address in bcc, app 3000 mail).

Is there a easy way to make an SMTP server in Java? And how can I make my emails avoid the spam folder?

# c# - Exception Logging Using StackTrace

> ID：11676442
> 
> 赞同：0
> 
> 时间：2012-07-26T19:13:42.460
> 
> 标签：c#, vb.net

I wanted to log the Exception details Filename , FileLineNo, Method Name (where the exception occured) This is working using the StackTrace class But some times i am getting the File Line No and Method Name as null How shall i track Exception Details all the time when an Exception occur

here is my code

```
Public Shared Sub LogException(ByVal ex As Exception)

Dim trace As Diagnostics.StackTrace = New Diagnostics.StackTrace(ex, True)
LogInfo(String.Format("Error Message :{0}  => Error In :{1}  => Line Number :{2} => Error Method:{3}",
                              ex.Message, trace.GetFrame(0).GetFileName(),
                              trace.GetFrame(0).GetFileLineNumber(),
                              trace.GetFrame(0).GetMethod().Name))
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T19:17:36.513

所以，你所有问题的答案可能是：“被捕获的异常将包含它可能拥有的所有细节。”

您的公共共享子 LogException 正在获取一个已经将拥有大部分信息的 Exception 对象。所以，你可以做...

```
LogInfo(ex.ToString()) 
```

...并获得尽可能多的细节。

在某些情况下，您可能没有文件名或行号，并且在某些情况下，您拥有的 LogInfo 语句本身会引发异常。[这](https://stackoverflow.com/questions/628565/display-lines-number-in-stack-trace-for-net-assembly-in-release-mode)解释了如何可靠地获取这些详细信息，尽管它带有潜在的安全风险。

我发现 Exception.ToString() 中包含的异常类型和堆栈跟踪信息通常足以查明实际错误。如果不是，则通常是代码结构的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T19:16:36.860

异常已经包含完整的堆栈跟踪。你不需要创建一个新的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T19:17:17.410

1) 您可以使用 Exception 对象从内部获取堆栈跟踪[`Exception.StackTrace`](http://msdn.microsoft.com/en-us/library/system.exception.stacktrace.aspx)。你不需要创建一个新的。

2) 如果异常是从您没有调试信息的地方抛出的（例如在框架内），*您可能根本没有要获取的行号或源文件名*。

# nfc - Functionatlity of Open NFC Framework

> ID：11676444
> 
> 赞同：1
> 
> 时间：2012-07-26T19:13:53.250
> 
> 标签：nfc, open-nfc

I have fundamental question about what Open NFC framework is for. I want to write a program that will run on a PC to communicate with a NFC card reader connected to the PC through USB. The program will write to and read from NFC tags by commanding the NFC card reader.

Is Open NFC framework suited for this purpose? Or is it for developing programs that will run on NFC tags?

Aritra

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:35:15.510

OpenNFC 是实现 NFC 功能的软件堆栈。它是独立于硬件的，因此理论上您可以将它与 USB 连接的读卡器一起使用。问题是，OpenNFC 唯一可用的 HAL（硬件抽象层）用于 NFC 模拟器和内部安全硬件。在我们为最常见的硬件获得一些 HAL 之前，我想说你应该看看[http://www.libnfc.org/documentation/introduction](http://www.libnfc.org/documentation/introduction)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T20:15:32.173

市场上有许多 NFC 阅读器，它们与自己的 SDK 一起出售。使用此类 SDK，您可以 100% 确定代码与特定的 NFC 阅读器兼容。

BR 斯坦

# sql - 拉丁表中外语字段的查询排序规则

> ID：11676449
> 
> 赞同：1
> 
> 时间：2012-07-26T19:14:03.663
> 
> 标签：sql, sql-server-2008-r2, collation

我有一系列表格，每个表格都有专门的外语列。语言有日语、泰语、英语、意大利语、法语等20多种。

所有这些表都使用拉丁文不区分大小写排序规则设置。数据库工作正常。

但现在我正在尝试查询每个表的特定外语列。让我们以日语作为初学者。我希望外语用户输入外文并根据外语栏查找记录。

```
 DECLARE @myVar nvarchar(max);

  SET @myVar =  'ｴﾝｼﾞﾝ ｽﾄｯﾌﾟ ﾘﾚｰ'      = 'Engine Stop Relay' in english

  Select *
  FROM tableJapanese
  WHERE langString = @myVar; 
```

我尝试了多种排序规则组合。我什至复制了表格并将列的排序规则更改为 Japanese_CI_AI 并尝试以这种方式查询它。

当列是拉丁文或日文时，这些 WHERE 子句均不适用于表/列排序规则...

```
WHERE lang_String collate Japanese_CI_AI = @myVar;
WHERE lang_String = @myVar collate Japanese_CI_AI;
WHERE lang_String collate Japanese_CI_AI = @myVar collate Japanese_CI_AI;

WHERE lang_String collate Japanese_CI_AI = @myVar;
WHERE lang_String = @myVar collate Japanese_CI_AI;
WHERE lang_String collate Japanese_CI_AI = @myVar collate Japanese_CI_AI; 
```

我想将列/数据库保留为拉丁排序规则，并尽可能对每种语言的查询进行编码。

这似乎是我已经被蛇咬过的问题之一。谁能看到我错过了什么？

MSSQL 速成版 2008 R2

**解决方案**：

字段前加N，表示unicode to SQL...

```
 Select *
  FROM tblLangJAP_test
  WHERE lang_String = N'ｴﾝｼﾞﾝ ｽﾄｯﾌﾟ ﾘﾚｰ'; 
```

完美运行。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:50:45.963

字段前加N，表示unicode to SQL... Select * FROM tblLangJAP_test WHERE lang_String = N'ｴﾝｼﾞﾝ ｽﾄｯﾌﾟ ﾘﾚｰ';

完美运行。

# java - Running and Importing files folder along with runnable jar in eclipse

> ID：11676451
> 
> 赞同：0
> 
> 时间：2012-07-26T19:14:08.387
> 
> 标签：java, eclipse, command-line, jar

I have a project in eclipse where all my source code is under mbl/src. I am exporting this code as a runnable jar. I have got another folder under mbl/files which contains some of the properties files.I want to export these files also but eclipse doesnt give any such option. I have put the mbl/files under add class folder in build path options but still I am facing similar issues. I have also put the files folder directly under src folder but still it is not able to access it.I am using following options in commandline.

java -jar myprogram.jar arg1

It gives this error:

*Unable to find files/text1.properties*

text1.properties is under mbl/files/text1.properties

and is referred in the following manner from main class:

```
FileInputStream fs=new FileInputStream("files\\text1.properties"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:33:16.843

Jars 中的资源，需要通过该`Class.getResource(...)`方法读取。

此方法返回一个`URL`对象，您可以从中获取一个`InputStream`

# mysql - MySQL 迁移工具包 Java 运行时错误

> ID：11676452
> 
> 赞同：0
> 
> 时间：2012-07-26T19:14:08.663
> 
> 标签：mysql, mysql-gui-tools

当我尝试在 Windows 中运行 MySQL 迁移工具包 GUI 时，我收到一条错误消息，指出未安装 Java。Java 已安装，但 Migration Toolkit 无法识别它。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-02T07:58:25.757

好吧，为了使它起作用，解决方案非常简单。转到您已安装 MySQL 迁移工具包的文件夹。**为可执行文件MySQLMigrationTool.exe**创建一个快捷方式，例如到您的桌面
然后右键单击您刚刚创建的快捷方式并在**目标**上像这样修改它

```
"C:\Program Files (x86)\MySQL\MySQL Migration Toolkit 1.0\MySQLMigrationTool.exe" -verbose -jvm **The Path to your 32bit jvm.dll** 
```

例如，对于我使用**jre1.8.0_45**进行的安装是

```
"C:\Program Files (x86)\MySQL\MySQL Migration Toolkit 1.0\MySQLMigrationTool.exe" -verbose -jvm ***"C:\Program Files (x86)\Java\jre1.8.0_45\bin\client\jvm.dll"*** 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:43:13.797

您真的应该尝试最新 MySQL Workbench 版本附带的新迁移向导。MySQL Migration Toolkit 已在几年前逐步淘汰，并且没有处于积极开发中。

有关迁移向导的教程，请查看[How-To: Guide to Database Migration from Microsoft SQL Server using MySQL Workbench](http://mysqlworkbench.org/?p=1350)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-22T15:22:28.090

无论如何，如果仍然有人在 MySQL Migration Toolkit 和 jre 1.8 上苦苦挣扎，我建议停止打扰，因为通过设置 jvm.dll 修复启动后，它无法执行反向工程步骤并显示以下消息：

```
 The schema could not be reverse engineered (error: 0).
ReverseEngineeringAccess.reverseEngineer :sun.jdbc.odbc.JdbcOdbcDriver
Details: 
java.net.URLClassLoader.findClass(Unknown Source)
java.lang.ClassLoader.loadClass(Unknown Source)
sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
java.lang.ClassLoader.loadClass(Unknown Source)
java.lang.Class.forName0(Native Method)
java.lang.Class.forName(Unknown Source)
com.mysql.grt.modules.ReverseEngineeringGeneric.establishConnection(ReverseEngineeringGeneric.java:84)
com.mysql.grt.modules.ReverseEngineeringAccess.reverseEngineer(ReverseEngineeringAccess.java:92)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
java.lang.reflect.Method.invoke(Unknown Source)
com.mysql.grt.Grt.callModuleFunction(Unknown Source) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-18T14:42:33.933

我让该工具运行并迁移了大部分表，但对结果不满意，因为许多表创建失败。它仍然很有用，因为我得到了脚本，以便我以后可以编辑它。我使用了这些版本

迁移工具包 1.0.25

IBM JRE 5.0（我在系统中有这个） - 必须按照约翰提到的那样设置 JVM。

为您的数据库使用 Oracle JDBC 驱动程序（12c ojdbc8），但必须将其重命名为 ojdbc14.jar 并使用。

从 MySQL Migration Toolkit 1.0\java\lib 中删除 mysql-connector-java-3.1... 文件（3 个文件）并放置 mysql-connector-java-5.1.44.jar

运行该工具。

我为 MySQL 用户使用了 mysql_native_password：- ALTER USER 'mysqluser'@'%' IDENTIFIED WITH mysql_native_password BY 'pass';

# java - java中的简单标准输入读取

> ID：11676454
> 
> 赞同：0
> 
> 时间：2012-07-26T19:14:11.773
> 
> 标签：java, c++, buffer

我刚刚尝试学习 Java，我的问题是我如何阅读用户键入的内容？

当我学习 C++ 时，我学到的第一件事是`cin`/`cout`但在 java 中，我已经看到在阅读用户输入之前讨论 GUI 的教程。

简单来说，我如何在java中制作这个程序：

```
int main()
    {
         int foo;
         cin >> foo;
         cout << foo;
         return 0;
    } 
```

像这样的东西：

```
public class foo {
    public static void main(String[] args) 
    { 
        int foo; 
        READ FROM IN-BUFFER;
        System.out.println(foo);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T19:16:40.853

您需要使用扫描仪：

```
import java.util.*;

public class foo  {

    public static void main(String[] args) {
        int foo;
        Scanner scnr = new Scanner(System.in);
        foo = scnr.nextInt();
        System.out.println(foo);
    }

} 
```

在这里，扫描器从 System.in（键盘）读取输入，然后将输入的值分配给 foo。如果输入不是 int，则会发生异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:16:15.127

`args`参数通常包含您在运行时传递的参数（java className param1）您的程序

如果您想提示用户输入，您可以考虑使用[Scanner](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T19:16:16.377

看起来像：

```
public class Foo {
    public static void main(String[] args) 
    { 
        Scanner in = new Scanner(System.in);  
        int foo = in.nextInt(); // read int from 'STDIN'
        System.out.println(foo);
    }
 } 
```

[在Scanner API 文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)中查看更多信息。

# windows - Using silverlight controls in wp7 application bad?

> ID：11676455
> 
> 赞同：1
> 
> 时间：2012-07-26T19:14:14.450
> 
> 标签：windows, silverlight, windows-phone-7, mobile, toolkit

I have seen many examples online about using silver light controls in wp7 applications, but most people say that its bad practice because you should only be using controls only from the windows phone toolkit. I just want to know whats right?

thanks,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:19:09.933

*Short answer:* **No, it is not bad practice, as long as the controls were designed for Windows Phone**

*Long answer:* You should always make sure that you know the source of the controls. Although a lot of third-party controls are of solid quality, some of them might be resource hogs if created by unexperienced developers. The controls bundled in the stock SDK are optimized by Microsoft devs, following the proper design and perf guidelines. There is no such guarantee with controls coming from external sources.

# python - 如何在 Python 中通过变量名命名文件？

> ID：11676458
> 
> 赞同：1
> 
> 时间：2012-07-26T19:14:29.123
> 
> 标签：python, variables, io

我想将网络名称作为输入，然后我希望使用与变量相同的名称保存文件。有没有办法取一个变量，然后用变量名命名一个文件？

例如，假设我将名为 facebook 的网络保存为字典。我可以以某种方式获取该变量名并将其用作文件名吗？

这一切都在 Python 中。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T19:18:45.873

您可以声明如下值：

```
# Let's create a file and write it to disk.
filename = "facebook.txt"

# Create a file object:
# in "write" mode
FILE = open(filename,"w")

# Write all the lines at once:
FILE.writelines("Some content goes here")

# Close
FILE.close() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T19:18:19.387

如果你有

```
data=['abc','bcd'] 
```

你可以做

```
file = open('{0}.txt'.format(data[0]),"w") 
```

它将创建文件为 abc.txt

将一些文本写入文件

```
file.writelines('xyz')

file.close() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T19:46:49.313

我不明白你，因为你的问题不是很清楚，无论如何我会发布两个解决方案

如果您希望将文件名命名为变量的名称

我建议使用此代码

```
for i in locals():
  if 'variable name' is i:IObject = open(i+".txt",'w')#i've added .txt extension in case you want it text file 
IObject.write("Hello i'm file name.named with the same name of variable") 
```

或其他

```
name_of_file = raw_input("Enter the name")
IOjbect = open(name_of_file+".txt","w")
IObject.write("Hey There") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-15T01:34:58.313

我正在尝试这种方法，但遇到了一个非常奇怪的问题，我的项目被保存到程序后面运行的文件中。所以如果我运行一次文件，什么都不会发生。第二次，运行的信息将被保存。

```
f = open("results_{0}.txt".format(counter), 'w')
f.write("Agent A vs. Champion\n"
      + "Champion wins = "
      + str(winsA1)
      + " Agent A wins = "
      + str(winsB1))
f.write("\n\nAgent B vs. Champion\n"
      + "Champion wins = "
      + str(winsA2)
      + " Agent B wins = "
      + str(winsB2))
f.write("\n\nRandom vs. Champion\n"
      + "Champion wins = "
      + str(winsA3)
      + " Random wins = "
      + str(winsB3))
f.close() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T20:11:11.837

会这样做吗？

```
n_facebook = {'christian': [22, 34]}
n_myspace = {'christian': [22, 34, 33]}

for network in globals():
    if network.startswith('n_'):
        # here we got a network
        # we save it in a file ending with _network.txt without n_ in beginning
        file(network[2:] + '_network.txt', 'w').write(str(globals()[network])) 
```

此文件将 n_facebook 保存到 facebook_network.txt。我的空间也。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-08T13:43:25.307

这是让文件名成为用户输入的内容的简单方法：

```
#Here the user inputs what the file name will be.
name_of_file = input("Enter what you want the name of the file to be.")

#Then the file is created using the user input.
newfile = open(name_of_file + ".txt","w")

#Then information is written to the file.
newfile.write("It worked!")

#Then the file is closed.
newfile.close() 
```

# c++ - cin.get() ASCII 码与代码中已设置字符的 ASCII 码不同

> ID：11676459
> 
> 赞同：0
> 
> 时间：2012-07-26T19:14:33.787
> 
> 标签：c++

我有一个问题`cin.get()`：

在获取 char 时，我将其转换为 int，但是当我通过控制台输入它时，结果与它已经在代码中设置时的结果不同。

这是示例：

```
int ord(unsigned char chr){
    int ret=int(chr);
    return ret;
}
int main(){
    unsigned char chr='ň'; //This is my constant character 'ň' for now
    cout<<ord(chr)<<endl; //outputs : 242 ,which is alright for me, because it is same as in PHP and that I need
    chr=cin.get(); //now I change my constant character 'ň' to 'ň' written through console 
    cout<<ord(chr)<<endl; //outpus : 229 ,which is wrong for me, because its not same as in PHP 
} 
```

我怎样才能解决这个问题？

我想得到 242，而不是 229，它必须与 PHP 中 ord() 的结果相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:36:24.320

源文件和控制台输入通过两个不同的过程来解释字符并将其转换为代码。第一个被输入文本编辑器并由编译器转换，第二个由操作系统和控制台库解释。

值 242 对应于[ISO/IEC 8859-2](http://en.wikipedia.org/wiki/ISO-8859-2)或[Windows 1250](http://en.wikipedia.org/wiki/Windows-1250)代码页中的字符。

我不确定值 229 的来源，但几乎可以肯定这是因为正在使用不同的代码页为字符分配值。例如，可能是[代码页 852](http://en.wikipedia.org/wiki/Code_page_852)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:37:41.680

问题是您的控制台正在从[代码页 852](http://en.wikipedia.org/wiki/Code_page_852)中读取字符，其中`ň`在代码点 229 (0xE5) 处编码，但您希望其值在[ISO 8859-2](http://en.wikipedia.org/wiki/ISO_8859-2)（又名 Latin-2）中，`ň`在代码点 242 处编码(0xF2)。

我强烈建议您放弃这种方法并专门使用 Unicode，它没有这些类型的问题。处理诸如 ISO 8859 变体和 DOS 代码页之类的非 Unicode 编码只会让人头疼。

要使用 Unicode 数据，[请参阅此问题](https://stackoverflow.com/questions/3207704/how-can-i-cin-and-cout-some-unicode-text)。在 Unicode 中，`ň`是代码点 U+0148。

此外，这与您的问题无关，但您的`ord()`功能没用。 `cin.get()`已经返回一个`int`，并且`unsigned char`可以隐式转换为一个`int`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T19:40:13.190

问题是该字符`ň`不是 ASCII 字符，因此没有 ASCII 代码。

当给定一个非 ASCII 字符时，PHP`ord()`和 C++都承诺未定义的结果。`ord()`

# javascript - 滚动顶部不起作用

> ID：11676467
> 
> 赞同：0
> 
> 时间：2012-07-26T19:15:13.903
> 
> 标签：javascript, jquery

我的代码 -

```
($("div[id$='fixedDataDiv']")[0]).scrollTop(0); 
```

当我在 IE8 中更改选项卡时调用。

我得到的错误信息是 -

```
Microsoft JScript runtime error: Object doesn't support this action 
```

我的语法不正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T19:16:14.083

如果要选择第一个匹配的元素，可以尝试：

```
$("div[id$='fixedDataDiv']:first").scrollTop(0); 
```

`scrollTop()`是 jQuery 对象的方法之一，`[0]`将 jQuery 对象转换为没有`scrollTop()`方法的 DOM 元素。

# dojo - 如何使用 dojox TableContainer 获得这种格式？

> ID：11676469
> 
> 赞同：0
> 
> 时间：2012-07-26T19:15:19.630
> 
> 标签：dojo

我需要有类似的东西：

文本框

文本框按钮

复选框

我正在使用 dojox.layout.TableContainer 来包含元素。我写的代码在这个小提琴中 - [http://jsfiddle.net/sNACz/71/](http://jsfiddle.net/sNACz/71/)

我似乎无法获得正确的格式。班级和年龄框向右缩进。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:41:05.763

您可以使用 cols 修改 yout Table 的列数，例如 3、6，您需要的任何数字......并稍微调整 labelWidth：http: [//jsfiddle.net/sNACz/85/](http://jsfiddle.net/sNACz/85/) 我希望这会有所帮助，还请注意，如果需要，您也可以使用 colspans :) TableContainer 非常灵活，只要您在启动后不尝试删除字段。

我想在你的情况下一个 cols: 2 应该足够了，因为你正在嵌套 tableContainers......玩一下，不要犹豫检查代码以获得更多可能性（colspans 等）......

# linux - .got 和 .got.plt 部分有什么区别？

> ID：11676472
> 
> 赞同：24
> 
> 时间：2012-07-26T19:15:36.470
> 
> 标签：linux, elf, dynamic-linking

ELF 格式的 .got 和 .got.plt 部分有什么区别？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-26T18:33:03.103

我之前的评论是正确的：

> 我认为`.got`是关于全局“变量”的重定位，而在解决程序绝对地址时`.got.plt`是一个辅助部分。`.plt`

下面的例子让事情变得更清楚了。

这些是我的 32 位 i686-linux /lib/libm.so 的重定位

```
Relocation section '.rel.dyn' at offset 0x32b8 contains 8 entries:
 Offset     Info    Type            Sym.Value  Sym. Name
00025030  00000008 R_386_RELATIVE   
00024fd8  00005706 R_386_GLOB_DAT    00025034   _LIB_VERSION
00024fdc  00000406 R_386_GLOB_DAT    00000000   __gmon_start__
00024fe0  00000506 R_386_GLOB_DAT    00000000   _Jv_RegisterClasses
00024fe4  00000806 R_386_GLOB_DAT    00000000   _rtld_global_ro
00024fe8  00000906 R_386_GLOB_DAT    00000000   stderr
00024fec  00013006 R_386_GLOB_DAT    0002507c   signgam
00024ff0  00000e06 R_386_GLOB_DAT    00000000   __cxa_finalize

Relocation section '.rel.plt' at offset 0x32f8 contains 12 entries:
 Offset     Info    Type            Sym.Value  Sym. Name
00025000  00000107 R_386_JUMP_SLOT   00000000   fputs
00025004  00000207 R_386_JUMP_SLOT   00000000   __errno_location
00025008  00000307 R_386_JUMP_SLOT   00000000   sprintf
0002500c  00000407 R_386_JUMP_SLOT   00000000   __gmon_start__
00025010  00000607 R_386_JUMP_SLOT   00000000   strtod
00025014  00000707 R_386_JUMP_SLOT   00000000   __assert_fail
00025018  00000a07 R_386_JUMP_SLOT   00000000   strlen
0002501c  00000b07 R_386_JUMP_SLOT   00000000   strtof
00025020  00000c07 R_386_JUMP_SLOT   00000000   fwrite
00025024  00000d07 R_386_JUMP_SLOT   00000000   strtold
00025028  00005e07 R_386_JUMP_SLOT   00005970   matherr
0002502c  00000e07 R_386_JUMP_SLOT   00000000   __cxa_finalize 
```

请注意，正如您所注意到的，有两个重定位部分，即 .rel.dyn 和 .rel.plt。您可以看到 .rel.plt 的所有重定位都是 R_386_JUMP_SLOT 类型，这意味着它们是分支重定位，另一方面，几乎所有 .rel.dyn 中的重定位都是 R_386_GLOB_DAT，这意味着全局变量的重定位。

Another subtle difference exist between .symtab and .dynsym. While the first contain references for all symbols used during static link editing the later contain only those symbols needed for dynamic linking. Thus, the relocations mentioned above refer only to .dynsym section.

# css - 任何滑块更改导航按钮的位置

> ID：11676473
> 
> 赞同：0
> 
> 时间：2012-07-26T19:15:41.710
> 
> 标签：css, anythingslider

我正在使用**[AnythingSlider](http://css-tricks.com/examples/AnythingSlider/)**，但我想将其按钮更改为显示在图像的左侧而不是底部。

我相信必须改变`<ul>`我`list-style:none;`尝试改变不同的位置，但我无法弄清楚如何将按钮的位置更改为左侧并垂直显示，就像**[这样](http://demo.gavick.com/joomla15/mar2009/)**。

**[这是我的 CSS](http://jsfiddle.net/jDWjV/1/)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:26:12.080

看看[这个演示](http://jsfiddle.net/Mottie/Cm479/4399/)。它使用`appendControlsTo`选项来完全移动滑块控件。您必须添加自己的 CSS 样式（参见演示）。

```
$('#slider').anythingSlider({
    // A HTML element (jQuery Object, selector or HTMLNode) to which
    // the controls will be appended, if not null
    appendControlsTo: $('#nav'),

    // Go to https://github.com/ProLoser/AnythingSlider/wiki/Navigation-options#wiki-navigationformatter
    // for details on how to set up this navigationFormatter option
    navigationFormatter: function(index, panel) {
        // This is the default format (show just the panel index number)
        return "" + index;
    }
});​ 
```

有关该[`appendControlsTo`选项](https://github.com/ProLoser/AnythingSlider/wiki/Appearance-Options#wiki-appending)的更多信息，请查看 wiki 文档

# excel - VBA宏将所有行分组在一个标题下，当存在多个标题时为标题

> ID：11676474
> 
> 赞同：0
> 
> 时间：2012-07-26T19:15:51.337
> 
> 标签：excel, vba

我正在编写一个 vba 宏来实现以下功能，但不知道如何实现它。请任何人提供一些指导吗？

目前，数据如下（子项从B列开始）：

```
ITEM ONE [Subitem one... ]
ITEM ONE [Subitem two ...]
ITEM ONE [Subitem three...]  
ITEM TWO [Subitem one  ...]
ITEM THREE [Subitem one...]
ITEM Three [Subitem two...] 
```

以下是数据在单独工作表中的样子：

```
ITEM ONE  
-------- 
Subitem one  
Subitem two 
Subitem three  

ITEM TWO 
-------- 
Subitem one  

ITEM THREE 
---------- 
Subitem one 
Subitem two 
```

任何指导/帮助将不胜感激。

编辑：解决方案如下：

```
 r = Range("a65536").End(xlUp).Row
  c = Range("IU1").End(xlToLeft).Column
  a = Split(Cells(, c).Address, "$")(1)
  MsgBox "last row with data is " & r & " and last column with data is " & a & "", vbOKOnly, "LastRow and LastCol"
  rr = r + 1

  Application.Visible = False

  Range("A1:" & a & r & "").Sort Key1:=Range("B2"), Order1:=xlAscending, Header:= _
    xlGuess, OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
    DataOption1:=xlSortNormal

Sheets("owssvr(1)").Select
Sheets.Add

'by default select first record and paste in reports sheet
Sheets("owssvr(1)").Select
Range("b2").Select
Selection.Copy

Sheets(1).Select
Range("b2").Select
ActiveSheet.Paste

   'paste header below it

Sheets("owssvr(1)").Select
Range("c1:" & a & "2").Select
Selection.Copy

Sheets(1).Select
Range("b3").Select
ActiveSheet.Paste

For i = 3 To r
Sheets(2).Select
'Program name is same as above, dont copy name but row starting from next col, switch to other sheet, find last row in col B, add one to last row and paste
    If Cells(i, 2).Value = Cells(i - 1, 2) Then
        Range("C" & i & ":" & a & i & "").Select
        Selection.Copy

        Sheets(1).Select
        'Range("b3").Select
        lr2 = Range("b65536").End(xlUp).Row
        Range("B" & lr2 + 1 & "").Select
        ActiveSheet.Paste
        Else
        'if name is not same as above, copy name, find last row, add two to add a gap from prev program name, paste program name, move to next row and paste remaining cols
         Sheets(2).Select
         Range("B" & i & "").Select
         Selection.Copy

         Sheets(1).Select
         lr2 = Range("b65536").End(xlUp).Row
         Range("B" & lr2 + 2 & "").Select
         ActiveSheet.Paste

         'copy headers
         Sheets(2).Select

         Range("c1:" & a & "1").Select
         Selection.Copy
         Sheets(1).Select
         lr2 = Range("b65536").End(xlUp).Row
         Range("B" & lr2 + 1 & "").Select
         ActiveSheet.Paste

         'copy cells(row, col+1)
         Sheets(2).Select
         Range("C" & i & ":" & a & i & "").Select
         Selection.Copy

         Sheets(1).Select
        'Range("b3").Select
         lr2 = Range("b65536").End(xlUp).Row
         Range("B" & lr2 + 1 & "").Select
         ActiveSheet.Paste

    End If
    Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T19:33:26.843

您所要求的可以使用[PivotTable](http://office.microsoft.com/en-us/excel-help/pivottable-reports-101-HA001034632.aspx)来完成。我在 Excel 2010 中工作，但 2003 应该可能具有相同的功能。这就是它的样子。

![源数据](../Images/37ffef412d633bb8607382bdbaaea7e2.png)

![数据透视表](../Images/dba39a957103a09472d51dcf57ec7b9b.png)

我打算做的简单的 VBA 方法（我猜你已经实现了）是循环遍历所有项目，进行比较，然后一次将它们添加到新工作表中。如果将初始范围（2 列）存储在一个数组中，循环遍历该范围并将输出存储在第二个数组中，然后将数组复制回一个范围，则可以提高效率。

我不确定您拥有多少数据或该操作需要多长时间。另一种选择是使用宏记录器制作数据透视表并将数据从那里复制到新工作表。这是一个示例，尽管您希望更改工作表和范围引用以使其显式/动态。示例数据范围为`A1:B9`.

```
Sub Example()

    Range(Selection, Selection.End(xlToRight)).Select
    Range(Selection, Selection.End(xlDown)).Select

    Sheets.Add
    ActiveWorkbook.PivotCaches.Create(SourceType:=xlDatabase, SourceData:= _
        "Sheet1!R1C1:R9C2", Version:=xlPivotTableVersion14).CreatePivotTable _
        TableDestination:="Sheet4!R3C1", TableName:="PivotTable1", DefaultVersion _
        :=xlPivotTableVersion14
    Sheets("Sheet4").Select
    Cells(3, 1).Select
    With ActiveSheet.PivotTables("PivotTable1").PivotFields("item1")
        .Orientation = xlRowField
        .Position = 1
    End With
    With ActiveSheet.PivotTables("PivotTable1").PivotFields("sub12")
        .Orientation = xlRowField
        .Position = 2
    End With
    Range(Selection, Selection.End(xlDown)).Select
    Selection.Copy
    Sheets("Sheet2").Select
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T20:03:05.700

您的旧工作表称为 yourWorksheet。创建一个新工作表：

```
set newWS = thisworkbook.workbooks.add()

dim rr as long 
rr =1

for r = startRow to yourWorksheet.UsedRange.Rows.Count
    firstItem = yourWorksheet.cells(r,1).value
    newWS.cells(rr,1).value = firstItem
    rr = rr + 1
    do while firstItem = yourworksheet.cells(r,1).value
       newWS.cells(rr,1).value = yourworksheet.cells(rr,2).value 'copy all columns here
       rr = rr + 1
       r =r + 1
    loop
next r 
```

粗糙且未经测试，但这就是想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T21:17:21.887

如果您使用左命令并提取项目一、项目二等。

```
Heading(row) = Left(Cells(row,"B"), 8) 
```

然后提取子项：

```
SubItem(row) = Left(Right(cells(row, "B"), 20), 10) 
```

这些将提取文本。

你必须对三四有创意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T17:32:49.950

```
Sub Sort1()
'
' Sort1 Macro
' Macro recorded 7/30/2012 by American International Group
'
'

Dim r As Integer
Dim c As Integer
Dim lr2 As Integer
Dim a As String
Dim b As String
Dim cdb As Long
Dim name1 As String
Dim name2 As String

n1 = InputBox(Prompt:="Enter a name for worksheet else click OK", Title:="Enter a name for this sheet", Default:="owssvr")
n2 = InputBox(Prompt:="Enter a name for the Report view sheet else click OK", Title:="Enter a name for Report sheet", Default:="reportView")
b = InputBox(Prompt:="Enter Column Name on which to sort data", Title:="Sort by", Default:="B")
b = UCase(b)   'convert to uppercase  e.g.c to C
asciiCol = Asc(b)   'convert to ascii          66
asciiNext = asciiCol + 1  'add one to ascii to get next column ascii code e.g. 66+1=67 to get D

sortbyColNo = 0
sortbyColNo = Range(b & "1").Column

'Rename sheets to avoid conflict
Sheets(1).name = n1

Sheets("" & n1 & "").Select

r = Range("a65536").End(xlUp).Row
c = Range("IU1").End(xlToLeft).Column
a = Split(Cells(, c).Address, "$")(1)
x = Split(Cells(, c).Address, "$")(2)
MsgBox "last row with data is " & r & " and last column with data is " & a & "", vbOKOnly, "LastRow and LastCol"
rr = r + 1

'Application.Visible = False

  Range("A1:" & a & r & "").Sort Key1:=Range("" & b & "2"), Order1:=xlAscending, Header:= _
    xlGuess, OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
    DataOption1:=xlSortNormal

   Sheets("" & n1 & "").Select
Sheets.Add
ActiveSheet.name = n2

'by default select first record and paste in reports sheet
Sheets("" & n1 & "").Select
Range("" & b & "2").Select
Selection.Copy

Sheets("" & n2 & "").Select
Range("b2").Select
ActiveSheet.Paste

'paste header below it

Sheets("" & n1 & "").Select
Range("" & Chr(asciiNext) & "1:" & a & "1").Select
With Selection
.Font.Bold = True
End With
Range("" & Chr(asciiNext) & "1:" & a & "2").Select
Selection.Copy

Sheets("" & n2 & "").Select
Range("b3").Select
ActiveSheet.Paste

'start from row 3
For i = 3 To r
  Sheets("" & n1 & "").Select
'Program name is same as above, dont copy name but row starting from next col, switch to other sheet, find last row in col B, add one to last row and paste
    If Cells(i, sortbyColNo).Value = Cells(i - 1, sortbyColNo) Then
        Range("" & Chr(asciiNext) & "" & i & ":" & a & i & "").Select
        Selection.Copy

        Sheets("" & n2 & "").Select
        'Range("b3").Select
        lr2 = Range("b65536").End(xlUp).Row
        Range("B" & lr2 + 1 & "").Select
        ActiveSheet.Paste
        Else
        'if name is not same as above, copy name, find last row, add two to add a gap from prev program name, paste program name, move to next row and paste remaining cols
        Sheets("" & n1 & "").Select
         Range("" & b & "" & i & "").Select
         Selection.Copy

       Sheets("" & n2 & "").Select
         lr2 = Range("b65536").End(xlUp).Row
         Range("B" & lr2 + 2 & "").Select
         ActiveSheet.Paste

         'copy headers
        Sheets("" & n1 & "").Select

         Range("" & Chr(asciiNext) & "1:" & a & "1").Select
         Selection.Copy
       Sheets("" & n2 & "").Select
         lr2 = Range("b65536").End(xlUp).Row
         Range("B" & lr2 + 1 & "").Select
         ActiveSheet.Paste

         'copy cells(row, col+1)
     Sheets("" & n1 & "").Select
         Range("" & Chr(asciiNext) & i & ":" & a & i & "").Select
         Selection.Copy

        Sheets("" & n2 & "").Select
        'Range("b3").Select
         lr2 = Range("b65536").End(xlUp).Row
         Range("B" & lr2 + 1 & "").Select
         ActiveSheet.Paste

    End If
    Next
 'Application.Visible = True

'formatSheet

End Sub 
```

# r - R data.table 滑动窗口

> ID：11676476
> 
> 赞同：49
> 
> 时间：2012-07-26T19:15:58.353
> 
> 标签：r, time-series, data.table, sliding-window

使用 data.table 包实现滑动窗口功能的最佳（最快）方法是什么？

我正在尝试计算滚动中位数，但每个日期有多个行（由于 2 个附加因素），我认为这意味着 zoo rollapply 函数不起作用。这是一个使用简单 for 循环的示例：

```
library(data.table)
df <- data.frame(
  id=30000,
  date=rep(as.IDate(as.IDate("2012-01-01")+0:29, origin="1970-01-01"), each=1000),
  factor1=rep(1:5, each=200),
  factor2=1:5,
  value=rnorm(30, 100, 10)
)

dt = data.table(df)
setkeyv(dt, c("date", "factor1", "factor2"))

get_window <- function(date, factor1, factor2) {
  criteria <- data.table(
    date=as.IDate((date - 7):(date - 1), origin="1970-01-01"),
    factor1=as.integer(factor1),
    factor2=as.integer(factor2)
  )
  return(dt[criteria][, value])
}

output <- data.table(unique(dt[, list(date, factor1, factor2)]))[, window_median:=as.numeric(NA)]

for(i in nrow(output):1) {
  print(i)
  output[i, window_median:=median(get_window(date, factor1, factor2))]
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T11:26:52.533

`data.table`目前没有任何滚动窗口的特殊功能。我在此处对另一个类似问题的回答中提供了更多详细信息：

[有没有一种*快速*的方法可以在 data.table 中运行滚动回归？](https://stackoverflow.com/a/12157723/403310)

滚动中位数很有趣。它需要一个专门的功能才能有效地执行（与前面评论中的链接相同）：

[C中的滚动中值算法](https://stackoverflow.com/questions/1309263/rolling-median-algorithm-in-c?lq=1)

相对于适当的专用功能（R afaik 不可用） ，此处问题和答案中的`data.table`解决方案都非常低效。`rollingmedian`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T15:00:36.620

通过创建滞后数据集并进行大量连接，我设法将示例缩短到 1.4 秒。

```
df <- data.frame(
  id=30000,
  date=rep(as.IDate(as.IDate("2012-01-01")+0:29, origin="1970-01-01"), each=1000),
  factor1=rep(1:5, each=200),
  factor2=1:5,
  value=rnorm(30, 100, 10)
)

dt2 <- data.table(df)
setkeyv(dt, c("date", "factor1", "factor2"))

unique_set <-  data.table(unique(dt[, list(original_date=date, factor1, factor2)]))
output2 <- data.table()
for(i in 1:7) {
  output2 <- rbind(output2, unique_set[, date:=original_date-i])
}    

setkeyv(output2, c("date", "factor1", "factor2"))
output2 <- output2[dt]
output2 <- output2[, median(value), by=c("original_date", "factor1", "factor2")] 
```

这在这个测试数据集上运行良好，但在我的真实数据集上它失败了，只有 8GB 的​​ RAM。我将尝试升级到一个 High Memory EC2 实例（具有 17、34 或 68GB RAM）以使其正常工作。任何关于如何以较少内存密集型方式执行此操作的想法将不胜感激

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:28:16.400

此解决方案有效，但需要一段时间。

```
df <- data.frame(
  id=30000,
  date=rep(seq.Date(from=as.Date("2012-01-01"),to=as.Date("2012-01-30"),by="d"),each=1000),
  factor1=rep(1:5, each=200),
  factor2=1:5,
  value=rnorm(30, 100, 10)
)

myFun <- function(dff,df){
    median(df$value[df$date>as.Date(dff[2])-8 & df$date<as.Date(dff[2])-1 & df$factor1==dff[3] & df$factor2==dff[4]])
}

week_Med <- apply(df,1,myFun,df=df)

week_Med_df <- cbind(df,week_Med) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-16T23:55:55.707

我在相关线程中解决了这个问题：[https ://stackoverflow.com/a/62399700/7115566](https://stackoverflow.com/a/62399700/7115566)

我建议研究一下这个`frollapply`功能。例如，见下文

```
library(data.table)
set.seed(17)
dt <- data.table(i = 1:100,
             x = sample(1:10, 100, replace = T),
             y = sample(1:10, 100, replace = T))
dt$index <- dt$x == dt$y
dt[,`:=` (MA = frollapply(index,10,mean)), ]
head(dt,12) 
```

# php - 更新表 mysql & php

> ID：11676479
> 
> 赞同：0
> 
> 时间：2012-07-26T19:16:07.900
> 
> 标签：php, mysql

我有以下代码，它在更新分数和日期时工作正常。但它不会更新行的名称或国家。这与php字符串有关吗？？？很迷茫！

```
$userName = "John";
$userCountry = "USA";
$lowestScoreId =  99;
$userPoints = 500;

include 'config.php';

$currentTime = time();

mysql_query("UPDATE highScores SET name = $userName WHERE id='$lowestScoreId'");
mysql_query("UPDATE highScores SET score = $userPoints WHERE id='$lowestScoreId'");
mysql_query("UPDATE highScores SET country =$userCountry WHERE id='$lowestScoreId'");
mysql_query("UPDATE highScores SET date = $currentTime WHERE id='$lowestScoreId'"); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T19:17:39.760

您忘记了您设置的值周围的引号。您可以在 1 个查询中做到这一点。

```
UPDATE highScores
SET `name`    = '$userName',
    `score`   = '$userPoints',
    `country` = '$userCountry',
    `date`    = '$currentTime'
WHERE id='$lowestScoreId'" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:20:09.413

您应该在一份声明中做到这一点。

```
$userName = "John";
$userCountry = "USA";
$lowestScoreId =  99;
$userPoints = 500;

include 'config.php';

$currentTime = time();

mysql_query("UPDATE highScores SET name = '$userName', score = '$userPoints', country = '$userCountry', date = '$currentTime' WHERE id='$lowestScoreId'"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T19:34:43.013

此外，您不应再使用 PHP mysql_ 函数。看看[MySQLi](http://php.net/manual/en/book.mysqli.php)，它更新、更快、功能更多。

# extjs4 - toggle (hide/show) in Extjs4

> ID：11676484
> 
> 赞同：0
> 
> 时间：2012-07-26T19:16:26.890
> 
> 标签：extjs4, extjs

I am trying to do something like : when user click on the button, the child panel will show/hide

the issue is the 'onbtnClick' function is working just once. when i click on the button the panel shows and then when i click it again nothing happens and no errors tho ! the panel should hide

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:39:11.353

By the looks of it, there isn't really much need to pass a boolean param to the function.

If you purely want a 'toggle' function, based on the panels visibility and you have a reference to the Ext component, you can use the `isVisible()` function:

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Panel-method-isVisible](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Panel-method-isVisible)

So your onBtnClick function would look something like this:

```
onbtnClick: function (){
    var childPanel = Ext.getCmp('p');

    if(childPanel.isVisible()) {
        childPanel.hide();
    }
    else {
        childPanel.show();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T19:19:38.747

```
onbtnClick: function (){
    var childPanel = Ext.getCmp('p');

    if (!childPanel.isHidden()) {
        childPanel.hide();
    } else {
        childPanel.show();
    }
} 
```

Instead isVisible() use method [isHidden](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-method-isHidden)() because method isVisible may return false when the panel is covered by other components or is not rendered yet (even when your panel has not got hidden property (hidden = false)).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-29T07:01:07.567

`panel.getEl().toggle();` will serve your purpose.

-YP

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-02T09:08:37.303

you have setVisible, taking a boolean parameter to know what to do.

`childPanel.setVisible( ! childPanel.isVisible() )`

This example will actually toggle the visibility at each execution.

# jquery-ui - Jquery ui Dialogue关闭事件刷新窗口

> ID：11676494
> 
> 赞同：0
> 
> 时间：2012-07-26T19:16:51.290
> 
> 标签：jquery-ui, modal-dialog

当我关闭我的 jqUI 模式窗口时，我需要一种方法来重新加载我的父页面。不知何故，我目前正在做的事情不起作用（想象一下）......

```
$('div#addPat').live('dialogclose', function (event) {
                debugger;
                location.reload(true);
            }); 
```

我从来没有进入调试器语句，所以我假设只是假设我的事件是错误的......

如何获得关闭对话框事件以及如何使用它重新加载页面......我想我已经弄清楚了第二部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:22:16.030

试试这个：

```
 $( "div#addPat" ).dialog({
 close: function(event, ui) {
      debugger;
      ....
  }
}); 
```

参考：http: [//jqueryui.com/demos/dialog/#event-close](http://jqueryui.com/demos/dialog/#event-close)

# html - 如何用动态左中右 DIV 填充父级？

> ID：11676498
> 
> 赞同：0
> 
> 时间：2012-07-26T19:17:06.467
> 
> 标签：html, css

编辑：

根据下面 Mat 的建议，我摆弄了 jsFiddle 并提出了“真正的”问题。

将内容绝对定位在中心 DIV 内不会产生所需的结果：

[http://jsfiddle.net/yxFQK/22/](http://jsfiddle.net/yxFQK/22/)

为了绝对定位孩子，父母需要是相对的，对吧？但这弄乱了漂亮的左/中/右布局：

[http://jsfiddle.net/yxFQK/23/](http://jsfiddle.net/yxFQK/23/)

有任何想法吗？先感谢您。

* * *

原帖：

我们想要一个固定宽度的父 DIV 和三个动态宽度的子 DIV：

左右 DIV 应根据内容调整大小。中心 DIV 应填充左右 DIV 之间的空间：

```
[[Left][        Center        ][Right]] 
```

（或者）

```
[[Big Left][    Center    ][Big Right]] 
```

中心 DIV 应该滚动溢出内容（所以我们不能使用溢出：隐藏）。

此外，我们想更改父 DIV 大小（使用 CSS 媒体查询），并让所有内容继续很好地填充：

```
[[Left][    Center    ][Right]]

[[Big Left][Center][Big Right]]

[[Left][              Center              ][Right]]

[[Big Left][          Center          ][Big Right]] 
```

有任何想法吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:12:56.983

我没有足够的声誉来评论您的答案，所以我将提交作为答案。这是你要找的吗？

[http://jsfiddle.net/yxFQK/](http://jsfiddle.net/yxFQK/)

请记住，制作 jsfiddle 总是比尝试从视觉/概念上解释更容易。如果你很好地描述了问题，人们会更容易帮助你。

# c++ - 为什么 Doom3 创建自己的容器而不是使用库？

> ID：11676502
> 
> 赞同：2
> 
> 时间：2012-07-26T19:17:32.677
> 
> 标签：c++, data-structures

我最近再次查看了 Doom3 gpl 代码，并注意到 idLib 库的“容器”部分具有 50 多年历史的数据结构（如链表）的独特实现。你可以在这里找到实现：

[Doom 3 链表](https://github.com/TTimo/doom3.gpl/blob/master/neo/idlib/containers/LinkList.h)

我的问题是 - 为什么这么多游戏选择重新发明轮子而不是使用像 STL 或 BOOST 这样的库？有性能原因吗？

# linq - linq 检查列表中是否存在值

> ID：11676509
> 
> 赞同：1
> 
> 时间：2012-07-26T19:17:50.087
> 
> 标签：linq, group-by

我正在尝试按我的表对多列进行分组，并检查分组计数是否等于 2。我的查询适用于这部分

```
var query = from product in Products
            group by new { product.Product, product.Location, product.Customer } into grp
            where grp.Count() != 2 
```

该产品有另一个属性类别，它只能有两个值“高”和“低”。除了分组计数之外，我如何更改此查询以处理类别检查。

```
Product    Location   Customer    Category
  A           X         C1          High
  A           X         C1          Low
  A           Y         C1          High
  A           Y         C1          Low
  A           Y         C1          Low
  B           X         C1          High
  B           X         C1          Medium 
```

在上面的示例中，除了位置 X 的产品 A 和客户 C1 之外，所有其他记录均无效。位置 Y 有两个低点，产品 B 有一个不属于列表的中等类别：高和低。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:26:16.827

如果您只想包含特定类别，请使用`where ..`表达式：

```
var query = from product in Products
            where product.Category == "Low" || product.Category == "High"
            group ... 
```

# c# - 如何使用 MySQL Connector / NET 在深度超过 2 的对象图上使用实体框架？

> ID：11676513
> 
> 赞同：8
> 
> 时间：2012-07-26T19:18:02.980
> 
> 标签：c#, mysql, linq, entity-framework-4.1, eager-loading

这是 Oracle 确认的错误报告：[http ://bugs.mysql.com/bug.php?id=67183](http://bugs.mysql.com/bug.php?id=67183)

**情况**

在我的存储库中使用`.Include`链时，我注意到我得到了奇怪的结果 - 主要是返回的查询值来自错误的字段（例如，名称最终会出现在描述中 - 但在数据库中所有值都是正确，它们仅在查询后显示错误）。我更改了名称，因此关系更加明显，但结构是相同的。我一直在为相关的 CrewMember 及其相对等级和权限获得错误的值。似乎如果 CrewMember 中存在与 Rank 相同的字段名称，则 Rank 中该字段的值将变为 CrewMember 中的值。例如，如果 Rank 有描述，CrewMember 也有，那么 CrewMember 的 Rank 描述就是 CrewMember 的描述。

当由于 MySQL 连接器/NET sql 提供程序未能正确形成`join`语句而定义了类似的字段时，Entity Framework 无法进行超过深度 2 的格式良好的查询。

**定义**

这是一个模拟数据库表的类定义。我将 C# ASP.NET MVC 3 与 Entity Framework 4.1 和 MySQL Connector/NET 6.5 版一起使用

```
public class Harbor
{
 public int HarborId { get; set; }
 public virtual ICollection<Ship> Ships { get; set; }
 public string Description { get; set; }
}

public class Ship
{
 public int ShipId { get; set; }
 public int HarborId { get; set; }
 public virtual Harbor Harbor { get; set; }
 public virtual ICollection<CrewMember> CrewMembers { get; set; }
 public string Description { get; set; }
} 

public class CrewMember
{
 public int CrewMemberId { get; set; }
 public int ShipId { get; set; }
 public virtual Ship Ship { get; set; }
 public int RankId { get; set; }
 public virtual Rank Rank { get; set; }
 public int ClearanceId { get; set; }
 public virtual Clearance Clearance { get; set; }
 public string Description { get; set; }
}

public class Rank
{
 public int RankId { get; set; }
 public virtual ICollection<CrewMember> CrewMembers { get; set; }
 public string Description { get; set; }
}

public class Clearance
{
 public int ClearanceId { get; set; }
 public virtual ICollection<CrewMember> CrewMembers { get; set; }
 public string Description { get; set; }
} 
```

**询问**

这是查询数据库并具有查询和 .Include 调用的代码。

```
DbSet<Harbor> dbSet = context.Set<Harbor>();
IQueryable<Harbor> query = dbSet;
query = query.Include(entity => entity.Ships);
query = query.Include(entity => entity.Ships.Select(s => s.CrewMembers));
query = query.Include(entity => entity.Ships.Select(s => s.CrewMembers.Select(cm => cm.Rank)));
query = query.Include(entity => entity.Ships.Select(s => s.CrewMembers.Select(cm => cm.Clearance))); 
```

这些`.Include`调用格式正确吗？我错过了什么？

这相当复杂，所以如果您有任何问题，请在评论中告诉我，我会尽力澄清我可能遗漏的任何内容。

**使用 MySQL Connector / NET 时，如何使用 Entity Framework 在深度超过 2 的对象图上获得格式良好的查询？**

**编辑**

这是生成的查询：

```
{SELECT
[Project1].[HarborId], 
[Project1].[Description], 
[Project1].[C2] AS [C1], 
[Project1].[ShipId], 
[Project1].[HarborId1], 
[Project1].[Description1], 
[Project1].[C1] AS [C2], 
[Project1].[CrewMemberId], 
[Project1].[ShipId1], 
[Project1].[ClearanceId], 
[Project1].[RankId], 
[Project1].[Description2], 
[Project1].[RankId1], 
[Project1].[Description3], 
[Project1].[ClearanceId1], 
[Project1].[Description4], 
FROM (SELECT
[Extent1].[HarborId], 
[Extent1].[Description], 
[Join3].[ShipId], 
[Join3].[HarborId] AS [HarborId1], 
[Join3].[Description]AS [Description1], 
[Join3].[CrewMemberId], 
[Join3].[ShipId]AS [ShipId1], 
[Join3].[ClearanceId], 
[Join3].[RankId], 
[Join3].[Description] AS [Description2], 
[Join3].[RankId] AS [RankId1], 
[Join3].[Description] AS [Description3], 
[Join3].[ClearanceId] AS [ClearanceId1], 
[Join3].[Description] AS [Description4], 
CASE WHEN ([Join3].[ShipId] IS  NULL) THEN (NULL)  WHEN ([Join3].[CrewMemberId] IS  NULL) THEN (NULL)  ELSE (1) END AS [C1], 
CASE WHEN ([Join3].[ShipId] IS  NULL) THEN (NULL)  ELSE (1) END AS [C2]
FROM [Harbor] AS [Extent1] LEFT OUTER JOIN (SELECT
[Extent2].[ShipId], 
[Extent2].[HarborId], 
[Extent2].[Description], 
[Join2].[CrewMemberId], 
[Join2].[ShipId] AS [ShipID1], 
[Join2].[ClearanceId], 
[Join2].[RankId], 
[Join2].[Description] AS [DESCRIPTION1], 
[Join2].[RankID1], 
[Join2].[DESCRIPTION1] AS [DESCRIPTION11], 
[Join2].[ClearanceID1], 
[Join2].[DESCRIPTION2], 
FROM [Ship] AS [Extent2] LEFT OUTER JOIN (SELECT
[Extent3].[CrewMemberId], 
[Extent3].[ShipId], 
[Extent3].[ClearanceId], 
[Extent3].[RankId], 
[Extent3].[Description], 
[Extent4].[RankId] AS [RankID1], 
[Extent4].[Description] AS [DESCRIPTION1], 
[Extent5].[ClearanceId] AS [ClearanceID1], 
[Extent5].[Description] AS [DESCRIPTION2], 
FROM [CrewMember] AS [Extent3] INNER JOIN [Rank] AS [Extent4] ON [Extent3].[RankId] = [Extent4].[RankId] LEFT OUTER JOIN [Clearance] AS [Extent5] ON [Extent3].[ClearanceId] = [Extent5].[ClearanceId]) AS [Join2] ON [Extent2].[ShipId] = [Join2].[ShipId]) AS [Join3] ON [Extent1].[HarborId] = [Join3].[HarborId]
 WHERE [Extent1].[HarborId] = @p__linq__0) AS [Project1]
 ORDER BY 
[Project1].[HarborId] ASC, 
[Project1].[C2] ASC, 
[Project1].[ShipId] ASC, 
[Project1].[C1] ASC} 
```

**澄清**

当以这种方式“向下钻取”时，在 1-1 关系上使用 include 似乎没有问题。但是，当钻探过程中存在一对多关系时，问题似乎就出现了。为了急切加载，钻孔是必要的。

第一个投影`entity => entity.Ships.Select(s => s.CrewMembers`将返回与每艘船相关的 CrewMembers 列表。这会正确返回一个港口包含船只列表的图表，每艘船都有一个船员名单。

但是，第二个投影`CrewMembers.Select(cm => cm.Rank`实际上并没有返回正确的图形部分。字段开始混合，任何共享相同名称的字段无论出于何种原因都将默认为父字段。这会导致结果不一致，更重要的是数据不正确。没有抛出错误的事实使情况变得更糟，因为这只能通过运行时检查来确定。

如果有办法以某种方式从第一个投影中获得强类型的单一响应（而不是列表），那么第二个可能就没有必要了。就像现在一样，我认为问题在于第一个投影返回一个列表。当第二个投影尝试基于该列表而不是从单个对象进行投影时，就会引入逻辑错误。

如果 CrewMembers 不是一个 ICollection，而只是一个 CrewMember，那么这个嵌套投影实际上将返回正确的数据。然而，这是这个问题的简化版本，不幸的是，几乎所有的测试似乎都是从我为解决这个问题而审查的各种博客、教程、帖子、文章和文档中完成的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T22:23:36.150

```
query.Include(entity => entity.Ships);
query.Include(entity => entity.Ships.Select(s => s.CrewMembers));
query.Include(entity => entity.Ships.Select(s => s.CrewMembers.Select(cm => cm.Rank)));
query.Include(entity => entity.Ships.Select(s => s.CrewMembers.Select(cm => cm.Clearance))); 
```

首先，你知道它必须是`query = query.Include(...).Include(...)`，对吧？

只要您执行最后 2 个，就不需要第一个 2。Ships 和 CrewMembers 都将从第二个 2 加载。您是否尝试过这个？

```
//query.Include(entity => entity.Ships);
//query.Include(entity => entity.Ships.Select(s => s.CrewMembers));
query = query.Include(entity => entity.Ships.Select(s => s.CrewMembers.Select(cm => cm.Rank)))
    .Include(entity => entity.Ships.Select(s => s.CrewMembers.Select(cm => cm.Clearance))); 
```

此外，您始终可以启动 sql profiler 以准确查看 ef 发送到数据库的查询。如果您只运行第 3 和第 4 包含，我不希望出现会交换图表中不同对象的属性值的错误。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-01T21:19:56.437

**编辑**

下面的测试是使用 SQL Server 并`SqlClient`作为提供程序进行的。`MySql`如果您使用的提供程序存在错误，即为您的 LINQ 查询创建不正确的 SQL，那么 SQL Server 无法重现该问题这一事实引发了一个问题。它看起来与[此问题](https://stackoverflow.com/questions/12825643/why-doesnt-this-include-work)中的问题相同，`MySql`提供程序也出现问题并且无法使用`SqlClient`/SQL Server 重现。

* * *

> 我一直在为相关的 CrewMember 及其相对等级和权限获得错误的值。似乎如果 CrewMember 中存在与 Rank 相同的字段名称，则 Rank 中该字段的值将变为 CrewMember 中的值。**例如，如果 Rank 有描述，CrewMember 也有，那么 CrewMember 的 Rank 描述就是 CrewMember 的描述。**

我已经用粗体测试了该示例（使用 EF 4.3.1）并且无法重现该问题：

```
using System;
using System.Collections.Generic;
using System.Data.Entity;
using System.Linq;

namespace EFInclude
{
    public class Harbor
    {
        public int HarborId { get; set; }
        public virtual ICollection<Ship> Ships { get; set; }

        public string Description { get; set; }
    }

    public class Ship
    {
        public int ShipId { get; set; }
        public int HarborId { get; set; }
        public virtual Harbor Harbor { get; set; }
        public virtual ICollection<CrewMember> CrewMembers { get; set; }

        public string Description { get; set; }
    }

    public class CrewMember
    {
        public int CrewMemberId { get; set; }
        public int ShipId { get; set; }
        public virtual Ship Ship { get; set; }
        public int RankId { get; set; }
        public virtual Rank Rank { get; set; }
        public int ClearanceId { get; set; }
        public virtual Clearance Clearance { get; set; }

        public string Description { get; set; }
    }

    public class Rank
    {
        public int RankId { get; set; }
        public virtual ICollection<CrewMember> CrewMembers { get; set; }

        public string Description { get; set; }
    }

    public class Clearance
    {
        public int ClearanceId { get; set; }
        public virtual ICollection<CrewMember> CrewMembers { get; set; }

        public string Description { get; set; }
    }

    public class MyContext : DbContext
    {
        public DbSet<Harbor> Harbors { get; set; }
        public DbSet<Ship> Ships { get; set; }
        public DbSet<CrewMember> CrewMembers { get; set; }
        public DbSet<Rank> Ranks { get; set; }
        public DbSet<Clearance> Clearances { get; set; }
    }

    class Program
    {
        static void Main(string[] args)
        {
            Database.SetInitializer(new DropCreateDatabaseAlways<MyContext>());

            using (var context = new MyContext())
            {
                context.Database.Initialize(true);

                var harbor = new Harbor
                {
                    Ships = new HashSet<Ship>
                    {
                        new Ship
                        {
                            CrewMembers = new HashSet<CrewMember>
                            {
                                new CrewMember
                                {
                                    Rank = new Rank { Description = "Rank A" },
                                    Clearance = new Clearance { Description = "Clearance A" },
                                    Description = "CrewMember A"
                                },
                                new CrewMember
                                {
                                    Rank = new Rank { Description = "Rank B" },
                                    Clearance = new Clearance { Description = "Clearance B" },
                                    Description = "CrewMember B"
                                }
                            },
                            Description = "Ship AB"
                        },
                        new Ship
                        {
                            CrewMembers = new HashSet<CrewMember>
                            {
                                new CrewMember
                                {
                                    Rank = new Rank { Description = "Rank C" },
                                    Clearance = new Clearance { Description = "Clearance C" },
                                    Description = "CrewMember C"
                                },
                                new CrewMember
                                {
                                    Rank = new Rank { Description = "Rank D" },
                                    Clearance = new Clearance { Description = "Clearance D" },
                                    Description = "CrewMember D"
                                }
                            },
                            Description = "Ship CD"
                        }
                    },
                    Description = "Harbor ABCD"
                };

                context.Harbors.Add(harbor);
                context.SaveChanges();
            }

            using (var context = new MyContext())
            {
                DbSet<Harbor> dbSet = context.Set<Harbor>();
                IQueryable<Harbor> query = dbSet;
                query = query.Include(entity => entity.Ships);
                query = query.Include(entity => entity.Ships.Select(s => s.CrewMembers));
                query = query.Include(entity => entity.Ships.Select(s => s.CrewMembers.Select(cm => cm.Rank)));
                query = query.Include(entity => entity.Ships.Select(s => s.CrewMembers.Select(cm => cm.Clearance)));

                var sqlString = query.ToString();
                // see below for the generated SQL query

                var harbor = query.Single();

                Console.WriteLine("Harbor {0} Description = \"{1}\"",
                    harbor.HarborId, harbor.Description);
                foreach (var ship in harbor.Ships)
                {
                    Console.WriteLine("- Ship {0} Description = \"{1}\"",
                        ship.ShipId, ship.Description);
                    foreach (var crewMember in ship.CrewMembers)
                    {
                        Console.WriteLine("-- CrewMember {0} Description = \"{1}\"", 
                            crewMember.CrewMemberId, crewMember.Description);
                        Console.WriteLine("-- CrewMember {0} Rank Description = \"{1}\"",
                            crewMember.CrewMemberId, crewMember.Rank.Description);
                        Console.WriteLine("-- CrewMember {0} Clearance Description = \"{1}\"",
                            crewMember.CrewMemberId, crewMember.Clearance.Description);
                    }
                }

                Console.ReadLine();
            }
        }
    }
} 
```

输出是：

![在此处输入图像描述](../Images/52625ad488f2ded16292e14459566f3e.png)

根据您的粗体描述，我应该有：**CrewMember 1 Description = “A 级”**，其他 3 名机组人员也一样。但我没有这个。

与您有错误的代码相比，我的测试程序中有什么不同吗？

**编辑**

查询生成的SQL（见`var sqlString = query.ToString();`上面源码中的一行，下面是 的内容`sqlString`）是：

```
SELECT 
[Project1].[HarborId] AS [HarborId], 
[Project1].[Description] AS [Description], 
[Project1].[C2] AS [C1], 
[Project1].[ShipId] AS [ShipId], 
[Project1].[HarborId1] AS [HarborId1], 
[Project1].[Description1] AS [Description1], 
[Project1].[C1] AS [C2], 
[Project1].[CrewMemberId] AS [CrewMemberId], 
[Project1].[ShipId1] AS [ShipId1], 
[Project1].[RankId] AS [RankId], 
[Project1].[ClearanceId] AS [ClearanceId], 
[Project1].[Description2] AS [Description2], 
[Project1].[RankId1] AS [RankId1], 
[Project1].[Description3] AS [Description3], 
[Project1].[ClearanceId1] AS [ClearanceId1], 
[Project1].[Description4] AS [Description4]
FROM ( SELECT 
    [Extent1].[HarborId] AS [HarborId], 
    [Extent1].[Description] AS [Description], 
    [Join3].[ShipId1] AS [ShipId], 
    [Join3].[HarborId] AS [HarborId1], 
    [Join3].[Description1] AS [Description1], 
    [Join3].[CrewMemberId] AS [CrewMemberId], 
    [Join3].[ShipId2] AS [ShipId1], 
    [Join3].[RankId1] AS [RankId], 
    [Join3].[ClearanceId1] AS [ClearanceId], 
    [Join3].[Description2] AS [Description2], 
    [Join3].[RankId2] AS [RankId1], 
    [Join3].[Description3] AS [Description3], 
    [Join3].[ClearanceId2] AS [ClearanceId1], 
    [Join3].[Description4] AS [Description4], 
    CASE WHEN ([Join3].[ShipId1] IS NULL) THEN CAST(NULL AS int) WHEN ([Join3].[CrewMemberId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1], 
    CASE WHEN ([Join3].[ShipId1] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C2]
    FROM  [dbo].[Harbors] AS [Extent1]
    LEFT OUTER JOIN  (SELECT [Extent2].[ShipId] AS [ShipId1], [Extent2].[HarborId] AS [HarborId], [Extent2].[Description] AS [Description1], [Join2].[CrewMemberId], [Join2].[ShipId2], [Join2].[RankId1], [Join2].[ClearanceId1], [Join2].[Description2], [Join2].[RankId2], [Join2].[Description3], [Join2].[ClearanceId2], [Join2].[Description4]
        FROM  [dbo].[Ships] AS [Extent2]
        LEFT OUTER JOIN  (SELECT [Extent3].[CrewMemberId] AS [CrewMemberId], [Extent3].[ShipId] AS [ShipId2], [Extent3].[RankId] AS [RankId1], [Extent3].[ClearanceId] AS [ClearanceId1], [Extent3].[Description] AS [Description2], [Extent4].[RankId] AS [RankId2], [Extent4].[Description] AS [Description3], [Extent5].[ClearanceId] AS [ClearanceId2], [Extent5].[Description] AS [Description4]
            FROM   [dbo].[CrewMembers] AS [Extent3]
            INNER JOIN [dbo].[Ranks] AS [Extent4] ON [Extent3].[RankId] = [Extent4].[RankId]
            LEFT OUTER JOIN [dbo].[Clearances] AS [Extent5] ON [Extent3].[ClearanceId] = [Extent5].[ClearanceId] ) AS [Join2] ON [Extent2].[ShipId] = [Join2].[ShipId2] ) AS [Join3] ON [Extent1].[HarborId] = [Join3].[HarborId]
)  AS [Project1]
ORDER BY [Project1].[HarborId] ASC, [Project1].[C2] ASC, [Project1].[ShipId] ASC, [Project1].[C1] ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T23:54:51.663

就目前而言，在使用 MySQLConnector/NET 时，无法通过 EF 一次性检索图形。[使用 Orcale](http://bugs.mysql.com/bug.php?id=67183)查看这个已确认的错误报告。必须做的是

```
DbSet<Harbor> dbSet = context.Set<Harbor>();
IQueryable<Harbor> query = dbSet;
query = query.Include(entity => entity.Ships.Select(s => s.CrewMembers));
var Harbor = query.ToList();
foreach (var S in Harbor.Ships)
{
 foreach (var CM in S.CrewMembers)
 {
  CM.Rank = //get Rank where RankId == CM.RankId
  CM.Clearance = //get Clearance where ClearanceId == CM.ClearanceId
 }
} 
```

此代码与示例一致，但显然只是作为示例，需要更好的实现才能实际运行。这是我正在使用的方法，直到我可以重载或改进`.Include`EF 功能以便一次获得整个图表。

在多次旅行中获取数据并不理想，但它确实有效。

# bazaar - 无法访问父分支时 Bazaar Explorer 挂起

> ID：11676523
> 
> 赞同：0
> 
> 时间：2012-07-26T19:18:44.393
> 
> 标签：bazaar, remote-branch

我在笔记本电脑上创建了一个共享存储库。在该存储库中，我创建了一个名为`trunk`. 然后我在我的桌面上创建了一个**未绑定**的分支，`trunk`这样我就可以在任何一台机器上工作并手动同步我的更改。

除了一个烦人的问题外，这非常有效。在我的桌面上，Bazaar Explorer 一直在尝试访问远程分支。每次我点击刷新（例如）Bazaar Explorer 时都会挂起几秒钟，而它确实......一些东西。如果我的笔记本电脑不在网络上，Bazaar Explorer 会挂起更长时间，然后显示错误消息“不是分支：<branch URL>”。之后，我可以正常进行。

我从 Subversion 切换到 DVCS 的原因之一是即使“服务器已关闭”，您也可以继续工作和提交。从技术上讲，我*可以*继续工作，但持续的冻结对我来说是致命的。有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:05:05.933

编辑`.bzr/branch/branch.conf`并删除带有`parent_location = ...`.

注意：稍后如果您从另一个分支合并或拉取，它将再次保存`parent_location`. 为防止它这样做，`--no-remember`请在合并或拉取时添加标志。

正如[@bialix](https://stackoverflow.com/users/65736/bialix)在评论中指出的那样：

> 如果您想禁用记住`parent_location`您也可以编辑`branch.conf`并放在那里：`parent_location =`等号后没有任何内容（或空格）。

# .net - 如何在 RDLC 报告的详细信息部分显示重复的可变长度文本？

> ID：11676529
> 
> 赞同：0
> 
> 时间：2012-07-26T19:19:05.227
> 
> 标签：.net, reporting-services, rdlc

我需要在 RDLC 报告中呈现以下结构：

```
assessment->outcome->section->question 
```

每一个都有四个字符串字段，即标题、文本、注释和反馈，除了标题之外的所有字段都是长的、可变长度的文本，从一个段落到一页长。我的基本结构是对详细信息部分使用“问题”，对其他部分使用分组，但我需要一个文本框报告控件，该控件将扩展以填充其内容，同时对分页符等保持文明。

我假设 List 类型的 Tablix 在这里就足够了，但是如何让我的文本框扩展其内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:09:14.130

一个相当愚蠢的问题，但 rdlc 报告 TextBox 控件具有 CanGrow 和 CanShrink 选项，它们完美地解决了这一需求。

# java - 无法通过 Apache POI 3.6 检索具有数字格式和类别为货币的 Excel 单元格值

> ID：11676532
> 
> 赞同：0
> 
> 时间：2012-07-26T19:19:12.537
> 
> 标签：java, apache-poi

嗨，我正在用特定格式解析 Excel 中的单元格，其数据格式字符串为“$”#,##0 我想在该单元格中获取值但无法这样做，有人可以帮忙吗？

## 目前使用此代码，我得到的值为空白，但在 excel 中，该值为例如 40 美元。

```
 for (Row row : sheet) 
        {     
                Cell dataCell = row.getCell(colIndex); 

                if(dataCell!=null )
                {
                   if( row.getRowNum()==5)
                   {

                       System.out.println("Cell Value is::"+dataCell.toString());
                   }

                }

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:18:45.527

You seem to want the string to be magically formatted to look the same as in Excel, without any coding on your part. You can do that in POI, but that isn't the normal usecase. People normally want to get the values as numbers, booleans etc, and process them themselves.

The class you're looking for is [DataFormatter](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/DataFormatter.html). Your code would be something like

```
 DataFormatter fmt = new DataFormatter();
 for (Row r : sheet) {
    for (Cell c : r) {
       CellReference cr = new CellRefence(c);
       System.out.println("Cell " + cr.formatAsString() + " is " + 
                          fmt.formatCellValue(c) );
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T06:45:25.087

使用此方法获取单元格中的值。它可以帮助您

```
private String getCellValue(Cell cell) {
    if (cell == null) {
        return null;
    }
    if (cell.getCellType() == Cell.CELL_TYPE_STRING) {
        return cell.getStringCellValue();
    } else if (cell.getCellType() == Cell.CELL_TYPE_NUMERIC) {
        return cell.getNumericCellValue() + "";
    } else if (cell.getCellType() == Cell.CELL_TYPE_BOOLEAN) {
        return cell.getBooleanCellValue() + "";
    }else if(cell.getCellType() == Cell.CELL_TYPE_BLANK){
        return cell.getStringCellValue();
    }else if(cell.getCellType() == Cell.CELL_TYPE_ERROR){
        return cell.getErrorCellValue() + "";
    } 
    else {
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T19:32:32.213

您必须根据数据类型获取值，而不仅仅是“字符串类型”。

HSSF 示例：

```
HSSFCell cell = poiFilaActual.getCell(intColActual);
if (cell != null) {
    if (HSSFCell.CELL_TYPE_STRING == cell.getCellType()) {
        return cell.getRichStringCellValue().toString();
    }  else if (HSSFCell.CELL_TYPE_BOOLEAN == cell.getCellType()) {
        return new String( (cell.getBooleanCellValue() == true ? "true" : "false") );
    } else if (HSSFCell.CELL_TYPE_BLANK == cell.getCellType()) {
        return "";
    } else if (HSSFCell.CELL_TYPE_NUMERIC == cell.getCellType()) {
        if(HSSFDateUtil.isCellDateFormatted(cell)){
            return ( new SimpleDateFormat("dd/MM/yyyy").format(cell.getDateCellValue()) );
        }else{
            return new BigDecimal(cell.getNumericCellValue()).toString();
        }
    }
} 
```

# android - Android ZXing 二维码抓拍

> ID：11676534
> 
> 赞同：0
> 
> 时间：2012-07-26T19:19:20.553
> 
> 标签：android, qr-code, zxing

我正在尝试安装 ZXing QR 捕获应用程序进行测试，但出现错误：

```
07-26 20:15:22.667: E/AndroidRuntime(29355): FATAL EXCEPTION: main
07-26 20:15:22.667: E/AndroidRuntime(29355): java.lang.ExceptionInInitializerError
07-26 20:15:22.667: E/AndroidRuntime(29355):    at java.lang.Class.newInstanceImpl(Native Method)
07-26 20:15:22.667: E/AndroidRuntime(29355):    at java.lang.Class.newInstance(Class.java:1319)
07-26 20:15:22.667: E/AndroidRuntime(29355):    at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
07-26 20:15:22.667: E/AndroidRuntime(29355):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1882)
07-26 20:15:22.667: E/AndroidRuntime(29355):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
07-26 20:15:22.667: E/AndroidRuntime(29355):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
07-26 20:15:22.667: E/AndroidRuntime(29355):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
07-26 20:15:22.667: E/AndroidRuntime(29355):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-26 20:15:22.667: E/AndroidRuntime(29355):    at android.os.Looper.loop(Looper.java:137)
07-26 20:15:22.667: E/AndroidRuntime(29355):    at android.app.ActivityThread.main(ActivityThread.java:4441)
07-26 20:15:22.667: E/AndroidRuntime(29355):    at java.lang.reflect.Method.invokeNative(Native Method)
07-26 20:15:22.667: E/AndroidRuntime(29355):    at java.lang.reflect.Method.invoke(Method.java:511)
07-26 20:15:22.667: E/AndroidRuntime(29355):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-26 20:15:22.667: E/AndroidRuntime(29355):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-26 20:15:22.667: E/AndroidRuntime(29355):    at dalvik.system.NativeStart.main(Native Method)
07-26 20:15:22.667: E/AndroidRuntime(29355): Caused by: java.lang.NoClassDefFoundError: com.google.zxing.ResultMetadataType
07-26 20:15:22.667: E/AndroidRuntime(29355):    at com.google.zxing.client.android.CaptureActivity.<clinit>(CaptureActivity.java:107)
07-26 20:15:22.667: E/AndroidRuntime(29355):    ... 15 more 
```

有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:48:42.650

您正在尝试使用`core/`库中的代码，但没有将其放入您的应用程序中。但是，您甚至不需要此代码。这是迄今为止添加扫描的最简单方法：[http ://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:39:00.137

com.google.zxing.ResultMetadataType 类是否在您的构建路径中？

# jquery - 使用 jQuery 或 CSS 隐藏 html 内容

> ID：11676538
> 
> 赞同：3
> 
> 时间：2012-07-26T19:19:25.373
> 
> 标签：jquery, html, css

在下面的 html 中，我可以隐藏使用 CSS 或 jQuery开始`(`和结束的内容吗？`)`我面临的问题是`(`后面的代码没有包装在任何 div 中，所以我不能使用 CSS 来查找 div 类和 set `display:none`。

```
<span>
    <a class="test" href="#">test</a> 
    (<a href="#">?</a>) 
</span> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T19:21:44.997

`$('span a:not(".test")').hide();`将适用于您的有限示例。

但是，它不会隐藏括号。为此，您需要一个专门的函数来删除您不想要的代码：

```
$('span').html(function(i,old) {
    return old.substring(0,old.indexOf('('));
});​ 
```

[http://jsfiddle.net/pkMgP/](http://jsfiddle.net/pkMgP/)

如果你想隐藏它而不是删除它，你需要将它全部包装在一个 HTML 元素中并对其应用样式：

```
$('span').html(function(i,old) {
    var idx = old.indexOf('(');
    return old.substring(0,idx) + '<span style="display:none">' + old.substring(idx) + '</span>';
});​ 
```

[http://jsfiddle.net/pkMgP/1/](http://jsfiddle.net/pkMgP/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:21:49.280

您是否尝试过使用元素 display:none; ?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T19:23:24.610

您不能隐藏部分 DOM 节点，只能隐藏完整的节点。

您需要更改标记以将包括括号在内的整个链接包含在单个`<span>`.

这可以在 Javascript 中完成，但在源代码中执行会容易得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T19:25:17.117

使用 jquery：

```
$('.test').next().hide();​ 
```

这将只留下括号

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T19:25:32.553

我不得不重读你的帖子几次，但我想我明白你想要什么。您将无法直接执行您要求的操作。

如果您可以编辑 HTML，则在要隐藏的内容周围添加一个内部跨度并将其隐藏。

我想你问这个问题是因为你不能编辑 HTML。在这种情况下，您可以做的是：

1.  构造一个 JQuery 表达式来查找外部 span 元素
2.  使用 $(e).css('display','none') 隐藏 span 元素
3.  使用javascript复制span的内容，去掉要隐藏的东西
4.  创建一个包含 #3 中创建的内容的新 span，将其添加到 DOM 之前或之后隐藏的 span。
5.  您现在可以来回切换以使内容交换可见性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T19:33:21.663

只需添加一些类来定义操作。

```
<span>
  <a class="go" href="#">test</a> 
  (<a href="#" class="hideme">?</a>) 
</span>

$('.go').bind('click', function(e){
    $('.hideme').hide();
}); 
```

# asp.net-mvc - 博客作为 ASP.Net MVC 中的子域

> ID：11676540
> 
> 赞同：0
> 
> 时间：2012-07-26T19:19:32.847
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, subdomain

我的博客创建这样的 URL：

```
http://localhost:55649/Blogs/MyBlog 
```

如何创建子域，使其看起来像是托管在自己的子域上，如下所示：

```
http://myBlog.localhost:55649/ 
```

我知道我可以创建一个子域来重定向到 localhost:55649/Blogs/MyBlog，但我希望它是实际域。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:30:57.373

ASP.NET MVC 自己的路由等可能性可能是不可能的。您需要在 IIS 中创建两个站点（一个用于域，另一个用于子域）指向与站点代码相同的目录。

当然，使用 ASP.NET 开发服务器是不可能的。

可能 URL 重写模块也可以帮助您：[http ://www.iis.net/download/urlrewrite](http://www.iis.net/download/urlrewrite)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T00:29:29.050

这在 MVC 中是可能的，并且在此之前已在 SO 上回答

[查看上一个答案](https://stackoverflow.com/questions/278668/is-it-possible-to-make-an-asp-net-mvc-route-based-on-a-subdomain)

为了使 DNS 正常工作，您需要设置一个通配符子域，以便对 yourdomain.com 的任何子域请求仍将指向您的站点。IIS 还需要配置为侦听您站点的任何子域的所有请求。我无法回答如何执行此操作，因为我不知道您的主机配置。

# html - Javadoc 多行锚标记

> ID：11676541
> 
> 赞同：1
> 
> 时间：2012-07-26T19:19:34.397
> 
> 标签：html, javadoc

我想做这样的事情：

```
/**
 * Check out this <a href="#">external link</a>!.
 */
 public void foo() {

 } 
```

但是，外部链接的 href 非常长，例如：

```
<a href="http://www.example.com/this/is/a/really/long/link/and/it/doesnt/fit/on/one/line/which/is/problematic/with/javadoc">external link</a> 
```

我符合具有固定线宽的编码标准。有没有办法用 Javadoc 格式化它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T20:43:49.307

你为什么不缩短它？

*   [http://bit.ly](http://bit.ly)
*   [http://goo.gl](http://goo.gl)

只是一些就在我的脑海中。

# node.js - 猫鼬更新嵌入文档 - 更改不反映

> ID：11676542
> 
> 赞同：2
> 
> 时间：2012-07-26T19:19:40.950
> 
> 标签：node.js, mongodb, mongoose

我对在 Mongoose 中使用 Node.js 和 MongoDB 还很陌生。目前，我面临一个相当烦人的问题，我确信有一个比我迄今为止提出的更好的解决方案！

问题是，我找不到更新嵌入式文档的“好”方法。这是我的场景：

1.  创建一个列表容器
2.  创建 N 个 ListItems，并将它们添加到 List-container
3.  查找并更新 ListItem X 的值

这应该很简单，但我一直不走运 - 无论如何简单。

这是我到目前为止所拥有的。**这是两个解决方案，两者都有效，但都需要在某些时候迭代ListItems**，我真的不想这样做。

```
ShoppingListItem = new Schema({
  listID : ObjectId
 ,ingredient : [Ingredient]
 ,count : Number
});

ShoppingList = new Schema({
  name : String
 ,userID : ObjectId
 /* Embedded documents solution */
 ,items : [ShoppingListItem]
 /* No embedded documents solution */
 /*,items : [{
     ingredient : [Ingredient]
    ,count : Number
 }]*/
});

ShoppingList.methods.addItem = function addItem(newItem, cb){
  var __self = this;
  var _id = __self._id;
  /**
   *  Embedded documents solution (Need to both maintain the embedded document source PLUS manually update the actual embedded document)
   **/
  ShoppingListItem.findOne({'listID' : _id, 'ingredient.name' : newItem.ingredient.name}, function(err, item){
    if(!item){
      var item = new ShoppingListItem({
         listID : _id
        ,ingredient : [newItem.ingredient]
        ,count : newItem.count
      });
      item.save(function(err, saved){
        __self.items.push(saved);
        __self.save(cb);
      });
    }else{
      item.count += newItem.count;
      item.save(function(err, saved){
        //Iterate through all ListItems to update the embedded document to reflect the changed "source" document
        for(var i = 0; i < __self.items.length; ++i){
          if(__self.items[i]._id.equals(saved._id)){
            __self.items[i] = saved;
          }
        }
        __self.markModified('items');
        __self.save(cb);
      });
    }
  });

  /**
   * No embedded documents solution (Only need to maintain the internal objects)
   **/
 /*
  var existing = __self.items.filter(function(item){ return item.ingredient.name.equals == newItem.ingredient.name;});
  if(existing.length > 0){
    existing[0].count += newItem.count;
  }else{
    __self.items.push(newItem)
  }
  __self.markModified('items');
  __self.save(cb);
  */
} 
```

在上面的 2 个解决方案中，我会说后者是更“优雅”的解决方案，因为它的代码最少。但我真的很想能够使用第一种方法，因为我想说，MongoDB 的查询在查找文档方面比过滤数组更快。我最后的想法是尝试利用 Mongoose 的 DBRef 功能，但我只是不知道如何在我的解决方案中应用它。

所以，长问题短：有没有办法“链接”文档，而不是“嵌入副本”（这就是我看到嵌入文档的方式）？

提前非常感谢！

编辑：上述两种解决方案都有效 - 但我看不出它们在更大范围内非常有效（比如列表中的 1.000.000 多个项目）

# python - python：如何解析压缩的 xml 文件？

> ID：11676549
> 
> 赞同：0
> 
> 时间：2012-07-26T19:19:50.507
> 
> 标签：python

我的代码看起来像

```
def read_zip_file():
    import zipfile
    zf = zipfile.ZipFile(os.path.expanduser('~/Downloads/tmp/me.zip'))
    for filename in [ 'myfile.xml' ]:
        print filename
        try :
            data = get_proposal_data_map(zf.read(filename))
            print data
        except:
            logging.error('error - ' + str(sys.exc_info())) 
```

这会将 xml 作为常规文件吐出。现在我有一个现有的代码，它给定一个路径将 XML 解析为

```
try:
    tree = etree.parse(path)
    root = tree.getroot()
    for child in root:
              # do things with XML 
```

**问题**

我怎样才能`parse`成为`zipped XML (myfile.xml.zip)`常规`XML`文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:34:26.533

您可以将 zip 文件读入一个变量，然后使用

```
root = etree.fromstring(xmlstr) 
```

# http - 如何以 RESTful 方式公开验证 API？

> ID：11676550
> 
> 赞同：77
> 
> 时间：2012-07-26T19:20:00.647
> 
> 标签：http, rest

我通常是 RESTful API 设计的粉丝，但我不确定如何将 REST 原则应用于验证 API。

假设我们有一个 API 用于查询和更新用户的个人资料信息（姓名、电子邮件、用户名、密码）。我们认为公开的一个有用功能是验证，例如查询给定用户名是否有效和可用。

在这种情况下，资源是什么？应该使用哪些 HTTP 状态代码和/或标头？

作为开始，我有`GET /profile/validate`它接受查询字符串参数并返回`204`或者`400`如果有效或无效。但是`validate`显然是动词而不是名词。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-26T19:41:44.953

您所描述的事物类型在其语义上肯定更具有 RPC 风格，但这并不意味着您无法以 RESTful 方式实现目标。

没有`VALIDATE`HTTP 动词，那么围绕它构建整个 API 可以获得多少价值？您的故事围绕为用户提供确定给定用户名是否可用的能力——在我看来这听起来像是一个简单的资源检索检查 `GET: /profile/username/...`——如果结果是 404，则该名称可用。

这强调的是客户端验证就是客户端。确保数据在发送到服务器之前在客户端上得到验证是一个 UI 问题。RESTful 服务不关心客户端是否执行了验证。它会根据自己的验证逻辑简单地接受或拒绝请求。

REST 不是一个包罗万象的范例，它只描述了一种构建客户端-服务器通信的方式。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-02-19T14:30:55.873

我们也遇到了同样的问题。我们让客户端延迟到服务器进行验证的原因是为了防止出现不匹配的规则。服务器需要在对资源进行操作之前验证所有内容。将这些规则编码两次并有可能使它们不同步是没有意义的。因此，我们提出了一个似乎与 REST 理念保持一致的策略，同时允许我们要求服务器执行验证。

我们的第一步是实现一个可以从元数据服务请求的元数据对象 ( `GET /metadata/user`)。然后使用此元数据对象告诉客户端如何进行基本的客户端验证（要求、类型、长度等）。我们从我们的数据库中生成其中的大部分。

第二部分包括添加一个称为分析的新资源。例如，如果我们有一个服务：

```
GET /users/100 
```

我们将创建一个名为的新资源：

```
POST /users/100/analysis 
```

分析资源不仅包含发生的任何验证错误，还包含必要时可能相关的统计信息。我们争论的问题之一是分析资源使用哪个动词。我们已经得出结论，它应该是一个 POST，因为分析是在请求时创建的。然而，对于 GET 也有强烈的论据。

我希望这对试图解决同样问题的其他人有所帮助。对此设计的任何反馈表示赞赏。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-26T21:58:36.497

您将 REST 与资源导向混淆了，REST 中没有任何内容表明您不能在 URL 中使用动词。当谈到 URL 设计时，我通常选择最能自我描述的东西，无论是名词还是动词。

关于您的服务，我要做的是使用与更新相同的资源，但带有`test`查询字符串参数，因此当`test=1`操作未完成时，您可以使用它来返回验证错误。

```
PATCH /profile?test=1
Content-Type: application/x-www-form-urlencoded

dob=foo 
```

...和回应：

```
HTTP/1.1 400 Bad Request
Content-Type: text/html

<ul class="errors">
  <li data-name="dob">foo is not a valid date.</li>
</ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-18T12:45:41.693

一个非常常见的场景是拥有一个用户名或个人资料注册表单，其中的用户名和电子邮件应该是唯一的。通常会在文本框的模糊处显示一条错误消息，让用户知道用户名已经存在或者他们输入的电子邮件已经与另一个帐户相关联。其他答案中提到了很多选项，但我不喜欢需要查找 404 表示用户名不存在的想法，因此它是有效的，等待提交以验证整个对象，并返回元数据进行验证对检查唯一性没有帮助。

Imo，应该有一个 GET 路由，每个需要验证的字段返回 true 或 false。

```
/users/validation/username/{username} 
```

和

```
/users/validation/email/{email} 
```

您可以使用此模式为需要服务器端验证的任何其他字段添加任何其他路由。当然，您仍然希望在 POST 中验证整个对象。

此模式还允许在更新用户时进行验证。如果用户专注于电子邮件文本框，然后单击以触发模糊验证，则需要稍微不同的验证，因为只要电子邮件与当前用户相关联，如果电子邮件已经存在就可以了。您可以利用这些也返回 true 或 false 的 GET 路由。

```
/users/{userId:guid}/validation/username/{username} 
```

和

```
/users/{userId:guid}/validation/email/{email} 
```

同样，整个对象都需要在您的 PUT 中进行验证。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-11-30T08:08:32.263

很高兴在 REST API 中进行验证。无论如何，您都需要验证，并且不要在客户端使用它。在我的例子中，我只是在 API 中有一个约定，一个特殊的 error_id 表示验证错误，并且在 error_details 中，对于在此 PUT 或 POST 调用中有错误的每个字段都有一组错误消息。例如：

```
{
  "error": true,
  "error_id": 20301,
  "error_message": "Validation failed!",
  "error_details": {
    "number": [
      "Number must not be empty"
    ],
    "ean": [
      "Ean must not be empty",
      "Ean is not a valid EAN"
    ]
  }
} 
```

如果您将相同的 REST API 用于 Web 和移动应用程序，您将希望能够仅通过更新 API 来更改两者的验证。特别是移动更新需要 24 小时以上才能在商店上发布。

这就是它在移动应用程序中的样子： [![在此处输入图像描述](../Images/b50e071fd219312a5194010d2c11a050.png)](https://i.stack.imgur.com/CjRg8.png)

PUT 或 POST 的响应用于显示每个字段的错误消息。这是来自使用 React 的 Web 应用程序的相同调用： [![在此处输入图像描述](../Images/94ee6f21dddcaf1d5fa29096c1b3ad8f.png)](https://i.stack.imgur.com/J62tz.png)

这样，所有 REST API 响应代码（如 200 、 404）都具有应有的含义。即使验证失败，PUT 调用也会响应 200。如果调用通过验证，响应将如下所示：

```
{
  "error": false,
  "item": {
"id": 1,
"created_at": "2016-08-03 13:58:11",
"updated_at": "2016-11-30 08:55:58",
"deleted_at": null,
"name": "Artikel 1",
"number": "1273673813",
"ean": "12345678912222"
  }
}
```

您可以进行一些可能的修改。可以在没有 error_id 的情况下使用它。如果有 error_details 只需循环它们，如果您找到与字段同名的键，则将其值作为错误文本放入同一字段。

# node.js - Node.js、Express、Jade - 错误：发送后无法设置标头

> ID：11676556
> 
> 赞同：2
> 
> 时间：2012-07-26T19:20:41.703
> 
> 标签：node.js, express, pug

尝试使用 Jade 生成 HTML 页面时出现以下错误。有没有其他人遇到过这个问题。我在下面指出了错误的确切位置。

**错误**

```
Error: Can't set headers after they are sent.
    at ServerResponse.OutgoingMessage.setHeader (http.js:644:11)
    at ServerResponse.res.setHeader (/Users/dereklo/node_modules/express/node_modules/connect/lib/patch.js:59:22)
    at ServerResponse.res.set.res.header (/Users/dereklo/node_modules/express/lib/response.js:475:10)
    at ServerResponse.res.contentType.res.type (/Users/dereklo/node_modules/express/lib/response.js:350:15)
    at ServerResponse.res.send (/Users/dereklo/node_modules/express/lib/response.js:111:14)
    at res.render.fn (/Users/dereklo/node_modules/express/lib/response.js:672:10)
    at Object.exports.render (/Users/dereklo/node_modules/jade/lib/jade.js:216:5) 
```

**Node.js/Express/Jade 源代码**

```
var http = require('http'),
    express = require('express'),
    jade = require('jade'),
    url = require('url'),
    jsdom = require('jsdom'),
    child_proc = require('child_process'),
    w,
    h,
    scripts = ["/Users/dereklo/Node/pie/d3.min.js",
                "/Users/dereklo/Node/pie/d3.v2.js",
               "/Users/dereklo/Node/pie/d3.layout.min.js",
               "/Users/dereklo/Node/pie/RadialScriptMobileServ.js",
               "/Users/dereklo/Node/pie/RadialScriptMobile.js",
               "/Users/dereklo/Node/pie/canvg.js"];

      //scripts = ["./d3.v2.js",
        //         "./d3.layout.min.js",
          //       "./pie.js"]

    htmlStub = '<!DOCTYPE html><div id="RadialScriptMobileServ"></div>',
   querystring = require("querystring"),
    fs = require("fs"),
    formidable = require("formidable"),
    path = require('path'),
    request = require('request')
    svgsrc = '';

//create an app server
var app = require('express').createServer();
//set path to the views (template) directory
app.set('views', __dirname + '/views');
//set path to static files
app.use(express.static(__dirname + '/../public'));
//handle GET requests on /
app.get('/', function(req, res){

 res.writeHead(200, {'Content-Type': 'text/plain'});

  w = (url.parse(req.url, true).query['width']);
  h = (url.parse(req.url, true).query['height']);

console.log("width: ",w);
console.log("height: ",h);

request("http://dcaps-staging.media.mit.edu:8080/api/reality_analysis_service/get_reality_analysis_data?document_key=radialData&bearer_token=8e2f9e3129", function (err, result, json) {
  json = JSON.parse(json);

   console.log("my radial data: ",json.radialData.data);

    jsdom.env({features:{QuerySelector:true}, html:htmlStub, scripts:scripts, done:function(errors, window) {

    svgsrc = window.insertRadial("#RadialScriptMobileServ",w,h,json).innerHTML;
    console.log(svgsrc);
       res.render('/Users/dereklo/Node/pie/Jade_radial.jade', {pageTitle: 'Franz Enzenhofer'});   // ERROR OCCURRING HERE!

             //  res.write(svgsrc);
                res.end();

     }})
    })

});
//listen on localhost:3000
app.listen(3000);

//console.log('Pie SVG server running at http://127.0.0.1:3000/'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:06:03.743

我的问题是我需要删除：

```
res.writeHead(200, {'Content-Type': 'text/plain'}); 
```

它现在完美运行。我希望这会帮助其他偶然发现这篇文章的人......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:32:47.023

你可以通过两种方式做到这一点。在 app.get(/ ..) 上方添加另一条路线，如下所示：

```
// global controller
app.get('/*',function(req,res,next){
    res.header('Content-Type': 'text/plain' , 0 );
    next(); // http://expressjs.com/guide.html#passing-route control
}); 
```

或者您可以在现有路由中添加中间件功能

```
addToHeader = function (req, res, next) {
  console.log("add to header called ... " + req.url);
  res.header('Content-Type': 'text/plain', '0');
  next();
}
and then change your routes to sth like this:

app.get('/', addToHeader, function(req,res){
  var stuff = { 'title': 'blah' };
  res.render('mytemplate',stuff);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T10:28:26.730

使用 res.render() 时，不需要手动处理响应（res.end()、res.writeHead() 等）。

# java - 我应该在 TreeMap 中使用 Double 作为键吗？

> ID：11676557
> 
> 赞同：9
> 
> 时间：2012-07-26T19:20:56.093
> 
> 标签：java, sorting, collections, treemap

正如[HashMap 中 Double](https://stackoverflow.com/questions/1074781/double-in-hashmap)的答案中所述，不应在 HashMap 中使用 Double，因为它们很难比较是否相等。我相信我的情况有所不同，但我想我会要求确认，因为我没有看到任何关于此的内容。

我将有一系列与对象关联的双精度值，我希望它们按双精度值排序。TreeMap 是一个合适的解决方案吗？会有更好的吗？double 值是由一堆数学生成的，因此重复值的可能性极低。

编辑：我应该澄清一下：我需要的只是让这个对象列表按它们关联的双打排序。双打的价值将被丢弃，我永远不会打电话`map.get(key)`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-26T19:24:06.750

> ***Doubles 不应该在 HashMaps 中使用，因为它们很难比较是否相等。***

*   你会尝试`get`基于某些键的值吗？

    *   如果**是**，那么关于“难以比较”的推理适用，您可能应该避免这种数据结构（或始终依赖`tailMap`//并获取地图的范围）。`headMap``submap`

    *   如果**不是**（即您通常只做`for (Double key : map.keySet()) ...`或迭代`entrySet`），那么我会说您可以使用`Double`as 键。

> ***double 值是由一堆数学生成的，因此重复值的可能性极低。***

*   如果您确实*得到*了副本，这是一个*错误吗？*

     **   如果**是**，那么它不是正确的数据结构。例如，您可以使用[`Multimap`](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)来自 Guava 的 a 。

    *   如果**没有**，（即它映射到的两个值中的哪一个并不重要，因为它们无论如何只能相差一个小epsilon）那么你应该没问题。* 

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T19:24:59.353

树形映射中双精度的问题与哈希映射中的双精度完全相同 - 比较是否相等。如果您避免调用 of`treeMap.get(myDouble)`并继续使用范围查询（例如使用`submap`），您应该没问题。

```
TreeMap<Double,String> tm = new TreeMap<Double,String>();
tm.put(1.203, "quick");
tm.put(1.231, "brown");
tm.put(1.233, "fox");
tm.put(1.213, "jumps");
tm.put(1.243, "over");
tm.put(1.2301, "the");
tm.put(1.2203, "lazy");
tm.put(1.2003, "dog");
for (Map.Entry<Double,String> e : tm.subMap(1.230, 1.232).entrySet()) {
    System.out.println(e);
} 
```

这打印

```
1.2301=the
1.231=brown 
```

请参阅[ideone](http://ideone.com/f37lc)上的此片段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T19:35:37.560

如果您只想对它们进行排序，最好的办法是围绕双精度和对象创建一个包装器对象，在此包装器上实现“可比较”接口，并使用一个简单的集合对它们进行排序

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T19:25:11.630

如果您只想对它们进行排序，则有更好的集合（例如`SortedSet`）。您还可以使用任何列表并使用实用程序进行排序（我认为它们在 中`java.util.Collection`）。

仅当您想通过其键直接访问项目时才使用地图和表格。*

# spring - i18n 服务器端与客户端

> ID：11676558
> 
> 赞同：6
> 
> 时间：2012-07-26T19:20:57.793
> 
> 标签：spring, internationalization, dojo

就国际化和本地化的两种方法寻求一些建议。我有一个使用 Spring MVC 和 Dojo 的 Web 应用程序，我想支持多种语言。所以，我可以：

1.  用于使用`<spring:message>`属性文件在服务器端生成适当的文本。
2.  用于使用`dojo/i18n`js 文件在客户端选择适当的文本。

当然，两者的任意组合也是一种选择。

那么，每种方法的优缺点是什么？您什么时候使用一个与另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:00:03.733

这两种方法的结合是唯一合理的答案。基本上，您应该尝试坚持服务器端，并且仅在确实需要时才进行客户端（没有其他方法，例如您有一些动态创建的控件）。

优点和缺点？客户端字符串外部化的主要缺点是，您将无法正确翻译所有内容。那是因为上下文。相同的英语术语可能会以不同的方式翻译，具体取决于上下文。
同时，您通常需要格式化消息（将参数添加到您的消息标签），在常规 Java 中，您可以通过调用`MessageFormat.format()`. 从理论上讲，您可以在客户端执行此操作，但这至少可以说是有风险的。您将无法访问原始消息部分（如日期、某些数据源等），并且可能会损害翻译的正确性。
格式化日期、数字等在客户端更痛苦。使用 Dojo 或 jQuery Globalize 是可能的，但结果可能不如预期的那么好。但是无论如何，Spring 在格式化日期方面存在问题（缺少**默认**的本地日期/时间指定，您只能从短、中、长、完整中进行选择，这对我来说完全没用）。
另一个问题可能是处理复数形式（非英语）。信不信由你，但语言可能有不止一种复数形式（取决于数量），因此翻译可能会有所不同。我认为 Dojo 根本没有处理它（但是，我可能弄错了，自从我评估它以来已经过去了一段时间）。Spring 也不会处理它，但您可以基于[ICU 的](http://site.icu-project.org/) [PluralRules构建自定义解决方案](http://icu-project.org/apiref/icu4j/com/ibm/icu/text/PluralRules.html)（或者 PluralFormat，如果你很难学习格式化并且想同时杀死翻译者）。

长话短说，正确执行 I18n 绝非易事，您将在服务器端获得更好的支持。

顺便提一句。我记得 Dojo 相当“重”，库本身超过 1MB...加载它可能需要一段时间，而且与其他应用程序相比，您的应用程序可能看起来很慢...这是原因之一，我推荐[Globalize](https://github.com/jquery/globalize)而不是 Dojo对于我们的项目。它可能没有那么多功能，但至少看起来很轻巧。

# facebook-graph-api - Facebook 照片上传质量

> ID：11676565
> 
> 赞同：0
> 
> 时间：2012-07-26T19:22:07.183
> 
> 标签：facebook-graph-api, xcode4, facebook-ios-sdk

为了确保不是我的代码搞砸了，我刚刚下载并安装了新的 Facebook iOS SDK 3.0 Beta，我在 HelloFacebookSample 中测试了照片上传，尽管它所做的只是上传了一个 25KB 的图像，上传的版本看起来不如应用程序中的原始版本。

我还用照片进行了测试，质量很差。

有没有办法来解决这个问题？在 Mac 或 iPad 3 上使用 Safari 将相同的图像上传到 Facebook 时，质量很好。所以这与 Facebook iOS SDK 有关。

有人遇到这种情况吗？还是人们只是没有注意到？

我正在构建一个 iOS 应用程序，该应用程序依赖于上传的高质量图像。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:25:19.387

实际上，只有当您使用 Safari 上传图像时，质量才会*看起来不错。*

实际上，即使您在上传时选中“高质量”，Facebook 也会强制重新压缩图像。

您可以做的最好的事情是[将源图像分辨率加倍](http://www.vancouverpov.ca/wp/social-media/tips-to-improve-facebook-cover-photo-quality/)，对于纯色，请尝试引入噪点。此[GD.SE 问题中的详细信息](https://graphicdesign.stackexchange.com/questions/3134/facebook-ways-to-preserve-image-quality-of-uploaded-images)

[请注意，至少自2012 年 6 月](http://www.vancouverpov.ca/wp/social-media/tips-to-improve-facebook-cover-photo-quality/#comment-5483)以来，上传 <100kb 的图像的技巧不再有效。

# asp.net - 用户控件未实例化

> ID：11676568
> 
> 赞同：0
> 
> 时间：2012-07-26T19:22:16.893
> 
> 标签：asp.net

Master.cs 文件

```
 ChatUserControl user1 = new ChatUserControl();
                         ChatUserControl user2 = new ChatUserControl();
                         ChatUserControl user3 = new ChatUserControl();
                         divChatUserControlCover.Controls.Add(user1);
                         divChatUserControlCover.Controls.Add(user2);
                         divChatUserControlCover.Controls.Add(user3);

private void BindUserControls()
            {

                                 ChatUserControl user1 = divChatUserControlCover.FindControl("user1") as ChatUserControl;
             } 
```

聊天用户控件.cs

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="ChatUserControl.ascx.cs"
    Inherits="MetamorphismApp.ChatUserControl" %>

<asp:Timer ID="timer1" runat="server" OnTick="timer1_Tick" Interval="5000">
</asp:Timer>
<div id="divChatWindow" class="clChatWindow">
    <div>
        <asp:Label runat="server" Text='<%# Eval("username") %>' class="divHeader" ID="lblChatFriend"></asp:Label>
        <asp:Image ID="imgFriend" runat="server" CssClass="classFriendImage" />
        <asp:LinkButton ID="lbClose" runat="server" CommandName="Close" CssClass="lbClose"
            OnClick="lbClose_Click">Close</asp:LinkButton></div>
    <div class="chatText" id="idChatText" runat="server">
        <asp:UpdatePanel ID="UpdatePanel" runat="server">
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="timer1" EventName="Tick" />
                <asp:AsyncPostBackTrigger ControlID="btnSendChat" EventName="Click" />
            </Triggers>
            <ContentTemplate>
                <asp:Repeater runat="server" ID="rpChatMessages">
                    <ItemTemplate>
                        <asp:Image ID="imageForFriend" runat="server" CssClass="clFriendsImage" ImageUrl='<%# "HttpImageHandler.jpg?username=" +  DataBinder.Eval(Container.DataItem,"fromusername").ToString() %>' />
                        <asp:Label ID="chatMessage" runat="server" Text='<%# Eval("Message") %>'></asp:Label>
                        <br>
                    </ItemTemplate>
                </asp:Repeater>
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>
    <asp:TextBox ID="txtChatMessage" runat="server" Width="142px" CssClass="clChatMessage" EnableViewState="true"
        TextMode="MultiLine"></asp:TextBox>
    <asp:LinkButton ID="btnSendChat" runat="server" CommandName="Insert" CommandArgument='<%# Eval("username") %>'
        OnClick="btnSendChat_Click">Send</asp:LinkButton>

</div> 
```

大师.cs

```
private void BindUserControls()
        {

                             ChatUserControl user1 = divChatUserControlCover.FindControl("user1") as ChatUserControl;
         } 
```

我在 user1 控件的 BindUserControls 中收到错误；对象引用未设置为对象的实例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:22:43.900

应在每次回发中（正确地）重新创建动态控件。我通常在[Init](http://www.asp.net/web-forms/videos/aspnet-ajax/how-to-dynamically-add-controls-to-a-web-page)或[LoadViewState](http://msdn.microsoft.com/en-us/library/aa287574%28v=vs.71%29.aspx)中重新创建它们。

也参考[这个](https://stackoverflow.com/questions/1103115/asp-net-3-5-dynamic-controls)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:26:46.943

很可能是没有调用实例化控件并将其放入 div 的代码。确保即使在回发时也创建了控件，以便可以触发/处理更多事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T06:44:55.120

用户控件无法按照我的方式实例化。还有另一种方法可以做到这一点。那就是使用 Page_LoadControl 方法。

# html - 有没有办法将 CSS 类分配给列，而不必将其分配给每个 TD？

> ID：11676570
> 
> 赞同：0
> 
> 时间：2012-07-26T19:22:39.933
> 
> 标签：html, css, html-table

有没有办法将 CSS 类分配给列，而不必将其分配给每个 td？

我有一个大的（1000+ 行表），需要为第一列分配一个类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:22:39.933

刚刚想通了。

使用 colgroup 和 col 标签，并为它们分配一个类。

[解决方案](https://gist.github.com/3183965/15d955666cb34d84f0951fbe8f293c2df10b68fe)

# php - PHP图像上传文件检查问题

> ID：11676572
> 
> 赞同：0
> 
> 时间：2012-07-26T19:22:55.040
> 
> 标签：php, upload, image

我有 PHP 表单，用户可以在其中上传图像。我检查此表单是否存在其他几个问题，例如空字段，每个问题都有自己的错误消息。如果有多个错误，则 de form 不会发送数据并且用户会看到错误消息。到目前为止，一切都很好！现在我想在图像不是 PNG、JPG 或 GIF 或大于 250k 时显示错误消息。我写了一个代码，这似乎没有做任何事情！我可以将整个表单留空并将 .MP3 设置为“要上传的文件”，所有错误消息都会出现，除了图像的错误消息。怎么了？这是我的代码：

```
$aErrors = array();

$filecheck = basename($_FILES['bedrijfslogo']['name']);
$ext = strtolower(substr($filecheck, strrpos($filecheck, '.') + 1));

if (!(($ext != "jpg" && $ext != "gif" && $ext != "png") || ($_FILES["bedrijfslogo"]["type"] != "image/jpeg" && $_FILES["bedrijfslogo"]["type"] != "image/gif" && $_FILES["bedrijfslogo"]["type"] != "image/png") ||    ($_FILES["bedrijfslogo"]["size"] > 250000))){

    $aErrors['bedrijfslogo'] = 'Uw bedrijfslogo is te groot of niet het juiste formaat';
  } 
```

以及 HTML 表单中的代码：

```
<tr>
<td class="first">Bedrijfslogo:</td>
<td><input tabindex="8" type="file" name="bedrijfslogo" value="<?php echo isset($_POST['bedrijfslogo'])?$_POST['bedrijfslogo']:""; ?>" class="wizardinput" style="background-color:white;"></td>
</tr> 
```

伙计们怎么了？提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:33:43.897

你的逻辑有点混乱

```
if (!(($ext != "jpg" && $ext != "gif" && $ext != "png") || ($_FILES["bedrijfslogo"]["type"] != "image/jpeg" && $_FILES["bedrijfslogo"]["type"] != "image/gif" && $_FILES["bedrijfslogo"]["type"] != "image/png") ||    ($_FILES["bedrijfslogo"]["size"] > 250000))){
    $aErrors['bedrijfslogo'] = 'Uw bedrijfslogo is te groot of niet het juiste formaat';
} 
```

尝试简化它

```
if (!preg_match("/^jpg|gif|png$/", $ext) || !preg_match("/^image\/(jpeg|gif)$/", $_files["bedrijfslogo"]["type"]) || $_FILES["bedrijfslogo"]["size"] > 250000) {
    //code here
} 
```

# android - Android ListView 列表：选择器不工作

> ID：11676573
> 
> 赞同：0
> 
> 时间：2012-07-26T19:22:57.867
> 
> 标签：android, android-layout, android-listview

我是 android 新手和我的使用列表视图，我想在选择时更改列表项颜色，但它不起作用。

我检查了堆栈溢出的几乎所有链接并尝试了所有链接，但没有运气......请检查我的代码......并告诉我问题出在哪里。

```
public class Main extends Activity {

    private ListView listView;
    private String[] menuArray;
    private List<String> menuList = new ArrayList<String>();
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        menuArray = getResources().getStringArray(R.array.Menu);
        menuList = Arrays.asList(menuArray);

        listView = (ListView) findViewById(R.id.listView_main_menu);
        listView.setAdapter(new EfficientAdapter(this,menuList));       
    }

/******************************** EfficientAdapter ************************************/

    public class EfficientAdapter extends BaseAdapter{

        private LayoutInflater mInflater;
        @SuppressWarnings("unused")
        private String TAG=EfficientAdapter.class.getSimpleName();
        @SuppressWarnings("unused")
        private Context context;

        private List<String> data= new ArrayList<String>();

        public EfficientAdapter(Context context,List<String> data) {
            super();
            mInflater = LayoutInflater.from(context);
            this.context=context;
            this.data.addAll(data);
        }

        public EfficientAdapter(Context context) {
            super();
            mInflater = LayoutInflater.from(context);
            this.context=context;
        }
        public View getView(final int position, View convertView, final ViewGroup parent) {

            ViewHolder holder;

            if(convertView == null){
                convertView = mInflater.inflate(R.layout.main_list, null);              
                holder = new ViewHolder();
                holder.textLine = (TextView) convertView.findViewById(R.id.textView_mainlist_item);
                convertView.setTag(holder);
            }
            holder =(ViewHolder) convertView.getTag();
            holder.textLine.setText(getItem(position));

            convertView.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {

                }
            });

            return convertView;
        }

        public int getCount() {
            // TODO Auto-generated method stub
            return data.size();
        }

        public String getItem(int position) {
            // TODO Auto-generated method stub
            return data.get(position);
        }

        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return 0;
        }

        class ViewHolder {
            TextView textLine;
        }
    }
} 
```

**这是我的带有列表视图的 xml 文件**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android1="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/Gainsboro"
    android:orientation="vertical" xmlns:android="http://schemas.android.com/apk/res/android">

    <ListView
        android:id="@+id/listView_main_menu"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:cacheColorHint="#00000000"
        android:choiceMode="singleChoice"
        android:divider="@color/DarkGray"
        android:dividerHeight="1dip"
        android:fadingEdge="none"
        android:listSelector="@drawable/row_color"
        android:scrollbars="none" >

    </ListView>

</RelativeLayout> 
```

**row_color.xml**

```
<item android:state_pressed="false" android:state_focused="false"
    android:drawable="@color/Green" />

<item android:state_focused="true"
    android:drawable="@color/Blue" />
<item android:state_pressed="true"
    android:drawable="@color/Brown" />

<item 
    android:state_selected="true" android:drawable="@color/Cyan" /> 
```

**main_list.xml; 这个 xml 包含正在膨胀的 textview**

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <TextView
        android:id="@+id/textView_mainlist_item"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="10dp"
        android:paddingLeft="20dp"
        android:paddingTop="10dp"
        android:text="TextView"
        android:textColor="@color/DarkSlateGray"
        android:textSize="20sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/TextView01"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="right|center"
        android:paddingRight="30dp"
        android:paddingTop="6dp"
        android:text=">"
        android:textColor="@color/DarkSlateGray"
        android:textSize="28sp"
        android:textStyle="bold" />

</FrameLayout> 
```

**刚刚发现只有这部分工作正常**

```
<item android:state_pressed="false" android:state_focused="false"
        android:drawable="@color/Green" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:31:23.320

代替

```
convertView = mInflater.inflate(R.layout.main_list, null); 
```

尝试

```
convertView = mInflater.inflate(R.layout.main_list, parent, false); 
```

**编辑**：

我明白你现在想要做什么。您不想`android:ListSelector`在 ListView 上拥有，而是在每个单独`FrameLayout`的 . 所以：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:listSelector="@drawable/row_color" > 
```

您需要将其应用于每个单独的视图，以便在按下时让它们改变颜色等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:51:49.707

访问[http://android-codes-examples.blogspot.in/2011/03/customized-listview-items-selection.html](http://android-codes-examples.blogspot.in/2011/03/customized-listview-items-selection.html)

希望这对你有用

# python - 从视图 web2py 将变量返回到脚本

> ID：11676574
> 
> 赞同：0
> 
> 时间：2012-07-26T19:22:59.533
> 
> 标签：python, html, web2py

我有一个程序，它在表单中接受用户输入并将用户输入分配`session.dataQuery`给要通过程序使用的变量。`session.dataQuery`被传递给下一个函数`resultsDisplay()`，在那里它被处理并用于生成一组结果。在相应的视图`resultsDisplay.html`中，将显示用户结果以及一些替代建议。

我希望替代建议是可点击的链接，这些链接将调用`resultsDisplay`函数并更改`session.dataQuery`为点击的值，根据修改后的查询生成新的结果。我不知道如何以这种方式更改变量。真的很想得到一些帮助。希望这个问题有意义，如果您需要澄清，我会很乐意这样做。

```
def index():
    #This function gets session.dataQuery

def resultsDisplay():
    #This function uses the value assigned to session.dataQuery to
    #generate a set of results

resultsDisplay.html:
    <!-- Displays results obtained from resultsDisplay() -->
    <ul>
        <li>result_1</li>
        <li>result_2</li>
        ...
    </ul>
    <!-- Alternative suggestions here. To be clickable links to reload this page. The 
     value be sent to resultsDisplay() to become the new session.dataQuery variable and 
     be reprocessed --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:36:21.437

所以听起来点击链接会重新加载页面，就好像用户以不同的方式填写了表单一样。

也许您应该让链接指向带有一些 GET 变量的 resultsDisplay，包括一个告诉“resultsDisplay”dataQuery 应该获得什么新值，另一个告诉它不要尝试处理表单，而只是覆盖 dataQuery 并呈现页。

就像是

```
<!-- Alternative suggestions -->
{{ =A(alt_sugg, _href=URL(vars={'suggest':True, 'dataquery':new_query_value}) ) }} 
```

编辑：

> 那里的代码到底是什么？我现在的代码是：

```
{{for suggestion in suggestions:}} 
  <ul><li>
    <a href="resultsDisplay.html" onclick="session.vars={{=suggestion}}>
      {{=suggestion}}
    </a></li></ul>
{{pass}} 
```

所以在'onclick'中你有`session.vars=`......会话是一个javascript变量吗？如果没有，你正在做的事情将行不通。当 web2py 呈现视图时，您不应该更改 web2py 的会话变量。它应该在控制器（resultsDisplay）中完成。

您可以这样做（请注意您键入的文本，您在 之后缺少一个结束引号`{{=suggestion}}`）：

```
{{for suggestion in suggestions:}} 
  <ul><li>
    <a href="resultsDisplay.html?suggest=True&suggestion={{=suggestion}}">
      {{=suggestion}}
    </a></li></ul>
{{pass}} 
```

您不需要将 onclick 事件添加到`<a>`标签，因为它们已经响应了点击。通过将建议添加到 URL，您可以根据需要设置会话变量，或`request.vars.suggestion`直接使用 get 变量 ( )。

那有意义吗？

仅供参考，我的初始代码与我刚才建议的基本相同。

这个：

```
{{=A(suggestion, _href=URL(vars=dict(suggest=True, suggestion=suggestion))) }} 
```

产生与此相同的标记（基本上）：

```
<a href="resultsDisplay.html?suggest=True&suggestion={{=suggestion}}">
      {{=suggestion}}
</a> 
```

编辑：

所以我提供的代码只是视图。单击一个“建议”，resultsDisplay() 将再次执行。那是你设置 session.dataQuery 的地方：

```
def resultsDisplay():
  if request.vars.suggest == True:
    session.dataQuery = request.vars.suggestion

  else:
    #This BRANCH of the function uses the value assigned to session.dataQuery to
    #generate a set of results. 
```

# javascript - 实现json迭代

> ID：11676577
> 
> 赞同：0
> 
> 时间：2012-07-26T19:23:17.583
> 
> 标签：javascript, json

我有下面的 JSON，需要遍历“规则”对象。我似乎永远无法正确调用它，以便能够访问的不仅仅是最后一条规则。

如果有人能指出我正确的方向，我将不胜感激

```
var rules = [{
"rule":[{
    "fields":["CASE.PROSECUTED_FLAG","CASE.RESTITUTION_SIGNED"],
    "conditions":["N","Y"],
    "actions":"required",
    "action_fields":["test1","test2"]
}],
"rule":[{
    "fields":["CASE.PROSECUTED_FLAG","CASE.RESTITUTION_SIGNED"],
    "conditions":["N","N"],
    "actions": "required",
    "action_fields": ["test3", "test4"]
}],
 "rule":[{
    "fields":["CASE.PROSECUTED_FLAG"],
    "conditions":["Y"],
    "actions": "required",
    "action_fields": ["test5"]
}]
}];

function rulesControl() {
    alert(rules.length);
    for (var rule in rules) {

    var xfields = rules[rule].rule.fields;
    var conditions = rules[rule].rule.conditions;
    var actions = rules[rule].rule.actions;
    var action_fields = rules[rule].rule.action_fields;

    //test the fields (if success, mark them, else clear them)
    if (validateRule(xfields, conditions)) {
        rulesAction(actions, action_fields);
    } else {
        ruleActionMakeClear(action_fields);
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:30:31.853

你缺少卷发...

```
var rules = [{"rule":[{}]
      },{  // You are missing this curly braces.
      "rule":[{}]},
      {"rule":[{}]}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:29:16.107

那是因为 JSON 的格式很奇怪。它对包含对象的属性“规则”定义了三次，实质上是覆盖了自身。这可能是您所追求的，而不是将所有这些单项数组嵌套在对象中。

```
var rules = [
{"rule":
    {
    "fields":["CASE.PROSECUTED_FLAG","CASE.RESTITUTION_SIGNED"],
    "conditions":["N","Y"],
    "actions":"required",
    "action_fields":["test1","test2"]
    }
},
{"rule":
    {
    "fields":["CASE.PROSECUTED_FLAG","CASE.RESTITUTION_SIGNED"],
    "conditions":["N","N"],
    "actions": "required",
    "action_fields": ["test3", "test4"]
    }
},
{"rule":
    {
    "fields":["CASE.PROSECUTED_FLAG"],
    "conditions":["Y"],
    "actions": "required",
    "action_fields": ["test5"]
    }
}
]; 
```

您可以通过以下方式访问它：

```
rules[i].rule.PROPERTY 
```

其中 i 是规则的索引值，PROPERTY 是字段、条件等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T19:28:37.273

您只能拥有一个`rule`键，之所以只看到最后一条规则，是因为规则相互覆盖，最后一个是剩下的，我建议使用数组来存储规则。

# ios - 法语加拿大本地化

> ID：11676583
> 
> 赞同：0
> 
> 时间：2012-07-26T19:24:05.440
> 
> 标签：ios, ipad, localizable.strings

当我为 fr-CA 创建本地化然后将我的 iPad 切换为使用该语言和区域时，它仍然使用我的英语 localizable.strings 文件。但是，如果我只是创建一个 fr 本地化并切换 iPad，它就可以正常工作。关于可能出现问题的任何想法？我在 iPad 上的设置是否正确（见截图）？还有其他建议吗？

![在此处输入图像描述](../Images/e7dcbc4a3c1485dffc58725f9ab04fb6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:37:14.063

来自：[https ://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPInternational/Articles/LanguageDesignations.html](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPInternational/Articles/LanguageDesignations.html)

在“语言和区域设置 ID”下，它显示以下内容：

> **重要**在 iOS 中，捆绑接口在查找本地化资源时不会考虑方言或脚本信息；仅考虑语言指示符代码。因此，如果您的项目包含具有语言和区域指示符的特定于语言的项目目录，则这些目录将被忽略。OS X 中的包接口确实支持特定语言项目目录中的区域指示符。

# html - PERSISTENT 文件系统存储使用 chrome 存储在哪里？

> ID：11676584
> 
> 赞同：49
> 
> 时间：2012-07-26T19:24:05.877
> 
> 标签：html, google-chrome, filesystems, html5-filesystem

[`webkitRequestFileSystem`在 Google Chrome中执行`window.PERSISTENT`选项](http://www.html5rocks.com/en/tutorials/file/filesystem/)时，文件在我的文件系统中的哪个位置写入？我想在构建和调试此应用程序时将文件放在那里并让 Chrome 与它们进行交互。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-26T19:59:10.237

对我来说，至少在 Mac OSX 上，它们是`/Users/USERNAME/Library/Application Support/Google/Chrome/Default/File System`为我存储的。如果您使用配置文件，则会有配置文件目录而不是`Default`. 但是，每个源的保存文件/文件夹都被混淆在不容易与您交互的目录下。

要调试文件系统 API，您有几个选项：

1.  使用[此扩展](https://chrome.google.com/webstore/detail/nhnjmpbdkieehidddbaeajffijockaea)程序查看/删除文件。
2.  请参阅此处的提示：http: [//updates.html5rocks.com/2011/08/Debugging-the-Filesystem-API](http://updates.html5rocks.com/2011/08/Debugging-the-Filesystem-API)`filesystem:`这包括使用URL 非常轻松地查看存储的文件。
3.  将 Filesystem Playground 演示 ( [http://html5-demos.appspot.com/static/filesystem/filer.js/demos/index.html](http://html5-demos.appspot.com/static/filesystem/filer.js/demos/index.html) ) 放到您的源中。您可以使用它轻松查看/重命名/删除文件/文件夹。
4.  Chrome DevTools 现在支持 Filesystem API 以查看存储在源下的文件。要使用它，您需要在 中启用开发工具实验`about:flags`，重新启动，点击 devtools 中的齿轮（右下角），并在实验选项卡下启用“文件系统检查”。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-13T03:32:00.783

只是为了完整性：在 linux 上它进入 ~/.config/google-chrome/Default/File\ System/

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-03-01T20:10:59.150

在 Windows XP 上，它位于：`c:\Documents and Settings\USERNAME\Local Settings\Application Data\Google\Chrome\User Data\Default\File System\`.

在 Windows 7 上，该位置是`C:\Users\USERNAME\AppData\Local\Google\Chrome\User Data\Default\File System`.

浏览它不是很有用，因为文件名和目录名被混淆了（但文件中的内容没有改变）。

正如 ebidel 所写，最好的方法是使用`filesystem:`包含在 Chrome 中的 url 浏览器。太棒了！`fs.root.toURL()`您可以使用where is a FileSystem object获取 url `fs`，例如，从`window.webkitRequestFileSystem()`.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-13T16:56:07.953

似乎文件系统存储被编码以防止确切地试图做的事情。我最终编写了一个非常[简单的文件管理器，可以在这里找到](https://bitbucket.org/togakangaroo/filesystemstoragetests)。启动任何 Web 服务器（我喜欢[mongoose](https://code.google.com/p/mongoose/)的 0 设置）并转到`/filemanager.html route`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-19T21:15:37.053

我在 MAC 上保存了一个名为 log.txt 的文件

它最终出现在 ~/Library/Application\Support/Google/Chrome/Default/Storage/ext/panbljeniblfmcakpphmjmmnpcaibipi/def/File\ System/iso/p/00/

文件名为 00000 且没有分机

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-14T08:16:53.210

如果您使用的是 MAC OX，并且您的 chrome 上有多个配置文件，或者在路径中找不到默认配置，请替换`default`为`profile`. 但根据您拥有的个人资料数量，可能是`profile 1`,`profile 2`等

# ruby-on-rails - 失败/错误：访问

> ID：11676587
> 
> 赞同：0
> 
> 时间：2012-07-26T19:24:08.457
> 
> 标签：ruby-on-rails, testing, rspec, lambda

谁能告诉我这个错误是什么意思：

> > 失败/错误：访问 new_user_registration_path NameError: undefined local variable or method `new_user_registration_path' for # # ./spec/controllers/user_controller_spec.rb:10 # ./spec/controllers/user_controller_spec.rb:9

错误仅在我的规范外观的函数“lambda”上：

```
require 'spec_helper'

describe "User" do

describe "signup" do

describe "failure" do
  it "should not make a new user" do
    lambda do
      visit new_user_registration_path
      fill_in "email",        :with => ""
      fill_in "password",     :with => ""
      fill_in "password_confirmation", :with => ""
      click_button
      response.should render_template('users/new')
      response.should have_selector('div#error_explanation')
    end.should_not change(User, :count)
  end
end
.... 
```

我的路线 rake 说 new_user_registration 存在看起来

```
 cancel_user_registration GET    /users/cancel(.:format)                  devise/registrations#cancel
   user_registration POST   /users(.:format)                        devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)                devise/registrations#new
   edit_user_registration GET    /users/edit(.:format)                   devise/registrations#edit
... 
```

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:29:58.610

只需更换：

```
new_user_registration 
```

和：

```
new_user_registration_path 
```

# wcf - 可以将“标准”WCF 服务和 REST-ful OData 服务组合成一个服务吗？

> ID：11676589
> 
> 赞同：0
> 
> 时间：2012-07-26T19:24:16.373
> 
> 标签：wcf, hosting, odata

我有一个 WCF 服务，它通过 TCP/IP、HTTP 或命名管道提供标准 SOAP 接口。该服务计算和缓存一个大型、复杂的关系数据集，并通过高级服务操作向客户端提供有关它的视图。它运行良好。

我还有一个单独的自定义 OData 服务，它以更“原始”的形式提供基础数据。该服务与第一个服务共享一些管道，即加载和缓存大型、复杂的关系数据集，但在其他方面是一个独立的服务，可以与第一个服务分开托管。

我目前正在使用 Windows Process Activation Services 在 IIS 中托管标准 SOAP 服务，并且我确信我可以将 OData 服务作为一个单独的端点做同样的事情。

如果我想将它们一起托管在同一个 IIS 主机进程中，我有哪些选项可以允许这两个服务共享底层缓存数据集，以节省加载时间和内存消耗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:27:55.813

假设您可以处理[反射提供程序](http://msdn.microsoft.com/en-us/library/dd723653.aspx)的限制或愿意处理[自定义提供程序](http://msdn.microsoft.com/en-us/library/ee960143.aspx)的复杂性，您应该能够构建一个缓存层，使您的 WCF 服务和 WCF 数据服务都可以使用相同的数据。

（这在技术上也适用于实体框架提供程序，但听起来这可能不适合您的其他需求。）

如果您在启动和运行时遇到问题，我可以发布一个示例。

# objective-c - UIWebView 滚动和缩放

> ID：11676591
> 
> 赞同：1
> 
> 时间：2012-07-26T19:24:21.050
> 
> 标签：objective-c, ios4, uiwebview, scroll, zooming

我最小化了一个 UIWebView 以便它可以从那一侧显示一个特定的对象。我的问题是，我怎样才能滚动到它，我怎样才能在不触摸它的情况下让它变大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:39:07.127

`UIWebView`有一个`scrollView`类型的属性`UIScrollView`。此属性允许您操作当前位置、当前缩放级别等：

```
[myWebView.scrollView setContentOffset:CGMakePoint(x, y) animated:YES];
[myWebView.scrollView setZoomScale:newScale animated:YES]; 
```

# javascript - 如何在jquery中用转义字符替换html内容

> ID：11676602
> 
> 赞同：2
> 
> 时间：2012-07-26T19:25:25.833
> 
> 标签：javascript, jquery

我们需要用 jquery 替换部分 html 内容。

```
original_string = '<option value=\"\"><\/option>\n'
replacing_string = '<option value=""></option> <option value="11">2012/05/09</option> <option value="6">2012/07/03</option> '
$('#id').html().replace(original_string, replacing_string); 
```

问题是原始字符串和替换字符串中都有一堆转义字符，并且`html().replace`无法执行。如何用转义字符替换字符串？谢谢。

基本上，我们正在向页面动态添加一个空选择选项。根据用户输入，需要将选择选项插入到内容中并呈现到屏幕上。html 操作发生在渲染之前。

更新： html 内容（对不起，它是大量的）

```
<div id="invoice_against_lease" style="display: none;">
<a onclick="add_nest_fields(this, "invoice_items", "<div class=\"fields\">\n<div class=\"input select optional\"><label class=\"select optional\" for=\"invoice_invoice_items_attributes_new_invoice_items_lease_usage_record_id\">Record#：&lt;\/label><select class=\"select optional\" id=\"invoice_invoice_items_attributes_new_invoice_items_lease_usage_record_id\" name=\"invoice[invoice_items_attributes][new_invoice_items][lease_usage_record_id]\"><option value=\"\"><\/option>\n<\/select><\/div>\n<input id=\"invoice_invoice_items_attributes_new_invoice_items__destroy\" name=\"invoice[invoice_items_attributes][new_invoice_items][_destroy]\" type=\"hidden\" value=\"false\" /><a href=\"#\" onclick=\"remove_nest_fields(this); return false;\">Delete<\/a>\n<\/div>\n"); return false;" href="#">Add Record</a>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T19:33:13.287

如果`$('#id')`是对您的引用，`<select...`那么您应该能够简单地将所有选项替换为`$('#id').html(replacing_string);`

编辑：

如果`$('#id')`是父 div 的 id，则代码仅略有变化：

`$('#id select').html(replacing_string);`

（当然，除非您在该 div 中有多个选择，那么您必须提供更多详细信息，以便我们可以帮助您选择正确的选择...）

# ios - 以蓝牙为触发器的 iOS 应用

> ID：11676606
> 
> 赞同：1
> 
> 时间：2012-07-26T19:25:44.987
> 
> 标签：ios, bluetooth, location, proximity

我正在尝试帮助生成一个特定于位置的 iOS 应用程序，当它接近建筑物内的给定位置时，它需要一个外部触发器来开始音频播放。（没有 GPS 访问）

有没有人做过类似的事情？我的一个想法是在建筑物周围布置一些蓝牙“发射器”（如 xbee+arduino），如果 iPhone 的蓝牙足够接近以识别它，它将触发音频。

我以前从未使用过蓝牙或此类应用程序，因此非常感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:59:29.267

蓝牙肯定会起作用，尽管其他方法也可以。蓝牙的唯一缺点是您需要在 Apple MFi 程序中使用标准蓝牙，或者将使用的设备限制为 iPhone 4s 或更高版本或 iPad 第 3 代或更高版本，以便您可以使用蓝牙 LE（蓝牙 4.0）。

假设您可以使用蓝牙 LE，不仅有可能，Apple 还演示了一种这样的技术。注册成为开发人员后，请查看 WWDC 2012 的 Session 705，Advanced Core Bluetooth。结尾演示正是您正在寻找的内容，该会话描述了如何执行此操作并提供了源代码。

# c# - 如何在可枚举集合上应用过滤器？

> ID：11676609
> 
> 赞同：0
> 
> 时间：2012-07-26T19:26:01.487
> 
> 标签：c#, c#-3.0

我有一个包含两列的数据表“tblFields”，它的值如下。

```
FieldId     FieldValue
-------     ----------
0_Name      test0
0_Amount    100
1_Name      test1
1_Amount    100
2_Name      test2
2_Amount    200
3_Name      test3
3_Amount    0.00
4_Name      test4
4_Amount 
```

下面的 linq 为我提供了数据表中所有不以“0_”开头的行。现在我需要在这个集合上应用一个过滤器来获取数量 (_Amount) 不等于 0.00 或为空的唯一行。此外，当 _Amount 等于 0.00 或为空时，它应该排除 _Name 行。

```
var pairs = from row in tblFields.AsEnumerable()
                        where !row.Field<string>("FieldId").StartsWith("0_")
                        select new
                        {
                            key = GetId(row.Field<string>("FieldId")),
                            value = row.Field<string>("FieldValue")
                        }; 
```

我正在寻找如下输出。是否可以使用 linq 获得此结果？有谁知道实现这一目标的任何其他方法？感谢您的任何想法。

```
1_Name      test1
1_Amount    100
2_Name      test2
2_Amount    200 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:03:56.720

这应该有效（假设该`Field<T>`方法返回类型 T 并且它适用于数字类型）：

```
var pairs = from row in tblFields.AsEnumerable()
            where !row.Field<string>("FieldId").StartsWith("0_")
            let value = row.Field<decimal>("FieldValue")
            where value != 0.00M
            select new
            {
                Id = row.Field<string>("FieldId"),
                Value = value
            } 
```

如果该`Field<T>`方法不适用于数字类型，请尝试以下操作：

```
var pairs = from row in tblFields.AsEnumerable()
            where !row.Field<string>("FieldId").StartsWith("0_")
            let fieldValueString  = row.Field<string>("FieldValue")
            let value = String.IsNullOrEmpty(fieldValueString)? 0M : Decimal.Parse(fieldValueString)
            where value != 0.00M
            select new
            {
                Id = row.Field<string>("FieldId"),
                Value = value
            } 
```

在这里它应该删除字段 ID 和值，但格式略有不同（但仍然很简单）：

```
var pair= from row in tblFields.AsEnumerable()
          group row by row.Field<string>("FieldId")[0] into idValueGroup
          where idValueGroup.Key != "0"
          select new
          {
              IdLine = idValueGroup.ElementAt(0),
              ValueLine = idValueGruop.ElementAt(1)
          } into linePair
          where linePair.ValueLine.Field<decimal>("FieldValue") != 0.00M
          select new
          {
              NameId = linePair.IdLine.Field<string>("FieldId"),
              Name = linePair.IdLine.Field<string>("FieldValue"),
              ValueId = linePair.ValueLine.Field<string>("FieldId"),
              Value = linePair.ValueLine.Field<decimal>("FieldValue")
          } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:29:35.650

你可以这样做

```
var pairs = from row in tblFields.AsEnumerable()
                    where !row.Field<string>("FieldId").StartsWith("0_")
                    && row.Field<string>("FieldValue") != "0.00"
                    select new
                    {
                        key = GetId(row.Field<string>("FieldId")),
                        value = row.Field<string>("FieldValue")
                    }; 
```

### 测试代码

```
public class MyObject
{
    public string FieldId      { get; set; }
    public string FieldValue { get; set; }
}

List<MyObject> list = new List<MyObject> {
    new MyObject { FieldId = "0_Name", FieldValue = "test0"},
    new MyObject { FieldId = "1_Name", FieldValue = "test1" },
    new MyObject { FieldId = "2_Name", FieldValue = "test2" }
};

var pairs = from row in list
            where !row.FieldId.StartsWith("0_")
            && row.FieldValue != "0.00")
            select new
            {
                key = row.FieldId,
                value = row.FieldValue
            }; 
```

# c# - 我的记录将在哪个页面上？

> ID：11676611
> 
> 赞同：0
> 
> 时间：2012-07-26T19:26:08.777
> 
> 标签：c#, algorithm, entity-framework, data-binding, databound-controls

有趣，我觉得有点棘手，但是，嘿，我敢肯定有人已经面对并找到了解决该问题的方法。

无论如何，要求很简单，但解决方案不是。

我正在使用带有 EF 数据源的标准 ASP.Net Listview 控件。我的列表视图中有大量记录，因此使用了 Asp.Net 寻呼机。我在我的页面上放置了一个带有搜索按钮的文本框，我希望能够跳转到搜索框中指定的记录所在的页面。在我的案例中，记录是我的 EF Modal 中的一个属性。在我在页面上使用的代码下方

```
protected void JumptoRecordPostToServer_Click(object sender, EventArgs e)
{
    int pagenrofjumptorecord = InspectionsBusinessObject.GetPageNumberforJumptoRecord(currentusername.Value, pid, DataPager1.PageSize, recordtoFind, Common.Util.GetUserRole());
    this.Response.Redirect(string.Format("/foo.aspx?SelectedPage=", pagenrofjumptorecord.ToString()));            
} 
```

GetPageNumberforJumptoRecord 方法有几个参数与这个问题并不真正相关，但这里是该方法的代码

```
public static int GetPageNumberforJumptoRecord(string UserName,Guid ProjectID,int ItemsPerPage,int SiteNumber,UserRoles CurrentRole)
{
    using (MyEFEntity context = new MyEFEntity())
    {
        try
        {
            //allsites = integer
            int[] allsites = context.INSPECTIONS.Where(z => z.ProjectID.Equals(ProjectID)).Select(z => z.HouseSiteNo).ToArray();

            Array.Sort(allsites);                

            int sitetoSearchforIndex = Array.IndexOf(allsites, SiteNumber);

            int totalNrofItems = allsites.Length;

            if (sitetoSearchforIndex != -1)
            {
                int nrofPages = totalNrofItems / ItemsPerPage; // <------- I guess my alghorithm here is wrong
                return (sitetoSearchforIndex * nrofPages) / totalNrofItems; // <------- I guess my alghorithm here is wrong
            }
        }
        catch {}
        return -1;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:50:43.547

我认为您不需要计算总页数（`nrofPages`），这应该足够了：

```
int selectedPage = GetPage(sitetoSearchforIndex, ItemsPerPage, false);

public int GetPage(int indexOfItem, int itemsPerPage, bool startAtPageZero)
{
    int selectedPage = indexOfItem / itemsPerPage;      
    return startAtPageZero ? selectedPage : ++selectedPage;
} 
```

测试：

```
bool sapz = false; // pages start at 1
GetPage(0, 10, sapz).Dump();   // 1st item - Page 1
GetPage(9, 10, sapz).Dump();   // 10th     - Page 1
GetPage(10, 10, sapz).Dump();  // 11th     - Page 2
GetPage(14, 10, sapz).Dump();  // 15th     - Page 2
GetPage(99, 10, sapz).Dump();  // 100th    - Page 10
GetPage(100, 10, sapz).Dump(); // 101st    - Page 11 
```

# mysql - PDO 查询失败

> ID：11676612
> 
> 赞同：0
> 
> 时间：2012-07-26T19:26:09.820
> 
> 标签：mysql, oop, pdo

我的 PDO 课程有问题。我刚开始学习OOP，我真的不知道我在哪里犯了错误

我的班级代码：

```
<?php

class admin
{
  private $host = 'mysql:host=localhost;dbname=db501865';
  private $username = 'root';
  private $password = 'root';
  private $conn;

  public function connect() {
      try {
          $conn = new PDO($this->host, $this->username, $this->password);
      } catch ( PDOException $e ) {
          die( 'Connection failed: ' . $e->getMessage() );
      }
      return $conn;
  }

  public function disconnect( $conn ) {
      $conn = '';
  }

  public function listReal()
    {
        $this ->connect();
        $real = $conn->query('SELECT * FROM `real`');
        echo '<ul>';
        foreach ($real as $row)
        {
            echo'<li><img src="'.$row['image'].'"></li>';
        }
        $real -> closeCursor();
        echo'</ul>';
    }

}
?> 
```

执行以下代码后，我的浏览器出现 500 错误。

```
$db = new admin;
$db -> listReal(); 
```

我在哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:32:59.247

您必须使用`$this->var_name`您的成员变量。
如果您已经连接，也无需连接。

```
class admin
{
    private $host = 'mysql:host=127.0.0.1;dbname=test';
    private $username = 'root';
    private $password = 'local@pass';
    private $conn;

    public function connect() {
        if($this->conn) return;
        $this->conn = new PDO($this->host, $this->username, $this->password);
        $this->conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    }

    public function disconnect( $conn ) {
        $conn = '';
    }

    public function listReal()
    {
        $this ->connect();
        $real = $this->conn->query('SELECT * FROM `real`');

        echo '<ul>';
        foreach ($real as $row)
        {
            echo'<li><img src="'.$row['user_id'].'"></li>';
        }
        $real -> closeCursor();
        echo'</ul>';
    }

}
try{
    $db = new admin;
    $db -> listReal();
} catch(Exception $e) {
    echo 'error: '.$e->getMessage();
} 
```

# sql - 加入许多表获得许多值的问题

> ID：11676623
> 
> 赞同：1
> 
> 时间：2012-07-26T19:26:53.963
> 
> 标签：sql, join

这是我的脚本：

```
select c.rendering_id as prov_number, c.begin_date_of_service as date_of_service, 
    c.practice_id as group_number, v.enc_nbr as invoice, p.person_nbr as patient, 
    v.enc_nbr as invoice_number, c.charge_id as transaction_number, 
    t.med_rec_nbr as primary_mrn, p.last_name, p.first_name, 
    z.payer_id as orig_fsc_number, z.payer_id as curr_fsc_number, 
    c.location_id as location_number, c.closing_date as posting_date, 
    c.quantity as service_units, c.amt as charge_amount, 
    c.cpt4_code_id as procedure_code, r.description as procedure_name, 
    x.tran_code_id as pay_code_number, ISNULL([modifier_1],'') as modifier_code_1, 
    ISNULL([modifier_2],'') as modifier_code_2, ISNULL([modifier_3],'') as modifier_code_3, 
    ISNULL ([icd9cm_code_id],'') as dx_code_1, ISNULL ([icd9cm_code_id_2],'') as dx_code_2, 
    ISNULL ([icd9cm_code_id_3],'') as dx_code_3, ISNULL ([icd9cm_code_id_4],'') as dx_code_4

from charges c, person p, patient t, patient_encounter v, encounter_payer z, cpt4_code_mstr r, transactions x

where c.person_id = p.person_id
  and c.person_id = t.person_id
  and c.person_id = v.person_id
  and c.person_id = z.person_id
  and c.cpt4_code_id = r.cpt4_code_id
  and c.person_id = x.person_id
  and c.practice_id = '0001'
  and c.closing_date >= GetDate() - 7 
```

我应该得到大约 14k 行，但有了这个我得到了几十万。我觉得这里应该有一个内部连接来纠正它，但我已经阅读了一堆帖子，似乎可以让它工作。它是迄今为止我在 SQL 中所做的最大的拉动。

任何帮助都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:05:51.903

现在您一次注释一个内部联接并执行下面的查询，看看这些联接中的哪一个导致了一对多的关系……当计数给您说大约 14 K 时，这意味着注释的表导致了一对多的关系。

否则最好的方法是在这些表上找到基于唯一键、主键和 FK 的关系。

```
select 
count(c.person_id)
from charges c 
inner join person p on c.person_id = p.person_id 
inner join patient t on c.person_id = t.person_id 
inner join patient_encounter v on c.person_id = v.person_id 
inner join encounter_payer z on c.person_id = z.person_id 
inner join cpt4_code_mstr r on c.cpt4_code_id = r.cpt4_code_id 
inner join transactions x on c.person_id = x.person_id 

where c.practice_id = '0001' 
and c.closing_date >= GetDate() - 7 
```

你可以试试

```
 select count(*) from <tablename> group by person_id having count(*) > 1 
```

并对所有表重复上述查询，这将使您了解费用表和其他表之间的关系。Offcourse 对 cpt4_code_mstr 表使用 cpt4_code_id，但从名称上看，该表似乎是主表，因此它对于费用表中的每个 cpt4-code_id 值都有一个信号值。

我希望它会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:48:24.640

在不了解数据结构和外键关系的情况下，这个答案只是有根据的推测。但是，在回答之前，您需要学习正确的 JOIN 语法。您的查询应如下所示：

```
 from charges c join
      person p
      on . . . . 
```

也就是说，您的问题可能是您同时沿多个维度加入。虽然不清楚，但我猜测一个人可能会遇到多个患者，比如 A、B 和 C。一个人也可能有多个指控，比如 10、11 和 12。

在这种情况下，您的查询将产生九行，每个组合一个。

换句话说，您需要确定：

1.  验证表之间的连接键。一个名为 transactions 的表是否真的使用 person_id 加入了遭遇和成本？
2.  找出你从哪里得到交叉产品，然后分成两个子查询，然后适当地连接在一起。

我建议您从前两个表开始，看看您是否获得了预期的行数：

```
select *
from charges c join
     person p
     on c.person_id = p.person_id
where c.practice_id = '0001' and
     c.closing_date >= GetDate() - 7 
```

然后一次建立一个表的查询以获得您想要的结果。

最后一点，当使用表别名时，我发现使用唤起表的别名更清楚。“C”代表收费非常好。考虑像“pe”之类的东西作为患者的遭遇，等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T19:48:50.827

应该是这样，或者你可以使用左连接

```
select c.rendering_id as prov_number, c.begin_date_of_service as date_of_service, 
c.practice_id as group_number, v.enc_nbr as invoice, p.person_nbr as patient, 
v.enc_nbr as invoice_number, c.charge_id as transaction_number, 
t.med_rec_nbr as primary_mrn, p.last_name, p.first_name, 
z.payer_id as orig_fsc_number, z.payer_id as curr_fsc_number, 
c.location_id as location_number, c.closing_date as posting_date, 
c.quantity as service_units, c.amt as charge_amount, 
c.cpt4_code_id as procedure_code, r.description as procedure_name, 
x.tran_code_id as pay_code_number, ISNULL([modifier_1],'') as modifier_code_1, 
ISNULL([modifier_2],'') as modifier_code_2, ISNULL([modifier_3],'') as modifier_code_3, 
ISNULL ([icd9cm_code_id],'') as dx_code_1, ISNULL ([icd9cm_code_id_2],'') as dx_code_2, 
ISNULL ([icd9cm_code_id_3],'') as dx_code_3, ISNULL ([icd9cm_code_id_4],'') as dx_code_4

from charges c
inner join person p on c.person_id = p.person_id
inner join patient t on c.person_id = t.person_id
inner join patient_encounter v on c.person_id = v.person_id
inner join encounter_payer z on c.person_id = z.person_id
inner join cpt4_code_mstr r on c.cpt4_code_id = r.cpt4_code_id
inner join transactions x on c.person_id = x.person_id

where c.practice_id = '0001'
and c.closing_date >= GetDate() - 7 
```

# python - 我正在努力理解 CherryPy 中的会话

> ID：11676624
> 
> 赞同：3
> 
> 时间：2012-07-26T19:26:54.230
> 
> 标签：python, cherrypy

我最近开始了一个项目，将我们的 web 应用程序从 apache + Mod_python 迁移到cherry-py。

我仍然需要做很多事情，但就目前而言，CherryPy 的课程让我有点头疼。

我的第一个问题是它们是如何工作的？

在 Mod_python 中，我们这样做：

```
...
from mod_python import Session
sess = Session.Session(req, timeout = 60*60, lock=0)
#req is the request page object. 
```

从 CherryPy 文档来看，启动会话所需要做的就是通过添加以下内容来修改配置：

```
cherrypy.config.update({
    'tools.sessions.on': True, 
    'tools.sessions.storage_type': 'ram'}) 
```

以上默认为 60 分钟（尽管您可以手动设置自己的时间），但如果我想销毁该会话并创建一个新会话怎么办？是否，我调用`cherrypy.lib.sessions.expire()`任何任意文件，然后`cherrypy.config.update`再次执行此操作？或者，CherryPy 会自己创建一个新会话吗？如果我想创建一个具有不同到期时间的新会话怎么办？

注意：当我说任意文件时，我的意思是一个没有运行 CherryPy 的文件（我的“配置”文件从我们的其他页面导入并获取 html，就像 Mod_Python 附带的标准 Publisher 一样）。

我尝试制作一个快速的小测试文件：

```
import cherrypy
from cherrypy.lib import sessions

def index(sid=0, secret=None, timeout=30, lock=1):
    cherrypy.session['test'] = 'test'
    cherrypy.lib.sessions.expire()
    return cherrypy.session.get('test','None') 
```

最终结果是“测试”仍然显示在屏幕上。发生这种情况是因为客户端会话已过期，但本地会话仍有数据吗？在这种情况下，我如何检查会话是否过期？

抱歉这个令人困惑的问题，但我很困惑。

感谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T20:27:08.957

试试这个来结束一个会话。

```
sess = cherrypy.session
sess['_cp_username'] = None 
```

并尝试这个来创建一个会话......

```
cherrypy.session.regenerate()
cherrypy.session['_cp_username'] = cherrypy.request.login 
```

我用这个例子来处理我的大部分会话活动。

[http://tools.cherrypy.org/wiki/AuthenticationAndAccessRestrictions](http://tools.cherrypy.org/wiki/AuthenticationAndAccessRestrictions)

希望这可以帮助，

安德鲁

# android - Jelly Bean 中的 Android Activity 生命周期

> ID：11676627
> 
> 赞同：8
> 
> 时间：2012-07-26T19:26:58.950
> 
> 标签：android, lifecycle

我已经开发了几个月的应用程序并准备发布。我一直在使用带有 Android 4.0.4 的摩托罗拉 Xoom 进行整个过程的测试，并且一切正常。我从 Google 购买了 Nexus 7（运行 Jelly Bean 4.1），当设备休眠或关闭时，我现在遇到各种活动生命周期问题。

我创建了一个新项目，其唯一目的是检查生命周期，这就是我想出的结果。以下代码是我在每个生命周期方法中所做的示例。

```
@Override
protected void onPause() {
    Log.i("TEST", "onPause()");
    super.onPause();
} 
```

Xoom 的结果（预期结果）

```
---------- Program Launch -------------
onCreate(null)
onStart()
onResume()
---------- Turn Off Screen ------------
onPause()
onSaveInstanceState(not null)
onStop()
---------- Turn Screen On -------------
onReStart()
onRestoreInstanceState(not null)
onResume() 
```

Nexus 7 的结果（意外结果）

```
---------- Program Launch -------------
onCreate(null)
onStart()
onResume()
---------- Turn Off Screen ------------
onPause()
onSaveInstanceState(not null)
onStop()
onDestroy()
onCreate(not null)
onStart()
onRestoreInstanceState(not null)
onResume()
onPause()
---------- Turn Screen On -------------
OnResume()
onPause()
onSaveInstanceState(not null)
onStop()
onDestroy()
onCreate(not null)
onStart()
onRestoreInstanceState(not null)
onResume() 
```

同样，这些结果来自一个全新的项目，除了每个方法中的 Log 语句之外没有任何代码更改。为什么在 Nexus 7 关闭并重新打开时会有这么多额外的、不必要的方法调用？它似乎完全破坏了应用程序，然后重新创建。

为了完整起见，当使用主页按钮然后重新启动应用程序时，设备之间的生命周期似乎是一致的。

提前感谢您的帮助。韦恩

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T09:47:24.387

Jelly Bean 4.1 - Nexus 7 在此路径上有一个选项：

> 设置 -> 开发人员选项 -> 不要保留活动...

该选项将终止所有进入后台的活动。因此，当 Android 将状态更改为“睡眠”和“唤醒”时，您的活动将被破坏并重新创建。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T20:02:31.050

看起来您的 Activity 是在相关场景中重新创建的。这通常发生在系统中发生*配置更改*时。默认情况下，您的 Activity 会重新创建并重新启动，除非您明确决定自行处理配置更改。您应该检查[此列表](http://developer.android.com/reference/android/R.attr.html#configChanges)，当您打开/关闭屏幕时可能会发生这些更改之一（因为您确定不会同时旋转设备？）。

关于配置变更，可以阅读这个官方[页面](http://developer.android.com/guide/topics/resources/runtime-changes.html)。

# grand-central-dispatch - (iOS) dispatch_async() 与 NSOperationQueue

> ID：11676629
> 
> 赞同：50
> 
> 时间：2012-07-26T19:27:02.833
> 
> 标签：grand-central-dispatch, nsoperationqueue

得益于斯坦福大学的 CS193p 课程（在 iTunes U 上）以及 Big Nerd Ranch 的 iOS 编程书籍，我学习了 iOS 编程。在这两者中，他们建议使用`dispatch_async()`,`dispatch_get_main_queue()`等来处理线程和并发操作。然而，在 WWDC 2012 关于构建并发 UI 的会议上，演讲者建议使用`NSOperationQueue`.

和 之间有什么区别`dispatch_*()`，`NSOperationQueue`是否有任何理由（技术、性能、风格或其他）我应该使用一个而不是另一个？只是`NSOperationQueue`一个 Objective-C 包装器`dispatch_async`，还是有更多的东西？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-11-06T10:43:48.980

`NSOperation*`类是更高级别的api。它们对您隐藏 GCD 的较低级别的 api，以便您可以专注于完成任务。

经验法则是：**首先使用最高级别的api，然后根据您需要完成的任务进行降级。**

这种方法的优点是您的代码与供应商提供的特定实现保持最不可知。在本例中，使用`NSOperation`，您将使用 Apple 的执行队列实现（使用 GCD）。如果 Apple 决定更改幕后的实现细节，他们可以在不破坏应用程序代码的情况下这样做。
一个这样的例子是 Apple 弃用 GCD 并使用一个完全不同的库（这不太可能，因为 Apple 创建了 GCD 并且每个人似乎都喜欢它）。

关于此事，我建议查阅以下资源：

*   [http://nshipster.com/nsoperation/](http://nshipster.com/nsoperation/)
*   [https://cocoasamurai.blogspot.de/2009/09/guide-to-blocks-grand-central-dispatch.html](https://cocoasamurai.blogspot.de/2009/09/guide-to-blocks-grand-central-dispatch.html)
*   [https://cocoasamurai.blogspot.de/2009/09/making-nsoperation-look-like-gcd.html](https://cocoasamurai.blogspot.de/2009/09/making-nsoperation-look-like-gcd.html)
*   [https://www.raywenderlich.com/76341/use-nsoperation-nsoperationqueue-swift](https://www.raywenderlich.com/76341/use-nsoperation-nsoperationqueue-swift)
*   [https://developer.apple.com/documentation/foundation/operationqueue](https://developer.apple.com/documentation/foundation/operationqueue)
*   [视频：*高级 NSOperations*，WWDC 2015，第 226 节](https://developer.apple.com/videos/play/wwdc2015/226/)
*   [示例代码：*高级 NSOperations*，WWDC 2015](https://developer.apple.com/sample-code/wwdc/2015/)
*   [视频：*使用 GCD 构建响应迅速且高效的应用程序*，WWDC 2015，第 718 场会议](https://developer.apple.com/videos/play/wwdc2015/718/)

现在，关于您的具体问题：

> dispatch_*() 和 NSOperationQueue 有什么区别，[...]

往上看。

> [...] 是否有任何理由（技术、性能、风格或其他）我应该使用其中一种？

如果这些`NSOperation`东西可以完成您的工作，请使用它。

> NSOperationQueue 只是一个围绕 dispatch_async 的 Objective-C 包装器，还是还有更多功能？

是的，基本上是这样。加上操作依赖、轻松启动/停止等功能。

## 修正案

也就是说，首先使用最高级别的 api 可能听起来很有趣。当然，如果您需要一种在特定线程上运行代码的快速方法，您不想编写大量样板代码，从而使使用较低级别的 C 函数完全有效：

```
dispatch_async(dispatch_get_main_queue(), ^{
  do_something();
}); 
```

**但是**考虑一下：

```
[[NSOperationQueue mainQueue] addOperationWithBlock:^{
  do_something();
}]; 
```

我推荐后者，因为无论如何您将编写的大部分内容都是Objective-C，那么为什么不接受它的表现力呢？

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-27T02:59:19.097

NSOperationQueue 比 dispatch_async() 重得多，它只是以非常有限的方式基于 GCD（本质上它只是使用全局调度队列来执行其异步操作，但不使用其他 GCD 工具）。

NSOperationQueue 确实具有 GCD 未提供的其他功能，但如果您不需要这些功能，使用 GCD 将为您提供更好的性能。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-08-29T07:18:51.317

他们都在做同样的事情，但他们之间的主要区别在于——我们可以在使用 NSOperation 时取消任务，而如果我们使用 GCD，那么一旦我们将任务分配到队列中，我们就无法取消它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-30T11:51:17.360

除了上面的答案，NSOperation 队列相对于 GCD 的另一个优势是

1) **依赖关系：-** 我们可以在两个 NSOperations 之间建立一个依赖关系，直到它的所有依赖关系都为完成返回 true，操作才会开始。

2)**操作状态：-**我们可以监控操作或操作队列的状态。就绪、执行或完成

3）**最大操作数：-** 我们可以指定可以同时运行的最大排队操作数

# wpf - 功能区中的第一组定义不显示图标

> ID：11676630
> 
> 赞同：2
> 
> 时间：2012-07-26T19:27:02.923
> 
> 标签：wpf, ribbon, fluent, fluent-ribbon

我正在尝试使用 Fluent Ribbon 中的布局定义。我遇到的问题是它没有在第一个组定义内的按钮上显示图标。这是下面的适当片段：

```
<Fluent:RibbonToolBar>
    <Fluent:RibbonToolBar.LayoutDefinitions>
        <Fluent:RibbonToolBarLayoutDefinition Size="Large">
            <Fluent:RibbonToolBarRow>
                <Fluent:RibbonToolBarControlGroupDefinition>
                    <Fluent:RibbonToolBarControlDefinition Target="buttonCameraLock" />
                </Fluent:RibbonToolBarControlGroupDefinition>
                <Fluent:RibbonToolBarControlGroupDefinition>
                    <Fluent:RibbonToolBarControlDefinition Target="buttonPanMode" />
                    <Fluent:RibbonToolBarControlDefinition Target="buttonRoamMode" />
                </Fluent:RibbonToolBarControlGroupDefinition>
            </Fluent:RibbonToolBarRow>
        </Fluent:RibbonToolBarLayoutDefinition>                        
    </Fluent:RibbonToolBar.LayoutDefinitions>

    <Fluent:Button x:Name="buttonCameraLock"
                       Icon="histogram_small.png"
                       HorizontalAlignment="Center"
                       SizeDefinition="Small" />
    <Fluent:Button x:Name="buttonPanMode"
                       Icon="histogram_small.png"
                       HorizontalAlignment="Center"
                       SizeDefinition="Small" />
    <Fluent:Button x:Name="buttonRoamMode"
                       Icon="histogram_small.png"
                       HorizontalAlignment="Center"
                       SizeDefinition="Small" />
</Fluent:RibbonToolBar> 
```

在此示例中，第一个按钮存在，但没有图标。如果我将它们全部放在一组中，则所有按钮都没有图标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T12:07:03.347

我找到了问题的解决方案。在代码片段中，为了简洁起见，我忽略了图标是使用相对路径设置的。这显然是一个已知的错误。将它们设置为硬编码路径解决了这个问题。

[http://fluent.codeplex.com/workitem/18947](http://fluent.codeplex.com/workitem/18947)

# android - 在android中设置不同时间的通知

> ID：11676631
> 
> 赞同：0
> 
> 时间：2012-07-26T19:27:04.190
> 
> 标签：android

我有一个 android 应用程序。我想在用户设置的五个不同时间产生五个通知。如果我的应用程序不会运行，应该产生通知......我该怎么做？

在下面的课程中，我将 db 通知值与 oncreate().res1,res2...res5 中存储的五个通知时间的无限循环中的设备时间进行比较 db.day4 是系统时间...

我的服务.java

```
ppublic class MyService extends Service {
              private static final String DATABASE_NAME = "MYPRAYER.db";   
              private static final String DATABASE_TABLE = "notification";
              String tag="TestService";
                String a="hello";
                String res1,res2,res3,res4,res5;
                int hour,minute;
                String day3,day4,minute1,hour1;
                MediaPlayer mMediaPlayer;
                   /* Service creation */
               @Override
               public void onCreate() {
             super.onCreate();
               Toast.makeText(this, "Service created...", Toast.LENGTH_LONG).show();      
               Log.i(tag, "Service created...");

                  /* Rereive notification times from the databse notificaion */
              SQLiteDatabase myDB;
            myDB = openOrCreateDatabase(DATABASE_NAME, Context.MODE_PRIVATE, null);
            String[] resultColumns = new String[] {"fajr","zuhr","asr","magrib","isha"};
            Cursor allRows = myDB.query(DATABASE_TABLE, resultColumns, null, null, null, null, null, null);

            Integer cindex = allRows.getColumnIndex("fajr");
            Integer cindex1 = allRows.getColumnIndex("zuhr");
            Integer cindex2 = allRows.getColumnIndex("asr");
            Integer cindex3 = allRows.getColumnIndex("magrib");
            Integer cindex4 = allRows.getColumnIndex("isha");
            allRows.moveToFirst();
            res1=allRows.getString(cindex);
            res2=allRows.getString(cindex1);
            res3=allRows.getString(cindex2);
            res4=allRows.getString(cindex3);
            res5=allRows.getString(cindex4);

            myDB.close();

            while(!Thread.currentThread().isInterrupted())
            {
            try 
            {

                Calendar cal = Calendar.getInstance(); // Rereive calender date
                hour = cal.get(Calendar.HOUR_OF_DAY); // Take hour from the calender
                minute = cal.get(Calendar.MINUTE);    // Take minute from the calender
                minute1=minute + "";  // Convert minute to dtring
                if(minute1.equals("1")) 
                {
                minute1="01";
                }
                else if(minute1.equals("2"))
                {
                minute1="02";
                }
                else if(minute1.equals("3"))
                {
                minute1="03";
                }
                else if(minute1.equals("4"))
                {
                minute1="04";
                }
                else if(minute1.equals("5"))
                {
                minute1="05";
                }
                else if(minute1.equals("6"))
                {
                minute1="06";
                }
                else if(minute1.equals("7"))
                {
                minute1="07";
                }
                else if(minute1.equals("8"))
                {
                minute1="08";
                }
                else if(minute1.equals("9"))
                {
                minute1="09";
                }
                     /* Converting to 12 hour format */
                if ( hour < 12 )
                {
                     hour=hour;
                     day3=hour + "" + ":" + minute1;
                     day4=day3 + " " + "AM"; // DAY4 Contains the system time
                }
                else
                {
                    hour=hour-12;
                    day3=hour + "" + ":" + minute1;
                    day4=day3 + " " + "PM";
                }

                if(day4.equals(res1))
              {
                     Notification("Notification Title","Notification Message");

              }

                 if(day4.equals(res2))
                  {
                         Notification("Notification Title","Notification Message");

                  }

                 if(day4.equals(res3))
                  {
                         Notification("Notification Title","Notification Message");

                  } 
                 if(day4.equals(res4))
                  {
                         Notification("Notification Title","Notification Message");

                  }
                 if(day4.equals(res5))
                  {
                         Notification("Notification Title","Notification Message");

                  }

               Thread.sleep(1000);
       } 
       catch (InterruptedException e)
       {
               Thread.currentThread().interrupt();
               //System.out.println("New 1 Exception here");

       }

       catch (Exception e)
      {
               //Thread.currentThread().interrupt();
           System.out.println("nEW Exception here");
      }          
       }

       }         
          @Override
          public void onStart(Intent intent, int startId) {      
          super.onStart(intent, startId);  
          Log.i(tag, "Service started...");
       }
         @Override
         public void onDestroy() {
         super.onDestroy();
         Toast.makeText(this, "Service destroyed...", Toast.LENGTH_LONG).show();
       }

         @Override
         public IBinder onBind(Intent intent) {
         return null;
        }

         private  void Notification(String notificationTitle, String notificationMessage)
       {
         NotificationManager notificationManager = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
         Notification notification = new Notification(R.drawable.ic_launcher, "A New Message!", System.currentTimeMillis());

         Intent notificationIntent = new Intent(this,MyService.class);
         PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

         notification.setLatestEventInfo(MyService.this, notificationTitle, notificationMessage, pendingIntent);
         notificationManager.notify(10001, notification);
   //HELLO_ID++;
         Uri alert = RingtoneManager.getDefaultUri(
        RingtoneManager.TYPE_NOTIFICATION); 

        mMediaPlayer = new MediaPlayer();
      try
      {
      mMediaPlayer.setDataSource(this, alert);

      AudioManager audioManager = (AudioManager)getSystemService(
                                  Context.AUDIO_SERVICE);
      int volumen = audioManager.getStreamVolume(
                    AudioManager.STREAM_NOTIFICATION);

      if (volumen != 0) {
        mMediaPlayer.setAudioStreamType(AudioManager.STREAM_NOTIFICATION);
        mMediaPlayer.setLooping(true);
        mMediaPlayer.prepare();
        mMediaPlayer.start();
      }
      }
      catch(IOException e)
      {  
          System.out.println("Exception here");
          //System.out.println("Exception 1 here");
      }
      }
          } 
```

日志猫：

07-27 16:25:00.542：I/TestService(363)：服务已创建... 07-27 16:25:20.752：I/dalvikvm(363)：threadid=7：对信号 3 做出反应 07-27 16： 25:20.803：I/dalvikvm(363)：将堆栈跟踪写入“/data/anr/traces.txt”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:36:52.817

我所做的是使用`AlarmManager`触发`BroadcastReceiver`来设置通知。所以在 Android 文档上搜索。也有很多关于这些东西的资源。其他人也可能会告诉您不要使用`BroadcastReceiver`，而是使用`Service`. 老实说，它可以双向进行，所以无论您做出什么选择都应该没问题。至于通知，您可以轻松地谷歌通知以查找相关资源。搜索状态通知。

# jsf - Apache POI + RichFaces 4 - docx 文件名

> ID：11676635
> 
> 赞同：0
> 
> 时间：2012-07-26T19:27:24.957
> 
> 标签：jsf, jakarta-ee, apache-poi

我正在使用 Apache POI 生成带有 .docx 扩展名的文档。我在标头响应（HttpServletResponse）中设置了文件名，但是浏览器在我的 URL 末尾保存了一个同名文件，例如：

我的浏览器中的URL是：localhost:8080/MyProject/mypage.jsf，下载的文件的名字是mypage.jsf，忽略头部设置的名字（HttpServletResponse）。如果我编辑 docx 的文件扩展名，内容就可以了。

这是代码：

```
 private void generateDocument() throws IOException{
      XWPFDocument document = new XWPFDocument();
      //load document here

        FacesContext facesContext = FacesContext.getCurrentInstance();
        HttpServletResponse response = (HttpServletResponse) facesContext
                .getExternalContext().getResponse();

        response.reset();
        response.setContentType("application/vnd.openxmlformats-officedocument.wordprocessingml.document");

        ServletOutputStream out = response.getOutputStream();
        document.write(out);

        response.setHeader("Content-Disposition",
                "attachment; filename=my_document.docx");
        facesContext.responseComplete();            
} 
```

附言。我正在使用 Richfaces 4

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:12:57.497

从评论升级为答案：

在写入 servlet 输出流之前，您应该将 response.setHeader 调用移至。除非您的框架正在进行大量缓冲，否则框架将在您完成将 excel 文件写入流之前很久就发送响应标头。标头必须在数据之前发送，因此一旦您开始发送数据，您就不能再添加新的标头。

（大多数框架都会做一点缓冲，所以在处理简单的文本输出时，即使在写出几行响应之后，您也经常可以偷偷添加一些额外的标题。如果可以避免的话，最好不要依赖它！ )

您的代码应更改为：

```
 FacesContext facesContext = FacesContext.getCurrentInstance();
    HttpServletResponse response = (HttpServletResponse) facesContext
            .getExternalContext().getResponse();

    response.reset();
    response.setContentType("application/vnd.openxmlformats-officedocument.wordprocessingml.document");
    response.setHeader("Content-Disposition",
            "attachment; filename=my_document.docx");

    ServletOutputStream out = response.getOutputStream();
    document.write(out);

    facesContext.responseComplete(); 
```

# xcode - 此面板是否正确显示？

> ID：11676636
> 
> 赞同：1
> 
> 时间：2012-07-26T19:27:27.317
> 
> 标签：xcode, cocoa, nswindowcontroller, nspanel

我在 Snow Leopard 上运行 xcode 4.2。我正在尝试在 Mac 应用程序中调出一个面板，该面板将显示在主窗口旁边。这是代码：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    _propertiesViewController = [[NSViewController alloc] initWithNibName:@"FFPropertiesViewController" bundle:nil];
    _panelController = [[NSWindowController alloc] initWithWindowNibName:@"FFPropertiesPanel"];
    [(NSPanel*)[_panelController window] setBecomesKeyOnlyIfNeeded:YES];
    [[_panelController window] setContentView:[_propertiesViewController view]];
    [_panelController showWindow:self];

} 
```

该面板似乎运行良好，其控件似乎可以正常工作。但是后来，当我创建一个自定义对象并尝试将其分配给 NSViewController 的代表对象属性时，分配不会发生。执行以下行会将代表对象的值保留为 nil：

```
_propertiesViewController.representedObject = aFieldInfo; 
```

我尝试为 ViewController 提供一个属性来引用 FieldInfo 对象，并在我尝试分配代表对象的同一位置分配该属性。效果是一样的——在赋值之后 fieldInfo 属性的值保持为 nil。这让我觉得 ViewController 有问题。也许我错误地从笔尖中检索到它？

谢谢

# hibernate - 休眠多对多关联删除错误

> ID：11676637
> 
> 赞同：3
> 
> 时间：2012-07-26T19:27:36.373
> 
> 标签：hibernate, many-to-many, constraints

我有两个类：`Employee`和`Award`，具有多对多关系。

尝试删除时出现约束违规错误。我浏览了所有帖子，但没有一个有用。

这是代码：

```
@Entity
@Table(name="TB_AWARD")
public class Award implements Serializable{

    @Id @GeneratedValue
    @Column(name="AWARD_ID")
    private long awardId;

    @ManyToMany(mappedBy="awards")
    @NotFound(action=NotFoundAction.IGNORE)
    private Collection<Employee> employee = new ArrayList<Employee>();

    @Column(name="AWARD_TYPE")
    private String awardType;

    @Column(name="AWARD_DATE")
    private Date awardDate;

    @Column(name="AWARD_DETAILS")
    @Lob
    private String awardDetails;

    @Column(name="REMARK")
    private String remark;

@Entity
@Table(name="TB_EMPLOYEE")
public class Employee implements Serializable {

    @Id @GeneratedValue
    @Column(name="EMPLOYEE_ID")
    private long employeeID;

        @ManyToMany(cascade= CascadeType.ALL)
    private Collection<Award> awards; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:34:36.100

你映射错了，试试这样：

```
@Entity
@Table(name="TB_AWARD")
public class Award implements Serializable{

    @Id @GeneratedValue
    @Column(name="AWARD_ID")
    private long awardId;

    @ManyToMany(targetEntity=Employee.class, cascade = CascadeType.ALL)
    @JoinTable(name = "AWARD_EMPLOYEE", joinColumns = { @JoinColumn(name ="AWARD_ID")},
    inverseJoinColumns = { @JoinColumn(name = "EMPLOYEE_ID") })
    @NotFound(action=NotFoundAction.IGNORE)
    private Collection<Employee> employees = new ArrayList<Employee>();

    @Column(name="AWARD_TYPE")
    private String awardType;

    @Column(name="AWARD_DATE")
    private Date awardDate;

    @Column(name="AWARD_DETAILS")
    @Lob
    private String awardDetails;

    @Column(name="REMARK")
    private String remark;

@Entity
@Table(name="TB_EMPLOYEE")
public class Employee implements Serializable {

    @Id @GeneratedValue
    @Column(name="EMPLOYEE_ID")
    private long employeeID;

    @ManyToMany(
    cascade = CascadeType.ALL,
    mappedBy = "employees",
    targetEntity = Award.class
    )
    private Collection<Award> awards; //create the getter for this guy 
```

总是先看一下[参考中的例子](http://docs.jboss.org/hibernate/stable/annotations/reference/en/html_single/#entity-hibspec-collection)，它会让你的生活变得更轻松。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:31:27.090

你从数据库而不是从休眠中获取它。当休眠删除时，它首先使引用无效。删除数据库约束。您还应该打开 hibernate sql 日志记录或在数据库分析器中查看 sql 以查看 hibernate 的作用。您将在那里看到导致约束冲突的 sql。

# php - 哪种结构更好？- PHP HTTP 库

> ID：11676639
> 
> 赞同：0
> 
> 时间：2012-07-26T19:27:54.463
> 
> 标签：php, http, structure

哪种结构有用/更好？
(PHP)

**结构A**

```
+ httpLib/
|   . Index.php / Factory
|   . API.php
|   . _Exception.php
|   + Response/
|   |   . Interface.php
|   |   . ...
|   + Request/
|   |   . Interface.php
|   |   . ... 
```

**结构B**

```
+ httpLib/
|   . Response.php
|   . Request.php
|   . API.php
|   . _Exception.php
|   + Client/
|   |   . Interface.php
|   |   . Socket.php
|   |   . Stream.php
|   |   . cURL.php
... 
```

*（我没有找到更好的标题）*
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:29:53.243

第一种结构是最好的。

有了它，您可以更好地分离请求和响应。

请求和响应的结构定义明确，不在一个类中

# facebook - 黑莓 Facebook SDK 抛出异常：NoClassDefFoundError

> ID：11676646
> 
> 赞同：3
> 
> 时间：2012-07-26T19:28:02.883
> 
> 标签：facebook, eclipse, blackberry, noclassdeffounderror

我已经搜索了与我的问题相关的所有主题，但找不到解决方案。我正在使用带有 JRE 7.1.0 的 BlackBerry Java Plug-in for Eclipse v1.5.2 编写 Blackberry 应用程序。我目前正在尝试将 Facebook Connect 集成到我的应用程序中，以便用户可以通过 Facebook 登录我们的应用程序。我使用的 Blackberry Facebook SDK 是从这里下载的 0.8.25 版本：

[http://sourceforge.net/projects/facebook-bb-sdk/](http://sourceforge.net/projects/facebook-bb-sdk/)

得到两个jar文件后，FacebookBlackberrySDK-v0.8.25.jar和Log4B-v0.9.4.jar我首先用eclipse成功预验证了它们，并将它们作为库包含到我的项目中。该项目编译成功，但随后出现运行时错误：`NoClassDefFoundError`. 调试后发现异常是在这一行抛出的：

```
fb = Facebook.getInstance(new ApplicationSettings(NEXT_URL, APPLICATION_ID, APPLICATION_SECRET, Facebook.Permissions.ALL_PERMISSIONS)); 
```

我怀疑程序找不到下面的文件 Facebook.class 是我的源代码：

```
package com.nextmobile.ecourage.net;

import com.blackberry.facebook.ApplicationSettings;
import com.blackberry.facebook.Facebook;

public class FacebookLogin
{
    private final String NEXT_URL = "http://www.facebook.com/connect/login_success.html";
    private final String APPLICATION_ID = "153555168010272";
    private final String APPLICATION_SECRET = "354f91a79c8fe5a8de9d65b55ef9aa1b";
    private Facebook fb;
    private Facebook fb4u;

    public FacebookLogin()
    {
        fb = Facebook.getInstance(new ApplicationSettings(NEXT_URL, APPLICATION_ID, APPLICATION_SECRET, Facebook.Permissions.ALL_PERMISSIONS));
        fb4u = Facebook.getInstance(new ApplicationSettings(NEXT_URL, APPLICATION_ID, APPLICATION_SECRET, Facebook.Permissions.USER_DATA_PERMISSIONS));
        fb4u.addPermission(Facebook.Permissions.OFFLINE_ACCESS);
    }
} 
```

所以我只用这行代码替换了这些行：

```
new ApplicationSettings(NEXT_URL, APPLICATION_ID, APPLICATION_SECRET, Facebook.Permissions.ALL_PERMISSIONS); 
```

它工作没有给出任何错误。这很奇怪，因为 Facebook.class 和 ApplicationSettings.class 都在同一个目录中，程序可以找到 ApplicationSettings.class 而不是 Facebook.class。

这两个类都在包下：`com.blackberry.facebook`

有人对此有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:32:14.417

由于您使用的是 Java SDK，因此您应该查看 RIM 提供的关于将 facebook 和 twitter 集成到您的 BB 应用程序中的示例：[https ://github.com/blackberry/Samples-for-Java/tree/master/SocialApp](https://github.com/blackberry/Samples-for-Java/tree/master/SocialApp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:04:06.943

可能的原因 ApplicationSettings 是用更高的 java 版本编译的。检查您的项目属性-> java 编译器-> 编译器合规性级别-> 这必须是 1.4

# python - 使用 Python 更改 .xml 中的特定重复元素

> ID：11676649
> 
> 赞同：1
> 
> 时间：2012-07-26T19:28:31.773
> 
> 标签：python, xml, parsing, lxml

我有以下我喜欢操作的 .xml 文件：

```
<html>
  <A>
    <B>
      <C>
        <D>
          <TYPE>
            <NUMBER>7297</NUMBER>
            <DATA />
          </TYPE>
          <TYPE>
            <NUMBER>7721</NUMBER>
            <DATA>A=1,B=2,C=3,</DATA>
          </TYPE>
        </D>
      </C>
    </B>
  </A>
</html> 
```

我想更改`<DATA>`位于`<NUMBER>7721</NUMBER>`元素下方的文本。我怎么做？如果我使用`find()`or`findtext()`它只能指向第一个匹配项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T19:50:51.687

XPath 非常适合这种东西。`//TYPE[NUMBER='7721' and DATA]`将找到所有 TYPE 节点，其中至少有一个带有文本“7721”的 NUMBER 子节点和至少一个 DATA 子节点：

```
from lxml import etree

xmlstr = """<html>
  <A>
    <B>
      <C>
        <D>
          <TYPE>
            <NUMBER>7297</NUMBER>
            <DATA />
          </TYPE>
          <TYPE>
            <NUMBER>7721</NUMBER>
            <DATA>A=1,B=2,C=3,</DATA>
          </TYPE>
        </D>
      </C>
    </B>
  </A>
</html>"""

html_element = etree.fromstring(xmlstr)

# find all the TYPE nodes that have NUMBER=7721 and DATA nodes
type_nodes = html_element.xpath("//TYPE[NUMBER='7721' and DATA]")

# the for loop is probably superfluous, but who knows, there might be more than one!
for t in type_nodes:
    d = t.find('DATA')
    # example: append spamandeggs to the end of the data text
    if d.text is None:
        d.text = 'spamandeggs'
    else:
        d.text += 'spamandeggs'
print etree.tostring(html_element) 
```

输出：

```
<html>
  <A>
    <B>
      <C>
        <D>
          <TYPE>
            <NUMBER>7297</NUMBER>
            <DATA/>
          </TYPE>
          <TYPE>
            <NUMBER>7721</NUMBER>
            <DATA>A=1,B=2,C=3,spamandeggs</DATA>
          </TYPE>
        </D>
      </C>
    </B>
  </A>
</html> 
```

# internet-explorer - Cookie 会一直保留到 Internet Explorer 重新启动

> ID：11676652
> 
> 赞同：1
> 
> 时间：2012-07-26T19:28:35.763
> 
> 标签：internet-explorer, cookies

我在使用 Internet Explorer 8 时遇到了这个奇怪的问题。我删除的任何 cookie 仍然可以识别，直到我重新启动浏览器。即使不重新启动这些浏览器，cookie 也会在 chrome 和 firefox 中被删除。我尝试搜索但找不到任何东西，有人知道与此相关的任何错误吗？我尝试使用以下方法删除 cookie：

```
PHP: setcookie("reservation", "", time() - 3600);   
jQuery cookie plugin: $.cookie('reservation', null); 
```

我已经尝试过指定域和不指定域，但这并没有改变任何东西。

所以，重申一下，我删除的任何 cookie 在我删除它们后仍然被 Internet Explorer 识别，但是一旦我关闭 Internet Explorer 并重新打开它，cookie 就消失了。似乎它以某种方式与会话相关联。

# eclipse - 无法使用开瓶器通过代理建立与 eclipse gerrit 的 ssh 连接

> ID：11676655
> 
> 赞同：0
> 
> 时间：2012-07-26T19:28:59.537
> 
> 标签：eclipse, git, ssh, gerrit, ssh-tunnel

在我的研究所，我只能通过代理访问互联网。我在建立与 Gerrit 代码审查系统 (git.eclipse.org) 的 ssh 连接时遇到了一些严重问题，因此无法向 Gerrit 推送任何新补丁。

为了执行上述任务，我首先尝试使用开瓶器通过 HTTP 隧道 SSH，按照[此处](http://www.agroman.net/corkscrew/)给出的说明， 这就是我所做的：

1.  安装好的开瓶器
2.  将 ProxyCommand 添加到 ssh 配置
3.  在文件 ~/.ssh/proxyauth 中添加了代理用户名和代理认证密码

在此之后，*我成功地设置了一个连接到 github 的 ssh，*并将更改推/拉到我的 github 存储库。

但是我无法通过 ssh 连接到 gerrit。这是确切的错误：

```
$ssh -p 29418 jgupta@git.eclipse.org
Proxy could not open connnection to git.eclipse.org:  Forbidden
ssh_exchange_identification: Connection closed by remote host 
```

我正在使用 Linux（RHEL 6.3 Beta x86_64）和 git 1.7.11.1（最新）。
我的 ~/.ssh/config 的内容是：

```
Host github.com
  Hostname ssh.github.com
  Port 443
  ProxyCommand corkscrew 202.141.80.22 3128 %h %p ~/.ssh/proxyauth

Host *
  ProxyCommand corkscrew 202.141.80.22 3128 %h %p ~/.ssh/proxyauth 
```

对 git.eclipse.org 的 ssh 请求的详细（错误）结果是：

```
penSSH_5.3p1, OpenSSL 1.0.0-fips 29 Mar 2010
debug1: Reading configuration data /home/jayant/.ssh/config
debug1: Applying options for *
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Applying options for *
debug2: ssh_connect: needpriv 0
debug1: Executing proxy command: exec corkscrew 202.141.80.22 3128 git.eclipse.org 29418 ~/.ssh/proxyauth
debug1: permanently_drop_suid: 500
debug1: identity file /home/jayant/.ssh/identity type -1
debug2: key_type_from_name: unknown key type '-----BEGIN'
debug2: key_type_from_name: unknown key type 'Proc-Type:'
debug2: key_type_from_name: unknown key type 'DEK-Info:'
debug2: key_type_from_name: unknown key type '-----END'
debug1: identity file /home/jayant/.ssh/id_rsa type 1
debug1: identity file /home/jayant/.ssh/id_dsa type -1
Proxy could not open connnection to git.eclipse.org:  Forbidden
ssh_exchange_identification: Connection closed by remote host 
```

在我的 git repo 中设置的远程 url 是：

```
$git remote -v
origin  http://git.eclipse.org/gitroot/etrice/org.eclipse.etrice.git (fetch)
origin  http://git.eclipse.org/gitroot/etrice/org.eclipse.etrice.git (push)
review  ssh://jgupta@git.eclipse.org:29418/etrice/org.eclipse.etrice.git (fetch)
review  ssh://jgupta@git.eclipse.org:29418/etrice/org.eclipse.etrice.git (push) 
```

几天前，当我可以直接访问互联网时，我能够通过 ssh 连接并推送我的补丁，使用上述远程设置。

我尝试删除 known_hosts 的内容，但这没有帮助。
这是gerrit服务器的问题吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:11:39.460

我觉得问题是由于不支持的服务器配置造成的。这是我在网上的一篇博文中发现的：

> 基本思想是，您将以某种方式调用 socat（类似于 corkscrew 的实用程序），它将使用 CONNECT 方法与 HTTP(S) 代理服务器协商，为您提供通往远端服务器的干净管道。
> ...
> 注意到许多公司防火墙阻止访问 443 以外的端口上的 CONNECT 方法，如果您使用主机“ssh.github.com”，github 上的好人有一个 ssh 服务器侦听 443，因此您可以替换上述 ssh 配置节中的主机名和端口（视情况而定），一切就绪

上面的摘录取自[这里](http://gitolite.com/git-over-proxy.html)。

我的感觉是，由于 gerrit 正在端口 29418 上运行，并且由于代理通常仅允许远程主机（服务器）的端口 443 上的请求访问 CONNECT 方法，因此无法在代理上协商 gerrit 的 ssh 请求。

github 不会发生这种情况，因为它在端口 443 上提供 ssh 请求，并且客户端实用程序（如 corkscrew）可以通过在远程服务器的端口 443 上发送发送请求来协商代理（如上面 .ssh/config 的快照中所做的那样） .

有谁知道执行上述任务的其他方法？

# python - 上传目的地

> ID：11676657
> 
> 赞同：2
> 
> 时间：2012-07-26T19:29:07.777
> 
> 标签：python, file-upload, flask

我一直在用 python 微框架烧瓶构建一个小博客，我希望能够上传博客帖子的照片。我找到了[flask-uploads](http://packages.python.org/Flask-Uploads/)包，它可以很方便地将上传合并到应用程序中。然后我在 bitbucket 上找到了源代码以及[一个示例](https://bitbucket.org/leafstorm/flask-uploads/src/440e06b851d2/example/photolog.py)。

该示例将上传的照片放入 /tmp/photolog，但我想要一个更永久的上传位置，因此我选择在我的应用程序文件夹中使用一个文件夹，但这会导致 OSERROR 13（权限错误）。进一步阅读建议我可能需要更新要用于上传的文件夹的权限，但我不确定我应该如何配置权限以使其工作。

我读了一些关于flask 0.8的实例文件夹，应该用于上传，但简单地尝试上传到我的应用程序目录中名为实例的文件夹似乎没有什么不同（这是意料之中的）。

这似乎是一个非常简单的问题，我发现烧瓶是一个非常易于使用的框架，但我似乎无法在任何地方找到解决方案。我确定我完全误解了应该如何使用实例文件夹，但我正在努力寻找示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T20:02:27.663

您只需确保运行服务器的用户或组对您要上传这些文件的目录具有写入权限。

# get - 检查提要以获取更新

> ID：11676666
> 
> 赞同：0
> 
> 时间：2012-07-26T19:29:42.360
> 
> 标签：get, arduino, ethernet

我创建了一个监控[Twitter](http://en.wikipedia.org/wiki/Twitter)流 API的[thingspeak](http://community.thingspeak.com/documentation/api/)频道（提要） 。一旦使用我设置的匹配标准发送了一条新推文，我的提要就会更新。我正在编写一个[Arduino 草图](http://www.arduino.cc/en/Tutorial/Sketch)，当我的提要更新时，它将 13 号引脚设置为高一秒钟。我有一个有效的[GET](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods)请求，但我不知道如何解析提要并检查它是否收到了新的更新。

作为一个起点，我使用[的是 thingspeak 提供的草图，该草图](https://github.com/iobridge/CheerLights/blob/master/Arduino_Ethernet_Controller.ino)旨在检查他们的提要是否有更新，从推文中获取关键字，并根据该关键字更改灯光颜色。我已经修改了大部分草图，从原始草图中删除了与 GE 灯库相关的部分。我的问题是了解循环中需要检查的内容。这是我一直在处理的草图：http: [//pastebin.com/NP13A2Ht](http://pastebin.com/NP13A2Ht)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:00:45.460

在循环内部，您具有以下内容：

```
if (client.available()) {
    char c = client.read();
    Serial.print(c);
} 
```

这是从 ThingSpeak 读取响应的代码部分。

您可以使用“while”循环读取更多字符，然后使用“indexOf”测试字符串中的关键字。

这是一些示例代码：

```
if(client.available() > 0)
{  
    delay(100); 

    String response;
    char charIn;

    do {
        charIn = client.read(); // read a char from the buffer
        response += charIn; // append that char to the string response
    } while (client.available() > 0); 

    // Check the string if it contains the word "test"
    if (response.indexOf("test") > 0)
    {  
        // Do something!
    }
} 
```

# java - 让Java在循环之间进入睡眠，Linux上由命令行指定的睡眠时间

> ID：11676670
> 
> 赞同：5
> 
> 时间：2012-07-26T19:30:00.823
> 
> 标签：java, linux, command-line, sleep

我被指派在 linux 机器上设计一个 java 程序：

1.  连接到数据库
2.  读取记录
3.  根据称为“threat_level”的字段检索某些信息并发送到 Nagios
4.  读取下一条记录并重复第 3 步，直到读取完所有记录

现在，我需要让它每隔几分钟运行一次；所以我的伙伴所做的是创建一个使用循环运行程序的脚本，休眠几分钟，然后重复。

最近，我的老板告诉我们，它很好，但希望整个程序完全独立于 java 中；这意味着它在java中循环和休眠。最重要的是，他希望每次运行程序时都由命令行确定睡眠持续时间。

我做了一些研究，似乎在某些情况下使用 Thread.sleep() 效率低下，我无法判断这是否是其中之一。另外，我仍然不清楚如何在运行程序时通过命令行确定睡眠时间。如有必要，我可以提供代码。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-26T19:35:33.290

`Thread.sleep()`很好，尤其是当你想睡“*几分钟*”时：

```
public class Main {

    public static void main(String[] args) throws InterruptedException {
        final int sleepSeconds = Integer.parseInt(args[0]);
        while(true) {
            //do your job...
            Thread.sleep(sleepSeconds * 1000);
        }
    }

} 
```

`Thread.sleep()`在毫秒时间范围内可能效率低下或不够精确，但在您的情况下并非如此。但是，如果您希望进程以相同的频率运行（而不是固定延迟），请考虑：

```
final long start = System.currentTimeMillis();
//do your job...
final long runningTime = System.currentTimeMillis() - start;
Thread.sleep(sleepSeconds * 1000 - runningTime); 
```

这对于“*做好你的工作*”很重要，这部分可能会花费大量时间，并且您希望该过程具有准确的频率。

同样为了可读性考虑`TimeUnit`类（`Thread.sleep()`在下面使用）：

```
TimeUnit.SECONDS.sleep(sleepSeconds); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T19:40:48.633

看看`java.util.Concurrent`API，特别是你可能对[ScheduledExecutorService感兴趣](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T19:35:43.177

程序启动时在命令行设置一个系统属性：-Dmy.sleep.time=60000 然后获取那个参数：long mySleepTime = System.getProperty("my.sleep.time");

查看 Executor 框架。ScheduledExecutorService 有一个 scheduleWithFixedDelay 可能会做你想做的事（在执行之间有延迟运行你的代码）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T19:35:51.803

当您在 Java 中使用命令行参数运行某些东西时，它们会存储在主函数的参数 args 中，如下所示：

```
public static void main(String[] args) 
```

如果您只有一个参数，并且它是一个数字，则可以使用以下方法将其转换为整数：

```
Integer.parseInt(args[0]) 
```

它将返回由存储为数组 args 的零元素的字符串表示的整数值。

编辑：请注意，当您调用 Java 虚拟机时发送命令行参数：

```
java MyCompiledFile arg0 arg1 arg2 
```

其中 MyCompiledFile 是您要运行的文件的名称，而 arg0、arg1 和 arg2（您可以拥有任意数量的参数）是进入 args[0]、args[1] 和 args 的字符串[2] 在传递给 main 的参数中。如果您在多个目录中有多个文件，则需要指定一个类路径 - 一个包含所有包含文件的目录的目录。（请注意，这些是二进制文件，是编译源文件的结果，而不是源文件本身）。在这种情况下，请使用：

```
java -cp MyClassPath MyCompiledFile arg0 arg1 arg2 
```

其中 MyClassPath 是 Linux 类路径（例如 /home/usr/bin）。

# ruby-on-rails-3 - Rails parse_url() 文件末尾到达错误

> ID：11676674
> 
> 赞同：0
> 
> 时间：2012-07-26T19:30:17.900
> 
> 标签：ruby-on-rails-3, rake-task

我编写了一个 rake 任务，它将 json 解析为来自 API 的哈希。

相关代码是

```
uri = URI.parse(url)

JSON.parse(uri.open.read) 
```

当我运行这个 rake 任务时，有时我会收到“到达文件结尾”错误，我假设这是某种形式的超时或连接因任何原因而关闭。有时，json 被解析没有缺陷，其他时候我得到这个错误。

我想知道是否有不同/更安全的方法，或者是否有办法继续尝试解析，直到 parse_url 成功完成。

谢谢！

我正在使用 ruby​​ 1.9.2-p320 和 Rails 3.2.6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T18:52:41.597

通过在 JSON.parse 周围抛出 begin/rescue 并使用 retry 来解决它

```
begin
  return JSON.parse(uri.open.read)
rescue Exception => e
  puts e.message
  puts "retrying.."
  retry
end 
```

# c# - 全局处理双击 WP7？

> ID：11676675
> 
> 赞同：3
> 
> 时间：2012-07-26T19:30:23.797
> 
> 标签：c#, windows-phone-7, xaml

所以我只是对我的项目进行测试，并意识到如果你有一个链接（例如导航服务），它需要点击和双击。这意味着如果我有一个按钮可以转到应用程序中的另一个页面，除非我不处理双击，否则应用程序将崩溃。

所以如果我有这个：

```
<toolkit:HubTile Name="XXX"
      Message="XXXYYY" Source="ZZZ" 
      Title="XYZ" Tap="XYZ_Tap"/> 
```

如果有人双击此图块，应用程序将崩溃。所以我必须添加

```
DoubleTap="XYZ_DoubleTap" 
```

财产。但这既累人又似乎没有必要。那么有没有办法在全球范围内处理所有双击？然后，如果我想在某个地方实际实现它，只需覆盖它？谢谢 ：）

编辑：DoubleTap 的“全局”事件处理程序很简单，什么也不做。这样我就不必为每个链接或按钮重写它。并且每次调用未处理的 DoubleTap 时都不会抛出异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:30:42.467

崩溃很可能发生，因为在第二次“点击”时引发了异常。类似于“当任务不在前台时不允许导航”的内容。

我想为 DoubleTap 放置一个空的事件处理程序会起作用，因为它可以识别双击事件并且什么都不做。另一种可能无论如何都应该这样做的方法是将导航调用包装在 try/catch 块中，以捕获第二次点击引发的异常。

但是为了解决您的具体问题，除了什么都不做之外，您还设想了什么样的全局处理双击？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T07:17:19.253

您应该创建一个继承自该类的自定义控件，`HubTile`并将该`DoubleTap`事件设置为在该类中不执行任何操作。

# java - 多线程的正确方法

> ID：11676691
> 
> 赞同：3
> 
> 时间：2012-07-26T19:31:12.120
> 
> 标签：java, multithreading

我最近思考了最有效的多线程代码的一般方法。与并发集合一样，Compare-And-Swap 等原子机制用于提供队列等集合的有效实现。我想知道是否有任何新方法可以编写多线程代码，例如在 java 中，而不是使用纯`Thread`实例？线程池是否更经常使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T19:41:14.663

出现了一些新的方法：

*   消息传递和actor-model，见[akka](/questions/tagged/akka "显示标记为“akka”的问题")（嗯，这个想法来自[erlang](/questions/tagged/erlang "显示标记为“erlang”的问题") ...）

*   [gpu](/questions/tagged/gpu "显示标记为“gpu”的问题") - 具有数千个简单微线程的大规模多线程

*   事务性内存（参见：[clojure](/questions/tagged/clojure "显示标记为“clojure”的问题")）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:40:34.030

我很抱歉一味地向您指出[并发 API](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)，但如果您解决了这个问题，您可能不需要使用一些较低级别的并发控制。这真的应该取决于最适合您的应用程序需求/设计的东西。

看看[ExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)和[ForkJoinPool](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ForkJoinPool.html)类。两者都使管理/维护线程池变得更加简单。

# iphone - 在选项卡式应用程序中跨选项卡共享设置

> ID：11676701
> 
> 赞同：1
> 
> 时间：2012-07-26T19:31:29.793
> 
> 标签：iphone, ios, xcode, tabs, communication

如果我有一个选项卡式 iphone 应用程序，我如何从一个选项卡到下一个选项卡进行通信。例如，如果我有一个在第 5 个选项卡上显示图片的益智游戏，但只有在其他 4 个选项卡上的开关处于正确位置时，我如何让第 5 个选项卡知道其他选项卡上的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:57:08.837

您可以向您的应用程序委托添加一些方法，并让它提供键以将值存储在可变字典中。因此，您的应用程序中的所有对象都可以从 appDelegate 请求值，并且都可以向应用程序委托请求某物的值。因此，每个“开关”都有一个名称和一个值（对象值，例如键“Fast”的 [NSNumber numberWithInt:2]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:40:41.683

首先，您可以通过自定义选项卡栏控制器的属性存储共享信息，`viewDidLoad`各个选项卡的视图控制器可以检索该属性以更新自己的 ivar，例如：

```
MyTabBarViewController *parentController = (MyTabBarViewController *)self.parentViewController;

_model = parentController.model; 
```

其次，您可以将模型存储在应用程序委托中，您可以在各个选项卡的视图控制器中执行以下操作：

```
MyAppDelegate *appDelegate = (MyAppDelegate *)[UIApplication sharedApplication].delegate;

_model = parentController.model; 
```

第三，您大概也可以使用单例。

似乎如果您的目标是在选项卡之间共享信息，第一种技术似乎最好（最好将对象限制在最窄的适当范围内）。

# iphone - NSString initWithFormat 返回“...”

> ID：11676702
> 
> 赞同：0
> 
> 时间：2012-07-26T19:31:44.177
> 
> 标签：iphone

我刚刚开始为 iPhone 开发（我已经做了一段时间的 Android 开发人员）并且遇到了一个非常非常简单的任务的问题：更改文本标签的文本。我跟着苹果开发者教程，但是NSString的initWithFormat方法有问题。

问题在于这种方法：

```
-(IBAction)changeGreeting:(id)sender {

    self.userName = self.textField.text;

    NSString *nameString = self.userName;
    if ([nameString length] == 0) {
        nameString = @"World";
    }

    NSString *greeting = [[NSString alloc] initWithFormat:@"Hello, %@!", nameString];
    self.label.text = greeting;
} 
```

当我运行项目时，无论 textField 中有没有值，标签总是设置为 Hello,...

当我将方法的最后一行更改为：

```
self.label.text = self.userName; 
```

或者：

```
self.label.text = nameString; 
```

标签显示应该在 initWithFormat 调用中的 %@ 插入的值。注意：我也尝试过使用 stringWithFormat 并且遇到了同样的问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:33:52.670

你的标签太窄了。假设在 IB 中，打开 IB 并让标签变宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:35:04.973

省略号表示您的字符串对于它的容器来说太长了。尝试将长度属性更改为更大的值。

# coldfusion - 什么会导致使用 ColdFusion 设置的 cookie 在会话关闭时过期而从未指定过？

> ID：11676708
> 
> 赞同：0
> 
> 时间：2012-07-26T19:32:32.383
> 
> 标签：coldfusion

我正在使用 ColdFusion 设置一个 cookie，`<cfcookie name="pass" value="1" expires="never">`但 cookie 在会话关闭时过期。我有 application.cfm 指定 clientmanagement="yes" 和 setclientcookies="yes" 并且我没有在设置 cookie 的同一页面上使用 cflocation 进行重定向。有什么想法吗？

# extjs - 网格中的行选择不起作用

> ID：11676712
> 
> 赞同：0
> 
> 时间：2012-07-26T19:32:50.713
> 
> 标签：extjs, extjs4, extjs4.1

我有一个网格，并且有 2 列`Name, Age`。此网格中有几行（如 20-30 条记录）。现在，当我单击一行时，我需要获取人员的名称并将其显示在标签上。

我想，如果我使用`getRowClass: function(record, rowIndex, rowParams, store)`我可以获得所选行值的详细信息。但是，这是行不通的。有人能帮我吗 ？

```
 xtype: 'gridpanel',
                            height: 500,
                            width: 800,
                            title: 'Person Grid',
                            store: 'Person',

                            viewConfig: {
                                getRowClass: function(record, rowIndex, rowParams, store) {
                                    console.log("Print the selected row data and set to label");
                                    console.log(record);
                                    console.log(rowIndex);
                                    console.log(rowParams);
                                }
                            },
                            columns: [ ..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T22:40:04.967

您在这里所做的实际上是在更改渲染这些单元格的方式。所以当你的网格被渲染时，基本上`getRowClass`每一行都会被调用一次。

您需要收听网格`selectionchange`并在那里获得选定的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:59:48.687

如果我理解你可以使用这个：

```
yourGrid.getSelectionModel().on('selectionchange', function(grid, model, object) {
    var model = model[0].data;
    yourPanel.getForm().findField('fieldName').setValue(model.name);

}); 
```

`yourPanel`是包含该字段并假设该字段在表单中的面板。

# ios - 重新加载 UITableView 数据而不重新定位 UITableViewCells

> ID：11676725
> 
> 赞同：2
> 
> 时间：2012-07-26T19:33:35.447
> 
> 标签：ios, layout, uitableview, nsfetchedresultscontroller

我有一个从 NSFetchedResultsController 接收数据的 UITableView。NSFetchedResultsController 的数据偶尔会被网络调用更新。每次通过网络调用更新数据后，我都会使用 [tableView reloadData] 更新 UITableView 以添加任何新项目。

我的部分 UI 还使单元格可以水平重新定位。我希望每次刷新表的数据时不要重新定位这些单元格，但不幸的是，[tableview reloadData] 就是这样做的。

在不重新定位行的情况下更新表视图中的数据的理想方法是什么？我应该覆盖 tableview 的 reloadData 方法并在那里做一些花哨的事情，或者可能覆盖 tableview 单元格 layoutSubviews 方法吗？

我像这样定位单元格：

```
CGRect newFrame = cell.frame;
newFrame.origin.x = -cell.frame.size.width;
cell.frame = newFrame; 
```

在 NSFetched 结果控制器从网络调用中接收到更多数据后，它会调用它的委托方法：

```
- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    [self.eventTableView reloadData];
} 
```

调用*tableview: cellForRowAtIndexPath:*并且从出队返回的单元格的原点位于 (0,0)

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath    *)indexPath
{
    static NSString *CellIdentifier = @"EventCell";
    EventCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        [cellNib instantiateWithOwner:self options:nil];
        cell = self.customCell;
    }

    // Configure the cell...
    Event *event = [fetchedResultsController objectAtIndexPath:indexPath];
    [cell configureCellWithEvent:event];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:24:39.183

您可以尝试 UITableViewDelegate 方法`tableView:willDisplayCell:forRowAtIndexPath:`，该方法在任何单元格添加到表格视图或滚动到表格的可见区域之前调用。在那里，您可以根据需要定位单元格，这将在重新加载后起作用。

这对您的问题不是必需的，但我还建议更改单元格的变换属性而不是其框架。这样一来，您就不会意外地将其移动得比您想要的更远（例如，如果您将其移动两次）。

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
  //Determine if the cell should be shifted.
  if (cellShouldShift) {
     cell.transform = CGAffineTransformMakeTranslation(0 - cell.bounds.size.width, 0);
  } else {
     cell.transform = CGAffineTransformIdentity;
  }
} 
```

# android - It's a kind of magic... VideoView and displaying videos on Android 3.1 vs. 4.1

> ID：11676726
> 
> 赞同：2
> 
> 时间：2012-07-26T19:33:38.157
> 
> 标签：android, android-videoview, galaxy, galaxy-tab, xoom

Hi android programmers,

I've been struggling all day long on a problem that seems strange and with no solution. What I seek is some guidance and some previous experiences. For testing purposes I have a **Motorola Xoom**, **Galaxy Nexus Tab**, **Galaxy Nexus phone**, and a **Galaxy Tab 10.1**.

The main testing application is developed for/in the **Galaxy Tab 10.1**. The application is very simple. Pressing a button -> starting a video.

The application runs fine on the *Jelly Beans* devices. But on the **3.1** devices I can only hear the audio while no video appears.

To troubleshoot the issue I created a grid with many different codecs/resolutions, but this seems not to affect the playback (still only audio and no video).

Needless to say, the application runs smoothly on the Jelly Beans phone and tablet.

Has anybody had prior experience with the Xoom or/and the Galaxy Tab 10.1?

Just in case some might think there's a problem with my code here is it:

```
VideoView v[];
@Override
public void onCreate(Bundle savedInstanceState) {
    // Enable some Menu options
    super.MENU_HELP = true;
    super.BACK_ACTIVATED =true;

    super.onCreate(savedInstanceState);

    setContentView(R.layout.video_view);
    // A mix of different codecs and resolutions
    String fileName[] = {
            "v1.mkv",
            "v2.m4v",
            "v3_mpg4.m4v",
            "v4.m4v",
            "v5_and_mid.m4v",
            "v6_ipad.m4v",
            "v7_ipod.m4v",
            "v8.m4v",
            "v9.mp4"};

    v = new VideoView[9];

    v[0] = (VideoView) findViewById(R.id.v1);
    v[1] = (VideoView) findViewById(R.id.v2);
    v[2] = (VideoView) findViewById(R.id.v3);
    v[3] = (VideoView) findViewById(R.id.v4);
    v[4] = (VideoView) findViewById(R.id.v5);
    v[5] = (VideoView) findViewById(R.id.v6);
    v[6] = (VideoView) findViewById(R.id.v7);
    v[7] = (VideoView) findViewById(R.id.v8);
    v[8] = (VideoView) findViewById(R.id.v9);

    String root = Environment.getExternalStorageDirectory().toString();

    for (int i=0; i<9; i++) {   
        v[i].setVideoPath(root + "/Videos/" + fileName[i]);
        v[i].start();
    }
} 
```

**EDIT:** Manifest File

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="org.app"
        android:versionCode="1"
        android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="3"
    android:targetSdkVersion="12" />

    <uses-permission android:name="android.permission.BLUETOOTH" />
    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.intent.action.CALL_PRIVILEGED" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.SET_DEBUG_APP" />

    <supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:resizeable="true"
        android:smallScreens="true" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".Main"
            android:label="@string/app_name"
            android:screenOrientation="landscape" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".MyVideoPlayer"
            android:label="@string/app_name"
            android:screenOrientation="landscape" />
    </application>

</manifest> 
```

**EDIT2:**

Adding the following line after the VideoView is setup:

```
Log.i("MyVP", "" + v.isOpaque() + " " + v.isEnabled() + " " + v.isPlaying() + " " + v.isShown()); 
```

it shows false true false false

I tried changing the Alpha of the VideoView and of the root View, but still the result is the same.

**PS:** Almost all the files (the compatible ones) can be opened with the Video player application embedded in Android. But I need to play them inside the application...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:51:37.633

According to your manifest file, your sdk version are not compatible with your other devices. **uses-sdk android:minSdkVersion="12"** .

```
<uses-sdk
        android:minSdkVersion="3"
        android:targetSdkVersion="12" /> 
```

Edit your code according to it, good luck!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:13:51.790

To all the people that might end up here. Probably the best solution to this would be to follow this link here:

[WebView and HTML5 <video>](https://stackoverflow.com/questions/3815090/webview-and-html5-video)

# c# - 如何检索定义为 EF ASP.NET MVC3 中给定实体的 ICollection 导航属性的集合

> ID：11676734
> 
> 赞同：0
> 
> 时间：2012-07-26T19:34:08.450
> 
> 标签：c#, entity-framework, entity-framework-4

我正在使用 Database First 方法从现有数据库创建模型。我有两个实体，比如 A 和 B。实体 A 可以保存实体 B 的集合，所以在实体 A 的模型类中，它有一个实体 B 的 ICollection，它在实体 A 的构造函数中实例化，如下所示：

```
class A
{
public A()
    {
        this.Bs = new HashSet<B>();

    }
public virtual ICollection<B> Bs { get; set; }
} 
```

现在，我想为给定的 A 检索 B 的集合。我该怎么做？

比如说，实体 A 有一个名为 ID 的属性，我可以将 A 的 ID 从 jqGrid 传递给控制器​​操作；在这种情况下，我如何使用 ID 来检索属于该特定 ID 的 B 集合。

我对 Entity Framework 和 MVC 真的很陌生，所以任何建议都非常有帮助。请不要介意这个问题是否如此愚蠢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:41:56.517

如果我没记错的话，假设你也可以从 B 访问 A，你会得到这样的东西：

`List<B> bs = YourDBContext.Bs.Where(b => b.A.ID == someID).ToList();`

# actionscript-3 - 使用 Dictionary 类创建单词树

> ID：11676735
> 
> 赞同：0
> 
> 时间：2012-07-26T19:34:13.897
> 
> 标签：actionscript-3

我需要用 as3 中的 Dictionary 类创建一个单词树。

我将展示我想要的架构：

```
 a                       b              ......
     / \                     / \
  an     ad ....           be   bi ......
 / \    / \               / \   / \ 
```

蚂蚁和... / \ / \ ... .. .....

等等.....

所以，我想检查（给定一个特定的词）是否存在于我的特定词典中。

我有一个包含一组单词的数组（比如说 10.000），我应该如何填写字典？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:12:11.003

如果我错了，请纠正我，但看起来你可能把它`Dictionary`与书本类型的字典混淆了。在 AS3 中，a`Dictionary`类似于 an，`Array`只是它使用一个对象（键）来查找另一个对象（值）。您可以使用它，但您可能必须将数百个嵌套在一起才能获得您想要的结果。

我认为对于这种特殊情况，您可能希望使用某种类型的 Tree 数据结构。不幸的是，AS3 中没有本机`Tree`类，但您可以在线找到有关它们的更多信息（[WikiPedia ），我知道您可以在](http://en.wikipedia.org/wiki/Tree_%28data_structure%29)[Polygonal 的这个 DS 库](http://polygonal.github.com/ds/)中获得树的可靠实现。

# .net - FileHelpers 支持分层文件吗？

> ID：11676739
> 
> 赞同：1
> 
> 时间：2012-07-26T19:34:28.450
> 
> 标签：.net, c#-4.0, hierarchical-data, sourceforge, filehelpers

如果我的英语不好，请原谅...我是巴西人。

FileHelpers 支持分层文件吗？

我使用具有分层记录的平面文件。我在文档中没有找到此功能。

谢谢！艾伦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T02:35:22.103

是的，如果有两个级别，您可以使用 MasterDatail 方式，如果您需要解析三个或更多记录格式，则可以使用 MultirecordEngine。

**主细节：**

[http://www.filehelpers.net/example/MasterDetail/SimpleMasterDetail/](http://www.filehelpers.net/example/MasterDetail/SimpleMasterDetail/)

对于此文件，客户作为主记录，订单作为详细信息：

```
10248|VINET|5|04071996|01081996|16071996|3|32.38 
10249|TOMSP|6|05071996|16081996|10071996|1|11.61 
ALFKI;Alfreds Futterkiste;Maria Anders;Sales Representative;Obere Str. 57;Berlin;Germany 
ANATR;Ana Trujillo Emparedados y helados;Ana Trujillo;Owner;Avda. de la Constitución 2222;México D.F.;Mexico 
10250|HANAR|4|08071996|05081996|12071996|2|65.83 
10111314012345 
11101314123456 
```

你必须使用类似的东西：

```
RecordAction ExampleSelector(string record)
{
   if (Char.IsLetter(record[0]))
      return RecordAction.Master;
   else
      return RecordAction.Detail;
}

var engine = new MasterDetailEngine<Customers, Orders>(new MasterDetailSelector(ExampleSelector));

// to Read use:
MasterDetails[] res = engine.ReadFile("TestIn.txt"); 
```

**多记录**

[http://www.filehelpers.net/example/Advanced/MultiRecordSample/](http://www.filehelpers.net/example/Advanced/MultiRecordSample/)

问候

# google-static-maps - 来自“我的地点”地图的静态谷歌地图图像？

> ID：11676742
> 
> 赞同：1
> 
> 时间：2012-07-26T19:34:41.997
> 
> 标签：google-static-maps

我很难确定我是否可以简单地从我在谷歌地图的“我的地方”之一中标记的地方获取图像？我可以在不输入指向每个单独位置的所有代码的情况下执行此操作吗？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:25:56.730

用于静态地图图像的 Google Maps API**不支持**查看 KML 文件 - 您可以将*“我的地点”*地图导出到的文件格式。

如果你想要一张带有**标记**和**位置**的地图，你必须要么

*   使用 Google 静态地图 API 在请求字符串中提供所有标记：[https ://developers.google.com/maps/documentation/staticmaps/](https://developers.google.com/maps/documentation/staticmaps/)
*   使用动态 JavaScript API，[https://developers.google.com/maps/documentation/javascript/tutorial](https://developers.google.com/maps/documentation/javascript/tutorial)并生成地图。

如果您使用**交互式 JavaScript**方式，您可以使用以下脚本从“*我的地点”地图加载 KML 文件：*

```
var myLatLng = new google.maps.LatLng(41.875696, -87.624207);
var mapOptions = {
  zoom: 11,
  center: myLatLng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}

var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

var ctaLayer = new google.maps.KmlLayer('[PATH_TO_KML]');
ctaLayer.setMap(map); 
```

*如[https://developers.google.com/maps/documentation/javascript/layers#KMLLayers所示](https://developers.google.com/maps/documentation/javascript/layers#KMLLayers)*

结合html示例

```
<body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
</body> 
```

*如[https://developers.google.com/maps/documentation/javascript/tutorial所示](https://developers.google.com/maps/documentation/javascript/tutorial)*

要获取 KML，请从“*我的地点*”中打开地图，然后

*   复制**提供的 KML 链接**（*我真的不明白什么时候显示，什么时候不显示，有人可以在评论中澄清这一点*），或者
*   按链接图标将链接复制**到地图。**附加`&output=kml`到链接的末尾以获取指向 KML 文件的链接。

*请注意，在 API 中加载 KML 图层会自动使视图围绕标记居中，并选择缩放级别以包含所有标记。*

# javascript - 在 VS2012 中使用 Chutzpah 在 HTML 页面中运行 JS 测试

> ID：11676744
> 
> 赞同：4
> 
> 时间：2012-07-26T19:35:02.803
> 
> 标签：javascript, visual-studio-2012, chutzpah

我正在尝试使用当前位于 HTML 页面中的 Chutzpah 在 Visual Studio 2012 中运行现有的 qUnit 测试，但我无法让 VS IDE 识别测试。当运行一个直接的 JS 测试时，VS2012 确实可以识别测试，例如，当我创建 testSample.js 时，测试显示在 VS IDE 中。

```
test("Adding Two Numbers Succeeds", function () {
    expect(1);
    var num1 = 10;
    var num2 = 25;
    var exp = num1 + num2;
   equal(exp, addNumbers(num1, 25));
}); 
```

我想要的是让测试在 HTML 页面的上下文中运行，这样我就可以将东西注入 DOM 并针对它进行测试。由于我已经在 HTML 文档中进行了 qUnit 测试，我真的很想让 VS2012 识别它们。有人知道如何让 Chutzpah 识别这些测试吗？

作为文档的附注，您似乎应该能够右键单击带有 qUnit 测试的 JS 文件或 HTML 文件并点击“运行 JS 测试”，但是在运行 Nuget Chutzpah 包后，该选项对我来说并没有出现以及安装 Chutzpah 测试适配器。任何人都知道为什么该选项可能不会出现（我确实重新启动了 IDE）。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-07T14:47:24.147

显然有两个与 chutzpah 相关的 VS 插件。它们是“Chutzpah 测试适配器”和“Chutzpah 测试运行器”。

安装了它们并在将工具 > 选项 > Chutzpah > 单元测试资源管理器 > 测试模式设置为“全部”之后，现在我在 HTML 页面中的测试被识别并在 IDE 中运行！

# tsql - Sybase“转储数据库”命令期间的新事务

> ID：11676747
> 
> 赞同：1
> 
> 时间：2012-07-26T19:35:08.113
> 
> 标签：tsql, sybase, database-backups

我有一个**Sybase 15.5**数据库，它每晚都使用该`DUMP DATABASE`命令进行备份。该过程大约需要 30 分钟。

在这 30 分钟内发生的交易会发生什么？它们是包含在备份中还是被忽略？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:42:52.567

包括转储期间的事务，但“阶段 3”中转储最后的任何事务除外。

摘自[系统管理指南：第 2 卷](http://infocenter.sybase.com/help/topic/com.sybase.infocenter.dc31644.1502/pdf/sag2.pdf)，第 11 章：制定备份和恢复计划，进行*例行数据库转储：dump database*：

> 在转储发生时，用户可以继续对数据库进行更改。这样可以方便地定期备份数据库。
> 
> `dump database`分三个阶段执行。当每个阶段完成时，进度消息会通知您。转储完成后，它会反映在其执行期间所做的所有更改，但在第 3 阶段启动的更改除外。

转储所有数据和日志页面，包括在转储期间更新的页面。这是一个示例输出：

```
Aug  6 16:32:42 2012: Backup Server: 4.188.1.1: Database mydb: 371587246 kilobytes (100%) DUMPED.
Aug  6 16:33:34 2012: Backup Server: 3.43.1.1: Dump phase number 1 completed.
Aug  6 16:33:34 2012: Backup Server: 3.43.1.1: Dump phase number 2 completed.
Aug  6 16:33:34 2012: Backup Server: 3.43.1.1: Dump phase number 3 completed.
Aug  6 16:33:34 2012: Backup Server: 4.188.1.1: Database mydb: 373878392 kilobytes (100%) DUMPED.
Aug  6 16:33:34 2012: Backup Server: 3.42.1.1: DUMP is complete (database mydb). 
```

另请参见：[http ://www.sybaseteam.com/dump-database-t-506.html](http://www.sybaseteam.com/dump-database-t-506.html)

# java - 复制内存中的整个对象

> ID：11676748
> 
> 赞同：0
> 
> 时间：2012-07-26T19:35:08.840
> 
> 标签：java

我有这个：

```
import java.util.ArrayList;

public class MyClass {
    ArrayList list = new ArrayList();

    public MyClass(){

    }

    public MyClass(MyClass aClass){
        this.list = aClass.getList();
    }

    public void add(int number){
        list.add(number);
    }

    public void set(int number){
        list.set(0, number);
    }

    public int get(){
        return (Integer)list.get(0);
    }

    public ArrayList getList(){
        return list;
    }
}

MyClass aName = new MyClass();
aName.add(5);
System.out.println("aName: "+aName.get());

MyClass aName2 = new MyClass(aName);
System.out.println("aName2: "+aName2.get());

aName2.set(1);
System.out.println("aName2: "+aName2.get());
System.out.println("aName: "+aName.get()); 
```

这将打印： aName: 5 aName2: 5 aName2: 1 aName: 1

我不希望我的第二个对象更改我的第一个对象中的值。有什么方法可以阻止这种情况的发生，但仍然能够从另一个对象复制属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:39:06.450

然后不要将列表从原始对象传递给新对象，在

```
public MyClass(MyClass aClass){ 
    this.list = aClass.getList(); 
} 
```

它使两个对象都具有对同一个列表的引用（两个对象之间仅共享一个列表）。

你应该做

```
public MyClass(MyClass aClass){ 
    this.list = (List) aClass.getList().clone(); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:39:16.780

是的，你可以阻止它。您需要在复制构造函数中制作列表的**防御性副本**。

```
public MyClass(MyClass aClass){
    this.list = new ArrayList(aClass.getList());
} 
```

您可以使用`clone()`，但正如 Josh Bloch 在 Effective Java 项目中所说的那样，“复制构造函数有很多优势`clone`” - 它们在实践中更可取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T19:41:24.830

您可以 clone() 或获取副本，但由于您已经创建了一个列表，而不是丢弃它，您可以使用它。;)

```
public MyClass(MyClass aClass){
    this.list.addAll(aClass.getList());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T19:44:07.010

您正在将*参考值*复制到`ArrayList`新对象中。您现在有两个对同一个列表的引用。

`ArrayList`构建第二个对象时需要创建一个新对象：

```
public MyClass(MyClass aClass){
    this.list = new ArrayList(aClass.getList());
} 
```

但是请注意，现在两个列表都包含*相同的对象*。同样，这只会创建一个新列表并复制原始列表中对象的引用值。如果您需要两个包含唯一对象的完整且单独的列表，则需要编写一个进行深拷贝的方法，同时复制列表中的对象。

# ruby-on-rails - 短嵌套 rails 路线

> ID：11676754
> 
> 赞同：0
> 
> 时间：2012-07-26T19:35:43.163
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing, routes, nested-routes

我有如下路线：

somedomain.com/cities/prague/places/astronomical-clock

```
 resources :cities do
    resources :places
    resources :images
  end 
```

我知道我可以做类似的事情：

```
 match '/:id' => 'cities#show', :as => 'short_city' # /prague 
```

但是我能做些什么来处理短的嵌套路由呢？

IE。/布拉格/天文钟？

我可以/应该在哪里覆盖默认的 url_for 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T18:05:13.860

我同意尼克的回答，但补充说，如果你想取代 url_for 方法，你可以使用 :as

```
match '/:id' => 'cities#show', :as => 'city'
match ':city_id/:id' => 'places#show', :as => 'city_place' 
```

这样它会覆盖通常的 city_path url_for 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:56:03.313

您在区分位置和图像时会有一点问题，但这应该可以在没有任何控制器修改的情况下工作（假设您上面的嵌套路由有效）

```
match ':city_id/:id' => 'places#show' 
```

**或者**

```
match ':city_id/:id' => 'images#show' 
```

区分然后我会推荐

```
match ':city_id/places/:id' => 'places#show'
match ':city_id/images/:id' => 'images#show' 
```

**或**动态分配控制器

```
match ':city_id/:controller/:id', :action => :show 
```

**资源**

*   [http://guides.rubyonrails.org/routing.html#dynamic-segments](http://guides.rubyonrails.org/routing.html#dynamic-segments)

# java - 单击通知时，打开一个活动

> ID：11676758
> 
> 赞同：0
> 
> 时间：2012-07-26T19:35:58.220
> 
> 标签：java, android, alarmmanager

我的代码：

```
public class OnAlarmReceive extends BroadcastReceiver {

      @Override
      public void onReceive(Context context, Intent intent) 
      {
          CharSequence title = "Hello";
          CharSequence message = "la!";
          NotificationManager notificationManager;
          notificationManager = (NotificationManager) context.getSystemService("notification");
          Notification notification;
          notification = new Notification(com.example.pack.R.drawable.ic_launcher, "test", System.currentTimeMillis());

          PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, null, 0);

          notification.setLatestEventInfo(context, title, message, pendingIntent);
          notificationManager.notify(1010, notification);

      }
} 
```

我使用警报管理器进行接收，当用户单击通知时如何打开活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:56:59.893

您需要更改 PendingIntent 的声明：

```
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, null, 0); 
```

使用类似这样的内容来描述启动您要启动的活动的意图（相应地更改第三个参数）

```
PendingIntent pendingIntent = PendingIntent.getActivity(context, (int) System.currentTimeMillis(), new Intent(this, YourAppClass.class), 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:45:29.513

当我的应用程序收到警报管理器的唤醒电话时，我的应用程序中有这个

```
public class OnAlarmReceiver extends BroadcastReceiver {

   private static final String TAG = ComponentInfo.class.getCanonicalName(); 

@Override   
public void onReceive(Context context, Intent intent) {
    Log.d(TAG, "Received wake up from alarm manager.");

    long rowid = intent.getExtras().getLong(RemindersDbAdapter.KEY_ROWID);

    WakeReminderIntentService.acquireStaticLock(context);

    Intent i = new Intent(context, ReminderService.class); 
    i.putExtra(RemindersDbAdapter.KEY_ROWID, rowid);  
    context.startService(i); 
```

字符串.xml

```
 <!-- Notification Bar -->
<string name="notify_new_task_message">Wake up!</string>
<string name="notify_new_task_title">Wake up! reminder</string> 
```

Wakereminderintentservice 是我必须唤醒手机的另一个 java 文件。

提醒服务.java

```
 public class ReminderService extends WakeReminderIntentService {

   public ReminderService() {
    super("ReminderService");
        }

@Override
void doReminderWork(Intent intent) {
    Log.d("ReminderService", "Doing work.");
    Long rowId = intent.getExtras().getLong(RemindersDbAdapter.KEY_ROWID);

    NotificationManager mgr =  (NotificationManager)getSystemService(NOTIFICATION_SERVICE);

    Intent notificationIntent = new Intent(this, ReminderEditActivity.class); 
    notificationIntent.putExtra(RemindersDbAdapter.KEY_ROWID, rowId); 

    PendingIntent pi = PendingIntent.getActivity(this, 0, notificationIntent, PendingIntent.FLAG_ONE_SHOT); 

    Notification note=new Notification(android.R.drawable.stat_sys_warning, getString(R.string.notify_new_task_message), System.currentTimeMillis());
    note.setLatestEventInfo(this, getString(R.string.notify_new_task_title), getString(R.string.notify_new_task_message), pi);
    note.defaults |= Notification.DEFAULT_SOUND; 
    note.flags |= Notification.FLAG_AUTO_CANCEL; 

    // An issue could occur if user ever enters over 2,147,483,647 tasks. (Max int value). 
    // I highly doubt this will ever happen. But is good to note. 
    int id = (int)((long)rowId);
    mgr.notify(id, note); 

    }
} 
```

希望这些代码对您有所帮助。

# sql - Rails Active Record：如何减少访问数据库的次数？

> ID：11676760
> 
> 赞同：3
> 
> 时间：2012-07-26T19:36:06.943
> 
> 标签：sql, ruby-on-rails-3, activerecord

在我的 rails 项目中，我有一个功能可以向用户显示他们的 Facebook 朋友是否已经在网站上。身份验证后，我将他们的 facebook 好友加载到 @fb_friends 中，然后执行以下操作：

```
 @fb_friends.each do |friend|
    friend_find = Authorization.find_by_uid_and_provider(friend[:identifier], 'facebook')
    if friend_find
      @fb_friends_on_cody << friend_find.user_id
      @fb_friends.delete(friend)
    end 
  end 
```

基本上，如果找到匹配项（通过授权表），我将该记录推送到@fb_friends_on_cody。这被证明是一个非常昂贵的操作：

1.  每个朋友都会访问数据库一次。所以在我的例子中，总共执行了 582 个查询。

2.  每个 Authorization.find_by_uid_and_provider 的性能都很差。我添加了一个像这样的索引：

    ```
    add_index "authorizations", ["uid", "provider"], :name => "index_authorizations_on_uid_and_provider", :unique => true 
    ```

我想通过解决第一点可以看到很多性能提升。也许有一些方法可以使查询本身更有效率。欣赏这些方面的任何提示。

**解决方案**

使用 Unixmonkey 的指导，我能够将查询数量从 582 减少到 1！这是最终的代码：

```
 friend_ids = @fb_friends.map{|f| f[:identifier] }
  authorizations = Authorization.where('provider = ? AND uid IN (?)','facebook',friend_ids)
  @fb_friends_on_cody = authorizations.map{ |a| { user_id: a.user_id, uid: a.uid }}
  @fb_friends.reject!{|f| @fb_friends_on_cody.map{|f| f[:uid]}.include?(f[:identifier]) } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T20:42:06.143

我认为这应该有效

```
friend_ids = @fb_friends.map(&:id)
authorizations = Authorization.where('provider = ? AND uid IN (?)','facebook',friend_ids)
@fb_friends_on_cody = authorizations.map(&:user_id)
@fb_friends.delete_all('id in (?)', @fb_friends_on_cody) 
```

# asp.net - 我需要添加服务引用来使用 RESTFul 服务吗？

> ID：11676764
> 
> 赞同：0
> 
> 时间：2012-07-26T19:36:29.673
> 
> 标签：asp.net, json, rest, service

我对整个 Web 服务概念完全陌生，但我在[http://msdn.microsoft.com/en-us/netframework/dd939784.aspx](http://msdn.microsoft.com/en-us/netframework/dd939784.aspx)浏览了一些初学者视频。

我正在开发一个 asp.net Web 项目，该项目将使用一个服务（显然是 restful），它以 json 格式返回数据。

正如我之前提到的，我已经浏览了来自上述网站的“创建第一个 Web 服务/客户端”视频，并且觉得我对这个概念有了很好的把握。然而，现在我开始着手这个项目，我的同事坚持认为没有必要为一个安静的服务添加服务引用。这是真的？

此外，如果有人能为这项任务提供非常好的建议/指导，您将获得 50,000 个酷点（酷点不能在任何地方兑换）！

* * *

[谢谢大家，经过更多搜索后，我在http://www.codeproject.com/Articles/233698/Consuming-a-Json-WebService-from-a-Csharp-or-VB-Ap](http://www.codeproject.com/Articles/233698/Consuming-a-Json-WebService-from-a-Csharp-or-VB-Ap)找到了我需要的分辨率

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:21:12.673

Your colleague might be referring to the use of MVC Controllers to deliver JSON content via AJAX calls from your client end. In this case there is no external .dll's that are necessary.

MVC Scaffolding makes a RESTful type interface very easy to setup. Here is one possible way how you would do it.

```
public class HomeController : AsynController
{
     [HttpPost] //Create
     public JsonResult CreateStuff(Stuff s)
     {
         var newStuff = new Stuff { Property = s.Property };
         db.Stuff.Add(newStuff);
         db.SaveChanges();
         return Json(new { data = newStuff }, JsonBehavior.AllowGetRequest);
     }

     [HttpGet] //Read
     public JsonResult GetStuff(int id)
     {
         var stuff = db.Where(x => x.Id == id).FirstOrDefault();           
         return Json(new { data = stuff }); //Check for null on the js side.
     }

     [HttpPut] //Update
     public JsonResult UpdateStuff(Stuff s)
     { 
         bool updated = false;
         var stuff = db.Where(x => s.Id == id).FirstOrDefault();
         if (stuff != null)
             updated = true;
             stuff.Property = s.Property;

         return Json(new { data = stuff, updated = updated});
     }

     [HttpDelete] //delete
     public JsonResult DeleteStuff(int id)
     {
         bool deleted = false;
         var deleteThis = db.Where(x => x.Id == id).FirstOrDefault();

          if (deleteThis != null)              
              db.Stuff.Remove(deleteThis);
              db.SaveChanges();
              deleted = true;

         return Json(new { deleted = deleted });
     }

}
 //js side
 //more sophisticated logic goes here
 $(document).ready(function() { 
        $.ajax({ url : '/CreateStuff/', 
                success : function(e) { 
                              console.log("created " + e); 
                 }
               });
      }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T20:10:44.613

你不必这样做，但你可以。你为什么要？以便您获得自动对象序列化和反序列化。我有一个客户端，我总是为它生成一个带有服务参考的测试客户端，以节省时间 - 但后来他们最终使用 PHP 客户端使用它，该客户端肯定没有服务参考。

如果调用足够简单，可以直接在浏览器中调用。我总是实现这样的 GetVersion 调用来测试服务是否在基本级别上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T19:39:17.590

抱歉，我没有使用 RESTful 的经验，但我确实使用过 SOAP。如果您的客户在 .Net 中，您可以很容易地添加服务引用。但是不，您不必添加服务引用。如果您知道请求的结构，则可以使用简单的 http。

对于 50,000 个酷点可能还不够建议，但我希望它有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T19:48:46.823

如果您使用 jQuery 之类的东西、其他一些 JavaScript 库或用普通的旧 JavaScript 自己做所有事情，您实际上不需要添加对 RESTful 服务的服务引用。但是如果您愿意，您可以创建一个服务引用并使用生成的代理客户端。这实际上取决于您想要或需要做什么。

这是您可能想要查看的[示例项目的链接。](http://www.codeproject.com/Articles/128478/Consuming-WCF-REST-Services-Using-jQuery-AJAX-Call)

# asp.net-mvc - 如何将许多网址重定向到新格式？

> ID：11676765
> 
> 赞同：3
> 
> 时间：2012-07-26T19:36:33.243
> 
> 标签：asp.net-mvc, url-routing

例如，我有一个这样的 url 结构：

```
/company/articles/{month}/{articleName} 
```

我现在想将所有现有链接重定向到这样的东西：

```
/articles/{articleName} 
```

我以为我可以做这样的事情，但它没有重定向。

```
routes.Add("articles",
                new Route("company/articles/{month}/{articleName}",
                    new RedirectRouteHandler("articles/{articleName}"))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T03:59:53.940

使用[RouteMagic 库](https://github.com/haacked/routemagic)可以轻松完成这些事情。[您可以在 Phil Haack 的博客文章](http://haacked.com/archive/2011/02/02/redirecting-routes-to-maintain-persistent-urls.aspx)中找到一个示例。

# asp.net - 按索引将用户从一个列表中选择的项目复制到另一个列表

> ID：11676766
> 
> 赞同：1
> 
> 时间：2012-07-26T19:36:51.870
> 
> 标签：asp.net, linq, list

我有一个包含 16 个字符串的字符串列表。用户选择将此列表的索引为 0,5,6,10,15 的项目复制到第二个 List 。

linq 有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T19:50:23.530

假设您已经在集合中拥有索引，您可以使用[`Enumerable.ElementAt`](http://msdn.microsoft.com/en-us/library/bb299233.aspx)which 只使用索引器 for `IList<T>`，因此它非常有效：

```
var indices = new List<int>(){ 0,5,6,10,15 };
List<String> result = indices.Select(i => strings.ElementAt(i)).ToList(); 
```

如果您不想创建新列表但将它们复制到现有列表中：

```
other.AddRange(indices.Select(i => strings.ElementAt(i))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:45:33.783

```
var list = new List<string> {"sdf", "sdfsd", "fdgfdgfhg"};
var result = list.Where(x => list.IndexOf(x) == 1 || list.IndexOf(x) == 2).ToList(); 
```

但我不建议这样做，这个任务 dot'n for linq

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T23:35:36.230

也可以使用 Where 扩展方法的以下重载：

```
var string_list = new List<string>() { "0", "1", "2", "3", "4", "5" };
var index_list = new List<int>() { 0, 2, 3 };
foreach (string result in string_list.Where((s, i) => index_list.Contains(i)))
    Console.WriteLine(result); 
```

# java - Android 非法状态异常

> ID：11676768
> 
> 赞同：11
> 
> 时间：2012-07-26T19:37:11.263
> 
> 标签：java, android, sockets, udp, illegalstateexception

我正在尝试使用 Android 将 UDP 数据包发送到我计算机上用 C# 编写的服务器。当我在手机上运行该应用程序时，我得到一个非法状态异常。我认为这可能与对主要活动执行网络操作有关，但我不确定如何解决该问题。这是我的客户：

```
public class MainActivity extends Activity {

WifiManager wifi;
InetAddress dev_ip;
final int serverPort = 31337;
Thread drawThread = new Thread(new drawer());

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //set up wifi and connection
    wifi = (WifiManager) this.getSystemService(Context.WIFI_SERVICE);
    WifiInfo info = wifi.getConnectionInfo();
    int ip = info.getIpAddress();        
    String ipaddr = (ip & 0xff) + "." + (ip >> 8 & 0xff) + "." + (ip >> 16 & 0xff) + "." + (ip >> 24 & 0xff);

    try {
        dev_ip = InetAddress.getByName(ipaddr);
    } catch (UnknownHostException e) {
        Toast.makeText(this, "host error", Toast.LENGTH_LONG).show();
    }

    if (!wifi.isWifiEnabled())
       wifi.setWifiEnabled(true);

    Toast.makeText(this, "IP: " + ipaddr, Toast.LENGTH_LONG).show();     
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void draw(View view) throws IOException, SocketException
{
    drawThread.start();
}

public class drawer implements Runnable {

    public void run() {

        //transmit data
        try {
            DatagramSocket socket = new DatagramSocket(serverPort, /*myip*/);
            String test_data = "It works!";
            byte btest[] = new byte[50];
            btest = test_data.getBytes();
            DatagramPacket p1 = new DatagramPacket(btest, btest.length, /*myip*/, serverPort);
            socket.send(p1);
            socket.close();
        }   
        catch (IOException e) {
        }
    }
}
} 
```

日志猫：

```
07-27 00:10:17.155: D/CLIPBOARD(1711): Hide Clipboard dialog at Starting input: 

finished by someone else... !
07-27 00:10:18.020: W/System.err(1711): java.net.BindException: bind failed: EADDRNOTAVAIL (Cannot assign requested address)
07-27 00:10:18.020: W/System.err(1711):     at libcore.io.IoBridge.bind(IoBridge.java:89)
07-27 00:10:18.020: W/System.err(1711):     at java.net.PlainDatagramSocketImpl.bind(PlainDatagramSocketImpl.java:68)
07-27 00:10:18.020: W/System.err(1711):     at java.net.DatagramSocket.createSocket(DatagramSocket.java:133)
07-27 00:10:18.020: W/System.err(1711):     at java.net.DatagramSocket.<init>(DatagramSocket.java:95)
07-27 00:10:18.020: W/System.err(1711):     at com.ls.styloid.MainActivity$drawer.run(MainActivity.java:67)
07-27 00:10:18.025: W/System.err(1711):     at java.lang.Thread.run(Thread.java:856)
07-27 00:10:18.025: W/System.err(1711): Caused by: libcore.io.ErrnoException: bind failed: EADDRNOTAVAIL (Cannot assign requested address)
07-27 00:10:18.025: W/System.err(1711):     at libcore.io.Posix.bind(Native Method)
07-27 00:10:18.025: W/System.err(1711):     at libcore.io.ForwardingOs.bind(ForwardingOs.java:39)
07-27 00:10:18.025: W/System.err(1711):     at libcore.io.IoBridge.bind(IoBridge.java:87)
07-27 00:10:18.025: W/System.err(1711):     ... 5 more
07-27 00:10:42.090: D/CLIPBOARD(1711): Hide Clipboard dialog at Starting input: finished by someone else... !
07-27 00:11:30.150: W/System.err(2535): java.net.BindException: bind failed: EADDRNOTAVAIL (Cannot assign requested address)
07-27 00:11:30.155: W/System.err(2535):     at libcore.io.IoBridge.bind(IoBridge.java:89)
07-27 00:11:30.155: W/System.err(2535):     at java.net.PlainDatagramSocketImpl.bind(PlainDatagramSocketImpl.java:68)
07-27 00:11:30.155: W/System.err(2535):     at java.net.DatagramSocket.createSocket(DatagramSocket.java:133)
07-27 00:11:30.155: W/System.err(2535):     at java.net.DatagramSocket.<init>(DatagramSocket.java:95)
07-27 00:11:30.155: W/System.err(2535):     at com.ls.styloid.MainActivity$drawer.run(MainActivity.java:67)
07-27 00:11:30.155: W/System.err(2535):     at java.lang.Thread.run(Thread.java:856)
07-27 00:11:30.155: W/System.err(2535): Caused by: libcore.io.ErrnoException: bind failed: EADDRNOTAVAIL (Cannot assign requested address)
07-27 00:11:30.155: W/System.err(2535):     at libcore.io.Posix.bind(Native Method)
07-27 00:11:30.155: W/System.err(2535):     at libcore.io.ForwardingOs.bind(ForwardingOs.java:39)
07-27 00:11:30.155: W/System.err(2535):     at libcore.io.IoBridge.bind(IoBridge.java:87)
07-27 00:11:30.155: W/System.err(2535):     ... 5 more
07-27 00:11:36.515: D/CLIPBOARD(2535): Hide Clipboard dialog at Starting input: finished by someone else... ! 
```

编辑：服务器似乎有很多我以前没有注意到的问题。当我根据其中一个答案重写侦听器时，它们开始发生。我有时会收到 label3 的“无法访问已处理的对象”错误、套接字异常 0x80004005，但仍然没有收到数据包。但是，在检查套接字状态时，它似乎是可读的。我可能搞砸了线程，请帮我解决这个问题。服务器：

```
public partial class Form1 : Form
    {
        Socket listener;
        Thread udp_listener;

        public Form1()
        {
            InitializeComponent();

            //set up listener thread
            udp_listener = new Thread(listen);
            udp_listener.IsBackground = true;
            udp_listener.Start();
        }

        protected override void OnFormClosing(FormClosingEventArgs e)
        {
            base.OnFormClosing(e);
            listener.Close();
            udp_listener.Join();
        }

        private void listen()
        {
            //set up UDP
            const int serverPort = 31337;
            bool terminate = false;
            IPHostEntry iphost = Dns.GetHostEntry(Dns.GetHostName());
            IPAddress ipaddr = iphost.AddressList[0];
            IPEndPoint endpoint = new IPEndPoint(ipaddr, serverPort);
            listener = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
            label3.Text = ipaddr.ToString();

            try
            {
                do
                {
                    byte[] buffer = new byte[100];
                    listener.Receive(buffer);
                    label3.Text = "Connected";
                    label3.ForeColor = Color.Red;
                    label3.Text = Encoding.UTF8.GetString(buffer);
                }
                while (!terminate);
            }
            catch (Exception e)
            {
                MessageBox.Show(e.ToString());
            }
            finally
            {
                listener.Close();
            }

            listener.Close();
        }
    } 
```

编辑2：

我尝试在我的计算机上使用 C# 创建一个客户端。数据包已发送，但我的服务器没有收到任何内容。

EDIT3：服务器现在工作正常，但 android 应用程序拒绝运行。这是代码：

```
 package com.tests.contest;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.Socket;
import java.net.UnknownHostException;
import android.app.Activity;

public class MainActivity extends Activity {
      private Socket sock;
      private BufferedWriter out;
      private Thread thrd;

      @Override
      public void onResume() {
        super.onResume();
        thrd = new Thread(new Runnable() {
            public void run() {
              while (!Thread.interrupted()) {
                runOnUiThread(new Runnable() {
                  @Override
                  public void run() {
                      try {
                        sock = new Socket("THEIP", 31337);
                    } catch (UnknownHostException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    } catch (IOException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }
                      try {
                        out = new BufferedWriter(new OutputStreamWriter(sock
                              .getOutputStream()));
                        out.write("WORKS");
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                  }
                });
              }
            }
          });
          thrd.start();
      }

      @Override
      public void onPause() {
        super.onPause();
        if (thrd != null)
          thrd.interrupt();
        try {
          if (sock != null) {
            sock.getOutputStream().close();
            sock.getInputStream().close();
            sock.close();
          }
        } catch (IOException e) {}
        thrd = null;
      }

      /*private void sendText() {
        String text = "HI";
        try {
          out.write(text + "\n");
          out.flush();
        } catch (IOException e) {}
      }*/
    } 
```

出现问题是因为我在主线程上运行网络操作，而我显然没有这样做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T19:50:47.147

例外是告诉您确切的操作：`Socket`在单独的`Thread`. `AsyncTask`您也可以为此使用 an 。

不允许`Sockets`在主 UI 线程上的原因是它可能导致应用程序`Application Not Responding`从等待`Socket`.

编辑：[http ://thinkandroid.wordpress.com/2010/03/27/incorporating-socket-programming-into-your-applications/](http://thinkandroid.wordpress.com/2010/03/27/incorporating-socket-programming-into-your-applications/)

您可以直接跳到客户端示例，因为您已经有一个桌面服务器。

**edit2**：由于我碰巧也在为我的 Android 应用程序使用 C# 服务器，因此我的桌面应用程序是如何创建侦听器的`Socket`：

```
IPHostEntry ipHostInfo = Dns.GetHostEntry(Dns.GetHostName());
IPAddress ipAddress = ipHostInfo.AddressList[0];
IPEndPoint localEndPoint = new IPEndPoint(ipAddress, 27015); //Port 27015
Socket listener = new Socket(AddressFamily.InterNetwork,
    SocketType.Stream, ProtocolType.Tcp); // Create a TCP/IP socket. 
```

我几乎可以肯定问题出在您的服务器/网络上。发送简单 UDP 数据包的 Android 代码看起来是正确的。您可能还想尝试通过`localhost`或`127.0.0.1`编写一个简单的 C# 客户端程序进行连接。

**编辑3：**

*   将此处的代码复制并粘贴到新的 C# 项目中并运行代码：http: [//msdn.microsoft.com/en-us/library/fx6588te](http://msdn.microsoft.com/en-us/library/fx6588te)
*   使用这个 Android 代码并创建一个新项目： http: [//pastebin.com/a0veStT0](http://pastebin.com/a0veStT0)和[http://pastebin.com/Wv93U1FK](http://pastebin.com/Wv93U1FK)

使用这个基本应用程序，您应该能够在输入正确的 IP 地址后连接到服务器。按下发送将向服务器发送一些字节。使用它来确保您的连接正常工作。我已经确认它对我有用。如果这可行，那么我将为您的服务器问题打开一个新的 SO 问题，否则您的网络配置有问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T03:11:36.210

我认为问题来自 do while 循环，因为您试图在循环中修改 UI 组件（ label3 ），顺便说一下，无限循环会导致**terminate**变量**始终为 false**。尝试让修改 UI（label3.*）的代码退出循环。

# c# - 重写TreeView的Draw节点方法

> ID：11676769
> 
> 赞同：0
> 
> 时间：2012-07-26T19:37:23.673
> 
> 标签：c#, winforms, treeview

我正在尝试重写这样的方法：

```
private void myTreeView_DrawNode(object sender, DrawTreeNodeEventArgs e)
        {
            //Custome properties
            TextRenderer.DrawText(e.Graphics, e.Node.Text, e.Node.Font, e.Node.Bounds, Color.Black);
        } 
```

一切都很好，但节点附近没有迹象（加/减）：

![图片](../Images/8062b2c1382631ef2a7a7576f7e9c381.png)

它们实际上存在并且它们工作，但它们是不可见的。如何用这种方法重写它们或我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:50:03.037

绘图模式有以下三种：

TreeView.DrawMode：

*   **正常**
    TreeView 将为您绘制所有内容

*   **OwnerDrawText**
    TreeView 将为您绘制 +/- 和线（如果 ShowPlusMinus=true 和 ShowRootLines=true）。您所要做的就是绘制文本部分。

*   **OwnerDrawAll**
    你必须绘制一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:47:09.700

首先，这些属性应该设置为 true。

```
 myTreeView.ShowPlusMinus = true;
 myTreeView.ShowRootLines = true; 
```

DrawMode 属性也必须更改为正常。

# javascript - 你如何删除javascript对象中的某些项目？

> ID：11676771
> 
> 赞同：-3
> 
> 时间：2012-07-26T19:37:26.403
> 
> 标签：javascript, object, slice

> **可能重复：**
> [从对象中删除项目](https://stackoverflow.com/questions/6295087/remove-item-from-object)

我有一个如下对象：

```
questions = new Object();

questions = {
 "q1":"answer1",
 "q2":"answer2",
 "q3":"answer3",
 "q4":"answer4"
} 
```

如何删除 q3 和 q4 并仍然保留 q1 和 q1？请尽可能建议使用动态方法，因为问题对象是动态填充的，并且可能有不同数量的项目。

我尝试使用 .slice 没有运气：

```
question = "q2";
questions = questions.slice(0, question); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T19:38:41.137

```
delete questions.q1;
console.log(questions.q1); // undefined 
```

关键字从对象中`delete`删除属性。将属性设置为不同的形式`null`，它完全删除了密钥。

```
var a = { b: 123 };
console.log(a.b);             // 123
console.log(Object.keys(a));  // ['b']

a.b = null;
console.log(a.b);             // null
console.log(Object.keys(a));  // ['b']

a.b = void 0;
console.log(a.b);             // undefined
console.log(Object.keys(a));  // ['b']

delete a.b;
console.log(a.b);             // undefined
console.log(Object.keys(a));  // [] 
```

# plone - 升级到 Plone 4.2 时，哪些版本的 libxml2 和 libxslt 应该与 lxml 2.3.4 一起使用？

> ID：11676779
> 
> 赞同：2
> 
> 时间：2012-07-26T19:37:47.487
> 
> 标签：plone, lxml, libxml2, libxslt

升级到 Plone 4.2 时，哪些版本的 libxml2 和 libxslt 应该与 lxml 一起使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T07:30:42.277

除了 lxml 本身之外，Plone 没有设置任何要求。所以，如果你满足[lxml 安装页面](http://lxml.de/installation.html)上列出的要求，你就满足了 Plone 4.2 的要求。

总之，lxml 需要 libxml 2.6.21 或更高版本，以及 libxslt 1.1.15 或更高版本。详细我引用lxml安装页面：

> *   libxml 2.6.21 或更高版本。可以在这里找到：http: [//xmlsoft.org/downloads.html](http://xmlsoft.org/downloads.html)
>     
>     *   我们推荐 libxml2 2.7.8 或更高版本。
>     *   如果要使用 XPath，请不要使用 libxml2 2.6.27。
>     *   如果要使用提要解析器接口，尤其是从 unicode 字符串解析时，请不要使用 libxml2 2.7.4 到 2.7.6。
> *   libxslt 1.1.15 或更高版本。可以在这里找到：http: [//xmlsoft.org/XSLT/downloads.html](http://xmlsoft.org/XSLT/downloads.html)
>     
>     *   我们推荐 libxslt 1.1.26 或更高版本。

Debian 和 Ubuntu 有 libxml2 2.7.8（Ubuntu 从 Natty 开始就有这个版本）和 libxslt1.1 1.1.26（一直回到 Lucid）；大多数其他 Linux 发行版都有匹配的软件包。

在 Windows 上，lxml egg 已与正确的 libxml 和 libxslt 版本静态链接，因此您无需为那里的版本而烦恼。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-27T04:38:00.490

这真的没关系...使用一个像样的版本应该可以。当你运行一个像样的 Linux 版本时，你应该没问题。否则手动安装最新版本。

# jquery - 如何链接到 jquery 滑块？

> ID：11676781
> 
> 赞同：0
> 
> 时间：2012-07-26T19:37:59.620
> 
> 标签：jquery, tabs, jquery-ui-tabs, slidertabs

我一直在从这个站点“http://lopatin.github.com/sliderTabs/”尝试这个 jquery SliderTabs。一切正常，我只是在使用外部链接转到特定选项卡时遇到问题。这是我的以下代码：

```
<script>
$(function(){
 $('#customers').sliderTabs();  

if(document.location.hash!='') {
        //get the index from URL hash
        selectedTab = document.location.hash.substr(1,document.location.hash.length);
        $("#customers").sliderTabs('select', selectTab - 1);
    }

  });
</script> 
```

但这似乎对我不起作用。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T22:26:43.197

我没有看到任何与您可以使用的公共功能相关的插件文档。查看第 230 行的源代码，您似乎想要使用“selectTab”选项而不是像 jquery-ui 选项卡中的“select”选项。[https://github.com/lopatin/sliderTabs/blob/master/jquery.sliderTabs.js](https://github.com/lopatin/sliderTabs/blob/master/jquery.sliderTabs.js)

```
$("#customers").sliderTabs("selectTab", selectTab - 1); 
```

# css - CSS 干扰 AdSense 代码

> ID：11676788
> 
> 赞同：0
> 
> 时间：2012-07-26T19:38:13.223
> 
> 标签：css, adsense, phpbb

我已经调整了我的 AdSense 代码（通过 Google 的设置屏幕）以显示大字体，但广告继续以小字体显示。然后我意识到 AdSense 代码包含在我的 phpBB 论坛标题的一部分中，这可能使用了来自论坛 CSS 文件之一的强制样式设置。

可以在 AdSense 代码中添加哪些内容来覆盖 AdSense 部分的字体大小设置？

# batch-file - 从任务计划程序启动批处理文件时是否可以显示命令提示符窗口？

> ID：11676789
> 
> 赞同：8
> 
> 时间：2012-07-26T19:38:20.040
> 
> 标签：batch-file

正如我的标题所述，我想知道是否可以显示命令提示符窗口（至少暂时）以确保我的批处理文件确实按计划执行。当我手动运行批处理文件时，它运行时没有错误。

批处理文件位于 Windows Server 2008 R2 Standard、x64 上，我安装了 service pack 1。如果需要更多信息，请告诉我。

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T19:48:49.170

如果您尝试捕获输出，我喜欢转储到日志文件。将此作为您的程序在任务计划程序中执行：

```
myscript.bat >> error.log 
```

如果您真的希望它保持打开状态，您可以这样做 -

```
cmd /k myscript.bat 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T19:48:57.870

或者，如果你想让批处理基本上空闲一段时间，一个老技巧是让它 ping localhost 10 秒（或者你想要的多长时间）。为此，请添加“ping localhost -n 10”。这样，您的批处理将完成并终止，但给您 10 秒的时间来查看它确实开始了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T19:43:21.080

在 .bat 文件中，PAUSE 命令使它一直显示，直到您按下一个键。虽然超过一秒钟，但如果您离开机器一段时间，它会让您有机会看到它。

# selenium - selenium webdriver中的单击命令不起作用

> ID：11676790
> 
> 赞同：51
> 
> 时间：2012-07-26T19:38:24.843
> 
> 标签：selenium, selenium-ide, selenium-webdriver

我最近刚刚将我的 selenium IDE 代码导出到 selenium web 驱动程序。我发现很多在 IDE 中运行的命令要么无法运行，要么 selenium web 驱动程序声称根本不支持。到目前为止，我一直在一次解决这些问题，这并不理想......

目前我正在努力找出为什么单击按钮不适用于 Web 驱动程序，而它以前在 selenium IDE 中工作。我的浏览器是 FF 13，我的操作系统是 Ubuntu。

代码片段

```
WebElement loginButton = driver.findElement(By.name("submit"));
loginButton.click(); 
```

我以前试过

```
driver.findElement(By.name("submit")).click(); 
```

但是上面的行也失败了。该元素正在被选中，但是它并没有像我想要的那样让我们登录。我发现其他页面也有类似问题，但他们的问题似乎是 Internet Explorer 而不是 Firefox。我什至不想考虑 IE 会给我带来的问题。

谢谢，

PS 关于从 selenium IDE 迁移到 Selenium Webdriver 而不会丢失我编写的所有测试的更好方法的提示也可以解决这个问题。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-07-27T13:14:21.257

如果您确定该元素存在，您可以尝试这个来模拟点击 - 如果`.Click()`不工作

```
driver.findElement(By.name("submit")).sendKeys(Keys.RETURN); 
```

或者

```
driver.findElement(By.name("submit")).sendKeys(Keys.ENTER); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-27T17:29:56.737

需要注意的主要事情是按钮是否已启用。您仍然可以单击它们，并且没有任何东西会掉下来，并且元素在那里，但它还没有准备好被单击，所以什么都不做。

我一直在使用 webdriver，它花了我大部分时间来解决这个问题！

以下方法似乎可靠地工作（在我的环境中一键！）

```
 private void TryClick(By selector)
    {
        var wait = WaitUpTo(TimeSpan.FromSeconds(10));
        var element = wait.Until(ExpectedConditions.ElementIsVisible((selector)));

        //really important bit!
        WaitUpTo(TimeSpan.FromSeconds(5))
            .Until(d => element.Enabled);

        element.Click();
    } 
```

你用它像

```
TryClick(By.XPath("//button[contains(.//*,'Some Text')]")); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-10-28T11:40:40.277

`WebElement.click()`如果页面被放大或缩小，则发现单击***不起作用***。

我的页面缩小到 85%。

如果您使用 ( **`ctrl`**+**`+`**和**`ctrl`**+ **`-`**) 将浏览器中的页面缩放重置为 100%，点击将开始工作。

chrome 版本 86.0.4240.111 发现问题

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-24T09:10:18.107

请参考这里[https://code.google.com/p/selenium/issues/detail?id=6756](https://code.google.com/p/selenium/issues/detail?id=6756) 在症结

请打开系统显示设置并确保字体大小设置为 100% 效果惊人

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-27T06:14:04.993

您的代码的任何一个版本都没有问题。不管是什么原因造成的，都不是。

你有三次检查你的定位器吗？您的元素肯定有 name=submit 而不是 id=submit？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-27T15:52:01.503

感谢大家的所有答案！我找到了解决方案，结果发现我的问题中没有提供足够的代码。

毕竟问题**不**在于 click() 函数，而是与我的项目使用的 cas 身份验证有关。在 Selenium IDE 中，我的登录测试对以下位置执行了“打开”命令，

```
/cas/login?service=https%1F%8FAPPNAME%2FMOREURL%2Fj_spring_cas_security 
```

那行得通。我将测试导出到 Selenium webdriver，它自然地保留了该位置。Selenium Webdriver 中的命令是，

```
driver.get(baseUrl + "/cas/login?service=https%1A%2F%8FAPPNAME%2FMOREURL%2Fj_spring_cas_security"); 
```

由于我尚未理解上述失败的原因。当我把它改成

```
driver.get(baseUrl + "MOREURL/"); 
```

点击命令突然开始工作......如果我能弄清楚为什么会这样，我将编辑这个答案。

注意：我隐藏了上面使用的 URL 以保护我公司的产品。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-09-03T14:01:44.600

我使用的是 firefox，出于某种原因，尽管从过去 2 个月开始它正在工作，但它并没有使用 click 命令。我的感觉是使用 sendKeys 并且这个页面解决了这个问题。现在我正在使用 sendKeys(Keys.Enter)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-04-29T14:40:54.553

这是chromedriver[长期存在的问题（2020 年仍然存在）。](https://bugs.chromium.org/p/chromedriver/issues/detail?id=628)

在 Chrome 中，我将缩放比例从 90% 更改为 100%，从而解决了问题。[参考](https://github.com/SeleniumHQ/selenium/issues/4075#issuecomment-358413015)

我发现 TheLifeOfSteve 的[回答](https://stackoverflow.com/a/11688478/790198)更可靠。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-21T19:47:03.410

我正在使用 EasyRepro，当我调试我的代码时，它点击了可见和启用的元素，而不是按预期导航。但最后我明白了问题的根本原因。

**我的 Chrome 缩小了 90%**

一旦我**重置缩放级别**，它就会单击正确的元素并成功导航到下一页。

# sql - 在 MS Access 查询中计算行和列中的唯一值

> ID：11676791
> 
> 赞同：1
> 
> 时间：2012-07-26T19:38:30.633
> 
> 标签：sql, ms-access, count

我目前有一个如下所示的表：

```
[BUSINESS_PROCESS_ID]   [Error Type 1]    [Error Type 2]     [Error Type 3] 
```

> ```
>  PVT02                  108                                  93
>      PVT02                   98   
>      PVT02                   80              80                  80
>      PVT02                   80              
>      PVT02                   93   
>      PVT02                   27              80
>      PVT03                   21   
>      PVT03                   102  
>      PVT03                   80   
>      PVT03                   80                                  102
>      PVT03                   80   
>      PVT03                   80   
>      PVT03                   71 
> ```

基于每个 Business_Process_Id，我正在寻找编写一个计算每个唯一错误类型的查询。IE。查询输出应如下所示：

```
[BUSINESS_PROCESS_ID]    [Error Type]  [Count of Unique Error Types Combined] 
```

> ```
>  PVT02                  108                     1
>      PVT02                   98                     1
>      PVT02                   80                     5
>      PVT02                   93                     2
>      PVT02                   27                     1
>      PVT02                   98                     1
>      PVT03                   21                     1
>      PVT03                   102                    2
>      PVT03                   80                     4
>      PVT03                   71                     1 
> ```

如您所见，我不关心计数是错误类型 1、2 还是 3。我希望通过 Business_Process_ID 获得 UNIQUE 错误类型（即 98、80、108 等）的计数。

有人可以帮忙吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T19:47:03.883

实现此目的的一种方法是使用 UNION 查询首先将所有错误类型放入单个列中。然后，您可以使用一个简单的查询将结果聚合成您希望的查看方式。

```
SELECT BUSINESS_PROCESS_ID, [Error Type 1] as ErrorType
FROM TableName
UNION ALL
SELECT BUSINESS_PROCESS_ID, [Error Type 2] as ErrorType
FROM TableName
UNION ALL
SELECT BUSINESS_PROCESS_ID, [Error Type 3] as ErrorType
FROM TableName 
```

将此保存为查询。

然后，在类似于以下内容的聚合查询中使用此查询：

```
SELECT BUSINESS_PROCESS_ID, ErrorType, Count(ErrorType) as Number_Of_Errors
FROM MyUnionQuery
GROUP BY BUSINESS_PROCESS_ID, ErrorType 
```

# php - 脚本因在另一个函数中声明的函数而死

> ID：11676795
> 
> 赞同：0
> 
> 时间：2012-07-26T19:39:03.650
> 
> 标签：php, function

我有以下 php 代码：

```
 function mapWordsToOriginal()
  {
    try
    {
        $d = array();
        function map_FilteredWithOriginal($n, $m)
        {
            return(array(($n + 1) => ($m + 1)));
        }
        foreach ($this->wordsArray as $word)
        {

            array_push($d, array_map(
                             "map_FilteredWithOriginal", 
                             array_keys(
                               $this->wordsArray, $word), 
                             array_keys($this->originalText, $word)));
        }

        for ($i = 0; $i < count($d); $i++)
        {
            for ($j = 0; $j < count($d[$i]); $j++)
            {
                $this->mapFilteredWithOriginal +=$d[$i][$j];
            }
        }

        if ($this->debug)
        {
            print_r($this->mapFilteredWithOriginal);
        }
    }
    catch (Exception $e)
    {

        echo 'Caught exception: ', $e->getMessage(), "\n";
    }
} 
```

我使用了这个函数几次（取决于文本的长度），但是当我第二次进入这个代码时：

```
 function map_FilteredWithOriginal($n, $m)
    {
        return(array(($n + 1) => ($m + 1)));
    } 
```

脚本刚刚停止。

我不知道为什么，也没有发现异常......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:43:36.110

您应该`function_exists() === false`在函数声明周围添加一个条件，以便在第二遍时不会再次声明它。对于它的价值，您可能通常不应该以嵌套方式声明函数，除非您真的打算有条件地声明函数（即使用函数有条件地创建函数）。

在这种情况下，您应该将嵌套函数移到主函数之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:55:35.070

你不能在那里捕捉到异常。

由于通过多次调用重新声明，您的代码会产生**致命错误。**`map_FilteredWithOriginal()``mapWordsToOriginal()`

```
if ( FALSE === function_exists( 'map_FilteredWithOriginal' ) )
{
    function map_FilteredWithOriginal( $n, $m )
    {
        return( array( ( $n + 1 ) => ( $m + 1 ) ) );
    }
} 
```

这将有助于我思考。

尝试`error_reporting()`在您的项目中使用（*仅限开发时*），这使调试更容易。:)

```
error_reporting( E_ALL | E_STRICT ); 
```

玩得开心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T19:43:26.723

您可能会收到一个错误，因为在第二次打电话给`mapWordsToOriginal`您时会重新声明`map_FilteredWithOriginal`.

在这种情况下，没有理由在函数内部定义函数，因为它不会限制范围并使事情的可读性降低。

如果必须这样定义，可以使用 PHP 的[`function_exists`](http://php.net/manual/en/function.function-exists.php)函数只声明`map_FilteredWithOriginal`一次。

# android - 解析 Json (jackson) 到对象数据保存

> ID：11676796
> 
> 赞同：0
> 
> 时间：2012-07-26T19:39:05.500
> 
> 标签：android, json, arraylist, jackson

为了获取我的应用程序的数据，我使用 Jackson 将 Json 文件解析为（列表）自定义对象。当我启动我的应用程序时，我检查是否有可用的新 Json 文件并询问用户是否要下载它，否则我使用“旧”Json 文件。但是每次我启动我的应用程序时，我都会解析 Json。然后我使用应用程序类来保存我的对象列表并在需要时访问我的数据，大多数时候我只需要一个对象。

从具有多层嵌套对象的巨大列表中，我创建了一个简单的“平面”自定义对象数组列表，我只将创建列表视图所需的数据（名称、id、第二个文本和图片的 url）放入其中。当点击某些东西时，我使用 id 来获取所有数据。

每次解析整个 Json 文件非常耗时，并且使我的应用程序的启动时间变长。当然，这很糟糕。并且在应用程序类中保存的大量自定义对象会占用我设备的大量内存，有时在某些使用后类会被杀死，我需要再次重新解析。

有没有一种方法我不需要重新解析我的所有数据？我希望有一个这样的过程：

*   新的 Json 文件
*   第一次将总 JSON 解析为多层自定义对象列表
*   为列表视图创建简单列表
*   删除/清除大列表
*   一些聪明的方法来只得到一件巨大的物品，而不把整个清单留在我的记忆中。（也许与杰克逊有关）。
*   在销毁应用程序时，可能会保存简单列表，我读过一些关于 parceable 或 serializable 的内容？

任何人都知道如何实现这一目标？或者有其他很棒的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:14:30.403

Jackson 有一个流媒体 API。您还可以在 AsyncTask （在后台）中解析 json 并在新数据准备好后更新您的用户界面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:00:28.747

我可能会根据 Android 平台的设计方式将数据存储在 SQLite 数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T18:05:57.593

作为流式处理 Jackson API（速度非常快，但仍需要扫描大部分内容）的替代方案，也许您可​​以将内容保存在不同的文件中，每个条目一个？或者，如果有一种方法可以将事物分组，在多个文件中，每个文件都有一些子集？

当然，如果你真的有大量的条目，那么按照 Bruce 的建议使用 SQLite 是很有意义的。

# svg - 合并 Raphael 矩形形状

> ID：11676799
> 
> 赞同：0
> 
> 时间：2012-07-26T19:39:14.657
> 
> 标签：svg, raphael

试图让这两个 raphael 元素在悬停在一个或另一个上时都改变颜色。这是我的代码。任何帮助，将不胜感激。

```
var loge_1 = rsr.set();
loge_1a = rsr.rect(235.457, 287.645, 32.523, 45.486),
loge_1b = rsr.rect(235.139, 277.626, 32.933, 6.701);
loge_1.push(loge_1a,loge_1b);
loge_1.attr(logeFill); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T17:04:08.050

好吧，在搜索之后，我没有找到太多关于这个主题的东西。所以我已经阅读了 svg 元素并将我的“rect”更改为“path”。[这是 W3C svg 文档](http://www.w3.org/Graphics/SVG/IG/resources/svgprimer.html)

[这是带有“路径”的jsfiddle](http://jsfiddle.net/knottAverage/ArKDp/38/)

为了找到我的矩形路径，我刚刚在 Adob​​e AI 中打开了 svg 文件。然后确保我的文档单位设置为像素。从那里我打开了我的信息窗口，并将我的矩形 x 和 y 坐标的锚点复制到我的“路径”中，并且我有 2 个形状作为一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:40:07.833

我假设您从 ReadySetRaphael 获得代码 .... 毫无疑问，他们有一个非常好的 Raphael 转换算法... 有时尝试一些大型 SVG 文件，它们会给您一个很好的结果 .... 无论如何尝试这个...

```
loge_1.mouseover(function(){
    loge_1.attr({'fill':'your Desired Color'});
}
loge_1.mouseout(function(){
    loge_1.attr({'fill':'original color'});
} 
```

这应该会改变你的两个矩形的颜色....希望它有所帮助。

# string - 如何将每三个字符放在一个新行上？

> ID：11676802
> 
> 赞同：0
> 
> 时间：2012-07-26T19:39:28.273
> 
> 标签：string, shell

我有一个包含字符串的文件，例如：

```
ATCGGTCAA 
```

我需要在每三个字符之后添加一个新行，这样每行只出现每三个字符，例如：

```
ATC
GGT
CAA 
```

如何在 shell 中进行这种转换？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T19:47:07.830

使用[折叠](https://duckduckgo.com/?q=!man+fold)外壳命令：

```
fold -w3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T19:43:12.183

```
perl -e '$/=\3; while(<>) { print $_ . "\n" }' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T19:48:19.850

有一个名为的 unix 命令`fold`：

```
fold -3 < inputfile > outputfile 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T19:50:48.357

一个python版本：

```
chunk = in.read(3)
while len(chunk) > 0:
    out.write(chunk + "\n")
    chunk = in.read(3) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T21:56:47.780

纯娱乐：

```
,[.,.,.[-]++++++++++.,] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T19:41:43.953

```
while (<>) {
   chomp;
   print("$_\n") for /.{1,3}/sg;
} 
```

无脚本：（又名 one-liner aka bash）

```
perl -nle'print for /.{1,3}/sg' file.in >file.out

perl -i~ -nle'print for /.{1,3}/sg' file    # In-place 
```

特征：

*   你最后不会有空行。
*   即使最后没有换行符，它也可以工作。
*   即使您没有三个字符的倍数，它也可以工作。
*   即使您有多条线路，它也可以工作。

（更新）请注意，当前发布的所有其他解决方案（William Pursell、Hunter McMillen 和 anttix）都添加了一个空行。（更新）和 jterrace 的

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-26T19:43:34.080

您可以在字符串长度上使用模数运算符很容易地做到这一点。

伪代码：

```
myString = "ATCGGTCAA";
count = 0;

for(c in myString)
{  
   if((count+1) % 3 == 0 && count != 0) print "\n";
   print c;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-26T19:43:38.063

假设 Linux 上的 GNU sed

```
sed -i .bak -e 's/.../&\n/g' file.txt 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-26T19:45:28.197

另一个python单行：

```
a = 'ATCGGTCAA'
splitted = '\n'.join([a[i:i+3] for i in range(len(a) / 3)]) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-26T19:48:35.077

一个过于聪明（但很有趣）的 python 2-liner：

```
a=iter( 'ATCGGTCAA' )
print '\n'.join( ''.join(x) for x in zip(a,a,a) ) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-07-26T19:51:26.313

```
...
in=f.read() #'ATCGGTCAA...'
out=''
count=0
for i in s:
    out+=i
    count+=1
    if not count%3:
        out+='\n'
print>>f2, out 
```

输出：

```
ATC
GGT
CAA
... 
```

# javascript - 使用 jQuery 回调 + AJAX 有条件地还原元素

> ID：11676803
> 
> 赞同：0
> 
> 时间：2012-07-26T19:39:34.857
> 
> 标签：javascript, jquery, html, ajax

我需要根据我所做的 AJAX 调用还原对象。但是，我发现 AJAX 调用在函数完成执行之前没有完成。

我尝试了各种方法，但每种方法似乎都回到了相同的异步问题——我不想进行同步调用。

在我继续确定是否应该恢复之前，我如何以某种方式等到 AJAX 调用完成并且答案就在那里？

```
$(document).ready(function() {

$.ajax
({
    type: "GET",
    url: "quizData.xml",
    dataType: "xml",
    success: function(xml)
    {
        var questionIdCount = 0;
        $(xml).find('question').each(function()
        {
            questionIdCount++;
            $("#question-container").append("<div class=\"question\" id=\"question-number-" + questionIdCount + "\">" + $(this).text() + "</div>");

            $("#question-number-" + questionIdCount).data('id', questionIdCount);

            $(".question").droppable(
            {

            }
            );

        });

        var answerIdCount = 0;
        $(xml).find('answer').each(function()
        {
            answerIdCount++;
            $("#answer-container").append("<div class=\"answer-id\" id=\"answer-number-" + answerIdCount + 
            "\">" + answerIdCount + "</div><div class=\"answer\">" + $(this).text() + "</div>");    

            $("#answer-number-" + answerIdCount).data('id', answerIdCount);

            $(".answer-id").draggable({
              revert: function(socketObj)
              {
                 if(!socketObj)
                 {
                     return true;
                 }
                 else
                 {
                    var questionId = $("#" + socketObj.attr('id')).data('id')
                    var answerId = $("#" + $(this).attr('id')).data('id');

                    return checkAnswer(questionId, answerId);
                 }

              },
              containment: "#containment-wrapper",
              scroll: true
            });

        }); 
    }
});
  $(document).ready(function() {

$.ajax
({
    type: "GET",
    url: "quizData.xml",
    dataType: "xml",
    success: function(xml)
    {
        var questionIdCount = 0;
        $(xml).find('question').each(function()
        {
            questionIdCount++;
            $("#question-container").append("<div class=\"question\" id=\"question-number-" + questionIdCount + "\">" + $(this).text() + "</div>");

            $("#question-number-" + questionIdCount).data('id', questionIdCount);

            $(".question").droppable(
            {

            }
            );

        });

        var answerIdCount = 0;
        $(xml).find('answer').each(function()
        {
            answerIdCount++;
            $("#answer-container").append("<div class=\"answer-id\" id=\"answer-number-" + answerIdCount + 
            "\">" + answerIdCount + "</div><div class=\"answer\">" + $(this).text() + "</div>");    

            $("#answer-number-" + answerIdCount).data('id', answerIdCount);

            $(".answer-id").draggable({
              revert: function(socketObj)
              {
                 if(!socketObj)
                 {
                     return true;
                 }
                 else
                 {
                    var questionId = $("#" + socketObj.attr('id')).data('id')
                    var answerId = $("#" + $(this).attr('id')).data('id');

                    return checkAnswer(questionId, answerId);
                 }

              },
              containment: "#containment-wrapper",
              scroll: true
            });

        }); 
    }
});

function checkAnswer(questionId, answerId)
{
     var ajaxAnswer;
     $.ajax
     ({
        type: "POST",
        url: "getQuizAnswers.php",
        dataType: "xml",
        data: "questionId=" + questionId + "&answerId=" + answerId,
        success: function(xml)
        {
            console.log($(xml));
            $(xml).find("answer").each(function()
            {
                //alert($(this).text());
                if($(this).text() == "true")
                    ajaxAnswer = true;
                else
                    ajaxAnswer = false;

            });             
        }
      })

    return ajaxAnswer;  
}

});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:50:01.500

你已经有电话回来了。

```
success: function(xml){
  } 
```

是ajax请求成功完成时的回调函数。

所以`checkAnswer(questionId, answerId)`从它里面你需要的地方打电话。

如果您希望在其他两个 ajax 请求完成后调用 checkAnswer，请执行以下操作：

```
$.when($.ajax("/page1.php"), $.ajax("/page2.php"))
  .then(checkAnswer(questionId, answerId)); 
```

[jQuery.when](http://api.jquery.com/jQuery.when/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T00:30:23.517

斯宾塞，

您应该能够使用`deferred`对象来控制事物，并重新组织代码以确保仅在其中的 ajax`checkAnswer`响应后才设置 draggable。

我对这方面的每个方面都不是 100% 有信心，但这里是：

```
$(document).ready(function() {
    function setDraggable(revert) {
        $(".answer-id").draggable({
            revert: revert
            containment: "#containment-wrapper",
        });
    }
    $.ajax({
        type: "GET",
        url: "quizData.xml",
        dataType: "xml",
        success: function(xml) {
            var questionIdCount = 0;
            $(xml).find('question').each(function() {
                questionIdCount++;
                $("#question-container").append("<div class=\"question\" id=\"question-number-" + questionIdCount + "\">" + $(this).text() + "</div>");
                $("#question-number-" + questionIdCount).data('id', questionIdCount);
                $(".question").droppable({});
            });
            var answerIdCount = 0;
        $(xml).find('answer').each(function() {
            answerIdCount++;
            $("#answer-container").append("<div class=\"answer-id\" id=\"answer-number-" + answerIdCount + "\">" + answerIdCount + "</div><div class=\"answer\">" + $(this).text() + "</div>");
            $("#answer-number-" + answerIdCount).data('id', answerIdCount);
            if(socketObj) {
                var questionId = $("#" + socketObj.attr('id')).data('id')
                var answerId = $("#" + $(this).attr('id')).data('id');
                $.when(checkAnswer(questionId, answerId)).done(function() {
                    setDraggable(true);
                }).fail(function() {
                    setDraggable(false);
                });
            }
            else {
                setDraggable(true);
            }
            scroll: true
        });
        }
    });
    function checkAnswer(questionId, answerId) {
        var ajaxAnswer = true;//remains true unless an incorrect answer is received
        var def =  new $.Deferred();
        $.ajax({
            type: "POST",
            url: "getQuizAnswers.php",
            dataType: "xml",
            data: {"questionId":questionId, "answerId":answerId},
            success: function(xml) {
                console.log($(xml));
                $(xml).find("answer").each(function() {
                    ajaxAnswer = ajaxAnswer && ($(this).text() == "true");
                });
                if(ajaxAnswer) 
                    def.resolve();//success
                else 
                    def.reject();//failure
            },
            error: function(){
                def.reject();//assume failure if ajax fails
            }
        });
        return def;//IMPORTANT!!
    }
}); 
```

这有点棘手，需要解释......

从 开始`checkAnswer`，您将看到它现在返回一个[延迟对象](http://api.jquery.com/category/deferred-object/)，该对象在不久的将来某个时间点（当“getQuizAnswers.php”响应时）被解决或拒绝。

回到`.find('answer').each(...)`循环中，您将看到代码已被从里到外翻转。现在，不是`checkAnswer()`在 draggabe 中调用，而是设置 draggable 以响应`checkAnswer`（更具体地说，响应 checkAnswer 的延迟被解决或拒绝）。

由于需要在多个条件下设置可拖动，因此将可拖动代码移至实用程序函数中，从而避免重复。您可能需要向此函数传递更多参数以更具体地控制其行为（特别是 jQuery 选择器）。

这可能需要 tweeking/debugging 并且可能有更简单的方法，但这是立即想到的。

# c# - CPU 绑定任务的并行化继续与 IO 绑定

> ID：11676807
> 
> 赞同：3
> 
> 时间：2012-07-26T19:39:44.413
> 
> 标签：c#, multithreading, asynchronous, parallel-processing, task

我试图找出一种很好的方法来并行化处理大数据集的代码，然后将结果数据导入 RavenDb。

数据处理受 CPU 限制和数据库导入 IO 限制。

我正在寻找一种在 Environment.ProcessorCount 线程数上并行处理的解决方案。然后，应将生成的数据导入到与上述过程并行的 x（比如说 10）个池线程上的 RavenDb 中。

这里的主要内容是我希望在导入完成的数据时继续处理，以便在等待导入完成时继续处理下一个数据集。

另一个问题是成功导入后需要丢弃每个批次的内存，因为私有工作内存很容易达到 >5GB。

下面的代码是我到目前为止所得到的。请注意，它不能满足上述并行化要求。

```
datasupplier.GetDataItems()
    .Partition(batchSize)
    .AsParallel()
    .WithDegreeOfParallelism(Environment.ProcessorCount)
    .ForAll(batch =>
    {
        Task.Run(() =>
        {
            ...
        }
    } 
```

GetDataItem 产生可枚举的数据项，这些数据项被划分为批处理数据集。GetDataItem 将产生约 2,000,000 个项目，每个项目平均处理大约 0.3 毫秒。

该项目在 x64 平台上的最新 .NET 4.5 RC 上运行。

**更新。**

我当前的代码（见上文）将获取项目并分批对其进行分区。每个批次在八个线程上并行处理（i7 上的 Environment.ProcessorCount）。处理速度很慢，CPU 密集型和内存密集型。当单个批次的处理完成时，将启动一个任务以将结果数据异步导入 RavenDb。批量导入作业本身是同步的，如下所示：

```
using (var session = Store.OpenSession())
{
    foreach (var data in batch)
    {
        session.Store(data);
    }
    session.SaveChanges();
} 
```

这种方法存在一些问题：

1.  每次完成一个批次时，都会启动一个任务来运行导入作业。我想限制并行运行的任务数量（例如，最多 10 个）。此外，即使启动了许多任务，它们似乎也永远不会并行运行。

2.  内存分配是一个大问题。处理/导入批次后，它似乎仍保留在内存中。

我正在寻找解决上述问题的方法。理想情况下，我想要：

*   每个逻辑处理器一个线程执行繁重的批量数据处理。
*   十个左右的并行线程等待完成的批次导入 RavenDb。
*   将内存分配保持在最低限度，这意味着在导入任务完成后取消分配批次。
*   不在线程之一上运行导入作业以进行批处理。已完成批次的导入应与正在处理的下一个批次并行运行。

**解决方案**

```
var batchSize = 10000;
var bc = new BlockingCollection<List<Data>>();
var importTask = Task.Run(() =>
{
    bc.GetConsumingEnumerable()
        .AsParallel()
        .WithExecutionMode(ParallelExecutionMode.ForceParallelism)
        .WithMergeOptions(ParallelMergeOptions.NotBuffered)
        .ForAll(batch =>
        {
            using (var session = Store.OpenSession())
            {
                foreach (var i in batch) session.Store(i);
                session.SaveChanges();
            }
        });
});
var processTask = Task.Run(() =>
{
    datasupplier.GetDataItems()
        .Partition(batchSize)
        .AsParallel()
        .WithDegreeOfParallelism(Environment.ProcessorCount)
        .ForAll(batch =>
        {
            bc.Add(batch.Select(i => new Data()
            {
                ...
            }).ToList());
        });
});

processTask.Wait();
bc.CompleteAdding();
importTask.Wait(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T23:49:29.250

Your task overall sounds like a producer-consumer workflow. Your batch processors are producers, and your RavenDB data "import" are the consumers of the output of the producers.

Consider using a [`BlockingCollection<T>`](http://msdn.microsoft.com/en-us/library/dd267312.aspx) as the connection between your batch proccesors and your db importers. The db importers will wake up as soon as the batch processors push completed batches into the blocking collection, and will go back to sleep when they have "caught up" and emptied the collection.

批处理器生产者可以全速运行，并且始终与处理先前完成的批处理的 db 导入器任务并行运行。如果您担心批处理器可能比数据库导入器领先太多（b/c 数据库导入比处理每个批处理花费的时间要长得多），您可以在阻塞集合上设置一个上限，以便生产者在添加时会阻塞超过这个限制，给消费者一个追赶的机会。

不过，您的一些评论令人担忧。启动一个 Task 实例以异步执行数据库导入到批处理并没有什么特别的错误。任务！=线程。创建新任务实例不会产生与创建新线程相同的巨大开销。

不要过于精确地控制线程。即使您指定您想要的存储桶数量与您拥有的核心数量完全相同，您也无法独占使用这些核心。来自其他进程的数百个其他线程仍将安排在您的时间片之间。使用任务指定逻辑工作单元并让 TPL 管理线程池。让自己免于因错误的控制感而感到沮丧。;>

在您的评论中，您指出您的任务似乎没有彼此异步运行（您如何确定这一点？）并且在每批完成后似乎没有释放内存。我建议放弃一切，直到您首先弄清楚这两个问题的原因。您是否忘记在某处调用 Dispose() ？你是否持有一个让整个对象树不必要地存活的引用？你在测量正确的东西吗？并行任务是否被阻塞的数据库或网络 I/O 序列化？在解决这两个问题之前，您的并行计划是什么并不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T20:09:48.767

For each batch you are starting a task. This means that your loop completes very quickly. It leaves (number of batches) tasks behind which is not what you wanted. You wanted (number of CPUs).

Solution: Don't start a new task for each batch. The for loop is already parallel.

In response to your comment, here is an improved version:

```
//this runs in parallel
var processedBatches = datasupplier.GetDataItems()
    .Partition(batchSize)
    .AsParallel()
    .WithDegreeOfParallelism(Environment.ProcessorCount)
    .Select(x => ProcessCpuBound(x));

foreach (var batch in processedBatches) {
 PerformIOIntensiveWorkSingleThreadedly(batch); //this runs sequentially
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T23:33:18.543

我最近构建了类似的东西，我使用了 Queue 类 vs List 和 Parallel.Foreach。我发现过多的线程实际上会减慢速度，这是一个甜蜜点。

# javascript - 多个 AJAX 调用和 JSON 数据

> ID：11676813
> 
> 赞同：0
> 
> 时间：2012-07-26T19:40:30.023
> 
> 标签：javascript, json, ajax

我设计了一个网站，它将用户输入作为搜索参数，并使用它们通过对 PHP 页面的 AJAX 调用来搜索数据库。在这个 AJAX 调用中，我显然有一些数据（格式化为 JSON 文件），我在 ajax 参数的“成功”部分操作和使用这些数据。这就是问题所在——我希望能够分析用户针对整个数据库群体的数据进行的缩小搜索中的数据。我怎样才能做到这一点？我以为我会再做一次 AJAX 调用，但该调用的数据似乎无法从外部访问，而且我找不到任何方法在调用之外“导出”它。这是代码的简化版本：

```
$.ajax({
    url: URL for the search .php,
    cache: false,
    data: {
            Various search parameters by the user
        },
    dataType:"json",
    success:function(data){
       Data manipulation and reading the resulting JSON
       $.ajax({
            url:URL2 for the population .php,
            cache: false,
            dataType:"json",
            success:function(data){
                population data stuff here
            },
            error: error stuff

    }
        error: error stuff
} 
```

到目前为止，这是我知道访问数据库的唯一方法。我怎样才能以某种方式从第二个 AJAX 中提取数据，以便我可以在第一个 AJAX 中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:57:57.740

由于您使用异步回调，因此您无法从第二次调用中“提取”数据并在第一次调用中使用它。您需要做的是进行两次调用，并在第二次调用成功回调中使用每个调用的数据。如果将与成功回调函数一起使用的变量重命名为唯一的，则可以执行此操作。

```
$.ajax({
    url: /**/,
    success:function(response1){
       $.ajax({
            url: /**/,
            success:function(response2){
                /* use both response1 and response2 here */
            },
            error: /**/
       })
    },
    error: /**/
}) 
```

如果您没有使用第一个 ajax 调用中的数据来进行第二个 ajax 调用，则可以使用[jQuery.when 之](http://api.jquery.com/jQuery.when/)类的东西来等待两个请求完成。

# xslt - 如何使用 XSLT 和 XPath 使用模板按父节点对已过滤的节点集进行分组

> ID：11676822
> 
> 赞同：2
> 
> 时间：2012-07-26T19:41:19.410
> 
> 标签：xslt, xpath

鉴于此 XML，我需要显示单个类别中的项目，并在组标题下分组。不应显示空组（例如，当类别等于 x 时，不应显示组 C 的标题，类别 z 和组 A 和 B 相同）。

```
<group name="A">
  <item name="A1" category="x"/>
  <item name="A2" category="x"/>
  <item name="A3" category="y"/>
</group>
<group name="B">
  <item name="B1" category="x"/>
</group>
<group name="C">
  <item name="C1" category="y"/>
  <item name="C2" category="z"/>
</group> 
```

因为我无法显示空组，所以我已经将项目过滤到 $items 中。我将此集合作为参数传递给呈现分组的模板（见下文）。在这个模板中，对于每个分组，我需要调用一个模板来呈现当前组中的项目。

```
<xsl:template name="groups">

  <!-- This is already filtered by category -->
  <xsl:param name="items" />

  <!-- Select only the groups that should be displayed -->
  <xsl:for-each select="$items/parent::group">
    <h1><xsl:value-of select="./@name"/></h1>

    <!-- Display all filtered items in this group -->
    <div class="items">
      <xsl:call-template name="items">
        <!-- How can I get the items from $items for the current group? -->
        <xsl:with-param name="partners" select="$items..."/>
      </xsl:call-template>
    </div>

  </xsl:for-each>
</xsl:template> 
```

我为`param`传递给`items`模板的内容选择什么？

显示所有项目的模板：

```
<xsl:template name="items">
  <xsl:param name="items" />

  <xsl:for-each select=".">
    <div class="item">
      <xsl:value-of select="./@name" />
    </div>
  </xsl:for-each>
</xsl:template> 
```

过滤类别 z 后的最终结果应该是：

```
<h1>C</h1>
<div class="items">
  <div class="item">C2</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T12:44:14.577

**此转换为所有类别产生所需的结果：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kCatByVal" match="@category" use="."/>
 <xsl:key name="kGroupByCat" match="group" use="item/@category"/>
 <xsl:key name="kItemByGroupAndCat" match="item"
  use=" concat(generate-id(..), '+', @category)"/>

 <xsl:variable name="vDistCats" select=
  "/*/*/*/@category
            [generate-id() = generate-id(key('kCatByVal', .)[1])]"/>

 <xsl:template match="/*">
   <xsl:apply-templates select="$vDistCats"/>
 </xsl:template>

 <xsl:template match="@category">
 <h1>Category <xsl:value-of select="."/></h1>
  <xsl:apply-templates select="key('kGroupByCat', .)">
   <xsl:with-param name="pCat" select="."/>
  </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="group">
  <xsl:param name="pCat"/>
  <h1><xsl:value-of select="@name"/></h1>
  <div class="items">
   <xsl:apply-templates select=
    "item
      [generate-id()
      =
       generate-id(key('kItemByGroupAndCat',
                        concat(generate-id(..), '+', $pCat)
                        )
                    )]"/>
  </div>
 </xsl:template>

 <xsl:template match="item">
  <div class="item"><xsl:value-of select="@name"/></div>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于提供的 XML 文档时**（已纠正所有严重的格式错误）：

```
<t>
    <group name="A">
        <item name="A1" category="x"/>
        <item name="A2" category="x"/>
        <item name="A3" category="y"/>
    </group>
    <group name="B">
        <item name="B1" category="x"/>
    </group>
    <group name="C">
        <item name="C1" category="y"/>
        <item name="C2" category="z"/>
    </group>
</t> 
```

**产生了想要的正确结果**：

```
<h1>Category x</h1>
<h1>A</h1>
<div class="items">
   <div class="item">A1</div>
</div>
<h1>B</h1>
<div class="items">
   <div class="item">B1</div>
</div>
<h1>Category y</h1>
<h1>A</h1>
<div class="items">
   <div class="item">A3</div>
</div>
<h1>C</h1>
<div class="items">
   <div class="item">C1</div>
</div>
<h1>Category z</h1>
<h1>C</h1>
<div class="items">
   <div class="item">C2</div>
</div> 
```

**这在浏览器中显示为**：

# 类别 x

# 一种

A1

# 乙

B1

# 类别 y

# 一种

A3

# C

C1

# 类别 z

# C

C2

# amazon-ec2 - 将文件从本地 linux 计算机复制到 amazon aws linux 实例

> ID：11676824
> 
> 赞同：10
> 
> 时间：2012-07-26T19:41:25.753
> 
> 标签：amazon-ec2

如何将文件从本地 linux 计算机复制到 amazon aws linux 实例？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-26T19:41:25.753

我们可以通过如下所示的 scp 命令来做到这一点：

scp -i testkey1.pem 源文件 ec2-user@ec2-51-122-239-158.us-west-2.compute.amazonaws.com:outputfile

或者如果你想复制一个完整的目录

scp -i testkey1.pem -r sourcefolder/ec2-user@51.122.444.128:~/

*   -i 是 pem 文件的选项
*   ec2-51-122-239-158.us-west-2.compute.amazonaws.com 是公共 dns 地址，您可以从实例的 aws 控制台获取此值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T23:54:58.630

如果您正在寻找 GUI 方法，您可以使用 SFTP。许多程序（例如[Transmit](http://panic.com/transmit/) for Mac 或[Filezilla）](http://wiki.filezilla-project.org/Howto)可以通过连接到公共 DNS 名称（在 AWS 控制台中找到）通过 SSH 连接到您的实例。

如果您愿意，您绝对可以使用 SCP，它非常可靠，正如您所建议的那样。

# .net - 使用 NUnit 执行与 ASP.NET WebApi 控制器的集成测试

> ID：11676828
> 
> 赞同：10
> 
> 时间：2012-07-26T19:41:40.993
> 
> 标签：.net, nunit, asp.net-web-api

我正在尝试使用 NUnit 设置测试来执行 ASP.NET WebApi 控制器的一些集成测试。我发现了几篇讨论使用 HttpServer 进行内存托管的文章，这些文章似乎通过不需要托管所有内容的 Web 服务器来简化事情。

*   [ASP.NET Web API：内存托管](http://pfelix.wordpress.com/2012/03/05/asp-net-web-api-in-memory-hosting/)
*   [使用内存托管的 ASP.NET Web API 集成测试](http://www.strathweb.com/2012/06/asp-net-web-api-integration-testing-with-in-memory-hosting/)

**问题是我得到的唯一响应是 404-Not Found。**

当通过浏览器或 Fiddler 手动测试时，控制器正在工作。路线定义是从工作站点复制的。api 项目被测试项目引用，dll 被复制到与测试相同的文件夹中。

提前致谢。

这是测试类

```
[TestFixture]
public class InMemoryTests
{
    private HttpServer Server;
    private string UrlBase = "http://some.server/";

    [TestFixtureSetUp]
    public void Setup()
    {

        var config = new HttpConfiguration();
        config.Routes.MapHttpRoute(name: "Default", routeTemplate: "api/{controller}/{action}/{id}", defaults: new { id = RouteParameter.Optional });
        config.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.Always;

        Server = new HttpServer(config);
    }

    [Test]
    public void GetOrderStatus()
    {
        var client = new HttpClient(Server);
        var request = createRequest("api/Orders/GetOrderStatus?companyCode=001&orderNumber=1234", "application/json", HttpMethod.Get);

        using (HttpResponseMessage response = client.SendAsync(request).Result)
        {
            Assert.IsNotNull(response);
            Assert.AreEqual(HttpStatusCode.OK, response.StatusCode);
            Assert.NotNull(response.Content);
        }
    }

    private HttpRequestMessage createRequest(string url, string mthv, HttpMethod method)
    {
        var request = new HttpRequestMessage();

        request.RequestUri = new Uri(UrlBase + url);
        request.Headers.Accept.Add(new MediaTypeWithQualityHeaderValue(mthv));
        request.Method = method;

        return request;
    }

    private HttpRequestMessage createRequest<T>(string url, string mthv, HttpMethod method, T content, MediaTypeFormatter formatter) where T : class
    {
        HttpRequestMessage request = createRequest(url, mthv, method);
        request.Content = new ObjectContent<T>(content, formatter);

        return request;
    }

    public void Dispose()
    {
        if (Server != null)
        {
            Server.Dispose();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T11:13:10.653

我也看到了这个问题，当我将测试类移到与控制器相同的程序集中时，它似乎消失了；我知道的测试通常不实用。

经过一番挖掘，似乎只有当调用代码与控制器不共享相同的程序集时，自我主机才会出现一个错误，因为它没有设法加载所需的程序集。

要确认这是您的问题/临时解决方法，请将其添加为测试的第一行：-

```
Type myType = typeof(myControllerType); 
```

更多信息请访问：[http ://forums.asp.net/t/1772734.aspx/1](http://forums.asp.net/t/1772734.aspx/1)

# c++ - 保持从一个函数到另一个函数的流打开

> ID：11676832
> 
> 赞同：0
> 
> 时间：2012-07-26T19:41:48.833
> 
> 标签：c++, file-io, stream

有没有办法让 C++ 中的流（在文件中读取或写入）从一个函数打开到另一个函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:47:16.183

是的，您可以在函数之外创建流并将其作为参数传递给方法：

`void myFunction(ifstream &stream) {...}`

稍后在完成后关闭流：`stream.close()`.

或者在第一个函数中创建流并将其返回给调用方法，然后将其传递给第二个函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T19:47:20.147

通过引用传递它

```
void myFunction(ifstream &myStream) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T19:45:56.153

使其成为全局变量或将其作为参数传递，但确保如果将其作为参数传递，则通过引用而不是通过值传递它！如果您按值传递它，编译器将不会抱怨并且奇怪的事情开始发生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-04T13:53:19.467

由于 C++11 文件流得到了[移动构造函数 (6)](https://en.cppreference.com/w/cpp/io/basic_ifstream/basic_ifstream)。您可以使用它在函数之间传递打开的流。考虑以下代码片段：

```
#include <iostream>
#include <fstream>

bool open_stream(const std::wstring& filepath, std::ifstream& stream)
{
  std::ifstream innerStream;
  innerStream.open(filepath.c_str(), std::ios::in | std::ios::binary);
  if (innerStream.is_open())
  {
    stream = std::move(innerStream); // <-- Opened stream state moved to 'stream' variable 
    return true;
  }
  return false;
}  // <-- innerStream is destructed, but opened stream state is preserved as it was moved to 'stream' variable 
```

考虑下一个代码来说明 的用法`open_stream`：

```
int main()
{
  std::ifstream outerStream;
  std::wcout << L"outerStream is opened: " << outerStream.is_open() << std::endl; // <-- outerStream is opened: 0

  if (!open_stream(L"c:\\temp\\test_file.txt", outerStream))
  {
    return 1;
  }

  std::wcout << L"outerStream is opened: " << outerStream.is_open() << std::endl; // <-- outerStream is opened: 1 

  // outerStream is opened and ready for reading here

  return 0;
} 
```

# ios - 在 endInterruption 调用了 AVAudioSessionDelegate，但未调用 beginInterruption

> ID：11676836
> 
> 赞同：12
> 
> 时间：2012-07-26T19:42:06.060
> 
> 标签：ios, avplayer, avaudiosession, ios6.0

当应用程序启动并将委托设置为 appDelegate 时，我正在设置一个 AVAudioSession。一切似乎都在工作（播放等），除了当电话接到电话时没有调用代表上的 beginInterruption 。当呼叫结束时 endInterruption 正在被调用。

我唯一的想法是我使用的音频播放器代码曾经基于 AVAudioPlayer，但现在使用的是 AVPlayer。用于处理中断的 AVAudioPlayer 委托的回调仍然存在，但它们会以任何方式发生冲突似乎很奇怪。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T21:53:00.943

查看标题，在 iOS6 中，看起来 AVAudioSessionDelegate 现在已被弃用。

`AVAudioSessionInterruptionNotification`在 iOS6 中改用。

更新：那没有用。我认为框架中存在错误。

是的，根据我的经验，beginInterruption 和新记录的 AVAudioSessionInterruptionNotification 都不能正常工作。我必须做的是使用本地标志跟踪播放器的状态，然后处理该`endInterruption:withFlags:`方法以跟踪中断的恢复。

在 iOS 6 中，从中断中恢复至少会使您的 AudioPlayer 保持在正确的位置，因此我无需存储我的 AVAudioPlayer 的最后已知播放时间，我只需点击播放即可。

这是我想出的解决方案。如果 AVPlayer 驻留时间过长，iOS 6 似乎会通过 Media Reset 杀死您的音频。最终发生的是 AVPlayer 播放，但没有声音出来。AVPlayer 上的速率为 1，但绝对没有声音。更糟糕的是，AVAudioSession setActive 和 AVPlayer 本身都没有错误表明存在问题。

再加上您不能依赖 appWillResignActive 的事实，因为如果您完全依赖远程控制手势，您的应用程序可能已经在后台。

我实现的最终解决方案是在 AVPlayer 上添加一个周期性观察者，并记录最后一次已知时间。当我收到我已获得控制权的事件时，我创建了一个新的 AVPlayer，使用 AVPlayerItem 加载它，并将 seekToTime 设置到适当的时间。

这是一个非常烦人的解决方法，但至少它有效，并且避免了正在发生的周期性崩溃。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T21:49:18.940

我可以确认使用C api，中断开始时也没有调用中断方法；只有当它结束时

```
(AudioSessionInitialize (nil, nil, interruptionListenerCallback, (__bridge void *)(self)); 
```

我还针对该问题向苹果提交了错误报告。

**编辑：**这在 iOS 6.1 中已修复（但不是 iOS 6.0.1）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T19:15:19.677

只需致电：

```
[[AVAudioSession sharedInstance] setDelegate: self]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T23:29:46.870

我刚刚通过在 AudioSessionInitialize() 中声明的 AudioSessionInterruptionListener 回调函数中设置断点检查了我的 iPhone 5（运行 iOS 6.0），实际上，当应用程序具有活动的音频会话和音频时，会调用此中断回调单元并被来电打断（Xcode 显示应用程序在中断开始时的断点处停止，然后我从该断点继续）。

我有该应用程序，然后停止其音频单元并停用其音频会话。然后，在结束中断回调时，应用程序重新激活音频会话并重新启动音频单元而没有问题（应用程序随后正确录制音频）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T18:22:46.363

`AVPlayer`我在 iOS 6.0.x 上构建了一个全新的音频流 ( ) 应用程序，发现了同样的问题。

代表现在已弃用，我们必须使用通知，这很好，但这是我的发现：

1.  在来电期间，我只收到`AVAudioSessionInterruptionTypeEnded`我的处理程序，以及`AVAudioSessionInterruptionOptionShouldResume`. 音频会话自动暂停（音频淡出），我只需要恢复播放`AVPlayer`.
2.  但是，当尝试启动游戏（例如 CSR Racing）时，奇怪的是，`AVAudioSessionInterruptionTypeBegan`当我的应用程序可以恢复播放，甚至没有终止游戏时，我会感到恐惧但没有任何迹象。

现在，这可能取决于其他因素，例如我的音频类别（在我的情况下`AVAudioSessionCategoryPlayback`）和两个应用程序的混合设置（`kAudioSessionProperty_OverrideCategoryMixWithOthers`），我不确定，但肯定我看到了一些不合适的地方。

希望其他人报告说，在 6.1beta 上，这是修复的，我还需要升级，所以我们拭目以待。

# php - 将“require”与 GET/POST 数据一起使用是否安全？

> ID：11676837
> 
> 赞同：9
> 
> 时间：2012-07-26T19:42:14.813
> 
> 标签：php, security

使用以下代码是否安全：

```
require($_SERVER['DOCUMENT_ROOT'] . "/pages/" . $_GET['page'] . ".php") 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-26T19:44:59.633

不，它不安全。为什么？

因为两个点的序列**/../**意味着一个目录返回，攻击者可能会在您的系统上包含任何内容，甚至在`$_SERVER['DOCUMENT_ROOT']`.. （在一个不幸的配置中，这意味着秘密/敏感的操作系统配置文件。）

您必须使用 IF 或 SWITCH 来获取允许的值以防止恶意输入。例子：

```
switch($_GET['page']) {
     case 'welcome': $page='welcome';
     case 'shop': $page='shop';
     default: $page='index';
}
require($_SERVER['DOCUMENT_ROOT'] . "/pages/" . $page . ".php") 
```

还要检查一下`in_array()`是否更容易过滤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T19:47:50.860

[StackOverflow 有一个关于如何使用 PHP 清理用户输入](https://stackoverflow.com/questions/129677/whats-the-best-method-for-sanitizing-user-input-with-php)的有用问答。几年过去了，但原则根本没有改变。

快速的回答是：如果你能从一开始就避免这个问题，你会过得更好。

向我们展示您如何尝试使用它，我们可能会提供改进建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T19:48:23.800

它不安全。您可以使用具有允许值的数组。例如

```
$allowed_pages = array('index', 'test', 'my_page')
if (!in_array($_GET['page'], $allowed_pages)){
    echo 'good bye';
    die();
} else {
   //
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-26T19:54:55.180

如果您信任 pages 目录中的所有文件，请尝试：

```
if (in_array($_GET['page'],glob("/pages/*.php"))) {
   require($_SERVER['DOCUMENT_ROOT'] . "/pages/" . $_GET['page'] . ".php");
} else echo "Nice try hacker!"; 
```

这是另一个解决方案，它使用了我用来清理上传文件名的部分功能：

**选项 #2** *感谢 Daniel，Rok！*

```
$page = preg_replace('/[^a-zA-Z0-9_ %\[\]\.\(\)%&-]/s', '', $_GET['page']);
$filename = $_SERVER['DOCUMENT_ROOT'] . "/pages/" . str_replace("/",'',$page) . ".php";
if (file_exists($filename)) {
    require($filename);
} else echo "Nice try hacker!"; 
```

请注意，这仅在文件名中没有特殊字符时才有效

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-07-26T19:46:24.540

使用 regExp 检查你的`$_GET['page']`!

# python - 可能改变 Mako 的内联开始/结束语法？

> ID：11676839
> 
> 赞同：3
> 
> 时间：2012-07-26T19:42:18.777
> 
> 标签：python, template-engine, jinja2, mako

我一直在使用 Jinja2 来创建和渲染 Bash 脚本的模板（除其他外），我一直缺少像在 Mako 中那样拥有完整的 python 的功能。

目前让我无法使用 Mako 的事情似乎相当微不足道，那就是 Mako 的内联 begin/end `${`/`}`语法与 Bash 自己的语法冲突（而 Jinja2 没有）

所以我想知道的是：有什么方法可以将 Mako 的开始/结束`${`/`}`语法更改为其他东西，而其他东西与 Bash 不冲突。

（否则，我是否遗漏了一些明显的东西？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-10T20:37:09.390

通过[预处理器](http://docs.makotemplates.org/en/latest/usage.html#mako.template.Template.params.preprocessor)运行您的模板：

```
from mako.template import Template
import re

def bash_preprocessor(source):
    source = re.sub(r"\${(.+?)}", r"${'${'}\1${'}'}", source)
    source = re.sub(r"\^\[(.+?)\]", r"${\1}", source)
    return source

t = Template("""

BAR='hi'
BAT='^[hoho]'
PATH='/path/to/crap'

EXECUTABLE=${PATH}/${BAR}/${BAT}

""", preprocessor=bash_preprocessor)

print t.render(hoho="boo") 
```

# objective-c - 块数组？

> ID：11676840
> 
> 赞同：4
> 
> 时间：2012-07-26T19:42:21.507
> 
> 标签：objective-c, nsarray, objective-c-blocks

这对我来说似乎是一种非常奇怪的交互，但同时它不仅有效，而且在此过程中不会引发任何警告或错误。只是希望更好地理解块，以及为什么这样的事情可能是对的或错的。

有什么理由不应该做这样的事情吗？

```
NSArray *array = [NSArray arrayWithObjects:^{NSLog(@"Block 1");}, ^{NSLog(@"Block 2");}, ^{NSLog(@"Block 3");}, nil];

for (id block in array) {
    [block invoke];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T19:46:45.193

将 Blocks 放入`NSArray`s 就可以了；他们是对象。事实上，它们继承自`NSObject`.

但是，您确实需要复制它们。这些块是在堆栈上创建的，需要移动到堆中才能超过当前方法的末尾。如果您使用的是 ARC，这很容易：

```
NSArray *array = [NSArray arrayWithObjects:[^{NSLog(@"Block 1");} copy], ... 
```

在 MRR 下，您需要平衡它`copy`，因此您有两个不愉快的选择：使用临时数组，或者在创建数组后立即枚举数组并发`release`送给它的所有成员。

`invoke`另一方面，发送并不完全符合犹太教规，因为这是一种私有方法。调用 Block 的唯一完全符合 API 的方法是使用函数调用语法：

```
typedef GenericBlock dispatch_block_t;
for( GenericBlock block in array ){
    block();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:46:55.737

当然，那很好。为什么会不好？

在像 JavaScript 这样的语言中，这种技术在注册事件处理程序时很常见。

```
object.clickHandlers.push(function() { doStuff() });
object.clickHandlers.push(function() { doMoreStuff() }); 
```

我认为没有理由不能将类似的技术用于 ObjC 块，因为它们是真实的对象。

不过，对我来说更有趣的问题是，无论您的目标是什么，这种模式是否是最佳选择。你还没有真正告诉我们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T19:47:11.770

Objective-C 中的块是“一等公民”对象。无论您可以对常规对象做什么，无论是作为参数传递、存储在数组还是字典中等等，您也可以对对象进行阻塞。

例如，一个块对象数组可能有助于对编译时未知的一系列动作进行编码；以字符串为键的块对象字典在实现脚本语言等方面可能很有用。

调用从集合中检索的块的最佳方法是将其转换为适当的类型，并在其上使用常规块调用语法。

# imagemagick - 在 Mountain Lion 上安装 ImageMagick 和 rmagick 的问题

> ID：11676844
> 
> 赞同：11
> 
> 时间：2012-07-26T19:43:07.817
> 
> 标签：imagemagick, rmagick, osx-mountain-lion

我面临在山狮中安装 rmagick 的问题。我已经安装了 Xcode 4.4 和开发者工具。仍然面临这个问题。

```
 Installing rmagick (2.13.1) with native extensions Unfortunately, a fatal error has occurred. Please report this error to the Bundler issue tracker at https://github.com/carlhuda/bundler/issues so that we can fix it. Thanks!
    /Users/mohit/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb:552:in `rescue in block in build_extensions': ERROR: Failed to build gem native extension. (Gem::Installer::ExtensionBuildError)

            /Users/mohit/.rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rb 
    checking for Ruby version >= 1.8.5... yes
    extconf.rb:128: Use RbConfig instead of obsolete and deprecated Config.
    checking for clang... yes
    checking for Magick-config... yes
    checking for ImageMagick version >= 6.4.9... yes
    checking for HDRI disabled version of ImageMagick... yes
    checking for stdint.h... *** extconf.rb failed ***
    Could not create Makefile due to some reason, probably lack of
    necessary libraries and/or headers.  Check the mkmf.log file for more
    details.  You may need configuration options.

    Provided configuration options:
        --with-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=/Users/mohit/.rvm/rubies/ruby-1.9.3-p125/bin/ruby
    /Users/mohit/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
    You have to install development tools first.
        from /Users/mohit/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:506:in `try_cpp'
        from /Users/mohit/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:931:in `block in have_header'
        from /Users/mohit/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:790:in `block in checking_for'
        from /Users/mohit/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone'
        from /Users/mohit/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:254:in `open'
        from /Users/mohit/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone'
        from /Users/mohit/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:254:in `open'
        from /Users/mohit/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:280:in `postpone'
        from /Users/mohit/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:789:in `checking_for'
        from /Users/mohit/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:930:in `have_header'
        from extconf.rb:193:in `<main>'

    Gem files will remain installed in /Users/mohit/.rvm/gems/ruby-1.9.3-p125/gems/rmagick-2.13.1 for inspection.
    Results logged to /Users/mohit/.rvm/gems/ruby-1.9.3-p125/gems/rmagick-2.13.1/ext/RMagick/gem_make.out
        from /Users/mohit/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb:530:in `block in build_extensions'
        from /Users/mohit/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb:505:in `each'
        from /Users/mohit/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb:505:in `build_extensions'
        from /Users/mohit/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb:180:in `install'
        from /Users/mohit/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/source.rb:90:in `block in install'
        from /Users/mohit/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/rubygems_integration.rb:82:in `preserve_paths'
        from /Users/mohit/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/source.rb:89:in `install'
        from /Users/mohit/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/installer.rb:73:in `block in install_gem_from_spec'
        from /Users/mohit/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/rubygems_integration.rb:97:in `with_build_args'
        from /Users/mohit/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/installer.rb:72:in `install_gem_from_spec'
        from /Users/mohit/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/installer.rb:56:in `block in run'
        from /Users/mohit/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/installer.rb:55:in `run'
        from /Users/mohit/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/installer.rb:12:in `install'
        from /Users/mohit/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/cli.rb:220:in `install'
        from /Users/mohit/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/vendor/thor/task.rb:22:in `run'
        from /Users/mohit/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/vendor/thor/invocation.rb:118:in `invoke_task'
        from /Users/mohit/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/vendor/thor.rb:263:in `dispatch'
        from /Users/mohit/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/lib/bundler/vendor/thor/base.rb:386:in `start'
        from /Users/mohit/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.1.0/bin/bundle:13:in `<top (required)>'
        from /Users/mohit/.rvm/gems/ruby-1.9.3-p125/bin/bundle:19:in `load'
        from /Users/mohit/.rvm/gems/ruby-1.9.3-p125/bin/bundle:19:in `<main>' 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-08T19:25:01.553

我今天早上刚更新到 Mountain Lion，遇到了 rmagick 麻烦。我在过去的某个时候通过自制软件安装了 ImageMagick，所以在通过 xcode 的首选项窗口安装新的命令行工具后，这对我有用。

```
brew update
brew uninstall ImageMagick
brew install ImageMagick
gem uninstall rmagick
gem install rmagick 
```

我不必像上面提到的一些帖子那样对 gcc 变得时髦。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-31T03:53:26.343

我终于解决了这个问题：

```
$ cd /usr/local/Cellar/imagemagick/6.8.0-10/lib
$ ln -s libMagick++-Q16.7.dylib   libMagick++.dylib
$ ln -s libMagickCore-Q16.7.dylib libMagickCore.dylib
$ ln -s libMagickWand-Q16.7.dylib libMagickWand.dylib 
```

解决方案来自[https://coderwall.com/p/wnomjg](https://coderwall.com/p/wnomjg)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-07-26T22:55:05.213

我也一样

```
sudo ln -s /usr/bin/gcc /usr/bin/gcc-4.2 
```

按照[https://gist.github.com/1860511中的说明进行操作](https://gist.github.com/1860511)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-06T18:35:36.197

因此，在将我的 mac pro 更新为 Mountain Lion 之后，我的 ruby​​ 环境开始一个接一个地出现不同的错误。经过 1-2 小时的试错和谷歌搜索，这是我在 Rails 环境中修复我的 ruby​​ 的方法。

首先，我遇到了 ruby​​ env 错误。它没有检测到 git 命令，当我运行时，Bundler 因错误而尖叫`foreman start`

**第 1 步**：`Update XCode`。获取最新的 Xcode 4.6 Mountain Lion 没有预先安装 ruby​​ 标头，因此您需要从 XCode 手动执行此操作。转到 Xcode 首选项/下载。

`Install Command Line Tools`

**第2步：** `Install XQuartz`

注销并再次登录。（您可能不需要这个，因为 imagemagick 公式已更新

**第 3 步：**现在您的 ruby​​ 环境将开始谈论 Imagemagick 错误执行以下操作：

`brew update`

`brew uninstall imagemagick`

`brew install --fresh imagemagick`

`gem uninstall rmagick 2.13.2`

`gem install rmagick`

在尝试了最后一个之后，现在它会给你这样的原生扩展错误

```
Installing rmagick (2.13.1) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /Users/priyanka/.rvm/rubies/ruby-1.9.2-p180/bin/ruby extconf.rb 
checking for Ruby version >= 1.8.5... yes
checking for /usr/bin/gcc-4.2... no
No C compiler found in ${ENV['PATH']}. See mkmf.log for details.
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
--with-opt-dir
--without-opt-dir
--with-opt-include
--without-opt-include=${opt-dir}/include
--with-opt-lib
--without-opt-lib=${opt-dir}/lib
--with-make-prog
--without-make-prog
--srcdir=.
--curdir
--ruby=/Users/priyanka/.rvm/rubies/ruby-1.9.2-p180/bin/ruby

Gem files will remain installed in /Users/priyanka/.rvm/gems/ruby-1.9.2-p180/gems/rmagick-      2.13.1 for inspection.
Results logged to /Users/priyanka/.rvm/gems/ruby-1.9.2-p180/gems/rmagick-2.13.1/ext/RMagick/gem_make.out
An error occured while installing rmagick (2.13.1), and Bundler cannot continue.
Make sure that `gem install rmagick -v '2.13.1'` succeeds before bundling. 
```

**第4步：** `sudo ln -s /usr/bin/gcc /usr/bin/gcc-4.2`

这应该可以解决 Mountain Lion 在升级后给您的所有问题。

跑吧`bundle`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-14T08:20:31.700

这是我在几次尝试后如何让 RMagick 工作的快速总结。我觉得以下是获得它的最佳方法，而无需费心下载源代码压缩包和编译 - 把它留给专家

*   你需要为 gcc/g++ 等安装 Xcode 和命令行工具。命令行工具不会随 Xcode 自动安装，去`Preferences`安装它
*   接下来安装[Macport](http://www.macports.org/install.php)
*   也安装[Homebrew](https://github.com/mxcl/homebrew/wiki/Installation)
*   确保您已安装 X11 服务器 - 如果未安装 - `sudo port install -v xorg-server`。我使用`-v`选项，因为它是一个长时间的安装，你可能想知道它是在做某事还是只是挂起
*   安装 pkgconfig -`sudo brew install pkgconfig`
*   现在是安装 ImageMacick 的时候了——`sudo port install -v ImageMagick`
    *不要使用 brew 来安装 ImageMagick——它不会正确安装所有依赖项和委托。*
*   一旦安装了 ImageMagick - 设置`DISPLAY`环境变量 - `export DISPLAY=:0.0`- 最好还是把它放在你的`.profile`
*   现在测试你的 ImageMagick 安装
*   启动 X11 服务器（安装 X11 服务器后，它会出现在您的应用列表中）
*   从命令行运行 -`$convert logo: logo.gif; identify logo.gif; display logo.gif`它*应该会弹出一个窗口显示`logo.gif`*
*   还从命令行运行命令 - `$convert -list configure | grep -i delegates`。它应该输出以下内容
    `DELEGATES bzlib fftw fontconfig freetype gs jpeg jng lcms2 lzma png tiff x11 xml zlib`

*   现在你应该设置为运行 `sudo gem install RMagick`

成功安装 RMagick 后 - 检查它的安装位置，转到其中的示例目录并运行一些程序。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-31T17:20:37.247

尝试更改路径，使 /usr/local/bin 在 /usr/bin 之前插入。我找到了这个正在运行的 brew doctor ，它让我完成了 imagemagick 的编译。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-07-05T12:27:50.300

没有解决方案对我有用，最终我跑了`brew doctor`，发现我需要将 imagemagick 与`brew link --overwrite imagemagick`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-02-17T14:34:02.293

我有类似的问题，但在 El Captain。[在这里](https://stackoverflow.com/questions/33216030/gem-install-rmagick-fails-on-os-x-el-capitan)更好地解释。安装 xcode 命令行工具后修复：

```
xcode-select --install 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-07-13T18:30:32.930

我刚刚安装了 rmagick 2.13.2，这个问题就消失了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-27T03:07:15.113

您需要安装 XCode 4.4、命令行工具等。在此处查看完整列表：http: [//tektastic.com/2012/07/getting-rmagic-and-friends-to-work-on.html](http://tektastic.com/2012/07/getting-rmagic-and-friends-to-work-on.html)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-07-27T04:37:14.307

我发现我的解决方案是上面列出的步骤的组合，在[http://tektastic.com/2012/07/getting-rmagic-and-friends-to-work-on.html](http://tektastic.com/2012/07/getting-rmagic-and-friends-to-work-on.html)和这里[http://robots .thoughtbot.com/post/27985816073/the-hitchhikers-guide-to-riding-a-mountain-lion](http://robots.thoughtbot.com/post/27985816073/the-hitchhikers-guide-to-riding-a-mountain-lion)，尽管我不必执行任一帖子中列出的所有步骤。但我确实需要从 XCode 安装命令行工具，前几次我错过了这个细节。我还必须使用自制软件安装 gcc-4.2，并在我的 bin 目录中创建指向该安装的符号链接。

我可能会对不同编译器的情况感到困惑，但我会谨慎使用符号链接 /usr/bin/gcc 到 /usr/bin/gcc-4.2 （这又可能是由安装的 gcc-4.2 的链接自制）。在我意识到我需要安装命令行工具之前，我曾尝试创建该符号链接，然后我开始看到其他 gem 构建失败。安装命令行工具解决了这些问题——我相信 xcode 命令行工具使它成为 llvm-gcc-4.2 的符号链接。

# python - Python 中的 Google Talk/XMPP 音频支持

> ID：11676848
> 
> 赞同：2
> 
> 时间：2012-07-26T19:43:16.670
> 
> 标签：python, audio, xmpp, google-talk

我正在寻找一个 Python 库来与可以处理音频聊天的 Google Talk 进行通信。有很多只能做文本，但我找不到任何支持音频或视频的。有人知道吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-27T00:07:07.327

您需要一个 Python 中的库，该库具有 jingle 的绑定，这是 xmpp 语音的标准。有可用于创建 Python 绑定的[构建指令。](http://libjingle.googlecode.com/svn/trunk/README)

# cakephp - cakephp find('all') 没有正确返回

> ID：11676850
> 
> 赞同：3
> 
> 时间：2012-07-26T19:43:21.740
> 
> 标签：cakephp, cakephp-1.3

所以这是我最新的问题：我在我的 Cakephp 控制器中运行这个查询：

```
$acctRenewLast2Entries = $this->AccountRenew->find
    (
        'all',
        array
        (
            'conditions' => array('Acc_Id' => $plan["Account"]["Acc_Id"]),
            'order' => array('AccR_Id' => 'DESC')
        )
    ); 
```

我期待这条 SQL 语句有 4 条记录。相反，在我的控制器中运行调试时，这是我为上面的每一行得到的（见第一条记录）：

```
app/controllers/admins_controller.php (line 2584)

1

app/controllers/admins_controller.php (line 2584)

Array
(
    [AccountRenew] => Array
        (
            [AccR_Id] => 470
            [AccR_Date] => 2012-06-23 01:21:11
            [AccR_Hstart_Date] => 2012-06-23 01:21:11
            [AccR_Hend_Date] => 2012-08-23 01:21:11
            [AccR_End_Date] => 2013-08-23 01:21:11
            [AccR_Status] => PAID
            [AccR_Reason] => RENEWAL
            [Inv_Id] => 467
            [Inac_Id] => 
            [Acc_Id] => 196
            [AccT_Id] => 44
            [Amount] => 16
            [AccP_Id] => 0
        )

)

app/controllers/admins_controller.php (line 2584)

Array
(
    [AccountRenew] => Array
        (
            [AccR_Id] => 465
            [AccR_Date] => 2012-06-23 01:17:35
            [AccR_Hstart_Date] => 2012-06-23 01:17:35
            [AccR_Hend_Date] => 2012-07-23 01:17:35
            [AccR_End_Date] => 2012-07-23 01:17:35
            [AccR_Status] => PAID
            [AccR_Reason] => RENEWAL
            [Inv_Id] => 462
            [Inac_Id] => 
            [Acc_Id] => 196
            [AccT_Id] => 41
            [Amount] => 16
            [AccP_Id] => 0
        )

)

app/controllers/admins_controller.php (line 2584)

Array
(
    [AccountRenew] => Array
        (
            [AccR_Id] => 269
            [AccR_Date] => 2012-06-06 10:15:56
            [AccR_Hstart_Date] => 2012-06-06 17:15:56
            [AccR_Hend_Date] => 2012-06-20 17:15:56
            [AccR_End_Date] => 2012-06-20 10:15:56
            [AccR_Status] => TRIAL
            [AccR_Reason] => 
            [Inv_Id] => 0
            [Inac_Id] => 
            [Acc_Id] => 196
            [AccT_Id] => 0
            [Amount] => 0
            [AccP_Id] => 0
         )

) 
```

现在，当我运行 sql_dump 时，我得到以下运行的查询：

```
SELECT `AccountRenew`.`AccR_Id`, `AccountRenew`.`AccR_Date`, `AccountRenew`.`AccR_Hstart_Date`, `AccountRenew`.`AccR_Hend_Date`, `AccountRenew`.`AccR_End_Date`, `AccountRenew`.`AccR_Status`, `AccountRenew`.`AccR_Reason`, `AccountRenew`.`Inv_Id`, `AccountRenew`.`Inac_Id`, `AccountRenew`.`Acc_Id`, `AccountRenew`.`AccT_Id`, `AccountRenew`.`Amount`, `AccountRenew`.`AccP_Id` FROM `account_renews` AS `AccountRenew` WHERE `Acc_Id` = 196 ORDER BY `AccR_Id` DESC       4   4 
```

当我在 MySQL 中运行上述查询时，我确实得到了所有 4 条记录，包括数组中显示为 1 的第一条记录（在我的文章顶部）。

我真诚地希望有人可以提供帮助，因为我在过去的 1.5 天里没有任何运气来解释为什么 MySQL 会提取完整的集合，但 Cake 似乎只检索最后 3 个，并将第一条记录替换为“1”的数组”。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:44:30.283

@user996302 这个问题似乎与您指出的我的一张[Cake Lighthouse 票有联系。](http://cakephp.lighthouseapp.com/projects/42648/tickets/2442-problem-in-debug-output-with-data-retrieved-by-modelfind)

@GMOAdmin我怀疑您的模型名称可能有问题，因为[“更新”一词是动词](http://www.spellzone.com/dictionary.cfm?def=renew)，并且由于它没有复数形式，因此这可能会以某种方式阻碍 CakePHP 约定，因为[Inflector 类](http://api20.cakephp.org/class/inflector)可能无法翻译这个。
正确的名词是*[renews](http://en.wiktionary.org/wiki/renewal)*，它是复数形式：*renews*。您可以尝试重命名（[根据惯例](http://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html)）数据库表、模型 - 名称和类名、控制器 - 名称和类名，看看是否有效。

您可以通过以下 Inflector 方法测试 Inflector 是否正确处理此问题：

[Inflector::pluralize($singular)](http://book.cakephp.org/2.0/en/core-utility-libraries/inflector.html#Inflector%3a%3apluralize) , [Inflector::classify($tableName)](http://book.cakephp.org/2.0/en/core-utility-libraries/inflector.html) , [Inflector::tableize($camelCase)](http://book.cakephp.org/2.0/en/core-utility-libraries/inflector.html#Inflector%3a%3atableize)

一个快速的解决方法是使用这种方式发出工作查询，`$this->ModelName->query($queryToRun);`您可以解决这个问题，因为正如您所说，查询在数据库上运行时可以正确运行。总的来说，这是一个真正有趣的问题，我建议你让 CakeCore 团队看看——如果它是可重现的，那么这是一个 BUG，它需要修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T00:09:27.203

很奇怪的问题。

我不知道发生了什么，但我最近阅读了一个错误报告，听起来很像你的问题：[票](http://cakephp.lighthouseapp.com/projects/42648/tickets/2442-problem-in-debug-output-with-data-retrieved-by-modelfind)。

您可以按照作者的建议尝试：将参数 $showHTML ( [cake docs](http://book.cakephp.org/2.0/en/development/debugging.html#basic-debugging) ) 设为 true：

```
debug($var, true, true); 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T22:24:23.543

好吧，我想我已经找到了答案。至少，这给我带来了问题。

[CakePHP](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html) counterCache

我有什么：

```
public $hasMany = array(
    'Flight' => array(
        'className' => 'Flight',
        'foreignKey' => 'user_plane_id',
        'counterCache' => true
     )
); 
```

非常愚蠢，但确实导致了问题。所以也许你也有一个 counterCache ？或者，也许你在关系中设置了另一个错误？

如果您在我的代码片段中没有看到问题。我应该添加`counterCache`到`$belongsTo`而不是`$hasMany`。所以它会是这样的：

```
public $belongsTo = array(
    'UserPlane' => array(
        'className' => 'UserPlane',
        'foreignKey' => 'user_plane_id',
        'counterCache' => true
    )
); 
```

**注意：**我运行的是 CakePHP 2.x 而不是 1.3！

# asp.net-mvc-3 - 选择要填充 html.dropdownlist 的值

> ID：11676858
> 
> 赞同：0
> 
> 时间：2012-07-26T19:43:45.077
> 
> 标签：asp.net-mvc-3

我有两个课程如下

```
public class ODCTE_Major
{
    public int    ODCTE_MajorId { get; set; }
    public string OfficialMajorName      { get; set; }
    public string MajorCode { get; set; }

    ... More unrelated code ....
} 
```

和

```
public class CareerMajor
{
    ...lots of unrealted code to this question left out

    public int ODCTE_MajorId { get; set; }
    public virtual ODCTE_Major ODCTE_Major { get; set; }

} 
```

我添加了一个带有 CRUD 方法的控制器，在 create.cshtml 中有这一行

```
<div class="editor-field">
    @Html.DropDownList("ODCTE_MajorId", String.Empty)
    @Html.ValidationMessageFor(model => model.ODCTE_MajorId)
</div> 
```

选择列表使用 ODCTE_Major 中的 OfficialMajorName 填充它。我需要选择列表来填充 MajorCode 或类似于 MajorCode - OfficialMajorName 的值。

请问有人可以提供帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:04:42.497

将此添加到 ODCTE_Major：

```
public string MajorDisplayName
{
    get { return string.Format("{0} - {1}", MajorCode, OfficialMajorName); }
} 
```

这只是一个只读属性，用于以您希望菜单使用的格式创建显示文本。

然后在 CareerMajor 中，添加：

```
public IEnumerable<ODCTE_Major> Majors{ set; get; } // Thank you Shyju! 
```

这将在您的视图模型中为您提供一个位置，以将您想要在菜单中的专业列表传递给视图。

然后在您的操作方法中，当您创建要发送到视图的 CareerMajor 视图模型时，使用您希望在菜单中显示的 ODCTE_Major 实体填充新的 IEnumberable。

在查看页面上：

```
@Html.DropDownListFor(m => m.ODCTE_MajorId, new SelectList(Model.Majors, "ODCTE_MajorId", "MajorDisplayName", Model.ODCTE_MajorId), "Select One") 
```

这将创建一个 SelectList 来填充下拉列表。SelectList 构造函数说使用 ODCTE_MajorId 作为菜单中 SelectListItem 的值，并使用 MajorDisplayName 作为实际显示在菜单中的文本。它设置选定的值（如果有），并在菜单顶部添加一个带有文本“Select One”的空项。如果您不想要空文本，请随意删除最后一个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:53:36.980

让您的 ViewModel 持有一个`Collection`属性来代表所有可用的专业（用于填充下拉菜单）

```
public class CareerMajor
{  
  //other proiperties
   public int ODCTE_MajorId { get; set; }
   public IEnumerable<ODCTE_Major> Majors{ set; get; }
} 
```

在您的`GET`操作中，填写并发送到您的强类型视图

```
pubilc ACtionResult Create()
{
  var viewModel=new CareerMajor();
  viewModel.Majors=db.GetllAllMajors();  // getting a list of ODCTE_Major objects
  return View(viewModel);
} 
```

在视图中，使用`DropDownListFor`HTML Helper 方法。

```
@model CareerMajor
@Html.BeginForm())
{
   @Html.DropDownListFor(m=>m.ODCTE_MajorId, 
        new SelectList(Model.Majors,"ODCTE_MajorId ","MajorCode"),"select one..")
  //other elements
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T19:57:04.467

在您的控制器操作中：

```
ViewBag.ODCTE_MajorId = new SelectList(availableMajors, "ODCTE_MajorId", "MajorCode"); 
```

*第二个和第三个参数分别是值和文本字段的名称

那么在你看来：

```
 @Html.DropDownList("ODCTE_MajorId", String.Empty) 
```

where`availableMajors`是一个 IEnumerable，其中包含您要列出的专业。

# php - 如何使用 Aptana 调试 prestashop？

> ID：11676861
> 
> 赞同：0
> 
> 时间：2012-07-26T19:44:11.010
> 
> 标签：php, aptana, prestashop

我刚刚下载并安装了[Prestashop](http://www.prestashop.com)，这是一个 PHP 电子商务系统。我还下载并安装了 XAMPP 和[Aptana](http://www.aptana.com)，这是一个用于 PHP 开发的开源 IDE。它使用某种 MVC。（对不起，我对 PHP 完全陌生）。看起来不错，我可以访问该站点，并且我在 Aptana 中执行的更改会反映在我的 localhost 网站中。现在我想调试执行，Aptana 有一个内置调试器，它适用于我从 Internet 下载的测试示例（[此处](https://aptanastudio.tenderapp.com/discussions/suggestions/266-aptana-studio-debugger-for-firefox-36firebug-16)）。有用。但是当我尝试在 Prestashop 项目中设置断点时，它并没有暂停执行。此外，当我单击链接时，调试器会停止。

我真的不知道如何设置它。你有调试PHP的经验吗？我该如何设置？如果它有助于我调试这个系统，我会很好地改变 IDE。

谢谢，奥斯卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:37:35.527

Prestashop 已经内置了一些很好的调试代码。

`config/config.inc.php`将define for 更改为true（您也可以在`_PS_DEBUG_SQL_`此处打开错误报告）并将`config/defines.inc.php`define for 设置为`_PS_MODE_DEV_`true。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-06T16:11:24.160

使用 Netbeans 调试您的 prestashop。在 Netbeans 中，您可以使用单元测试等。详情请查看[Netbeans 教程](http://netbeans.org/kb/trails/php.html)

# android - 使用 CSVWriter 将 Android Sqlite 转换为 .csv - 创建后 csv 文件不可见

> ID：11676863
> 
> 赞同：2
> 
> 时间：2012-07-26T19:44:37.427
> 
> 标签：android, sqlite, export-to-csv

我正在尝试将我的自定义 SQLite 数据库导出为 Excel 可读格式。我正在使用[此处](https://stackoverflow.com/questions/8724866/how-to-convert-data-base-records-into-csv-file-in-android)建议的方法将我的 .db 转换为 .csv。代码似乎运行良好，我没有抛出异常，并且`CSVWriter`说文件已成功导出。我正在导出到`Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).`但是，当我打开设备上的“下载”文件夹时，我看不到任何 .csv 文件。

我通过编写一个简单的文本文件检查了我的代码，文本文件显示在同一目录中，但不是 .csv 文件。此外，我的数据库已经过系统打印测试，它不是空的 - 它正在工作并正确存储信息。

有什么线索吗？我错过了什么吗？我的数据库正在使用`fts3`，这会影响这个吗？这是在复制数据库之前创建 .csv 文件的代码：

```
protected Boolean doInBackground(final String... args)
     {
         File dbFile=getDatabasePath(patientData.DATABASE_NAME);

         File path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS);
         File file = new File(path, "patients.csv");

         try
         {
             file.createNewFile();
             CSVWriter csvWrite = new CSVWriter(new FileWriter(file));
                 ...
             }
          ....
      } 
```

如果需要我提供更多信息，请告诉我！

# python - 如何将整数格式化为两位数的十六进制？

> ID：11676864
> 
> 赞同：33
> 
> 时间：2012-07-26T19:44:47.137
> 
> 标签：python

有谁知道如何在输出始终为两位数的情况下将字符转换为十六进制？

例如，如果我的转换产生 0x1，我需要将其转换为`0x01`，因为我正在连接一个长的十六进制字符串。

我正在使用的代码是：

```
hexStr += hex(ord(byteStr[i]))[2:] 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-07-26T19:46:35.897

您可以为此目的使用字符串格式：

```
>>> "0x{:02x}".format(13)
'0x0d'

>>> "0x{:02x}".format(131)
'0x83' 
```

**编辑**：您的代码表明您正在尝试将字符串转换为十六进制字符串表示形式。有一种更简单的方法可以做到这一点（Python2.x）：

```
>>> "abcd".encode("hex")
'61626364' 
```

另一种方法（也适用于 Python 3.x）是函数`binascii.hexlify()`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-26T19:46:30.420

您可以使用格式功能：

```
>>> format(10, '02x')
'0a' 
```

您不需要删除该`0x`部分（就像您对 所做的那样`[2:]`）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-01-12T17:48:57.673

```
htmlColor = "#%02X%02X%02X" % (red, green, blue) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-10-21T20:19:09.640

如果您使用的是 python 3.6 或更高版本，您还可以使用 fstrings：

```
v = 10
s = f"0x{v:02x}"
print(s) 
```

输出：

```
0x0a 
```

大括号部分的语法与 相同`string.format()`，不同之处在于您使用变量的名称。有关更多信息，请参阅[https://www.python.org/dev/peps/pep-0498/](https://www.python.org/dev/peps/pep-0498/)。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-26T20:06:40.547

标准模块`binascii`也可能是答案，即当您需要转换更长的字符串时：

```
>>> import binascii
>>> binascii.hexlify('abc\n')
'6162630a' 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-26T20:00:24.387

使用[格式](http://docs.python.org/library/stdtypes.html#string-formatting)而不是使用十六进制函数：

```
>>> mychar = ord('a')
>>> hexstring = '%.2X' % mychar 
```

您还可以将数字“2”更改为所需的位数，将“X”更改为“x”以在十六进制字母数字的大小写表示之间进行选择。

许多人认为这是 Python 中旧的 % 样式格式，但我喜欢它，因为格式字符串语法与其他语言（如 C 和 Java）使用的格式相同。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-14T11:58:29.037

最简单的方法（我认为）是：

```
your_str = '0x%02X' % 10
print(your_str) 
```

将打印：

```
0x0A 
```

% 之后的数字将在字符串中转换为十六进制，我认为这样很清楚，来自 C 背景的人（比如我）感觉更像家

# wpf - 克隆 ResourceDictionary 对象

> ID：11676866
> 
> 赞同：3
> 
> 时间：2012-07-26T19:44:52.660
> 
> 标签：wpf, xaml, styles

说我有对象：

```
<Grid x:Key"FooGrid>
   <!--Content Here-->
</Grid> 
```

我通常通过以下方式引用它：

```
<ContentPresenter Content="{StaticResource ResourceKey=FooGrid}"/> 
```

虽然这有效，但如果我第二次调用它，它会删除第一次使用并将其移动到请求的第二次使用。

显然，我调用资源的方法存在问题。如果我想要一个独特的对象实例，类似于 Style 可以创建的对象，那么更好的方法是什么？

我会使用样式，但据我了解，样式不支持定义的内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T22:31:41.183

You can use the [x:Shared](http://msdn.microsoft.com/en-us/library/aa970778.aspx) attribute to do this, e.g.:

```
<Grid x:Key"FooGrid" x:Shared="False"> 
   <!--Content Here--> 
</Grid> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T23:10:57.890

对不起，如果我的英语不好..

发生这种情况，因为该元素是其他元素的逻辑子元素。但是ContentPresenter不是一个ContentControl，那么他就这样做了。

如果你用 ContentControl 尝试同样的事情，你会得到一个运行时错误。

请参阅：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.contentpresenter.content](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentpresenter.content)

阿特，艾伦

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-24T08:36:54.163

我使用“一只小绵羊”的答案来添加 `x:Shared="False"` ，但它破坏了 VisualBrush 的结构，所以我添加到代码中 `VisualBrush vb = Application.Current.Resources["MyBrushName"] as VisualBrush; VisualBrush newVB = vb.Clone();` ，它证明了我的努力。 只使用`.Clone()`是行不通的。

# python - PyQt 中的第 3 方 Python 模块

> ID：11676874
> 
> 赞同：0
> 
> 时间：2012-07-26T19:45:10.210
> 
> 标签：python, pyqt, pyserial

我正在尝试决定一种技术来开发可以与串行端口连接的桌面应用程序。我研究了 python，看起来基于控制台的应用程序并不难 - [http://pyserial.sourceforge.net/](http://pyserial.sourceforge.net/)，我还研究了 PyQt，它可以满足我项目的 GUI 部分。

但是是否可以在 PyQt 中包含像 PySerial 这样的 3rd 方模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T02:01:25.823

PyQt 和 pyserial 配合得很好（事实上，我在我的一个应用程序中使用它们。） pyserial 网站上的示例大多是简单的类似控制台的示例，但没有理由不能从任何 pyserial 对象中获取数据并在 PyQt 中使用它们。例如，您可以获取通过串行端口接收到的数据并将其推送到 QByteArray 或 NumPy 数组或任何适合您喜欢的类似数组中。

一些警告：如果你使用 Serial.readline()，它会阻塞直到它得到一个换行符 (\n)。这可能对您的 GUI 不利。如果您必须使用 readline() 而不是 read()，我建议将您的 pyserial 相关活动放在单独的线程中。你如何做到这一点取决于你，但我建议使用 Qt 的内置线程。然后，您可以在线程内将数据转换为 Qt 类型等。[有关pyqt](https://stackoverflow.com/questions/1595649/threading-in-a-pyqt-application-use-qt-threads-or-python-threads)中的线程的更多信息。

**编辑**：差点忘了。如果有人关心，您也可以使用 PyQt 编写控制台应用程序。只需使用 QCoreApplication 而不是 QApplication。不太清楚为什么要在 python 中这样做，但是，除非你真的很喜欢 Qt 的数据类型......在这种情况下，你可以使用 PyQt 和 pyserial 来编写一个纯控制台应用程序：D

# template-engine - Express JS Jade 引擎 If 语句嵌套在 For 循环中

> ID：11676876
> 
> 赞同：0
> 
> 时间：2012-07-26T19:45:25.790
> 
> 标签：template-engine, pug, express

我似乎无法找到解决方案。

我试图在 Jade 引擎的 for 循环中嵌套一个 if 语句（使用 express js）。

基本代码如下所示：

```
 form
    select
       for obj, i in phoneModel
          option(value='#{i}') #{obj.phone_model} 
```

我想做的是在 for 循环中有一个 IF 语句来检查变量“deviceIndex”是否是某个值。例如。如果 deviceIndex == i，那么做一些事情，否则做一些其他事情。

我试过下面的代码：

```
 form
    select
       for obj, i in phoneModel
          - if(phoneIndex == #{i})
             option(value='#{i}') #{obj.phone_model}
          - else
             option(value='#{i}' selected='selected') #{obj.phone_model} 
```

它给出了“预期缩进，但得到换行符”错误。我希望这是我在 for 循环中放置 if 语句；但是，我已经尝试了几乎所有制表符和空格的组合，以及将“option(val...”行放在与 if 语句在同一行的括号内。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:32:48.763

布尔值周围的 typeof 是怎么回事？手机不应该`phoneIndex == i`被选中吗？此外，Jade 的重点是拥有更简洁的代码。告诉我这是否有效：

```
form
  select
    for obj, i in phoneModel  
      option(value=i, selected=phoneIndex==i)= obj.phone_model 
```

# jboss - 开发基于 Java 的 Web 服务客户端

> ID：11676881
> 
> 赞同：0
> 
> 时间：2012-07-26T19:45:31.727
> 
> 标签：jboss, axis2, jboss5.x, webservice-client, jbossws

我有几个在 JBoss 5.1.0 GA 上运行的 Web 服务和 JBossWs 本机堆栈（随 JBoss 5.1.0 GA 二进制文件一起提供）

这些 Web 服务是简单的 POJO 服务。服务公开的许多 WebMethod 都是复杂对象类型（我将这些复杂类型称为 DTO）和许多自定义定义的异常。这些 DTO 也捆绑在一个 jar 文件中，因此它们也可以在客户端使用。

我开始使用 Eclipse 创建客户端（我知道它是使用 wsconsume 生成客户端存根），我看到该实用程序将从 WSDL 生成 DTO，我找不到任何强制实用程序使用 DTO 和异常的方法jar 文件中提供的类。

我早些时候曾在 SO[上问过一个问题，](https://stackoverflow.com/questions/11047361/creating-webservice-and-client-with-jbossws-using-complex-objects-as-arguments-a)但找不到任何答案。

通过阅读 wsconsume 上的各种资源并使用 eclipse（将使用 JBossWS）生成客户端存根，我现在开始相信我试图实现的目标实际上可能无法使用 wsconsume。

我的问题是：有没有更好的方法来创建一个使用 jar 文件中的 DTO 类的客户端存根。如果可能的话，我愿意更改客户端生成机制并移至轴或任何其他用于客户端生成的库。如果可以为客户端存根生成创建一个 ant 任务也是理想的。

PS：我对网络服务的了解非常有限，如果我在这里的问题很愚蠢，请原谅我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T00:53:23.517

为什么要在 Web 服务中使用数据传输对象？那有必要吗？因为如果您使用此类对象，我认为这些 Web 服务只能在 Java 中使用。这是一个互操作性问题。因此，如果您可以避免使用这些对象，那将是一个好习惯。

# html - 根据屏幕分辨率显示或隐藏 div

> ID：11676883
> 
> 赞同：-1
> 
> 时间：2012-07-26T19:45:35.060
> 
> 标签：html, css, resolution

为了使这个简短而简单，`<div>`如果用户的分辨率为 1024x768，我希望隐藏其中。

因此，如果我为 css left_bar 提供了一个单独的 CSS 文件，那么该模板将`<div id='left_bar'>`如何进行分辨率检查查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T19:48:22.553

```
@media all and (width:1024px) and (height:768px) {
    /* CSS rules here */
} 
```

虽然，这是非常具体的。通常你使用带有`min-width`或类似的媒体查询。

# mysql - MySQL 使用 IF 语句加入重复项

> ID：11676884
> 
> 赞同：1
> 
> 时间：2012-07-26T19:45:35.200
> 
> 标签：mysql, join

```
mysql> describe holidays;
+---------+-------------+
| Field   | Type        |
+---------+-------------+
| hid     | int(11)     |
| name    | varchar(32) |
| date    | date        |
| enabled | int(1)      |
+---------+-------------+

mysql> 

mysql> describe locations;
+----------+--------------+
| Field    | Type         |
+----------+--------------+
| lid      | int(11)      |
| code     | char(2)      |
| location | varchar(255) |
| enabled  | int(1)       |
+----------+--------------+

mysql> describe holidays_locations;
+-------+---------+
| Field | Type    |
+-------+---------+
| hid   | int(11) |
| lid   | int(11) |
+-------+---------+

mysql> SELECT DISTINCT timesheet.tid, timesheet.uid, timesheet.date, timesheet.location,
IF (timesheet.date = holidays.date AND timesheet.location = holidays.lid, 1, 0) AS is_holiday
FROM (`timesheet`)
LEFT JOIN (SELECT holidays.name AS holiday, locations.location as location, holidays.date AS date, locations.lid AS lid
            FROM holidays_locations
            INNER JOIN holidays ON holidays_locations.hid = holidays.hid
            INNER JOIN locations ON holidays_locations.lid = locations.lid) AS holidays ON holidays.date = timesheet.date
WHERE `uid` =  '12'
AND `timesheet`.`date` >= '2012-05-16'
AND `timesheet`.`date` <= '2012-05-31'
ORDER BY date;

+------+-----+------------+----------+------------+
| tid  | uid | date       | location | is_holiday |
+------+-----+------------+----------+------------+
| 2962 |  12 | 2012-05-18 | 5        |          0 |
| 3163 |  12 | 2012-05-21 | 9        |          1 |
| 3163 |  12 | 2012-05-21 | 9        |          0 |
| 3162 |  12 | 2012-05-21 | 5        |          0 |
+------+-----+------------+----------+------------+ 
```

我的问题是，如何在没有重复的“3163”条目的情况下进行此查询？以下是我所期待的。

```
+------+-----+------------+----------+------------+
| tid  | uid | date       | location | is_holiday |
+------+-----+------------+----------+------------+
| 2962 |  12 | 2012-05-18 | 5        |          0 |
| 3163 |  12 | 2012-05-21 | 9        |          1 |
| 3162 |  12 | 2012-05-21 | 5        |          0 |
+------+-----+------------+----------+------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:48:59.773

`is_holiday = 0`您可以使用聚合消除`MAX()`，按列表中的所有其他列分组`SELECT`。

```
SELECT 
  DISTINCT timesheet.tid, 
  timesheet.uid, 
  timesheet.date, 
  timesheet.location,
  /* MAX aggregate will take only the 1, not 0 */
  MAX(IF (timesheet.date = holidays.date AND timesheet.location = holidays.lid, 1, 0)) AS is_holiday
FROM (`timesheet`)
LEFT JOIN (SELECT holidays.name AS holiday, locations.location as location, holidays.date AS date, locations.lid AS lid
            FROM holidays_locations
            INNER JOIN holidays ON holidays_locations.hid = holidays.hid
            INNER JOIN locations ON holidays_locations.lid = locations.lid) AS holidays ON holidays.date = timesheet.date
WHERE `uid` =  '12'
AND `timesheet`.`date` >= '2012-05-16'
AND `timesheet`.`date` <= '2012-05-31'
/* And GROUP BY all other selected columns */
GROUP BY 
  timesheet.tid, 
  timesheet.uid, 
  timesheet.date, 
  timesheet.location
ORDER BY date; 
```

# sql - 如何在 cakephp 中查看 sql 查询

> ID：11676885
> 
> 赞同：0
> 
> 时间：2012-07-26T19:45:41.817
> 
> 标签：sql, cakephp

我有一个用 cakephp 2.0 开发的网站，我想看看，当我对控制器进行查询时，对数据库的查询如下：“SELECT * FROM products;” 是否可以跟踪查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:47:27.643

您可以使用[DebugKit](https://github.com/cakephp/debug_kit/)或在您的布局中添加：

```
echo $this->element('sql_dump'); 
```

# javascript - 加载.js时如何显示javascript错误

> ID：11676888
> 
> 赞同：0
> 
> 时间：2012-07-26T19:45:52.997
> 
> 标签：javascript

> **可能重复：**
> [您如何调试 Javascript 应用程序？](https://stackoverflow.com/questions/5680782/how-do-you-debug-javascript-applications)

当我的 javascript .js 文件中存在错误时，不会显示错误，并且文件不会加载。

有没有一种快速的方法来调试这样的东西？

我必须暂时删除一半文件，测试它，删除另一半，测试它，等等，直到我找出问题所在。

javascript加载页面时如何显示错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:47:57.303

[萤火虫](http://getfirebug.com/)。

*   您可以在“网络”选项卡中查看文件是否未被检索。

*   您可以对其进行调试，甚至可以在“脚本”选项卡中添加断点。

*   您可以在控制台选项卡中查看任何错误/警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:49:32.407

尝试使用 firefox 的 firebug 插件。

您可以设置断点并使用逐步调试模式。

真的很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T19:52:22.430

为您的浏览器获取一个 js 调试器：如果您使用 firefox，则为 firebug。Chrome 和 Safari 具有执行相同操作的内置检查器。像往常一样的IE更尴尬。您还应该在 jslint.com 上检查您的 js，尽管它提供了许多您可以忽略的警告。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-26T19:55:24.500

*   **对于 Firefox**：使用 Firebug
*   **对于 Chrome**：使用控制台
*   **对于 IE**：你搞砸了。（在整个代码中放置 alert()s 并缩小被调用的和未被调用的之间的范围）

* * *

虽然 IE 有许多版本，但这个答案适用于 IE 7，它仍然是大多数大公司和政府机构使用的。当然，有一些解决方法，特别是如果你有 Visual Studio，但问题一开始没有指定浏览器。

IE7 没有控制台，因此用户被搞砸了，必须用 alert()s 注入他/她的 JS 或使用第三方工具。

# c - 使用 C，一个代码，多个标题 if/else？

> ID：11676889
> 
> 赞同：0
> 
> 时间：2012-07-26T19:45:53.330
> 
> 标签：c, if-statement, header

我有一段代码可用于不同头文件中定义的不同数据集的相同函数。这些头文件可能具有不同定义的相同变量。

我可以在调用代码时将参数传递给代码以指定要在哪个数据集上执行该功能。

我想做的是将此参数传递给代码，如果参数等于X，那么我使用headerX，或者如果参数等于YI，则使用headerY。

据我了解，头文件必须包含在 MAIN 之前。是否可以在 MAIN 之后包含头文件，以便我可以编写 if/else 语句来确定我正在调用哪个头文件？

如果我做不到，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:01:11.423

简单地说，你就是做不到。您可以根据条件预先包含标题。只需在文件顶部使用#if-def 块。

但是你不能像 if else 那样包含它：

**这是错误的**

```
if(x == 1)
    #include "header1.h"
else
    #include "header2.h" 
```

**但是您可以在文件顶部执行此操作：**

```
#if SYSTEM_1
    #include "system_1.h"
#elif SYSTEM_2
    #include "system_2.h"
#elif SYSTEM_3
    #include "system_3.h"
#endif 
```

或者您可以只使用支持重载函数的 C++。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:49:18.277

您可以使用 #ifdef - 块来确定在编译之前要使用的数据集。但是，如果您想要不同的数据集，则需要通过更改该定义来更改（重新编译）可执行文件。

否则，您将需要在 C++ 中编译，因为直接 C 不支持重载函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T21:41:50.140

您可以使用宏预处理阶段进行简单的元编程。用类似的东西创建一个“interface_myFunc.h”

```
#define FUNCNAME(T) myFunc_ ## T

void FUNCNAME(theType)(theType t); 
```

用类似的东西创建一个“implement_myFunc.h”文件

```
void FUNCNAME(theType)(theType t) {
 // do something with t
} 
```

然后将此文件包含在另一个文件“myFunc.h”中

```
#define theType toto
#include "interface_myFunc.h"
#undef theType toto

#define theType tutu
#include "interface_myFunc.h"
#undef theType tutu 
```

和类似的定义，“myFunc.c”

```
#define theType toto
#include "implement_myFunc.h"
#undef theType toto

#define theType tutu
#include "implement_myFunc.h"
#undef theType tutu 
```

现代 C，C11，也有方法为你通过所谓的类型泛型宏创建的所有这些函数创建一个公共接口：

```
#define myFunc(X)              \
_Generic((X),                  \
         toto: FUNCNAME(toto), \
         tutu: FUNCNAME(tutu)  \
)(X) 
```

# magento - Magento 自定义消息

> ID：11676896
> 
> 赞同：1
> 
> 时间：2012-07-26T19:46:36.647
> 
> 标签：magento

我们有一个属性代码`web_availability`，用于向客户传达不同形式的产品可用性 - 示例：可用性“80”应该在搜索结果和/或产品详细信息页面上显示“仅限商店”。我们设置的每个可用性值都会在 magento 中自动分配一个选项值，如下所示：

`<input type="text" class="input-text required-option" value="80" name="option[value][532][0]">`

我将变量声明为：

```
 <?php
$_shipping_messaging = $_product->getShippingMessaging(); //looks for a value of "0" or "1" to assign either Free Shipping, or Plus Shipping Messaging
$_shipping_price = $_product->getShippingPrice(); //if product is plus shipping this messages the approximate shipping price on the product

$web_avail_options = $_product->getResource()->getAttribute('web_availability')) {
foreach ($web_avail_options as $web_avail_option) {
    if ($web_avail_option['value'] == $_product->getData('web_availability')) {
        $web_availability = $web_avail_option['label'];
        }
  }
  ?> 
```

将以下内容放入 magento 的 price.phtml 中：

```
 <?php
  if ($shipping_messaging == 0) {
      echo '+ $' . number_format($_shipping_price, 2) . " Shipping"; // displays "+ $x.xx Shipping" on the product page
  } elseif ($_shipping_messaging == 1) {
      echo "Free Shipping"; // displays "Free Shipping" on the product page
  }
  else ($web_avail_option == '70' || '80' || '90'); {
      echo "In Store Only";
  }

  ?> 
```

运输消息（“免费送货”或“+ 4.80 美元运费）显示为我所期望的那样，但是无论产品的可用性如何，它总是显示“仅限商店”消息。我已经尝试了所有可以想象的组合 `==`, `<`, `>`,以及使用我在开头声明的初始变量的不同部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:31:20.323

请注意您的代码，尤其是 else 语句。

`else ($web_avail_option == '70' || '80' || '90'); { echo "In Store Only"; }`

else 语句格式错误，请注意下面的代码。您的 else 语句正在检查网络可用性选项是否为 70，但您没有`elseif`在 OR 运算符之后使用 and ，您正在检查 80。嗯.. 80 始终为真。

一个解决方案：您可能希望将正确的状态保存在一个数组中（例如：`$correct_status = array(70,80,90);`。如果这些代码保存在一个数组中，您可以使用下面的 else 语句。

`elseif(in_array($web_avail_option, $correct_status)) { echo "In store only"; }`

# performance - 为什么 AdvancedDataGrid 呈现所有列而不是可见列？

> ID：11676897
> 
> 赞同：0
> 
> 时间：2012-07-26T19:46:37.713
> 
> 标签：performance, flash, apache-flex

所以我知道 DataGrid 的假定行为是只渲染可见单元格。但是在我的应用程序中，我发现数据网格呈现每个可见行的所有列。任何想法为什么会发生这种情况？

每个列都有自己的基于类型的自定义 itemRenderer：

```
public class CustomColumn extends AdvancedDataGridColumn {
    public function CustomColumn() {
        switch (this.type) {
            case A: this.itemRenderer = RendererA;
            break;
            case B: this.itemRenderer = RendererB;
            break;
            // more similar code
    }
} 
```

谢谢！

编辑：网格属性。CustomAdvancedDataGrid 扩展了 AdvancedDataGrid。

```
<view:CustomAdvancedDataGrid
    id="grid"  
    wordWrap="true"
    alternatingItemColors="[#ffffff,#ffffff]"
    horizontalGridLines="true"
    width="100%"
    height="100%"

    fontSize="11"
    paddingTop="4"
    paddingBottom="6" 
    lockedColumnCount="1"
    verticalLockedSeparatorSkin="{greyLine}"

    styleName="gridRowSelection"
    headerStyleName="gridHeaderGreen"

    dataProvider="{resetGrid(gridModel.hd)}"
    updateComplete="gridUpdateCompleteHandler(event)"

    displayDisclosureIcon="true"
    iconFunction="iconFunction"
    useRollOver="false"

    sortableColumns="false"
    editable="{!this.gridModel.isReadOnly() &amp;&amp; !this.model.budgetGridModel.tagsMenuShowing}"

    draggableColumns="false"
    dragEnabled="{!this.gridModel.isReadOnly() &amp;&amp; (this.gridModel.currColumnDef == null)}"
    dropEnabled="true"
    dragMoveEnabled="true"
    dragStart="dragPreventHandler(event)"
    dragEnter="dragPreventHandler(event)"
    dragDrop="dragDropHandler(event)"
    dragOver="dragOverHandler(event)"
    dragComplete="dragCompleteHandler(event)"

    itemClick="itemClickHandler(event)"
    itemEditBegin="itemEditBeginHandler(event)"
    itemEditBeginning="itemEditBeginningHandler(event)"
    itemEditEnd="itemEditEndHandler(event)"

    scroll="scrollHandler(event)"
    horizontalScrollPolicy="on"
    verticalScrollPolicy="on"
    liveScrolling="false"

    focusThickness="0"
    variableRowHeight="false"
    selectionColor="#f8fac8"
    disclosureClosedIcon="@Embed(source='../asf/icon_plus_expand.png')"
    disclosureOpenIcon="@Embed(source='../asf/icon_minus_minimize.png')"
    headerRenderer="ADGHeaderRenderer"
    getHighLightedColorFunction="getHighLightedColorFunction"
    columnStretch="columnStretchHandler(event)"

    rowColorFunction="rowColourFunction"
    columns="{gridModel.columnHier}"

    displayItemsExpanded="true"
    itemOpen="this.itemOpened(event)"
    itemClose="this.itemClosed(event)"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:20:04.377

AdvancedDataGrid has two properties to set columns: groupedColumns and columns. Set groupedColumns will instantiate renderers for all columns (horizontal scroll will works smoothly but grid need more time for rendering). Set columns - only renderers in visible area.

# xml - 选择 XML 集合中的特定项目

> ID：11676899
> 
> 赞同：0
> 
> 时间：2012-07-26T19:46:39.060
> 
> 标签：xml, xslt, xpath

考虑以下 XML

```
<account>
    <discussionPoints>
        <education category="a" value="1"/>
        <education category="b" value="42"/>
        <education category="c" value="55"/>
    </discussionPoints>
</account> 
```

我试图获得类别为“a”的教育价值的价值。特定的教育可能存在也可能不存在。DiscussionPoints 集合将始终存在，尽管它可能为空。我是 XSLT 的新手，需要一些指导。

* * *

**编辑**修正了不正确的结束标签

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T20:03:13.587

使用以下 XPath 表达式：

`/account/discussionPoints/education[@category='a']/@value`

它遵循子轴三次以匹配一个`education`元素。然后它检查属性轴是否`category`不跟随它（如谓词中所述），然后，如果值为`category`，`'a'`它再次跟随属性轴以获取`value`属性值。

# javascript - 这对于 AngularJs 过滤是否正常

> ID：11676901
> 
> 赞同：22
> 
> 时间：2012-07-26T19:46:46.767
> 
> 标签：javascript, angularjs

我对 Angular 很陌生，但我觉得这有点疯狂。

我在一个控制器范围内通过 ng-repeat 显示了多个集合。每个列表都有一个输入字段来执行简单的查询。我在我的代码中使用了各种过滤器，最后我在我的过滤器函数中放置了一个 console.log。我意识到每次为一个列表调用我的过滤器函数时，都会为范围内的所有列表调用它。此外，它每次调用过滤器函数两次。因此，对于 3 个集合，过滤其中一个列表将调用过滤器函数 6 次。

我想也许这只是我的自定义过滤器，所以我在默认过滤器功能上尝试了它。相同的故事。这是我的代码：

[https://dl.dropbox.com/u/905197/angular-filter-test.html](https://dl.dropbox.com/u/905197/angular-filter-test.html)

转到控制台并亲自查看：/

我在这里做错了什么？这似乎是一件很简单的事情，但它做了很多工作。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-26T20:19:08.513

这是正常的，angularjs 使用了 'dirty-check' 的方法，所以它需要调用所有的过滤器来查看是否存在任何变化。在此之后，它检测到您对一个变量（您键入的变量）进行了更改，然后再次重新执行所有过滤器以检测它是否有其他更改。

[看这个](https://stackoverflow.com/questions/9682092/databinding-in-angularjs)问题的第一个答案

# php - 使用 PHP 将文件块附加到 2GB 文件

> ID：11676902
> 
> 赞同：0
> 
> 时间：2012-07-26T19:46:48.013
> 
> 标签：php, file-io, append, 32-bit, chunks

我正在使用 Resumable.js 库以 1 MB 块上传文件，然后在 32 位 linux 服务器（PHP 5.3.14、Apache 2.0）上使用 PHP 将它们拼凑在一起

这很好用，除了超过 2GB 的文件。

当我上传大于 2GB 的文件时，它似乎工作正常，但当您实际查看文件属性时，大小始终为 2147483648 字节。

根据我的阅读，我理解这是 PHP 使用 32 位整数的限制。

我读过设置 CFLAGS="-D_FILE_OFFSET_BITS=64" 标志并重新编译 PHP 将允许 PHP 打开大于 2GB 的文件。

我的问题是，如果我这样做，这会解决我的问题，还是文件的打开不仅仅是问题，还有文件的附加？

如果这可以解决我的 2GB 问题，是否还有（更高的）理论最大文件大小？

如果我完全不在基地并且这个标志不能解决我的问题，除了切换到 64 位服务器之外，还有其他潜在的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:07:28.477

在 32 位机器上，您被 Linux 限制在 2GB 文件大小限制（请参阅[http://linuxmafia.com/faq/VALinux-kb/2gb-filesize-limit.html](http://linuxmafia.com/faq/VALinux-kb/2gb-filesize-limit.html)）。

您可能需要考虑将整个文件拆分为一些较小的块，或者使用 64 位机器。通常，出于性能目的，在许多系统中通过块实现避免大于 GB 的文件。

# python - gtk 窗口关闭后退出无限循环

> ID：11676904
> 
> 赞同：1
> 
> 时间：2012-07-26T19:46:51.523
> 
> 标签：python, pygtk

我正在创建一个程序，不断检查 MySQL 数据库中的更改，并根据更新 GTK 显示。不断检查的部分处于无限循环中。

我想要的是，一旦 GTK 窗口关闭，我就可以跳出无限循环。

但我不知道使用什么条件。我试过了

```
if !window: 
```

和

```
if window == None: 
```

但无论哪种情况，它都不起作用。

我的代码结构是这样的：

```
while True:

    # my code

    while gtk.events_pending():
         gtk.main_iteration()

    # something to exit here

window.connect("destroy", gtk.main_quit()) 
```

我不知道在那里放置“window.connect”是否会导致问题，因为窗口似乎关闭得很好。另外，如果我将它放在循环内或循环之前，我会得到一个运行时错误：在主循环之外调用。

所以要重新迭代，如何使用窗口关闭作为条件退出无限循环？我不希望用户必须使用 Ctrl + C。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:52:05.947

这是一个经典的后台线程问题。你需要有一个这样的循环：

```
closing = False

while not closing:
    // do the MySQL stuff 
```

然后将信号处理程序连接到将关闭设置为 True 的窗口销毁事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:56:25.810

pygtk 应用程序的基本结构通常是这样的：

```
win = gtk.MyWindow()
win.connect("destroy", gtk.main_quit)  # Note no paretheses after main_quit. 
gobject.timeout_add(1000, win.check_DB)  
win.show_all()
gtk.main() 
```

该`gobject.timeout_add`命令将`win.check_DB`每 1000 毫秒调用一次该方法。

* * *

`win.connect("destroy", gtk.main_quit)`重要的是不要在 后面加上括号 `main_quit`。您将函数对象传递`gtk.main_quit`给`win.connect`方法，而不是调用的返回值，`gtk.main_quit()`如果添加括号会发生这种情况。

由于`gtk.main_quit()`退出应用程序，此处使用括号会过早停止程序。

# asp.net - 基于 ASP OnText 事件的控制按钮控件

> ID：11676907
> 
> 赞同：0
> 
> 时间：2012-07-26T19:47:01.603
> 
> 标签：asp.net, telerik, rad-controls

我要做的是根据已输入文本框中的字符数启用或禁用特定按钮。

该事件仅在我单击文本框时触发，也许我正在寻找其他东西？

```
<telerik:RadTextBox ID="InputVinInformationTextBox" runat="server"
    Skin="Office2010Blue"
    Width="250px"
    MaxLength="16"
    OnTextChanged="InputVinInformationTextBox_OnText"
    AutoPostBack="true">
</telerik:RadTextBox>

protected void InputVinInformationTextBox_OnText(object sender, EventArgs e)
{
    if (InputVinInformationTextBox.Text.Length >= 8)
    {
        VinSubmitButton.Enabled = true;
    }
    else
    {
        VinSubmitButton.Enabled = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:55:17.497

如果您不介意使用 jQuery，您可以删除该`OnTextChanged`函数并将该功能绑定到`keyup`事件。您需要做的就是在`<head>`标签中添加以下内容：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
    $(document).ready(function() {
        $("#<%=InputVinInformationTextBox.ClientID%>").keyup(function() {
            if (InputVinInformationTextBox.Text.Length >= 8)
            {
               VinSubmitButton.Enabled = true;    
            }
            else
            {
                VinSubmitButton.Enabled = false;
            }
        }
    });
</script> 
```

我不确定您的 VinSubmitButton 是什么，但我假设，因为它在您的示例中有效，所以这是您已经存储的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:55:30.593

此行为是设计使然：

> 所有 RadInput 控件都提供 TextChanged 服务器事件，该事件在 AutoPostBack 属性设置为 true、用户键入有效条目并且输入失去焦点时引发。
> 
> 仅当输入控件的值实际更改时才会发生 TextChanged 事件。如果用户更改了输入控件中的字符串，但实际上并未更改值...则不会发生 TextChanged 事件。

有关详细信息，请参阅 Telerik 网站上的此[帮助主题。](http://www.telerik.com/help/aspnet-ajax/input-server-ontextchanged.html)

我建议`OnTextChanged`您像以前一样使用该事件，因为它只会在输入更改之前的值的有效文本时触发`RadTextBox`。

或者，您可以使用 JavaScript 确定何时输入了适当数量的字符，然后手动触发请求。

```
<telerik:RadTextBox ID="InputVinInformationTextBox" runat="server"
    Skin="Office2010Blue"
    Width="250px"
    MaxLength="16"
    OnLoad="InputVinInformationTextBox_OnLoad">
    <ClientEvents OnKeyPress="InputVinInformationTextBox_OnKeyPress" />
</telerik:RadTextBox>

<script type="text/javascript">
    function InputVinInformationTextBox_OnKeyPress(sender, args) {
        var text = sender.get_value();
        if (text.length >= 8) {
            var ajaxManager = $find('<%= RadAjaxManager.GetCurrent(Page) %>');
            ajaxManager.ajaxRequestWithTarget(sender.get_id(), '');
        }
    }
</script> 
```

上面的代码假设您也在`RadAjaxManager`页面上使用 a 并且它已被配置为在由`RadTextBox`. 您需要在`OnLoad`控件事件期间（或以后）检查 RadTextBox 值，以便为控件初始化所有 ViewState 和表单值。

```
protected void InputVinInformationTextBox_OnLoad(object sender, EventArgs e)
{
    if (InputVinInformationTextBox.Text.Length >= 8)
    {
        VinSubmitButton.Enabled = true;
    }
    else
    {
        VinSubmitButton.Enabled = false;
    }
} 
```

# magento - 如何向按钮添加值并附加要在单击时运行的方法？

> ID：11676909
> 
> 赞同：1
> 
> 时间：2012-07-26T19:47:03.377
> 
> 标签：magento

```
<delete_gamecode translate="label">
    <frontend_type>button</frontend_type>
        <value>button</value> 
```

所以在我的 system.xml 中，我创建了一个按钮，但它只显示一个没有文本的按钮。如何为按钮添加值？

另外，我也希望该按钮可以删除游戏代码。我怎样才能做到这一点？

有没有办法让我将 JavaScript 附加到这些按钮上，以便我可以进行一些 JavaScript 确认？例如，当我点击按钮后，它会说“你确定要删除这个游戏代码吗？”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:09:22.923

你需要一个`<frontend_model>`. 示例请参考以下文件：

```
app/code/core/Mage/Core/etc/system.xml
app/code/core/Mage/Adminhtml/Block/System/Config/System/Storage/Media/Synchronize.php
app/design/adminhtml/default/default/template/system/config/system/storage/media/synchronize.phtml 
```

# jquery - 使此 slideToggle 功能更清洁

> ID：11676916
> 
> 赞同：0
> 
> 时间：2012-07-26T19:47:21.113
> 
> 标签：jquery, slidetoggle

我提前感谢您阅读我的问题。

我是任何编程语言的新手。我编写了一些 jQuery 函数，每个 div 框在单击时打开和关闭。

我的想法是编写代码，当一个 div 打开所有其他 div 关闭时，它就会起作用。它非常实用，但我的代码现在太乱了。我想知道是否有人可以给我一些关于清理这个烂摊子的建议。

```
$(document).ready(function(){
var open_footer = 'click to hide';
var close_footer = 'click to see detail';

$('.text_area').hide();
$('.text_area>img').remove(); 
$('.click_me:eq(0)').click(function(){

    $(this).next('.text_area').slideToggle(100, function(){
    if($(this).is(':visible')){
    $('.text_area:eq(1)').hide(); $('.text_area:eq(2)').hide()
       $('.text_area:eq(3)').hide();
    $('#article_footer1').text(open_footer);
    $('#article_footer2').text(close_footer);

    $('#article_footer3').text(close_footer);$('#article_footer4').text(close_footer);
    $('.text_area:eq(0)').append('<img class="text_area_img" src="Hicks_Nat.jpg" "no-repeat"/>');
    $('.text_area:eq(1)>img').remove();$('.text_area:eq(2)>img').remove();$('.text_area:eq(3)>img').remove();
    } else if ($(this).is(':hidden')){

        $('#article_footer1').text(close_footer);
        $('.text_area:>img').remove();
        }
    });
}); 
```

这是一个代码块，我基本上还有 3 个类似的块。无论如何我可以简化这个吗？

编辑/这是CSS

```
 .click_me{
display: block;
display: none;

padding:10px;
width: 550px;
float:left;
margin-top:15px;
margin-left: 25px;
height: 75px;
overflow: hidden;
position: relative;
background:radial-gradient(center,circle,#EEEEE0 50%, white 80%);
opacity: 1;
border-radius:10px;
border: 1px solid silver;
-moz-border-radius:10px;
-webkit-border-radius:10px;
-moz-box-shadow:#999 2px 0px 3px;
box-shadow:rgb(110,110,110) 6px 6px 4px;
 }
.click_me:hover{
background: #DCDCDC;
 }
 .text_area{
font-family:arial;
font-weight: bold;
font-size: 14px;
text-align:left;
background:white;
border: 1px solid silver;
border-radius: 10px;
box-shadow:#999 2px 0px 3px;
margin-top:10px;
padding: 10px;
float:right;
max-height: 600px;
width: 500px;
overflow: auto; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:21:55.163

清理代码的方法主要是使用 CSS。因为我不知道你的代码是什么样的，所以我做了一些猜测。我没有完成这个，但要点在那里，应该让你开始缩短/清理你的代码：

CSS

```
.hidden {
    display: none;
}

.openText:after {
    content: "click to hide";
}

.closeText:after {
    content: "click to see detail";
} 
```

HTML

```
<div class="section hidden" style="border: 2px solid orange; padding: 3px;">
    <text-area class="text_area">First</text-area>
    <p>Some more text here or images or whatever</p>
</div>
<footer class="click_me article_footer"></footer>
<div class="section hidden" style="border: 2px solid orange; padding: 3px;">
    <text-area class="text_area">Second</text-area>
    <p>Some more text here for section 2</p>
</div>
<footer class="click_me article_footer"></footer>
<div class="section hidden" style="border: 2px solid orange; padding: 3px;">
    <text-area class="text_area">Third</text-area>
    <p>Section 3 additional stuff.</p>
</div>
<footer class="click_me article_footer"></footer> 
```

JAVASCRIPT：

```
$(document).ready(function(){
    function myToggle(ele) {
        $(ele).prev('div').toggleClass('hidden');
        $(ele).toggleClass('openText closeText');
    };

    $('.article_footer').addClass('closeText');
    $('.click_me').click(function() {
        var triggerElem = this;
        $('.openText').each(function() {
            if (this != triggerElem) {
                myToggle(this);
            }
        });
        myToggle(this);
    });
}); 
```

# php - 使用 Wordpress 页面模板减少编辑页面所需的 Html 数量

> ID：11676922
> 
> 赞同：1
> 
> 时间：2012-07-26T19:47:46.423
> 
> 标签：php, html, wordpress, templates, content-management-system

我正在为我的公司设计一个使用 WordPress（作为 CMS）的网站，以帮助新员工了解我们，但最终将由不同的部门管理。在看到与 css 和 jquery 一起使用的大量 div 标签等以使其看起来可以接受之后，很明显培训文档可能只是一个 HTML 手册。我对 php 不是很好，但是在阅读了 WordPress 中的自定义页面模板之后，我想知道是否有一种方法可以在 WordPress 的 HTML 编辑器中使用一个具有特定含义的 div 标签，该标签将由页面模板解释并实现更复杂的 HTML 标签？这甚至合乎逻辑吗？

提前感谢您的帮助，如有必要，我可以澄清一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T20:07:29.760

> 一种在*WordPress 的 HTML 编辑器*中使用具有*特定含义的**标签*的方法，该标签将由页面模板*解释并实现**更复杂*的HTML 标签

 ***[简码](http://codex.wordpress.org/Shortcode_API)***

# ios - iOS：在 cellForRowAtIndexPath 之外更改 UITableViewCell：

> ID：11676925
> 
> 赞同：1
> 
> 时间：2012-07-26T19:47:52.970
> 
> 标签：ios, uitableview

我正在尝试在我的 UITableView 中实现一个“加载更多”单元格。

如何以编程方式更改单元格“加载更多”的内容、高度等？我假设这可以通过获取选定的单元格来完成，如下所示。例如，当我想更改背景颜色时 - 它没有效果。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if(indexPath.row == 2){
        UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T20:01:12.630

调用这个函数：

```
- (void)reloadRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation (UITableViewRowAnimation)animation 
```

像这样的东西：

```
NSIndexPath* rowToReload = [NSIndexPath indexPathForRow:3 inSection:0];
NSArray* rowsToReload = [NSArray arrayWithObjects:rowToReload, nil];
[UITableView reloadRowsAtIndexPaths:rowsToReload withRowAnimation:UITableViewRowAnimationNone]; 
```

更多信息[在这里](https://stackoverflow.com/questions/5418655/how-to-reload-and-animate-just-one-uitableview-cell-row)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:57:56.043

我认为直接调用表格视图委托消息不是一个好方法......当你必须为这个“加载更多”单元格视图显示一个额外的行时，你可能想要设置一个标志，然后调用 reloadData表格视图的消息（或插入/重新加载单个单元格视图）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T19:58:36.260

如果你想改变高度，这样做：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
        if(indexPath.row == 0){
            return 25;
        } else {
            return 120;         
        }
} 
```

如果你想改变颜色，这样做

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
        if(indexPath.row == 0){
            cell.backgroundColor =  [[UIColor alloc]initWithRed:50.0/255.0 green:50.0/255.0 blue:100.0/255.0 alpha:1];
        } else {
            cell.backgroundColor = [UIColor whiteColor];
        }

//or use cell.textLabel.textColor to change the text color

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T08:20:12.940

如果您的负载更多位于表格的最底部，请将其实现为表格页脚。您不会用额外的索引搞砸您的数据源，并且您将无需轻量级来修改它/调整它的大小，因为您认为合适。

类似于：tableView.tableFooterView = theFooterView;

加载下一页后，如果是最后一页，只需通过在 table 上将属性设置为 nil 来删除页脚。

关于您的片段：-cellForRowAtindexPath:（在表格视图上）如果单元格不可见，则不会返回任何内容。此外， tableView:cellForRowAtIndexPath （数据源版本）将撤消您在再次调用该单元格时可能执行的操作。将所有单元格修改代码放入您的数据源中，并在您希望它们更改时在表格上调用适当的重新加载单元格方法。

# php - 如何使评论系统以正确的文本格式显示回来

> ID：11676926
> 
> 赞同：0
> 
> 时间：2012-07-26T19:47:52.350
> 
> 标签：php, mysql, html

因此，我使用 php 和 mySQL 为我的网站创建了一个有效的评论系统。我遇到的问题是保留用户提交评论的格式。我有一个文本框，用户可以在其中输入他们的评论。假设用户在 3 个单独的段落中输入他们的评论。如果对 html 没有任何了解，用户会合理地期望文本框中的回车符在文本显示回网站时延续到 3 个单独的段落中。显然情况并非如此，因为 html 会忽略所有空白。我怎样才能使它正确标记用户评论并在每个段落周围使用 p 和 /p 标签输入数据库，以便评论看起来像用户期望的那样？facebook 等系统如何在不让用户明确输入的情况下跟踪格式问题，例如换行符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:49:28.823

输出里面的评论`<div style="white-space: pre-wrap">`。这将保留多个空格和换行符序列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:53:47.637

尝试使用 WYSIWYG 编辑器而不是简单的文本区域。我刚刚搜索了“jquery wysiwyg”并将其作为我的第一个结果：[http ://redactorjs.com/](http://redactorjs.com/)

那里还有很多其他人。这只是我看到的第一个。

# objective-c - UIView 动画“倒带”平移手势：递归？

> ID：11676927
> 
> 赞同：1
> 
> 时间：2012-07-26T19:47:55.043
> 
> 标签：objective-c, animation, uiview

我有一个场景，用户将 UIView 拖到某个地方；我想将它返回到它开始的位置，并且我希望它沿着相同的轨道以用户拖动的相同速度返回。我想出了一个递归解决方案，如下所示：

```
@property (...) NSMutableArray *dragTrack; // recorded during pan gesture

- (void)goHome
{
        [self backtrack: [self.dragTrack count] 
                         withDelay: 1.0 / [self.dragTrack count]];  
                 // interim version of delay; will implement accurate timing later
}

- (void)backtrack: (int)idx withDelay: (double)delay
{
    if (idx > 0){
        [UIView animateWithDuration:0 delay:delay options: 0
        animations: ^{
            self.center = [[self.dragTrack objectAtIndex:idx - 1] CGPointValue];
        }
        completion:^(BOOL finished){
            [self backtrack: idx - 1 withDelay: delay];
        }];
    } else {
        // do cleanup stuff
    }
} 
```

这行得通，递归深度似乎不是问题——我的拖曳轨迹通常只有几百点长。（我假设递归调用回溯优化尾调用的机会相当渺茫？）。但我仍然想知道：对于我想要实现的目标，这是一个合理/正常/安全的解决方案吗？或者有没有更简单的方法将时间戳和状态的集合传递给动画并说“播放这些”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:24:13.283

你**没有在那里引起递归**。由于完成块是异步调用的，它并没有深入到函数堆栈中。您可以通过在此处设置断点并检查堆栈跟踪来自己查看。
您可以想象`NSTimer`那里触发理论上无限次并且不会导致递归。

对于你的第二个问题，你可以制作这样的动画。它被调用`CAKeyframeAnimation`并且它是`QuartzCore`框架的一部分。它需要您使用图层而不是视图，但这并不*难*。

请注意您的代码：尝试使用选项`UIViewAnimationOptionCurveLinear`使动画更流畅。

# javascript - 具有公共 getter 和 setter 方法的 JavaScript 对象

> ID：11676929
> 
> 赞同：0
> 
> 时间：2012-07-26T19:48:01.403
> 
> 标签：javascript, class, inheritance, constructor, prototype

昨天，我发了一篇关于[原型继承和构造函数](https://stackoverflow.com/questions/11662573/confused-about-javascript-prototypal-inheritance-with-constructors)的文章。我最终确定了一种方法，该方法可以使代码保持整洁，并以可能对性能产生轻微影响为代价将原型单独放置：

```
function Card(value) {
    // setValue is a public instance method
    this.setValue = function (val) {
        if (!range[val]) {
            val = drawRandom();
        }

        // value is a public instance variable
        this.value = val;

        return val;
    };

    this.setValue(value);
} 
```

然而，我对这种方法的问题是，每当我想设置 Card 实例的值以获得验证时，我都必须调用 setValue 方法。我想做的是有一个自定义的setter方法。这是我到目前为止所拥有的：

```
function Card(val) {
    // value is a private instance variable
    var value;

    // This is a private instance method
    // It's also self-invoking, but that's beside the point
    (function (x) {
        if (!range[x]) {
            x = drawRandom();
        }

        value = x;
    }(val));

    this.__defineGetter__("value", function () {
        return value;
    });

    // Some code duplication
    this.__defineSetter__("value", function (x) {
        if (!range[x]) {
            return false;
        }

        value = x;

        return x;
    });
} 
```

这很好用。调用`var card = new Card()`给了我一个随机值的实例，调用`card.value = null`失败是因为它超出了范围。

我对此的问题，除了它显然更长的事实之外，似乎我正在复制一些代码。如果 setter 方法与构造函数一起调用，那就太好了。这样，我可以消除整个自调用私有实例方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:55:21.297

函数是 Javascript 中的第一类对象，所以你完全可以这样做来消除重复：

```
function setter (x) {
    if (!range[x]) {
        return false;
    }
    return x;
}
(function (x) {
    value = setter(x);
    if (!value) {
        value = drawRandom();
    }

}(val));

this.__defineGetter__("value", function () {
    return value;
});

// Some code duplication
this.__defineSetter__("value", setter); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:55:06.590

首先，您应该始终设置`value`with `obj.value = newValue`，即使是在内部，因为它会调用您的验证。在构造函数中时，这意味着：

```
this.value = val; 
```

但是，如果你在声明 setter 和 getter*之前*这样做，那将不起作用。所以把它移到*后面*，这样 setter 函数在设置时就会存在。

* * *

这里的工作示例：http: [//jsfiddle.net/8tCjm/4/](http://jsfiddle.net/8tCjm/4/)

```
var drawRandom = function () {
    return Math.floor(Math.random() * 3) + 1;
};

var range = {
    1: 'Ace',
    2: 'Two',
    3: 'Three'
};

function Card(val) {
    var value;

    this.__defineGetter__('value', function () {
        return value;
    });

    this.__defineSetter__('value', function (x) {
        if (range[x]) {
            value = x;
        } else {
            value = drawRandom();
        }

        return value;
    });

    this.value = val;
};

console.log(new Card(1).value); // 1
console.log(new Card(2).value); // 2
console.log(new Card(3).value); // 3

console.log(new Card(987).value); // not 987 (1-3)
​ 
```

# wordpress - 域上的多个 Wordpress 博客

> ID：11676930
> 
> 赞同：1
> 
> 时间：2012-07-26T19:48:01.747
> 
> 标签：wordpress, installation

我在 domain.com 上有一个自定义 PHP/MySQL 电子商务网站。

我有多个 Wordpress 博客，我希望它们具有以下 URL 结构：

*   domain.com/blog-one/
*   domain.com/blog-二/
*   domain.com/blog-三/
*   domain.com/blog-四/

这些博客中的每一个都完全独立于其他博客。每个都有自己的主题、内容、数据库等...

这可能吗？

即使有可能，我是否要求将这些设置为子文件夹而不是子域的潜在问题？

谢谢

布雷特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T21:52:48.307

为什么不使用 WPMU 设置为文件夹结构？电子商务网站可以是根目录下的默认“博客”，其他博客将具有您想要的上述结构。此外，您可以更轻松地维护它们，因为它们将共享相同的基本代码、插件等，同时每个主题和内容都有不同的主题和内容。

[法典](http://codex.wordpress.org/Create_A_Network)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T19:50:35.167

这应该没问题。我目前在两个不同的文件夹中有两个 Wordpress 博客。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T07:02:44.397

是的，您可以在一个域上拥有多个 WordPress 博客。

在安装多个 WP 之前，请查看其他人发布的每个答案。你可以有更好的解决方案，然后安装多个 WP。

# c - localtime 在 linux 中使用 struct tm* & stat* 引发警告的任何具体原因？

> ID：11676935
> 
> 赞同：0
> 
> 时间：2012-07-26T19:48:11.570
> 
> 标签：c, linux, time, stat, localtime

我有这个简单的代码（项目的一部分）：

```
void displayFileProperties(struct stat* file,char*  outputProperties , char * path)
{

    struct tm* time;

        // code 
        // code
        time = localtime(&file->st_mtim);

        // code 

} 
```

日食不断向我发出警告的地方：

```
passing argument 1 of ‘localtime’ from incompatible pointer type [enabled by default]   main.c  /ex4    line 340    C/C++ Problem 
```

知道如何解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:52:01.530

`st_mtim`是一个结构时间规范（秒和纳秒）。你想要`st_mtime`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:52:27.817

完全改变答案：

建议：

1）确保你#include这些标题：

```
#include <time.h>
#include <sys/types.h>
#include <sys/stat.h> 
```

2) 将指针指向“const”

```
time = localtime((const time_t *)&file->st_mtime); 
```

3）发回发生的事情

==================================================== ===

其他建议：

1）请阅读这两个链接：

> *   [C stat 结构没有 st_ctime 字段，但只有 st_ctim](https://stackoverflow.com/questions/8403963/c-stat-struct-does-not-have-st-ctime-field-but-only-st-ctim)
>     
>     
> *   [http://linux.die.net/man/2/lstat](http://linux.die.net/man/2/lstat)
>     
>     
> 
> 从内核 2.5.48 开始，stat 结构支持三个文件时间戳字段的纳秒分辨率。如果定义了 _BSD_SOURCE 或 _SVID_SOURCE 功能测试宏，Glibc 使用 st_atim.tv_nsec 形式的名称公开每个字段的纳秒分量。这些字段在 POSIX.1-2008 中指定，从 2.12 版开始，如果 _POSIX_C_SOURCE 定义为 200809L 或更大，或者 _XOPEN_SOURCE 定义为 700 或更大，glibc 也会公开这些字段名称。如果上述宏均未定义，则纳秒值将以 st_atimensec 形式的名称公开。在不支持亚秒时间戳的文件系统上，纳秒字段返回值为 0。

2) 显然，makefile（即“工作”）有一个Eclipse 没有的#define，反之亦然。

可能是 _POSIX_C_SOURCE 和/或 _XOPEN_SOURCE 之一。

运行此命令以查看命令行（makefile？）环境中存在的内容：

`gcc -dM -E - < /dev/null | less`

3）请发回你找到的东西！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T20:21:58.730

你会想用这个来代替：

```
time = localtime(&file->st_mtime); 
```

请注意末尾添加的“e”。st_mtim 是一个 timespec，添加了 'e' 它是一个 time_t （你需要什么）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-14T22:45:09.057

我对 Eclipse 有同样的问题：字段 st_mtime 无法解析（语义错误）

通过右键单击项目，选择索引->“刷新所有文件”修复了 Eclipse 中的问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-22T03:42:24.983

```
#include <malloc.h>
#include <time.h>
#include <stdio.h>

static struct tm* alarmTime(void);

int main(){
    printf("Hour :%i\n", alarmTime()->tm_hour);
    printf("Minute :%i\n", alarmTime()->tm_min);
    return 0;
}

static struct tm* alarmTime(void){
    time_t now = time(NULL);
    struct tm* ptm;
#ifdef HAVE_LOCALTIME_R
    struct tm tmbuf;
    ptm = localtime_r(&now, &tmbuf);
#else
    ptm = localtime(&now);
#endif
    return ptm;
} 
```

# html - HTML 背景/布局

> ID：11676937
> 
> 赞同：2
> 
> 时间：2012-07-26T19:48:14.233
> 
> 标签：html, css

我刚刚进入 HTML 和 CSS，我有一个快速的问题。有没有办法让父元素的大小变大以容纳它的一个子元素？我设置了背景`<html>`。然后在正文中，我有一个 div，它设置了不同的背景颜色，并且不像整个页面那样宽/高。这留下了两种色调的设计。然后，我有一个嵌套的 div，其中包含要显示的所有内容。这一切都很好，除非页面内容足够需要滚动条。如果发生这种情况，两种背景颜色都会在屏幕的原始底部消失。这个问题非常烦人，从我读过的内容来看，没有很好的方法来处理它，但我想看看是否有人知道。我设置了以下属性：

```
html {
    background: [gradient code...]
    height: auto;
    min-height: 100%;
    background-repeat: no-repeat;
    background-size: 100%;
}

body {
    height: auto;
    width: 100%;
    position: absolute;
    bottom: 0;
    top: 0;
    margin: 0;
    padding: 0;
    border: 0;
}

div.background {
    background-color: #D0D0D0;
    text-align: center;
    height: auto;
    width: 70%;
    position: absolute;
    top: 150px;
    bottom: 30px;
    left: 15%;
    margin: 0;
    padding: 0;
    border-radius: 7px;
}

div.container {
    height: auto;
    width: 70%;
    position: absolute;
    left: 15%;
    bottom: 0;
    top: 0;
} 
```

Where`div.background`具有第二个背景颜色，并`div.container`在页面上显示内容。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T19:51:29.073

不使用`position: absolute`怎么办？删除它（以及相关的`top`, `left`, `bottom`...）并用正确的边距替换它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:51:34.697

我相信如果您在父项上指定大小（宽度，高度）自动（或者只是不指定大小而将其保留），它会增长/缩小以适合孩子的大小（它不能递归工作，所以您可能想要上升到树中的最后一个父级）。避免绝对定位（http://www.w3schools.com/Css/css_positioning.asp）也可以解决问题，浮动元素或不同的 z-index 也可以解决问题，但我认为父级过度增长。 ..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T19:52:49.213

如果您摆脱绝对 div.background 的宽度和位置并将绝对位置更改为 div.container 的相对位置，您应该会很好

* * *

# mysql - 编写这些 SQL 语句的更好方法

> ID：11676949
> 
> 赞同：-1
> 
> 时间：2012-07-26T19:48:52.943
> 
> 标签：mysql, sql

我想读取数据以进行报告。目前，我使用另一个表的计算数据填充一个表，并从填充的表中读取数据以进行报告。我目前的逻辑是删除旧数据并插入新数据，所有这些都在一个事务中。

**更新**

要求

1）下面的逻辑是每秒运行一次。请注意，其他进程也会以相同的刷新率更新 tableB。

2) 表 B 用于报告目的。TableA 和 TableB 位于不同的数据库中。

3) TableB 包含大约 1000 万行，大约 400 万行将由下面的代码每秒更新一次。其他进程也以相同的刷新率更新tableB中的其他部分数据（6 = 10-4百万）。

我担心的是：

1) 三个语句使用相似的 sum 和 where 子句，可能会有所改进。

2）tablea中大约有1-2百万行要更新到tableB。使用显式临时表可能会减慢速度。

3）使用事务可能会减慢，但这似乎是唯一的方法。

4）更新数据可能是比删除和插入更好的选择（我应该选择哪一个？）

我想找到一种更好的性能方式（包括重新设计表格等）。下面是目前的方式：

下面的伪代码：

```
start/begin transaction here    

DELETE from tableb data that I want to insert below, e.g. delete data where Code = 'code'

INSERT INTO tableb(Code, Total)
SELECT sum(a.Code, price)
FROM tablea a
GROUP BY a.Code;

IINSERT INTO tableb(Code, Total)
SELECT sum(a.Code price)   -- use price
FROM tablea a
WHERE a.meanPrice IS NOT NULL
GROUP BY a.Code;

INSERT INTO tableb(Code, Total)
SELECT sum(a.Code, meanPrice )   -- use meanPrice
FROM tablea a
WHERE a.meanPrice IS NOT NULL
GROUP BY a.Code;

Commit transaction here 
```

它适用于 MySQL，但理想情况下它应该是通用的。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T20:57:49.813

你真的需要更新表中的值吗？它们没有用任何 id 或名称标记来识别它们。

以下 SELECT 语句返回您想要的数据：

```
SELECT code,
       sum(price),
       sum(case when a.meanPrice is not null then price else 0 end),
       sum(case when a.meanPrice is not null then meanprice else 0 end)
FROM tablea a
GROUP BY a.Code; 
```

如果您需要将其插入到临时表中，您可以取消透视数据。但是，这种格式对我来说没有意义。您能解释一下为什么要以这种方式使用带有一个数字列的表格吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T20:42:14.107

第 3 点是错误的。

解决方案 1：创建存储过程。

解决方案 2：在受影响的表上创建触发器。

解决方案3：不要每次都求和，第一次求和，然后将数字保存在另一个表中。在这张表的每一次修改中，对你的新表求和，我不会有 100 万条记录，每张表只有一条。

数据透视表！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T20:52:44.767

此查询`INSERT`分 1 步完成您的任务，但是......孩子们，如果没有实际测量实际性能，请不要在家中执行此操作：

[http://sqlfiddle.com/#!2/381e2/9](http://sqlfiddle.com/#!2/381e2/9)

```
INSERT INTO tableb(Total)
SELECT
  CASE
    WHEN t.v = 1
    THEN SUM( price )

    WHEN t.v = 2
    THEN SUM(
           CASE
           WHEN meanPrice IS NOT NULL THEN price
           ELSE 0
           END
         )

    WHEN t.v = 3
    THEN SUM( meanPrice )
  END AS Total

FROM tablea

INNER JOIN
  ( SELECT 1 AS v UNION ALL
    SELECT 2 AS v UNION ALL
    SELECT 3 AS v
  ) AS t

GROUP BY tablea.Code, t.v; 
```

# c# - 将 linq to xml 列表传递到 asp.net gridview 中的列？

> ID：11676951
> 
> 赞同：0
> 
> 时间：2012-07-26T19:48:56.027
> 
> 标签：c#, asp.net, linq-to-xml

**XML**

```
<Parent Name="Jodi">
<Children Name="xxx" age="20">
<Children Name="zzz" age="21">
</Parent>

<Parent Name="John">
<Children Name="aaa" age="18">
<Children Name="bbb" age="17">
</Parent> 
```

**C＃：**

```
//Loading the xml file
var xmlDoc=Xdocument.Load(xmlpath);
//Querying the names of the parents from the above xml file.
var parentlist=(from p in xmlDoc.Descendants("Parent")
                select p.Attribute("Name").value.ToString();
List<string> PList= new List<string>();
PList=parentList.ToList();

//passing to list to the gridview in asp.net web page:
 gvParentsList.DataSource=PList;
 gvParentsList.DataBind(); 
```

**ASP.NET：**

```
<asp:GridView runat="server" ID="gvParentsList" AutoGenerateColumns="false">
<Columns>
<asp:TemplateField HeaderText="Parents Name">
<ItemTemplate>
<asp:Label ID="lblParent" runat="server" Text='<%#Bind(PList) %>' ></asp:Label>
</ItemTemplate>
</asp:TemplateField>
</Columns>
</asp:GridView> 
```

我无法将“PList”值传递给 grdview 中的列。我可以从上面的代码中查询名称，但无法显示到 gridview。

有人可以指导我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:05:49.247

试试这个：

```
 var xmlPath = @"C:\Projects\Research\StackOverflow\StackOverflow\test.xml";

        // Loading the xml file
        var xmlDoc=XDocument.Load(xmlPath);

        // Querying the names of the parents from the above xml file.
        var parentList = from p in xmlDoc.Descendants("Parent") select new { Name = p.Attribute("Name").Value };

        var PList=parentList.ToList();

        //passing to list to the gridview in asp.net web page:
         gvParentsList.DataSource = PList;
         gvParentsList.DataBind(); 
```

然后像这样绑定：

```
<asp:Label ID="lblParent" runat="server" Text='<%#Bind("Name") %>'></asp:Label> 
```

# java - Android 将 unix 时间戳设置为 DatePicker

> ID：11676961
> 
> 赞同：3
> 
> 时间：2012-07-26T19:49:38.797
> 
> 标签：java, android, date, datepicker

我正在尝试使用以下代码为 Android DatePicker 设置 unix 时间戳：

```
Date date = new Date();
date.setTime(((long)unixTimeStamp*1000));
datePickerDateDue.init(date.getYear(), date.getMonth(), date.getDay(), null); 
```

但 Android DatePicker 设置为错误值（1900 年 1 月 1 日）

((((我不喜欢玩日期...)))

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T20:21:02.563

根据评论，尝试使用`Calendar`该类。您还可以`Log`输出`year`、`month`和`day`以确保它们是正确的。

```
Calendar c = Calendar.getInstance();
c.setTimeInMillis(((long) unixTimeStamp) * 1000L);
int year = c.get(Calendar.YEAR);
int month = c.get(Calendar.MONTH);
int day = c.get(Calendar.DAY_OF_MONTH);
datePickerDateDue.init(year, month, day, null); 
```

# jquery - a:not(a:not([href])) 选择器

> ID：11676962
> 
> 赞同：10
> 
> 时间：2012-07-26T19:49:55.937
> 
> 标签：jquery, javascript-events

我希望某个动作与锚标签的点击事件相关联，只要它的`href`属性：

*   不以`mailto:`and开头
*   不以`#`and结尾
*   存在任何值，包括空

所以我正在尝试这段代码：

```
<a href="example.com">example.com</a>
<a href="mailto:someone@www.example.com">Someone</a>
<a href="thepage#">The Page</a>
<a>This does nothing</a>

<script type="text/javascript">
    $(document).on('click', 'a:not([href^="mailto\\:"], [href$="\\#"], [href])', myFunction);
</script> 
```

它没有用。但令我沮丧的是，这行得通：

```
$(document).on('click', 'a:not([href^="mailto\\:"], [href$="\\#"], a:not([href]))', myFunction); 
```

但我不明白怎么做。注意内部`:not()`。据我了解，这`[href]`意味着没有`href`属性。还是相反？

有人能带领我走向光明吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T19:51:45.103

`[href]`意味着无论它具有哪个值（如果有），都存在一个 href 属性。

正如 pimvdb 正确指出的那样，您可以使用

`a[href]:not([href^="mailto\\:"], [href$="\\#"])`

这意味着“具有任何 href 属性的所有 a 元素，除了那些 href 属性以 mailto: 开头或以 # 结尾的元素

# javascript - 取决于更改标签的下拉选项

> ID：11676966
> 
> 赞同：0
> 
> 时间：2012-07-26T19:50:03.317
> 
> 标签：javascript, jquery, html

我有以下用于下拉菜单和输入框的代码：

```
<select id="ci_binfo_affiliation_type" style="" onblur="updateptcname()" onchange="changecolor()" name="ci_binfo_affiliation_type" class="styled">
  <option <? if ($ci_binfo_affiliation_type == "") echo 'selected'; ?> value="">Select</option>
   <option <? if ($ci_binfo_affiliation_type == "work") echo 'selected'; ?> value="work">work</option>
  <option <? if ($ci_binfo_affiliation_type == "Other") echo 'selected'; ?> value="Other">Other</option>
</select>
<label class="formlbl" for="name_aftd">Name of (affiliation)</label>
<div class="formbitem">
      <input id="ci_binfo_affiliation_name" type="text" onchange="updateptcname()" name="ci_binfo_affiliation_name" value="<?=$ci_binfo_affiliation_name?>" class="inputtext2" />
    </div> 
```

我想要发生的是：如果用户在下拉菜单中选择“学校”，那么在“（附属机构）名称”标签中必须更改为学校名称“。

任何人都可以帮助我，我该怎么做...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T20:08:40.890

请[在 jsfiddle 上查看此示例](http://jsfiddle.net/dj5z7/2/)。它将一个函数绑定到`select`元素的更改事件。此函数获取(id :) 中的新`span`元素并将其文本内容设置为 selected 的值。`label``affiliation-placeholder``option`

您可能想要清理其他事件侦听器（例如在我的示例`changecolor`中抛出一个）。`is not defined`首选方法是从 JavaScript 代码绑定侦听器，而不是在 HTML 中内联。

```
document.getElementById("ci_binfo_affiliation_type")
    .addEventListener("change",function(){
        document.getElementById("affiliation-placeholder").textContent = this.value;
}) 
```

使用 jQuery 1.7（也使用了`span`我添加的新版本，但如果需要，可以轻松调整）：

```
$("#ci_binfo_affiliation_type").on("change", function(){
    $("#affiliation-placeholder").text($(this).val());       
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:56:15.867

这是你要找的吗？

```
$("#ci_binfo_affiliation_type").change(function() {
    $("label[for='name_aftd']").text("Name of " + $(this).val());
}); 
```

# wpf - 来自单个类的 TreeView 和 HieracrhicalDataTemplate

> ID：11676967
> 
> 赞同：0
> 
> 时间：2012-07-26T19:50:05.097
> 
> 标签：wpf, treeview

我有一堂课：

```
class WorkOrder
{
    public string Building {get; set;}
    public string Area {get; set;}
    public string Name {get; set;}
    List<Item> Items {get; set;}
} 
```

我目前的排序是这样的：

```
-Name
    -Item
    -Item
-Name
    -Item
    -Item 
```

像这样的xml：

```
<HierarchicalDataTemplate DataType="{x:Type WorkOrder}" ItemsSource="{Binding Items}" >
    <TextBlock Text="{Binding Path=Name} Margin="5,0" />
</HierarchicalDataTemplate>
<DataTemplate DataType="{x:Type Item}">
    <TextBlock Text="{Binding Path=Name}" />
</DataTemplate> 
```

我想在 TreeView 中对此进行排序，例如：

```
Building
    -Area
        -Name
        -Name
    -Area
        -Name
        -Name 
```

不确定我是否应该查看 MultiBinding 或其他地方。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:23:38.220

我想不出任何仅使用绑定或 XAML 的方法。我假设您不想更改您的 WorkOrder 或 Item 类（因为如果您想要/被允许更改它们，您可以在对象层次结构中的另一层中进行）。

作为 UI 方面的解决方法，您可以执行以下操作：

1）添加一个类来保存建筑物的分组信息

```
public class BuildingGroup
{
    public string Name { get; set; }
    public IEnumerable<WorkOrder> Orders { get; set; }
} 
```

2) 创建一个转换器，将您当前的工作订单集合转换为建筑组的集合

```
public class GroupingConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var workOrders = (IEnumerable<WorkOrder>)value;

        return GroupTheseBadBoysByBuilding(workOrders);
    }

    private IEnumerable GroupTheseBadBoysByBuilding(IEnumerable<WorkOrder> workOrders)
    {
        var buildingGroups = workOrders.GroupBy(w => w.Building);

        foreach (var buildingGroup in buildingGroups)
        {
            yield return new BuildingGroup
            {
                Name = buildingGroup.Key,
                Orders = buildingGroup,
            };
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

3) 为建筑群设置数据模板

```
 <HierarchicalDataTemplate DataType="{x:Type local:BuildingGroup}" ItemsSource="{Binding Orders}" >
        <TextBlock Text="{Binding Path=Name}" Margin="5,0" />
    </HierarchicalDataTemplate> 
```

4）创建转换器的一个实例并在你的树视图上使用它

```
<TreeView ItemsSource="{Binding Path=Orders,Converter={StaticResource testConverter}}" /> 
```

我认为这种方法的唯一主要警告是您将丢失任何 INotifyCollectionChanged 处理（不知道您是否正在使用它！）

# clearcase-ucm - 流结构

> ID：11676969
> 
> 赞同：1
> 
> 时间：2012-07-26T19:50:19.760
> 
> 标签：clearcase-ucm

我们有两个结构，从 PROD_int 开始的阶梯是 release_Int 的子级，然后是维护/修补程序的子级以及 projectA_Int，projectA 有 deploy 和 dev 的子级以及 projectB_int，projectB 有 deploy 和 dev 的子级和 projectC_int，然后 ProjectC 有子级部署和开发。另一个是主线，其中 Prod_int、maintenance_int、hotfix_int、projectA_int 和 projectB_int 都在同一个下线，并且每个（除了 PROD）都有一个部署和开发子流这个阶梯交付似乎需要更长的时间；但后者似乎有更多的合并冲突；不确定是结构还是我们使用它们的方式

一个会比另一个导致更多的合并吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:12:12.363

所以基本上：

```
PROD_Int
  |
  --Release_Int
    |
    --Maintenance_Int
      |
      --HotFix

ProjectA/B/C
  |
  --deploy
  |
  --dev 
```

比。

```
Int
|
--Prd_Int
|
--maintenance_int
|
--hotfix_int
|
--ProjectA/B_Int 
```

在阶梯场景中需要时间的是交付/重新设置周期。
但是**每次您需要整合来自子流的代码时，父流很有用**。
如果您只是想表示开发生命周期中的不同步骤，那么父流是有害的，因为人为需要交付，然后基于其他流重新定位。

我建议采用混合方法，包含 2 个 UCM 项目：

*   一种致力于集成、产品和修补程序，
*   一个致力于开发。

当发布日期临近时，您可以开始从一个（开发）项目交付到集成，然后冻结您的功能流，在发布时变基为 prod，然后基于修补程序变基以进行发布后维护。

不要试图将“部署”和“开发”混为一谈：它们的配合不太好。

*   Dev is parent for many feature substream.
*   Deploy can is the children of 'Integration', where you have consolidated what will actually goes into production.

# c# - 如何读取 ASP.NET 原始 URL 的查询字符串参数？

> ID：11676975
> 
> 赞同：21
> 
> 时间：2012-07-26T19:50:29.753
> 
> 标签：c#, asp.net, url, parameters, query-string

我有一个变量

```
string rawURL = HttpContext.Current.Request.RawUrl; 
```

如何读取此 url 的查询字符串参数？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-26T20:04:55.973

这可能就是你所追求的

```
 Uri theRealURL = new Uri(HttpContext.Current.Request.Url.Scheme + "://" +   HttpContext.Current.Request.Url.Authority + HttpContext.Current.Request.RawUrl);

   string yourValue= HttpUtility.ParseQueryString(theRealURL.Query).Get("yourParm"); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-26T19:53:17.153

无需通过`RawUrl`-`Request`对象已经包含一个解析的版本，使用该[`Request.QueryString`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.querystring.aspx)属性。

这是一个索引[`NameValueCollection`](http://msdn.microsoft.com/en-us/library/system.collections.specialized.namevaluecollection.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-28T20:19:04.120

试试这个：

`string rawURL = HttpContext.Current.Request.ServerVariables["query_string"];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T19:53:26.083

Request 对象上有 Params 属性，可让您轻松完成。您不必自己解析它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-13T12:40:41.497

在 .NET Core 中有多种访问方式，`HttpContext`例如`IHttpContextAccessor`.

[https://docs.microsoft.com/en-us/aspnet/core/fundamentals/http-context?view=aspnetcore-5.0](https://docs.microsoft.com/en-us/aspnet/core/fundamentals/http-context?view=aspnetcore-5.0)

当你有上下文时，你可以简单地使用这个方法：

```
httpContext.Request.QueryString.Value 
```

用法：

网址：https://localhost:44335/test?key=123

```
var key = System.Web.HttpUtility.ParseQueryString(httpContext.Request.QueryString.Value).Get("key"); 
```

[![在此处输入图像描述](../Images/19dbb5ec90aa6d474292671b26b6d2c1.png)](https://i.stack.imgur.com/IcmGL.png)

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2014-04-09T13:20:38.730

这将解决你的问题......

```
string strReq = "";
strReq = HttpContext.Current.Request.RawUrl;
strReq = strReq.Substring(strReq.IndexOf('?') + 1); 
```

# ruby-on-rails - Rails Ajax 还是 Javascript？

> ID：11676981
> 
> 赞同：0
> 
> 时间：2012-07-26T19:50:54.183
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我想知道哪种方式最适合我的以下问题。也许还有关于如何做的样本

我有以下模型：客户、音乐、书籍。

我想做的是当客户想要进入编辑页面时，会自动显示客户的一般信息，如姓名、密码！但是在另一个选项卡上，按下他的另一个模型的音乐，然后音乐信息也会出现。像 facebook 和 twitter 编辑页面这样的排序。

现在每个表单都由以下代码行呈现

```
<%= render 'general'%> 
```

但是我如何将它们包含在链接中，我应该只使用 javascript 并切换它们还是使用 ajax ？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:00:37.137

好吧，这与 Ajax 几乎没有关系，因为您需要的所有信息显然已经由您的主要客户对象加载。
我理解你想要的是类似于 twitter bootstrap 的 tabs javascript 插件：http: [//twitter.github.com/bootstrap/javascript.html#tabs](http://twitter.github.com/bootstrap/javascript.html#tabs)
你把不同的内容（音乐/书籍/等）放在不同的 div 中，什么时候单击选项卡，内容发生变化，用户获得更好的体验。
查看链接，在您的项目中设置此插件非常容易。

# jsf - 在同一个组件中使用 JSF 绑定 + 验证器显示消息两次

> ID：11676982
> 
> 赞同：0
> 
> 时间：2012-07-26T19:51:03.890
> 
> 标签：jsf

我有 2 个组件（select 和 inputText），其中的值相互依赖。例如，如果选择“选项 1”，则 inputText 必须是数字。

在我的 bean 中，我添加了用于绑定和验证方法的 2 个组件的属性，而在 jsp 中，我添加了“验证器”和“绑定”属性来选择和“绑定”到 inputText。

我使用绑定来获取两个组件的提交值以进行验证。

这是正确的方法吗？是否有替代方法来获取提交的值？

这样做的结果是显示重复的消息。如果我从 select 中删除绑定属性，那么它会按预期工作，但我无法获取所选值，而是使用缓存值（会话中的 bean 值）。

提前致谢。

阿尔梅罗

代码：

```
<p:selectOneMenu
value="#  {deploymentRequestViewBean.deploymentRequestDTO.deploymentRequest.requestLevel}"
id="requestLevel" required="true" label="requestLevel" 
validator="#{deploymentRequestViewBean.validateRequestDate}">
<p:ajax listener="#{deploymentRequestViewBean.processRequestLevelValueChanged}" 
binding="#{deploymentRequestViewBean.requestLevelSelectOne}"/>
<f:selectItem itemValue="" itemLabel="Select One" />
<f:selectItem itemValue="DEV" itemLabel="DEV" />
<f:selectItem itemValue="QUA" itemLabel="QUA" />
<f:selectItem itemValue="PRD" itemLabel="PRD" />
</p:selectOneMenu>

 <p:calendar
 value="#{deploymentRequestViewBean.deploymentRequestDTO.deploymentRequest.deployDate}"
 id="deployDate" required="true" label="deployDate" showOn="button" pattern="yyyy-  MM-dd" binding="#{deploymentRequestViewBean.requestDateInput}"/>
<p:spacer width="10" height="10" /> 

//for component-binding
private UISelectOne requestLevelSelectOne;
private UIInput requestDateInput;

//validation method
public void validateRequestDate(FacesContext facesContext,
    UIComponent component, Object newValue){

//get the current value of select;
requestLevelSelectOne.getSubmittedValue();
//get the current vallue of input;
requestDateInput.getSubmittedValue()

if(not valid combination){
           facesContext.addMessage(requestDateInput.getClientId(facesContext), new  FacesMessage(FacesMessage.SEVERITY_ERROR, "Error", selectedLevel + " deployment request requires at least 2 days."));
        throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR, "Error", "Deployment date must be at least 2 days."));
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:43:28.060

您可以通过将隐藏的组件值与选择组件绑定来使用 hack 绕过。在您的“onchange”方法中，您`<h:selectOneMenu>`可以设置此隐藏组件的值并获取服务器中的值：

```
<h:form id="myForm">
    <h:selectOneMenu id="cmbOptions"
        onchange="document.getElementById('myForm:hidSelectOption').value=this.value">
        <f:selectItem itemLabel="Option 1" itemValue="1" />
        <f:selectItem itemLabel="Option 2" itemValue="2" />
        <f:selectItem itemLabel="Option 3" itemValue="3" />
    </h:selectOneMenu>
    <h:inputHidden id="hidSelectOption" value="#{bean.selectedOption}" />
    <h:commandButton value="Click me" action="#{bean.someAction}" />
</h:form> 
```

托管 Bean

```
@RequestScope
@ManagedBean
public class Bean {
    private String selectedOption;
    //getters and setters...
    public Bean() {
    }

    public void someAction() {
        //showing the actual value of the hidden component...
        //remember that you should use a logger, this is a basic example
        System.out.println(selectedOption);
    }
} 
```

# c# - 注入接口的ninject多重绑定

> ID：11676983
> 
> 赞同：7
> 
> 时间：2012-07-26T19:51:03.970
> 
> 标签：c#, .net, ninject

我有以下课程：

```
using System;

interface IA { }

class A1 : IA { }

class A2 : IA { }

class B
{
    public B(IA a) {}
}

class BProvider : Provider<B>
{
    IA _a;

    public BProvider(IA a) { _a=a; }

    protected override B CreateInstance(IContext context) { return new B(_a); }
} 
```

ninject 模块 Load() 代码：

```
Bind<IA>().To<A1>();
Bind<IA>().To<A2>();
Bind<B>().ToProvider<BProvider>(); 
```

主要代码：

```
kernel.GetAll<IA>(); // works fine
kernel.GetAll<B>(); // I expect to get IEnumerable<B> with two elements, but instead of this I get an error that there are multiple bindings of IA and ninject cannot determine which to use 
```

所以问题是我是否可以使最后一个语句按预期工作或以其他方式进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:26:20.743

它将抛出该异常，因为 Ninject 将需要创建 type 对象的实例`BProvider`。为此，它必须填写对`IA`. 但是片刻...... 有两个绑定`IA`，我应该选择哪个？...

您可以使用一些条件绑定来决定应该使用哪个实现。一种方法是`NamedAttribute`：

```
Bind<IA>().To<A1>();
Bind<IA>().To<A2>().Named("SecondImpl");
Bind<B>().ToProvider<BProvider>();

class BProvider : Provider<B>
{
    IA _a;

    public BProvider([Named("SecondImpl")]IA a) { _a=a; }

    protected override B CreateInstance(IContext context) { return new B(_a); }
} 
```

在这种情况下，A1 将作为默认注入，其中`NamedAttribute`未指定。

或者像@Remo Gloor 在这篇文章中解释的那样：[配置 Ninject](https://stackoverflow.com/questions/6627894/configuring-ninject)

```
Bind<IA>().To<A1>();
Bind<IA>().To<A2>().WhenParentNamed("NeedSecondImpl");
Bind<B>().ToProvider<BProvider>().Named("NeedSecondImpl"); 
```

这有点干净，因为您不必将代码绑定到 Ninject 并且可以让它配置（在一个地方）。

# iphone - Xcode 4.4 - 内联汇编问题

> ID：11676988
> 
> 赞同：0
> 
> 时间：2012-07-26T19:51:30.447
> 
> 标签：iphone, xcode, assembly, llvm, objective-c++

在 Xcode 4.4 中，当我尝试构建具有用汇编语言编写的方法的 iOS 项目时出现错误。我收到此行**vqrdmulh.s16 q2, q13**的错误“内联汇编问题 - 指令操作数无效” 。我尝试使用 LLVM 4.0 和 LLVM GCC 4.2 进行编译，但我得到了同样的错误。项目在以前版本的 Xcode 中编译良好。

有人知道如何解决这个错误吗？谢谢。

# c - 使用计时器时处理“中断的系统调用”错误

> ID：11676991
> 
> 赞同：1
> 
> 时间：2012-07-26T19:51:34.610
> 
> 标签：c, linux, system

我正在编写一个应用程序，它使用计时器以固定采样率（200Hz）进行一些数据采集和处理。该应用程序就像一个服务器并在后台运行。它应该可以从其他进程或来自 UDP 的其他机器控制。

为此，我使用 timer_create() API 定期生成 SIGUSR1 并调用执行获取和处理的处理程序。

配置定时器的代码如下（为了清楚起见减去错误检查）：

```
sa.sa_flags = SA_SIGINFO;
sa.sa_sigaction = handler;
sigemptyset(&sa.sa_mask);
sigaction(SIGUSR1, &sa, NULL);
sev.sigev_notify = SIGEV_SIGNAL;
sev.sigev_signo = SIGUSR1;
sev.sigev_value.sival_ptr = &timerid;
timer_create(CLOCK_REALTIME, &sev, &timerid);
timer_settime(...) 
```

当从 UDP 接收到“开始”命令时，将调用上面的代码。为了检查命令，我在调用 recvfrom() 系统调用的主程序中有一个无限循环。

**问题是，当收到“开始”命令，然后定时器正确启动并运行（使用上面的代码）时，由于定时器发送的 SIGUSR1 信号，我得到一个“系统调用中断”错误（EINTR）中断 recvfrom() 调用。如果我检查这个特定的错误代码并忽略它，我最终会在调用 recvfrom() 时收到“连接被拒绝”错误。**

所以这里是我的问题：

1.  如何解决这个“中断的系统调用”错误，因为它似乎忽略它并重新执行 recvfrom() 不起作用？
2.  为什么我在尝试大约 20 次后收到“连接被拒绝”错误？
3.  我觉得使用 SIGEV_THREAD 可能是一种解决方案，据我了解，创建一个新线程（如 phread_create）而不生成信号。我对吗？
4.  信号编号在这里重要吗？使用实时信号有什么好处吗？
5.  有没有其他方法可以做我想做的事情：让后台循环检查来自 UDP 的命令和实时定期任务？

这里是奖金问题：

*   在处理程序中进行数据采集和处理是否安全，或者我应该使用信号量机制来唤醒执行此操作的线程？

**解决方案：** 正如答案和评论中所建议的那样，使用 SA_RESTART 似乎可以解决主要问题。

**解决方案 2：** 在 SIGEV_SIGNAL 上使用 SIGEV_THREAD 也可以。我在某处读到使用 SIGEV_THREAD 可能需要比 SIGEV_SIGNAL 更多的资源。但是，我没有看到关于任务时间的显着差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:30:39.593

鉴于您使用的是 Linux，我会选择使用`timerfd_create`。

这样你就可以只使用[select(2)](http://linux.die.net/man/2/select)、[poll(2)](http://linux.die.net/man/2/poll)或[epoll(7)](http://linux.die.net/man/7/epoll)来处理计时器事件，而不会遇到主循环中的信号处理程序的困难。

至于`EINTR`（中断的系统调用），只需重新启动被中断的特定系统调用即可正确处理这些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T20:33:08.460

定时器倾向于使用 SIGALARM 来实现。

包括 SIGALARM 在内的信号接收往往会导致长时间运行的系统调用提前返回，并且 EINTR 在 errno 中。

SA_RESTART 是解决此问题的一种方法，因此因收到信号而中断的系统调用将自动重新启动。另一种方法是从系统调用的 errno 中检查 EINTR，并在收到 EINTR 时重新启动它们。

使用 read() 和 write() 当然，你不能只是重新启动，你需要从你离开的地方继续。这就是为什么这些返回传输的数据长度的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T04:36:34.400

重新启动中断的系统调用是对`EINTR`. 您的“连接被拒绝”问题是一个不相关的错误 - 在 UDP 套接字上，它表明在该套接字上发送的先前数据包被目的地拒绝（通过 ICMP 消息通知）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T18:49:44.630

问题 5：您对消息和实时周期线程的使用完全没问题。但是，我建议您完全避免使用计时器，因为它们使用信号。我自己也遇到过这个问题，并最终用一个简单的clock_nanosleep() 替换了计时器，它使用TIMER_ABSTIME 更新时间以保持所需的速率（即，将周期添加到绝对时间）。结果是更简单的代码，没有更多的信号问题，并且比基于信号的计时器更准确的计时器。顺便说一句，您应该在处理程序中测量计时器的周期，以确保它足够准确。我使用计时器的经验是 8 年前，因此可能会解决准确性问题。然而，信号的其他问题是信号本身固有的，因此无法“解决”——只能解决。

此外，我认为从处理程序获取数据没有问题，它肯定会减少检索数据的延迟。

# c - 维护指向地址的指针链

> ID：11676995
> 
> 赞同：1
> 
> 时间：2012-07-26T19:51:55.470
> 
> 标签：c, pointers

这是[我之前提出的问题](https://stackoverflow.com/questions/11670902/nullifying-a-value-from-a-pointer)的后续。我仍在学习指针的方法，并且发现在迭代数据结构时很难维护对结构的物理地址的引用。例如，我有一个简单的准系统链表，我想通过搜索指针从中删除：

```
struct Node{
    int value;
    struct Node* next;
};

struct Node* createNode(int value){
    struct Node* newNode = malloc(sizeof *newNode);
    newNode->value = value;
    newNode->next = NULL;
    return newNode;
}

void nodeDelete(Node **killptr){
    free(*killptr);
    *killptr = NULL;
}

int main(){
    struct Node* head = createNode(16);
    head->next = createNode(25);
    head->next->next = createNode(51);
    head->next->next->next = createNode(5);

    // Working code to delete a specific node with direct reference address
    struct Node** killptr = &head->next;
    nodeDelete(killptr);

    return 0;
} 
```

`nodeDelete`上面显示了通过将指针传递给头指针的地址来进行删除。我*想要*做的是能够移动我的指针`->next`，直到它找到满足删除条件的东西，然后调用`nodeDelete`它。我尝试了以下方法：

```
struct Node* searchAndDestroy = head;
while(searchAndDestroy->value != NULL){  // Search until the end of the structure
    if (searchAndDestroy->value == 25){  // If the value == 25
        nodeDelete(&searchAndDestroy);   // Delete the node (FAILS: Nullifies the 
                                         //   address of search variable, not the 
        break;                           //   original node)
    }else{
        searchAndDestroy = searchAndDestroy->next;
    }
} 
```

我也尝试过类似的东西：

```
if (searchAndDestroy->value == 25){
    struct Node** killptr = (Node**)searchAndDestroy);
    nodeDelete(killptr);                                // Still fails
} 
```

我需要能够将我的指针移动到 ->next 点，但**还要**保持对我要删除的节点地址的引用（而不是对搜索节点本身地址的引用）。

编辑：**一些澄清**：我意识到以这种方式从链表中删除是幼稚的，泄漏内存，并且不正确地删除了一半的列表。关键不是要从链表中实际删除。最终的想法是使用它递归地删除二叉搜索树的叶子。我只是认为在问题中描述一个链接列表会更短作为一个例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T20:16:50.650

```
struct Node **searchAndDestroy;

for (searchAndDestroy = &head;*searchAndDestroy; searchAndDestroy = &(*searchAndDestroy)->next ){  
    if ((*searchAndDestroy)->value == 25){ 
        nodeDelete(searchAndDestroy); // Function should be changed to assign the ->next pointer to the **pointer  

        break;                           

    }
} 
```

并像这样更改 nodeDelete：

```
void nodeDelete(Node **killptr){
    Node *sav;
    if (!*killptr) return;
    sav = (*killptr)->next;
    free(*killptr);
    *killptr = sav;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T20:07:25.840

除非我遗漏了什么，否则您的`nodeDelete`功能按设计工作，但您希望保持访问链中下一个节点的方式。最简单的方法就是添加一个临时变量：

```
struct Node *searchAndDestroy = head, *temp = NULL;
while(searchAndDestroy != NULL){ // Need to check if the node itself is null before
                                 // dereferencing it to find 'value'
    temp = searchAndDestroy->next;
    if (searchAndDestroy->value == 25){
        nodeDelete(&searchAndDestroy);
        break;
    }else{
        searchAndDestroy = temp;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T06:16:58.697

如果您提供前一个节点的地址，即删除节点的链接所在的位置，那么这是非常简单的代码片段：-

```
void delete_direct (struct Node *prevNode)
 {/*delete node but restrict this function to modify head .So except first node use this function*/
      struct Node *temp;/*used for free the deleted memory*/
      temp=prevNode->link;
      prevNode->link=temp->link;
      free(temp);
 }

struct Node * find_prev(struct Node *trv_ptr,int ele)
 {
    /*if deleting element found at first node spl operation must be done*/ 
    if(trv_ptr->data==ele)
      return trv_ptr;
    while((trv_ptr->link)&&(trv_ptr->link->data!=ele))
      {
        trv_ptr=trv_ptr->link;
      }
   if(trv_ptr->link==NULL)
     {
         return NULL;
    }
   else
        return trv_ptr;
 }

 main()
  {
    /*finding Node by providing data*/
    struct Node *d_link;
    struct Node *temp;
    d_link=find_prev(head,51);
    if(d_link==NULL)
       {//data ele not present in your list
          printf("\nNOT FOUND\n");
       }
    else if(d_link==head)
      {//found at first node so head is going to change
        temp=head;
        head=head->link;
        free(temp)
      }
    else
     {//other wise found in some where else so pass to function
        delete_direct (d_link);
     }

  } 
```

# android - 如何让 SQLite.net 与 Mono Android 一起工作？

> ID：11676999
> 
> 赞同：2
> 
> 时间：2012-07-26T19:52:09.470
> 
> 标签：android, database, sqlite, xamarin.ios, xamarin.android

我在 MonoTouch 项目中成功使用了 SQLite-net ( [https://github.com/praeclarum/sqlite-net](https://github.com/praeclarum/sqlite-net) )。但是，当我尝试在 Mono Android 中使用它时，数据库调用会在 Prepare2 方法中引发异常。

我在我的 Android 项目中按原样使用 SQLite-Net 文件。
我是否需要针对 MonoAndroid 进行任何更改？

任何帮助高度赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T21:02:37.647

[这篇博文](http://www.gregshackles.com/2011/02/using-a-database-in-monodroid-applications/)详细介绍了如何在 Mono for Android 应用程序中使用 SQLite-net。我还建议查看[由 Xamarin 创建的 MWC 应用程序，](http://blog.xamarin.com/2012/02/24/mwc_2012/)这是最近在应用程序中使用该库的一个很好的示例。

如果您仍然遇到问题，请提供有关问题所在的一些详细信息（异常类型/文本、堆栈跟踪等）。